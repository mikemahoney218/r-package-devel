From obr|@o||@u @end|ng |rom gm@||@com  Sat Jul  1 07:58:05 2023
From: obr|@o||@u @end|ng |rom gm@||@com (obrl soil)
Date: Sat, 1 Jul 2023 05:58:05 +0000
Subject: [R-pkg-devel] How to request for an Non Maintainer update - NMU
In-Reply-To: <ME3PR01MB7944B16B926E4A1700E2ECCCD452A@ME3PR01MB7944.ausprd01.prod.outlook.com>
References: <ME3PR01MB7944B16B926E4A1700E2ECCCD452A@ME3PR01MB7944.ausprd01.prod.outlook.com>
Message-ID: <DB4PR05MB1055933A638174C5584A8D2B9FC2BA@DB4PR05MB10559.eurprd05.prod.outlook.com>

Hi,

A note for the list, since this may pop up again: ggtern is not abandoned, and is back on CRAN. The active development repo is on bitbucket at https://bitbucket.org/nicholasehamilton/ggtern/src/master/ 

There is also a github repo https://github.com/nicholasehamilton/ggtern that is not active, but does get pinged regularly because its not been made clear that development is ongoing elsewhere. The package DESCRIPTION URL field points to http://www.ggtern.com/, but its not obvious where the active repo is until you navigate to http://www.ggtern.com/docs/ and look at the dev url quoted. 

I wonder if it should be CRAN policy that the DESCRIPTION URL points only to an active repo, but I imagine there would be a significant policing burden associated with such a change.

L

From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Bernd.Gruber <Bernd.Gruber at canberra.edu.au>
Sent: Tuesday, June 6, 2023 6:04 PM
To: r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: [R-pkg-devel] How to request for an Non Maintainer update - NMU 
?
Hi everyone,

I am the maintainer of a package (dartR) that depends on ggtern (a package that seems not to be maintained anymore).
Currently the package was removed from CRAN (about 4 weeks ago) due to a simple error, which can be easily fixed. This was kindly achieved by Roger Bivand (simply the remove of a backslash does the trick).

In an github exchange he also suggested to have an non maintainer update (NMU) for the package in the short term (and find a replacement of orphan the package and find a new maintainer in the long term).

Here is my first question as I did not find an answer googling it.

How can I ask, request for an NMU? Would I simply write to CRAN and describe the situation and send the files that need to be replaced?

The second question is, how I would request to orphan the package and what is the procedure to find a new maintainer (as it relies on ggplot code and this is not really my strength, hence I would try to find someone else to take over).

Thanks a lot, Bernd



==============================================================================
Dr Bernd Gruber????????????????????????????????????????????? )/_
???????????????????????????????????????????????????????? _.--..---"-,--c_
Professor Ecological Modelling????????????????????? \|..'?????????? ._O__)_
Tel: (02) 6206 3804???????????????????????? ,=.??? _.+?? _ \..--( /
Fax: (02) 6201 2328?????????????????????????? \\.-''_.-' \ (???? \_
Institute for Applied Ecology????????????????? `'''?????? `\__?? /\
Faculty of Science and Technology????????????????????????? ')
University of Canberra?? ACT 2601 AUSTRALIA
Email: bernd.gruber at canberra.edu.au<mailto:bernd.gruber at canberra.edu.au>
WWW: bernd-gruber<https://researchprofiles.canberra.edu.au/en/persons/bernd-gruber>

Australian Government Higher Education Provider Number CRICOS #00212K
NOTICE & DISCLAIMER: This email and any files transmitted with it may contain
confidential or copyright material and are for the attention of the addressee
only. If you have received this email in error please notify us by email
reply and delete it from your system. The University of Canberra accepts
no liability for any damage caused by any virus transmitted by this email.
==============================================================================

[UC Logo]<http://www.canberra.edu.au>

[Research Festival,5-8 June 2023]<https://www.canberra.edu.au/about-uc/events/research-festival/research-festival-2023>



The Ngunnawal people are the Traditional Custodians of the ACT where UC's Bruce Campus is situated and are an integral and celebrated part of UC's culture. We also acknowledge other First Nations Peoples.

Australian Government Higher Education Registered Provider (CRICOS) #00212K. TEQSA Provider ID: PRV12003 (Australian University)
Email Disclaimer<https://www.canberra.edu.au/about-uc/disclaimer-copyright-privacy-accessibility>

[UC Facebook]<https://www.facebook.com/UniversityOfCanberra>??? [UC Twitter] <https://twitter.com/UniCanberra>???? [UC Instagram] <https://www.instagram.com/unicanberra/>???? [UC Linkedin] <https://au.linkedin.com/school/university-of-canberra/>???? [UC Youtube] <https://www.youtube.com/user/uniofcanberra>???? [University of Canberra] <http://www.canberra.edu.au>

??????? [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

From kry|ov@r00t @end|ng |rom gm@||@com  Sat Jul  1 21:00:06 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sat, 1 Jul 2023 22:00:06 +0300
Subject: [R-pkg-devel] New R CMD check warnings for html files
In-Reply-To: <CAEO2ku+=nGbp2KqJNyXPPzFmo1nWGR7ePDL83cfC4AYm-WzK7Q@mail.gmail.com>
References: <CAEO2ku+=nGbp2KqJNyXPPzFmo1nWGR7ePDL83cfC4AYm-WzK7Q@mail.gmail.com>
Message-ID: <20230701220006.1ac80104@parabola>

? Fri, 30 Jun 2023 14:20:00 -0700
arilamstein at gmail.com ?????:

> However, when I run R CMD check I now get a ton of warnings in what I
> assume is the conversion of the man files from .Rd to .html files. I
> assume that CRAN will reject the package due to the warnings.
> However, I don't really understand the warnings, or why they are
> occurring now (they did not happen before).

roxygen2-7.2.3 seems to produce a lot of warnings on your source files.
I don't have a lot of experience with roxygen2, but they may be part of
the problem:

>> 38: [county.R:5] Undocumented R6 methods: initialize and clip
>> 39: [county.R:5] Undocumented R6 field: add_state_outline
>> 40: [county.R:5] Must use one @param for each argument
>> ? $initialize(user.df) is not documented

(and so on for more than 50 warnings... or is it something on my end?)

> The entire file has not changed in 3 years. When I run roxygenize()
> locally the .Rd file does look much (at all?) different than what was
> checked into github year ago

What does `git diff` say after you run roxygenise()? For me, latest
roxygen2 seems to lead to zero HTML warnings and zero Rd changes.

What are your versions of roxygen2 and HTML Tidy? Do you get the HTML
warnings when checking your package on R-hub, Win-Builder, or Mac
Builder?

-- 
Best regards,
Ivan


From chr|@ho|d @end|ng |rom p@yctc@org  Wed Jul  5 10:44:26 2023
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Wed, 5 Jul 2023 09:44:26 +0100
Subject: [R-pkg-devel] Help with a github/Rstudio mess
Message-ID: <fc59ef69-73fd-cb5e-fc96-3e13a5113115@psyctc.org>

I hope this is a legitimate question here.? I have a package of very 
simple functions: https://github.com/cpsyctc/CECPfuns.? For the forseeable
future it's really only to stop me constantly having to rewrite 
functions I use and it is only also used by probably two or three 
colleagues who
also use R and are even less IT/programming/R competent than I am and 
are very happy to use my functions.

I hadn't done any work on it for two years but came back to it yesterday 
and added a function (getCIforQuantiles).? There were warnings about
things that are deprecated now in some of the older functions but 
otherwise things seemed OK.? However, I got a pkgdown error and warning 
after
pushing the updated package to github:

Annotations
1 error and 1 warning
pkgdown
Failed to get R 4.3.1: Failed to get R 4.3.1: Failed to download version 
4.3.1: Error: Unexpected HTTP response: 404
r-lib/actions/setup-r at v1 is deprecated.
r-lib/actions/setup-r at v1 is deprecated. Please update your workflow to 
use the 'v2' version. Also look at the examples at 
https://github.com/r-lib/actions/tree/v2/examples because '@v2' 
workflows are much simpler than 'v1' workflows.

So I tweaked 
https://github.com/cpsyctc/CECPfuns/blob/main/.github/workflows/pkgdown.yaml 
to change
 ?? - uses: r-lib/actions/setup-r at v1
to
 ?? - uses: r-lib/actions/setup-r at v2
rather optimistically hoping that might make the warning go away.

Today I did some work on the new function (trivial, correcting one 
"!is.na(" to the correct "is.na(" !!!).? More importantly, I created the
test-getCIforQuantiles.R file for testthat to test the sanity checks and 
add three simple output checks.

I built the source package locally, committed the changes and tried to 
push the update to github (inside Rstudio) but I get:

 >>> /usr/bin/git push origin HEAD:refs/heads/main
To https://github.com/cpsyctc/CECPfuns.git
 ?! [rejected]??????? HEAD -> main (fetch first)
error: failed to push some refs to 'https://github.com/cpsyctc/CECPfuns.git'
hint: Updates were rejected because the remote contains work that you do
hint: not have locally. This is usually caused by another repository pushing
hint: to the same ref. You may want to first integrate the remote changes
hint: (e.g., 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.

OK.? So I try to pull thinking that made sense and that the change to 
pkgdown.yaml on github that I made yesterday is the offending change.

However, when I pull (in Rstudio again) I get this:

 >>> /usr/bin/git pull
fatal: pack has 6 unresolved deltas
fatal: fetch-pack: invalid index-pack output

I have never felt on top of the complexities of git and github but I'm 
clearly way out of my depth.? I am hoping someone here can see what
I need to do to get things back in synch and be able to get back to 
developing the package.

TIA,

Chris

-- 
Chris Evans (he/him)
Visiting Professor, UDLA, Quito, Ecuador & Honorary Professor, 
University of Roehampton, London, UK.
Work web site: https://www.psyctc.org/psyctc/
CORE site: http://www.coresystemtrust.org.uk/
Personal site: https://www.psyctc.org/pelerinage2016/


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jul  5 11:03:11 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 5 Jul 2023 05:03:11 -0400
Subject: [R-pkg-devel] Help with a github/Rstudio mess
In-Reply-To: <fc59ef69-73fd-cb5e-fc96-3e13a5113115@psyctc.org>
References: <fc59ef69-73fd-cb5e-fc96-3e13a5113115@psyctc.org>
Message-ID: <555198e1-0c39-f25a-8253-f115c4d2dbf9@gmail.com>

I think this isn't the right place to ask for this sort of help. Maybe 
stackoverflow instead?

What I'd do in this case is to rename the local dir holding the 
repository, then clone a new copy from Github.  Assuming that works, 
compare all the files to make sure that you have all recent changes,
commit any that were missed, then throw away the damaged one.

Duncan Murdoch

On 05/07/2023 4:44 a.m., Chris Evans wrote:
> I hope this is a legitimate question here.? I have a package of very
> simple functions: https://github.com/cpsyctc/CECPfuns.? For the forseeable
> future it's really only to stop me constantly having to rewrite
> functions I use and it is only also used by probably two or three
> colleagues who
> also use R and are even less IT/programming/R competent than I am and
> are very happy to use my functions.
> 
> I hadn't done any work on it for two years but came back to it yesterday
> and added a function (getCIforQuantiles).? There were warnings about
> things that are deprecated now in some of the older functions but
> otherwise things seemed OK.? However, I got a pkgdown error and warning
> after
> pushing the updated package to github:
> 
> Annotations
> 1 error and 1 warning
> pkgdown
> Failed to get R 4.3.1: Failed to get R 4.3.1: Failed to download version
> 4.3.1: Error: Unexpected HTTP response: 404
> r-lib/actions/setup-r at v1 is deprecated.
> r-lib/actions/setup-r at v1 is deprecated. Please update your workflow to
> use the 'v2' version. Also look at the examples at
> https://github.com/r-lib/actions/tree/v2/examples because '@v2'
> workflows are much simpler than 'v1' workflows.
> 
> So I tweaked
> https://github.com/cpsyctc/CECPfuns/blob/main/.github/workflows/pkgdown.yaml
> to change
>   ?? - uses: r-lib/actions/setup-r at v1
> to
>   ?? - uses: r-lib/actions/setup-r at v2
> rather optimistically hoping that might make the warning go away.
> 
> Today I did some work on the new function (trivial, correcting one
> "!is.na(" to the correct "is.na(" !!!).? More importantly, I created the
> test-getCIforQuantiles.R file for testthat to test the sanity checks and
> add three simple output checks.
> 
> I built the source package locally, committed the changes and tried to
> push the update to github (inside Rstudio) but I get:
> 
>   >>> /usr/bin/git push origin HEAD:refs/heads/main
> To https://github.com/cpsyctc/CECPfuns.git
>   ?! [rejected]??????? HEAD -> main (fetch first)
> error: failed to push some refs to 'https://github.com/cpsyctc/CECPfuns.git'
> hint: Updates were rejected because the remote contains work that you do
> hint: not have locally. This is usually caused by another repository pushing
> hint: to the same ref. You may want to first integrate the remote changes
> hint: (e.g., 'git pull ...') before pushing again.
> hint: See the 'Note about fast-forwards' in 'git push --help' for details.
> 
> OK.? So I try to pull thinking that made sense and that the change to
> pkgdown.yaml on github that I made yesterday is the offending change.
> 
> However, when I pull (in Rstudio again) I get this:
> 
>   >>> /usr/bin/git pull
> fatal: pack has 6 unresolved deltas
> fatal: fetch-pack: invalid index-pack output
> 
> I have never felt on top of the complexities of git and github but I'm
> clearly way out of my depth.? I am hoping someone here can see what
> I need to do to get things back in synch and be able to get back to
> developing the package.
>


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Jul  5 11:12:29 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 5 Jul 2023 12:12:29 +0300
Subject: [R-pkg-devel] Help with a github/Rstudio mess
In-Reply-To: <fc59ef69-73fd-cb5e-fc96-3e13a5113115@psyctc.org>
References: <fc59ef69-73fd-cb5e-fc96-3e13a5113115@psyctc.org>
Message-ID: <20230705121229.5f36c7e9@Tarkus>

On Wed, 5 Jul 2023 09:44:26 +0100
Chris Evans <chrishold at psyctc.org> wrote:

> OK.? So I try to pull thinking that made sense and that the change to 
> pkgdown.yaml on github that I made yesterday is the offending change.

You are right about this.

> However, when I pull (in Rstudio again) I get this:
> 
>  >>> /usr/bin/git pull  
> fatal: pack has 6 unresolved deltas
> fatal: fetch-pack: invalid index-pack output

I think it should be possible to get your work online if you push it
into a separate branch:

git checkout -b test-getCIforQuantiles
git push -u origin test-getCIforQuantiles

This still leaves the problem of merging it back into "main", but at
least you'll have a separate copy you'll be able to get back to.

Your clone of the repo seems to have become corrupted somehow. People
on the Internet mention that this may be related to "shallow" clones
(made with git clone --depth=...). `git fsck --full` may provide more
information, but will probably not be able to fix the problem. Removing
the "origin" remote and adding it back again may fix the problem, or
not. https://phabricator.wikimedia.org/T46129 is the most informative
discussion of this problem I could find, and they couldn't solve it
either.

If you have any other important local branches, push them to GitHub (in
a similar manner: git push origin LOCAL_BRANCH_NAME:REMOTE_BRANCH_NAME).
Move your current clone of the repository away and create it anew using
`git clone`. Once you have merged the branches into appropriate places,
you will be able to remove them using git branch -d BRANCH_NAME
(locally) and git push origin :BRANCH_NAME (on GitHub).

-- 
Best regards,
Ivan


From chr|@ho|d @end|ng |rom p@yctc@org  Wed Jul  5 12:04:53 2023
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Wed, 5 Jul 2023 11:04:53 +0100
Subject: [R-pkg-devel] Help with a github/Rstudio mess
In-Reply-To: <20230705121229.5f36c7e9@Tarkus>
References: <fc59ef69-73fd-cb5e-fc96-3e13a5113115@psyctc.org>
 <20230705121229.5f36c7e9@Tarkus>
Message-ID: <bf04b911-3544-d9ac-2474-d16ea241385f@psyctc.org>

First, apologies for being off topic.? I guess I can see that this was 
pretty pure git/github/Rstudio with hindsight.? I am very leary of
stackoverflow, probably wrongly, but I find such a mix of misinformation 
and showboating there.? By contrast this list is a haven for me
to learn. However, point taken and I will try to be focused on the R 
package side if I post here again (quite possible as so much of this
is at my outer limits in skills and experience).

So huge thanks to Ivan for so much background: not sure if it's 
depressing or reassuring to see that this seems to be an erratic but known
thing.? Huge thanks to Duncan as I decided that I understood more of his 
suggested fix than of Ivan's so I would start there ... and it
simply worked!

Many thanks both and to all who have taught me so much here,

Chris

On 05/07/2023 10:12, Ivan Krylov wrote:
> On Wed, 5 Jul 2023 09:44:26 +0100
> Chris Evans <chrishold at psyctc.org> wrote:
>
>> OK.? So I try to pull thinking that made sense and that the change to
>> pkgdown.yaml on github that I made yesterday is the offending change.
> You are right about this.
>
>> However, when I pull (in Rstudio again) I get this:
>>
>>   >>> /usr/bin/git pull
>> fatal: pack has 6 unresolved deltas
>> fatal: fetch-pack: invalid index-pack output
> I think it should be possible to get your work online if you push it
> into a separate branch:
>
> git checkout -b test-getCIforQuantiles
> git push -u origin test-getCIforQuantiles
>
> This still leaves the problem of merging it back into "main", but at
> least you'll have a separate copy you'll be able to get back to.
>
> Your clone of the repo seems to have become corrupted somehow. People
> on the Internet mention that this may be related to "shallow" clones
> (made with git clone --depth=...). `git fsck --full` may provide more
> information, but will probably not be able to fix the problem. Removing
> the "origin" remote and adding it back again may fix the problem, or
> not. https://phabricator.wikimedia.org/T46129 is the most informative
> discussion of this problem I could find, and they couldn't solve it
> either.
>
> If you have any other important local branches, push them to GitHub (in
> a similar manner: git push origin LOCAL_BRANCH_NAME:REMOTE_BRANCH_NAME).
> Move your current clone of the repository away and create it anew using
> `git clone`. Once you have merged the branches into appropriate places,
> you will be able to remove them using git branch -d BRANCH_NAME
> (locally) and git push origin :BRANCH_NAME (on GitHub).
>
-- 
Chris Evans (he/him)
Visiting Professor, UDLA, Quito, Ecuador & Honorary Professor, 
University of Roehampton, London, UK.
Work web site: https://www.psyctc.org/psyctc/
CORE site: http://www.coresystemtrust.org.uk/
Personal site: https://www.psyctc.org/pelerinage2016/
E


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Wed Jul  5 13:14:21 2023
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Wed, 5 Jul 2023 11:14:21 +0000
Subject: [R-pkg-devel] Help with a github/Rstudio mess
In-Reply-To: <555198e1-0c39-f25a-8253-f115c4d2dbf9@gmail.com>
References: <fc59ef69-73fd-cb5e-fc96-3e13a5113115@psyctc.org>
 <555198e1-0c39-f25a-8253-f115c4d2dbf9@gmail.com>
Message-ID: <CWLP265MB3505057F50801DF8829455E1AE2FA@CWLP265MB3505.GBRP265.PROD.OUTLOOK.COM>

If I understand correctly, the errors come from github actions run on github. I think that you should update them first, since github switched to new versions in the meantime.

Georgi Boshnakov

Sent from Outlook for Android<https://aka.ms/AAb9ysg>
________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Wednesday, July 5, 2023 10:03:11 AM
To: chrishold at psyctc.org <chrishold at psyctc.org>; r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Help with a github/Rstudio mess

I think this isn't the right place to ask for this sort of help. Maybe
stackoverflow instead?

What I'd do in this case is to rename the local dir holding the
repository, then clone a new copy from Github.  Assuming that works,
compare all the files to make sure that you have all recent changes,
commit any that were missed, then throw away the damaged one.

Duncan Murdoch

On 05/07/2023 4:44 a.m., Chris Evans wrote:
> I hope this is a legitimate question here.  I have a package of very
> simple functions: https://urldefense.com/v3/__https://github.com/cpsyctc/CECPfuns__;!!PDiH4ENfjr2_Jw!FZGzBDcbpIrmi_GwRh-AOLdv_s3ZxBSRedrQOny_05Q7aFCZq6Qz2deRH-xf1t-f2t_aYV98T4tnvzDCQlxqxh28IYKhYCCSSxRo1w$ [github[.]com].  For the forseeable
> future it's really only to stop me constantly having to rewrite
> functions I use and it is only also used by probably two or three
> colleagues who
> also use R and are even less IT/programming/R competent than I am and
> are very happy to use my functions.
>
> I hadn't done any work on it for two years but came back to it yesterday
> and added a function (getCIforQuantiles).  There were warnings about
> things that are deprecated now in some of the older functions but
> otherwise things seemed OK.  However, I got a pkgdown error and warning
> after
> pushing the updated package to github:
>
> Annotations
> 1 error and 1 warning
> pkgdown
> Failed to get R 4.3.1: Failed to get R 4.3.1: Failed to download version
> 4.3.1: Error: Unexpected HTTP response: 404
> r-lib/actions/setup-r at v1 is deprecated.
> r-lib/actions/setup-r at v1 is deprecated. Please update your workflow to
> use the 'v2' version. Also look at the examples at
> https://urldefense.com/v3/__https://github.com/r-lib/actions/tree/v2/examples__;!!PDiH4ENfjr2_Jw!FZGzBDcbpIrmi_GwRh-AOLdv_s3ZxBSRedrQOny_05Q7aFCZq6Qz2deRH-xf1t-f2t_aYV98T4tnvzDCQlxqxh28IYKhYCD0u-NayA$ [github[.]com] because '@v2'
> workflows are much simpler than 'v1' workflows.
>
> So I tweaked
> https://urldefense.com/v3/__https://github.com/cpsyctc/CECPfuns/blob/main/.github/workflows/pkgdown.yaml__;!!PDiH4ENfjr2_Jw!FZGzBDcbpIrmi_GwRh-AOLdv_s3ZxBSRedrQOny_05Q7aFCZq6Qz2deRH-xf1t-f2t_aYV98T4tnvzDCQlxqxh28IYKhYCCnQO2uOA$ [github[.]com]
> to change
>      - uses: r-lib/actions/setup-r at v1
> to
>      - uses: r-lib/actions/setup-r at v2
> rather optimistically hoping that might make the warning go away.
>
> Today I did some work on the new function (trivial, correcting one
> "!is.na(" to the correct "is.na(" !!!).  More importantly, I created the
> test-getCIforQuantiles.R file for testthat to test the sanity checks and
> add three simple output checks.
>
> I built the source package locally, committed the changes and tried to
> push the update to github (inside Rstudio) but I get:
>
>   >>> /usr/bin/git push origin HEAD:refs/heads/main
> To https://urldefense.com/v3/__https://github.com/cpsyctc/CECPfuns.git__;!!PDiH4ENfjr2_Jw!FZGzBDcbpIrmi_GwRh-AOLdv_s3ZxBSRedrQOny_05Q7aFCZq6Qz2deRH-xf1t-f2t_aYV98T4tnvzDCQlxqxh28IYKhYCCMv5veZQ$ [github[.]com]
>    ! [rejected]        HEAD -> main (fetch first)
> error: failed to push some refs to 'https://urldefense.com/v3/__https://github.com/cpsyctc/CECPfuns.git__;!!PDiH4ENfjr2_Jw!FZGzBDcbpIrmi_GwRh-AOLdv_s3ZxBSRedrQOny_05Q7aFCZq6Qz2deRH-xf1t-f2t_aYV98T4tnvzDCQlxqxh28IYKhYCCMv5veZQ$ [github[.]com]'
> hint: Updates were rejected because the remote contains work that you do
> hint: not have locally. This is usually caused by another repository pushing
> hint: to the same ref. You may want to first integrate the remote changes
> hint: (e.g., 'git pull ...') before pushing again.
> hint: See the 'Note about fast-forwards' in 'git push --help' for details.
>
> OK.  So I try to pull thinking that made sense and that the change to
> pkgdown.yaml on github that I made yesterday is the offending change.
>
> However, when I pull (in Rstudio again) I get this:
>
>   >>> /usr/bin/git pull
> fatal: pack has 6 unresolved deltas
> fatal: fetch-pack: invalid index-pack output
>
> I have never felt on top of the complexities of git and github but I'm
> clearly way out of my depth.  I am hoping someone here can see what
> I need to do to get things back in synch and be able to get back to
> developing the package.
>

______________________________________________
R-package-devel at r-project.org mailing list
https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-package-devel__;!!PDiH4ENfjr2_Jw!FZGzBDcbpIrmi_GwRh-AOLdv_s3ZxBSRedrQOny_05Q7aFCZq6Qz2deRH-xf1t-f2t_aYV98T4tnvzDCQlxqxh28IYKhYCCPKVmhQw$ [stat[.]ethz[.]ch]

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Wed Jul  5 23:44:29 2023
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Wed, 5 Jul 2023 16:44:29 -0500
Subject: [R-pkg-devel] GitHub Action not triggered by a commit to a fork
Message-ID: <2fdedef5-ab49-bd14-f6b4-825ac54b0e08@effectivedefense.org>

Hello:


	  Can someone help me understand why a commit to 
"https://github.com/sbgraves237/KFAS" does not trigger the GitHub 
Actions specified in ".github/workflows/check-standard.yaml"?


	  Thanks,
	  Spencer Graves


p.s.  This is a branch of helske/KFAS:master.  That may have something 
to do with the problem.


From d|ego@hern@ngomezherrero @end|ng |rom gm@||@com  Wed Jul  5 23:50:23 2023
From: d|ego@hern@ngomezherrero @end|ng |rom gm@||@com (=?UTF-8?Q?Diego_Hernang=C3=B3mez_Herrero?=)
Date: Wed, 5 Jul 2023 23:50:23 +0200
Subject: [R-pkg-devel] GitHub Action not triggered by a commit to a fork
In-Reply-To: <2fdedef5-ab49-bd14-f6b4-825ac54b0e08@effectivedefense.org>
References: <2fdedef5-ab49-bd14-f6b4-825ac54b0e08@effectivedefense.org>
Message-ID: <CAA-ibaz-ZF665+MXAfL=vA=2Gu28xMc1wbR0TjFYA_2FT+y-oQ@mail.gmail.com>

Hi,

GH actions are disabled by default on forks, have you checked <
https://github.com/sbgraves237/KFAS/actions> and clicked on the green
button?


Best

El mi?, 5 jul 2023 a las 23:45, Spencer Graves (<
spencer.graves at effectivedefense.org>) escribi?:

> Hello:
>
>
>           Can someone help me understand why a commit to
> "https://github.com/sbgraves237/KFAS" does not trigger the GitHub
> Actions specified in ".github/workflows/check-standard.yaml"?
>
>
>           Thanks,
>           Spencer Graves
>
>
> p.s.  This is a branch of helske/KFAS:master.  That may have something
> to do with the problem.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 



Have a nice day!

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Thu Jul  6 00:56:48 2023
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Wed, 5 Jul 2023 17:56:48 -0500
Subject: [R-pkg-devel] GitHub Action not triggered by a commit to a fork
In-Reply-To: <CAA-ibaz-ZF665+MXAfL=vA=2Gu28xMc1wbR0TjFYA_2FT+y-oQ@mail.gmail.com>
References: <2fdedef5-ab49-bd14-f6b4-825ac54b0e08@effectivedefense.org>
 <CAA-ibaz-ZF665+MXAfL=vA=2Gu28xMc1wbR0TjFYA_2FT+y-oQ@mail.gmail.com>
Message-ID: <da45b8f9-c089-9e38-85ed-9240137ffba5@effectivedefense.org>

Hi, Diego:


	  Thanks for the reply.


On 7/5/23 4:50 PM, Diego Hernang?mez Herrero wrote:
> Hi,
> 
> GH actions are disabled by default on forks, have you checked 
> <https://github.com/sbgraves237/KFAS/actions 
> <https://github.com/sbgraves237/KFAS/actions>> and clicked on the green 
> button?


	  Got it.  I pushed another change, and that triggered GitHub Action.


	  Thanks again, Spencer Graves
> 
> 
> Best
> 
> El mi?, 5 jul 2023 a las 23:45, Spencer Graves 
> (<spencer.graves at effectivedefense.org 
> <mailto:spencer.graves at effectivedefense.org>>) escribi?:
> 
>     Hello:
> 
> 
>      ? ? ? ? ? Can someone help me understand why a commit to
>     "https://github.com/sbgraves237/KFAS
>     <https://github.com/sbgraves237/KFAS>" does not trigger the GitHub
>     Actions specified in ".github/workflows/check-standard.yaml"?
> 
> 
>      ? ? ? ? ? Thanks,
>      ? ? ? ? ? Spencer Graves
> 
> 
>     p.s.? This is a branch of helske/KFAS:master.? That may have something
>     to do with the problem.
> 
>     ______________________________________________
>     R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>     mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> 
> 
> 
> -- 
> 
> 
> 
> Have a nice day!


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Thu Jul  6 01:50:33 2023
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Wed, 5 Jul 2023 18:50:33 -0500
Subject: [R-pkg-devel] gfortran: command not found
Message-ID: <481d3cd0-b1fb-e1c7-a66a-4f1cca8a0826@effectivedefense.org>

Hello:


	  "R CMD build KFAS" under macOS 11.7.8 stopped with:


using C compiler: ?Apple clang version 12.0.5 (clang-1205.0.22.9)?
sh: gfortran: command not found
using SDK: ?MacOSX11.3.sdk?
gfortran -arch x86_64  -fPIC  -Wall -g -O2  -c  approx.f90 -o approx.o
make: gfortran: No such file or directory
make: *** [approx.o] Error 1
ERROR: compilation failed for package ?KFAS'


	  My web search suggests several different ways to fix this problem, 
but I don't know which to try.



	  Suggestions?
	  Thanks,
	  Spencer Graves


p.s.  I have both "brew" and "port" installed.  I recently used "port" 
to upgrade another software package.  A web search suggested the 
following:


sudo port install gcc48
sudo port select -set gcc mp-gcc48


	  However, this comment was posted roughly 9 years ago.  Below please 
find sessionInfo().


sessionInfo()
R version 4.3.1 (2023-06-16)
Platform: x86_64-apple-darwin20 (64-bit)
Running under: macOS Big Sur 11.7.8

Matrix products: default
BLAS: 
/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib 

LAPACK: 
/Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRlapack.dylib; 
  LAPACK version 3.11.0

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

time zone: America/Chicago
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
  [1] compiler_4.3.1  R6_2.5.1        magrittr_2.0.3  cli_3.6.1
  [5] tools_4.3.1     glue_1.6.2      rstudioapi_0.14 roxygen2_7.2.3
  [9] xml2_1.3.4      vctrs_0.6.2     stringi_1.7.12  knitr_1.42
[13] xfun_0.39       stringr_1.5.0   lifecycle_1.0.3 rlang_1.1.1
[17] purrr_1.0.1


From @|mon@urb@nek @end|ng |rom R-project@org  Thu Jul  6 01:57:35 2023
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Thu, 6 Jul 2023 11:57:35 +1200
Subject: [R-pkg-devel] gfortran: command not found
In-Reply-To: <481d3cd0-b1fb-e1c7-a66a-4f1cca8a0826@effectivedefense.org>
References: <481d3cd0-b1fb-e1c7-a66a-4f1cca8a0826@effectivedefense.org>
Message-ID: <AB038664-AD56-446E-99A0-6A7607A548F7@R-project.org>

To quote from the page you downloaded R from:

This release uses Xcode 14.2/14.3 and GNU Fortran 12.2. If you wish to compile R packages which contain Fortran code, you may need to download the corresponding GNU Fortran compiler from https://mac.R-project.org/tools. 



> On Jul 6, 2023, at 11:50 AM, Spencer Graves <spencer.graves at effectivedefense.org> wrote:
> 
> Hello:
> 
> 
> 	  "R CMD build KFAS" under macOS 11.7.8 stopped with:
> 
> 
> using C compiler: ?Apple clang version 12.0.5 (clang-1205.0.22.9)?
> sh: gfortran: command not found
> using SDK: ?MacOSX11.3.sdk?
> gfortran -arch x86_64  -fPIC  -Wall -g -O2  -c  approx.f90 -o approx.o
> make: gfortran: No such file or directory
> make: *** [approx.o] Error 1
> ERROR: compilation failed for package ?KFAS'
> 
> 
> 	  My web search suggests several different ways to fix this problem, but I don't know which to try.
> 
> 
> 
> 	  Suggestions?
> 	  Thanks,
> 	  Spencer Graves
> 
> 
> p.s.  I have both "brew" and "port" installed.  I recently used "port" to upgrade another software package.  A web search suggested the following:
> 
> 
> sudo port install gcc48
> sudo port select -set gcc mp-gcc48
> 
> 
> 	  However, this comment was posted roughly 9 years ago.  Below please find sessionInfo().
> 
> 
> sessionInfo()
> R version 4.3.1 (2023-06-16)
> Platform: x86_64-apple-darwin20 (64-bit)
> Running under: macOS Big Sur 11.7.8
> 
> Matrix products: default
> BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib 
> LAPACK: /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0
> 
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> 
> time zone: America/Chicago
> tzcode source: internal
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.3.1  R6_2.5.1        magrittr_2.0.3  cli_3.6.1
> [5] tools_4.3.1     glue_1.6.2      rstudioapi_0.14 roxygen2_7.2.3
> [9] xml2_1.3.4      vctrs_0.6.2     stringi_1.7.12  knitr_1.42
> [13] xfun_0.39       stringr_1.5.0   lifecycle_1.0.3 rlang_1.1.1
> [17] purrr_1.0.1
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From v|ncentv@nhee@ @end|ng |rom gm@||@com  Thu Jul  6 09:54:20 2023
From: v|ncentv@nhee@ @end|ng |rom gm@||@com (Vincent van Hees)
Date: Thu, 6 Jul 2023 09:54:20 +0200
Subject: [R-pkg-devel] Warning 'as.data.frame.POSIXct()' is deprecated
Message-ID: <CALnEB16CAR28kTtkvVcEOQj3Tmyc_rwCjckwexnQsA3_ZkFPCg@mail.gmail.com>

Dear all,

I see the following warning in my package test results:

```
Warning
Direct call of 'as.data.frame.POSIXct()' is deprecated.  Use
'as.data.frame.vector()' or 'as.data.frame()' instead
```

The warning is not always there and I struggle to make it reproducible. I
have encountered it in both Ubuntu 22.04 and in Windows 11, in both R 4.3.0
and 4.3.1, in both RStudio and in an GitHub Actions environment (example
<https://github.com/wadpac/GGIR/actions/runs/5463862340/jobs/9945096566>).
The warning gives the impression that I am doing something that R no longer
supports. However, I am not using the command as.data.frame.POSIXct()
anywhere directly in my code.

When I dive into the code where the warnings occur I see patterns like:

```
now = Sys.time()
df = data.frame (time = seq(now, now + 10, by =1),  B  = 1:11)
```

(this is a simplification of for example:
https://github.com/wadpac/GGIR/blob/master/tests/testthat/test_read.myacc.csv.R
)

Does this mean I am discouraged from putting a vector with POSIXct values
in a data.frame?
If yes, what would be the recommended work around?

I have been trying to find documentation or online discussions about this
warning but no luck so far. I see R NEWS
<https://cran.r-project.org/doc/manuals/r-release/NEWS.html> mentions
updates to POSIXct related objects several times in the past year but those
seem to be different issues.

Best,

Vincent

	[[alternative HTML version deleted]]


From t|m@t@y|or @end|ng |rom h|ddene|eph@nt@@co@uk  Thu Jul  6 10:26:06 2023
From: t|m@t@y|or @end|ng |rom h|ddene|eph@nt@@co@uk (Tim Taylor)
Date: Thu, 6 Jul 2023 09:26:06 +0100
Subject: [R-pkg-devel] Warning 'as.data.frame.POSIXct()' is deprecated
In-Reply-To: <CALnEB16CAR28kTtkvVcEOQj3Tmyc_rwCjckwexnQsA3_ZkFPCg@mail.gmail.com>
References: <CALnEB16CAR28kTtkvVcEOQj3Tmyc_rwCjckwexnQsA3_ZkFPCg@mail.gmail.com>
Message-ID: <1e8bc3aa-1614-3cd4-f0db-01735c152e7f@hiddenelephants.co.uk>

This *may* be an issue in lapply.? Let's see what others day. Reprex below

Sys.setenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_" = TRUE)
dat <- Sys.Date()
as.data.frame(dat)
#>????????? dat
#> 1 2023-07-06
lapply(dat, as.data.frame)
#> Warning: Direct call of 'as.data.frame.Date()' is deprecated.? Use
#> 'as.data.frame.vector()' or 'as.data.frame()' instead
#> [[1]]
#>?????? X[[i]]
#> 1 2023-07-06

Tim

On 06/07/2023 08:54, Vincent van Hees wrote:
> Dear all,
>
> I see the following warning in my package test results:
>
> ```
> Warning
> Direct call of 'as.data.frame.POSIXct()' is deprecated.  Use
> 'as.data.frame.vector()' or 'as.data.frame()' instead
> ```
>
> The warning is not always there and I struggle to make it reproducible. I
> have encountered it in both Ubuntu 22.04 and in Windows 11, in both R 4.3.0
> and 4.3.1, in both RStudio and in an GitHub Actions environment (example
> <https://github.com/wadpac/GGIR/actions/runs/5463862340/jobs/9945096566>).
> The warning gives the impression that I am doing something that R no longer
> supports. However, I am not using the command as.data.frame.POSIXct()
> anywhere directly in my code.
>
> When I dive into the code where the warnings occur I see patterns like:
>
> ```
> now = Sys.time()
> df = data.frame (time = seq(now, now + 10, by =1),  B  = 1:11)
> ```
>
> (this is a simplification of for example:
> https://github.com/wadpac/GGIR/blob/master/tests/testthat/test_read.myacc.csv.R
> )
>
> Does this mean I am discouraged from putting a vector with POSIXct values
> in a data.frame?
> If yes, what would be the recommended work around?
>
> I have been trying to find documentation or online discussions about this
> warning but no luck so far. I see R NEWS
> <https://cran.r-project.org/doc/manuals/r-release/NEWS.html> mentions
> updates to POSIXct related objects several times in the past year but those
> seem to be different issues.
>
> Best,
>
> Vincent
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From t|m@t@y|or @end|ng |rom h|ddene|eph@nt@@co@uk  Thu Jul  6 10:41:45 2023
From: t|m@t@y|or @end|ng |rom h|ddene|eph@nt@@co@uk (Tim Taylor)
Date: Thu, 6 Jul 2023 09:41:45 +0100
Subject: [R-pkg-devel] Warning 'as.data.frame.POSIXct()' is deprecated
In-Reply-To: <1e8bc3aa-1614-3cd4-f0db-01735c152e7f@hiddenelephants.co.uk>
References: <CALnEB16CAR28kTtkvVcEOQj3Tmyc_rwCjckwexnQsA3_ZkFPCg@mail.gmail.com>
 <1e8bc3aa-1614-3cd4-f0db-01735c152e7f@hiddenelephants.co.uk>
Message-ID: <15178f56-0d28-e7fa-000f-959c00dd63ca@hiddenelephants.co.uk>

Apologies - I've not had enough caffeine just yet. The reprex below 
highlights the issue but I think the code which implemented the change 
*may* need tweaking not lapply.

Tim

On 06/07/2023 09:26, Tim Taylor wrote:
> This *may* be an issue in lapply.? Let's see what others day. Reprex 
> below
>
> Sys.setenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_" = TRUE)
> dat <- Sys.Date()
> as.data.frame(dat)
> #>????????? dat
> #> 1 2023-07-06
> lapply(dat, as.data.frame)
> #> Warning: Direct call of 'as.data.frame.Date()' is deprecated.? Use
> #> 'as.data.frame.vector()' or 'as.data.frame()' instead
> #> [[1]]
> #>?????? X[[i]]
> #> 1 2023-07-06
>
> Tim
>
> On 06/07/2023 08:54, Vincent van Hees wrote:
>> Dear all,
>>
>> I see the following warning in my package test results:
>>
>> ```
>> Warning
>> Direct call of 'as.data.frame.POSIXct()' is deprecated.? Use
>> 'as.data.frame.vector()' or 'as.data.frame()' instead
>> ```
>>
>> The warning is not always there and I struggle to make it 
>> reproducible. I
>> have encountered it in both Ubuntu 22.04 and in Windows 11, in both R 
>> 4.3.0
>> and 4.3.1, in both RStudio and in an GitHub Actions environment (example
>> <https://github.com/wadpac/GGIR/actions/runs/5463862340/jobs/9945096566>). 
>>
>> The warning gives the impression that I am doing something that R no 
>> longer
>> supports. However, I am not using the command as.data.frame.POSIXct()
>> anywhere directly in my code.
>>
>> When I dive into the code where the warnings occur I see patterns like:
>>
>> ```
>> now = Sys.time()
>> df = data.frame (time = seq(now, now + 10, by =1),? B? = 1:11)
>> ```
>>
>> (this is a simplification of for example:
>> https://github.com/wadpac/GGIR/blob/master/tests/testthat/test_read.myacc.csv.R 
>>
>> )
>>
>> Does this mean I am discouraged from putting a vector with POSIXct 
>> values
>> in a data.frame?
>> If yes, what would be the recommended work around?
>>
>> I have been trying to find documentation or online discussions about 
>> this
>> warning but no luck so far. I see R NEWS
>> <https://cran.r-project.org/doc/manuals/r-release/NEWS.html> mentions
>> updates to POSIXct related objects several times in the past year but 
>> those
>> seem to be different issues.
>>
>> Best,
>>
>> Vincent
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From v|ncentv@nhee@ @end|ng |rom gm@||@com  Thu Jul  6 14:31:54 2023
From: v|ncentv@nhee@ @end|ng |rom gm@||@com (Vincent van Hees)
Date: Thu, 6 Jul 2023 14:31:54 +0200
Subject: [R-pkg-devel] Warning 'as.data.frame.POSIXct()' is deprecated
In-Reply-To: <15178f56-0d28-e7fa-000f-959c00dd63ca@hiddenelephants.co.uk>
References: <CALnEB16CAR28kTtkvVcEOQj3Tmyc_rwCjckwexnQsA3_ZkFPCg@mail.gmail.com>
 <1e8bc3aa-1614-3cd4-f0db-01735c152e7f@hiddenelephants.co.uk>
 <15178f56-0d28-e7fa-000f-959c00dd63ca@hiddenelephants.co.uk>
Message-ID: <CALnEB17VsNZC5U_usC+qxXgx4ngZFwGpO2W_Tg8L6WQ9rm83Qg@mail.gmail.com>

Thanks, in that case the REPLEX for the issue may need to be:

> remember = Sys.getenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_")
> Sys.setenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_" = TRUE)
> data.frame(time = Sys.time())
                 time
1 2023-07-06 14:29:37
> data.frame(time = as.POSIXlt(Sys.time()))
                 time
1 2023-07-06 14:29:37
Warning message:
Direct call of 'as.data.frame.POSIXct()' is deprecated.  Use
'as.data.frame.vector()' or 'as.data.frame()' instead
> Sys.setenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_" = remember)

Vincent

On Thu, 6 Jul 2023 at 10:41, Tim Taylor <tim.taylor at hiddenelephants.co.uk>
wrote:

> Apologies - I've not had enough caffeine just yet. The reprex below
> highlights the issue but I think the code which implemented the change
> *may* need tweaking not lapply.
>
> Tim
>
> On 06/07/2023 09:26, Tim Taylor wrote:
> > This *may* be an issue in lapply.  Let's see what others day. Reprex
> > below
> >
> > Sys.setenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_" = TRUE)
> > dat <- Sys.Date()
> > as.data.frame(dat)
> > #>          dat
> > #> 1 2023-07-06
> > lapply(dat, as.data.frame)
> > #> Warning: Direct call of 'as.data.frame.Date()' is deprecated.  Use
> > #> 'as.data.frame.vector()' or 'as.data.frame()' instead
> > #> [[1]]
> > #>       X[[i]]
> > #> 1 2023-07-06
> >
> > Tim
> >
> > On 06/07/2023 08:54, Vincent van Hees wrote:
> >> Dear all,
> >>
> >> I see the following warning in my package test results:
> >>
> >> ```
> >> Warning
> >> Direct call of 'as.data.frame.POSIXct()' is deprecated.  Use
> >> 'as.data.frame.vector()' or 'as.data.frame()' instead
> >> ```
> >>
> >> The warning is not always there and I struggle to make it
> >> reproducible. I
> >> have encountered it in both Ubuntu 22.04 and in Windows 11, in both R
> >> 4.3.0
> >> and 4.3.1, in both RStudio and in an GitHub Actions environment (example
> >> <https://github.com/wadpac/GGIR/actions/runs/5463862340/jobs/9945096566>).
>
> >>
> >> The warning gives the impression that I am doing something that R no
> >> longer
> >> supports. However, I am not using the command as.data.frame.POSIXct()
> >> anywhere directly in my code.
> >>
> >> When I dive into the code where the warnings occur I see patterns like:
> >>
> >> ```
> >> now = Sys.time()
> >> df = data.frame (time = seq(now, now + 10, by =1),  B  = 1:11)
> >> ```
> >>
> >> (this is a simplification of for example:
> >>
> https://github.com/wadpac/GGIR/blob/master/tests/testthat/test_read.myacc.csv.R
> >>
> >> )
> >>
> >> Does this mean I am discouraged from putting a vector with POSIXct
> >> values
> >> in a data.frame?
> >> If yes, what would be the recommended work around?
> >>
> >> I have been trying to find documentation or online discussions about
> >> this
> >> warning but no luck so far. I see R NEWS
> >> <https://cran.r-project.org/doc/manuals/r-release/NEWS.html> mentions
> >> updates to POSIXct related objects several times in the past year but
> >> those
> >> seem to be different issues.
> >>
> >> Best,
> >>
> >> Vincent
> >>
> >>     [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Thu Jul  6 15:14:31 2023
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 6 Jul 2023 08:14:31 -0500
Subject: [R-pkg-devel] Warning 'as.data.frame.POSIXct()' is deprecated
In-Reply-To: <CALnEB17VsNZC5U_usC+qxXgx4ngZFwGpO2W_Tg8L6WQ9rm83Qg@mail.gmail.com>
References: <CALnEB16CAR28kTtkvVcEOQj3Tmyc_rwCjckwexnQsA3_ZkFPCg@mail.gmail.com>
 <1e8bc3aa-1614-3cd4-f0db-01735c152e7f@hiddenelephants.co.uk>
 <15178f56-0d28-e7fa-000f-959c00dd63ca@hiddenelephants.co.uk>
 <CALnEB17VsNZC5U_usC+qxXgx4ngZFwGpO2W_Tg8L6WQ9rm83Qg@mail.gmail.com>
Message-ID: <25766.48695.704943.188152@rob.eddelbuettel.com>


On 6 July 2023 at 14:31, Vincent van Hees wrote:
| Thanks, in that case the REPLEX for the issue may need to be:
| 
| > remember = Sys.getenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_")
| > Sys.setenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_" = TRUE)
| > data.frame(time = Sys.time())
|                  time
| 1 2023-07-06 14:29:37
| > data.frame(time = as.POSIXlt(Sys.time()))
|                  time
| 1 2023-07-06 14:29:37
| Warning message:
| Direct call of 'as.data.frame.POSIXct()' is deprecated.  Use
| 'as.data.frame.vector()' or 'as.data.frame()' instead
| > Sys.setenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_" = remember)

Does _not_ happen in a plain R session.

Does happen when `library(tidyverse)` is executed first. May come from
`tibble` or `vectors`, I have a habit of not using those much. 

Dirk
 
| Vincent
| 
| On Thu, 6 Jul 2023 at 10:41, Tim Taylor <tim.taylor at hiddenelephants.co.uk>
| wrote:
| 
| > Apologies - I've not had enough caffeine just yet. The reprex below
| > highlights the issue but I think the code which implemented the change
| > *may* need tweaking not lapply.
| >
| > Tim
| >
| > On 06/07/2023 09:26, Tim Taylor wrote:
| > > This *may* be an issue in lapply.  Let's see what others day. Reprex
| > > below
| > >
| > > Sys.setenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_" = TRUE)
| > > dat <- Sys.Date()
| > > as.data.frame(dat)
| > > #>          dat
| > > #> 1 2023-07-06
| > > lapply(dat, as.data.frame)
| > > #> Warning: Direct call of 'as.data.frame.Date()' is deprecated.  Use
| > > #> 'as.data.frame.vector()' or 'as.data.frame()' instead
| > > #> [[1]]
| > > #>       X[[i]]
| > > #> 1 2023-07-06
| > >
| > > Tim
| > >
| > > On 06/07/2023 08:54, Vincent van Hees wrote:
| > >> Dear all,
| > >>
| > >> I see the following warning in my package test results:
| > >>
| > >> ```
| > >> Warning
| > >> Direct call of 'as.data.frame.POSIXct()' is deprecated.  Use
| > >> 'as.data.frame.vector()' or 'as.data.frame()' instead
| > >> ```
| > >>
| > >> The warning is not always there and I struggle to make it
| > >> reproducible. I
| > >> have encountered it in both Ubuntu 22.04 and in Windows 11, in both R
| > >> 4.3.0
| > >> and 4.3.1, in both RStudio and in an GitHub Actions environment (example
| > >> <https://github.com/wadpac/GGIR/actions/runs/5463862340/jobs/9945096566>).
| >
| > >>
| > >> The warning gives the impression that I am doing something that R no
| > >> longer
| > >> supports. However, I am not using the command as.data.frame.POSIXct()
| > >> anywhere directly in my code.
| > >>
| > >> When I dive into the code where the warnings occur I see patterns like:
| > >>
| > >> ```
| > >> now = Sys.time()
| > >> df = data.frame (time = seq(now, now + 10, by =1),  B  = 1:11)
| > >> ```
| > >>
| > >> (this is a simplification of for example:
| > >>
| > https://github.com/wadpac/GGIR/blob/master/tests/testthat/test_read.myacc.csv.R
| > >>
| > >> )
| > >>
| > >> Does this mean I am discouraged from putting a vector with POSIXct
| > >> values
| > >> in a data.frame?
| > >> If yes, what would be the recommended work around?
| > >>
| > >> I have been trying to find documentation or online discussions about
| > >> this
| > >> warning but no luck so far. I see R NEWS
| > >> <https://cran.r-project.org/doc/manuals/r-release/NEWS.html> mentions
| > >> updates to POSIXct related objects several times in the past year but
| > >> those
| > >> seem to be different issues.
| > >>
| > >> Best,
| > >>
| > >> Vincent
| > >>
| > >>     [[alternative HTML version deleted]]
| > >>
| > >> ______________________________________________
| > >> R-package-devel at r-project.org mailing list
| > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
| > >
| > > ______________________________________________
| > > R-package-devel at r-project.org mailing list
| > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
| >
| 
| 	[[alternative HTML version deleted]]
| 
| ______________________________________________
| R-package-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd @end|ng |rom deb|@n@org  Thu Jul  6 15:22:24 2023
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 6 Jul 2023 08:22:24 -0500
Subject: [R-pkg-devel] Warning 'as.data.frame.POSIXct()' is deprecated
In-Reply-To: <25766.48695.704943.188152@rob.eddelbuettel.com>
References: <CALnEB16CAR28kTtkvVcEOQj3Tmyc_rwCjckwexnQsA3_ZkFPCg@mail.gmail.com>
 <1e8bc3aa-1614-3cd4-f0db-01735c152e7f@hiddenelephants.co.uk>
 <15178f56-0d28-e7fa-000f-959c00dd63ca@hiddenelephants.co.uk>
 <CALnEB17VsNZC5U_usC+qxXgx4ngZFwGpO2W_Tg8L6WQ9rm83Qg@mail.gmail.com>
 <25766.48695.704943.188152@rob.eddelbuettel.com>
Message-ID: <25766.49168.981543.584124@rob.eddelbuettel.com>


On 6 July 2023 at 08:14, Dirk Eddelbuettel wrote:
| 
| On 6 July 2023 at 14:31, Vincent van Hees wrote:
| | Thanks, in that case the REPLEX for the issue may need to be:
| | 
| | > remember = Sys.getenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_")
| | > Sys.setenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_" = TRUE)
| | > data.frame(time = Sys.time())
| |                  time
| | 1 2023-07-06 14:29:37
| | > data.frame(time = as.POSIXlt(Sys.time()))
| |                  time
| | 1 2023-07-06 14:29:37
| | Warning message:
| | Direct call of 'as.data.frame.POSIXct()' is deprecated.  Use
| | 'as.data.frame.vector()' or 'as.data.frame()' instead
| | > Sys.setenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_" = remember)
| 
| Does _not_ happen in a plain R session.
| 
| Does happen when `library(tidyverse)` is executed first. May come from
| `tibble` or `vectors`, I have a habit of not using those much. 

Err, no, wait. I may have confused myself here jumping between R-devel and
R (release).  Please disregard, and apologies for the noise.

In any event, assigning a POSIXlt (which is an 11-element list) to a single
column is not a great idiom and we had the POSIXct conversion there for a
while IIRC.

But assigning a POSIXct to a column should always work, and I would be
surprised to find a minimally complete reproducible example showing that it
does not.  

Dirk

| Dirk
|  
| | Vincent
| | 
| | On Thu, 6 Jul 2023 at 10:41, Tim Taylor <tim.taylor at hiddenelephants.co.uk>
| | wrote:
| | 
| | > Apologies - I've not had enough caffeine just yet. The reprex below
| | > highlights the issue but I think the code which implemented the change
| | > *may* need tweaking not lapply.
| | >
| | > Tim
| | >
| | > On 06/07/2023 09:26, Tim Taylor wrote:
| | > > This *may* be an issue in lapply.  Let's see what others day. Reprex
| | > > below
| | > >
| | > > Sys.setenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_" = TRUE)
| | > > dat <- Sys.Date()
| | > > as.data.frame(dat)
| | > > #>          dat
| | > > #> 1 2023-07-06
| | > > lapply(dat, as.data.frame)
| | > > #> Warning: Direct call of 'as.data.frame.Date()' is deprecated.  Use
| | > > #> 'as.data.frame.vector()' or 'as.data.frame()' instead
| | > > #> [[1]]
| | > > #>       X[[i]]
| | > > #> 1 2023-07-06
| | > >
| | > > Tim
| | > >
| | > > On 06/07/2023 08:54, Vincent van Hees wrote:
| | > >> Dear all,
| | > >>
| | > >> I see the following warning in my package test results:
| | > >>
| | > >> ```
| | > >> Warning
| | > >> Direct call of 'as.data.frame.POSIXct()' is deprecated.  Use
| | > >> 'as.data.frame.vector()' or 'as.data.frame()' instead
| | > >> ```
| | > >>
| | > >> The warning is not always there and I struggle to make it
| | > >> reproducible. I
| | > >> have encountered it in both Ubuntu 22.04 and in Windows 11, in both R
| | > >> 4.3.0
| | > >> and 4.3.1, in both RStudio and in an GitHub Actions environment (example
| | > >> <https://github.com/wadpac/GGIR/actions/runs/5463862340/jobs/9945096566>).
| | >
| | > >>
| | > >> The warning gives the impression that I am doing something that R no
| | > >> longer
| | > >> supports. However, I am not using the command as.data.frame.POSIXct()
| | > >> anywhere directly in my code.
| | > >>
| | > >> When I dive into the code where the warnings occur I see patterns like:
| | > >>
| | > >> ```
| | > >> now = Sys.time()
| | > >> df = data.frame (time = seq(now, now + 10, by =1),  B  = 1:11)
| | > >> ```
| | > >>
| | > >> (this is a simplification of for example:
| | > >>
| | > https://github.com/wadpac/GGIR/blob/master/tests/testthat/test_read.myacc.csv.R
| | > >>
| | > >> )
| | > >>
| | > >> Does this mean I am discouraged from putting a vector with POSIXct
| | > >> values
| | > >> in a data.frame?
| | > >> If yes, what would be the recommended work around?
| | > >>
| | > >> I have been trying to find documentation or online discussions about
| | > >> this
| | > >> warning but no luck so far. I see R NEWS
| | > >> <https://cran.r-project.org/doc/manuals/r-release/NEWS.html> mentions
| | > >> updates to POSIXct related objects several times in the past year but
| | > >> those
| | > >> seem to be different issues.
| | > >>
| | > >> Best,
| | > >>
| | > >> Vincent
| | > >>
| | > >>     [[alternative HTML version deleted]]
| | > >>
| | > >> ______________________________________________
| | > >> R-package-devel at r-project.org mailing list
| | > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
| | > >
| | > > ______________________________________________
| | > > R-package-devel at r-project.org mailing list
| | > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
| | >
| | 
| | 	[[alternative HTML version deleted]]
| | 
| | ______________________________________________
| | R-package-devel at r-project.org mailing list
| | https://stat.ethz.ch/mailman/listinfo/r-package-devel
| 
| -- 
| dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From e@ @end|ng |rom enr|co@chum@nn@net  Thu Jul  6 15:42:12 2023
From: e@ @end|ng |rom enr|co@chum@nn@net (Enrico Schumann)
Date: Thu, 06 Jul 2023 15:42:12 +0200
Subject: [R-pkg-devel] Warning 'as.data.frame.POSIXct()' is deprecated
In-Reply-To: <CALnEB17VsNZC5U_usC+qxXgx4ngZFwGpO2W_Tg8L6WQ9rm83Qg@mail.gmail.com>
 (Vincent van Hees's message of "Thu, 6 Jul 2023 14:31:54 +0200")
References: <CALnEB16CAR28kTtkvVcEOQj3Tmyc_rwCjckwexnQsA3_ZkFPCg@mail.gmail.com>
 <1e8bc3aa-1614-3cd4-f0db-01735c152e7f@hiddenelephants.co.uk>
 <15178f56-0d28-e7fa-000f-959c00dd63ca@hiddenelephants.co.uk>
 <CALnEB17VsNZC5U_usC+qxXgx4ngZFwGpO2W_Tg8L6WQ9rm83Qg@mail.gmail.com>
Message-ID: <87wmzdcg23.fsf@aldus>

On Thu, 06 Jul 2023, Vincent van Hees writes:

> Thanks, in that case the REPLEX for the issue may need to be:
>
>> remember = Sys.getenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_")
>> Sys.setenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_" = TRUE)
>> data.frame(time = Sys.time())
>                  time
> 1 2023-07-06 14:29:37
>> data.frame(time = as.POSIXlt(Sys.time()))
>                  time
> 1 2023-07-06 14:29:37
> Warning message:
> Direct call of 'as.data.frame.POSIXct()' is deprecated.  Use
> 'as.data.frame.vector()' or 'as.data.frame()' instead
>> Sys.setenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_" = remember)


I think it happens because

    data.frame(<POSIXlt>)

calls 'as.data.frame.POSIXlt' (per its S3-class), which
in turn directly calls 'as.data.frame.POSIXct':

    ## as.data.frame.POSIXlt
    function (x, row.names = NULL, optional = FALSE, ...) 
    {
        value <- as.data.frame.POSIXct(as.POSIXct(x), row.names, 
            optional, ...)
        if (!optional) 
            names(value) <- deparse1(substitute(x))
        value
    }
    <environment: namespace:base>

Kind regards
    Enrico

> Vincent
>
> On Thu, 6 Jul 2023 at 10:41, Tim Taylor <tim.taylor at hiddenelephants.co.uk>
> wrote:
>
>> Apologies - I've not had enough caffeine just yet. The reprex below
>> highlights the issue but I think the code which implemented the change
>> *may* need tweaking not lapply.
>>
>> Tim
>>
>> On 06/07/2023 09:26, Tim Taylor wrote:
>> > This *may* be an issue in lapply.  Let's see what others day. Reprex
>> > below
>> >
>> > Sys.setenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_" = TRUE)
>> > dat <- Sys.Date()
>> > as.data.frame(dat)
>> > #>          dat
>> > #> 1 2023-07-06
>> > lapply(dat, as.data.frame)
>> > #> Warning: Direct call of 'as.data.frame.Date()' is deprecated.  Use
>> > #> 'as.data.frame.vector()' or 'as.data.frame()' instead
>> > #> [[1]]
>> > #>       X[[i]]
>> > #> 1 2023-07-06
>> >
>> > Tim
>> >
>> > On 06/07/2023 08:54, Vincent van Hees wrote:
>> >> Dear all,
>> >>
>> >> I see the following warning in my package test results:
>> >>
>> >> ```
>> >> Warning
>> >> Direct call of 'as.data.frame.POSIXct()' is deprecated.  Use
>> >> 'as.data.frame.vector()' or 'as.data.frame()' instead
>> >> ```
>> >>
>> >> The warning is not always there and I struggle to make it
>> >> reproducible. I
>> >> have encountered it in both Ubuntu 22.04 and in Windows 11, in both R
>> >> 4.3.0
>> >> and 4.3.1, in both RStudio and in an GitHub Actions environment (example
>> >> <https://github.com/wadpac/GGIR/actions/runs/5463862340/jobs/9945096566>).
>>
>> >>
>> >> The warning gives the impression that I am doing something that R no
>> >> longer
>> >> supports. However, I am not using the command as.data.frame.POSIXct()
>> >> anywhere directly in my code.
>> >>
>> >> When I dive into the code where the warnings occur I see patterns like:
>> >>
>> >> ```
>> >> now = Sys.time()
>> >> df = data.frame (time = seq(now, now + 10, by =1),  B  = 1:11)
>> >> ```
>> >>
>> >> (this is a simplification of for example:
>> >>
>> https://github.com/wadpac/GGIR/blob/master/tests/testthat/test_read.myacc.csv.R
>> >>
>> >> )
>> >>
>> >> Does this mean I am discouraged from putting a vector with POSIXct
>> >> values
>> >> in a data.frame?
>> >> If yes, what would be the recommended work around?
>> >>
>> >> I have been trying to find documentation or online discussions about
>> >> this
>> >> warning but no luck so far. I see R NEWS
>> >> <https://cran.r-project.org/doc/manuals/r-release/NEWS.html> mentions
>> >> updates to POSIXct related objects several times in the past year but
>> >> those
>> >> seem to be different issues.
>> >>
>> >> Best,
>> >>
>> >> Vincent
>> >>
>> >>     [[alternative HTML version deleted]]
>> >>
>> >> ______________________________________________
>> >> R-package-devel at r-project.org mailing list
>> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Enrico Schumann
Lucerne, Switzerland
http://enricoschumann.net


From v|ncentv@nhee@ @end|ng |rom gm@||@com  Thu Jul  6 15:54:22 2023
From: v|ncentv@nhee@ @end|ng |rom gm@||@com (Vincent van Hees)
Date: Thu, 6 Jul 2023 15:54:22 +0200
Subject: [R-pkg-devel] Warning 'as.data.frame.POSIXct()' is deprecated
In-Reply-To: <25766.49168.981543.584124@rob.eddelbuettel.com>
References: <CALnEB16CAR28kTtkvVcEOQj3Tmyc_rwCjckwexnQsA3_ZkFPCg@mail.gmail.com>
 <1e8bc3aa-1614-3cd4-f0db-01735c152e7f@hiddenelephants.co.uk>
 <15178f56-0d28-e7fa-000f-959c00dd63ca@hiddenelephants.co.uk>
 <CALnEB17VsNZC5U_usC+qxXgx4ngZFwGpO2W_Tg8L6WQ9rm83Qg@mail.gmail.com>
 <25766.48695.704943.188152@rob.eddelbuettel.com>
 <25766.49168.981543.584124@rob.eddelbuettel.com>
Message-ID: <CALnEB16wamBT7XFT_4ThGoDZ8byv8CVD5ZE2bzmVgiiDdGKjQA@mail.gmail.com>

Thanks Dirk,
My plan will then be to revise my package to avoid using POSIXlt when
POSIXct is also sufficient, given that I am storing timestamps in
data.frames a lot. In the few instances where POSIXlt may be necessary I
will avoid storing them in a data.frame.
Vincent

On Thu, 6 Jul 2023 at 15:22, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 6 July 2023 at 08:14, Dirk Eddelbuettel wrote:
> |
> | On 6 July 2023 at 14:31, Vincent van Hees wrote:
> | | Thanks, in that case the REPLEX for the issue may need to be:
> | |
> | | > remember = Sys.getenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_")
> | | > Sys.setenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_" = TRUE)
> | | > data.frame(time = Sys.time())
> | |                  time
> | | 1 2023-07-06 14:29:37
> | | > data.frame(time = as.POSIXlt(Sys.time()))
> | |                  time
> | | 1 2023-07-06 14:29:37
> | | Warning message:
> | | Direct call of 'as.data.frame.POSIXct()' is deprecated.  Use
> | | 'as.data.frame.vector()' or 'as.data.frame()' instead
> | | > Sys.setenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_" = remember)
> |
> | Does _not_ happen in a plain R session.
> |
> | Does happen when `library(tidyverse)` is executed first. May come from
> | `tibble` or `vectors`, I have a habit of not using those much.
>
> Err, no, wait. I may have confused myself here jumping between R-devel and
> R (release).  Please disregard, and apologies for the noise.
>
> In any event, assigning a POSIXlt (which is an 11-element list) to a single
> column is not a great idiom and we had the POSIXct conversion there for a
> while IIRC.
>
> But assigning a POSIXct to a column should always work, and I would be
> surprised to find a minimally complete reproducible example showing that it
> does not.
>
> Dirk
>
> | Dirk
> |
> | | Vincent
> | |
> | | On Thu, 6 Jul 2023 at 10:41, Tim Taylor <
> tim.taylor at hiddenelephants.co.uk>
> | | wrote:
> | |
> | | > Apologies - I've not had enough caffeine just yet. The reprex below
> | | > highlights the issue but I think the code which implemented the
> change
> | | > *may* need tweaking not lapply.
> | | >
> | | > Tim
> | | >
> | | > On 06/07/2023 09:26, Tim Taylor wrote:
> | | > > This *may* be an issue in lapply.  Let's see what others day.
> Reprex
> | | > > below
> | | > >
> | | > > Sys.setenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_" = TRUE)
> | | > > dat <- Sys.Date()
> | | > > as.data.frame(dat)
> | | > > #>          dat
> | | > > #> 1 2023-07-06
> | | > > lapply(dat, as.data.frame)
> | | > > #> Warning: Direct call of 'as.data.frame.Date()' is deprecated.
> Use
> | | > > #> 'as.data.frame.vector()' or 'as.data.frame()' instead
> | | > > #> [[1]]
> | | > > #>       X[[i]]
> | | > > #> 1 2023-07-06
> | | > >
> | | > > Tim
> | | > >
> | | > > On 06/07/2023 08:54, Vincent van Hees wrote:
> | | > >> Dear all,
> | | > >>
> | | > >> I see the following warning in my package test results:
> | | > >>
> | | > >> ```
> | | > >> Warning
> | | > >> Direct call of 'as.data.frame.POSIXct()' is deprecated.  Use
> | | > >> 'as.data.frame.vector()' or 'as.data.frame()' instead
> | | > >> ```
> | | > >>
> | | > >> The warning is not always there and I struggle to make it
> | | > >> reproducible. I
> | | > >> have encountered it in both Ubuntu 22.04 and in Windows 11, in
> both R
> | | > >> 4.3.0
> | | > >> and 4.3.1, in both RStudio and in an GitHub Actions environment
> (example
> | | > >> <
> https://github.com/wadpac/GGIR/actions/runs/5463862340/jobs/9945096566>).
> | | >
> | | > >>
> | | > >> The warning gives the impression that I am doing something that R
> no
> | | > >> longer
> | | > >> supports. However, I am not using the command
> as.data.frame.POSIXct()
> | | > >> anywhere directly in my code.
> | | > >>
> | | > >> When I dive into the code where the warnings occur I see patterns
> like:
> | | > >>
> | | > >> ```
> | | > >> now = Sys.time()
> | | > >> df = data.frame (time = seq(now, now + 10, by =1),  B  = 1:11)
> | | > >> ```
> | | > >>
> | | > >> (this is a simplification of for example:
> | | > >>
> | | >
> https://github.com/wadpac/GGIR/blob/master/tests/testthat/test_read.myacc.csv.R
> | | > >>
> | | > >> )
> | | > >>
> | | > >> Does this mean I am discouraged from putting a vector with POSIXct
> | | > >> values
> | | > >> in a data.frame?
> | | > >> If yes, what would be the recommended work around?
> | | > >>
> | | > >> I have been trying to find documentation or online discussions
> about
> | | > >> this
> | | > >> warning but no luck so far. I see R NEWS
> | | > >> <https://cran.r-project.org/doc/manuals/r-release/NEWS.html>
> mentions
> | | > >> updates to POSIXct related objects several times in the past year
> but
> | | > >> those
> | | > >> seem to be different issues.
> | | > >>
> | | > >> Best,
> | | > >>
> | | > >> Vincent
> | | > >>
> | | > >>     [[alternative HTML version deleted]]
> | | > >>
> | | > >> ______________________________________________
> | | > >> R-package-devel at r-project.org mailing list
> | | > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> | | > >
> | | > > ______________________________________________
> | | > > R-package-devel at r-project.org mailing list
> | | > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> | | >
> | |
> | |     [[alternative HTML version deleted]]
> | |
> | | ______________________________________________
> | | R-package-devel at r-project.org mailing list
> | | https://stat.ethz.ch/mailman/listinfo/r-package-devel
> |
> | --
> | dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> --
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From t|m@t@y|or @end|ng |rom h|ddene|eph@nt@@co@uk  Thu Jul  6 16:11:41 2023
From: t|m@t@y|or @end|ng |rom h|ddene|eph@nt@@co@uk (Tim Taylor)
Date: Thu, 6 Jul 2023 15:11:41 +0100
Subject: [R-pkg-devel] Warning 'as.data.frame.POSIXct()' is deprecated
In-Reply-To: <87wmzdcg23.fsf@aldus>
References: <CALnEB16CAR28kTtkvVcEOQj3Tmyc_rwCjckwexnQsA3_ZkFPCg@mail.gmail.com>
 <1e8bc3aa-1614-3cd4-f0db-01735c152e7f@hiddenelephants.co.uk>
 <15178f56-0d28-e7fa-000f-959c00dd63ca@hiddenelephants.co.uk>
 <CALnEB17VsNZC5U_usC+qxXgx4ngZFwGpO2W_Tg8L6WQ9rm83Qg@mail.gmail.com>
 <87wmzdcg23.fsf@aldus>
Message-ID: <4d7bc097-0ea9-96b2-81ea-36203a7f7310@hiddenelephants.co.uk>

Ah yes ... and reading the as.data.frame help we see (emphasis mine):

"... Direct calls to as.data.frame.<class>() are still possible (*base 
package!*), for 12 atomic base classes, but will deprecated ..."

So it does seem that a lot of these warnings are triggered by base R and 
updating this code may be a work in progress.


A little tangential (but related) to this though is still the fact that 
we can trigger the warning with:

lapply(Sys.Date(), as.data.frame)

so I wonder if the code in base/R/zzz.R 
(https://github.com/wch/r-source/blob/9f1940663f902174034a01197e55fd17c767213a/src/library/base/R/zzz.R#L664-L686) 
does need tweaking?

At this stage this is probably more a question for R-devel though.

Tim


On 06/07/2023 14:42, Enrico Schumann wrote:
> On Thu, 06 Jul 2023, Vincent van Hees writes:
>
>> Thanks, in that case the REPLEX for the issue may need to be:
>>
>>> remember = Sys.getenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_")
>>> Sys.setenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_" = TRUE)
>>> data.frame(time = Sys.time())
>>                   time
>> 1 2023-07-06 14:29:37
>>> data.frame(time = as.POSIXlt(Sys.time()))
>>                   time
>> 1 2023-07-06 14:29:37
>> Warning message:
>> Direct call of 'as.data.frame.POSIXct()' is deprecated.  Use
>> 'as.data.frame.vector()' or 'as.data.frame()' instead
>>> Sys.setenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_" = remember)
>
> I think it happens because
>
>      data.frame(<POSIXlt>)
>
> calls 'as.data.frame.POSIXlt' (per its S3-class), which
> in turn directly calls 'as.data.frame.POSIXct':
>
>      ## as.data.frame.POSIXlt
>      function (x, row.names = NULL, optional = FALSE, ...)
>      {
>          value <- as.data.frame.POSIXct(as.POSIXct(x), row.names,
>              optional, ...)
>          if (!optional)
>              names(value) <- deparse1(substitute(x))
>          value
>      }
>      <environment: namespace:base>
>
> Kind regards
>      Enrico
>
>> Vincent
>>
>> On Thu, 6 Jul 2023 at 10:41, Tim Taylor <tim.taylor at hiddenelephants.co.uk>
>> wrote:
>>
>>> Apologies - I've not had enough caffeine just yet. The reprex below
>>> highlights the issue but I think the code which implemented the change
>>> *may* need tweaking not lapply.
>>>
>>> Tim
>>>
>>> On 06/07/2023 09:26, Tim Taylor wrote:
>>>> This *may* be an issue in lapply.  Let's see what others day. Reprex
>>>> below
>>>>
>>>> Sys.setenv("_R_CHECK_AS_DATA_FRAME_EXPLICIT_METHOD_" = TRUE)
>>>> dat <- Sys.Date()
>>>> as.data.frame(dat)
>>>> #>          dat
>>>> #> 1 2023-07-06
>>>> lapply(dat, as.data.frame)
>>>> #> Warning: Direct call of 'as.data.frame.Date()' is deprecated.  Use
>>>> #> 'as.data.frame.vector()' or 'as.data.frame()' instead
>>>> #> [[1]]
>>>> #>       X[[i]]
>>>> #> 1 2023-07-06
>>>>
>>>> Tim
>>>>
>>>> On 06/07/2023 08:54, Vincent van Hees wrote:
>>>>> Dear all,
>>>>>
>>>>> I see the following warning in my package test results:
>>>>>
>>>>> ```
>>>>> Warning
>>>>> Direct call of 'as.data.frame.POSIXct()' is deprecated.  Use
>>>>> 'as.data.frame.vector()' or 'as.data.frame()' instead
>>>>> ```
>>>>>
>>>>> The warning is not always there and I struggle to make it
>>>>> reproducible. I
>>>>> have encountered it in both Ubuntu 22.04 and in Windows 11, in both R
>>>>> 4.3.0
>>>>> and 4.3.1, in both RStudio and in an GitHub Actions environment (example
>>>>> <https://github.com/wadpac/GGIR/actions/runs/5463862340/jobs/9945096566>).
>>>>> The warning gives the impression that I am doing something that R no
>>>>> longer
>>>>> supports. However, I am not using the command as.data.frame.POSIXct()
>>>>> anywhere directly in my code.
>>>>>
>>>>> When I dive into the code where the warnings occur I see patterns like:
>>>>>
>>>>> ```
>>>>> now = Sys.time()
>>>>> df = data.frame (time = seq(now, now + 10, by =1),  B  = 1:11)
>>>>> ```
>>>>>
>>>>> (this is a simplification of for example:
>>>>>
>>> https://github.com/wadpac/GGIR/blob/master/tests/testthat/test_read.myacc.csv.R
>>>>> )
>>>>>
>>>>> Does this mean I am discouraged from putting a vector with POSIXct
>>>>> values
>>>>> in a data.frame?
>>>>> If yes, what would be the recommended work around?
>>>>>
>>>>> I have been trying to find documentation or online discussions about
>>>>> this
>>>>> warning but no luck so far. I see R NEWS
>>>>> <https://cran.r-project.org/doc/manuals/r-release/NEWS.html> mentions
>>>>> updates to POSIXct related objects several times in the past year but
>>>>> those
>>>>> seem to be different issues.
>>>>>
>>>>> Best,
>>>>>
>>>>> Vincent
>>>>>
>>>>>      [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From dewey @end|ng |rom dunn|ngton@c@  Thu Jul  6 20:22:26 2023
From: dewey @end|ng |rom dunn|ngton@c@ (Dewey Dunnington)
Date: Thu, 06 Jul 2023 15:22:26 -0300
Subject: [R-pkg-devel] Best practices for CRAN package using Go
Message-ID: <399846c80a91ae21c96942890fc8d3b8@dunnington.ca>

Hi all,

I'm wondering if there is any precedent for using Go in a CRAN R 
package. Go is a particularly good language for writing database drivers 
for the Arrow Database Connectivity framework [1][2] and - importantly - 
there are several active developers writing these drivers from which R 
users might be able to benefit (notably, the Snowflake driver, for which 
there isn't currently a readily-available R connector).

I've wrapped two of these drivers for R that seem to build and install 
on MacOS, Linux, and Windows [3][4]; however, I am not sure if the 
pattern I used is suitable for CRAN or whether these packages will have 
to be GitHub-only for the foreseeable future. The pattern is roughly the 
same as for Rust (build a static library and link it), and the build 
process has similar requirements (a `go` binary with which `go build` 
can be run; the build process downloads dependencies as it goes just 
like `cargo build`).

Thanks in advance for any insight!

Cheers,

-dewey

[1] https://arrow.apache.org/adbc
[2] https://cran.r-project.org/package=adbcdrivermanager
[3] 
https://github.com/apache/arrow-adbc/tree/main/r/adbcflightsql#readme
[4] 
https://github.com/apache/arrow-adbc/tree/main/r/adbcsnowflake#readme


