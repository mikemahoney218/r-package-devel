From edwwe|2020 @end|ng |rom gm@||@com  Mon Oct  3 17:03:20 2022
From: edwwe|2020 @end|ng |rom gm@||@com (Edward Wei)
Date: Mon, 3 Oct 2022 08:03:20 -0700
Subject: [R-pkg-devel] Unable to create manual
In-Reply-To: <20220926220141.71df28e0@Tarkus>
References: <CAEf_eRCTaa5Xnv6TkHX=Jncqv+Fu7PMTM=_w7WLFj9SDGVKm5g@mail.gmail.com>
 <a51aa30d-bff0-2824-fd6f-948a70975e06@gmail.com>
 <a325c931-4074-ca48-5d0a-42f410429eff@statistik.tu-dortmund.de>
 <CAEf_eRD7qyzRiVDrX5_CA-hEQ7wj-G+3Ku-=+2X2t=+Ai+g+aw@mail.gmail.com>
 <3275b3cb-33b1-3c2b-b86d-7ca73c8d6cb9@gmail.com>
 <CAEf_eRCUs-zRqdkPLnFMUB0Am6+=g+=DjcGsZ==Biu62MNgjhQ@mail.gmail.com>
 <20220926220141.71df28e0@Tarkus>
Message-ID: <CAEf_eRBiiSdAequnQWD9OMbP1Z=NFoPBtKQfzGG+X65b8d+Mew@mail.gmail.com>

Hello Ivan.

The Does list.files(pattern = 'utils|Rout\\.fail') gave me something like
an empty string.

So after getting some in-person help on this issue, the key to resolving
this error was explicitly defining the environmental variables in the
console as:

set
PDFLATEX=C:\Users\edmon\AppData\Local\Programs\MiKTeX\miktex\bin\x64\pdflatex



set
MAKEINDEX=C:\Users\edmon\AppData\Local\Programs\MiKTeX\miktex\bin\x64\makeindex


The makeindex was a package I was apparently missing for MikTex and I had
to download it as part of generating the manual.


I would have to set up the environmental variables every time that R got
started in order for the R CMD check to run smoothly.


Best regards,




On Mon, Sep 26, 2022 at 12:01 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:

> On Mon, 26 Sep 2022 10:50:01 -0700
> Edward Wei <edwwei2020 at gmail.com> wrote:
>
> > 1. Where do I run "make check"?
>
> In the directory where R is built from source. If you're using a binary
> build of R, this isn't applicable.
>
> > 3. I get this back when I run the "tools::testInstalledPackages(scope
> > = "base")" on my RGUI.
> >
> > Error: testing 'utils' failed
> >
> > Where may I find the error log for this?
>
> testInstalledPackages() creates output files in the current directory.
> Does list.files(pattern = 'utils|Rout\\.fail') give you anything useful?
>
> --
> Best regards,
> Ivan
>

	[[alternative HTML version deleted]]


From etie@@e@come m@iii@g oii u@iv-eiiiei@ir  Tue Oct  4 12:25:57 2022
From: etie@@e@come m@iii@g oii u@iv-eiiiei@ir (etie@@e@come m@iii@g oii u@iv-eiiiei@ir)
Date: Tue, 4 Oct 2022 12:25:57 +0200 (CEST)
Subject: [R-pkg-devel] 
 NOTE checking for detritus in the temp directory on windows
In-Reply-To: <CAFDcVCQNaP8=iLPG+Vk4vfEN1Y5zfeabca8Qnov5ZomsGLwsZA@mail.gmail.com>
References: <1624161329.20817062.1664440955959.JavaMail.zimbra@ifsttar.fr>
 <CAFDcVCQNaP8=iLPG+Vk4vfEN1Y5zfeabca8Qnov5ZomsGLwsZA@mail.gmail.com>
Message-ID: <1104744221.26257047.1664879157504.JavaMail.zimbra@ifsttar.fr>

Hi,

Thanks a lot Henrik for your detailed response, the problem was the one you suspected a "plan(mutlisession)" that was not correctly closed. And following your advice I was able to reproduce it on winbuilder.

So thanks again for your help!

Best regards, 

Etienne


Etienne C?me, @comeetie
Charg? de Recherche
Universit? Gustave Eiffel
GRETTIA/COSYS
Tel : 01 81 66 87 18
Web : http://www.comeetie.fr

----- Mail original -----
De: "Henrik Bengtsson" <henrik.bengtsson at gmail.com>
?: "etienne come" <etienne.come at univ-eiffel.fr>
Cc: "r-package-devel" <r-package-devel at r-project.org>
Envoy?: Vendredi 30 Septembre 2022 17:19:03
Objet: Re: [R-pkg-devel] NOTE checking for detritus in the temp directory on windows

Hi.

> * checking for detritus in the temp directory ... NOTE
> Found the following files/directories:
> 'Rscript306c1f1adf1' 'Rscript3fb41f1adf1'

Whenever seeing detritus files with name Rscript<hexcode> like these,
it's a strong suggestion that parallel workers on MS Windows are
involved.  More precisely, each of them is from a separate PSOCK
cluster node worker typically launched by parallel::makeCluster().
When such workers are launched in example code, unit tests, or
vignettes those files are created by R itself when running on MS
Windows.  If the workers are not properly shutdown (e.g. forgetting to
call parallel::stopCluster()), those files are left behind, and 'R CMD
check' will detect them.

Now, from experience, but neither fully investigated not understood
yet, it *might* be that even if one calls parallel::stopCluster() at
the end of examples, unit tests, or vignettes, it might be that there
is still a race condition where the parallel workers are still in the
process of shutting down when 'R CMD check' is checking for detritus
files.  If that is the case, then it might be sporadic and tricky to
reproduce this problem.  This has happened to me exactly once. I'm
saying this, only in case you're struggle to reproduce it, but my
guess is that this is *not* the case here. Please see below for
options how to reproduce.

Now, I see you're using 'future' for parallelization.  Because of
this, I suspect you use plan(multisession), which launches parallel
PSOCK workers like parallel::makeCluster().  To shut down those
workers at the end, call plan(sequential).  My guess is that this is
your problem.  Before you do that, I would make sure you can reproduce
the problem first - see below.

> I did not manage to reproduce it with Rhub and github action.

1. Looking at your
https://github.com/comeetie/greed/blob/master/.github/workflows/R-CMD-check.yaml,
I see you're not checking with **R-devel** on MS Windows. I suggest
you add that and too see if you can reproduce it there.  You could
also add an explicit `env: _R_CHECK_THINGS_IN_TEMP_DIR_: true` just in
case (but I'd guess --as-cran does this).

2. Similarly, did you make sure to test with R-devel on MS Windows on R-hub?

3. Did you try with R-devel on the win-builder service?

For your future needs (pun not intended), I would make sure you can
reproduce the problem before trying to fix it.

Hope this helps,

Henrik

On Fri, Sep 30, 2022 at 12:14 AM <etienne.come at univ-eiffel.fr> wrote:
>
> Dear all,
>
> I'm getting the following Note for CRAN pre-tests (for package greed https://github.com/comeetie/greed) :
>
> * checking for detritus in the temp directory ... NOTE
> Found the following files/directories:
> 'Rscript306c1f1adf1' 'Rscript3fb41f1adf1'
>
> this note only appears on windows :
>
> * using R Under development (unstable) (2022-09-26 r82921 ucrt)
> * using platform: x86_64-w64-mingw32 (64-bit)
>
> The full pretest logs are located at https://win-builder.r-project.org/incoming_pretest/greed_0.6.1_20220927_163632/Windows/00check.log
>
> I did not manage to reproduce it with Rhub and github action.
>
> I've seen other questions on the mailing list about "detritus" but the root causes seems to be different in my case since i did not open a navigator and i did not create
> files or folders in my tests or vignettes. Any hint on how to solve this note will be welcome.
>
> Thanks a lot
>
> Etienne
>
>
> Etienne C?me, @comeetie
> Charg? de Recherche
> Universit? Gustave Eiffel
> GRETTIA/COSYS
> Tel : 01 81 66 87 18
> Web : http://www.comeetie.fr
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From v|ncentv@nhee@ @end|ng |rom gm@||@com  Tue Oct  4 16:46:03 2022
From: v|ncentv@nhee@ @end|ng |rom gm@||@com (Vincent van Hees)
Date: Tue, 4 Oct 2022 16:46:03 +0200
Subject: [R-pkg-devel] Guidance on splitting up an R package?
Message-ID: <CALnEB17ExKcv=+EH4NycFFta+jaF0N1FjbfCphttK=cnBdKgow@mail.gmail.com>

Dear all,

I am looking for guidance (blog posts / books / people with expertise) on
how to split up an R package that has grown a lot in complexity and size.
To make it worthwhile, the split needs to ease the maintenance and ongoing
development.

Here are my quick reflections on it:
1. Where possible try to preserve the consistency of the original R
package. So, spin-off packages should ideally become helper-packages to the
original package and tests need to be in place to ensure compatibility of
the original R package is preserved.
2. Keep similar functionality together. For example, a function to read
files does not have to be in the same package as a function to plot the
data, but a function to adjust the color coding of the plots should be
stored near the other plotting functions.
3. Try to isolate external dependencies. For example, if dependency Y
changes I ideally only have to worry about updating one of my R packages to
it instead of several.

I am wondering whether anyone else has ever made a more elaborate mapping
of do's and don'ts when it comes to splitting up an R package or any
software for that matter?

Vincent

	[[alternative HTML version deleted]]


From th|erry@onke||nx @end|ng |rom |nbo@be  Tue Oct  4 17:45:58 2022
From: th|erry@onke||nx @end|ng |rom |nbo@be (Thierry Onkelinx)
Date: Tue, 4 Oct 2022 17:45:58 +0200
Subject: [R-pkg-devel] Guidance on splitting up an R package?
In-Reply-To: <CALnEB17ExKcv=+EH4NycFFta+jaF0N1FjbfCphttK=cnBdKgow@mail.gmail.com>
References: <CALnEB17ExKcv=+EH4NycFFta+jaF0N1FjbfCphttK=cnBdKgow@mail.gmail.com>
Message-ID: <CAJuCY5y8rxenG8=tHjQNQvHgp_wKJ5Q_JdN5++t8AuuWz62-Og@mail.gmail.com>

Dear Vincent,

Have a look at the spatstat package which was split into several smaller
packages (https://github.com/spatstat/spatstat). Maybe the maintainers of
that package can share some insights.

Best regards,

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>


Op di 4 okt. 2022 om 16:46 schreef Vincent van Hees <
vincentvanhees at gmail.com>:

> Dear all,
>
> I am looking for guidance (blog posts / books / people with expertise) on
> how to split up an R package that has grown a lot in complexity and size.
> To make it worthwhile, the split needs to ease the maintenance and ongoing
> development.
>
> Here are my quick reflections on it:
> 1. Where possible try to preserve the consistency of the original R
> package. So, spin-off packages should ideally become helper-packages to the
> original package and tests need to be in place to ensure compatibility of
> the original R package is preserved.
> 2. Keep similar functionality together. For example, a function to read
> files does not have to be in the same package as a function to plot the
> data, but a function to adjust the color coding of the plots should be
> stored near the other plotting functions.
> 3. Try to isolate external dependencies. For example, if dependency Y
> changes I ideally only have to worry about updating one of my R packages to
> it instead of several.
>
> I am wondering whether anyone else has ever made a more elaborate mapping
> of do's and don'ts when it comes to splitting up an R package or any
> software for that matter?
>
> Vincent
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From |gor|@|tu| @end|ng |rom gm@||@com  Tue Oct  4 20:29:54 2022
From: |gor|@|tu| @end|ng |rom gm@||@com (Igor L)
Date: Tue, 4 Oct 2022 15:29:54 -0300
Subject: [R-pkg-devel] How to decrease time to import files in xlsx format?
Message-ID: <CAHGVjr=K9YbwVhEhxq_=9v_uxkT5FXzqhoyomdPWKn_erDsvDA@mail.gmail.com>

Hello all,

I'm developing an R package that basically downloads, imports, cleans and
merges nine files in xlsx format updated monthly from a public institution.

The problem is that importing files in xlsx format is time consuming.

My initial idea was to parallelize the execution of the read_xlsx function
according to the number of cores in the user's processor, but apparently it
didn't make much difference, since when trying to parallelize it the
execution time went from 185.89 to 184.12 seconds:

# not parallelized code
y <- purrr::map_dfr(paste0(dir.temp, '/', lista.arquivos.locais),
               readxl::read_excel, sheet = 1, skip = 4, col_types =
c(rep('text', 30)))

# parallelized code
plan(strategy = future::multicore(workers = 4))
y <- furrr::future_map_dfr(paste0(dir.temp, '/', lista.arquivos.locais),
                             readxl::read_excel, sheet = 1, skip = 4,
col_types = c(rep('text', 30)))

 Any suggestions to reduce the import processing time?

Thanks in advance!

-- 
*Igor Laltuf Marques*
Economist (UFF)
Master in Urban and Regional Planning (IPPUR-UFRJ)
Researcher at ETTERN and CiDMob
https://igorlaltuf.github.io/

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Oct  4 21:39:08 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 4 Oct 2022 22:39:08 +0300
Subject: [R-pkg-devel] 
 How to decrease time to import files in xlsx format?
In-Reply-To: <CAHGVjr=K9YbwVhEhxq_=9v_uxkT5FXzqhoyomdPWKn_erDsvDA@mail.gmail.com>
References: <CAHGVjr=K9YbwVhEhxq_=9v_uxkT5FXzqhoyomdPWKn_erDsvDA@mail.gmail.com>
Message-ID: <20221004223908.0f9894b7@Tarkus>

On Tue, 4 Oct 2022 15:29:54 -0300
Igor L <igorlaltuf at gmail.com> wrote:

> The problem is that importing files in xlsx format is time consuming.

Do the openxlsx or XLConnect packages fare any better?

> plan(strategy = future::multicore(workers = 4))

As far as I understand the documentation, multicore only works on
POSIX-compatible operating systems when not running under RStudio (and
even then, some macOS APIs may be not fork()-safe). Which operating
system are you running? Does it get any better if you use
future::multisession?

Have you tried profiling the code? Do you see it using 100% of one
core in some kind of task manager?

-- 
Best regards,
Ivan


From ||@t@ @end|ng |rom reve||e@net  Tue Oct  4 21:42:19 2022
From: ||@t@ @end|ng |rom reve||e@net (William Revelle)
Date: Tue, 4 Oct 2022 14:42:19 -0500
Subject: [R-pkg-devel] Guidance on splitting up an R package?
In-Reply-To: <CALnEB17ExKcv=+EH4NycFFta+jaF0N1FjbfCphttK=cnBdKgow@mail.gmail.com>
References: <CALnEB17ExKcv=+EH4NycFFta+jaF0N1FjbfCphttK=cnBdKgow@mail.gmail.com>
Message-ID: <5AD2FF42-DEBA-4907-8DFC-3A7D6D7FB45D@revelle.net>

In 2019, I split psych into psych and psychTools to meet the 5MB space restriction.  I moved several of vignettes, data sets, and a few helper functions over to psychTools. This mainly allowed for more vignettes but also allows me to add new data sets to psychTools without needing to recompile psych.   This is discussed in the news file for psych and psychTools.

Bill




> On Oct 4, 2022, at 9:46 AM, Vincent van Hees <vincentvanhees at gmail.com> wrote:
> 
> Dear all,
> 
> I am looking for guidance (blog posts / books / people with expertise) on
> how to split up an R package that has grown a lot in complexity and size.
> To make it worthwhile, the split needs to ease the maintenance and ongoing
> development.
> 
> Here are my quick reflections on it:
> 1. Where possible try to preserve the consistency of the original R
> package. So, spin-off packages should ideally become helper-packages to the
> original package and tests need to be in place to ensure compatibility of
> the original R package is preserved.
> 2. Keep similar functionality together. For example, a function to read
> files does not have to be in the same package as a function to plot the
> data, but a function to adjust the color coding of the plots should be
> stored near the other plotting functions.
> 3. Try to isolate external dependencies. For example, if dependency Y
> changes I ideally only have to worry about updating one of my R packages to
> it instead of several.
> 
> I am wondering whether anyone else has ever made a more elaborate mapping
> of do's and don'ts when it comes to splitting up an R package or any
> software for that matter?
> 
> Vincent
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Oct  4 21:58:27 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 04 Oct 2022 12:58:27 -0700
Subject: [R-pkg-devel] 
 How to decrease time to import files in xlsx format?
In-Reply-To: <CAHGVjr=K9YbwVhEhxq_=9v_uxkT5FXzqhoyomdPWKn_erDsvDA@mail.gmail.com>
References: <CAHGVjr=K9YbwVhEhxq_=9v_uxkT5FXzqhoyomdPWKn_erDsvDA@mail.gmail.com>
Message-ID: <802EE163-77AE-48A3-987F-3F01DFB452A8@dcn.davis.ca.us>

It looks like you are reading directly from URLs? How do you know the delay is not network I/O delay?

Parallel computation is not a panacea. It allows tasks _that are CPU-bound_ to get through the CPU-intensive work faster. You need to be certain that your tasks actually can benefit from parallelism before using it... there is a significant overhead and added complexity to using parallel processing that will lead to SLOWER processing if mis-used.

On October 4, 2022 11:29:54 AM PDT, Igor L <igorlaltuf at gmail.com> wrote:
>Hello all,
>
>I'm developing an R package that basically downloads, imports, cleans and
>merges nine files in xlsx format updated monthly from a public institution.
>
>The problem is that importing files in xlsx format is time consuming.
>
>My initial idea was to parallelize the execution of the read_xlsx function
>according to the number of cores in the user's processor, but apparently it
>didn't make much difference, since when trying to parallelize it the
>execution time went from 185.89 to 184.12 seconds:
>
># not parallelized code
>y <- purrr::map_dfr(paste0(dir.temp, '/', lista.arquivos.locais),
>               readxl::read_excel, sheet = 1, skip = 4, col_types =
>c(rep('text', 30)))
>
># parallelized code
>plan(strategy = future::multicore(workers = 4))
>y <- furrr::future_map_dfr(paste0(dir.temp, '/', lista.arquivos.locais),
>                             readxl::read_excel, sheet = 1, skip = 4,
>col_types = c(rep('text', 30)))
>
> Any suggestions to reduce the import processing time?
>
>Thanks in advance!
>

-- 
Sent from my phone. Please excuse my brevity.


From john@m@h@rro|d @end|ng |rom gm@||@com  Wed Oct  5 14:32:10 2022
From: john@m@h@rro|d @end|ng |rom gm@||@com (John Harrold)
Date: Wed, 5 Oct 2022 05:32:10 -0700
Subject: [R-pkg-devel] CRAN package isoband and its reverse dependencies
Message-ID: <CANAiAiWY8VOz785QgrSDG4GT=kfO09j8CMAMJVHyL9o8oyjvdw@mail.gmail.com>

Howdy Folks,

I got a message from CRAN today telling me that I have a strong reverse
dependency on the isoband package. But I'm not alone! It look like more
than 4700 other packages also have a strong dependency on this. Is there
some organized effort to deal with this?

Thanks
John

	[[alternative HTML version deleted]]


From @|ngm@nn @end|ng |rom gm@||@com  Wed Oct  5 14:34:59 2022
From: @|ngm@nn @end|ng |rom gm@||@com (Henrik Singmann)
Date: Wed, 5 Oct 2022 13:34:59 +0100
Subject: [R-pkg-devel] CRAN package isoband and its reverse dependencies
In-Reply-To: <CANAiAiWY8VOz785QgrSDG4GT=kfO09j8CMAMJVHyL9o8oyjvdw@mail.gmail.com>
References: <CANAiAiWY8VOz785QgrSDG4GT=kfO09j8CMAMJVHyL9o8oyjvdw@mail.gmail.com>
Message-ID: <CA+rDMK+r5TO+MTeKjCGOO-eF3LgsEAfxxZNoJ__u-wq1YCqJ7w@mail.gmail.com>

Hi John,

I think the short answer is yes, see the discussion on their GitHub:
https://github.com/wilkelab/isoband/issues/31
See also: https://github.com/tidyverse/ggplot2/issues/5006

Best,
Henrik

Am Mi., 5. Okt. 2022 um 13:32 Uhr schrieb John Harrold
<john.m.harrold at gmail.com>:
>
> Howdy Folks,
>
> I got a message from CRAN today telling me that I have a strong reverse
> dependency on the isoband package. But I'm not alone! It look like more
> than 4700 other packages also have a strong dependency on this. Is there
> some organized effort to deal with this?
>
> Thanks
> John
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
Dr. Henrik Singmann
Lecturer, Experimental Psychology
University College London (UCL), UK
http://singmann.org


From @c @end|ng |rom |mb|@un|-|re|burg@de  Wed Oct  5 14:39:48 2022
From: @c @end|ng |rom |mb|@un|-|re|burg@de (Guido Schwarzer)
Date: Wed, 5 Oct 2022 14:39:48 +0200
Subject: [R-pkg-devel] CRAN package isoband and its reverse dependencies
In-Reply-To: <CANAiAiWY8VOz785QgrSDG4GT=kfO09j8CMAMJVHyL9o8oyjvdw@mail.gmail.com>
References: <CANAiAiWY8VOz785QgrSDG4GT=kfO09j8CMAMJVHyL9o8oyjvdw@mail.gmail.com>
Message-ID: <bcfdba01-a9ce-d149-06c2-d523785461cc@imbi.uni-freiburg.de>

Am 05.10.22 um 14:32 schrieb John Harrold:

> Howdy Folks,
>
> I got a message from CRAN today telling me that I have a strong reverse
> dependency on the isoband package. But I'm not alone! It look like more
> than 4700 other packages also have a strong dependency on this. Is there
> some organized effort to deal with this?

R package ggplot2 imports isoband which resulted in the very large 
number of strong dependencies.

For my own R packages I could move ggplot2 from Imports to Suggests, 
however, I hope that I can simply wait this out.

Best,

Guido


From |gor|@|tu| @end|ng |rom gm@||@com  Wed Oct  5 14:52:12 2022
From: |gor|@|tu| @end|ng |rom gm@||@com (Igor L)
Date: Wed, 5 Oct 2022 09:52:12 -0300
Subject: [R-pkg-devel] 
 How to decrease time to import files in xlsx format?
In-Reply-To: <802EE163-77AE-48A3-987F-3F01DFB452A8@dcn.davis.ca.us>
References: <CAHGVjr=K9YbwVhEhxq_=9v_uxkT5FXzqhoyomdPWKn_erDsvDA@mail.gmail.com>
 <802EE163-77AE-48A3-987F-3F01DFB452A8@dcn.davis.ca.us>
Message-ID: <CAHGVjrmO1a-+F4z0s986y2U=yNqUQhGpgvRRShpge6t2gprLOQ@mail.gmail.com>

According to my internet research, it looks like readxl is the fastest
package.

The profvis package indicated that the bottleneck is indeed in importing
the files.

My processor has six cores, but when I use four of them the computer
crashes completely. When I use three processors, it's still usable. So I
did one more benchmark comparing for loop, map_dfr and future_map_dfr (with
multisession and three cores).

After the benchmark was run 10 times, the result was:

             expr                  min          lq           mean
 median        uq      max neval
     import_for()        140.9940 147.9722 160.7229 155.6459 172.4661
199.1059    10
 import_map_dfr()   161.6707 339.6769 480.5760 567.8389 643.8895 666.0726
 10
   import_furrr()        112.1374 116.4301 127.5976 129.0067 137.9179
140.8632    10

For me it is proven that using the furrr package is the best solution in
this case, but what would explain so much difference with map_dfr?

Em ter., 4 de out. de 2022 ?s 16:58, Jeff Newmiller <
jdnewmil at dcn.davis.ca.us> escreveu:

> It looks like you are reading directly from URLs? How do you know the
> delay is not network I/O delay?
>
> Parallel computation is not a panacea. It allows tasks _that are
> CPU-bound_ to get through the CPU-intensive work faster. You need to be
> certain that your tasks actually can benefit from parallelism before using
> it... there is a significant overhead and added complexity to using
> parallel processing that will lead to SLOWER processing if mis-used.
>
> On October 4, 2022 11:29:54 AM PDT, Igor L <igorlaltuf at gmail.com> wrote:
> >Hello all,
> >
> >I'm developing an R package that basically downloads, imports, cleans and
> >merges nine files in xlsx format updated monthly from a public
> institution.
> >
> >The problem is that importing files in xlsx format is time consuming.
> >
> >My initial idea was to parallelize the execution of the read_xlsx function
> >according to the number of cores in the user's processor, but apparently
> it
> >didn't make much difference, since when trying to parallelize it the
> >execution time went from 185.89 to 184.12 seconds:
> >
> ># not parallelized code
> >y <- purrr::map_dfr(paste0(dir.temp, '/', lista.arquivos.locais),
> >               readxl::read_excel, sheet = 1, skip = 4, col_types =
> >c(rep('text', 30)))
> >
> ># parallelized code
> >plan(strategy = future::multicore(workers = 4))
> >y <- furrr::future_map_dfr(paste0(dir.temp, '/', lista.arquivos.locais),
> >                             readxl::read_excel, sheet = 1, skip = 4,
> >col_types = c(rep('text', 30)))
> >
> > Any suggestions to reduce the import processing time?
> >
> >Thanks in advance!
> >
>
> --
> Sent from my phone. Please excuse my brevity.
>

	[[alternative HTML version deleted]]


From h@w|ckh@m @end|ng |rom gm@||@com  Wed Oct  5 14:56:52 2022
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Wed, 5 Oct 2022 07:56:52 -0500
Subject: [R-pkg-devel] CRAN package isoband and its reverse dependencies
In-Reply-To: <CANAiAiWY8VOz785QgrSDG4GT=kfO09j8CMAMJVHyL9o8oyjvdw@mail.gmail.com>
References: <CANAiAiWY8VOz785QgrSDG4GT=kfO09j8CMAMJVHyL9o8oyjvdw@mail.gmail.com>
Message-ID: <CABdHhvEJoKP+vxr8KsMBCOk3z=HUsaX4K_v2ZhZZSTaHysLo6w@mail.gmail.com>

Yes, we will make sure that this is fixed ASAP. There is no need to worry.

Hadley

On Wed, Oct 5, 2022 at 7:32 AM John Harrold <john.m.harrold at gmail.com> wrote:
>
> Howdy Folks,
>
> I got a message from CRAN today telling me that I have a strong reverse
> dependency on the isoband package. But I'm not alone! It look like more
> than 4700 other packages also have a strong dependency on this. Is there
> some organized effort to deal with this?
>
> Thanks
> John
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
http://hadley.nz


From d|ego|coe|ho @end|ng |rom gm@||@com  Wed Oct  5 15:13:56 2022
From: d|ego|coe|ho @end|ng |rom gm@||@com (=?UTF-8?Q?Diego_de_Freitas_Co=C3=AAlho?=)
Date: Wed, 5 Oct 2022 10:13:56 -0300
Subject: [R-pkg-devel] 
 How to decrease time to import files in xlsx format?
In-Reply-To: <CAHGVjrmO1a-+F4z0s986y2U=yNqUQhGpgvRRShpge6t2gprLOQ@mail.gmail.com>
References: <CAHGVjr=K9YbwVhEhxq_=9v_uxkT5FXzqhoyomdPWKn_erDsvDA@mail.gmail.com>
 <802EE163-77AE-48A3-987F-3F01DFB452A8@dcn.davis.ca.us>
 <CAHGVjrmO1a-+F4z0s986y2U=yNqUQhGpgvRRShpge6t2gprLOQ@mail.gmail.com>
Message-ID: <CAMCrwUMMpDuDNJL=DmVD3C3r1fbbVPPbf+0qKRa062-tgKxYxA@mail.gmail.com>

Hey Igor,

I have been dealing with *CSV*/*XLSX* files from time to time and depending
on the size of those files you are mentioning, 180 seconds isn't really
that much.
From my experience, *vroom *is the fastest I've encountered but it deals
with *CSV* files (I can support its usage for up to 8gb size files).
If you have the option to import CSVs instead, you should give it a try.

Other than that there are several other factors to be considered, such as
memory and disk read/write capabilities.
And again, it is just 180 seconds so just suggest the user go get a cup of
coffee :)

Best,
Diego

On Wed, 5 Oct 2022 at 10:02, Igor L <igorlaltuf at gmail.com> wrote:

> According to my internet research, it looks like readxl is the fastest
> package.
>
> The profvis package indicated that the bottleneck is indeed in importing
> the files.
>
> My processor has six cores, but when I use four of them the computer
> crashes completely. When I use three processors, it's still usable. So I
> did one more benchmark comparing for loop, map_dfr and future_map_dfr (with
> multisession and three cores).
>
> After the benchmark was run 10 times, the result was:
>
>              expr                  min          lq           mean
>  median        uq      max neval
>      import_for()        140.9940 147.9722 160.7229 155.6459 172.4661
> 199.1059    10
>  import_map_dfr()   161.6707 339.6769 480.5760 567.8389 643.8895 666.0726
>  10
>    import_furrr()        112.1374 116.4301 127.5976 129.0067 137.9179
> 140.8632    10
>
> For me it is proven that using the furrr package is the best solution in
> this case, but what would explain so much difference with map_dfr?
>
> Em ter., 4 de out. de 2022 ?s 16:58, Jeff Newmiller <
> jdnewmil at dcn.davis.ca.us> escreveu:
>
> > It looks like you are reading directly from URLs? How do you know the
> > delay is not network I/O delay?
> >
> > Parallel computation is not a panacea. It allows tasks _that are
> > CPU-bound_ to get through the CPU-intensive work faster. You need to be
> > certain that your tasks actually can benefit from parallelism before
> using
> > it... there is a significant overhead and added complexity to using
> > parallel processing that will lead to SLOWER processing if mis-used.
> >
> > On October 4, 2022 11:29:54 AM PDT, Igor L <igorlaltuf at gmail.com> wrote:
> > >Hello all,
> > >
> > >I'm developing an R package that basically downloads, imports, cleans
> and
> > >merges nine files in xlsx format updated monthly from a public
> > institution.
> > >
> > >The problem is that importing files in xlsx format is time consuming.
> > >
> > >My initial idea was to parallelize the execution of the read_xlsx
> function
> > >according to the number of cores in the user's processor, but apparently
> > it
> > >didn't make much difference, since when trying to parallelize it the
> > >execution time went from 185.89 to 184.12 seconds:
> > >
> > ># not parallelized code
> > >y <- purrr::map_dfr(paste0(dir.temp, '/', lista.arquivos.locais),
> > >               readxl::read_excel, sheet = 1, skip = 4, col_types =
> > >c(rep('text', 30)))
> > >
> > ># parallelized code
> > >plan(strategy = future::multicore(workers = 4))
> > >y <- furrr::future_map_dfr(paste0(dir.temp, '/', lista.arquivos.locais),
> > >                             readxl::read_excel, sheet = 1, skip = 4,
> > >col_types = c(rep('text', 30)))
> > >
> > > Any suggestions to reduce the import processing time?
> > >
> > >Thanks in advance!
> > >
> >
> > --
> > Sent from my phone. Please excuse my brevity.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @|ex@ndre@court|o| @end|ng |rom gm@||@com  Sun Oct  9 14:14:40 2022
From: @|ex@ndre@court|o| @end|ng |rom gm@||@com (Alexandre Courtiol)
Date: Sun, 9 Oct 2022 14:14:40 +0200
Subject: [R-pkg-devel] Issue handling datetimes: possible differences
 between computers
Message-ID: <CAERMt4eYyTKadiTk6ZVgM5UmVXQ83PbBJQzfBOEW7=KZqsBC+w@mail.gmail.com>

Hi R pkg developers,

We are facing a datetime handling issue which manifests itself in a
package we are working on.

In context, we noticed that reading datetime info from an excel file
resulted in different data depending on the computer we used.

We are aware that timezone and regional settings are general sources
of troubles, but the code we are using was trying to circumvent this.
We went only as far as figuring out that the issue happens when
converting a POSIXlt into a POSIXct.

Please find below, a minimal reproducible example where `foo` is
converted to `bar` on two different computers.
`foo` is a POSIXlt with a defined time zone and upon conversion to a
POSIXct, despite using a set time zone, we end up with `bar` being
different on Linux and on a Windows machine.

We noticed that the difference emerges from the system call
`.Internal(as.POSIXct())` within `as.POSIXct.POSIXlt()`.
We also noticed that the internal function in R actually calls
getenv("TZ") within C, which is probably what explains where the
difference comes from.

Such a behaviour is probably expected and not a bug, but what would be
the strategy to convert a POSIXlt into a POSIXct that would not be
machine dependent?

We finally noticed that depending on the datetime used as a starting
point and on the time zone used when calling `as.POSIXct()`, we
sometimes have a difference between computers and sometimes not...
which adds to our puzzlement.

Many thanks.
Alex & Liam


``` r
## On Linux
foo <- structure(list(sec = 0, min = 0L, hour = 0L, mday = 1L, mon =
9L, year = 121L, wday = 5L, yday = 273L, isdst = 0L),
                 class = c("POSIXlt", "POSIXt"), tzone = "UTC")

bar <- as.POSIXct(foo, tz = "Europe/Berlin")

bar
#> [1] "2021-10-01 01:00:00 CEST"

dput(bar)
#> structure(1633042800, class = c("POSIXct", "POSIXt"), tzone =
"Europe/Berlin")
```

``` r
## On Windows
foo <- structure(list(sec = 0, min = 0L, hour = 0L, mday = 1L, mon =
9L, year = 121L, wday = 5L, yday = 273L, isdst = 0L),
                 class = c("POSIXlt", "POSIXt"), tzone = "UTC")

bar <- as.POSIXct(foo, tz = "Europe/Berlin")

bar
#> [1] "2021-10-01 CEST"

dput(bar)
structure(1633046400, class = c("POSIXct", "POSIXt"), tzone = "Europe/Berlin")
```

-- 
Alexandre Courtiol, www.datazoogang.de


From @|mon@urb@nek @end|ng |rom R-project@org  Mon Oct 10 03:57:06 2022
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Mon, 10 Oct 2022 14:57:06 +1300
Subject: [R-pkg-devel] Issue handling datetimes: possible differences
 between computers
In-Reply-To: <CAERMt4eYyTKadiTk6ZVgM5UmVXQ83PbBJQzfBOEW7=KZqsBC+w@mail.gmail.com>
References: <CAERMt4eYyTKadiTk6ZVgM5UmVXQ83PbBJQzfBOEW7=KZqsBC+w@mail.gmail.com>
Message-ID: <24D0D7FC-F6DF-4AB2-B5A3-7E14D631804C@R-project.org>

Alexandre,

it's better to parse the timestamp in correct timezone:

> foo = as.POSIXlt("2021-10-01", "UTC")
> as.POSIXct(as.character(foo), "Europe/Berlin")
[1] "2021-10-01 CEST"

The issue stems from the fact that you are pretending like your timestamp is UTC (which it is not) while you want to interpret the same values in a different time zone. The DST flags varies depending on the day (due to DST being 0 or 1 depending on the date) and POSIXlt does not have that information since you only attached the time zone without updating it:

> str(unclass(as.POSIXlt(foo, "Europe/Berlin")))
List of 9
 $ sec  : num 0
 $ min  : int 0
 $ hour : int 0
 $ mday : int 1
 $ mon  : int 9
 $ year : int 121
 $ wday : int 5
 $ yday : int 273
 $ isdst: int 0
 - attr(*, "tzone")= chr "Europe/Berlin"

note that isdst is 0 from the UTC entry (which doesn't have DST) even though that date is actually DST in CEST. Compare that to the correctly parsed POSIXlt:

> str(unclass(as.POSIXlt(as.character(foo), "Europe/Berlin")))
List of 11
 $ sec   : num 0
 $ min   : int 0
 $ hour  : int 0
 $ mday  : int 1
 $ mon   : int 9
 $ year  : int 121
 $ wday  : int 5
 $ yday  : int 273
 $ isdst : int 1
 $ zone  : chr "CEST"
 $ gmtoff: int NA
 - attr(*, "tzone")= chr "Europe/Berlin"

where isdst is 1 since it is indeed the DST. The OS difference seems to be that Linux respects the isdst information from POSIXlt while Windows and macOS ignores it. This behavior is documented: 

     At all other times ?isdst? can be deduced from the
     first six values, but the behaviour if it is set incorrectly is
     platform-dependent.

You can re-set isdst to -1 to make sure R will try to determine it:

> foo$isdst = -1L
> as.POSIXct(foo, "Europe/Berlin")
[1] "2021-10-01 CEST"

So, generally, you cannot simply change the time zone in POSIXlt - don't pretend the time is in UTC if it's not, you have to re-parse or re-compute the timestamps for it to be reliable or else the DST flag will be wrong.

Cheers,
Simon


> On 10/10/2022, at 1:14 AM, Alexandre Courtiol <alexandre.courtiol at gmail.com> wrote:
> 
> Hi R pkg developers,
> 
> We are facing a datetime handling issue which manifests itself in a
> package we are working on.
> 
> In context, we noticed that reading datetime info from an excel file
> resulted in different data depending on the computer we used.
> 
> We are aware that timezone and regional settings are general sources
> of troubles, but the code we are using was trying to circumvent this.
> We went only as far as figuring out that the issue happens when
> converting a POSIXlt into a POSIXct.
> 
> Please find below, a minimal reproducible example where `foo` is
> converted to `bar` on two different computers.
> `foo` is a POSIXlt with a defined time zone and upon conversion to a
> POSIXct, despite using a set time zone, we end up with `bar` being
> different on Linux and on a Windows machine.
> 
> We noticed that the difference emerges from the system call
> `.Internal(as.POSIXct())` within `as.POSIXct.POSIXlt()`.
> We also noticed that the internal function in R actually calls
> getenv("TZ") within C, which is probably what explains where the
> difference comes from.
> 
> Such a behaviour is probably expected and not a bug, but what would be
> the strategy to convert a POSIXlt into a POSIXct that would not be
> machine dependent?
> 
> We finally noticed that depending on the datetime used as a starting
> point and on the time zone used when calling `as.POSIXct()`, we
> sometimes have a difference between computers and sometimes not...
> which adds to our puzzlement.
> 
> Many thanks.
> Alex & Liam
> 
> 
> ``` r
> ## On Linux
> foo <- structure(list(sec = 0, min = 0L, hour = 0L, mday = 1L, mon =
> 9L, year = 121L, wday = 5L, yday = 273L, isdst = 0L),
>                 class = c("POSIXlt", "POSIXt"), tzone = "UTC")
> 
> bar <- as.POSIXct(foo, tz = "Europe/Berlin")
> 
> bar
> #> [1] "2021-10-01 01:00:00 CEST"
> 
> dput(bar)
> #> structure(1633042800, class = c("POSIXct", "POSIXt"), tzone =
> "Europe/Berlin")
> ```
> 
> ``` r
> ## On Windows
> foo <- structure(list(sec = 0, min = 0L, hour = 0L, mday = 1L, mon =
> 9L, year = 121L, wday = 5L, yday = 273L, isdst = 0L),
>                 class = c("POSIXlt", "POSIXt"), tzone = "UTC")
> 
> bar <- as.POSIXct(foo, tz = "Europe/Berlin")
> 
> bar
> #> [1] "2021-10-01 CEST"
> 
> dput(bar)
> structure(1633046400, class = c("POSIXct", "POSIXt"), tzone = "Europe/Berlin")
> ```
> 
> -- 
> Alexandre Courtiol, www.datazoogang.de
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Oct 10 04:31:03 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 09 Oct 2022 19:31:03 -0700
Subject: [R-pkg-devel] Issue handling datetimes: possible differences
 between computers
In-Reply-To: <24D0D7FC-F6DF-4AB2-B5A3-7E14D631804C@R-project.org>
References: <CAERMt4eYyTKadiTk6ZVgM5UmVXQ83PbBJQzfBOEW7=KZqsBC+w@mail.gmail.com>
 <24D0D7FC-F6DF-4AB2-B5A3-7E14D631804C@R-project.org>
Message-ID: <16B5505C-DAE0-4735-AED3-92B86E7A0DD8@dcn.davis.ca.us>

... which is why tidyverse functions and Python datetime handling irk me so much.

Is tidyverse time handling intrinsically broken? They have a standard practice of reading time as UTC and then using force_tz to fix the "mistake". Same as Python.

On October 9, 2022 6:57:06 PM PDT, Simon Urbanek <simon.urbanek at R-project.org> wrote:
>Alexandre,
>
>it's better to parse the timestamp in correct timezone:
>
>> foo = as.POSIXlt("2021-10-01", "UTC")
>> as.POSIXct(as.character(foo), "Europe/Berlin")
>[1] "2021-10-01 CEST"
>
>The issue stems from the fact that you are pretending like your timestamp is UTC (which it is not) while you want to interpret the same values in a different time zone. The DST flags varies depending on the day (due to DST being 0 or 1 depending on the date) and POSIXlt does not have that information since you only attached the time zone without updating it:
>
>> str(unclass(as.POSIXlt(foo, "Europe/Berlin")))
>List of 9
> $ sec  : num 0
> $ min  : int 0
> $ hour : int 0
> $ mday : int 1
> $ mon  : int 9
> $ year : int 121
> $ wday : int 5
> $ yday : int 273
> $ isdst: int 0
> - attr(*, "tzone")= chr "Europe/Berlin"
>
>note that isdst is 0 from the UTC entry (which doesn't have DST) even though that date is actually DST in CEST. Compare that to the correctly parsed POSIXlt:
>
>> str(unclass(as.POSIXlt(as.character(foo), "Europe/Berlin")))
>List of 11
> $ sec   : num 0
> $ min   : int 0
> $ hour  : int 0
> $ mday  : int 1
> $ mon   : int 9
> $ year  : int 121
> $ wday  : int 5
> $ yday  : int 273
> $ isdst : int 1
> $ zone  : chr "CEST"
> $ gmtoff: int NA
> - attr(*, "tzone")= chr "Europe/Berlin"
>
>where isdst is 1 since it is indeed the DST. The OS difference seems to be that Linux respects the isdst information from POSIXlt while Windows and macOS ignores it. This behavior is documented: 
>
>     At all other times ?isdst? can be deduced from the
>     first six values, but the behaviour if it is set incorrectly is
>     platform-dependent.
>
>You can re-set isdst to -1 to make sure R will try to determine it:
>
>> foo$isdst = -1L
>> as.POSIXct(foo, "Europe/Berlin")
>[1] "2021-10-01 CEST"
>
>So, generally, you cannot simply change the time zone in POSIXlt - don't pretend the time is in UTC if it's not, you have to re-parse or re-compute the timestamps for it to be reliable or else the DST flag will be wrong.
>
>Cheers,
>Simon
>
>
>> On 10/10/2022, at 1:14 AM, Alexandre Courtiol <alexandre.courtiol at gmail.com> wrote:
>> 
>> Hi R pkg developers,
>> 
>> We are facing a datetime handling issue which manifests itself in a
>> package we are working on.
>> 
>> In context, we noticed that reading datetime info from an excel file
>> resulted in different data depending on the computer we used.
>> 
>> We are aware that timezone and regional settings are general sources
>> of troubles, but the code we are using was trying to circumvent this.
>> We went only as far as figuring out that the issue happens when
>> converting a POSIXlt into a POSIXct.
>> 
>> Please find below, a minimal reproducible example where `foo` is
>> converted to `bar` on two different computers.
>> `foo` is a POSIXlt with a defined time zone and upon conversion to a
>> POSIXct, despite using a set time zone, we end up with `bar` being
>> different on Linux and on a Windows machine.
>> 
>> We noticed that the difference emerges from the system call
>> `.Internal(as.POSIXct())` within `as.POSIXct.POSIXlt()`.
>> We also noticed that the internal function in R actually calls
>> getenv("TZ") within C, which is probably what explains where the
>> difference comes from.
>> 
>> Such a behaviour is probably expected and not a bug, but what would be
>> the strategy to convert a POSIXlt into a POSIXct that would not be
>> machine dependent?
>> 
>> We finally noticed that depending on the datetime used as a starting
>> point and on the time zone used when calling `as.POSIXct()`, we
>> sometimes have a difference between computers and sometimes not...
>> which adds to our puzzlement.
>> 
>> Many thanks.
>> Alex & Liam
>> 
>> 
>> ``` r
>> ## On Linux
>> foo <- structure(list(sec = 0, min = 0L, hour = 0L, mday = 1L, mon =
>> 9L, year = 121L, wday = 5L, yday = 273L, isdst = 0L),
>>                 class = c("POSIXlt", "POSIXt"), tzone = "UTC")
>> 
>> bar <- as.POSIXct(foo, tz = "Europe/Berlin")
>> 
>> bar
>> #> [1] "2021-10-01 01:00:00 CEST"
>> 
>> dput(bar)
>> #> structure(1633042800, class = c("POSIXct", "POSIXt"), tzone =
>> "Europe/Berlin")
>> ```
>> 
>> ``` r
>> ## On Windows
>> foo <- structure(list(sec = 0, min = 0L, hour = 0L, mday = 1L, mon =
>> 9L, year = 121L, wday = 5L, yday = 273L, isdst = 0L),
>>                 class = c("POSIXlt", "POSIXt"), tzone = "UTC")
>> 
>> bar <- as.POSIXct(foo, tz = "Europe/Berlin")
>> 
>> bar
>> #> [1] "2021-10-01 CEST"
>> 
>> dput(bar)
>> structure(1633046400, class = c("POSIXct", "POSIXt"), tzone = "Europe/Berlin")
>> ```
>> 
>> -- 
>> Alexandre Courtiol, www.datazoogang.de
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From d@tr7320 @end|ng |rom un|@@ydney@edu@@u  Mon Oct 10 10:00:04 2022
From: d@tr7320 @end|ng |rom un|@@ydney@edu@@u (Dario Strbenac)
Date: Mon, 10 Oct 2022 08:00:04 +0000
Subject: [R-pkg-devel] Identify Original Column Names of Model Matrix
Message-ID: <SY2PR01MB30033EFCF280CCC2EB45B06DCD209@SY2PR01MB3003.ausprd01.prod.outlook.com>

Good day,

I am developing a wrapper around xgboost which does not (yet - I see that it is on the developer's version 2.0 task list) support factor variable type. It requires input data to be in one-hot encoding, which is created by Matrix::sparse.model.matrix. For further analysis, such as variable importance, is there a way to identify which original feature each column of a sparse.model.matrix result was derived from? Using str(oneHotMatrix), I don't see any class slots nor tacked-on attributes which would confidently allow the identification of original column names of the expanded input data. Is there an alternative way to robustly identify the original variable names?

--------------------------------------
Dario Strbenac
University of Sydney
Camperdown NSW 2050
Australia

From h@w|ckh@m @end|ng |rom gm@||@com  Mon Oct 10 18:40:42 2022
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Mon, 10 Oct 2022 11:40:42 -0500
Subject: [R-pkg-devel] Issue handling datetimes: possible differences
 between computers
In-Reply-To: <16B5505C-DAE0-4735-AED3-92B86E7A0DD8@dcn.davis.ca.us>
References: <CAERMt4eYyTKadiTk6ZVgM5UmVXQ83PbBJQzfBOEW7=KZqsBC+w@mail.gmail.com>
 <24D0D7FC-F6DF-4AB2-B5A3-7E14D631804C@R-project.org>
 <16B5505C-DAE0-4735-AED3-92B86E7A0DD8@dcn.davis.ca.us>
Message-ID: <CABdHhvFv32jRvm9WHX4dckOjWs1LK=tV=134K-0cOAgzvvDi=A@mail.gmail.com>

On Sun, Oct 9, 2022 at 9:31 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> ... which is why tidyverse functions and Python datetime handling irk me so much.
>
> Is tidyverse time handling intrinsically broken? They have a standard practice of reading time as UTC and then using force_tz to fix the "mistake". Same as Python.

Can you point to any docs that lead you to this conclusion so we can
get them fixed? I strongly encourage people to parse date-times in the
correct time zone; this is why lubridate::ymd_hms() and friends have a
tz argument.

Hadley

-- 
http://hadley.nz


From jo@h@m@u|r|ch @end|ng |rom gm@||@com  Mon Oct 10 22:12:21 2022
From: jo@h@m@u|r|ch @end|ng |rom gm@||@com (Joshua Ulrich)
Date: Mon, 10 Oct 2022 15:12:21 -0500
Subject: [R-pkg-devel] Rd cross-references to Suggested package
Message-ID: <CAPPM_gT_Fh61FzGmrsQZt7dNWiZs6J6pxjFwiGGUNbQ2hQbhNw@mail.gmail.com>

Hi all,

I'd like to link to a help page of a package in my package's Suggests.
WRE, section 2.5 says,

"Historically (before R version 4.1.0), links of the form
\link[pkg]{foo} and \link[pkg:bar]{foo} used to be interpreted as
links to files foo.html and bar.html in package pkg, respectively. For
this reason, the HTML help system looks for file foo.html in package
pkg if it does not find topic foo, and then searches for the topic in
other installed packages. To test that links work both with both old
and new systems, the pre-4.1.0 behaviour can be restored by setting
the environment variable _R_HELP_LINKS_TO_TOPICS_=false.

"Packages referred to by these ?other forms? should be declared in the
DESCRIPTION file, in the ?Depends?, ?Im
ports?, ?Suggests? or ?Enhances? fields."

This seems to imply that it's possible... though I don't understand
when I need to set _R_HELP_LINKS_TO_TOPICS_=false in order to test
that the link is done correctly. I'm using \link[pkg]{foo} in R 4.2.1.

I ran R CMD build/INSTALL/check with and without that env var set to
false. Both times the suggested package was not installed on my
library path, so I had to set _R_CHECK_FORCE_SUGGESTS_=false for R CMD
check --as-cran.

I didn't notice a difference in output from R CMD check. Both runs had:

    * checking Rd cross-references ... NOTE
    Package unavailable to check Rd xrefs: ?timeSeries?

I'd appreciate any thoughts and/or pointers to other documentation.

Best,
Josh


-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From @|mon@urb@nek @end|ng |rom R-project@org  Mon Oct 10 22:13:16 2022
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 11 Oct 2022 09:13:16 +1300
Subject: [R-pkg-devel] Issue handling datetimes: possible differences
 between computers
In-Reply-To: <C86BDDF6-44EE-4B9B-9515-F19F954B5337@liamdbailey.com>
References: <CAERMt4eYyTKadiTk6ZVgM5UmVXQ83PbBJQzfBOEW7=KZqsBC+w@mail.gmail.com>
 <24D0D7FC-F6DF-4AB2-B5A3-7E14D631804C@R-project.org>
 <16B5505C-DAE0-4735-AED3-92B86E7A0DD8@dcn.davis.ca.us>
 <CABdHhvFv32jRvm9WHX4dckOjWs1LK=tV=134K-0cOAgzvvDi=A@mail.gmail.com>
 <C86BDDF6-44EE-4B9B-9515-F19F954B5337@liamdbailey.com>
Message-ID: <03EBA665-067E-45F4-A97B-4E94E98D65A8@R-project.org>

Liam,

I think I have failed to convey my main point in the last e-mail - which was that you want to parse the date/time in the timezone that you care about so in your example that would be

> foo <- as.Date(33874, origin = "1899-12-30")
> foo
[1] "1992-09-27"
> as.POSIXlt(as.character(foo), "Europe/Berlin")
[1] "1992-09-27 CEST"

I was explicitly saying that you do NOT want to simply change the time zone on POSIXlt objects as that won't work for reasons I explained - see my last e-mail.

Cheers,
Simon


> On 11/10/2022, at 6:31 AM, Liam Bailey <liam.bailey at liamdbailey.com> wrote:
> 
> Hi all,
> 
> Thanks Simon for the detailed response, that helps us understand a lot better what?s going on! However, with your response in mind, we still encounter some behaviour that we did not expect.
> 
> I?ve included another minimum reproducible example below to expand on the situation. In this example, `foo` is a Date object that we generate from a numeric input. Following your advice, `bar` is then a POSIXlt object where we now explicitly define timezone using argument tz. However, even though we are explicit about the timezone the POSIXlt that is generated is always in UTC. This then leads to the issues outlined by Alexandre above, which we now understand are caused by DST.
> 
> ``` r
> #Generate date from numeric
>     #Not possible to specify tz at this point
>     foo <- as.Date(33874, origin = "1899-12-30")
>     dput(foo)
> #> structure(8305, class = "Date")
>     
>     #Convert to POSIXlt specifying UTC timezone
>     bar <- as.POSIXlt(foo, tz = "UTC")
>     dput(bar)
> #> structure(list(sec = 0, min = 0L, hour = 0L, mday = 27L, mon = 8L, 
> #>     year = 92L, wday = 0L, yday = 270L, isdst = 0L), class = c("POSIXlt", 
> #> "POSIXt"), tzone = "UTC")
>     
>     #Convert to POSIXlt specifying Europe/Berlin.
>     #Time zone is still UTC
>     bar <- as.POSIXlt(foo, tz = "Europe/Berlin")
>     dput(bar)
> #> structure(list(sec = 0, min = 0L, hour = 0L, mday = 27L, mon = 8L, 
> #>     year = 92L, wday = 0L, yday = 270L, isdst = 0L), class = c("POSIXlt", 
> #> "POSIXt"), tzone = "UTC")
> ```
> 
> 
> We noticed that this occurs because the tz argument is not passed to `.Internal(Date2POSIXlt())` inside `as.POSIXlt.Date()`.
> 
> Reading through the documentation for `as.POSIX*` we can see that this behaviour is described:
> 
> 	> ?Dates without times are treated as being at midnight UTC.?
> 
> In this case, if we want to convert a Date object to POSIX* and specify a (non-UTC) timezone would the best strategy be to first coerce our Date object to character? Alternatively, `lubridate::as_datetime()` does seem to recognise the tz argument and convert a Date object to POSIX* with non-UTC time zone (see second example below). But it would be nice to know if there are subtle differences between these two approaches that we should be aware of.
> 
> ``` r
> foo <- as.Date(33874, origin = "1899-12-30")
> dput(foo)
> #> structure(8305, class = "Date")
> 
> #Convert to POSIXct specifying UTC timezone
> bar <- lubridate::as_datetime(foo, tz = "UTC")
> dput(as.POSIXlt(bar))
> #> structure(list(sec = 0, min = 0L, hour = 0L, mday = 27L, mon = 8L, 
> #>     year = 92L, wday = 0L, yday = 270L, isdst = 0L), class = c("POSIXlt", 
> #> "POSIXt"), tzone = "UTC")
> 
> #Convert to POSIXct specifying Europe/Berlin
> bar <- lubridate::as_datetime(foo, tz = "Europe/Berlin")
> dput(as.POSIXlt(bar))
> #> structure(list(sec = 0, min = 0L, hour = 0L, mday = 27L, mon = 8L, 
> #>     year = 92L, wday = 0L, yday = 270L, isdst = 1L, zone = "CEST", 
> #>     gmtoff = 7200L), class = c("POSIXlt", "POSIXt"), tzone = c("Europe/Berlin", 
> #> "CET", "CEST"))
> ```
> 
> Thanks again for all your help.
> Alex & Liam
> 
>> On 10 Oct 2022, at 6:40 pm, Hadley Wickham <h.wickham at gmail.com> wrote:
>> 
>> On Sun, Oct 9, 2022 at 9:31 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>>> 
>>> ... which is why tidyverse functions and Python datetime handling irk me so much.
>>> 
>>> Is tidyverse time handling intrinsically broken? They have a standard practice of reading time as UTC and then using force_tz to fix the "mistake". Same as Python.
>> 
>> Can you point to any docs that lead you to this conclusion so we can
>> get them fixed? I strongly encourage people to parse date-times in the
>> correct time zone; this is why lubridate::ymd_hms() and friends have a
>> tz argument.
>> 
>> Hadley
>> 
>> -- 
>> http://hadley.nz
> 


From @|ex@ndre@court|o| @end|ng |rom gm@||@com  Mon Oct 10 22:50:26 2022
From: @|ex@ndre@court|o| @end|ng |rom gm@||@com (Alexandre Courtiol)
Date: Mon, 10 Oct 2022 22:50:26 +0200
Subject: [R-pkg-devel] Issue handling datetimes: possible differences
 between computers
In-Reply-To: <03EBA665-067E-45F4-A97B-4E94E98D65A8@R-project.org>
References: <CAERMt4eYyTKadiTk6ZVgM5UmVXQ83PbBJQzfBOEW7=KZqsBC+w@mail.gmail.com>
 <24D0D7FC-F6DF-4AB2-B5A3-7E14D631804C@R-project.org>
 <16B5505C-DAE0-4735-AED3-92B86E7A0DD8@dcn.davis.ca.us>
 <CABdHhvFv32jRvm9WHX4dckOjWs1LK=tV=134K-0cOAgzvvDi=A@mail.gmail.com>
 <C86BDDF6-44EE-4B9B-9515-F19F954B5337@liamdbailey.com>
 <03EBA665-067E-45F4-A97B-4E94E98D65A8@R-project.org>
Message-ID: <CAERMt4doKk0OFujPOzi7vNz6NrzHV8c56=5=CKMhfWBtyFbY3Q@mail.gmail.com>

Hi Simon,

Thanks for the clarification.

From a naive developer point of view, we were initially baffled that the
generic as.POSIXlt() does very different things on a character and on a
Date input:

as.POSIXlt(as.character(foo), "Europe/Berlin")
[1] "1992-09-27 CEST"

as.POSIXlt(foo, "Europe/Berlin")
[1] "1992-09-27 UTC"

Based on what you said, it does make sense: it is only when creating the
date/time that we want to include the time zone and that only happens when
we don't already work on a previously created date.
That is your subtle but spot-on distinction between "parsing" and
"changing" the time zone.

Yet, we do find it dangerous that as.POSIXlt.Date() accepts a time zone but
does nothing of it, especially when the help file starts with:

Usage
as.POSIXlt(x, tz = "", ...)

The behaviour is documented, as Liam reported it, but still, we will almost
certainly not be the last one tripping on this (without even adding the
additional issue of as.POSIXct() behaving differently across OS).

Thanks again,

Alex & Liam




On Mon, 10 Oct 2022 at 22:13, Simon Urbanek <simon.urbanek at r-project.org>
wrote:

> Liam,
>
> I think I have failed to convey my main point in the last e-mail - which
> was that you want to parse the date/time in the timezone that you care
> about so in your example that would be
>
> > foo <- as.Date(33874, origin = "1899-12-30")
> > foo
> [1] "1992-09-27"
> > as.POSIXlt(as.character(foo), "Europe/Berlin")
> [1] "1992-09-27 CEST"
>
> I was explicitly saying that you do NOT want to simply change the time
> zone on POSIXlt objects as that won't work for reasons I explained - see my
> last e-mail.
>
> Cheers,
> Simon
>
>
> > On 11/10/2022, at 6:31 AM, Liam Bailey <liam.bailey at liamdbailey.com>
> wrote:
> >
> > Hi all,
> >
> > Thanks Simon for the detailed response, that helps us understand a lot
> better what?s going on! However, with your response in mind, we still
> encounter some behaviour that we did not expect.
> >
> > I?ve included another minimum reproducible example below to expand on
> the situation. In this example, `foo` is a Date object that we generate
> from a numeric input. Following your advice, `bar` is then a POSIXlt object
> where we now explicitly define timezone using argument tz. However, even
> though we are explicit about the timezone the POSIXlt that is generated is
> always in UTC. This then leads to the issues outlined by Alexandre above,
> which we now understand are caused by DST.
> >
> > ``` r
> > #Generate date from numeric
> >     #Not possible to specify tz at this point
> >     foo <- as.Date(33874, origin = "1899-12-30")
> >     dput(foo)
> > #> structure(8305, class = "Date")
> >
> >     #Convert to POSIXlt specifying UTC timezone
> >     bar <- as.POSIXlt(foo, tz = "UTC")
> >     dput(bar)
> > #> structure(list(sec = 0, min = 0L, hour = 0L, mday = 27L, mon = 8L,
> > #>     year = 92L, wday = 0L, yday = 270L, isdst = 0L), class =
> c("POSIXlt",
> > #> "POSIXt"), tzone = "UTC")
> >
> >     #Convert to POSIXlt specifying Europe/Berlin.
> >     #Time zone is still UTC
> >     bar <- as.POSIXlt(foo, tz = "Europe/Berlin")
> >     dput(bar)
> > #> structure(list(sec = 0, min = 0L, hour = 0L, mday = 27L, mon = 8L,
> > #>     year = 92L, wday = 0L, yday = 270L, isdst = 0L), class =
> c("POSIXlt",
> > #> "POSIXt"), tzone = "UTC")
> > ```
> >
> >
> > We noticed that this occurs because the tz argument is not passed to
> `.Internal(Date2POSIXlt())` inside `as.POSIXlt.Date()`.
> >
> > Reading through the documentation for `as.POSIX*` we can see that this
> behaviour is described:
> >
> >       > ?Dates without times are treated as being at midnight UTC.?
> >
> > In this case, if we want to convert a Date object to POSIX* and specify
> a (non-UTC) timezone would the best strategy be to first coerce our Date
> object to character? Alternatively, `lubridate::as_datetime()` does seem to
> recognise the tz argument and convert a Date object to POSIX* with non-UTC
> time zone (see second example below). But it would be nice to know if there
> are subtle differences between these two approaches that we should be aware
> of.
> >
> > ``` r
> > foo <- as.Date(33874, origin = "1899-12-30")
> > dput(foo)
> > #> structure(8305, class = "Date")
> >
> > #Convert to POSIXct specifying UTC timezone
> > bar <- lubridate::as_datetime(foo, tz = "UTC")
> > dput(as.POSIXlt(bar))
> > #> structure(list(sec = 0, min = 0L, hour = 0L, mday = 27L, mon = 8L,
> > #>     year = 92L, wday = 0L, yday = 270L, isdst = 0L), class =
> c("POSIXlt",
> > #> "POSIXt"), tzone = "UTC")
> >
> > #Convert to POSIXct specifying Europe/Berlin
> > bar <- lubridate::as_datetime(foo, tz = "Europe/Berlin")
> > dput(as.POSIXlt(bar))
> > #> structure(list(sec = 0, min = 0L, hour = 0L, mday = 27L, mon = 8L,
> > #>     year = 92L, wday = 0L, yday = 270L, isdst = 1L, zone = "CEST",
> > #>     gmtoff = 7200L), class = c("POSIXlt", "POSIXt"), tzone =
> c("Europe/Berlin",
> > #> "CET", "CEST"))
> > ```
> >
> > Thanks again for all your help.
> > Alex & Liam
> >
> >> On 10 Oct 2022, at 6:40 pm, Hadley Wickham <h.wickham at gmail.com> wrote:
> >>
> >> On Sun, Oct 9, 2022 at 9:31 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> wrote:
> >>>
> >>> ... which is why tidyverse functions and Python datetime handling irk
> me so much.
> >>>
> >>> Is tidyverse time handling intrinsically broken? They have a standard
> practice of reading time as UTC and then using force_tz to fix the
> "mistake". Same as Python.
> >>
> >> Can you point to any docs that lead you to this conclusion so we can
> >> get them fixed? I strongly encourage people to parse date-times in the
> >> correct time zone; this is why lubridate::ymd_hms() and friends have a
> >> tz argument.
> >>
> >> Hadley
> >>
> >> --
> >> http://hadley.nz
> >
>
>

-- 
Alexandre Courtiol, www.datazoogang.de

	[[alternative HTML version deleted]]


From d|ego@hern@ngomezherrero @end|ng |rom gm@||@com  Mon Oct 10 17:25:49 2022
From: d|ego@hern@ngomezherrero @end|ng |rom gm@||@com (=?UTF-8?Q?Diego_Hernang=C3=B3mez_Herrero?=)
Date: Mon, 10 Oct 2022 17:25:49 +0200
Subject: [R-pkg-devel] Best way forward on a CRAN archived package
Message-ID: <CAA-ibaxp8a5uttw3hci2ZUXit-CjJZf4uaYaqR4zRuD--tAMrw@mail.gmail.com>

Hi:

I have some doubts on how to proceed in this case. I am the developer of
tidyterra, and I received an email from CRAN on 23Sep2022 about an issue on
the package, setting a deadline on 07Oct2022 to correct it.

I sent a patch that was accepted on CRAN on 29Sep2022, that fixed the issue
(or at least I am pretty sure I solved it). I received no further feedback
by CRAN, so I assumed the package was safe. However it was finally archived
on 07Oct2022.

I have already sent an email to CRAN in order to check if they think the
issues still persist (or maybe they missed the patch submission?), but I am
in a rush since there are other packages that depend on tidyterra and they
may be in risk of being archived on CRAN as well.

So my question is: What is the best way forward at this point? Should I
wait to get some feedback from CRAN or is it best to resubmit the package
(I already have a new patch prepared)? I acknowledge that  "The time of the
volunteers is CRAN?s most precious resource" so my goal is to reduce their
burden as much as possible.

Kind regards

-- 



Have a nice day!

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Mon Oct 10 22:59:35 2022
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Mon, 10 Oct 2022 16:59:35 -0400
Subject: [R-pkg-devel] Issue handling datetimes: possible differences
 between computers
In-Reply-To: <CAERMt4doKk0OFujPOzi7vNz6NrzHV8c56=5=CKMhfWBtyFbY3Q@mail.gmail.com>
References: <CAERMt4eYyTKadiTk6ZVgM5UmVXQ83PbBJQzfBOEW7=KZqsBC+w@mail.gmail.com>
 <24D0D7FC-F6DF-4AB2-B5A3-7E14D631804C@R-project.org>
 <16B5505C-DAE0-4735-AED3-92B86E7A0DD8@dcn.davis.ca.us>
 <CABdHhvFv32jRvm9WHX4dckOjWs1LK=tV=134K-0cOAgzvvDi=A@mail.gmail.com>
 <C86BDDF6-44EE-4B9B-9515-F19F954B5337@liamdbailey.com>
 <03EBA665-067E-45F4-A97B-4E94E98D65A8@R-project.org>
 <CAERMt4doKk0OFujPOzi7vNz6NrzHV8c56=5=CKMhfWBtyFbY3Q@mail.gmail.com>
Message-ID: <2e92f0f1-ddfd-1c74-4805-ac65821ccd81@gmail.com>

   Right now as.POSIXlt.Date() is just

function (x, ...)
.Internal(Date2POSIXlt(x))

How expensive would it be to throw a warning when '...' is provided by 
the user/discarded ??

Alternately, perhaps the documentation could be amended, although I'm 
not quite sure what to suggest. (The sentence Liam refers to, "Dates 
without times are treated as being at midnight UTC." is correct but 
terse ...)


On 2022-10-10 4:50 p.m., Alexandre Courtiol wrote:
> Hi Simon,
> 
> Thanks for the clarification.
> 
>  From a naive developer point of view, we were initially baffled that the
> generic as.POSIXlt() does very different things on a character and on a
> Date input:
> 
> as.POSIXlt(as.character(foo), "Europe/Berlin")
> [1] "1992-09-27 CEST"
> 
> as.POSIXlt(foo, "Europe/Berlin")
> [1] "1992-09-27 UTC"
> 
> Based on what you said, it does make sense: it is only when creating the
> date/time that we want to include the time zone and that only happens when
> we don't already work on a previously created date.
> That is your subtle but spot-on distinction between "parsing" and
> "changing" the time zone.
> 
> Yet, we do find it dangerous that as.POSIXlt.Date() accepts a time zone but
> does nothing of it, especially when the help file starts with:
> 
> Usage
> as.POSIXlt(x, tz = "", ...)
> 
> The behaviour is documented, as Liam reported it, but still, we will almost
> certainly not be the last one tripping on this (without even adding the
> additional issue of as.POSIXct() behaving differently across OS).
> 
> Thanks again,
> 
> Alex & Liam
> 
> 
> 
> 
> On Mon, 10 Oct 2022 at 22:13, Simon Urbanek <simon.urbanek at r-project.org>
> wrote:
> 
>> Liam,
>>
>> I think I have failed to convey my main point in the last e-mail - which
>> was that you want to parse the date/time in the timezone that you care
>> about so in your example that would be
>>
>>> foo <- as.Date(33874, origin = "1899-12-30")
>>> foo
>> [1] "1992-09-27"
>>> as.POSIXlt(as.character(foo), "Europe/Berlin")
>> [1] "1992-09-27 CEST"
>>
>> I was explicitly saying that you do NOT want to simply change the time
>> zone on POSIXlt objects as that won't work for reasons I explained - see my
>> last e-mail.
>>
>> Cheers,
>> Simon
>>
>>
>>> On 11/10/2022, at 6:31 AM, Liam Bailey <liam.bailey at liamdbailey.com>
>> wrote:
>>>
>>> Hi all,
>>>
>>> Thanks Simon for the detailed response, that helps us understand a lot
>> better what?s going on! However, with your response in mind, we still
>> encounter some behaviour that we did not expect.
>>>
>>> I?ve included another minimum reproducible example below to expand on
>> the situation. In this example, `foo` is a Date object that we generate
>> from a numeric input. Following your advice, `bar` is then a POSIXlt object
>> where we now explicitly define timezone using argument tz. However, even
>> though we are explicit about the timezone the POSIXlt that is generated is
>> always in UTC. This then leads to the issues outlined by Alexandre above,
>> which we now understand are caused by DST.
>>>
>>> ``` r
>>> #Generate date from numeric
>>>      #Not possible to specify tz at this point
>>>      foo <- as.Date(33874, origin = "1899-12-30")
>>>      dput(foo)
>>> #> structure(8305, class = "Date")
>>>
>>>      #Convert to POSIXlt specifying UTC timezone
>>>      bar <- as.POSIXlt(foo, tz = "UTC")
>>>      dput(bar)
>>> #> structure(list(sec = 0, min = 0L, hour = 0L, mday = 27L, mon = 8L,
>>> #>     year = 92L, wday = 0L, yday = 270L, isdst = 0L), class =
>> c("POSIXlt",
>>> #> "POSIXt"), tzone = "UTC")
>>>
>>>      #Convert to POSIXlt specifying Europe/Berlin.
>>>      #Time zone is still UTC
>>>      bar <- as.POSIXlt(foo, tz = "Europe/Berlin")
>>>      dput(bar)
>>> #> structure(list(sec = 0, min = 0L, hour = 0L, mday = 27L, mon = 8L,
>>> #>     year = 92L, wday = 0L, yday = 270L, isdst = 0L), class =
>> c("POSIXlt",
>>> #> "POSIXt"), tzone = "UTC")
>>> ```
>>>
>>>
>>> We noticed that this occurs because the tz argument is not passed to
>> `.Internal(Date2POSIXlt())` inside `as.POSIXlt.Date()`.
>>>
>>> Reading through the documentation for `as.POSIX*` we can see that this
>> behaviour is described:
>>>
>>>        > ?Dates without times are treated as being at midnight UTC.?
>>>
>>> In this case, if we want to convert a Date object to POSIX* and specify
>> a (non-UTC) timezone would the best strategy be to first coerce our Date
>> object to character? Alternatively, `lubridate::as_datetime()` does seem to
>> recognise the tz argument and convert a Date object to POSIX* with non-UTC
>> time zone (see second example below). But it would be nice to know if there
>> are subtle differences between these two approaches that we should be aware
>> of.
>>>
>>> ``` r
>>> foo <- as.Date(33874, origin = "1899-12-30")
>>> dput(foo)
>>> #> structure(8305, class = "Date")
>>>
>>> #Convert to POSIXct specifying UTC timezone
>>> bar <- lubridate::as_datetime(foo, tz = "UTC")
>>> dput(as.POSIXlt(bar))
>>> #> structure(list(sec = 0, min = 0L, hour = 0L, mday = 27L, mon = 8L,
>>> #>     year = 92L, wday = 0L, yday = 270L, isdst = 0L), class =
>> c("POSIXlt",
>>> #> "POSIXt"), tzone = "UTC")
>>>
>>> #Convert to POSIXct specifying Europe/Berlin
>>> bar <- lubridate::as_datetime(foo, tz = "Europe/Berlin")
>>> dput(as.POSIXlt(bar))
>>> #> structure(list(sec = 0, min = 0L, hour = 0L, mday = 27L, mon = 8L,
>>> #>     year = 92L, wday = 0L, yday = 270L, isdst = 1L, zone = "CEST",
>>> #>     gmtoff = 7200L), class = c("POSIXlt", "POSIXt"), tzone =
>> c("Europe/Berlin",
>>> #> "CET", "CEST"))
>>> ```
>>>
>>> Thanks again for all your help.
>>> Alex & Liam
>>>
>>>> On 10 Oct 2022, at 6:40 pm, Hadley Wickham <h.wickham at gmail.com> wrote:
>>>>
>>>> On Sun, Oct 9, 2022 at 9:31 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>> wrote:
>>>>>
>>>>> ... which is why tidyverse functions and Python datetime handling irk
>> me so much.
>>>>>
>>>>> Is tidyverse time handling intrinsically broken? They have a standard
>> practice of reading time as UTC and then using force_tz to fix the
>> "mistake". Same as Python.
>>>>
>>>> Can you point to any docs that lead you to this conclusion so we can
>>>> get them fixed? I strongly encourage people to parse date-times in the
>>>> correct time zone; this is why lubridate::ymd_hms() and friends have a
>>>> tz argument.
>>>>
>>>> Hadley
>>>>
>>>> --
>>>> http://hadley.nz
>>>
>>
>>
> 

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Director, School of Computational Science and Engineering
(Acting) Graduate chair, Mathematics & Statistics
 > E-mail is sent at my convenience; I don't expect replies outside of 
working hours.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Oct 10 23:19:36 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 10 Oct 2022 14:19:36 -0700
Subject: [R-pkg-devel] Issue handling datetimes: possible differences
 between computers
In-Reply-To: <CABdHhvFv32jRvm9WHX4dckOjWs1LK=tV=134K-0cOAgzvvDi=A@mail.gmail.com>
References: <CAERMt4eYyTKadiTk6ZVgM5UmVXQ83PbBJQzfBOEW7=KZqsBC+w@mail.gmail.com>
 <24D0D7FC-F6DF-4AB2-B5A3-7E14D631804C@R-project.org>
 <16B5505C-DAE0-4735-AED3-92B86E7A0DD8@dcn.davis.ca.us>
 <CABdHhvFv32jRvm9WHX4dckOjWs1LK=tV=134K-0cOAgzvvDi=A@mail.gmail.com>
Message-ID: <AF4FFF49-E534-4AFD-A7CE-C1FF9E343733@dcn.davis.ca.us>

I have no idea how to get readxl::read_excel to import a timestamp column in a timezone. It is true that Excel has no concept of timezones, but the data one finds there usually came from a text file at some point. Importing as character is a feasible strategy, but trying to convince an intermediate user to go to that much trouble is a headache when the issue is ignored in the help file.

It is evidently possible to specify a locale input to readr::read_csv, but the default behaviour guesses timestamp columns and assumes "UTC", and a file may contain data from different timezones (UTC and local civil are a common combination). Again, character import and manual conversion are needed.

On October 10, 2022 9:40:42 AM PDT, Hadley Wickham <h.wickham at gmail.com> wrote:
>On Sun, Oct 9, 2022 at 9:31 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>>
>> ... which is why tidyverse functions and Python datetime handling irk me so much.
>>
>> Is tidyverse time handling intrinsically broken? They have a standard practice of reading time as UTC and then using force_tz to fix the "mistake". Same as Python.
>
>Can you point to any docs that lead you to this conclusion so we can
>get them fixed? I strongly encourage people to parse date-times in the
>correct time zone; this is why lubridate::ymd_hms() and friends have a
>tz argument.
>
>Hadley
>

-- 
Sent from my phone. Please excuse my brevity.


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Tue Oct 11 08:58:01 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Tue, 11 Oct 2022 08:58:01 +0200
Subject: [R-pkg-devel] Issue handling datetimes: possible differences
 between computers
In-Reply-To: <2e92f0f1-ddfd-1c74-4805-ac65821ccd81@gmail.com>
References: <CAERMt4eYyTKadiTk6ZVgM5UmVXQ83PbBJQzfBOEW7=KZqsBC+w@mail.gmail.com>
 <24D0D7FC-F6DF-4AB2-B5A3-7E14D631804C@R-project.org>
 <16B5505C-DAE0-4735-AED3-92B86E7A0DD8@dcn.davis.ca.us>
 <CABdHhvFv32jRvm9WHX4dckOjWs1LK=tV=134K-0cOAgzvvDi=A@mail.gmail.com>
 <C86BDDF6-44EE-4B9B-9515-F19F954B5337@liamdbailey.com>
 <03EBA665-067E-45F4-A97B-4E94E98D65A8@R-project.org>
 <CAERMt4doKk0OFujPOzi7vNz6NrzHV8c56=5=CKMhfWBtyFbY3Q@mail.gmail.com>
 <2e92f0f1-ddfd-1c74-4805-ac65821ccd81@gmail.com>
Message-ID: <25413.5113.302768.190731@stat.math.ethz.ch>

>>>>> Ben Bolker 
>>>>>     on Mon, 10 Oct 2022 16:59:35 -0400 writes:

    > Right now as.POSIXlt.Date() is just
    > function (x, ...)
    > .Internal(Date2POSIXlt(x))

It has been quite a bit different in R-devel  for a little
while.  NEWS entries  (there are more already, and more coming
on the wide topic)

    * The as.POSIXlt(<POSIXlt>) and as.POSIXct(<POSIXct>) default
      methods now do obey their tz argument, also in this case.

    * as.POSIXlt(<Date>) now does apply a tz (timezone) argument, as
      does as.POSIXct(); partly suggested by Roland Fuss on the R-devel
      mailing list.

and indeed it would have been good had you used (and read) the
R-devel mailing list  which is much more appropriate on the
topic of *changing* base R behavior.




    > How expensive would it be to throw a warning when '...' is provided by 
    > the user/discarded ??

    > Alternately, perhaps the documentation could be amended, although I'm 
    > not quite sure what to suggest. (The sentence Liam refers to, "Dates 
    > without times are treated as being at midnight UTC." is correct but 
    > terse ...)


    > On 2022-10-10 4:50 p.m., Alexandre Courtiol wrote:
    >> Hi Simon,
    >> 
    >> Thanks for the clarification.
    >> 
    >> From a naive developer point of view, we were initially baffled that the
    >> generic as.POSIXlt() does very different things on a character and on a
    >> Date input:
    >> 
    >> as.POSIXlt(as.character(foo), "Europe/Berlin")
    >> [1] "1992-09-27 CEST"
    >> 
    >> as.POSIXlt(foo, "Europe/Berlin")
    >> [1] "1992-09-27 UTC"
    >> 
    >> Based on what you said, it does make sense: it is only when creating the
    >> date/time that we want to include the time zone and that only happens when
    >> we don't already work on a previously created date.
    >> That is your subtle but spot-on distinction between "parsing" and
    >> "changing" the time zone.
    >> 
    >> Yet, we do find it dangerous that as.POSIXlt.Date() accepts a time zone but
    >> does nothing of it, especially when the help file starts with:
    >> 
    >> Usage
    >> as.POSIXlt(x, tz = "", ...)
    >> 
    >> The behaviour is documented, as Liam reported it, but still, we will almost
    >> certainly not be the last one tripping on this (without even adding the
    >> additional issue of as.POSIXct() behaving differently across OS).
    >> 
    >> Thanks again,
    >> 
    >> Alex & Liam
    >> 
    >> 
    >> 
    >> 
    >> On Mon, 10 Oct 2022 at 22:13, Simon Urbanek <simon.urbanek at r-project.org>
    >> wrote:
    >> 
    >>> Liam,
    >>> 
    >>> I think I have failed to convey my main point in the last e-mail - which
    >>> was that you want to parse the date/time in the timezone that you care
    >>> about so in your example that would be
    >>> 
    >>>> foo <- as.Date(33874, origin = "1899-12-30")
    >>>> foo
    >>> [1] "1992-09-27"
    >>>> as.POSIXlt(as.character(foo), "Europe/Berlin")
    >>> [1] "1992-09-27 CEST"
    >>> 
    >>> I was explicitly saying that you do NOT want to simply change the time
    >>> zone on POSIXlt objects as that won't work for reasons I explained - see my
    >>> last e-mail.
    >>> 
    >>> Cheers,
    >>> Simon
    >>> 
    >>> 
    >>>> On 11/10/2022, at 6:31 AM, Liam Bailey <liam.bailey at liamdbailey.com>
    >>> wrote:
    >>>> 
    >>>> Hi all,
    >>>> 
    >>>> Thanks Simon for the detailed response, that helps us understand a lot
    >>> better what?s going on! However, with your response in mind, we still
    >>> encounter some behaviour that we did not expect.
    >>>> 
    >>>> I?ve included another minimum reproducible example below to expand on
    >>> the situation. In this example, `foo` is a Date object that we generate
    >>> from a numeric input. Following your advice, `bar` is then a POSIXlt object
    >>> where we now explicitly define timezone using argument tz. However, even
    >>> though we are explicit about the timezone the POSIXlt that is generated is
    >>> always in UTC. This then leads to the issues outlined by Alexandre above,
    >>> which we now understand are caused by DST.
    >>>> 
    >>>> ``` r
    >>>> #Generate date from numeric
    >>>> #Not possible to specify tz at this point
    >>>> foo <- as.Date(33874, origin = "1899-12-30")
    >>>> dput(foo)
    >>>> #> structure(8305, class = "Date")
    >>>> 
    >>>> #Convert to POSIXlt specifying UTC timezone
    >>>> bar <- as.POSIXlt(foo, tz = "UTC")
    >>>> dput(bar)
    >>>> #> structure(list(sec = 0, min = 0L, hour = 0L, mday = 27L, mon = 8L,
    >>>> #>     year = 92L, wday = 0L, yday = 270L, isdst = 0L), class =
    >>> c("POSIXlt",
    >>>> #> "POSIXt"), tzone = "UTC")
    >>>> 
    >>>> #Convert to POSIXlt specifying Europe/Berlin.
    >>>> #Time zone is still UTC
    >>>> bar <- as.POSIXlt(foo, tz = "Europe/Berlin")
    >>>> dput(bar)
    >>>> #> structure(list(sec = 0, min = 0L, hour = 0L, mday = 27L, mon = 8L,
    >>>> #>     year = 92L, wday = 0L, yday = 270L, isdst = 0L), class =
    >>> c("POSIXlt",
    >>>> #> "POSIXt"), tzone = "UTC")
    >>>> ```
    >>>> 
    >>>> 
    >>>> We noticed that this occurs because the tz argument is not passed to
    >>> `.Internal(Date2POSIXlt())` inside `as.POSIXlt.Date()`.
    >>>> 
    >>>> Reading through the documentation for `as.POSIX*` we can see that this
    >>> behaviour is described:
    >>>> 
    >>>> > ?Dates without times are treated as being at midnight UTC.?
    >>>> 
    >>>> In this case, if we want to convert a Date object to POSIX* and specify
    >>> a (non-UTC) timezone would the best strategy be to first coerce our Date
    >>> object to character? Alternatively, `lubridate::as_datetime()` does seem to
    >>> recognise the tz argument and convert a Date object to POSIX* with non-UTC
    >>> time zone (see second example below). But it would be nice to know if there
    >>> are subtle differences between these two approaches that we should be aware
    >>> of.
    >>>> 
    >>>> ``` r
    >>>> foo <- as.Date(33874, origin = "1899-12-30")
    >>>> dput(foo)
    >>>> #> structure(8305, class = "Date")
    >>>> 
    >>>> #Convert to POSIXct specifying UTC timezone
    >>>> bar <- lubridate::as_datetime(foo, tz = "UTC")
    >>>> dput(as.POSIXlt(bar))
    >>>> #> structure(list(sec = 0, min = 0L, hour = 0L, mday = 27L, mon = 8L,
    >>>> #>     year = 92L, wday = 0L, yday = 270L, isdst = 0L), class =
    >>> c("POSIXlt",
    >>>> #> "POSIXt"), tzone = "UTC")
    >>>> 
    >>>> #Convert to POSIXct specifying Europe/Berlin
    >>>> bar <- lubridate::as_datetime(foo, tz = "Europe/Berlin")
    >>>> dput(as.POSIXlt(bar))
    >>>> #> structure(list(sec = 0, min = 0L, hour = 0L, mday = 27L, mon = 8L,
    >>>> #>     year = 92L, wday = 0L, yday = 270L, isdst = 1L, zone = "CEST",
    >>>> #>     gmtoff = 7200L), class = c("POSIXlt", "POSIXt"), tzone =
    >>> c("Europe/Berlin",
    >>>> #> "CET", "CEST"))
    >>>> ```
    >>>> 
    >>>> Thanks again for all your help.
    >>>> Alex & Liam
    >>>> 
    >>>>> On 10 Oct 2022, at 6:40 pm, Hadley Wickham <h.wickham at gmail.com> wrote:
    >>>>> 
    >>>>> On Sun, Oct 9, 2022 at 9:31 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
    >>> wrote:
    >>>>>> 
>>>>> ... which is why tidyverse functions and Python datetime handling irk
    >>> me so much.
    >>>>>> 
>>>>> Is tidyverse time handling intrinsically broken? They have a standard
    >>> practice of reading time as UTC and then using force_tz to fix the
    >>> "mistake". Same as Python.
    >>>>> 
    >>>>> Can you point to any docs that lead you to this conclusion so we can
    >>>>> get them fixed? I strongly encourage people to parse date-times in the
    >>>>> correct time zone; this is why lubridate::ymd_hms() and friends have a
    >>>>> tz argument.
    >>>>> 
    >>>>> Hadley
    >>>>> 
    >>>>> --
    >>>>> http://hadley.nz
    >>>> 
    >>> 
    >>> 
    >> 

    > -- 
    > Dr. Benjamin Bolker
    > Professor, Mathematics & Statistics and Biology, McMaster University
    > Director, School of Computational Science and Engineering
    > (Acting) Graduate chair, Mathematics & Statistics
    >> E-mail is sent at my convenience; I don't expect replies outside of 
    > working hours.

    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Oct 11 09:38:35 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 11 Oct 2022 10:38:35 +0300
Subject: [R-pkg-devel] Identify Original Column Names of Model Matrix
In-Reply-To: <SY2PR01MB30033EFCF280CCC2EB45B06DCD209@SY2PR01MB3003.ausprd01.prod.outlook.com>
References: <SY2PR01MB30033EFCF280CCC2EB45B06DCD209@SY2PR01MB3003.ausprd01.prod.outlook.com>
Message-ID: <20221011103835.0a003d6d@Tarkus>

On Mon, 10 Oct 2022 08:00:04 +0000
Dario Strbenac <dstr7320 at uni.sydney.edu.au> wrote:

> It requires input data to be in one-hot encoding, which is created by
> Matrix::sparse.model.matrix. For further analysis, such as variable
> importance, is there a way to identify which original feature each
> column of a sparse.model.matrix result was derived from?

?Matrix::sparse.model.matrix seems to recommend
MatrixModel::model.Matrix for this reason. The latter function returns
an object with additional slots `assign` and `contrasts`, which should
make it possible to recover the original columns.

-- 
Best regards,
Ivan


From Qu|r|n_St|er @end|ng |rom gmx@de  Tue Oct 11 09:35:10 2022
From: Qu|r|n_St|er @end|ng |rom gmx@de (Quirin Stier)
Date: Tue, 11 Oct 2022 09:35:10 +0200
Subject: [R-pkg-devel] R package development using GPU based on R package
 OpenCL
Message-ID: <570b824b-c239-aa61-c0e2-5a553ebf91ae@gmx.de>

Dear members,

I have difficulties packing my OpenCL functions together as a complete R
package. I did not find any exemplary R package building upon the R
OpenCL Package. Currently I can only run the OpenCL functions as was
presented by the OpenCL examples of the OpenCL package itself. So,
assuming I have working OpenCL files, how can I create the MakeVars (or
whatever necessity needs to be done), in order to create a fully
functional R package?

Best regards,

Quirin


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Tue Oct 11 18:16:03 2022
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Tue, 11 Oct 2022 16:16:03 +0000
Subject: [R-pkg-devel] 
 R package development using GPU based on R package OpenCL
In-Reply-To: <570b824b-c239-aa61-c0e2-5a553ebf91ae@gmx.de>
References: <570b824b-c239-aa61-c0e2-5a553ebf91ae@gmx.de>
Message-ID: <BY5PR04MB6627ECE1F2AFE9B7C331E49EF9239@BY5PR04MB6627.namprd04.prod.outlook.com>

I?m not particularly experienced with this but wrote a ?proof-of-concept? skeleton of a package at https://github.com/mtmorgan/ocl . The basics are


  *   Import OpenCL in the DESCRIPTION file
  *   Write OpenCL scripts in inst/ (dnorm implemented in OpenCL)
  *   Use the helper function in R/ocl.R to source the code
  *   Provide a user-friendly interface as in R/examples.R (dnorm_ocl)

Martin

From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Quirin Stier <Quirin_Stier at gmx.de>
Date: Tuesday, October 11, 2022 at 10:46 AM
To: r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: [R-pkg-devel] R package development using GPU based on R package OpenCL
Dear members,

I have difficulties packing my OpenCL functions together as a complete R
package. I did not find any exemplary R package building upon the R
OpenCL Package. Currently I can only run the OpenCL functions as was
presented by the OpenCL examples of the OpenCL package itself. So,
assuming I have working OpenCL files, how can I create the MakeVars (or
whatever necessity needs to be done), in order to create a fully
functional R package?

Best regards,

Quirin

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Wed Oct 12 23:36:05 2022
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 13 Oct 2022 10:36:05 +1300
Subject: [R-pkg-devel] Guidance on splitting up an R package?
In-Reply-To: <CALnEB17ExKcv=+EH4NycFFta+jaF0N1FjbfCphttK=cnBdKgow@mail.gmail.com>
References: <CALnEB17ExKcv=+EH4NycFFta+jaF0N1FjbfCphttK=cnBdKgow@mail.gmail.com>
Message-ID: <20221013103605.6244b4ff@rolf-Latitude-E7470>


On Tue, 4 Oct 2022 16:46:03 +0200
Vincent van Hees <vincentvanhees at gmail.com> wrote:

> Dear all,
> 
> I am looking for guidance (blog posts / books / people with
> expertise) on how to split up an R package that has grown a lot in
> complexity and size. To make it worthwhile, the split needs to ease
> the maintenance and ongoing development.

<SNIP>

Here is some advice based on our experience in splitting the
'spatstat' package (over 170,000 lines of code, now split into 10
sub-packages, which took us about one person-year of work).

See https://github.com/spatstat/spatstat.

1. Don't split your package unless you must.

Splitting a package into sub-packages takes considerable effort.
Maintaining a set of sub-packages requires much more effort than
maintaining a single large package.  We estimate, quasi-seriously,
that the amount of effort required is O(n^2) where n is the number
of sub-packages.  :-)

If you split a package, the CRAN servers will have less work, but
almost everyone else --- developers, maintainers, CRAN team, users
--- will have more work.  You won't even reduce the number of emails
from CRAN: the R package checker complains when a package is large,
but it also complains when the package Depends on many sub-packages.

2. Design the split.

Do not start tinkering until you have a plan.  Print out a list
of the functions (or the R files and help files) in your package,
and think about a simple rule for splitting/grouping them.

The rule for splitting the package needs to be simple and easy
to apply for developers and users.  For example in spatstat we
separated 'exploratory' statistical summaries from 'parametric'
statistical models because we can all remember what that means.
(Note that *users* have to ?apply? the splitting rule in order
to know where to find/look for a particular function after the
package has been split.)

A good splitting rule is something to do with the fundamental purpose
of each function.  The amount of trouble you will have after the
split is related to the number of dependencies (between functions)
that cross these boundaries, and the easiest way to minimise this
is to group the functions according to their fundamental purpose.

Give plenty of notice to the maintainers of packages that depend
on your package.

3. Use 'make' and 'filepp' to implement the split.

Leave the original source files where they are.  Maintain the
original source files as the master copies (i.e. bug fixes are
fixed in these original files).

For each sub-package, set up a new folder/directory with a Makefile
that copies selected source files from the original package into
the new directory.  The Makefile can include rules that invoke
'filepp' to filter the source files. Arguments to the 'filepp' call
can specify the names of variables that will then be substituted
into the source code, or used as variables in 'if/then' directives
to switch on/off blocks of code.  This setup makes it much easier
to keep track of the fate of each file, and to change your mind
if needed.

The "make" tool is extremely powerful and useful, and is ubiquitously
applied by software developers.  However its syntax is not perspicuous,
and can be daunting until you become experienced.  If you are not
completely comfortable with "make" you might find the tutorials at

    https://makefiletutorial.com

and

    https://cs.colby.edu/maxwell/courses/tutorials/maketutor

to be helpful.

For information on filepp see https://www-users.york.ac.uk/~dm26/filepp

4. Do the split offline.

Develop the sub-packages on your own machine until they all pass
the package checker.

5.  Consider the sequence of steps to get the packages on CRAN.

CRAN has no mechanism for submitting a set of packages at the
same time.  Each submission is checked individually, on several
different servers, using several versions of R, using the packages
that are installed on that server.  Hence the submission of your new
sub-packages must be carried out according to a carefully considered
incremental process.

Problems that can occur include:

a. Incompatibility between your new submission and the packages
currently on the particular  server.

b. Cycles (loops) in the dependence graph.  The dependence between
functions in the packages may include loops where A depends on B
which depends on C which depends on A, etc.

c. Hard crashes.  Crashes can occur if you use compiled functions
(e.g. C language) or if your package is byte-compiled.  In either
case, changes to the interface (argument sequence) of compiled or
byte-compiled code in one sub-package can result in an error or
hard crash when another sub-package tries to call a function using
the wrong interface.

There is no sure way to prevent these happening.  The best defence
is to use the version number dependency rules in the DESCRIPTION
file (to prevent the use of incompatible packages), and to allow
about a week for each submitted package to propagate through the
CRAN testing network (to ensure that the latest versions are used).

Despite this, you can expect to have correspondence with CRAN about
such problems.

Allow plenty of time between submitting successive sub-packages.
Give plenty of notice to users and maintainers of dependent packages.

Hope this helps.

cheers,

Rolf Turner (on behalf of Adrian Baddeley and Ege Rubak)

P.S.  I hope that this posting is not too late to be useful.  The
lateness is entirely the fault of Rolf Turner.

R.T.


-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Thu Oct 13 03:16:20 2022
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Wed, 12 Oct 2022 20:16:20 -0500
Subject: [R-pkg-devel] =?utf-8?q?Problems_with_news_in_=E2=80=98NEWS?=
 =?utf-8?b?4oCZ?=
In-Reply-To: <20221013005510.eff91cf747f7bc84@rhub.io>
References: <20221013005510.eff91cf747f7bc84@rhub.io>
Message-ID: <f1198681-8078-8b40-3aa2-63bec1066b73@effectivedefense.org>

Hello, All:


	  devtools::check_rhub("Ecdat") complained:


Problems with news in ?NEWS?:
    Cannot process chunk/lines:
      2022-10-12:
    Cannot process chunk/lines:
      Ecdat 0.4-2 updated "terrorism" to 2020.
...


	  For more see below.  This is with the current version of


https://github.com/sbgraves237/Ecdat


	  I copied NEWS to NEWS.md and tried to format it as described in:


https://r-pkgs.org/other-markdown.html#news


	  Sadly, I still get the same error.  It seems to be ignoring my 
NEWS.md file and continuing to tell me I haven't fixed NEWS.


	  What do you suggest?
	  Thanks,
	  Spencer Graves


-------- Forwarded Message --------
Subject: 	Ecdat 0.4-2: NOTE
Date: 	Thu, 13 Oct 2022 00:55:10 +0000
From: 	R-hub builder <support at rhub.io>
To: 	spencer.graves at effectivedefense.org



Ecdat 0.4-2: NOTE
	
Ecdat 0.4-2: NOTE
*Build ID:* 	|Ecdat_0.4-2.tar.gz-aec6a2cb4b8a43cfbab0405f54e67c64|
*Platform:* 	Windows Server 2022, R-devel, 64 bit
*Submitted:* 	5 minutes 25 seconds ago
*Build time:* 	5 minutes 16.2 seconds


       NOTES:

* checking package subdirectories ... NOTE
Problems with news in 'NEWS':
    Cannot process chunk/lines:
      2022-10-12:
    Cannot process chunk/lines:
      Ecdat 0.4-2 updated "terrorism" to 2020.
    Cannot process chunk/lines:
      2022-07-01:
    Cannot process chunk/lines:
      Ecdat 0.4-1 replaced non-breaking spaces that used Latin-1 
encoding with " " in 4 "demoFiles/NIPA6.16*.csv" files, because the said 
non-breaking spaces were not valid in UTF-8 and were rejected by a 
development version of R.
      2022-06-14:
    Cannot process chunk/lines:
      Ecdat 0.4-0 adds new datasets USnewspapers and USPS (US Postal 
Service) while adding federal government budget data to USGDPpresidents.
    Cannot process chunk/lines:
      2020-11-01:
    Cannot process chunk/lines:
      Ecdat 0.3-9 deletes ~demoFiles/*_data.xls, because they were used 
to test Ecfun::financialDataFiles and Ecfun::readFinancialDataFiles, and 
those two functions were removed, because they used gdata, which was not 
being maintained, and the work required to maintain them exceeded the 
current need of the maintainer.
    Cannot process chunk/lines:
      2020-02-08:  Ecdat 0.3-6 adds variables popM, popYr, GDP_B, and 
GDPyr to data set "nuclearWeaponStates".
    Cannot process chunk/lines:
      2019-12-05:  Ecdat 0.3-5 corrects the description of Crime$density 
to read, "hundreds of people per square mile" from "people per square 
mile".  Thanks to Yungfong "Frank" Tang for identifying this error and 
confirming the needed correction.
    Cannot process chunk/lines:
      2019-11-05:  Ecdat 0.3-4 adds variable 'firstTestYr' to 
'nuclearWeaponStates'.  It also corrects an error in the 'Mroz' data 
set, in that "work" had the names of the levels incorrectly swapped.
    Cannot process chunk/lines:
      Ecdat 0.3-3 adds data set "nuclearWeaponStates", which might be 
used to model the probability distribution of the time to the next new 
nuclear weapon state.
    Cannot process chunk/lines:

* checking for detritus in the temp directory ... NOTE
Found the following files/directories:
    'lastMiKTeXException'

See the full build log: HTML 
<https://builder.r-hub.io/status/Ecdat_0.4-2.tar.gz-aec6a2cb4b8a43cfbab0405f54e67c64>, 
text 
<https://builder.r-hub.io/status/original/Ecdat_0.4-2.tar.gz-aec6a2cb4b8a43cfbab0405f54e67c64>, 
artifacts 
<https://artifacts.r-hub.io/Ecdat_0.4-2.tar.gz-aec6a2cb4b8a43cfbab0405f54e67c64>. 

Have questions, suggestions or want to report a bug? Please file an 
issue ticket at GitHub <https://github.com/r-hub/rhub/issues>. Thank You 
for using the R-hub builder.

(c) 2016 The R Consortium


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Oct 13 11:34:19 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 13 Oct 2022 12:34:19 +0300
Subject: [R-pkg-devel] =?utf-8?q?Problems_with_news_in_=E2=80=98NEWS?=
 =?utf-8?b?4oCZ?=
In-Reply-To: <f1198681-8078-8b40-3aa2-63bec1066b73@effectivedefense.org>
References: <20221013005510.eff91cf747f7bc84@rhub.io>
 <f1198681-8078-8b40-3aa2-63bec1066b73@effectivedefense.org>
Message-ID: <20221013123419.4affc14e@arachnoid>

? Wed, 12 Oct 2022 20:16:20 -0500
Spencer Graves <spencer.graves at effectivedefense.org> ?????:

> I copied NEWS to NEWS.md and tried to format it as described in:
> 
> 
> https://r-pkgs.org/other-markdown.html#news
> 
> 
> 	  Sadly, I still get the same error.  It seems to be ignoring
> my NEWS.md file and continuing to tell me I haven't fixed NEWS.

Does it help to remove the NEWS after you've created NEWS.md in the
root directory of your package? In theory, NEWS.md takes precedence
over everything except inst/NEWS.Rd, but maybe that's not the case when
checking the package.

For the record, both the plain text format R expects in the NEWS file
and the Markdown format for NEWS.md are described in help(news).

-- 
Best regards,
Ivan


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Thu Oct 13 17:29:28 2022
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Thu, 13 Oct 2022 10:29:28 -0500
Subject: [R-pkg-devel] =?utf-8?q?Problems_with_news_in_=E2=80=98NEWS?=
 =?utf-8?b?4oCZ?=
In-Reply-To: <20221013123419.4affc14e@arachnoid>
References: <20221013005510.eff91cf747f7bc84@rhub.io>
 <f1198681-8078-8b40-3aa2-63bec1066b73@effectivedefense.org>
 <20221013123419.4affc14e@arachnoid>
Message-ID: <c5102970-e410-8e61-c1a5-7981b9a83393@effectivedefense.org>



On 10/13/22 4:34 AM, Ivan Krylov wrote:
> ? Wed, 12 Oct 2022 20:16:20 -0500
> Spencer Graves <spencer.graves at effectivedefense.org> ?????:
> 
>> I copied NEWS to NEWS.md and tried to format it as described in:
>>
>>
>> https://r-pkgs.org/other-markdown.html#news
>>
>>
>> 	  Sadly, I still get the same error.  It seems to be ignoring
>> my NEWS.md file and continuing to tell me I haven't fixed NEWS.
> 
> Does it help to remove the NEWS after you've created NEWS.md in the
> root directory of your package? In theory, NEWS.md takes precedence
> over everything except inst/NEWS.Rd, but maybe that's not the case when
> checking the package.


Thanks.  I did that, and it worked.

> 
> For the record, both the plain text format R expects in the NEWS file
> and the Markdown format for NEWS.md are described in help(news).
> 

Thanks, I missed that reference but managed to find something that worked.


	  Spencer


From roy@mende|@@ohn @end|ng |rom no@@@gov  Fri Oct 14 17:51:28 2022
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Fri, 14 Oct 2022 08:51:28 -0700
Subject: [R-pkg-devel] failing CRAN nightly builds
Message-ID: <03D1BB9F-72A9-48BD-9CCB-E94F370027B5@noaa.gov>

Hi All:

About a week ago I received a notice that my package 'rerddapXtracto' was failing nightly builds and i needed to fix it or face being archived.  Fair enough.  The next day I submitted a fix.  My package has one example that always comes in just above the time that is checked for.  That this is so is in the CRAN notes.

After I got the note that the new package failed the automated test for this reason,  I responded with this fact and asked it to be reconsidered, as it has been in the past.  Since then,  I have sent two more reminders with no response.  I realize CRAN folks are pretty busy,  but I really don't want the package removed from CRAN,  so am mainly hoping this email will give a little nudge,  or if people have other suggestions.

Thanks,

-Roy



**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From h@w|ckh@m @end|ng |rom gm@||@com  Sun Oct 16 18:34:34 2022
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Sun, 16 Oct 2022 11:34:34 -0500
Subject: [R-pkg-devel] Best way forward on a CRAN archived package
In-Reply-To: <CAA-ibaxp8a5uttw3hci2ZUXit-CjJZf4uaYaqR4zRuD--tAMrw@mail.gmail.com>
References: <CAA-ibaxp8a5uttw3hci2ZUXit-CjJZf4uaYaqR4zRuD--tAMrw@mail.gmail.com>
Message-ID: <CABdHhvGBK_R3C-Qdc8fU34dm2LhyD3sLKTp2qzKZPSdH-JJsaA@mail.gmail.com>

I?d suggest resubmitting, after ensuring that R CMD  check runs without any
notes, warnings, or errors.

Hadley

On Monday, October 10, 2022, Diego Hernang?mez Herrero <
diego.hernangomezherrero at gmail.com> wrote:

> Hi:
>
> I have some doubts on how to proceed in this case. I am the developer of
> tidyterra, and I received an email from CRAN on 23Sep2022 about an issue on
> the package, setting a deadline on 07Oct2022 to correct it.
>
> I sent a patch that was accepted on CRAN on 29Sep2022, that fixed the issue
> (or at least I am pretty sure I solved it). I received no further feedback
> by CRAN, so I assumed the package was safe. However it was finally archived
> on 07Oct2022.
>
> I have already sent an email to CRAN in order to check if they think the
> issues still persist (or maybe they missed the patch submission?), but I am
> in a rush since there are other packages that depend on tidyterra and they
> may be in risk of being archived on CRAN as well.
>
> So my question is: What is the best way forward at this point? Should I
> wait to get some feedback from CRAN or is it best to resubmit the package
> (I already have a new patch prepared)? I acknowledge that  "The time of the
> volunteers is CRAN?s most precious resource" so my goal is to reduce their
> burden as much as possible.
>
> Kind regards
>
> --
>
>
>
> Have a nice day!
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
http://hadley.nz

	[[alternative HTML version deleted]]


From d|ego@hern@ngomezherrero @end|ng |rom gm@||@com  Sun Oct 16 18:44:39 2022
From: d|ego@hern@ngomezherrero @end|ng |rom gm@||@com (=?UTF-8?Q?Diego_Hernang=C3=B3mez_Herrero?=)
Date: Sun, 16 Oct 2022 18:44:39 +0200
Subject: [R-pkg-devel] Best way forward on a CRAN archived package
In-Reply-To: <CABdHhvGBK_R3C-Qdc8fU34dm2LhyD3sLKTp2qzKZPSdH-JJsaA@mail.gmail.com>
References: <CAA-ibaxp8a5uttw3hci2ZUXit-CjJZf4uaYaqR4zRuD--tAMrw@mail.gmail.com>
 <CABdHhvGBK_R3C-Qdc8fU34dm2LhyD3sLKTp2qzKZPSdH-JJsaA@mail.gmail.com>
Message-ID: <CAA-ibay_293h5W26CEhZe8VT8k30=-Jm++XYJ=8X5YjBQVSRxA@mail.gmail.com>

Thanks all for your answers. I resubmitted last week and the package is
back on CRAN :)

El El dom, 16 oct 2022 a las 18:34, Hadley Wickham <h.wickham at gmail.com>
escribi?:

> I?d suggest resubmitting, after ensuring that R CMD  check runs without
> any notes, warnings, or errors.
>
> Hadley
>
>
> On Monday, October 10, 2022, Diego Hernang?mez Herrero <
> diego.hernangomezherrero at gmail.com> wrote:
>
>> Hi:
>>
>> I have some doubts on how to proceed in this case. I am the developer of
>> tidyterra, and I received an email from CRAN on 23Sep2022 about an issue
>> on
>> the package, setting a deadline on 07Oct2022 to correct it.
>>
>> I sent a patch that was accepted on CRAN on 29Sep2022, that fixed the
>> issue
>> (or at least I am pretty sure I solved it). I received no further feedback
>> by CRAN, so I assumed the package was safe. However it was finally
>> archived
>> on 07Oct2022.
>>
>> I have already sent an email to CRAN in order to check if they think the
>> issues still persist (or maybe they missed the patch submission?), but I
>> am
>> in a rush since there are other packages that depend on tidyterra and they
>> may be in risk of being archived on CRAN as well.
>>
>> So my question is: What is the best way forward at this point? Should I
>> wait to get some feedback from CRAN or is it best to resubmit the package
>> (I already have a new patch prepared)? I acknowledge that  "The time of
>> the
>> volunteers is CRAN?s most precious resource" so my goal is to reduce their
>> burden as much as possible.
>>
>> Kind regards
>>
>> --
>>
>>
>>
>> Have a nice day!
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>
> --
> http://hadley.nz
>
-- 



Have a nice day!

	[[alternative HTML version deleted]]


From gor@n@bro@trom @end|ng |rom umu@@e  Mon Oct 17 11:07:25 2022
From: gor@n@bro@trom @end|ng |rom umu@@e (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Mon, 17 Oct 2022 11:07:25 +0200
Subject: [R-pkg-devel] Invalid UTF-8
Message-ID: <5096fab3-e7db-ad84-eb1a-37db270944ce@umu.se>

Hello,

I suddenly get Warnings from  CRAN (clang):

warning: invalid UTF-8 in comment [-Winvalid-utf8]
(It's my name)

So I wonder: How do I make valid UTF-8 in comment?
(I already have "Encoding: UTF-8" in the DESCRIPTION file)

Thanks, G?ran


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Oct 17 11:18:25 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 17 Oct 2022 12:18:25 +0300
Subject: [R-pkg-devel] Invalid UTF-8
In-Reply-To: <5096fab3-e7db-ad84-eb1a-37db270944ce@umu.se>
References: <5096fab3-e7db-ad84-eb1a-37db270944ce@umu.se>
Message-ID: <20221017121825.16af0ff3@arachnoid>

? Mon, 17 Oct 2022 11:07:25 +0200
G?ran Brostr?m <goran.brostrom at umu.se> ?????:

> warning: invalid UTF-8 in comment [-Winvalid-utf8]
> (It's my name)
> 
> So I wonder: How do I make valid UTF-8 in comment?

The file GB_zeroin.c is saved in Latin-1 encoding. The warning should
go away once you convert it to UTF-8.

-- 
Best regards,
Ivan


From gor@n@bro@trom @end|ng |rom umu@@e  Mon Oct 17 13:20:25 2022
From: gor@n@bro@trom @end|ng |rom umu@@e (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Mon, 17 Oct 2022 13:20:25 +0200
Subject: [R-pkg-devel] Invalid UTF-8
In-Reply-To: <20221017121825.16af0ff3@arachnoid>
References: <5096fab3-e7db-ad84-eb1a-37db270944ce@umu.se>
 <20221017121825.16af0ff3@arachnoid>
Message-ID: <0a0d81f0-43e3-240a-5be6-7fd661895346@umu.se>

Thanks Ivan,

I found two simple ways to convert this old file to UTF-8:

(i) In emacs, C-x <RET> f <RET> (default is utf-8)

(ii) In RStudio, set Tools-Global Options-Code-Saving-
Default text encoding  to UTF-8

No problem with new files.

G;ran (US keyboard)

Den 2022-10-17 kl. 11:18, skrev Ivan Krylov:
> ? Mon, 17 Oct 2022 11:07:25 +0200
> G?ran Brostr?m <goran.brostrom at umu.se> ?????:
> 
>> warning: invalid UTF-8 in comment [-Winvalid-utf8]
>> (It's my name)
>>
>> So I wonder: How do I make valid UTF-8 in comment?
> 
> The file GB_zeroin.c is saved in Latin-1 encoding. The warning should
> go away once you convert it to UTF-8.
>


From hj@h@jee@h @end|ng |rom utm@@c@mu  Tue Oct 18 14:11:46 2022
From: hj@h@jee@h @end|ng |rom utm@@c@mu (Jahajeeah, Havisha)
Date: Tue, 18 Oct 2022 16:11:46 +0400
Subject: [R-pkg-devel] Help - Shiny app on CRAN
In-Reply-To: <CAKU6PFVuGhq8ZUGbD=B1p3gLr4bA2LJ-kPM5dcTp=Ggfxn53CA@mail.gmail.com>
References: <CAKU6PFVuGhq8ZUGbD=B1p3gLr4bA2LJ-kPM5dcTp=Ggfxn53CA@mail.gmail.com>
Message-ID: <CAKU6PFXqRRJN9Gq339u+-=VdWz9KBrUsf7K88BCxjkdLp3vO5A@mail.gmail.com>

Hello,

Grateful if you could please help with the following comments:

Please add small executable examples in your Rd-files to illustrate the
use of the exported function but also enable automatic testing.

The greymodels package loads data from spreadsheets and each model accepts
a set of data and outputs the fitted and
predicted values. For instance, to load data and model it using the EPGM
(1; 1) model, we follow
Univariate Models > Background Values > EPGM (1; 1) model > Data Input

How do I incorporate that into executable examples?

Thanks and regards,
Havisha

On Mon, Sep 26, 2022 at 7:14 PM Jahajeeah, Havisha <hjahajeeah at utm.ac.mu>
wrote:

> Dear team,
>
> I have submitted the package GreymodelsPackage_1.0.tar.gz to CRAN and it's
> a shiny app.
>
> However, I received  the following
>
> * using log directory 'd:/RCompile/CRANincoming/R-devel/GreymodelsPackage.Rcheck'
> * using R Under development (unstable) (2022-09-25 r82916 ucrt)
> * using platform: x86_64-w64-mingw32 (64-bit)
> * using session charset: UTF-8
> * checking for file 'GreymodelsPackage/DESCRIPTION' ... OK
> * checking extension type ... ERROR
> Extensions with Type 'Shiny application' cannot be checked.
> * DONE
> Status: 1 ERROR
>
> I am not sure  how to fix the problems and I would appreciate your help on how to resolve this issue.
>
> Thanks and regards,
>
> Havisha Jahajeeah
>
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Oct 18 14:28:29 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 18 Oct 2022 14:28:29 +0200
Subject: [R-pkg-devel] Help - Shiny app on CRAN
In-Reply-To: <CAKU6PFXqRRJN9Gq339u+-=VdWz9KBrUsf7K88BCxjkdLp3vO5A@mail.gmail.com>
References: <CAKU6PFVuGhq8ZUGbD=B1p3gLr4bA2LJ-kPM5dcTp=Ggfxn53CA@mail.gmail.com>
 <CAKU6PFXqRRJN9Gq339u+-=VdWz9KBrUsf7K88BCxjkdLp3vO5A@mail.gmail.com>
Message-ID: <0092154c-395f-b172-4624-309b9a5b11f8@statistik.tu-dortmund.de>

See my response to the list.

Best,
Uwe Ligges


On 18.10.2022 14:11, Jahajeeah, Havisha wrote:
> Hello,
> 
> Grateful if you could please help with the following comments:
> 
> Please add small executable examples in your Rd-files to illustrate the
> use of the exported function but also enable automatic testing.
> 
> The greymodels package loads data from spreadsheets and each model accepts
> a set of data and outputs the fitted and
> predicted values. For instance, to load data and model it using the EPGM
> (1; 1) model, we follow
> Univariate Models > Background Values > EPGM (1; 1) model > Data Input
> 
> How do I incorporate that into executable examples?
> 
> Thanks and regards,
> Havisha
> 
> On Mon, Sep 26, 2022 at 7:14 PM Jahajeeah, Havisha <hjahajeeah at utm.ac.mu>
> wrote:
> 
>> Dear team,
>>
>> I have submitted the package GreymodelsPackage_1.0.tar.gz to CRAN and it's
>> a shiny app.
>>
>> However, I received  the following
>>
>> * using log directory 'd:/RCompile/CRANincoming/R-devel/GreymodelsPackage.Rcheck'
>> * using R Under development (unstable) (2022-09-25 r82916 ucrt)
>> * using platform: x86_64-w64-mingw32 (64-bit)
>> * using session charset: UTF-8
>> * checking for file 'GreymodelsPackage/DESCRIPTION' ... OK
>> * checking extension type ... ERROR
>> Extensions with Type 'Shiny application' cannot be checked.
>> * DONE
>> Status: 1 ERROR
>>
>> I am not sure  how to fix the problems and I would appreciate your help on how to resolve this issue.
>>
>> Thanks and regards,
>>
>> Havisha Jahajeeah
>>
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Tue Oct 18 16:37:41 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 18 Oct 2022 09:37:41 -0500
Subject: [R-pkg-devel] Invalid UTF-8
In-Reply-To: <0a0d81f0-43e3-240a-5be6-7fd661895346@umu.se>
References: <5096fab3-e7db-ad84-eb1a-37db270944ce@umu.se>
 <20221017121825.16af0ff3@arachnoid>
 <0a0d81f0-43e3-240a-5be6-7fd661895346@umu.se>
Message-ID: <25422.47669.756325.967808@rob.eddelbuettel.com>


On 17 October 2022 at 13:20, G?ran Brostr?m wrote:
| Thanks Ivan,
| 
| I found two simple ways to convert this old file to UTF-8:
| 
| (i) In emacs, C-x <RET> f <RET> (default is utf-8)

That's a good ti[. I had actually hand-edited two lines down to 'seven bits'
instead of this.  Umlaute, accents and special characters for the win! Thanks
Ivan and G?ran.

Also, reproducing this warning required both clang(++)-15 and an explicit
setting of -Winvalid-utf8.

| (ii) In RStudio, set Tools-Global Options-Code-Saving-
| Default text encoding  to UTF-8
| 
| No problem with new files.
| 
| G;ran (US keyboard)

:)

A fortunes candidate?

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From c@chw@rz@t@t@|uc@ @end|ng |rom gm@||@com  Tue Oct 18 20:51:46 2022
From: c@chw@rz@t@t@|uc@ @end|ng |rom gm@||@com (Carl Schwarz)
Date: Tue, 18 Oct 2022 11:51:46 -0700
Subject: [R-pkg-devel] Error when install binary from CRAN but not if
 install from source - Macintoh, lme4, Matrix, buildmer
Message-ID: <CADtpigZfFG8oNO0NF2g6tku2whAFL2ycF_2JbWSL=AGkRf2F5w@mail.gmail.com>

I've run into a problem where if you install the lme4, Matrix, and buildmer
packages using the binaries from CRAN on a Mac, I get an error message
about a missing method, but if I install the same packages from SOURCE, the
code runs fine.

I would have thought that installing from source or using the binary
should look the same.

Any suggestions on how to proceed to resolve this issue?

The maintainer of buildmer is also puzzled.
You can follow the issue in more detail at:
    https://github.com/cvoeten/buildmer/issues/20

This is way above my paygrade...

Carl Schwarz

------------------------------------------------------

Tried this on an intel-Mac and arm-Mac with the same result.
Works fine on Windows machines under both scenarios.

Here is a test example

library(buildmer)
library(lme4)

nrow <- 100

test <- data.frame(x01=runif(nrow),
                   y=runif(nrow)<.1, block=as.factor(floor((1:nrow)/50)))
head(test)


fit.model <- lme4::glmer(y~x01 + (1|block), data=test,
                   family=binomial(link="logit"))
fit.model # this works

class(fit.model)

summary(fit.model)
# gives the following error message
Error in diag(from, names = FALSE) : object 'dgeMatrix_getDiag' not found

A pdf document showing output is attached (shows the sessionInfo etc).

When you install the buildmer and Matrix packages from SOURCE, it runs fine.

I've tried all combinations of installing binary/source and only if both
packages (Matrix and buidmer) are installed from source, does the code run.

Same issue on an intel-Mac.
Same issue when running under the R directly rather than Rstudio on a Mac.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: lme4-problem.pdf
Type: application/pdf
Size: 127190 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20221018/bfdca812/attachment.pdf>

From hj@h@jee@h @end|ng |rom utm@@c@mu  Tue Oct 18 20:58:05 2022
From: hj@h@jee@h @end|ng |rom utm@@c@mu (Jahajeeah, Havisha)
Date: Tue, 18 Oct 2022 22:58:05 +0400
Subject: [R-pkg-devel] Help - Shiny app on CRAN
In-Reply-To: <0092154c-395f-b172-4624-309b9a5b11f8@statistik.tu-dortmund.de>
References: <CAKU6PFVuGhq8ZUGbD=B1p3gLr4bA2LJ-kPM5dcTp=Ggfxn53CA@mail.gmail.com>
 <CAKU6PFXqRRJN9Gq339u+-=VdWz9KBrUsf7K88BCxjkdLp3vO5A@mail.gmail.com>
 <0092154c-395f-b172-4624-309b9a5b11f8@statistik.tu-dortmund.de>
Message-ID: <CAKU6PFUf17LtF52V9ztnq-uhh5_Bx9WfNKfCHap6CLtPtnrm0Q@mail.gmail.com>

Thank you.

On Tue, Oct 18, 2022 at 4:28 PM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

> See my response to the list.
>
> Best,
> Uwe Ligges
>
>
> On 18.10.2022 14:11, Jahajeeah, Havisha wrote:
> > Hello,
> >
> > Grateful if you could please help with the following comments:
> >
> > Please add small executable examples in your Rd-files to illustrate the
> > use of the exported function but also enable automatic testing.
> >
> > The greymodels package loads data from spreadsheets and each model
> accepts
> > a set of data and outputs the fitted and
> > predicted values. For instance, to load data and model it using the EPGM
> > (1; 1) model, we follow
> > Univariate Models > Background Values > EPGM (1; 1) model > Data Input
> >
> > How do I incorporate that into executable examples?
> >
> > Thanks and regards,
> > Havisha
> >
> > On Mon, Sep 26, 2022 at 7:14 PM Jahajeeah, Havisha <hjahajeeah at utm.ac.mu
> >
> > wrote:
> >
> >> Dear team,
> >>
> >> I have submitted the package GreymodelsPackage_1.0.tar.gz to CRAN and
> it's
> >> a shiny app.
> >>
> >> However, I received  the following
> >>
> >> * using log directory
> 'd:/RCompile/CRANincoming/R-devel/GreymodelsPackage.Rcheck'
> >> * using R Under development (unstable) (2022-09-25 r82916 ucrt)
> >> * using platform: x86_64-w64-mingw32 (64-bit)
> >> * using session charset: UTF-8
> >> * checking for file 'GreymodelsPackage/DESCRIPTION' ... OK
> >> * checking extension type ... ERROR
> >> Extensions with Type 'Shiny application' cannot be checked.
> >> * DONE
> >> Status: 1 ERROR
> >>
> >> I am not sure  how to fix the problems and I would appreciate your help
> on how to resolve this issue.
> >>
> >> Thanks and regards,
> >>
> >> Havisha Jahajeeah
> >>
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Oct 18 21:17:33 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 18 Oct 2022 15:17:33 -0400
Subject: [R-pkg-devel] Error when install binary from CRAN but not if
 install from source - Macintoh, lme4, Matrix, buildmer
In-Reply-To: <CADtpigZfFG8oNO0NF2g6tku2whAFL2ycF_2JbWSL=AGkRf2F5w@mail.gmail.com>
References: <CADtpigZfFG8oNO0NF2g6tku2whAFL2ycF_2JbWSL=AGkRf2F5w@mail.gmail.com>
Message-ID: <485893d7-d898-0f04-957d-a81d5f6e5d03@gmail.com>

I see the same thing.  This sounds like a problem in the handling of 
methods that has been discussed somewhat recently:

   https://stat.ethz.ch/pipermail/r-devel/2022-September/081971.html

The problem is that when the binary is built, some code from other 
packages is kept as part of it.  When that other package is updated, you 
need a new source install of your own package (or a rebuild at CRAN to 
replace the binary) to cache the new code.

This can also be done explicitly by package startup code; I think this 
thread

   https://stat.ethz.ch/pipermail/r-package-devel/2022q3/008481.html

turned out to be a case where rstan was caching something, and an update 
to ggplot2 didn't work with the cached data.  Given the error message, 
your issue sounds more like the first one.

I don't recall if there was a resolution.  Maybe you can ask the CRAN 
maintainers to rebuild buildmer.

Duncan Murdoch





On 18/10/2022 2:51 p.m., Carl Schwarz wrote:
> I've run into a problem where if you install the lme4, Matrix, and buildmer
> packages using the binaries from CRAN on a Mac, I get an error message
> about a missing method, but if I install the same packages from SOURCE, the
> code runs fine.
> 
> I would have thought that installing from source or using the binary
> should look the same.
> 
> Any suggestions on how to proceed to resolve this issue?
> 
> The maintainer of buildmer is also puzzled.
> You can follow the issue in more detail at:
>      https://github.com/cvoeten/buildmer/issues/20
> 
> This is way above my paygrade...
> 
> Carl Schwarz
> 
> ------------------------------------------------------
> 
> Tried this on an intel-Mac and arm-Mac with the same result.
> Works fine on Windows machines under both scenarios.
> 
> Here is a test example
> 
> library(buildmer)
> library(lme4)
> 
> nrow <- 100
> 
> test <- data.frame(x01=runif(nrow),
>                     y=runif(nrow)<.1, block=as.factor(floor((1:nrow)/50)))
> head(test)
> 
> 
> fit.model <- lme4::glmer(y~x01 + (1|block), data=test,
>                     family=binomial(link="logit"))
> fit.model # this works
> 
> class(fit.model)
> 
> summary(fit.model)
> # gives the following error message
> Error in diag(from, names = FALSE) : object 'dgeMatrix_getDiag' not found
> 
> A pdf document showing output is attached (shows the sessionInfo etc).
> 
> When you install the buildmer and Matrix packages from SOURCE, it runs fine.
> 
> I've tried all combinations of installing binary/source and only if both
> packages (Matrix and buidmer) are installed from source, does the code run.
> 
> Same issue on an intel-Mac.
> Same issue when running under the R directly rather than Rstudio on a Mac.
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From pd@|gd @end|ng |rom gm@||@com  Tue Oct 18 21:53:42 2022
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Tue, 18 Oct 2022 21:53:42 +0200
Subject: [R-pkg-devel] Invalid UTF-8
In-Reply-To: <25422.47669.756325.967808@rob.eddelbuettel.com>
References: <5096fab3-e7db-ad84-eb1a-37db270944ce@umu.se>
 <20221017121825.16af0ff3@arachnoid>
 <0a0d81f0-43e3-240a-5be6-7fd661895346@umu.se>
 <25422.47669.756325.967808@rob.eddelbuettel.com>
Message-ID: <D9CE8114-B2A9-43C4-A8D0-E1175CE8B33A@gmail.com>



> On 18 Oct 2022, at 16:37 , Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> 
> On 17 October 2022 at 13:20, G?ran Brostr?m wrote:
> 
> | G;ran (US keyboard)
> 
> :)
> 
> A fortunes candidate?
> 

Incidentally, he's G?ran on a DK keyboard but G?ran on an NO one. The three Scandinavian languages have the same three extra letters (???), but Swedish writes the former two with diaeresis (like German), reverses their order in the alphabet (???), and switches ? and ? on the keyboard (compared to Danish, that is). Norwegian writes and sorts like Danish, but has the same key reversion as Swedish. "Brotherly love"...

-pd

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From gor@n@bro@trom @end|ng |rom umu@@e  Tue Oct 18 22:34:45 2022
From: gor@n@bro@trom @end|ng |rom umu@@e (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Tue, 18 Oct 2022 22:34:45 +0200
Subject: [R-pkg-devel] Invalid UTF-8
In-Reply-To: <D9CE8114-B2A9-43C4-A8D0-E1175CE8B33A@gmail.com>
References: <5096fab3-e7db-ad84-eb1a-37db270944ce@umu.se>
 <20221017121825.16af0ff3@arachnoid>
 <0a0d81f0-43e3-240a-5be6-7fd661895346@umu.se>
 <25422.47669.756325.967808@rob.eddelbuettel.com>
 <D9CE8114-B2A9-43C4-A8D0-E1175CE8B33A@gmail.com>
Message-ID: <55f0cbda-d589-466a-f219-8e9dd127f247@umu.se>



On 2022-10-18 21:53, peter dalgaard wrote:
> 
> 
>> On 18 Oct 2022, at 16:37 , Dirk Eddelbuettel <edd at debian.org>
>> wrote:
>> 
>> 
>> On 17 October 2022 at 13:20, G?ran Brostr?m wrote:
>> 
>> | G;ran (US keyboard)
>> 
>> :)
>> 
>> A fortunes candidate?
>> 
> 
> Incidentally, he's G?ran on a DK keyboard but G?ran on an NO one. The
> three Scandinavian languages have the same three extra letters (???),
> but Swedish writes the former two with diaeresis (like German),
> reverses their order in the alphabet (???), 

Actually, the order is ??? (Swedish). Didn't know about the different
Scandinavian alphabetical orderings, thanks for the info!

g,

> and switches ? and ? on
> the keyboard (compared to Danish, that is). Norwegian writes and
> sorts like Danish, but has the same key reversion as Swedish.
> "Brotherly love"...
> 
> -pd
>


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Wed Oct 19 09:39:15 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Wed, 19 Oct 2022 09:39:15 +0200
Subject: [R-pkg-devel] Error when install binary from CRAN but not if
 install from source - Macintoh, lme4, Matrix, buildmer
In-Reply-To: <485893d7-d898-0f04-957d-a81d5f6e5d03@gmail.com>
References: <CADtpigZfFG8oNO0NF2g6tku2whAFL2ycF_2JbWSL=AGkRf2F5w@mail.gmail.com>
 <485893d7-d898-0f04-957d-a81d5f6e5d03@gmail.com>
Message-ID: <25423.43427.527855.288051@stat.math.ethz.ch>

>>>>> Duncan Murdoch 
>>>>>     on Tue, 18 Oct 2022 15:17:33 -0400 writes:

    > I see the same thing.  This sounds like a problem in the handling of 
    > methods that has been discussed somewhat recently:

    > https://stat.ethz.ch/pipermail/r-devel/2022-September/081971.html

    > The problem is that when the binary is built, some code from other 
    > packages is kept as part of it.  When that other package is updated, you 
    > need a new source install of your own package (or a rebuild at CRAN to 
    > replace the binary) to cache the new code.

    > This can also be done explicitly by package startup code; I think this 
    > thread

    > https://stat.ethz.ch/pipermail/r-package-devel/2022q3/008481.html

    > turned out to be a case where rstan was caching something, and an update 
    > to ggplot2 didn't work with the cached data.  Given the error message, 
    > your issue sounds more like the first one.

    > I don't recall if there was a resolution.  Maybe you can ask the CRAN 
    > maintainers to rebuild buildmer.

    > Duncan Murdoch

Yes, thank you, Duncan!

The binary version of 'builmer' (or also lme4 ?) must have been created
with an older version of Matrix  (which did not have the
dgeMatrix_getDiag C code)  and the respective maintainer of the
binary builds (*) must rebuild the binary versions of those
Matrix-reverse-dependant packages,
---
*) in this case the macOS ones (both for Intel and ARM Macs)

Martin Maechler
(maintainer of Matrix)








    > On 18/10/2022 2:51 p.m., Carl Schwarz wrote:
    >> I've run into a problem where if you install the lme4, Matrix, and buildmer
    >> packages using the binaries from CRAN on a Mac, I get an error message
    >> about a missing method, but if I install the same packages from SOURCE, the
    >> code runs fine.
    >> 
    >> I would have thought that installing from source or using the binary
    >> should look the same.
    >> 
    >> Any suggestions on how to proceed to resolve this issue?
    >> 
    >> The maintainer of buildmer is also puzzled.
    >> You can follow the issue in more detail at:
    >> https://github.com/cvoeten/buildmer/issues/20
    >> 
    >> This is way above my paygrade...
    >> 
    >> Carl Schwarz
    >> 
    >> ------------------------------------------------------
    >> 
    >> Tried this on an intel-Mac and arm-Mac with the same result.
    >> Works fine on Windows machines under both scenarios.
    >> 
    >> Here is a test example
    >> 
    >> library(buildmer)
    >> library(lme4)
    >> 
    >> nrow <- 100
    >> 
    >> test <- data.frame(x01=runif(nrow),
    >> y=runif(nrow)<.1, block=as.factor(floor((1:nrow)/50)))
    >> head(test)
    >> 
    >> 
    >> fit.model <- lme4::glmer(y~x01 + (1|block), data=test,
    >> family=binomial(link="logit"))
    >> fit.model # this works
    >> 
    >> class(fit.model)
    >> 
    >> summary(fit.model)
    >> # gives the following error message
    >> Error in diag(from, names = FALSE) : object 'dgeMatrix_getDiag' not found
    >> 
    >> A pdf document showing output is attached (shows the sessionInfo etc).
    >> 
    >> When you install the buildmer and Matrix packages from SOURCE, it runs fine.
    >> 
    >> I've tried all combinations of installing binary/source and only if both
    >> packages (Matrix and buidmer) are installed from source, does the code run.
    >> 
    >> Same issue on an intel-Mac.
    >> Same issue when running under the R directly rather than Rstudio on a Mac.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Oct 19 09:45:34 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 19 Oct 2022 09:45:34 +0200
Subject: [R-pkg-devel] Error when install binary from CRAN but not if
 install from source - Macintoh, lme4, Matrix, buildmer
In-Reply-To: <25423.43427.527855.288051@stat.math.ethz.ch>
References: <CADtpigZfFG8oNO0NF2g6tku2whAFL2ycF_2JbWSL=AGkRf2F5w@mail.gmail.com>
 <485893d7-d898-0f04-957d-a81d5f6e5d03@gmail.com>
 <25423.43427.527855.288051@stat.math.ethz.ch>
Message-ID: <14101416-4d54-23d8-3b23-4271c9fe4a6d@statistik.tu-dortmund.de>

Please let the Simon (Mac maintainer for CRAN) know.
For Windows, the revdeps get rebuild automatically.

Best,
Uwe Ligges


On 19.10.2022 09:39, Martin Maechler wrote:
>>>>>> Duncan Murdoch
>>>>>>      on Tue, 18 Oct 2022 15:17:33 -0400 writes:
> 
>      > I see the same thing.  This sounds like a problem in the handling of
>      > methods that has been discussed somewhat recently:
> 
>      > https://stat.ethz.ch/pipermail/r-devel/2022-September/081971.html
> 
>      > The problem is that when the binary is built, some code from other
>      > packages is kept as part of it.  When that other package is updated, you
>      > need a new source install of your own package (or a rebuild at CRAN to
>      > replace the binary) to cache the new code.
> 
>      > This can also be done explicitly by package startup code; I think this
>      > thread
> 
>      > https://stat.ethz.ch/pipermail/r-package-devel/2022q3/008481.html
> 
>      > turned out to be a case where rstan was caching something, and an update
>      > to ggplot2 didn't work with the cached data.  Given the error message,
>      > your issue sounds more like the first one.
> 
>      > I don't recall if there was a resolution.  Maybe you can ask the CRAN
>      > maintainers to rebuild buildmer.
> 
>      > Duncan Murdoch
> 
> Yes, thank you, Duncan!
> 
> The binary version of 'builmer' (or also lme4 ?) must have been created
> with an older version of Matrix  (which did not have the
> dgeMatrix_getDiag C code)  and the respective maintainer of the
> binary builds (*) must rebuild the binary versions of those
> Matrix-reverse-dependant packages,
> ---
> *) in this case the macOS ones (both for Intel and ARM Macs)
> 
> Martin Maechler
> (maintainer of Matrix)
> 
> 
> 
> 
> 
> 
> 
> 
>      > On 18/10/2022 2:51 p.m., Carl Schwarz wrote:
>      >> I've run into a problem where if you install the lme4, Matrix, and buildmer
>      >> packages using the binaries from CRAN on a Mac, I get an error message
>      >> about a missing method, but if I install the same packages from SOURCE, the
>      >> code runs fine.
>      >>
>      >> I would have thought that installing from source or using the binary
>      >> should look the same.
>      >>
>      >> Any suggestions on how to proceed to resolve this issue?
>      >>
>      >> The maintainer of buildmer is also puzzled.
>      >> You can follow the issue in more detail at:
>      >> https://github.com/cvoeten/buildmer/issues/20
>      >>
>      >> This is way above my paygrade...
>      >>
>      >> Carl Schwarz
>      >>
>      >> ------------------------------------------------------
>      >>
>      >> Tried this on an intel-Mac and arm-Mac with the same result.
>      >> Works fine on Windows machines under both scenarios.
>      >>
>      >> Here is a test example
>      >>
>      >> library(buildmer)
>      >> library(lme4)
>      >>
>      >> nrow <- 100
>      >>
>      >> test <- data.frame(x01=runif(nrow),
>      >> y=runif(nrow)<.1, block=as.factor(floor((1:nrow)/50)))
>      >> head(test)
>      >>
>      >>
>      >> fit.model <- lme4::glmer(y~x01 + (1|block), data=test,
>      >> family=binomial(link="logit"))
>      >> fit.model # this works
>      >>
>      >> class(fit.model)
>      >>
>      >> summary(fit.model)
>      >> # gives the following error message
>      >> Error in diag(from, names = FALSE) : object 'dgeMatrix_getDiag' not found
>      >>
>      >> A pdf document showing output is attached (shows the sessionInfo etc).
>      >>
>      >> When you install the buildmer and Matrix packages from SOURCE, it runs fine.
>      >>
>      >> I've tried all combinations of installing binary/source and only if both
>      >> packages (Matrix and buidmer) are installed from source, does the code run.
>      >>
>      >> Same issue on an intel-Mac.
>      >> Same issue when running under the R directly rather than Rstudio on a Mac.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Oct 19 20:55:24 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 19 Oct 2022 14:55:24 -0400
Subject: [R-pkg-devel] Error when install binary from CRAN but not if
 install from source - Macintoh, lme4, Matrix, buildmer
In-Reply-To: <25423.43427.527855.288051@stat.math.ethz.ch>
References: <CADtpigZfFG8oNO0NF2g6tku2whAFL2ycF_2JbWSL=AGkRf2F5w@mail.gmail.com>
 <485893d7-d898-0f04-957d-a81d5f6e5d03@gmail.com>
 <25423.43427.527855.288051@stat.math.ethz.ch>
Message-ID: <c9086e98-79f6-27b2-748b-40bf98afe70d@gmail.com>

It seems that this could be mostly avoided if instead of caching copies 
of Matrix methods when buildmer was installed, R would cache promises to 
get those methods.  Then if the method for some particular signature 
changed, on first use buildmer would retrieve the current version.

There would still be a problem if Matrix completely dropped a method or 
it migrated to a different package, but I think that's less frequent 
than a change to the internal implementation.

Has any thought been given to making this change for R 4.3.0?

Duncan Murdoch



On 19/10/2022 3:39 a.m., Martin Maechler wrote:
>>>>>> Duncan Murdoch
>>>>>>      on Tue, 18 Oct 2022 15:17:33 -0400 writes:
> 
>      > I see the same thing.  This sounds like a problem in the handling of
>      > methods that has been discussed somewhat recently:
> 
>      > https://stat.ethz.ch/pipermail/r-devel/2022-September/081971.html
> 
>      > The problem is that when the binary is built, some code from other
>      > packages is kept as part of it.  When that other package is updated, you
>      > need a new source install of your own package (or a rebuild at CRAN to
>      > replace the binary) to cache the new code.
> 
>      > This can also be done explicitly by package startup code; I think this
>      > thread
> 
>      > https://stat.ethz.ch/pipermail/r-package-devel/2022q3/008481.html
> 
>      > turned out to be a case where rstan was caching something, and an update
>      > to ggplot2 didn't work with the cached data.  Given the error message,
>      > your issue sounds more like the first one.
> 
>      > I don't recall if there was a resolution.  Maybe you can ask the CRAN
>      > maintainers to rebuild buildmer.
> 
>      > Duncan Murdoch
> 
> Yes, thank you, Duncan!
> 
> The binary version of 'builmer' (or also lme4 ?) must have been created
> with an older version of Matrix  (which did not have the
> dgeMatrix_getDiag C code)  and the respective maintainer of the
> binary builds (*) must rebuild the binary versions of those
> Matrix-reverse-dependant packages,
> ---
> *) in this case the macOS ones (both for Intel and ARM Macs)
> 
> Martin Maechler
> (maintainer of Matrix)
> 
> 
> 
> 
> 
> 
> 
> 
>      > On 18/10/2022 2:51 p.m., Carl Schwarz wrote:
>      >> I've run into a problem where if you install the lme4, Matrix, and buildmer
>      >> packages using the binaries from CRAN on a Mac, I get an error message
>      >> about a missing method, but if I install the same packages from SOURCE, the
>      >> code runs fine.
>      >>
>      >> I would have thought that installing from source or using the binary
>      >> should look the same.
>      >>
>      >> Any suggestions on how to proceed to resolve this issue?
>      >>
>      >> The maintainer of buildmer is also puzzled.
>      >> You can follow the issue in more detail at:
>      >> https://github.com/cvoeten/buildmer/issues/20
>      >>
>      >> This is way above my paygrade...
>      >>
>      >> Carl Schwarz
>      >>
>      >> ------------------------------------------------------
>      >>
>      >> Tried this on an intel-Mac and arm-Mac with the same result.
>      >> Works fine on Windows machines under both scenarios.
>      >>
>      >> Here is a test example
>      >>
>      >> library(buildmer)
>      >> library(lme4)
>      >>
>      >> nrow <- 100
>      >>
>      >> test <- data.frame(x01=runif(nrow),
>      >> y=runif(nrow)<.1, block=as.factor(floor((1:nrow)/50)))
>      >> head(test)
>      >>
>      >>
>      >> fit.model <- lme4::glmer(y~x01 + (1|block), data=test,
>      >> family=binomial(link="logit"))
>      >> fit.model # this works
>      >>
>      >> class(fit.model)
>      >>
>      >> summary(fit.model)
>      >> # gives the following error message
>      >> Error in diag(from, names = FALSE) : object 'dgeMatrix_getDiag' not found
>      >>
>      >> A pdf document showing output is attached (shows the sessionInfo etc).
>      >>
>      >> When you install the buildmer and Matrix packages from SOURCE, it runs fine.
>      >>
>      >> I've tried all combinations of installing binary/source and only if both
>      >> packages (Matrix and buidmer) are installed from source, does the code run.
>      >>
>      >> Same issue on an intel-Mac.
>      >> Same issue when running under the R directly rather than Rstudio on a Mac.


From v|ncent@p|@gno| @end|ng |rom gm@||@com  Thu Oct 20 00:39:57 2022
From: v|ncent@p|@gno| @end|ng |rom gm@||@com (Vincent Plagnol)
Date: Wed, 19 Oct 2022 23:39:57 +0100
Subject: [R-pkg-devel] R package build- C compilation issue related to math.h
Message-ID: <CAJ0YOWiTFYMTb9DqAZ1bUggLH0LkiBbDXOKYFNCcZJqL2WjJSg@mail.gmail.com>

Dear all at R-package-devel,

I am struggling with a R package build.
It builds fine on my mac, which is my usual work environment. But when I
submit to CRAN, while the windows version is fine, the debian version fails
with a cryptic message:














** installing *source* package ?ExomeDepth? ...** using staged
installation** libsg++-12  -std=gnu++14 -I"/home/hornik/tmp/R/include"
-DNDEBUG   -I/usr/local/include -DUSE_TYPE_CHECKING_STRICT
-D_FORTIFY_SOURCE=2   -fpic  -g -O2 -Wall -pedantic -mtune=native  -c
CNV_estimate.cpp -o CNV_estimate.ogcc-12  -I"/home/hornik/tmp/R/include"
-DNDEBUG   -I/usr/local/include -DUSE_TYPE_CHECKING_STRICT
-D_FORTIFY_SOURCE=2   -fpic  -g -O2 -Wall -Wstrict-prototypes -pedantic
-mtune=native  -c ExomeDepth_init.c -o ExomeDepth_init.ogcc-12
 -I"/home/hornik/tmp/R/include" -DNDEBUG   -I/usr/local/include
-DUSE_TYPE_CHECKING_STRICT -D_FORTIFY_SOURCE=2   -fpic  -g -O2 -Wall
-Wstrict-prototypes -pedantic -mtune=native  -c VP_gamma.c -o VP_gamma.oIn
file included from gsl_math.h:22,                 from
VP_gamma.c:23:/usr/include/x86_64-linux-gnu/bits/mathcalls.h:85:1: error:
expected ?;? before ?extern?   85 | __MATHCALL_VEC (acosh,, (_Mdouble_
__x));      |
^~~~~~~~~~~~~~/usr/include/x86_64-linux-gnu/bits/mathcalls.h:87:1: error:
expected ?;? before ?extern?   87 | __MATHCALL_VEC (asinh,, (_Mdouble_
__x));      | ^~~~~~~~~~~~~~*


It is painful to debug because I don't have a debian machine. Furthermore
the issue seems to be in the file called at line 22 of gsl_math.sh which is
#include <math.h>
These are rather arcane (to me) building blocks of C and I don't get why it
would suddenly create some issue on Debian (but not on mac or windows).

My issue is perhaps that I copied substantial amount of the GSL library (as
opposed to using it as dependency) but it would be painful to do otherwise
now (this is an old package that has started to complain only recently).

Any and all advice is welcome to help me interpret what I see here.

Thanks,

Vincent

	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Thu Oct 20 02:03:34 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Wed, 19 Oct 2022 20:03:34 -0400
Subject: [R-pkg-devel] R package build- C compilation issue related to
 math.h
In-Reply-To: <CAJ0YOWiTFYMTb9DqAZ1bUggLH0LkiBbDXOKYFNCcZJqL2WjJSg@mail.gmail.com>
References: <CAJ0YOWiTFYMTb9DqAZ1bUggLH0LkiBbDXOKYFNCcZJqL2WjJSg@mail.gmail.com>
Message-ID: <CAPcHnpQnuivdJomDYk2quL0wpnmHGSb8QYTGeXOghQzudWrF2g@mail.gmail.com>

You could install VirtualBox if you wanted to test it yourself, or if you
have the tarball available online somewhere, I can try building it.

On Wed., Oct. 19, 2022, 19:57 Vincent Plagnol, <vincent.plagnol at gmail.com>
wrote:

> Dear all at R-package-devel,
>
> I am struggling with a R package build.
> It builds fine on my mac, which is my usual work environment. But when I
> submit to CRAN, while the windows version is fine, the debian version fails
> with a cryptic message:
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> ** installing *source* package ?ExomeDepth? ...** using staged
> installation** libsg++-12  -std=gnu++14 -I"/home/hornik/tmp/R/include"
> -DNDEBUG   -I/usr/local/include -DUSE_TYPE_CHECKING_STRICT
> -D_FORTIFY_SOURCE=2   -fpic  -g -O2 -Wall -pedantic -mtune=native  -c
> CNV_estimate.cpp -o CNV_estimate.ogcc-12  -I"/home/hornik/tmp/R/include"
> -DNDEBUG   -I/usr/local/include -DUSE_TYPE_CHECKING_STRICT
> -D_FORTIFY_SOURCE=2   -fpic  -g -O2 -Wall -Wstrict-prototypes -pedantic
> -mtune=native  -c ExomeDepth_init.c -o ExomeDepth_init.ogcc-12
>  -I"/home/hornik/tmp/R/include" -DNDEBUG   -I/usr/local/include
> -DUSE_TYPE_CHECKING_STRICT -D_FORTIFY_SOURCE=2   -fpic  -g -O2 -Wall
> -Wstrict-prototypes -pedantic -mtune=native  -c VP_gamma.c -o VP_gamma.oIn
> file included from gsl_math.h:22,                 from
> VP_gamma.c:23:/usr/include/x86_64-linux-gnu/bits/mathcalls.h:85:1: error:
> expected ?;? before ?extern?   85 | __MATHCALL_VEC (acosh,, (_Mdouble_
> __x));      |
> ^~~~~~~~~~~~~~/usr/include/x86_64-linux-gnu/bits/mathcalls.h:87:1: error:
> expected ?;? before ?extern?   87 | __MATHCALL_VEC (asinh,, (_Mdouble_
> __x));      | ^~~~~~~~~~~~~~*
>
>
> It is painful to debug because I don't have a debian machine. Furthermore
> the issue seems to be in the file called at line 22 of gsl_math.sh which is
> #include <math.h>
> These are rather arcane (to me) building blocks of C and I don't get why it
> would suddenly create some issue on Debian (but not on mac or windows).
>
> My issue is perhaps that I copied substantial amount of the GSL library (as
> opposed to using it as dependency) but it would be painful to do otherwise
> now (this is an old package that has started to complain only recently).
>
> Any and all advice is welcome to help me interpret what I see here.
>
> Thanks,
>
> Vincent
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Oct 20 10:35:38 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 20 Oct 2022 11:35:38 +0300
Subject: [R-pkg-devel] R package build- C compilation issue related to
 math.h
In-Reply-To: <CAJ0YOWiTFYMTb9DqAZ1bUggLH0LkiBbDXOKYFNCcZJqL2WjJSg@mail.gmail.com>
References: <CAJ0YOWiTFYMTb9DqAZ1bUggLH0LkiBbDXOKYFNCcZJqL2WjJSg@mail.gmail.com>
Message-ID: <20221020113538.54edadb1@Tarkus>

On Wed, 19 Oct 2022 23:39:57 +0100
Vincent Plagnol <vincent.plagnol at gmail.com> wrote:

> gcc-12 -I"/home/hornik/tmp/R/include" -DNDEBUG   -I/usr/local/include
> -DUSE_TYPE_CHECKING_STRICT -D_FORTIFY_SOURCE=2   -fpic  -g -O2 -Wall
> -Wstrict-prototypes -pedantic -mtune=native  -c VP_gamma.c -o
> VP_gamma.o

> /usr/include/x86_64-linux-gnu/bits/mathcalls.h:85:1: error:
> expected ?;? before ?extern? 

> It is painful to debug because I don't have a debian machine.
> Furthermore the issue seems to be in the file called at line 22 of
> gsl_math.h which is #include <math.h>

For what it's worth, I couldn't reproduce the problem when compiling
VP_gamma.c from https://github.com/vplagnol/ExomeDepth on two of my
Debian machines with older GCC versions; you might actually need GCC 12
to see it.

I see that VP_gamma.c includes config.h before including gsl_math.h.
Typically, config.h should be automatically generated by the configure
script and may contain different definitions on different systems.
Somebody else has a similar problem, also in math.h, also with a file
that includes config.h before math.h:
https://github.com/vplagnol/ExomeDepth/issues/50

I think that config.h defines something in its /* Substitute gsl
functions for missing system functions */ section that confuses the
glibc math.h machinery. If you have to include config.h in a source
file, it might help to process the system headers first.

I had a related problem recently: MinGW was complaining about a
strftime call in bundled code that wasn't reachable from R anyway, so I
decided to patch it out using the preprocessor. The correct way to do
so is to #include the system header first, then re-#define the function
to nothing:
https://github.com/aitap/Ropj/commit/a7d6cec19d11d47d731fbadbf8735660e534efaa

Otherwise the re-definition affects the system header where the
function is declared and the result is syntactically invalid.

> 	[[alternative HTML version deleted]]

Sorry, the mailing list ate the HTML version of your e-mail, and the
plain text version automatically prepared by your mailer is not easy to
read: https://stat.ethz.ch/pipermail/r-package-devel/2022q4/008578.html

Please post in plain text.

-- 
Best regards,
Ivan


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Thu Oct 20 11:41:45 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 20 Oct 2022 11:41:45 +0200
Subject: [R-pkg-devel] Error when install binary from CRAN but not if
 install from source - Macintosh, lme4, Matrix, buildmer
In-Reply-To: <c9086e98-79f6-27b2-748b-40bf98afe70d@gmail.com>
References: <CADtpigZfFG8oNO0NF2g6tku2whAFL2ycF_2JbWSL=AGkRf2F5w@mail.gmail.com>
 <485893d7-d898-0f04-957d-a81d5f6e5d03@gmail.com>
 <25423.43427.527855.288051@stat.math.ethz.ch>
 <c9086e98-79f6-27b2-748b-40bf98afe70d@gmail.com>
Message-ID: <25425.6105.697240.163902@stat.math.ethz.ch>

>>>>> Duncan Murdoch 
>>>>>     on Wed, 19 Oct 2022 14:55:24 -0400 writes:

    > It seems that this could be mostly avoided if instead of caching copies 
    > of Matrix methods when buildmer was installed, R would cache promises to 
    > get those methods.  Then if the method for some particular signature 
    > changed, on first use buildmer would retrieve the current version.

    > There would still be a problem if Matrix completely dropped a method or 
    > it migrated to a different package, but I think that's less frequent 
    > than a change to the internal implementation.

    > Has any thought been given to making this change for R 4.3.0?

    > Duncan Murdoch

Not that I know of.

It sounds like a very promising (pun! ;-) idea, that could solve
many subtle  inter-package installation/update  problems.

Note that the methods *and* classes  caching had been introduced
a longer while ago as part of a concerted effort to make the
loading of packages with (many) S4 methods and classes considerably faster.

Before that effort, all these class and method "tables"/"lists"
(environments effectively) were (re-)computed at package load
time which was quite costly [time consuming].
I was not very much involved in that effort and I don't know if
using promises instead had been considered at the time.

(I've added Michael and the other Martin M to the CC , hoping
 they will know / remember more )

Martin Maechler


    > On 19/10/2022 3:39 a.m., Martin Maechler wrote:
    >>>>>>> Duncan Murdoch
    >>>>>>> on Tue, 18 Oct 2022 15:17:33 -0400 writes:
    >> 
    >> > I see the same thing.  This sounds like a problem in the handling of
    >> > methods that has been discussed somewhat recently:
    >> 
    >> > https://stat.ethz.ch/pipermail/r-devel/2022-September/081971.html
    >> 
    >> > The problem is that when the binary is built, some code from other
    >> > packages is kept as part of it.  When that other package is updated, you
    >> > need a new source install of your own package (or a rebuild at CRAN to
    >> > replace the binary) to cache the new code.
    >> 
    >> > This can also be done explicitly by package startup code; I think this
    >> > thread
    >> 
    >> > https://stat.ethz.ch/pipermail/r-package-devel/2022q3/008481.html
    >> 
    >> > turned out to be a case where rstan was caching something, and an update
    >> > to ggplot2 didn't work with the cached data.  Given the error message,
    >> > your issue sounds more like the first one.
    >> 
    >> > I don't recall if there was a resolution.  Maybe you can ask the CRAN
    >> > maintainers to rebuild buildmer.
    >> 
    >> > Duncan Murdoch
    >> 
    >> Yes, thank you, Duncan!
    >> 
    >> The binary version of 'buildmer' (or also lme4 ?) must have been created
    >> with an older version of Matrix  (which did not have the
    >> dgeMatrix_getDiag C code)  and the respective maintainer of the
    >> binary builds (*) must rebuild the binary versions of those
    >> Matrix-reverse-dependant packages,
    >> ---
    >> *) in this case the macOS ones (both for Intel and ARM Macs)
    >> 
    >> Martin Maechler
    >> (maintainer of Matrix)
    >> 
    >> 
    >> 
    >> 
    >> 
    >> 
    >> 
    >> 
    >> > On 18/10/2022 2:51 p.m., Carl Schwarz wrote:
    >> >> I've run into a problem where if you install the lme4, Matrix, and buildmer
    >> >> packages using the binaries from CRAN on a Mac, I get an error message
    >> >> about a missing method, but if I install the same packages from SOURCE, the
    >> >> code runs fine.
    >> >>
    >> >> I would have thought that installing from source or using the binary
    >> >> should look the same.
    >> >>
    >> >> Any suggestions on how to proceed to resolve this issue?
    >> >>
    >> >> The maintainer of buildmer is also puzzled.
    >> >> You can follow the issue in more detail at:
    >> >> https://github.com/cvoeten/buildmer/issues/20
    >> >>
    >> >> This is way above my paygrade...
    >> >>
    >> >> Carl Schwarz
    >> >>
    >> >> ------------------------------------------------------
    >> >>
    >> >> Tried this on an intel-Mac and arm-Mac with the same result.
    >> >> Works fine on Windows machines under both scenarios.
    >> >>
    >> >> Here is a test example
    >> >>
    >> >> library(buildmer)
    >> >> library(lme4)
    >> >>
    >> >> nrow <- 100
    >> >>
    >> >> test <- data.frame(x01=runif(nrow),
    >> >> y=runif(nrow)<.1, block=as.factor(floor((1:nrow)/50)))
    >> >> head(test)
    >> >>
    >> >>
    >> >> fit.model <- lme4::glmer(y~x01 + (1|block), data=test,
    >> >> family=binomial(link="logit"))
    >> >> fit.model # this works
    >> >>
    >> >> class(fit.model)
    >> >>
    >> >> summary(fit.model)
    >> >> # gives the following error message
    >> >> Error in diag(from, names = FALSE) : object 'dgeMatrix_getDiag' not found
    >> >>
    >> >> A pdf document showing output is attached (shows the sessionInfo etc).
    >> >>
    >> >> When you install the buildmer and Matrix packages from SOURCE, it runs fine.
    >> >>
    >> >> I've tried all combinations of installing binary/source and only if both
    >> >> packages (Matrix and buidmer) are installed from source, does the code run.
    >> >>
    >> >> Same issue on an intel-Mac.
    >> >> Same issue when running under the R directly rather than Rstudio on a Mac.


From @r|e|92@nd @end|ng |rom gm@||@com  Thu Oct 20 12:43:30 2022
From: @r|e|92@nd @end|ng |rom gm@||@com (=?UTF-8?Q?Elys=C3=A9e_Aristide?=)
Date: Thu, 20 Oct 2022 12:43:30 +0200
Subject: [R-pkg-devel] How ton print in the console from Rcpp
Message-ID: <CALcKxsq1EYdsSh3i2MPLop8fxngVpAKfY8ZqMCmbG+k280VJoA@mail.gmail.com>

Greetings,

In my CDatanet package, I want to print texts and values during a numerical
optimization process. I saw in many posts that CRAN is not happy with
sd::cout and sd::endl. What I understood is that it is better to use Rcpp
functions. So I used:

Rcpp::Rcout << "beta: \n";
Rcpp::print(betacpp);
Rcpp::Rcout << "log-likelihood: " << llh << "\n";

Everything is fine with the check --as-cran with Linux and Windows.
However, there is a warning with Mac (
https://www.r-project.org/nosvn/R.check/r-release-macos-arm64/CDatanet-00check.html
)
checking compiled code ... WARNING
File ?CDatanet/libs/CDatanet.so?:
  Found ?___assert_rtn?, possibly from ?assert? (C)
    Objects: ?CDincomInfo.o?, ?CDincomInfo.rho.o?, ?Homophily.o?,
      ?RcppExports.o?, ?SARTIncomplet.o?

Compiled code should not call entry points which might terminate R nor
write to stdout/stderr instead of to the console, nor use Fortran I/O
nor system RNGs.

I think this is because I am printing from C++ functions. Am I wrong? If
not, what is the best way to print in the console from C++ functions?

Best regards,

Aristide Elys?e HOUNDETOUNGAN
*Assistant Professor of Economics*
*Website : *www.ahoundetoungan.com

	[[alternative HTML version deleted]]


From |uc@r @end|ng |rom |edor@project@org  Thu Oct 20 13:37:04 2022
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Thu, 20 Oct 2022 13:37:04 +0200
Subject: [R-pkg-devel] How ton print in the console from Rcpp
In-Reply-To: <CALcKxsq1EYdsSh3i2MPLop8fxngVpAKfY8ZqMCmbG+k280VJoA@mail.gmail.com>
References: <CALcKxsq1EYdsSh3i2MPLop8fxngVpAKfY8ZqMCmbG+k280VJoA@mail.gmail.com>
Message-ID: <CALEXWq3NJzwmh-oTMJdpa+8f=Qhhup8rrzZdX9y20bzgsmhF=A@mail.gmail.com>

Hi,

On Thu, 20 Oct 2022 at 12:42, Elys?e Aristide <ariel92and at gmail.com> wrote:
>
> Greetings,
>
> In my CDatanet package, I want to print texts and values during a numerical
> optimization process. I saw in many posts that CRAN is not happy with
> sd::cout and sd::endl. What I understood is that it is better to use Rcpp
> functions. So I used:
>
> Rcpp::Rcout << "beta: \n";
> Rcpp::print(betacpp);
> Rcpp::Rcout << "log-likelihood: " << llh << "\n";
>
> Everything is fine with the check --as-cran with Linux and Windows.
> However, there is a warning with Mac (
> https://www.r-project.org/nosvn/R.check/r-release-macos-arm64/CDatanet-00check.html
> )
> checking compiled code ... WARNING
> File ?CDatanet/libs/CDatanet.so?:
>   Found ?___assert_rtn?, possibly from ?assert? (C)
>     Objects: ?CDincomInfo.o?, ?CDincomInfo.rho.o?, ?Homophily.o?,
>       ?RcppExports.o?, ?SARTIncomplet.o?
>
> Compiled code should not call entry points which might terminate R nor
> write to stdout/stderr instead of to the console, nor use Fortran I/O
> nor system RNGs.
>
> I think this is because I am printing from C++ functions. Am I wrong? If
> not, what is the best way to print in the console from C++ functions?

No, this is not related to the use of printing functions. It seems to
be related to RcppEigen according to this:
https://stackoverflow.com/questions/70415854/helps-on-the-package-development

On Linux, I don't see ___assert_rtn being included in the final shared
library (this seems to happen only for macOS for some reason). What I
did find in the shared library is this:

(internal::UIntPtr(eigen_unaligned_array_assert_workaround_gcc47(array))
& (15)) == 0 && "this assertion is explained here: "
"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html"
" **** READ THIS WEB PAGE !!! ****"

Not sure if this is related to the issue you see, but it seems likely.

-- 
I?aki ?car


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Oct 20 13:46:44 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 20 Oct 2022 14:46:44 +0300
Subject: [R-pkg-devel] How ton print in the console from Rcpp
In-Reply-To: <CALcKxsq1EYdsSh3i2MPLop8fxngVpAKfY8ZqMCmbG+k280VJoA@mail.gmail.com>
References: <CALcKxsq1EYdsSh3i2MPLop8fxngVpAKfY8ZqMCmbG+k280VJoA@mail.gmail.com>
Message-ID: <20221020144644.38d04ef0@arachnoid>

? Thu, 20 Oct 2022 12:43:30 +0200
Elys?e Aristide <ariel92and at gmail.com> ?????:

> What I understood is that it is better to use Rcpp functions. So I
> used:
> 
> Rcpp::Rcout << "beta: \n";
> Rcpp::print(betacpp);
> Rcpp::Rcout << "log-likelihood: " << llh << "\n";

This seems to be a right way of printing from Rcpp code.

> checking compiled code ... WARNING
> File ?CDatanet/libs/CDatanet.so?:
>   Found ?___assert_rtn?, possibly from ?assert? (C)
>     Objects: ?CDincomInfo.o?, ?CDincomInfo.rho.o?, ?Homophily.o?,
>       ?RcppExports.o?, ?SARTIncomplet.o?

Since you don't call assert() yourself (which, in theory, shouldn't
matter as R packages are compiled with #define NDEBUG), it must be one
of the C++ template classes you're using. They may contain calls to
assert() or an equivalent, which get inlined inside your binary during
compilation. It might be even inside the implementation of the C++
standard library, which would be completely outside your control.

I'm not sure, but it could be possible to explain this situation to
CRAN as a false-positive. In order to find out further, you'll need
someone with a macOS computer or experience in cross-platform
development to either disassemble the existing binary or take the
compilation pipeline apart in order to find out where the calls to
___assert_rtn originate.

-- 
Best regards,
Ivan


From edd @end|ng |rom deb|@n@org  Thu Oct 20 14:42:23 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 20 Oct 2022 07:42:23 -0500
Subject: [R-pkg-devel] How ton print in the console from Rcpp
In-Reply-To: <20221020144644.38d04ef0@arachnoid>
References: <CALcKxsq1EYdsSh3i2MPLop8fxngVpAKfY8ZqMCmbG+k280VJoA@mail.gmail.com>
 <20221020144644.38d04ef0@arachnoid>
Message-ID: <25425.16943.184057.68532@rob.eddelbuettel.com>


On 20 October 2022 at 14:46, Ivan Krylov wrote:
| ? Thu, 20 Oct 2022 12:43:30 +0200
| Elys?e Aristide <ariel92and at gmail.com> ?????:
| 
| > What I understood is that it is better to use Rcpp functions. So I
| > used:
| > 
| > Rcpp::Rcout << "beta: \n";
| > Rcpp::print(betacpp);
| > Rcpp::Rcout << "log-likelihood: " << llh << "\n";
| 
| This seems to be a right way of printing from Rcpp code.

Yup!

And as stated that alone does not cause `__assert_rtn` or many of the now
almost 2600 Rcpp-using packages (that print this way) would have issues.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @r|e|92@nd @end|ng |rom gm@||@com  Thu Oct 20 15:16:13 2022
From: @r|e|92@nd @end|ng |rom gm@||@com (=?gb2312?B?RWx5c6imZSBBcmlzdGlkZQ==?=)
Date: Thu, 20 Oct 2022 13:16:13 +0000
Subject: [R-pkg-devel] How ton print in the console from Rcpp
In-Reply-To: <25425.16943.184057.68532@rob.eddelbuettel.com>
References: <CALcKxsq1EYdsSh3i2MPLop8fxngVpAKfY8ZqMCmbG+k280VJoA@mail.gmail.com>
 <20221020144644.38d04ef0@arachnoid>
 <25425.16943.184057.68532@rob.eddelbuettel.com>
Message-ID: <SJ0PR10MB5719CC02075B1218B23F2A1FFE2A9@SJ0PR10MB5719.namprd10.prod.outlook.com>

Thank you very much for your answers.

I finally noticed that the issue comes from the numerical optimization, in which I use the class MFuncGrad of the package RcppNumerical. Is there any problem in using this class? This is the only way I know to compute integrals of perform numerical optimizations in Rcpp. The other way might be: construct the function to be minimized in Rcpp and use the function optim in R. But this is not efficient.

Best,
Aristide
________________________________
From: Dirk Eddelbuettel <edd at debian.org>
Sent: Thursday, October 20, 2022 2:42:23 PM
To: Ivan Krylov <krylov.r00t at gmail.com>
Cc: Elys??e Aristide <ariel92and at gmail.com>; r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] How ton print in the console from Rcpp


On 20 October 2022 at 14:46, Ivan Krylov wrote:
| ?? Thu, 20 Oct 2022 12:43:30 +0200
| Elys??e Aristide <ariel92and at gmail.com> ??????:
|
| > What I understood is that it is better to use Rcpp functions. So I
| > used:
| >
| > Rcpp::Rcout << "beta: \n";
| > Rcpp::print(betacpp);
| > Rcpp::Rcout << "log-likelihood: " << llh << "\n";
|
| This seems to be a right way of printing from Rcpp code.

Yup!

And as stated that alone does not cause `__assert_rtn` or many of the now
almost 2600 Rcpp-using packages (that print this way) would have issues.

Dirk

--
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

	[[alternative HTML version deleted]]


From v|ncent@p|@gno| @end|ng |rom gm@||@com  Fri Oct 21 08:35:14 2022
From: v|ncent@p|@gno| @end|ng |rom gm@||@com (Vincent Plagnol)
Date: Fri, 21 Oct 2022 07:35:14 +0100
Subject: [R-pkg-devel] R package build- C compilation issue related to
 math.h
In-Reply-To: <20221020113538.54edadb1@Tarkus>
References: <CAJ0YOWiTFYMTb9DqAZ1bUggLH0LkiBbDXOKYFNCcZJqL2WjJSg@mail.gmail.com>
 <20221020113538.54edadb1@Tarkus>
Message-ID: <CAJ0YOWiAZeSFi7Hwb830tm3jQJxD_+vMwS8hHz176giSFkvE3A@mail.gmail.com>

Thank you Andrew for offering to help. The R-hub package sorted me out for
testing for various OSs.

And Ivan: thank you very much- you were spot on. Swapping the order of
config.h and system headers in all my C files made the compilation work in
my R-hub tests. Hopefully ExomeDepth is now about to show up in CRAN (I
just resubmitted). Amazingly insightful advice. I think it's fair to say
that I would never have worked that one out (or it would have taken me
absolutely forever). So thanks a lot for helping, I am really grateful.

And noted re replying in plain text. Gmail does HTML without really telling
that it does HTML but I'll try to stick to plain text in the future.



On Thu, Oct 20, 2022 at 9:35 AM Ivan Krylov <krylov.r00t at gmail.com> wrote:

> On Wed, 19 Oct 2022 23:39:57 +0100
> Vincent Plagnol <vincent.plagnol at gmail.com> wrote:
>
> > gcc-12 -I"/home/hornik/tmp/R/include" -DNDEBUG   -I/usr/local/include
> > -DUSE_TYPE_CHECKING_STRICT -D_FORTIFY_SOURCE=2   -fpic  -g -O2 -Wall
> > -Wstrict-prototypes -pedantic -mtune=native  -c VP_gamma.c -o
> > VP_gamma.o
>
> > /usr/include/x86_64-linux-gnu/bits/mathcalls.h:85:1: error:
> > expected ?;? before ?extern?
>
> > It is painful to debug because I don't have a debian machine.
> > Furthermore the issue seems to be in the file called at line 22 of
> > gsl_math.h which is #include <math.h>
>
> For what it's worth, I couldn't reproduce the problem when compiling
> VP_gamma.c from https://github.com/vplagnol/ExomeDepth on two of my
> Debian machines with older GCC versions; you might actually need GCC 12
> to see it.
>
> I see that VP_gamma.c includes config.h before including gsl_math.h.
> Typically, config.h should be automatically generated by the configure
> script and may contain different definitions on different systems.
> Somebody else has a similar problem, also in math.h, also with a file
> that includes config.h before math.h:
> https://github.com/vplagnol/ExomeDepth/issues/50
>
> I think that config.h defines something in its /* Substitute gsl
> functions for missing system functions */ section that confuses the
> glibc math.h machinery. If you have to include config.h in a source
> file, it might help to process the system headers first.
>
> I had a related problem recently: MinGW was complaining about a
> strftime call in bundled code that wasn't reachable from R anyway, so I
> decided to patch it out using the preprocessor. The correct way to do
> so is to #include the system header first, then re-#define the function
> to nothing:
>
> https://github.com/aitap/Ropj/commit/a7d6cec19d11d47d731fbadbf8735660e534efaa
>
> Otherwise the re-definition affects the system header where the
> function is declared and the result is syntactically invalid.
>
> >       [[alternative HTML version deleted]]
>
> Sorry, the mailing list ate the HTML version of your e-mail, and the
> plain text version automatically prepared by your mailer is not easy to
> read: https://stat.ethz.ch/pipermail/r-package-devel/2022q4/008578.html
>
> Please post in plain text.
>
> --
> Best regards,
> Ivan
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Sat Oct 22 16:22:36 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 22 Oct 2022 09:22:36 -0500
Subject: [R-pkg-devel] How ton print in the console from Rcpp
In-Reply-To: <SJ0PR10MB5719CC02075B1218B23F2A1FFE2A9@SJ0PR10MB5719.namprd10.prod.outlook.com>
References: <CALcKxsq1EYdsSh3i2MPLop8fxngVpAKfY8ZqMCmbG+k280VJoA@mail.gmail.com>
 <20221020144644.38d04ef0@arachnoid>
 <25425.16943.184057.68532@rob.eddelbuettel.com>
 <SJ0PR10MB5719CC02075B1218B23F2A1FFE2A9@SJ0PR10MB5719.namprd10.prod.outlook.com>
Message-ID: <25427.64684.611479.503767@rob.eddelbuettel.com>


On 20 October 2022 at 13:16, Elys?e Aristide wrote:
| Thank you very much for your answers.
| 
| I finally noticed that the issue comes from the numerical optimization, in which I use the class MFuncGrad of the package RcppNumerical. Is there any problem in using this class? This is the only way I know to compute integrals of perform numerical optimizations in Rcpp. The other way might be: construct the function to be minimized in Rcpp and use the function optim in R. But this is not efficient.

That package is also used by others [1] and you should maybe study their code
and setup as it seems unlikely to me that your woes are due to
RcppNumerical. It likely is a simple inadvertent issue in your package.

Dirk

[1] https://cloud.r-project.org/web/packages/RcppNumerical/index.html shows
Reverse imports:
  BayesPPD, ccdf, glmdisc, MCPModPack, secr, teachingApps
Reverse linking to:
  apeglm, BayesPPD, BVSNLP, CDatanet, COMIX, fido, gbeta, glmdisc,
  MCPModPack, OwenQ, secr, teachingApps, vennLasso, ztpln 
which should give you plenty of examples.


-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ||one| @end|ng |rom r@tud|o@com  Mon Oct 24 13:47:34 2022
From: ||one| @end|ng |rom r@tud|o@com (Lionel Henry)
Date: Mon, 24 Oct 2022 13:47:34 +0200
Subject: [R-pkg-devel] Frictionless alternative for `-Wstrict-prototypes`
Message-ID: <CAJf4E3pCqzbdpTaVWZyS1b9xntge+5nsQ0kS47UBwqjxUzNpqQ@mail.gmail.com>

Davis Vaughan and I were looking into the `-Wstrict-prototypes`
warnings for C code that were recently added to the R-devel checks. We
did a little research and found that these warnings are intended to
catch old-style definitions and declarations that were deprecated a
long time ago. This includes:

1. Unspecified types like `void fn(x, y);`
2. Unspecified parameter lists like `void fn();`.

We also found:

- That only unspecified types (case 1) will become defunct. For
  unspecified parameter lists (case 2), it was announced recently that
  the C standard committee has decided to simply change the meaning to
  "no arguments" in C23. This aligns with what most people think it
  means, and is what C++ does. See item 13 of page 130 in the C23
  working draft at https://open-std.org/JTC1/SC22/WG14/www/docs/n3054.pdf.

- The new `-Wdeprecated-non-prototype` option for clang-15 does not
  warn for empty parameter lists, allowing for a smooth transition
  that allows this widespread usage.

Since the no arguments case is both incredibly common and will become
fully legal C syntax in a close future, it seems it might not be worth
it to require all packages to update their code to an intermediary
form that reads less well, is not as intuitive to most people (and so
might crop up back in further updates), and will become standard in
the future anyway.

Perhaps a good course of action would be:

- Using `-Wno-strict-prototypes` to disable the stringent checks.

- Enabling the new `-Wdeprecated-non-prototype` in clang to catch
  old-style definitions and declarations.

This way CRAN would be able to catch deprecated syntax while allowing
the soon-to-be-legal syntax of empty parameter lists. We hope that
this would mean less code churn on CRAN, which means less work for the
CRAN maintainers as well as for the maintainers of CRAN packages.

Best,
Lionel & Davis


From c@chw@rz@t@t@|uc@ @end|ng |rom gm@||@com  Tue Oct 25 03:16:57 2022
From: c@chw@rz@t@t@|uc@ @end|ng |rom gm@||@com (Carl Schwarz)
Date: Mon, 24 Oct 2022 18:16:57 -0700
Subject: [R-pkg-devel] Error when install binary from CRAN but not if
 install from source - Macintoh, lme4, Matrix, buildmer
In-Reply-To: <485893d7-d898-0f04-957d-a81d5f6e5d03@gmail.com>
References: <CADtpigZfFG8oNO0NF2g6tku2whAFL2ycF_2JbWSL=AGkRf2F5w@mail.gmail.com>
 <485893d7-d898-0f04-957d-a81d5f6e5d03@gmail.com>
Message-ID: <CADtpigahOyDRHjtXZF=_L=bbSe9V1kwAqN=SJCKOV+ShEEP0BQ@mail.gmail.com>

Yes, the resubmission and re-building has fixed the problem with buildmer/
Matrix.
Carl

On Tue, Oct 18, 2022 at 12:17 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> I see the same thing.  This sounds like a problem in the handling of
> methods that has been discussed somewhat recently:
>
>    https://stat.ethz.ch/pipermail/r-devel/2022-September/081971.html
>
> The problem is that when the binary is built, some code from other
> packages is kept as part of it.  When that other package is updated, you
> need a new source install of your own package (or a rebuild at CRAN to
> replace the binary) to cache the new code.
>
> This can also be done explicitly by package startup code; I think this
> thread
>
>    https://stat.ethz.ch/pipermail/r-package-devel/2022q3/008481.html
>
> turned out to be a case where rstan was caching something, and an update
> to ggplot2 didn't work with the cached data.  Given the error message,
> your issue sounds more like the first one.
>
> I don't recall if there was a resolution.  Maybe you can ask the CRAN
> maintainers to rebuild buildmer.
>
> Duncan Murdoch
>
>
>
>
>
> On 18/10/2022 2:51 p.m., Carl Schwarz wrote:
> > I've run into a problem where if you install the lme4, Matrix, and
> buildmer
> > packages using the binaries from CRAN on a Mac, I get an error message
> > about a missing method, but if I install the same packages from SOURCE,
> the
> > code runs fine.
> >
> > I would have thought that installing from source or using the binary
> > should look the same.
> >
> > Any suggestions on how to proceed to resolve this issue?
> >
> > The maintainer of buildmer is also puzzled.
> > You can follow the issue in more detail at:
> >      https://github.com/cvoeten/buildmer/issues/20
> >
> > This is way above my paygrade...
> >
> > Carl Schwarz
> >
> > ------------------------------------------------------
> >
> > Tried this on an intel-Mac and arm-Mac with the same result.
> > Works fine on Windows machines under both scenarios.
> >
> > Here is a test example
> >
> > library(buildmer)
> > library(lme4)
> >
> > nrow <- 100
> >
> > test <- data.frame(x01=runif(nrow),
> >                     y=runif(nrow)<.1,
> block=as.factor(floor((1:nrow)/50)))
> > head(test)
> >
> >
> > fit.model <- lme4::glmer(y~x01 + (1|block), data=test,
> >                     family=binomial(link="logit"))
> > fit.model # this works
> >
> > class(fit.model)
> >
> > summary(fit.model)
> > # gives the following error message
> > Error in diag(from, names = FALSE) : object 'dgeMatrix_getDiag' not found
> >
> > A pdf document showing output is attached (shows the sessionInfo etc).
> >
> > When you install the buildmer and Matrix packages from SOURCE, it runs
> fine.
> >
> > I've tried all combinations of installing binary/source and only if both
> > packages (Matrix and buidmer) are installed from source, does the code
> run.
> >
> > Same issue on an intel-Mac.
> > Same issue when running under the R directly rather than Rstudio on a
> Mac.
> >
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>

	[[alternative HTML version deleted]]


From |@w@onj@|7net @end|ng |rom gm@||@com  Tue Oct 25 23:01:18 2022
From: |@w@onj@|7net @end|ng |rom gm@||@com (John Lawson)
Date: Tue, 25 Oct 2022 15:01:18 -0600
Subject: [R-pkg-devel] R Package AQLSchemes
Message-ID: <CAJiVmSCzHPR3+AP=7s-USjo2RG2OvP7cfhB=rTdMq3+prbjQXA@mail.gmail.com>

I published the R Package AQLSChemes on CRAN in May 2022. The book "An
Introduction to Acceptance Sampling and SPC with R" was published after
that, and included examples of the use of AQLSChemes package. Since then, I
have retired and was not aware that the AQLSChemes package was removed
from CRAN.  When I try to run code from the book  that requires the
AQLSChemes package, I get the message that the package doesn't exist.

My question is, How can I find out why the package AQLSChemes was removed
from CRAN, and what do I need to do to restore it to CRAN?

Sincerely
John Lawson
lawsonjsl7net at gmail.com

	[[alternative HTML version deleted]]


From roy@mende|@@ohn @end|ng |rom no@@@gov  Tue Oct 25 23:05:42 2022
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 25 Oct 2022 14:05:42 -0700
Subject: [R-pkg-devel] R Package AQLSchemes
In-Reply-To: <CAJiVmSCzHPR3+AP=7s-USjo2RG2OvP7cfhB=rTdMq3+prbjQXA@mail.gmail.com>
References: <CAJiVmSCzHPR3+AP=7s-USjo2RG2OvP7cfhB=rTdMq3+prbjQXA@mail.gmail.com>
Message-ID: <069B45F9-C8CC-47F5-8C80-22591D45E150@noaa.gov>

????

https://cran.r-project.org/web//packages/AQLSchemes/index.html

-Roy

> On Oct 25, 2022, at 2:01 PM, John Lawson <lawsonjsl7net at gmail.com> wrote:
> 
> AQLSChemes

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From r@turner @end|ng |rom @uck|@nd@@c@nz  Tue Oct 25 23:42:54 2022
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Wed, 26 Oct 2022 10:42:54 +1300
Subject: [R-pkg-devel] R Package AQLSchemes
In-Reply-To: <CAJiVmSCzHPR3+AP=7s-USjo2RG2OvP7cfhB=rTdMq3+prbjQXA@mail.gmail.com>
References: <CAJiVmSCzHPR3+AP=7s-USjo2RG2OvP7cfhB=rTdMq3+prbjQXA@mail.gmail.com>
Message-ID: <20221026104254.41a1a6cf@rolf-Latitude-E7470>


On Tue, 25 Oct 2022 15:01:18 -0600
John Lawson <lawsonjsl7net at gmail.com> wrote:

> I published the R Package AQLSChemes on CRAN in May 2022. The book "An
> Introduction to Acceptance Sampling and SPC with R" was published
> after that, and included examples of the use of AQLSChemes package.
> Since then, I have retired and was not aware that the AQLSChemes
> package was removed from CRAN.  When I try to run code from the book
> that requires the AQLSChemes package, I get the message that the
> package doesn't exist.
> 
> My question is, How can I find out why the package AQLSChemes was
> removed from CRAN, and what do I need to do to restore it to CRAN?

As Roy Mendelssohn has pointed out, AQLSChemes is there on CRAN.

Perhaps you need to re-install it on your machine.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From r@turner @end|ng |rom @uck|@nd@@c@nz  Tue Oct 25 23:47:27 2022
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Wed, 26 Oct 2022 10:47:27 +1300
Subject: [R-pkg-devel] R Package AQLSchemes
In-Reply-To: <20221026104254.41a1a6cf@rolf-Latitude-E7470>
References: <CAJiVmSCzHPR3+AP=7s-USjo2RG2OvP7cfhB=rTdMq3+prbjQXA@mail.gmail.com>
 <20221026104254.41a1a6cf@rolf-Latitude-E7470>
Message-ID: <20221026104727.1c56a81a@rolf-Latitude-E7470>

On Wed, 26 Oct 2022 10:42:54 +1300
Rolf Turner <r.turner at auckland.ac.nz> wrote:

> On Tue, 25 Oct 2022 15:01:18 -0600
> John Lawson <lawsonjsl7net at gmail.com> wrote:
> 
> > I published the R Package AQLSChemes on CRAN in May 2022. The book
> > "An Introduction to Acceptance Sampling and SPC with R" was
> > published after that, and included examples of the use of
> > AQLSChemes package. Since then, I have retired and was not aware
> > that the AQLSChemes package was removed from CRAN.  When I try to
> > run code from the book that requires the AQLSChemes package, I get
> > the message that the package doesn't exist.
> > 
> > My question is, How can I find out why the package AQLSChemes was
> > removed from CRAN, and what do I need to do to restore it to CRAN?  
> 
> As Roy Mendelssohn has pointed out, AQLSChemes is there on CRAN.
> 
> Perhaps you need to re-install it on your machine.

Whoops!  I neglected to note the crucial fact that it's "AQLSchemes"
--- lower case "c".  Makes all the difference!

cheers,

Rolf Turner


-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From @kw@|mmo @end|ng |rom gm@||@com  Wed Oct 26 01:48:40 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Tue, 25 Oct 2022 19:48:40 -0400
Subject: [R-pkg-devel] R Package AQLSchemes
In-Reply-To: <20221026104727.1c56a81a@rolf-Latitude-E7470>
References: <CAJiVmSCzHPR3+AP=7s-USjo2RG2OvP7cfhB=rTdMq3+prbjQXA@mail.gmail.com>
 <20221026104254.41a1a6cf@rolf-Latitude-E7470>
 <20221026104727.1c56a81a@rolf-Latitude-E7470>
Message-ID: <CAPcHnpRr+7TFRmdLHiQ8d8GGSqnj2PZ0NJEr+4JvfQWwj=qRsQ@mail.gmail.com>

The capital does not matter for CRAN, packages may not be published if an
existing package exists by the same name, regardless of case.

Plus, the package at https://CRAN.R-project.org/package=AQLSchemes says the
maintainer is John Lawson


On Tue, Oct 25, 2022, 17:53 Rolf Turner <r.turner at auckland.ac.nz> wrote:

> On Wed, 26 Oct 2022 10:42:54 +1300
> Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
> > On Tue, 25 Oct 2022 15:01:18 -0600
> > John Lawson <lawsonjsl7net at gmail.com> wrote:
> >
> > > I published the R Package AQLSChemes on CRAN in May 2022. The book
> > > "An Introduction to Acceptance Sampling and SPC with R" was
> > > published after that, and included examples of the use of
> > > AQLSChemes package. Since then, I have retired and was not aware
> > > that the AQLSChemes package was removed from CRAN.  When I try to
> > > run code from the book that requires the AQLSChemes package, I get
> > > the message that the package doesn't exist.
> > >
> > > My question is, How can I find out why the package AQLSChemes was
> > > removed from CRAN, and what do I need to do to restore it to CRAN?
> >
> > As Roy Mendelssohn has pointed out, AQLSChemes is there on CRAN.
> >
> > Perhaps you need to re-install it on your machine.
>
> Whoops!  I neglected to note the crucial fact that it's "AQLSchemes"
> --- lower case "c".  Makes all the difference!
>
> cheers,
>
> Rolf Turner
>
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From y||4013 @end|ng |rom med@corne||@edu  Fri Oct 28 21:48:44 2022
From: y||4013 @end|ng |rom med@corne||@edu (Ying Li)
Date: Fri, 28 Oct 2022 19:48:44 +0000
Subject: [R-pkg-devel] Cannot submit package due to false-positive rejection
Message-ID: <PH0PR06MB71577805606D3A60DE43B7F2ED329@PH0PR06MB7157.namprd06.prod.outlook.com>

Hello all,

Our package did not pass the automagical checks when submitted to CRAN. We think the rejection is a false positive, so we ?reply-all to that message and explain? as following the official instruction. We provided explanation for all notes in that email (replied to cran-submissions at r-project.org<mailto:cran-submissions at r-project.org>) but did not receive any message after 9 days.

I am looking for suggestions on what to do in this case: should we continue waiting for CRAN team?s reply? Or is it necessary to eliminate those notes and then submit the package again?

Below are the notes from CRAN teams' auto-check service and our explanation send to CRAN team:

>Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-x86_64
>Check: CRAN incoming feasibility, Result: NOTE
> Maintainer: 'Arindam RoyChoudhury <arr2014 at med.cornell.edu<mailto:arr2014 at med.cornell.edu>>'

>  New submission

>  Possibly misspelled words in DESCRIPTION:
>    Peng (17:5)
>    Phylogenetics (17:32)
>   al (17:13)
>    et (17:10)

> Size of tarball: 14208488 bytes

Explain:  This is a new submission. These words are not misspelled.

>Flavor: r-devel-windows-x86_64
>Check: examples, Result: NOTE
>  Examples with CPU (user + system) or elapsed time > 10s
>       user system elapsed
>  RDM 40.05   0.89   40.94

Explain:  This is because a large dataset is used in the example. An example with large dataset is necessary, as this package is meant for analyzing large datasets.


>Flavor: r-devel-linux-x86_64-debian-gcc
>Check: examples, Result: NOTE
> Examples with CPU (user + system) or elapsed time > 5s
>      user system elapsed
>  RDM 24.399  0.888  25.289

Explain:  This is because a large dataset is used in the example. An example with large dataset is necessary, as this package is meant for analyzing large datasets.

Any suggestions or comments would be appreciated. Thank you in advance!

Best,
Ying



	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Oct 29 00:02:58 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 28 Oct 2022 15:02:58 -0700
Subject: [R-pkg-devel] 
 Cannot submit package due to false-positive rejection
In-Reply-To: <PH0PR06MB71577805606D3A60DE43B7F2ED329@PH0PR06MB7157.namprd06.prod.outlook.com>
References: <PH0PR06MB71577805606D3A60DE43B7F2ED329@PH0PR06MB7157.namprd06.prod.outlook.com>
Message-ID: <480EF90A-2748-4ECC-BEE6-BBED26B3F23B@dcn.davis.ca.us>

This is definitely not a false positive. Find a way to not run long calcs during the CRAN build. There is no alternative.

One way this can be done is by only running your examples when an environment variable of your choosing exists. Since CRAN machines won't configure that variable, you can get around this hard requirement.

On October 28, 2022 12:48:44 PM PDT, Ying Li via R-package-devel <r-package-devel at r-project.org> wrote:
>Hello all,
>
>Our package did not pass the automagical checks when submitted to CRAN. We think the rejection is a false positive, so we ?reply-all to that message and explain? as following the official instruction. We provided explanation for all notes in that email (replied to cran-submissions at r-project.org<mailto:cran-submissions at r-project.org>) but did not receive any message after 9 days.
>
>I am looking for suggestions on what to do in this case: should we continue waiting for CRAN team?s reply? Or is it necessary to eliminate those notes and then submit the package again?
>
>Below are the notes from CRAN teams' auto-check service and our explanation send to CRAN team:
>
>>Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-x86_64
>>Check: CRAN incoming feasibility, Result: NOTE
>> Maintainer: 'Arindam RoyChoudhury <arr2014 at med.cornell.edu<mailto:arr2014 at med.cornell.edu>>'
>
>>  New submission
>
>>  Possibly misspelled words in DESCRIPTION:
>>    Peng (17:5)
>>    Phylogenetics (17:32)
>>   al (17:13)
>>    et (17:10)
>
>> Size of tarball: 14208488 bytes
>
>Explain:  This is a new submission. These words are not misspelled.
>
>>Flavor: r-devel-windows-x86_64
>>Check: examples, Result: NOTE
>>  Examples with CPU (user + system) or elapsed time > 10s
>>       user system elapsed
>>  RDM 40.05   0.89   40.94
>
>Explain:  This is because a large dataset is used in the example. An example with large dataset is necessary, as this package is meant for analyzing large datasets.
>
>
>>Flavor: r-devel-linux-x86_64-debian-gcc
>>Check: examples, Result: NOTE
>> Examples with CPU (user + system) or elapsed time > 5s
>>      user system elapsed
>>  RDM 24.399  0.888  25.289
>
>Explain:  This is because a large dataset is used in the example. An example with large dataset is necessary, as this package is meant for analyzing large datasets.
>
>Any suggestions or comments would be appreciated. Thank you in advance!
>
>Best,
>Ying
>
>
>
>	[[alternative HTML version deleted]]
>

-- 
Sent from my phone. Please excuse my brevity.


From roy@mende|@@ohn @end|ng |rom no@@@gov  Sat Oct 29 00:21:50 2022
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Fri, 28 Oct 2022 15:21:50 -0700
Subject: [R-pkg-devel] 
 Cannot submit package due to false-positive rejection
In-Reply-To: <480EF90A-2748-4ECC-BEE6-BBED26B3F23B@dcn.davis.ca.us>
References: <PH0PR06MB71577805606D3A60DE43B7F2ED329@PH0PR06MB7157.namprd06.prod.outlook.com>
 <480EF90A-2748-4ECC-BEE6-BBED26B3F23B@dcn.davis.ca.us>
Message-ID: <BD9E5229-424B-44E1-A2B8-E018B5784732@noaa.gov>

I run into this all the time.  The trick is to find a minimal example that the package will work with that shows how to make a call,  and allows for CRAN, especially on new submissions,  to test to some extent that the function works.  For more real-life examples,  write a good vignette that uses the larger dataset,  but remember that the build of the vignette also has a time limit, I think it is 10 minutes but don't quote me on that.

I may mis-state this a little,  but I believe CRAN does a nightly build of the entire environment.  If things take too long,  the build would never finish.  I am certain there are several reasons for doing this,  but one reason is to attempt to insure that all packages work together so that they will work when you install them into your environment.  As compared to another,  unnamed language where even using the package manager I have had to trash the entire environment due to inconsistencies, so packages wouldn't load. Once even after a clean install and an "update all",  several major packages wouldn't load due to inconsistencies.  If that ever has happened in R I don't remember it,  and why I go to the trouble to get my packages into CRAN,  because a lot of users just want things to work when they install the package,  and CRAN helps with that.

HTH,

-Roy



> On Oct 28, 2022, at 3:02 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> 
> This is definitely not a false positive. Find a way to not run long calcs during the CRAN build. There is no alternative.
> 
> One way this can be done is by only running your examples when an environment variable of your choosing exists. Since CRAN machines won't configure that variable, you can get around this hard requirement.
> 
> On October 28, 2022 12:48:44 PM PDT, Ying Li via R-package-devel <r-package-devel at r-project.org> wrote:
>> Hello all,
>> 
>> Our package did not pass the automagical checks when submitted to CRAN. We think the rejection is a false positive, so we ?reply-all to that message and explain? as following the official instruction. We provided explanation for all notes in that email (replied to cran-submissions at r-project.org<mailto:cran-submissions at r-project.org>) but did not receive any message after 9 days.
>> 
>> I am looking for suggestions on what to do in this case: should we continue waiting for CRAN team?s reply? Or is it necessary to eliminate those notes and then submit the package again?
>> 
>> Below are the notes from CRAN teams' auto-check service and our explanation send to CRAN team:
>> 
>>> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-x86_64
>>> Check: CRAN incoming feasibility, Result: NOTE
>>> Maintainer: 'Arindam RoyChoudhury <arr2014 at med.cornell.edu<mailto:arr2014 at med.cornell.edu>>'
>> 
>>> New submission
>> 
>>> Possibly misspelled words in DESCRIPTION:
>>>   Peng (17:5)
>>>   Phylogenetics (17:32)
>>>  al (17:13)
>>>   et (17:10)
>> 
>>> Size of tarball: 14208488 bytes
>> 
>> Explain:  This is a new submission. These words are not misspelled.
>> 
>>> Flavor: r-devel-windows-x86_64
>>> Check: examples, Result: NOTE
>>> Examples with CPU (user + system) or elapsed time > 10s
>>>      user system elapsed
>>> RDM 40.05   0.89   40.94
>> 
>> Explain:  This is because a large dataset is used in the example. An example with large dataset is necessary, as this package is meant for analyzing large datasets.
>> 
>> 
>>> Flavor: r-devel-linux-x86_64-debian-gcc
>>> Check: examples, Result: NOTE
>>> Examples with CPU (user + system) or elapsed time > 5s
>>>     user system elapsed
>>> RDM 24.399  0.888  25.289
>> 
>> Explain:  This is because a large dataset is used in the example. An example with large dataset is necessary, as this package is meant for analyzing large datasets.
>> 
>> Any suggestions or comments would be appreciated. Thank you in advance!
>> 
>> Best,
>> Ying
>> 
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
> 
> -- 
> Sent from my phone. Please excuse my brevity.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From |ent|nj @end|ng |rom @hutt|ethre@d@com  Sat Oct 29 14:14:20 2022
From: |ent|nj @end|ng |rom @hutt|ethre@d@com (Jamie Lentin)
Date: Sat, 29 Oct 2022 13:14:20 +0100
Subject: [R-pkg-devel] 
 Cannot submit package due to false-positive rejection
In-Reply-To: <PH0PR06MB71577805606D3A60DE43B7F2ED329@PH0PR06MB7157.namprd06.prod.outlook.com>
References: <PH0PR06MB71577805606D3A60DE43B7F2ED329@PH0PR06MB7157.namprd06.prod.outlook.com>
Message-ID: <08dfc9afef2668f9016cd62509a0f046@shuttlethread.com>

On 2022-10-28 20:48, Ying Li via R-package-devel wrote:
>> Flavor: r-devel-windows-x86_64
>> Check: examples, Result: NOTE
>>  Examples with CPU (user + system) or elapsed time > 10s
>>       user system elapsed
>>  RDM 40.05   0.89   40.94
> 
> Explain:  This is because a large dataset is used in the example. An
> example with large dataset is necessary, as this package is meant for
> analyzing large datasets.

Wrapping with \donttest{} may help here. Despite the name, CMD check 
--as-cran *will* run these tests, but will not be subject to the same 
time restrictions.

On submission of your package, the examples will be run with and without 
\donttest{}. However, the periodic (daily?) checks that get run skip the 
\donttest{} checks, to keep the CPU time these require manageable, and 
this is what the NOTE is about.

Cheers,


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Sat Oct 29 15:19:08 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Sat, 29 Oct 2022 15:19:08 +0200
Subject: [R-pkg-devel] 
 Cannot submit package due to false-positive rejection
In-Reply-To: <08dfc9afef2668f9016cd62509a0f046@shuttlethread.com>
References: <PH0PR06MB71577805606D3A60DE43B7F2ED329@PH0PR06MB7157.namprd06.prod.outlook.com>
 <08dfc9afef2668f9016cd62509a0f046@shuttlethread.com>
Message-ID: <25437.10316.973300.694494@stat.math.ethz.ch>

>>>>> Jamie Lentin 
>>>>>     on Sat, 29 Oct 2022 13:14:20 +0100 writes:

    > On 2022-10-28 20:48, Ying Li via R-package-devel wrote:
    >>> Flavor: r-devel-windows-x86_64 Check: examples, Result:
    >>> NOTE Examples with CPU (user + system) or elapsed time >
    >>> 10s user system elapsed RDM 40.05 0.89 40.94
    >> 
    >> Explain: This is because a large dataset is used in the
    >> example. An example with large dataset is necessary, as
    >> this package is meant for analyzing large datasets.

    > Wrapping with \donttest{} may help here. Despite the name,
    > CMD check --as-cran *will* run these tests, but will not
    > be subject to the same time restrictions.

    > On submission of your package, the examples will be run
    > with and without \donttest{}. However, the periodic
    > (daily?) checks that get run skip the \donttest{} checks,
    > to keep the CPU time these require manageable, and this is
    > what the NOTE is about.

    > Cheers,

Sorry to be blunt but I think only Roy's is good here:
Make a small data example even though the package is for large
data ... maybe adding a comment about the really large data
example, in a vignette or possibly simply commented out (or \donttest{..}).

Do - by all means - have examples in your code  which run --
also always on CRAN.
\donttest{} or some sneaky tricks to circumenvent CRAN checks
running the example are only cheap workarounds, but not really
good.

Reasons:
- Users new to your package may just want to try a new
  function  via   example(<your_function>)   {or nowadays also
  clicking "Run example" in some setups}

  I do tend to misttrust (or worse) packages which do nothing in
  a such case.

- When we, as R Core, consider tweaking / changing R we do
  sometimes in advance and the CRAN processes do very regularly
  run all the checks of all CRAN with "R-devel", the development
  version and hence potential "next version" of R.
  Your package's example will be run (if they are ..!) and you
  as package author may be notified well in advance should the
  examples stop running.


With regards,
Martin


From r m@iii@g oii @be@@@ch  Sun Oct 30 14:48:05 2022
From: r m@iii@g oii @be@@@ch (r m@iii@g oii @be@@@ch)
Date: Sun, 30 Oct 2022 14:48:05 +0100
Subject: [R-pkg-devel] Latex issue on CRAN: Package pdftex.def Error
Message-ID: <C6BE8AAE-92A0-4FD4-9224-C316E1D60314@nbenn.ch>

Dear list

Trying to push a fix to CRAN, I?m now running into a Latex issue. I can neither relate the issue I?m trying to resolve, nor my fix, to this new problem, so I?m a bit lost (and slightly frustrated).

I cannot reproduce this specific issue anywhere, neither locally (macOS), nor on win devel, r-hub and Github (there are some other issues on Gh and r-hub, but I don?t believe them to be relevant here).

All I have to go on is:

- A WARNING in ?checking PDF version of manual?: LaTeX errors found: ! Package pdftex.def Error: File `...' not found: using draft setting.
- An ERROR in ?checking PDF version of manual without index?
- A NOTE in ?checking for non-standard things in the check directory?: Found the following files/directories: ?...-manual.tex?

It seems like when building the PDF manual, an image that should be included is not found and then things fall apart, causing both the error and note. For all I know, the image should be there unter `man/figures/`.

The problem is showing up in the same way for both ?Windows? and ?Debian? (with slightly different notes due to intermediate files not being cleaned up properly).

Have there been and Latex-related changes to CRAN recently? Are others seeing similar problems? Any ideas what could be causing this?

For completeness: https://win-builder.r-project.org/incoming_pretest/ricu_0.5.4_20221030_131320/

Best,
Nicolas 


	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Sun Oct 30 15:00:05 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sun, 30 Oct 2022 17:00:05 +0300
Subject: [R-pkg-devel] Latex issue on CRAN: Package pdftex.def Error
In-Reply-To: <C6BE8AAE-92A0-4FD4-9224-C316E1D60314@nbenn.ch>
References: <C6BE8AAE-92A0-4FD4-9224-C316E1D60314@nbenn.ch>
Message-ID: <20221030170005.41ef0b2f@Tarkus>

? Sun, 30 Oct 2022 14:48:05 +0100
r at nbenn.ch ?????:

> It seems like when building the PDF manual, an image that should be
> included is not found and then things fall apart, causing both the
> error and note. For all I know, the image should be there unter
> `man/figures/`.

Is it the following change?

https://github.com/eth-mds/ricu/commit/b4ac31a2cc22da236e56ce9875b2d799ae172d46

The updated Rd file now says "\figure{man/figures/sofa-sep-3-1.png}".
According to WRE 2.7, paths to the figures should be specified relative
to man/figures. In other words, in order to reference
man/figures/sofa-sep-3-1.png, use \figure{sofa-sep-3-1.png}.

-- 
Best regards,
Ivan


From cont@ct @end|ng |rom @te|@n@ngr|ck@net  Sun Oct 30 08:56:03 2022
From: cont@ct @end|ng |rom @te|@n@ngr|ck@net (Stefan Angrick)
Date: Sun, 30 Oct 2022 16:56:03 +0900
Subject: [R-pkg-devel] Best way to restore an archived CRAN package
Message-ID: <d01a36ff-d779-41cc-b3b7-df2414d8cbaf@app.fastmail.com>

Hi,

I'm looking for advice on how to resurrect an archived R package.

I have a couple of scripts that rely on the CC0-licensed BIS package (https://cran.r-project.org/package=BIS) which downloads and parses data from the Bank for International Settlements. The package was archived in 2021, presumably because the format of the source data changed which I imagine caused examples to fail. Writing code to digest the new data format is straightforward, so I'd like to bring the package back. Unfortunately I'm unable to reach the original author, so I'm unsure how to proceed.

Does CRAN allow for people other than the original author to bring back a package? Or would it be preferable to create a new package with a new name? In either case, how would the original package author be acknowledged?

Thanks,
Stefan


From kry|ov@r00t @end|ng |rom gm@||@com  Sun Oct 30 15:58:03 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sun, 30 Oct 2022 17:58:03 +0300
Subject: [R-pkg-devel] Best way to restore an archived CRAN package
In-Reply-To: <d01a36ff-d779-41cc-b3b7-df2414d8cbaf@app.fastmail.com>
References: <d01a36ff-d779-41cc-b3b7-df2414d8cbaf@app.fastmail.com>
Message-ID: <20221030175803.4106533d@Tarkus>

? Sun, 30 Oct 2022 16:56:03 +0900
"Stefan Angrick" <contact at stefanangrick.net> ?????:

> Writing code to digest the new data format is straightforward, so I'd
> like to bring the package back. Unfortunately I'm unable to reach the
> original author, so I'm unsure how to proceed.
> 
> Does CRAN allow for people other than the original author to bring
> back a package?

According to the CRAN policy [*], it should be possible to submit the
fixed package under the original name with an explanation that the
previous maintainer is unavailable:

>> Explain any change in the maintainer?s email address and if possible
>> send confirmation from the previous address (by a separate email to
>> CRAN-submissions at R-project.org) or explain why it is not possible.

Disclaimer: I've never done this myself.

For the record, the author's GitHub and Twitter accounts are trivial to
find; there is a bit of activity in the former (only once in 2022), and
the last update in the latter was in 2020.

> In either case, how would the original package author be acknowledged?

Make sure to mention Eric Persson in the Authors: field of the
DESCRIPTION file as a full author, but not the maintainer.

You will also need to make sure that the examples never crash, even if
there's no connection to the Internet, which may have been part of the
original reason the package had been archived.

-- 
Best regards,
Ivan

[*] https://cran.r-project.org/web/packages/policies.html


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Oct 31 16:59:24 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 31 Oct 2022 16:59:24 +0100
Subject: [R-pkg-devel] 
 Cannot submit package due to false-positive rejection
In-Reply-To: <08dfc9afef2668f9016cd62509a0f046@shuttlethread.com>
References: <PH0PR06MB71577805606D3A60DE43B7F2ED329@PH0PR06MB7157.namprd06.prod.outlook.com>
 <08dfc9afef2668f9016cd62509a0f046@shuttlethread.com>
Message-ID: <55bab65a-62b9-6115-6a4d-0b35ece1e5fa@statistik.tu-dortmund.de>



On 29.10.2022 14:14, Jamie Lentin wrote:
> On 2022-10-28 20:48, Ying Li via R-package-devel wrote:
>>> Flavor: r-devel-windows-x86_64
>>> Check: examples, Result: NOTE
>>> ?Examples with CPU (user + system) or elapsed time > 10s
>>> ????? user system elapsed
>>> ?RDM 40.05?? 0.89?? 40.94
>>
>> Explain:? This is because a large dataset is used in the example. An
>> example with large dataset is necessary, as this package is meant for
>> analyzing large datasets.
> 
> Wrapping with \donttest{} may help here. Despite the name, CMD check 
> --as-cran *will* run these tests, but will not be subject to the same 
> time restrictions.

Well, we run these on CRAN from time to time, but R CMD check --as-cran 
does not run them.

I dom not believe you need a large data frame for the examples: The 
exanmples are intended to show users how you call the function and pass 
the arguments. You do not need to demonstrate that you can run it on 
huge data, as your users don't want to wait for hours in order to see 
the principles of the function call ....

Best,
Uwe Ligges


> 
> On submission of your package, the examples will be run with and without 
> \donttest{}. However, the periodic (daily?) checks that get run skip the 
> \donttest{} checks, to keep the CPU time these require manageable, and 
> this is what the NOTE is about.
> 
> Cheers,
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @kw@|mmo @end|ng |rom gm@||@com  Fri Nov  4 02:09:42 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Thu, 3 Nov 2022 21:09:42 -0400
Subject: [R-pkg-devel] Compiled code should not call non-API entry points in
 R
Message-ID: <CAPcHnpTdWg4H8a0n3emLBJgdHVZQBVW+BPi75wV4iX-GnNfm8w@mail.gmail.com>

Hi everyone,


I had some R code for dealing with connections, and I was using
summary.connection(). I rewrote it in C, so I was doing something more
like:

#include <R_ext/Connections.h>

Rconnection Rcon = R_GetConnection(file);
Rcon->description or Rcon->class

but now, when checking my package, I get the following note:

* checking compiled code ... NOTE
File 'this.path/libs/x64/this.path.dll':
  Found non-API call to R: 'R_GetConnection'

Compiled code should not call non-API entry points in R.

See 'Writing portable packages' in the 'Writing R Extensions' manual.

This isn't surprising, <R_ext/Connections.h> (seen here:
https://github.com/wch/r-source/blob/50ff41b742a1ac655314be5e25897a12d3096661/src/include/R_ext/Connections.h#L21)
says that it is not part of the R API, and later on says that it is
subject to change without notice or backwards compatibility.

R_GetConnection was added in R 3.3.0, so I added "Depends: R (>=
3.3.0)" to my DESCRIPTION, then I added something like this to my
header:

#if !defined(R_CONNECTIONS_VERSION)
    #error why is R_CONNECTIONS_VERSION not defined????
#elif R_CONNECTIONS_VERSION == 1
    extern Rconnection R_GetConnection(SEXP sConn);
#else
    #error this.path is only implemented for R_CONNECTIONS_VERSION 1
#endif

but the NOTE still remains. I think I've taken all the precautions I
can, is there anything more I can do? Will I be unable to submit the
update for my package? Will the CRAN team ignore the NOTE if I explain
the precautions I added?


From edd @end|ng |rom deb|@n@org  Fri Nov  4 02:44:07 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 3 Nov 2022 20:44:07 -0500
Subject: [R-pkg-devel] 
 Compiled code should not call non-API entry points in R
In-Reply-To: <CAPcHnpTdWg4H8a0n3emLBJgdHVZQBVW+BPi75wV4iX-GnNfm8w@mail.gmail.com>
References: <CAPcHnpTdWg4H8a0n3emLBJgdHVZQBVW+BPi75wV4iX-GnNfm8w@mail.gmail.com>
Message-ID: <25444.28263.410340.140167@rob.eddelbuettel.com>


On 3 November 2022 at 21:09, Andrew Simmons wrote:
| I had some R code for dealing with connections, and I was using
| summary.connection(). I rewrote it in C, so I was doing something more
| like:
| 
| #include <R_ext/Connections.h>
| 
| Rconnection Rcon = R_GetConnection(file);
| Rcon->description or Rcon->class
| 
| but now, when checking my package, I get the following note:
| 
| * checking compiled code ... NOTE
| File 'this.path/libs/x64/this.path.dll':
|   Found non-API call to R: 'R_GetConnection'
| 
| Compiled code should not call non-API entry points in R.
| 
| See 'Writing portable packages' in the 'Writing R Extensions' manual.
| 
| This isn't surprising, <R_ext/Connections.h> (seen here:
| https://github.com/wch/r-source/blob/50ff41b742a1ac655314be5e25897a12d3096661/src/include/R_ext/Connections.h#L21)
| says that it is not part of the R API, and later on says that it is
| subject to change without notice or backwards compatibility.
| 
| R_GetConnection was added in R 3.3.0, so I added "Depends: R (>=
| 3.3.0)" to my DESCRIPTION, then I added something like this to my
| header:
| 
| #if !defined(R_CONNECTIONS_VERSION)
|     #error why is R_CONNECTIONS_VERSION not defined????
| #elif R_CONNECTIONS_VERSION == 1
|     extern Rconnection R_GetConnection(SEXP sConn);
| #else
|     #error this.path is only implemented for R_CONNECTIONS_VERSION 1
| #endif
| 
| but the NOTE still remains. I think I've taken all the precautions I
| can, is there anything more I can do? Will I be unable to submit the
| update for my package? Will the CRAN team ignore the NOTE if I explain
| the precautions I added?

The R API is owned by R Core. So they can do as they please.

And so they do as they are acutely aware of the cost of maintaining an
'enlarged surface'. And they try to keep it small. Understandably so.

Some of us package developers have asked for more interfaces. Repeatedly so
for connections for what is (likely already, else soon) twenty years. Alas...

Then there is https://en.wikipedia.org/wiki/Fundamental_theorem_of_software_engineering
so eventually we run out of patience.

Hence, as both trial baloons as well as intial use case I published two packages
  RApiDatetime    exposing some unexported datetime conversion
  RApiSerialize   exposing some (basic) connections facilities

RApiSerialize really owes a Thank You! to RhpcBLASctl as Junji and Ei-ji
showed me the way of what one could do here.

Now, do I think these packages are the best answer? Far from it. Vendoring,
as done here, casts existing interfaces (and behavior) in conrete. It is less
than ideal. The code can atrophy. But it provides access when those who own
the access refuse to provide it (for what remain defensible reasons).

All told, not ideal either way. But venues for workarounds exist. So
sometimes they are taken. Because we can. Just look for the least-evil way.

Dirk
 

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ||oruppr @end|ng |rom gm@||@com  Fri Nov  4 12:15:36 2022
From: ||oruppr @end|ng |rom gm@||@com (Florian Rupprecht)
Date: Fri, 4 Nov 2022 12:15:36 +0100
Subject: [R-pkg-devel] 
 Compiled code should not call non-API entry points in R
In-Reply-To: <CAPcHnpTdWg4H8a0n3emLBJgdHVZQBVW+BPi75wV4iX-GnNfm8w@mail.gmail.com>
References: <CAPcHnpTdWg4H8a0n3emLBJgdHVZQBVW+BPi75wV4iX-GnNfm8w@mail.gmail.com>
Message-ID: <CAHTZEhD1KFHvqtCrERQZbVPXWZ6B-=fAwrZ6hasc4N17M427-g@mail.gmail.com>

When a public C interface is missing you could always load and call the R
interface.

Definitely slower, but the API will be more stable than when vendoring (and
CRAN will be happier).

Best,
Florian



On Fri, Nov 4, 2022, 02:10 Andrew Simmons <akwsimmo at gmail.com> wrote:

> Hi everyone,
>
>
> I had some R code for dealing with connections, and I was using
> summary.connection(). I rewrote it in C, so I was doing something more
> like:
>
> #include <R_ext/Connections.h>
>
> Rconnection Rcon = R_GetConnection(file);
> Rcon->description or Rcon->class
>
> but now, when checking my package, I get the following note:
>
> * checking compiled code ... NOTE
> File 'this.path/libs/x64/this.path.dll':
>   Found non-API call to R: 'R_GetConnection'
>
> Compiled code should not call non-API entry points in R.
>
> See 'Writing portable packages' in the 'Writing R Extensions' manual.
>
> This isn't surprising, <R_ext/Connections.h> (seen here:
>
> https://github.com/wch/r-source/blob/50ff41b742a1ac655314be5e25897a12d3096661/src/include/R_ext/Connections.h#L21
> )
> says that it is not part of the R API, and later on says that it is
> subject to change without notice or backwards compatibility.
>
> R_GetConnection was added in R 3.3.0, so I added "Depends: R (>=
> 3.3.0)" to my DESCRIPTION, then I added something like this to my
> header:
>
> #if !defined(R_CONNECTIONS_VERSION)
>     #error why is R_CONNECTIONS_VERSION not defined????
> #elif R_CONNECTIONS_VERSION == 1
>     extern Rconnection R_GetConnection(SEXP sConn);
> #else
>     #error this.path is only implemented for R_CONNECTIONS_VERSION 1
> #endif
>
> but the NOTE still remains. I think I've taken all the precautions I
> can, is there anything more I can do? Will I be unable to submit the
> update for my package? Will the CRAN team ignore the NOTE if I explain
> the precautions I added?
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From jm@yu@n @end|ng |rom out|ook@com  Sat Nov  5 15:41:45 2022
From: jm@yu@n @end|ng |rom out|ook@com (Jiaming Yuan)
Date: Sat, 5 Nov 2022 22:41:45 +0800
Subject: [R-pkg-devel] Examples with CPU time is greater than elapsed time.
Message-ID: <OS3P286MB085027CB079AAE4DF4FE7FAAF63A9@OS3P286MB0850.JPNP286.PROD.OUTLOOK.COM>

Hi all,

I tried to submit an update to the xgboost package but didn't pass the 
pre-tests with the following note (solved the other one, but this one is 
a bit confusing):

```
Flavor: r-devel-linux-x86_64-debian-gcc
Check: examples, Result: NOTE
   Examples with CPU time > 2.5 times elapsed time
                        user system elapsed ratio
   cb.gblinear.history 1.454  0.017    0.49 3.002

```

I can't reproduce the note on win-builder: 
https://win-builder.r-project.org/ as it's running on Windows but the 
note appears on debian tests. I'm not able to reproduce it on my local 
machine either with Ubuntu 22.04. I'm wondering what the note is trying 
to tell me and how can I resolve it with confidence.


The full log is here: 
https://win-builder.r-project.org/incoming_pretest/xgboost_1.7.1.1_20221104_194252/Debian/00check.log 
.


Many thanks!

Jiaming


From henr|k@bengt@@on @end|ng |rom gm@||@com  Sat Nov  5 19:22:52 2022
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Sat, 5 Nov 2022 11:22:52 -0700
Subject: [R-pkg-devel] 
 Examples with CPU time is greater than elapsed time.
In-Reply-To: <OS3P286MB085027CB079AAE4DF4FE7FAAF63A9@OS3P286MB0850.JPNP286.PROD.OUTLOOK.COM>
References: <OS3P286MB085027CB079AAE4DF4FE7FAAF63A9@OS3P286MB0850.JPNP286.PROD.OUTLOOK.COM>
Message-ID: <CAFDcVCS2LHT9a9Q07E4tOqxE8TTGuXZ4NPpUv+S715gF2G6=ZQ@mail.gmail.com>

I think it's because it suggests that the package uses more than 250%
of CPU load on average, which suggests it runs in parallel with more
than two parallel workers, which is the upper limit in the CRAN
Policies (https://cran.r-project.org/web/packages/policies.html);

"If running a package uses multiple threads/cores it must never use
more than two simultaneously: the check farm is a shared resource and
will typically be running many checks simultaneously. "

>From the R Internals
(https://cran.r-project.org/doc/manuals/r-release/R-ints.html):

"_R_CHECK_EXAMPLE_TIMING_CPU_TO_ELAPSED_THRESHOLD_: For checks with
timings enabled, report examples where the ratio of CPU time to
elapsed time exceeds this threshold (and the CPU time is at least one
second). This can help detect the simultaneous use of multiple CPU
cores. Default: NA."

It looks like CRAN incoming sets
_R_CHECK_EXAMPLE_TIMING_CPU_TO_ELAPSED_THRESHOLD_=2.5.

If multi-threading is involved, I guess you need to make sure to limit
it to ~2 parallel threads.

/Henrik

On Sat, Nov 5, 2022 at 11:10 AM Jiaming Yuan <jm.yuan at outlook.com> wrote:
>
> Hi all,
>
> I tried to submit an update to the xgboost package but didn't pass the
> pre-tests with the following note (solved the other one, but this one is
> a bit confusing):
>
> ```
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: examples, Result: NOTE
>    Examples with CPU time > 2.5 times elapsed time
>                         user system elapsed ratio
>    cb.gblinear.history 1.454  0.017    0.49 3.002
>
> ```
>
> I can't reproduce the note on win-builder:
> https://win-builder.r-project.org/ as it's running on Windows but the
> note appears on debian tests. I'm not able to reproduce it on my local
> machine either with Ubuntu 22.04. I'm wondering what the note is trying
> to tell me and how can I resolve it with confidence.
>
>
> The full log is here:
> https://win-builder.r-project.org/incoming_pretest/xgboost_1.7.1.1_20221104_194252/Debian/00check.log
> .
>
>
> Many thanks!
>
> Jiaming
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From kry|ov@r00t @end|ng |rom gm@||@com  Sat Nov  5 19:30:28 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sat, 5 Nov 2022 21:30:28 +0300
Subject: [R-pkg-devel] 
 Examples with CPU time is greater than elapsed time.
In-Reply-To: <OS3P286MB085027CB079AAE4DF4FE7FAAF63A9@OS3P286MB0850.JPNP286.PROD.OUTLOOK.COM>
References: <OS3P286MB085027CB079AAE4DF4FE7FAAF63A9@OS3P286MB0850.JPNP286.PROD.OUTLOOK.COM>
Message-ID: <20221105213028.10861c68@Tarkus>

On Sat, 5 Nov 2022 22:41:45 +0800
Jiaming Yuan <jm.yuan at outlook.com> wrote:

>    Examples with CPU time > 2.5 times elapsed time

> I'm wondering what the note is trying to tell me and how can I
> resolve it with confidence.

Henrik Bengtsson already gave a good explanation of the problem.

Not sure what exactly is the right thing to do, but one way to get rid
of this warning could be to pass the argument nthread =
min(parallel::detectCores(), 2) to the xgb.cv invocation (if you
already use the parallel package anywhere) or maybe to hard-code the
use of only one thread in the example.

-- 
Best regards,
Ivan


From d@v|dhughjone@ @end|ng |rom gm@||@com  Sat Nov  5 20:32:29 2022
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Sat, 5 Nov 2022 19:32:29 +0000
Subject: [R-pkg-devel] Writing to users config directory for CRAN package
Message-ID: <CAARY7kiaUcEpf3h3eCbA=cOZaDJCsY-s-YqWScz4DTALu9eC3Q@mail.gmail.com>

Hi,

I'm considering submitting the package onetime (
https://github.com/hughjonesd/onetime/) to CRAN.

Onetime has functions for showing a message or warning only once (ever per
user). It does this by writing to a file in the user's configuration
directory, as reported by rappdirs::user_config_dir().

I know that CRAN has rules about not writing to the user's file system
without permission. What would be an appropriate way to do this? For
example, the function onetime_message_confirm() prints a message and then
asks "Show this again?[yN]" Would a "no" count as permission to write the
file?

Cheers,
David

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Sat Nov  5 21:29:20 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 5 Nov 2022 15:29:20 -0500
Subject: [R-pkg-devel] 
 Writing to users config directory for CRAN package
In-Reply-To: <CAARY7kiaUcEpf3h3eCbA=cOZaDJCsY-s-YqWScz4DTALu9eC3Q@mail.gmail.com>
References: <CAARY7kiaUcEpf3h3eCbA=cOZaDJCsY-s-YqWScz4DTALu9eC3Q@mail.gmail.com>
Message-ID: <25446.51104.360520.856815@rob.eddelbuettel.com>


On 5 November 2022 at 19:32, David Hugh-Jones wrote:
| I'm considering submitting the package onetime (
| https://github.com/hughjonesd/onetime/) to CRAN.
| 
| Onetime has functions for showing a message or warning only once (ever per
| user). It does this by writing to a file in the user's configuration
| directory, as reported by rappdirs::user_config_dir().

There is a base R function tools::R_user_dir() which I use in a few packages
along with packageName() to store config information across sessions. A quick
search at GitHub's 'cran' org mirroring CRAN finds 110 hits:

   https://github.com/search?q=org%3Acran+R_user_dir&type=code

You could keep a hashmap in that directory, and maybe (before it has been
written a first time) alert the user that you cannot write without (initial)
permission.  As I recall, the idea behind the (sensible) CRAN Policy is to
not litter user directories with random files with the user knowing.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From jm@yu@n @end|ng |rom out|ook@com  Sat Nov  5 22:03:55 2022
From: jm@yu@n @end|ng |rom out|ook@com (Jiaming Yuan)
Date: Sun, 6 Nov 2022 05:03:55 +0800
Subject: [R-pkg-devel] 
 Examples with CPU time is greater than elapsed time.
In-Reply-To: <CAFDcVCS2LHT9a9Q07E4tOqxE8TTGuXZ4NPpUv+S715gF2G6=ZQ@mail.gmail.com>
References: <OS3P286MB085027CB079AAE4DF4FE7FAAF63A9@OS3P286MB0850.JPNP286.PROD.OUTLOOK.COM>
 <CAFDcVCS2LHT9a9Q07E4tOqxE8TTGuXZ4NPpUv+S715gF2G6=ZQ@mail.gmail.com>
Message-ID: <TYCP286MB08635B2EDE4411360B339052F63A9@TYCP286MB0863.JPNP286.PROD.OUTLOOK.COM>

Thank you for the detailed explanation, that's really helpful!

On 11/6/22 02:22, Henrik Bengtsson wrote:
> I think it's because it suggests that the package uses more than 250%
> of CPU load on average, which suggests it runs in parallel with more
> than two parallel workers, which is the upper limit in the CRAN
> Policies (https://cran.r-project.org/web/packages/policies.html);
>
> "If running a package uses multiple threads/cores it must never use
> more than two simultaneously: the check farm is a shared resource and
> will typically be running many checks simultaneously. "
>
>  From the R Internals
> (https://cran.r-project.org/doc/manuals/r-release/R-ints.html):
>
> "_R_CHECK_EXAMPLE_TIMING_CPU_TO_ELAPSED_THRESHOLD_: For checks with
> timings enabled, report examples where the ratio of CPU time to
> elapsed time exceeds this threshold (and the CPU time is at least one
> second). This can help detect the simultaneous use of multiple CPU
> cores. Default: NA."
>
> It looks like CRAN incoming sets
> _R_CHECK_EXAMPLE_TIMING_CPU_TO_ELAPSED_THRESHOLD_=2.5.
>
> If multi-threading is involved, I guess you need to make sure to limit
> it to ~2 parallel threads.
>
> /Henrik
>
> On Sat, Nov 5, 2022 at 11:10 AM Jiaming Yuan <jm.yuan at outlook.com> wrote:
>> Hi all,
>>
>> I tried to submit an update to the xgboost package but didn't pass the
>> pre-tests with the following note (solved the other one, but this one is
>> a bit confusing):
>>
>> ```
>> Flavor: r-devel-linux-x86_64-debian-gcc
>> Check: examples, Result: NOTE
>>     Examples with CPU time > 2.5 times elapsed time
>>                          user system elapsed ratio
>>     cb.gblinear.history 1.454  0.017    0.49 3.002
>>
>> ```
>>
>> I can't reproduce the note on win-builder:
>> https://win-builder.r-project.org/ as it's running on Windows but the
>> note appears on debian tests. I'm not able to reproduce it on my local
>> machine either with Ubuntu 22.04. I'm wondering what the note is trying
>> to tell me and how can I resolve it with confidence.
>>
>>
>> The full log is here:
>> https://win-builder.r-project.org/incoming_pretest/xgboost_1.7.1.1_20221104_194252/Debian/00check.log
>> .
>>
>>
>> Many thanks!
>>
>> Jiaming
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jm@yu@n @end|ng |rom out|ook@com  Sat Nov  5 22:07:49 2022
From: jm@yu@n @end|ng |rom out|ook@com (Jiaming Yuan)
Date: Sun, 6 Nov 2022 05:07:49 +0800
Subject: [R-pkg-devel] 
 Examples with CPU time is greater than elapsed time.
In-Reply-To: <20221105213028.10861c68@Tarkus>
References: <OS3P286MB085027CB079AAE4DF4FE7FAAF63A9@OS3P286MB0850.JPNP286.PROD.OUTLOOK.COM>
 <20221105213028.10861c68@Tarkus>
Message-ID: <TYCP286MB0863F129E32B83DCC3C9AA3EF63A9@TYCP286MB0863.JPNP286.PROD.OUTLOOK.COM>

Thank you for the suggestions! I think I will hard-code the number of 
threads to 2 in that specific example.

On 11/6/22 02:30, Ivan Krylov wrote:
> On Sat, 5 Nov 2022 22:41:45 +0800
> Jiaming Yuan <jm.yuan at outlook.com> wrote:
>
>>     Examples with CPU time > 2.5 times elapsed time
>> I'm wondering what the note is trying to tell me and how can I
>> resolve it with confidence.
> Henrik Bengtsson already gave a good explanation of the problem.
>
> Not sure what exactly is the right thing to do, but one way to get rid
> of this warning could be to pass the argument nthread =
> min(parallel::detectCores(), 2) to the xgb.cv invocation (if you
> already use the parallel package anywhere) or maybe to hard-code the
> use of only one thread in the example.
>


From A@J@God|rey @end|ng |rom m@@@ey@@c@nz  Sun Nov  6 07:32:55 2022
From: A@J@God|rey @end|ng |rom m@@@ey@@c@nz (Jonathan Godfrey)
Date: Sun, 6 Nov 2022 06:32:55 +0000
Subject: [R-pkg-devel] FW: Writing to users config directory for CRAN package
In-Reply-To: <MEAPR01MB3829B8B0F7F587BB4BB2BF5E933D9@MEAPR01MB3829.ausprd01.prod.outlook.com>
References: <CAARY7kiaUcEpf3h3eCbA=cOZaDJCsY-s-YqWScz4DTALu9eC3Q@mail.gmail.com>
 <25446.51104.360520.856815@rob.eddelbuettel.com>
 <MEAPR01MB3829B8B0F7F587BB4BB2BF5E933D9@MEAPR01MB3829.ausprd01.prod.outlook.com>
Message-ID: <MEAPR01MB382908AB14EE517DF0FDC7AA933D9@MEAPR01MB3829.ausprd01.prod.outlook.com>


Further to Dirk's advice, my BrailleR package creates a folder (dumping ground). Users are asked if they want to use  one of my choosing, or a temporary one. If they choose temporary, they get asked again and again until they cave in to my wishes!


BrailleR also writes files to the current working directory, but these are done because the user has chosen to run a command that has the purpose of creating files. I put a warning in the documentation for such functions.

I'm not suggesting my solution is the gold standard, but it is working well enough to keep the CRAN checkers happy.

Jonathan


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Dirk Eddelbuettel
Sent: Sunday, 6 November 2022 9:29 am
To: David Hugh-Jones <davidhughjones at gmail.com>
Cc: R package devel <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Writing to users config directory for CRAN package


On 5 November 2022 at 19:32, David Hugh-Jones wrote:
| I'm considering submitting the package onetime (
| https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fhughjonesd%2Fonetime%2F&amp;data=05%7C01%7Ca.j.godfrey%40massey.ac.nz%7C33d5f70186284052580908dabf6c7826%7C388728e1bbd0437898dcf8682e644300%7C1%7C0%7C638032769864581576%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=EbBh9XCyyKsRTACo7eLxASZW3pm%2BTrXxzKjjnxBa%2Fpo%3D&amp;reserved=0) to CRAN.
| 
| Onetime has functions for showing a message or warning only once (ever 
| per user). It does this by writing to a file in the user's 
| configuration directory, as reported by rappdirs::user_config_dir().

There is a base R function tools::R_user_dir() which I use in a few packages along with packageName() to store config information across sessions. A quick search at GitHub's 'cran' org mirroring CRAN finds 110 hits:

   https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fsearch%3Fq%3Dorg%253Acran%2BR_user_dir%26type%3Dcode&amp;data=05%7C01%7Ca.j.godfrey%40massey.ac.nz%7C33d5f70186284052580908dabf6c7826%7C388728e1bbd0437898dcf8682e644300%7C1%7C0%7C638032769864737810%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=Wlqbm0tZX0h25rm0veh%2F15IAwJ5mqP9VNPUovlaPhdY%3D&amp;reserved=0

You could keep a hashmap in that directory, and maybe (before it has been written a first time) alert the user that you cannot write without (initial) permission.  As I recall, the idea behind the (sensible) CRAN Policy is to not litter user directories with random files with the user knowing.

Dirk

--
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

______________________________________________
R-package-devel at r-project.org mailing list
https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=05%7C01%7Ca.j.godfrey%40massey.ac.nz%7C33d5f70186284052580908dabf6c7826%7C388728e1bbd0437898dcf8682e644300%7C1%7C0%7C638032769864737810%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=kB8nHrtC5yGEm4tnOTZDOAGT%2FmtDViGblNvieFlZq7g%3D&amp;reserved=0


From d@v|dhughjone@ @end|ng |rom gm@||@com  Sun Nov  6 07:41:08 2022
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Sun, 6 Nov 2022 06:41:08 +0000
Subject: [R-pkg-devel] FW: Writing to users config directory for CRAN
 package
In-Reply-To: <MEAPR01MB382908AB14EE517DF0FDC7AA933D9@MEAPR01MB3829.ausprd01.prod.outlook.com>
References: <CAARY7kiaUcEpf3h3eCbA=cOZaDJCsY-s-YqWScz4DTALu9eC3Q@mail.gmail.com>
 <25446.51104.360520.856815@rob.eddelbuettel.com>
 <MEAPR01MB3829B8B0F7F587BB4BB2BF5E933D9@MEAPR01MB3829.ausprd01.prod.outlook.com>
 <MEAPR01MB382908AB14EE517DF0FDC7AA933D9@MEAPR01MB3829.ausprd01.prod.outlook.com>
Message-ID: <CAARY7kjUR4y59_wrgZBgsKmJYhHaYxcK3A=sf=FnYkAhG_yuHQ@mail.gmail.com>

Thank you both. I guess the package can dog food itself by asking one time
whether it can store its files.
D



On Sun, 6 Nov 2022 at 06:33, Jonathan Godfrey <A.J.Godfrey at massey.ac.nz>
wrote:

>
> Further to Dirk's advice, my BrailleR package creates a folder (dumping
> ground). Users are asked if they want to use  one of my choosing, or a
> temporary one. If they choose temporary, they get asked again and again
> until they cave in to my wishes!
>
>
> BrailleR also writes files to the current working directory, but these are
> done because the user has chosen to run a command that has the purpose of
> creating files. I put a warning in the documentation for such functions.
>
> I'm not suggesting my solution is the gold standard, but it is working
> well enough to keep the CRAN checkers happy.
>
> Jonathan
>
>
> -----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf
> Of Dirk Eddelbuettel
> Sent: Sunday, 6 November 2022 9:29 am
> To: David Hugh-Jones <davidhughjones at gmail.com>
> Cc: R package devel <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Writing to users config directory for CRAN
> package
>
>
> On 5 November 2022 at 19:32, David Hugh-Jones wrote:
> | I'm considering submitting the package onetime (
> |
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fhughjonesd%2Fonetime%2F&amp;data=05%7C01%7Ca.j.godfrey%40massey.ac.nz%7C33d5f70186284052580908dabf6c7826%7C388728e1bbd0437898dcf8682e644300%7C1%7C0%7C638032769864581576%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=EbBh9XCyyKsRTACo7eLxASZW3pm%2BTrXxzKjjnxBa%2Fpo%3D&amp;reserved=0)
> to CRAN.
> |
> | Onetime has functions for showing a message or warning only once (ever
> | per user). It does this by writing to a file in the user's
> | configuration directory, as reported by rappdirs::user_config_dir().
>
> There is a base R function tools::R_user_dir() which I use in a few
> packages along with packageName() to store config information across
> sessions. A quick search at GitHub's 'cran' org mirroring CRAN finds 110
> hits:
>
>
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fsearch%3Fq%3Dorg%253Acran%2BR_user_dir%26type%3Dcode&amp;data=05%7C01%7Ca.j.godfrey%40massey.ac.nz%7C33d5f70186284052580908dabf6c7826%7C388728e1bbd0437898dcf8682e644300%7C1%7C0%7C638032769864737810%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=Wlqbm0tZX0h25rm0veh%2F15IAwJ5mqP9VNPUovlaPhdY%3D&amp;reserved=0
>
> You could keep a hashmap in that directory, and maybe (before it has been
> written a first time) alert the user that you cannot write without
> (initial) permission.  As I recall, the idea behind the (sensible) CRAN
> Policy is to not litter user directories with random files with the user
> knowing.
>
> Dirk
>
> --
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
>
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=05%7C01%7Ca.j.godfrey%40massey.ac.nz%7C33d5f70186284052580908dabf6c7826%7C388728e1bbd0437898dcf8682e644300%7C1%7C0%7C638032769864737810%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=kB8nHrtC5yGEm4tnOTZDOAGT%2FmtDViGblNvieFlZq7g%3D&amp;reserved=0
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
-- 
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From hj@h@jee@h @end|ng |rom utm@@c@mu  Mon Nov  7 09:30:35 2022
From: hj@h@jee@h @end|ng |rom utm@@c@mu (Jahajeeah, Havisha)
Date: Mon, 7 Nov 2022 12:30:35 +0400
Subject: [R-pkg-devel] Error uploading file on CRAN
Message-ID: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>

Dear CRAN team,

The package 'Greymodels' has just been published on CRAN. After loading the
package on CRAN, when I try to upload file (xlsx or xls)
the following error appears:

Error: cannot open the connection

What could be the problem? Is it because of the working directory?

Please advise on how to fix this.

Many thanks,
Havisha Jahajeeah

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Nov  7 11:13:02 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 7 Nov 2022 13:13:02 +0300
Subject: [R-pkg-devel] Error uploading file on CRAN
In-Reply-To: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
References: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
Message-ID: <20221107131302.6faf0aa4@arachnoid>

? Mon, 7 Nov 2022 12:30:35 +0400
"Jahajeeah, Havisha" <hjahajeeah at utm.ac.mu> ?????:

> After loading the package on CRAN, when I try to upload file (xlsx or
> xls) the following error appears:
> 
> Error: cannot open the connection

Do you mean uploading files into your Shiny application, or somewhere
else?

Have you tried following this guide?
https://shiny.rstudio.com/articles/debugging.html

-- 
Best regards,
Ivan


From hj@h@jee@h @end|ng |rom utm@@c@mu  Mon Nov  7 11:55:06 2022
From: hj@h@jee@h @end|ng |rom utm@@c@mu (Jahajeeah, Havisha)
Date: Mon, 7 Nov 2022 14:55:06 +0400
Subject: [R-pkg-devel] Error uploading file on CRAN
In-Reply-To: <20221107131302.6faf0aa4@arachnoid>
References: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
 <20221107131302.6faf0aa4@arachnoid>
Message-ID: <CAKU6PFUE6CGW71dLa-88UK7e2kWNysuGhAUvLVOMPBBPy09EkQ@mail.gmail.com>

Thank you for the reply.

Yes, uploading files into the Shiny app.

The Greymodels package loads data from spreadsheets and each model accepts
a set of data and outputs the  values. However, the package is unable to do
that because of the error: cannot open connection.

Regards,
Havisha

On Mon, Nov 7, 2022 at 2:13 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:

> ? Mon, 7 Nov 2022 12:30:35 +0400
> "Jahajeeah, Havisha" <hjahajeeah at utm.ac.mu> ?????:
>
> > After loading the package on CRAN, when I try to upload file (xlsx or
> > xls) the following error appears:
> >
> > Error: cannot open the connection
>
> Do you mean uploading files into your Shiny application, or somewhere
> else?
>
> Have you tried following this guide?
> https://shiny.rstudio.com/articles/debugging.html
>
> --
> Best regards,
> Ivan
>

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Nov  7 12:19:00 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 7 Nov 2022 14:19:00 +0300
Subject: [R-pkg-devel] Error uploading file on CRAN
In-Reply-To: <CAKU6PFUE6CGW71dLa-88UK7e2kWNysuGhAUvLVOMPBBPy09EkQ@mail.gmail.com>
References: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
 <20221107131302.6faf0aa4@arachnoid>
 <CAKU6PFUE6CGW71dLa-88UK7e2kWNysuGhAUvLVOMPBBPy09EkQ@mail.gmail.com>
Message-ID: <20221107141900.2b0fcbba@arachnoid>

? Mon, 7 Nov 2022 14:55:06 +0400
"Jahajeeah, Havisha" <hjahajeeah at utm.ac.mu> ?????:

> The Greymodels package loads data from spreadsheets and each model
> accepts a set of data and outputs the  values. However, the package
> is unable to do that because of the error: cannot open connection.

Thank you for clarifying the problem!

The guide at https://shiny.rstudio.com/articles/debugging.html is full
of useful things to try when a Shiny app is misbehaving. I could try to
write an instruction for you to follow here, but it would end up being
a paraphrase of this guide. If you follow the guide, you should be able
to find out (1) which of your read_excel calls is failing, (2) what is
its argument and (3) what actually ends up at that path at the time of
the call. Once you know this information, the solution may become
obvious, or at least there may be something for us to give you more
pointers about.

While there is a chance that someone else will come along, run your
package on their machine and reproduce the problem, there's also a
significant chance that no one will do that. Meanwhile, these steps are
relatively simple and may help you solve the problem right away.

-- 
Best regards,
Ivan


From hj@h@jee@h @end|ng |rom utm@@c@mu  Mon Nov  7 12:33:13 2022
From: hj@h@jee@h @end|ng |rom utm@@c@mu (Jahajeeah, Havisha)
Date: Mon, 7 Nov 2022 15:33:13 +0400
Subject: [R-pkg-devel] Error uploading file on CRAN
In-Reply-To: <20221107141900.2b0fcbba@arachnoid>
References: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
 <20221107131302.6faf0aa4@arachnoid>
 <CAKU6PFUE6CGW71dLa-88UK7e2kWNysuGhAUvLVOMPBBPy09EkQ@mail.gmail.com>
 <20221107141900.2b0fcbba@arachnoid>
Message-ID: <CAKU6PFUDVt30O+MSOgsh1hdeersJuW7g=M480aC7gnDYu-F7_A@mail.gmail.com>

Thank you for your help.

I will go through the guide.

Many thanks,
Havisha

On Mon, Nov 7, 2022 at 3:19 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:

> ? Mon, 7 Nov 2022 14:55:06 +0400
> "Jahajeeah, Havisha" <hjahajeeah at utm.ac.mu> ?????:
>
> > The Greymodels package loads data from spreadsheets and each model
> > accepts a set of data and outputs the  values. However, the package
> > is unable to do that because of the error: cannot open connection.
>
> Thank you for clarifying the problem!
>
> The guide at https://shiny.rstudio.com/articles/debugging.html is full
> of useful things to try when a Shiny app is misbehaving. I could try to
> write an instruction for you to follow here, but it would end up being
> a paraphrase of this guide. If you follow the guide, you should be able
> to find out (1) which of your read_excel calls is failing, (2) what is
> its argument and (3) what actually ends up at that path at the time of
> the call. Once you know this information, the solution may become
> obvious, or at least there may be something for us to give you more
> pointers about.
>
> While there is a chance that someone else will come along, run your
> package on their machine and reproduce the problem, there's also a
> significant chance that no one will do that. Meanwhile, these steps are
> relatively simple and may help you solve the problem right away.
>
> --
> Best regards,
> Ivan
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Nov  7 15:55:58 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 7 Nov 2022 15:55:58 +0100
Subject: [R-pkg-devel] 
 Examples with CPU time is greater than elapsed time.
In-Reply-To: <OS3P286MB085027CB079AAE4DF4FE7FAAF63A9@OS3P286MB0850.JPNP286.PROD.OUTLOOK.COM>
References: <OS3P286MB085027CB079AAE4DF4FE7FAAF63A9@OS3P286MB0850.JPNP286.PROD.OUTLOOK.COM>
Message-ID: <cbee6cfe-e3e5-efd8-bd70-28107495c235@statistik.tu-dortmund.de>



On 05.11.2022 15:41, Jiaming Yuan wrote:
> Hi all,
> 
> I tried to submit an update to the xgboost package but didn't pass the 
> pre-tests with the following note (solved the other one, but this one is 
> a bit confusing):
> 
> ```
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: examples, Result: NOTE
>  ? Examples with CPU time > 2.5 times elapsed time
>  ?????????????????????? user system elapsed ratio
>  ? cb.gblinear.history 1.454? 0.017??? 0.49 3.002
> 
> ```

as ratio is > 2.5 it looks like you are using multiple threads or 
processes. And CRAN only allows for two nodes when runnign parallel code.

Best,
Uwe Ligges


> I can't reproduce the note on win-builder: 
> https://win-builder.r-project.org/ as it's running on Windows but the 
> note appears on debian tests. I'm not able to reproduce it on my local 
> machine either with Ubuntu 22.04. I'm wondering what the note is trying 
> to tell me and how can I resolve it with confidence.
> 
> 
> The full log is here: 
> https://win-builder.r-project.org/incoming_pretest/xgboost_1.7.1.1_20221104_194252/Debian/00check.log .
> 
> 
> Many thanks!
> 
> Jiaming
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From peter@ruckde@che| @end|ng |rom web@de  Mon Nov  7 17:10:05 2022
From: peter@ruckde@che| @end|ng |rom web@de (Peter Ruckdeschel)
Date: Mon, 7 Nov 2022 17:10:05 +0100
Subject: [R-pkg-devel] cross-ref possible ext.pkg's --not mentioned in
 DESCRIPTION file-- in non-code sections in .Rd files
Message-ID: <4093b254-b157-3a90-9dfc-b28692ca0247@web.de>

Hi,

triggered by some new NOTEs uncovering infallacities in my packages on CRAN, I stumbled upon

Result: NOTE ????Undeclared packages ?distrMod?, ?RobAStBase? in Rd xrefs

which is issued in R-devel-linux-x86_64-fedora-clang (but not otherwise).

Digging into it, this comes from a text in a \seealso section where through something like

\code{\{link}[<ext.pkg>]{<generic>}

we want to link to a method provided in some extension package <ext.pkg> for a generic
<generic> documented in Rd-file of the current package.

In this case, we intentionally do not have <ext.pkg> in any of the entries "Depends", "Suggests",
"Imports", "Enhances" in the DESCRIPTION file, as <ext.pkg> is neither needed visible for the
user, nor for the code in the current package nor for testing code nor for example code and vignettes
of the current package, and because having it in "Suggests" would produce a circular dependence
as <ext.pkg> has the current package in its "Imports" section.

Of course, in "Writing R extesions" we find that

"Packages referred to by these ?other forms? should be declared in the DESCRIPTION file, in
 ? the ?Depends?, ?Imports?, ?Suggests? or ?Enhances? fields. "

so I am aware that this is my fault, as I use these 'other forms'? without declaration in the DESCRIPTION file.
Now I guess I could wrap my conditional cross-ref into some R-code, testing whether <ext.pkg> is available,
i.e., something like

\Sexpr[eval=TRUE,stage=render,results=text]{if("<ext.pkg>" %in% installed.packages()[,1] )
 ?cat("\\code{\\{link}[<ext.pkg>]{<generic>}") else cat("<generic> from package \\pkg{<ext.pkg>})

and so produce the link only if <ext.pkg> is installed at rendering time, but I would guess such a
conditional linkage would be something which could be of interest to a broader scope of R-package
developers and hence could and should be implemented in a less cumbersome, and more
efficient way.

Any suggestions welcome,
best, Peter

--
%******************************************************************
% Prof. Dr. Peter Ruckdeschel
% Institut fuer Mathematik, Fakultaet V - Mathematik und Naturwissenschaften
% Carl von Ossietzky Universitaet Oldenburg,
% Postfach 5634,  26111 Oldenburg
% Office: Wechloy W1 02-227 Tel: +49 (0)441 798-3240  Fax: +49 (0)441 798-193240
%peter.ruckdeschel at uni-oldenburg.de
%http://www.uni-oldenburg.de/peter-ruckdeschel
%******************************************************************

	[[alternative HTML version deleted]]


From j@g@nmn2 @end|ng |rom gm@||@com  Mon Nov  7 16:48:34 2022
From: j@g@nmn2 @end|ng |rom gm@||@com (Mikael Jagan)
Date: Mon, 7 Nov 2022 10:48:34 -0500
Subject: [R-pkg-devel] CRAN index replaces ampersand in BugReports URL with
 HTML entity
Message-ID: <19ef97af-5f05-26ee-8667-7c3f091543e0@gmail.com>

Hello,

It was raised on the Matrix bug tracker [1] that the BugReports URL
on the CRAN index [2] is broken.  The URL in our DESCRIPTION file [3]
is fine, but contains an ampersand, which is improperly replaced with
the corresponding HTML entity in the HTML sources of the index.

Hence this does not affect bug.report(package="Matrix"), but _does_
make our bug tracker inaccessible to people accustomed to visiting
the CRAN page for links.

Can this be repaired?

Mikael

[1] https://r-forge.r-project.org/tracker/?func=detail&aid=6787&group_id=61&atid=294
[2] https://cran.r-project.org/package=Matrix
[3] https://r-forge.r-project.org/tracker/?atid=294&group_id=61


From @kw@|mmo @end|ng |rom gm@||@com  Mon Nov  7 18:19:48 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Mon, 7 Nov 2022 12:19:48 -0500
Subject: [R-pkg-devel] cross-ref possible ext.pkg's --not mentioned in
 DESCRIPTION file-- in non-code sections in .Rd files
In-Reply-To: <4093b254-b157-3a90-9dfc-b28692ca0247@web.de>
References: <4093b254-b157-3a90-9dfc-b28692ca0247@web.de>
Message-ID: <CAPcHnpTnQrZ0ohB40geJuAaQhXxiRqJhKAmFQ5yUsmiDEO3R_w@mail.gmail.com>

Packages in Suggests and Enhances do not create a circular dependency, only
the packages in the Depends and Imports need to be installed at INSTALL and
loaded at load time. Packages in Suggests and Enhances are only needed at
check time, and even then it's more of a desire to be loaded than actually
needing to be loaded.

I would just put them in Suggests or Enhances

On Mon, Nov 7, 2022, 11:10 Peter Ruckdeschel <peter.ruckdeschel at web.de>
wrote:

> Hi,
>
> triggered by some new NOTEs uncovering infallacities in my packages on
> CRAN, I stumbled upon
>
> Result: NOTE     Undeclared packages ?distrMod?, ?RobAStBase? in Rd xrefs
>
> which is issued in R-devel-linux-x86_64-fedora-clang (but not otherwise).
>
> Digging into it, this comes from a text in a \seealso section where
> through something like
>
> \code{\{link}[<ext.pkg>]{<generic>}
>
> we want to link to a method provided in some extension package <ext.pkg>
> for a generic
> <generic> documented in Rd-file of the current package.
>
> In this case, we intentionally do not have <ext.pkg> in any of the entries
> "Depends", "Suggests",
> "Imports", "Enhances" in the DESCRIPTION file, as <ext.pkg> is neither
> needed visible for the
> user, nor for the code in the current package nor for testing code nor for
> example code and vignettes
> of the current package, and because having it in "Suggests" would produce
> a circular dependence
> as <ext.pkg> has the current package in its "Imports" section.
>
> Of course, in "Writing R extesions" we find that
>
> "Packages referred to by these ?other forms? should be declared in the
> DESCRIPTION file, in
>    the ?Depends?, ?Imports?, ?Suggests? or ?Enhances? fields. "
>
> so I am aware that this is my fault, as I use these 'other forms'  without
> declaration in the DESCRIPTION file.
> Now I guess I could wrap my conditional cross-ref into some R-code,
> testing whether <ext.pkg> is available,
> i.e., something like
>
> \Sexpr[eval=TRUE,stage=render,results=text]{if("<ext.pkg>" %in%
> installed.packages()[,1] )
>   cat("\\code{\\{link}[<ext.pkg>]{<generic>}") else cat("<generic> from
> package \\pkg{<ext.pkg>})
>
> and so produce the link only if <ext.pkg> is installed at rendering time,
> but I would guess such a
> conditional linkage would be something which could be of interest to a
> broader scope of R-package
> developers and hence could and should be implemented in a less cumbersome,
> and more
> efficient way.
>
> Any suggestions welcome,
> best, Peter
>
> --
> %******************************************************************
> % Prof. Dr. Peter Ruckdeschel
> % Institut fuer Mathematik, Fakultaet V - Mathematik und
> Naturwissenschaften
> % Carl von Ossietzky Universitaet Oldenburg,
> % Postfach 5634,  26111 Oldenburg
> % Office: Wechloy W1 02-227 Tel: +49 (0)441 798-3240  Fax: +49 (0)441
> 798-193240
> %peter.ruckdeschel at uni-oldenburg.de
> %http://www.uni-oldenburg.de/peter-ruckdeschel
> %******************************************************************
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Tue Nov  8 17:23:07 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Tue, 8 Nov 2022 17:23:07 +0100
Subject: [R-pkg-devel] 
 CRAN index replaces ampersand in BugReports URL with HTML entity
In-Reply-To: <19ef97af-5f05-26ee-8667-7c3f091543e0@gmail.com>
References: <19ef97af-5f05-26ee-8667-7c3f091543e0@gmail.com>
Message-ID: <25450.33387.199542.749127@stat.math.ethz.ch>

>>>>> Mikael Jagan 
>>>>>     on Mon, 7 Nov 2022 10:48:34 -0500 writes:

    > Hello,

    > It was raised on the Matrix bug tracker [1] that the BugReports URL
    > on the CRAN index [2] is broken.  The URL in our DESCRIPTION file [3]
    > is fine, but contains an ampersand, which is improperly replaced with
    > the corresponding HTML entity in the HTML sources of the index.

    > Hence this does not affect bug.report(package="Matrix"), but _does_
    > make our bug tracker inaccessible to people accustomed to visiting
    > the CRAN page for links.

    > Can this be repaired?

    > Mikael

    > [1] https://r-forge.r-project.org/tracker/?func=detail&aid=6787&group_id=61&atid=294
    > [2] https://cran.r-project.org/package=Matrix
    > [3] https://r-forge.r-project.org/tracker/?atid=294&group_id=61

This has been fixed already, by Kurt Hornik -- thank you very
much!

Martin


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Wed Nov  9 10:51:23 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Wed, 9 Nov 2022 10:51:23 +0100
Subject: [R-pkg-devel] cross-ref possible ext.pkg's --not mentioned in
 DESCRIPTION file-- in non-code sections in .Rd files
In-Reply-To: <CAPcHnpTnQrZ0ohB40geJuAaQhXxiRqJhKAmFQ5yUsmiDEO3R_w@mail.gmail.com>
References: <4093b254-b157-3a90-9dfc-b28692ca0247@web.de>
 <CAPcHnpTnQrZ0ohB40geJuAaQhXxiRqJhKAmFQ5yUsmiDEO3R_w@mail.gmail.com>
Message-ID: <25451.30747.336839.265433@stat.math.ethz.ch>

>>>>> Andrew Simmons 
>>>>>     on Mon, 7 Nov 2022 12:19:48 -0500 writes:

    > Packages in Suggests and Enhances do not create a circular dependency, only
    > the packages in the Depends and Imports need to be installed at INSTALL and
    > loaded at load time. Packages in Suggests and Enhances are only needed at
    > check time, and even then it's more of a desire to be loaded than actually
    > needing to be loaded.

    > I would just put them in Suggests or Enhances

Thank you, Andrew.

'Enhances'  I think would be preferable.

Still, as Peter, I am not very happy about this NOTE.
Notably as I guess people will use (even) less \link{..} in
their R documentation (*).

... but yes, we can live with it, and I'm sure Peter will keep
his Rd files well maintained in spite ..

Martin


--
*) which is often lacking anyway, in my view
   because things like roxygen implicitly/indirectly suggest to
   many package authors that documentation is something you do as
   quickly and as shortly as possible..

    > On Mon, Nov 7, 2022, 11:10 Peter Ruckdeschel <peter.ruckdeschel at web.de>
    > wrote:

    >> Hi,
    >> 
    >> triggered by some new NOTEs uncovering infallacities in my packages on
    >> CRAN, I stumbled upon
    >> 
    >> Result: NOTE     Undeclared packages ?distrMod?, ?RobAStBase? in Rd xrefs
    >> 
    >> which is issued in R-devel-linux-x86_64-fedora-clang (but not otherwise).
    >> 
    >> Digging into it, this comes from a text in a \seealso section where
    >> through something like
    >> 
    >> \code{\{link}[<ext.pkg>]{<generic>}
    >> 
    >> we want to link to a method provided in some extension package <ext.pkg>
    >> for a generic
    >> <generic> documented in Rd-file of the current package.
    >> 
    >> In this case, we intentionally do not have <ext.pkg> in any of the entries
    >> "Depends", "Suggests",
    >> "Imports", "Enhances" in the DESCRIPTION file, as <ext.pkg> is neither
    >> needed visible for the
    >> user, nor for the code in the current package nor for testing code nor for
    >> example code and vignettes
    >> of the current package, and because having it in "Suggests" would produce
    >> a circular dependence
    >> as <ext.pkg> has the current package in its "Imports" section.
    >> 
    >> Of course, in "Writing R extesions" we find that
    >> 
    >> "Packages referred to by these ?other forms? should be declared in the
    >> DESCRIPTION file, in
    >> the ?Depends?, ?Imports?, ?Suggests? or ?Enhances? fields. "
    >> 
    >> so I am aware that this is my fault, as I use these 'other forms'  without
    >> declaration in the DESCRIPTION file.
    >> Now I guess I could wrap my conditional cross-ref into some R-code,
    >> testing whether <ext.pkg> is available,
    >> i.e., something like
    >> 
    >> \Sexpr[eval=TRUE,stage=render,results=text]{if("<ext.pkg>" %in%
    >> installed.packages()[,1] )
    >> cat("\\code{\\{link}[<ext.pkg>]{<generic>}") else cat("<generic> from
    >> package \\pkg{<ext.pkg>})
    >> 
    >> and so produce the link only if <ext.pkg> is installed at rendering time,
    >> but I would guess such a
    >> conditional linkage would be something which could be of interest to a
    >> broader scope of R-package
    >> developers and hence could and should be implemented in a less cumbersome,
    >> and more
    >> efficient way.
    >> 
    >> Any suggestions welcome,
    >> best, Peter
    >> 
    >> --
    >> %******************************************************************
    >> % Prof. Dr. Peter Ruckdeschel
    >> % Institut fuer Mathematik, Fakultaet V - Mathematik und
    >> Naturwissenschaften
    >> % Carl von Ossietzky Universitaet Oldenburg,
    >> % Postfach 5634,  26111 Oldenburg
    >> % Office: Wechloy W1 02-227 Tel: +49 (0)441 798-3240  Fax: +49 (0)441
    >> 798-193240
    >> %peter.ruckdeschel at uni-oldenburg.de
    >> %http://www.uni-oldenburg.de/peter-ruckdeschel
    >> %******************************************************************
    >> 
    >> [[alternative HTML version deleted]]
    >> 
    >> ______________________________________________
    >> R-package-devel at r-project.org mailing list
    >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
    >> 

    > [[alternative HTML version deleted]]

    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||oruppr @end|ng |rom gm@||@com  Fri Nov 11 12:31:06 2022
From: ||oruppr @end|ng |rom gm@||@com (Florian Rupprecht)
Date: Fri, 11 Nov 2022 12:31:06 +0100
Subject: [R-pkg-devel] R, Rust and CRAN
Message-ID: <CAHTZEhAicFU8iqJui5QrOSfGkqx7y1ZgMh=R=i3hPM7yZmy2oQ@mail.gmail.com>

Hi all,

Are there any current recommendations on integrating Rust (and Cargo, its
official package manager) in an R package complying to CRAN's policies?

To be clear: This question is not about how to integrate Rust in the
package, it is about how to do it without creating friction with the CRAN
team and infrastructure. I want to write the Rust-C-R interface and build
scripts myself.

To me, Rust seems like a very good fit for R interop as it has a native C
FFI, and has address and UB safety guarantees that top the strictest C++
compiler warnings. However Rust's standard library is very small by design,
so Cargo integration would be needed.

I know there is:

- rextendr (https://cran.r-project.org/package=rextendr):
I don't think there is a package using this on CRAN yet.

- cargo-framework (https://CRAN.R-project.org/package=cargo)
Removed from CRAN.

- r-rust/gifski (https://cran.r-project.org/package=gifski)
Downloads precompiled binaries on windows for CRAN (which is, as I
understand it, strongly discouraged for a number of reasons:
https://stat.ethz.ch/pipermail/r-devel/2022-September/082027.html).

Thank you very much for your time,
Florian

	[[alternative HTML version deleted]]


From d@n@gro@e @end|ng |rom |@nc@@ter@@c@uk  Fri Nov 11 13:54:52 2022
From: d@n@gro@e @end|ng |rom |@nc@@ter@@c@uk (Grose, Daniel)
Date: Fri, 11 Nov 2022 12:54:52 +0000
Subject: [R-pkg-devel] vignettes - size of pdf
Message-ID: <LO2P265MB4151D13D9C623A51896A6269BE009@LO2P265MB4151.GBRP265.PROD.OUTLOOK.COM>

Hi

I have the file cpop.ltx file (containg LaTeX) in my package which gets processed to produce a pdf file for the vignettes when the package gets installed. However, CRAN checks give

* checking sizes of PDF files under 'inst/doc' ... WARNING
  'gs+qpdf' made some significant size reductions:
     compacted 'cpop.pdf' from 805Kb to 547Kb
  consider running tools::compactPDF(gs_quality = "ebook") on these files

I do not understand how I can do this given that the pdf is produced when installing the package. Any ideas ?

Daniel Grose

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Nov 11 14:06:13 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 11 Nov 2022 16:06:13 +0300
Subject: [R-pkg-devel] vignettes - size of pdf
In-Reply-To: <LO2P265MB4151D13D9C623A51896A6269BE009@LO2P265MB4151.GBRP265.PROD.OUTLOOK.COM>
References: <LO2P265MB4151D13D9C623A51896A6269BE009@LO2P265MB4151.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <20221111160613.0ea4a7ab@arachnoid>

? Fri, 11 Nov 2022 12:54:52 +0000
"Grose, Daniel" <dan.grose at lancaster.ac.uk> ?????:

> * checking sizes of PDF files under 'inst/doc' ... WARNING
>   'gs+qpdf' made some significant size reductions:
>      compacted 'cpop.pdf' from 805Kb to 547Kb
>   consider running tools::compactPDF(gs_quality = "ebook") on these
> files
> 
> I do not understand how I can do this given that the pdf is produced
> when installing the package. Any ideas ?

I think that the PDF file is built during R CMD build, not (only) R CMD
INSTALL. At the very least, the source package currently on CRAN
contains both the *.pdf and the *.ltx files under inst/doc:
https://github.com/cran/cpop/tree/master/inst/doc

Does it help to pass the --compact-vignettes=gs+qpdf argument to R CMD
build? It seems to be off by default.

-- 
Best regards,
Ivan


From m@tth|@@-gond@n @end|ng |rom gmx@de  Fri Nov 11 20:20:40 2022
From: m@tth|@@-gond@n @end|ng |rom gmx@de (matthias-gondan)
Date: Fri, 11 Nov 2022 20:20:40 +0100
Subject: [R-pkg-devel] R, Rust and CRAN
In-Reply-To: <CAHTZEhAicFU8iqJui5QrOSfGkqx7y1ZgMh=R=i3hPM7yZmy2oQ@mail.gmail.com>
Message-ID: <1N7zFj-1p6PkM38SZ-0153Dm@mail.gmx.net>

Hi Florian,?I am doing something similar with Swi-Prolog. Feel free to contact me if needed. My steps were:Get swipl to compile on Windows,? MSYS2, then Rtools4.2.Then, an R package rswipl that just includes the swipl runtime for those people who don't have swipl installed.?Then (basically right now, not yet on CRAN), an R package that does the interface between R and swipl (either installed on the system or the R package.Best wishes?Matthias?
-------- Urspr?ngliche Nachricht --------Von: Florian Rupprecht <floruppr at gmail.com> Datum: 11.11.22  12:31  (GMT+01:00) An: List r-package-devel <r-package-devel at r-project.org> Betreff: [R-pkg-devel] R, Rust and CRAN Hi all,Are there any current recommendations on integrating Rust (and Cargo, itsofficial package manager) in an R package complying to CRAN's policies?To be clear: This question is not about how to integrate Rust in thepackage, it is about how to do it without creating friction with the CRANteam and infrastructure. I want to write the Rust-C-R interface and buildscripts myself.To me, Rust seems like a very good fit for R interop as it has a native CFFI, and has address and UB safety guarantees that top the strictest C++compiler warnings. However Rust's standard library is very small by design,so Cargo integration would be needed.I know there is:- rextendr (https://cran.r-project.org/package=rextendr):I don't think there is a package using this on CRAN yet.- cargo-framework (https://CRAN.R-project.org/package=cargo)Removed from CRAN.- r-rust/gifski (https://cran.r-project.org/package=gifski)Downloads precompiled binaries on windows for CRAN (which is, as Iunderstand it, strongly discouraged for a number of reasons:https://stat.ethz.ch/pipermail/r-devel/2022-September/082027.html).Thank you very much for your time,Florian	[[alternative HTML version deleted]]______________________________________________R-package-devel at r-project.org mailing listhttps://stat.ethz.ch/mailman/listinfo/r-package-devel
	[[alternative HTML version deleted]]


From ||oruppr @end|ng |rom gm@||@com  Fri Nov 11 20:34:54 2022
From: ||oruppr @end|ng |rom gm@||@com (Florian Rupprecht)
Date: Fri, 11 Nov 2022 20:34:54 +0100
Subject: [R-pkg-devel] R, Rust and CRAN
In-Reply-To: <1N7zFj-1p6PkM38SZ-0153Dm@mail.gmx.net>
References: <CAHTZEhAicFU8iqJui5QrOSfGkqx7y1ZgMh=R=i3hPM7yZmy2oQ@mail.gmail.com>
 <1N7zFj-1p6PkM38SZ-0153Dm@mail.gmx.net>
Message-ID: <CAHTZEhD2Bb58gNjgN3kF+sJxvTuGsJLF5iCSshR8ees36dvb9g@mail.gmail.com>

Hi Matthias,

Thank you very much for your response!

Putting the entire compiler toolchain of Rust into an R package is likely
just too much (it would need to compile the entire LLVM compiler which
would take hours just to build alone).
However, it is a very interesting idea to consider with dependencies.
(Having a separate optional package that contains the source code of all
Rust-dependencies necessary for the package) So thank you for sharing!

I was also made aware of this similar thread:
https://stat.ethz.ch/pipermail/r-package-devel/2022q3/008291.html

Best,
Florian

On Fri, Nov 11, 2022 at 8:21 PM matthias-gondan <matthias-gondan at gmx.de>
wrote:

> Hi Florian, I am doing something similar with Swi-Prolog. Feel free to
> contact me if needed. My steps were:Get swipl to compile on Windows,
> MSYS2, then Rtools4.2.Then, an R package rswipl that just includes the
> swipl runtime for those people who don't have swipl installed. Then
> (basically right now, not yet on CRAN), an R package that does the
> interface between R and swipl (either installed on the system or the R
> package.Best wishes Matthias
> -------- Urspr?ngliche Nachricht --------Von: Florian Rupprecht <
> floruppr at gmail.com> Datum: 11.11.22  12:31  (GMT+01:00) An: List
> r-package-devel <r-package-devel at r-project.org> Betreff: [R-pkg-devel] R,
> Rust and CRAN Hi all,Are there any current recommendations on integrating
> Rust (and Cargo, itsofficial package manager) in an R package complying to
> CRAN's policies?To be clear: This question is not about how to integrate
> Rust in thepackage, it is about how to do it without creating friction with
> the CRANteam and infrastructure. I want to write the Rust-C-R interface and
> buildscripts myself.To me, Rust seems like a very good fit for R interop as
> it has a native CFFI, and has address and UB safety guarantees that top the
> strictest C++compiler warnings. However Rust's standard library is very
> small by design,so Cargo integration would be needed.I know there is:-
> rextendr (https://cran.r-project.org/package=rextendr):I don't think
> there is a package using this on CRAN yet.- cargo-framework (
> https://CRAN.R-project.org/package=cargo)Removed from CRAN.-
> r-rust/gifski (https://cran.r-project.org/package=gifski)Downloads
> precompiled binaries on windows for CRAN (which is, as Iunderstand it,
> strongly discouraged for a number of reasons:
> https://stat.ethz.ch/pipermail/r-devel/2022-September/082027.html).Thank
> you very much for your time,Florian     [[alternative HTML version
> deleted]]______________________________________________
> R-package-devel at r-project.org mailing listhttps://
> stat.ethz.ch/mailman/listinfo/r-package-devel
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Fri Nov 11 20:56:29 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 11 Nov 2022 13:56:29 -0600
Subject: [R-pkg-devel] vignettes - size of pdf
In-Reply-To: <20221111160613.0ea4a7ab@arachnoid>
References: <LO2P265MB4151D13D9C623A51896A6269BE009@LO2P265MB4151.GBRP265.PROD.OUTLOOK.COM>
 <20221111160613.0ea4a7ab@arachnoid>
Message-ID: <25454.43245.673488.61706@rob.eddelbuettel.com>


On 11 November 2022 at 16:06, Ivan Krylov wrote:
| ? Fri, 11 Nov 2022 12:54:52 +0000
| "Grose, Daniel" <dan.grose at lancaster.ac.uk> ?????:
| 
| > * checking sizes of PDF files under 'inst/doc' ... WARNING
| >   'gs+qpdf' made some significant size reductions:
| >      compacted 'cpop.pdf' from 805Kb to 547Kb
| >   consider running tools::compactPDF(gs_quality = "ebook") on these
| > files
| > 
| > I do not understand how I can do this given that the pdf is produced
| > when installing the package. Any ideas ?
| 
| I think that the PDF file is built during R CMD build, not (only) R CMD
| INSTALL. At the very least, the source package currently on CRAN
| contains both the *.pdf and the *.ltx files under inst/doc:
| https://github.com/cran/cpop/tree/master/inst/doc
| 
| Does it help to pass the --compact-vignettes=gs+qpdf argument to R CMD
| build? It seems to be off by default.

I find command-line helper scripts convenient in my workflow, and so I added
dozens in the examples/ folder of the littler package. I had already relied
on 'build.r' to build the source packages and find this message tedious too
so about a year ago I changed it to default to compact at _source_ build
time. The script is (thanks to doctopt) all of about five lines of which the
final three are

  argv <- if (opt$fast) c("--no-build-vignettes", "--no-manual", opt$PACKAGES) else opt$PACKAGES

  extraargs <- c("--compact-vignettes=both", "--resave-data", argv)

  tools:::.build_packages(extraargs, no.q=interactive())

Does the trick for me (and CRAN as I get no nags on packages made this way).

Dirk


-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @|mon@urb@nek @end|ng |rom R-project@org  Sat Nov 12 00:49:05 2022
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sat, 12 Nov 2022 12:49:05 +1300
Subject: [R-pkg-devel] R, Rust and CRAN
In-Reply-To: <CAHTZEhAicFU8iqJui5QrOSfGkqx7y1ZgMh=R=i3hPM7yZmy2oQ@mail.gmail.com>
References: <CAHTZEhAicFU8iqJui5QrOSfGkqx7y1ZgMh=R=i3hPM7yZmy2oQ@mail.gmail.com>
Message-ID: <5E16F164-5FDF-49D4-BF7E-7C4F8BF4DDEE@R-project.org>

Florian,

this does not directly address your question, but I think it would make a lot of sense to standardize the process, given how many issues there were with packages using Rust (mainly not detecting compilers correctly, not supplying source code, unsolicited writing into user's directories, not checking binaries etc.). Doing this right is not entirely trivial which is presumably where the "friction" comes from. I'm not a Rust user myself, but just based on the other languages that have interfaces from R I would think that Rust users could coalesce and write a package that does the heavy lifting and can be used by packages that contain Rust code as a foundation - that's what most other language interfaces do. (It's quite possible that some of the projects you listed would be a good start). I would not recommend putting that burden onto each package author as it screams maintenance nightmare.

Cheers,
Simon


> On Nov 12, 2022, at 12:31 AM, Florian Rupprecht <floruppr at gmail.com> wrote:
> 
> Hi all,
> 
> Are there any current recommendations on integrating Rust (and Cargo, its
> official package manager) in an R package complying to CRAN's policies?
> 
> To be clear: This question is not about how to integrate Rust in the
> package, it is about how to do it without creating friction with the CRAN
> team and infrastructure. I want to write the Rust-C-R interface and build
> scripts myself.
> 
> To me, Rust seems like a very good fit for R interop as it has a native C
> FFI, and has address and UB safety guarantees that top the strictest C++
> compiler warnings. However Rust's standard library is very small by design,
> so Cargo integration would be needed.
> 
> I know there is:
> 
> - rextendr (https://cran.r-project.org/package=rextendr):
> I don't think there is a package using this on CRAN yet.
> 
> - cargo-framework (https://CRAN.R-project.org/package=cargo)
> Removed from CRAN.
> 
> - r-rust/gifski (https://cran.r-project.org/package=gifski)
> Downloads precompiled binaries on windows for CRAN (which is, as I
> understand it, strongly discouraged for a number of reasons:
> https://stat.ethz.ch/pipermail/r-devel/2022-September/082027.html).
> 
> Thank you very much for your time,
> Florian
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From jeroen @end|ng |rom berke|ey@edu  Sat Nov 12 19:27:40 2022
From: jeroen @end|ng |rom berke|ey@edu (Jeroen Ooms)
Date: Sat, 12 Nov 2022 19:27:40 +0100
Subject: [R-pkg-devel] R, Rust and CRAN
In-Reply-To: <5E16F164-5FDF-49D4-BF7E-7C4F8BF4DDEE@R-project.org>
References: <CAHTZEhAicFU8iqJui5QrOSfGkqx7y1ZgMh=R=i3hPM7yZmy2oQ@mail.gmail.com>
 <5E16F164-5FDF-49D4-BF7E-7C4F8BF4DDEE@R-project.org>
Message-ID: <CABFfbXt-PQ4=iL7mN+Rg-+wRc34NpoELG-_uxvVKe9o6-uMeJg@mail.gmail.com>

On Sat, Nov 12, 2022 at 12:49 AM Simon Urbanek
<simon.urbanek at r-project.org> wrote:
>
> this does not directly address your question, but I think it would make a lot of sense to standardize the process, given how many issues there were with packages using Rust (mainly not detecting compilers correctly, not supplying source code, unsolicited writing into user's directories, not checking binaries etc.). Doing this right is not entirely trivial which is presumably where the "friction" comes from.

All we need is the rustc/cargo toolchain to be installed on the CRAN
win/mac builders (it already is on Fedora/Debian). As mentioned above
(and before in e.g. https://jeroen.github.io/erum2018), rust uses the
native C FFI, does not need any runtime library, and can be called
directly from an R package using the C interface.  There is really no
need for frameworks or engines (like Rcpp/rJava/V8), this is precisely
what makes Rust so nice as an embedded language, and why it is being
adopted in many C projects such the Linux kernel, that would never
want to deal with Java/C++/JS.

> I'm not a Rust user myself, but just based on the other languages that have interfaces from R I would think that Rust users could coalesce and write a package that does the heavy lifting and can be used by packages that contain Rust code as a foundation - that's what most other language interfaces do. (It's quite possible that some of the projects you listed would be a good start). I would not recommend putting that burden onto each package author as it screams maintenance nightmare.

I understand the sentiment but Rust is very different from e.g. Java.
There really isn't much "heavy lifting" to do, because there are no
complex type conversions or runtime library involved. If the same
structs are used in C and Rust, the C functions can directly call Rust
functions and vice versa. Therefore it is possible for libraries to
incrementally port pieces of C code to Rust without breaking the ABI.
Just have a look at the hello world examples such as:
https://github.com/r-rust/hellorust or for a real world example:
https://cran.r-project.org/package=gifski


From edd @end|ng |rom deb|@n@org  Sat Nov 12 19:59:05 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 12 Nov 2022 12:59:05 -0600
Subject: [R-pkg-devel] R, Rust and CRAN
In-Reply-To: <CABFfbXt-PQ4=iL7mN+Rg-+wRc34NpoELG-_uxvVKe9o6-uMeJg@mail.gmail.com>
References: <CAHTZEhAicFU8iqJui5QrOSfGkqx7y1ZgMh=R=i3hPM7yZmy2oQ@mail.gmail.com>
 <5E16F164-5FDF-49D4-BF7E-7C4F8BF4DDEE@R-project.org>
 <CABFfbXt-PQ4=iL7mN+Rg-+wRc34NpoELG-_uxvVKe9o6-uMeJg@mail.gmail.com>
Message-ID: <25455.60665.478368.792317@rob.eddelbuettel.com>


On 12 November 2022 at 19:27, Jeroen Ooms wrote:
| On Sat, Nov 12, 2022 at 12:49 AM Simon Urbanek
| <simon.urbanek at r-project.org> wrote:
| >
| > this does not directly address your question, but I think it would make a lot of sense to standardize the process, given how many issues there were with packages using Rust (mainly not detecting compilers correctly, not supplying source code, unsolicited writing into user's directories, not checking binaries etc.). Doing this right is not entirely trivial which is presumably where the "friction" comes from.
| 
| All we need is the rustc/cargo toolchain to be installed on the CRAN
| win/mac builders (it already is on Fedora/Debian). As mentioned above
| (and before in e.g. https://jeroen.github.io/erum2018), rust uses the
| native C FFI, does not need any runtime library, and can be called
| directly from an R package using the C interface.  There is really no
| need for frameworks or engines (like Rcpp/rJava/V8), this is precisely
| what makes Rust so nice as an embedded language, and why it is being
| adopted in many C projects such the Linux kernel, that would never
| want to deal with Java/C++/JS.

Seconded. CRAN works best when tools are uniformly provided. It would be good
to have that for Rust too.

(Small nit about C++ here. Its compatibility with C and use of FFI via C is a
major reason for its success. As you know there is no run-time so equating
with Java or VS is a little off, at least on my ledger.)
 
| > I'm not a Rust user myself, but just based on the other languages that have interfaces from R I would think that Rust users could coalesce and write a package that does the heavy lifting and can be used by packages that contain Rust code as a foundation - that's what most other language interfaces do. (It's quite possible that some of the projects you listed would be a good start). I would not recommend putting that burden onto each package author as it screams maintenance nightmare.
| 
| I understand the sentiment but Rust is very different from e.g. Java.
| There really isn't much "heavy lifting" to do, because there are no
| complex type conversions or runtime library involved. If the same
| structs are used in C and Rust, the C functions can directly call Rust
| functions and vice versa. Therefore it is possible for libraries to
| incrementally port pieces of C code to Rust without breaking the ABI.
| Just have a look at the hello world examples such as:
| https://github.com/r-rust/hellorust or for a real world example:
| https://cran.r-project.org/package=gifski

Again, ditto for C++ but Rust is another very compelling candidate that would
be good to support (and to e.g. access projects like polars more easily).

CRAN is often seen as having somewhat difficult-to-overcome resistance for
outside help (with Rtools4 a very notable and successful exception).

Maybe enabling Rust support could be a pilot-project for another approach?

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @|mon@urb@nek @end|ng |rom R-project@org  Sat Nov 12 20:15:11 2022
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sun, 13 Nov 2022 08:15:11 +1300
Subject: [R-pkg-devel] R, Rust and CRAN
In-Reply-To: <CABFfbXt-PQ4=iL7mN+Rg-+wRc34NpoELG-_uxvVKe9o6-uMeJg@mail.gmail.com>
References: <CAHTZEhAicFU8iqJui5QrOSfGkqx7y1ZgMh=R=i3hPM7yZmy2oQ@mail.gmail.com>
 <5E16F164-5FDF-49D4-BF7E-7C4F8BF4DDEE@R-project.org>
 <CABFfbXt-PQ4=iL7mN+Rg-+wRc34NpoELG-_uxvVKe9o6-uMeJg@mail.gmail.com>
Message-ID: <5C76BF99-A16F-4D09-82DE-6C75B8A961AC@R-project.org>

Jeroen,

sorry, I think you misunderstood: CRAN machines have the compilers, but the packages were not detecting it properly and/or were violating the CRAN policies as noted, so that's why I was saying that it would make sense to have a unified approach so that each package author doesn't have to make the same mistakes over again.

Cheers,
Simon


> On Nov 13, 2022, at 7:27 AM, Jeroen Ooms <jeroen at berkeley.edu> wrote:
> 
> On Sat, Nov 12, 2022 at 12:49 AM Simon Urbanek
> <simon.urbanek at r-project.org> wrote:
>> 
>> this does not directly address your question, but I think it would make a lot of sense to standardize the process, given how many issues there were with packages using Rust (mainly not detecting compilers correctly, not supplying source code, unsolicited writing into user's directories, not checking binaries etc.). Doing this right is not entirely trivial which is presumably where the "friction" comes from.
> 
> All we need is the rustc/cargo toolchain to be installed on the CRAN
> win/mac builders (it already is on Fedora/Debian). As mentioned above
> (and before in e.g. https://jeroen.github.io/erum2018), rust uses the
> native C FFI, does not need any runtime library, and can be called
> directly from an R package using the C interface.  There is really no
> need for frameworks or engines (like Rcpp/rJava/V8), this is precisely
> what makes Rust so nice as an embedded language, and why it is being
> adopted in many C projects such the Linux kernel, that would never
> want to deal with Java/C++/JS.
> 
>> I'm not a Rust user myself, but just based on the other languages that have interfaces from R I would think that Rust users could coalesce and write a package that does the heavy lifting and can be used by packages that contain Rust code as a foundation - that's what most other language interfaces do. (It's quite possible that some of the projects you listed would be a good start). I would not recommend putting that burden onto each package author as it screams maintenance nightmare.
> 
> I understand the sentiment but Rust is very different from e.g. Java.
> There really isn't much "heavy lifting" to do, because there are no
> complex type conversions or runtime library involved. If the same
> structs are used in C and Rust, the C functions can directly call Rust
> functions and vice versa. Therefore it is possible for libraries to
> incrementally port pieces of C code to Rust without breaking the ABI.
> Just have a look at the hello world examples such as:
> https://github.com/r-rust/hellorust or for a real world example:
> https://cran.r-project.org/package=gifski
> 


From edd @end|ng |rom deb|@n@org  Sat Nov 12 21:20:08 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 12 Nov 2022 14:20:08 -0600
Subject: [R-pkg-devel] R, Rust and CRAN
In-Reply-To: <5C76BF99-A16F-4D09-82DE-6C75B8A961AC@R-project.org>
References: <CAHTZEhAicFU8iqJui5QrOSfGkqx7y1ZgMh=R=i3hPM7yZmy2oQ@mail.gmail.com>
 <5E16F164-5FDF-49D4-BF7E-7C4F8BF4DDEE@R-project.org>
 <CABFfbXt-PQ4=iL7mN+Rg-+wRc34NpoELG-_uxvVKe9o6-uMeJg@mail.gmail.com>
 <5C76BF99-A16F-4D09-82DE-6C75B8A961AC@R-project.org>
Message-ID: <25455.65528.951832.584750@rob.eddelbuettel.com>


On 13 November 2022 at 08:15, Simon Urbanek wrote:
| sorry, I think you misunderstood: CRAN machines have the compilers, but the packages were not detecting it properly and/or were violating the CRAN policies as noted, so that's why I was saying that it would make sense to have a unified approach so that each package author doesn't have to make the same mistakes over again.

Would you be able to provide a sample package, say, "hello.rust", that does
that to guide us all?

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @|mon@urb@nek @end|ng |rom R-project@org  Sat Nov 12 23:04:39 2022
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Sun, 13 Nov 2022 11:04:39 +1300
Subject: [R-pkg-devel] R, Rust and CRAN
In-Reply-To: <25455.65528.951832.584750@rob.eddelbuettel.com>
References: <CAHTZEhAicFU8iqJui5QrOSfGkqx7y1ZgMh=R=i3hPM7yZmy2oQ@mail.gmail.com>
 <5E16F164-5FDF-49D4-BF7E-7C4F8BF4DDEE@R-project.org>
 <CABFfbXt-PQ4=iL7mN+Rg-+wRc34NpoELG-_uxvVKe9o6-uMeJg@mail.gmail.com>
 <5C76BF99-A16F-4D09-82DE-6C75B8A961AC@R-project.org>
 <25455.65528.951832.584750@rob.eddelbuettel.com>
Message-ID: <69C069BE-1AC8-4792-8909-0865A14BF861@R-project.org>

No, because I don't use Rust. That's why I was saying that the Rust users should get together and create a such package. Some of the packages listed have experience in fixing the problems, so I would hope they can provide guidance or a good starting point. This is something for the interested community to do.

Cheers,
Simon


> On Nov 13, 2022, at 9:20 AM, Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> 
> On 13 November 2022 at 08:15, Simon Urbanek wrote:
> | sorry, I think you misunderstood: CRAN machines have the compilers, but the packages were not detecting it properly and/or were violating the CRAN policies as noted, so that's why I was saying that it would make sense to have a unified approach so that each package author doesn't have to make the same mistakes over again.
> 
> Would you be able to provide a sample package, say, "hello.rust", that does
> that to guide us all?
> 
> Dirk
> 
> -- 
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> 


From @r|e|92@nd @end|ng |rom gm@||@com  Sun Nov 13 12:29:21 2022
From: @r|e|92@nd @end|ng |rom gm@||@com (=?iso-8859-1?Q?Elys=E9e_Aristide?=)
Date: Sun, 13 Nov 2022 11:29:21 +0000
Subject: [R-pkg-devel] How ton print in the console from Rcpp
In-Reply-To: <25427.64684.611479.503767@rob.eddelbuettel.com>
References: <CALcKxsq1EYdsSh3i2MPLop8fxngVpAKfY8ZqMCmbG+k280VJoA@mail.gmail.com>
 <20221020144644.38d04ef0@arachnoid>
 <25425.16943.184057.68532@rob.eddelbuettel.com>
 <SJ0PR10MB5719CC02075B1218B23F2A1FFE2A9@SJ0PR10MB5719.namprd10.prod.outlook.com>
 <25427.64684.611479.503767@rob.eddelbuettel.com>
Message-ID: <SJ0PR10MB5719655A3220440969E96921FE029@SJ0PR10MB5719.namprd10.prod.outlook.com>

Greetings,

I would like to follow up on this issue.
First of all, thank you to everyone who took the time to think about the issue.
As Mr. Dirk Eddelbuettel suggested,  I investigated other packages that perform numerical optimizations using RcppNumerical. The only difference I saw is that all those packages put

#define NDEBUG

after #include <RcppArmadillo.h>.
I did the same thing without understanding :). This solves the issue.


Best,
Aristide

________________________________
From: Dirk Eddelbuettel <edd at debian.org>
Sent: Saturday, October 22, 2022, 4:22 p.m.
To: Elys?e Aristide <ariel92and at gmail.com>
Cc: Dirk Eddelbuettel <edd at debian.org>; Ivan Krylov <krylov.r00t at gmail.com>; r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] How ton print in the console from Rcpp


On 20 October 2022 at 13:16, Elys?e Aristide wrote:
| Thank you very much for your answers.
|
| I finally noticed that the issue comes from the numerical optimization, in which I use the class MFuncGrad of the package RcppNumerical. Is there any problem in using this class? This is the only way I know to compute integrals of perform numerical optimizations in Rcpp. The other way might be: construct the function to be minimized in Rcpp and use the function optim in R. But this is not efficient.

That package is also used by others [1] and you should maybe study their code
and setup as it seems unlikely to me that your woes are due to
RcppNumerical. It likely is a simple inadvertent issue in your package.

Dirk

[1] https://cloud.r-project.org/web/packages/RcppNumerical/index.html shows
Reverse imports:
  BayesPPD, ccdf, glmdisc, MCPModPack, secr, teachingApps
Reverse linking to:
  apeglm, BayesPPD, BVSNLP, CDatanet, COMIX, fido, gbeta, glmdisc,
  MCPModPack, OwenQ, secr, teachingApps, vennLasso, ztpln
which should give you plenty of examples.


--
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Nov 14 15:03:24 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 14 Nov 2022 17:03:24 +0300
Subject: [R-pkg-devel] How ton print in the console from Rcpp
In-Reply-To: <SJ0PR10MB5719655A3220440969E96921FE029@SJ0PR10MB5719.namprd10.prod.outlook.com>
References: <CALcKxsq1EYdsSh3i2MPLop8fxngVpAKfY8ZqMCmbG+k280VJoA@mail.gmail.com>
 <20221020144644.38d04ef0@arachnoid>
 <25425.16943.184057.68532@rob.eddelbuettel.com>
 <SJ0PR10MB5719CC02075B1218B23F2A1FFE2A9@SJ0PR10MB5719.namprd10.prod.outlook.com>
 <25427.64684.611479.503767@rob.eddelbuettel.com>
 <SJ0PR10MB5719655A3220440969E96921FE029@SJ0PR10MB5719.namprd10.prod.outlook.com>
Message-ID: <20221114170324.08ff0540@arachnoid>

? Sun, 13 Nov 2022 11:29:21 +0000
Elys?e Aristide <ariel92and at gmail.com> ?????:

> The only difference I saw is that all those packages put
> 
> #define NDEBUG
> 
> after #include <RcppArmadillo.h>.
> I did the same thing without understanding :)

Glad you got it working! If you're curious why it helped, see
<https://en.cppreference.com/w/c/error/assert>.

I wouldn't have guessed this to be the problem, because I "knew" that R
CMD INSTALL defines NDEBUG during compilation in order to prevent
assert() from crashing the process. Indeed, it's easy to verify that
RcppArmadillo removes the NDEBUG preprocessor symbol:

https://github.com/RcppCore/RcppArmadillo/search?q=NDEBUG&type=code

Seeing the search results, I can't help but wonder whether Armadillo
still makes any decisions based on this preprocessor definition,
though. Is the whole of Armadillo included as part of the package?
Shouldn't there be other mentions of NDEBUG besides the "#undef NDEBUG"
and the package changelog?

I don't see NDEBUG mentioned in the Armadillo source repo, either:
https://gitlab.com/search?search=NDEBUG&nav_source=navbar&project_id=6604173&search_code=true&repository_ref=11.4.x

Could the #undef NDEBUG line be safely removed now without affecting
the debugging tests performed by Armadillo?

-- 
Best regards,
Ivan


From edd @end|ng |rom deb|@n@org  Mon Nov 14 16:09:24 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 14 Nov 2022 09:09:24 -0600
Subject: [R-pkg-devel] How ton print in the console from Rcpp
In-Reply-To: <20221114170324.08ff0540@arachnoid>
References: <CALcKxsq1EYdsSh3i2MPLop8fxngVpAKfY8ZqMCmbG+k280VJoA@mail.gmail.com>
 <20221020144644.38d04ef0@arachnoid>
 <25425.16943.184057.68532@rob.eddelbuettel.com>
 <SJ0PR10MB5719CC02075B1218B23F2A1FFE2A9@SJ0PR10MB5719.namprd10.prod.outlook.com>
 <25427.64684.611479.503767@rob.eddelbuettel.com>
 <SJ0PR10MB5719655A3220440969E96921FE029@SJ0PR10MB5719.namprd10.prod.outlook.com>
 <20221114170324.08ff0540@arachnoid>
Message-ID: <25458.23076.693589.60544@rob.eddelbuettel.com>


Ivan,

Thanks for following-up but I think this issue is local to the OP as R is
already setup exactly that way to skip `assert()` in builds (in perfect
congruence with the CRAN Repository Policy)

  edd at rob:~$ grep NDEBUG /etc/R/Makeconf 
  R_XTRA_CPPFLAGS =  -I"$(R_INCLUDE_DIR)" -DNDEBUG
  ALL_CPPFLAGS =  -I"$(R_INCLUDE_DIR)" -DNDEBUG $(PKG_CPPFLAGS) $(CLINK_CPPFLAGS) $(CPPFLAGS) 
  edd at rob:~$ 

Armadillo (upstream) is very widely used, RcppArmadillo is now used by over
1000 packages and had (by partial counts from the subset of CRAN mirrors
offering logs) over 25 million downloads. I would be rather surprised if
there were a systemic issue we have not seen. So per Occam's Razor, I would
look under a different street light.

Best, Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @r|e|92@nd @end|ng |rom gm@||@com  Mon Nov 14 16:34:57 2022
From: @r|e|92@nd @end|ng |rom gm@||@com (=?UTF-8?Q?Elys=C3=A9e_Aristide?=)
Date: Mon, 14 Nov 2022 16:34:57 +0100
Subject: [R-pkg-devel] How ton print in the console from Rcpp
In-Reply-To: <25458.23076.693589.60544@rob.eddelbuettel.com>
References: <CALcKxsq1EYdsSh3i2MPLop8fxngVpAKfY8ZqMCmbG+k280VJoA@mail.gmail.com>
 <20221020144644.38d04ef0@arachnoid>
 <25425.16943.184057.68532@rob.eddelbuettel.com>
 <SJ0PR10MB5719CC02075B1218B23F2A1FFE2A9@SJ0PR10MB5719.namprd10.prod.outlook.com>
 <25427.64684.611479.503767@rob.eddelbuettel.com>
 <SJ0PR10MB5719655A3220440969E96921FE029@SJ0PR10MB5719.namprd10.prod.outlook.com>
 <20221114170324.08ff0540@arachnoid>
 <25458.23076.693589.60544@rob.eddelbuettel.com>
Message-ID: <CALcKxsqWY+vKgm77_4qAb-6CG6Ewiq-XbZLDrZjeMjny2_eSQg@mail.gmail.com>

Hello,

I was convinced that the issue is local. The warning message only appears
on MAC.
I did not try with another computer. I used CRAN macbuilder service and got
the warning message. I guess this is also the computer CRAN uses.

Best regards,

Aristide Elys?e HOUNDETOUNGAN
*Assistant Professor of Economics*
*Website: *www.ahoundetoungan.com




On Mon, Nov 14, 2022 at 4:09 PM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> Ivan,
>
> Thanks for following-up but I think this issue is local to the OP as R is
> already setup exactly that way to skip `assert()` in builds (in perfect
> congruence with the CRAN Repository Policy)
>
>   edd at rob:~$ grep NDEBUG /etc/R/Makeconf
>   R_XTRA_CPPFLAGS =  -I"$(R_INCLUDE_DIR)" -DNDEBUG
>   ALL_CPPFLAGS =  -I"$(R_INCLUDE_DIR)" -DNDEBUG $(PKG_CPPFLAGS)
> $(CLINK_CPPFLAGS) $(CPPFLAGS)
>   edd at rob:~$
>
> Armadillo (upstream) is very widely used, RcppArmadillo is now used by over
> 1000 packages and had (by partial counts from the subset of CRAN mirrors
> offering logs) over 25 million downloads. I would be rather surprised if
> there were a systemic issue we have not seen. So per Occam's Razor, I would
> look under a different street light.
>
> Best, Dirk
>
> --
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From Bernd@Gruber @end|ng |rom c@nberr@@edu@@u  Wed Nov 16 05:34:35 2022
From: Bernd@Gruber @end|ng |rom c@nberr@@edu@@u (Bernd.Gruber)
Date: Wed, 16 Nov 2022 04:34:35 +0000
Subject: [R-pkg-devel] [UNCLASSIFIED] Remotes in description when submitting
 a package until a dependency is fixed
Message-ID: <ME3PR01MB79446317E48550467BFACB55D4079@ME3PR01MB7944.ausprd01.prod.outlook.com>

Hi,

I have a package (dartR) that needs to be updated by CRAN (and got a time set until a certain date). It depends on a package that is currently showing errors in the CRAN results and therefore fails. The maintainer of that package is busily trying to rectify the error (as can be seen be repeated submissions in the last weeks), but was not able yet to fix it. As we are running out of time my approach would be to have a version of the package that fixes it and use Remotes: in the description. It runs fine without errors.

In the R-packages book I read the following:

"It's important to note that you should not submit your package to CRAN in the intermediate state, meaning with a Remotes field and with a dependency required at a version that's not available from CRAN or Bioconductor. For CRAN packages, this can only be a temporary development state, eventually resolved when the dependency updates on CRAN and you can bump your minimum version accordingly."

So is it okay to submit our package with a remote statement until the maintainer of the other package has fixed their issues?

Thanks in advance,
Bernd


==============================================================================
Dr Bernd Gruber                                              )/_
                                                         _.--..---"-,--c_
Professor Ecological Modelling                      \|..'           ._O__)_
Tel: (02) 6206 3804                         ,=.    _.+   _ \..--( /
Fax: (02) 6201 2328                           \\.-''_.-' \ (     \_
Institute for Applied Ecology                  `'''       `\__   /\
Faculty of Science and Technology                          ')
University of Canberra   ACT 2601 AUSTRALIA
Email: bernd.gruber at canberra.edu.au<mailto:bernd.gruber at canberra.edu.au>
WWW: bernd-gruber<https://researchprofiles.canberra.edu.au/en/persons/bernd-gruber>
==============================================================================

[UC Logo]<http://www.canberra.edu.au>

[Its time to control your Future. Apply now to study with Australia's fastest rising University. *QS, 2022]<https://www.canberra.edu.au/>



The Ngunnawal people are the Traditional Custodians of the ACT where UC's Bruce Campus is situated and are an integral and celebrated part of UC's culture. We also acknowledge other First Nations Peoples.

Australian Government Higher Education Registered Provider (CRICOS) #00212K. TEQSA Provider ID: PRV12003 (Australian University)
Email Disclaimer<https://www.canberra.edu.au/about-uc/disclaimer-copyright-privacy-accessibility>

[UC Facebook]<https://www.facebook.com/UniversityOfCanberra>    [UC Twitter] <https://twitter.com/UniCanberra>     [UC Instagram] <https://www.instagram.com/unicanberra/>     [UC Linkedin] <https://au.linkedin.com/school/university-of-canberra/>     [UC Youtube] <https://www.youtube.com/user/uniofcanberra>     [University of Canberra] <http://www.canberra.edu.au>

	[[alternative HTML version deleted]]


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Wed Nov 16 05:59:30 2022
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Wed, 16 Nov 2022 15:59:30 +1100
Subject: [R-pkg-devel] 
 [UNCLASSIFIED] Remotes in description when submitting
 a package until a dependency is fixed
In-Reply-To: <ME3PR01MB79446317E48550467BFACB55D4079@ME3PR01MB7944.ausprd01.prod.outlook.com>
References: <ME3PR01MB79446317E48550467BFACB55D4079@ME3PR01MB7944.ausprd01.prod.outlook.com>
Message-ID: <CAJmOi+MYHVc1HQAEcq1ftotW7AaOiQhwuWLVJC0eu2pET_mg3A@mail.gmail.com>

I think you've misunderstood that excerpt.  By "temporary development
state", it means _between_ CRAN releases; packages in a development
state are not suitable for CRAN, as the policy states:

> CRAN hosts packages of publication quality and is not a development platform.

You'll need to stop depending on that package until it's fixed and the
fix is on CRAN. That said, it looks like it might be relatively
straightforward to disentangle yourself from the package -- just
rewrite the offending example?

On Wed, 16 Nov 2022 at 15:35, Bernd.Gruber <Bernd.Gruber at canberra.edu.au> wrote:
>
> Hi,
>
> I have a package (dartR) that needs to be updated by CRAN (and got a time set until a certain date). It depends on a package that is currently showing errors in the CRAN results and therefore fails. The maintainer of that package is busily trying to rectify the error (as can be seen be repeated submissions in the last weeks), but was not able yet to fix it. As we are running out of time my approach would be to have a version of the package that fixes it and use Remotes: in the description. It runs fine without errors.
>
> In the R-packages book I read the following:
>
> "It's important to note that you should not submit your package to CRAN in the intermediate state, meaning with a Remotes field and with a dependency required at a version that's not available from CRAN or Bioconductor. For CRAN packages, this can only be a temporary development state, eventually resolved when the dependency updates on CRAN and you can bump your minimum version accordingly."
>
> So is it okay to submit our package with a remote statement until the maintainer of the other package has fixed their issues?
>
> Thanks in advance,
> Bernd
>
>
> ==============================================================================
> Dr Bernd Gruber                                              )/_
>                                                          _.--..---"-,--c_
> Professor Ecological Modelling                      \|..'           ._O__)_
> Tel: (02) 6206 3804                         ,=.    _.+   _ \..--( /
> Fax: (02) 6201 2328                           \\.-''_.-' \ (     \_
> Institute for Applied Ecology                  `'''       `\__   /\
> Faculty of Science and Technology                          ')
> University of Canberra   ACT 2601 AUSTRALIA
> Email: bernd.gruber at canberra.edu.au<mailto:bernd.gruber at canberra.edu.au>
> WWW: bernd-gruber<https://researchprofiles.canberra.edu.au/en/persons/bernd-gruber>
> ==============================================================================
>
> [UC Logo]<http://www.canberra.edu.au>
>
> [Its time to control your Future. Apply now to study with Australia's fastest rising University. *QS, 2022]<https://www.canberra.edu.au/>
>
>
>
> The Ngunnawal people are the Traditional Custodians of the ACT where UC's Bruce Campus is situated and are an integral and celebrated part of UC's culture. We also acknowledge other First Nations Peoples.
>
> Australian Government Higher Education Registered Provider (CRICOS) #00212K. TEQSA Provider ID: PRV12003 (Australian University)
> Email Disclaimer<https://www.canberra.edu.au/about-uc/disclaimer-copyright-privacy-accessibility>
>
> [UC Facebook]<https://www.facebook.com/UniversityOfCanberra>    [UC Twitter] <https://twitter.com/UniCanberra>     [UC Instagram] <https://www.instagram.com/unicanberra/>     [UC Linkedin] <https://au.linkedin.com/school/university-of-canberra/>     [UC Youtube] <https://www.youtube.com/user/uniofcanberra>     [University of Canberra] <http://www.canberra.edu.au>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r|ko@ke|ter @end|ng |rom un|-@|egen@de  Wed Nov 16 07:29:25 2022
From: r|ko@ke|ter @end|ng |rom un|-@|egen@de (Riko Kelter)
Date: Wed, 16 Nov 2022 07:29:25 +0100
Subject: [R-pkg-devel] Too many processes spawned on Windows and Debian,
 although only 2 cores should be used
Message-ID: <29efb5f0-c018-3a85-7dfb-4a58d847bc3f@uni-siegen.de>

Hello,

I have a short question on the number of processes which are spawned 
during parallelization. My package passes R CMD check ?as-cran on MacOS 
and Linux, but the vignettes fail with the following error on Windows 
and Debian:

|--- re-building 'gettingstarted.Rmd' using rmarkdown Quitting from 
lines 121-122 (gettingstarted.Rmd) Error: processing vignette 
'gettingstarted.Rmd' failed with diagnostics: 55 simultaneous processes 
spawned --- failed re-building 'gettingstarted.Rmd'|

The same happens on Debian, where 31 processes are spawned. In all 
vignettes, I followed a stackoverflow thread and included the following 
check for the number of cores on CRAN:

|chk <- Sys.getenv("_R_CHECK_LIMIT_CORES_", "") if (nzchar(chk) && chk 
== "TRUE") { # use 2 cores in CRAN/Travis/AppVeyor num_workers <- 2L } 
else { # use all cores in devtools::test() num_workers <- 
parallel::detectCores() }|

see also 
https://stackoverflow.com/questions/50571325/r-cran-check-fail-when-using-parallel-functions

Link to the files and check results:

https://win-builder.r-project.org/incoming_pretest/brada_1.0_20221115_141147/

Question: Does anyone have a clue why so many processes are spawned on 
Windows / Debian? There should be only 2 processes spawned if I am correct.

PS: Maybe there is a Windows user who can reproduce the 
gettingstarted.Rmd vignette and tell me how many processes are spawned 
on his machine.

PPS: I saw someone recommending to put options(mc.cores=2) at the top of 
each vignette, but I think the above code snippet replaces this.

Thanks for any help, all the best,

Riko

?
	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Nov 16 08:29:27 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 16 Nov 2022 10:29:27 +0300
Subject: [R-pkg-devel] Too many processes spawned on Windows and Debian,
 although only 2 cores should be used
In-Reply-To: <29efb5f0-c018-3a85-7dfb-4a58d847bc3f@uni-siegen.de>
References: <29efb5f0-c018-3a85-7dfb-4a58d847bc3f@uni-siegen.de>
Message-ID: <20221116102927.21ec20d5@Tarkus>

? Wed, 16 Nov 2022 07:29:25 +0100
Riko Kelter <riko.kelter at uni-siegen.de> ?????:

> if (nzchar(chk) && chk == "TRUE") {
>  # use 2 cores in CRAN/Travis/AppVeyor
>  num_workers <- 2L
> }

The check in parallel:::.check_ncores is a bit different:

chk <- tolower(Sys.getenv("_R_CHECK_LIMIT_CORES_", ""))
if (nzchar(chk) && (chk != "false")) # then limit the workers

Unless you actually set _R_CHECK_LIMIT_CORES_=FALSE on your machine
when running the checks, I would perform a more pessimistic check of
nzchar(chk) (without additionally checking whether it's TRUE or not
FALSE), though copy-pasting the check from parallel:::.check_ncores
should also work.

Can we see the rest of the vignette? Perhaps the problem is not with
the check. For example, a piece of code might be implicitly spawning a
new cluster, defaulting to all of the cores instead of num_workers.

> 	[[alternative HTML version deleted]]

Unfortunately, the plain text version of your message prepared by your
mailer has all the code samples mangled:
https://stat.ethz.ch/pipermail/r-package-devel/2022q4/008647.html

Please compose your messages to R mailing lists in plain text.

-- 
Best regards,
Ivan


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Nov 16 12:36:06 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 16 Nov 2022 06:36:06 -0500
Subject: [R-pkg-devel] 
 [UNCLASSIFIED] Remotes in description when submitting
 a package until a dependency is fixed
In-Reply-To: <CAJmOi+MYHVc1HQAEcq1ftotW7AaOiQhwuWLVJC0eu2pET_mg3A@mail.gmail.com>
References: <ME3PR01MB79446317E48550467BFACB55D4079@ME3PR01MB7944.ausprd01.prod.outlook.com>
 <CAJmOi+MYHVc1HQAEcq1ftotW7AaOiQhwuWLVJC0eu2pET_mg3A@mail.gmail.com>
Message-ID: <bf948167-8edd-5a44-d302-8bcc5e68bfeb@gmail.com>

On 15/11/2022 11:59 p.m., Hugh Parsonage wrote:
> I think you've misunderstood that excerpt.  By "temporary development
> state", it means _between_ CRAN releases; packages in a development
> state are not suitable for CRAN, as the policy states:
> 
>> CRAN hosts packages of publication quality and is not a development platform.
> 
> You'll need to stop depending on that package until it's fixed and the
> fix is on CRAN. That said, it looks like it might be relatively
> straightforward to disentangle yourself from the package -- just
> rewrite the offending example?

Another solution is to put a version of that package in your own drat 
repository, and use "Additional_repositories".  For example, at one 
point rgl used webshot2 before it was released, and I had

   Suggests:  webshot2, ...
   Additional_repositories:  https://dmurdoch.github.io/drat

with a copy of webshot2 in the drat repository.

The disadvantage of this approach is that you'll need to keep that 
repository up to date as the third party package evolves, and eventually 
remove the Additional_repositories: line from your DESCRIPTION, which 
requires your own package update.

See https://github.com/eddelbuettel/drat for instructions on setting up 
the drat repository.

Duncan Murdoch

> 
> On Wed, 16 Nov 2022 at 15:35, Bernd.Gruber <Bernd.Gruber at canberra.edu.au> wrote:
>>
>> Hi,
>>
>> I have a package (dartR) that needs to be updated by CRAN (and got a time set until a certain date). It depends on a package that is currently showing errors in the CRAN results and therefore fails. The maintainer of that package is busily trying to rectify the error (as can be seen be repeated submissions in the last weeks), but was not able yet to fix it. As we are running out of time my approach would be to have a version of the package that fixes it and use Remotes: in the description. It runs fine without errors.
>>
>> In the R-packages book I read the following:
>>
>> "It's important to note that you should not submit your package to CRAN in the intermediate state, meaning with a Remotes field and with a dependency required at a version that's not available from CRAN or Bioconductor. For CRAN packages, this can only be a temporary development state, eventually resolved when the dependency updates on CRAN and you can bump your minimum version accordingly."
>>
>> So is it okay to submit our package with a remote statement until the maintainer of the other package has fixed their issues?
>>
>> Thanks in advance,
>> Bernd
>>
>>
>> ==============================================================================
>> Dr Bernd Gruber                                              )/_
>>                                                           _.--..---"-,--c_
>> Professor Ecological Modelling                      \|..'           ._O__)_
>> Tel: (02) 6206 3804                         ,=.    _.+   _ \..--( /
>> Fax: (02) 6201 2328                           \\.-''_.-' \ (     \_
>> Institute for Applied Ecology                  `'''       `\__   /\
>> Faculty of Science and Technology                          ')
>> University of Canberra   ACT 2601 AUSTRALIA
>> Email: bernd.gruber at canberra.edu.au<mailto:bernd.gruber at canberra.edu.au>
>> WWW: bernd-gruber<https://researchprofiles.canberra.edu.au/en/persons/bernd-gruber>
>> ==============================================================================
>>
>> [UC Logo]<http://www.canberra.edu.au>
>>
>> [Its time to control your Future. Apply now to study with Australia's fastest rising University. *QS, 2022]<https://www.canberra.edu.au/>
>>
>>
>>
>> The Ngunnawal people are the Traditional Custodians of the ACT where UC's Bruce Campus is situated and are an integral and celebrated part of UC's culture. We also acknowledge other First Nations Peoples.
>>
>> Australian Government Higher Education Registered Provider (CRICOS) #00212K. TEQSA Provider ID: PRV12003 (Australian University)
>> Email Disclaimer<https://www.canberra.edu.au/about-uc/disclaimer-copyright-privacy-accessibility>
>>
>> [UC Facebook]<https://www.facebook.com/UniversityOfCanberra>    [UC Twitter] <https://twitter.com/UniCanberra>     [UC Instagram] <https://www.instagram.com/unicanberra/>     [UC Linkedin] <https://au.linkedin.com/school/university-of-canberra/>     [UC Youtube] <https://www.youtube.com/user/uniofcanberra>     [University of Canberra] <http://www.canberra.edu.au>
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r|ko@ke|ter @end|ng |rom un|-@|egen@de  Wed Nov 16 15:37:31 2022
From: r|ko@ke|ter @end|ng |rom un|-@|egen@de (Riko Kelter)
Date: Wed, 16 Nov 2022 15:37:31 +0100
Subject: [R-pkg-devel] Too many processes spawned on Windows and Debian,
 although only 2 cores should be used
In-Reply-To: <20221116102927.21ec20d5@Tarkus>
References: <29efb5f0-c018-3a85-7dfb-4a58d847bc3f@uni-siegen.de>
 <20221116102927.21ec20d5@Tarkus>
Message-ID: <645113c2-e015-6bd3-2633-81485489d2a0@uni-siegen.de>

Hi Ivan,

thanks for the info, I changed the check as you pointed out and it 
worked. R CMD build and R CMD check --as-cran run without errors or 
warnings on Linux + MacOS. However, I uploaded the package again at the 
WINBUILDER service and obtained the following weird error:

* checking re-building of vignette outputs ... ERROR
Check process probably crashed or hung up for 20 minutes ... killed
Most likely this happened in the example checks (?),
if not, ignore the following last lines of example output:

======== End of example output (where/before crash/hang up occured ?) ========

Strangely, there are no examples included in any .Rd file. Also, I 
checked whether a piece of code spawns new clusters. However, the 
critical lines are inside a function which is repeatedly called in the 
vignettes. The parallelized part looks as copied below. After the code 
is executed the cluster is stopped. I use registerDoSNOW(cl) because 
otherwise my progress bar does not work.


Code:

############################### CHECK CORES

chk <- tolower(Sys.getenv("_R_CHECK_LIMIT_CORES_", ""))
 ? if (nzchar(chk) && (chk != "false")){? # then limit the workers
 ??? num_workers <- 2L
 ? } else {
 ??? # use all cores
 ??? num_workers <- parallel::detectCores()
 ? }

 ? chk <- Sys.getenv("_R_CHECK_LIMIT_CORES_", "")

 ? cl <- parallel::makeCluster(num_workers[1]-1) # not to overload your 
computer
 ? #doParallel::registerDoParallel(cl)
 ? doSNOW::registerDoSNOW(cl)

############################### SET UP PROGRESS BAR

pb <- progress_bar$new(
 ??? format = "Iteration = :letter [:bar] :elapsed | expected time till 
finish: :eta",
 ??? total = nsim,??? # 100
 ??? width = 120)

 ? progress_letter <- seq(1,nsim)? # token reported in progress bar

 ? # allowing progress bar to be used in foreach 
-----------------------------
 ? progress <- function(n){
 ??? pb$tick(tokens = list(letter = progress_letter[n]))
 ? }

 ? opts <- list(progress = progress)

############################### MAIN SIMULATION

if(method=="PP"){
 ??? finalMatrix <- foreach::foreach(s=1:nsim, .combine=rbind, .packages 
= c("extraDistr", "fbst"), .options.snow = opts) %dopar% {
 ????? tempMatrix = singleTrial_PP(s = s, n=nInit, responseMatrix = 
responseMatrix, nInit = nInit, Nmax = Nmax, batchsize = batchsize, a0 = 
a0, b0 = b0)

 ????? tempMatrix #Equivalent to finalMatrix = cbind(finalMatrix, 
tempMatrix)
 ??? }
 ? }

 ? if(method=="PPe"){
 ??? refFunc = refFunc
 ??? nu = nu
 ??? shape1 = shape1
 ??? shape2 = shape2
 ??? if(refFunc == "flat"){
 ????? finalMatrix <- foreach::foreach(s=1:nsim, .combine=rbind, 
.packages = c("extraDistr", "fbst"), .options.snow = opts) %dopar% {
 ??????? tempMatrix = singleTrial_PPe(s = s, n=nInit, responseMatrix = 
responseMatrix, nInit = nInit, Nmax = Nmax, batchsize = batchsize, a0 = 
a0, b0 = b0, refFunc = "flat")

 ??????? tempMatrix #Equivalent to finalMatrix = cbind(finalMatrix, 
tempMatrix)
 ????? }
 ??? }
 ??? if(refFunc == "beta"){
 ????? finalMatrix <- foreach::foreach(s=1:nsim, .combine=rbind, 
.packages = c("extraDistr", "fbst"), .options.snow = opts) %dopar% {
 ??????? tempMatrix = singleTrial_PPe(s = s, n=nInit, responseMatrix = 
responseMatrix, nInit = nInit, Nmax = Nmax, batchsize = batchsize, a0 = 
a0, b0 = b0, refFunc = "beta",
 ???????????????????????????????????? shape1 = shape1, shape2 = shape2)

 ??????? tempMatrix #Equivalent to finalMatrix = cbind(finalMatrix, 
tempMatrix)
 ????? }
 ??? }
 ??? if(refFunc == "binaryStep"){
 ????? finalMatrix <- foreach::foreach(s=1:nsim, .combine=rbind, 
.packages = c("extraDistr", "fbst"), .options.snow = opts) %dopar% {
 ??????? tempMatrix = singleTrial_PPe(s = s, n=nInit, responseMatrix = 
responseMatrix, nInit = nInit, Nmax = Nmax, batchsize = batchsize, a0 = 
a0, b0 = b0, refFunc = "binaryStep",
 ???????????????????????????????????? shape1 = shape1, shape2 = shape2, 
truncation = truncation)

 ??????? tempMatrix #Equivalent to finalMatrix = cbind(finalMatrix, 
tempMatrix)
 ????? }
 ??? }
 ??? if(refFunc == "relu"){
 ????? finalMatrix <- foreach::foreach(s=1:nsim, .combine=rbind, 
.packages = c("extraDistr", "fbst"), .options.snow = opts) %dopar% {
 ??????? tempMatrix = singleTrial_PPe(s = s, n=nInit, responseMatrix = 
responseMatrix, nInit = nInit, Nmax = Nmax, batchsize = batchsize, a0 = 
a0, b0 = b0, refFunc = "relu",
 ???????????????????????????????????? shape1 = shape1, shape2 = shape2, 
truncation = truncation)

 ??????? tempMatrix #Equivalent to finalMatrix = cbind(finalMatrix, 
tempMatrix)
 ????? }
 ??? }
 ??? if(refFunc == "palu"){
 ????? finalMatrix <- foreach::foreach(s=1:nsim, .combine=rbind, 
.packages = c("extraDistr", "fbst"), .options.snow = opts) %dopar% {
 ??????? tempMatrix = singleTrial_PPe(s = s, n=nInit, responseMatrix = 
responseMatrix, nInit = nInit, Nmax = Nmax, batchsize = batchsize, a0 = 
a0, b0 = b0, refFunc = "palu",
 ???????????????????????????????????? shape1 = shape1, shape2 = shape2, 
truncation = truncation)

 ??????? tempMatrix #Equivalent to finalMatrix = cbind(finalMatrix, 
tempMatrix)
 ????? }
 ??? }
 ??? if(refFunc == "lolu"){
 ????? finalMatrix <- foreach::foreach(s=1:nsim, .combine=rbind, 
.packages = c("extraDistr", "fbst"), .options.snow = opts) %dopar% {
 ??????? tempMatrix = singleTrial_PPe(s = s, n=nInit, responseMatrix = 
responseMatrix, nInit = nInit, Nmax = Nmax, batchsize = batchsize, a0 = 
a0, b0 = b0, refFunc = "lolu",
 ???????????????????????????????????? shape1 = shape1, shape2 = shape2, 
truncation = truncation)

 ??????? tempMatrix #Equivalent to finalMatrix = cbind(finalMatrix, 
tempMatrix)
 ????? }
 ??? }
 ? }

############################### STOP CLUSTER

parallel::stopCluster(cl) #stop cluster



Kind regards,

Riko


Am 16.11.22 um 08:29 schrieb Ivan Krylov:
> ? Wed, 16 Nov 2022 07:29:25 +0100
> Riko Kelter<riko.kelter at uni-siegen.de>  ?????:
>
>> if (nzchar(chk) && chk == "TRUE") {
>>   # use 2 cores in CRAN/Travis/AppVeyor
>>   num_workers <- 2L
>> }
> The check in parallel:::.check_ncores is a bit different:
>
> chk <- tolower(Sys.getenv("_R_CHECK_LIMIT_CORES_", ""))
> if (nzchar(chk) && (chk != "false")) # then limit the workers
>
> Unless you actually set _R_CHECK_LIMIT_CORES_=FALSE on your machine
> when running the checks, I would perform a more pessimistic check of
> nzchar(chk) (without additionally checking whether it's TRUE or not
> FALSE), though copy-pasting the check from parallel:::.check_ncores
> should also work.
>
> Can we see the rest of the vignette? Perhaps the problem is not with
> the check. For example, a piece of code might be implicitly spawning a
> new cluster, defaulting to all of the cores instead of num_workers.
>
>> 	[[alternative HTML version deleted]]
> Unfortunately, the plain text version of your message prepared by your
> mailer has all the code samples mangled:
> https://stat.ethz.ch/pipermail/r-package-devel/2022q4/008647.html
>
> Please compose your messages to R mailing lists in plain text.
>
	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Wed Nov 16 17:10:00 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 16 Nov 2022 10:10:00 -0600
Subject: [R-pkg-devel] How ton print in the console from Rcpp
In-Reply-To: <CALcKxsqWY+vKgm77_4qAb-6CG6Ewiq-XbZLDrZjeMjny2_eSQg@mail.gmail.com>
References: <CALcKxsq1EYdsSh3i2MPLop8fxngVpAKfY8ZqMCmbG+k280VJoA@mail.gmail.com>
 <20221020144644.38d04ef0@arachnoid>
 <25425.16943.184057.68532@rob.eddelbuettel.com>
 <SJ0PR10MB5719CC02075B1218B23F2A1FFE2A9@SJ0PR10MB5719.namprd10.prod.outlook.com>
 <25427.64684.611479.503767@rob.eddelbuettel.com>
 <SJ0PR10MB5719655A3220440969E96921FE029@SJ0PR10MB5719.namprd10.prod.outlook.com>
 <20221114170324.08ff0540@arachnoid>
 <25458.23076.693589.60544@rob.eddelbuettel.com>
 <CALcKxsqWY+vKgm77_4qAb-6CG6Ewiq-XbZLDrZjeMjny2_eSQg@mail.gmail.com>
Message-ID: <25461.2904.140965.714585@rob.eddelbuettel.com>


On 14 November 2022 at 16:34, Elys?e Aristide wrote:
| I was convinced that the issue is local. The warning message only appears
| on MAC.
| I did not try with another computer. I used CRAN macbuilder service and got
| the warning message. I guess this is also the computer CRAN uses.

Some further (and very patient) probing on GitHub in a related (older) issue
reveals that I was wrong here. My thanks for to Ivan for his patience, and
apologies to Elys?e: it was indeed the combination of inclusing RcppArmadillo
prior to RcppNumerical and the combination of the former undefining NDEBUG
and the latter having assert() statement that caused your trouble.

And the `#undef NDEBUG` in RcppArmadillo, while not causing harm among the
1000+ packages on CRAN I can test against (and do test against each and every
time we make changes) simply does not do anything useful for RcppArmadillo or
Armadillo. But it leaves a possible side effect in packages using `assert()`
as RcppNumerical does.

So having tested a (conditional) removal (which one can override with a new
env.var. if one needs to) in another full reverse-dependencies run (which,
unsurprisingly, shows no ill effect as it showed no ill effect of having the
#undef) I will make that change on GitHub which will go into the next release
(which we aim to have less than monthly to comply with CRAN's desire of 'no
more than six releases in six months).

Thanks again to Ivan.

Cheers, Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From henr|k@bengt@@on @end|ng |rom gm@||@com  Wed Nov 16 17:13:49 2022
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Wed, 16 Nov 2022 08:13:49 -0800
Subject: [R-pkg-devel] Too many processes spawned on Windows and Debian,
 although only 2 cores should be used
In-Reply-To: <645113c2-e015-6bd3-2633-81485489d2a0@uni-siegen.de>
References: <29efb5f0-c018-3a85-7dfb-4a58d847bc3f@uni-siegen.de>
 <20221116102927.21ec20d5@Tarkus>
 <645113c2-e015-6bd3-2633-81485489d2a0@uni-siegen.de>
Message-ID: <CAFDcVCTqSDt_9pULQyuejYkf06v6hqN-rD+ogLCn=aoY4F1Bww@mail.gmail.com>

Hello.

As already pointed out, the current R implementation treats any
non-empty value on _R_CHECK_LIMIT_CORES_ different from "false" as a
true value, e.g. "TRUE", "true", "T", "1", but also "donald duck".
Using '--as-cran' sets _R_CHECK_LIMIT_CORES_="TRUE", if unset.  If
already set, it'll not touch it.  So, it could be that a CRAN check
server already uses, say, _R_CHECK_LIMIT_CORES_="true".  We cannot
make assumptions about that.

To make your life, and an end-user's too, easier, I suggest just using

  num_workers <- 2L

without conditioning on running on CRAN or not.

Why? There are many problems with using parallel::detectCores().

First of all, it can return NA_integer_ on some systems, so you cannot
assume it gives a valid value (== error).  It can also return 1L,
which means your 'num_workers - 1' will give zero worker (== error).
You need to account for that if you rely on detectCores().

Second, detectCores() returns number of physical CPU cores. It's
getting more and more common to run in "cgroups" constrained
environments where your R process only gets access to a fraction of
these cores.  Such constrains are in place in many shared multi-user
HPC environments, and sometimes when using Linux containers (e.g.
Docker, Apptainer, and Podman).  A notable example of this is when
using the RStudio Cloud.  So, if you use detectCores() on those
systems, you'll actually over-parallelize, which slows things down and
you risk running out of memory. For example, you might launch 64
parallel workers when you only have access to four CPU cores.  Each
core will be clogged up by 16 workers.

Third, if you default to detectCores() and a user runs your code on a
machine shared by many users, the other users will not be happy.  Note
that the user will often not know they're overusing the machine.  So,
it's a loss-loss for everyone.

Fourth, detectCores() will return *all* physical CPU cores on the
current machine. These days we have machines with 128, 196, and more
cores.  Are you sure your software will actually run faster when using
that many cores?  The benefit from parallelization tends to decrease
as you add more workers until there is no longer an speed improvement.
If you keep adding more parallel workers you're going to see a
negative effect, i.e. you're penalized when parallelization too much.
So, be aware that when you test on 16 or 24 cores and things runs
really fast, that might not be the experience for other users, or
users in the future (who will have access to more CPU cores).

So, yes, I suggest not to use num_workers <- detectCores().  Pick a
fixed number instead, and the CRAN policy suggests using two.  You can
let the user control how many they want to use.  As a developer, it's
really really ... (read impossible) to know how many they want to use.

Cheers,

Henrik

PS. Note that detectCores() returns a single integer value (possible
NA_integer_).  Because of this, there is no need to subset with
num_workers[1]. I've seen this used in code; not sure where it comes
from but it looks like a cut'n'paste behavior.

On Wed, Nov 16, 2022 at 6:38 AM Riko Kelter <riko.kelter at uni-siegen.de> wrote:
>
> Hi Ivan,
>
> thanks for the info, I changed the check as you pointed out and it
> worked. R CMD build and R CMD check --as-cran run without errors or
> warnings on Linux + MacOS. However, I uploaded the package again at the
> WINBUILDER service and obtained the following weird error:
>
> * checking re-building of vignette outputs ... ERROR
> Check process probably crashed or hung up for 20 minutes ... killed
> Most likely this happened in the example checks (?),
> if not, ignore the following last lines of example output:
>
> ======== End of example output (where/before crash/hang up occured ?) ========
>
> Strangely, there are no examples included in any .Rd file. Also, I
> checked whether a piece of code spawns new clusters. However, the
> critical lines are inside a function which is repeatedly called in the
> vignettes. The parallelized part looks as copied below. After the code
> is executed the cluster is stopped. I use registerDoSNOW(cl) because
> otherwise my progress bar does not work.
>
>
> Code:
>
> ############################### CHECK CORES
>
> chk <- tolower(Sys.getenv("_R_CHECK_LIMIT_CORES_", ""))
>    if (nzchar(chk) && (chk != "false")){  # then limit the workers
>      num_workers <- 2L
>    } else {
>      # use all cores
>      num_workers <- parallel::detectCores()
>    }
>
>    chk <- Sys.getenv("_R_CHECK_LIMIT_CORES_", "")
>
>    cl <- parallel::makeCluster(num_workers[1]-1) # not to overload your
> computer
>    #doParallel::registerDoParallel(cl)
>    doSNOW::registerDoSNOW(cl)
>
> ############################### SET UP PROGRESS BAR
>
> pb <- progress_bar$new(
>      format = "Iteration = :letter [:bar] :elapsed | expected time till
> finish: :eta",
>      total = nsim,    # 100
>      width = 120)
>
>    progress_letter <- seq(1,nsim)  # token reported in progress bar
>
>    # allowing progress bar to be used in foreach
> -----------------------------
>    progress <- function(n){
>      pb$tick(tokens = list(letter = progress_letter[n]))
>    }
>
>    opts <- list(progress = progress)
>
> ############################### MAIN SIMULATION
>
> if(method=="PP"){
>      finalMatrix <- foreach::foreach(s=1:nsim, .combine=rbind, .packages
> = c("extraDistr", "fbst"), .options.snow = opts) %dopar% {
>        tempMatrix = singleTrial_PP(s = s, n=nInit, responseMatrix =
> responseMatrix, nInit = nInit, Nmax = Nmax, batchsize = batchsize, a0 =
> a0, b0 = b0)
>
>        tempMatrix #Equivalent to finalMatrix = cbind(finalMatrix,
> tempMatrix)
>      }
>    }
>
>    if(method=="PPe"){
>      refFunc = refFunc
>      nu = nu
>      shape1 = shape1
>      shape2 = shape2
>      if(refFunc == "flat"){
>        finalMatrix <- foreach::foreach(s=1:nsim, .combine=rbind,
> .packages = c("extraDistr", "fbst"), .options.snow = opts) %dopar% {
>          tempMatrix = singleTrial_PPe(s = s, n=nInit, responseMatrix =
> responseMatrix, nInit = nInit, Nmax = Nmax, batchsize = batchsize, a0 =
> a0, b0 = b0, refFunc = "flat")
>
>          tempMatrix #Equivalent to finalMatrix = cbind(finalMatrix,
> tempMatrix)
>        }
>      }
>      if(refFunc == "beta"){
>        finalMatrix <- foreach::foreach(s=1:nsim, .combine=rbind,
> .packages = c("extraDistr", "fbst"), .options.snow = opts) %dopar% {
>          tempMatrix = singleTrial_PPe(s = s, n=nInit, responseMatrix =
> responseMatrix, nInit = nInit, Nmax = Nmax, batchsize = batchsize, a0 =
> a0, b0 = b0, refFunc = "beta",
>                                       shape1 = shape1, shape2 = shape2)
>
>          tempMatrix #Equivalent to finalMatrix = cbind(finalMatrix,
> tempMatrix)
>        }
>      }
>      if(refFunc == "binaryStep"){
>        finalMatrix <- foreach::foreach(s=1:nsim, .combine=rbind,
> .packages = c("extraDistr", "fbst"), .options.snow = opts) %dopar% {
>          tempMatrix = singleTrial_PPe(s = s, n=nInit, responseMatrix =
> responseMatrix, nInit = nInit, Nmax = Nmax, batchsize = batchsize, a0 =
> a0, b0 = b0, refFunc = "binaryStep",
>                                       shape1 = shape1, shape2 = shape2,
> truncation = truncation)
>
>          tempMatrix #Equivalent to finalMatrix = cbind(finalMatrix,
> tempMatrix)
>        }
>      }
>      if(refFunc == "relu"){
>        finalMatrix <- foreach::foreach(s=1:nsim, .combine=rbind,
> .packages = c("extraDistr", "fbst"), .options.snow = opts) %dopar% {
>          tempMatrix = singleTrial_PPe(s = s, n=nInit, responseMatrix =
> responseMatrix, nInit = nInit, Nmax = Nmax, batchsize = batchsize, a0 =
> a0, b0 = b0, refFunc = "relu",
>                                       shape1 = shape1, shape2 = shape2,
> truncation = truncation)
>
>          tempMatrix #Equivalent to finalMatrix = cbind(finalMatrix,
> tempMatrix)
>        }
>      }
>      if(refFunc == "palu"){
>        finalMatrix <- foreach::foreach(s=1:nsim, .combine=rbind,
> .packages = c("extraDistr", "fbst"), .options.snow = opts) %dopar% {
>          tempMatrix = singleTrial_PPe(s = s, n=nInit, responseMatrix =
> responseMatrix, nInit = nInit, Nmax = Nmax, batchsize = batchsize, a0 =
> a0, b0 = b0, refFunc = "palu",
>                                       shape1 = shape1, shape2 = shape2,
> truncation = truncation)
>
>          tempMatrix #Equivalent to finalMatrix = cbind(finalMatrix,
> tempMatrix)
>        }
>      }
>      if(refFunc == "lolu"){
>        finalMatrix <- foreach::foreach(s=1:nsim, .combine=rbind,
> .packages = c("extraDistr", "fbst"), .options.snow = opts) %dopar% {
>          tempMatrix = singleTrial_PPe(s = s, n=nInit, responseMatrix =
> responseMatrix, nInit = nInit, Nmax = Nmax, batchsize = batchsize, a0 =
> a0, b0 = b0, refFunc = "lolu",
>                                       shape1 = shape1, shape2 = shape2,
> truncation = truncation)
>
>          tempMatrix #Equivalent to finalMatrix = cbind(finalMatrix,
> tempMatrix)
>        }
>      }
>    }
>
> ############################### STOP CLUSTER
>
> parallel::stopCluster(cl) #stop cluster
>
>
>
> Kind regards,
>
> Riko
>
>
> Am 16.11.22 um 08:29 schrieb Ivan Krylov:
> > ? Wed, 16 Nov 2022 07:29:25 +0100
> > Riko Kelter<riko.kelter at uni-siegen.de>  ?????:
> >
> >> if (nzchar(chk) && chk == "TRUE") {
> >>   # use 2 cores in CRAN/Travis/AppVeyor
> >>   num_workers <- 2L
> >> }
> > The check in parallel:::.check_ncores is a bit different:
> >
> > chk <- tolower(Sys.getenv("_R_CHECK_LIMIT_CORES_", ""))
> > if (nzchar(chk) && (chk != "false")) # then limit the workers
> >
> > Unless you actually set _R_CHECK_LIMIT_CORES_=FALSE on your machine
> > when running the checks, I would perform a more pessimistic check of
> > nzchar(chk) (without additionally checking whether it's TRUE or not
> > FALSE), though copy-pasting the check from parallel:::.check_ncores
> > should also work.
> >
> > Can we see the rest of the vignette? Perhaps the problem is not with
> > the check. For example, a piece of code might be implicitly spawning a
> > new cluster, defaulting to all of the cores instead of num_workers.
> >
> >>      [[alternative HTML version deleted]]
> > Unfortunately, the plain text version of your message prepared by your
> > mailer has all the code samples mangled:
> > https://stat.ethz.ch/pipermail/r-package-devel/2022q4/008647.html
> >
> > Please compose your messages to R mailing lists in plain text.
> >
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Wed Nov 16 17:17:00 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 16 Nov 2022 10:17:00 -0600
Subject: [R-pkg-devel] 
 [UNCLASSIFIED] Remotes in description when submitting
 a package until a dependency is fixed
In-Reply-To: <bf948167-8edd-5a44-d302-8bcc5e68bfeb@gmail.com>
References: <ME3PR01MB79446317E48550467BFACB55D4079@ME3PR01MB7944.ausprd01.prod.outlook.com>
 <CAJmOi+MYHVc1HQAEcq1ftotW7AaOiQhwuWLVJC0eu2pET_mg3A@mail.gmail.com>
 <bf948167-8edd-5a44-d302-8bcc5e68bfeb@gmail.com>
Message-ID: <25461.3324.407613.869686@rob.eddelbuettel.com>


On 16 November 2022 at 06:36, Duncan Murdoch wrote:
| On 15/11/2022 11:59 p.m., Hugh Parsonage wrote:
| > I think you've misunderstood that excerpt.  By "temporary development
| > state", it means _between_ CRAN releases; packages in a development
| > state are not suitable for CRAN, as the policy states:
| > 
| >> CRAN hosts packages of publication quality and is not a development platform.
| > 
| > You'll need to stop depending on that package until it's fixed and the
| > fix is on CRAN. That said, it looks like it might be relatively
| > straightforward to disentangle yourself from the package -- just
| > rewrite the offending example?
| 
| Another solution is to put a version of that package in your own drat 
| repository, and use "Additional_repositories".  For example, at one 
| point rgl used webshot2 before it was released, and I had
| 
|    Suggests:  webshot2, ...
|    Additional_repositories:  https://dmurdoch.github.io/drat
| 
| with a copy of webshot2 in the drat repository.
| 
| The disadvantage of this approach is that you'll need to keep that 
| repository up to date as the third party package evolves, and eventually 
| remove the Additional_repositories: line from your DESCRIPTION, which 
| requires your own package update.
| 
| See https://github.com/eddelbuettel/drat for instructions on setting up 
| the drat repository.

(Disclaimer: Author bias here.) Let me vouch for Additional_repositories:
along with packages in Suggests: (you cannot do this for Imports / Depends /
LinkingTo per CRAN Policy).  I have recently been relying on it a lot for a
package I (similarly) could not change that frequently at CRAN, and a
'semi-private / semi-public package' providing functionality I expect to be
provided by another package 'eventually'. With the caveat that you need the
Suggests: mechanism and hence _conditional_ use, it works just like CRAN.

In the meantime Additional_repositories: just works. It expands the set of
repos, so all operations relying on standard install.packages() calls (and
that includes using the remotes package to parse dependencies in CI, say)
just work, both at CRAN and in CI.

`drat` simply helps along by making it easier to provide compatible repositories.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From henr|k@bengt@@on @end|ng |rom gm@||@com  Wed Nov 16 17:20:57 2022
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Wed, 16 Nov 2022 08:20:57 -0800
Subject: [R-pkg-devel] 
 [UNCLASSIFIED] Remotes in description when submitting
 a package until a dependency is fixed
In-Reply-To: <bf948167-8edd-5a44-d302-8bcc5e68bfeb@gmail.com>
References: <ME3PR01MB79446317E48550467BFACB55D4079@ME3PR01MB7944.ausprd01.prod.outlook.com>
 <CAJmOi+MYHVc1HQAEcq1ftotW7AaOiQhwuWLVJC0eu2pET_mg3A@mail.gmail.com>
 <bf948167-8edd-5a44-d302-8bcc5e68bfeb@gmail.com>
Message-ID: <CAFDcVCTxFbKfS51wWD7SKJGBYmVpWP4JuN8tT8DwzF-EZ7Zqbg@mail.gmail.com>

Not sure if it's already been said, but note that we can only use
'Additional_repositories' for *optional* dependencies, which are
listed under 'Suggests' (and less used 'Enhances').  We cannot use
them for *hard* dependencies, which are listed under 'Depends' or
'Imports'. From the CRAN Policies
(https://cran.r-project.org/web/packages/policies.html):

"Packages on which a CRAN package depends should be available from a
mainstream repository: if any mentioned in ?Suggests? or ?Enhances?
fields are not from such a repository, where to obtain them at a
repository should be specified in an ?Additional_repositories? field
of the DESCRIPTION file (as a comma-separated list of repository URLs)
or for other means of access, described in the ?Description? field."

Currently, it's only CRAN and Bioconductor that are "mainstream" repositories.

/Henrik

On Wed, Nov 16, 2022 at 3:36 AM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 15/11/2022 11:59 p.m., Hugh Parsonage wrote:
> > I think you've misunderstood that excerpt.  By "temporary development
> > state", it means _between_ CRAN releases; packages in a development
> > state are not suitable for CRAN, as the policy states:
> >
> >> CRAN hosts packages of publication quality and is not a development platform.
> >
> > You'll need to stop depending on that package until it's fixed and the
> > fix is on CRAN. That said, it looks like it might be relatively
> > straightforward to disentangle yourself from the package -- just
> > rewrite the offending example?
>
> Another solution is to put a version of that package in your own drat
> repository, and use "Additional_repositories".  For example, at one
> point rgl used webshot2 before it was released, and I had
>
>    Suggests:  webshot2, ...
>    Additional_repositories:  https://dmurdoch.github.io/drat
>
> with a copy of webshot2 in the drat repository.
>
> The disadvantage of this approach is that you'll need to keep that
> repository up to date as the third party package evolves, and eventually
> remove the Additional_repositories: line from your DESCRIPTION, which
> requires your own package update.
>
> See https://github.com/eddelbuettel/drat for instructions on setting up
> the drat repository.
>
> Duncan Murdoch
>
> >
> > On Wed, 16 Nov 2022 at 15:35, Bernd.Gruber <Bernd.Gruber at canberra.edu.au> wrote:
> >>
> >> Hi,
> >>
> >> I have a package (dartR) that needs to be updated by CRAN (and got a time set until a certain date). It depends on a package that is currently showing errors in the CRAN results and therefore fails. The maintainer of that package is busily trying to rectify the error (as can be seen be repeated submissions in the last weeks), but was not able yet to fix it. As we are running out of time my approach would be to have a version of the package that fixes it and use Remotes: in the description. It runs fine without errors.
> >>
> >> In the R-packages book I read the following:
> >>
> >> "It's important to note that you should not submit your package to CRAN in the intermediate state, meaning with a Remotes field and with a dependency required at a version that's not available from CRAN or Bioconductor. For CRAN packages, this can only be a temporary development state, eventually resolved when the dependency updates on CRAN and you can bump your minimum version accordingly."
> >>
> >> So is it okay to submit our package with a remote statement until the maintainer of the other package has fixed their issues?
> >>
> >> Thanks in advance,
> >> Bernd
> >>
> >>
> >> ==============================================================================
> >> Dr Bernd Gruber                                              )/_
> >>                                                           _.--..---"-,--c_
> >> Professor Ecological Modelling                      \|..'           ._O__)_
> >> Tel: (02) 6206 3804                         ,=.    _.+   _ \..--( /
> >> Fax: (02) 6201 2328                           \\.-''_.-' \ (     \_
> >> Institute for Applied Ecology                  `'''       `\__   /\
> >> Faculty of Science and Technology                          ')
> >> University of Canberra   ACT 2601 AUSTRALIA
> >> Email: bernd.gruber at canberra.edu.au<mailto:bernd.gruber at canberra.edu.au>
> >> WWW: bernd-gruber<https://researchprofiles.canberra.edu.au/en/persons/bernd-gruber>
> >> ==============================================================================
> >>
> >> [UC Logo]<http://www.canberra.edu.au>
> >>
> >> [Its time to control your Future. Apply now to study with Australia's fastest rising University. *QS, 2022]<https://www.canberra.edu.au/>
> >>
> >>
> >>
> >> The Ngunnawal people are the Traditional Custodians of the ACT where UC's Bruce Campus is situated and are an integral and celebrated part of UC's culture. We also acknowledge other First Nations Peoples.
> >>
> >> Australian Government Higher Education Registered Provider (CRICOS) #00212K. TEQSA Provider ID: PRV12003 (Australian University)
> >> Email Disclaimer<https://www.canberra.edu.au/about-uc/disclaimer-copyright-privacy-accessibility>
> >>
> >> [UC Facebook]<https://www.facebook.com/UniversityOfCanberra>    [UC Twitter] <https://twitter.com/UniCanberra>     [UC Instagram] <https://www.instagram.com/unicanberra/>     [UC Linkedin] <https://au.linkedin.com/school/university-of-canberra/>     [UC Youtube] <https://www.youtube.com/user/uniofcanberra>     [University of Canberra] <http://www.canberra.edu.au>
> >>
> >>          [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From j@|heecho|01 @end|ng |rom gm@||@com  Tue Nov 22 21:15:08 2022
From: j@|heecho|01 @end|ng |rom gm@||@com (Jaihee Choi)
Date: Tue, 22 Nov 2022 14:15:08 -0600
Subject: [R-pkg-devel] Package submission error due to vignette
Message-ID: <CAJBs8VSQ-ed2kE9QzPwUAqvYe9ZjYYh5rfG4=DxAWpuidUH-xQ@mail.gmail.com>

Hello,

I was trying to resubmit a package but was notified that it did not pass
the initial checks due to the following error message regarding compiling
my vignette:

Error: .onLoad failed in loadNamespace() for 'rje', details:
  call: getEngine(name, package)
  error: Vignette engine 'knitr' is not registered by any of the
packages 'knitr'
Execution halted

I have knitr, rmarkdown, and rje under "Suggests:" in my description
file, and I have VignetteBuilder: knitr. In the Vignette.Rmd I have
%\VignetteEngine{knitr::rmarkdown}.

Any guidance to resolve this issue would be much appreciated. Thank
you very much.

Best,
Jaihee Choi

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Tue Nov 22 21:59:34 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 22 Nov 2022 14:59:34 -0600
Subject: [R-pkg-devel] Package submission error due to vignette
In-Reply-To: <CAJBs8VSQ-ed2kE9QzPwUAqvYe9ZjYYh5rfG4=DxAWpuidUH-xQ@mail.gmail.com>
References: <CAJBs8VSQ-ed2kE9QzPwUAqvYe9ZjYYh5rfG4=DxAWpuidUH-xQ@mail.gmail.com>
Message-ID: <25469.14390.478005.917308@rob.eddelbuettel.com>


On 22 November 2022 at 14:15, Jaihee Choi wrote:
| I was trying to resubmit a package but was notified that it did not pass
| the initial checks due to the following error message regarding compiling
| my vignette:
| 
| Error: .onLoad failed in loadNamespace() for 'rje', details:
|   call: getEngine(name, package)
|   error: Vignette engine 'knitr' is not registered by any of the
| packages 'knitr'
| Execution halted
| 
| I have knitr, rmarkdown, and rje under "Suggests:" in my description
| file, and I have VignetteBuilder: knitr. In the Vignette.Rmd I have
| %\VignetteEngine{knitr::rmarkdown}.
| 
| Any guidance to resolve this issue would be much appreciated. Thank
| you very much.

It is an error in the current version of package 'rje' which I recently
pointed out to Robin, its maintainer.  You may be able to wait for an update
(and may want to contact Robin about his timeline) or (at least for a while)
skip 'rje' in your vignette.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From kopperud @end|ng |rom protonm@||@com  Wed Nov 23 14:50:01 2022
From: kopperud @end|ng |rom protonm@||@com (Kopperud)
Date: Wed, 23 Nov 2022 13:50:01 +0000
Subject: [R-pkg-devel] request to remove/archive package from CRAN
Message-ID: <q9Fw0y51eD7e3215Bna8xo3rYjbEOFLkEq5PS9pN3yuErP9bHRAfqdXLYy4ymluj0ZMpwZPVwtckw1XfhLEao6XkPLGX4CCEmNV5SHL4vUs=@protonmail.com>

Hello,

Is it possible to request for a package to be removed/archived from CRAN? I have two packages CRAN that are essentially the same project, but they have different names. I want to remove the old one, the one that has the incorrect name. The package I want to have removed/archived is called "ACDC" ( https://cran.r-project.org/web/packages/ACDC/index.html )

Would be great if anyone has some advice on how to proceed

Best regardsBj?rn Tore Kopperud
	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Nov 23 15:31:07 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 23 Nov 2022 17:31:07 +0300
Subject: [R-pkg-devel] request to remove/archive package from CRAN
In-Reply-To: <q9Fw0y51eD7e3215Bna8xo3rYjbEOFLkEq5PS9pN3yuErP9bHRAfqdXLYy4ymluj0ZMpwZPVwtckw1XfhLEao6XkPLGX4CCEmNV5SHL4vUs=@protonmail.com>
References: <q9Fw0y51eD7e3215Bna8xo3rYjbEOFLkEq5PS9pN3yuErP9bHRAfqdXLYy4ymluj0ZMpwZPVwtckw1XfhLEao6XkPLGX4CCEmNV5SHL4vUs=@protonmail.com>
Message-ID: <20221123173107.7dd2f6c0@arachnoid>

? Wed, 23 Nov 2022 13:50:01 +0000
Kopperud <kopperud at protonmail.com> ?????:

> Is it possible to request for a package to be removed/archived from
> CRAN? 

The policy implies it should be possible:

>> Packages will not normally be removed from CRAN: however, they may
>> be archived, including at the maintainer?s request. 

I think you need to contact CRAN at R-project.org to ask for the archival.

-- 
Best regards,
Ivan


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Nov 23 16:14:59 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 23 Nov 2022 16:14:59 +0100
Subject: [R-pkg-devel] request to remove/archive package from CRAN
In-Reply-To: <20221123173107.7dd2f6c0@arachnoid>
References: <q9Fw0y51eD7e3215Bna8xo3rYjbEOFLkEq5PS9pN3yuErP9bHRAfqdXLYy4ymluj0ZMpwZPVwtckw1XfhLEao6XkPLGX4CCEmNV5SHL4vUs=@protonmail.com>
 <20221123173107.7dd2f6c0@arachnoid>
Message-ID: <43b780b3-135a-3d3f-1796-af1306bd96e0@statistik.tu-dortmund.de>



On 23.11.2022 15:31, Ivan Krylov wrote:
> ? Wed, 23 Nov 2022 13:50:01 +0000
> Kopperud <kopperud at protonmail.com> ?????:
> 
>> Is it possible to request for a package to be removed/archived from
>> CRAN?
> 
> The policy implies it should be possible:

For the records:
Names are presistent on CRAN, therefore please decide very carefully 
before the initial submission about the name. CRAN generally does not 
allow for name changes (and maybe we did not spot it for the case at hand).



>>> Packages will not normally be removed from CRAN: however, they may
>>> be archived, including at the maintainer?s request.
> 
> I think you need to contact CRAN at R-project.org to ask for the archival.

Yes, please write to CRAN at ... and also mention the name for the 
replacement package in the same message.

Best,
Uwe Ligges


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Nov 24 14:02:02 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 24 Nov 2022 14:02:02 +0100
Subject: [R-pkg-devel] CRAN winter break from Dec 22 to Jan 5
Message-ID: <3cdbf2eb-09c4-775a-b863-73712951390e@statistik.tu-dortmund.de>

Dear package developers,

CRAN submissions will be closed for winter break from Dec 22, 2022  to 
Jan 5, 2023 (GMT).

Best,
Uwe Ligges


From Feder|co@ROTOLO @end|ng |rom @@no||@com  Thu Nov 24 10:15:33 2022
From: Feder|co@ROTOLO @end|ng |rom @@no||@com (ROTOLO, Federico /FR)
Date: Thu, 24 Nov 2022 09:15:33 +0000
Subject: [R-pkg-devel] Resubmission of archived package after email change
In-Reply-To: <DB9PR05MB8251F91FD6A7231D56702697970F9@DB9PR05MB8251.eurprd05.prod.outlook.com>
References: <DB9PR05MB8251F91FD6A7231D56702697970F9@DB9PR05MB8251.eurprd05.prod.outlook.com>
Message-ID: <DB9PR05MB8251D5296547757B8483B78C970F9@DB9PR05MB8251.eurprd05.prod.outlook.com>

Dear all,
I am maintainer of the parfm package.

I have changed affiliation in the last months and thus I do not have any longer access to the email address that was mentioned in the package DESCRIPTION.

Now, the package has been archived and my resubmission with a different email address has been rejected.
Do you have any hint?

Thank you in advance for any suggestion.
Best

Federico Rotolo

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Thu Nov 24 23:20:06 2022
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 25 Nov 2022 11:20:06 +1300
Subject: [R-pkg-devel] 
 Resubmission of archived package after email change
In-Reply-To: <DB9PR05MB8251D5296547757B8483B78C970F9@DB9PR05MB8251.eurprd05.prod.outlook.com>
References: <DB9PR05MB8251F91FD6A7231D56702697970F9@DB9PR05MB8251.eurprd05.prod.outlook.com>
 <DB9PR05MB8251D5296547757B8483B78C970F9@DB9PR05MB8251.eurprd05.prod.outlook.com>
Message-ID: <B4D47A99-C195-4E5C-A449-8A7373BBD073@R-project.org>

Have you followed the instructions?


> CRAN Repository Policy
> 
> Submission
> [...]
> Explain any change in the maintainer?s email address and if possible send confirmation from the previous address (by a separate email to CRAN-submissions at R-project.org) or explain why it is not possible.


Cheers,
Simon



> On 24/11/2022, at 10:15 PM, ROTOLO, Federico /FR <Federico.ROTOLO at sanofi.com> wrote:
> 
> Dear all,
> I am maintainer of the parfm package.
> 
> I have changed affiliation in the last months and thus I do not have any longer access to the email address that was mentioned in the package DESCRIPTION.
> 
> Now, the package has been archived and my resubmission with a different email address has been rejected.
> Do you have any hint?
> 
> Thank you in advance for any suggestion.
> Best
> 
> Federico Rotolo
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Nov 25 00:50:07 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 25 Nov 2022 00:50:07 +0100
Subject: [R-pkg-devel] 
 Resubmission of archived package after email change
In-Reply-To: <B4D47A99-C195-4E5C-A449-8A7373BBD073@R-project.org>
References: <DB9PR05MB8251F91FD6A7231D56702697970F9@DB9PR05MB8251.eurprd05.prod.outlook.com>
 <DB9PR05MB8251D5296547757B8483B78C970F9@DB9PR05MB8251.eurprd05.prod.outlook.com>
 <B4D47A99-C195-4E5C-A449-8A7373BBD073@R-project.org>
Message-ID: <af6ae295-1f93-efab-bfb4-dd6a5d63b39f@statistik.tu-dortmund.de>



On 24.11.2022 23:20, Simon Urbanek wrote:
> Have you followed the instructions?


Reason for autp rejection was


Flavor: r-devel-linux-x86_64-debian-gcc
Check: for non-standard things in the check directory, Result: NOTE
   Found the following files/directories:
     'NUL'

Please fix and resubmit.

Best,
Uwe Ligges

> 
>> CRAN Repository Policy
>>
>> Submission
>> [...]
>> Explain any change in the maintainer?s email address and if possible send confirmation from the previous address (by a separate email to CRAN-submissions at R-project.org) or explain why it is not possible.
> 
> 
> Cheers,
> Simon
> 
> 
> 
>> On 24/11/2022, at 10:15 PM, ROTOLO, Federico /FR <Federico.ROTOLO at sanofi.com> wrote:
>>
>> Dear all,
>> I am maintainer of the parfm package.
>>
>> I have changed affiliation in the last months and thus I do not have any longer access to the email address that was mentioned in the package DESCRIPTION.
>>
>> Now, the package has been archived and my resubmission with a different email address has been rejected.
>> Do you have any hint?
>>
>> Thank you in advance for any suggestion.
>> Best
>>
>> Federico Rotolo
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From Feder|co@ROTOLO @end|ng |rom @@no||@com  Fri Nov 25 10:59:10 2022
From: Feder|co@ROTOLO @end|ng |rom @@no||@com (ROTOLO, Federico /FR)
Date: Fri, 25 Nov 2022 09:59:10 +0000
Subject: [R-pkg-devel] Note on submission Found the following
 files/directories: 'NUL'
Message-ID: <DB9PR05MB8251B255B07946B34B846AC2970E9@DB9PR05MB8251.eurprd05.prod.outlook.com>

Dear all,

When submitting my package parfm, I get the following note
Flavor: r-devel-linux-x86_64-debian-gcc
Check: for non-standard things in the check directory, Result: NOTE
  Found the following files/directories:
    'NUL'
so that my submission is rejected.

I cannot find any file or directory called NUL in my package.
Do you have any suggestion?

Thanks in advance to anybody providing their feedback

Best
Federico Rotolo


	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Nov 25 11:10:39 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 25 Nov 2022 13:10:39 +0300
Subject: [R-pkg-devel] Note on submission Found the following
 files/directories: 'NUL'
In-Reply-To: <DB9PR05MB8251B255B07946B34B846AC2970E9@DB9PR05MB8251.eurprd05.prod.outlook.com>
References: <DB9PR05MB8251B255B07946B34B846AC2970E9@DB9PR05MB8251.eurprd05.prod.outlook.com>
Message-ID: <20221125131039.418a9480@arachnoid>

? Fri, 25 Nov 2022 09:59:10 +0000
"ROTOLO, Federico /FR" <Federico.ROTOLO at sanofi.com> ?????:

> When submitting my package parfm, I get the following note
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: for non-standard things in the check directory, Result: NOTE
>   Found the following files/directories:
>     'NUL'
> so that my submission is rejected.
> 
> I cannot find any file or directory called NUL in my package.
> Do you have any suggestion?

The file gets created during the check when you call sink('NUL'):
https://github.com/cran/parfm/blob/8c3f45291514aedde67cecf0b090ddd3487f3ada/R/parfm.R#L260-L299

It mostly works on Windows, where "nul" with any extension in any
directory is the null file, but it creates a file named 'NUL' on other
operating systems. It also breaks the non-default sink, if any was set
up by the user.

Does optimx::optimx produce output that can't be turned off otherwise?
(Does it help to set control$trace = 0?) Have you tried
suppressMessages() or capture.output() with nullfile()?

-- 
Best regards,
Ivan


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Nov 25 11:34:05 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 25 Nov 2022 13:34:05 +0300
Subject: [R-pkg-devel] Note on submission Found the following
 files/directories: 'NUL'
In-Reply-To: <20221125131039.418a9480@arachnoid>
References: <DB9PR05MB8251B255B07946B34B846AC2970E9@DB9PR05MB8251.eurprd05.prod.outlook.com>
 <20221125131039.418a9480@arachnoid>
Message-ID: <20221125133405.3ef4faa6@arachnoid>

? Fri, 25 Nov 2022 13:10:39 +0300
Ivan Krylov <krylov.r00t at gmail.com> ?????:

> It also breaks the non-default sink, if any was set up by the user.

That's not correct, I'm sorry. sink() maintains a stack of diversions
and will automatically restore the user-chosen sink(), if any was set
up, when you call sink(NULL).

-- 
Best regards,
Ivan


From pro|jcn@@h @end|ng |rom gm@||@com  Fri Nov 25 13:59:10 2022
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Fri, 25 Nov 2022 07:59:10 -0500
Subject: [R-pkg-devel] Note on submission Found the following
 files/directories: 'NUL'
In-Reply-To: <20221125131039.418a9480@arachnoid>
References: <DB9PR05MB8251B255B07946B34B846AC2970E9@DB9PR05MB8251.eurprd05.prod.outlook.com>
 <20221125131039.418a9480@arachnoid>
Message-ID: <bd61b121-8dc7-9513-26e6-1a2ffae7e3c7@gmail.com>

FWIW: optimx::optimx is outdated and only there for legacy use.
Better to use the optimx::optimr() function for single solvers.

JN


On 2022-11-25 05:10, Ivan Krylov wrote:
> ? Fri, 25 Nov 2022 09:59:10 +0000
> "ROTOLO, Federico /FR" <Federico.ROTOLO at sanofi.com> ?????:
> 
>> When submitting my package parfm, I get the following note
>> Flavor: r-devel-linux-x86_64-debian-gcc
>> Check: for non-standard things in the check directory, Result: NOTE
>>    Found the following files/directories:
>>      'NUL'
>> so that my submission is rejected.
>>
>> I cannot find any file or directory called NUL in my package.
>> Do you have any suggestion?
> 
> The file gets created during the check when you call sink('NUL'):
> https://github.com/cran/parfm/blob/8c3f45291514aedde67cecf0b090ddd3487f3ada/R/parfm.R#L260-L299
> 
> It mostly works on Windows, where "nul" with any extension in any
> directory is the null file, but it creates a file named 'NUL' on other
> operating systems. It also breaks the non-default sink, if any was set
> up by the user.
> 
> Does optimx::optimx produce output that can't be turned off otherwise?
> (Does it help to set control$trace = 0?) Have you tried
> suppressMessages() or capture.output() with nullfile()?
>


From hj@h@jee@h @end|ng |rom utm@@c@mu  Sun Nov 27 17:29:10 2022
From: hj@h@jee@h @end|ng |rom utm@@c@mu (Jahajeeah, Havisha)
Date: Sun, 27 Nov 2022 20:29:10 +0400
Subject: [R-pkg-devel] Error uploading file on CRAN
In-Reply-To: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
References: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
Message-ID: <CAKU6PFVN9aD5JPR9DixHDiKAa9daECqyV+m87Em0OcOzCJ_GyA@mail.gmail.com>

Dear CRAN team,

The Greymodels package has been debugged and the updated package has been
published on Github.

I would be very much grateful if the app could be updated on CRAN.

I look forward to hearing from you.

Thanking you and sincerely
Havisha Jahajeeah

On Mon, Nov 7, 2022 at 12:30 PM Jahajeeah, Havisha <hjahajeeah at utm.ac.mu>
wrote:

> Dear CRAN team,
>
> The package 'Greymodels' has just been published on CRAN. After loading
> the package on CRAN, when I try to upload file (xlsx or xls)
> the following error appears:
>
> Error: cannot open the connection
>
> What could be the problem? Is it because of the working directory?
>
> Please advise on how to fix this.
>
> Many thanks,
> Havisha Jahajeeah
>

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Sun Nov 27 17:42:52 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sun, 27 Nov 2022 19:42:52 +0300
Subject: [R-pkg-devel] Error uploading file on CRAN
In-Reply-To: <CAKU6PFVN9aD5JPR9DixHDiKAa9daECqyV+m87Em0OcOzCJ_GyA@mail.gmail.com>
References: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
 <CAKU6PFVN9aD5JPR9DixHDiKAa9daECqyV+m87Em0OcOzCJ_GyA@mail.gmail.com>
Message-ID: <20221127194252.688252ad@Tarkus>

On Sun, 27 Nov 2022 20:29:10 +0400
"Jahajeeah, Havisha" <hjahajeeah at utm.ac.mu> wrote:

> The Greymodels package has been debugged and the updated package has
> been published on Github.

Congratulations on getting it working!
 
> I would be very much grateful if the app could be updated on CRAN.

Please do it the same way you had uploaded the package initially after
changing the Version: field in the DESCRIPTION file to a higher value.

-- 
Best regards,
Ivan


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Nov 27 17:44:19 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 27 Nov 2022 11:44:19 -0500
Subject: [R-pkg-devel] Error uploading file on CRAN
In-Reply-To: <CAKU6PFVN9aD5JPR9DixHDiKAa9daECqyV+m87Em0OcOzCJ_GyA@mail.gmail.com>
References: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
 <CAKU6PFVN9aD5JPR9DixHDiKAa9daECqyV+m87Em0OcOzCJ_GyA@mail.gmail.com>
Message-ID: <931cc3d6-d183-41dd-ac4e-15c134501388@gmail.com>

On 27/11/2022 11:29 a.m., Jahajeeah, Havisha wrote:
> Dear CRAN team,
> 
> The Greymodels package has been debugged and the updated package has been
> published on Github.
> 
> I would be very much grateful if the app could be updated on CRAN.

That needs to be done by the maintainer (that's you, I think), according 
to the CRAN submission instructions here: 
https://cran.r-project.org/web/packages/policies.html .  The last 
section tells you how to do an update, but don't skip the earlier ones.

Duncan Murdoch

> 
> I look forward to hearing from you.
> 
> Thanking you and sincerely
> Havisha Jahajeeah
> 
> On Mon, Nov 7, 2022 at 12:30 PM Jahajeeah, Havisha <hjahajeeah at utm.ac.mu>
> wrote:
> 
>> Dear CRAN team,
>>
>> The package 'Greymodels' has just been published on CRAN. After loading
>> the package on CRAN, when I try to upload file (xlsx or xls)
>> the following error appears:
>>
>> Error: cannot open the connection
>>
>> What could be the problem? Is it because of the working directory?
>>
>> Please advise on how to fix this.
>>
>> Many thanks,
>> Havisha Jahajeeah
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Sun Nov 27 18:07:29 2022
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Sun, 27 Nov 2022 11:07:29 -0600
Subject: [R-pkg-devel] Error uploading file on CRAN
In-Reply-To: <931cc3d6-d183-41dd-ac4e-15c134501388@gmail.com>
References: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
 <CAKU6PFVN9aD5JPR9DixHDiKAa9daECqyV+m87Em0OcOzCJ_GyA@mail.gmail.com>
 <931cc3d6-d183-41dd-ac4e-15c134501388@gmail.com>
Message-ID: <6a28f4f6-0f5a-9029-e73b-c0e639cf6052@effectivedefense.org>



On 11/27/22 10:44 AM, Duncan Murdoch wrote:
> On 27/11/2022 11:29 a.m., Jahajeeah, Havisha wrote:
>> Dear CRAN team,
>>
>> The Greymodels package has been debugged and the updated package has been
>> published on Github.
>>
>> I would be very much grateful if the app could be updated on CRAN.
> 
> That needs to be done by the maintainer (that's you, I think), according 
> to the CRAN submission instructions here: 
> https://cran.r-project.org/web/packages/policies.html .? The last 
> section tells you how to do an update, but don't skip the earlier ones.
> 
> Duncan Murdoch


Thanks, Duncan.


	  In addition to Duncan's comments, I perceive the development version 
of Wickham and Bryan's "R Packages" to be also quite useful:


https://r-pkgs.org


	  To make this simpler for me, I've summarized what I've gotten from 
the CRAN source Duncan mentioned and from Wickham and Bryan in a file 
with a name like "release_to_CRAN.R".  I add such a file to the packages 
I maintain on GitHub, while adding that file name to ".Rbuildignore". 
Anything in ".Rbuildignore" is available to me but is not submitted to 
CRAN.  For an example of the current status of one such file, see:


https://github.com/sbgraves237/Ecdat/blob/master/Ecdat_release_to_CRAN.R


	  Hope this helps.
	  Spencer Graves

> 
>>
>> I look forward to hearing from you.
>>
>> Thanking you and sincerely
>> Havisha Jahajeeah
>>
>> On Mon, Nov 7, 2022 at 12:30 PM Jahajeeah, Havisha <hjahajeeah at utm.ac.mu>
>> wrote:
>>
>>> Dear CRAN team,
>>>
>>> The package 'Greymodels' has just been published on CRAN. After loading
>>> the package on CRAN, when I try to upload file (xlsx or xls)
>>> the following error appears:
>>>
>>> Error: cannot open the connection
>>>
>>> What could be the problem? Is it because of the working directory?
>>>
>>> Please advise on how to fix this.
>>>
>>> Many thanks,
>>> Havisha Jahajeeah
>>>
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Nov 27 18:11:50 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 27 Nov 2022 12:11:50 -0500
Subject: [R-pkg-devel] Error uploading file on CRAN
In-Reply-To: <6a28f4f6-0f5a-9029-e73b-c0e639cf6052@effectivedefense.org>
References: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
 <CAKU6PFVN9aD5JPR9DixHDiKAa9daECqyV+m87Em0OcOzCJ_GyA@mail.gmail.com>
 <931cc3d6-d183-41dd-ac4e-15c134501388@gmail.com>
 <6a28f4f6-0f5a-9029-e73b-c0e639cf6052@effectivedefense.org>
Message-ID: <0eef4f00-af66-3cd5-784e-0873703fe7c1@gmail.com>

Thanks Spencer.  Yes, devtools does give good support for CRAN updates 
these days.

Duncan Murdoch

On 27/11/2022 12:07 p.m., Spencer Graves wrote:
> 
> 
> On 11/27/22 10:44 AM, Duncan Murdoch wrote:
>> On 27/11/2022 11:29 a.m., Jahajeeah, Havisha wrote:
>>> Dear CRAN team,
>>>
>>> The Greymodels package has been debugged and the updated package has been
>>> published on Github.
>>>
>>> I would be very much grateful if the app could be updated on CRAN.
>>
>> That needs to be done by the maintainer (that's you, I think), according
>> to the CRAN submission instructions here:
>> https://cran.r-project.org/web/packages/policies.html .? The last
>> section tells you how to do an update, but don't skip the earlier ones.
>>
>> Duncan Murdoch
> 
> 
> Thanks, Duncan.
> 
> 
> 	  In addition to Duncan's comments, I perceive the development version
> of Wickham and Bryan's "R Packages" to be also quite useful:
> 
> 
> https://r-pkgs.org
> 
> 
> 	  To make this simpler for me, I've summarized what I've gotten from
> the CRAN source Duncan mentioned and from Wickham and Bryan in a file
> with a name like "release_to_CRAN.R".  I add such a file to the packages
> I maintain on GitHub, while adding that file name to ".Rbuildignore".
> Anything in ".Rbuildignore" is available to me but is not submitted to
> CRAN.  For an example of the current status of one such file, see:
> 
> 
> https://github.com/sbgraves237/Ecdat/blob/master/Ecdat_release_to_CRAN.R
> 
> 
> 	  Hope this helps.
> 	  Spencer Graves
> 
>>
>>>
>>> I look forward to hearing from you.
>>>
>>> Thanking you and sincerely
>>> Havisha Jahajeeah
>>>
>>> On Mon, Nov 7, 2022 at 12:30 PM Jahajeeah, Havisha <hjahajeeah at utm.ac.mu>
>>> wrote:
>>>
>>>> Dear CRAN team,
>>>>
>>>> The package 'Greymodels' has just been published on CRAN. After loading
>>>> the package on CRAN, when I try to upload file (xlsx or xls)
>>>> the following error appears:
>>>>
>>>> Error: cannot open the connection
>>>>
>>>> What could be the problem? Is it because of the working directory?
>>>>
>>>> Please advise on how to fix this.
>>>>
>>>> Many thanks,
>>>> Havisha Jahajeeah
>>>>
>>>
>>>  ????[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |t@mur|@ @end|ng |rom gm@||@com  Mon Nov 28 15:34:53 2022
From: |t@mur|@ @end|ng |rom gm@||@com (Ibon Tamayo)
Date: Mon, 28 Nov 2022 15:34:53 +0100
Subject: [R-pkg-devel] Missing link or links in documentation object
Message-ID: <CACQV-ou6SHyHysj=qjbSBw4RF_uTzmP8JXNMYD8+qYOKEsorHQ@mail.gmail.com>

Hello,

I am trying to pass the checking but I can't fix this warning.

* checking Rd cross-references ... WARNING
Missing link or links in documentation object 'RegressionDiscontinuityClass.Rd':
  '[R6::R6Class]{R6::R6Class}'


My code is:

#' Class providing object with RegressionDiscontinuityClass
#'
#' @docType class
#' @export
#' @return Object of \code{\link[R6::R6Class]{R6::R6Class}} with
methods for Regression discontinuity analysis
#' @format \code{\link[R6::R6Class]{R6::R6Class}}


Any suggestions?

Thanks,

All the best,

Ibon

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Nov 28 15:45:41 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 28 Nov 2022 17:45:41 +0300
Subject: [R-pkg-devel] Missing link or links in documentation object
In-Reply-To: <CACQV-ou6SHyHysj=qjbSBw4RF_uTzmP8JXNMYD8+qYOKEsorHQ@mail.gmail.com>
References: <CACQV-ou6SHyHysj=qjbSBw4RF_uTzmP8JXNMYD8+qYOKEsorHQ@mail.gmail.com>
Message-ID: <20221128174541.0559d7bd@arachnoid>

? Mon, 28 Nov 2022 15:34:53 +0100
Ibon Tamayo <itamuria at gmail.com> ?????:

> \code{\link[R6::R6Class]{R6::R6Class}}

I think you need only one colon in the first argument of
\link[pkg:foo]{bar}:
https://cran.r-project.org/doc/manuals/R-exts.html#Cross_002dreferences

-- 
Best regards,
Ivan


From n@r@@ @end|ng |rom @t@n|ord@edu  Mon Nov 28 19:06:49 2022
From: n@r@@ @end|ng |rom @t@n|ord@edu (Balasubramanian Narasimhan)
Date: Mon, 28 Nov 2022 10:06:49 -0800
Subject: [R-pkg-devel] 
 [UNCLASSIFIED] Remotes in description when submitting
 a package until a dependency is fixed
In-Reply-To: <25461.3324.407613.869686@rob.eddelbuettel.com>
References: <ME3PR01MB79446317E48550467BFACB55D4079@ME3PR01MB7944.ausprd01.prod.outlook.com>
 <CAJmOi+MYHVc1HQAEcq1ftotW7AaOiQhwuWLVJC0eu2pET_mg3A@mail.gmail.com>
 <bf948167-8edd-5a44-d302-8bcc5e68bfeb@gmail.com>
 <25461.3324.407613.869686@rob.eddelbuettel.com>
Message-ID: <a380561c-6e7a-a4ce-c497-192c3d3c0007@stanford.edu>

(Disclaimer: User bias here.)

I can vouch for drat repos; they have saved me in developing APIs for 
packages under development, e.g. rcbc which is only on Github and not on 
CRAN.? (As Dirk notes, this only applies to Enhances/Suggests dependence.)

-Naras


On 11/16/22 8:17 AM, Dirk Eddelbuettel wrote:
> On 16 November 2022 at 06:36, Duncan Murdoch wrote:
> | On 15/11/2022 11:59 p.m., Hugh Parsonage wrote:
> | > I think you've misunderstood that excerpt.  By "temporary development
> | > state", it means _between_ CRAN releases; packages in a development
> | > state are not suitable for CRAN, as the policy states:
> | >
> | >> CRAN hosts packages of publication quality and is not a development platform.
> | >
> | > You'll need to stop depending on that package until it's fixed and the
> | > fix is on CRAN. That said, it looks like it might be relatively
> | > straightforward to disentangle yourself from the package -- just
> | > rewrite the offending example?
> |
> | Another solution is to put a version of that package in your own drat
> | repository, and use "Additional_repositories".  For example, at one
> | point rgl used webshot2 before it was released, and I had
> |
> |    Suggests:  webshot2, ...
> |    Additional_repositories:  https://dmurdoch.github.io/drat
> |
> | with a copy of webshot2 in the drat repository.
> |
> | The disadvantage of this approach is that you'll need to keep that
> | repository up to date as the third party package evolves, and eventually
> | remove the Additional_repositories: line from your DESCRIPTION, which
> | requires your own package update.
> |
> | See https://github.com/eddelbuettel/drat for instructions on setting up
> | the drat repository.
>
> (Disclaimer: Author bias here.) Let me vouch for Additional_repositories:
> along with packages in Suggests: (you cannot do this for Imports / Depends /
> LinkingTo per CRAN Policy).  I have recently been relying on it a lot for a
> package I (similarly) could not change that frequently at CRAN, and a
> 'semi-private / semi-public package' providing functionality I expect to be
> provided by another package 'eventually'. With the caveat that you need the
> Suggests: mechanism and hence _conditional_ use, it works just like CRAN.
>
> In the meantime Additional_repositories: just works. It expands the set of
> repos, so all operations relying on standard install.packages() calls (and
> that includes using the remotes package to parse dependencies in CI, say)
> just work, both at CRAN and in CI.
>
> `drat` simply helps along by making it easier to provide compatible repositories.
>
> Dirk
>


From peter@c@rbonetto @end|ng |rom gm@||@com  Mon Nov 28 19:15:00 2022
From: peter@c@rbonetto @end|ng |rom gm@||@com (Peter Carbonetto)
Date: Mon, 28 Nov 2022 12:15:00 -0600
Subject: [R-pkg-devel] Two packages with the same name
Message-ID: <CAPvCojKX129gy6aFW==0qMLeqSwh1ELog4eN9ih-rY+rvgyFQw@mail.gmail.com>

Hi All,

I maintain the mashr R package (https://cran.r-project.org/package=mashr),
which has been on CRAN a little over 2 years. The mashr package depends on
another package, flashr, which is available from an external repository
(via *Additional_repositories*).

Very recently, we have found ourselves in the awkward situation that there
are now two flashr packages:

https://cran.r-project.org/package=flashr

(mashr is listed as one of the reverse dependencies of this package, which
is incorrect.)

Does anyone have any suggestions for how to navigate this awkward
situation? The problem needs to be fixed by Dec 7 otherwise mashr will be
taken off CRAN. On the other hand, the new "flashr" seems like a nice
package, and I don't see any reason why it shouldn't exist on CRAN.

Any helpful advice would be greatly appreciated.

Thank you,

Peter Carbonetto
Computational Scientist, Statistics & Genetics,
Research Computing Center & Dept. of Human Genetics
University of Chicago

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Mon Nov 28 19:36:53 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 28 Nov 2022 12:36:53 -0600
Subject: [R-pkg-devel] Two packages with the same name
In-Reply-To: <CAPvCojKX129gy6aFW==0qMLeqSwh1ELog4eN9ih-rY+rvgyFQw@mail.gmail.com>
References: <CAPvCojKX129gy6aFW==0qMLeqSwh1ELog4eN9ih-rY+rvgyFQw@mail.gmail.com>
Message-ID: <25476.65477.633998.863119@rob.eddelbuettel.com>


On 28 November 2022 at 12:15, Peter Carbonetto wrote:
| I maintain the mashr R package (https://cran.r-project.org/package=mashr),
| which has been on CRAN a little over 2 years. The mashr package depends on
| another package, flashr, which is available from an external repository
| (via *Additional_repositories*).
| 
| Very recently, we have found ourselves in the awkward situation that there
| are now two flashr packages:
| 
| https://cran.r-project.org/package=flashr
| 
| (mashr is listed as one of the reverse dependencies of this package, which
| is incorrect.)
| 
| Does anyone have any suggestions for how to navigate this awkward
| situation? The problem needs to be fixed by Dec 7 otherwise mashr will be
| taken off CRAN. On the other hand, the new "flashr" seems like a nice
| package, and I don't see any reason why it shouldn't exist on CRAN.

Yikes. My tendency would be to work with what is under your control and have
your 'flashr' package renamed in its 'additional repository'. Also keep the
existing one (for existing users), and new one (say, 'flashr2' or any other
name, maybe even 'flashr4mashr'), upload to the 'additional repository' and
then update 'mashr'.

As far as CRAN is concerned, there is really only one 'flashr'.

Hth,  Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Nov 28 20:18:31 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 28 Nov 2022 20:18:31 +0100
Subject: [R-pkg-devel] Two packages with the same name
In-Reply-To: <25476.65477.633998.863119@rob.eddelbuettel.com>
References: <CAPvCojKX129gy6aFW==0qMLeqSwh1ELog4eN9ih-rY+rvgyFQw@mail.gmail.com>
 <25476.65477.633998.863119@rob.eddelbuettel.com>
Message-ID: <a32bf1e4-1cc4-be65-ade2-7fcb03cb086e@statistik.tu-dortmund.de>



On 28.11.2022 19:36, Dirk Eddelbuettel wrote:
> 
> On 28 November 2022 at 12:15, Peter Carbonetto wrote:
> | I maintain the mashr R package (https://cran.r-project.org/package=mashr),
> | which has been on CRAN a little over 2 years. The mashr package depends on
> | another package, flashr, which is available from an external repository
> | (via *Additional_repositories*).
> |
> | Very recently, we have found ourselves in the awkward situation that there
> | are now two flashr packages:
> |
> | https://cran.r-project.org/package=flashr
> |
> | (mashr is listed as one of the reverse dependencies of this package, which
> | is incorrect.)
> |
> | Does anyone have any suggestions for how to navigate this awkward
> | situation? The problem needs to be fixed by Dec 7 otherwise mashr will be
> | taken off CRAN. On the other hand, the new "flashr" seems like a nice
> | package, and I don't see any reason why it shouldn't exist on CRAN.
> 
> Yikes. My tendency would be to work with what is under your control and have
> your 'flashr' package renamed in its 'additional repository'. Also keep the
> existing one (for existing users), and new one (say, 'flashr2' or any other
> name, maybe even 'flashr4mashr'), upload to the 'additional repository' and
> then update 'mashr'.
> 
> As far as CRAN is concerned, there is really only one 'flashr'.

Indeed, and CRAN makes sure that a new package does not take a name from 
CRAN nor BioC, which are what we call mainstream repositories.
In order to prevent what happened, choose a rather unique name - and 
perhaps consider to submit that to CRAN, too.

We see "flashr" and similar names are also used in other projects, so 
one more point for a new name.

Best,
Uwe Ligges

> Hth,  Dirk
>


From |ou|@@@@|ett @end|ng |rom durh@m@@c@uk  Tue Nov 29 00:36:50 2022
From: |ou|@@@@|ett @end|ng |rom durh@m@@c@uk (ASLETT, LOUIS J.M.)
Date: Mon, 28 Nov 2022 23:36:50 +0000
Subject: [R-pkg-devel] LAPACK errors in r-devel only
Message-ID: <CWLP265MB6786ADAE5FF3AC68CE2284BCB8139@CWLP265MB6786.GBRP265.PROD.OUTLOOK.COM>

I submitted a package update to CRAN in the hopes of reinstating an archived package, {PhaseType}.  The update is mostly to remove a dependency on another archived package, and to add registrations of C functions.

Everything is fine on r-release, but on r-devel I have errors.  I tested this with r-hub prior to submission, but wondered if there were issues there because the errors didn't make any sense, so I (perhaps wrongly) submitted to CRAN and the errors have been repeated but again *only* for r-devel.

The full error log (so long as it lasts) is here: https://win-builder.r-project.org/incoming_pretest/PhaseType_0.2.0_20221124_233702/

Essentially, the compile errors exclusively relate to LAPACK functions which should be completely stable.  As far as I can tell (welcome any correction) the r-devel build is expecting a different number of arguments for these LAPACK functions than r-release, which honestly baffles me.

For example, I note the error:

#> PHT_MCMC_Aslett.c:180:157: error: too few arguments to function call, expected 27, have 23
#> F77_CALL(dgeevx)(&balanc, &jobvl, &jobvr, &sense, n, NULL, n, NULL, NULL, NULL, n, NULL, n, NULL, NULL, NULL, NULL, NULL, NULL, &work, &lwork, NULL, &info);
1721

However, the standard LAPACK interface documentation for dgeevx (see eg https://netlib.org/lapack/explore-html/d9/d8e/group__double_g_eeigen_ga4e35e1d4e9b63ba9eef4ba8aff3debae.html ) shows that the 23 arguments I am passing is correct (and has been for years), not the 27 the r-devel build for some reason expects.

Any help greatly appreciated.  I've replied along these lines to CRAN rejection message, but opening this question to the list in the hope of assistance in understanding what's going on with r-devel on such a bog-standard LAPACK function, which must have been stable for over a decade.

Thanks in anticipation!

Louis


From @|mon@urb@nek @end|ng |rom R-project@org  Tue Nov 29 02:27:04 2022
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 29 Nov 2022 14:27:04 +1300
Subject: [R-pkg-devel] LAPACK errors in r-devel only
In-Reply-To: <CWLP265MB6786ADAE5FF3AC68CE2284BCB8139@CWLP265MB6786.GBRP265.PROD.OUTLOOK.COM>
References: <CWLP265MB6786ADAE5FF3AC68CE2284BCB8139@CWLP265MB6786.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <C6B6F115-1786-46B8-8315-D8860705439E@R-project.org>

Louis,

you didn't provide any details (please always post a link to the sources you're talking about!), but I suspect you are missing character length arguments, Lapack.h has:

F77_NAME(dgeevx)(const char* balanc, const char* jobvl, const char* jobvr,
                 const char* sense, const int* n, double* a, const int* lda,
                 double* wr, double* wi, double* vl, const int* ldvl,
                 double* vr, const int* ldvr, int* ilo, int* ihi,
                 double* scale, double* abnrm, double* rconde, double* rcondv,
                 double* work, const int* lwork, int* iwork, int* info
                 FCLEN FCLEN FCLEN FCLEN);

23 = without lengths, 27 = with lengths, so presumably the R in question is compiled with USE_FC_LEN_T and thus your call is missing the corresponding FCONE entries - see R-ext 6.6.1 Fortran character strings.

Cheers,
Simon


> On 29/11/2022, at 12:36 PM, ASLETT, LOUIS J.M. <louis.aslett at durham.ac.uk> wrote:
> 
> I submitted a package update to CRAN in the hopes of reinstating an archived package, {PhaseType}.  The update is mostly to remove a dependency on another archived package, and to add registrations of C functions.
> 
> Everything is fine on r-release, but on r-devel I have errors.  I tested this with r-hub prior to submission, but wondered if there were issues there because the errors didn't make any sense, so I (perhaps wrongly) submitted to CRAN and the errors have been repeated but again *only* for r-devel.
> 
> The full error log (so long as it lasts) is here: https://win-builder.r-project.org/incoming_pretest/PhaseType_0.2.0_20221124_233702/
> 
> Essentially, the compile errors exclusively relate to LAPACK functions which should be completely stable.  As far as I can tell (welcome any correction) the r-devel build is expecting a different number of arguments for these LAPACK functions than r-release, which honestly baffles me.
> 
> For example, I note the error:
> 
> #> PHT_MCMC_Aslett.c:180:157: error: too few arguments to function call, expected 27, have 23
> #> F77_CALL(dgeevx)(&balanc, &jobvl, &jobvr, &sense, n, NULL, n, NULL, NULL, NULL, n, NULL, n, NULL, NULL, NULL, NULL, NULL, NULL, &work, &lwork, NULL, &info);
> 1721
> 
> However, the standard LAPACK interface documentation for dgeevx (see eg https://netlib.org/lapack/explore-html/d9/d8e/group__double_g_eeigen_ga4e35e1d4e9b63ba9eef4ba8aff3debae.html ) shows that the 23 arguments I am passing is correct (and has been for years), not the 27 the r-devel build for some reason expects.
> 
> Any help greatly appreciated.  I've replied along these lines to CRAN rejection message, but opening this question to the list in the hope of assistance in understanding what's going on with r-devel on such a bog-standard LAPACK function, which must have been stable for over a decade.
> 
> Thanks in anticipation!
> 
> Louis
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From m@thrun @end|ng |rom gmx@net  Tue Nov 29 08:19:40 2022
From: m@thrun @end|ng |rom gmx@net (Dr. habil. Michael Thrun)
Date: Tue, 29 Nov 2022 08:19:40 +0100
Subject: [R-pkg-devel] Logical Inconsistency of check regarding URL?
Message-ID: <AF031ED5-A6A9-4E9F-9F24-7B4377CB6F2D@gmx.net>

Dear All,
I got from Uwe the following message after uploading an update of my package ?DatabionicSwarm?.  "Found the  following (possibly) invalid URLs: URL:  https://www.deepbionics.org (moved to  https://mthrun.github.io/index) From: DESCRIPTION Status: 301 Message: Moved Permanently
Please change http --> https, add trailing slashes, or follow moved content as appropriate.
"
 I asked then
"
Dear Uwe,
your request states to either
Please  change http --> https, add trailing slashes or to  follow moved content as appropriate.
As it is not  appropriate to follow content, I select the first   choice. the URL is 
"https://www.deepbionics.org/" 
 which mets both conditions of beeing "https" and 
 having at the end one "/".
What is the problem?  Please elaborate.
You already accepted another  package GeneralizedUmatrix today with exactly same 
 url. I really dont understand it. Please be so kind 
 to elabore.?

 As an answer I got
"You are abusig the system! Again: <Followed by same Message as above>?

Hence, I have several questions.
First, do we not communicate with CRAN anymore through the submission procedure of the package? If not, which is the correct line of communication in such a case?

Second, are the answers that we get now fully automatically generated? It would be strange for me to believe that Uwe would provide such an answer to my polite request.

Third, why can I have a CRAN package "DataVisualizations" with this URL online, another one named "GeneralizedUmatrix" uploaded the same day with the same URL, which both are OK, but the URL in "DatabionicSwarm" is not?

Forth, can't we have more clear feedback messages?
I mean, having in the description the URL "https://www.deepbionics.org/" and getting the feedback "http --> https, add trailing slashes or ... "does not make any sense. Also, could someone please explain why is a "/" at the end of an URL necessary? What is the technical background to this?

Fifth, why do we need https/TLS/SSL? I have to pay a monthly fee for a certificate to apply this to my website so that CRAN accepts my URL - and as far as I can tell, it makes things only more complex but not more secure (e.g., https://www.elektronik-kompendium.de/sites/net/1906041.htm). Or in other words, it seems to me that we are expected to pay to follow the guideline of having a certificate instead of making better code with fewer bugs. I am no security expert, but my baseline in computer science is always if a tool is more complex, then the chances are lower that it works as intended, and the possibilities are higher that it has unintended and potentially risky side effects.    

Best Regards

Michael
 

From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Nov 29 08:51:38 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 28 Nov 2022 23:51:38 -0800
Subject: [R-pkg-devel] Logical Inconsistency of check regarding URL?
In-Reply-To: <AF031ED5-A6A9-4E9F-9F24-7B4377CB6F2D@gmx.net>
References: <AF031ED5-A6A9-4E9F-9F24-7B4377CB6F2D@gmx.net>
Message-ID: <456D2D36-2576-4149-9EC3-7F60ED299306@dcn.davis.ca.us>

Educating package authors about the semantics of URLs is not really something the CRAN maintainers should have to do. A slash at the end of a URL implies different URL construction for relative URLs based on the original one. [1]

I am not sure why you think https is no more secure than http... that is exactly why it exists. Again, not the job of CRAN maintainers to explain this to you.

It is not appropriate to rely on URL redirection (from deepbionics to github) in a package... redirections are extra work and hide the true url from the user anyway.

As for having the same URL accepted in one package but rejected in another... well, CRAN moderators are not perfect. They try to automate identification of issues that have previously caused problems, but maybe they don't catch everything every time.

Yes, making software that doesn't break in odd situations is hard. Thank you for making an effort, and thank CRAN for remembering all of these mysterious problems and warning you to fix things that might only break in situations you haven't directly encountered before they puzzle new R users.

[1] https://stackoverflow.com/questions/5948659/when-should-i-use-a-trailing-slash-in-my-url

On November 28, 2022 11:19:40 PM PST, "Dr. habil. Michael Thrun" <m.thrun at gmx.net> wrote:
>Dear All,
>I got from Uwe the following message after uploading an update of my package ?DatabionicSwarm?.  "Found the  following (possibly) invalid URLs: URL:  https://www.deepbionics.org (moved to  https://mthrun.github.io/index) From: DESCRIPTION Status: 301 Message: Moved Permanently
>Please change http --> https, add trailing slashes, or follow moved content as appropriate.
>"
> I asked then
>"
>Dear Uwe,
>your request states to either
>Please  change http --> https, add trailing slashes or to  follow moved content as appropriate.
>As it is not  appropriate to follow content, I select the first   choice. the URL is 
>"https://www.deepbionics.org/" 
> which mets both conditions of beeing "https" and 
> having at the end one "/".
>What is the problem?  Please elaborate.
>You already accepted another  package GeneralizedUmatrix today with exactly same 
> url. I really dont understand it. Please be so kind 
> to elabore.?
>
> As an answer I got
>"You are abusig the system! Again: <Followed by same Message as above>?
>
>Hence, I have several questions.
>First, do we not communicate with CRAN anymore through the submission procedure of the package? If not, which is the correct line of communication in such a case?
>
>Second, are the answers that we get now fully automatically generated? It would be strange for me to believe that Uwe would provide such an answer to my polite request.
>
>Third, why can I have a CRAN package "DataVisualizations" with this URL online, another one named "GeneralizedUmatrix" uploaded the same day with the same URL, which both are OK, but the URL in "DatabionicSwarm" is not?
>
>Forth, can't we have more clear feedback messages?
>I mean, having in the description the URL "https://www.deepbionics.org/" and getting the feedback "http --> https, add trailing slashes or ... "does not make any sense. Also, could someone please explain why is a "/" at the end of an URL necessary? What is the technical background to this?
>
>Fifth, why do we need https/TLS/SSL? I have to pay a monthly fee for a certificate to apply this to my website so that CRAN accepts my URL - and as far as I can tell, it makes things only more complex but not more secure (e.g., https://www.elektronik-kompendium.de/sites/net/1906041.htm). Or in other words, it seems to me that we are expected to pay to follow the guideline of having a certificate instead of making better code with fewer bugs. I am no security expert, but my baseline in computer science is always if a tool is more complex, then the chances are lower that it works as intended, and the possibilities are higher that it has unintended and potentially risky side effects.    
>
>Best Regards
>
>Michael
> 
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Nov 29 08:55:10 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 29 Nov 2022 10:55:10 +0300
Subject: [R-pkg-devel] Logical Inconsistency of check regarding URL?
In-Reply-To: <AF031ED5-A6A9-4E9F-9F24-7B4377CB6F2D@gmx.net>
References: <AF031ED5-A6A9-4E9F-9F24-7B4377CB6F2D@gmx.net>
Message-ID: <20221129105510.75994930@Tarkus>

Dear Michael,

On Tue, 29 Nov 2022 08:19:40 +0100
"Dr. habil. Michael Thrun" <m.thrun at gmx.net> wrote:

> URL:  https://www.deepbionics.org (moved to
> https://mthrun.github.io/index)
> From: DESCRIPTION
> Status: 301
> Message: Moved Permanently

> Please change http --> https, add trailing slashes, or follow moved
> content as appropriate. "

The "HTTPS and trailing slashes" part is a red herring. The idea is to
only have URLs in your package that return HTTP code 200.
The website https://www.deepbionics.org redirects to
https://mthrun.github.io/index, which is, strictly speaking, against
the letter of the rules [1]. Websites that redirect from http://... to
https://... and from .../website/path to .../website/path/ (and the
other way around) are a common cause of such redirects, which is why Uwe
mentioned it (I think), but this isn't the reason for the redirection at
https://www.deepbionics.org.

I think you could make the argument that https://www.deepbionics.org is
the canonical URL for the website and the way it _currently_ works (by
returning a 301 redirect to https://mthrun.github.io/index) is an
implementation detail that should be ignored, but I don't know whether
CRAN reviewers would agree. I think it should be possible to set up
your domain and GitHub Pages to serve mthrun.github.io at the address
www.deepbionics.org without a redirection [2], but I've never tried it
myself.

> First, do we not communicate with CRAN anymore through the submission
> procedure of the package? If not, which is the correct line of
> communication in such a case?

There was a case once when the reviewer was mistaken (they were in the
process of heroically clearing out the "newbies" queue that almost
reached 80 packages, aged 10 days and more, all by themselves, so a
certain amount of fatigue was to be expected) and I was able to argue
my way out of a rejection by replying to the reviewer. I think that the
way to go is to either submit a package with requested changes and an
incremented version or to reply-to-all and argue the case for the
package as it is now.
 
> Third, why can I have a CRAN package "DataVisualizations" with this
> URL online, another one named "GeneralizedUmatrix" uploaded the same
> day with the same URL, which both are OK, but the URL in
> "DatabionicSwarm" is not?

Has anything changed recently regarding the way your domain is set up?
It really is strange that the check passed for one of the packages but
not the other.

> Fifth, why do we need https/TLS/SSL?   

I think you're right (see also: depriving an existing website of its
certificate as a means of censorship), but the browser makers may end
up destroying TLS-less workflow for us in a few years. Thankfully, it's
not a requirement of CRAN to have only HTTPS links. I probably
shouldn't continue this topic because the question of "how the Web
should function" tends to result in pointlessly heated debates.

-- 
Best regards,
Ivan

[1] https://cran.r-project.org/web/packages/URL_checks.html

[2]
https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site


From hugo@gruso@+R m@iii@g oii @orm@iesup@org  Tue Nov 29 10:17:01 2022
From: hugo@gruso@+R m@iii@g oii @orm@iesup@org (hugo@gruso@+R m@iii@g oii @orm@iesup@org)
Date: Tue, 29 Nov 2022 10:17:01 +0100
Subject: [R-pkg-devel] Logical Inconsistency of check regarding URL?
In-Reply-To: <20221129105510.75994930@Tarkus>
References: <AF031ED5-A6A9-4E9F-9F24-7B4377CB6F2D@gmx.net>
 <20221129105510.75994930@Tarkus>
Message-ID: <36502820-6c86-636c-c691-a83e3442745c@normalesup.org>

Dear Michael,

I second Ivan's suggestion to use a custom domain on your GitHub Pages 
website and I also want to add that this solves your certificate issue 
as a nice side-effect.

GitHub will automatically create a certificate for you, for free, via 
Let's Encrypt:

https://github.blog/2018-05-01-github-pages-custom-domains-https/

Best,

Hugo


On 29/11/2022 08:55, Ivan Krylov wrote:
> Dear Michael,
> 
> On Tue, 29 Nov 2022 08:19:40 +0100
> "Dr. habil. Michael Thrun" <m.thrun at gmx.net> wrote:
> 
>> URL:  https://www.deepbionics.org (moved to
>> https://mthrun.github.io/index)
>> From: DESCRIPTION
>> Status: 301
>> Message: Moved Permanently
> 
>> Please change http --> https, add trailing slashes, or follow moved
>> content as appropriate. "
> 
> The "HTTPS and trailing slashes" part is a red herring. The idea is to
> only have URLs in your package that return HTTP code 200.
> The website https://www.deepbionics.org redirects to
> https://mthrun.github.io/index, which is, strictly speaking, against
> the letter of the rules [1]. Websites that redirect from http://... to
> https://... and from .../website/path to .../website/path/ (and the
> other way around) are a common cause of such redirects, which is why Uwe
> mentioned it (I think), but this isn't the reason for the redirection at
> https://www.deepbionics.org.
> 
> I think you could make the argument that https://www.deepbionics.org is
> the canonical URL for the website and the way it _currently_ works (by
> returning a 301 redirect to https://mthrun.github.io/index) is an
> implementation detail that should be ignored, but I don't know whether
> CRAN reviewers would agree. I think it should be possible to set up
> your domain and GitHub Pages to serve mthrun.github.io at the address
> www.deepbionics.org without a redirection [2], but I've never tried it
> myself.
> 
>> First, do we not communicate with CRAN anymore through the submission
>> procedure of the package? If not, which is the correct line of
>> communication in such a case?
> 
> There was a case once when the reviewer was mistaken (they were in the
> process of heroically clearing out the "newbies" queue that almost
> reached 80 packages, aged 10 days and more, all by themselves, so a
> certain amount of fatigue was to be expected) and I was able to argue
> my way out of a rejection by replying to the reviewer. I think that the
> way to go is to either submit a package with requested changes and an
> incremented version or to reply-to-all and argue the case for the
> package as it is now.
>   
>> Third, why can I have a CRAN package "DataVisualizations" with this
>> URL online, another one named "GeneralizedUmatrix" uploaded the same
>> day with the same URL, which both are OK, but the URL in
>> "DatabionicSwarm" is not?
> 
> Has anything changed recently regarding the way your domain is set up?
> It really is strange that the check passed for one of the packages but
> not the other.
> 
>> Fifth, why do we need https/TLS/SSL?
> 
> I think you're right (see also: depriving an existing website of its
> certificate as a means of censorship), but the browser makers may end
> up destroying TLS-less workflow for us in a few years. Thankfully, it's
> not a requirement of CRAN to have only HTTPS links. I probably
> shouldn't continue this topic because the question of "how the Web
> should function" tends to result in pointlessly heated debates.
>


From peter@c@rbonetto @end|ng |rom gm@||@com  Tue Nov 29 14:38:18 2022
From: peter@c@rbonetto @end|ng |rom gm@||@com (Peter Carbonetto)
Date: Tue, 29 Nov 2022 07:38:18 -0600
Subject: [R-pkg-devel] Two packages with the same name
In-Reply-To: <a32bf1e4-1cc4-be65-ade2-7fcb03cb086e@statistik.tu-dortmund.de>
References: <CAPvCojKX129gy6aFW==0qMLeqSwh1ELog4eN9ih-rY+rvgyFQw@mail.gmail.com>
 <25476.65477.633998.863119@rob.eddelbuettel.com>
 <a32bf1e4-1cc4-be65-ade2-7fcb03cb086e@statistik.tu-dortmund.de>
Message-ID: <CAPvCoj+T5WcOZqOEZo+qpVjp6CT_h2jNjbxNqZzDmGfP7U928A@mail.gmail.com>

Thanks, Dirk and Uwe, for your helpful replies.

I have learned from this situation that there is some risk involved in
depending on a package that is not available in CRAN or on Bioconductor.

Peter

On Mon, Nov 28, 2022 at 1:18 PM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

>
>
> On 28.11.2022 19:36, Dirk Eddelbuettel wrote:
> >
> > On 28 November 2022 at 12:15, Peter Carbonetto wrote:
> > | I maintain the mashr R package (
> https://cran.r-project.org/package=mashr),
> > | which has been on CRAN a little over 2 years. The mashr package
> depends on
> > | another package, flashr, which is available from an external repository
> > | (via *Additional_repositories*).
> > |
> > | Very recently, we have found ourselves in the awkward situation that
> there
> > | are now two flashr packages:
> > |
> > | https://cran.r-project.org/package=flashr
> > |
> > | (mashr is listed as one of the reverse dependencies of this package,
> which
> > | is incorrect.)
> > |
> > | Does anyone have any suggestions for how to navigate this awkward
> > | situation? The problem needs to be fixed by Dec 7 otherwise mashr will
> be
> > | taken off CRAN. On the other hand, the new "flashr" seems like a nice
> > | package, and I don't see any reason why it shouldn't exist on CRAN.
> >
> > Yikes. My tendency would be to work with what is under your control and
> have
> > your 'flashr' package renamed in its 'additional repository'. Also keep
> the
> > existing one (for existing users), and new one (say, 'flashr2' or any
> other
> > name, maybe even 'flashr4mashr'), upload to the 'additional repository'
> and
> > then update 'mashr'.
> >
> > As far as CRAN is concerned, there is really only one 'flashr'.
>
> Indeed, and CRAN makes sure that a new package does not take a name from
> CRAN nor BioC, which are what we call mainstream repositories.
> In order to prevent what happened, choose a rather unique name - and
> perhaps consider to submit that to CRAN, too.
>
> We see "flashr" and similar names are also used in other projects, so
> one more point for a new name.
>
> Best,
> Uwe Ligges
>
> > Hth,  Dirk
> >
>

	[[alternative HTML version deleted]]


From jeroenoom@ @end|ng |rom gm@||@com  Tue Nov 29 19:17:39 2022
From: jeroenoom@ @end|ng |rom gm@||@com (Jeroen Ooms)
Date: Tue, 29 Nov 2022 19:17:39 +0100
Subject: [R-pkg-devel] Single page reference manual in html format
In-Reply-To: <MEAPR01MB3829FA0AE3CDA0791485047293F19@MEAPR01MB3829.ausprd01.prod.outlook.com>
References: <MEAPR01MB3829FA0AE3CDA0791485047293F19@MEAPR01MB3829.ausprd01.prod.outlook.com>
Message-ID: <CABFfbXtrgViwNXe9OY39AVzRerCKfKSyum0MWG_g2f3cuo=8-w@mail.gmail.com>

Hi Jonathan,

I've done a first attempt at a package to generate one-page html
reference manuals. The package is called 'postdoc' and you can read
about it here: https://ropensci.org/blog/2022/11/29/postdoc-docs/

To get a quick impression, find example manuals for base-R packages
here: https://r-universe.dev/manuals/ and many others on
https://r-universe.dev (examples linked in the above blog post).

I am interested to hear if this format works better for you than the
PDF manual, and how we can further improve it.

Jeroen



On Sat, Apr 16, 2022 at 8:49 AM Jonathan Godfrey
<A.J.Godfrey at massey.ac.nz> wrote:
>
>
> Hello all,
>
> I rarely contribute to discussions on this list, but learn lots while I hang about. I saw the first post in this thread and hoped that it would lead to a strong positive response from people I've come to respect.
>
> The idea of removing pdf manuals is hugely attractive to my community. The LaTeX driven pdf is as good for blind people today, as it was in the 20th century. It isn't, full stop, end of story. The ability to incorporate mathematical expressions in help pages has been awesome if done in HTML with MathJax, but has made the prospect of reliance on a pdf even less attractive than it was before.
>
> I'd really like to see someone justify the use of the single pdf manual with a 2022 lens. What is its value to the community? And what is its cost? I'm sure there was a need for the single pdf way back, but what is its real value today?
>
> I accept that there are other reasons why a package needs CRAN to do some pdf checking, including Sweave vignettes, but should every package have to play pdf games because some do? I loved LaTeX (and Sweave) in the day, but while those tools have stood still, R markdown and HTML have materially improved my life.
>
> Surely it ought to be possible for a package maintainer to choose the pdf or an HTML pathway. (?) It must surely be possible to accomplish sufficient tests for quality of a package's documentation with an HTML destination as it is in the current pdf manual process. To meet the CRAN standards, a single HTML construct (one file or a collection of linked ones) is all that needs to be put on the table. After all, there's only one pdf option on the table at present and no one seems to have wanted to change that in the 15+ years I've been using R. I don't see a full bells and whistles solution as necessary for CRAN's needs; anyone who wants the fancy stuff can already do that with tools like pkgdown anyway.
>
> As a package maintainer, I tire of the reminders that I don't have qpdf installed. I don't use the tool for anything else so I won't bother to install it. I know the pdf is not too big and don't need a tool to tell me. I'd love to see a reduction in the plethora of tools and tests needed to get a package thoroughly tested. I've been tempted to remove vignettes entirely because it takes too long to repeatedly process them, but I did cull the content dramatically and put most of it in an external location. If the intention of the designed process was to make me and others use external repositories instead of fully self-contained packages with all their associated documentation, then perhaps we have success.
>
>
> I'm now going to present some ideas that might seem unnecessary, but I spend a lot of my time as an advocate for disabled people. This is not the first time I've seen good people, albeit unwittingly ableist people, make life harder for disabled people in their midst. I say "unwitting" not to suggest foolishness of any kind, but blissful lack of awareness. Whether it is intentional or not, and I honestly believe it isn't, the outcome is the same in that marginalised people get marginalised.
>
> Asking package maintainers to go out and use another package is analogous to asking one architect to employ another architect to design the wheelchair ramps to the buildings they design, or worse, ask the wheelchair user to bring their own ramps.
>
> The best tools that provide accessibility for disabled users are the ones that no one knows they are using. R markdown to HTML creates extremely readable content and most authors won't ever know that this is so. They don't need to know, but my community benefits hugely.
>
> The HTML resulting from R markdown vignettes and other documentation and papers almost meets the Web Content Accessibility Guidelines (WCAG) put out by the WWW Consortium, whereas the LaTeX driven pdf always fails the international standard for pdf. I can help improve the HTML, but the LaTeX community has collectively failed to get their primary output files to an acceptable standard, and I therefore cannot help.
>
> My advice to everyone involved in running CRAN, and I do solely from a disabled person's perspective, is to make it hard to do the wrong thing, and much easier to do the right things. I'm sure that we'll all find the results are an improvement for everyone. After all, I could ask when you last chose to use the ramp in preference to the steps to get into a building.
>
> Please consider the HTML alternative to any pdf, in any context, but especially in anything relating to R.
>
> All the best,
> Jonathan
>
>
>
>
>
> -----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Deepayan Sarkar
> Sent: Saturday, 16 April 2022 6:36 am
> To: Duncan Murdoch <murdoch.duncan at gmail.com>
> Cc: Jeroen Ooms <jeroen at berkeley.edu>; R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Single page reference manual in html format
>
> On Fri, Apr 15, 2022 at 11:48 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> >
> > On 15/04/2022 1:16 p.m., Deepayan Sarkar wrote:
> > > On Sat, Apr 9, 2022 at 8:35 PM Jeroen Ooms <jeroen at berkeley.edu> wrote:
> > >>
> > >> Is there a way to generate the package reference manual in a (one
> > >> page) html format? It would be nice to access reference manuals
> > >> from devices without a pdf reader.
> > >
> > > I don't think so, but it would certainly be a nice feature to have.
> > >
> > > Most of the necessary code is already there, so it shouldn't be too
> > > difficult. We'll work on it.
> >
> > I think this would be better done in a contributed package rather than
> > in core R, because there are lots of customizations that people would want:
> >
> > - Some people would want to execute the example code, like pkgdown does.
> > - Some people would want each help page in a separate HTML page (like
> > pkgdown), but with links to step through all the pages (I don't think
> > pkgdown does this).
> > - People would want to customize the look of the page, possibly with
> > syntax highlighting, or just different fonts and layouts.
> >
> > Adding an "all in one page" option to pkgdown might be the easiest way
> > to do this, because they already have a lot of customization
> > possibilities.  But there are probably other "make a web page for this
> > package" packages out there.
>
> Yes, that might be a good alternative.
>
> > If you do include it in base R, please at least allow the CSS to be
> > customized.
>
> Sure. So far I was only thinking of adding a couple of arguments to Rd2HTML()
>
> - 'standalone=TRUE' (FALSE would skip the header and footer), and possibly
>
> - 'Rhtml=FALSE' (TRUE would wrap the examples inside <!--begin.rcode and end.rcode-->
>
> This should make it easier to build up whatever is desired, regardless of what base R implements. HTMLheader() already has an option to specify the CSS file, so that could be used to create the header.
>
> Best,
> -Deepayan
>
> > Duncan Murdoch
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Ca.j.godfrey%40massey.ac.nz%7Cff60d60fe13f4d00e28e08da1f0ef10b%7C388728e1bbd0437898dcf8682e644300%7C1%7C0%7C637856446305715235%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=6e8ipmcWsUoviATnNU0KpPDzkozRKUOPMfqy2CtAgPg%3D&amp;reserved=0
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |ou|@@@@|ett @end|ng |rom durh@m@@c@uk  Tue Nov 29 19:40:59 2022
From: |ou|@@@@|ett @end|ng |rom durh@m@@c@uk (ASLETT, LOUIS J.M.)
Date: Tue, 29 Nov 2022 18:40:59 +0000
Subject: [R-pkg-devel] LAPACK errors in r-devel only
In-Reply-To: <C6B6F115-1786-46B8-8315-D8860705439E@R-project.org>
References: <CWLP265MB6786ADAE5FF3AC68CE2284BCB8139@CWLP265MB6786.GBRP265.PROD.OUTLOOK.COM>
 <C6B6F115-1786-46B8-8315-D8860705439E@R-project.org>
Message-ID: <CWLP265MB678608D33B66067C745133B7B8129@CWLP265MB6786.GBRP265.PROD.OUTLOOK.COM>

Thank you so much Simon, I had completely missed this change in passing strings to Fortran and the new approach which will be enforced from R 4.3.0.  A very interesting read and I think you're right -- making those changes is compiling now on r-hub, so I've attempted a new CRAN submission and keeping fingers crossed.

Also, my apologies for not linking to the sources ... I should have deferred posting to the morning when I was more awake!

Many thanks,

Louis

________________________________
From: Simon Urbanek <simon.urbanek at R-project.org>
Sent: 29 November 2022 01:27
To: ASLETT, LOUIS J.M. <louis.aslett at durham.ac.uk>
Cc: r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] LAPACK errors in r-devel only

[EXTERNAL EMAIL]

Louis,

you didn't provide any details (please always post a link to the sources you're talking about!), but I suspect you are missing character length arguments, Lapack.h has:

F77_NAME(dgeevx)(const char* balanc, const char* jobvl, const char* jobvr,
                 const char* sense, const int* n, double* a, const int* lda,
                 double* wr, double* wi, double* vl, const int* ldvl,
                 double* vr, const int* ldvr, int* ilo, int* ihi,
                 double* scale, double* abnrm, double* rconde, double* rcondv,
                 double* work, const int* lwork, int* iwork, int* info
                 FCLEN FCLEN FCLEN FCLEN);

23 = without lengths, 27 = with lengths, so presumably the R in question is compiled with USE_FC_LEN_T and thus your call is missing the corresponding FCONE entries - see R-ext 6.6.1 Fortran character strings.

Cheers,
Simon


> On 29/11/2022, at 12:36 PM, ASLETT, LOUIS J.M. <louis.aslett at durham.ac.uk> wrote:
>
> I submitted a package update to CRAN in the hopes of reinstating an archived package, {PhaseType}.  The update is mostly to remove a dependency on another archived package, and to add registrations of C functions.
>
> Everything is fine on r-release, but on r-devel I have errors.  I tested this with r-hub prior to submission, but wondered if there were issues there because the errors didn't make any sense, so I (perhaps wrongly) submitted to CRAN and the errors have been repeated but again *only* for r-devel.
>
> The full error log (so long as it lasts) is here: https://win-builder.r-project.org/incoming_pretest/PhaseType_0.2.0_20221124_233702/
>
> Essentially, the compile errors exclusively relate to LAPACK functions which should be completely stable.  As far as I can tell (welcome any correction) the r-devel build is expecting a different number of arguments for these LAPACK functions than r-release, which honestly baffles me.
>
> For example, I note the error:
>
> #> PHT_MCMC_Aslett.c:180:157: error: too few arguments to function call, expected 27, have 23
> #> F77_CALL(dgeevx)(&balanc, &jobvl, &jobvr, &sense, n, NULL, n, NULL, NULL, NULL, n, NULL, n, NULL, NULL, NULL, NULL, NULL, NULL, &work, &lwork, NULL, &info);
> 1721
>
> However, the standard LAPACK interface documentation for dgeevx (see eg https://netlib.org/lapack/explore-html/d9/d8e/group__double_g_eeigen_ga4e35e1d4e9b63ba9eef4ba8aff3debae.html ) shows that the 23 arguments I am passing is correct (and has been for years), not the 27 the r-devel build for some reason expects.
>
> Any help greatly appreciated.  I've replied along these lines to CRAN rejection message, but opening this question to the list in the hope of assistance in understanding what's going on with r-devel on such a bog-standard LAPACK function, which must have been stable for over a decade.
>
> Thanks in anticipation!
>
> Louis
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


	[[alternative HTML version deleted]]


From |v@|rcu @end|ng |rom m@||box@org  Wed Nov 30 10:15:41 2022
From: |v@|rcu @end|ng |rom m@||box@org (Andreas Dominik Cullmann)
Date: Wed, 30 Nov 2022 10:15:41 +0100
Subject: [R-pkg-devel] Package pending for weeks
Message-ID: <Y4cfPV01B49Rw0FD@h6.fooboz>

Dear All,
I have a package, fritools, that has been pending on
https://cran.r-project.org/incoming/pending/ since late October now.
Two weeks ago I wrote to CRAN Team and asked about it, but they didn't answer.

There have been dozens of packages in and out pending since late October, 22th.
Has anybody got any idea about how CRAN Team prioritizes pending packages?

Thanks,
Dominik


From hj@h@jee@h @end|ng |rom utm@@c@mu  Wed Nov 30 10:43:21 2022
From: hj@h@jee@h @end|ng |rom utm@@c@mu (Jahajeeah, Havisha)
Date: Wed, 30 Nov 2022 13:43:21 +0400
Subject: [R-pkg-devel] Error uploading file on CRAN
In-Reply-To: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
References: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
Message-ID: <CAKU6PFW433h6XD_gf=cvSEVCLs8Nd81Yq7RrFdN9JpKbPxU6zg@mail.gmail.com>

Dear CRAN team,

I trust you are well.

The package 'Greymodels' worked fine the other day, but now I am getting
the following error:

An error has occurred!

Couldn't normalize path in `addResourcePath`, with arguments: `prefix` =
'AdminLTE-2.0.6'; `directoryPath` =
'D:/RCompile/CRANpkg/lib/4.2/shinydashboard/AdminLTE'

What could be the problem? Please help.

Thank you,

Havisha



On Mon, Nov 7, 2022 at 12:30 PM Jahajeeah, Havisha <hjahajeeah at utm.ac.mu>
wrote:

> Dear CRAN team,
>
> The package 'Greymodels' has just been published on CRAN. After loading
> the package on CRAN, when I try to upload file (xlsx or xls)
> the following error appears:
>
> Error: cannot open the connection
>
> What could be the problem? Is it because of the working directory?
>
> Please advise on how to fix this.
>
> Many thanks,
> Havisha Jahajeeah
>

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Nov 30 11:02:44 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 30 Nov 2022 13:02:44 +0300
Subject: [R-pkg-devel] Error uploading file on CRAN
In-Reply-To: <CAKU6PFW433h6XD_gf=cvSEVCLs8Nd81Yq7RrFdN9JpKbPxU6zg@mail.gmail.com>
References: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
 <CAKU6PFW433h6XD_gf=cvSEVCLs8Nd81Yq7RrFdN9JpKbPxU6zg@mail.gmail.com>
Message-ID: <20221130130244.61c11179@arachnoid>

? Wed, 30 Nov 2022 13:43:21 +0400
"Jahajeeah, Havisha" <hjahajeeah at utm.ac.mu> ?????:

> but now I am getting the following error:
> 
> An error has occurred!
> 
> Couldn't normalize path in `addResourcePath`, with arguments:
> `prefix` = 'AdminLTE-2.0.6'; `directoryPath` =
> 'D:/RCompile/CRANpkg/lib/4.2/shinydashboard/AdminLTE'

Thank you for providing the exact error message!

Could you please provide more information on _how_ you're getting the
error? In particular, (1) what do you do (lines of code you execute,
buttons you click and so on) before you get the error and (2) what you
expect to happen instead of the error? See also: a long guide on asking
technical questions [*]. It can be impossible to help with an error
message without the steps required to obtain it.

I can see that your package depends on shinydashboard, but I don't see
any calls to addResourcePath in your code. Is there a traceback you
could show us?

-- 
Best regards,
Ivan

[*] http://www.catb.org/~esr/faqs/smart-questions.html#beprecise


From |t@mur|@ @end|ng |rom gm@||@com  Wed Nov 30 11:53:21 2022
From: |t@mur|@ @end|ng |rom gm@||@com (Ibon Tamayo)
Date: Wed, 30 Nov 2022 11:53:21 +0100
Subject: [R-pkg-devel] Missing link or links in documentation object
In-Reply-To: <20221128174541.0559d7bd@arachnoid>
References: <CACQV-ou6SHyHysj=qjbSBw4RF_uTzmP8JXNMYD8+qYOKEsorHQ@mail.gmail.com>
 <20221128174541.0559d7bd@arachnoid>
Message-ID: <CACQV-otgODSDA6HuQbRpCL4A76oL3OO-ydGtgNrROthxUSfzPQ@mail.gmail.com>

Thanks Ivan, it was very helpful.
All the best,
Ibon

El lun, 28 nov 2022 a las 15:45, Ivan Krylov (<krylov.r00t at gmail.com>)
escribi?:

> ? Mon, 28 Nov 2022 15:34:53 +0100
> Ibon Tamayo <itamuria at gmail.com> ?????:
>
> > \code{\link[R6::R6Class]{R6::R6Class}}
>
> I think you need only one colon in the first argument of
> \link[pkg:foo]{bar}:
> https://cran.r-project.org/doc/manuals/R-exts.html#Cross_002dreferences
>
> --
> Best regards,
> Ivan
>

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Nov 30 11:57:30 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 30 Nov 2022 13:57:30 +0300
Subject: [R-pkg-devel] Error uploading file on CRAN
In-Reply-To: <CAKU6PFU9ZCJ_Q03gwkL8mOaaYtPi-ksDrQpAYLCWtWER9b24-w@mail.gmail.com>
References: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
 <CAKU6PFW433h6XD_gf=cvSEVCLs8Nd81Yq7RrFdN9JpKbPxU6zg@mail.gmail.com>
 <20221130130244.61c11179@arachnoid>
 <CAKU6PFU9ZCJ_Q03gwkL8mOaaYtPi-ksDrQpAYLCWtWER9b24-w@mail.gmail.com>
Message-ID: <20221130135730.136d511b@arachnoid>

? Wed, 30 Nov 2022 14:17:54 +0400
"Jahajeeah, Havisha" <hjahajeeah at utm.ac.mu> ?????:

> To run the app, we use:
> 
> install.packages("Greymodels")
> library(Greymodels)
> run_app()
> 
> The app worked fine on Monday. Today it is showing error.
> 
> Please see below  traceback()
> 
> 13: execCallbacks(timeoutSecs, all, loop$id)
> 12: run_now(timeoutMs/1000, all = FALSE)
> 11: service(timeout)
> 10: serviceApp()
> 9: ..stacktracefloor..(serviceApp())
> 8: withCallingHandlers(expr, error = doCaptureStack)
> 7: domain$wrapSync(expr)
> 6: promises::with_promise_domain(createStackTracePromiseDomain(),
>        expr)
> 5: captureStackTraces({
>        while (!.globals$stopped) {
>            ..stacktracefloor..(serviceApp())
>        }
>    })
> 4: ..stacktraceoff..(captureStackTraces({
>        while (!.globals$stopped) {
>            ..stacktracefloor..(serviceApp())
>        }
>    }))
> 3: runApp(x)
> 2: print.shiny.appobj(x)
> 1: (function (x, ...)
>    UseMethod("print"))(x)

Thanks!

Does the D:/RCompile/CRANpkg/lib/4.2/shinydashboard/AdminLTE directory
exist? Has someone touched the shinydashboard package installation?
Does it help to remove and install shinydashboard again?

Please keep the R-pkg-devel list in the recipients  when replying (use
"reply to all").

-- 
Best regards,
Ivan


From hj@h@jee@h @end|ng |rom utm@@c@mu  Wed Nov 30 13:10:22 2022
From: hj@h@jee@h @end|ng |rom utm@@c@mu (Jahajeeah, Havisha)
Date: Wed, 30 Nov 2022 16:10:22 +0400
Subject: [R-pkg-devel] Error uploading file on CRAN
In-Reply-To: <20221130135730.136d511b@arachnoid>
References: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
 <CAKU6PFW433h6XD_gf=cvSEVCLs8Nd81Yq7RrFdN9JpKbPxU6zg@mail.gmail.com>
 <20221130130244.61c11179@arachnoid>
 <CAKU6PFU9ZCJ_Q03gwkL8mOaaYtPi-ksDrQpAYLCWtWER9b24-w@mail.gmail.com>
 <20221130135730.136d511b@arachnoid>
Message-ID: <CAKU6PFWTisVpWzzK8LCq8+jrBFFKQGM7Y86N7-hecX4kQsZ5vA@mail.gmail.com>

Hello,

Yes I noticed that I did not reply to all. Apology.

Thank you for the reply and link to guide.

Does the D:/RCompile/CRANpkg/lib/4.2/shinydashboard/AdminLTE directory
exist?

The D:/RCompile... folder was never interacted with.

Has someone touched the shinydashboard package installation?

No one was to create or edit any folder when installing the package from
CRAN.

The user simply has to run the 3-line codes and the interface loads.

install.packages("Greymodels")
library(Greymodels)
run_app()

Does it help to remove and install shinydashboard again?

Uninstalling and reinstalling does not help either. The issue appears for
any individual installing the app.

The app did work on Monday when I installed from CRAN and now it does not
anymore.

How do I fix this problem? Kindly advise.

Thank you,
Havisha


On Wed, Nov 30, 2022 at 2:57 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:

> ? Wed, 30 Nov 2022 14:17:54 +0400
> "Jahajeeah, Havisha" <hjahajeeah at utm.ac.mu> ?????:
>
> > To run the app, we use:
> >
> > install.packages("Greymodels")
> > library(Greymodels)
> > run_app()
> >
> > The app worked fine on Monday. Today it is showing error.
> >
> > Please see below  traceback()
> >
> > 13: execCallbacks(timeoutSecs, all, loop$id)
> > 12: run_now(timeoutMs/1000, all = FALSE)
> > 11: service(timeout)
> > 10: serviceApp()
> > 9: ..stacktracefloor..(serviceApp())
> > 8: withCallingHandlers(expr, error = doCaptureStack)
> > 7: domain$wrapSync(expr)
> > 6: promises::with_promise_domain(createStackTracePromiseDomain(),
> >        expr)
> > 5: captureStackTraces({
> >        while (!.globals$stopped) {
> >            ..stacktracefloor..(serviceApp())
> >        }
> >    })
> > 4: ..stacktraceoff..(captureStackTraces({
> >        while (!.globals$stopped) {
> >            ..stacktracefloor..(serviceApp())
> >        }
> >    }))
> > 3: runApp(x)
> > 2: print.shiny.appobj(x)
> > 1: (function (x, ...)
> >    UseMethod("print"))(x)
>
> Thanks!
>
> Does the D:/RCompile/CRANpkg/lib/4.2/shinydashboard/AdminLTE directory
> exist? Has someone touched the shinydashboard package installation?
> Does it help to remove and install shinydashboard again?
>
> Please keep the R-pkg-devel list in the recipients  when replying (use
> "reply to all").
>
> --
> Best regards,
> Ivan
>

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Nov 30 13:56:36 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 30 Nov 2022 15:56:36 +0300
Subject: [R-pkg-devel] Error uploading file on CRAN
In-Reply-To: <CAKU6PFWTisVpWzzK8LCq8+jrBFFKQGM7Y86N7-hecX4kQsZ5vA@mail.gmail.com>
References: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
 <CAKU6PFW433h6XD_gf=cvSEVCLs8Nd81Yq7RrFdN9JpKbPxU6zg@mail.gmail.com>
 <20221130130244.61c11179@arachnoid>
 <CAKU6PFU9ZCJ_Q03gwkL8mOaaYtPi-ksDrQpAYLCWtWER9b24-w@mail.gmail.com>
 <20221130135730.136d511b@arachnoid>
 <CAKU6PFWTisVpWzzK8LCq8+jrBFFKQGM7Y86N7-hecX4kQsZ5vA@mail.gmail.com>
Message-ID: <20221130155636.2dbdf558@arachnoid>

? Wed, 30 Nov 2022 16:10:22 +0400
"Jahajeeah, Havisha" <hjahajeeah at utm.ac.mu> ?????:

> How do I fix this problem? Kindly advise.

I think I know what could be the problem.

Your run_app function calls shiny::shinyApp(ui, server, options =
list(launch.browser = TRUE)). Here, `ui` is an object of class
"shiny.tag". I think that the file paths get cached in the `ui` object
when the binary package is built, and when the package is run on a
different computer, the loading process fails.

Does it work if you run install.packages('Greymodels', type = 'source')?
If this works around the problem, you'll need to change the definition
of `ui` into a function to make sure it runs after the package is
installed: https://github.com/cran/Greymodels/blob/master/R/app_ui.R

-- 
Best regards,
Ivan


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Nov 30 14:18:33 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 30 Nov 2022 08:18:33 -0500
Subject: [R-pkg-devel] Error uploading file on CRAN
In-Reply-To: <20221130155636.2dbdf558@arachnoid>
References: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
 <CAKU6PFW433h6XD_gf=cvSEVCLs8Nd81Yq7RrFdN9JpKbPxU6zg@mail.gmail.com>
 <20221130130244.61c11179@arachnoid>
 <CAKU6PFU9ZCJ_Q03gwkL8mOaaYtPi-ksDrQpAYLCWtWER9b24-w@mail.gmail.com>
 <20221130135730.136d511b@arachnoid>
 <CAKU6PFWTisVpWzzK8LCq8+jrBFFKQGM7Y86N7-hecX4kQsZ5vA@mail.gmail.com>
 <20221130155636.2dbdf558@arachnoid>
Message-ID: <eaf5997a-4f9d-4589-375a-cc09a27d969a@gmail.com>

On 30/11/2022 7:56 a.m., Ivan Krylov wrote:
> ? Wed, 30 Nov 2022 16:10:22 +0400
> "Jahajeeah, Havisha" <hjahajeeah at utm.ac.mu> ?????:
> 
>> How do I fix this problem? Kindly advise.
> 
> I think I know what could be the problem.
> 
> Your run_app function calls shiny::shinyApp(ui, server, options =
> list(launch.browser = TRUE)). Here, `ui` is an object of class
> "shiny.tag". I think that the file paths get cached in the `ui` object
> when the binary package is built, and when the package is run on a
> different computer, the loading process fails.

That seems really likely.  When I run on a Mac, I see a directory on the 
Mac build machine in the error message.

> 
> Does it work if you run install.packages('Greymodels', type = 'source')?
> If this works around the problem, you'll need to change the definition
> of `ui` into a function to make sure it runs after the package is
> installed: https://github.com/cran/Greymodels/blob/master/R/app_ui.R
> 

One warning:  make sure you run install.packages('Greymodels', type = 
'source') in a new session, not in a session that already has Greymodels 
loaded.

Duncan Murdoch


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Dec  1 16:31:05 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 1 Dec 2022 16:31:05 +0100
Subject: [R-pkg-devel] Error uploading file on CRAN
In-Reply-To: <eaf5997a-4f9d-4589-375a-cc09a27d969a@gmail.com>
References: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
 <CAKU6PFW433h6XD_gf=cvSEVCLs8Nd81Yq7RrFdN9JpKbPxU6zg@mail.gmail.com>
 <20221130130244.61c11179@arachnoid>
 <CAKU6PFU9ZCJ_Q03gwkL8mOaaYtPi-ksDrQpAYLCWtWER9b24-w@mail.gmail.com>
 <20221130135730.136d511b@arachnoid>
 <CAKU6PFWTisVpWzzK8LCq8+jrBFFKQGM7Y86N7-hecX4kQsZ5vA@mail.gmail.com>
 <20221130155636.2dbdf558@arachnoid>
 <eaf5997a-4f9d-4589-375a-cc09a27d969a@gmail.com>
Message-ID: <0a81f174-7150-ac66-84a5-253ea5d48315@statistik.tu-dortmund.de>



On 30.11.2022 14:18, Duncan Murdoch wrote:
> On 30/11/2022 7:56 a.m., Ivan Krylov wrote:
>> ? Wed, 30 Nov 2022 16:10:22 +0400
>> "Jahajeeah, Havisha" <hjahajeeah at utm.ac.mu> ?????:
>>
>>> How do I fix this problem? Kindly advise.
>>
>> I think I know what could be the problem.
>>
>> Your run_app function calls shiny::shinyApp(ui, server, options =
>> list(launch.browser = TRUE)). Here, `ui` is an object of class
>> "shiny.tag". I think that the file paths get cached in the `ui` object
>> when the binary package is built, and when the package is run on a
>> different computer, the loading process fails.
> 
> That seems really likely.? When I run on a Mac, I see a directory on the 
> Mac build machine in the error message.

Yep, have you reported this to the author of that package already? If 
not, please do so.

Best,
Uwe Ligges


>>
>> Does it work if you run install.packages('Greymodels', type = 'source')?
>> If this works around the problem, you'll need to change the definition
>> of `ui` into a function to make sure it runs after the package is
>> installed: https://github.com/cran/Greymodels/blob/master/R/app_ui.R
>>
> 
> One warning:? make sure you run install.packages('Greymodels', type = 
> 'source') in a new session, not in a session that already has Greymodels 
> loaded.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From hj@h@jee@h @end|ng |rom utm@@c@mu  Thu Dec  1 16:36:42 2022
From: hj@h@jee@h @end|ng |rom utm@@c@mu (Jahajeeah, Havisha)
Date: Thu, 1 Dec 2022 19:36:42 +0400
Subject: [R-pkg-devel] Error uploading file on CRAN
In-Reply-To: <0a81f174-7150-ac66-84a5-253ea5d48315@statistik.tu-dortmund.de>
References: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
 <CAKU6PFW433h6XD_gf=cvSEVCLs8Nd81Yq7RrFdN9JpKbPxU6zg@mail.gmail.com>
 <20221130130244.61c11179@arachnoid>
 <CAKU6PFU9ZCJ_Q03gwkL8mOaaYtPi-ksDrQpAYLCWtWER9b24-w@mail.gmail.com>
 <20221130135730.136d511b@arachnoid>
 <CAKU6PFWTisVpWzzK8LCq8+jrBFFKQGM7Y86N7-hecX4kQsZ5vA@mail.gmail.com>
 <20221130155636.2dbdf558@arachnoid>
 <eaf5997a-4f9d-4589-375a-cc09a27d969a@gmail.com>
 <0a81f174-7150-ac66-84a5-253ea5d48315@statistik.tu-dortmund.de>
Message-ID: <CAKU6PFWf1Nur2eVk9FOrqriKX+ijiLQ_3R_4uBJM+51g1f_8ow@mail.gmail.com>

Hello,

Yes, the author is aware of the situation.

We are currently working on resolving the issue.

Thank you,
Havisha

On Thu, Dec 1, 2022 at 7:32 PM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

>
>
> On 30.11.2022 14:18, Duncan Murdoch wrote:
> > On 30/11/2022 7:56 a.m., Ivan Krylov wrote:
> >> ? Wed, 30 Nov 2022 16:10:22 +0400
> >> "Jahajeeah, Havisha" <hjahajeeah at utm.ac.mu> ?????:
> >>
> >>> How do I fix this problem? Kindly advise.
> >>
> >> I think I know what could be the problem.
> >>
> >> Your run_app function calls shiny::shinyApp(ui, server, options =
> >> list(launch.browser = TRUE)). Here, `ui` is an object of class
> >> "shiny.tag". I think that the file paths get cached in the `ui` object
> >> when the binary package is built, and when the package is run on a
> >> different computer, the loading process fails.
> >
> > That seems really likely.  When I run on a Mac, I see a directory on the
> > Mac build machine in the error message.
>
> Yep, have you reported this to the author of that package already? If
> not, please do so.
>
> Best,
> Uwe Ligges
>
>
> >>
> >> Does it work if you run install.packages('Greymodels', type = 'source')?
> >> If this works around the problem, you'll need to change the definition
> >> of `ui` into a function to make sure it runs after the package is
> >> installed: https://github.com/cran/Greymodels/blob/master/R/app_ui.R
> >>
> >
> > One warning:  make sure you run install.packages('Greymodels', type =
> > 'source') in a new session, not in a session that already has Greymodels
> > loaded.
> >
> > Duncan Murdoch
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From hj@h@jee@h @end|ng |rom utm@@c@mu  Mon Dec  5 08:14:19 2022
From: hj@h@jee@h @end|ng |rom utm@@c@mu (Jahajeeah, Havisha)
Date: Mon, 5 Dec 2022 11:14:19 +0400
Subject: [R-pkg-devel] Error uploading file on CRAN
In-Reply-To: <CAKU6PFWf1Nur2eVk9FOrqriKX+ijiLQ_3R_4uBJM+51g1f_8ow@mail.gmail.com>
References: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
 <CAKU6PFW433h6XD_gf=cvSEVCLs8Nd81Yq7RrFdN9JpKbPxU6zg@mail.gmail.com>
 <20221130130244.61c11179@arachnoid>
 <CAKU6PFU9ZCJ_Q03gwkL8mOaaYtPi-ksDrQpAYLCWtWER9b24-w@mail.gmail.com>
 <20221130135730.136d511b@arachnoid>
 <CAKU6PFWTisVpWzzK8LCq8+jrBFFKQGM7Y86N7-hecX4kQsZ5vA@mail.gmail.com>
 <20221130155636.2dbdf558@arachnoid>
 <eaf5997a-4f9d-4589-375a-cc09a27d969a@gmail.com>
 <0a81f174-7150-ac66-84a5-253ea5d48315@statistik.tu-dortmund.de>
 <CAKU6PFWf1Nur2eVk9FOrqriKX+ijiLQ_3R_4uBJM+51g1f_8ow@mail.gmail.com>
Message-ID: <CAKU6PFUi5+7GA+iVapt8D_E7u0u1g7cB5sxVWQO0CytkZKxE0Q@mail.gmail.com>

Dear CRAN team,



I trust you are well.



Referring to the following issue I had when running the greymodels 2.0
package:



An error has occurred!

Couldn't normalize path in `addResourcePath`, with arguments: `prefix` =
'AdminLTE-2.0.6'; `directoryPath` =
'D:/RCompile/CRANpkg/lib/4.2/shinydashboard/AdminLTE'



I  used the following line code to build a binary package.



devtools::build(binary = TRUE)



A zip file is generated.



I opened the zip file from *"Install packages from local files?* in R and
the package seems to work.



I also went through the CRAN Repository Policy (
https://cran.r-project.org/web/packages/policies.html).


Will a binary package resolve the above issue? If yes, can I submit a
binary package to CRAN?


I look forward to hearing from you.


Many thanks,

Havisha

On Thu, Dec 1, 2022 at 7:36 PM Jahajeeah, Havisha <hjahajeeah at utm.ac.mu>
wrote:

> Hello,
>
> Yes, the author is aware of the situation.
>
> We are currently working on resolving the issue.
>
> Thank you,
> Havisha
>
> On Thu, Dec 1, 2022 at 7:32 PM Uwe Ligges <ligges at statistik.tu-dortmund.de>
> wrote:
>
>>
>>
>> On 30.11.2022 14:18, Duncan Murdoch wrote:
>> > On 30/11/2022 7:56 a.m., Ivan Krylov wrote:
>> >> ? Wed, 30 Nov 2022 16:10:22 +0400
>> >> "Jahajeeah, Havisha" <hjahajeeah at utm.ac.mu> ?????:
>> >>
>> >>> How do I fix this problem? Kindly advise.
>> >>
>> >> I think I know what could be the problem.
>> >>
>> >> Your run_app function calls shiny::shinyApp(ui, server, options =
>> >> list(launch.browser = TRUE)). Here, `ui` is an object of class
>> >> "shiny.tag". I think that the file paths get cached in the `ui` object
>> >> when the binary package is built, and when the package is run on a
>> >> different computer, the loading process fails.
>> >
>> > That seems really likely.  When I run on a Mac, I see a directory on
>> the
>> > Mac build machine in the error message.
>>
>> Yep, have you reported this to the author of that package already? If
>> not, please do so.
>>
>> Best,
>> Uwe Ligges
>>
>>
>> >>
>> >> Does it work if you run install.packages('Greymodels', type =
>> 'source')?
>> >> If this works around the problem, you'll need to change the definition
>> >> of `ui` into a function to make sure it runs after the package is
>> >> installed: https://github.com/cran/Greymodels/blob/master/R/app_ui.R
>> >>
>> >
>> > One warning:  make sure you run install.packages('Greymodels', type =
>> > 'source') in a new session, not in a session that already has
>> Greymodels
>> > loaded.
>> >
>> > Duncan Murdoch
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Dec  5 09:01:00 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 5 Dec 2022 11:01:00 +0300
Subject: [R-pkg-devel] Error uploading file on CRAN
In-Reply-To: <CAKU6PFUi5+7GA+iVapt8D_E7u0u1g7cB5sxVWQO0CytkZKxE0Q@mail.gmail.com>
References: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
 <CAKU6PFW433h6XD_gf=cvSEVCLs8Nd81Yq7RrFdN9JpKbPxU6zg@mail.gmail.com>
 <20221130130244.61c11179@arachnoid>
 <CAKU6PFU9ZCJ_Q03gwkL8mOaaYtPi-ksDrQpAYLCWtWER9b24-w@mail.gmail.com>
 <20221130135730.136d511b@arachnoid>
 <CAKU6PFWTisVpWzzK8LCq8+jrBFFKQGM7Y86N7-hecX4kQsZ5vA@mail.gmail.com>
 <20221130155636.2dbdf558@arachnoid>
 <eaf5997a-4f9d-4589-375a-cc09a27d969a@gmail.com>
 <0a81f174-7150-ac66-84a5-253ea5d48315@statistik.tu-dortmund.de>
 <CAKU6PFWf1Nur2eVk9FOrqriKX+ijiLQ_3R_4uBJM+51g1f_8ow@mail.gmail.com>
 <CAKU6PFUi5+7GA+iVapt8D_E7u0u1g7cB5sxVWQO0CytkZKxE0Q@mail.gmail.com>
Message-ID: <20221205110100.16041663@Tarkus>

On Mon, 5 Dec 2022 11:14:19 +0400
"Jahajeeah, Havisha" <hjahajeeah at utm.ac.mu> wrote:

> Will a binary package resolve the above issue?

Due to an interaction between the way R binary packages work and the
way you have implemented the Greymodels:::ui variable, this binary
package will only work on your computer. (And, well, on other computers
where the library path is the same.) A better workaround would be to
ask your users to install the source package instead of installing the
binary package when one is available for their platform.

The code that creates the `ui` variable in your package is evaluated
when the binary package is built by CRAN (or you). The resulting object
contains file paths that are only valid on CRAN computers (or your
computer). You need that code to run on users' computers after the
package is installed, not on CRAN computers (or your computer) when
it's built. In order to achieve that, you need to change the definition
of the `ui` variable into a function. The function doesn't even have to
take arguments; you can just prepend function() to the right-hand side
of the assignment. Inside the `run_app` function, call that function
instead of referring to that variable. This will make sure that the
temporary object created by `ui()` contains the file paths from the
user's computer.

-- 
Best regards,
Ivan


From wo||@ch|@eger @end|ng |rom un|-m@|nz@de  Sun Dec  4 21:52:05 2022
From: wo||@ch|@eger @end|ng |rom un|-m@|nz@de (Wollschlaeger, Daniel)
Date: Sun, 4 Dec 2022 20:52:05 +0000
Subject: [R-pkg-devel] CRAN-like M1mac test environment?
Message-ID: <d6e069a135914d9cb09f6400d9431625@uni-mainz.de>

A package of mine was archived from CRAN because one of its examples results in a crash on the M1mac platform:
https://www.stats.ox.ac.uk/pub/bdr/M1mac/MeshAgreement.out

The example uses compiled code from the imported package cgalMeshes which is on CRAN and apparently tests without errors on M1mac.

As I don't have access to a Mac, I'm very grateful for Macbuilder. However, there, the package tests without errors (link likely to stop working soon):
https://mac.r-project.org/macbuilder/results/1670186023-a7f313b721c2b516/

Are there publicly available options to test packages on a system that is very similar to the CRAN M1mac to investigate further?

Many thanks in advance

Daniel

--
PD Dr. Daniel Wollschl?ger
University Medical Center Mainz
Institute of Medical Biostatistics, Epidemiology and Informatics (IMBEI)
Radiation Epidemiology
Tel: +49 6131 17 7029


From kr|@t|@n@|||@nd @end|ng |rom nmbu@no  Mon Dec  5 12:09:44 2022
From: kr|@t|@n@|||@nd @end|ng |rom nmbu@no (Kristian Hovde Liland)
Date: Mon, 5 Dec 2022 11:09:44 +0000
Subject: [R-pkg-devel] Svar: CRAN-like M1mac test environment?
In-Reply-To: <d6e069a135914d9cb09f6400d9431625@uni-mainz.de>
References: <d6e069a135914d9cb09f6400d9431625@uni-mainz.de>
Message-ID: <SVAP279MB047916A656E7DBF532126CCCFC189@SVAP279MB0479.NORP279.PROD.OUTLOOK.COM>

Hi Daniel,

According to the build logs you link to on macbuilder, the build system is already using an M1 processor:
Build system: r-release-macosx-arm64|4.2.1|macosx|macOS 11.5.2 (20G95)|Mac mini|Apple M1||en_US.UTF-8

The CRAN check of MeshAgreement points to a lack of the package cgalMeshes on a Windows flavour that did not build due to the following error:
cc1plus.exe: out of memory allocating 65536 bytes

Best regards,
Kristian

Fra: R-package-devel <r-package-devel-bounces at r-project.org> p? vegne av Wollschlaeger, Daniel <wollschlaeger at uni-mainz.de>
Dato: mandag, 5. desember 2022 kl. 10:46
Til: r-package-devel at r-project.org <r-package-devel at r-project.org>
Emne: [R-pkg-devel] CRAN-like M1mac test environment?
[You don't often get email from wollschlaeger at uni-mainz.de. Learn why this is important at https://aka.ms/LearnAboutSenderIdentification ]

A package of mine was archived from CRAN because one of its examples results in a crash on the M1mac platform:
https://www.stats.ox.ac.uk/pub/bdr/M1mac/MeshAgreement.out

The example uses compiled code from the imported package cgalMeshes which is on CRAN and apparently tests without errors on M1mac.

As I don't have access to a Mac, I'm very grateful for Macbuilder. However, there, the package tests without errors (link likely to stop working soon):
https://mac.r-project.org/macbuilder/results/1670186023-a7f313b721c2b516/

Are there publicly available options to test packages on a system that is very similar to the CRAN M1mac to investigate further?

Many thanks in advance

Daniel

--
PD Dr. Daniel Wollschl?ger
University Medical Center Mainz
Institute of Medical Biostatistics, Epidemiology and Informatics (IMBEI)
Radiation Epidemiology
Tel: +49 6131 17 7029

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From hj@h@jee@h @end|ng |rom utm@@c@mu  Mon Dec  5 12:50:30 2022
From: hj@h@jee@h @end|ng |rom utm@@c@mu (Jahajeeah, Havisha)
Date: Mon, 5 Dec 2022 15:50:30 +0400
Subject: [R-pkg-devel] Error uploading file on CRAN
In-Reply-To: <20221205110100.16041663@Tarkus>
References: <CAKU6PFWwf4ejwFOxDuBTVnwkSwkdyCuVUy3KeO9hrKv9DugRLg@mail.gmail.com>
 <CAKU6PFW433h6XD_gf=cvSEVCLs8Nd81Yq7RrFdN9JpKbPxU6zg@mail.gmail.com>
 <20221130130244.61c11179@arachnoid>
 <CAKU6PFU9ZCJ_Q03gwkL8mOaaYtPi-ksDrQpAYLCWtWER9b24-w@mail.gmail.com>
 <20221130135730.136d511b@arachnoid>
 <CAKU6PFWTisVpWzzK8LCq8+jrBFFKQGM7Y86N7-hecX4kQsZ5vA@mail.gmail.com>
 <20221130155636.2dbdf558@arachnoid>
 <eaf5997a-4f9d-4589-375a-cc09a27d969a@gmail.com>
 <0a81f174-7150-ac66-84a5-253ea5d48315@statistik.tu-dortmund.de>
 <CAKU6PFWf1Nur2eVk9FOrqriKX+ijiLQ_3R_4uBJM+51g1f_8ow@mail.gmail.com>
 <CAKU6PFUi5+7GA+iVapt8D_E7u0u1g7cB5sxVWQO0CytkZKxE0Q@mail.gmail.com>
 <20221205110100.16041663@Tarkus>
Message-ID: <CAKU6PFXuXZ6hi1NB=0MVES00KHd8poF4_cw0FXuXMadRupDnYg@mail.gmail.com>

Hello,

Many thanks for your reply.

Very helpful. I have made the necessary changes.

Regards,
Havisha

On Mon, Dec 5, 2022 at 12:01 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:

> On Mon, 5 Dec 2022 11:14:19 +0400
> "Jahajeeah, Havisha" <hjahajeeah at utm.ac.mu> wrote:
>
> > Will a binary package resolve the above issue?
>
> Due to an interaction between the way R binary packages work and the
> way you have implemented the Greymodels:::ui variable, this binary
> package will only work on your computer. (And, well, on other computers
> where the library path is the same.) A better workaround would be to
> ask your users to install the source package instead of installing the
> binary package when one is available for their platform.
>
> The code that creates the `ui` variable in your package is evaluated
> when the binary package is built by CRAN (or you). The resulting object
> contains file paths that are only valid on CRAN computers (or your
> computer). You need that code to run on users' computers after the
> package is installed, not on CRAN computers (or your computer) when
> it's built. In order to achieve that, you need to change the definition
> of the `ui` variable into a function. The function doesn't even have to
> take arguments; you can just prepend function() to the right-hand side
> of the assignment. Inside the `run_app` function, call that function
> instead of referring to that variable. This will make sure that the
> temporary object created by `ui()` contains the file paths from the
> user's computer.
>
> --
> Best regards,
> Ivan
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Thu Dec  8 21:19:48 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 8 Dec 2022 14:19:48 -0600
Subject: [R-pkg-devel] Minimum macOS version ?
Message-ID: <25490.18148.48709.87556@rob.eddelbuettel.com>


One package I stand behind as maintainer does

  ## Take care of 10.14 requirement for Intel macOS
  if test x"${uname}" = x"Darwin" -a x"${machine}" = x"x86_64"; then
      AC_MSG_CHECKING([for Darwin x86_64 use minimum version override])
      CXX17_MACOS="-mmacosx-version-min=10.14"
      AC_MSG_RESULT([${CXX17_MACOS}])
  fi

We now contemplate going to 10.15 as minimum macOS version. Is that an issue
for CRAN?

Apologies for the somewhat ignorant question but I was not aware where I
could have looked this up. So thanks in advance for any pointers.

Thanks,  Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @|mon@urb@nek @end|ng |rom R-project@org  Thu Dec  8 22:00:54 2022
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 9 Dec 2022 10:00:54 +1300
Subject: [R-pkg-devel] Minimum macOS version ?
In-Reply-To: <25490.18148.48709.87556@rob.eddelbuettel.com>
References: <25490.18148.48709.87556@rob.eddelbuettel.com>
Message-ID: <B1F0C4A3-2842-4BEB-9BD4-C23F904FD439@R-project.org>

Dirk,

the minimum required version for the high-sierra build is 10.13 and for big-sur build is 11.0 (as the names imply). Although it is not unrealistic to move Intel to macOS 10.14, it would be more problematic to move to 10.15 since it is the version that killed 32-bit support so 10.14 is actually more prevalent than 10.15 as a lot of users will never upgrade due to that loss. Given that Intel binaries are there only to support legacy hardware it's unlikely to move forward much more (i.e. I can see the immediate argument saying that those macOS version are unsupported, but so are the machines running them, but that doesn't mean R users won't use them).

What exactly do you need the higher macOS versions for? Generally, there were no major changes in the Mach-O format recently, so it shouldn't really matter - the main difference would be SDK/run-time - are there  specific features you require? Some of it could be addressed by providing more recent run-times separately - that's why I'm asking.

Cheers,
Simon


> On 9/12/2022, at 9:19 AM, Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> 
> One package I stand behind as maintainer does
> 
>  ## Take care of 10.14 requirement for Intel macOS
>  if test x"${uname}" = x"Darwin" -a x"${machine}" = x"x86_64"; then
>      AC_MSG_CHECKING([for Darwin x86_64 use minimum version override])
>      CXX17_MACOS="-mmacosx-version-min=10.14"
>      AC_MSG_RESULT([${CXX17_MACOS}])
>  fi
> 
> We now contemplate going to 10.15 as minimum macOS version. Is that an issue
> for CRAN?
> 
> Apologies for the somewhat ignorant question but I was not aware where I
> could have looked this up. So thanks in advance for any pointers.
> 
> Thanks,  Dirk
> 
> -- 
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From edd @end|ng |rom deb|@n@org  Thu Dec  8 23:10:27 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 8 Dec 2022 16:10:27 -0600
Subject: [R-pkg-devel] Minimum macOS version ?
In-Reply-To: <B1F0C4A3-2842-4BEB-9BD4-C23F904FD439@R-project.org>
References: <25490.18148.48709.87556@rob.eddelbuettel.com>
 <B1F0C4A3-2842-4BEB-9BD4-C23F904FD439@R-project.org>
Message-ID: <25490.24787.872776.664367@rob.eddelbuettel.com>


Simon,

On 9 December 2022 at 10:00, Simon Urbanek wrote:
| the minimum required version for the high-sierra build is 10.13 and for big-sur build is 11.0 (as the names imply). Although it is not unrealistic to move Intel to macOS 10.14, it would be more problematic to move to 10.15 since it is the version that killed 32-bit support so 10.14 is actually more prevalent than 10.15 as a lot of users will never upgrade due to that loss. Given that Intel binaries are there only to support legacy hardware it's unlikely to move forward much more (i.e. I can see the immediate argument saying that those macOS version are unsupported, but so are the machines running them, but that doesn't mean R users won't use them).
| 
| What exactly do you need the higher macOS versions for? Generally, there were no major changes in the Mach-O format recently, so it shouldn't really matter - the main difference would be SDK/run-time - are there  specific features you require? Some of it could be addressed by providing more recent run-times separately - that's why I'm asking.

In this case: std::filesystem which is from C++20 and errors on macOS.

We will #ifdef it out of existence on that platform but use it on other
platforms where we can.

Thaks, Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @|mon@urb@nek @end|ng |rom R-project@org  Fri Dec  9 01:24:46 2022
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 9 Dec 2022 13:24:46 +1300
Subject: [R-pkg-devel] Minimum macOS version ?
In-Reply-To: <25490.24787.872776.664367@rob.eddelbuettel.com>
References: <25490.18148.48709.87556@rob.eddelbuettel.com>
 <B1F0C4A3-2842-4BEB-9BD4-C23F904FD439@R-project.org>
 <25490.24787.872776.664367@rob.eddelbuettel.com>
Message-ID: <34C1E69B-D00F-42E9-BA60-3EE21D466492@R-project.org>

Dirk,

thanks, got it. If you have a work-around avoiding std::filesystem then can use something like

// no filesystem support before macOS Catalina
#if defined(__MAC_OS_X_VERSION_MIN_REQUIRED) && __MAC_OS_X_VERSION_MIN_REQUIRED < 101500
// no std::filesystem
#endif

(derived from https://github.com/nlohmann/json/pull/3101 - some of the comments there may be of use - it also mentions MinGW etc.)

The "offical" macros for macOS availability tests are AvailabilityMacros.h but they boil down to the above.

Cheers,
Simon


> On 9/12/2022, at 11:10 AM, Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> 
> Simon,
> 
> On 9 December 2022 at 10:00, Simon Urbanek wrote:
> | the minimum required version for the high-sierra build is 10.13 and for big-sur build is 11.0 (as the names imply). Although it is not unrealistic to move Intel to macOS 10.14, it would be more problematic to move to 10.15 since it is the version that killed 32-bit support so 10.14 is actually more prevalent than 10.15 as a lot of users will never upgrade due to that loss. Given that Intel binaries are there only to support legacy hardware it's unlikely to move forward much more (i.e. I can see the immediate argument saying that those macOS version are unsupported, but so are the machines running them, but that doesn't mean R users won't use them).
> | 
> | What exactly do you need the higher macOS versions for? Generally, there were no major changes in the Mach-O format recently, so it shouldn't really matter - the main difference would be SDK/run-time - are there  specific features you require? Some of it could be addressed by providing more recent run-times separately - that's why I'm asking.
> 
> In this case: std::filesystem which is from C++20 and errors on macOS.
> 
> We will #ifdef it out of existence on that platform but use it on other
> platforms where we can.
> 
> Thaks, Dirk
> 
> -- 
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> 


From @tco|em@ @end|ng |rom tcd@|e  Fri Dec  9 18:29:21 2022
From: @tco|em@ @end|ng |rom tcd@|e (Stephen Coleman)
Date: Fri, 9 Dec 2022 17:29:21 +0000
Subject: [R-pkg-devel] Package fails on Debian
Message-ID: <CAGrBscUk2QBmBtf8HzeP4D7jkPfcnTApWrGtwWBmok6KVSa5gg@mail.gmail.com>

Hi all,

I am trying to get my R package to pass CRAN checks for Debian. According
to ``rhub::check_on_debian()`` my error is:

``outlierComponentFactory.h:37:15: error: ?unique_ptr? in namespace ?std?
does not name a template type``.

I have included ``CXX_STD = CXX17`` in my Makevars file and my package
passes checks for Ubuntu and Windows. I do not know how to progress and any
advice is appreciated.

Package: https://github.com/stcolema/MDIr
Full check report:
https://builder.r-hub.io/status/MDIr_0.7.0.tar.gz-1374f5af71fb4a1f903feb928f5c41f3

Thank you,
Stephen

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Sat Dec 10 14:09:47 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sat, 10 Dec 2022 16:09:47 +0300
Subject: [R-pkg-devel] Package fails on Debian
In-Reply-To: <CAGrBscUk2QBmBtf8HzeP4D7jkPfcnTApWrGtwWBmok6KVSa5gg@mail.gmail.com>
References: <CAGrBscUk2QBmBtf8HzeP4D7jkPfcnTApWrGtwWBmok6KVSa5gg@mail.gmail.com>
Message-ID: <20221210160947.717ca7fe@Tarkus>

On Fri, 9 Dec 2022 17:29:21 +0000
Stephen Coleman <stcolema at tcd.ie> wrote:

> ``outlierComponentFactory.h:37:15: error: ?unique_ptr? in namespace
> ?std? does not name a template type``.

Does it help to explicitly #include <memory> in
outlierComponentFactory.h in order to provide the definition of the
template class unique_ptr<T>?

-- 
Best regards,
Ivan


From roy@mende|@@ohn @end|ng |rom no@@@gov  Sat Dec 10 23:00:22 2022
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Sat, 10 Dec 2022 14:00:22 -0800
Subject: [R-pkg-devel] Do you run R on Fedora or Debian?
Message-ID: <949F9A62-ACB1-4816-9331-4816C2F8DC8C@noaa.gov>

CRAN has sent me a notice about the following:

https://www.stats.ox.ac.uk/pub/bdr/donttest/rerddapXtracto.out

I can not reproduce it.  I test on my Mac,  the cache space is properly handled  (by a package outside mine).  Same with Debian on r-hub.  I installed Fedora on a virtual machine, no problem  (it is assigned a space in /tmp).  I would really appreciate it if someone who runs Debian or Fedora could test the following:

install.packages("rerddap",  dependencies = TRUE)
library(rerddap)
cache_setup(temp_dir = TRUE)

The last line should print where the cache is setup.  That is called at the start of all of my functions that do downloads.  If you could run that and send me the result I would appreciate it (snd privately no need to spam the list with that).  I am at a loss as to how to respond to CRAN because I can't reproduce that error on anything I can test.  The cacheing is actually done by the package 'crul'.  

Thanks,

-Roy



**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From edd @end|ng |rom deb|@n@org  Sat Dec 10 23:16:05 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 10 Dec 2022 16:16:05 -0600
Subject: [R-pkg-devel] Do you run R on Fedora or Debian?
In-Reply-To: <949F9A62-ACB1-4816-9331-4816C2F8DC8C@noaa.gov>
References: <949F9A62-ACB1-4816-9331-4816C2F8DC8C@noaa.gov>
Message-ID: <25493.1317.94818.395969@rob.eddelbuettel.com>


On 10 December 2022 at 14:00, Roy Mendelssohn - NOAA Federal via R-package-devel wrote:
| CRAN has sent me a notice about the following:
| 
| https://www.stats.ox.ac.uk/pub/bdr/donttest/rerddapXtracto.out
| 
| I can not reproduce it.  I test on my Mac,  the cache space is properly handled  (by a package outside mine).  Same with Debian on r-hub.  I installed Fedora on a virtual machine, no problem  (it is assigned a space in /tmp).  I would really appreciate it if someone who runs Debian or Fedora could test the following:
| 
| install.packages("rerddap",  dependencies = TRUE)
| library(rerddap)
| cache_setup(temp_dir = TRUE)
| 
| The last line should print where the cache is setup.  That is called at the start of all of my functions that do downloads.  If you could run that and send me the result I would appreciate it (snd privately no need to spam the list with that).  I am at a loss as to how to respond to CRAN because I can't reproduce that error on anything I can test.  The cacheing is actually done by the package 'crul'.  

I used r2u [1] here to install the thirty-six (!!) required dependencies in a
five or so seconds [2], for convenience in Docker with the Ubuntu 22.04
image.  So from

  docker run --rm -ti eddelbuettel/r2u:jammy bash

to

  apt update -qq 
  install.r rerddap

and then as you requested

  > library(rerddap)
  > cache_setup(temp_dir = TRUE)
  [1] "/tmp/Rtmp3sVsk1/R/rerddap"
  > 

which seems correct: within the per-R-session temp directory.

Hth, Dirk

[1] See https://eddelbuettel.github.io/r2u/
[2] That's the point of r2u. See [1].

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From roy@mende|@@ohn @end|ng |rom no@@@gov  Sat Dec 10 23:27:46 2022
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Sat, 10 Dec 2022 14:27:46 -0800
Subject: [R-pkg-devel] Do you run R on Fedora or Debian?
In-Reply-To: <25493.1317.94818.395969@rob.eddelbuettel.com>
References: <949F9A62-ACB1-4816-9331-4816C2F8DC8C@noaa.gov>
 <25493.1317.94818.395969@rob.eddelbuettel.com>
Message-ID: <A391008D-A8BE-4614-B0D0-600C75490038@noaa.gov>

Perfect.  Thanks.  That is what I am seeing and that is what is expected.  I have even gotten into a debugger,  and looked at to where the file was downloaded,  right after the download,  and it is in a proper temporary space.

Dirk if you really want to be a glutton for punishment,  could you try this:

install.packages("rerddapXtracto",  dependencies = TRUE)
library(rerddapXtracto)
xcoord <- mbnms$Longitude
ycoord <- mbnms$Latitude
dataInfo <- rerddap::info('etopo180')
parameter = 'altitude'
xName <- 'longitude'
yName <- 'latitude'
bathy <- rxtractogon (dataInfo, parameter = parameter, xcoord = xcoord,
                      ycoord = ycoord)

What you would be looking for is any sign that this has left a file in cache in the user's space.  I don't find any in my virtual machine

Assuming that pans out,  now my question is how to respond to CRAN.  I can give you one guess who from CRAN sent me the notice,  As I said,  I don't know how to fix something when everything I am have available to behaves properly.

Thanks,

-Roy

> On Dec 10, 2022, at 2:16 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> 
> On 10 December 2022 at 14:00, Roy Mendelssohn - NOAA Federal via R-package-devel wrote:
> | CRAN has sent me a notice about the following:
> | 
> | https://www.stats.ox.ac.uk/pub/bdr/donttest/rerddapXtracto.out
> | 
> | I can not reproduce it.  I test on my Mac,  the cache space is properly handled  (by a package outside mine).  Same with Debian on r-hub.  I installed Fedora on a virtual machine, no problem  (it is assigned a space in /tmp).  I would really appreciate it if someone who runs Debian or Fedora could test the following:
> | 
> | install.packages("rerddap",  dependencies = TRUE)
> | library(rerddap)
> | cache_setup(temp_dir = TRUE)
> | 
> | The last line should print where the cache is setup.  That is called at the start of all of my functions that do downloads.  If you could run that and send me the result I would appreciate it (snd privately no need to spam the list with that).  I am at a loss as to how to respond to CRAN because I can't reproduce that error on anything I can test.  The cacheing is actually done by the package 'crul'.  
> 
> I used r2u [1] here to install the thirty-six (!!) required dependencies in a
> five or so seconds [2], for convenience in Docker with the Ubuntu 22.04
> image.  So from
> 
>  docker run --rm -ti eddelbuettel/r2u:jammy bash
> 
> to
> 
>  apt update -qq 
>  install.r rerddap
> 
> and then as you requested
> 
>> library(rerddap)
>> cache_setup(temp_dir = TRUE)
>  [1] "/tmp/Rtmp3sVsk1/R/rerddap"
>> 
> 
> which seems correct: within the per-R-session temp directory.
> 
> Hth, Dirk
> 
> [1] See https://eddelbuettel.github.io/r2u/
> [2] That's the point of r2u. See [1].
> 
> -- 
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From kry|ov@r00t @end|ng |rom gm@||@com  Sat Dec 10 23:36:07 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sun, 11 Dec 2022 01:36:07 +0300
Subject: [R-pkg-devel] Do you run R on Fedora or Debian?
In-Reply-To: <949F9A62-ACB1-4816-9331-4816C2F8DC8C@noaa.gov>
References: <949F9A62-ACB1-4816-9331-4816C2F8DC8C@noaa.gov>
Message-ID: <20221211013607.5ea55f9d@Tarkus>

On Sat, 10 Dec 2022 14:00:22 -0800
Roy Mendelssohn - NOAA Federal via R-package-devel
<r-package-devel at r-project.org> wrote:

> cache_setup(temp_dir = TRUE)

Unfortunately, it prints a path under tempdir() for me on my Debian
oldstable machine.

I see that the error came from the "donttest" check from an extra test
that's not on by default with --as-cran. Unfortunately, not even
running _R_CHECK_DONTTEST_EXAMPLES_=true \
_R_CHECK_THINGS_IN_OTHER_DIRS_=TRUE R CMD check --as-cran \
--run-donttest rerddapXtracto_1.1.3.tar.gz reproduces the issue for me.

As a measure of last resort, could it help to manually go over
rerddapXtracto examples and see if any are wrapped in \donttest{} and
may be missing a cache setting?

-- 
Best regards,
Ivan


From edd @end|ng |rom deb|@n@org  Sat Dec 10 23:53:27 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 10 Dec 2022 16:53:27 -0600
Subject: [R-pkg-devel] Do you run R on Fedora or Debian?
In-Reply-To: <A391008D-A8BE-4614-B0D0-600C75490038@noaa.gov>
References: <949F9A62-ACB1-4816-9331-4816C2F8DC8C@noaa.gov>
 <25493.1317.94818.395969@rob.eddelbuettel.com>
 <A391008D-A8BE-4614-B0D0-600C75490038@noaa.gov>
Message-ID: <25493.3559.819391.823840@rob.eddelbuettel.com>


On 10 December 2022 at 14:27, Roy Mendelssohn - NOAA Federal wrote:
| Perfect.  Thanks.  That is what I am seeing and that is what is expected.  I have even gotten into a debugger,  and looked at to where the file was downloaded,  right after the download,  and it is in a proper temporary space.
| 
| Dirk if you really want to be a glutton for punishment,  could you try this:
| 
| install.packages("rerddapXtracto",  dependencies = TRUE)
| library(rerddapXtracto)
| xcoord <- mbnms$Longitude
| ycoord <- mbnms$Latitude
| dataInfo <- rerddap::info('etopo180')
| parameter = 'altitude'
| xName <- 'longitude'
| yName <- 'latitude'
| bathy <- rxtractogon (dataInfo, parameter = parameter, xcoord = xcoord,
|                       ycoord = ycoord)
| 
| What you would be looking for is any sign that this has left a file in cache in the user's space.  I don't find any in my virtual machine

As luck would have it [1] I still had that container session open in a tab
from byobu [2] so continuing (and another 102 (!!!!!!!) packages as binaries
installed in three or four seconds, gotta bless #r2u) 

> install.packages("rerddapXtracto",  dependencies = TRUE) # argument is > redundant, btw
Install system packages as root...
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
Ign https://r2u.stat.illinois.edu/ubuntu jammy InRelease
Hit https://r2u.stat.illinois.edu/ubuntu jammy Release
[ ... many lines from r2u & bspm processing omitted ... ]
Setting up r-cran-plotdap (1.0.0-1.ca2204.1) ...
Setting up r-cran-rerddapxtracto (1.1.3-1.ca2204.1) ...
Processing triggers for libc-bin (2.35-0ubuntu3.1) ...
> library(rerddapXtracto)
> xcoord <- mbnms$Longitude
> ycoord <- mbnms$Latitude
> dataInfo <- rerddap::info('etopo180')
> parameter = 'altitude'
> xName <- 'longitude'
> yName <- 'latitude'
> bathy <- rxtractogon (dataInfo, parameter = parameter, xcoord = xcoord, ycoord = ycoord)
> 
> getwd()                                                                     
[1] "/"
>

Nothing spewn to stdout. Jumping into the same Docker session via the
much-underappreciated backdoor trick:

edd at rob:~/git/digest(master)$ docker ps
CONTAINER ID   IMAGE                    COMMAND   CREATED          STATUS          PORTS     NAMES
18f6bf0e3bb1   eddelbuettel/r2u:jammy   "bash"    39 minutes ago   Up 39 minutes             nervous_black
edd at rob:~/git/digest(master)$ docker exec -ti nervous_black bash
root at 18f6bf0e3bb1:/# ls
bin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root at 18f6bf0e3bb1:/# cd ~
root at 18f6bf0e3bb1:~# ls
root at 18f6bf0e3bb1:~#

we see no files in / (where we started) or $HOME.

| Assuming that pans out,  now my question is how to respond to CRAN.  I can give you one guess who from CRAN sent me the notice,  As I said,  I don't know how to fix something when everything I am have available to behaves properly.

I have no idea. But I would trust Ivan's advice as he is essentially always
spot on and minimize / control interaction.  If CRAN reports this to you,
they see it. You should have access to `tempdir()` and friends to make things
per-session, or else you need to ask the user (once) and then store in
user-supplied location.  I think that was discussed here recently.

Good luck,  Dirk

[1] Also commonly called 'attention deficit disorder'
[2] A more user-friendly variant of tmux


| Thanks,
| 
| -Roy
| 
| > On Dec 10, 2022, at 2:16 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
| > 
| > 
| > On 10 December 2022 at 14:00, Roy Mendelssohn - NOAA Federal via R-package-devel wrote:
| > | CRAN has sent me a notice about the following:
| > | 
| > | https://www.stats.ox.ac.uk/pub/bdr/donttest/rerddapXtracto.out
| > | 
| > | I can not reproduce it.  I test on my Mac,  the cache space is properly handled  (by a package outside mine).  Same with Debian on r-hub.  I installed Fedora on a virtual machine, no problem  (it is assigned a space in /tmp).  I would really appreciate it if someone who runs Debian or Fedora could test the following:
| > | 
| > | install.packages("rerddap",  dependencies = TRUE)
| > | library(rerddap)
| > | cache_setup(temp_dir = TRUE)
| > | 
| > | The last line should print where the cache is setup.  That is called at the start of all of my functions that do downloads.  If you could run that and send me the result I would appreciate it (snd privately no need to spam the list with that).  I am at a loss as to how to respond to CRAN because I can't reproduce that error on anything I can test.  The cacheing is actually done by the package 'crul'.  
| > 
| > I used r2u [1] here to install the thirty-six (!!) required dependencies in a
| > five or so seconds [2], for convenience in Docker with the Ubuntu 22.04
| > image.  So from
| > 
| >  docker run --rm -ti eddelbuettel/r2u:jammy bash
| > 
| > to
| > 
| >  apt update -qq 
| >  install.r rerddap
| > 
| > and then as you requested
| > 
| >> library(rerddap)
| >> cache_setup(temp_dir = TRUE)
| >  [1] "/tmp/Rtmp3sVsk1/R/rerddap"
| >> 
| > 
| > which seems correct: within the per-R-session temp directory.
| > 
| > Hth, Dirk
| > 
| > [1] See https://eddelbuettel.github.io/r2u/
| > [2] That's the point of r2u. See [1].
| > 
| > -- 
| > dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
| 
| **********************
| "The contents of this message do not reflect any position of the U.S. Government or NOAA."
| **********************
| Roy Mendelssohn
| Supervisory Operations Research Analyst
| NOAA/NMFS
| Environmental Research Division
| Southwest Fisheries Science Center
| ***Note new street address***
| 110 McAllister Way
| Santa Cruz, CA 95060
| Phone: (831)-420-3666
| Fax: (831) 420-3980
| e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
| 
| "Old age and treachery will overcome youth and skill."
| "From those who have been given much, much will be expected" 
| "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
| 

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From roy@mende|@@ohn @end|ng |rom no@@@gov  Sun Dec 11 00:02:06 2022
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Sat, 10 Dec 2022 15:02:06 -0800
Subject: [R-pkg-devel] Do you run R on Fedora or Debian?
In-Reply-To: <25493.3559.819391.823840@rob.eddelbuettel.com>
References: <949F9A62-ACB1-4816-9331-4816C2F8DC8C@noaa.gov>
 <25493.1317.94818.395969@rob.eddelbuettel.com>
 <A391008D-A8BE-4614-B0D0-600C75490038@noaa.gov>
 <25493.3559.819391.823840@rob.eddelbuettel.com>
Message-ID: <D7DDE091-D788-42D8-968D-18F6D07CF6C5@noaa.gov>

Thanks for the effort.  Yep that is what I see when I run in my virtual machine. I will play with it some more,  and hopefully someone from CRAN will see this and chime in.  I am more than willing to try to fix this,  I just can not reproduce the error.

-Roy

> On Dec 10, 2022, at 2:53 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> 
> On 10 December 2022 at 14:27, Roy Mendelssohn - NOAA Federal wrote:
> | Perfect.  Thanks.  That is what I am seeing and that is what is expected.  I have even gotten into a debugger,  and looked at to where the file was downloaded,  right after the download,  and it is in a proper temporary space.
> | 
> | Dirk if you really want to be a glutton for punishment,  could you try this:
> | 
> | install.packages("rerddapXtracto",  dependencies = TRUE)
> | library(rerddapXtracto)
> | xcoord <- mbnms$Longitude
> | ycoord <- mbnms$Latitude
> | dataInfo <- rerddap::info('etopo180')
> | parameter = 'altitude'
> | xName <- 'longitude'
> | yName <- 'latitude'
> | bathy <- rxtractogon (dataInfo, parameter = parameter, xcoord = xcoord,
> |                       ycoord = ycoord)
> | 
> | What you would be looking for is any sign that this has left a file in cache in the user's space.  I don't find any in my virtual machine
> 
> As luck would have it [1] I still had that container session open in a tab
> from byobu [2] so continuing (and another 102 (!!!!!!!) packages as binaries
> installed in three or four seconds, gotta bless #r2u) 
> 
>> install.packages("rerddapXtracto",  dependencies = TRUE) # argument is > redundant, btw
> Install system packages as root...
> Reading package lists... Done
> Building dependency tree... Done
> Reading state information... Done
> Ign https://r2u.stat.illinois.edu/ubuntu jammy InRelease
> Hit https://r2u.stat.illinois.edu/ubuntu jammy Release
> [ ... many lines from r2u & bspm processing omitted ... ]
> Setting up r-cran-plotdap (1.0.0-1.ca2204.1) ...
> Setting up r-cran-rerddapxtracto (1.1.3-1.ca2204.1) ...
> Processing triggers for libc-bin (2.35-0ubuntu3.1) ...
>> library(rerddapXtracto)
>> xcoord <- mbnms$Longitude
>> ycoord <- mbnms$Latitude
>> dataInfo <- rerddap::info('etopo180')
>> parameter = 'altitude'
>> xName <- 'longitude'
>> yName <- 'latitude'
>> bathy <- rxtractogon (dataInfo, parameter = parameter, xcoord = xcoord, ycoord = ycoord)
>> 
>> getwd()                                                                     
> [1] "/"
>> 
> 
> Nothing spewn to stdout. Jumping into the same Docker session via the
> much-underappreciated backdoor trick:
> 
> edd at rob:~/git/digest(master)$ docker ps
> CONTAINER ID   IMAGE                    COMMAND   CREATED          STATUS          PORTS     NAMES
> 18f6bf0e3bb1   eddelbuettel/r2u:jammy   "bash"    39 minutes ago   Up 39 minutes             nervous_black
> edd at rob:~/git/digest(master)$ docker exec -ti nervous_black bash
> root at 18f6bf0e3bb1:/# ls
> bin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys tmp  usr  var
> root at 18f6bf0e3bb1:/# cd ~
> root at 18f6bf0e3bb1:~# ls
> root at 18f6bf0e3bb1:~#
> 
> we see no files in / (where we started) or $HOME.
> 
> | Assuming that pans out,  now my question is how to respond to CRAN.  I can give you one guess who from CRAN sent me the notice,  As I said,  I don't know how to fix something when everything I am have available to behaves properly.
> 
> I have no idea. But I would trust Ivan's advice as he is essentially always
> spot on and minimize / control interaction.  If CRAN reports this to you,
> they see it. You should have access to `tempdir()` and friends to make things
> per-session, or else you need to ask the user (once) and then store in
> user-supplied location.  I think that was discussed here recently.
> 
> Good luck,  Dirk
> 
> [1] Also commonly called 'attention deficit disorder'
> [2] A more user-friendly variant of tmux
> 
> 
> | Thanks,
> | 
> | -Roy
> | 
> | > On Dec 10, 2022, at 2:16 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
> | > 
> | > 
> | > On 10 December 2022 at 14:00, Roy Mendelssohn - NOAA Federal via R-package-devel wrote:
> | > | CRAN has sent me a notice about the following:
> | > | 
> | > | https://www.stats.ox.ac.uk/pub/bdr/donttest/rerddapXtracto.out
> | > | 
> | > | I can not reproduce it.  I test on my Mac,  the cache space is properly handled  (by a package outside mine).  Same with Debian on r-hub.  I installed Fedora on a virtual machine, no problem  (it is assigned a space in /tmp).  I would really appreciate it if someone who runs Debian or Fedora could test the following:
> | > | 
> | > | install.packages("rerddap",  dependencies = TRUE)
> | > | library(rerddap)
> | > | cache_setup(temp_dir = TRUE)
> | > | 
> | > | The last line should print where the cache is setup.  That is called at the start of all of my functions that do downloads.  If you could run that and send me the result I would appreciate it (snd privately no need to spam the list with that).  I am at a loss as to how to respond to CRAN because I can't reproduce that error on anything I can test.  The cacheing is actually done by the package 'crul'.  
> | > 
> | > I used r2u [1] here to install the thirty-six (!!) required dependencies in a
> | > five or so seconds [2], for convenience in Docker with the Ubuntu 22.04
> | > image.  So from
> | > 
> | >  docker run --rm -ti eddelbuettel/r2u:jammy bash
> | > 
> | > to
> | > 
> | >  apt update -qq 
> | >  install.r rerddap
> | > 
> | > and then as you requested
> | > 
> | >> library(rerddap)
> | >> cache_setup(temp_dir = TRUE)
> | >  [1] "/tmp/Rtmp3sVsk1/R/rerddap"
> | >> 
> | > 
> | > which seems correct: within the per-R-session temp directory.
> | > 
> | > Hth, Dirk
> | > 
> | > [1] See https://eddelbuettel.github.io/r2u/
> | > [2] That's the point of r2u. See [1].
> | > 
> | > -- 
> | > dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> | 
> | **********************
> | "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> | **********************
> | Roy Mendelssohn
> | Supervisory Operations Research Analyst
> | NOAA/NMFS
> | Environmental Research Division
> | Southwest Fisheries Science Center
> | ***Note new street address***
> | 110 McAllister Way
> | Santa Cruz, CA 95060
> | Phone: (831)-420-3666
> | Fax: (831) 420-3980
> | e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
> | 
> | "Old age and treachery will overcome youth and skill."
> | "From those who have been given much, much will be expected" 
> | "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> | 
> 
> -- 
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From |embry @end|ng |rom ecocc@@com  Sat Dec 10 20:24:51 2022
From: |embry @end|ng |rom ecocc@@com (EcoC2S - Irucka Embry)
Date: Sat, 10 Dec 2022 13:24:51 -0600
Subject: [R-pkg-devel] =?utf-8?q?no_visible_binding_for_global_variable_?=
 =?utf-8?b?4oCYZGVncmVlX0PigJkgLSBDUkFOIGNoZWNrIG5vdGU=?=
In-Reply-To: <dc713e6d764976c5f370cfb05ba38e92@ecoccs.com>
References: <dc713e6d764976c5f370cfb05ba38e92@ecoccs.com>
Message-ID: <1fba4982cf0839bd7443542b325dc6eb@ecoccs.com>

In my iemisc package, I am using the units package.

This is an example of how I am using the set_units function:

T <- 20

set_units(T, degree_C)

Upon checking iemisc with devtools for CRAN submission, I receive the 
following note under "checking R code for possible problems":

no visible binding for global variable ?degree_C?

Please tell me how to avoid that note in my R packages.

Thank you.

Irucka

-- 
--
No fear, Only Love! / ?No temas, solamente amor!
-Irucka Ajani Embry, 15 March 2020

Family Partners:
http://www.sustainlex.org/
https://www.schoolingsolutions.com/

---------------------------------------------------------------------------------------------------------------

The business collaboration between EConsulting (tm)
[https://www.econsultingllc.org/] and EcoC^2S, is Getting Back to 
Nature.

Getting Back to Nature LocalHarvest --
https://www.localharvest.org/getting-back-to-nature-M73453
Getting Back to Nature -- https://www.gettingback2nature.farm/

-- Irucka and his twin brother, Obiora, are featured in the Middle
Tennessee Local Table Magazine Annual issue. The article discusses their
family farm history and the current work that they are doing under 
Getting
Back to Nature. The full magazine can be found here [the article begins 
on
page 18 of the PDF document]:

https://media.gettingback2nature.farm/pdf/LocalTable_ANNUAL_2020_lo_res.pdf

-- Obiora and Irucka were interviewed separately in early 2020 for the
Natural Resources Defense Council's (NRDC) "Regenerative Agriculture: 
Farm
Policy for the 21st Century: Policy Recommendations to Advance 
Regenerative
Agriculture" report written By Arohi Sharma, Lara Bryant, and Ellen Lee.
The PDF report is available below:

https://www.nrdc.org/sites/default/files/regenerative-agriculture-farm-policy-21st-century-report.pdf

EcoC2S -- https://www.ecoccs.com/
Principal, Irucka Embry, EIT

Services:
Growing Food
Healthy Living Mentor
Data Analysis with R
R Training
Chemistry and Mathematics Tutoring
Free/Libre and Open Source Software (FLOSS) Consultation


From @kw@|mmo @end|ng |rom gm@||@com  Sun Dec 11 07:29:14 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Sun, 11 Dec 2022 01:29:14 -0500
Subject: [R-pkg-devel] 
	=?utf-8?q?no_visible_binding_for_global_variable_?=
	=?utf-8?b?4oCYZGVncmVlX0PigJkgLSBDUkFOIGNoZWNrIG5vdGU=?=
In-Reply-To: <1fba4982cf0839bd7443542b325dc6eb@ecoccs.com>
References: <dc713e6d764976c5f370cfb05ba38e92@ecoccs.com>
 <1fba4982cf0839bd7443542b325dc6eb@ecoccs.com>
Message-ID: <CAPcHnpRXYqqDnAnNTxr=whERub6QUbjou03EYAGDvi-6UiS35w@mail.gmail.com>

You can declare degree_C as a variable before using set_units():

degree_C <- NULL
set_units(T, degree_C)

you could use globalVariables() somewhere at the top-level in your package:

utils::globalVariables("degree_C")

or you could supply degree_C as a literal character string:

set_units(T, "degree_C")

On Sat, Dec 10, 2022 at 11:13 PM EcoC2S - Irucka Embry
<iembry at ecoccs.com> wrote:
>
> In my iemisc package, I am using the units package.
>
> This is an example of how I am using the set_units function:
>
> T <- 20
>
> set_units(T, degree_C)
>
> Upon checking iemisc with devtools for CRAN submission, I receive the
> following note under "checking R code for possible problems":
>
> no visible binding for global variable ?degree_C?
>
> Please tell me how to avoid that note in my R packages.
>
> Thank you.
>
> Irucka
>
> --
> --
> No fear, Only Love! / ?No temas, solamente amor!
> -Irucka Ajani Embry, 15 March 2020
>
> Family Partners:
> http://www.sustainlex.org/
> https://www.schoolingsolutions.com/
>
> ---------------------------------------------------------------------------------------------------------------
>
> The business collaboration between EConsulting (tm)
> [https://www.econsultingllc.org/] and EcoC^2S, is Getting Back to
> Nature.
>
> Getting Back to Nature LocalHarvest --
> https://www.localharvest.org/getting-back-to-nature-M73453
> Getting Back to Nature -- https://www.gettingback2nature.farm/
>
> -- Irucka and his twin brother, Obiora, are featured in the Middle
> Tennessee Local Table Magazine Annual issue. The article discusses their
> family farm history and the current work that they are doing under
> Getting
> Back to Nature. The full magazine can be found here [the article begins
> on
> page 18 of the PDF document]:
>
> https://media.gettingback2nature.farm/pdf/LocalTable_ANNUAL_2020_lo_res.pdf
>
> -- Obiora and Irucka were interviewed separately in early 2020 for the
> Natural Resources Defense Council's (NRDC) "Regenerative Agriculture:
> Farm
> Policy for the 21st Century: Policy Recommendations to Advance
> Regenerative
> Agriculture" report written By Arohi Sharma, Lara Bryant, and Ellen Lee.
> The PDF report is available below:
>
> https://www.nrdc.org/sites/default/files/regenerative-agriculture-farm-policy-21st-century-report.pdf
>
> EcoC2S -- https://www.ecoccs.com/
> Principal, Irucka Embry, EIT
>
> Services:
> Growing Food
> Healthy Living Mentor
> Data Analysis with R
> R Training
> Chemistry and Mathematics Tutoring
> Free/Libre and Open Source Software (FLOSS) Consultation
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Dec 11 11:14:04 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 11 Dec 2022 05:14:04 -0500
Subject: [R-pkg-devel] Do you run R on Fedora or Debian?
In-Reply-To: <949F9A62-ACB1-4816-9331-4816C2F8DC8C@noaa.gov>
References: <949F9A62-ACB1-4816-9331-4816C2F8DC8C@noaa.gov>
Message-ID: <4d3a5c10-0985-c4b2-835d-4e04c5886431@gmail.com>

I'm not sure I'm looking at the right versions, but it appears your 
package uses hoardr::hoard() for caching.  I looked for the source for 
hoardr::hoard, and found it at

  https://github.com/ropensci-archive/hoardr

It says the package has been "abandoned", with a version number slightly 
higher than the one on CRAN.

So conceivably your problem is caused by a bug in the hoardr package, 
and it looks like the authors of that package aren't going to deal with it.

Duncan Murdoch

On 10/12/2022 5:00 p.m., Roy Mendelssohn - NOAA Federal via 
R-package-devel wrote:
> CRAN has sent me a notice about the following:
> 
> https://www.stats.ox.ac.uk/pub/bdr/donttest/rerddapXtracto.out
> 
> I can not reproduce it.  I test on my Mac,  the cache space is properly handled  (by a package outside mine).  Same with Debian on r-hub.  I installed Fedora on a virtual machine, no problem  (it is assigned a space in /tmp).  I would really appreciate it if someone who runs Debian or Fedora could test the following:
> 
> install.packages("rerddap",  dependencies = TRUE)
> library(rerddap)
> cache_setup(temp_dir = TRUE)
> 
> The last line should print where the cache is setup.  That is called at the start of all of my functions that do downloads.  If you could run that and send me the result I would appreciate it (snd privately no need to spam the list with that).  I am at a loss as to how to respond to CRAN because I can't reproduce that error on anything I can test.  The cacheing is actually done by the package 'crul'.
> 
> Thanks,
> 
> -Roy
> 
> 
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @|ex@ndre@court|o| @end|ng |rom gm@||@com  Sun Dec 11 12:15:59 2022
From: @|ex@ndre@court|o| @end|ng |rom gm@||@com (Alexandre Courtiol)
Date: Sun, 11 Dec 2022 12:15:59 +0100
Subject: [R-pkg-devel] 
	=?utf-8?q?no_visible_binding_for_global_variable_?=
	=?utf-8?b?4oCYZGVncmVlX0PigJkgLSBDUkFOIGNoZWNrIG5vdGU=?=
In-Reply-To: <1fba4982cf0839bd7443542b325dc6eb@ecoccs.com>
References: <dc713e6d764976c5f370cfb05ba38e92@ecoccs.com>
 <1fba4982cf0839bd7443542b325dc6eb@ecoccs.com>
Message-ID: <CAERMt4fGChjogJPfX-kwdYFJDc2uVH=Szhg9m1HBgr9451brpw@mail.gmail.com>

 set_units(T, "degree_C") ## using quotes will prevent the R CMD check note
and will still work in this case.

On Sun, 11 Dec 2022 at 05:13, EcoC2S - Irucka Embry <iembry at ecoccs.com>
wrote:

> In my iemisc package, I am using the units package.
>
> This is an example of how I am using the set_units function:
>
> T <- 20
>
> set_units(T, degree_C)
>
> Upon checking iemisc with devtools for CRAN submission, I receive the
> following note under "checking R code for possible problems":
>
> no visible binding for global variable ?degree_C?
>
> Please tell me how to avoid that note in my R packages.
>
> Thank you.
>
> Irucka
>
> --
> --
> No fear, Only Love! / ?No temas, solamente amor!
> -Irucka Ajani Embry, 15 March 2020
>
> Family Partners:
> http://www.sustainlex.org/
> https://www.schoolingsolutions.com/
>
>
> ---------------------------------------------------------------------------------------------------------------
>
> The business collaboration between EConsulting (tm)
> [https://www.econsultingllc.org/] and EcoC^2S, is Getting Back to
> Nature.
>
> Getting Back to Nature LocalHarvest --
> https://www.localharvest.org/getting-back-to-nature-M73453
> Getting Back to Nature -- https://www.gettingback2nature.farm/
>
> -- Irucka and his twin brother, Obiora, are featured in the Middle
> Tennessee Local Table Magazine Annual issue. The article discusses their
> family farm history and the current work that they are doing under
> Getting
> Back to Nature. The full magazine can be found here [the article begins
> on
> page 18 of the PDF document]:
>
> https://media.gettingback2nature.farm/pdf/LocalTable_ANNUAL_2020_lo_res.pdf
>
> -- Obiora and Irucka were interviewed separately in early 2020 for the
> Natural Resources Defense Council's (NRDC) "Regenerative Agriculture:
> Farm
> Policy for the 21st Century: Policy Recommendations to Advance
> Regenerative
> Agriculture" report written By Arohi Sharma, Lara Bryant, and Ellen Lee.
> The PDF report is available below:
>
>
> https://www.nrdc.org/sites/default/files/regenerative-agriculture-farm-policy-21st-century-report.pdf
>
> EcoC2S -- https://www.ecoccs.com/
> Principal, Irucka Embry, EIT
>
> Services:
> Growing Food
> Healthy Living Mentor
> Data Analysis with R
> R Training
> Chemistry and Mathematics Tutoring
> Free/Libre and Open Source Software (FLOSS) Consultation
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Alexandre Courtiol, www.datazoogang.de

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Sun Dec 11 12:45:02 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sun, 11 Dec 2022 14:45:02 +0300
Subject: [R-pkg-devel] Do you run R on Fedora or Debian?
In-Reply-To: <949F9A62-ACB1-4816-9331-4816C2F8DC8C@noaa.gov>
References: <949F9A62-ACB1-4816-9331-4816C2F8DC8C@noaa.gov>
Message-ID: <20221211144502.20cbe225@Tarkus>

On Sat, 10 Dec 2022 14:00:22 -0800
Roy Mendelssohn - NOAA Federal via R-package-devel
<r-package-devel at r-project.org> wrote:

> CRAN has sent me a notice about the following:
> 
> https://www.stats.ox.ac.uk/pub/bdr/donttest/rerddapXtracto.out
> 
> I can not reproduce it.  I test on my Mac,  the cache space is
> properly handled  (by a package outside mine).  Same with Debian on
> r-hub.  I installed Fedora on a virtual machine, no problem  (it is
> assigned a space in /tmp).

I've trace()d rerddap:::gen_key to notify me when a file with the cache
key of 4f8f83808465a7f7619285e9871747af is being downloaded. Since
digest::digest defaults to serialize = TRUE, this should only work with
R-to-be-4.3.0 (I compiled R-devel r83400, same as in the failed check):

library(rerddapXtracto)
trace(
 rerddap:::gen_key,
 quote({
  if(digest::digest(ky) == '4f8f83808465a7f7619285e9871747af') {
   cat('\n\nFound a match\n\n')
   str(url); str(args); print(ky); str(digest::digest(ky))
   message('\n\nFound a match\n\n')
  }
 }),
 at = 3
)
example(rxtracto)
example(rxtracto_3D)
example(rxtractogon)

Surprisingly, there were no hits. I also tried copying and pasting all
code from the vignette and even uncommenting the code marked as
\dontrun{}, also with no results.

The code that actually creates these files lives in the rerddap
package. The page at
<https://www.stats.ox.ac.uk/pub/bdr/Rconfig/r-devel-linux-x86_64-fedora-gcc>
says that packages are checked in parallel. What if an unlucky reverse
dependency of rerddap was being checked at the same time as your
package, making rerddapXtracto get its NOTE?

I cleaned ~/.cache/R, put the rerddap source package in a directory and
ran:

(res <- tools::check_packages_in_dir(
 '.', check_args = '--run-donttest', reverse = list(recursive = TRUE),
 check_env = c(
  "_R_CHECK_DONTTEST_EXAMPLES_=true",
  "_R_CHECK_THINGS_IN_OTHER_DIRS_=true"
 )
))

I got a NOTE for plotdap!

* checking for new files in some other directories ... NOTE
Found the following files/directories:
  ?~/.cache/R? ?~/.cache/R/rerddap?
  ?~/.cache/R/rerddap/1b43b4335f06b318b914ba2cc2f88872.nc?
  ?~/.cache/R/rerddap/4f8f83808465a7f7619285e9871747af.nc?
  ?~/.cache/R/rerddap/8cb244e059b86865b7933a3d9b72fe16.csv?

Looking at the examples for plotdap::add_griddap and
plotdap::add_tabledap, I think that they may be responsible for the
NOTE, because there's no pre-example cache setup and teardown. I also
finally got a match from my tracing code by running
example(add_griddap).

There's more than one way to do it right; my favourite would be to wrap
the pre-example code and post-example code in \dontshow{}, changing the
cache settings in the first block and restoring them in the second one.
Everywhere else I would use on.exit(), but examples are special in
their relationship with autoprinting and crashing there being
disallowed, making this approach feasible.

-- 
Best regards,
Ivan


From roy@mende|@@ohn @end|ng |rom no@@@gov  Sun Dec 11 17:16:04 2022
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Sun, 11 Dec 2022 08:16:04 -0800
Subject: [R-pkg-devel] Do you run R on Fedora or Debian?
In-Reply-To: <20221211144502.20cbe225@Tarkus>
References: <949F9A62-ACB1-4816-9331-4816C2F8DC8C@noaa.gov>
 <20221211144502.20cbe225@Tarkus>
Message-ID: <6A8CD78D-ED92-4C6C-80AF-BD5E37C39C6F@noaa.gov>

Thanks.  Yes,  that is what I figured out last night.  I believe the problem is actually coming from rerddap,  not rerddapXtracto - which as I said creates a tempdir on first call.  I am submitting a new version of rerddap today,  as well as a new version of rerddapXtracto in the next few days.  I will look at hoardr and see if I can take it over.  I know hoardr uses R6 methods,  of which I know nothing,  maintaining it may be over my capabilities,  but I will give it a look.

I really appreciate the help several people have given me.  This is the best of what help-lists are suppose to be about.

-Roy

PS - If a do take over hoardr,  what is the process for becoming the new maintainer of a CRAN package



> On Dec 11, 2022, at 3:45 AM, Ivan Krylov <krylov.r00t at gmail.com> wrote:
> 
> On Sat, 10 Dec 2022 14:00:22 -0800
> Roy Mendelssohn - NOAA Federal via R-package-devel
> <r-package-devel at r-project.org> wrote:
> 
>> CRAN has sent me a notice about the following:
>> 
>> https://www.stats.ox.ac.uk/pub/bdr/donttest/rerddapXtracto.out
>> 
>> I can not reproduce it.  I test on my Mac,  the cache space is
>> properly handled  (by a package outside mine).  Same with Debian on
>> r-hub.  I installed Fedora on a virtual machine, no problem  (it is
>> assigned a space in /tmp).
> 
> I've trace()d rerddap:::gen_key to notify me when a file with the cache
> key of 4f8f83808465a7f7619285e9871747af is being downloaded. Since
> digest::digest defaults to serialize = TRUE, this should only work with
> R-to-be-4.3.0 (I compiled R-devel r83400, same as in the failed check):
> 
> library(rerddapXtracto)
> trace(
> rerddap:::gen_key,
> quote({
>  if(digest::digest(ky) == '4f8f83808465a7f7619285e9871747af') {
>   cat('\n\nFound a match\n\n')
>   str(url); str(args); print(ky); str(digest::digest(ky))
>   message('\n\nFound a match\n\n')
>  }
> }),
> at = 3
> )
> example(rxtracto)
> example(rxtracto_3D)
> example(rxtractogon)
> 
> Surprisingly, there were no hits. I also tried copying and pasting all
> code from the vignette and even uncommenting the code marked as
> \dontrun{}, also with no results.
> 
> The code that actually creates these files lives in the rerddap
> package. The page at
> <https://www.stats.ox.ac.uk/pub/bdr/Rconfig/r-devel-linux-x86_64-fedora-gcc>
> says that packages are checked in parallel. What if an unlucky reverse
> dependency of rerddap was being checked at the same time as your
> package, making rerddapXtracto get its NOTE?
> 
> I cleaned ~/.cache/R, put the rerddap source package in a directory and
> ran:
> 
> (res <- tools::check_packages_in_dir(
> '.', check_args = '--run-donttest', reverse = list(recursive = TRUE),
> check_env = c(
>  "_R_CHECK_DONTTEST_EXAMPLES_=true",
>  "_R_CHECK_THINGS_IN_OTHER_DIRS_=true"
> )
> ))
> 
> I got a NOTE for plotdap!
> 
> * checking for new files in some other directories ... NOTE
> Found the following files/directories:
>  ?~/.cache/R? ?~/.cache/R/rerddap?
>  ?~/.cache/R/rerddap/1b43b4335f06b318b914ba2cc2f88872.nc?
>  ?~/.cache/R/rerddap/4f8f83808465a7f7619285e9871747af.nc?
>  ?~/.cache/R/rerddap/8cb244e059b86865b7933a3d9b72fe16.csv?
> 
> Looking at the examples for plotdap::add_griddap and
> plotdap::add_tabledap, I think that they may be responsible for the
> NOTE, because there's no pre-example cache setup and teardown. I also
> finally got a match from my tracing code by running
> example(add_griddap).
> 
> There's more than one way to do it right; my favourite would be to wrap
> the pre-example code and post-example code in \dontshow{}, changing the
> cache settings in the first block and restoring them in the second one.
> Everywhere else I would use on.exit(), but examples are special in
> their relationship with autoprinting and crashing there being
> disallowed, making this approach feasible.
> 
> -- 
> Best regards,
> Ivan

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From oto@kh|@| @end|ng |rom gm@||@com  Mon Dec 12 12:57:05 2022
From: oto@kh|@| @end|ng |rom gm@||@com (Ismail Otoakhia)
Date: Mon, 12 Dec 2022 12:57:05 +0100
Subject: [R-pkg-devel] How to Fix Debian and Linux Check Errors?
Message-ID: <CAG01fEZJQGXx9W=Eqm9kxtUWW-1AyMPg8-3Hj13gVR412mZxVw@mail.gmail.com>

I received the link below from CRAN
https://cran.r-project.org/web/checks/check_results_ardl.nardl.html

I cannot reproduce the error in the example files. Also, I have no idea how
to fix the error on the r-devel-linux-x86_64-debian-gcc
<https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-debian-gcc>
 , r-patched-linux-x86_64
<https://cran.r-project.org/web/checks/check_flavors.html#r-patched-linux-x86_64>
 and r-release-linux-x86_64
<https://cran.r-project.org/web/checks/check_flavors.html#r-release-linux-x86_64>

Where do I start and how can this error be fixed?

Thanks

E. I Otoakhia

	[[alternative HTML version deleted]]


From @|ex@ndre@court|o| @end|ng |rom gm@||@com  Mon Dec 12 15:59:52 2022
From: @|ex@ndre@court|o| @end|ng |rom gm@||@com (Alexandre Courtiol)
Date: Mon, 12 Dec 2022 15:59:52 +0100
Subject: [R-pkg-devel] How to Fix Debian and Linux Check Errors?
In-Reply-To: <CAG01fEZJQGXx9W=Eqm9kxtUWW-1AyMPg8-3Hj13gVR412mZxVw@mail.gmail.com>
References: <CAG01fEZJQGXx9W=Eqm9kxtUWW-1AyMPg8-3Hj13gVR412mZxVw@mail.gmail.com>
Message-ID: <CAERMt4dj+kcZR=CxAOTaXzuxkKEoK9RW5CKczf9X19GgHg1EAw@mail.gmail.com>

Not sure this is random but all you errors appear on platform that seem to
use LC_CTYPE = C.UTF-8
https://cran.r-project.org/web/checks/check_flavors.html#r-release-linux-x86_64
I would start digging in this direction...

On Mon, 12 Dec 2022 at 14:13, Ismail Otoakhia <otoakhiai at gmail.com> wrote:

> I received the link below from CRAN
> https://cran.r-project.org/web/checks/check_results_ardl.nardl.html
>
> I cannot reproduce the error in the example files. Also, I have no idea how
> to fix the error on the r-devel-linux-x86_64-debian-gcc
> <
> https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-debian-gcc
> >
>  , r-patched-linux-x86_64
> <
> https://cran.r-project.org/web/checks/check_flavors.html#r-patched-linux-x86_64
> >
>  and r-release-linux-x86_64
> <
> https://cran.r-project.org/web/checks/check_flavors.html#r-release-linux-x86_64
> >
>
> Where do I start and how can this error be fixed?
>
> Thanks
>
> E. I Otoakhia
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Alexandre Courtiol, www.datazoogang.de

	[[alternative HTML version deleted]]


From |embry @end|ng |rom ecocc@@com  Mon Dec 12 16:42:43 2022
From: |embry @end|ng |rom ecocc@@com (EcoC2S - Irucka Embry)
Date: Mon, 12 Dec 2022 09:42:43 -0600
Subject: [R-pkg-devel] 
 =?utf-8?q?no_visible_binding_for_global_variable_?=
 =?utf-8?b?4oCYZGVncmVlX0PigJkgLSBDUkFOIGNoZWNrIG5vdGU=?=
In-Reply-To: <CAPcHnpRXYqqDnAnNTxr=whERub6QUbjou03EYAGDvi-6UiS35w@mail.gmail.com>
References: <dc713e6d764976c5f370cfb05ba38e92@ecoccs.com>
 <1fba4982cf0839bd7443542b325dc6eb@ecoccs.com>
 <CAPcHnpRXYqqDnAnNTxr=whERub6QUbjou03EYAGDvi-6UiS35w@mail.gmail.com>
Message-ID: <e13d5667a1871459c30c934d2b3f28cb@ecoccs.com>

Hi Andrew, set_units(T, "degree_C") does not work; however, setting 
degree_C as a global variable does work.

Thank you for your suggestion.

Irucka


On 11-12-2022 00:29, Andrew Simmons wrote:
> You can declare degree_C as a variable before using set_units():
> 
> degree_C <- NULL
> set_units(T, degree_C)
> 
> you could use globalVariables() somewhere at the top-level in your 
> package:
> 
> utils::globalVariables("degree_C")
> 
> or you could supply degree_C as a literal character string:
> 
> set_units(T, "degree_C")
> 
> On Sat, Dec 10, 2022 at 11:13 PM EcoC2S - Irucka Embry
> <iembry at ecoccs.com> wrote:
>> 
>> In my iemisc package, I am using the units package.
>> 
>> This is an example of how I am using the set_units function:
>> 
>> T <- 20
>> 
>> set_units(T, degree_C)
>> 
>> Upon checking iemisc with devtools for CRAN submission, I receive the
>> following note under "checking R code for possible problems":
>> 
>> no visible binding for global variable ?degree_C?
>> 
>> Please tell me how to avoid that note in my R packages.
>> 
>> Thank you.
>> 
>> Irucka
>> 
>> --
>> --
>> No fear, Only Love! / ?No temas, solamente amor!
>> -Irucka Ajani Embry, 15 March 2020
>> 
>> Family Partners:
>> http://www.sustainlex.org/
>> https://www.schoolingsolutions.com/
>> 
>> ---------------------------------------------------------------------------------------------------------------
>> 
>> The business collaboration between EConsulting (tm)
>> [https://www.econsultingllc.org/] and EcoC^2S, is Getting Back to
>> Nature.
>> 
>> Getting Back to Nature LocalHarvest --
>> https://www.localharvest.org/getting-back-to-nature-M73453
>> Getting Back to Nature -- https://www.gettingback2nature.farm/
>> 
>> -- Irucka and his twin brother, Obiora, are featured in the Middle
>> Tennessee Local Table Magazine Annual issue. The article discusses 
>> their
>> family farm history and the current work that they are doing under
>> Getting
>> Back to Nature. The full magazine can be found here [the article 
>> begins
>> on
>> page 18 of the PDF document]:
>> 
>> https://media.gettingback2nature.farm/pdf/LocalTable_ANNUAL_2020_lo_res.pdf
>> 
>> -- Obiora and Irucka were interviewed separately in early 2020 for the
>> Natural Resources Defense Council's (NRDC) "Regenerative Agriculture:
>> Farm
>> Policy for the 21st Century: Policy Recommendations to Advance
>> Regenerative
>> Agriculture" report written By Arohi Sharma, Lara Bryant, and Ellen 
>> Lee.
>> The PDF report is available below:
>> 
>> https://www.nrdc.org/sites/default/files/regenerative-agriculture-farm-policy-21st-century-report.pdf
>> 
>> EcoC2S -- https://www.ecoccs.com/
>> Principal, Irucka Embry, EIT
>> 
>> Services:
>> Growing Food
>> Healthy Living Mentor
>> Data Analysis with R
>> R Training
>> Chemistry and Mathematics Tutoring
>> Free/Libre and Open Source Software (FLOSS) Consultation
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
--
No fear, Only Love! / ?No temas, solamente amor!
-Irucka Ajani Embry, 15 March 2020

Family Partners:
http://www.sustainlex.org/
https://www.schoolingsolutions.com/

---------------------------------------------------------------------------------------------------------------

The business collaboration between EConsulting (tm)
[https://www.econsultingllc.org/] and EcoC^2S, is Getting Back to 
Nature.

Getting Back to Nature LocalHarvest --
https://www.localharvest.org/getting-back-to-nature-M73453
Getting Back to Nature -- https://www.gettingback2nature.farm/

-- Irucka and his twin brother, Obiora, are featured in the Middle
Tennessee Local Table Magazine Annual issue. The article discusses their
family farm history and the current work that they are doing under 
Getting
Back to Nature. The full magazine can be found here [the article begins 
on
page 18 of the PDF document]:

https://media.gettingback2nature.farm/pdf/LocalTable_ANNUAL_2020_lo_res.pdf

-- Obiora and Irucka were interviewed separately in early 2020 for the
Natural Resources Defense Council's (NRDC) "Regenerative Agriculture: 
Farm
Policy for the 21st Century: Policy Recommendations to Advance 
Regenerative
Agriculture" report written By Arohi Sharma, Lara Bryant, and Ellen Lee.
The PDF report is available below:

https://www.nrdc.org/sites/default/files/regenerative-agriculture-farm-policy-21st-century-report.pdf

EcoC2S -- https://www.ecoccs.com/
Principal, Irucka Embry, EIT

Services:
Growing Food
Healthy Living Mentor
Data Analysis with R
R Training
Chemistry and Mathematics Tutoring
Free/Libre and Open Source Software (FLOSS) Consultation


From |embry @end|ng |rom ecocc@@com  Mon Dec 12 16:43:55 2022
From: |embry @end|ng |rom ecocc@@com (EcoC2S - Irucka Embry)
Date: Mon, 12 Dec 2022 09:43:55 -0600
Subject: [R-pkg-devel] 
 =?utf-8?q?no_visible_binding_for_global_variable_?=
 =?utf-8?b?4oCYZGVncmVlX0PigJkgLSBDUkFOIGNoZWNrIG5vdGU=?=
In-Reply-To: <CAERMt4fGChjogJPfX-kwdYFJDc2uVH=Szhg9m1HBgr9451brpw@mail.gmail.com>
References: <dc713e6d764976c5f370cfb05ba38e92@ecoccs.com>
 <1fba4982cf0839bd7443542b325dc6eb@ecoccs.com>
 <CAERMt4fGChjogJPfX-kwdYFJDc2uVH=Szhg9m1HBgr9451brpw@mail.gmail.com>
Message-ID: <0fd0120e3ed0e4d96998f82c5519fee3@ecoccs.com>

Hi Alexandre, set_units(T, "degree_C") does not prevent the note.

Thank you for your suggestion though.

Irucka



On 11-12-2022 05:15, Alexandre Courtiol wrote:
> set_units(T, "degree_C") ## using quotes will prevent the R CMD check
> note and will still work in this case.
> 
> On Sun, 11 Dec 2022 at 05:13, EcoC2S - Irucka Embry
> <iembry at ecoccs.com> wrote:
> 
>> In my iemisc package, I am using the units package.
>> 
>> This is an example of how I am using the set_units function:
>> 
>> T <- 20
>> 
>> set_units(T, degree_C)
>> 
>> Upon checking iemisc with devtools for CRAN submission, I receive
>> the
>> following note under "checking R code for possible problems":
>> 
>> no visible binding for global variable ?degree_C?
>> 
>> Please tell me how to avoid that note in my R packages.
>> 
>> Thank you.
>> 
>> Irucka
>> 
>> --
>> --
>> No fear, Only Love! / ?No temas, solamente amor!
>> -Irucka Ajani Embry, 15 March 2020
>> 
>> Family Partners:
>> http://www.sustainlex.org/
>> https://www.schoolingsolutions.com/
>> 
>> 
> ---------------------------------------------------------------------------------------------------------------
>> 
>> The business collaboration between EConsulting (tm)
>> [https://www.econsultingllc.org/] and EcoC^2S, is Getting Back to
>> Nature.
>> 
>> Getting Back to Nature LocalHarvest --
>> https://www.localharvest.org/getting-back-to-nature-M73453
>> Getting Back to Nature -- https://www.gettingback2nature.farm/
>> 
>> -- Irucka and his twin brother, Obiora, are featured in the Middle
>> Tennessee Local Table Magazine Annual issue. The article discusses
>> their
>> family farm history and the current work that they are doing under
>> Getting
>> Back to Nature. The full magazine can be found here [the article
>> begins
>> on
>> page 18 of the PDF document]:
>> 
>> 
> https://media.gettingback2nature.farm/pdf/LocalTable_ANNUAL_2020_lo_res.pdf
>> 
>> -- Obiora and Irucka were interviewed separately in early 2020 for
>> the
>> Natural Resources Defense Council's (NRDC) "Regenerative
>> Agriculture:
>> Farm
>> Policy for the 21st Century: Policy Recommendations to Advance
>> Regenerative
>> Agriculture" report written By Arohi Sharma, Lara Bryant, and Ellen
>> Lee.
>> The PDF report is available below:
>> 
>> 
> https://www.nrdc.org/sites/default/files/regenerative-agriculture-farm-policy-21st-century-report.pdf
>> 
>> EcoC2S -- https://www.ecoccs.com/
>> Principal, Irucka Embry, EIT
>> 
>> Services:
>> Growing Food
>> Healthy Living Mentor
>> Data Analysis with R
>> R Training
>> Chemistry and Mathematics Tutoring
>> Free/Libre and Open Source Software (FLOSS) Consultation
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> --
> 
> Alexandre Courtiol, www.datazoogang.de [1]
> 
> Links:
> ------
> [1] http://www.datazoogang.de

-- 
--
No fear, Only Love! / ?No temas, solamente amor!
-Irucka Ajani Embry, 15 March 2020

Family Partners:
http://www.sustainlex.org/
https://www.schoolingsolutions.com/

---------------------------------------------------------------------------------------------------------------

The business collaboration between EConsulting (tm)
[https://www.econsultingllc.org/] and EcoC^2S, is Getting Back to 
Nature.

Getting Back to Nature LocalHarvest --
https://www.localharvest.org/getting-back-to-nature-M73453
Getting Back to Nature -- https://www.gettingback2nature.farm/

-- Irucka and his twin brother, Obiora, are featured in the Middle
Tennessee Local Table Magazine Annual issue. The article discusses their
family farm history and the current work that they are doing under 
Getting
Back to Nature. The full magazine can be found here [the article begins 
on
page 18 of the PDF document]:

https://media.gettingback2nature.farm/pdf/LocalTable_ANNUAL_2020_lo_res.pdf

-- Obiora and Irucka were interviewed separately in early 2020 for the
Natural Resources Defense Council's (NRDC) "Regenerative Agriculture: 
Farm
Policy for the 21st Century: Policy Recommendations to Advance 
Regenerative
Agriculture" report written By Arohi Sharma, Lara Bryant, and Ellen Lee.
The PDF report is available below:

https://www.nrdc.org/sites/default/files/regenerative-agriculture-farm-policy-21st-century-report.pdf

EcoC2S -- https://www.ecoccs.com/
Principal, Irucka Embry, EIT

Services:
Growing Food
Healthy Living Mentor
Data Analysis with R
R Training
Chemistry and Mathematics Tutoring
Free/Libre and Open Source Software (FLOSS) Consultation


From |uc@r @end|ng |rom |edor@project@org  Mon Dec 12 16:58:11 2022
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Mon, 12 Dec 2022 16:58:11 +0100
Subject: [R-pkg-devel] 
	=?utf-8?q?no_visible_binding_for_global_variable_?=
	=?utf-8?b?4oCYZGVncmVlX0PigJkgLSBDUkFOIGNoZWNrIG5vdGU=?=
In-Reply-To: <e13d5667a1871459c30c934d2b3f28cb@ecoccs.com>
References: <dc713e6d764976c5f370cfb05ba38e92@ecoccs.com>
 <1fba4982cf0839bd7443542b325dc6eb@ecoccs.com>
 <CAPcHnpRXYqqDnAnNTxr=whERub6QUbjou03EYAGDvi-6UiS35w@mail.gmail.com>
 <e13d5667a1871459c30c934d2b3f28cb@ecoccs.com>
Message-ID: <CALEXWq1f6eDeZZc1qSGNFC5gDDOU_eE12ehcZ1cAL+jYeAF1AA@mail.gmail.com>

On Mon, 12 Dec 2022 at 16:43, EcoC2S - Irucka Embry <iembry at ecoccs.com> wrote:
>
> Hi Andrew, set_units(T, "degree_C") does not work;

Sorry, do you mean that the code fails? Or the code works but you
still see the NOTE? In this case, it is possible that you didn't
replace all the instances of set_units(T, degree_C) in your files.

I?aki

> however, setting
> degree_C as a global variable does work.
>
> Thank you for your suggestion.
>
> Irucka
>
>
> On 11-12-2022 00:29, Andrew Simmons wrote:
> > You can declare degree_C as a variable before using set_units():
> >
> > degree_C <- NULL
> > set_units(T, degree_C)
> >
> > you could use globalVariables() somewhere at the top-level in your
> > package:
> >
> > utils::globalVariables("degree_C")
> >
> > or you could supply degree_C as a literal character string:
> >
> > set_units(T, "degree_C")
> >
> > On Sat, Dec 10, 2022 at 11:13 PM EcoC2S - Irucka Embry
> > <iembry at ecoccs.com> wrote:
> >>
> >> In my iemisc package, I am using the units package.
> >>
> >> This is an example of how I am using the set_units function:
> >>
> >> T <- 20
> >>
> >> set_units(T, degree_C)
> >>
> >> Upon checking iemisc with devtools for CRAN submission, I receive the
> >> following note under "checking R code for possible problems":
> >>
> >> no visible binding for global variable ?degree_C?
> >>
> >> Please tell me how to avoid that note in my R packages.
> >>
> >> Thank you.
> >>
> >> Irucka
> >>
> >> --
> >> --
> >> No fear, Only Love! / ?No temas, solamente amor!
> >> -Irucka Ajani Embry, 15 March 2020
> >>
> >> Family Partners:
> >> http://www.sustainlex.org/
> >> https://www.schoolingsolutions.com/
> >>
> >> ---------------------------------------------------------------------------------------------------------------
> >>
> >> The business collaboration between EConsulting (tm)
> >> [https://www.econsultingllc.org/] and EcoC^2S, is Getting Back to
> >> Nature.
> >>
> >> Getting Back to Nature LocalHarvest --
> >> https://www.localharvest.org/getting-back-to-nature-M73453
> >> Getting Back to Nature -- https://www.gettingback2nature.farm/
> >>
> >> -- Irucka and his twin brother, Obiora, are featured in the Middle
> >> Tennessee Local Table Magazine Annual issue. The article discusses
> >> their
> >> family farm history and the current work that they are doing under
> >> Getting
> >> Back to Nature. The full magazine can be found here [the article
> >> begins
> >> on
> >> page 18 of the PDF document]:
> >>
> >> https://media.gettingback2nature.farm/pdf/LocalTable_ANNUAL_2020_lo_res.pdf
> >>
> >> -- Obiora and Irucka were interviewed separately in early 2020 for the
> >> Natural Resources Defense Council's (NRDC) "Regenerative Agriculture:
> >> Farm
> >> Policy for the 21st Century: Policy Recommendations to Advance
> >> Regenerative
> >> Agriculture" report written By Arohi Sharma, Lara Bryant, and Ellen
> >> Lee.
> >> The PDF report is available below:
> >>
> >> https://www.nrdc.org/sites/default/files/regenerative-agriculture-farm-policy-21st-century-report.pdf
> >>
> >> EcoC2S -- https://www.ecoccs.com/
> >> Principal, Irucka Embry, EIT
> >>
> >> Services:
> >> Growing Food
> >> Healthy Living Mentor
> >> Data Analysis with R
> >> R Training
> >> Chemistry and Mathematics Tutoring
> >> Free/Libre and Open Source Software (FLOSS) Consultation
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
> --
> No fear, Only Love! / ?No temas, solamente amor!
> -Irucka Ajani Embry, 15 March 2020
>
> Family Partners:
> http://www.sustainlex.org/
> https://www.schoolingsolutions.com/
>
> ---------------------------------------------------------------------------------------------------------------
>
> The business collaboration between EConsulting (tm)
> [https://www.econsultingllc.org/] and EcoC^2S, is Getting Back to
> Nature.
>
> Getting Back to Nature LocalHarvest --
> https://www.localharvest.org/getting-back-to-nature-M73453
> Getting Back to Nature -- https://www.gettingback2nature.farm/
>
> -- Irucka and his twin brother, Obiora, are featured in the Middle
> Tennessee Local Table Magazine Annual issue. The article discusses their
> family farm history and the current work that they are doing under
> Getting
> Back to Nature. The full magazine can be found here [the article begins
> on
> page 18 of the PDF document]:
>
> https://media.gettingback2nature.farm/pdf/LocalTable_ANNUAL_2020_lo_res.pdf
>
> -- Obiora and Irucka were interviewed separately in early 2020 for the
> Natural Resources Defense Council's (NRDC) "Regenerative Agriculture:
> Farm
> Policy for the 21st Century: Policy Recommendations to Advance
> Regenerative
> Agriculture" report written By Arohi Sharma, Lara Bryant, and Ellen Lee.
> The PDF report is available below:
>
> https://www.nrdc.org/sites/default/files/regenerative-agriculture-farm-policy-21st-century-report.pdf
>
> EcoC2S -- https://www.ecoccs.com/
> Principal, Irucka Embry, EIT
>
> Services:
> Growing Food
> Healthy Living Mentor
> Data Analysis with R
> R Training
> Chemistry and Mathematics Tutoring
> Free/Libre and Open Source Software (FLOSS) Consultation
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
I?aki ?car


From |embry @end|ng |rom ecocc@@com  Mon Dec 12 17:19:42 2022
From: |embry @end|ng |rom ecocc@@com (EcoC2S - Irucka Embry)
Date: Mon, 12 Dec 2022 10:19:42 -0600
Subject: [R-pkg-devel] 
 =?utf-8?q?no_visible_binding_for_global_variable_?=
 =?utf-8?b?4oCYZGVncmVlX0PigJkgLSBDUkFOIGNoZWNrIG5vdGU=?=
In-Reply-To: <CALEXWq1f6eDeZZc1qSGNFC5gDDOU_eE12ehcZ1cAL+jYeAF1AA@mail.gmail.com>
References: <dc713e6d764976c5f370cfb05ba38e92@ecoccs.com>
 <1fba4982cf0839bd7443542b325dc6eb@ecoccs.com>
 <CAPcHnpRXYqqDnAnNTxr=whERub6QUbjou03EYAGDvi-6UiS35w@mail.gmail.com>
 <e13d5667a1871459c30c934d2b3f28cb@ecoccs.com>
 <CALEXWq1f6eDeZZc1qSGNFC5gDDOU_eE12ehcZ1cAL+jYeAF1AA@mail.gmail.com>
Message-ID: <3896709d851b23233048ebbceefdd922@ecoccs.com>

Hi I?aki and Andrew, I'm sorry, I'll clarify my statement here.

set_units(T, "degree_C") still produced the R CMD check note, but it 
works with regards to setting the unit for the R expression.

I replaced every instance of set_units(T, degree_C) with set_units(T, 
"degree_C") in a single function (I use the units package throughout 
many functions in my iemisc package) & than I ran R CMD check again. I 
looked for that particular function in the "checking R code for possible 
problems ..." section and I still saw the function name with this note: 
no visible binding for global variable ?degree_C?.

Using the global variables option does prevent the note from occurring 
in all of my other functions where I set units.

I hope that this clarification helps.

On a side note, I used the units package in other functions; however, I 
have not ever seen a note for the same usage in other functions. I don't 
know why the same usage of the units package in some functions draws a 
note while in other functions there is no note.

Thank you.

Irucka


On 12-12-2022 09:58, I?aki Ucar wrote:
> On Mon, 12 Dec 2022 at 16:43, EcoC2S - Irucka Embry <iembry at ecoccs.com> 
> wrote:
>> 
>> Hi Andrew, set_units(T, "degree_C") does not work;
> 
> Sorry, do you mean that the code fails? Or the code works but you
> still see the NOTE? In this case, it is possible that you didn't
> replace all the instances of set_units(T, degree_C) in your files.
> 
> I?aki
> 
>> however, setting
>> degree_C as a global variable does work.
>> 
>> Thank you for your suggestion.
>> 
>> Irucka
>> 
>> 

On 12-12-2022 09:56, Alexandre Courtiol wrote:
> Hi Irucka,
> using text to define the unit is valid, so I don't see why it would
> not work.
> It would be better than defining a global variable.
> 
> ``` rT <- 2
> units::set_units(T, "degree_C")
> #> 2 [?C]
> ```
> <sup>Created on 2022-12-12 with [reprex
> v2.0.2](https://reprex.tidyverse.org)</sup>
> 
> ++
> 

>> On 11-12-2022 00:29, Andrew Simmons wrote:
>> > You can declare degree_C as a variable before using set_units():
>> >
>> > degree_C <- NULL
>> > set_units(T, degree_C)
>> >
>> > you could use globalVariables() somewhere at the top-level in your
>> > package:
>> >
>> > utils::globalVariables("degree_C")
>> >
>> > or you could supply degree_C as a literal character string:
>> >
>> > set_units(T, "degree_C")
>> >
>> > On Sat, Dec 10, 2022 at 11:13 PM EcoC2S - Irucka Embry
>> > <iembry at ecoccs.com> wrote:
>> >>
>> >> In my iemisc package, I am using the units package.
>> >>
>> >> This is an example of how I am using the set_units function:
>> >>
>> >> T <- 20
>> >>
>> >> set_units(T, degree_C)
>> >>
>> >> Upon checking iemisc with devtools for CRAN submission, I receive the
>> >> following note under "checking R code for possible problems":
>> >>
>> >> no visible binding for global variable ?degree_C?
>> >>
>> >> Please tell me how to avoid that note in my R packages.
>> >>
>> >> Thank you.
>> >>
>> >> Irucka
>> >>
>> >> --
>> >> --
>> >> No fear, Only Love! / ?No temas, solamente amor!
>> >> -Irucka Ajani Embry, 15 March 2020
>> >>
>> >> Family Partners:
>> >> http://www.sustainlex.org/
>> >> https://www.schoolingsolutions.com/
>> >>
>> >> ---------------------------------------------------------------------------------------------------------------
>> >>
>> >> The business collaboration between EConsulting (tm)
>> >> [https://www.econsultingllc.org/] and EcoC^2S, is Getting Back to
>> >> Nature.
>> >>
>> >> Getting Back to Nature LocalHarvest --
>> >> https://www.localharvest.org/getting-back-to-nature-M73453
>> >> Getting Back to Nature -- https://www.gettingback2nature.farm/
>> >>
>> >> -- Irucka and his twin brother, Obiora, are featured in the Middle
>> >> Tennessee Local Table Magazine Annual issue. The article discusses
>> >> their
>> >> family farm history and the current work that they are doing under
>> >> Getting
>> >> Back to Nature. The full magazine can be found here [the article
>> >> begins
>> >> on
>> >> page 18 of the PDF document]:
>> >>
>> >> https://media.gettingback2nature.farm/pdf/LocalTable_ANNUAL_2020_lo_res.pdf
>> >>
>> >> -- Obiora and Irucka were interviewed separately in early 2020 for the
>> >> Natural Resources Defense Council's (NRDC) "Regenerative Agriculture:
>> >> Farm
>> >> Policy for the 21st Century: Policy Recommendations to Advance
>> >> Regenerative
>> >> Agriculture" report written By Arohi Sharma, Lara Bryant, and Ellen
>> >> Lee.
>> >> The PDF report is available below:
>> >>
>> >> https://www.nrdc.org/sites/default/files/regenerative-agriculture-farm-policy-21st-century-report.pdf
>> >>
>> >> EcoC2S -- https://www.ecoccs.com/
>> >> Principal, Irucka Embry, EIT
>> >>
>> >> Services:
>> >> Growing Food
>> >> Healthy Living Mentor
>> >> Data Analysis with R
>> >> R Training
>> >> Chemistry and Mathematics Tutoring
>> >> Free/Libre and Open Source Software (FLOSS) Consultation
>> >>
>> >> ______________________________________________
>> >> R-package-devel at r-project.org mailing list
>> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
>> --
>> --
>> No fear, Only Love! / ?No temas, solamente amor!
>> -Irucka Ajani Embry, 15 March 2020
>> 
>> Family Partners:
>> http://www.sustainlex.org/
>> https://www.schoolingsolutions.com/
>> 
>> ---------------------------------------------------------------------------------------------------------------
>> 
>> The business collaboration between EConsulting (tm)
>> [https://www.econsultingllc.org/] and EcoC^2S, is Getting Back to
>> Nature.
>> 
>> Getting Back to Nature LocalHarvest --
>> https://www.localharvest.org/getting-back-to-nature-M73453
>> Getting Back to Nature -- https://www.gettingback2nature.farm/
>> 
>> -- Irucka and his twin brother, Obiora, are featured in the Middle
>> Tennessee Local Table Magazine Annual issue. The article discusses 
>> their
>> family farm history and the current work that they are doing under
>> Getting
>> Back to Nature. The full magazine can be found here [the article 
>> begins
>> on
>> page 18 of the PDF document]:
>> 
>> https://media.gettingback2nature.farm/pdf/LocalTable_ANNUAL_2020_lo_res.pdf
>> 
>> -- Obiora and Irucka were interviewed separately in early 2020 for the
>> Natural Resources Defense Council's (NRDC) "Regenerative Agriculture:
>> Farm
>> Policy for the 21st Century: Policy Recommendations to Advance
>> Regenerative
>> Agriculture" report written By Arohi Sharma, Lara Bryant, and Ellen 
>> Lee.
>> The PDF report is available below:
>> 
>> https://www.nrdc.org/sites/default/files/regenerative-agriculture-farm-policy-21st-century-report.pdf
>> 
>> EcoC2S -- https://www.ecoccs.com/
>> Principal, Irucka Embry, EIT
>> 
>> Services:
>> Growing Food
>> Healthy Living Mentor
>> Data Analysis with R
>> R Training
>> Chemistry and Mathematics Tutoring
>> Free/Libre and Open Source Software (FLOSS) Consultation
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> 
> --
> I?aki ?car

-- 
--
No fear, Only Love! / ?No temas, solamente amor!
-Irucka Ajani Embry, 15 March 2020

Family Partners:
http://www.sustainlex.org/
https://www.schoolingsolutions.com/

---------------------------------------------------------------------------------------------------------------

The business collaboration between EConsulting (tm)
[https://www.econsultingllc.org/] and EcoC^2S, is Getting Back to 
Nature.

Getting Back to Nature LocalHarvest --
https://www.localharvest.org/getting-back-to-nature-M73453
Getting Back to Nature -- https://www.gettingback2nature.farm/

-- Irucka and his twin brother, Obiora, are featured in the Middle
Tennessee Local Table Magazine Annual issue. The article discusses their
family farm history and the current work that they are doing under 
Getting
Back to Nature. The full magazine can be found here [the article begins 
on
page 18 of the PDF document]:

https://media.gettingback2nature.farm/pdf/LocalTable_ANNUAL_2020_lo_res.pdf

-- Obiora and Irucka were interviewed separately in early 2020 for the
Natural Resources Defense Council's (NRDC) "Regenerative Agriculture: 
Farm
Policy for the 21st Century: Policy Recommendations to Advance 
Regenerative
Agriculture" report written By Arohi Sharma, Lara Bryant, and Ellen Lee.
The PDF report is available below:

https://www.nrdc.org/sites/default/files/regenerative-agriculture-farm-policy-21st-century-report.pdf

EcoC2S -- https://www.ecoccs.com/
Principal, Irucka Embry, EIT

Services:
Growing Food
Healthy Living Mentor
Data Analysis with R
R Training
Chemistry and Mathematics Tutoring
Free/Libre and Open Source Software (FLOSS) Consultation


From @|ex@ndre@court|o| @end|ng |rom gm@||@com  Mon Dec 12 17:26:01 2022
From: @|ex@ndre@court|o| @end|ng |rom gm@||@com (Alexandre Courtiol)
Date: Mon, 12 Dec 2022 17:26:01 +0100
Subject: [R-pkg-devel] 
	=?utf-8?q?no_visible_binding_for_global_variable_?=
	=?utf-8?b?4oCYZGVncmVlX0PigJkgLSBDUkFOIGNoZWNrIG5vdGU=?=
In-Reply-To: <3896709d851b23233048ebbceefdd922@ecoccs.com>
References: <dc713e6d764976c5f370cfb05ba38e92@ecoccs.com>
 <1fba4982cf0839bd7443542b325dc6eb@ecoccs.com>
 <CAPcHnpRXYqqDnAnNTxr=whERub6QUbjou03EYAGDvi-6UiS35w@mail.gmail.com>
 <e13d5667a1871459c30c934d2b3f28cb@ecoccs.com>
 <CALEXWq1f6eDeZZc1qSGNFC5gDDOU_eE12ehcZ1cAL+jYeAF1AA@mail.gmail.com>
 <3896709d851b23233048ebbceefdd922@ecoccs.com>
Message-ID: <CAERMt4dC0V56jkDhmFnzn3GwfM-JDMnHQ=schoeMXUR0M-peTA@mail.gmail.com>

Irucka,
If you saw still have the note "no visible binding for global variable
?degree_C?", it implies that somewhere in your package degree_C is still
unquotted...
Do you have your code online for us to help you more effectively?
++

On Mon, 12 Dec 2022 at 17:20, EcoC2S - Irucka Embry <iembry at ecoccs.com>
wrote:

> Hi I?aki and Andrew, I'm sorry, I'll clarify my statement here.
>
> set_units(T, "degree_C") still produced the R CMD check note, but it
> works with regards to setting the unit for the R expression.
>
> I replaced every instance of set_units(T, degree_C) with set_units(T,
> "degree_C") in a single function (I use the units package throughout
> many functions in my iemisc package) & than I ran R CMD check again. I
> looked for that particular function in the "checking R code for possible
> problems ..." section and I still saw the function name with this note:
> no visible binding for global variable ?degree_C?.
>
> Using the global variables option does prevent the note from occurring
> in all of my other functions where I set units.
>
> I hope that this clarification helps.
>
> On a side note, I used the units package in other functions; however, I
> have not ever seen a note for the same usage in other functions. I don't
> know why the same usage of the units package in some functions draws a
> note while in other functions there is no note.
>
> Thank you.
>
> Irucka
>
>
> On 12-12-2022 09:58, I?aki Ucar wrote:
> > On Mon, 12 Dec 2022 at 16:43, EcoC2S - Irucka Embry <iembry at ecoccs.com>
> > wrote:
> >>
> >> Hi Andrew, set_units(T, "degree_C") does not work;
> >
> > Sorry, do you mean that the code fails? Or the code works but you
> > still see the NOTE? In this case, it is possible that you didn't
> > replace all the instances of set_units(T, degree_C) in your files.
> >
> > I?aki
> >
> >> however, setting
> >> degree_C as a global variable does work.
> >>
> >> Thank you for your suggestion.
> >>
> >> Irucka
> >>
> >>
>
> On 12-12-2022 09:56, Alexandre Courtiol wrote:
> > Hi Irucka,
> > using text to define the unit is valid, so I don't see why it would
> > not work.
> > It would be better than defining a global variable.
> >
> > ``` rT <- 2
> > units::set_units(T, "degree_C")
> > #> 2 [?C]
> > ```
> > <sup>Created on 2022-12-12 with [reprex
> > v2.0.2](https://reprex.tidyverse.org)</sup>
> >
> > ++
> >
>
> >> On 11-12-2022 00:29, Andrew Simmons wrote:
> >> > You can declare degree_C as a variable before using set_units():
> >> >
> >> > degree_C <- NULL
> >> > set_units(T, degree_C)
> >> >
> >> > you could use globalVariables() somewhere at the top-level in your
> >> > package:
> >> >
> >> > utils::globalVariables("degree_C")
> >> >
> >> > or you could supply degree_C as a literal character string:
> >> >
> >> > set_units(T, "degree_C")
> >> >
> >> > On Sat, Dec 10, 2022 at 11:13 PM EcoC2S - Irucka Embry
> >> > <iembry at ecoccs.com> wrote:
> >> >>
> >> >> In my iemisc package, I am using the units package.
> >> >>
> >> >> This is an example of how I am using the set_units function:
> >> >>
> >> >> T <- 20
> >> >>
> >> >> set_units(T, degree_C)
> >> >>
> >> >> Upon checking iemisc with devtools for CRAN submission, I receive the
> >> >> following note under "checking R code for possible problems":
> >> >>
> >> >> no visible binding for global variable ?degree_C?
> >> >>
> >> >> Please tell me how to avoid that note in my R packages.
> >> >>
> >> >> Thank you.
> >> >>
> >> >> Irucka
> >> >>
> >> >> --
> >> >> --
> >> >> No fear, Only Love! / ?No temas, solamente amor!
> >> >> -Irucka Ajani Embry, 15 March 2020
> >> >>
> >> >> Family Partners:
> >> >> http://www.sustainlex.org/
> >> >> https://www.schoolingsolutions.com/
> >> >>
> >> >>
> ---------------------------------------------------------------------------------------------------------------
> >> >>
> >> >> The business collaboration between EConsulting (tm)
> >> >> [https://www.econsultingllc.org/] and EcoC^2S, is Getting Back to
> >> >> Nature.
> >> >>
> >> >> Getting Back to Nature LocalHarvest --
> >> >> https://www.localharvest.org/getting-back-to-nature-M73453
> >> >> Getting Back to Nature -- https://www.gettingback2nature.farm/
> >> >>
> >> >> -- Irucka and his twin brother, Obiora, are featured in the Middle
> >> >> Tennessee Local Table Magazine Annual issue. The article discusses
> >> >> their
> >> >> family farm history and the current work that they are doing under
> >> >> Getting
> >> >> Back to Nature. The full magazine can be found here [the article
> >> >> begins
> >> >> on
> >> >> page 18 of the PDF document]:
> >> >>
> >> >>
> https://media.gettingback2nature.farm/pdf/LocalTable_ANNUAL_2020_lo_res.pdf
> >> >>
> >> >> -- Obiora and Irucka were interviewed separately in early 2020 for
> the
> >> >> Natural Resources Defense Council's (NRDC) "Regenerative Agriculture:
> >> >> Farm
> >> >> Policy for the 21st Century: Policy Recommendations to Advance
> >> >> Regenerative
> >> >> Agriculture" report written By Arohi Sharma, Lara Bryant, and Ellen
> >> >> Lee.
> >> >> The PDF report is available below:
> >> >>
> >> >>
> https://www.nrdc.org/sites/default/files/regenerative-agriculture-farm-policy-21st-century-report.pdf
> >> >>
> >> >> EcoC2S -- https://www.ecoccs.com/
> >> >> Principal, Irucka Embry, EIT
> >> >>
> >> >> Services:
> >> >> Growing Food
> >> >> Healthy Living Mentor
> >> >> Data Analysis with R
> >> >> R Training
> >> >> Chemistry and Mathematics Tutoring
> >> >> Free/Libre and Open Source Software (FLOSS) Consultation
> >> >>
> >> >> ______________________________________________
> >> >> R-package-devel at r-project.org mailing list
> >> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >> --
> >> --
> >> No fear, Only Love! / ?No temas, solamente amor!
> >> -Irucka Ajani Embry, 15 March 2020
> >>
> >> Family Partners:
> >> http://www.sustainlex.org/
> >> https://www.schoolingsolutions.com/
> >>
> >>
> ---------------------------------------------------------------------------------------------------------------
> >>
> >> The business collaboration between EConsulting (tm)
> >> [https://www.econsultingllc.org/] and EcoC^2S, is Getting Back to
> >> Nature.
> >>
> >> Getting Back to Nature LocalHarvest --
> >> https://www.localharvest.org/getting-back-to-nature-M73453
> >> Getting Back to Nature -- https://www.gettingback2nature.farm/
> >>
> >> -- Irucka and his twin brother, Obiora, are featured in the Middle
> >> Tennessee Local Table Magazine Annual issue. The article discusses
> >> their
> >> family farm history and the current work that they are doing under
> >> Getting
> >> Back to Nature. The full magazine can be found here [the article
> >> begins
> >> on
> >> page 18 of the PDF document]:
> >>
> >>
> https://media.gettingback2nature.farm/pdf/LocalTable_ANNUAL_2020_lo_res.pdf
> >>
> >> -- Obiora and Irucka were interviewed separately in early 2020 for the
> >> Natural Resources Defense Council's (NRDC) "Regenerative Agriculture:
> >> Farm
> >> Policy for the 21st Century: Policy Recommendations to Advance
> >> Regenerative
> >> Agriculture" report written By Arohi Sharma, Lara Bryant, and Ellen
> >> Lee.
> >> The PDF report is available below:
> >>
> >>
> https://www.nrdc.org/sites/default/files/regenerative-agriculture-farm-policy-21st-century-report.pdf
> >>
> >> EcoC2S -- https://www.ecoccs.com/
> >> Principal, Irucka Embry, EIT
> >>
> >> Services:
> >> Growing Food
> >> Healthy Living Mentor
> >> Data Analysis with R
> >> R Training
> >> Chemistry and Mathematics Tutoring
> >> Free/Libre and Open Source Software (FLOSS) Consultation
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >
> >
> > --
> > I?aki ?car
>
> --
> --
> No fear, Only Love! / ?No temas, solamente amor!
> -Irucka Ajani Embry, 15 March 2020
>
> Family Partners:
> http://www.sustainlex.org/
> https://www.schoolingsolutions.com/
>
>
> ---------------------------------------------------------------------------------------------------------------
>
> The business collaboration between EConsulting (tm)
> [https://www.econsultingllc.org/] and EcoC^2S, is Getting Back to
> Nature.
>
> Getting Back to Nature LocalHarvest --
> https://www.localharvest.org/getting-back-to-nature-M73453
> Getting Back to Nature -- https://www.gettingback2nature.farm/
>
> -- Irucka and his twin brother, Obiora, are featured in the Middle
> Tennessee Local Table Magazine Annual issue. The article discusses their
> family farm history and the current work that they are doing under
> Getting
> Back to Nature. The full magazine can be found here [the article begins
> on
> page 18 of the PDF document]:
>
> https://media.gettingback2nature.farm/pdf/LocalTable_ANNUAL_2020_lo_res.pdf
>
> -- Obiora and Irucka were interviewed separately in early 2020 for the
> Natural Resources Defense Council's (NRDC) "Regenerative Agriculture:
> Farm
> Policy for the 21st Century: Policy Recommendations to Advance
> Regenerative
> Agriculture" report written By Arohi Sharma, Lara Bryant, and Ellen Lee.
> The PDF report is available below:
>
>
> https://www.nrdc.org/sites/default/files/regenerative-agriculture-farm-policy-21st-century-report.pdf
>
> EcoC2S -- https://www.ecoccs.com/
> Principal, Irucka Embry, EIT
>
> Services:
> Growing Food
> Healthy Living Mentor
> Data Analysis with R
> R Training
> Chemistry and Mathematics Tutoring
> Free/Libre and Open Source Software (FLOSS) Consultation
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Alexandre Courtiol, www.datazoogang.de

	[[alternative HTML version deleted]]


From @@njeev@@r|y@ @end|ng |rom gm@||@com  Mon Dec 12 18:05:00 2022
From: @@njeev@@r|y@ @end|ng |rom gm@||@com (Sanjeev Sariya)
Date: Mon, 12 Dec 2022 22:35:00 +0530
Subject: [R-pkg-devel] NOTEs - Problems with news in 'NEWS.md'
Message-ID: <CAMvsYamyjQQvSK_yYUfHhfDfB-LJFNBuPiHUrVSdxjQR-deZTg@mail.gmail.com>

Hi there,

I made changes to the CRAN package by adding a file to the inst/ext folder.
I mention about this in the NEWS.md file however, when I upload the build
package .gz file to cran it fails to pass with error message as:


*  Problems with news in 'NEWS.md':  No news entries found.*

There are two notes. I cannot seem to find the second note.

Kindly help.
--
Sanjeev M

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Dec 12 20:57:17 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 12 Dec 2022 14:57:17 -0500
Subject: [R-pkg-devel] NOTEs - Problems with news in 'NEWS.md'
In-Reply-To: <CAMvsYamyjQQvSK_yYUfHhfDfB-LJFNBuPiHUrVSdxjQR-deZTg@mail.gmail.com>
References: <CAMvsYamyjQQvSK_yYUfHhfDfB-LJFNBuPiHUrVSdxjQR-deZTg@mail.gmail.com>
Message-ID: <bd890228-fb72-5347-c722-80e0760a34c7@gmail.com>

On 12/12/2022 12:05 p.m., Sanjeev Sariya wrote:
> Hi there,
> 
> I made changes to the CRAN package by adding a file to the inst/ext folder.
> I mention about this in the NEWS.md file however, when I upload the build
> package .gz file to cran it fails to pass with error message as:
> 
> 
> *  Problems with news in 'NEWS.md':  No news entries found.*
> 
> There are two notes. I cannot seem to find the second note.
> 
> Kindly help.

If you want help, you need to provide enough information for helpers. 
At a minimum, the NEWS.md file should be included (or if it is really 
large, a subset of it that triggers the same problem).  Even better, a 
link to Github or elsewhere where people can browse your entire package.

Duncan Murdoch


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Dec 13 01:22:55 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 13 Dec 2022 01:22:55 +0100
Subject: [R-pkg-devel] NOTEs - Problems with news in 'NEWS.md'
In-Reply-To: <CAMvsYamyjQQvSK_yYUfHhfDfB-LJFNBuPiHUrVSdxjQR-deZTg@mail.gmail.com>
References: <CAMvsYamyjQQvSK_yYUfHhfDfB-LJFNBuPiHUrVSdxjQR-deZTg@mail.gmail.com>
Message-ID: <e88cd021-c7d2-071a-dcc8-cba0a6f95cca@statistik.tu-dortmund.de>



On 12.12.2022 18:05, Sanjeev Sariya wrote:
> Hi there,
> 
> I made changes to the CRAN package by adding a file to the inst/ext folder.
> I mention about this in the NEWS.md file however, when I upload the build
> package .gz file to cran it fails to pass with error message as:
> 
> 
> *  Problems with news in 'NEWS.md':  No news entries found.*
> 
> There are two notes. I cannot seem to find the second note.

For other to help, you really have to say where the package is and where 
the check log is. As a CRAN team member, I know:

1. Note is about the maintainer address change. Once the package passes 
the checks, an auto generated message will go to the old maintainer 
address. But for that to happen, the second note has to be fixed:

2.   Problems with news in 'NEWS.md':
   No news entries found.

See ?news which explains how NEWS.md files should be written.

Best,
Uwe Ligges



> 
> Kindly help.
> --
> Sanjeev M
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @@njeev@@r|y@ @end|ng |rom gm@||@com  Tue Dec 13 02:21:46 2022
From: @@njeev@@r|y@ @end|ng |rom gm@||@com (Sanjeev Sariya)
Date: Tue, 13 Dec 2022 06:51:46 +0530
Subject: [R-pkg-devel] NOTEs - Problems with news in 'NEWS.md'
In-Reply-To: <e88cd021-c7d2-071a-dcc8-cba0a6f95cca@statistik.tu-dortmund.de>
References: <CAMvsYamyjQQvSK_yYUfHhfDfB-LJFNBuPiHUrVSdxjQR-deZTg@mail.gmail.com>
 <e88cd021-c7d2-071a-dcc8-cba0a6f95cca@statistik.tu-dortmund.de>
Message-ID: <CAMvsYakmoU94xcmFRqJnO1CmF6PWouC=4EX4=XU0VXRLi5kaPg@mail.gmail.com>

Dear Devel and Uwe,

Sorry about not providing more details.
Please see log file links below:

https://win-builder.r-project.org/incoming_pretest/GARCOM_1.2.1_20221212_174734/Windows/00check.log

https://win-builder.r-project.org/incoming_pretest/GARCOM_1.2.1_20221212_174734/Debian/00check.log

I do not have access to the old email address.

Attached is also the news.md file. I cannot understand what is needed in
?news. It was fine until ~2020 Dec.

github link of package:
https://github.com/sariya/GARCOM/tree/new_test_hello
Best,
--
Sanjeev M




On Tue, Dec 13, 2022 at 5:52 AM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

>
>
> On 12.12.2022 18:05, Sanjeev Sariya wrote:
> > Hi there,
> >
> > I made changes to the CRAN package by adding a file to the inst/ext
> folder.
> > I mention about this in the NEWS.md file however, when I upload the build
> > package .gz file to cran it fails to pass with error message as:
> >
> >
> > *  Problems with news in 'NEWS.md':  No news entries found.*
> >
> > There are two notes. I cannot seem to find the second note.
>
> For other to help, you really have to say where the package is and where
> the check log is. As a CRAN team member, I know:
>
> 1. Note is about the maintainer address change. Once the package passes
> the checks, an auto generated message will go to the old maintainer
> address. But for that to happen, the second note has to be fixed:
>
> 2.   Problems with news in 'NEWS.md':
>    No news entries found.
>
> See ?news which explains how NEWS.md files should be written.
>
> Best,
> Uwe Ligges
>
>
>
> >
> > Kindly help.
> > --
> > Sanjeev M
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Tue Dec 13 02:45:50 2022
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Tue, 13 Dec 2022 01:45:50 +0000
Subject: [R-pkg-devel] NOTEs - Problems with news in 'NEWS.md'
In-Reply-To: <CAMvsYakmoU94xcmFRqJnO1CmF6PWouC=4EX4=XU0VXRLi5kaPg@mail.gmail.com>
References: <CAMvsYamyjQQvSK_yYUfHhfDfB-LJFNBuPiHUrVSdxjQR-deZTg@mail.gmail.com>
 <e88cd021-c7d2-071a-dcc8-cba0a6f95cca@statistik.tu-dortmund.de>
 <CAMvsYakmoU94xcmFRqJnO1CmF6PWouC=4EX4=XU0VXRLi5kaPg@mail.gmail.com>
Message-ID: <YQXPR01MB457913D691BC0AB0D7A21BF19AE39@YQXPR01MB4579.CANPRD01.PROD.OUTLOOK.COM>

Hi Sanjeev,

Requirements change over time, and it's the responsibility of the maintainer to make sure the package keeps up with the new requirements. Things that "worked" back in 2010 may no longer fit these new requirements, and such is the case for the NEWS.md file.

It's useful to look at examples from other packages to understand how your NEWS.md file should be formatted. Here's ggplot2's, but you can find many other examples on Github: https://raw.githubusercontent.com/tidyverse/ggplot2/main/NEWS.md

I'll point out two things they do that is relevant (according to ?news):

  *   Every new version of the package has a separate level-1 header (i.e. a line that starts with #). New changes appearing in that version are then listed below.
  *   Changes are sometimes grouped in categories, where each category has a separate level-2 header (i.e. a line that starts with ##).

In your case, you don't seem to use headers at all. If I were you, that's where I would start.

Good luck!


Max Turgeon<https://www.name-coach.com/maxime-turgeon>

Adjunct Professor

Department of Statistics
University of Manitoba

maxturgeon.ca<http://maxturgeon.ca/>

________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Sanjeev Sariya <sanjeevsariya at gmail.com>
Sent: Monday, December 12, 2022 7:21 PM
To: Uwe Ligges <ligges at statistik.tu-dortmund.de>; r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] NOTEs - Problems with news in 'NEWS.md'

********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

Dear Devel and Uwe,

Sorry about not providing more details.
Please see log file links below:

https://win-builder.r-project.org/incoming_pretest/GARCOM_1.2.1_20221212_174734/Windows/00check.log

https://win-builder.r-project.org/incoming_pretest/GARCOM_1.2.1_20221212_174734/Debian/00check.log

I do not have access to the old email address.

Attached is also the news.md file. I cannot understand what is needed in
?news. It was fine until ~2020 Dec.

github link of package:
https://github.com/sariya/GARCOM/tree/new_test_hello
Best,
--
Sanjeev M




On Tue, Dec 13, 2022 at 5:52 AM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

>
>
> On 12.12.2022 18:05, Sanjeev Sariya wrote:
> > Hi there,
> >
> > I made changes to the CRAN package by adding a file to the inst/ext
> folder.
> > I mention about this in the NEWS.md file however, when I upload the build
> > package .gz file to cran it fails to pass with error message as:
> >
> >
> > *  Problems with news in 'NEWS.md':  No news entries found.*
> >
> > There are two notes. I cannot seem to find the second note.
>
> For other to help, you really have to say where the package is and where
> the check log is. As a CRAN team member, I know:
>
> 1. Note is about the maintainer address change. Once the package passes
> the checks, an auto generated message will go to the old maintainer
> address. But for that to happen, the second note has to be fixed:
>
> 2.   Problems with news in 'NEWS.md':
>    No news entries found.
>
> See ?news which explains how NEWS.md files should be written.
>
> Best,
> Uwe Ligges
>
>
>
> >
> > Kindly help.
> > --
> > Sanjeev M
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From henr|k@bengt@@on @end|ng |rom gm@||@com  Tue Dec 13 03:58:18 2022
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Mon, 12 Dec 2022 18:58:18 -0800
Subject: [R-pkg-devel] NOTEs - Problems with news in 'NEWS.md'
In-Reply-To: <YQXPR01MB457913D691BC0AB0D7A21BF19AE39@YQXPR01MB4579.CANPRD01.PROD.OUTLOOK.COM>
References: <CAMvsYamyjQQvSK_yYUfHhfDfB-LJFNBuPiHUrVSdxjQR-deZTg@mail.gmail.com>
 <e88cd021-c7d2-071a-dcc8-cba0a6f95cca@statistik.tu-dortmund.de>
 <CAMvsYakmoU94xcmFRqJnO1CmF6PWouC=4EX4=XU0VXRLi5kaPg@mail.gmail.com>
 <YQXPR01MB457913D691BC0AB0D7A21BF19AE39@YQXPR01MB4579.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <CAFDcVCRw+PQxm_vinWuokBty1p9TTJDRAsWXnVdxd9bq5S3Rbw@mail.gmail.com>

I've got a check_news() function to test that a NEWS.md can be parsed
as expected.  See attached file (if that gets dropped in the
interwebs, it's also at
https://gist.github.com/HenrikBengtsson/2361371be4ae8681b3ee2eb361730990).
Call it in the folder where the NEWS.md file is.

My $.02

/Henrik

On Mon, Dec 12, 2022 at 5:46 PM Max Turgeon <Max.Turgeon at umanitoba.ca> wrote:
>
> Hi Sanjeev,
>
> Requirements change over time, and it's the responsibility of the maintainer to make sure the package keeps up with the new requirements. Things that "worked" back in 2010 may no longer fit these new requirements, and such is the case for the NEWS.md file.
>
> It's useful to look at examples from other packages to understand how your NEWS.md file should be formatted. Here's ggplot2's, but you can find many other examples on Github: https://raw.githubusercontent.com/tidyverse/ggplot2/main/NEWS.md
>
> I'll point out two things they do that is relevant (according to ?news):
>
>   *   Every new version of the package has a separate level-1 header (i.e. a line that starts with #). New changes appearing in that version are then listed below.
>   *   Changes are sometimes grouped in categories, where each category has a separate level-2 header (i.e. a line that starts with ##).
>
> In your case, you don't seem to use headers at all. If I were you, that's where I would start.
>
> Good luck!
>
>
> Max Turgeon<https://www.name-coach.com/maxime-turgeon>
>
> Adjunct Professor
>
> Department of Statistics
> University of Manitoba
>
> maxturgeon.ca<http://maxturgeon.ca/>
>
> ________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Sanjeev Sariya <sanjeevsariya at gmail.com>
> Sent: Monday, December 12, 2022 7:21 PM
> To: Uwe Ligges <ligges at statistik.tu-dortmund.de>; r-package-devel at r-project.org <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] NOTEs - Problems with news in 'NEWS.md'
>
> ********************************************************
> Caution: This message was sent from outside the University of Manitoba.
> ********************************************************
>
> Dear Devel and Uwe,
>
> Sorry about not providing more details.
> Please see log file links below:
>
> https://win-builder.r-project.org/incoming_pretest/GARCOM_1.2.1_20221212_174734/Windows/00check.log
>
> https://win-builder.r-project.org/incoming_pretest/GARCOM_1.2.1_20221212_174734/Debian/00check.log
>
> I do not have access to the old email address.
>
> Attached is also the news.md file. I cannot understand what is needed in
> ?news. It was fine until ~2020 Dec.
>
> github link of package:
> https://github.com/sariya/GARCOM/tree/new_test_hello
> Best,
> --
> Sanjeev M
>
>
>
>
> On Tue, Dec 13, 2022 at 5:52 AM Uwe Ligges <ligges at statistik.tu-dortmund.de>
> wrote:
>
> >
> >
> > On 12.12.2022 18:05, Sanjeev Sariya wrote:
> > > Hi there,
> > >
> > > I made changes to the CRAN package by adding a file to the inst/ext
> > folder.
> > > I mention about this in the NEWS.md file however, when I upload the build
> > > package .gz file to cran it fails to pass with error message as:
> > >
> > >
> > > *  Problems with news in 'NEWS.md':  No news entries found.*
> > >
> > > There are two notes. I cannot seem to find the second note.
> >
> > For other to help, you really have to say where the package is and where
> > the check log is. As a CRAN team member, I know:
> >
> > 1. Note is about the maintainer address change. Once the package passes
> > the checks, an auto generated message will go to the old maintainer
> > address. But for that to happen, the second note has to be fixed:
> >
> > 2.   Problems with news in 'NEWS.md':
> >    No news entries found.
> >
> > See ?news which explains how NEWS.md files should be written.
> >
> > Best,
> > Uwe Ligges
> >
> >
> >
> > >
> > > Kindly help.
> > > --
> > > Sanjeev M
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

From |embry @end|ng |rom ecocc@@com  Tue Dec 13 23:13:50 2022
From: |embry @end|ng |rom ecocc@@com (EcoC2S - Irucka Embry)
Date: Tue, 13 Dec 2022 16:13:50 -0600
Subject: [R-pkg-devel] 
 =?utf-8?q?no_visible_binding_for_global_variable_?=
 =?utf-8?b?4oCYZGVncmVlX0PigJkgLSBDUkFOIGNoZWNrIG5vdGU=?=
In-Reply-To: <CAERMt4dC0V56jkDhmFnzn3GwfM-JDMnHQ=schoeMXUR0M-peTA@mail.gmail.com>
References: <dc713e6d764976c5f370cfb05ba38e92@ecoccs.com>
 <1fba4982cf0839bd7443542b325dc6eb@ecoccs.com>
 <CAPcHnpRXYqqDnAnNTxr=whERub6QUbjou03EYAGDvi-6UiS35w@mail.gmail.com>
 <e13d5667a1871459c30c934d2b3f28cb@ecoccs.com>
 <CALEXWq1f6eDeZZc1qSGNFC5gDDOU_eE12ehcZ1cAL+jYeAF1AA@mail.gmail.com>
 <3896709d851b23233048ebbceefdd922@ecoccs.com>
 <CAERMt4dC0V56jkDhmFnzn3GwfM-JDMnHQ=schoeMXUR0M-peTA@mail.gmail.com>
Message-ID: <200716327884dcbb5e2e231e2d57b663@ecoccs.com>

Alexandre, thank you for your inquiry and for your help; however, I 
don't have the issue anymore as I declared degree_C as a global variable 
in the functions where the note occurred.

Thank you.

Irucka



On 12-12-2022 10:26, Alexandre Courtiol wrote:
> Irucka,
> If you saw still have the note "no visible binding for global variable
> ?degree_C?", it implies that somewhere in your package degree_C is
> still unquotted...
> 
> Do you have your code online for us to help you more effectively?
> ++
> 
> On Mon, 12 Dec 2022 at 17:20, EcoC2S - Irucka Embry
> <iembry at ecoccs.com> wrote:
> 
>> Hi I?aki and Andrew, I'm sorry, I'll clarify my statement here.
>> 
>> set_units(T, "degree_C") still produced the R CMD check note, but it
>> 
>> works with regards to setting the unit for the R expression.
>> 
>> I replaced every instance of set_units(T, degree_C) with
>> set_units(T,
>> "degree_C") in a single function (I use the units package throughout
>> 
>> many functions in my iemisc package) & than I ran R CMD check again.
>> I
>> looked for that particular function in the "checking R code for
>> possible
>> problems ..." section and I still saw the function name with this
>> note:
>> no visible binding for global variable ?degree_C?.
>> 
>> Using the global variables option does prevent the note from
>> occurring
>> in all of my other functions where I set units.
>> 
>> I hope that this clarification helps.
>> 
>> On a side note, I used the units package in other functions;
>> however, I
>> have not ever seen a note for the same usage in other functions. I
>> don't
>> know why the same usage of the units package in some functions draws
>> a
>> note while in other functions there is no note.
>> 
>> Thank you.
>> 
>> Irucka
>> 
>> On 12-12-2022 09:58, I?aki Ucar wrote:
>>> On Mon, 12 Dec 2022 at 16:43, EcoC2S - Irucka Embry
>> <iembry at ecoccs.com>
>>> wrote:
>>>> 
>>>> Hi Andrew, set_units(T, "degree_C") does not work;
>>> 
>>> Sorry, do you mean that the code fails? Or the code works but you
>>> still see the NOTE? In this case, it is possible that you didn't
>>> replace all the instances of set_units(T, degree_C) in your files.
>>> 
>>> I?aki
>>> 
>>>> however, setting
>>>> degree_C as a global variable does work.
>>>> 
>>>> Thank you for your suggestion.
>>>> 
>>>> Irucka
>>>> 
>>>> 
>> 
>> On 12-12-2022 09:56, Alexandre Courtiol wrote:
>>> Hi Irucka,
>>> using text to define the unit is valid, so I don't see why it
>> would
>>> not work.
>>> It would be better than defining a global variable.
>>> 
>>> ``` rT <- 2
>>> units::set_units(T, "degree_C")
>>> #> 2 [?C]
>>> ```
>>> <sup>Created on 2022-12-12 with [reprex
>>> v2.0.2](https://reprex.tidyverse.org)</sup>
>>> 
>>> ++
>>> 
>> 
>>>> On 11-12-2022 00:29, Andrew Simmons wrote:
>>>>> You can declare degree_C as a variable before using
>> set_units():
>>>>> 
>>>>> degree_C <- NULL
>>>>> set_units(T, degree_C)
>>>>> 
>>>>> you could use globalVariables() somewhere at the top-level in
>> your
>>>>> package:
>>>>> 
>>>>> utils::globalVariables("degree_C")
>>>>> 
>>>>> or you could supply degree_C as a literal character string:
>>>>> 
>>>>> set_units(T, "degree_C")
>>>>> 
>>>>> On Sat, Dec 10, 2022 at 11:13 PM EcoC2S - Irucka Embry
>>>>> <iembry at ecoccs.com> wrote:
>>>>>> 
>>>>>> In my iemisc package, I am using the units package.
>>>>>> 
>>>>>> This is an example of how I am using the set_units function:
>>>>>> 
>>>>>> T <- 20
>>>>>> 
>>>>>> set_units(T, degree_C)
>>>>>> 
>>>>>> Upon checking iemisc with devtools for CRAN submission, I
>> receive the
>>>>>> following note under "checking R code for possible problems":
>>>>>> 
>>>>>> no visible binding for global variable ?degree_C?
>>>>>> 
>>>>>> Please tell me how to avoid that note in my R packages.
>>>>>> 
>>>>>> Thank you.
>>>>>> 
>>>>>> Irucka
>>>>>> 
>>>>>> --
>>>>>> --
>>>>>> No fear, Only Love! / ?No temas, solamente amor!
>>>>>> -Irucka Ajani Embry, 15 March 2020
>>>>>> 
>>>>>> Family Partners:
>>>>>> http://www.sustainlex.org/
>>>>>> https://www.schoolingsolutions.com/
>>>>>> 
>>>>>> 
>> 
> ---------------------------------------------------------------------------------------------------------------
>>>>>> 
>>>>>> The business collaboration between EConsulting (tm)
>>>>>> [https://www.econsultingllc.org/] and EcoC^2S, is Getting Back
>> to
>>>>>> Nature.
>>>>>> 
>>>>>> Getting Back to Nature LocalHarvest --
>>>>>> https://www.localharvest.org/getting-back-to-nature-M73453
>>>>>> Getting Back to Nature -- https://www.gettingback2nature.farm/
>>>>>> 
>>>>>> -- Irucka and his twin brother, Obiora, are featured in the
>> Middle
>>>>>> Tennessee Local Table Magazine Annual issue. The article
>> discusses
>>>>>> their
>>>>>> family farm history and the current work that they are doing
>> under
>>>>>> Getting
>>>>>> Back to Nature. The full magazine can be found here [the
>> article
>>>>>> begins
>>>>>> on
>>>>>> page 18 of the PDF document]:
>>>>>> 
>>>>>> 
>> 
> https://media.gettingback2nature.farm/pdf/LocalTable_ANNUAL_2020_lo_res.pdf
>>>>>> 
>>>>>> -- Obiora and Irucka were interviewed separately in early 2020
>> for the
>>>>>> Natural Resources Defense Council's (NRDC) "Regenerative
>> Agriculture:
>>>>>> Farm
>>>>>> Policy for the 21st Century: Policy Recommendations to Advance
>>>>>> Regenerative
>>>>>> Agriculture" report written By Arohi Sharma, Lara Bryant, and
>> Ellen
>>>>>> Lee.
>>>>>> The PDF report is available below:
>>>>>> 
>>>>>> 
>> 
> https://www.nrdc.org/sites/default/files/regenerative-agriculture-farm-policy-21st-century-report.pdf
>>>>>> 
>>>>>> EcoC2S -- https://www.ecoccs.com/
>>>>>> Principal, Irucka Embry, EIT
>>>>>> 
>>>>>> Services:
>>>>>> Growing Food
>>>>>> Healthy Living Mentor
>>>>>> Data Analysis with R
>>>>>> R Training
>>>>>> Chemistry and Mathematics Tutoring
>>>>>> Free/Libre and Open Source Software (FLOSS) Consultation
>>>>>> 
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>> 
>>>> --
>>>> --
>>>> No fear, Only Love! / ?No temas, solamente amor!
>>>> -Irucka Ajani Embry, 15 March 2020
>>>> 
>>>> Family Partners:
>>>> http://www.sustainlex.org/
>>>> https://www.schoolingsolutions.com/
>>>> 
>>>> 
>> 
> ---------------------------------------------------------------------------------------------------------------
>>>> 
>>>> The business collaboration between EConsulting (tm)
>>>> [https://www.econsultingllc.org/] and EcoC^2S, is Getting Back to
>>>> Nature.
>>>> 
>>>> Getting Back to Nature LocalHarvest --
>>>> https://www.localharvest.org/getting-back-to-nature-M73453
>>>> Getting Back to Nature -- https://www.gettingback2nature.farm/
>>>> 
>>>> -- Irucka and his twin brother, Obiora, are featured in the
>> Middle
>>>> Tennessee Local Table Magazine Annual issue. The article
>> discusses
>>>> their
>>>> family farm history and the current work that they are doing
>> under
>>>> Getting
>>>> Back to Nature. The full magazine can be found here [the article
>>>> begins
>>>> on
>>>> page 18 of the PDF document]:
>>>> 
>>>> 
>> 
> https://media.gettingback2nature.farm/pdf/LocalTable_ANNUAL_2020_lo_res.pdf
>>>> 
>>>> -- Obiora and Irucka were interviewed separately in early 2020
>> for the
>>>> Natural Resources Defense Council's (NRDC) "Regenerative
>> Agriculture:
>>>> Farm
>>>> Policy for the 21st Century: Policy Recommendations to Advance
>>>> Regenerative
>>>> Agriculture" report written By Arohi Sharma, Lara Bryant, and
>> Ellen
>>>> Lee.
>>>> The PDF report is available below:
>>>> 
>>>> 
>> 
> https://www.nrdc.org/sites/default/files/regenerative-agriculture-farm-policy-21st-century-report.pdf
>>>> 
>>>> EcoC2S -- https://www.ecoccs.com/
>>>> Principal, Irucka Embry, EIT
>>>> 
>>>> Services:
>>>> Growing Food
>>>> Healthy Living Mentor
>>>> Data Analysis with R
>>>> R Training
>>>> Chemistry and Mathematics Tutoring
>>>> Free/Libre and Open Source Software (FLOSS) Consultation
>>>> 
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> 
>>> 
>>> 
>>> --
>>> I?aki ?car
>> 
>> --
>> --
>> No fear, Only Love! / ?No temas, solamente amor!
>> -Irucka Ajani Embry, 15 March 2020
>> 
>> Family Partners:
>> http://www.sustainlex.org/
>> https://www.schoolingsolutions.com/
>> 
>> 
> ---------------------------------------------------------------------------------------------------------------
>> 
>> The business collaboration between EConsulting (tm)
>> [https://www.econsultingllc.org/] and EcoC^2S, is Getting Back to
>> Nature.
>> 
>> Getting Back to Nature LocalHarvest --
>> https://www.localharvest.org/getting-back-to-nature-M73453
>> Getting Back to Nature -- https://www.gettingback2nature.farm/
>> 
>> -- Irucka and his twin brother, Obiora, are featured in the Middle
>> Tennessee Local Table Magazine Annual issue. The article discusses
>> their
>> family farm history and the current work that they are doing under
>> Getting
>> Back to Nature. The full magazine can be found here [the article
>> begins
>> on
>> page 18 of the PDF document]:
>> 
>> 
> https://media.gettingback2nature.farm/pdf/LocalTable_ANNUAL_2020_lo_res.pdf
>> 
>> -- Obiora and Irucka were interviewed separately in early 2020 for
>> the
>> Natural Resources Defense Council's (NRDC) "Regenerative
>> Agriculture:
>> Farm
>> Policy for the 21st Century: Policy Recommendations to Advance
>> Regenerative
>> Agriculture" report written By Arohi Sharma, Lara Bryant, and Ellen
>> Lee.
>> The PDF report is available below:
>> 
>> 
> https://www.nrdc.org/sites/default/files/regenerative-agriculture-farm-policy-21st-century-report.pdf
>> 
>> EcoC2S -- https://www.ecoccs.com/
>> Principal, Irucka Embry, EIT
>> 
>> Services:
>> Growing Food
>> Healthy Living Mentor
>> Data Analysis with R
>> R Training
>> Chemistry and Mathematics Tutoring
>> Free/Libre and Open Source Software (FLOSS) Consultation
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> --
> 
> Alexandre Courtiol, www.datazoogang.de [1]
> 
> Links:
> ------
> [1] http://www.datazoogang.de

-- 
--
No fear, Only Love! / ?No temas, solamente amor!
-Irucka Ajani Embry, 15 March 2020

Family Partners:
http://www.sustainlex.org/
https://www.schoolingsolutions.com/

---------------------------------------------------------------------------------------------------------------

The business collaboration between EConsulting (tm)
[https://www.econsultingllc.org/] and EcoC^2S, is Getting Back to 
Nature.

Getting Back to Nature LocalHarvest --
https://www.localharvest.org/getting-back-to-nature-M73453
Getting Back to Nature -- https://www.gettingback2nature.farm/

-- Irucka and his twin brother, Obiora, are featured in the Middle
Tennessee Local Table Magazine Annual issue. The article discusses their
family farm history and the current work that they are doing under 
Getting
Back to Nature. The full magazine can be found here [the article begins 
on
page 18 of the PDF document]:

https://media.gettingback2nature.farm/pdf/LocalTable_ANNUAL_2020_lo_res.pdf

-- Obiora and Irucka were interviewed separately in early 2020 for the
Natural Resources Defense Council's (NRDC) "Regenerative Agriculture: 
Farm
Policy for the 21st Century: Policy Recommendations to Advance 
Regenerative
Agriculture" report written By Arohi Sharma, Lara Bryant, and Ellen Lee.
The PDF report is available below:

https://www.nrdc.org/sites/default/files/regenerative-agriculture-farm-policy-21st-century-report.pdf

EcoC2S -- https://www.ecoccs.com/
Principal, Irucka Embry, EIT

Services:
Growing Food
Healthy Living Mentor
Data Analysis with R
R Training
Chemistry and Mathematics Tutoring
Free/Libre and Open Source Software (FLOSS) Consultation


From d@v|d@kepp||nger @end|ng |rom gm@||@com  Thu Dec 15 00:19:31 2022
From: d@v|d@kepp||nger @end|ng |rom gm@||@com (David Kepplinger)
Date: Wed, 14 Dec 2022 18:19:31 -0500
Subject: [R-pkg-devel] NOTE about use of `:::`
Message-ID: <CAGmyFCE9_jfJ28evgU9Zqp2+C70N7faCG-uVmcJWC+42s54hCw@mail.gmail.com>

Dear List,

I am working on updating the pense package and refactored some of the
methods. I have several functions which take the same arguments, hence I'm
sending all these arguments to an internal function, called `parse_args()`.
Since I want to evaluate the arguments in the caller's environment, I'm
using the following code

  call <- match.call(expand.dots = TRUE)
  call[[1]] <- quote(pense:::parse_args)
  args <- eval.parent(call)

Of course, R CMD CHECK complains about the use of `:::`, as it's almost
never needed. I think the above usage would fall into that area of
"almost", but I'm not sure if (a) there's a better approach and (b) the
CRAN team would agree with me. I would have to test (b) by submitting and
working with the CRAN team, but I wanted to ask the list first to see if
I'm missing something obvious. I don't want to export the function
parse_args() as it's not useful for a user, and the use is truly internal.

Thanks and all the best,
David

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Thu Dec 15 01:11:43 2022
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Thu, 15 Dec 2022 13:11:43 +1300
Subject: [R-pkg-devel] NOTE about use of `:::`
In-Reply-To: <CAGmyFCE9_jfJ28evgU9Zqp2+C70N7faCG-uVmcJWC+42s54hCw@mail.gmail.com>
References: <CAGmyFCE9_jfJ28evgU9Zqp2+C70N7faCG-uVmcJWC+42s54hCw@mail.gmail.com>
Message-ID: <5485973B-4615-44D9-9B26-8716EE3B685F@R-project.org>

David,

why not

call[[1]] <- parse_args

The assignment is evaluated in your namespace so that makes sure the call is that of your function. The only downside I see is that in a stack trace you'll see the definition instead of the name.
Or possibly

do.call(parse_args, as.list(call[-1]))

Cheers,
Simon

PS: Note that ::: is expensive - it probably doesn't matter here, but would in repeatedly called functions.


> On 15/12/2022, at 12:19 PM, David Kepplinger <david.kepplinger at gmail.com> wrote:
> 
> Dear List,
> 
> I am working on updating the pense package and refactored some of the
> methods. I have several functions which take the same arguments, hence I'm
> sending all these arguments to an internal function, called `parse_args()`.
> Since I want to evaluate the arguments in the caller's environment, I'm
> using the following code
> 
>  call <- match.call(expand.dots = TRUE)
>  call[[1]] <- quote(pense:::parse_args)
>  args <- eval.parent(call)
> 
> Of course, R CMD CHECK complains about the use of `:::`, as it's almost
> never needed. I think the above usage would fall into that area of
> "almost", but I'm not sure if (a) there's a better approach and (b) the
> CRAN team would agree with me. I would have to test (b) by submitting and
> working with the CRAN team, but I wanted to ask the list first to see if
> I'm missing something obvious. I don't want to export the function
> parse_args() as it's not useful for a user, and the use is truly internal.
> 
> Thanks and all the best,
> David
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From d@v|d@kepp||nger @end|ng |rom gm@||@com  Thu Dec 15 02:35:57 2022
From: d@v|d@kepp||nger @end|ng |rom gm@||@com (David Kepplinger)
Date: Wed, 14 Dec 2022 20:35:57 -0500
Subject: [R-pkg-devel] NOTE about use of `:::`
In-Reply-To: <5485973B-4615-44D9-9B26-8716EE3B685F@R-project.org>
References: <CAGmyFCE9_jfJ28evgU9Zqp2+C70N7faCG-uVmcJWC+42s54hCw@mail.gmail.com>
 <5485973B-4615-44D9-9B26-8716EE3B685F@R-project.org>
Message-ID: <CAGmyFCFndJ6WtM5uYK30sC+XN7=0NL0Pjs8rXoZaSxS41eUFCA@mail.gmail.com>

Thank you both for the suggestions. I would prefer a clean stack trace in
case of errors as input errors are caught by this function and hence users
might very well see errors emitted from it. It seems more informative to me
if the error message would say "Error in .parse_args?" than "Error in
new.env(?". But since this solution was suggested by both of you it is
likely that CRAN too would demand this or a similar approach instead of
using `:::`. I know `:::` is expansive, but the computations that follow
are typically at least a few minutes so anything that takes less than a few
seconds won't be noticeable.

I also thought about using `...` before, but then the signature of the
user-facing functions would be incomplete and IDEs won't be able to provide
suggestions.

Thanks for the help!

-- David

On Wed, Dec 14, 2022 at 7:11 PM Simon Urbanek <simon.urbanek at r-project.org>
wrote:

> David,
>
> why not
>
> call[[1]] <- parse_args
>
> The assignment is evaluated in your namespace so that makes sure the call
> is that of your function. The only downside I see is that in a stack trace
> you'll see the definition instead of the name.
> Or possibly
>
> do.call(parse_args, as.list(call[-1]))
>
> Cheers,
> Simon
>
> PS: Note that ::: is expensive - it probably doesn't matter here, but
> would in repeatedly called functions.
>
>
> > On 15/12/2022, at 12:19 PM, David Kepplinger <david.kepplinger at gmail.com>
> wrote:
> >
> > Dear List,
> >
> > I am working on updating the pense package and refactored some of the
> > methods. I have several functions which take the same arguments, hence
> I'm
> > sending all these arguments to an internal function, called
> `parse_args()`.
> > Since I want to evaluate the arguments in the caller's environment, I'm
> > using the following code
> >
> >  call <- match.call(expand.dots = TRUE)
> >  call[[1]] <- quote(pense:::parse_args)
> >  args <- eval.parent(call)
> >
> > Of course, R CMD CHECK complains about the use of `:::`, as it's almost
> > never needed. I think the above usage would fall into that area of
> > "almost", but I'm not sure if (a) there's a better approach and (b) the
> > CRAN team would agree with me. I would have to test (b) by submitting and
> > working with the CRAN team, but I wanted to ask the list first to see if
> > I'm missing something obvious. I don't want to export the function
> > parse_args() as it's not useful for a user, and the use is truly
> internal.
> >
> > Thanks and all the best,
> > David
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>

	[[alternative HTML version deleted]]


From w||||@mwdun|@p @end|ng |rom gm@||@com  Thu Dec 15 02:39:53 2022
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Wed, 14 Dec 2022 17:39:53 -0800
Subject: [R-pkg-devel] NOTE about use of `:::`
In-Reply-To: <CAGmyFCE9_jfJ28evgU9Zqp2+C70N7faCG-uVmcJWC+42s54hCw@mail.gmail.com>
References: <CAGmyFCE9_jfJ28evgU9Zqp2+C70N7faCG-uVmcJWC+42s54hCw@mail.gmail.com>
Message-ID: <CAHqSRuTjBmO+gfu3xxmZMF5c+nZJinO2zq0ZyUS3A7kDOLOXTQ@mail.gmail.com>

You could add an 'envir' argument to parse_args() and do your eval(...,
envir=envir) stuff inside parse_args().  Then change
  call[[1]] <- quote(pense:::parse_args)
  args <- eval.parent(call)
to
   call[[1]] <- quote(parse_args)
   call$envir <- parent.frame()
   args <- eval(call)
[That code is completely untested.]

-Bill

On Wed, Dec 14, 2022 at 3:19 PM David Kepplinger <david.kepplinger at gmail.com>
wrote:

> Dear List,
>
> I am working on updating the pense package and refactored some of the
> methods. I have several functions which take the same arguments, hence I'm
> sending all these arguments to an internal function, called `parse_args()`.
> Since I want to evaluate the arguments in the caller's environment, I'm
> using the following code
>
>   call <- match.call(expand.dots = TRUE)
>   call[[1]] <- quote(pense:::parse_args)
>   args <- eval.parent(call)
>
> Of course, R CMD CHECK complains about the use of `:::`, as it's almost
> never needed. I think the above usage would fall into that area of
> "almost", but I'm not sure if (a) there's a better approach and (b) the
> CRAN team would agree with me. I would have to test (b) by submitting and
> working with the CRAN team, but I wanted to ask the list first to see if
> I'm missing something obvious. I don't want to export the function
> parse_args() as it's not useful for a user, and the use is truly internal.
>
> Thanks and all the best,
> David
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Thu Dec 15 03:06:31 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Wed, 14 Dec 2022 21:06:31 -0500
Subject: [R-pkg-devel] NOTE about use of `:::`
In-Reply-To: <CAGmyFCFndJ6WtM5uYK30sC+XN7=0NL0Pjs8rXoZaSxS41eUFCA@mail.gmail.com>
References: <CAGmyFCE9_jfJ28evgU9Zqp2+C70N7faCG-uVmcJWC+42s54hCw@mail.gmail.com>
 <5485973B-4615-44D9-9B26-8716EE3B685F@R-project.org>
 <CAGmyFCFndJ6WtM5uYK30sC+XN7=0NL0Pjs8rXoZaSxS41eUFCA@mail.gmail.com>
Message-ID: <CAPcHnpRDH4S9n8SVum_-xhnbj446DDtvEcP2_DQcRFuPKjRx4w@mail.gmail.com>

Here's another suggestion, not sure if it's any good, but you could
structure your functions like

parse_args <- function (envir = parent.frame())
{
    evalq(list(a = a, b = b, ..., y = y, z = z), envir)
    <...>
}

exported_fun <- function (a, b, ..., y, z)
{
    parse_args()
    <...>
}

It's seriously ugly, but it could work. You could also do some bquote
substitution

parse_args_expr <- quote(parse_args(a = a, b = b, ..., y = y, z = z))

exported_fun <- function (a, b, ..., y, z) NULL
body(exported_fun) <- bquote({
   .(parse_args_expr)
    <...>
})

On Wed, Dec 14, 2022, 20:36 David Kepplinger <david.kepplinger at gmail.com>
wrote:

> Thank you both for the suggestions. I would prefer a clean stack trace in
> case of errors as input errors are caught by this function and hence users
> might very well see errors emitted from it. It seems more informative to me
> if the error message would say "Error in .parse_args?" than "Error in
> new.env(?". But since this solution was suggested by both of you it is
> likely that CRAN too would demand this or a similar approach instead of
> using `:::`. I know `:::` is expansive, but the computations that follow
> are typically at least a few minutes so anything that takes less than a few
> seconds won't be noticeable.
>
> I also thought about using `...` before, but then the signature of the
> user-facing functions would be incomplete and IDEs won't be able to provide
> suggestions.
>
> Thanks for the help!
>
> -- David
>
> On Wed, Dec 14, 2022 at 7:11 PM Simon Urbanek <simon.urbanek at r-project.org
> >
> wrote:
>
> > David,
> >
> > why not
> >
> > call[[1]] <- parse_args
> >
> > The assignment is evaluated in your namespace so that makes sure the call
> > is that of your function. The only downside I see is that in a stack
> trace
> > you'll see the definition instead of the name.
> > Or possibly
> >
> > do.call(parse_args, as.list(call[-1]))
> >
> > Cheers,
> > Simon
> >
> > PS: Note that ::: is expensive - it probably doesn't matter here, but
> > would in repeatedly called functions.
> >
> >
> > > On 15/12/2022, at 12:19 PM, David Kepplinger <
> david.kepplinger at gmail.com>
> > wrote:
> > >
> > > Dear List,
> > >
> > > I am working on updating the pense package and refactored some of the
> > > methods. I have several functions which take the same arguments, hence
> > I'm
> > > sending all these arguments to an internal function, called
> > `parse_args()`.
> > > Since I want to evaluate the arguments in the caller's environment, I'm
> > > using the following code
> > >
> > >  call <- match.call(expand.dots = TRUE)
> > >  call[[1]] <- quote(pense:::parse_args)
> > >  args <- eval.parent(call)
> > >
> > > Of course, R CMD CHECK complains about the use of `:::`, as it's almost
> > > never needed. I think the above usage would fall into that area of
> > > "almost", but I'm not sure if (a) there's a better approach and (b) the
> > > CRAN team would agree with me. I would have to test (b) by submitting
> and
> > > working with the CRAN team, but I wanted to ask the list first to see
> if
> > > I'm missing something obvious. I don't want to export the function
> > > parse_args() as it's not useful for a user, and the use is truly
> > internal.
> > >
> > > Thanks and all the best,
> > > David
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> >
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Dec 15 10:39:22 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 15 Dec 2022 04:39:22 -0500
Subject: [R-pkg-devel] NOTE about use of `:::`
In-Reply-To: <CAGmyFCFndJ6WtM5uYK30sC+XN7=0NL0Pjs8rXoZaSxS41eUFCA@mail.gmail.com>
References: <CAGmyFCE9_jfJ28evgU9Zqp2+C70N7faCG-uVmcJWC+42s54hCw@mail.gmail.com>
 <5485973B-4615-44D9-9B26-8716EE3B685F@R-project.org>
 <CAGmyFCFndJ6WtM5uYK30sC+XN7=0NL0Pjs8rXoZaSxS41eUFCA@mail.gmail.com>
Message-ID: <bd1b20b5-d9e8-21dd-51ef-aa3fd69f0957@gmail.com>

If you want the name of the function to appear, then you can put the 
function in an environment whose parent is where most of the evaluation 
should take place.  For example,

f <- function(...) {
   call <- match.call(expand.dots = TRUE)
   call[[1]] <- quote(parse_args)
   envir <- new.env(parent = parent.frame())
   envir$parse_args <- parse_args

   eval(call, envir)
}

parse_args <- function(...) {
   cat("args were ", names(list(...)), "\n")
   stop("Error in parse_args")
}

f(a = 1, b = 2)
#> args were  a b
#> Error in parse_args(a = 1, b = 2): Error in parse_args

Duncan Murdoch


On 14/12/2022 8:35 p.m., David Kepplinger wrote:
> Thank you both for the suggestions. I would prefer a clean stack trace in
> case of errors as input errors are caught by this function and hence users
> might very well see errors emitted from it. It seems more informative to me
> if the error message would say "Error in .parse_args?" than "Error in
> new.env(?". But since this solution was suggested by both of you it is
> likely that CRAN too would demand this or a similar approach instead of
> using `:::`. I know `:::` is expansive, but the computations that follow
> are typically at least a few minutes so anything that takes less than a few
> seconds won't be noticeable.
> 
> I also thought about using `...` before, but then the signature of the
> user-facing functions would be incomplete and IDEs won't be able to provide
> suggestions.
> 
> Thanks for the help!
> 
> -- David
> 
> On Wed, Dec 14, 2022 at 7:11 PM Simon Urbanek <simon.urbanek at r-project.org>
> wrote:
> 
>> David,
>>
>> why not
>>
>> call[[1]] <- parse_args
>>
>> The assignment is evaluated in your namespace so that makes sure the call
>> is that of your function. The only downside I see is that in a stack trace
>> you'll see the definition instead of the name.
>> Or possibly
>>
>> do.call(parse_args, as.list(call[-1]))
>>
>> Cheers,
>> Simon
>>
>> PS: Note that ::: is expensive - it probably doesn't matter here, but
>> would in repeatedly called functions.
>>
>>
>>> On 15/12/2022, at 12:19 PM, David Kepplinger <david.kepplinger at gmail.com>
>> wrote:
>>>
>>> Dear List,
>>>
>>> I am working on updating the pense package and refactored some of the
>>> methods. I have several functions which take the same arguments, hence
>> I'm
>>> sending all these arguments to an internal function, called
>> `parse_args()`.
>>> Since I want to evaluate the arguments in the caller's environment, I'm
>>> using the following code
>>>
>>>   call <- match.call(expand.dots = TRUE)
>>>   call[[1]] <- quote(pense:::parse_args)
>>>   args <- eval.parent(call)
>>>
>>> Of course, R CMD CHECK complains about the use of `:::`, as it's almost
>>> never needed. I think the above usage would fall into that area of
>>> "almost", but I'm not sure if (a) there's a better approach and (b) the
>>> CRAN team would agree with me. I would have to test (b) by submitting and
>>> working with the CRAN team, but I wanted to ask the list first to see if
>>> I'm missing something obvious. I don't want to export the function
>>> parse_args() as it's not useful for a user, and the use is truly
>> internal.
>>>
>>> Thanks and all the best,
>>> David
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From oto@kh|@| @end|ng |rom gm@||@com  Thu Dec 15 15:34:44 2022
From: oto@kh|@| @end|ng |rom gm@||@com (Ismail Otoakhia)
Date: Thu, 15 Dec 2022 15:34:44 +0100
Subject: [R-pkg-devel] How to reduce examples in a package that takes more
 than 5 seconds to run?
Message-ID: <CAG01fEbGO_9etume6wc091k+H_rWSbUBSrpoR8ydC+iTRh568w@mail.gmail.com>

The R package 'ardl.nardl' has some examples that take more than 5 seconds
to run. I was advised by the CRAN team to reduce the run time to less than
5 seconds.



How can this be achieved?



E. I Otoakhia

	[[alternative HTML version deleted]]


From br|@n @end|ng |rom br@verock@com  Thu Dec 15 15:57:06 2022
From: br|@n @end|ng |rom br@verock@com (Brian G. Peterson)
Date: Thu, 15 Dec 2022 08:57:06 -0600
Subject: [R-pkg-devel] 
 How to reduce examples in a package that takes more
 than 5 seconds to run?
In-Reply-To: <CAG01fEbGO_9etume6wc091k+H_rWSbUBSrpoR8ydC+iTRh568w@mail.gmail.com>
References: <CAG01fEbGO_9etume6wc091k+H_rWSbUBSrpoR8ydC+iTRh568w@mail.gmail.com>
Message-ID: <0ee52453-012b-20f4-6be0-4af0996d09b4@braverock.com>

On 12/15/22 08:34, Ismail Otoakhia wrote:
> The R package 'ardl.nardl' has some examples that take more than 5 seconds
> to run. I was advised by the CRAN team to reduce the run time to less than
> 5 seconds.
>
> How can this be achieved?

- you can lower the amount of data in the example

- you can use a faster method than your default method

- you can wrap the example in a dontrun tag so it will not run during 
checking


From bbo|ker @end|ng |rom gm@||@com  Thu Dec 15 16:02:30 2022
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Thu, 15 Dec 2022 10:02:30 -0500
Subject: [R-pkg-devel] 
 How to reduce examples in a package that takes more
 than 5 seconds to run?
In-Reply-To: <0ee52453-012b-20f4-6be0-4af0996d09b4@braverock.com>
References: <CAG01fEbGO_9etume6wc091k+H_rWSbUBSrpoR8ydC+iTRh568w@mail.gmail.com>
 <0ee52453-012b-20f4-6be0-4af0996d09b4@braverock.com>
Message-ID: <eaa319dc-eefd-d7e8-6ea8-0b468d95a1d1@gmail.com>



On 2022-12-15 9:57 a.m., Brian G. Peterson wrote:
> On 12/15/22 08:34, Ismail Otoakhia wrote:
>> The R package 'ardl.nardl' has some examples that take more than 5 
>> seconds
>> to run. I was advised by the CRAN team to reduce the run time to less 
>> than
>> 5 seconds.
>>
>> How can this be achieved?
> 
> - you can lower the amount of data in the example
> 
> - you can use a faster method than your default method
> 
> - you can wrap the example in a dontrun tag so it will not run during 
> checking
> 

   If your example involves something like a fitted model object that 
takes a long time to compute, you can pre-compute the model fit and 
store the object in an inst/testdata directory, then use something like

fitted_model <- readRDS(system.file("testdata", "my_example.rds", 
package = "mypackage"))

to retrieve it

> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Director, School of Computational Science and Engineering
(Acting) Graduate chair, Mathematics & Statistics
 > E-mail is sent at my convenience; I don't expect replies outside of 
working hours.


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Thu Dec 15 16:25:34 2022
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Thu, 15 Dec 2022 09:25:34 -0600
Subject: [R-pkg-devel] 
 How to reduce examples in a package that takes more
 than 5 seconds to run?
In-Reply-To: <eaa319dc-eefd-d7e8-6ea8-0b468d95a1d1@gmail.com>
References: <CAG01fEbGO_9etume6wc091k+H_rWSbUBSrpoR8ydC+iTRh568w@mail.gmail.com>
 <0ee52453-012b-20f4-6be0-4af0996d09b4@braverock.com>
 <eaa319dc-eefd-d7e8-6ea8-0b468d95a1d1@gmail.com>
Message-ID: <d2cd5279-347b-8dad-fb96-0db7b700eb46@effectivedefense.org>



On 12/15/22 9:02 AM, Ben Bolker wrote:
> 
> 
> On 2022-12-15 9:57 a.m., Brian G. Peterson wrote:
>> On 12/15/22 08:34, Ismail Otoakhia wrote:
>>> The R package 'ardl.nardl' has some examples that take more than 5 
>>> seconds
>>> to run. I was advised by the CRAN team to reduce the run time to less 
>>> than
>>> 5 seconds.
>>>
>>> How can this be achieved?
>>
>> - you can lower the amount of data in the example
>>
>> - you can use a faster method than your default method
>>
>> - you can wrap the example in a dontrun tag so it will not run during 
>> checking
>>
> 
>  ? If your example involves something like a fitted model object that 
> takes a long time to compute, you can pre-compute the model fit and 
> store the object in an inst/testdata directory, then use something like
> 
> fitted_model <- readRDS(system.file("testdata", "my_example.rds", 
> package = "mypackage"))
> 
> to retrieve it


	  The "sos" package includes a function "CRAN", which is used for that 
purpose.  The examples section in "findfn.Rd" includes the following:


# Skip these tests on CRAN,
# because they take more than 5 seconds
if(!CRAN()){
...
}


	  I know that some on this list do not like this construct, but it has 
helped me manage this problem for several years.  NOTE:  This CRAN 
function is NOT maintained by anyone on CRAN, so it is NOT guaranteed to 
work.  However, the "sos" package is currently on CRAN, and I have not 
seen an email asking me to avoid it ;-)


https://github.com/sbgraves237/sos/blob/master/man/findFn.Rd


	  Hope this helps.
	  Spencer Graves
> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


