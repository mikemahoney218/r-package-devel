From ligges at statistik.tu-dortmund.de  Tue Jan  2 23:56:34 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 2 Jan 2018 23:56:34 +0100
Subject: [R-pkg-devel] R-devel windows binaries
In-Reply-To: <CABtg=Kk==0p6h+h8whNkEfibQ1E=KdGFzeYYWgeWAeo_suK3vQ@mail.gmail.com>
References: <CABtg=Kk==0p6h+h8whNkEfibQ1E=KdGFzeYYWgeWAeo_suK3vQ@mail.gmail.com>
Message-ID: <02ce9a4b-b9c0-7835-94d4-9f67a07ff5bd@statistik.tu-dortmund.de>

We have a full and clean set of Windows binaries for R-devel on the CRAN 
master now to be synced by the mirrors shortly.

This will be kept updated regularly again.

Best,
Uwe Ligges



On 05.12.2017 20:58, G?bor Cs?rdi wrote:
> For those of you who use R-devel, it seems that (some of?) the binary
> packages on CRAN were built using the wrong R version.
> 
> FYI.
> Gabor
> 
>> library(testthat)
> Error in library(testthat) : there is no package called ?testthat?
>> R.Version()$version.string
> [1] "R Under development (unstable) (2017-12-04 r73829)"
>> install.packages("https://cran.r-project.org/bin/windows/contrib/3.5/testthat_1.0.2.zip", repos = NULL)
> Installing package into ?C:/Users/Gabor/Documents/R?
> (as ?lib? is unspecified)
> trying URL 'https://cran.r-project.org/bin/windows/contrib/3.5/testthat_1.0.2.zip'
> Content type 'application/zip' length 1057100 bytes (1.0 MB)
> downloaded 1.0 MB
> 
> package ?testthat? successfully unpacked and MD5 sums checked
>> library(testthat)
> Error: package ?testthat? was installed by an R version with different
> internals; it needs to be reinstalled for use with this R version
>> packageDescription("testthat")
> Package: testthat
> Version: 1.0.2
> Title: Unit Testing for R
> Description: A unit testing system designed to be fun, flexible and
> easy to set up.
> Authors at R: c( person("Hadley", "Wickham", , "hadley at rstudio.com",
> c("aut", "cre")), person("RStudio", role = "cph") )
> URL: https://github.com/hadley/testthat
> BugReports: https://github.com/hadley/testthat/issues
> Depends: R (>= 3.1.0)
> Imports: digest, crayon, praise, magrittr, R6, methods
> Suggests: devtools, withr, covr
> License: MIT + file LICENSE
> Collate: 'auto-test.R' 'colour-text.R' 'compare.R'
> 'compare-character.R' 'compare-numeric.R' 'compare-time.R' 'context.R'
> 'describe.R'
>                 .....
> RoxygenNote: 5.0.1
> NeedsCompilation: yes
> Packaged: 2016-04-22 20:14:31 UTC; hadley
> Author: Hadley Wickham [aut, cre], RStudio [cph]
> Maintainer: Hadley Wickham <hadley at rstudio.com>
> Repository: CRAN
> Date/Publication: 2016-04-23 08:37:40
> Built: R 3.4.3; x86_64-w64-mingw32; 2017-12-04 00:39:18 UTC; windows
> 
> -- File: C:/Users/Gabor/Documents/R/testthat/Meta/package.rds
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From cord.hockemeyer at uni-graz.at  Wed Jan  3 13:59:10 2018
From: cord.hockemeyer at uni-graz.at (Hockemeyer, Cord (cord.hockemeyer@uni-graz.at))
Date: Wed, 3 Jan 2018 12:59:10 +0000
Subject: [R-pkg-devel] Warning "Dependence on R version '3.3.3' not with
	patchlevel 0"
Message-ID: <2df0d211f01e49f9a25ab568537f2396@EX13MS04.pers.ad.uni-graz.at>

Hi everybody,

on submitting a new package I got a rejection because of the above warning in the CRAN-check. I guess it is because of the "Depends" entry "R (>= 3.3.3)" in the DESCRIPTION file but I have no idea how to do this otherwise. Any hel?p would be highly appreciated.

Best regards,
   Cord


Cord Hockemeyer
Institut f?r Psychologie, Universit?t Graz
Tel.: +43 316 380 8531
https://psychologie.uni-graz.at/allgemeine/hockemeyer


	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Wed Jan  3 14:33:28 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 3 Jan 2018 14:33:28 +0100
Subject: [R-pkg-devel] Warning "Dependence on R version '3.3.3' not with
 patchlevel 0"
In-Reply-To: <2df0d211f01e49f9a25ab568537f2396@EX13MS04.pers.ad.uni-graz.at>
References: <2df0d211f01e49f9a25ab568537f2396@EX13MS04.pers.ad.uni-graz.at>
Message-ID: <ed0cbd1d-01a7-6172-434d-d7b013b660e6@statistik.tu-dortmund.de>



On 03.01.2018 13:59, Hockemeyer, Cord (cord.hockemeyer at uni-graz.at) wrote:
> Hi everybody,
> 
> on submitting a new package I got a rejection because of the above warning in the CRAN-check. I guess it is because of the "Depends" entry "R (>= 3.3.3)" in the DESCRIPTION file but I have no idea how to do this otherwise. Any hel?p would be highly appreciated.

If sufficient, use R (>= 3.3.0), otherwise R (>= 3.4.0): If you rely on 
a specific patchlevel, binary repositories are inconsistant on CRAN and 
typically you should be able to rely on a x.y.0 release.

Best,
Uwe Ligges


> 
> Best regards,
>     Cord
> 
> 
> Cord Hockemeyer
> Institut f?r Psychologie, Universit?t Graz
> Tel.: +43 316 380 8531
> https://psychologie.uni-graz.at/allgemeine/hockemeyer
> 
> 
> 	[[alternative HTML version deleted]]
> 
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From pdalgd at gmail.com  Wed Jan  3 15:05:55 2018
From: pdalgd at gmail.com (peter dalgaard)
Date: Wed, 3 Jan 2018 15:05:55 +0100
Subject: [R-pkg-devel] Warning "Dependence on R version '3.3.3' not with
 patchlevel 0"
In-Reply-To: <ed0cbd1d-01a7-6172-434d-d7b013b660e6@statistik.tu-dortmund.de>
References: <2df0d211f01e49f9a25ab568537f2396@EX13MS04.pers.ad.uni-graz.at>
 <ed0cbd1d-01a7-6172-434d-d7b013b660e6@statistik.tu-dortmund.de>
Message-ID: <FE06C956-27AB-4812-B928-DD1F1FA58FD3@gmail.com>

Yep. Bear in mind that many system-wide installation, e.g. in universities, are of .0 or .1 releases and upgraded yearly. If we end up with packages depending on packages depending on a later version, bad things can happen (and _did_ happen in the 3.2.* series). For the same reason, we have become very careful not to add features into R-patched,so it should be rather unlikely that packages that work with x.y.z do not also work with x.y.0.

-pd

> On 3 Jan 2018, at 14:33 , Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> 
> 
> On 03.01.2018 13:59, Hockemeyer, Cord (cord.hockemeyer at uni-graz.at) wrote:
>> Hi everybody,
>> on submitting a new package I got a rejection because of the above warning in the CRAN-check. I guess it is because of the "Depends" entry "R (>= 3.3.3)" in the DESCRIPTION file but I have no idea how to do this otherwise. Any hel?p would be highly appreciated.
> 
> If sufficient, use R (>= 3.3.0), otherwise R (>= 3.4.0): If you rely on a specific patchlevel, binary repositories are inconsistant on CRAN and typically you should be able to rely on a x.y.0 release.
> 
> Best,
> Uwe Ligges
> 
> 
>> Best regards,
>>    Cord
>> Cord Hockemeyer
>> Institut f?r Psychologie, Universit?t Graz
>> Tel.: +43 316 380 8531
>> https://psychologie.uni-graz.at/allgemeine/hockemeyer
>> 	[[alternative HTML version deleted]]
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From Christopher.Lalansingh at oicr.on.ca  Wed Jan  3 22:59:08 2018
From: Christopher.Lalansingh at oicr.on.ca (Christopher Lalansingh)
Date: Wed, 3 Jan 2018 21:59:08 +0000
Subject: [R-pkg-devel] Portable method of stripping debug symbols
Message-ID: <70f71dade54d4f4fbf2ba4aed1a12783@oicr.on.ca>

Hello all,


I'm running into troubles with the total size of my package and I've found that when using Rcpp, one can reduce the size of shared objects by stripping out debug symbols by including `-Wl,-S' in PKG_LIBS. Unfortunately this is not portable with Solaris, and using ifeq in my Makevars file to check for SunOS isn't portable either.


I came across an Issue on github (https://github.com/RcppCore/Rcpp/issues/522) which addresses possible ways to do this portably, but I can't find reference to // [[Rcpp::plugins(strip)]] in any other documentation. If anyone has run into this before and has any suggestions it would be much appreciated.


Thanks,


Christopher Lalansingh
Software Engineer

Direct: 647-258-4313


Ontario Institute for Cancer Research
MaRS Centre, West Tower
661 University Ave, Suite 510
Toronto, Ontario, Canada M5G 0A3



This message and any attachments may contain confidentia...{{dropped:12}}


From edd at debian.org  Wed Jan  3 23:13:48 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 3 Jan 2018 16:13:48 -0600
Subject: [R-pkg-devel] Portable method of stripping debug symbols
In-Reply-To: <70f71dade54d4f4fbf2ba4aed1a12783@oicr.on.ca>
References: <70f71dade54d4f4fbf2ba4aed1a12783@oicr.on.ca>
Message-ID: <23117.21916.116313.844359@bud.eddelbuettel.com>


Christopher,

On 3 January 2018 at 21:59, Christopher Lalansingh wrote:
| I'm running into troubles with the total size of my package and I've found that when using Rcpp, one can reduce the size of shared objects by stripping out debug symbols by including `-Wl,-S' in PKG_LIBS. Unfortunately this is not portable with Solaris, and using ifeq in my Makevars file to check for SunOS isn't portable either.
| 
| I came across an Issue on github (https://github.com/RcppCore/Rcpp/issues/522) which addresses possible ways to do this portably, but I can't find reference to // [[Rcpp::plugins(strip)]] in any other documentation. If anyone has run into this before and has any suggestions it would be much appreciated.

I have two writeups on this in my r^4 series:

http://dirk.eddelbuettel.com/blog/2017/08/20#010_stripping_shared_libraries
http://dirk.eddelbuettel.com/blog/2017/08/14#009_compact_shared_libraries

The earlier one has this snippet you can add to src/Makevars, and you could
even do this conditionally (ie do it on Linux, don't do it on Solaris, or the
other way, or ...)

  strippedLib: $(SHLIB)
          if test -e "/usr/bin/strip"; then /usr/bin/strip --strip-debug $(SHLIB); fi

  .phony: strippedLib

This will strip if and only if there is a strip binary. May work for yuo.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From thibault.vatter at gmail.com  Thu Jan  4 00:27:44 2018
From: thibault.vatter at gmail.com (Thibault Vatter)
Date: Thu, 4 Jan 2018 00:27:44 +0100
Subject: [R-pkg-devel] Portable method of stripping debug symbols
In-Reply-To: <23117.21916.116313.844359@bud.eddelbuettel.com>
References: <70f71dade54d4f4fbf2ba4aed1a12783@oicr.on.ca>
 <23117.21916.116313.844359@bud.eddelbuettel.com>
Message-ID: <CAFyih6B6745EPZCXqLRYRhFfyNRNucMa=AWTczeAG4DapuPceQ@mail.gmail.com>

Hi,

We faced a problem when we tried Dirk's solution for our package
rvinecopulib: there is a strip binary on OS X but it doesn't work as the
linux one.

As such, to avoid calling OS X's strip which doesn't work, we use:

strippedLib: $(SHLIB)
if test -e "/usr/bin/strip" & test -e "/bin/uname" & [[ `uname` == "Linux"
]] ; then /usr/bin/strip --strip-debug $(SHLIB); fi
.phony: strippedLib

Hope this helps,
Thibault

On Wed, Jan 3, 2018 at 11:13 PM, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> Christopher,
>
> On 3 January 2018 at 21:59, Christopher Lalansingh wrote:
> | I'm running into troubles with the total size of my package and I've
> found that when using Rcpp, one can reduce the size of shared objects by
> stripping out debug symbols by including `-Wl,-S' in PKG_LIBS.
> Unfortunately this is not portable with Solaris, and using ifeq in my
> Makevars file to check for SunOS isn't portable either.
> |
> | I came across an Issue on github (https://github.com/RcppCore/
> Rcpp/issues/522) which addresses possible ways to do this portably, but I
> can't find reference to // [[Rcpp::plugins(strip)]] in any other
> documentation. If anyone has run into this before and has any suggestions
> it would be much appreciated.
>
> I have two writeups on this in my r^4 series:
>
> http://dirk.eddelbuettel.com/blog/2017/08/20#010_stripping_
> shared_libraries
> http://dirk.eddelbuettel.com/blog/2017/08/14#009_compact_shared_libraries
>
> The earlier one has this snippet you can add to src/Makevars, and you could
> even do this conditionally (ie do it on Linux, don't do it on Solaris, or
> the
> other way, or ...)
>
>   strippedLib: $(SHLIB)
>           if test -e "/usr/bin/strip"; then /usr/bin/strip --strip-debug
> $(SHLIB); fi
>
>   .phony: strippedLib
>
> This will strip if and only if there is a strip binary. May work for yuo.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From russell-lenth at uiowa.edu  Thu Jan  4 02:35:58 2018
From: russell-lenth at uiowa.edu (Lenth, Russell V)
Date: Thu, 4 Jan 2018 01:35:58 +0000
Subject: [R-pkg-devel] Annoying "missing file link" messages when rebuilding
Message-ID: <DM5PR04MB07621F5E550B9A353453F45AF11F0@DM5PR04MB0762.namprd04.prod.outlook.com>

Developers:

Lately (the past month or so), I have been getting a ton of messages like the following whenever I rebuild my package:

    Rd warning: H:/progs/R/devel/EMMEANS/emmeans/man/xtable.emmGrid.Rd:57: missing file link 'print.xtableList'

The flagged line 57 in xtable.emmGrid.Rd looks like this:

    The \code{print} method uses \code{\link[xtable]{print.xtableList}}, ...

It seems like this warning occurs for every single instance of the form \link[pkg]{fcn} in my .Rd files.

The warnings seems to be false, as the actual help files generated have the links I specified, and they work correctly. So the warnings are only an annoyance -- but a considerable annoyance nonetheless. 

I didn't used to get these warnings, even though many of the .Rd files (including the example shown) have been in place for some time. Does anybody know where these come from, or how they can be suppressed? Is it in the latest R version, or in RStudio?

Thanks for any help.

Russ

Russell V. Lenth? -? Professor Emeritus
Department of Statistics and Actuarial Science?? 
The University of Iowa ?-? Iowa City, IA 52242? USA?? 
Voice (319)335-0712 (Dept. office)? -? FAX (319)335-3017


From murdoch.duncan at gmail.com  Thu Jan  4 03:14:47 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 3 Jan 2018 21:14:47 -0500
Subject: [R-pkg-devel] Annoying "missing file link" messages when
 rebuilding
In-Reply-To: <DM5PR04MB07621F5E550B9A353453F45AF11F0@DM5PR04MB0762.namprd04.prod.outlook.com>
References: <DM5PR04MB07621F5E550B9A353453F45AF11F0@DM5PR04MB0762.namprd04.prod.outlook.com>
Message-ID: <a7b146f7-6327-1a6c-96c8-e63fb62aea29@gmail.com>

On 03/01/2018 8:35 PM, Lenth, Russell V wrote:
> Developers:
> 
> Lately (the past month or so), I have been getting a ton of messages like the following whenever I rebuild my package:
> 
>      Rd warning: H:/progs/R/devel/EMMEANS/emmeans/man/xtable.emmGrid.Rd:57: missing file link 'print.xtableList'
> 
> The flagged line 57 in xtable.emmGrid.Rd looks like this:
> 
>      The \code{print} method uses \code{\link[xtable]{print.xtableList}}, ...
> 
> It seems like this warning occurs for every single instance of the form \link[pkg]{fcn} in my .Rd files.

I don't see a help file named print.xtableList.Rd in xtable.  That kind 
of link is to a filename, not to a help alias.  I believe the alias is 
in xtableList.Rd, so your link should be

\link[xtable:xtableList]{print.xtableList}


> The warnings seems to be false, as the actual help files generated have the links I specified, and they work correctly. So the warnings are only an annoyance -- but a considerable annoyance nonetheless.

When R is running the dynamic help system and it finds a link to a file 
that doesn't exist, it tries using its database of aliases.  However, R 
still supports static help, and in those systems the links wouldn't work.

> 
> I didn't used to get these warnings, even though many of the .Rd files (including the example shown) have been in place for some time. Does anybody know where these come from, or how they can be suppressed? Is it in the latest R version, or in RStudio?

They should be suppressed if you code the link as I show above.

Duncan Murdoch

> 
> Thanks for any help.
> 
> Russ
> 
> Russell V. Lenth? -? Professor Emeritus
> Department of Statistics and Actuarial Science
> The University of Iowa ?-? Iowa City, IA 52242? USA
> Voice (319)335-0712 (Dept. office)? -? FAX (319)335-3017
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From jernej.jevsenak at gmail.com  Thu Jan  4 09:29:54 2018
From: jernej.jevsenak at gmail.com (=?UTF-8?Q?Jernej_Jev=C5=A1enak?=)
Date: Thu, 4 Jan 2018 09:29:54 +0100
Subject: [R-pkg-devel] checking re-building of vignette outputs ... ERROR
Message-ID: <CACKka22K2qyppYPjHZrsSj=Dh8iBiouXWgW_+S1MOCXFRd5AXA@mail.gmail.com>

Hello all,

I invested quite some time to create vignette for my r package dendroTools
<https://cran.r-project.org/web/packages/dendroTools/index.html>. It takes
around 30 ? 40 minutes to build this vignette, therefore I get an error on
winbuilder.



win-builder.r-project.org

?

* checking re-building of vignette outputs ... ERROR

Check process probably crashed or hung up for 20 minutes ... killed

Most likely this happened in the example checks (?),

if not, ignore the following last lines of example output:



The core function *daily_response()* runs through daily environmental data
and calculates averages of different ranges and afterwards compares this
average with some dependent variable and returns some linear / nonlinear
metric. By default, it is computationally intensive, and it is meant to be
so.

So, is there a way to get around this error and still publish my package on
CRAN? Could I build my vignette on my computer and include it as pdf /
html? So, it would not need to get built on CRAN machines?



Jerry

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Thu Jan  4 18:34:30 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Thu, 4 Jan 2018 18:34:30 +0100
Subject: [R-pkg-devel] checking re-building of vignette outputs ... ERROR
In-Reply-To: <CACKka22K2qyppYPjHZrsSj=Dh8iBiouXWgW_+S1MOCXFRd5AXA@mail.gmail.com>
References: <CACKka22K2qyppYPjHZrsSj=Dh8iBiouXWgW_+S1MOCXFRd5AXA@mail.gmail.com>
Message-ID: <f1c1ea31-b251-00b2-a703-9fb1d1ce8b1c@statistik.tu-dortmund.de>

Either provide precomputed results somewhere for the computaional 
intensive parts or, if the former is not feasible, ask the CRAN team to 
special case you package so that vignettes are not executed on CRAN.

Best,
Uwe Ligges

On 04.01.2018 09:29, Jernej Jev?enak wrote:
> Hello all,
> 
> I invested quite some time to create vignette for my r package dendroTools
> <https://cran.r-project.org/web/packages/dendroTools/index.html>. It takes
> around 30 ? 40 minutes to build this vignette, therefore I get an error on
> winbuilder.
> 
> 
> 
> win-builder.r-project.org
> 
> ?
> 
> * checking re-building of vignette outputs ... ERROR
> 
> Check process probably crashed or hung up for 20 minutes ... killed
> 
> Most likely this happened in the example checks (?),
> 
> if not, ignore the following last lines of example output:
> 
> 
> 
> The core function *daily_response()* runs through daily environmental data
> and calculates averages of different ranges and afterwards compares this
> average with some dependent variable and returns some linear / nonlinear
> metric. By default, it is computationally intensive, and it is meant to be
> so.
> 
> So, is there a way to get around this error and still publish my package on
> CRAN? Could I build my vignette on my computer and include it as pdf /
> html? So, it would not need to get built on CRAN machines?
> 
> 
> 
> Jerry
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From edd at debian.org  Thu Jan  4 19:06:04 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 4 Jan 2018 12:06:04 -0600
Subject: [R-pkg-devel] Portable method of stripping debug symbols
In-Reply-To: <CAFyih6B6745EPZCXqLRYRhFfyNRNucMa=AWTczeAG4DapuPceQ@mail.gmail.com>
References: <70f71dade54d4f4fbf2ba4aed1a12783@oicr.on.ca>
 <23117.21916.116313.844359@bud.eddelbuettel.com>
 <CAFyih6B6745EPZCXqLRYRhFfyNRNucMa=AWTczeAG4DapuPceQ@mail.gmail.com>
Message-ID: <23118.27916.84846.758116@bud.eddelbuettel.com>


On 4 January 2018 at 00:27, Thibault Vatter wrote:
| We faced a problem when we tried Dirk's solution for our package
| rvinecopulib: there is a strip binary on OS X but it doesn't work as the
| linux one.
| 
| As such, to avoid calling OS X's strip which doesn't work, we use:
| 
| strippedLib: $(SHLIB)
| if test -e "/usr/bin/strip" & test -e "/bin/uname" & [[ `uname` == "Linux"
| ]] ; then /usr/bin/strip --strip-debug $(SHLIB); fi
| .phony: strippedLib

Yes, this is good. Someone (you?) had pointed this out to me before.

Did you add this to your actual released and on-CRAN package?

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From thibault.vatter at gmail.com  Thu Jan  4 19:16:46 2018
From: thibault.vatter at gmail.com (Thibault Vatter)
Date: Thu, 4 Jan 2018 19:16:46 +0100
Subject: [R-pkg-devel] Portable method of stripping debug symbols
In-Reply-To: <23118.27916.84846.758116@bud.eddelbuettel.com>
References: <70f71dade54d4f4fbf2ba4aed1a12783@oicr.on.ca>
 <23117.21916.116313.844359@bud.eddelbuettel.com>
 <CAFyih6B6745EPZCXqLRYRhFfyNRNucMa=AWTczeAG4DapuPceQ@mail.gmail.com>
 <23118.27916.84846.758116@bud.eddelbuettel.com>
Message-ID: <CAFyih6Bx-oDEn32timvDt8U7z71=pbPPdwLzLcCCLx9vm5m4AA@mail.gmail.com>

No, we're preparing a new release which we'll submit in the next few days.

On Thu, Jan 4, 2018 at 7:06 PM, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 4 January 2018 at 00:27, Thibault Vatter wrote:
> | We faced a problem when we tried Dirk's solution for our package
> | rvinecopulib: there is a strip binary on OS X but it doesn't work as the
> | linux one.
> |
> | As such, to avoid calling OS X's strip which doesn't work, we use:
> |
> | strippedLib: $(SHLIB)
> | if test -e "/usr/bin/strip" & test -e "/bin/uname" & [[ `uname` ==
> "Linux"
> | ]] ; then /usr/bin/strip --strip-debug $(SHLIB); fi
> | .phony: strippedLib
>
> Yes, this is good. Someone (you?) had pointed this out to me before.
>
> Did you add this to your actual released and on-CRAN package?
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From erinm.hodgess at gmail.com  Fri Jan  5 05:40:58 2018
From: erinm.hodgess at gmail.com (Erin Hodgess)
Date: Thu, 4 Jan 2018 22:40:58 -0600
Subject: [R-pkg-devel] Compiling with more than one compiler in package
	development
Message-ID: <CACxE24nnRCbdjVK3UaK25K37=G6vJ=akqxc5gZBbS5F5o2opRQ@mail.gmail.com>

Hello!

I'm not sure if this appeared, so I thought I would try again.  I am
building a package on a RedHat supercomputer, using the gcc/gfortran and
the accompanying mpi (MPICH) compilers.  Here is the Makefile:

PKG_LIBS = $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)


all:  rmpigFortr.so tria.so


rmpigFortr.so:

        mpifort -fPIC   -c rmpigFortr.f90 -o    rmpigFortr.o

        mpifort -shared rmpigFortr.o -o rmpigFortr.so


tria.so:

        gfortran -m64  -fpic -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2
-fexcep\

tions -fstack-protector-strong --param=ssp-buffer-size=4
-grecord-gcc-switches \

  -m64 -mtune=generic  -c  tria.f90 -o tria.o

        gfortran -m64 -shared -L/usr/lib64/R/lib -Wl,-z,relro -o tria.so
tria.o\

 -L/usr/lib64/R/lib -lR


Here is the NAMESPACE:


# Generated by roxygen2: fake comment so roxygen2 overwrites silently.

exportPattern("^[^\\.]")

useDynLib(rmpigFortr)

useDynLib(tria)


When I build, check, and install the package, it seems to be fine.
However, I have an R function that calls that "tria" Fortran subroutine.
Here are the results:



> library(rmpigFortr)

> za <- tri(n=1000)

Error in .Fortran("tria", as.single(y), as.integer(n)) :

  "tria" not resolved from current namespace (rmpigFortr)

>

But if I type in the call to .Fortran myself, it works.


Any idea what I might be doing wrong, please?


Thanks in advance,

Sincerely,

Erin



-- 
Erin Hodgess
Associate Professor
Department of Mathematical and Statistics
University of Houston - Downtown
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From r.turner at auckland.ac.nz  Sat Jan  6 03:52:28 2018
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sat, 6 Jan 2018 15:52:28 +1300
Subject: [R-pkg-devel] =?utf-8?q?Producing_=C3=9F_in_help_files=2E?=
Message-ID: <130bcc51-9678-6742-ba3b-47836b9c4e84@auckland.ac.nz>


In a help file that I am writing I wish to cite an item by a bloke whose 
surname is Wei?.

In LaTeX I would use the macro \ss, but Rd files don't accept that.

Is there any way that I can create the ? symbol in a help file?  I've 
done a bit of web-searching and found nothing helpful.

Of course I could just write "Weiss", but that's *so* non-U! :-)

Thanks for any ideas.

cheers,

Rolf Turner

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From spencer.graves at effectivedefense.org  Sat Jan  6 04:19:53 2018
From: spencer.graves at effectivedefense.org (Spencer Graves)
Date: Fri, 5 Jan 2018 21:19:53 -0600
Subject: [R-pkg-devel] =?utf-8?q?Producing_=C3=9F_in_help_files=2E?=
In-Reply-To: <130bcc51-9678-6742-ba3b-47836b9c4e84@auckland.ac.nz>
References: <130bcc51-9678-6742-ba3b-47836b9c4e84@auckland.ac.nz>
Message-ID: <0928bd0e-3eb5-1c9f-2865-20d186642366@effectivedefense.org>



On 2018-01-05 20:52, Rolf Turner wrote:
>
> In a help file that I am writing I wish to cite an item by a bloke 
> whose surname is Wei?.


 ????? Write it "Weiss".


 ????? See "https://en.wikipedia.org/wiki/%C3%9F".


 ????? That name is written "Weiss" in Switzerland and Liechtenstein but 
"Wei?" in Germany and Austria.? German is the official language of 
Liechtenstein and the primary of four official languages of Switzerland.


 ????? Standard high German has several characters that are not used in 
English but have standard transliterations using the English latin 
alphabet.? These include "?" = "ss", "?" = "ae", "?" = "oe" and "?" = "ue".


 ????? Spencer Graves

>
> In LaTeX I would use the macro \ss, but Rd files don't accept that.
>
> Is there any way that I can create the ? symbol in a help file? I've 
> done a bit of web-searching and found nothing helpful.
>
> Of course I could just write "Weiss", but that's *so* non-U! :-)
>
> Thanks for any ideas.
>
> cheers,
>
> Rolf Turner
>


From r.turner at auckland.ac.nz  Sat Jan  6 04:41:19 2018
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sat, 6 Jan 2018 16:41:19 +1300
Subject: [R-pkg-devel] =?utf-8?q?Producing_=C3=9F_in_help_files=2E?=
In-Reply-To: <0928bd0e-3eb5-1c9f-2865-20d186642366@effectivedefense.org>
References: <130bcc51-9678-6742-ba3b-47836b9c4e84@auckland.ac.nz>
 <0928bd0e-3eb5-1c9f-2865-20d186642366@effectivedefense.org>
Message-ID: <cd421da3-32dd-48df-dc0d-5037810f98fc@auckland.ac.nz>

On 06/01/18 16:19, Spencer Graves wrote:
> 
> 
> On 2018-01-05 20:52, Rolf Turner wrote:
>>
>> In a help file that I am writing I wish to cite an item by a bloke 
>> whose surname is Wei?.
> 
> 
>  ????? Write it "Weiss".
> 
> 
>  ????? See "https://en.wikipedia.org/wiki/%C3%9F".
> 
> 
>  ????? That name is written "Weiss" in Switzerland and Liechtenstein but 
> "Wei?" in Germany and Austria.? German is the official language of 
> Liechtenstein and the primary of four official languages of Switzerland.
> 
> 
>  ????? Standard high German has several characters that are not used in 
> English but have standard transliterations using the English latin 
> alphabet.? These include "?" = "ss", "?" = "ae", "?" = "oe" and "?" = "ue".

<SNIP>

I'm sure that you're correct, but I find it frustrating not to be able 
to produce a symbol (which is readily available elsewhere --- e.g. in 
LaTeX or from the keyboard using the "compose key") under the ".Rd" 
system.  I'd like to be *able to produce it*, even if I shouldn't! :-)

cheers,

Rolf

P. S.  It also seems to me to be polite --- if that's the way the bloke 
writes his name, then  that's the way that I ought to write it when 
referring to him.

R.

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From spencer.graves at effectivedefense.org  Sat Jan  6 05:31:27 2018
From: spencer.graves at effectivedefense.org (Spencer Graves)
Date: Fri, 5 Jan 2018 22:31:27 -0600
Subject: [R-pkg-devel] =?utf-8?q?Producing_=C3=9F_in_help_files=2E?=
In-Reply-To: <cd421da3-32dd-48df-dc0d-5037810f98fc@auckland.ac.nz>
References: <130bcc51-9678-6742-ba3b-47836b9c4e84@auckland.ac.nz>
 <0928bd0e-3eb5-1c9f-2865-20d186642366@effectivedefense.org>
 <cd421da3-32dd-48df-dc0d-5037810f98fc@auckland.ac.nz>
Message-ID: <59d2cd8a-ed4f-5db4-7464-bce105b0bf40@effectivedefense.org>



On 2018-01-05 21:41, Rolf Turner wrote:
> On 06/01/18 16:19, Spencer Graves wrote:
>>
>>
>> On 2018-01-05 20:52, Rolf Turner wrote:
>>>
>>> In a help file that I am writing I wish to cite an item by a bloke 
>>> whose surname is Wei?.
>>
>>
>> ?????? Write it "Weiss".
>>
>>
>> ?????? See "https://en.wikipedia.org/wiki/%C3%9F".
>>
>>
>> ?????? That name is written "Weiss" in Switzerland and Liechtenstein 
>> but "Wei?" in Germany and Austria.? German is the official language 
>> of Liechtenstein and the primary of four official languages of 
>> Switzerland.
>>
>>
>> ?????? Standard high German has several characters that are not used 
>> in English but have standard transliterations using the English latin 
>> alphabet.? These include "?" = "ss", "?" = "ae", "?" = "oe" and "?" = 
>> "ue".
>
> <SNIP>
>
> I'm sure that you're correct, but I find it frustrating not to be able 
> to produce a symbol (which is readily available elsewhere --- e.g. in 
> LaTeX or from the keyboard using the "compose key") under the ".Rd" 
> system.? I'd like to be *able to produce it*, even if I shouldn't! :-)
>
> cheers,
>
> Rolf
>
> P. S.? It also seems to me to be polite --- if that's the way the 
> bloke writes his name, then? that's the way that I ought to write it 
> when referring to him.


 ????? Agreed -- except that people who have not studied German would 
not recognize "?" as sounding like "ss":? They might want to pronounce 
it "Weib" -- old German for "woman", though transliterated as "wife" -- 
very different from "Wei?" = "White".


 ????? "Solzhenitsyn" is the English and Spanish transliteration of a 
name that appears in German as "Solschenizyn", French as "Soljenitsyne", 
and Russian as "??????????", according to Wikipedia 
(https://en.wikipedia.org/wiki/Aleksandr_Solzhenitsyn).


 ????? Hope this helps.
 ????? spencer

>
> R.
>


From j3ffdick at gmail.com  Sat Jan  6 04:59:02 2018
From: j3ffdick at gmail.com (Jeffrey Dick)
Date: Sat, 6 Jan 2018 11:59:02 +0800
Subject: [R-pkg-devel] =?utf-8?q?Producing_=C3=9F_in_help_files=2E?=
In-Reply-To: <cd421da3-32dd-48df-dc0d-5037810f98fc@auckland.ac.nz>
References: <130bcc51-9678-6742-ba3b-47836b9c4e84@auckland.ac.nz>
 <0928bd0e-3eb5-1c9f-2865-20d186642366@effectivedefense.org>
 <cd421da3-32dd-48df-dc0d-5037810f98fc@auckland.ac.nz>
Message-ID: <CANBtttZ-ZFUkPqzcNiRKO4n27yu_9mYy8Yj6egTp2pKpKdzsPw@mail.gmail.com>

On Sat, Jan 6, 2018 at 11:41 AM, Rolf Turner <r.turner at auckland.ac.nz> wrote:
> On 06/01/18 16:19, Spencer Graves wrote:
>>
>>
>>
>> On 2018-01-05 20:52, Rolf Turner wrote:
>>>
>>>
>>> In a help file that I am writing I wish to cite an item by a bloke whose
>>> surname is Wei?.
>>
>>
>>
>>        Write it "Weiss".
>>
>>
>>        See "https://en.wikipedia.org/wiki/%C3%9F".
>>
>>
>>        That name is written "Weiss" in Switzerland and Liechtenstein but
>> "Wei?" in Germany and Austria.  German is the official language of
>> Liechtenstein and the primary of four official languages of Switzerland.
>>
>>
>>        Standard high German has several characters that are not used in
>> English but have standard transliterations using the English latin alphabet.
>> These include "?" = "ss", "?" = "ae", "?" = "oe" and "?" = "ue".
>
>
> <SNIP>
>
> I'm sure that you're correct, but I find it frustrating not to be able to
> produce a symbol (which is readily available elsewhere --- e.g. in LaTeX or
> from the keyboard using the "compose key") under the ".Rd" system.  I'd like
> to be *able to produce it*, even if I shouldn't! :-)
>
> cheers,
>
> Rolf
>
> P. S.  It also seems to me to be polite --- if that's the way the bloke
> writes his name, then  that's the way that I ought to write it when
> referring to him.
>
> R.
>
> --
> Technical Editor ANZJS
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

You could define a new macro in the Rd file (untested):

\newcommand{\ss}{\ifelse{latex}{\ss}{\ifelse{html}{\out{&szlig;}}{ss}}}

That would use "\ss" in LaTeX, "&szlig" in HTML, and "ss" in plain
text rendering.

Or, add \encoding{UTF-8} to the Rd file and ? is available in plain text:

\newcommand{\ss}{\ifelse{latex}{\ss}{\ifelse{html}{\out{&szlig;}}{?}}}


From ligges at statistik.tu-dortmund.de  Sat Jan  6 08:51:53 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sat, 6 Jan 2018 08:51:53 +0100
Subject: [R-pkg-devel] =?utf-8?q?Producing_=C3=9F_in_help_files=2E?=
In-Reply-To: <cd421da3-32dd-48df-dc0d-5037810f98fc@auckland.ac.nz>
References: <130bcc51-9678-6742-ba3b-47836b9c4e84@auckland.ac.nz>
 <0928bd0e-3eb5-1c9f-2865-20d186642366@effectivedefense.org>
 <cd421da3-32dd-48df-dc0d-5037810f98fc@auckland.ac.nz>
Message-ID: <9a6fd3c6-e870-df2d-42d5-407dbd7a229b@statistik.tu-dortmund.de>

And just writing it with a declared encoding in the Rd file des not work?

Section 2.14 in WRE tells us that \encoding{} can declare anm encoding 
and "For convenience, encoding names ?latin1? and ?latin2? are always 
recognized: these and
?UTF-8? are likely to work fairly widely. However, this does not mean 
that all characters in
UTF-8 will be recognized, and the coverage of non-Latin characters10 is 
fairly low. Using LATEX
inputenx (see ?Rd2pdf in R) will give greater coverage of UTF-8.
The \enc command (see Section 2.8 [Insertions], page 75) can be used to 
provide transliterations
which will be used in conversions that do not support the declared 
encoding."

And Secion 2.8 tells us

Text which might need to be represented differently in different 
encodings should be marked
by \enc, e.g. \enc{J?reskog}{Joreskog} (with no whitespace between the 
braces) where the
first argument will be used where encodings are allowed and the second 
should be ASCII (and
is used for e.g. the text conversion in locales that cannot represent 
the encoded form). (This is
intended to be used for individual words, not whole sentences or 
paragraphs.)



Hence a preamble with, e.g.
\encoding{latin1}
or
\encoding{UTF-8}
and later writing \enc{Wei?}{Weiss} seems most appropriate here.

Best,
Uwe Ligges



On 06.01.2018 04:41, Rolf Turner wrote:
> On 06/01/18 16:19, Spencer Graves wrote:
>>
>>
>> On 2018-01-05 20:52, Rolf Turner wrote:
>>>
>>> In a help file that I am writing I wish to cite an item by a bloke 
>>> whose surname is Wei?.
>>
>>
>> ?????? Write it "Weiss".
>>
>>
>> ?????? See "https://en.wikipedia.org/wiki/%C3%9F".
>>
>>
>> ?????? That name is written "Weiss" in Switzerland and Liechtenstein 
>> but "Wei?" in Germany and Austria.? German is the official language of 
>> Liechtenstein and the primary of four official languages of Switzerland.
>>
>>
>> ?????? Standard high German has several characters that are not used 
>> in English but have standard transliterations using the English latin 
>> alphabet.? These include "?" = "ss", "?" = "ae", "?" = "oe" and "?" = 
>> "ue".
> 
> <SNIP>
> 
> I'm sure that you're correct, but I find it frustrating not to be able 
> to produce a symbol (which is readily available elsewhere --- e.g. in 
> LaTeX or from the keyboard using the "compose key") under the ".Rd" 
> system.? I'd like to be *able to produce it*, even if I shouldn't! :-)
> 
> cheers,
> 
> Rolf
> 
> P. S.? It also seems to me to be polite --- if that's the way the bloke 
> writes his name, then? that's the way that I ought to write it when 
> referring to him.
> 
> R.
>


From hugh.parsonage at gmail.com  Sat Jan  6 09:03:35 2018
From: hugh.parsonage at gmail.com (Hugh Parsonage)
Date: Sat, 6 Jan 2018 19:03:35 +1100
Subject: [R-pkg-devel] Imports: vs Suggests:
Message-ID: <CAJmOi+OfU8sMZLAyA59Hreg5Tdws+zSp_Asy9=Gz-VxmrdxP8A@mail.gmail.com>

I write to clarify when a package should be in Imports: vs Suggests:.
Does the absence of warnings following a R CMD check --as-cran
guarantee that packages are placed in the correct field?

For example, consider a package with only one exported function:

isTrue <- function(x) hutils::AND(x, TRUE)

When I run R CMD check on this package with an otherwise valid
DESCRIPTION and NAMESPACE, I get a warning about an undeclared import.
That I understand.

But if I add

Suggests: hutils

to DESCRIPTION then R CMD check passes with no warnings. (hutils is
installed on my machine, so I don't receive a note about a package
being unavailable for checking.) My understanding is that because
isTrue won't run without hutils, the package must include hutils under
Imports (or Depends:) not Suggests: , but the R CMD check result gives
the impression that this decision is at the discretion of the package
author. In 'Writing R Extensions', there is a caveat that packages may
be in Suggests: rather than Imports if they are "loaded in the body of
functions", but I don't understand the distinction.

Furthermore, would it make a difference if instead of hutils being
used it was a base package (like stats) or a recommended package (like
KernSmooth)?


Hugh Parsonage
Grattan Institute


From edd at debian.org  Sat Jan  6 17:23:46 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 6 Jan 2018 10:23:46 -0600
Subject: [R-pkg-devel] Imports: vs Suggests:
In-Reply-To: <CAJmOi+OfU8sMZLAyA59Hreg5Tdws+zSp_Asy9=Gz-VxmrdxP8A@mail.gmail.com>
References: <CAJmOi+OfU8sMZLAyA59Hreg5Tdws+zSp_Asy9=Gz-VxmrdxP8A@mail.gmail.com>
Message-ID: <23120.63506.733467.972425@bud.eddelbuettel.com>


Hugh,

You may be looking at this from the wrong angle. "Imports" is really an
updated variant of "Depends".  Both of them declaure _unconditional_ use of
another package.  (How they are used is the fine distinction between loading
and attaching which we'll skip here). The key point is that a package named
by either of these _must_ be present.

"Suggests" is different as it declares _optional_ use for which you should
then test.  To take a simple example, Rcpp offers Rcpp.package.skeleton() by
extending / wrapping around package.skeleton().  If and when the _optional_
package pkgKitten (which is a Suggests: of Rcpp) is present, we use it:


    havePkgKitten <- requireNamespace("pkgKitten", quietly=TRUE)

    # ... stuff omitted

    ## update the package description help page
    if (havePkgKitten) {                # if pkgKitten is available, use it
        pkgKitten::playWithPerPackageHelpPage(name, path, maintainer, email)
    } else {
        ### other fallback code ....
    }

See https://github.com/RcppCore/Rcpp/blob/master/R/Rcpp.package.skeleton.R

Hth,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From goran.brostrom at umu.se  Sat Jan  6 17:26:46 2018
From: goran.brostrom at umu.se (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Sat, 6 Jan 2018 17:26:46 +0100
Subject: [R-pkg-devel] =?utf-8?q?Producing_=C3=9F_in_help_files=2E?=
In-Reply-To: <cd421da3-32dd-48df-dc0d-5037810f98fc@auckland.ac.nz>
References: <130bcc51-9678-6742-ba3b-47836b9c4e84@auckland.ac.nz>
 <0928bd0e-3eb5-1c9f-2865-20d186642366@effectivedefense.org>
 <cd421da3-32dd-48df-dc0d-5037810f98fc@auckland.ac.nz>
Message-ID: <567acdb9-5091-6b0b-0bfb-e6544fe25b44@umu.se>

Den 2018-01-06 kl. 04:41, skrev Rolf Turner:

> P. S.  It also seems to me to be polite --- if that's the way the bloke
> writes his name, then  that's the way that I ought to write it when
> referring to him.

I couldn't agree more: Thanks Rolf!

G?ran

PS. I follow Uwe's recommendation and write \enc{G?ran}{George} after
\encoding{UTF-8}. (Goeran?? Too ugly.)


From boxuancui at gmail.com  Sat Jan  6 18:36:20 2018
From: boxuancui at gmail.com (Boxuan Cui)
Date: Sat, 6 Jan 2018 12:36:20 -0500
Subject: [R-pkg-devel] Help with R check
Message-ID: <CAC-fbYaVKsRpKJAbqTs2py3xHrMfL60BGm8Q2tQkb=v2d5EcXw@mail.gmail.com>

Hi all,

*[Issue 1]*

This is the first time I have encountered this, and I have no idea what's
going on. I really appreciate anyone's help on this.

My package: https://cran.r-project.org/package=DataExplorer

My story:

   - *[Jan 01]*
      - I plan to release the latest version to CRAN. I ran all checks
      (including win-builder through *devtools::build_win()*) on my
      package, everything is OK, so I submitted it.
      - The URL for win-builder has expired, but in case you can find the
      check log: https://win-builder.r-project.org/D52z9NcU7633
      - AppVeyor build log:
      https://ci.appveyor.com/project/boxuancui/dataexplorer/build/master.36
      - Travis CI build log:
      https://travis-ci.org/boxuancui/DataExplorer/builds/323730230
   - *[Jan 03]*
      - I was told that I need to update my MIT license file, since I made
      some changes there. I did as told and re-submit the package. I didn't
      change anything.
   - *[Jan 03 (later of the day)]*
      - My package is failing example checks on arch 'i386' for Windows,
      according to
      https://win-builder.r-project.org/incoming_pretest/180103_161227_DataExplorer_050/00check.log
      - Note the example was failing for *split_columns()*.
   - *[Jan 05]*
      - I saw the Email and did another *devtools::build_win()* with no
      changes at all.
      - I received the same error, but on another function, i.e.,
      *set_missing()*.
      - The check log is here:
      https://win-builder.r-project.org/9bKr71mwef11/00check.log
   - *[Jan 05]*
      - After some investigation, I believe it is due to dependency
      versions, so I update DESCRIPTION with latest version for all,
including R
      (was 3.3.0).
      - This time the check log is showing a warning: *checking DESCRIPTION
      meta-information ... WARNING Dependence on R version '3.4.3' not with
      patchlevel 0*.
      - The check log is here:
      https://win-builder.r-project.org/5Px18P21h44a/00check.log

Has anyone encountered this issue before?

*[Issue 2]*

Does anyone know how to remove these warnings for vignettes?
https://cran.r-project.org/web/checks/check_results_DataExplorer.html
They happen on the following systems:

   - r-patched-solaris-x86
   - r-release-osx-x86_64
   - r-oldrel-osx-x86_64

Warning message:

*Warning in engine$weave(file, quiet = quiet, encoding = enc) :*
*     Pandoc (>= 1.12.3) and/or pandoc-citeproc not available. Falling back
to R Markdown v1.*
*    Warning in normalizePath(f2) :*
*     path[1]="./webshot3eaf50bf136e.png": No such file or directory*
*    Warning in file(con, "rb") :*
*     cannot open file './webshot3eaf50bf136e.png': No such file or
directory*
*    Quitting from lines 57-68 (dataexplorer-intro.Rmd) *
*    Error: processing vignette 'dataexplorer-intro.Rmd' failed with
diagnostics:*
*    cannot open the connection*
*    Execution halted *


After searching for the same warnings online, I found that vignettes (from
other pakcages) that loads JavaScript files tend to have these. Is there a
way to fix this?


Thank you very much for your time!


Best,
Boxuan (Bo)

	[[alternative HTML version deleted]]


From ali.saeb at gmail.com  Sat Jan  6 20:36:54 2018
From: ali.saeb at gmail.com (Saeb)
Date: Sat, 6 Jan 2018 23:06:54 +0330
Subject: [R-pkg-devel] Assignments to the Global environment
Message-ID: <4b16881b-5afe-5f3e-dc74-7c7eb3999f33@gmail.com>


Hello!

Regarding the following NOTE:

* checking R code for possible problems ... [4s] NOTE
Found the following assignments to the global environment:
File 'TSEtools/R/getTSE.R':
assign(as.character(s), temp3, envir = as.environment(1))

Please let me know, how can I eliminate this problem? I didn't find out
any good information on websites!

Thanks in advance for your help,
Ali


P.S: The log of package as follows:

* using log directory 'd:/RCompile/CRANguest/R-release/TSEtools.Rcheck'
* using R version 3.4.3 (2017-11-30)
* using platform: x86_64-w64-mingw32 (64-bit)
* using session charset: ISO8859-1
* checking for file 'TSEtools/DESCRIPTION' ... OK
* checking extension type ... Package
* this is package 'TSEtools' version '0.1.0'
* package encoding: UTF-8
* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Ali Saeb <ali.saeb at gmail.com>'

New submission

License components with restrictions and base license permitting such:
   BSD_2_clause + file LICENSE
File 'LICENSE':
   YEAR: 2018
     COPYRIGHT HOLDER: Ali Saeb

Possibly mis-spelled words in DESCRIPTION:
   TSE (7:84)
   performence (7:98)
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking whether package 'TSEtools' can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* loading checks for arch 'i386'
** checking whether the package can be loaded ... OK
** checking whether the package can be loaded with stated dependencies 
... OK
** checking whether the package can be unloaded cleanly ... OK
** checking whether the namespace can be loaded with stated dependencies 
... OK
** checking whether the namespace can be unloaded cleanly ... OK
** checking loading without being on the library search path ... OK
** checking use of S3 registration ... OK
* loading checks for arch 'x64'
** checking whether the package can be loaded ... OK
** checking whether the package can be loaded with stated dependencies 
... OK
** checking whether the package can be unloaded cleanly ... OK
** checking whether the namespace can be loaded with stated dependencies 
... OK
** checking whether the namespace can be unloaded cleanly ... OK
** checking loading without being on the library search path ... OK
** checking use of S3 registration ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... [8s] NOTE
Found the following assignments to the global environment:
File 'TSEtools/R/getTSE.R':
   assign(as.character(s), temp3, envir = as.environment(1))
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd line widths ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking examples ...
** running examples for arch 'i386' ... [4s] OK
** running examples for arch 'x64' ... [4s] OK
* checking PDF version of manual ... OK
* DONE
Status: 2 NOTEs


	[[alternative HTML version deleted]]


From pdalgd at gmail.com  Sat Jan  6 22:07:16 2018
From: pdalgd at gmail.com (peter dalgaard)
Date: Sat, 6 Jan 2018 22:07:16 +0100
Subject: [R-pkg-devel] Assignments to the Global environment
In-Reply-To: <4b16881b-5afe-5f3e-dc74-7c7eb3999f33@gmail.com>
References: <4b16881b-5afe-5f3e-dc74-7c7eb3999f33@gmail.com>
Message-ID: <FB4A2D58-7337-42D2-982C-58804C3A91B4@gmail.com>

You probably need to tell us what you are trying to achieve. Why do you want to assign temp3 to a variable with its name in s into the global environment? Not doing that would clearly eliminate the Note:, but presumably it has a function. However, writing to the global environment, especially to variables with arbitrary names, is potentially antisocial behaviour, since it may overwrite user variables.

Incidentally, why do you write .GlobalEnv as as.environment(1)? Is is as intended?

-pd

> On 6 Jan 2018, at 20:36 , Saeb <ali.saeb at gmail.com> wrote:
> 
> * checking R code for possible problems ... [4s] NOTE
> Found the following assignments to the global environment:
> File 'TSEtools/R/getTSE.R':
> assign(as.character(s), temp3, envir = as.environment(1))
> 
> Please let me know, how can I eliminate this problem? I didn't find out
> any good information on websites!

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From ligges at statistik.tu-dortmund.de  Sat Jan  6 23:00:48 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sat, 6 Jan 2018 23:00:48 +0100
Subject: [R-pkg-devel] Assignments to the Global environment
In-Reply-To: <FB4A2D58-7337-42D2-982C-58804C3A91B4@gmail.com>
References: <4b16881b-5afe-5f3e-dc74-7c7eb3999f33@gmail.com>
 <FB4A2D58-7337-42D2-982C-58804C3A91B4@gmail.com>
Message-ID: <fdf61b41-1bcb-32af-e1df-ac17a737e829@statistik.tu-dortmund.de>

Let me add: Frequently you can use storage in an enmvironment in yur 
package, if that helps to avoid assigning into .GlobalEnv.

Best,
Uwe Ligges

On 06.01.2018 22:07, peter dalgaard wrote:
> You probably need to tell us what you are trying to achieve. Why do you want to assign temp3 to a variable with its name in s into the global environment? Not doing that would clearly eliminate the Note:, but presumably it has a function. However, writing to the global environment, especially to variables with arbitrary names, is potentially antisocial behaviour, since it may overwrite user variables.
> 
> Incidentally, why do you write .GlobalEnv as as.environment(1)? Is is as intended?
> 
> -pd
> 
>> On 6 Jan 2018, at 20:36 , Saeb <ali.saeb at gmail.com> wrote:
>>
>> * checking R code for possible problems ... [4s] NOTE
>> Found the following assignments to the global environment:
>> File 'TSEtools/R/getTSE.R':
>> assign(as.character(s), temp3, envir = as.environment(1))
>>
>> Please let me know, how can I eliminate this problem? I didn't find out
>> any good information on websites!
>


From ligges at statistik.tu-dortmund.de  Sat Jan  6 23:11:32 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sat, 6 Jan 2018 23:11:32 +0100
Subject: [R-pkg-devel] Help with R check
In-Reply-To: <CAC-fbYaVKsRpKJAbqTs2py3xHrMfL60BGm8Q2tQkb=v2d5EcXw@mail.gmail.com>
References: <CAC-fbYaVKsRpKJAbqTs2py3xHrMfL60BGm8Q2tQkb=v2d5EcXw@mail.gmail.com>
Message-ID: <c800cacb-a761-649a-1484-165ee68a79d5@statistik.tu-dortmund.de>



On 06.01.2018 18:36, Boxuan Cui wrote:
> Hi all,
> 
> *[Issue 1]*
> 
> This is the first time I have encountered this, and I have no idea what's
> going on. I really appreciate anyone's help on this.
> 
> My package: https://cran.r-project.org/package=DataExplorer
> 
> My story:
> 
>     - *[Jan 01]*
>        - I plan to release the latest version to CRAN. I ran all checks
>        (including win-builder through *devtools::build_win()*) on my
>        package, everything is OK, so I submitted it.
>        - The URL for win-builder has expired, but in case you can find the
>        check log: https://win-builder.r-project.org/D52z9NcU7633
>        - AppVeyor build log:
>        https://ci.appveyor.com/project/boxuancui/dataexplorer/build/master.36
>        - Travis CI build log:
>        https://travis-ci.org/boxuancui/DataExplorer/builds/323730230
>     - *[Jan 03]*
>        - I was told that I need to update my MIT license file, since I made
>        some changes there. I did as told and re-submit the package. I didn't
>        change anything.
>     - *[Jan 03 (later of the day)]*
>        - My package is failing example checks on arch 'i386' for Windows,
>        according to
>        https://win-builder.r-project.org/incoming_pretest/180103_161227_DataExplorer_050/00check.log
>        - Note the example was failing for *split_columns()*.
>     - *[Jan 05]*
>        - I saw the Email and did another *devtools::build_win()* with no
>        changes at all.
>        - I received the same error, but on another function, i.e.,
>        *set_missing()*.
>        - The check log is here:
>        https://win-builder.r-project.org/9bKr71mwef11/00check.log
>     - *[Jan 05]*
>        - After some investigation, I believe it is due to dependency
>        versions, so I update DESCRIPTION with latest version for all,
> including R
>        (was 3.3.0).


No, not the reason: You checked with R-devel, hence the version 
requirement is not the reason for the problems you reported above.

>        - This time the check log is showing a warning: *checking DESCRIPTION
>        meta-information ... WARNING Dependence on R version '3.4.3' not with
>        patchlevel 0*.
>        - The check log is here:
>        https://win-builder.r-project.org/5Px18P21h44a/00check.log
> 
> Has anyone encountered this issue before?


In order to get consistent binary repositories etc., we ask you to find 
proper vresion requirement with patchlevel 0, i.e. 3.3.0 or 3.4.0 if 
applicable.


Best,
Uwe Ligges



> *[Issue 2]*
> 
> Does anyone know how to remove these warnings for vignettes?
> https://cran.r-project.org/web/checks/check_results_DataExplorer.html
> They happen on the following systems:
> 
>     - r-patched-solaris-x86
>     - r-release-osx-x86_64
>     - r-oldrel-osx-x86_64
> 
> Warning message:
> 
> *Warning in engine$weave(file, quiet = quiet, encoding = enc) :*
> *     Pandoc (>= 1.12.3) and/or pandoc-citeproc not available. Falling back
> to R Markdown v1.*
> *    Warning in normalizePath(f2) :*
> *     path[1]="./webshot3eaf50bf136e.png": No such file or directory*
> *    Warning in file(con, "rb") :*
> *     cannot open file './webshot3eaf50bf136e.png': No such file or
> directory*
> *    Quitting from lines 57-68 (dataexplorer-intro.Rmd) *
> *    Error: processing vignette 'dataexplorer-intro.Rmd' failed with
> diagnostics:*
> *    cannot open the connection*
> *    Execution halted *
> 
> 
> After searching for the same warnings online, I found that vignettes (from
> other pakcages) that loads JavaScript files tend to have these. Is there a
> way to fix this?
> 
> 
> Thank you very much for your time!
> 
> 
> Best,
> Boxuan (Bo)
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ali.saeb at gmail.com  Sun Jan  7 13:21:15 2018
From: ali.saeb at gmail.com (Saeb)
Date: Sun, 7 Jan 2018 15:51:15 +0330
Subject: [R-pkg-devel] Assignments to the Global environment
In-Reply-To: <fdf61b41-1bcb-32af-e1df-ac17a737e829@statistik.tu-dortmund.de>
References: <4b16881b-5afe-5f3e-dc74-7c7eb3999f33@gmail.com>
 <FB4A2D58-7337-42D2-982C-58804C3A91B4@gmail.com>
 <fdf61b41-1bcb-32af-e1df-ac17a737e829@statistik.tu-dortmund.de>
Message-ID: <bf93dfa7-2b93-4e6d-b362-e59ea2a54a3d@gmail.com>

The function downloads the list of index's value and assigned them to 
the individual's name correspond with the indexes. If remove the 
.GlobalEnv, then we can not return the values in output.

Since, the data is updated daily, I think that the storage on device is 
not user friendly enough.

I already used the following code with same R report:

assign(as.character(s), temp3, envir = .GlobalEnv)

|
|


On 01/07/2018 01:30 AM, Uwe Ligges wrote:
> Let me add: Frequently you can use storage in an enmvironment in yur 
> package, if that helps to avoid assigning into .GlobalEnv.
>
> Best,
> Uwe Ligges
>
> On 06.01.2018 22:07, peter dalgaard wrote:
>> You probably need to tell us what you are trying to achieve. Why do 
>> you want to assign temp3 to a variable with its name in s into the 
>> global environment? Not doing that would clearly eliminate the Note:, 
>> but presumably it has a function. However, writing to the global 
>> environment, especially to variables with arbitrary names, is 
>> potentially antisocial behaviour, since it may overwrite user variables.
>>
>> Incidentally, why do you write .GlobalEnv as as.environment(1)? Is is 
>> as intended?
>>
>> -pd
>>
>>> On 6 Jan 2018, at 20:36 , Saeb <ali.saeb at gmail.com> wrote:
>>>
>>> * checking R code for possible problems ... [4s] NOTE
>>> Found the following assignments to the global environment:
>>> File 'TSEtools/R/getTSE.R':
>>> assign(as.character(s), temp3, envir = as.environment(1))
>>>
>>> Please let me know, how can I eliminate this problem? I didn't find out
>>> any good information on websites!
>>


	[[alternative HTML version deleted]]


From hugh.parsonage at gmail.com  Sun Jan  7 15:41:32 2018
From: hugh.parsonage at gmail.com (Hugh Parsonage)
Date: Mon, 8 Jan 2018 01:41:32 +1100
Subject: [R-pkg-devel] Assignments to the Global environment
In-Reply-To: <bf93dfa7-2b93-4e6d-b362-e59ea2a54a3d@gmail.com>
References: <4b16881b-5afe-5f3e-dc74-7c7eb3999f33@gmail.com>
 <FB4A2D58-7337-42D2-982C-58804C3A91B4@gmail.com>
 <fdf61b41-1bcb-32af-e1df-ac17a737e829@statistik.tu-dortmund.de>
 <bf93dfa7-2b93-4e6d-b362-e59ea2a54a3d@gmail.com>
Message-ID: <CAJmOi+NS3xPuy3Ve0f2xd2yMOxnc3+bO6v-K9bHvVa3yJU9yZA@mail.gmail.com>

I'm not CRAN, but something like this might be permissible while
satisfying your requirements.

   z <- function(..., assign.env = parent.frame(1))
assign(as.character(s), temp3, envir = assign.env)

The problem with assigning to the global environment is that z might
be called where it is expected to only have a local effect. If users
really want to assign to the global environment, providing an option
might be appropriate.

   z <- function(y, s, assign.env = getOption("TSEtools.z.env",
parent.frame(1))) assign(as.character(s), temp3, envir = assign.env)

   options("TSEtools.z.env" = .GlobalEnv)


On Sun, 7 Jan 2018 at 23:21 Saeb <ali.saeb at gmail.com> wrote:
>
> The function downloads the list of index's value and assigned them to
> the individual's name correspond with the indexes. If remove the
> .GlobalEnv, then we can not return the values in output.
>
> Since, the data is updated daily, I think that the storage on device is
> not user friendly enough.
>
> I already used the following code with same R report:
>
> assign(as.character(s), temp3, envir = .GlobalEnv)
>
> |
> |
>
>
> On 01/07/2018 01:30 AM, Uwe Ligges wrote:
> > Let me add: Frequently you can use storage in an enmvironment in yur
> > package, if that helps to avoid assigning into .GlobalEnv.
> >
> > Best,
> > Uwe Ligges
> >
> > On 06.01.2018 22:07, peter dalgaard wrote:
> >> You probably need to tell us what you are trying to achieve. Why do
> >> you want to assign temp3 to a variable with its name in s into the
> >> global environment? Not doing that would clearly eliminate the Note:,
> >> but presumably it has a function. However, writing to the global
> >> environment, especially to variables with arbitrary names, is
> >> potentially antisocial behaviour, since it may overwrite user variables.
> >>
> >> Incidentally, why do you write .GlobalEnv as as.environment(1)? Is is
> >> as intended?
> >>
> >> -pd
> >>
> >>> On 6 Jan 2018, at 20:36 , Saeb <ali.saeb at gmail.com> wrote:
> >>>
> >>> * checking R code for possible problems ... [4s] NOTE
> >>> Found the following assignments to the global environment:
> >>> File 'TSEtools/R/getTSE.R':
> >>> assign(as.character(s), temp3, envir = as.environment(1))
> >>>
> >>> Please let me know, how can I eliminate this problem? I didn't find out
> >>> any good information on websites!
> >>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ali.saeb at gmail.com  Sun Jan  7 17:36:04 2018
From: ali.saeb at gmail.com (Saeb)
Date: Sun, 7 Jan 2018 20:06:04 +0330
Subject: [R-pkg-devel] Assignments to the Global environment
In-Reply-To: <CAJmOi+NS3xPuy3Ve0f2xd2yMOxnc3+bO6v-K9bHvVa3yJU9yZA@mail.gmail.com>
References: <4b16881b-5afe-5f3e-dc74-7c7eb3999f33@gmail.com>
 <FB4A2D58-7337-42D2-982C-58804C3A91B4@gmail.com>
 <fdf61b41-1bcb-32af-e1df-ac17a737e829@statistik.tu-dortmund.de>
 <bf93dfa7-2b93-4e6d-b362-e59ea2a54a3d@gmail.com>
 <CAJmOi+NS3xPuy3Ve0f2xd2yMOxnc3+bO6v-K9bHvVa3yJU9yZA@mail.gmail.com>
Message-ID: <668b24f9-e467-f8a4-c903-27fdf0dfca61@gmail.com>

It is done. Thanks for the help!


On 01/07/2018 06:11 PM, Hugh Parsonage wrote:
> I'm not CRAN, but something like this might be permissible while
> satisfying your requirements.
>
>     z <- function(..., assign.env = parent.frame(1))
> assign(as.character(s), temp3, envir = assign.env)
>
> The problem with assigning to the global environment is that z might
> be called where it is expected to only have a local effect. If users
> really want to assign to the global environment, providing an option
> might be appropriate.
>
>     z <- function(y, s, assign.env = getOption("TSEtools.z.env",
> parent.frame(1))) assign(as.character(s), temp3, envir = assign.env)
>
>     options("TSEtools.z.env" = .GlobalEnv)
>
>
> On Sun, 7 Jan 2018 at 23:21 Saeb <ali.saeb at gmail.com> wrote:
>> The function downloads the list of index's value and assigned them to
>> the individual's name correspond with the indexes. If remove the
>> .GlobalEnv, then we can not return the values in output.
>>
>> Since, the data is updated daily, I think that the storage on device is
>> not user friendly enough.
>>
>> I already used the following code with same R report:
>>
>> assign(as.character(s), temp3, envir = .GlobalEnv)
>>
>> |
>> |
>>
>>
>> On 01/07/2018 01:30 AM, Uwe Ligges wrote:
>>> Let me add: Frequently you can use storage in an enmvironment in yur
>>> package, if that helps to avoid assigning into .GlobalEnv.
>>>
>>> Best,
>>> Uwe Ligges
>>>
>>> On 06.01.2018 22:07, peter dalgaard wrote:
>>>> You probably need to tell us what you are trying to achieve. Why do
>>>> you want to assign temp3 to a variable with its name in s into the
>>>> global environment? Not doing that would clearly eliminate the Note:,
>>>> but presumably it has a function. However, writing to the global
>>>> environment, especially to variables with arbitrary names, is
>>>> potentially antisocial behaviour, since it may overwrite user variables.
>>>>
>>>> Incidentally, why do you write .GlobalEnv as as.environment(1)? Is is
>>>> as intended?
>>>>
>>>> -pd
>>>>
>>>>> On 6 Jan 2018, at 20:36 , Saeb <ali.saeb at gmail.com> wrote:
>>>>>
>>>>> * checking R code for possible problems ... [4s] NOTE
>>>>> Found the following assignments to the global environment:
>>>>> File 'TSEtools/R/getTSE.R':
>>>>> assign(as.character(s), temp3, envir = as.environment(1))
>>>>>
>>>>> Please let me know, how can I eliminate this problem? I didn't find out
>>>>> any good information on websites!
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From boxuancui at gmail.com  Sun Jan  7 17:40:44 2018
From: boxuancui at gmail.com (Boxuan Cui)
Date: Sun, 7 Jan 2018 11:40:44 -0500
Subject: [R-pkg-devel] Help with R check
In-Reply-To: <c800cacb-a761-649a-1484-165ee68a79d5@statistik.tu-dortmund.de>
References: <CAC-fbYaVKsRpKJAbqTs2py3xHrMfL60BGm8Q2tQkb=v2d5EcXw@mail.gmail.com>
 <c800cacb-a761-649a-1484-165ee68a79d5@statistik.tu-dortmund.de>
Message-ID: <CAC-fbYZRWrCGWQ+=UZMsZDQGDQ79tBm3Y8TUffpKXWeRfF_Ufg@mail.gmail.com>

I made some updates and ran a couple of additional checks, e.g., R CMD
check --as-cran, win-builder, AppVeyor, Travis. Everything is giving me
status OK. However, when I try to resubmit my package, I get another
ERROR running
examples for arch 'i386':
https://win-builder.r-project.org/incoming_pretest/180107_170932_DataExplorer_050/00check.log

Is there a difference in configuration for the "incoming_pretest" check?
And is there a way to re-produce this error other than trying to release it?

Apologies if I am missing something obvious, and thank you!


Best,
Boxuan (Bo)

On Sat, Jan 6, 2018 at 5:11 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

>
>
> On 06.01.2018 18:36, Boxuan Cui wrote:
>
>> Hi all,
>>
>> *[Issue 1]*
>>
>> This is the first time I have encountered this, and I have no idea what's
>> going on. I really appreciate anyone's help on this.
>>
>> My package: https://cran.r-project.org/package=DataExplorer
>>
>> My story:
>>
>>     - *[Jan 01]*
>>        - I plan to release the latest version to CRAN. I ran all checks
>>        (including win-builder through *devtools::build_win()*) on my
>>        package, everything is OK, so I submitted it.
>>        - The URL for win-builder has expired, but in case you can find the
>>        check log: https://win-builder.r-project.org/D52z9NcU7633
>>        - AppVeyor build log:
>>        https://ci.appveyor.com/project/boxuancui/dataexplorer/
>> build/master.36
>>        - Travis CI build log:
>>        https://travis-ci.org/boxuancui/DataExplorer/builds/323730230
>>     - *[Jan 03]*
>>        - I was told that I need to update my MIT license file, since I
>> made
>>        some changes there. I did as told and re-submit the package. I
>> didn't
>>        change anything.
>>     - *[Jan 03 (later of the day)]*
>>        - My package is failing example checks on arch 'i386' for Windows,
>>        according to
>>        https://win-builder.r-project.org/incoming_pretest/
>> 180103_161227_DataExplorer_050/00check.log
>>        - Note the example was failing for *split_columns()*.
>>     - *[Jan 05]*
>>        - I saw the Email and did another *devtools::build_win()* with no
>>        changes at all.
>>        - I received the same error, but on another function, i.e.,
>>        *set_missing()*.
>>        - The check log is here:
>>        https://win-builder.r-project.org/9bKr71mwef11/00check.log
>>     - *[Jan 05]*
>>        - After some investigation, I believe it is due to dependency
>>        versions, so I update DESCRIPTION with latest version for all,
>> including R
>>        (was 3.3.0).
>>
>
>
> No, not the reason: You checked with R-devel, hence the version
> requirement is not the reason for the problems you reported above.
>
>        - This time the check log is showing a warning: *checking
>> DESCRIPTION
>>        meta-information ... WARNING Dependence on R version '3.4.3' not
>> with
>>        patchlevel 0*.
>>        - The check log is here:
>>        https://win-builder.r-project.org/5Px18P21h44a/00check.log
>>
>> Has anyone encountered this issue before?
>>
>
>
> In order to get consistent binary repositories etc., we ask you to find
> proper vresion requirement with patchlevel 0, i.e. 3.3.0 or 3.4.0 if
> applicable.
>
>
> Best,
> Uwe Ligges
>
>
>
> *[Issue 2]*
>>
>> Does anyone know how to remove these warnings for vignettes?
>> https://cran.r-project.org/web/checks/check_results_DataExplorer.html
>> They happen on the following systems:
>>
>>     - r-patched-solaris-x86
>>     - r-release-osx-x86_64
>>     - r-oldrel-osx-x86_64
>>
>> Warning message:
>>
>> *Warning in engine$weave(file, quiet = quiet, encoding = enc) :*
>> *     Pandoc (>= 1.12.3) and/or pandoc-citeproc not available. Falling
>> back
>> to R Markdown v1.*
>> *    Warning in normalizePath(f2) :*
>> *     path[1]="./webshot3eaf50bf136e.png": No such file or directory*
>> *    Warning in file(con, "rb") :*
>> *     cannot open file './webshot3eaf50bf136e.png': No such file or
>> directory*
>> *    Quitting from lines 57-68 (dataexplorer-intro.Rmd) *
>> *    Error: processing vignette 'dataexplorer-intro.Rmd' failed with
>> diagnostics:*
>> *    cannot open the connection*
>> *    Execution halted *
>>
>>
>> After searching for the same warnings online, I found that vignettes (from
>> other pakcages) that loads JavaScript files tend to have these. Is there a
>> way to fix this?
>>
>>
>> Thank you very much for your time!
>>
>>
>> Best,
>> Boxuan (Bo)
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>

	[[alternative HTML version deleted]]


From wdunlap at tibco.com  Sun Jan  7 18:17:31 2018
From: wdunlap at tibco.com (William Dunlap)
Date: Sun, 7 Jan 2018 09:17:31 -0800
Subject: [R-pkg-devel] Assignments to the Global environment
In-Reply-To: <CAJmOi+NS3xPuy3Ve0f2xd2yMOxnc3+bO6v-K9bHvVa3yJU9yZA@mail.gmail.com>
References: <4b16881b-5afe-5f3e-dc74-7c7eb3999f33@gmail.com>
 <FB4A2D58-7337-42D2-982C-58804C3A91B4@gmail.com>
 <fdf61b41-1bcb-32af-e1df-ac17a737e829@statistik.tu-dortmund.de>
 <bf93dfa7-2b93-4e6d-b362-e59ea2a54a3d@gmail.com>
 <CAJmOi+NS3xPuy3Ve0f2xd2yMOxnc3+bO6v-K9bHvVa3yJU9yZA@mail.gmail.com>
Message-ID: <CAF8bMcYZfjrgNPPnQY7aZTpnv4j=8CdBgT1wxLxyA3jfrOmcjQ@mail.gmail.com>

I think that assigning something to parent.frame() is bad practice, for the
same reasons that assigning to .GlobalEnv is bad.  You could instead make
an environment in your package called, say, "TSEtools.env", with
    TSETools.env <- new.env()
in some *.R file in the package's R directory.  Export it via NAMESPACE.
 Then use
TSETools.env as the default value of assign.env().



Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Sun, Jan 7, 2018 at 6:41 AM, Hugh Parsonage <hugh.parsonage at gmail.com>
wrote:

> I'm not CRAN, but something like this might be permissible while
> satisfying your requirements.
>
>    z <- function(..., assign.env = parent.frame(1))
> assign(as.character(s), temp3, envir = assign.env)
>
> The problem with assigning to the global environment is that z might
> be called where it is expected to only have a local effect. If users
> really want to assign to the global environment, providing an option
> might be appropriate.
>
>    z <- function(y, s, assign.env = getOption("TSEtools.z.env",
> parent.frame(1))) assign(as.character(s), temp3, envir = assign.env)
>
>    options("TSEtools.z.env" = .GlobalEnv)
>
>
> On Sun, 7 Jan 2018 at 23:21 Saeb <ali.saeb at gmail.com> wrote:
> >
> > The function downloads the list of index's value and assigned them to
> > the individual's name correspond with the indexes. If remove the
> > .GlobalEnv, then we can not return the values in output.
> >
> > Since, the data is updated daily, I think that the storage on device is
> > not user friendly enough.
> >
> > I already used the following code with same R report:
> >
> > assign(as.character(s), temp3, envir = .GlobalEnv)
> >
> > |
> > |
> >
> >
> > On 01/07/2018 01:30 AM, Uwe Ligges wrote:
> > > Let me add: Frequently you can use storage in an enmvironment in yur
> > > package, if that helps to avoid assigning into .GlobalEnv.
> > >
> > > Best,
> > > Uwe Ligges
> > >
> > > On 06.01.2018 22:07, peter dalgaard wrote:
> > >> You probably need to tell us what you are trying to achieve. Why do
> > >> you want to assign temp3 to a variable with its name in s into the
> > >> global environment? Not doing that would clearly eliminate the Note:,
> > >> but presumably it has a function. However, writing to the global
> > >> environment, especially to variables with arbitrary names, is
> > >> potentially antisocial behaviour, since it may overwrite user
> variables.
> > >>
> > >> Incidentally, why do you write .GlobalEnv as as.environment(1)? Is is
> > >> as intended?
> > >>
> > >> -pd
> > >>
> > >>> On 6 Jan 2018, at 20:36 , Saeb <ali.saeb at gmail.com> wrote:
> > >>>
> > >>> * checking R code for possible problems ... [4s] NOTE
> > >>> Found the following assignments to the global environment:
> > >>> File 'TSEtools/R/getTSE.R':
> > >>> assign(as.character(s), temp3, envir = as.environment(1))
> > >>>
> > >>> Please let me know, how can I eliminate this problem? I didn't find
> out
> > >>> any good information on websites!
> > >>
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Sun Jan  7 18:37:46 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 7 Jan 2018 12:37:46 -0500
Subject: [R-pkg-devel] Assignments to the Global environment
In-Reply-To: <CAF8bMcYZfjrgNPPnQY7aZTpnv4j=8CdBgT1wxLxyA3jfrOmcjQ@mail.gmail.com>
References: <4b16881b-5afe-5f3e-dc74-7c7eb3999f33@gmail.com>
 <FB4A2D58-7337-42D2-982C-58804C3A91B4@gmail.com>
 <fdf61b41-1bcb-32af-e1df-ac17a737e829@statistik.tu-dortmund.de>
 <bf93dfa7-2b93-4e6d-b362-e59ea2a54a3d@gmail.com>
 <CAJmOi+NS3xPuy3Ve0f2xd2yMOxnc3+bO6v-K9bHvVa3yJU9yZA@mail.gmail.com>
 <CAF8bMcYZfjrgNPPnQY7aZTpnv4j=8CdBgT1wxLxyA3jfrOmcjQ@mail.gmail.com>
Message-ID: <ac322eb9-8b94-0ede-5852-28b9c4ff1793@gmail.com>

On 07/01/2018 12:17 PM, William Dunlap wrote:
> I think that assigning something to parent.frame() is bad practice, for the
> same reasons that assigning to .GlobalEnv is bad.  You could instead make
> an environment in your package called, say, "TSEtools.env", with
>      TSETools.env <- new.env()
> in some *.R file in the package's R directory.  Export it via NAMESPACE.
>   Then use
> TSETools.env as the default value of assign.env().

Yes, that's one way to do what Saeb wants.

Another way is to define the relevant functions as local functions, and 
do the assignment in their environment.  For example,

fns <- local({
   s <- NULL
   saveS <- function( newSval ) {
     s <<- newSval
   }
   showS <- function() s
   list(saveS, showS)
})
saveS <- fns[[1]]
showS <- fns[[2]]

saveS(123)
showS()

which will return the saved value at the end.

As a general principle, writing into the global environment should 
almost never be allowed.

Duncan
> 
> 
> 
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
> 
> On Sun, Jan 7, 2018 at 6:41 AM, Hugh Parsonage <hugh.parsonage at gmail.com>
> wrote:
> 
>> I'm not CRAN, but something like this might be permissible while
>> satisfying your requirements.
>>
>>     z <- function(..., assign.env = parent.frame(1))
>> assign(as.character(s), temp3, envir = assign.env)
>>
>> The problem with assigning to the global environment is that z might
>> be called where it is expected to only have a local effect. If users
>> really want to assign to the global environment, providing an option
>> might be appropriate.
>>
>>     z <- function(y, s, assign.env = getOption("TSEtools.z.env",
>> parent.frame(1))) assign(as.character(s), temp3, envir = assign.env)
>>
>>     options("TSEtools.z.env" = .GlobalEnv)
>>
>>
>> On Sun, 7 Jan 2018 at 23:21 Saeb <ali.saeb at gmail.com> wrote:
>>>
>>> The function downloads the list of index's value and assigned them to
>>> the individual's name correspond with the indexes. If remove the
>>> .GlobalEnv, then we can not return the values in output.
>>>
>>> Since, the data is updated daily, I think that the storage on device is
>>> not user friendly enough.
>>>
>>> I already used the following code with same R report:
>>>
>>> assign(as.character(s), temp3, envir = .GlobalEnv)
>>>
>>> |
>>> |
>>>
>>>
>>> On 01/07/2018 01:30 AM, Uwe Ligges wrote:
>>>> Let me add: Frequently you can use storage in an enmvironment in yur
>>>> package, if that helps to avoid assigning into .GlobalEnv.
>>>>
>>>> Best,
>>>> Uwe Ligges
>>>>
>>>> On 06.01.2018 22:07, peter dalgaard wrote:
>>>>> You probably need to tell us what you are trying to achieve. Why do
>>>>> you want to assign temp3 to a variable with its name in s into the
>>>>> global environment? Not doing that would clearly eliminate the Note:,
>>>>> but presumably it has a function. However, writing to the global
>>>>> environment, especially to variables with arbitrary names, is
>>>>> potentially antisocial behaviour, since it may overwrite user
>> variables.
>>>>>
>>>>> Incidentally, why do you write .GlobalEnv as as.environment(1)? Is is
>>>>> as intended?
>>>>>
>>>>> -pd
>>>>>
>>>>>> On 6 Jan 2018, at 20:36 , Saeb <ali.saeb at gmail.com> wrote:
>>>>>>
>>>>>> * checking R code for possible problems ... [4s] NOTE
>>>>>> Found the following assignments to the global environment:
>>>>>> File 'TSEtools/R/getTSE.R':
>>>>>> assign(as.character(s), temp3, envir = as.environment(1))
>>>>>>
>>>>>> Please let me know, how can I eliminate this problem? I didn't find
>> out
>>>>>> any good information on websites!
>>>>>
>>>
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From roy.mendelssohn at noaa.gov  Mon Jan  8 16:31:56 2018
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Mon, 8 Jan 2018 07:31:56 -0800
Subject: [R-pkg-devel] Fixed for messages
Message-ID: <61254538-55C4-417A-9D61-1D41130649BC@noaa.gov>

Hi All:

In tesitng a package on winbuild-devel (but not on release)  I get the following errors or warnings:

> Warning in engine$weave(file, quiet = quiet, encoding = enc) :
>   The vignette engine knitr::rmarkdown is not available, because the rmarkdown package is not installed. Please install it.
> 

There was an email about this a few days ago,  but then,  as now,  it is not clear to me specifically what I need to do where so that I don't get this warning.  Do I need to include rmarkdown in the Suggests,  or do I need to do something specific in the Vignette.  Or is this just a question that winbuild hasn't installed it yet in the development version and I can ignore it for now?

Also I am getting this error (again only in the development version):

> Error: processing vignette 'Usingxtractomatic.Rmd' failed with diagnostics:
> there is no package called 'webshot'
> 



Now I don't explicitly use a package called 'webshot',  but the lines referenced in the error message are:

> require("DT")
> DT::datatable(searchResult)
> 

where "searchResult" is just a list.   DT itself does not explicitly import "webshot" either.  

I would like to submit this package,  but I don't want to submit with any errors or warnings. Again,  I only get these on winbuild-devel.

Thanks for any help.

-Roy




**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From henrik.bengtsson at gmail.com  Mon Jan  8 17:32:27 2018
From: henrik.bengtsson at gmail.com (Henrik Bengtsson)
Date: Mon, 8 Jan 2018 08:32:27 -0800
Subject: [R-pkg-devel] Fixed for messages
In-Reply-To: <61254538-55C4-417A-9D61-1D41130649BC@noaa.gov>
References: <61254538-55C4-417A-9D61-1D41130649BC@noaa.gov>
Message-ID: <CAFDcVCQCEMU4d8wHiP+VSrQ-nezjXvBMMz1EgcPF8EBmELun0w@mail.gmail.com>

On Mon, Jan 8, 2018 at 7:31 AM, Roy Mendelssohn - NOAA Federal
<roy.mendelssohn at noaa.gov> wrote:
> Hi All:
>
> In tesitng a package on winbuild-devel (but not on release)  I get the following errors or warnings:
>
>> Warning in engine$weave(file, quiet = quiet, encoding = enc) :
>>   The vignette engine knitr::rmarkdown is not available, because the rmarkdown package is not installed. Please install it.
>>
>
> There was an email about this a few days ago,  but then,  as now,  it is not clear to me specifically what I need to do where so that I don't get this warning.  Do I need to include rmarkdown in the Suggests,

Yes, add it to Suggests.

  or do I need to do something specific in the Vignette.  Or is this
just a question that winbuild hasn't installed it yet in the
development version and I can ignore it for now?
>
> Also I am getting this error (again only in the development version):
>
>> Error: processing vignette 'Usingxtractomatic.Rmd' failed with diagnostics:
>> there is no package called 'webshot'
>>
>
>
>
> Now I don't explicitly use a package called 'webshot',  but the lines referenced in the error message are:
>
>> require("DT")
>> DT::datatable(searchResult)
>>
>
> where "searchResult" is just a list.   DT itself does not explicitly import "webshot" either.

It most likely depend on 'webshot' indirectly through some of your
package dependencies.  So, add this one too to Suggests.

As far as I understand it, the new R-devel tests basically tests your
package with the minimal setup of packages (a "sandboxed" .libPaths())
inferred from you DESCRIPTION (by excluding Suggests of the packages
you depend on, which is where I think 'webshot' lives).

/Henrik

>
> I would like to submit this package,  but I don't want to submit with any errors or warnings. Again,  I only get these on winbuild-devel.
>
> Thanks for any help.
>
> -Roy
>
>
>
>
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From roy.mendelssohn at noaa.gov  Mon Jan  8 17:40:08 2018
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Mon, 8 Jan 2018 08:40:08 -0800
Subject: [R-pkg-devel] Fixed for messages
In-Reply-To: <CAFDcVCQCEMU4d8wHiP+VSrQ-nezjXvBMMz1EgcPF8EBmELun0w@mail.gmail.com>
References: <61254538-55C4-417A-9D61-1D41130649BC@noaa.gov>
 <CAFDcVCQCEMU4d8wHiP+VSrQ-nezjXvBMMz1EgcPF8EBmELun0w@mail.gmail.com>
Message-ID: <871EC5F1-9672-4C7E-B2D9-9A11CB13C834@noaa.gov>

Thanks Henrik:

I am a little slow,  I want to make certain I do this correctly.  I already have knitr in my Suggests,  and the message is:

>>> knitr::rmarkdown

So do I put in my Suggests list  rmarkdown or knitr::rmarkdown

And most importantly,  thanks for the explanation about what is happening with R-devel.  Of the responses I have seen,  it is the first one (at least to me) that is clear what is going on to cause the errors,  and how to approach correcting them.  

-Roy





> On Jan 8, 2018, at 8:32 AM, Henrik Bengtsson <henrik.bengtsson at gmail.com> wrote:
> 
> On Mon, Jan 8, 2018 at 7:31 AM, Roy Mendelssohn - NOAA Federal
> <roy.mendelssohn at noaa.gov> wrote:
>> Hi All:
>> 
>> In tesitng a package on winbuild-devel (but not on release)  I get the following errors or warnings:
>> 
>>> Warning in engine$weave(file, quiet = quiet, encoding = enc) :
>>>  The vignette engine knitr::rmarkdown is not available, because the rmarkdown package is not installed. Please install it.
>>> 
>> 
>> There was an email about this a few days ago,  but then,  as now,  it is not clear to me specifically what I need to do where so that I don't get this warning.  Do I need to include rmarkdown in the Suggests,
> 
> Yes, add it to Suggests.
> 
>  or do I need to do something specific in the Vignette.  Or is this
> just a question that winbuild hasn't installed it yet in the
> development version and I can ignore it for now?
>> 
>> Also I am getting this error (again only in the development version):
>> 
>>> Error: processing vignette 'Usingxtractomatic.Rmd' failed with diagnostics:
>>> there is no package called 'webshot'
>>> 
>> 
>> 
>> 
>> Now I don't explicitly use a package called 'webshot',  but the lines referenced in the error message are:
>> 
>>> require("DT")
>>> DT::datatable(searchResult)
>>> 
>> 
>> where "searchResult" is just a list.   DT itself does not explicitly import "webshot" either.
> 
> It most likely depend on 'webshot' indirectly through some of your
> package dependencies.  So, add this one too to Suggests.
> 
> As far as I understand it, the new R-devel tests basically tests your
> package with the minimal setup of packages (a "sandboxed" .libPaths())
> inferred from you DESCRIPTION (by excluding Suggests of the packages
> you depend on, which is where I think 'webshot' lives).
> 
> /Henrik
> 
>> 
>> I would like to submit this package,  but I don't want to submit with any errors or warnings. Again,  I only get these on winbuild-devel.
>> 
>> Thanks for any help.
>> 
>> -Roy
>> 
>> 
>> 
>> 
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>> 
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected"
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From thierry.onkelinx at inbo.be  Mon Jan  8 18:17:07 2018
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Mon, 8 Jan 2018 18:17:07 +0100
Subject: [R-pkg-devel] Fixed for messages
In-Reply-To: <871EC5F1-9672-4C7E-B2D9-9A11CB13C834@noaa.gov>
References: <61254538-55C4-417A-9D61-1D41130649BC@noaa.gov>
 <CAFDcVCQCEMU4d8wHiP+VSrQ-nezjXvBMMz1EgcPF8EBmELun0w@mail.gmail.com>
 <871EC5F1-9672-4C7E-B2D9-9A11CB13C834@noaa.gov>
Message-ID: <CAJuCY5xEUZSvQfRBcpLBYHFr6GVbQnBeRmh8i8=D=AwOQ1W+cw@mail.gmail.com>

Dear Roy,

Make sure that in DESCRIPTION you have at least

Suggests: knitr, rmarkdown
VignetteBuilder: knitr

The vignette requires

%\VignetteEngine{knitr::rmarkdown}

webshot is used by rmarkdown or knitr to convert dynamic HTML output
to a static image when the output is not HTML. Are you using pdf as
output format for the vignette? Consider using
rmarkdown::html_vignette.

Best regards,

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
AND FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no
more than asking him to perform a post-mortem examination: he may be
able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does
not ensure that a reasonable answer can be extracted from a given body
of data. ~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////




2018-01-08 17:40 GMT+01:00 Roy Mendelssohn - NOAA Federal
<roy.mendelssohn at noaa.gov>:
> Thanks Henrik:
>
> I am a little slow,  I want to make certain I do this correctly.  I already have knitr in my Suggests,  and the message is:
>
>>>> knitr::rmarkdown
>
> So do I put in my Suggests list  rmarkdown or knitr::rmarkdown
>
> And most importantly,  thanks for the explanation about what is happening with R-devel.  Of the responses I have seen,  it is the first one (at least to me) that is clear what is going on to cause the errors,  and how to approach correcting them.
>
> -Roy
>
>
>
>
>
>> On Jan 8, 2018, at 8:32 AM, Henrik Bengtsson <henrik.bengtsson at gmail.com> wrote:
>>
>> On Mon, Jan 8, 2018 at 7:31 AM, Roy Mendelssohn - NOAA Federal
>> <roy.mendelssohn at noaa.gov> wrote:
>>> Hi All:
>>>
>>> In tesitng a package on winbuild-devel (but not on release)  I get the following errors or warnings:
>>>
>>>> Warning in engine$weave(file, quiet = quiet, encoding = enc) :
>>>>  The vignette engine knitr::rmarkdown is not available, because the rmarkdown package is not installed. Please install it.
>>>>
>>>
>>> There was an email about this a few days ago,  but then,  as now,  it is not clear to me specifically what I need to do where so that I don't get this warning.  Do I need to include rmarkdown in the Suggests,
>>
>> Yes, add it to Suggests.
>>
>>  or do I need to do something specific in the Vignette.  Or is this
>> just a question that winbuild hasn't installed it yet in the
>> development version and I can ignore it for now?
>>>
>>> Also I am getting this error (again only in the development version):
>>>
>>>> Error: processing vignette 'Usingxtractomatic.Rmd' failed with diagnostics:
>>>> there is no package called 'webshot'
>>>>
>>>
>>>
>>>
>>> Now I don't explicitly use a package called 'webshot',  but the lines referenced in the error message are:
>>>
>>>> require("DT")
>>>> DT::datatable(searchResult)
>>>>
>>>
>>> where "searchResult" is just a list.   DT itself does not explicitly import "webshot" either.
>>
>> It most likely depend on 'webshot' indirectly through some of your
>> package dependencies.  So, add this one too to Suggests.
>>
>> As far as I understand it, the new R-devel tests basically tests your
>> package with the minimal setup of packages (a "sandboxed" .libPaths())
>> inferred from you DESCRIPTION (by excluding Suggests of the packages
>> you depend on, which is where I think 'webshot' lives).
>>
>> /Henrik
>>
>>>
>>> I would like to submit this package,  but I don't want to submit with any errors or warnings. Again,  I only get these on winbuild-devel.
>>>
>>> Thanks for any help.
>>>
>>> -Roy
>>>
>>>
>>>
>>>
>>> **********************
>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>> **********************
>>> Roy Mendelssohn
>>> Supervisory Operations Research Analyst
>>> NOAA/NMFS
>>> Environmental Research Division
>>> Southwest Fisheries Science Center
>>> ***Note new street address***
>>> 110 McAllister Way
>>> Santa Cruz, CA 95060
>>> Phone: (831)-420-3666
>>> Fax: (831) 420-3980
>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>>
>>> "Old age and treachery will overcome youth and skill."
>>> "From those who have been given much, much will be expected"
>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From roy.mendelssohn at noaa.gov  Mon Jan  8 18:28:29 2018
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Mon, 8 Jan 2018 09:28:29 -0800
Subject: [R-pkg-devel] Fixed for messages
In-Reply-To: <CAJuCY5xEUZSvQfRBcpLBYHFr6GVbQnBeRmh8i8=D=AwOQ1W+cw@mail.gmail.com>
References: <61254538-55C4-417A-9D61-1D41130649BC@noaa.gov>
 <CAFDcVCQCEMU4d8wHiP+VSrQ-nezjXvBMMz1EgcPF8EBmELun0w@mail.gmail.com>
 <871EC5F1-9672-4C7E-B2D9-9A11CB13C834@noaa.gov>
 <CAJuCY5xEUZSvQfRBcpLBYHFr6GVbQnBeRmh8i8=D=AwOQ1W+cw@mail.gmail.com>
Message-ID: <199936D9-17E9-4807-BDC7-8802BBD027EC@noaa.gov>

Thanks.  What I have at the top of my Vignette is:

> output: 
> rmarkdown::html_vignette: default
> 
> vignette: >
>   %\VignetteIndexEntry{Usingxtractomatic}
>   %\VignetteEngine{knitr::rmarkdown}
>   \usepackage[utf8]{inputenc}
> ---
> 

It is based on the template in RStudio when you choose a vignette as the file.  I have added rmarkdown as well as webshot to my suggests,  and sent to win-builder-devel,  will see what happens.

Thanks,

-Roy



> On Jan 8, 2018, at 9:17 AM, Thierry Onkelinx <thierry.onkelinx at inbo.be> wrote:
> 
> Dear Roy,
> 
> Make sure that in DESCRIPTION you have at least
> 
> Suggests: knitr, rmarkdown
> VignetteBuilder: knitr
> 
> The vignette requires
> 
> %\VignetteEngine{knitr::rmarkdown}
> 
> webshot is used by rmarkdown or knitr to convert dynamic HTML output
> to a static image when the output is not HTML. Are you using pdf as
> output format for the vignette? Consider using
> rmarkdown::html_vignette.
> 
> Best regards,
> 
> ir. Thierry Onkelinx
> Statisticus / Statistician
> 
> Vlaamse Overheid / Government of Flanders
> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
> AND FOREST
> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
> thierry.onkelinx at inbo.be
> Havenlaan 88 bus 73, 1000 Brussel
> www.inbo.be
> 
> ///////////////////////////////////////////////////////////////////////////////////////////
> To call in the statistician after the experiment is done may be no
> more than asking him to perform a post-mortem examination: he may be
> able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
> The plural of anecdote is not data. ~ Roger Brinner
> The combination of some data and an aching desire for an answer does
> not ensure that a reasonable answer can be extracted from a given body
> of data. ~ John Tukey
> ///////////////////////////////////////////////////////////////////////////////////////////
> 
> 
> 
> 
> 2018-01-08 17:40 GMT+01:00 Roy Mendelssohn - NOAA Federal
> <roy.mendelssohn at noaa.gov>:
>> Thanks Henrik:
>> 
>> I am a little slow,  I want to make certain I do this correctly.  I already have knitr in my Suggests,  and the message is:
>> 
>>>>> knitr::rmarkdown
>> 
>> So do I put in my Suggests list  rmarkdown or knitr::rmarkdown
>> 
>> And most importantly,  thanks for the explanation about what is happening with R-devel.  Of the responses I have seen,  it is the first one (at least to me) that is clear what is going on to cause the errors,  and how to approach correcting them.
>> 
>> -Roy
>> 
>> 
>> 
>> 
>> 
>>> On Jan 8, 2018, at 8:32 AM, Henrik Bengtsson <henrik.bengtsson at gmail.com> wrote:
>>> 
>>> On Mon, Jan 8, 2018 at 7:31 AM, Roy Mendelssohn - NOAA Federal
>>> <roy.mendelssohn at noaa.gov> wrote:
>>>> Hi All:
>>>> 
>>>> In tesitng a package on winbuild-devel (but not on release)  I get the following errors or warnings:
>>>> 
>>>>> Warning in engine$weave(file, quiet = quiet, encoding = enc) :
>>>>> The vignette engine knitr::rmarkdown is not available, because the rmarkdown package is not installed. Please install it.
>>>>> 
>>>> 
>>>> There was an email about this a few days ago,  but then,  as now,  it is not clear to me specifically what I need to do where so that I don't get this warning.  Do I need to include rmarkdown in the Suggests,
>>> 
>>> Yes, add it to Suggests.
>>> 
>>> or do I need to do something specific in the Vignette.  Or is this
>>> just a question that winbuild hasn't installed it yet in the
>>> development version and I can ignore it for now?
>>>> 
>>>> Also I am getting this error (again only in the development version):
>>>> 
>>>>> Error: processing vignette 'Usingxtractomatic.Rmd' failed with diagnostics:
>>>>> there is no package called 'webshot'
>>>>> 
>>>> 
>>>> 
>>>> 
>>>> Now I don't explicitly use a package called 'webshot',  but the lines referenced in the error message are:
>>>> 
>>>>> require("DT")
>>>>> DT::datatable(searchResult)
>>>>> 
>>>> 
>>>> where "searchResult" is just a list.   DT itself does not explicitly import "webshot" either.
>>> 
>>> It most likely depend on 'webshot' indirectly through some of your
>>> package dependencies.  So, add this one too to Suggests.
>>> 
>>> As far as I understand it, the new R-devel tests basically tests your
>>> package with the minimal setup of packages (a "sandboxed" .libPaths())
>>> inferred from you DESCRIPTION (by excluding Suggests of the packages
>>> you depend on, which is where I think 'webshot' lives).
>>> 
>>> /Henrik
>>> 
>>>> 
>>>> I would like to submit this package,  but I don't want to submit with any errors or warnings. Again,  I only get these on winbuild-devel.
>>>> 
>>>> Thanks for any help.
>>>> 
>>>> -Roy
>>>> 
>>>> 
>>>> 
>>>> 
>>>> **********************
>>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>>> **********************
>>>> Roy Mendelssohn
>>>> Supervisory Operations Research Analyst
>>>> NOAA/NMFS
>>>> Environmental Research Division
>>>> Southwest Fisheries Science Center
>>>> ***Note new street address***
>>>> 110 McAllister Way
>>>> Santa Cruz, CA 95060
>>>> Phone: (831)-420-3666
>>>> Fax: (831) 420-3980
>>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>>> 
>>>> "Old age and treachery will overcome youth and skill."
>>>> "From those who have been given much, much will be expected"
>>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>>> 
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>> 
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected"
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From roy.mendelssohn at noaa.gov  Mon Jan  8 20:17:30 2018
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Mon, 8 Jan 2018 11:17:30 -0800
Subject: [R-pkg-devel] Fixed for messages
In-Reply-To: <199936D9-17E9-4807-BDC7-8802BBD027EC@noaa.gov>
References: <61254538-55C4-417A-9D61-1D41130649BC@noaa.gov>
 <CAFDcVCQCEMU4d8wHiP+VSrQ-nezjXvBMMz1EgcPF8EBmELun0w@mail.gmail.com>
 <871EC5F1-9672-4C7E-B2D9-9A11CB13C834@noaa.gov>
 <CAJuCY5xEUZSvQfRBcpLBYHFr6GVbQnBeRmh8i8=D=AwOQ1W+cw@mail.gmail.com>
 <199936D9-17E9-4807-BDC7-8802BBD027EC@noaa.gov>
Message-ID: <A42D09C6-0F33-4E10-AD4F-C3EF57DEFED4@noaa.gov>

Just to complete the record,  the suggested fixes did indeed fix things, and as I said Henrik provided a clear explanation of why the results are different in R-devel.

Thanks again,

-Roy



> On Jan 8, 2018, at 9:28 AM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
> 
> Thanks.  What I have at the top of my Vignette is:
> 
>> output: 
>> rmarkdown::html_vignette: default
>> 
>> vignette: >
>>  %\VignetteIndexEntry{Usingxtractomatic}
>>  %\VignetteEngine{knitr::rmarkdown}
>>  \usepackage[utf8]{inputenc}
>> ---
>> 
> 
> It is based on the template in RStudio when you choose a vignette as the file.  I have added rmarkdown as well as webshot to my suggests,  and sent to win-builder-devel,  will see what happens.
> 
> Thanks,
> 
> -Roy
> 
> 
> 
>> On Jan 8, 2018, at 9:17 AM, Thierry Onkelinx <thierry.onkelinx at inbo.be> wrote:
>> 
>> Dear Roy,
>> 
>> Make sure that in DESCRIPTION you have at least
>> 
>> Suggests: knitr, rmarkdown
>> VignetteBuilder: knitr
>> 
>> The vignette requires
>> 
>> %\VignetteEngine{knitr::rmarkdown}
>> 
>> webshot is used by rmarkdown or knitr to convert dynamic HTML output
>> to a static image when the output is not HTML. Are you using pdf as
>> output format for the vignette? Consider using
>> rmarkdown::html_vignette.
>> 
>> Best regards,
>> 
>> ir. Thierry Onkelinx
>> Statisticus / Statistician
>> 
>> Vlaamse Overheid / Government of Flanders
>> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
>> AND FOREST
>> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
>> thierry.onkelinx at inbo.be
>> Havenlaan 88 bus 73, 1000 Brussel
>> www.inbo.be
>> 
>> ///////////////////////////////////////////////////////////////////////////////////////////
>> To call in the statistician after the experiment is done may be no
>> more than asking him to perform a post-mortem examination: he may be
>> able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
>> The plural of anecdote is not data. ~ Roger Brinner
>> The combination of some data and an aching desire for an answer does
>> not ensure that a reasonable answer can be extracted from a given body
>> of data. ~ John Tukey
>> ///////////////////////////////////////////////////////////////////////////////////////////
>> 
>> 
>> 
>> 
>> 2018-01-08 17:40 GMT+01:00 Roy Mendelssohn - NOAA Federal
>> <roy.mendelssohn at noaa.gov>:
>>> Thanks Henrik:
>>> 
>>> I am a little slow,  I want to make certain I do this correctly.  I already have knitr in my Suggests,  and the message is:
>>> 
>>>>>> knitr::rmarkdown
>>> 
>>> So do I put in my Suggests list  rmarkdown or knitr::rmarkdown
>>> 
>>> And most importantly,  thanks for the explanation about what is happening with R-devel.  Of the responses I have seen,  it is the first one (at least to me) that is clear what is going on to cause the errors,  and how to approach correcting them.
>>> 
>>> -Roy
>>> 
>>> 
>>> 
>>> 
>>> 
>>>> On Jan 8, 2018, at 8:32 AM, Henrik Bengtsson <henrik.bengtsson at gmail.com> wrote:
>>>> 
>>>> On Mon, Jan 8, 2018 at 7:31 AM, Roy Mendelssohn - NOAA Federal
>>>> <roy.mendelssohn at noaa.gov> wrote:
>>>>> Hi All:
>>>>> 
>>>>> In tesitng a package on winbuild-devel (but not on release)  I get the following errors or warnings:
>>>>> 
>>>>>> Warning in engine$weave(file, quiet = quiet, encoding = enc) :
>>>>>> The vignette engine knitr::rmarkdown is not available, because the rmarkdown package is not installed. Please install it.
>>>>>> 
>>>>> 
>>>>> There was an email about this a few days ago,  but then,  as now,  it is not clear to me specifically what I need to do where so that I don't get this warning.  Do I need to include rmarkdown in the Suggests,
>>>> 
>>>> Yes, add it to Suggests.
>>>> 
>>>> or do I need to do something specific in the Vignette.  Or is this
>>>> just a question that winbuild hasn't installed it yet in the
>>>> development version and I can ignore it for now?
>>>>> 
>>>>> Also I am getting this error (again only in the development version):
>>>>> 
>>>>>> Error: processing vignette 'Usingxtractomatic.Rmd' failed with diagnostics:
>>>>>> there is no package called 'webshot'
>>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> Now I don't explicitly use a package called 'webshot',  but the lines referenced in the error message are:
>>>>> 
>>>>>> require("DT")
>>>>>> DT::datatable(searchResult)
>>>>>> 
>>>>> 
>>>>> where "searchResult" is just a list.   DT itself does not explicitly import "webshot" either.
>>>> 
>>>> It most likely depend on 'webshot' indirectly through some of your
>>>> package dependencies.  So, add this one too to Suggests.
>>>> 
>>>> As far as I understand it, the new R-devel tests basically tests your
>>>> package with the minimal setup of packages (a "sandboxed" .libPaths())
>>>> inferred from you DESCRIPTION (by excluding Suggests of the packages
>>>> you depend on, which is where I think 'webshot' lives).
>>>> 
>>>> /Henrik
>>>> 
>>>>> 
>>>>> I would like to submit this package,  but I don't want to submit with any errors or warnings. Again,  I only get these on winbuild-devel.
>>>>> 
>>>>> Thanks for any help.
>>>>> 
>>>>> -Roy
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> **********************
>>>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>>>> **********************
>>>>> Roy Mendelssohn
>>>>> Supervisory Operations Research Analyst
>>>>> NOAA/NMFS
>>>>> Environmental Research Division
>>>>> Southwest Fisheries Science Center
>>>>> ***Note new street address***
>>>>> 110 McAllister Way
>>>>> Santa Cruz, CA 95060
>>>>> Phone: (831)-420-3666
>>>>> Fax: (831) 420-3980
>>>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>>>> 
>>>>> "Old age and treachery will overcome youth and skill."
>>>>> "From those who have been given much, much will be expected"
>>>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>>>> 
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> 
>>> **********************
>>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>>> **********************
>>> Roy Mendelssohn
>>> Supervisory Operations Research Analyst
>>> NOAA/NMFS
>>> Environmental Research Division
>>> Southwest Fisheries Science Center
>>> ***Note new street address***
>>> 110 McAllister Way
>>> Santa Cruz, CA 95060
>>> Phone: (831)-420-3666
>>> Fax: (831) 420-3980
>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>> 
>>> "Old age and treachery will overcome youth and skill."
>>> "From those who have been given much, much will be expected"
>>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected" 
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From hugh.parsonage at gmail.com  Tue Jan  9 03:25:29 2018
From: hugh.parsonage at gmail.com (Hugh Parsonage)
Date: Tue, 9 Jan 2018 13:25:29 +1100
Subject: [R-pkg-devel] CRAN policy on binary submission
Message-ID: <CAJmOi+NrkyAwN_9tSm42srhs06yzA2opmCMLwS-Q5n_FcY_zXw@mail.gmail.com>

On https://cran.r-project.org/ , it says

> Note that we generally do not accept submissions of precompiled binaries due to security reasons

I note it says 'generally', not 'always'. Are there any packages on
CRAN which were submitted as precompiled binaries? Under what
circumstances would CRAN accept binaries?


Hugh


From mark.vanderloo at gmail.com  Tue Jan  9 07:18:37 2018
From: mark.vanderloo at gmail.com (Mark van der Loo)
Date: Tue, 09 Jan 2018 06:18:37 +0000
Subject: [R-pkg-devel] CRAN policy on binary submission
In-Reply-To: <CAJmOi+NrkyAwN_9tSm42srhs06yzA2opmCMLwS-Q5n_FcY_zXw@mail.gmail.com>
References: <CAJmOi+NrkyAwN_9tSm42srhs06yzA2opmCMLwS-Q5n_FcY_zXw@mail.gmail.com>
Message-ID: <CAOKDuOg7u2+VsQnMrHt5PY=RumdaqJDTMa40mtL4CY3u4n7ncg@mail.gmail.com>

Dear Hugh, this question was asked earlier on this list:
http://r.789695.n4.nabble.com/executable-files-R-package-td4390488.html

See especially the answer of Duncan Murdoch.

Best,
Mark

Op di 9 jan. 2018 om 03:26 schreef Hugh Parsonage <hugh.parsonage at gmail.com
>:

> On https://cran.r-project.org/ , it says
>
> > Note that we generally do not accept submissions of precompiled binaries
> due to security reasons
>
> I note it says 'generally', not 'always'. Are there any packages on
> CRAN which were submitted as precompiled binaries? Under what
> circumstances would CRAN accept binaries?
>
>
> Hugh
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Tue Jan  9 09:18:54 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 9 Jan 2018 09:18:54 +0100
Subject: [R-pkg-devel] CRAN policy on binary submission
In-Reply-To: <CAJmOi+NrkyAwN_9tSm42srhs06yzA2opmCMLwS-Q5n_FcY_zXw@mail.gmail.com>
References: <CAJmOi+NrkyAwN_9tSm42srhs06yzA2opmCMLwS-Q5n_FcY_zXw@mail.gmail.com>
Message-ID: <bdb40db1-21d1-a91a-ab5b-f6b4f1a4bf04@statistik.tu-dortmund.de>



On 09.01.2018 03:25, Hugh Parsonage wrote:
> On https://cran.r-project.org/ , it says
> 
>> Note that we generally do not accept submissions of precompiled binaries due to security reasons
> 
> I note it says 'generally', not 'always'. Are there any packages on
> CRAN which were submitted as precompiled binaries? 

No.

> Under what
> circumstances would CRAN accept binaries?


Not at all.

Best,
Uwe Ligges

> 
> Hugh
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From luca.cerone at gmail.com  Tue Jan  9 09:22:03 2018
From: luca.cerone at gmail.com (Luca Cerone)
Date: Tue, 9 Jan 2018 09:22:03 +0100
Subject: [R-pkg-devel] Fwd: [CRAN-pretest-archived] CRAN submission
	simpleroptions 0.2.0
In-Reply-To: <01d388d0$Blat.v2.2.2$16b4ec34@mail.statistik.tu-dortmund.de>
References: <20180108222236.0BC6516419A@xmpalantir.wu.ac.at>
 <01d388d0$Blat.v2.2.2$16b4ec34@mail.statistik.tu-dortmund.de>
Message-ID: <CAFnz2-8vcfCd4h4QX=ObAac3UoPyEVgOYqait-hUfUtAWcn5MA@mail.gmail.com>

Dear all,
I have submitted my first R package to CRAN and I have received the email
below back.

If I understood the log message correctly, to fix the issues is fairly
simple:
- correct the Title using the Title Case suggestion
- change a bit the description so that "simpleroptions" is not the first
word in the DESCRIPTION.

Also the mispelled word is the name of my package so I guess that is OK,
isn't it?

Before re-submitting and wasting CRAN reviewers time I would like to know
that with the changes above the package would be good for acceptance.

Also I do have a question, I have tried several times to check whether my
package was ready for CRAN using the devtools::check() function and I
got to the point were I have no Warning no Notes. Is it normal that the
checks can be different? Or maybe it is a symptom that I am doing something
wrong with the build() and check() steps?

Thank you all for your help with this!

Cheers,
Luca

---------- Forwarded message ----------
From: <Uwe.Ligges at r-project.org>
Date: Mon, Jan 8, 2018 at 11:29 PM
Subject: [CRAN-pretest-archived] CRAN submission simpleroptions 0.2.0
To: luca.cerone at gmail.com
Cc: CRAN-submissions at r-project.org


Dear maintainer,

package simpleroptions_0.2.0.tar.gz does not pass the incoming checks
automatically, please see the pre-test at:
<https://win-builder.r-project.org/incoming_pretest/
180108_232242_simpleroptions_020/00check.log>
Status: 1 WARNING, 1 NOTE


Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on
the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please
reply-all to this message and explain.

More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/
180108_232242_simpleroptions_020>
The files will be removed after roughly 7 days.


Best regards,
CRAN teams' auto-check service

	[[alternative HTML version deleted]]


From daniel.nuest at uni-muenster.de  Tue Jan  9 09:31:10 2018
From: daniel.nuest at uni-muenster.de (=?UTF-8?Q?Daniel_N=c3=bcst?=)
Date: Tue, 9 Jan 2018 09:31:10 +0100
Subject: [R-pkg-devel] Fwd: [CRAN-pretest-archived] CRAN submission
 simpleroptions 0.2.0
In-Reply-To: <CAFnz2-8vcfCd4h4QX=ObAac3UoPyEVgOYqait-hUfUtAWcn5MA@mail.gmail.com>
References: <20180108222236.0BC6516419A@xmpalantir.wu.ac.at>
 <01d388d0$Blat.v2.2.2$16b4ec34@mail.statistik.tu-dortmund.de>
 <CAFnz2-8vcfCd4h4QX=ObAac3UoPyEVgOYqait-hUfUtAWcn5MA@mail.gmail.com>
Message-ID: <e7ec5a63-b1f1-9e1c-90b3-d69924d17785@uni-muenster.de>

Hi Luca,

On 09/01/18 09:22, Luca Cerone wrote:
> I have submitted my first R package to CRAN and I have received the email
> below back.
> 
> If I understood the log message correctly, to fix the issues is fairly
> simple:
> - correct the Title using the Title Case suggestion
> - change a bit the description so that "simpleroptions" is not the first
> word in the DESCRIPTION.

Yes.

> Also the mispelled word is the name of my package so I guess that is OK,
> isn't it?

The "misspelled" word should not be a problem.

> Before re-submitting and wasting CRAN reviewers time I would like to know
> that with the changes above the package would be good for acceptance.

Please note also that you have a warning:

* checking DESCRIPTION meta-information ... WARNING
Dependence on R version '3.4.2' not with patchlevel 0

https://github.com/lucacerone/simpleroptions/blob/master/DESCRIPTION
should have

Depends: R (>= 3.4.0)

and not "3.4.2".

In case you want to prepare even better for CRAN (across architectures),
take a look at the rhub package: https://cran.r-project.org/package=rhub
 Hope this helps,
Daniel

> Also I do have a question, I have tried several times to check whether my
> package was ready for CRAN using the devtools::check() function and I
> got to the point were I have no Warning no Notes. Is it normal that the
> checks can be different? Or maybe it is a symptom that I am doing something
> wrong with the build() and check() steps?

> Thank you all for your help with this!
> 
> Cheers,
> Luca
> 
> ---------- Forwarded message ----------
> From: <Uwe.Ligges at r-project.org>
> Date: Mon, Jan 8, 2018 at 11:29 PM
> Subject: [CRAN-pretest-archived] CRAN submission simpleroptions 0.2.0
> To: luca.cerone at gmail.com
> Cc: CRAN-submissions at r-project.org
> 
> 
> Dear maintainer,
> 
> package simpleroptions_0.2.0.tar.gz does not pass the incoming checks
> automatically, please see the pre-test at:
> <https://win-builder.r-project.org/incoming_pretest/
> 180108_232242_simpleroptions_020/00check.log>
> Status: 1 WARNING, 1 NOTE
> 
> 
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on
> the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> If you are fairly certain the rejection is a false positive, please
> reply-all to this message and explain.
> 
> More details are given in the directory:
> <https://win-builder.r-project.org/incoming_pretest/
> 180108_232242_simpleroptions_020>
> The files will be removed after roughly 7 days.
> 
> 
> Best regards,
> CRAN teams' auto-check service
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

-- 
Daniel N?st
Institute for Geoinformatics (ifgi),   University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 31962
http://ifgi.uni-muenster.de/~d_nues01        http://o2r.info


From ligges at statistik.tu-dortmund.de  Tue Jan  9 09:33:17 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 9 Jan 2018 09:33:17 +0100
Subject: [R-pkg-devel] Fwd: [CRAN-pretest-archived] CRAN submission
 simpleroptions 0.2.0
In-Reply-To: <CAFnz2-8vcfCd4h4QX=ObAac3UoPyEVgOYqait-hUfUtAWcn5MA@mail.gmail.com>
References: <20180108222236.0BC6516419A@xmpalantir.wu.ac.at>
 <01d388d0$Blat.v2.2.2$16b4ec34@mail.statistik.tu-dortmund.de>
 <CAFnz2-8vcfCd4h4QX=ObAac3UoPyEVgOYqait-hUfUtAWcn5MA@mail.gmail.com>
Message-ID: <682ef51e-3379-457a-9517-8c319d164b83@statistik.tu-dortmund.de>



On 09.01.2018 09:22, Luca Cerone wrote:
> Dear all,
> I have submitted my first R package to CRAN and I have received the email
> below back.
> 
> If I understood the log message correctly, to fix the issues is fairly
> simple:
> - correct the Title using the Title Case suggestion
> - change a bit the description so that "simpleroptions" is not the first
> word in the DESCRIPTION.
> 
> Also the mispelled word is the name of my package so I guess that is OK,
> isn't it >
> Before re-submitting and wasting CRAN reviewers time I would like to know
> that with the changes above the package would be good for acceptance.

We see:

File 'LICENSE':
   MIT License

   Copyright (c) 2017 Luca Cerone

   Permission ..


Please only submit the CRAN template for the MIT licernse.

Possibly mis-spelled words in DESCRIPTION:
   simpleroptions (3:14)

Software names should be single quoted in the Description field, but I 
doubt you need it as people know your package's namne already.


The Title field should be in title case, current version then in title case:
'Easily manage options files for your packages and scripts'
'Easily Manage Options Files for your Packages and Scripts'

The Description field should not start with the package name,
   'This package' or similar.

Hence less redundancy.


* checking DESCRIPTION meta-information ... WARNING
Dependence on R version '3.4.2' not with patchlevel 0


Use patchlevel 0 if applicable.



You also left a file in the user'S home dir:
   .simpleroptions_vignette

It is not permitted to write there without the user explicitly 
specifying it.

Best,
Uwe Ligges

> Also I do have a question, I have tried several times to check whether my
> package was ready for CRAN using the devtools::check() function and I
> got to the point were I have no Warning no Notes. Is it normal that the
> checks can be different? Or maybe it is a symptom that I am doing something
> wrong with the build() and check() steps?
> 
> Thank you all for your help with this!
> 
> Cheers,
> Luca
> 
> ---------- Forwarded message ----------
> From: <Uwe.Ligges at r-project.org>
> Date: Mon, Jan 8, 2018 at 11:29 PM
> Subject: [CRAN-pretest-archived] CRAN submission simpleroptions 0.2.0
> To: luca.cerone at gmail.com
> Cc: CRAN-submissions at r-project.org
> 
> 
> Dear maintainer,
> 
> package simpleroptions_0.2.0.tar.gz does not pass the incoming checks
> automatically, please see the pre-test at:
> <https://win-builder.r-project.org/incoming_pretest/
> 180108_232242_simpleroptions_020/00check.log>
> Status: 1 WARNING, 1 NOTE
> 
> 
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on
> the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> If you are fairly certain the rejection is a false positive, please
> reply-all to this message and explain.
> 
> More details are given in the directory:
> <https://win-builder.r-project.org/incoming_pretest/
> 180108_232242_simpleroptions_020>
> The files will be removed after roughly 7 days.
> 
> 
> Best regards,
> CRAN teams' auto-check service
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From tkeitt at utexas.edu  Wed Jan 10 06:49:15 2018
From: tkeitt at utexas.edu (Tim Keitt)
Date: Tue, 9 Jan 2018 23:49:15 -0600
Subject: [R-pkg-devel] (no subject)
Message-ID: <CANnL8gqUt3fqfWxPU7S1+GV=4cmVDmONJnze9Oax8AoxnJFbtA@mail.gmail.com>

I'm seeing:

* checking re-building of vignette outputs ... [3s] WARNING
> Error in re-building vignettes:
> ...
> Quitting from lines 24-60 (strider.Rmd)
> Error: processing vignette 'strider.Rmd' failed with diagnostics:
> package 'dplyr' is not installed for 'arch = x64'
> Execution halted



I'm a little confused because my vignette avoids loading any packages that
are not available. Is this because the "eval" option is not available in
the version of knitr used by CRAN?

Here's the vignette code:

>
> ---
> title: "The Strider Package"
> author: "Timothy H. Keitt"
> date: "`r Sys.Date()`"
> output: rmarkdown::html_vignette
> vignette: >
>   %\VignetteIndexEntry{Vignette Title}
>   %\VignetteEngine{knitr::rmarkdown}
>   %\VignetteEncoding{UTF-8}
> ---
> ```{r include=FALSE}
> has_packages = all(c("dplyr", "ggplot2", "microbenchmark") %in%
> rownames(installed.packages()))
> not_has_packages = !has_packages
> ```
> ```{r echo=FALSE, eval=not_has_packages}
> cat("Error: You must install dplyr, ggplot2 and microbenchmark to run the
> code in this vignette.")
> ```
> ```{r include=FALSE, message=FALSE, warning=FALSE, eval=has_packages}
> library(dplyr)
> library(ggplot2)
> library(microbenchmark)
> ...


This works fine on my computer even if I uninstall dplyr, etc. But it
appears that when CRAN tries to rebuild the vignette, the "eval" flag is
ignored?

Tricky to reproduce as the exact code used to regenerate the vignette is
not part of the output.

THK


http://www.keittlab.org/

	[[alternative HTML version deleted]]


From georgi.boshnakov at manchester.ac.uk  Wed Jan 10 09:32:12 2018
From: georgi.boshnakov at manchester.ac.uk (Georgi Boshnakov)
Date: Wed, 10 Jan 2018 08:32:12 +0000
Subject: [R-pkg-devel] (no subject)
In-Reply-To: <CANnL8gqUt3fqfWxPU7S1+GV=4cmVDmONJnze9Oax8AoxnJFbtA@mail.gmail.com>
References: <CANnL8gqUt3fqfWxPU7S1+GV=4cmVDmONJnze9Oax8AoxnJFbtA@mail.gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F64935C@MBXP01.ds.man.ac.uk>

Have you put dplyr in 'Suggests'? This should do.

Note that R CMD check runs the code in vignettes twice - once during building and then again the tangled R code file.
So the error may come from the second run. You can check this locally by telling knitr not to clean up after building the vignette and inspecting the generated R file.

I think that in recent versions of knitr there is an option to prevent generating the R file in the first place, so this may solve the problem.

Georgi

--
Dr Georgi Boshnakov               tel: (+44) (0)161 306 3684
School of Mathematics             fax: (+44) (0)161 306 3669
Alan Turing Building 1.125
The University of Manchester      email: Georgi.Boshnakov at manchester.ac.uk
Oxford Road
Manchester M13 9PL
UK


-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Tim Keitt
Sent: 10 January 2018 05:49
To: R Package Devel
Subject: [R-pkg-devel] (no subject)

I'm seeing:

* checking re-building of vignette outputs ... [3s] WARNING
> Error in re-building vignettes:
> ...
> Quitting from lines 24-60 (strider.Rmd)
> Error: processing vignette 'strider.Rmd' failed with diagnostics:
> package 'dplyr' is not installed for 'arch = x64'
> Execution halted



I'm a little confused because my vignette avoids loading any packages that are not available. Is this because the "eval" option is not available in the version of knitr used by CRAN?

Here's the vignette code:

>
> ---
> title: "The Strider Package"
> author: "Timothy H. Keitt"
> date: "`r Sys.Date()`"
> output: rmarkdown::html_vignette
> vignette: >
>   %\VignetteIndexEntry{Vignette Title}
>   %\VignetteEngine{knitr::rmarkdown}
>   %\VignetteEncoding{UTF-8}
> ---
> ```{r include=FALSE}
> has_packages = all(c("dplyr", "ggplot2", "microbenchmark") %in%
> rownames(installed.packages()))
> not_has_packages = !has_packages
> ```
> ```{r echo=FALSE, eval=not_has_packages}
> cat("Error: You must install dplyr, ggplot2 and microbenchmark to run 
> the code in this vignette.") ``` ```{r include=FALSE, message=FALSE, 
> warning=FALSE, eval=has_packages}
> library(dplyr)
> library(ggplot2)
> library(microbenchmark)
> ...


This works fine on my computer even if I uninstall dplyr, etc. But it appears that when CRAN tries to rebuild the vignette, the "eval" flag is ignored?

Tricky to reproduce as the exact code used to regenerate the vignette is not part of the output.

THK


http://www.keittlab.org/

	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From rpascariu at outlook.com  Wed Jan 10 08:08:23 2018
From: rpascariu at outlook.com (Marius PASCARIU)
Date: Wed, 10 Jan 2018 07:08:23 +0000
Subject: [R-pkg-devel] Resize PDF Vignettes in Source Package
Message-ID: <DB6PR0401MB2295914DCD715424D868C530ED110@DB6PR0401MB2295.eurprd04.prod.outlook.com>

Dear all,

I want to add PDF vignettes to my package created with rmarkdown. The PDFs are generated without problems. If I submit the package to CRAN I would a warning telling me that the files are too large (see below):

checking sizes of PDF files under 'inst/doc' ... WARNING
 'gs+qpdf' made some significant size reductions:
    compacted 'Manual.pdf' from 370Kb to 116Kb
 consider running tools::compactPDF(gs_quality = "ebook") on these files

I do run `tools::compactPDF(gs_quality = "ebook?)` and the size of the PDF is indeed reduced to 116Kb. Now, if I build again the source package using `R CMD build <package_name>` the vignette is reconstructed at its original size (370Kb). However, If I build the package using `R CMD build <package_name> --no-build-vignettes` in order to keep the small PDF, the check would throw me the following NOTE:

Package has a VignetteBuilder field but no prebuilt vignette index.

Any ideas how can I include the compacted PDFs in the souce package and have a vignette index in the same time?

Thanks!

Cordially,
Marius Pascariu

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Wed Jan 10 14:56:39 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 10 Jan 2018 08:56:39 -0500
Subject: [R-pkg-devel] Resize PDF Vignettes in Source Package
In-Reply-To: <DB6PR0401MB2295914DCD715424D868C530ED110@DB6PR0401MB2295.eurprd04.prod.outlook.com>
References: <DB6PR0401MB2295914DCD715424D868C530ED110@DB6PR0401MB2295.eurprd04.prod.outlook.com>
Message-ID: <92dcf0df-3dac-d0a8-c91d-6cd3701756a1@gmail.com>

On 10/01/2018 2:08 AM, Marius PASCARIU wrote:
> Dear all,
> 
> I want to add PDF vignettes to my package created with rmarkdown. The PDFs are generated without problems. If I submit the package to CRAN I would a warning telling me that the files are too large (see below):
> 
> checking sizes of PDF files under 'inst/doc' ... WARNING
>   'gs+qpdf' made some significant size reductions:
>      compacted 'Manual.pdf' from 370Kb to 116Kb
>   consider running tools::compactPDF(gs_quality = "ebook") on these files
> 
> I do run `tools::compactPDF(gs_quality = "ebook?)` and the size of the PDF is indeed reduced to 116Kb. Now, if I build again the source package using `R CMD build <package_name>` the vignette is reconstructed at its original size (370Kb). However, If I build the package using `R CMD build <package_name> --no-build-vignettes` in order to keep the small PDF, the check would throw me the following NOTE:
> 
> Package has a VignetteBuilder field but no prebuilt vignette index.
> 
> Any ideas how can I include the compacted PDFs in the souce package and have a vignette index in the same time?
> 


When you build the tarball, use the --compact-vignettes option.

Duncan Murdoch


From yufreecas at gmail.com  Wed Jan 10 17:29:58 2018
From: yufreecas at gmail.com (Miao YU)
Date: Wed, 10 Jan 2018 11:29:58 -0500
Subject: [R-pkg-devel] package dependencies are not available on some check
	severs
Message-ID: <6F9279AB-5DFE-4F96-A61B-E67395FCC6F8@gmail.com>

Hi everyone,

I want to update my package (enviGCMS) and find it can?t pass the check since some imported functions are not available.

Here is the check log: <https://win-builder.r-project.org/incoming_pretest/180110_055122_enviGCMS_050/00check.log>

Those functions are all from imported bioc packages and I have used biocViews: in DESCRIPTION . I also found current version of enviGCMS has some problems related to certain check flavor (https://CRAN.R-project.org/web/checks/check_results_enviGCMS.html).

The main issue would be that the check server just do not have the packages which is actually available on Bioc server such as xcms(http://bioconductor.org/packages/release/bioc/html/xcms.html), MSnbase(http://bioconductor.org/packages/release/bioc/html/MSnbase.html) and faahKO(https://bioconductor.org/packages/release/data/experiment/html/faahKO.html)

As far as I could see, all those packages show a warning or error status on bioc build. Maybe the check servers on CRAN just skip those packages. Could I just import certain functions since the waining and error did not affect my imported functions?

Any suggestions about it? Or I should wait until those imported package passed the check and then submit again?

Thanks,

Miao
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: Message signed with OpenPGP
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20180110/2600f759/attachment.sig>

From murdoch.duncan at gmail.com  Wed Jan 10 18:38:05 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 10 Jan 2018 12:38:05 -0500
Subject: [R-pkg-devel] package dependencies are not available on some
 check severs
In-Reply-To: <6F9279AB-5DFE-4F96-A61B-E67395FCC6F8@gmail.com>
References: <6F9279AB-5DFE-4F96-A61B-E67395FCC6F8@gmail.com>
Message-ID: <7623697c-bb93-2f43-e4de-3fd0863c9d41@gmail.com>

On 10/01/2018 11:29 AM, Miao YU wrote:
> Hi everyone,
> 
> I want to update my package (enviGCMS) and find it can?t pass the check since some imported functions are not available.
> 
> Here is the check log: <https://win-builder.r-project.org/incoming_pretest/180110_055122_enviGCMS_050/00check.log>
> 
> Those functions are all from imported bioc packages and I have used biocViews: in DESCRIPTION . I also found current version of enviGCMS has some problems related to certain check flavor (https://CRAN.R-project.org/web/checks/check_results_enviGCMS.html).
> 
> The main issue would be that the check server just do not have the packages which is actually available on Bioc server such as xcms(http://bioconductor.org/packages/release/bioc/html/xcms.html), MSnbase(http://bioconductor.org/packages/release/bioc/html/MSnbase.html) and faahKO(https://bioconductor.org/packages/release/data/experiment/html/faahKO.html)

Generally the checks are done against R-devel, so you need to be looking 
for packages in the 3.7 version of Bioc.  This page:

http://bioconductor.org/checkResults/devel/bioc-LATEST/

shows errors in xcms and MSnbase, and there's no sign of faahKO.

> 
> As far as I could see, all those packages show a warning or error status on bioc build. Maybe the check servers on CRAN just skip those packages. Could I just import certain functions since the waining and error did not affect my imported functions?

No, if a package has errors it won't be available at all.
> 
> Any suggestions about it? Or I should wait until those imported package passed the check and then submit again?

The other choice is to find alternate sources of the functions you need. 
  If they are small and self-contained, you might be able to copy the 
source out of those packages and into yours.  If you do that, be sure to 
give proper credit to the authors.

Duncan Murdoch


From yufreecas at gmail.com  Wed Jan 10 19:18:22 2018
From: yufreecas at gmail.com (Miao YU)
Date: Wed, 10 Jan 2018 13:18:22 -0500
Subject: [R-pkg-devel] package dependencies are not available on some
 check severs
In-Reply-To: <7623697c-bb93-2f43-e4de-3fd0863c9d41@gmail.com>
References: <6F9279AB-5DFE-4F96-A61B-E67395FCC6F8@gmail.com>
 <7623697c-bb93-2f43-e4de-3fd0863c9d41@gmail.com>
Message-ID: <79D32C56-1329-47B2-9554-E1C90D749C44@gmail.com>

Thanks! I checked the error and found the original error came from another package(mzR) which are imported by xcms and MSnbase. Unfortunately, the functions I needed are not so self-contained and also rely on mzR in some certain cases.

Good news is that someone has recently raised same check error issue on Github(https://github.com/sneumann/mzR/issues/143) and the author has shown a solution for this issue. Maybe a few days later mzR could be updated on Bioc without error and then I will try to submit my package again.

Miao

> On Jan 10, 2018, at 12:38 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> On 10/01/2018 11:29 AM, Miao YU wrote:
>> Hi everyone,
>> I want to update my package (enviGCMS) and find it can?t pass the check since some imported functions are not available.
>> Here is the check log: <https://win-builder.r-project.org/incoming_pretest/180110_055122_enviGCMS_050/00check.log>
>> Those functions are all from imported bioc packages and I have used biocViews: in DESCRIPTION . I also found current version of enviGCMS has some problems related to certain check flavor (https://CRAN.R-project.org/web/checks/check_results_enviGCMS.html).
>> The main issue would be that the check server just do not have the packages which is actually available on Bioc server such as xcms(http://bioconductor.org/packages/release/bioc/html/xcms.html), MSnbase(http://bioconductor.org/packages/release/bioc/html/MSnbase.html) and faahKO(https://bioconductor.org/packages/release/data/experiment/html/faahKO.html)
> 
> Generally the checks are done against R-devel, so you need to be looking for packages in the 3.7 version of Bioc.  This page:
> 
> http://bioconductor.org/checkResults/devel/bioc-LATEST/
> 
> shows errors in xcms and MSnbase, and there's no sign of faahKO.
> 
>> As far as I could see, all those packages show a warning or error status on bioc build. Maybe the check servers on CRAN just skip those packages. Could I just import certain functions since the waining and error did not affect my imported functions?
> 
> No, if a package has errors it won't be available at all.
>> Any suggestions about it? Or I should wait until those imported package passed the check and then submit again?
> 
> The other choice is to find alternate sources of the functions you need.  If they are small and self-contained, you might be able to copy the source out of those packages and into yours.  If you do that, be sure to give proper credit to the authors.
> 
> Duncan Murdoch
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: Message signed with OpenPGP
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20180110/eaaa3fa7/attachment.sig>

From luca.cerone at gmail.com  Wed Jan 10 21:07:59 2018
From: luca.cerone at gmail.com (Luca Cerone)
Date: Wed, 10 Jan 2018 21:07:59 +0100
Subject: [R-pkg-devel] Fwd: [CRAN-pretest-archived] CRAN submission
 simpleroptions 0.2.0
In-Reply-To: <682ef51e-3379-457a-9517-8c319d164b83@statistik.tu-dortmund.de>
References: <20180108222236.0BC6516419A@xmpalantir.wu.ac.at>
 <01d388d0$Blat.v2.2.2$16b4ec34@mail.statistik.tu-dortmund.de>
 <CAFnz2-8vcfCd4h4QX=ObAac3UoPyEVgOYqait-hUfUtAWcn5MA@mail.gmail.com>
 <682ef51e-3379-457a-9517-8c319d164b83@statistik.tu-dortmund.de>
Message-ID: <CAFnz2-9_DJsE7j0orPXo2N7Lpq1gcq9BrQdQf+fGreRKKed+AQ@mail.gmail.com>

Hi,
first of all thanks Uwe for your time.

About the package writing a file in the home directory, I have a doubt: the
package's aim is to be able to setup configuration files without too much
effort.
Usually the home is a good place to put such file (for example rstudio
creates .rstudio-desktop in your home...).
Is this because the file is created from a vignette, or is it going to be
an issue?
For the vignette, what if I change the location of the file to a temporary
directory? Would that help pass the check?

As it was pointed to me, running devtools::check() is not enough, and in
fact after building the package and running R CMD build on the .tar.zip
archive
I still get errors (I fixed the title and the description, but apparently
wasn't enough).

Below is the log message I get, I think I have somehow to change the
documentation because latex can't compile it (although I have no idea why
it can't)
and I don't properly understand the complain about the imports.

I don't include them in the NAMESPACE because I call my functions using the
form package::function (e.g. R6::R6Class), which is what I thought is
considered as good practice.

Could you give me some advice on how to fix this note?

Thanks a lot for the help, here is the log I of the errors:

cat simpleroptions.Rcheck/00check.log
* using log directory
?/home/luca/Documents/r-projects/simpleroptions.Rcheck?
* using R version 3.4.3 (2017-11-30)
* using platform: x86_64-pc-linux-gnu (64-bit)
* using session charset: UTF-8
* checking for file ?simpleroptions/DESCRIPTION? ... OK
* this is package ?simpleroptions? version ?0.2.0?
* package encoding: UTF-8
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking whether package ?simpleroptions? can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking ?build? directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ...
OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking loading without being on the library search path ... OK
* checking dependencies in R code ... NOTE
Namespaces in Imports field not imported from:
  ?R6? ?jsonlite? ?knitr? ?readr?
  All declared Imports should be used.
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking installed files from ?inst/doc? ... OK
* checking files in ?vignettes? ... OK
* checking examples ... OK
* checking for unstated dependencies in vignettes ... OK
* checking package vignettes in ?inst/doc? ... OK
* checking running R code from vignettes ... NONE
* checking re-building of vignette outputs ... OK
* checking PDF version of manual ... WARNING
LaTeX errors when creating PDF version.
This typically indicates Rd problems.
* checking PDF version of manual without hyperrefs or index ... OK
* DONE
Status: 1 WARNING, 1 NOTE


On Tue, Jan 9, 2018 at 9:33 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

>
>
> On 09.01.2018 09:22, Luca Cerone wrote:
>
>> Dear all,
>> I have submitted my first R package to CRAN and I have received the email
>> below back.
>>
>> If I understood the log message correctly, to fix the issues is fairly
>> simple:
>> - correct the Title using the Title Case suggestion
>> - change a bit the description so that "simpleroptions" is not the first
>> word in the DESCRIPTION.
>>
>> Also the mispelled word is the name of my package so I guess that is OK,
>> isn't it >
>> Before re-submitting and wasting CRAN reviewers time I would like to know
>> that with the changes above the package would be good for acceptance.
>>
>
> We see:
>
> File 'LICENSE':
>   MIT License
>
>   Copyright (c) 2017 Luca Cerone
>
>   Permission ..
>
>
> Please only submit the CRAN template for the MIT licernse.
>
> Possibly mis-spelled words in DESCRIPTION:
>   simpleroptions (3:14)
>
> Software names should be single quoted in the Description field, but I
> doubt you need it as people know your package's namne already.
>
>
> The Title field should be in title case, current version then in title
> case:
> 'Easily manage options files for your packages and scripts'
> 'Easily Manage Options Files for your Packages and Scripts'
>
> The Description field should not start with the package name,
>   'This package' or similar.
>
> Hence less redundancy.
>
>
> * checking DESCRIPTION meta-information ... WARNING
> Dependence on R version '3.4.2' not with patchlevel 0
>
>
> Use patchlevel 0 if applicable.
>
>
>
> You also left a file in the user'S home dir:
>   .simpleroptions_vignette
>
> It is not permitted to write there without the user explicitly specifying
> it.
>
> Best,
> Uwe Ligges
>
> Also I do have a question, I have tried several times to check whether my
>> package was ready for CRAN using the devtools::check() function and I
>> got to the point were I have no Warning no Notes. Is it normal that the
>> checks can be different? Or maybe it is a symptom that I am doing
>> something
>> wrong with the build() and check() steps?
>>
>> Thank you all for your help with this!
>>
>> Cheers,
>> Luca
>>
>> ---------- Forwarded message ----------
>> From: <Uwe.Ligges at r-project.org>
>> Date: Mon, Jan 8, 2018 at 11:29 PM
>> Subject: [CRAN-pretest-archived] CRAN submission simpleroptions 0.2.0
>> To: luca.cerone at gmail.com
>> Cc: CRAN-submissions at r-project.org
>>
>>
>> Dear maintainer,
>>
>> package simpleroptions_0.2.0.tar.gz does not pass the incoming checks
>> automatically, please see the pre-test at:
>> <https://win-builder.r-project.org/incoming_pretest/
>> 180108_232242_simpleroptions_020/00check.log>
>> Status: 1 WARNING, 1 NOTE
>>
>>
>> Please fix all problems and resubmit a fixed version via the webform.
>> If you are not sure how to fix the problems shown, please ask for help on
>> the R-package-devel mailing list:
>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>> If you are fairly certain the rejection is a false positive, please
>> reply-all to this message and explain.
>>
>> More details are given in the directory:
>> <https://win-builder.r-project.org/incoming_pretest/
>> 180108_232242_simpleroptions_020>
>> The files will be removed after roughly 7 days.
>>
>>
>> Best regards,
>> CRAN teams' auto-check service
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>

	[[alternative HTML version deleted]]


From rpascariu at outlook.com  Thu Jan 11 00:40:53 2018
From: rpascariu at outlook.com (Marius PASCARIU)
Date: Wed, 10 Jan 2018 23:40:53 +0000
Subject: [R-pkg-devel] Resize PDF Vignettes in Source Package
In-Reply-To: <92dcf0df-3dac-d0a8-c91d-6cd3701756a1@gmail.com>
References: <DB6PR0401MB2295914DCD715424D868C530ED110@DB6PR0401MB2295.eurprd04.prod.outlook.com>
 <92dcf0df-3dac-d0a8-c91d-6cd3701756a1@gmail.com>
Message-ID: <62D1F69F-D662-414D-9676-04322A69C5F8@outlook.com>

--compact-vignettes alone did not work.
--compact-vignettes=gs+qpdf did the job.

Thanks.
Marius Pascariu

On 11 Jan 2018, at 00:56, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

On 10/01/2018 2:08 AM, Marius PASCARIU wrote:
Dear all,
I want to add PDF vignettes to my package created with rmarkdown. The PDFs are generated without problems. If I submit the package to CRAN I would a warning telling me that the files are too large (see below):
checking sizes of PDF files under 'inst/doc' ... WARNING
 'gs+qpdf' made some significant size reductions:
    compacted 'Manual.pdf' from 370Kb to 116Kb
 consider running tools::compactPDF(gs_quality = "ebook") on these files
I do run `tools::compactPDF(gs_quality = "ebook?)` and the size of the PDF is indeed reduced to 116Kb. Now, if I build again the source package using `R CMD build <package_name>` the vignette is reconstructed at its original size (370Kb). However, If I build the package using `R CMD build <package_name> --no-build-vignettes` in order to keep the small PDF, the check would throw me the following NOTE:
Package has a VignetteBuilder field but no prebuilt vignette index.
Any ideas how can I include the compacted PDFs in the souce package and have a vignette index in the same time?


When you build the tarball, use the --compact-vignettes option.

Duncan Murdoch


	[[alternative HTML version deleted]]


From hugh.parsonage at gmail.com  Fri Jan 12 11:24:11 2018
From: hugh.parsonage at gmail.com (Hugh Parsonage)
Date: Fri, 12 Jan 2018 21:24:11 +1100
Subject: [R-pkg-devel] rcnst issue
Message-ID: <CAJmOi+MdakNnE-T-LmYF-_EjcnG3TD3Oqg2zfud=vfds-utS1g@mail.gmail.com>

I recently noticed a package of mine, TeXCheckR, is failing "rcnst"
under "Additional issues". My package is one of only three to fail
this check. I'd like help from the mailing list to fix this issue (or
to be told not to fix it if it should not be fixed).

I read
  https://github.com/kalibera/cran-checks/blob/master/rcnst/CONSTANTS.md
and the report at
  https://github.com/kalibera/cran-checks/blob/master/rcnst/results/TeXCheckR/00check.log

The text at CONSTANTS.md and the relevant entry at
 https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Named-objects-and-copying
suggests that this error is only contemplated with packages with
compiled (C/C++) code. Since R automatically handles NAMED, my
understanding was that an R package that does not need compilation
should never encounter this error. Clearly my understanding is wrong,
as TeXCheckR does not require compilation yet fails this test.

The only clue I have is that the error occurs during a test of a
function which (through another package) calls %fin% from the
fastmatch package. Package fastmatch does require compilation and does
appear to modify the value of c(".", "?"). Do I need to stop using
%fin% inside packages to avoid this error, or is the cause of the
error elsewhere? I have some doubt that %fin% is totally to blame as
the package through which %fin% is eventually called does not
encounter the same error.


Many thanks,

Hugh Parsonage
Grattan Institute


From cdetermanjr at gmail.com  Fri Jan 12 16:30:33 2018
From: cdetermanjr at gmail.com (Charles Determan)
Date: Fri, 12 Jan 2018 09:30:33 -0600
Subject: [R-pkg-devel] Unit Testing CUDA Volunteers
Message-ID: <CAKxd1KNZtS2eR+e868co6aNxcqZcVyY0ZrNVEX0BPb9Nz+2AOw@mail.gmail.com>

R Developers,

I am currently in development of some additional CUDA based packages to
bring more GPU computing to the R community.  Recently, I no longer have
access to an NVIDIA GPU and therefore I am unable to run any unit tests on
the functions I create.  I can confirm the packages build on a continuous
integration platform (e.g. Travis CI) but I am not aware of any that
provide an NVIDIA GPU for testing.

As you are all aware, unit testing is critical for the integrity of our
packages so I would like to openly request for volunteers who would be
willing to test CUDA based packages.  I previously petitioned for
developers with my previous package (gpuR) but that was open to anyone
given the OpenCL backend.  Naturally, this testing would be at your
convenience and there would be no additional responsibilities.  Simply
reporting if tests pass or fail.  If you are interested, please reply to me
off list and we can coordinate with my git repositories.

Kind Regards,
Charles

	[[alternative HTML version deleted]]


From ht at heatherturner.net  Wed Jan 17 13:33:24 2018
From: ht at heatherturner.net (Heather Turner)
Date: Wed, 17 Jan 2018 12:33:24 +0000
Subject: [R-pkg-devel] Handling packages required to build vignettes
Message-ID: <1516192404.3293477.1238333048.78B371F6@webmail.messagingengine.com>

Dear All,

Since the Fedora checks on R-devel are not currently using packages from
Bioconductor, one of my packages is giving new warnings. In my case (and
it appears for a number of others) this is due to using
BiocStyle::html_document format in the package vignette.
Since BiocStyle is only required to build the vignette, I had put it in
Suggests, but clearly this is not acceptable. So the question is what to
do instead. Possibilities include:
1. Use bookdown::html_document2 instead. This would probably be okay to
   pass CRAN checks as bookdown is on CRAN, but if bookdown were not
   available the check would fail. The features lost are relatively
   minor: document styling, date line, package version line, inline
   table of contents, wide figures.
2. Use html_document instead. If the rmarkdown package is available, the
   only additional loss from 1. is figure and table referencing (the raw
   references are shown instead). Otherwise the knitr vignette engine
   reverts to R Markdown v1, losing information in the YAML header
   (title, authors and affiliations, abstract) and breaking citations
   (no references shown).
As the result deteriorates moving from BiocStyle to bookdown  to
rmarkdown to knitr, it would be great to have a way to use the best
output format given the packages available. I don't think it is possible
to have conditional code in the YAML header, so I guess the only way to
do this is via a custom vignette engine. Ideally this would be
incorporated in knitr so that it can cope with a preference list of
output formats, rather than everyone having to add custom engines to
their packages.
Does this sound like a good solution? If so, I'm happy to work on it and
with anyone else that would like such a thing. Suggestions of how best
to do this, or of better alternatives welcome.
Best wishes,

Heather

	[[alternative HTML version deleted]]


From r.turner at auckland.ac.nz  Wed Jan 17 23:58:13 2018
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Thu, 18 Jan 2018 11:58:13 +1300
Subject: [R-pkg-devel]
 =?utf-8?q?Producing_=C3=9F_in_help_files_---_very_b?=
 =?utf-8?q?elated_response=2E?=
In-Reply-To: <9a6fd3c6-e870-df2d-42d5-407dbd7a229b@statistik.tu-dortmund.de>
References: <130bcc51-9678-6742-ba3b-47836b9c4e84@auckland.ac.nz>
 <0928bd0e-3eb5-1c9f-2865-20d186642366@effectivedefense.org>
 <cd421da3-32dd-48df-dc0d-5037810f98fc@auckland.ac.nz>
 <9a6fd3c6-e870-df2d-42d5-407dbd7a229b@statistik.tu-dortmund.de>
Message-ID: <1fb2299d-3855-03a9-783b-6f4a3fee0400@auckland.ac.nz>


On 06/01/18 20:51, Uwe Ligges wrote:

> And just writing it with a declared encoding in the Rd file des not work?

Uh, yes.  It does indeed work just fine.  Thank you!  The point is that 
I had no idea of this possibility --- or even of the existence of 
"declared encoding".

For the record, what I did was:

* put "\encoding{UTF-8}" at the very beginning of the *.Rd file, just
   before the "\name{.}" command.
* wherever I referred to Prof. Wei?, use "\enc{Wei?}{Weiss}"

It's very easy once one has been told how to do this, impossible before 
that.  The discussion in WRE is opaque to me.

Many thanks, Uwe, for telling me how to do this, and to others who made 
similar suggestions.

My humblest apologies for taking so long to acknowledge the help that I 
was given.

cheers,

Rolf

> 
> Section 2.14 in WRE tells us that \encoding{} can declare anm encoding 
> and "For convenience, encoding names ?latin1? and ?latin2? are always 
> recognized: these and
> ?UTF-8? are likely to work fairly widely. However, this does not mean 
> that all characters in
> UTF-8 will be recognized, and the coverage of non-Latin characters10 is 
> fairly low. Using LATEX
> inputenx (see ?Rd2pdf in R) will give greater coverage of UTF-8.
> The \enc command (see Section 2.8 [Insertions], page 75) can be used to 
> provide transliterations
> which will be used in conversions that do not support the declared 
> encoding."
> 
> And Secion 2.8 tells us
> 
> Text which might need to be represented differently in different 
> encodings should be marked
> by \enc, e.g. \enc{J?reskog}{Joreskog} (with no whitespace between the 
> braces) where the
> first argument will be used where encodings are allowed and the second 
> should be ASCII (and
> is used for e.g. the text conversion in locales that cannot represent 
> the encoded form). (This is
> intended to be used for individual words, not whole sentences or 
> paragraphs.)
> 
> 
> 
> Hence a preamble with, e.g.
> \encoding{latin1}
> or
> \encoding{UTF-8}
> and later writing \enc{Wei?}{Weiss} seems most appropriate here.
> 
> Best,
> Uwe Ligges
> 
> 
> 
> On 06.01.2018 04:41, Rolf Turner wrote:
>> On 06/01/18 16:19, Spencer Graves wrote:
>>>
>>>
>>> On 2018-01-05 20:52, Rolf Turner wrote:
>>>>
>>>> In a help file that I am writing I wish to cite an item by a bloke 
>>>> whose surname is Wei?.
>>>
>>>
>>> ?????? Write it "Weiss".
>>>
>>>
>>> ?????? See "https://en.wikipedia.org/wiki/%C3%9F".
>>>
>>>
>>> ?????? That name is written "Weiss" in Switzerland and Liechtenstein 
>>> but "Wei?" in Germany and Austria.? German is the official language 
>>> of Liechtenstein and the primary of four official languages of 
>>> Switzerland.
>>>
>>>
>>> ?????? Standard high German has several characters that are not used 
>>> in English but have standard transliterations using the English latin 
>>> alphabet.? These include "?" = "ss", "?" = "ae", "?" = "oe" and "?" = 
>>> "ue".
>>
>> <SNIP>
>>
>> I'm sure that you're correct, but I find it frustrating not to be able 
>> to produce a symbol (which is readily available elsewhere --- e.g. in 
>> LaTeX or from the keyboard using the "compose key") under the ".Rd" 
>> system.? I'd like to be *able to produce it*, even if I shouldn't! :-)
>>
>> cheers,
>>
>> Rolf
>>
>> P. S.? It also seems to me to be polite --- if that's the way the 
>> bloke writes his name, then? that's the way that I ought to write it 
>> when referring to him.
>>
>> R.


From kevinushey at gmail.com  Thu Jan 18 20:19:12 2018
From: kevinushey at gmail.com (Kevin Ushey)
Date: Thu, 18 Jan 2018 11:19:12 -0800
Subject: [R-pkg-devel] CRAN and packages bundling third party C/C++ code
Message-ID: <CAJXgQP1-iCm5h5-0JWjsKfaJ2-mugjBZ7TQVA4w7xd1vdnnfwQ@mail.gmail.com>

Hi,

This is mostly a question for the CRAN team, but I figured posting here
would be best since other package maintainers could see the responses as
well.

I'm currently in the process of preparing a submission of RcppParallel to
CRAN. RcppParallel bundles Intel's Threading Building Blocks (https://www.
threadingbuildingblocks.org/) and builds + installs it alongside the
package.

However, the TBB sources themselves do a lot of things that trip up R CMD
check + versions of R compiled with sanitizers, which are mostly out of my
control. For example, some UBSAN errors are emitted here:

https://www.stats.ox.ac.uk/pub/bdr/memtests/clang-UBSAN/
RcppParallel/tests/doRUnit.Rout

Executing test function test.distance  ... /data/gannet/ripley/R/
packages/tests-clang-SAN/RcppParallel.Rcheck/RcppParallel/include/tbb/task.h:721:30:
runtime error: member call on address 0x7fbf31e93d00 which does not point
to an object of type 'tbb::internal::scheduler'
0x7fbf31e93d00: note: object is of type 'tbb::internal::custom_
scheduler<tbb::internal::IntelSchedulerTraits>'
 00 00 00 00  a8 ab 76 32 bf 7f 00 00  00 00 00 00 00 00 00 00  00 00 00 00
00 00 00 00  80 ff c9 31
              ^~~~~~~~~~~~~~~~~~~~~~~
              vptr for 'tbb::internal::custom_scheduler<tbb::internal::
IntelSchedulerTraits>'
SUMMARY: UndefinedBehaviorSanitizer: undefined-behavior
/data/gannet/ripley/R/packages/tests-clang-SAN/RcppParallel.Rcheck/
RcppParallel/include/tbb/task.h:721:30 in

This occurs, as far as I can tell, because TBB sidesteps typical C++ object
construction for some objects: instead, it allocates some memory, then
casts it to some required type. As an example,

https://github.com/RcppCore/RcppParallel/blob/603d1aa6f340668e34f5f490438967
489edc9197/src/tbb/src/tbb/scheduler.cpp#L322-L328

While this is 'wrong', it also 'works'. What am I, as a package maintainer,
supposed to do in this situation? To make things worse, this UBSAN warning
unfortunately affects all client packages of RcppParallel as well, as this
warning is triggered by code ran by RcppParallel on load / startup. Do
other package maintainers just need to say, "sorry, that's RcppParallel's
fault"?

In addition, TBB itself suppresses a number of compiler diagnostics
deliberately -- for example,

https://github.com/RcppCore/RcppParallel/blob/603d1aa6f340668e34f5f490438967
489edc9197/inst/include/tbb/flow_graph_opencl_node.h#L1234-L1252

https://github.com/RcppCore/RcppParallel/blob/603d1aa6f340668e34f5f490438967
489edc9197/src/tbb/include/tbb/tbb_machine.h#L666-L674

Presumedly, TBB does this because they know what they're doing and the
compiler diagnostic will not be useful within this region of code. However,
this also triggers R CMD check warnings. What should I do here -- just
explain the case to CRAN? Patch TBB to allow the compiler diagnostics to
flow through?

The more general question here -- what should package authors do when
third-party code bundled in the package emits compiler warnings?

Thanks,
Kevin

	[[alternative HTML version deleted]]


From Chris.Brien at unisa.edu.au  Fri Jan 19 09:31:00 2018
From: Chris.Brien at unisa.edu.au (Chris Brien)
Date: Fri, 19 Jan 2018 08:31:00 +0000
Subject: [R-pkg-devel] Licensing of an R package
Message-ID: <b71e33d951634a1f9a4f87269c534ac3@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>

Dear list members,

I have come to realize that my understanding of free software licensing was somewhat na?ve. The problem is that I now find that, in spite of spending quite a bit of time reading about various licenses on the web, I have been unable to identify a suitable license for the situation that I have with one of my packages.

I am solely responsible for the development of my package, `foo' say. However, most functions in `foo' call functions from a proprietary package, `bar' say , the latter not being available from an online software repository and consisting of R functions that call routines in a library. That is, `foo' enhances `bar'.

I had thought that a GPL licence was appropriate because (1) `foo' is free software and (ii) I do not distribute `bar' with `foo'. That is, I am distributing only free software.  However, I have come to understand that this is not the case because a free software package linked with a proprietary package does not satisfy the requirements to be GPL.

I have found it difficult to work out a license that might cover my package because much of the discussion online covers cases that are the opposite of mine i.e. cases where `foo' is proprietary and `bar' is freeware. I can appreciate why this needs to be avoided.

I can also understand that a disadvantage of what I am doing is that it tends to entrench the use of such software. While I agree that it is desirable that `bar' be replaced with free software, unfortunately `bar' has functionality that is currently infeasible to replace with free software. At least I am not profiting from the enhancements that I have made.

I am hoping that someone more experienced in software development and licensing issues can suggest a license type that might be suitable for `foo' such that at least the enhancements that it incorporates remain `free'?

Cheers, 

  Chris Brien

Adjunct Senior Lecturer in Statistics
-----
Phenomics and Bioinformatics Research Centre
University of South Australia
GPO Box 2471
ADELAIDE  5001  South Australia
Phone:? +61 8 8302 5535   Fax:? +61 8 8302 5785
Email:?? Chris.Brien at unisa.edu.au 
WEB page:? <http://people.unisa.edu.au/Chris.Brien> 
CRICOS No 00121B 


From sme at iysik.com  Fri Jan 19 10:27:41 2018
From: sme at iysik.com (=?UTF-8?Q?Stefan_McKinnon_H=C3=B8j=2DEdwards?=)
Date: Fri, 19 Jan 2018 09:27:41 +0000
Subject: [R-pkg-devel] Licensing of an R package
In-Reply-To: <b71e33d951634a1f9a4f87269c534ac3@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
References: <b71e33d951634a1f9a4f87269c534ac3@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
Message-ID: <CAHJFP8Tf-o_arMS0+om_7uahwoBZTc_oF61_0eU=ULouCX4xWw@mail.gmail.com>

Hi Chris,

Just for clarification, there are at least two aspects that affect how you
can license your package.
A) Do you distribute `bar` with your package, or are you simply calling
routines in `bar`?
B) What is the exact license of `bar`?
C) Is there a reason for this secrecy of `bar`? If we knew what it was,
somebody on this list might have experience with it or similar.

If `bar` is not freely available, it doesn't seem your package would be
accepted to CRAN (do correct me if I am wrong).

Kindly,
Stefan McKinnon Hoj-Edwards

Stefan McKinnon H?j-Edwards
ph.d. Genetics
+44 (0)776 231 2464
+45 2888 6598
Skype: stefan_edwards

2018-01-19 8:31 GMT+00:00 Chris Brien <Chris.Brien at unisa.edu.au>:

> Dear list members,
>
> I have come to realize that my understanding of free software licensing
> was somewhat na?ve. The problem is that I now find that, in spite of
> spending quite a bit of time reading about various licenses on the web, I
> have been unable to identify a suitable license for the situation that I
> have with one of my packages.
>
> I am solely responsible for the development of my package, `foo' say.
> However, most functions in `foo' call functions from a proprietary package,
> `bar' say , the latter not being available from an online software
> repository and consisting of R functions that call routines in a library.
> That is, `foo' enhances `bar'.
>
> I had thought that a GPL licence was appropriate because (1) `foo' is free
> software and (ii) I do not distribute `bar' with `foo'. That is, I am
> distributing only free software.  However, I have come to understand that
> this is not the case because a free software package linked with a
> proprietary package does not satisfy the requirements to be GPL.
>
> I have found it difficult to work out a license that might cover my
> package because much of the discussion online covers cases that are the
> opposite of mine i.e. cases where `foo' is proprietary and `bar' is
> freeware. I can appreciate why this needs to be avoided.
>
> I can also understand that a disadvantage of what I am doing is that it
> tends to entrench the use of such software. While I agree that it is
> desirable that `bar' be replaced with free software, unfortunately `bar'
> has functionality that is currently infeasible to replace with free
> software. At least I am not profiting from the enhancements that I have
> made.
>
> I am hoping that someone more experienced in software development and
> licensing issues can suggest a license type that might be suitable for
> `foo' such that at least the enhancements that it incorporates remain
> `free'?
>
> Cheers,
>
>   Chris Brien
>
> Adjunct Senior Lecturer in Statistics
> -----
> Phenomics and Bioinformatics Research Centre
> University of South Australia
> GPO Box 2471
> ADELAIDE  5001  South Australia
> Phone:  +61 8 8302 5535   Fax:  +61 8 8302 5785
> Email:   Chris.Brien at unisa.edu.au
> WEB page:  <http://people.unisa.edu.au/Chris.Brien>
> CRICOS No 00121B
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From b.rowlingson at lancaster.ac.uk  Fri Jan 19 10:30:28 2018
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri, 19 Jan 2018 09:30:28 +0000
Subject: [R-pkg-devel] Licensing of an R package
In-Reply-To: <b71e33d951634a1f9a4f87269c534ac3@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
References: <b71e33d951634a1f9a4f87269c534ac3@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
Message-ID: <CANVKczPgsunwrPuO8Gha_Hy64ftX53Zj7ZyZeGFWF4Ch5-VG0w@mail.gmail.com>

Chris,

 you've not said what *you* would like the license for your software to do.
You could release the software under a "public domain", "no rights
reserved" style license, and then if people want to link it with
proprietary materials then nothing can stop them. But it wouldn't stop
people commercialising (what was) your code, modifying it, re-releasing it
as binary and without source, and so on.

 Once you've decided which things you want to permit or restrict under your
license then you can see if there's a pre-existing one that matches your
requirements, or whether you have to write one yourself! Good luck with
that option!

 https://opensource.org/license/MIT is one of the more permissive open
source licenses - check the others on there for more info.

Barry





On Fri, Jan 19, 2018 at 8:31 AM, Chris Brien <Chris.Brien at unisa.edu.au>
wrote:

> Dear list members,
>
> I have come to realize that my understanding of free software licensing
> was somewhat na?ve. The problem is that I now find that, in spite of
> spending quite a bit of time reading about various licenses on the web, I
> have been unable to identify a suitable license for the situation that I
> have with one of my packages.
>
> I am solely responsible for the development of my package, `foo' say.
> However, most functions in `foo' call functions from a proprietary package,
> `bar' say , the latter not being available from an online software
> repository and consisting of R functions that call routines in a library.
> That is, `foo' enhances `bar'.
>
> I had thought that a GPL licence was appropriate because (1) `foo' is free
> software and (ii) I do not distribute `bar' with `foo'. That is, I am
> distributing only free software.  However, I have come to understand that
> this is not the case because a free software package linked with a
> proprietary package does not satisfy the requirements to be GPL.
>
> I have found it difficult to work out a license that might cover my
> package because much of the discussion online covers cases that are the
> opposite of mine i.e. cases where `foo' is proprietary and `bar' is
> freeware. I can appreciate why this needs to be avoided.
>
> I can also understand that a disadvantage of what I am doing is that it
> tends to entrench the use of such software. While I agree that it is
> desirable that `bar' be replaced with free software, unfortunately `bar'
> has functionality that is currently infeasible to replace with free
> software. At least I am not profiting from the enhancements that I have
> made.
>
> I am hoping that someone more experienced in software development and
> licensing issues can suggest a license type that might be suitable for
> `foo' such that at least the enhancements that it incorporates remain
> `free'?
>
> Cheers,
>
>   Chris Brien
>
> Adjunct Senior Lecturer in Statistics
> -----
> Phenomics and Bioinformatics Research Centre
> University of South Australia
> GPO Box 2471
> ADELAIDE  5001  South Australia
> Phone:  +61 8 8302 5535   Fax:  +61 8 8302 5785
> Email:   Chris.Brien at unisa.edu.au
> WEB page:  <http://people.unisa.edu.au/Chris.Brien>
> CRICOS No 00121B
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From Chris.Brien at unisa.edu.au  Fri Jan 19 11:19:21 2018
From: Chris.Brien at unisa.edu.au (Chris Brien)
Date: Fri, 19 Jan 2018 10:19:21 +0000
Subject: [R-pkg-devel] Licensing of an R package
In-Reply-To: <CAHJFP8Tf-o_arMS0+om_7uahwoBZTc_oF61_0eU=ULouCX4xWw@mail.gmail.com>
References: <b71e33d951634a1f9a4f87269c534ac3@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
 <CAHJFP8Tf-o_arMS0+om_7uahwoBZTc_oF61_0eU=ULouCX4xWw@mail.gmail.com>
Message-ID: <37bed615c96b4bb3b3dafbadac771a1a@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>

Hi Stefan,

Here are the answers:

A) No, I am simply calling routines.
B) By proprietary I mean that it is a commercial package.
C) No, it seemed better to use short, distinctive names for the two packages and to focus on the essential issues, namely that `bar' is a commercial package and that `foo' is not.

Thanks for your interest.

Cheers,

  Chris


From: stefan.mckinnon.edwards at gmail.com [mailto:stefan.mckinnon.edwards at gmail.com] On Behalf Of Stefan McKinnon H?j-Edwards
Sent: Friday, 19 January 2018 7:58 PM
To: Chris Brien
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Licensing of an R package

Hi Chris,

Just for clarification, there are at least two aspects that affect how you can license your package.?

A) Do you distribute `bar` with your package, or are you simply calling routines in `bar`? 
B) What is the exact license of `bar`?
C) Is there a reason for this secrecy of `bar`? If we knew what it was, somebody on this list might have experience with it or similar.

If `bar` is not freely available, it doesn't seem your package would be accepted to CRAN (do correct me if I am wrong).

Kindly,
Stefan McKinnon Hoj-Edwards


Stefan McKinnon H?j-Edwards
ph.d. Genetics
+44 (0)776 231 2464
+45 2888 6598
Skype: stefan_edwards

2018-01-19 8:31 GMT+00:00 Chris Brien <Chris.Brien at unisa.edu.au>:
Dear list members,

I have come to realize that my understanding of free software licensing was somewhat na?ve. The problem is that I now find that, in spite of spending quite a bit of time reading about various licenses on the web, I have been unable to identify a suitable license for the situation that I have with one of my packages.

I am solely responsible for the development of my package, `foo' say. However, most functions in `foo' call functions from a proprietary package, `bar' say , the latter not being available from an online software repository and consisting of R functions that call routines in a library. That is, `foo' enhances `bar'.

I had thought that a GPL licence was appropriate because (1) `foo' is free software and (ii) I do not distribute `bar' with `foo'. That is, I am distributing only free software.? However, I have come to understand that this is not the case because a free software package linked with a proprietary package does not satisfy the requirements to be GPL.

I have found it difficult to work out a license that might cover my package because much of the discussion online covers cases that are the opposite of mine i.e. cases where `foo' is proprietary and `bar' is freeware. I can appreciate why this needs to be avoided.

I can also understand that a disadvantage of what I am doing is that it tends to entrench the use of such software. While I agree that it is desirable that `bar' be replaced with free software, unfortunately `bar' has functionality that is currently infeasible to replace with free software. At least I am not profiting from the enhancements that I have made.

I am hoping that someone more experienced in software development and licensing issues can suggest a license type that might be suitable for `foo' such that at least the enhancements that it incorporates remain `free'?

Cheers,

? Chris Brien

Adjunct Senior Lecturer in Statistics
-----
Phenomics and Bioinformatics Research Centre
University of South Australia
GPO Box 2471
ADELAIDE? 5001? South Australia
Phone:? +61 8 8302 5535? ?Fax:? +61 8 8302 5785
Email:?? Chris.Brien at unisa.edu.au
WEB page:? <http://people.unisa.edu.au/Chris.Brien>
CRICOS No 00121B

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From brian at braverock.com  Fri Jan 19 11:26:02 2018
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 19 Jan 2018 04:26:02 -0600
Subject: [R-pkg-devel] Licensing of an R package
In-Reply-To: <37bed615c96b4bb3b3dafbadac771a1a@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
References: <b71e33d951634a1f9a4f87269c534ac3@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
 <CAHJFP8Tf-o_arMS0+om_7uahwoBZTc_oF61_0eU=ULouCX4xWw@mail.gmail.com>
 <37bed615c96b4bb3b3dafbadac771a1a@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
Message-ID: <4420f3b1-413d-6558-04bb-4a1d939e0546@braverock.com>

Chris, on C) even commercial packages have licenses.  If the commercial 
package contains a linkable software library, that license is very 
important in this discussion, because it tells you (us) what you can do 
with that library.

It may say that you can distribute binary code you build with that 
library, or that you can link other proprietary software to it, or that 
you can do neither of those things.

So the exact license of 'bar' is important to this discussion as well.

There are a number of R packages on CRAN that link to commercial 
libraries or require a commercial library to be available (such as 
optimization routines), but the exact license of the commercial library 
needs to be known, and the desired behavior needs to be permitted.

Regards,

Brian

On 01/19/2018 04:19 AM, Chris Brien wrote:
> Hi Stefan,
> 
> Here are the answers:
> 
> A) No, I am simply calling routines.
> B) By proprietary I mean that it is a commercial package.
> C) No, it seemed better to use short, distinctive names for the two packages and to focus on the essential issues, namely that `bar' is a commercial package and that `foo' is not.
> 
> Thanks for your interest.
> 
> Cheers,
> 
>    Chris
> 
> 
> From: stefan.mckinnon.edwards at gmail.com [mailto:stefan.mckinnon.edwards at gmail.com] On Behalf Of Stefan McKinnon H?j-Edwards
> Sent: Friday, 19 January 2018 7:58 PM
> To: Chris Brien
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Licensing of an R package
> 
> Hi Chris,
> 
> Just for clarification, there are at least two aspects that affect how you can license your package.
> 
> A) Do you distribute `bar` with your package, or are you simply calling routines in `bar`?
> B) What is the exact license of `bar`?
> C) Is there a reason for this secrecy of `bar`? If we knew what it was, somebody on this list might have experience with it or similar.
> 
> If `bar` is not freely available, it doesn't seem your package would be accepted to CRAN (do correct me if I am wrong).
> 
> Kindly,
> Stefan McKinnon Hoj-Edwards
> 
> 
> Stefan McKinnon H?j-Edwards
> ph.d. Genetics
> +44 (0)776 231 2464
> +45 2888 6598
> Skype: stefan_edwards
> 
> 2018-01-19 8:31 GMT+00:00 Chris Brien <Chris.Brien at unisa.edu.au>:
> Dear list members,
> 
> I have come to realize that my understanding of free software licensing was somewhat na?ve. The problem is that I now find that, in spite of spending quite a bit of time reading about various licenses on the web, I have been unable to identify a suitable license for the situation that I have with one of my packages.
> 
> I am solely responsible for the development of my package, `foo' say. However, most functions in `foo' call functions from a proprietary package, `bar' say , the latter not being available from an online software repository and consisting of R functions that call routines in a library. That is, `foo' enhances `bar'.
> 
> I had thought that a GPL licence was appropriate because (1) `foo' is free software and (ii) I do not distribute `bar' with `foo'. That is, I am distributing only free software.? However, I have come to understand that this is not the case because a free software package linked with a proprietary package does not satisfy the requirements to be GPL.
> 
> I have found it difficult to work out a license that might cover my package because much of the discussion online covers cases that are the opposite of mine i.e. cases where `foo' is proprietary and `bar' is freeware. I can appreciate why this needs to be avoided.
> 
> I can also understand that a disadvantage of what I am doing is that it tends to entrench the use of such software. While I agree that it is desirable that `bar' be replaced with free software, unfortunately `bar' has functionality that is currently infeasible to replace with free software. At least I am not profiting from the enhancements that I have made.
> 
> I am hoping that someone more experienced in software development and licensing issues can suggest a license type that might be suitable for `foo' such that at least the enhancements that it incorporates remain `free'?
> 
> Cheers,
> 
>  ? Chris Brien
> 
> Adjunct Senior Lecturer in Statistics
> -----
> Phenomics and Bioinformatics Research Centre
> University of South Australia
> GPO Box 2471
> ADELAIDE? 5001? South Australia
> Phone:? +61 8 8302 5535? ?Fax:? +61 8 8302 5785
> Email:?? Chris.Brien at unisa.edu.au
> WEB page:? <http://people.unisa.edu.au/Chris.Brien>
> CRICOS No 00121B
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From Chris.Brien at unisa.edu.au  Fri Jan 19 11:28:28 2018
From: Chris.Brien at unisa.edu.au (Chris Brien)
Date: Fri, 19 Jan 2018 10:28:28 +0000
Subject: [R-pkg-devel] Licensing of an R package
In-Reply-To: <CANVKczPgsunwrPuO8Gha_Hy64ftX53Zj7ZyZeGFWF4Ch5-VG0w@mail.gmail.com>
References: <b71e33d951634a1f9a4f87269c534ac3@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
 <CANVKczPgsunwrPuO8Gha_Hy64ftX53Zj7ZyZeGFWF4Ch5-VG0w@mail.gmail.com>
Message-ID: <9daa8cfea23946bc869015e4a14733f4@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>

Hi Barry,

Ideally, I would prefer that my package remain open source.

However, I have considered MIT and the two BSD licenses and I understand that they are permissive. I have not ruled out using one of them.

The thing about those licenses is that I have not been able to find anything on the web about linking a proprietary and free package under those licenses. The information is not nearly as comprehensive as it is for GPL licenses.

The problem as I see it is that they are GPL compatible and so I do not understand how that can be the case and that you can apply the licence in my situation.

I agree that to write your own license is rather daunting. I would much prefer to use a pre-existing license.

Thanks for your comments.

Cheers,

  Chris



From: b.rowlingson at gmail.com [mailto:b.rowlingson at gmail.com] On Behalf Of Barry Rowlingson
Sent: Friday, 19 January 2018 8:00 PM
To: Chris Brien
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Licensing of an R package

Chris,

 you've not said what *you* would like the license for your software to do. You could release the software under a "public domain", "no rights reserved" style license, and then if people want to link it with proprietary materials then nothing can stop them. But it wouldn't stop people commercialising (what was) your code, modifying it, re-releasing it as binary and without source, and so on.

 Once you've decided which things you want to permit or restrict under your license then you can see if there's a pre-existing one that matches your requirements, or whether you have to write one yourself! Good luck with that option!

 https://opensource.org/license/MIT is one of the more permissive open source licenses - check the others on there for more info.

Barry



On Fri, Jan 19, 2018 at 8:31 AM, Chris Brien <Chris.Brien at unisa.edu.au<mailto:Chris.Brien at unisa.edu.au>> wrote:
Dear list members,

I have come to realize that my understanding of free software licensing was somewhat na?ve. The problem is that I now find that, in spite of spending quite a bit of time reading about various licenses on the web, I have been unable to identify a suitable license for the situation that I have with one of my packages.

I am solely responsible for the development of my package, `foo' say. However, most functions in `foo' call functions from a proprietary package, `bar' say , the latter not being available from an online software repository and consisting of R functions that call routines in a library. That is, `foo' enhances `bar'.

I had thought that a GPL licence was appropriate because (1) `foo' is free software and (ii) I do not distribute `bar' with `foo'. That is, I am distributing only free software.  However, I have come to understand that this is not the case because a free software package linked with a proprietary package does not satisfy the requirements to be GPL.

I have found it difficult to work out a license that might cover my package because much of the discussion online covers cases that are the opposite of mine i.e. cases where `foo' is proprietary and `bar' is freeware. I can appreciate why this needs to be avoided.

I can also understand that a disadvantage of what I am doing is that it tends to entrench the use of such software. While I agree that it is desirable that `bar' be replaced with free software, unfortunately `bar' has functionality that is currently infeasible to replace with free software. At least I am not profiting from the enhancements that I have made.

I am hoping that someone more experienced in software development and licensing issues can suggest a license type that might be suitable for `foo' such that at least the enhancements that it incorporates remain `free'?

Cheers,

  Chris Brien

Adjunct Senior Lecturer in Statistics
-----
Phenomics and Bioinformatics Research Centre
University of South Australia
GPO Box 2471
ADELAIDE  5001  South Australia
Phone:  +61 8 8302 5535<tel:%2B61%208%208302%205535>   Fax:  +61 8 8302 5785<tel:%2B61%208%208302%205785>
Email:   Chris.Brien at unisa.edu.au<mailto:Chris.Brien at unisa.edu.au>
WEB page:  <http://people.unisa.edu.au/Chris.Brien>
CRICOS No 00121B

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From Chris.Brien at unisa.edu.au  Fri Jan 19 12:20:44 2018
From: Chris.Brien at unisa.edu.au (Chris Brien)
Date: Fri, 19 Jan 2018 11:20:44 +0000
Subject: [R-pkg-devel] Licensing of an R package
In-Reply-To: <4420f3b1-413d-6558-04bb-4a1d939e0546@braverock.com>
References: <b71e33d951634a1f9a4f87269c534ac3@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
 <CAHJFP8Tf-o_arMS0+om_7uahwoBZTc_oF61_0eU=ULouCX4xWw@mail.gmail.com>
 <37bed615c96b4bb3b3dafbadac771a1a@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
 <4420f3b1-413d-6558-04bb-4a1d939e0546@braverock.com>
Message-ID: <84405a385280430aa051f39675913f50@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>

Hi Brian,

Fair point that even commercial packages have licenses.

In this case you can do neither of the things that you suggest might be possible. It is the reason that I have never contemplated distributing `bar' with `foo'.

Cheers,

  Chris

-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Brian G. Peterson
Sent: 19 January 2018 20:56
To: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Licensing of an R package

Chris, on C) even commercial packages have licenses.  If the commercial package contains a linkable software library, that license is very important in this discussion, because it tells you (us) what you can do with that library.

It may say that you can distribute binary code you build with that library, or that you can link other proprietary software to it, or that you can do neither of those things.

So the exact license of 'bar' is important to this discussion as well.

There are a number of R packages on CRAN that link to commercial libraries or require a commercial library to be available (such as optimization routines), but the exact license of the commercial library needs to be known, and the desired behavior needs to be permitted.

Regards,

Brian

On 01/19/2018 04:19 AM, Chris Brien wrote:
> Hi Stefan,
> 
> Here are the answers:
> 
> A) No, I am simply calling routines.
> B) By proprietary I mean that it is a commercial package.
> C) No, it seemed better to use short, distinctive names for the two packages and to focus on the essential issues, namely that `bar' is a commercial package and that `foo' is not.
> 
> Thanks for your interest.
> 
> Cheers,
> 
>    Chris
> 
> 
> From: stefan.mckinnon.edwards at gmail.com 
> [mailto:stefan.mckinnon.edwards at gmail.com] On Behalf Of Stefan 
> McKinnon H?j-Edwards
> Sent: Friday, 19 January 2018 7:58 PM
> To: Chris Brien
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Licensing of an R package
> 
> Hi Chris,
> 
> Just for clarification, there are at least two aspects that affect how you can license your package.
> 
> A) Do you distribute `bar` with your package, or are you simply calling routines in `bar`?
> B) What is the exact license of `bar`?
> C) Is there a reason for this secrecy of `bar`? If we knew what it was, somebody on this list might have experience with it or similar.
> 
> If `bar` is not freely available, it doesn't seem your package would be accepted to CRAN (do correct me if I am wrong).
> 
> Kindly,
> Stefan McKinnon Hoj-Edwards
> 
> 
> Stefan McKinnon H?j-Edwards
> ph.d. Genetics
> +44 (0)776 231 2464
> +45 2888 6598
> Skype: stefan_edwards
> 
> 2018-01-19 8:31 GMT+00:00 Chris Brien <Chris.Brien at unisa.edu.au>:
> Dear list members,
> 
> I have come to realize that my understanding of free software licensing was somewhat na?ve. The problem is that I now find that, in spite of spending quite a bit of time reading about various licenses on the web, I have been unable to identify a suitable license for the situation that I have with one of my packages.
> 
> I am solely responsible for the development of my package, `foo' say. However, most functions in `foo' call functions from a proprietary package, `bar' say , the latter not being available from an online software repository and consisting of R functions that call routines in a library. That is, `foo' enhances `bar'.
> 
> I had thought that a GPL licence was appropriate because (1) `foo' is free software and (ii) I do not distribute `bar' with `foo'. That is, I am distributing only free software.? However, I have come to understand that this is not the case because a free software package linked with a proprietary package does not satisfy the requirements to be GPL.
> 
> I have found it difficult to work out a license that might cover my package because much of the discussion online covers cases that are the opposite of mine i.e. cases where `foo' is proprietary and `bar' is freeware. I can appreciate why this needs to be avoided.
> 
> I can also understand that a disadvantage of what I am doing is that it tends to entrench the use of such software. While I agree that it is desirable that `bar' be replaced with free software, unfortunately `bar' has functionality that is currently infeasible to replace with free software. At least I am not profiting from the enhancements that I have made.
> 
> I am hoping that someone more experienced in software development and licensing issues can suggest a license type that might be suitable for `foo' such that at least the enhancements that it incorporates remain `free'?
> 
> Cheers,
> 
>  ? Chris Brien
> 
> Adjunct Senior Lecturer in Statistics
> -----
> Phenomics and Bioinformatics Research Centre University of South 
> Australia GPO Box 2471 ADELAIDE? 5001? South Australia
> Phone:? +61 8 8302 5535? ?Fax:? +61 8 8302 5785
> Email:?? Chris.Brien at unisa.edu.au
> WEB page:? <http://people.unisa.edu.au/Chris.Brien>
> CRICOS No 00121B
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


--
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel

From b.rowlingson at lancaster.ac.uk  Fri Jan 19 12:22:50 2018
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri, 19 Jan 2018 11:22:50 +0000
Subject: [R-pkg-devel] Licensing of an R package
In-Reply-To: <9daa8cfea23946bc869015e4a14733f4@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
References: <b71e33d951634a1f9a4f87269c534ac3@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
 <CANVKczPgsunwrPuO8Gha_Hy64ftX53Zj7ZyZeGFWF4Ch5-VG0w@mail.gmail.com>
 <9daa8cfea23946bc869015e4a14733f4@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
Message-ID: <CANVKczPVEvKJPUC6EFCAY8M2Zw6KY_OhsqZBu-wb8J1ADksswQ@mail.gmail.com>

On Fri, Jan 19, 2018 at 10:28 AM, Chris Brien <Chris.Brien at unisa.edu.au>
wrote:

> Hi Barry,
>
> Ideally, I would prefer that my package remain open source.
>
> However, I have considered MIT and the two BSD licenses and I understand
> that they are permissive. I have not ruled out using one of them.
>
> The thing about those licenses is that I have not been able to find
> anything on the web about linking a proprietary and free package under
> those licenses. The information is not nearly as comprehensive as it is for
> GPL licenses.
>
>     You're not distributing the proprietary package, and the MIT license
doesn't restrict use in any way, including linking with proprietary
software. So you can MIT-license your code and it remains open source, can
link with EvilCorps `bar` package, and it guarantees your (c) notice and
the MIT license will be preserved on copies of your code (it can't be
re-licensed under a different license).


> The problem as I see it is that they are GPL compatible and so I do not
> understand how that can be the case and that you can apply the licence in
> my situation.
>
>
GPL-compatible means you can put MIT-license code together with GPL-license
code and distribute the combination *under the GPL license*. This doesn't
work the other way round - you can't bring GPL-licensed code into an
MIT-license codebase and distribute that under MIT-license!

Interestingly GNU doesn't seem to acknowledge the existence of a "MIT
License" although OSI does. To GNU, the "MIT LIcense" is a number of
possible licenses, and this might be why CRAN insist on inclusion of the
license file itself with anything branded "MIT License":

https://www.gnu.org/licenses/license-list.html


Barry



> I agree that to write your own license is rather daunting. I would much
> prefer to use a pre-existing license.
>
> Thanks for your comments.
>
> Cheers,
>
>   Chris
>
>
>
> From: b.rowlingson at gmail.com [mailto:b.rowlingson at gmail.com] On Behalf Of
> Barry Rowlingson
> Sent: Friday, 19 January 2018 8:00 PM
> To: Chris Brien
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Licensing of an R package
>
> Chris,
>
>  you've not said what *you* would like the license for your software to
> do. You could release the software under a "public domain", "no rights
> reserved" style license, and then if people want to link it with
> proprietary materials then nothing can stop them. But it wouldn't stop
> people commercialising (what was) your code, modifying it, re-releasing it
> as binary and without source, and so on.
>
>  Once you've decided which things you want to permit or restrict under
> your license then you can see if there's a pre-existing one that matches
> your requirements, or whether you have to write one yourself! Good luck
> with that option!
>
>  https://opensource.org/license/MIT is one of the more permissive open
> source licenses - check the others on there for more info.
>
> Barry
>
>
>
> On Fri, Jan 19, 2018 at 8:31 AM, Chris Brien <Chris.Brien at unisa.edu.au<
> mailto:Chris.Brien at unisa.edu.au>> wrote:
> Dear list members,
>
> I have come to realize that my understanding of free software licensing
> was somewhat na?ve. The problem is that I now find that, in spite of
> spending quite a bit of time reading about various licenses on the web, I
> have been unable to identify a suitable license for the situation that I
> have with one of my packages.
>
> I am solely responsible for the development of my package, `foo' say.
> However, most functions in `foo' call functions from a proprietary package,
> `bar' say , the latter not being available from an online software
> repository and consisting of R functions that call routines in a library.
> That is, `foo' enhances `bar'.
>
> I had thought that a GPL licence was appropriate because (1) `foo' is free
> software and (ii) I do not distribute `bar' with `foo'. That is, I am
> distributing only free software.  However, I have come to understand that
> this is not the case because a free software package linked with a
> proprietary package does not satisfy the requirements to be GPL.
>
> I have found it difficult to work out a license that might cover my
> package because much of the discussion online covers cases that are the
> opposite of mine i.e. cases where `foo' is proprietary and `bar' is
> freeware. I can appreciate why this needs to be avoided.
>
> I can also understand that a disadvantage of what I am doing is that it
> tends to entrench the use of such software. While I agree that it is
> desirable that `bar' be replaced with free software, unfortunately `bar'
> has functionality that is currently infeasible to replace with free
> software. At least I am not profiting from the enhancements that I have
> made.
>
> I am hoping that someone more experienced in software development and
> licensing issues can suggest a license type that might be suitable for
> `foo' such that at least the enhancements that it incorporates remain
> `free'?
>
> Cheers,
>
>   Chris Brien
>
> Adjunct Senior Lecturer in Statistics
> -----
> Phenomics and Bioinformatics Research Centre
> University of South Australia
> GPO Box 2471
> ADELAIDE  5001  South Australia
> Phone:  +61 8 8302 5535<tel:%2B61%208%208302%205535>   Fax:  +61 8 8302
> 5785<tel:%2B61%208%208302%205785>
> Email:   Chris.Brien at unisa.edu.au<mailto:Chris.Brien at unisa.edu.au>
> WEB page:  <http://people.unisa.edu.au/Chris.Brien>
> CRICOS No 00121B
>
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org>
> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Fri Jan 19 15:33:53 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 19 Jan 2018 09:33:53 -0500
Subject: [R-pkg-devel] Licensing of an R package
In-Reply-To: <b71e33d951634a1f9a4f87269c534ac3@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
References: <b71e33d951634a1f9a4f87269c534ac3@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
Message-ID: <aa3377b8-814e-4e4f-08bd-496341aad889@gmail.com>

On 19/01/2018 3:31 AM, Chris Brien wrote:
> Dear list members,
> 
> I have come to realize that my understanding of free software licensing was somewhat na?ve. The problem is that I now find that, in spite of spending quite a bit of time reading about various licenses on the web, I have been unable to identify a suitable license for the situation that I have with one of my packages.
> 
> I am solely responsible for the development of my package, `foo' say. However, most functions in `foo' call functions from a proprietary package, `bar' say , the latter not being available from an online software repository and consisting of R functions that call routines in a library. That is, `foo' enhances `bar'.
> 
> I had thought that a GPL licence was appropriate because (1) `foo' is free software and (ii) I do not distribute `bar' with `foo'. That is, I am distributing only free software.  However, I have come to understand that this is not the case because a free software package linked with a proprietary package does not satisfy the requirements to be GPL.

 From your 2nd paragraph, you can license your package any way you like. 
  You own the copyright to all of it.

You can use GPL if you feel like it.  The license you choose doesn't 
limit anything *you* do, it grants rights to other people to do things 
with your code.  Without those rights, it would be a copyright violation 
for them to make copies of your package.  With them, they are allowed to 
make and distribute copies provided they follow the terms of the license.

If you choose GPL, then other people (like CRAN) can redistribute your 
package under the terms of the GPL.  That should be enough for CRAN, but 
they might not accept your package since they can't test it (unless they 
have the rights to use "bar").

Nobody (not even the company who owns the rights to "bar") can link your 
package to "bar" and redistribute the combination, because that would 
violate the GPL, and you never gave them the right to do that.  You 
can't do it unless that company gives you permission, and apparently 
they haven't.

Duncan Murdoch


From edd at debian.org  Fri Jan 19 17:00:12 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri, 19 Jan 2018 10:00:12 -0600
Subject: [R-pkg-devel] Licensing of an R package
In-Reply-To: <aa3377b8-814e-4e4f-08bd-496341aad889@gmail.com>
References: <b71e33d951634a1f9a4f87269c534ac3@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
 <aa3377b8-814e-4e4f-08bd-496341aad889@gmail.com>
Message-ID: <23138.5644.444828.327712@bud.eddelbuettel.com>


Chris,

I am with Duncan here.

You can license _your_ package any way you want and prefer. I like GPL.

You seem to imply that the GPL license prohibits linking against commercial
code.  If that were the case we'd never have R, Emacs, gcc/g++, ... on
Windows or macOS or any of the now-essentially-extinct commercial Unux
flavours.  We alway link against their system libraries too.

Also look eg at our Rblpapi package.  The Bloomberg API is not open source,
but they allow distribution of the (pre-built) library and headers.  Our
package, building on top, is GPL-2+. No issues.  (This example is extra fun
because CRAN can't distribute the API, but can use it for building our
package. Using the package requires having a commercial and expensive
Bloomberg terminal license and installation.)

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd at debian.org  Fri Jan 19 17:09:44 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri, 19 Jan 2018 10:09:44 -0600
Subject: [R-pkg-devel] Licensing of an R package
In-Reply-To: <23138.5644.444828.327712@bud.eddelbuettel.com>
References: <b71e33d951634a1f9a4f87269c534ac3@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
 <aa3377b8-814e-4e4f-08bd-496341aad889@gmail.com>
 <23138.5644.444828.327712@bud.eddelbuettel.com>
Message-ID: <23138.6216.708603.789681@bud.eddelbuettel.com>


On 19 January 2018 at 10:00, Dirk Eddelbuettel wrote:
| Also look eg at our Rblpapi package.  The Bloomberg API is not open source,
| but they allow distribution of the (pre-built) library and headers.  Our
| package, building on top, is GPL-2+. No issues.  (This example is extra fun

Correction. It's GPL-3.  And CRAN also makes us include a file LICENSE
stating all that is needed to know here w.r.t Bloomberg.

https://github.com/Rblp/Rblpapi/blob/master/LICENSE

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From Chris.Brien at unisa.edu.au  Fri Jan 19 21:28:51 2018
From: Chris.Brien at unisa.edu.au (Chris Brien)
Date: Fri, 19 Jan 2018 20:28:51 +0000
Subject: [R-pkg-devel] Licensing of an R package
In-Reply-To: <23138.5644.444828.327712@bud.eddelbuettel.com>
References: <b71e33d951634a1f9a4f87269c534ac3@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
 <aa3377b8-814e-4e4f-08bd-496341aad889@gmail.com>
 <23138.5644.444828.327712@bud.eddelbuettel.com>
Message-ID: <eec3710958dd400786d92b0a167f6351@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>

Hi Dirk & Duncan,

I too like GPL and I had thought that the situation was as Duncan outlines. Consequently, I had licensed `foo' as GPL >= 2.

However, because I have been unable to find a discussion of my case, in spite of the extensive material about GNU licensing on the web, I have had difficulty deciding whether or not I was mistaken in applying a GPL license. 

It does seem that the open source philosophy is that all software should be open source and GPL licensing is to promote this, which it does by restricting how you can apply GPL licensing. It would be consistent with this philosophy that GPL does not allow one to `link' with a commercial package. However, somewhat reluctantly it seems, an exception is made under GPL licensing  for linking to commercial `system libraries' because it is necessary to allow this for things like R etc. 

If Bloomberg API is a system library then it also qualifies as an exception. (I have seen the license file and note that you are able to distribute the API.)

In my case `bar' is asreml and I don't believe that it qualifies as a system library. However, I can use it to build my library (asremlPlus) and the maintainers and license owners know that I do this. As a result I am still unsure that GPL can be applied in my case.

Ugh! It is a minefield.

Thanks muchly for your input.

Cheers,

  Chris


-----Original Message-----
From: Dirk Eddelbuettel [mailto:dirk.eddelbuettel at gmail.com] On Behalf Of Dirk Eddelbuettel
Sent: Saturday, 20 January 2018 2:30 AM
To: Duncan Murdoch
Cc: Chris Brien; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Licensing of an R package


Chris,

I am with Duncan here.

You can license _your_ package any way you want and prefer. I like GPL.

You seem to imply that the GPL license prohibits linking against commercial code.  If that were the case we'd never have R, Emacs, gcc/g++, ... on Windows or macOS or any of the now-essentially-extinct commercial Unux flavours.  We alway link against their system libraries too.

Also look eg at our Rblpapi package.  The Bloomberg API is not open source, but they allow distribution of the (pre-built) library and headers.  Our package, building on top, is GPL-2+. No issues.  (This example is extra fun because CRAN can't distribute the API, but can use it for building our package. Using the package requires having a commercial and expensive Bloomberg terminal license and installation.)

Dirk

--
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From dnz.marcio at gmail.com  Sat Jan 20 18:47:42 2018
From: dnz.marcio at gmail.com (=?UTF-8?Q?M=C3=A1rcio_Augusto_Diniz?=)
Date: Sat, 20 Jan 2018 09:47:42 -0800
Subject: [R-pkg-devel] R-package did not pass the incoming checks
	automatically
Message-ID: <CAE8vN1eKorHKUoFHwjxhagZZ9_KuyfLd=JgJ2YdHMUT4Usg_qw@mail.gmail.com>

Hello all,

I submitted my package (
https://cran.r-project.org/web/packages/ewoc/index.html) to CRAN and it did
not pass the automatic checks of win_builder. However,  I did not have the
same error or warning messages when I ran devtools::win_builder() and
devtools::run_examples() before. I had the same notes, though.

See message from win_builder() CRAN:

* using log directory 'd:/RCompile/CRANincoming/R-devel/ewoc.Rcheck'
* using R Under development (unstable) (2018-01-19 r74138)
* using platform: x86_64-w64-mingw32 (64-bit)
* using session charset: ISO8859-1
* checking for file 'ewoc/DESCRIPTION' ... OK
* checking extension type ... Package
* this is package 'ewoc' version '0.1.1'
* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Marcio A. Diniz <marcio.diniz at cshs.org>'

Found the following (possibly) invalid URLs:
  URL: https://cran.rstudio.com/web/packages/ewoc/index.html
    From: README.md
    Status: 200
    Message: OK
    CRAN URL not in canonical form
  Canonical CRAN.R-project.org URLs use https.
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking serialized R objects in the sources ... OK
* checking whether package 'ewoc' can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* loading checks for arch 'i386'
** checking whether the package can be loaded ... OK
** checking whether the package can be loaded with stated dependencies ...
OK
** checking whether the package can be unloaded cleanly ... OK
** checking whether the namespace can be loaded with stated dependencies
... OK
** checking whether the namespace can be unloaded cleanly ... OK
** checking loading without being on the library search path ... OK
** checking use of S3 registration ... OK
* loading checks for arch 'x64'
** checking whether the package can be loaded ... OK
** checking whether the package can be loaded with stated dependencies ...
OK
** checking whether the package can be unloaded cleanly ... OK
** checking whether the namespace can be loaded with stated dependencies
... OK
** checking whether the namespace can be unloaded cleanly ... OK
** checking loading without being on the library search path ... WARNING
Error: package or namespace load failed for 'ewoc' in namespaceExport(ns,
exports):
 undefined exports: iter, nextElem, isplit, irnorm, irunif, irbinom,
irnbinom, irpois, icount, idiv, ireadLines, iread.table, icountn, iapply
In addition: Warning message:
S3 methods 'iter.default', 'iter.iter', 'iter.matrix', 'iter.data.frame',
'iter.function', 'nextElem.containeriter', 'nextElem.matrixiter',
'nextElem.dataframeiter', 'nextElem.funiter', 'nextElem.abstractiter',
'as.list.iter', 'isplit.default', 'isplit.data.frame' were declared in
NAMESPACE but not found
Execution halted

It looks like this package has a loading problem when not on .libPaths:
see the messages for details.
** checking use of S3 registration ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... [15s] OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd line widths ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking examples ...
** running examples for arch 'i386' ... [51s] NOTE
Examples with CPU or elapsed time > 10s
                user system elapsed
ewoc_simulation 1.65   0.01    17.4
** running examples for arch 'x64' ... ERROR
Running examples in 'ewoc-Ex.R' failed
The error most likely occurred in:

> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
> ### Name: optimal_toxicity
> ### Title: Percent of doses in relation the optimal toxicity interval
> ### Aliases: optimal_toxicity
>
> ### ** Examples
>
> ## Don't show:
> DLT <- 0
> dose <- 30
> step_zero <- ewoc_d1classic(DLT ~ dose, type = 'discrete',
+                            theta = 0.33, alpha = 0.25,
+                            min_dose = 0, max_dose = 100,
+                            dose_set = seq(0, 100, 20),
+                            rho_prior = matrix(1, ncol = 2, nrow = 1),
+                            mtd_prior = matrix(1, ncol = 2, nrow = 1),
+                            rounding = "nearest")
Warning in limits_d1nocov(first_dose = first_dose, last_dose = last_dose,  :
  'first_dose' and  'last_dose' were defined as the first and last elements
of 'dose_set', respectively.
Compiling model graph
   Resolving undeclared variables
   Allocating nodes
Graph information:
   Observed stochastic nodes: 1
   Unobserved stochastic nodes: 2
   Total graph size: 32

Initializing model

> response_sim <- response_d1classic(rho = 0.05, mtd = 20, theta = 0.33,
+                                   min_dose = 10, max_dose = 50)
> pdlt_sim <- pdlt_d1classic(rho = 0.05, mtd = 20, theta = 0.33,
+                           min_dose = 10, max_dose = 50)
> sim <- ewoc_simulation(step_zero = step_zero,
+                        n_sim = 1, sample_size = 2,
+                        alpha_strategy = "increasing",
+                        response_sim = response_sim,
+                        ncores = 2)
Error in { : task 1 failed - "could not find function "feasibility""
Calls: ewoc_simulation ... ewoc_simulation.ewoc_d1classic -> %dopar% ->
<Anonymous>
Execution halted
* checking PDF version of manual ... OK
* DONE
Status: 1 ERROR, 1 WARNING, 2 NOTEs


Any thoughts?

Thank you,

-- 
M?rcio Diniz

	[[alternative HTML version deleted]]


From roy.mendelssohn at noaa.gov  Sat Jan 20 19:05:47 2018
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Sat, 20 Jan 2018 10:05:47 -0800
Subject: [R-pkg-devel] R-package did not pass the incoming checks
 automatically
In-Reply-To: <CAE8vN1eKorHKUoFHwjxhagZZ9_KuyfLd=JgJ2YdHMUT4Usg_qw@mail.gmail.com>
References: <CAE8vN1eKorHKUoFHwjxhagZZ9_KuyfLd=JgJ2YdHMUT4Usg_qw@mail.gmail.com>
Message-ID: <0D519680-00AF-4C96-AB6B-2FC3844EAA37@noaa.gov>

Hi M?rcio:

I do not have solutions to your specific problems, but the errors do appear to be coming from the development version of R.  When you run devtools::build_win(), run it twice,  once as:

devtools::build_win(version = "R-release")

and once with 

devtools::build_win(version = "R-devel")

which is then more likely to produce the CRAN results before you submit.  Also,  as Henrik Bengtsson explained on this list a few weeks ago:

> As far as I understand it, the new R-devel tests basically tests your
> package with the minimal setup of packages (a "sandboxed" .libPaths())
> inferred from you DESCRIPTION (by excluding Suggests of the packages
> you depend on, which is where I think 'webshot' lives).

So R-devel can give different results,  and you need to make certain that your Imports and Suggests includes anything that might not be loaded.

Hope this helps some.

-Roy

> On Jan 20, 2018, at 9:47 AM, M?rcio Augusto Diniz <dnz.marcio at gmail.com> wrote:
> 
> Hello all,
> 
> I submitted my package (
> https://cran.r-project.org/web/packages/ewoc/index.html) to CRAN and it did
> not pass the automatic checks of win_builder. However,  I did not have the
> same error or warning messages when I ran devtools::win_builder() and
> devtools::run_examples() before. I had the same notes, though.
> 
> See message from win_builder() CRAN:
> 
> * using log directory 'd:/RCompile/CRANincoming/R-devel/ewoc.Rcheck'
> * using R Under development (unstable) (2018-01-19 r74138)
> * using platform: x86_64-w64-mingw32 (64-bit)
> * using session charset: ISO8859-1
> * checking for file 'ewoc/DESCRIPTION' ... OK
> * checking extension type ... Package
> * this is package 'ewoc' version '0.1.1'
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: 'Marcio A. Diniz <marcio.diniz at cshs.org>'
> 
> Found the following (possibly) invalid URLs:
>  URL: https://cran.rstudio.com/web/packages/ewoc/index.html
>    From: README.md
>    Status: 200
>    Message: OK
>    CRAN URL not in canonical form
>  Canonical CRAN.R-project.org URLs use https.
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking serialized R objects in the sources ... OK
> * checking whether package 'ewoc' can be installed ... OK
> * checking installed package size ... OK
> * checking package directory ... OK
> * checking DESCRIPTION meta-information ... OK
> * checking top-level files ... OK
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * loading checks for arch 'i386'
> ** checking whether the package can be loaded ... OK
> ** checking whether the package can be loaded with stated dependencies ...
> OK
> ** checking whether the package can be unloaded cleanly ... OK
> ** checking whether the namespace can be loaded with stated dependencies
> ... OK
> ** checking whether the namespace can be unloaded cleanly ... OK
> ** checking loading without being on the library search path ... OK
> ** checking use of S3 registration ... OK
> * loading checks for arch 'x64'
> ** checking whether the package can be loaded ... OK
> ** checking whether the package can be loaded with stated dependencies ...
> OK
> ** checking whether the package can be unloaded cleanly ... OK
> ** checking whether the namespace can be loaded with stated dependencies
> ... OK
> ** checking whether the namespace can be unloaded cleanly ... OK
> ** checking loading without being on the library search path ... WARNING
> Error: package or namespace load failed for 'ewoc' in namespaceExport(ns,
> exports):
> undefined exports: iter, nextElem, isplit, irnorm, irunif, irbinom,
> irnbinom, irpois, icount, idiv, ireadLines, iread.table, icountn, iapply
> In addition: Warning message:
> S3 methods 'iter.default', 'iter.iter', 'iter.matrix', 'iter.data.frame',
> 'iter.function', 'nextElem.containeriter', 'nextElem.matrixiter',
> 'nextElem.dataframeiter', 'nextElem.funiter', 'nextElem.abstractiter',
> 'as.list.iter', 'isplit.default', 'isplit.data.frame' were declared in
> NAMESPACE but not found
> Execution halted
> 
> It looks like this package has a loading problem when not on .libPaths:
> see the messages for details.
> ** checking use of S3 registration ... OK
> * checking dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... [15s] OK
> * checking Rd files ... OK
> * checking Rd metadata ... OK
> * checking Rd line widths ... OK
> * checking Rd cross-references ... OK
> * checking for missing documentation entries ... OK
> * checking for code/documentation mismatches ... OK
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking examples ...
> ** running examples for arch 'i386' ... [51s] NOTE
> Examples with CPU or elapsed time > 10s
>                user system elapsed
> ewoc_simulation 1.65   0.01    17.4
> ** running examples for arch 'x64' ... ERROR
> Running examples in 'ewoc-Ex.R' failed
> The error most likely occurred in:
> 
>> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>> ### Name: optimal_toxicity
>> ### Title: Percent of doses in relation the optimal toxicity interval
>> ### Aliases: optimal_toxicity
>> 
>> ### ** Examples
>> 
>> ## Don't show:
>> DLT <- 0
>> dose <- 30
>> step_zero <- ewoc_d1classic(DLT ~ dose, type = 'discrete',
> +                            theta = 0.33, alpha = 0.25,
> +                            min_dose = 0, max_dose = 100,
> +                            dose_set = seq(0, 100, 20),
> +                            rho_prior = matrix(1, ncol = 2, nrow = 1),
> +                            mtd_prior = matrix(1, ncol = 2, nrow = 1),
> +                            rounding = "nearest")
> Warning in limits_d1nocov(first_dose = first_dose, last_dose = last_dose,  :
>  'first_dose' and  'last_dose' were defined as the first and last elements
> of 'dose_set', respectively.
> Compiling model graph
>   Resolving undeclared variables
>   Allocating nodes
> Graph information:
>   Observed stochastic nodes: 1
>   Unobserved stochastic nodes: 2
>   Total graph size: 32
> 
> Initializing model
> 
>> response_sim <- response_d1classic(rho = 0.05, mtd = 20, theta = 0.33,
> +                                   min_dose = 10, max_dose = 50)
>> pdlt_sim <- pdlt_d1classic(rho = 0.05, mtd = 20, theta = 0.33,
> +                           min_dose = 10, max_dose = 50)
>> sim <- ewoc_simulation(step_zero = step_zero,
> +                        n_sim = 1, sample_size = 2,
> +                        alpha_strategy = "increasing",
> +                        response_sim = response_sim,
> +                        ncores = 2)
> Error in { : task 1 failed - "could not find function "feasibility""
> Calls: ewoc_simulation ... ewoc_simulation.ewoc_d1classic -> %dopar% ->
> <Anonymous>
> Execution halted
> * checking PDF version of manual ... OK
> * DONE
> Status: 1 ERROR, 1 WARNING, 2 NOTEs
> 
> 
> Any thoughts?
> 
> Thank you,
> 
> -- 
> M?rcio Diniz
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From hugh.parsonage at gmail.com  Sat Jan 20 20:31:49 2018
From: hugh.parsonage at gmail.com (Hugh Parsonage)
Date: Sat, 20 Jan 2018 19:31:49 +0000
Subject: [R-pkg-devel] R-package did not pass the incoming checks
	automatically
In-Reply-To: <0D519680-00AF-4C96-AB6B-2FC3844EAA37@noaa.gov>
References: <CAE8vN1eKorHKUoFHwjxhagZZ9_KuyfLd=JgJ2YdHMUT4Usg_qw@mail.gmail.com>
 <0D519680-00AF-4C96-AB6B-2FC3844EAA37@noaa.gov>
Message-ID: <CAJmOi+OHKMWhiqQuSA2csut4DjFZ7EGRGPt+CsCYQhOFitGAhA@mail.gmail.com>

Use the url at the bottom of the linked page, i.e.
https://cran.r-project.org/package=ewoc

On Sun, 21 Jan 2018 at 5:06 am, Roy Mendelssohn - NOAA Federal <
roy.mendelssohn at noaa.gov> wrote:

> Hi M?rcio:
>
> I do not have solutions to your specific problems, but the errors do
> appear to be coming from the development version of R.  When you run
> devtools::build_win(), run it twice,  once as:
>
> devtools::build_win(version = "R-release")
>
> and once with
>
> devtools::build_win(version = "R-devel")
>
> which is then more likely to produce the CRAN results before you submit.
> Also,  as Henrik Bengtsson explained on this list a few weeks ago:
>
> > As far as I understand it, the new R-devel tests basically tests your
> > package with the minimal setup of packages (a "sandboxed" .libPaths())
> > inferred from you DESCRIPTION (by excluding Suggests of the packages
> > you depend on, which is where I think 'webshot' lives).
>
> So R-devel can give different results,  and you need to make certain that
> your Imports and Suggests includes anything that might not be loaded.
>
> Hope this helps some.
>
> -Roy
>
> > On Jan 20, 2018, at 9:47 AM, M?rcio Augusto Diniz <dnz.marcio at gmail.com>
> wrote:
> >
> > Hello all,
> >
> > I submitted my package (
> > https://cran.r-project.org/web/packages/ewoc/index.html) to CRAN and it
> did
> > not pass the automatic checks of win_builder. However,  I did not have
> the
> > same error or warning messages when I ran devtools::win_builder() and
> > devtools::run_examples() before. I had the same notes, though.
> >
> > See message from win_builder() CRAN:
> >
> > * using log directory 'd:/RCompile/CRANincoming/R-devel/ewoc.Rcheck'
> > * using R Under development (unstable) (2018-01-19 r74138)
> > * using platform: x86_64-w64-mingw32 (64-bit)
> > * using session charset: ISO8859-1
> > * checking for file 'ewoc/DESCRIPTION' ... OK
> > * checking extension type ... Package
> > * this is package 'ewoc' version '0.1.1'
> > * checking CRAN incoming feasibility ... NOTE
> > Maintainer: 'Marcio A. Diniz <marcio.diniz at cshs.org>'
> >
> > Found the following (possibly) invalid URLs:
> >  URL: https://cran.rstudio.com/web/packages/ewoc/index.html
> >    From: README.md
> >    Status: 200
> >    Message: OK
> >    CRAN URL not in canonical form
> >  Canonical CRAN.R-project.org URLs use https.
> > * checking package namespace information ... OK
> > * checking package dependencies ... OK
> > * checking if this is a source package ... OK
> > * checking if there is a namespace ... OK
> > * checking for hidden files and directories ... OK
> > * checking for portable file names ... OK
> > * checking serialized R objects in the sources ... OK
> > * checking whether package 'ewoc' can be installed ... OK
> > * checking installed package size ... OK
> > * checking package directory ... OK
> > * checking DESCRIPTION meta-information ... OK
> > * checking top-level files ... OK
> > * checking for left-over files ... OK
> > * checking index information ... OK
> > * checking package subdirectories ... OK
> > * checking R files for non-ASCII characters ... OK
> > * checking R files for syntax errors ... OK
> > * loading checks for arch 'i386'
> > ** checking whether the package can be loaded ... OK
> > ** checking whether the package can be loaded with stated dependencies
> ...
> > OK
> > ** checking whether the package can be unloaded cleanly ... OK
> > ** checking whether the namespace can be loaded with stated dependencies
> > ... OK
> > ** checking whether the namespace can be unloaded cleanly ... OK
> > ** checking loading without being on the library search path ... OK
> > ** checking use of S3 registration ... OK
> > * loading checks for arch 'x64'
> > ** checking whether the package can be loaded ... OK
> > ** checking whether the package can be loaded with stated dependencies
> ...
> > OK
> > ** checking whether the package can be unloaded cleanly ... OK
> > ** checking whether the namespace can be loaded with stated dependencies
> > ... OK
> > ** checking whether the namespace can be unloaded cleanly ... OK
> > ** checking loading without being on the library search path ... WARNING
> > Error: package or namespace load failed for 'ewoc' in namespaceExport(ns,
> > exports):
> > undefined exports: iter, nextElem, isplit, irnorm, irunif, irbinom,
> > irnbinom, irpois, icount, idiv, ireadLines, iread.table, icountn, iapply
> > In addition: Warning message:
> > S3 methods 'iter.default', 'iter.iter', 'iter.matrix', 'iter.data.frame',
> > 'iter.function', 'nextElem.containeriter', 'nextElem.matrixiter',
> > 'nextElem.dataframeiter', 'nextElem.funiter', 'nextElem.abstractiter',
> > 'as.list.iter', 'isplit.default', 'isplit.data.frame' were declared in
> > NAMESPACE but not found
> > Execution halted
> >
> > It looks like this package has a loading problem when not on .libPaths:
> > see the messages for details.
> > ** checking use of S3 registration ... OK
> > * checking dependencies in R code ... OK
> > * checking S3 generic/method consistency ... OK
> > * checking replacement functions ... OK
> > * checking foreign function calls ... OK
> > * checking R code for possible problems ... [15s] OK
> > * checking Rd files ... OK
> > * checking Rd metadata ... OK
> > * checking Rd line widths ... OK
> > * checking Rd cross-references ... OK
> > * checking for missing documentation entries ... OK
> > * checking for code/documentation mismatches ... OK
> > * checking Rd \usage sections ... OK
> > * checking Rd contents ... OK
> > * checking for unstated dependencies in examples ... OK
> > * checking examples ...
> > ** running examples for arch 'i386' ... [51s] NOTE
> > Examples with CPU or elapsed time > 10s
> >                user system elapsed
> > ewoc_simulation 1.65   0.01    17.4
> > ** running examples for arch 'x64' ... ERROR
> > Running examples in 'ewoc-Ex.R' failed
> > The error most likely occurred in:
> >
> >> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
> >> ### Name: optimal_toxicity
> >> ### Title: Percent of doses in relation the optimal toxicity interval
> >> ### Aliases: optimal_toxicity
> >>
> >> ### ** Examples
> >>
> >> ## Don't show:
> >> DLT <- 0
> >> dose <- 30
> >> step_zero <- ewoc_d1classic(DLT ~ dose, type = 'discrete',
> > +                            theta = 0.33, alpha = 0.25,
> > +                            min_dose = 0, max_dose = 100,
> > +                            dose_set = seq(0, 100, 20),
> > +                            rho_prior = matrix(1, ncol = 2, nrow = 1),
> > +                            mtd_prior = matrix(1, ncol = 2, nrow = 1),
> > +                            rounding = "nearest")
> > Warning in limits_d1nocov(first_dose = first_dose, last_dose =
> last_dose,  :
> >  'first_dose' and  'last_dose' were defined as the first and last
> elements
> > of 'dose_set', respectively.
> > Compiling model graph
> >   Resolving undeclared variables
> >   Allocating nodes
> > Graph information:
> >   Observed stochastic nodes: 1
> >   Unobserved stochastic nodes: 2
> >   Total graph size: 32
> >
> > Initializing model
> >
> >> response_sim <- response_d1classic(rho = 0.05, mtd = 20, theta = 0.33,
> > +                                   min_dose = 10, max_dose = 50)
> >> pdlt_sim <- pdlt_d1classic(rho = 0.05, mtd = 20, theta = 0.33,
> > +                           min_dose = 10, max_dose = 50)
> >> sim <- ewoc_simulation(step_zero = step_zero,
> > +                        n_sim = 1, sample_size = 2,
> > +                        alpha_strategy = "increasing",
> > +                        response_sim = response_sim,
> > +                        ncores = 2)
> > Error in { : task 1 failed - "could not find function "feasibility""
> > Calls: ewoc_simulation ... ewoc_simulation.ewoc_d1classic -> %dopar% ->
> > <Anonymous>
> > Execution halted
> > * checking PDF version of manual ... OK
> > * DONE
> > Status: 1 ERROR, 1 WARNING, 2 NOTEs
> >
> >
> > Any thoughts?
> >
> > Thank you,
> >
> > --
> > M?rcio Diniz
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> **********************
> "The contents of this message do not reflect any position of the U.S.
> Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK
> Jr.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From i.ucar86 at gmail.com  Mon Jan 22 10:16:17 2018
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Mon, 22 Jan 2018 10:16:17 +0100
Subject: [R-pkg-devel] [Rd] How to address the following: CRAN packages
 not using Suggests conditionally
In-Reply-To: <CALEXWq2CK-aoLuo41z2UtyJKtfGu=DC7-=A91Mc83QwXRjAMXw@mail.gmail.com>
References: <d4a372db-e2e1-9869-b281-107fd1d500cf@bioinf.jku.at>
 <46ae6e78-6e55-77d7-6df9-d7fa6de470d3@bioinf.jku.at>
 <CALEXWq2CK-aoLuo41z2UtyJKtfGu=DC7-=A91Mc83QwXRjAMXw@mail.gmail.com>
Message-ID: <CALEXWq1Sab3azEnER9baV1Y3f44U_PhQc9v0x2wt3xqz1uDE5A@mail.gmail.com>

Re-sending, since I forgot to include the list, sorry. I'm including
r-package-devel too this time, as it seems more appropriate for this list.


El 22 ene. 2018 10:11, "I?aki ?car" <i.ucar86 at gmail.com> escribi?:

>
>
> El 22 ene. 2018 8:12, "Ulrich Bodenhofer" <bodenhofer at bioinf.jku.at>
> escribi?:
>
> Dear colleagues, dear members of the R Core Team,
>
> This was an issue raised by Prof. Brian Ripley and sent privately to all
> developers of CRAN packages that suggest Bioconductor packages (see
> original message below). As mentioned in my message enclosed below, it was
> easy for me to fix the error in examples (new version not submitted to CRAN
> yet), but it might turn into a major effort for the warnings raised by the
> package vignette. Since I have not gotten any advice yet, I take the
> liberty to post it here on this list - hoping that we reach a conclusion
> here how to deal with this matter.
>
>
> Just disable code chunk evaluation if suggested packages are missing (see
> [1]). As explained by Prof. Ripley, it will only affect Fedora checks on
> r-devel, i.e., your users will still see fully evaluated vignettes on CRAN.
>
> [1] https://www.enchufa2.es/archives/suggests-and-vignettes.html
>
> I?aki
>
>
> Thanks in advance for your kind assistance,
> Ulrich Bodenhofer
>
>
>
> -------- Forwarded Message --------
> Subject:        Re: CRAN packages not using Suggests conditionally
> Date:   Mon, 15 Jan 2018 08:44:40 +0100
> From:   Ulrich Bodenhofer <bodenhofer at bioinf.jku.at>
> To:     Prof Brian Ripley <ripley at stats.ox.ac.uk>
> CC:     [...stripped for the sake of privacy ...]
>
>
>
> Dear Prof. Ripley,
>
> Thank you very much for bringing this important issue to my attention. I
> am the maintainer of the 'apcluster' package. My package refers to
> 'Biostrings' in an example section of a help page (a quite insignificant
> one, by the way), which creates errors on some platforms. It also refers
> to 'kebabs' in the package vignette, which leads to warnings.
>
> I could fix the first, more severe, problem quite easily, (1) since it
> is relatively easy to wrap an entire examples section in a conditional,
> and (2), as I have mentioned, it is not a particularly important help page.
>
> Regarding the vignette, I want to ask for your advice now, since the
> situation appears more complicated to me. While it is, of course, only
> one code chunk that loads the 'kebabs' package, five more code chunks
> depend on the package (more specifically, the data objects created by a
> method implemented in the package) - with quite some text in between. So
> the handling of the conditional loading of the package would propagate
> to multiple code chunks and also affect the validity of the explanations
> in between. I would see the following options:
>
> 1. Remove the entire section of the vignette. That would be a pity,
> since I can no longer point the users to an otherwise interesting
> application of my package.
> 2. Replace the code chunks by static LaTeX code such that it appears in
> the PDF as if there were code chunks that had been run. This sort of
> undermines the philosophy of vignettes and also creates extra effort for
> me to maintain the vignette.
> 3. Use the functionality of 'kernlab' instead of 'kebabs' if the latter
> is not available. This would be technically possible, but (1) the code
> in the vignette will look much more complicated to the user and (2)
> 'kernlab' does not implement the necessary functionality fully correctly
> and also has much longer run times. Needless to say, the issue with
> conditional loading will then simply propagate to 'kernlab'.
>
> Which of the three solutions would you prefer? Do you see any fourth
> alternative? Or would you tolerate the warnings on some platforms
> arising from the non-availability of packages suggested by the package
> vignette?
>
> Thanks for your time and best regards,
> Ulrich Bodenhofer
>
> P.S.: @all: I hope it is acceptable that I replied to all. I thought the
> discussion would be interesting for some of you having similar issues.
>
>
>
> On 01/14/2018 09:20 AM, Prof Brian Ripley wrote:
>
>> as required by ?1.1.3.1 of the manual.
>>
>> The Bioconductor branch used by R-devel has been very unstable recently,
>> and it has been decided not to use it for the Fedora checks on R-devel. As
>> you can see from the CRAN results pages (at least at the time of writing),
>> packages
>>
>> ACMEeqtl BoSSA CNVassoc CorShrink GRANBase GenCAT GiANT NMF PlackettLuce
>> ProFit ProFound RNAseqNet SIBERG antaresRead apcluster cherry clValid coloc
>> colorhcplot entropart filematrix fuzzyforest fuzzyjoin glycanr hexbin loon
>> nscancor ordinalgmifs penalized phangorn propr shiftR switchr tcgsaseq
>> tileHMM tmod
>>
>> then give ERRORs or (new) WARNINGs on their checks.  Please correct ASAP,
>> and by Feb 20 to safely retain the package on CRAN.
>>
>>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>
>

	[[alternative HTML version deleted]]


From josh.m.ulrich at gmail.com  Mon Jan 22 12:55:36 2018
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 22 Jan 2018 05:55:36 -0600
Subject: [R-pkg-devel] Conditionally register method with generic in
	other package
In-Reply-To: <CAPPM_gSe+nGTxi2qZcM4DKW5=_SeO+z80vWb5fEkMp+iQMV5Tw@mail.gmail.com>
References: <CAPPM_gSe+nGTxi2qZcM4DKW5=_SeO+z80vWb5fEkMp+iQMV5Tw@mail.gmail.com>
Message-ID: <CAPPM_gTuV9m_aXsWS01yajGg0cx+mtBCqp5D5SVwK1JFwZsOEQ@mail.gmail.com>

For posterity, the solution I employed did not register the method as
a formal S3 method.  Functionality in package B was unchanged as long
as package B was loaded and attached... which was good enough for my
purposes.

On Wed, Dec 6, 2017 at 6:45 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> I have a feeling I know the answer to this question, but I'm asking
> with the hope that I learn something new.
>
> Package A defines a S3 generic function, "foo()".  Package B defines a
> S3 class "bar", and a foo.bar() method.  This method is not strictly
> necessary for the package to function, and package A has many
> dependencies.
>
> To avoid excessive dependencies, I would like to only register
> foo.bar() if package A is installed at the time package B is
> installed.  If package A is installed after package B, then warn the
> user when package B is loaded and/or attached, so they can re-install
> A and have foo.bar() registered correctly.
>
> I could figure out a way to do this manually, but doubt it would be
> CRAN-approved.  What is the recommended way to handle this situation?
> I've received one suggestion to split B into 2 packages: one without
> the method, and one with.  Are there other alternatives?
>
> Thanks,
> Josh
>
> --
> Joshua Ulrich  |  about.me/joshuaulrich
> FOSS Trading  |  www.fosstrading.com
> R/Finance 2018 | www.rinfinance.com



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com
R/Finance 2018 | www.rinfinance.com


From bodenhofer at bioinf.jku.at  Mon Jan 22 14:40:39 2018
From: bodenhofer at bioinf.jku.at (Ulrich Bodenhofer)
Date: Mon, 22 Jan 2018 14:40:39 +0100
Subject: [R-pkg-devel] [Rd] How to address the following: CRAN packages
 not using Suggests conditionally
In-Reply-To: <CALEXWq1Sab3azEnER9baV1Y3f44U_PhQc9v0x2wt3xqz1uDE5A@mail.gmail.com>
References: <d4a372db-e2e1-9869-b281-107fd1d500cf@bioinf.jku.at>
 <46ae6e78-6e55-77d7-6df9-d7fa6de470d3@bioinf.jku.at>
 <CALEXWq2CK-aoLuo41z2UtyJKtfGu=DC7-=A91Mc83QwXRjAMXw@mail.gmail.com>
 <CALEXWq1Sab3azEnER9baV1Y3f44U_PhQc9v0x2wt3xqz1uDE5A@mail.gmail.com>
Message-ID: <3b2856da-63c6-6706-214e-84518960eb4a@bioinf.jku.at>

Thanks a lot, I?aki, this is a perfect solution! I already implemented 
it and it works great. I'll wait for 2 more days before I submit the 
revised package to CRAN - in order to give others to comment on it.

Best regards,
Ulrich


On 01/22/2018 10:16 AM, I?aki ?car wrote:
> Re-sending, since I forgot to include the list, sorry. I'm including 
> r-package-devel too this time, as it seems more appropriate for this 
> list.
>
>
> El 22 ene. 2018 10:11, "I?aki ?car" <i.ucar86 at gmail.com 
> <mailto:i.ucar86 at gmail.com>> escribi?:
>
>
>
>     El 22 ene. 2018 8:12, "Ulrich Bodenhofer"
>     <bodenhofer at bioinf.jku.at <mailto:bodenhofer at bioinf.jku.at>> escribi?:
>
>         Dear colleagues, dear members of the R Core Team,
>
>         This was an issue raised by Prof. Brian Ripley and sent
>         privately to all developers of CRAN packages that suggest
>         Bioconductor packages (see original message below). As
>         mentioned in my message enclosed below, it was easy for me to
>         fix the error in examples (new version not submitted to CRAN
>         yet), but it might turn into a major effort for the warnings
>         raised by the package vignette. Since I have not gotten any
>         advice yet, I take the liberty to post it here on this list -
>         hoping that we reach a conclusion here how to deal with this
>         matter.
>
>
>     Just disable code chunk evaluation if suggested packages are
>     missing (see [1]). As explained by Prof. Ripley, it will only
>     affect Fedora checks on r-devel, i.e., your users will still see
>     fully evaluated vignettes on CRAN.
>
>     [1] https://www.enchufa2.es/archives/suggests-and-vignettes.html
>     <https://www.enchufa2.es/archives/suggests-and-vignettes.html>
>
>     I?aki
>
>
>         Thanks in advance for your kind assistance,
>         Ulrich Bodenhofer
>
>
>
>         -------- Forwarded Message --------
>         Subject:? ? ? ? Re: CRAN packages not using Suggests conditionally
>         Date:? ?Mon, 15 Jan 2018 08:44:40 +0100
>         From:? ?Ulrich Bodenhofer <bodenhofer at bioinf.jku.at
>         <mailto:bodenhofer at bioinf.jku.at>>
>         To:? ? ?Prof Brian Ripley <ripley at stats.ox.ac.uk
>         <mailto:ripley at stats.ox.ac.uk>>
>         CC:? ? ?[...stripped for the sake of privacy ...]
>
>
>
>         Dear Prof. Ripley,
>
>         Thank you very much for bringing this important issue to my
>         attention. I
>         am the maintainer of the 'apcluster' package. My package refers to
>         'Biostrings' in an example section of a help page (a quite
>         insignificant
>         one, by the way), which creates errors on some platforms. It
>         also refers
>         to 'kebabs' in the package vignette, which leads to warnings.
>
>         I could fix the first, more severe, problem quite easily, (1)
>         since it
>         is relatively easy to wrap an entire examples section in a
>         conditional,
>         and (2), as I have mentioned, it is not a particularly
>         important help page.
>
>         Regarding the vignette, I want to ask for your advice now,
>         since the
>         situation appears more complicated to me. While it is, of
>         course, only
>         one code chunk that loads the 'kebabs' package, five more code
>         chunks
>         depend on the package (more specifically, the data objects
>         created by a
>         method implemented in the package) - with quite some text in
>         between. So
>         the handling of the conditional loading of the package would
>         propagate
>         to multiple code chunks and also affect the validity of the
>         explanations
>         in between. I would see the following options:
>
>         1. Remove the entire section of the vignette. That would be a
>         pity,
>         since I can no longer point the users to an otherwise interesting
>         application of my package.
>         2. Replace the code chunks by static LaTeX code such that it
>         appears in
>         the PDF as if there were code chunks that had been run. This
>         sort of
>         undermines the philosophy of vignettes and also creates extra
>         effort for
>         me to maintain the vignette.
>         3. Use the functionality of 'kernlab' instead of 'kebabs' if
>         the latter
>         is not available. This would be technically possible, but (1)
>         the code
>         in the vignette will look much more complicated to the user
>         and (2)
>         'kernlab' does not implement the necessary functionality fully
>         correctly
>         and also has much longer run times. Needless to say, the issue
>         with
>         conditional loading will then simply propagate to 'kernlab'.
>
>         Which of the three solutions would you prefer? Do you see any
>         fourth
>         alternative? Or would you tolerate the warnings on some platforms
>         arising from the non-availability of packages suggested by the
>         package
>         vignette?
>
>         Thanks for your time and best regards,
>         Ulrich Bodenhofer
>
>         P.S.: @all: I hope it is acceptable that I replied to all. I
>         thought the
>         discussion would be interesting for some of you having similar
>         issues.
>
>
>
>         On 01/14/2018 09:20 AM, Prof Brian Ripley wrote:
>
>             as required by ?1.1.3.1 of the manual.
>
>             The Bioconductor branch used by R-devel has been very
>             unstable recently, and it has been decided not to use it
>             for the Fedora checks on R-devel. As you can see from the
>             CRAN results pages (at least at the time of writing), packages
>
>             ACMEeqtl BoSSA CNVassoc CorShrink GRANBase GenCAT GiANT
>             NMF PlackettLuce ProFit ProFound RNAseqNet SIBERG
>             antaresRead apcluster cherry clValid coloc colorhcplot
>             entropart filematrix fuzzyforest fuzzyjoin glycanr hexbin
>             loon nscancor ordinalgmifs penalized phangorn propr shiftR
>             switchr tcgsaseq tileHMM tmod
>
>             then give ERRORs or (new) WARNINGs on their checks.?
>             Please correct ASAP, and by Feb 20 to safely retain the
>             package on CRAN.
>
>
>         ______________________________________________
>         R-devel at r-project.org <mailto:R-devel at r-project.org> mailing list
>         https://stat.ethz.ch/mailman/listinfo/r-devel
>         <https://stat.ethz.ch/mailman/listinfo/r-devel>
>
>


From plummerm at iarc.fr  Mon Jan 22 18:56:23 2018
From: plummerm at iarc.fr (Martyn Plummer)
Date: Mon, 22 Jan 2018 17:56:23 +0000
Subject: [R-pkg-devel] Licensing of an R package
In-Reply-To: <eec3710958dd400786d92b0a167f6351@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
References: <b71e33d951634a1f9a4f87269c534ac3@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
 <aa3377b8-814e-4e4f-08bd-496341aad889@gmail.com>
 <23138.5644.444828.327712@bud.eddelbuettel.com>
 <eec3710958dd400786d92b0a167f6351@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
Message-ID: <1516643781.2934.63.camel@iarc.fr>

On Fri, 2018-01-19 at 20:28 +0000, Chris Brien wrote:
> Hi Dirk & Duncan,
> 
> I too like GPL and I had thought that the situation was as Duncan
> outlines. Consequently, I had licensed `foo' as GPL >= 2.
> 
> However, because I have been unable to find a discussion of my case,
> in spite of the extensive material about GNU licensing on the web, I
> have had difficulty deciding whether or not I was mistaken in
> applying a GPL license. 
> 
> It does seem that the open source philosophy is that all software
> should be open source and GPL licensing is to promote this, which it
> does by restricting how you can apply GPL licensing. It would be
> consistent with this philosophy that GPL does not allow one to `link'
> with a commercial package. However, somewhat reluctantly it seems, an
> exception is made under GPL licensing  for linking to commercial
> `system libraries' because it is necessary to allow this for things
> like R etc. 
> 
> If Bloomberg API is a system library then it also qualifies as an
> exception. (I have seen the license file and note that you are able
> to distribute the API.)
> 
> In my case `bar' is asreml and I don't believe that it qualifies as a
> system library. However, I can use it to build my library
> (asremlPlus) and the maintainers and license owners know that I do
> this. As a result I am still unsure that GPL can be applied in my
> case.
> 
> Ugh! It is a minefield.

It is not as bad as you think. 

The FSF admits that sometimes you need to link to a non-free library.
They just ask you not to do it if a free replacement is available:
https://www.gnu.org/licenses/gpl-faq.en.html#FSWithNFLibs

As Duncan points out, your choice of license does not affect what you
can do with it. As copyright holder, you can do what you like (modulo
restrictions placed on you by the asreml license). The question is what
rights you want to confer to other people.

GPL is based on copyright law, so the rights and obligations it confers
come into effect only when the software is distributed (or "conveyed"
in the updated language of GPL 3) to a third party. These rights and
obligations also apply to any derived works, which means both modified
source code and binary packages created from the source code.

With a GPL license, anyone has the right to do the following with your
asremlPlus package:

1) Distribute the source package.

2) Distribute modified versions of the source package under the same
GPL conditions.

3) Install and use the asremlPlus package linked to the asreml library.
 

What they cannot do with a standard GPL license is:

4) Distribute a binary package of asremlPlus linked to asreml

Distributing a binary package of asremlPlus under the GPL comes with
the obligation to provide the source code to asreml which, of course,
cannot be done.

It should also be noted that the license terms of asreml itself may
prevent distribution of a binary package of asremlPlus.

However, if there are no such restrictions then nothing prevents you as
sole copyright holder from creating your own (dynamically linked)
binaries and distributing them to your users.

If you do want to give your users rights to distribute binary packages
then you may add an explicit exception to the GPL to your software
license. The FSF provides a template to add this exception to your
license:

https://www.gnu.org/licenses/gpl-faq.en.html#GPLIncompatibleLibs

Martyn


> Thanks muchly for your input.
> 
> Cheers,
> 
>   Chris
> 
> 
> -----Original Message-----
> From: Dirk Eddelbuettel [mailto:dirk.eddelbuettel at gmail.com] On
> Behalf Of Dirk Eddelbuettel
> Sent: Saturday, 20 January 2018 2:30 AM
> To: Duncan Murdoch
> Cc: Chris Brien; r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Licensing of an R package
> 
> 
> Chris,
> 
> I am with Duncan here.
> 
> You can license _your_ package any way you want and prefer. I like
> GPL.
> 
> You seem to imply that the GPL license prohibits linking against
> commercial code.  If that were the case we'd never have R, Emacs,
> gcc/g++, ... on Windows or macOS or any of the now-essentially-
> extinct commercial Unux flavours.  We alway link against their system
> libraries too.
> 
> Also look eg at our Rblpapi package.  The Bloomberg API is not open
> source, but they allow distribution of the (pre-built) library and
> headers.  Our package, building on top, is GPL-2+. No issues.  (This
> example is extra fun because CRAN can't distribute the API, but can
> use it for building our package. Using the package requires having a
> commercial and expensive Bloomberg terminal license and
> installation.)
> 
> Dirk
> 
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

From Chris.Brien at unisa.edu.au  Tue Jan 23 09:28:57 2018
From: Chris.Brien at unisa.edu.au (Chris Brien)
Date: Tue, 23 Jan 2018 08:28:57 +0000
Subject: [R-pkg-devel] Licensing of an R package
In-Reply-To: <1516643781.2934.63.camel@iarc.fr>
References: <b71e33d951634a1f9a4f87269c534ac3@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
 <aa3377b8-814e-4e4f-08bd-496341aad889@gmail.com>
 <23138.5644.444828.327712@bud.eddelbuettel.com>
 <eec3710958dd400786d92b0a167f6351@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
 <1516643781.2934.63.camel@iarc.fr>
Message-ID: <4f23cc6dd8f64307a337a144c9b71577@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>

Hi Martyn,

Thanks for your very clear explanation. I now understand the point that Duncan was making.

However, just to clarify point 4). 

I understand that a GPL license means that I cannot distribute a binary that combines both asreml and asremlPlus, which asreml would not allow anyway. 

However, under a GPL license, can I distribute a binary of asremlPlus on its own as long as the source for asremlPlus is available, which it is from the same web site as the binary and from Github? I would have thought so because this is exactly what CRAN does in distributing Windows binaries of packages.

Cheers,

  Chris


-----Original Message-----
From: Martyn Plummer [mailto:plummerm at iarc.fr] 
Sent: Tuesday, 23 January 2018 4:26 AM
To: Chris Brien; edd at debian.org; murdoch.duncan at gmail.com
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Licensing of an R package

On Fri, 2018-01-19 at 20:28 +0000, Chris Brien wrote:
> Hi Dirk & Duncan,
> 
> I too like GPL and I had thought that the situation was as Duncan 
> outlines. Consequently, I had licensed `foo' as GPL >= 2.
> 
> However, because I have been unable to find a discussion of my case, 
> in spite of the extensive material about GNU licensing on the web, I 
> have had difficulty deciding whether or not I was mistaken in applying 
> a GPL license.
> 
> It does seem that the open source philosophy is that all software 
> should be open source and GPL licensing is to promote this, which it 
> does by restricting how you can apply GPL licensing. It would be 
> consistent with this philosophy that GPL does not allow one to `link'
> with a commercial package. However, somewhat reluctantly it seems, an 
> exception is made under GPL licensing  for linking to commercial 
> `system libraries' because it is necessary to allow this for things 
> like R etc.
> 
> If Bloomberg API is a system library then it also qualifies as an 
> exception. (I have seen the license file and note that you are able to 
> distribute the API.)
> 
> In my case `bar' is asreml and I don't believe that it qualifies as a 
> system library. However, I can use it to build my library
> (asremlPlus) and the maintainers and license owners know that I do 
> this. As a result I am still unsure that GPL can be applied in my 
> case.
> 
> Ugh! It is a minefield.

It is not as bad as you think. 

The FSF admits that sometimes you need to link to a non-free library.
They just ask you not to do it if a free replacement is available:
https://www.gnu.org/licenses/gpl-faq.en.html#FSWithNFLibs

As Duncan points out, your choice of license does not affect what you can do with it. As copyright holder, you can do what you like (modulo restrictions placed on you by the asreml license). The question is what rights you want to confer to other people.

GPL is based on copyright law, so the rights and obligations it confers come into effect only when the software is distributed (or "conveyed"
in the updated language of GPL 3) to a third party. These rights and obligations also apply to any derived works, which means both modified source code and binary packages created from the source code.

With a GPL license, anyone has the right to do the following with your asremlPlus package:

1) Distribute the source package.

2) Distribute modified versions of the source package under the same GPL conditions.

3) Install and use the asremlPlus package linked to the asreml library.
 

What they cannot do with a standard GPL license is:

4) Distribute a binary package of asremlPlus linked to asreml

Distributing a binary package of asremlPlus under the GPL comes with the obligation to provide the source code to asreml which, of course, cannot be done.

It should also be noted that the license terms of asreml itself may prevent distribution of a binary package of asremlPlus.

However, if there are no such restrictions then nothing prevents you as sole copyright holder from creating your own (dynamically linked) binaries and distributing them to your users.

If you do want to give your users rights to distribute binary packages then you may add an explicit exception to the GPL to your software license. The FSF provides a template to add this exception to your
license:

https://www.gnu.org/licenses/gpl-faq.en.html#GPLIncompatibleLibs

Martyn


> Thanks muchly for your input.
> 
> Cheers,
> 
>   Chris
> 
> 
> -----Original Message-----
> From: Dirk Eddelbuettel [mailto:dirk.eddelbuettel at gmail.com] On Behalf 
> Of Dirk Eddelbuettel
> Sent: Saturday, 20 January 2018 2:30 AM
> To: Duncan Murdoch
> Cc: Chris Brien; r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Licensing of an R package
> 
> 
> Chris,
> 
> I am with Duncan here.
> 
> You can license _your_ package any way you want and prefer. I like 
> GPL.
> 
> You seem to imply that the GPL license prohibits linking against 
> commercial code.  If that were the case we'd never have R, Emacs, 
> gcc/g++, ... on Windows or macOS or any of the now-essentially- 
> extinct commercial Unux flavours.  We alway link against their system 
> libraries too.
> 
> Also look eg at our Rblpapi package.  The Bloomberg API is not open 
> source, but they allow distribution of the (pre-built) library and 
> headers.  Our package, building on top, is GPL-2+. No issues.  (This 
> example is extra fun because CRAN can't distribute the API, but can 
> use it for building our package. Using the package requires having a 
> commercial and expensive Bloomberg terminal license and
> installation.)
> 
> Dirk
> 
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

From bodenhofer at bioinf.jku.at  Tue Jan 23 10:56:12 2018
From: bodenhofer at bioinf.jku.at (Ulrich Bodenhofer)
Date: Tue, 23 Jan 2018 10:56:12 +0100
Subject: [R-pkg-devel] [Rd] How to address the following: CRAN packages
 not using Suggests conditionally
In-Reply-To: <745be8e2-5dec-b739-768d-ac26a7876b64@roswellpark.org>
References: <d4a372db-e2e1-9869-b281-107fd1d500cf@bioinf.jku.at>
 <46ae6e78-6e55-77d7-6df9-d7fa6de470d3@bioinf.jku.at>
 <CALEXWq2CK-aoLuo41z2UtyJKtfGu=DC7-=A91Mc83QwXRjAMXw@mail.gmail.com>
 <CALEXWq1Sab3azEnER9baV1Y3f44U_PhQc9v0x2wt3xqz1uDE5A@mail.gmail.com>
 <3b2856da-63c6-6706-214e-84518960eb4a@bioinf.jku.at>
 <745be8e2-5dec-b739-768d-ac26a7876b64@roswellpark.org>
Message-ID: <f34d2ac9-7c6c-6163-2e7a-6d815664ffac@bioinf.jku.at>

Thanks for your thoughts, Martin!
> It's very easy for 'pictures of code' (unevaluated code chunks in 
> vignettes) to drift from the actual implementation. So I'd really 
> encourage your conditional evaluation to be as narrow as possible -- 
> during CRAN or even CRAN fedora checks. Certainly trying to use 
> uninstalled Suggest'ed packages in vignettes should provide an error 
> message that is informative to users. Presumably the developer or user 
> intends actually to execute the code, and needs to struggle through 
> whatever issues come up.
I understand your point and I agree.
> I'm not sure whether my comments are consistent with Writing R 
> Extensions or not.
I doubt that. My understanding of the section "1.1.3.1 Suggested 
packages" is that conditional usage of suggested non-CRAN packages is 
more or less required.
> There is a fundamental tension between the CRAN and Bioconductor 
> release models. The Bioconductor 'devel' package repositories and 
> nightly builds are meant to be a place where new features and breaking 
> changes can be introduced and problems resolved before being exposed 
> to general users as a stable 'release' branch, once every six months. 
> This means that the Bioconductor devel branch periodically (as 
> recently and I suspect over the next several days) contains 
> considerable carnage that propagates to CRAN devel builds, creating 
> additional work for CRAN maintainers.
I am aware of these different philosophies. Though I have an opinion 
about this matter, it is pointless which model I like better. As a 
developer, I have to respect the rules, period. It seems that I can 
avoid trouble by avoiding any dependency to Bioconductor in my CRAN 
packages. In the case of the 'apcluster' package, I deliberately chose 
trouble ;-) ? because I think that exemplar-based clustering of 
biological sequences by means of sequence kernels is a very cool thing 
that users should be made aware of.

If I could make a wish to a fairy, I'd ask her to initiate a 
constructive discussion between the R Core Team and the Bioconductor 
Core Team to sort these things out, such that the "tensions" (as you 
have put it) are no longer left as a burden to the package developers.

Thanks and best regards,
Ulrich

>
>>
>> On 01/22/2018 10:16 AM, I?aki ?car wrote:
>>> Re-sending, since I forgot to include the list, sorry. I'm including 
>>> r-package-devel too this time, as it seems more appropriate for this 
>>> list.
>>>
>>>
>>> El 22 ene. 2018 10:11, "I?aki ?car" <i.ucar86 at gmail.com 
>>> <mailto:i.ucar86 at gmail.com>> escribi?:
>>>
>>>
>>>
>>> ??? El 22 ene. 2018 8:12, "Ulrich Bodenhofer"
>>> ??? <bodenhofer at bioinf.jku.at <mailto:bodenhofer at bioinf.jku.at>> 
>>> escribi?:
>>>
>>> ??????? Dear colleagues, dear members of the R Core Team,
>>>
>>> ??????? This was an issue raised by Prof. Brian Ripley and sent
>>> ??????? privately to all developers of CRAN packages that suggest
>>> ??????? Bioconductor packages (see original message below). As
>>> ??????? mentioned in my message enclosed below, it was easy for me to
>>> ??????? fix the error in examples (new version not submitted to CRAN
>>> ??????? yet), but it might turn into a major effort for the warnings
>>> ??????? raised by the package vignette. Since I have not gotten any
>>> ??????? advice yet, I take the liberty to post it here on this list -
>>> ??????? hoping that we reach a conclusion here how to deal with this
>>> ??????? matter.
>>>
>>>
>>> ??? Just disable code chunk evaluation if suggested packages are
>>> ??? missing (see [1]). As explained by Prof. Ripley, it will only
>>> ??? affect Fedora checks on r-devel, i.e., your users will still see
>>> ??? fully evaluated vignettes on CRAN.
>>>
>>> ??? [1] https://www.enchufa2.es/archives/suggests-and-vignettes.html
>>> <https://www.enchufa2.es/archives/suggests-and-vignettes.html>
>>>
>>> ??? I?aki
>>>
>>>
>>> ??????? Thanks in advance for your kind assistance,
>>> ??????? Ulrich Bodenhofer
>>>
>>>
>>>
>>> ??????? -------- Forwarded Message --------
>>> ??????? Subject:? ? ? ? Re: CRAN packages not using Suggests 
>>> conditionally
>>> ??????? Date:? ?Mon, 15 Jan 2018 08:44:40 +0100
>>> ??????? From:? ?Ulrich Bodenhofer <bodenhofer at bioinf.jku.at
>>> ??????? <mailto:bodenhofer at bioinf.jku.at>>
>>> ??????? To:? ? ?Prof Brian Ripley <ripley at stats.ox.ac.uk
>>> ??????? <mailto:ripley at stats.ox.ac.uk>>
>>> ??????? CC:? ? ?[...stripped for the sake of privacy ...]
>>>
>>>
>>>
>>> ??????? Dear Prof. Ripley,
>>>
>>> ??????? Thank you very much for bringing this important issue to my
>>> ??????? attention. I
>>> ??????? am the maintainer of the 'apcluster' package. My package 
>>> refers to
>>> ??????? 'Biostrings' in an example section of a help page (a quite
>>> ??????? insignificant
>>> ??????? one, by the way), which creates errors on some platforms. It
>>> ??????? also refers
>>> ??????? to 'kebabs' in the package vignette, which leads to warnings.
>>>
>>> ??????? I could fix the first, more severe, problem quite easily, (1)
>>> ??????? since it
>>> ??????? is relatively easy to wrap an entire examples section in a
>>> ??????? conditional,
>>> ??????? and (2), as I have mentioned, it is not a particularly
>>> ??????? important help page.
>>>
>>> ??????? Regarding the vignette, I want to ask for your advice now,
>>> ??????? since the
>>> ??????? situation appears more complicated to me. While it is, of
>>> ??????? course, only
>>> ??????? one code chunk that loads the 'kebabs' package, five more code
>>> ??????? chunks
>>> ??????? depend on the package (more specifically, the data objects
>>> ??????? created by a
>>> ??????? method implemented in the package) - with quite some text in
>>> ??????? between. So
>>> ??????? the handling of the conditional loading of the package would
>>> ??????? propagate
>>> ??????? to multiple code chunks and also affect the validity of the
>>> ??????? explanations
>>> ??????? in between. I would see the following options:
>>>
>>> ??????? 1. Remove the entire section of the vignette. That would be a
>>> ??????? pity,
>>> ??????? since I can no longer point the users to an otherwise 
>>> interesting
>>> ??????? application of my package.
>>> ??????? 2. Replace the code chunks by static LaTeX code such that it
>>> ??????? appears in
>>> ??????? the PDF as if there were code chunks that had been run. This
>>> ??????? sort of
>>> ??????? undermines the philosophy of vignettes and also creates extra
>>> ??????? effort for
>>> ??????? me to maintain the vignette.
>>> ??????? 3. Use the functionality of 'kernlab' instead of 'kebabs' if
>>> ??????? the latter
>>> ??????? is not available. This would be technically possible, but (1)
>>> ??????? the code
>>> ??????? in the vignette will look much more complicated to the user
>>> ??????? and (2)
>>> ??????? 'kernlab' does not implement the necessary functionality fully
>>> ??????? correctly
>>> ??????? and also has much longer run times. Needless to say, the issue
>>> ??????? with
>>> ??????? conditional loading will then simply propagate to 'kernlab'.
>>>
>>> ??????? Which of the three solutions would you prefer? Do you see any
>>> ??????? fourth
>>> ??????? alternative? Or would you tolerate the warnings on some 
>>> platforms
>>> ??????? arising from the non-availability of packages suggested by the
>>> ??????? package
>>> ??????? vignette?
>>>
>>> ??????? Thanks for your time and best regards,
>>> ??????? Ulrich Bodenhofer
>>>
>>> ??????? P.S.: @all: I hope it is acceptable that I replied to all. I
>>> ??????? thought the
>>> ??????? discussion would be interesting for some of you having similar
>>> ??????? issues.
>>>
>>>
>>>
>>> ??????? On 01/14/2018 09:20 AM, Prof Brian Ripley wrote:
>>>
>>> ??????????? as required by ?1.1.3.1 of the manual.
>>>
>>> ??????????? The Bioconductor branch used by R-devel has been very
>>> ??????????? unstable recently, and it has been decided not to use it
>>> ??????????? for the Fedora checks on R-devel. As you can see from the
>>> ??????????? CRAN results pages (at least at the time of writing), 
>>> packages
>>>
>>> ??????????? ACMEeqtl BoSSA CNVassoc CorShrink GRANBase GenCAT GiANT
>>> ??????????? NMF PlackettLuce ProFit ProFound RNAseqNet SIBERG
>>> ??????????? antaresRead apcluster cherry clValid coloc colorhcplot
>>> ??????????? entropart filematrix fuzzyforest fuzzyjoin glycanr hexbin
>>> ??????????? loon nscancor ordinalgmifs penalized phangorn propr shiftR
>>> ??????????? switchr tcgsaseq tileHMM tmod
>>>
>>> ??????????? then give ERRORs or (new) WARNINGs on their checks.
>>> ??????????? Please correct ASAP, and by Feb 20 to safely retain the
>>> ??????????? package on CRAN.


From kehld at ktk.pte.hu  Tue Jan 23 16:27:31 2018
From: kehld at ktk.pte.hu (=?windows-1250?Q?Kehl_D=E1niel?=)
Date: Tue, 23 Jan 2018 15:27:31 +0000
Subject: [R-pkg-devel] new package? - Sports data from transfermarkt.com
	using rvest
Message-ID: <33D76D77E9AC4B438DA38B348ED6890D14D942CE@EMAIL.ktkdom.pte.hu>

Dear List members,

maybe this is not the right place to ask, if that is the case, please forward me to the right place.
I developed some functions to download and transform football/soccer related data from transfermarkt.com.
There are plans to create my first package based on these functions and of course develop them and add more later. As far as I know there is no API to that page, so I am using the rvest package.
My question is: is this an OK thing to do? Should I contact transfermarkt.com? My german is not perfect (just like my english), this is what I've found on thier webpage. Does that mean one can not create a package related to that page? Or can't crawl at all? Or just not allowed to sell the data? If it is allowed, can one post the package on CRAN at the end?

Please if any of you have experience in that or just show me where to ask, do not hesitate!

LEGAL NOTICE
? Transfermarkt GmbH & Co. KG 2000-2018

All rights reserved.

Der Inhalt dieser Website ist urheberrechtlich gesch?tzt. Nachdruck, Aufnahme in Online-Dienste, Internet und Vervielf?ltigung auf Datentr?ger wie CD-ROM, DVD-ROM usw. d?rfen, auch auszugsweise, nur nach vorheriger schriftlicher Zustimmung durch Transfermarkt erfolgen. Eine kommerzielle Weitervermarktung des Inhalts ist untersagt.

Transfermarkt haftet nicht f?r unverlangt eingesandte Inhalte, Manuskripte und Fotos. F?r Inhalte externer Links und fremde Inhalte ?bernimmt Transfermarkt keine Verantwortung.

Thank you for all your insights and/or comments,

best regards
Daniel





















Dr. KEHL D?niel

adjunktus





P?CSI TUDOM?NYEGYETEM K?ZGAZDAS?GTUDOM?NYI KAR

K?zgazdas?gtan ?s ?konometria Int?zet

H-7622 P?cs, R?k?czi ?t 80. | www.ktk.pte.hu 

+36 72 501 599/ 23144 | kehld at ktk.pte.hu











From plummerm at iarc.fr  Tue Jan 23 18:50:25 2018
From: plummerm at iarc.fr (Martyn Plummer)
Date: Tue, 23 Jan 2018 17:50:25 +0000
Subject: [R-pkg-devel] Licensing of an R package
In-Reply-To: <4f23cc6dd8f64307a337a144c9b71577@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
References: <b71e33d951634a1f9a4f87269c534ac3@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
 <aa3377b8-814e-4e4f-08bd-496341aad889@gmail.com>
 <23138.5644.444828.327712@bud.eddelbuettel.com>
 <eec3710958dd400786d92b0a167f6351@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
 <1516643781.2934.63.camel@iarc.fr>
 <4f23cc6dd8f64307a337a144c9b71577@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
Message-ID: <1516729823.2934.98.camel@iarc.fr>

On Tue, 2018-01-23 at 08:28 +0000, Chris Brien wrote:
> Hi Martyn,
> 
> Thanks for your very clear explanation. I now understand the point
> that Duncan was making.
> 
> However, just to clarify point 4). 
> 
> I understand that a GPL license means that I cannot distribute a
> binary that combines both asreml and asremlPlus, which asreml would
> not allow anyway. 
> 
> However, under a GPL license, can I distribute a binary of asremlPlus
> on its own as long as the source for asremlPlus is available, which
> it is from the same web site as the binary and from Github? 

Nobody knows.

The GPL is based on a creative application of copyright law. Many
aspects of this application remain untested in court and thus remain
controversial. I will give you the two extremes of opinion.

In the red corner, the FSF claims that any form of linking creates a
derivative work of both your package and the asreml library. With this
interpretation, a dynamically linked package can only be distributed if
the terms of the GPL apply to the whole work, i.e. the terms extend to 
the asreml library. Since these terms cannot be satisfied, the binary
package cannot be distributed.

In the blue corner, Lawrence Rosen of the law firm Rosenlaw &
Einschlag, denies that linking creates a derived work, e.g.

http://www.linuxjournal.com/article/6366

The link is from 2003 but his position has not changed.

There is no algorithmic answer to this question. The answer depends on
human factors, the details of each specific case, and the
interpretation of existing copyright law in a given legal domain.

Even if you take the restrictive interpretation of the FSF, then they
don't have a problem with the distribution of dynamically linked
binaries if you put an explicit linking exception in your license,
which is why I pointed you to this in my previous email.

> I would have thought so because this is exactly what CRAN does in
> distributing Windows binaries of packages.

I would say that it is the responsibility of the package maintainer to
verify that CRAN is legally entitled to distribute Windows and MacOS
binaries. In any case, the vast majority of CRAN packages are not
problematic as they are licenced under GPL or a GPL-compatible license
without linkage to a non-free library.

Martyn

> Cheers,
> 
>   Chris
> 
> 
> -----Original Message-----
> From: Martyn Plummer [mailto:plummerm at iarc.fr] 
> Sent: Tuesday, 23 January 2018 4:26 AM
> To: Chris Brien; edd at debian.org; murdoch.duncan at gmail.com
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Licensing of an R package
> 
> On Fri, 2018-01-19 at 20:28 +0000, Chris Brien wrote:
> > Hi Dirk & Duncan,
> > 
> > I too like GPL and I had thought that the situation was as Duncan 
> > outlines. Consequently, I had licensed `foo' as GPL >= 2.
> > 
> > However, because I have been unable to find a discussion of my
> > case, 
> > in spite of the extensive material about GNU licensing on the web,
> > I 
> > have had difficulty deciding whether or not I was mistaken in
> > applying 
> > a GPL license.
> > 
> > It does seem that the open source philosophy is that all software 
> > should be open source and GPL licensing is to promote this, which
> > it 
> > does by restricting how you can apply GPL licensing. It would be 
> > consistent with this philosophy that GPL does not allow one to
> > `link'
> > with a commercial package. However, somewhat reluctantly it seems,
> > an 
> > exception is made under GPL licensing  for linking to commercial 
> > `system libraries' because it is necessary to allow this for
> > things 
> > like R etc.
> > 
> > If Bloomberg API is a system library then it also qualifies as an 
> > exception. (I have seen the license file and note that you are able
> > to 
> > distribute the API.)
> > 
> > In my case `bar' is asreml and I don't believe that it qualifies as
> > a 
> > system library. However, I can use it to build my library
> > (asremlPlus) and the maintainers and license owners know that I do 
> > this. As a result I am still unsure that GPL can be applied in my 
> > case.
> > 
> > Ugh! It is a minefield.
> 
> It is not as bad as you think. 
> 
> The FSF admits that sometimes you need to link to a non-free library.
> They just ask you not to do it if a free replacement is available:
> https://www.gnu.org/licenses/gpl-faq.en.html#FSWithNFLibs
> 
> As Duncan points out, your choice of license does not affect what you
> can do with it. As copyright holder, you can do what you like (modulo
> restrictions placed on you by the asreml license). The question is
> what rights you want to confer to other people.
> 
> GPL is based on copyright law, so the rights and obligations it
> confers come into effect only when the software is distributed (or
> "conveyed"
> in the updated language of GPL 3) to a third party. These rights and
> obligations also apply to any derived works, which means both
> modified source code and binary packages created from the source
> code.
> 
> With a GPL license, anyone has the right to do the following with
> your asremlPlus package:
> 
> 1) Distribute the source package.
> 
> 2) Distribute modified versions of the source package under the same
> GPL conditions.
> 
> 3) Install and use the asremlPlus package linked to the asreml
> library.
>  
> 
> What they cannot do with a standard GPL license is:
> 
> 4) Distribute a binary package of asremlPlus linked to asreml
> 
> Distributing a binary package of asremlPlus under the GPL comes with
> the obligation to provide the source code to asreml which, of course,
> cannot be done.
> 
> It should also be noted that the license terms of asreml itself may
> prevent distribution of a binary package of asremlPlus.
> 
> However, if there are no such restrictions then nothing prevents you
> as sole copyright holder from creating your own (dynamically linked)
> binaries and distributing them to your users.
> 
> If you do want to give your users rights to distribute binary
> packages then you may add an explicit exception to the GPL to your
> software license. The FSF provides a template to add this exception
> to your
> license:
> 
> https://www.gnu.org/licenses/gpl-faq.en.html#GPLIncompatibleLibs
> 
> Martyn
> 
> 
> > Thanks muchly for your input.
> > 
> > Cheers,
> > 
> >   Chris
> > 
> > 
> > -----Original Message-----
> > From: Dirk Eddelbuettel [mailto:dirk.eddelbuettel at gmail.com] On
> > Behalf 
> > Of Dirk Eddelbuettel
> > Sent: Saturday, 20 January 2018 2:30 AM
> > To: Duncan Murdoch
> > Cc: Chris Brien; r-package-devel at r-project.org
> > Subject: Re: [R-pkg-devel] Licensing of an R package
> > 
> > 
> > Chris,
> > 
> > I am with Duncan here.
> > 
> > You can license _your_ package any way you want and prefer. I like 
> > GPL.
> > 
> > You seem to imply that the GPL license prohibits linking against 
> > commercial code.  If that were the case we'd never have R, Emacs, 
> > gcc/g++, ... on Windows or macOS or any of the now-essentially- 
> > extinct commercial Unux flavours.  We alway link against their
> > system 
> > libraries too.
> > 
> > Also look eg at our Rblpapi package.  The Bloomberg API is not
> > open 
> > source, but they allow distribution of the (pre-built) library and 
> > headers.  Our package, building on top, is GPL-2+. No
> > issues.  (This 
> > example is extra fun because CRAN can't distribute the API, but
> > can 
> > use it for building our package. Using the package requires having
> > a 
> > commercial and expensive Bloomberg terminal license and
> > installation.)
> > 
> > Dirk
> > 
> > --
> > http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> > 
> > ______________________________________________
> > R-package-devel at r-project.org mailing list 
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel

From Chris.Brien at unisa.edu.au  Tue Jan 23 23:06:04 2018
From: Chris.Brien at unisa.edu.au (Chris Brien)
Date: Tue, 23 Jan 2018 22:06:04 +0000
Subject: [R-pkg-devel] Licensing of an R package
In-Reply-To: <1516729823.2934.98.camel@iarc.fr>
References: <b71e33d951634a1f9a4f87269c534ac3@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
 <aa3377b8-814e-4e4f-08bd-496341aad889@gmail.com>
 <23138.5644.444828.327712@bud.eddelbuettel.com>
 <eec3710958dd400786d92b0a167f6351@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
 <1516643781.2934.63.camel@iarc.fr>
 <4f23cc6dd8f64307a337a144c9b71577@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
 <1516729823.2934.98.camel@iarc.fr>
Message-ID: <92e18a53cfd34f5a897ba5b8f6f6534e@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>

Hi Martyn,

OK. This last point was what had worried me about GPL all along. I had understood that you can only dynamically link to a system library. That is, that the red corner view applied.

Thanks for all your help. I now feel better equipped to make a decision on what course of action to take.

Cheers,

  Chris


-----Original Message-----
From: Martyn Plummer [mailto:plummerm at iarc.fr] 
Sent: Wednesday, 24 January 2018 4:20 AM
To: Chris Brien; edd at debian.org; murdoch.duncan at gmail.com
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Licensing of an R package

On Tue, 2018-01-23 at 08:28 +0000, Chris Brien wrote:
> Hi Martyn,
> 
> Thanks for your very clear explanation. I now understand the point
> that Duncan was making.
> 
> However, just to clarify point 4). 
> 
> I understand that a GPL license means that I cannot distribute a
> binary that combines both asreml and asremlPlus, which asreml would
> not allow anyway. 
> 
> However, under a GPL license, can I distribute a binary of asremlPlus
> on its own as long as the source for asremlPlus is available, which
> it is from the same web site as the binary and from Github? 

Nobody knows.

The GPL is based on a creative application of copyright law. Many
aspects of this application remain untested in court and thus remain
controversial. I will give you the two extremes of opinion.

In the red corner, the FSF claims that any form of linking creates a
derivative work of both your package and the asreml library. With this
interpretation, a dynamically linked package can only be distributed if
the terms of the GPL apply to the whole work, i.e. the terms extend to 
the asreml library. Since these terms cannot be satisfied, the binary
package cannot be distributed.

In the blue corner, Lawrence Rosen of the law firm Rosenlaw &
Einschlag, denies that linking creates a derived work, e.g.

http://www.linuxjournal.com/article/6366

The link is from 2003 but his position has not changed.

There is no algorithmic answer to this question. The answer depends on
human factors, the details of each specific case, and the
interpretation of existing copyright law in a given legal domain.

Even if you take the restrictive interpretation of the FSF, then they
don't have a problem with the distribution of dynamically linked
binaries if you put an explicit linking exception in your license,
which is why I pointed you to this in my previous email.

> I would have thought so because this is exactly what CRAN does in
> distributing Windows binaries of packages.

I would say that it is the responsibility of the package maintainer to
verify that CRAN is legally entitled to distribute Windows and MacOS
binaries. In any case, the vast majority of CRAN packages are not
problematic as they are licenced under GPL or a GPL-compatible license
without linkage to a non-free library.

Martyn

> Cheers,
> 
>   Chris
> 
> 
> -----Original Message-----
> From: Martyn Plummer [mailto:plummerm at iarc.fr] 
> Sent: Tuesday, 23 January 2018 4:26 AM
> To: Chris Brien; edd at debian.org; murdoch.duncan at gmail.com
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Licensing of an R package
> 
> On Fri, 2018-01-19 at 20:28 +0000, Chris Brien wrote:
> > Hi Dirk & Duncan,
> > 
> > I too like GPL and I had thought that the situation was as Duncan 
> > outlines. Consequently, I had licensed `foo' as GPL >= 2.
> > 
> > However, because I have been unable to find a discussion of my
> > case, 
> > in spite of the extensive material about GNU licensing on the web,
> > I 
> > have had difficulty deciding whether or not I was mistaken in
> > applying 
> > a GPL license.
> > 
> > It does seem that the open source philosophy is that all software 
> > should be open source and GPL licensing is to promote this, which
> > it 
> > does by restricting how you can apply GPL licensing. It would be 
> > consistent with this philosophy that GPL does not allow one to
> > `link'
> > with a commercial package. However, somewhat reluctantly it seems,
> > an 
> > exception is made under GPL licensing  for linking to commercial 
> > `system libraries' because it is necessary to allow this for
> > things 
> > like R etc.
> > 
> > If Bloomberg API is a system library then it also qualifies as an 
> > exception. (I have seen the license file and note that you are able
> > to 
> > distribute the API.)
> > 
> > In my case `bar' is asreml and I don't believe that it qualifies as
> > a 
> > system library. However, I can use it to build my library
> > (asremlPlus) and the maintainers and license owners know that I do 
> > this. As a result I am still unsure that GPL can be applied in my 
> > case.
> > 
> > Ugh! It is a minefield.
> 
> It is not as bad as you think. 
> 
> The FSF admits that sometimes you need to link to a non-free library.
> They just ask you not to do it if a free replacement is available:
> https://www.gnu.org/licenses/gpl-faq.en.html#FSWithNFLibs
> 
> As Duncan points out, your choice of license does not affect what you
> can do with it. As copyright holder, you can do what you like (modulo
> restrictions placed on you by the asreml license). The question is
> what rights you want to confer to other people.
> 
> GPL is based on copyright law, so the rights and obligations it
> confers come into effect only when the software is distributed (or
> "conveyed"
> in the updated language of GPL 3) to a third party. These rights and
> obligations also apply to any derived works, which means both
> modified source code and binary packages created from the source
> code.
> 
> With a GPL license, anyone has the right to do the following with
> your asremlPlus package:
> 
> 1) Distribute the source package.
> 
> 2) Distribute modified versions of the source package under the same
> GPL conditions.
> 
> 3) Install and use the asremlPlus package linked to the asreml
> library.
>  
> 
> What they cannot do with a standard GPL license is:
> 
> 4) Distribute a binary package of asremlPlus linked to asreml
> 
> Distributing a binary package of asremlPlus under the GPL comes with
> the obligation to provide the source code to asreml which, of course,
> cannot be done.
> 
> It should also be noted that the license terms of asreml itself may
> prevent distribution of a binary package of asremlPlus.
> 
> However, if there are no such restrictions then nothing prevents you
> as sole copyright holder from creating your own (dynamically linked)
> binaries and distributing them to your users.
> 
> If you do want to give your users rights to distribute binary
> packages then you may add an explicit exception to the GPL to your
> software license. The FSF provides a template to add this exception
> to your
> license:
> 
> https://www.gnu.org/licenses/gpl-faq.en.html#GPLIncompatibleLibs
> 
> Martyn
> 
> 
> > Thanks muchly for your input.
> > 
> > Cheers,
> > 
> >   Chris
> > 
> > 
> > -----Original Message-----
> > From: Dirk Eddelbuettel [mailto:dirk.eddelbuettel at gmail.com] On
> > Behalf 
> > Of Dirk Eddelbuettel
> > Sent: Saturday, 20 January 2018 2:30 AM
> > To: Duncan Murdoch
> > Cc: Chris Brien; r-package-devel at r-project.org
> > Subject: Re: [R-pkg-devel] Licensing of an R package
> > 
> > 
> > Chris,
> > 
> > I am with Duncan here.
> > 
> > You can license _your_ package any way you want and prefer. I like 
> > GPL.
> > 
> > You seem to imply that the GPL license prohibits linking against 
> > commercial code.  If that were the case we'd never have R, Emacs, 
> > gcc/g++, ... on Windows or macOS or any of the now-essentially- 
> > extinct commercial Unux flavours.  We alway link against their
> > system 
> > libraries too.
> > 
> > Also look eg at our Rblpapi package.  The Bloomberg API is not
> > open 
> > source, but they allow distribution of the (pre-built) library and 
> > headers.  Our package, building on top, is GPL-2+. No
> > issues.  (This 
> > example is extra fun because CRAN can't distribute the API, but
> > can 
> > use it for building our package. Using the package requires having
> > a 
> > commercial and expensive Bloomberg terminal license and
> > installation.)
> > 
> > Dirk
> > 
> > --
> > http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> > 
> > ______________________________________________
> > R-package-devel at r-project.org mailing list 
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel

From kevinushey at gmail.com  Wed Jan 24 00:08:55 2018
From: kevinushey at gmail.com (Kevin Ushey)
Date: Tue, 23 Jan 2018 15:08:55 -0800
Subject: [R-pkg-devel] CRAN and packages bundling third party C/C++ code
In-Reply-To: <CAJXgQP1-iCm5h5-0JWjsKfaJ2-mugjBZ7TQVA4w7xd1vdnnfwQ@mail.gmail.com>
References: <CAJXgQP1-iCm5h5-0JWjsKfaJ2-mugjBZ7TQVA4w7xd1vdnnfwQ@mail.gmail.com>
Message-ID: <CAJXgQP3L2yqJyjrJEeTUwzZL8KN36P01B5H+Ot4RRZ-e9yM16w@mail.gmail.com>

For the record, some package authors whose packages depend on
RcppParallel  have had their new submissions accepted to CRAN, so I
suppose part of the answer is "explain it to the maintainers and
they'll understand".

However, a response from the CRAN team regarding how I should handle
these warnings emitted myself from TBB would still be appreciated (for
myself and other package authors who might want to embed 3rd party
code in their packages).

Thanks,
Kevin

On Thu, Jan 18, 2018 at 11:19 AM, Kevin Ushey <kevinushey at gmail.com> wrote:
>
> Hi,
>
> This is mostly a question for the CRAN team, but I figured posting here would be best since other package maintainers could see the responses as well.
>
> I'm currently in the process of preparing a submission of RcppParallel to CRAN. RcppParallel bundles Intel's Threading Building Blocks (https://www.threadingbuildingblocks.org/) and builds + installs it alongside the package.
>
> However, the TBB sources themselves do a lot of things that trip up R CMD check + versions of R compiled with sanitizers, which are mostly out of my control. For example, some UBSAN errors are emitted here:
>
> https://www.stats.ox.ac.uk/pub/bdr/memtests/clang-UBSAN/RcppParallel/tests/doRUnit.Rout
>
> Executing test function test.distance  ... /data/gannet/ripley/R/packages/tests-clang-SAN/RcppParallel.Rcheck/RcppParallel/include/tbb/task.h:721:30: runtime error: member call on address 0x7fbf31e93d00 which does not point to an object of type 'tbb::internal::scheduler'
> 0x7fbf31e93d00: note: object is of type 'tbb::internal::custom_scheduler<tbb::internal::IntelSchedulerTraits>'
>  00 00 00 00  a8 ab 76 32 bf 7f 00 00  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  80 ff c9 31
>               ^~~~~~~~~~~~~~~~~~~~~~~
>               vptr for 'tbb::internal::custom_scheduler<tbb::internal::IntelSchedulerTraits>'
> SUMMARY: UndefinedBehaviorSanitizer: undefined-behavior /data/gannet/ripley/R/packages/tests-clang-SAN/RcppParallel.Rcheck/RcppParallel/include/tbb/task.h:721:30 in
>
> This occurs, as far as I can tell, because TBB sidesteps typical C++ object construction for some objects: instead, it allocates some memory, then casts it to some required type. As an example,
>
> https://github.com/RcppCore/RcppParallel/blob/603d1aa6f340668e34f5f490438967489edc9197/src/tbb/src/tbb/scheduler.cpp#L322-L328
>
> While this is 'wrong', it also 'works'. What am I, as a package maintainer, supposed to do in this situation? To make things worse, this UBSAN warning unfortunately affects all client packages of RcppParallel as well, as this warning is triggered by code ran by RcppParallel on load / startup. Do other package maintainers just need to say, "sorry, that's RcppParallel's fault"?
>
> In addition, TBB itself suppresses a number of compiler diagnostics deliberately -- for example,
>
> https://github.com/RcppCore/RcppParallel/blob/603d1aa6f340668e34f5f490438967489edc9197/inst/include/tbb/flow_graph_opencl_node.h#L1234-L1252
>
> https://github.com/RcppCore/RcppParallel/blob/603d1aa6f340668e34f5f490438967489edc9197/src/tbb/include/tbb/tbb_machine.h#L666-L674
>
> Presumedly, TBB does this because they know what they're doing and the compiler diagnostic will not be useful within this region of code. However, this also triggers R CMD check warnings. What should I do here -- just explain the case to CRAN? Patch TBB to allow the compiler diagnostics to flow through?
>
> The more general question here -- what should package authors do when third-party code bundled in the package emits compiler warnings?
>
> Thanks,
> Kevin


From edd at debian.org  Wed Jan 24 03:20:03 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 23 Jan 2018 20:20:03 -0600
Subject: [R-pkg-devel] Working with R-devel
Message-ID: <23143.60755.116692.212845@bud.eddelbuettel.com>


I am going in circles here and have lost my way. I used to have means to
build R-devel (still do) and use it for local testing (no longer do).

 - Fresh build of R-devel
 - One entry in .libPaths()
 - I can install Rcpp, it ends up in that .libPaths()
 - I can load
 - With the _exact same settings_ starting R as R CMD check ... I fail on

   ** preparing package for lazy loading
   Error : package ?Rcpp? was installed by an R version with different internals; \
   it needs to be reinstalled for use with this R version

which is both false (see above) and irritating.

Does anybody have any tips, working guidelines or interpretations of the ever
changing manuals (which charmingly never document what changes) ?

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ligges at statistik.tu-dortmund.de  Wed Jan 24 11:23:50 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 24 Jan 2018 11:23:50 +0100
Subject: [R-pkg-devel] Working with R-devel
In-Reply-To: <23143.60755.116692.212845@bud.eddelbuettel.com>
References: <23143.60755.116692.212845@bud.eddelbuettel.com>
Message-ID: <c7caa015-b754-30a6-44ae-ff0895fb0549@statistik.tu-dortmund.de>



On 24.01.2018 03:20, Dirk Eddelbuettel wrote:
> 
> I am going in circles here and have lost my way. I used to have means to
> build R-devel (still do) and use it for local testing (no longer do).
> 
>   - Fresh build of R-devel
>   - One entry in .libPaths()
>   - I can install Rcpp, it ends up in that .libPaths()
>   - I can load
>   - With the _exact same settings_ starting R as R CMD check ... I fail on
> 
>     ** preparing package for lazy loading
>     Error : package ?Rcpp? was installed by an R version with different internals; \
>     it needs to be reinstalled for use with this R version

I guess you actually pick up anotehr version of R.
Carefully check what is on your PATH and perhaps some Renviron files 
that may be around?

Best,
Uwe


> 
> which is both false (see above) and irritating.
> 
> Does anybody have any tips, working guidelines or interpretations of the ever
> changing manuals (which charmingly never document what changes) ?
> 
> Dirk
>


From maechler at stat.math.ethz.ch  Wed Jan 24 12:00:34 2018
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed, 24 Jan 2018 12:00:34 +0100
Subject: [R-pkg-devel] Working with R-devel
In-Reply-To: <c7caa015-b754-30a6-44ae-ff0895fb0549@statistik.tu-dortmund.de>
References: <23143.60755.116692.212845@bud.eddelbuettel.com>
 <c7caa015-b754-30a6-44ae-ff0895fb0549@statistik.tu-dortmund.de>
Message-ID: <23144.26450.630964.14646@stat.math.ethz.ch>

>>>>> Uwe Ligges <ligges at statistik.tu-dortmund.de>
>>>>>     on Wed, 24 Jan 2018 11:23:50 +0100 writes:

    > On 24.01.2018 03:20, Dirk Eddelbuettel wrote:
    >> 
    >> I am going in circles here and have lost my way. I used to have means to
    >> build R-devel (still do) and use it for local testing (no longer do).
    >> 
    >> - Fresh build of R-devel
    >> - One entry in .libPaths()
    >> - I can install Rcpp, it ends up in that .libPaths()
    >> - I can load
    >> - With the _exact same settings_ starting R as R CMD check ... I fail on
    >> 
    >> ** preparing package for lazy loading
    >> Error : package ?Rcpp? was installed by an R version with different internals; \
    >> it needs to be reinstalled for use with this R version

    > I guess you actually pick up anotehr version of R.
    > Carefully check what is on your PATH and perhaps some Renviron files 
    > that may be around?

    > Best,
    > Uwe

Yes exactly.  I've been bitten many times by similar issues in
recent weeks.

The problem here is that we have so many environment variables
governing the process.
I think I have mostly solved this by the following "strategy"
(Linux/Unixy bash-like shell):

------------------------------------------

## To check: one of 
env | grep '^R_'
env | grep -E '^_?R_'

## Before running:
unset R_PROFILE R_ENVIRON R_LIBS
export R_CHECK_ENVIRON=~/.R/check.Renviron_Rdevel

## where my  check.Renviron*  basically only sets R_LIBS 
---------

[In an ideal world, R functions involved here would *not* start
 other R processes...  but that seems necessary for other good reasons]

Martin



    >> 
    >> which is both false (see above) and irritating.
    >> 
    >> Does anybody have any tips, working guidelines or interpretations of the ever
    >> changing manuals (which charmingly never document what changes) ?
    >> 
    >> Dirk
    >> 

    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From thierry.onkelinx at inbo.be  Wed Jan 24 12:13:24 2018
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Wed, 24 Jan 2018 12:13:24 +0100
Subject: [R-pkg-devel] new package? - Sports data from transfermarkt.com
 using rvest
In-Reply-To: <33D76D77E9AC4B438DA38B348ED6890D14D942CE@EMAIL.ktkdom.pte.hu>
References: <33D76D77E9AC4B438DA38B348ED6890D14D942CE@EMAIL.ktkdom.pte.hu>
Message-ID: <CAJuCY5wBh=rYZqoQPaQJqGGXvTq4=iDOQzDtr9TGi4m9FHBBZQ@mail.gmail.com>

Dear Daniel,

First of all you need to make sure that the licence of
transfermarkt.com allows the usage that you have intended. If that is
not clear from their website, then you should contact them rather than
us.

CRAN has several packages to assists in downloading data from online
sources. But the source has to allow that kind of usage.

Best regards,

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
AND FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no
more than asking him to perform a post-mortem examination: he may be
able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does
not ensure that a reasonable answer can be extracted from a given body
of data. ~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////




2018-01-23 16:27 GMT+01:00 Kehl D?niel <kehld at ktk.pte.hu>:
> Dear List members,
>
> maybe this is not the right place to ask, if that is the case, please forward me to the right place.
> I developed some functions to download and transform football/soccer related data from transfermarkt.com.
> There are plans to create my first package based on these functions and of course develop them and add more later. As far as I know there is no API to that page, so I am using the rvest package.
> My question is: is this an OK thing to do? Should I contact transfermarkt.com? My german is not perfect (just like my english), this is what I've found on thier webpage. Does that mean one can not create a package related to that page? Or can't crawl at all? Or just not allowed to sell the data? If it is allowed, can one post the package on CRAN at the end?
>
> Please if any of you have experience in that or just show me where to ask, do not hesitate!
>
> LEGAL NOTICE
> ? Transfermarkt GmbH & Co. KG 2000-2018
>
> All rights reserved.
>
> Der Inhalt dieser Website ist urheberrechtlich gesch?tzt. Nachdruck, Aufnahme in Online-Dienste, Internet und Vervielf?ltigung auf Datentr?ger wie CD-ROM, DVD-ROM usw. d?rfen, auch auszugsweise, nur nach vorheriger schriftlicher Zustimmung durch Transfermarkt erfolgen. Eine kommerzielle Weitervermarktung des Inhalts ist untersagt.
>
> Transfermarkt haftet nicht f?r unverlangt eingesandte Inhalte, Manuskripte und Fotos. F?r Inhalte externer Links und fremde Inhalte ?bernimmt Transfermarkt keine Verantwortung.
>
> Thank you for all your insights and/or comments,
>
> best regards
> Daniel
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> Dr. KEHL D?niel
>
> adjunktus
>
>
>
>
>
> P?CSI TUDOM?NYEGYETEM K?ZGAZDAS?GTUDOM?NYI KAR
>
> K?zgazdas?gtan ?s ?konometria Int?zet
>
> H-7622 P?cs, R?k?czi ?t 80. | www.ktk.pte.hu
>
> +36 72 501 599/ 23144 | kehld at ktk.pte.hu
>
>
>
>
>
>
>
>
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ligges at statistik.tu-dortmund.de  Wed Jan 24 12:15:12 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 24 Jan 2018 12:15:12 +0100
Subject: [R-pkg-devel] Working with R-devel
In-Reply-To: <23144.26450.630964.14646@stat.math.ethz.ch>
References: <23143.60755.116692.212845@bud.eddelbuettel.com>
 <c7caa015-b754-30a6-44ae-ff0895fb0549@statistik.tu-dortmund.de>
 <23144.26450.630964.14646@stat.math.ethz.ch>
Message-ID: <a4deff36-ca1b-704f-b807-496d2f681414@statistik.tu-dortmund.de>



On 24.01.2018 12:00, Martin Maechler wrote:
>>>>>> Uwe Ligges <ligges at statistik.tu-dortmund.de>
>>>>>>      on Wed, 24 Jan 2018 11:23:50 +0100 writes:
> 
>      > On 24.01.2018 03:20, Dirk Eddelbuettel wrote:
>      >>
>      >> I am going in circles here and have lost my way. I used to have means to
>      >> build R-devel (still do) and use it for local testing (no longer do).
>      >>
>      >> - Fresh build of R-devel
>      >> - One entry in .libPaths()
>      >> - I can install Rcpp, it ends up in that .libPaths()
>      >> - I can load
>      >> - With the _exact same settings_ starting R as R CMD check ... I fail on
>      >>
>      >> ** preparing package for lazy loading
>      >> Error : package ?Rcpp? was installed by an R version with different internals; \
>      >> it needs to be reinstalled for use with this R version
> 
>      > I guess you actually pick up anotehr version of R.
>      > Carefully check what is on your PATH and perhaps some Renviron files
>      > that may be around?
> 
>      > Best,
>      > Uwe
> 
> Yes exactly.  I've been bitten many times by similar issues in
> recent weeks.
> 
> The problem here is that we have so many environment variables
> governing the process.
> I think I have mostly solved this by the following "strategy"
> (Linux/Unixy bash-like shell):
> 
> ------------------------------------------
> 
> ## To check: one of
> env | grep '^R_'
> env | grep -E '^_?R_'
> 
> ## Before running:
> unset R_PROFILE R_ENVIRON R_LIBS
> export R_CHECK_ENVIRON=~/.R/check.Renviron_Rdevel
> 
> ## where my  check.Renviron*  basically only sets R_LIBS
> ---------
> 
> [In an ideal world, R functions involved here would *not* start
>   other R processes...  but that seems necessary for other good reasons]

The simplest one is that R can crash during a check, then you would end 
uo without message where that happened, it is hard to compare timings  etc.

In the real but not so ideal world, I need even a wrapper around R CMD 
check to have control about the process to be able to kill it 
programmaically etc.

Best,
Uwe






> 
> Martin
> 
> 
> 
>      >>
>      >> which is both false (see above) and irritating.
>      >>
>      >> Does anybody have any tips, working guidelines or interpretations of the ever
>      >> changing manuals (which charmingly never document what changes) ?
>      >>
>      >> Dirk
>      >>
> 
>      > ______________________________________________
>      > R-package-devel at r-project.org mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From edd at debian.org  Wed Jan 24 13:10:54 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 24 Jan 2018 06:10:54 -0600
Subject: [R-pkg-devel] Working with R-devel
In-Reply-To: <23144.26450.630964.14646@stat.math.ethz.ch>
References: <23143.60755.116692.212845@bud.eddelbuettel.com>
 <c7caa015-b754-30a6-44ae-ff0895fb0549@statistik.tu-dortmund.de>
 <23144.26450.630964.14646@stat.math.ethz.ch>
Message-ID: <23144.30670.343647.882946@bud.eddelbuettel.com>


On 24 January 2018 at 12:00, Martin Maechler wrote:
| >>>>> Uwe Ligges <ligges at statistik.tu-dortmund.de>
|     > I guess you actually pick up anotehr version of R.
|     > Carefully check what is on your PATH and perhaps some Renviron files 
|     > that may be around?

I did, a million times, hence the frustration.
 
| Yes exactly.  I've been bitten many times by similar issues in
| recent weeks.
| 
| The problem here is that we have so many environment variables
| governing the process.
| I think I have mostly solved this by the following "strategy"
| (Linux/Unixy bash-like shell):

That looks good. I do have ~/.R/check.Renviron which likely gets in the way.
I even tries to (easily) escape from that via Docker but then the most recent
r-devel build on Docker blew up over something with DATAPTR (uggh).
 
| ------------------------------------------
| 
| ## To check: one of 
| env | grep '^R_'
| env | grep -E '^_?R_'
| 
| ## Before running:
| unset R_PROFILE R_ENVIRON R_LIBS
| export R_CHECK_ENVIRON=~/.R/check.Renviron_Rdevel
| 
| ## where my  check.Renviron*  basically only sets R_LIBS 
| ---------

The unset trick is good. That may do it.
 
| [In an ideal world, R functions involved here would *not* start
|  other R processes...  but that seems necessary for other good reasons]

Right.

Thanks for the help, gentlemen!

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd at debian.org  Wed Jan 24 13:39:14 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 24 Jan 2018 06:39:14 -0600
Subject: [R-pkg-devel] FIXED -- Working with R-devel
In-Reply-To: <a4deff36-ca1b-704f-b807-496d2f681414@statistik.tu-dortmund.de>
References: <23143.60755.116692.212845@bud.eddelbuettel.com>
 <c7caa015-b754-30a6-44ae-ff0895fb0549@statistik.tu-dortmund.de>
 <23144.26450.630964.14646@stat.math.ethz.ch>
 <a4deff36-ca1b-704f-b807-496d2f681414@statistik.tu-dortmund.de>
Message-ID: <23144.32370.451554.562291@bud.eddelbuettel.com>


Thanks to Martin, my 'RD' script now points to

  ~/.R/check.Renviron-Rdevel

in which I also set (or re-set)

  R_LIBS="/usr/local/lib/R-devel/site-library/"

after having added this (for good measure) to my 'RD' script:

  unset R_PROFILE R_RENVIRON R_LIBS
  export R_CHECK_ENVIRON=~/.R/check.Renviron-Rdevel

as suggested by Martin.

I tend not to have R_PROFILE or R_ENVIRON because I find environment variable
harder to control (my choice is direct settings in $RHOME/etc/Rprofile.site
or $RHOME/etc/Renviron.site) but here the switch to R_LIBS did me in.

Thanks again for the hint!

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From luke-tierney at uiowa.edu  Wed Jan 24 14:03:09 2018
From: luke-tierney at uiowa.edu (luke-tierney at uiowa.edu)
Date: Wed, 24 Jan 2018 07:03:09 -0600 (CST)
Subject: [R-pkg-devel] Working with R-devel
In-Reply-To: <a4deff36-ca1b-704f-b807-496d2f681414@statistik.tu-dortmund.de>
References: <23143.60755.116692.212845@bud.eddelbuettel.com>
 <c7caa015-b754-30a6-44ae-ff0895fb0549@statistik.tu-dortmund.de>
 <23144.26450.630964.14646@stat.math.ethz.ch>
 <a4deff36-ca1b-704f-b807-496d2f681414@statistik.tu-dortmund.de>
Message-ID: <alpine.DEB.2.20.1801240647540.2898@luke-Latitude>

On Wed, 24 Jan 2018, Uwe Ligges wrote:

>
>
> On 24.01.2018 12:00, Martin Maechler wrote:
>>>>>>> Uwe Ligges <ligges at statistik.tu-dortmund.de>
>>>>>>>      on Wed, 24 Jan 2018 11:23:50 +0100 writes:
>>
>>      > On 24.01.2018 03:20, Dirk Eddelbuettel wrote:
>>      >>
>>      >> I am going in circles here and have lost my way. I used to have 
> means to
>>      >> build R-devel (still do) and use it for local testing (no longer 
> do).
>>      >>
>>      >> - Fresh build of R-devel
>>      >> - One entry in .libPaths()
>>      >> - I can install Rcpp, it ends up in that .libPaths()
>>      >> - I can load
>>      >> - With the _exact same settings_ starting R as R CMD check ... I 
> fail on
>>      >>
>>      >> ** preparing package for lazy loading
>>      >> Error : package ?Rcpp? was installed by an R version with different 
> internals; \
>>      >> it needs to be reinstalled for use with this R version

If you are picking up an R 3.4.x that is trying to load a package
built by R-devel you should also see a warning that the package was
built under R version 3.5.0

If you are not, then you could be picking up an older R-devel from
before the internals change. Probably more likely, the Rcpp being
loaded at that point was built by 3.4.x, which would suggest library
path settings are messed up at that point, but not clear why. [It
might be possible and useful to provide more information about the
broken pieces in the error message but I won't have time to look any
time soon.]

At the moment when it matters I usually use

env R_LIBS=<my R-devel library> R CMD check ...

for checks under R_devel

Best,

luke

>>
>>      > I guess you actually pick up anotehr version of R.
>>      > Carefully check what is on your PATH and perhaps some Renviron files
>>      > that may be around?
>>
>>      > Best,
>>      > Uwe
>> 
>> Yes exactly.  I've been bitten many times by similar issues in
>> recent weeks.
>> 
>> The problem here is that we have so many environment variables
>> governing the process.
>> I think I have mostly solved this by the following "strategy"
>> (Linux/Unixy bash-like shell):
>> 
>> ------------------------------------------
>> 
>> ## To check: one of
>> env | grep '^R_'
>> env | grep -E '^_?R_'
>> 
>> ## Before running:
>> unset R_PROFILE R_ENVIRON R_LIBS
>> export R_CHECK_ENVIRON=~/.R/check.Renviron_Rdevel
>> 
>> ## where my  check.Renviron*  basically only sets R_LIBS
>> ---------
>> 
>> [In an ideal world, R functions involved here would *not* start
>>   other R processes...  but that seems necessary for other good reasons]
>
> The simplest one is that R can crash during a check, then you would end 
> uo without message where that happened, it is hard to compare timings  etc.
>
> In the real but not so ideal world, I need even a wrapper around R CMD 
> check to have control about the process to be able to kill it 
> programmaically etc.
>
> Best,
> Uwe
>
>
>
>
>
>
>> 
>> Martin
>> 
>> 
>>
>>      >>
>>      >> which is both false (see above) and irritating.
>>      >>
>>      >> Does anybody have any tips, working guidelines or interpretations 
> of the ever
>>      >> changing manuals (which charmingly never document what changes) ?
>>      >>
>>      >> Dirk
>>      >>
>>
>>      > ______________________________________________
>>      > R-package-devel at r-project.org mailing list
>>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From hugh.parsonage at gmail.com  Wed Jan 24 14:44:34 2018
From: hugh.parsonage at gmail.com (Hugh Parsonage)
Date: Thu, 25 Jan 2018 00:44:34 +1100
Subject: [R-pkg-devel] Is it ever appropriate (or mandatory) to Suggests: R
	(>= version) ?
Message-ID: <CAJmOi+NeHfP_ADKHCVrZVK=uYHq3iSU81pR3s6yTYj_hQ5P+xQ@mail.gmail.com>

I believe it is a requirement that if package A imports package B, and
package B lists package C in Depends: then package A must also list
package C in Depends:
A popular stackoverflow answer states this.[1] I can't find any other
source but it makes sense.

What if package B is suggested by package A and package B depends on a
certain version of R? That is if package A *suggests* package B and
package B lists Depends: R (>= ver). In such a case, is it necessary
to list this dependency in Suggests? Certainly endnote 12 of WRE says
it would be necessary if the dependency were for a package, but
doesn't seem to mention similar dependencies on R version. And, as far
as I can see, no package on CRAN lists R in Suggests, so it would to
be non-standard if not prohibited.

S <- available.packages()
S[grepl("(?<!([A-Za-z]))R \\(", S[, "Suggests"], perl = TRUE), ]


[1] https://stackoverflow.com/a/8638902/1664978


From edd at debian.org  Wed Jan 24 15:11:52 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 24 Jan 2018 08:11:52 -0600
Subject: [R-pkg-devel] Working with R-devel
In-Reply-To: <alpine.DEB.2.20.1801240647540.2898@luke-Latitude>
References: <23143.60755.116692.212845@bud.eddelbuettel.com>
 <c7caa015-b754-30a6-44ae-ff0895fb0549@statistik.tu-dortmund.de>
 <23144.26450.630964.14646@stat.math.ethz.ch>
 <a4deff36-ca1b-704f-b807-496d2f681414@statistik.tu-dortmund.de>
 <alpine.DEB.2.20.1801240647540.2898@luke-Latitude>
Message-ID: <23144.37928.517092.214333@bud.eddelbuettel.com>


On 24 January 2018 at 07:03, luke-tierney at uiowa.edu wrote:
| If you are picking up an R 3.4.x that is trying to load a package
| built by R-devel you should also see a warning that the package was
| built under R version 3.5.0

Yes, I am of course very aware of the issue.

But we had to separate out R-release and R-devel for years, and so I did. I
had separate libPaths (or, at least, leading component) for R-devel because
of that.
 
| If you are not, then you could be picking up an older R-devel from
| before the internals change. Probably more likely, the Rcpp being
| loaded at that point was built by 3.4.x, which would suggest library
| path settings are messed up at that point, but not clear why. [It
| might be possible and useful to provide more information about the
| broken pieces in the error message but I won't have time to look any
| time soon.]
| 
| At the moment when it matters I usually use
| 
| env R_LIBS=<my R-devel library> R CMD check ...
| 
| for checks under R_devel

It was the R_LIBS_USER (which used to work) to R_LIBS change that got plus
the fact that my R-devel was picking up my R-release check.Renviron. The hint
from Martin got rid of that.

Sometimes I wonder if we should have an extra-verbose mode that picks up
EVERY single Sys.getenv() and alike to make it easier to trace this. But
run-time cost of the check is probably unattractive.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ligges at statistik.tu-dortmund.de  Wed Jan 24 15:19:59 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 24 Jan 2018 15:19:59 +0100
Subject: [R-pkg-devel] Is it ever appropriate (or mandatory) to
 Suggests: R (>= version) ?
In-Reply-To: <CAJmOi+NeHfP_ADKHCVrZVK=uYHq3iSU81pR3s6yTYj_hQ5P+xQ@mail.gmail.com>
References: <CAJmOi+NeHfP_ADKHCVrZVK=uYHq3iSU81pR3s6yTYj_hQ5P+xQ@mail.gmail.com>
Message-ID: <0b6f0fcf-075e-3fb0-03b5-432db7022267@statistik.tu-dortmund.de>

This is implicitly OK:

If A suggests B and B depends on some R version, then B is only 
available if you are running that R version anyway, hence the additional 
declaration is not needed.


The typical cause of trouble is as follows:

A depends on B and B suggests C.
Then A has to suggest C in case spme functionality in A relies on parts 
of B that actually need C.

Best,
Uwe Ligges






On 24.01.2018 14:44, Hugh Parsonage wrote:
> I believe it is a requirement that if package A imports package B, and
> package B lists package C in Depends: then package A must also list
> package C in Depends:
> A popular stackoverflow answer states this.[1] I can't find any other
> source but it makes sense.
> 
> What if package B is suggested by package A and package B depends on a
> certain version of R? That is if package A *suggests* package B and
> package B lists Depends: R (>= ver). In such a case, is it necessary
> to list this dependency in Suggests? Certainly endnote 12 of WRE says
> it would be necessary if the dependency were for a package, but
> doesn't seem to mention similar dependencies on R version. And, as far
> as I can see, no package on CRAN lists R in Suggests, so it would to
> be non-standard if not prohibited.
> 
> S <- available.packages()
> S[grepl("(?<!([A-Za-z]))R \\(", S[, "Suggests"], perl = TRUE), ]
> 
> 
> [1] https://stackoverflow.com/a/8638902/1664978
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From georgi.boshnakov at manchester.ac.uk  Wed Jan 24 16:04:06 2018
From: georgi.boshnakov at manchester.ac.uk (Georgi Boshnakov)
Date: Wed, 24 Jan 2018 15:04:06 +0000
Subject: [R-pkg-devel] Is it ever appropriate (or mandatory) to
 Suggests: R	(>= version) ?
In-Reply-To: <CAJmOi+NeHfP_ADKHCVrZVK=uYHq3iSU81pR3s6yTYj_hQ5P+xQ@mail.gmail.com>
References: <CAJmOi+NeHfP_ADKHCVrZVK=uYHq3iSU81pR3s6yTYj_hQ5P+xQ@mail.gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F64B444@MBXP01.ds.man.ac.uk>

The advice at the link you cite ([1] https://stackoverflow.com/a/8638902/1664978) is not quite right:

> I believe it is a requirement that if package A imports package B, and
> package B lists package C in Depends: then package A must also list
> package C in Depends:
> A popular stackoverflow answer states this.[1] I can't find any other
> source but it makes sense.

You don't need (and in general should not) put a package in Depends only because some of your imports do. In some cases you may have to, but this is only because of missing imports in the package you import. Note that even if the package you import  (package B) "Depends" on package "C", "B" still needs to import the functionality  from "C" it needs (e.g. putting import(C)) in its NAMESPACE file.  These days 'R CMD check' enforces this but some older packages on CRAN  may not have the import() directives and in that case you have no other option than to "Depend" on "C". (In this case, write to the package maintainer to alert them about the problem.)

As to indirect dependency on R version I am also not clear.

Georgi 



________________________________________
From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf of Hugh Parsonage [hugh.parsonage at gmail.com]
Sent: 24 January 2018 13:44
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Is it ever appropriate (or mandatory) to Suggests: R     (>= version) ?

I believe it is a requirement that if package A imports package B, and
package B lists package C in Depends: then package A must also list
package C in Depends:
A popular stackoverflow answer states this.[1] I can't find any other
source but it makes sense.

What if package B is suggested by package A and package B depends on a
certain version of R? That is if package A *suggests* package B and
package B lists Depends: R (>= ver). In such a case, is it necessary
to list this dependency in Suggests? Certainly endnote 12 of WRE says
it would be necessary if the dependency were for a package, but
doesn't seem to mention similar dependencies on R version. And, as far
as I can see, no package on CRAN lists R in Suggests, so it would to
be non-standard if not prohibited.

S <- available.packages()
S[grepl("(?<!([A-Za-z]))R \\(", S[, "Suggests"], perl = TRUE), ]


[1] https://stackoverflow.com/a/8638902/1664978

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From wdunlap at tibco.com  Wed Jan 24 16:55:16 2018
From: wdunlap at tibco.com (William Dunlap)
Date: Wed, 24 Jan 2018 07:55:16 -0800
Subject: [R-pkg-devel] Working with R-devel
In-Reply-To: <23144.37928.517092.214333@bud.eddelbuettel.com>
References: <23143.60755.116692.212845@bud.eddelbuettel.com>
 <c7caa015-b754-30a6-44ae-ff0895fb0549@statistik.tu-dortmund.de>
 <23144.26450.630964.14646@stat.math.ethz.ch>
 <a4deff36-ca1b-704f-b807-496d2f681414@statistik.tu-dortmund.de>
 <alpine.DEB.2.20.1801240647540.2898@luke-Latitude>
 <23144.37928.517092.214333@bud.eddelbuettel.com>
Message-ID: <CAF8bMcY3XCLwY2g1rzo+skBva2wVnacnEUKUPUouTB7x6RyReg@mail.gmail.com>

On Linux you can trace all the getenv calls with ltrace.  It only
works on ELF files, not sh scripts:

% R CMD ltrace -e getenv `R RHOME`/bin/*/R
libR.so->getenv("R_HOME")
               = "/home/R/R-3.4.3/lib64/R"
libR.so->getenv("R_TRANSLATIONS")
               = nil
libR.so->getenv("R_PLATFORM")
               = "x86_64-pc-linux-gnu"
libR.so->getenv("R_PAPERSIZE")
              = "letter"
libR.so->getenv("R_PAPERSIZE")
              = "letter"
libR.so->getenv("R_PRINTCMD")
               = "lpr"
libR.so->getenv("R_RD4PDF")
               = "times,hyper"
...

Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Wed, Jan 24, 2018 at 6:11 AM, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 24 January 2018 at 07:03, luke-tierney at uiowa.edu wrote:
> | If you are picking up an R 3.4.x that is trying to load a package
> | built by R-devel you should also see a warning that the package was
> | built under R version 3.5.0
>
> Yes, I am of course very aware of the issue.
>
> But we had to separate out R-release and R-devel for years, and so I did. I
> had separate libPaths (or, at least, leading component) for R-devel because
> of that.
>
> | If you are not, then you could be picking up an older R-devel from
> | before the internals change. Probably more likely, the Rcpp being
> | loaded at that point was built by 3.4.x, which would suggest library
> | path settings are messed up at that point, but not clear why. [It
> | might be possible and useful to provide more information about the
> | broken pieces in the error message but I won't have time to look any
> | time soon.]
> |
> | At the moment when it matters I usually use
> |
> | env R_LIBS=<my R-devel library> R CMD check ...
> |
> | for checks under R_devel
>
> It was the R_LIBS_USER (which used to work) to R_LIBS change that got plus
> the fact that my R-devel was picking up my R-release check.Renviron. The
> hint
> from Martin got rid of that.
>
> Sometimes I wonder if we should have an extra-verbose mode that picks up
> EVERY single Sys.getenv() and alike to make it easier to trace this. But
> run-time cost of the check is probably unattractive.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd at debian.org  Wed Jan 24 17:10:58 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 24 Jan 2018 10:10:58 -0600
Subject: [R-pkg-devel] Working with R-devel
In-Reply-To: <CAF8bMcY3XCLwY2g1rzo+skBva2wVnacnEUKUPUouTB7x6RyReg@mail.gmail.com>
References: <23143.60755.116692.212845@bud.eddelbuettel.com>
 <c7caa015-b754-30a6-44ae-ff0895fb0549@statistik.tu-dortmund.de>
 <23144.26450.630964.14646@stat.math.ethz.ch>
 <a4deff36-ca1b-704f-b807-496d2f681414@statistik.tu-dortmund.de>
 <alpine.DEB.2.20.1801240647540.2898@luke-Latitude>
 <23144.37928.517092.214333@bud.eddelbuettel.com>
 <CAF8bMcY3XCLwY2g1rzo+skBva2wVnacnEUKUPUouTB7x6RyReg@mail.gmail.com>
Message-ID: <23144.45074.969594.883987@bud.eddelbuettel.com>


On 24 January 2018 at 07:55, William Dunlap wrote:
| On Linux you can trace all the getenv calls with ltrace.  It only
| works on ELF files, not sh scripts:
| 
| % R CMD ltrace -e getenv `R RHOME`/bin/*/R
| libR.so->getenv("R_HOME")
|                = "/home/R/R-3.4.3/lib64/R"
| libR.so->getenv("R_TRANSLATIONS")
|                = nil
| libR.so->getenv("R_PLATFORM")
|                = "x86_64-pc-linux-gnu"
| libR.so->getenv("R_PAPERSIZE")
|               = "letter"
| libR.so->getenv("R_PAPERSIZE")
|               = "letter"
| libR.so->getenv("R_PRINTCMD")
|                = "lpr"
| libR.so->getenv("R_RD4PDF")
|                = "times,hyper"
| ...

A+ suggestion.

I was thinking about strace and filtering that, but was unaware of its ltrace
trick. Very nice---thanks, Bill!

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From retep.meissner at gmail.com  Wed Jan 24 18:59:25 2018
From: retep.meissner at gmail.com (Peter Meissner)
Date: Wed, 24 Jan 2018 18:59:25 +0100
Subject: [R-pkg-devel] new package? - Sports data from transfermarkt.com
 using rvest
In-Reply-To: <CAJuCY5wBh=rYZqoQPaQJqGGXvTq4=iDOQzDtr9TGi4m9FHBBZQ@mail.gmail.com>
References: <33D76D77E9AC4B438DA38B348ED6890D14D942CE@EMAIL.ktkdom.pte.hu>
 <CAJuCY5wBh=rYZqoQPaQJqGGXvTq4=iDOQzDtr9TGi4m9FHBBZQ@mail.gmail.com>
Message-ID: <CAB-BFRp5B7wJW79YLuG1SH81FzjX7S4EAoxzqyiv=FM0zVZZ5Q@mail.gmail.com>

Hey,

I am not a laywer but their terms are quite explicitly prohibiting
redistribution of their data without written consent.

Now you might build a package that does not collect, store and
redistributes the data but only allows to access the data provided there
'live' via some convenience functions. But I don't really know if that
argument actually is valid in any legal sense.

To be on the safe side, you probably should contact them.

Best, Peter


Am 24.01.2018 12:13 nachm. schrieb "Thierry Onkelinx" <
thierry.onkelinx at inbo.be>:

> Dear Daniel,
>
> First of all you need to make sure that the licence of
> transfermarkt.com allows the usage that you have intended. If that is
> not clear from their website, then you should contact them rather than
> us.
>
> CRAN has several packages to assists in downloading data from online
> sources. But the source has to allow that kind of usage.
>
> Best regards,
>
> ir. Thierry Onkelinx
> Statisticus / Statistician
>
> Vlaamse Overheid / Government of Flanders
> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
> AND FOREST
> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
> thierry.onkelinx at inbo.be
> Havenlaan 88 bus 73, 1000 Brussel
> www.inbo.be
>
> ////////////////////////////////////////////////////////////
> ///////////////////////////////
> To call in the statistician after the experiment is done may be no
> more than asking him to perform a post-mortem examination: he may be
> able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
> The plural of anecdote is not data. ~ Roger Brinner
> The combination of some data and an aching desire for an answer does
> not ensure that a reasonable answer can be extracted from a given body
> of data. ~ John Tukey
> ////////////////////////////////////////////////////////////
> ///////////////////////////////
>
>
>
>
> 2018-01-23 16:27 GMT+01:00 Kehl D?niel <kehld at ktk.pte.hu>:
> > Dear List members,
> >
> > maybe this is not the right place to ask, if that is the case, please
> forward me to the right place.
> > I developed some functions to download and transform football/soccer
> related data from transfermarkt.com.
> > There are plans to create my first package based on these functions and
> of course develop them and add more later. As far as I know there is no API
> to that page, so I am using the rvest package.
> > My question is: is this an OK thing to do? Should I contact
> transfermarkt.com? My german is not perfect (just like my english), this
> is what I've found on thier webpage. Does that mean one can not create a
> package related to that page? Or can't crawl at all? Or just not allowed to
> sell the data? If it is allowed, can one post the package on CRAN at the
> end?
> >
> > Please if any of you have experience in that or just show me where to
> ask, do not hesitate!
> >
> > LEGAL NOTICE
> > ? Transfermarkt GmbH & Co. KG 2000-2018
> >
> > All rights reserved.
> >
> > Der Inhalt dieser Website ist urheberrechtlich gesch?tzt. Nachdruck,
> Aufnahme in Online-Dienste, Internet und Vervielf?ltigung auf Datentr?ger
> wie CD-ROM, DVD-ROM usw. d?rfen, auch auszugsweise, nur nach vorheriger
> schriftlicher Zustimmung durch Transfermarkt erfolgen. Eine kommerzielle
> Weitervermarktung des Inhalts ist untersagt.
> >
> > Transfermarkt haftet nicht f?r unverlangt eingesandte Inhalte,
> Manuskripte und Fotos. F?r Inhalte externer Links und fremde Inhalte
> ?bernimmt Transfermarkt keine Verantwortung.
> >
> > Thank you for all your insights and/or comments,
> >
> > best regards
> > Daniel
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> > Dr. KEHL D?niel
> >
> > adjunktus
> >
> >
> >
> >
> >
> > P?CSI TUDOM?NYEGYETEM K?ZGAZDAS?GTUDOM?NYI KAR
> >
> > K?zgazdas?gtan ?s ?konometria Int?zet
> >
> > H-7622 P?cs, R?k?czi ?t 80. | www.ktk.pte.hu
> >
> > +36 72 501 599/ 23144 | kehld at ktk.pte.hu
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From brian at braverock.com  Fri Jan 26 17:35:32 2018
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 26 Jan 2018 10:35:32 -0600
Subject: [R-pkg-devel] apparent S3 methods exported but not registered
Message-ID: <1516984532.6406.82.camel@braverock.com>

I'm preparing a new release of PerformanceAnalytics, and as usual this
brings the host of CRAN checks.

I get this note:

* checking S3 generic/method consistency ... NOTE
Found the following apparent S3 methods exported but not registered:
? mean.LCL mean.UCL mean.geometric mean.stderr
See section 'Registering S3 methods' in the 'Writing R Extensions'
manual.

these are not S3 methods for 'mean', but rather helper functions that
do other things related to means.

These functions have been in the package for over a decade, are used in
coursework at a number of universities, and we assume are in user code.
 So it seems that changing them would be disruptive.

Now, all that said, what to do about it?

We could register them as S3method{} , and I think calling them
explicitly will still work, though this seems inelegant.

I can't find any way to tell R that these *aren't* S3 methods ...

Any insight would be greatly appreciated.

Regards,

Brian


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From ligges at statistik.tu-dortmund.de  Mon Jan 29 20:43:47 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Mon, 29 Jan 2018 20:43:47 +0100
Subject: [R-pkg-devel] [CRAN-pretest-archived] CRAN submission
	smotefamily 1.1
In-Reply-To: <CAMjLWGqoFySQx858TymQ0003jWPavmL9Pnay-pacJ8iyVwZqpQ@mail.gmail.com>
References: <20180129091821.C835116419B@xmpalantir.wu.ac.at>
 <01d398e3$Blat.v2.2.2$0dcbb0c8@mail.statistik.tu-dortmund.de>
 <CAMjLWGqoFySQx858TymQ0003jWPavmL9Pnay-pacJ8iyVwZqpQ@mail.gmail.com>
Message-ID: <62ef04a5-0ab2-5190-b481-f394a5d06579@statistik.tu-dortmund.de>

1. We do not support devtools.

2. all warnings you mentioned below are crucial.
See inline below.


On 29.01.2018 16:07, Wacharasak Siriseriwan wrote:
> Dear fellow develops
> 
> I'm the maintainer of package called "smotefamily. The CRAN teams
> auto-check team has sent me about the checking result about my package and
> found 3 warnings :
> 
> * checking CRAN incoming feasibility ... WARNING
> 
> Insufficient package version (submitted: 1.1, existing: 1.1)

Increase the version number?


> CRAN repository db overrides:
>    X-CRAN-Comment: Archived on 2018-01-23 as check problems were not
>      corrected in time.
> 
> ** running examples for arch 'i386' ... [24s] WARNING
> Found the following significant warnings:
>    Warning: items 'package:smotefamily' were removed from the search path
> ** running examples for arch 'x64' ... [26s] WARNING
> Found the following significant warnings:
>    Warning: items 'package:smotefamily' were removed from the search path

Do not remove items from the search path in your code.


Best,
Uwe Ligges


> 
> What are these warnings about and how are they to be fixed? These warnings
> are crucial or not? I use dev-tools checking it before submission and it
> passed all process.
> 
> Thank you in advance on your suggestion.
> 
> 
> 
> Wacharasak Siriseriwan <wacharasak.s at gmail.com>
> 
> 
> 
> On Mon, Jan 29, 2018 at 4:25 PM, <Uwe.Ligges at r-project.org> wrote:
> 
>> Dear maintainer,
>>
>> package smotefamily_1.1.tar.gz does not pass the incoming checks
>> automatically, please see the pre-test at:
>> <https://win-builder.r-project.org/incoming_pretest/
>> 180129_101828_smotefamily_11/00check.log>
>> Status: 3 WARNINGs
>>
>> Current CRAN status: OK: 2
>> See: <https://CRAN.R-project.org/web/checks/check_results_smotefamily.html
>>>
>>
>> Please fix all problems and resubmit a fixed version via the webform.
>> If you are not sure how to fix the problems shown, please ask for help on
>> the R-package-devel mailing list:
>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>> If you are fairly certain the rejection is a false positive, please
>> reply-all to this message and explain.
>>
>> More details are given in the directory:
>> <https://win-builder.r-project.org/incoming_pretest/
>> 180129_101828_smotefamily_11>
>> The files will be removed after roughly 7 days.
>>
>>
>> Best regards,
>> CRAN teams' auto-check service
>>
>>
> 
> 	[[alternative HTML version deleted]]
>


From rflight79 at gmail.com  Tue Jan 30 05:27:04 2018
From: rflight79 at gmail.com (Robert M. Flight)
Date: Tue, 30 Jan 2018 04:27:04 +0000
Subject: [R-pkg-devel] licensing and releasing a package that copies code
	from dplyr
Message-ID: <CAJLyBTVVts5EqD13qdjrxX9+pf93wwGqyh=mdSKOo5=8tGd1rA@mail.gmail.com>

Hi All,

hoping for some wisdom and guidance about licensing a package I created.

I created a package, knitrProgressBar (
https://github.com/rmflight/knitrProgressBar), that rips out the
dplyr::progress_estimated internal function into essentially it's own
package (to avoid some dependencies and do some custom things with it), and
then added some code for decision logic.

dplyr is licensed under MIT, with RStudio as the copyright holder, and
various individuals listed as authors under Authors at R.

I understand I would list myself as the "creator" in the Authors at R field
for knitrProgressBar, but I'm not sure who should be listed as authors and
copyright holders, and how this information needs to be incorporated into
the LICENSE file.

I would like to have everything squared away properly so that this package
can eventually be submitted and potentially available via CRAN.

Guidance would be very much appreciated.

Thanks,

-Robert

Robert M Flight, PhD
Bioinformatics Research Associate
Puller of Rabbits from Hats
Research Parasite
Resource Center for Stable Isotope Resolved Metabolomics
Manager, Systems Biology and Omics Integration Journal Club
Markey Cancer Center
CC434 Roach Building
University of Kentucky
Lexington, KY

Twitter: @rmflight
Web: rmflight.github.io
ORCID: http://orcid.org/0000-0001-8141-7788
EM rflight79 at gmail.com
PH 502-509-1827 <(502)%20509-1827>

To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. - Ronald Fisher

	[[alternative HTML version deleted]]


From bulusmetin at gmail.com  Sat Feb  3 18:18:49 2018
From: bulusmetin at gmail.com (Metin Bulus)
Date: Sat, 3 Feb 2018 11:18:49 -0600
Subject: [R-pkg-devel] nloptr optimization procedure works differently on
	different platforms
Message-ID: <CADF_Lkp=mZRg+MbWcHdutUs3q-GPp9TUHszdKKDwq-zd4Jr9YA@mail.gmail.com>

Hi all,

it occured to me, for an optmization procedure, AUGLAG algorithm used in
conjuction with SLSQP algorithm (in nloptr package) can be unstable across
different platforms. Does anyone know what could be possible reason for
this?

Thanks,
Metin

	[[alternative HTML version deleted]]


From dpc10ster at gmail.com  Sat Feb  3 18:44:57 2018
From: dpc10ster at gmail.com (Dev Chakraborty)
Date: Sat, 3 Feb 2018 12:44:57 -0500
Subject: [R-pkg-devel] Help with correcting error in package
Message-ID: <CADd2D4+Pmxg-mmD8FwXFH0TzvMwxNXFPn5CSruvZ4cs41Hstog@mail.gmail.com>

Dear All,

I tried unsuccessfully to upload a package named RJafroc to CRAN. On my OSX
machine it passes R CMD Check with no errors, warnings or notes. However, I
get the following output from CRAN, from which I cannot tell which function
is causing the error (I am truncating the intermediate lines, which appear
to be the opening screen upon starting R, with ellipses; the full output
produced by the CRAN pre-test is attached):



*** running examples for arch 'x64' ... ERROR*


*Running examples in 'RJafroc-Ex.R' failed*


*The error occurred in:*


*R Under development (unstable) (2018-02-01 r74194) -- "Unsuffered
Consequences"*

*Copyright (C) 2018 The R Foundation for Statistical Computing*

*Platform: x86_64-w64-mingw32/x64 (64-bit)*


*R is free software and comes with ABSOLUTELY NO WARRANTY.*

*You are welcome to redistribute it under certain conditions*


*...*

*...*

*Type 'q()' to quit R.*


*> pkgname <- "RJafroc"*

*> source(file.path(R.home("share"), "R", "examples-header.R"))*


Thanking you in advance for any help rendered,

Sincerely,

Dev

--
Dev Chakraborty, PhD
Professor of Radiology, retired

From josh.m.ulrich at gmail.com  Sat Feb  3 19:16:05 2018
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sat, 3 Feb 2018 12:16:05 -0600
Subject: [R-pkg-devel] Help with correcting error in package
In-Reply-To: <CADd2D4+Pmxg-mmD8FwXFH0TzvMwxNXFPn5CSruvZ4cs41Hstog@mail.gmail.com>
References: <CADd2D4+Pmxg-mmD8FwXFH0TzvMwxNXFPn5CSruvZ4cs41Hstog@mail.gmail.com>
Message-ID: <CAPPM_gSyujR8dPXrh6yLZ7d22jUDAuewnkxaDDYkpZ-p+km=sA@mail.gmail.com>

On Sat, Feb 3, 2018 at 11:44 AM, Dev Chakraborty <dpc10ster at gmail.com> wrote:
> Dear All,
>
> I tried unsuccessfully to upload a package named RJafroc to CRAN. On my OSX
> machine it passes R CMD Check with no errors, warnings or notes. However, I
> get the following output from CRAN, from which I cannot tell which function
> is causing the error (I am truncating the intermediate lines, which appear
> to be the opening screen upon starting R, with ellipses; the full output
> produced by the CRAN pre-test is attached):
>
Submit your package to http://win-builder.r-project.org.  That will
provide you access to all the output in the Rcheck.RJafroc directory.

Also note that the "Confirmation" step of the submission process
suggests, "You could [run R CMD check] using the win-builder service
at http://win-builder.r-project.org".  And the CRAN Repository Policy
says, "It should be normal for those without Windows machines of their
own to use the winbuilder service to check a package before
submission."  You could also use https://builder.r-hub.io/.  Both are
great resources for the community.

>
>
> *** running examples for arch 'x64' ... ERROR*
>
>
> *Running examples in 'RJafroc-Ex.R' failed*
>
>
> *The error occurred in:*
>
>
> *R Under development (unstable) (2018-02-01 r74194) -- "Unsuffered
> Consequences"*
>
> *Copyright (C) 2018 The R Foundation for Statistical Computing*
>
> *Platform: x86_64-w64-mingw32/x64 (64-bit)*
>
>
> *R is free software and comes with ABSOLUTELY NO WARRANTY.*
>
> *You are welcome to redistribute it under certain conditions*
>
>
> *...*
>
> *...*
>
> *Type 'q()' to quit R.*
>
>
> *> pkgname <- "RJafroc"*
>
> *> source(file.path(R.home("share"), "R", "examples-header.R"))*
>
>
> Thanking you in advance for any help rendered,
>
> Sincerely,
>
> Dev
>
> --
> Dev Chakraborty, PhD
> Professor of Radiology, retired
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com
R/Finance 2018 | www.rinfinance.com


From roy.mendelssohn at noaa.gov  Sat Feb  3 19:23:30 2018
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Sat, 3 Feb 2018 10:23:30 -0800
Subject: [R-pkg-devel] Help with correcting error in package
In-Reply-To: <CAPPM_gSyujR8dPXrh6yLZ7d22jUDAuewnkxaDDYkpZ-p+km=sA@mail.gmail.com>
References: <CADd2D4+Pmxg-mmD8FwXFH0TzvMwxNXFPn5CSruvZ4cs41Hstog@mail.gmail.com>
 <CAPPM_gSyujR8dPXrh6yLZ7d22jUDAuewnkxaDDYkpZ-p+km=sA@mail.gmail.com>
Message-ID: <D4BF2710-0AED-44FA-9D27-E60E583D9025@noaa.gov>

I would add to make certain you submit to both "R-release" and "R-devel" in particular since the error you are getting is from "R-devel".  If you install the "devtools" package,  that can do the submission to both for you.
There has been previous discussion on this list that "R-devel" does not load a complete distribution, therefore they may be different requirements on what is "Imported" or "Suggested".

-Roy



> On Feb 3, 2018, at 10:16 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> 
> On Sat, Feb 3, 2018 at 11:44 AM, Dev Chakraborty <dpc10ster at gmail.com> wrote:
>> Dear All,
>> 
>> I tried unsuccessfully to upload a package named RJafroc to CRAN. On my OSX
>> machine it passes R CMD Check with no errors, warnings or notes. However, I
>> get the following output from CRAN, from which I cannot tell which function
>> is causing the error (I am truncating the intermediate lines, which appear
>> to be the opening screen upon starting R, with ellipses; the full output
>> produced by the CRAN pre-test is attached):
>> 
> Submit your package to http://win-builder.r-project.org.  That will
> provide you access to all the output in the Rcheck.RJafroc directory.
> 
> Also note that the "Confirmation" step of the submission process
> suggests, "You could [run R CMD check] using the win-builder service
> at http://win-builder.r-project.org".  And the CRAN Repository Policy
> says, "It should be normal for those without Windows machines of their
> own to use the winbuilder service to check a package before
> submission."  You could also use https://builder.r-hub.io/.  Both are
> great resources for the community.
> 
>> 
>> 
>> *** running examples for arch 'x64' ... ERROR*
>> 
>> 
>> *Running examples in 'RJafroc-Ex.R' failed*
>> 
>> 
>> *The error occurred in:*
>> 
>> 
>> *R Under development (unstable) (2018-02-01 r74194) -- "Unsuffered
>> Consequences"*
>> 
>> *Copyright (C) 2018 The R Foundation for Statistical Computing*
>> 
>> *Platform: x86_64-w64-mingw32/x64 (64-bit)*
>> 
>> 
>> *R is free software and comes with ABSOLUTELY NO WARRANTY.*
>> 
>> *You are welcome to redistribute it under certain conditions*
>> 
>> 
>> *...*
>> 
>> *...*
>> 
>> *Type 'q()' to quit R.*
>> 
>> 
>> *> pkgname <- "RJafroc"*
>> 
>> *> source(file.path(R.home("share"), "R", "examples-header.R"))*
>> 
>> 
>> Thanking you in advance for any help rendered,
>> 
>> Sincerely,
>> 
>> Dev
>> 
>> --
>> Dev Chakraborty, PhD
>> Professor of Radiology, retired
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> 
> -- 
> Joshua Ulrich  |  about.me/joshuaulrich
> FOSS Trading  |  www.fosstrading.com
> R/Finance 2018 | www.rinfinance.com
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From dpc10ster at gmail.com  Sat Feb  3 21:46:12 2018
From: dpc10ster at gmail.com (Dev Chakraborty)
Date: Sat, 3 Feb 2018 15:46:12 -0500
Subject: [R-pkg-devel] Help with correcting error in package
In-Reply-To: <CAPPM_gSyujR8dPXrh6yLZ7d22jUDAuewnkxaDDYkpZ-p+km=sA@mail.gmail.com>
References: <CADd2D4+Pmxg-mmD8FwXFH0TzvMwxNXFPn5CSruvZ4cs41Hstog@mail.gmail.com>
 <CAPPM_gSyujR8dPXrh6yLZ7d22jUDAuewnkxaDDYkpZ-p+km=sA@mail.gmail.com>
Message-ID: <CADd2D4+fkg-ni4tgaCTw8e6nRW9icDSe1qqTCJiPExHHX6o7bA@mail.gmail.com>

Thank you; this is most helpful; Dev

On Sat, Feb 3, 2018 at 1:16 PM, Joshua Ulrich <josh.m.ulrich at gmail.com>
wrote:

> On Sat, Feb 3, 2018 at 11:44 AM, Dev Chakraborty <dpc10ster at gmail.com>
> wrote:
> > Dear All,
> >
> > I tried unsuccessfully to upload a package named RJafroc to CRAN. On my
> OSX
> > machine it passes R CMD Check with no errors, warnings or notes.
> However, I
> > get the following output from CRAN, from which I cannot tell which
> function
> > is causing the error (I am truncating the intermediate lines, which
> appear
> > to be the opening screen upon starting R, with ellipses; the full output
> > produced by the CRAN pre-test is attached):
> >
> Submit your package to http://win-builder.r-project.org.  That will
> provide you access to all the output in the Rcheck.RJafroc directory.
>
> Also note that the "Confirmation" step of the submission process
> suggests, "You could [run R CMD check] using the win-builder service
> at http://win-builder.r-project.org".  And the CRAN Repository Policy
> says, "It should be normal for those without Windows machines of their
> own to use the winbuilder service to check a package before
> submission."  You could also use https://builder.r-hub.io/.  Both are
> great resources for the community.
>
> >
> >
> > *** running examples for arch 'x64' ... ERROR*
> >
> >
> > *Running examples in 'RJafroc-Ex.R' failed*
> >
> >
> > *The error occurred in:*
> >
> >
> > *R Under development (unstable) (2018-02-01 r74194) -- "Unsuffered
> > Consequences"*
> >
> > *Copyright (C) 2018 The R Foundation for Statistical Computing*
> >
> > *Platform: x86_64-w64-mingw32/x64 (64-bit)*
> >
> >
> > *R is free software and comes with ABSOLUTELY NO WARRANTY.*
> >
> > *You are welcome to redistribute it under certain conditions*
> >
> >
> > *...*
> >
> > *...*
> >
> > *Type 'q()' to quit R.*
> >
> >
> > *> pkgname <- "RJafroc"*
> >
> > *> source(file.path(R.home("share"), "R", "examples-header.R"))*
> >
> >
> > Thanking you in advance for any help rendered,
> >
> > Sincerely,
> >
> > Dev
> >
> > --
> > Dev Chakraborty, PhD
> > Professor of Radiology, retired
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>
> --
> Joshua Ulrich  |  about.me/joshuaulrich
> FOSS Trading  |  www.fosstrading.com
> R/Finance 2018 | www.rinfinance.com
>



-- 
Dev Chakraborty, PhD
Professor of Radiology retired
CEO, ExpertCAD Analytics LLC
412-480-7318 (cell)
?(412) 427-5085? (alt. cell)
412-349-5305 (land line)

*Book website:*
https://www.crcpress.com/9781482214840
*Online supplementary material website:*
https://bitbucket.org/dpc10ster/onlinebookk21778
<https://www.crcpress.com/9781482214840>
*CAD Project website:*
www.expertcadanalytics.com
*JAFROC website*
www.devchakraborty.com

	[[alternative HTML version deleted]]


From dpc10ster at gmail.com  Sat Feb  3 21:49:15 2018
From: dpc10ster at gmail.com (Dev Chakraborty)
Date: Sat, 3 Feb 2018 15:49:15 -0500
Subject: [R-pkg-devel] Help with correcting error in package
In-Reply-To: <D4BF2710-0AED-44FA-9D27-E60E583D9025@noaa.gov>
References: <CADd2D4+Pmxg-mmD8FwXFH0TzvMwxNXFPn5CSruvZ4cs41Hstog@mail.gmail.com>
 <CAPPM_gSyujR8dPXrh6yLZ7d22jUDAuewnkxaDDYkpZ-p+km=sA@mail.gmail.com>
 <D4BF2710-0AED-44FA-9D27-E60E583D9025@noaa.gov>
Message-ID: <CADd2D4KMLjPO9epxcFhtcUDXn9DAodGej-rJeYb5WKY8GVTehg@mail.gmail.com>

Thank you; I appreciate the helpful response; dev

On Sat, Feb 3, 2018 at 1:23 PM, Roy Mendelssohn - NOAA Federal <
roy.mendelssohn at noaa.gov> wrote:

> I would add to make certain you submit to both "R-release" and "R-devel"
> in particular since the error you are getting is from "R-devel".  If you
> install the "devtools" package,  that can do the submission to both for you.
> There has been previous discussion on this list that "R-devel" does not
> load a complete distribution, therefore they may be different requirements
> on what is "Imported" or "Suggested".
>
> -Roy
>
>
>
> > On Feb 3, 2018, at 10:16 AM, Joshua Ulrich <josh.m.ulrich at gmail.com>
> wrote:
> >
> > On Sat, Feb 3, 2018 at 11:44 AM, Dev Chakraborty <dpc10ster at gmail.com>
> wrote:
> >> Dear All,
> >>
> >> I tried unsuccessfully to upload a package named RJafroc to CRAN. On my
> OSX
> >> machine it passes R CMD Check with no errors, warnings or notes.
> However, I
> >> get the following output from CRAN, from which I cannot tell which
> function
> >> is causing the error (I am truncating the intermediate lines, which
> appear
> >> to be the opening screen upon starting R, with ellipses; the full output
> >> produced by the CRAN pre-test is attached):
> >>
> > Submit your package to http://win-builder.r-project.org.  That will
> > provide you access to all the output in the Rcheck.RJafroc directory.
> >
> > Also note that the "Confirmation" step of the submission process
> > suggests, "You could [run R CMD check] using the win-builder service
> > at http://win-builder.r-project.org".  And the CRAN Repository Policy
> > says, "It should be normal for those without Windows machines of their
> > own to use the winbuilder service to check a package before
> > submission."  You could also use https://builder.r-hub.io/.  Both are
> > great resources for the community.
> >
> >>
> >>
> >> *** running examples for arch 'x64' ... ERROR*
> >>
> >>
> >> *Running examples in 'RJafroc-Ex.R' failed*
> >>
> >>
> >> *The error occurred in:*
> >>
> >>
> >> *R Under development (unstable) (2018-02-01 r74194) -- "Unsuffered
> >> Consequences"*
> >>
> >> *Copyright (C) 2018 The R Foundation for Statistical Computing*
> >>
> >> *Platform: x86_64-w64-mingw32/x64 (64-bit)*
> >>
> >>
> >> *R is free software and comes with ABSOLUTELY NO WARRANTY.*
> >>
> >> *You are welcome to redistribute it under certain conditions*
> >>
> >>
> >> *...*
> >>
> >> *...*
> >>
> >> *Type 'q()' to quit R.*
> >>
> >>
> >> *> pkgname <- "RJafroc"*
> >>
> >> *> source(file.path(R.home("share"), "R", "examples-header.R"))*
> >>
> >>
> >> Thanking you in advance for any help rendered,
> >>
> >> Sincerely,
> >>
> >> Dev
> >>
> >> --
> >> Dev Chakraborty, PhD
> >> Professor of Radiology, retired
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >
> >
> > --
> > Joshua Ulrich  |  about.me/joshuaulrich
> > FOSS Trading  |  www.fosstrading.com
> > R/Finance 2018 | www.rinfinance.com
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> **********************
> "The contents of this message do not reflect any position of the U.S.
> Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK
> Jr.
>
>


-- 
Dev Chakraborty, PhD
Professor of Radiology retired
CEO, ExpertCAD Analytics LLC
412-480-7318 (cell)
?(412) 427-5085? (alt. cell)
412-349-5305 (land line)

*Book website:*
https://www.crcpress.com/9781482214840
*Online supplementary material website:*
https://bitbucket.org/dpc10ster/onlinebookk21778
<https://www.crcpress.com/9781482214840>
*CAD Project website:*
www.expertcadanalytics.com
*JAFROC website*
www.devchakraborty.com

	[[alternative HTML version deleted]]


From jtelleria.rproject at gmail.com  Sat Feb  3 23:00:22 2018
From: jtelleria.rproject at gmail.com (Juan Telleria Ruiz de Aguirre)
Date: Sat, 3 Feb 2018 23:00:22 +0100
Subject: [R-pkg-devel] Fwd: Collaboration Request: h2o R Package Function
	Cheatsheet
In-Reply-To: <CAJXDcw3ybr7byDCms8=dCZaq2S6zpJh1KRuWNj9L7E4D5wzQ3w@mail.gmail.com>
References: <CAJXDcw3ybr7byDCms8=dCZaq2S6zpJh1KRuWNj9L7E4D5wzQ3w@mail.gmail.com>
Message-ID: <CAJXDcw2mM2gQnLmO=4veGCrKOFMQfknGLLm=7TQ6q_PF2ScVFg@mail.gmail.com>

Dear R Package Developers,

I have just started doing a cheatsheet for h2o R Package:

https://cran.r-project.org/web/packages/h2o/index.html

So if anyone is interested in contribution, I attach what I have done
till now in Github:

https://github.com/jtelleria/H2O-Cheatsheet

A H2O.ai Statistical Algorithms Cheatsheet already exists, but the new
one will be focused on R h2o package functions:

https://github.com/h2oai/h2o-tutorials/blob/master/training/h2o_algos/h2o_algos_cheat_sheet_04_25_17.pdf

Kind regards,
Juan Telleria


From leda82 at gmail.com  Sun Feb  4 13:38:25 2018
From: leda82 at gmail.com (Denis Rastegaev)
Date: Sun, 4 Feb 2018 15:38:25 +0300
Subject: [R-pkg-devel] fftw linking
Message-ID: <CAFs7sVxmBTpcYg7FCJqVRPwV2tcTq3PpEAP591yFuuy_1-Yn-g@mail.gmail.com>

Hello everyone!
I try to upload my package on CRAN but the package
does not pass the incoming checks. How to link external
compiler with fftw? My package on github:
https://github.com/drastega/specklestar

Installation log:

* installing *source* package 'specklestar' ...
** libs

*** arch - i386
d:/Compiler/gcc-4.9.3/mingw_32/bin/g++
-I"D:/RCompile/recent/R/include" -DNDEBUG
-I"d:/RCompile/CRANpkg/lib/3.5/Rcpp/include"
-I"d:/Compiler/gcc-4.9.3/local330/include"     -pedantic -O2 -Wall
-mtune=core2 -c RcppExports.cpp -o RcppExports.o
d:/Compiler/gcc-4.9.3/mingw_32/bin/g++
-I"D:/RCompile/recent/R/include" -DNDEBUG
-I"d:/RCompile/CRANpkg/lib/3.5/Rcpp/include"
-I"d:/Compiler/gcc-4.9.3/local330/include"     -pedantic -O2 -Wall
-mtune=core2 -c image_helper.cpp -o image_helper.o
d:/Compiler/gcc-4.9.3/mingw_32/bin/g++
-I"D:/RCompile/recent/R/include" -DNDEBUG
-I"d:/RCompile/CRANpkg/lib/3.5/Rcpp/include"
-I"d:/Compiler/gcc-4.9.3/local330/include"     -pedantic -O2 -Wall
-mtune=core2 -c middle_frame.cpp -o middle_frame.o
d:/Compiler/gcc-4.9.3/mingw_32/bin/g++
-I"D:/RCompile/recent/R/include" -DNDEBUG
-I"d:/RCompile/CRANpkg/lib/3.5/Rcpp/include"
-I"d:/Compiler/gcc-4.9.3/local330/include"     -pedantic -O2 -Wall
-mtune=core2 -c ps.cpp -o ps.o
d:/Compiler/gcc-4.9.3/mingw_32/bin/g++
-I"D:/RCompile/recent/R/include" -DNDEBUG
-I"d:/RCompile/CRANpkg/lib/3.5/Rcpp/include"
-I"d:/Compiler/gcc-4.9.3/local330/include"     -pedantic -O2 -Wall
-mtune=core2 -c ps_diff.cpp -o ps_diff.o
d:/Compiler/gcc-4.9.3/mingw_32/bin/g++
-I"D:/RCompile/recent/R/include" -DNDEBUG
-I"d:/RCompile/CRANpkg/lib/3.5/Rcpp/include"
-I"d:/Compiler/gcc-4.9.3/local330/include"     -pedantic -O2 -Wall
-mtune=core2 -c speckle_acf.cpp -o speckle_acf.o
d:/Compiler/gcc-4.9.3/mingw_32/bin/g++
-I"D:/RCompile/recent/R/include" -DNDEBUG
-I"d:/RCompile/CRANpkg/lib/3.5/Rcpp/include"
-I"d:/Compiler/gcc-4.9.3/local330/include"     -pedantic -O2 -Wall
-mtune=core2 -c speckle_generator.cpp -o speckle_generator.o
d:/Compiler/gcc-4.9.3/mingw_32/bin/g++
-I"D:/RCompile/recent/R/include" -DNDEBUG
-I"d:/RCompile/CRANpkg/lib/3.5/Rcpp/include"
-I"d:/Compiler/gcc-4.9.3/local330/include"     -pedantic -O2 -Wall
-mtune=core2 -c speckle_stat.cpp -o speckle_stat.o
d:/Compiler/gcc-4.9.3/mingw_32/bin/g++ -shared -s -static-libgcc -o
specklestar.dll tmp.def RcppExports.o image_helper.o middle_frame.o
ps.o ps_diff.o speckle_acf.o speckle_generator.o speckle_stat.o
-Ld:/Compiler/gcc-4.9.3/local330/lib/i386
-Ld:/Compiler/gcc-4.9.3/local330/lib -LD:/RCompile/recent/R/bin/i386
-lR
ps.o:ps.cpp:(.text+0x669): undefined reference to `fftw_malloc'
ps.o:ps.cpp:(.text+0x77d): undefined reference to `fftw_plan_dft_r2c_2d'
ps.o:ps.cpp:(.text+0x787): undefined reference to `fftw_execute'
ps.o:ps.cpp:(.text+0x78f): undefined reference to `fftw_destroy_plan'
ps.o:ps.cpp:(.text+0x7de): undefined reference to `fftw_free'
ps_diff.o:ps_diff.cpp:(.text+0x699): undefined reference to `fftw_malloc'
ps_diff.o:ps_diff.cpp:(.text+0xd27): undefined reference to
`fftw_plan_dft_r2c_2d'
ps_diff.o:ps_diff.cpp:(.text+0xd31): undefined reference to `fftw_execute'
ps_diff.o:ps_diff.cpp:(.text+0xd39): undefined reference to `fftw_destroy_plan'
ps_diff.o:ps_diff.cpp:(.text+0xda0): undefined reference to `fftw_free'
speckle_acf.o:speckle_acf.cpp:(.text+0x323): undefined reference to
`fftw_malloc'
speckle_acf.o:speckle_acf.cpp:(.text+0x349): undefined reference to
`fftw_plan_dft_c2r_2d'
speckle_acf.o:speckle_acf.cpp:(.text+0x354): undefined reference to
`fftw_execute'
speckle_acf.o:speckle_acf.cpp:(.text+0x35f): undefined reference to
`fftw_destroy_plan'
speckle_acf.o:speckle_acf.cpp:(.text+0x384): undefined reference to `fftw_free'
collect2.exe: error: ld returned 1 exit status
no DLL was created
ERROR: compilation failed for package 'specklestar'
* removing 'd:/RCompile/CRANincoming/R-devel/lib/specklestar'
In R CMD INSTALL

	[[alternative HTML version deleted]]


From edd at debian.org  Sun Feb  4 15:40:36 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 4 Feb 2018 08:40:36 -0600
Subject: [R-pkg-devel] fftw linking
In-Reply-To: <CAFs7sVxmBTpcYg7FCJqVRPwV2tcTq3PpEAP591yFuuy_1-Yn-g@mail.gmail.com>
References: <CAFs7sVxmBTpcYg7FCJqVRPwV2tcTq3PpEAP591yFuuy_1-Yn-g@mail.gmail.com>
Message-ID: <23159.7012.33114.940670@rob.eddelbuettel.com>


On 4 February 2018 at 15:38, Denis Rastegaev wrote:
| I try to upload my package on CRAN but the package
| does not pass the incoming checks. How to link external
| compiler with fftw?

CRAN is a treasure trove with over 12k packages. Learn to search it.

For example, package fftwtools has this line in its src/Makevars.win:
   PKG_LIBS= -lfftw3 -lm  
See https://github.com/cran/fftwtools/blob/master/src/Makevars.win#L12
It appears to be producing Windows binaries based on its CRAN page.

For example package fftw has a 'SystemRequirements: fftw3' but also provides
Windows binaries.  Its src/Makrvars.win has
   PKG_LIBS=-L$(LIB_FFTW)/lib -l fftw3
so it seems to use the (documented !!) facility of using a _predefined set_
of external libraries via an environment variable.  For what it is worth, I
do the same for the GSL.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From dpc10ster at gmail.com  Sun Feb  4 19:47:17 2018
From: dpc10ster at gmail.com (Dev Chakraborty)
Date: Sun, 4 Feb 2018 13:47:17 -0500
Subject: [R-pkg-devel] Help with CRAN error
Message-ID: <CADd2D4LQ--m7=NM+5tjh58RiMQ+gkwCR5Sz1g52Drauan=GqrA@mail.gmail.com>

Dear All,

I get the following message on running R CMD check -- as - cran:

Package has a VignetteBuilder field but no prebuilt vignette index.

I do not know how to fix this. Any help will be appreciated.

Sincerely,

Dev


-- 
Dev Chakraborty, PhD
Professor of Radiology retired

	[[alternative HTML version deleted]]


From josh.m.ulrich at gmail.com  Sun Feb  4 19:54:54 2018
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sun, 4 Feb 2018 12:54:54 -0600
Subject: [R-pkg-devel] Help with CRAN error
In-Reply-To: <CADd2D4LQ--m7=NM+5tjh58RiMQ+gkwCR5Sz1g52Drauan=GqrA@mail.gmail.com>
References: <CADd2D4LQ--m7=NM+5tjh58RiMQ+gkwCR5Sz1g52Drauan=GqrA@mail.gmail.com>
Message-ID: <CAPPM_gTyU31p_Ubv+SF+gvw4gM-M3ZxWyBUzru=d2cwKKx75kg@mail.gmail.com>

On Sun, Feb 4, 2018 at 12:47 PM, Dev Chakraborty <dpc10ster at gmail.com> wrote:
> Dear All,
>
> I get the following message on running R CMD check -- as - cran:
>
> Package has a VignetteBuilder field but no prebuilt vignette index.
>
> I do not know how to fix this. Any help will be appreciated.
>
I don't know how to fix it either.  That said, often a great first
step is to search for the error.  A Google search for, "Package has a
VignetteBuilder field but no prebuilt vignette index.", which points
to: https://stackoverflow.com/q/30976308.

And a Google search "VignetteBuilder" has several promising "how to"
results, and there is a "Non-Sweave Vignettes" section of Writing R
Extensions:
https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Non_002dSweave-vignettes.

It will be easier for others to help you if you can do some
investigation on your own and come back with more specifics.

> Sincerely,
>
> Dev
>
>
> --
> Dev Chakraborty, PhD
> Professor of Radiology retired
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com
R/Finance 2018 | www.rinfinance.com


From roy.mendelssohn at noaa.gov  Sun Feb  4 20:05:13 2018
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Sun, 4 Feb 2018 11:05:13 -0800
Subject: [R-pkg-devel] Help with CRAN error
In-Reply-To: <CAPPM_gTyU31p_Ubv+SF+gvw4gM-M3ZxWyBUzru=d2cwKKx75kg@mail.gmail.com>
References: <CADd2D4LQ--m7=NM+5tjh58RiMQ+gkwCR5Sz1g52Drauan=GqrA@mail.gmail.com>
 <CAPPM_gTyU31p_Ubv+SF+gvw4gM-M3ZxWyBUzru=d2cwKKx75kg@mail.gmail.com>
Message-ID: <D91648E9-03EE-4AF8-A68F-124F6201A62C@noaa.gov>

If you can't find the solution yourself,  posting the top matter of your vignette file would also help.

-Roy

> On Feb 4, 2018, at 10:54 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> 
> On Sun, Feb 4, 2018 at 12:47 PM, Dev Chakraborty <dpc10ster at gmail.com> wrote:
>> Dear All,
>> 
>> I get the following message on running R CMD check -- as - cran:
>> 
>> Package has a VignetteBuilder field but no prebuilt vignette index.
>> 
>> I do not know how to fix this. Any help will be appreciated.
>> 
> I don't know how to fix it either.  That said, often a great first
> step is to search for the error.  A Google search for, "Package has a
> VignetteBuilder field but no prebuilt vignette index.", which points
> to: https://stackoverflow.com/q/30976308.
> 
> And a Google search "VignetteBuilder" has several promising "how to"
> results, and there is a "Non-Sweave Vignettes" section of Writing R
> Extensions:
> https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Non_002dSweave-vignettes.
> 
> It will be easier for others to help you if you can do some
> investigation on your own and come back with more specifics.
> 
>> Sincerely,
>> 
>> Dev
>> 
>> 
>> --
>> Dev Chakraborty, PhD
>> Professor of Radiology retired
>> 
>>        [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> 
> -- 
> Joshua Ulrich  |  about.me/joshuaulrich
> FOSS Trading  |  www.fosstrading.com
> R/Finance 2018 | www.rinfinance.com
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From dpc10ster at gmail.com  Sun Feb  4 20:32:59 2018
From: dpc10ster at gmail.com (Dev Chakraborty)
Date: Sun, 4 Feb 2018 14:32:59 -0500
Subject: [R-pkg-devel] Help with CRAN error
In-Reply-To: <D91648E9-03EE-4AF8-A68F-124F6201A62C@noaa.gov>
References: <CADd2D4LQ--m7=NM+5tjh58RiMQ+gkwCR5Sz1g52Drauan=GqrA@mail.gmail.com>
 <CAPPM_gTyU31p_Ubv+SF+gvw4gM-M3ZxWyBUzru=d2cwKKx75kg@mail.gmail.com>
 <D91648E9-03EE-4AF8-A68F-124F6201A62C@noaa.gov>
Message-ID: <CADd2D4LzVwr4yUWm=jThjBFF-Dd=6QQxK5zN646Kx9+xOUy9dA@mail.gmail.com>

Roy,

I don't use a knitR file, but my DESCRIPTION file had a field:

VignetteBuilder: knitr

Deleting this field solved the problem (i.e., got rid of that message in my
original email)

Thanks for all your help.

Dev



On Sun, Feb 4, 2018 at 2:05 PM, Roy Mendelssohn - NOAA Federal <
roy.mendelssohn at noaa.gov> wrote:

> If you can't find the solution yourself,  posting the top matter of your
> vignette file would also help.
>
> -Roy
>
> > On Feb 4, 2018, at 10:54 AM, Joshua Ulrich <josh.m.ulrich at gmail.com>
> wrote:
> >
> > On Sun, Feb 4, 2018 at 12:47 PM, Dev Chakraborty <dpc10ster at gmail.com>
> wrote:
> >> Dear All,
> >>
> >> I get the following message on running R CMD check -- as - cran:
> >>
> >> Package has a VignetteBuilder field but no prebuilt vignette index.
> >>
> >> I do not know how to fix this. Any help will be appreciated.
> >>
> > I don't know how to fix it either.  That said, often a great first
> > step is to search for the error.  A Google search for, "Package has a
> > VignetteBuilder field but no prebuilt vignette index.", which points
> > to: https://stackoverflow.com/q/30976308.
> >
> > And a Google search "VignetteBuilder" has several promising "how to"
> > results, and there is a "Non-Sweave Vignettes" section of Writing R
> > Extensions:
> > https://cran.r-project.org/doc/manuals/r-release/R-exts.
> html#Non_002dSweave-vignettes.
> >
> > It will be easier for others to help you if you can do some
> > investigation on your own and come back with more specifics.
> >
> >> Sincerely,
> >>
> >> Dev
> >>
> >>
> >> --
> >> Dev Chakraborty, PhD
> >> Professor of Radiology retired
> >>
> >>        [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >
> >
> > --
> > Joshua Ulrich  |  about.me/joshuaulrich
> > FOSS Trading  |  www.fosstrading.com
> > R/Finance 2018 | www.rinfinance.com
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> **********************
> "The contents of this message do not reflect any position of the U.S.
> Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK
> Jr.
>
>


-- 
Dev Chakraborty, PhD
Professor of Radiology retired
CEO, ExpertCAD Analytics LLC
412-480-7318 (cell)
?(412) 427-5085? (alt. cell)
412-349-5305 (land line)

*Book website:*
https://www.crcpress.com/9781482214840
*Online supplementary material website:*
https://bitbucket.org/dpc10ster/onlinebookk21778
<https://www.crcpress.com/9781482214840>
*CAD Project website:*
www.expertcadanalytics.com
*JAFROC website*
www.devchakraborty.com

	[[alternative HTML version deleted]]


From roy.mendelssohn at noaa.gov  Sun Feb  4 20:44:23 2018
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Sun, 4 Feb 2018 11:44:23 -0800
Subject: [R-pkg-devel] Help with CRAN error
In-Reply-To: <CADd2D4LzVwr4yUWm=jThjBFF-Dd=6QQxK5zN646Kx9+xOUy9dA@mail.gmail.com>
References: <CADd2D4LQ--m7=NM+5tjh58RiMQ+gkwCR5Sz1g52Drauan=GqrA@mail.gmail.com>
 <CAPPM_gTyU31p_Ubv+SF+gvw4gM-M3ZxWyBUzru=d2cwKKx75kg@mail.gmail.com>
 <D91648E9-03EE-4AF8-A68F-124F6201A62C@noaa.gov>
 <CADd2D4LzVwr4yUWm=jThjBFF-Dd=6QQxK5zN646Kx9+xOUy9dA@mail.gmail.com>
Message-ID: <879FFF90-63CB-4516-803C-93793E378AEE@noaa.gov>

Glad you found the solution.  I would add as an aside,  I have found a good vignette is worth the effort.  R docs tend to be like Unix docs,  relatively short and terse and can be hard for someone not familiar with the package what all the options might do.  A good vignette allows you to lay out in detail how to use the package,  and to do so in context. 

-Roy

> On Feb 4, 2018, at 11:32 AM, Dev Chakraborty <dpc10ster at gmail.com> wrote:
> 
> Roy,
> 
> I don't use a knitR file, but my DESCRIPTION file had a field:
> 
> VignetteBuilder: knitr
> 
> Deleting this field solved the problem (i.e., got rid of that message in my original email)
> 
> Thanks for all your help.
> 
> Dev
> 
>  
> 
> On Sun, Feb 4, 2018 at 2:05 PM, Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov> wrote:
> If you can't find the solution yourself,  posting the top matter of your vignette file would also help.
> 
> -Roy
> 
> > On Feb 4, 2018, at 10:54 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> >
> > On Sun, Feb 4, 2018 at 12:47 PM, Dev Chakraborty <dpc10ster at gmail.com> wrote:
> >> Dear All,
> >>
> >> I get the following message on running R CMD check -- as - cran:
> >>
> >> Package has a VignetteBuilder field but no prebuilt vignette index.
> >>
> >> I do not know how to fix this. Any help will be appreciated.
> >>
> > I don't know how to fix it either.  That said, often a great first
> > step is to search for the error.  A Google search for, "Package has a
> > VignetteBuilder field but no prebuilt vignette index.", which points
> > to: https://stackoverflow.com/q/30976308.
> >
> > And a Google search "VignetteBuilder" has several promising "how to"
> > results, and there is a "Non-Sweave Vignettes" section of Writing R
> > Extensions:
> > https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Non_002dSweave-vignettes.
> >
> > It will be easier for others to help you if you can do some
> > investigation on your own and come back with more specifics.
> >
> >> Sincerely,
> >>
> >> Dev
> >>
> >>
> >> --
> >> Dev Chakraborty, PhD
> >> Professor of Radiology retired
> >>
> >>        [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >
> >
> > --
> > Joshua Ulrich  |  about.me/joshuaulrich
> > FOSS Trading  |  www.fosstrading.com
> > R/Finance 2018 | www.rinfinance.com
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 
> 
> 
> 
> -- 
> Dev Chakraborty, PhD
> Professor of Radiology retired
> CEO, ExpertCAD Analytics LLC
> 412-480-7318 (cell)
> ?(412) 427-5085? (alt. cell)
> 412-349-5305 (land line)
> 
> Book website:
> https://www.crcpress.com/9781482214840
> Online supplementary material website:
> https://bitbucket.org/dpc10ster/onlinebookk21778
> CAD Project website:
> www.expertcadanalytics.com
> JAFROC website
> www.devchakraborty.com

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From dpc10ster at gmail.com  Sun Feb  4 20:50:13 2018
From: dpc10ster at gmail.com (Dev Chakraborty)
Date: Sun, 4 Feb 2018 14:50:13 -0500
Subject: [R-pkg-devel] Help with CRAN error
In-Reply-To: <879FFF90-63CB-4516-803C-93793E378AEE@noaa.gov>
References: <CADd2D4LQ--m7=NM+5tjh58RiMQ+gkwCR5Sz1g52Drauan=GqrA@mail.gmail.com>
 <CAPPM_gTyU31p_Ubv+SF+gvw4gM-M3ZxWyBUzru=d2cwKKx75kg@mail.gmail.com>
 <D91648E9-03EE-4AF8-A68F-124F6201A62C@noaa.gov>
 <CADd2D4LzVwr4yUWm=jThjBFF-Dd=6QQxK5zN646Kx9+xOUy9dA@mail.gmail.com>
 <879FFF90-63CB-4516-803C-93793E378AEE@noaa.gov>
Message-ID: <CADd2D4+vb_nCN97uMp5tGE5fHYoR3Y7avsvnFXJyOy8sx-DXsQ@mail.gmail.com>

Thanks for your suggestion. I do a published book that describes what this
package does. Dev

On Sun, Feb 4, 2018 at 2:44 PM, Roy Mendelssohn - NOAA Federal <
roy.mendelssohn at noaa.gov> wrote:

> Glad you found the solution.  I would add as an aside,  I have found a
> good vignette is worth the effort.  R docs tend to be like Unix docs,
> relatively short and terse and can be hard for someone not familiar with
> the package what all the options might do.  A good vignette allows you to
> lay out in detail how to use the package,  and to do so in context.
>
> -Roy
>
> > On Feb 4, 2018, at 11:32 AM, Dev Chakraborty <dpc10ster at gmail.com>
> wrote:
> >
> > Roy,
> >
> > I don't use a knitR file, but my DESCRIPTION file had a field:
> >
> > VignetteBuilder: knitr
> >
> > Deleting this field solved the problem (i.e., got rid of that message in
> my original email)
> >
> > Thanks for all your help.
> >
> > Dev
> >
> >
> >
> > On Sun, Feb 4, 2018 at 2:05 PM, Roy Mendelssohn - NOAA Federal <
> roy.mendelssohn at noaa.gov> wrote:
> > If you can't find the solution yourself,  posting the top matter of your
> vignette file would also help.
> >
> > -Roy
> >
> > > On Feb 4, 2018, at 10:54 AM, Joshua Ulrich <josh.m.ulrich at gmail.com>
> wrote:
> > >
> > > On Sun, Feb 4, 2018 at 12:47 PM, Dev Chakraborty <dpc10ster at gmail.com>
> wrote:
> > >> Dear All,
> > >>
> > >> I get the following message on running R CMD check -- as - cran:
> > >>
> > >> Package has a VignetteBuilder field but no prebuilt vignette index.
> > >>
> > >> I do not know how to fix this. Any help will be appreciated.
> > >>
> > > I don't know how to fix it either.  That said, often a great first
> > > step is to search for the error.  A Google search for, "Package has a
> > > VignetteBuilder field but no prebuilt vignette index.", which points
> > > to: https://stackoverflow.com/q/30976308.
> > >
> > > And a Google search "VignetteBuilder" has several promising "how to"
> > > results, and there is a "Non-Sweave Vignettes" section of Writing R
> > > Extensions:
> > > https://cran.r-project.org/doc/manuals/r-release/R-exts.
> html#Non_002dSweave-vignettes.
> > >
> > > It will be easier for others to help you if you can do some
> > > investigation on your own and come back with more specifics.
> > >
> > >> Sincerely,
> > >>
> > >> Dev
> > >>
> > >>
> > >> --
> > >> Dev Chakraborty, PhD
> > >> Professor of Radiology retired
> > >>
> > >>        [[alternative HTML version deleted]]
> > >>
> > >> ______________________________________________
> > >> R-package-devel at r-project.org mailing list
> > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> > >
> > >
> > > --
> > > Joshua Ulrich  |  about.me/joshuaulrich
> > > FOSS Trading  |  www.fosstrading.com
> > > R/Finance 2018 | www.rinfinance.com
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > **********************
> > "The contents of this message do not reflect any position of the U.S.
> Government or NOAA."
> > **********************
> > Roy Mendelssohn
> > Supervisory Operations Research Analyst
> > NOAA/NMFS
> > Environmental Research Division
> > Southwest Fisheries Science Center
> > ***Note new street address***
> > 110 McAllister Way
> > Santa Cruz, CA 95060
> > Phone: (831)-420-3666
> > Fax: (831) 420-3980
> > e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> >
> > "Old age and treachery will overcome youth and skill."
> > "From those who have been given much, much will be expected"
> > "the arc of the moral universe is long, but it bends toward justice"
> -MLK Jr.
> >
> >
> >
> >
> > --
> > Dev Chakraborty, PhD
> > Professor of Radiology retired
> > CEO, ExpertCAD Analytics LLC
> > 412-480-7318 (cell)
> > ?(412) 427-5085? (alt. cell)
> > 412-349-5305 (land line)
> >
> > Book website:
> > https://www.crcpress.com/9781482214840
> > Online supplementary material website:
> > https://bitbucket.org/dpc10ster/onlinebookk21778
> > CAD Project website:
> > www.expertcadanalytics.com
> > JAFROC website
> > www.devchakraborty.com
>
> **********************
> "The contents of this message do not reflect any position of the U.S.
> Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK
> Jr.
>
>


-- 
Dev Chakraborty, PhD
Professor of Radiology retired
CEO, ExpertCAD Analytics LLC
412-480-7318 (cell)
?(412) 427-5085? (alt. cell)
412-349-5305 (land line)

*Book website:*
https://www.crcpress.com/9781482214840
*Online supplementary material website:*
https://bitbucket.org/dpc10ster/onlinebookk21778
<https://www.crcpress.com/9781482214840>
*CAD Project website:*
www.expertcadanalytics.com
*JAFROC website*
www.devchakraborty.com

	[[alternative HTML version deleted]]


From suzen at acm.org  Sun Feb  4 23:49:40 2018
From: suzen at acm.org (Suzen, Mehmet)
Date: Sun, 4 Feb 2018 23:49:40 +0100
Subject: [R-pkg-devel] Fwd: Collaboration Request: h2o R Package
	Function Cheatsheet
In-Reply-To: <CAJXDcw2mM2gQnLmO=4veGCrKOFMQfknGLLm=7TQ6q_PF2ScVFg@mail.gmail.com>
References: <CAJXDcw3ybr7byDCms8=dCZaq2S6zpJh1KRuWNj9L7E4D5wzQ3w@mail.gmail.com>
 <CAJXDcw2mM2gQnLmO=4veGCrKOFMQfknGLLm=7TQ6q_PF2ScVFg@mail.gmail.com>
Message-ID: <CAPtbhHxnZB6=Ns=ycdLo-kUj2gtBaygESD=yoKmTzcXADD+CrQ@mail.gmail.com>

Dear Juan,

A good start. A suggestion for versioning, instead of versioning on
file names, maybe you can use git tags for release numbers. Github
will create a release bundle with you release tag.  RStudio has nice
templates for cheatsheets too [1], I think you use their template  and
possibly you could contribute there.

Best,
-m

[1] https://www.rstudio.com/resources/cheatsheets/how-to-contribute-a-cheatsheet/


Mehmet S?zen
<suzen at acm.org>


On 3 February 2018 at 23:00, Juan Telleria Ruiz de Aguirre
<jtelleria.rproject at gmail.com> wrote:
> Dear R Package Developers,
>
> I have just started doing a cheatsheet for h2o R Package:
>
> https://cran.r-project.org/web/packages/h2o/index.html
>
> So if anyone is interested in contribution, I attach what I have done
> till now in Github:
>
> https://github.com/jtelleria/H2O-Cheatsheet
>
> A H2O.ai Statistical Algorithms Cheatsheet already exists, but the new
> one will be focused on R h2o package functions:
>
> https://github.com/h2oai/h2o-tutorials/blob/master/training/h2o_algos/h2o_algos_cheat_sheet_04_25_17.pdf
>
> Kind regards,
> Juan Telleria
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From hugh.parsonage at gmail.com  Mon Feb  5 12:28:41 2018
From: hugh.parsonage at gmail.com (Hugh Parsonage)
Date: Mon, 5 Feb 2018 22:28:41 +1100
Subject: [R-pkg-devel] Strange Additional_repositories NOTE followed by
	package install error
Message-ID: <CAJmOi+OX7RP=kLbxGn9W+mZcq=78QhWrCPxnsb5WGu=U9V=sVw@mail.gmail.com>

I am unable to reproduce a recent R CMD check failure on CRAN
concerning a package of mine: grattan.

This package Suggests: taxstats which is a large package hosted by an
Additional repository: https://hughparsonage.github.io/drat/

When I run this check locally, on travis, and on appveyor with
_R_CHECK_CRAN_INCOMING_ = true I get the expected NOTE:


* checking CRAN incoming feasibility ... NOTE
Maintainer: ?Hugh Parsonage <hugh.parsonage at gmail.com>?
Suggests or Enhances not in mainstream repositories:
  taxstats
Availability using Additional_repositories specification:
taxstats   yes   https://hughparsonage.github.io/drat/


However, on CRAN (including win-builder) I get the rather curious NOTE:

* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Hugh Parsonage <hugh.parsonage at gmail.com>'

Suggests or Enhances not in mainstream repositories:
  taxstats
Availability using Additional_repositories specification:
  taxstats   no   ?
  ?           ?   https://hughparsonage.github.io/drat/
Additional repositories with no packages:
  https://hughparsonage.github.io/drat/


followed by errors resulting from failures to install 'taxstats' when
code such as the following is run to re-build vignettes:

if (requireNamespace("taxstats", quietly = TRUE)){
  library(taxstats)
} else {
  templib <- tempfile()
  hutils::provide.dir(templib)
  install.packages("taxstats",
                   lib = templib,
                   repos = "https://hughparsonage.github.io/drat/",
                   type = "source")
  library("taxstats", lib.loc = templib)
}


Since the failures only occur on Windows machines, and have only
appeared recently, I have considered modifying the DESCRIPTION file to
'trick' win-builder into reinstalling taxstats, as I suspect there may
be caching issues. However, given that the 'taxstats' package takes a
fairly long time to install, I don't want to do this nor submit to
CRAN in case I am missing something else that's causing the check to
fail.


From georgi.boshnakov at manchester.ac.uk  Mon Feb  5 13:17:22 2018
From: georgi.boshnakov at manchester.ac.uk (Georgi Boshnakov)
Date: Mon, 5 Feb 2018 12:17:22 +0000
Subject: [R-pkg-devel] Strange Additional_repositories NOTE followed
	by	package install error
In-Reply-To: <CAJmOi+OX7RP=kLbxGn9W+mZcq=78QhWrCPxnsb5WGu=U9V=sVw@mail.gmail.com>
References: <CAJmOi+OX7RP=kLbxGn9W+mZcq=78QhWrCPxnsb5WGu=U9V=sVw@mail.gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F64C2D3@MBXP01.ds.man.ac.uk>

>Additional repositories  _with no_ packages:
> https://hughparsonage.github.io/drat/

Is it possible that the CRAN has a more stringent check and not only check that there is a web link, But also that it is an R package repository?

This would explain the difference (but not if the lrepo is fine of course).

Georgi Boshnakov

-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Hugh Parsonage
Sent: 05 February 2018 11:29
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Strange Additional_repositories NOTE followed by package install error

I am unable to reproduce a recent R CMD check failure on CRAN concerning a package of mine: grattan.

This package Suggests: taxstats which is a large package hosted by an Additional repository: https://hughparsonage.github.io/drat/

When I run this check locally, on travis, and on appveyor with _R_CHECK_CRAN_INCOMING_ = true I get the expected NOTE:


* checking CRAN incoming feasibility ... NOTE
Maintainer: ?Hugh Parsonage <hugh.parsonage at gmail.com>?
Suggests or Enhances not in mainstream repositories:
  taxstats
Availability using Additional_repositories specification:
taxstats   yes   https://hughparsonage.github.io/drat/


However, on CRAN (including win-builder) I get the rather curious NOTE:

* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Hugh Parsonage <hugh.parsonage at gmail.com>'

Suggests or Enhances not in mainstream repositories:
  taxstats
Availability using Additional_repositories specification:
  taxstats   no   ?
  ?           ?   https://hughparsonage.github.io/drat/
Additional repositories with no packages:
  https://hughparsonage.github.io/drat/


followed by errors resulting from failures to install 'taxstats' when code such as the following is run to re-build vignettes:

if (requireNamespace("taxstats", quietly = TRUE)){
  library(taxstats)
} else {
  templib <- tempfile()
  hutils::provide.dir(templib)
  install.packages("taxstats",
                   lib = templib,
                   repos = "https://hughparsonage.github.io/drat/",
                   type = "source")
  library("taxstats", lib.loc = templib) }


Since the failures only occur on Windows machines, and have only appeared recently, I have considered modifying the DESCRIPTION file to 'trick' win-builder into reinstalling taxstats, as I suspect there may be caching issues. However, given that the 'taxstats' package takes a fairly long time to install, I don't want to do this nor submit to CRAN in case I am missing something else that's causing the check to fail.

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel

-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Hugh Parsonage
Sent: 05 February 2018 11:29
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Strange Additional_repositories NOTE followed by package install error

I am unable to reproduce a recent R CMD check failure on CRAN concerning a package of mine: grattan.

This package Suggests: taxstats which is a large package hosted by an Additional repository: https://hughparsonage.github.io/drat/

When I run this check locally, on travis, and on appveyor with _R_CHECK_CRAN_INCOMING_ = true I get the expected NOTE:


* checking CRAN incoming feasibility ... NOTE
Maintainer: ?Hugh Parsonage <hugh.parsonage at gmail.com>?
Suggests or Enhances not in mainstream repositories:
  taxstats
Availability using Additional_repositories specification:
taxstats   yes   https://hughparsonage.github.io/drat/


However, on CRAN (including win-builder) I get the rather curious NOTE:

* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Hugh Parsonage <hugh.parsonage at gmail.com>'

Suggests or Enhances not in mainstream repositories:
  taxstats
Availability using Additional_repositories specification:
  taxstats   no   ?
  ?           ?   https://hughparsonage.github.io/drat/
Additional repositories with no packages:
  https://hughparsonage.github.io/drat/


followed by errors resulting from failures to install 'taxstats' when code such as the following is run to re-build vignettes:

if (requireNamespace("taxstats", quietly = TRUE)){
  library(taxstats)
} else {
  templib <- tempfile()
  hutils::provide.dir(templib)
  install.packages("taxstats",
                   lib = templib,
                   repos = "https://hughparsonage.github.io/drat/",
                   type = "source")
  library("taxstats", lib.loc = templib) }


Since the failures only occur on Windows machines, and have only appeared recently, I have considered modifying the DESCRIPTION file to 'trick' win-builder into reinstalling taxstats, as I suspect there may be caching issues. However, given that the 'taxstats' package takes a fairly long time to install, I don't want to do this nor submit to CRAN in case I am missing something else that's causing the check to fail.

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel

From nfultz at gmail.com  Mon Feb  5 18:04:06 2018
From: nfultz at gmail.com (Neal Fultz)
Date: Mon, 5 Feb 2018 17:04:06 +0000
Subject: [R-pkg-devel] Strange Additional_repositories NOTE followed by
 package install error
In-Reply-To: <CAJmOi+OX7RP=kLbxGn9W+mZcq=78QhWrCPxnsb5WGu=U9V=sVw@mail.gmail.com>
References: <CAJmOi+OX7RP=kLbxGn9W+mZcq=78QhWrCPxnsb5WGu=U9V=sVw@mail.gmail.com>
Message-ID: <CAL9B2vfTarQa+8LmjmiDnzrZZ7RKef_69N_TKNun73MLJ-UA3w@mail.gmail.com>

It looks like the drat repo you linked to only has windows binaries for
3.2, which is probably too old for win builder? Just a guess.

On Mon, Feb 5, 2018 at 11:28 AM, Hugh Parsonage <hugh.parsonage at gmail.com>
wrote:

> I am unable to reproduce a recent R CMD check failure on CRAN
> concerning a package of mine: grattan.
>
> This package Suggests: taxstats which is a large package hosted by an
> Additional repository: https://hughparsonage.github.io/drat/
>
> When I run this check locally, on travis, and on appveyor with
> _R_CHECK_CRAN_INCOMING_ = true I get the expected NOTE:
>
>
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?Hugh Parsonage <hugh.parsonage at gmail.com>?
> Suggests or Enhances not in mainstream repositories:
>   taxstats
> Availability using Additional_repositories specification:
> taxstats   yes   https://hughparsonage.github.io/drat/
>
>
> However, on CRAN (including win-builder) I get the rather curious NOTE:
>
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: 'Hugh Parsonage <hugh.parsonage at gmail.com>'
>
> Suggests or Enhances not in mainstream repositories:
>   taxstats
> Availability using Additional_repositories specification:
>   taxstats   no   ?
>   ?           ?   https://hughparsonage.github.io/drat/
> Additional repositories with no packages:
>   https://hughparsonage.github.io/drat/
>
>
> followed by errors resulting from failures to install 'taxstats' when
> code such as the following is run to re-build vignettes:
>
> if (requireNamespace("taxstats", quietly = TRUE)){
>   library(taxstats)
> } else {
>   templib <- tempfile()
>   hutils::provide.dir(templib)
>   install.packages("taxstats",
>                    lib = templib,
>                    repos = "https://hughparsonage.github.io/drat/",
>                    type = "source")
>   library("taxstats", lib.loc = templib)
> }
>
>
> Since the failures only occur on Windows machines, and have only
> appeared recently, I have considered modifying the DESCRIPTION file to
> 'trick' win-builder into reinstalling taxstats, as I suspect there may
> be caching issues. However, given that the 'taxstats' package takes a
> fairly long time to install, I don't want to do this nor submit to
> CRAN in case I am missing something else that's causing the check to
> fail.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Mon Feb  5 18:19:56 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Mon, 5 Feb 2018 18:19:56 +0100
Subject: [R-pkg-devel] Strange Additional_repositories NOTE followed by
 package install error
In-Reply-To: <CAJmOi+OX7RP=kLbxGn9W+mZcq=78QhWrCPxnsb5WGu=U9V=sVw@mail.gmail.com>
References: <CAJmOi+OX7RP=kLbxGn9W+mZcq=78QhWrCPxnsb5WGu=U9V=sVw@mail.gmail.com>
Message-ID: <6ef8e6ba-b1d0-5daf-894a-b84597a9c371@statistik.tu-dortmund.de>

1.
The repository is obviously *not* available for Windows as

https://hughparsonage.github.io/drat/bin/windows/contrib/3.5/PACKAGES

does not exist.


2.
 > Since the failures only occur on Windows machines, and have only
 > appeared recently, I have considered modifying the DESCRIPTION file to
 > 'trick' win-builder into reinstalling taxstats


-> This is strictly prohibited and you will be banned of CRAN if you try 
that.

Best,
Uwe Ligges



On 05.02.2018 12:28, Hugh Parsonage wrote:
> I am unable to reproduce a recent R CMD check failure on CRAN
> concerning a package of mine: grattan.
> 
> This package Suggests: taxstats which is a large package hosted by an
> Additional repository: https://hughparsonage.github.io/drat/
> 
> When I run this check locally, on travis, and on appveyor with
> _R_CHECK_CRAN_INCOMING_ = true I get the expected NOTE:
> 
> 
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?Hugh Parsonage <hugh.parsonage at gmail.com>?
> Suggests or Enhances not in mainstream repositories:
>    taxstats
> Availability using Additional_repositories specification:
> taxstats   yes   https://hughparsonage.github.io/drat/
> 
> 
> However, on CRAN (including win-builder) I get the rather curious NOTE:
> 
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: 'Hugh Parsonage <hugh.parsonage at gmail.com>'
> 
> Suggests or Enhances not in mainstream repositories:
>    taxstats
> Availability using Additional_repositories specification:
>    taxstats   no   ?
>    ?           ?   https://hughparsonage.github.io/drat/
> Additional repositories with no packages:
>    https://hughparsonage.github.io/drat/
> 
> 
> followed by errors resulting from failures to install 'taxstats' when
> code such as the following is run to re-build vignettes:
> 
> if (requireNamespace("taxstats", quietly = TRUE)){
>    library(taxstats)
> } else {
>    templib <- tempfile()
>    hutils::provide.dir(templib)
>    install.packages("taxstats",
>                     lib = templib,
>                     repos = "https://hughparsonage.github.io/drat/",
>                     type = "source")
>    library("taxstats", lib.loc = templib)
> }
> 
> 
> Since the failures only occur on Windows machines, and have only
> appeared recently, I have considered modifying the DESCRIPTION file to
> 'trick' win-builder into reinstalling taxstats, as I suspect there may
> be caching issues. However, given that the 'taxstats' package takes a
> fairly long time to install, I don't want to do this nor submit to
> CRAN in case I am missing something else that's causing the check to
> fail.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From hugh.parsonage at gmail.com  Mon Feb  5 23:23:35 2018
From: hugh.parsonage at gmail.com (Hugh Parsonage)
Date: Tue, 6 Feb 2018 09:23:35 +1100
Subject: [R-pkg-devel] Strange Additional_repositories NOTE followed by
 package install error
In-Reply-To: <6ef8e6ba-b1d0-5daf-894a-b84597a9c371@statistik.tu-dortmund.de>
References: <CAJmOi+OX7RP=kLbxGn9W+mZcq=78QhWrCPxnsb5WGu=U9V=sVw@mail.gmail.com>
 <6ef8e6ba-b1d0-5daf-894a-b84597a9c371@statistik.tu-dortmund.de>
Message-ID: <CAJmOi+NkU0S+SncqQD7hehv4D0D9rV_h1nmbZYvWAFWiZobb9g@mail.gmail.com>

Thank you Uwe & Neal,

Following your suggestion, I tried inserting a binary version of the
package into the repository. I first tried inserting the package into
R 3.4; however, the note persists on winbuilder for R-release:

* using log directory 'd:/RCompile/CRANguest/R-release/grattan.Rcheck'
* using R version 3.4.3 (2017-11-30)
* using platform: x86_64-w64-mingw32 (64-bit)
* using session charset: ISO8859-1
* checking for file 'grattan/DESCRIPTION' ... OK
* checking extension type ... Package
* this is package 'grattan' version '1.5.3.2'
* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Hugh Parsonage <hugh.parsonage at gmail.com>'

Possibly mis-spelled words in DESCRIPTION:
  Grattan (18:24)
  indices (17:77)
  repos (19:34)
  taxstats (19:23)

Suggests or Enhances not in mainstream repositories:
  taxstats
Availability using Additional_repositories specification:
  taxstats   no   ?
  ?           ?   https://hughparsonage.github.io/drat/
Additional repositories with no packages:
  https://hughparsonage.github.io/drat/

 (ephemeral link: https://win-builder.r-project.org/4SMyJyP2fZcC/00check.log )

whereas when I run R CMD check --as-cran on a local machine, as well
as on appveyor, I get the expected NOTE.

?  using log directory
'C:/Users/hughp/AppData/Local/Temp/Rtmp4IHBGp/file3b0053a64c53/grattan.Rcheck'
?  using R version 3.4.3 (2017-11-30)
?  using platform: x86_64-w64-mingw32 (64-bit)
?  using session charset: ISO8859-1
?  using option '--as-cran'
?  checking for file 'grattan/DESCRIPTION'
?  checking extension type ... Package
?  this is package 'grattan' version '1.5.3.2'
N  checking CRAN incoming feasibility
   Maintainer: 'Hugh Parsonage <hugh.parsonage at gmail.com>'

   Suggests or Enhances not in mainstream repositories:
     taxstats
   Availability using Additional_repositories specification:
     taxstats   yes   https://hughparsonage.github.io/drat/

The newly inserted binary package appears to install fine on
Appveyor's instance:

Rscript -e "is.null(install.packages('taxstats', repos =
'https://hughparsonage.github.io/drat'))"
Installing package into 'c:/RLibrary'
(as 'lib' is unspecified)
trying URL 'https://hughparsonage.github.io/drat/bin/windows/contrib/3.4/taxstats_0.0.5.1415.zip'
Content type 'application/zip' length 78843919 bytes (75.2 MB)
==================================================
downloaded 75.2 MB
package 'taxstats' successfully unpacked and MD5 sums checked
The downloaded binary packages are in
C:\Users\appveyor\AppData\Local\Temp\1\Rtmp6HCDYs\downloaded_packages
[1] TRUE


I understand that available.packages() using caching, but rebooting my
computer did not change this result (I'm not sure if this is
sufficient to eliminate the possibility that caching is masking a
problem).


Sorry that this package is causing problems on CRAN. Very appreciative
of your patience.


Hugh.

On 6 February 2018 at 04:19, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 1.
> The repository is obviously *not* available for Windows as
>
> https://hughparsonage.github.io/drat/bin/windows/contrib/3.5/PACKAGES
>
> does not exist.
>
>
> 2.
>> Since the failures only occur on Windows machines, and have only
>> appeared recently, I have considered modifying the DESCRIPTION file to
>> 'trick' win-builder into reinstalling taxstats
>
>
> -> This is strictly prohibited and you will be banned of CRAN if you try
> that.
>
> Best,
> Uwe Ligges
>
>
>
>
> On 05.02.2018 12:28, Hugh Parsonage wrote:
>>
>> I am unable to reproduce a recent R CMD check failure on CRAN
>> concerning a package of mine: grattan.
>>
>> This package Suggests: taxstats which is a large package hosted by an
>> Additional repository: https://hughparsonage.github.io/drat/
>>
>> When I run this check locally, on travis, and on appveyor with
>> _R_CHECK_CRAN_INCOMING_ = true I get the expected NOTE:
>>
>>
>> * checking CRAN incoming feasibility ... NOTE
>> Maintainer: ?Hugh Parsonage <hugh.parsonage at gmail.com>?
>> Suggests or Enhances not in mainstream repositories:
>>    taxstats
>> Availability using Additional_repositories specification:
>> taxstats   yes   https://hughparsonage.github.io/drat/
>>
>>
>> However, on CRAN (including win-builder) I get the rather curious NOTE:
>>
>> * checking CRAN incoming feasibility ... NOTE
>> Maintainer: 'Hugh Parsonage <hugh.parsonage at gmail.com>'
>>
>> Suggests or Enhances not in mainstream repositories:
>>    taxstats
>> Availability using Additional_repositories specification:
>>    taxstats   no   ?
>>    ?           ?   https://hughparsonage.github.io/drat/
>> Additional repositories with no packages:
>>    https://hughparsonage.github.io/drat/
>>
>>
>> followed by errors resulting from failures to install 'taxstats' when
>> code such as the following is run to re-build vignettes:
>>
>> if (requireNamespace("taxstats", quietly = TRUE)){
>>    library(taxstats)
>> } else {
>>    templib <- tempfile()
>>    hutils::provide.dir(templib)
>>    install.packages("taxstats",
>>                     lib = templib,
>>                     repos = "https://hughparsonage.github.io/drat/",
>>                     type = "source")
>>    library("taxstats", lib.loc = templib)
>> }
>>
>>
>> Since the failures only occur on Windows machines, and have only
>> appeared recently, I have considered modifying the DESCRIPTION file to
>> 'trick' win-builder into reinstalling taxstats, as I suspect there may
>> be caching issues. However, given that the 'taxstats' package takes a
>> fairly long time to install, I don't want to do this nor submit to
>> CRAN in case I am missing something else that's causing the check to
>> fail.
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>


From d.scott at auckland.ac.nz  Wed Feb  7 04:22:17 2018
From: d.scott at auckland.ac.nz (David Scott)
Date: Wed, 7 Feb 2018 16:22:17 +1300
Subject: [R-pkg-devel] R-devel warning: You used a knitr feature that
 depends on the digest package.
Message-ID: <cdc12aa4-4082-8a6f-3175-85bb09588b14@auckland.ac.nz>

On a package I help maintain, we had a note from Kurt about a warning 
when building vignettes on R-devel.

It was

Warning: You used a knitr feature that depends on the digest package.

Checking the location of the error and googling it, I am pretty certain 
it comes from cache = true for a chunk in the vignette.

Adding digest as suggested package, I got no warning from winbuilder 
using R-devel, but submitting to https://builder.r-hub.io gave me a new 
warning from codetools at the same location as previously. Like digest, 
codetools is suggested by knitr.

Any advice? One thought is just take off cache = true.

David Scott

-- 
_________________________________________________________________
David Scott	Department of Statistics
		The University of Auckland, PB 92019
		Auckland 1142,    NEW ZEALAND
Phone: +64 9 923 5055, or +64 9 373 7599 ext 85055
Email:	d.scott at auckland.ac.nz,  Fax: +64 9 373 7018


From csardi.gabor at gmail.com  Wed Feb  7 04:26:55 2018
From: csardi.gabor at gmail.com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 6 Feb 2018 19:26:55 -0800
Subject: [R-pkg-devel] R-devel warning: You used a knitr feature that
 depends on the digest package.
In-Reply-To: <cdc12aa4-4082-8a6f-3175-85bb09588b14@auckland.ac.nz>
References: <cdc12aa4-4082-8a6f-3175-85bb09588b14@auckland.ac.nz>
Message-ID: <CABtg=KmyzobBZDtDeHviDM7xB3T_Wfq_JkAdaPn=_O4xKHLf5Q@mail.gmail.com>

codetools is a recommended package, and it is part of most R
installations. builder.r-hub.io is a bit more strict, it does have the
recommended packages, on some builders at least, so codetools might be
missing.

Gabor

On Tue, Feb 6, 2018 at 7:22 PM, David Scott <d.scott at auckland.ac.nz> wrote:
> On a package I help maintain, we had a note from Kurt about a warning when
> building vignettes on R-devel.
>
> It was
>
> Warning: You used a knitr feature that depends on the digest package.
>
> Checking the location of the error and googling it, I am pretty certain it
> comes from cache = true for a chunk in the vignette.
>
> Adding digest as suggested package, I got no warning from winbuilder using
> R-devel, but submitting to https://builder.r-hub.io gave me a new warning
> from codetools at the same location as previously. Like digest, codetools is
> suggested by knitr.
>
> Any advice? One thought is just take off cache = true.
>
> David Scott
>
> --
> _________________________________________________________________
> David Scott     Department of Statistics
>                 The University of Auckland, PB 92019
>                 Auckland 1142,    NEW ZEALAND
> Phone: +64 9 923 5055, or +64 9 373 7599 ext 85055
> Email:  d.scott at auckland.ac.nz,  Fax: +64 9 373 7018
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From maechler at stat.math.ethz.ch  Wed Feb  7 09:27:46 2018
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed, 7 Feb 2018 09:27:46 +0100
Subject: [R-pkg-devel] R-devel warning: You used a knitr feature that
 depends on the digest package.
In-Reply-To: <CABtg=KmyzobBZDtDeHviDM7xB3T_Wfq_JkAdaPn=_O4xKHLf5Q@mail.gmail.com>
References: <cdc12aa4-4082-8a6f-3175-85bb09588b14@auckland.ac.nz>
 <CABtg=KmyzobBZDtDeHviDM7xB3T_Wfq_JkAdaPn=_O4xKHLf5Q@mail.gmail.com>
Message-ID: <23162.47234.494615.13894@stat.math.ethz.ch>

>>>>> G?bor Cs?rdi <csardi.gabor at gmail.com>
>>>>>     on Tue, 6 Feb 2018 19:26:55 -0800 writes:

    > codetools is a recommended package, and it is part of most R
    > installations. builder.r-hub.io is a bit more strict, it does have the
    > recommended packages, on some builders at least, so codetools might be
    > missing.

    > Gabor

hmm... but a package maintainer has to also add recommended
packages to 'Suggests' if they are needed in the vignette (e.g.)


    > On Tue, Feb 6, 2018 at 7:22 PM, David Scott <d.scott at auckland.ac.nz> wrote:
    >> On a package I help maintain, we had a note from Kurt about a warning when
    >> building vignettes on R-devel.
    >> 
    >> It was
    >> 
    >> Warning: You used a knitr feature that depends on the digest package.
    >> 
    >> Checking the location of the error and googling it, I am pretty certain it
    >> comes from cache = true for a chunk in the vignette.
    >> 
    >> Adding digest as suggested package, I got no warning from winbuilder using
    >> R-devel, but submitting to https://builder.r-hub.io gave me a new warning
    >> from codetools at the same location as previously. Like digest, codetools is
    >> suggested by knitr.

well, but  "suggests of suggests are not suggests":
If your vignette really needs codetools you (your package
DESCRIPTION) need to suggest it yourself.

    >> Any advice? One thought is just take off cache = true.

well, yes ;-) ..
Seriously, of course rather fix the problem, which must be
fixable relatively easily.

Martin


From marceloa27 at gmail.com  Tue Feb  6 15:55:46 2018
From: marceloa27 at gmail.com (Marcelo Araya Salas)
Date: Tue, 6 Feb 2018 09:55:46 -0500
Subject: [R-pkg-devel] Package removed due to dependency error (but
 dependency not removed)
Message-ID: <CABJVSXTbnJbKxNSrrdK2BPNEf5uXPnt5YJJjMP+CR6hY8eocoA@mail.gmail.com>

Hi all

I have a couple of packages that depend on a third package (seewave
<https://cran.r-project.org/web/packages/seewave/index.html>). My packages
were removed from CRAN because an issue with this dependency: seewave
produces an error when installed in r-release-osx-x86_64
<https://cran.r-project.org/web/checks/check_flavors.html#r-release-osx-x86_64>.
However, seewave has not been removed (???). It seems a bit unfair to me.
Does anyone have any recommendation on how to proceed from now? They asked
me to wait for 2 days a week ago but nothing has happened and now they are
not responding my emails.


thanks

______________________
Marcelo Araya-Salas Ph.D,
Lab of Ornithology, Cornell University
Bioacustics Lab, Universidad de Costa Rica
http://marceloarayasalas.weebly.com

	[[alternative HTML version deleted]]


From huw.campbell at gmail.com  Wed Feb  7 11:54:52 2018
From: huw.campbell at gmail.com (Huw Campbell)
Date: Wed, 7 Feb 2018 21:54:52 +1100
Subject: [R-pkg-devel] New CRAN package assistance
Message-ID: <CAJGqWSOPbit6UCaLd23P+91R=ycgO-D=YPSGF_vPsnrNOdeTkw@mail.gmail.com>

Hey all,

I have just submitted a package for CRAN which works on my Mac and linux
boxes, but there are notes for Windows and my license file. There is little
indication as to what the actual problems are.

The library is a simple binding for the snappy compression library. I have
been rather meticulous, using sound property based testing (through my port
of the hedgehog <https://github.com/hedgehogqa/r-hedgehog> library) and
appropriate R data structures

Package source is here
https://github.com/HuwCampbell/snappier

and the CRAN check results are here
https://win-builder.r-project.org/incoming_pretest/180207_112224_snappier_0010/00check.log

Any help would be appreciated in solving these two issues (a third issue
regarding R versions I think can be resolved by removing the specified
version bound on R).

Cheers,
Huw

	[[alternative HTML version deleted]]


From edd at debian.org  Wed Feb  7 12:48:30 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 7 Feb 2018 05:48:30 -0600
Subject: [R-pkg-devel] New CRAN package assistance
In-Reply-To: <CAJGqWSOPbit6UCaLd23P+91R=ycgO-D=YPSGF_vPsnrNOdeTkw@mail.gmail.com>
References: <CAJGqWSOPbit6UCaLd23P+91R=ycgO-D=YPSGF_vPsnrNOdeTkw@mail.gmail.com>
Message-ID: <23162.59278.201443.597938@rob.eddelbuettel.com>


On 7 February 2018 at 21:54, Huw Campbell wrote:
| I have just submitted a package for CRAN which works on my Mac and linux
| boxes, but there are notes for Windows and my license file. There is little
| indication as to what the actual problems are.
| 
| The library is a simple binding for the snappy compression library. I have
| been rather meticulous, using sound property based testing (through my port
| of the hedgehog <https://github.com/hedgehogqa/r-hedgehog> library) and
| appropriate R data structures
| 
| Package source is here
| https://github.com/HuwCampbell/snappier
| 
| and the CRAN check results are here
| https://win-builder.r-project.org/incoming_pretest/180207_112224_snappier_0010/00check.log
| 
| Any help would be appreciated in solving these two issues (a third issue
| regarding R versions I think can be resolved by removing the specified
| version bound on R).

This is pretty basic stuff we discussed here many times:

   * checking compiled code ... NOTE
   File 'snappier/libs/i386/snappier.dll':
     Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
   File 'snappier/libs/x64/snappier.dll':
     Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
   
   It is good practice to register native routines and to disable symbol
   search.
   
   See 'Writing portable packages' in the 'Writing R Extensions' manual.
   * checking examples ...

This is indeed discussed at length in 'Writing R Extensions', which happens
to come with your installation of R.  I also wrote three different blog posts
about how to create such init routines (easily, more easily, easiest).

If you were to use Rcpp (which you don't have to, of course) then the
routines would have been written for you automatically.

The other is a simple 'R (>= 3.3.1)' not matching the "end in zero" requirement
so please make it 'R (>= 3.3.0)'.

The one about the LICENSE is fine.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From davidhughjones at gmail.com  Wed Feb  7 12:53:38 2018
From: davidhughjones at gmail.com (David Hugh-Jones)
Date: Wed, 7 Feb 2018 11:53:38 +0000
Subject: [R-pkg-devel] Fwd: [CRAN-pretest-archived] CRAN submission huxtable
 2.0.2
In-Reply-To: <CAARY7khvSYF8MLLM5LgYmXxU_0X7UjjAqS-MPzS+a+c6BHD1Hg@mail.gmail.com>
References: <20180205125736.1E7F316419B@xmpalantir.wu.ac.at>
 <01d39e82$Blat.v2.2.2$447b886f@mail.statistik.tu-dortmund.de>
 <CAARY7khvSYF8MLLM5LgYmXxU_0X7UjjAqS-MPzS+a+c6BHD1Hg@mail.gmail.com>
Message-ID: <CAARY7kj7LOB+cV+RBS4s8iYBY2DsLuhgmiJNGaBtvSEOm8gKcQ@mail.gmail.com>

Hi guys,

I've been having some problems with updating my 'huxtable' package on CRAN.
The latest issue is that I run a test which renders a rmarkdown document to
PDF, using rmarkdown::render. This passes R CMD check fine on my machine,
on travis and on win-builder, but fails on the CRAN machines as follows:

Last 13 lines of output:
  BEGIN failed--compilation aborted at
D:\Compiler\texmf\scripts\latexmk\perl\latexmk.pl line 122.
  File::Path version 2.08 required--this is only version 1.08 at
D:\Compiler\texmf\scripts\latexmk\perl\latexmk.pl line 122.

This looks like something coming via pandoc, and it also looks as if it is
a function of a very old version of Perl: File::Path version 2.08 came out
in 2009. Version 1.08 is included with Perl 5.8 which came out in 2002.

What's going on here, and can anyone suggest a fix?

In general, is there any info available about the CRAN check servers? I
keep running into problems that are specific to them and cannot be
replicated on any other machine available to me.

David


On 5 February 2018 at 13:07, <Uwe.Ligges at r-project.org> wrote:

> Dear maintainer,
>
> package huxtable_2.0.2.tar.gz does not pass the incoming checks
> automatically, please see the pre-test at:
> <https://win-builder.r-project.org/incoming_pretest/180205_
> 135743_huxtable_202/00check.log>
> Status: 2 ERRORs, 1 NOTE
>
> Current CRAN status: ERROR: 1, OK: 1
> See: <https://CRAN.R-project.org/web/checks/check_results_huxtable.html>
>
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on
> the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> If you are fairly certain the rejection is a false positive, please
> reply-all to this message and explain.
>
> More details are given in the directory:
> <https://win-builder.r-project.org/incoming_pretest/180205_
> 135743_huxtable_202>
> The files will be removed after roughly 7 days.
>
>
> Best regards,
> CRAN teams' auto-check service
>
>

	[[alternative HTML version deleted]]


From edd at debian.org  Wed Feb  7 13:20:11 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 7 Feb 2018 06:20:11 -0600
Subject: [R-pkg-devel] 
 Fwd: [CRAN-pretest-archived] CRAN submission huxtable 2.0.2
In-Reply-To: <CAARY7kj7LOB+cV+RBS4s8iYBY2DsLuhgmiJNGaBtvSEOm8gKcQ@mail.gmail.com>
References: <20180205125736.1E7F316419B@xmpalantir.wu.ac.at>
 <01d39e82$Blat.v2.2.2$447b886f@mail.statistik.tu-dortmund.de>
 <CAARY7khvSYF8MLLM5LgYmXxU_0X7UjjAqS-MPzS+a+c6BHD1Hg@mail.gmail.com>
 <CAARY7kj7LOB+cV+RBS4s8iYBY2DsLuhgmiJNGaBtvSEOm8gKcQ@mail.gmail.com>
Message-ID: <23162.61179.2926.500403@rob.eddelbuettel.com>


On 7 February 2018 at 11:53, David Hugh-Jones wrote:
| Hi guys,
| 
| I've been having some problems with updating my 'huxtable' package on CRAN.
| The latest issue is that I run a test which renders a rmarkdown document to
| PDF, using rmarkdown::render. This passes R CMD check fine on my machine,
| on travis and on win-builder, but fails on the CRAN machines as follows:
| 
| Last 13 lines of output:
|   BEGIN failed--compilation aborted at
| D:\Compiler\texmf\scripts\latexmk\perl\latexmk.pl line 122.
|   File::Path version 2.08 required--this is only version 1.08 at
| D:\Compiler\texmf\scripts\latexmk\perl\latexmk.pl line 122.
| 
| This looks like something coming via pandoc, and it also looks as if it is
| a function of a very old version of Perl: File::Path version 2.08 came out
| in 2009. Version 1.08 is included with Perl 5.8 which came out in 2002.
| 
| What's going on here, and can anyone suggest a fix?

Maybe don't run the test if it always fails, and you cannot control the setting?

Rcpp has had conditional tests for (I guess at least) 5+ years -- I just test
if the version number has four components (ie 0.1.2.3, a test version) as
opposed to three (ie 0.1.3, a release) and test only on the former (my box,
Travis, ... but not CRAN). That started because CRAN had its time limit, but
the idea is generally valid.

| In general, is there any info available about the CRAN check servers? I
| keep running into problems that are specific to them and cannot be
| replicated on any other machine available to me.

You can ask, and eventually someone will answer, but "those in charge" are
busy too.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From loboda at rain.ifmo.ru  Wed Feb  7 13:17:23 2018
From: loboda at rain.ifmo.ru (Alexander Loboda)
Date: Wed, 7 Feb 2018 15:17:23 +0300
Subject: [R-pkg-devel] Using C++11 and compilation in sub-directories
 together
Message-ID: <74e7810d-6d2d-7e4f-659d-ee407266aa0b@rain.ifmo.ru>

Dear all,

I'm trying to build a package that uses c++11 code and sub-directories 
in src/ according?to the "Writing R Extensions" manual, but it seems 
like R CMD doesn't want to compile the code with c++11 flags when source 
files(actually, corresponding object files) are listed in the OBJECTS 
variable in the Makevars file. That is, if I do not use sub-directories, 
everything is fine. All of the code is compiling with c++11 flags, but 
when I try to add hierarchy in src/ directory and use the OBJECTS 
variable, the compilation fails because of lack of c++11 flags. Makevars 
file contains such content:

CXX_STD = CXX11

OBJECTS_SMTH = subdir/main.o
OBJECTS = $(OBJECTS_SMTH)

It would be very nice if there is some possibility of using both of 
these features. I'm using R 3.4.2 and Ubuntu 17.10.

Thanks!
Alex

	[[alternative HTML version deleted]]


From davidhughjones at gmail.com  Wed Feb  7 14:14:13 2018
From: davidhughjones at gmail.com (David Hugh-Jones)
Date: Wed, 7 Feb 2018 13:14:13 +0000
Subject: [R-pkg-devel] 
 Fwd: [CRAN-pretest-archived] CRAN submission huxtable 2.0.2
In-Reply-To: <23162.61179.2926.500403@rob.eddelbuettel.com>
References: <20180205125736.1E7F316419B@xmpalantir.wu.ac.at>
 <01d39e82$Blat.v2.2.2$447b886f@mail.statistik.tu-dortmund.de>
 <CAARY7khvSYF8MLLM5LgYmXxU_0X7UjjAqS-MPzS+a+c6BHD1Hg@mail.gmail.com>
 <CAARY7kj7LOB+cV+RBS4s8iYBY2DsLuhgmiJNGaBtvSEOm8gKcQ@mail.gmail.com>
 <23162.61179.2926.500403@rob.eddelbuettel.com>
Message-ID: <CAARY7kg4x30Td4hHknsNtbkdz3nb4FzuLw21RQxMTq9aWQVjsA@mail.gmail.com>

Hi Dirk

Not running the test on CRAN would fix the problem, but it is kind of an
admission of failure. Part of CRAN's point is quality control, so switching
off tests just to pass seems perverse. I'll do it if that is the only
option.

Yes, I bet the CRAN guys are highly busy, and full respect to them. It
might be nice, though, if there were a public document about what is on
those servers. Just e.g. a list of software and versions. Or the name of
the OS and release. That would presumably help
travis/win-builder/individual R developers to create environments closer to
the CRAN one, and that would reduce the number of CRAN-only bugs.

Cheers,
David

On 7 February 2018 at 12:20, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> Maybe don't run the test if it always fails, and you cannot control the
> setting?
>
> Rcpp has had conditional tests for (I guess at least) 5+ years -- I just
> test
> if the version number has four components (ie 0.1.2.3, a test version) as
> opposed to three (ie 0.1.3, a release) and test only on the former (my box,
> Travis, ... but not CRAN). That started because CRAN had its time limit,
> but
> the idea is generally valid.
>
> | In general, is there any info available about the CRAN check servers? I
> | keep running into problems that are specific to them and cannot be
> | replicated on any other machine available to me.
>
> You can ask, and eventually someone will answer, but "those in charge" are
> busy too.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From plummerm at iarc.fr  Wed Feb  7 14:30:39 2018
From: plummerm at iarc.fr (Martyn Plummer)
Date: Wed, 7 Feb 2018 13:30:39 +0000
Subject: [R-pkg-devel] Using C++11 and compilation in sub-directories
 together
In-Reply-To: <74e7810d-6d2d-7e4f-659d-ee407266aa0b@rain.ifmo.ru>
References: <74e7810d-6d2d-7e4f-659d-ee407266aa0b@rain.ifmo.ru>
Message-ID: <1518010238.26305.37.camel@iarc.fr>

On Wed, 2018-02-07 at 15:17 +0300, Alexander Loboda wrote:
> Dear all,
> 
> I'm trying to build a package that uses c++11 code and sub-directories 
> in src/ according to the "Writing R Extensions" manual, but it seems 
> like R CMD doesn't want to compile the code with c++11 flags when source 
> files(actually, corresponding object files) are listed in the OBJECTS 
> variable in the Makevars file. That is, if I do not use sub-directories, 
> everything is fine. All of the code is compiling with c++11 flags, but 
> when I try to add hierarchy in src/ directory and use the OBJECTS 
> variable, the compilation fails because of lack of c++11 flags. Makevars 
> file contains such content:
> 
> CXX_STD = CXX11
> 
> OBJECTS_SMTH = subdir/main.o
> OBJECTS = $(OBJECTS_SMTH)
> 
> It would be very nice if there is some possibility of using both of 
> these features. I'm using R 3.4.2 and Ubuntu 17.10.

There is no interaction between C++ standards and user-defined OBJECTS.
I have checked this on one of my own packages, which works perfectly
well when I move the sources into a sub-directory. 

If you want further help you will need to share your package source.

Martyn

> Thanks!
> Alex
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

From rami.krispin at gmail.com  Wed Feb  7 16:38:14 2018
From: rami.krispin at gmail.com (Rami Krispin)
Date: Wed, 7 Feb 2018 10:38:14 -0500
Subject: [R-pkg-devel] Depreciate Function
Message-ID: <CADjaWvRc8i9ZLijjeYVAyus5mK436FT88Fd_nLkSi2x7o1_hkQ@mail.gmail.com>

 Hello all,

I am trying to depreciate functions and replace them with a different
function in the new version of the package, using the Depreciate function
which triggers warnings during the package submission to CRAN. For example,
I am replacing the function seasonal_ly with the function ts_seasonal using
the following method:

   - export both of the functions
   - aliases seasonal_ly
   - pass the arguments of the new function to the old function and use the
   Depreciate function to trigger a warning about the depreciating of the
   function and the name of the new function.

The code is available over here:
https://github.com/RamiKrispin/TSstudio/blob/master/R/ts_seasonal.R

Any suggestions?

Thank you in advance!

Best regards,
Rami Krispin

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Wed Feb  7 16:54:29 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 7 Feb 2018 16:54:29 +0100
Subject: [R-pkg-devel] Depreciate Function
In-Reply-To: <CADjaWvRc8i9ZLijjeYVAyus5mK436FT88Fd_nLkSi2x7o1_hkQ@mail.gmail.com>
References: <CADjaWvRc8i9ZLijjeYVAyus5mK436FT88Fd_nLkSi2x7o1_hkQ@mail.gmail.com>
Message-ID: <5c2aadd0-aac9-bff2-57d9-5440ffcc9ab8@statistik.tu-dortmund.de>

Not sure where you get the warning. I guess only at places where you 
still use the old variant?

Best,
Uwe Ligges



On 07.02.2018 16:38, Rami Krispin wrote:
>   Hello all,
> 
> I am trying to depreciate functions and replace them with a different
> function in the new version of the package, using the Depreciate function
> which triggers warnings during the package submission to CRAN. For example,
> I am replacing the function seasonal_ly with the function ts_seasonal using
> the following method:
> 
>     - export both of the functions
>     - aliases seasonal_ly
>     - pass the arguments of the new function to the old function and use the
>     Depreciate function to trigger a warning about the depreciating of the
>     function and the name of the new function.
> 
> The code is available over here:
> https://github.com/RamiKrispin/TSstudio/blob/master/R/ts_seasonal.R
> 
> Any suggestions?
> 
> Thank you in advance!
> 
> Best regards,
> Rami Krispin
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From rami.krispin at gmail.com  Wed Feb  7 19:32:37 2018
From: rami.krispin at gmail.com (Rami Krispin)
Date: Wed, 7 Feb 2018 13:32:37 -0500
Subject: [R-pkg-devel] Depreciate Function
In-Reply-To: <5c2aadd0-aac9-bff2-57d9-5440ffcc9ab8@statistik.tu-dortmund.de>
References: <CADjaWvRc8i9ZLijjeYVAyus5mK436FT88Fd_nLkSi2x7o1_hkQ@mail.gmail.com>
 <5c2aadd0-aac9-bff2-57d9-5440ffcc9ab8@statistik.tu-dortmund.de>
Message-ID: <CADjaWvQFWuiUyRWh=40iDj4QwOHcLMXNYp-=oH2ccfnvXy=YQw@mail.gmail.com>

 Yes, I am keeping the old version and passing the function parameters into
the new version.

I forgot in my previous email to add the log:
https://win-builder.r-project.org/incoming_pretest/180207_135041_TSstudio_011/00check.log

and here is an example of the function that triggers that warning
https://github.com/RamiKrispin/TSstudio/blob/master/R/ts_seasonal.R

Thanks!

On Wed, Feb 7, 2018 at 10:54 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de
> wrote:

> Not sure where you get the warning. I guess only at places where you still
> use the old variant?
>
> Best,
> Uwe Ligges
>
>
>
> On 07.02.2018 16:38, Rami Krispin wrote:
>
>>   Hello all,
>>
>> I am trying to depreciate functions and replace them with a different
>> function in the new version of the package, using the Depreciate function
>> which triggers warnings during the package submission to CRAN. For
>> example,
>> I am replacing the function seasonal_ly with the function ts_seasonal
>> using
>> the following method:
>>
>>     - export both of the functions
>>     - aliases seasonal_ly
>>     - pass the arguments of the new function to the old function and use
>> the
>>     Depreciate function to trigger a warning about the depreciating of the
>>     function and the name of the new function.
>>
>> The code is available over here:
>> https://github.com/RamiKrispin/TSstudio/blob/master/R/ts_seasonal.R
>>
>> Any suggestions?
>>
>> Thank you in advance!
>>
>> Best regards,
>> Rami Krispin
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>

	[[alternative HTML version deleted]]


From maxime.turgeon at mail.mcgill.ca  Wed Feb  7 19:36:31 2018
From: maxime.turgeon at mail.mcgill.ca (Maxime Turgeon)
Date: Wed, 7 Feb 2018 18:36:31 +0000
Subject: [R-pkg-devel] Depreciate Function
In-Reply-To: <CADjaWvQFWuiUyRWh=40iDj4QwOHcLMXNYp-=oH2ccfnvXy=YQw@mail.gmail.com>
References: <CADjaWvRc8i9ZLijjeYVAyus5mK436FT88Fd_nLkSi2x7o1_hkQ@mail.gmail.com>
 <5c2aadd0-aac9-bff2-57d9-5440ffcc9ab8@statistik.tu-dortmund.de>,
 <CADjaWvQFWuiUyRWh=40iDj4QwOHcLMXNYp-=oH2ccfnvXy=YQw@mail.gmail.com>
Message-ID: <YQBPR0101MB1026BAE38685D6A8FE88EF08BAFC0@YQBPR0101MB1026.CANPRD01.PROD.OUTLOOK.COM>

Hi Rami,


Is there a reason for still using the deprecated functions in your examples? Because that's what's triggering the warnings.


Best,

Max

________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Rami Krispin <rami.krispin at gmail.com>
Sent: February 7, 2018 1:32:37 PM
To: Uwe Ligges
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Depreciate Function

Yes, I am keeping the old version and passing the function parameters into
the new version.

I forgot in my previous email to add the log:
https://win-builder.r-project.org/incoming_pretest/180207_135041_TSstudio_011/00check.log

and here is an example of the function that triggers that warning
https://github.com/RamiKrispin/TSstudio/blob/master/R/ts_seasonal.R

Thanks!

On Wed, Feb 7, 2018 at 10:54 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de
> wrote:

> Not sure where you get the warning. I guess only at places where you still
> use the old variant?
>
> Best,
> Uwe Ligges
>
>
>
> On 07.02.2018 16:38, Rami Krispin wrote:
>
>>   Hello all,
>>
>> I am trying to depreciate functions and replace them with a different
>> function in the new version of the package, using the Depreciate function
>> which triggers warnings during the package submission to CRAN. For
>> example,
>> I am replacing the function seasonal_ly with the function ts_seasonal
>> using
>> the following method:
>>
>>     - export both of the functions
>>     - aliases seasonal_ly
>>     - pass the arguments of the new function to the old function and use
>> the
>>     Depreciate function to trigger a warning about the depreciating of the
>>     function and the name of the new function.
>>
>> The code is available over here:
>> https://github.com/RamiKrispin/TSstudio/blob/master/R/ts_seasonal.R
>>
>> Any suggestions?
>>
>> Thank you in advance!
>>
>> Best regards,
>> Rami Krispin
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From rami.krispin at gmail.com  Wed Feb  7 19:49:34 2018
From: rami.krispin at gmail.com (Rami Krispin)
Date: Wed, 7 Feb 2018 13:49:34 -0500
Subject: [R-pkg-devel] Depreciate Function
In-Reply-To: <YQBPR0101MB1026BAE38685D6A8FE88EF08BAFC0@YQBPR0101MB1026.CANPRD01.PROD.OUTLOOK.COM>
References: <CADjaWvRc8i9ZLijjeYVAyus5mK436FT88Fd_nLkSi2x7o1_hkQ@mail.gmail.com>
 <5c2aadd0-aac9-bff2-57d9-5440ffcc9ab8@statistik.tu-dortmund.de>
 <CADjaWvQFWuiUyRWh=40iDj4QwOHcLMXNYp-=oH2ccfnvXy=YQw@mail.gmail.com>
 <YQBPR0101MB1026BAE38685D6A8FE88EF08BAFC0@YQBPR0101MB1026.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <CADjaWvSeEz8CZS==z9n9SB5OkiR0OureTu6=ZEYOwANZreJYUw@mail.gmail.com>

I follow the example of the R Packages book about depreciating a function
which can be find here:
http://r-pkgs.had.co.nz/release.html

Is there another method to rename a function name? maybe to print message
without triggering warning?

Thanks!

On Wed, Feb 7, 2018 at 1:36 PM, Maxime Turgeon <
maxime.turgeon at mail.mcgill.ca> wrote:

> Hi Rami,
>
>
> Is there a reason for still using the deprecated functions in your
> examples? Because that's what's triggering the warnings.
>
>
> Best,
>
> Max
> ------------------------------
> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on behalf
> of Rami Krispin <rami.krispin at gmail.com>
> *Sent:* February 7, 2018 1:32:37 PM
> *To:* Uwe Ligges
> *Cc:* r-package-devel at r-project.org
> *Subject:* Re: [R-pkg-devel] Depreciate Function
>
> Yes, I am keeping the old version and passing the function parameters into
> the new version.
>
> I forgot in my previous email to add the log:
> https://win-builder.r-project.org/incoming_pretest/180207_
> 135041_TSstudio_011/00check.log
>
> and here is an example of the function that triggers that warning
> https://github.com/RamiKrispin/TSstudio/blob/master/R/ts_seasonal.R
>
> Thanks!
>
> On Wed, Feb 7, 2018 at 10:54 AM, Uwe Ligges <ligges at statistik.tu-dortmund.
> de
> > wrote:
>
> > Not sure where you get the warning. I guess only at places where you
> still
> > use the old variant?
> >
> > Best,
> > Uwe Ligges
> >
> >
> >
> > On 07.02.2018 16:38, Rami Krispin wrote:
> >
> >>   Hello all,
> >>
> >> I am trying to depreciate functions and replace them with a different
> >> function in the new version of the package, using the Depreciate
> function
> >> which triggers warnings during the package submission to CRAN. For
> >> example,
> >> I am replacing the function seasonal_ly with the function ts_seasonal
> >> using
> >> the following method:
> >>
> >>     - export both of the functions
> >>     - aliases seasonal_ly
> >>     - pass the arguments of the new function to the old function and use
> >> the
> >>     Depreciate function to trigger a warning about the depreciating of
> the
> >>     function and the name of the new function.
> >>
> >> The code is available over here:
> >> https://github.com/RamiKrispin/TSstudio/blob/master/R/ts_seasonal.R
> >>
> >> Any suggestions?
> >>
> >> Thank you in advance!
> >>
> >> Best regards,
> >> Rami Krispin
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From georgi.boshnakov at manchester.ac.uk  Wed Feb  7 20:46:57 2018
From: georgi.boshnakov at manchester.ac.uk (Georgi Boshnakov)
Date: Wed, 7 Feb 2018 19:46:57 +0000
Subject: [R-pkg-devel] Depreciate Function
In-Reply-To: <CADjaWvSeEz8CZS==z9n9SB5OkiR0OureTu6=ZEYOwANZreJYUw@mail.gmail.com>
References: <CADjaWvRc8i9ZLijjeYVAyus5mK436FT88Fd_nLkSi2x7o1_hkQ@mail.gmail.com>
 <5c2aadd0-aac9-bff2-57d9-5440ffcc9ab8@statistik.tu-dortmund.de>
 <CADjaWvQFWuiUyRWh=40iDj4QwOHcLMXNYp-=oH2ccfnvXy=YQw@mail.gmail.com>
 <YQBPR0101MB1026BAE38685D6A8FE88EF08BAFC0@YQBPR0101MB1026.CANPRD01.PROD.OUTLOOK.COM>,
 <CADjaWvSeEz8CZS==z9n9SB5OkiR0OureTu6=ZEYOwANZreJYUw@mail.gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F64C818@MBXP01.ds.man.ac.uk>


If the calls to your deprecated function can be replaced by calls to the new function - just do that.
In this way users will not be tempted to use the deprecated function.

If that is difficult, you can put a print statement in your old function telling the users whatever you want.
But this may well go unnoticed and is likely focused trouble to your users. And real pain if your package is used in other packages.

Georgi Boshnakov





________________________________________
From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf of Rami Krispin [rami.krispin at gmail.com]
Sent: 07 February 2018 18:49
To: Maxime Turgeon
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Depreciate Function

I follow the example of the R Packages book about depreciating a function
which can be find here:
http://r-pkgs.had.co.nz/release.html

Is there another method to rename a function name? maybe to print message
without triggering warning?

Thanks!

On Wed, Feb 7, 2018 at 1:36 PM, Maxime Turgeon <
maxime.turgeon at mail.mcgill.ca> wrote:

> Hi Rami,
>
>
> Is there a reason for still using the deprecated functions in your
> examples? Because that's what's triggering the warnings.
>
>
> Best,
>
> Max
> ------------------------------
> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on behalf
> of Rami Krispin <rami.krispin at gmail.com>
> *Sent:* February 7, 2018 1:32:37 PM
> *To:* Uwe Ligges
> *Cc:* r-package-devel at r-project.org
> *Subject:* Re: [R-pkg-devel] Depreciate Function
>
> Yes, I am keeping the old version and passing the function parameters into
> the new version.
>
> I forgot in my previous email to add the log:
> https://win-builder.r-project.org/incoming_pretest/180207_
> 135041_TSstudio_011/00check.log
>
> and here is an example of the function that triggers that warning
> https://github.com/RamiKrispin/TSstudio/blob/master/R/ts_seasonal.R
>
> Thanks!
>
> On Wed, Feb 7, 2018 at 10:54 AM, Uwe Ligges <ligges at statistik.tu-dortmund.
> de
> > wrote:
>
> > Not sure where you get the warning. I guess only at places where you
> still
> > use the old variant?
> >
> > Best,
> > Uwe Ligges
> >
> >
> >
> > On 07.02.2018 16:38, Rami Krispin wrote:
> >
> >>   Hello all,
> >>
> >> I am trying to depreciate functions and replace them with a different
> >> function in the new version of the package, using the Depreciate
> function
> >> which triggers warnings during the package submission to CRAN. For
> >> example,
> >> I am replacing the function seasonal_ly with the function ts_seasonal
> >> using
> >> the following method:
> >>
> >>     - export both of the functions
> >>     - aliases seasonal_ly
> >>     - pass the arguments of the new function to the old function and use
> >> the
> >>     Depreciate function to trigger a warning about the depreciating of
> the
> >>     function and the name of the new function.
> >>
> >> The code is available over here:
> >> https://github.com/RamiKrispin/TSstudio/blob/master/R/ts_seasonal.R
> >>
> >> Any suggestions?
> >>
> >> Thank you in advance!
> >>
> >> Best regards,
> >> Rami Krispin
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From maxime.turgeon at mail.mcgill.ca  Wed Feb  7 20:48:40 2018
From: maxime.turgeon at mail.mcgill.ca (Maxime Turgeon)
Date: Wed, 7 Feb 2018 19:48:40 +0000
Subject: [R-pkg-devel] Depreciate Function
In-Reply-To: <CADjaWvSeEz8CZS==z9n9SB5OkiR0OureTu6=ZEYOwANZreJYUw@mail.gmail.com>
References: <CADjaWvRc8i9ZLijjeYVAyus5mK436FT88Fd_nLkSi2x7o1_hkQ@mail.gmail.com>
 <5c2aadd0-aac9-bff2-57d9-5440ffcc9ab8@statistik.tu-dortmund.de>
 <CADjaWvQFWuiUyRWh=40iDj4QwOHcLMXNYp-=oH2ccfnvXy=YQw@mail.gmail.com>
 <YQBPR0101MB1026BAE38685D6A8FE88EF08BAFC0@YQBPR0101MB1026.CANPRD01.PROD.OUTLOOK.COM>,
 <CADjaWvSeEz8CZS==z9n9SB5OkiR0OureTu6=ZEYOwANZreJYUw@mail.gmail.com>
Message-ID: <YQBPR0101MB1026124FCDBD64BC3EDCEC54BAFC0@YQBPR0101MB1026.CANPRD01.PROD.OUTLOOK.COM>

Hi Rami,


I think you're confusing two things: 1) the warning a user receives when they use a deprecated function, and 2) the warning you receive when you (or CRAN) run R CMD check.


1) This is the correct behaviour: you want to warn your users that if they don't change their code, it may break in later releases.


2) When you run R CMD check, it runs all the examples in your help pages (unless you explicitly use \dontrun). If any example triggers a warning, you get a warning; if any example triggers an error, you get an error.


Now, because some of your examples run deprecated functions, it triggers a warning. Unless you *really* want to keep those examples as they are, you should change your code to use the new function. Or put another way, you probably want your users to use the new function, so the documentation should reflect that.


Max

________________________________
From: Rami Krispin <rami.krispin at gmail.com>
Sent: February 7, 2018 1:49:34 PM
To: Maxime Turgeon
Cc: Uwe Ligges; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Depreciate Function

I follow the example of the R Packages book about depreciating a function which can be find here:
http://r-pkgs.had.co.nz/release.html

Is there another method to rename a function name? maybe to print message without triggering warning?

Thanks!

On Wed, Feb 7, 2018 at 1:36 PM, Maxime Turgeon <maxime.turgeon at mail.mcgill.ca<mailto:maxime.turgeon at mail.mcgill.ca>> wrote:

Hi Rami,


Is there a reason for still using the deprecated functions in your examples? Because that's what's triggering the warnings.


Best,

Max

________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org<mailto:r-package-devel-bounces at r-project.org>> on behalf of Rami Krispin <rami.krispin at gmail.com<mailto:rami.krispin at gmail.com>>
Sent: February 7, 2018 1:32:37 PM
To: Uwe Ligges
Cc: r-package-devel at r-project.org<mailto:r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Depreciate Function

Yes, I am keeping the old version and passing the function parameters into
the new version.

I forgot in my previous email to add the log:
https://win-builder.r-project.org/incoming_pretest/180207_135041_TSstudio_011/00check.log

and here is an example of the function that triggers that warning
https://github.com/RamiKrispin/TSstudio/blob/master/R/ts_seasonal.R

Thanks!

On Wed, Feb 7, 2018 at 10:54 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de<mailto:ligges at statistik.tu-dortmund.de>
> wrote:

> Not sure where you get the warning. I guess only at places where you still
> use the old variant?
>
> Best,
> Uwe Ligges
>
>
>
> On 07.02.2018 16:38, Rami Krispin wrote:
>
>>   Hello all,
>>
>> I am trying to depreciate functions and replace them with a different
>> function in the new version of the package, using the Depreciate function
>> which triggers warnings during the package submission to CRAN. For
>> example,
>> I am replacing the function seasonal_ly with the function ts_seasonal
>> using
>> the following method:
>>
>>     - export both of the functions
>>     - aliases seasonal_ly
>>     - pass the arguments of the new function to the old function and use
>> the
>>     Depreciate function to trigger a warning about the depreciating of the
>>     function and the name of the new function.
>>
>> The code is available over here:
>> https://github.com/RamiKrispin/TSstudio/blob/master/R/ts_seasonal.R
>>
>> Any suggestions?
>>
>> Thank you in advance!
>>
>> Best regards,
>> Rami Krispin
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From wdunlap at tibco.com  Wed Feb  7 21:44:17 2018
From: wdunlap at tibco.com (William Dunlap)
Date: Wed, 7 Feb 2018 12:44:17 -0800
Subject: [R-pkg-devel] Depreciate Function
In-Reply-To: <CADjaWvSeEz8CZS==z9n9SB5OkiR0OureTu6=ZEYOwANZreJYUw@mail.gmail.com>
References: <CADjaWvRc8i9ZLijjeYVAyus5mK436FT88Fd_nLkSi2x7o1_hkQ@mail.gmail.com>
 <5c2aadd0-aac9-bff2-57d9-5440ffcc9ab8@statistik.tu-dortmund.de>
 <CADjaWvQFWuiUyRWh=40iDj4QwOHcLMXNYp-=oH2ccfnvXy=YQw@mail.gmail.com>
 <YQBPR0101MB1026BAE38685D6A8FE88EF08BAFC0@YQBPR0101MB1026.CANPRD01.PROD.OUTLOOK.COM>
 <CADjaWvSeEz8CZS==z9n9SB5OkiR0OureTu6=ZEYOwANZreJYUw@mail.gmail.com>
Message-ID: <CAF8bMcbBNq62R-HQh_JWp9qAtJhJZaNOL=AKsQOW8k6A4SQaCw@mail.gmail.com>

Instead of help(oldFunction) giving the example
    oldFunction(x = something, option = "XYZ")
show the user, via comments in the example, how to convert the old usage to
the new
    # replace oldFunction(x = something, option = "XYZ") by
    newFunction(object = log(something), method = "XYZ-log")

Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Wed, Feb 7, 2018 at 10:49 AM, Rami Krispin <rami.krispin at gmail.com>
wrote:

> I follow the example of the R Packages book about depreciating a function
> which can be find here:
> http://r-pkgs.had.co.nz/release.html
>
> Is there another method to rename a function name? maybe to print message
> without triggering warning?
>
> Thanks!
>
> On Wed, Feb 7, 2018 at 1:36 PM, Maxime Turgeon <
> maxime.turgeon at mail.mcgill.ca> wrote:
>
> > Hi Rami,
> >
> >
> > Is there a reason for still using the deprecated functions in your
> > examples? Because that's what's triggering the warnings.
> >
> >
> > Best,
> >
> > Max
> > ------------------------------
> > *From:* R-package-devel <r-package-devel-bounces at r-project.org> on
> behalf
> > of Rami Krispin <rami.krispin at gmail.com>
> > *Sent:* February 7, 2018 1:32:37 PM
> > *To:* Uwe Ligges
> > *Cc:* r-package-devel at r-project.org
> > *Subject:* Re: [R-pkg-devel] Depreciate Function
> >
> > Yes, I am keeping the old version and passing the function parameters
> into
> > the new version.
> >
> > I forgot in my previous email to add the log:
> > https://win-builder.r-project.org/incoming_pretest/180207_
> > 135041_TSstudio_011/00check.log
> >
> > and here is an example of the function that triggers that warning
> > https://github.com/RamiKrispin/TSstudio/blob/master/R/ts_seasonal.R
> >
> > Thanks!
> >
> > On Wed, Feb 7, 2018 at 10:54 AM, Uwe Ligges
> <ligges at statistik.tu-dortmund.
> > de
> > > wrote:
> >
> > > Not sure where you get the warning. I guess only at places where you
> > still
> > > use the old variant?
> > >
> > > Best,
> > > Uwe Ligges
> > >
> > >
> > >
> > > On 07.02.2018 16:38, Rami Krispin wrote:
> > >
> > >>   Hello all,
> > >>
> > >> I am trying to depreciate functions and replace them with a different
> > >> function in the new version of the package, using the Depreciate
> > function
> > >> which triggers warnings during the package submission to CRAN. For
> > >> example,
> > >> I am replacing the function seasonal_ly with the function ts_seasonal
> > >> using
> > >> the following method:
> > >>
> > >>     - export both of the functions
> > >>     - aliases seasonal_ly
> > >>     - pass the arguments of the new function to the old function and
> use
> > >> the
> > >>     Depreciate function to trigger a warning about the depreciating of
> > the
> > >>     function and the name of the new function.
> > >>
> > >> The code is available over here:
> > >> https://github.com/RamiKrispin/TSstudio/blob/master/R/ts_seasonal.R
> > >>
> > >> Any suggestions?
> > >>
> > >> Thank you in advance!
> > >>
> > >> Best regards,
> > >> Rami Krispin
> > >>
> > >>         [[alternative HTML version deleted]]
> > >>
> > >> ______________________________________________
> > >> R-package-devel at r-project.org mailing list
> > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >>
> > >>
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From luke-tierney at uiowa.edu  Wed Feb  7 22:03:16 2018
From: luke-tierney at uiowa.edu (luke-tierney at uiowa.edu)
Date: Wed, 7 Feb 2018 15:03:16 -0600 (CST)
Subject: [R-pkg-devel] R-devel warning: You used a knitr feature that
 depends on the digest package.
In-Reply-To: <23162.47234.494615.13894@stat.math.ethz.ch>
References: <cdc12aa4-4082-8a6f-3175-85bb09588b14@auckland.ac.nz>
 <CABtg=KmyzobBZDtDeHviDM7xB3T_Wfq_JkAdaPn=_O4xKHLf5Q@mail.gmail.com>
 <23162.47234.494615.13894@stat.math.ethz.ch>
Message-ID: <alpine.DEB.2.20.1802071445500.2898@luke-Latitude>

On Wed, 7 Feb 2018, Martin Maechler wrote:

>>>>>> G?bor Cs?rdi <csardi.gabor at gmail.com>
>>>>>>     on Tue, 6 Feb 2018 19:26:55 -0800 writes:
>
>    > codetools is a recommended package, and it is part of most R
>    > installations. builder.r-hub.io is a bit more strict, it does have the
>    > recommended packages, on some builders at least, so codetools might be
>    > missing.
>
>    > Gabor
>
> hmm... but a package maintainer has to also add recommended
> packages to 'Suggests' if they are needed in the vignette (e.g.)
>
>
>    > On Tue, Feb 6, 2018 at 7:22 PM, David Scott <d.scott at auckland.ac.nz> wrote:
>    >> On a package I help maintain, we had a note from Kurt about a warning when
>    >> building vignettes on R-devel.
>    >>
>    >> It was
>    >>
>    >> Warning: You used a knitr feature that depends on the digest package.
>    >>
>    >> Checking the location of the error and googling it, I am pretty certain it
>    >> comes from cache = true for a chunk in the vignette.
>    >>
>    >> Adding digest as suggested package, I got no warning from winbuilder using
>    >> R-devel, but submitting to https://builder.r-hub.io gave me a new warning
>    >> from codetools at the same location as previously. Like digest, codetools is
>    >> suggested by knitr.
>

The problem is that this is an indirect dependency with knitr needing
digest and codetools to implement a feature (cacheing) that is being
asked for. And there is no obvious way (to me at least) of finding out
that these are needed for this feature. If knitr marked these as
Depends rather than Suggests there would be no problem. Depends seems
more in line with the extensions manual that Suggests in this case.

Best,

luke

> well, but  "suggests of suggests are not suggests":
> If your vignette really needs codetools you (your package
> DESCRIPTION) need to suggest it yourself.
>
>    >> Any advice? One thought is just take off cache = true.
>
> well, yes ;-) ..
> Seriously, of course rather fix the problem, which must be
> fixable relatively easily.
>
> Martin
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From rami.krispin at gmail.com  Thu Feb  8 18:45:20 2018
From: rami.krispin at gmail.com (Rami Krispin)
Date: Thu, 8 Feb 2018 12:45:20 -0500
Subject: [R-pkg-devel] Depreciate Function
In-Reply-To: <CAF8bMcbBNq62R-HQh_JWp9qAtJhJZaNOL=AKsQOW8k6A4SQaCw@mail.gmail.com>
References: <CADjaWvRc8i9ZLijjeYVAyus5mK436FT88Fd_nLkSi2x7o1_hkQ@mail.gmail.com>
 <5c2aadd0-aac9-bff2-57d9-5440ffcc9ab8@statistik.tu-dortmund.de>
 <CADjaWvQFWuiUyRWh=40iDj4QwOHcLMXNYp-=oH2ccfnvXy=YQw@mail.gmail.com>
 <YQBPR0101MB1026BAE38685D6A8FE88EF08BAFC0@YQBPR0101MB1026.CANPRD01.PROD.OUTLOOK.COM>
 <CADjaWvSeEz8CZS==z9n9SB5OkiR0OureTu6=ZEYOwANZreJYUw@mail.gmail.com>
 <CAF8bMcbBNq62R-HQh_JWp9qAtJhJZaNOL=AKsQOW8k6A4SQaCw@mail.gmail.com>
Message-ID: <CADjaWvQifYmZOiWzNgvQsv6CrE_1cOSCo0qSQf16V71DMUU2Zw@mail.gmail.com>

Thanks for all the answers, I modified it to print function and it fixed
the problem.

Best regards,
Rami Krispin

On Wed, Feb 7, 2018 at 3:44 PM, William Dunlap <wdunlap at tibco.com> wrote:

> Instead of help(oldFunction) giving the example
>     oldFunction(x = something, option = "XYZ")
> show the user, via comments in the example, how to convert the old usage
> to the new
>     # replace oldFunction(x = something, option = "XYZ") by
>     newFunction(object = log(something), method = "XYZ-log")
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
> On Wed, Feb 7, 2018 at 10:49 AM, Rami Krispin <rami.krispin at gmail.com>
> wrote:
>
>> I follow the example of the R Packages book about depreciating a function
>> which can be find here:
>> http://r-pkgs.had.co.nz/release.html
>>
>> Is there another method to rename a function name? maybe to print message
>> without triggering warning?
>>
>> Thanks!
>>
>> On Wed, Feb 7, 2018 at 1:36 PM, Maxime Turgeon <
>> maxime.turgeon at mail.mcgill.ca> wrote:
>>
>> > Hi Rami,
>> >
>> >
>> > Is there a reason for still using the deprecated functions in your
>> > examples? Because that's what's triggering the warnings.
>> >
>> >
>> > Best,
>> >
>> > Max
>> > ------------------------------
>> > *From:* R-package-devel <r-package-devel-bounces at r-project.org> on
>> behalf
>> > of Rami Krispin <rami.krispin at gmail.com>
>> > *Sent:* February 7, 2018 1:32:37 PM
>> > *To:* Uwe Ligges
>> > *Cc:* r-package-devel at r-project.org
>> > *Subject:* Re: [R-pkg-devel] Depreciate Function
>>
>> >
>> > Yes, I am keeping the old version and passing the function parameters
>> into
>> > the new version.
>> >
>> > I forgot in my previous email to add the log:
>> > https://win-builder.r-project.org/incoming_pretest/180207_
>> > 135041_TSstudio_011/00check.log
>> >
>> > and here is an example of the function that triggers that warning
>> > https://github.com/RamiKrispin/TSstudio/blob/master/R/ts_seasonal.R
>> >
>> > Thanks!
>> >
>> > On Wed, Feb 7, 2018 at 10:54 AM, Uwe Ligges
>> <ligges at statistik.tu-dortmund.
>> > de
>> > > wrote:
>> >
>> > > Not sure where you get the warning. I guess only at places where you
>> > still
>> > > use the old variant?
>> > >
>> > > Best,
>> > > Uwe Ligges
>> > >
>> > >
>> > >
>> > > On 07.02.2018 16:38, Rami Krispin wrote:
>> > >
>> > >>   Hello all,
>> > >>
>> > >> I am trying to depreciate functions and replace them with a different
>> > >> function in the new version of the package, using the Depreciate
>> > function
>> > >> which triggers warnings during the package submission to CRAN. For
>> > >> example,
>> > >> I am replacing the function seasonal_ly with the function ts_seasonal
>> > >> using
>> > >> the following method:
>> > >>
>> > >>     - export both of the functions
>> > >>     - aliases seasonal_ly
>> > >>     - pass the arguments of the new function to the old function and
>> use
>> > >> the
>> > >>     Depreciate function to trigger a warning about the depreciating
>> of
>> > the
>> > >>     function and the name of the new function.
>> > >>
>> > >> The code is available over here:
>> > >> https://github.com/RamiKrispin/TSstudio/blob/master/R/ts_seasonal.R
>> > >>
>> > >> Any suggestions?
>> > >>
>> > >> Thank you in advance!
>> > >>
>> > >> Best regards,
>> > >> Rami Krispin
>> > >>
>> > >>         [[alternative HTML version deleted]]
>> > >>
>> > >> ______________________________________________
>> > >> R-package-devel at r-project.org mailing list
>> > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> > >>
>> > >>
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>

	[[alternative HTML version deleted]]


From r.turner at auckland.ac.nz  Thu Feb  8 21:35:31 2018
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Fri, 9 Feb 2018 09:35:31 +1300
Subject: [R-pkg-devel] [FORGED] Re:  Depreciate Function
In-Reply-To: <CADjaWvSeEz8CZS==z9n9SB5OkiR0OureTu6=ZEYOwANZreJYUw@mail.gmail.com>
References: <CADjaWvRc8i9ZLijjeYVAyus5mK436FT88Fd_nLkSi2x7o1_hkQ@mail.gmail.com>
 <5c2aadd0-aac9-bff2-57d9-5440ffcc9ab8@statistik.tu-dortmund.de>
 <CADjaWvQFWuiUyRWh=40iDj4QwOHcLMXNYp-=oH2ccfnvXy=YQw@mail.gmail.com>
 <YQBPR0101MB1026BAE38685D6A8FE88EF08BAFC0@YQBPR0101MB1026.CANPRD01.PROD.OUTLOOK.COM>
 <CADjaWvSeEz8CZS==z9n9SB5OkiR0OureTu6=ZEYOwANZreJYUw@mail.gmail.com>
Message-ID: <707ab862-8ab5-ae36-3671-7148a9b42795@auckland.ac.nz>


On 08/02/18 07:49, Rami Krispin wrote:

> I follow the example of the R Packages book about depreciating a function

<SNIP>

It would be helpful if you were to distinguish between the words 
"deprecate" and "depreciate".  They are *VERY* different words.

cheers,

Rolf Turner

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From edd at debian.org  Thu Feb  8 23:01:35 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 8 Feb 2018 16:01:35 -0600
Subject: [R-pkg-devel] R-devel warning: You used a knitr feature that
 depends on the digest package.
In-Reply-To: <alpine.DEB.2.20.1802071445500.2898@luke-Latitude>
References: <cdc12aa4-4082-8a6f-3175-85bb09588b14@auckland.ac.nz>
 <CABtg=KmyzobBZDtDeHviDM7xB3T_Wfq_JkAdaPn=_O4xKHLf5Q@mail.gmail.com>
 <23162.47234.494615.13894@stat.math.ethz.ch>
 <alpine.DEB.2.20.1802071445500.2898@luke-Latitude>
Message-ID: <23164.51391.956621.103399@rob.eddelbuettel.com>


On 7 February 2018 at 15:03, luke-tierney at uiowa.edu wrote:
| The problem is that this is an indirect dependency with knitr needing
| digest and codetools to implement a feature (cacheing) that is being
| asked for. And there is no obvious way (to me at least) of finding out
| that these are needed for this feature. If knitr marked these as
| Depends rather than Suggests there would be no problem. Depends seems
| more in line with the extensions manual that Suggests in this case.

There are more examples.  A vignette of mine used a popular plotting package
and some its standard examples -- which deploy mgcv::gam() to smooth, and of
course without testing if mgcv was available.  Which promptly blows up in a
stringent CRAN test of vignette dependencies.

Something used _unconditionally_ is not a Suggests.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From georgi.boshnakov at manchester.ac.uk  Fri Feb  9 09:09:04 2018
From: georgi.boshnakov at manchester.ac.uk (Georgi Boshnakov)
Date: Fri, 9 Feb 2018 08:09:04 +0000
Subject: [R-pkg-devel] discovering if a function in a package is called
 under RStudio
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F64CACC@MBXP01.ds.man.ac.uk>

Hi,

Is there a canonical way for a function to discover if it has been called in a session under RStudio?
I looked the at the options() but none seems to be dedicated to this.

Thanks,
Georgi Boshnakov



From Joris.Meys at ugent.be  Fri Feb  9 10:09:02 2018
From: Joris.Meys at ugent.be (Joris Meys)
Date: Fri, 9 Feb 2018 10:09:02 +0100
Subject: [R-pkg-devel] discovering if a function in a package is called
 under RStudio
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F64CACC@MBXP01.ds.man.ac.uk>
References: <438D2EC9EAFE5946B2D5864670EA468E018F64CACC@MBXP01.ds.man.ac.uk>
Message-ID: <CAO1zAVaN6jvgtNtJTeGqBoiqjswpiTpnHgoOqUySZU=_q=E1rg@mail.gmail.com>

Hi,

you can use rstudioapi::isAvailable() for that. There's other packages with
similar functionality (eg the assertive package), and you can always check
whether Sys.getenv("RSTUDIO") == "1".
Cheers
Joris


On Fri, Feb 9, 2018 at 9:09 AM, Georgi Boshnakov <
georgi.boshnakov at manchester.ac.uk> wrote:

> Hi,
>
> Is there a canonical way for a function to discover if it has been called
> in a session under RStudio?
> I looked the at the options() but none seems to be dedicated to this.
>
> Thanks,
> Georgi Boshnakov
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From georgi.boshnakov at manchester.ac.uk  Fri Feb  9 10:22:59 2018
From: georgi.boshnakov at manchester.ac.uk (Georgi Boshnakov)
Date: Fri, 9 Feb 2018 09:22:59 +0000
Subject: [R-pkg-devel] discovering if a function in a package is called
 under RStudio
In-Reply-To: <CAO1zAVaN6jvgtNtJTeGqBoiqjswpiTpnHgoOqUySZU=_q=E1rg@mail.gmail.com>
References: <438D2EC9EAFE5946B2D5864670EA468E018F64CACC@MBXP01.ds.man.ac.uk>
 <CAO1zAVaN6jvgtNtJTeGqBoiqjswpiTpnHgoOqUySZU=_q=E1rg@mail.gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F64CAEC@MBXP01.ds.man.ac.uk>

Many thanks, I should have looked at rstudioapi, from rstudioapi::isAvailable():

> .Platform$GUI
[1] "RStudio"

Georgi

From: jorismeys at gmail.com [mailto:jorismeys at gmail.com] On Behalf Of Joris Meys
Sent: 09 February 2018 09:09
To: Georgi Boshnakov
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] discovering if a function in a package is called under RStudio

Hi,
you can use rstudioapi::isAvailable() for that. There's other packages with similar functionality (eg the assertive package), and you can always check whether Sys.getenv("RSTUDIO") == "1".
Cheers
Joris


On Fri, Feb 9, 2018 at 9:09 AM, Georgi Boshnakov <georgi.boshnakov at manchester.ac.uk<mailto:georgi.boshnakov at manchester.ac.uk>> wrote:
Hi,

Is there a canonical way for a function to discover if it has been called in a session under RStudio?
I looked the at the options() but none seems to be dedicated to this.

Thanks,
Georgi Boshnakov


______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel



--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From huw.campbell at gmail.com  Fri Feb  9 14:38:50 2018
From: huw.campbell at gmail.com (Huw Campbell)
Date: Sat, 10 Feb 2018 00:38:50 +1100
Subject: [R-pkg-devel] Hedgehog property based testing
Message-ID: <CAJGqWSOfda4zBT_HE=hA8tAcx5DFnz+a3vu1juC8eg5_6YECEQ@mail.gmail.com>

Hi all,

I have ported hedgehog, a property based testing library
<https://github.com/hedgehogqa/r-hedgehog> from Haskell to R, and would
really like folks to use it and test the API hard before I release it on
CRAN. I have been using it with great success for my projects for a while;
and have also uncovered a few real bugs in R libraries in the wild.

Hedgehog is similar to *quickcheck* in philosophy and fully compatible with
Hadley Wickham's *testthat* library, so should be easy to integrate. The
idea is to write property tests like this:

test_that("Reverse of reverse is identity",
  forall(gen.c(gen.element(1:100)), function(xs) expect_equal(rev(rev(xs)), xs))
)

Give it a shot and please do hit me up with any questions.

For all that I like about R, I think it can be tough to write robust
code which handles all the edge
cases one could throw at it, so great testing is invaluable.

Cheers,
Huw

	[[alternative HTML version deleted]]


From jtelleria.rproject at gmail.com  Fri Feb  9 21:13:58 2018
From: jtelleria.rproject at gmail.com (Juan Telleria Ruiz de Aguirre)
Date: Fri, 9 Feb 2018 21:13:58 +0100
Subject: [R-pkg-devel] 
 Fwd: Collaboration Request: h2o R Package Function Cheatsheet
In-Reply-To: <CAPtbhHxnZB6=Ns=ycdLo-kUj2gtBaygESD=yoKmTzcXADD+CrQ@mail.gmail.com>
References: <CAJXDcw3ybr7byDCms8=dCZaq2S6zpJh1KRuWNj9L7E4D5wzQ3w@mail.gmail.com>
 <CAJXDcw2mM2gQnLmO=4veGCrKOFMQfknGLLm=7TQ6q_PF2ScVFg@mail.gmail.com>
 <CAPtbhHxnZB6=Ns=ycdLo-kUj2gtBaygESD=yoKmTzcXADD+CrQ@mail.gmail.com>
Message-ID: <CAJXDcw1PerKuQveFfkpj8gLnOv1vY5oaWVHbvXNDcy3VQhFQ_A@mail.gmail.com>

Yes,

Thank you for the tips Suzen.

I will try to finish it in a couple of weeks from now, hope it is useful.

Kind regards,
Juan Telleria

2018-02-04 23:49 GMT+01:00 Suzen, Mehmet <suzen at acm.org>:
> Dear Juan,
>
> A good start. A suggestion for versioning, instead of versioning on
> file names, maybe you can use git tags for release numbers. Github
> will create a release bundle with you release tag.  RStudio has nice
> templates for cheatsheets too [1], I think you use their template  and
> possibly you could contribute there.
>
> Best,
> -m
>
> [1] https://www.rstudio.com/resources/cheatsheets/how-to-contribute-a-cheatsheet/
>
>
> Mehmet S?zen
> <suzen at acm.org>
>
>
> On 3 February 2018 at 23:00, Juan Telleria Ruiz de Aguirre
> <jtelleria.rproject at gmail.com> wrote:
>> Dear R Package Developers,
>>
>> I have just started doing a cheatsheet for h2o R Package:
>>
>> https://cran.r-project.org/web/packages/h2o/index.html
>>
>> So if anyone is interested in contribution, I attach what I have done
>> till now in Github:
>>
>> https://github.com/jtelleria/H2O-Cheatsheet
>>
>> A H2O.ai Statistical Algorithms Cheatsheet already exists, but the new
>> one will be focused on R h2o package functions:
>>
>> https://github.com/h2oai/h2o-tutorials/blob/master/training/h2o_algos/h2o_algos_cheat_sheet_04_25_17.pdf
>>
>> Kind regards,
>> Juan Telleria
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From baptiste.auguie at gmail.com  Sun Feb 11 07:13:40 2018
From: baptiste.auguie at gmail.com (Baptiste Auguie)
Date: Sun, 11 Feb 2018 19:13:40 +1300
Subject: [R-pkg-devel] Lapack: undefined symbol: zgbsv_
In-Reply-To: <23097.4877.497072.436426@bud.eddelbuettel.com>
References: <CANLFJPrTrtSGbOuiR1N9FmKu_UP1Faj=K2FhgLRAnduRTjZU+w@mail.gmail.com>
 <23094.64508.266861.133759@bud.eddelbuettel.com>
 <23095.705.569686.896207@bud.eddelbuettel.com>
 <23095.2063.222182.538945@bud.eddelbuettel.com>
 <CANLFJPoGuOHpAfr47PHLP8iKKzZF90MQV8_Owpi5ReDLaedf-g@mail.gmail.com>
 <235be197-52f3-51c1-cacd-c25f298c78f7@r-institute.com>
 <23095.49327.652350.981613@bud.eddelbuettel.com>
 <CANLFJPpqiqfH_SPcuAZOWVk9n2dvdtr+8+t2z-s8bZ8-Y3r8bQ@mail.gmail.com>
 <650d5f59-a959-2f28-cec2-a37c790b6c78@r-institute.com>
 <23097.4877.497072.436426@bud.eddelbuettel.com>
Message-ID: <CANLFJPoCGnn1uaNRs1s7pJ7N-8vg3VAK8tgr4MooDX=kDX5KPg@mail.gmail.com>

Hi,

Sorry I never found the time to put this issue to rest. My cda package has
now been removed from CRAN because Armadillo's update on 'banded
matrices' broke
it on various platforms, and I've had users enquire about the situation. As
far as I can tell RcppArmadillo no longer enables the solution of complex
linear systems on all platforms (see below). I'm happy to contribute a new
test for this to help future-proof this recurring issue, but resolving the
underlying issue is beyond me.

For the sake of clarity and concreteness I've put a minimal example package
here:

https://github.com/baptiste/isolve

which builds on my local mac but fails the online r-hub build
(interestingly, on a linux machine, which also puzzled me about cda's logs)

https://builder.r-hub.io/status/isolve_1.0.tar.gz-757573eaf5b0cb30d8154d7b8f7e2bc7

Thanks for any advice,

baptiste






On 20 December 2017 at 02:24, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 19 December 2017 at 13:41, Ralf Stubner wrote:
> | On 19.12.2017 09:38, Baptiste Auguie wrote:
> | > Thanks for the pointer to `arma::solve_opts::no_band`, it sounds like a
> | > good solution (assuming the compiler will then skip all the parts
> | > related to banded inversion routines). I've been unable to test it so
> | > far; I haven't managed to reproduce the error reported on CRAN on a
> mac.
> |
> | Reproducing this error is not easy. I was able to do so using docker
>
> Just work on Windows, or on any R built so that its internal BLAS are
> used. You can force that via configure at build time.
>
> | with
> | https://github.com/rocker-org/rocker-versioned/blob/master/
> r-ver/3.4.3/Dockerfile
> | as starting point. If you remove lines 30 and 97 (openblas-dev and
> | --with-blas), you can build a docker image with R included that uses the
> | BLAS and LAPACK supplied by R.
> |
> | I have given this a try and installing 'cda' in such a image does indeed
> | reproduce the error. Unfortunately adding 'arma::solve_opts::no_band' to
> | the two places where arma::solve is used did not help in my tests :-(
>
> :-(
>
> Maybe Arma needs another patch.
>
> | > The 'crippled Lapack' macro was useful as a workaround in the past but
> | > I'm not sure of its exact mode of operation so I'm reluctant to set
> | > something to "cripple" the code (does it target only those routines
> that
> | > are found missing, or is it more of a blanket switch with no
> fine-tuning?).
> |
> | I think it is a blanket switch that will affect also those methods that
> | where already added in the past. So this would be only a temporary
> | solution, but I think that's what you need right now.
> |
> | BTW, setting ARMA_CRIPPLED_LAPACK is more difficult than I thought since
> | it is #undefed in the RcppArmadillo-Config. Short of editing that file,
> | you can add this to src/Makevars
> |
> | PKG_CXXFLAGS=-DARMA_CRIPPLED_LAPACK
> | -DRcppArmadillo__RcppArmadilloConfigGenerated__h
> |
> | I hope there is a better way ...
>
> Set the #define after the #include <RcppArmadillo.h> ?
>
> RcppArmadillo is just the man in the middle.  This is between Baptiste
> relying on something that is now always available, and Conrad assuming it
> is.
>
> I think Baptiste will need to decompose all these pieces and rearrange
> then.
> Or just build his own solve() method based on older Armadillo code?
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From edd at debian.org  Sun Feb 11 16:52:54 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 11 Feb 2018 09:52:54 -0600
Subject: [R-pkg-devel] Lapack: undefined symbol: zgbsv_
In-Reply-To: <CANLFJPoCGnn1uaNRs1s7pJ7N-8vg3VAK8tgr4MooDX=kDX5KPg@mail.gmail.com>
References: <CANLFJPrTrtSGbOuiR1N9FmKu_UP1Faj=K2FhgLRAnduRTjZU+w@mail.gmail.com>
 <23094.64508.266861.133759@bud.eddelbuettel.com>
 <23095.705.569686.896207@bud.eddelbuettel.com>
 <23095.2063.222182.538945@bud.eddelbuettel.com>
 <CANLFJPoGuOHpAfr47PHLP8iKKzZF90MQV8_Owpi5ReDLaedf-g@mail.gmail.com>
 <235be197-52f3-51c1-cacd-c25f298c78f7@r-institute.com>
 <23095.49327.652350.981613@bud.eddelbuettel.com>
 <CANLFJPpqiqfH_SPcuAZOWVk9n2dvdtr+8+t2z-s8bZ8-Y3r8bQ@mail.gmail.com>
 <650d5f59-a959-2f28-cec2-a37c790b6c78@r-institute.com>
 <23097.4877.497072.436426@bud.eddelbuettel.com>
 <CANLFJPoCGnn1uaNRs1s7pJ7N-8vg3VAK8tgr4MooDX=kDX5KPg@mail.gmail.com>
Message-ID: <23168.26326.305960.585359@rob.eddelbuettel.com>


On 11 February 2018 at 19:13, Baptiste Auguie wrote:
| Hi,
| 
| Sorry I never found the time to put this issue to rest. My cda package has
| now been removed from CRAN because Armadillo's update on 'banded
| matrices' broke
| it on various platforms, and I've had users enquire about the situation. As
| far as I can tell RcppArmadillo no longer enables the solution of complex
| linear systems on all platforms (see below). I'm happy to contribute a new

I don't think that is a fair statement.

Armadillo, and RcppArmadillo, offer you an elegant, easy-to-use and rather
performant interface to underlying LAPACK code.  In the R universe, we rely
on the LAPACK "brought to us by R". That generally works but ...

... you are, and have been, pushing the edge further by requiring complex
data types---and now Conrad chose to rely on another LAPACK routine. Bang.

| test for this to help future-proof this recurring issue, but resolving the
| underlying issue is beyond me.

That's the problem.

You may need to look at other package with, when needed, extend offered
libraries.  I.e. I also stand behind BH and hence parts of Boost, but
sometimes packages (e.g. in the stan world) need extra functions and so they
package them.  Upstream MLPACK is another example, and it extends Armadillo
where needed.

Dirk
 
| For the sake of clarity and concreteness I've put a minimal example package
| here:
| 
| https://github.com/baptiste/isolve
| 
| which builds on my local mac but fails the online r-hub build
| (interestingly, on a linux machine, which also puzzled me about cda's logs)
| 
| https://builder.r-hub.io/status/isolve_1.0.tar.gz-757573eaf5b0cb30d8154d7b8f7e2bc7
| 
| Thanks for any advice,
| 
| baptiste
| 
| 
| 
| 
| 
| 
| On 20 December 2017 at 02:24, Dirk Eddelbuettel <edd at debian.org> wrote:
| 
| >
| > On 19 December 2017 at 13:41, Ralf Stubner wrote:
| > | On 19.12.2017 09:38, Baptiste Auguie wrote:
| > | > Thanks for the pointer to `arma::solve_opts::no_band`, it sounds like a
| > | > good solution (assuming the compiler will then skip all the parts
| > | > related to banded inversion routines). I've been unable to test it so
| > | > far; I haven't managed to reproduce the error reported on CRAN on a
| > mac.
| > |
| > | Reproducing this error is not easy. I was able to do so using docker
| >
| > Just work on Windows, or on any R built so that its internal BLAS are
| > used. You can force that via configure at build time.
| >
| > | with
| > | https://github.com/rocker-org/rocker-versioned/blob/master/
| > r-ver/3.4.3/Dockerfile
| > | as starting point. If you remove lines 30 and 97 (openblas-dev and
| > | --with-blas), you can build a docker image with R included that uses the
| > | BLAS and LAPACK supplied by R.
| > |
| > | I have given this a try and installing 'cda' in such a image does indeed
| > | reproduce the error. Unfortunately adding 'arma::solve_opts::no_band' to
| > | the two places where arma::solve is used did not help in my tests :-(
| >
| > :-(
| >
| > Maybe Arma needs another patch.
| >
| > | > The 'crippled Lapack' macro was useful as a workaround in the past but
| > | > I'm not sure of its exact mode of operation so I'm reluctant to set
| > | > something to "cripple" the code (does it target only those routines
| > that
| > | > are found missing, or is it more of a blanket switch with no
| > fine-tuning?).
| > |
| > | I think it is a blanket switch that will affect also those methods that
| > | where already added in the past. So this would be only a temporary
| > | solution, but I think that's what you need right now.
| > |
| > | BTW, setting ARMA_CRIPPLED_LAPACK is more difficult than I thought since
| > | it is #undefed in the RcppArmadillo-Config. Short of editing that file,
| > | you can add this to src/Makevars
| > |
| > | PKG_CXXFLAGS=-DARMA_CRIPPLED_LAPACK
| > | -DRcppArmadillo__RcppArmadilloConfigGenerated__h
| > |
| > | I hope there is a better way ...
| >
| > Set the #define after the #include <RcppArmadillo.h> ?
| >
| > RcppArmadillo is just the man in the middle.  This is between Baptiste
| > relying on something that is now always available, and Conrad assuming it
| > is.
| >
| > I think Baptiste will need to decompose all these pieces and rearrange
| > then.
| > Or just build his own solve() method based on older Armadillo code?
| >
| > Dirk
| >
| > --
| > http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
| >

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From baptiste.auguie at gmail.com  Mon Feb 12 10:16:43 2018
From: baptiste.auguie at gmail.com (Baptiste Auguie)
Date: Mon, 12 Feb 2018 22:16:43 +1300
Subject: [R-pkg-devel] Lapack: undefined symbol: zgbsv_
In-Reply-To: <23168.26326.305960.585359@rob.eddelbuettel.com>
References: <CANLFJPrTrtSGbOuiR1N9FmKu_UP1Faj=K2FhgLRAnduRTjZU+w@mail.gmail.com>
 <23094.64508.266861.133759@bud.eddelbuettel.com>
 <23095.705.569686.896207@bud.eddelbuettel.com>
 <23095.2063.222182.538945@bud.eddelbuettel.com>
 <CANLFJPoGuOHpAfr47PHLP8iKKzZF90MQV8_Owpi5ReDLaedf-g@mail.gmail.com>
 <235be197-52f3-51c1-cacd-c25f298c78f7@r-institute.com>
 <23095.49327.652350.981613@bud.eddelbuettel.com>
 <CANLFJPpqiqfH_SPcuAZOWVk9n2dvdtr+8+t2z-s8bZ8-Y3r8bQ@mail.gmail.com>
 <650d5f59-a959-2f28-cec2-a37c790b6c78@r-institute.com>
 <23097.4877.497072.436426@bud.eddelbuettel.com>
 <CANLFJPoCGnn1uaNRs1s7pJ7N-8vg3VAK8tgr4MooDX=kDX5KPg@mail.gmail.com>
 <23168.26326.305960.585359@rob.eddelbuettel.com>
Message-ID: <CANLFJPqGCiSag2-8XCof++0z+F78XG=3gyLnoz4tzB=feh7NoA@mail.gmail.com>

On 12 February 2018 at 04:52, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 11 February 2018 at 19:13, Baptiste Auguie wrote:
> | Hi,
> |
> | Sorry I never found the time to put this issue to rest. My cda package
> has
> | now been removed from CRAN because Armadillo's update on 'banded
> | matrices' broke
> | it on various platforms, and I've had users enquire about the situation.
> As
> | far as I can tell RcppArmadillo no longer enables the solution of complex
> | linear systems on all platforms (see below). I'm happy to contribute a
> new
>
> I don't think that is a fair statement.
>
> Armadillo, and RcppArmadillo, offer you an elegant, easy-to-use and rather
> performant interface to underlying LAPACK code.  In the R universe, we rely
> on the LAPACK "brought to us by R". That generally works but ...
>
> ... you are, and have been, pushing the edge further by requiring complex
> data types---and now Conrad chose to rely on another LAPACK routine. Bang.
>
>

As far as I can tell Armadillo added specialised methods for banded
matrices; the routines used to solve non-banded matrices probably haven't
changed.

Coming back to the error itself, what puzzles me is that it seems to be
precisely the OSes relying on external Lapack that have a problem. It
compiles fine on Windows,
https://builder.r-hub.io/status/isolve_1.0.tar.gz-e3da3c1b83
26e62e4e14a913e5bbb5a4

So it seems the problem is distinct from the previous issues with missing
Lapack routines.



> | test for this to help future-proof this recurring issue, but resolving
> the
> | underlying issue is beyond me.
>
> That's the problem.
>
> You may need to look at other package with, when needed, extend offered
> libraries.  I.e. I also stand behind BH and hence parts of Boost, but
> sometimes packages (e.g. in the stan world) need extra functions and so
> they
> package them.  Upstream MLPACK is another example, and it extends Armadillo
> where needed.
>
> Dirk
>
> | For the sake of clarity and concreteness I've put a minimal example
> package
> | here:
> |
> | https://github.com/baptiste/isolve
> |
> | which builds on my local mac but fails the online r-hub build
> | (interestingly, on a linux machine, which also puzzled me about cda's
> logs)
> |
> | https://builder.r-hub.io/status/isolve_1.0.tar.gz-757573eaf5
> b0cb30d8154d7b8f7e2bc7
> |
> | Thanks for any advice,
> |
> | baptiste
> |
> |
> |
> |
> |
> |
> | On 20 December 2017 at 02:24, Dirk Eddelbuettel <edd at debian.org> wrote:
> |
> | >
> | > On 19 December 2017 at 13:41, Ralf Stubner wrote:
> | > | On 19.12.2017 09:38, Baptiste Auguie wrote:
> | > | > Thanks for the pointer to `arma::solve_opts::no_band`, it sounds
> like a
> | > | > good solution (assuming the compiler will then skip all the parts
> | > | > related to banded inversion routines). I've been unable to test it
> so
> | > | > far; I haven't managed to reproduce the error reported on CRAN on a
> | > mac.
> | > |
> | > | Reproducing this error is not easy. I was able to do so using docker
> | >
> | > Just work on Windows, or on any R built so that its internal BLAS are
> | > used. You can force that via configure at build time.
> | >
> | > | with
> | > | https://github.com/rocker-org/rocker-versioned/blob/master/
> | > r-ver/3.4.3/Dockerfile
> | > | as starting point. If you remove lines 30 and 97 (openblas-dev and
> | > | --with-blas), you can build a docker image with R included that uses
> the
> | > | BLAS and LAPACK supplied by R.
> | > |
> | > | I have given this a try and installing 'cda' in such a image does
> indeed
> | > | reproduce the error. Unfortunately adding
> 'arma::solve_opts::no_band' to
> | > | the two places where arma::solve is used did not help in my tests :-(
> | >
> | > :-(
> | >
> | > Maybe Arma needs another patch.
> | >
> | > | > The 'crippled Lapack' macro was useful as a workaround in the past
> but
> | > | > I'm not sure of its exact mode of operation so I'm reluctant to set
> | > | > something to "cripple" the code (does it target only those routines
> | > that
> | > | > are found missing, or is it more of a blanket switch with no
> | > fine-tuning?).
> | > |
> | > | I think it is a blanket switch that will affect also those methods
> that
> | > | where already added in the past. So this would be only a temporary
> | > | solution, but I think that's what you need right now.
> | > |
> | > | BTW, setting ARMA_CRIPPLED_LAPACK is more difficult than I thought
> since
> | > | it is #undefed in the RcppArmadillo-Config. Short of editing that
> file,
> | > | you can add this to src/Makevars
> | > |
> | > | PKG_CXXFLAGS=-DARMA_CRIPPLED_LAPACK
> | > | -DRcppArmadillo__RcppArmadilloConfigGenerated__h
> | > |
> | > | I hope there is a better way ...
> | >
> | > Set the #define after the #include <RcppArmadillo.h> ?
> | >
> | > RcppArmadillo is just the man in the middle.  This is between Baptiste
> | > relying on something that is now always available, and Conrad assuming
> it
> | > is.
> | >
> | > I think Baptiste will need to decompose all these pieces and rearrange
> | > then.
> | > Or just build his own solve() method based on older Armadillo code?
> | >
> | > Dirk
> | >
> | > --
> | > http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> | >
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From edd at debian.org  Mon Feb 12 13:05:17 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Mon, 12 Feb 2018 06:05:17 -0600
Subject: [R-pkg-devel] Lapack: undefined symbol: zgbsv_
In-Reply-To: <CANLFJPqGCiSag2-8XCof++0z+F78XG=3gyLnoz4tzB=feh7NoA@mail.gmail.com>
References: <CANLFJPrTrtSGbOuiR1N9FmKu_UP1Faj=K2FhgLRAnduRTjZU+w@mail.gmail.com>
 <23094.64508.266861.133759@bud.eddelbuettel.com>
 <23095.705.569686.896207@bud.eddelbuettel.com>
 <23095.2063.222182.538945@bud.eddelbuettel.com>
 <CANLFJPoGuOHpAfr47PHLP8iKKzZF90MQV8_Owpi5ReDLaedf-g@mail.gmail.com>
 <235be197-52f3-51c1-cacd-c25f298c78f7@r-institute.com>
 <23095.49327.652350.981613@bud.eddelbuettel.com>
 <CANLFJPpqiqfH_SPcuAZOWVk9n2dvdtr+8+t2z-s8bZ8-Y3r8bQ@mail.gmail.com>
 <650d5f59-a959-2f28-cec2-a37c790b6c78@r-institute.com>
 <23097.4877.497072.436426@bud.eddelbuettel.com>
 <CANLFJPoCGnn1uaNRs1s7pJ7N-8vg3VAK8tgr4MooDX=kDX5KPg@mail.gmail.com>
 <23168.26326.305960.585359@rob.eddelbuettel.com>
 <CANLFJPqGCiSag2-8XCof++0z+F78XG=3gyLnoz4tzB=feh7NoA@mail.gmail.com>
Message-ID: <23169.33533.587660.205551@rob.eddelbuettel.com>


On 12 February 2018 at 22:16, Baptiste Auguie wrote:
| As far as I can tell Armadillo added specialised methods for banded
| matrices; the routines used to solve non-banded matrices probably haven't
| changed.
| 
| Coming back to the error itself, what puzzles me is that it seems to be
| precisely the OSes relying on external Lapack that have a problem. It
| compiles fine on Windows,
| https://builder.r-hub.io/status/isolve_1.0.tar.gz-e3da3c1b83
| 26e62e4e14a913e5bbb5a4
| 
| So it seems the problem is distinct from the previous issues with missing
| Lapack routines.

Maybe we are setting a more global "no advanced lapack" for Windows that
assures success when we assume that the other system will always have it.

One thing you could try is to write a configure test in your package so that
at build time a compile+link for the particular symbol is made.

If the test succeeeds, export a new HAVE_XYZ_BANDED_ROUTINE define and then
convince Conrad to respect that flag.  Otherwise have the code fall back to
alternatives just like the Windows build.

Or, be brutal, and set '#define ARMA_CRIPPLED_LAPACK 1' everywhere.  See
lines 67 to 95 of RcppArmadillo's configure.ac:
https://github.com/RcppCore/RcppArmadillo/blob/master/configure.ac#L67-L95

I could generalize the use in inst/include/RcppArmadilloConfigGenerated.h.in
by respecting prior definitions, ie wrapping #ifndef around them.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From marlin- at gmx.cn  Mon Feb 12 23:51:11 2018
From: marlin- at gmx.cn (Jialin Ma)
Date: Tue, 13 Feb 2018 06:51:11 +0800
Subject: [R-pkg-devel] CMake on win-builder
Message-ID: <1518475871.2012.3.camel@gmx.cn>


Dear all,

I am trying to create a R interface to a C++ library which itself uses
cmake as its build tool.

For experimenting the idea, I copy the entire source of the library to
a sub-directory of "inst" and call "cmake" in the "configure" script,
then call "make", which generates a static library.

In another package, I write C code that interfacing with R and provide
the PKG_LIBS variable with the path of the static library.

This approach works on my machine (openSUSE), I would like to try to
port it to windows in future. Since this package needs cmake at build
time, is it possible to add cmake to the win-builder?
And I have found two previous discussions about cmake:

1. https://stat.ethz.ch/pipermail/r-package-devel/2015q2/000097.html
2. https://stat.ethz.ch/pipermail/r-package-devel/2016q2/000897.html

Also, I am in fact relative new to the build tools, do you have any
suggestions or comments on the approach taken? The two packages are:

1. https://github.com/marlin-na/Rlibsymengine (ship the C++ library)
2. https://github.com/marlin-na/symengine.R

Any help would be appreciated.

Thanks!
Jialin


From baptiste.auguie at gmail.com  Tue Feb 13 05:49:25 2018
From: baptiste.auguie at gmail.com (Baptiste Auguie)
Date: Tue, 13 Feb 2018 17:49:25 +1300
Subject: [R-pkg-devel] Lapack: undefined symbol: zgbsv_
In-Reply-To: <23169.33533.587660.205551@rob.eddelbuettel.com>
References: <CANLFJPrTrtSGbOuiR1N9FmKu_UP1Faj=K2FhgLRAnduRTjZU+w@mail.gmail.com>
 <23094.64508.266861.133759@bud.eddelbuettel.com>
 <23095.705.569686.896207@bud.eddelbuettel.com>
 <23095.2063.222182.538945@bud.eddelbuettel.com>
 <CANLFJPoGuOHpAfr47PHLP8iKKzZF90MQV8_Owpi5ReDLaedf-g@mail.gmail.com>
 <235be197-52f3-51c1-cacd-c25f298c78f7@r-institute.com>
 <23095.49327.652350.981613@bud.eddelbuettel.com>
 <CANLFJPpqiqfH_SPcuAZOWVk9n2dvdtr+8+t2z-s8bZ8-Y3r8bQ@mail.gmail.com>
 <650d5f59-a959-2f28-cec2-a37c790b6c78@r-institute.com>
 <23097.4877.497072.436426@bud.eddelbuettel.com>
 <CANLFJPoCGnn1uaNRs1s7pJ7N-8vg3VAK8tgr4MooDX=kDX5KPg@mail.gmail.com>
 <23168.26326.305960.585359@rob.eddelbuettel.com>
 <CANLFJPqGCiSag2-8XCof++0z+F78XG=3gyLnoz4tzB=feh7NoA@mail.gmail.com>
 <23169.33533.587660.205551@rob.eddelbuettel.com>
Message-ID: <CANLFJPqsUPuNBBL7M5tAU=y6XAnfOLj=3FHz=EogrKWdkbYpgQ@mail.gmail.com>

On 13 February 2018 at 01:05, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 12 February 2018 at 22:16, Baptiste Auguie wrote:
> | As far as I can tell Armadillo added specialised methods for banded
> | matrices; the routines used to solve non-banded matrices probably haven't
> | changed.
> |
> | Coming back to the error itself, what puzzles me is that it seems to be
> | precisely the OSes relying on external Lapack that have a problem. It
> | compiles fine on Windows,
> | https://builder.r-hub.io/status/isolve_1.0.tar.gz-e3da3c1b83
> | 26e62e4e14a913e5bbb5a4
> |
> | So it seems the problem is distinct from the previous issues with missing
> | Lapack routines.
>
> Maybe we are setting a more global "no advanced lapack" for Windows that
> assures success when we assume that the other system will always have it.
>

it sounds plausible, but it would be nice to know for sure. In particular,
it doesn't explain why the external Lapack on linux appears to be missing
these symbols (they're not very recent, as far as I can tell). I don't
really know how to figure this out, but it seems to be key.


> One thing you could try is to write a configure test in your package so
> that
> at build time a compile+link for the particular symbol is made.
>

I have no idea how to do this, and if did...


> If the test succeeeds, export a new HAVE_XYZ_BANDED_ROUTINE define and then
> convince Conrad to respect that flag.  Otherwise have the code fall back to
> alternatives just like the Windows build.
>

... IIRC Conrad made it clear in the past that he would not consider
further special cases for crippled Lapacks.


> Or, be brutal, and set '#define ARMA_CRIPPLED_LAPACK 1' everywhere.  See
> lines 67 to 95 of RcppArmadillo's configure.ac:
> https://github.com/RcppCore/RcppArmadillo/blob/master/configure.ac#L67-L95
>

while this might solve the CRAN problem, it doesn't feel right to enforce
the use of suboptimal routines throughout and on all platforms, including
those that do in fact provide a full-fledged external Lapack.


> I could generalize the use in inst/include/RcppArmadilloConf
> igGenerated.h.in
> by respecting prior definitions, ie wrapping #ifndef around them.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

b.

	[[alternative HTML version deleted]]


From ralf.stubner at r-institute.com  Tue Feb 13 10:07:10 2018
From: ralf.stubner at r-institute.com (Ralf Stubner)
Date: Tue, 13 Feb 2018 10:07:10 +0100
Subject: [R-pkg-devel] Lapack: undefined symbol: zgbsv_
In-Reply-To: <CANLFJPqsUPuNBBL7M5tAU=y6XAnfOLj=3FHz=EogrKWdkbYpgQ@mail.gmail.com>
References: <CANLFJPrTrtSGbOuiR1N9FmKu_UP1Faj=K2FhgLRAnduRTjZU+w@mail.gmail.com>
 <23094.64508.266861.133759@bud.eddelbuettel.com>
 <23095.705.569686.896207@bud.eddelbuettel.com>
 <23095.2063.222182.538945@bud.eddelbuettel.com>
 <CANLFJPoGuOHpAfr47PHLP8iKKzZF90MQV8_Owpi5ReDLaedf-g@mail.gmail.com>
 <235be197-52f3-51c1-cacd-c25f298c78f7@r-institute.com>
 <23095.49327.652350.981613@bud.eddelbuettel.com>
 <CANLFJPpqiqfH_SPcuAZOWVk9n2dvdtr+8+t2z-s8bZ8-Y3r8bQ@mail.gmail.com>
 <650d5f59-a959-2f28-cec2-a37c790b6c78@r-institute.com>
 <23097.4877.497072.436426@bud.eddelbuettel.com>
 <CANLFJPoCGnn1uaNRs1s7pJ7N-8vg3VAK8tgr4MooDX=kDX5KPg@mail.gmail.com>
 <23168.26326.305960.585359@rob.eddelbuettel.com>
 <CANLFJPqGCiSag2-8XCof++0z+F78XG=3gyLnoz4tzB=feh7NoA@mail.gmail.com>
 <23169.33533.587660.205551@rob.eddelbuettel.com>
 <CANLFJPqsUPuNBBL7M5tAU=y6XAnfOLj=3FHz=EogrKWdkbYpgQ@mail.gmail.com>
Message-ID: <1f288b33-8262-1096-0ab7-52343525569e@r-institute.com>

On 13.02.2018 05:49, Baptiste Auguie wrote:
> On 13 February 2018 at 01:05, Dirk Eddelbuettel <edd at debian.org
> <mailto:edd at debian.org>> wrote:
>     Maybe we are setting a more global "no advanced lapack" for Windows that
>     assures success when we assume that the other system will always
>     have it.
> 
> 
> it sounds plausible, but it would be nice to know for sure.

It is the case, c.f.
https://github.com/RcppCore/RcppArmadillo/blob/master/inst/include/RcppArmadilloConfig.h#L96-L106

> In
> particular, it doesn't explain why the external Lapack on linux appears
> to be missing these symbols (they're not very recent, as far as I can
> tell). I don't really know how to figure this out, but it seems to be key.

My understanding:

* On Windows internal LAPACK is used but it is not affected due to the
defines quoted above.
* At least Debian & Co but probably also other Linux distributions
compile R with external LAPACK and are not affected.
* CRAN (and probably r-hub) use R compiled with internal LAPACK and is
therefore affected.
* I do not understand why Mac OS is not affected. The FAQ [1] implies
that by default the internal BLAS/LAPACK is used. But then I do not see
the mentioned alternative libRblas.vecLib.dylib on a test system.

[1]
https://cran.r-project.org/bin/macosx/RMacOSX-FAQ.html#Which-BLAS-is-used-and-how-can-it-be-changed_003f


>     Or, be brutal, and set '#define ARMA_CRIPPLED_LAPACK 1' everywhere.? See
>     lines 67 to 95 of RcppArmadillo's configure.ac <http://configure.ac>:
>     https://github.com/RcppCore/RcppArmadillo/blob/master/configure.ac#L67-L95
> 
> while this might solve the CRAN problem, it doesn't feel right to
> enforce the use of suboptimal routines throughout and on all platforms,
> including those that do in fact provide a full-fledged external Lapack.?

You could use this as a first step to get the package back into CRAN.
Later on you can try to only set the flag when an internal LAPACK is
detected, similar to the way RcppArmadillo does it. If my understanding
above is correct, the number of users with ARMA_CRIPPLED_LAPACK in your
package but not in RcppArmadillo will be quite small.

Greetings
Ralf

-- 
Ralf Stubner
Senior Software Engineer / Trainer

R Institute GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 70 81 66
F: +49 331 23 70 81 67
M: +49 162 20 91 196

Mail: ralf.stubner at r-institute.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966 P
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Prof. Dr. Dr. Karl-Kuno Kunze


From kehld at ktk.pte.hu  Tue Feb 13 10:58:45 2018
From: kehld at ktk.pte.hu (=?windows-1250?Q?Kehl_D=E1niel?=)
Date: Tue, 13 Feb 2018 09:58:45 +0000
Subject: [R-pkg-devel] new package? - Sports data from transfermarkt.com
 using rvest
In-Reply-To: <CAB-BFRp5B7wJW79YLuG1SH81FzjX7S4EAoxzqyiv=FM0zVZZ5Q@mail.gmail.com>
References: <33D76D77E9AC4B438DA38B348ED6890D14D942CE@EMAIL.ktkdom.pte.hu>
 <CAJuCY5wBh=rYZqoQPaQJqGGXvTq4=iDOQzDtr9TGi4m9FHBBZQ@mail.gmail.com>,
 <CAB-BFRp5B7wJW79YLuG1SH81FzjX7S4EAoxzqyiv=FM0zVZZ5Q@mail.gmail.com>
Message-ID: <33D76D77E9AC4B438DA38B348ED6890D14DA394A@EMAIL.ktkdom.pte.hu>

Dear Peter and Thierry,

thank you for your answers. I indeed contacted transfermarkt.com and write this just to finish up this conversation.

Here is part of their answer:

"thank you for getting in touch with us. Basically our data is copyrighted under German law by Transfermarkt, so there is no license whatsoever. Therefore, we?re also no friends of data scraping and tend to block bots more and more.
Rather we support the scientific community by providing data sets for single purposes in a structured process."

Seems like this is a polite way of saying: do not create an R package with this purpose. My first package is going to be something else. :(

Thanks and have a great day,
Daniel


[http://wweb.ktk.pte.hu/info/email-alairas/Oktat%C3%B3k/Dr.%20KEHL%20D%C3%A1niel/magyar/image001.png]



        Dr. KEHL D?niel
adjunktus

[http://wweb.ktk.pte.hu/info/email-alairas/Oktat%C3%B3k/Dr.%20KEHL%20D%C3%A1niel/magyar/image002.png]
        P?CSI TUDOM?NYEGYETEM K?ZGAZDAS?GTUDOM?NYI KAR
K?zgazdas?gtan ?s ?konometria Int?zet
H-7622 P?cs, R?k?czi ?t 80. | www.ktk.pte.hu<http://www.ktk.pte.hu/>
+36 72 501 599/ 23144 | kehld at ktk.pte.hu<mailto:kehld at ktk.pte.hu>
________________________________
Felad?: Peter Meissner [retep.meissner at gmail.com]
K?ldve: 2018. janu?r 24. 18:59
C?mzett: Thierry Onkelinx
M?solatot kap: Kehl D?niel; r-package-devel at r-project.org
T?rgy: Re: [R-pkg-devel] new package? - Sports data from transfermarkt.com using rvest

Hey,

I am not a laywer but their terms are quite explicitly prohibiting redistribution of their data without written consent.

Now you might build a package that does not collect, store and redistributes the data but only allows to access the data provided there 'live' via some convenience functions. But I don't really know if that argument actually is valid in any legal sense.

To be on the safe side, you probably should contact them.

Best, Peter


Am 24.01.2018 12:13 nachm. schrieb "Thierry Onkelinx" <thierry.onkelinx at inbo.be<mailto:thierry.onkelinx at inbo.be>>:
Dear Daniel,

First of all you need to make sure that the licence of
transfermarkt.com<http://transfermarkt.com> allows the usage that you have intended. If that is
not clear from their website, then you should contact them rather than
us.

CRAN has several packages to assists in downloading data from online
sources. But the source has to allow that kind of usage.

Best regards,

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
AND FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be<mailto:thierry.onkelinx at inbo.be>
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be<http://www.inbo.be>

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no
more than asking him to perform a post-mortem examination: he may be
able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does
not ensure that a reasonable answer can be extracted from a given body
of data. ~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////




2018-01-23 16:27 GMT+01:00 Kehl D?niel <kehld at ktk.pte.hu<mailto:kehld at ktk.pte.hu>>:
> Dear List members,
>
> maybe this is not the right place to ask, if that is the case, please forward me to the right place.
> I developed some functions to download and transform football/soccer related data from transfermarkt.com<http://transfermarkt.com>.
> There are plans to create my first package based on these functions and of course develop them and add more later. As far as I know there is no API to that page, so I am using the rvest package.
> My question is: is this an OK thing to do? Should I contact transfermarkt.com<http://transfermarkt.com>? My german is not perfect (just like my english), this is what I've found on thier webpage. Does that mean one can not create a package related to that page? Or can't crawl at all? Or just not allowed to sell the data? If it is allowed, can one post the package on CRAN at the end?
>
> Please if any of you have experience in that or just show me where to ask, do not hesitate!
>
> LEGAL NOTICE
> ? Transfermarkt GmbH & Co. KG 2000-2018
>
> All rights reserved.
>
> Der Inhalt dieser Website ist urheberrechtlich gesch?tzt. Nachdruck, Aufnahme in Online-Dienste, Internet und Vervielf?ltigung auf Datentr?ger wie CD-ROM, DVD-ROM usw. d?rfen, auch auszugsweise, nur nach vorheriger schriftlicher Zustimmung durch Transfermarkt erfolgen. Eine kommerzielle Weitervermarktung des Inhalts ist untersagt.
>
> Transfermarkt haftet nicht f?r unverlangt eingesandte Inhalte, Manuskripte und Fotos. F?r Inhalte externer Links und fremde Inhalte ?bernimmt Transfermarkt keine Verantwortung.
>
> Thank you for all your insights and/or comments,
>
> best regards
> Daniel
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> Dr. KEHL D?niel
>
> adjunktus
>
>
>
>
>
> P?CSI TUDOM?NYEGYETEM K?ZGAZDAS?GTUDOM?NYI KAR
>
> K?zgazdas?gtan ?s ?konometria Int?zet
>
> H-7622 P?cs, R?k?czi ?t 80. | www.ktk.pte.hu<http://www.ktk.pte.hu>
>
> +36 72 501 599<tel:%2B36%2072%20501%20599>/ 23144 | kehld at ktk.pte.hu<mailto:kehld at ktk.pte.hu>
>
>
>
>
>
>
>
>
>
>
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From dpc10ster at gmail.com  Tue Feb 13 23:58:32 2018
From: dpc10ster at gmail.com (Dev Chakraborty)
Date: Tue, 13 Feb 2018 17:58:32 -0500
Subject: [R-pkg-devel] Solaris and ggplot2
Message-ID: <CADd2D4K_c9A0H8vXhi=7BN3RHgxX6=ekcdsVf=ur4G8vzriY7w@mail.gmail.com>

My package RJafroc, which is currently on CRAN, passes all operating
systems except solaris-x86-patched, and as a result has been flagged for
removal. Using R-hub builder, I am unable to reproduce the log file because
a required package, ggplot2, does not exist for Solaris. I found the
following conversation on GitHub at the following URL:
https://github.com/tidyverse/ggplot2/issues/2273 (the conversation is
reproduced below).

Could use any advice. Thanks.

Dev

**********************************************
tdhock commented on Sep 23, 2017
Hey there, it seems that ggplot2 on CRAN has an ERROR on solaris
https://www.r-project.org/nosvn/R.check/r-patched-so
laris-x86/ggplot2-00check.html because of a test about date scales that
does not pass. Do you have any plan to fix?

This is an issue for me because I have a package that imports ggplot2, and
I would like to use rhub to check it on solaris before submitting it to
CRAN. *However rhub can not perform the check because the ggplot2 package
is not available on solaris*. Here is the related issue at rhub
r-hub/rhub#83

 @hadley
 Owner
hadley commented on Oct 30, 2017
*Probably not, since solaris is going away.*

	[[alternative HTML version deleted]]


From csardi.gabor at gmail.com  Wed Feb 14 00:47:31 2018
From: csardi.gabor at gmail.com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 13 Feb 2018 23:47:31 +0000
Subject: [R-pkg-devel] Solaris and ggplot2
In-Reply-To: <CADd2D4K_c9A0H8vXhi=7BN3RHgxX6=ekcdsVf=ur4G8vzriY7w@mail.gmail.com>
References: <CADd2D4K_c9A0H8vXhi=7BN3RHgxX6=ekcdsVf=ur4G8vzriY7w@mail.gmail.com>
Message-ID: <CABtg=K=EhwRmO9s-A0X4V1y17Rv_Q-tR1Hi7wXmPOnfMp=jEbA@mail.gmail.com>

This is probably because stringi does not compile on r-hub, and
ggplot2 depends on stringi.
This is a known and as of yet unsolved issue:
https://github.com/gagolews/stringi/issues/275

Gabor

On Tue, Feb 13, 2018 at 10:58 PM, Dev Chakraborty <dpc10ster at gmail.com> wrote:
> My package RJafroc, which is currently on CRAN, passes all operating
> systems except solaris-x86-patched, and as a result has been flagged for
> removal. Using R-hub builder, I am unable to reproduce the log file because
> a required package, ggplot2, does not exist for Solaris. I found the
> following conversation on GitHub at the following URL:
> https://github.com/tidyverse/ggplot2/issues/2273 (the conversation is
> reproduced below).
>
> Could use any advice. Thanks.
>
> Dev
>
> **********************************************
> tdhock commented on Sep 23, 2017
> Hey there, it seems that ggplot2 on CRAN has an ERROR on solaris
> https://www.r-project.org/nosvn/R.check/r-patched-so
> laris-x86/ggplot2-00check.html because of a test about date scales that
> does not pass. Do you have any plan to fix?
>
> This is an issue for me because I have a package that imports ggplot2, and
> I would like to use rhub to check it on solaris before submitting it to
> CRAN. *However rhub can not perform the check because the ggplot2 package
> is not available on solaris*. Here is the related issue at rhub
> r-hub/rhub#83
>
>  @hadley
>  Owner
> hadley commented on Oct 30, 2017
> *Probably not, since solaris is going away.*
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From kevinushey at gmail.com  Wed Feb 14 00:50:10 2018
From: kevinushey at gmail.com (Kevin Ushey)
Date: Tue, 13 Feb 2018 15:50:10 -0800
Subject: [R-pkg-devel] Solaris and ggplot2
In-Reply-To: <CADd2D4K_c9A0H8vXhi=7BN3RHgxX6=ekcdsVf=ur4G8vzriY7w@mail.gmail.com>
References: <CADd2D4K_c9A0H8vXhi=7BN3RHgxX6=ekcdsVf=ur4G8vzriY7w@mail.gmail.com>
Message-ID: <CAJXgQP3jxOZgaYD8p=vGMqd_6ors5MABzL99A+NsmU1XVDF-zw@mail.gmail.com>

Hi,

Glancing at the R CMD check errors, available at:

https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/RJafroc-00install.html)

It seems like the issues relate to ambiguous calls to 'sqrt()'. This
particular issue is discussed in R-exts, at:

https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Portable-C-and-C_002b_002b-code

You would likely be able to resolve this by calling e.g. 'sqrt(2.0)'
instead of 'sqrt(2)'.

Best,
Kevin

On Tue, Feb 13, 2018 at 2:58 PM, Dev Chakraborty <dpc10ster at gmail.com> wrote:
> My package RJafroc, which is currently on CRAN, passes all operating
> systems except solaris-x86-patched, and as a result has been flagged for
> removal. Using R-hub builder, I am unable to reproduce the log file because
> a required package, ggplot2, does not exist for Solaris. I found the
> following conversation on GitHub at the following URL:
> https://github.com/tidyverse/ggplot2/issues/2273 (the conversation is
> reproduced below).
>
> Could use any advice. Thanks.
>
> Dev
>
> **********************************************
> tdhock commented on Sep 23, 2017
> Hey there, it seems that ggplot2 on CRAN has an ERROR on solaris
> https://www.r-project.org/nosvn/R.check/r-patched-so
> laris-x86/ggplot2-00check.html because of a test about date scales that
> does not pass. Do you have any plan to fix?
>
> This is an issue for me because I have a package that imports ggplot2, and
> I would like to use rhub to check it on solaris before submitting it to
> CRAN. *However rhub can not perform the check because the ggplot2 package
> is not available on solaris*. Here is the related issue at rhub
> r-hub/rhub#83
>
>  @hadley
>  Owner
> hadley commented on Oct 30, 2017
> *Probably not, since solaris is going away.*
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From baptiste.auguie at gmail.com  Wed Feb 14 05:12:34 2018
From: baptiste.auguie at gmail.com (Baptiste Auguie)
Date: Wed, 14 Feb 2018 17:12:34 +1300
Subject: [R-pkg-devel] Lapack: undefined symbol: zgbsv_
In-Reply-To: <1f288b33-8262-1096-0ab7-52343525569e@r-institute.com>
References: <CANLFJPrTrtSGbOuiR1N9FmKu_UP1Faj=K2FhgLRAnduRTjZU+w@mail.gmail.com>
 <23094.64508.266861.133759@bud.eddelbuettel.com>
 <23095.705.569686.896207@bud.eddelbuettel.com>
 <23095.2063.222182.538945@bud.eddelbuettel.com>
 <CANLFJPoGuOHpAfr47PHLP8iKKzZF90MQV8_Owpi5ReDLaedf-g@mail.gmail.com>
 <235be197-52f3-51c1-cacd-c25f298c78f7@r-institute.com>
 <23095.49327.652350.981613@bud.eddelbuettel.com>
 <CANLFJPpqiqfH_SPcuAZOWVk9n2dvdtr+8+t2z-s8bZ8-Y3r8bQ@mail.gmail.com>
 <650d5f59-a959-2f28-cec2-a37c790b6c78@r-institute.com>
 <23097.4877.497072.436426@bud.eddelbuettel.com>
 <CANLFJPoCGnn1uaNRs1s7pJ7N-8vg3VAK8tgr4MooDX=kDX5KPg@mail.gmail.com>
 <23168.26326.305960.585359@rob.eddelbuettel.com>
 <CANLFJPqGCiSag2-8XCof++0z+F78XG=3gyLnoz4tzB=feh7NoA@mail.gmail.com>
 <23169.33533.587660.205551@rob.eddelbuettel.com>
 <CANLFJPqsUPuNBBL7M5tAU=y6XAnfOLj=3FHz=EogrKWdkbYpgQ@mail.gmail.com>
 <1f288b33-8262-1096-0ab7-52343525569e@r-institute.com>
Message-ID: <CANLFJPoyv6nkciqHN=SLvDUCGAAwMig8GP-Y4tznweGOjBUf7A@mail.gmail.com>

On 13 February 2018 at 22:07, Ralf Stubner <ralf.stubner at r-institute.com>
wrote:

> On 13.02.2018 05:49, Baptiste Auguie wrote:
> > On 13 February 2018 at 01:05, Dirk Eddelbuettel <edd at debian.org
> > <mailto:edd at debian.org>> wrote:
> >     Maybe we are setting a more global "no advanced lapack" for Windows
> that
> >     assures success when we assume that the other system will always
> >     have it.
> >
> >
> > it sounds plausible, but it would be nice to know for sure.
>
> It is the case, c.f.
> https://github.com/RcppCore/RcppArmadillo/blob/master/inst/i
> nclude/RcppArmadilloConfig.h#L96-L106
>
> > In
> > particular, it doesn't explain why the external Lapack on linux appears
> > to be missing these symbols (they're not very recent, as far as I can
> > tell). I don't really know how to figure this out, but it seems to be
> key.
>
> My understanding:
>
> * On Windows internal LAPACK is used but it is not affected due to the
> defines quoted above.
> * At least Debian & Co but probably also other Linux distributions
> compile R with external LAPACK and are not affected.
> * CRAN (and probably r-hub) use R compiled with internal LAPACK and is
> therefore affected.
>


Thanks Ralf, now it makes more sense to me. I had misunderstood the
situation on CRAN and r-hub and thought they used an external Lapack on
linux.



> * I do not understand why Mac OS is not affected. The FAQ [1] implies
> that by default the internal BLAS/LAPACK is used. But then I do not see
> the mentioned alternative libRblas.vecLib.dylib on a test system.
>
> [1]
> https://cran.r-project.org/bin/macosx/RMacOSX-FAQ.html#Which
> -BLAS-is-used-and-how-can-it-be-changed_003f
>
>
> >     Or, be brutal, and set '#define ARMA_CRIPPLED_LAPACK 1' everywhere.
> See
> >     lines 67 to 95 of RcppArmadillo's configure.ac <http://configure.ac
> >:
> >     https://github.com/RcppCore/RcppArmadillo/blob/master/confi
> gure.ac#L67-L95
> >
> > while this might solve the CRAN problem, it doesn't feel right to
> > enforce the use of suboptimal routines throughout and on all platforms,
> > including those that do in fact provide a full-fledged external Lapack.
>
> You could use this as a first step to get the package back into CRAN.
> Later on you can try to only set the flag when an internal LAPACK is
> detected, similar to the way RcppArmadillo does it. If my understanding
> above is correct, the number of users with ARMA_CRIPPLED_LAPACK in your
> package but not in RcppArmadillo will be quite small.
>

It would make sense to test for internal vs external Lapack and decide
based on that (regardless of the OS); as you say, the results should be
essentially identical to what happens when the same user installs
RcppArmadillo on their machine. Unfortunately I don't know how to proceed.
I copied RcppArmadillo's configure.ac script and tried to extract just the
Lapack testing bits, but these macro and configure concepts are totally
foreign to me. I believe it would be helpful to have a minimal example of
this type of configuration for the dummy isolve package (
https://github.com/baptiste/isolve), if someone with such expertise and a
linux machine is willing to help.

Thanks,

baptiste


>
> Greetings
> Ralf
>
> --
> Ralf Stubner
> Senior Software Engineer / Trainer
>
> R Institute GmbH
> Dortustra?e 48
> 14467 Potsdam
>
> T: +49 331 23 70 81 66
> F: +49 331 23 70 81 67
> M: +49 162 20 91 196
>
> Mail: ralf.stubner at r-institute.com
>
> Sitz: Potsdam
> Register: AG Potsdam HRB 27966 P
> Ust.-IdNr.: DE300072622
> Gesch?ftsf?hrer: Prof. Dr. Dr. Karl-Kuno Kunze
>
>

	[[alternative HTML version deleted]]


From edd at debian.org  Wed Feb 14 13:23:46 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 14 Feb 2018 06:23:46 -0600
Subject: [R-pkg-devel] Lapack: undefined symbol: zgbsv_
In-Reply-To: <CANLFJPoyv6nkciqHN=SLvDUCGAAwMig8GP-Y4tznweGOjBUf7A@mail.gmail.com>
References: <CANLFJPrTrtSGbOuiR1N9FmKu_UP1Faj=K2FhgLRAnduRTjZU+w@mail.gmail.com>
 <23094.64508.266861.133759@bud.eddelbuettel.com>
 <23095.705.569686.896207@bud.eddelbuettel.com>
 <23095.2063.222182.538945@bud.eddelbuettel.com>
 <CANLFJPoGuOHpAfr47PHLP8iKKzZF90MQV8_Owpi5ReDLaedf-g@mail.gmail.com>
 <235be197-52f3-51c1-cacd-c25f298c78f7@r-institute.com>
 <23095.49327.652350.981613@bud.eddelbuettel.com>
 <CANLFJPpqiqfH_SPcuAZOWVk9n2dvdtr+8+t2z-s8bZ8-Y3r8bQ@mail.gmail.com>
 <650d5f59-a959-2f28-cec2-a37c790b6c78@r-institute.com>
 <23097.4877.497072.436426@bud.eddelbuettel.com>
 <CANLFJPoCGnn1uaNRs1s7pJ7N-8vg3VAK8tgr4MooDX=kDX5KPg@mail.gmail.com>
 <23168.26326.305960.585359@rob.eddelbuettel.com>
 <CANLFJPqGCiSag2-8XCof++0z+F78XG=3gyLnoz4tzB=feh7NoA@mail.gmail.com>
 <23169.33533.587660.205551@rob.eddelbuettel.com>
 <CANLFJPqsUPuNBBL7M5tAU=y6XAnfOLj=3FHz=EogrKWdkbYpgQ@mail.gmail.com>
 <1f288b33-8262-1096-0ab7-52343525569e@r-institute.com>
 <CANLFJPoyv6nkciqHN=SLvDUCGAAwMig8GP-Y4tznweGOjBUf7A@mail.gmail.com>
Message-ID: <23172.10834.414738.344131@rob.eddelbuettel.com>


On 14 February 2018 at 17:12, Baptiste Auguie wrote:
| Thanks Ralf, now it makes more sense to me. I had misunderstood the
| situation on CRAN and r-hub and thought they used an external Lapack on
| linux.

This has been unchanged over the many years that you had these battles:

- on Windows it is always internal lapack 
- on Linux it depends and that is why RcppArmadillo checks, and always has 
- on macOS I forget what it is for LAPACK (but it can't be more general that
  Linux) but we absolutely fight the rather poor OpenMP situtation there

so in a nutshell you *must* test.

Which is what RcppArmadillo does in two stages. First, we accomodate Windows
and then in other cases we defer to the result form the test in configure.
This is from RcppArmadilloConfig.h where it gets "used" on all but one platform:


// On Windows do not read autoconf-updated header
#if defined(WIN32) || defined(_WIN32)
  // R can be built with its own Rlapack library, or use an external
  // one. Only the latter has zgesdd, a complex-valued SVD using divide-and-conquer 
  // on Windows we do not assume ZGESDD
  #define ARMA_CRIPPLED_LAPACK 1
  // on Windows we can now assume OpenMP with Rtools / gcc 4.9.3
  // note that performance is said to still be poor
  // cf https://cran.r-project.org/doc/manuals/r-devel/R-admin.html#The-MinGW_002dw64-toolchain
  #define ARMA_USE_OPENMP
#else
  // on the other OSs we test via LAPACK_LIBS (in configure) which
  // updates this include file
  #include <RcppArmadilloConfigGenerated.h>
#endif


Now, as hinted, I just allowed in RcppArmadilloConfigGenerated.h to be blunt
and override the tested value:


#ifndef ARMA_CRIPPLED_LAPACK
// value on next line may be changed between #undef and #define by the configure script
@ARMA_LAPACK@
#endif


So you can now (or from the next release "soon") override from cda, at least
as a test for builds. Otherwise it receives what we test for in autoconf
(which does not cover your newest complex solve issue as it was calibrated
for earlier issues now addressed by R Core who made the include LAPACK
"bigger", though not big enough for your newest issue).

And RcppArmadillo had these tests for many years: as autoconf/configure code,
then as a shell script snippet, and now back to autoconf.  
 
| It would make sense to test for internal vs external Lapack and decide
| based on that (regardless of the OS); as you say, the results should be

See above; RcppArmadillo does just that.

| essentially identical to what happens when the same user installs
| RcppArmadillo on their machine. Unfortunately I don't know how to proceed.
| I copied RcppArmadillo's configure.ac script and tried to extract just the
| Lapack testing bits, but these macro and configure concepts are totally
| foreign to me. I believe it would be helpful to have a minimal example of
| this type of configuration for the dummy isolve package (
| https://github.com/baptiste/isolve), if someone with such expertise and a
| linux machine is willing to help.

I can try to help by email, and I think I offered that before.  autoconf
really is just like shell scripting, plus a little ornamentation.  The
configure.ac script should not be hard to read (and copy) and there are
numerous examples on the intertubes.  You are also free to do what others do
and completely reinvent autoconf if that floats your boat better. Your call.

But you really need a test for your situation, or at least fall back to the
very blunt instrument we provide for you.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ralf.stubner at r-institute.com  Wed Feb 14 14:49:38 2018
From: ralf.stubner at r-institute.com (Ralf Stubner)
Date: Wed, 14 Feb 2018 14:49:38 +0100
Subject: [R-pkg-devel] Lapack: undefined symbol: zgbsv_
In-Reply-To: <CANLFJPoyv6nkciqHN=SLvDUCGAAwMig8GP-Y4tznweGOjBUf7A@mail.gmail.com>
References: <CANLFJPrTrtSGbOuiR1N9FmKu_UP1Faj=K2FhgLRAnduRTjZU+w@mail.gmail.com>
 <23094.64508.266861.133759@bud.eddelbuettel.com>
 <23095.705.569686.896207@bud.eddelbuettel.com>
 <23095.2063.222182.538945@bud.eddelbuettel.com>
 <CANLFJPoGuOHpAfr47PHLP8iKKzZF90MQV8_Owpi5ReDLaedf-g@mail.gmail.com>
 <235be197-52f3-51c1-cacd-c25f298c78f7@r-institute.com>
 <23095.49327.652350.981613@bud.eddelbuettel.com>
 <CANLFJPpqiqfH_SPcuAZOWVk9n2dvdtr+8+t2z-s8bZ8-Y3r8bQ@mail.gmail.com>
 <650d5f59-a959-2f28-cec2-a37c790b6c78@r-institute.com>
 <23097.4877.497072.436426@bud.eddelbuettel.com>
 <CANLFJPoCGnn1uaNRs1s7pJ7N-8vg3VAK8tgr4MooDX=kDX5KPg@mail.gmail.com>
 <23168.26326.305960.585359@rob.eddelbuettel.com>
 <CANLFJPqGCiSag2-8XCof++0z+F78XG=3gyLnoz4tzB=feh7NoA@mail.gmail.com>
 <23169.33533.587660.205551@rob.eddelbuettel.com>
 <CANLFJPqsUPuNBBL7M5tAU=y6XAnfOLj=3FHz=EogrKWdkbYpgQ@mail.gmail.com>
 <1f288b33-8262-1096-0ab7-52343525569e@r-institute.com>
 <CANLFJPoyv6nkciqHN=SLvDUCGAAwMig8GP-Y4tznweGOjBUf7A@mail.gmail.com>
Message-ID: <f3991f95-6d5c-8a14-5609-e98da8ceafcb@r-institute.com>



On 14.02.2018 05:12, Baptiste Auguie wrote:
> It would make sense to test for internal vs external Lapack and decide
> based on that (regardless of the OS); as you say, the results should be
> essentially identical to what happens when the same user installs
> RcppArmadillo on their machine. Unfortunately I don't know how to
> proceed. I copied RcppArmadillo's configure.ac <http://configure.ac>
> script and tried to extract just the Lapack testing bits, but these
> macro and configure concepts are totally foreign to me. I believe it
> would be helpful to have a minimal example of this type of configuration
> for the dummy isolve package (https://github.com/baptiste/isolve
> <https://github.com/baptiste/isolve>), if someone with such expertise
> and a linux machine is willing to help.

Have a look at https://github.com/baptiste/isolve/pull/1 for one way to
do this. With this change it works in my test Docker image together with
the dev version(!) of RcppArmadillo.

Greetings
Ralf

-- 
Ralf Stubner
Senior Software Engineer / Trainer

R Institute GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 70 81 66
F: +49 331 23 70 81 67
M: +49 162 20 91 196

Mail: ralf.stubner at r-institute.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966 P
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Prof. Dr. Dr. Karl-Kuno Kunze


From dpc10ster at gmail.com  Wed Feb 14 19:48:40 2018
From: dpc10ster at gmail.com (Dev Chakraborty)
Date: Wed, 14 Feb 2018 18:48:40 +0000
Subject: [R-pkg-devel] Solaris and ggplot2
In-Reply-To: <CAJXgQP3jxOZgaYD8p=vGMqd_6ors5MABzL99A+NsmU1XVDF-zw@mail.gmail.com>
References: <CADd2D4K_c9A0H8vXhi=7BN3RHgxX6=ekcdsVf=ur4G8vzriY7w@mail.gmail.com>
 <CAJXgQP3jxOZgaYD8p=vGMqd_6ors5MABzL99A+NsmU1XVDF-zw@mail.gmail.com>
Message-ID: <CADd2D4+3b2ySEFEYO+8xmRSFOi3xG7sWeJs8G+bUqdmMag0Uhg@mail.gmail.com>

Thanks Kevin; I took care of that error but was unable to check my fix on
r-hub solaris because ggplot failed to load on solaris; could it be that
CRAN uses a different version of solaris that allows ggplot to load? Dev

On Tue, Feb 13, 2018 at 6:50 PM Kevin Ushey <kevinushey at gmail.com> wrote:

> Hi,
>
> Glancing at the R CMD check errors, available at:
>
>
> https://www.r-project.org/nosvn/R.check/r-patched-solaris-x86/RJafroc-00install.html
> )
>
> It seems like the issues relate to ambiguous calls to 'sqrt()'. This
> particular issue is discussed in R-exts, at:
>
>
> https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Portable-C-and-C_002b_002b-code
>
> You would likely be able to resolve this by calling e.g. 'sqrt(2.0)'
> instead of 'sqrt(2)'.
>
> Best,
> Kevin
>
> On Tue, Feb 13, 2018 at 2:58 PM, Dev Chakraborty <dpc10ster at gmail.com>
> wrote:
> > My package RJafroc, which is currently on CRAN, passes all operating
> > systems except solaris-x86-patched, and as a result has been flagged for
> > removal. Using R-hub builder, I am unable to reproduce the log file
> because
> > a required package, ggplot2, does not exist for Solaris. I found the
> > following conversation on GitHub at the following URL:
> > https://github.com/tidyverse/ggplot2/issues/2273 (the conversation is
> > reproduced below).
> >
> > Could use any advice. Thanks.
> >
> > Dev
> >
> > **********************************************
> > tdhock commented on Sep 23, 2017
> > Hey there, it seems that ggplot2 on CRAN has an ERROR on solaris
> > https://www.r-project.org/nosvn/R.check/r-patched-so
> > laris-x86/ggplot2-00check.html because of a test about date scales that
> > does not pass. Do you have any plan to fix?
> >
> > This is an issue for me because I have a package that imports ggplot2,
> and
> > I would like to use rhub to check it on solaris before submitting it to
> > CRAN. *However rhub can not perform the check because the ggplot2 package
> > is not available on solaris*. Here is the related issue at rhub
> > r-hub/rhub#83
> >
> >  @hadley
> >  Owner
> > hadley commented on Oct 30, 2017
> > *Probably not, since solaris is going away.*
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
-- 
Dev Chakraborty, PhD
Professor of Radiology retired
CEO, ExpertCAD Analytics LLC
412-480-7318 (cell)
?(412) 427-5085? (alt. cell)
412-349-5305 (land line)

*Book website:*
https://www.crcpress.com/9781482214840
*Online supplementary material website:*
https://bitbucket.org/dpc10ster/onlinebookk21778
<https://www.crcpress.com/9781482214840>
*CAD Project website:*
www.expertcadanalytics.com
*JAFROC website*
www.devchakraborty.com

	[[alternative HTML version deleted]]


From Kush.Kapur at childrens.harvard.edu  Wed Feb 14 22:14:39 2018
From: Kush.Kapur at childrens.harvard.edu (Kapur, Kush)
Date: Wed, 14 Feb 2018 21:14:39 +0000
Subject: [R-pkg-devel] Windows binaries
Message-ID: <67faa3088e724cc3b07c1b27a562bacf@CHEXMAIL5B.CHBOSTON.ORG>

Dear R development team,


I have also submitted the Windows binaries for the ssrm.logmer package using build_win function in devtools.

Is there anything else I need to take care of to make sure this package can be installed on windows system?



Best,

Kush


Kush Kapur, PhD
Assistant Professor of Neurology
Department of Neurology | Boston Children's Hospital
Senior Statistician
Biostatistics and Research Design Core | Clinical and Translational Research
Associate Director of Biostatistics
Harvard Catalyst | The Harvard Clinical and Translational Science Center
Harvard Medical School | Ph: 857-218-4955


	[[alternative HTML version deleted]]


From edd at debian.org  Wed Feb 14 22:55:02 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 14 Feb 2018 15:55:02 -0600
Subject: [R-pkg-devel] Windows binaries
In-Reply-To: <67faa3088e724cc3b07c1b27a562bacf@CHEXMAIL5B.CHBOSTON.ORG>
References: <67faa3088e724cc3b07c1b27a562bacf@CHEXMAIL5B.CHBOSTON.ORG>
Message-ID: <23172.45110.227234.729810@rob.eddelbuettel.com>


On 14 February 2018 at 21:14, Kapur, Kush wrote:
| Dear R development team,

We're only regular list members here -- just like you.

| I have also submitted the Windows binaries for the ssrm.logmer package using build_win function in devtools.

Not sure I follow. You generally upload a _source_ tarball to CRAN, which
should allow CRAN to build binary packages from it (on Windows and macOS).
Binaries are generally not involved.
 
Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From h.wickham at gmail.com  Wed Feb 14 23:20:11 2018
From: h.wickham at gmail.com (Hadley Wickham)
Date: Wed, 14 Feb 2018 16:20:11 -0600
Subject: [R-pkg-devel] Windows binaries
In-Reply-To: <67faa3088e724cc3b07c1b27a562bacf@CHEXMAIL5B.CHBOSTON.ORG>
References: <67faa3088e724cc3b07c1b27a562bacf@CHEXMAIL5B.CHBOSTON.ORG>
Message-ID: <CABdHhvFJhUB7+2bFfh4DZetJx68wC3JGpk4mMPZYAv1MkRqNXg@mail.gmail.com>

devtools::build_win() has an unfortunate name - it's actually more
about checking your package on windows than building a package (and in
the development version we've renamed to check_win()). However,
fortunately, once your package has been accepted on CRAN, you don't
need to worry about building windows binaries - CRAN will take care of
that for you.

Hadley

On Wed, Feb 14, 2018 at 3:14 PM, Kapur, Kush
<Kush.Kapur at childrens.harvard.edu> wrote:
> Dear R development team,
>
>
> I have also submitted the Windows binaries for the ssrm.logmer package using build_win function in devtools.
>
> Is there anything else I need to take care of to make sure this package can be installed on windows system?
>
>
>
> Best,
>
> Kush
>
>
> Kush Kapur, PhD
> Assistant Professor of Neurology
> Department of Neurology | Boston Children's Hospital
> Senior Statistician
> Biostatistics and Research Design Core | Clinical and Translational Research
> Associate Director of Biostatistics
> Harvard Catalyst | The Harvard Clinical and Translational Science Center
> Harvard Medical School | Ph: 857-218-4955
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
http://hadley.nz


From Kush.Kapur at childrens.harvard.edu  Thu Feb 15 18:05:39 2018
From: Kush.Kapur at childrens.harvard.edu (Kapur, Kush)
Date: Thu, 15 Feb 2018 17:05:39 +0000
Subject: [R-pkg-devel] Windows binaries [EXTERNAL]
In-Reply-To: <CABdHhvFJhUB7+2bFfh4DZetJx68wC3JGpk4mMPZYAv1MkRqNXg@mail.gmail.com>
References: <67faa3088e724cc3b07c1b27a562bacf@CHEXMAIL5B.CHBOSTON.ORG>
 <CABdHhvFJhUB7+2bFfh4DZetJx68wC3JGpk4mMPZYAv1MkRqNXg@mail.gmail.com>
Message-ID: <430ca9c02cd0446790df0243a9a8428f@CHEXMAIL5B.CHBOSTON.ORG>

Thanks a lot for the clarification, Hadley.

Best,
Kush

-----Original Message-----
From: Hadley Wickham [mailto:h.wickham at gmail.com] 
Sent: Wednesday, February 14, 2018 5:20 PM
To: Kapur, Kush
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Windows binaries [EXTERNAL]

devtools::build_win() has an unfortunate name - it's actually more about checking your package on windows than building a package (and in the development version we've renamed to check_win()). However, fortunately, once your package has been accepted on CRAN, you don't need to worry about building windows binaries - CRAN will take care of that for you.

Hadley

On Wed, Feb 14, 2018 at 3:14 PM, Kapur, Kush <Kush.Kapur at childrens.harvard.edu> wrote:
> Dear R development team,
>
>
> I have also submitted the Windows binaries for the ssrm.logmer package using build_win function in devtools.
>
> Is there anything else I need to take care of to make sure this package can be installed on windows system?
>
>
>
> Best,
>
> Kush
>
>
> Kush Kapur, PhD
> Assistant Professor of Neurology
> Department of Neurology | Boston Children's Hospital Senior 
> Statistician Biostatistics and Research Design Core | Clinical and 
> Translational Research Associate Director of Biostatistics Harvard 
> Catalyst | The Harvard Clinical and Translational Science Center 
> Harvard Medical School | Ph: 857-218-4955
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mail
> man_listinfo_r-2Dpackage-2Ddevel&d=DwIBaQ&c=qS4goWBT7poplM69zy_3xhKwEW
> 14JZMSdioCoppxeFU&r=sydeSbJ-6xN0CP8sRnivE6CSToOmSRQAK3-Wlb9ujno&m=01TK
> nxJ0QbU8dG3TfWhhlnD22pgfRk--zccdOy6JR9Y&s=ZEVFTmLWmWrE4OoLEXCU_kOAebRH
> zcD6maY2FYozS4Q&e=



--
https://urldefense.proofpoint.com/v2/url?u=http-3A__hadley.nz&d=DwIBaQ&c=qS4goWBT7poplM69zy_3xhKwEW14JZMSdioCoppxeFU&r=sydeSbJ-6xN0CP8sRnivE6CSToOmSRQAK3-Wlb9ujno&m=01TKnxJ0QbU8dG3TfWhhlnD22pgfRk--zccdOy6JR9Y&s=IKRfu4wEPfXiOsiBosvNHkV0dsw-JJ9N2LNxwqKgGfk&e=

From carmen.livi at ifom.eu  Thu Feb 15 19:45:02 2018
From: carmen.livi at ifom.eu (Carmen M. Livi)
Date: Thu, 15 Feb 2018 19:45:02 +0100
Subject: [R-pkg-devel] configuration failed on win-builder
Message-ID: <fc4413de-2562-0603-fdb9-70ce84fe3f3d@ifom.eu>

Hi all,

when submiting my R-package to CRAN I get the following error from the 
windows machine:

* installing *source* package 'spp' ...
./configure.win: 2: Syntax error: word unexpected (expecting ")")
ERROR: configuration failed for package 'spp'
* removing 'd:/RCompile/CRANguest/R-devel/lib/spp'
In R CMD INSTALL

The package I am submitting is using a configure file.
I have a "configure" script generated with autoconf that reads 
configure.ac (for linux) and configure.win (for windows).
It works fine on linux.

Looking at the error it seems (to me) that win-builder tries to execute 
configure.win instead of configure.
Has anyone faced a similar issue? Any idea what is going on?

Thanks,
Carmen


From ilaria.amerise at unical.it  Fri Feb 16 12:34:53 2018
From: ilaria.amerise at unical.it (Ilaria Amerise)
Date: Fri, 16 Feb 2018 12:34:53 +0100
Subject: [R-pkg-devel] R package CRAN check error
Message-ID: <CAGYQJzoiQJAW1W3D4V1-2R7dv_24jeu7WaC8=iCTLMX5mW01cQ@mail.gmail.com>

Hi everybody,

on submitting a new version of a package I got a rejection because of
the following Error in the CRAN-check.

Any help would be highly appreciated.

* using R version 3.4.3 (2017-11-30)
* using platform: x86_64-apple-darwin15.6.0 (64-bit)
* using session charset: UTF-8
* using option ?--as-cran?
* checking for file ?namepackage/DESCRIPTION? ... OK
* checking extension type ... Package
* this is package ?namepackage? version ?1.1.2?
* checking CRAN incoming feasibility ... Note_to_CRAN_maintainers
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... ERROR
Only *source* packages can be checked.
* DONE
Status: 1 ERROR

Best regards,
Ilaria


From carmen.livi at ifom.eu  Fri Feb 16 17:59:05 2018
From: carmen.livi at ifom.eu (Carmen M. Livi)
Date: Fri, 16 Feb 2018 17:59:05 +0100
Subject: [R-pkg-devel] CRAN submission: Packages accepted if they run on two
 major R platforms
Message-ID: <c969faef-9fd4-8500-f2bf-1b00a5b17b62@ifom.eu>

Hi all,

I am new here and have a question regarding package submissions:

"CRAN Repository Policy" states that "packages will not be accepted that 
do not run on at least two major R platforms".

My package runs on MAC and Linux. So I assume that I can submit my 
package without configuring it for Windows.

- Can I therefore ignore the "R CMD check" results from winbuilder after 
submitting the package?
- Or is there a way to force the submission just on MAC and Linux machines?

Thanks,
Carmen


From edd at debian.org  Fri Feb 16 21:33:50 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri, 16 Feb 2018 14:33:50 -0600
Subject: [R-pkg-devel] configuration failed on win-builder
In-Reply-To: <fc4413de-2562-0603-fdb9-70ce84fe3f3d@ifom.eu>
References: <fc4413de-2562-0603-fdb9-70ce84fe3f3d@ifom.eu>
Message-ID: <23175.16430.235663.229445@rob.eddelbuettel.com>


Hi Carmen,

On 15 February 2018 at 19:45, Carmen M. Livi wrote:
| when submiting my R-package to CRAN I get the following error from the 
| windows machine:
| 
| * installing *source* package 'spp' ...
| ./configure.win: 2: Syntax error: word unexpected (expecting ")")
| ERROR: configuration failed for package 'spp'
| * removing 'd:/RCompile/CRANguest/R-devel/lib/spp'
| In R CMD INSTALL
| 
| The package I am submitting is using a configure file.
| I have a "configure" script generated with autoconf that reads 
| configure.ac (for linux) and configure.win (for windows).

"That reads" ?  Normaly, the autoconf tools _create_ configure from
configure.ac.  For Windows, configure.win is usually completely different and
hand-written.

The are literally hundreds of examples at CRAN which you could study.

| It works fine on linux.
| 
| Looking at the error it seems (to me) that win-builder tries to execute 
| configure.win instead of configure.

Yes. As documented.  See "Writing R Extensions"

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd at debian.org  Fri Feb 16 21:34:53 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri, 16 Feb 2018 14:34:53 -0600
Subject: [R-pkg-devel] 
 CRAN submission: Packages accepted if they run on two
 major R platforms
In-Reply-To: <c969faef-9fd4-8500-f2bf-1b00a5b17b62@ifom.eu>
References: <c969faef-9fd4-8500-f2bf-1b00a5b17b62@ifom.eu>
Message-ID: <23175.16493.805937.947732@rob.eddelbuettel.com>


Carmen,

On 16 February 2018 at 17:59, Carmen M. Livi wrote:
| I am new here and have a question regarding package submissions:
| 
| "CRAN Repository Policy" states that "packages will not be accepted that 
| do not run on at least two major R platforms".
| 
| My package runs on MAC and Linux. So I assume that I can submit my 
| package without configuring it for Windows.
| 
| - Can I therefore ignore the "R CMD check" results from winbuilder after 
| submitting the package?
| - Or is there a way to force the submission just on MAC and Linux machines?

There is, via OS_type. Again, see "Writing R Extensions". But methinks that
you could (and should) fix your package to build in Windows if there is no
structural reason for it not to build.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd at debian.org  Fri Feb 16 21:35:32 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri, 16 Feb 2018 14:35:32 -0600
Subject: [R-pkg-devel] R package CRAN check error
In-Reply-To: <CAGYQJzoiQJAW1W3D4V1-2R7dv_24jeu7WaC8=iCTLMX5mW01cQ@mail.gmail.com>
References: <CAGYQJzoiQJAW1W3D4V1-2R7dv_24jeu7WaC8=iCTLMX5mW01cQ@mail.gmail.com>
Message-ID: <23175.16532.348525.11911@rob.eddelbuettel.com>


Ilaria,

On 16 February 2018 at 12:34, Ilaria Amerise wrote:
| on submitting a new version of a package I got a rejection because of
| the following Error in the CRAN-check.
| 
| Any help would be highly appreciated.
| 
| * using R version 3.4.3 (2017-11-30)
| * using platform: x86_64-apple-darwin15.6.0 (64-bit)
| * using session charset: UTF-8
| * using option ?--as-cran?
| * checking for file ?namepackage/DESCRIPTION? ... OK
| * checking extension type ... Package
| * this is package ?namepackage? version ?1.1.2?
| * checking CRAN incoming feasibility ... Note_to_CRAN_maintainers
| * checking package namespace information ... OK
| * checking package dependencies ... OK
| * checking if this is a source package ... ERROR
| Only *source* packages can be checked.

That would be your error. You did not upload a source package.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From georgi.boshnakov at manchester.ac.uk  Fri Feb 16 21:46:38 2018
From: georgi.boshnakov at manchester.ac.uk (Georgi Boshnakov)
Date: Fri, 16 Feb 2018 20:46:38 +0000
Subject: [R-pkg-devel] R package CRAN check error
In-Reply-To: <CAGYQJzoiQJAW1W3D4V1-2R7dv_24jeu7WaC8=iCTLMX5mW01cQ@mail.gmail.com>
References: <CAGYQJzoiQJAW1W3D4V1-2R7dv_24jeu7WaC8=iCTLMX5mW01cQ@mail.gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F64EE9B@MBXP01.ds.man.ac.uk>

You get a source package suitable for submission by running `R CMD check namepackage'  or the equivalent devtools::build() 

Georgi

-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Ilaria Amerise
Sent: 16 February 2018 11:35
To: r-package-devel
Subject: [R-pkg-devel] R package CRAN check error

Hi everybody,

on submitting a new version of a package I got a rejection because of the following Error in the CRAN-check.

Any help would be highly appreciated.

* using R version 3.4.3 (2017-11-30)
* using platform: x86_64-apple-darwin15.6.0 (64-bit)
* using session charset: UTF-8
* using option ?--as-cran?
* checking for file ?namepackage/DESCRIPTION? ... OK
* checking extension type ... Package
* this is package ?namepackage? version ?1.1.2?
* checking CRAN incoming feasibility ... Note_to_CRAN_maintainers
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... ERROR Only *source* packages can be checked.
* DONE
Status: 1 ERROR

Best regards,
Ilaria

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel

From edd at debian.org  Fri Feb 16 21:50:40 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri, 16 Feb 2018 14:50:40 -0600
Subject: [R-pkg-devel] R package CRAN check error
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F64EE9B@MBXP01.ds.man.ac.uk>
References: <CAGYQJzoiQJAW1W3D4V1-2R7dv_24jeu7WaC8=iCTLMX5mW01cQ@mail.gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F64EE9B@MBXP01.ds.man.ac.uk>
Message-ID: <23175.17440.434756.109637@rob.eddelbuettel.com>


On 16 February 2018 at 20:46, Georgi Boshnakov wrote:
| You get a source package suitable for submission by running `R CMD check namepackage'  or the equivalent devtools::build() 

Close: "R CMD build namepackage" creates the tar.gz file.
And "R CMD check --as-cran namepackage_*.tar.gz" checks it.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From h.wickham at gmail.com  Fri Feb 16 22:32:30 2018
From: h.wickham at gmail.com (Hadley Wickham)
Date: Fri, 16 Feb 2018 15:32:30 -0600
Subject: [R-pkg-devel] R package CRAN check error
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F64EE9B@MBXP01.ds.man.ac.uk>
References: <CAGYQJzoiQJAW1W3D4V1-2R7dv_24jeu7WaC8=iCTLMX5mW01cQ@mail.gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F64EE9B@MBXP01.ds.man.ac.uk>
Message-ID: <CABdHhvFqxyC8SqZ7K+LGvgVYx9iS-ot+kubMkbKGYoBEq9fL_Q@mail.gmail.com>

Or even better, devtools::release(): it walks you through a checklist
of activities designed to make your submission as successful as
possible.

Hadley

On Fri, Feb 16, 2018 at 2:46 PM, Georgi Boshnakov
<georgi.boshnakov at manchester.ac.uk> wrote:
> You get a source package suitable for submission by running `R CMD check namepackage'  or the equivalent devtools::build()
>
> Georgi
>
> -----Original Message-----
> From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Ilaria Amerise
> Sent: 16 February 2018 11:35
> To: r-package-devel
> Subject: [R-pkg-devel] R package CRAN check error
>
> Hi everybody,
>
> on submitting a new version of a package I got a rejection because of the following Error in the CRAN-check.
>
> Any help would be highly appreciated.
>
> * using R version 3.4.3 (2017-11-30)
> * using platform: x86_64-apple-darwin15.6.0 (64-bit)
> * using session charset: UTF-8
> * using option ?--as-cran?
> * checking for file ?namepackage/DESCRIPTION? ... OK
> * checking extension type ... Package
> * this is package ?namepackage? version ?1.1.2?
> * checking CRAN incoming feasibility ... Note_to_CRAN_maintainers
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... ERROR Only *source* packages can be checked.
> * DONE
> Status: 1 ERROR
>
> Best regards,
> Ilaria
>
> ______________________________________________
> R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
http://hadley.nz


From dpc10ster at gmail.com  Sat Feb 17 17:39:28 2018
From: dpc10ster at gmail.com (Dev Chakraborty)
Date: Sat, 17 Feb 2018 11:39:28 -0500
Subject: [R-pkg-devel] R package CRAN check error
In-Reply-To: <CABdHhvFqxyC8SqZ7K+LGvgVYx9iS-ot+kubMkbKGYoBEq9fL_Q@mail.gmail.com>
References: <CAGYQJzoiQJAW1W3D4V1-2R7dv_24jeu7WaC8=iCTLMX5mW01cQ@mail.gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F64EE9B@MBXP01.ds.man.ac.uk>
 <CABdHhvFqxyC8SqZ7K+LGvgVYx9iS-ot+kubMkbKGYoBEq9fL_Q@mail.gmail.com>
Message-ID: <CADd2D4JQ+=DupJZ2iAjs_zqwLD9kT=RuXpNHgzw5m3qgeDcmGw@mail.gmail.com>

Thanks Hadley, for making us aware of this tool. I have a question: the
spellchecker part works (I mean I corrected words that were clearly
misspelled leaving acronyms which are common in my field), but I get the
following messages after the spell check:

* using log directory
?/private/var/folders/d1/mx6dcbzx3v39r260458z2b200000gn/T/RtmpjaaTMI/RJafroc.Rcheck?
* using R version 3.4.3 (2017-11-30)
* using platform: x86_64-apple-darwin15.6.0 (64-bit)
* using session charset: UTF-8
* using options ?--run-donttest --as-cran?
* checking for file ?RJafroc/DESCRIPTION? ... OK
* checking extension type ... Package
* this is package ?RJafroc? version ?1.0.1?
* checking CRAN incoming feasibility ...*Error in aspell(files, filter =
list("dcf", ignore = ignore), control = control,  : *
*  No suitable spell-checker program found*
Execution halted
Was R CMD check successful?
1: Nope
2: No
3: Yes

I selected 3. Am I making the right choice?

Thanks,

Dev

On Fri, Feb 16, 2018 at 4:32 PM, Hadley Wickham <h.wickham at gmail.com> wrote:

> Or even better, devtools::release(): it walks you through a checklist
> of activities designed to make your submission as successful as
> possible.
>
> Hadley
>
> On Fri, Feb 16, 2018 at 2:46 PM, Georgi Boshnakov
> <georgi.boshnakov at manchester.ac.uk> wrote:
> > You get a source package suitable for submission by running `R CMD check
> namepackage'  or the equivalent devtools::build()
> >
> > Georgi
> >
> > -----Original Message-----
> > From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On
> Behalf Of Ilaria Amerise
> > Sent: 16 February 2018 11:35
> > To: r-package-devel
> > Subject: [R-pkg-devel] R package CRAN check error
> >
> > Hi everybody,
> >
> > on submitting a new version of a package I got a rejection because of
> the following Error in the CRAN-check.
> >
> > Any help would be highly appreciated.
> >
> > * using R version 3.4.3 (2017-11-30)
> > * using platform: x86_64-apple-darwin15.6.0 (64-bit)
> > * using session charset: UTF-8
> > * using option ?--as-cran?
> > * checking for file ?namepackage/DESCRIPTION? ... OK
> > * checking extension type ... Package
> > * this is package ?namepackage? version ?1.1.2?
> > * checking CRAN incoming feasibility ... Note_to_CRAN_maintainers
> > * checking package namespace information ... OK
> > * checking package dependencies ... OK
> > * checking if this is a source package ... ERROR Only *source* packages
> can be checked.
> > * DONE
> > Status: 1 ERROR
> >
> > Best regards,
> > Ilaria
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/
> listinfo/r-package-devel
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>
> --
> http://hadley.nz
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Dev Chakraborty, PhD
Professor of Radiology retired
CEO, ExpertCAD Analytics LLC
412-480-7318 (cell)
?(412) 427-5085? (alt. cell)
412-349-5305 (land line)

*Book website:*
https://www.crcpress.com/9781482214840
*Online supplementary material website:*
https://bitbucket.org/dpc10ster/onlinebookk21778
<https://www.crcpress.com/9781482214840>
*CAD Project website:*
www.expertcadanalytics.com
*JAFROC website*
www.devchakraborty.com

	[[alternative HTML version deleted]]


From ubk at kogalur.com  Tue Feb 20 15:33:44 2018
From: ubk at kogalur.com (Udaya B. Kogalur)
Date: Tue, 20 Feb 2018 09:33:44 -0500
Subject: [R-pkg-devel] MAX_ARGS limitation in foreign function calls
Message-ID: <CACsjJ_ejptarQj2UuT00+frYdAwnT_KeH1xKcQYgz4MO2cX-Aw@mail.gmail.com>

We are hitting the MAX_ARGS ceiling in our R-C function calls in the
development of randomForestSRC.  This limits to number of arguments to
65 using .Call().  Is there a work around for this dilemma?  Thank
you.

Udaya B. Kogalur

ubk at kogalur.com
Website:  www.kogalur.com


From edd at debian.org  Tue Feb 20 16:16:34 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 20 Feb 2018 09:16:34 -0600
Subject: [R-pkg-devel] MAX_ARGS limitation in foreign function calls
In-Reply-To: <CACsjJ_ejptarQj2UuT00+frYdAwnT_KeH1xKcQYgz4MO2cX-Aw@mail.gmail.com>
References: <CACsjJ_ejptarQj2UuT00+frYdAwnT_KeH1xKcQYgz4MO2cX-Aw@mail.gmail.com>
Message-ID: <23180.15314.196937.686051@rob.eddelbuettel.com>


On 20 February 2018 at 09:33, Udaya B. Kogalur wrote:
| We are hitting the MAX_ARGS ceiling in our R-C function calls in the
| development of randomForestSRC.  This limits to number of arguments to
| 65 using .Call().  Is there a work around for this dilemma?  Thank
| you.

The easiest is to avoid the problem by using one or more of your SEXP objects
as lists and simply nest other arguments inside the list object.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From carmen.livi at ifom.eu  Tue Feb 20 20:56:45 2018
From: carmen.livi at ifom.eu (Carmen M. Livi)
Date: Tue, 20 Feb 2018 20:56:45 +0100
Subject: [R-pkg-devel] header file for "flockfile" function under windows
Message-ID: <0d3aa8f8-d670-68b6-6ed0-8f397ad16eb7@ifom.eu>

Hi all,

I am using file-locking functions in C that can be found in the 
<stdio.h> in Unix

extern void flockfile (FILE *__stream) __THROW;
extern int ftrylockfile (FILE *__stream) __THROW __wur;
extern void funlockfile (FILE *__stream) __THROW;

When submitting to CRAN I have troubles with the win-builder.

<stdio.h> in windows does not contain those functions. But I found them 
in the <pthread_unistd.h>.
But even when including all possible header files for pthread like:*
*

*#include <windows.h>**#include <sys/locking.h>*
*#include <pthread_unistd.h>****#include <pthread.h>****#include <pthread_compat.h>****#include <pthread_signal.h>****#include <pthread_time.h>*

I am aways getting the same error from win-builder:

bed2vector.cpp:2667:19: error: 'flockfile' was not declared in this scope
    flockfile(stream);
                    ^
bed2vector.cpp:2670:46: error: 'getc_unlocked' was not declared in this scope
    for (int ch = 0; (ch = getc_unlocked(stream)) != EOF;) {
                                               ^
bed2vector.cpp:2678:27: error: 'funlockfile' was not declared in this scope
          funlockfile(stream);
                            ^
bed2vector.cpp:2694:21: error: 'funlockfile' was not declared in this scope
    funlockfile(stream);
                      ^

So the header files are there, but the functions are not defined. I am 
not an expert in C, but
have to submit a package that uses C-code. Does someone have more 
experience with this?

Thanks,
Carmen


On 19/02/2018 15:22, Mauro Donadello wrote:
> Prova ad aggiungere
>
> #include <windows.h>
> #include <sys/locking.h>
>
>
>> On 19 Feb 2018, at 15:07, Carmen M. Livi<carmen.livi at ifom.eu>  wrote:
>>
>> Ciao Mauro,
>> Posso disturbarti un secondo di pomeriggio e scendere un attimo? Ho un problema con C... cioe' io e linux no, ma Windows.
>> Sulle nostre macchine compila senza problemi ma su Windows mi da un errore.
>>
>> Lancio il seguente commando:
>> g++ -m64 -std=gnu++11 -I"/lustre/home/clivi/programs/R-devel/include" -DNDEBUG  -I"/lustre/home/clivi/programs/R-devel/library/Rcpp/include/" -I"/lustre/home/clivi/programs/R-devel/library/BH/include/"   -I"/usr/lib/gcc/x86_64-redhat-linux/4.8.5/include"  -I./ -D_FASTMAP -DMAQ_LONGREADS -lbz2     -O2 -Wall  -mtune=core2 -c bed2vector.cpp -o bed2vector.o
>> Allegato il codice da eseguire.
>>
>> l messaggio di errore:
>> * installing *source* package 'spp' ...
>> ** libs
>> Warning: this package has a non-empty 'configure.win' file,
>> so building only the main architecture
>>
>> d:/Compiler/gcc-4.9.3/mingw_64/bin/g++ -m64 -std=gnu++11 -I"D:/RCompile/recent/R-3.4.3/include" -DNDEBUG  -I"d:/RCompile/CRANpkg/lib/3.4/Rcpp/include" -I"d:/RCompile/CRANpkg/lib/3.4/BH/include"   -I"d:/Compiler/gcc-4.9.3/local330/include"  -I./ -D_FASTMAP -DMAQ_LONGREADS -lbz2     -O2 -Wall  -mtune=core2 -c bed2vector.cpp -o bed2vector.o
>> In file included from D:/RCompile/recent/R-3.4.3/include/Rdefines.h:37:0,
>>                   from bed2vector.cpp:22:
>> D:/RCompile/recent/R-3.4.3/include/R_ext/RS.h:55:0: warning: "ERROR" redefined
>>   #define ERROR   ),error(R_problem_buf);}
>>   ^
>> In file included from D:/Compiler/gcc-4.9.3/mingw_64/x86_64-w64-mingw32/include/windows.h:71:0,
>>                   from d:/Compiler/gcc-4.9.3/local330/include/bzlib.h:79,
>>                   from bed2vector.cpp:15:
>> D:/Compiler/gcc-4.9.3/mingw_64/x86_64-w64-mingw32/include/wingdi.h:75:0: note: this is the location of the previous definition
>>   #define ERROR 0
>>   ^
>> bed2vector.cpp: In function 'int get_bzline(BZFILE*, std::string&)':
>> bed2vector.cpp:48:11: warning: variable 'nBuf' set but not used [-Wunused-but-set-variable]
>>     int     nBuf;
>>             ^
>> bed2vector.cpp: In function 'SEXPREC* read_eland_mismatches(SEXP)':
>> bed2vector.cpp:654:11: warning: variable 'nm' set but not used [-Wunused-but-set-variable]
>>         int nm=0;
>>             ^
>> bed2vector.cpp: In function 'SEXPREC* read_eland_extended(SEXP, SEXP, SEXP)':
>> bed2vector.cpp:1074:20: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
>>         for(int i=0;i<str_nm.size();i++) {
>>                      ^
>> bed2vector.cpp: In function 'ssize_t getline_local(char**, size_t*, FILE*)':
>> bed2vector.cpp:2659:19:
>> error
>> : 'flockfile' was not declared in this scope
>>     flockfile(stream);
>>                     ^
>> bed2vector.cpp:2662:46:
>> error
>> : 'getc_unlocked' was not declared in this scope
>>     for (int ch = 0; (ch = getc_unlocked(stream)) != EOF;) {
>>                                                ^
>> bed2vector.cpp:2670:27:
>> error
>> : 'funlockfile' was not declared in this scope
>>           funlockfile(stream);
>>                             ^
>> bed2vector.cpp:2686:21:
>> error:
>>   'funlockfile' was not declared in this scope
>>     funlockfile(stream);
>>                       ^
>> make: *** [bed2vector.o] Error 1
>> Warning: running command 'make -f "Makevars.win" -f "D:/RCompile/recent/R-3.4.3/etc/x64/Makeconf" -f "D:/RCompile/recent/R-3.4.3/etc/x64/Makevars.site" -f "D:/RCompile/recent/R-3.4.3/share/make/winshlib.mk" CXX='$(CXX11) $(CXX11STD)' CXXFLAGS='$(CXX11FLAGS)' CXXPICFLAGS='$(CXX11PICFLAGS)' SHLIB_LDFLAGS='$(SHLIB_CXX11LDFLAGS)' SHLIB_LD='$(SHLIB_CXX11LD)' SHLIB="spp.dll" WIN=64 TCLBIN=64 OBJECTS="bed2vector.o cdensum.o maqmap.o maqread.o peaks.o spp_init.o wdl.o"' had status 2
>> ERROR: compilation failed for package 'spp'
>> * removing 'd:/RCompile/CRANguest/R-release/lib/spp'
>> In R CMD INSTALL
>>
>> <bed2vector.cpp>

	[[alternative HTML version deleted]]


From edd at debian.org  Wed Feb 21 17:00:20 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 21 Feb 2018 10:00:20 -0600
Subject: [R-pkg-devel] 
 header file for "flockfile" function under windows
In-Reply-To: <0d3aa8f8-d670-68b6-6ed0-8f397ad16eb7@ifom.eu>
References: <0d3aa8f8-d670-68b6-6ed0-8f397ad16eb7@ifom.eu>
Message-ID: <23181.38804.322127.321109@rob.eddelbuettel.com>


On 20 February 2018 at 20:56, Carmen M. Livi wrote:
| I am using file-locking functions in C that can be found in the 
| <stdio.h> in Unix
| 
| extern void flockfile (FILE *__stream) __THROW;
| extern int ftrylockfile (FILE *__stream) __THROW __wur;
| extern void funlockfile (FILE *__stream) __THROW;
| 
| When submitting to CRAN I have troubles with the win-builder.

lockfile operations are rather OS-dependent. You can't just assume they exist
under Windows.  There are reasons many of us hate the non-POSIX compliance of
Windows with a reason---this is one of them.

But you may be in luck as Gabor recently released a package with a _portable_
lockfile implementation, maybe give it a try:

    https://cran.r-project.org/package=filelock

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From marius.hofert at uwaterloo.ca  Sun Feb 25 00:45:55 2018
From: marius.hofert at uwaterloo.ca (Marius Hofert)
Date: Sun, 25 Feb 2018 00:45:55 +0100
Subject: [R-pkg-devel] How to (conditionally) use an archived package
 (without Suggests)?
Message-ID: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>

Hi,

A package 'foo' uses a package 'bar' (in Imports). 'bar' has been
archived and the maintainer of 'foo' was asked to fix the dependency
on 'bar' according to WRE 1.1.3.1.

Working with 'bar::' everywhere (and requireNamespace("bar", quietly =
TRUE)), as well as moving 'bar' from Imports to Suggests seems to work
but is not accepted on submission. Removing 'bar' also from Suggests
leads to

'::' or ':::' import not declared from: ?bar?
'loadNamespace' or 'requireNamespace' call not declared from: ?bar?

Does this mean it is not possible to use 'bar' anymore in 'foo'?

These are (somewhat) related references I found:
1) https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Suggested-packages
2) https://stat.ethz.ch/pipermail/r-devel/2013-February/065947.html

Thanks & cheers,
Marius


From murdoch.duncan at gmail.com  Sun Feb 25 00:53:42 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 24 Feb 2018 18:53:42 -0500
Subject: [R-pkg-devel] How to (conditionally) use an archived package
 (without Suggests)?
In-Reply-To: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
Message-ID: <1426cd88-88c0-2214-4f37-bea043cd46cb@gmail.com>

On 24/02/2018 6:45 PM, Marius Hofert wrote:
> Hi,
> 
> A package 'foo' uses a package 'bar' (in Imports). 'bar' has been
> archived and the maintainer of 'foo' was asked to fix the dependency
> on 'bar' according to WRE 1.1.3.1.
> 
> Working with 'bar::' everywhere (and requireNamespace("bar", quietly =
> TRUE)), as well as moving 'bar' from Imports to Suggests seems to work
> but is not accepted on submission. Removing 'bar' also from Suggests
> leads to

That should be fine, as long as your package still works when "bar" is 
unavailable.  That is, use requireNamespace in a conditional:

if (requireNamespace("bar", quietly = TRUE)) {
   # do the good stuff
} else {
   # do some less good substitute
}

without generating an error anywhere.


> 
> '::' or ':::' import not declared from: ?bar?
> 'loadNamespace' or 'requireNamespace' call not declared from: ?bar?

Right, you shouldn't refer to a package in code without mentioning it in 
the DESCRIPTION file.

> 
> Does this mean it is not possible to use 'bar' anymore in 'foo'?

I don't think so.  But CRAN policies may have changed...

Duncan Murdoch

> 
> These are (somewhat) related references I found:
> 1) https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Suggested-packages
> 2) https://stat.ethz.ch/pipermail/r-devel/2013-February/065947.html
>


From marius.hofert at uwaterloo.ca  Sun Feb 25 00:59:55 2018
From: marius.hofert at uwaterloo.ca (Marius Hofert)
Date: Sun, 25 Feb 2018 00:59:55 +0100
Subject: [R-pkg-devel] How to (conditionally) use an archived package
 (without Suggests)?
In-Reply-To: <b5c85ca74e934fe5aa7cab8147f0d0c2@connhm04.connect.uwaterloo.ca>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <b5c85ca74e934fe5aa7cab8147f0d0c2@connhm04.connect.uwaterloo.ca>
Message-ID: <CAM3-Kja33NTzqbZjZi2gLSy02ewzE2dDcCoe5XK2DtBebcpCYg@mail.gmail.com>

>
> if (requireNamespace("bar", quietly = TRUE)) {
>    # do the good stuff
> } else {
>    # do some less good substitute
> }
>
> without generating an error anywhere.

Hi Duncan,

thanks for helping.

I use the above

>
>
>>
>> '::' or ':::' import not declared from: ?bar?
>> 'loadNamespace' or 'requireNamespace' call not declared from: ?bar?
>
> Right, you shouldn't refer to a package in code without mentioning it in
> the DESCRIPTION file.

This is my problem. It seems that even a *conditional* use already
requires the package name to appear in DESCRIPTION. 'bar' was in
Imports and I tried to submit 'foo' with 'bar' in Suggests. Both times
was not accepted. I don't see how even a conditional use of 'bar'
inside 'foo' is possible then.

Cheers,
Marius

>
>>
>> Does this mean it is not possible to use 'bar' anymore in 'foo'?
>
> I don't think so.  But CRAN policies may have changed...
>
> Duncan Murdoch
>
>>
>> These are (somewhat) related references I found:
>> 1) https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Suggested-packages
>> 2) https://stat.ethz.ch/pipermail/r-devel/2013-February/065947.html
>>
>
>


From edd at debian.org  Sun Feb 25 01:09:59 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 24 Feb 2018 18:09:59 -0600
Subject: [R-pkg-devel] How to (conditionally) use an archived package
 (without Suggests)?
In-Reply-To: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
Message-ID: <23185.65239.487704.567906@rob.eddelbuettel.com>


On 25 February 2018 at 00:45, Marius Hofert wrote:
| A package 'foo' uses a package 'bar' (in Imports). 'bar' has been
| archived and the maintainer of 'foo' was asked to fix the dependency
| on 'bar' according to WRE 1.1.3.1.
| 
| Working with 'bar::' everywhere (and requireNamespace("bar", quietly =
| TRUE)), as well as moving 'bar' from Imports to Suggests seems to work
| but is not accepted on submission. Removing 'bar' also from Suggests
| leads to
| 
| '::' or ':::' import not declared from: ?bar?
| 'loadNamespace' or 'requireNamespace' call not declared from: ?bar?
| 
| Does this mean it is not possible to use 'bar' anymore in 'foo'?

Your title says "conditionally".

Does your code actually behave conditionally, ie does foo check if bar is
available, and only use its code if it is?

One additional difficulty may be that even for Suggests, it still has to be
accessible "somewhere" .  And "archived" is not.  You could just move bar
onto a drat repo you set yp -- we have done the same for data packages and
have a R Journal paper describing it:

   https://journal.r-project.org/archive/2017/RJ-2017-026/index.html

Hth, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From marius.hofert at uwaterloo.ca  Sun Feb 25 01:26:51 2018
From: marius.hofert at uwaterloo.ca (Marius Hofert)
Date: Sun, 25 Feb 2018 01:26:51 +0100
Subject: [R-pkg-devel] How to (conditionally) use an archived package
 (without Suggests)?
In-Reply-To: <32da15e33c494e059a2bce66c4a89f85@connhm04.connect.uwaterloo.ca>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <32da15e33c494e059a2bce66c4a89f85@connhm04.connect.uwaterloo.ca>
Message-ID: <CAM3-KjY-VRnrHqo683YPHOrTH+_=D3qsYBgz8OzQ8PS7mTG9yQ@mail.gmail.com>

On Sun, Feb 25, 2018 at 1:09 AM, Dirk Eddelbuettel <edd at debian.org> wrote:
>
> On 25 February 2018 at 00:45, Marius Hofert wrote:
> | A package 'foo' uses a package 'bar' (in Imports). 'bar' has been
> | archived and the maintainer of 'foo' was asked to fix the dependency
> | on 'bar' according to WRE 1.1.3.1.
> |
> | Working with 'bar::' everywhere (and requireNamespace("bar", quietly =
> | TRUE)), as well as moving 'bar' from Imports to Suggests seems to work
> | but is not accepted on submission. Removing 'bar' also from Suggests
> | leads to
> |
> | '::' or ':::' import not declared from: ?bar?
> | 'loadNamespace' or 'requireNamespace' call not declared from: ?bar?
> |
> | Does this mean it is not possible to use 'bar' anymore in 'foo'?
>
> Your title says "conditionally".
>
> Does your code actually behave conditionally, ie does foo check if bar is
> available, and only use its code if it is?

Hi Dirk,

nice to hear from you and thanks for helping!

Yes, 'foo' essentially has one main function with an argument 'method
= c("b", "ba", "bar")'. If the user chooses to call the function with
method = "bar", then it is checked whether "bar" is installed (as
described in WRE) and an error is thrown if not.

>
> One additional difficulty may be that even for Suggests, it still has to be
> accessible "somewhere" .

The full story is this: 'bar' has been archived because 'problems were
not corrected despite reminders'. 'bar' is mainly developed on github
and is probably easy to fix, but I also couldn't reach the maintainer
and I thought it's better to 'decrease' the dependency on 'bar' as
much as possible. 'bar' is actually quite intrusive to install/use
(requires R to be configured with tcltk). However, 'bar' provides some
nice features which the other methods ("b", "ba") don't have -- would
be a pity to completely remove 'bar' from 'foo'.

So 'bar' is on github (and thus could be installed from there + 'foo'
could make use of 'bar' conditionally... just don't know how to submit
'foo' to CRAN because of the warning)

Cheers,
M



> And "archived" is not.  You could just move bar
> onto a drat repo you set yp -- we have done the same for data packages and
> have a R Journal paper describing it:
>
>    https://journal.r-project.org/archive/2017/RJ-2017-026/index.html
>
> Hth, Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch.duncan at gmail.com  Sun Feb 25 01:41:32 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 24 Feb 2018 19:41:32 -0500
Subject: [R-pkg-devel] How to (conditionally) use an archived package
 (without Suggests)?
In-Reply-To: <CAM3-KjY-VRnrHqo683YPHOrTH+_=D3qsYBgz8OzQ8PS7mTG9yQ@mail.gmail.com>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <32da15e33c494e059a2bce66c4a89f85@connhm04.connect.uwaterloo.ca>
 <CAM3-KjY-VRnrHqo683YPHOrTH+_=D3qsYBgz8OzQ8PS7mTG9yQ@mail.gmail.com>
Message-ID: <7ef1690b-f59d-f071-96e4-a760b67787e5@gmail.com>

On 24/02/2018 7:26 PM, Marius Hofert wrote:
> On Sun, Feb 25, 2018 at 1:09 AM, Dirk Eddelbuettel <edd at debian.org> wrote:
>>
>> On 25 February 2018 at 00:45, Marius Hofert wrote:
>> | A package 'foo' uses a package 'bar' (in Imports). 'bar' has been
>> | archived and the maintainer of 'foo' was asked to fix the dependency
>> | on 'bar' according to WRE 1.1.3.1.
>> |
>> | Working with 'bar::' everywhere (and requireNamespace("bar", quietly =
>> | TRUE)), as well as moving 'bar' from Imports to Suggests seems to work
>> | but is not accepted on submission. Removing 'bar' also from Suggests
>> | leads to
>> |
>> | '::' or ':::' import not declared from: ?bar?
>> | 'loadNamespace' or 'requireNamespace' call not declared from: ?bar?
>> |
>> | Does this mean it is not possible to use 'bar' anymore in 'foo'?
>>
>> Your title says "conditionally".
>>
>> Does your code actually behave conditionally, ie does foo check if bar is
>> available, and only use its code if it is?
> 
> Hi Dirk,
> 
> nice to hear from you and thanks for helping!
> 
> Yes, 'foo' essentially has one main function with an argument 'method
> = c("b", "ba", "bar")'. If the user chooses to call the function with
> method = "bar", then it is checked whether "bar" is installed (as
> described in WRE) and an error is thrown if not.

Don't throw an error, work around it.  If you have no alternative code, 
then don't test the "bar" code unless "bar" is installed.

The basic idea is that your package should pass tests without errors 
even if "bar" is not available.

I think Dirk is wrong saying that "bar" has to be available; CRAN isn't 
going to go looking for it.  But they do want your package to pass all 
tests even if none of the Suggests packages is available.

Duncan Murdoch

> 
>>
>> One additional difficulty may be that even for Suggests, it still has to be
>> accessible "somewhere" .
> 
> The full story is this: 'bar' has been archived because 'problems were
> not corrected despite reminders'. 'bar' is mainly developed on github
> and is probably easy to fix, but I also couldn't reach the maintainer
> and I thought it's better to 'decrease' the dependency on 'bar' as
> much as possible. 'bar' is actually quite intrusive to install/use
> (requires R to be configured with tcltk). However, 'bar' provides some
> nice features which the other methods ("b", "ba") don't have -- would
> be a pity to completely remove 'bar' from 'foo'.
> 
> So 'bar' is on github (and thus could be installed from there + 'foo'
> could make use of 'bar' conditionally... just don't know how to submit
> 'foo' to CRAN because of the warning)
> 
> Cheers,
> M
> 
> 
> 
>> And "archived" is not.  You could just move bar
>> onto a drat repo you set yp -- we have done the same for data packages and
>> have a R Journal paper describing it:
>>
>>     https://journal.r-project.org/archive/2017/RJ-2017-026/index.html
>>
>> Hth, Dirk
>>
>> --
>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From marius.hofert at uwaterloo.ca  Sun Feb 25 01:56:35 2018
From: marius.hofert at uwaterloo.ca (Marius Hofert)
Date: Sun, 25 Feb 2018 01:56:35 +0100
Subject: [R-pkg-devel] How to (conditionally) use an archived package
 (without Suggests)?
In-Reply-To: <de6cc85aa9f545df8f96ab063e17dd14@connhm04.connect.uwaterloo.ca>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <32da15e33c494e059a2bce66c4a89f85@connhm04.connect.uwaterloo.ca>
 <CAM3-KjY-VRnrHqo683YPHOrTH+_=D3qsYBgz8OzQ8PS7mTG9yQ@mail.gmail.com>
 <de6cc85aa9f545df8f96ab063e17dd14@connhm04.connect.uwaterloo.ca>
Message-ID: <CAM3-Kjbwb7Hm_cCryRNy6dPdYDBMAzYgp+hMBvSk=cLvFTvH2w@mail.gmail.com>

On Sun, Feb 25, 2018 at 1:41 AM, Duncan Murdoch
<murdoch.duncan at gmail.com> wrote:
> On 24/02/2018 7:26 PM, Marius Hofert wrote:
>> On Sun, Feb 25, 2018 at 1:09 AM, Dirk Eddelbuettel <edd at debian.org> wrote:
>>>
>>> On 25 February 2018 at 00:45, Marius Hofert wrote:
>>> | A package 'foo' uses a package 'bar' (in Imports). 'bar' has been
>>> | archived and the maintainer of 'foo' was asked to fix the dependency
>>> | on 'bar' according to WRE 1.1.3.1.
>>> |
>>> | Working with 'bar::' everywhere (and requireNamespace("bar", quietly =
>>> | TRUE)), as well as moving 'bar' from Imports to Suggests seems to work
>>> | but is not accepted on submission. Removing 'bar' also from Suggests
>>> | leads to
>>> |
>>> | '::' or ':::' import not declared from: ?bar?
>>> | 'loadNamespace' or 'requireNamespace' call not declared from: ?bar?
>>> |
>>> | Does this mean it is not possible to use 'bar' anymore in 'foo'?
>>>
>>> Your title says "conditionally".
>>>
>>> Does your code actually behave conditionally, ie does foo check if bar is
>>> available, and only use its code if it is?
>>
>> Hi Dirk,
>>
>> nice to hear from you and thanks for helping!
>>
>> Yes, 'foo' essentially has one main function with an argument 'method
>> = c("b", "ba", "bar")'. If the user chooses to call the function with
>> method = "bar", then it is checked whether "bar" is installed (as
>> described in WRE) and an error is thrown if not.
>
> Don't throw an error, work around it.

Hi,

the 'workaround' is the error: to tell the user not to use it (but one
of the other available methods).

To be more precise: 'bar' is the package 'loon' for dynamic graphics
(and 'foo' is 'zenplots'). If that's not installed, the user can
choose to work with the other (non-dynamic) graphics packages. If a
user actively chooses to do the plotting with loon but doesn't have
loon installed, the error is a logical consequence.

> If you have no alternative code,
> then don't test the "bar" code unless "bar" is installed.

The main plotting function in zenplots uses:

    if(pkg == "loon" && !requireNamespace("loon", quietly = TRUE))
        stop("Package 'loon' is not available.")

... and if it's installed, it will call various further functions from
loon (now all used via "loon::..."). There are no tests or examples
that fail, everything works -- it's just that the use of "::"
generates the warning I mentioned which is (most likely) unacceptable
for upload to CRAN.

>
> The basic idea is that your package should pass tests without errors
> even if "bar" is not available.

It does -- except for the 'warning':

'::' or ':::' import not declared from: ?bar?
'loadNamespace' or 'requireNamespace' call not declared from: ?bar?

>
> I think Dirk is wrong saying that "bar" has to be available; CRAN isn't
> going to go looking for it.  But they do want your package to pass all
> tests even if none of the Suggests packages is available.

'loon' is not in Suggests. It originally was in 'Imports', then I put
it to 'Suggests', but when I submitted, Uwe wrote:

But you still have
Suggests: loon,
Please fix and resubmit.

... so it shouldn't appear in 'Suggests' either (I guess). That's why
I also removed it from Suggests, but then (because of the above
warning), I can't submit either.

Not sure how to solve this (... and thought that others might have a
similar problem with archived packages -- thus this post).

Cheers,
Marius

>
> Duncan Murdoch
>
>>
>>>
>>> One additional difficulty may be that even for Suggests, it still has to be
>>> accessible "somewhere" .
>>
>> The full story is this: 'bar' has been archived because 'problems were
>> not corrected despite reminders'. 'bar' is mainly developed on github
>> and is probably easy to fix, but I also couldn't reach the maintainer
>> and I thought it's better to 'decrease' the dependency on 'bar' as
>> much as possible. 'bar' is actually quite intrusive to install/use
>> (requires R to be configured with tcltk). However, 'bar' provides some
>> nice features which the other methods ("b", "ba") don't have -- would
>> be a pity to completely remove 'bar' from 'foo'.
>>
>> So 'bar' is on github (and thus could be installed from there + 'foo'
>> could make use of 'bar' conditionally... just don't know how to submit
>> 'foo' to CRAN because of the warning)
>>
>> Cheers,
>> M
>>
>>
>>
>>> And "archived" is not.  You could just move bar
>>> onto a drat repo you set yp -- we have done the same for data packages and
>>> have a R Journal paper describing it:
>>>
>>>     https://journal.r-project.org/archive/2017/RJ-2017-026/index.html
>>>
>>> Hth, Dirk
>>>
>>> --
>>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>


From edd at debian.org  Sun Feb 25 01:59:34 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 24 Feb 2018 18:59:34 -0600
Subject: [R-pkg-devel] How to (conditionally) use an archived package
 (without Suggests)?
In-Reply-To: <7ef1690b-f59d-f071-96e4-a760b67787e5@gmail.com>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <32da15e33c494e059a2bce66c4a89f85@connhm04.connect.uwaterloo.ca>
 <CAM3-KjY-VRnrHqo683YPHOrTH+_=D3qsYBgz8OzQ8PS7mTG9yQ@mail.gmail.com>
 <7ef1690b-f59d-f071-96e4-a760b67787e5@gmail.com>
Message-ID: <23186.2678.398277.866583@rob.eddelbuettel.com>


On 24 February 2018 at 19:41, Duncan Murdoch wrote:
| Don't throw an error, work around it.  If you have no alternative code, 
| then don't test the "bar" code unless "bar" is installed.
| 
| The basic idea is that your package should pass tests without errors 
| even if "bar" is not available.

100% agreed.
 
| I think Dirk is wrong saying that "bar" has to be available; CRAN isn't 
| going to go looking for it.  But they do want your package to pass all 
| tests even if none of the Suggests packages is available.

I might be wrong but I thought all package in Imports, LinkingTo, Depends and
Suggests are actually checked for availability.

CRAN and BioC work by default, others can be added via Additional_repository
in DESCRIPTION.  And as I recall, not mentioning one leads to some complaint
from R CMD check. But I may well misremember.

Best, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch.duncan at gmail.com  Sun Feb 25 02:47:41 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 24 Feb 2018 20:47:41 -0500
Subject: [R-pkg-devel] How to (conditionally) use an archived package
 (without Suggests)?
In-Reply-To: <CAM3-Kjbwb7Hm_cCryRNy6dPdYDBMAzYgp+hMBvSk=cLvFTvH2w@mail.gmail.com>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <32da15e33c494e059a2bce66c4a89f85@connhm04.connect.uwaterloo.ca>
 <CAM3-KjY-VRnrHqo683YPHOrTH+_=D3qsYBgz8OzQ8PS7mTG9yQ@mail.gmail.com>
 <de6cc85aa9f545df8f96ab063e17dd14@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbwb7Hm_cCryRNy6dPdYDBMAzYgp+hMBvSk=cLvFTvH2w@mail.gmail.com>
Message-ID: <3983f376-a849-ec53-39f5-2feb0674367f@gmail.com>

On 24/02/2018 7:56 PM, Marius Hofert wrote:
> On Sun, Feb 25, 2018 at 1:41 AM, Duncan Murdoch
> <murdoch.duncan at gmail.com> wrote:
>> On 24/02/2018 7:26 PM, Marius Hofert wrote:
>>> On Sun, Feb 25, 2018 at 1:09 AM, Dirk Eddelbuettel <edd at debian.org> wrote:
>>>>
>>>> On 25 February 2018 at 00:45, Marius Hofert wrote:
>>>> | A package 'foo' uses a package 'bar' (in Imports). 'bar' has been
>>>> | archived and the maintainer of 'foo' was asked to fix the dependency
>>>> | on 'bar' according to WRE 1.1.3.1.
>>>> |
>>>> | Working with 'bar::' everywhere (and requireNamespace("bar", quietly =
>>>> | TRUE)), as well as moving 'bar' from Imports to Suggests seems to work
>>>> | but is not accepted on submission. Removing 'bar' also from Suggests
>>>> | leads to
>>>> |
>>>> | '::' or ':::' import not declared from: ?bar?
>>>> | 'loadNamespace' or 'requireNamespace' call not declared from: ?bar?
>>>> |
>>>> | Does this mean it is not possible to use 'bar' anymore in 'foo'?
>>>>
>>>> Your title says "conditionally".
>>>>
>>>> Does your code actually behave conditionally, ie does foo check if bar is
>>>> available, and only use its code if it is?
>>>
>>> Hi Dirk,
>>>
>>> nice to hear from you and thanks for helping!
>>>
>>> Yes, 'foo' essentially has one main function with an argument 'method
>>> = c("b", "ba", "bar")'. If the user chooses to call the function with
>>> method = "bar", then it is checked whether "bar" is installed (as
>>> described in WRE) and an error is thrown if not.
>>
>> Don't throw an error, work around it.
> 
> Hi,
> 
> the 'workaround' is the error: to tell the user not to use it (but one
> of the other available methods).
> 
> To be more precise: 'bar' is the package 'loon' for dynamic graphics
> (and 'foo' is 'zenplots'). If that's not installed, the user can
> choose to work with the other (non-dynamic) graphics packages. If a
> user actively chooses to do the plotting with loon but doesn't have
> loon installed, the error is a logical consequence.
> 
>> If you have no alternative code,
>> then don't test the "bar" code unless "bar" is installed.
> 
> The main plotting function in zenplots uses:
> 
>      if(pkg == "loon" && !requireNamespace("loon", quietly = TRUE))
>          stop("Package 'loon' is not available.")
> 
> ... and if it's installed, it will call various further functions from
> loon (now all used via "loon::..."). There are no tests or examples
> that fail, everything works -- it's just that the use of "::"
> generates the warning I mentioned which is (most likely) unacceptable
> for upload to CRAN.
> 
>>
>> The basic idea is that your package should pass tests without errors
>> even if "bar" is not available.
> 
> It does -- except for the 'warning':
> 
> '::' or ':::' import not declared from: ?bar?
> 'loadNamespace' or 'requireNamespace' call not declared from: ?bar?

That's because 'bar' is not in Suggests.
> 
>>
>> I think Dirk is wrong saying that "bar" has to be available; CRAN isn't
>> going to go looking for it.  But they do want your package to pass all
>> tests even if none of the Suggests packages is available.
> 
> 'loon' is not in Suggests. It originally was in 'Imports', then I put
> it to 'Suggests', but when I submitted, Uwe wrote:
> 
> But you still have
> Suggests: loon,
> Please fix and resubmit >
> ... so it shouldn't appear in 'Suggests' either (I guess). That's why
> I also removed it from Suggests, but then (because of the above
> warning), I can't submit either.

I suspect you didn't run an --as-cran check with no 'loon' available, 
and if you had, you would have received warnings or errors.

If you did run that check and it didn't give warnings or errors, then 
things have changed; sorry for misleading you.

Duncan Murdoch

> 
> Not sure how to solve this (... and thought that others might have a
> similar problem with archived packages -- thus this post).
> 
> Cheers,
> Marius
> 
>>
>> Duncan Murdoch
>>
>>>
>>>>
>>>> One additional difficulty may be that even for Suggests, it still has to be
>>>> accessible "somewhere" .
>>>
>>> The full story is this: 'bar' has been archived because 'problems were
>>> not corrected despite reminders'. 'bar' is mainly developed on github
>>> and is probably easy to fix, but I also couldn't reach the maintainer
>>> and I thought it's better to 'decrease' the dependency on 'bar' as
>>> much as possible. 'bar' is actually quite intrusive to install/use
>>> (requires R to be configured with tcltk). However, 'bar' provides some
>>> nice features which the other methods ("b", "ba") don't have -- would
>>> be a pity to completely remove 'bar' from 'foo'.
>>>
>>> So 'bar' is on github (and thus could be installed from there + 'foo'
>>> could make use of 'bar' conditionally... just don't know how to submit
>>> 'foo' to CRAN because of the warning)
>>>
>>> Cheers,
>>> M
>>>
>>>
>>>
>>>> And "archived" is not.  You could just move bar
>>>> onto a drat repo you set yp -- we have done the same for data packages and
>>>> have a R Journal paper describing it:
>>>>
>>>>      https://journal.r-project.org/archive/2017/RJ-2017-026/index.html
>>>>
>>>> Hth, Dirk
>>>>
>>>> --
>>>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>


From hugh.parsonage at gmail.com  Sun Feb 25 03:09:16 2018
From: hugh.parsonage at gmail.com (Hugh Parsonage)
Date: Sun, 25 Feb 2018 13:09:16 +1100
Subject: [R-pkg-devel] How to (conditionally) use an archived package
 (without Suggests)?
In-Reply-To: <23186.2678.398277.866583@rob.eddelbuettel.com>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <32da15e33c494e059a2bce66c4a89f85@connhm04.connect.uwaterloo.ca>
 <CAM3-KjY-VRnrHqo683YPHOrTH+_=D3qsYBgz8OzQ8PS7mTG9yQ@mail.gmail.com>
 <7ef1690b-f59d-f071-96e4-a760b67787e5@gmail.com>
 <23186.2678.398277.866583@rob.eddelbuettel.com>
Message-ID: <CAJmOi+MN1MX4ZS90mUwbKegv+kjyZO5OhM_1CXq2bdj6j55Akw@mail.gmail.com>

The relevant part of the repository policy:

> Packages on which a CRAN package depends should be available from a mainstream repository: if any mentioned in ?Suggests? or ?Enhances? fields are not from such a repository, where to obtain them at a repository should be specified in an ?Additional_repositories? field of the DESCRIPTION file (as a comma-separated list of repository URLs) or for other means of access, described in the ?Description? field.

My understanding is that "should be available" means "if it's not
available, expect a NOTE (at least) and you should address this note
in your submission". Also, I think "available" means "available and
installable".

For example, I get a NOTE for 'taxstats', a suggested package of
grattan that isn't on CRAN:

* checking CRAN incoming feasibility ... NOTE
Suggests or Enhances not in mainstream repositories:
taxstats
Availability using Additional_repositories specification:
taxstats yes https://hughparsonage.github.io/drat/


However, the reason taxstats is not on CRAN is because it's too big,
not because it's unable to be installed or has other problems. At the
time it was archived, package loon could only be installed on OSX as
far as I can see, which may disqualify it from even being suggested.
My understanding is that CRAN does indeed check the package with
non-mainstream packages installed (at least on initial submission).
You may be better off just hoisting the functions you need outside of
loon (with attribution and while respecting the licence) if you really
need them.

(You say that package loon's problems are easy to fix. You may be able
to accede to be its maintainer but I don't know the details of this
process. The CRAN repository policy contemplates this when the package
is orphaned, but I'm not sure if it's the same process when the
package is archived.)





On 25 February 2018 at 11:59, Dirk Eddelbuettel <edd at debian.org> wrote:
>
> On 24 February 2018 at 19:41, Duncan Murdoch wrote:
> | Don't throw an error, work around it.  If you have no alternative code,
> | then don't test the "bar" code unless "bar" is installed.
> |
> | The basic idea is that your package should pass tests without errors
> | even if "bar" is not available.
>
> 100% agreed.
>
> | I think Dirk is wrong saying that "bar" has to be available; CRAN isn't
> | going to go looking for it.  But they do want your package to pass all
> | tests even if none of the Suggests packages is available.
>
> I might be wrong but I thought all package in Imports, LinkingTo, Depends and
> Suggests are actually checked for availability.
>
> CRAN and BioC work by default, others can be added via Additional_repository
> in DESCRIPTION.  And as I recall, not mentioning one leads to some complaint
> from R CMD check. But I may well misremember.
>
> Best, Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From marius.hofert at uwaterloo.ca  Sun Feb 25 09:49:13 2018
From: marius.hofert at uwaterloo.ca (Marius Hofert)
Date: Sun, 25 Feb 2018 09:49:13 +0100
Subject: [R-pkg-devel] How to (conditionally) use an archived package
 (without Suggests)?
In-Reply-To: <0db0cb87f2194cb4b75e9bc950ab2d51@connhm04.connect.uwaterloo.ca>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <32da15e33c494e059a2bce66c4a89f85@connhm04.connect.uwaterloo.ca>
 <CAM3-KjY-VRnrHqo683YPHOrTH+_=D3qsYBgz8OzQ8PS7mTG9yQ@mail.gmail.com>
 <de6cc85aa9f545df8f96ab063e17dd14@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbwb7Hm_cCryRNy6dPdYDBMAzYgp+hMBvSk=cLvFTvH2w@mail.gmail.com>
 <0db0cb87f2194cb4b75e9bc950ab2d51@connhm04.connect.uwaterloo.ca>
Message-ID: <CAM3-Kjbb6rb7zAjEpRKCXKtvL4JkkwbHADBxJbeT0V8ZY6e+eQ@mail.gmail.com>

>> It does -- except for the 'warning':
>>
>> '::' or ':::' import not declared from: ?bar?
>> 'loadNamespace' or 'requireNamespace' call not declared from: ?bar?
>
> That's because 'bar' is not in Suggests.

Thinking a bit about it, the reference to
https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Suggested-packages
in the email from CRAN does not really apply in my case. It starts
with "Note that someone wanting to run the examples/tests/vignettes
may not have a suggested package available...", but what I would need
is "Note that someone wanting to run an exported function from the
package may not have a required package available...". It is
essentially the question whether 'code' from a package can be run
'conditionally'. Conceptually, I think it should be possible: If I
want to run a function from zenplots with an argument specifying
specifically to use 'loon', then I should get an error if I don't have
loon installed -- and if I do, then I sure want the code to run.

>> Uwe wrote:
>>
>> But you still have
>> Suggests: loon,
>> Please fix and resubmit >
>> ... so it shouldn't appear in 'Suggests' either (I guess). That's why
>> I also removed it from Suggests, but then (because of the above
>> warning), I can't submit either.
>
> I suspect you didn't run an --as-cran check with no 'loon' available,
> and if you had, you would have received warnings or errors.
>
> If you did run that check and it didn't give warnings or errors,

I ran the check with '--as-cran' without loon available and only got
the above namespace warning, no other warnings or errors. And, of
course, the same on winbuilder.

Cheers,
M

PS: In the meanwhile, I also tried to add 'loon' under
'Additional_repositories' via "Additional_repositories:
https://github.com/waddella/loon", but the check seems to look for a
subfolder of the form ./src/contrib/PACKAGES and that github repos
doesn't seem to have this structure, so I got:

* checking CRAN incoming feasibility ...Warning: unable to access
index for repository https://github.com/waddella/loon/src/contrib:
  cannot open URL 'https://github.com/waddella/loon/src/contrib/PACKAGES'

> then things have changed; sorry for misleading you.
>
> Duncan Murdoch
>


From bbolker at gmail.com  Sun Feb 25 10:14:38 2018
From: bbolker at gmail.com (Ben Bolker)
Date: Sun, 25 Feb 2018 04:14:38 -0500
Subject: [R-pkg-devel] How to (conditionally) use an archived package
 (without Suggests)?
In-Reply-To: <CAM3-Kjbb6rb7zAjEpRKCXKtvL4JkkwbHADBxJbeT0V8ZY6e+eQ@mail.gmail.com>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <32da15e33c494e059a2bce66c4a89f85@connhm04.connect.uwaterloo.ca>
 <CAM3-KjY-VRnrHqo683YPHOrTH+_=D3qsYBgz8OzQ8PS7mTG9yQ@mail.gmail.com>
 <de6cc85aa9f545df8f96ab063e17dd14@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbwb7Hm_cCryRNy6dPdYDBMAzYgp+hMBvSk=cLvFTvH2w@mail.gmail.com>
 <0db0cb87f2194cb4b75e9bc950ab2d51@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbb6rb7zAjEpRKCXKtvL4JkkwbHADBxJbeT0V8ZY6e+eQ@mail.gmail.com>
Message-ID: <CABghstSWFyy8m+DUpQtH-71dD+XqvGrQTg5LZ_U9T-rKbSUUyA@mail.gmail.com>

Others may comment more knowledgeably, but I think what you want is
impossible due to the combination
of requirements.

  If you want to put it under additional repositories, I suggest Dirk
Eddelbuettel's drat package as a simple way of
generating the required repository structure.

On Sun, Feb 25, 2018 at 3:49 AM, Marius Hofert
<marius.hofert at uwaterloo.ca> wrote:
>>> It does -- except for the 'warning':
>>>
>>> '::' or ':::' import not declared from: ?bar?
>>> 'loadNamespace' or 'requireNamespace' call not declared from: ?bar?
>>
>> That's because 'bar' is not in Suggests.
>
> Thinking a bit about it, the reference to
> https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Suggested-packages
> in the email from CRAN does not really apply in my case. It starts
> with "Note that someone wanting to run the examples/tests/vignettes
> may not have a suggested package available...", but what I would need
> is "Note that someone wanting to run an exported function from the
> package may not have a required package available...". It is
> essentially the question whether 'code' from a package can be run
> 'conditionally'. Conceptually, I think it should be possible: If I
> want to run a function from zenplots with an argument specifying
> specifically to use 'loon', then I should get an error if I don't have
> loon installed -- and if I do, then I sure want the code to run.
>
>>> Uwe wrote:
>>>
>>> But you still have
>>> Suggests: loon,
>>> Please fix and resubmit >
>>> ... so it shouldn't appear in 'Suggests' either (I guess). That's why
>>> I also removed it from Suggests, but then (because of the above
>>> warning), I can't submit either.
>>
>> I suspect you didn't run an --as-cran check with no 'loon' available,
>> and if you had, you would have received warnings or errors.
>>
>> If you did run that check and it didn't give warnings or errors,
>
> I ran the check with '--as-cran' without loon available and only got
> the above namespace warning, no other warnings or errors. And, of
> course, the same on winbuilder.
>
> Cheers,
> M
>
> PS: In the meanwhile, I also tried to add 'loon' under
> 'Additional_repositories' via "Additional_repositories:
> https://github.com/waddella/loon", but the check seems to look for a
> subfolder of the form ./src/contrib/PACKAGES and that github repos
> doesn't seem to have this structure, so I got:
>
> * checking CRAN incoming feasibility ...Warning: unable to access
> index for repository https://github.com/waddella/loon/src/contrib:
>   cannot open URL 'https://github.com/waddella/loon/src/contrib/PACKAGES'
>
>> then things have changed; sorry for misleading you.
>>
>> Duncan Murdoch
>>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r.turner at auckland.ac.nz  Sun Feb 25 11:16:54 2018
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sun, 25 Feb 2018 23:16:54 +1300
Subject: [R-pkg-devel] 
 [FORGED] Re: How to (conditionally) use an archived
 package (without Suggests)?
In-Reply-To: <CAM3-Kjbb6rb7zAjEpRKCXKtvL4JkkwbHADBxJbeT0V8ZY6e+eQ@mail.gmail.com>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <32da15e33c494e059a2bce66c4a89f85@connhm04.connect.uwaterloo.ca>
 <CAM3-KjY-VRnrHqo683YPHOrTH+_=D3qsYBgz8OzQ8PS7mTG9yQ@mail.gmail.com>
 <de6cc85aa9f545df8f96ab063e17dd14@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbwb7Hm_cCryRNy6dPdYDBMAzYgp+hMBvSk=cLvFTvH2w@mail.gmail.com>
 <0db0cb87f2194cb4b75e9bc950ab2d51@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbb6rb7zAjEpRKCXKtvL4JkkwbHADBxJbeT0V8ZY6e+eQ@mail.gmail.com>
Message-ID: <ccaaf3ff-383e-b024-41c1-bdf7db6c556d@auckland.ac.nz>


Marius:

Can you not, instead of

> if(pkg == "loon" && !requireNamespace("loon", quietly = TRUE))
>         stop("Package 'loon' is not available.")

do something like:

if(pkg == "loon" && !requireNamespace("loon", quietly = TRUE)) {
         cat("Package 'loon' is not available.\n")
         cat("Sorry 'bout that, chief!\n")
         return(invisible())
}

Thereby no error is thrown.  The user may be unhappy with the result,
but he or she would have been similarly unhappy with the error, and
there is no way of constructing your function so that such a user *will* 
be happy.

cheers,

Rolf Turner

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From marius.hofert at uwaterloo.ca  Sun Feb 25 11:50:00 2018
From: marius.hofert at uwaterloo.ca (Marius Hofert)
Date: Sun, 25 Feb 2018 11:50:00 +0100
Subject: [R-pkg-devel] 
 [FORGED] Re: How to (conditionally) use an archived
 package (without Suggests)?
In-Reply-To: <354f09e072584ae89fd546fd1084878b@connhm04.connect.uwaterloo.ca>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <32da15e33c494e059a2bce66c4a89f85@connhm04.connect.uwaterloo.ca>
 <CAM3-KjY-VRnrHqo683YPHOrTH+_=D3qsYBgz8OzQ8PS7mTG9yQ@mail.gmail.com>
 <de6cc85aa9f545df8f96ab063e17dd14@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbwb7Hm_cCryRNy6dPdYDBMAzYgp+hMBvSk=cLvFTvH2w@mail.gmail.com>
 <0db0cb87f2194cb4b75e9bc950ab2d51@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbb6rb7zAjEpRKCXKtvL4JkkwbHADBxJbeT0V8ZY6e+eQ@mail.gmail.com>
 <354f09e072584ae89fd546fd1084878b@connhm04.connect.uwaterloo.ca>
Message-ID: <CAM3-KjaOzywojj_b85QQHnJnYP6N0zVvJx+_eu4nG24tzrCNjg@mail.gmail.com>

On Sun, Feb 25, 2018 at 11:16 AM, Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
> Marius:
>
> Can you not, instead of
>
>> if(pkg == "loon" && !requireNamespace("loon", quietly = TRUE))
>>         stop("Package 'loon' is not available.")
>
> do something like:
>
> if(pkg == "loon" && !requireNamespace("loon", quietly = TRUE)) {
>          cat("Package 'loon' is not available.\n")
>          cat("Sorry 'bout that, chief!\n")
>          return(invisible())
> }
>

Hi,

... of course I can do that, but I don't see how that solves the
problem: This part of the code is not even executed until the user
actively calls the surrounding function (zenplot()) with the method
that uses loon (not the default obviously). As such, the whole package
perfectly works (even if you don't have loon) *except* for the check
(--as-cran) to give me the warning:
* checking dependencies in R code ... WARNING
'::' or ':::' import not declared from: ?loon?
'loadNamespace' or 'requireNamespace' call not declared from: ?loon?
... and putting 'loon' in Suggests (to avoid this warning) does not
seem to be allowed as 'loon' is not on CRAN.

Again: The rest of the check and the package works (whether you have
loon installed or not), only if you actively want to use loon and you
don't have loon installed, then you'll see the error (which is
conceptually correct because you don't have loon installed).

This also means that I can easily solve the problem by simply removing
the whole dependence on loon from zenplots (as a 'plan B'), but that
would take away this feature completely which is somewhat sad (we
wrote a lot of functions to provide support for dynamic graphics with
loon).
I will probably even do that, but at the moment I'm just interested in
the problem in itself (you know, as an academic, you tend to get
fascinated by certain problems... kind of an 'occupational
disease'...).
Just imagine there is no solution to this problem. Let A be a package
(of which you are the maintainer) which depends on another package B
(of which you are not the maintainer) -- but code of B is actually
only used under very specific circumstances. If B suddenly disappears
from CRAN, A will be archived, too, although in 99% of the cases, A
doesn't even use B... that would be a bit scary (?), especially as you
(as maintainer of A) have no control over what the maintainer of B
does. It seems advisable in these situations to omit the dependence on
B at all, but B here adds a lot of features (dynamic plotting) which
cannot easily be incorporated otherwise.

> Thereby no error is thrown.  The user may be unhappy with the result,
> but he or she would have been similarly unhappy with the error, and
> there is no way of constructing your function so that such a user *will*
> be happy.

The error is not the problem (this is not why the package is not
accepted for submission to CRAN as the error only shows up of you
actively call zenplot() with the corresponding method). The error is
totally reasonable to a user who actively wants to use dynamic
plotting with loon but does not have loon installed. In that sense
your second cat (nice!) could be expanded to:

cat("Sorry 'bout that, chief, but if you really want to use 'loon',
then just install it from github first and your wish will be my
command! Alternatively, just use one of the other supported methods
like the one based on 'graphics' (the default).\n")

:-)

[Thanks to everyone for helping so far. It's good to know that this
does not seem to be a trivial problem which probably means that the
'dumbness-level' of this question was not too high...]. By now, I also
send an email to Uwe directly and mentioned this thread here. I'll
immediately post an update if there is any (if not 'plan B' will get
more likely).

Cheers,
M



>
> cheers,
>
> Rolf Turner


From meik.michalke at hhu.de  Sun Feb 25 11:51:16 2018
From: meik.michalke at hhu.de (meik michalke)
Date: Sun, 25 Feb 2018 11:51:16 +0100
Subject: [R-pkg-devel] How to (conditionally) use an archived package
 (without Suggests)?
In-Reply-To: <CAM3-Kjbb6rb7zAjEpRKCXKtvL4JkkwbHADBxJbeT0V8ZY6e+eQ@mail.gmail.com>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <0db0cb87f2194cb4b75e9bc950ab2d51@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbb6rb7zAjEpRKCXKtvL4JkkwbHADBxJbeT0V8ZY6e+eQ@mail.gmail.com>
Message-ID: <10087968.f3oyTHvrcu@yrla>

Am Sonntag, 25. Februar 2018, 09:49:13 CET schrieb Marius Hofert:
> * checking CRAN incoming feasibility ...Warning: unable to access
> index for repository https://github.com/waddella/loon/src/contrib:
>   cannot open URL 'https://github.com/waddella/loon/src/contrib/PACKAGES'

'Additional_repositories' is meant for R package repositories, it won't work 
with source code git repos. if a package is in 'Suggests' and can't be found 
on CRAN or BioC, the additional repos given here are searched for it, but only 
for it's availability. it won't be installed, CRAN only checks whether it 
*could* be installed.

instead of throwing an error, i would probably fallback to a meaningful 
default at the beginning of the function code and warn the user about it:

  if(pkg == "loon" && !requireNamespace("loon", quietly = TRUE)) {
    pkg == "<no bar>"
    warning(paste(
     "Package 'loon' is unavailable, falling back to the default:", pkg
    ))
  } else {}

i'm dealing with a similar problem at the moment, the main diffenrence being 
that i brought it onto myself by outsourcing specific parts (support for 
several natural languages) of one huge package into several add-on packages, 
and these add-on packages were rejected from CRAN so i can't make any of them 
a dependecy. meaning they're not even archived :-D


viele gr??e :: m.eik

-- 
  dipl. psych. meik michalke
  abt. f"ur diagnostik und differentielle psychologie
  institut f"ur experimentelle psychologie
  heinrich-heine-universit"at                             
  geb"aude 23.03.00.26        |  tel +49 (0)211 8113498
  40204 d"usseldorf           |  fax +49 (0)211 8111753

  http://www.psycho.hhu.de    https://reaktanz.de
  https://rkward.kde.org      https://twitter.com/RKWardNet

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 473 bytes
Desc: This is a digitally signed message part.
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20180225/aa82cf32/attachment.sig>

From meik.michalke at hhu.de  Sun Feb 25 12:38:35 2018
From: meik.michalke at hhu.de (meik michalke)
Date: Sun, 25 Feb 2018 12:38:35 +0100
Subject: [R-pkg-devel] stages of package loading
Message-ID: <13124329.Xcada71lX3@yrla>

hi,

i'm currently trying to figure out whether it is possible to tell a dependency 
that it was loaded as a dependency and by which package.

the use case is this:

 - packages A and B both depend on package X
 - package X can be loaded independently, but checks if A or B are available
   - when both are missing, X should throw a message
   - when A or B are already loaded, X should load quietly

now i want to load A and B without X falsely informing me that they are 
missing. i.e., it should be clear to X that A is available and currently being 
loaded when X itself is loaded as the dependency of A.

it seems .onLoad() is not the right place for X to search for A or B, because 
it always throws the message when the first of both packages is being loaded. 
any suggestions?


viele gr??e :: m.eik

-- 
  dipl. psych. meik michalke
  abt. f"ur diagnostik und differentielle psychologie
  institut f"ur experimentelle psychologie
  heinrich-heine-universit"at                             
  geb"aude 23.03.00.26        |  tel +49 (0)211 8113498
  40204 d"usseldorf           |  fax +49 (0)211 8111753

  http://www.psycho.hhu.de    https://reaktanz.de
  https://rkward.kde.org      https://twitter.com/RKWardNet

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 473 bytes
Desc: This is a digitally signed message part.
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20180225/ba07ca66/attachment.sig>

From edd at debian.org  Sun Feb 25 13:26:10 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 25 Feb 2018 06:26:10 -0600
Subject: [R-pkg-devel] 
 [FORGED] Re: How to (conditionally) use an archived
 package (without Suggests)?
In-Reply-To: <CAM3-KjaOzywojj_b85QQHnJnYP6N0zVvJx+_eu4nG24tzrCNjg@mail.gmail.com>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <32da15e33c494e059a2bce66c4a89f85@connhm04.connect.uwaterloo.ca>
 <CAM3-KjY-VRnrHqo683YPHOrTH+_=D3qsYBgz8OzQ8PS7mTG9yQ@mail.gmail.com>
 <de6cc85aa9f545df8f96ab063e17dd14@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbwb7Hm_cCryRNy6dPdYDBMAzYgp+hMBvSk=cLvFTvH2w@mail.gmail.com>
 <0db0cb87f2194cb4b75e9bc950ab2d51@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbb6rb7zAjEpRKCXKtvL4JkkwbHADBxJbeT0V8ZY6e+eQ@mail.gmail.com>
 <354f09e072584ae89fd546fd1084878b@connhm04.connect.uwaterloo.ca>
 <CAM3-KjaOzywojj_b85QQHnJnYP6N0zVvJx+_eu4nG24tzrCNjg@mail.gmail.com>
Message-ID: <23186.43874.437238.322197@rob.eddelbuettel.com>


On 25 February 2018 at 11:50, Marius Hofert wrote:
| perfectly works (even if you don't have loon) *except* for the check
| (--as-cran) to give me the warning:
| * checking dependencies in R code ... WARNING
| '::' or ':::' import not declared from: ?loon?
| 'loadNamespace' or 'requireNamespace' call not declared from: ?loon?
| ... and putting 'loon' in Suggests (to avoid this warning) does not
| seem to be allowed as 'loon' is not on CRAN.

As already suggested:
 - create a drat repository,
 - place a copy of loon (from its repo source or the Archive section) in it
 - add the repo to Additional_repositories
 - using Suggests: is now permissible as the package is now useable
 - the ':::' not declared warning should now go away.

To recap: 'R CMD check --as-cran' sees your package use external code you
have not declared a source for, so you get a warning. The only way to get rid
of the warning is to declare the code dependency, and for optional code you
can use Suggests, which can also use Additional_repositories so you can
reintroduce (in a repo you setup and manage) a package CRAN no longer has.

An 'archived' package no longer exists in the package dependency graph
("Archive" is not a repo) so you need to create one. Here Suggests: and
Additional_repositories play along together nicely; drat helps create and
manage a simple repo you can use.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd at debian.org  Sun Feb 25 13:35:52 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 25 Feb 2018 06:35:52 -0600
Subject: [R-pkg-devel] How to (conditionally) use an archived package
 (without Suggests)?
In-Reply-To: <10087968.f3oyTHvrcu@yrla>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <0db0cb87f2194cb4b75e9bc950ab2d51@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbb6rb7zAjEpRKCXKtvL4JkkwbHADBxJbeT0V8ZY6e+eQ@mail.gmail.com>
 <10087968.f3oyTHvrcu@yrla>
Message-ID: <23186.44456.424091.706602@rob.eddelbuettel.com>


On 25 February 2018 at 11:51, meik michalke wrote:
| 'Additional_repositories' is meant for R package repositories, it won't work 
| with source code git repos. if a package is in 'Suggests' and can't be found 

You missed the part where we create packages ("R CMD build") out of source
repos, and then place those packages in package repos.  That is what drat is for.

And with Additional_repositories, it plays with the install.packages() and
update.packages() functions just as it should -- because package dependency
resolution is a powerful mechanism we like to use whereever possible.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From meik.michalke at hhu.de  Sun Feb 25 14:20:32 2018
From: meik.michalke at hhu.de (meik michalke)
Date: Sun, 25 Feb 2018 14:20:32 +0100
Subject: [R-pkg-devel] How to (conditionally) use an archived package
 (without Suggests)?
In-Reply-To: <23186.44456.424091.706602@rob.eddelbuettel.com>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <10087968.f3oyTHvrcu@yrla> <23186.44456.424091.706602@rob.eddelbuettel.com>
Message-ID: <14094729.c4fSE1VY0n@yrla>

Am Sonntag, 25. Februar 2018, 06:35:52 CET schrieb Dirk Eddelbuettel:
> On 25 February 2018 at 11:51, meik michalke wrote:
> | 'Additional_repositories' is meant for R package repositories, it won't
> | work  with source code git repos. if a package is in 'Suggests' and can't
> | be found
> You missed the part where we create packages ("R CMD build") out of source
> repos, and then place those packages in package repos.  That is what drat is
> for.

maybe you missed the part where the OP tried to use
https://github.com/waddella/loon in 'Additional_repositories'? AFAIK you can't 
use a simple git source code repository of a package.

i'm maintaining various alternative repos myself ( https://reaktanz.de/R/ ; 
https://files.kde.org/rkward/R/ ; https://undocumeantit.github.io/repos/l10n/ 
) using roxyPackage instead of drat.

> And with Additional_repositories, it plays with the install.packages() and
> update.packages() functions just as it should -- because package dependency
> resolution is a powerful mechanism we like to use whereever possible.

do you mean that a dependency is automatically fetched and installed from an 
*alternative* repo configured via 'Additional_repositories'? i didn't get that 
to work. i only ever managed CRAN to see that the package is there during 
checks, but not install it.

take the 'sylly' package:
  https://cran.r-project.org/package=sylly

it has

  Additional_repositories: https://undocumeantit.github.io/repos/l10n

in its DESCRIPTION and suggests 'sylly.de', 'sylly.en', and 'sylly.es'. but 
when i run

  install.packages("sylly", dependencies=TRUE)

i get:

  Warning: dependencies ?testthat?, ?sylly.de?, ?sylly.en?, ?sylly.es? are not
    available

am i missing something?


viele gr??e :: m.eik

-- 
  dipl. psych. meik michalke
  abt. f"ur diagnostik und differentielle psychologie
  institut f"ur experimentelle psychologie
  heinrich-heine-universit"at                             
  geb"aude 23.03.00.26        |  tel +49 (0)211 8113498
  40204 d"usseldorf           |  fax +49 (0)211 8111753

  http://www.psycho.hhu.de    https://reaktanz.de
  https://rkward.kde.org      https://twitter.com/RKWardNet

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 473 bytes
Desc: This is a digitally signed message part.
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20180225/76cc2630/attachment.sig>

From marius.hofert at uwaterloo.ca  Sun Feb 25 15:00:08 2018
From: marius.hofert at uwaterloo.ca (Marius Hofert)
Date: Sun, 25 Feb 2018 15:00:08 +0100
Subject: [R-pkg-devel] 
 [FORGED] Re: How to (conditionally) use an archived
 package (without Suggests)?
In-Reply-To: <87f9a604607b4ebc99a97410cdd3e80e@connhm04.connect.uwaterloo.ca>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <32da15e33c494e059a2bce66c4a89f85@connhm04.connect.uwaterloo.ca>
 <CAM3-KjY-VRnrHqo683YPHOrTH+_=D3qsYBgz8OzQ8PS7mTG9yQ@mail.gmail.com>
 <de6cc85aa9f545df8f96ab063e17dd14@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbwb7Hm_cCryRNy6dPdYDBMAzYgp+hMBvSk=cLvFTvH2w@mail.gmail.com>
 <0db0cb87f2194cb4b75e9bc950ab2d51@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbb6rb7zAjEpRKCXKtvL4JkkwbHADBxJbeT0V8ZY6e+eQ@mail.gmail.com>
 <354f09e072584ae89fd546fd1084878b@connhm04.connect.uwaterloo.ca>
 <CAM3-KjaOzywojj_b85QQHnJnYP6N0zVvJx+_eu4nG24tzrCNjg@mail.gmail.com>
 <87f9a604607b4ebc99a97410cdd3e80e@connhm04.connect.uwaterloo.ca>
Message-ID: <CAM3-Kja9KzFWLimFS3XY-aMVN32btYpH2i-FixgKNk7Z0RzfXQ@mail.gmail.com>

> As already suggested:
>  - create a drat repository,
>  - place a copy of loon (from its repo source or the Archive section) in it
>  - add the repo to Additional_repositories
>  - using Suggests: is now permissible as the package is now useable
>  - the ':::' not declared warning should now go away.

okay, so (afaik) this is just a github repos which contains an exact
copy of the github version of the problematic package (here: loon). I
would then (at some future point) just do a pull to get the latest
source, create the package from there and essential refer to it from
Additional_repositories via: "Additional_repositories:
https://myuser.github.io/drat"

(so if CRAN would actually archive packages directly to a github
repos, one would not need to create a separate copy/repos'es... :-) ).

Btw, at the bottom of http://eddelbuettel.github.io/drat/DratFAQ.html
you refer to 'wikipediatrend' as an example for how to use
Additional_repositories. The link points to
https://github.com/petermeissner/wikipediatrend/blob/master/DESCRIPTION
which does not contain such a line. Might be better to just refer to
your R paper.

Cheers,
M

> An 'archived' package no longer exists in the package dependency graph
> ("Archive" is not a repo) so you need to create one. Here Suggests: and
> Additional_repositories play along together nicely; drat helps create and
> manage a simple repo you can use.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd at debian.org  Sun Feb 25 17:23:12 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 25 Feb 2018 10:23:12 -0600
Subject: [R-pkg-devel] How to (conditionally) use an archived package
 (without Suggests)?
In-Reply-To: <14094729.c4fSE1VY0n@yrla>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <10087968.f3oyTHvrcu@yrla>
 <23186.44456.424091.706602@rob.eddelbuettel.com>
 <14094729.c4fSE1VY0n@yrla>
Message-ID: <23186.58096.934617.147631@rob.eddelbuettel.com>


On 25 February 2018 at 14:20, meik michalke wrote:
| Am Sonntag, 25. Februar 2018, 06:35:52 CET schrieb Dirk Eddelbuettel:
| > On 25 February 2018 at 11:51, meik michalke wrote:
| > | 'Additional_repositories' is meant for R package repositories, it won't
| > | work  with source code git repos. if a package is in 'Suggests' and can't
| > | be found
| > You missed the part where we create packages ("R CMD build") out of source
| > repos, and then place those packages in package repos.  That is what drat is
| > for.
| 
| maybe you missed the part where the OP tried to use
| https://github.com/waddella/loon in 'Additional_repositories'? AFAIK you can't 
| use a simple git source code repository of a package.

It this really so hard?  I have been suggesting, in vain, to _create a
tarball_ and insert said tarball into a package repository precisely because
OP is stuck.

You are not helping by reiterating the OPs position three times over.
 
| do you mean that a dependency is automatically fetched and installed from an 
| *alternative* repo configured via 'Additional_repositories'? i didn't get that 

Yes. We used that for years via drat. And again, no magic.

R tools essentially do that automagically (if dependencies in visible repos
you declared in your session, obviously -- no magic lamps or powder
dust). The dependencies get resolved.  CRAN is no different if you consider
how eg BioConductor gets resolved automagically (and again, see the R Journal
paper for long details if you need them).  Works for source or data packages,
the latter is discussed there.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd at debian.org  Sun Feb 25 17:25:39 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 25 Feb 2018 10:25:39 -0600
Subject: [R-pkg-devel] 
 [FORGED] Re: How to (conditionally) use an archived
 package (without Suggests)?
In-Reply-To: <CAM3-Kja9KzFWLimFS3XY-aMVN32btYpH2i-FixgKNk7Z0RzfXQ@mail.gmail.com>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <32da15e33c494e059a2bce66c4a89f85@connhm04.connect.uwaterloo.ca>
 <CAM3-KjY-VRnrHqo683YPHOrTH+_=D3qsYBgz8OzQ8PS7mTG9yQ@mail.gmail.com>
 <de6cc85aa9f545df8f96ab063e17dd14@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbwb7Hm_cCryRNy6dPdYDBMAzYgp+hMBvSk=cLvFTvH2w@mail.gmail.com>
 <0db0cb87f2194cb4b75e9bc950ab2d51@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbb6rb7zAjEpRKCXKtvL4JkkwbHADBxJbeT0V8ZY6e+eQ@mail.gmail.com>
 <354f09e072584ae89fd546fd1084878b@connhm04.connect.uwaterloo.ca>
 <CAM3-KjaOzywojj_b85QQHnJnYP6N0zVvJx+_eu4nG24tzrCNjg@mail.gmail.com>
 <87f9a604607b4ebc99a97410cdd3e80e@connhm04.connect.uwaterloo.ca>
 <CAM3-Kja9KzFWLimFS3XY-aMVN32btYpH2i-FixgKNk7Z0RzfXQ@mail.gmail.com>
Message-ID: <23186.58243.15530.282444@rob.eddelbuettel.com>


On 25 February 2018 at 15:00, Marius Hofert wrote:
| okay, so (afaik) this is just a github repos which contains an exact
| copy of the github version of the problematic package (here: loon). I

Be very careful with terminology here:

 -- "github repo" is to most people a source code repo
 -- drat uses github and its "automatic webserver" to provide an "R repo", ie
    a repository for R packages (ie .tar.gz, binaries for macOS and windows
    work too if you build them).

I have long joked that I wrote more documentation than code for drat, and it
still confused the hell out of people.  But there are numerous vignettes, a
useR talk I have and of course the long and very detailed paper.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From hugh.parsonage at gmail.com  Sun Feb 25 17:45:41 2018
From: hugh.parsonage at gmail.com (Hugh Parsonage)
Date: Sun, 25 Feb 2018 16:45:41 +0000
Subject: [R-pkg-devel] 
 [FORGED] Re: How to (conditionally) use an archived
 package (without Suggests)?
In-Reply-To: <23186.58243.15530.282444@rob.eddelbuettel.com>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <32da15e33c494e059a2bce66c4a89f85@connhm04.connect.uwaterloo.ca>
 <CAM3-KjY-VRnrHqo683YPHOrTH+_=D3qsYBgz8OzQ8PS7mTG9yQ@mail.gmail.com>
 <de6cc85aa9f545df8f96ab063e17dd14@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbwb7Hm_cCryRNy6dPdYDBMAzYgp+hMBvSk=cLvFTvH2w@mail.gmail.com>
 <0db0cb87f2194cb4b75e9bc950ab2d51@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbb6rb7zAjEpRKCXKtvL4JkkwbHADBxJbeT0V8ZY6e+eQ@mail.gmail.com>
 <354f09e072584ae89fd546fd1084878b@connhm04.connect.uwaterloo.ca>
 <CAM3-KjaOzywojj_b85QQHnJnYP6N0zVvJx+_eu4nG24tzrCNjg@mail.gmail.com>
 <87f9a604607b4ebc99a97410cdd3e80e@connhm04.connect.uwaterloo.ca>
 <CAM3-Kja9KzFWLimFS3XY-aMVN32btYpH2i-FixgKNk7Z0RzfXQ@mail.gmail.com>
 <23186.58243.15530.282444@rob.eddelbuettel.com>
Message-ID: <CAJmOi+Ogy=JYZQkMT1_eZSXOjw4OqPY6=9Y79Pd+qvcSmEZEAw@mail.gmail.com>

Not to mention a drat repository you can just fork with a single click!
On Mon, 26 Feb 2018 at 3:25 am, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 25 February 2018 at 15:00, Marius Hofert wrote:
> | okay, so (afaik) this is just a github repos which contains an exact
> | copy of the github version of the problematic package (here: loon). I
>
> Be very careful with terminology here:
>
>  -- "github repo" is to most people a source code repo
>  -- drat uses github and its "automatic webserver" to provide an "R repo",
> ie
>     a repository for R packages (ie .tar.gz, binaries for macOS and windows
>     work too if you build them).
>
> I have long joked that I wrote more documentation than code for drat, and
> it
> still confused the hell out of people.  But there are numerous vignettes, a
> useR talk I have and of course the long and very detailed paper.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd at debian.org  Sun Feb 25 18:09:57 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 25 Feb 2018 11:09:57 -0600
Subject: [R-pkg-devel] 
 [FORGED] Re: How to (conditionally) use an archived
 package (without Suggests)?
In-Reply-To: <CAJmOi+Ogy=JYZQkMT1_eZSXOjw4OqPY6=9Y79Pd+qvcSmEZEAw@mail.gmail.com>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <32da15e33c494e059a2bce66c4a89f85@connhm04.connect.uwaterloo.ca>
 <CAM3-KjY-VRnrHqo683YPHOrTH+_=D3qsYBgz8OzQ8PS7mTG9yQ@mail.gmail.com>
 <de6cc85aa9f545df8f96ab063e17dd14@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbwb7Hm_cCryRNy6dPdYDBMAzYgp+hMBvSk=cLvFTvH2w@mail.gmail.com>
 <0db0cb87f2194cb4b75e9bc950ab2d51@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbb6rb7zAjEpRKCXKtvL4JkkwbHADBxJbeT0V8ZY6e+eQ@mail.gmail.com>
 <354f09e072584ae89fd546fd1084878b@connhm04.connect.uwaterloo.ca>
 <CAM3-KjaOzywojj_b85QQHnJnYP6N0zVvJx+_eu4nG24tzrCNjg@mail.gmail.com>
 <87f9a604607b4ebc99a97410cdd3e80e@connhm04.connect.uwaterloo.ca>
 <CAM3-Kja9KzFWLimFS3XY-aMVN32btYpH2i-FixgKNk7Z0RzfXQ@mail.gmail.com>
 <23186.58243.15530.282444@rob.eddelbuettel.com>
 <CAJmOi+Ogy=JYZQkMT1_eZSXOjw4OqPY6=9Y79Pd+qvcSmEZEAw@mail.gmail.com>
Message-ID: <23186.60901.251320.599656@rob.eddelbuettel.com>


On 25 February 2018 at 16:45, Hugh Parsonage wrote:
| Not to mention a drat repository you can just fork with a single click!

Yes, very easy -- but marginally expensive as you get the content (ie drat
code history) mirrored.  If you're at ease with git you can do it all by hand
too.  We still use the gh-pages branch for the webserver though (but now
support a contributed option to override that default target branch).

The other good thing that there are a number of public drat repos so you can
always poke around.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From meik.michalke at hhu.de  Sun Feb 25 19:50:44 2018
From: meik.michalke at hhu.de (meik michalke)
Date: Sun, 25 Feb 2018 19:50:44 +0100
Subject: [R-pkg-devel] stages of package loading
In-Reply-To: <13124329.Xcada71lX3@yrla>
References: <13124329.Xcada71lX3@yrla>
Message-ID: <7330380.zRMOOn0W3i@yrla>

Am Sonntag, 25. Februar 2018, 12:38:35 CET schrieb meik michalke:
> now i want to load A and B without X falsely informing me that they are
> missing. i.e., it should be clear to X that A is available and currently
> being loaded when X itself is loaded as the dependency of A.
> 
> it seems .onLoad() is not the right place for X to search for A or B,
> because it always throws the message when the first of both packages is
> being loaded. any suggestions?

don't bother, i've decided to unsubscribe again and look somewhere else :: m.

-- 
  dipl. psych. meik michalke
  abt. f"ur diagnostik und differentielle psychologie
  institut f"ur experimentelle psychologie
  heinrich-heine-universit"at                             
  geb"aude 23.03.00.26        |  tel +49 (0)211 8113498
  40204 d"usseldorf           |  fax +49 (0)211 8111753

  http://www.psycho.hhu.de    https://reaktanz.de
  https://rkward.kde.org      https://twitter.com/RKWardNet

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 473 bytes
Desc: This is a digitally signed message part.
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20180225/b407e0a8/attachment.sig>

From lists at revelle.net  Sun Feb 25 23:49:06 2018
From: lists at revelle.net (William Revelle)
Date: Sun, 25 Feb 2018 16:49:06 -0600
Subject: [R-pkg-devel] author field in description problem
Message-ID: <0E360C1B-6466-4DF4-BC90-43D7A91D6001@revelle.net>

Hi,

I am trying to take advantage of the Authors at R: field in my description file for the psych package to add an ORCID address (as discussed in the R journal).

When I R CMD check with R development on my Mac, or with win builder it passes all checks. (R Under development (unstable) (2018-02-23 r74298)  )

But, when I test with current R on a Mac or at win builder it throws a note:

Author field differs from that derived from Authors at R
  Author:    'William Revelle [aut, cre] (<https://orcid.org/0000-0003-4880-9610>)'
  Authors at R: 'William Revelle [aut, cre] (0000-0003-4880-9610)?


Is there a way to fix this or should I just go ahead and submit to CRAN with a note saying that it works on R development but gives a note on R 3.4.3 ?

The offending line in the Description file seems to be

Authors at R:  person("William", "Revelle", role =c("aut","cre"), email="revelle at northwestern.edu", comment=c(ORCID  = "0000-0003-4880-9610") )

Thanks for any suggestions.

Bill


William Revelle		   personality-project.org/revelle.html
Professor			          personality-project.org
Department of Psychology www.wcas.northwestern.edu/psych/
Northwestern University	   www.northwestern.edu/
Use R for psychology         personality-project.org/r
It is 2   minutes to midnight   www.thebulletin.org


From i.ucar86 at gmail.com  Mon Feb 26 00:20:25 2018
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Mon, 26 Feb 2018 00:20:25 +0100
Subject: [R-pkg-devel] author field in description problem
In-Reply-To: <0E360C1B-6466-4DF4-BC90-43D7A91D6001@revelle.net>
References: <0E360C1B-6466-4DF4-BC90-43D7A91D6001@revelle.net>
Message-ID: <CALEXWq24kaBzxB1fjaYonQCYZW51b4=PgzF87NLBUguBQcrfQQ@mail.gmail.com>

2018-02-25 23:49 GMT+01:00 William Revelle <lists at revelle.net>:
> Hi,
>
> I am trying to take advantage of the Authors at R: field in my description file for the psych package to add an ORCID address (as discussed in the R journal).
>
> When I R CMD check with R development on my Mac, or with win builder it passes all checks. (R Under development (unstable) (2018-02-23 r74298)  )
>
> But, when I test with current R on a Mac or at win builder it throws a note:
>
> Author field differs from that derived from Authors at R
>   Author:    'William Revelle [aut, cre] (<https://orcid.org/0000-0003-4880-9610>)'
>   Authors at R: 'William Revelle [aut, cre] (0000-0003-4880-9610)?
>
>
> Is there a way to fix this or should I just go ahead and submit to CRAN with a note saying that it works on R development but gives a note on R 3.4.3 ?
>
> The offending line in the Description file seems to be
>
> Authors at R:  person("William", "Revelle", role =c("aut","cre"), email="revelle at northwestern.edu", comment=c(ORCID  = "0000-0003-4880-9610") )
>
> Thanks for any suggestions.

You can use ?Authors at R? only to fix this NOTE. According to "Writing R
Extensions":

"Both ?Author? and ?Maintainer? fields can be omitted if a suitable
?Authors at R? field is given. [...] The ?Author? and ?Maintainer? fields
are auto-generated from it if needed when building or installing."

I?aki

>
> Bill
>
>


From lists at revelle.net  Mon Feb 26 00:39:17 2018
From: lists at revelle.net (William Revelle)
Date: Sun, 25 Feb 2018 17:39:17 -0600
Subject: [R-pkg-devel] author field in description problem
In-Reply-To: <CALEXWq24kaBzxB1fjaYonQCYZW51b4=PgzF87NLBUguBQcrfQQ@mail.gmail.com>
References: <0E360C1B-6466-4DF4-BC90-43D7A91D6001@revelle.net>
 <CALEXWq24kaBzxB1fjaYonQCYZW51b4=PgzF87NLBUguBQcrfQQ@mail.gmail.com>
Message-ID: <29F01C5E-CF3D-4B6E-A34E-B9EC50D15099@revelle.net>

I did remove the author and maintainer fields. I have only the Authors at R field.  However it still throws that Note (in R 3.4.3)

> On Feb 25, 2018, at 5:20 PM, I?aki ?car <i.ucar86 at gmail.com> wrote:
> 
> 2018-02-25 23:49 GMT+01:00 William Revelle <lists at revelle.net>:
>> Hi,
>> 
>> I am trying to take advantage of the Authors at R: field in my description file for the psych package to add an ORCID address (as discussed in the R journal).
>> 
>> When I R CMD check with R development on my Mac, or with win builder it passes all checks. (R Under development (unstable) (2018-02-23 r74298)  )
>> 
>> But, when I test with current R on a Mac or at win builder it throws a note:
>> 
>> Author field differs from that derived from Authors at R
>>  Author:    'William Revelle [aut, cre] (<https://orcid.org/0000-0003-4880-9610>)'
>>  Authors at R: 'William Revelle [aut, cre] (0000-0003-4880-9610)?
>> 
>> 
>> Is there a way to fix this or should I just go ahead and submit to CRAN with a note saying that it works on R development but gives a note on R 3.4.3 ?
>> 
>> The offending line in the Description file seems to be
>> 
>> Authors at R:  person("William", "Revelle", role =c("aut","cre"), email="revelle at northwestern.edu", comment=c(ORCID  = "0000-0003-4880-9610") )
>> 
>> Thanks for any suggestions.
> 
> You can use ?Authors at R? only to fix this NOTE. According to "Writing R
> Extensions":
> 
> "Both ?Author? and ?Maintainer? fields can be omitted if a suitable
> ?Authors at R? field is given. [...] The ?Author? and ?Maintainer? fields
> are auto-generated from it if needed when building or installing."
> 
> I?aki
> 
>> 
>> Bill

William Revelle		   personality-project.org/revelle.html
Professor			          personality-project.org
Department of Psychology www.wcas.northwestern.edu/psych/
Northwestern University	   www.northwestern.edu/
Use R for psychology         personality-project.org/r
It is 2 1/2  minutes to midnight   www.thebulletin.org


From ligges at statistik.tu-dortmund.de  Mon Feb 26 00:55:43 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Mon, 26 Feb 2018 00:55:43 +0100
Subject: [R-pkg-devel] author field in description problem
In-Reply-To: <29F01C5E-CF3D-4B6E-A34E-B9EC50D15099@revelle.net>
References: <0E360C1B-6466-4DF4-BC90-43D7A91D6001@revelle.net>
 <CALEXWq24kaBzxB1fjaYonQCYZW51b4=PgzF87NLBUguBQcrfQQ@mail.gmail.com>
 <29F01C5E-CF3D-4B6E-A34E-B9EC50D15099@revelle.net>
Message-ID: <20c37db7-8021-9029-61a8-074fb7608429@statistik.tu-dortmund.de>



On 26.02.2018 00:39, William Revelle wrote:
> I did remove the author and maintainer fields. I have only the Authors at R field.  However it still throws that Note (in R 3.4.3)

Ignore it. R-3.4.3 doid not know about the ORCID feature, hence goves 
this note.

Best,
Uwe Ligges



> 
>> On Feb 25, 2018, at 5:20 PM, I?aki ?car <i.ucar86 at gmail.com> wrote:
>>
>> 2018-02-25 23:49 GMT+01:00 William Revelle <lists at revelle.net>:
>>> Hi,
>>>
>>> I am trying to take advantage of the Authors at R: field in my description file for the psych package to add an ORCID address (as discussed in the R journal).
>>>
>>> When I R CMD check with R development on my Mac, or with win builder it passes all checks. (R Under development (unstable) (2018-02-23 r74298)  )
>>>
>>> But, when I test with current R on a Mac or at win builder it throws a note:
>>>
>>> Author field differs from that derived from Authors at R
>>>   Author:    'William Revelle [aut, cre] (<https://orcid.org/0000-0003-4880-9610>)'
>>>   Authors at R: 'William Revelle [aut, cre] (0000-0003-4880-9610)?
>>>
>>>
>>> Is there a way to fix this or should I just go ahead and submit to CRAN with a note saying that it works on R development but gives a note on R 3.4.3 ?
>>>
>>> The offending line in the Description file seems to be
>>>
>>> Authors at R:  person("William", "Revelle", role =c("aut","cre"), email="revelle at northwestern.edu", comment=c(ORCID  = "0000-0003-4880-9610") )
>>>
>>> Thanks for any suggestions.
>>
>> You can use ?Authors at R? only to fix this NOTE. According to "Writing R
>> Extensions":
>>
>> "Both ?Author? and ?Maintainer? fields can be omitted if a suitable
>> ?Authors at R? field is given. [...] The ?Author? and ?Maintainer? fields
>> are auto-generated from it if needed when building or installing."
>>
>> I?aki
>>
>>>
>>> Bill
> 
> William Revelle		   personality-project.org/revelle.html
> Professor			          personality-project.org
> Department of Psychology www.wcas.northwestern.edu/psych/
> Northwestern University	   www.northwestern.edu/
> Use R for psychology         personality-project.org/r
> It is 2 1/2  minutes to midnight   www.thebulletin.org
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From lists at revelle.net  Mon Feb 26 01:04:22 2018
From: lists at revelle.net (William Revelle)
Date: Sun, 25 Feb 2018 18:04:22 -0600
Subject: [R-pkg-devel] author field in description problem
In-Reply-To: <20c37db7-8021-9029-61a8-074fb7608429@statistik.tu-dortmund.de>
References: <0E360C1B-6466-4DF4-BC90-43D7A91D6001@revelle.net>
 <CALEXWq24kaBzxB1fjaYonQCYZW51b4=PgzF87NLBUguBQcrfQQ@mail.gmail.com>
 <29F01C5E-CF3D-4B6E-A34E-B9EC50D15099@revelle.net>
 <20c37db7-8021-9029-61a8-074fb7608429@statistik.tu-dortmund.de>
Message-ID: <F17C0D6D-A25E-4004-8476-454C31B5817A@revelle.net>

Uwe,
 Thanks.  I was hoping that you would say that.

Bill


> On Feb 25, 2018, at 5:55 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> 
> 
> On 26.02.2018 00:39, William Revelle wrote:
>> I did remove the author and maintainer fields. I have only the Authors at R field.  However it still throws that Note (in R 3.4.3)
> 
> Ignore it. R-3.4.3 doid not know about the ORCID feature, hence goves this note.
> 
> Best,
> Uwe Ligges
> 
> 
> 
>>> On Feb 25, 2018, at 5:20 PM, I?aki ?car <i.ucar86 at gmail.com> wrote:
>>> 
>>> 2018-02-25 23:49 GMT+01:00 William Revelle <lists at revelle.net>:
>>>> Hi,
>>>> 
>>>> I am trying to take advantage of the Authors at R: field in my description file for the psych package to add an ORCID address (as discussed in the R journal).
>>>> 
>>>> When I R CMD check with R development on my Mac, or with win builder it passes all checks. (R Under development (unstable) (2018-02-23 r74298)  )
>>>> 
>>>> But, when I test with current R on a Mac or at win builder it throws a note:
>>>> 
>>>> Author field differs from that derived from Authors at R
>>>>  Author:    'William Revelle [aut, cre] (<https://orcid.org/0000-0003-4880-9610>)'
>>>>  Authors at R: 'William Revelle [aut, cre] (0000-0003-4880-9610)?
>>>> 
>>>> 
>>>> Is there a way to fix this or should I just go ahead and submit to CRAN with a note saying that it works on R development but gives a note on R 3.4.3 ?
>>>> 
>>>> The offending line in the Description file seems to be
>>>> 
>>>> Authors at R:  person("William", "Revelle", role =c("aut","cre"), email="revelle at northwestern.edu", comment=c(ORCID  = "0000-0003-4880-9610") )
>>>> 
>>>> Thanks for any suggestions.
>>> 
>>> You can use ?Authors at R? only to fix this NOTE. According to "Writing R
>>> Extensions":
>>> 
>>> "Both ?Author? and ?Maintainer? fields can be omitted if a suitable
>>> ?Authors at R? field is given. [...] The ?Author? and ?Maintainer? fields
>>> are auto-generated from it if needed when building or installing."
>>> 
>>> I?aki
>>> 
>>>> 
>>>> Bill
>> William Revelle		   personality-project.org/revelle.html
>> Professor			          personality-project.org
>> Department of Psychology www.wcas.northwestern.edu/psych/
>> Northwestern University	   www.northwestern.edu/
>> Use R for psychology         personality-project.org/r
>> It is 2 1/2  minutes to midnight   www.thebulletin.org
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

William Revelle		   personality-project.org/revelle.html
Professor			          personality-project.org
Department of Psychology www.wcas.northwestern.edu/psych/
Northwestern University	   www.northwestern.edu/
Use R for psychology         personality-project.org/r
It is 2  minutes to midnight   www.thebulletin.org


From jason.serviss at ki.se  Mon Feb 26 08:41:21 2018
From: jason.serviss at ki.se (Jason Serviss)
Date: Mon, 26 Feb 2018 07:41:21 +0000
Subject: [R-pkg-devel] author field in description problem
In-Reply-To: <F17C0D6D-A25E-4004-8476-454C31B5817A@revelle.net>
References: <0E360C1B-6466-4DF4-BC90-43D7A91D6001@revelle.net>
 <CALEXWq24kaBzxB1fjaYonQCYZW51b4=PgzF87NLBUguBQcrfQQ@mail.gmail.com>
 <29F01C5E-CF3D-4B6E-A34E-B9EC50D15099@revelle.net>
 <20c37db7-8021-9029-61a8-074fb7608429@statistik.tu-dortmund.de>
 <F17C0D6D-A25E-4004-8476-454C31B5817A@revelle.net>
Message-ID: <EB37F533-FF51-42F5-A0F7-9C4B9ACD7DC9@ki.se>

William,

I use the Authors at R field to include my ORCID in this package: https://github.com/jasonserviss/ClusterSignificance/blob/master/DESCRIPTION

and get no notes (concerning that anyway) on windows (https://www.bioconductor.org/checkResults/3.6/bioc-LATEST/ClusterSignificance/tokay1-checksrc.html). My author field looks a bit different though:

Authors at R: c(
  person("Jason T.", "Serviss", email = "Jason.serviss at ki.se<mailto:Jason.serviss at ki.se>", role = c("aut", "cre"), comment = c(ORCID = 0000-0002-5778-7014)),
  person("Jesper R.", "Gadin", email = "Jesper.gadin at ki.se<mailto:Jesper.gadin at ki.se>", role = c("aut"))
)
Author: Jason T. Serviss [aut, cre],
  Jesper R. Gadin [aut]

Might help to resolve the note.

Kind Regards,
Jason


On 26 Feb 2018, at 01:04, William Revelle <lists at revelle.net<mailto:lists at revelle.net>> wrote:

Uwe,
Thanks.  I was hoping that you would say that.

Bill


On Feb 25, 2018, at 5:55 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de<mailto:ligges at statistik.tu-dortmund.de>> wrote:



On 26.02.2018 00:39, William Revelle wrote:
I did remove the author and maintainer fields. I have only the Authors at R field.  However it still throws that Note (in R 3.4.3)

Ignore it. R-3.4.3 doid not know about the ORCID feature, hence goves this note.

Best,
Uwe Ligges



On Feb 25, 2018, at 5:20 PM, I?aki ?car <i.ucar86 at gmail.com<mailto:i.ucar86 at gmail.com>> wrote:

2018-02-25 23:49 GMT+01:00 William Revelle <lists at revelle.net<mailto:lists at revelle.net>>:
Hi,

I am trying to take advantage of the Authors at R: field in my description file for the psych package to add an ORCID address (as discussed in the R journal).

When I R CMD check with R development on my Mac, or with win builder it passes all checks. (R Under development (unstable) (2018-02-23 r74298)  )

But, when I test with current R on a Mac or at win builder it throws a note:

Author field differs from that derived from Authors at R
Author:    'William Revelle [aut, cre] (<https://orcid.org/0000-0003-4880-9610>)'
Authors at R: 'William Revelle [aut, cre] (0000-0003-4880-9610)?


Is there a way to fix this or should I just go ahead and submit to CRAN with a note saying that it works on R development but gives a note on R 3.4.3 ?

The offending line in the Description file seems to be

Authors at R:  person("William", "Revelle", role =c("aut","cre"), email="revelle at northwestern.edu<mailto:revelle at northwestern.edu>", comment=c(ORCID  = "0000-0003-4880-9610") )

Thanks for any suggestions.

You can use ?Authors at R? only to fix this NOTE. According to "Writing R
Extensions":

"Both ?Author? and ?Maintainer? fields can be omitted if a suitable
?Authors at R? field is given. [...] The ?Author? and ?Maintainer? fields
are auto-generated from it if needed when building or installing."

I?aki


Bill
William Revelle    personality-project.org/revelle.html<http://personality-project.org/revelle.html>
Professor           personality-project.org<http://personality-project.org>
Department of Psychology www.wcas.northwestern.edu/psych/<http://www.wcas.northwestern.edu/psych/>
Northwestern University    www.northwestern.edu/<http://www.northwestern.edu/>
Use R for psychology         personality-project.org/r<http://personality-project.org/r>
It is 2 1/2  minutes to midnight   www.thebulletin.org<http://www.thebulletin.org>
______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

William Revelle    personality-project.org/revelle.html<http://personality-project.org/revelle.html>
Professor           personality-project.org<http://personality-project.org/>
Department of Psychology www.wcas.northwestern.edu/psych/<http://www.wcas.northwestern.edu/psych/>
Northwestern University    www.northwestern.edu/<http://www.northwestern.edu/>
Use R for psychology         personality-project.org/r<http://personality-project.org/r>
It is 2  minutes to midnight   www.thebulletin.org<http://www.thebulletin.org/>

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From leutnant at fh-muenster.de  Mon Feb 26 15:03:46 2018
From: leutnant at fh-muenster.de (Dominik Leutnant)
Date: Mon, 26 Feb 2018 14:03:46 +0000
Subject: [R-pkg-devel] vignette with third party software
Message-ID: <6E023D3C-9B8E-48E6-8EDB-2FD32DABD956@contoso.com>

Dear all,

We'd like to submit an update of the "swmmr" package to CRAN, which interfaces the rainfall runoff model SWMM from the US environmental protection agency.
The package also includes three vignettes which demonstrate how to run the external model from the R command line.
Within the vignettes, the locally installed SWMM model is executed. Of course, the model is not available on CRAN. My question therefore is:

How can we pass the incoming checks although processing the vignettes would fail?

Thanks in advance!
Best,
Dominik

Dominik Leutnant M.Sc.

Muenster University of Applied Sciences
Department of Civil Engineering
Institute for Infrastucture?Water?Resources?Environment (IWARU)
WG Urban Hydrology and Water Management
Corrensstr. 25
FRG-48149 M?nster, Germany

Tel.:  +49 (0) 251/83-65274
Fax:  +49 (0) 251/83-65915
Mail:  leutnant at fh-muenster.de<mailto:leutnant at fh-muenster.de>
Web: https://www.fh-muenster.de/


	[[alternative HTML version deleted]]


From i.ucar86 at gmail.com  Mon Feb 26 16:16:25 2018
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Mon, 26 Feb 2018 16:16:25 +0100
Subject: [R-pkg-devel] vignette with third party software
In-Reply-To: <6E023D3C-9B8E-48E6-8EDB-2FD32DABD956@contoso.com>
References: <6E023D3C-9B8E-48E6-8EDB-2FD32DABD956@contoso.com>
Message-ID: <CALEXWq1tgFQi0cNQoAeKqva=LAb3x5fSkVMe2CPAwju1YbFcZQ@mail.gmail.com>

2018-02-26 15:03 GMT+01:00 Dominik Leutnant <leutnant at fh-muenster.de>:
> Dear all,
>
> We'd like to submit an update of the "swmmr" package to CRAN, which interfaces the rainfall runoff model SWMM from the US environmental protection agency.
> The package also includes three vignettes which demonstrate how to run the external model from the R command line.
> Within the vignettes, the locally installed SWMM model is executed. Of course, the model is not available on CRAN. My question therefore is:
>
> How can we pass the incoming checks although processing the vignettes would fail?

If the size of the Example1.inp file is reasonable, you may include it
under the inst directory and retrieve it as follows in your vignettes:

inp_file <- system.file("Example1.inp", package="swmmr")

Otherwise, you may set knitr::opts_chunk$set(eval=FALSE) in the first
chunk for each vignette, so that your code is not executed and thus it
won't fail.

>
> Thanks in advance!
> Best,
> Dominik
>
> Dominik Leutnant M.Sc.
>

I?aki


From i.ucar86 at gmail.com  Mon Feb 26 16:31:15 2018
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Mon, 26 Feb 2018 16:31:15 +0100
Subject: [R-pkg-devel] vignette with third party software
In-Reply-To: <CALEXWq1tgFQi0cNQoAeKqva=LAb3x5fSkVMe2CPAwju1YbFcZQ@mail.gmail.com>
References: <6E023D3C-9B8E-48E6-8EDB-2FD32DABD956@contoso.com>
 <CALEXWq1tgFQi0cNQoAeKqva=LAb3x5fSkVMe2CPAwju1YbFcZQ@mail.gmail.com>
Message-ID: <CALEXWq1YAfMbPqUK3hDMJ8OD9mJotHk=vy0EqTB3nQ2FA-abwg@mail.gmail.com>

2018-02-26 16:16 GMT+01:00 I?aki ?car <i.ucar86 at gmail.com>:
> 2018-02-26 15:03 GMT+01:00 Dominik Leutnant <leutnant at fh-muenster.de>:
>> Dear all,
>>
>> We'd like to submit an update of the "swmmr" package to CRAN, which interfaces the rainfall runoff model SWMM from the US environmental protection agency.
>> The package also includes three vignettes which demonstrate how to run the external model from the R command line.
>> Within the vignettes, the locally installed SWMM model is executed. Of course, the model is not available on CRAN. My question therefore is:
>>
>> How can we pass the incoming checks although processing the vignettes would fail?
>
> If the size of the Example1.inp file is reasonable, you may include it
> under the inst directory and retrieve it as follows in your vignettes:
>
> inp_file <- system.file("Example1.inp", package="swmmr")

Let me add a couple more comments about this. In case you can include
the data file, this has the benefit that you can use it in your tests
too (I've seen that you simply skip_on_cran and skip_on_travis). Also,
I've seen that you write files in one vignette. Note that you should
use the tempdir() for that.

>
> Otherwise, you may set knitr::opts_chunk$set(eval=FALSE) in the first
> chunk for each vignette, so that your code is not executed and thus it
> won't fail.
>
>>
>> Thanks in advance!
>> Best,
>> Dominik
>>
>> Dominik Leutnant M.Sc.
>>
>
> I?aki

I?aki


From leutnant at fh-muenster.de  Mon Feb 26 21:31:54 2018
From: leutnant at fh-muenster.de (Dominik Leutnant)
Date: Mon, 26 Feb 2018 20:31:54 +0000
Subject: [R-pkg-devel] vignette with third party software
In-Reply-To: <CALEXWq3Hq5OBgBCyfqqzDFSWYVtMUOQU=tzx1SY6VtLUjzSsuw@mail.gmail.com>
References: <6E023D3C-9B8E-48E6-8EDB-2FD32DABD956@contoso.com>
 <CALEXWq1tgFQi0cNQoAeKqva=LAb3x5fSkVMe2CPAwju1YbFcZQ@mail.gmail.com>
 <CALEXWq1YAfMbPqUK3hDMJ8OD9mJotHk=vy0EqTB3nQ2FA-abwg@mail.gmail.com>
 <2D2BB505-DDA9-4748-A557-C81BC78CFCAA@fh-muenster.de>
 <CALEXWq2h5TjWtPjM06vdE1nHOoXcC6LrcAiN_SDmW+OnP0KYoA@mail.gmail.com>
 <92FE8753-CCC4-4506-9CD7-2C54A2B7E156@fh-muenster.de>
 <CALEXWq3q8J-JQYfujmFF36qJZkorV5QVaJ4UKLQRy_dmS82OWQ@mail.gmail.com>
 <1E793878-239A-425B-A0BF-ED384EAB06CA@fh-muenster.de>
 <CALEXWq3Hq5OBgBCyfqqzDFSWYVtMUOQU=tzx1SY6VtLUjzSsuw@mail.gmail.com>
Message-ID: <C51C0D1A-AE25-46E5-9207-0B7486D8B07E@fh-muenster.de>

Thanks, I?aki! Hopefully, the following is read by Uwe and/or the other CRAN maintainers:

The problem: 
My "swmmr" package provides functions to connect to the software "SWMM" (stormwater management model), offered by the US environmental protection agency (US EPA).
Inside the package, tests and vignettes call the external software with arguments, e.g. "swmm5.exe ARG1 ARG2 ARG3". 
Because the software is not installed on CRAN, checks on re-building of vignette outputs and tests will always fail.

Option 1: 
From the previous discussion with I?aki (thanks again!), I learned that third party software could eventually be installed on the CRAN system.
Although I don't know the prerequisites, at least the source code of the computational engine of SWMM software is public domain and offered by the US EPA (available with make files from
https://www.epa.gov/water-research/storm-water-management-model-swmm#downloads). 
Thus, if the engine could be compiled and installed on CRAN, the package and the vignettes could be fully tested/build on CRAN as well. 

Option 2:
Package tests are only locally executed. Vignettes either need to be removed from the package or maybe there is another way, that precompiled vignettes as html files could be accepted.

So, if anyone could point me in the right direction, I would be very thankful! 
Also, if anything is unclear, please feel free to get back to me!

Best regards 
Dominik

?Am 26.02.18, 17:52 schrieb "I?aki ?car" <i.ucar86 at gmail.com>:

    2018-02-26 17:46 GMT+01:00 Dominik Leutnant <leutnant at fh-muenster.de>:
    > That sounds promising!
    > SWMM indeed is open source and I compile versions for LINUX and Mac OS X by myself (Precompiled Windows executable is available from mentioned website you've mentioned).
    > So, how can I reach out to Uwe and Jeroen most easily for them?
    > Do they eventually read this conversation?
    
    I've just discovered that some mails ago one of us clicked "reply"
    instead of "reply to all" and we are off-list now. :-)
    
    You may reply to the original thread providing a summary of this
    off-list conversation, and then ask if SWMM could be considered to be
    installed on CRAN. Mention Uwe explicitly, he'll read it eventually,
    and point him to the proper resources (i.e., SWMM's source code).
    
    I?aki
    
    >
    >
    >
    >
    > Am 26.02.18, 17:33 schrieb "I?aki ?car" <i.ucar86 at gmail.com>:
    >
    >     2018-02-26 16:58 GMT+01:00 Dominik Leutnant <leutnant at fh-muenster.de>:
    >     > Oh, he really could do that? How about the other OS?
    >
    >     I think so. There are many external components installed on CRAN for
    >     many packages. I suppose it depends on whether they are open source or
    >     not, etc.
    >
    >     About the OSes, I see "Source Code for the SWMM Computational Engine" here:
    >
    >     https://www.epa.gov/water-research/storm-water-management-model-swmm#downloads
    >
    >     Is that what you need? Because, according to the makefiles inside, it
    >     should compile on Windows and Linux (then, probably on OSX too).
    >
    >     I would ask. It doesn't hurt, and you already have a "no". ;-)
    >
    >     I?aki
    >
    >     >
    >     > However, you're right: I should add "SystemRequirements" to the description field.  Thanks for that!
    >     >
    >     >
    >
    >
    


From marius.hofert at uwaterloo.ca  Mon Feb 26 21:45:34 2018
From: marius.hofert at uwaterloo.ca (Marius Hofert)
Date: Mon, 26 Feb 2018 21:45:34 +0100
Subject: [R-pkg-devel] 
 [FORGED] Re: How to (conditionally) use an archived
 package (without Suggests)?
In-Reply-To: <4ee1676eb9fe42f29cb89145070bf167@connhm04.connect.uwaterloo.ca>
References: <CAM3-KjbUK=zk-HZAp2nD-s28aiqWjeK4SCQiLaUC3cn9op5Jvw@mail.gmail.com>
 <32da15e33c494e059a2bce66c4a89f85@connhm04.connect.uwaterloo.ca>
 <CAM3-KjY-VRnrHqo683YPHOrTH+_=D3qsYBgz8OzQ8PS7mTG9yQ@mail.gmail.com>
 <de6cc85aa9f545df8f96ab063e17dd14@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbwb7Hm_cCryRNy6dPdYDBMAzYgp+hMBvSk=cLvFTvH2w@mail.gmail.com>
 <0db0cb87f2194cb4b75e9bc950ab2d51@connhm04.connect.uwaterloo.ca>
 <CAM3-Kjbb6rb7zAjEpRKCXKtvL4JkkwbHADBxJbeT0V8ZY6e+eQ@mail.gmail.com>
 <354f09e072584ae89fd546fd1084878b@connhm04.connect.uwaterloo.ca>
 <CAM3-KjaOzywojj_b85QQHnJnYP6N0zVvJx+_eu4nG24tzrCNjg@mail.gmail.com>
 <87f9a604607b4ebc99a97410cdd3e80e@connhm04.connect.uwaterloo.ca>
 <CAM3-Kja9KzFWLimFS3XY-aMVN32btYpH2i-FixgKNk7Z0RzfXQ@mail.gmail.com>
 <23186.58243.15530.282444@rob.eddelbuettel.com>
 <CAJmOi+Ogy=JYZQkMT1_eZSXOjw4OqPY6=9Y79Pd+qvcSmEZEAw@mail.gmail.com>
 <4ee1676eb9fe42f29cb89145070bf167@connhm04.connect.uwaterloo.ca>
Message-ID: <CAM3-KjaTHojsMoLMszHrUQe0n_UZvQ9hYx0z1bGCjsh1KWPMTg@mail.gmail.com>

Hi,

... as promised, here is essentially what Uwe mentioned: Under my
setup, it is acceptable that 'loon' (package 'bar') appears in
Suggests and that the DESCRIPTION text mentions how to install 'loon'
(from github; provide a link in the text with '<>') if the user wants
to do the plotting with 'loon'. That makes a lot of sense in my case.

Thanks everyone for helping on this.

Many cheers,
Marius


From carmen.livi at ifom.eu  Tue Feb 27 12:25:59 2018
From: carmen.livi at ifom.eu (Carmen M. Livi)
Date: Tue, 27 Feb 2018 12:25:59 +0100
Subject: [R-pkg-devel] CRAN submission spp 1.15.3. NOTE: checking S3
 generic/method consistency
In-Reply-To: <13CE643A-84C1-4741-9930-FAF322993893@hms.harvard.edu>
References: <125f52cc-f015-2340-88ac-55041b8ea0cb@statistik.tu-dortmund.de>
 <13CE643A-84C1-4741-9930-FAF322993893@hms.harvard.edu>
Message-ID: <9bb74416-a29f-2234-f9c4-d43a943fe4fe@ifom.eu>

Dear Uwe Ligges,

after submitting our package to CRAN we are getting the following NOTE:

===
* checking S3 generic/method consistency ... NOTE
Found the following apparent S3 methods exported but not registered:
 ?points.within
See section 'Registering S3 methods' in the 'Writing R Extensions'
manual.
===

"points.within" is not a S3 method. It is a function defined in the 
package.
The package is already widely used in the scientific community. 
Therefore renaming the function is not an option as it would cause a lot 
of problems to the users.

But I saw that there are several packages available on CRAN that contain 
NOTES reporting the same issue. For example:
https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-clang/pROC-00check.html

Do you have an advice on how I can address this problem? Would it be 
possible to still proceed with the submission as we are not getting 
errors nor warnings?

Kind regards,
Carmen



>> Thanks, we see:
>>
>>
>> * checking top-level files ... NOTE
>> Non-standard file/directory found at top level:
>> ?'aclocal.m4'
>>
>>
>> * checking S3 generic/method consistency ... NOTE
>> Found the following apparent S3 methods exported but not registered:
>> ?points.within
>> See section 'Registering S3 methods' in the 'Writing R Extensions'
>> manual.
>>
>>
>> * checking Rd \usage sections ... NOTE
>> S3 methods shown with full name in documentation object 'points.within':
>> ?'points.within'
>>
>> The \usage entries for S3 methods should use the \method markup and not
>> their full name.
>> See chapter 'Writing R documentation files' in the 'Writing R
>> Extensions' manual.
>>
>>
>> Is there some reference about the method you can add in the 
>> Description field in the form Authors (year) <doi:.....>?
>>
>>
>> Please fix and resubmit.
>>
>> Best,
>> Uwe Ligges


From vincent.nijs at gmail.com  Wed Feb 28 19:02:13 2018
From: vincent.nijs at gmail.com (Vincent Nijs)
Date: Wed, 28 Feb 2018 18:02:13 +0000
Subject: [R-pkg-devel] status of OS X Mavericks binaries on CRAN
Message-ID: <CAHu4znAOmSox8AegErnd=nuQEGqGwcCpD=gdUEBfTCjU3+cbZw@mail.gmail.com>

It seems that binaries on CRAN for r-oldrel on macOS haven't been updated
since mid January. Is support for R-3.3 on macOS likely to resume or do you
recommend that package developers now require R-3.4?

Thanks,

Vincent

	[[alternative HTML version deleted]]


From dstr7320 at uni.sydney.edu.au  Thu Mar  1 06:00:12 2018
From: dstr7320 at uni.sydney.edu.au (Dario Strbenac)
Date: Thu, 1 Mar 2018 05:00:12 +0000
Subject: [R-pkg-devel] Alignment of Function Arguments For PDF Manual and
 HTML
Message-ID: <MEXPR01MB0134EF725644F570095D8EEACDC60@MEXPR01MB0134.ausprd01.prod.outlook.com>

Good day,

If I have a function definition in the Usage section of an R documentation file (file name ending in .Rd) that requires two or more lines to specify, can I format it so that the first letter of the first variable on the second and subsequent lines is aligned with the opening bracket of the function in the PDF manual created by R CMD Rd2pdf and has the same appearance in the HTML page shown in RStudio? I notice that if I align the text for a particular output format, it doesn't look aligned in the other. The package I am developing is a part of Bioconductor, so I can't modify options to Rd2pdf.

--------------------------------------
Dario Strbenac
University of Sydney
Camperdown NSW 2050
Australia


From georgi.boshnakov at manchester.ac.uk  Thu Mar  1 09:59:02 2018
From: georgi.boshnakov at manchester.ac.uk (Georgi Boshnakov)
Date: Thu, 1 Mar 2018 08:59:02 +0000
Subject: [R-pkg-devel] 
 Alignment of Function Arguments For PDF Manual and HTML
In-Reply-To: <MEXPR01MB0134EF725644F570095D8EEACDC60@MEXPR01MB0134.ausprd01.prod.outlook.com>
References: <MEXPR01MB0134EF725644F570095D8EEACDC60@MEXPR01MB0134.ausprd01.prod.outlook.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F65021C@MBXP01.ds.man.ac.uk>

Hi,

The answer probably is No.

In principle, the usage section is in verbatim and I think that the R help system respects that also in html.
But how the html is rendered depends on the style used by the renderer, which may have other ideas and may reflow the text depending on the width of the window.

Georgi Boshnakov


-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Dario Strbenac
Sent: 01 March 2018 05:00
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Alignment of Function Arguments For PDF Manual and HTML

Good day,

If I have a function definition in the Usage section of an R documentation file (file name ending in .Rd) that requires two or more lines to specify, can I format it so that the first letter of the first variable on the second and subsequent lines is aligned with the opening bracket of the function in the PDF manual created by R CMD Rd2pdf and has the same appearance in the HTML page shown in RStudio? I notice that if I align the text for a particular output format, it doesn't look aligned in the other. The package I am developing is a part of Bioconductor, so I can't modify options to Rd2pdf.

--------------------------------------
Dario Strbenac
University of Sydney
Camperdown NSW 2050
Australia

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From dstanley at uoguelph.ca  Thu Mar  1 17:05:05 2018
From: dstanley at uoguelph.ca (David Stanley)
Date: Thu, 1 Mar 2018 16:05:05 +0000
Subject: [R-pkg-devel] Package check help: Package required but not available
Message-ID: <90C844E1-A203-4246-8EBD-FA42C00CB54B@uoguelph.ca>

Hi Everyone,

I?m new to this list but hopefully you can help me.

I?m working on updating my apaTables package (most recent code: https://github.com/dstanley4/apaTables)

However, I?m encountering problems passing the CRAN check because of a package I use (MBESS). MBESS is available on all platforms except r-patched-solaris-x86 (see https://cran.r-project.org/web/checks/check_results_apaTables.html)

To work around this I did three things that have not worked.

1) I modified the DESCRIPTION file. I moved MBESS from Imports to Suggests

2) I manipulated a flag (show.confidence.interval) in my file apaDvalueTable.R show that it is always FALSE if the following is FALSE: requireNamespace("MBESS", quietly = TRUE) . That is, if the package is not there do no calculate the confidence intervals that require it. But I still fail the check. Is this perhaps because I didn?t wrap the MBESS command on line 97 with an ?if? using requireNamespace? This command will never be executed without the package though because of the flag.

3) I also wrapped a command that uses MBESS in apaRegressionTable.R (line 276) that uses MBESS.

Any help much appreciated in resolving this "Package required but not available? problem.

(Detailed CRAN message below. Fixing the Notes issues are easy.)

Cheers,
David



David Stanley, PhD | Associate Professor
Department of Psychology | University of Guelph
4002 MacKinnon | 50 Stone Rd E | Guelph, ON | N1G 2W1
dstanley at uoguelph.ca<mailto:dstanley at uoguelph.ca>  | 519-824-4120 Ext. 58590
uoguelph.ca/psychology/users/david-stanley<http://uoguelph.ca/psychology/users/david-stanley>
@dstanley4


Dear maintainer,

package apaTables_2.0.1.tar.gz does not pass the incoming checks automatically, please see the pre-test at:
<https://win-builder.r-project.org/incoming_pretest/180301_161113_apaTables_201/00check.log>
Status: 2 NOTEs

Current CRAN status: ERROR: 1, OK: 11
See: <https://CRAN.R-project.org/web/checks/check_results_apaTables.html>

Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.

More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/180301_161113_apaTables_201>
The files will be removed after roughly 7 days.


Best regards,
CRAN teams' auto-check service


	[[alternative HTML version deleted]]


From lists at dewey.myzen.co.uk  Thu Mar  1 17:32:30 2018
From: lists at dewey.myzen.co.uk (Michael Dewey)
Date: Thu, 1 Mar 2018 16:32:30 +0000
Subject: [R-pkg-devel] Package check help: Package required but not
 available
In-Reply-To: <90C844E1-A203-4246-8EBD-FA42C00CB54B@uoguelph.ca>
References: <90C844E1-A203-4246-8EBD-FA42C00CB54B@uoguelph.ca>
Message-ID: <ec00b855-6048-6236-3fc1-4c0b851fc16c@dewey.myzen.co.uk>

Dear David

I am afraid R does not know what your flag is doing so you should try 
wrapping the command as you suggested.

Michael

On 01/03/2018 16:05, David Stanley wrote:
> Hi Everyone,
> 
> I?m new to this list but hopefully you can help me.
> 
> I?m working on updating my apaTables package (most recent code: https://github.com/dstanley4/apaTables)
> 
> However, I?m encountering problems passing the CRAN check because of a package I use (MBESS). MBESS is available on all platforms except r-patched-solaris-x86 (see https://cran.r-project.org/web/checks/check_results_apaTables.html)
> 
> To work around this I did three things that have not worked.
> 
> 1) I modified the DESCRIPTION file. I moved MBESS from Imports to Suggests
> 
> 2) I manipulated a flag (show.confidence.interval) in my file apaDvalueTable.R show that it is always FALSE if the following is FALSE: requireNamespace("MBESS", quietly = TRUE) . That is, if the package is not there do no calculate the confidence intervals that require it. But I still fail the check. Is this perhaps because I didn?t wrap the MBESS command on line 97 with an ?if? using requireNamespace? This command will never be executed without the package though because of the flag.
> 
> 3) I also wrapped a command that uses MBESS in apaRegressionTable.R (line 276) that uses MBESS.
> 
> Any help much appreciated in resolving this "Package required but not available? problem.
> 
> (Detailed CRAN message below. Fixing the Notes issues are easy.)
> 
> Cheers,
> David
> 
> 
> 
> David Stanley, PhD | Associate Professor
> Department of Psychology | University of Guelph
> 4002 MacKinnon | 50 Stone Rd E | Guelph, ON | N1G 2W1
> dstanley at uoguelph.ca<mailto:dstanley at uoguelph.ca>  | 519-824-4120 Ext. 58590
> uoguelph.ca/psychology/users/david-stanley<http://uoguelph.ca/psychology/users/david-stanley>
> @dstanley4
> 
> 
> Dear maintainer,
> 
> package apaTables_2.0.1.tar.gz does not pass the incoming checks automatically, please see the pre-test at:
> <https://win-builder.r-project.org/incoming_pretest/180301_161113_apaTables_201/00check.log>
> Status: 2 NOTEs
> 
> Current CRAN status: ERROR: 1, OK: 11
> See: <https://CRAN.R-project.org/web/checks/check_results_apaTables.html>
> 
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
> 
> More details are given in the directory:
> <https://win-builder.r-project.org/incoming_pretest/180301_161113_apaTables_201>
> The files will be removed after roughly 7 days.
> 
> 
> Best regards,
> CRAN teams' auto-check service
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From Joris.Meys at ugent.be  Thu Mar  1 17:33:39 2018
From: Joris.Meys at ugent.be (Joris Meys)
Date: Thu, 1 Mar 2018 17:33:39 +0100
Subject: [R-pkg-devel] Package check help: Package required but not
 available
In-Reply-To: <90C844E1-A203-4246-8EBD-FA42C00CB54B@uoguelph.ca>
References: <90C844E1-A203-4246-8EBD-FA42C00CB54B@uoguelph.ca>
Message-ID: <CAO1zAVbRF6MSSb36LS+WJF1R=KZv4t8vR2GorB_Ecn_CwacnPA@mail.gmail.com>

Hi David,

When looking at apaDvalueTable.R, there's nothing that prevents the
MBESS::ci.msd() call to be executed when show.conf.interval  is FALSE. Even
then the function will calculate it, just not show the result. So running
your example on Solaris will still give you an error. You'll have to add an
extra condition to prevent this.

On a sidenote: please use message() instead of cat() to send messages to
the user. Then anyone who doesn't want to see them (eg bcs they do a
simulation) can simply use suppressMessages() for that.

Cheers
Joris



On Thu, Mar 1, 2018 at 5:05 PM, David Stanley <dstanley at uoguelph.ca> wrote:

> Hi Everyone,
>
> I?m new to this list but hopefully you can help me.
>
> I?m working on updating my apaTables package (most recent code:
> https://github.com/dstanley4/apaTables)
>
> However, I?m encountering problems passing the CRAN check because of a
> package I use (MBESS). MBESS is available on all platforms except
> r-patched-solaris-x86 (see https://cran.r-project.org/
> web/checks/check_results_apaTables.html)
>
> To work around this I did three things that have not worked.
>
> 1) I modified the DESCRIPTION file. I moved MBESS from Imports to Suggests
>
> 2) I manipulated a flag (show.confidence.interval) in my file
> apaDvalueTable.R show that it is always FALSE if the following is FALSE:
> requireNamespace("MBESS", quietly = TRUE) . That is, if the package is not
> there do no calculate the confidence intervals that require it. But I still
> fail the check. Is this perhaps because I didn?t wrap the MBESS command on
> line 97 with an ?if? using requireNamespace? This command will never be
> executed without the package though because of the flag.
>
> 3) I also wrapped a command that uses MBESS in apaRegressionTable.R (line
> 276) that uses MBESS.
>
> Any help much appreciated in resolving this "Package required but not
> available? problem.
>
> (Detailed CRAN message below. Fixing the Notes issues are easy.)
>
> Cheers,
> David
>
>
>
> David Stanley, PhD | Associate Professor
> Department of Psychology | University of Guelph
> 4002 MacKinnon | 50 Stone Rd E | Guelph, ON | N1G 2W1
> dstanley at uoguelph.ca<mailto:dstanley at uoguelph.ca>  | 519-824-4120 Ext.
> 58590
> uoguelph.ca/psychology/users/david-stanley<http://uoguelph.
> ca/psychology/users/david-stanley>
> @dstanley4
>
>
> Dear maintainer,
>
> package apaTables_2.0.1.tar.gz does not pass the incoming checks
> automatically, please see the pre-test at:
> <https://win-builder.r-project.org/incoming_pretest/
> 180301_161113_apaTables_201/00check.log>
> Status: 2 NOTEs
>
> Current CRAN status: ERROR: 1, OK: 11
> See: <https://CRAN.R-project.org/web/checks/check_results_apaTables.html>
>
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on
> the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> If you are fairly certain the rejection is a false positive, please
> reply-all to this message and explain.
>
> More details are given in the directory:
> <https://win-builder.r-project.org/incoming_pretest/
> 180301_161113_apaTables_201>
> The files will be removed after roughly 7 days.
>
>
> Best regards,
> CRAN teams' auto-check service
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From plummerm at iarc.fr  Thu Mar  1 18:05:21 2018
From: plummerm at iarc.fr (Martyn Plummer)
Date: Thu, 1 Mar 2018 17:05:21 +0000
Subject: [R-pkg-devel] Package check help: Package required but not
 available
In-Reply-To: <90C844E1-A203-4246-8EBD-FA42C00CB54B@uoguelph.ca>
References: <90C844E1-A203-4246-8EBD-FA42C00CB54B@uoguelph.ca>
Message-ID: <1519923921.4751.65.camel@iarc.fr>

On Thu, 2018-03-01 at 16:05 +0000, David Stanley wrote:
> Hi Everyone,
> 
> I?m new to this list but hopefully you can help me.
> 
> I?m working on updating my apaTables package (most recent code: https
> ://github.com/dstanley4/apaTables)
> 
> However, I?m encountering problems passing the CRAN check because of
> a package I use (MBESS). MBESS is available on all platforms except
> r-patched-solaris-x86 (see https://cran.r-project.org/web/checks/chec
> k_results_apaTables.html)
> 
> To work around this I did three things that have not worked.
> 
> 1) I modified the DESCRIPTION file. I moved MBESS from Imports to
> Suggests
> 
> 2) I manipulated a flag (show.confidence.interval) in my file
> apaDvalueTable.R show that it is always FALSE if the following is
> FALSE: requireNamespace("MBESS", quietly = TRUE) . That is, if the
> package is not there do no calculate the confidence intervals that
> require it. But I still fail the check. Is this perhaps because I
> didn?t wrap the MBESS command on line 97 with an ?if? using
> requireNamespace? This command will never be executed without the
> package though because of the flag.
> 
> 3) I also wrapped a command that uses MBESS in apaRegressionTable.R
> (line 276) that uses MBESS.
> 
> Any help much appreciated in resolving this "Package required but not
> available? problem.

David, I think you are misinterpreting the message you are getting. 

The fact that the MBESS package is not available on Solaris is not your
fault and is not something you should have to work around. In fact, the
 problem is not even with the MBESS package, but with the rpf package
through the chain of dependencies:

ApaTables -> MBESS -> OpenMx -> rpf

Note that the message about the lack of availability of MBESS is for
the *current* version of Apatables on CRAN, (1.5.1), not the new
version that your are uploading (2.0.1).

The issues that require fixing are for the incoming checks, that take
place on Windows, i.e. the NOTEs that you say are easily fixed.

> (Detailed CRAN message below. Fixing the Notes issues are easy.)

Martyn

> Cheers,
> David
> 
> 
> 
> David Stanley, PhD | Associate Professor
> Department of Psychology | University of Guelph
> 4002 MacKinnon | 50 Stone Rd E | Guelph, ON | N1G 2W1
> dstanley at uoguelph.ca<mailto:dstanley at uoguelph.ca>  | 519-824-4120
> Ext. 58590
> uoguelph.ca/psychology/users/david-stanley<http://uoguelph.ca/psychol
> ogy/users/david-stanley>
> @dstanley4
> 
> 
> Dear maintainer,
> 
> package apaTables_2.0.1.tar.gz does not pass the incoming checks
> automatically, please see the pre-test at:
> <https://win-builder.r-project.org/incoming_pretest/180301_161113_apa
> Tables_201/00check.log>
> Status: 2 NOTEs
> 
> Current CRAN status: ERROR: 1, OK: 11
> See: <https://CRAN.R-project.org/web/checks/check_results_apaTables.h
> tml>
> 
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for
> help on the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> If you are fairly certain the rejection is a false positive, please
> reply-all to this message and explain.
> 
> More details are given in the directory:
> <https://win-builder.r-project.org/incoming_pretest/180301_161113_apa
> Tables_201>
> The files will be removed after roughly 7 days.
> 
> 
> Best regards,
> CRAN teams' auto-check service
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

From brian at braverock.com  Thu Mar  1 18:36:08 2018
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 01 Mar 2018 11:36:08 -0600
Subject: [R-pkg-devel] apparent S3 methods exported but not registered
In-Reply-To: <1516984532.6406.82.camel@braverock.com>
References: <1516984532.6406.82.camel@braverock.com>
Message-ID: <1519925768.9109.55.camel@braverock.com>

... bumping this in the hopes that someone has an answer ...

On Fri, 2018-01-26 at 10:35 -0600, Brian G. Peterson wrote:
> I'm preparing a new release of PerformanceAnalytics, and as usual
> this brings the host of CRAN checks.
> 
> I get this note:
> 
> * checking S3 generic/method consistency ... NOTE
> Found the following apparent S3 methods exported but not registered:
>   mean.LCL mean.UCL mean.geometric mean.stderr
> See section 'Registering S3 methods' in the 'Writing R Extensions'
> manual.
> 
> these are not S3 methods for 'mean', but rather helper functions that
> do other things related to means.
> 
> These functions have been in the package for over a decade, are used
> in
> coursework at a number of universities, and we assume are in user
> code.
>  So it seems that changing them would be disruptive.
> 
> Now, all that said, what to do about it?
> 
> We could register them as S3method{} , and I think calling them
> explicitly will still work, though this seems inelegant.
> 
> I can't find any way to tell R that these *aren't* S3 methods ...
> 
> Any insight would be greatly appreciated.
> 
> Regards,
> 
> Brian
> 
>


From dasonk at gmail.com  Thu Mar  1 18:40:10 2018
From: dasonk at gmail.com (Dason Kurkiewicz)
Date: Thu, 1 Mar 2018 11:40:10 -0600
Subject: [R-pkg-devel] apparent S3 methods exported but not registered
In-Reply-To: <CAJZYZZ6EKP8SAd0PONyOG5FLBBDbqP05Q1_SOOUU=hhuE23WzQ@mail.gmail.com>
References: <1516984532.6406.82.camel@braverock.com>
 <1519925768.9109.55.camel@braverock.com>
 <CAJZYZZ5n0g0GrSgovdGANx1zseUnpM3=abJUwi2odAPveigLPw@mail.gmail.com>
 <CAJZYZZ6EKP8SAd0PONyOG5FLBBDbqP05Q1_SOOUU=hhuE23WzQ@mail.gmail.com>
Message-ID: <CAJZYZZ4DFoQtV9rZrwW5zn1usgUGszpn7409t+KSHVeea+pjwA@mail.gmail.com>

They're just note NOTES. Although I don't like the names your functions
take because of the possibility to confuse with s3 if they have been in the
package as long as you say I don't see why this would be an issue. Just
send an explanation when you submit and I don't think there should be any
issues.

-Dason Kurkiewicz

On Mar 1, 2018 11:36 AM, "Brian G. Peterson" <brian at braverock.com> wrote:

... bumping this in the hopes that someone has an answer ...

On Fri, 2018-01-26 at 10:35 -0600, Brian G. Peterson wrote:
> I'm preparing a new release of PerformanceAnalytics, and as usual
> this brings the host of CRAN checks.
>
> I get this note:
>
> * checking S3 generic/method consistency ... NOTE
> Found the following apparent S3 methods exported but not registered:
>   mean.LCL mean.UCL mean.geometric mean.stderr
> See section 'Registering S3 methods' in the 'Writing R Extensions'
> manual.
>
> these are not S3 methods for 'mean', but rather helper functions that
> do other things related to means.
>
> These functions have been in the package for over a decade, are used
> in
> coursework at a number of universities, and we assume are in user
> code.
>  So it seems that changing them would be disruptive.
>
> Now, all that said, what to do about it?
>
> We could register them as S3method{} , and I think calling them
> explicitly will still work, though this seems inelegant.
>
> I can't find any way to tell R that these *aren't* S3 methods ...
>
> Any insight would be greatly appreciated.
>
> Regards,
>
> Brian
>
>

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From wangyuewy729 at gmail.com  Thu Mar  1 17:20:00 2018
From: wangyuewy729 at gmail.com (=?UTF-8?B?546L546l?=)
Date: Thu, 1 Mar 2018 11:20:00 -0500
Subject: [R-pkg-devel] Fwd: R package can not over write
In-Reply-To: <CAB1mTSZNykZ5GM8qbjbnn9r=xahbDFr3Sj11edVELjMpzVNN7Q@mail.gmail.com>
References: <CAB1mTSYy-CWEFfAfRPFb1j2g6QdgPWuqnAwwRUHofOMGno-S8g@mail.gmail.com>
 <CAB1mTSZNykZ5GM8qbjbnn9r=xahbDFr3Sj11edVELjMpzVNN7Q@mail.gmail.com>
Message-ID: <CAB1mTSYzjj_oa_MWsffOfDf4xKxGnHgAs3Nf-WWiiYQ4R1=UEw@mail.gmail.com>

Hi guys,

I am writing my second R package and get in trouble with some wired
problems. I used to create "mypack" and "mypackV1" as two practics folders
to save the data and code.

(1) In one function in "mypack", I have a code that load("xx.rda") and in
the same function in "mypackV1", I deleted this line, but after I built the
package for "mypackV1" and used this function, it showed an error that
xx.rda can not be found. Does anyone know the reason?

(2) Then, I removed both "mypack" and "mypackV1" and re-created a new
folder named "mypack", but when I use the build("mypack") function, it came
out a mypackV1_1.0.tar.gz file. What caused this wired problem?

(3) Then, I installed mypackV1_1.0.tar.gz into R, but I only can use 3
functions (totally I have 5). The rest two even don't have .Rd files in
man/. When building the package, I did not see any error.

I know these are wired problems, but if you have any similar experience or
know how to fix it, please help me out.

Thank you.
Yue

	[[alternative HTML version deleted]]


From dstr7320 at uni.sydney.edu.au  Fri Mar  2 01:00:11 2018
From: dstr7320 at uni.sydney.edu.au (Dario Strbenac)
Date: Fri, 2 Mar 2018 00:00:11 +0000
Subject: [R-pkg-devel] 
 Alignment of Function Arguments For PDF Manual and HTML
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F65021C@MBXP01.ds.man.ac.uk>
References: <MEXPR01MB0134EF725644F570095D8EEACDC60@MEXPR01MB0134.ausprd01.prod.outlook.com>,
 <438D2EC9EAFE5946B2D5864670EA468E018F65021C@MBXP01.ds.man.ac.uk>
Message-ID: <MEXPR01MB0134D93A9E1C27F582294CA4CDC60@MEXPR01MB0134.ausprd01.prod.outlook.com>

Good day,

The difference in position doesn't change if the HTML page is resized so it seems as if the width of the font is different. I agree that alignment would be easy in most cases but it's not as simple to align the elements if using \S4method{aFunction}{aType}. I suppose I'll ensure that the PDF and terminal help appears aligned in favour of the HTML version.

--------------------------------------
Dario Strbenac
University of Sydney
Camperdown NSW 2050
Australia

From ligges at statistik.tu-dortmund.de  Fri Mar  2 18:20:01 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Fri, 2 Mar 2018 18:20:01 +0100
Subject: [R-pkg-devel] apparent S3 methods exported but not registered
In-Reply-To: <CAJZYZZ4DFoQtV9rZrwW5zn1usgUGszpn7409t+KSHVeea+pjwA@mail.gmail.com>
References: <1516984532.6406.82.camel@braverock.com>
 <1519925768.9109.55.camel@braverock.com>
 <CAJZYZZ5n0g0GrSgovdGANx1zseUnpM3=abJUwi2odAPveigLPw@mail.gmail.com>
 <CAJZYZZ6EKP8SAd0PONyOG5FLBBDbqP05Q1_SOOUU=hhuE23WzQ@mail.gmail.com>
 <CAJZYZZ4DFoQtV9rZrwW5zn1usgUGszpn7409t+KSHVeea+pjwA@mail.gmail.com>
Message-ID: <e8269293-95bb-743e-32bc-fe78faf3f73d@statistik.tu-dortmund.de>



On 01.03.2018 18:40, Dason Kurkiewicz wrote:
> They're just note NOTES. Although I don't like the names your functions
> take because of the possibility to confuse with s3 if they have been in the
> package as long as you say I don't see why this would be an issue. Just
> send an explanation when you submit and I don't think there should be any
> issues.

It is an issue, as not only you but also R will treat these as S3 methods.
As these are not S3 methods, you shoudl ideally
- Give them new names
- Deprecate the old usage (but still allow it), so users get warnings 
and get migrate to the new names.

Best,
Uwe Ligges




> 
> -Dason Kurkiewicz
> 
> On Mar 1, 2018 11:36 AM, "Brian G. Peterson" <brian at braverock.com> wrote:
> 
> ... bumping this in the hopes that someone has an answer ...
> 
> On Fri, 2018-01-26 at 10:35 -0600, Brian G. Peterson wrote:
>> I'm preparing a new release of PerformanceAnalytics, and as usual
>> this brings the host of CRAN checks.
>>
>> I get this note:
>>
>> * checking S3 generic/method consistency ... NOTE
>> Found the following apparent S3 methods exported but not registered:
>>    mean.LCL mean.UCL mean.geometric mean.stderr
>> See section 'Registering S3 methods' in the 'Writing R Extensions'
>> manual.
>>
>> these are not S3 methods for 'mean', but rather helper functions that
>> do other things related to means.
>>
>> These functions have been in the package for over a decade, are used
>> in
>> coursework at a number of universities, and we assume are in user
>> code.
>>   So it seems that changing them would be disruptive.
>>
>> Now, all that said, what to do about it?
>>
>> We could register them as S3method{} , and I think calling them
>> explicitly will still work, though this seems inelegant.
>>
>> I can't find any way to tell R that these *aren't* S3 methods ...
>>
>> Any insight would be greatly appreciated.
>>
>> Regards,
>>
>> Brian
>>
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From marlin- at gmx.cn  Sat Mar  3 03:57:19 2018
From: marlin- at gmx.cn (Jialin Ma)
Date: Sat, 03 Mar 2018 10:57:19 +0800
Subject: [R-pkg-devel] Does win-builder restrict where binaries can be
 downloaded from?
Message-ID: <1520045839.11068.4.camel@gmx.cn>

Dear all,

I have the following error on win-builder, which says the url from
anaconda.org can not be opened. The url is valid, does win-builder
restrict the domain where binaries can be downloaded? I have previously
tried download from github, where it works.

* installing *source* package 'symengine' ...
** libs

*** arch - i386
rm -f interface.o symengine.dll 
"D:/RCompile/recent/R/bin/i386/Rscript.exe" "../tools/winlibs.R"
trying URL 'https://anaconda.org/symengine/symengine/0.3.0.353.g22cef70
/download/win-32/symengine-0.3.0.353.g22cef70-vc14_0.tar.bz2'
Error in download.file(link, "symenginelib.tar.bz2", quiet = FALSE) : 
  cannot open URL 'https://anaconda.org/symengine/symengine/0.3.0.353.g
22cef70/download/win-32/symengine-0.3.0.353.g22cef70-vc14_0.tar.bz2'
Calls: download_symengine -> download.file
In addition: Warning message:
In download.file(link, "symenginelib.tar.bz2", quiet = FALSE) :
  InternetOpenUrl failed: 'Die Serververbindung konnte nicht
hergestellt werden.'
Execution halted
make: *** [winlibs] Error 1
ERROR: compilation failed for package 'symengine'
* removing 'd:/RCompile/CRANguest/R-devel/lib/symengine'
In R CMD INSTALL


From dstr7320 at uni.sydney.edu.au  Mon Mar  5 10:00:22 2018
From: dstr7320 at uni.sydney.edu.au (Dario Strbenac)
Date: Mon, 5 Mar 2018 09:00:22 +0000
Subject: [R-pkg-devel] Warnings if Carriage Returns in Code Elements of R
 Documentation
Message-ID: <MEXPR01MB01348AB94564D6E289E31E50CDDB0@MEXPR01MB0134.ausprd01.prod.outlook.com>

Good day,

The package checking software emits a warning if \cr is used inside \code. The reason I'd like to do that is to avoid a S4 constructor specification being limited to one line and running off the side of the PDF page of the PDF manual, as happens by default. The style of the documentation which I wrote is:

\section{Constructor}{
  \describe{
    \item{}{
      \code{DataClass(parameter1, parameter2, parameter3, parameter4,\cr
            parameter5, parameter6)
            }
            }
    }  \describe{
            \item{\code{parameter1}}{A description of the requirements of the first parameter.}
           }
}

How can wrapping be forced without causing a warning during checking?

--------------------------------------
Dario Strbenac
University of Sydney
Camperdown NSW 2050
Australia


From mtsagris at yahoo.gr  Tue Mar  6 05:21:16 2018
From: mtsagris at yahoo.gr (michael tsagris)
Date: Tue, 6 Mar 2018 04:21:16 +0000 (UTC)
Subject: Latex error during compilation
References: <905605893.16671508.1520310076738.ref@mail.yahoo.com>
Message-ID: <905605893.16671508.1520310076738@mail.yahoo.com>

Can somebody please tell me how to fix this error? the only I thing I change in my computer is the latex. I updated miktext and texmaker. And here I am. 
LaTeX errors when creating PDF version.
This typically indicates Rd problems.
LaTeX errors found:
! File ended while scanning use of \HeaderA.
<inserted text> 
                \par 
<*> D:/temp/RtmpA5snrO/Rd2pdf122d81cab6b64/Rd2.tex
                                                  
! Emergency stop.
<*> D:/temp/RtmpA5snrO/Rd2pdf122d81cab6b64/Rd2.tex
                                                  
*** (job aborted, no legal \end found)

!  ==> Fatal error occurred, no output PDF file produced!
* checking PDF version of manual without hyperrefs or index ... ERROR
* DONE
	[[alternative HTML version deleted]]


From rmh at temple.edu  Tue Mar  6 16:08:37 2018
From: rmh at temple.edu (Richard M. Heiberger)
Date: Tue, 06 Mar 2018 15:08:37 +0000
Subject: [R-pkg-devel] Latex error during compilation
In-Reply-To: <mailman.2484.1725.1520345837.1673.r-package-devel@r-project.org>
References: <905605893.16671508.1520310076738.ref@mail.yahoo.com>
 <mailman.2484.1725.1520345837.1673.r-package-devel@r-project.org>
Message-ID: <CAGx1TMAqCcqvEnQAm_UzW9b69SPSMdkZXe4XYUL1JWzHd81GDg@mail.gmail.com>

Sounds like a missing "}".
Which could mean the brace is inside quotes or following a "%"

On Tue, Mar 6, 2018 at 09:17 michael tsagris via R-package-devel <
r-package-devel at r-project.org> wrote:

>
>
>
> ---------- Forwarded message ----------
> From: michael tsagris <mtsagris at yahoo.gr>
> To: "r-package-devel at r-project.org" <r-package-devel at r-project.org>
> Cc:
> Bcc:
> Date: Tue, 6 Mar 2018 04:21:16 +0000 (UTC)
> Subject: Latex error during compilation
> Can somebody please tell me how to fix this error? the only I thing I
> change in my computer is the latex. I updated miktext and texmaker. And
> here I am.
> LaTeX errors when creating PDF version.
> This typically indicates Rd problems.
> LaTeX errors found:
> ! File ended while scanning use of \HeaderA.
> <inserted text>
>                 \par
> <*> D:/temp/RtmpA5snrO/Rd2pdf122d81cab6b64/Rd2.tex
>
> ! Emergency stop.
> <*> D:/temp/RtmpA5snrO/Rd2pdf122d81cab6b64/Rd2.tex
>
> *** (job aborted, no legal \end found)
>
> !  ==> Fatal error occurred, no output PDF file produced!
> * checking PDF version of manual without hyperrefs or index ... ERROR
> * DONE
>         [[alternative HTML version deleted]]
>
>
>
>
> ---------- Forwarded message ----------
> From: michael tsagris via R-package-devel <r-package-devel at r-project.org>
> To: "r-package-devel at r-project.org" <r-package-devel at r-project.org>
> Cc:
> Bcc:
> Date: Tue, 6 Mar 2018 04:21:16 +0000
> Subject: [R-pkg-devel] Latex error during compilation
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From mtsagris at yahoo.gr  Wed Mar  7 11:39:05 2018
From: mtsagris at yahoo.gr (michael tsagris)
Date: Wed, 7 Mar 2018 10:39:05 +0000 (UTC)
Subject: =?UTF-8?Q?=CE=A3=CF=87=CE=B5=CF=84:_[R-pkg-devel]_Latex?=
 =?UTF-8?Q?_error_during_compilation?=
In-Reply-To: <CAGx1TMAqCcqvEnQAm_UzW9b69SPSMdkZXe4XYUL1JWzHd81GDg@mail.gmail.com>
References: <905605893.16671508.1520310076738.ref@mail.yahoo.com>
 <mailman.2484.1725.1520345837.1673.r-package-devel@r-project.org>
 <CAGx1TMAqCcqvEnQAm_UzW9b69SPSMdkZXe4XYUL1JWzHd81GDg@mail.gmail.com>
Message-ID: <718233456.270015.1520419145726@mail.yahoo.com>

Hi Richard,
Cheers for the answer. I had a problem with missing "}". I corrected all of them. However, when I compile it in many different computers everything is fine. 0 errors. When I upload it to r-devel it finds errors. 


 

    ???? 5:08 ?.?. ?????, 6 ??????? 2018, ?/? Richard M. Heiberger <rmh at temple.edu> ??????:
 

 Sounds like a missing "}".Which could mean the brace is inside quotes or following a "%"
On Tue, Mar 6, 2018 at 09:17 michael tsagris via R-package-devel <r-package-devel at r-project.org> wrote:




---------- Forwarded message ----------
From:?michael tsagris <mtsagris at yahoo.gr>
To:?"r-package-devel at r-project.org" <r-package-devel at r-project.org>
Cc:?
Bcc:?
Date:?Tue, 6 Mar 2018 04:21:16 +0000 (UTC)
Subject:?Latex error during compilation
Can somebody please tell me how to fix this error? the only I thing I change in my computer is the latex. I updated miktext and texmaker. And here I am.
LaTeX errors when creating PDF version.
This typically indicates Rd problems.
LaTeX errors found:
! File ended while scanning use of \HeaderA.
<inserted text>
? ? ? ? ? ? ? ? \par
<*> D:/temp/RtmpA5snrO/Rd2pdf122d81cab6b64/Rd2.tex

! Emergency stop.
<*> D:/temp/RtmpA5snrO/Rd2pdf122d81cab6b64/Rd2.tex

*** (job aborted, no legal \end found)

!? ==> Fatal error occurred, no output PDF file produced!
* checking PDF version of manual without hyperrefs or index ... ERROR
* DONE
? ? ? ? [[alternative HTML version deleted]]




---------- Forwarded message ----------
From:?michael tsagris via R-package-devel <r-package-devel at r-project.org>
To:?"r-package-devel at r-project.org" <r-package-devel at r-project.org>
Cc:?
Bcc:?
Date:?Tue, 6 Mar 2018 04:21:16 +0000
Subject:?[R-pkg-devel] Latex error during compilation
______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel



   
	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Wed Mar  7 16:38:11 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 7 Mar 2018 16:38:11 +0100
Subject: [R-pkg-devel] Does win-builder restrict where binaries can be
 downloaded from?
In-Reply-To: <1520045839.11068.4.camel@gmx.cn>
References: <1520045839.11068.4.camel@gmx.cn>
Message-ID: <9dcc6d6e-4d75-2d3d-e5c1-62774684eb16@statistik.tu-dortmund.de>



On 03.03.2018 03:57, Jialin Ma wrote:
> Dear all,
> 
> I have the following error on win-builder, which says the url from
> anaconda.org can not be opened. The url is valid, does win-builder
> restrict the domain where binaries can be downloaded? I have previously
> tried download from github, where it works.

It should work, but the old WinHTTP setitings on Winbuilder that 
correspond to an InternetExplorer 9 seems to be unable to talk to that 
webserver.

Perhaps you can choose another download method, e.g. via curl?

Best,
Uwe Ligges

> * installing *source* package 'symengine' ...
> ** libs
> 
> *** arch - i386
> rm -f interface.o symengine.dll
> "D:/RCompile/recent/R/bin/i386/Rscript.exe" "../tools/winlibs.R"
> trying URL 'https://anaconda.org/symengine/symengine/0.3.0.353.g22cef70
> /download/win-32/symengine-0.3.0.353.g22cef70-vc14_0.tar.bz2'
> Error in download.file(link, "symenginelib.tar.bz2", quiet = FALSE) :
>    cannot open URL 'https://anaconda.org/symengine/symengine/0.3.0.353.g
> 22cef70/download/win-32/symengine-0.3.0.353.g22cef70-vc14_0.tar.bz2'
> Calls: download_symengine -> download.file
> In addition: Warning message:
> In download.file(link, "symenginelib.tar.bz2", quiet = FALSE) :
>    InternetOpenUrl failed: 'Die Serververbindung konnte nicht
> hergestellt werden.'
> Execution halted
> make: *** [winlibs] Error 1
> ERROR: compilation failed for package 'symengine'
> * removing 'd:/RCompile/CRANguest/R-devel/lib/symengine'
> In R CMD INSTALL
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ligges at statistik.tu-dortmund.de  Thu Mar  8 18:05:02 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Thu, 8 Mar 2018 18:05:02 +0100
Subject: [R-pkg-devel] CRAN incoming services and winbuilder down Mar 9-10
Message-ID: <fde1b8b4-56b7-9f85-7d02-659308423ae0@statistik.tu-dortmund.de>

Dear list,

due to a full power shutdown in the relevant building at TU Dortmund 
University we have to shut down winbuilder and the CRAN incoming check 
service from
Mar 9, 5pm CET
to
Mar 10, 5pm CET

Best,
Uwe Ligges
(CRAN team)


From jon at thon.cc  Thu Mar  8 21:39:37 2018
From: jon at thon.cc (Jonathon Love)
Date: Fri, 9 Mar 2018 07:39:37 +1100
Subject: [R-pkg-devel] CRAN stable download url?
Message-ID: <faa4f001-54ce-fbb0-2cfa-2e348dd44ad4@thon.love>

hi,

i'm bundling some R packages to go into a flatpak/flathub application. 
for that it is necessary to provide the download URLs for all the 
required dependencies in advance - including R packages. this works, 
*except* when an R package version transitions from being the current 
version, to being archived.

the current version will be, say:

https://cran.r-project.org/src/contrib/yaml_2.1.16.tar.gz

then when yaml 2.1.17 comes out (which it just has), that url will 
return a 404, and has become:

https://cran.r-project.org/src/contrib/Archive/yaml/yaml_2.1.16.tar.gz

this means everything breaks when a new version of an R package comes out.

does anyone know if a stable url exists for R packages?

with thanks

jonathon


From zkamvar at gmail.com  Thu Mar  8 21:51:35 2018
From: zkamvar at gmail.com (Zhian Kamvar)
Date: Thu, 8 Mar 2018 14:51:35 -0600
Subject: [R-pkg-devel] CRAN stable download url?
In-Reply-To: <faa4f001-54ce-fbb0-2cfa-2e348dd44ad4@thon.love>
References: <faa4f001-54ce-fbb0-2cfa-2e348dd44ad4@thon.love>
Message-ID: <421A00F9-0538-449B-8CA2-5F5B81D77A1F@gmail.com>

You might try using MRAN snapshots: https://mran.revolutionanalytics.com/documents/rro/reproducibility#standard <https://mran.revolutionanalytics.com/documents/rro/reproducibility#standard>

For example:
https://cran.microsoft.com/snapshot/2018-01-01/src/contrib/yaml_2.1.16.tar.gz <https://cran.microsoft.com/snapshot/2018-01-01/src/contrib/yaml_2.1.16.tar.gz>

-----
Zhian N. Kamvar, Ph. D.
Postdoctoral Researcher (Everhart Lab)
Department of Plant Pathology
University of Nebraska-Lincoln
ORCID: 0000-0003-1458-7108




> On Mar 8, 2018, at 14:39 , Jonathon Love <jon at thon.cc> wrote:
> 
> hi,
> 
> i'm bundling some R packages to go into a flatpak/flathub application. for that it is necessary to provide the download URLs for all the required dependencies in advance - including R packages. this works, *except* when an R package version transitions from being the current version, to being archived.
> 
> the current version will be, say:
> 
> https://cran.r-project.org/src/contrib/yaml_2.1.16.tar.gz
> 
> then when yaml 2.1.17 comes out (which it just has), that url will return a 404, and has become:
> 
> https://cran.r-project.org/src/contrib/Archive/yaml/yaml_2.1.16.tar.gz
> 
> this means everything breaks when a new version of an R package comes out.
> 
> does anyone know if a stable url exists for R packages?
> 
> with thanks
> 
> jonathon
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: Message signed with OpenPGP
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20180308/fe86c4a1/attachment.sig>

From henrik.bengtsson at gmail.com  Thu Mar  8 21:56:42 2018
From: henrik.bengtsson at gmail.com (Henrik Bengtsson)
Date: Thu, 8 Mar 2018 12:56:42 -0800
Subject: [R-pkg-devel] CRAN stable download url?
In-Reply-To: <faa4f001-54ce-fbb0-2cfa-2e348dd44ad4@thon.love>
References: <faa4f001-54ce-fbb0-2cfa-2e348dd44ad4@thon.love>
Message-ID: <CAFDcVCQDhvRy0dGfdNap2YmEkZXMWK79+hsUWSihr_Xb24DAww@mail.gmail.com>

On Thu, Mar 8, 2018 at 12:39 PM, Jonathon Love <jon at thon.cc> wrote:
> hi,
>
> i'm bundling some R packages to go into a flatpak/flathub application. for
> that it is necessary to provide the download URLs for all the required
> dependencies in advance - including R packages. this works, *except* when an
> R package version transitions from being the current version, to being
> archived.
>
> the current version will be, say:
>
> https://cran.r-project.org/src/contrib/yaml_2.1.16.tar.gz
>
> then when yaml 2.1.17 comes out (which it just has), that url will return a
> 404, and has become:
>
> https://cran.r-project.org/src/contrib/Archive/yaml/yaml_2.1.16.tar.gz
>
> this means everything breaks when a new version of an R package comes out.
>

[Rd] CRAN indices out of whack (for at least macOS)


[Rd] CRAN indices out of whack (for at least macOS)

> does anyone know if a stable url exists for R packages?

Somewhat related: Winston Chang made the following argument in R-devel
thread 'CRAN indices out of whack (for at least macOS)' on 2018-02-03
(https://stat.ethz.ch/pipermail/r-devel/2018-February/075532.html):

> [...]
> One reason that package installations fail in these cases is that the
> current version of a package is in one directory, and the old
> (archived) versions of a package are in another directory. If current
> and old versions were in the same directory, then package installation
> would not fail.

An obvious, quick solution would be to also put the current version
under https://cran.r-project.org/src/contrib/Archive/ and link to it
but not sure how well that works with the CRAN mirroring setup.

/Henrik

>
> with thanks
>
> jonathon
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From nilsson.henric at gmail.com  Fri Mar  9 16:22:42 2018
From: nilsson.henric at gmail.com (Henric Winell)
Date: Fri, 9 Mar 2018 16:22:42 +0100
Subject: [R-pkg-devel] 
 Warnings if Carriage Returns in Code Elements of R Documentation
In-Reply-To: <MEXPR01MB01348AB94564D6E289E31E50CDDB0@MEXPR01MB0134.ausprd01.prod.outlook.com>
References: <MEXPR01MB01348AB94564D6E289E31E50CDDB0@MEXPR01MB0134.ausprd01.prod.outlook.com>
Message-ID: <cb5f3eca-8f51-ebae-8e37-2b6675487394@gmail.com>

On 2018-03-05 10:00, Dario Strbenac wrote:

> Good day,
> 
> The package checking software emits a warning if \cr is used inside \code. The reason I'd like to do that is to avoid a S4 constructor specification being limited to one line and running off the side of the PDF page of the PDF manual, as happens by default. The style of the documentation which I wrote is:

See WRE.  First, get of \cr.  Second, replacing \code{} with 
\preformatted{} and your manual formatting will be preserved.

Henric Winell



> 
> \section{Constructor}{
>    \describe{
>      \item{}{
>        \code{DataClass(parameter1, parameter2, parameter3, parameter4,\cr
>              parameter5, parameter6)
>              }

See WRE.  Get rid of \cr and use \preformatted instead of \code.  But 
note that it often requires padding with spaces to get exactly the 
result you want.


Henric Winell


>              }
>      }  \describe{
>              \item{\code{parameter1}}{A description of the requirements of the first parameter.}
>             }
> }
> 
> How can wrapping be forced without causing a warning during checking?
> 
> --------------------------------------
> Dario Strbenac
> University of Sydney
> Camperdown NSW 2050
> Australia
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From rhelp at krueger-family.de  Mon Mar 12 20:07:58 2018
From: rhelp at krueger-family.de (Knut Krueger)
Date: Mon, 12 Mar 2018 20:07:58 +0100
Subject: [R-pkg-devel] Roxygen: function documentation to get \item{...} in
 .rd file
Message-ID: <6bffd356-6fb5-e25c-19b5-66af7fbfab31@krueger-family.de>

I am  converting a package from creating the .rd files manually to  roxygen.

I do not know how to add the additional parameters to the function 
description, so that the  \item{...}{ some parameters } will be created 
in the .rd file

Kind regards Knut


From Joris.Meys at ugent.be  Mon Mar 12 20:15:28 2018
From: Joris.Meys at ugent.be (Joris Meys)
Date: Mon, 12 Mar 2018 20:15:28 +0100
Subject: [R-pkg-devel] 
 Roxygen: function documentation to get \item{...} in .rd file
In-Reply-To: <6bffd356-6fb5-e25c-19b5-66af7fbfab31@krueger-family.de>
References: <6bffd356-6fb5-e25c-19b5-66af7fbfab31@krueger-family.de>
Message-ID: <CAO1zAVa6JKZxtsB=5TrNd5JGEgtQsz=bMskRvDeCLEyDY=XD5Q@mail.gmail.com>

Hi Knut,

If you want to add parameters, you need to use the tag @param :

#' @param x a numeric vector

will translate to:

\item{x}{a numeric vector}

in the \arguments section of the .Rd file.

If you want to add extra description lists (eg for elements of a list in
the output), you can use \describe:

#' \describe{
#'    \item{name}{a numeric vector with names}
#' }

If you're not familiar with roxygen2 at all, you can start at the vignette
here: https://cran.r-project.org/web/packages/roxygen2/vignettes/rd.html

More information can be found in the book of Hadley on writing packages,
section about documentation : http://r-pkgs.had.co.nz/man.html

Cheers
Joris

On Mon, Mar 12, 2018 at 8:07 PM, Knut Krueger <rhelp at krueger-family.de>
wrote:

> I am  converting a package from creating the .rd files manually to
> roxygen.
>
> I do not know how to add the additional parameters to the function
> description, so that the  \item{...}{ some parameters } will be created in
> the .rd file
>
> Kind regards Knut
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From Joris.Meys at ugent.be  Mon Mar 12 20:58:07 2018
From: Joris.Meys at ugent.be (Joris Meys)
Date: Mon, 12 Mar 2018 20:58:07 +0100
Subject: [R-pkg-devel] 
 Roxygen: function documentation to get \item{...} in .rd file
In-Reply-To: <CAO1zAVa6JKZxtsB=5TrNd5JGEgtQsz=bMskRvDeCLEyDY=XD5Q@mail.gmail.com>
References: <6bffd356-6fb5-e25c-19b5-66af7fbfab31@krueger-family.de>
 <CAO1zAVa6JKZxtsB=5TrNd5JGEgtQsz=bMskRvDeCLEyDY=XD5Q@mail.gmail.com>
Message-ID: <CAO1zAVZSwSKAqjXPRCOqtDrOP4DjXcrZaH+xY-utcHh+XioU=A@mail.gmail.com>

Hi Knut,

on a sidenote: did you try the Rd2roxygen package? That could also make
your work a lot easier.

https://cran.r-project.org/web/packages/Rd2roxygen/index.html
Cheers
Joris

On Mon, Mar 12, 2018 at 8:15 PM, Joris Meys <Joris.Meys at ugent.be> wrote:

> Hi Knut,
>
> If you want to add parameters, you need to use the tag @param :
>
> #' @param x a numeric vector
>
> will translate to:
>
> \item{x}{a numeric vector}
>
> in the \arguments section of the .Rd file.
>
> If you want to add extra description lists (eg for elements of a list in
> the output), you can use \describe:
>
> #' \describe{
> #'    \item{name}{a numeric vector with names}
> #' }
>
> If you're not familiar with roxygen2 at all, you can start at the vignette
> here: https://cran.r-project.org/web/packages/roxygen2/vignettes/rd.html
>
> More information can be found in the book of Hadley on writing packages,
> section about documentation : http://r-pkgs.had.co.nz/man.html
>
> Cheers
> Joris
>
> On Mon, Mar 12, 2018 at 8:07 PM, Knut Krueger <rhelp at krueger-family.de>
> wrote:
>
>> I am  converting a package from creating the .rd files manually to
>> roxygen.
>>
>> I do not know how to add the additional parameters to the function
>> description, so that the  \item{...}{ some parameters } will be created in
>> the .rd file
>>
>> Kind regards Knut
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>
>
> --
> Joris Meys
> Statistical consultant
>
> Department of Data Analysis and Mathematical Modelling
> Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
>
> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
>
> tel: +32 (0)9 264 61 79 <+32%209%20264%2061%2079>
> -----------
> Biowiskundedagen 2017-2018
> http://www.biowiskundedagen.ugent.be/
>
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>



-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From roy.mendelssohn at noaa.gov  Mon Mar 12 23:26:02 2018
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Mon, 12 Mar 2018 15:26:02 -0700
Subject: [R-pkg-devel] Dealing with not so temporary files
Message-ID: <CC4CF299-54CF-4BCB-84B5-3BD0EB473462@noaa.gov>

Hi All:

Recently there was a proper admonishment to a developer that it is bad etiquette writing to a user's home directory,  and for temporary files use the functions tempdir() and tempfile().  I am working on a new package (presently on Github) that downloads data from a remote server,  reads the data into R,  but I would like to save that file for the user to access later if they so desire.  Saving to the "temp directory" is not a good option for that,  want to put it somewhere where the user can easily find it.  What is the proper etiquette for this?  Even if I provide an argument for the user to specify the location to save the file,  I should provide a default location.  

Any suggestions appreciated.

-Roy





**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From murdoch.duncan at gmail.com  Tue Mar 13 00:32:00 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Mon, 12 Mar 2018 19:32:00 -0400
Subject: [R-pkg-devel] Dealing with not so temporary files
In-Reply-To: <CC4CF299-54CF-4BCB-84B5-3BD0EB473462@noaa.gov>
References: <CC4CF299-54CF-4BCB-84B5-3BD0EB473462@noaa.gov>
Message-ID: <91083895-bfb7-3ec0-cb75-cac92f25eb58@gmail.com>

On 12/03/2018 6:26 PM, Roy Mendelssohn - NOAA Federal wrote:
> Hi All:
> 
> Recently there was a proper admonishment to a developer that it is bad etiquette writing to a user's home directory,  and for temporary files use the functions tempdir() and tempfile().  I am working on a new package (presently on Github) that downloads data from a remote server,  reads the data into R,  but I would like to save that file for the user to access later if they so desire.  Saving to the "temp directory" is not a good option for that,  want to put it somewhere where the user can easily find it.  What is the proper etiquette for this?  Even if I provide an argument for the user to specify the location to save the file,  I should provide a default location.

Why not provide an argument whose default is something given by tempfile()?

Duncan Murdoch

> 
> Any suggestions appreciated.
> 
> -Roy
> 
> 
> 
> 
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From Joris.Meys at ugent.be  Tue Mar 13 09:52:14 2018
From: Joris.Meys at ugent.be (Joris Meys)
Date: Tue, 13 Mar 2018 09:52:14 +0100
Subject: [R-pkg-devel] Dealing with not so temporary files
In-Reply-To: <91083895-bfb7-3ec0-cb75-cac92f25eb58@gmail.com>
References: <CC4CF299-54CF-4BCB-84B5-3BD0EB473462@noaa.gov>
 <91083895-bfb7-3ec0-cb75-cac92f25eb58@gmail.com>
Message-ID: <CAO1zAVZ0tZupjBNneNW9L=s+cMV_4Ph3jqNTQPyT8UbcenOdjw@mail.gmail.com>

Duncan gave one option. The other option is to provide a specific
write2disk() function or so that allows the user to determine whether
he/she wants to save the data. Then the user can decide exactly where he
wants to find it.

The other important part is the format in which it's saved. Users can
simply use save() or write.csv() (or any of the readr functions if you
must) to store whatever data they want in the format they want. There's a
lot of database connections possible as well if that's needed. The only
reason I see to provide a specific write function or argument, is when the
storage is done in a nonstandard format. And then it makes sense to provide
both read_myformat() and write_myformat() in some form. That's what I as an
R user would expect.

Fwiw: I have seen the commotion on that discussion recently as well, but
this is really nothing new. For as long as I remember, writing to disk only
happens when you use a function that does explicitly that. Which makes
sense as well, as eg my students often run R in a shared environment during
classes, and sysadmins don't like software that starts writing files
everywhere.

Cheers
Joris



On Tue, Mar 13, 2018 at 12:32 AM, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 12/03/2018 6:26 PM, Roy Mendelssohn - NOAA Federal wrote:
>
>> Hi All:
>>
>> Recently there was a proper admonishment to a developer that it is bad
>> etiquette writing to a user's home directory,  and for temporary files use
>> the functions tempdir() and tempfile().  I am working on a new package
>> (presently on Github) that downloads data from a remote server,  reads the
>> data into R,  but I would like to save that file for the user to access
>> later if they so desire.  Saving to the "temp directory" is not a good
>> option for that,  want to put it somewhere where the user can easily find
>> it.  What is the proper etiquette for this?  Even if I provide an argument
>> for the user to specify the location to save the file,  I should provide a
>> default location.
>>
>
> Why not provide an argument whose default is something given by tempfile()?
>
> Duncan Murdoch
>
>
>
>> Any suggestions appreciated.
>>
>> -Roy
>>
>>
>>
>>
>>
>> **********************
>> "The contents of this message do not reflect any position of the U.S.
>> Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected"
>> "the arc of the moral universe is long, but it bends toward justice" -MLK
>> Jr.
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From pascaltitle at gmail.com  Tue Mar 13 09:50:14 2018
From: pascaltitle at gmail.com (Pascal Title)
Date: Tue, 13 Mar 2018 01:50:14 -0700
Subject: [R-pkg-devel] rgdal not available for checking
Message-ID: <CAPSA=yctkW_E_QdMsda2fWGJva42n=ZgFEkkGkxYinrhhs_NwA@mail.gmail.com>

Hi,

I'm working on submitting an update to an existing R package to CRAN. I've
tested it with R CMD check --as-cran and it passes with no errors, warnings
or notes.

But there is an error currently on the check results page for the current
version, which you can see here:
https://cran.r-project.org/web/checks/check_results_envirem.html

The error is only for the r-release-osx-x86_64 platform, where the problem
is "Package suggested but not available for checking: ?rgdal?".

I'm not sure what the problem is, as rgdal is a package on CRAN, and I
can't seem to reproduce this problem on the different platforms that I have
run R CMD check on, which as mac osx, ubuntu and win-builder. I imagine
that the same problem will crop up with the updated version of the package.

I've googled the error message, and it looks like there are many R packages
with the same issue.

Any suggestions for how to deal with this would be great. I could rewrite
parts of my R package to avoid the use of rgdal in the examples, but that's
working around the problem rather than addressing it.

thanks!
-Pascal

	[[alternative HTML version deleted]]


From alexandre.courtiol at gmail.com  Tue Mar 13 16:37:13 2018
From: alexandre.courtiol at gmail.com (Alexandre Courtiol)
Date: Tue, 13 Mar 2018 16:37:13 +0100
Subject: [R-pkg-devel] rgdal not available for checking
In-Reply-To: <CAPSA=yctkW_E_QdMsda2fWGJva42n=ZgFEkkGkxYinrhhs_NwA@mail.gmail.com>
References: <CAPSA=yctkW_E_QdMsda2fWGJva42n=ZgFEkkGkxYinrhhs_NwA@mail.gmail.com>
Message-ID: <CAERMt4cosVFCa24hftn+n5m2_oN3ff1sGDH=1s27PXfFvzjQ4g@mail.gmail.com>

Hi Pascal,
I would not worry about that.
This probably simply means that rgdal is not installed on the computer used
to check the package.
Since gdal is often somewhat difficult to install, I am not going to blame
CRAN.
++
Alex

On 13 March 2018 at 09:50, Pascal Title <pascaltitle at gmail.com> wrote:

> Hi,
>
> I'm working on submitting an update to an existing R package to CRAN. I've
> tested it with R CMD check --as-cran and it passes with no errors, warnings
> or notes.
>
> But there is an error currently on the check results page for the current
> version, which you can see here:
> https://cran.r-project.org/web/checks/check_results_envirem.html
>
> The error is only for the r-release-osx-x86_64 platform, where the problem
> is "Package suggested but not available for checking: ?rgdal?".
>
> I'm not sure what the problem is, as rgdal is a package on CRAN, and I
> can't seem to reproduce this problem on the different platforms that I have
> run R CMD check on, which as mac osx, ubuntu and win-builder. I imagine
> that the same problem will crop up with the updated version of the package.
>
> I've googled the error message, and it looks like there are many R packages
> with the same issue.
>
> Any suggestions for how to deal with this would be great. I could rewrite
> parts of my R package to avoid the use of rgdal in the examples, but that's
> working around the problem rather than addressing it.
>
> thanks!
> -Pascal
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Alexandre Courtiol

http://sites.google.com/site/alexandrecourtiol/home

*"Science is the belief in the ignorance of experts"*, R. Feynman

	[[alternative HTML version deleted]]


From martiankabe at gmail.com  Tue Mar 13 21:53:56 2018
From: martiankabe at gmail.com (martiankabe at gmail.com)
Date: Tue, 13 Mar 2018 21:53:56 +0100
Subject: [R-pkg-devel] Weird error message during R CMD Check
Message-ID: <005301d3bb0d$68d14330$3a73c990$@gmail.com>

Hello,

 

I'm trying to submit my package to CRAN but receiving the following error
message.

 

object 'connectionString' not found

 

even if it is parameter of get_DB_info(connectionString) function - see the
function definition below error message.

 

Please, can you help me to understand what should be fixed in the code so
that I could successfully submit my package to CRAN?

 

Thanks a lot for any of your help in advance.

 

Best,

Martin

 

https://win-builder.r-project.org/incoming_pretest/180313_212715_RSQLS_16/00
check.log

* checking examples ...

** running examples for arch 'i386' ... ERROR

Running examples in 'RSQLS-Ex.R' failed

The error most likely occurred in:

 

> base::assign(".ptime", proc.time(), pos = "CheckExEnv")

> ### Name: get_DB_info

> ### Title: Get database info

> ### Aliases: get_DB_info

> 

> ### ** Examples

> 

> get_DB_info(connectionString)

Error in paste("", pathtocsvloader, " ", connectionString, " ", sql_task,  :


  object 'connectionString' not found

Calls: get_DB_info -> paste

Execution halted

** running examples for arch 'x64' ... ERROR

Running examples in 'RSQLS-Ex.R' failed

The error most likely occurred in:

 

> base::assign(".ptime", proc.time(), pos = "CheckExEnv")

> ### Name: get_DB_info

> ### Title: Get database info

> ### Aliases: get_DB_info

> 

> ### ** Examples

> 

> get_DB_info(connectionString)

Error in paste("", pathtocsvloader, " ", connectionString, " ", sql_task,  :


  object 'connectionString' not found

Calls: get_DB_info -> paste

Execution halted

* checking PDF version of manual ... OK

* DONE

Status: 2 ERRORs, 3 WARNINGs, 4 NOTEs

 

------------------------------------ get_DB_info(connectionString)
------------------------------------------------------------

 

#' Get database info

#'

#' This function retrieves basic info about database defined

#' in SQL Server connection string.

#' @param connectionString Connection string to SQL server

#' @return Returns data.frame and data.table

#' @export

#' @examples

#' get_DB_info(connectionString)

#' @note How to set up SQL Server connection string see
\link{set_connString}. Be also sure you have a permissions for access to
sys.dm_db_index_usage_stats:

#' check it with SELECT * FROM sys.dm_db_index_usage_stats. If not, contact
your SQL Server admin.

get_DB_info <- function(connectionString) {

  options(scipen=999)

  if (missing(connectionString)) {

    print("Connection string is missing!")

    return("Try it again")

  }

  pathtocsvloader <- gsub("/","\\\\",paste(system.file(package =
"RSQLS")[1],"/Loader/csv_to_sql_loader.exe", sep = ""))

  pathtocsvloader <- replace_spaced_words(pathtocsvloader)

  pathtocsvloader <- gsub('.{1}$', '', pathtocsvloader)

  # logic for pathtocsvfiles variable

  pathtocsvfiles <- gsub("/","\\\\",paste(system.file(package =
"RSQLS")[1],"/Data/", sep = ""))

  if (!endsWith(pathtocsvfiles, "\\")) {

    pathtocsvfiles <- paste(pathtocsvfiles,"\\", sep = "")

  }

  sqltabname <- "tempDBInfo"

  sqltabname <- gsub("\\[|\\]", "", sqltabname)

  if (length(strsplit(sqltabname,"\\.")[[1]]) > 1) {

    sqltabname_prev <- gsub("^[^.]*.", "", sqltabname)

  } else {

    sqltabname_prev <- sqltabname

  }

  sql_tab_name <- paste('"', sqltabname, '"', sep = "") #
'"dbo.CFTC_Disaggregated_Raw_test"'

  sql_task <- paste('"dbinfo"', sep = "")

  real_pathtocsvfile <- paste('"', pathtocsvfiles, paste(sqltabname_prev,
".csv", sep = ""),'"', sep = "")

  file_to_be_deleted <- paste(pathtocsvfiles, paste(sqltabname_prev, ".csv",
sep = ""), sep = "")

  ss <- paste('', pathtocsvloader, " ", connectionString, " ", sql_task, "
", real_pathtocsvfile, " ", "null", sep = "")

  # Call shell command

  oldw <- getOption("warn")

  options(warn = -1)

  sc <- shell(ss)

  if (file.exists(file_to_be_deleted)){

    out <- data.table::fread(file_to_be_deleted, stringsAsFactors = FALSE,
sep = "~", fill = TRUE)

  } else{

    options(warn = oldw)

    stop('See the previous messages for more details.')

  }

  # Delete csv file

  if (file.exists(file_to_be_deleted)){

    invisible(file.remove(file_to_be_deleted))

  } else{

    options(warn = oldw)

    stop('See the previous messages for more details.')

  }

  if( sc == 1 ) {

    options(warn = oldw)

    stop('See the previous messages for more details.')

  } else {

    options(warn = oldw)

  }

  return(out)

}

 



---
This email has been checked for viruses by Avast antivirus software.
https://www.avast.com/antivirus

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Tue Mar 13 23:21:46 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 13 Mar 2018 18:21:46 -0400
Subject: [R-pkg-devel] Weird error message during R CMD Check
In-Reply-To: <005301d3bb0d$68d14330$3a73c990$@gmail.com>
References: <005301d3bb0d$68d14330$3a73c990$@gmail.com>
Message-ID: <f2c4db88-8399-2ac6-8588-cb0452cfb35d@gmail.com>

On 13/03/2018 4:53 PM, martiankabe at gmail.com wrote:
> Hello,
> 
>   
> 
> I'm trying to submit my package to CRAN but receiving the following error
> message.
> 
>   
> 
> object 'connectionString' not found

Your example never defined a variable called connectionString, so you 
can't pass it to a function.

Duncan Murdoch

> 
>   
> 
> even if it is parameter of get_DB_info(connectionString) function - see the
> function definition below error message.
> 
>   
> 
> Please, can you help me to understand what should be fixed in the code so
> that I could successfully submit my package to CRAN?
> 
>   
> 
> Thanks a lot for any of your help in advance.
> 
>   
> 
> Best,
> 
> Martin
> 
>   
> 
> https://win-builder.r-project.org/incoming_pretest/180313_212715_RSQLS_16/00
> check.log
> 
> * checking examples ...
> 
> ** running examples for arch 'i386' ... ERROR
> 
> Running examples in 'RSQLS-Ex.R' failed
> 
> The error most likely occurred in:
> 
>   
> 
>> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
> 
>> ### Name: get_DB_info
> 
>> ### Title: Get database info
> 
>> ### Aliases: get_DB_info
> 
>>
> 
>> ### ** Examples
> 
>>
> 
>> get_DB_info(connectionString)
> 
> Error in paste("", pathtocsvloader, " ", connectionString, " ", sql_task,  :
> 
> 
>    object 'connectionString' not found
> 
> Calls: get_DB_info -> paste
> 
> Execution halted
> 
> ** running examples for arch 'x64' ... ERROR
> 
> Running examples in 'RSQLS-Ex.R' failed
> 
> The error most likely occurred in:
> 
>   
> 
>> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
> 
>> ### Name: get_DB_info
> 
>> ### Title: Get database info
> 
>> ### Aliases: get_DB_info
> 
>>
> 
>> ### ** Examples
> 
>>
> 
>> get_DB_info(connectionString)
> 
> Error in paste("", pathtocsvloader, " ", connectionString, " ", sql_task,  :
> 
> 
>    object 'connectionString' not found
> 
> Calls: get_DB_info -> paste
> 
> Execution halted
> 
> * checking PDF version of manual ... OK
> 
> * DONE
> 
> Status: 2 ERRORs, 3 WARNINGs, 4 NOTEs
> 
>   
> 
> ------------------------------------ get_DB_info(connectionString)
> ------------------------------------------------------------
> 
>   
> 
> #' Get database info
> 
> #'
> 
> #' This function retrieves basic info about database defined
> 
> #' in SQL Server connection string.
> 
> #' @param connectionString Connection string to SQL server
> 
> #' @return Returns data.frame and data.table
> 
> #' @export
> 
> #' @examples
> 
> #' get_DB_info(connectionString)
> 
> #' @note How to set up SQL Server connection string see
> \link{set_connString}. Be also sure you have a permissions for access to
> sys.dm_db_index_usage_stats:
> 
> #' check it with SELECT * FROM sys.dm_db_index_usage_stats. If not, contact
> your SQL Server admin.
> 
> get_DB_info <- function(connectionString) {
> 
>    options(scipen=999)
> 
>    if (missing(connectionString)) {
> 
>      print("Connection string is missing!")
> 
>      return("Try it again")
> 
>    }
> 
>    pathtocsvloader <- gsub("/","\\\\",paste(system.file(package =
> "RSQLS")[1],"/Loader/csv_to_sql_loader.exe", sep = ""))
> 
>    pathtocsvloader <- replace_spaced_words(pathtocsvloader)
> 
>    pathtocsvloader <- gsub('.{1}$', '', pathtocsvloader)
> 
>    # logic for pathtocsvfiles variable
> 
>    pathtocsvfiles <- gsub("/","\\\\",paste(system.file(package =
> "RSQLS")[1],"/Data/", sep = ""))
> 
>    if (!endsWith(pathtocsvfiles, "\\")) {
> 
>      pathtocsvfiles <- paste(pathtocsvfiles,"\\", sep = "")
> 
>    }
> 
>    sqltabname <- "tempDBInfo"
> 
>    sqltabname <- gsub("\\[|\\]", "", sqltabname)
> 
>    if (length(strsplit(sqltabname,"\\.")[[1]]) > 1) {
> 
>      sqltabname_prev <- gsub("^[^.]*.", "", sqltabname)
> 
>    } else {
> 
>      sqltabname_prev <- sqltabname
> 
>    }
> 
>    sql_tab_name <- paste('"', sqltabname, '"', sep = "") #
> '"dbo.CFTC_Disaggregated_Raw_test"'
> 
>    sql_task <- paste('"dbinfo"', sep = "")
> 
>    real_pathtocsvfile <- paste('"', pathtocsvfiles, paste(sqltabname_prev,
> ".csv", sep = ""),'"', sep = "")
> 
>    file_to_be_deleted <- paste(pathtocsvfiles, paste(sqltabname_prev, ".csv",
> sep = ""), sep = "")
> 
>    ss <- paste('', pathtocsvloader, " ", connectionString, " ", sql_task, "
> ", real_pathtocsvfile, " ", "null", sep = "")
> 
>    # Call shell command
> 
>    oldw <- getOption("warn")
> 
>    options(warn = -1)
> 
>    sc <- shell(ss)
> 
>    if (file.exists(file_to_be_deleted)){
> 
>      out <- data.table::fread(file_to_be_deleted, stringsAsFactors = FALSE,
> sep = "~", fill = TRUE)
> 
>    } else{
> 
>      options(warn = oldw)
> 
>      stop('See the previous messages for more details.')
> 
>    }
> 
>    # Delete csv file
> 
>    if (file.exists(file_to_be_deleted)){
> 
>      invisible(file.remove(file_to_be_deleted))
> 
>    } else{
> 
>      options(warn = oldw)
> 
>      stop('See the previous messages for more details.')
> 
>    }
> 
>    if( sc == 1 ) {
> 
>      options(warn = oldw)
> 
>      stop('See the previous messages for more details.')
> 
>    } else {
> 
>      options(warn = oldw)
> 
>    }
> 
>    return(out)
> 
> }
> 
>   
> 
> 
> 
> ---
> This email has been checked for viruses by Avast antivirus software.
> https://www.avast.com/antivirus
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From martiankabe at gmail.com  Wed Mar 14 22:15:27 2018
From: martiankabe at gmail.com (martiankabe at gmail.com)
Date: Wed, 14 Mar 2018 22:15:27 +0100
Subject: [R-pkg-devel] Weird error message during R CMD Check
In-Reply-To: <f2c4db88-8399-2ac6-8588-cb0452cfb35d@gmail.com>
References: <005301d3bb0d$68d14330$3a73c990$@gmail.com>
 <f2c4db88-8399-2ac6-8588-cb0452cfb35d@gmail.com>
Message-ID: <003601d3bbd9$9491b230$bdb51690$@gmail.com>

Hi Duncan,

 

could you help me fix this issue, please?

 

Below is function which creates connection string.

 

#' Create connection string from function parameters

#'

#' This function defines SQL Server connection string

#' from function parameters.

#' @param datasource Server name

#' @param database Database name

#' @param usr Username

#' @param pwd Password

#' @note If username and password missing or empty \strong{Integrated Security=True} is used in connection string instead.

#' @return Connection string

#' @export

#' @examples

#' set_connString("LAPTOP-USER\\SQLEXPRESS", "Database_Name")

set_connString <- function(datasource, database, usr, pwd) {

  ds <- paste("Data Source=", datasource, ";", sep = "")

  db <- paste("Initial Catalog=", database, ";", sep = "")

  if ((missing(usr) & missing(pwd)) || (usr=="" & pwd=="")) {

    last_param <- "Integrated Security=True;MultipleActiveResultSets=True;"

  } else {

    last_param <- paste("Integrated Security=False;", "User Id=", usr, ";", "Password=", pwd, ";", "MultipleActiveResultSets=True;", sep = "")

  }

  return(paste('"', ds, db, last_param, '"', sep = ""))

}

 

This connection string is then passed to get_DB_info function ? see below.

 

How can I fix object ?connectionString? not found issue?

 

Thank you for any of your advice.

Martin

 

#' Get database info

#'

#' This function retrieves basic info about database defined

#' in SQL Server connection string.

#' @param connectionString Connection string to SQL server

#' @return Returns data.frame and data.table

#' @export

#' @examples

#' get_DB_info(connectionString)

#' @note How to set up SQL Server connection string see \link{set_connString}. Be also sure you have a permissions for access to sys.dm_db_index_usage_stats:

#' check it with SELECT * FROM sys.dm_db_index_usage_stats. If not, contact your SQL Server admin.

 

get_DB_info <- function(connectionString) {

  options(scipen=999)

  if (missing(connectionString)) {

    print("Connection string is missing!")

    return("Try it again")

  }

  # connectionString <- connectionString

  pathtocsvloader <- gsub("/","\\\\",paste(system.file(package = "RSQLS")[1],"/Loader/csv_to_sql_loader.exe", sep = ""))

  pathtocsvloader <- replace_spaced_words(pathtocsvloader)

  pathtocsvloader <- gsub('.{1}$', '', pathtocsvloader)

  # logic for pathtocsvfiles variable

  pathtocsvfiles <- gsub("/","\\\\",paste(system.file(package = "RSQLS")[1],"/Data/", sep = ""))

  if (!endsWith(pathtocsvfiles, "\\")) {

    pathtocsvfiles <- paste(pathtocsvfiles,"\\", sep = "")

  }

  sqltabname <- "tempDBInfo"

  sqltabname <- gsub("\\[|\\]", "", sqltabname)

  if (length(strsplit(sqltabname,"\\.")[[1]]) > 1) {

    sqltabname_prev <- gsub("^[^.]*.", "", sqltabname)

  } else {

    sqltabname_prev <- sqltabname

  }

  sql_tab_name <- paste('"', sqltabname, '"', sep = "") # '"dbo.CFTC_Disaggregated_Raw_test"'

  sql_task <- paste('"dbinfo"', sep = "")

  real_pathtocsvfile <- paste('"', pathtocsvfiles, paste(sqltabname_prev, ".csv", sep = ""),'"', sep = "")

  file_to_be_deleted <- paste(pathtocsvfiles, paste(sqltabname_prev, ".csv", sep = ""), sep = "")

  ss <- paste('', pathtocsvloader, " ", connectionString, " ", sql_task, " ", real_pathtocsvfile, " ", "null", sep = "")

  # Call shell command

  oldw <- getOption("warn")

  options(warn = -1)

  sc <- shell(ss)

  if (file.exists(file_to_be_deleted)){

    out <- data.table::fread(file_to_be_deleted, stringsAsFactors = FALSE, sep = "~", fill = TRUE)

  } else{

    options(warn = oldw)

    stop('See the previous messages for more details.')

  }

  # Delete csv file

  if (file.exists(file_to_be_deleted)){

    invisible(file.remove(file_to_be_deleted))

  } else{

    options(warn = oldw)

    stop('See the previous messages for more details.')

  }

  if( sc == 1 ) {

    options(warn = oldw)

    stop('See the previous messages for more details.')

  } else {

    options(warn = oldw)

  }

  return(out)

}

 

 

-----P?vodn? zpr?va-----
Od: Duncan Murdoch <murdoch.duncan at gmail.com> 
Odesl?no: 13 March 2018 23:22
Komu: martiankabe at gmail.com; r-package-devel-bounces at r-project.org
Kopie: r-package-devel at r-project.org
P?edm?t: Re: [R-pkg-devel] Weird error message during R CMD Check

 

On 13/03/2018 4:53 PM,  <mailto:martiankabe at gmail.com> martiankabe at gmail.com wrote:

> Hello,

> 

>   

> 

> I'm trying to submit my package to CRAN but receiving the following 

> error message.

> 

>   

> 

> object 'connectionString' not found

 

Your example never defined a variable called connectionString, so you can't pass it to a function.

 

Duncan Murdoch

 

> 

>   

> 

> even if it is parameter of get_DB_info(connectionString) function - 

> see the function definition below error message.

> 

>   

> 

> Please, can you help me to understand what should be fixed in the code 

> so that I could successfully submit my package to CRAN?

> 

>   

> 

> Thanks a lot for any of your help in advance.

> 

>   

> 

> Best,

> 

> Martin

> 

>   

> 

>  <https://win-builder.r-project.org/incoming_pretest/180313_212715_RSQLS> https://win-builder.r-project.org/incoming_pretest/180313_212715_RSQLS

> _16/00

> check.log

> 

> * checking examples ...

> 

> ** running examples for arch 'i386' ... ERROR

> 

> Running examples in 'RSQLS-Ex.R' failed

> 

> The error most likely occurred in:

> 

>   

> 

>> base::assign(".ptime", proc.time(), pos = "CheckExEnv")

> 

>> ### Name: get_DB_info

> 

>> ### Title: Get database info

> 

>> ### Aliases: get_DB_info

> 

>> 

> 

>> ### ** Examples

> 

>> 

> 

>> get_DB_info(connectionString)

> 

> Error in paste("", pathtocsvloader, " ", connectionString, " ", sql_task,  :

> 

> 

>    object 'connectionString' not found

> 

> Calls: get_DB_info -> paste

> 

> Execution halted

> 

> ** running examples for arch 'x64' ... ERROR

> 

> Running examples in 'RSQLS-Ex.R' failed

> 

> The error most likely occurred in:

> 

>   

> 

>> base::assign(".ptime", proc.time(), pos = "CheckExEnv")

> 

>> ### Name: get_DB_info

> 

>> ### Title: Get database info

> 

>> ### Aliases: get_DB_info

> 

>> 

> 

>> ### ** Examples

> 

>> 

> 

>> get_DB_info(connectionString)

> 

> Error in paste("", pathtocsvloader, " ", connectionString, " ", sql_task,  :

> 

> 

>    object 'connectionString' not found

> 

> Calls: get_DB_info -> paste

> 

> Execution halted

> 

> * checking PDF version of manual ... OK

> 

> * DONE

> 

> Status: 2 ERRORs, 3 WARNINGs, 4 NOTEs

> 

>   

> 

> ------------------------------------ get_DB_info(connectionString)

> ------------------------------------------------------------

> 

>   

> 

> #' Get database info

> 

> #'

> 

> #' This function retrieves basic info about database defined

> 

> #' in SQL Server connection string.

> 

> #' @param connectionString Connection string to SQL server

> 

> #' @return Returns data.frame and data.table

> 

> #' @export

> 

> #' @examples

> 

> #' get_DB_info(connectionString)

> 

> #' @note How to set up SQL Server connection string see 

> \link{set_connString}. Be also sure you have a permissions for access 

> to

> sys.dm_db_index_usage_stats:

> 

> #' check it with SELECT * FROM sys.dm_db_index_usage_stats. If not, 

> contact your SQL Server admin.

> 

> get_DB_info <- function(connectionString) {

> 

>    options(scipen=999)

> 

>    if (missing(connectionString)) {

> 

>      print("Connection string is missing!")

> 

>      return("Try it again")

> 

>    }

> 

>    pathtocsvloader <- gsub("/","\\\\",paste(system.file(package = 

> "RSQLS")[1],"/Loader/csv_to_sql_loader.exe", sep = ""))

> 

>    pathtocsvloader <- replace_spaced_words(pathtocsvloader)

> 

>    pathtocsvloader <- gsub('.{1}$', '', pathtocsvloader)

> 

>    # logic for pathtocsvfiles variable

> 

>    pathtocsvfiles <- gsub("/","\\\\",paste(system.file(package = 

> "RSQLS")[1],"/Data/", sep = ""))

> 

>    if (!endsWith(pathtocsvfiles, "\\")) {

> 

>      pathtocsvfiles <- paste(pathtocsvfiles,"\\", sep = "")

> 

>    }

> 

>    sqltabname <- "tempDBInfo"

> 

>    sqltabname <- gsub("\\[|\\]", "", sqltabname)

> 

>    if (length(strsplit(sqltabname," <file://.> \\.")[[1]]) > 1) {

> 

>      sqltabname_prev <- gsub("^[^.]*.", "", sqltabname)

> 

>    } else {

> 

>      sqltabname_prev <- sqltabname

> 

>    }

> 

>    sql_tab_name <- paste('"', sqltabname, '"', sep = "") # 

> '"dbo.CFTC_Disaggregated_Raw_test"'

> 

>    sql_task <- paste('"dbinfo"', sep = "")

> 

>    real_pathtocsvfile <- paste('"', pathtocsvfiles, 

> paste(sqltabname_prev, ".csv", sep = ""),'"', sep = "")

> 

>    file_to_be_deleted <- paste(pathtocsvfiles, paste(sqltabname_prev, 

> ".csv", sep = ""), sep = "")

> 

>    ss <- paste('', pathtocsvloader, " ", connectionString, " ", sql_task, "

> ", real_pathtocsvfile, " ", "null", sep = "")

> 

>    # Call shell command

> 

>    oldw <- getOption("warn")

> 

>    options(warn = -1)

> 

>    sc <- shell(ss)

> 

>    if (file.exists(file_to_be_deleted)){

> 

>      out <- data.table::fread(file_to_be_deleted, stringsAsFactors = 

> FALSE, sep = "~", fill = TRUE)

> 

>    } else{

> 

>      options(warn = oldw)

> 

>      stop('See the previous messages for more details.')

> 

>    }

> 

>    # Delete csv file

> 

>    if (file.exists(file_to_be_deleted)){

> 

>      invisible(file.remove(file_to_be_deleted))

> 

>    } else{

> 

>      options(warn = oldw)

> 

>      stop('See the previous messages for more details.')

> 

>    }

> 

>    if( sc == 1 ) {

> 

>      options(warn = oldw)

> 

>      stop('See the previous messages for more details.')

> 

>    } else {

> 

>      options(warn = oldw)

> 

>    }

> 

>    return(out)

> 

> }

> 

>   

> 

> 

> 

> ---

> This email has been checked for viruses by Avast antivirus software.

>  <https://www.avast.com/antivirus> https://www.avast.com/antivirus

> 

>             [[alternative HTML version deleted]]

> 

> ______________________________________________

>  <mailto:R-package-devel at r-project.org> R-package-devel at r-project.org mailing list 

>  <https://stat.ethz.ch/mailman/listinfo/r-package-devel> https://stat.ethz.ch/mailman/listinfo/r-package-devel

> 

 


	[[alternative HTML version deleted]]


From marcelino.delacruz at urjc.es  Wed Mar 14 22:40:30 2018
From: marcelino.delacruz at urjc.es (Marcelino de la Cruz Rot)
Date: Wed, 14 Mar 2018 22:40:30 +0100
Subject: [R-pkg-devel] Weird error message during R CMD Check
In-Reply-To: <003601d3bbd9$9491b230$bdb51690$@gmail.com>
References: <005301d3bb0d$68d14330$3a73c990$@gmail.com>
 <f2c4db88-8399-2ac6-8588-cb0452cfb35d@gmail.com>
 <003601d3bbd9$9491b230$bdb51690$@gmail.com>
Message-ID: <7710a62e-8d46-a44e-60a9-fe4ca83d6a89@urjc.es>

It is very easy. You should define your variable connectionString before 
passing it to get_DB_info().

I.e.:

### ** Examples

connectionString <- WHATEVER_IS_CONNECTIONSTRING

get_DB_info(connectionString)


This would remove your error.

Cheers,

Marcelino.




El 14/03/2018 a las 22:15, martiankabe at gmail.com escribi?:
> Hi Duncan,
>
>   
>
> could you help me fix this issue, please?
>
>   
>
> Below is function which creates connection string.
>
>   
>
> #' Create connection string from function parameters
>
> #'
>
> #' This function defines SQL Server connection string
>
> #' from function parameters.
>
> #' @param datasource Server name
>
> #' @param database Database name
>
> #' @param usr Username
>
> #' @param pwd Password
>
> #' @note If username and password missing or empty \strong{Integrated Security=True} is used in connection string instead.
>
> #' @return Connection string
>
> #' @export
>
> #' @examples
>
> #' set_connString("LAPTOP-USER\\SQLEXPRESS", "Database_Name")
>
> set_connString <- function(datasource, database, usr, pwd) {
>
>    ds <- paste("Data Source=", datasource, ";", sep = "")
>
>    db <- paste("Initial Catalog=", database, ";", sep = "")
>
>    if ((missing(usr) & missing(pwd)) || (usr=="" & pwd=="")) {
>
>      last_param <- "Integrated Security=True;MultipleActiveResultSets=True;"
>
>    } else {
>
>      last_param <- paste("Integrated Security=False;", "User Id=", usr, ";", "Password=", pwd, ";", "MultipleActiveResultSets=True;", sep = "")
>
>    }
>
>    return(paste('"', ds, db, last_param, '"', sep = ""))
>
> }
>
>   
>
> This connection string is then passed to get_DB_info function ? see below.
>
>   
>
> How can I fix object ?connectionString? not found issue?
>
>   
>
> Thank you for any of your advice.
>
> Martin
>
>   
>
> #' Get database info
>
> #'
>
> #' This function retrieves basic info about database defined
>
> #' in SQL Server connection string.
>
> #' @param connectionString Connection string to SQL server
>
> #' @return Returns data.frame and data.table
>
> #' @export
>
> #' @examples
>
> #' get_DB_info(connectionString)
>
> #' @note How to set up SQL Server connection string see \link{set_connString}. Be also sure you have a permissions for access to sys.dm_db_index_usage_stats:
>
> #' check it with SELECT * FROM sys.dm_db_index_usage_stats. If not, contact your SQL Server admin.
>
>   
>
> get_DB_info <- function(connectionString) {
>
>    options(scipen=999)
>
>    if (missing(connectionString)) {
>
>      print("Connection string is missing!")
>
>      return("Try it again")
>
>    }
>
>    # connectionString <- connectionString
>
>    pathtocsvloader <- gsub("/","\\\\",paste(system.file(package = "RSQLS")[1],"/Loader/csv_to_sql_loader.exe", sep = ""))
>
>    pathtocsvloader <- replace_spaced_words(pathtocsvloader)
>
>    pathtocsvloader <- gsub('.{1}$', '', pathtocsvloader)
>
>    # logic for pathtocsvfiles variable
>
>    pathtocsvfiles <- gsub("/","\\\\",paste(system.file(package = "RSQLS")[1],"/Data/", sep = ""))
>
>    if (!endsWith(pathtocsvfiles, "\\")) {
>
>      pathtocsvfiles <- paste(pathtocsvfiles,"\\", sep = "")
>
>    }
>
>    sqltabname <- "tempDBInfo"
>
>    sqltabname <- gsub("\\[|\\]", "", sqltabname)
>
>    if (length(strsplit(sqltabname,"\\.")[[1]]) > 1) {
>
>      sqltabname_prev <- gsub("^[^.]*.", "", sqltabname)
>
>    } else {
>
>      sqltabname_prev <- sqltabname
>
>    }
>
>    sql_tab_name <- paste('"', sqltabname, '"', sep = "") # '"dbo.CFTC_Disaggregated_Raw_test"'
>
>    sql_task <- paste('"dbinfo"', sep = "")
>
>    real_pathtocsvfile <- paste('"', pathtocsvfiles, paste(sqltabname_prev, ".csv", sep = ""),'"', sep = "")
>
>    file_to_be_deleted <- paste(pathtocsvfiles, paste(sqltabname_prev, ".csv", sep = ""), sep = "")
>
>    ss <- paste('', pathtocsvloader, " ", connectionString, " ", sql_task, " ", real_pathtocsvfile, " ", "null", sep = "")
>
>    # Call shell command
>
>    oldw <- getOption("warn")
>
>    options(warn = -1)
>
>    sc <- shell(ss)
>
>    if (file.exists(file_to_be_deleted)){
>
>      out <- data.table::fread(file_to_be_deleted, stringsAsFactors = FALSE, sep = "~", fill = TRUE)
>
>    } else{
>
>      options(warn = oldw)
>
>      stop('See the previous messages for more details.')
>
>    }
>
>    # Delete csv file
>
>    if (file.exists(file_to_be_deleted)){
>
>      invisible(file.remove(file_to_be_deleted))
>
>    } else{
>
>      options(warn = oldw)
>
>      stop('See the previous messages for more details.')
>
>    }
>
>    if( sc == 1 ) {
>
>      options(warn = oldw)
>
>      stop('See the previous messages for more details.')
>
>    } else {
>
>      options(warn = oldw)
>
>    }
>
>    return(out)
>
> }
>
>   
>
>   
>
> -----P?vodn? zpr?va-----
> Od: Duncan Murdoch <murdoch.duncan at gmail.com>
> Odesl?no: 13 March 2018 23:22
> Komu: martiankabe at gmail.com; r-package-devel-bounces at r-project.org
> Kopie: r-package-devel at r-project.org
> P?edm?t: Re: [R-pkg-devel] Weird error message during R CMD Check
>
>   
>
> On 13/03/2018 4:53 PM,  <mailto:martiankabe at gmail.com> martiankabe at gmail.com wrote:
>
>> Hello,
>>    
>> I'm trying to submit my package to CRAN but receiving the following
>> error message.
>>    
>> object 'connectionString' not found
>   
>
> Your example never defined a variable called connectionString, so you can't pass it to a function.
>
>   
>
> Duncan Murdoch
>
>   
>
>>    
>> even if it is parameter of get_DB_info(connectionString) function -
>> see the function definition below error message.
>>    
>> Please, can you help me to understand what should be fixed in the code
>> so that I could successfully submit my package to CRAN?
>>    
>> Thanks a lot for any of your help in advance.
>>    
>> Best,
>> Martin
>>    
>>   <https://win-builder.r-project.org/incoming_pretest/180313_212715_RSQLS> https://win-builder.r-project.org/incoming_pretest/180313_212715_RSQLS
>> _16/00
>> check.log
>> * checking examples ...
>> ** running examples for arch 'i386' ... ERROR
>> Running examples in 'RSQLS-Ex.R' failed
>> The error most likely occurred in:
>>    
>>> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>>> ### Name: get_DB_info
>>> ### Title: Get database info
>>> ### Aliases: get_DB_info
>>> ### ** Examples
>>> get_DB_info(connectionString)
>> Error in paste("", pathtocsvloader, " ", connectionString, " ", sql_task,  :
>>     object 'connectionString' not found
>> Calls: get_DB_info -> paste
>> Execution halted
>> ** running examples for arch 'x64' ... ERROR
>> Running examples in 'RSQLS-Ex.R' failed
>> The error most likely occurred in:
>>    
>>> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>>> ### Name: get_DB_info
>>> ### Title: Get database info
>>> ### Aliases: get_DB_info
>>> ### ** Examples
>>> get_DB_info(connectionString)
>> Error in paste("", pathtocsvloader, " ", connectionString, " ", sql_task,  :
>>     object 'connectionString' not found
>> Calls: get_DB_info -> paste
>> Execution halted
>> * checking PDF version of manual ... OK
>> * DONE
>> Status: 2 ERRORs, 3 WARNINGs, 4 NOTEs
>>    
>> ------------------------------------ get_DB_info(connectionString)
>> ------------------------------------------------------------
>>    
>> #' Get database info
>> #'
>> #' This function retrieves basic info about database defined
>> #' in SQL Server connection string.
>> #' @param connectionString Connection string to SQL server
>> #' @return Returns data.frame and data.table
>> #' @export
>> #' @examples
>> #' get_DB_info(connectionString)
>> #' @note How to set up SQL Server connection string see
>> \link{set_connString}. Be also sure you have a permissions for access
>> to
>> sys.dm_db_index_usage_stats:
>> #' check it with SELECT * FROM sys.dm_db_index_usage_stats. If not,
>> contact your SQL Server admin.
>> get_DB_info <- function(connectionString) {
>>     options(scipen=999)
>>     if (missing(connectionString)) {
>>       print("Connection string is missing!")
>>       return("Try it again")
>>     }
>>     pathtocsvloader <- gsub("/","\\\\",paste(system.file(package =
>> "RSQLS")[1],"/Loader/csv_to_sql_loader.exe", sep = ""))
>>     pathtocsvloader <- replace_spaced_words(pathtocsvloader)
>>     pathtocsvloader <- gsub('.{1}$', '', pathtocsvloader)
>>     # logic for pathtocsvfiles variable
>>     pathtocsvfiles <- gsub("/","\\\\",paste(system.file(package =
>> "RSQLS")[1],"/Data/", sep = ""))
>>     if (!endsWith(pathtocsvfiles, "\\")) {
>>       pathtocsvfiles <- paste(pathtocsvfiles,"\\", sep = "")
>>     }
>>     sqltabname <- "tempDBInfo"
>>     sqltabname <- gsub("\\[|\\]", "", sqltabname)
>>     if (length(strsplit(sqltabname," <file://.> \\.")[[1]]) > 1) {
>>       sqltabname_prev <- gsub("^[^.]*.", "", sqltabname)
>>     } else {
>>       sqltabname_prev <- sqltabname
>>     }
>>     sql_tab_name <- paste('"', sqltabname, '"', sep = "") #
>> '"dbo.CFTC_Disaggregated_Raw_test"'
>>     sql_task <- paste('"dbinfo"', sep = "")
>>     real_pathtocsvfile <- paste('"', pathtocsvfiles,
>> paste(sqltabname_prev, ".csv", sep = ""),'"', sep = "")
>>     file_to_be_deleted <- paste(pathtocsvfiles, paste(sqltabname_prev,
>> ".csv", sep = ""), sep = "")
>>     ss <- paste('', pathtocsvloader, " ", connectionString, " ", sql_task, "
>> ", real_pathtocsvfile, " ", "null", sep = "")
>>     # Call shell command
>>     oldw <- getOption("warn")
>>     options(warn = -1)
>>     sc <- shell(ss)
>>     if (file.exists(file_to_be_deleted)){
>>       out <- data.table::fread(file_to_be_deleted, stringsAsFactors =
>> FALSE, sep = "~", fill = TRUE)
>>     } else{
>>       options(warn = oldw)
>>       stop('See the previous messages for more details.')
>>     }
>>     # Delete csv file
>>     if (file.exists(file_to_be_deleted)){
>>       invisible(file.remove(file_to_be_deleted))
>>     } else{
>>       options(warn = oldw)
>>       stop('See the previous messages for more details.')
>>     }
>>     if( sc == 1 ) {
>>       options(warn = oldw)
>>       stop('See the previous messages for more details.')
>>     } else {
>>       options(warn = oldw)
>>     }
>>     return(out)
>> }
>>    
>> ---
>> This email has been checked for viruses by Avast antivirus software.
>>   <https://www.avast.com/antivirus> https://www.avast.com/antivirus
>>              [[alternative HTML version deleted]]
>> ______________________________________________
>>   <mailto:R-package-devel at r-project.org> R-package-devel at r-project.org mailing list
>>   <https://stat.ethz.ch/mailman/listinfo/r-package-devel> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>   
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> .
>

-- 
Marcelino de la Cruz Rot
Depto. de Biolog?a y Geolog?a
F?sica y Qu?mica Inorg?nica
Universidad Rey Juan Carlos
M?stoles Espa?a


From martiankabe at gmail.com  Thu Mar 15 08:34:34 2018
From: martiankabe at gmail.com (martiankabe at gmail.com)
Date: Thu, 15 Mar 2018 08:34:34 +0100
Subject: [R-pkg-devel] Weird error message during R CMD Check
In-Reply-To: <333E7627-8631-4A27-8815-245CCDBA2BF8@sydney.edu.au>
References: <005301d3bb0d$68d14330$3a73c990$@gmail.com>
 <f2c4db88-8399-2ac6-8588-cb0452cfb35d@gmail.com>
 <003601d3bbd9$9491b230$bdb51690$@gmail.com>,
 <7710a62e-8d46-a44e-60a9-fe4ca83d6a89@urjc.es>
 <333E7627-8631-4A27-8815-245CCDBA2BF8@sydney.edu.au>
Message-ID: <001201d3bc30$11c32490$35496db0$@gmail.com>

Thank you very much Michael, this perfectly works.

Martin

 

Od: Michael Nelson <michael.nelson at sydney.edu.au> 
Odesl?no: 15 March 2018 07:43
Komu: martiankabe at gmail.com; r-package-devel at r-project.org
P?edm?t: Re: [R-pkg-devel] Weird error message during R CMD Check

 

I don?t think the suggestion below will work as it would need to be a connection string to a database that the winbuilder computer (and whatever account) that is running would have access to. 

 

It would be better to use \dontrun{} so that the examples aren?t run. 

 

This is what is done in RODBC https://cran.r-project.org/web/packages/RODBC/index.html 

 

More fundamentally, given   the cran repository policy on windows only packages, CRAN may not be the appropriate place to publish. 

 

Michael. 


On 15 Mar 2018, at 8:41 am, Marcelino de la Cruz Rot <marcelino.delacruz at urjc.es <mailto:marcelino.delacruz at urjc.es> > wrote:

It is very easy. You should define your variable connectionString before passing it to get_DB_info().

I.e.:

### ** Examples

connectionString <- WHATEVER_IS_CONNECTIONSTRING

get_DB_info(connectionString)


This would remove your error.

Cheers,

Marcelino.




El 14/03/2018 a las 22:15, martiankabe at gmail.com <mailto:martiankabe at gmail.com>  escribi?:



Hi Duncan,

 

 

could you help me fix this issue, please?

 

 

Below is function which creates connection string.

 

 

#' Create connection string from function parameters

 

#'

 

#' This function defines SQL Server connection string

 

#' from function parameters.

 

#' @param datasource Server name

 

#' @param database Database name

 

#' @param usr Username

 

#' @param pwd Password

 

#' @note If username and password missing or empty \strong{Integrated Security=True} is used in connection string instead.

 

#' @return Connection string

 

#' @export

 

#' @examples

 

#' set_connString("LAPTOP-USER\\SQLEXPRESS", "Database_Name")

 

set_connString <- function(datasource, database, usr, pwd) {

 

  ds <- paste("Data Source=", datasource, ";", sep = "")

 

  db <- paste("Initial Catalog=", database, ";", sep = "")

 

  if ((missing(usr) & missing(pwd)) || (usr=="" & pwd=="")) {

 

    last_param <- "Integrated Security=True;MultipleActiveResultSets=True;"

 

  } else {

 

    last_param <- paste("Integrated Security=False;", "User Id=", usr, ";", "Password=", pwd, ";", "MultipleActiveResultSets=True;", sep = "")

 

  }

 

  return(paste('"', ds, db, last_param, '"', sep = ""))

 

}

 

 

This connection string is then passed to get_DB_info function ? see below.

 

 

How can I fix object ?connectionString? not found issue?

 

 

Thank you for any of your advice.

 

Martin

 

 

#' Get database info

 

#'

 

#' This function retrieves basic info about database defined

 

#' in SQL Server connection string.

 

#' @param connectionString Connection string to SQL server

 

#' @return Returns data.frame and data.table

 

#' @export

 

#' @examples

 

#' get_DB_info(connectionString)

 

#' @note How to set up SQL Server connection string see \link{set_connString}. Be also sure you have a permissions for access to sys.dm_db_index_usage_stats:

 

#' check it with SELECT * FROM sys.dm_db_index_usage_stats. If not, contact your SQL Server admin.

 

 

get_DB_info <- function(connectionString) {

 

  options(scipen=999)

 

  if (missing(connectionString)) {

 

    print("Connection string is missing!")

 

    return("Try it again")

 

  }

 

  # connectionString <- connectionString

 

  pathtocsvloader <- gsub("/","\\\\",paste(system.file(package = "RSQLS")[1],"/Loader/csv_to_sql_loader.exe", sep = ""))

 

  pathtocsvloader <- replace_spaced_words(pathtocsvloader)

 

  pathtocsvloader <- gsub('.{1}$', '', pathtocsvloader)

 

  # logic for pathtocsvfiles variable

 

  pathtocsvfiles <- gsub("/","\\\\",paste(system.file(package = "RSQLS")[1],"/Data/", sep = ""))

 

  if (!endsWith(pathtocsvfiles, "\\")) {

 

    pathtocsvfiles <- paste(pathtocsvfiles,"\\", sep = "")

 

  }

 

  sqltabname <- "tempDBInfo"

 

  sqltabname <- gsub("\\[|\\]", "", sqltabname)

 

  if (length(strsplit(sqltabname,"\\. <file://.> ")[[1]]) > 1) {

 

    sqltabname_prev <- gsub("^[^.]*.", "", sqltabname)

 

  } else {

 

    sqltabname_prev <- sqltabname

 

  }

 

  sql_tab_name <- paste('"', sqltabname, '"', sep = "") # '"dbo.CFTC_Disaggregated_Raw_test"'

 

  sql_task <- paste('"dbinfo"', sep = "")

 

  real_pathtocsvfile <- paste('"', pathtocsvfiles, paste(sqltabname_prev, ".csv", sep = ""),'"', sep = "")

 

  file_to_be_deleted <- paste(pathtocsvfiles, paste(sqltabname_prev, ".csv", sep = ""), sep = "")

 

  ss <- paste('', pathtocsvloader, " ", connectionString, " ", sql_task, " ", real_pathtocsvfile, " ", "null", sep = "")

 

  # Call shell command

 

  oldw <- getOption("warn")

 

  options(warn = -1)

 

  sc <- shell(ss)

 

  if (file.exists(file_to_be_deleted)){

 

    out <- data.table::fread(file_to_be_deleted, stringsAsFactors = FALSE, sep = "~", fill = TRUE)

 

  } else{

 

    options(warn = oldw)

 

    stop('See the previous messages for more details.')

 

  }

 

  # Delete csv file

 

  if (file.exists(file_to_be_deleted)){

 

    invisible(file.remove(file_to_be_deleted))

 

  } else{

 

    options(warn = oldw)

 

    stop('See the previous messages for more details.')

 

  }

 

  if( sc == 1 ) {

 

    options(warn = oldw)

 

    stop('See the previous messages for more details.')

 

  } else {

 

    options(warn = oldw)

 

  }

 

  return(out)

 

}

 

 

 

-----P?vodn? zpr?va-----

Od: Duncan Murdoch <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com> >

Odesl?no: 13 March 2018 23:22

Komu: martiankabe at gmail.com <mailto:martiankabe at gmail.com> ; r-package-devel-bounces at r-project.org <mailto:r-package-devel-bounces at r-project.org> 

Kopie: r-package-devel at r-project.org <mailto:r-package-devel at r-project.org> 

P?edm?t: Re: [R-pkg-devel] Weird error message during R CMD Check

 

 

On 13/03/2018 4:53 PM,  <mailto:martiankabe at gmail.com> martiankabe at gmail.com <mailto:martiankabe at gmail.com>  wrote:

 

Hello,

  I'm trying to submit my package to CRAN but receiving the following

error message.

  object 'connectionString' not found

 

Your example never defined a variable called connectionString, so you can't pass it to a function.

 

 

Duncan Murdoch

 

 

  even if it is parameter of get_DB_info(connectionString) function -

see the function definition below error message.

  Please, can you help me to understand what should be fixed in the code

so that I could successfully submit my package to CRAN?

  Thanks a lot for any of your help in advance.

  Best,

Martin

    <https://win-builder.r-project.org/incoming_pretest/180313_212715_RSQLS> https://protect-au.mimecast.com/s/8uNYCE8kz9tk0VDvuN3dn-?domain=win-builder.r-project.org <https://win-builder.r-project.org/incoming_pretest/180313_212715_RSQLS> 

_16/00

check.log

* checking examples ...

** running examples for arch 'i386' ... ERROR

Running examples in 'RSQLS-Ex.R' failed

The error most likely occurred in:

  

base::assign(".ptime", proc.time(), pos = "CheckExEnv")

### Name: get_DB_info

### Title: Get database info

### Aliases: get_DB_info

### ** Examples

get_DB_info(connectionString)

Error in paste("", pathtocsvloader, " ", connectionString, " ", sql_task,  :

   object 'connectionString' not found

Calls: get_DB_info -> paste

Execution halted

** running examples for arch 'x64' ... ERROR

Running examples in 'RSQLS-Ex.R' failed

The error most likely occurred in:

  

base::assign(".ptime", proc.time(), pos = "CheckExEnv")

### Name: get_DB_info

### Title: Get database info

### Aliases: get_DB_info

### ** Examples

get_DB_info(connectionString)

Error in paste("", pathtocsvloader, " ", connectionString, " ", sql_task,  :

   object 'connectionString' not found

Calls: get_DB_info -> paste

Execution halted

* checking PDF version of manual ... OK

* DONE

Status: 2 ERRORs, 3 WARNINGs, 4 NOTEs

  ------------------------------------ get_DB_info(connectionString)

------------------------------------------------------------

  #' Get database info

#'

#' This function retrieves basic info about database defined

#' in SQL Server connection string.

#' @param connectionString Connection string to SQL server

#' @return Returns data.frame and data.table

#' @export

#' @examples

#' get_DB_info(connectionString)

#' @note How to set up SQL Server connection string see

\link{set_connString}. Be also sure you have a permissions for access

to

sys.dm_db_index_usage_stats:

#' check it with SELECT * FROM sys.dm_db_index_usage_stats. If not,

contact your SQL Server admin.

get_DB_info <- function(connectionString) {

   options(scipen=999)

   if (missing(connectionString)) {

     print("Connection string is missing!")

     return("Try it again")

   }

   pathtocsvloader <- gsub("/","\\\\",paste(system.file(package =

"RSQLS")[1],"/Loader/csv_to_sql_loader.exe", sep = ""))

   pathtocsvloader <- replace_spaced_words(pathtocsvloader)

   pathtocsvloader <- gsub('.{1}$', '', pathtocsvloader)

   # logic for pathtocsvfiles variable

   pathtocsvfiles <- gsub("/","\\\\",paste(system.file(package =

"RSQLS")[1],"/Data/", sep = ""))

   if (!endsWith(pathtocsvfiles, "\\")) {

     pathtocsvfiles <- paste(pathtocsvfiles,"\\", sep = "")

   }

   sqltabname <- "tempDBInfo"

   sqltabname <- gsub("\\[|\\]", "", sqltabname)

   if (length(strsplit(sqltabname," <file://.> \\. <file://.%22)[[1> ")[[1]]) > 1) {

     sqltabname_prev <- gsub("^[^.]*.", "", sqltabname)

   } else {

     sqltabname_prev <- sqltabname

   }

   sql_tab_name <- paste('"', sqltabname, '"', sep = "") #

'"dbo.CFTC_Disaggregated_Raw_test"'

   sql_task <- paste('"dbinfo"', sep = "")

   real_pathtocsvfile <- paste('"', pathtocsvfiles,

paste(sqltabname_prev, ".csv", sep = ""),'"', sep = "")

   file_to_be_deleted <- paste(pathtocsvfiles, paste(sqltabname_prev,

".csv", sep = ""), sep = "")

   ss <- paste('', pathtocsvloader, " ", connectionString, " ", sql_task, "

", real_pathtocsvfile, " ", "null", sep = "")

   # Call shell command

   oldw <- getOption("warn")

   options(warn = -1)

   sc <- shell(ss)

   if (file.exists(file_to_be_deleted)){

     out <- data.table::fread(file_to_be_deleted, stringsAsFactors =

FALSE, sep = "~", fill = TRUE)

   } else{

     options(warn = oldw)

     stop('See the previous messages for more details.')

   }

   # Delete csv file

   if (file.exists(file_to_be_deleted)){

     invisible(file.remove(file_to_be_deleted))

   } else{

     options(warn = oldw)

     stop('See the previous messages for more details.')

   }

   if( sc == 1 ) {

     options(warn = oldw)

     stop('See the previous messages for more details.')

   } else {

     options(warn = oldw)

   }

   return(out)

}

  ---

This email has been checked for viruses by Avast antivirus software.

 <https://www.avast.com/antivirus> https://protect-au.mimecast.com/s/vhyTCGvmB5i2OKMDs7hjTN?domain=avast.com <https://www.avast.com/antivirus> 

            [[alternative HTML version deleted]]

______________________________________________

 <mailto:R-package-devel at r-project.org> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>  mailing list

 <https://stat.ethz.ch/mailman/listinfo/r-package-devel> https://protect-au.mimecast.com/s/x6zoCJyp0qhgA3Y6TzI6if?domain=stat.ethz.ch <https://stat.ethz.ch/mailman/listinfo/r-package-devel> 





   [[alternative HTML version deleted]]



______________________________________________

R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>  mailing list

https://stat.ethz.ch/mailman/listinfo/r-package-devel

.




-- 
Marcelino de la Cruz Rot
Depto. de Biolog?a y Geolog?a
F?sica y Qu?mica Inorg?nica
Universidad Rey Juan Carlos
M?stoles Espa?a

______________________________________________
R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>  mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From csardi.gabor at gmail.com  Thu Mar 15 11:14:33 2018
From: csardi.gabor at gmail.com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 15 Mar 2018 10:14:33 +0000
Subject: [R-pkg-devel] Dealing with not so temporary files
In-Reply-To: <CAO1zAVZ0tZupjBNneNW9L=s+cMV_4Ph3jqNTQPyT8UbcenOdjw@mail.gmail.com>
References: <CC4CF299-54CF-4BCB-84B5-3BD0EB473462@noaa.gov>
 <91083895-bfb7-3ec0-cb75-cac92f25eb58@gmail.com>
 <CAO1zAVZ0tZupjBNneNW9L=s+cMV_4Ph3jqNTQPyT8UbcenOdjw@mail.gmail.com>
Message-ID: <CABtg=Kk8xsbbyna2Y2MHH_sZCnoZVfo-7aL=yHg2cMda=YY0ig@mail.gmail.com>

This seems to be a good occasion to note that the CRAN policy does not
seem to conform
the industry standards. Applications can actually store user level
configuration information,
cached data, logs, etc. in the user's home directory, and there
standard way to do this.

Here is the Apple recommendation:
https://developer.apple.com/library/content/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/FileSystemOverview/FileSystemOverview.html#//apple_ref/doc/uid/TP40010672-CH2-SW1

AFAIK all modern Linux distributions use the XDG standard, or
something close to it:
https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html

On Windows there are APIs to retrieve the right locations, but
generally it is all in
`%APPDATA%`: https://msdn.microsoft.com/en-us/library/dd378457(v=vs.85).aspx

The rappdirs package helps you to select the right location, in a
platform independent way.
Of course according to the CRAN policy, you still need to ask the user
interactively
before writing to the directories that rappdirs returns.

I think a good practice is to use "R" as the application name, and
within that a subdirectory
that is the package name. This is a way to do it, for configuration files:

## Windows
? rappdirs::user_config_dir("R", version = "mypackage")
[1] "C:/Users/gaborcsardi/AppData/R/R/mypackage"

## macOS
? rappdirs::user_config_dir("R", version = "mypackage")
[1] "/Users/gaborcsardi/Library/Application Support/R/mypackage"

## Linux
? rappdirs::user_config_dir("R", version = "mypackage", os = "unix")
[1] "/Users/gaborcsardi/.config/R/mypackage"

Gabor

On Tue, Mar 13, 2018 at 8:52 AM, Joris Meys <Joris.Meys at ugent.be> wrote:
> Duncan gave one option. The other option is to provide a specific
> write2disk() function or so that allows the user to determine whether
> he/she wants to save the data. Then the user can decide exactly where he
> wants to find it.
>
> The other important part is the format in which it's saved. Users can
> simply use save() or write.csv() (or any of the readr functions if you
> must) to store whatever data they want in the format they want. There's a
> lot of database connections possible as well if that's needed. The only
> reason I see to provide a specific write function or argument, is when the
> storage is done in a nonstandard format. And then it makes sense to provide
> both read_myformat() and write_myformat() in some form. That's what I as an
> R user would expect.
>
> Fwiw: I have seen the commotion on that discussion recently as well, but
> this is really nothing new. For as long as I remember, writing to disk only
> happens when you use a function that does explicitly that. Which makes
> sense as well, as eg my students often run R in a shared environment during
> classes, and sysadmins don't like software that starts writing files
> everywhere.
>
> Cheers
> Joris
>
>
>
> On Tue, Mar 13, 2018 at 12:32 AM, Duncan Murdoch <murdoch.duncan at gmail.com>
> wrote:
>
>> On 12/03/2018 6:26 PM, Roy Mendelssohn - NOAA Federal wrote:
>>
>>> Hi All:
>>>
>>> Recently there was a proper admonishment to a developer that it is bad
>>> etiquette writing to a user's home directory,  and for temporary files use
>>> the functions tempdir() and tempfile().  I am working on a new package
>>> (presently on Github) that downloads data from a remote server,  reads the
>>> data into R,  but I would like to save that file for the user to access
>>> later if they so desire.  Saving to the "temp directory" is not a good
>>> option for that,  want to put it somewhere where the user can easily find
>>> it.  What is the proper etiquette for this?  Even if I provide an argument
>>> for the user to specify the location to save the file,  I should provide a
>>> default location.
>>>
>>
>> Why not provide an argument whose default is something given by tempfile()?
>>
>> Duncan Murdoch
>>
>>
>>
>>> Any suggestions appreciated.
>>>
>>> -Roy
>>>
>>>
>>>
>>>
>>>
>>> **********************
>>> "The contents of this message do not reflect any position of the U.S.
>>> Government or NOAA."
>>> **********************
>>> Roy Mendelssohn
>>> Supervisory Operations Research Analyst
>>> NOAA/NMFS
>>> Environmental Research Division
>>> Southwest Fisheries Science Center
>>> ***Note new street address***
>>> 110 McAllister Way
>>> Santa Cruz, CA 95060
>>> Phone: (831)-420-3666
>>> Fax: (831) 420-3980
>>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>>>
>>> "Old age and treachery will overcome youth and skill."
>>> "From those who have been given much, much will be expected"
>>> "the arc of the moral universe is long, but it bends toward justice" -MLK
>>> Jr.
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>
>
> --
> Joris Meys
> Statistical consultant
>
> Department of Data Analysis and Mathematical Modelling
> Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
>
> tel: +32 (0)9 264 61 79
> -----------
> Biowiskundedagen 2017-2018
> http://www.biowiskundedagen.ugent.be/
>
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From Joris.Meys at ugent.be  Thu Mar 15 11:23:56 2018
From: Joris.Meys at ugent.be (Joris Meys)
Date: Thu, 15 Mar 2018 11:23:56 +0100
Subject: [R-pkg-devel] Dealing with not so temporary files
In-Reply-To: <CABtg=Kk8xsbbyna2Y2MHH_sZCnoZVfo-7aL=yHg2cMda=YY0ig@mail.gmail.com>
References: <CC4CF299-54CF-4BCB-84B5-3BD0EB473462@noaa.gov>
 <91083895-bfb7-3ec0-cb75-cac92f25eb58@gmail.com>
 <CAO1zAVZ0tZupjBNneNW9L=s+cMV_4Ph3jqNTQPyT8UbcenOdjw@mail.gmail.com>
 <CABtg=Kk8xsbbyna2Y2MHH_sZCnoZVfo-7aL=yHg2cMda=YY0ig@mail.gmail.com>
Message-ID: <CAO1zAVbO42uyipRowXN1umHCXaBN8ZqCzRpEwwRuU+FXtsyn-Q@mail.gmail.com>

Hi Gabor,

That's indeed the case, but I see good reasons for the CRAN policy when we
take reproducability into account. Afaik, CRAN and R always strived to
provide tools that give the same output regardless of the machine they're
running on when opened in a fresh R session. If packages store settings on
disk without explicitly asking the user, you increase the risk of code
generating different results on different machines without the user
necessarily be aware of it, or why it happens.

Obviously there's much to say in favor of allowing packages to store
settings, but there's a trade off between user experience and
reproducability that needs to be taken into account imho.

Cheers
Joris

On Thu, Mar 15, 2018 at 11:14 AM, G?bor Cs?rdi <csardi.gabor at gmail.com>
wrote:

> This seems to be a good occasion to note that the CRAN policy does not
> seem to conform
> the industry standards. Applications can actually store user level
> configuration information,
> cached data, logs, etc. in the user's home directory, and there
> standard way to do this.
>
> Here is the Apple recommendation:
> https://developer.apple.com/library/content/documentation/
> FileManagement/Conceptual/FileSystemProgrammingGuide/FileSystemOverview/
> FileSystemOverview.html#//apple_ref/doc/uid/TP40010672-CH2-SW1
>
> AFAIK all modern Linux distributions use the XDG standard, or
> something close to it:
> https://specifications.freedesktop.org/basedir-spec/
> basedir-spec-latest.html
>
> On Windows there are APIs to retrieve the right locations, but
> generally it is all in
> `%APPDATA%`: https://msdn.microsoft.com/en-us/library/dd378457(v=vs.85).
> aspx
>
> The rappdirs package helps you to select the right location, in a
> platform independent way.
> Of course according to the CRAN policy, you still need to ask the user
> interactively
> before writing to the directories that rappdirs returns.
>
> I think a good practice is to use "R" as the application name, and
> within that a subdirectory
> that is the package name. This is a way to do it, for configuration files:
>
> ## Windows
> ? rappdirs::user_config_dir("R", version = "mypackage")
> [1] "C:/Users/gaborcsardi/AppData/R/R/mypackage"
>
> ## macOS
> ? rappdirs::user_config_dir("R", version = "mypackage")
> [1] "/Users/gaborcsardi/Library/Application Support/R/mypackage"
>
> ## Linux
> ? rappdirs::user_config_dir("R", version = "mypackage", os = "unix")
> [1] "/Users/gaborcsardi/.config/R/mypackage"
>
> Gabor
>
> On Tue, Mar 13, 2018 at 8:52 AM, Joris Meys <Joris.Meys at ugent.be> wrote:
> > Duncan gave one option. The other option is to provide a specific
> > write2disk() function or so that allows the user to determine whether
> > he/she wants to save the data. Then the user can decide exactly where he
> > wants to find it.
> >
> > The other important part is the format in which it's saved. Users can
> > simply use save() or write.csv() (or any of the readr functions if you
> > must) to store whatever data they want in the format they want. There's a
> > lot of database connections possible as well if that's needed. The only
> > reason I see to provide a specific write function or argument, is when
> the
> > storage is done in a nonstandard format. And then it makes sense to
> provide
> > both read_myformat() and write_myformat() in some form. That's what I as
> an
> > R user would expect.
> >
> > Fwiw: I have seen the commotion on that discussion recently as well, but
> > this is really nothing new. For as long as I remember, writing to disk
> only
> > happens when you use a function that does explicitly that. Which makes
> > sense as well, as eg my students often run R in a shared environment
> during
> > classes, and sysadmins don't like software that starts writing files
> > everywhere.
> >
> > Cheers
> > Joris
> >
> >
> >
> > On Tue, Mar 13, 2018 at 12:32 AM, Duncan Murdoch <
> murdoch.duncan at gmail.com>
> > wrote:
> >
> >> On 12/03/2018 6:26 PM, Roy Mendelssohn - NOAA Federal wrote:
> >>
> >>> Hi All:
> >>>
> >>> Recently there was a proper admonishment to a developer that it is bad
> >>> etiquette writing to a user's home directory,  and for temporary files
> use
> >>> the functions tempdir() and tempfile().  I am working on a new package
> >>> (presently on Github) that downloads data from a remote server,  reads
> the
> >>> data into R,  but I would like to save that file for the user to access
> >>> later if they so desire.  Saving to the "temp directory" is not a good
> >>> option for that,  want to put it somewhere where the user can easily
> find
> >>> it.  What is the proper etiquette for this?  Even if I provide an
> argument
> >>> for the user to specify the location to save the file,  I should
> provide a
> >>> default location.
> >>>
> >>
> >> Why not provide an argument whose default is something given by
> tempfile()?
> >>
> >> Duncan Murdoch
> >>
> >>
> >>
> >>> Any suggestions appreciated.
> >>>
> >>> -Roy
> >>>
> >>>
> >>>
> >>>
> >>>
> >>> **********************
> >>> "The contents of this message do not reflect any position of the U.S.
> >>> Government or NOAA."
> >>> **********************
> >>> Roy Mendelssohn
> >>> Supervisory Operations Research Analyst
> >>> NOAA/NMFS
> >>> Environmental Research Division
> >>> Southwest Fisheries Science Center
> >>> ***Note new street address***
> >>> 110 McAllister Way
> >>> Santa Cruz, CA 95060
> >>> Phone: (831)-420-3666
> >>> Fax: (831) 420-3980
> >>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> >>>
> >>> "Old age and treachery will overcome youth and skill."
> >>> "From those who have been given much, much will be expected"
> >>> "the arc of the moral universe is long, but it bends toward justice"
> -MLK
> >>> Jr.
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>
> >>>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> >
> >
> > --
> > Joris Meys
> > Statistical consultant
> >
> > Department of Data Analysis and Mathematical Modelling
> > Ghent University
> > Coupure Links 653, B-9000 Gent (Belgium)
> > <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-
> 9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
> >
> > tel: +32 (0)9 264 61 79
> > -----------
> > Biowiskundedagen 2017-2018
> > http://www.biowiskundedagen.ugent.be/
> >
> > -------------------------------
> > Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From Joris.Meys at ugent.be  Thu Mar 15 12:45:16 2018
From: Joris.Meys at ugent.be (Joris Meys)
Date: Thu, 15 Mar 2018 12:45:16 +0100
Subject: [R-pkg-devel] Dealing with not so temporary files
In-Reply-To: <EF16177B-B201-40FA-B932-DC71DDF0C36A@icloud.com>
References: <CC4CF299-54CF-4BCB-84B5-3BD0EB473462@noaa.gov>
 <91083895-bfb7-3ec0-cb75-cac92f25eb58@gmail.com>
 <CAO1zAVZ0tZupjBNneNW9L=s+cMV_4Ph3jqNTQPyT8UbcenOdjw@mail.gmail.com>
 <CABtg=Kk8xsbbyna2Y2MHH_sZCnoZVfo-7aL=yHg2cMda=YY0ig@mail.gmail.com>
 <CAO1zAVbO42uyipRowXN1umHCXaBN8ZqCzRpEwwRuU+FXtsyn-Q@mail.gmail.com>
 <EF16177B-B201-40FA-B932-DC71DDF0C36A@icloud.com>
Message-ID: <CAO1zAVZrdtnhY__YGd5GV4TszWLM2qJnLyfr9WHPEzDGoBYzYQ@mail.gmail.com>

On Thu, Mar 15, 2018 at 12:27 PM, Rainer Krug <rainer_krug at icloud.com>
wrote:

>
> Yes - that is definitely true, but the one does not exclude the other. I
> actually think giving permission once, and than forgetting about it, is
> worse than knowing: Stop - user configuration is loaded - unless I tell it
> not to be loaded.
>

Indeed, with the caveat that it's up to the package author to add the
startup message, and that will be missed when startup messages are
suppressed.


>
> And one could go one step further: If R would provide a standardised API
> to store package configuration data, the loading could be disabled with
> e.g. ?vanilla.
>

If it's standardized and included in R itself, I'm all for it.

Cheers
Joris



-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From alejandrobaranek at gmail.com  Thu Mar 15 06:38:55 2018
From: alejandrobaranek at gmail.com (alejandro baranek)
Date: Thu, 15 Mar 2018 02:38:55 -0300
Subject: [R-pkg-devel] Fwd: [CRAN-pretest-archived] CRAN submission
 Rpolyhedra 0.2.2
In-Reply-To: <01d3bc17$Blat.v2.2.2$9f1fd318@mail.statistik.tu-dortmund.de>
References: <20180315022632.3A7A51641AB@xmpalantir.wu.ac.at>
 <01d3bc17$Blat.v2.2.2$9f1fd318@mail.statistik.tu-dortmund.de>
Message-ID: <CADJoD_ZDzQ6kzJB+jdLtrNbZeSSQG-MGscoj2BTk9e=OLM2gmQ@mail.gmail.com>

Hi list:

Please someone can help me with the stranges errors I recivied after a
minor bugfix in my package? tests ok, devtools::check() ok, TRAVIS CI ok...
What is the problem?

Best, Ale.

---------- Forwarded message ----------
From: <Uwe.Ligges at r-project.org>
Date: 2018-03-15 1:39 GMT-03:00
Subject: [CRAN-pretest-archived] CRAN submission Rpolyhedra 0.2.2
To: abaranek at dc.uba.ar
Cc: CRAN-submissions at r-project.org


Dear maintainer,

package Rpolyhedra_0.2.2.tar.gz does not pass the incoming checks
automatically, please see the pre-test at:
<https://win-builder.r-project.org/incoming_pretest/180315_
032641_Rpolyhedra_022/00check.log>
Status: 1 WARNING, 2 NOTEs

Current CRAN status: ERROR: 5, NOTE: 3, OK: 4
See: <https://CRAN.R-project.org/web/checks/check_results_Rpolyhedra.html>

Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on
the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please
reply-all to this message and explain.

More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/180315_
032641_Rpolyhedra_022>
The files will be removed after roughly 7 days.


Best regards,
CRAN teams' auto-check service




-- 
 alejandro baranek
@ken4rab <https://twitter.com/ken4rab>
qbotics <http://qbotics.tumblr.com/> | surferinvaders
<http://surferinvaders.tumblr.com> | algebraic-soundscapes
<http://imaginary.org/content/algebraic-soundscapes> | surfer-shuffle
<http://imaginary.org/program/surfer-shuffle>

	[[alternative HTML version deleted]]


From michael.nelson at sydney.edu.au  Thu Mar 15 07:42:57 2018
From: michael.nelson at sydney.edu.au (Michael Nelson)
Date: Thu, 15 Mar 2018 06:42:57 +0000
Subject: [R-pkg-devel] Weird error message during R CMD Check
In-Reply-To: <7710a62e-8d46-a44e-60a9-fe4ca83d6a89@urjc.es>
References: <005301d3bb0d$68d14330$3a73c990$@gmail.com>
 <f2c4db88-8399-2ac6-8588-cb0452cfb35d@gmail.com>
 <003601d3bbd9$9491b230$bdb51690$@gmail.com>,
 <7710a62e-8d46-a44e-60a9-fe4ca83d6a89@urjc.es>
Message-ID: <333E7627-8631-4A27-8815-245CCDBA2BF8@sydney.edu.au>

I don?t think the suggestion below will work as it would need to be a connection string to a database that the winbuilder computer (and whatever account) that is running would have access to.

It would be better to use \dontrun{} so that the examples aren?t run.

This is what is done in RODBC https://cran.r-project.org/web/packages/RODBC/index.html

More fundamentally, given   the cran repository policy on windows only packages, CRAN may not be the appropriate place to publish.

Michael.

On 15 Mar 2018, at 8:41 am, Marcelino de la Cruz Rot <marcelino.delacruz at urjc.es<mailto:marcelino.delacruz at urjc.es>> wrote:

It is very easy. You should define your variable connectionString before passing it to get_DB_info().

I.e.:

### ** Examples

connectionString <- WHATEVER_IS_CONNECTIONSTRING

get_DB_info(connectionString)


This would remove your error.

Cheers,

Marcelino.




El 14/03/2018 a las 22:15, martiankabe at gmail.com<mailto:martiankabe at gmail.com> escribi?:
Hi Duncan,


could you help me fix this issue, please?


Below is function which creates connection string.


#' Create connection string from function parameters

#'

#' This function defines SQL Server connection string

#' from function parameters.

#' @param datasource Server name

#' @param database Database name

#' @param usr Username

#' @param pwd Password

#' @note If username and password missing or empty \strong{Integrated Security=True} is used in connection string instead.

#' @return Connection string

#' @export

#' @examples

#' set_connString("LAPTOP-USER\\SQLEXPRESS", "Database_Name")

set_connString <- function(datasource, database, usr, pwd) {

  ds <- paste("Data Source=", datasource, ";", sep = "")

  db <- paste("Initial Catalog=", database, ";", sep = "")

  if ((missing(usr) & missing(pwd)) || (usr=="" & pwd=="")) {

    last_param <- "Integrated Security=True;MultipleActiveResultSets=True;"

  } else {

    last_param <- paste("Integrated Security=False;", "User Id=", usr, ";", "Password=", pwd, ";", "MultipleActiveResultSets=True;", sep = "")

  }

  return(paste('"', ds, db, last_param, '"', sep = ""))

}


This connection string is then passed to get_DB_info function ? see below.


How can I fix object ?connectionString? not found issue?


Thank you for any of your advice.

Martin


#' Get database info

#'

#' This function retrieves basic info about database defined

#' in SQL Server connection string.

#' @param connectionString Connection string to SQL server

#' @return Returns data.frame and data.table

#' @export

#' @examples

#' get_DB_info(connectionString)

#' @note How to set up SQL Server connection string see \link{set_connString}. Be also sure you have a permissions for access to sys.dm_db_index_usage_stats:

#' check it with SELECT * FROM sys.dm_db_index_usage_stats. If not, contact your SQL Server admin.


get_DB_info <- function(connectionString) {

  options(scipen=999)

  if (missing(connectionString)) {

    print("Connection string is missing!")

    return("Try it again")

  }

  # connectionString <- connectionString

  pathtocsvloader <- gsub("/","\\\\",paste(system.file(package = "RSQLS")[1],"/Loader/csv_to_sql_loader.exe", sep = ""))

  pathtocsvloader <- replace_spaced_words(pathtocsvloader)

  pathtocsvloader <- gsub('.{1}$', '', pathtocsvloader)

  # logic for pathtocsvfiles variable

  pathtocsvfiles <- gsub("/","\\\\",paste(system.file(package = "RSQLS")[1],"/Data/", sep = ""))

  if (!endsWith(pathtocsvfiles, "\\")) {

    pathtocsvfiles <- paste(pathtocsvfiles,"\\", sep = "")

  }

  sqltabname <- "tempDBInfo"

  sqltabname <- gsub("\\[|\\]", "", sqltabname)

  if (length(strsplit(sqltabname,"\\.")[[1]]) > 1) {

    sqltabname_prev <- gsub("^[^.]*.", "", sqltabname)

  } else {

    sqltabname_prev <- sqltabname

  }

  sql_tab_name <- paste('"', sqltabname, '"', sep = "") # '"dbo.CFTC_Disaggregated_Raw_test"'

  sql_task <- paste('"dbinfo"', sep = "")

  real_pathtocsvfile <- paste('"', pathtocsvfiles, paste(sqltabname_prev, ".csv", sep = ""),'"', sep = "")

  file_to_be_deleted <- paste(pathtocsvfiles, paste(sqltabname_prev, ".csv", sep = ""), sep = "")

  ss <- paste('', pathtocsvloader, " ", connectionString, " ", sql_task, " ", real_pathtocsvfile, " ", "null", sep = "")

  # Call shell command

  oldw <- getOption("warn")

  options(warn = -1)

  sc <- shell(ss)

  if (file.exists(file_to_be_deleted)){

    out <- data.table::fread(file_to_be_deleted, stringsAsFactors = FALSE, sep = "~", fill = TRUE)

  } else{

    options(warn = oldw)

    stop('See the previous messages for more details.')

  }

  # Delete csv file

  if (file.exists(file_to_be_deleted)){

    invisible(file.remove(file_to_be_deleted))

  } else{

    options(warn = oldw)

    stop('See the previous messages for more details.')

  }

  if( sc == 1 ) {

    options(warn = oldw)

    stop('See the previous messages for more details.')

  } else {

    options(warn = oldw)

  }

  return(out)

}



-----P?vodn? zpr?va-----
Od: Duncan Murdoch <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>>
Odesl?no: 13 March 2018 23:22
Komu: martiankabe at gmail.com<mailto:martiankabe at gmail.com>; r-package-devel-bounces at r-project.org<mailto:r-package-devel-bounces at r-project.org>
Kopie: r-package-devel at r-project.org<mailto:r-package-devel at r-project.org>
P?edm?t: Re: [R-pkg-devel] Weird error message during R CMD Check


On 13/03/2018 4:53 PM,  <mailto:martiankabe at gmail.com> martiankabe at gmail.com<mailto:martiankabe at gmail.com> wrote:

Hello,
  I'm trying to submit my package to CRAN but receiving the following
error message.
  object 'connectionString' not found

Your example never defined a variable called connectionString, so you can't pass it to a function.


Duncan Murdoch


  even if it is parameter of get_DB_info(connectionString) function -
see the function definition below error message.
  Please, can you help me to understand what should be fixed in the code
so that I could successfully submit my package to CRAN?
  Thanks a lot for any of your help in advance.
  Best,
Martin
    <https://win-builder.r-project.org/incoming_pretest/180313_212715_RSQLS> https://win-builder.r-project.org/incoming_pretest/180313_212715_RSQLS
_16/00
check.log
* checking examples ...
** running examples for arch 'i386' ... ERROR
Running examples in 'RSQLS-Ex.R' failed
The error most likely occurred in:

base::assign(".ptime", proc.time(), pos = "CheckExEnv")
### Name: get_DB_info
### Title: Get database info
### Aliases: get_DB_info
### ** Examples
get_DB_info(connectionString)
Error in paste("", pathtocsvloader, " ", connectionString, " ", sql_task,  :
   object 'connectionString' not found
Calls: get_DB_info -> paste
Execution halted
** running examples for arch 'x64' ... ERROR
Running examples in 'RSQLS-Ex.R' failed
The error most likely occurred in:

base::assign(".ptime", proc.time(), pos = "CheckExEnv")
### Name: get_DB_info
### Title: Get database info
### Aliases: get_DB_info
### ** Examples
get_DB_info(connectionString)
Error in paste("", pathtocsvloader, " ", connectionString, " ", sql_task,  :
   object 'connectionString' not found
Calls: get_DB_info -> paste
Execution halted
* checking PDF version of manual ... OK
* DONE
Status: 2 ERRORs, 3 WARNINGs, 4 NOTEs
  ------------------------------------ get_DB_info(connectionString)
------------------------------------------------------------
  #' Get database info
#'
#' This function retrieves basic info about database defined
#' in SQL Server connection string.
#' @param connectionString Connection string to SQL server
#' @return Returns data.frame and data.table
#' @export
#' @examples
#' get_DB_info(connectionString)
#' @note How to set up SQL Server connection string see
\link{set_connString}. Be also sure you have a permissions for access
to
sys.dm_db_index_usage_stats:
#' check it with SELECT * FROM sys.dm_db_index_usage_stats. If not,
contact your SQL Server admin.
get_DB_info <- function(connectionString) {
   options(scipen=999)
   if (missing(connectionString)) {
     print("Connection string is missing!")
     return("Try it again")
   }
   pathtocsvloader <- gsub("/","\\\\",paste(system.file(package =
"RSQLS")[1],"/Loader/csv_to_sql_loader.exe", sep = ""))
   pathtocsvloader <- replace_spaced_words(pathtocsvloader)
   pathtocsvloader <- gsub('.{1}$', '', pathtocsvloader)
   # logic for pathtocsvfiles variable
   pathtocsvfiles <- gsub("/","\\\\",paste(system.file(package =
"RSQLS")[1],"/Data/", sep = ""))
   if (!endsWith(pathtocsvfiles, "\\")) {
     pathtocsvfiles <- paste(pathtocsvfiles,"\\", sep = "")
   }
   sqltabname <- "tempDBInfo"
   sqltabname <- gsub("\\[|\\]", "", sqltabname)
   if (length(strsplit(sqltabname," <file://.> \\.")[[1]]) > 1) {
     sqltabname_prev <- gsub("^[^.]*.", "", sqltabname)
   } else {
     sqltabname_prev <- sqltabname
   }
   sql_tab_name <- paste('"', sqltabname, '"', sep = "") #
'"dbo.CFTC_Disaggregated_Raw_test"'
   sql_task <- paste('"dbinfo"', sep = "")
   real_pathtocsvfile <- paste('"', pathtocsvfiles,
paste(sqltabname_prev, ".csv", sep = ""),'"', sep = "")
   file_to_be_deleted <- paste(pathtocsvfiles, paste(sqltabname_prev,
".csv", sep = ""), sep = "")
   ss <- paste('', pathtocsvloader, " ", connectionString, " ", sql_task, "
", real_pathtocsvfile, " ", "null", sep = "")
   # Call shell command
   oldw <- getOption("warn")
   options(warn = -1)
   sc <- shell(ss)
   if (file.exists(file_to_be_deleted)){
     out <- data.table::fread(file_to_be_deleted, stringsAsFactors =
FALSE, sep = "~", fill = TRUE)
   } else{
     options(warn = oldw)
     stop('See the previous messages for more details.')
   }
   # Delete csv file
   if (file.exists(file_to_be_deleted)){
     invisible(file.remove(file_to_be_deleted))
   } else{
     options(warn = oldw)
     stop('See the previous messages for more details.')
   }
   if( sc == 1 ) {
     options(warn = oldw)
     stop('See the previous messages for more details.')
   } else {
     options(warn = oldw)
   }
   return(out)
}
  ---
This email has been checked for viruses by Avast antivirus software.
 <https://www.avast.com/antivirus> https://www.avast.com/antivirus
            [[alternative HTML version deleted]]
______________________________________________
 <mailto:R-package-devel at r-project.org> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
 <https://stat.ethz.ch/mailman/listinfo/r-package-devel> https://stat.ethz.ch/mailman/listinfo/r-package-devel


   [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel
.


--
Marcelino de la Cruz Rot
Depto. de Biolog?a y Geolog?a
F?sica y Qu?mica Inorg?nica
Universidad Rey Juan Carlos
M?stoles Espa?a

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From pdalgd at gmail.com  Thu Mar 15 16:13:11 2018
From: pdalgd at gmail.com (peter dalgaard)
Date: Thu, 15 Mar 2018 16:13:11 +0100
Subject: [R-pkg-devel] 
 [CRAN-pretest-archived] CRAN submission Rpolyhedra 0.2.2
In-Reply-To: <CADJoD_ZDzQ6kzJB+jdLtrNbZeSSQG-MGscoj2BTk9e=OLM2gmQ@mail.gmail.com>
References: <20180315022632.3A7A51641AB@xmpalantir.wu.ac.at>
 <01d3bc17$Blat.v2.2.2$9f1fd318@mail.statistik.tu-dortmund.de>
 <CADJoD_ZDzQ6kzJB+jdLtrNbZeSSQG-MGscoj2BTk9e=OLM2gmQ@mail.gmail.com>
Message-ID: <1C605965-F9E7-4AC7-8029-CC02A5DFA814@gmail.com>

The NOTEs look harmless, the WARNING is this

 (InternalException (HostCannotConnect "badges.ropensci.org" [connect: failed (Connection refused (WSAECONNREFUSED))]))

so badges did not want to speak to win-builder. Doesn't look like something you can deal with, except by removing the offending badge from README.md. 

The "Current CRAN" business is about the previous version, so likely irrelevant.

It seems reasonable for you to take the "false positive" route.

-pd


> On 15 Mar 2018, at 06:38 , alejandro baranek <alejandrobaranek at gmail.com> wrote:
> 
> Hi list:
> 
> Please someone can help me with the stranges errors I recivied after a
> minor bugfix in my package? tests ok, devtools::check() ok, TRAVIS CI ok...
> What is the problem?
> 
> Best, Ale.
> 
> ---------- Forwarded message ----------
> From: <Uwe.Ligges at r-project.org>
> Date: 2018-03-15 1:39 GMT-03:00
> Subject: [CRAN-pretest-archived] CRAN submission Rpolyhedra 0.2.2
> To: abaranek at dc.uba.ar
> Cc: CRAN-submissions at r-project.org
> 
> 
> Dear maintainer,
> 
> package Rpolyhedra_0.2.2.tar.gz does not pass the incoming checks
> automatically, please see the pre-test at:
> <https://win-builder.r-project.org/incoming_pretest/180315_
> 032641_Rpolyhedra_022/00check.log>
> Status: 1 WARNING, 2 NOTEs
> 
> Current CRAN status: ERROR: 5, NOTE: 3, OK: 4
> See: <https://CRAN.R-project.org/web/checks/check_results_Rpolyhedra.html>
> 
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on
> the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> If you are fairly certain the rejection is a false positive, please
> reply-all to this message and explain.
> 
> More details are given in the directory:
> <https://win-builder.r-project.org/incoming_pretest/180315_
> 032641_Rpolyhedra_022>
> The files will be removed after roughly 7 days.
> 
> 
> Best regards,
> CRAN teams' auto-check service
> 
> 
> 
> 
> -- 
> alejandro baranek
> @ken4rab <https://twitter.com/ken4rab>
> qbotics <http://qbotics.tumblr.com/> | surferinvaders
> <http://surferinvaders.tumblr.com> | algebraic-soundscapes
> <http://imaginary.org/content/algebraic-soundscapes> | surfer-shuffle
> <http://imaginary.org/program/surfer-shuffle>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From murdoch.duncan at gmail.com  Thu Mar 15 16:32:17 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 15 Mar 2018 11:32:17 -0400
Subject: [R-pkg-devel] Fwd: [CRAN-pretest-archived] CRAN submission
 Rpolyhedra 0.2.2
In-Reply-To: <CADJoD_ZDzQ6kzJB+jdLtrNbZeSSQG-MGscoj2BTk9e=OLM2gmQ@mail.gmail.com>
References: <20180315022632.3A7A51641AB@xmpalantir.wu.ac.at>
 <01d3bc17$Blat.v2.2.2$9f1fd318@mail.statistik.tu-dortmund.de>
 <CADJoD_ZDzQ6kzJB+jdLtrNbZeSSQG-MGscoj2BTk9e=OLM2gmQ@mail.gmail.com>
Message-ID: <8918a2ad-edc5-ff4e-99f9-13d4f4c73252@gmail.com>

On 15/03/2018 1:38 AM, alejandro baranek wrote:
> Hi list:
> 
> Please someone can help me with the stranges errors I recivied after a
> minor bugfix in my package? tests ok, devtools::check() ok, TRAVIS CI ok...
> What is the problem?

The main problem in the log is this one:

* checking top-level files ... WARNING
Conversion of 'README.md' failed:
pandoc.exe: Could not fetch https://badges.ropensci.org/157_status.svg
HttpExceptionRequest Request {
   host                 = "badges.ropensci.org"
   port                 = 443
   secure               = True
   requestHeaders       = []
   path                 = "/157_status.svg"
   queryString          = ""
   method               = "GET"
   proxy                = Nothing
   rawBody              = False
   redirectCount        = 10
   responseTimeout      = ResponseTimeoutDefault
   requestVersion       = HTTP/1.1
}
  (InternalException (HostCannotConnect "badges.ropensci.org" [connect: 
failed (Connection refused (WSAECONNREFUSED))]))

It appears your README.md document is trying to download 
badges.ropensci.org/157_status.svg, and the connection is timing out 
when the test machine tries the download.  Probably the easiest fix for 
this is to stop your document from trying to download that file:  just 
drop the link to it.

Duncan Murdoch




> 
> Best, Ale.
> 
> ---------- Forwarded message ----------
> From: <Uwe.Ligges at r-project.org>
> Date: 2018-03-15 1:39 GMT-03:00
> Subject: [CRAN-pretest-archived] CRAN submission Rpolyhedra 0.2.2
> To: abaranek at dc.uba.ar
> Cc: CRAN-submissions at r-project.org
> 
> 
> Dear maintainer,
> 
> package Rpolyhedra_0.2.2.tar.gz does not pass the incoming checks
> automatically, please see the pre-test at:
> <https://win-builder.r-project.org/incoming_pretest/180315_
> 032641_Rpolyhedra_022/00check.log>
> Status: 1 WARNING, 2 NOTEs
> 
> Current CRAN status: ERROR: 5, NOTE: 3, OK: 4
> See: <https://CRAN.R-project.org/web/checks/check_results_Rpolyhedra.html>
> 
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on
> the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> If you are fairly certain the rejection is a false positive, please
> reply-all to this message and explain.
> 
> More details are given in the directory:
> <https://win-builder.r-project.org/incoming_pretest/180315_
> 032641_Rpolyhedra_022>
> The files will be removed after roughly 7 days.
> 
> 
> Best regards,
> CRAN teams' auto-check service
> 
> 
> 
>


From alejandrobaranek at gmail.com  Thu Mar 15 17:39:30 2018
From: alejandrobaranek at gmail.com (alejandro baranek)
Date: Thu, 15 Mar 2018 13:39:30 -0300
Subject: [R-pkg-devel] Fwd: [CRAN-pretest-archived] CRAN submission
 Rpolyhedra 0.2.2
In-Reply-To: <8918a2ad-edc5-ff4e-99f9-13d4f4c73252@gmail.com>
References: <20180315022632.3A7A51641AB@xmpalantir.wu.ac.at>
 <01d3bc17$Blat.v2.2.2$9f1fd318@mail.statistik.tu-dortmund.de>
 <CADJoD_ZDzQ6kzJB+jdLtrNbZeSSQG-MGscoj2BTk9e=OLM2gmQ@mail.gmail.com>
 <8918a2ad-edc5-ff4e-99f9-13d4f4c73252@gmail.com>
Message-ID: <AFF52637-FCDD-43E4-AA6C-E705368D7BE1@gmail.com>

Thank you, Peter and Duncan. 
It seems it was a problem out of my control, but a minor correction on an cran URL. Maybe because of the late night time. 

Already opened the process to CRAN. Thanks for your help!
Ale


Enviado desde el m?vil

El 15 mar. 2018, a la(s) 12:32, Duncan Murdoch <murdoch.duncan at gmail.com> escribi?:

> On 15/03/2018 1:38 AM, alejandro baranek wrote:
>> Hi list:
>> Please someone can help me with the stranges errors I recivied after a
>> minor bugfix in my package? tests ok, devtools::check() ok, TRAVIS CI ok...
>> What is the problem?
> 
> The main problem in the log is this one:
> 
> * checking top-level files ... WARNING
> Conversion of 'README.md' failed:
> pandoc.exe: Could not fetch https://badges.ropensci.org/157_status.svg
> HttpExceptionRequest Request {
>  host                 = "badges.ropensci.org"
>  port                 = 443
>  secure               = True
>  requestHeaders       = []
>  path                 = "/157_status.svg"
>  queryString          = ""
>  method               = "GET"
>  proxy                = Nothing
>  rawBody              = False
>  redirectCount        = 10
>  responseTimeout      = ResponseTimeoutDefault
>  requestVersion       = HTTP/1.1
> }
> (InternalException (HostCannotConnect "badges.ropensci.org" [connect: failed (Connection refused (WSAECONNREFUSED))]))
> 
> It appears your README.md document is trying to download badges.ropensci.org/157_status.svg, and the connection is timing out when the test machine tries the download.  Probably the easiest fix for this is to stop your document from trying to download that file:  just drop the link to it.
> 
> Duncan Murdoch
> 
> 
> 
> 
>> Best, Ale.
>> ---------- Forwarded message ----------
>> From: <Uwe.Ligges at r-project.org>
>> Date: 2018-03-15 1:39 GMT-03:00
>> Subject: [CRAN-pretest-archived] CRAN submission Rpolyhedra 0.2.2
>> To: abaranek at dc.uba.ar
>> Cc: CRAN-submissions at r-project.org
>> Dear maintainer,
>> package Rpolyhedra_0.2.2.tar.gz does not pass the incoming checks
>> automatically, please see the pre-test at:
>> <https://win-builder.r-project.org/incoming_pretest/180315_
>> 032641_Rpolyhedra_022/00check.log>
>> Status: 1 WARNING, 2 NOTEs
>> Current CRAN status: ERROR: 5, NOTE: 3, OK: 4
>> See: <https://CRAN.R-project.org/web/checks/check_results_Rpolyhedra.html>
>> Please fix all problems and resubmit a fixed version via the webform.
>> If you are not sure how to fix the problems shown, please ask for help on
>> the R-package-devel mailing list:
>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>> If you are fairly certain the rejection is a false positive, please
>> reply-all to this message and explain.
>> More details are given in the directory:
>> <https://win-builder.r-project.org/incoming_pretest/180315_
>> 032641_Rpolyhedra_022>
>> The files will be removed after roughly 7 days.
>> Best regards,
>> CRAN teams' auto-check service
> 


From rhelp at krueger-family.de  Fri Mar 16 12:30:47 2018
From: rhelp at krueger-family.de (Knut Krueger)
Date: Fri, 16 Mar 2018 12:30:47 +0100
Subject: [R-pkg-devel] library dlstats -> cran_stats()
Message-ID: <a59e028b-cf32-51b0-1b17-467f427da6a0@krueger-family.de>


Dear all,

Does anybody know whether the statistics are counting also  updates?
And if yes is it possible to get only the count of new installations?

Kind regards Knut


I


From rhelp at krueger-family.de  Fri Mar 16 12:49:26 2018
From: rhelp at krueger-family.de (Knut Krueger)
Date: Fri, 16 Mar 2018 12:49:26 +0100
Subject: [R-pkg-devel] 
 Roxygen: function documentation to get \item{...} in .rd file
In-Reply-To: <CAO1zAVZSwSKAqjXPRCOqtDrOP4DjXcrZaH+xY-utcHh+XioU=A@mail.gmail.com>
References: <6bffd356-6fb5-e25c-19b5-66af7fbfab31@krueger-family.de>
 <CAO1zAVa6JKZxtsB=5TrNd5JGEgtQsz=bMskRvDeCLEyDY=XD5Q@mail.gmail.com>
 <CAO1zAVZSwSKAqjXPRCOqtDrOP4DjXcrZaH+xY-utcHh+XioU=A@mail.gmail.com>
Message-ID: <05ea09f4-270f-051d-7ec0-eae293718a35@krueger-family.de>

Am 12.03.2018 um 20:58 schrieb Joris Meys:
> Hi Knut,
> 
> on a sidenote: did you try the Rd2roxygen package? That could also make 
> your work a lot easier.
> 
> https://cran.r-project.org/web/packages/Rd2roxygen/index.html
> Cheers
> Joris
> 
Hi Joris,
thank's a lot.
Rd2roxygen is very helpful

Knut


From mark.vanderloo at gmail.com  Fri Mar 16 12:53:46 2018
From: mark.vanderloo at gmail.com (Mark van der Loo)
Date: Fri, 16 Mar 2018 11:53:46 +0000
Subject: [R-pkg-devel] library dlstats -> cran_stats()
In-Reply-To: <a59e028b-cf32-51b0-1b17-467f427da6a0@krueger-family.de>
References: <a59e028b-cf32-51b0-1b17-467f427da6a0@krueger-family.de>
Message-ID: <CAOKDuOgSkMZsim+qwt_fsx-yUr4T9S8gNOEXckitCjxFAx_=yA@mail.gmail.com>

Knut

AFAIR the download statistics are limited to downloads from RStudio's cloud
service, so none of the other CRAN mirrors are included. I think there is
no separation between updates, re-installs, or installs done automatically
by CI-services, for example.


-Mark



Op vr 16 mrt. 2018 om 12:30 schreef Knut Krueger <rhelp at krueger-family.de>:

>
> Dear all,
>
> Does anybody know whether the statistics are counting also  updates?
> And if yes is it possible to get only the count of new installations?
>
> Kind regards Knut
>
>
> I
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From spencer.graves at effectivedefense.org  Fri Mar 16 13:44:06 2018
From: spencer.graves at effectivedefense.org (Spencer Graves)
Date: Fri, 16 Mar 2018 07:44:06 -0500
Subject: [R-pkg-devel] library dlstats -> cran_stats()
In-Reply-To: <CAOKDuOgSkMZsim+qwt_fsx-yUr4T9S8gNOEXckitCjxFAx_=yA@mail.gmail.com>
References: <a59e028b-cf32-51b0-1b17-467f427da6a0@krueger-family.de>
 <CAOKDuOgSkMZsim+qwt_fsx-yUr4T9S8gNOEXckitCjxFAx_=yA@mail.gmail.com>
Message-ID: <1b9eb087-bbfb-53c1-5d65-fc84a861d1bb@effectivedefense.org>



On 2018-03-16 06:53, Mark van der Loo wrote:
> Knut
>
> AFAIR the download statistics are limited to downloads from RStudio's cloud
> service, so none of the other CRAN mirrors are included. I think there is
> no separation between updates, re-installs, or installs done automatically
> by CI-services, for example.


 ????? That's what it says in the DESCRIPTION file of the "dlstats" 
package, available at 
"http://finzi.psych.upenn.edu/R/library/dlstats/DESCRIPTION".


 ????? Spencer Graves
>
> -Mark
>
>
>
> Op vr 16 mrt. 2018 om 12:30 schreef Knut Krueger <rhelp at krueger-family.de>:
>
>> Dear all,
>>
>> Does anybody know whether the statistics are counting also  updates?
>> And if yes is it possible to get only the count of new installations?
>>
>> Kind regards Knut
>>
>>
>> I
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From rhelp at krueger-family.de  Fri Mar 16 16:57:19 2018
From: rhelp at krueger-family.de (Knut Krueger)
Date: Fri, 16 Mar 2018 16:57:19 +0100
Subject: [R-pkg-devel] library dlstats -> cran_stats()
In-Reply-To: <1b9eb087-bbfb-53c1-5d65-fc84a861d1bb@effectivedefense.org>
References: <a59e028b-cf32-51b0-1b17-467f427da6a0@krueger-family.de>
 <CAOKDuOgSkMZsim+qwt_fsx-yUr4T9S8gNOEXckitCjxFAx_=yA@mail.gmail.com>
 <1b9eb087-bbfb-53c1-5d65-fc84a861d1bb@effectivedefense.org>
Message-ID: <a11dd682-1913-2aef-039f-f29347bbec1b@krueger-family.de>

Am 16.03.2018 um 13:44 schrieb Spencer Graves:
> 
> 
> On 2018-03-16 06:53, Mark van der Loo wrote:
>> Knut
>>
>> AFAIR the download statistics are limited to downloads from RStudio's 
>> cloud

are there any other statistics from cran available?

Kind regards Knut


From mark.vanderloo at gmail.com  Fri Mar 16 17:02:32 2018
From: mark.vanderloo at gmail.com (Mark van der Loo)
Date: Fri, 16 Mar 2018 16:02:32 +0000
Subject: [R-pkg-devel] library dlstats -> cran_stats()
In-Reply-To: <a11dd682-1913-2aef-039f-f29347bbec1b@krueger-family.de>
References: <a59e028b-cf32-51b0-1b17-467f427da6a0@krueger-family.de>
 <CAOKDuOgSkMZsim+qwt_fsx-yUr4T9S8gNOEXckitCjxFAx_=yA@mail.gmail.com>
 <1b9eb087-bbfb-53c1-5d65-fc84a861d1bb@effectivedefense.org>
 <a11dd682-1913-2aef-039f-f29347bbec1b@krueger-family.de>
Message-ID: <CAOKDuOjnDY=uNyKiq0cuuAHaciNCFWZrgAK-_1zuZDBz3pLTcQ@mail.gmail.com>

unfortunately not.

In any case, it would depend on the willingness of each CRAN mirror
maintainer to record and publish such statistics.

-M

Op vr 16 mrt. 2018 om 16:57 schreef Knut Krueger <rhelp at krueger-family.de>:

> Am 16.03.2018 um 13:44 schrieb Spencer Graves:
> >
> >
> > On 2018-03-16 06:53, Mark van der Loo wrote:
> >> Knut
> >>
> >> AFAIR the download statistics are limited to downloads from RStudio's
> >> cloud
>
> are there any other statistics from cran available?
>
> Kind regards Knut
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From tkeitt at utexas.edu  Mon Mar 19 00:58:10 2018
From: tkeitt at utexas.edu (Tim Keitt)
Date: Sun, 18 Mar 2018 18:58:10 -0500
Subject: [R-pkg-devel] Avoid reprocessing Rmd vignette
Message-ID: <CANnL8gpn7=1pOxvApQwwrNfHSxk1LCq3=FV+hpJEY3-2PFoWfg@mail.gmail.com>

I have an Rmd vignette that runs some benchmarks. It takes long enough (20+
minutes) that eg TravisCI will choke. I've not tried submitting to CRAN.
What is the best practice for handling this situation? Do I generate
HTML/PDF output locally and try to make them static? The vignette builder
is knitr. I know about the R.rsp package but I do not know if it handles
Rmd files.

Thanks.

THK


http://www.keittlab.org/

	[[alternative HTML version deleted]]


From edd at debian.org  Mon Mar 19 02:14:13 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 18 Mar 2018 20:14:13 -0500
Subject: [R-pkg-devel] Avoid reprocessing Rmd vignette
In-Reply-To: <CANnL8gpn7=1pOxvApQwwrNfHSxk1LCq3=FV+hpJEY3-2PFoWfg@mail.gmail.com>
References: <CANnL8gpn7=1pOxvApQwwrNfHSxk1LCq3=FV+hpJEY3-2PFoWfg@mail.gmail.com>
Message-ID: <23215.3813.439789.70559@rob.eddelbuettel.com>


Tim,

On 18 March 2018 at 18:58, Tim Keitt wrote:
| I have an Rmd vignette that runs some benchmarks. It takes long enough (20+
| minutes) that eg TravisCI will choke. I've not tried submitting to CRAN.
| What is the best practice for handling this situation? Do I generate
| HTML/PDF output locally and try to make them static? The vignette builder
| is knitr. I know about the R.rsp package but I do not know if it handles
| Rmd files.

Tests are tickled from a runner script such as either one of

      tests/doRUnit.R
      tests/testthat.R

so you have an entry point to control for environment variables.

Travis clearly documents what theirs are -- so you could just turn it off --
and I have opted (years ago) for a more endogeneous scheme of suppressing
tests on CRAN based on version numbers (as I suppress tests when version
numbers are "release-style" form 'a.b.c', but then run the tests when the
version number is "dev-style" ie a.b.c.d).

You can alternatively check for CRAN via an env.var; I forget what it is
called and cannot grep for it as my scheme does not need it. WRE may tell you
what it is.

Hth,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From tkeitt at utexas.edu  Mon Mar 19 03:57:20 2018
From: tkeitt at utexas.edu (Tim Keitt)
Date: Sun, 18 Mar 2018 21:57:20 -0500
Subject: [R-pkg-devel] Avoid reprocessing Rmd vignette
In-Reply-To: <23215.3813.439789.70559@rob.eddelbuettel.com>
References: <CANnL8gpn7=1pOxvApQwwrNfHSxk1LCq3=FV+hpJEY3-2PFoWfg@mail.gmail.com>
 <23215.3813.439789.70559@rob.eddelbuettel.com>
Message-ID: <CANnL8go=F3OdMrrUCUF2_5ZQ_vi0i0PD6RM6bNUWtobnRQ0vJQ@mail.gmail.com>

http://www.keittlab.org/

On Sun, Mar 18, 2018 at 8:14 PM, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> Tim,
>
> On 18 March 2018 at 18:58, Tim Keitt wrote:
> | I have an Rmd vignette that runs some benchmarks. It takes long enough
> (20+
> | minutes) that eg TravisCI will choke. I've not tried submitting to CRAN.
> | What is the best practice for handling this situation? Do I generate
> | HTML/PDF output locally and try to make them static? The vignette builder
> | is knitr. I know about the R.rsp package but I do not know if it handles
> | Rmd files.
>
> Tests are tickled from a runner script such as either one of
>
>       tests/doRUnit.R
>       tests/testthat.R
>
> so you have an entry point to control for environment variables.
>
> Travis clearly documents what theirs are -- so you could just turn it off
> --
> and I have opted (years ago) for a more endogeneous scheme of suppressing
> tests on CRAN based on version numbers (as I suppress tests when version
> numbers are "release-style" form 'a.b.c', but then run the tests when the
> version number is "dev-style" ie a.b.c.d).
>

That's a great idea, however my problem is with building a vignette, not
running tests, unless they are linked in some way I'm not understanding.

THK


>
> You can alternatively check for CRAN via an env.var; I forget what it is
> called and cannot grep for it as my scheme does not need it. WRE may tell
> you
> what it is.
>
> Hth,  Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From i.ucar86 at gmail.com  Mon Mar 19 08:18:02 2018
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Mon, 19 Mar 2018 08:18:02 +0100
Subject: [R-pkg-devel] Avoid reprocessing Rmd vignette
In-Reply-To: <CANnL8go=F3OdMrrUCUF2_5ZQ_vi0i0PD6RM6bNUWtobnRQ0vJQ@mail.gmail.com>
References: <CANnL8gpn7=1pOxvApQwwrNfHSxk1LCq3=FV+hpJEY3-2PFoWfg@mail.gmail.com>
 <23215.3813.439789.70559@rob.eddelbuettel.com>
 <CANnL8go=F3OdMrrUCUF2_5ZQ_vi0i0PD6RM6bNUWtobnRQ0vJQ@mail.gmail.com>
Message-ID: <CALEXWq2o4tw5trDEfLc4nmAWURLNG4FviM8yXWPcENH-YAMXuA@mail.gmail.com>

2018-03-19 3:57 GMT+01:00 Tim Keitt <tkeitt at utexas.edu>:
> http://www.keittlab.org/
>
> On Sun, Mar 18, 2018 at 8:14 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
>
>>
>> Tim,
>>
>> On 18 March 2018 at 18:58, Tim Keitt wrote:
>> | I have an Rmd vignette that runs some benchmarks. It takes long enough
>> (20+
>> | minutes) that eg TravisCI will choke. I've not tried submitting to CRAN.
>> | What is the best practice for handling this situation? Do I generate
>> | HTML/PDF output locally and try to make them static? The vignette builder
>> | is knitr. I know about the R.rsp package but I do not know if it handles
>> | Rmd files.
>>
>> Tests are tickled from a runner script such as either one of
>>
>>       tests/doRUnit.R
>>       tests/testthat.R
>>
>> so you have an entry point to control for environment variables.
>>
>> Travis clearly documents what theirs are -- so you could just turn it off
>> --
>> and I have opted (years ago) for a more endogeneous scheme of suppressing
>> tests on CRAN based on version numbers (as I suppress tests when version
>> numbers are "release-style" form 'a.b.c', but then run the tests when the
>> version number is "dev-style" ie a.b.c.d).
>>
>
> That's a great idea, however my problem is with building a vignette, not
> running tests, unless they are linked in some way I'm not understanding.

One of my packages on CRAN contains a vignette with a benchmark. You
can check what I do here (search for "microbenchmark"):

https://raw.githubusercontent.com/r-simmer/simmer/master/vignettes/simmer-07-ctmc.Rmd

Basically, those chunks that use microbenchmark are marked as
"eval=FALSE", and the resulting figures are static images. I run those
manually and update the images from time to time if something relevant
changed. Apart from saving compilation time, this way I don't need to
include microbenchmark as a dependency.

I?aki

>
> THK
>
>
>>
>> You can alternatively check for CRAN via an env.var; I forget what it is
>> called and cannot grep for it as my scheme does not need it. WRE may tell
>> you
>> what it is.
>>
>> Hth,  Dirk
>>
>> --
>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From thierry.onkelinx at inbo.be  Mon Mar 19 09:29:00 2018
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Mon, 19 Mar 2018 09:29:00 +0100
Subject: [R-pkg-devel] Avoid reprocessing Rmd vignette
In-Reply-To: <CALEXWq2o4tw5trDEfLc4nmAWURLNG4FviM8yXWPcENH-YAMXuA@mail.gmail.com>
References: <CANnL8gpn7=1pOxvApQwwrNfHSxk1LCq3=FV+hpJEY3-2PFoWfg@mail.gmail.com>
 <23215.3813.439789.70559@rob.eddelbuettel.com>
 <CANnL8go=F3OdMrrUCUF2_5ZQ_vi0i0PD6RM6bNUWtobnRQ0vJQ@mail.gmail.com>
 <CALEXWq2o4tw5trDEfLc4nmAWURLNG4FviM8yXWPcENH-YAMXuA@mail.gmail.com>
Message-ID: <CAJuCY5wUHdP2Uo5KRrcQqscwPBFzLS4OGByZh1cje==bfHKNqw@mail.gmail.com>

You can make things even a bit easier by setting "eval=myeval" and set
"myeval <- FALSE" at the top of the vignette. In case you want to update
the figures, you only have to set "myeval <- TRUE" and run the vignette.


ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>

2018-03-19 8:18 GMT+01:00 I?aki ?car <i.ucar86 at gmail.com>:

> 2018-03-19 3:57 GMT+01:00 Tim Keitt <tkeitt at utexas.edu>:
> > http://www.keittlab.org/
> >
> > On Sun, Mar 18, 2018 at 8:14 PM, Dirk Eddelbuettel <edd at debian.org>
> wrote:
> >
> >>
> >> Tim,
> >>
> >> On 18 March 2018 at 18:58, Tim Keitt wrote:
> >> | I have an Rmd vignette that runs some benchmarks. It takes long enough
> >> (20+
> >> | minutes) that eg TravisCI will choke. I've not tried submitting to
> CRAN.
> >> | What is the best practice for handling this situation? Do I generate
> >> | HTML/PDF output locally and try to make them static? The vignette
> builder
> >> | is knitr. I know about the R.rsp package but I do not know if it
> handles
> >> | Rmd files.
> >>
> >> Tests are tickled from a runner script such as either one of
> >>
> >>       tests/doRUnit.R
> >>       tests/testthat.R
> >>
> >> so you have an entry point to control for environment variables.
> >>
> >> Travis clearly documents what theirs are -- so you could just turn it
> off
> >> --
> >> and I have opted (years ago) for a more endogeneous scheme of
> suppressing
> >> tests on CRAN based on version numbers (as I suppress tests when version
> >> numbers are "release-style" form 'a.b.c', but then run the tests when
> the
> >> version number is "dev-style" ie a.b.c.d).
> >>
> >
> > That's a great idea, however my problem is with building a vignette, not
> > running tests, unless they are linked in some way I'm not understanding.
>
> One of my packages on CRAN contains a vignette with a benchmark. You
> can check what I do here (search for "microbenchmark"):
>
> https://raw.githubusercontent.com/r-simmer/simmer/master/
> vignettes/simmer-07-ctmc.Rmd
>
> Basically, those chunks that use microbenchmark are marked as
> "eval=FALSE", and the resulting figures are static images. I run those
> manually and update the images from time to time if something relevant
> changed. Apart from saving compilation time, this way I don't need to
> include microbenchmark as a dependency.
>
> I?aki
>
> >
> > THK
> >
> >
> >>
> >> You can alternatively check for CRAN via an env.var; I forget what it is
> >> called and cannot grep for it as my scheme does not need it. WRE may
> tell
> >> you
> >> what it is.
> >>
> >> Hth,  Dirk
> >>
> >> --
> >> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd at debian.org  Mon Mar 19 12:41:13 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Mon, 19 Mar 2018 06:41:13 -0500
Subject: [R-pkg-devel] Avoid reprocessing Rmd vignette
In-Reply-To: <CANnL8go=F3OdMrrUCUF2_5ZQ_vi0i0PD6RM6bNUWtobnRQ0vJQ@mail.gmail.com>
References: <CANnL8gpn7=1pOxvApQwwrNfHSxk1LCq3=FV+hpJEY3-2PFoWfg@mail.gmail.com>
 <23215.3813.439789.70559@rob.eddelbuettel.com>
 <CANnL8go=F3OdMrrUCUF2_5ZQ_vi0i0PD6RM6bNUWtobnRQ0vJQ@mail.gmail.com>
Message-ID: <23215.41433.678856.270841@rob.eddelbuettel.com>


On 18 March 2018 at 21:57, Tim Keitt wrote:
| That's a great idea, however my problem is with building a vignette, not
| running tests, unless they are linked in some way I'm not understanding.

Similar idea applies: condition, just as Inaki and Thierry suggested.  An
example for a conditional vignette evaluation is 

```{r echo = FALSE, message = FALSE}`r ''`
hasData <- requireNamespace("hurricaneexposuredata", quietly = TRUE)                #1
if (!hasData) {                                                                     #2
    knitr::opts_chunk$set(eval = FALSE)                                             #3
    msg <- paste("Note: Examples in this vignette require that the", 
                 "`hurricaneexposuredata` package be installed. The system",
                 "currently running this vignette does not have that package",
                 "installed, so code examples will not be evaluated.")
    msg <- paste(strwrap(msg), collapse="\n")
    message(msg)                                                                    #4
}
```

and the paper (https://journal.r-project.org/archive/2017/RJ-2017-026/) by
Brooke Anderson and myself discusses #1 to #4.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From hugh.parsonage at gmail.com  Mon Mar 19 13:11:00 2018
From: hugh.parsonage at gmail.com (Hugh Parsonage)
Date: Mon, 19 Mar 2018 23:11:00 +1100
Subject: [R-pkg-devel] Very large packages in Additional_repositories
Message-ID: <CAJmOi+NPzJ=58XdwvKbCW-PaTyLvkJJjG1qCmFm2nXFLrfRg2g@mail.gmail.com>

Dear list,

I'm considering submitting a package to CRAN. The package would be a
'foyer' or API to a much larger package (>1GB tarball) containing
geographical data that the 'foyer' package would use to perform tasks
like geocoding. The foyer package would be usable, though quite
limited, as a standalone package, and I can technically pass an R CMD
check by placing the 1 GB package in Suggests and using an
Additional_repository, but it takes a long time to retrieve and
install from the Additional_repository. While I believe the downside
of long install times would be acceptable for end-users (who would
only need to install the package once a year), for CRAN it could
occupy a large part of the check farm and have to occur much more
frequently.

The package once installed makes good use of lazy loading; in
particular, it would be basically unusable if the CRAN package had to
connect and download the necessary pieces from the large package each
time it was required. I thought about breaking up the package into
lots of little packages; however, even though the package is not
strictly atomic, its indivisible elements would still be too large for
CRAN.

My questions are:
  would this 'foyer' package be acceptable to CRAN? and, if so,
  what can I do so that the foyer package doesn't eat up CRAN's
computing resources (either on submission or once accepted) when
checking Suggests:


Best,

Hugh.


From brian at braverock.com  Mon Mar 19 13:28:57 2018
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 19 Mar 2018 07:28:57 -0500
Subject: [R-pkg-devel] Very large packages in Additional_repositories
Message-ID: <awghl4v9sh7t9uhxfuf089hs.1521462537805@email.android.com>


    
Why not add an install function to foyer that would get the large data package?
Have examples and vignette use a small test data set, so only end users would actually install the large data set.
Regards,
Brian


--Brian G. Peterson?ph: 773-459-4973im: bgpbraverockSent from my mobile, please excuse my brevity.?

-------- Original message --------
From: Hugh Parsonage <hugh.parsonage at gmail.com> 
Date: 3/19/18  07:11  (GMT-06:00) 
To: R-package-devel <r-package-devel at r-project.org> 
Subject: [R-pkg-devel] Very large packages in Additional_repositories 

Dear list,

I'm considering submitting a package to CRAN. The package would be a
'foyer' or API to a much larger package (>1GB tarball) containing
geographical data that the 'foyer' package would use to perform tasks
like geocoding. The foyer package would be usable, though quite
limited, as a standalone package, and I can technically pass an R CMD
check by placing the 1 GB package in Suggests and using an
Additional_repository, but it takes a long time to retrieve and
install from the Additional_repository. While I believe the downside
of long install times would be acceptable for end-users (who would
only need to install the package once a year), for CRAN it could
occupy a large part of the check farm and have to occur much more
frequently.

The package once installed makes good use of lazy loading; in
particular, it would be basically unusable if the CRAN package had to
connect and download the necessary pieces from the large package each
time it was required. I thought about breaking up the package into
lots of little packages; however, even though the package is not
strictly atomic, its indivisible elements would still be too large for
CRAN.

My questions are:
? would this 'foyer' package be acceptable to CRAN? and, if so,
? what can I do so that the foyer package doesn't eat up CRAN's
computing resources (either on submission or once accepted) when
checking Suggests:


Best,

Hugh.

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From tkeitt at utexas.edu  Tue Mar 20 03:54:43 2018
From: tkeitt at utexas.edu (Tim Keitt)
Date: Mon, 19 Mar 2018 21:54:43 -0500
Subject: [R-pkg-devel] Avoid reprocessing Rmd vignette
In-Reply-To: <CALEXWq2o4tw5trDEfLc4nmAWURLNG4FviM8yXWPcENH-YAMXuA@mail.gmail.com>
References: <CANnL8gpn7=1pOxvApQwwrNfHSxk1LCq3=FV+hpJEY3-2PFoWfg@mail.gmail.com>
 <23215.3813.439789.70559@rob.eddelbuettel.com>
 <CANnL8go=F3OdMrrUCUF2_5ZQ_vi0i0PD6RM6bNUWtobnRQ0vJQ@mail.gmail.com>
 <CALEXWq2o4tw5trDEfLc4nmAWURLNG4FviM8yXWPcENH-YAMXuA@mail.gmail.com>
Message-ID: <CANnL8go3wHxsTfGHP69eEnG0v9o9niOTrS0fydtDfH9yxHGuqw@mail.gmail.com>

http://www.keittlab.org/

On Mon, Mar 19, 2018 at 2:18 AM, I?aki ?car <i.ucar86 at gmail.com> wrote:

> 2018-03-19 3:57 GMT+01:00 Tim Keitt <tkeitt at utexas.edu>:
> > http://www.keittlab.org/
> >
> > On Sun, Mar 18, 2018 at 8:14 PM, Dirk Eddelbuettel <edd at debian.org>
> wrote:
> >
> >>
> >> Tim,
> >>
> >> On 18 March 2018 at 18:58, Tim Keitt wrote:
> >> | I have an Rmd vignette that runs some benchmarks. It takes long enough
> >> (20+
> >> | minutes) that eg TravisCI will choke. I've not tried submitting to
> CRAN.
> >> | What is the best practice for handling this situation? Do I generate
> >> | HTML/PDF output locally and try to make them static? The vignette
> builder
> >> | is knitr. I know about the R.rsp package but I do not know if it
> handles
> >> | Rmd files.
> >>
> >> Tests are tickled from a runner script such as either one of
> >>
> >>       tests/doRUnit.R
> >>       tests/testthat.R
> >>
> >> so you have an entry point to control for environment variables.
> >>
> >> Travis clearly documents what theirs are -- so you could just turn it
> off
> >> --
> >> and I have opted (years ago) for a more endogeneous scheme of
> suppressing
> >> tests on CRAN based on version numbers (as I suppress tests when version
> >> numbers are "release-style" form 'a.b.c', but then run the tests when
> the
> >> version number is "dev-style" ie a.b.c.d).
> >>
> >
> > That's a great idea, however my problem is with building a vignette, not
> > running tests, unless they are linked in some way I'm not understanding.
>
> One of my packages on CRAN contains a vignette with a benchmark. You
> can check what I do here (search for "microbenchmark"):
>
> https://raw.githubusercontent.com/r-simmer/simmer/master/
> vignettes/simmer-07-ctmc.Rmd
>
> Basically, those chunks that use microbenchmark are marked as
> "eval=FALSE", and the resulting figures are static images. I run those
> manually and update the images from time to time if something relevant
> changed. Apart from saving compilation time, this way I don't need to
> include microbenchmark as a dependency.
>

Thanks. That is helpful.

I thought I had tried this method with a recent package and still ran into
problems with CRAN. The issue seemed to be that the R code is extracted
from the knitted output and run a second time where the chunk options no
longer apply. At least I thought that was what was happening. Glad to hear
this can work if so.

(Incidentally, I don't use microbenchmark for this one as I need to
generate random data per trial and don't want to include that in the
timing. A few lines of C++ does the trick.)

THK


>
> I?aki
>
> >
> > THK
> >
> >
> >>
> >> You can alternatively check for CRAN via an env.var; I forget what it is
> >> called and cannot grep for it as my scheme does not need it. WRE may
> tell
> >> you
> >> what it is.
> >>
> >> Hth,  Dirk
> >>
> >> --
> >> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From tkeitt at utexas.edu  Tue Mar 20 03:56:35 2018
From: tkeitt at utexas.edu (Tim Keitt)
Date: Mon, 19 Mar 2018 21:56:35 -0500
Subject: [R-pkg-devel] Avoid reprocessing Rmd vignette
In-Reply-To: <CAJuCY5wUHdP2Uo5KRrcQqscwPBFzLS4OGByZh1cje==bfHKNqw@mail.gmail.com>
References: <CANnL8gpn7=1pOxvApQwwrNfHSxk1LCq3=FV+hpJEY3-2PFoWfg@mail.gmail.com>
 <23215.3813.439789.70559@rob.eddelbuettel.com>
 <CANnL8go=F3OdMrrUCUF2_5ZQ_vi0i0PD6RM6bNUWtobnRQ0vJQ@mail.gmail.com>
 <CALEXWq2o4tw5trDEfLc4nmAWURLNG4FviM8yXWPcENH-YAMXuA@mail.gmail.com>
 <CAJuCY5wUHdP2Uo5KRrcQqscwPBFzLS4OGByZh1cje==bfHKNqw@mail.gmail.com>
Message-ID: <CANnL8goGa9DUo2huPPM2VzNsUFcOWFdJ2ybxCPz=1UCzSTnC6Q@mail.gmail.com>

http://www.keittlab.org/

On Mon, Mar 19, 2018 at 3:29 AM, Thierry Onkelinx <thierry.onkelinx at inbo.be>
wrote:

> You can make things even a bit easier by setting "eval=myeval" and set
> "myeval <- FALSE" at the top of the vignette. In case you want to update
> the figures, you only have to set "myeval <- TRUE" and run the vignette.
>

Thanks. Yes, that is quite useful. I was thinking of making the entire
vignette "asis" but this approach is an alternative. As in my other email,
I ran into some problems with CRAN using this but perhaps I got it wrong.

THK


>
>
> ir. Thierry Onkelinx
> Statisticus / Statistician
>
> Vlaamse Overheid / Government of Flanders
> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
> FOREST
> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
> thierry.onkelinx at inbo.be
> Havenlaan 88 bus 73, 1000 Brussel
> www.inbo.be
>
> ////////////////////////////////////////////////////////////
> ///////////////////////////////
> To call in the statistician after the experiment is done may be no more
> than asking him to perform a post-mortem examination: he may be able to say
> what the experiment died of. ~ Sir Ronald Aylmer Fisher
> The plural of anecdote is not data. ~ Roger Brinner
> The combination of some data and an aching desire for an answer does not
> ensure that a reasonable answer can be extracted from a given body of data.
> ~ John Tukey
> ////////////////////////////////////////////////////////////
> ///////////////////////////////
>
> <https://www.inbo.be>
>
> 2018-03-19 8:18 GMT+01:00 I?aki ?car <i.ucar86 at gmail.com>:
>
> > 2018-03-19 3:57 GMT+01:00 Tim Keitt <tkeitt at utexas.edu>:
> > > http://www.keittlab.org/
> > >
> > > On Sun, Mar 18, 2018 at 8:14 PM, Dirk Eddelbuettel <edd at debian.org>
> > wrote:
> > >
> > >>
> > >> Tim,
> > >>
> > >> On 18 March 2018 at 18:58, Tim Keitt wrote:
> > >> | I have an Rmd vignette that runs some benchmarks. It takes long
> enough
> > >> (20+
> > >> | minutes) that eg TravisCI will choke. I've not tried submitting to
> > CRAN.
> > >> | What is the best practice for handling this situation? Do I generate
> > >> | HTML/PDF output locally and try to make them static? The vignette
> > builder
> > >> | is knitr. I know about the R.rsp package but I do not know if it
> > handles
> > >> | Rmd files.
> > >>
> > >> Tests are tickled from a runner script such as either one of
> > >>
> > >>       tests/doRUnit.R
> > >>       tests/testthat.R
> > >>
> > >> so you have an entry point to control for environment variables.
> > >>
> > >> Travis clearly documents what theirs are -- so you could just turn it
> > off
> > >> --
> > >> and I have opted (years ago) for a more endogeneous scheme of
> > suppressing
> > >> tests on CRAN based on version numbers (as I suppress tests when
> version
> > >> numbers are "release-style" form 'a.b.c', but then run the tests when
> > the
> > >> version number is "dev-style" ie a.b.c.d).
> > >>
> > >
> > > That's a great idea, however my problem is with building a vignette,
> not
> > > running tests, unless they are linked in some way I'm not
> understanding.
> >
> > One of my packages on CRAN contains a vignette with a benchmark. You
> > can check what I do here (search for "microbenchmark"):
> >
> > https://raw.githubusercontent.com/r-simmer/simmer/master/
> > vignettes/simmer-07-ctmc.Rmd
> >
> > Basically, those chunks that use microbenchmark are marked as
> > "eval=FALSE", and the resulting figures are static images. I run those
> > manually and update the images from time to time if something relevant
> > changed. Apart from saving compilation time, this way I don't need to
> > include microbenchmark as a dependency.
> >
> > I?aki
> >
> > >
> > > THK
> > >
> > >
> > >>
> > >> You can alternatively check for CRAN via an env.var; I forget what it
> is
> > >> called and cannot grep for it as my scheme does not need it. WRE may
> > tell
> > >> you
> > >> what it is.
> > >>
> > >> Hth,  Dirk
> > >>
> > >> --
> > >> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From tkeitt at utexas.edu  Tue Mar 20 04:04:42 2018
From: tkeitt at utexas.edu (Tim Keitt)
Date: Mon, 19 Mar 2018 22:04:42 -0500
Subject: [R-pkg-devel] Avoid reprocessing Rmd vignette
In-Reply-To: <23215.41433.678856.270841@rob.eddelbuettel.com>
References: <CANnL8gpn7=1pOxvApQwwrNfHSxk1LCq3=FV+hpJEY3-2PFoWfg@mail.gmail.com>
 <23215.3813.439789.70559@rob.eddelbuettel.com>
 <CANnL8go=F3OdMrrUCUF2_5ZQ_vi0i0PD6RM6bNUWtobnRQ0vJQ@mail.gmail.com>
 <23215.41433.678856.270841@rob.eddelbuettel.com>
Message-ID: <CANnL8go1zs_WSotz9L4Mnu9ympNiSXefVFnxp-AVrtM31UVjOg@mail.gmail.com>

http://www.keittlab.org/

On Mon, Mar 19, 2018 at 6:41 AM, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 18 March 2018 at 21:57, Tim Keitt wrote:
> | That's a great idea, however my problem is with building a vignette, not
> | running tests, unless they are linked in some way I'm not understanding.
>
> Similar idea applies: condition, just as Inaki and Thierry suggested.  An
> example for a conditional vignette evaluation is
>
> ```{r echo = FALSE, message = FALSE}`r ''`
> hasData <- requireNamespace("hurricaneexposuredata", quietly = TRUE)
>           #1
> if (!hasData) {
>          #2
>     knitr::opts_chunk$set(eval = FALSE)
>          #3
>     msg <- paste("Note: Examples in this vignette require that the",
>                  "`hurricaneexposuredata` package be installed. The
> system",
>                  "currently running this vignette does not have that
> package",
>                  "installed, so code examples will not be evaluated.")
>     msg <- paste(strwrap(msg), collapse="\n")
>     message(msg)
>           #4
> }
> ```
>

That's a great solution. I've used something similar eg
https://raw.githubusercontent.com/thk686/strider/master/vignettes/strider.Rmd

I'm still confused however as I was sure that my code chunks were run
during CRAN check even when the eval option was set to false. But its
sounding like I made the wrong assumption. Not sure why it did not work
before.

THK


>
> and the paper (https://journal.r-project.org/archive/2017/RJ-2017-026/) by
> Brooke Anderson and myself discusses #1 to #4.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From i.ucar86 at gmail.com  Tue Mar 20 11:29:02 2018
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Tue, 20 Mar 2018 11:29:02 +0100
Subject: [R-pkg-devel] Avoid reprocessing Rmd vignette
In-Reply-To: <CANnL8go1zs_WSotz9L4Mnu9ympNiSXefVFnxp-AVrtM31UVjOg@mail.gmail.com>
References: <CANnL8gpn7=1pOxvApQwwrNfHSxk1LCq3=FV+hpJEY3-2PFoWfg@mail.gmail.com>
 <23215.3813.439789.70559@rob.eddelbuettel.com>
 <CANnL8go=F3OdMrrUCUF2_5ZQ_vi0i0PD6RM6bNUWtobnRQ0vJQ@mail.gmail.com>
 <23215.41433.678856.270841@rob.eddelbuettel.com>
 <CANnL8go1zs_WSotz9L4Mnu9ympNiSXefVFnxp-AVrtM31UVjOg@mail.gmail.com>
Message-ID: <CALEXWq24adjFxhLvv=8PPFgSB_jG6t=um0J5aaGW_9osAmkr1w@mail.gmail.com>

2018-03-20 4:04 GMT+01:00 Tim Keitt <tkeitt at utexas.edu>:
> http://www.keittlab.org/
>
> On Mon, Mar 19, 2018 at 6:41 AM, Dirk Eddelbuettel <edd at debian.org> wrote:
>
>>
>> On 18 March 2018 at 21:57, Tim Keitt wrote:
>> | That's a great idea, however my problem is with building a vignette, not
>> | running tests, unless they are linked in some way I'm not understanding.
>>
>> Similar idea applies: condition, just as Inaki and Thierry suggested.  An
>> example for a conditional vignette evaluation is
>>
>> ```{r echo = FALSE, message = FALSE}`r ''`
>> hasData <- requireNamespace("hurricaneexposuredata", quietly = TRUE)
>>           #1
>> if (!hasData) {
>>          #2
>>     knitr::opts_chunk$set(eval = FALSE)
>>          #3
>>     msg <- paste("Note: Examples in this vignette require that the",
>>                  "`hurricaneexposuredata` package be installed. The
>> system",
>>                  "currently running this vignette does not have that
>> package",
>>                  "installed, so code examples will not be evaluated.")
>>     msg <- paste(strwrap(msg), collapse="\n")
>>     message(msg)
>>           #4
>> }
>> ```
>>
>
> That's a great solution. I've used something similar eg
> https://raw.githubusercontent.com/thk686/strider/master/vignettes/strider.Rmd

I see "if (require(pkg))" in that vignette, but not "eval=FALSE".

> I'm still confused however as I was sure that my code chunks were run
> during CRAN check even when the eval option was set to false. But its
> sounding like I made the wrong assumption. Not sure why it did not work
> before.

If "eval=FALSE" is set, code chunks are not run. If you just use "if
(require(pkg))", code chunks *are* run on CRAN, because all packages
are available on CRAN. And, as indicated in "Writing R Extensions",

"Packages used to run examples or tests conditionally (e.g. via
if(require(pkgname))) should be listed in ?Suggests? or ?Enhances?."

That could be the source of the issue maybe?

The idea exposed by Dirk is the same: requireNamespace will find the
package on CRAN and will set eval=TRUE. What you want though is to
avoid running a chunk on CRAN, even if the package is available. So
you need to set eval=FALSE *unconditionally*.

I?aki

>
> THK
>
>
>>
>> and the paper (https://journal.r-project.org/archive/2017/RJ-2017-026/) by
>> Brooke Anderson and myself discusses #1 to #4.
>>
>> Dirk
>>
>> --
>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From jranke at uni-bremen.de  Tue Mar 20 12:17:26 2018
From: jranke at uni-bremen.de (Johannes Ranke)
Date: Tue, 20 Mar 2018 12:17:26 +0100
Subject: [R-pkg-devel] Avoid reprocessing Rmd vignette
In-Reply-To: <CALEXWq24adjFxhLvv=8PPFgSB_jG6t=um0J5aaGW_9osAmkr1w@mail.gmail.com>
References: <CANnL8gpn7=1pOxvApQwwrNfHSxk1LCq3=FV+hpJEY3-2PFoWfg@mail.gmail.com>
 <CANnL8go1zs_WSotz9L4Mnu9ympNiSXefVFnxp-AVrtM31UVjOg@mail.gmail.com>
 <CALEXWq24adjFxhLvv=8PPFgSB_jG6t=um0J5aaGW_9osAmkr1w@mail.gmail.com>
Message-ID: <4048810.FGPncWosSA@ryz>

...

> The idea exposed by Dirk is the same: requireNamespace will find the
> package on CRAN and will set eval=TRUE. What you want though is to
> avoid running a chunk on CRAN, even if the package is available. So
> you need to set eval=FALSE *unconditionally*.

Or conditional on the package version (as Dirk proposed regarding tests) or on 
an environment variable NOT_CRAN which you can set to true on the machine 
where you do want to run the code (as used by devtools).

Johannes


From spencer.graves at effectivedefense.org  Tue Mar 20 15:27:04 2018
From: spencer.graves at effectivedefense.org (Spencer Graves)
Date: Tue, 20 Mar 2018 09:27:04 -0500
Subject: [R-pkg-devel] Avoid reprocessing Rmd vignette
In-Reply-To: <4048810.FGPncWosSA@ryz>
References: <CANnL8gpn7=1pOxvApQwwrNfHSxk1LCq3=FV+hpJEY3-2PFoWfg@mail.gmail.com>
 <CANnL8go1zs_WSotz9L4Mnu9ympNiSXefVFnxp-AVrtM31UVjOg@mail.gmail.com>
 <CALEXWq24adjFxhLvv=8PPFgSB_jG6t=um0J5aaGW_9osAmkr1w@mail.gmail.com>
 <4048810.FGPncWosSA@ryz>
Message-ID: <e25fe6d9-0aca-7657-b7d3-021620e823e3@effectivedefense.org>


On 2018-03-20 06:17, Johannes Ranke wrote:
> ...
>
>> The idea exposed by Dirk is the same: requireNamespace will find the
>> package on CRAN and will set eval=TRUE. What you want though is to
>> avoid running a chunk on CRAN, even if the package is available. So
>> you need to set eval=FALSE *unconditionally*.
> Or conditional on the package version (as Dirk proposed regarding tests) or on
> an environment variable NOT_CRAN which you can set to true on the machine
> where you do want to run the code (as used by devtools).


 ????? The function "fda::CRAN" allows package developers to run tests 
themselves that should not run on CRAN or with "R CMD check ?as-cran".? 
Several of my packages have code in "\examples" that include something 
like the following:


if(!fda::CRAN()){
 ??? #Code I do not want run if a certain parameter is in Sys.getenv()
}


 ????? I have not tried this, but I think you could set a parameter, 
e.g., '-no-vignette' via either Sys.setenv('-no-vignette'=1) or "R CMD 
check -no-vignette", then bracket code snippets in the vignette with 
"if(!fda::CRAN('-no-vignette', '-no-vignette')){...}".


 ????? This will NOT turn off compiling the vignette, but it will allow 
you to suppress running code snippets in the vignette that take time.


 ????? Hope this helps.
 ??? ? Spencer


p.s.? I just tested "Sys.setenv('-no-vignette'=1);? tst2 <- 
CRAN('-no-vignette', '-no-vignette')" and got TRUE, when CRAN() returned 
FALSE.? When I tried print(tst2) I got:


 ?[1] TRUE
attr(,"Sys.getenv")
Error in formatDL(x, ...) : unused argument (digits = 7)


 ????? I do not understand this error message, but it does not seem to 
be a problem I have to fix right now, so I won't.

> Johannes
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jenny.f.bryan at gmail.com  Tue Mar 20 05:12:15 2018
From: jenny.f.bryan at gmail.com (Jennifer Bryan)
Date: Mon, 19 Mar 2018 21:12:15 -0700
Subject: [R-pkg-devel] Avoid reprocessing Rmd vignette
In-Reply-To: <CANnL8go1zs_WSotz9L4Mnu9ympNiSXefVFnxp-AVrtM31UVjOg@mail.gmail.com>
References: <CANnL8gpn7=1pOxvApQwwrNfHSxk1LCq3=FV+hpJEY3-2PFoWfg@mail.gmail.com>
 <23215.3813.439789.70559@rob.eddelbuettel.com>
 <CANnL8go=F3OdMrrUCUF2_5ZQ_vi0i0PD6RM6bNUWtobnRQ0vJQ@mail.gmail.com>
 <23215.41433.678856.270841@rob.eddelbuettel.com>
 <CANnL8go1zs_WSotz9L4Mnu9ympNiSXefVFnxp-AVrtM31UVjOg@mail.gmail.com>
Message-ID: <CANe9BHGm=CDiqNJyfcGzJzrDg0s6E5RgAR8k+7K6V1UpYNwzvg@mail.gmail.com>

Hi Tim,

Here's a rather long thread from previous discussions of this:

https://stat.ethz.ch/pipermail/r-devel/2014-May/069113.html

These two lines from R CMD check suggest the two ways the vignette code
will be run:

 * checking running R code from vignettes ... OK
 * checking re-building of vignette outputs ... OK

Chunk option `purl` controls whether a chunk is extracted and rerun
during ?running R code from vignettes?.
Chunk option `eval` controls whether a chunk is run during the
?re-building of vignette outputs?.

Perhaps your benchmarking code is still being extracted and run during
the purl (a.k.a. "tangle") phase.

-- Jenny


On Mon, Mar 19, 2018 at 8:04 PM, Tim Keitt <tkeitt at utexas.edu> wrote:

> http://www.keittlab.org/
>
> On Mon, Mar 19, 2018 at 6:41 AM, Dirk Eddelbuettel <edd at debian.org> wrote:
>
> >
> > On 18 March 2018 at 21:57, Tim Keitt wrote:
> > | That's a great idea, however my problem is with building a vignette,
> not
> > | running tests, unless they are linked in some way I'm not
> understanding.
> >
> > Similar idea applies: condition, just as Inaki and Thierry suggested.  An
> > example for a conditional vignette evaluation is
> >
> > ```{r echo = FALSE, message = FALSE}`r ''`
> > hasData <- requireNamespace("hurricaneexposuredata", quietly = TRUE)
> >           #1
> > if (!hasData) {
> >          #2
> >     knitr::opts_chunk$set(eval = FALSE)
> >          #3
> >     msg <- paste("Note: Examples in this vignette require that the",
> >                  "`hurricaneexposuredata` package be installed. The
> > system",
> >                  "currently running this vignette does not have that
> > package",
> >                  "installed, so code examples will not be evaluated.")
> >     msg <- paste(strwrap(msg), collapse="\n")
> >     message(msg)
> >           #4
> > }
> > ```
> >
>
> That's a great solution. I've used something similar eg
> https://raw.githubusercontent.com/thk686/strider/master/
> vignettes/strider.Rmd
>
> I'm still confused however as I was sure that my code chunks were run
> during CRAN check even when the eval option was set to false. But its
> sounding like I made the wrong assumption. Not sure why it did not work
> before.
>
> THK
>
>
> >
> > and the paper (https://journal.r-project.org/archive/2017/RJ-2017-026/)
> by
> > Brooke Anderson and myself discusses #1 to #4.
> >
> > Dirk
> >
> > --
> > http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From i.ucar86 at gmail.com  Tue Mar 20 18:18:50 2018
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Tue, 20 Mar 2018 18:18:50 +0100
Subject: [R-pkg-devel] Avoid reprocessing Rmd vignette
In-Reply-To: <CANe9BHGm=CDiqNJyfcGzJzrDg0s6E5RgAR8k+7K6V1UpYNwzvg@mail.gmail.com>
References: <CANnL8gpn7=1pOxvApQwwrNfHSxk1LCq3=FV+hpJEY3-2PFoWfg@mail.gmail.com>
 <23215.3813.439789.70559@rob.eddelbuettel.com>
 <CANnL8go=F3OdMrrUCUF2_5ZQ_vi0i0PD6RM6bNUWtobnRQ0vJQ@mail.gmail.com>
 <23215.41433.678856.270841@rob.eddelbuettel.com>
 <CANnL8go1zs_WSotz9L4Mnu9ympNiSXefVFnxp-AVrtM31UVjOg@mail.gmail.com>
 <CANe9BHGm=CDiqNJyfcGzJzrDg0s6E5RgAR8k+7K6V1UpYNwzvg@mail.gmail.com>
Message-ID: <CALEXWq21Y3OP6x4363RDUy303HdaMufaLZeVDP7e06eZ_Je8Qg@mail.gmail.com>

2018-03-20 5:12 GMT+01:00 Jennifer Bryan <jenny.f.bryan at gmail.com>:
> Hi Tim,
>
> Here's a rather long thread from previous discussions of this:
>
> https://stat.ethz.ch/pipermail/r-devel/2014-May/069113.html
>
> These two lines from R CMD check suggest the two ways the vignette code
> will be run:
>
>  * checking running R code from vignettes ... OK
>  * checking re-building of vignette outputs ... OK
>
> Chunk option `purl` controls whether a chunk is extracted and rerun
> during ?running R code from vignettes?.
> Chunk option `eval` controls whether a chunk is run during the
> ?re-building of vignette outputs?.
>
> Perhaps your benchmarking code is still being extracted and run during
> the purl (a.k.a. "tangle") phase.

The code extracted during the purl phase is commented out for those
chunks with eval=FALSE, so they won't be run in any phase.

I?aki

>
> -- Jenny
>
>
> On Mon, Mar 19, 2018 at 8:04 PM, Tim Keitt <tkeitt at utexas.edu> wrote:
>
>> http://www.keittlab.org/
>>
>> On Mon, Mar 19, 2018 at 6:41 AM, Dirk Eddelbuettel <edd at debian.org> wrote:
>>
>> >
>> > On 18 March 2018 at 21:57, Tim Keitt wrote:
>> > | That's a great idea, however my problem is with building a vignette,
>> not
>> > | running tests, unless they are linked in some way I'm not
>> understanding.
>> >
>> > Similar idea applies: condition, just as Inaki and Thierry suggested.  An
>> > example for a conditional vignette evaluation is
>> >
>> > ```{r echo = FALSE, message = FALSE}`r ''`
>> > hasData <- requireNamespace("hurricaneexposuredata", quietly = TRUE)
>> >           #1
>> > if (!hasData) {
>> >          #2
>> >     knitr::opts_chunk$set(eval = FALSE)
>> >          #3
>> >     msg <- paste("Note: Examples in this vignette require that the",
>> >                  "`hurricaneexposuredata` package be installed. The
>> > system",
>> >                  "currently running this vignette does not have that
>> > package",
>> >                  "installed, so code examples will not be evaluated.")
>> >     msg <- paste(strwrap(msg), collapse="\n")
>> >     message(msg)
>> >           #4
>> > }
>> > ```
>> >
>>
>> That's a great solution. I've used something similar eg
>> https://raw.githubusercontent.com/thk686/strider/master/
>> vignettes/strider.Rmd
>>
>> I'm still confused however as I was sure that my code chunks were run
>> during CRAN check even when the eval option was set to false. But its
>> sounding like I made the wrong assumption. Not sure why it did not work
>> before.
>>
>> THK
>>
>>
>> >
>> > and the paper (https://journal.r-project.org/archive/2017/RJ-2017-026/)
>> by
>> > Brooke Anderson and myself discusses #1 to #4.
>> >
>> > Dirk
>> >
>> > --
>> > http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From lists at revelle.net  Wed Mar 21 19:36:18 2018
From: lists at revelle.net (William Revelle)
Date: Wed, 21 Mar 2018 13:36:18 -0500
Subject: [R-pkg-devel] Warning: rBind is deprecated-- but I don't call it
Message-ID: <83D4DC35-EE2D-48D6-A6F9-44FF234FAA00@revelle.net>

Dear friends,

When testing my latest version of psych on win.builder, I keep getting the following Warning:

* checking installed files from 'inst/doc' ... OK
* checking files in 'vignettes' ... OK
* checking examples ...
** running examples for arch 'i386' ... [32s] WARNING
Found the following significant warnings:

  Warning: 'rBind' is deprecated.
Deprecated functions may be defunct as soon as of the next release of
R.
See ?Deprecated.
** running examples for arch 'x64' ... [39s] WARNING
Found the following significant warnings:

  Warning: 'rBind' is deprecated.
Deprecated functions may be defunct as soon as of the next release of
R.
See ?Deprecated.
* checking for unstated dependencies in vignettes ... OK

I know that rBind is deprecated, but I don?t call it.


I have searched my code and as far as I can tell, I do not use rBind (nor cBind).   Nor do any of my examples.

Any help would be appreciated.

Thanks.

Bill


William Revelle		   personality-project.org/revelle.html
Professor			          personality-project.org
Department of Psychology www.wcas.northwestern.edu/psych/
Northwestern University	   www.northwestern.edu/
Use R for psychology         personality-project.org/r
It is 2   minutes to midnight   www.thebulletin.org


From alexandre.courtiol at gmail.com  Wed Mar 21 19:48:03 2018
From: alexandre.courtiol at gmail.com (Alexandre Courtiol)
Date: Wed, 21 Mar 2018 19:48:03 +0100
Subject: [R-pkg-devel] 
 Warning: rBind is deprecated-- but I don't call it
In-Reply-To: <83D4DC35-EE2D-48D6-A6F9-44FF234FAA00@revelle.net>
References: <83D4DC35-EE2D-48D6-A6F9-44FF234FAA00@revelle.net>
Message-ID: <CAERMt4dntjpby7ffNg=890VZCTsRF71KtY_D2Nm4K7Fkw0Ra=A@mail.gmail.com>

Hi William,
Perhaps you use rBind indirectly...
I don't know the best way to check that, but I would try to set a
debug(rBind) before running some of your code in an interactive session.
If any function uses rBind, you should notice as it will launch the
debugger.
Better ideas are welcome.
++

Alex

On 21 March 2018 at 19:36, William Revelle <lists at revelle.net> wrote:

> Dear friends,
>
> When testing my latest version of psych on win.builder, I keep getting the
> following Warning:
>
> * checking installed files from 'inst/doc' ... OK
> * checking files in 'vignettes' ... OK
> * checking examples ...
> ** running examples for arch 'i386' ... [32s] WARNING
> Found the following significant warnings:
>
>   Warning: 'rBind' is deprecated.
> Deprecated functions may be defunct as soon as of the next release of
> R.
> See ?Deprecated.
> ** running examples for arch 'x64' ... [39s] WARNING
> Found the following significant warnings:
>
>   Warning: 'rBind' is deprecated.
> Deprecated functions may be defunct as soon as of the next release of
> R.
> See ?Deprecated.
> * checking for unstated dependencies in vignettes ... OK
>
> I know that rBind is deprecated, but I don?t call it.
>
>
> I have searched my code and as far as I can tell, I do not use rBind (nor
> cBind).   Nor do any of my examples.
>
> Any help would be appreciated.
>
> Thanks.
>
> Bill
>
>
> William Revelle            personality-project.org/revelle.html
> Professor                                 personality-project.org
> Department of Psychology www.wcas.northwestern.edu/psych/
> Northwestern University    www.northwestern.edu/
> Use R for psychology         personality-project.org/r
> It is 2   minutes to midnight   www.thebulletin.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Alexandre Courtiol

http://sites.google.com/site/alexandrecourtiol/home

*"Science is the belief in the ignorance of experts"*, R. Feynman

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Wed Mar 21 21:10:10 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 21 Mar 2018 16:10:10 -0400
Subject: [R-pkg-devel] 
 Warning: rBind is deprecated-- but I don't call it
In-Reply-To: <CAERMt4dntjpby7ffNg=890VZCTsRF71KtY_D2Nm4K7Fkw0Ra=A@mail.gmail.com>
References: <83D4DC35-EE2D-48D6-A6F9-44FF234FAA00@revelle.net>
 <CAERMt4dntjpby7ffNg=890VZCTsRF71KtY_D2Nm4K7Fkw0Ra=A@mail.gmail.com>
Message-ID: <b729ab97-c4f6-fbe4-0f03-a21a4990129f@gmail.com>

On 21/03/2018 2:48 PM, Alexandre Courtiol wrote:
> Hi William,
> Perhaps you use rBind indirectly...
> I don't know the best way to check that, but I would try to set a
> debug(rBind) before running some of your code in an interactive session.
> If any function uses rBind, you should notice as it will launch the
> debugger.
> Better ideas are welcome.

That's a good idea; setting options(warn=2) (so the warning becomes an 
error) might also be good. To narrow the search, look at the log file 
from the check.  Specifically, if checking package "foo", look at 
foo-Ex.Rout for the output from running all the examples (and which 
should contain the warning at an informative spot), or foo-Ex.R if you 
want all the code that was run to get that output.

Duncan Murdoch

> ++
> 
> Alex
> 
> On 21 March 2018 at 19:36, William Revelle <lists at revelle.net> wrote:
> 
>> Dear friends,
>>
>> When testing my latest version of psych on win.builder, I keep getting the
>> following Warning:
>>
>> * checking installed files from 'inst/doc' ... OK
>> * checking files in 'vignettes' ... OK
>> * checking examples ...
>> ** running examples for arch 'i386' ... [32s] WARNING
>> Found the following significant warnings:
>>
>>    Warning: 'rBind' is deprecated.
>> Deprecated functions may be defunct as soon as of the next release of
>> R.
>> See ?Deprecated.
>> ** running examples for arch 'x64' ... [39s] WARNING
>> Found the following significant warnings:
>>
>>    Warning: 'rBind' is deprecated.
>> Deprecated functions may be defunct as soon as of the next release of
>> R.
>> See ?Deprecated.
>> * checking for unstated dependencies in vignettes ... OK
>>
>> I know that rBind is deprecated, but I don?t call it.
>>
>>
>> I have searched my code and as far as I can tell, I do not use rBind (nor
>> cBind).   Nor do any of my examples.
>>
>> Any help would be appreciated.
>>
>> Thanks.
>>
>> Bill
>>
>>
>> William Revelle            personality-project.org/revelle.html
>> Professor                                 personality-project.org
>> Department of Psychology www.wcas.northwestern.edu/psych/
>> Northwestern University    www.northwestern.edu/
>> Use R for psychology         personality-project.org/r
>> It is 2   minutes to midnight   www.thebulletin.org
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 
>


From lists at revelle.net  Wed Mar 21 21:12:35 2018
From: lists at revelle.net (William Revelle)
Date: Wed, 21 Mar 2018 15:12:35 -0500
Subject: [R-pkg-devel] 
 Warning: rBind is deprecated-- but I don't call it
In-Reply-To: <CAO1zAVZY9Lnn6CH2QnG2Myjx=cBv2ywZZ7CMgWZae4C3zykxvw@mail.gmail.com>
References: <83D4DC35-EE2D-48D6-A6F9-44FF234FAA00@revelle.net>
 <CAERMt4dntjpby7ffNg=890VZCTsRF71KtY_D2Nm4K7Fkw0Ra=A@mail.gmail.com>
 <CAO1zAVZY9Lnn6CH2QnG2Myjx=cBv2ywZZ7CMgWZae4C3zykxvw@mail.gmail.com>
Message-ID: <9F8993B9-3905-4DEE-91B2-1EF8D408AFF0@revelle.net>

Thanks. I had suspected another package, but couldn?t figure out how to show that.

debug(Matrix::rBind)  shows that the problem is in lme4 
#with
 debug(Matrix::rBind)

x.df <- structure(list(values = c(9, 6, 8, 7, 10, 6, 2, 1, 4, 1, 5, 2, 
5, 3, 6, 2, 6, 4, 8, 2, 8, 6, 9, 7), items = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 
3L, 4L, 4L, 4L, 4L, 4L, 4L), class = "factor", .Label = c("J1", 
"J2", "J3", "J4")), id = structure(c(1L, 2L, 3L, 4L, 5L, 6L, 
1L, 2L, 3L, 4L, 5L, 6L, 1L, 2L, 3L, 4L, 5L, 6L, 1L, 2L, 3L, 4L, 
5L, 6L), .Label = c("S1", "S2", "S3", "S4", "S5", "S6"), class = "factor")), row.names = c(NA, 
-24L), class = "data.frame")

mod.lmer <- lme4::lmer(values ~ 1 + (1 | id) + +(1 | items), 
    data = x.df, na.action = na.omit)

#it calls rBind and then throws the warning which win.builder then calls and error.

Now, I will work on how to get around this (not use lmer?)  but at least now I know the problem.

Bill




> On Mar 21, 2018, at 2:04 PM, Joris Meys <jorismeys at gmail.com> wrote:
> 
> I suspect it is used in a function from another package then. The devtools function run_examples() allows you to run the examples separately so you can find the culprit easier. Function check_failures() extracts info from the check logs. Could be helpful too.
> 
> Cheers
> Joris 
> 
> On Wed, 21 Mar 2018, 19:49 Alexandre Courtiol, <alexandre.courtiol at gmail.com> wrote:
> Hi William,
> Perhaps you use rBind indirectly...
> I don't know the best way to check that, but I would try to set a
> debug(rBind) before running some of your code in an interactive session.
> If any function uses rBind, you should notice as it will launch the
> debugger.
> Better ideas are welcome.
> ++
> 
> Alex
> 
> On 21 March 2018 at 19:36, William Revelle <lists at revelle.net> wrote:
> 
> > Dear friends,
> >
> > When testing my latest version of psych on win.builder, I keep getting the
> > following Warning:
> >
> > * checking installed files from 'inst/doc' ... OK
> > * checking files in 'vignettes' ... OK
> > * checking examples ...
> > ** running examples for arch 'i386' ... [32s] WARNING
> > Found the following significant warnings:
> >
> >   Warning: 'rBind' is deprecated.
> > Deprecated functions may be defunct as soon as of the next release of
> > R.
> > See ?Deprecated.
> > ** running examples for arch 'x64' ... [39s] WARNING
> > Found the following significant warnings:
> >
> >   Warning: 'rBind' is deprecated.
> > Deprecated functions may be defunct as soon as of the next release of
> > R.
> > See ?Deprecated.
> > * checking for unstated dependencies in vignettes ... OK
> >
> > I know that rBind is deprecated, but I don?t call it.
> >
> >
> > I have searched my code and as far as I can tell, I do not use rBind (nor
> > cBind).   Nor do any of my examples.
> >
> > Any help would be appreciated.
> >
> > Thanks.
> >
> > Bill
> >
> >
> > William Revelle            personality-project.org/revelle.html
> > Professor                                 personality-project.org
> > Department of Psychology www.wcas.northwestern.edu/psych/
> > Northwestern University    www.northwestern.edu/
> > Use R for psychology         personality-project.org/r
> > It is 2   minutes to midnight   www.thebulletin.org
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> 
> 
> 
> --
> Alexandre Courtiol
> 
> http://sites.google.com/site/alexandrecourtiol/home
> 
> *"Science is the belief in the ignorance of experts"*, R. Feynman
> 
>         [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

William Revelle		   personality-project.org/revelle.html
Professor			          personality-project.org
Department of Psychology www.wcas.northwestern.edu/psych/
Northwestern University	   www.northwestern.edu/
Use R for psychology         personality-project.org/r
It is 2 1/2  minutes to midnight   www.thebulletin.org


From thierry.onkelinx at inbo.be  Wed Mar 21 21:21:25 2018
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Wed, 21 Mar 2018 21:21:25 +0100
Subject: [R-pkg-devel] 
 Warning: rBind is deprecated-- but I don't call it
In-Reply-To: <9F8993B9-3905-4DEE-91B2-1EF8D408AFF0@revelle.net>
References: <83D4DC35-EE2D-48D6-A6F9-44FF234FAA00@revelle.net>
 <CAERMt4dntjpby7ffNg=890VZCTsRF71KtY_D2Nm4K7Fkw0Ra=A@mail.gmail.com>
 <CAO1zAVZY9Lnn6CH2QnG2Myjx=cBv2ywZZ7CMgWZae4C3zykxvw@mail.gmail.com>
 <9F8993B9-3905-4DEE-91B2-1EF8D408AFF0@revelle.net>
Message-ID: <CAJuCY5za0LskCNC-UDV5NHznoLHi1_q2P49Ae+rGdJS1eqZHnA@mail.gmail.com>

Dear Bill,

The best way to fix your problem is IMHO to have it fixed in lme4. I've
cc'ed Ben Bolker (lme4 maintainer) to inform him of this problem.

Best regards,


ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>

2018-03-21 21:12 GMT+01:00 William Revelle <lists at revelle.net>:

> Thanks. I had suspected another package, but couldn?t figure out how to
> show that.
>
> debug(Matrix::rBind)  shows that the problem is in lme4
> #with
>  debug(Matrix::rBind)
>
> x.df <- structure(list(values = c(9, 6, 8, 7, 10, 6, 2, 1, 4, 1, 5, 2,
> 5, 3, 6, 2, 6, 4, 8, 2, 8, 6, 9, 7), items = structure(c(1L,
> 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L,
> 3L, 4L, 4L, 4L, 4L, 4L, 4L), class = "factor", .Label = c("J1",
> "J2", "J3", "J4")), id = structure(c(1L, 2L, 3L, 4L, 5L, 6L,
> 1L, 2L, 3L, 4L, 5L, 6L, 1L, 2L, 3L, 4L, 5L, 6L, 1L, 2L, 3L, 4L,
> 5L, 6L), .Label = c("S1", "S2", "S3", "S4", "S5", "S6"), class =
> "factor")), row.names = c(NA,
> -24L), class = "data.frame")
>
> mod.lmer <- lme4::lmer(values ~ 1 + (1 | id) + +(1 | items),
>     data = x.df, na.action = na.omit)
>
> #it calls rBind and then throws the warning which win.builder then calls
> and error.
>
> Now, I will work on how to get around this (not use lmer?)  but at least
> now I know the problem.
>
> Bill
>
>
>
>
> > On Mar 21, 2018, at 2:04 PM, Joris Meys <jorismeys at gmail.com> wrote:
> >
> > I suspect it is used in a function from another package then. The
> devtools function run_examples() allows you to run the examples separately
> so you can find the culprit easier. Function check_failures() extracts info
> from the check logs. Could be helpful too.
> >
> > Cheers
> > Joris
> >
> > On Wed, 21 Mar 2018, 19:49 Alexandre Courtiol, <
> alexandre.courtiol at gmail.com> wrote:
> > Hi William,
> > Perhaps you use rBind indirectly...
> > I don't know the best way to check that, but I would try to set a
> > debug(rBind) before running some of your code in an interactive session.
> > If any function uses rBind, you should notice as it will launch the
> > debugger.
> > Better ideas are welcome.
> > ++
> >
> > Alex
> >
> > On 21 March 2018 at 19:36, William Revelle <lists at revelle.net> wrote:
> >
> > > Dear friends,
> > >
> > > When testing my latest version of psych on win.builder, I keep getting
> the
> > > following Warning:
> > >
> > > * checking installed files from 'inst/doc' ... OK
> > > * checking files in 'vignettes' ... OK
> > > * checking examples ...
> > > ** running examples for arch 'i386' ... [32s] WARNING
> > > Found the following significant warnings:
> > >
> > >   Warning: 'rBind' is deprecated.
> > > Deprecated functions may be defunct as soon as of the next release of
> > > R.
> > > See ?Deprecated.
> > > ** running examples for arch 'x64' ... [39s] WARNING
> > > Found the following significant warnings:
> > >
> > >   Warning: 'rBind' is deprecated.
> > > Deprecated functions may be defunct as soon as of the next release of
> > > R.
> > > See ?Deprecated.
> > > * checking for unstated dependencies in vignettes ... OK
> > >
> > > I know that rBind is deprecated, but I don?t call it.
> > >
> > >
> > > I have searched my code and as far as I can tell, I do not use rBind
> (nor
> > > cBind).   Nor do any of my examples.
> > >
> > > Any help would be appreciated.
> > >
> > > Thanks.
> > >
> > > Bill
> > >
> > >
> > > William Revelle            personality-project.org/revelle.html
> > > Professor                                 personality-project.org
> > > Department of Psychology www.wcas.northwestern.edu/psych/
> > > Northwestern University    www.northwestern.edu/
> > > Use R for psychology         personality-project.org/r
> > > It is 2   minutes to midnight   www.thebulletin.org
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> >
> >
> >
> > --
> > Alexandre Courtiol
> >
> > http://sites.google.com/site/alexandrecourtiol/home
> >
> > *"Science is the belief in the ignorance of experts"*, R. Feynman
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> William Revelle            personality-project.org/revelle.html
> Professor                                 personality-project.org
> Department of Psychology www.wcas.northwestern.edu/psych/
> Northwestern University    www.northwestern.edu/
> Use R for psychology         personality-project.org/r
> It is 2 1/2  minutes to midnight   www.thebulletin.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From lists at revelle.net  Wed Mar 21 21:24:07 2018
From: lists at revelle.net (William Revelle)
Date: Wed, 21 Mar 2018 15:24:07 -0500
Subject: [R-pkg-devel] 
 Warning: rBind is deprecated-- but I don't call it
In-Reply-To: <CAJuCY5za0LskCNC-UDV5NHznoLHi1_q2P49Ae+rGdJS1eqZHnA@mail.gmail.com>
References: <83D4DC35-EE2D-48D6-A6F9-44FF234FAA00@revelle.net>
 <CAERMt4dntjpby7ffNg=890VZCTsRF71KtY_D2Nm4K7Fkw0Ra=A@mail.gmail.com>
 <CAO1zAVZY9Lnn6CH2QnG2Myjx=cBv2ywZZ7CMgWZae4C3zykxvw@mail.gmail.com>
 <9F8993B9-3905-4DEE-91B2-1EF8D408AFF0@revelle.net>
 <CAJuCY5za0LskCNC-UDV5NHznoLHi1_q2P49Ae+rGdJS1eqZHnA@mail.gmail.com>
Message-ID: <485E4908-A0C9-4C99-8AFC-B99339B04188@revelle.net>

Thierry,
Agreed.  I just filed a bug report on the gitHub site.

Bill



> On Mar 21, 2018, at 3:21 PM, Thierry Onkelinx <thierry.onkelinx at inbo.be> wrote:
> 
> Dear Bill,
> 
> The best way to fix your problem is IMHO to have it fixed in lme4. I've cc'ed Ben Bolker (lme4 maintainer) to inform him of this problem.
> 
> Best regards,
> 
> 
> ir. Thierry Onkelinx
> Statisticus / Statistician
> 
> Vlaamse Overheid / Government of Flanders
> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND FOREST
> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance 
> thierry.onkelinx at inbo.be
> Havenlaan 88 bus 73, 1000 Brussel
> www.inbo.be
> 
> ///////////////////////////////////////////////////////////////////////////////////////////
> To call in the statistician after the experiment is done may be no more than asking him to perform a post-mortem examination: he may be able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
> The plural of anecdote is not data. ~ Roger Brinner
> The combination of some data and an aching desire for an answer does not ensure that a reasonable answer can be extracted from a given body of data. ~ John Tukey
> ///////////////////////////////////////////////////////////////////////////////////////////
> 
> 
> 
> 2018-03-21 21:12 GMT+01:00 William Revelle <lists at revelle.net>:
> Thanks. I had suspected another package, but couldn?t figure out how to show that.
> 
> debug(Matrix::rBind)  shows that the problem is in lme4
> #with
>  debug(Matrix::rBind)
> 
> x.df <- structure(list(values = c(9, 6, 8, 7, 10, 6, 2, 1, 4, 1, 5, 2,
> 5, 3, 6, 2, 6, 4, 8, 2, 8, 6, 9, 7), items = structure(c(1L,
> 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L,
> 3L, 4L, 4L, 4L, 4L, 4L, 4L), class = "factor", .Label = c("J1",
> "J2", "J3", "J4")), id = structure(c(1L, 2L, 3L, 4L, 5L, 6L,
> 1L, 2L, 3L, 4L, 5L, 6L, 1L, 2L, 3L, 4L, 5L, 6L, 1L, 2L, 3L, 4L,
> 5L, 6L), .Label = c("S1", "S2", "S3", "S4", "S5", "S6"), class = "factor")), row.names = c(NA,
> -24L), class = "data.frame")
> 
> mod.lmer <- lme4::lmer(values ~ 1 + (1 | id) + +(1 | items),
>     data = x.df, na.action = na.omit)
> 
> #it calls rBind and then throws the warning which win.builder then calls and error.
> 
> Now, I will work on how to get around this (not use lmer?)  but at least now I know the problem.
> 
> Bill
> 
> 
> 
> 
> > On Mar 21, 2018, at 2:04 PM, Joris Meys <jorismeys at gmail.com> wrote:
> >
> > I suspect it is used in a function from another package then. The devtools function run_examples() allows you to run the examples separately so you can find the culprit easier. Function check_failures() extracts info from the check logs. Could be helpful too.
> >
> > Cheers
> > Joris
> >
> > On Wed, 21 Mar 2018, 19:49 Alexandre Courtiol, <alexandre.courtiol at gmail.com> wrote:
> > Hi William,
> > Perhaps you use rBind indirectly...
> > I don't know the best way to check that, but I would try to set a
> > debug(rBind) before running some of your code in an interactive session.
> > If any function uses rBind, you should notice as it will launch the
> > debugger.
> > Better ideas are welcome.
> > ++
> >
> > Alex
> >
> > On 21 March 2018 at 19:36, William Revelle <lists at revelle.net> wrote:
> >
> > > Dear friends,
> > >
> > > When testing my latest version of psych on win.builder, I keep getting the
> > > following Warning:
> > >
> > > * checking installed files from 'inst/doc' ... OK
> > > * checking files in 'vignettes' ... OK
> > > * checking examples ...
> > > ** running examples for arch 'i386' ... [32s] WARNING
> > > Found the following significant warnings:
> > >
> > >   Warning: 'rBind' is deprecated.
> > > Deprecated functions may be defunct as soon as of the next release of
> > > R.
> > > See ?Deprecated.
> > > ** running examples for arch 'x64' ... [39s] WARNING
> > > Found the following significant warnings:
> > >
> > >   Warning: 'rBind' is deprecated.
> > > Deprecated functions may be defunct as soon as of the next release of
> > > R.
> > > See ?Deprecated.
> > > * checking for unstated dependencies in vignettes ... OK
> > >
> > > I know that rBind is deprecated, but I don?t call it.
> > >
> > >
> > > I have searched my code and as far as I can tell, I do not use rBind (nor
> > > cBind).   Nor do any of my examples.
> > >
> > > Any help would be appreciated.
> > >
> > > Thanks.
> > >
> > > Bill
> > >
> > >
> > > William Revelle            personality-project.org/revelle.html
> > > Professor                                 personality-project.org
> > > Department of Psychology www.wcas.northwestern.edu/psych/
> > > Northwestern University    www.northwestern.edu/
> > > Use R for psychology         personality-project.org/r
> > > It is 2   minutes to midnight   www.thebulletin.org
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> >
> >
> >
> > --
> > Alexandre Courtiol
> >
> > http://sites.google.com/site/alexandrecourtiol/home
> >
> > *"Science is the belief in the ignorance of experts"*, R. Feynman
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> William Revelle            personality-project.org/revelle.html
> Professor                                 personality-project.org
> Department of Psychology www.wcas.northwestern.edu/psych/
> Northwestern University    www.northwestern.edu/
> Use R for psychology         personality-project.org/r
> It is 2 1/2  minutes to midnight   www.thebulletin.org
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

William Revelle		   personality-project.org/revelle.html
Professor			          personality-project.org
Department of Psychology www.wcas.northwestern.edu/psych/
Northwestern University	   www.northwestern.edu/
Use R for psychology         personality-project.org/r
It is 2 1/2  minutes to midnight   www.thebulletin.org


From wdunlap at tibco.com  Wed Mar 21 21:39:49 2018
From: wdunlap at tibco.com (William Dunlap)
Date: Wed, 21 Mar 2018 13:39:49 -0700
Subject: [R-pkg-devel] reg.finalizer and .onUnload
Message-ID: <CAF8bMca_p8FS1_Vp3op41=rurP8P3pRHcVu8CZ9e8BRCc9ZTBg@mail.gmail.com>

I have a package that lets a user log into another system
and I want it to be sure to log the user out, at least by the
time the R session is over.

My Login(username,password) function stashes a token
(the username in my simplfied code) in an environment
and my Logout() function needs to use that stored token
to logout.  Logout() sets the stored token to NULL when it is
done and the stored token is NULL when the package is loaded.

I first tried calling the logout function from a finalizer registered
in .onLoad.  This basicly worked:
  > testFinalize::Login("Bill")
  [Loading testFinalize from /homes/bill/packages/tmp/lib]
  *** Logging in user Bill ***
  > q("no")
  [invoking registered finalizer]
  *** Logging out user Bill ***

However, it failed when the user manually unloaded the
package's namespace.  In that case, running
the registered finalizer, either because the session ended or
because of a garbage collection, caused the namespace to be
reloaded, so the stored token is NULL, making it look like
no logout is required:
  > testFinalize::Login("Bill")
  [Loading testFinalize from /homes/bill/packages/tmp/lib]
  *** Logging in user Bill ***
  > unloadNamespace("testFinalize")
  [Unloading /homes/bill/packages/tmp/lib/testFinalize]
  --- Not calling Logout at unload time ---
  > gc() # or q()
  [invoking registered finalizer]
  [Loading testFinalize from /homes/bill/packages/tmp/lib]
  *** No need to log out ***
           used (Mb) gc trigger (Mb) max used (Mb)
  Ncells 255820 13.7     460000 24.6   350000 18.7
  Vcells 535039  4.1    1023718  7.9   786426  6.0

If I only call Logout() from .onUnload, and not from the registered
finalizer, nothing happens when the R session is done, since packages are
not unloaded then.

It looks like I need to call Logout from both .onUnload and from
the registered finalizer to make sure it gets called.  Is that
right or is there a standard way to make sure some package-specific
cleanup gets done?

Since the finalizer will still cause the package's namespace to be
loaded we waste some time after q().  Is there a way to unregister
a finalizer so we can avoid the reloading?

I've appended the R code in the package below.  The package exports
Login, Logout, and LogoutAtUnload.  The last lets you force .unLoad to
call Logout() or not.

Reply privately if you want the tar.gz file for the test package.

Bill Dunlap
TIBCO Software
wdunlap tibco.com

.loginInfo <- list2env(
    list(token = NULL,
         logoutAtUnload = FALSE)
)
Login <- function(username, password) {
    if (is.null(.loginInfo$token)) {
        message("*** Logging in user ", username, " ***")
        .loginInfo$token <- username
    } else {
        message("*** Cannot log in user ", username, ", ",
.loginInfo$token, " is already logged in ***")
    }
}
Logout <- function() {
    if (!is.null(.loginInfo$token)) {
        message("*** Logging out user ", .loginInfo$token, " ***")
        .loginInfo$token <- NULL
    } else {
        message("*** No need to log out ***")
    }
}
LogoutAtUnload <- function(flag = NA) {
    stopifnot(is.logical(flag), length(flag)==1)
    old <- isTRUE(.loginInfo$LogoutAtUnload)
    if (!is.na(flag)) {
        .loginInfo$LogoutAtUnload <- flag
    }
    old
}
.onLoad <- function(libname, pkgname) {
    message("[Loading ", pkgname, " from ", libname, "]")
    reg.finalizer(getNamespace(pkgname), function(envir) {
message("[invoking registered finalizer]"); Logout()}, onexit=TRUE)
}
.onUnload <- function(libpath) {
    message("[Unloading ", libpath, "]")
    if (LogoutAtUnload()) {
        Logout()
    } else {
        message("--- Not calling Logout at unload time ---")
    }
}

	[[alternative HTML version deleted]]


From maechler at stat.math.ethz.ch  Thu Mar 22 16:43:50 2018
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Thu, 22 Mar 2018 16:43:50 +0100
Subject: [R-pkg-devel] Warning: rBind is deprecated
In-Reply-To: <485E4908-A0C9-4C99-8AFC-B99339B04188@revelle.net>
References: <83D4DC35-EE2D-48D6-A6F9-44FF234FAA00@revelle.net>
 <CAERMt4dntjpby7ffNg=890VZCTsRF71KtY_D2Nm4K7Fkw0Ra=A@mail.gmail.com>
 <CAO1zAVZY9Lnn6CH2QnG2Myjx=cBv2ywZZ7CMgWZae4C3zykxvw@mail.gmail.com>
 <9F8993B9-3905-4DEE-91B2-1EF8D408AFF0@revelle.net>
 <CAJuCY5za0LskCNC-UDV5NHznoLHi1_q2P49Ae+rGdJS1eqZHnA@mail.gmail.com>
 <485E4908-A0C9-4C99-8AFC-B99339B04188@revelle.net>
Message-ID: <23219.53046.123634.779153@stat.math.ethz.ch>

>From a small thread over at the 'R-package-devel' mailing list,

this now goes to the R-devel mailing list
(CC'ing the original R-package-devel very exceptionally). 

Note that I, as maintainer("Matrix") had introduced rBind() and
cBind() to be used for Matrix package matrices as substitute for
rbind() and cbind() because back then it was not reasonably
possible to provide S4 methods for these.

But for almost three years now, they have been deprecated,
unfortunately *not* with a warning [which was a lapsus of mine].
The help page for these has started, for a long time now, as

| cBind                  package:Matrix                  R Documentation
| 
| Versions of 'cbind' and 'rbind' recursively built on cbind2/rbind2
| 
| Description:
| 
|      The base functions ?cbind? and ?rbind? are defined for an
|      arbitrary number of arguments and hence have the first formal
|      argument ?...?.  For that reason, in the past S4 methods could
|      easily be defined for binding together matrices inheriting from
|      ?Matrix?.
| 
|      For that reason, ?cbind2? and ?rbind2? have been provided for
|      binding together _two_ matrices, and we have defined methods for
|      these and the ?'Matrix'?-matrices.
| 
|      Before R version 3.2.0 (April 2015), we have needed a substitute
|      for _S4-enabled_ versions of ?cbind? and ?rbind?, and provided
|      ?cBind? and ?rBind? with identical syntax and semantic in order to
|      bind together multiple matrices (?"matrix"? or ?"Matrix"? and
|      vectors.  With R version 3.2.0 and newer, ?cBind? and ?rBind? are
|      _deprecated_ and produce a deprecation warning (via
|      ?.Deprecated?), and your code should start using ?cbind()? and
|      ?rbind()? instead.

and finally, the next version of Matrix, which will be the
(recommended, hence bundled) Matrix package for R version 3.5.0
will produce warnings -- only once per session -- whenever
cBind() or rBind() are still used. 

This currently is true e.g., for lme4 and also for another
several dozens of CRAN packages, and unknown but probably
non-zero number of bioconductor packages.

There are even two CRAN packages which in their tests turn every
warning into an error and these packages will even fail their 'R
CMD check' in about a month when R 3.5.0 will appear.

Please package authors, do update the source of your packages:

a) replace  cBind() by cbind()  and rBind() by rbind()
b) Ensure that your package depends on at least R 3.2.0,
   i.e. possibly add a
      'Depends: R (>= 3.2.0)'
   to your DESCRIPTION file.

Of course feel free to comment / ask
privately or here {R-devel only} if necessary.

With best regards,

Martin Maechler
ETH Zurich


From tylermw at gmail.com  Fri Mar 23 17:59:23 2018
From: tylermw at gmail.com (Tyler)
Date: Fri, 23 Mar 2018 12:59:23 -0400
Subject: [R-pkg-devel] win-builder 3.3.3 libcurl error + NOTE
Message-ID: <CAJhwqzQSeSpZyGTjjjCOfxttrQ92c7dJcy--V3_UOt3Rv7B3sQ@mail.gmail.com>

I am getting a NOTE only on R-oldrelease when checking my package on
win-builder:

* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Tyler Morgan-Wall <tylermw at gmail.com>'

Found the following (possibly) invalid URLs:
  URL: http://github.com/tylermorganwall/skpr
    From: DESCRIPTION
    Status: Error
    Message: libcurl error code 35
    	error:1407742E:SSL routines:SSL23_GET_SERVER_HELLO:tlsv1 alert
protocol version
  URL: http://github.com/tylermorganwall/skpr/issues
    From: DESCRIPTION
    Status: Error
    Message: libcurl error code 35
    	error:1407742E:SSL routines:SSL23_GET_SERVER_HELLO:tlsv1 alert
protocol version

I checked the version of the package currently on the CRAN that passed
without any libcurl errors or NOTEs back in January, and it too displayed
this NOTE, which again only occurred on R-oldrelease. Is there a way to
prevent this or should I just mention this NOTE in my CRAN submission
comment?

Tyler

	[[alternative HTML version deleted]]


From pdalgd at gmail.com  Sat Mar 24 10:10:51 2018
From: pdalgd at gmail.com (peter dalgaard)
Date: Sat, 24 Mar 2018 10:10:51 +0100
Subject: [R-pkg-devel] win-builder 3.3.3 libcurl error + NOTE
In-Reply-To: <CAJhwqzQSeSpZyGTjjjCOfxttrQ92c7dJcy--V3_UOt3Rv7B3sQ@mail.gmail.com>
References: <CAJhwqzQSeSpZyGTjjjCOfxttrQ92c7dJcy--V3_UOt3Rv7B3sQ@mail.gmail.com>
Message-ID: <61DA6E0C-D8EC-4573-B333-769D323B52DB@gmail.com>

Given that R-oldrelease will become 3.4.4 when we branch for 3.5.0 on Monday, perhaps you could just wait it out?

-pd

> On 23 Mar 2018, at 17:59 , Tyler <tylermw at gmail.com> wrote:
> 
> I am getting a NOTE only on R-oldrelease when checking my package on
> win-builder:
> 
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: 'Tyler Morgan-Wall <tylermw at gmail.com>'
> 
> Found the following (possibly) invalid URLs:
>  URL: http://github.com/tylermorganwall/skpr
>    From: DESCRIPTION
>    Status: Error
>    Message: libcurl error code 35
>    	error:1407742E:SSL routines:SSL23_GET_SERVER_HELLO:tlsv1 alert
> protocol version
>  URL: http://github.com/tylermorganwall/skpr/issues
>    From: DESCRIPTION
>    Status: Error
>    Message: libcurl error code 35
>    	error:1407742E:SSL routines:SSL23_GET_SERVER_HELLO:tlsv1 alert
> protocol version
> 
> I checked the version of the package currently on the CRAN that passed
> without any libcurl errors or NOTEs back in January, and it too displayed
> this NOTE, which again only occurred on R-oldrelease. Is there a way to
> prevent this or should I just mention this NOTE in my CRAN submission
> comment?
> 
> Tyler
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From pdalgd at gmail.com  Sat Mar 24 10:21:34 2018
From: pdalgd at gmail.com (peter dalgaard)
Date: Sat, 24 Mar 2018 10:21:34 +0100
Subject: [R-pkg-devel] win-builder 3.3.3 libcurl error + NOTE
In-Reply-To: <61DA6E0C-D8EC-4573-B333-769D323B52DB@gmail.com>
References: <CAJhwqzQSeSpZyGTjjjCOfxttrQ92c7dJcy--V3_UOt3Rv7B3sQ@mail.gmail.com>
 <61DA6E0C-D8EC-4573-B333-769D323B52DB@gmail.com>
Message-ID: <211CDB02-2F50-482E-BD1C-D2D23DC01E09@gmail.com>

Sorry, I forgot: We don't switch until _release_ of 3.5.0, four weeks further down the line. Still, it doesn't seem worth it making much of a fuss about 3.3.3.

-pd

> On 24 Mar 2018, at 10:10 , peter dalgaard <pdalgd at gmail.com> wrote:
> 
> Given that R-oldrelease will become 3.4.4 when we branch for 3.5.0 on Monday, perhaps you could just wait it out?
> 
> -pd
> 
>> On 23 Mar 2018, at 17:59 , Tyler <tylermw at gmail.com> wrote:
>> 
>> I am getting a NOTE only on R-oldrelease when checking my package on
>> win-builder:
>> 
>> * checking CRAN incoming feasibility ... NOTE
>> Maintainer: 'Tyler Morgan-Wall <tylermw at gmail.com>'
>> 
>> Found the following (possibly) invalid URLs:
>> URL: http://github.com/tylermorganwall/skpr
>>   From: DESCRIPTION
>>   Status: Error
>>   Message: libcurl error code 35
>>   	error:1407742E:SSL routines:SSL23_GET_SERVER_HELLO:tlsv1 alert
>> protocol version
>> URL: http://github.com/tylermorganwall/skpr/issues
>>   From: DESCRIPTION
>>   Status: Error
>>   Message: libcurl error code 35
>>   	error:1407742E:SSL routines:SSL23_GET_SERVER_HELLO:tlsv1 alert
>> protocol version
>> 
>> I checked the version of the package currently on the CRAN that passed
>> without any libcurl errors or NOTEs back in January, and it too displayed
>> this NOTE, which again only occurred on R-oldrelease. Is there a way to
>> prevent this or should I just mention this NOTE in my CRAN submission
>> comment?
>> 
>> Tyler
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> 
> 
> 
> 
> 
> 
> 
> 

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From tylermw at gmail.com  Sat Mar 24 19:21:51 2018
From: tylermw at gmail.com (Tyler)
Date: Sat, 24 Mar 2018 14:21:51 -0400
Subject: [R-pkg-devel] win-builder 3.3.3 libcurl error + NOTE
In-Reply-To: <211CDB02-2F50-482E-BD1C-D2D23DC01E09@gmail.com>
References: <CAJhwqzQSeSpZyGTjjjCOfxttrQ92c7dJcy--V3_UOt3Rv7B3sQ@mail.gmail.com>
 <61DA6E0C-D8EC-4573-B333-769D323B52DB@gmail.com>
 <211CDB02-2F50-482E-BD1C-D2D23DC01E09@gmail.com>
Message-ID: <CAJhwqzRGOg6vSb7Fe1s-4rwvJKEFcuTx3VM01fHSPY9dyvP1nA@mail.gmail.com>

This is more likely an issue with the win-builder server than an issue with
3.3.3, as I uploaded a prior version of my package that previously (in
January) had a clean check and it returned the same NOTE. I believe this
error stems from GitHub discontinuing support on Feb 22nd for the
cryptographically weak TLS 1.0 & 1.1 protocols and only supporting
connections with the TLS 1.2 protocol.

https://githubengineering.com/crypto-removal-notice/

This could probably be fixed with upgrading/updating the SSL software on
the win-builder server (to whatever version the 3.4.4 and 3.5.0 servers
have).

On Sat, Mar 24, 2018 at 5:21 AM, peter dalgaard <pdalgd at gmail.com> wrote:

> Sorry, I forgot: We don't switch until _release_ of 3.5.0, four weeks
> further down the line. Still, it doesn't seem worth it making much of a
> fuss about 3.3.3.
>
> -pd
>
> > On 24 Mar 2018, at 10:10 , peter dalgaard <pdalgd at gmail.com> wrote:
> >
> > Given that R-oldrelease will become 3.4.4 when we branch for 3.5.0 on
> Monday, perhaps you could just wait it out?
> >
> > -pd
> >
> >> On 23 Mar 2018, at 17:59 , Tyler <tylermw at gmail.com> wrote:
> >>
> >> I am getting a NOTE only on R-oldrelease when checking my package on
> >> win-builder:
> >>
> >> * checking CRAN incoming feasibility ... NOTE
> >> Maintainer: 'Tyler Morgan-Wall <tylermw at gmail.com>'
> >>
> >> Found the following (possibly) invalid URLs:
> >> URL: http://github.com/tylermorganwall/skpr
> >>   From: DESCRIPTION
> >>   Status: Error
> >>   Message: libcurl error code 35
> >>      error:1407742E:SSL routines:SSL23_GET_SERVER_HELLO:tlsv1 alert
> >> protocol version
> >> URL: http://github.com/tylermorganwall/skpr/issues
> >>   From: DESCRIPTION
> >>   Status: Error
> >>   Message: libcurl error code 35
> >>      error:1407742E:SSL routines:SSL23_GET_SERVER_HELLO:tlsv1 alert
> >> protocol version
> >>
> >> I checked the version of the package currently on the CRAN that passed
> >> without any libcurl errors or NOTEs back in January, and it too
> displayed
> >> this NOTE, which again only occurred on R-oldrelease. Is there a way to
> >> prevent this or should I just mention this NOTE in my CRAN submission
> >> comment?
> >>
> >> Tyler
> >>
> >>      [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > --
> > Peter Dalgaard, Professor,
> > Center for Statistics, Copenhagen Business School
> > Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> > Phone: (+45)38153501
> > Office: A 4.23
> > Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> >
> >
> >
> >
> >
> >
> >
> >
> >
>
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>
>
>
>
>
>
>
>
>
>

	[[alternative HTML version deleted]]


From wenchao2012 at gmail.com  Sat Mar 24 14:28:46 2018
From: wenchao2012 at gmail.com (Wenchao Ma)
Date: Sat, 24 Mar 2018 08:28:46 -0500
Subject: [R-pkg-devel] Warnings and error message in CRAN Package Check
 Results
Message-ID: <edeca5a8-5ca7-dd1f-72a4-a37e2b57fdae@gmail.com>

Dear all,

I just submitted a package to CRAN. It went well on my computer and 
winbuilder, but produced warning and error messages on some linux and 
solaris systems, as shown here: 
https://cran.r-project.org/web/checks/check_results_GDINA.html

Does anyone know what is going on here?

Thanks a lot,
Wenchao


From murdoch.duncan at gmail.com  Sun Mar 25 00:18:21 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 24 Mar 2018 19:18:21 -0400
Subject: [R-pkg-devel] Warnings and error message in CRAN Package Check
 Results
In-Reply-To: <edeca5a8-5ca7-dd1f-72a4-a37e2b57fdae@gmail.com>
References: <edeca5a8-5ca7-dd1f-72a4-a37e2b57fdae@gmail.com>
Message-ID: <af02bce4-2422-e45b-5967-8e4099a06b6f@gmail.com>

On 24/03/2018 9:28 AM, Wenchao Ma wrote:
> Dear all,
> 
> I just submitted a package to CRAN. It went well on my computer and
> winbuilder, but produced warning and error messages on some linux and
> solaris systems, as shown here:
> https://cran.r-project.org/web/checks/check_results_GDINA.html
> 
> Does anyone know what is going on here?

The compilers on those systems are set up to be more sensitive to coding 
problems than yours.

The Solaris error comes from your code

  arma::umat B = arma::ones<arma::umat>(K,pow(2,K)-K-1);

The library you're using has no function definition for pow() that takes 
2 integers.  If a float or double result is okay, you could use pow(2.0, 
K).  If you really need an int in that argument, you'll need to typecast 
or write your own pow() function.

The Fedora warning seems self explanatory:

Mstep.cpp:62:69: warning: explicitly assigning value of variable of type 
'int' to itself [-Wself-assign]

Take a look at that line (and the other similar ones) and see why the 
compiler thinks you've got something like

i = i;

in your code.

Duncan Murdoch


From wenchao2012 at gmail.com  Sun Mar 25 00:42:27 2018
From: wenchao2012 at gmail.com (Wenchao Ma)
Date: Sat, 24 Mar 2018 18:42:27 -0500
Subject: [R-pkg-devel] Warnings and error message in CRAN Package Check
 Results
In-Reply-To: <af02bce4-2422-e45b-5967-8e4099a06b6f@gmail.com>
References: <edeca5a8-5ca7-dd1f-72a4-a37e2b57fdae@gmail.com>
 <af02bce4-2422-e45b-5967-8e4099a06b6f@gmail.com>
Message-ID: <cf3ca3d3-166f-6ff2-b35f-a10cabcdc99d@gmail.com>

Dear Duncan,

Thank you. I really appreciate your help!

Yes, the Fedora warning is self explanatory, but I'm still quite 
confused. Below are part of my Mstep.cpp file (both functions are in the 
same file). The fedora warned me that, among others,
Mstep.cpp:62:69: warning: explicitly assigning value of variable of type 
'int' to itself [-Wself-assign]
     arma::vec Pj = Calc_Pj(par = par, designMj = designMj, linkfunc = 
linkfunc, boundary = boundary, eps = eps);
                                                            ~~~~~~~~ ^ 
~~~~~~~~

So, basically, I called Calc_Pj function from Calc_Pj_jac function, but 
not sure why this is not allowed.

----------------------------

// [[Rcpp::depends(RcppArmadillo)]]
#include <RcppArmadillo.h>
using namespace Rcpp;
using namespace arma;
// [[Rcpp::export]]
arma::vec Calc_Pj(const arma::vec  par, const arma::mat  designMj,
const int & linkfunc,int boundary = 0,const double  eps = 1e-16){
   arma::vec Pj;
   if(linkfunc==1){ //identity
     Pj = designMj*par;
   }else if(linkfunc==2){//logit
     Pj = exp(designMj*par)/(1 + exp(designMj*par));
   }else if(linkfunc==3){//log
     Pj = exp(designMj*par);
   }
   if(boundary==1){
     Pj.elem(find(Pj<eps)).fill(eps);
     Pj.elem(find(Pj>1-eps)).fill(1-eps);
   }
   return Pj;
}

// [[Rcpp::export]]
arma::mat Calc_Pj_jac(arma::vec  par,
                   arma::mat designMj,
                   int & linkfunc,
                   int boundary = 0,
                   double eps = 1e-16){
   arma::mat ret = designMj;
   if(linkfunc>1){
     arma::vec Pj = Calc_Pj(par = par, designMj = designMj, linkfunc = 
linkfunc, boundary = boundary, eps = eps);
     if(linkfunc==2){//logit
       ret.each_col() %= Pj%(1-Pj);
     }else if(linkfunc==3){//log
       ret.each_col() %= Pj;
     }
   }
   return ret;
}

On 3/24/2018 6:18 PM, Duncan Murdoch wrote:
> On 24/03/2018 9:28 AM, Wenchao Ma wrote:
>> Dear all,
>>
>> I just submitted a package to CRAN. It went well on my computer and
>> winbuilder, but produced warning and error messages on some linux and
>> solaris systems, as shown here:
>> https://cran.r-project.org/web/checks/check_results_GDINA.html
>>
>> Does anyone know what is going on here?
> 
> The compilers on those systems are set up to be more sensitive to coding 
> problems than yours.
> 
> The Solaris error comes from your code
> 
>  ?arma::umat B = arma::ones<arma::umat>(K,pow(2,K)-K-1);
> 
> The library you're using has no function definition for pow() that takes 
> 2 integers.? If a float or double result is okay, you could use pow(2.0, 
> K).? If you really need an int in that argument, you'll need to typecast 
> or write your own pow() function.
> 
> The Fedora warning seems self explanatory:
> 
> Mstep.cpp:62:69: warning: explicitly assigning value of variable of type 
> 'int' to itself [-Wself-assign]
> 
> Take a look at that line (and the other similar ones) and see why the 
> compiler thinks you've got something like
> 
> i = i;
> 
> in your code.
> 
> Duncan Murdoch


From josh.m.ulrich at gmail.com  Sun Mar 25 01:01:00 2018
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sat, 24 Mar 2018 19:01:00 -0500
Subject: [R-pkg-devel] Warnings and error message in CRAN Package Check
 Results
In-Reply-To: <cf3ca3d3-166f-6ff2-b35f-a10cabcdc99d@gmail.com>
References: <edeca5a8-5ca7-dd1f-72a4-a37e2b57fdae@gmail.com>
 <af02bce4-2422-e45b-5967-8e4099a06b6f@gmail.com>
 <cf3ca3d3-166f-6ff2-b35f-a10cabcdc99d@gmail.com>
Message-ID: <CAPPM_gQw8cmAcZ7cG4tr+KOdBOPk6TGwKkBb2_ZjAQf3wuDHrA@mail.gmail.com>

On Sat, Mar 24, 2018 at 6:42 PM, Wenchao Ma <wenchao2012 at gmail.com> wrote:
> Dear Duncan,
>
> Thank you. I really appreciate your help!
>
> Yes, the Fedora warning is self explanatory, but I'm still quite confused.
> Below are part of my Mstep.cpp file (both functions are in the same file).
> The fedora warned me that, among others,
> Mstep.cpp:62:69: warning: explicitly assigning value of variable of type
> 'int' to itself [-Wself-assign]
>     arma::vec Pj = Calc_Pj(par = par, designMj = designMj, linkfunc =
> linkfunc, boundary = boundary, eps = eps);
>                                                            ~~~~~~~~ ^
> ~~~~~~~~
>
> So, basically, I called Calc_Pj function from Calc_Pj_jac function, but not
> sure why this is not allowed.
>
The compiler isn't complaining about the function call. It's warning
about all the assignments you make in the function call.

Like Duncan said, the compiler thinks you have something like "i = i"
in your code.  Which you do, for every argument to the function.

You seem to confuse calling functions in R with calling functions in
C++.  C++ function arguments do not have names. They are matched by
position.  Note that none of the other function calls in the file use
"named arguments".

> ----------------------------
>
> // [[Rcpp::depends(RcppArmadillo)]]
> #include <RcppArmadillo.h>
> using namespace Rcpp;
> using namespace arma;
> // [[Rcpp::export]]
> arma::vec Calc_Pj(const arma::vec  par, const arma::mat  designMj,
> const int & linkfunc,int boundary = 0,const double  eps = 1e-16){
>   arma::vec Pj;
>   if(linkfunc==1){ //identity
>     Pj = designMj*par;
>   }else if(linkfunc==2){//logit
>     Pj = exp(designMj*par)/(1 + exp(designMj*par));
>   }else if(linkfunc==3){//log
>     Pj = exp(designMj*par);
>   }
>   if(boundary==1){
>     Pj.elem(find(Pj<eps)).fill(eps);
>     Pj.elem(find(Pj>1-eps)).fill(1-eps);
>   }
>   return Pj;
> }
>
> // [[Rcpp::export]]
> arma::mat Calc_Pj_jac(arma::vec  par,
>                   arma::mat designMj,
>                   int & linkfunc,
>                   int boundary = 0,
>                   double eps = 1e-16){
>   arma::mat ret = designMj;
>   if(linkfunc>1){
>     arma::vec Pj = Calc_Pj(par = par, designMj = designMj, linkfunc =
> linkfunc, boundary = boundary, eps = eps);
>     if(linkfunc==2){//logit
>       ret.each_col() %= Pj%(1-Pj);
>     }else if(linkfunc==3){//log
>       ret.each_col() %= Pj;
>     }
>   }
>   return ret;
>
> }
>
> On 3/24/2018 6:18 PM, Duncan Murdoch wrote:
>>
>> On 24/03/2018 9:28 AM, Wenchao Ma wrote:
>>>
>>> Dear all,
>>>
>>> I just submitted a package to CRAN. It went well on my computer and
>>> winbuilder, but produced warning and error messages on some linux and
>>> solaris systems, as shown here:
>>> https://cran.r-project.org/web/checks/check_results_GDINA.html
>>>
>>> Does anyone know what is going on here?
>>
>>
>> The compilers on those systems are set up to be more sensitive to coding
>> problems than yours.
>>
>> The Solaris error comes from your code
>>
>>   arma::umat B = arma::ones<arma::umat>(K,pow(2,K)-K-1);
>>
>> The library you're using has no function definition for pow() that takes 2
>> integers.  If a float or double result is okay, you could use pow(2.0, K).
>> If you really need an int in that argument, you'll need to typecast or write
>> your own pow() function.
>>
>> The Fedora warning seems self explanatory:
>>
>> Mstep.cpp:62:69: warning: explicitly assigning value of variable of type
>> 'int' to itself [-Wself-assign]
>>
>> Take a look at that line (and the other similar ones) and see why the
>> compiler thinks you've got something like
>>
>> i = i;
>>
>> in your code.
>>
>> Duncan Murdoch
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com
R/Finance 2018 | www.rinfinance.com


From pdalgd at gmail.com  Sun Mar 25 01:31:20 2018
From: pdalgd at gmail.com (peter dalgaard)
Date: Sun, 25 Mar 2018 01:31:20 +0100
Subject: [R-pkg-devel] Warnings and error message in CRAN Package Check
 Results
In-Reply-To: <cf3ca3d3-166f-6ff2-b35f-a10cabcdc99d@gmail.com>
References: <edeca5a8-5ca7-dd1f-72a4-a37e2b57fdae@gmail.com>
 <af02bce4-2422-e45b-5967-8e4099a06b6f@gmail.com>
 <cf3ca3d3-166f-6ff2-b35f-a10cabcdc99d@gmail.com>
Message-ID: <351DFF40-2F64-4D38-BF12-46DEA3E8B273@gmail.com>



> On 25 Mar 2018, at 00:42 , Wenchao Ma <wenchao2012 at gmail.com> wrote:
> 
>    arma::vec Pj = Calc_Pj(par = par, designMj = designMj, linkfunc = linkfunc, boundary = boundary, eps = eps);

I was never any good at C++, but that syntax looks like R code. Does C++ allow tag=value argument specification? Aren't all the subexpressions of type "par = par" just assignments??

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From wenchao2012 at gmail.com  Sun Mar 25 01:37:36 2018
From: wenchao2012 at gmail.com (Wenchao Ma)
Date: Sat, 24 Mar 2018 19:37:36 -0500
Subject: [R-pkg-devel] Warnings and error message in CRAN Package Check
 Results
In-Reply-To: <351DFF40-2F64-4D38-BF12-46DEA3E8B273@gmail.com>
References: <edeca5a8-5ca7-dd1f-72a4-a37e2b57fdae@gmail.com>
 <af02bce4-2422-e45b-5967-8e4099a06b6f@gmail.com>
 <cf3ca3d3-166f-6ff2-b35f-a10cabcdc99d@gmail.com>
 <351DFF40-2F64-4D38-BF12-46DEA3E8B273@gmail.com>
Message-ID: <ed827c45-c429-85ea-7c52-c94186bb8387@gmail.com>

Hi Joshua and Peter,

Thank you so much for your help. Yes, it's definitely my mistake in 
mixing R and c++ function calls...

I think I can fix the problems now.

Thank you once again,
Wenchao

On 3/24/2018 7:31 PM, peter dalgaard wrote:
> 
> 
>> On 25 Mar 2018, at 00:42 , Wenchao Ma <wenchao2012 at gmail.com> wrote:
>>
>>     arma::vec Pj = Calc_Pj(par = par, designMj = designMj, linkfunc = linkfunc, boundary = boundary, eps = eps);
> 
> I was never any good at C++, but that syntax looks like R code. Does C++ allow tag=value argument specification? Aren't all the subexpressions of type "par = par" just assignments??
>


From ogan.mancarci at gmail.com  Mon Mar 26 23:48:06 2018
From: ogan.mancarci at gmail.com (Ogan Mancarci)
Date: Mon, 26 Mar 2018 14:48:06 -0700
Subject: [R-pkg-devel] CRAN write to home policy
Message-ID: <CADPf3_2=F8cyHDefm9krykQFktTJ3zxTvJ8ce36dtC2s4URV1A@mail.gmail.com>

This is from  CRAN repository policy:

"Packages should not write in the user?s home filespace (including
clipboards), nor anywhere else on the file system apart from the R
session?s temporary directory (or during installation in the location
pointed to by TMPDIR: and such usage should be cleaned up). (?) Limited
exceptions may be allowed in interactive sessions if the package obtains
confirmation from the user."

I am unclear about the scope of this rule. For instance if I had this
function:

antiSocialWriteLines = function(text, file = 'defaultFile', ...){
    writeLines(text , file, ...)
}

would I be allowed to add it to a package since it writes to a file by
default without asking for confirmation?

Frankly reading this text, I feel like even writeLines itself violates it
as it writes without "confirmation" once you give it a file path.

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Tue Mar 27 00:29:17 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 27 Mar 2018 00:29:17 +0200
Subject: [R-pkg-devel] CRAN write to home policy
In-Reply-To: <CADPf3_2=F8cyHDefm9krykQFktTJ3zxTvJ8ce36dtC2s4URV1A@mail.gmail.com>
References: <CADPf3_2=F8cyHDefm9krykQFktTJ3zxTvJ8ce36dtC2s4URV1A@mail.gmail.com>
Message-ID: <839c7d9e-7f10-126a-bde5-4f390851bd3e@statistik.tu-dortmund.de>



On 26.03.2018 23:48, Ogan Mancarci wrote:
> This is from  CRAN repository policy:
> 
> "Packages should not write in the user?s home filespace (including
> clipboards), nor anywhere else on the file system apart from the R
> session?s temporary directory (or during installation in the location
> pointed to by TMPDIR: and such usage should be cleaned up). (?) Limited
> exceptions may be allowed in interactive sessions if the package obtains
> confirmation from the user."
> 
> I am unclear about the scope of this rule. For instance if I had this
> function:
> 
> antiSocialWriteLines = function(text, file = 'defaultFile', ...){
>      writeLines(text , file, ...)
> }
> 


Simply use file=tempfile() as the default so you do not overwrite stuff 
in the user filespace and the user can insert another filename which is 
the confirmation.

Best,
Uwe Ligges



> would I be allowed to add it to a package since it writes to a file by
> default without asking for confirmation?
> 
> Frankly reading this text, I feel like even writeLines itself violates it
> as it writes without "confirmation" once you give it a file path.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ogan.mancarci at gmail.com  Tue Mar 27 01:06:42 2018
From: ogan.mancarci at gmail.com (Ogan Mancarci)
Date: Mon, 26 Mar 2018 16:06:42 -0700
Subject: [R-pkg-devel] CRAN write to home policy
In-Reply-To: <839c7d9e-7f10-126a-bde5-4f390851bd3e@statistik.tu-dortmund.de>
References: <CADPf3_2=F8cyHDefm9krykQFktTJ3zxTvJ8ce36dtC2s4URV1A@mail.gmail.com>
 <839c7d9e-7f10-126a-bde5-4f390851bd3e@statistik.tu-dortmund.de>
Message-ID: <CADPf3_0Q-DbujcOXYGjapOdX7_DB40Yr8Fuj2W6VqiEmq1oiSg@mail.gmail.com>

Thanks for the clarification.

What about a scenario where the user has enter a filename which is used as
a seed for the output file. For instance

antiSocialSkip6Lines = function(filename, output = paste0(filename,
'_skipped')){
    lines = readLines(filename)
    lines = lines[-(1:6)]
}

Here, there is an input from the user which determines what the output is
and it is clearly spelled out in the argument list. Yet the user input is
not the name of the resulting file unless the user wants it to be.

Cheers,
Ogan

On 26 March 2018 at 15:29, Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

>
>
> On 26.03.2018 23:48, Ogan Mancarci wrote:
>
>> This is from  CRAN repository policy:
>>
>> "Packages should not write in the user?s home filespace (including
>> clipboards), nor anywhere else on the file system apart from the R
>> session?s temporary directory (or during installation in the location
>> pointed to by TMPDIR: and such usage should be cleaned up). (?) Limited
>> exceptions may be allowed in interactive sessions if the package obtains
>> confirmation from the user."
>>
>> I am unclear about the scope of this rule. For instance if I had this
>> function:
>>
>> antiSocialWriteLines = function(text, file = 'defaultFile', ...){
>>      writeLines(text , file, ...)
>> }
>>
>>
>
> Simply use file=tempfile() as the default so you do not overwrite stuff in
> the user filespace and the user can insert another filename which is the
> confirmation.
>
> Best,
> Uwe Ligges
>
>
>
> would I be allowed to add it to a package since it writes to a file by
>> default without asking for confirmation?
>>
>> Frankly reading this text, I feel like even writeLines itself violates it
>> as it writes without "confirmation" once you give it a file path.
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>

	[[alternative HTML version deleted]]


From ogan.mancarci at gmail.com  Tue Mar 27 01:07:34 2018
From: ogan.mancarci at gmail.com (Ogan Mancarci)
Date: Mon, 26 Mar 2018 16:07:34 -0700
Subject: [R-pkg-devel] CRAN write to home policy
In-Reply-To: <CADPf3_0Q-DbujcOXYGjapOdX7_DB40Yr8Fuj2W6VqiEmq1oiSg@mail.gmail.com>
References: <CADPf3_2=F8cyHDefm9krykQFktTJ3zxTvJ8ce36dtC2s4URV1A@mail.gmail.com>
 <839c7d9e-7f10-126a-bde5-4f390851bd3e@statistik.tu-dortmund.de>
 <CADPf3_0Q-DbujcOXYGjapOdX7_DB40Yr8Fuj2W6VqiEmq1oiSg@mail.gmail.com>
Message-ID: <CADPf3_3bNSE_58xrDDN2b29pYJDJQk7CXbFzNQUZ-d5NDiM+7g@mail.gmail.com>

Corrected antiSocialSkip6Lines

antiSocialSkip6Lines = function(filename, output = paste0(filename,
'_skipped')){
    lines = readLines(filename)
    lines = lines[-(1:6)]
    writeLines(lines, output)
}

On 26 March 2018 at 16:06, Ogan Mancarci <ogan.mancarci at gmail.com> wrote:

> Thanks for the clarification.
>
> What about a scenario where the user has enter a filename which is used as
> a seed for the output file. For instance
>
> antiSocialSkip6Lines = function(filename, output = paste0(filename,
> '_skipped')){
>     lines = readLines(filename)
>     lines = lines[-(1:6)]
> }
>
> Here, there is an input from the user which determines what the output is
> and it is clearly spelled out in the argument list. Yet the user input is
> not the name of the resulting file unless the user wants it to be.
>
> Cheers,
> Ogan
>
> On 26 March 2018 at 15:29, Uwe Ligges <ligges at statistik.tu-dortmund.de>
> wrote:
>
>>
>>
>> On 26.03.2018 23:48, Ogan Mancarci wrote:
>>
>>> This is from  CRAN repository policy:
>>>
>>> "Packages should not write in the user?s home filespace (including
>>> clipboards), nor anywhere else on the file system apart from the R
>>> session?s temporary directory (or during installation in the location
>>> pointed to by TMPDIR: and such usage should be cleaned up). (?) Limited
>>> exceptions may be allowed in interactive sessions if the package obtains
>>> confirmation from the user."
>>>
>>> I am unclear about the scope of this rule. For instance if I had this
>>> function:
>>>
>>> antiSocialWriteLines = function(text, file = 'defaultFile', ...){
>>>      writeLines(text , file, ...)
>>> }
>>>
>>>
>>
>> Simply use file=tempfile() as the default so you do not overwrite stuff
>> in the user filespace and the user can insert another filename which is the
>> confirmation.
>>
>> Best,
>> Uwe Ligges
>>
>>
>>
>> would I be allowed to add it to a package since it writes to a file by
>>> default without asking for confirmation?
>>>
>>> Frankly reading this text, I feel like even writeLines itself violates it
>>> as it writes without "confirmation" once you give it a file path.
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>>
>

	[[alternative HTML version deleted]]


From huw.campbell at gmail.com  Tue Mar 27 01:51:01 2018
From: huw.campbell at gmail.com (Huw Campbell)
Date: Tue, 27 Mar 2018 10:51:01 +1100
Subject: [R-pkg-devel] CRAN write to home policy
In-Reply-To: <CADPf3_3bNSE_58xrDDN2b29pYJDJQk7CXbFzNQUZ-d5NDiM+7g@mail.gmail.com>
References: <CADPf3_2=F8cyHDefm9krykQFktTJ3zxTvJ8ce36dtC2s4URV1A@mail.gmail.com>
 <839c7d9e-7f10-126a-bde5-4f390851bd3e@statistik.tu-dortmund.de>
 <CADPf3_0Q-DbujcOXYGjapOdX7_DB40Yr8Fuj2W6VqiEmq1oiSg@mail.gmail.com>
 <CADPf3_3bNSE_58xrDDN2b29pYJDJQk7CXbFzNQUZ-d5NDiM+7g@mail.gmail.com>
Message-ID: <CAJGqWSM0Mk2uJ1oQaSqXJioL+Da3OHD4ZQNC3X01saG8oSpQUQ@mail.gmail.com>

Probably don't attempt to overwrite or change a user's chosen filenames.

I would probably still use tempfile(), but set either the pattern (which
gives a prefix)
or fileext for a chosen extension.



On Tue, Mar 27, 2018 at 10:07 AM, Ogan Mancarci <ogan.mancarci at gmail.com>
wrote:

> Corrected antiSocialSkip6Lines
>
> antiSocialSkip6Lines = function(filename, output = paste0(filename,
> '_skipped')){
>     lines = readLines(filename)
>     lines = lines[-(1:6)]
>     writeLines(lines, output)
> }
>
> On 26 March 2018 at 16:06, Ogan Mancarci <ogan.mancarci at gmail.com> wrote:
>
> > Thanks for the clarification.
> >
> > What about a scenario where the user has enter a filename which is used
> as
> > a seed for the output file. For instance
> >
> > antiSocialSkip6Lines = function(filename, output = paste0(filename,
> > '_skipped')){
> >     lines = readLines(filename)
> >     lines = lines[-(1:6)]
> > }
> >
> > Here, there is an input from the user which determines what the output is
> > and it is clearly spelled out in the argument list. Yet the user input is
> > not the name of the resulting file unless the user wants it to be.
> >
> > Cheers,
> > Ogan
> >
> > On 26 March 2018 at 15:29, Uwe Ligges <ligges at statistik.tu-dortmund.de>
> > wrote:
> >
> >>
> >>
> >> On 26.03.2018 23:48, Ogan Mancarci wrote:
> >>
> >>> This is from  CRAN repository policy:
> >>>
> >>> "Packages should not write in the user?s home filespace (including
> >>> clipboards), nor anywhere else on the file system apart from the R
> >>> session?s temporary directory (or during installation in the location
> >>> pointed to by TMPDIR: and such usage should be cleaned up). (?) Limited
> >>> exceptions may be allowed in interactive sessions if the package
> obtains
> >>> confirmation from the user."
> >>>
> >>> I am unclear about the scope of this rule. For instance if I had this
> >>> function:
> >>>
> >>> antiSocialWriteLines = function(text, file = 'defaultFile', ...){
> >>>      writeLines(text , file, ...)
> >>> }
> >>>
> >>>
> >>
> >> Simply use file=tempfile() as the default so you do not overwrite stuff
> >> in the user filespace and the user can insert another filename which is
> the
> >> confirmation.
> >>
> >> Best,
> >> Uwe Ligges
> >>
> >>
> >>
> >> would I be allowed to add it to a package since it writes to a file by
> >>> default without asking for confirmation?
> >>>
> >>> Frankly reading this text, I feel like even writeLines itself violates
> it
> >>> as it writes without "confirmation" once you give it a file path.
> >>>
> >>>         [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>
> >>>
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From alejandrobaranek at gmail.com  Tue Mar 27 19:26:55 2018
From: alejandrobaranek at gmail.com (alejandro baranek)
Date: Tue, 27 Mar 2018 14:26:55 -0300
Subject: [R-pkg-devel] Questions about making a database package (Rpolyhedra)
Message-ID: <CADJoD_Y7hAFhd+9F-Fo-mc2EOxyfitOeLy1rdj2jYP3-a33myQ@mail.gmail.com>

Hello group:

We released Rpolyhedra V0.2 last month. It is able to scrape +800 polyhedra
definitions from public sources. At V0.2.4 we are publishing only 150
because the time needed for scrape all the polyhedra, testing and the
resulting size of the package. The difference is a configuration in zzz.R,
very simple to change (Who wants to try it, can build the package for
themeselves)
Only the source files of polyhedra definitions are +12MB of size (We are
including it in the data folder for package self suficience).

But we have doubts about good practices for publishing a database package.

We think the solution is to split the package in an internal
Rpolyhedra-lib, opensource but not in CRAN, and Rpolyhedra with a catalog
sewhich enables to connect with that repo for downloading scraped polyhedra
on-demand.

We have to think further the way of connecting both repositories, but
before touching any code, want to listen to experienced package developers
and the community in general, about to do this.
Do you know any package with analog behavior than this package? We didn't
find it.

Best, Ale.
-- 
 alejandro baranek
@ken4rab <https://twitter.com/ken4rab>
qbotics <http://qbotics.tumblr.com/> | surferinvaders
<http://surferinvaders.tumblr.com> | algebraic-soundscapes
<http://imaginary.org/content/algebraic-soundscapes> | surfer-shuffle
<http://imaginary.org/program/surfer-shuffle>

	[[alternative HTML version deleted]]


From michael.blum at univ-grenoble-alpes.fr  Wed Mar 28 11:27:18 2018
From: michael.blum at univ-grenoble-alpes.fr (Michael Blum)
Date: Wed, 28 Mar 2018 11:27:18 +0200
Subject: [R-pkg-devel] Encoding problems in Rd files when submitting package
 to CRAN
Message-ID: <a26b2a98-16e8-0f9f-d20e-c582de9ff210@univ-grenoble-alpes.fr>

Dear all

I recently submitted a new version of a package called apTreeshape to 
CRAN and my package did not pass the check because of the following error

* checking PDF version of manual ... WARNING
LaTeX errors when creating PDF version.
This typically indicates Rd problems.
LaTeX errors found:
! Package inputenc Error: Unicode char ?? (U+88)
(inputenc)                not set up for use with LaTeX
Many similar errors...
See the inputenc package documentation for explanation.
Type  H <return>  for immediate help.
* checking PDF version of manual without hyperrefs or index ... ERROR

It seems that the problem come from the Rd files. Rd files were not 
generated with roxygen2 because it is a package that has been developped 
w while ago.

In the DESCRIPTION file, I wrote
Encoding: latin1
but using
Encoding: UTF-8
does not solve the issue

I was able to reproduce the bug using R CMD check --as-cran

Sincerely,
Michael Blum


From paulhibbing at gmail.com  Wed Mar 28 02:39:36 2018
From: paulhibbing at gmail.com (Paul Hibbing)
Date: Tue, 27 Mar 2018 20:39:36 -0400
Subject: [R-pkg-devel] Error from svDialogs unless attached to search path
Message-ID: <CANA-rNMUJ09=VVPz-5vT1YOC3bsWRqMqHMiHEekamQDmqjE=Ew@mail.gmail.com>

Hi,

I need to use dialog boxes in my package by calling functions from
the svDialogs package, e.g. svDialogs::dlgInput().

However, I get the below error when I try to use some functions without
first attaching svDialogs to the search path with library() or require().

   > # library(svDialogs)
   > svDialogs::dlgInput("Example")
   Error in svDialogs::dlgInput("Example") : attempt to apply non-function

After un-commenting and running the first line, the above code works
fine, no error.

The svDialogs package is imported in my NAMESPACE, and I cannot
figure out where this error is coming from. As best I can tell, my usage
mirrors the cgam package, which imports svDialogs in NAMESPACE,
and then calls dlgMessage in the ShapeSelect function.

Any tips on resolving this error are appreciated.

Best,
Paul Hibbing


From georgi.boshnakov at manchester.ac.uk  Wed Mar 28 15:56:42 2018
From: georgi.boshnakov at manchester.ac.uk (Georgi Boshnakov)
Date: Wed, 28 Mar 2018 13:56:42 +0000
Subject: [R-pkg-devel] 
 Error from svDialogs unless attached to search path
In-Reply-To: <CANA-rNMUJ09=VVPz-5vT1YOC3bsWRqMqHMiHEekamQDmqjE=Ew@mail.gmail.com>
References: <CANA-rNMUJ09=VVPz-5vT1YOC3bsWRqMqHMiHEekamQDmqjE=Ew@mail.gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F6552C0@MBXP01.ds.man.ac.uk>

Hi,

"svDialogs" depends on svGUI but doesn't import functions it needs. 
This happens with packages which have not been updated for some time and thus may not conform to the requirements to import stuff even for dependencies.
 
Try adding "svGUI" to "Depends:" as a temporary measure and contact the author of the package. 
The author of scGUI doesn't need to be told what is needed but for your information
they just need to import the functions used in svDialogs. I run `R CMD check' on svDialogs and it issued numerous warnings about imports. 

Georgi


-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Paul Hibbing
Sent: 28 March 2018 01:40
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Error from svDialogs unless attached to search path

Hi,

I need to use dialog boxes in my package by calling functions from the svDialogs package, e.g. svDialogs::dlgInput().

However, I get the below error when I try to use some functions without first attaching svDialogs to the search path with library() or require().

   > # library(svDialogs)
   > svDialogs::dlgInput("Example")
   Error in svDialogs::dlgInput("Example") : attempt to apply non-function

After un-commenting and running the first line, the above code works fine, no error.

The svDialogs package is imported in my NAMESPACE, and I cannot figure out where this error is coming from. As best I can tell, my usage mirrors the cgam package, which imports svDialogs in NAMESPACE, and then calls dlgMessage in the ShapeSelect function.

Any tips on resolving this error are appreciated.

Best,
Paul Hibbing

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ogan.mancarci at gmail.com  Thu Mar 29 04:47:53 2018
From: ogan.mancarci at gmail.com (Ogan Mancarci)
Date: Wed, 28 Mar 2018 19:47:53 -0700
Subject: [R-pkg-devel] Using shared libraries
Message-ID: <CADPf3_2iUt4uc7RLjTA5NV0s9aUKgT3qy7r47=2RM52b7PS0Jw@mail.gmail.com>

I have been looking for ways to use shared libraries in packages in CRAN
and be able to write tests for them.

When installing packages that depend on shared libraries, if a library is
missing from the system we often get a nice error message complaining about
the missing library during installation and listing what to install on
different linux builds, what to install on windows and mac. Similarly, how
can I fail during installation if a required shared library is missing and
show a warning to the users directing them to install it?

More importantly, if I want to write tests and examples for the package,
how do I tell CRAN that it needs to have the shared library?

Cheers,
Ogan

	[[alternative HTML version deleted]]


From edd at debian.org  Sat Mar 31 06:42:30 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri, 30 Mar 2018 23:42:30 -0500
Subject: [R-pkg-devel] Using shared libraries
In-Reply-To: <CADPf3_2iUt4uc7RLjTA5NV0s9aUKgT3qy7r47=2RM52b7PS0Jw@mail.gmail.com>
References: <CADPf3_2iUt4uc7RLjTA5NV0s9aUKgT3qy7r47=2RM52b7PS0Jw@mail.gmail.com>
Message-ID: <23231.4534.246044.776960@rob.eddelbuettel.com>


On 28 March 2018 at 19:47, Ogan Mancarci wrote:
| I have been looking for ways to use shared libraries in packages in CRAN
| and be able to write tests for them.

Well the basic problem here is that shared libraries are in fact provided by
the _operating system_ and hence you just introduced an OS dependency.
 
| When installing packages that depend on shared libraries, if a library is
| missing from the system we often get a nice error message complaining about
| the missing library during installation and listing what to install on

Really? If so it clearly is due to someone (maybe configure, maybe ad hoc
script) testing for such a requuired library.

| different linux builds, what to install on windows and mac. Similarly, how
| can I fail during installation if a required shared library is missing and
| show a warning to the users directing them to install it?

By writing a test.

| More importantly, if I want to write tests and examples for the package,
| how do I tell CRAN that it needs to have the shared library?

To a first approximation, if you need "foo" and CRAN does not have "foo" then
your package is borked, will not build, and hence get rejected.

Now, this was a brief email. There are A MILLION details we could discuss
here.

One possible example is nloptr:
- on windows, it required nlopt to be present, and to point to it via an
  environment library
- on systems with an X it tests, uses an system shared library if present,
  and if not downloads the sources
- at least that is what old versions did; the current -dev version switched
  to (AFAIK) either using system or using embedded sources.

In short, what you're after is the hardest possibly deployment path given the
cross-OS use of R.  No shortcuts.  But it is worth sorting this out.  A few
other packages, and this is the right list.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From wangyuewy729 at gmail.com  Sat Mar 31 16:34:18 2018
From: wangyuewy729 at gmail.com (=?UTF-8?B?546L546l?=)
Date: Sat, 31 Mar 2018 10:34:18 -0400
Subject: [R-pkg-devel] R Internal data can not use
Message-ID: <CAB1mTSY+KACAt_GeSJ=nczw0+=1iAfAMDeQxmB8p8tcBfmUW0Q@mail.gmail.com>

Hi there,

I am creating an R package now. I use devtools::use_data(mydat, internal =
T) to add a sysdata.rda in R/ folder.
The building process works well, but when I installed it, and I can not
reach the data in sysdata.rda. Did anyone have this problem before?

Thank you for your help.
Frank

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Sat Mar 31 16:56:25 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 31 Mar 2018 10:56:25 -0400
Subject: [R-pkg-devel] R Internal data can not use
In-Reply-To: <CAB1mTSY+KACAt_GeSJ=nczw0+=1iAfAMDeQxmB8p8tcBfmUW0Q@mail.gmail.com>
References: <CAB1mTSY+KACAt_GeSJ=nczw0+=1iAfAMDeQxmB8p8tcBfmUW0Q@mail.gmail.com>
Message-ID: <a8f4d766-ee33-2d4a-d11b-c006b67cfb8b@gmail.com>

On 31/03/2018 10:34 AM, ?? wrote:
> Hi there,
> 
> I am creating an R package now. I use devtools::use_data(mydat, internal =
> T) to add a sysdata.rda in R/ folder.
> The building process works well, but when I installed it, and I can not
> reach the data in sysdata.rda. Did anyone have this problem before?

How are you trying to reach it?  The sysdata.rda data is not supposed to 
be accessible outside the package.

Duncan Murdoch


