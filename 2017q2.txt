From alexandre.sieira at gmail.com  Sun Apr  2 23:21:10 2017
From: alexandre.sieira at gmail.com (Alexandre Sieira)
Date: Sun, 2 Apr 2017 17:21:10 -0400
Subject: [R-pkg-devel] Help with Windows build failure
Message-ID: <CAL_X2361B8W3B0EPh-NuAJjJE8rFcDLwv+ZZSh5pZ5=4tYzG=Q@mail.gmail.com>

Hi, everyone.

I have done some work this weekend to allow the SnakeCharmR package (
https://github.com/asieira/SnakeCharmR) to be compiled under Windows. For
reference, this is an Rcpp-based packages that links to the system's
libpython.

I have been able to test it on my box using Windows 10 and several Python
versions:

* Rtools mingw_64/opt Python 2.7.9;
* python.org 2.7.13 64-bit;
* python.org 3.6.1 64-bit;
* python.org 2.7.x 32-bit on Appveyor (
https://ci.appveyor.com/project/asieira/SnakeCharmR).

Still, when I submit my source package to win-builder I get an error:
https://win-builder.r-project.org/9aqdlW0D6e3m/

https://win-builder.r-project.org/9aqdlW0D6e3m/00install.out shows some
warnings on header files that are outside of my control, but ends with a
successful compilation. However, it compiles only the 64-bit version of the
DLL and gives me this warning:

Warning: this package has a non-empty 'configure.win' file,
so building only the main architecture


Finally, when we look at
https://win-builder.r-project.org/9aqdlW0D6e3m/00check.log we see an error
due to the fact that the package can?t be tested on i386:

** checking whether the package can be loaded ... ERROR
Loading this package had a fatal error status code 1
Loading log:
Error: package 'SnakeCharmR' is not installed for 'arch = i386'
Execution halted
** DONE
Status: 1 ERROR, 1 NOTE


I apologize if this is a beginner?s problem, but this is my first R package
ever and I?m not really used to working with R on Windows. Would appreciate
any guidance and pointers on how to address this and get the package to
pass the necessary CRAN automated tests.

Thanks in advance for your help.

-- 
Alexandre Sieira
CISA, CISSP, ISO 27001 Lead Auditor

"The truth is rarely pure and never simple."
Oscar Wilde, The Importance of Being Earnest, 1895, Act I

	[[alternative HTML version deleted]]


From davidhughjones at gmail.com  Thu Apr  6 16:37:00 2017
From: davidhughjones at gmail.com (David Hugh-Jones)
Date: Thu, 6 Apr 2017 15:37:00 +0100
Subject: [R-pkg-devel] R CMD check not finding my vignettes
Message-ID: <CAARY7ki02r8gLWJEhvLOm1k5N1VduKpunTBr0WSejfy3671Wjg@mail.gmail.com>

Before building my package, I manually place both pdf and html versions of
my vignettes into inst/doc. I then build the package with `devtools::check`.

Listing of the resulting tarball:

-rw-r--r--  0 david  staff    1692  6 Apr 15:10
huxtable/inst/doc/design-principles.R

-rw-r--r--  0 david  staff    6697  6 Apr 15:10
huxtable/inst/doc/design-principles.Rmd

-rw-r--r--  0 david  staff  899765  6 Apr 15:10
huxtable/inst/doc/design-principles.html

-rw-r--r--  0 david  staff  213776  6 Apr 15:10
huxtable/inst/doc/design-principles.pdf

-rw-r--r--  0 david  staff    3009  6 Apr 15:10 huxtable/inst/doc/huxreg.R

-rw-r--r--  0 david  staff    5521  6 Apr 15:10 huxtable/inst/doc/huxreg.Rmd

-rw-r--r--  0 david  staff  940955  6 Apr 15:10
huxtable/inst/doc/huxreg.html

-rw-r--r--  0 david  staff  237771  6 Apr 15:10 huxtable/inst/doc/huxreg.pdf

-rw-r--r--  0 david  staff   10473  6 Apr 15:11 huxtable/inst/doc/huxtable.R

-rw-r--r--  0 david  staff   20552  6 Apr 15:11
huxtable/inst/doc/huxtable.Rmd

-rw-r--r--  0 david  staff  925373  6 Apr 15:11
huxtable/inst/doc/huxtable.html

-rw-r--r--  0 david  staff  284978  6 Apr 15:11
huxtable/inst/doc/huxtable.pdf

However, R CMD check then complains:

* checking package vignettes in ?inst/doc? ... WARNING
Package vignettes without corresponding PDF/HTML:
   ?design-principles.Rmd?
   ?huxreg.Rmd?
   ?huxtable.Rmd?

What gives?

Cheers,
David

	[[alternative HTML version deleted]]


From icarroll at sesync.org  Thu Apr  6 22:17:02 2017
From: icarroll at sesync.org (Ian Carroll)
Date: Thu, 6 Apr 2017 20:17:02 +0000
Subject: [R-pkg-devel] maintainer built vignette
Message-ID: <4755173A-97B7-4CE3-8AC5-05F7BF8458C5@sesync.org>

Hello,

First post to r-package-devel, thanks for your help.

How do I package an rmarkdown vignette that cannot be built on win-builder? The vignette in question demonstrates interaction with a SLURM cluster, which is not available to win-builder or travis. In my `.travis.yml` I can include `r_build_args: "--no-build-vignettes"` and `r_check_args: "--no-vignettes"` to skip the build and re-build steps respectively. I don?t know how to do that with win-builder, so I cannot pass the incoming pretest on package submission. The extra steps make me feel like I?m doing something wrong regardless.

So, what?s the appropriate way to include vignettes that should not be hammered with attempts to build at every turn? Some old advice seemed to suggest going straight to inst/docs, but newer rules are that inclusion in vignettes/ is mandatory.

Thanks,
Ian




From edd at debian.org  Fri Apr  7 03:21:25 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 6 Apr 2017 20:21:25 -0500
Subject: [R-pkg-devel] Help with Windows build failure
In-Reply-To: <CAL_X2361B8W3B0EPh-NuAJjJE8rFcDLwv+ZZSh5pZ5=4tYzG=Q@mail.gmail.com>
References: <CAL_X2361B8W3B0EPh-NuAJjJE8rFcDLwv+ZZSh5pZ5=4tYzG=Q@mail.gmail.com>
Message-ID: <22758.59797.40233.725087@max.eddelbuettel.com>


On 2 April 2017 at 17:21, Alexandre Sieira wrote:
| Hi, everyone.
| 
| I have done some work this weekend to allow the SnakeCharmR package (
| https://github.com/asieira/SnakeCharmR) to be compiled under Windows. For
| reference, this is an Rcpp-based packages that links to the system's
| libpython.
| 
| I have been able to test it on my box using Windows 10 and several Python
| versions:
| 
| * Rtools mingw_64/opt Python 2.7.9;
| * python.org 2.7.13 64-bit;
| * python.org 3.6.1 64-bit;
| * python.org 2.7.x 32-bit on Appveyor (
| https://ci.appveyor.com/project/asieira/SnakeCharmR).
| 
| Still, when I submit my source package to win-builder I get an error:
| https://win-builder.r-project.org/9aqdlW0D6e3m/
| 
| https://win-builder.r-project.org/9aqdlW0D6e3m/00install.out shows some
| warnings on header files that are outside of my control, but ends with a
| successful compilation. However, it compiles only the 64-bit version of the
| DLL and gives me this warning:
| 
| Warning: this package has a non-empty 'configure.win' file,
| so building only the main architecture
| 
| 
| Finally, when we look at
| https://win-builder.r-project.org/9aqdlW0D6e3m/00check.log we see an error
| due to the fact that the package can?t be tested on i386:
| 
| ** checking whether the package can be loaded ... ERROR
| Loading this package had a fatal error status code 1
| Loading log:
| Error: package 'SnakeCharmR' is not installed for 'arch = i386'
| Execution halted
| ** DONE
| Status: 1 ERROR, 1 NOTE
| 
| 
| I apologize if this is a beginner?s problem, but this is my first R package
| ever and I?m not really used to working with R on Windows. Would appreciate
| any guidance and pointers on how to address this and get the package to
| pass the necessary CRAN automated tests.

I tried to make Python and R co-exist at some point; my conclusion was there
aren't enough days in the week to figure out how to do it on Windows.  It's
easy to do on Linux, and I don't personally have OS X / macOS use cases but
here it's feasible if you're careful about your toolchain.

I think you should just consider 'OS_type: unix' in your DESCRIPTION.  A
working and uploaded package on two OSs beats an "almost there but never
finished" package on three in my book.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd at debian.org  Fri Apr  7 03:23:44 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 6 Apr 2017 20:23:44 -0500
Subject: [R-pkg-devel] maintainer built vignette
In-Reply-To: <4755173A-97B7-4CE3-8AC5-05F7BF8458C5@sesync.org>
References: <4755173A-97B7-4CE3-8AC5-05F7BF8458C5@sesync.org>
Message-ID: <22758.59936.352521.757842@max.eddelbuettel.com>


On 6 April 2017 at 20:17, Ian Carroll wrote:
| How do I package an rmarkdown vignette that cannot be built on win-builder? The vignette in question demonstrates interaction with a SLURM cluster, which is not available to win-builder or travis. In my `.travis.yml` I can include `r_build_args: "--no-build-vignettes"` and `r_check_args: "--no-vignettes"` to skip the build and re-build steps respectively. I don?t know how to do that with win-builder, so I cannot pass the incoming pretest on package submission. The extra steps make me feel like I?m doing something wrong regardless.
| 
| So, what?s the appropriate way to include vignettes that should not be hammered with attempts to build at every turn? Some old advice seemed to suggest going straight to inst/docs, but newer rules are that inclusion in vignettes/ is mandatory.

I think if you adjust .Rbuildignore to NOT include the source but just the
pdf then you will have documentation present -- without the risk of 'cannot
be computed here' on some platforms.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From icarroll at sesync.org  Fri Apr  7 06:15:51 2017
From: icarroll at sesync.org (Ian Carroll)
Date: Fri, 7 Apr 2017 04:15:51 +0000
Subject: [R-pkg-devel] maintainer built vignette
In-Reply-To: <22758.59936.352521.757842@max.eddelbuettel.com>
References: <4755173A-97B7-4CE3-8AC5-05F7BF8458C5@sesync.org>
 <22758.59936.352521.757842@max.eddelbuettel.com>
Message-ID: <615CC105-C730-41C6-BCA8-B1B694555BE2@sesync.org>

With `BuildVignettes: no` in my DESCRIPTION and `^vignettes` in my .Rbuildignore, I can squeak through a normal build (no `r_build_args` or `r_check_args`) on travis with just this note:

    * checking for old-style vignette sources ... NOTE
    Vignette sources only in ?inst/doc?:
      ?rslurm.Rmd?
    A ?vignettes? directory is required as from R 3.1.0
    and these will not be indexed nor checked

I?ll take a NOTE over an ERROR, so I?ll try to submit like this with an explanation. It seems to me like `BuildVignettes: no` should also disable re-building them under R CMD check, but I think R CMD check --as-cran clobbers it.

-----Original Message-----
From: Dirk Eddelbuettel <dirk.eddelbuettel at gmail.com> on behalf of Dirk Eddelbuettel <edd at debian.org>
Date: Thursday, April 6, 2017 at 9:23 PM
To: Ian Carroll <icarroll at sesync.org>
Cc: "r-package-devel at r-project.org" <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] maintainer built vignette

    
    On 6 April 2017 at 20:17, Ian Carroll wrote:
    | How do I package an rmarkdown vignette that cannot be built on win-builder? The vignette in question demonstrates interaction with a SLURM cluster, which is not available to win-builder or travis. In my `.travis.yml` I can include `r_build_args: "--no-build-vignettes"` and `r_check_args: "--no-vignettes"` to skip the build and re-build steps respectively. I don?t know how to do that with win-builder, so I cannot pass the incoming pretest on package submission. The extra steps make me feel like I?m doing something wrong regardless.
    | 
    | So, what?s the appropriate way to include vignettes that should not be hammered with attempts to build at every turn? Some old advice seemed to suggest going straight to inst/docs, but newer rules are that inclusion in vignettes/ is mandatory.
    
    I think if you adjust .Rbuildignore to NOT include the source but just the
    pdf then you will have documentation present -- without the risk of 'cannot
    be computed here' on some platforms.
    
    Dirk
    
    -- 
    http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
    


From davidhughjones at gmail.com  Fri Apr  7 07:55:53 2017
From: davidhughjones at gmail.com (David Hugh-Jones)
Date: Fri, 07 Apr 2017 05:55:53 +0000
Subject: [R-pkg-devel] R CMD check not finding my vignettes
In-Reply-To: <CAARY7ki02r8gLWJEhvLOm1k5N1VduKpunTBr0WSejfy3671Wjg@mail.gmail.com>
References: <CAARY7ki02r8gLWJEhvLOm1k5N1VduKpunTBr0WSejfy3671Wjg@mail.gmail.com>
Message-ID: <CAARY7khMwu1HDpt=Pm4uQkLttG12ocQm8sm9OsVgZZnL=AMKCQ@mail.gmail.com>

 Okay, so this got tumbleweeded... so should I file a bug?

D

On Thu, 6 Apr 2017 at 15:37, David Hugh-Jones <davidhughjones at gmail.com>
wrote:

>
> Before building my package, I manually place both pdf and html versions of
> my vignettes into inst/doc. I then build the package with `devtools::check`.
>
> Listing of the resulting tarball:
>
> -rw-r--r--  0 david  staff    1692  6 Apr 15:10
> huxtable/inst/doc/design-principles.R
>
> -rw-r--r--  0 david  staff    6697  6 Apr 15:10
> huxtable/inst/doc/design-principles.Rmd
>
> -rw-r--r--  0 david  staff  899765  6 Apr 15:10
> huxtable/inst/doc/design-principles.html
>
> -rw-r--r--  0 david  staff  213776  6 Apr 15:10
> huxtable/inst/doc/design-principles.pdf
>
> -rw-r--r--  0 david  staff    3009  6 Apr 15:10 huxtable/inst/doc/huxreg.R
>
> -rw-r--r--  0 david  staff    5521  6 Apr 15:10
> huxtable/inst/doc/huxreg.Rmd
>
> -rw-r--r--  0 david  staff  940955  6 Apr 15:10
> huxtable/inst/doc/huxreg.html
>
> -rw-r--r--  0 david  staff  237771  6 Apr 15:10
> huxtable/inst/doc/huxreg.pdf
>
> -rw-r--r--  0 david  staff   10473  6 Apr 15:11
> huxtable/inst/doc/huxtable.R
>
> -rw-r--r--  0 david  staff   20552  6 Apr 15:11
> huxtable/inst/doc/huxtable.Rmd
>
> -rw-r--r--  0 david  staff  925373  6 Apr 15:11
> huxtable/inst/doc/huxtable.html
>
> -rw-r--r--  0 david  staff  284978  6 Apr 15:11
> huxtable/inst/doc/huxtable.pdf
>
> However, R CMD check then complains:
>
> * checking package vignettes in ?inst/doc? ... WARNING
> Package vignettes without corresponding PDF/HTML:
>    ?design-principles.Rmd?
>    ?huxreg.Rmd?
>    ?huxtable.Rmd?
>
> What gives?
>
> Cheers,
> David
>
-- 
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Fri Apr  7 08:15:20 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Fri, 7 Apr 2017 08:15:20 +0200
Subject: [R-pkg-devel] R CMD check not finding my vignettes
In-Reply-To: <CAARY7khMwu1HDpt=Pm4uQkLttG12ocQm8sm9OsVgZZnL=AMKCQ@mail.gmail.com>
References: <CAARY7ki02r8gLWJEhvLOm1k5N1VduKpunTBr0WSejfy3671Wjg@mail.gmail.com>
 <CAARY7khMwu1HDpt=Pm4uQkLttG12ocQm8sm9OsVgZZnL=AMKCQ@mail.gmail.com>
Message-ID: <8088e565-0eea-748a-b5f0-ab72beeb92d7@statistik.tu-dortmund.de>

I do not know devtools, but the vignette sources should be placed in 
./vignettes and then R CMD build will put the files into the relevant 
places automatically.

Best,
Uwe Ligges





On 07.04.2017 07:55, David Hugh-Jones wrote:
>  Okay, so this got tumbleweeded... so should I file a bug?
>
> D
>
> On Thu, 6 Apr 2017 at 15:37, David Hugh-Jones <davidhughjones at gmail.com>
> wrote:
>
>>
>> Before building my package, I manually place both pdf and html versions of
>> my vignettes into inst/doc. I then build the package with `devtools::check`.
>>
>> Listing of the resulting tarball:
>>
>> -rw-r--r--  0 david  staff    1692  6 Apr 15:10
>> huxtable/inst/doc/design-principles.R
>>
>> -rw-r--r--  0 david  staff    6697  6 Apr 15:10
>> huxtable/inst/doc/design-principles.Rmd
>>
>> -rw-r--r--  0 david  staff  899765  6 Apr 15:10
>> huxtable/inst/doc/design-principles.html
>>
>> -rw-r--r--  0 david  staff  213776  6 Apr 15:10
>> huxtable/inst/doc/design-principles.pdf
>>
>> -rw-r--r--  0 david  staff    3009  6 Apr 15:10 huxtable/inst/doc/huxreg.R
>>
>> -rw-r--r--  0 david  staff    5521  6 Apr 15:10
>> huxtable/inst/doc/huxreg.Rmd
>>
>> -rw-r--r--  0 david  staff  940955  6 Apr 15:10
>> huxtable/inst/doc/huxreg.html
>>
>> -rw-r--r--  0 david  staff  237771  6 Apr 15:10
>> huxtable/inst/doc/huxreg.pdf
>>
>> -rw-r--r--  0 david  staff   10473  6 Apr 15:11
>> huxtable/inst/doc/huxtable.R
>>
>> -rw-r--r--  0 david  staff   20552  6 Apr 15:11
>> huxtable/inst/doc/huxtable.Rmd
>>
>> -rw-r--r--  0 david  staff  925373  6 Apr 15:11
>> huxtable/inst/doc/huxtable.html
>>
>> -rw-r--r--  0 david  staff  284978  6 Apr 15:11
>> huxtable/inst/doc/huxtable.pdf
>>
>> However, R CMD check then complains:
>>
>> * checking package vignettes in ?inst/doc? ... WARNING
>> Package vignettes without corresponding PDF/HTML:
>>    ?design-principles.Rmd?
>>    ?huxreg.Rmd?
>>    ?huxtable.Rmd?
>>
>> What gives?
>>
>> Cheers,
>> David
>>


From ligges at statistik.tu-dortmund.de  Fri Apr  7 09:25:50 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Fri, 7 Apr 2017 09:25:50 +0200
Subject: [R-pkg-devel] maintainer built vignette
In-Reply-To: <615CC105-C730-41C6-BCA8-B1B694555BE2@sesync.org>
References: <4755173A-97B7-4CE3-8AC5-05F7BF8458C5@sesync.org>
 <22758.59936.352521.757842@max.eddelbuettel.com>
 <615CC105-C730-41C6-BCA8-B1B694555BE2@sesync.org>
Message-ID: <6eb543ca-7baa-9bab-fbb7-2f14ab05c7a1@statistik.tu-dortmund.de>

Please note that packages with a FOSS licences cannot have
BuildVignettes: no

Such FOSS Packages with a vignette (typically as pdf) need the sources 
that produced the vignette.
Hence, if you really want to ship a vignette including code that is 
hardly executable on CRAN systems, reply to the auto-rejection message 
and explain the situation.

The CRAN team probably will decide to special case the package then so 
that the vignettes are not checked.

Best,
Uwe Ligges




On 07.04.2017 06:15, Ian Carroll wrote:
> With `BuildVignettes: no` in my DESCRIPTION and `^vignettes` in my .Rbuildignore, I can squeak through a normal build (no `r_build_args` or `r_check_args`) on travis with just this note:
>
>     * checking for old-style vignette sources ... NOTE
>     Vignette sources only in ?inst/doc?:
>       ?rslurm.Rmd?
>     A ?vignettes? directory is required as from R 3.1.0
>     and these will not be indexed nor checked
>
> I?ll take a NOTE over an ERROR, so I?ll try to submit like this with an explanation. It seems to me like `BuildVignettes: no` should also disable re-building them under R CMD check, but I think R CMD check --as-cran clobbers it.
>
> -----Original Message-----
> From: Dirk Eddelbuettel <dirk.eddelbuettel at gmail.com> on behalf of Dirk Eddelbuettel <edd at debian.org>
> Date: Thursday, April 6, 2017 at 9:23 PM
> To: Ian Carroll <icarroll at sesync.org>
> Cc: "r-package-devel at r-project.org" <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] maintainer built vignette
>
>
>     On 6 April 2017 at 20:17, Ian Carroll wrote:
>     | How do I package an rmarkdown vignette that cannot be built on win-builder? The vignette in question demonstrates interaction with a SLURM cluster, which is not available to win-builder or travis. In my `.travis.yml` I can include `r_build_args: "--no-build-vignettes"` and `r_check_args: "--no-vignettes"` to skip the build and re-build steps respectively. I don?t know how to do that with win-builder, so I cannot pass the incoming pretest on package submission. The extra steps make me feel like I?m doing something wrong regardless.
>     |
>     | So, what?s the appropriate way to include vignettes that should not be hammered with attempts to build at every turn? Some old advice seemed to suggest going straight to inst/docs, but newer rules are that inclusion in vignettes/ is mandatory.
>
>     I think if you adjust .Rbuildignore to NOT include the source but just the
>     pdf then you will have documentation present -- without the risk of 'cannot
>     be computed here' on some platforms.
>
>     Dirk
>
>     --
>     http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From davidhughjones at gmail.com  Fri Apr  7 12:09:48 2017
From: davidhughjones at gmail.com (David Hugh-Jones)
Date: Fri, 7 Apr 2017 11:09:48 +0100
Subject: [R-pkg-devel] R CMD check not finding my vignettes
In-Reply-To: <8088e565-0eea-748a-b5f0-ab72beeb92d7@statistik.tu-dortmund.de>
References: <CAARY7ki02r8gLWJEhvLOm1k5N1VduKpunTBr0WSejfy3671Wjg@mail.gmail.com>
 <CAARY7khMwu1HDpt=Pm4uQkLttG12ocQm8sm9OsVgZZnL=AMKCQ@mail.gmail.com>
 <8088e565-0eea-748a-b5f0-ab72beeb92d7@statistik.tu-dortmund.de>
Message-ID: <CAARY7kiT=TqskL3ttNGybXxg+uA5o3pu_5ioXs11=DWr5-4Kkw@mail.gmail.com>

Hi Uwe,

Indeed yes, but my built tarball has got the files in inst/doc as shown. If
I then run 'R CMD check' on that tarball, I get the error quoted. Is there
something happening that I don't understand?

Incidentally, the tarball also has files in the vignettes directory: (a)
the original .Rmd files and (b) HTML files. My original directory has all
of Rmd, HTML and PDF files in the vignettes directory, but for some reason
the PDFs don't get included when the tarball is built.

Cheers,
David

David

On 7 April 2017 at 07:15, Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

> I do not know devtools, but the vignette sources should be placed in
> ./vignettes and then R CMD build will put the files into the relevant
> places automatically.
>
> Best,
> Uwe Ligges
>
>
>
>
>
>
> On 07.04.2017 07:55, David Hugh-Jones wrote:
>
>>  Okay, so this got tumbleweeded... so should I file a bug?
>>
>> D
>>
>> On Thu, 6 Apr 2017 at 15:37, David Hugh-Jones <davidhughjones at gmail.com>
>> wrote:
>>
>>
>>> Before building my package, I manually place both pdf and html versions
>>> of
>>> my vignettes into inst/doc. I then build the package with
>>> `devtools::check`.
>>>
>>> Listing of the resulting tarball:
>>>
>>> -rw-r--r--  0 david  staff    1692  6 Apr 15:10
>>> huxtable/inst/doc/design-principles.R
>>>
>>> -rw-r--r--  0 david  staff    6697  6 Apr 15:10
>>> huxtable/inst/doc/design-principles.Rmd
>>>
>>> -rw-r--r--  0 david  staff  899765  6 Apr 15:10
>>> huxtable/inst/doc/design-principles.html
>>>
>>> -rw-r--r--  0 david  staff  213776  6 Apr 15:10
>>> huxtable/inst/doc/design-principles.pdf
>>>
>>> -rw-r--r--  0 david  staff    3009  6 Apr 15:10
>>> huxtable/inst/doc/huxreg.R
>>>
>>> -rw-r--r--  0 david  staff    5521  6 Apr 15:10
>>> huxtable/inst/doc/huxreg.Rmd
>>>
>>> -rw-r--r--  0 david  staff  940955  6 Apr 15:10
>>> huxtable/inst/doc/huxreg.html
>>>
>>> -rw-r--r--  0 david  staff  237771  6 Apr 15:10
>>> huxtable/inst/doc/huxreg.pdf
>>>
>>> -rw-r--r--  0 david  staff   10473  6 Apr 15:11
>>> huxtable/inst/doc/huxtable.R
>>>
>>> -rw-r--r--  0 david  staff   20552  6 Apr 15:11
>>> huxtable/inst/doc/huxtable.Rmd
>>>
>>> -rw-r--r--  0 david  staff  925373  6 Apr 15:11
>>> huxtable/inst/doc/huxtable.html
>>>
>>> -rw-r--r--  0 david  staff  284978  6 Apr 15:11
>>> huxtable/inst/doc/huxtable.pdf
>>>
>>> However, R CMD check then complains:
>>>
>>> * checking package vignettes in ?inst/doc? ... WARNING
>>> Package vignettes without corresponding PDF/HTML:
>>>    ?design-principles.Rmd?
>>>    ?huxreg.Rmd?
>>>    ?huxtable.Rmd?
>>>
>>> What gives?
>>>
>>> Cheers,
>>> David
>>>
>>>

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Fri Apr  7 12:20:58 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Fri, 7 Apr 2017 12:20:58 +0200
Subject: [R-pkg-devel] R CMD check not finding my vignettes
In-Reply-To: <CAARY7kiT=TqskL3ttNGybXxg+uA5o3pu_5ioXs11=DWr5-4Kkw@mail.gmail.com>
References: <CAARY7ki02r8gLWJEhvLOm1k5N1VduKpunTBr0WSejfy3671Wjg@mail.gmail.com>
 <CAARY7khMwu1HDpt=Pm4uQkLttG12ocQm8sm9OsVgZZnL=AMKCQ@mail.gmail.com>
 <8088e565-0eea-748a-b5f0-ab72beeb92d7@statistik.tu-dortmund.de>
 <CAARY7kiT=TqskL3ttNGybXxg+uA5o3pu_5ioXs11=DWr5-4Kkw@mail.gmail.com>
Message-ID: <677dcfda-4766-a3e2-30a3-9b663084eba2@statistik.tu-dortmund.de>

Can you send the tarball please, I can take a look,
Uwe


On 07.04.2017 12:09, David Hugh-Jones wrote:
> Hi Uwe,
>
> Indeed yes, but my built tarball has got the files in inst/doc as shown.
> If I then run 'R CMD check' on that tarball, I get the error quoted. Is
> there something happening that I don't understand?
>
> Incidentally, the tarball also has files in the vignettes directory: (a)
> the original .Rmd files and (b) HTML files. My original directory has
> all of Rmd, HTML and PDF files in the vignettes directory, but for some
> reason the PDFs don't get included when the tarball is built.
>
> Cheers,
> David
>
> David
>
> On 7 April 2017 at 07:15, Uwe Ligges <ligges at statistik.tu-dortmund.de
> <mailto:ligges at statistik.tu-dortmund.de>> wrote:
>
>     I do not know devtools, but the vignette sources should be placed in
>     ./vignettes and then R CMD build will put the files into the
>     relevant places automatically.
>
>     Best,
>     Uwe Ligges
>
>
>
>
>
>
>     On 07.04.2017 07:55, David Hugh-Jones wrote:
>
>          Okay, so this got tumbleweeded... so should I file a bug?
>
>         D
>
>         On Thu, 6 Apr 2017 at 15:37, David Hugh-Jones
>         <davidhughjones at gmail.com <mailto:davidhughjones at gmail.com>>
>         wrote:
>
>
>             Before building my package, I manually place both pdf and
>             html versions of
>             my vignettes into inst/doc. I then build the package with
>             `devtools::check`.
>
>             Listing of the resulting tarball:
>
>             -rw-r--r--  0 david  staff    1692  6 Apr 15:10
>             huxtable/inst/doc/design-principles.R
>
>             -rw-r--r--  0 david  staff    6697  6 Apr 15:10
>             huxtable/inst/doc/design-principles.Rmd
>
>             -rw-r--r--  0 david  staff  899765  6 Apr 15:10
>             huxtable/inst/doc/design-principles.html
>
>             -rw-r--r--  0 david  staff  213776  6 Apr 15:10
>             huxtable/inst/doc/design-principles.pdf
>
>             -rw-r--r--  0 david  staff    3009  6 Apr 15:10
>             huxtable/inst/doc/huxreg.R
>
>             -rw-r--r--  0 david  staff    5521  6 Apr 15:10
>             huxtable/inst/doc/huxreg.Rmd
>
>             -rw-r--r--  0 david  staff  940955  6 Apr 15:10
>             huxtable/inst/doc/huxreg.html
>
>             -rw-r--r--  0 david  staff  237771  6 Apr 15:10
>             huxtable/inst/doc/huxreg.pdf
>
>             -rw-r--r--  0 david  staff   10473  6 Apr 15:11
>             huxtable/inst/doc/huxtable.R
>
>             -rw-r--r--  0 david  staff   20552  6 Apr 15:11
>             huxtable/inst/doc/huxtable.Rmd
>
>             -rw-r--r--  0 david  staff  925373  6 Apr 15:11
>             huxtable/inst/doc/huxtable.html
>
>             -rw-r--r--  0 david  staff  284978  6 Apr 15:11
>             huxtable/inst/doc/huxtable.pdf
>
>             However, R CMD check then complains:
>
>             * checking package vignettes in ?inst/doc? ... WARNING
>             Package vignettes without corresponding PDF/HTML:
>                ?design-principles.Rmd?
>                ?huxreg.Rmd?
>                ?huxtable.Rmd?
>
>             What gives?
>
>             Cheers,
>             David
>
>


From alexandre.sieira at gmail.com  Fri Apr  7 14:28:19 2017
From: alexandre.sieira at gmail.com (Alexandre Sieira)
Date: Fri, 7 Apr 2017 05:28:19 -0700
Subject: [R-pkg-devel] Help with Windows build failure
In-Reply-To: <22758.59797.40233.725087@max.eddelbuettel.com>
References: <CAL_X2361B8W3B0EPh-NuAJjJE8rFcDLwv+ZZSh5pZ5=4tYzG=Q@mail.gmail.com>
 <22758.59797.40233.725087@max.eddelbuettel.com>
Message-ID: <CAL_X237KR3RpCaeP-+Dobzy0OjT3NigcOgUykffQTJt=hRFUfw@mail.gmail.com>

Hi, Dirk.

Thank you for responding.

I do sympathize with your frustrations, due to the exact complexity you are
mentioning and also my ignorance on how R packages compile on Windows, I
had SnakeCharmR signal ?OS_type: Unix? for the longest time.

The thing is that AFAIK this works on Windows now, both with the python.org and
Rtools mingw Python distributions. The challenge now is figuring out the
best to get this into CRAN as a Windows package as well. Challenge #1:
getting past the win builder pre-check. :)

I was reading some other posts on this list and maybe setting ?Biarch:
false? could help? I?ll try that next.

-- 
Alexandre Sieira
CISA, CISSP, ISO 27001 Lead Auditor

"The truth is rarely pure and never simple."
Oscar Wilde, The Importance of Being Earnest, 1895, Act I

On 6 April 2017 at 22:21:27, Dirk Eddelbuettel (edd at debian.org) wrote:


On 2 April 2017 at 17:21, Alexandre Sieira wrote:
| Hi, everyone.
|
| I have done some work this weekend to allow the SnakeCharmR package (
| https://github.com/asieira/SnakeCharmR) to be compiled under Windows. For
| reference, this is an Rcpp-based packages that links to the system's
| libpython.
|
| I have been able to test it on my box using Windows 10 and several Python
| versions:
|
| * Rtools mingw_64/opt Python 2.7.9;
| * python.org 2.7.13 64-bit;
| * python.org 3.6.1 64-bit;
| * python.org 2.7.x 32-bit on Appveyor (
| https://ci.appveyor.com/project/asieira/SnakeCharmR).
|
| Still, when I submit my source package to win-builder I get an error:
| https://win-builder.r-project.org/9aqdlW0D6e3m/
|
| https://win-builder.r-project.org/9aqdlW0D6e3m/00install.out shows some
| warnings on header files that are outside of my control, but ends with a
| successful compilation. However, it compiles only the 64-bit version of
the
| DLL and gives me this warning:
|
| Warning: this package has a non-empty 'configure.win' file,
| so building only the main architecture
|
|
| Finally, when we look at
| https://win-builder.r-project.org/9aqdlW0D6e3m/00check.log we see an
error
| due to the fact that the package can?t be tested on i386:
|
| ** checking whether the package can be loaded ... ERROR
| Loading this package had a fatal error status code 1
| Loading log:
| Error: package 'SnakeCharmR' is not installed for 'arch = i386'
| Execution halted
| ** DONE
| Status: 1 ERROR, 1 NOTE
|
|
| I apologize if this is a beginner?s problem, but this is my first R
package
| ever and I?m not really used to working with R on Windows. Would
appreciate
| any guidance and pointers on how to address this and get the package to
| pass the necessary CRAN automated tests.

I tried to make Python and R co-exist at some point; my conclusion was
there
aren't enough days in the week to figure out how to do it on Windows. It's
easy to do on Linux, and I don't personally have OS X / macOS use cases but
here it's feasible if you're careful about your toolchain.

I think you should just consider 'OS_type: unix' in your DESCRIPTION. A
working and uploaded package on two OSs beats an "almost there but never
finished" package on three in my book.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

	[[alternative HTML version deleted]]


From alexandre.sieira at gmail.com  Fri Apr  7 14:58:16 2017
From: alexandre.sieira at gmail.com (Alexandre Sieira)
Date: Fri, 7 Apr 2017 08:58:16 -0400
Subject: [R-pkg-devel] Help with Windows build failure
In-Reply-To: <CAL_X237KR3RpCaeP-+Dobzy0OjT3NigcOgUykffQTJt=hRFUfw@mail.gmail.com>
References: <CAL_X2361B8W3B0EPh-NuAJjJE8rFcDLwv+ZZSh5pZ5=4tYzG=Q@mail.gmail.com>
 <22758.59797.40233.725087@max.eddelbuettel.com>
 <CAL_X237KR3RpCaeP-+Dobzy0OjT3NigcOgUykffQTJt=hRFUfw@mail.gmail.com>
Message-ID: <CAL_X234o0ZZ1MwzrUPcf8aZ7KwV4HWYX45qFTTmY0wT95jxzKA@mail.gmail.com>

So actually 'Biarch: false? didn?t help at all, same problem:
https://win-builder.r-project.org/KhXyGby5Yhjm/

Does anyone know if the win builder machines have both 32-bit and 64-bit
Python installed and in the PATH?

-- 
Alexandre Sieira
CISA, CISSP, ISO 27001 Lead Auditor

"The truth is rarely pure and never simple."
Oscar Wilde, The Importance of Being Earnest, 1895, Act I

On 7 April 2017 at 09:28:19, Alexandre Sieira (alexandre.sieira at gmail.com)
wrote:

Hi, Dirk.

Thank you for responding.

I do sympathize with your frustrations, due to the exact complexity you are
mentioning and also my ignorance on how R packages compile on Windows, I
had SnakeCharmR signal ?OS_type: Unix? for the longest time.

The thing is that AFAIK this works on Windows now, both with the python.org and
Rtools mingw Python distributions. The challenge now is figuring out the
best to get this into CRAN as a Windows package as well. Challenge #1:
getting past the win builder pre-check. :)

I was reading some other posts on this list and maybe setting ?Biarch:
false? could help? I?ll try that next.

-- 
Alexandre Sieira
CISA, CISSP, ISO 27001 Lead Auditor

"The truth is rarely pure and never simple."
Oscar Wilde, The Importance of Being Earnest, 1895, Act I

On 6 April 2017 at 22:21:27, Dirk Eddelbuettel (edd at debian.org) wrote:


On 2 April 2017 at 17:21, Alexandre Sieira wrote:
| Hi, everyone.
|
| I have done some work this weekend to allow the SnakeCharmR package (
| https://github.com/asieira/SnakeCharmR) to be compiled under Windows. For
| reference, this is an Rcpp-based packages that links to the system's
| libpython.
|
| I have been able to test it on my box using Windows 10 and several Python
| versions:
|
| * Rtools mingw_64/opt Python 2.7.9;
| * python.org 2.7.13 64-bit;
| * python.org 3.6.1 64-bit;
| * python.org 2.7.x 32-bit on Appveyor (
| https://ci.appveyor.com/project/asieira/SnakeCharmR).
|
| Still, when I submit my source package to win-builder I get an error:
| https://win-builder.r-project.org/9aqdlW0D6e3m/
|
| https://win-builder.r-project.org/9aqdlW0D6e3m/00install.out shows some
| warnings on header files that are outside of my control, but ends with a
| successful compilation. However, it compiles only the 64-bit version of
the
| DLL and gives me this warning:
|
| Warning: this package has a non-empty 'configure.win' file,
| so building only the main architecture
|
|
| Finally, when we look at
| https://win-builder.r-project.org/9aqdlW0D6e3m/00check.log we see an error
| due to the fact that the package can?t be tested on i386:
|
| ** checking whether the package can be loaded ... ERROR
| Loading this package had a fatal error status code 1
| Loading log:
| Error: package 'SnakeCharmR' is not installed for 'arch = i386'
| Execution halted
| ** DONE
| Status: 1 ERROR, 1 NOTE
|
|
| I apologize if this is a beginner?s problem, but this is my first R
package
| ever and I?m not really used to working with R on Windows. Would
appreciate
| any guidance and pointers on how to address this and get the package to
| pass the necessary CRAN automated tests.

I tried to make Python and R co-exist at some point; my conclusion was there
aren't enough days in the week to figure out how to do it on Windows. It's
easy to do on Linux, and I don't personally have OS X / macOS use cases but
here it's feasible if you're careful about your toolchain.

I think you should just consider 'OS_type: unix' in your DESCRIPTION. A
working and uploaded package on two OSs beats an "almost there but never
finished" package on three in my book.

Dirk

--
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

	[[alternative HTML version deleted]]


From berryboessenkool at hotmail.com  Mon Apr 10 15:57:18 2017
From: berryboessenkool at hotmail.com (Berry Boessenkool)
Date: Mon, 10 Apr 2017 13:57:18 +0000
Subject: [R-pkg-devel] R CMD check not finding my vignettes
In-Reply-To: <677dcfda-4766-a3e2-30a3-9b663084eba2@statistik.tu-dortmund.de>
References: <CAARY7ki02r8gLWJEhvLOm1k5N1VduKpunTBr0WSejfy3671Wjg@mail.gmail.com>
 <CAARY7khMwu1HDpt=Pm4uQkLttG12ocQm8sm9OsVgZZnL=AMKCQ@mail.gmail.com>
 <8088e565-0eea-748a-b5f0-ab72beeb92d7@statistik.tu-dortmund.de>
 <CAARY7kiT=TqskL3ttNGybXxg+uA5o3pu_5ioXs11=DWr5-4Kkw@mail.gmail.com>,
 <677dcfda-4766-a3e2-30a3-9b663084eba2@statistik.tu-dortmund.de>
Message-ID: <DB4PR04MB0832C766F185FDD4141DD4CCD5010@DB4PR04MB0832.eurprd04.prod.outlook.com>


The "missing" files or their directory are not by accident listed in Rbuildignore, right?



________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Uwe Ligges <ligges at statistik.tu-dortmund.de>
Sent: Friday, April 7, 2017 12:20
To: David Hugh-Jones
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] R CMD check not finding my vignettes

Can you send the tarball please, I can take a look,
Uwe


On 07.04.2017 12:09, David Hugh-Jones wrote:
> Hi Uwe,
>
> Indeed yes, but my built tarball has got the files in inst/doc as shown.
> If I then run 'R CMD check' on that tarball, I get the error quoted. Is
> there something happening that I don't understand?
>
> Incidentally, the tarball also has files in the vignettes directory: (a)
> the original .Rmd files and (b) HTML files. My original directory has
> all of Rmd, HTML and PDF files in the vignettes directory, but for some
> reason the PDFs don't get included when the tarball is built.
>
> Cheers,
> David
>
> David
>
> On 7 April 2017 at 07:15, Uwe Ligges <ligges at statistik.tu-dortmund.de
> <mailto:ligges at statistik.tu-dortmund.de>> wrote:
>
>     I do not know devtools, but the vignette sources should be placed in
>     ./vignettes and then R CMD build will put the files into the
>     relevant places automatically.
>
>     Best,
>     Uwe Ligges
>
>
>
>
>
>
>     On 07.04.2017 07:55, David Hugh-Jones wrote:
>
>          Okay, so this got tumbleweeded... so should I file a bug?
>
>         D
>
>         On Thu, 6 Apr 2017 at 15:37, David Hugh-Jones
>         <davidhughjones at gmail.com <mailto:davidhughjones at gmail.com>>
>         wrote:
>
>
>             Before building my package, I manually place both pdf and
>             html versions of
>             my vignettes into inst/doc. I then build the package with
>             `devtools::check`.
>
>             Listing of the resulting tarball:
>
>             -rw-r--r--  0 david  staff    1692  6 Apr 15:10
>             huxtable/inst/doc/design-principles.R
>
>             -rw-r--r--  0 david  staff    6697  6 Apr 15:10
>             huxtable/inst/doc/design-principles.Rmd
>
>             -rw-r--r--  0 david  staff  899765  6 Apr 15:10
>             huxtable/inst/doc/design-principles.html
>
>             -rw-r--r--  0 david  staff  213776  6 Apr 15:10
>             huxtable/inst/doc/design-principles.pdf
>
>             -rw-r--r--  0 david  staff    3009  6 Apr 15:10
>             huxtable/inst/doc/huxreg.R
>
>             -rw-r--r--  0 david  staff    5521  6 Apr 15:10
>             huxtable/inst/doc/huxreg.Rmd
>
>             -rw-r--r--  0 david  staff  940955  6 Apr 15:10
>             huxtable/inst/doc/huxreg.html
>
>             -rw-r--r--  0 david  staff  237771  6 Apr 15:10
>             huxtable/inst/doc/huxreg.pdf
>
>             -rw-r--r--  0 david  staff   10473  6 Apr 15:11
>             huxtable/inst/doc/huxtable.R
>
>             -rw-r--r--  0 david  staff   20552  6 Apr 15:11
>             huxtable/inst/doc/huxtable.Rmd
>
>             -rw-r--r--  0 david  staff  925373  6 Apr 15:11
>             huxtable/inst/doc/huxtable.html
>
>             -rw-r--r--  0 david  staff  284978  6 Apr 15:11
>             huxtable/inst/doc/huxtable.pdf
>
>             However, R CMD check then complains:
>
>             * checking package vignettes in ?inst/doc? ... WARNING
>             Package vignettes without corresponding PDF/HTML:
>                ?design-principles.Rmd?
>                ?huxreg.Rmd?
>                ?huxtable.Rmd?
>
>             What gives?
>
>             Cheers,
>             David
>
>

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From davidhughjones at gmail.com  Mon Apr 10 17:13:32 2017
From: davidhughjones at gmail.com (David Hugh-Jones)
Date: Mon, 10 Apr 2017 16:13:32 +0100
Subject: [R-pkg-devel] R CMD check not finding my vignettes
In-Reply-To: <DB4PR04MB0832C766F185FDD4141DD4CCD5010@DB4PR04MB0832.eurprd04.prod.outlook.com>
References: <CAARY7ki02r8gLWJEhvLOm1k5N1VduKpunTBr0WSejfy3671Wjg@mail.gmail.com>
 <CAARY7khMwu1HDpt=Pm4uQkLttG12ocQm8sm9OsVgZZnL=AMKCQ@mail.gmail.com>
 <8088e565-0eea-748a-b5f0-ab72beeb92d7@statistik.tu-dortmund.de>
 <CAARY7kiT=TqskL3ttNGybXxg+uA5o3pu_5ioXs11=DWr5-4Kkw@mail.gmail.com>
 <677dcfda-4766-a3e2-30a3-9b663084eba2@statistik.tu-dortmund.de>
 <DB4PR04MB0832C766F185FDD4141DD4CCD5010@DB4PR04MB0832.eurprd04.prod.outlook.com>
Message-ID: <CAARY7kiMSxXnh+2TOOV5NxVZX9jx4mFsv=7r2AS4zBpGC3OsRg@mail.gmail.com>

Hi Berry,

Good call, and I would have been very embarrassed if so, but no. Actually,
if they had been, I guess they would not have appeared in the tarball.

Cheers,
David

On 10 April 2017 at 14:57, Berry Boessenkool <berryboessenkool at hotmail.com>
wrote:

>
> The "missing" files or their directory are not by accident listed in
> Rbuildignore, right?
>
>
>
> ________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf
> of Uwe Ligges <ligges at statistik.tu-dortmund.de>
> Sent: Friday, April 7, 2017 12:20
> To: David Hugh-Jones
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] R CMD check not finding my vignettes
>
> Can you send the tarball please, I can take a look,
> Uwe
>
>
> On 07.04.2017 12:09, David Hugh-Jones wrote:
> > Hi Uwe,
> >
> > Indeed yes, but my built tarball has got the files in inst/doc as shown.
> > If I then run 'R CMD check' on that tarball, I get the error quoted. Is
> > there something happening that I don't understand?
> >
> > Incidentally, the tarball also has files in the vignettes directory: (a)
> > the original .Rmd files and (b) HTML files. My original directory has
> > all of Rmd, HTML and PDF files in the vignettes directory, but for some
> > reason the PDFs don't get included when the tarball is built.
> >
> > Cheers,
> > David
> >
> > David
> >
> > On 7 April 2017 at 07:15, Uwe Ligges <ligges at statistik.tu-dortmund.de
> > <mailto:ligges at statistik.tu-dortmund.de>> wrote:
> >
> >     I do not know devtools, but the vignette sources should be placed in
> >     ./vignettes and then R CMD build will put the files into the
> >     relevant places automatically.
> >
> >     Best,
> >     Uwe Ligges
> >
> >
> >
> >
> >
> >
> >     On 07.04.2017 07:55, David Hugh-Jones wrote:
> >
> >          Okay, so this got tumbleweeded... so should I file a bug?
> >
> >         D
> >
> >         On Thu, 6 Apr 2017 at 15:37, David Hugh-Jones
> >         <davidhughjones at gmail.com <mailto:davidhughjones at gmail.com>>
> >         wrote:
> >
> >
> >             Before building my package, I manually place both pdf and
> >             html versions of
> >             my vignettes into inst/doc. I then build the package with
> >             `devtools::check`.
> >
> >             Listing of the resulting tarball:
> >
> >             -rw-r--r--  0 david  staff    1692  6 Apr 15:10
> >             huxtable/inst/doc/design-principles.R
> >
> >             -rw-r--r--  0 david  staff    6697  6 Apr 15:10
> >             huxtable/inst/doc/design-principles.Rmd
> >
> >             -rw-r--r--  0 david  staff  899765  6 Apr 15:10
> >             huxtable/inst/doc/design-principles.html
> >
> >             -rw-r--r--  0 david  staff  213776  6 Apr 15:10
> >             huxtable/inst/doc/design-principles.pdf
> >
> >             -rw-r--r--  0 david  staff    3009  6 Apr 15:10
> >             huxtable/inst/doc/huxreg.R
> >
> >             -rw-r--r--  0 david  staff    5521  6 Apr 15:10
> >             huxtable/inst/doc/huxreg.Rmd
> >
> >             -rw-r--r--  0 david  staff  940955  6 Apr 15:10
> >             huxtable/inst/doc/huxreg.html
> >
> >             -rw-r--r--  0 david  staff  237771  6 Apr 15:10
> >             huxtable/inst/doc/huxreg.pdf
> >
> >             -rw-r--r--  0 david  staff   10473  6 Apr 15:11
> >             huxtable/inst/doc/huxtable.R
> >
> >             -rw-r--r--  0 david  staff   20552  6 Apr 15:11
> >             huxtable/inst/doc/huxtable.Rmd
> >
> >             -rw-r--r--  0 david  staff  925373  6 Apr 15:11
> >             huxtable/inst/doc/huxtable.html
> >
> >             -rw-r--r--  0 david  staff  284978  6 Apr 15:11
> >             huxtable/inst/doc/huxtable.pdf
> >
> >             However, R CMD check then complains:
> >
> >             * checking package vignettes in ?inst/doc? ... WARNING
> >             Package vignettes without corresponding PDF/HTML:
> >                ?design-principles.Rmd?
> >                ?huxreg.Rmd?
> >                ?huxtable.Rmd?
> >
> >             What gives?
> >
> >             Cheers,
> >             David
> >
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From josh.m.ulrich at gmail.com  Mon Apr 10 23:36:32 2017
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 10 Apr 2017 16:36:32 -0500
Subject: [R-pkg-devel] Need to call strptime() with specific LC_TIME
Message-ID: <CAPPM_gTGpXM44oiZqVDAA_ci6AJxu+220_80j1ibD7L3MA0ukQ@mail.gmail.com>

Hi,

I'm looking for any guidance/best-practices about how to deal with an
issue a quantmod user ran into an issue when calling
getSymbols.google():
https://github.com/joshuaulrich/quantmod/issues/140

Google provides a CSV where the dates are specified using English
month abbreviations.  Converting the characters to Date does not work
in any locale that doesn't use those abbreviations.

So I need to call strptime() in a locale that uses English month
abbreviations.  Is there a better solution than this?

lc_time <- Sys.getlocale("LC_TIME")
Sys.setlocale(category = "LC_TIME", locale = "C")
on.exit(Sys.setlocale(category = "LC_TIME", locale = lc_time)

Thanks!

-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com
R/Finance 2017 | www.rinfinance.com


From vineethawarriyar.kod at ucalgary.ca  Thu Apr 13 17:14:30 2017
From: vineethawarriyar.kod at ucalgary.ca (Vineetha Warriyar Kodalore Vijayan)
Date: Thu, 13 Apr 2017 15:14:30 +0000
Subject: [R-pkg-devel] Package Submission: issues with  R_registerRoutines',
 'R_useDynamicSymbols'
Message-ID: <CY4PR01MB250402084595F8B6DB09E19297020@CY4PR01MB2504.prod.exchangelabs.com>


Hi,


When I submitted my R package to CRAN, it didn't go through the automatic incoming check, resulting the following NOTE.  I tested on my macOS with R CMD CHECK and R CMD --as-cran, both went through with one NOTE ( Maintainer: NOTE).

* checking compiled code ... NOTE
File 'EpiILM/libs/i386/EpiILM.dll':
  Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
File 'EpiILM/libs/x64/EpiILM.dll':
  Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'

It is good practice to register native routines and to disable symbol
search.

See 'Writing portable packages' in the 'Writing R Extensions' manual.

I did go through the manual (section 5.4), but didn't understand much. Can someone help to resolve this issue?


Thanks,

Vineetha


	[[alternative HTML version deleted]]


From rubak at math.aau.dk  Thu Apr 13 17:35:36 2017
From: rubak at math.aau.dk (Ege Rubak)
Date: Thu, 13 Apr 2017 23:35:36 +0800
Subject: [R-pkg-devel] Package Submission: issues with
 R_registerRoutines', 'R_useDynamicSymbols'
In-Reply-To: <CY4PR01MB250402084595F8B6DB09E19297020@CY4PR01MB2504.prod.exchangelabs.com>
References: <CY4PR01MB250402084595F8B6DB09E19297020@CY4PR01MB2504.prod.exchangelabs.com>
Message-ID: <4cb6ef29-8ba9-b8bb-a6f4-ea1089afbec7@math.aau.dk>

Hi,

This is something that has gotten quite a bit of attention recently due 
to the coming R 3.4 giving a NOTE when routines aren't declared. You 
should be able to find info on this list or elsewhere.
Basically you need to make a file called e.g. init.c in your src/ with 
the appropriate code. This file can be auto-generated for you as 
described by Dirk here:
http://dirk.eddelbuettel.com/blog/2017/03/30/#002_even_easier_package_registration

Good luck!

Ege

On 04/13/2017 11:14 PM, Vineetha Warriyar Kodalore Vijayan wrote:
>
> Hi,
>
>
> When I submitted my R package to CRAN, it didn't go through the automatic incoming check, resulting the following NOTE.  I tested on my macOS with R CMD CHECK and R CMD --as-cran, both went through with one NOTE ( Maintainer: NOTE).
>
> * checking compiled code ... NOTE
> File 'EpiILM/libs/i386/EpiILM.dll':
>   Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
> File 'EpiILM/libs/x64/EpiILM.dll':
>   Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
>
> It is good practice to register native routines and to disable symbol
> search.
>
> See 'Writing portable packages' in the 'Writing R Extensions' manual.
>
> I did go through the manual (section 5.4), but didn't understand much. Can someone help to resolve this issue?
>
>
> Thanks,
>
> Vineetha
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From vineethawarriyar.kod at ucalgary.ca  Thu Apr 13 18:41:13 2017
From: vineethawarriyar.kod at ucalgary.ca (Vineetha Warriyar Kodalore Vijayan)
Date: Thu, 13 Apr 2017 16:41:13 +0000
Subject: [R-pkg-devel] Package Submission: issues with
 R_registerRoutines', 'R_useDynamicSymbols'
In-Reply-To: <4cb6ef29-8ba9-b8bb-a6f4-ea1089afbec7@math.aau.dk>
References: <CY4PR01MB250402084595F8B6DB09E19297020@CY4PR01MB2504.prod.exchangelabs.com>,
 <4cb6ef29-8ba9-b8bb-a6f4-ea1089afbec7@math.aau.dk>
Message-ID: <CY4PR01MB2504B85928C95EDF67FC53DF97020@CY4PR01MB2504.prod.exchangelabs.com>

Hi Ege,


Thank you!

In the init.c file,  do I have to change 'void' to corresponding declaration?

E.g:

extern void F77_NAME(datacon)(void *, void *, void *, void *, void *, void *, void *, void *, void *, void *, void *);


Also, how do I know the package passes the CRAN incoming feasibility as it does not show any warnings or notes on my R CMD CHECK --as-cran. Re submit and see again?


Regards,

Vineetha Warriyar

________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Ege Rubak <rubak at math.aau.dk>
Sent: Thursday, April 13, 2017 9:35:36 AM
To: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Package Submission: issues with R_registerRoutines', 'R_useDynamicSymbols'

Hi,

This is something that has gotten quite a bit of attention recently due
to the coming R 3.4 giving a NOTE when routines aren't declared. You
should be able to find info on this list or elsewhere.
Basically you need to make a file called e.g. init.c in your src/ with
the appropriate code. This file can be auto-generated for you as
described by Dirk here:
http://dirk.eddelbuettel.com/blog/2017/03/30/#002_even_easier_package_registration

Good luck!

Ege

On 04/13/2017 11:14 PM, Vineetha Warriyar Kodalore Vijayan wrote:
>
> Hi,
>
>
> When I submitted my R package to CRAN, it didn't go through the automatic incoming check, resulting the following NOTE.  I tested on my macOS with R CMD CHECK and R CMD --as-cran, both went through with one NOTE ( Maintainer: NOTE).
>
> * checking compiled code ... NOTE
> File 'EpiILM/libs/i386/EpiILM.dll':
>   Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
> File 'EpiILM/libs/x64/EpiILM.dll':
>   Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
>
> It is good practice to register native routines and to disable symbol
> search.
>
> See 'Writing portable packages' in the 'Writing R Extensions' manual.
>
> I did go through the manual (section 5.4), but didn't understand much. Can someone help to resolve this issue?
>
>
> Thanks,
>
> Vineetha
>
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From rubak at math.aau.dk  Thu Apr 13 19:04:20 2017
From: rubak at math.aau.dk (Ege Rubak)
Date: Fri, 14 Apr 2017 01:04:20 +0800
Subject: [R-pkg-devel] Package Submission: issues with
 R_registerRoutines', 'R_useDynamicSymbols'
In-Reply-To: <3017B2D8-A13F-4AEC-82B4-3B8267EFA854@gmail.com>
References: <CY4PR01MB250402084595F8B6DB09E19297020@CY4PR01MB2504.prod.exchangelabs.com>
 <4cb6ef29-8ba9-b8bb-a6f4-ea1089afbec7@math.aau.dk>
 <CY4PR01MB2504B85928C95EDF67FC53DF97020@CY4PR01MB2504.prod.exchangelabs.com>
 <3017B2D8-A13F-4AEC-82B4-3B8267EFA854@gmail.com>
Message-ID: <4911eac6-05d1-d499-7976-054e00f5c53e@math.aau.dk>

Hi,

A few extra comments are below.

On 04/14/2017 12:46 AM, Zhian Kamvar wrote:
> Hi,
>
>> On Apr 13, 2017, at 11:41 , Vineetha Warriyar Kodalore Vijayan
>> <vineethawarriyar.kod at ucalgary.ca
>> <mailto:vineethawarriyar.kod at ucalgary.ca>> wrote:
>>
>> Hi Ege,
>>
>>
>> Thank you!
>>
>> In the init.c file,  do I have to change 'void' to corresponding
>> declaration?
>>
>> E.g:
>>
>> extern void F77_NAME(datacon)(void *, void *, void *, void *, void *,
>> void *, void *, void *, void *, void *, void *);
>>
I don't think you need to change anything in the generated file. At 
least I didn't, and I believe Brian Ripley mentioned that the script 
generated fully working init files for hundreds or thousands of packages 
with compiled code and only needed manual changes for tens of packages 
when they tested it on CRAN.
>>
>> Also, how do I know the package passes the CRAN incoming feasibility
>> as it does not show any warnings or notes on my R CMD CHECK --as-cran.
>> Re submit and see again?
>>
>
> You can use R-Hub as a way to check your package on the development
> version: https://github.com/r-hub/rhub#readme If you have your package
> on a public remote git repository, you can additionally set up a
> continuous integration service like
> travis-ci: https://docs.travis-ci.com/user/languages/r/ and use that to
> check against devel.
>
I agree that R-Hub is a great solution, and I have used it several times 
myself. You can even just use the website to submit a package:
https://builder.r-hub.io/advanced
But the R interface is nice, so it is recommendable to install the rhub 
package.
Alternatively, submitting to http://win-builder.r-project.org/ also lets 
you test under R-devel.

Best,
Ege

> Best,
> Zhian
>
>>
>> Regards,
>>
>> Vineetha Warriyar
>>
>> ________________________________
>> From: R-package-devel <r-package-devel-bounces at r-project.org
>> <mailto:r-package-devel-bounces at r-project.org>> on behalf of Ege Rubak
>> <rubak at math.aau.dk <mailto:rubak at math.aau.dk>>
>> Sent: Thursday, April 13, 2017 9:35:36 AM
>> To: r-package-devel at r-project.org <mailto:r-package-devel at r-project.org>
>> Subject: Re: [R-pkg-devel] Package Submission: issues with
>> R_registerRoutines', 'R_useDynamicSymbols'
>>
>> Hi,
>>
>> This is something that has gotten quite a bit of attention recently due
>> to the coming R 3.4 giving a NOTE when routines aren't declared. You
>> should be able to find info on this list or elsewhere.
>> Basically you need to make a file called e.g. init.c in your src/ with
>> the appropriate code. This file can be auto-generated for you as
>> described by Dirk here:
>> http://dirk.eddelbuettel.com/blog/2017/03/30/#002_even_easier_package_registration
>>
>> Good luck!
>>
>> Ege
>>
>> On 04/13/2017 11:14 PM, Vineetha Warriyar Kodalore Vijayan wrote:
>>>
>>> Hi,
>>>
>>>
>>> When I submitted my R package to CRAN, it didn't go through the
>>> automatic incoming check, resulting the following NOTE.  I tested on
>>> my macOS with R CMD CHECK and R CMD --as-cran, both went through with
>>> one NOTE ( Maintainer: NOTE).
>>>
>>> * checking compiled code ... NOTE
>>> File 'EpiILM/libs/i386/EpiILM.dll':
>>>  Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
>>> File 'EpiILM/libs/x64/EpiILM.dll':
>>>  Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
>>>
>>> It is good practice to register native routines and to disable symbol
>>> search.
>>>
>>> See 'Writing portable packages' in the 'Writing R Extensions' manual.
>>>
>>> I did go through the manual (section 5.4), but didn't understand
>>> much. Can someone help to resolve this issue?
>>>
>>>
>>> Thanks,
>>>
>>> Vineetha
>>>
>>>
>>>       [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From vineethawarriyar.kod at ucalgary.ca  Thu Apr 13 19:52:57 2017
From: vineethawarriyar.kod at ucalgary.ca (Vineetha Warriyar Kodalore Vijayan)
Date: Thu, 13 Apr 2017 17:52:57 +0000
Subject: [R-pkg-devel] Package Submission: issues with
 R_registerRoutines', 'R_useDynamicSymbols'
In-Reply-To: <4911eac6-05d1-d499-7976-054e00f5c53e@math.aau.dk>
References: <CY4PR01MB250402084595F8B6DB09E19297020@CY4PR01MB2504.prod.exchangelabs.com>
 <4cb6ef29-8ba9-b8bb-a6f4-ea1089afbec7@math.aau.dk>
 <CY4PR01MB2504B85928C95EDF67FC53DF97020@CY4PR01MB2504.prod.exchangelabs.com>
 <3017B2D8-A13F-4AEC-82B4-3B8267EFA854@gmail.com>,
 <4911eac6-05d1-d499-7976-054e00f5c53e@math.aau.dk>
Message-ID: <CY4PR01MB25043469F1AB7441DE8602FF97020@CY4PR01MB2504.prod.exchangelabs.com>

Thanks everyone!


-Vineetha

________________________________
From: Ege Rubak <rubak at math.aau.dk>
Sent: Thursday, April 13, 2017 11:04:20 AM
To: Zhian Kamvar; Vineetha Warriyar Kodalore Vijayan
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Package Submission: issues with R_registerRoutines', 'R_useDynamicSymbols'

Hi,

A few extra comments are below.

On 04/14/2017 12:46 AM, Zhian Kamvar wrote:
> Hi,
>
>> On Apr 13, 2017, at 11:41 , Vineetha Warriyar Kodalore Vijayan
>> <vineethawarriyar.kod at ucalgary.ca
>> <mailto:vineethawarriyar.kod at ucalgary.ca>> wrote:
>>
>> Hi Ege,
>>
>>
>> Thank you!
>>
>> In the init.c file,  do I have to change 'void' to corresponding
>> declaration?
>>
>> E.g:
>>
>> extern void F77_NAME(datacon)(void *, void *, void *, void *, void *,
>> void *, void *, void *, void *, void *, void *);
>>
I don't think you need to change anything in the generated file. At
least I didn't, and I believe Brian Ripley mentioned that the script
generated fully working init files for hundreds or thousands of packages
with compiled code and only needed manual changes for tens of packages
when they tested it on CRAN.
>>
>> Also, how do I know the package passes the CRAN incoming feasibility
>> as it does not show any warnings or notes on my R CMD CHECK --as-cran.
>> Re submit and see again?
>>
>
> You can use R-Hub as a way to check your package on the development
> version: https://github.com/r-hub/rhub#readme If you have your package
> on a public remote git repository, you can additionally set up a
> continuous integration service like
> travis-ci: https://docs.travis-ci.com/user/languages/r/ and use that to
> check against devel.
>
I agree that R-Hub is a great solution, and I have used it several times
myself. You can even just use the website to submit a package:
https://builder.r-hub.io/advanced
But the R interface is nice, so it is recommendable to install the rhub
package.
Alternatively, submitting to http://win-builder.r-project.org/ also lets
you test under R-devel.

Best,
Ege

> Best,
> Zhian
>
>>
>> Regards,
>>
>> Vineetha Warriyar
>>
>> ________________________________
>> From: R-package-devel <r-package-devel-bounces at r-project.org
>> <mailto:r-package-devel-bounces at r-project.org>> on behalf of Ege Rubak
>> <rubak at math.aau.dk <mailto:rubak at math.aau.dk>>
>> Sent: Thursday, April 13, 2017 9:35:36 AM
>> To: r-package-devel at r-project.org <mailto:r-package-devel at r-project.org>
>> Subject: Re: [R-pkg-devel] Package Submission: issues with
>> R_registerRoutines', 'R_useDynamicSymbols'
>>
>> Hi,
>>
>> This is something that has gotten quite a bit of attention recently due
>> to the coming R 3.4 giving a NOTE when routines aren't declared. You
>> should be able to find info on this list or elsewhere.
>> Basically you need to make a file called e.g. init.c in your src/ with
>> the appropriate code. This file can be auto-generated for you as
>> described by Dirk here:
>> http://dirk.eddelbuettel.com/blog/2017/03/30/#002_even_easier_package_registration
>>
>> Good luck!
>>
>> Ege
>>
>> On 04/13/2017 11:14 PM, Vineetha Warriyar Kodalore Vijayan wrote:
>>>
>>> Hi,
>>>
>>>
>>> When I submitted my R package to CRAN, it didn't go through the
>>> automatic incoming check, resulting the following NOTE.  I tested on
>>> my macOS with R CMD CHECK and R CMD --as-cran, both went through with
>>> one NOTE ( Maintainer: NOTE).
>>>
>>> * checking compiled code ... NOTE
>>> File 'EpiILM/libs/i386/EpiILM.dll':
>>>  Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
>>> File 'EpiILM/libs/x64/EpiILM.dll':
>>>  Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
>>>
>>> It is good practice to register native routines and to disable symbol
>>> search.
>>>
>>> See 'Writing portable packages' in the 'Writing R Extensions' manual.
>>>
>>> I did go through the manual (section 5.4), but didn't understand
>>> much. Can someone help to resolve this issue?
>>>
>>>
>>> Thanks,
>>>
>>> Vineetha
>>>
>>>
>>>       [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From tkeitt at utexas.edu  Thu Apr 13 20:00:35 2017
From: tkeitt at utexas.edu (Tim Keitt)
Date: Thu, 13 Apr 2017 13:00:35 -0500
Subject: [R-pkg-devel] Package Submission: issues with
 R_registerRoutines', 'R_useDynamicSymbols'
In-Reply-To: <CY4PR01MB250402084595F8B6DB09E19297020@CY4PR01MB2504.prod.exchangelabs.com>
References: <CY4PR01MB250402084595F8B6DB09E19297020@CY4PR01MB2504.prod.exchangelabs.com>
Message-ID: <CANnL8gocoTnFnmWUkYwNOhYzSkrhz98wAtoFJMRr8cKfApYtvw@mail.gmail.com>

On Thu, Apr 13, 2017 at 10:14 AM, Vineetha Warriyar Kodalore Vijayan <
vineethawarriyar.kod at ucalgary.ca> wrote:

> Can someone help to resolve this issue?


I wrote a short R script that will read your RcppExports.cpp and emit the
corresponding init.c file. I call it from my configure script, but if your
code does not change, then you can just call it once (in your package
directory) and be done with it.

The R script is here:
https://github.com/thk686/rpg/blob/master/src/gen_init_c.R

THK

http://www.keittlab.org/

	[[alternative HTML version deleted]]


From xqiu at uw.edu  Fri Apr 14 03:49:13 2017
From: xqiu at uw.edu (Xiaojie Qiu)
Date: Fri, 14 Apr 2017 01:49:13 +0000
Subject: [R-pkg-devel] Warning of DDRTree
Message-ID: <CANdCydepa3UA3Qj4B0tWc0zpc+7d6t=D6-j9Q71YUgSW9jOy4g@mail.gmail.com>

We are planning to update the DDRTree package but found the following
warnings:

  d:/RCompile/CRANpkg/lib/3.4/BH/include/boost/unordered/detail/buckets.hpp:586:29:
warning: ISO C++ 1998 does not support 'long long' [-Wlong-long]
  d:/RCompile/CRANpkg/lib/3.4/BH/include/boost/unordered/detail/buckets.hpp:591:38:
warning: ISO C++ 1998 does not support 'long long' [-Wlong-long]

 Those warnings seem to relate to boost but not to our package. Can anyone
have some idea on how to fix this?
The check log is here:
https://win-builder.r-project.org/incoming_pretest/170414_025235_DDRTree_015/00check.log
The windows install log is here:
https://win-builder.r-project.org/incoming_pretest/170414_025235_DDRTree_015/00install.out

Thanks in advance!

Best,
Xiaojie

	[[alternative HTML version deleted]]


From kevinushey at gmail.com  Fri Apr 14 04:36:57 2017
From: kevinushey at gmail.com (Kevin Ushey)
Date: Thu, 13 Apr 2017 19:36:57 -0700
Subject: [R-pkg-devel] Warning of DDRTree
In-Reply-To: <CANdCydepa3UA3Qj4B0tWc0zpc+7d6t=D6-j9Q71YUgSW9jOy4g@mail.gmail.com>
References: <CANdCydepa3UA3Qj4B0tWc0zpc+7d6t=D6-j9Q71YUgSW9jOy4g@mail.gmail.com>
Message-ID: <CAJXgQP0ErvZA-w+kXn0teWNLUSe5GmxgADO=WmUXWCsgDcRwcw@mail.gmail.com>

You can try placing this in your src/Makevars[.win] file:

    CXXFLAGS = -DBOOST_NO_LONG_LONG

The dplyr package does this (and more) to avoid 'long long' leaking in
from Boost headers. See e.g.

https://github.com/tidyverse/dplyr/blob/ff719f53f88f2f03a298fa0ea489b902527ee2f1/src/Makevars#L2

The other alternative would be to just enforce the use of C++11 in
your package, by adding e.g.

    SystemRequirements: C++11

to your DESCRIPTION file, or

    CXX_STD = CXX11

to your src/Makevars[.win]. See
https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Using-C_002b_002b11-code
for more information.

Best,
Kevin

On Thu, Apr 13, 2017 at 6:49 PM, Xiaojie Qiu <xqiu at uw.edu> wrote:
>
> We are planning to update the DDRTree package but found the following
> warnings:
>
>   d:/RCompile/CRANpkg/lib/3.4/BH/include/boost/unordered/detail/buckets.hpp:586:29:
> warning: ISO C++ 1998 does not support 'long long' [-Wlong-long]
>   d:/RCompile/CRANpkg/lib/3.4/BH/include/boost/unordered/detail/buckets.hpp:591:38:
> warning: ISO C++ 1998 does not support 'long long' [-Wlong-long]
>
>  Those warnings seem to relate to boost but not to our package. Can anyone
> have some idea on how to fix this?
> The check log is here:
> https://win-builder.r-project.org/incoming_pretest/170414_025235_DDRTree_015/00check.log
> The windows install log is here:
> https://win-builder.r-project.org/incoming_pretest/170414_025235_DDRTree_015/00install.out
>
> Thanks in advance!
>
> Best,
> Xiaojie
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd at debian.org  Fri Apr 14 04:40:19 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 13 Apr 2017 21:40:19 -0500
Subject: [R-pkg-devel] Warning of DDRTree
In-Reply-To: <CANdCydepa3UA3Qj4B0tWc0zpc+7d6t=D6-j9Q71YUgSW9jOy4g@mail.gmail.com>
References: <CANdCydepa3UA3Qj4B0tWc0zpc+7d6t=D6-j9Q71YUgSW9jOy4g@mail.gmail.com>
Message-ID: <22768.13971.373664.374548@max.eddelbuettel.com>


On 14 April 2017 at 01:49, Xiaojie Qiu wrote:
| We are planning to update the DDRTree package but found the following
| warnings:
| 
|   d:/RCompile/CRANpkg/lib/3.4/BH/include/boost/unordered/detail/buckets.hpp:586:29:
| warning: ISO C++ 1998 does not support 'long long' [-Wlong-long]
|   d:/RCompile/CRANpkg/lib/3.4/BH/include/boost/unordered/detail/buckets.hpp:591:38:
| warning: ISO C++ 1998 does not support 'long long' [-Wlong-long]
| 
|  Those warnings seem to relate to boost but not to our package. Can anyone
| have some idea on how to fix this?

Yes. Compile the program as a C++11 program.

My favourite way of saying that is via

   CXX_STD = CXX11

in src/Makevars. Now that all core systems (Win, OS X, Linux) used with R
have proper C++11 compiler support this is no longer an issue.

[ The underlying issue is boring. The powers that be decided a long time ago
that only C++98 was real C++ in the context of R. And that old standard has
no 'long long', hence the issue. Ironically, intermediate standards added
long long but we were not aloud to play with it because someone else knew
what's best for us. Luckily this is a thing of the past. ]

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From Jens.Oehlschlaegel at truecluster.com  Fri Apr 14 18:02:50 2017
From: Jens.Oehlschlaegel at truecluster.com (=?UTF-8?Q?Jens_Oehlschl=c3=a4gel?=)
Date: Fri, 14 Apr 2017 18:02:50 +0200
Subject: [R-pkg-devel] Fwd: CRAN packages maintained by you
In-Reply-To: <22740.258.225633.517269@hornik.net>
References: <22740.258.225633.517269@hornik.net>
Message-ID: <7f6b0909-28c6-abf0-e819-ffc072c46d2b@truecluster.com>

Hi, I was asked by CRAN-maintainers to provide two versions of 
median.integer64, one with and one without a dots-argument.

However, doing so results in a code-documentation mismatch, because I have

\method{median}{integer64}(x, na.rm = FALSE)

and now also need

\method{median}{integer64}(x, na.rm = FALSE, \dots)

but selecting between both using \Sexpr{} seems not to be allowed in a 
Rd-usage-section.

Anyone knows the proper way to do this?


Jens Oehlschl?gel



-------- Forwarded Message --------
Subject: 	CRAN packages maintained by you
Date: 	Thu, 23 Mar 2017 18:08:18 +0100
From: 	Kurt Hornik <Kurt.Hornik at wu.ac.at>
Reply-To: 	CRAN at R-project.org
To: 	achim.zeileis at r-project.org, andri at signorell.net, claudio at unive.it, 
edzer.pebesma at uni-muenster.de, j.curran at auckland.ac.nz, 
jens.oehlschlaegel at truecluster.com, jouni at kerman.com, mx.herve at gmail.com
CC: 	CRAN at R-project.org



Dear maintainers,

This concerns the CRAN packages

   Bolstad DescTools RVAideMemoire bit64 circular rv units zoo

maintained by one of you:

   Achim Zeileis <Achim.Zeileis at R-project.org>: zoo
   Andri Signorell <andri at signorell.net>: DescTools
   Claudio Agostinelli <claudio at unive.it>: circular
   Edzer Pebesma <edzer.pebesma at uni-muenster.de>: units
   James Curran <j.curran at auckland.ac.nz>: Bolstad
   Jens Oehlschl?gel <Jens.Oehlschlaegel at truecluster.com>: bit64
   Jouni Kerman <jouni at kerman.com>: rv
   Maxime Herv? <mx.herve at gmail.com>: RVAideMemoire

You may already have noticed that under r-devel these have given
warnings like

* checking S3 generic/method consistency ... WARNING
median:
   function(x, na.rm, ...)
median.Bolstad:
   function(x, na.rm)

for some time now, following

      \item \code{median()} gains a formal \code{\dots} argument, so
       methods with extra arguments can be provided.

Could you please update your package code to eliminate these warnings,
ideally as quickly as possible?

In one package co-developed by me, I went for

if(is.na(match("...", names(formals(median))))) {
     median.tuple <- function(x, na.rm = FALSE) {
         x <- as.numeric(x)
         NextMethod()
     }
} else {
     median.tuple <- function(x, na.rm = FALSE, ...) {
         x <- as.numeric(x)
         NextMethod()
     }
}

which may be the "simplest" way forward ...

Best
-k


	[[alternative HTML version deleted]]


From rubak at math.aau.dk  Fri Apr 14 18:15:59 2017
From: rubak at math.aau.dk (Ege Rubak)
Date: Sat, 15 Apr 2017 00:15:59 +0800
Subject: [R-pkg-devel] Fwd: CRAN packages maintained by you
In-Reply-To: <7f6b0909-28c6-abf0-e819-ffc072c46d2b@truecluster.com>
References: <22740.258.225633.517269@hornik.net>
 <7f6b0909-28c6-abf0-e819-ffc072c46d2b@truecluster.com>
Message-ID: <e94ca053-430a-52d3-e67b-33ed9c39b04c@math.aau.dk>

Hi,
We had this issue with `median.im` in spatstat. I wasn't involved in 
fixing it, but maintainer Adrian Baddeley changed the documentation 
according to CRAN instructions. You can see it here:
https://github.com/spatstat/spatstat/blob/master/man/mean.im.Rd
Maybe you can use that for inspiration...
Cheers,
Ege

On 04/15/2017 12:02 AM, Jens Oehlschl?gel wrote:
> Hi, I was asked by CRAN-maintainers to provide two versions of
> median.integer64, one with and one without a dots-argument.
>
> However, doing so results in a code-documentation mismatch, because I have
>
> \method{median}{integer64}(x, na.rm = FALSE)
>
> and now also need
>
> \method{median}{integer64}(x, na.rm = FALSE, \dots)
>
> but selecting between both using \Sexpr{} seems not to be allowed in a
> Rd-usage-section.
>
> Anyone knows the proper way to do this?
>
>
> Jens Oehlschl?gel
>
>
>
> -------- Forwarded Message --------
> Subject: 	CRAN packages maintained by you
> Date: 	Thu, 23 Mar 2017 18:08:18 +0100
> From: 	Kurt Hornik <Kurt.Hornik at wu.ac.at>
> Reply-To: 	CRAN at R-project.org
> To: 	achim.zeileis at r-project.org, andri at signorell.net, claudio at unive.it,
> edzer.pebesma at uni-muenster.de, j.curran at auckland.ac.nz,
> jens.oehlschlaegel at truecluster.com, jouni at kerman.com, mx.herve at gmail.com
> CC: 	CRAN at R-project.org
>
>
>
> Dear maintainers,
>
> This concerns the CRAN packages
>
>    Bolstad DescTools RVAideMemoire bit64 circular rv units zoo
>
> maintained by one of you:
>
>    Achim Zeileis <Achim.Zeileis at R-project.org>: zoo
>    Andri Signorell <andri at signorell.net>: DescTools
>    Claudio Agostinelli <claudio at unive.it>: circular
>    Edzer Pebesma <edzer.pebesma at uni-muenster.de>: units
>    James Curran <j.curran at auckland.ac.nz>: Bolstad
>    Jens Oehlschl?gel <Jens.Oehlschlaegel at truecluster.com>: bit64
>    Jouni Kerman <jouni at kerman.com>: rv
>    Maxime Herv? <mx.herve at gmail.com>: RVAideMemoire
>
> You may already have noticed that under r-devel these have given
> warnings like
>
> * checking S3 generic/method consistency ... WARNING
> median:
>    function(x, na.rm, ...)
> median.Bolstad:
>    function(x, na.rm)
>
> for some time now, following
>
>       \item \code{median()} gains a formal \code{\dots} argument, so
>        methods with extra arguments can be provided.
>
> Could you please update your package code to eliminate these warnings,
> ideally as quickly as possible?
>
> In one package co-developed by me, I went for
>
> if(is.na(match("...", names(formals(median))))) {
>      median.tuple <- function(x, na.rm = FALSE) {
>          x <- as.numeric(x)
>          NextMethod()
>      }
> } else {
>      median.tuple <- function(x, na.rm = FALSE, ...) {
>          x <- as.numeric(x)
>          NextMethod()
>      }
> }
>
> which may be the "simplest" way forward ...
>
> Best
> -k
>
>
> 	[[alternative HTML version deleted]]
>
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From roy.mendelssohn at noaa.gov  Sat Apr 15 02:15:11 2017
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Fri, 14 Apr 2017 17:15:11 -0700
Subject: [R-pkg-devel] Referring to data in R/sysdata.rda
Message-ID: <C61BC83C-2657-4230-B085-04A19B38D883@noaa.gov>

In my package I have a dataframe that I use but want to hide from the user.  In Hadley's book on R Packages,  he says:

> 	? If you want to store parsed data, but not make it available to the user, put it in R/sysdata.rda. This is the best place to put data that your functions need.
> 

I have done that,  and sure enough when the package is loaded, the structure is there.  However,  when I am working on debugging code, and I refer to the  structure in a function,  RStudio gives a warning that the structure is out of scope, say the data frame is myDF:

myFunc  <-  function(myIndex) {
     junk  <-  myDF[index]
    return(junk)
}

RStudio will warn that myDF is out of scope.  My question is if there is a proper way to refer to myDF so as not to get the warning,  or just ignore it.  Basically before submission I try to remove all warnings from the editor,  even style ones,  just to have things cleaner.

Thanks,

-Roy





**********************
**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From xqiu at uw.edu  Sat Apr 15 03:56:40 2017
From: xqiu at uw.edu (Xiaojie Qiu)
Date: Sat, 15 Apr 2017 01:56:40 +0000
Subject: [R-pkg-devel] Warning of DDRTree
In-Reply-To: <22768.13971.373664.374548@max.eddelbuettel.com>
References: <CANdCydepa3UA3Qj4B0tWc0zpc+7d6t=D6-j9Q71YUgSW9jOy4g@mail.gmail.com>
 <22768.13971.373664.374548@max.eddelbuettel.com>
Message-ID: <CANdCydesYo+ORucgXV8rcVYf96YBwHr6AmVcVi2kpdG3o+uY0Q@mail.gmail.com>

thanks a lot. I used the option on SystemRequirements: C++11 which works
pretty good

On Thu, Apr 13, 2017 at 7:40 PM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 14 April 2017 at 01:49, Xiaojie Qiu wrote:
> | We are planning to update the DDRTree package but found the following
> | warnings:
> |
> |
>  d:/RCompile/CRANpkg/lib/3.4/BH/include/boost/unordered/detail/buckets.hpp:586:29:
> | warning: ISO C++ 1998 does not support 'long long' [-Wlong-long]
> |
>  d:/RCompile/CRANpkg/lib/3.4/BH/include/boost/unordered/detail/buckets.hpp:591:38:
> | warning: ISO C++ 1998 does not support 'long long' [-Wlong-long]
> |
> |  Those warnings seem to relate to boost but not to our package. Can
> anyone
> | have some idea on how to fix this?
>
> Yes. Compile the program as a C++11 program.
>
> My favourite way of saying that is via
>
>    CXX_STD = CXX11
>
> in src/Makevars. Now that all core systems (Win, OS X, Linux) used with R
> have proper C++11 compiler support this is no longer an issue.
>
> [ The underlying issue is boring. The powers that be decided a long time
> ago
> that only C++98 was real C++ in the context of R. And that old standard has
> no 'long long', hence the issue. Ironically, intermediate standards added
> long long but we were not aloud to play with it because someone else knew
> what's best for us. Luckily this is a thing of the past. ]
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From h.wickham at gmail.com  Sat Apr 15 18:24:18 2017
From: h.wickham at gmail.com (Hadley Wickham)
Date: Sat, 15 Apr 2017 11:24:18 -0500
Subject: [R-pkg-devel] Referring to data in R/sysdata.rda
In-Reply-To: <C61BC83C-2657-4230-B085-04A19B38D883@noaa.gov>
References: <C61BC83C-2657-4230-B085-04A19B38D883@noaa.gov>
Message-ID: <CABdHhvF7pqrChyi7eRxVbMPYv3m_7SXBxc6qQVMXLpKMGYMbVw@mail.gmail.com>

Just ignore it.
Hadley

On Friday, April 14, 2017, Roy Mendelssohn - NOAA Federal <
roy.mendelssohn at noaa.gov> wrote:

> In my package I have a dataframe that I use but want to hide from the
> user.  In Hadley's book on R Packages,  he says:
>
> >       ? If you want to store parsed data, but not make it available to
> the user, put it in R/sysdata.rda. This is the best place to put data that
> your functions need.
> >
>
> I have done that,  and sure enough when the package is loaded, the
> structure is there.  However,  when I am working on debugging code, and I
> refer to the  structure in a function,  RStudio gives a warning that the
> structure is out of scope, say the data frame is myDF:
>
> myFunc  <-  function(myIndex) {
>      junk  <-  myDF[index]
>     return(junk)
> }
>
> RStudio will warn that myDF is out of scope.  My question is if there is a
> proper way to refer to myDF so as not to get the warning,  or just ignore
> it.  Basically before submission I try to remove all warnings from the
> editor,  even style ones,  just to have things cleaner.
>
> Thanks,
>
> -Roy
>
>
>
>
>
> **********************
> **********************
> "The contents of this message do not reflect any position of the U.S.
> Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov <javascript:;> www:
> http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK
> Jr.
>
> ______________________________________________
> R-package-devel at r-project.org <javascript:;> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
http://hadley.nz

	[[alternative HTML version deleted]]


From spencer.graves at effectivedefense.org  Sat Apr 15 18:38:57 2017
From: spencer.graves at effectivedefense.org (Spencer Graves)
Date: Sat, 15 Apr 2017 11:38:57 -0500
Subject: [R-pkg-devel] Referring to data in R/sysdata.rda
In-Reply-To: <CABdHhvF7pqrChyi7eRxVbMPYv3m_7SXBxc6qQVMXLpKMGYMbVw@mail.gmail.com>
References: <C61BC83C-2657-4230-B085-04A19B38D883@noaa.gov>
 <CABdHhvF7pqrChyi7eRxVbMPYv3m_7SXBxc6qQVMXLpKMGYMbVw@mail.gmail.com>
Message-ID: <bfb84a51-e0e1-df0c-adb8-3eb12c71af08@effectivedefense.org>



On 2017-04-15 11:24 AM, Hadley Wickham wrote:
> Just ignore it.
> Hadley
>
> On Friday, April 14, 2017, Roy Mendelssohn - NOAA Federal <
> roy.mendelssohn at noaa.gov> wrote:
>
>> In my package I have a dataframe that I use but want to hide from the
>> user.  In Hadley's book on R Packages,  he says:
>>
>>>        ? If you want to store parsed data, but not make it available to
>> the user, put it in R/sysdata.rda. This is the best place to put data that
>> your functions need.
>> I have done that,  and sure enough when the package is loaded, the
>> structure is there.  However,  when I am working on debugging code, and I
>> refer to the  structure in a function,  RStudio gives a warning that the
>> structure is out of scope, say the data frame is myDF:
>>
>> myFunc  <-  function(myIndex) {
>>       junk  <-  myDF[index]
>>      return(junk)
>> }

       Have you tried the following:


> myFunc  <-  function(myIndex) {
>       junk  <-  yrPkg:::myDF[index]
>      return(junk)
> }


       This will turn of similar messages is slightly different 
contexts.  I don't know if it will work here (and I don't have time to 
try it myself now).  Spencer Graves

>> RStudio will warn that myDF is out of scope.  My question is if there is a
>> proper way to refer to myDF so as not to get the warning,  or just ignore
>> it.  Basically before submission I try to remove all warnings from the
>> editor,  even style ones,  just to have things cleaner.
>>
>> Thanks,
>>
>> -Roy
>>
>>
>>
>>
>>
>> **********************
>> **********************
>> "The contents of this message do not reflect any position of the U.S.
>> Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov <javascript:;> www:
>> http://www.pfeg.noaa.gov/
>>
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected"
>> "the arc of the moral universe is long, but it bends toward justice" -MLK
>> Jr.
>>
>> ______________________________________________
>> R-package-devel at r-project.org <javascript:;> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>


From xgdgsc at gmail.com  Mon Apr 17 16:42:25 2017
From: xgdgsc at gmail.com (GSC)
Date: Mon, 17 Apr 2017 14:42:25 +0000
Subject: [R-pkg-devel] Confirmation page package check version question
In-Reply-To: <CAO63teBvLywwLZXj5689erJLt4vO7b92M8pEaRrEeqWD=H_96A@mail.gmail.com>
References: <CAO63teBvLywwLZXj5689erJLt4vO7b92M8pEaRrEeqWD=H_96A@mail.gmail.com>
Message-ID: <CAO63teC-QxSxatUEwyKOBaaQzjRUOr0fXLXRtwPn1aCatwBnBg@mail.gmail.com>

I have a question why in the CRAN submission system, the page after email
confirmation, the third check "I have fixed all problems shown on the
package check page". Why doesn' t the "package check page" link to my just
uploaded version check results? It shows the previous version Rsomoclu
1.7.2 instead of the just uploaded Rsomoclu 1.7.3, which I think might be
something wrong. I remember it used to work as pointing to the just
submitted version check results.

Thanks.

	[[alternative HTML version deleted]]


From xgdgsc at gmail.com  Mon Apr 17 16:47:25 2017
From: xgdgsc at gmail.com (GSC)
Date: Mon, 17 Apr 2017 14:47:25 +0000
Subject: [R-pkg-devel] How to fix errors in R headers when uploading my
	package to win-builer
Message-ID: <CAO63teAzTU-kDQro9vYMLFL6gV7WCiRHd4Y2GwMozrVrUzy6SQ@mail.gmail.com>

I have no idea how I could fix these compiling errors in R headers. Testing
my package locally on archlinux is fine. The link to build log is:
https://win-builder.r-project.org/08H2Ne0lShbY/ . Please help.

Thanks!

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Mon Apr 17 17:00:42 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Mon, 17 Apr 2017 17:00:42 +0200
Subject: [R-pkg-devel] Confirmation page package check version question
In-Reply-To: <CAO63teC-QxSxatUEwyKOBaaQzjRUOr0fXLXRtwPn1aCatwBnBg@mail.gmail.com>
References: <CAO63teBvLywwLZXj5689erJLt4vO7b92M8pEaRrEeqWD=H_96A@mail.gmail.com>
 <CAO63teC-QxSxatUEwyKOBaaQzjRUOr0fXLXRtwPn1aCatwBnBg@mail.gmail.com>
Message-ID: <8bbb9c3f-f280-b93b-c290-52860d49a417@statistik.tu-dortmund.de>



On 17.04.2017 16:42, GSC wrote:
> I have a question why in the CRAN submission system, the page after email
> confirmation, the third check "I have fixed all problems shown on the
> package check page". Why doesn' t the "package check page" link to my just
> uploaded version check results? It shows the previous version Rsomoclu
> 1.7.2 instead of the just uploaded Rsomoclu 1.7.3, which I think might be
> something wrong. I remember it used to work as pointing to the just
> submitted version check results.

This has always been the case as is and we ask for it to make you aware 
you had problems in the old version. Only after that confirmation the 
check service will start to check your ost recent submission.

Best,
Uwe Ligges



> Thanks.
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From xgdgsc at gmail.com  Tue Apr 18 03:40:39 2017
From: xgdgsc at gmail.com (GSC)
Date: Tue, 18 Apr 2017 01:40:39 +0000
Subject: [R-pkg-devel] Confirmation page package check version question
In-Reply-To: <8bbb9c3f-f280-b93b-c290-52860d49a417@statistik.tu-dortmund.de>
References: <CAO63teBvLywwLZXj5689erJLt4vO7b92M8pEaRrEeqWD=H_96A@mail.gmail.com>
 <CAO63teC-QxSxatUEwyKOBaaQzjRUOr0fXLXRtwPn1aCatwBnBg@mail.gmail.com>
 <8bbb9c3f-f280-b93b-c290-52860d49a417@statistik.tu-dortmund.de>
Message-ID: <CAO63teDedo+tA+3TCv=NMTfLKJn0FZBxsRZ++vnAL3fcAhjF+g@mail.gmail.com>

Thank you for the clarification.

Uwe Ligges <ligges at statistik.tu-dortmund.de>?2017?4?17??? ??11:00???

>
>
> On 17.04.2017 16:42, GSC wrote:
> > I have a question why in the CRAN submission system, the page after email
> > confirmation, the third check "I have fixed all problems shown on the
> > package check page". Why doesn' t the "package check page" link to my
> just
> > uploaded version check results? It shows the previous version Rsomoclu
> > 1.7.2 instead of the just uploaded Rsomoclu 1.7.3, which I think might be
> > something wrong. I remember it used to work as pointing to the just
> > submitted version check results.
>
> This has always been the case as is and we ask for it to make you aware
> you had problems in the old version. Only after that confirmation the
> check service will start to check your ost recent submission.
>
> Best,
> Uwe Ligges
>
>
>
> > Thanks.
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>

	[[alternative HTML version deleted]]


From xgdgsc at gmail.com  Tue Apr 18 03:53:58 2017
From: xgdgsc at gmail.com (GSC)
Date: Tue, 18 Apr 2017 01:53:58 +0000
Subject: [R-pkg-devel] How to fix errors in R headers when uploading my
	package to win-builer
In-Reply-To: <CAO63teAzTU-kDQro9vYMLFL6gV7WCiRHd4Y2GwMozrVrUzy6SQ@mail.gmail.com>
References: <CAO63teAzTU-kDQro9vYMLFL6gV7WCiRHd4Y2GwMozrVrUzy6SQ@mail.gmail.com>
Message-ID: <CAO63teCVTTOnxnKRZ1vaR2uWsN_ZabFR8qYgDNd08vNyOH8y2A@mail.gmail.com>

That link is deprecated, new link to log:
https://win-builder.r-project.org/I3u4Z9BbLHsC/ .

GSC <xgdgsc at gmail.com>?2017?4?17??? ??10:47???

> I have no idea how I could fix these compiling errors in R headers.
> Testing my package locally on archlinux is fine. The link to build log is:
> https://win-builder.r-project.org/08H2Ne0lShbY/ . Please help.
>
> Thanks!
>

	[[alternative HTML version deleted]]


From nathaniel.d.phillips.is at gmail.com  Tue Apr 18 13:22:52 2017
From: nathaniel.d.phillips.is at gmail.com (Nathaniel Phillips)
Date: Tue, 18 Apr 2017 13:22:52 +0200
Subject: [R-pkg-devel] Build error: "DLL 'BayesFactor' not found: maybe not
 installed for this architecture?"
Message-ID: <CAMPMfSXZp7nx7ST9ri8j1sqiB3ZWJzccTQmp5BYZ=k1bmn1SQA@mail.gmail.com>

In submitting my package yarrr v0.1.5 to CRAN (https://github.com/
ndphillips/yarrr), I received the following error:

* installing *source* package 'yarrr' ...
** R
** data
*** moving datasets to lazyload DB
** inst
** preparing package for lazy loading
Warning: S3 methods 'is.na.BFBayesFactor', 'c.BFBayesFactor',
'plot.BFBayesFactor', 'head.BFBayesFactor', 'tail.BFBayesFactor',
'min.BFBayesFactor', 'max.BFBayesFactor', 'which.min.BFBayesFactor',
'which.max.BFBayesFactor', 'sort.BFBayesFactor',
'as.data.frame.BFBayesFactor', 'as.vector.BFBayesFactor',
'names.BFBayesFactor', 'length.BFBayesFactor', 't.BFBayesFactor',
'as.matrix.BFBayesFactorList', 'as.vector.BFBayesFactorList',
'as.mcmc.BFmcmc', 'as.matrix.BFmcmc', 'as.data.frame.BFmcmc',
'as.BFBayesFactor.BFBayesFactorTop', 'plot.BFBayesFactorTop',
'sort.BFBayesFactorTop', 'length.BFBayesFactorTop',
'as.BFBayesFactor.BFodds', 'as.BFprobability.BFodds', 'c.BFodds',
'length.BFodds', 'head.BFodds', 'tail.BFodds', 'min.BFodds',
'max.BFodds', 'which.min.BFodds', 'which.max.BFodds', 'sort.BFodds',
'as.data.frame.BFodds', 'as.vector.BFodds', 'names.BFodds',
'head.BFprobability', 'tail.BFprobability', 'min.BFprobability',
'max.BFprobability', 'which.min.BFprobability',
'which.max.BFprobability', 'sort [... truncated]
Error: package or namespace load failed for 'BayesFactor' in
library.dynam(lib, package, package.lib):
 DLL 'BayesFactor' not found: maybe not installed for this architecture?
Error : package 'BayesFactor' could not be loaded
ERROR: lazy loading failed for package 'yarrr'
* removing 'd:/RCompile/CRANincoming/R-devel/lib/yarrr'


Here is the check log:
https://win-builder.r-project.org/incoming_pretest/170418_120616_yarrr_015/00check.log

Here is the install log:
https://win-builder.r-project.org/incoming_pretest/170418_120616_yarrr_015/00install.out

There seems to be a problem with loading the BayesFactor package.
However, when I check and build the package on my machine it loads
just fine.

Can someone help me to fix this error for CRAN submission? Thank you!

Nathaniel

Nathaniel.D.Phillips.is at gmail.com

	[[alternative HTML version deleted]]


From francois.michonneau at gmail.com  Tue Apr 18 16:57:58 2017
From: francois.michonneau at gmail.com (=?UTF-8?Q?Fran=C3=A7ois_Michonneau?=)
Date: Tue, 18 Apr 2017 10:57:58 -0400
Subject: [R-pkg-devel] (no subject)
Message-ID: <CAKL30wUMnAyH1MVXmZxBzB=2KaPiA1qr2eShi_2+cS=s8C3MaQ@mail.gmail.com>

Hello all,

  With R-devel, I see the following for one of my packages
(https://github.com/fmichonneau/phylobase), and I would appreciate any
insights on what needs to be adjusted to fix it:

Functions or methods with usage in documentation object
'subset-methods' but not in code:
  [

Thanks!
  -- Fran?ois


From francois.michonneau at gmail.com  Tue Apr 18 17:54:11 2017
From: francois.michonneau at gmail.com (=?UTF-8?Q?Fran=C3=A7ois_Michonneau?=)
Date: Tue, 18 Apr 2017 11:54:11 -0400
Subject: [R-pkg-devel] (no subject)
In-Reply-To: <CAKL30wUMnAyH1MVXmZxBzB=2KaPiA1qr2eShi_2+cS=s8C3MaQ@mail.gmail.com>
References: <CAKL30wUMnAyH1MVXmZxBzB=2KaPiA1qr2eShi_2+cS=s8C3MaQ@mail.gmail.com>
Message-ID: <CAKL30wX9EgZtCmiV9xv=-9eBsihcJCFH-sbtOdrY2kFCBjxhPg@mail.gmail.com>

To follow up, I managed to remove the warning by exporting the
function directly. In other words, my NAMESPACE now contains both:

export("[")
exportMethods("[")

could someone please confirm it's really the best approach?

  thanks!
  -- Fran?ois

On Tue, Apr 18, 2017 at 10:57 AM, Fran?ois Michonneau
<francois.michonneau at gmail.com> wrote:
> Hello all,
>
>   With R-devel, I see the following for one of my packages
> (https://github.com/fmichonneau/phylobase), and I would appreciate any
> insights on what needs to be adjusted to fix it:
>
> Functions or methods with usage in documentation object
> 'subset-methods' but not in code:
>   [
>
> Thanks!
>   -- Fran?ois
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ligges at statistik.tu-dortmund.de  Wed Apr 19 10:42:09 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 19 Apr 2017 10:42:09 +0200
Subject: [R-pkg-devel] Build error: "DLL 'BayesFactor' not found: maybe
 not installed for this architecture?"
In-Reply-To: <CAMPMfSXZp7nx7ST9ri8j1sqiB3ZWJzccTQmp5BYZ=k1bmn1SQA@mail.gmail.com>
References: <CAMPMfSXZp7nx7ST9ri8j1sqiB3ZWJzccTQmp5BYZ=k1bmn1SQA@mail.gmail.com>
Message-ID: <2236c79f-f943-4ed7-03df-6e12494deb8d@statistik.tu-dortmund.de>

A race condition on the check system.

Best,
Uwe Ligges



On 18.04.2017 13:22, Nathaniel Phillips wrote:
> In submitting my package yarrr v0.1.5 to CRAN (https://github.com/
> ndphillips/yarrr), I received the following error:
>
> * installing *source* package 'yarrr' ...
> ** R
> ** data
> *** moving datasets to lazyload DB
> ** inst
> ** preparing package for lazy loading
> Warning: S3 methods 'is.na.BFBayesFactor', 'c.BFBayesFactor',
> 'plot.BFBayesFactor', 'head.BFBayesFactor', 'tail.BFBayesFactor',
> 'min.BFBayesFactor', 'max.BFBayesFactor', 'which.min.BFBayesFactor',
> 'which.max.BFBayesFactor', 'sort.BFBayesFactor',
> 'as.data.frame.BFBayesFactor', 'as.vector.BFBayesFactor',
> 'names.BFBayesFactor', 'length.BFBayesFactor', 't.BFBayesFactor',
> 'as.matrix.BFBayesFactorList', 'as.vector.BFBayesFactorList',
> 'as.mcmc.BFmcmc', 'as.matrix.BFmcmc', 'as.data.frame.BFmcmc',
> 'as.BFBayesFactor.BFBayesFactorTop', 'plot.BFBayesFactorTop',
> 'sort.BFBayesFactorTop', 'length.BFBayesFactorTop',
> 'as.BFBayesFactor.BFodds', 'as.BFprobability.BFodds', 'c.BFodds',
> 'length.BFodds', 'head.BFodds', 'tail.BFodds', 'min.BFodds',
> 'max.BFodds', 'which.min.BFodds', 'which.max.BFodds', 'sort.BFodds',
> 'as.data.frame.BFodds', 'as.vector.BFodds', 'names.BFodds',
> 'head.BFprobability', 'tail.BFprobability', 'min.BFprobability',
> 'max.BFprobability', 'which.min.BFprobability',
> 'which.max.BFprobability', 'sort [... truncated]
> Error: package or namespace load failed for 'BayesFactor' in
> library.dynam(lib, package, package.lib):
>  DLL 'BayesFactor' not found: maybe not installed for this architecture?
> Error : package 'BayesFactor' could not be loaded
> ERROR: lazy loading failed for package 'yarrr'
> * removing 'd:/RCompile/CRANincoming/R-devel/lib/yarrr'
>
>
> Here is the check log:
> https://win-builder.r-project.org/incoming_pretest/170418_120616_yarrr_015/00check.log
>
> Here is the install log:
> https://win-builder.r-project.org/incoming_pretest/170418_120616_yarrr_015/00install.out
>
> There seems to be a problem with loading the BayesFactor package.
> However, when I check and build the package on my machine it loads
> just fine.
>
> Can someone help me to fix this error for CRAN submission? Thank you!
>
> Nathaniel
>
> Nathaniel.D.Phillips.is at gmail.com
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From davidhughjones at gmail.com  Wed Apr 19 19:00:52 2017
From: davidhughjones at gmail.com (David Hugh-Jones)
Date: Wed, 19 Apr 2017 18:00:52 +0100
Subject: [R-pkg-devel] R CMD check not finding my vignettes
In-Reply-To: <CAARY7kjxAV3Hw=v5fYEpeAGehwAUcD_tz1povpopLGXDnysqJA@mail.gmail.com>
References: <CAARY7ki02r8gLWJEhvLOm1k5N1VduKpunTBr0WSejfy3671Wjg@mail.gmail.com>
 <CAARY7khMwu1HDpt=Pm4uQkLttG12ocQm8sm9OsVgZZnL=AMKCQ@mail.gmail.com>
 <8088e565-0eea-748a-b5f0-ab72beeb92d7@statistik.tu-dortmund.de>
 <CAARY7kiT=TqskL3ttNGybXxg+uA5o3pu_5ioXs11=DWr5-4Kkw@mail.gmail.com>
 <677dcfda-4766-a3e2-30a3-9b663084eba2@statistik.tu-dortmund.de>
 <CAARY7kjxAV3Hw=v5fYEpeAGehwAUcD_tz1povpopLGXDnysqJA@mail.gmail.com>
Message-ID: <CAARY7kirCEf67xqJz0OqQHqdRGPca_3rzu_F+5jcK-UGE6sCrA@mail.gmail.com>

Hi Uwe,

I'm not sure if you ever got my off-list message with my tarball or
subsequent messages. I can't send a tarball on-list - it gets rejected as
too large - but here is a dropbox link. If you could confirm receipt, that
would be extremely helpful!

https://www.dropbox.com/s/179jrm19kx9o7dz/huxtable_0.2.0.tar.gz?dl=0

Cheers,
David Hugh-Jones


On 7 April 2017 at 11:20, Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

> Can you send the tarball please, I can take a look,
>
>> Uwe
>
>>
>>

	[[alternative HTML version deleted]]


From roy.mendelssohn at noaa.gov  Wed Apr 19 19:20:05 2017
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Wed, 19 Apr 2017 10:20:05 -0700
Subject: [R-pkg-devel] Interplay between knitr() and View()
Message-ID: <13120484-64C7-4F8B-A710-3A50F8AF7473@noaa.gov>

Hi All:

My package allows the user to search for information about the data available, and the information is returned in a dataframe. I had long been looking for a nice way to display the results  (the datasets' metadata),  and wasn't too happy with anything until I tried the View() command,  which does exactly what I want.

The problem is I can't seem to find a way to make View() and knitr() work nice together in creating the vignette. Given the way View() works I doubt there is a way,  but any suggestions of how I can show what the user will see when the given the command in the package from within my vignette?

Thanks,

-Roy



**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From murdoch.duncan at gmail.com  Wed Apr 19 22:24:35 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 19 Apr 2017 16:24:35 -0400
Subject: [R-pkg-devel] R CMD check not finding my vignettes
In-Reply-To: <CAARY7kirCEf67xqJz0OqQHqdRGPca_3rzu_F+5jcK-UGE6sCrA@mail.gmail.com>
References: <CAARY7ki02r8gLWJEhvLOm1k5N1VduKpunTBr0WSejfy3671Wjg@mail.gmail.com>
 <CAARY7khMwu1HDpt=Pm4uQkLttG12ocQm8sm9OsVgZZnL=AMKCQ@mail.gmail.com>
 <8088e565-0eea-748a-b5f0-ab72beeb92d7@statistik.tu-dortmund.de>
 <CAARY7kiT=TqskL3ttNGybXxg+uA5o3pu_5ioXs11=DWr5-4Kkw@mail.gmail.com>
 <677dcfda-4766-a3e2-30a3-9b663084eba2@statistik.tu-dortmund.de>
 <CAARY7kjxAV3Hw=v5fYEpeAGehwAUcD_tz1povpopLGXDnysqJA@mail.gmail.com>
 <CAARY7kirCEf67xqJz0OqQHqdRGPca_3rzu_F+5jcK-UGE6sCrA@mail.gmail.com>
Message-ID: <2966bd61-5e33-c7f1-19a4-0bbe36f9e11c@gmail.com>

On 19/04/2017 1:00 PM, David Hugh-Jones wrote:
> Hi Uwe,
>
> I'm not sure if you ever got my off-list message with my tarball or
> subsequent messages. I can't send a tarball on-list - it gets rejected as
> too large - but here is a dropbox link. If you could confirm receipt, that
> would be extremely helpful!
>
> https://www.dropbox.com/s/179jrm19kx9o7dz/huxtable_0.2.0.tar.gz?dl=0
>

Not sure if Uwe has had a chance to look, but I just ran R CMD check on 
your tarball using the latest version of R-devel.  It reported the 
following problems:

* checking CRAN incoming feasibility ... NOTE
Maintainer: ?David Hugh-Jones <davidhughjones at gmail.com>?

Found the following (possibly) invalid URLs:
   URL: http://cran.rstudio.com/web/packages/huxtable/index.html
     From: README.md
     CRAN URL not in canonical form
   Canonical CRAN.R-project.org URLs use https.

The URL for your package should be in the form

https://CRAN.R-project.org/package=huxtable

* checking top-level files ... NOTE
Non-standard file/directory found at top level:
   ?multirow.rds?

I'm not sure where that file belongs, but not there.

* checking files in ?vignettes? ... WARNING
Files in the 'vignettes' directory newer than all files in 'inst/doc':
   ?huxreg.html?, ?huxtable.html?

Those files shouldn't be in the vignettes directory, they are products 
of building the vignettes.  Only the source should normally be in the 
vignettes directory.

* checking package vignettes in ?inst/doc? ... WARNING
Package vignettes without corresponding PDF/HTML:
    ?design-principles.Rmd?
    ?huxreg.Rmd?
    ?huxtable.Rmd?

I think this is the warning you were asking about.  If I look at just 
the first of those files, I see that design-principles.Rmd exists in 
vignettes and is set to produce PDF output (only the first output entry 
in the YAML counts).  You also have a .html file in vignettes; it 
shouldn't be there.  In inst/doc, you have source, .html and .pdf 
versions of that file.

The warning isn't very helpful, but I think it is triggered by the fact 
that you've got the .html file in your vignettes directory.  If I remove 
everything but the source from that directory, and everything from the 
inst/doc directory, then all the vignette warnings go away.

(I haven't traced through the code, but I think the warning may be 
literally correct.  Since you had .html files that looked like vignette 
outputs but weren't, you have vignettes without *corresponding* HTML. 
It would have been nicer if it suggested how to fix this, but that 
vignette code is quite tricky, because any file could be source, and any 
html, tex or pdf file could be output.  At some point I may try to clean 
it up a bit and then maybe the error messages will be less obscure.)

Duncan Murdoch


From b.rowlingson at lancaster.ac.uk  Thu Apr 20 08:56:33 2017
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Thu, 20 Apr 2017 07:56:33 +0100
Subject: [R-pkg-devel] Interplay between knitr() and View()
In-Reply-To: <13120484-64C7-4F8B-A710-3A50F8AF7473@noaa.gov>
References: <13120484-64C7-4F8B-A710-3A50F8AF7473@noaa.gov>
Message-ID: <CANVKczNfn3nEgiswiZH1KJM8p9t_+TDMWA4aAqHmpHsyxcORcg@mail.gmail.com>

I think that exactly what View() shows will depend on your operating
system. On my Linux box, I get a very plain spreadsheet with
everything in fixed-width font, thin black boxes, and a highlighted
cursor box. Numbers are left-justified. There's no scroll bars.

I don't know if it looks the same in Mac or Windows, or if there are
slight differences because the widget sets are different. Would it
matter to your vignette if it was?

What are you using to make your vignette? knitr? If its flexible
enough you could just style a table to look very much like what I see
when I run View, and tell the reader this is an approximation. I don't
know if markdown source is flexible enough to control the visual
appearance of a table, but you could do this in LaTeX with knitr.

You *could* possibly do a screengrab of a live View window, but if you
have to run your vignette on a headless server that means running a
display server screen to do the grab from.

I'd go with styling a good-looking fake table.

Barry


On Wed, Apr 19, 2017 at 6:20 PM, Roy Mendelssohn - NOAA Federal
<roy.mendelssohn at noaa.gov> wrote:
> Hi All:
>
> My package allows the user to search for information about the data available, and the information is returned in a dataframe. I had long been looking for a nice way to display the results  (the datasets' metadata),  and wasn't too happy with anything until I tried the View() command,  which does exactly what I want.
>
> The problem is I can't seem to find a way to make View() and knitr() work nice together in creating the vignette. Given the way View() works I doubt there is a way,  but any suggestions of how I can show what the user will see when the given the command in the package from within my vignette?
>
> Thanks,
>
> -Roy
>
>
>
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From thierry.onkelinx at inbo.be  Thu Apr 20 09:36:52 2017
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Thu, 20 Apr 2017 09:36:52 +0200
Subject: [R-pkg-devel] Interplay between knitr() and View()
In-Reply-To: <13120484-64C7-4F8B-A710-3A50F8AF7473@noaa.gov>
References: <13120484-64C7-4F8B-A710-3A50F8AF7473@noaa.gov>
Message-ID: <CAJuCY5w6K53GEDsxMHzj-YM=yc5ZoK_AZ8XAdQCX-8i_Y3Pqcg@mail.gmail.com>

Dear Roy,

In case you create a HTML vignette you can use datatable() from the DT
package. That creates a dynamic table in the output.

Best regards,

ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature and
Forest
team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
Kliniekstraat 25
1070 Anderlecht
Belgium

To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey

2017-04-19 19:20 GMT+02:00 Roy Mendelssohn - NOAA Federal <
roy.mendelssohn at noaa.gov>:

> Hi All:
>
> My package allows the user to search for information about the data
> available, and the information is returned in a dataframe. I had long been
> looking for a nice way to display the results  (the datasets' metadata),
> and wasn't too happy with anything until I tried the View() command,  which
> does exactly what I want.
>
> The problem is I can't seem to find a way to make View() and knitr() work
> nice together in creating the vignette. Given the way View() works I doubt
> there is a way,  but any suggestions of how I can show what the user will
> see when the given the command in the package from within my vignette?
>
> Thanks,
>
> -Roy
>
>
>
> **********************
> "The contents of this message do not reflect any position of the U.S.
> Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK
> Jr.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From davidhughjones at gmail.com  Thu Apr 20 09:45:29 2017
From: davidhughjones at gmail.com (David Hugh-Jones)
Date: Thu, 20 Apr 2017 07:45:29 +0000
Subject: [R-pkg-devel] Interplay between knitr() and View()
In-Reply-To: <CAJuCY5w6K53GEDsxMHzj-YM=yc5ZoK_AZ8XAdQCX-8i_Y3Pqcg@mail.gmail.com>
References: <13120484-64C7-4F8B-A710-3A50F8AF7473@noaa.gov>
 <CAJuCY5w6K53GEDsxMHzj-YM=yc5ZoK_AZ8XAdQCX-8i_Y3Pqcg@mail.gmail.com>
Message-ID: <CAARY7kj2jZZAtG2TXCaWNq4q9FrxyjQUoJRZhVN01isAugFGrg@mail.gmail.com>

Two questions:

1. If your package definitely needs to call View(), and you want to explain
how that will look, then why not show one or more screenshots in your
documentation?

2. Why does your package need to call View? Why can't it return the
metadata as a data frame, and let the user do what he wants with it himself
- using View(), head(), or any other tool?

Cheers
D


>
>
>
> > Hi All:
> >
> > My package allows the user to search for information about the data
> > available, and the information is returned in a dataframe. I had long
> been
> > looking for a nice way to display the results  (the datasets' metadata),
> > and wasn't too happy with anything until I tried the View() command,
> which
> > does exactly what I want.
> >
> > The problem is I can't seem to find a way to make View() and knitr() work
> > nice together in creating the vignette. Given the way View() works I
> doubt
> > there is a way,  but any suggestions of how I can show what the user will
> > see when the given the command in the package from within my vignette?
> >
> > Thanks,
> >
> > -Roy
> >
> >
> >
> > **********************
> > "The contents of this message do not reflect any position of the U.S.
> > Government or NOAA."
> > **********************
> > Roy Mendelssohn
> > Supervisory Operations Research Analyst
> > NOAA/NMFS
> > Environmental Research Division
> > Southwest Fisheries Science Center
> > ***Note new street address***
> > 110 McAllister Way
> > Santa Cruz, CA 95060
> > Phone: (831)-420-3666
> > Fax: (831) 420-3980
> > e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> >
> > "Old age and treachery will overcome youth and skill."
> > "From those who have been given much, much will be expected"
> > "the arc of the moral universe is long, but it bends toward justice" -MLK
> > Jr.
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
-- 
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From davidhughjones at gmail.com  Thu Apr 20 10:38:30 2017
From: davidhughjones at gmail.com (David Hugh-Jones)
Date: Thu, 20 Apr 2017 09:38:30 +0100
Subject: [R-pkg-devel] R CMD check not finding my vignettes
In-Reply-To: <2966bd61-5e33-c7f1-19a4-0bbe36f9e11c@gmail.com>
References: <CAARY7ki02r8gLWJEhvLOm1k5N1VduKpunTBr0WSejfy3671Wjg@mail.gmail.com>
 <CAARY7khMwu1HDpt=Pm4uQkLttG12ocQm8sm9OsVgZZnL=AMKCQ@mail.gmail.com>
 <8088e565-0eea-748a-b5f0-ab72beeb92d7@statistik.tu-dortmund.de>
 <CAARY7kiT=TqskL3ttNGybXxg+uA5o3pu_5ioXs11=DWr5-4Kkw@mail.gmail.com>
 <677dcfda-4766-a3e2-30a3-9b663084eba2@statistik.tu-dortmund.de>
 <CAARY7kjxAV3Hw=v5fYEpeAGehwAUcD_tz1povpopLGXDnysqJA@mail.gmail.com>
 <CAARY7kirCEf67xqJz0OqQHqdRGPca_3rzu_F+5jcK-UGE6sCrA@mail.gmail.com>
 <2966bd61-5e33-c7f1-19a4-0bbe36f9e11c@gmail.com>
Message-ID: <CAARY7khBhumJHrn_g=R=AHMptuyiLMcprmb12_ZVcaNSyO45Kw@mail.gmail.com>

Hi Duncan,

Thank you very much for taking the time to look at this.

I tried rebuilding the tar file so as to include only the .Rmd files, not
the HTML files, in 'vignettes':

drwxr-xr-x  0 david  staff       0 20 Apr 09:21 huxtable/vignettes/

-rw-r--r--  0 david  staff    1633  6 Apr 16:26
huxtable/vignettes/comparison.csv

-rw-r--r--  0 david  staff    6697  6 Apr 14:44
huxtable/vignettes/design-principles.Rmd

-rw-r--r--  0 david  staff    5521  6 Apr 14:30
huxtable/vignettes/huxreg.Rmd

-rw-r--r--  0 david  staff   20552  6 Apr 16:19
huxtable/vignettes/huxtable.Rmd

-rw-r--r--  0 david  staff      22 17 Mar 00:19
huxtable/vignettes/placeins-header.tex


But when I run R CMD check, I still get the same warning:

* checking package vignettes in ?inst/doc? ... WARNING

Package vignettes without corresponding PDF/HTML:

   ?design-principles.Rmd?

   ?huxreg.Rmd?

   ?huxtable.Rmd?

So, the warning does not seem to be related to the presence of HTML files
in vignettes.

I also tried manually removing .Rmd files from inst/doc (leaving them only
in vignettes) but this still gave the same error.

My goal here is that for package-specific reasons, I would like both pdf
and HTML versions of my vignettes to be available (I am writing code that
prints HTML and LaTeX tables and want my users to have examples of how both
output formats work). This is why I build those files manually, and place
them in inst/doc.

Side comment: at the moment, I feel as if I am running through the
combinatorics of including and excluding files from vignettes and inst/doc,
without much insight into what I am doing. Would it be fair to say that the
current system is not very easy to comprehend?

Cheers,

David

On 19 April 2017 at 21:24, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> On 19/04/2017 1:00 PM, David Hugh-Jones wrote:
>
>> Hi Uwe,
>>
>> I'm not sure if you ever got my off-list message with my tarball or
>> subsequent messages. I can't send a tarball on-list - it gets rejected as
>> too large - but here is a dropbox link. If you could confirm receipt, that
>> would be extremely helpful!
>>
>> https://www.dropbox.com/s/179jrm19kx9o7dz/huxtable_0.2.0.tar.gz?dl=0
>>
>>
> Not sure if Uwe has had a chance to look, but I just ran R CMD check on
> your tarball using the latest version of R-devel.  It reported the
> following problems:
>
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?David Hugh-Jones <davidhughjones at gmail.com>?
>
> Found the following (possibly) invalid URLs:
>   URL: http://cran.rstudio.com/web/packages/huxtable/index.html
>     From: README.md
>     CRAN URL not in canonical form
>   Canonical CRAN.R-project.org URLs use https.
>
> The URL for your package should be in the form
>
> https://CRAN.R-project.org/package=huxtable
>
> * checking top-level files ... NOTE
> Non-standard file/directory found at top level:
>   ?multirow.rds?
>
> I'm not sure where that file belongs, but not there.
>
> * checking files in ?vignettes? ... WARNING
> Files in the 'vignettes' directory newer than all files in 'inst/doc':
>   ?huxreg.html?, ?huxtable.html?
>
> Those files shouldn't be in the vignettes directory, they are products of
> building the vignettes.  Only the source should normally be in the
> vignettes directory.
>
> * checking package vignettes in ?inst/doc? ... WARNING
> Package vignettes without corresponding PDF/HTML:
>    ?design-principles.Rmd?
>    ?huxreg.Rmd?
>    ?huxtable.Rmd?
>
> I think this is the warning you were asking about.  If I look at just the
> first of those files, I see that design-principles.Rmd exists in vignettes
> and is set to produce PDF output (only the first output entry in the YAML
> counts).  You also have a .html file in vignettes; it shouldn't be there.
> In inst/doc, you have source, .html and .pdf versions of that file.
>
> The warning isn't very helpful, but I think it is triggered by the fact
> that you've got the .html file in your vignettes directory.  If I remove
> everything but the source from that directory, and everything from the
> inst/doc directory, then all the vignette warnings go away.
>
> (I haven't traced through the code, but I think the warning may be
> literally correct.  Since you had .html files that looked like vignette
> outputs but weren't, you have vignettes without *corresponding* HTML. It
> would have been nicer if it suggested how to fix this, but that vignette
> code is quite tricky, because any file could be source, and any html, tex
> or pdf file could be output.  At some point I may try to clean it up a bit
> and then maybe the error messages will be less obscure.)
>
> Duncan Murdoch
>

	[[alternative HTML version deleted]]


From brian at braverock.com  Thu Apr 20 10:57:06 2017
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 20 Apr 2017 03:57:06 -0500
Subject: [R-pkg-devel] R CMD check not finding my vignettes
In-Reply-To: <CAARY7khBhumJHrn_g=R=AHMptuyiLMcprmb12_ZVcaNSyO45Kw@mail.gmail.com>
References: <CAARY7ki02r8gLWJEhvLOm1k5N1VduKpunTBr0WSejfy3671Wjg@mail.gmail.com>
 <CAARY7khMwu1HDpt=Pm4uQkLttG12ocQm8sm9OsVgZZnL=AMKCQ@mail.gmail.com>
 <8088e565-0eea-748a-b5f0-ab72beeb92d7@statistik.tu-dortmund.de>
 <CAARY7kiT=TqskL3ttNGybXxg+uA5o3pu_5ioXs11=DWr5-4Kkw@mail.gmail.com>
 <677dcfda-4766-a3e2-30a3-9b663084eba2@statistik.tu-dortmund.de>
 <CAARY7kjxAV3Hw=v5fYEpeAGehwAUcD_tz1povpopLGXDnysqJA@mail.gmail.com>
 <CAARY7kirCEf67xqJz0OqQHqdRGPca_3rzu_F+5jcK-UGE6sCrA@mail.gmail.com>
 <2966bd61-5e33-c7f1-19a4-0bbe36f9e11c@gmail.com>
 <CAARY7khBhumJHrn_g=R=AHMptuyiLMcprmb12_ZVcaNSyO45Kw@mail.gmail.com>
Message-ID: <75a574a3-41ae-367e-df99-dbf13c708099@braverock.com>

David,

I'd suggest creating a vignette for each of HTML and PDF, and including 
a source file that contains the common code.  e.g. have a pdf header and 
an html header file, and then include the 'main' Rmd as a child doc from 
each header Rmd.  This way R CMD build could build both pdf and html 
versions of the output.

Regards,

Brian

On 04/20/2017 03:38 AM, David Hugh-Jones wrote:
> Hi Duncan,
>
> Thank you very much for taking the time to look at this.
>
> I tried rebuilding the tar file so as to include only the .Rmd files, not
> the HTML files, in 'vignettes':
>
> drwxr-xr-x  0 david  staff       0 20 Apr 09:21 huxtable/vignettes/
>
> -rw-r--r--  0 david  staff    1633  6 Apr 16:26
> huxtable/vignettes/comparison.csv
>
> -rw-r--r--  0 david  staff    6697  6 Apr 14:44
> huxtable/vignettes/design-principles.Rmd
>
> -rw-r--r--  0 david  staff    5521  6 Apr 14:30
> huxtable/vignettes/huxreg.Rmd
>
> -rw-r--r--  0 david  staff   20552  6 Apr 16:19
> huxtable/vignettes/huxtable.Rmd
>
> -rw-r--r--  0 david  staff      22 17 Mar 00:19
> huxtable/vignettes/placeins-header.tex
>
>
> But when I run R CMD check, I still get the same warning:
>
> * checking package vignettes in ?inst/doc? ... WARNING
>
> Package vignettes without corresponding PDF/HTML:
>
>    ?design-principles.Rmd?
>
>    ?huxreg.Rmd?
>
>    ?huxtable.Rmd?
>
> So, the warning does not seem to be related to the presence of HTML files
> in vignettes.
>
> I also tried manually removing .Rmd files from inst/doc (leaving them only
> in vignettes) but this still gave the same error.
>
> My goal here is that for package-specific reasons, I would like both pdf
> and HTML versions of my vignettes to be available (I am writing code that
> prints HTML and LaTeX tables and want my users to have examples of how both
> output formats work). This is why I build those files manually, and place
> them in inst/doc.
>
> Side comment: at the moment, I feel as if I am running through the
> combinatorics of including and excluding files from vignettes and inst/doc,
> without much insight into what I am doing. Would it be fair to say that the
> current system is not very easy to comprehend?
>
> Cheers,
>
> David
>
> On 19 April 2017 at 21:24, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
>> On 19/04/2017 1:00 PM, David Hugh-Jones wrote:
>>
>>> Hi Uwe,
>>>
>>> I'm not sure if you ever got my off-list message with my tarball or
>>> subsequent messages. I can't send a tarball on-list - it gets rejected as
>>> too large - but here is a dropbox link. If you could confirm receipt, that
>>> would be extremely helpful!
>>>
>>> https://www.dropbox.com/s/179jrm19kx9o7dz/huxtable_0.2.0.tar.gz?dl=0
>>>
>>>
>> Not sure if Uwe has had a chance to look, but I just ran R CMD check on
>> your tarball using the latest version of R-devel.  It reported the
>> following problems:
>>
>> * checking CRAN incoming feasibility ... NOTE
>> Maintainer: ?David Hugh-Jones <davidhughjones at gmail.com>?
>>
>> Found the following (possibly) invalid URLs:
>>   URL: http://cran.rstudio.com/web/packages/huxtable/index.html
>>     From: README.md
>>     CRAN URL not in canonical form
>>   Canonical CRAN.R-project.org URLs use https.
>>
>> The URL for your package should be in the form
>>
>> https://CRAN.R-project.org/package=huxtable
>>
>> * checking top-level files ... NOTE
>> Non-standard file/directory found at top level:
>>   ?multirow.rds?
>>
>> I'm not sure where that file belongs, but not there.
>>
>> * checking files in ?vignettes? ... WARNING
>> Files in the 'vignettes' directory newer than all files in 'inst/doc':
>>   ?huxreg.html?, ?huxtable.html?
>>
>> Those files shouldn't be in the vignettes directory, they are products of
>> building the vignettes.  Only the source should normally be in the
>> vignettes directory.
>>
>> * checking package vignettes in ?inst/doc? ... WARNING
>> Package vignettes without corresponding PDF/HTML:
>>    ?design-principles.Rmd?
>>    ?huxreg.Rmd?
>>    ?huxtable.Rmd?
>>
>> I think this is the warning you were asking about.  If I look at just the
>> first of those files, I see that design-principles.Rmd exists in vignettes
>> and is set to produce PDF output (only the first output entry in the YAML
>> counts).  You also have a .html file in vignettes; it shouldn't be there.
>> In inst/doc, you have source, .html and .pdf versions of that file.
>>
>> The warning isn't very helpful, but I think it is triggered by the fact
>> that you've got the .html file in your vignettes directory.  If I remove
>> everything but the source from that directory, and everything from the
>> inst/doc directory, then all the vignette warnings go away.
>>
>> (I haven't traced through the code, but I think the warning may be
>> literally correct.  Since you had .html files that looked like vignette
>> outputs but weren't, you have vignettes without *corresponding* HTML. It
>> would have been nicer if it suggested how to fix this, but that vignette
>> code is quite tricky, because any file could be source, and any html, tex
>> or pdf file could be output.  At some point I may try to clean it up a bit
>> and then maybe the error messages will be less obscure.)
>>
>> Duncan Murdoch
>>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From xgdgsc at gmail.com  Thu Apr 20 14:26:40 2017
From: xgdgsc at gmail.com (GSC)
Date: Thu, 20 Apr 2017 12:26:40 +0000
Subject: [R-pkg-devel] How to fix errors in R headers when uploading my
	package to win-builer
In-Reply-To: <CAO63teCVTTOnxnKRZ1vaR2uWsN_ZabFR8qYgDNd08vNyOH8y2A@mail.gmail.com>
References: <CAO63teAzTU-kDQro9vYMLFL6gV7WCiRHd4Y2GwMozrVrUzy6SQ@mail.gmail.com>
 <CAO63teCVTTOnxnKRZ1vaR2uWsN_ZabFR8qYgDNd08vNyOH8y2A@mail.gmail.com>
Message-ID: <CAO63teBTZc7Z+PdFsd=K0_RAbOUjD=VE9rK2-NB=H53UpWqYUg@mail.gmail.com>

I figured it out as header clash. Putting #include R headers after Windows
headers works for me.

GSC <xgdgsc at gmail.com>?2017?4?18??? ??9:54???

> That link is deprecated, new link to log:
> https://win-builder.r-project.org/I3u4Z9BbLHsC/ .
>
> GSC <xgdgsc at gmail.com>?2017?4?17??? ??10:47???
>
>> I have no idea how I could fix these compiling errors in R headers.
>> Testing my package locally on archlinux is fine. The link to build log is:
>> https://win-builder.r-project.org/08H2Ne0lShbY/ . Please help.
>>
>> Thanks!
>>
>

	[[alternative HTML version deleted]]


From alexandre.courtiol at gmail.com  Thu Apr 20 15:09:02 2017
From: alexandre.courtiol at gmail.com (Alexandre Courtiol)
Date: Thu, 20 Apr 2017 15:09:02 +0200
Subject: [R-pkg-devel] Issue with including vignettes without building
	package
Message-ID: <CAERMt4eA7pj-56hDH6vc31HnG8nFD9Yb7PJR2Nueb-f0UWgBgA@mail.gmail.com>

Dear all,

I am using a package for teaching:
my slides are html vignettes, and it is convenient for students to control
which packages they must install, provide code and datasets.

As I am often editing the package live during the course, it would be great
if I could just push to github and that the student would just have to run
a devtools::install_github() to get my updated vignettes. I would rather
not to have to build the package before pushing to save time.

The issues is that I do not want to build the vignettes on install as they
are very slow to build. On my computer however it is quick because I have
cached the knitr chunks output. So I was hoping to just have to run
devtools::build_vignettes() on my machine before pushing the files thereby
created (./inst/doc) and that the student could just
devtools::install_github().

I cannot make this work: no vignettes are found after install. When I do
check the repository beeing installed on their computers, the html, Rmd and
R files corresponding to the vignettes are present in ./doc, so it is not
an issue of having the wrong .gitgnore configuration.

I have read about many vignettes related issues on the net, but I did not
find something dealing with this precise issue.

PS: I know about the R.rsp hack, but I would prefer to find a solution more
direct.

Best,

Alex




-- 
Alexandre Courtiol

http://sites.google.com/site/alexandrecourtiol/home

*"Science is the belief in the ignorance of experts"*, R. Feynman

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Thu Apr 20 15:41:36 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 20 Apr 2017 09:41:36 -0400
Subject: [R-pkg-devel] R CMD check not finding my vignettes
In-Reply-To: <CAARY7khBhumJHrn_g=R=AHMptuyiLMcprmb12_ZVcaNSyO45Kw@mail.gmail.com>
References: <CAARY7ki02r8gLWJEhvLOm1k5N1VduKpunTBr0WSejfy3671Wjg@mail.gmail.com>
 <CAARY7khMwu1HDpt=Pm4uQkLttG12ocQm8sm9OsVgZZnL=AMKCQ@mail.gmail.com>
 <8088e565-0eea-748a-b5f0-ab72beeb92d7@statistik.tu-dortmund.de>
 <CAARY7kiT=TqskL3ttNGybXxg+uA5o3pu_5ioXs11=DWr5-4Kkw@mail.gmail.com>
 <677dcfda-4766-a3e2-30a3-9b663084eba2@statistik.tu-dortmund.de>
 <CAARY7kjxAV3Hw=v5fYEpeAGehwAUcD_tz1povpopLGXDnysqJA@mail.gmail.com>
 <CAARY7kirCEf67xqJz0OqQHqdRGPca_3rzu_F+5jcK-UGE6sCrA@mail.gmail.com>
 <2966bd61-5e33-c7f1-19a4-0bbe36f9e11c@gmail.com>
 <CAARY7khBhumJHrn_g=R=AHMptuyiLMcprmb12_ZVcaNSyO45Kw@mail.gmail.com>
Message-ID: <dd9c0e50-d8d6-92d5-498c-f66f432810e0@gmail.com>

On 20/04/2017 4:38 AM, David Hugh-Jones wrote:
>
> Hi Duncan,
>
> Thank you very much for taking the time to look at this.
>
> I tried rebuilding the tar file so as to include only the .Rmd files,
> not the HTML files, in 'vignettes':
>
> drwxr-xr-x  0 david  staff       0 20 Apr 09:21 huxtable/vignettes/
>
> -rw-r--r--  0 david  staff    1633  6 Apr 16:26
> huxtable/vignettes/comparison.csv
>
> -rw-r--r--  0 david  staff    6697  6 Apr 14:44
> huxtable/vignettes/design-principles.Rmd
>
> -rw-r--r--  0 david  staff    5521  6 Apr 14:30
> huxtable/vignettes/huxreg.Rmd
>
> -rw-r--r--  0 david  staff   20552  6 Apr 16:19
> huxtable/vignettes/huxtable.Rmd
>
> -rw-r--r--  0 david  staff      22 17 Mar 00:19
> huxtable/vignettes/placeins-header.tex
>
>
> But when I run R CMD check, I still get the same warning:
>
> * checking package vignettes in ?inst/doc? ... WARNING
>
> Package vignettes without corresponding PDF/HTML:
>
>    ?design-principles.Rmd?
>
>    ?huxreg.Rmd?
>
>    ?huxtable.Rmd?
>
> So, the warning does not seem to be related to the presence of HTML
> files in vignettes.
>
> I also tried manually removing .Rmd files from inst/doc (leaving them
> only in vignettes) but this still gave the same error.
>
> My goal here is that for package-specific reasons, I would like both pdf
> and HTML versions of my vignettes to be available (I am writing code
> that prints HTML and LaTeX tables and want my users to have examples of
> how both output formats work). This is why I build those files manually,
> and place them in inst/doc.

I suspect this will cause troubles if you give them the same base names 
as the vignettes.  You can rename them in inst/doc (e.g. to 
HTMLdesign-principles.html) and they'll be included as non-vignette 
files, but the current setup only allows for one kind of output file. 
This is unlikely to change soon, because it affects lots of assumptions 
in the code.

> Side comment: at the moment, I feel as if I am running through the
> combinatorics of including and excluding files from vignettes and
> inst/doc, without much insight into what I am doing. Would it be fair to
> say that the current system is not very easy to comprehend?

No, though I think it's fair to say it's not very flexible.  The basic 
rules are pretty easy:

- Don't put vignettes (source or output) in inst/doc/.  R CMD build 
should do that for you.
- Don't put vignette outputs in vignettes/, just put the source there.

There are ways to bend the rules that some people use (e.g. if running R 
CMD build takes too long, some people find tricky ways to copy vignette 
outputs without building them), but those are likely pretty fragile.  As 
you appear to have found.

Duncan Murdoch


From murdoch.duncan at gmail.com  Thu Apr 20 15:42:52 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 20 Apr 2017 09:42:52 -0400
Subject: [R-pkg-devel] R CMD check not finding my vignettes
In-Reply-To: <75a574a3-41ae-367e-df99-dbf13c708099@braverock.com>
References: <CAARY7ki02r8gLWJEhvLOm1k5N1VduKpunTBr0WSejfy3671Wjg@mail.gmail.com>
 <CAARY7khMwu1HDpt=Pm4uQkLttG12ocQm8sm9OsVgZZnL=AMKCQ@mail.gmail.com>
 <8088e565-0eea-748a-b5f0-ab72beeb92d7@statistik.tu-dortmund.de>
 <CAARY7kiT=TqskL3ttNGybXxg+uA5o3pu_5ioXs11=DWr5-4Kkw@mail.gmail.com>
 <677dcfda-4766-a3e2-30a3-9b663084eba2@statistik.tu-dortmund.de>
 <CAARY7kjxAV3Hw=v5fYEpeAGehwAUcD_tz1povpopLGXDnysqJA@mail.gmail.com>
 <CAARY7kirCEf67xqJz0OqQHqdRGPca_3rzu_F+5jcK-UGE6sCrA@mail.gmail.com>
 <2966bd61-5e33-c7f1-19a4-0bbe36f9e11c@gmail.com>
 <CAARY7khBhumJHrn_g=R=AHMptuyiLMcprmb12_ZVcaNSyO45Kw@mail.gmail.com>
 <75a574a3-41ae-367e-df99-dbf13c708099@braverock.com>
Message-ID: <ffdc73a4-1210-ca8f-5bbc-9e51344e7b3f@gmail.com>

On 20/04/2017 4:57 AM, Brian G. Peterson wrote:
> David,
>
> I'd suggest creating a vignette for each of HTML and PDF, and including
> a source file that contains the common code.  e.g. have a pdf header and
> an html header file, and then include the 'main' Rmd as a child doc from
> each header Rmd.  This way R CMD build could build both pdf and html
> versions of the output.

That's another solution.  My suggestion would be simpler:  just pick one 
of PDF or HTML, and give the user instructions to produce the other if 
necessary, but don't produce it for them.

Duncan Murdoch

>
> Regards,
>
> Brian
>
> On 04/20/2017 03:38 AM, David Hugh-Jones wrote:
>> Hi Duncan,
>>
>> Thank you very much for taking the time to look at this.
>>
>> I tried rebuilding the tar file so as to include only the .Rmd files, not
>> the HTML files, in 'vignettes':
>>
>> drwxr-xr-x  0 david  staff       0 20 Apr 09:21 huxtable/vignettes/
>>
>> -rw-r--r--  0 david  staff    1633  6 Apr 16:26
>> huxtable/vignettes/comparison.csv
>>
>> -rw-r--r--  0 david  staff    6697  6 Apr 14:44
>> huxtable/vignettes/design-principles.Rmd
>>
>> -rw-r--r--  0 david  staff    5521  6 Apr 14:30
>> huxtable/vignettes/huxreg.Rmd
>>
>> -rw-r--r--  0 david  staff   20552  6 Apr 16:19
>> huxtable/vignettes/huxtable.Rmd
>>
>> -rw-r--r--  0 david  staff      22 17 Mar 00:19
>> huxtable/vignettes/placeins-header.tex
>>
>>
>> But when I run R CMD check, I still get the same warning:
>>
>> * checking package vignettes in ?inst/doc? ... WARNING
>>
>> Package vignettes without corresponding PDF/HTML:
>>
>>    ?design-principles.Rmd?
>>
>>    ?huxreg.Rmd?
>>
>>    ?huxtable.Rmd?
>>
>> So, the warning does not seem to be related to the presence of HTML files
>> in vignettes.
>>
>> I also tried manually removing .Rmd files from inst/doc (leaving them only
>> in vignettes) but this still gave the same error.
>>
>> My goal here is that for package-specific reasons, I would like both pdf
>> and HTML versions of my vignettes to be available (I am writing code that
>> prints HTML and LaTeX tables and want my users to have examples of how both
>> output formats work). This is why I build those files manually, and place
>> them in inst/doc.
>>
>> Side comment: at the moment, I feel as if I am running through the
>> combinatorics of including and excluding files from vignettes and inst/doc,
>> without much insight into what I am doing. Would it be fair to say that the
>> current system is not very easy to comprehend?
>>
>> Cheers,
>>
>> David
>>
>> On 19 April 2017 at 21:24, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>>> On 19/04/2017 1:00 PM, David Hugh-Jones wrote:
>>>
>>>> Hi Uwe,
>>>>
>>>> I'm not sure if you ever got my off-list message with my tarball or
>>>> subsequent messages. I can't send a tarball on-list - it gets rejected as
>>>> too large - but here is a dropbox link. If you could confirm receipt, that
>>>> would be extremely helpful!
>>>>
>>>> https://www.dropbox.com/s/179jrm19kx9o7dz/huxtable_0.2.0.tar.gz?dl=0
>>>>
>>>>
>>> Not sure if Uwe has had a chance to look, but I just ran R CMD check on
>>> your tarball using the latest version of R-devel.  It reported the
>>> following problems:
>>>
>>> * checking CRAN incoming feasibility ... NOTE
>>> Maintainer: ?David Hugh-Jones <davidhughjones at gmail.com>?
>>>
>>> Found the following (possibly) invalid URLs:
>>>   URL: http://cran.rstudio.com/web/packages/huxtable/index.html
>>>     From: README.md
>>>     CRAN URL not in canonical form
>>>   Canonical CRAN.R-project.org URLs use https.
>>>
>>> The URL for your package should be in the form
>>>
>>> https://CRAN.R-project.org/package=huxtable
>>>
>>> * checking top-level files ... NOTE
>>> Non-standard file/directory found at top level:
>>>   ?multirow.rds?
>>>
>>> I'm not sure where that file belongs, but not there.
>>>
>>> * checking files in ?vignettes? ... WARNING
>>> Files in the 'vignettes' directory newer than all files in 'inst/doc':
>>>   ?huxreg.html?, ?huxtable.html?
>>>
>>> Those files shouldn't be in the vignettes directory, they are products of
>>> building the vignettes.  Only the source should normally be in the
>>> vignettes directory.
>>>
>>> * checking package vignettes in ?inst/doc? ... WARNING
>>> Package vignettes without corresponding PDF/HTML:
>>>    ?design-principles.Rmd?
>>>    ?huxreg.Rmd?
>>>    ?huxtable.Rmd?
>>>
>>> I think this is the warning you were asking about.  If I look at just the
>>> first of those files, I see that design-principles.Rmd exists in vignettes
>>> and is set to produce PDF output (only the first output entry in the YAML
>>> counts).  You also have a .html file in vignettes; it shouldn't be there.
>>> In inst/doc, you have source, .html and .pdf versions of that file.
>>>
>>> The warning isn't very helpful, but I think it is triggered by the fact
>>> that you've got the .html file in your vignettes directory.  If I remove
>>> everything but the source from that directory, and everything from the
>>> inst/doc directory, then all the vignette warnings go away.
>>>
>>> (I haven't traced through the code, but I think the warning may be
>>> literally correct.  Since you had .html files that looked like vignette
>>> outputs but weren't, you have vignettes without *corresponding* HTML. It
>>> would have been nicer if it suggested how to fix this, but that vignette
>>> code is quite tricky, because any file could be source, and any html, tex
>>> or pdf file could be output.  At some point I may try to clean it up a bit
>>> and then maybe the error messages will be less obscure.)
>>>
>>> Duncan Murdoch
>>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>


From davidhughjones at gmail.com  Thu Apr 20 15:58:03 2017
From: davidhughjones at gmail.com (David Hugh-Jones)
Date: Thu, 20 Apr 2017 14:58:03 +0100
Subject: [R-pkg-devel] R CMD check not finding my vignettes
In-Reply-To: <ffdc73a4-1210-ca8f-5bbc-9e51344e7b3f@gmail.com>
References: <CAARY7ki02r8gLWJEhvLOm1k5N1VduKpunTBr0WSejfy3671Wjg@mail.gmail.com>
 <CAARY7khMwu1HDpt=Pm4uQkLttG12ocQm8sm9OsVgZZnL=AMKCQ@mail.gmail.com>
 <8088e565-0eea-748a-b5f0-ab72beeb92d7@statistik.tu-dortmund.de>
 <CAARY7kiT=TqskL3ttNGybXxg+uA5o3pu_5ioXs11=DWr5-4Kkw@mail.gmail.com>
 <677dcfda-4766-a3e2-30a3-9b663084eba2@statistik.tu-dortmund.de>
 <CAARY7kjxAV3Hw=v5fYEpeAGehwAUcD_tz1povpopLGXDnysqJA@mail.gmail.com>
 <CAARY7kirCEf67xqJz0OqQHqdRGPca_3rzu_F+5jcK-UGE6sCrA@mail.gmail.com>
 <2966bd61-5e33-c7f1-19a4-0bbe36f9e11c@gmail.com>
 <CAARY7khBhumJHrn_g=R=AHMptuyiLMcprmb12_ZVcaNSyO45Kw@mail.gmail.com>
 <75a574a3-41ae-367e-df99-dbf13c708099@braverock.com>
 <ffdc73a4-1210-ca8f-5bbc-9e51344e7b3f@gmail.com>
Message-ID: <CAARY7kji9evJ=BpZVRk9RYtdHjSBuDNNM3Gfi=UXWn65-qQHFQ@mail.gmail.com>

Hi guys,

Thanks very much for all of your comments. I now have a good sense of what
the possibilities are, and I will think about what works best for my
package.

Cheers,
David


On 20 April 2017 at 14:42, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> On 20/04/2017 4:57 AM, Brian G. Peterson wrote:
>
>> David,
>>
>> I'd suggest creating a vignette for each of HTML and PDF, and including
>> a source file that contains the common code.  e.g. have a pdf header and
>> an html header file, and then include the 'main' Rmd as a child doc from
>> each header Rmd.  This way R CMD build could build both pdf and html
>> versions of the output.
>>
>
> That's another solution.  My suggestion would be simpler:  just pick one
> of PDF or HTML, and give the user instructions to produce the other if
> necessary, but don't produce it for them.
>
> Duncan Murdoch
>
>
>
>> Regards,
>>
>> Brian
>>
>> On 04/20/2017 03:38 AM, David Hugh-Jones wrote:
>>
>>> Hi Duncan,
>>>
>>> Thank you very much for taking the time to look at this.
>>>
>>> I tried rebuilding the tar file so as to include only the .Rmd files, not
>>> the HTML files, in 'vignettes':
>>>
>>> drwxr-xr-x  0 david  staff       0 20 Apr 09:21 huxtable/vignettes/
>>>
>>> -rw-r--r--  0 david  staff    1633  6 Apr 16:26
>>> huxtable/vignettes/comparison.csv
>>>
>>> -rw-r--r--  0 david  staff    6697  6 Apr 14:44
>>> huxtable/vignettes/design-principles.Rmd
>>>
>>> -rw-r--r--  0 david  staff    5521  6 Apr 14:30
>>> huxtable/vignettes/huxreg.Rmd
>>>
>>> -rw-r--r--  0 david  staff   20552  6 Apr 16:19
>>> huxtable/vignettes/huxtable.Rmd
>>>
>>> -rw-r--r--  0 david  staff      22 17 Mar 00:19
>>> huxtable/vignettes/placeins-header.tex
>>>
>>>
>>> But when I run R CMD check, I still get the same warning:
>>>
>>> * checking package vignettes in ?inst/doc? ... WARNING
>>>
>>> Package vignettes without corresponding PDF/HTML:
>>>
>>>    ?design-principles.Rmd?
>>>
>>>    ?huxreg.Rmd?
>>>
>>>    ?huxtable.Rmd?
>>>
>>> So, the warning does not seem to be related to the presence of HTML files
>>> in vignettes.
>>>
>>> I also tried manually removing .Rmd files from inst/doc (leaving them
>>> only
>>> in vignettes) but this still gave the same error.
>>>
>>> My goal here is that for package-specific reasons, I would like both pdf
>>> and HTML versions of my vignettes to be available (I am writing code that
>>> prints HTML and LaTeX tables and want my users to have examples of how
>>> both
>>> output formats work). This is why I build those files manually, and place
>>> them in inst/doc.
>>>
>>> Side comment: at the moment, I feel as if I am running through the
>>> combinatorics of including and excluding files from vignettes and
>>> inst/doc,
>>> without much insight into what I am doing. Would it be fair to say that
>>> the
>>> current system is not very easy to comprehend?
>>>
>>> Cheers,
>>>
>>> David
>>>
>>> On 19 April 2017 at 21:24, Duncan Murdoch <murdoch.duncan at gmail.com>
>>> wrote:
>>>
>>> On 19/04/2017 1:00 PM, David Hugh-Jones wrote:
>>>>
>>>> Hi Uwe,
>>>>>
>>>>> I'm not sure if you ever got my off-list message with my tarball or
>>>>> subsequent messages. I can't send a tarball on-list - it gets rejected
>>>>> as
>>>>> too large - but here is a dropbox link. If you could confirm receipt,
>>>>> that
>>>>> would be extremely helpful!
>>>>>
>>>>> https://www.dropbox.com/s/179jrm19kx9o7dz/huxtable_0.2.0.tar.gz?dl=0
>>>>>
>>>>>
>>>>> Not sure if Uwe has had a chance to look, but I just ran R CMD check on
>>>> your tarball using the latest version of R-devel.  It reported the
>>>> following problems:
>>>>
>>>> * checking CRAN incoming feasibility ... NOTE
>>>> Maintainer: ?David Hugh-Jones <davidhughjones at gmail.com>?
>>>>
>>>> Found the following (possibly) invalid URLs:
>>>>   URL: http://cran.rstudio.com/web/packages/huxtable/index.html
>>>>     From: README.md
>>>>     CRAN URL not in canonical form
>>>>   Canonical CRAN.R-project.org URLs use https.
>>>>
>>>> The URL for your package should be in the form
>>>>
>>>> https://CRAN.R-project.org/package=huxtable
>>>>
>>>> * checking top-level files ... NOTE
>>>> Non-standard file/directory found at top level:
>>>>   ?multirow.rds?
>>>>
>>>> I'm not sure where that file belongs, but not there.
>>>>
>>>> * checking files in ?vignettes? ... WARNING
>>>> Files in the 'vignettes' directory newer than all files in 'inst/doc':
>>>>   ?huxreg.html?, ?huxtable.html?
>>>>
>>>> Those files shouldn't be in the vignettes directory, they are products
>>>> of
>>>> building the vignettes.  Only the source should normally be in the
>>>> vignettes directory.
>>>>
>>>> * checking package vignettes in ?inst/doc? ... WARNING
>>>> Package vignettes without corresponding PDF/HTML:
>>>>    ?design-principles.Rmd?
>>>>    ?huxreg.Rmd?
>>>>    ?huxtable.Rmd?
>>>>
>>>> I think this is the warning you were asking about.  If I look at just
>>>> the
>>>> first of those files, I see that design-principles.Rmd exists in
>>>> vignettes
>>>> and is set to produce PDF output (only the first output entry in the
>>>> YAML
>>>> counts).  You also have a .html file in vignettes; it shouldn't be
>>>> there.
>>>> In inst/doc, you have source, .html and .pdf versions of that file.
>>>>
>>>> The warning isn't very helpful, but I think it is triggered by the fact
>>>> that you've got the .html file in your vignettes directory.  If I remove
>>>> everything but the source from that directory, and everything from the
>>>> inst/doc directory, then all the vignette warnings go away.
>>>>
>>>> (I haven't traced through the code, but I think the warning may be
>>>> literally correct.  Since you had .html files that looked like vignette
>>>> outputs but weren't, you have vignettes without *corresponding* HTML. It
>>>> would have been nicer if it suggested how to fix this, but that vignette
>>>> code is quite tricky, because any file could be source, and any html,
>>>> tex
>>>> or pdf file could be output.  At some point I may try to clean it up a
>>>> bit
>>>> and then maybe the error messages will be less obscure.)
>>>>
>>>> Duncan Murdoch
>>>>
>>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>>
>>
>>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From roy.mendelssohn at noaa.gov  Thu Apr 20 16:41:21 2017
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Thu, 20 Apr 2017 07:41:21 -0700
Subject: [R-pkg-devel] Interplay between knitr() and View()
In-Reply-To: <CAARY7kj2jZZAtG2TXCaWNq4q9FrxyjQUoJRZhVN01isAugFGrg@mail.gmail.com>
References: <13120484-64C7-4F8B-A710-3A50F8AF7473@noaa.gov>
 <CAJuCY5w6K53GEDsxMHzj-YM=yc5ZoK_AZ8XAdQCX-8i_Y3Pqcg@mail.gmail.com>
 <CAARY7kj2jZZAtG2TXCaWNq4q9FrxyjQUoJRZhVN01isAugFGrg@mail.gmail.com>
Message-ID: <831E83A9-F3F7-4E10-A93B-C55E6A79BF3E@noaa.gov>

Thanks all for the suggestions.

If I have screenshots in the Vignette, where should I put the picture files - in the vignette folder (this is so it will work when submitted to CRAN)?

As for why display the result,  just a design decision. Sometimes it makes sense to display right away the results of a query, particularly if a lot of the users are not that familiar with R.  I will look into DT::datatable,  but that means one more package I have to suggest and make certain that I stay current with.

What I liked about View() is often the table is quite big, and View() provides scroll bars and nice headers that make it easy to look over the results.

-Roy

> On Apr 20, 2017, at 12:45 AM, David Hugh-Jones <davidhughjones at gmail.com> wrote:
> 
> 
> Two questions:
> 
> 1. If your package definitely needs to call View(), and you want to explain how that will look, then why not show one or more screenshots in your documentation?
> 
> 2. Why does your package need to call View? Why can't it return the metadata as a data frame, and let the user do what he wants with it himself - using View(), head(), or any other tool?
> 
> Cheers
> D
> 
> 
> 
> 
> 
> > Hi All:
> >
> > My package allows the user to search for information about the data
> > available, and the information is returned in a dataframe. I had long been
> > looking for a nice way to display the results  (the datasets' metadata),
> > and wasn't too happy with anything until I tried the View() command,  which
> > does exactly what I want.
> >
> > The problem is I can't seem to find a way to make View() and knitr() work
> > nice together in creating the vignette. Given the way View() works I doubt
> > there is a way,  but any suggestions of how I can show what the user will
> > see when the given the command in the package from within my vignette?
> >
> > Thanks,
> >
> > -Roy
> >
> >
> >
> > **********************
> > "The contents of this message do not reflect any position of the U.S.
> > Government or NOAA."
> > **********************
> > Roy Mendelssohn
> > Supervisory Operations Research Analyst
> > NOAA/NMFS
> > Environmental Research Division
> > Southwest Fisheries Science Center
> > ***Note new street address***
> > 110 McAllister Way
> > Santa Cruz, CA 95060
> > Phone: (831)-420-3666
> > Fax: (831) 420-3980
> > e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> >
> > "Old age and treachery will overcome youth and skill."
> > "From those who have been given much, much will be expected"
> > "the arc of the moral universe is long, but it bends toward justice" -MLK
> > Jr.
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> 
>         [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> -- 
> Sent from Gmail Mobile

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From sven.templer at gmail.com  Thu Apr 20 21:01:23 2017
From: sven.templer at gmail.com (Sven E Templer)
Date: Thu, 20 Apr 2017 21:01:23 +0200
Subject: [R-pkg-devel] Issue with including vignettes without building
 package
In-Reply-To: <CAERMt4eA7pj-56hDH6vc31HnG8nFD9Yb7PJR2Nueb-f0UWgBgA@mail.gmail.com>
References: <CAERMt4eA7pj-56hDH6vc31HnG8nFD9Yb7PJR2Nueb-f0UWgBgA@mail.gmail.com>
Message-ID: <E9D40AB8-C149-45B6-A027-57EE7199CB3E@gmail.com>

Hi Alex,


what if you run

devtools::install_github(build_vignettes = TRUE)

on your students computer?

See ?devtools::install


Best,

Sven


> On 20. Apr 2017, at 15:09, Alexandre Courtiol <alexandre.courtiol at gmail.com> wrote:
> 
> Dear all,
> 
> I am using a package for teaching:
> my slides are html vignettes, and it is convenient for students to control
> which packages they must install, provide code and datasets.
> 
> As I am often editing the package live during the course, it would be great
> if I could just push to github and that the student would just have to run
> a devtools::install_github() to get my updated vignettes. I would rather
> not to have to build the package before pushing to save time.
> 
> The issues is that I do not want to build the vignettes on install as they
> are very slow to build. On my computer however it is quick because I have
> cached the knitr chunks output. So I was hoping to just have to run
> devtools::build_vignettes() on my machine before pushing the files thereby
> created (./inst/doc) and that the student could just
> devtools::install_github().
> 
> I cannot make this work: no vignettes are found after install. When I do
> check the repository beeing installed on their computers, the html, Rmd and
> R files corresponding to the vignettes are present in ./doc, so it is not
> an issue of having the wrong .gitgnore configuration.
> 
> I have read about many vignettes related issues on the net, but I did not
> find something dealing with this precise issue.
> 
> PS: I know about the R.rsp hack, but I would prefer to find a solution more
> direct.
> 
> Best,
> 
> Alex
> 
> 
> 
> 
> -- 
> Alexandre Courtiol
> 
> http://sites.google.com/site/alexandrecourtiol/home
> 
> *"Science is the belief in the ignorance of experts"*, R. Feynman
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From alexandre.courtiol at gmail.com  Thu Apr 20 22:30:22 2017
From: alexandre.courtiol at gmail.com (Alexandre Courtiol)
Date: Thu, 20 Apr 2017 22:30:22 +0200
Subject: [R-pkg-devel] Issue with including vignettes without building
	package
In-Reply-To: <E9D40AB8-C149-45B6-A027-57EE7199CB3E@gmail.com>
References: <CAERMt4eA7pj-56hDH6vc31HnG8nFD9Yb7PJR2Nueb-f0UWgBgA@mail.gmail.com>
 <E9D40AB8-C149-45B6-A027-57EE7199CB3E@gmail.com>
Message-ID: <CAERMt4fCuz0cZzBxBT6q9vr+BL9y-hb3TxE0WxJaLpE=_dXpOQ@mail.gmail.com>

Thanks but I don't think so, that would imply them to rebuild the
vignettes, which is exactly what I want to avoid.
Without knitr cached chunk it would take forever on their laptops and they
would also need to install tons of packages...
++

On 20 April 2017 at 21:01, Sven E Templer <sven.templer at gmail.com> wrote:

> Hi Alex,
>
>
> what if you run
>
> devtools::install_github(build_vignettes = TRUE)
>
> on your students computer?
>
> See ?devtools::install
>
>
> Best,
>
> Sven
>
>
> > On 20. Apr 2017, at 15:09, Alexandre Courtiol <
> alexandre.courtiol at gmail.com> wrote:
> >
> > Dear all,
> >
> > I am using a package for teaching:
> > my slides are html vignettes, and it is convenient for students to
> control
> > which packages they must install, provide code and datasets.
> >
> > As I am often editing the package live during the course, it would be
> great
> > if I could just push to github and that the student would just have to
> run
> > a devtools::install_github() to get my updated vignettes. I would rather
> > not to have to build the package before pushing to save time.
> >
> > The issues is that I do not want to build the vignettes on install as
> they
> > are very slow to build. On my computer however it is quick because I have
> > cached the knitr chunks output. So I was hoping to just have to run
> > devtools::build_vignettes() on my machine before pushing the files
> thereby
> > created (./inst/doc) and that the student could just
> > devtools::install_github().
> >
> > I cannot make this work: no vignettes are found after install. When I do
> > check the repository beeing installed on their computers, the html, Rmd
> and
> > R files corresponding to the vignettes are present in ./doc, so it is not
> > an issue of having the wrong .gitgnore configuration.
> >
> > I have read about many vignettes related issues on the net, but I did not
> > find something dealing with this precise issue.
> >
> > PS: I know about the R.rsp hack, but I would prefer to find a solution
> more
> > direct.
> >
> > Best,
> >
> > Alex
> >
> >
> >
> >
> > --
> > Alexandre Courtiol
> >
> > http://sites.google.com/site/alexandrecourtiol/home
> >
> > *"Science is the belief in the ignorance of experts"*, R. Feynman
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>


-- 
Alexandre Courtiol

http://sites.google.com/site/alexandrecourtiol/home

*"Science is the belief in the ignorance of experts"*, R. Feynman

	[[alternative HTML version deleted]]


From alexandre.courtiol at gmail.com  Thu Apr 20 22:37:04 2017
From: alexandre.courtiol at gmail.com (Alexandre Courtiol)
Date: Thu, 20 Apr 2017 22:37:04 +0200
Subject: [R-pkg-devel] Issue with including vignettes without building
	package
In-Reply-To: <CAERMt4fCuz0cZzBxBT6q9vr+BL9y-hb3TxE0WxJaLpE=_dXpOQ@mail.gmail.com>
References: <CAERMt4eA7pj-56hDH6vc31HnG8nFD9Yb7PJR2Nueb-f0UWgBgA@mail.gmail.com>
 <E9D40AB8-C149-45B6-A027-57EE7199CB3E@gmail.com>
 <CAERMt4fCuz0cZzBxBT6q9vr+BL9y-hb3TxE0WxJaLpE=_dXpOQ@mail.gmail.com>
Message-ID: <CAERMt4d9HDLoxwYkDJfC_dKr1NsG=r8ra0RmRfZdpb66-hPyYg@mail.gmail.com>

To rephrase my needs, I need to find a way to create the file
/Meta/vignette.rds at install, not build, as all other files for the
vignettes to run are being installed properly.
Has anyone managed to do that?
For now my horrible hack is to have a function calling the vignette through
a call to browseURL(paste0(find.package("XXX"), "/doc/")).
It opens the folder with all the vignette, but it is not as nice as opening
the index in the web browser.
Doing a browseURL on the index.html works but then the links do not... so
that does not help.
Best
Alex

On 20 April 2017 at 22:30, Alexandre Courtiol <alexandre.courtiol at gmail.com>
wrote:

> Thanks but I don't think so, that would imply them to rebuild the
> vignettes, which is exactly what I want to avoid.
> Without knitr cached chunk it would take forever on their laptops and they
> would also need to install tons of packages...
> ++
>
> On 20 April 2017 at 21:01, Sven E Templer <sven.templer at gmail.com> wrote:
>
>> Hi Alex,
>>
>>
>> what if you run
>>
>> devtools::install_github(build_vignettes = TRUE)
>>
>> on your students computer?
>>
>> See ?devtools::install
>>
>>
>> Best,
>>
>> Sven
>>
>>
>> > On 20. Apr 2017, at 15:09, Alexandre Courtiol <
>> alexandre.courtiol at gmail.com> wrote:
>> >
>> > Dear all,
>> >
>> > I am using a package for teaching:
>> > my slides are html vignettes, and it is convenient for students to
>> control
>> > which packages they must install, provide code and datasets.
>> >
>> > As I am often editing the package live during the course, it would be
>> great
>> > if I could just push to github and that the student would just have to
>> run
>> > a devtools::install_github() to get my updated vignettes. I would rather
>> > not to have to build the package before pushing to save time.
>> >
>> > The issues is that I do not want to build the vignettes on install as
>> they
>> > are very slow to build. On my computer however it is quick because I
>> have
>> > cached the knitr chunks output. So I was hoping to just have to run
>> > devtools::build_vignettes() on my machine before pushing the files
>> thereby
>> > created (./inst/doc) and that the student could just
>> > devtools::install_github().
>> >
>> > I cannot make this work: no vignettes are found after install. When I do
>> > check the repository beeing installed on their computers, the html, Rmd
>> and
>> > R files corresponding to the vignettes are present in ./doc, so it is
>> not
>> > an issue of having the wrong .gitgnore configuration.
>> >
>> > I have read about many vignettes related issues on the net, but I did
>> not
>> > find something dealing with this precise issue.
>> >
>> > PS: I know about the R.rsp hack, but I would prefer to find a solution
>> more
>> > direct.
>> >
>> > Best,
>> >
>> > Alex
>> >
>> >
>> >
>> >
>> > --
>> > Alexandre Courtiol
>> >
>> > http://sites.google.com/site/alexandrecourtiol/home
>> >
>> > *"Science is the belief in the ignorance of experts"*, R. Feynman
>> >
>> >       [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>
>
>
> --
> Alexandre Courtiol
>
> http://sites.google.com/site/alexandrecourtiol/home
>
> *"Science is the belief in the ignorance of experts"*, R. Feynman
>



-- 
Alexandre Courtiol

http://sites.google.com/site/alexandrecourtiol/home

*"Science is the belief in the ignorance of experts"*, R. Feynman

	[[alternative HTML version deleted]]


From kamvarz at science.oregonstate.edu  Thu Apr 20 22:39:05 2017
From: kamvarz at science.oregonstate.edu (Zhian Kamvar)
Date: Thu, 20 Apr 2017 15:39:05 -0500
Subject: [R-pkg-devel] Issue with including vignettes without building
 package
In-Reply-To: <CAERMt4fCuz0cZzBxBT6q9vr+BL9y-hb3TxE0WxJaLpE=_dXpOQ@mail.gmail.com>
References: <CAERMt4eA7pj-56hDH6vc31HnG8nFD9Yb7PJR2Nueb-f0UWgBgA@mail.gmail.com>
 <E9D40AB8-C149-45B6-A027-57EE7199CB3E@gmail.com>
 <CAERMt4fCuz0cZzBxBT6q9vr+BL9y-hb3TxE0WxJaLpE=_dXpOQ@mail.gmail.com>
Message-ID: <7AD72249-1E48-451D-970A-BDBC264F8171@science.oregonstate.edu>

Perhaps you could add a Makefile with a rule that compiles the vignettes into the inst/doc directory? This might avoid the build process.

-----
Zhian N. Kamvar, Ph. D.
Postdoctoral Researcher (Everhart Lab)
Department of Plant Pathology
University of Nebraska-Lincoln



> On Apr 20, 2017, at 15:30 , Alexandre Courtiol <alexandre.courtiol at gmail.com> wrote:
> 
> Thanks but I don't think so, that would imply them to rebuild the
> vignettes, which is exactly what I want to avoid.
> Without knitr cached chunk it would take forever on their laptops and they
> would also need to install tons of packages...
> ++
> 
> On 20 April 2017 at 21:01, Sven E Templer <sven.templer at gmail.com <mailto:sven.templer at gmail.com>> wrote:
> 
>> Hi Alex,
>> 
>> 
>> what if you run
>> 
>> devtools::install_github(build_vignettes = TRUE)
>> 
>> on your students computer?
>> 
>> See ?devtools::install
>> 
>> 
>> Best,
>> 
>> Sven
>> 
>> 
>>> On 20. Apr 2017, at 15:09, Alexandre Courtiol <
>> alexandre.courtiol at gmail.com> wrote:
>>> 
>>> Dear all,
>>> 
>>> I am using a package for teaching:
>>> my slides are html vignettes, and it is convenient for students to
>> control
>>> which packages they must install, provide code and datasets.
>>> 
>>> As I am often editing the package live during the course, it would be
>> great
>>> if I could just push to github and that the student would just have to
>> run
>>> a devtools::install_github() to get my updated vignettes. I would rather
>>> not to have to build the package before pushing to save time.
>>> 
>>> The issues is that I do not want to build the vignettes on install as
>> they
>>> are very slow to build. On my computer however it is quick because I have
>>> cached the knitr chunks output. So I was hoping to just have to run
>>> devtools::build_vignettes() on my machine before pushing the files
>> thereby
>>> created (./inst/doc) and that the student could just
>>> devtools::install_github().
>>> 
>>> I cannot make this work: no vignettes are found after install. When I do
>>> check the repository beeing installed on their computers, the html, Rmd
>> and
>>> R files corresponding to the vignettes are present in ./doc, so it is not
>>> an issue of having the wrong .gitgnore configuration.
>>> 
>>> I have read about many vignettes related issues on the net, but I did not
>>> find something dealing with this precise issue.
>>> 
>>> PS: I know about the R.rsp hack, but I would prefer to find a solution
>> more
>>> direct.
>>> 
>>> Best,
>>> 
>>> Alex
>>> 
>>> 
>>> 
>>> 
>>> --
>>> Alexandre Courtiol
>>> 
>>> http://sites.google.com/site/alexandrecourtiol/home
>>> 
>>> *"Science is the belief in the ignorance of experts"*, R. Feynman
>>> 
>>>      [[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
>> 
> 
> 
> -- 
> Alexandre Courtiol
> 
> http://sites.google.com/site/alexandrecourtiol/home <http://sites.google.com/site/alexandrecourtiol/home>
> 
> *"Science is the belief in the ignorance of experts"*, R. Feynman
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>

	[[alternative HTML version deleted]]


From jenny at stat.ubc.ca  Sat Apr 22 07:15:19 2017
From: jenny at stat.ubc.ca (Jenny Bryan)
Date: Fri, 21 Apr 2017 22:15:19 -0700
Subject: [R-pkg-devel] Open Source Survey, conducted by GitHub
References: <58fa2444ccbe3_12ea23fea0503e5384085@Brandons-MacBook-Pro-2.local.mail>
Message-ID: <D47F4D61-6559-4D3B-8A14-3FAC32F53244@stat.ubc.ca>

Hi all,

Please consider completing this survey GitHub is running to study "open source software, the people that create it, their experience, and their relationship to the industry that depends on it".

Based on n = 2, it takes less than 10 mins. It's not about version control or hosting platforms, but rather about bigger questions in open source and characterizing the community.

Go here:
https://www.surveygizmo.com/s3/3150898/R <https://u4714554.ct.sendgrid.net/wf/click?upn=E2ombZJc44exE-2B62Mauk85-2BZH8-2FnfhC1U2ij6Eav09bG7AvDUwax1DoNFk7hgDD3_xf2xTDjuvwxfgOivHZODk8BzFeaCGkabbQeWHuWXVvmb14NBfcHTmZD2JedTobxBA773zqk8NMmWgIdarZfwVvTgCzIy2dRA4G1sOPoTvfkCqVBH5wgWmUhstDEoGgiWzYLTPMi7QXSuL-2FiqFATA-2BgVxvzgew-2B4Jqugz8E7ce9iTIiWWKxd-2FHlb0P2UDxEg2E8xpq3RDyxHiGd-2F5WoCEmA-3D-3D>
For more context, below is the email I got when I expressed an interest in helping drum up responses from the R community.

-- Jenny Bryan

> Begin forwarded message:
> 
> From: GitHub Open Source Team <opensource at github.com>
> Subject: Share the Open Source Survey
> Date: April 21, 2017 at 8:24:52 AM PDT
> To: jenny at rstudio.com
> 
> Hi Jennifer,
> 
> Thanks for your interest in having the R community participate in the Open Source Survey. We are ready to start running the survey for your community. Please share the link in the email template below. The survey will conclude on April 28.
> 
> If you have a way of delivering the survey directly to members of your community, such as a mailing list, then please prefer that. If you don't have a way of contacting community members directly, or it is not inclusive of the entire community, then a public forum is acceptable as long as it is specific to the people that are involved in your community. Avoid sharing it on forums that have a cross section of people from other communities, such as social media. The survey is intended for people that have demonstrated an interest in open source and have a connection with the community.
> 
> Let us know if you have any questions or concerns.
> 
> Thanks!
> 
> TEMPLATE TO SHARE:
> 
> Subject: Take the Open Source Survey
> 
> Hello!
> 
> As a member of the R community, you are invited to participate in a survey about how people use and think about open source software. Whether you're a long-time maintainer, a new contributor, or an interested browser, we want to hear from you.
> 
> This survey will take 10-15 minutes. All questions are optional. Your anonymous answers will be released as part of an open data set that is freely available to researchers and members of the community to better understand the people who use and create open source technologies. No personally identifiable information will be solicited, and will remove any that is provided before publicly releasing the data.
> 
> Please take 10-15 minutes to share your perspective by April 28.
> 
> https://www.surveygizmo.com/s3/3150898/R <https://u4714554.ct.sendgrid.net/wf/click?upn=E2ombZJc44exE-2B62Mauk85-2BZH8-2FnfhC1U2ij6Eav09bG7AvDUwax1DoNFk7hgDD3_xf2xTDjuvwxfgOivHZODk8BzFeaCGkabbQeWHuWXVvmb14NBfcHTmZD2JedTobxBA773zqk8NMmWgIdarZfwVvTgCzIy2dRA4G1sOPoTvfkCqVBH5wgWmUhstDEoGgiWzYLTPMi7QXSuL-2FiqFATA-2BgVxvzgew-2B4Jqugz8E7ce9iTIiWWKxd-2FHlb0P2UDxEg2E8xpq3RDyxHiGd-2F5WoCEmA-3D-3D>
> Thank you for your time and input. If you have any questions or feedback please email opensource at github.com. For more information or to subscribe to updates, visit http://opensourcesurvey.org/ <https://u4714554.ct.sendgrid.net/wf/click?upn=B1s-2BdRVhwMDGP0I8sIn4pd0D3QfuT0tGkCt22h5-2FhrQI7wo-2FcSjH4mFT6ksJdzyq_xf2xTDjuvwxfgOivHZODk8BzFeaCGkabbQeWHuWXVvmb14NBfcHTmZD2JedTobxBI9T2PSzz67lla15orN-2FqjznRRffMba7r09LbjoQQdyYgOZT021eKbYUoiuqBunYSMbfCxzmu0rVXlVqA0fh83TJpmrRZdaYz-2F3xL3mUotiNFwoFLH2F2Jp2gEbPF3T3hHq4wHv1QgcnTIbpLFnLQjQ-3D-3D>.
> 
> 


	[[alternative HTML version deleted]]


From b.rowlingson at lancaster.ac.uk  Sat Apr 22 16:03:18 2017
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Sat, 22 Apr 2017 15:03:18 +0100
Subject: [R-pkg-devel] Interplay between knitr() and View()
In-Reply-To: <831E83A9-F3F7-4E10-A93B-C55E6A79BF3E@noaa.gov>
References: <13120484-64C7-4F8B-A710-3A50F8AF7473@noaa.gov>
 <CAJuCY5w6K53GEDsxMHzj-YM=yc5ZoK_AZ8XAdQCX-8i_Y3Pqcg@mail.gmail.com>
 <CAARY7kj2jZZAtG2TXCaWNq4q9FrxyjQUoJRZhVN01isAugFGrg@mail.gmail.com>
 <831E83A9-F3F7-4E10-A93B-C55E6A79BF3E@noaa.gov>
Message-ID: <CANVKczM8k7ic3J_Rxbc_0fKK67ME5hpz++eUEUGGTKpcNsC0Qg@mail.gmail.com>

On Thu, Apr 20, 2017 at 3:41 PM, Roy Mendelssohn - NOAA Federal
<roy.mendelssohn at noaa.gov> wrote:

> What I liked about View() is often the table is quite big, and View() provides scroll bars and nice headers that make it easy to look over the results.

When I run View(iris) I don't get scrollbars, and the table is
truncated so that only whole cells are visible, so there's no clue
that there's other cells outside the initial view - I never see half a
cell. I'd attach a screenshot but not on this list...

 Maybe this is just View() on Linux, or View() on Ubuntu Linux, or
View() on Ubuntu Linux/Gnome. But View() is very system dependent.



> -Roy
>
>> On Apr 20, 2017, at 12:45 AM, David Hugh-Jones <davidhughjones at gmail.com> wrote:
>>
>>
>> Two questions:
>>
>> 1. If your package definitely needs to call View(), and you want to explain how that will look, then why not show one or more screenshots in your documentation?
>>
>> 2. Why does your package need to call View? Why can't it return the metadata as a data frame, and let the user do what he wants with it himself - using View(), head(), or any other tool?
>>
>> Cheers
>> D
>>
>>
>>
>>
>>
>> > Hi All:
>> >
>> > My package allows the user to search for information about the data
>> > available, and the information is returned in a dataframe. I had long been
>> > looking for a nice way to display the results  (the datasets' metadata),
>> > and wasn't too happy with anything until I tried the View() command,  which
>> > does exactly what I want.
>> >
>> > The problem is I can't seem to find a way to make View() and knitr() work
>> > nice together in creating the vignette. Given the way View() works I doubt
>> > there is a way,  but any suggestions of how I can show what the user will
>> > see when the given the command in the package from within my vignette?
>> >
>> > Thanks,
>> >
>> > -Roy
>> >
>> >
>> >
>> > **********************
>> > "The contents of this message do not reflect any position of the U.S.
>> > Government or NOAA."
>> > **********************
>> > Roy Mendelssohn
>> > Supervisory Operations Research Analyst
>> > NOAA/NMFS
>> > Environmental Research Division
>> > Southwest Fisheries Science Center
>> > ***Note new street address***
>> > 110 McAllister Way
>> > Santa Cruz, CA 95060
>> > Phone: (831)-420-3666
>> > Fax: (831) 420-3980
>> > e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>> >
>> > "Old age and treachery will overcome youth and skill."
>> > "From those who have been given much, much will be expected"
>> > "the arc of the moral universe is long, but it bends toward justice" -MLK
>> > Jr.
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> --
>> Sent from Gmail Mobile
>
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r.turner at auckland.ac.nz  Sat Apr 22 23:25:14 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sun, 23 Apr 2017 09:25:14 +1200
Subject: [R-pkg-devel] R_registerRoutines, etc.
Message-ID: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>


I have, like many others it would appear, been struggling with
the new-ish convention of requiring --- or quasi-requiring --- that 
"routines" be "registered" and the warning generated by R CMD check to 
the effect:

> Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
>
> It is good practice to register native routines and to disable symbol
> search.
>
> See 'Writing portable packages' in the 'Writing R Extensions' manual.

Well, the material in the "Writing R Extensions" manual is completely 
incomprehensible to the human mind, which is what I'm equipped with. 
However I found a posting by Ege Rubak on this topic which sent me by a 
slightly roundabout route to a posting by Dirk Eddelbuttel
which told me to use package_native_routine_registration_skeleton() from 
the tools package.

After a bit more struggle, I found that that did the trick.  I have, 
however, a couple of questions remaining.

(1) I found that having an R function with the same name as that of a
routine (Fortran subroutine in this case) that it called, causes all 
sorts of chaos.  I had a function "binsrt" that called a Fortran 
subroutine named "binsrt" and a function "mnnd" that called a Fortran 
subroutine named "mnnd".  This induced several fairly mysterious 
warnings.  I resolved the issue by renaming the R functions "binsrtR"
and "mnndR" respectively, so as to eliminate the name conflict.

Would this be the recommended procedure, or is there a cleverer way to 
eliminate the problem?

(2) The help for package_native_routine_registration_skeleton() says:

> Optionally the skeleton will include declarations for the registered
> routines: they should be checked against the C/Fortran source code, not
> least as the number of arguments is taken from the R code. For .Call and
> .External calls they will often suffice, but for .C and .Fortran calls
> the void * arguments would ideally be replaced by the actual types.

OTOH a post from Ege Rubak (answering a question like unto mine from 
another user) basically says "Don't bother.  It doesn't really matter."

However, being a Good Little Boy, I like to follow instructions exactly. 
  So I tried to replace the "void *" strings by the "actual types", but 
then all hell broke loose.  Consequently I went back to the "void *" 
structures.  That appears to work, but:

    (a) Are there any perils lurking if one just leaves "void *" as is,
        throughout?

    (b) For the sake of completeness, how *does* one replace the "void *"
        constructions with "actual types" in a correct manner?

         Example:  In my init.c file I currently have (as produced by
         package_native_routine_registration_skeleton()) :

> extern void F77_NAME(mnnd)(void *, void *, void *, void *, void *);

         The code in mnnd.f reads:

> subroutine mnnd(x,y,n,dminbig,dminav)
> implicit double precision(a-h,o-z)
> .....

         I.e. the "actual types are "double precision",
         "double precision", "integer", "double precision",
         "double precision".

         So in this case I should (?) replace

> extern void F77_NAME(mnnd)(void *, void *, void *, void *, void *);

         by .... what?  Can anyone tell me?

Thanks.

cheers,

Rolf Turner

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From edd at debian.org  Sat Apr 22 23:44:52 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 22 Apr 2017 16:44:52 -0500
Subject: [R-pkg-devel] R_registerRoutines, etc.
In-Reply-To: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
References: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
Message-ID: <22779.52948.718380.323895@max.eddelbuettel.com>


On 23 April 2017 at 09:25, Rolf Turner wrote:
| I have, like many others it would appear, been struggling with
| the new-ish convention of requiring --- or quasi-requiring --- that 
| "routines" be "registered" and the warning generated by R CMD check to 
| the effect:
| 
| > Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
| >
| > It is good practice to register native routines and to disable symbol
| > search.
| >
| > See 'Writing portable packages' in the 'Writing R Extensions' manual.
| 
| Well, the material in the "Writing R Extensions" manual is completely 
| incomprehensible to the human mind, which is what I'm equipped with. 
| However I found a posting by Ege Rubak on this topic which sent me by a 
| slightly roundabout route to a posting by Dirk Eddelbuttel

There is a transcribed Umlaut in there:  Eddelbuettel (ie 'ue' not 'u')

| which told me to use package_native_routine_registration_skeleton() from 
| the tools package.
| 
| After a bit more struggle, I found that that did the trick.  I have, 
| however, a couple of questions remaining.
| 
| (1) I found that having an R function with the same name as that of a
| routine (Fortran subroutine in this case) that it called, causes all 
| sorts of chaos.  I had a function "binsrt" that called a Fortran 
| subroutine named "binsrt" and a function "mnnd" that called a Fortran 
| subroutine named "mnnd".  This induced several fairly mysterious 
| warnings.  I resolved the issue by renaming the R functions "binsrtR"
| and "mnndR" respectively, so as to eliminate the name conflict.
| 
| Would this be the recommended procedure, or is there a cleverer way to 
| eliminate the problem?

That has hit me too, and I also found the error message less than perfectly
clear.  It all makes sense in the large sense -- we now register functions,
and R and compiled code (C++ for me, Fortran for you) "compete" for unique
identifiers.

The "official" way in Writing R Extensions fixes this by automagically
prefixing functions called via .Call() with a "c_" prefix.  You can turn that
on in the NAMESPACE file as further argument to useDynLib().  I am not (yet?)
doing this in all packages, and I "spied" on one recent update of a package
by an R Core member that didn;t either.  When in Rome ...
 
| (2) The help for package_native_routine_registration_skeleton() says:
| 
| > Optionally the skeleton will include declarations for the registered
| > routines: they should be checked against the C/Fortran source code, not
| > least as the number of arguments is taken from the R code. For .Call and
| > .External calls they will often suffice, but for .C and .Fortran calls
| > the void * arguments would ideally be replaced by the actual types.
| 
| OTOH a post from Ege Rubak (answering a question like unto mine from 
| another user) basically says "Don't bother.  It doesn't really matter."
| 
| However, being a Good Little Boy, I like to follow instructions exactly. 
|   So I tried to replace the "void *" strings by the "actual types", but 
| then all hell broke loose.  Consequently I went back to the "void *" 
| structures.  That appears to work, but:
| 
|     (a) Are there any perils lurking if one just leaves "void *" as is,
|         throughout?
| 
|     (b) For the sake of completeness, how *does* one replace the "void *"
|         constructions with "actual types" in a correct manner?
| 
|          Example:  In my init.c file I currently have (as produced by
|          package_native_routine_registration_skeleton()) :
| 
| > extern void F77_NAME(mnnd)(void *, void *, void *, void *, void *);
| 
|          The code in mnnd.f reads:
| 
| > subroutine mnnd(x,y,n,dminbig,dminav)
| > implicit double precision(a-h,o-z)
| > .....
| 
|          I.e. the "actual types are "double precision",
|          "double precision", "integer", "double precision",
|          "double precision".
| 
|          So in this case I should (?) replace
| 
| > extern void F77_NAME(mnnd)(void *, void *, void *, void *, void *);
| 
|          by .... what?  Can anyone tell me?

No idea. I don't deal in Fortran. C++ is more than enough fun for me ;-)

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From i.costigan at me.com  Sun Apr 23 00:08:48 2017
From: i.costigan at me.com (Imanuel Costigan)
Date: Sun, 23 Apr 2017 08:08:48 +1000
Subject: [R-pkg-devel] Open Source Survey, conducted by GitHub
In-Reply-To: <mailman.18.1492855202.53047.r-package-devel@r-project.org>
References: <mailman.18.1492855202.53047.r-package-devel@r-project.org>
Message-ID: <F8796C9E-4FCA-4D53-84FF-AD8D92FBD307@me.com>

Thanks Jenny. I?m looking forward to seeing the results and the inevitable R package wrapper.

Imanuel

From r.turner at auckland.ac.nz  Sun Apr 23 00:13:53 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sun, 23 Apr 2017 10:13:53 +1200
Subject: [R-pkg-devel] R_registerRoutines, etc.
In-Reply-To: <22779.52948.718380.323895@max.eddelbuettel.com>
References: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
 <22779.52948.718380.323895@max.eddelbuettel.com>
Message-ID: <8a6f0615-10e1-2c49-583f-491d655ef23f@auckland.ac.nz>

On 23/04/17 09:44, Dirk Eddelbuettel wrote:
>
> On 23 April 2017 at 09:25, Rolf Turner wrote:

<SNIP>

> | However I found a posting by Ege Rubak on this topic which sent me by a
> | slightly roundabout route to a posting by Dirk Eddelbuttel
>
> There is a transcribed Umlaut in there:  Eddelbuettel (ie 'ue' not 'u')

Arrgggghhh!  Sorry 'bout that.  I'm usually fairly careful about getting 
people's names right, since I am myself annoyed by being called "Rolph" 
or "Ralph" or "Ralf" or "Ross" (!!!).

<SNIP>

> | (1) I found that having an R function with the same name as that of a
> | routine (Fortran subroutine in this case) that it called, causes all
> | sorts of chaos.  I had a function "binsrt" that called a Fortran
> | subroutine named "binsrt" and a function "mnnd" that called a Fortran
> | subroutine named "mnnd".  This induced several fairly mysterious
> | warnings.  I resolved the issue by renaming the R functions "binsrtR"
> | and "mnndR" respectively, so as to eliminate the name conflict.
> |
> | Would this be the recommended procedure, or is there a cleverer way to
> | eliminate the problem?
>
> That has hit me too, and I also found the error message less than perfectly
> clear.  It all makes sense in the large sense -- we now register functions,
> and R and compiled code (C++ for me, Fortran for you) "compete" for unique
> identifiers.
>
> The "official" way in Writing R Extensions fixes this by automagically
> prefixing functions called via .Call() with a "c_" prefix.  You can turn that
> on in the NAMESPACE file as further argument to useDynLib().  I am not (yet?)
> doing this in all packages, and I "spied" on one recent update of a package
> by an R Core member that didn;t either.  When in Rome ...

The foregoing "official" way would seem to apply to functions called by 
".Call" (which I never use; it is way over my head).  What about 
functions called by ".Fortran()" or ".C()"?

<SNIP>

> |     (b) For the sake of completeness, how *does* one replace the "void *"
> |         constructions with "actual types" in a correct manner?
> |
> |          Example:  In my init.c file I currently have (as produced by
> |          package_native_routine_registration_skeleton()) :
> |
> | > extern void F77_NAME(mnnd)(void *, void *, void *, void *, void *);
> |
> |          The code in mnnd.f reads:
> |
> | > subroutine mnnd(x,y,n,dminbig,dminav)
> | > implicit double precision(a-h,o-z)
> | > .....
> |
> |          I.e. the "actual types are "double precision",
> |          "double precision", "integer", "double precision",
> |          "double precision".
> |
> |          So in this case I should (?) replace
> |
> | > extern void F77_NAME(mnnd)(void *, void *, void *, void *, void *);
> |
> |          by .... what?  Can anyone tell me?
>
> No idea. I don't deal in Fortran. C++ is more than enough fun for me ;-)

Well, C++ is too much for me.  I find Fortran generally very easy.  Be 
that as it were, are there any Fortran users out there who can answer my 
question, above?

Thanks Dirk.

cheers,

Rolf

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From avraham.adler at gmail.com  Sun Apr 23 04:47:06 2017
From: avraham.adler at gmail.com (Avraham Adler)
Date: Sat, 22 Apr 2017 22:47:06 -0400
Subject: [R-pkg-devel] R_registerRoutines, etc.
In-Reply-To: <8a6f0615-10e1-2c49-583f-491d655ef23f@auckland.ac.nz>
References: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
 <22779.52948.718380.323895@max.eddelbuettel.com>
 <8a6f0615-10e1-2c49-583f-491d655ef23f@auckland.ac.nz>
Message-ID: <CAL6gwnJxiz4mhqzKKm6re8mrVJy3SaZ4A0MX=7qm2x-_Kx8Nug@mail.gmail.com>

On Sat, Apr 22, 2017 at 6:13 PM, Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
> The foregoing "official" way would seem to apply to functions called by
> ".Call" (which I never use; it is way over my head).  What about functions
> called by ".Fortran()" or ".C()"?
>
>> |     (b) For the sake of completeness, how *does* one replace the "void
>> *"
>> |         constructions with "actual types" in a correct manner?
>> |
>> |          Example:  In my init.c file I currently have (as produced by
>> |          package_native_routine_registration_skeleton()) :
>> |
>> | > extern void F77_NAME(mnnd)(void *, void *, void *, void *, void *);
>> |
>> |          The code in mnnd.f reads:
>> |
>> | > subroutine mnnd(x,y,n,dminbig,dminav)
>> | > implicit double precision(a-h,o-z)
>> | > .....
>> |
>> |          I.e. the "actual types are "double precision",
>> |          "double precision", "integer", "double precision",
>> |          "double precision".
>> |
>> |          So in this case I should (?) replace
>> |
>> | > extern void F77_NAME(mnnd)(void *, void *, void *, void *, void *);
>> |
>> |          by .... what?  Can anyone tell me?
>>
>> No idea. I don't deal in Fortran. C++ is more than enough fun for me ;-)
>
>
> Well, C++ is too much for me.  I find Fortran generally very easy.  Be that
> as it were, are there any Fortran users out there who can answer my
> question, above?
>

I cannot answer your question completely, as I use .Call() to call
Fortran from R via C instead of using .Fortran?from what I have read
and researched, it is faster.

That being said, maybe this will help. Given a subroutine in Fortran
which starts like:

    subroutine ddelap_f(x, nx, a, na, b, nb, l, nl, lg, pmfv) bind(C,
name="ddelap_f")

    integer(kind = c_int), intent(in), value         :: nx, na, nb, nl
    ! Sizes
    real(kind = c_double), intent(in), dimension(nx) :: x
    ! Observations
    real(kind = c_double), intent(out), dimension(nx):: pmfv
    ! Result
    real(kind = c_double), intent(in)                :: a(na), b(nb),
l(nl)! Parameters
    integer(kind = c_int), intent(in)                :: lg
    ! Log flag
    integer                                          :: i
    ! Integer

The corresponding C code which calls it is

    void ddelap_f(double *x, int nx, double *a, int na, double *b, int
nb, double *l, int nl,
                  int *lg, double *ret);

and the actual code called by R is:

    extern SEXP ddelap_C(SEXP x, SEXP alpha, SEXP beta, SEXP lambda, SEXP lg){
      const int nx = LENGTH(x);
      const int na = LENGTH(alpha);
      const int nb = LENGTH(beta);
      const int nl = LENGTH(lambda);
      SEXP ret;
      PROTECT(ret = allocVector(REALSXP, nx));
      ddelap_f(REAL(x), nx, REAL(alpha), na, REAL(beta), nb,
REAL(lambda), nl, INTEGER(lg), REAL(ret));
      UNPROTECT(1);
      return(ret);
    }

Also, I don't use the "automatic" concatenation of the "c_" to my
Fortran functions, but name them individually and use Fortran 2003 ISO
C bindings (except for booleans).

If it helps, take a look at the source code at
<https://bitbucket.org/aadler/delaporte>. As of now, it passes all R
checks and so must have appeased the registration requirements 8-)

Thank you,

Avi


From r.turner at auckland.ac.nz  Sun Apr 23 05:15:19 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sun, 23 Apr 2017 15:15:19 +1200
Subject: [R-pkg-devel] R_registerRoutines, etc.
In-Reply-To: <CAL6gwnJxiz4mhqzKKm6re8mrVJy3SaZ4A0MX=7qm2x-_Kx8Nug@mail.gmail.com>
References: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
 <22779.52948.718380.323895@max.eddelbuettel.com>
 <8a6f0615-10e1-2c49-583f-491d655ef23f@auckland.ac.nz>
 <CAL6gwnJxiz4mhqzKKm6re8mrVJy3SaZ4A0MX=7qm2x-_Kx8Nug@mail.gmail.com>
Message-ID: <899d6d53-b058-c978-25fe-5992e9925cd3@auckland.ac.nz>


Thanks for trying, but your example blows me away completely.

cheers,

Rolf

On 23/04/17 14:47, Avraham Adler wrote:
> On Sat, Apr 22, 2017 at 6:13 PM, Rolf Turner <r.turner at auckland.ac.nz> wrote:
>>
>> The foregoing "official" way would seem to apply to functions called by
>> ".Call" (which I never use; it is way over my head).  What about functions
>> called by ".Fortran()" or ".C()"?
>>
>>> |     (b) For the sake of completeness, how *does* one replace the "void
>>> *"
>>> |         constructions with "actual types" in a correct manner?
>>> |
>>> |          Example:  In my init.c file I currently have (as produced by
>>> |          package_native_routine_registration_skeleton()) :
>>> |
>>> | > extern void F77_NAME(mnnd)(void *, void *, void *, void *, void *);
>>> |
>>> |          The code in mnnd.f reads:
>>> |
>>> | > subroutine mnnd(x,y,n,dminbig,dminav)
>>> | > implicit double precision(a-h,o-z)
>>> | > .....
>>> |
>>> |          I.e. the "actual types are "double precision",
>>> |          "double precision", "integer", "double precision",
>>> |          "double precision".
>>> |
>>> |          So in this case I should (?) replace
>>> |
>>> | > extern void F77_NAME(mnnd)(void *, void *, void *, void *, void *);
>>> |
>>> |          by .... what?  Can anyone tell me?
>>>
>>> No idea. I don't deal in Fortran. C++ is more than enough fun for me ;-)
>>
>>
>> Well, C++ is too much for me.  I find Fortran generally very easy.  Be that
>> as it were, are there any Fortran users out there who can answer my
>> question, above?
>>
>
> I cannot answer your question completely, as I use .Call() to call
> Fortran from R via C instead of using .Fortran?from what I have read
> and researched, it is faster.
>
> That being said, maybe this will help. Given a subroutine in Fortran
> which starts like:
>
>     subroutine ddelap_f(x, nx, a, na, b, nb, l, nl, lg, pmfv) bind(C,
> name="ddelap_f")
>
>     integer(kind = c_int), intent(in), value         :: nx, na, nb, nl
>     ! Sizes
>     real(kind = c_double), intent(in), dimension(nx) :: x
>     ! Observations
>     real(kind = c_double), intent(out), dimension(nx):: pmfv
>     ! Result
>     real(kind = c_double), intent(in)                :: a(na), b(nb),
> l(nl)! Parameters
>     integer(kind = c_int), intent(in)                :: lg
>     ! Log flag
>     integer                                          :: i
>     ! Integer
>
> The corresponding C code which calls it is
>
>     void ddelap_f(double *x, int nx, double *a, int na, double *b, int
> nb, double *l, int nl,
>                   int *lg, double *ret);
>
> and the actual code called by R is:
>
>     extern SEXP ddelap_C(SEXP x, SEXP alpha, SEXP beta, SEXP lambda, SEXP lg){
>       const int nx = LENGTH(x);
>       const int na = LENGTH(alpha);
>       const int nb = LENGTH(beta);
>       const int nl = LENGTH(lambda);
>       SEXP ret;
>       PROTECT(ret = allocVector(REALSXP, nx));
>       ddelap_f(REAL(x), nx, REAL(alpha), na, REAL(beta), nb,
> REAL(lambda), nl, INTEGER(lg), REAL(ret));
>       UNPROTECT(1);
>       return(ret);
>     }
>
> Also, I don't use the "automatic" concatenation of the "c_" to my
> Fortran functions, but name them individually and use Fortran 2003 ISO
> C bindings (except for booleans).
>
> If it helps, take a look at the source code at
> <https://bitbucket.org/aadler/delaporte>. As of now, it passes all R
> checks and so must have appeased the registration requirements 8-)
>
> Thank you,
>
> Avi
>


From jdv at base2bio.com  Sun Apr 23 05:08:53 2017
From: jdv at base2bio.com (Jeremy Volkening)
Date: Sat, 22 Apr 2017 22:08:53 -0500
Subject: [R-pkg-devel] new package submission: "check log incomplete,
	web timeout?"
Message-ID: <20170423030852.7cbjwugoijcutvqz@biobook.bloom180.lan>

Hello,

I am trying to submit a package to CRAN for the first time. I have gone 
through testing on my own machines (Linux, Windows x64, Windows i386), 
on Travis CI and using win-builder. All tests are now passing on all of 
these platforms. However, when I try to submit the package to CRAN I get 
an email that the pre-test has failed, with the following line:

Status: NA (check log incomplete, web timeout?)

The pre-test link is here: 
https://win-builder.r-project.org/incoming_pretest/170423_044521_mstherm_047/

If I check the '00check.log' file I can see that it ends with the line 
"* checking re-building of vignette outputs ...", so apparently the test 
is quitting before it finishes this step. I'm not sure how to proceed, 
since everything is working for all of my own manual tests (as well as 
win-builder). See the log for my manual submission of exactly the same 
package to win-builder, which passes:

https://win-builder.r-project.org/4tvH1D2TdMep/

Any help would be greatly appreciated. The package itself can be found 
here:

https://github.com/jvolkening/r-mstherm

Regards,
Jeremy


From murdoch.duncan at gmail.com  Sun Apr 23 11:57:06 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 23 Apr 2017 05:57:06 -0400
Subject: [R-pkg-devel] R_registerRoutines, etc.
In-Reply-To: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
References: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
Message-ID: <270ee232-14f7-4935-b10c-51789e6275f3@gmail.com>

On 22/04/2017 5:25 PM, Rolf Turner wrote:
>
> I have, like many others it would appear, been struggling with
> the new-ish convention of requiring --- or quasi-requiring --- that
> "routines" be "registered" and the warning generated by R CMD check to
> the effect:
>
>> Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
>>
>> It is good practice to register native routines and to disable symbol
>> search.
>>
>> See 'Writing portable packages' in the 'Writing R Extensions' manual.
>
> Well, the material in the "Writing R Extensions" manual is completely
> incomprehensible to the human mind, which is what I'm equipped with.
> However I found a posting by Ege Rubak on this topic which sent me by a
> slightly roundabout route to a posting by Dirk Eddelbuttel
> which told me to use package_native_routine_registration_skeleton() from
> the tools package.
>
> After a bit more struggle, I found that that did the trick.  I have,
> however, a couple of questions remaining.
>
> (1) I found that having an R function with the same name as that of a
> routine (Fortran subroutine in this case) that it called, causes all
> sorts of chaos.  I had a function "binsrt" that called a Fortran
> subroutine named "binsrt" and a function "mnnd" that called a Fortran
> subroutine named "mnnd".  This induced several fairly mysterious
> warnings.  I resolved the issue by renaming the R functions "binsrtR"
> and "mnndR" respectively, so as to eliminate the name conflict.
>
> Would this be the recommended procedure, or is there a cleverer way to
> eliminate the problem?

I think renaming the Fortran would make more sense:  the R routine may 
be used by your package users, whereas the Fortran routine may only be 
used by the R routine.  But there are probably lots of exceptions to this.

>
> (2) The help for package_native_routine_registration_skeleton() says:
>
>> Optionally the skeleton will include declarations for the registered
>> routines: they should be checked against the C/Fortran source code, not
>> least as the number of arguments is taken from the R code. For .Call and
>> .External calls they will often suffice, but for .C and .Fortran calls
>> the void * arguments would ideally be replaced by the actual types.
>
> OTOH a post from Ege Rubak (answering a question like unto mine from
> another user) basically says "Don't bother.  It doesn't really matter."
>
> However, being a Good Little Boy, I like to follow instructions exactly.
>   So I tried to replace the "void *" strings by the "actual types", but
> then all hell broke loose.  Consequently I went back to the "void *"
> structures.  That appears to work, but:
>
>     (a) Are there any perils lurking if one just leaves "void *" as is,
>         throughout?

Not immediately, but a couple of potential ones:

  - If you change the type of something in the future, "void *" won't 
care, but the compiler might catch a the change if you were more explicit.

  - R CMD check generally becomes stricter over time, so it's possible 
it will complain about "void *" in the future.

>
>     (b) For the sake of completeness, how *does* one replace the "void *"
>         constructions with "actual types" in a correct manner?
>
>          Example:  In my init.c file I currently have (as produced by
>          package_native_routine_registration_skeleton()) :
>
>> extern void F77_NAME(mnnd)(void *, void *, void *, void *, void *);
>
>          The code in mnnd.f reads:
>
>> subroutine mnnd(x,y,n,dminbig,dminav)
>> implicit double precision(a-h,o-z)
>> .....
>
>          I.e. the "actual types are "double precision",
>          "double precision", "integer", "double precision",
>          "double precision".
>
>          So in this case I should (?) replace
>
>> extern void F77_NAME(mnnd)(void *, void *, void *, void *, void *);
>
>          by .... what?  Can anyone tell me?

Looks like

extern void F77_NAME(mnnd)(double *, double *, int *, double *, double *);

to me.

Duncan Murdoch

>
> Thanks.
>
> cheers,
>
> Rolf Turner
>


From r.turner at auckland.ac.nz  Sun Apr 23 12:38:54 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Sun, 23 Apr 2017 22:38:54 +1200
Subject: [R-pkg-devel] R_registerRoutines, etc.
In-Reply-To: <270ee232-14f7-4935-b10c-51789e6275f3@gmail.com>
References: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
 <270ee232-14f7-4935-b10c-51789e6275f3@gmail.com>
Message-ID: <cbce4eb0-9102-1069-6bc8-4b94e7b9e911@auckland.ac.nz>

On 23/04/17 21:57, Duncan Murdoch wrote:
> On 22/04/2017 5:25 PM, Rolf Turner wrote:

<SNIP>
>>
>> (1) I found that having an R function with the same name as that of a
>> routine (Fortran subroutine in this case) that it called, causes all
>> sorts of chaos.  I had a function "binsrt" that called a Fortran
>> subroutine named "binsrt" and a function "mnnd" that called a Fortran
>> subroutine named "mnnd".  This induced several fairly mysterious
>> warnings.  I resolved the issue by renaming the R functions "binsrtR"
>> and "mnndR" respectively, so as to eliminate the name conflict.
>>
>> Would this be the recommended procedure, or is there a cleverer way to
>> eliminate the problem?
>
> I think renaming the Fortran would make more sense:  the R routine may
> be used by your package users, whereas the Fortran routine may only be
> used by the R routine.  But there are probably lots of exceptions to this.

Hmmm.  Don't follow this.  Sorry to be slow.  It just seemed easier to 
me to fiddle with the R code than with the Fortran code.  I think I 
could go either way.

>> (2) The help for package_native_routine_registration_skeleton() says:
>>
>>> Optionally the skeleton will include declarations for the registered
>>> routines: they should be checked against the C/Fortran source code, not
>>> least as the number of arguments is taken from the R code. For .Call and
>>> .External calls they will often suffice, but for .C and .Fortran calls
>>> the void * arguments would ideally be replaced by the actual types.
>>
>> OTOH a post from Ege Rubak (answering a question like unto mine from
>> another user) basically says "Don't bother.  It doesn't really matter."
>>
>> However, being a Good Little Boy, I like to follow instructions exactly.
>>   So I tried to replace the "void *" strings by the "actual types", but
>> then all hell broke loose.  Consequently I went back to the "void *"
>> structures.  That appears to work, but:
>>
>>     (a) Are there any perils lurking if one just leaves "void *" as is,
>>         throughout?
>
> Not immediately, but a couple of potential ones:
>
>  - If you change the type of something in the future, "void *" won't
> care, but the compiler might catch a the change if you were more explicit.
>
>  - R CMD check generally becomes stricter over time, so it's possible it
> will complain about "void *" in the future.

Yeah, it was something like the latter that nagged the back of my mind. 
So I really would like to change the "void *" constructions.
Hence the following may be very helpful.

>>     (b) For the sake of completeness, how *does* one replace the "void *"
>>         constructions with "actual types" in a correct manner?
>>
>>          Example:  In my init.c file I currently have (as produced by
>>          package_native_routine_registration_skeleton()) :
>>
>>> extern void F77_NAME(mnnd)(void *, void *, void *, void *, void *);
>>
>>          The code in mnnd.f reads:
>>
>>> subroutine mnnd(x,y,n,dminbig,dminav)
>>> implicit double precision(a-h,o-z)
>>> .....
>>
>>          I.e. the "actual types are "double precision",
>>          "double precision", "integer", "double precision",
>>          "double precision".
>>
>>          So in this case I should (?) replace
>>
>>> extern void F77_NAME(mnnd)(void *, void *, void *, void *, void *);
>>
>>          by .... what?  Can anyone tell me?
>
> Looks like
>
> extern void F77_NAME(mnnd)(double *, double *, int *, double *, double *);
>
> to me.

Looks quite plausible.  I'll give it a try and report back.  (Later; not 
tonight, Josephine.  Past my bedtime. :-) )  My recollection is that I 
tried something like that, but said "integer" rather than "int".
Which is, I guess, Fortran-ese rather than C-ese.  And I guess the 
latter is called for.  In retrospect, I was being silly, since I said 
"double" (C-ese) rather than "double precision" (Fortran-ese).  So 
saying "int" would have been consistent.  Psigh!

Thanks.

cheers,

Rolf

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From murdoch.duncan at gmail.com  Sun Apr 23 13:05:28 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 23 Apr 2017 07:05:28 -0400
Subject: [R-pkg-devel] R_registerRoutines, etc.
In-Reply-To: <cbce4eb0-9102-1069-6bc8-4b94e7b9e911@auckland.ac.nz>
References: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
 <270ee232-14f7-4935-b10c-51789e6275f3@gmail.com>
 <cbce4eb0-9102-1069-6bc8-4b94e7b9e911@auckland.ac.nz>
Message-ID: <00141b78-288f-2398-dabc-7bc17c76ed30@gmail.com>

On 23/04/2017 6:38 AM, Rolf Turner wrote:
> On 23/04/17 21:57, Duncan Murdoch wrote:
>> On 22/04/2017 5:25 PM, Rolf Turner wrote:
>
> <SNIP>
>>>
>>> (1) I found that having an R function with the same name as that of a
>>> routine (Fortran subroutine in this case) that it called, causes all
>>> sorts of chaos.  I had a function "binsrt" that called a Fortran
>>> subroutine named "binsrt" and a function "mnnd" that called a Fortran
>>> subroutine named "mnnd".  This induced several fairly mysterious
>>> warnings.  I resolved the issue by renaming the R functions "binsrtR"
>>> and "mnndR" respectively, so as to eliminate the name conflict.
>>>
>>> Would this be the recommended procedure, or is there a cleverer way to
>>> eliminate the problem?
>>
>> I think renaming the Fortran would make more sense:  the R routine may
>> be used by your package users, whereas the Fortran routine may only be
>> used by the R routine.  But there are probably lots of exceptions to this.
>
> Hmmm.  Don't follow this.  Sorry to be slow.  It just seemed easier to
> me to fiddle with the R code than with the Fortran code.  I think I
> could go either way.

In one common case, the Fortran routine is written specifically as an 
interface to R, and is only called by the R routine that was written as 
that end of the interface.  That's what I was talking about.  But there 
are also situations where you have a Fortran subroutine that is used for 
many purposes besides the call from R; then renaming it would be more 
trouble.

>
>>> (2) The help for package_native_routine_registration_skeleton() says:
>>>
>>>> Optionally the skeleton will include declarations for the registered
>>>> routines: they should be checked against the C/Fortran source code, not
>>>> least as the number of arguments is taken from the R code. For .Call and
>>>> .External calls they will often suffice, but for .C and .Fortran calls
>>>> the void * arguments would ideally be replaced by the actual types.
>>>
>>> OTOH a post from Ege Rubak (answering a question like unto mine from
>>> another user) basically says "Don't bother.  It doesn't really matter."
>>>
>>> However, being a Good Little Boy, I like to follow instructions exactly.
>>>   So I tried to replace the "void *" strings by the "actual types", but
>>> then all hell broke loose.  Consequently I went back to the "void *"
>>> structures.  That appears to work, but:
>>>
>>>     (a) Are there any perils lurking if one just leaves "void *" as is,
>>>         throughout?
>>
>> Not immediately, but a couple of potential ones:
>>
>>  - If you change the type of something in the future, "void *" won't
>> care, but the compiler might catch a the change if you were more explicit.
>>
>>  - R CMD check generally becomes stricter over time, so it's possible it
>> will complain about "void *" in the future.
>
> Yeah, it was something like the latter that nagged the back of my mind.
> So I really would like to change the "void *" constructions.
> Hence the following may be very helpful.
>
>>>     (b) For the sake of completeness, how *does* one replace the "void *"
>>>         constructions with "actual types" in a correct manner?
>>>
>>>          Example:  In my init.c file I currently have (as produced by
>>>          package_native_routine_registration_skeleton()) :
>>>
>>>> extern void F77_NAME(mnnd)(void *, void *, void *, void *, void *);
>>>
>>>          The code in mnnd.f reads:
>>>
>>>> subroutine mnnd(x,y,n,dminbig,dminav)
>>>> implicit double precision(a-h,o-z)
>>>> .....
>>>
>>>          I.e. the "actual types are "double precision",
>>>          "double precision", "integer", "double precision",
>>>          "double precision".
>>>
>>>          So in this case I should (?) replace
>>>
>>>> extern void F77_NAME(mnnd)(void *, void *, void *, void *, void *);
>>>
>>>          by .... what?  Can anyone tell me?
>>
>> Looks like
>>
>> extern void F77_NAME(mnnd)(double *, double *, int *, double *, double *);
>>
>> to me.
>
> Looks quite plausible.  I'll give it a try and report back.  (Later; not
> tonight, Josephine.  Past my bedtime. :-) )  My recollection is that I
> tried something like that, but said "integer" rather than "int".
> Which is, I guess, Fortran-ese rather than C-ese.  And I guess the
> latter is called for.  In retrospect, I was being silly, since I said
> "double" (C-ese) rather than "double precision" (Fortran-ese).  So
> saying "int" would have been consistent.  Psigh!

Good luck!

Duncan Murdoch


From jdv at base2bio.com  Sun Apr 23 18:17:12 2017
From: jdv at base2bio.com (Jeremy Volkening)
Date: Sun, 23 Apr 2017 11:17:12 -0500
Subject: [R-pkg-devel] new package submission: "check log incomplete,
 web timeout?"
In-Reply-To: <CAERMt4eseHxcSqowokSRXBD=kw2_ormtjTZXAXm55RyBff=Axg@mail.gmail.com>
References: <20170423030852.7cbjwugoijcutvqz@biobook.bloom180.lan>
 <CAERMt4eseHxcSqowokSRXBD=kw2_ormtjTZXAXm55RyBff=Axg@mail.gmail.com>
Message-ID: <20170423161711.qokpyke6s5h2xz3b@biobook.bloom180.lan>

On Sun, Apr 23, 2017 at 10:17:01AM +0200, Alexandre Courtiol wrote:
>Could it be that one your computer you can build vignettes quickly thanks
>to some caching of the knitr chunk output but that it takes too much time
>building that without the cache...? ... CRAN does not like when
>anything takes more than a few seconds...

Thanks for the reply. The vignettes do take a little time to build, as 
the knitr code is doing some modeling, but I wouldn't have thought it 
excessive. According to the logs from the win-builder service, it took 
28s (about the same as each of the i386 and x64 tests). Is this too long 
for the CRAN submission service? I've already pruned down my example 
data to just a couple of samples instead of the thousands normally 
modeled in a session.

If this is indeed the issue, do I need to remove the knitr code and just 
include static images of the output plots in the vignette? This would 
seem to go against most of the recommendations I have read from various 
sources on best practice.

Regards,
Jeremy

>On 23 April 2017 at 05:08, Jeremy Volkening <jdv at base2bio.com> wrote:
>
>> Hello,
>>
>> I am trying to submit a package to CRAN for the first time. I have gone
>> through testing on my own machines (Linux, Windows x64, Windows i386), on
>> Travis CI and using win-builder. All tests are now passing on all of these
>> platforms. However, when I try to submit the package to CRAN I get an email
>> that the pre-test has failed, with the following line:
>>
>> Status: NA (check log incomplete, web timeout?)
>>
>> The pre-test link is here: https://win-builder.r-project.
>> org/incoming_pretest/170423_044521_mstherm_047/
>>
>> If I check the '00check.log' file I can see that it ends with the line "*
>> checking re-building of vignette outputs ...", so apparently the test is
>> quitting before it finishes this step. I'm not sure how to proceed, since
>> everything is working for all of my own manual tests (as well as
>> win-builder). See the log for my manual submission of exactly the same
>> package to win-builder, which passes:
>>
>> https://win-builder.r-project.org/4tvH1D2TdMep/
>>
>> Any help would be greatly appreciated. The package itself can be found
>> here:
>>
>> https://github.com/jvolkening/r-mstherm
>>
>> Regards,
>> Jeremy
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>
>
>-- 
>Alexandre Courtiol
>
>http://sites.google.com/site/alexandrecourtiol/home
>
>*"Science is the belief in the ignorance of experts"*, R. Feynman

-- 
Nothing so needs reforming as other people's habits.
		-- Mark Twain, "Pudd'nhead Wilson's Calendar"


From r.turner at auckland.ac.nz  Mon Apr 24 00:18:41 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Mon, 24 Apr 2017 10:18:41 +1200
Subject: [R-pkg-devel] R_registerRoutines, etc.
In-Reply-To: <00141b78-288f-2398-dabc-7bc17c76ed30@gmail.com>
References: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
 <270ee232-14f7-4935-b10c-51789e6275f3@gmail.com>
 <cbce4eb0-9102-1069-6bc8-4b94e7b9e911@auckland.ac.nz>
 <00141b78-288f-2398-dabc-7bc17c76ed30@gmail.com>
Message-ID: <91f048a9-f125-1779-fb95-f3b253ee6913@auckland.ac.nz>

On 23/04/17 23:05, Duncan Murdoch wrote:

>>>
>>> Looks like
>>>
>>> extern void F77_NAME(mnnd)(double *, double *, int *, double *,
>>> double *);
>>>
>>> to me.

One more (I hope it's the last!) question:

One of my subroutines has an argument of type *logical*.  There is no 
logical type in C.  So, since I am perforce using C-speak, I cannot 
change "void *" to "void logical".

I have a (very vague) understanding that in C one uses variables of int 
type (taking the values 0, for FALSE, and 1, for TRUE) as logical variables.

On that understanding I took a punt and replaced "void *" by "int *" for
the logical type variable.  The package built and passed

     "R CMD check --as-cran"

so it seems that this is OK.  Is this the Right Thing To Do?  Are there 
any (obvious?) lurking perils?

Thanks.

cheers,

Rolf

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From edd at debian.org  Mon Apr 24 00:31:41 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 23 Apr 2017 17:31:41 -0500
Subject: [R-pkg-devel] R_registerRoutines, etc.
In-Reply-To: <91f048a9-f125-1779-fb95-f3b253ee6913@auckland.ac.nz>
References: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
 <270ee232-14f7-4935-b10c-51789e6275f3@gmail.com>
 <cbce4eb0-9102-1069-6bc8-4b94e7b9e911@auckland.ac.nz>
 <00141b78-288f-2398-dabc-7bc17c76ed30@gmail.com>
 <91f048a9-f125-1779-fb95-f3b253ee6913@auckland.ac.nz>
Message-ID: <22781.11085.367064.948121@max.eddelbuettel.com>


On 24 April 2017 at 10:18, Rolf Turner wrote:
| One more (I hope it's the last!) question:
| 
| One of my subroutines has an argument of type *logical*.  There is no 
| logical type in C.  So, since I am perforce using C-speak, I cannot 
| change "void *" to "void logical".
| 
| I have a (very vague) understanding that in C one uses variables of int 
| type (taking the values 0, for FALSE, and 1, for TRUE) as logical variables.
| 
| On that understanding I took a punt and replaced "void *" by "int *" for
| the logical type variable.  The package built and passed
| 
|      "R CMD check --as-cran"
| 
| so it seems that this is OK.  Is this the Right Thing To Do?  Are there 
| any (obvious?) lurking perils?

I think you are allowed to use C99 [1] which has it -- see eg

http://stackoverflow.com/questions/4159713/how-to-use-boolean-datatype-in-c

Dirk

[1] Section 1.6.4 opems with

    1.6.4 Portable C and C++ code
    -----------------------------

    Writing portable C and C++ code is mainly a matter of observing the
    standards (C99, C++98 or where declared C++11/14) and testing that
    extensions (such as POSIX functions) are supported.


-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From r.turner at auckland.ac.nz  Mon Apr 24 00:45:41 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Mon, 24 Apr 2017 10:45:41 +1200
Subject: [R-pkg-devel] R_registerRoutines, etc.
In-Reply-To: <22781.11085.367064.948121@max.eddelbuettel.com>
References: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
 <270ee232-14f7-4935-b10c-51789e6275f3@gmail.com>
 <cbce4eb0-9102-1069-6bc8-4b94e7b9e911@auckland.ac.nz>
 <00141b78-288f-2398-dabc-7bc17c76ed30@gmail.com>
 <91f048a9-f125-1779-fb95-f3b253ee6913@auckland.ac.nz>
 <22781.11085.367064.948121@max.eddelbuettel.com>
Message-ID: <7b0c9ea2-46c2-de59-e48d-fbf9a9818bd4@auckland.ac.nz>


On 24/04/17 10:31, Dirk Eddelbuettel wrote:

>
> On 24 April 2017 at 10:18, Rolf Turner wrote:
> | One more (I hope it's the last!) question:
> |
> | One of my subroutines has an argument of type *logical*.  There is no
> | logical type in C.  So, since I am perforce using C-speak, I cannot
> | change "void *" to "void logical".
> |
> | I have a (very vague) understanding that in C one uses variables of int
> | type (taking the values 0, for FALSE, and 1, for TRUE) as logical variables.
> |
> | On that understanding I took a punt and replaced "void *" by "int *" for
> | the logical type variable.  The package built and passed
> |
> |      "R CMD check --as-cran"
> |
> | so it seems that this is OK.  Is this the Right Thing To Do?  Are there
> | any (obvious?) lurking perils?
>
> I think you are allowed to use C99 [1] which has it -- see eg
>
> http://stackoverflow.com/questions/4159713/how-to-use-boolean-datatype-in-c
>
> Dirk
>
> [1] Section 1.6.4 opems with
>
>     1.6.4 Portable C and C++ code
>     -----------------------------
>
>     Writing portable C and C++ code is mainly a matter of observing the
>     standards (C99, C++98 or where declared C++11/14) and testing that
>     extensions (such as POSIX functions) are supported.

Ah, but I'm *not* using C at all, I'm using Fortran.  So I think that 
raising the possibility of using C99 is a communist fish[1].  I just 
want to make sure that my (modified) init.c is syntactically correct and 
robust for implementing the registration of my *Fortran* routines.

cheers,

Rolf

[1] Red herring.

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From edd at debian.org  Mon Apr 24 01:22:54 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 23 Apr 2017 18:22:54 -0500
Subject: [R-pkg-devel] R_registerRoutines, etc.
In-Reply-To: <7b0c9ea2-46c2-de59-e48d-fbf9a9818bd4@auckland.ac.nz>
References: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
 <270ee232-14f7-4935-b10c-51789e6275f3@gmail.com>
 <cbce4eb0-9102-1069-6bc8-4b94e7b9e911@auckland.ac.nz>
 <00141b78-288f-2398-dabc-7bc17c76ed30@gmail.com>
 <91f048a9-f125-1779-fb95-f3b253ee6913@auckland.ac.nz>
 <22781.11085.367064.948121@max.eddelbuettel.com>
 <7b0c9ea2-46c2-de59-e48d-fbf9a9818bd4@auckland.ac.nz>
Message-ID: <22781.14158.880076.322484@max.eddelbuettel.com>


On 24 April 2017 at 10:45, Rolf Turner wrote:
| On 24/04/17 10:31, Dirk Eddelbuettel wrote:
| > On 24 April 2017 at 10:18, Rolf Turner wrote:
| > | One more (I hope it's the last!) question:
| > |
| > | One of my subroutines has an argument of type *logical*.  There is no
| > | logical type in C.  So, since I am perforce using C-speak, I cannot
| > | change "void *" to "void logical".
| > |
| > | I have a (very vague) understanding that in C one uses variables of int
| > | type (taking the values 0, for FALSE, and 1, for TRUE) as logical variables.
| > |
| > | On that understanding I took a punt and replaced "void *" by "int *" for
| > | the logical type variable.  The package built and passed
| > |
| > |      "R CMD check --as-cran"
| > |
| > | so it seems that this is OK.  Is this the Right Thing To Do?  Are there
| > | any (obvious?) lurking perils?
| >
| > I think you are allowed to use C99 [1] which has it -- see eg
| >
| > http://stackoverflow.com/questions/4159713/how-to-use-boolean-datatype-in-c
| >
| > Dirk
| >
| > [1] Section 1.6.4 opems with
| >
| >     1.6.4 Portable C and C++ code
| >     -----------------------------
| >
| >     Writing portable C and C++ code is mainly a matter of observing the
| >     standards (C99, C++98 or where declared C++11/14) and testing that
| >     extensions (such as POSIX functions) are supported.
| 
| Ah, but I'm *not* using C at all, I'm using Fortran.  So I think that 
| raising the possibility of using C99 is a communist fish[1].  I just 
| want to make sure that my (modified) init.c is syntactically correct and 

I would be surpised if init.c was Fortran. Anyway...

| robust for implementing the registration of my *Fortran* routines.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch.duncan at gmail.com  Mon Apr 24 01:36:44 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 23 Apr 2017 19:36:44 -0400
Subject: [R-pkg-devel] R_registerRoutines, etc.
In-Reply-To: <91f048a9-f125-1779-fb95-f3b253ee6913@auckland.ac.nz>
References: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
 <270ee232-14f7-4935-b10c-51789e6275f3@gmail.com>
 <cbce4eb0-9102-1069-6bc8-4b94e7b9e911@auckland.ac.nz>
 <00141b78-288f-2398-dabc-7bc17c76ed30@gmail.com>
 <91f048a9-f125-1779-fb95-f3b253ee6913@auckland.ac.nz>
Message-ID: <d8103012-1866-454e-69ea-96d3d7c00733@gmail.com>

On 23/04/2017 6:18 PM, Rolf Turner wrote:
> On 23/04/17 23:05, Duncan Murdoch wrote:
>
>>>>
>>>> Looks like
>>>>
>>>> extern void F77_NAME(mnnd)(double *, double *, int *, double *,
>>>> double *);
>>>>
>>>> to me.
>
> One more (I hope it's the last!) question:
>
> One of my subroutines has an argument of type *logical*.  There is no
> logical type in C.  So, since I am perforce using C-speak, I cannot
> change "void *" to "void logical".
>

For questions like this, see Writing R Extensions section 5.2. 
"Logical" in R is "int *" in C, and "INTEGER" in Fortran.

This is important:  *there is no way to pass a Fortran "LOGICAL" from R 
to Fortran*.

The issue is that different Fortran compilers store LOGICAL in different 
ways.  Some are equivalent to int with 0 for FALSE, all else for TRUE, 
but not all are.  So don't rely on it.

If you need to call a Fortran subroutine that takes a LOGICAL argument, 
you need to write another Fortran subroutine that takes an INTEGER 
argument.  Then compute "arg NE 0" (or whatever the Fortran version is 
for testing not equal to zero) and pass that to the original routine.


> I have a (very vague) understanding that in C one uses variables of int
> type (taking the values 0, for FALSE, and 1, for TRUE) as logical variables.

It's really "nonzero for TRUE", hence the test above.

>
> On that understanding I took a punt and replaced "void *" by "int *" for
> the logical type variable.  The package built and passed
>
>      "R CMD check --as-cran"
>
> so it seems that this is OK.  Is this the Right Thing To Do?  Are there
> any (obvious?) lurking perils?

Lots of lurking perils.  You got lucky; don't count on it.

Duncan Murdoch

>
> Thanks.
>
> cheers,
>
> Rolf
>


From r.turner at auckland.ac.nz  Mon Apr 24 01:47:43 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Mon, 24 Apr 2017 11:47:43 +1200
Subject: [R-pkg-devel] R_registerRoutines, etc.
In-Reply-To: <22781.14158.880076.322484@max.eddelbuettel.com>
References: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
 <270ee232-14f7-4935-b10c-51789e6275f3@gmail.com>
 <cbce4eb0-9102-1069-6bc8-4b94e7b9e911@auckland.ac.nz>
 <00141b78-288f-2398-dabc-7bc17c76ed30@gmail.com>
 <91f048a9-f125-1779-fb95-f3b253ee6913@auckland.ac.nz>
 <22781.11085.367064.948121@max.eddelbuettel.com>
 <7b0c9ea2-46c2-de59-e48d-fbf9a9818bd4@auckland.ac.nz>
 <22781.14158.880076.322484@max.eddelbuettel.com>
Message-ID: <cf66f1b5-b5e0-1e70-3196-521f4b04007f@auckland.ac.nz>


On 24/04/17 11:22, Dirk Eddelbuettel wrote:

> I would be surpised if init.c was Fortran. Anyway...


It isn't of course.  But it is the device used for "registering 
routines" of all both flavours (i.e. both C and Fortran).

cheers,

Rolf

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From avraham.adler at gmail.com  Mon Apr 24 01:48:07 2017
From: avraham.adler at gmail.com (Avraham Adler)
Date: Sun, 23 Apr 2017 19:48:07 -0400
Subject: [R-pkg-devel] R_registerRoutines, etc.
In-Reply-To: <d8103012-1866-454e-69ea-96d3d7c00733@gmail.com>
References: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
 <270ee232-14f7-4935-b10c-51789e6275f3@gmail.com>
 <cbce4eb0-9102-1069-6bc8-4b94e7b9e911@auckland.ac.nz>
 <00141b78-288f-2398-dabc-7bc17c76ed30@gmail.com>
 <91f048a9-f125-1779-fb95-f3b253ee6913@auckland.ac.nz>
 <d8103012-1866-454e-69ea-96d3d7c00733@gmail.com>
Message-ID: <CAL6gwnLO-6txTZcLU3OFRxdFNg+pECpkmopCovLPSj5vyKFstw@mail.gmail.com>

On Sun, Apr 23, 2017 at 7:36 PM, Duncan Murdoch
<murdoch.duncan at gmail.com> wrote:
> On 23/04/2017 6:18 PM, Rolf Turner wrote:
[SNIP]
> This is important:  *there is no way to pass a Fortran "LOGICAL" from R to
> Fortran*.
>
> The issue is that different Fortran compilers store LOGICAL in different
> ways.  Some are equivalent to int with 0 for FALSE, all else for TRUE, but
> not all are.  So don't rely on it.
>
> If you need to call a Fortran subroutine that takes a LOGICAL argument, you
> need to write another Fortran subroutine that takes an INTEGER argument.
> Then compute "arg NE 0" (or whatever the Fortran version is for testing not
> equal to zero) and pass that to the original routine.

I went through this very headache over the last few months. Even using
Fortran 2003 ISO C bindings, I ended up having to convert to integers
for Solaris SPARC. I know you are using .Fortran() and not .Call(),
but perhaps you would find this commit of some value
<https://bitbucket.org/aadler/delaporte/commits/709ab65696e61d18585466ac700cf2856dedcb35>,

Good luck!

Avi


From edd at debian.org  Mon Apr 24 01:51:54 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 23 Apr 2017 18:51:54 -0500
Subject: [R-pkg-devel] R_registerRoutines, etc.
In-Reply-To: <cf66f1b5-b5e0-1e70-3196-521f4b04007f@auckland.ac.nz>
References: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
 <270ee232-14f7-4935-b10c-51789e6275f3@gmail.com>
 <cbce4eb0-9102-1069-6bc8-4b94e7b9e911@auckland.ac.nz>
 <00141b78-288f-2398-dabc-7bc17c76ed30@gmail.com>
 <91f048a9-f125-1779-fb95-f3b253ee6913@auckland.ac.nz>
 <22781.11085.367064.948121@max.eddelbuettel.com>
 <7b0c9ea2-46c2-de59-e48d-fbf9a9818bd4@auckland.ac.nz>
 <22781.14158.880076.322484@max.eddelbuettel.com>
 <cf66f1b5-b5e0-1e70-3196-521f4b04007f@auckland.ac.nz>
Message-ID: <22781.15898.574411.113424@max.eddelbuettel.com>


On 24 April 2017 at 11:47, Rolf Turner wrote:
| 
| On 24/04/17 11:22, Dirk Eddelbuettel wrote:
| 
| > I would be surpised if init.c was Fortran. Anyway...
| 
| It isn't of course.  But it is the device used for "registering 
| routines" of all both flavours (i.e. both C and Fortran).

And per Duncan's last (and his earlier emails) maybe you need to call from R
into C (for finer control over the interface) and only then call your Fortran
worker function.  To hide it, and its plausibly more limited interface,
entirely from R.

But I really have no firm idea (and tend to have none of these issues as I
use C++ most of the time from R) so I get out of the way now.

Best of luck,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From r.turner at auckland.ac.nz  Mon Apr 24 01:53:38 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Mon, 24 Apr 2017 11:53:38 +1200
Subject: [R-pkg-devel] R_registerRoutines, etc.
In-Reply-To: <d8103012-1866-454e-69ea-96d3d7c00733@gmail.com>
References: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
 <270ee232-14f7-4935-b10c-51789e6275f3@gmail.com>
 <cbce4eb0-9102-1069-6bc8-4b94e7b9e911@auckland.ac.nz>
 <00141b78-288f-2398-dabc-7bc17c76ed30@gmail.com>
 <91f048a9-f125-1779-fb95-f3b253ee6913@auckland.ac.nz>
 <d8103012-1866-454e-69ea-96d3d7c00733@gmail.com>
Message-ID: <cfb29291-8a3b-3a88-b561-68c2ddf164a4@auckland.ac.nz>

On 24/04/17 11:36, Duncan Murdoch wrote:
> On 23/04/2017 6:18 PM, Rolf Turner wrote:
>> On 23/04/17 23:05, Duncan Murdoch wrote:
>>
>>>>>
>>>>> Looks like
>>>>>
>>>>> extern void F77_NAME(mnnd)(double *, double *, int *, double *,
>>>>> double *);
>>>>>
>>>>> to me.
>>
>> One more (I hope it's the last!) question:
>>
>> One of my subroutines has an argument of type *logical*.  There is no
>> logical type in C.  So, since I am perforce using C-speak, I cannot
>> change "void *" to "void logical".
>>
>
> For questions like this, see Writing R Extensions section 5.2. "Logical"
> in R is "int *" in C, and "INTEGER" in Fortran.
>
> This is important:  *there is no way to pass a Fortran "LOGICAL" from R
> to Fortran*.
>
> The issue is that different Fortran compilers store LOGICAL in different
> ways.  Some are equivalent to int with 0 for FALSE, all else for TRUE,
> but not all are.  So don't rely on it.
>
> If you need to call a Fortran subroutine that takes a LOGICAL argument,
> you need to write another Fortran subroutine that takes an INTEGER
> argument.  Then compute "arg NE 0" (or whatever the Fortran version is
> for testing not equal to zero) and pass that to the original routine.

Hoo-boy!!!  Some serious code-rewriting called for!

Thanks for setting me straight on this.

Is it possible that R CMD check could be set up to issue an error, or at 
least a warning, if it finds "logical" or "as.logical" in the argument 
lists of calls to .Fortran()?

Seems like it would be a Good Idea if it is indeed possible.

cheers,

Rolf

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From avraham.adler at gmail.com  Mon Apr 24 01:55:34 2017
From: avraham.adler at gmail.com (Avraham Adler)
Date: Sun, 23 Apr 2017 19:55:34 -0400
Subject: [R-pkg-devel] R_registerRoutines, etc.
In-Reply-To: <22781.15898.574411.113424@max.eddelbuettel.com>
References: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
 <270ee232-14f7-4935-b10c-51789e6275f3@gmail.com>
 <cbce4eb0-9102-1069-6bc8-4b94e7b9e911@auckland.ac.nz>
 <00141b78-288f-2398-dabc-7bc17c76ed30@gmail.com>
 <91f048a9-f125-1779-fb95-f3b253ee6913@auckland.ac.nz>
 <22781.11085.367064.948121@max.eddelbuettel.com>
 <7b0c9ea2-46c2-de59-e48d-fbf9a9818bd4@auckland.ac.nz>
 <22781.14158.880076.322484@max.eddelbuettel.com>
 <cf66f1b5-b5e0-1e70-3196-521f4b04007f@auckland.ac.nz>
 <22781.15898.574411.113424@max.eddelbuettel.com>
Message-ID: <CAL6gwnK9H01T88CWPCy8jdPsCNi6RmQenHcmVjFEgW_GD882-A@mail.gmail.com>

On Sun, Apr 23, 2017 at 7:51 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
>
> On 24 April 2017 at 11:47, Rolf Turner wrote:
>
> And per Duncan's last (and his earlier emails) maybe you need to call from R
> into C (for finer control over the interface) and only then call your Fortran
> worker function.  To hide it, and its plausibly more limited interface,
> entirely from R.
>

What I found useful was Drew Schmidt's example Romp. Where he also
recommends against .Fortran() in general due to performance overheads.

<https://github.com/wrathematics/Romp>

Avi


From murdoch.duncan at gmail.com  Mon Apr 24 02:39:25 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 23 Apr 2017 20:39:25 -0400
Subject: [R-pkg-devel] R_registerRoutines, etc.
In-Reply-To: <cfb29291-8a3b-3a88-b561-68c2ddf164a4@auckland.ac.nz>
References: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
 <270ee232-14f7-4935-b10c-51789e6275f3@gmail.com>
 <cbce4eb0-9102-1069-6bc8-4b94e7b9e911@auckland.ac.nz>
 <00141b78-288f-2398-dabc-7bc17c76ed30@gmail.com>
 <91f048a9-f125-1779-fb95-f3b253ee6913@auckland.ac.nz>
 <d8103012-1866-454e-69ea-96d3d7c00733@gmail.com>
 <cfb29291-8a3b-3a88-b561-68c2ddf164a4@auckland.ac.nz>
Message-ID: <f6a22b9b-fc86-753b-1f26-247a81a4dc43@gmail.com>

On 23/04/2017 7:53 PM, Rolf Turner wrote:
> On 24/04/17 11:36, Duncan Murdoch wrote:
>> On 23/04/2017 6:18 PM, Rolf Turner wrote:
>>> On 23/04/17 23:05, Duncan Murdoch wrote:
>>>
>>>>>>
>>>>>> Looks like
>>>>>>
>>>>>> extern void F77_NAME(mnnd)(double *, double *, int *, double *,
>>>>>> double *);
>>>>>>
>>>>>> to me.
>>>
>>> One more (I hope it's the last!) question:
>>>
>>> One of my subroutines has an argument of type *logical*.  There is no
>>> logical type in C.  So, since I am perforce using C-speak, I cannot
>>> change "void *" to "void logical".
>>>
>>
>> For questions like this, see Writing R Extensions section 5.2. "Logical"
>> in R is "int *" in C, and "INTEGER" in Fortran.
>>
>> This is important:  *there is no way to pass a Fortran "LOGICAL" from R
>> to Fortran*.
>>
>> The issue is that different Fortran compilers store LOGICAL in different
>> ways.  Some are equivalent to int with 0 for FALSE, all else for TRUE,
>> but not all are.  So don't rely on it.
>>
>> If you need to call a Fortran subroutine that takes a LOGICAL argument,
>> you need to write another Fortran subroutine that takes an INTEGER
>> argument.  Then compute "arg NE 0" (or whatever the Fortran version is
>> for testing not equal to zero) and pass that to the original routine.
>
> Hoo-boy!!!  Some serious code-rewriting called for!
>
> Thanks for setting me straight on this.
>
> Is it possible that R CMD check could be set up to issue an error, or at
> least a warning, if it finds "logical" or "as.logical" in the argument
> lists of calls to .Fortran()?
>

The problem is at the other end.  Passing an R logical is fine; it just 
turns into an INTEGER on its way to Fortran.

I doubt if it is feasible to detect the problem in Fortran, but static 
analysis keeps getting better, so I could be wrong now or in a while.

Duncan Murdoch



> Seems like it would be a Good Idea if it is indeed possible.
>
> cheers,
>
> Rolf
>


From r.turner at auckland.ac.nz  Mon Apr 24 03:35:37 2017
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Mon, 24 Apr 2017 13:35:37 +1200
Subject: [R-pkg-devel] R_registerRoutines, etc.
In-Reply-To: <f6a22b9b-fc86-753b-1f26-247a81a4dc43@gmail.com>
References: <13abca0e-f57f-21cb-691e-ea13766e41b8@auckland.ac.nz>
 <270ee232-14f7-4935-b10c-51789e6275f3@gmail.com>
 <cbce4eb0-9102-1069-6bc8-4b94e7b9e911@auckland.ac.nz>
 <00141b78-288f-2398-dabc-7bc17c76ed30@gmail.com>
 <91f048a9-f125-1779-fb95-f3b253ee6913@auckland.ac.nz>
 <d8103012-1866-454e-69ea-96d3d7c00733@gmail.com>
 <cfb29291-8a3b-3a88-b561-68c2ddf164a4@auckland.ac.nz>
 <f6a22b9b-fc86-753b-1f26-247a81a4dc43@gmail.com>
Message-ID: <5990ca97-f81a-f9ce-3944-965bedf34b97@auckland.ac.nz>

On 24/04/17 12:39, Duncan Murdoch wrote:
> On 23/04/2017 7:53 PM, Rolf Turner wrote:
>> On 24/04/17 11:36, Duncan Murdoch wrote:
>>> On 23/04/2017 6:18 PM, Rolf Turner wrote:
>>>> On 23/04/17 23:05, Duncan Murdoch wrote:
>>>>
>>>>>>>
>>>>>>> Looks like
>>>>>>>
>>>>>>> extern void F77_NAME(mnnd)(double *, double *, int *, double *,
>>>>>>> double *);
>>>>>>>
>>>>>>> to me.
>>>>
>>>> One more (I hope it's the last!) question:
>>>>
>>>> One of my subroutines has an argument of type *logical*.  There is no
>>>> logical type in C.  So, since I am perforce using C-speak, I cannot
>>>> change "void *" to "void logical".
>>>>
>>>
>>> For questions like this, see Writing R Extensions section 5.2. "Logical"
>>> in R is "int *" in C, and "INTEGER" in Fortran.
>>>
>>> This is important:  *there is no way to pass a Fortran "LOGICAL" from R
>>> to Fortran*.
>>>
>>> The issue is that different Fortran compilers store LOGICAL in different
>>> ways.  Some are equivalent to int with 0 for FALSE, all else for TRUE,
>>> but not all are.  So don't rely on it.
>>>
>>> If you need to call a Fortran subroutine that takes a LOGICAL argument,
>>> you need to write another Fortran subroutine that takes an INTEGER
>>> argument.  Then compute "arg NE 0" (or whatever the Fortran version is
>>> for testing not equal to zero) and pass that to the original routine.
>>
>> Hoo-boy!!!  Some serious code-rewriting called for!
>>
>> Thanks for setting me straight on this.
>>
>> Is it possible that R CMD check could be set up to issue an error, or at
>> least a warning, if it finds "logical" or "as.logical" in the argument
>> lists of calls to .Fortran()?
>>
>
> The problem is at the other end.  Passing an R logical is fine; it just
> turns into an INTEGER on its way to Fortran.

Yes, but surely this is an indication that the Fortran code being called 
"expects" a logical and thereby might screw up if its way of
converting integers to logicals were problematic.

> I doubt if it is feasible to detect the problem in Fortran, but static
> analysis keeps getting better, so I could be wrong now or in a while.

If it is, or should become, feasible, it seems to me that it should be 
done.   OTOH I gather from other posts that the .Fortran() interface 
will eventually be removed, so the problem (in this form) will go away.

The *real* problem will then be to write C wrappers for all our Fortran 
routines that are (directly) called by R functions.  And this is a task 
that is impossible for people like me who go catatonic when they see C 
code.  So at that point I will just give up and go to the pub.

<SNIP>

cheers,

Rolf

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From henrik.bengtsson at gmail.com  Mon Apr 24 04:51:32 2017
From: henrik.bengtsson at gmail.com (Henrik Bengtsson)
Date: Sun, 23 Apr 2017 19:51:32 -0700
Subject: [R-pkg-devel] new package submission: "check log incomplete,
	web timeout?"
In-Reply-To: <20170423161711.qokpyke6s5h2xz3b@biobook.bloom180.lan>
References: <20170423030852.7cbjwugoijcutvqz@biobook.bloom180.lan>
 <CAERMt4eseHxcSqowokSRXBD=kw2_ormtjTZXAXm55RyBff=Axg@mail.gmail.com>
 <20170423161711.qokpyke6s5h2xz3b@biobook.bloom180.lan>
Message-ID: <CAFDcVCTXv184+ZkxS88pinX1gNLU=DCzK0SLckR3FsM1AfuQ=Q@mail.gmail.com>

Your package uses parallel processing (foreach w/ doParallel).
Peeking at the code, it looks like the vignette is using single-core
processing via doParallel::registerDoParallel(np) where np = 1.  On
Unix-like system, this *forks* off a single R process, and on Windows
it *launches* a single background R session ("PSOCK" cluster) via a
system() call.  Forking works pretty much all the time, so you rarely
see problems there.  However, with PSOCK cluster there are a few
things that can go wrong, e.g. the master R process and the background
worker(s) communicate via a socket on a random port in 11000:11999.

Now, my future package (https://cran.r-project.org/package=future)
runs lots and lots of parallel tests on various backends, including
PSOCK clusters.  I monitor the CRAN R CMD check:s for the future
package, and I do indeed (rather) occasionally see similar silent
timeouts on the Windows CRAN tests which disappear the next round of
CRAN tests.  I've also occasionally seen it when using win-builder.
It's never been a clear pattern and it appears to hit at random times.
The win-builder machine and the CRAN Windows servers have equal setups
(or even are on the same machine).  I'm pretty sure that if the
parallel package itself would run PSOCK tests regularly on CRAN, it
would also see these random silent timeouts.

I've emailed Uwe Ligges about this when I've seen it, but it's a
really hard problem to troubleshoot, especially since it most likely
won't show if you rerun the test.  It could be a CRAN Windows specific
thing, an R Windows specific thing, or something else.   My guess is
that you hit that problem at submission.   I would ask Uwe to recheck
the package again.  If the problem goes away, then you're in the same
boat.

A completely different alternative, is to have a way to disable
parallel processing in your examples / tests / vignettes, e.g. if (np
== 1) registerDoSEQ() else registerDoParallel(np).  Personally, I'm
not a big fan of that approach because it's an ad-hoc workaround and
you're end up not testing all of your package.

Hope this helps

Henrik

On Sun, Apr 23, 2017 at 9:17 AM, Jeremy Volkening <jdv at base2bio.com> wrote:
> On Sun, Apr 23, 2017 at 10:17:01AM +0200, Alexandre Courtiol wrote:
>>
>> Could it be that one your computer you can build vignettes quickly thanks
>> to some caching of the knitr chunk output but that it takes too much time
>> building that without the cache...? ... CRAN does not like when
>> anything takes more than a few seconds...
>
>
> Thanks for the reply. The vignettes do take a little time to build, as the
> knitr code is doing some modeling, but I wouldn't have thought it excessive.
> According to the logs from the win-builder service, it took 28s (about the
> same as each of the i386 and x64 tests). Is this too long for the CRAN
> submission service? I've already pruned down my example data to just a
> couple of samples instead of the thousands normally modeled in a session.
>
> If this is indeed the issue, do I need to remove the knitr code and just
> include static images of the output plots in the vignette? This would seem
> to go against most of the recommendations I have read from various sources
> on best practice.
>
> Regards,
> Jeremy
>
>> On 23 April 2017 at 05:08, Jeremy Volkening <jdv at base2bio.com> wrote:
>>
>>> Hello,
>>>
>>> I am trying to submit a package to CRAN for the first time. I have gone
>>> through testing on my own machines (Linux, Windows x64, Windows i386), on
>>> Travis CI and using win-builder. All tests are now passing on all of
>>> these
>>> platforms. However, when I try to submit the package to CRAN I get an
>>> email
>>> that the pre-test has failed, with the following line:
>>>
>>> Status: NA (check log incomplete, web timeout?)
>>>
>>> The pre-test link is here: https://win-builder.r-project.
>>> org/incoming_pretest/170423_044521_mstherm_047/
>>>
>>> If I check the '00check.log' file I can see that it ends with the line "*
>>> checking re-building of vignette outputs ...", so apparently the test is
>>> quitting before it finishes this step. I'm not sure how to proceed, since
>>> everything is working for all of my own manual tests (as well as
>>> win-builder). See the log for my manual submission of exactly the same
>>> package to win-builder, which passes:
>>>
>>> https://win-builder.r-project.org/4tvH1D2TdMep/
>>>
>>> Any help would be greatly appreciated. The package itself can be found
>>> here:
>>>
>>> https://github.com/jvolkening/r-mstherm
>>>
>>> Regards,
>>> Jeremy
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>>
>>
>> --
>> Alexandre Courtiol
>>
>> http://sites.google.com/site/alexandrecourtiol/home
>>
>> *"Science is the belief in the ignorance of experts"*, R. Feynman
>
>
> --
> Nothing so needs reforming as other people's habits.
>                 -- Mark Twain, "Pudd'nhead Wilson's Calendar"
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jdv at base2bio.com  Mon Apr 24 05:43:06 2017
From: jdv at base2bio.com (Jeremy Volkening)
Date: Sun, 23 Apr 2017 22:43:06 -0500
Subject: [R-pkg-devel] new package submission: "check log incomplete,
 web timeout?"
In-Reply-To: <CAFDcVCTXv184+ZkxS88pinX1gNLU=DCzK0SLckR3FsM1AfuQ=Q@mail.gmail.com>
References: <20170423030852.7cbjwugoijcutvqz@biobook.bloom180.lan>
 <CAERMt4eseHxcSqowokSRXBD=kw2_ormtjTZXAXm55RyBff=Axg@mail.gmail.com>
 <20170423161711.qokpyke6s5h2xz3b@biobook.bloom180.lan>
 <CAFDcVCTXv184+ZkxS88pinX1gNLU=DCzK0SLckR3FsM1AfuQ=Q@mail.gmail.com>
Message-ID: <20170424034305.ko73treefwrha4ya@biobook.bloom180.lan>

Henrik,

>A completely different alternative, is to have a way to disable
>parallel processing in your examples / tests / vignettes, e.g. if (np
>== 1) registerDoSEQ() else registerDoParallel(np).  Personally, I'm
>not a big fan of that approach because it's an ad-hoc workaround and
>you're end up not testing all of your package.

Supporting parallel processing has already caused me untold headaches as 
a not-overly-fluent R user (including over an hour on Friday try to 
figure out why my Windows tests were hanging indefinitely -- had to add 
"Sys.unsetenv("R_TESTS") to the top of my test script which I still 
don't understand). However, I would consider it an important feature of 
the package where actual usage typically involves modeling data from 
thousands of proteins, each of which can be bootstrapped up to 20 times.  
For this reason, I also don't like the idea of "testing around" the 
issue. While I don't use Windows myself, it doesn't make sense to claim 
my package runs on Windows if it is going to randomly freeze up for 
users on that platform.

I will ask Uwe Ligges to re-check my submission as you suggested. I 
would really like to get this past the pre-check stage so I can start 
dealing with the issues that I'm sure will come up in the human review.

Regards,
Jeremy

>
>Hope this helps
>
>Henrik
>
>On Sun, Apr 23, 2017 at 9:17 AM, Jeremy Volkening <jdv at base2bio.com> wrote:
>> On Sun, Apr 23, 2017 at 10:17:01AM +0200, Alexandre Courtiol wrote:
>>>
>>> Could it be that one your computer you can build vignettes quickly thanks
>>> to some caching of the knitr chunk output but that it takes too much time
>>> building that without the cache...? ... CRAN does not like when
>>> anything takes more than a few seconds...
>>
>>
>> Thanks for the reply. The vignettes do take a little time to build, as the
>> knitr code is doing some modeling, but I wouldn't have thought it excessive.
>> According to the logs from the win-builder service, it took 28s (about the
>> same as each of the i386 and x64 tests). Is this too long for the CRAN
>> submission service? I've already pruned down my example data to just a
>> couple of samples instead of the thousands normally modeled in a session.
>>
>> If this is indeed the issue, do I need to remove the knitr code and just
>> include static images of the output plots in the vignette? This would seem
>> to go against most of the recommendations I have read from various sources
>> on best practice.
>>
>> Regards,
>> Jeremy
>>
>>> On 23 April 2017 at 05:08, Jeremy Volkening <jdv at base2bio.com> wrote:
>>>
>>>> Hello,
>>>>
>>>> I am trying to submit a package to CRAN for the first time. I have gone
>>>> through testing on my own machines (Linux, Windows x64, Windows i386), on
>>>> Travis CI and using win-builder. All tests are now passing on all of
>>>> these
>>>> platforms. However, when I try to submit the package to CRAN I get an
>>>> email
>>>> that the pre-test has failed, with the following line:
>>>>
>>>> Status: NA (check log incomplete, web timeout?)
>>>>
>>>> The pre-test link is here: https://win-builder.r-project.
>>>> org/incoming_pretest/170423_044521_mstherm_047/
>>>>
>>>> If I check the '00check.log' file I can see that it ends with the line "*
>>>> checking re-building of vignette outputs ...", so apparently the test is
>>>> quitting before it finishes this step. I'm not sure how to proceed, since
>>>> everything is working for all of my own manual tests (as well as
>>>> win-builder). See the log for my manual submission of exactly the same
>>>> package to win-builder, which passes:
>>>>
>>>> https://win-builder.r-project.org/4tvH1D2TdMep/
>>>>
>>>> Any help would be greatly appreciated. The package itself can be found
>>>> here:
>>>>
>>>> https://github.com/jvolkening/r-mstherm
>>>>
>>>> Regards,
>>>> Jeremy
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>>
>>>
>>> --
>>> Alexandre Courtiol
>>>
>>> http://sites.google.com/site/alexandrecourtiol/home
>>>
>>> *"Science is the belief in the ignorance of experts"*, R. Feynman
>>
>>
>> --
>> Nothing so needs reforming as other people's habits.
>>                 -- Mark Twain, "Pudd'nhead Wilson's Calendar"
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Few things are harder to put up with than the annoyance of a good example.
		-- "Mark Twain, Pudd'nhead Wilson's Calendar"


From pbailey at air.org  Mon Apr 24 17:58:31 2017
From: pbailey at air.org (Bailey, Paul)
Date: Mon, 24 Apr 2017 15:58:31 +0000
Subject: [R-pkg-devel] WARNING from R-devel not from 3.4.0 "cannot open file
 ... the process cannot access the file because it is being used by another
 process"
Message-ID: <b2294b46974b4295b34fb200484d7e5f@air.org>

I'm trying to submit a package and I get an odd error when I run R CMD check --as-cran on R-devel and I only bring this up because I don't get with 3.4.0.

* checking package subdirectories ... WARNING
Warning messages:
1: In file.info(x, extra_cols = FALSE) :
  cannot open file 'c:/MyPackage.Rcheck/00_pkg_src/MyPackage/R/..': The process cannot access the file because it is being used by another
process
2: In file.info(x, extra_cols = FALSE) :
  cannot open file 'c:/MyPackage.Rcheck/00_pkg_src/MyPackage/man/..': The process cannot access the file because it is being used by another process
Please remove or rename the files.
See section 'Package subdirectories' in the 'Writing R Extensions'
manual.

I'm only running one R instance at a time

If it helps:

> version
               _
platform       x86_64-w64-mingw32
arch           x86_64
os             mingw32
system         x86_64, mingw32
status         Under development (unstable)
major          3
minor          5.0
year           2017
month          04
day            23
svn rev        72605
language       R
version.string R Under development (unstable) (2017-04-23 r72605)
nickname       Unsuffered Consequences

I have run both several times and both persist in seeing (R-devel) or not seeing (R-3.4.0) the error.

I have also tried deleting the .Rcheck folder and starting fresh, same results.


	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Mon Apr 24 20:51:59 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Mon, 24 Apr 2017 20:51:59 +0200
Subject: [R-pkg-devel] WARNING from R-devel not from 3.4.0 "cannot open
 file ... the process cannot access the file because it is being used by
 another process"
In-Reply-To: <b2294b46974b4295b34fb200484d7e5f@air.org>
References: <b2294b46974b4295b34fb200484d7e5f@air.org>
Message-ID: <198aa951-17fa-9ed7-2455-180849a0b3c0@statistik.tu-dortmund.de>

This was a bug in R-devel for few days that has been fixed this morning.


Best,
Uwe Ligges



On 24.04.2017 17:58, Bailey, Paul wrote:
> I'm trying to submit a package and I get an odd error when I run R CMD check --as-cran on R-devel and I only bring this up because I don't get with 3.4.0.
>
> * checking package subdirectories ... WARNING
> Warning messages:
> 1: In file.info(x, extra_cols = FALSE) :
>   cannot open file 'c:/MyPackage.Rcheck/00_pkg_src/MyPackage/R/..': The process cannot access the file because it is being used by another
> process
> 2: In file.info(x, extra_cols = FALSE) :
>   cannot open file 'c:/MyPackage.Rcheck/00_pkg_src/MyPackage/man/..': The process cannot access the file because it is being used by another process
> Please remove or rename the files.
> See section 'Package subdirectories' in the 'Writing R Extensions'
> manual.
>
> I'm only running one R instance at a time
>
> If it helps:
>
>> version
>                _
> platform       x86_64-w64-mingw32
> arch           x86_64
> os             mingw32
> system         x86_64, mingw32
> status         Under development (unstable)
> major          3
> minor          5.0
> year           2017
> month          04
> day            23
> svn rev        72605
> language       R
> version.string R Under development (unstable) (2017-04-23 r72605)
> nickname       Unsuffered Consequences
>
> I have run both several times and both persist in seeing (R-devel) or not seeing (R-3.4.0) the error.
>
> I have also tried deleting the .Rcheck folder and starting fresh, same results.
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ligges at statistik.tu-dortmund.de  Mon Apr 24 20:56:20 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Mon, 24 Apr 2017 20:56:20 +0200
Subject: [R-pkg-devel] new package submission: "check log incomplete,
 web timeout?"
In-Reply-To: <20170424034305.ko73treefwrha4ya@biobook.bloom180.lan>
References: <20170423030852.7cbjwugoijcutvqz@biobook.bloom180.lan>
 <CAERMt4eseHxcSqowokSRXBD=kw2_ormtjTZXAXm55RyBff=Axg@mail.gmail.com>
 <20170423161711.qokpyke6s5h2xz3b@biobook.bloom180.lan>
 <CAFDcVCTXv184+ZkxS88pinX1gNLU=DCzK0SLckR3FsM1AfuQ=Q@mail.gmail.com>
 <20170424034305.ko73treefwrha4ya@biobook.bloom180.lan>
Message-ID: <bf153ad7-3622-e496-a498-afcbb50bd56c@statistik.tu-dortmund.de>

I ahven't looked at you package, but can you please verify:


1. If you open some (socket) cluster, make sure you close it afterwards!
This is a very frequent source of problems.

2. Do not use more than 2 cores by default.


3. retry whether you pass the winbuilder checks, it could have been a 
random error.  How long does processing your vignettes take?

Best,
Uwe Ligges





On 24.04.2017 05:43, Jeremy Volkening wrote:
> Henrik,
>
>> A completely different alternative, is to have a way to disable
>> parallel processing in your examples / tests / vignettes, e.g. if (np
>> == 1) registerDoSEQ() else registerDoParallel(np).  Personally, I'm
>> not a big fan of that approach because it's an ad-hoc workaround and
>> you're end up not testing all of your package.
>
> Supporting parallel processing has already caused me untold headaches as
> a not-overly-fluent R user (including over an hour on Friday try to
> figure out why my Windows tests were hanging indefinitely -- had to add
> "Sys.unsetenv("R_TESTS") to the top of my test script which I still
> don't understand). However, I would consider it an important feature of
> the package where actual usage typically involves modeling data from
> thousands of proteins, each of which can be bootstrapped up to 20
> times.  For this reason, I also don't like the idea of "testing around"
> the issue. While I don't use Windows myself, it doesn't make sense to
> claim my package runs on Windows if it is going to randomly freeze up
> for users on that platform.
>
> I will ask Uwe Ligges to re-check my submission as you suggested. I
> would really like to get this past the pre-check stage so I can start
> dealing with the issues that I'm sure will come up in the human review.
>
> Regards,
> Jeremy
>
>>
>> Hope this helps
>>
>> Henrik
>>
>> On Sun, Apr 23, 2017 at 9:17 AM, Jeremy Volkening <jdv at base2bio.com>
>> wrote:
>>> On Sun, Apr 23, 2017 at 10:17:01AM +0200, Alexandre Courtiol wrote:
>>>>
>>>> Could it be that one your computer you can build vignettes quickly
>>>> thanks
>>>> to some caching of the knitr chunk output but that it takes too much
>>>> time
>>>> building that without the cache...? ... CRAN does not like when
>>>> anything takes more than a few seconds...
>>>
>>>
>>> Thanks for the reply. The vignettes do take a little time to build,
>>> as the
>>> knitr code is doing some modeling, but I wouldn't have thought it
>>> excessive.
>>> According to the logs from the win-builder service, it took 28s
>>> (about the
>>> same as each of the i386 and x64 tests). Is this too long for the CRAN
>>> submission service? I've already pruned down my example data to just a
>>> couple of samples instead of the thousands normally modeled in a
>>> session.
>>>
>>> If this is indeed the issue, do I need to remove the knitr code and just
>>> include static images of the output plots in the vignette? This would
>>> seem
>>> to go against most of the recommendations I have read from various
>>> sources
>>> on best practice.
>>>
>>> Regards,
>>> Jeremy
>>>
>>>> On 23 April 2017 at 05:08, Jeremy Volkening <jdv at base2bio.com> wrote:
>>>>
>>>>> Hello,
>>>>>
>>>>> I am trying to submit a package to CRAN for the first time. I have
>>>>> gone
>>>>> through testing on my own machines (Linux, Windows x64, Windows
>>>>> i386), on
>>>>> Travis CI and using win-builder. All tests are now passing on all of
>>>>> these
>>>>> platforms. However, when I try to submit the package to CRAN I get an
>>>>> email
>>>>> that the pre-test has failed, with the following line:
>>>>>
>>>>> Status: NA (check log incomplete, web timeout?)
>>>>>
>>>>> The pre-test link is here: https://win-builder.r-project.
>>>>> org/incoming_pretest/170423_044521_mstherm_047/
>>>>>
>>>>> If I check the '00check.log' file I can see that it ends with the
>>>>> line "*
>>>>> checking re-building of vignette outputs ...", so apparently the
>>>>> test is
>>>>> quitting before it finishes this step. I'm not sure how to proceed,
>>>>> since
>>>>> everything is working for all of my own manual tests (as well as
>>>>> win-builder). See the log for my manual submission of exactly the same
>>>>> package to win-builder, which passes:
>>>>>
>>>>> https://win-builder.r-project.org/4tvH1D2TdMep/
>>>>>
>>>>> Any help would be greatly appreciated. The package itself can be found
>>>>> here:
>>>>>
>>>>> https://github.com/jvolkening/r-mstherm
>>>>>
>>>>> Regards,
>>>>> Jeremy
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Alexandre Courtiol
>>>>
>>>> http://sites.google.com/site/alexandrecourtiol/home
>>>>
>>>> *"Science is the belief in the ignorance of experts"*, R. Feynman
>>>
>>>
>>> --
>>> Nothing so needs reforming as other people's habits.
>>>                 -- Mark Twain, "Pudd'nhead Wilson's Calendar"
>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From graemeleehickey at gmail.com  Wed Apr 26 17:26:44 2017
From: graemeleehickey at gmail.com (Graeme Hickey)
Date: Wed, 26 Apr 2017 16:26:44 +0100
Subject: [R-pkg-devel] PDF manual check giving FAIL status
Message-ID: <6112DB38-C731-4069-990E-AA6A9963A39E@gmail.com>

Hello,

This is my first post here, so thank you in advance for any help you can provide.

My package joineRML is showing a status of FAIL on CRAN for Mac OSX (release) whilst checking the PDF version of the manual: https://cran.r-project.org/web/checks/check_results_joineRML.html <https://cran.r-project.org/web/checks/check_results_joineRML.html>. I built the package on Mac OSX using R v3.4.0 with no errors, warnings, or notes during package checks / builds using devtools. All help documentation was built with roxygen2, and I?ve not used any advanced LaTeX commands (just things like \eqn{}, etc.). 

I cannot reproduce this FAIL locally, which seems isolated to OSX (release) flavour only on CRAN. The package passes on win-builder, appveyor, and Travis CI. Also, I have successfully built the PDF manual on my Mac OSX (version 10.12.4, Sierra) locally using

path <- find.package("joineRML")
system(paste(shQuote(file.path(R.home("bin"), "R")), "CMD", "Rd2pdf", shQuote(path)))

and the output looks as I would expect.

I?ve also filed an issue with the roxygen GitHub authors (https://github.com/klutometis/roxygen/issues/626) in case this is something to with the roxygen generated Rd files. I apologise if this is cross-posting.

As I cannot reproduce this FAIL, I?m very baffled. Also, I?m not really sure what the difference is between a FAIL and a WANING/ERROR. Hoping someone here can advise me on what the source of the issue could be.

Thanks,

Graeme



	[[alternative HTML version deleted]]


From patrick.schratz at gmail.com  Fri Apr 28 17:19:51 2017
From: patrick.schratz at gmail.com (Patrick Schratz)
Date: Fri, 28 Apr 2017 17:19:51 +0200
Subject: [R-pkg-devel] Library not loaded
 =?utf-8?Q?=E2=80=98libgdal.dylib=E2=80=99_?=when building package on travis
 (osx)
Message-ID: <5bdd82e3-692c-4a8a-8ebd-8fe4482db5a6@Spark>

Hi everyone,

the following error gives me headaches. When building my package on Travis CI (OS X build), I get the following error:

Building with: R CMD build
4.64s$ R CMD build ?.
* checking for file ?./DESCRIPTION? ... OK
* preparing ?RQGIS?:
* checking DESCRIPTION meta-information ... OK
* installing the package to build vignettes
? ? ? -----------------------------------
* installing *source* package ?RQGIS? ...
** R
** data
*** moving datasets to lazyload DB
** inst
** byte-compile and prepare package for lazy loading
Error in dyn.load(file, DLLpath = DLLpath, ...) :
? unable to load shared object '/Users/travis/R/Library/rgdal/libs/rgdal.so':
? dlopen(/Users/travis/R/Library/rgdal/libs/rgdal.so, 6): Library not loaded: /Builds/unix/recipes/build/gdal-2.1.3-obj/libgdal.dylib
? Referenced from: /Users/travis/R/Library/rgdal/libs/rgdal.so
? Reason: image not found

? rgdal 1.2-7 is installed successfully
? GDAL 1.11.5 and GDAL 2.1.3 installed via?homebrew
? Package builds correctly locally (osx) and on my linux travis build

Build log:?https://travis-ci.org/jannes-m/RQGIS/jobs/226822143


PhD Student at Department of Geography - GIScience group
Friedrich-Schiller-University Jena, Germany
Tel.: +49-3641-9-48973
Web: https://pat-s.github.io

	[[alternative HTML version deleted]]


From larisa at uo.edu.cu  Fri Apr 28 17:15:21 2017
From: larisa at uo.edu.cu (LARISA ZAMORA MATAMOROS)
Date: Fri, 28 Apr 2017 11:15:21 -0400 (CDT)
Subject: [R-pkg-devel] Help
Message-ID: <2035378456.78768.1493392521287.JavaMail.zimbra@uo.edu.cu>



Dear sir. 

I intended to upload a R package to the CRAN, but I received an e-mail with an attached file ?00check.log?. The text of this file ends with two notes, I made modifications to resolve the last note: 

-------------- 


* checking Rd line widths ... NOTE 
Rd file 'ExpRep-package.Rd': 
\examples lines wider than 100 characters: 
S_Integral_Theorem(n=100, p=0.5, linf = 0, lsup = 50, Compare = TRUE, Table = TRUE, Graph = TRUE, GraphE = TRUE) 

Rd file 'S_Integral_Theorem.Rd': 
\usage lines wider than 90 characters: 
S_Integral_Theorem(n = 200, p = 0.5, linf = 0, lsup = 100, Compare = TRUE, Table = TRUE, Graph = TRUE, GraphE = TRUE) 
\examples lines wider than 100 characters: 
S_Integral_Theorem (n = 200, p = 0.5, linf = 0, lsup = 100, Compare = TRUE, Table = TRUE, Graph = TRUE, GraphE = TRUE) 

Rd file 'S_Local_Limit_Theorem.Rd': 
\usage lines wider than 90 characters: 
S_Local_Limit_Theorem(n = 170, p = 0.5, Compare = TRUE, Table = TRUE, Graph = TRUE, GraphE = TRUE) 

Rd file 'S_Poisson_Theorem.Rd': 
\usage lines wider than 90 characters: 
S_Poisson_Theorem(n = 2000, p = 0.002, Compare = TRUE, Table = TRUE, Graph = TRUE, GraphE = FALSE) 
These lines will be truncated in the PDF manual. 

------ 





But I don?t know how to resolve the first note. I am sending the first 9 lines of the 00check.log file, where this note appears: 




* using log directory 'd:/RCompile/CRANincoming/R-devel/ExpRep.Rcheck' 

* using R version 3.4.0 beta (2017-04-10 r72503) 

* using platform: x86_64-w64-mingw32 (64-bit) 

* using session charset: ISO8859-1 

* checking for file 'ExpRep/DESCRIPTION' ... OK 

* checking extension type ... Package 

* this is package 'ExpRep' version '1.0' 

* checking CRAN incoming feasibility ... NOTE 

Maintainer: 'Larisa Zamora-Matamoros <larisa at uo.edu.cu>' 




Therefore I am asking for help to resolve the note "* checking CRAN incoming feasibility..." 

I thank very much for the help. 




Sincerely yours. 

Larisa Zamora 

--

En su setenta cumplea?os la Universidad de Oriente festeja el saber.

Del 16 al 19 mayo, II Convenci?n Internacional de Ciencias Sociales y Ambientales.

(http://www.convenciones.uo.edu.cu/index.php/2CICSA)

Del 1 al 3 junio, IV Convenci?n Internacional de Educaci?n F?sica y Alto Rendimiento Deportivo.

(http://www.convenciones.uo.edu.cu/index.php/4CIEF)

Del 29 de nov al 1ro de diciembre de este a?o.

(http://www.convenciones.uo.edu.cu/index.php/22CQ/22CQ2017)

--


	[[alternative HTML version deleted]]


From maxime.turgeon at mail.mcgill.ca  Fri Apr 28 17:43:23 2017
From: maxime.turgeon at mail.mcgill.ca (MTurgeon)
Date: Fri, 28 Apr 2017 09:43:23 -0600
Subject: [R-pkg-devel] Help
In-Reply-To: <2035378456.78768.1493392521287.JavaMail.zimbra@uo.edu.cu>
References: <2035378456.78768.1493392521287.JavaMail.zimbra@uo.edu.cu>
Message-ID: <d148d991-240b-82a3-eb27-3e64c3751b5d@mail.mcgill.ca>

Hi Larisa,

This has been covered before; see 
https://mailman.stat.ethz.ch/pipermail/r-devel/2014-March/068497.html

Essentially, it is reminder to check that this information is correct. 
As such, you can ignore it if it is indeed correct.

Max

On 2017-04-28 09:15 AM, LARISA ZAMORA MATAMOROS wrote:
>
> Dear sir.
>
> I intended to upload a R package to the CRAN, but I received an e-mail with an attached file ?00check.log?. The text of this file ends with two notes, I made modifications to resolve the last note:
>
> --------------
>
>
> * checking Rd line widths ... NOTE
> Rd file 'ExpRep-package.Rd':
> \examples lines wider than 100 characters:
> S_Integral_Theorem(n=100, p=0.5, linf = 0, lsup = 50, Compare = TRUE, Table = TRUE, Graph = TRUE, GraphE = TRUE)
>
> Rd file 'S_Integral_Theorem.Rd':
> \usage lines wider than 90 characters:
> S_Integral_Theorem(n = 200, p = 0.5, linf = 0, lsup = 100, Compare = TRUE, Table = TRUE, Graph = TRUE, GraphE = TRUE)
> \examples lines wider than 100 characters:
> S_Integral_Theorem (n = 200, p = 0.5, linf = 0, lsup = 100, Compare = TRUE, Table = TRUE, Graph = TRUE, GraphE = TRUE)
>
> Rd file 'S_Local_Limit_Theorem.Rd':
> \usage lines wider than 90 characters:
> S_Local_Limit_Theorem(n = 170, p = 0.5, Compare = TRUE, Table = TRUE, Graph = TRUE, GraphE = TRUE)
>
> Rd file 'S_Poisson_Theorem.Rd':
> \usage lines wider than 90 characters:
> S_Poisson_Theorem(n = 2000, p = 0.002, Compare = TRUE, Table = TRUE, Graph = TRUE, GraphE = FALSE)
> These lines will be truncated in the PDF manual.
>
> ------
>
>
>
>
>
> But I don?t know how to resolve the first note. I am sending the first 9 lines of the 00check.log file, where this note appears:
>
>
>
>
> * using log directory 'd:/RCompile/CRANincoming/R-devel/ExpRep.Rcheck'
>
> * using R version 3.4.0 beta (2017-04-10 r72503)
>
> * using platform: x86_64-w64-mingw32 (64-bit)
>
> * using session charset: ISO8859-1
>
> * checking for file 'ExpRep/DESCRIPTION' ... OK
>
> * checking extension type ... Package
>
> * this is package 'ExpRep' version '1.0'
>
> * checking CRAN incoming feasibility ... NOTE
>
> Maintainer: 'Larisa Zamora-Matamoros <larisa at uo.edu.cu>'
>
>
>
>
> Therefore I am asking for help to resolve the note "* checking CRAN incoming feasibility..."
>
> I thank very much for the help.
>
>
>
>
> Sincerely yours.
>
> Larisa Zamora
>
> --
>
> En su setenta cumplea?os la Universidad de Oriente festeja el saber.
>
> Del 16 al 19 mayo, II Convenci?n Internacional de Ciencias Sociales y Ambientales.
>
> (http://www.convenciones.uo.edu.cu/index.php/2CICSA)
>
> Del 1 al 3 junio, IV Convenci?n Internacional de Educaci?n F?sica y Alto Rendimiento Deportivo.
>
> (http://www.convenciones.uo.edu.cu/index.php/4CIEF)
>
> Del 29 de nov al 1ro de diciembre de este a?o.
>
> (http://www.convenciones.uo.edu.cu/index.php/22CQ/22CQ2017)
>
> --
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
-----------------------------------------------------------------

Maxime Turgeon, PhD candidate

Department of Epidemiology, Biostatistics and Occupational Health
McGill University


From mattjdowle at gmail.com  Fri Apr 28 23:00:40 2017
From: mattjdowle at gmail.com (Matt Dowle)
Date: Fri, 28 Apr 2017 14:00:40 -0700
Subject: [R-pkg-devel] How to -I in Makevars.win for ddk/ntddk.h
Message-ID: <CAOuOy3c=LBMLB_0kPntz_hb=RbhWuve_f2TZPVO+2vjvey1zAA@mail.gmail.com>

Hi,

#include <ddk/ntddk.h>

This finds ddk/ntddk.h ok but then fails with :

C:/Rtools/mingw_64/x86_64-w64-mingw32/include/ddk/ntddk.h:38:17: fatal
error: wdm.h: No such file or directory

It can't find wdm.h because that's alongside ntddk.h in the ddk directory.
It's only looking in include not include/ddk,  I think.

I've been searching and reading the documentation and I believe I can
create a file Makevars.win with a line PKG_CPPFLAGS = -I<something>/ddk

Is that correct?  What should <something> be?  i.e. the location of
windows.h which it finds fine.

I'm using latest Rtools.exe 3.4 via AppVeyor.

Thanks, Matt

	[[alternative HTML version deleted]]


From drjimlemon at gmail.com  Sat Apr 29 11:45:00 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Sat, 29 Apr 2017 19:45:00 +1000
Subject: [R-pkg-devel] Help
In-Reply-To: <d148d991-240b-82a3-eb27-3e64c3751b5d@mail.mcgill.ca>
References: <2035378456.78768.1493392521287.JavaMail.zimbra@uo.edu.cu>
 <d148d991-240b-82a3-eb27-3e64c3751b5d@mail.mcgill.ca>
Message-ID: <CA+8X3fXeq2p83nMHVsef76bCsBRTJBMaixsgiV6z07TjdPX90A@mail.gmail.com>

Hi Larisa,
I guess that you are using an editor with "soft" line breaks to edit
your .Rd files. This will look like the lines in question are broken,
but when the file is saved, the lines will be joined together unless
you have ended each section with a return character. If you turn off
"word wrap" or whatever it is called in your editor you will see this.

JIm


On Sat, Apr 29, 2017 at 1:43 AM, MTurgeon <maxime.turgeon at mail.mcgill.ca> wrote:
> Hi Larisa,
>
> This has been covered before; see
> https://mailman.stat.ethz.ch/pipermail/r-devel/2014-March/068497.html
>
> Essentially, it is reminder to check that this information is correct. As
> such, you can ignore it if it is indeed correct.
>
> Max
>
>
> On 2017-04-28 09:15 AM, LARISA ZAMORA MATAMOROS wrote:
>>
>>
>> Dear sir.
>>
>> I intended to upload a R package to the CRAN, but I received an e-mail
>> with an attached file ?00check.log?. The text of this file ends with two
>> notes, I made modifications to resolve the last note:
>>
>> --------------
>>
>>
>> * checking Rd line widths ... NOTE
>> Rd file 'ExpRep-package.Rd':
>> \examples lines wider than 100 characters:
>> S_Integral_Theorem(n=100, p=0.5, linf = 0, lsup = 50, Compare = TRUE,
>> Table = TRUE, Graph = TRUE, GraphE = TRUE)
>>
>> Rd file 'S_Integral_Theorem.Rd':
>> \usage lines wider than 90 characters:
>> S_Integral_Theorem(n = 200, p = 0.5, linf = 0, lsup = 100, Compare = TRUE,
>> Table = TRUE, Graph = TRUE, GraphE = TRUE)
>> \examples lines wider than 100 characters:
>> S_Integral_Theorem (n = 200, p = 0.5, linf = 0, lsup = 100, Compare =
>> TRUE, Table = TRUE, Graph = TRUE, GraphE = TRUE)
>>
>> Rd file 'S_Local_Limit_Theorem.Rd':
>> \usage lines wider than 90 characters:
>> S_Local_Limit_Theorem(n = 170, p = 0.5, Compare = TRUE, Table = TRUE,
>> Graph = TRUE, GraphE = TRUE)
>>
>> Rd file 'S_Poisson_Theorem.Rd':
>> \usage lines wider than 90 characters:
>> S_Poisson_Theorem(n = 2000, p = 0.002, Compare = TRUE, Table = TRUE, Graph
>> = TRUE, GraphE = FALSE)
>> These lines will be truncated in the PDF manual.
>>
>> ------
>>
>>
>>
>>
>>
>> But I don?t know how to resolve the first note. I am sending the first 9
>> lines of the 00check.log file, where this note appears:
>>
>>
>>
>>
>> * using log directory 'd:/RCompile/CRANincoming/R-devel/ExpRep.Rcheck'
>>
>> * using R version 3.4.0 beta (2017-04-10 r72503)
>>
>> * using platform: x86_64-w64-mingw32 (64-bit)
>>
>> * using session charset: ISO8859-1
>>
>> * checking for file 'ExpRep/DESCRIPTION' ... OK
>>
>> * checking extension type ... Package
>>
>> * this is package 'ExpRep' version '1.0'
>>
>> * checking CRAN incoming feasibility ... NOTE
>>
>> Maintainer: 'Larisa Zamora-Matamoros <larisa at uo.edu.cu>'
>>
>>
>>
>>
>> Therefore I am asking for help to resolve the note "* checking CRAN
>> incoming feasibility..."
>>
>> I thank very much for the help.
>>
>>
>>
>>
>> Sincerely yours.
>>
>> Larisa Zamora
>>
>> --
>>
>> En su setenta cumplea?os la Universidad de Oriente festeja el saber.
>>
>> Del 16 al 19 mayo, II Convenci?n Internacional de Ciencias Sociales y
>> Ambientales.
>>
>> (http://www.convenciones.uo.edu.cu/index.php/2CICSA)
>>
>> Del 1 al 3 junio, IV Convenci?n Internacional de Educaci?n F?sica y Alto
>> Rendimiento Deportivo.
>>
>> (http://www.convenciones.uo.edu.cu/index.php/4CIEF)
>>
>> Del 29 de nov al 1ro de diciembre de este a?o.
>>
>> (http://www.convenciones.uo.edu.cu/index.php/22CQ/22CQ2017)
>>
>> --
>>
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
> --
> -----------------------------------------------------------------
>
> Maxime Turgeon, PhD candidate
>
> Department of Epidemiology, Biostatistics and Occupational Health
> McGill University
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From patrick.schratz at gmail.com  Sat Apr 29 13:29:39 2017
From: patrick.schratz at gmail.com (Patrick Schratz)
Date: Sat, 29 Apr 2017 13:29:39 +0200
Subject: [R-pkg-devel] Library not loaded
 =?utf-8?Q?=E2=80=98libgdal.dylib=E2=80=99_?=when building package on travis
 (osx)
In-Reply-To: <CAERMt4f7rV+MvY58RPvxM8rQiJppGmk=x2PoZWMMjU9HySNLcg@mail.gmail.com>
References: <5bdd82e3-692c-4a8a-8ebd-8fe4482db5a6@Spark>
 <CAERMt4f7rV+MvY58RPvxM8rQiJppGmk=x2PoZWMMjU9HySNLcg@mail.gmail.com>
Message-ID: <ea15139f-8ff8-4825-aacd-7e5bd2edf52f@Spark>

Nope, still an open issue. I also do not have any ideas left what I could try next.

Tried the export hints (e.g. bash profile) given in 'brew info gdal2' and checked with my local configuration but I do not see what the possible issue could be here.

On 29. Apr 2017, 13:24 +0200, Alexandre Courtiol <alexandre.courtiol at gmail.com>, wrote:
> Did you already sort out your issue?
>
> On 28 April 2017 at 17:19, Patrick Schratz <patrick.schratz at gmail.com (mailto:patrick.schratz at gmail.com)> wrote:
> > Hi everyone,
> >
> > the following error gives me headaches. When building my package on Travis CI (OS X build), I get the following error:
> >
> > Building with: R CMD build
> > 4.64s$ R CMD build .
> > * checking for file ?./DESCRIPTION? ... OK
> > * preparing ?RQGIS?:
> > * checking DESCRIPTION meta-information ... OK
> > * installing the package to build vignettes
> > -----------------------------------
> > * installing *source* package ?RQGIS? ...
> > ** R
> > ** data
> > *** moving datasets to lazyload DB
> > ** inst
> > ** byte-compile and prepare package for lazy loading
> > Error in dyn.load(file, DLLpath = DLLpath, ...) :
> > unable to load shared object '/Users/travis/R/Library/rgdal/libs/rgdal.so':
> > dlopen(/Users/travis/R/Library/rgdal/libs/rgdal.so, 6): Library not loaded: /Builds/unix/recipes/build/gdal-2.1.3-obj/libgdal.dylib
> > Referenced from: /Users/travis/R/Library/rgdal/libs/rgdal.so
> > Reason: image not found
> >
> > ? rgdal 1.2-7 is installed successfully
> > ? GDAL 1.11.5 and GDAL 2.1.3 installed via homebrew
> > ? Package builds correctly locally (osx) and on my linux travis build
> >
> > Build log: https://travis-ci.org/jannes-m/RQGIS/jobs/226822143
> >
> >
> > PhD Student at Department of Geography - GIScience group
> > Friedrich-Schiller-University Jena, Germany
> > Tel.: +49-3641-9-48973 (tel:%2B49-3641-9-48973)
> > Web: https://pat-s.github.io
> >
> > [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org (mailto:R-package-devel at r-project.org) mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
> --
> Alexandre Courtiol
>
> http://sites.google.com/site/alexandrecourtiol/home
>
> "Science is the belief in the ignorance of experts", R. Feynman

	[[alternative HTML version deleted]]


From jon at thon.cc  Sat Apr 29 15:22:30 2017
From: jon at thon.cc (Jonathon Love)
Date: Sat, 29 Apr 2017 23:22:30 +1000
Subject: [R-pkg-devel]
 =?utf-8?q?Library_not_loaded_=E2=80=98libgdal=2Edyl?=
 =?utf-8?q?ib=E2=80=99_when_building_package_on_travis_=28osx=29?=
In-Reply-To: <ea15139f-8ff8-4825-aacd-7e5bd2edf52f@Spark>
References: <5bdd82e3-692c-4a8a-8ebd-8fe4482db5a6@Spark>
 <CAERMt4f7rV+MvY58RPvxM8rQiJppGmk=x2PoZWMMjU9HySNLcg@mail.gmail.com>
 <ea15139f-8ff8-4825-aacd-7e5bd2edf52f@Spark>
Message-ID: <df92ff37-97a6-530c-2db0-05825fa5001d@thon.love>

hi,

On 29/4/17 21:29, Patrick Schratz wrote:
> Nope, still an open issue. I also do not have any ideas left what I could try next.
>
> Tried the export hints (e.g. bash profile) given in 'brew info gdal2' and checked with my local configuration but I do not see what the possible issue could be here.
>
> On 29. Apr 2017, 13:24 +0200, Alexandre Courtiol <alexandre.courtiol at gmail.com>, wrote:
>> Did you already sort out your issue?
>>
>> On 28 April 2017 at 17:19, Patrick Schratz <patrick.schratz at gmail.com (mailto:patrick.schratz at gmail.com)> wrote:
>>> Hi everyone,
>>>
>>> the following error gives me headaches. When building my package on Travis CI (OS X build), I get the following error:
>>>
>>> Building with: R CMD build
>>> 4.64s$ R CMD build .
>>> * checking for file ?./DESCRIPTION? ... OK
>>> * preparing ?RQGIS?:
>>> * checking DESCRIPTION meta-information ... OK
>>> * installing the package to build vignettes
>>> -----------------------------------
>>> * installing *source* package ?RQGIS? ...
>>> ** R
>>> ** data
>>> *** moving datasets to lazyload DB
>>> ** inst
>>> ** byte-compile and prepare package for lazy loading
>>> Error in dyn.load(file, DLLpath = DLLpath, ...) :
>>> unable to load shared object '/Users/travis/R/Library/rgdal/libs/rgdal.so':
>>> dlopen(/Users/travis/R/Library/rgdal/libs/rgdal.so, 6): Library not loaded: /Builds/unix/recipes/build/gdal-2.1.3-obj/libgdal.dylib
>>> Referenced from: /Users/travis/R/Library/rgdal/libs/rgdal.so
>>> Reason: image not found

it looks to me that rgdal.so is looking for libgdal.dylib in 
/Builds/unix/recipes/build/build/gdal02.1.3-obj

you can confirm this with the command:

otool -L /Users/travis/R/Library/rgdal/libs/rgdal.so

it will list where it's expecting to find libgdal.dylib

my guess is that the root of the issue is that the libgdal.dylib that 
rgdal.so linked against, thinks that it lives at 
/Builds/unix/recipes/build/build/gdal02.1.3-obj

you can confirm this with:

otool -L /Builds/unix/recipes/build/gdal-2.1.3-obj/libgdal.dylib

you can change where .so's and .dylibs think they live, and where they 
think their dependencies live with the install_name_tool tool.

i can walk you through this off-list if you need.

cheers

jonathon


From patrick.schratz at gmail.com  Sat Apr 29 15:25:06 2017
From: patrick.schratz at gmail.com (Patrick Schratz)
Date: Sat, 29 Apr 2017 15:25:06 +0200
Subject: [R-pkg-devel] Library not loaded
 =?utf-8?Q?=E2=80=98libgdal.dylib=E2=80=99_?=when building package on travis
 (osx)
In-Reply-To: <df92ff37-97a6-530c-2db0-05825fa5001d@thon.love>
References: <5bdd82e3-692c-4a8a-8ebd-8fe4482db5a6@Spark>
 <CAERMt4f7rV+MvY58RPvxM8rQiJppGmk=x2PoZWMMjU9HySNLcg@mail.gmail.com>
 <ea15139f-8ff8-4825-aacd-7e5bd2edf52f@Spark>
 <df92ff37-97a6-530c-2db0-05825fa5001d@thon.love>
Message-ID: <ebb3cb60-e9b3-4280-a0cf-05b3c1cc93db@Spark>

Hi guys,

@ Alexandre
Thanks for suggesting to compile from source. I normally try to use this as the last option because this will usually take a while for gdal. However, it may install to other locations as the brew installation does so I just tried it and faced some permission problems during copying:

/Users/travis/build/jannes-m/RQGIS/gdal-2.1.3/install-sh -c /Users/travis/build/jannes-m/RQGIS/gdal-2.1.3/libgdal.dylib /usr/lib/libgdal.dylib.2.1.3
cp: /usr/lib/#inst.15842#: Operation not permitted
make: *** [install-lib] Error 1

Log:?https://travis-ci.org/jannes-m/RQGIS/jobs/227128054

I am somewhat hesitate to ?go back? and solve this gdal2 installation/make issue when I already have a working gdal2 installation via homebrew which ?just? seems to miss some correct linking to libgdal.dylib.
On Linux I use the ubuntugis PPA to install gdal 2.1.0 which is way faster than compiling from source (I did that in the past). So maybe this would be even an option for you to speed up your travis builds?
Thanks for your reply, much appreciated!

@ Jonathan
A walk through of your suggested option would be awesome! We could do so in our Slack group if this is better suited than mailing for this case? Just write me whatever you prefer.

Cheers, Patrick


PhD Student at Department of Geography - GIScience group
Friedrich-Schiller-University Jena, Germany
Tel.: +49-3641-9-48973
Web: https://pat-s.github.io

On 29. Apr 2017, 15:22 +0200, Jonathon Love <jon at thon.cc>, wrote:
> hi,
>
> On 29/4/17 21:29, Patrick Schratz wrote:
> > Nope, still an open issue. I also do not have any ideas left what I could try next.
> >
> > Tried the export hints (e.g. bash profile) given in 'brew info gdal2' and checked with my local configuration but I do not see what the possible issue could be here.
> >
> > On 29. Apr 2017, 13:24 +0200, Alexandre Courtiol <alexandre.courtiol at gmail.com>, wrote:
> > > Did you already sort out your issue?
> > >
> > > On 28 April 2017 at 17:19, Patrick Schratz <patrick.schratz at gmail.com (mailto:patrick.schratz at gmail.com)> wrote:
> > > > Hi everyone,
> > > >
> > > > the following error gives me headaches. When building my package on Travis CI (OS X build), I get the following error:
> > > >
> > > > Building with: R CMD build
> > > > 4.64s$ R CMD build .
> > > > * checking for file ?./DESCRIPTION? ... OK
> > > > * preparing ?RQGIS?:
> > > > * checking DESCRIPTION meta-information ... OK
> > > > * installing the package to build vignettes
> > > > -----------------------------------
> > > > * installing *source* package ?RQGIS? ...
> > > > ** R
> > > > ** data
> > > > *** moving datasets to lazyload DB
> > > > ** inst
> > > > ** byte-compile and prepare package for lazy loading
> > > > Error in dyn.load(file, DLLpath = DLLpath, ...) :
> > > > unable to load shared object '/Users/travis/R/Library/rgdal/libs/rgdal.so':
> > > > dlopen(/Users/travis/R/Library/rgdal/libs/rgdal.so, 6): Library not loaded: /Builds/unix/recipes/build/gdal-2.1.3-obj/libgdal.dylib
> > > > Referenced from: /Users/travis/R/Library/rgdal/libs/rgdal.so
> > > > Reason: image not found
>
> it looks to me that rgdal.so is looking for libgdal.dylib in
> /Builds/unix/recipes/build/build/gdal02.1.3-obj
>
> you can confirm this with the command:
>
> otool -L /Users/travis/R/Library/rgdal/libs/rgdal.so
>
> it will list where it's expecting to find libgdal.dylib
>
> my guess is that the root of the issue is that the libgdal.dylib that
> rgdal.so linked against, thinks that it lives at
> /Builds/unix/recipes/build/build/gdal02.1.3-obj
>
> you can confirm this with:
>
> otool -L /Builds/unix/recipes/build/gdal-2.1.3-obj/libgdal.dylib
>
> you can change where .so's and .dylibs think they live, and where they
> think their dependencies live with the install_name_tool tool.
>
> i can walk you through this off-list if you need.
>
> cheers
>
> jonathon
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From patrick.schratz at gmail.com  Sun Apr 30 18:46:54 2017
From: patrick.schratz at gmail.com (Patrick Schratz)
Date: Sun, 30 Apr 2017 18:46:54 +0200
Subject: [R-pkg-devel] Library not loaded
 =?utf-8?Q?=E2=80=98libgdal.dylib=E2=80=99_?=when building package on travis
 (osx)
In-Reply-To: <ebb3cb60-e9b3-4280-a0cf-05b3c1cc93db@Spark>
References: <5bdd82e3-692c-4a8a-8ebd-8fe4482db5a6@Spark>
 <CAERMt4f7rV+MvY58RPvxM8rQiJppGmk=x2PoZWMMjU9HySNLcg@mail.gmail.com>
 <ea15139f-8ff8-4825-aacd-7e5bd2edf52f@Spark>
 <df92ff37-97a6-530c-2db0-05825fa5001d@thon.love>
 <ebb3cb60-e9b3-4280-a0cf-05b3c1cc93db@Spark>
Message-ID: <6f0ba5fd-dac7-4873-9c89-db00dbce6582@Spark>

Hi guys,

the problem was that `rgdal` was installed using its binary - which causes problems due to a wrong link to `libgdal.dylib`. When testing on OSX on travis and using `sudo: required`, all dependencies are installed using binaries (see?https://docs.travis-ci.com/user/languages/r/).

My workaround was to reinstall `rgdal` after installation of all dependencies using `R -e "install.packages('rgdal', type = 'source?)?`.

I also opened an issue on travis-ci on how to deal with that specific rgdal issue in the future:?https://github.com/travis-ci/travis-ci/issues/7675

Thanks again to Jonathan Love for tracking down the issue. Very much appreciated!

Cheers, Patrick

PhD Student at Department of Geography - GIScience group
Friedrich-Schiller-University Jena, Germany
Tel.: +49-3641-9-48973
Web: https://pat-s.github.io

On 29. Apr 2017, 15:34 +0200, Patrick Schratz <patrick.schratz at gmail.com>, wrote:
> Hi guys,
>
> @ Alexandre
> Thanks for suggesting to compile from source. I normally try to use this as the last option because this will usually take a while for gdal. However, it may install to other locations as the brew installation does so I just tried it and faced some permission problems during copying:
>
> /Users/travis/build/jannes-m/RQGIS/gdal-2.1.3/install-sh -c /Users/travis/build/jannes-m/RQGIS/gdal-2.1.3/libgdal.dylib /usr/lib/libgdal.dylib.2.1.3
> cp: /usr/lib/#inst.15842#: Operation not permitted
> make: *** [install-lib] Error 1
>
> Log:?https://travis-ci.org/jannes-m/RQGIS/jobs/227128054
>
> I am somewhat hesitate to ?go back? and solve this gdal2 installation/make issue when I already have a working gdal2 installation via homebrew which ?just? seems to miss some correct linking to libgdal.dylib.
> On Linux I use the ubuntugis PPA to install gdal 2.1.0 which is way faster than compiling from source (I did that in the past). So maybe this would be even an option for you to speed up your travis builds?
> Thanks for your reply, much appreciated!
>
> @ Jonathan
> A walk through of your suggested option would be awesome! We could do so in our Slack group if this is better suited than mailing for this case? Just write me whatever you prefer.
>
> Cheers, Patrick
>
>
> PhD Student at Department of Geography - GIScience group
> Friedrich-Schiller-University Jena, Germany
> Tel.: +49-3641-9-48973
> Web: https://pat-s.github.io
>
> On 29. Apr 2017, 15:22 +0200, Jonathon Love <jon at thon.cc>, wrote:
> > hi,
> >
> > On 29/4/17 21:29, Patrick Schratz wrote:
> > > Nope, still an open issue. I also do not have any ideas left what I could try next.
> > >
> > > Tried the export hints (e.g. bash profile) given in 'brew info gdal2' and checked with my local configuration but I do not see what the possible issue could be here.
> > >
> > > On 29. Apr 2017, 13:24 +0200, Alexandre Courtiol <alexandre.courtiol at gmail.com>, wrote:
> > > > Did you already sort out your issue?
> > > >
> > > > On 28 April 2017 at 17:19, Patrick Schratz <patrick.schratz at gmail.com (mailto:patrick.schratz at gmail.com)> wrote:
> > > > > Hi everyone,
> > > > >
> > > > > the following error gives me headaches. When building my package on Travis CI (OS X build), I get the following error:
> > > > >
> > > > > Building with: R CMD build
> > > > > 4.64s$ R CMD build .
> > > > > * checking for file ?./DESCRIPTION? ... OK
> > > > > * preparing ?RQGIS?:
> > > > > * checking DESCRIPTION meta-information ... OK
> > > > > * installing the package to build vignettes
> > > > > -----------------------------------
> > > > > * installing *source* package ?RQGIS? ...
> > > > > ** R
> > > > > ** data
> > > > > *** moving datasets to lazyload DB
> > > > > ** inst
> > > > > ** byte-compile and prepare package for lazy loading
> > > > > Error in dyn.load(file, DLLpath = DLLpath, ...) :
> > > > > unable to load shared object '/Users/travis/R/Library/rgdal/libs/rgdal.so':
> > > > > dlopen(/Users/travis/R/Library/rgdal/libs/rgdal.so, 6): Library not loaded: /Builds/unix/recipes/build/gdal-2.1.3-obj/libgdal.dylib
> > > > > Referenced from: /Users/travis/R/Library/rgdal/libs/rgdal.so
> > > > > Reason: image not found
> >
> > it looks to me that rgdal.so is looking for libgdal.dylib in
> > /Builds/unix/recipes/build/build/gdal02.1.3-obj
> >
> > you can confirm this with the command:
> >
> > otool -L /Users/travis/R/Library/rgdal/libs/rgdal.so
> >
> > it will list where it's expecting to find libgdal.dylib
> >
> > my guess is that the root of the issue is that the libgdal.dylib that
> > rgdal.so linked against, thinks that it lives at
> > /Builds/unix/recipes/build/build/gdal02.1.3-obj
> >
> > you can confirm this with:
> >
> > otool -L /Builds/unix/recipes/build/gdal-2.1.3-obj/libgdal.dylib
> >
> > you can change where .so's and .dylibs think they live, and where they
> > think their dependencies live with the install_name_tool tool.
> >
> > i can walk you through this off-list if you need.
> >
> > cheers
> >
> > jonathon
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From jon at thon.cc  Tue May  2 04:28:06 2017
From: jon at thon.cc (Jonathon Love)
Date: Tue, 2 May 2017 12:28:06 +1000
Subject: [R-pkg-devel] R package test breakage catch 22
Message-ID: <c61b30bc-8a9b-f9fb-17b5-1285be74c167@thon.love>

hi,

i currently face the following situation:

my package, package A, depends on package B. i have unit tests in 
package A which expect results, which are in part as a result of 
calculations from package B.

package B has made some changes, which leads to slightly different 
results being calculated, and now package A tests fail.

now it turns out that the CRAN submission process has picked up that the 
new B, causes tests to fail on A, and so B can't be accepted by CRAN.

now i can update my tests so they expect the *new* values, but obviously 
these will fail and won't be accepted by CRAN, because the new B isn't 
on CRAN yet.

i can't update A because of old B, and B can't be updated because of old A.

how does one solve this catch-22?

with thanks

jonathon


From jranke at uni-bremen.de  Tue May  2 06:13:31 2017
From: jranke at uni-bremen.de (Johannes Ranke)
Date: Tue, 02 May 2017 06:13:31 +0200
Subject: [R-pkg-devel] R package test breakage catch 22
In-Reply-To: <c61b30bc-8a9b-f9fb-17b5-1285be74c167@thon.love>
References: <c61b30bc-8a9b-f9fb-17b5-1285be74c167@thon.love>
Message-ID: <3220262.IFvLDJrYBo@tux>


> how does one solve this catch-22?

I see these possibilities

a) reduce the precision of the tests in A, so the test passes with both 
versions of B

b) a submission of both packages at the same time, with a message in the 
comments, explaining to CRAN why it is necessary that both are published at 
the same time (and maybe in more detail why the expected test results 
changed...)

c) merge the packages into one

Cheers,

Johannes


From ligges at statistik.tu-dortmund.de  Tue May  2 17:27:14 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 2 May 2017 17:27:14 +0200
Subject: [R-pkg-devel] R package test breakage catch 22
In-Reply-To: <3220262.IFvLDJrYBo@tux>
References: <c61b30bc-8a9b-f9fb-17b5-1285be74c167@thon.love>
 <3220262.IFvLDJrYBo@tux>
Message-ID: <9b2820cd-7206-d267-f12a-2a5d5373f8ea@statistik.tu-dortmund.de>

Submit B first and write in the submission comments that A will fail but 
a version of A is ready to be submitted once B is accepted.

Best,
Uwe Ligges



On 02.05.2017 06:13, Johannes Ranke wrote:
>
>> how does one solve this catch-22?
>
> I see these possibilities
>
> a) reduce the precision of the tests in A, so the test passes with both
> versions of B
>
> b) a submission of both packages at the same time, with a message in the
> comments, explaining to CRAN why it is necessary that both are published at
> the same time (and maybe in more detail why the expected test results
> changed...)
>
> c) merge the packages into one
>
> Cheers,
>
> Johannes
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From pbailey at air.org  Tue May  2 20:06:27 2017
From: pbailey at air.org (Bailey, Paul)
Date: Tue, 2 May 2017 18:06:27 +0000
Subject: [R-pkg-devel] vignette order
Message-ID: <909838b465294ddcbb3f660c6ee55117@air.org>

Hi,

I'm the maintainer of EdSurvey and was wondering if I can control the order the vignettes appear on CRAN. 

I was hoping it was alphabetical like browseVignettes is and it appears not to be.

https://CRAN.R-project.org/package=EdSurvey

Best,
Paul


From lists at revelle.net  Tue May  2 17:37:34 2017
From: lists at revelle.net (William Revelle)
Date: Tue, 2 May 2017 10:37:34 -0500
Subject: [R-pkg-devel] R package test breakage catch 22
In-Reply-To: <9b2820cd-7206-d267-f12a-2a5d5373f8ea@statistik.tu-dortmund.de>
References: <c61b30bc-8a9b-f9fb-17b5-1285be74c167@thon.love>
 <3220262.IFvLDJrYBo@tux>
 <9b2820cd-7206-d267-f12a-2a5d5373f8ea@statistik.tu-dortmund.de>
Message-ID: <F93654DC-3A1F-4142-9424-717DD2AFCC5F@revelle.net>

Uwe,

As the author of ?B?   (the psych package) I will submit it once Jonathon confirms he is ready to submit ?A?  (the jmv package).

Thanks for the help.

Bill

> On May 2, 2017, at 10:27 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> Submit B first and write in the submission comments that A will fail but a version of A is ready to be submitted once B is accepted.
> 
> Best,
> Uwe Ligges
> 
> 
> 
> On 02.05.2017 06:13, Johannes Ranke wrote:
>> 
>>> how does one solve this catch-22?
>> 
>> I see these possibilities
>> 
>> a) reduce the precision of the tests in A, so the test passes with both
>> versions of B
>> 
>> b) a submission of both packages at the same time, with a message in the
>> comments, explaining to CRAN why it is necessary that both are published at
>> the same time (and maybe in more detail why the expected test results
>> changed...)
>> 
>> c) merge the packages into one
>> 
>> Cheers,
>> 
>> Johannes
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

William Revelle		   personality-project.org/revelle.html
Professor			          personality-project.org
Department of Psychology www.wcas.northwestern.edu/psych/
Northwestern University	   www.northwestern.edu/
Use R for psychology         personality-project.org/r
It is 2 1/2  minutes to midnight   www.thebulletin.org


From ligges at statistik.tu-dortmund.de  Tue May  2 21:50:54 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 2 May 2017 21:50:54 +0200
Subject: [R-pkg-devel] vignette order
In-Reply-To: <909838b465294ddcbb3f660c6ee55117@air.org>
References: <909838b465294ddcbb3f660c6ee55117@air.org>
Message-ID: <8fadc655-1ad3-a749-da8f-76cbbb87945d@statistik.tu-dortmund.de>



On 02.05.2017 20:06, Bailey, Paul wrote:
> Hi,
>
> I'm the maintainer of EdSurvey and was wondering if I can control the order the vignettes appear on CRAN.
>
> I was hoping it was alphabetical like browseVignettes is and it appears not to be.
>
> https://CRAN.R-project.org/package=EdSurvey
>

Alphabetical by filename.

Best,
Uwe Ligges


> Best,
> Paul
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From pbailey at air.org  Tue May  2 21:54:48 2017
From: pbailey at air.org (Bailey, Paul)
Date: Tue, 2 May 2017 19:54:48 +0000
Subject: [R-pkg-devel] vignette order
In-Reply-To: <8fadc655-1ad3-a749-da8f-76cbbb87945d@statistik.tu-dortmund.de>
References: <909838b465294ddcbb3f660c6ee55117@air.org>
 <8fadc655-1ad3-a749-da8f-76cbbb87945d@statistik.tu-dortmund.de>
Message-ID: <e21336911b8e454b9cea881ac7dc75a9@air.org>

Thanks for the response Uwe.

> Alphabetical by filename.

That's what I thought at first but that doesn't describe the observed behavior.

Could it be:

1. file type (.Rmd, then .Rnw)
2. alphabetically by file name

Best,
Paul

From ligges at statistik.tu-dortmund.de  Tue May  2 22:18:59 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 2 May 2017 22:18:59 +0200
Subject: [R-pkg-devel] vignette order
In-Reply-To: <e21336911b8e454b9cea881ac7dc75a9@air.org>
References: <909838b465294ddcbb3f660c6ee55117@air.org>
 <8fadc655-1ad3-a749-da8f-76cbbb87945d@statistik.tu-dortmund.de>
 <e21336911b8e454b9cea881ac7dc75a9@air.org>
Message-ID: <a4cf4237-643b-22a0-f9f3-38fc2edee1e9@statistik.tu-dortmund.de>



On 02.05.2017 21:54, Bailey, Paul wrote:
> Thanks for the response Uwe.
>
>> Alphabetical by filename.
>
> That's what I thought at first but that doesn't describe the observed behavior.
>
> Could it be:
>
> 1. file type (.Rmd, then .Rnw)
> 2. alphabetically by file name


Or 1. is case, I haven't read the sources.

Best,
Uwe Ligges


> Best,
> Paul
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From russell-lenth at uiowa.edu  Wed May  3 18:39:41 2017
From: russell-lenth at uiowa.edu (Lenth, Russell V)
Date: Wed, 3 May 2017 16:39:41 +0000
Subject: [R-pkg-devel] Any new developments on "apparent S3 method" issue?
Message-ID: <CO2PR04MB2200B71EA7F1D08A370D92ECF1160@CO2PR04MB2200.namprd04.prod.outlook.com>

Package developers list:

I recently added an 'as.mcmc.list' method for objects in one of my packages. Now, in doing an --as-cran check, I get this message:

* checking S3 generic/method consistency ... NOTE
Found the following apparent S3 methods exported but not registered:
  as.mcmc.list
See section 'Registering S3 methods' in the 'Writing R Extensions' manual.

Apparently, the checking routines conclude that I should register an 'as.mcmc' method for class "list" -- something that does not exist and is not needed. I did some searching, and found an exchange on this issue from January 2015, in which a "nonS3Method()" construct was proposed. That sure looks like what is needed, but it still doesn't exist. Is there a different way to handle this that has been developed?

Further information -- this is related to the *coda* package, and my NAMESPACE file contains this code:

if (requireNamespace("coda", quietly = TRUE)) {
    importFrom(coda, as.mcmc, as.mcmc.list)
    export(as.mcmc, as.mcmc.list)
    S3method(as.mcmc, ref.grid)
    S3method(as.mcmc.list, ref.grid)
}

This seems clear enough; and what's mysterious is that *coda* passes the CRAN checks without this same NOTE.

As a possible workaround, I am considering:
   -- providing and registering my own S3 method 'as.mcmc' for class "list" --- in spite of my disinterest in providing this 
  -- not importing coda::as.mcmc.list and instead exporting my own generic that handles objects of class "list" separately

Any suggestions?

Russ

Russell V. Lenth  -  Professor Emeritus
Department of Statistics and Actuarial Science   
The University of Iowa  -  Iowa City, IA 52242  USA   
Voice (319)335-0712 (Dept. office)  -  FAX (319)335-3017


From ligges at statistik.tu-dortmund.de  Thu May  4 10:05:48 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Thu, 4 May 2017 10:05:48 +0200
Subject: [R-pkg-devel] Any new developments on "apparent S3 method"
	issue?
In-Reply-To: <CO2PR04MB2200B71EA7F1D08A370D92ECF1160@CO2PR04MB2200.namprd04.prod.outlook.com>
References: <CO2PR04MB2200B71EA7F1D08A370D92ECF1160@CO2PR04MB2200.namprd04.prod.outlook.com>
Message-ID: <eaed57a5-4181-6239-685b-1bc199d3b6e9@statistik.tu-dortmund.de>



On 03.05.2017 18:39, Lenth, Russell V wrote:
> Package developers list:
>
> I recently added an 'as.mcmc.list' method for objects in one of my packages. Now, in doing an --as-cran check, I get this message:
>
> * checking S3 generic/method consistency ... NOTE
> Found the following apparent S3 methods exported but not registered:
>   as.mcmc.list
> See section 'Registering S3 methods' in the 'Writing R Extensions' manual.
>
> Apparently, the checking routines conclude that I should register an 'as.mcmc' method for class "list" -- something that does not exist and is not needed. I did some searching, and found an exchange on this issue from January 2015, in which a "nonS3Method()" construct was proposed. That sure looks like what is needed, but it still doesn't exist. Is there a different way to handle this that has been developed?
>
> Further information -- this is related to the *coda* package, and my NAMESPACE file contains this code:
>
> if (requireNamespace("coda", quietly = TRUE)) {
>     importFrom(coda, as.mcmc, as.mcmc.list)
>     export(as.mcmc, as.mcmc.list)
>     S3method(as.mcmc, ref.grid)
>     S3method(as.mcmc.list, ref.grid)
> }
>
> This seems clear enough; and what's mysterious is that *coda* passes the CRAN checks without this same NOTE.

Yes. coda had the name for a very long time and it was not reasonable to 
fix this naming in felicity later on, hence there is a check exclusion 
in R-devel/src/library/tools/R/utils.R for as.mcmc.list in package coda.

Best,
Uwe Ligges




>
> As a possible workaround, I am considering:
>    -- providing and registering my own S3 method 'as.mcmc' for class "list" --- in spite of my disinterest in providing this
>   -- not importing coda::as.mcmc.list and instead exporting my own generic that handles objects of class "list" separately
>
> Any suggestions?
>
> Russ
>
> Russell V. Lenth  -  Professor Emeritus
> Department of Statistics and Actuarial Science
> The University of Iowa  -  Iowa City, IA 52242  USA
> Voice (319)335-0712 (Dept. office)  -  FAX (319)335-3017
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From russell-lenth at uiowa.edu  Thu May  4 16:23:26 2017
From: russell-lenth at uiowa.edu (Lenth, Russell V)
Date: Thu, 4 May 2017 14:23:26 +0000
Subject: [R-pkg-devel] Any new developments on "apparent S3 method"
	issue?
In-Reply-To: <eaed57a5-4181-6239-685b-1bc199d3b6e9@statistik.tu-dortmund.de>
References: <CO2PR04MB2200B71EA7F1D08A370D92ECF1160@CO2PR04MB2200.namprd04.prod.outlook.com>
 <eaed57a5-4181-6239-685b-1bc199d3b6e9@statistik.tu-dortmund.de>
Message-ID: <CO2PR04MB2200C53C18B56FE1E2D91465F1EA0@CO2PR04MB2200.namprd04.prod.outlook.com>

OK thanks -- this gives me a new perspective. I see this result:

    > tools::nonS3methods("coda")
    [1] "as.mcmc.list"

which indicates more about the mechanisms in place for this kind of situation. So now it seems that if package 'pkg_B' simply imports and exports a function 'looks.like.S3.method'  from package 'pkg_A', and 'looks.like.S3.method' is already known via tools::nonS3methods("pkg_A") and thus has a check exclusion, then 'pkg_B' should have the same check exclusion. I recognize that such a check-exclusion-inheritance provision may not be very straightforward to implement.

Russ

-----Original Message-----
From: Uwe Ligges [mailto:ligges at statistik.tu-dortmund.de] 
Sent: Thursday, May 4, 2017 3:06 AM
To: Lenth, Russell V <russell-lenth at uiowa.edu>; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Any new developments on "apparent S3 method" issue?



On 03.05.2017 18:39, Lenth, Russell V wrote:
> Package developers list:
>
> I recently added an 'as.mcmc.list' method for objects in one of my packages. Now, in doing an --as-cran check, I get this message:
>
> * checking S3 generic/method consistency ... NOTE Found the following 
> apparent S3 methods exported but not registered:
>   as.mcmc.list
> See section 'Registering S3 methods' in the 'Writing R Extensions' manual.
>
> Apparently, the checking routines conclude that I should register an 'as.mcmc' method for class "list" -- something that does not exist and is not needed. I did some searching, and found an exchange on this issue from January 2015, in which a "nonS3Method()" construct was proposed. That sure looks like what is needed, but it still doesn't exist. Is there a different way to handle this that has been developed?
>
> Further information -- this is related to the *coda* package, and my NAMESPACE file contains this code:
>
> if (requireNamespace("coda", quietly = TRUE)) {
>     importFrom(coda, as.mcmc, as.mcmc.list)
>     export(as.mcmc, as.mcmc.list)
>     S3method(as.mcmc, ref.grid)
>     S3method(as.mcmc.list, ref.grid)
> }
>
> This seems clear enough; and what's mysterious is that *coda* passes the CRAN checks without this same NOTE.

Yes. coda had the name for a very long time and it was not reasonable to fix this naming in felicity later on, hence there is a check exclusion in R-devel/src/library/tools/R/utils.R for as.mcmc.list in package coda.

Best,
Uwe Ligges




>
> As a possible workaround, I am considering:
>    -- providing and registering my own S3 method 'as.mcmc' for class "list" --- in spite of my disinterest in providing this
>   -- not importing coda::as.mcmc.list and instead exporting my own 
> generic that handles objects of class "list" separately
>
> Any suggestions?
>
> Russ
>
> Russell V. Lenth  -  Professor Emeritus Department of Statistics and 
> Actuarial Science The University of Iowa  -  Iowa City, IA 52242  USA 
> Voice (319)335-0712 (Dept. office)  -  FAX (319)335-3017
>
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

From mark614 at icloud.com  Thu May  4 17:09:16 2017
From: mark614 at icloud.com (Mark)
Date: Thu, 04 May 2017 15:09:16 +0000 (GMT)
Subject: [R-pkg-devel] =?utf-8?q?Package_building_-_compiling_multiple_dll?=
 =?utf-8?q?_files_from_within_src_directory?=
Message-ID: <41f7c092-50f7-44ba-a67c-8473f35c866a@me.com>

Hi,

I am creating an R package with multiple c files within src directory. If possible, I would like to create separate dll files for each c file. Also I would like those dll files to have the same name as the input c files. i.e:
mod01.c -o mod01.dll
mod02.c -o mod02.dll
mod03.c -o mod03.dll
...

I could then load different dll files in the NAMESPACE:
useDynLib("mod01")
useDynLib("mod02")
useDynLib("mod03")
...

I don't know how can I set the MAKEVARS to do this correctly, and any suggestions would be much appreciated.

Mark

From ligges at statistik.tu-dortmund.de  Fri May  5 10:26:19 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Fri, 5 May 2017 10:26:19 +0200
Subject: [R-pkg-devel] Package building - compiling multiple dll files
 from within src directory
In-Reply-To: <41f7c092-50f7-44ba-a67c-8473f35c866a@me.com>
References: <41f7c092-50f7-44ba-a67c-8473f35c866a@me.com>
Message-ID: <ceee066b-c59a-1b4e-57bb-b07d4688ee77@statistik.tu-dortmund.de>

Why do you want to build separate dll files if you want to load all of 
them anyway? That way you add some overhead, at least.


 From Writing R Extensions:

"A few packages use the src directory for purposes other than making a 
shared object (e.g. to create executables). Such packages should have 
files src/Makefile and src/Makefile.win (unless intended for only 
Unix-alikes or only Windows)."

Best,
Uwe Ligges



On 04.05.2017 17:09, Mark wrote:
> Hi,
>
> I am creating an R package with multiple c files within src directory.
> If possible, I would like to create separate dll files for each c file.
> Also I would like those dll files to have the same name as the input c
> files. i.e:
> mod01.c -o mod01.dll
> mod02.c -o mod02.dll
> mod03.c -o mod03.dll
> ...
>
> I could then load different dll files in the NAMESPACE:
> useDynLib("mod01")
> useDynLib("mod02")
> useDynLib("mod03")
> ...
>
> I don't know how can I set the MAKEVARS to do this correctly, and any
> suggestions would be much appreciated.
>
> Mark
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From drjimlemon at gmail.com  Fri May  5 11:47:49 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Fri, 5 May 2017 19:47:49 +1000
Subject: [R-pkg-devel] Latex got me
Message-ID: <CA+8X3fUZcDyEG=5ehAZzyvidCX9O5B=_5=d0ts257oB7iQGacQ@mail.gmail.com>

Hi,
In adding a contributed function to the plotrix package, I keep
getting a latex error:

* checking PDF version of manual ... WARNING
LaTeX errors when creating PDF version.
This typically indicates Rd problems.
LaTeX errors found:
! File ended while scanning use of \HeaderA.
<inserted text>
               \par
<*> \input ./Rd2.tex

! Emergency stop.
<*> \input ./Rd2.tex

*** (job aborted, no legal \end found)

!  ==> Fatal error occurred, no output PDF file produced!
* checking PDF version of manual without hyperrefs or index ... ERROR
* DONE

I thought it might be an errant character in the Rd file, and after
quite a bit of staring at a hex editor, I just retyped the whole
thing. Everything runs okay except for this error. The file ends with
the same line as many other Rd files in plotrix:

\keyword{misc}

and the last character is a line feed (0x0A). If I remove the function
and man page, the error goes away. Thanks to any Sherlock out there.

Jim


From murdoch.duncan at gmail.com  Fri May  5 12:00:26 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 5 May 2017 06:00:26 -0400
Subject: [R-pkg-devel] Latex got me
In-Reply-To: <CA+8X3fUZcDyEG=5ehAZzyvidCX9O5B=_5=d0ts257oB7iQGacQ@mail.gmail.com>
References: <CA+8X3fUZcDyEG=5ehAZzyvidCX9O5B=_5=d0ts257oB7iQGacQ@mail.gmail.com>
Message-ID: <b4c44c07-b326-47b2-bfe1-17a1c52f3511@gmail.com>

On 05/05/2017 5:47 AM, Jim Lemon wrote:
> Hi,
> In adding a contributed function to the plotrix package, I keep
> getting a latex error:
>
> * checking PDF version of manual ... WARNING
> LaTeX errors when creating PDF version.
> This typically indicates Rd problems.
> LaTeX errors found:
> ! File ended while scanning use of \HeaderA.
> <inserted text>
>                \par
> <*> \input ./Rd2.tex
>
> ! Emergency stop.
> <*> \input ./Rd2.tex
>
> *** (job aborted, no legal \end found)
>
> !  ==> Fatal error occurred, no output PDF file produced!
> * checking PDF version of manual without hyperrefs or index ... ERROR
> * DONE
>
> I thought it might be an errant character in the Rd file, and after
> quite a bit of staring at a hex editor, I just retyped the whole
> thing. Everything runs okay except for this error. The file ends with
> the same line as many other Rd files in plotrix:
>
> \keyword{misc}
>
> and the last character is a line feed (0x0A). If I remove the function
> and man page, the error goes away. Thanks to any Sherlock out there.

You'll need to show us the source, but a guess based on "File ended 
while scanning use of \HeaderA." is that one of your titles or names 
contains characters that are confusing LaTeX.

You can also try

R CMD Rd2pdf --no-clean foo.Rd

to see what LaTeX got produced from the foo.Rd man page.  That will 
likely contain an error if the full manual does.

Duncan Murdoch


From drjimlemon at gmail.com  Fri May  5 13:29:10 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Fri, 5 May 2017 21:29:10 +1000
Subject: [R-pkg-devel] Latex got me
In-Reply-To: <b4c44c07-b326-47b2-bfe1-17a1c52f3511@gmail.com>
References: <CA+8X3fUZcDyEG=5ehAZzyvidCX9O5B=_5=d0ts257oB7iQGacQ@mail.gmail.com>
 <b4c44c07-b326-47b2-bfe1-17a1c52f3511@gmail.com>
Message-ID: <CA+8X3fXbrNzasPtSwRhaqBnuFeV1qp9B8L0JzAw2dC4G0mbfog@mail.gmail.com>

Thanks Duncan. Your suggestion gave me an error message that I could
understand and fix it. It was a "Runaway argument" in the first line.
As I often say, a day without learning something is a day wasted.

Jim


On Fri, May 5, 2017 at 8:00 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> On 05/05/2017 5:47 AM, Jim Lemon wrote:
>>
>> Hi,
>> In adding a contributed function to the plotrix package, I keep
>> getting a latex error:
>>
>> * checking PDF version of manual ... WARNING
>> LaTeX errors when creating PDF version.
>> This typically indicates Rd problems.
>> LaTeX errors found:
>> ! File ended while scanning use of \HeaderA.
>> <inserted text>
>>                \par
>> <*> \input ./Rd2.tex
>>
>> ! Emergency stop.
>> <*> \input ./Rd2.tex
>>
>> *** (job aborted, no legal \end found)
>>
>> !  ==> Fatal error occurred, no output PDF file produced!
>> * checking PDF version of manual without hyperrefs or index ... ERROR
>> * DONE
>>
>> I thought it might be an errant character in the Rd file, and after
>> quite a bit of staring at a hex editor, I just retyped the whole
>> thing. Everything runs okay except for this error. The file ends with
>> the same line as many other Rd files in plotrix:
>>
>> \keyword{misc}
>>
>> and the last character is a line feed (0x0A). If I remove the function
>> and man page, the error goes away. Thanks to any Sherlock out there.
>
>
> You'll need to show us the source, but a guess based on "File ended while
> scanning use of \HeaderA." is that one of your titles or names contains
> characters that are confusing LaTeX.
>
> You can also try
>
> R CMD Rd2pdf --no-clean foo.Rd
>
> to see what LaTeX got produced from the foo.Rd man page.  That will likely
> contain an error if the full manual does.
>
> Duncan Murdoch
>


From mark614 at icloud.com  Fri May  5 20:09:23 2017
From: mark614 at icloud.com (Mark)
Date: Fri, 05 May 2017 18:09:23 +0000 (GMT)
Subject: [R-pkg-devel]
 =?utf-8?q?Package_building_-_compiling_multiple_dll?=
 =?utf-8?q?_files_from_within_src_directory?=
Message-ID: <b58b37c9-b242-407e-9730-21f22cb17a2c@me.com>

Hi Uwe,

Thank you, I have a series of cc files that use similar function names, so to avoid overriding functions, I thought to compile and load each of the cc files separately. In more detail, I have a series of models for the use in deSolve, they all have the same initmod and derivs internal functions. See 2.2 section:?https://cran.r-project.org/web/packages/deSolve/vignettes/compiledCode.pdf

I realised I need to define the makevars file, but I don't know where to start, would you be able to advise on how to structure the makevars file?

Best,

M.

On May 05, 2017, at 09:26 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:

Why do you want to build separate dll files if you want to load all of 
them anyway? That way you add some overhead, at least.


From Writing R Extensions:

"A few packages use the src directory for purposes other than making a 
shared object (e.g. to create executables). Such packages should have 
files src/Makefile and src/Makefile.win (unless intended for only 
Unix-alikes or only Windows)."

Best,
Uwe Ligges



On 04.05.2017 17:09, Mark wrote:
Hi,

I am creating an R package with multiple c files within src directory.
If possible, I would like to create separate dll files for each c file.
Also I would like those dll files to have the same name as the input c
files. i.e:
mod01.c -o mod01.dll
mod02.c -o mod02.dll
mod03.c -o mod03.dll
...

I could then load different dll files in the NAMESPACE:
useDynLib("mod01")
useDynLib("mod02")
useDynLib("mod03")
...

I don't know how can I set the MAKEVARS to do this correctly, and any
suggestions would be much appreciated.

Mark
______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

From murdoch.duncan at gmail.com  Sat May  6 01:17:06 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 5 May 2017 19:17:06 -0400
Subject: [R-pkg-devel] Package building - compiling multiple dll files
 from within src directory
In-Reply-To: <b58b37c9-b242-407e-9730-21f22cb17a2c@me.com>
References: <b58b37c9-b242-407e-9730-21f22cb17a2c@me.com>
Message-ID: <8b81fcf9-faa2-3545-bde6-49512b30e39e@gmail.com>

On 05/05/2017 2:09 PM, Mark wrote:
> Hi Uwe,
>
> Thank you, I have a series of cc files that use similar function names, so to avoid overriding functions, I thought to compile and load each of the cc files separately. In more detail, I have a series of models for the use in deSolve, they all have the same initmod and derivs internal functions. See 2.2 section: https://cran.r-project.org/web/packages/deSolve/vignettes/compiledCode.pdf
>
> I realised I need to define the makevars file, but I don't know where to start, would you be able to advise on how to structure the makevars file?

You can't.  As Uwe said, you need a full Makefile and also a 
Makefile.win (which is the version of the Makefile used on Windows). 
This is not recommended, it is at your own risk, etc.

So my advice would be:  "Don't do that."

Make the functions you aren't exporting "static", and it doesn't matter 
if the names in separate files clash.  (At least this is true in C; I 
assume C++ is similar.)  Just make sure that the exported names don't 
clash, and put them all into one DLL.

Duncan Murdoch

>
> Best,
>
> M.
>
> On May 05, 2017, at 09:26 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>
> Why do you want to build separate dll files if you want to load all of
> them anyway? That way you add some overhead, at least.
>
>
> From Writing R Extensions:
>
> "A few packages use the src directory for purposes other than making a
> shared object (e.g. to create executables). Such packages should have
> files src/Makefile and src/Makefile.win (unless intended for only
> Unix-alikes or only Windows)."
>
> Best,
> Uwe Ligges
>
>
>
> On 04.05.2017 17:09, Mark wrote:
> Hi,
>
> I am creating an R package with multiple c files within src directory.
> If possible, I would like to create separate dll files for each c file.
> Also I would like those dll files to have the same name as the input c
> files. i.e:
> mod01.c -o mod01.dll
> mod02.c -o mod02.dll
> mod03.c -o mod03.dll
> ...
>
> I could then load different dll files in the NAMESPACE:
> useDynLib("mod01")
> useDynLib("mod02")
> useDynLib("mod03")
> ...
>
> I don't know how can I set the MAKEVARS to do this correctly, and any
> suggestions would be much appreciated.
>
> Mark
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From will.brannon at gmail.com  Sat May  6 22:02:53 2017
From: will.brannon at gmail.com (William Brannon)
Date: Sat, 6 May 2017 16:02:53 -0400
Subject: [R-pkg-devel] Depending on currently unreleased package
In-Reply-To: <CAOfWXX7sAiysK5Knvyf-E4uZ3=7bBA12116SQz8J3JWKKVVGfA@mail.gmail.com>
References: <CAOfWXX5GkbBEu3Jp6NJCRWwcEOFbGGY5uAq=1B--SNNhth9eXg@mail.gmail.com>
 <CAOfWXX7p_fzppF=zKssWWprXJxX2k+RNX_h6u_r-7na5ujwBwA@mail.gmail.com>
 <CAOfWXX5mJHMM_eD-Rn2vJb0-jcY7Z4LwLOr-wtW8kba5n795ug@mail.gmail.com>
 <CAOfWXX6jzbKaU+xQ=cHsu1ogh-BYDAykbtFyRkzD=4znCRQB4w@mail.gmail.com>
 <CAOfWXX79qe1=GCoE1CCt_E5XdZFbs_5Ta4f_8zZsBrypkKDcRg@mail.gmail.com>
 <CAOfWXX4mP=uQjoOMSyUiriZTrEKUJ+fOafAVYiHE1e6V0yuckQ@mail.gmail.com>
 <CAOfWXX6EGK56j4DjNRYiQcca50yAi7HY7Wb8Nqe8kJP+xfRj2Q@mail.gmail.com>
 <CAOfWXX4keuh=e8wHBHLJypPpa7Z7NKeJ=ma=mzOMr7vFgwneVQ@mail.gmail.com>
 <CAOfWXX7xpOr1x+ZpOOfKX4bjyDSavs8cZrXGE=ZKhhDumQHUKQ@mail.gmail.com>
 <CAOfWXX4GoCQg0y4nF1-2sx4Piw34-Os_AtGWdLtDYdk=5TwUaQ@mail.gmail.com>
 <CAOfWXX735ad6yy+XXPmP6=MzKsHsrtROx_rn=jK_Aaxhb=4PdQ@mail.gmail.com>
 <CAOfWXX5v5GfqOBjmCjB4TJvWVJhzdg9zSanvtofpkjvrZXC1SQ@mail.gmail.com>
 <CAOfWXX6CtNV_-gkZqLyu34n+nTRJMoDp=E8SpHCM46J0ccw8aA@mail.gmail.com>
 <CAOfWXX6SYGCUgnzLtSvO93Mjw=8Sp8ZVWzh1JRk00=7+3N8y6w@mail.gmail.com>
 <CAOfWXX7dwxo+azxexidNX9TO==JqxttnyJnQVpgJXK5KvC+nYg@mail.gmail.com>
 <CAOfWXX7+ojrH_bqmRxAOgLOkBH-oL0_ar9wfehjei=AM7nztLQ@mail.gmail.com>
 <CAOfWXX7sAiysK5Knvyf-E4uZ3=7bBA12116SQz8J3JWKKVVGfA@mail.gmail.com>
Message-ID: <CAOfWXX7avBm4ObXrZ96Q4EcRz31NJkdT5_oed_66KuKeGGfxcA@mail.gmail.com>

Hi r-devel,

I have a package called sqlscore (
https://cran.r-project.org/package=sqlscore) which depends on dplyr
functions for SQL generation. The new version of dplyr splits these
functions into a different package (dbplyr) and provides a recommended way
to wrap around access to the function in the appropriate package. So when
it's released in a few days, users with the new dplyr will see errors when
trying to use sqlscore. So far, so good, though - updating my R code as
such isn't hard.

But dbplyr won't be released before the new  dplyr is, and I can't figure
out how to list it in Imports, Depends or even Suggests to release an
update ahead of the new dplyr release. Doing so causes ERRORs in R CMD
check about an unavailable dependency, and not doing so causes problems
with "::" references to a package not mentioned in DESCRIPTION.

I'd rather not wait until dbplyr is released to submit a new package, for
obvious reasons. But releasing an update which depends on it before that
might also cause breakage.

Any suggestions for the right upgrade path?

Thanks
Will

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Sat May  6 22:18:48 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 6 May 2017 16:18:48 -0400
Subject: [R-pkg-devel] Depending on currently unreleased package
In-Reply-To: <CAOfWXX7avBm4ObXrZ96Q4EcRz31NJkdT5_oed_66KuKeGGfxcA@mail.gmail.com>
References: <CAOfWXX5GkbBEu3Jp6NJCRWwcEOFbGGY5uAq=1B--SNNhth9eXg@mail.gmail.com>
 <CAOfWXX4mP=uQjoOMSyUiriZTrEKUJ+fOafAVYiHE1e6V0yuckQ@mail.gmail.com>
 <CAOfWXX6EGK56j4DjNRYiQcca50yAi7HY7Wb8Nqe8kJP+xfRj2Q@mail.gmail.com>
 <CAOfWXX4keuh=e8wHBHLJypPpa7Z7NKeJ=ma=mzOMr7vFgwneVQ@mail.gmail.com>
 <CAOfWXX7xpOr1x+ZpOOfKX4bjyDSavs8cZrXGE=ZKhhDumQHUKQ@mail.gmail.com>
 <CAOfWXX4GoCQg0y4nF1-2sx4Piw34-Os_AtGWdLtDYdk=5TwUaQ@mail.gmail.com>
 <CAOfWXX735ad6yy+XXPmP6=MzKsHsrtROx_rn=jK_Aaxhb=4PdQ@mail.gmail.com>
 <CAOfWXX5v5GfqOBjmCjB4TJvWVJhzdg9zSanvtofpkjvrZXC1SQ@mail.gmail.com>
 <CAOfWXX6CtNV_-gkZqLyu34n+nTRJMoDp=E8SpHCM46J0ccw8aA@mail.gmail.com>
 <CAOfWXX6SYGCUgnzLtSvO93Mjw=8Sp8ZVWzh1JRk00=7+3N8y6w@mail.gmail.com>
 <CAOfWXX7dwxo+azxexidNX9TO==JqxttnyJnQVpgJXK5KvC+nYg@mail.gmail.com>
 <CAOfWXX7+ojrH_bqmRxAOgLOkBH-oL0_ar9wfehjei=AM7nztLQ@mail.gmail.com>
 <CAOfWXX7sAiysK5Knvyf-E4uZ3=7bBA12116SQz8J3JWKKVVGfA@mail.gmail.com>
 <CAOfWXX7avBm4ObXrZ96Q4EcRz31NJkdT5_oed_66KuKeGGfxcA@mail.gmail.com>
Message-ID: <a6e452ac-42c1-1a0e-28dd-e28eed6e5ee0@gmail.com>

On 06/05/2017 4:02 PM, William Brannon wrote:
> Hi r-devel,
>
> I have a package called sqlscore (
> https://cran.r-project.org/package=sqlscore) which depends on dplyr
> functions for SQL generation. The new version of dplyr splits these
> functions into a different package (dbplyr) and provides a recommended way
> to wrap around access to the function in the appropriate package. So when
> it's released in a few days, users with the new dplyr will see errors when
> trying to use sqlscore. So far, so good, though - updating my R code as
> such isn't hard.
>
> But dbplyr won't be released before the new  dplyr is, and I can't figure
> out how to list it in Imports, Depends or even Suggests to release an
> update ahead of the new dplyr release. Doing so causes ERRORs in R CMD
> check about an unavailable dependency, and not doing so causes problems
> with "::" references to a package not mentioned in DESCRIPTION.
>
> I'd rather not wait until dbplyr is released to submit a new package, for
> obvious reasons. But releasing an update which depends on it before that
> might also cause breakage.
>
> Any suggestions for the right upgrade path?
>

You can list dbplyr in Suggests, and put in conditionals to test for it. 
  If you don't want to wait for its release you'll need to have code 
that works without it as well, so something like this

if (requireNamespace("dbplyr"))
   foo <- dbplyr::foo
else if (packageVersion("dplyr") < "x.y.z")
   foo <- dplyr::foo
else
   stop("You need to install the dbplyr package, because dplyr::foo has 
moved there.")

will allow you to use foo() anywhere (as long as its interface is the 
same in both packages, of course).

Duncan Murdoch


From ligges at statistik.tu-dortmund.de  Sun May  7 18:03:05 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sun, 7 May 2017 18:03:05 +0200
Subject: [R-pkg-devel] Any new developments on "apparent S3 method"
	issue?
In-Reply-To: <CO2PR04MB2200C53C18B56FE1E2D91465F1EA0@CO2PR04MB2200.namprd04.prod.outlook.com>
References: <CO2PR04MB2200B71EA7F1D08A370D92ECF1160@CO2PR04MB2200.namprd04.prod.outlook.com>
 <eaed57a5-4181-6239-685b-1bc199d3b6e9@statistik.tu-dortmund.de>
 <CO2PR04MB2200C53C18B56FE1E2D91465F1EA0@CO2PR04MB2200.namprd04.prod.outlook.com>
Message-ID: <8c0b4677-46a0-ef7a-7098-7a28abf01449@statistik.tu-dortmund.de>



On 04.05.2017 16:23, Lenth, Russell V wrote:
> OK thanks -- this gives me a new perspective. I see this result:
>
>     > tools::nonS3methods("coda")
>     [1] "as.mcmc.list"
>
> which indicates more about the mechanisms in place for this kind of situation. So now it seems that if package 'pkg_B' simply imports and exports a function 'looks.like.S3.method'  from package 'pkg_A', and 'looks.like.S3.method' is already known via tools::nonS3methods("pkg_A") and thus has a check exclusion, then 'pkg_B' should have the same check exclusion. I recognize that such a check-exclusion-inheritance provision may not be very straightforward to implement.

Ideally, pkg_B avoids the infelicities that had been established with pkg A.

Best,
Uwe Ligges



>
> Russ
>
> -----Original Message-----
> From: Uwe Ligges [mailto:ligges at statistik.tu-dortmund.de]
> Sent: Thursday, May 4, 2017 3:06 AM
> To: Lenth, Russell V <russell-lenth at uiowa.edu>; r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Any new developments on "apparent S3 method" issue?
>
>
>
> On 03.05.2017 18:39, Lenth, Russell V wrote:
>> Package developers list:
>>
>> I recently added an 'as.mcmc.list' method for objects in one of my packages. Now, in doing an --as-cran check, I get this message:
>>
>> * checking S3 generic/method consistency ... NOTE Found the following
>> apparent S3 methods exported but not registered:
>>   as.mcmc.list
>> See section 'Registering S3 methods' in the 'Writing R Extensions' manual.
>>
>> Apparently, the checking routines conclude that I should register an 'as.mcmc' method for class "list" -- something that does not exist and is not needed. I did some searching, and found an exchange on this issue from January 2015, in which a "nonS3Method()" construct was proposed. That sure looks like what is needed, but it still doesn't exist. Is there a different way to handle this that has been developed?
>>
>> Further information -- this is related to the *coda* package, and my NAMESPACE file contains this code:
>>
>> if (requireNamespace("coda", quietly = TRUE)) {
>>     importFrom(coda, as.mcmc, as.mcmc.list)
>>     export(as.mcmc, as.mcmc.list)
>>     S3method(as.mcmc, ref.grid)
>>     S3method(as.mcmc.list, ref.grid)
>> }
>>
>> This seems clear enough; and what's mysterious is that *coda* passes the CRAN checks without this same NOTE.
>
> Yes. coda had the name for a very long time and it was not reasonable to fix this naming in felicity later on, hence there is a check exclusion in R-devel/src/library/tools/R/utils.R for as.mcmc.list in package coda.
>
> Best,
> Uwe Ligges
>
>
>
>
>>
>> As a possible workaround, I am considering:
>>    -- providing and registering my own S3 method 'as.mcmc' for class "list" --- in spite of my disinterest in providing this
>>   -- not importing coda::as.mcmc.list and instead exporting my own
>> generic that handles objects of class "list" separately
>>
>> Any suggestions?
>>
>> Russ
>>
>> Russell V. Lenth  -  Professor Emeritus Department of Statistics and
>> Actuarial Science The University of Iowa  -  Iowa City, IA 52242  USA
>> Voice (319)335-0712 (Dept. office)  -  FAX (319)335-3017
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>


From Hannes.Muehleisen at cwi.nl  Tue May  9 15:59:04 2017
From: Hannes.Muehleisen at cwi.nl (=?utf-8?Q?Hannes_M=C3=BChleisen?=)
Date: Tue, 9 May 2017 15:59:04 +0200
Subject: [R-pkg-devel] DllInfo & native routine registration
Message-ID: <CF3ADBE8-CB5E-4AB8-8FC2-68CB82166465@cwi.nl>

Hello R-package-devel,

I have just completed porting the MonetDBLite package to use registered native routines [1]. This worked fine except one minor issue: MonetDBLite (and I suppose other software) extensively uses dlsym to find its own internal functions. This used to rely on dlsym(dlopen(NULL, RTLD_NOW | RTLD_GLOBAL), ?some symbol?). However, in line with the new registration requirement, I changed this to dlopen from the specific .so file that contains my package C code. However, for this to work, I need a full path to the .so file in the installed R package. 

Now, I found that (conveniently), that path is contained in the DllInfo structure that is passed to the registration function. All is well if I just use that path. However, the DllInfo structure is opaque with a non-public definition in Rdynpriv.h. I think thats fine, but would it be possible to export a simple function like

void* R_get_dllinfo_path(DllInfo *dll) {
	return strdup(dll->path);
}

so one can pull the library path for dlopen() purposes?

Best and thanks,

Hannes

[1] https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Converting-a-package-to-use-registration


From edd at debian.org  Tue May  9 16:51:48 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 9 May 2017 09:51:48 -0500
Subject: [R-pkg-devel] DllInfo & native routine registration
In-Reply-To: <CF3ADBE8-CB5E-4AB8-8FC2-68CB82166465@cwi.nl>
References: <CF3ADBE8-CB5E-4AB8-8FC2-68CB82166465@cwi.nl>
Message-ID: <22801.55172.844770.960147@max.eddelbuettel.com>


On 9 May 2017 at 15:59, Hannes M?hleisen wrote:
| Hello R-package-devel,
| 
| I have just completed porting the MonetDBLite package to use registered native routines [1]. This worked fine except one minor issue: MonetDBLite (and I suppose other software) extensively uses dlsym to find its own internal functions. This used to rely on dlsym(dlopen(NULL, RTLD_NOW | RTLD_GLOBAL), ?some symbol?). However, in line with the new registration requirement, I changed this to dlopen from the specific .so file that contains my package C code. However, for this to work, I need a full path to the .so file in the installed R package. 
| 
| Now, I found that (conveniently), that path is contained in the DllInfo structure that is passed to the registration function. All is well if I just use that path. However, the DllInfo structure is opaque with a non-public definition in Rdynpriv.h. I think thats fine, but would it be possible to export a simple function like
| 
| void* R_get_dllinfo_path(DllInfo *dll) {
| 	return strdup(dll->path);
| }
| 
| so one can pull the library path for dlopen() purposes?

Here is what Rmpi does (and I am CCing Hao Yu as the 'openmpi.so.20' part is
yeat not upstream, but we needed it in Debian)

#ifdef OPENMPI
    if (!dlopen("libmpi.so.20", RTLD_GLOBAL | RTLD_LAZY) 
        && !dlopen("libmpi.so.1", RTLD_GLOBAL | RTLD_LAZY) 
	&& !dlopen("libmpi.so.0", RTLD_GLOBAL | RTLD_LAZY)
	&& !dlopen("libmpi.so", RTLD_GLOBAL | RTLD_LAZY)) {
        Rprintf("%s\n",dlerror());
        return AsInt(0);
    }
#endif

We have used this for maybe a decade -- dlopen() seems to just rely on
ldconfig and friends to resolve this.  [ And OpenMPI insists, or maybe
insisted ?, on scattering symbols over several shared libraries, requiring
the 'RTLD_GLOBAL | RTLD_LAZY' to set the proper bits. ]

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From Andy.Bunn at wwu.edu  Wed May 10 00:32:10 2017
From: Andy.Bunn at wwu.edu (Andy Bunn)
Date: Tue, 9 May 2017 22:32:10 +0000
Subject: [R-pkg-devel] gmp depedencies
Message-ID: <D5378CBF.68CF5%andy.bunn@wwu.edu>

Hi all, I package I maintain imports gmp:

https://CRAN.R-project.org/package=gmp



There is no binary OS X El Capitan binary for gmp and attempts to build it
from source on Mac OS X fail:

andybunns-MacBook-Pro:Downloads bunna$ R CMD INSTALL gmp_0.5-13.1.tar.gz
* installing to library ?/Users/bunna/Rlibs?
* installing *source* package ?gmp? ...
** package ?gmp? successfully unpacked and MD5 sums checked
creating cache ./config.cache
checking for __gmpz_ui_sub in -lgmp... no
configure: error: GNU MP not found, or not 4.1.4 or up, see
http://gmplib.org
ERROR: configuration failed for package ?gmp?
* removing ?/Users/bunna/Rlibs/gmp?
andybunns-MacBook-Pro:Downloads bunna$

Installing the gmp library on Mac appear fraught:

https://gmplib.org/macos.html


Anybody have a suggestion of how to proceed? I'm thinking of removing gmp
from the package I maintain.

Thanks in advance,
-Andy


 


From rmh at temple.edu  Wed May 10 00:39:37 2017
From: rmh at temple.edu (Richard M. Heiberger)
Date: Tue, 9 May 2017 18:39:37 -0400
Subject: [R-pkg-devel] gmp depedencies
In-Reply-To: <D5378CBF.68CF5%andy.bunn@wwu.edu>
References: <D5378CBF.68CF5%andy.bunn@wwu.edu>
Message-ID: <CAGx1TMCBjX_RVnTQ8Q2a-1hA6vd6jQ4SzVooCh+S95-qPJVm0g@mail.gmail.com>

I copied the 3.3.3 gmp_0.5-13.1 over to 3.4.0 and it works.


On Tue, May 9, 2017 at 6:32 PM, Andy Bunn <Andy.Bunn at wwu.edu> wrote:
> Hi all, I package I maintain imports gmp:
>
> https://CRAN.R-project.org/package=gmp
>
>
>
> There is no binary OS X El Capitan binary for gmp and attempts to build it
> from source on Mac OS X fail:
>
> andybunns-MacBook-Pro:Downloads bunna$ R CMD INSTALL gmp_0.5-13.1.tar.gz
> * installing to library ?/Users/bunna/Rlibs?
> * installing *source* package ?gmp? ...
> ** package ?gmp? successfully unpacked and MD5 sums checked
> creating cache ./config.cache
> checking for __gmpz_ui_sub in -lgmp... no
> configure: error: GNU MP not found, or not 4.1.4 or up, see
> http://gmplib.org
> ERROR: configuration failed for package ?gmp?
> * removing ?/Users/bunna/Rlibs/gmp?
> andybunns-MacBook-Pro:Downloads bunna$
>
> Installing the gmp library on Mac appear fraught:
>
> https://gmplib.org/macos.html
>
>
> Anybody have a suggestion of how to proceed? I'm thinking of removing gmp
> from the package I maintain.
>
> Thanks in advance,
> -Andy
>
>
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From will.brannon at gmail.com  Wed May 10 01:54:01 2017
From: will.brannon at gmail.com (William Brannon)
Date: Tue, 9 May 2017 19:54:01 -0400
Subject: [R-pkg-devel] Depending on currently unreleased package
In-Reply-To: <a6e452ac-42c1-1a0e-28dd-e28eed6e5ee0@gmail.com>
References: <CAOfWXX5GkbBEu3Jp6NJCRWwcEOFbGGY5uAq=1B--SNNhth9eXg@mail.gmail.com>
 <CAOfWXX4mP=uQjoOMSyUiriZTrEKUJ+fOafAVYiHE1e6V0yuckQ@mail.gmail.com>
 <CAOfWXX6EGK56j4DjNRYiQcca50yAi7HY7Wb8Nqe8kJP+xfRj2Q@mail.gmail.com>
 <CAOfWXX4keuh=e8wHBHLJypPpa7Z7NKeJ=ma=mzOMr7vFgwneVQ@mail.gmail.com>
 <CAOfWXX7xpOr1x+ZpOOfKX4bjyDSavs8cZrXGE=ZKhhDumQHUKQ@mail.gmail.com>
 <CAOfWXX4GoCQg0y4nF1-2sx4Piw34-Os_AtGWdLtDYdk=5TwUaQ@mail.gmail.com>
 <CAOfWXX735ad6yy+XXPmP6=MzKsHsrtROx_rn=jK_Aaxhb=4PdQ@mail.gmail.com>
 <CAOfWXX5v5GfqOBjmCjB4TJvWVJhzdg9zSanvtofpkjvrZXC1SQ@mail.gmail.com>
 <CAOfWXX6CtNV_-gkZqLyu34n+nTRJMoDp=E8SpHCM46J0ccw8aA@mail.gmail.com>
 <CAOfWXX6SYGCUgnzLtSvO93Mjw=8Sp8ZVWzh1JRk00=7+3N8y6w@mail.gmail.com>
 <CAOfWXX7dwxo+azxexidNX9TO==JqxttnyJnQVpgJXK5KvC+nYg@mail.gmail.com>
 <CAOfWXX7+ojrH_bqmRxAOgLOkBH-oL0_ar9wfehjei=AM7nztLQ@mail.gmail.com>
 <CAOfWXX7sAiysK5Knvyf-E4uZ3=7bBA12116SQz8J3JWKKVVGfA@mail.gmail.com>
 <CAOfWXX7avBm4ObXrZ96Q4EcRz31NJkdT5_oed_66KuKeGGfxcA@mail.gmail.com>
 <a6e452ac-42c1-1a0e-28dd-e28eed6e5ee0@gmail.com>
Message-ID: <CAOfWXX64YFUzAjWRbk8dfuUsGXZdU4AUCSXeu-iwQYNGo_fSXA@mail.gmail.com>

Thanks! That took care of it. I had been tripped up by how the R support in
travis-ci throws errors if suggested packages aren't available.

On May 6, 2017 4:18 PM, "Duncan Murdoch" <murdoch.duncan at gmail.com> wrote:

> On 06/05/2017 4:02 PM, William Brannon wrote:
>
>> Hi r-devel,
>>
>> I have a package called sqlscore (
>> https://cran.r-project.org/package=sqlscore) which depends on dplyr
>> functions for SQL generation. The new version of dplyr splits these
>> functions into a different package (dbplyr) and provides a recommended way
>> to wrap around access to the function in the appropriate package. So when
>> it's released in a few days, users with the new dplyr will see errors when
>> trying to use sqlscore. So far, so good, though - updating my R code as
>> such isn't hard.
>>
>> But dbplyr won't be released before the new  dplyr is, and I can't figure
>> out how to list it in Imports, Depends or even Suggests to release an
>> update ahead of the new dplyr release. Doing so causes ERRORs in R CMD
>> check about an unavailable dependency, and not doing so causes problems
>> with "::" references to a package not mentioned in DESCRIPTION.
>>
>> I'd rather not wait until dbplyr is released to submit a new package, for
>> obvious reasons. But releasing an update which depends on it before that
>> might also cause breakage.
>>
>> Any suggestions for the right upgrade path?
>>
>>
> You can list dbplyr in Suggests, and put in conditionals to test for it.
> If you don't want to wait for its release you'll need to have code that
> works without it as well, so something like this
>
> if (requireNamespace("dbplyr"))
>   foo <- dbplyr::foo
> else if (packageVersion("dplyr") < "x.y.z")
>   foo <- dplyr::foo
> else
>   stop("You need to install the dbplyr package, because dplyr::foo has
> moved there.")
>
> will allow you to use foo() anywhere (as long as its interface is the same
> in both packages, of course).
>
> Duncan Murdoch
>

	[[alternative HTML version deleted]]


From russell-lenth at uiowa.edu  Wed May 10 17:23:04 2017
From: russell-lenth at uiowa.edu (Lenth, Russell V)
Date: Wed, 10 May 2017 15:23:04 +0000
Subject: [R-pkg-devel] Re-exporting S3 generics
Message-ID: <CO2PR04MB22001E4F7FDC5CE8BF4FB2C1F1EC0@CO2PR04MB2200.namprd04.prod.outlook.com>

Dear package developers:

My 'lsmeans' package provides, among other things, 'as.mcmc' and 'as.mcmc.list' methods for its 'ref.grid' objects. Those methods allow obtaining posterior predictions, or averages thereof, from certain models fitted using MCMC methods.

My question concerns this: the S3 generics for 'as.mcmc' and 'as.mcmc.list' exist in the 'coda' package. Therefore, 'coda' is listed in the Imports field of the DESCRIPTION file, and the NAMESPACE file imports these generics and registers my corresponding methods for the 'ref.grid' class. However, to use those methods, the user must either have the 'coda' package attached, or name it explicitly in calling as.mcmc -- even if the user doesn't want to use the coda package for anything else. For concreteness, consider the following illustration:

    library("rstanarm")
    example("stan_glm")
    # ... (output suppressed) ...

    library("lsmeans")
    ref.grid(fit3)
    ## 'ref.grid' object with variables:
    ##     outcome = 1, 2, 3
    ##     treatment = 1, 2, 3
    ## Transformation: ?log?

    outcome.lsm <- lsmeans(fit3, "outcome")  # averages predictions over treatments
    outcome.post <- as.mcmc(outcome.lsm)
    ## Error in as.mcmc(fit3) : could not find function "as.mcmc"

    outcome.post <- coda::as.mcmc(outcome.lsm)

    library(bayesplot)
    mcmc_areas(outcome.post, prob = .9)

In this illustration, the user could have used the plot routines in the coda package to display the results; but instead, opted for the cooler ones in the 'bayesplot' package. The user had no need at all for the 'coda' package except to locate the generic for 'as.mcmc'. This seems kind of user-unfriendly. 

But suppose I modify and rebuild the package so that it exports the generic 'as.mcmc'. Then it would be visible to the user and the first 'as.mcmc' call above would have worked. This looks like it potentially could mess up the S3 dispatching of this method. However, if I try it ...

    # ... (Package rebuilt adding  'export(as.mcmc)'  to NAMESPACE) ...
    as.mcmc
    ## function (x, ...) 
    ## UseMethod("as.mcmc")
    ## <environment: namespace:coda>

... it appears that it 'lsmeans' is not exporting a copy, but the exact same generic in the exact same namespace. So this re-exporting  seems harmless, and is a convenience to the user. (I'll comment that several older versions of 'lsmeans' did export 'as.mcmc' and to my knowledge, nothing bad happened). Am I missing something?

Russ


Russell V. Lenth? -? Professor Emeritus
Department of Statistics and Actuarial Science?? 
The University of Iowa ?-? Iowa City, IA 52242? USA?? 
Voice (319)335-0712 (Dept. office)? -? FAX (319)335-3017



From jxc864 at case.edu  Wed May 10 05:54:02 2017
From: jxc864 at case.edu (Jang Ik Cho)
Date: Tue, 9 May 2017 23:54:02 -0400
Subject: [R-pkg-devel] Question on a NOTE when testing a package
Message-ID: <CAAwdLjvygn2xDfxkEsMvPyN05GL0YsPVYJsMB8F=Jfpqn8fwgw@mail.gmail.com>

I am getting the following messages as a note.

checking R code for possible problems ... NOTExxxxxxxx: no visible
global function definition for ?glm.nb?xxxxxxxx: no visible global
function definition for ?rnegbin?Undefined global functions or
variables:  glm.nb rnegbin


Both glm.nb and rnegbin is from MASS and I am having hard time
resolving this issue because it lloks like we do not need to declare
MASS library.

Can anyone please help me to solve this issue and have the note to
disappear?

Thank you.

	[[alternative HTML version deleted]]


From shivaram.venkataraman at gmail.com  Wed May 10 07:58:43 2017
From: shivaram.venkataraman at gmail.com (Shivaram Venkataraman)
Date: Tue, 9 May 2017 22:58:43 -0700
Subject: [R-pkg-devel] Windows tests for CRAN submission
Message-ID: <CAGiTW4-DGRK9hYRjAqRH--ms3pVJ46LLcM-rH9E7gUuX5d3FpQ@mail.gmail.com>

Hi

I'm a first time package submitter to CRAN and have a question on how to
handle unit tests on Windows. The SparkR [1] package [2] file that we are
trying to submit passes "R CMD check  --as-cran" with no errors on both
Linux and OS X.

On Windows, the package builds successfully but requires additional
binaries [3] to be installed in order for the unit tests to run. While we
have a automated test runner that installs the binaries and runs tests on
every commit [4] on AppVeyor, when "R CMD check --as-cran" is run on
winbuilder, the tests fail.

Given this situation, is it possible to specify in our CRAN submission that
the package should only be tested on Unix machines ? Or is it recommended
that we include scripts to install the additional binaries during a CRAN
check on winbuilder ?

Thanks for your help and please let me know if any further details about
the package will help in resolving this.

Thanks
Shivaram

[1] https://github.com/apache/spark/tree/master/R
[2]
http://people.apache.org/~pwendell/spark-releases/spark-2.1.1-rc4-bin/SparkR_2.1.1.tar.gz
[3] https://github.com/apache/spark/blob/master/R/WINDOWS.md#unit-tests
[4] https://ci.appveyor.com/project/ApacheSoftwareFoundation/spark/history

	[[alternative HTML version deleted]]


From neal.p.richardson at gmail.com  Wed May 10 17:28:17 2017
From: neal.p.richardson at gmail.com (Neal Richardson)
Date: Wed, 10 May 2017 08:28:17 -0700
Subject: [R-pkg-devel] [patch] R CMD check when there are no .Rd examples
Message-ID: <CAOCv4hgRkN2mRvrFc5+-Gsvcktif7wn6ibXau3t6-oE8Fu7o0Q@mail.gmail.com>

Hi,
Last week I submitted a new package to CRAN, and it was rejected
because there were no examples in any of the man pages. That's a
reasonable requirement--I just didn't know it was one. When I looked
back at the R CMD check results locally, I saw

    * checking examples ... NONE

but the run still finished with

    Status: OK

so I believed that my package was good. The package did have usage
examples in the test suite and on the readme file, and it was no
problem to copy the examples over to a man page and resubmit. But it
seemed like an unfortunate and avoidable waste of the CRAN
maintainers' time to have to ask for revisions and review again.

I read the source and saw that the requirement around .Rd examples
that R CMD check does enforce is only when there are no examples, no
vignettes, and no tests
(https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R#L5100-L5117).
The attached one-line patch makes the check for .Rd examples now log a
"Note" rather than just print "NONE". Running it against my package
without man-page examples, it shows

    * checking examples ... NOTE
    No examples

and ends with

    Status: 1 NOTE

which should be enough to remind package authors to address it before
submitting to CRAN.

Thanks for considering this patch.

Neal

P.S. Since this is an issue about CRAN policy and package development,
I thought R-package-devel was the appropriate list to email, but
please let me know if I should send the patch to R-devel instead.
-------------- next part --------------
Index: src/library/tools/R/check.R
===================================================================
--- src/library/tools/R/check.R	(revision 72665)
+++ src/library/tools/R/check.R	(working copy)
@@ -2868,7 +2868,7 @@
                                  " check also with --run-donttest\n")
                 }
             } else {
-                resultLog(Log, "NONE")
+                noteLog(Log, "No examples")
                 no_examples <<- TRUE
             }
         }

From ligges at statistik.tu-dortmund.de  Wed May 10 18:56:28 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 10 May 2017 18:56:28 +0200
Subject: [R-pkg-devel] Question on a NOTE when testing a package
In-Reply-To: <CAAwdLjvygn2xDfxkEsMvPyN05GL0YsPVYJsMB8F=Jfpqn8fwgw@mail.gmail.com>
References: <CAAwdLjvygn2xDfxkEsMvPyN05GL0YsPVYJsMB8F=Jfpqn8fwgw@mail.gmail.com>
Message-ID: <977b00b3-ea77-93ad-a4c2-101e67b2cdf9@statistik.tu-dortmund.de>

Import from the MAS namespace.

Best,
Uwe Ligges



On 10.05.2017 05:54, Jang Ik Cho wrote:
> I am getting the following messages as a note.
>
> checking R code for possible problems ... NOTExxxxxxxx: no visible
> global function definition for ?glm.nb?xxxxxxxx: no visible global
> function definition for ?rnegbin?Undefined global functions or
> variables:  glm.nb rnegbin
>
>
> Both glm.nb and rnegbin is from MASS and I am having hard time
> resolving this issue because it lloks like we do not need to declare
> MASS library.
>
> Can anyone please help me to solve this issue and have the note to
> disappear?
>
> Thank you.
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ligges at statistik.tu-dortmund.de  Wed May 10 18:58:21 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 10 May 2017 18:58:21 +0200
Subject: [R-pkg-devel] Windows tests for CRAN submission
In-Reply-To: <CAGiTW4-DGRK9hYRjAqRH--ms3pVJ46LLcM-rH9E7gUuX5d3FpQ@mail.gmail.com>
References: <CAGiTW4-DGRK9hYRjAqRH--ms3pVJ46LLcM-rH9E7gUuX5d3FpQ@mail.gmail.com>
Message-ID: <52279fe9-aa82-4f86-4f12-17f726637141@statistik.tu-dortmund.de>

On 10.05.2017 07:58, Shivaram Venkataraman wrote:
> Hi
>
> I'm a first time package submitter to CRAN and have a question on how to
> handle unit tests on Windows. The SparkR [1] package [2] file that we are
> trying to submit passes "R CMD check  --as-cran" with no errors on both
> Linux and OS X.
>
> On Windows, the package builds successfully but requires additional
> binaries [3] to be installed in order for the unit tests to run. While we
> have a automated test runner that installs the binaries and runs tests on
> every commit [4] on AppVeyor, when "R CMD check --as-cran" is run on
> winbuilder, the tests fail.
>
> Given this situation, is it possible to specify in our CRAN submission that
> the package should only be tested on Unix machines ? Or is it recommended
> that we include scripts to install the additional binaries during a CRAN
> check on winbuilder ?

Tell me and if the requirements are reasonable and easy to install I'll 
consider to install them.

Best,
Uwe Ligges



> Thanks for your help and please let me know if any further details about
> the package will help in resolving this.
>
> Thanks
> Shivaram
>
> [1] https://github.com/apache/spark/tree/master/R
> [2]
> http://people.apache.org/~pwendell/spark-releases/spark-2.1.1-rc4-bin/SparkR_2.1.1.tar.gz
> [3] https://github.com/apache/spark/blob/master/R/WINDOWS.md#unit-tests
> [4] https://ci.appveyor.com/project/ApacheSoftwareFoundation/spark/history
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ligges at statistik.tu-dortmund.de  Wed May 10 18:59:48 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 10 May 2017 18:59:48 +0200
Subject: [R-pkg-devel] [patch] R CMD check when there are no .Rd examples
In-Reply-To: <CAOCv4hgRkN2mRvrFc5+-Gsvcktif7wn6ibXau3t6-oE8Fu7o0Q@mail.gmail.com>
References: <CAOCv4hgRkN2mRvrFc5+-Gsvcktif7wn6ibXau3t6-oE8Fu7o0Q@mail.gmail.com>
Message-ID: <ca00c6e9-282c-f03a-e984-1d7bf0dd12ba@statistik.tu-dortmund.de>

There are packages where examples do not make sense, hence we do not 
generally reject such packages.

But if adding examples are reasonable we ask for them.

Best,
Uwe Ligges



On 10.05.2017 17:28, Neal Richardson wrote:
> Hi,
> Last week I submitted a new package to CRAN, and it was rejected
> because there were no examples in any of the man pages. That's a
> reasonable requirement--I just didn't know it was one. When I looked
> back at the R CMD check results locally, I saw
>
>     * checking examples ... NONE
>
> but the run still finished with
>
>     Status: OK
>
> so I believed that my package was good. The package did have usage
> examples in the test suite and on the readme file, and it was no
> problem to copy the examples over to a man page and resubmit. But it
> seemed like an unfortunate and avoidable waste of the CRAN
> maintainers' time to have to ask for revisions and review again.
>
> I read the source and saw that the requirement around .Rd examples
> that R CMD check does enforce is only when there are no examples, no
> vignettes, and no tests
> (https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R#L5100-L5117).
> The attached one-line patch makes the check for .Rd examples now log a
> "Note" rather than just print "NONE". Running it against my package
> without man-page examples, it shows
>
>     * checking examples ... NOTE
>     No examples
>
> and ends with
>
>     Status: 1 NOTE
>
> which should be enough to remind package authors to address it before
> submitting to CRAN.
>
> Thanks for considering this patch.
>
> Neal
>
> P.S. Since this is an issue about CRAN policy and package development,
> I thought R-package-devel was the appropriate list to email, but
> please let me know if I should send the patch to R-devel instead.
>
>
> patch.diff
>
>
> Index: src/library/tools/R/check.R
> ===================================================================
> --- src/library/tools/R/check.R	(revision 72665)
> +++ src/library/tools/R/check.R	(working copy)
> @@ -2868,7 +2868,7 @@
>                                   " check also with --run-donttest\n")
>                  }
>              } else {
> -                resultLog(Log, "NONE")
> +                noteLog(Log, "No examples")
>                  no_examples <<- TRUE
>              }
>          }
>
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From shivaram.venkataraman at gmail.com  Wed May 10 23:46:21 2017
From: shivaram.venkataraman at gmail.com (Shivaram Venkataraman)
Date: Wed, 10 May 2017 14:46:21 -0700
Subject: [R-pkg-devel] Windows tests for CRAN submission
In-Reply-To: <52279fe9-aa82-4f86-4f12-17f726637141@statistik.tu-dortmund.de>
References: <CAGiTW4-DGRK9hYRjAqRH--ms3pVJ46LLcM-rH9E7gUuX5d3FpQ@mail.gmail.com>
 <52279fe9-aa82-4f86-4f12-17f726637141@statistik.tu-dortmund.de>
Message-ID: <CAGiTW49aDA4-LeEkvJmzKUV-xEuw1yNFa2vxSFEbBoxmf0T5Ww@mail.gmail.com>

On Wed, May 10, 2017 at 9:58 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de
> wrote:

> On 10.05.2017 07:58, Shivaram Venkataraman wrote:
>
>> Hi
>>
>> I'm a first time package submitter to CRAN and have a question on how to
>> handle unit tests on Windows. The SparkR [1] package [2] file that we are
>> trying to submit passes "R CMD check  --as-cran" with no errors on both
>> Linux and OS X.
>>
>> On Windows, the package builds successfully but requires additional
>> binaries [3] to be installed in order for the unit tests to run. While we
>> have a automated test runner that installs the binaries and runs tests on
>> every commit [4] on AppVeyor, when "R CMD check --as-cran" is run on
>> winbuilder, the tests fail.
>>
>> Given this situation, is it possible to specify in our CRAN submission
>> that
>> the package should only be tested on Unix machines ? Or is it recommended
>> that we include scripts to install the additional binaries during a CRAN
>> check on winbuilder ?
>>
>
> Tell me and if the requirements are reasonable and easy to install I'll
> consider to install them.
>
> Thanks for your reply. The requirements are to have the Hadoop windows
utils package installed. I wrote a small power shell script to do this at
https://gist.github.com/shivaram/bd5d17c31ce9d89035559fa956f59fc1 . The
script sets $HADOOP_HOME and adds $HADOOP_HOME/bin to $PATH. More details
about what is getting installed is at
https://github.com/steveloughran/winutils

On a related note: Would anybody happen to know what the value of JAVA_HOME
is set to on the winbuilder machine ?

Thanks
Shivaram


> Best,
> Uwe Ligges
>
>
>
> Thanks for your help and please let me know if any further details about
>> the package will help in resolving this.
>>
>> Thanks
>> Shivaram
>>
>> [1] https://github.com/apache/spark/tree/master/R
>> [2]
>> http://people.apache.org/~pwendell/spark-releases/spark-2.1.
>> 1-rc4-bin/SparkR_2.1.1.tar.gz
>> [3] https://github.com/apache/spark/blob/master/R/WINDOWS.md#unit-tests
>> [4] https://ci.appveyor.com/project/ApacheSoftwareFoundation/spa
>> rk/history
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>

	[[alternative HTML version deleted]]


From jxc864 at case.edu  Thu May 11 00:04:16 2017
From: jxc864 at case.edu (Jang Ik Cho)
Date: Wed, 10 May 2017 18:04:16 -0400
Subject: [R-pkg-devel] Question on a NOTE when testing a package
In-Reply-To: <977b00b3-ea77-93ad-a4c2-101e67b2cdf9@statistik.tu-dortmund.de>
References: <CAAwdLjvygn2xDfxkEsMvPyN05GL0YsPVYJsMB8F=Jfpqn8fwgw@mail.gmail.com>
 <977b00b3-ea77-93ad-a4c2-101e67b2cdf9@statistik.tu-dortmund.de>
Message-ID: <CAAwdLju803-co-gmU9StL5JSZGLHjM0u43_yBx382rJC0z5hyg@mail.gmail.com>

Thank you very much for the response. I've already tried import from
NAMESPACE but I got following message.

checking package dependencies ... ERRORNamespace dependency not required: ?MASS?


Is there any other solutions?


-----
Jang Ik Cho, MS
Ph.D. Candidate
Department of Epidemiology and Biostatistics
Case Western Reserve University
Graduate Research Assistant, SR2C
Graduate Research Assistant, Louis Stokes Cleveland VA Medical Center

On Wed, May 10, 2017 at 12:56 PM, Uwe Ligges <
ligges at statistik.tu-dortmund.de> wrote:

> Import from the MAS namespace.
>
> Best,
> Uwe Ligges
>
>
>
>
> On 10.05.2017 05:54, Jang Ik Cho wrote:
>
>> I am getting the following messages as a note.
>>
>> checking R code for possible problems ... NOTExxxxxxxx: no visible
>> global function definition for ?glm.nb?xxxxxxxx: no visible global
>> function definition for ?rnegbin?Undefined global functions or
>> variables:  glm.nb rnegbin
>>
>>
>> Both glm.nb and rnegbin is from MASS and I am having hard time
>> resolving this issue because it lloks like we do not need to declare
>> MASS library.
>>
>> Can anyone please help me to solve this issue and have the note to
>> disappear?
>>
>> Thank you.
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Thu May 11 00:51:47 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Thu, 11 May 2017 00:51:47 +0200
Subject: [R-pkg-devel] Question on a NOTE when testing a package
In-Reply-To: <CAAwdLju803-co-gmU9StL5JSZGLHjM0u43_yBx382rJC0z5hyg@mail.gmail.com>
References: <CAAwdLjvygn2xDfxkEsMvPyN05GL0YsPVYJsMB8F=Jfpqn8fwgw@mail.gmail.com>
 <977b00b3-ea77-93ad-a4c2-101e67b2cdf9@statistik.tu-dortmund.de>
 <CAAwdLju803-co-gmU9StL5JSZGLHjM0u43_yBx382rJC0z5hyg@mail.gmail.com>
Message-ID: <9fb60228-296d-ed61-baf2-1861680a52e8@statistik.tu-dortmund.de>



On 11.05.2017 00:04, Jang Ik Cho wrote:
> Thank you very much for the response. I've already tried import from
> NAMESPACE but I got following message.
>
> checking package dependencies ... ERROR Namespace dependency not
> required: ?MASS?


Come on, read Writing R Extensions. You have to declare it in the 
DESCRIPTION file as
Imports: MASS

Best,
Uwe Ligges


>
>
> Is there any other solutions?
>
>
> -----
> Jang Ik Cho, MS
> Ph.D. Candidate
> Department of Epidemiology and Biostatistics
> Case Western Reserve University
> Graduate Research Assistant, SR2C
> Graduate Research Assistant, Louis Stokes Cleveland VA Medical Center
>
> On Wed, May 10, 2017 at 12:56 PM, Uwe Ligges
> <ligges at statistik.tu-dortmund.de
> <mailto:ligges at statistik.tu-dortmund.de>> wrote:
>
>     Import from the MAS namespace.
>
>     Best,
>     Uwe Ligges
>
>
>
>
>     On 10.05.2017 05:54, Jang Ik Cho wrote:
>
>         I am getting the following messages as a note.
>
>         checking R code for possible problems ... NOTExxxxxxxx: no visible
>         global function definition for ?glm.nb?xxxxxxxx: no visible global
>         function definition for ?rnegbin?Undefined global functions or
>         variables:  glm.nb rnegbin
>
>
>         Both glm.nb and rnegbin is from MASS and I am having hard time
>         resolving this issue because it lloks like we do not need to declare
>         MASS library.
>
>         Can anyone please help me to solve this issue and have the note to
>         disappear?
>
>         Thank you.
>
>                 [[alternative HTML version deleted]]
>
>         ______________________________________________
>         R-package-devel at r-project.org
>         <mailto:R-package-devel at r-project.org> mailing list
>         https://stat.ethz.ch/mailman/listinfo/r-package-devel
>         <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>
>


From jxc864 at case.edu  Thu May 11 01:17:20 2017
From: jxc864 at case.edu (Jang Ik Cho)
Date: Wed, 10 May 2017 19:17:20 -0400
Subject: [R-pkg-devel] Question on a NOTE when testing a package
In-Reply-To: <9fb60228-296d-ed61-baf2-1861680a52e8@statistik.tu-dortmund.de>
References: <CAAwdLjvygn2xDfxkEsMvPyN05GL0YsPVYJsMB8F=Jfpqn8fwgw@mail.gmail.com>
 <977b00b3-ea77-93ad-a4c2-101e67b2cdf9@statistik.tu-dortmund.de>
 <CAAwdLju803-co-gmU9StL5JSZGLHjM0u43_yBx382rJC0z5hyg@mail.gmail.com>
 <9fb60228-296d-ed61-baf2-1861680a52e8@statistik.tu-dortmund.de>
Message-ID: <CAAwdLjteTuBKYCv66jub0g+UrUst4T0_=UbrLwcAFOP2nWTAbA@mail.gmail.com>

I see what you mean. Problem solved.
I wasn't familiar with the structure since it's my first time submitting to
CRAN.
Thank you very much.

Best Regards,
Jang


On Wed, May 10, 2017 at 6:51 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de
> wrote:

>
>
> On 11.05.2017 00:04, Jang Ik Cho wrote:
>
>> Thank you very much for the response. I've already tried import from
>> NAMESPACE but I got following message.
>>
>> checking package dependencies ... ERROR Namespace dependency not
>> required: ?MASS?
>>
>
>
> Come on, read Writing R Extensions. You have to declare it in the
> DESCRIPTION file as
> Imports: MASS
>
> Best,
> Uwe Ligges
>
>
>
>>
>> Is there any other solutions?
>>
>>
>> -----
>> Jang Ik Cho, MS
>> Ph.D. Candidate
>> Department of Epidemiology and Biostatistics
>> Case Western Reserve University
>> Graduate Research Assistant, SR2C
>> Graduate Research Assistant, Louis Stokes Cleveland VA Medical Center
>>
>> On Wed, May 10, 2017 at 12:56 PM, Uwe Ligges
>> <ligges at statistik.tu-dortmund.de
>> <mailto:ligges at statistik.tu-dortmund.de>> wrote:
>>
>>     Import from the MAS namespace.
>>
>>     Best,
>>     Uwe Ligges
>>
>>
>>
>>
>>     On 10.05.2017 05:54, Jang Ik Cho wrote:
>>
>>         I am getting the following messages as a note.
>>
>>         checking R code for possible problems ... NOTExxxxxxxx: no visible
>>         global function definition for ?glm.nb?xxxxxxxx: no visible global
>>         function definition for ?rnegbin?Undefined global functions or
>>         variables:  glm.nb rnegbin
>>
>>
>>         Both glm.nb and rnegbin is from MASS and I am having hard time
>>         resolving this issue because it lloks like we do not need to
>> declare
>>         MASS library.
>>
>>         Can anyone please help me to solve this issue and have the note to
>>         disappear?
>>
>>         Thank you.
>>
>>                 [[alternative HTML version deleted]]
>>
>>         ______________________________________________
>>         R-package-devel at r-project.org
>>         <mailto:R-package-devel at r-project.org> mailing list
>>         https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>         <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>
>>
>>

	[[alternative HTML version deleted]]


From ujjwalsas9 at gmail.com  Thu May 11 12:42:46 2017
From: ujjwalsas9 at gmail.com (ujjwal anand)
Date: Thu, 11 May 2017 12:42:46 +0200
Subject: [R-pkg-devel] Guidance on importind multiple text files for @example
Message-ID: <CA+OA9is-BmLMqFxA-uA1NH2xss2bj-bRZngWCDm_k2-va+V_RQ@mail.gmail.com>

Hello Sir/Ma'am,

I am trying to build a package on R. But my function, which takes a folder
full of text files as an argument.
So, could you please share some ideas on how to import a folder (which
contains multiple text files) for "@example".

Thanks,
Ujjwal Anand

	[[alternative HTML version deleted]]


From Rainer at krugs.de  Thu May 11 14:31:12 2017
From: Rainer at krugs.de (Rainer Krug)
Date: Thu, 11 May 2017 14:31:12 +0200
Subject: [R-pkg-devel] Re-creating vignettes after update of data or
 different mechanism to create reports?
Message-ID: <37DB3CD0-887A-435C-A601-B7A4AEDF4973@krugs.de>

Hi

I am building two packages:

- a data package which contains the data and function to extract it (several datasets, linked, like an sql database) and
- an analysis package which contains functions to analyse the data in the data package and depends on the data package.

The data package is updated often as the data is updated regularly, while the analysis package will (hopefully) be more static.

Now I created a report which I put in the vignette of the analysis package, which works nicely and the report is created when the analysis package is installed, but when the data package is updated, the user has to re-install the analysis package to re-create the report (vignette) of the updated dataset.

I know that I am abusing the vignette, but it works nicely.

My question:  Is there a way of re-creating the vignette by a user after they installed a newer version of the data package, or is there a better way of creating the report(s)?

Thanks,

Rainer

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

University of Z?rich

Cell:       +41 (0)78 630 66 57

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20170511/bc57e1c8/attachment.sig>

From Rainer at krugs.de  Thu May 11 14:43:45 2017
From: Rainer at krugs.de (Rainer Krug)
Date: Thu, 11 May 2017 14:43:45 +0200
Subject: [R-pkg-devel] Fwd: Re-creating vignettes after update of data or
 different mechanism to create reports?
References: <89F9EFFF-7570-46A8-A80A-525505236933@krugs.de>
Message-ID: <7F990C67-AFB1-48DB-945B-EF5333EA7C31@krugs.de>

Sorry - forgot to cc the list

> Begin forwarded message:
> 
> From: Rainer Krug <Rainer at krugs.de>
> Subject: Re: [R-pkg-devel] Re-creating vignettes after update of data or different mechanism to create reports?
> Date: 11 May 2017 at 14:41:03 GMT+2
> To: Holger Hoefling <hhoeflin at gmail.com>
> 
> 
>> On 11 May 2017, at 14:35, Holger Hoefling <hhoeflin at gmail.com <mailto:hhoeflin at gmail.com>> wrote:
>> 
>> Hi Rainer,
>> 
>> could you elaborate a little more on why you split this into two packages in the first place? If you all kept it in one, you would have to update this package regularly - but rebuilding the vignette would not be a problem.
>> 
>> As you designed it with 2 packages - you also have to update the data package regularly.
>> 
>> I guess I just don't understand what you gain by splitting the packages.
> 
> I am aware that I wouldn?t have this problem with a single package, but there are some reasons why I would like to keep them separate (see below):
> 
> 1) The dataset will be huge. So combining it with the analysis package is not a good idea in case that the analysis package needs to be updated and the data package stays the same.
> 
> 2) I like the separation between data package and analysis package - it is cleaner
> 
> 3) The data is not (but will hopefully be sometime later) public. So we can have two versions of the data package: one for internal usage, and one witch dummy data which can be made publicly available, as we want to make the code of the analysis public.
> 
> Hope this explains why I want to keep them separate,
> 
> Rainer
> 
>> 
>> Best
>> 
>> Holger
>> 
>> On Thu, May 11, 2017 at 2:31 PM, Rainer Krug <Rainer at krugs.de <mailto:Rainer at krugs.de>> wrote:
>> Hi
>> 
>> I am building two packages:
>> 
>> - a data package which contains the data and function to extract it (several datasets, linked, like an sql database) and
>> - an analysis package which contains functions to analyse the data in the data package and depends on the data package.
>> 
>> The data package is updated often as the data is updated regularly, while the analysis package will (hopefully) be more static.
>> 
>> Now I created a report which I put in the vignette of the analysis package, which works nicely and the report is created when the analysis package is installed, but when the data package is updated, the user has to re-install the analysis package to re-create the report (vignette) of the updated dataset.
>> 
>> I know that I am abusing the vignette, but it works nicely.
>> 
>> My question:  Is there a way of re-creating the vignette by a user after they installed a newer version of the data package, or is there a better way of creating the report(s)?
>> 
>> Thanks,
>> 
>> Rainer
>> 
>> --
>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>> 
>> University of Z?rich
>> 
>> Cell:       +41 (0)78 630 66 57 <tel:%2B41%20%280%2978%20630%2066%2057>
>> 
>> Fax (D):    +49 - (0)3 21 21 25 22 44 <tel:%2B49%20-%20%280%293%2021%2021%2025%2022%2044>
>> 
>> email:      Rainer at krugs.de <mailto:Rainer at krugs.de>
>> 
>> Skype:      RMkrug
>> 
>> 
>> ______________________________________________
>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>> 
> 
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> 
> University of Z?rich
> 
> Cell:       +41 (0)78 630 66 57
> 
> Fax (D):    +49 - (0)3 21 21 25 22 44
> 
> email:      Rainer at krugs.de <mailto:Rainer at krugs.de>
> 
> Skype:      RMkrug
> 

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

University of Z?rich

Cell:       +41 (0)78 630 66 57

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20170511/5f8a9d1d/attachment.sig>

From hhoeflin at gmail.com  Thu May 11 14:59:44 2017
From: hhoeflin at gmail.com (Holger Hoefling)
Date: Thu, 11 May 2017 14:59:44 +0200
Subject: [R-pkg-devel] Fwd: Re-creating vignettes after update of data
 or different mechanism to create reports?
In-Reply-To: <7F990C67-AFB1-48DB-945B-EF5333EA7C31@krugs.de>
References: <89F9EFFF-7570-46A8-A80A-525505236933@krugs.de>
 <7F990C67-AFB1-48DB-945B-EF5333EA7C31@krugs.de>
Message-ID: <CAFDswJvs3Dj8FkmDDGdygzVkLbPp6589vGmc3EJAjsyotY+dZA@mail.gmail.com>

Hi Rainer,

thanks for the explanation. You probably already considered this - but you
could version-bump the analysis package with every data package update (and
make the latest data package the minimum requirement). Given how large the
data package is - the overhead of an analysis package version bum seems
small. Then people would update the analysis package - which would trigger
the data package update and the vignette would be built correctly.

That being said - how exactly this would work may also depend on how you
plan to host this large package (CRAN would likely not accept it).
Bioconductor on the other hand requires version bumps for every package for
every release anyway - so this concurs with my suggestion.

Best

Holger

On Thu, May 11, 2017 at 2:43 PM, Rainer Krug <Rainer at krugs.de> wrote:

> Sorry - forgot to cc the list
>
> > Begin forwarded message:
> >
> > From: Rainer Krug <Rainer at krugs.de>
> > Subject: Re: [R-pkg-devel] Re-creating vignettes after update of data or
> different mechanism to create reports?
> > Date: 11 May 2017 at 14:41:03 GMT+2
> > To: Holger Hoefling <hhoeflin at gmail.com>
> >
> >
> >> On 11 May 2017, at 14:35, Holger Hoefling <hhoeflin at gmail.com <mailto:
> hhoeflin at gmail.com>> wrote:
> >>
> >> Hi Rainer,
> >>
> >> could you elaborate a little more on why you split this into two
> packages in the first place? If you all kept it in one, you would have to
> update this package regularly - but rebuilding the vignette would not be a
> problem.
> >>
> >> As you designed it with 2 packages - you also have to update the data
> package regularly.
> >>
> >> I guess I just don't understand what you gain by splitting the packages.
> >
> > I am aware that I wouldn?t have this problem with a single package, but
> there are some reasons why I would like to keep them separate (see below):
> >
> > 1) The dataset will be huge. So combining it with the analysis package
> is not a good idea in case that the analysis package needs to be updated
> and the data package stays the same.
> >
> > 2) I like the separation between data package and analysis package - it
> is cleaner
> >
> > 3) The data is not (but will hopefully be sometime later) public. So we
> can have two versions of the data package: one for internal usage, and one
> witch dummy data which can be made publicly available, as we want to make
> the code of the analysis public.
> >
> > Hope this explains why I want to keep them separate,
> >
> > Rainer
> >
> >>
> >> Best
> >>
> >> Holger
> >>
> >> On Thu, May 11, 2017 at 2:31 PM, Rainer Krug <Rainer at krugs.de <mailto:
> Rainer at krugs.de>> wrote:
> >> Hi
> >>
> >> I am building two packages:
> >>
> >> - a data package which contains the data and function to extract it
> (several datasets, linked, like an sql database) and
> >> - an analysis package which contains functions to analyse the data in
> the data package and depends on the data package.
> >>
> >> The data package is updated often as the data is updated regularly,
> while the analysis package will (hopefully) be more static.
> >>
> >> Now I created a report which I put in the vignette of the analysis
> package, which works nicely and the report is created when the analysis
> package is installed, but when the data package is updated, the user has to
> re-install the analysis package to re-create the report (vignette) of the
> updated dataset.
> >>
> >> I know that I am abusing the vignette, but it works nicely.
> >>
> >> My question:  Is there a way of re-creating the vignette by a user
> after they installed a newer version of the data package, or is there a
> better way of creating the report(s)?
> >>
> >> Thanks,
> >>
> >> Rainer
> >>
> >> --
> >> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
> Biology, UCT), Dipl. Phys. (Germany)
> >>
> >> University of Z?rich
> >>
> >> Cell:       +41 (0)78 630 66 57 <tel:%2B41%20%280%2978%20630%2066%2057>
> >>
> >> Fax (D):    +49 - (0)3 21 21 25 22 44 <tel:%2B49%20-%20%280%293%
> 2021%2021%2025%2022%2044>
> >>
> >> email:      Rainer at krugs.de <mailto:Rainer at krugs.de>
> >>
> >> Skype:      RMkrug
> >>
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
> mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel <
> https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> >>
> >
> > --
> > Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
> Biology, UCT), Dipl. Phys. (Germany)
> >
> > University of Z?rich
> >
> > Cell:       +41 (0)78 630 66 57
> >
> > Fax (D):    +49 - (0)3 21 21 25 22 44
> >
> > email:      Rainer at krugs.de <mailto:Rainer at krugs.de>
> >
> > Skype:      RMkrug
> >
>
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
> Biology, UCT), Dipl. Phys. (Germany)
>
> University of Z?rich
>
> Cell:       +41 (0)78 630 66 57
>
> Fax (D):    +49 - (0)3 21 21 25 22 44
>
> email:      Rainer at krugs.de
>
> Skype:      RMkrug
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From Rainer at krugs.de  Thu May 11 15:30:07 2017
From: Rainer at krugs.de (Rainer Krug)
Date: Thu, 11 May 2017 15:30:07 +0200
Subject: [R-pkg-devel] Fwd: Re-creating vignettes after update of data
 or different mechanism to create reports?
In-Reply-To: <CAFDswJvs3Dj8FkmDDGdygzVkLbPp6589vGmc3EJAjsyotY+dZA@mail.gmail.com>
References: <89F9EFFF-7570-46A8-A80A-525505236933@krugs.de>
 <7F990C67-AFB1-48DB-945B-EF5333EA7C31@krugs.de>
 <CAFDswJvs3Dj8FkmDDGdygzVkLbPp6589vGmc3EJAjsyotY+dZA@mail.gmail.com>
Message-ID: <6060F4B9-0B58-4D13-B9CD-5D57B7E4427E@krugs.de>


> On 11 May 2017, at 14:59, Holger Hoefling <hhoeflin at gmail.com> wrote:
> 
> Hi Rainer,
> 
> thanks for the explanation.

No problem.

> You probably already considered this - but you could version-bump the analysis package with every data package update (and make the latest data package the minimum requirement). Given how large the data package is - the overhead of an analysis package version bum seems small. Then people would update the analysis package - which would trigger the data package update and the vignette would be built correctly.

That would certainly work. Considering the main distribution channel at the moment, which is source Packages as .tar.gz, this would not be as elegant.
Given possible distribution channels (GitHub likely), I think a different solution might be better. Also, I don?t know if CRAN would be to happy to have regular version bumps just to re-create the vignette?

Thanks,

Rainer

> 
> That being said - how exactly this would work may also depend on how you plan to host this large package (CRAN would likely not accept it). Bioconductor on the other hand requires version bumps for every package for every release anyway - so this concurs with my suggestion.
> 
> Best
> 
> Holger
> 
> On Thu, May 11, 2017 at 2:43 PM, Rainer Krug <Rainer at krugs.de <mailto:Rainer at krugs.de>> wrote:
> Sorry - forgot to cc the list
> 
> > Begin forwarded message:
> >
> > From: Rainer Krug <Rainer at krugs.de <mailto:Rainer at krugs.de>>
> > Subject: Re: [R-pkg-devel] Re-creating vignettes after update of data or different mechanism to create reports?
> > Date: 11 May 2017 at 14:41:03 GMT+2
> > To: Holger Hoefling <hhoeflin at gmail.com <mailto:hhoeflin at gmail.com>>
> >
> >
> >> On 11 May 2017, at 14:35, Holger Hoefling <hhoeflin at gmail.com <mailto:hhoeflin at gmail.com> <mailto:hhoeflin at gmail.com <mailto:hhoeflin at gmail.com>>> wrote:
> >>
> >> Hi Rainer,
> >>
> >> could you elaborate a little more on why you split this into two packages in the first place? If you all kept it in one, you would have to update this package regularly - but rebuilding the vignette would not be a problem.
> >>
> >> As you designed it with 2 packages - you also have to update the data package regularly.
> >>
> >> I guess I just don't understand what you gain by splitting the packages.
> >
> > I am aware that I wouldn?t have this problem with a single package, but there are some reasons why I would like to keep them separate (see below):
> >
> > 1) The dataset will be huge. So combining it with the analysis package is not a good idea in case that the analysis package needs to be updated and the data package stays the same.
> >
> > 2) I like the separation between data package and analysis package - it is cleaner
> >
> > 3) The data is not (but will hopefully be sometime later) public. So we can have two versions of the data package: one for internal usage, and one witch dummy data which can be made publicly available, as we want to make the code of the analysis public.
> >
> > Hope this explains why I want to keep them separate,
> >
> > Rainer
> >
> >>
> >> Best
> >>
> >> Holger
> >>
> >> On Thu, May 11, 2017 at 2:31 PM, Rainer Krug <Rainer at krugs.de <mailto:Rainer at krugs.de> <mailto:Rainer at krugs.de <mailto:Rainer at krugs.de>>> wrote:
> >> Hi
> >>
> >> I am building two packages:
> >>
> >> - a data package which contains the data and function to extract it (several datasets, linked, like an sql database) and
> >> - an analysis package which contains functions to analyse the data in the data package and depends on the data package.
> >>
> >> The data package is updated often as the data is updated regularly, while the analysis package will (hopefully) be more static.
> >>
> >> Now I created a report which I put in the vignette of the analysis package, which works nicely and the report is created when the analysis package is installed, but when the data package is updated, the user has to re-install the analysis package to re-create the report (vignette) of the updated dataset.
> >>
> >> I know that I am abusing the vignette, but it works nicely.
> >>
> >> My question:  Is there a way of re-creating the vignette by a user after they installed a newer version of the data package, or is there a better way of creating the report(s)?
> >>
> >> Thanks,
> >>
> >> Rainer
> >>
> >> --
> >> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> >>
> >> University of Z?rich
> >>
> >> Cell:       +41 (0)78 630 66 57 <tel:%2B41%20%280%2978%20630%2066%2057> <tel:%2B41%20%280%2978%20630%2066%2057>
> >>
> >> Fax (D):    +49 - (0)3 21 21 25 22 44 <tel:%2B49%20-%20%280%293%2021%2021%2025%2022%2044> <tel:%2B49%20-%20%280%293%2021%2021%2025%2022%2044>
> >>
> >> email:      Rainer at krugs.de <mailto:Rainer at krugs.de> <mailto:Rainer at krugs.de <mailto:Rainer at krugs.de>>
> >>
> >> Skype:      RMkrug
> >>
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> <mailto:R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>> mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel> <https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>>
> >>
> >
> > --
> > Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> >
> > University of Z?rich
> >
> > Cell:       +41 (0)78 630 66 57 <tel:%2B41%20%280%2978%20630%2066%2057>
> >
> > Fax (D):    +49 - (0)3 21 21 25 22 44 <tel:%2B49%20-%20%280%293%2021%2021%2025%2022%2044>
> >
> > email:      Rainer at krugs.de <mailto:Rainer at krugs.de> <mailto:Rainer at krugs.de <mailto:Rainer at krugs.de>>
> >
> > Skype:      RMkrug
> >
> 
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> 
> University of Z?rich
> 
> Cell:       +41 (0)78 630 66 57 <tel:%2B41%20%280%2978%20630%2066%2057>
> 
> Fax (D):    +49 - (0)3 21 21 25 22 44 <tel:%2B49%20-%20%280%293%2021%2021%2025%2022%2044>
> 
> email:      Rainer at krugs.de <mailto:Rainer at krugs.de>
> 
> Skype:      RMkrug
> 
> 
> ______________________________________________
> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> 

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

University of Z?rich

Cell:       +41 (0)78 630 66 57

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20170511/e7a833c1/attachment.sig>

From murdoch.duncan at gmail.com  Thu May 11 15:47:49 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 11 May 2017 09:47:49 -0400
Subject: [R-pkg-devel] Guidance on importind multiple text files for
 @example
In-Reply-To: <CA+OA9is-BmLMqFxA-uA1NH2xss2bj-bRZngWCDm_k2-va+V_RQ@mail.gmail.com>
References: <CA+OA9is-BmLMqFxA-uA1NH2xss2bj-bRZngWCDm_k2-va+V_RQ@mail.gmail.com>
Message-ID: <6d8a7263-7e31-28af-2823-b5aafa3201b3@gmail.com>

On 11/05/2017 6:42 AM, ujjwal anand wrote:
> Hello Sir/Ma'am,
>
> I am trying to build a package on R. But my function, which takes a folder
> full of text files as an argument.
> So, could you please share some ideas on how to import a folder (which
> contains multiple text files) for "@example".

Not sure what you mean by "import".  What are you starting with?  What 
do you want to end up with?

Duncan Murdoch


From murdoch.duncan at gmail.com  Thu May 11 15:49:47 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 11 May 2017 09:49:47 -0400
Subject: [R-pkg-devel] Re-creating vignettes after update of data or
 different mechanism to create reports?
In-Reply-To: <37DB3CD0-887A-435C-A601-B7A4AEDF4973@krugs.de>
References: <37DB3CD0-887A-435C-A601-B7A4AEDF4973@krugs.de>
Message-ID: <88b2508b-80ee-6efc-336e-c99289286428@gmail.com>

On 11/05/2017 8:31 AM, Rainer Krug wrote:
> Hi
>
> I am building two packages:
>
> - a data package which contains the data and function to extract it (several datasets, linked, like an sql database) and
> - an analysis package which contains functions to analyse the data in the data package and depends on the data package.
>
> The data package is updated often as the data is updated regularly, while the analysis package will (hopefully) be more static.
>
> Now I created a report which I put in the vignette of the analysis package, which works nicely and the report is created when the analysis package is installed, but when the data package is updated, the user has to re-install the analysis package to re-create the report (vignette) of the updated dataset.
>
> I know that I am abusing the vignette, but it works nicely.
>
> My question:  Is there a way of re-creating the vignette by a user after they installed a newer version of the data package, or is there a better way of creating the report(s)?

1.  No, if the analysis package isn't changed, it won't automatically 
update.

2.  Why not put the vignette in the data package?  Then it will be 
consistent with the data in that package.

Duncan Murdoch


From ujjwalsas9 at gmail.com  Thu May 11 15:54:45 2017
From: ujjwalsas9 at gmail.com (ujjwal anand)
Date: Thu, 11 May 2017 15:54:45 +0200
Subject: [R-pkg-devel] Guidance on importind multiple text files for
	@example
In-Reply-To: <6d8a7263-7e31-28af-2823-b5aafa3201b3@gmail.com>
References: <CA+OA9is-BmLMqFxA-uA1NH2xss2bj-bRZngWCDm_k2-va+V_RQ@mail.gmail.com>
 <6d8a7263-7e31-28af-2823-b5aafa3201b3@gmail.com>
Message-ID: <CA+OA9ivqwV97pKstHPTihR9x0KfdYEMK--P8gsZehrvY=D_xPg@mail.gmail.com>

Hi,
I am creating a function ftsc(x)
where x is given by:
x<-cname <- file.path("C:/Users/anand/Desktop/Internship", "dataftc")
In the dataftc folder I have stored all the text files to be clustered by
my function.
So, while creating the package I have to include an example and that is my
problem.
I am not able to define a path for data folder in @example.
So, please let me know if you have some ideas about it.

Thanks & regards,
Ujjwal

On Thu, May 11, 2017 at 3:47 PM, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 11/05/2017 6:42 AM, ujjwal anand wrote:
>
>> Hello Sir/Ma'am,
>>
>> I am trying to build a package on R. But my function, which takes a folder
>> full of text files as an argument.
>> So, could you please share some ideas on how to import a folder (which
>> contains multiple text files) for "@example".
>>
>
> Not sure what you mean by "import".  What are you starting with?  What do
> you want to end up with?
>
> Duncan Murdoch
>
>

	[[alternative HTML version deleted]]


From Rainer at krugs.de  Thu May 11 15:55:31 2017
From: Rainer at krugs.de (Rainer Krug)
Date: Thu, 11 May 2017 15:55:31 +0200
Subject: [R-pkg-devel] Re-creating vignettes after update of data or
 different mechanism to create reports?
In-Reply-To: <88b2508b-80ee-6efc-336e-c99289286428@gmail.com>
References: <37DB3CD0-887A-435C-A601-B7A4AEDF4973@krugs.de>
 <88b2508b-80ee-6efc-336e-c99289286428@gmail.com>
Message-ID: <0CD3DE00-8442-455A-BDE5-9D32242DBDC1@krugs.de>


> On 11 May 2017, at 15:49, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> On 11/05/2017 8:31 AM, Rainer Krug wrote:
>> Hi
>> 
>> I am building two packages:
>> 
>> - a data package which contains the data and function to extract it (several datasets, linked, like an sql database) and
>> - an analysis package which contains functions to analyse the data in the data package and depends on the data package.
>> 
>> The data package is updated often as the data is updated regularly, while the analysis package will (hopefully) be more static.
>> 
>> Now I created a report which I put in the vignette of the analysis package, which works nicely and the report is created when the analysis package is installed, but when the data package is updated, the user has to re-install the analysis package to re-create the report (vignette) of the updated dataset.
>> 
>> I know that I am abusing the vignette, but it works nicely.
>> 
>> My question:  Is there a way of re-creating the vignette by a user after they installed a newer version of the data package, or is there a better way of creating the report(s)?
> 
> 1.  No, if the analysis package isn't changed, it won't automatically update.

Yes - but can I initiate a rebuild by issuing a command in R like

rebuild_vignette()

to enable the user to rebuild the vignette?

> 
> 2.  Why not put the vignette in the data package?  Then it will be consistent with the data in that package.

The vignette (which is a report) depends on functions in the Analysis package - so I would have circular dependencies - but I could actually invert the dependencies...

> 
> Duncan Murdoch
> 

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

University of Z?rich

Cell:       +41 (0)78 630 66 57

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20170511/f1224168/attachment.sig>

From kamvarz at science.oregonstate.edu  Thu May 11 15:56:05 2017
From: kamvarz at science.oregonstate.edu (Zhian Kamvar)
Date: Thu, 11 May 2017 08:56:05 -0500
Subject: [R-pkg-devel] Guidance on importind multiple text files for
 @example
In-Reply-To: <CA+OA9ivqwV97pKstHPTihR9x0KfdYEMK--P8gsZehrvY=D_xPg@mail.gmail.com>
References: <CA+OA9is-BmLMqFxA-uA1NH2xss2bj-bRZngWCDm_k2-va+V_RQ@mail.gmail.com>
 <6d8a7263-7e31-28af-2823-b5aafa3201b3@gmail.com>
 <CA+OA9ivqwV97pKstHPTihR9x0KfdYEMK--P8gsZehrvY=D_xPg@mail.gmail.com>
Message-ID: <97B8C924-C8F3-4C02-A347-04B7DD6A6BB5@science.oregonstate.edu>

I sent this earlier, but from a different email and it bounced on the list:

You might try placing a directory (e.g. foo) of a few small dummy text files in inst/ and then in the example use:

system.file("foo")

as the input to your example.

That being said, system.file() often confuses users, so some authors have taken to wrapping that in a separate function like foo_example().

HTH,
Zhian

-----
Zhian N. Kamvar, Ph. D.
Postdoctoral Researcher (Everhart Lab)
Department of Plant Pathology
University of Nebraska-Lincoln


> On May 11, 2017, at 08:54 , ujjwal anand <ujjwalsas9 at gmail.com> wrote:
> 
> Hi,
> I am creating a function ftsc(x)
> where x is given by:
> x<-cname <- file.path("C:/Users/anand/Desktop/Internship", "dataftc")
> In the dataftc folder I have stored all the text files to be clustered by
> my function.
> So, while creating the package I have to include an example and that is my
> problem.
> I am not able to define a path for data folder in @example.
> So, please let me know if you have some ideas about it.
> 
> Thanks & regards,
> Ujjwal
> 
> On Thu, May 11, 2017 at 3:47 PM, Duncan Murdoch <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>>
> wrote:
> 
>> On 11/05/2017 6:42 AM, ujjwal anand wrote:
>> 
>>> Hello Sir/Ma'am,
>>> 
>>> I am trying to build a package on R. But my function, which takes a folder
>>> full of text files as an argument.
>>> So, could you please share some ideas on how to import a folder (which
>>> contains multiple text files) for "@example".
>>> 
>> 
>> Not sure what you mean by "import".  What are you starting with?  What do
>> you want to end up with?
>> 
>> Duncan Murdoch
>> 
>> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>

	[[alternative HTML version deleted]]


From ujjwalsas9 at gmail.com  Thu May 11 15:56:26 2017
From: ujjwalsas9 at gmail.com (ujjwal anand)
Date: Thu, 11 May 2017 15:56:26 +0200
Subject: [R-pkg-devel] Guidance on importind multiple text files for
	@example
In-Reply-To: <CA+OA9ivqwV97pKstHPTihR9x0KfdYEMK--P8gsZehrvY=D_xPg@mail.gmail.com>
References: <CA+OA9is-BmLMqFxA-uA1NH2xss2bj-bRZngWCDm_k2-va+V_RQ@mail.gmail.com>
 <6d8a7263-7e31-28af-2823-b5aafa3201b3@gmail.com>
 <CA+OA9ivqwV97pKstHPTihR9x0KfdYEMK--P8gsZehrvY=D_xPg@mail.gmail.com>
Message-ID: <CA+OA9isdN+D-KiAFtAtJgfE8ysSfV=kq4v-w-AyVqOvxXPd9vw@mail.gmail.com>

sorry , my bad!

its,
x<-file.path("C:/Users/anand/Desktop/Internship", "dataftc")

Thanks,
Ujjwal

On Thu, May 11, 2017 at 3:54 PM, ujjwal anand <ujjwalsas9 at gmail.com> wrote:

> Hi,
> I am creating a function ftsc(x)
> where x is given by:
> x<-cname <- file.path("C:/Users/anand/Desktop/Internship", "dataftc")
> In the dataftc folder I have stored all the text files to be clustered by
> my function.
> So, while creating the package I have to include an example and that is my
> problem.
> I am not able to define a path for data folder in @example.
> So, please let me know if you have some ideas about it.
>
> Thanks & regards,
> Ujjwal
>
> On Thu, May 11, 2017 at 3:47 PM, Duncan Murdoch <murdoch.duncan at gmail.com>
> wrote:
>
>> On 11/05/2017 6:42 AM, ujjwal anand wrote:
>>
>>> Hello Sir/Ma'am,
>>>
>>> I am trying to build a package on R. But my function, which takes a
>>> folder
>>> full of text files as an argument.
>>> So, could you please share some ideas on how to import a folder (which
>>> contains multiple text files) for "@example".
>>>
>>
>> Not sure what you mean by "import".  What are you starting with?  What do
>> you want to end up with?
>>
>> Duncan Murdoch
>>
>>
>

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Thu May 11 19:05:42 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 11 May 2017 13:05:42 -0400
Subject: [R-pkg-devel] Guidance on importind multiple text files for
 @example
In-Reply-To: <97B8C924-C8F3-4C02-A347-04B7DD6A6BB5@science.oregonstate.edu>
References: <CA+OA9is-BmLMqFxA-uA1NH2xss2bj-bRZngWCDm_k2-va+V_RQ@mail.gmail.com>
 <6d8a7263-7e31-28af-2823-b5aafa3201b3@gmail.com>
 <CA+OA9ivqwV97pKstHPTihR9x0KfdYEMK--P8gsZehrvY=D_xPg@mail.gmail.com>
 <97B8C924-C8F3-4C02-A347-04B7DD6A6BB5@science.oregonstate.edu>
Message-ID: <3c88e10c-d739-a3eb-1f81-a00ce51f7f47@gmail.com>

On 11/05/2017 9:56 AM, Zhian Kamvar wrote:
> I sent this earlier, but from a different email and it bounced on the list:
>
> You might try placing a directory (e.g. foo) of a few small dummy text
> files in inst/ and then in the example use:
>
> system.file("foo")
>
> as the input to your example.

That's the right idea, though I would list the package name explicitly 
in the system.file() call, e.g.

datafolder <- system.file("foo", package = "bar")

>
> That being said, system.file() often confuses users, so some authors
> have taken to wrapping that in a separate function like foo_example().

I'd say it's better to show users how to find the folder, rather than 
hiding that where they can't see it.  Examples should be for learning, 
not just to produce magic output.

Duncan Murdoch

>
> HTH,
> Zhian
>
> -----
> Zhian N. Kamvar, Ph. D.
> Postdoctoral Researcher (Everhart Lab)
> Department of Plant Pathology
> University of Nebraska-Lincoln
>
>
>> On May 11, 2017, at 08:54 , ujjwal anand <ujjwalsas9 at gmail.com
>> <mailto:ujjwalsas9 at gmail.com>> wrote:
>>
>> Hi,
>> I am creating a function ftsc(x)
>> where x is given by:
>> x<-cname <- file.path("C:/Users/anand/Desktop/Internship", "dataftc")
>> In the dataftc folder I have stored all the text files to be clustered by
>> my function.
>> So, while creating the package I have to include an example and that is my
>> problem.
>> I am not able to define a path for data folder in @example.
>> So, please let me know if you have some ideas about it.
>>
>> Thanks & regards,
>> Ujjwal
>>
>> On Thu, May 11, 2017 at 3:47 PM, Duncan Murdoch
>> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>>
>> wrote:
>>
>>> On 11/05/2017 6:42 AM, ujjwal anand wrote:
>>>
>>>> Hello Sir/Ma'am,
>>>>
>>>> I am trying to build a package on R. But my function, which takes a
>>>> folder
>>>> full of text files as an argument.
>>>> So, could you please share some ideas on how to import a folder (which
>>>> contains multiple text files) for "@example".
>>>>
>>>
>>> Not sure what you mean by "import".  What are you starting with?  What do
>>> you want to end up with?
>>>
>>> Duncan Murdoch
>>>
>>>
>>
>> [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org
>> <mailto:R-package-devel at r-project.org> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From neal.p.richardson at gmail.com  Thu May 11 19:56:23 2017
From: neal.p.richardson at gmail.com (Neal Richardson)
Date: Thu, 11 May 2017 10:56:23 -0700
Subject: [R-pkg-devel] [patch] R CMD check when there are no .Rd examples
In-Reply-To: <ca00c6e9-282c-f03a-e984-1d7bf0dd12ba@statistik.tu-dortmund.de>
References: <CAOCv4hgRkN2mRvrFc5+-Gsvcktif7wn6ibXau3t6-oE8Fu7o0Q@mail.gmail.com>
 <ca00c6e9-282c-f03a-e984-1d7bf0dd12ba@statistik.tu-dortmund.de>
Message-ID: <CAOCv4hj3VZLKkMKuSTPngH_V8c6R6K5i0WH12pXiW8SRsO6+Mw@mail.gmail.com>

Thanks for the explanation. Is it possible for R CMD check to
distinguish between packages for which examples do or do not make
sense, and raise a "Note" as appropriate?

I really don't mean to make a big issue out of this particular (soft)
requirement--it was easy enough for you to spot and easy enough for me
to fix. But, this is the third or fourth time over the last few years
that I've submitted a package that passes R CMD check but have had to
revise and resubmit due to a similar minor requirement. I rely on
automation and tools, particularly R CMD check, to enforce
requirements so that I don't have to remember all of the subtleties of
"Writing R Extensions" and other policies. Yet, I now have a growing
list of additional checks that I have to remember to go through before
submitting, and it's easy to forget.

If 'R CMD check --as-cran' passes and CRAN rejects, it seems that the
tool is incomplete, and if it's feasible to improve it, we should. I'm
happy to try to prepare a different patch that better encapsulates
this particular policy.

Neal

On Wed, May 10, 2017 at 9:59 AM, Uwe Ligges
<ligges at statistik.tu-dortmund.de> wrote:
> There are packages where examples do not make sense, hence we do not
> generally reject such packages.
>
> But if adding examples are reasonable we ask for them.
>
> Best,
> Uwe Ligges
>
>
>
>
> On 10.05.2017 17:28, Neal Richardson wrote:
>>
>> Hi,
>> Last week I submitted a new package to CRAN, and it was rejected
>> because there were no examples in any of the man pages. That's a
>> reasonable requirement--I just didn't know it was one. When I looked
>> back at the R CMD check results locally, I saw
>>
>>     * checking examples ... NONE
>>
>> but the run still finished with
>>
>>     Status: OK
>>
>> so I believed that my package was good. The package did have usage
>> examples in the test suite and on the readme file, and it was no
>> problem to copy the examples over to a man page and resubmit. But it
>> seemed like an unfortunate and avoidable waste of the CRAN
>> maintainers' time to have to ask for revisions and review again.
>>
>> I read the source and saw that the requirement around .Rd examples
>> that R CMD check does enforce is only when there are no examples, no
>> vignettes, and no tests
>>
>> (https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R#L5100-L5117).
>> The attached one-line patch makes the check for .Rd examples now log a
>> "Note" rather than just print "NONE". Running it against my package
>> without man-page examples, it shows
>>
>>     * checking examples ... NOTE
>>     No examples
>>
>> and ends with
>>
>>     Status: 1 NOTE
>>
>> which should be enough to remind package authors to address it before
>> submitting to CRAN.
>>
>> Thanks for considering this patch.
>>
>> Neal
>>
>> P.S. Since this is an issue about CRAN policy and package development,
>> I thought R-package-devel was the appropriate list to email, but
>> please let me know if I should send the patch to R-devel instead.
>>
>>
>> patch.diff
>>
>>
>> Index: src/library/tools/R/check.R
>> ===================================================================
>> --- src/library/tools/R/check.R (revision 72665)
>> +++ src/library/tools/R/check.R (working copy)
>> @@ -2868,7 +2868,7 @@
>>                                   " check also with --run-donttest\n")
>>                  }
>>              } else {
>> -                resultLog(Log, "NONE")
>> +                noteLog(Log, "No examples")
>>                  no_examples <<- TRUE
>>              }
>>          }
>>
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>


From davidhughjones at gmail.com  Sun May 14 11:31:40 2017
From: davidhughjones at gmail.com (David Hugh-Jones)
Date: Sun, 14 May 2017 10:31:40 +0100
Subject: [R-pkg-devel] large vignette
Message-ID: <CAARY7kiEh4njn-wvQY+LQYRpBBwdyZwbW0KsATw6==0hXcFgNg@mail.gmail.com>

Hi guys

I have a vignette for my anim.plots package, which is inevitably very large
as it demonstrates many animations. I'd like to include the .Rmd file, but
not the
pre-built HTML and image files. Then I'll have a short stub vignette which
tells the user how to build the real vignette him or herself.

What would be the best place to put the .Rmd file? In "inst/doc"?

Cheers,
David

	[[alternative HTML version deleted]]


From Christopher.Lalansingh at oicr.on.ca  Mon May 15 18:09:08 2017
From: Christopher.Lalansingh at oicr.on.ca (Christopher Lalansingh)
Date: Mon, 15 May 2017 16:09:08 +0000
Subject: [R-pkg-devel] doMC dependency
Message-ID: <494aaed2c9de40398835709fbe139682@oicr.on.ca>

Hi everyone,


I'm preparing to release a package which uses doMC for parallelization in certain functions. I've used require(doMC) to specify this for these functions, and importFrom("doMC", "registerDoMC") in my NAMESPACE.


I ran all the R CMD --as-cran checks under 3.4.0 and R-devel on Debian 8 sucessfully, but when I submitted to CRAN the package failed when built on Windows. This is because doMC is not available for Windows. It was recommended by Uwe Ligges that I move doMC to "Suggests", but since doMC is required for functions in my package this does not seem to work:


* checking package dependencies ... ERROR
Namespace dependency not required: 'doMC'


Is there a way to keep doMC in 'Suggests' by changing how I attach/load doMC in my package?


Thanks for your help,


Christopher Lalansingh
Software Engineer


Ontario Institute for Cancer Research
MaRS Centre, South Tower
101 College Street, Suite 800
Toronto, Ontario, Canada M5G 0A3



Toll-free: 1-866-678-6427

Twitter: @OICR_news<https://webmail.oicr.on.ca/owa/redir.aspx?C=MA7-a3CvAEG5RdsDMIcBK_o6Usmud9AIx_-tz-3Es_08qcyqPQSaa-TKX-K3aGfgEn8rFENGNrs.&URL=http%3a%2f%2fwww.twitter.com%2fOICR_news>
www.oicr.on.ca<https://webmail.oicr.on.ca/owa/redir.aspx?C=MA7-a3CvAEG5RdsDMIcBK_o6Usmud9AIx_-tz-3Es_08qcyqPQSaa-TKX-K3aGfgEn8rFENGNrs.&URL=http%3a%2f%2fwww.oicr.on.ca>



This message and any attachments may contain confidentia...{{dropped:12}}


From davidhughjones at gmail.com  Mon May 15 21:00:06 2017
From: davidhughjones at gmail.com (David Hugh-Jones)
Date: Mon, 15 May 2017 19:00:06 +0000
Subject: [R-pkg-devel] doMC dependency
In-Reply-To: <494aaed2c9de40398835709fbe139682@oicr.on.ca>
References: <494aaed2c9de40398835709fbe139682@oicr.on.ca>
Message-ID: <CAARY7kjcEJKdJ+zTQRoU8-OFREADoMLBnNrYGjpi8dPHsVThiA@mail.gmail.com>

>From what you say it sounds as if your package fails on Windows because,
well, it doesn't work on Windows, given that doMC isn't available. Trying
to hide that would seem weird. Does CRAN insist that all packages should
work on all platforms?

On Mon, 15 May 2017 at 19:40, Christopher Lalansingh <
Christopher.Lalansingh at oicr.on.ca> wrote:

> Hi everyone,
>
>
> I'm preparing to release a package which uses doMC for parallelization in
> certain functions. I've used require(doMC) to specify this for these
> functions, and importFrom("doMC", "registerDoMC") in my NAMESPACE.
>
>
> I ran all the R CMD --as-cran checks under 3.4.0 and R-devel on Debian 8
> sucessfully, but when I submitted to CRAN the package failed when built on
> Windows. This is because doMC is not available for Windows. It was
> recommended by Uwe Ligges that I move doMC to "Suggests", but since doMC is
> required for functions in my package this does not seem to work:
>
>
> * checking package dependencies ... ERROR
> Namespace dependency not required: 'doMC'
>
>
> Is there a way to keep doMC in 'Suggests' by changing how I attach/load
> doMC in my package?
>
>
> Thanks for your help,
>
>
> Christopher Lalansingh
> Software Engineer
>
>
> Ontario Institute for Cancer Research
> MaRS Centre, South Tower
> 101 College Street, Suite 800
> Toronto, Ontario, Canada M5G 0A3
>
>
>
> Toll-free: 1-866-678-6427
>
> Twitter: @OICR_news<
> https://webmail.oicr.on.ca/owa/redir.aspx?C=MA7-a3CvAEG5RdsDMIcBK_o6Usmud9AIx_-tz-3Es_08qcyqPQSaa-TKX-K3aGfgEn8rFENGNrs.&URL=http%3a%2f%2fwww.twitter.com%2fOICR_news
> >
> www.oicr.on.ca<
> https://webmail.oicr.on.ca/owa/redir.aspx?C=MA7-a3CvAEG5RdsDMIcBK_o6Usmud9AIx_-tz-3Es_08qcyqPQSaa-TKX-K3aGfgEn8rFENGNrs.&URL=http%3a%2f%2fwww.oicr.on.ca
> >
>
>
>
> This message and any attachments may contain confident...{{dropped:12}}


From ligges at statistik.tu-dortmund.de  Mon May 15 21:02:45 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Mon, 15 May 2017 21:02:45 +0200
Subject: [R-pkg-devel] doMC dependency
In-Reply-To: <CAARY7kjcEJKdJ+zTQRoU8-OFREADoMLBnNrYGjpi8dPHsVThiA@mail.gmail.com>
References: <494aaed2c9de40398835709fbe139682@oicr.on.ca>
 <CAARY7kjcEJKdJ+zTQRoU8-OFREADoMLBnNrYGjpi8dPHsVThiA@mail.gmail.com>
Message-ID: <d11efcc0-0722-fff5-ca21-87908fe381bb@statistik.tu-dortmund.de>

The question is why you want to make doMC an hard install time  dependency.

Better make it optional (via Suggests) and provide different 
parallelization mechanisms on platforms where doMC is unavailable.

Best,
Uwe Ligges




On 15.05.2017 21:00, David Hugh-Jones wrote:
> From what you say it sounds as if your package fails on Windows because,
> well, it doesn't work on Windows, given that doMC isn't available. Trying
> to hide that would seem weird. Does CRAN insist that all packages should
> work on all platforms?
>
> On Mon, 15 May 2017 at 19:40, Christopher Lalansingh <
> Christopher.Lalansingh at oicr.on.ca> wrote:
>
>> Hi everyone,
>>
>>
>> I'm preparing to release a package which uses doMC for parallelization in
>> certain functions. I've used require(doMC) to specify this for these
>> functions, and importFrom("doMC", "registerDoMC") in my NAMESPACE.
>>
>>
>> I ran all the R CMD --as-cran checks under 3.4.0 and R-devel on Debian 8
>> sucessfully, but when I submitted to CRAN the package failed when built on
>> Windows. This is because doMC is not available for Windows. It was
>> recommended by Uwe Ligges that I move doMC to "Suggests", but since doMC is
>> required for functions in my package this does not seem to work:
>>
>>
>> * checking package dependencies ... ERROR
>> Namespace dependency not required: 'doMC'
>>
>>
>> Is there a way to keep doMC in 'Suggests' by changing how I attach/load
>> doMC in my package?
>>
>>
>> Thanks for your help,
>>
>>
>> Christopher Lalansingh
>> Software Engineer
>>
>>
>> Ontario Institute for Cancer Research
>> MaRS Centre, South Tower
>> 101 College Street, Suite 800
>> Toronto, Ontario, Canada M5G 0A3
>>
>>
>>
>> Toll-free: 1-866-678-6427
>>
>> Twitter: @OICR_news<
>> https://webmail.oicr.on.ca/owa/redir.aspx?C=MA7-a3CvAEG5RdsDMIcBK_o6Usmud9AIx_-tz-3Es_08qcyqPQSaa-TKX-K3aGfgEn8rFENGNrs.&URL=http%3a%2f%2fwww.twitter.com%2fOICR_news
>>>
>> www.oicr.on.ca<
>> https://webmail.oicr.on.ca/owa/redir.aspx?C=MA7-a3CvAEG5RdsDMIcBK_o6Usmud9AIx_-tz-3Es_08qcyqPQSaa-TKX-K3aGfgEn8rFENGNrs.&URL=http%3a%2f%2fwww.oicr.on.ca
>>>
>>
>>
>>
>> This message and any attachments may contain confident...{{dropped:12}}
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From brian at braverock.com  Mon May 15 21:04:10 2017
From: brian at braverock.com (Brian G. Peterson)
Date: Mon, 15 May 2017 14:04:10 -0500
Subject: [R-pkg-devel] doMC dependency
In-Reply-To: <494aaed2c9de40398835709fbe139682@oicr.on.ca>
References: <494aaed2c9de40398835709fbe139682@oicr.on.ca>
Message-ID: <1494875050.21909.3.camel@braverock.com>

On Mon, 2017-05-15 at 16:09 +0000, Christopher Lalansingh wrote:
> Hi everyone,
> 
> 
> I'm preparing to release a package which uses doMC for
> parallelization in certain functions. I've used require(doMC) to
> specify this for these functions, and importFrom("doMC",
> "registerDoMC") in my NAMESPACE.
> 
> 
> I ran all the R CMD --as-cran checks under 3.4.0 and R-devel on
> Debian 8 sucessfully, but when I submitted to CRAN the package failed
> when built on Windows. This is because doMC is not available for
> Windows. It was recommended by Uwe Ligges that I move doMC to
> "Suggests", but since doMC is required for functions in my package
> this does not seem to work:

I'd suggest using doParallel instead of doMC if you want your package
to work on Windows too.  the 'parallel' package uses forking clusters
on *nix and TCP/snow style clusters on Windows. ?

You'll need to do a little work to detect things, or give users
instructions for initializing a cluster, but it should work. 


> * checking package dependencies ... ERROR
> Namespace dependency not required: 'doMC'
> 
> 
> Is there a way to keep doMC in 'Suggests' by changing how I
> attach/load doMC in my package?


From maxime.turgeon at mail.mcgill.ca  Mon May 15 21:08:54 2017
From: maxime.turgeon at mail.mcgill.ca (Maxime Turgeon)
Date: Mon, 15 May 2017 19:08:54 +0000
Subject: [R-pkg-devel] doMC dependency
In-Reply-To: <1494875050.21909.3.camel@braverock.com>
References: <494aaed2c9de40398835709fbe139682@oicr.on.ca>,
 <1494875050.21909.3.camel@braverock.com>
Message-ID: <CY1PR03MB1359433660821326455F12FDBAE10@CY1PR03MB1359.namprd03.prod.outlook.com>

If you look at the CRAN page for the package doMC, you'll notice that in the reverse dependencies, there are only "reverse suggests" and "reverse enhances" (no "reverse depends"). Looking at the source code for some of the packages in "reverse suggests" should give you an answer to your question.


Max

________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Brian G. Peterson <brian at braverock.com>
Sent: May 15, 2017 3:04:10 PM
To: Christopher Lalansingh; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] doMC dependency

On Mon, 2017-05-15 at 16:09 +0000, Christopher Lalansingh wrote:
> Hi everyone,
>
>
> I'm preparing to release a package which uses doMC for
> parallelization in certain functions. I've used require(doMC) to
> specify this for these functions, and importFrom("doMC",
> "registerDoMC") in my NAMESPACE.
>
>
> I ran all the R CMD --as-cran checks under 3.4.0 and R-devel on
> Debian 8 sucessfully, but when I submitted to CRAN the package failed
> when built on Windows. This is because doMC is not available for
> Windows. It was recommended by Uwe Ligges that I move doMC to
> "Suggests", but since doMC is required for functions in my package
> this does not seem to work:

I'd suggest using doParallel instead of doMC if you want your package
to work on Windows too.  the 'parallel' package uses forking clusters
on *nix and TCP/snow style clusters on Windows.

You'll need to do a little work to detect things, or give users
instructions for initializing a cluster, but it should work.


> * checking package dependencies ... ERROR
> Namespace dependency not required: 'doMC'
>
>
> Is there a way to keep doMC in 'Suggests' by changing how I
> attach/load doMC in my package?

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From patrick.schratz at gmail.com  Tue May 16 10:19:18 2017
From: patrick.schratz at gmail.com (Patrick Schratz)
Date: Tue, 16 May 2017 10:19:18 +0200
Subject: [R-pkg-devel] doMC dependency
In-Reply-To: <d11efcc0-0722-fff5-ca21-87908fe381bb@statistik.tu-dortmund.de>
References: <494aaed2c9de40398835709fbe139682@oicr.on.ca>
 <CAARY7kjcEJKdJ+zTQRoU8-OFREADoMLBnNrYGjpi8dPHsVThiA@mail.gmail.com>
 <d11efcc0-0722-fff5-ca21-87908fe381bb@statistik.tu-dortmund.de>
Message-ID: <54e70839-ef00-49f7-89a0-56fcc8791289@Spark>

Check the pbapply package for cross-platform apply* parallelization. Also 'future' might be worth a look (by Henrik Bengtson) although I haven't taken a closer look at it yet.

On 15. May 2017, 21:09 +0200, Uwe Ligges <ligges at statistik.tu-dortmund.de>, wrote:
> The question is why you want to make doMC an hard install time dependency.
>
> Better make it optional (via Suggests) and provide different
> parallelization mechanisms on platforms where doMC is unavailable.
>
> Best,
> Uwe Ligges
>
>
>
>
> On 15.05.2017 21:00, David Hugh-Jones wrote:
> > From what you say it sounds as if your package fails on Windows because,
> > well, it doesn't work on Windows, given that doMC isn't available. Trying
> > to hide that would seem weird. Does CRAN insist that all packages should
> > work on all platforms?
> >
> > On Mon, 15 May 2017 at 19:40, Christopher Lalansingh <
> > Christopher.Lalansingh at oicr.on.ca> wrote:
> >
> > > Hi everyone,
> > >
> > >
> > > I'm preparing to release a package which uses doMC for parallelization in
> > > certain functions. I've used require(doMC) to specify this for these
> > > functions, and importFrom("doMC", "registerDoMC") in my NAMESPACE.
> > >
> > >
> > > I ran all the R CMD --as-cran checks under 3.4.0 and R-devel on Debian 8
> > > sucessfully, but when I submitted to CRAN the package failed when built on
> > > Windows. This is because doMC is not available for Windows. It was
> > > recommended by Uwe Ligges that I move doMC to "Suggests", but since doMC is
> > > required for functions in my package this does not seem to work:
> > >
> > >
> > > * checking package dependencies ... ERROR
> > > Namespace dependency not required: 'doMC'
> > >
> > >
> > > Is there a way to keep doMC in 'Suggests' by changing how I attach/load
> > > doMC in my package?
> > >
> > >
> > > Thanks for your help,
> > >
> > >
> > > Christopher Lalansingh
> > > Software Engineer
> > >
> > >
> > > Ontario Institute for Cancer Research
> > > MaRS Centre, South Tower
> > > 101 College Street, Suite 800
> > > Toronto, Ontario, Canada M5G 0A3
> > >
> > >
> > >
> > > Toll-free: 1-866-678-6427 (tel:1-866-678-6427)
> > >
> > > Twitter: @OICR_news<
> > > https://webmail.oicr.on.ca/owa/redir.aspx?C=MA7-a3CvAEG5RdsDMIcBK_o6Usmud9AIx_-tz-3Es_08qcyqPQSaa-TKX-K3aGfgEn8rFENGNrs.&URL=http%3a%2f%2fwww.twitter.com%2fOICR_news
> > > >
> > > www.oicr.on.ca<
> > > https://webmail.oicr.on.ca/owa/redir.aspx?C=MA7-a3CvAEG5RdsDMIcBK_o6Usmud9AIx_-tz-3Es_08qcyqPQSaa-TKX-K3aGfgEn8rFENGNrs.&URL=http%3a%2f%2fwww.oicr.on.ca
> > > >
> > >
> > >
> > >
> > > This message and any attachments may contain confident...{{dropped:12}}
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From jon at thon.cc  Tue May 16 13:12:33 2017
From: jon at thon.cc (Jonathon Love)
Date: Tue, 16 May 2017 21:12:33 +1000
Subject: [R-pkg-devel] package installation fails due to missing package not
 listed in NAMESPACE
Message-ID: <37bb0883-e2e2-128f-1b14-86983f7cc684@thon.love>

hi,

i'm receiving failures on the winbuilder, with it complaining that 
ggplot2 can not be found:

https://win-builder.r-project.org/incoming_pretest/170516_125043_jmvcore_055/00install.out

now there are some mentions of ggplot2 in our code (but none in our 
NAMESPACE, we always use the full namespace when calling functions: 
`ggplot2::ggplot()`), allowing people to pass in ggplot2 themes and for 
them to be handled correctly, but packages that build on jmvcore don't 
*need* to use ggplot2. so we've been able to avoid adding it as an 
import, which is great, because ggplot2 brings quite a few dependencies.

our code works as intended, passes all tests with `R CMD check --as-cran 
jmvcore`, etc.

however the win-builder is pinging us.

is there a way around this?

with thanks

jonathon


From thierry.onkelinx at inbo.be  Tue May 16 13:21:05 2017
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Tue, 16 May 2017 13:21:05 +0200
Subject: [R-pkg-devel] package installation fails due to missing package
 not listed in NAMESPACE
In-Reply-To: <37bb0883-e2e2-128f-1b14-86983f7cc684@thon.love>
References: <37bb0883-e2e2-128f-1b14-86983f7cc684@thon.love>
Message-ID: <CAJuCY5ybqo=pMkkgUjvprvv502_D8TgBRC7EDvgE051-CVjA9g@mail.gmail.com>

Dear Jonathon,

Is ggplot2 listed in the DESCRIPTION file? It needs to be at least in the
Suggests:

Best regards,

Thierry

ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature and
Forest
team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
Kliniekstraat 25
1070 Anderlecht
Belgium

To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey

2017-05-16 13:12 GMT+02:00 Jonathon Love <jon at thon.cc>:

> hi,
>
> i'm receiving failures on the winbuilder, with it complaining that ggplot2
> can not be found:
>
> https://win-builder.r-project.org/incoming_pretest/170516_12
> 5043_jmvcore_055/00install.out
>
> now there are some mentions of ggplot2 in our code (but none in our
> NAMESPACE, we always use the full namespace when calling functions:
> `ggplot2::ggplot()`), allowing people to pass in ggplot2 themes and for
> them to be handled correctly, but packages that build on jmvcore don't
> *need* to use ggplot2. so we've been able to avoid adding it as an import,
> which is great, because ggplot2 brings quite a few dependencies.
>
> our code works as intended, passes all tests with `R CMD check --as-cran
> jmvcore`, etc.
>
> however the win-builder is pinging us.
>
> is there a way around this?
>
> with thanks
>
> jonathon
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From jon at thon.cc  Tue May 16 13:22:53 2017
From: jon at thon.cc (Jonathon Love)
Date: Tue, 16 May 2017 21:22:53 +1000
Subject: [R-pkg-devel] package installation fails due to missing package
 not listed in NAMESPACE
In-Reply-To: <CAJuCY5ybqo=pMkkgUjvprvv502_D8TgBRC7EDvgE051-CVjA9g@mail.gmail.com>
References: <37bb0883-e2e2-128f-1b14-86983f7cc684@thon.love>
 <CAJuCY5ybqo=pMkkgUjvprvv502_D8TgBRC7EDvgE051-CVjA9g@mail.gmail.com>
Message-ID: <047e465a-c844-2a23-1746-8d8dd52aa675@thon.love>

yes, sorry, crucial piece of information i forgot to mention.

ggplot2 *is* in suggests.

with thanks

jonathon


On 16/5/17 21:21, Thierry Onkelinx wrote:
> Dear Jonathon,
>
> Is ggplot2 listed in the DESCRIPTION file? It needs to be at least in 
> the Suggests:
>
> Best regards,
>
> Thierry
>
> ir. Thierry Onkelinx
> Instituut voor natuur- en bosonderzoek / Research Institute for Nature 
> and Forest
> team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
> Kliniekstraat 25
> 1070 Anderlecht
> Belgium
>
> To call in the statistician after the experiment is done may be no 
> more than asking him to perform a post-mortem examination: he may be 
> able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
> The plural of anecdote is not data. ~ Roger Brinner
> The combination of some data and an aching desire for an answer does 
> not ensure that a reasonable answer can be extracted from a given body 
> of data. ~ John Tukey
>
> 2017-05-16 13:12 GMT+02:00 Jonathon Love <jon at thon.cc 
> <mailto:jon at thon.cc>>:
>
>     hi,
>
>     i'm receiving failures on the winbuilder, with it complaining that
>     ggplot2 can not be found:
>
>     https://win-builder.r-project.org/incoming_pretest/170516_125043_jmvcore_055/00install.out
>     <https://win-builder.r-project.org/incoming_pretest/170516_125043_jmvcore_055/00install.out>
>
>     now there are some mentions of ggplot2 in our code (but none in
>     our NAMESPACE, we always use the full namespace when calling
>     functions: `ggplot2::ggplot()`), allowing people to pass in
>     ggplot2 themes and for them to be handled correctly, but packages
>     that build on jmvcore don't *need* to use ggplot2. so we've been
>     able to avoid adding it as an import, which is great, because
>     ggplot2 brings quite a few dependencies.
>
>     our code works as intended, passes all tests with `R CMD check
>     --as-cran jmvcore`, etc.
>
>     however the win-builder is pinging us.
>
>     is there a way around this?
>
>     with thanks
>
>     jonathon
>
>     ______________________________________________
>     R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>
>


	[[alternative HTML version deleted]]


From thierry.onkelinx at inbo.be  Tue May 16 13:34:22 2017
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Tue, 16 May 2017 13:34:22 +0200
Subject: [R-pkg-devel] package installation fails due to missing package
 not listed in NAMESPACE
In-Reply-To: <047e465a-c844-2a23-1746-8d8dd52aa675@thon.love>
References: <37bb0883-e2e2-128f-1b14-86983f7cc684@thon.love>
 <CAJuCY5ybqo=pMkkgUjvprvv502_D8TgBRC7EDvgE051-CVjA9g@mail.gmail.com>
 <047e465a-c844-2a23-1746-8d8dd52aa675@thon.love>
Message-ID: <CAJuCY5zvPA=rfd+0SNQXeZqgxKTF1rGh-oedLuwHNitLyWTUjQ@mail.gmail.com>

Try adding requireNamespace("ggplot2") in the function that rely on ggplot2.

ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature and
Forest
team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
Kliniekstraat 25
1070 Anderlecht
Belgium

To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey

2017-05-16 13:22 GMT+02:00 Jonathon Love <jon at thon.cc>:

> yes, sorry, crucial piece of information i forgot to mention.
>
> ggplot2 *is* in suggests.
>
> with thanks
>
> jonathon
>
>
> On 16/5/17 21:21, Thierry Onkelinx wrote:
> > Dear Jonathon,
> >
> > Is ggplot2 listed in the DESCRIPTION file? It needs to be at least in
> > the Suggests:
> >
> > Best regards,
> >
> > Thierry
> >
> > ir. Thierry Onkelinx
> > Instituut voor natuur- en bosonderzoek / Research Institute for Nature
> > and Forest
> > team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
> > Kliniekstraat 25
> > 1070 Anderlecht
> > Belgium
> >
> > To call in the statistician after the experiment is done may be no
> > more than asking him to perform a post-mortem examination: he may be
> > able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
> > The plural of anecdote is not data. ~ Roger Brinner
> > The combination of some data and an aching desire for an answer does
> > not ensure that a reasonable answer can be extracted from a given body
> > of data. ~ John Tukey
> >
> > 2017-05-16 13:12 GMT+02:00 Jonathon Love <jon at thon.cc
> > <mailto:jon at thon.cc>>:
> >
> >     hi,
> >
> >     i'm receiving failures on the winbuilder, with it complaining that
> >     ggplot2 can not be found:
> >
> >     https://win-builder.r-project.org/incoming_pretest/170516_
> 125043_jmvcore_055/00install.out
> >     <https://win-builder.r-project.org/incoming_pretest/
> 170516_125043_jmvcore_055/00install.out>
> >
> >     now there are some mentions of ggplot2 in our code (but none in
> >     our NAMESPACE, we always use the full namespace when calling
> >     functions: `ggplot2::ggplot()`), allowing people to pass in
> >     ggplot2 themes and for them to be handled correctly, but packages
> >     that build on jmvcore don't *need* to use ggplot2. so we've been
> >     able to avoid adding it as an import, which is great, because
> >     ggplot2 brings quite a few dependencies.
> >
> >     our code works as intended, passes all tests with `R CMD check
> >     --as-cran jmvcore`, etc.
> >
> >     however the win-builder is pinging us.
> >
> >     is there a way around this?
> >
> >     with thanks
> >
> >     jonathon
> >
> >     ______________________________________________
> >     R-package-devel at r-project.org
> >     <mailto:R-package-devel at r-project.org> mailing list
> >     https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> >
> >
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd at debian.org  Tue May 16 13:52:22 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 16 May 2017 06:52:22 -0500
Subject: [R-pkg-devel] package installation fails due to missing package
 not listed in NAMESPACE
In-Reply-To: <047e465a-c844-2a23-1746-8d8dd52aa675@thon.love>
References: <37bb0883-e2e2-128f-1b14-86983f7cc684@thon.love>
 <CAJuCY5ybqo=pMkkgUjvprvv502_D8TgBRC7EDvgE051-CVjA9g@mail.gmail.com>
 <047e465a-c844-2a23-1746-8d8dd52aa675@thon.love>
Message-ID: <22810.59382.279925.20248@max.eddelbuettel.com>


On 16 May 2017 at 21:22, Jonathon Love wrote:
| yes, sorry, crucial piece of information i forgot to mention.
| 
| ggplot2 *is* in suggests.

Suggests != Depends

The semantics are messed up around R.  If you use Suggests, you really should [1]
test for presence.

Dirk

[1] My preference is for "must" instead but I said my piece many times now.

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From jon at thon.cc  Tue May 16 13:52:22 2017
From: jon at thon.cc (Jonathon Love)
Date: Tue, 16 May 2017 21:52:22 +1000
Subject: [R-pkg-devel] package installation fails due to missing package
 not listed in NAMESPACE
In-Reply-To: <CAJuCY5zvPA=rfd+0SNQXeZqgxKTF1rGh-oedLuwHNitLyWTUjQ@mail.gmail.com>
References: <37bb0883-e2e2-128f-1b14-86983f7cc684@thon.love>
 <CAJuCY5ybqo=pMkkgUjvprvv502_D8TgBRC7EDvgE051-CVjA9g@mail.gmail.com>
 <047e465a-c844-2a23-1746-8d8dd52aa675@thon.love>
 <CAJuCY5zvPA=rfd+0SNQXeZqgxKTF1rGh-oedLuwHNitLyWTUjQ@mail.gmail.com>
Message-ID: <e177c0b3-8565-a7f6-28fb-1ab01f8829a5@thon.love>

hi,

this doesn't seem to make any difference.

but we kinda want the opposite of this. we want the install process to 
know that ggplot2 isn't required.

with thanks

jonathon


On 16/5/17 21:34, Thierry Onkelinx wrote:
> Try adding requireNamespace("ggplot2") in the function that rely on 
> ggplot2.
>
> ir. Thierry Onkelinx
> Instituut voor natuur- en bosonderzoek / Research Institute for Nature 
> and Forest
> team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
> Kliniekstraat 25
> 1070 Anderlecht
> Belgium
>
> To call in the statistician after the experiment is done may be no 
> more than asking him to perform a post-mortem examination: he may be 
> able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
> The plural of anecdote is not data. ~ Roger Brinner
> The combination of some data and an aching desire for an answer does 
> not ensure that a reasonable answer can be extracted from a given body 
> of data. ~ John Tukey
>
> 2017-05-16 13:22 GMT+02:00 Jonathon Love <jon at thon.cc 
> <mailto:jon at thon.cc>>:
>
>     yes, sorry, crucial piece of information i forgot to mention.
>
>     ggplot2 *is* in suggests.
>
>     with thanks
>
>     jonathon
>
>
>     On 16/5/17 21:21, Thierry Onkelinx wrote:
>     > Dear Jonathon,
>     >
>     > Is ggplot2 listed in the DESCRIPTION file? It needs to be at
>     least in
>     > the Suggests:
>     >
>     > Best regards,
>     >
>     > Thierry
>     >
>     > ir. Thierry Onkelinx
>     > Instituut voor natuur- en bosonderzoek / Research Institute for
>     Nature
>     > and Forest
>     > team Biometrie & Kwaliteitszorg / team Biometrics & Quality
>     Assurance
>     > Kliniekstraat 25
>     > 1070 Anderlecht
>     > Belgium
>     >
>     > To call in the statistician after the experiment is done may be no
>     > more than asking him to perform a post-mortem examination: he may be
>     > able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
>     > The plural of anecdote is not data. ~ Roger Brinner
>     > The combination of some data and an aching desire for an answer does
>     > not ensure that a reasonable answer can be extracted from a
>     given body
>     > of data. ~ John Tukey
>     >
>     > 2017-05-16 13:12 GMT+02:00 Jonathon Love <jon at thon.cc
>     > <mailto:jon at thon.cc <mailto:jon at thon.cc>>>:
>     >
>     >     hi,
>     >
>     >     i'm receiving failures on the winbuilder, with it
>     complaining that
>     >     ggplot2 can not be found:
>     >
>     >
>     https://win-builder.r-project.org/incoming_pretest/170516_125043_jmvcore_055/00install.out
>     <https://win-builder.r-project.org/incoming_pretest/170516_125043_jmvcore_055/00install.out>
>     >   
>      <https://win-builder.r-project.org/incoming_pretest/170516_125043_jmvcore_055/00install.out
>     <https://win-builder.r-project.org/incoming_pretest/170516_125043_jmvcore_055/00install.out>>
>     >
>     >     now there are some mentions of ggplot2 in our code (but none in
>     >     our NAMESPACE, we always use the full namespace when calling
>     >     functions: `ggplot2::ggplot()`), allowing people to pass in
>     >     ggplot2 themes and for them to be handled correctly, but
>     packages
>     >     that build on jmvcore don't *need* to use ggplot2. so we've been
>     >     able to avoid adding it as an import, which is great, because
>     >     ggplot2 brings quite a few dependencies.
>     >
>     >     our code works as intended, passes all tests with `R CMD check
>     >     --as-cran jmvcore`, etc.
>     >
>     >     however the win-builder is pinging us.
>     >
>     >     is there a way around this?
>     >
>     >     with thanks
>     >
>     >     jonathon
>     >
>     >     ______________________________________________
>     > R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>     >     <mailto:R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org>> mailing list
>     > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>     >     <https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>>
>     >
>     >
>
>
>             [[alternative HTML version deleted]]
>
>     ______________________________________________
>     R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>
>


	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Tue May 16 13:53:12 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 16 May 2017 07:53:12 -0400
Subject: [R-pkg-devel] package installation fails due to missing package
 not listed in NAMESPACE
In-Reply-To: <CAJuCY5zvPA=rfd+0SNQXeZqgxKTF1rGh-oedLuwHNitLyWTUjQ@mail.gmail.com>
References: <37bb0883-e2e2-128f-1b14-86983f7cc684@thon.love>
 <CAJuCY5ybqo=pMkkgUjvprvv502_D8TgBRC7EDvgE051-CVjA9g@mail.gmail.com>
 <047e465a-c844-2a23-1746-8d8dd52aa675@thon.love>
 <CAJuCY5zvPA=rfd+0SNQXeZqgxKTF1rGh-oedLuwHNitLyWTUjQ@mail.gmail.com>
Message-ID: <9284a1d0-9bc5-e911-cf22-e8b023bb09c0@gmail.com>

On 16/05/2017 7:34 AM, Thierry Onkelinx wrote:
> Try adding requireNamespace("ggplot2") in the function that rely on ggplot2.

That's not enough, even though it might fool the test (I haven't 
checked).  Those functions need to condition on the result, i.e. 
something like

if (requireNamespace("ggplot2")) ggplot2::ggplot()
else  ... (optional warning that you need it) ...

Duncan Murdoch

>
> ir. Thierry Onkelinx
> Instituut voor natuur- en bosonderzoek / Research Institute for Nature and
> Forest
> team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
> Kliniekstraat 25
> 1070 Anderlecht
> Belgium
>
> To call in the statistician after the experiment is done may be no more
> than asking him to perform a post-mortem examination: he may be able to say
> what the experiment died of. ~ Sir Ronald Aylmer Fisher
> The plural of anecdote is not data. ~ Roger Brinner
> The combination of some data and an aching desire for an answer does not
> ensure that a reasonable answer can be extracted from a given body of data.
> ~ John Tukey
>
> 2017-05-16 13:22 GMT+02:00 Jonathon Love <jon at thon.cc>:
>
>> yes, sorry, crucial piece of information i forgot to mention.
>>
>> ggplot2 *is* in suggests.
>>
>> with thanks
>>
>> jonathon
>>
>>
>> On 16/5/17 21:21, Thierry Onkelinx wrote:
>>> Dear Jonathon,
>>>
>>> Is ggplot2 listed in the DESCRIPTION file? It needs to be at least in
>>> the Suggests:
>>>
>>> Best regards,
>>>
>>> Thierry
>>>
>>> ir. Thierry Onkelinx
>>> Instituut voor natuur- en bosonderzoek / Research Institute for Nature
>>> and Forest
>>> team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
>>> Kliniekstraat 25
>>> 1070 Anderlecht
>>> Belgium
>>>
>>> To call in the statistician after the experiment is done may be no
>>> more than asking him to perform a post-mortem examination: he may be
>>> able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
>>> The plural of anecdote is not data. ~ Roger Brinner
>>> The combination of some data and an aching desire for an answer does
>>> not ensure that a reasonable answer can be extracted from a given body
>>> of data. ~ John Tukey
>>>
>>> 2017-05-16 13:12 GMT+02:00 Jonathon Love <jon at thon.cc
>>> <mailto:jon at thon.cc>>:
>>>
>>>     hi,
>>>
>>>     i'm receiving failures on the winbuilder, with it complaining that
>>>     ggplot2 can not be found:
>>>
>>>     https://win-builder.r-project.org/incoming_pretest/170516_
>> 125043_jmvcore_055/00install.out
>>>     <https://win-builder.r-project.org/incoming_pretest/
>> 170516_125043_jmvcore_055/00install.out>
>>>
>>>     now there are some mentions of ggplot2 in our code (but none in
>>>     our NAMESPACE, we always use the full namespace when calling
>>>     functions: `ggplot2::ggplot()`), allowing people to pass in
>>>     ggplot2 themes and for them to be handled correctly, but packages
>>>     that build on jmvcore don't *need* to use ggplot2. so we've been
>>>     able to avoid adding it as an import, which is great, because
>>>     ggplot2 brings quite a few dependencies.
>>>
>>>     our code works as intended, passes all tests with `R CMD check
>>>     --as-cran jmvcore`, etc.
>>>
>>>     however the win-builder is pinging us.
>>>
>>>     is there a way around this?
>>>
>>>     with thanks
>>>
>>>     jonathon
>>>
>>>     ______________________________________________
>>>     R-package-devel at r-project.org
>>>     <mailto:R-package-devel at r-project.org> mailing list
>>>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>>
>>>
>>
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From thierry.onkelinx at inbo.be  Tue May 16 13:59:47 2017
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Tue, 16 May 2017 13:59:47 +0200
Subject: [R-pkg-devel] package installation fails due to missing package
 not listed in NAMESPACE
In-Reply-To: <9284a1d0-9bc5-e911-cf22-e8b023bb09c0@gmail.com>
References: <37bb0883-e2e2-128f-1b14-86983f7cc684@thon.love>
 <CAJuCY5ybqo=pMkkgUjvprvv502_D8TgBRC7EDvgE051-CVjA9g@mail.gmail.com>
 <047e465a-c844-2a23-1746-8d8dd52aa675@thon.love>
 <CAJuCY5zvPA=rfd+0SNQXeZqgxKTF1rGh-oedLuwHNitLyWTUjQ@mail.gmail.com>
 <9284a1d0-9bc5-e911-cf22-e8b023bb09c0@gmail.com>
Message-ID: <CAJuCY5w-Rf_-S0ewJPDLGd1=BytwBaY4-8dbb5bZrkbb8ZwTvQ@mail.gmail.com>

Yes. That is what I meant (but too lazy to write).

ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature and
Forest
team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
Kliniekstraat 25
1070 Anderlecht
Belgium

To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey

2017-05-16 13:53 GMT+02:00 Duncan Murdoch <murdoch.duncan at gmail.com>:

> On 16/05/2017 7:34 AM, Thierry Onkelinx wrote:
>
>> Try adding requireNamespace("ggplot2") in the function that rely on
>> ggplot2.
>>
>
> That's not enough, even though it might fool the test (I haven't
> checked).  Those functions need to condition on the result, i.e. something
> like
>
> if (requireNamespace("ggplot2")) ggplot2::ggplot()
> else  ... (optional warning that you need it) ...
>
> Duncan Murdoch
>
>
>
>> ir. Thierry Onkelinx
>> Instituut voor natuur- en bosonderzoek / Research Institute for Nature and
>> Forest
>> team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
>> Kliniekstraat 25
>> 1070 Anderlecht
>> Belgium
>>
>> To call in the statistician after the experiment is done may be no more
>> than asking him to perform a post-mortem examination: he may be able to
>> say
>> what the experiment died of. ~ Sir Ronald Aylmer Fisher
>> The plural of anecdote is not data. ~ Roger Brinner
>> The combination of some data and an aching desire for an answer does not
>> ensure that a reasonable answer can be extracted from a given body of
>> data.
>> ~ John Tukey
>>
>> 2017-05-16 13:22 GMT+02:00 Jonathon Love <jon at thon.cc>:
>>
>> yes, sorry, crucial piece of information i forgot to mention.
>>>
>>> ggplot2 *is* in suggests.
>>>
>>> with thanks
>>>
>>> jonathon
>>>
>>>
>>> On 16/5/17 21:21, Thierry Onkelinx wrote:
>>>
>>>> Dear Jonathon,
>>>>
>>>> Is ggplot2 listed in the DESCRIPTION file? It needs to be at least in
>>>> the Suggests:
>>>>
>>>> Best regards,
>>>>
>>>> Thierry
>>>>
>>>> ir. Thierry Onkelinx
>>>> Instituut voor natuur- en bosonderzoek / Research Institute for Nature
>>>> and Forest
>>>> team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
>>>> Kliniekstraat 25
>>>> 1070 Anderlecht
>>>> Belgium
>>>>
>>>> To call in the statistician after the experiment is done may be no
>>>> more than asking him to perform a post-mortem examination: he may be
>>>> able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
>>>> The plural of anecdote is not data. ~ Roger Brinner
>>>> The combination of some data and an aching desire for an answer does
>>>> not ensure that a reasonable answer can be extracted from a given body
>>>> of data. ~ John Tukey
>>>>
>>>> 2017-05-16 13:12 GMT+02:00 Jonathon Love <jon at thon.cc
>>>> <mailto:jon at thon.cc>>:
>>>>
>>>>     hi,
>>>>
>>>>     i'm receiving failures on the winbuilder, with it complaining that
>>>>     ggplot2 can not be found:
>>>>
>>>>     https://win-builder.r-project.org/incoming_pretest/170516_
>>>>
>>> 125043_jmvcore_055/00install.out
>>>
>>>>     <https://win-builder.r-project.org/incoming_pretest/
>>>>
>>> 170516_125043_jmvcore_055/00install.out>
>>>
>>>>
>>>>     now there are some mentions of ggplot2 in our code (but none in
>>>>     our NAMESPACE, we always use the full namespace when calling
>>>>     functions: `ggplot2::ggplot()`), allowing people to pass in
>>>>     ggplot2 themes and for them to be handled correctly, but packages
>>>>     that build on jmvcore don't *need* to use ggplot2. so we've been
>>>>     able to avoid adding it as an import, which is great, because
>>>>     ggplot2 brings quite a few dependencies.
>>>>
>>>>     our code works as intended, passes all tests with `R CMD check
>>>>     --as-cran jmvcore`, etc.
>>>>
>>>>     however the win-builder is pinging us.
>>>>
>>>>     is there a way around this?
>>>>
>>>>     with thanks
>>>>
>>>>     jonathon
>>>>
>>>>     ______________________________________________
>>>>     R-package-devel at r-project.org
>>>>     <mailto:R-package-devel at r-project.org> mailing list
>>>>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>>>
>>>>
>>>>
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>
>

	[[alternative HTML version deleted]]


From jon at thon.cc  Tue May 16 14:21:57 2017
From: jon at thon.cc (Jonathon Love)
Date: Tue, 16 May 2017 22:21:57 +1000
Subject: [R-pkg-devel] package installation fails due to missing package
 not listed in NAMESPACE
In-Reply-To: <9284a1d0-9bc5-e911-cf22-e8b023bb09c0@gmail.com>
References: <37bb0883-e2e2-128f-1b14-86983f7cc684@thon.love>
 <CAJuCY5ybqo=pMkkgUjvprvv502_D8TgBRC7EDvgE051-CVjA9g@mail.gmail.com>
 <047e465a-c844-2a23-1746-8d8dd52aa675@thon.love>
 <CAJuCY5zvPA=rfd+0SNQXeZqgxKTF1rGh-oedLuwHNitLyWTUjQ@mail.gmail.com>
 <9284a1d0-9bc5-e911-cf22-e8b023bb09c0@gmail.com>
Message-ID: <50b23b66-6600-b1d2-3477-db8e6763c3bf@thon.love>

awesome! works a treat.

with thanks

jonathon


On 16/5/17 21:53, Duncan Murdoch wrote:
> On 16/05/2017 7:34 AM, Thierry Onkelinx wrote:
>> Try adding requireNamespace("ggplot2") in the function that rely on
>> ggplot2.
>
> That's not enough, even though it might fool the test (I haven't
> checked).  Those functions need to condition on the result, i.e.
> something like
>
> if (requireNamespace("ggplot2")) ggplot2::ggplot()
> else  ... (optional warning that you need it) ...
>
> Duncan Murdoch
>
>>
>> ir. Thierry Onkelinx
>> Instituut voor natuur- en bosonderzoek / Research Institute for
>> Nature and
>> Forest
>> team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
>> Kliniekstraat 25
>> 1070 Anderlecht
>> Belgium
>>
>> To call in the statistician after the experiment is done may be no more
>> than asking him to perform a post-mortem examination: he may be able
>> to say
>> what the experiment died of. ~ Sir Ronald Aylmer Fisher
>> The plural of anecdote is not data. ~ Roger Brinner
>> The combination of some data and an aching desire for an answer does not
>> ensure that a reasonable answer can be extracted from a given body of
>> data.
>> ~ John Tukey
>>
>> 2017-05-16 13:22 GMT+02:00 Jonathon Love <jon at thon.cc>:
>>
>>> yes, sorry, crucial piece of information i forgot to mention.
>>>
>>> ggplot2 *is* in suggests.
>>>
>>> with thanks
>>>
>>> jonathon
>>>
>>>
>>> On 16/5/17 21:21, Thierry Onkelinx wrote:
>>>> Dear Jonathon,
>>>>
>>>> Is ggplot2 listed in the DESCRIPTION file? It needs to be at least in
>>>> the Suggests:
>>>>
>>>> Best regards,
>>>>
>>>> Thierry
>>>>
>>>> ir. Thierry Onkelinx
>>>> Instituut voor natuur- en bosonderzoek / Research Institute for Nature
>>>> and Forest
>>>> team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
>>>> Kliniekstraat 25
>>>> 1070 Anderlecht
>>>> Belgium
>>>>
>>>> To call in the statistician after the experiment is done may be no
>>>> more than asking him to perform a post-mortem examination: he may be
>>>> able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
>>>> The plural of anecdote is not data. ~ Roger Brinner
>>>> The combination of some data and an aching desire for an answer does
>>>> not ensure that a reasonable answer can be extracted from a given body
>>>> of data. ~ John Tukey
>>>>
>>>> 2017-05-16 13:12 GMT+02:00 Jonathon Love <jon at thon.cc
>>>> <mailto:jon at thon.cc>>:
>>>>
>>>>     hi,
>>>>
>>>>     i'm receiving failures on the winbuilder, with it complaining that
>>>>     ggplot2 can not be found:
>>>>
>>>> https://win-builder.r-project.org/incoming_pretest/170516_
>>> 125043_jmvcore_055/00install.out
>>>> <https://win-builder.r-project.org/incoming_pretest/
>>> 170516_125043_jmvcore_055/00install.out>
>>>>
>>>>     now there are some mentions of ggplot2 in our code (but none in
>>>>     our NAMESPACE, we always use the full namespace when calling
>>>>     functions: `ggplot2::ggplot()`), allowing people to pass in
>>>>     ggplot2 themes and for them to be handled correctly, but packages
>>>>     that build on jmvcore don't *need* to use ggplot2. so we've been
>>>>     able to avoid adding it as an import, which is great, because
>>>>     ggplot2 brings quite a few dependencies.
>>>>
>>>>     our code works as intended, passes all tests with `R CMD check
>>>>     --as-cran jmvcore`, etc.
>>>>
>>>>     however the win-builder is pinging us.
>>>>
>>>>     is there a way around this?
>>>>
>>>>     with thanks
>>>>
>>>>     jonathon
>>>>
>>>>     ______________________________________________
>>>>     R-package-devel at r-project.org
>>>>     <mailto:R-package-devel at r-project.org> mailing list
>>>>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>>>
>>>>
>>>
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>>     [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>


From icho at iastate.edu  Tue May 16 15:58:47 2017
From: icho at iastate.edu (Cho, In-Ho [CCE E])
Date: Tue, 16 May 2017 13:58:47 +0000
Subject: [R-pkg-devel] Subject: cerr, cout, rand, and srand
Message-ID: <DM5PR04MB1116A6061032FC722405AF2ED2E60@DM5PR04MB1116.namprd04.prod.outlook.com>

Hi Everyone,


My Package did not pass the pre-test with following Note.

I am not sure how to fix this problem.

Any advice will be really appreciated.

Many thanks,


In Ho

-----------

* checking compiled code ... NOTE
File 'FHDI/libs/i386/FHDI.dll':
  Found '_ZSt4cerr', possibly from 'std::cerr' (C++)
    Object: 'FHDI.o'
  Found '_ZSt4cout', possibly from 'std::cout' (C++)
    Object: 'FHDI.o'
  Found 'rand', possibly from 'rand' (C)
    Object: 'FHDI.o'
  Found 'srand', possibly from 'srand' (C)
    Object: 'FHDI.o'
File 'FHDI/libs/x64/FHDI.dll':
  Found '_ZSt4cerr', possibly from 'std::cerr' (C++)
    Object: 'FHDI.o'
  Found '_ZSt4cout', possibly from 'std::cout' (C++)
    Object: 'FHDI.o'
  Found 'rand', possibly from 'rand' (C)
    Object: 'FHDI.o'
  Found 'srand', possibly from 'srand' (C)
    Object: 'FHDI.o'
File 'FHDI/libs/i386/FHDI.dll':
  Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
File 'FHDI/libs/x64/FHDI.dll':
  Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'

Compiled code should not call entry points which might terminate R nor
write to stdout/stderr instead of to the console, nor the system RNG.
It is good practice to register native routines and to disable symbol
search.


	[[alternative HTML version deleted]]


From maxime.turgeon at mail.mcgill.ca  Tue May 16 16:36:35 2017
From: maxime.turgeon at mail.mcgill.ca (Maxime Turgeon)
Date: Tue, 16 May 2017 14:36:35 +0000
Subject: [R-pkg-devel] Subject: cerr, cout, rand, and srand
In-Reply-To: <DM5PR04MB1116A6061032FC722405AF2ED2E60@DM5PR04MB1116.namprd04.prod.outlook.com>
References: <DM5PR04MB1116A6061032FC722405AF2ED2E60@DM5PR04MB1116.namprd04.prod.outlook.com>
Message-ID: <CY1PR03MB135955821D79C8319CBA6A71BAE60@CY1PR03MB1359.namprd03.prod.outlook.com>

This is well documented in Writing R extensions:

 - https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Printing for I/O streams

 - https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Registering-native-routines for native routine registrations.


As for the random number generator, you should use the one provided by R: https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Random-numbers


Max

Writing R Extensions<https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Random-numbers>
cran.r-project.org
1 Creating R packages. Packages provide a mechanism for loading optional code, data and documentation as needed. The R distribution itself includes about 30 packages.


Writing R Extensions<https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Registering-native-routines>
cran.r-project.org
1 Creating R packages. Packages provide a mechanism for loading optional code, data and documentation as needed. The R distribution itself includes about 30 packages.


Writing R Extensions<https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Printing>
cran.r-project.org
1 Creating R packages. Packages provide a mechanism for loading optional code, data and documentation as needed. The R distribution itself includes about 30 packages.


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Cho, In-Ho [CCE E] <icho at iastate.edu>
Sent: May 16, 2017 9:58:47 AM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Subject: cerr, cout, rand, and srand

Hi Everyone,


My Package did not pass the pre-test with following Note.

I am not sure how to fix this problem.

Any advice will be really appreciated.

Many thanks,


In Ho

-----------

* checking compiled code ... NOTE
File 'FHDI/libs/i386/FHDI.dll':
  Found '_ZSt4cerr', possibly from 'std::cerr' (C++)
    Object: 'FHDI.o'
  Found '_ZSt4cout', possibly from 'std::cout' (C++)
    Object: 'FHDI.o'
  Found 'rand', possibly from 'rand' (C)
    Object: 'FHDI.o'
  Found 'srand', possibly from 'srand' (C)
    Object: 'FHDI.o'
File 'FHDI/libs/x64/FHDI.dll':
  Found '_ZSt4cerr', possibly from 'std::cerr' (C++)
    Object: 'FHDI.o'
  Found '_ZSt4cout', possibly from 'std::cout' (C++)
    Object: 'FHDI.o'
  Found 'rand', possibly from 'rand' (C)
    Object: 'FHDI.o'
  Found 'srand', possibly from 'srand' (C)
    Object: 'FHDI.o'
File 'FHDI/libs/i386/FHDI.dll':
  Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
File 'FHDI/libs/x64/FHDI.dll':
  Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'

Compiled code should not call entry points which might terminate R nor
write to stdout/stderr instead of to the console, nor the system RNG.
It is good practice to register native routines and to disable symbol
search.


        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From james.f.hester at gmail.com  Tue May 16 20:08:58 2017
From: james.f.hester at gmail.com (Jim Hester)
Date: Tue, 16 May 2017 14:08:58 -0400
Subject: [R-pkg-devel] Depending on currently unreleased package
In-Reply-To: <CAOfWXX64YFUzAjWRbk8dfuUsGXZdU4AUCSXeu-iwQYNGo_fSXA@mail.gmail.com>
References: <CAOfWXX5GkbBEu3Jp6NJCRWwcEOFbGGY5uAq=1B--SNNhth9eXg@mail.gmail.com>
 <CAOfWXX4mP=uQjoOMSyUiriZTrEKUJ+fOafAVYiHE1e6V0yuckQ@mail.gmail.com>
 <CAOfWXX6EGK56j4DjNRYiQcca50yAi7HY7Wb8Nqe8kJP+xfRj2Q@mail.gmail.com>
 <CAOfWXX4keuh=e8wHBHLJypPpa7Z7NKeJ=ma=mzOMr7vFgwneVQ@mail.gmail.com>
 <CAOfWXX7xpOr1x+ZpOOfKX4bjyDSavs8cZrXGE=ZKhhDumQHUKQ@mail.gmail.com>
 <CAOfWXX4GoCQg0y4nF1-2sx4Piw34-Os_AtGWdLtDYdk=5TwUaQ@mail.gmail.com>
 <CAOfWXX735ad6yy+XXPmP6=MzKsHsrtROx_rn=jK_Aaxhb=4PdQ@mail.gmail.com>
 <CAOfWXX5v5GfqOBjmCjB4TJvWVJhzdg9zSanvtofpkjvrZXC1SQ@mail.gmail.com>
 <CAOfWXX6CtNV_-gkZqLyu34n+nTRJMoDp=E8SpHCM46J0ccw8aA@mail.gmail.com>
 <CAOfWXX6SYGCUgnzLtSvO93Mjw=8Sp8ZVWzh1JRk00=7+3N8y6w@mail.gmail.com>
 <CAOfWXX7dwxo+azxexidNX9TO==JqxttnyJnQVpgJXK5KvC+nYg@mail.gmail.com>
 <CAOfWXX7+ojrH_bqmRxAOgLOkBH-oL0_ar9wfehjei=AM7nztLQ@mail.gmail.com>
 <CAOfWXX7sAiysK5Knvyf-E4uZ3=7bBA12116SQz8J3JWKKVVGfA@mail.gmail.com>
 <CAOfWXX7avBm4ObXrZ96Q4EcRz31NJkdT5_oed_66KuKeGGfxcA@mail.gmail.com>
 <a6e452ac-42c1-1a0e-28dd-e28eed6e5ee0@gmail.com>
 <CAOfWXX64YFUzAjWRbk8dfuUsGXZdU4AUCSXeu-iwQYNGo_fSXA@mail.gmail.com>
Message-ID: <CAD6tx964bCUDAzMVrQAAo8=QMg76qi8RUdo5PKrcaOfpCzqcRQ@mail.gmail.com>

You can use the `Remotes: ` feature in your DESCRIPTION file
(https://github.com/hadley/devtools/blob/master/vignettes/dependencies.Rmd)
implemented in devtools to automatically install development versions
of packages during development, including on Travis CI. However they
will need to be removed before submitting to CRAN, in which case a
conditional include like Duncan described is what you will need to do
until dbplyr is released on CRAN.

On Tue, May 9, 2017 at 7:54 PM, William Brannon <will.brannon at gmail.com> wrote:
> Thanks! That took care of it. I had been tripped up by how the R support in
> travis-ci throws errors if suggested packages aren't available.
>
> On May 6, 2017 4:18 PM, "Duncan Murdoch" <murdoch.duncan at gmail.com> wrote:
>
>> On 06/05/2017 4:02 PM, William Brannon wrote:
>>
>>> Hi r-devel,
>>>
>>> I have a package called sqlscore (
>>> https://cran.r-project.org/package=sqlscore) which depends on dplyr
>>> functions for SQL generation. The new version of dplyr splits these
>>> functions into a different package (dbplyr) and provides a recommended way
>>> to wrap around access to the function in the appropriate package. So when
>>> it's released in a few days, users with the new dplyr will see errors when
>>> trying to use sqlscore. So far, so good, though - updating my R code as
>>> such isn't hard.
>>>
>>> But dbplyr won't be released before the new  dplyr is, and I can't figure
>>> out how to list it in Imports, Depends or even Suggests to release an
>>> update ahead of the new dplyr release. Doing so causes ERRORs in R CMD
>>> check about an unavailable dependency, and not doing so causes problems
>>> with "::" references to a package not mentioned in DESCRIPTION.
>>>
>>> I'd rather not wait until dbplyr is released to submit a new package, for
>>> obvious reasons. But releasing an update which depends on it before that
>>> might also cause breakage.
>>>
>>> Any suggestions for the right upgrade path?
>>>
>>>
>> You can list dbplyr in Suggests, and put in conditionals to test for it.
>> If you don't want to wait for its release you'll need to have code that
>> works without it as well, so something like this
>>
>> if (requireNamespace("dbplyr"))
>>   foo <- dbplyr::foo
>> else if (packageVersion("dplyr") < "x.y.z")
>>   foo <- dplyr::foo
>> else
>>   stop("You need to install the dbplyr package, because dplyr::foo has
>> moved there.")
>>
>> will allow you to use foo() anywhere (as long as its interface is the same
>> in both packages, of course).
>>
>> Duncan Murdoch
>>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From michel.grzebyk at inrs.fr  Wed May 17 16:34:43 2017
From: michel.grzebyk at inrs.fr (michel.grzebyk at inrs.fr)
Date: Wed, 17 May 2017 16:34:43 +0200
Subject: [R-pkg-devel] spell checking of the DESCRIPTION file
Message-ID: <OFF2F0A1C3.EC86E5B1-ONC1258123.004D77E8-C1258123.00501550@inrs.fr>

The spell checking of the DESCRIPTION file of my package have issued a 
NOTE concerning authors' name of articles appearing in the "description" 
field.
Is there a a way to fix this problem or shall I consider this NOTE as a 
false positive?

I was not able to find any indication in "Writing R Extension" about how 
to include names in the "description" field.

Best,
Michel

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Wed May 17 21:31:07 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 17 May 2017 21:31:07 +0200
Subject: [R-pkg-devel] spell checking of the DESCRIPTION file
In-Reply-To: <OFF2F0A1C3.EC86E5B1-ONC1258123.004D77E8-C1258123.00501550@inrs.fr>
References: <OFF2F0A1C3.EC86E5B1-ONC1258123.004D77E8-C1258123.00501550@inrs.fr>
Message-ID: <3c0d1e61-275c-33c3-0ddd-5ceacba2a63e@statistik.tu-dortmund.de>



On 17.05.2017 16:34, michel.grzebyk at inrs.fr wrote:
> The spell checking of the DESCRIPTION file of my package have issued a
> NOTE concerning authors' name of articles appearing in the "description"
> field.
> Is there a a way to fix this problem or shall I consider this NOTE as a
> false positive?
>
> I was not able to find any indication in "Writing R Extension" about how
> to include names in the "description" field.

If the spell checks have false positives, that's OK and your package 
won't be rejected.
Nevertheless, software names should be written single quotes as 
'package' and functions with parentheses as in foo().

Best,
Uwe Ligges



> Best,
> Michel
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ligges at statistik.tu-dortmund.de  Thu May 18 10:18:22 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Thu, 18 May 2017 10:18:22 +0200
Subject: [R-pkg-devel] spell checking of the DESCRIPTION file
In-Reply-To: <CACApb-H-+x2rRmx7N6S4YPUTbjnZRAhMff6K29sdwu3zeiOmyg@mail.gmail.com>
References: <OFF2F0A1C3.EC86E5B1-ONC1258123.004D77E8-C1258123.00501550@inrs.fr>
 <3c0d1e61-275c-33c3-0ddd-5ceacba2a63e@statistik.tu-dortmund.de>
 <CACApb-H-+x2rRmx7N6S4YPUTbjnZRAhMff6K29sdwu3zeiOmyg@mail.gmail.com>
Message-ID: <680612a3-f116-f12c-7983-0bd795c83437@statistik.tu-dortmund.de>



On 18.05.2017 09:07, dharmapal burne wrote:
> The name is automatically getting generated after executing the command
> "R CMD build plfMA".
> It is my system name.
> I think, we should consider it as false positive.

Your system name should not be spell checked, perhapos you provide check 
log and package on some web resources so that poeple are able tpo help?

Best,
Uwe Ligges



> On Thu, May 18, 2017 at 1:01 AM, Uwe Ligges
> <ligges at statistik.tu-dortmund.de
> <mailto:ligges at statistik.tu-dortmund.de>> wrote:
>
>
>
>     On 17.05.2017 16:34, michel.grzebyk at inrs.fr
>     <mailto:michel.grzebyk at inrs.fr> wrote:
>
>         The spell checking of the DESCRIPTION file of my package have
>         issued a
>         NOTE concerning authors' name of articles appearing in the
>         "description"
>         field.
>         Is there a a way to fix this problem or shall I consider this
>         NOTE as a
>         false positive?
>
>         I was not able to find any indication in "Writing R Extension"
>         about how
>         to include names in the "description" field.
>
>
>     If the spell checks have false positives, that's OK and your package
>     won't be rejected.
>     Nevertheless, software names should be written single quotes as
>     'package' and functions with parentheses as in foo().
>
>     Best,
>     Uwe Ligges
>
>
>
>
>         Best,
>         Michel
>
>                 [[alternative HTML version deleted]]
>
>         ______________________________________________
>         R-package-devel at r-project.org
>         <mailto:R-package-devel at r-project.org> mailing list
>         https://stat.ethz.ch/mailman/listinfo/r-package-devel
>         <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>
>
>     ______________________________________________
>     R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>     mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>
>
>
>
> --
> Best,
> *DHAMMAPAL BHARNE,
> *
> PhD Research Scholar,
> *University of Hyderabad,
> *
> Mobile: 91 9492274285
>


From ligges at statistik.tu-dortmund.de  Thu May 18 11:17:19 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Thu, 18 May 2017 11:17:19 +0200
Subject: [R-pkg-devel] spell checking of the DESCRIPTION file
In-Reply-To: <CACApb-FRBjpEW7bN7bYqpp7oiHSiaxvhLbB03dKyTdoksF-C0A@mail.gmail.com>
References: <OFF2F0A1C3.EC86E5B1-ONC1258123.004D77E8-C1258123.00501550@inrs.fr>
 <3c0d1e61-275c-33c3-0ddd-5ceacba2a63e@statistik.tu-dortmund.de>
 <CACApb-H-+x2rRmx7N6S4YPUTbjnZRAhMff6K29sdwu3zeiOmyg@mail.gmail.com>
 <680612a3-f116-f12c-7983-0bd795c83437@statistik.tu-dortmund.de>
 <CACApb-FRBjpEW7bN7bYqpp7oiHSiaxvhLbB03dKyTdoksF-C0A@mail.gmail.com>
Message-ID: <7784afde-5630-e38a-39e2-e27b7b405eb6@statistik.tu-dortmund.de>

Well, not running an examples because of an error is a bad idea, you 
should fix the issue that caused the error first.

And when I meant you should make available package and check log I meant 
the version where you did not hide the problems.

Best,
Uwe Ligges


On 18.05.2017 10:55, dharmapal burne wrote:
> Respected Sir/Ma'am.
>
> I have checked Description file and man files. In the description field,
> only text is there but not my name or my PC name.
>
> I am not getting errors while checking as cran.
> But unfornutately, automated checking at CRAN generating errors
> especially in example section.
>
> I have modified the example section to avoid that error (I have used
> dontrun\{}).
> This is my 00check.log content:
> ----------------------------------------------------------------------------------------
> * using log directory ?/home/vvlab/Desktop/pflMA_1.0.4/plfMA.Rcheck?
> * using R version 3.0.2 (2013-09-25)
> * using platform: x86_64-pc-linux-gnu (64-bit)
> * using session charset: UTF-8
> * checking for file ?plfMA/DESCRIPTION? ... OK
> * checking extension type ... Package
> * this is package ?plfMA? version ?1.0.4?
> * checking CRAN incoming feasibility ... OK
> Maintainer: ?Dhammapal Bharne <dhammapalb at uohyd.ac.in
> <mailto:dhammapalb at uohyd.ac.in>>?
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking whether package ?plfMA? can be installed ... OK
> * checking installed package size ... OK
> * checking package directory ... OK
> * checking DESCRIPTION meta-information ... OK
> * checking top-level files ... OK
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * checking whether the package can be loaded ... OK
> * checking whether the package can be loaded with stated dependencies ... OK
> * checking whether the package can be unloaded cleanly ... OK
> * checking whether the namespace can be loaded with stated dependencies
> ... OK
> * checking whether the namespace can be unloaded cleanly ... OK
> * checking loading without being on the library search path ... OK
> * checking dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... OK
> * checking Rd files ... OK
> * checking Rd metadata ... OK
> * checking Rd line widths ... OK
> * checking Rd cross-references ... OK
> * checking for missing documentation entries ... OK
> * checking for code/documentation mismatches ... OK
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking examples ... OK
> * checking PDF version of manual ... OK
> ----------------------------------------------------------------------------------------------------
> I think, there are no errors now.
> Shall I resubmit the tar file to CRAN?
>
> Thank you.
>
> On Thu, May 18, 2017 at 1:48 PM, Uwe Ligges
> <ligges at statistik.tu-dortmund.de
> <mailto:ligges at statistik.tu-dortmund.de>> wrote:
>
>
>
>     On 18.05.2017 09:07, dharmapal burne wrote:
>
>         The name is automatically getting generated after executing the
>         command
>         "R CMD build plfMA".
>         It is my system name.
>         I think, we should consider it as false positive.
>
>
>     Your system name should not be spell checked, perhapos you provide
>     check log and package on some web resources so that poeple are able
>     tpo help?
>
>     Best,
>     Uwe Ligges
>
>
>
>         On Thu, May 18, 2017 at 1:01 AM, Uwe Ligges
>         <ligges at statistik.tu-dortmund.de
>         <mailto:ligges at statistik.tu-dortmund.de>
>         <mailto:ligges at statistik.tu-dortmund.de
>         <mailto:ligges at statistik.tu-dortmund.de>>> wrote:
>
>
>
>             On 17.05.2017 16:34, michel.grzebyk at inrs.fr
>         <mailto:michel.grzebyk at inrs.fr>
>             <mailto:michel.grzebyk at inrs.fr
>         <mailto:michel.grzebyk at inrs.fr>> wrote:
>
>                 The spell checking of the DESCRIPTION file of my package
>         have
>                 issued a
>                 NOTE concerning authors' name of articles appearing in the
>                 "description"
>                 field.
>                 Is there a a way to fix this problem or shall I consider
>         this
>                 NOTE as a
>                 false positive?
>
>                 I was not able to find any indication in "Writing R
>         Extension"
>                 about how
>                 to include names in the "description" field.
>
>
>             If the spell checks have false positives, that's OK and your
>         package
>             won't be rejected.
>             Nevertheless, software names should be written single quotes as
>             'package' and functions with parentheses as in foo().
>
>             Best,
>             Uwe Ligges
>
>
>
>
>                 Best,
>                 Michel
>
>                         [[alternative HTML version deleted]]
>
>                 ______________________________________________
>                 R-package-devel at r-project.org
>         <mailto:R-package-devel at r-project.org>
>                 <mailto:R-package-devel at r-project.org
>         <mailto:R-package-devel at r-project.org>> mailing list
>                 https://stat.ethz.ch/mailman/listinfo/r-package-devel
>         <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>                 <https://stat.ethz.ch/mailman/listinfo/r-package-devel
>         <https://stat.ethz.ch/mailman/listinfo/r-package-devel>>
>
>
>             ______________________________________________
>             R-package-devel at r-project.org
>         <mailto:R-package-devel at r-project.org>
>         <mailto:R-package-devel at r-project.org
>         <mailto:R-package-devel at r-project.org>>
>             mailing list
>             https://stat.ethz.ch/mailman/listinfo/r-package-devel
>         <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>             <https://stat.ethz.ch/mailman/listinfo/r-package-devel
>         <https://stat.ethz.ch/mailman/listinfo/r-package-devel>>
>
>
>
>
>         --
>         Best,
>         *DHAMMAPAL BHARNE,
>         *
>         PhD Research Scholar,
>         *University of Hyderabad,
>         *
>         Mobile: 91 9492274285
>
>
>
>
> --
> Best,
> *DHAMMAPAL BHARNE,
> *
> PhD Research Scholar,
> *University of Hyderabad,
> *
> Mobile: 91 9492274285
>


From dhammapalb at uohyd.ac.in  Thu May 18 09:07:20 2017
From: dhammapalb at uohyd.ac.in (dharmapal burne)
Date: Thu, 18 May 2017 12:37:20 +0530
Subject: [R-pkg-devel] spell checking of the DESCRIPTION file
In-Reply-To: <3c0d1e61-275c-33c3-0ddd-5ceacba2a63e@statistik.tu-dortmund.de>
References: <OFF2F0A1C3.EC86E5B1-ONC1258123.004D77E8-C1258123.00501550@inrs.fr>
 <3c0d1e61-275c-33c3-0ddd-5ceacba2a63e@statistik.tu-dortmund.de>
Message-ID: <CACApb-H-+x2rRmx7N6S4YPUTbjnZRAhMff6K29sdwu3zeiOmyg@mail.gmail.com>

The name is automatically getting generated after executing the command "R
CMD build plfMA".
It is my system name.
I think, we should consider it as false positive.

On Thu, May 18, 2017 at 1:01 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de
> wrote:

>
>
> On 17.05.2017 16:34, michel.grzebyk at inrs.fr wrote:
>
>> The spell checking of the DESCRIPTION file of my package have issued a
>> NOTE concerning authors' name of articles appearing in the "description"
>> field.
>> Is there a a way to fix this problem or shall I consider this NOTE as a
>> false positive?
>>
>> I was not able to find any indication in "Writing R Extension" about how
>> to include names in the "description" field.
>>
>
> If the spell checks have false positives, that's OK and your package won't
> be rejected.
> Nevertheless, software names should be written single quotes as 'package'
> and functions with parentheses as in foo().
>
> Best,
> Uwe Ligges
>
>
>
>
> Best,
>> Michel
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Best,

*DHAMMAPAL BHARNE,*
PhD Research Scholar,

*University of Hyderabad,*
Mobile: 91 9492274285

	[[alternative HTML version deleted]]


From dhammapalb at uohyd.ac.in  Thu May 18 10:55:58 2017
From: dhammapalb at uohyd.ac.in (dharmapal burne)
Date: Thu, 18 May 2017 14:25:58 +0530
Subject: [R-pkg-devel] spell checking of the DESCRIPTION file
In-Reply-To: <680612a3-f116-f12c-7983-0bd795c83437@statistik.tu-dortmund.de>
References: <OFF2F0A1C3.EC86E5B1-ONC1258123.004D77E8-C1258123.00501550@inrs.fr>
 <3c0d1e61-275c-33c3-0ddd-5ceacba2a63e@statistik.tu-dortmund.de>
 <CACApb-H-+x2rRmx7N6S4YPUTbjnZRAhMff6K29sdwu3zeiOmyg@mail.gmail.com>
 <680612a3-f116-f12c-7983-0bd795c83437@statistik.tu-dortmund.de>
Message-ID: <CACApb-FRBjpEW7bN7bYqpp7oiHSiaxvhLbB03dKyTdoksF-C0A@mail.gmail.com>

Respected Sir/Ma'am.

I have checked Description file and man files. In the description field,
only text is there but not my name or my PC name.

I am not getting errors while checking as cran.
But unfornutately, automated checking at CRAN generating errors especially
in example section.

I have modified the example section to avoid that error (I have used
dontrun\{}).
This is my 00check.log content:
----------------------------------------------------------------------------------------
* using log directory ?/home/vvlab/Desktop/pflMA_1.0.4/plfMA.Rcheck?
* using R version 3.0.2 (2013-09-25)
* using platform: x86_64-pc-linux-gnu (64-bit)
* using session charset: UTF-8
* checking for file ?plfMA/DESCRIPTION? ... OK
* checking extension type ... Package
* this is package ?plfMA? version ?1.0.4?
* checking CRAN incoming feasibility ... OK
Maintainer: ?Dhammapal Bharne <dhammapalb at uohyd.ac.in>?
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking whether package ?plfMA? can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ...
OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking loading without being on the library search path ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd line widths ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking examples ... OK
* checking PDF version of manual ... OK
----------------------------------------------------------------------------------------------------
I think, there are no errors now.
Shall I resubmit the tar file to CRAN?

Thank you.

On Thu, May 18, 2017 at 1:48 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de
> wrote:

>
>
> On 18.05.2017 09:07, dharmapal burne wrote:
>
>> The name is automatically getting generated after executing the command
>> "R CMD build plfMA".
>> It is my system name.
>> I think, we should consider it as false positive.
>>
>
> Your system name should not be spell checked, perhapos you provide check
> log and package on some web resources so that poeple are able tpo help?
>
> Best,
> Uwe Ligges
>
>
>
> On Thu, May 18, 2017 at 1:01 AM, Uwe Ligges
>> <ligges at statistik.tu-dortmund.de
>> <mailto:ligges at statistik.tu-dortmund.de>> wrote:
>>
>>
>>
>>     On 17.05.2017 16:34, michel.grzebyk at inrs.fr
>>     <mailto:michel.grzebyk at inrs.fr> wrote:
>>
>>         The spell checking of the DESCRIPTION file of my package have
>>         issued a
>>         NOTE concerning authors' name of articles appearing in the
>>         "description"
>>         field.
>>         Is there a a way to fix this problem or shall I consider this
>>         NOTE as a
>>         false positive?
>>
>>         I was not able to find any indication in "Writing R Extension"
>>         about how
>>         to include names in the "description" field.
>>
>>
>>     If the spell checks have false positives, that's OK and your package
>>     won't be rejected.
>>     Nevertheless, software names should be written single quotes as
>>     'package' and functions with parentheses as in foo().
>>
>>     Best,
>>     Uwe Ligges
>>
>>
>>
>>
>>         Best,
>>         Michel
>>
>>                 [[alternative HTML version deleted]]
>>
>>         ______________________________________________
>>         R-package-devel at r-project.org
>>         <mailto:R-package-devel at r-project.org> mailing list
>>         https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>         <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>
>>
>>     ______________________________________________
>>     R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>>     mailing list
>>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>
>>
>>
>>
>> --
>> Best,
>> *DHAMMAPAL BHARNE,
>> *
>> PhD Research Scholar,
>> *University of Hyderabad,
>> *
>> Mobile: 91 9492274285
>>
>>


-- 
Best,

*DHAMMAPAL BHARNE,*
PhD Research Scholar,

*University of Hyderabad,*
Mobile: 91 9492274285

	[[alternative HTML version deleted]]


From dhammapalb at uohyd.ac.in  Thu May 18 12:51:17 2017
From: dhammapalb at uohyd.ac.in (dharmapal burne)
Date: Thu, 18 May 2017 16:21:17 +0530
Subject: [R-pkg-devel] spell checking of the DESCRIPTION file
In-Reply-To: <7784afde-5630-e38a-39e2-e27b7b405eb6@statistik.tu-dortmund.de>
References: <OFF2F0A1C3.EC86E5B1-ONC1258123.004D77E8-C1258123.00501550@inrs.fr>
 <3c0d1e61-275c-33c3-0ddd-5ceacba2a63e@statistik.tu-dortmund.de>
 <CACApb-H-+x2rRmx7N6S4YPUTbjnZRAhMff6K29sdwu3zeiOmyg@mail.gmail.com>
 <680612a3-f116-f12c-7983-0bd795c83437@statistik.tu-dortmund.de>
 <CACApb-FRBjpEW7bN7bYqpp7oiHSiaxvhLbB03dKyTdoksF-C0A@mail.gmail.com>
 <7784afde-5630-e38a-39e2-e27b7b405eb6@statistik.tu-dortmund.de>
Message-ID: <CACApb-GXJw=PBGspsDi4JKqadtb1Lh+7U1ugO_n20hSEqw5QqA@mail.gmail.com>

Before I change the NAMESPACE file, error is :
--------------------------------------------------------------
* checking examples ... ERROR
Running examples in ?plfMA-Ex.R? failed
The error most likely occurred in:

> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
> ### Name: plfMA
> ### Title: A function to launch the plfMA GUI.
> ### Aliases: plfMA
> ### Keywords: GUI
>
> ### ** Examples
>
> library(plfMA)
> x<-matrix(1:100,ncol=10)
> plfMA(x)
Error: could not find function "plfMA"
Execution halted

--------------------------------------------------------------

Now, I have added the first statement in NAMESPACE file with
--------------------------------------------
exportPattern("^[[:alpha:]]+")
------------------------------------------
The error has gone.

I think, the error is fixed.

On Thu, May 18, 2017 at 2:47 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de
> wrote:

> Well, not running an examples because of an error is a bad idea, you
> should fix the issue that caused the error first.
>
> And when I meant you should make available package and check log I meant
> the version where you did not hide the problems.
>
> Best,
> Uwe Ligges
>
>
> On 18.05.2017 10:55, dharmapal burne wrote:
>
>> Respected Sir/Ma'am.
>>
>> I have checked Description file and man files. In the description field,
>> only text is there but not my name or my PC name.
>>
>> I am not getting errors while checking as cran.
>> But unfornutately, automated checking at CRAN generating errors
>> especially in example section.
>>
>> I have modified the example section to avoid that error (I have used
>> dontrun\{}).
>> This is my 00check.log content:
>> ------------------------------------------------------------
>> ----------------------------
>> * using log directory ?/home/vvlab/Desktop/pflMA_1.0.4/plfMA.Rcheck?
>> * using R version 3.0.2 (2013-09-25)
>> * using platform: x86_64-pc-linux-gnu (64-bit)
>> * using session charset: UTF-8
>> * checking for file ?plfMA/DESCRIPTION? ... OK
>> * checking extension type ... Package
>> * this is package ?plfMA? version ?1.0.4?
>> * checking CRAN incoming feasibility ... OK
>> Maintainer: ?Dhammapal Bharne <dhammapalb at uohyd.ac.in
>> <mailto:dhammapalb at uohyd.ac.in>>?
>>
>> * checking package namespace information ... OK
>> * checking package dependencies ... OK
>> * checking if this is a source package ... OK
>> * checking if there is a namespace ... OK
>> * checking for executable files ... OK
>> * checking for hidden files and directories ... OK
>> * checking for portable file names ... OK
>> * checking for sufficient/correct file permissions ... OK
>> * checking whether package ?plfMA? can be installed ... OK
>> * checking installed package size ... OK
>> * checking package directory ... OK
>> * checking DESCRIPTION meta-information ... OK
>> * checking top-level files ... OK
>> * checking for left-over files ... OK
>> * checking index information ... OK
>> * checking package subdirectories ... OK
>> * checking R files for non-ASCII characters ... OK
>> * checking R files for syntax errors ... OK
>> * checking whether the package can be loaded ... OK
>> * checking whether the package can be loaded with stated dependencies ...
>> OK
>> * checking whether the package can be unloaded cleanly ... OK
>> * checking whether the namespace can be loaded with stated dependencies
>> ... OK
>> * checking whether the namespace can be unloaded cleanly ... OK
>> * checking loading without being on the library search path ... OK
>> * checking dependencies in R code ... OK
>> * checking S3 generic/method consistency ... OK
>> * checking replacement functions ... OK
>> * checking foreign function calls ... OK
>> * checking R code for possible problems ... OK
>> * checking Rd files ... OK
>> * checking Rd metadata ... OK
>> * checking Rd line widths ... OK
>> * checking Rd cross-references ... OK
>> * checking for missing documentation entries ... OK
>> * checking for code/documentation mismatches ... OK
>> * checking Rd \usage sections ... OK
>> * checking Rd contents ... OK
>> * checking for unstated dependencies in examples ... OK
>> * checking examples ... OK
>> * checking PDF version of manual ... OK
>> ------------------------------------------------------------
>> ----------------------------------------
>> I think, there are no errors now.
>> Shall I resubmit the tar file to CRAN?
>>
>> Thank you.
>>
>> On Thu, May 18, 2017 at 1:48 PM, Uwe Ligges
>> <ligges at statistik.tu-dortmund.de
>> <mailto:ligges at statistik.tu-dortmund.de>> wrote:
>>
>>
>>
>>     On 18.05.2017 09:07, dharmapal burne wrote:
>>
>>         The name is automatically getting generated after executing the
>>         command
>>         "R CMD build plfMA".
>>         It is my system name.
>>         I think, we should consider it as false positive.
>>
>>
>>     Your system name should not be spell checked, perhapos you provide
>>     check log and package on some web resources so that poeple are able
>>     tpo help?
>>
>>     Best,
>>     Uwe Ligges
>>
>>
>>
>>         On Thu, May 18, 2017 at 1:01 AM, Uwe Ligges
>>         <ligges at statistik.tu-dortmund.de
>>         <mailto:ligges at statistik.tu-dortmund.de>
>>         <mailto:ligges at statistik.tu-dortmund.de
>>         <mailto:ligges at statistik.tu-dortmund.de>>> wrote:
>>
>>
>>
>>             On 17.05.2017 16:34, michel.grzebyk at inrs.fr
>>         <mailto:michel.grzebyk at inrs.fr>
>>             <mailto:michel.grzebyk at inrs.fr
>>
>>         <mailto:michel.grzebyk at inrs.fr>> wrote:
>>
>>                 The spell checking of the DESCRIPTION file of my package
>>         have
>>                 issued a
>>                 NOTE concerning authors' name of articles appearing in the
>>                 "description"
>>                 field.
>>                 Is there a a way to fix this problem or shall I consider
>>         this
>>                 NOTE as a
>>                 false positive?
>>
>>                 I was not able to find any indication in "Writing R
>>         Extension"
>>                 about how
>>                 to include names in the "description" field.
>>
>>
>>             If the spell checks have false positives, that's OK and your
>>         package
>>             won't be rejected.
>>             Nevertheless, software names should be written single quotes
>> as
>>             'package' and functions with parentheses as in foo().
>>
>>             Best,
>>             Uwe Ligges
>>
>>
>>
>>
>>                 Best,
>>                 Michel
>>
>>                         [[alternative HTML version deleted]]
>>
>>                 ______________________________________________
>>                 R-package-devel at r-project.org
>>         <mailto:R-package-devel at r-project.org>
>>                 <mailto:R-package-devel at r-project.org
>>         <mailto:R-package-devel at r-project.org>> mailing list
>>                 https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>         <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>                 <https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>         <https://stat.ethz.ch/mailman/listinfo/r-package-devel>>
>>
>>
>>             ______________________________________________
>>             R-package-devel at r-project.org
>>         <mailto:R-package-devel at r-project.org>
>>         <mailto:R-package-devel at r-project.org
>>         <mailto:R-package-devel at r-project.org>>
>>             mailing list
>>             https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>         <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>             <https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>         <https://stat.ethz.ch/mailman/listinfo/r-package-devel>>
>>
>>
>>
>>
>>         --
>>         Best,
>>         *DHAMMAPAL BHARNE,
>>         *
>>         PhD Research Scholar,
>>         *University of Hyderabad,
>>         *
>>         Mobile: 91 9492274285
>>
>>
>>
>>
>> --
>> Best,
>> *DHAMMAPAL BHARNE,
>> *
>> PhD Research Scholar,
>> *University of Hyderabad,
>> *
>> Mobile: 91 9492274285
>>
>>


-- 
Best,

*DHAMMAPAL BHARNE,*
PhD Research Scholar,

*University of Hyderabad,*
Mobile: 91 9492274285

	[[alternative HTML version deleted]]


From ldecicco at usgs.gov  Fri May 19 22:48:17 2017
From: ldecicco at usgs.gov (DeCicco, Laura)
Date: Fri, 19 May 2017 15:48:17 -0500
Subject: [R-pkg-devel] Warning: Installed R
Message-ID: <CAFXq+SvkCO+gKNGD15cUSQkpui598Cp2S0YsWcvVOV5t24LPEg@mail.gmail.com>

I am unable to "pass the incoming checks automatically" to submit to CRAN
because I am getting the following Warning:

Warning: Installed R (R Under development (unstable) (2017-05-18 r72697))
different from R used to build dplyr (R Under development (unstable)
(2017-05-18 r72687)).
Please reinstall dplyr to avoid random crashes or undefined behavior.

This sounds to me like a problem on CRAN's end...but as a sanity check, is
there something in my package that could trigger that warning?

Thanks in advanced!

	[[alternative HTML version deleted]]


From ldecicco at usgs.gov  Fri May 19 22:59:36 2017
From: ldecicco at usgs.gov (DeCicco, Laura)
Date: Fri, 19 May 2017 15:59:36 -0500
Subject: [R-pkg-devel] Warning: Installed R
In-Reply-To: <CAFXq+SvkCO+gKNGD15cUSQkpui598Cp2S0YsWcvVOV5t24LPEg@mail.gmail.com>
References: <CAFXq+SvkCO+gKNGD15cUSQkpui598Cp2S0YsWcvVOV5t24LPEg@mail.gmail.com>
Message-ID: <CAFXq+Stv3PMokWZ9QOcsRSnGCfHajaWOAJF7gLzdMF3YJ=L1Bw@mail.gmail.com>

Right after I sent this email, I got another email from CRAN accepting the
package....so I think my guess was correct.

If you get a similar message in the future, wait for awhile to see if they
manually accept the package. Thanks especially to Uwe Ligges!

On Fri, May 19, 2017 at 3:48 PM, DeCicco, Laura <ldecicco at usgs.gov> wrote:

> I am unable to "pass the incoming checks automatically" to submit to CRAN
> because I am getting the following Warning:
>
> Warning: Installed R (R Under development (unstable) (2017-05-18 r72697))
> different from R used to build dplyr (R Under development (unstable)
> (2017-05-18 r72687)).
> Please reinstall dplyr to avoid random crashes or undefined behavior.
>
> This sounds to me like a problem on CRAN's end...but as a sanity check, is
> there something in my package that could trigger that warning?
>
> Thanks in advanced!
>
>


-- 
Laura DeCicco | U.S. Geological Survey | Office of Water Information
608-821-3857 | https://owi.usgs.gov/datascience/

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Sat May 20 09:41:08 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sat, 20 May 2017 09:41:08 +0200
Subject: [R-pkg-devel] Warning: Installed R
In-Reply-To: <CAFXq+Stv3PMokWZ9QOcsRSnGCfHajaWOAJF7gLzdMF3YJ=L1Bw@mail.gmail.com>
References: <CAFXq+SvkCO+gKNGD15cUSQkpui598Cp2S0YsWcvVOV5t24LPEg@mail.gmail.com>
 <CAFXq+Stv3PMokWZ9QOcsRSnGCfHajaWOAJF7gLzdMF3YJ=L1Bw@mail.gmail.com>
Message-ID: <e4b3611e-4b2c-3bda-d413-a1df41415c73@statistik.tu-dortmund.de>



On 19.05.2017 22:59, DeCicco, Laura wrote:
> Right after I sent this email, I got another email from CRAN accepting the
> package....so I think my guess was correct.
>
> If you get a similar message in the future, wait for awhile to see if they
> manually accept the package. Thanks especially to Uwe Ligges!

This was checked with a recent submission of package dplyr that was 
about to be published on CRAN at the same time but was a bit too 
restrictive about R verisons.

Best,
Uwe Ligges


>
> On Fri, May 19, 2017 at 3:48 PM, DeCicco, Laura <ldecicco at usgs.gov> wrote:
>
>> I am unable to "pass the incoming checks automatically" to submit to CRAN
>> because I am getting the following Warning:
>>
>> Warning: Installed R (R Under development (unstable) (2017-05-18 r72697))
>> different from R used to build dplyr (R Under development (unstable)
>> (2017-05-18 r72687)).
>> Please reinstall dplyr to avoid random crashes or undefined behavior.
>>
>> This sounds to me like a problem on CRAN's end...but as a sanity check, is
>> there something in my package that could trigger that warning?
>>
>> Thanks in advanced!
>>
>>
>
>


From martinleewatts at gmail.com  Thu May 18 16:34:57 2017
From: martinleewatts at gmail.com (Martin Watts)
Date: Thu, 18 May 2017 15:34:57 +0100
Subject: [R-pkg-devel] R force download of specific package versions in
	DESCRIPTION file
Message-ID: <CAKDTPH1vE9yEeNQnF9J-QcbAsj_42x7TKEiOCaBB+EJwPTkr8g@mail.gmail.com>

I have created a package (which I host on a local server) that I have set
up to depend on exact versions of other packages, i.e my DESCRIPTION file
looks like this:

Package: myPackage
Depends:
    R (>= 3.2.5)
Imports:
    dplyr (== 0.5.0),
    lazyeval (== 0.2.0),
    lubridate (== 1.6.0),
    magrittr (== 1.5),
    reshape2 (== 1.4.2)


My expectation is that when I run install.packages('myPackage') that each
of these specific dependency versions will be installed, but this is not
the case. It looks like if a dependent package is not present at all then
it is installed to the correct version, but when it is present at a LATER
version it is not rolled-back to the desired version.

Is there a way that we can force all requested versions of these packages
to be installed? We would like this behaviour as we'd like a way to
guarantee that all R environments are exactly the same when running this
code.

Note that I've been testing using devtools::install, but I assume that this
mirrors the behaviour of install.packages.
Also posted on SO: http://stackoverflow.com/questions/44028355/r-force-
download-of-specific-package-versions-in-description-file

Thanks,
Martin

	[[alternative HTML version deleted]]


From daattali at gmail.com  Fri May 19 20:18:50 2017
From: daattali at gmail.com (Dean Attali)
Date: Fri, 19 May 2017 14:18:50 -0400
Subject: [R-pkg-devel] Pretest failed - pandoc could not fetch local file
Message-ID: <CA+j8Z+mJzRqoCJzTvWMF1kr+MszBZXwRQuHS+LSO0VkR5ro-9g@mail.gmail.com>

I'm trying to submit an update to a package 'ddpcr'

Here are the pretest logs:
https://win-builder.r-project.org/incoming_pretest/170519_074459_ddpcr_18/00check.log

I get a warning about pandoc not being able to find an image file. This
file path exists and has not changed from the previous submission, and
previous submissions did not have this issue.

Exact error:

Conversion of 'README.md' failed:
pandoc.exe: Could not fetch
vignettes/overview_files/figure-markdown_strict/quickstart-1.png
vignettes/overview_files/figure-markdown_strict/quickstart-1.png:
openBinaryFile: does not exist (No such file or directory)

You can verify that the file path does exist, as you can see on the github
repo:
https://github.com/daattali/ddpcr/blob/master/vignettes/overview_files/figure-markdown_strict/quickstart-1.png

Could anyone help me understand why I'm getting this error, and why it
never happened before even though nothing has changed?

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Sun May 21 15:09:28 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 21 May 2017 09:09:28 -0400
Subject: [R-pkg-devel] R force download of specific package versions in
 DESCRIPTION file
In-Reply-To: <CAKDTPH1vE9yEeNQnF9J-QcbAsj_42x7TKEiOCaBB+EJwPTkr8g@mail.gmail.com>
References: <CAKDTPH1vE9yEeNQnF9J-QcbAsj_42x7TKEiOCaBB+EJwPTkr8g@mail.gmail.com>
Message-ID: <bd95074a-ce44-5c79-7f14-898d7e528544@gmail.com>

On 18/05/2017 10:34 AM, Martin Watts wrote:
> I have created a package (which I host on a local server) that I have set
> up to depend on exact versions of other packages, i.e my DESCRIPTION file
> looks like this:
>
> Package: myPackage
> Depends:
>     R (>= 3.2.5)
> Imports:
>     dplyr (== 0.5.0),
>     lazyeval (== 0.2.0),
>     lubridate (== 1.6.0),
>     magrittr (== 1.5),
>     reshape2 (== 1.4.2)
>
>
> My expectation is that when I run install.packages('myPackage') that each
> of these specific dependency versions will be installed, but this is not
> the case. It looks like if a dependent package is not present at all then
> it is installed to the correct version, but when it is present at a LATER
> version it is not rolled-back to the desired version.

That could leave your library in an unusable state.  Suppose one package 
requires reshape2 1.4.2, and a later install requires reshape2 1.4.1. 
Then the second install shouldn't roll back the version of reshape2 or 
it would break the first package.

It's also wrong if it allows the second package to install with 1.4.2 in 
place; that sounds like a bug.

>
> Is there a way that we can force all requested versions of these packages
> to be installed? We would like this behaviour as we'd like a way to
> guarantee that all R environments are exactly the same when running this
> code.

Uninstall everything before installing the new one.

There are also a couple of efforts for reproducing exact environments. 
Can't think of the names right now.

> Note that I've been testing using devtools::install, but I assume that this
> mirrors the behaviour of install.packages.

You should test the code you're complaining about, not some other code. 
All we know from what you've reported is that devtools::install has a 
bug. We don't know that install.packages has the same bug.

Duncan Murdoch

> Also posted on SO: http://stackoverflow.com/questions/44028355/r-force-
> download-of-specific-package-versions-in-description-file
>
> Thanks,
> Martin
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ligges at statistik.tu-dortmund.de  Sun May 21 18:04:10 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sun, 21 May 2017 18:04:10 +0200
Subject: [R-pkg-devel] Pretest failed - pandoc could not fetch local file
In-Reply-To: <CA+j8Z+mJzRqoCJzTvWMF1kr+MszBZXwRQuHS+LSO0VkR5ro-9g@mail.gmail.com>
References: <CA+j8Z+mJzRqoCJzTvWMF1kr+MszBZXwRQuHS+LSO0VkR5ro-9g@mail.gmail.com>
Message-ID: <e40f6e7e-4690-726d-837a-cd194aa5aad2@statistik.tu-dortmund.de>

Please take the package tarball you submitted to CRAN and unpack it. It 
does *not* contain the files.

Best,
Uwe Ligges



On 19.05.2017 20:18, Dean Attali wrote:
> I'm trying to submit an update to a package 'ddpcr'
>
> Here are the pretest logs:
> https://win-builder.r-project.org/incoming_pretest/170519_074459_ddpcr_18/00check.log
>
> I get a warning about pandoc not being able to find an image file. This
> file path exists and has not changed from the previous submission, and
> previous submissions did not have this issue.
>
> Exact error:
>
> Conversion of 'README.md' failed:
> pandoc.exe: Could not fetch
> vignettes/overview_files/figure-markdown_strict/quickstart-1.png
> vignettes/overview_files/figure-markdown_strict/quickstart-1.png:
> openBinaryFile: does not exist (No such file or directory)
>
> You can verify that the file path does exist, as you can see on the github
> repo:
> https://github.com/daattali/ddpcr/blob/master/vignettes/overview_files/figure-markdown_strict/quickstart-1.png
>
> Could anyone help me understand why I'm getting this error, and why it
> never happened before even though nothing has changed?
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From daattali at gmail.com  Mon May 22 00:14:41 2017
From: daattali at gmail.com (Dean Attali)
Date: Sun, 21 May 2017 18:14:41 -0400
Subject: [R-pkg-devel] Pretest failed - pandoc could not fetch local file
In-Reply-To: <e40f6e7e-4690-726d-837a-cd194aa5aad2@statistik.tu-dortmund.de>
References: <CA+j8Z+mJzRqoCJzTvWMF1kr+MszBZXwRQuHS+LSO0VkR5ro-9g@mail.gmail.com>
 <e40f6e7e-4690-726d-837a-cd194aa5aad2@statistik.tu-dortmund.de>
Message-ID: <CA+j8Z+n6rVKFW61OgkNyOocmud5j+gD3msq2-riYWKe90utq2w@mail.gmail.com>

Thank you, you're right, I never realized the README on CRAN didn't show
the images.

Is there a way to force 'R CMD build' to include the images that are
located in the vignettes directory?

---
Dean Attali
President & CEO
AttaliTech Ltd
http://AttaliTech.com <http://attalitech.com>

On 21 May 2017 at 12:04, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:

> Please take the package tarball you submitted to CRAN and unpack it. It
> does *not* contain the files.
>
> Best,
> Uwe Ligges
>
>
>
>
> On 19.05.2017 20:18, Dean Attali wrote:
>
>> I'm trying to submit an update to a package 'ddpcr'
>>
>> Here are the pretest logs:
>> https://win-builder.r-project.org/incoming_pretest/170519_07
>> 4459_ddpcr_18/00check.log
>>
>> I get a warning about pandoc not being able to find an image file. This
>> file path exists and has not changed from the previous submission, and
>> previous submissions did not have this issue.
>>
>> Exact error:
>>
>> Conversion of 'README.md' failed:
>> pandoc.exe: Could not fetch
>> vignettes/overview_files/figure-markdown_strict/quickstart-1.png
>> vignettes/overview_files/figure-markdown_strict/quickstart-1.png:
>> openBinaryFile: does not exist (No such file or directory)
>>
>> You can verify that the file path does exist, as you can see on the github
>> repo:
>> https://github.com/daattali/ddpcr/blob/master/vignettes/over
>> view_files/figure-markdown_strict/quickstart-1.png
>>
>> Could anyone help me understand why I'm getting this error, and why it
>> never happened before even though nothing has changed?
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Mon May 22 01:25:29 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 21 May 2017 19:25:29 -0400
Subject: [R-pkg-devel] Pretest failed - pandoc could not fetch local file
In-Reply-To: <CA+j8Z+n6rVKFW61OgkNyOocmud5j+gD3msq2-riYWKe90utq2w@mail.gmail.com>
References: <CA+j8Z+mJzRqoCJzTvWMF1kr+MszBZXwRQuHS+LSO0VkR5ro-9g@mail.gmail.com>
 <e40f6e7e-4690-726d-837a-cd194aa5aad2@statistik.tu-dortmund.de>
 <CA+j8Z+n6rVKFW61OgkNyOocmud5j+gD3msq2-riYWKe90utq2w@mail.gmail.com>
Message-ID: <27782361-3e04-c4da-d1eb-f3a0bfbfe3a8@gmail.com>

On 21/05/2017 6:14 PM, Dean Attali wrote:
> Thank you, you're right, I never realized the README on CRAN didn't show
> the images.
>
> Is there a way to force 'R CMD build' to include the images that are
> located in the vignettes directory?

No, but you can include those files in some directory under inst, e.g. 
inst/images.  Then R code system.file("images/foo.png", package = "pkg") 
will give you the filename.

In most cases this isn't necessary, because in most vignettes figures 
are produced by the R code, but obviously there are exceptions.

Duncan Murdoch

>
> ---
> Dean Attali
> President & CEO
> AttaliTech Ltd
> http://AttaliTech.com <http://attalitech.com>
>
> On 21 May 2017 at 12:04, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>
>> Please take the package tarball you submitted to CRAN and unpack it. It
>> does *not* contain the files.
>>
>> Best,
>> Uwe Ligges
>>
>>
>>
>>
>> On 19.05.2017 20:18, Dean Attali wrote:
>>
>>> I'm trying to submit an update to a package 'ddpcr'
>>>
>>> Here are the pretest logs:
>>> https://win-builder.r-project.org/incoming_pretest/170519_07
>>> 4459_ddpcr_18/00check.log
>>>
>>> I get a warning about pandoc not being able to find an image file. This
>>> file path exists and has not changed from the previous submission, and
>>> previous submissions did not have this issue.
>>>
>>> Exact error:
>>>
>>> Conversion of 'README.md' failed:
>>> pandoc.exe: Could not fetch
>>> vignettes/overview_files/figure-markdown_strict/quickstart-1.png
>>> vignettes/overview_files/figure-markdown_strict/quickstart-1.png:
>>> openBinaryFile: does not exist (No such file or directory)
>>>
>>> You can verify that the file path does exist, as you can see on the github
>>> repo:
>>> https://github.com/daattali/ddpcr/blob/master/vignettes/over
>>> view_files/figure-markdown_strict/quickstart-1.png
>>>
>>> Could anyone help me understand why I'm getting this error, and why it
>>> never happened before even though nothing has changed?
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From Sebastian.Kopf at colorado.edu  Mon May 22 03:48:53 2017
From: Sebastian.Kopf at colorado.edu (Sebastian Kopf)
Date: Sun, 21 May 2017 19:48:53 -0600
Subject: [R-pkg-devel] =?utf-8?q?What_is_the_proper_way_to_include_README?=
	=?utf-8?q?=2ERmd_generated_png=E2=80=99s_for_package_submission_to?=
	=?utf-8?q?_CRAN=3F?=
Message-ID: <CABOPd30Ts2hSvhE+46Cp+vxom-Q2_9-ALw_LCaqk_W5PtayYCg@mail.gmail.com>

Hi all,

I?m stuck trying to figure out the appropriate way to include figures
generated by a README.Rmd for package submission to CRAN. Any advice much
appreciated. Here is the problem:

 - I generated an RMarkdown package README using
`devtools::use_readme_rmd()`, leaving the chunk options intact (i.e.
`fig.path=?README-?`)

 - I included basic instructions and links to the vignettes but would also
like to include an example figure so I added a chunk in the README.Rmd that
generates and correctly saves the resulting figure in README-example-1.png

 - The package passes `devtools::check(cran = TRUE)` without errors,
warnings or notes but generates a warning on win-builder because of the
figure with the following message:



*Conversion of 'README.md' failed:pandoc.exe: Could not fetch
README-example-1.pngREADME-example-1.png: openBinaryFile: does not exist
(No such file or directory) *

I understand that this is correct behavior because the file is of course
explicitly excluded from the build (`^README-.*\.png$` in .Rbuildignore),
and without this line in .Rbuildignore I would get a different warning that
this png should indeed not be part of the build.

What I could not figure out is how I should proceed with this so it passes
win_builder.

I checked how this is done in the ggplot2 GitHub repository (which also
includes a figure in its README.md that is generated by a README.Rmd) and
made sure my .Rbuildignore and other settings are all correct. I eventually
realized that the README.html generated on CRAN for ggplot2 actually does
not have the png included either (
https://cran.r-project.org/web/packages/ggplot2/README.html) so perhaps
this is just not possible and I need to communicate to win_builder that it
will indeed be missing this png in some way? Or perhaps I should just avoid
having an example figure in the README altogether?

Any help much appreciated, I apologize if this turns out to be a trivial
question and there is some different way I should be generating the README
for submission to CRAN.

Best regards,
Sebastian

	[[alternative HTML version deleted]]


From tim.appelhans at gmail.com  Mon May 22 07:49:23 2017
From: tim.appelhans at gmail.com (Tim Appelhans)
Date: Mon, 22 May 2017 07:49:23 +0200
Subject: [R-pkg-devel]
 =?utf-8?q?What_is_the_proper_way_to_include_README?=
 =?utf-8?q?=2ERmd_generated_png=E2=80=99s_for_package_submission_to_CRAN?=
 =?utf-8?q?=3F?=
In-Reply-To: <CABOPd30Ts2hSvhE+46Cp+vxom-Q2_9-ALw_LCaqk_W5PtayYCg@mail.gmail.com>
References: <CABOPd30Ts2hSvhE+46Cp+vxom-Q2_9-ALw_LCaqk_W5PtayYCg@mail.gmail.com>
Message-ID: <aa295492-2d37-bd85-49bc-03f74cffac71@gmail.com>

I don't know if this is the proper way but if you host your package on 
github what you can do is add the image you want to be displayed in a 
'inst' or 'docs' (in case you use pkgdown) folder push to github and 
then include a link to that image in README.md. This is how we do this 
in mapview

https://github.com/r-spatial/mapview/blob/master/README.md

which shows up fine on CRAN too

https://cran.r-project.org/web/packages/mapview/README.html

Best

Tim

On 22.05.2017 03:48, Sebastian Kopf wrote:
> Hi all,
>
> I?m stuck trying to figure out the appropriate way to include figures
> generated by a README.Rmd for package submission to CRAN. Any advice much
> appreciated. Here is the problem:
>
>   - I generated an RMarkdown package README using
> `devtools::use_readme_rmd()`, leaving the chunk options intact (i.e.
> `fig.path=?README-?`)
>
>   - I included basic instructions and links to the vignettes but would also
> like to include an example figure so I added a chunk in the README.Rmd that
> generates and correctly saves the resulting figure in README-example-1.png
>
>   - The package passes `devtools::check(cran = TRUE)` without errors,
> warnings or notes but generates a warning on win-builder because of the
> figure with the following message:
>
>
>
> *Conversion of 'README.md' failed:pandoc.exe: Could not fetch
> README-example-1.pngREADME-example-1.png: openBinaryFile: does not exist
> (No such file or directory) *
>
> I understand that this is correct behavior because the file is of course
> explicitly excluded from the build (`^README-.*\.png$` in .Rbuildignore),
> and without this line in .Rbuildignore I would get a different warning that
> this png should indeed not be part of the build.
>
> What I could not figure out is how I should proceed with this so it passes
> win_builder.
>
> I checked how this is done in the ggplot2 GitHub repository (which also
> includes a figure in its README.md that is generated by a README.Rmd) and
> made sure my .Rbuildignore and other settings are all correct. I eventually
> realized that the README.html generated on CRAN for ggplot2 actually does
> not have the png included either (
> https://cran.r-project.org/web/packages/ggplot2/README.html) so perhaps
> this is just not possible and I need to communicate to win_builder that it
> will indeed be missing this png in some way? Or perhaps I should just avoid
> having an example figure in the README altogether?
>
> Any help much appreciated, I apologize if this turns out to be a trivial
> question and there is some different way I should be generating the README
> for submission to CRAN.
>
> Best regards,
> Sebastian
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Tim Appelhans
Research Specialist, Geomarketing
GfK | Bamberger Str. 6, 90425 N?rnberg | Germany
Postal address: Nordwestring 101 | 90419 N?rnberg


From jenny at stat.ubc.ca  Mon May 22 07:56:14 2017
From: jenny at stat.ubc.ca (Jenny Bryan)
Date: Sun, 21 May 2017 22:56:14 -0700
Subject: [R-pkg-devel]
 =?utf-8?q?What_is_the_proper_way_to_include_README?=
 =?utf-8?q?=2ERmd_generated_png=E2=80=99s_for_package_submission_to_CRAN?=
 =?utf-8?q?=3F?=
In-Reply-To: <CABOPd30Ts2hSvhE+46Cp+vxom-Q2_9-ALw_LCaqk_W5PtayYCg@mail.gmail.com>
References: <CABOPd30Ts2hSvhE+46Cp+vxom-Q2_9-ALw_LCaqk_W5PtayYCg@mail.gmail.com>
Message-ID: <D9B43E40-8938-47CB-B4A3-76245189714F@stat.ubc.ca>

Hi Sebastian,

Many packages on CRAN have the problem yours exhibits and, as they update, will also need to address it. In mid-March Kurt Hornik emailed the associated maintainers to notify them that their package's README.html uses images that do not ship with the package.

Here's the most important passage from that email re: how to remedy:

> If the images are also used for vignettes or Rd files, you can put them
> in the 'vignettes' or 'man/figures' directories.  Otherwise, please put
> them in the top-level 'tools' directory, or a subdirectory of it.

So you'll need to change the fig.path in the setup chunk. There's already an issue in devtools to change its default (https://github.com/hadley/devtools/issues/1477).

-- Jenny

> On May 21, 2017, at 6:48 PM, Sebastian Kopf <Sebastian.Kopf at colorado.edu> wrote:
> 
> Hi all,
> 
> I?m stuck trying to figure out the appropriate way to include figures
> generated by a README.Rmd for package submission to CRAN. Any advice much
> appreciated. Here is the problem:
> 
> - I generated an RMarkdown package README using
> `devtools::use_readme_rmd()`, leaving the chunk options intact (i.e.
> `fig.path=?README-?`)
> 
> - I included basic instructions and links to the vignettes but would also
> like to include an example figure so I added a chunk in the README.Rmd that
> generates and correctly saves the resulting figure in README-example-1.png
> 
> - The package passes `devtools::check(cran = TRUE)` without errors,
> warnings or notes but generates a warning on win-builder because of the
> figure with the following message:
> 
> 
> 
> *Conversion of 'README.md' failed:pandoc.exe: Could not fetch
> README-example-1.pngREADME-example-1.png: openBinaryFile: does not exist
> (No such file or directory) *
> 
> I understand that this is correct behavior because the file is of course
> explicitly excluded from the build (`^README-.*\.png$` in .Rbuildignore),
> and without this line in .Rbuildignore I would get a different warning that
> this png should indeed not be part of the build.
> 
> What I could not figure out is how I should proceed with this so it passes
> win_builder.
> 
> I checked how this is done in the ggplot2 GitHub repository (which also
> includes a figure in its README.md that is generated by a README.Rmd) and
> made sure my .Rbuildignore and other settings are all correct. I eventually
> realized that the README.html generated on CRAN for ggplot2 actually does
> not have the png included either (
> https://cran.r-project.org/web/packages/ggplot2/README.html) so perhaps
> this is just not possible and I need to communicate to win_builder that it
> will indeed be missing this png in some way? Or perhaps I should just avoid
> having an example figure in the README altogether?
> 
> Any help much appreciated, I apologize if this turns out to be a trivial
> question and there is some different way I should be generating the README
> for submission to CRAN.
> 
> Best regards,
> Sebastian
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From famuvie at gmail.com  Mon May 22 09:52:22 2017
From: famuvie at gmail.com (=?UTF-8?Q?Facundo_Mu=c3=b1oz?=)
Date: Mon, 22 May 2017 09:52:22 +0200
Subject: [R-pkg-devel] R force download of specific package versions in
 DESCRIPTION file
In-Reply-To: <CAKDTPH1vE9yEeNQnF9J-QcbAsj_42x7TKEiOCaBB+EJwPTkr8g@mail.gmail.com>
References: <CAKDTPH1vE9yEeNQnF9J-QcbAsj_42x7TKEiOCaBB+EJwPTkr8g@mail.gmail.com>
Message-ID: <f05a8b93-c853-fd25-0d33-feddfb813564@gmail.com>

I think Packrat [1] might help:

- Isolated: ... each project its own private package library.
- Reproducible: ... exact versions are the ones that get installed ...

?acu.-

[1] https://rstudio.github.io/packrat/


On 05/18/2017 04:34 PM, Martin Watts wrote:
> I have created a package (which I host on a local server) that I have set
> up to depend on exact versions of other packages, i.e my DESCRIPTION file
> looks like this:
>
> Package: myPackage
> Depends:
>     R (>= 3.2.5)
> Imports:
>     dplyr (== 0.5.0),
>     lazyeval (== 0.2.0),
>     lubridate (== 1.6.0),
>     magrittr (== 1.5),
>     reshape2 (== 1.4.2)
>
>
> My expectation is that when I run install.packages('myPackage') that each
> of these specific dependency versions will be installed, but this is not
> the case. It looks like if a dependent package is not present at all then
> it is installed to the correct version, but when it is present at a LATER
> version it is not rolled-back to the desired version.
>
> Is there a way that we can force all requested versions of these packages
> to be installed? We would like this behaviour as we'd like a way to
> guarantee that all R environments are exactly the same when running this
> code.
>
> Note that I've been testing using devtools::install, but I assume that this
> mirrors the behaviour of install.packages.
> Also posted on SO: http://stackoverflow.com/questions/44028355/r-force-
> download-of-specific-package-versions-in-description-file
>
> Thanks,
> Martin
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From thibault.vatter at gmail.com  Tue May 23 16:34:00 2017
From: thibault.vatter at gmail.com (Thibault Vatter)
Date: Tue, 23 May 2017 10:34:00 -0400
Subject: [R-pkg-devel] CRAN and cmake
Message-ID: <CAFyih6AWHb6hyCKbrpx6WWr1g_Z2e_5W3tyFpU9voQDZd78DVg@mail.gmail.com>

Hi,

Back in 2015, there was a discussion on this list about CRAN and cmake.

As explained by Gabor at the time, it would be useful to have cmake in a R
package.

Furthermore, Gregory mentioned that there was something available on GitHub:

https://github.com/stnava/cmaker

Since it seems that the package was CRAN-ready two years ago, I wondered
what happened?

Would an R package containing cmake be accepted in CRAN?

Best,
Thibault

	[[alternative HTML version deleted]]


From edd at debian.org  Tue May 23 17:56:01 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 23 May 2017 10:56:01 -0500
Subject: [R-pkg-devel] CRAN and cmake
In-Reply-To: <CAFyih6AWHb6hyCKbrpx6WWr1g_Z2e_5W3tyFpU9voQDZd78DVg@mail.gmail.com>
References: <CAFyih6AWHb6hyCKbrpx6WWr1g_Z2e_5W3tyFpU9voQDZd78DVg@mail.gmail.com>
Message-ID: <22820.23441.279752.463031@max.eddelbuettel.com>


On 23 May 2017 at 10:34, Thibault Vatter wrote:
| Hi,
| 
| Back in 2015, there was a discussion on this list about CRAN and cmake.
| 
| As explained by Gabor at the time, it would be useful to have cmake in a R
| package.
| 
| Furthermore, Gregory mentioned that there was something available on GitHub:
| 
| https://github.com/stnava/cmaker
| 
| Since it seems that the package was CRAN-ready two years ago, I wondered
| what happened?
| 
| Would an R package containing cmake be accepted in CRAN?

Yes. Many of them do.

A nice benefit of Gabor's CRAN mirror on GitHub is access to the GitHub.
Here I constrain on user:cran (to get just that mirror, and nothing) and
CMakeLists.txt.  Seems to find 47 repos -- corresponding to 47 packages.

https://github.com/search?q=user%3Acran+CMakeLists.txt&type=Code&utf8=%E2%9C%93

Hth, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From thibault.vatter at gmail.com  Tue May 23 18:27:37 2017
From: thibault.vatter at gmail.com (Thibault Vatter)
Date: Tue, 23 May 2017 12:27:37 -0400
Subject: [R-pkg-devel] CRAN and cmake
In-Reply-To: <22820.23441.279752.463031@max.eddelbuettel.com>
References: <CAFyih6AWHb6hyCKbrpx6WWr1g_Z2e_5W3tyFpU9voQDZd78DVg@mail.gmail.com>
 <22820.23441.279752.463031@max.eddelbuettel.com>
Message-ID: <CAFyih6Cd16nR86PNdyM4WY9KVHkDNp0d3FQLk9rwd8o1PatuFg@mail.gmail.com>

My bad, my question was not precise enough: by "an R package containing
cmake", I meant "an R package containing cmake itself" in order to be able
to use cmake e.g. when building an R package from source.

A little bit of context: I am trying to write an R interface to a C++
library where cmake was used instead of autotools, I would like my
configure.ac file to contain something like:

$("${R_HOME}/bin/Rscript download.file(url='${LIBRARY_URL}',
destfile='${LIBRARY_TGZ}')")
$("${R_HOME}/bin/Rscript untar(tarfile='${LIBRARY_TGZ}')")
$("${R_HOME}/bin/Rscript cmake('LIBRARY/CMakeLists.txt')")

In https://github.com/stnava/cmaker/issues/2, it was mentioned that the
cmaker package was refused from CRAN mostly because of a cross-platform
issue (mostly windows portability).

Concerning the cross-platform issue for windows, Gabor suggested to
"download [the cmake binaries] at install time, like the rest of the
rwinlib stuff".

Therefore, I wonder whether it would be wort trying to work on an updated
version of cmaker or if this is indeed "dead in the water".

Best,
Thibault


On Tue, May 23, 2017 at 11:56 AM, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 23 May 2017 at 10:34, Thibault Vatter wrote:
> | Hi,
> |
> | Back in 2015, there was a discussion on this list about CRAN and cmake.
> |
> | As explained by Gabor at the time, it would be useful to have cmake in a
> R
> | package.
> |
> | Furthermore, Gregory mentioned that there was something available on
> GitHub:
> |
> | https://github.com/stnava/cmaker
> |
> | Since it seems that the package was CRAN-ready two years ago, I wondered
> | what happened?
> |
> | Would an R package containing cmake be accepted in CRAN?
>
> Yes. Many of them do.
>
> A nice benefit of Gabor's CRAN mirror on GitHub is access to the GitHub.
> Here I constrain on user:cran (to get just that mirror, and nothing) and
> CMakeLists.txt.  Seems to find 47 repos -- corresponding to 47 packages.
>
> https://github.com/search?q=user%3Acran+CMakeLists.txt&type=
> Code&utf8=%E2%9C%93
>
> Hth, Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From spencer.graves at effectivedefense.org  Tue May 23 18:36:13 2017
From: spencer.graves at effectivedefense.org (Spencer Graves)
Date: Tue, 23 May 2017 11:36:13 -0500
Subject: [R-pkg-devel] CRAN and cmake
In-Reply-To: <22820.23441.279752.463031@max.eddelbuettel.com>
References: <CAFyih6AWHb6hyCKbrpx6WWr1g_Z2e_5W3tyFpU9voQDZd78DVg@mail.gmail.com>
 <22820.23441.279752.463031@max.eddelbuettel.com>
Message-ID: <39a40346-3370-b4bd-bd41-30a182b79f03@effectivedefense.org>


On 2017-05-23 10:56 AM, Dirk Eddelbuettel wrote:
> On 23 May 2017 at 10:34, Thibault Vatter wrote:
> | Hi,
> |
> | Back in 2015, there was a discussion on this list about CRAN and cmake.
> |
> | As explained by Gabor at the time, it would be useful to have cmake in a R
> | package.
> |
> | Furthermore, Gregory mentioned that there was something available on GitHub:
> |
> | https://github.com/stnava/cmaker
> |
> | Since it seems that the package was CRAN-ready two years ago, I wondered
> | what happened?
> |
> | Would an R package containing cmake be accepted in CRAN?
>
> Yes. Many of them do.
>
> A nice benefit of Gabor's CRAN mirror on GitHub is access to the GitHub.
> Here I constrain on user:cran (to get just that mirror, and nothing) and
> CMakeLists.txt.  Seems to find 47 repos -- corresponding to 47 packages.
>
> https://github.com/search?q=user%3Acran+CMakeLists.txt&type=Code&utf8=%E2%9C%93


       How did you construct that search string?


       Do you think something like this should be added to some other 
general search capability like the sos or CRANsearcher packages?


       I ask in part, because there will be a session at useR!2017 on 
"NAVIGATING THE R PACKAGE UNIVERSE", and this seems possibly relevant to 
that discussion.  (That session is scheduled for Wed. July 5, from 17:00 
- 18:30.  The organizers of that session expect that a fair portion of 
that time will be devoted to discussion of other possibilities, hoping 
we can build a team who will work to improve the ability of users to 
find what they want.  See 
"https://user2017.brussels/news/2017/navigating-the-r-package-universe".)


       Spencer Graves
>
> Hth, Dirk
>


From steve at stat.tku.edu.tw  Tue May 23 21:19:34 2017
From: steve at stat.tku.edu.tw (Steve Chen)
Date: Wed, 24 May 2017 03:19:34 +0800
Subject: [R-pkg-devel] cvDetect: an R + OpenCV + Windows webcam/photo
 face/palm/finger detection demo package
Message-ID: <bc6b5246-ce47-25b0-90c3-e00636885cf6@stat.tku.edu.tw>

Hi all,

Since I had't found any R + OpenCV face recognition package through 
Google, so I made a demo package
cvDetect , which shows webcam/picture face/palm/finger recognition 
capability in R.
Currently it's for Windows only, since I don't have webcams in my Linux 
systems so far.

My cvDetect package sources have been upload to

https://github.com/stevechctw/cvDetect

I am just an novice in C++ language, so the purpose of this package is 
just to see if  I can do it  myself.

OpenCV is a big library.  As an novice C++ user,  I am hoping that many 
other experienced C++ experts
can explore more OpenCV functionalities in the future.

Any suggestion or correction of the codes is welcome, thank you.

Steve Chen
Department of Statistics
Tamkang University, Taiwan


From clyde at duke.edu  Tue May 23 23:40:03 2017
From: clyde at duke.edu (Merlise Clyde, Ph.D.)
Date: Tue, 23 May 2017 21:40:03 +0000
Subject: [R-pkg-devel] Help package checks using valgrind
Message-ID: <BD423391-AD8A-474C-8B62-14D5C67CA670@duke.edu>

I am trying to resolve the Additional Issues reported by CRAN @ https://www.stats.ox.ac.uk/pub/bdr/memtests/valgrind/BAS-Ex.Rout for my package BAS which calls C and Fortran.

The output from the above URL is not particularly informative (at least to me) for identifying where the problems are in the source code, as there are  missing file names and line numbers as seen in this snippet from the above url:


> cleanEx()
==9861== Conditional jump or move depends on uninitialised value(s)
==9861==    at 0x403DBF3: ???
==9861==    by 0x1A694397: ???
==9861==    by 0x1A694397: ???
==9861==    by 0x1A6943B3: ???
==9861==    by 0xFFEFF861F: ???
==9861==  Uninitialised value was created by a heap allocation
==9861==    at 0x4C2BBAD: malloc (/builddir/build/BUILD/valgrind-3.11.0/coregrind/m_replacemalloc/vg_replace_malloc.c:299)
==9861==    by 0x4E5AFE: GetNewPage (svn/R-devel/src/main/memory.c:875)
==9861==    by 0x4E77AF: Rf_allocVector3 (svn/R-devel/src/main/memory.c:2651)
==9861==    by 0x4E79A8: Rf_allocVector (svn/R-devel/src/include/Rinlinedfuns.h:196)
==9861==    by 0x4E79A8: R_alloc (svn/R-devel/src/main/memory.c:2160)
==9861==    by 0x540C52: logicalSubscript (svn/R-devel/src/main/subscript.c:563)
==9861==    by 0x5437BE: realSubscript (svn/R-devel/src/main/subscript.c:723)
==9861==    by 0x5437BE: Rf_makeSubscript (svn/R-devel/src/main/subscript.c:980)
==9861==    by 0x5455AB: VectorSubset (svn/R-devel/src/main/subset.c:188)
==9861==    by 0x5455AB: do_subset_dflt (svn/R-devel/src/main/subset.c:826)
==9861==    by 0x4A8539: VECSUBSET_PTR (svn/R-devel/src/main/eval.c:5179)
==9861==    by 0x4A8539: bcEval (svn/R-devel/src/main/eval.c:6618)
==9861==    by 0x4B685F: Rf_eval (svn/R-devel/src/main/eval.c:624)
==9861==    by 0x4B894E: R_execClosure (svn/R-devel/src/main/eval.c:1614)
==9861==    by 0x4EA827: dispatchMethod (svn/R-devel/src/main/objects.c:335)
==9861==    by 0x4EAC12: Rf_usemethod (svn/R-devel/src/main/objects.c:375)
==9861==



To see if I could replicate locally and debug, I have built R 3.4.0 with valgrind-3.11.0 on FC 23  using the configuration options

./configure --with-valgrind-instrumentation=2 --with-system-valgrind-headers=yes CFLAGS='-g -O0' FCFLAGS='-g -O0?

My package is built also using -g and -O0 for debugging and turning off optimization.

Running  valgrind on the output from examples/vignettes from R CMD check

R -d "valgrind --tool=memcheck --leak-check=full --track-origins=yes" --vanilla < BAS.Rcheck/BAS-Ex.R

produces similar output as from CRAN -  i.e. no line numbers to code  (I have also tried travis-CI which indicates no problems and  R-devel under docker  which also replicates the non informative messages of CRAN :-)  so clearly missing something to produce the line numbers.

Questions:


1) Are these problems with libraries outside of my code  or fortran  and I can ask CRAN to ignore? How can I tell if these are problems with system libraries (i.e. configuration on my system, but also those for CRAN) rather than my package code?

2) Any suggestions for other configuration options (system, R, package. valgrind) that would provide more informative output?
    (for Fedora or any other platforms using docker)

3) Any alternative methods recommended for tracking this down instead of using valgrind?



Thanks!
Merlise

> sessionInfo()
R version 3.4.0 (2017-04-21)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Fedora 23 (Twenty Three)

Matrix products: default
BLAS: /usr/local/lib64/R/lib/libRblas.so
LAPACK: /usr/local/lib64/R/lib/libRlapack.so


source code is at http://github.com/merliseclyde/BAS



Merlise A Clyde
Professor & Chair Department of Statistical Science
Duke University
http://stat.duke.edu/~clyde

clyde at duke.edu<mailto:clyde at duke.edu>



	[[alternative HTML version deleted]]


From pdalgd at gmail.com  Wed May 24 00:40:06 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Wed, 24 May 2017 00:40:06 +0200
Subject: [R-pkg-devel] Help package checks using valgrind
In-Reply-To: <BD423391-AD8A-474C-8B62-14D5C67CA670@duke.edu>
References: <BD423391-AD8A-474C-8B62-14D5C67CA670@duke.edu>
Message-ID: <DE5F1953-1B83-4E65-8A8F-7908A56B480D@gmail.com>


> On 23 May 2017, at 23:40 , Merlise Clyde, Ph.D. <clyde at duke.edu> wrote:
> 
> I am trying to resolve the Additional Issues reported by CRAN @ https://www.stats.ox.ac.uk/pub/bdr/memtests/valgrind/BAS-Ex.Rout for my package BAS which calls C and Fortran.
> 
> The output from the above URL is not particularly informative (at least to me) for identifying where the problems are in the source code, as there are  missing file names and line numbers as seen in this snippet from the above url:
> 

The first of those traces does actually point to something that should be useful to you:

> cleanEx()
==9861== Conditional jump or move depends on uninitialised value(s)
==9861==    at 0x403DBF3: ???
==9861==    by 0x1702DE57: ???
==9861==    by 0x1702DE57: ???
==9861==    by 0x1702DE73: ???
==9861==    by 0xFFEFF861F: ???
==9861==  Uninitialised value was created by a heap allocation
==9861==    at 0x4C2BBAD: malloc (/builddir/build/BUILD/valgrind-3.11.0/coregrind/m_replacemalloc/vg_replace_malloc.c:299)
==9861==    by 0x4E5AFE: GetNewPage (svn/R-devel/src/main/memory.c:875)
==9861==    by 0x4E77AF: Rf_allocVector3 (svn/R-devel/src/main/memory.c:2651)
==9861==    by 0x14B29729: sampleworep (packages/tests-vg/BAS/src/sampleworep.c:395)
==9861==    by 0x47C36D: R_doDotCall (svn/R-devel/src/main/dotcode.c:617)

i.e. you are allocating something at sampleworep.c:395 but it isn't initialized before something somewhere uses its value to make a decision. So possibly you should initialize the vector immediately after allocation.

In the other cases, you seem to be too deep in R internals to let you see the origin in your package, i.e., your stack traces are too short. According to the Valgrind FAQ, you can use --num-callers to make them longer. Figuring out how to pass that to valgrind as invoked by R is, um, left as an exercise for the reader.

-pd

> 
>> cleanEx()
> ==9861== Conditional jump or move depends on uninitialised value(s)
> ==9861==    at 0x403DBF3: ???
> ==9861==    by 0x1A694397: ???
> ==9861==    by 0x1A694397: ???
> ==9861==    by 0x1A6943B3: ???
> ==9861==    by 0xFFEFF861F: ???
> ==9861==  Uninitialised value was created by a heap allocation
> ==9861==    at 0x4C2BBAD: malloc (/builddir/build/BUILD/valgrind-3.11.0/coregrind/m_replacemalloc/vg_replace_malloc.c:299)
> ==9861==    by 0x4E5AFE: GetNewPage (svn/R-devel/src/main/memory.c:875)
> ==9861==    by 0x4E77AF: Rf_allocVector3 (svn/R-devel/src/main/memory.c:2651)
> ==9861==    by 0x4E79A8: Rf_allocVector (svn/R-devel/src/include/Rinlinedfuns.h:196)
> ==9861==    by 0x4E79A8: R_alloc (svn/R-devel/src/main/memory.c:2160)
> ==9861==    by 0x540C52: logicalSubscript (svn/R-devel/src/main/subscript.c:563)
> ==9861==    by 0x5437BE: realSubscript (svn/R-devel/src/main/subscript.c:723)
> ==9861==    by 0x5437BE: Rf_makeSubscript (svn/R-devel/src/main/subscript.c:980)
> ==9861==    by 0x5455AB: VectorSubset (svn/R-devel/src/main/subset.c:188)
> ==9861==    by 0x5455AB: do_subset_dflt (svn/R-devel/src/main/subset.c:826)
> ==9861==    by 0x4A8539: VECSUBSET_PTR (svn/R-devel/src/main/eval.c:5179)
> ==9861==    by 0x4A8539: bcEval (svn/R-devel/src/main/eval.c:6618)
> ==9861==    by 0x4B685F: Rf_eval (svn/R-devel/src/main/eval.c:624)
> ==9861==    by 0x4B894E: R_execClosure (svn/R-devel/src/main/eval.c:1614)
> ==9861==    by 0x4EA827: dispatchMethod (svn/R-devel/src/main/objects.c:335)
> ==9861==    by 0x4EAC12: Rf_usemethod (svn/R-devel/src/main/objects.c:375)
> ==9861==
> 
> 
> 
> To see if I could replicate locally and debug, I have built R 3.4.0 with valgrind-3.11.0 on FC 23  using the configuration options
> 
> ./configure --with-valgrind-instrumentation=2 --with-system-valgrind-headers=yes CFLAGS='-g -O0' FCFLAGS='-g -O0?
> 
> My package is built also using -g and -O0 for debugging and turning off optimization.
> 
> Running  valgrind on the output from examples/vignettes from R CMD check
> 
> R -d "valgrind --tool=memcheck --leak-check=full --track-origins=yes" --vanilla < BAS.Rcheck/BAS-Ex.R
> 
> produces similar output as from CRAN -  i.e. no line numbers to code  (I have also tried travis-CI which indicates no problems and  R-devel under docker  which also replicates the non informative messages of CRAN :-)  so clearly missing something to produce the line numbers.
> 
> Questions:
> 
> 
> 1) Are these problems with libraries outside of my code  or fortran  and I can ask CRAN to ignore? How can I tell if these are problems with system libraries (i.e. configuration on my system, but also those for CRAN) rather than my package code?
> 
> 2) Any suggestions for other configuration options (system, R, package. valgrind) that would provide more informative output?
>    (for Fedora or any other platforms using docker)
> 
> 3) Any alternative methods recommended for tracking this down instead of using valgrind?
> 
> 
> 
> Thanks!
> Merlise
> 
>> sessionInfo()
> R version 3.4.0 (2017-04-21)
> Platform: x86_64-pc-linux-gnu (64-bit)
> Running under: Fedora 23 (Twenty Three)
> 
> Matrix products: default
> BLAS: /usr/local/lib64/R/lib/libRblas.so
> LAPACK: /usr/local/lib64/R/lib/libRlapack.so
> 
> 
> source code is at http://github.com/merliseclyde/BAS
> 
> 
> 
> Merlise A Clyde
> Professor & Chair Department of Statistical Science
> Duke University
> http://stat.duke.edu/~clyde
> 
> clyde at duke.edu<mailto:clyde at duke.edu>
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From edd at debian.org  Wed May 24 01:19:44 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 23 May 2017 18:19:44 -0500
Subject: [R-pkg-devel] CRAN and cmake
In-Reply-To: <39a40346-3370-b4bd-bd41-30a182b79f03@effectivedefense.org>
References: <CAFyih6AWHb6hyCKbrpx6WWr1g_Z2e_5W3tyFpU9voQDZd78DVg@mail.gmail.com>
 <22820.23441.279752.463031@max.eddelbuettel.com>
 <39a40346-3370-b4bd-bd41-30a182b79f03@effectivedefense.org>
Message-ID: <22820.50064.249867.986549@max.eddelbuettel.com>


On 23 May 2017 at 11:36, Spencer Graves wrote:
| On 2017-05-23 10:56 AM, Dirk Eddelbuettel wrote:
| > A nice benefit of Gabor's CRAN mirror on GitHub is access to the GitHub.
| > Here I constrain on user:cran (to get just that mirror, and nothing) and
| > CMakeLists.txt.  Seems to find 47 repos -- corresponding to 47 packages.
| >
| > https://github.com/search?q=user%3Acran+CMakeLists.txt&type=Code&utf8=%E2%9C%93
| 
| 
|        How did you construct that search string?

As I wrote in the preceding paragraph: "user:cran" and "CMakeList.txt".

The rest is a copy and paste of the results page's URL.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From kirill.mueller at ivt.baug.ethz.ch  Wed May 24 09:34:15 2017
From: kirill.mueller at ivt.baug.ethz.ch (=?UTF-8?Q?Kirill_M=c3=bcller?=)
Date: Wed, 24 May 2017 09:34:15 +0200
Subject: [R-pkg-devel] S3 dispatch for select()
Message-ID: <f2723078-ea41-1d53-c19b-9ecf73248125@ivt.baug.ethz.ch>

Hi


When a package defines a select() generic, objects of type list seem to 
be forcibly dispatched to utils::select.list(). This is not the case 
when the generic is defined in a regular R script. I could define a 
select__() generic and forward all select() calls to select__() first, 
but I wonder if there's a better way. Thanks.

Examples below, the first needs the *select* package [1].


Best regards

Kirill


[1] https://github.com/krlmlr/select


# 1. From package:

library(select)
select(letters)
#> [1] "select.default"
select(1:3)
#> [1] "select.default"
select(list(1:3))
#> Error in select.list(list(1:3)): select.list() cannot be used 
non-interactively


# 2. From script

select <- function(x, ...) UseMethod("select")

select.default <- function(x, ...) "select.default"

select.list <- function(x, ...) "select.list"

select(letters)
#> [1] "select.default"
select(1:3)
#> [1] "select.default"
select(list(1:3))
#> [1] "select.list"


From b.rowlingson at lancaster.ac.uk  Wed May 24 13:05:28 2017
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed, 24 May 2017 12:05:28 +0100
Subject: [R-pkg-devel] CRAN and cmake
In-Reply-To: <22820.50064.249867.986549@max.eddelbuettel.com>
References: <CAFyih6AWHb6hyCKbrpx6WWr1g_Z2e_5W3tyFpU9voQDZd78DVg@mail.gmail.com>
 <22820.23441.279752.463031@max.eddelbuettel.com>
 <39a40346-3370-b4bd-bd41-30a182b79f03@effectivedefense.org>
 <22820.50064.249867.986549@max.eddelbuettel.com>
Message-ID: <CANVKczMpjdXA4=25shkcHzrsHGazqCswYhx2SpGXKSyy+q9vYg@mail.gmail.com>

On Wed, May 24, 2017 at 12:19 AM, Dirk Eddelbuettel <edd at debian.org> wrote:
>
> On 23 May 2017 at 11:36, Spencer Graves wrote:
> | On 2017-05-23 10:56 AM, Dirk Eddelbuettel wrote:
> | > A nice benefit of Gabor's CRAN mirror on GitHub is access to the GitHub.
> | > Here I constrain on user:cran (to get just that mirror, and nothing) and
> | > CMakeLists.txt.  Seems to find 47 repos -- corresponding to 47 packages.
> | >
> | > https://github.com/search?q=user%3Acran+CMakeLists.txt&type=Code&utf8=%E2%9C%93
> |
> |
> |        How did you construct that search string?
>
> As I wrote in the preceding paragraph: "user:cran" and "CMakeList.txt".
>
> The rest is a copy and paste of the results page's URL.

If you go to: https://github.com/cran/ and stick something in the
search box for "This organization" you'll get redirected to the search
URL, for example:

https://github.com/search?q=org%3Acran+monkey

I think "cran" is technically an "organization" rather than a "user"
on github, but users and organizations occupy the same namespace so it
probably doesn't matter if the search string has user or org in this
case.

Github also has a REST search API - hasn't anyone wrapped this in R yet?

https://developer.github.com/v3/search/

Barry


> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From csardi.gabor at gmail.com  Wed May 24 13:20:40 2017
From: csardi.gabor at gmail.com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Wed, 24 May 2017 04:20:40 -0700
Subject: [R-pkg-devel] CRAN and cmake
In-Reply-To: <CANVKczMpjdXA4=25shkcHzrsHGazqCswYhx2SpGXKSyy+q9vYg@mail.gmail.com>
References: <CAFyih6AWHb6hyCKbrpx6WWr1g_Z2e_5W3tyFpU9voQDZd78DVg@mail.gmail.com>
 <22820.23441.279752.463031@max.eddelbuettel.com>
 <39a40346-3370-b4bd-bd41-30a182b79f03@effectivedefense.org>
 <22820.50064.249867.986549@max.eddelbuettel.com>
 <CANVKczMpjdXA4=25shkcHzrsHGazqCswYhx2SpGXKSyy+q9vYg@mail.gmail.com>
Message-ID: <CABtg=KnhKw1cmwKs6qZXLCPzLzj4LdeuMreZOCbxgzCDKbQZ=Q@mail.gmail.com>

On Wed, May 24, 2017 at 4:05 AM, Barry Rowlingson
<b.rowlingson at lancaster.ac.uk> wrote:
[...]
> Github also has a REST search API - hasn't anyone wrapped this in R yet?
>
> https://developer.github.com/v3/search/

There is a rather minimal wrapper at https://github.com/r-pkgs/gh#readme
and there is also one here: https://github.com/cscheid/rgithub

It seems that for using the search API, you'll need an API token.

Gabor

[...]


From fernandadebastiani at gmail.com  Wed May 24 18:06:41 2017
From: fernandadebastiani at gmail.com (Fernanda De Bastiani)
Date: Wed, 24 May 2017 12:06:41 -0400
Subject: [R-pkg-devel] compact PDF - vignettes
Message-ID: <CAEFQeysEATdWzAHN6hoYb9rYx_P_jbAi4v7PmTXxc+-BhXWV+g@mail.gmail.com>

Dear Sir/Madam,

please, I am trying to submit a package to CRAN (with a vignette) but I
receive the following warning

* checking sizes of PDF files under 'inst/doc' ... WARNING

  'gs+qpdf' made some significant size reductions:
     compacted 'name.pdf' from 1212Kb to 924Kb
  consider running tools::compactPDF(gs_quality = "ebook") on these files


I use windows sytem and Rstudio. I have added this command
--compact-vignettes="gs+qpdf" in the build option, then I received the
message above. Please what exactly I have to add or change in order to
improve the gs quality to ebook?

Thank you,
Fernanda

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Wed May 24 22:21:08 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 24 May 2017 22:21:08 +0200
Subject: [R-pkg-devel] compact PDF - vignettes
In-Reply-To: <CAEFQeysEATdWzAHN6hoYb9rYx_P_jbAi4v7PmTXxc+-BhXWV+g@mail.gmail.com>
References: <CAEFQeysEATdWzAHN6hoYb9rYx_P_jbAi4v7PmTXxc+-BhXWV+g@mail.gmail.com>
Message-ID: <5901ebc4-cdc0-27ec-f9c6-81d5e3a1034e@statistik.tu-dortmund.de>



On 24.05.2017 18:06, Fernanda De Bastiani wrote:
> Dear Sir/Madam,
> 
> please, I am trying to submit a package to CRAN (with a vignette) but I
> receive the following warning
> 
> * checking sizes of PDF files under 'inst/doc' ... WARNING
> 
>    'gs+qpdf' made some significant size reductions:
>       compacted 'name.pdf' from 1212Kb to 924Kb
>    consider running tools::compactPDF(gs_quality = "ebook") on these files
> 
> 
> I use windows sytem and Rstudio. I have added this command
> --compact-vignettes="gs+qpdf" in the build option, then I received the
> message above. Please what exactly I have to add or change in order to
> improve the gs quality to ebook?

Not sure about RStudio, but in R I'd use
R CMD build --compact-vignettes="both" ...
but note you need to have both gs and qpdf installed and on the PATH.

Best,
Uwe Ligges




> Thank you,
> Fernanda
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From clyde at duke.edu  Thu May 25 04:47:36 2017
From: clyde at duke.edu (Merlise Clyde, Ph.D.)
Date: Thu, 25 May 2017 02:47:36 +0000
Subject: [R-pkg-devel] Help package checks using valgrind
In-Reply-To: <DE5F1953-1B83-4E65-8A8F-7908A56B480D@gmail.com>
References: <BD423391-AD8A-474C-8B62-14D5C67CA670@duke.edu>,
 <DE5F1953-1B83-4E65-8A8F-7908A56B480D@gmail.com>
Message-ID: <BLUPR0501MB900E4693CFA31462AC7B6A3C8FF0@BLUPR0501MB900.namprd05.prod.outlook.com>

Thanks - I missed that one!   After identifying the problem there, and increasing --num-callers in  my .valgrindrc file I can see more of the trace, however, I still have short entries like

> cleanEx()
==2044952== Conditional jump or move depends on uninitialised value(s)
==2044952==    at 0x405A0CB: ???
==2044952==    by 0x189D0A5F: ???
==2044952==    by 0x189D0A5F: ???
==2044952==    by 0x189D0A7B: ???
==2044952==    by 0xFFEFED09F: ???
==2044952==
detaching  package:MASS

Any suggestions on how to get more details on what is occurring at that point?

Thanks!
Merlise
________________________________
From: peter dalgaard <pdalgd at gmail.com>
Sent: Tuesday, May 23, 2017 6:40 PM
To: Merlise Clyde, Ph.D.
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Help package checks using valgrind


> On 23 May 2017, at 23:40 , Merlise Clyde, Ph.D. <clyde at duke.edu> wrote:
>
> I am trying to resolve the Additional Issues reported by CRAN @ https://urldefense.proofpoint.com/v2/url?u=https-3A__www.stats.ox.ac.uk_pub_bdr_memtests_valgrind_BAS-2DEx.Rout&d=DwIFaQ&c=imBPVzF25OnBgGmVOlcsiEgHoG1i6YHLR0Sj_gZ4adc&r=NOkxkvdFOOffXzeTY2kgZQ&m=NwjTuJcFlu_aiLanr5CmvC1iVoHoWRZ7GZRFeq3WOBE&s=58920PEhsbU1YFCH1hHuLt2t9FcOYIAvfZq_swf1lLc&e=  for my package BAS which calls C and Fortran.
>
> The output from the above URL is not particularly informative (at least to me) for identifying where the problems are in the source code, as there are  missing file names and line numbers as seen in this snippet from the above url:
>

The first of those traces does actually point to something that should be useful to you:

> cleanEx()
==9861== Conditional jump or move depends on uninitialised value(s)
==9861==    at 0x403DBF3: ???
==9861==    by 0x1702DE57: ???
==9861==    by 0x1702DE57: ???
==9861==    by 0x1702DE73: ???
==9861==    by 0xFFEFF861F: ???
==9861==  Uninitialised value was created by a heap allocation
==9861==    at 0x4C2BBAD: malloc (/builddir/build/BUILD/valgrind-3.11.0/coregrind/m_replacemalloc/vg_replace_malloc.c:299)
==9861==    by 0x4E5AFE: GetNewPage (svn/R-devel/src/main/memory.c:875)
==9861==    by 0x4E77AF: Rf_allocVector3 (svn/R-devel/src/main/memory.c:2651)
==9861==    by 0x14B29729: sampleworep (packages/tests-vg/BAS/src/sampleworep.c:395)
==9861==    by 0x47C36D: R_doDotCall (svn/R-devel/src/main/dotcode.c:617)

i.e. you are allocating something at sampleworep.c:395 but it isn't initialized before something somewhere uses its value to make a decision. So possibly you should initialize the vector immediately after allocation.

In the other cases, you seem to be too deep in R internals to let you see the origin in your package, i.e., your stack traces are too short. According to the Valgrind FAQ, you can use --num-callers to make them longer. Figuring out how to pass that to valgrind as invoked by R is, um, left as an exercise for the reader.

-pd

>
>> cleanEx()
> ==9861== Conditional jump or move depends on uninitialised value(s)
> ==9861==    at 0x403DBF3: ???
> ==9861==    by 0x1A694397: ???
> ==9861==    by 0x1A694397: ???
> ==9861==    by 0x1A6943B3: ???
> ==9861==    by 0xFFEFF861F: ???
> ==9861==  Uninitialised value was created by a heap allocation
> ==9861==    at 0x4C2BBAD: malloc (/builddir/build/BUILD/valgrind-3.11.0/coregrind/m_replacemalloc/vg_replace_malloc.c:299)
> ==9861==    by 0x4E5AFE: GetNewPage (svn/R-devel/src/main/memory.c:875)
> ==9861==    by 0x4E77AF: Rf_allocVector3 (svn/R-devel/src/main/memory.c:2651)
> ==9861==    by 0x4E79A8: Rf_allocVector (svn/R-devel/src/include/Rinlinedfuns.h:196)
> ==9861==    by 0x4E79A8: R_alloc (svn/R-devel/src/main/memory.c:2160)
> ==9861==    by 0x540C52: logicalSubscript (svn/R-devel/src/main/subscript.c:563)
> ==9861==    by 0x5437BE: realSubscript (svn/R-devel/src/main/subscript.c:723)
> ==9861==    by 0x5437BE: Rf_makeSubscript (svn/R-devel/src/main/subscript.c:980)
> ==9861==    by 0x5455AB: VectorSubset (svn/R-devel/src/main/subset.c:188)
> ==9861==    by 0x5455AB: do_subset_dflt (svn/R-devel/src/main/subset.c:826)
> ==9861==    by 0x4A8539: VECSUBSET_PTR (svn/R-devel/src/main/eval.c:5179)
> ==9861==    by 0x4A8539: bcEval (svn/R-devel/src/main/eval.c:6618)
> ==9861==    by 0x4B685F: Rf_eval (svn/R-devel/src/main/eval.c:624)
> ==9861==    by 0x4B894E: R_execClosure (svn/R-devel/src/main/eval.c:1614)
> ==9861==    by 0x4EA827: dispatchMethod (svn/R-devel/src/main/objects.c:335)
> ==9861==    by 0x4EAC12: Rf_usemethod (svn/R-devel/src/main/objects.c:375)
> ==9861==
>
>
>
> To see if I could replicate locally and debug, I have built R 3.4.0 with valgrind-3.11.0 on FC 23  using the configuration options
>
> ./configure --with-valgrind-instrumentation=2 --with-system-valgrind-headers=yes CFLAGS='-g -O0' FCFLAGS='-g -O0?
>
> My package is built also using -g and -O0 for debugging and turning off optimization.
>
> Running  valgrind on the output from examples/vignettes from R CMD check
>
> R -d "valgrind --tool=memcheck --leak-check=full --track-origins=yes" --vanilla < BAS.Rcheck/BAS-Ex.R
>
> produces similar output as from CRAN -  i.e. no line numbers to code  (I have also tried travis-CI which indicates no problems and  R-devel under docker  which also replicates the non informative messages of CRAN :-)  so clearly missing something to produce the line numbers.
>
> Questions:
>
>
> 1) Are these problems with libraries outside of my code  or fortran  and I can ask CRAN to ignore? How can I tell if these are problems with system libraries (i.e. configuration on my system, but also those for CRAN) rather than my package code?
>
> 2) Any suggestions for other configuration options (system, R, package. valgrind) that would provide more informative output?
>    (for Fedora or any other platforms using docker)
>
> 3) Any alternative methods recommended for tracking this down instead of using valgrind?
>
>
>
> Thanks!
> Merlise
>
>> sessionInfo()
> R version 3.4.0 (2017-04-21)
> Platform: x86_64-pc-linux-gnu (64-bit)
> Running under: Fedora 23 (Twenty Three)
>
> Matrix products: default
> BLAS: /usr/local/lib64/R/lib/libRblas.so
> LAPACK: /usr/local/lib64/R/lib/libRlapack.so
>
>
> source code is at https://urldefense.proofpoint.com/v2/url?u=http-3A__github.com_merliseclyde_BAS&d=DwIFaQ&c=imBPVzF25OnBgGmVOlcsiEgHoG1i6YHLR0Sj_gZ4adc&r=NOkxkvdFOOffXzeTY2kgZQ&m=NwjTuJcFlu_aiLanr5CmvC1iVoHoWRZ7GZRFeq3WOBE&s=eu-Lj1is3biRf2EIcGlpuDf70-EXNpxfSjEA4XRdG7A&e=
>
>
>
> Merlise A Clyde
> Professor & Chair Department of Statistical Science
> Duke University
> http://stat.duke.edu/~clyde
Merlise A Clyde<http://stat.duke.edu/~clyde>
stat.duke.edu
Merlise Clyde is Professor of Statistical Science and Chair of the Department



>
> clyde at duke.edu<mailto:clyde at duke.edu>
>
>
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwIFaQ&c=imBPVzF25OnBgGmVOlcsiEgHoG1i6YHLR0Sj_gZ4adc&r=NOkxkvdFOOffXzeTY2kgZQ&m=NwjTuJcFlu_aiLanr5CmvC1iVoHoWRZ7GZRFeq3WOBE&s=gI000alCIBMmXI3JSu5ixDfuYaMmD8Hm4PAO0h8Yf3Y&e=

--
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com










	[[alternative HTML version deleted]]


From pdalgd at gmail.com  Thu May 25 12:04:13 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Thu, 25 May 2017 12:04:13 +0200
Subject: [R-pkg-devel] Help package checks using valgrind
In-Reply-To: <BLUPR0501MB900E4693CFA31462AC7B6A3C8FF0@BLUPR0501MB900.namprd05.prod.outlook.com>
References: <BD423391-AD8A-474C-8B62-14D5C67CA670@duke.edu>
 <DE5F1953-1B83-4E65-8A8F-7908A56B480D@gmail.com>
 <BLUPR0501MB900E4693CFA31462AC7B6A3C8FF0@BLUPR0501MB900.namprd05.prod.outlook.com>
Message-ID: <80BF21E4-3FB6-4080-AD21-26751AE092FA@gmail.com>

I don't think I can offer anything beyond the Valgrind FAQ at this point. I kind of suspect that the other trace -- pointing to where the offending piece of memory was allocated --would provide the better clue about the source of the problem.

-pd 

> On 25 May 2017, at 04:47 , Merlise Clyde, Ph.D. <clyde at duke.edu> wrote:
> 
> Thanks - I missed that one!   After identifying the problem there, and increasing --num-callers in  my .valgrindrc file I can see more of the trace, however, I still have short entries like 
> 
> > cleanEx()
> ==2044952== Conditional jump or move depends on uninitialised value(s)
> ==2044952==    at 0x405A0CB: ???
> ==2044952==    by 0x189D0A5F: ???
> ==2044952==    by 0x189D0A5F: ???
> ==2044952==    by 0x189D0A7B: ???
> ==2044952==    by 0xFFEFED09F: ???
> ==2044952== 
> detaching  package:MASS 
> 
> Any suggestions on how to get more details on what is occurring at that point?   
> 
> Thanks!
> Merlise
> From: peter dalgaard <pdalgd at gmail.com>
> Sent: Tuesday, May 23, 2017 6:40 PM
> To: Merlise Clyde, Ph.D.
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Help package checks using valgrind
>  
> 
> > On 23 May 2017, at 23:40 , Merlise Clyde, Ph.D. <clyde at duke.edu> wrote:
> > 
> > I am trying to resolve the Additional Issues reported by CRAN @ https://urldefense.proofpoint.com/v2/url?u=https-3A__www.stats.ox.ac.uk_pub_bdr_memtests_valgrind_BAS-2DEx.Rout&d=DwIFaQ&c=imBPVzF25OnBgGmVOlcsiEgHoG1i6YHLR0Sj_gZ4adc&r=NOkxkvdFOOffXzeTY2kgZQ&m=NwjTuJcFlu_aiLanr5CmvC1iVoHoWRZ7GZRFeq3WOBE&s=58920PEhsbU1YFCH1hHuLt2t9FcOYIAvfZq_swf1lLc&e=  for my package BAS which calls C and Fortran.
> > 
> > The output from the above URL is not particularly informative (at least to me) for identifying where the problems are in the source code, as there are  missing file names and line numbers as seen in this snippet from the above url:
> > 
> 
> The first of those traces does actually point to something that should be useful to you:
> 
> > cleanEx()
> ==9861== Conditional jump or move depends on uninitialised value(s)
> ==9861==    at 0x403DBF3: ???
> ==9861==    by 0x1702DE57: ???
> ==9861==    by 0x1702DE57: ???
> ==9861==    by 0x1702DE73: ???
> ==9861==    by 0xFFEFF861F: ???
> ==9861==  Uninitialised value was created by a heap allocation
> ==9861==    at 0x4C2BBAD: malloc (/builddir/build/BUILD/valgrind-3.11.0/coregrind/m_replacemalloc/vg_replace_malloc.c:299)
> ==9861==    by 0x4E5AFE: GetNewPage (svn/R-devel/src/main/memory.c:875)
> ==9861==    by 0x4E77AF: Rf_allocVector3 (svn/R-devel/src/main/memory.c:2651)
> ==9861==    by 0x14B29729: sampleworep (packages/tests-vg/BAS/src/sampleworep.c:395)
> ==9861==    by 0x47C36D: R_doDotCall (svn/R-devel/src/main/dotcode.c:617)
> 
> i.e. you are allocating something at sampleworep.c:395 but it isn't initialized before something somewhere uses its value to make a decision. So possibly you should initialize the vector immediately after allocation.
> 
> In the other cases, you seem to be too deep in R internals to let you see the origin in your package, i.e., your stack traces are too short. According to the Valgrind FAQ, you can use --num-callers to make them longer. Figuring out how to pass that to valgrind as invoked by R is, um, left as an exercise for the reader.
> 
> -pd
> 
> > 
> >> cleanEx()
> > ==9861== Conditional jump or move depends on uninitialised value(s)
> > ==9861==    at 0x403DBF3: ???
> > ==9861==    by 0x1A694397: ???
> > ==9861==    by 0x1A694397: ???
> > ==9861==    by 0x1A6943B3: ???
> > ==9861==    by 0xFFEFF861F: ???
> > ==9861==  Uninitialised value was created by a heap allocation
> > ==9861==    at 0x4C2BBAD: malloc (/builddir/build/BUILD/valgrind-3.11.0/coregrind/m_replacemalloc/vg_replace_malloc.c:299)
> > ==9861==    by 0x4E5AFE: GetNewPage (svn/R-devel/src/main/memory.c:875)
> > ==9861==    by 0x4E77AF: Rf_allocVector3 (svn/R-devel/src/main/memory.c:2651)
> > ==9861==    by 0x4E79A8: Rf_allocVector (svn/R-devel/src/include/Rinlinedfuns.h:196)
> > ==9861==    by 0x4E79A8: R_alloc (svn/R-devel/src/main/memory.c:2160)
> > ==9861==    by 0x540C52: logicalSubscript (svn/R-devel/src/main/subscript.c:563)
> > ==9861==    by 0x5437BE: realSubscript (svn/R-devel/src/main/subscript.c:723)
> > ==9861==    by 0x5437BE: Rf_makeSubscript (svn/R-devel/src/main/subscript.c:980)
> > ==9861==    by 0x5455AB: VectorSubset (svn/R-devel/src/main/subset.c:188)
> > ==9861==    by 0x5455AB: do_subset_dflt (svn/R-devel/src/main/subset.c:826)
> > ==9861==    by 0x4A8539: VECSUBSET_PTR (svn/R-devel/src/main/eval.c:5179)
> > ==9861==    by 0x4A8539: bcEval (svn/R-devel/src/main/eval.c:6618)
> > ==9861==    by 0x4B685F: Rf_eval (svn/R-devel/src/main/eval.c:624)
> > ==9861==    by 0x4B894E: R_execClosure (svn/R-devel/src/main/eval.c:1614)
> > ==9861==    by 0x4EA827: dispatchMethod (svn/R-devel/src/main/objects.c:335)
> > ==9861==    by 0x4EAC12: Rf_usemethod (svn/R-devel/src/main/objects.c:375)
> > ==9861==
> > 
> > 
> > 
> > To see if I could replicate locally and debug, I have built R 3.4.0 with valgrind-3.11.0 on FC 23  using the configuration options
> > 
> > ./configure --with-valgrind-instrumentation=2 --with-system-valgrind-headers=yes CFLAGS='-g -O0' FCFLAGS='-g -O0?
> > 
> > My package is built also using -g and -O0 for debugging and turning off optimization.
> > 
> > Running  valgrind on the output from examples/vignettes from R CMD check
> > 
> > R -d "valgrind --tool=memcheck --leak-check=full --track-origins=yes" --vanilla < BAS.Rcheck/BAS-Ex.R
> > 
> > produces similar output as from CRAN -  i.e. no line numbers to code  (I have also tried travis-CI which indicates no problems and  R-devel under docker  which also replicates the non informative messages of CRAN :-)  so clearly missing something to produce the line numbers.
> > 
> > Questions:
> > 
> > 
> > 1) Are these problems with libraries outside of my code  or fortran  and I can ask CRAN to ignore? How can I tell if these are problems with system libraries (i.e. configuration on my system, but also those for CRAN) rather than my package code?
> > 
> > 2) Any suggestions for other configuration options (system, R, package. valgrind) that would provide more informative output?
> >    (for Fedora or any other platforms using docker)
> > 
> > 3) Any alternative methods recommended for tracking this down instead of using valgrind?
> > 
> > 
> > 
> > Thanks!
> > Merlise
> > 
> >> sessionInfo()
> > R version 3.4.0 (2017-04-21)
> > Platform: x86_64-pc-linux-gnu (64-bit)
> > Running under: Fedora 23 (Twenty Three)
> > 
> > Matrix products: default
> > BLAS: /usr/local/lib64/R/lib/libRblas.so
> > LAPACK: /usr/local/lib64/R/lib/libRlapack.so
> > 
> > 
> > source code is at https://urldefense.proofpoint.com/v2/url?u=http-3A__github.com_merliseclyde_BAS&d=DwIFaQ&c=imBPVzF25OnBgGmVOlcsiEgHoG1i6YHLR0Sj_gZ4adc&r=NOkxkvdFOOffXzeTY2kgZQ&m=NwjTuJcFlu_aiLanr5CmvC1iVoHoWRZ7GZRFeq3WOBE&s=eu-Lj1is3biRf2EIcGlpuDf70-EXNpxfSjEA4XRdG7A&e= 
> > 
> > 
> > 
> > Merlise A Clyde
> > Professor & Chair Department of Statistical Science
> > Duke University
> > http://stat.duke.edu/~clyde
> Merlise A Clyde
> stat.duke.edu
> Merlise Clyde is Professor of Statistical Science and Chair of the Department
> 
> 
> > 
> > clyde at duke.edu<mailto:clyde at duke.edu>
> > 
> > 
> > 
> >        [[alternative HTML version deleted]]
> > 
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwIFaQ&c=imBPVzF25OnBgGmVOlcsiEgHoG1i6YHLR0Sj_gZ4adc&r=NOkxkvdFOOffXzeTY2kgZQ&m=NwjTuJcFlu_aiLanr5CmvC1iVoHoWRZ7GZRFeq3WOBE&s=gI000alCIBMmXI3JSu5ixDfuYaMmD8Hm4PAO0h8Yf3Y&e= 
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From akumar at stat.tamu.edu  Thu May 25 05:59:43 2017
From: akumar at stat.tamu.edu (Maity, Arnab K)
Date: Thu, 25 May 2017 03:59:43 +0000
Subject: [R-pkg-devel] could not find function of a package
Message-ID: <1495684786110.91539@stat.tamu.edu>

Dear R Package developers,


Apologies for cross posting.


I posted the following message on R help forum and got advised to post here.


I created a package on github. It is located at "arnabkrmaity/brlrmr". Then I submitted this on CRAN and it is now available on CRAN.

When I install this package from github using install.github("arnabkrmaity\brlrmr"), everything works fine. However, when I install directly from R CRAN by install.packages("brlrmr"), and then try to examine the functions, I receive an error, ?

Error: could not find function "fil"

fil() is a function of this package. The data with this package is getting attached fine.

Any idea what is going wrong with the submission? Your help is much appreciated.

Duncan Murdoch replied that my NAMESPACE file doesn't export anything.? How do make my NAMESPACE file export the desired functions?





Arnab Kumar Maity
Department of Statistics
Texas A&M University
3143 TAMU, Room 401A
College Station, TX 77843
akumar at stat.tamu.edu<mailto:arnabkrmaity at stat.tamu.edu>
arnabkrmaity at tamu.edu
+1 779 777 3428<tel:%2B1%20779%20777%203428>

	[[alternative HTML version deleted]]


From sme at iysik.com  Thu May 25 11:28:32 2017
From: sme at iysik.com (=?UTF-8?Q?Stefan_McKinnon_H=C3=B8j=2DEdwards?=)
Date: Thu, 25 May 2017 10:28:32 +0100
Subject: [R-pkg-devel] 'write' call in Fortran gives NOTE when running R CMD
	check
Message-ID: <CAHJFP8Q_Q5OH_XyNDcVm97QSAi6T_qytV34kUt2cb8rBKBADAg@mail.gmail.com>

Apologies for this double posting; I asked this on Stackoverflow, but
hasn't received much attention.

I have quite successfully implemented an R package with some Fortran
functions. Some of these functions needs to write to files, so naturally I
use the Fortran statement `write(unit, fmt) var`.

When running R CMD check on the compiled package, it spits out the
following NOTE:

```
checking compiled code ... NOTE
File 'Siccuracy/libs/i386/Siccuracy.dll':
  Found '_gfortran_st_write', possibly from 'write' (Fortran), 'print'
    (Fortran)
    Objects: 'dip.o', 'chips.o', 'link.o'
File 'Siccuracy/libs/x64/Siccuracy.dll':
  Found '_gfortran_st_write', possibly from 'write' (Fortran), 'print'
    (Fortran)
    Objects: 'dip.o', 'chips.o', 'link.o'

Compiled code should not call entry points which might terminate R nor
write to stdout/stderr instead of to the console, nor the system RNG.
```

By removing the `write` calls one-by-one from `dip.f95`, I found that only
when removing all `write` calls, did the note disappear (for that file at
least).

I am using the `write` calls for two different things: 1) Writing to flat
text files, combinations of both integers and real values, and 2) Using
`write` to convert an integer to a character by doing `write(char, *) int`.

Do I have options here to avoid this NOTE from R CMD check?
And if not, can I still submit this package to CRAN while having this NOTE?

Stefan McKinnon H?j-Edwards
ph.d. Genetics
+44 (0)776 231 2464
+45 2888 6598
Skype: stefan_edwards
@iysik_com

	[[alternative HTML version deleted]]


From drjimlemon at gmail.com  Thu May 25 13:54:15 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Thu, 25 May 2017 21:54:15 +1000
Subject: [R-pkg-devel] could not find function of a package
In-Reply-To: <1495684786110.91539@stat.tamu.edu>
References: <1495684786110.91539@stat.tamu.edu>
Message-ID: <CA+8X3fVmoqZ6_eo8HCDzmhDh8Z2mXpqmK8B_yuSaDeq-nsJi3A@mail.gmail.com>

Hi Arnab,
It will be something like this:

importFrom("utils", "read.table")
export(
 fil
)
S3method(print,fil)

You will probably have to import some functions from the packages that
come with R. Then you list all the functions you want to export,
separated by commas. Finally you list any methods you have defined
(for example a "print" method to print the results of your "fil"
function. See "Package namespaces" in the "Writing R Extensions" that
comes with the R distribution.

Jim


On Thu, May 25, 2017 at 1:59 PM, Maity, Arnab K <akumar at stat.tamu.edu> wrote:
> Dear R Package developers,
>
>
> Apologies for cross posting.
>
>
> I posted the following message on R help forum and got advised to post here.
>
>
> I created a package on github. It is located at "arnabkrmaity/brlrmr". Then I submitted this on CRAN and it is now available on CRAN.
>
> When I install this package from github using install.github("arnabkrmaity\brlrmr"), everything works fine. However, when I install directly from R CRAN by install.packages("brlrmr"), and then try to examine the functions, I receive an error, ?
>
> Error: could not find function "fil"
>
> fil() is a function of this package. The data with this package is getting attached fine.
>
> Any idea what is going wrong with the submission? Your help is much appreciated.
>
> Duncan Murdoch replied that my NAMESPACE file doesn't export anything.? How do make my NAMESPACE file export the desired functions?
>
>
>
>
>
> Arnab Kumar Maity
> Department of Statistics
> Texas A&M University
> 3143 TAMU, Room 401A
> College Station, TX 77843
> akumar at stat.tamu.edu<mailto:arnabkrmaity at stat.tamu.edu>
> arnabkrmaity at tamu.edu
> +1 779 777 3428<tel:%2B1%20779%20777%203428>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch.duncan at gmail.com  Thu May 25 14:55:24 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 25 May 2017 08:55:24 -0400
Subject: [R-pkg-devel] could not find function of a package
In-Reply-To: <1495684786110.91539@stat.tamu.edu>
References: <1495684786110.91539@stat.tamu.edu>
Message-ID: <cdcaafec-682b-f8c3-0832-34ea27e82cbe@gmail.com>

On 24/05/2017 11:59 PM, Maity, Arnab K wrote:
> Dear R Package developers,
>
>
> Apologies for cross posting.
>
>
> I posted the following message on R help forum and got advised to post here.
>
>
> I created a package on github. It is located at "arnabkrmaity/brlrmr". Then I submitted this on CRAN and it is now available on CRAN.
>
> When I install this package from github using install.github("arnabkrmaity\brlrmr"), everything works fine. However, when I install directly from R CRAN by install.packages("brlrmr"), and then try to examine the functions, I receive an error, ?
>
> Error: could not find function "fil"
>
> fil() is a function of this package. The data with this package is getting attached fine.
>
> Any idea what is going wrong with the submission? Your help is much appreciated.
>
> Duncan Murdoch replied that my NAMESPACE file doesn't export anything.? How do make my NAMESPACE file export the desired functions?


The NAMESPACE file on CRAN is not the same as the one on github.  This 
shows what is installed from CRAN:

install.packages("brlrmr")
file.show(system.file("NAMESPACE", package = "brlrmr"))

What I see is

# Generated by roxygen2: do not edit by hand

importFrom(stats,binomial)
importFrom(stats,contrasts)
importFrom(stats,is.empty.model)
importFrom(stats,model.matrix)
importFrom(stats,model.response)
importFrom(stats,na.pass)
importFrom(stats,qnorm)


Lots of imports, no exports.  I don't know roxygen2; maybe someone else 
can tell you how this kind of difference would happen.

Duncan Murdoch


From clyde at duke.edu  Thu May 25 15:25:13 2017
From: clyde at duke.edu (Merlise Clyde, Ph.D.)
Date: Thu, 25 May 2017 13:25:13 +0000
Subject: [R-pkg-devel] could not find function of a package
In-Reply-To: <cdcaafec-682b-f8c3-0832-34ea27e82cbe@gmail.com>
References: <1495684786110.91539@stat.tamu.edu>
 <cdcaafec-682b-f8c3-0832-34ea27e82cbe@gmail.com>
Message-ID: <AFE1316F-1522-4DE0-ACF2-F3E6BD6FD9BD@duke.edu>

If you are using roxygen2 for documentation and want to export a function add  a line with

#' @export

to the .R file as part of the function documentation.   Running devtools::document() should  then update the NAMESPACE

See http://r-pkgs.had.co.nz/namespace.html


On May 25, 2017, at 8:55 AM, Duncan Murdoch <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>> wrote:

arnabkrmaity/brlrmr


	[[alternative HTML version deleted]]


From akumar at stat.tamu.edu  Thu May 25 22:55:43 2017
From: akumar at stat.tamu.edu (Maity, Arnab K)
Date: Thu, 25 May 2017 20:55:43 +0000
Subject: [R-pkg-devel] could not find function of a package
In-Reply-To: <AFE1316F-1522-4DE0-ACF2-F3E6BD6FD9BD@duke.edu>
References: <1495684786110.91539@stat.tamu.edu>
 <cdcaafec-682b-f8c3-0832-34ea27e82cbe@gmail.com>,
 <AFE1316F-1522-4DE0-ACF2-F3E6BD6FD9BD@duke.edu>
Message-ID: <1495745747385.23088@stat.tamu.edu>

?Thank you all for your kind replies. I made the necessary changes. Now in order to make the changes available on CRAN, do I resubmit the package after changing the version?




Arnab Kumar Maity
Department of Statistics
Texas A&M University
3143 TAMU, Room 401A
College Station, TX 77843
akumar at stat.tamu.edu<mailto:arnabkrmaity at stat.tamu.edu>
arnabkrmaity at tamu.edu
+1 779 777 3428<tel:%2B1%20779%20777%203428>
________________________________
From: Merlise Clyde, Ph.D. <clyde at duke.edu>
Sent: Thursday, May 25, 2017 8:25 AM
To: Maity, Arnab K
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] could not find function of a package

If you are using roxygen2 for documentation and want to export a function add  a line with

#' @export

to the .R file as part of the function documentation.   Running devtools::document() should  then update the NAMESPACE

See http://r-pkgs.had.co.nz/namespace.html<https://urldefense.proofpoint.com/v2/url?u=http-3A__r-2Dpkgs.had.co.nz_namespace.html&d=DwMFAg&c=ODFT-G5SujMiGrKuoJJjVg&r=0B-9Fzm1-9L5x99EIv3gHtKtIiJ6IOXiZVDz5DZx0es&m=6s_Kmc2g4TZsQ6D_LYvan4kACr_mI6jRW4GXj6tXCSA&s=oecp4YLINB8w-ecFDLqjDlRX5bMNdJZZobcOVXZVkPU&e=>


On May 25, 2017, at 8:55 AM, Duncan Murdoch <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>> wrote:

arnabkrmaity/brlrmr


	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Thu May 25 23:02:37 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 25 May 2017 17:02:37 -0400
Subject: [R-pkg-devel] could not find function of a package
In-Reply-To: <1495745747385.23088@stat.tamu.edu>
References: <1495684786110.91539@stat.tamu.edu>
 <cdcaafec-682b-f8c3-0832-34ea27e82cbe@gmail.com>
 <AFE1316F-1522-4DE0-ACF2-F3E6BD6FD9BD@duke.edu>
 <1495745747385.23088@stat.tamu.edu>
Message-ID: <8a00895e-a37a-4a36-c7cc-fe04de08f3a1@gmail.com>

On 25/05/2017 4:55 PM, Maity, Arnab K wrote:
> ?Thank you all for your kind replies. I made the necessary changes. Now in order to make the changes available on CRAN, do I resubmit the package after changing the version?

Yes, though I'd try installing the new one from the tarball on a 
different computer and testing it there first, to be sure that there 
aren't any other problems with it.

Duncan Murdoch
>
>
>
>
> Arnab Kumar Maity
> Department of Statistics
> Texas A&M University
> 3143 TAMU, Room 401A
> College Station, TX 77843
> akumar at stat.tamu.edu<mailto:arnabkrmaity at stat.tamu.edu>
> arnabkrmaity at tamu.edu
> +1 779 777 3428<tel:%2B1%20779%20777%203428>
> ________________________________
> From: Merlise Clyde, Ph.D. <clyde at duke.edu>
> Sent: Thursday, May 25, 2017 8:25 AM
> To: Maity, Arnab K
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] could not find function of a package
>
> If you are using roxygen2 for documentation and want to export a function add  a line with
>
> #' @export
>
> to the .R file as part of the function documentation.   Running devtools::document() should  then update the NAMESPACE
>
> See http://r-pkgs.had.co.nz/namespace.html<https://urldefense.proofpoint.com/v2/url?u=http-3A__r-2Dpkgs.had.co.nz_namespace.html&d=DwMFAg&c=ODFT-G5SujMiGrKuoJJjVg&r=0B-9Fzm1-9L5x99EIv3gHtKtIiJ6IOXiZVDz5DZx0es&m=6s_Kmc2g4TZsQ6D_LYvan4kACr_mI6jRW4GXj6tXCSA&s=oecp4YLINB8w-ecFDLqjDlRX5bMNdJZZobcOVXZVkPU&e=>
>
>
> On May 25, 2017, at 8:55 AM, Duncan Murdoch <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>> wrote:
>
> arnabkrmaity/brlrmr
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From emmanuel.blondel1 at gmail.com  Thu May 25 20:59:58 2017
From: emmanuel.blondel1 at gmail.com (Emmanuel Blondel)
Date: Thu, 25 May 2017 20:59:58 +0200
Subject: [R-pkg-devel] Package submission - Issue with pandoc in R CMD check
In-Reply-To: <01d2d583$Blat.v2.2.2$b6356e09@mail.statistik.tu-dortmund.de>
References: <01d2d583$Blat.v2.2.2$b6356e09@mail.statistik.tu-dortmund.de>
Message-ID: <4d567883-51b1-3704-0d55-b30234a746fb@gmail.com>

Dear all,

I've just submitted a new package named geometa, for which i received the message below. Indeed i had sent in my submission some question mark about the warning i obtain during R CMD check:

In case of R release and R devel, I got the following warning:

Conversion of 'README.md' failed:
pandoc.exe: Could not fetchhttps://img.shields.io/badge/Github-0.1--0-blue.svg
TlsExceptionHostPort (HandshakeFailed Error_EOF) "img.shields.io" 443

I've been looking for information about it, and it seems to be reported as bug of Pandoc. Same occur if I use an http link instead. I didn't find any successful alternative to remove this warning, and of course for this package and others i maintain, i would like to keep the 2 badges, 1 for CRAN and 1 for Github so user can quickly check if there is a pending revision in Github.

R CRAN checks links:
- old release:https://win-builder.r-project.org/GphApwuaD56b
- release:https://win-builder.r-project.org/maQicmvW941l
- devel:https://win-builder.r-project.org/OLSqwXd4W442

I would be very grateful if someone can shed light on this, and suggest a solution, so i could re-submit the package to CRAN.

Best regards
Emmanuel


-------- Message transf?r? --------
Sujet : 	[CRAN-pretest-archived] CRAN submission geometa 0.1-0
Date : 	Thu, 25 May 2017 20:21:22 +0200
De : 	Uwe.Ligges at R-Project.org
R?pondre ? : 	CRAN at R-project.org
Pour : 	emmanuel.blondel1 at gmail.com
Copie ? : 	CRAN at R-project.org



Dear maintainer,
  
package geometa_0.1-0.tar.gz does not pass the incoming checks automatically, please see the pre-test at:
<https://win-builder.r-project.org/incoming_pretest/170525_152229_geometa_010/00check.log>
Status: 1 WARNING, 1 NOTE
  
Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
  
More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/170525_152229_geometa_010>
The files will be removed after roughly 7 days.
  
  
Best regards,
CRAN teams' auto-check service


	[[alternative HTML version deleted]]


From dasonk at gmail.com  Thu May 25 23:13:14 2017
From: dasonk at gmail.com (Dason Kurkiewicz)
Date: Thu, 25 May 2017 17:13:14 -0400
Subject: [R-pkg-devel] could not find function of a package
In-Reply-To: <8a00895e-a37a-4a36-c7cc-fe04de08f3a1@gmail.com>
References: <1495684786110.91539@stat.tamu.edu>
 <cdcaafec-682b-f8c3-0832-34ea27e82cbe@gmail.com>
 <AFE1316F-1522-4DE0-ACF2-F3E6BD6FD9BD@duke.edu>
 <1495745747385.23088@stat.tamu.edu>
 <8a00895e-a37a-4a36-c7cc-fe04de08f3a1@gmail.com>
Message-ID: <CAJZYZZ7fdOs6UCLifdVZxLPHt-_0qCapZKiJLkqDGwi--yPQrw@mail.gmail.com>

I also recommend reinstalling and making sure it works.  I also
recommend making sure you actually run roxygen either via roxygenize()
or devtools::document() to make sure that your changes get written to
the NAMESPACE file. Your NAMESPACE on your github is a few months old
still.

-Dason Kurkiewicz

On Thu, May 25, 2017 at 5:02 PM, Duncan Murdoch
<murdoch.duncan at gmail.com> wrote:
> On 25/05/2017 4:55 PM, Maity, Arnab K wrote:
>>
>> ?Thank you all for your kind replies. I made the necessary changes. Now in
>> order to make the changes available on CRAN, do I resubmit the package after
>> changing the version?
>
>
> Yes, though I'd try installing the new one from the tarball on a different
> computer and testing it there first, to be sure that there aren't any other
> problems with it.
>
> Duncan Murdoch
>
>>
>>
>>
>>
>> Arnab Kumar Maity
>> Department of Statistics
>> Texas A&M University
>> 3143 TAMU, Room 401A
>> College Station, TX 77843
>> akumar at stat.tamu.edu<mailto:arnabkrmaity at stat.tamu.edu>
>> arnabkrmaity at tamu.edu
>> +1 779 777 3428<tel:%2B1%20779%20777%203428>
>> ________________________________
>> From: Merlise Clyde, Ph.D. <clyde at duke.edu>
>> Sent: Thursday, May 25, 2017 8:25 AM
>> To: Maity, Arnab K
>> Cc: r-package-devel at r-project.org
>> Subject: Re: [R-pkg-devel] could not find function of a package
>>
>> If you are using roxygen2 for documentation and want to export a function
>> add  a line with
>>
>> #' @export
>>
>> to the .R file as part of the function documentation.   Running
>> devtools::document() should  then update the NAMESPACE
>>
>> See
>> http://r-pkgs.had.co.nz/namespace.html<https://urldefense.proofpoint.com/v2/url?u=http-3A__r-2Dpkgs.had.co.nz_namespace.html&d=DwMFAg&c=ODFT-G5SujMiGrKuoJJjVg&r=0B-9Fzm1-9L5x99EIv3gHtKtIiJ6IOXiZVDz5DZx0es&m=6s_Kmc2g4TZsQ6D_LYvan4kACr_mI6jRW4GXj6tXCSA&s=oecp4YLINB8w-ecFDLqjDlRX5bMNdJZZobcOVXZVkPU&e=>
>>
>>
>> On May 25, 2017, at 8:55 AM, Duncan Murdoch
>> <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>> wrote:
>>
>> arnabkrmaity/brlrmr
>>
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From clyde at duke.edu  Fri May 26 00:08:52 2017
From: clyde at duke.edu (Merlise Clyde, Ph.D.)
Date: Thu, 25 May 2017 22:08:52 +0000
Subject: [R-pkg-devel] could not find function of a package
In-Reply-To: <8a00895e-a37a-4a36-c7cc-fe04de08f3a1@gmail.com>
References: <1495684786110.91539@stat.tamu.edu>
 <cdcaafec-682b-f8c3-0832-34ea27e82cbe@gmail.com>
 <AFE1316F-1522-4DE0-ACF2-F3E6BD6FD9BD@duke.edu>
 <1495745747385.23088@stat.tamu.edu>
 <8a00895e-a37a-4a36-c7cc-fe04de08f3a1@gmail.com>
Message-ID: <7EF71653-FD89-461D-BA5A-81EFAB87DD7E@duke.edu>

I have found Travis CI, which can check your package every time you push to GitHub useful -  you can set it up to  build and check your package against the current version of R and  R-devel.   See   http://juliasilge.com/blog/Beginners-Guide-to-Travis/  and https://docs.travis-ci.com/user/languages/r
It takes a little time to setup, but then it checks continuously so that you can identify failures quickly


The package rhub on GitHub is perhaps easier to use than Travis CI and can check on multiple platforms and versions of R - See http://blog.revolutionanalytics.com/2016/10/r-hub-public-beta.html

cheers,
Merlise Clyde



On May 25, 2017, at 5:02 PM, Duncan Murdoch <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>> wrote:

On 25/05/2017 4:55 PM, Maity, Arnab K wrote:
?Thank you all for your kind replies. I made the necessary changes. Now in order to make the changes available on CRAN, do I resubmit the package after changing the version?

Yes, though I'd try installing the new one from the tarball on a different computer and testing it there first, to be sure that there aren't any other problems with it.

Duncan Murdoch




Arnab Kumar Maity
Department of Statistics
Texas A&M University
3143 TAMU, Room 401A
College Station, TX 77843
akumar at stat.tamu.edu<mailto:akumar at stat.tamu.edu><mailto:arnabkrmaity at stat.tamu.edu>
arnabkrmaity at tamu.edu<mailto:arnabkrmaity at tamu.edu>
+1 779 777 3428<tel:%2B1%20779%20777%203428>
________________________________
From: Merlise Clyde, Ph.D. <clyde at duke.edu>
Sent: Thursday, May 25, 2017 8:25 AM
To: Maity, Arnab K
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] could not find function of a package

If you are using roxygen2 for documentation and want to export a function add  a line with

#' @export

to the .R file as part of the function documentation.   Running devtools::document() should  then update the NAMESPACE

See https://urldefense.proofpoint.com/v2/url?u=http-3A__r-2Dpkgs.had.co.nz_namespace.html&d=DwICAg&c=imBPVzF25OnBgGmVOlcsiEgHoG1i6YHLR0Sj_gZ4adc&r=NOkxkvdFOOffXzeTY2kgZQ&m=49_J_2dojy0jmsH9-5Lx9jR3-W3R6HDkU3IZPYh44Sk&s=hFUBNuDqLZPmHekINf4cBGQiBNxQqoqpYKh46PRK5RQ&e= <https://urldefense.proofpoint.com/v2/url?u=http-3A__r-2Dpkgs.had.co.nz_namespace.html&d=DwMFAg&c=ODFT-G5SujMiGrKuoJJjVg&r=0B-9Fzm1-9L5x99EIv3gHtKtIiJ6IOXiZVDz5DZx0es&m=6s_Kmc2g4TZsQ6D_LYvan4kACr_mI6jRW4GXj6tXCSA&s=oecp4YLINB8w-ecFDLqjDlRX5bMNdJZZobcOVXZVkPU&e=>


On May 25, 2017, at 8:55 AM, Duncan Murdoch <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>> wrote:

arnabkrmaity/brlrmr


[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwICAg&c=imBPVzF25OnBgGmVOlcsiEgHoG1i6YHLR0Sj_gZ4adc&r=NOkxkvdFOOffXzeTY2kgZQ&m=49_J_2dojy0jmsH9-5Lx9jR3-W3R6HDkU3IZPYh44Sk&s=I48tKCPSogP0O6wslXd0tjdyaDxsQNB2vf_jpWzUWAw&e=

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwICAg&c=imBPVzF25OnBgGmVOlcsiEgHoG1i6YHLR0Sj_gZ4adc&r=NOkxkvdFOOffXzeTY2kgZQ&m=49_J_2dojy0jmsH9-5Lx9jR3-W3R6HDkU3IZPYh44Sk&s=I48tKCPSogP0O6wslXd0tjdyaDxsQNB2vf_jpWzUWAw&e=


	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Fri May 26 00:11:13 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Fri, 26 May 2017 00:11:13 +0200
Subject: [R-pkg-devel] Package submission - Issue with pandoc in R CMD
 check
In-Reply-To: <4d567883-51b1-3704-0d55-b30234a746fb@gmail.com>
References: <01d2d583$Blat.v2.2.2$b6356e09@mail.statistik.tu-dortmund.de>
 <4d567883-51b1-3704-0d55-b30234a746fb@gmail.com>
Message-ID: <af9d8208-7e91-e441-7c28-6688f7e10176@statistik.tu-dortmund.de>

This is currently under inspection by the CRAN team. Apparently 
img.shields.io have changed the cypher settings and pandoc fails with 
the new settings. We may have to disable *.md processing for some time.

Best,
Uwe Ligges



On 25.05.2017 20:59, Emmanuel Blondel wrote:
> Dear all,
> 
> I've just submitted a new package named geometa, for which i received the message below. Indeed i had sent in my submission some question mark about the warning i obtain during R CMD check:
> 
> In case of R release and R devel, I got the following warning:
> 
> Conversion of 'README.md' failed:
> pandoc.exe: Could not fetchhttps://img.shields.io/badge/Github-0.1--0-blue.svg
> TlsExceptionHostPort (HandshakeFailed Error_EOF) "img.shields.io" 443
> 
> I've been looking for information about it, and it seems to be reported as bug of Pandoc. Same occur if I use an http link instead. I didn't find any successful alternative to remove this warning, and of course for this package and others i maintain, i would like to keep the 2 badges, 1 for CRAN and 1 for Github so user can quickly check if there is a pending revision in Github.
> 
> R CRAN checks links:
> - old release:https://win-builder.r-project.org/GphApwuaD56b
> - release:https://win-builder.r-project.org/maQicmvW941l
> - devel:https://win-builder.r-project.org/OLSqwXd4W442
> 
> I would be very grateful if someone can shed light on this, and suggest a solution, so i could re-submit the package to CRAN.
> 
> Best regards
> Emmanuel
> 
> 
> -------- Message transf?r? --------
> Sujet : 	[CRAN-pretest-archived] CRAN submission geometa 0.1-0
> Date : 	Thu, 25 May 2017 20:21:22 +0200
> De : 	Uwe.Ligges at R-Project.org
> R?pondre ? : 	CRAN at R-project.org
> Pour : 	emmanuel.blondel1 at gmail.com
> Copie ? : 	CRAN at R-project.org
> 
> 
> 
> Dear maintainer,
>    
> package geometa_0.1-0.tar.gz does not pass the incoming checks automatically, please see the pre-test at:
> <https://win-builder.r-project.org/incoming_pretest/170525_152229_geometa_010/00check.log>
> Status: 1 WARNING, 1 NOTE
>    
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
>    
> More details are given in the directory:
> <https://win-builder.r-project.org/incoming_pretest/170525_152229_geometa_010>
> The files will be removed after roughly 7 days.
>    
>    
> Best regards,
> CRAN teams' auto-check service
> 
> 
> 	[[alternative HTML version deleted]]
> 
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From murdoch.duncan at gmail.com  Fri May 26 16:18:00 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 26 May 2017 10:18:00 -0400
Subject: [R-pkg-devel] could not find function of a package
In-Reply-To: <1495745747385.23088@stat.tamu.edu>
References: <1495684786110.91539@stat.tamu.edu>
 <cdcaafec-682b-f8c3-0832-34ea27e82cbe@gmail.com>
 <AFE1316F-1522-4DE0-ACF2-F3E6BD6FD9BD@duke.edu>
 <1495745747385.23088@stat.tamu.edu>
Message-ID: <b5102722-7417-6f82-7e55-d40e28e6b641@gmail.com>

On 25/05/2017 4:55 PM, Maity, Arnab K wrote:
> ?Thank you all for your kind replies. I made the necessary changes. Now in order to make the changes available on CRAN, do I resubmit the package after changing the version?

One other suggestion:  make sure your help pages include examples that 
run every function that you are exporting.  If you had done that 
originally, this error would never have slipped through testing.

Duncan Murdoch

>
>
>
>
> Arnab Kumar Maity
> Department of Statistics
> Texas A&M University
> 3143 TAMU, Room 401A
> College Station, TX 77843
> akumar at stat.tamu.edu<mailto:arnabkrmaity at stat.tamu.edu>
> arnabkrmaity at tamu.edu
> +1 779 777 3428<tel:%2B1%20779%20777%203428>
> ________________________________
> From: Merlise Clyde, Ph.D. <clyde at duke.edu>
> Sent: Thursday, May 25, 2017 8:25 AM
> To: Maity, Arnab K
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] could not find function of a package
>
> If you are using roxygen2 for documentation and want to export a function add  a line with
>
> #' @export
>
> to the .R file as part of the function documentation.   Running devtools::document() should  then update the NAMESPACE
>
> See http://r-pkgs.had.co.nz/namespace.html<https://urldefense.proofpoint.com/v2/url?u=http-3A__r-2Dpkgs.had.co.nz_namespace.html&d=DwMFAg&c=ODFT-G5SujMiGrKuoJJjVg&r=0B-9Fzm1-9L5x99EIv3gHtKtIiJ6IOXiZVDz5DZx0es&m=6s_Kmc2g4TZsQ6D_LYvan4kACr_mI6jRW4GXj6tXCSA&s=oecp4YLINB8w-ecFDLqjDlRX5bMNdJZZobcOVXZVkPU&e=>
>
>
> On May 25, 2017, at 8:55 AM, Duncan Murdoch <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>> wrote:
>
> arnabkrmaity/brlrmr
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From glennmschultz at me.com  Sat May 27 14:49:04 2017
From: glennmschultz at me.com (Glenn Schultz)
Date: Sat, 27 May 2017 12:49:04 +0000 (GMT)
Subject: [R-pkg-devel] run a function from a list
Message-ID: <241c90e1-4a54-4268-94ae-c01188cf8680@me.com>

All,
I have a function to split a fixed rate bond into a floater/inverse floater combination (something typically done in mortgage securtizations). ?The function returns a list which serves as the deal structure over which principal payment rules will iterate. ?However, I would like to call the functions as they drive the interest coupon payments. ?I am using paste0() to piece together the function and I think the problem is the quotes but not sure.

I have tried source, do.call, list$foo(), list[[]](). ?None of these have worked. ?Any advice on structuring this problem is appreciated.

Thanks,
Glenn

structure(list(floater.balance = 30.78, floater.cap = 6.66666666666667, 
floater.floor = 0.3, floater.index = "1mLIBOR", floater.formula = "function(index){min(6.67,max((1mLIBOR+0.3)0.3))}", 
inverse.balance = 20.52, inverse.cap = 9.55, inverse.multipler = 1.5, 
inverse.floor = 0, inverse.floater.formula = "(function(index) {min(9.55,max((-1.5*1mLIBOR)+9.55,0))})"), .Names = c("floater.balance", 
"floater.cap", "floater.floor", "floater.index", "floater.formula", 
"inverse.balance", "inverse.cap", "inverse.multipler", "inverse.floor", 
"inverse.floater.formula"))





From emmanuel.blondel1 at gmail.com  Sat May 27 16:20:05 2017
From: emmanuel.blondel1 at gmail.com (Emmanuel Blondel)
Date: Sat, 27 May 2017 16:20:05 +0200
Subject: [R-pkg-devel] Package submission - Issue with pandoc in R CMD
 check
In-Reply-To: <af9d8208-7e91-e441-7c28-6688f7e10176@statistik.tu-dortmund.de>
References: <01d2d583$Blat.v2.2.2$b6356e09@mail.statistik.tu-dortmund.de>
 <4d567883-51b1-3704-0d55-b30234a746fb@gmail.com>
 <af9d8208-7e91-e441-7c28-6688f7e10176@statistik.tu-dortmund.de>
Message-ID: <4f455878-090f-1e0a-0c4d-69d03472ae9c@gmail.com>

Thanks Uwe for your clarifications. Can you let me know if i need to 
change something on my side, and/or resubmit the package to CRAN? (the 
warning on Pandoc was the only one) Thanks in advance

Best,
Emmanuel

Le 26/05/2017 ? 00:11, Uwe Ligges a ?crit :
> This is currently under inspection by the CRAN team. Apparently 
> img.shields.io have changed the cypher settings and pandoc fails with 
> the new settings. We may have to disable *.md processing for some time.
>
> Best,
> Uwe Ligges
>
>
>
> On 25.05.2017 20:59, Emmanuel Blondel wrote:
>> Dear all,
>>
>> I've just submitted a new package named geometa, for which i received 
>> the message below. Indeed i had sent in my submission some question 
>> mark about the warning i obtain during R CMD check:
>>
>> In case of R release and R devel, I got the following warning:
>>
>> Conversion of 'README.md' failed:
>> pandoc.exe: Could not 
>> fetchhttps://img.shields.io/badge/Github-0.1--0-blue.svg
>> TlsExceptionHostPort (HandshakeFailed Error_EOF) "img.shields.io" 443
>>
>> I've been looking for information about it, and it seems to be 
>> reported as bug of Pandoc. Same occur if I use an http link instead. 
>> I didn't find any successful alternative to remove this warning, and 
>> of course for this package and others i maintain, i would like to 
>> keep the 2 badges, 1 for CRAN and 1 for Github so user can quickly 
>> check if there is a pending revision in Github.
>>
>> R CRAN checks links:
>> - old release:https://win-builder.r-project.org/GphApwuaD56b
>> - release:https://win-builder.r-project.org/maQicmvW941l
>> - devel:https://win-builder.r-project.org/OLSqwXd4W442
>>
>> I would be very grateful if someone can shed light on this, and 
>> suggest a solution, so i could re-submit the package to CRAN.
>>
>> Best regards
>> Emmanuel
>>
>>
>> -------- Message transf?r? --------
>> Sujet :     [CRAN-pretest-archived] CRAN submission geometa 0.1-0
>> Date :     Thu, 25 May 2017 20:21:22 +0200
>> De :     Uwe.Ligges at R-Project.org
>> R?pondre ? :     CRAN at R-project.org
>> Pour :     emmanuel.blondel1 at gmail.com
>> Copie ? :     CRAN at R-project.org
>>
>>
>>
>> Dear maintainer,
>>    package geometa_0.1-0.tar.gz does not pass the incoming checks 
>> automatically, please see the pre-test at:
>> <https://win-builder.r-project.org/incoming_pretest/170525_152229_geometa_010/00check.log> 
>>
>> Status: 1 WARNING, 1 NOTE
>>    Please fix all problems and resubmit a fixed version via the webform.
>> If you are not sure how to fix the problems shown, please ask for 
>> help on the R-package-devel mailing list:
>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>> If you are fairly certain the rejection is a false positive, please 
>> reply-all to this message and explain.
>>    More details are given in the directory:
>> <https://win-builder.r-project.org/incoming_pretest/170525_152229_geometa_010> 
>>
>> The files will be removed after roughly 7 days.
>>       Best regards,
>> CRAN teams' auto-check service
>>
>>
>>     [[alternative HTML version deleted]]
>>
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>


From ligges at statistik.tu-dortmund.de  Sat May 27 16:25:12 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sat, 27 May 2017 16:25:12 +0200
Subject: [R-pkg-devel] Package submission - Issue with pandoc in R CMD
 check
In-Reply-To: <4f455878-090f-1e0a-0c4d-69d03472ae9c@gmail.com>
References: <01d2d583$Blat.v2.2.2$b6356e09@mail.statistik.tu-dortmund.de>
 <4d567883-51b1-3704-0d55-b30234a746fb@gmail.com>
 <af9d8208-7e91-e441-7c28-6688f7e10176@statistik.tu-dortmund.de>
 <4f455878-090f-1e0a-0c4d-69d03472ae9c@gmail.com>
Message-ID: <97708b6f-afc3-a303-892a-11bc6fccd133@statistik.tu-dortmund.de>

For geometa:

If you resubmit without the access to "img.shields.io", we can publish 
now. Otherweise, as we have not yet managed to get a univesally working 
pandoc on the CRAN master, we cannot publish your package yet.

Best,
Uwe Ligges





On 27.05.2017 16:20, Emmanuel Blondel wrote:
> Thanks Uwe for your clarifications. Can you let me know if i need to 
> change something on my side, and/or resubmit the package to CRAN? (the 
> warning on Pandoc was the only one) Thanks in advance
> 
> Best,
> Emmanuel
> 
> Le 26/05/2017 ? 00:11, Uwe Ligges a ?crit :
>> This is currently under inspection by the CRAN team. Apparently 
>> img.shields.io have changed the cypher settings and pandoc fails with 
>> the new settings. We may have to disable *.md processing for some time.
>>
>> Best,
>> Uwe Ligges
>>
>>
>>
>> On 25.05.2017 20:59, Emmanuel Blondel wrote:
>>> Dear all,
>>>
>>> I've just submitted a new package named geometa, for which i received 
>>> the message below. Indeed i had sent in my submission some question 
>>> mark about the warning i obtain during R CMD check:
>>>
>>> In case of R release and R devel, I got the following warning:
>>>
>>> Conversion of 'README.md' failed:
>>> pandoc.exe: Could not 
>>> fetchhttps://img.shields.io/badge/Github-0.1--0-blue.svg
>>> TlsExceptionHostPort (HandshakeFailed Error_EOF) "img.shields.io" 443
>>>
>>> I've been looking for information about it, and it seems to be 
>>> reported as bug of Pandoc. Same occur if I use an http link instead. 
>>> I didn't find any successful alternative to remove this warning, and 
>>> of course for this package and others i maintain, i would like to 
>>> keep the 2 badges, 1 for CRAN and 1 for Github so user can quickly 
>>> check if there is a pending revision in Github.
>>>
>>> R CRAN checks links:
>>> - old release:https://win-builder.r-project.org/GphApwuaD56b
>>> - release:https://win-builder.r-project.org/maQicmvW941l
>>> - devel:https://win-builder.r-project.org/OLSqwXd4W442
>>>
>>> I would be very grateful if someone can shed light on this, and 
>>> suggest a solution, so i could re-submit the package to CRAN.
>>>
>>> Best regards
>>> Emmanuel
>>>
>>>
>>> -------- Message transf?r? --------
>>> Sujet :     [CRAN-pretest-archived] CRAN submission geometa 0.1-0
>>> Date :     Thu, 25 May 2017 20:21:22 +0200
>>> De :     Uwe.Ligges at R-Project.org
>>> R?pondre ? :     CRAN at R-project.org
>>> Pour :     emmanuel.blondel1 at gmail.com
>>> Copie ? :     CRAN at R-project.org
>>>
>>>
>>>
>>> Dear maintainer,
>>>    package geometa_0.1-0.tar.gz does not pass the incoming checks 
>>> automatically, please see the pre-test at:
>>> <https://win-builder.r-project.org/incoming_pretest/170525_152229_geometa_010/00check.log> 
>>>
>>> Status: 1 WARNING, 1 NOTE
>>>    Please fix all problems and resubmit a fixed version via the webform.
>>> If you are not sure how to fix the problems shown, please ask for 
>>> help on the R-package-devel mailing list:
>>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>> If you are fairly certain the rejection is a false positive, please 
>>> reply-all to this message and explain.
>>>    More details are given in the directory:
>>> <https://win-builder.r-project.org/incoming_pretest/170525_152229_geometa_010> 
>>>
>>> The files will be removed after roughly 7 days.
>>>       Best regards,
>>> CRAN teams' auto-check service
>>>
>>>
>>>     [[alternative HTML version deleted]]
>>>
>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>


From spencer.graves at effectivedefense.org  Sat May 27 16:37:16 2017
From: spencer.graves at effectivedefense.org (Spencer Graves)
Date: Sat, 27 May 2017 09:37:16 -0500
Subject: [R-pkg-devel] Package submission - Issue with pandoc in R CMD
 check
In-Reply-To: <97708b6f-afc3-a303-892a-11bc6fccd133@statistik.tu-dortmund.de>
References: <01d2d583$Blat.v2.2.2$b6356e09@mail.statistik.tu-dortmund.de>
 <4d567883-51b1-3704-0d55-b30234a746fb@gmail.com>
 <af9d8208-7e91-e441-7c28-6688f7e10176@statistik.tu-dortmund.de>
 <4f455878-090f-1e0a-0c4d-69d03472ae9c@gmail.com>
 <97708b6f-afc3-a303-892a-11bc6fccd133@statistik.tu-dortmund.de>
Message-ID: <fa1b40dd-0324-7c26-31fd-163bb16066b2@effectivedefense.org>



On 2017-05-27 9:25 AM, Uwe Ligges wrote:
> For geometa:
>
> If you resubmit without the access to "img.shields.io", we can publish 
> now. Otherweise, as we have not yet managed to get a univesally 
> working pandoc on the CRAN master, we cannot publish your package yet.


Uwe:


       Might it be appropriate to wrap anything that uses 
"img.shields.io" in "if(!fda::CRAN())" in all the relevant *.Rd files -- 
with appropriate error messages in functions that use "img.shields.io"?


       Thanks, Spencer

>
> Best,
> Uwe Ligges
>
>
>
>
>
> On 27.05.2017 16:20, Emmanuel Blondel wrote:
>> Thanks Uwe for your clarifications. Can you let me know if i need to 
>> change something on my side, and/or resubmit the package to CRAN? 
>> (the warning on Pandoc was the only one) Thanks in advance
>>
>> Best,
>> Emmanuel
>>
>> Le 26/05/2017 ? 00:11, Uwe Ligges a ?crit :
>>> This is currently under inspection by the CRAN team. Apparently 
>>> img.shields.io have changed the cypher settings and pandoc fails 
>>> with the new settings. We may have to disable *.md processing for 
>>> some time.
>>>
>>> Best,
>>> Uwe Ligges
>>>
>>>
>>>
>>> On 25.05.2017 20:59, Emmanuel Blondel wrote:
>>>> Dear all,
>>>>
>>>> I've just submitted a new package named geometa, for which i 
>>>> received the message below. Indeed i had sent in my submission some 
>>>> question mark about the warning i obtain during R CMD check:
>>>>
>>>> In case of R release and R devel, I got the following warning:
>>>>
>>>> Conversion of 'README.md' failed:
>>>> pandoc.exe: Could not 
>>>> fetchhttps://img.shields.io/badge/Github-0.1--0-blue.svg
>>>> TlsExceptionHostPort (HandshakeFailed Error_EOF) "img.shields.io" 443
>>>>
>>>> I've been looking for information about it, and it seems to be 
>>>> reported as bug of Pandoc. Same occur if I use an http link 
>>>> instead. I didn't find any successful alternative to remove this 
>>>> warning, and of course for this package and others i maintain, i 
>>>> would like to keep the 2 badges, 1 for CRAN and 1 for Github so 
>>>> user can quickly check if there is a pending revision in Github.
>>>>
>>>> R CRAN checks links:
>>>> - old release:https://win-builder.r-project.org/GphApwuaD56b
>>>> - release:https://win-builder.r-project.org/maQicmvW941l
>>>> - devel:https://win-builder.r-project.org/OLSqwXd4W442
>>>>
>>>> I would be very grateful if someone can shed light on this, and 
>>>> suggest a solution, so i could re-submit the package to CRAN.
>>>>
>>>> Best regards
>>>> Emmanuel
>>>>
>>>>
>>>> -------- Message transf?r? --------
>>>> Sujet :     [CRAN-pretest-archived] CRAN submission geometa 0.1-0
>>>> Date :     Thu, 25 May 2017 20:21:22 +0200
>>>> De :     Uwe.Ligges at R-Project.org
>>>> R?pondre ? :     CRAN at R-project.org
>>>> Pour :     emmanuel.blondel1 at gmail.com
>>>> Copie ? :     CRAN at R-project.org
>>>>
>>>>
>>>>
>>>> Dear maintainer,
>>>>    package geometa_0.1-0.tar.gz does not pass the incoming checks 
>>>> automatically, please see the pre-test at:
>>>> <https://win-builder.r-project.org/incoming_pretest/170525_152229_geometa_010/00check.log> 
>>>>
>>>> Status: 1 WARNING, 1 NOTE
>>>>    Please fix all problems and resubmit a fixed version via the 
>>>> webform.
>>>> If you are not sure how to fix the problems shown, please ask for 
>>>> help on the R-package-devel mailing list:
>>>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>>> If you are fairly certain the rejection is a false positive, please 
>>>> reply-all to this message and explain.
>>>>    More details are given in the directory:
>>>> <https://win-builder.r-project.org/incoming_pretest/170525_152229_geometa_010> 
>>>>
>>>> The files will be removed after roughly 7 days.
>>>>       Best regards,
>>>> CRAN teams' auto-check service
>>>>
>>>>
>>>>     [[alternative HTML version deleted]]
>>>>
>>>>
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From i.ucar86 at gmail.com  Sat May 27 15:07:53 2017
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Sat, 27 May 2017 15:07:53 +0200
Subject: [R-pkg-devel] run a function from a list
In-Reply-To: <241c90e1-4a54-4268-94ae-c01188cf8680@me.com>
References: <241c90e1-4a54-4268-94ae-c01188cf8680@me.com>
Message-ID: <CALEXWq39Ru=kX6i-bLNTw7wAc1jY5ubJNAxb_QDbZFBe+f9J8w@mail.gmail.com>

Hi Glenn,

Try this:

my_list <- list(func = eval(parse(text=paste0("function()",
"print('this is a function')"))))
my_list$func()
#> "this is a function"

Regards,
I?aki

2017-05-27 14:49 GMT+02:00 Glenn Schultz <glennmschultz at me.com>:
> All,
> I have a function to split a fixed rate bond into a floater/inverse floater
> combination (something typically done in mortgage securtizations).  The
> function returns a list which serves as the deal structure over which
> principal payment rules will iterate.  However, I would like to call the
> functions as they drive the interest coupon payments.  I am using paste0()
> to piece together the function and I think the problem is the quotes but not
> sure.
>
> I have tried source, do.call, list$foo(), list[[]]().  None of these have
> worked.  Any advice on structuring this problem is appreciated.
>
> Thanks,
> Glenn
>
> structure(list(floater.balance = 30.78, floater.cap = 6.66666666666667,
> floater.floor = 0.3, floater.index = "1mLIBOR", floater.formula =
> "function(index){min(6.67,max((1mLIBOR+0.3)0.3))}", inverse.balance = 20.52,
> inverse.cap = 9.55, inverse.multipler = 1.5, inverse.floor = 0,
> inverse.floater.formula = "(function(index)
> {min(9.55,max((-1.5*1mLIBOR)+9.55,0))})"), .Names = c("floater.balance",
> "floater.cap", "floater.floor", "floater.index", "floater.formula",
> "inverse.balance", "inverse.cap", "inverse.multipler", "inverse.floor",
> "inverse.floater.formula"))
>
>
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
I?aki ?car
http://www.enchufa2.es
@Enchufa2


From ligges at statistik.tu-dortmund.de  Sat May 27 17:05:27 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sat, 27 May 2017 17:05:27 +0200
Subject: [R-pkg-devel] Package submission - Issue with pandoc in R CMD
 check
In-Reply-To: <fa1b40dd-0324-7c26-31fd-163bb16066b2@effectivedefense.org>
References: <01d2d583$Blat.v2.2.2$b6356e09@mail.statistik.tu-dortmund.de>
 <4d567883-51b1-3704-0d55-b30234a746fb@gmail.com>
 <af9d8208-7e91-e441-7c28-6688f7e10176@statistik.tu-dortmund.de>
 <4f455878-090f-1e0a-0c4d-69d03472ae9c@gmail.com>
 <97708b6f-afc3-a303-892a-11bc6fccd133@statistik.tu-dortmund.de>
 <fa1b40dd-0324-7c26-31fd-163bb16066b2@effectivedefense.org>
Message-ID: <36ac7555-e6d4-e9a3-cb9b-21f2195e7ef7@statistik.tu-dortmund.de>



On 27.05.2017 16:37, Spencer Graves wrote:
> 
> 
> On 2017-05-27 9:25 AM, Uwe Ligges wrote:
>> For geometa:
>>
>> If you resubmit without the access to "img.shields.io", we can publish 
>> now. Otherweise, as we have not yet managed to get a univesally 
>> working pandoc on the CRAN master, we cannot publish your package yet.
> 
> 
> Uwe:
> 
> 
>        Might it be appropriate to wrap anything that uses 
> "img.shields.io" in "if(!fda::CRAN())" in all the relevant *.Rd files -- 
> with appropriate error messages in functions that use "img.shields.io"?

As I said previously: "This is currently under inspection by the CRAN 
team."
We really need to investigate this carefully, including options that we 
have to keep the system running with minimal efforts for both the CRAN 
team and hundreds of maintainers who are using "img.shields.io".


Note that the functions fda::CRAN() will not identoify the CRAN master 
to be CRAN as we do not run checks there and pandoc and "img.shields.io" 
is frequently needed for Readme.md conversions.

So just give us a week or two...

Best,
Uwe Ligges


> 
> 
>        Thanks, Spencer
> 
>>
>> Best,
>> Uwe Ligges
>>
>>
>>
>>
>>
>> On 27.05.2017 16:20, Emmanuel Blondel wrote:
>>> Thanks Uwe for your clarifications. Can you let me know if i need to 
>>> change something on my side, and/or resubmit the package to CRAN? 
>>> (the warning on Pandoc was the only one) Thanks in advance
>>>
>>> Best,
>>> Emmanuel
>>>
>>> Le 26/05/2017 ? 00:11, Uwe Ligges a ?crit :
>>>> This is currently under inspection by the CRAN team. Apparently 
>>>> img.shields.io have changed the cypher settings and pandoc fails 
>>>> with the new settings. We may have to disable *.md processing for 
>>>> some time.
>>>>
>>>> Best,
>>>> Uwe Ligges
>>>>
>>>>
>>>>
>>>> On 25.05.2017 20:59, Emmanuel Blondel wrote:
>>>>> Dear all,
>>>>>
>>>>> I've just submitted a new package named geometa, for which i 
>>>>> received the message below. Indeed i had sent in my submission some 
>>>>> question mark about the warning i obtain during R CMD check:
>>>>>
>>>>> In case of R release and R devel, I got the following warning:
>>>>>
>>>>> Conversion of 'README.md' failed:
>>>>> pandoc.exe: Could not 
>>>>> fetchhttps://img.shields.io/badge/Github-0.1--0-blue.svg
>>>>> TlsExceptionHostPort (HandshakeFailed Error_EOF) "img.shields.io" 443
>>>>>
>>>>> I've been looking for information about it, and it seems to be 
>>>>> reported as bug of Pandoc. Same occur if I use an http link 
>>>>> instead. I didn't find any successful alternative to remove this 
>>>>> warning, and of course for this package and others i maintain, i 
>>>>> would like to keep the 2 badges, 1 for CRAN and 1 for Github so 
>>>>> user can quickly check if there is a pending revision in Github.
>>>>>
>>>>> R CRAN checks links:
>>>>> - old release:https://win-builder.r-project.org/GphApwuaD56b
>>>>> - release:https://win-builder.r-project.org/maQicmvW941l
>>>>> - devel:https://win-builder.r-project.org/OLSqwXd4W442
>>>>>
>>>>> I would be very grateful if someone can shed light on this, and 
>>>>> suggest a solution, so i could re-submit the package to CRAN.
>>>>>
>>>>> Best regards
>>>>> Emmanuel
>>>>>
>>>>>
>>>>> -------- Message transf?r? --------
>>>>> Sujet :     [CRAN-pretest-archived] CRAN submission geometa 0.1-0
>>>>> Date :     Thu, 25 May 2017 20:21:22 +0200
>>>>> De :     Uwe.Ligges at R-Project.org
>>>>> R?pondre ? :     CRAN at R-project.org
>>>>> Pour :     emmanuel.blondel1 at gmail.com
>>>>> Copie ? :     CRAN at R-project.org
>>>>>
>>>>>
>>>>>
>>>>> Dear maintainer,
>>>>>    package geometa_0.1-0.tar.gz does not pass the incoming checks 
>>>>> automatically, please see the pre-test at:
>>>>> <https://win-builder.r-project.org/incoming_pretest/170525_152229_geometa_010/00check.log> 
>>>>>
>>>>> Status: 1 WARNING, 1 NOTE
>>>>>    Please fix all problems and resubmit a fixed version via the 
>>>>> webform.
>>>>> If you are not sure how to fix the problems shown, please ask for 
>>>>> help on the R-package-devel mailing list:
>>>>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>>>> If you are fairly certain the rejection is a false positive, please 
>>>>> reply-all to this message and explain.
>>>>>    More details are given in the directory:
>>>>> <https://win-builder.r-project.org/incoming_pretest/170525_152229_geometa_010> 
>>>>>
>>>>> The files will be removed after roughly 7 days.
>>>>>       Best regards,
>>>>> CRAN teams' auto-check service
>>>>>
>>>>>
>>>>>     [[alternative HTML version deleted]]
>>>>>
>>>>>
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From emmanuel.blondel1 at gmail.com  Sat May 27 22:18:13 2017
From: emmanuel.blondel1 at gmail.com (Emmanuel Blondel)
Date: Sat, 27 May 2017 22:18:13 +0200
Subject: [R-pkg-devel] Package submission - Issue with pandoc in R CMD
 check
In-Reply-To: <97708b6f-afc3-a303-892a-11bc6fccd133@statistik.tu-dortmund.de>
References: <01d2d583$Blat.v2.2.2$b6356e09@mail.statistik.tu-dortmund.de>
 <4d567883-51b1-3704-0d55-b30234a746fb@gmail.com>
 <af9d8208-7e91-e441-7c28-6688f7e10176@statistik.tu-dortmund.de>
 <4f455878-090f-1e0a-0c4d-69d03472ae9c@gmail.com>
 <97708b6f-afc3-a303-892a-11bc6fccd133@statistik.tu-dortmund.de>
Message-ID: <fbaa2607-0266-bc5c-f098-d5fcdd96e0b7@gmail.com>

Dear Uwe, i clearly understand the CRAN team needs time on this. I have 
no problem in postponing on my side, and resubmit later next month. 
Thanks & best regards


Le 27/05/2017 ? 16:25, Uwe Ligges a ?crit :
> For geometa:
>
> If you resubmit without the access to "img.shields.io", we can publish 
> now. Otherweise, as we have not yet managed to get a univesally 
> working pandoc on the CRAN master, we cannot publish your package yet.
>
> Best,
> Uwe Ligges
>
>
>
>
>
> On 27.05.2017 16:20, Emmanuel Blondel wrote:
>> Thanks Uwe for your clarifications. Can you let me know if i need to 
>> change something on my side, and/or resubmit the package to CRAN? 
>> (the warning on Pandoc was the only one) Thanks in advance
>>
>> Best,
>> Emmanuel
>>
>> Le 26/05/2017 ? 00:11, Uwe Ligges a ?crit :
>>> This is currently under inspection by the CRAN team. Apparently 
>>> img.shields.io have changed the cypher settings and pandoc fails 
>>> with the new settings. We may have to disable *.md processing for 
>>> some time.
>>>
>>> Best,
>>> Uwe Ligges
>>>
>>>
>>>
>>> On 25.05.2017 20:59, Emmanuel Blondel wrote:
>>>> Dear all,
>>>>
>>>> I've just submitted a new package named geometa, for which i 
>>>> received the message below. Indeed i had sent in my submission some 
>>>> question mark about the warning i obtain during R CMD check:
>>>>
>>>> In case of R release and R devel, I got the following warning:
>>>>
>>>> Conversion of 'README.md' failed:
>>>> pandoc.exe: Could not 
>>>> fetchhttps://img.shields.io/badge/Github-0.1--0-blue.svg
>>>> TlsExceptionHostPort (HandshakeFailed Error_EOF) "img.shields.io" 443
>>>>
>>>> I've been looking for information about it, and it seems to be 
>>>> reported as bug of Pandoc. Same occur if I use an http link 
>>>> instead. I didn't find any successful alternative to remove this 
>>>> warning, and of course for this package and others i maintain, i 
>>>> would like to keep the 2 badges, 1 for CRAN and 1 for Github so 
>>>> user can quickly check if there is a pending revision in Github.
>>>>
>>>> R CRAN checks links:
>>>> - old release:https://win-builder.r-project.org/GphApwuaD56b
>>>> - release:https://win-builder.r-project.org/maQicmvW941l
>>>> - devel:https://win-builder.r-project.org/OLSqwXd4W442
>>>>
>>>> I would be very grateful if someone can shed light on this, and 
>>>> suggest a solution, so i could re-submit the package to CRAN.
>>>>
>>>> Best regards
>>>> Emmanuel
>>>>
>>>>
>>>> -------- Message transf?r? --------
>>>> Sujet :     [CRAN-pretest-archived] CRAN submission geometa 0.1-0
>>>> Date :     Thu, 25 May 2017 20:21:22 +0200
>>>> De :     Uwe.Ligges at R-Project.org
>>>> R?pondre ? :     CRAN at R-project.org
>>>> Pour :     emmanuel.blondel1 at gmail.com
>>>> Copie ? :     CRAN at R-project.org
>>>>
>>>>
>>>>
>>>> Dear maintainer,
>>>>    package geometa_0.1-0.tar.gz does not pass the incoming checks 
>>>> automatically, please see the pre-test at:
>>>> <https://win-builder.r-project.org/incoming_pretest/170525_152229_geometa_010/00check.log> 
>>>>
>>>> Status: 1 WARNING, 1 NOTE
>>>>    Please fix all problems and resubmit a fixed version via the 
>>>> webform.
>>>> If you are not sure how to fix the problems shown, please ask for 
>>>> help on the R-package-devel mailing list:
>>>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>>> If you are fairly certain the rejection is a false positive, please 
>>>> reply-all to this message and explain.
>>>>    More details are given in the directory:
>>>> <https://win-builder.r-project.org/incoming_pretest/170525_152229_geometa_010> 
>>>>
>>>> The files will be removed after roughly 7 days.
>>>>       Best regards,
>>>> CRAN teams' auto-check service
>>>>
>>>>
>>>>     [[alternative HTML version deleted]]
>>>>
>>>>
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>

-- 
*Emmanuel Blondel*
International Consultant | CEO
/Geographic Information Systems in Agronomy, Environment, Fishery & 
Marine Sciences/
41, Avenue du Vacayrial
81370 Saint Sulpice la Pointe, France
Tel: +33 (0) 6 45 97 87 52
Website: http://eblondel.github.io <http://eblondel.github.io/#/services>
Email: emmanuel.blondel1 at gmail.com <mailto:emmanuel.blondel1 at gmail.com>

	[[alternative HTML version deleted]]


From rmh at temple.edu  Sun May 28 20:56:46 2017
From: rmh at temple.edu (Richard M. Heiberger)
Date: Sun, 28 May 2017 14:56:46 -0400
Subject: [R-pkg-devel] run a function from a list
In-Reply-To: <241c90e1-4a54-4268-94ae-c01188cf8680@me.com>
References: <241c90e1-4a54-4268-94ae-c01188cf8680@me.com>
Message-ID: <CAGx1TMC5vWQeDCOgDF=28X_qTWH6WY13scyvAbUwBCR1C2u1kg@mail.gmail.com>

Your quote symbols are certainly getting in the way.
try basing your next version on something like this,
where the items in the list named tmp are actual functions, not
character strings.

> tmp <- list(prob=pnorm, quantile=qnorm)
> tmp$prob(1.96)
[1] 0.9750021
> tmp$quantile(.975)
[1] 1.959964



On Sat, May 27, 2017 at 8:49 AM, Glenn Schultz <glennmschultz at me.com> wrote:
> All,
> I have a function to split a fixed rate bond into a floater/inverse floater
> combination (something typically done in mortgage securtizations).  The
> function returns a list which serves as the deal structure over which
> principal payment rules will iterate.  However, I would like to call the
> functions as they drive the interest coupon payments.  I am using paste0()
> to piece together the function and I think the problem is the quotes but not
> sure.
>
> I have tried source, do.call, list$foo(), list[[]]().  None of these have
> worked.  Any advice on structuring this problem is appreciated.
>
> Thanks,
> Glenn
>
> structure(list(floater.balance = 30.78, floater.cap = 6.66666666666667,
> floater.floor = 0.3, floater.index = "1mLIBOR", floater.formula =
> "function(index){min(6.67,max((1mLIBOR+0.3)0.3))}", inverse.balance = 20.52,
> inverse.cap = 9.55, inverse.multipler = 1.5, inverse.floor = 0,
> inverse.floater.formula = "(function(index)
> {min(9.55,max((-1.5*1mLIBOR)+9.55,0))})"), .Names = c("floater.balance",
> "floater.cap", "floater.floor", "floater.index", "floater.formula",
> "inverse.balance", "inverse.cap", "inverse.multipler", "inverse.floor",
> "inverse.floater.formula"))
>
>
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From markus.mueller.1.g at googlemail.com  Mon May 29 17:45:07 2017
From: markus.mueller.1.g at googlemail.com (=?UTF-8?Q?Markus_M=C3=BCller?=)
Date: Mon, 29 May 2017 17:45:07 +0200
Subject: [R-pkg-devel] no source references for S4 classes?
Message-ID: <CAOAQ5soFxOFdZo8ncEUXF5fbShVpaEFKciAwOWf8J-WoJjAZoA@mail.gmail.com>

Hi
I am developing a small package that converts comments to documentation.
One of my  design aims is to duplicate as little as possible of R 's
internal machinery.

In particular I want to load the package (to be documented) with 'library',
inspect all its objects like functions,generics methods and classes and
then apply my genericFunction  'writeRdFile'
to every one of these objects.
If possible I want to avoid parsing the package code myself.
This works well for functions, generics, S4 methods since 'srcref'  in
these cases yields the snippet of code that I want.

For S4 classes it yields NULL however, while I would like to something like
setClass(Class=MyClass,representation....

Is there an alternative ?


p.s. I am aware of roxygen and inlinedocs, but both of them parse and
eveluate the source code themselves.


Thanks a lot in advance
Markus

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Mon May 29 20:22:44 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Mon, 29 May 2017 14:22:44 -0400
Subject: [R-pkg-devel] no source references for S4 classes?
In-Reply-To: <CAOAQ5soFxOFdZo8ncEUXF5fbShVpaEFKciAwOWf8J-WoJjAZoA@mail.gmail.com>
References: <CAOAQ5soFxOFdZo8ncEUXF5fbShVpaEFKciAwOWf8J-WoJjAZoA@mail.gmail.com>
Message-ID: <b2d84b0a-cea8-032c-1333-66e1dabe6610@gmail.com>

On 29/05/2017 11:45 AM, Markus M?ller wrote:
> Hi
> I am developing a small package that converts comments to documentation.
> One of my  design aims is to duplicate as little as possible of R 's
> internal machinery.
>
> In particular I want to load the package (to be documented) with 'library',
> inspect all its objects like functions,generics methods and classes and
> then apply my genericFunction  'writeRdFile'
> to every one of these objects.
> If possible I want to avoid parsing the package code myself.
> This works well for functions, generics, S4 methods since 'srcref'  in
> these cases yields the snippet of code that I want.
>
> For S4 classes it yields NULL however, while I would like to something like
> setClass(Class=MyClass,representation....
>
> Is there an alternative ?
>

Source reference information is kept for function and method bodies, but 
not for class definitions, so you'll need to do some more work to 
reconstruct the calls.  That may have been done already; hopefully if so 
someone else will point out where.

Duncan Murdoch


From martinleewatts at gmail.com  Wed May 31 11:18:58 2017
From: martinleewatts at gmail.com (Martin Watts)
Date: Wed, 31 May 2017 10:18:58 +0100
Subject: [R-pkg-devel] R force download of specific package versions in
 DESCRIPTION file
In-Reply-To: <f05a8b93-c853-fd25-0d33-feddfb813564@gmail.com>
References: <CAKDTPH1vE9yEeNQnF9J-QcbAsj_42x7TKEiOCaBB+EJwPTkr8g@mail.gmail.com>
 <f05a8b93-c853-fd25-0d33-feddfb813564@gmail.com>
Message-ID: <CAKDTPH190iTV0bq04g4tLQOBAZRSLN7-vDGLn06rhjjpvNEz2Q@mail.gmail.com>

Hi,

Thanks for your reply, I've taken a look at packrat and it looks
interesting but I don't think it's quite what I want. Packrat works on the
assumption that the R session is run from the project directory, which
won't necessarily be true in our case since, for example, we interface with
some of our R code from python and our packages reference each other.

Our deployment process at the moment is to just install.packages our
packages to get all the required dependencies. This work well so I'd like
to keep to this structure but I'm surprised that the DESCRIPTION file
supports the == syntax if there is no way to enforce it at install?

My alternative would be to write my own script that parses our DESCRIPTION
files, pulls out the required versions and uses some code like this (
https://gist.github.com/viking/1503736) to install the external packages
manually first before installing our packages, but this seems like it would
be a lot of work.

Thanks,
Martin

On Mon, May 22, 2017 at 8:52 AM, Facundo Mu?oz <famuvie at gmail.com> wrote:

> I think Packrat [1] might help:
>
> - Isolated: ... each project its own private package library.
> - Reproducible: ... exact versions are the ones that get installed ...
>
> ?acu.-
>
> [1] https://rstudio.github.io/packrat/
>
>
> On 05/18/2017 04:34 PM, Martin Watts wrote:
> > I have created a package (which I host on a local server) that I have set
> > up to depend on exact versions of other packages, i.e my DESCRIPTION file
> > looks like this:
> >
> > Package: myPackage
> > Depends:
> >     R (>= 3.2.5)
> > Imports:
> >     dplyr (== 0.5.0),
> >     lazyeval (== 0.2.0),
> >     lubridate (== 1.6.0),
> >     magrittr (== 1.5),
> >     reshape2 (== 1.4.2)
> >
> >
> > My expectation is that when I run install.packages('myPackage') that each
> > of these specific dependency versions will be installed, but this is not
> > the case. It looks like if a dependent package is not present at all then
> > it is installed to the correct version, but when it is present at a LATER
> > version it is not rolled-back to the desired version.
> >
> > Is there a way that we can force all requested versions of these packages
> > to be installed? We would like this behaviour as we'd like a way to
> > guarantee that all R environments are exactly the same when running this
> > code.
> >
> > Note that I've been testing using devtools::install, but I assume that
> this
> > mirrors the behaviour of install.packages.
> > Also posted on SO: http://stackoverflow.com/questions/44028355/r-force-
> > download-of-specific-package-versions-in-description-file
> >
> > Thanks,
> > Martin
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From wenchel at gmail.com  Wed May 31 15:10:05 2017
From: wenchel at gmail.com (Seth Wenchel)
Date: Wed, 31 May 2017 09:10:05 -0400
Subject: [R-pkg-devel] R force download of specific package versions in
 DESCRIPTION file
In-Reply-To: <CAKDTPH190iTV0bq04g4tLQOBAZRSLN7-vDGLn06rhjjpvNEz2Q@mail.gmail.com>
References: <CAKDTPH1vE9yEeNQnF9J-QcbAsj_42x7TKEiOCaBB+EJwPTkr8g@mail.gmail.com>
 <f05a8b93-c853-fd25-0d33-feddfb813564@gmail.com>
 <CAKDTPH190iTV0bq04g4tLQOBAZRSLN7-vDGLn06rhjjpvNEz2Q@mail.gmail.com>
Message-ID: <CAEFOC2K9i0TvcwvNiD6yc-KVoo-99Z_tcOpGR_dt_VDQdzzj3w@mail.gmail.com>

You may also want to look at the checkpoint and miniCRAN packages
https://CRAN.R-project.org/package=checkpoint
<https://cran.r-project.org/package=checkpoint>
https://CRAN.R-project.org/package=miniCRAN
<https://cran.r-project.org/package=miniCRAN>

I haven't used the checkpoint package before, but I have used miniCRAN to
setup an internal CRAN-like repo with specific package versions.  Then you
can use code like:

    install.packages("martinsAwesomePackage",
repos="file://path/to/internal/repo/with/correct/versions")

if you have more than one AwesomePackage with different dependencies, you
may want to also specify the lib= parameter (though users would also have
to specify the new library by either adding it to .libPaths() or using the
lib.loc= parameter of library()).

Regards,
Seth

On Wed, May 31, 2017 at 5:18 AM, Martin Watts <martinleewatts at gmail.com>
wrote:

> Hi,
>
> Thanks for your reply, I've taken a look at packrat and it looks
> interesting but I don't think it's quite what I want. Packrat works on the
> assumption that the R session is run from the project directory, which
> won't necessarily be true in our case since, for example, we interface with
> some of our R code from python and our packages reference each other.
>
> Our deployment process at the moment is to just install.packages our
> packages to get all the required dependencies. This work well so I'd like
> to keep to this structure but I'm surprised that the DESCRIPTION file
> supports the == syntax if there is no way to enforce it at install?
>
> My alternative would be to write my own script that parses our DESCRIPTION
> files, pulls out the required versions and uses some code like this (
> https://gist.github.com/viking/1503736) to install the external packages
> manually first before installing our packages, but this seems like it would
> be a lot of work.
>
> Thanks,
> Martin
>
> On Mon, May 22, 2017 at 8:52 AM, Facundo Mu?oz <famuvie at gmail.com> wrote:
>
> > I think Packrat [1] might help:
> >
> > - Isolated: ... each project its own private package library.
> > - Reproducible: ... exact versions are the ones that get installed ...
> >
> > ?acu.-
> >
> > [1] https://rstudio.github.io/packrat/
> >
> >
> > On 05/18/2017 04:34 PM, Martin Watts wrote:
> > > I have created a package (which I host on a local server) that I have
> set
> > > up to depend on exact versions of other packages, i.e my DESCRIPTION
> file
> > > looks like this:
> > >
> > > Package: myPackage
> > > Depends:
> > >     R (>= 3.2.5)
> > > Imports:
> > >     dplyr (== 0.5.0),
> > >     lazyeval (== 0.2.0),
> > >     lubridate (== 1.6.0),
> > >     magrittr (== 1.5),
> > >     reshape2 (== 1.4.2)
> > >
> > >
> > > My expectation is that when I run install.packages('myPackage') that
> each
> > > of these specific dependency versions will be installed, but this is
> not
> > > the case. It looks like if a dependent package is not present at all
> then
> > > it is installed to the correct version, but when it is present at a
> LATER
> > > version it is not rolled-back to the desired version.
> > >
> > > Is there a way that we can force all requested versions of these
> packages
> > > to be installed? We would like this behaviour as we'd like a way to
> > > guarantee that all R environments are exactly the same when running
> this
> > > code.
> > >
> > > Note that I've been testing using devtools::install, but I assume that
> > this
> > > mirrors the behaviour of install.packages.
> > > Also posted on SO: http://stackoverflow.com/
> questions/44028355/r-force-
> > > download-of-specific-package-versions-in-description-file
> > >
> > > Thanks,
> > > Martin
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From thierry.onkelinx at inbo.be  Wed May 31 16:17:39 2017
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Wed, 31 May 2017 16:17:39 +0200
Subject: [R-pkg-devel] R force download of specific package versions in
 DESCRIPTION file
In-Reply-To: <CAKDTPH190iTV0bq04g4tLQOBAZRSLN7-vDGLn06rhjjpvNEz2Q@mail.gmail.com>
References: <CAKDTPH1vE9yEeNQnF9J-QcbAsj_42x7TKEiOCaBB+EJwPTkr8g@mail.gmail.com>
 <f05a8b93-c853-fd25-0d33-feddfb813564@gmail.com>
 <CAKDTPH190iTV0bq04g4tLQOBAZRSLN7-vDGLn06rhjjpvNEz2Q@mail.gmail.com>
Message-ID: <CAJuCY5xJyrJoHGvcyYbP6xrHp376d2K+PGJyH8u7Wk32WoC16Q@mail.gmail.com>

Dear Martin,

We use Docker to create an image with R and specific versions of the
required packages. You can find our docker image and the source code at
https://hub.docker.com/r/inbobmk/rstable/

Best regards,

ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature and
Forest
team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
Kliniekstraat 25
1070 Anderlecht
Belgium

To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey

2017-05-31 11:18 GMT+02:00 Martin Watts <martinleewatts at gmail.com>:

> Hi,
>
> Thanks for your reply, I've taken a look at packrat and it looks
> interesting but I don't think it's quite what I want. Packrat works on the
> assumption that the R session is run from the project directory, which
> won't necessarily be true in our case since, for example, we interface with
> some of our R code from python and our packages reference each other.
>
> Our deployment process at the moment is to just install.packages our
> packages to get all the required dependencies. This work well so I'd like
> to keep to this structure but I'm surprised that the DESCRIPTION file
> supports the == syntax if there is no way to enforce it at install?
>
> My alternative would be to write my own script that parses our DESCRIPTION
> files, pulls out the required versions and uses some code like this (
> https://gist.github.com/viking/1503736) to install the external packages
> manually first before installing our packages, but this seems like it would
> be a lot of work.
>
> Thanks,
> Martin
>
> On Mon, May 22, 2017 at 8:52 AM, Facundo Mu?oz <famuvie at gmail.com> wrote:
>
> > I think Packrat [1] might help:
> >
> > - Isolated: ... each project its own private package library.
> > - Reproducible: ... exact versions are the ones that get installed ...
> >
> > ?acu.-
> >
> > [1] https://rstudio.github.io/packrat/
> >
> >
> > On 05/18/2017 04:34 PM, Martin Watts wrote:
> > > I have created a package (which I host on a local server) that I have
> set
> > > up to depend on exact versions of other packages, i.e my DESCRIPTION
> file
> > > looks like this:
> > >
> > > Package: myPackage
> > > Depends:
> > >     R (>= 3.2.5)
> > > Imports:
> > >     dplyr (== 0.5.0),
> > >     lazyeval (== 0.2.0),
> > >     lubridate (== 1.6.0),
> > >     magrittr (== 1.5),
> > >     reshape2 (== 1.4.2)
> > >
> > >
> > > My expectation is that when I run install.packages('myPackage') that
> each
> > > of these specific dependency versions will be installed, but this is
> not
> > > the case. It looks like if a dependent package is not present at all
> then
> > > it is installed to the correct version, but when it is present at a
> LATER
> > > version it is not rolled-back to the desired version.
> > >
> > > Is there a way that we can force all requested versions of these
> packages
> > > to be installed? We would like this behaviour as we'd like a way to
> > > guarantee that all R environments are exactly the same when running
> this
> > > code.
> > >
> > > Note that I've been testing using devtools::install, but I assume that
> > this
> > > mirrors the behaviour of install.packages.
> > > Also posted on SO: http://stackoverflow.com/
> questions/44028355/r-force-
> > > download-of-specific-package-versions-in-description-file
> > >
> > > Thanks,
> > > Martin
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From pdalgd at gmail.com  Fri Jun  2 17:11:56 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Fri, 2 Jun 2017 17:11:56 +0200
Subject: [R-pkg-devel] R 3.4.1 at end of June
Message-ID: <EE2487C4-DAD6-4F8C-A56B-E68A14484E7E@gmail.com>

Just a quick note to say that we intend to have a patch release, probably on June 30, mainly to pick up a few balls that were dropped on the 3.4.0 release. Full schedule to appear later (just need a little time to actually set it up + checking that the date doesn't collide with schedules of other people).

- Peter Dalgaard

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com











-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com











-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From edd at debian.org  Sat Jun  3 15:30:23 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 3 Jun 2017 08:30:23 -0500
Subject: [R-pkg-devel] Package submission - Issue with pandoc in R CMD
 check
In-Reply-To: <fbaa2607-0266-bc5c-f098-d5fcdd96e0b7@gmail.com>
References: <01d2d583$Blat.v2.2.2$b6356e09@mail.statistik.tu-dortmund.de>
 <4d567883-51b1-3704-0d55-b30234a746fb@gmail.com>
 <af9d8208-7e91-e441-7c28-6688f7e10176@statistik.tu-dortmund.de>
 <4f455878-090f-1e0a-0c4d-69d03472ae9c@gmail.com>
 <97708b6f-afc3-a303-892a-11bc6fccd133@statistik.tu-dortmund.de>
 <fbaa2607-0266-bc5c-f098-d5fcdd96e0b7@gmail.com>
Message-ID: <22834.47599.329490.850327@max.eddelbuettel.com>


On 27 May 2017 at 22:18, Emmanuel Blondel wrote:
| Dear Uwe, i clearly understand the CRAN team needs time on this. I have 
| no problem in postponing on my side, and resubmit later next month. 

As the problem appears to be somewhat hard and rooted in two areas that are
difficult to effectuate change in (as in: "we" control neither the pandoc
binary, nor the img.shields.io webserver) I took a somewhat more pessimistic
view of coming changes and ... simply coded around the problem by

  i)   caching a copy of the badge I needed in a new GitHub repository

  ii)  enabling the web server feature of the repo

  iii) reference that cached copy

See the new repo 'badges' at

  https://github.com/eddelbuettel/badges

and a first use in my RcppArmadillo package 

  https://github.com/RcppCore/RcppArmadillo/blob/master/README.md

which is currently simmering for already well over twenty-four hours at a low
temperature in the incoming area of our favourite repository.

By using the cached copy a simple static file from a (working) server, all
issues with pandoc are avoided.  So far it only has "my default" license
badge, it would of course be trivial add others so PR away.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd at debian.org  Sat Jun  3 15:51:16 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 3 Jun 2017 08:51:16 -0500
Subject: [R-pkg-devel] Package submission - Issue with pandoc in R CMD
 check
In-Reply-To: <22834.47599.329490.850327@max.eddelbuettel.com>
References: <01d2d583$Blat.v2.2.2$b6356e09@mail.statistik.tu-dortmund.de>
 <4d567883-51b1-3704-0d55-b30234a746fb@gmail.com>
 <af9d8208-7e91-e441-7c28-6688f7e10176@statistik.tu-dortmund.de>
 <4f455878-090f-1e0a-0c4d-69d03472ae9c@gmail.com>
 <97708b6f-afc3-a303-892a-11bc6fccd133@statistik.tu-dortmund.de>
 <fbaa2607-0266-bc5c-f098-d5fcdd96e0b7@gmail.com>
 <22834.47599.329490.850327@max.eddelbuettel.com>
Message-ID: <22834.48852.136344.947957@max.eddelbuettel.com>


On 3 June 2017 at 08:30, Dirk Eddelbuettel wrote:
| 
| On 27 May 2017 at 22:18, Emmanuel Blondel wrote:
| | Dear Uwe, i clearly understand the CRAN team needs time on this. I have 
| | no problem in postponing on my side, and resubmit later next month. 
| 
| As the problem appears to be somewhat hard and rooted in two areas that are
| difficult to effectuate change in (as in: "we" control neither the pandoc
| binary, nor the img.shields.io webserver) I took a somewhat more pessimistic
| view of coming changes and ... simply coded around the problem by
| 
|   i)   caching a copy of the badge I needed in a new GitHub repository
| 
|   ii)  enabling the web server feature of the repo
| 
|   iii) reference that cached copy
| 
| See the new repo 'badges' at
| 
|   https://github.com/eddelbuettel/badges
| 
| and a first use in my RcppArmadillo package 
| 
|   https://github.com/RcppCore/RcppArmadillo/blob/master/README.md
| 
| which is currently simmering for already well over twenty-four hours at a low
| temperature in the incoming area of our favourite repository.
| 
| By using the cached copy a simple static file from a (working) server, all
| issues with pandoc are avoided.  So far it only has "my default" license
| badge, it would of course be trivial add others so PR away.

I should add that this works well when you only call to the license badge (or
another static badge).

Another use case is to retrieve the code coverage badge, and that is a little
trickier as one essentially turns of the on-demand calculation.  But to me it
is still defensible to allow a CRAN submission, or until we get a better fix.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From i.ucar86 at gmail.com  Sat Jun  3 17:45:06 2017
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Sat, 3 Jun 2017 17:45:06 +0200
Subject: [R-pkg-devel] Logging data to disk from C++ using a DBMS
Message-ID: <CALEXWq0Mk1uAPoAf7J_tGZe3jTkhc0japJDhYWjD8_aRUoxpVg@mail.gmail.com>

Hi all,

We have a simulator, 'simmer', implemented as a C++ object (with Rcpp).
This simulator generates a bunch of data, and there are some functions
defined to bring this data to R space as data frames. The memory usage can
be a problem depending on the simulation model, so we would like to add
support for logging data directly to disk while being as transparent as
possible from the user perspective.

Our idea is to define a reusable chunk size and periodically append the
chunk to a DBIConnection by calling DBI::dbWriteTable from C++. In this
way, the subsequent analysis may be performed with dplyr no matter which
storage method is selected, memory or database.

The question is whether there is a better, more efficient, way of achieving
this goal. Is there any package already doing something similar? Ideas and
alternatives welcome. Thanks in advance.

Regards,
-- 
I?aki ?car
http://www.enchufa2.es
@Enchufa2

	[[alternative HTML version deleted]]


From edd at debian.org  Sat Jun  3 18:30:25 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 3 Jun 2017 11:30:25 -0500
Subject: [R-pkg-devel] Logging data to disk from C++ using a DBMS
In-Reply-To: <CALEXWq0Mk1uAPoAf7J_tGZe3jTkhc0japJDhYWjD8_aRUoxpVg@mail.gmail.com>
References: <CALEXWq0Mk1uAPoAf7J_tGZe3jTkhc0japJDhYWjD8_aRUoxpVg@mail.gmail.com>
Message-ID: <22834.58401.740368.278610@max.eddelbuettel.com>


On 3 June 2017 at 17:45, I?aki ?car wrote:
| We have a simulator, 'simmer', implemented as a C++ object (with Rcpp).
| This simulator generates a bunch of data, and there are some functions
| defined to bring this data to R space as data frames. The memory usage can
| be a problem depending on the simulation model, so we would like to add
| support for logging data directly to disk while being as transparent as
| possible from the user perspective.
| 
| Our idea is to define a reusable chunk size and periodically append the
| chunk to a DBIConnection by calling DBI::dbWriteTable from C++. In this
| way, the subsequent analysis may be performed with dplyr no matter which
| storage method is selected, memory or database.
| 
| The question is whether there is a better, more efficient, way of achieving
| this goal. Is there any package already doing something similar? Ideas and
| alternatives welcome. Thanks in advance.

I would do it differently, at least to start. Define a structure, either
plain in C/C++ or, preferably, with something portable like MgsPack (see
RcppMsgPack, which is header only; MsgPack can be deserialized easily by just
about every language on the planet) and have your C++ layer write it.  Then
when you're done, convert once, into DB or whatever else you want.

You can do it all at once and have your simulation hand off data to a logger
in a separate thread. But its more work, harder to debug and probably not
really needed.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From kvs at sigterm.ru  Sun Jun  4 21:56:52 2017
From: kvs at sigterm.ru (Konstantin Sorokin)
Date: Sun, 4 Jun 2017 22:56:52 +0300
Subject: [R-pkg-devel] Proper way to cleanup after build third party
	components?
Message-ID: <CAFjK30sXon4LAinwtJaajmag-yS_NS6HturWNm5TARVve35fUQ@mail.gmail.com>

Hello!

I've recently submitted my first package on CRAN and now need to make
some improvements
on feedback received from CRAN maintainers.

https://github.com/thekvs/zstdr
https://cran.r-project.org/web/packages/zstdr/index.html

My question are:

   1. In the process of building package I also need to build some
   third party components, now I use mktemp utility to create temporary
   subdirectory in /tmp/ directory where I build this third party part. I was
   told that according to CRAN packaging policy I should not leave any
   artifacts in /tmp/ after package build. My question is: Is it enough to
   delete this temporary directory in the "cleanup" script?
   2. Is it possible to install cmake on OSX and Solaris build hosts?


-- 
Konstantin Sorokin

	[[alternative HTML version deleted]]


From brian at braverock.com  Sun Jun  4 23:19:02 2017
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 04 Jun 2017 16:19:02 -0500
Subject: [R-pkg-devel] Proper way to cleanup after build third party
 components?
In-Reply-To: <CAFjK30sXon4LAinwtJaajmag-yS_NS6HturWNm5TARVve35fUQ@mail.gmail.com>
References: <CAFjK30sXon4LAinwtJaajmag-yS_NS6HturWNm5TARVve35fUQ@mail.gmail.com>
Message-ID: <1496611142.3169.1.camel@braverock.com>


On Sun, 2017-06-04 at 22:56 +0300, Konstantin Sorokin wrote:
> I've recently submitted my first package on CRAN and now need to make
> some improvements on feedback received from CRAN maintainers.
> 
> https://github.com/thekvs/zstdr
> https://cran.r-project.org/web/packages/zstdr/index.html
> 
> My question are:
> 
> ???1. In the process of building package I also need to build some
> ???third party components, now I use mktemp utility to create
> temporary subdirectory in /tmp/ directory where I build this third
> party part. I was?told that according to CRAN packaging policy I
> should not leave any?artifacts in /tmp/ after package build. My
> question is: Is it enough to?delete this temporary directory in the
> "cleanup" script?
> ???2. Is it possible to install cmake on OSX and Solaris build hosts?

Why not just use .Rbuildignore so that the generated tarball doesn't
have any of the extra files?  Or do I misunderstand your question?


From kvs at sigterm.ru  Sun Jun  4 23:51:24 2017
From: kvs at sigterm.ru (Konstantin Sorokin)
Date: Mon, 5 Jun 2017 00:51:24 +0300
Subject: [R-pkg-devel] Proper way to cleanup after build third party
	components?
In-Reply-To: <1496611142.3169.1.camel@braverock.com>
References: <CAFjK30sXon4LAinwtJaajmag-yS_NS6HturWNm5TARVve35fUQ@mail.gmail.com>
 <1496611142.3169.1.camel@braverock.com>
Message-ID: <CAFjK30tjw0B+4YkuKu1F3amnz02Q0odUP0sUxEeTgk7PqibGdQ@mail.gmail.com>

This third party component is a compression library for which my package
provides bindings and I need to build this library first. Look at the lines
starting from
https://github.com/thekvs/zstdr/blob/8ea428b33d986667494d940c66732dbbc66871b3/configure.ac#L34

On Mon, Jun 5, 2017 at 12:19 AM, Brian G. Peterson <brian at braverock.com>
wrote:

>
> On Sun, 2017-06-04 at 22:56 +0300, Konstantin Sorokin wrote:
> > I've recently submitted my first package on CRAN and now need to make
> > some improvements on feedback received from CRAN maintainers.
> >
> > https://github.com/thekvs/zstdr
> > https://cran.r-project.org/web/packages/zstdr/index.html
> >
> > My question are:
> >
> >    1. In the process of building package I also need to build some
> >    third party components, now I use mktemp utility to create
> > temporary subdirectory in /tmp/ directory where I build this third
> > party part. I was told that according to CRAN packaging policy I
> > should not leave any artifacts in /tmp/ after package build. My
> > question is: Is it enough to delete this temporary directory in the
> > "cleanup" script?
> >    2. Is it possible to install cmake on OSX and Solaris build hosts?
>
> Why not just use .Rbuildignore so that the generated tarball doesn't
> have any of the extra files?  Or do I misunderstand your question?
>



-- 
Konstantin Sorokin

	[[alternative HTML version deleted]]


From edd at debian.org  Mon Jun  5 00:13:32 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 4 Jun 2017 17:13:32 -0500
Subject: [R-pkg-devel] Proper way to cleanup after build third
	party	components?
In-Reply-To: <CAFjK30tjw0B+4YkuKu1F3amnz02Q0odUP0sUxEeTgk7PqibGdQ@mail.gmail.com>
References: <CAFjK30sXon4LAinwtJaajmag-yS_NS6HturWNm5TARVve35fUQ@mail.gmail.com>
 <1496611142.3169.1.camel@braverock.com>
 <CAFjK30tjw0B+4YkuKu1F3amnz02Q0odUP0sUxEeTgk7PqibGdQ@mail.gmail.com>
Message-ID: <22836.34316.308125.336852@max.eddelbuettel.com>


On 5 June 2017 at 00:51, Konstantin Sorokin wrote:
| This third party component is a compression library for which my package
| provides bindings and I need to build this library first. Look at the lines
| starting from
| https://github.com/thekvs/zstdr/blob/8ea428b33d986667494d940c66732dbbc66871b3/configure.ac#L34

The common paradigm is to first build below src/, and to then link via
src/Makevars to the static library you just built.

I don't have a real go-to example of a package that does this but you could
look into the BioConductor package RGBL (which builds Boost Graph first)
and/or the nloptr package (which, if need be, downloads nlopt and builds it;
my contribution there was the other part of finding / using a libnlopt if on
the system).

I wondered about this when CRANberries told me about your package. I guess
you can't assume the Zstandard library to be present?  Maybe one day the
hybrid approach of nloptr may work for you.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From kvs at sigterm.ru  Mon Jun  5 11:29:00 2017
From: kvs at sigterm.ru (Konstantin Sorokin)
Date: Mon, 5 Jun 2017 12:29:00 +0300
Subject: [R-pkg-devel] Proper way to cleanup after build third party
	components?
In-Reply-To: <22836.34316.308125.336852@max.eddelbuettel.com>
References: <CAFjK30sXon4LAinwtJaajmag-yS_NS6HturWNm5TARVve35fUQ@mail.gmail.com>
 <1496611142.3169.1.camel@braverock.com>
 <CAFjK30tjw0B+4YkuKu1F3amnz02Q0odUP0sUxEeTgk7PqibGdQ@mail.gmail.com>
 <22836.34316.308125.336852@max.eddelbuettel.com>
Message-ID: <CAFjK30usUyF5qGPpM=Tt7DYmex0AzjRwYawmPni3m9tACG+EXg@mail.gmail.com>

On Mon, Jun 5, 2017 at 1:13 AM, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 5 June 2017 at 00:51, Konstantin Sorokin wrote:
> | This third party component is a compression library for which my package
> | provides bindings and I need to build this library first. Look at the
> lines
> | starting from
> | https://github.com/thekvs/zstdr/blob/8ea428b33d986667494d940c66732d
> bbc66871b3/configure.ac#L34
>
> The common paradigm is to first build below src/, and to then link via
> src/Makevars to the static library you just built.
>
> I don't have a real go-to example of a package that does this but you could
> look into the BioConductor package RGBL (which builds Boost Graph first)
> and/or the nloptr package (which, if need be, downloads nlopt and builds
> it;
> my contribution there was the other part of finding / using a libnlopt if
> on
> the system).
>

Thanks, Dirk, I'll look at nloptr package more closely.


>
> I wondered about this when CRANberries told me about your package. I guess
> you can't assume the Zstandard library to be present?  Maybe one day the
> hybrid approach of nloptr may work for you.
>

zstandard is a young project and I think it is a bit to early to assume
that zstandard library be present in the system. For example on my Ubuntu
16.04 (LTS) I have libzstd0/xenial 0.5.1-1 but the latest stable release
has version 1.2.

Btw, what about installing cmake on OSX and Solaris in CRAN build farm? Now
 it is such a ubiquitous and widely used program!

-- 
Konstantin Sorokin

	[[alternative HTML version deleted]]


From thibault.vatter at gmail.com  Mon Jun  5 13:43:52 2017
From: thibault.vatter at gmail.com (Thibault Vatter)
Date: Mon, 5 Jun 2017 07:43:52 -0400
Subject: [R-pkg-devel] Proper way to cleanup after build third party
	components?
In-Reply-To: <CAFjK30usUyF5qGPpM=Tt7DYmex0AzjRwYawmPni3m9tACG+EXg@mail.gmail.com>
References: <CAFjK30sXon4LAinwtJaajmag-yS_NS6HturWNm5TARVve35fUQ@mail.gmail.com>
 <1496611142.3169.1.camel@braverock.com>
 <CAFjK30tjw0B+4YkuKu1F3amnz02Q0odUP0sUxEeTgk7PqibGdQ@mail.gmail.com>
 <22836.34316.308125.336852@max.eddelbuettel.com>
 <CAFjK30usUyF5qGPpM=Tt7DYmex0AzjRwYawmPni3m9tACG+EXg@mail.gmail.com>
Message-ID: <CAFyih6CxnwEYRa6bDa7mPz+D0ktdYHgUMR+Ss=cZRvE2kYqb=Q@mail.gmail.com>

Hi Konstantin,

Concerning CMake, I asked a similar question here:

https://stat.ethz.ch/pipermail/r-package-devel/2017q2/001600.html

Essentially, I wondered if there was a way to have CMake within an R
package, but obviously having a system install of CMake would work in my
case too.

Hopefully answers to your question will be more useful than answers to mine
;)

On Mon, Jun 5, 2017 at 5:29 AM, Konstantin Sorokin <kvs at sigterm.ru> wrote:

> On Mon, Jun 5, 2017 at 1:13 AM, Dirk Eddelbuettel <edd at debian.org> wrote:
>
> >
> > On 5 June 2017 at 00:51, Konstantin Sorokin wrote:
> > | This third party component is a compression library for which my
> package
> > | provides bindings and I need to build this library first. Look at the
> > lines
> > | starting from
> > | https://github.com/thekvs/zstdr/blob/8ea428b33d986667494d940c66732d
> > bbc66871b3/configure.ac#L34
> >
> > The common paradigm is to first build below src/, and to then link via
> > src/Makevars to the static library you just built.
> >
> > I don't have a real go-to example of a package that does this but you
> could
> > look into the BioConductor package RGBL (which builds Boost Graph first)
> > and/or the nloptr package (which, if need be, downloads nlopt and builds
> > it;
> > my contribution there was the other part of finding / using a libnlopt if
> > on
> > the system).
> >
>
> Thanks, Dirk, I'll look at nloptr package more closely.
>
>
> >
> > I wondered about this when CRANberries told me about your package. I
> guess
> > you can't assume the Zstandard library to be present?  Maybe one day the
> > hybrid approach of nloptr may work for you.
> >
>
> zstandard is a young project and I think it is a bit to early to assume
> that zstandard library be present in the system. For example on my Ubuntu
> 16.04 (LTS) I have libzstd0/xenial 0.5.1-1 but the latest stable release
> has version 1.2.
>
> Btw, what about installing cmake on OSX and Solaris in CRAN build farm? Now
>  it is such a ubiquitous and widely used program!
>
> --
> Konstantin Sorokin
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From jon at thon.cc  Mon Jun  5 14:23:44 2017
From: jon at thon.cc (Jonathon Love)
Date: Mon, 5 Jun 2017 22:23:44 +1000
Subject: [R-pkg-devel] unusually slow tests on win-builder
Message-ID: <fcd285ff-880b-1ccd-0d2d-d5f58d59f4d1@thon.love>

hi,

i've uploaded a version of my package to the win-builder service, but it 
is reporting that one of my tests takes > 10 seconds to run. examining 
the log here:

https://win-builder.r-project.org/BvR4nreDE9qP/00check.log

the win-builder is taking 24 and 28 seconds to run this test.

on my local machine, this same test runs in 600ms

can anyone shed any light on this? why is the win-builder so slow?

with thanks

jonathon


From dasonk at gmail.com  Mon Jun  5 14:36:52 2017
From: dasonk at gmail.com (Dason Kurkiewicz)
Date: Mon, 5 Jun 2017 08:36:52 -0400
Subject: [R-pkg-devel] unusually slow tests on win-builder
In-Reply-To: <fcd285ff-880b-1ccd-0d2d-d5f58d59f4d1@thon.love>
References: <fcd285ff-880b-1ccd-0d2d-d5f58d59f4d1@thon.love>
Message-ID: <CAJZYZZ4ooDf+MDR+djCKPOup10ZLqahB6WU+6wH5c3UpEmpyhg@mail.gmail.com>

The relevant output is below:

* checking examples ...
** running examples for arch 'i386' ... [24s] NOTE
Examples with CPU or elapsed time > 10s
    user system elapsed
cfa 8.05   0.36   10.08
** running examples for arch 'x64' ... [28s] NOTE
Examples with CPU or elapsed time > 10s
     user system elapsed
cfa 10.62   0.23      12
* checking for unstated dependencies in 'tests' ... OK
* checking tests ...
** running tests for arch 'i386' ... [25s] OK
  Running 'testthat.R' [24s]
** running tests for arch 'x64' ... [32s] OK
  Running 'testthat.R' [31s]


I'm not sure why you're saying it's taking too long to run your tests
when the output is telling you that it's your examples that are taking
too long to run.  It's also not taking 24 and 28 seconds - I believe
that is just a timestamp telling you that it's producing that note 24
and 28 seconds into the check but I could be wrong.  Either way the
relevant output for how long the examples take look like:

    user system elapsed
cfa 8.05   0.36   10.08

That which tells you total it took 10.08 seconds to run the examples
for arch 'i386'.

-Dason Kurkiewicz

On Mon, Jun 5, 2017 at 8:23 AM, Jonathon Love <jon at thon.cc> wrote:
> hi,
>
> i've uploaded a version of my package to the win-builder service, but it is
> reporting that one of my tests takes > 10 seconds to run. examining the log
> here:
>
> https://win-builder.r-project.org/BvR4nreDE9qP/00check.log
>
> the win-builder is taking 24 and 28 seconds to run this test.
>
> on my local machine, this same test runs in 600ms
>
> can anyone shed any light on this? why is the win-builder so slow?
>
> with thanks
>
> jonathon
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jon at thon.cc  Mon Jun  5 14:48:09 2017
From: jon at thon.cc (Jonathon Love)
Date: Mon, 5 Jun 2017 22:48:09 +1000
Subject: [R-pkg-devel] unusually slow tests on win-builder
In-Reply-To: <CAJZYZZ4ooDf+MDR+djCKPOup10ZLqahB6WU+6wH5c3UpEmpyhg@mail.gmail.com>
References: <fcd285ff-880b-1ccd-0d2d-d5f58d59f4d1@thon.love>
 <CAJZYZZ4ooDf+MDR+djCKPOup10ZLqahB6WU+6wH5c3UpEmpyhg@mail.gmail.com>
Message-ID: <4fe9247a-595f-8894-7620-32c87c7ed7a7@thon.love>

hi dason,

yes, it looks like it's taking 10 seconds.

10 seconds still seems unusually long, and a lot longer than 600ms.

any other suggestions as to what might be going on here?

with thanks

jonathon


On 5/6/17 22:36, Dason Kurkiewicz wrote:
> The relevant output is below:
>
> * checking examples ...
> ** running examples for arch 'i386' ... [24s] NOTE
> Examples with CPU or elapsed time > 10s
>      user system elapsed
> cfa 8.05   0.36   10.08
> ** running examples for arch 'x64' ... [28s] NOTE
> Examples with CPU or elapsed time > 10s
>       user system elapsed
> cfa 10.62   0.23      12
> * checking for unstated dependencies in 'tests' ... OK
> * checking tests ...
> ** running tests for arch 'i386' ... [25s] OK
>    Running 'testthat.R' [24s]
> ** running tests for arch 'x64' ... [32s] OK
>    Running 'testthat.R' [31s]
>
>
> I'm not sure why you're saying it's taking too long to run your tests
> when the output is telling you that it's your examples that are taking
> too long to run.  It's also not taking 24 and 28 seconds - I believe
> that is just a timestamp telling you that it's producing that note 24
> and 28 seconds into the check but I could be wrong.  Either way the
> relevant output for how long the examples take look like:
>
>      user system elapsed
> cfa 8.05   0.36   10.08
>
> That which tells you total it took 10.08 seconds to run the examples
> for arch 'i386'.
>
> -Dason Kurkiewicz
>
> On Mon, Jun 5, 2017 at 8:23 AM, Jonathon Love <jon at thon.cc> wrote:
>> hi,
>>
>> i've uploaded a version of my package to the win-builder service, but it is
>> reporting that one of my tests takes > 10 seconds to run. examining the log
>> here:
>>
>> https://win-builder.r-project.org/BvR4nreDE9qP/00check.log
>>
>> the win-builder is taking 24 and 28 seconds to run this test.
>>
>> on my local machine, this same test runs in 600ms
>>
>> can anyone shed any light on this? why is the win-builder so slow?
>>
>> with thanks
>>
>> jonathon
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd at debian.org  Mon Jun  5 14:55:32 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Mon, 5 Jun 2017 07:55:32 -0500
Subject: [R-pkg-devel] Proper way to cleanup after build third party
	components?
In-Reply-To: <CAFjK30usUyF5qGPpM=Tt7DYmex0AzjRwYawmPni3m9tACG+EXg@mail.gmail.com>
References: <CAFjK30sXon4LAinwtJaajmag-yS_NS6HturWNm5TARVve35fUQ@mail.gmail.com>
 <1496611142.3169.1.camel@braverock.com>
 <CAFjK30tjw0B+4YkuKu1F3amnz02Q0odUP0sUxEeTgk7PqibGdQ@mail.gmail.com>
 <22836.34316.308125.336852@max.eddelbuettel.com>
 <CAFjK30usUyF5qGPpM=Tt7DYmex0AzjRwYawmPni3m9tACG+EXg@mail.gmail.com>
Message-ID: <22837.21700.915204.802602@max.eddelbuettel.com>


On 5 June 2017 at 12:29, Konstantin Sorokin wrote:
| zstandard is a young?project and I think it is a bit to early to assume that
| zstandard library be present in the system. For example on my Ubuntu 16.04
| (LTS) I have?libzstd0/xenial 0.5.1-1 but the latest stable release has version
| 1.2.

I use the PPA service on launchpad.net to great effect for that. Take most
recent (packaged !!) version from Debian, adjust debian/control and
debian/changelog ever so slightly, upload to launchpad and use the thusly
generated version on older Ubuntu and e.g. Travis.   I need to blog about that...
 
| Btw, what about installing cmake on OSX and Solaris in CRAN build farm? Now ?it
| is such a ubiquitous and widely used program!

As far as I know, some packages already use cmake. See e.g. this query among
the GitHub-mirrored CRAN packages:

    https://github.com/search?q=user%3Acran+CMakeLists.txt&type=Code

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ligges at statistik.tu-dortmund.de  Mon Jun  5 17:02:44 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Mon, 5 Jun 2017 17:02:44 +0200
Subject: [R-pkg-devel] unusually slow tests on win-builder
In-Reply-To: <4fe9247a-595f-8894-7620-32c87c7ed7a7@thon.love>
References: <fcd285ff-880b-1ccd-0d2d-d5f58d59f4d1@thon.love>
 <CAJZYZZ4ooDf+MDR+djCKPOup10ZLqahB6WU+6wH5c3UpEmpyhg@mail.gmail.com>
 <4fe9247a-595f-8894-7620-32c87c7ed7a7@thon.love>
Message-ID: <d16b2e96-85f2-3dae-60a5-9f9d2957ec7f@statistik.tu-dortmund.de>



On 05.06.2017 14:48, Jonathon Love wrote:
> hi dason,
> 
> yes, it looks like it's taking 10 seconds.
> 
> 10 seconds still seems unusually long, and a lot longer than 600ms.

So your windows installation of R-3.4.0 can solve this in 600ms? Or is 
yoiur another OS?

For winbuilder, it could be it was heavily loaded, but even then it 
should never take more than twice as long as on an idling machine. Then 
winbuilder has server CPUs with lots of cores hence operates at a lower 
frequency, altogether not more than 3-4 times the the time you got can 
be expected.

Best,
Uwe Ligges



> 
> any other suggestions as to what might be going on here?
> 
> with thanks
> 
> jonathon
> 
> 
> On 5/6/17 22:36, Dason Kurkiewicz wrote:
>> The relevant output is below:
>>
>> * checking examples ...
>> ** running examples for arch 'i386' ... [24s] NOTE
>> Examples with CPU or elapsed time > 10s
>>      user system elapsed
>> cfa 8.05   0.36   10.08
>> ** running examples for arch 'x64' ... [28s] NOTE
>> Examples with CPU or elapsed time > 10s
>>       user system elapsed
>> cfa 10.62   0.23      12
>> * checking for unstated dependencies in 'tests' ... OK
>> * checking tests ...
>> ** running tests for arch 'i386' ... [25s] OK
>>    Running 'testthat.R' [24s]
>> ** running tests for arch 'x64' ... [32s] OK
>>    Running 'testthat.R' [31s]
>>
>>
>> I'm not sure why you're saying it's taking too long to run your tests
>> when the output is telling you that it's your examples that are taking
>> too long to run.  It's also not taking 24 and 28 seconds - I believe
>> that is just a timestamp telling you that it's producing that note 24
>> and 28 seconds into the check but I could be wrong.  Either way the
>> relevant output for how long the examples take look like:
>>
>>      user system elapsed
>> cfa 8.05   0.36   10.08
>>
>> That which tells you total it took 10.08 seconds to run the examples
>> for arch 'i386'.
>>
>> -Dason Kurkiewicz
>>
>> On Mon, Jun 5, 2017 at 8:23 AM, Jonathon Love <jon at thon.cc> wrote:
>>> hi,
>>>
>>> i've uploaded a version of my package to the win-builder service, but 
>>> it is
>>> reporting that one of my tests takes > 10 seconds to run. examining 
>>> the log
>>> here:
>>>
>>> https://win-builder.r-project.org/BvR4nreDE9qP/00check.log
>>>
>>> the win-builder is taking 24 and 28 seconds to run this test.
>>>
>>> on my local machine, this same test runs in 600ms
>>>
>>> can anyone shed any light on this? why is the win-builder so slow?
>>>
>>> with thanks
>>>
>>> jonathon
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jon at thon.cc  Tue Jun  6 04:04:04 2017
From: jon at thon.cc (Jonathon Love)
Date: Tue, 6 Jun 2017 12:04:04 +1000
Subject: [R-pkg-devel] unusually slow tests on win-builder
In-Reply-To: <d16b2e96-85f2-3dae-60a5-9f9d2957ec7f@statistik.tu-dortmund.de>
References: <fcd285ff-880b-1ccd-0d2d-d5f58d59f4d1@thon.love>
 <CAJZYZZ4ooDf+MDR+djCKPOup10ZLqahB6WU+6wH5c3UpEmpyhg@mail.gmail.com>
 <4fe9247a-595f-8894-7620-32c87c7ed7a7@thon.love>
 <d16b2e96-85f2-3dae-60a5-9f9d2957ec7f@statistik.tu-dortmund.de>
Message-ID: <48c5a55c-f22c-1d4d-a024-7839e27f3d97@thon.love>


> So your windows installation of R-3.4.0 can solve this in 600ms? Or is 
> yoiur another OS?

ah, yes, another OS. it turns out on windows this takes 6 seconds. the 
issue is that we only load imports on demand (not in our NAMESPACE), 
there's a behemoth dependency chain that that analysis invokes, and 
package loading appears to be *quite a bit* slower on windows than 
macOS/linux.

with thanks

jonathon

> For winbuilder, it could be it was heavily loaded, but even then it 
> should never take more than twice as long as on an idling machine. 
> Then winbuilder has server CPUs with lots of cores hence operates at a 
> lower frequency, altogether not more than 3-4 times the the time you 
> got can be expected.
>
> Best,
> Uwe Ligges
>
>
>
>>
>> any other suggestions as to what might be going on here?
>>
>> with thanks
>>
>> jonathon
>>
>>
>> On 5/6/17 22:36, Dason Kurkiewicz wrote:
>>> The relevant output is below:
>>>
>>> * checking examples ...
>>> ** running examples for arch 'i386' ... [24s] NOTE
>>> Examples with CPU or elapsed time > 10s
>>>      user system elapsed
>>> cfa 8.05   0.36   10.08
>>> ** running examples for arch 'x64' ... [28s] NOTE
>>> Examples with CPU or elapsed time > 10s
>>>       user system elapsed
>>> cfa 10.62   0.23      12
>>> * checking for unstated dependencies in 'tests' ... OK
>>> * checking tests ...
>>> ** running tests for arch 'i386' ... [25s] OK
>>>    Running 'testthat.R' [24s]
>>> ** running tests for arch 'x64' ... [32s] OK
>>>    Running 'testthat.R' [31s]
>>>
>>>
>>> I'm not sure why you're saying it's taking too long to run your tests
>>> when the output is telling you that it's your examples that are taking
>>> too long to run.  It's also not taking 24 and 28 seconds - I believe
>>> that is just a timestamp telling you that it's producing that note 24
>>> and 28 seconds into the check but I could be wrong.  Either way the
>>> relevant output for how long the examples take look like:
>>>
>>>      user system elapsed
>>> cfa 8.05   0.36   10.08
>>>
>>> That which tells you total it took 10.08 seconds to run the examples
>>> for arch 'i386'.
>>>
>>> -Dason Kurkiewicz
>>>
>>> On Mon, Jun 5, 2017 at 8:23 AM, Jonathon Love <jon at thon.cc> wrote:
>>>> hi,
>>>>
>>>> i've uploaded a version of my package to the win-builder service, 
>>>> but it is
>>>> reporting that one of my tests takes > 10 seconds to run. examining 
>>>> the log
>>>> here:
>>>>
>>>> https://win-builder.r-project.org/BvR4nreDE9qP/00check.log
>>>>
>>>> the win-builder is taking 24 and 28 seconds to run this test.
>>>>
>>>> on my local machine, this same test runs in 600ms
>>>>
>>>> can anyone shed any light on this? why is the win-builder so slow?
>>>>
>>>> with thanks
>>>>
>>>> jonathon
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From akumar at stat.tamu.edu  Thu Jun  8 18:53:09 2017
From: akumar at stat.tamu.edu (Maity, Arnab K)
Date: Thu, 8 Jun 2017 16:53:09 +0000
Subject: [R-pkg-devel] R package with RcppArmadillo
Message-ID: <1496940789059.53809@stat.tamu.edu>

I am unable to provide a whole bunch of reproducible example at this point of time and I apologize for that. But I am very much hoping someone can throw some light by seeing the following error message.


> document("afths")
Updating afths documentation
Loading afths
Re-compiling afths
"C:/Users/akumar/DOCUME~1/R/R-33~1.2/bin/x64/R" --no-site-file --no-environ --no-save --no-restore --quiet CMD INSTALL  \
  "C:\Users\akumar\Documents\ARNAB TAMU\Research\Survival Regression\Codes\R\Package v1\afths"  \
  --library="C:\Users\akumar\AppData\Local\Temp\RtmpKOAiCH\devtools_install_c9c6ac540c2" --no-R --no-data --no-help  \
  --no-demo --no-inst --no-docs --no-exec --no-multiarch --no-test-load --preclean

* installing *source* package 'afths' ...
** libs
Warning: running command 'make -f "Makevars.win" -f "C:/Users/akumar/DOCUME~1/R/R-33~1.2/etc/x64/Makeconf" -f "C:/Users/akumar/DOCUME~1/R/R-33~1.2/share/make/winshlib.mk" SHLIB_LDFLAGS='$(SHLIB_CXXLDFLAGS)' SHLIB_LD='$(SHLIB_CXXLD)' SHLIB="afths.dll" WIN=64 TCLBIN=64 OBJECTS="RcppExports.o rBeta1.o rBeta2.o rbetak.o" shlib-clean' had status 127
Warning: running command 'make -f "Makevars.win" -f "C:/Users/akumar/DOCUME~1/R/R-33~1.2/etc/x64/Makeconf" -f "C:/Users/akumar/DOCUME~1/R/R-33~1.2/share/make/winshlib.mk" SHLIB_LDFLAGS='$(SHLIB_CXXLDFLAGS)' SHLIB_LD='$(SHLIB_CXXLD)' SHLIB="afths.dll" WIN=64 TCLBIN=64 OBJECTS="RcppExports.o rBeta1.o rBeta2.o rbetak.o"' had status 127
ERROR: compilation failed for package 'afths'
* removing 'C:/Users/akumar/AppData/Local/Temp/RtmpKOAiCH/devtools_install_c9c6ac540c2/afths'
Error: Command failed (1)

Some background information: I am trying to develop a package "afths" with some R and C++ functions. I developed the package skeleton using RcppArmadillo.package.skeleton(). Then I created a file namely "afths.R" in the R folder which contains

#' @useDynLib YourPackageName
#' @importFrom Rcpp evalCpp
#' @exportPattern "^[[:alpha:]]+"
NULL?

Then I try to produce manuals in man folder using devtools::document("afths").

I am providing the chunk of codes in rBeta1.cpp as an example, if it helps:

// -*- mode: C++; c-indent-level: 4; c-basic-offset: 4; indent-tabs-mode: nil; -*-

// we only include RcppArmadillo.h which pulls Rcpp.h in for us
#include "RcppArmadillo.h"

using namespace Rcpp;
using namespace arma;


// via the depends attribute we tell Rcpp to create hooks for
// RcppArmadillo so that the build process will know what to do
//
// [[Rcpp::depends(RcppArmadillo)]]

?//
// via the exports attribute we tell Rcpp to make this function
// available from R
//
// [[Rcpp::export]]
arma::mat rcpparma_hello_world() {
    arma::mat m1 = arma::eye<arma::mat>(3, 3);
    arma::mat m2 = arma::eye<arma::mat>(3, 3);

    return m1 + 3 * (m1 + m2);
}


// another simple example: outer product of a vector,
// returning a matrix
//
// [[Rcpp::export]]
Rcpp::List rBeta1( const arma::mat& X,
                   const arma::colvec& y,
                   const arma::colvec& lambda, //lambda
                   const double tau, //tau
                   const double sigma_sq

){
  //declarations
  const unsigned int n = X.n_rows; //number of rows of X
  const unsigned int p = X.n_cols; //number of columns of X
  arma::mat U = zeros(p,n);
  arma::mat I = eye(n,n);
  arma::colvec lambda_star = zeros(p); //lambda_star
  arma::colvec u = zeros(p);
  arma::colvec v = zeros(n);
  arma::colvec v_star = zeros(n); //v_star
  arma::colvec Beta = zeros(p); // Beta



  lambda_star = tau * lambda;
  U = diagmat(square(lambda_star))*trans(X);

  // step 1 //
  u = randn(p)%lambda_star;
  v = X*u + randn(n);

  // step 2 //
  v_star = solve((X*U + I) , (y/sqrt(sigma_sq) - v));
  Beta = sqrt(sigma_sq)* (u + U*v_star);

  return Rcpp::List::create( Named("Beta") = Beta);
}








Arnab Kumar Maity
Department of Statistics
Texas A&M University
3143 TAMU, Room 401A
College Station, TX 77843
akumar at stat.tamu.edu<mailto:arnabkrmaity at stat.tamu.edu>
arnabkrmaity at tamu.edu
+1 779 777 3428<tel:%2B1%20779%20777%203428>

	[[alternative HTML version deleted]]


From edd at debian.org  Thu Jun  8 19:28:26 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 8 Jun 2017 12:28:26 -0500
Subject: [R-pkg-devel] R package with RcppArmadillo
In-Reply-To: <1496940789059.53809@stat.tamu.edu>
References: <1496940789059.53809@stat.tamu.edu>
Message-ID: <22841.35130.939921.835635@max.eddelbuettel.com>


On 8 June 2017 at 16:53, Maity, Arnab K wrote:
| Some background information: I am trying to develop a package "afths" with
| some R and C++ functions. I developed the package skeleton using
| RcppArmadillo.package.skeleton().

As of today, CRAN contains 352 packages using RcppArmadillo.

I like to start from existing and working examples. So if I were you, I'd
download a few and look at them -- preferably those without external
dependencies.  These are on CRAN, and build just fine.

So try building them at your end: if it fails you have a good indication of
your side of the bargain being borked.  And if it works, great: now you have
a working model to style your package after.

Similarly, you can start from just RcppArmadillo.package.skeleton().  Make no
changes and build it.  That *should* work (or else we have a bug we do not
know about).  Then add your code one file at a time, and frequently rebuild.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From boennecd at gmail.com  Fri Jun  9 14:44:05 2017
From: boennecd at gmail.com (Benjamin Christoffersen)
Date: Fri, 9 Jun 2017 14:44:05 +0200
Subject: [R-pkg-devel] -fbounds-check on develop version of Win-builder
Message-ID: <CAHHSL8vjVMkLU0nG9r7e=ikLDJZEssJq641w997+RKmAbeH-1Q@mail.gmail.com>

Dear sirs

I am writing regarding a question for the package dynamichazard which
I am the author of and the -fbounds-check flag used in R develop in
Win-Builder.

R develop version has following flags added to the Fortran rule
compared with R release on Win-builder: -pedantic -fbounds-check

Particularly, the line for dchur.o when building dynamichazard on the
release version is:
d:/Compiler/gcc-4.9.3/mingw_32/bin/gfortran -O3 -mtune=core2 -c
dchur.f -o dchur.o

and the line on the develop version is:
d:/Compiler/gcc-4.9.3/mingw_32/bin/gfortran -pedantic -fbounds-check
-O3 -mtune=core2 -c dchur.f -o dchur.o

The latter causes the following error when the tests on the package is run:
  At line 1 of file dchur.f
  Fortran runtime error: Actual string length is shorter than the
declared one for dummy argument 'uplo' (0/1)

The version of dynamichazard I submitted to the Win-Builder is at:
https://github.com/boennecd/dynamichazard/tree/d3a8b7d5f39fbfcc14df008f1fdd71f4f38ac25a

The relevant code in dynamichazard/src/LAPACK_BLAS_wrapper.cpp is:
#include <Rcpp.h>
#include <R_ext/BLAS.h>
#include <R_ext/Lapack.h>

extern "C"
{
  void F77_NAME(dchur)(
      const char *,   // UPLO
      const char *,   // TRANS
      int*,    // N
      int*,    // M
      double*, // R
      int*,    // LDR
      double*, // X
      double*, // Z
      int*,    // LDZ
      double*, // Y
      double*, // RHO
      double*, // C
      double*, // S
      int*     // INFO
  );
}

void ddhazard_dchur(double *R, double *x, int n, int ldr){
  int info;

  double *c = new double[n];
  double *s = new double[n];

  int m = 0;
  int ldz = 1;
  double z, y, rho;

  F77_CALL(dchur)(
      "L",
      "N",
      &n, &m, R, &ldr,
      x, &z, &ldz, &y, &rho, c, s, &info);

  // code abbreviated
};

// code abbreviated

I have tried to re-produce the error with R release on my own laptop
running Windows but failed to do so. Here is an example:
$ ./tmp.sh
+ cat foo.cpp
#include <iostream>

extern "C" {
        void bar_(const char *in);
}

int main()
{
    std::cout << "Running main" << std::endl;
    bar_("F");
    return 0;
}
+ cat bar.f
      subroutine bar(INPUT)
      CHARACTER INPUT

      print *, input
      end
+ c:/Rtools/mingw_32/bin/g++ -std=gnu++11 -O2 -Wall -mtune=core2 -c
foo.cpp -o foo.o
+ c:/Rtools/mingw_32/bin/gfortran -pedantic -fbounds-check -O3 -c bar.f -o bar.o
+ c:/Rtools/mingw_32/bin/g++ -o foo foo.o bar.o -lgfortran -lm -lquadmath
+ ./foo.exe
Running main
 F
+ Rscript.exe -e R.version
               _
platform       x86_64-w64-mingw32
arch           x86_64
os             mingw32
system         x86_64, mingw32
status
major          3
minor          4.0
year           2017
month          04
day            21
svn rev        72570
language       R
version.string R version 3.4.0 (2017-04-21)
nickname       You Stupid Darkness
+ head -1 c:/Rtools/Rtools.txt
                      Rtools Collection 3.4.0.1962

The example is not with a dynamic link library but comparable to the
example here: https://code.launchpad.net/~fluidity-core/fluidity/gmsh-on-sphere/+merge/99395/comments/216834

I stupidly tried to solve the problem in the current version 0.3.1 of
dynamichazard on CRAN by adding this rule in Makevars.win:
dchur.o:
$(F77) $(filter-out -fbounds-check,$(ALL_FFLAGS)) -c dchur.f -o dchur.o

This makes all my tests pass including those that uses the
ddhazard_dchur C++ function on the develop version of Win-builder.
However, it violates the second paragraph of "1.2.1 Using Makevars" in
"Writing R Extensions".

Please, let me know if I have made an obvious mistake or if there is a
straightforward solution.

Sincerely yours
Benjamin Christoffersen


From pdalgd at gmail.com  Sat Jun 10 09:33:19 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Sat, 10 Jun 2017 09:33:19 +0200
Subject: [R-pkg-devel] -fbounds-check on develop version of Win-builder
In-Reply-To: <CAHHSL8vjVMkLU0nG9r7e=ikLDJZEssJq641w997+RKmAbeH-1Q@mail.gmail.com>
References: <CAHHSL8vjVMkLU0nG9r7e=ikLDJZEssJq641w997+RKmAbeH-1Q@mail.gmail.com>
Message-ID: <AF84F82A-9735-4120-B570-2D0731418B25@gmail.com>

Hi Beanie,

Hmm, a bit of googling (on the error message) suggests that you are not alone... Several other CRAN package have recent ERRORs on Windows. I would suspect that gfortran 4.9.x is the culprit, generating false positives, but it is not really my area of expertise. 

Maybe just lean back and see what the CRAN crew makes of it?

- Peter

> On 9 Jun 2017, at 14:44 , Benjamin Christoffersen <boennecd at gmail.com> wrote:
> 
> Dear sirs
> 
> I am writing regarding a question for the package dynamichazard which
> I am the author of and the -fbounds-check flag used in R develop in
> Win-Builder.
> 
> R develop version has following flags added to the Fortran rule
> compared with R release on Win-builder: -pedantic -fbounds-check
> 
> Particularly, the line for dchur.o when building dynamichazard on the
> release version is:
> d:/Compiler/gcc-4.9.3/mingw_32/bin/gfortran -O3 -mtune=core2 -c
> dchur.f -o dchur.o
> 
> and the line on the develop version is:
> d:/Compiler/gcc-4.9.3/mingw_32/bin/gfortran -pedantic -fbounds-check
> -O3 -mtune=core2 -c dchur.f -o dchur.o
> 
> The latter causes the following error when the tests on the package is run:
>  At line 1 of file dchur.f
>  Fortran runtime error: Actual string length is shorter than the
> declared one for dummy argument 'uplo' (0/1)
> 
> The version of dynamichazard I submitted to the Win-Builder is at:
> https://github.com/boennecd/dynamichazard/tree/d3a8b7d5f39fbfcc14df008f1fdd71f4f38ac25a
> 
> The relevant code in dynamichazard/src/LAPACK_BLAS_wrapper.cpp is:
> #include <Rcpp.h>
> #include <R_ext/BLAS.h>
> #include <R_ext/Lapack.h>
> 
> extern "C"
> {
>  void F77_NAME(dchur)(
>      const char *,   // UPLO
>      const char *,   // TRANS
>      int*,    // N
>      int*,    // M
>      double*, // R
>      int*,    // LDR
>      double*, // X
>      double*, // Z
>      int*,    // LDZ
>      double*, // Y
>      double*, // RHO
>      double*, // C
>      double*, // S
>      int*     // INFO
>  );
> }
> 
> void ddhazard_dchur(double *R, double *x, int n, int ldr){
>  int info;
> 
>  double *c = new double[n];
>  double *s = new double[n];
> 
>  int m = 0;
>  int ldz = 1;
>  double z, y, rho;
> 
>  F77_CALL(dchur)(
>      "L",
>      "N",
>      &n, &m, R, &ldr,
>      x, &z, &ldz, &y, &rho, c, s, &info);
> 
>  // code abbreviated
> };
> 
> // code abbreviated
> 
> I have tried to re-produce the error with R release on my own laptop
> running Windows but failed to do so. Here is an example:
> $ ./tmp.sh
> + cat foo.cpp
> #include <iostream>
> 
> extern "C" {
>        void bar_(const char *in);
> }
> 
> int main()
> {
>    std::cout << "Running main" << std::endl;
>    bar_("F");
>    return 0;
> }
> + cat bar.f
>      subroutine bar(INPUT)
>      CHARACTER INPUT
> 
>      print *, input
>      end
> + c:/Rtools/mingw_32/bin/g++ -std=gnu++11 -O2 -Wall -mtune=core2 -c
> foo.cpp -o foo.o
> + c:/Rtools/mingw_32/bin/gfortran -pedantic -fbounds-check -O3 -c bar.f -o bar.o
> + c:/Rtools/mingw_32/bin/g++ -o foo foo.o bar.o -lgfortran -lm -lquadmath
> + ./foo.exe
> Running main
> F
> + Rscript.exe -e R.version
>               _
> platform       x86_64-w64-mingw32
> arch           x86_64
> os             mingw32
> system         x86_64, mingw32
> status
> major          3
> minor          4.0
> year           2017
> month          04
> day            21
> svn rev        72570
> language       R
> version.string R version 3.4.0 (2017-04-21)
> nickname       You Stupid Darkness
> + head -1 c:/Rtools/Rtools.txt
>                      Rtools Collection 3.4.0.1962
> 
> The example is not with a dynamic link library but comparable to the
> example here: https://code.launchpad.net/~fluidity-core/fluidity/gmsh-on-sphere/+merge/99395/comments/216834
> 
> I stupidly tried to solve the problem in the current version 0.3.1 of
> dynamichazard on CRAN by adding this rule in Makevars.win:
> dchur.o:
> $(F77) $(filter-out -fbounds-check,$(ALL_FFLAGS)) -c dchur.f -o dchur.o
> 
> This makes all my tests pass including those that uses the
> ddhazard_dchur C++ function on the develop version of Win-builder.
> However, it violates the second paragraph of "1.2.1 Using Makevars" in
> "Writing R Extensions".
> 
> Please, let me know if I have made an obvious mistake or if there is a
> straightforward solution.
> 
> Sincerely yours
> Benjamin Christoffersen
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From kvs at sigterm.ru  Sun Jun 11 14:18:50 2017
From: kvs at sigterm.ru (Konstantin Sorokin)
Date: Sun, 11 Jun 2017 15:18:50 +0300
Subject: [R-pkg-devel] Note about portable file names
Message-ID: <CAFjK30tP_p-zyjYXkqVkw-twq5_EzV=ZYoG=756=MFxFGQL4Hw@mail.gmail.com>

Hello!

When checking one of my packages I have following message:

checking for portable file names ... NOTE
Found the following non-portable file paths:
  tarantoolr/src/third_party/msgpack-1.4.1/include/msgpack/preprocessor/facilities/is_empty_variadic.hpp
  tarantoolr/src/third_party/msgpack-1.4.1/include/msgpack/preprocessor/iteration/detail/bounds/lower1.hpp

  <skipped>

Tarballs are only required to store paths of up to 100 bytes and cannot
store those of more than 256 bytes, with restrictions including to 100
bytes for the final component.
See section ?Package structure? in the ?Writing R Extensions? manual.

My question is: Is it possible to be accepted on CRAN with these sort of
messages? To say the truth I have no idea how can I fix them and still have
third party components inside source directory.

-- 
Konstantin Sorokin

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Sun Jun 11 14:53:53 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sun, 11 Jun 2017 08:53:53 -0400
Subject: [R-pkg-devel] Note about portable file names
In-Reply-To: <CAFjK30tP_p-zyjYXkqVkw-twq5_EzV=ZYoG=756=MFxFGQL4Hw@mail.gmail.com>
References: <CAFjK30tP_p-zyjYXkqVkw-twq5_EzV=ZYoG=756=MFxFGQL4Hw@mail.gmail.com>
Message-ID: <719ecea5-dbcb-05dc-f14e-5e30982d689f@gmail.com>

On 11/06/2017 8:18 AM, Konstantin Sorokin wrote:
> Hello!
>
> When checking one of my packages I have following message:
>
> checking for portable file names ... NOTE
> Found the following non-portable file paths:
>   tarantoolr/src/third_party/msgpack-1.4.1/include/msgpack/preprocessor/facilities/is_empty_variadic.hpp
>   tarantoolr/src/third_party/msgpack-1.4.1/include/msgpack/preprocessor/iteration/detail/bounds/lower1.hpp
>
>   <skipped>
>
> Tarballs are only required to store paths of up to 100 bytes and cannot
> store those of more than 256 bytes, with restrictions including to 100
> bytes for the final component.
> See section ?Package structure? in the ?Writing R Extensions? manual.
>
> My question is: Is it possible to be accepted on CRAN with these sort of
> messages? To say the truth I have no idea how can I fix them and still have
> third party components inside source directory.
>

Your longer one is just 104 characters, so you could easily avoid the 
note by removing or shortening the "third_party" directory name, which 
should be under your control.  If you have others where that is not 
sufficient, you can think about renaming other directories, though I can 
see that wouldn't be desirable.

Duncan Murdoch


From edd at debian.org  Sun Jun 11 15:15:50 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 11 Jun 2017 08:15:50 -0500
Subject: [R-pkg-devel] Note about portable file names
In-Reply-To: <CAFjK30tP_p-zyjYXkqVkw-twq5_EzV=ZYoG=756=MFxFGQL4Hw@mail.gmail.com>
References: <CAFjK30tP_p-zyjYXkqVkw-twq5_EzV=ZYoG=756=MFxFGQL4Hw@mail.gmail.com>
Message-ID: <22845.17030.977289.877288@max.eddelbuettel.com>


On 11 June 2017 at 15:18, Konstantin Sorokin wrote:
| Hello!
| 
| When checking one of my packages I have following message:
| 
| checking for portable file names ... NOTE
| Found the following non-portable file paths:
|   tarantoolr/src/third_party/msgpack-1.4.1/include/msgpack/preprocessor/facilities/is_empty_variadic.hpp
|   tarantoolr/src/third_party/msgpack-1.4.1/include/msgpack/preprocessor/iteration/detail/bounds/lower1.hpp

Do you know about this package

   https://cloud.r-project.org/web/packages/RcppRedis/

using the package RcppMsgPack (currently in the off-CRAN repo ghrr-drat) ?

I could look into getting RcppMsgPack onto CRAN too.  I really like MsgPack.

| My question is: Is it possible to be accepted on CRAN with these sort of
| messages? To say the truth I have no idea how can I fix them and still have
| third party components inside source directory.

As Duncan already said, you need to shorten the path to arrive at 104
characters. That is (no kidding) the main reason the Boost Headers package is
called BH to only use two chars.  There is still one file in there I rename
for each release for this very reason to a shorter name -- 104 chars it is.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From kvs at sigterm.ru  Sun Jun 11 15:46:41 2017
From: kvs at sigterm.ru (Konstantin Sorokin)
Date: Sun, 11 Jun 2017 16:46:41 +0300
Subject: [R-pkg-devel] Note about portable file names
In-Reply-To: <22845.17030.977289.877288@max.eddelbuettel.com>
References: <CAFjK30tP_p-zyjYXkqVkw-twq5_EzV=ZYoG=756=MFxFGQL4Hw@mail.gmail.com>
 <22845.17030.977289.877288@max.eddelbuettel.com>
Message-ID: <CAFjK30v==OOpQTjFJ8DXa_NtSXsQ_7o4-gWMutiGu834Cs2Pow@mail.gmail.com>

On Sun, Jun 11, 2017 at 4:15 PM, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 11 June 2017 at 15:18, Konstantin Sorokin wrote:
> | Hello!
> |
> | When checking one of my packages I have following message:
> |
> | checking for portable file names ... NOTE
> | Found the following non-portable file paths:
> |   tarantoolr/src/third_party/msgpack-1.4.1/include/msgpack/
> preprocessor/facilities/is_empty_variadic.hpp
> |   tarantoolr/src/third_party/msgpack-1.4.1/include/msgpack/
> preprocessor/iteration/detail/bounds/lower1.hpp
>
> Do you know about this package
>
>    https://cloud.r-project.org/web/packages/RcppRedis/
>
> using the package RcppMsgPack (currently in the off-CRAN repo ghrr-drat) ?
>

Am I right in my understanding that then I'll be able to link with it and
use msgpack (1.4) functions in C++ code without the need to include msgpack
sources in my R package?

-- 
Konstantin Sorokin

	[[alternative HTML version deleted]]


From davidhughjones at gmail.com  Sun Jun 11 15:51:49 2017
From: davidhughjones at gmail.com (David Hugh-Jones)
Date: Sun, 11 Jun 2017 14:51:49 +0100
Subject: [R-pkg-devel] Changing a package's name
Message-ID: <CAARY7kgQ7wZwmjUas=pGaX1FpiU0bb6z-3XS-t5wXdKHyRcbeQ@mail.gmail.com>

Hello all,

A short while ago I released the "huxtable" package for writing HTML and
LaTeX tables:
https://www.github.com/hughjonesd/huxtable

The name seemed cute to me, but I later found out that to Americans it has
special associations. The Huxtables were the family in the Cosby show. That
would be fine, except that Bill Cosby is now on trial for one case of rape,
and there are accusations of many other cases.

So, two questions:

* Do you think I should change the name?

Comments welcome from Americans and others on this difficult cultural issue.

* If I do, what's the best and least disruptive way to do it? Bear in mind
that I have a couple of thousand users.

My first thought would be to release an update which gives a warning about
the future change when the package is loaded; then release a package with
the new name and continue development on this branch.

David

	[[alternative HTML version deleted]]


From edd at debian.org  Sun Jun 11 16:05:11 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 11 Jun 2017 09:05:11 -0500
Subject: [R-pkg-devel] Note about portable file names
In-Reply-To: <CAFjK30v==OOpQTjFJ8DXa_NtSXsQ_7o4-gWMutiGu834Cs2Pow@mail.gmail.com>
References: <CAFjK30tP_p-zyjYXkqVkw-twq5_EzV=ZYoG=756=MFxFGQL4Hw@mail.gmail.com>
 <22845.17030.977289.877288@max.eddelbuettel.com>
 <CAFjK30v==OOpQTjFJ8DXa_NtSXsQ_7o4-gWMutiGu834Cs2Pow@mail.gmail.com>
Message-ID: <22845.19991.728853.326936@max.eddelbuettel.com>


On 11 June 2017 at 16:46, Konstantin Sorokin wrote:
| On Sun, Jun 11, 2017 at 4:15 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
| 
|    
|     On 11 June 2017 at 15:18, Konstantin Sorokin wrote:
|     | Hello!
|     |
|     | When checking one of my packages I have following message:
|     |
|     | checking for portable file names ... NOTE
|     | Found the following non-portable file paths:
|     |? ?tarantoolr/src/third_party/msgpack-1.4.1/include/msgpack/preprocessor/
|     facilities/is_empty_variadic.hpp
|     |? ?tarantoolr/src/third_party/msgpack-1.4.1/include/msgpack/preprocessor/
|     iteration/detail/bounds/lower1.hpp
| 
|     Do you know about this package
| 
|     ? ?https://cloud.r-project.org/web/packages/RcppRedis/
| 
|     using the package RcppMsgPack (currently in the off-CRAN repo ghrr-drat) ?
| 
| 
| Am I right in my understanding that then I'll be able to link with it and use
| msgpack (1.4) functions in C++ code without the need to include msgpack sources
| in my R package?

Yes! That is exactly what my RcppRedis does (though it does it currently
"conditionally" as RcppMsgPack was so far an optional package).

And I am right now brushing up RcppMsgpack, with an update from msgpack-c
bringing it from version 1.4.0 to 1.4.2.  I will upload this to CRAN, and
should it become accepted you can use 'LinkingTo:' to get its headers just as
you do with BH (for Boost) or other header-supplying packages.

Note that this is technically not 'linking' as we only consume headers. But
that works so well for C++, C++11, C++14, ... that it makes sense to provide
the headers.

At work, we have been writing and reading millions of records to Redis via
RcppRedis and RcppMsgPack so I may as well upload this now.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From jfox at mcmaster.ca  Mon Jun 12 01:46:56 2017
From: jfox at mcmaster.ca (Fox, John)
Date: Sun, 11 Jun 2017 23:46:56 +0000
Subject: [R-pkg-devel] Changing a package's name
In-Reply-To: <11368_1497189120_v5BDpxMZ010073_CAARY7kgQ7wZwmjUas=pGaX1FpiU0bb6z-3XS-t5wXdKHyRcbeQ@mail.gmail.com>
References: <11368_1497189120_v5BDpxMZ010073_CAARY7kgQ7wZwmjUas=pGaX1FpiU0bb6z-3XS-t5wXdKHyRcbeQ@mail.gmail.com>
Message-ID: <ACD1644AA6C67E4FBD0C350625508EC836679EA5@FHSDB2D11-2.csu.mcmaster.ca>

Dear David,

No one at CRAN has responded yet, so I'll take a stab at it.

First, you're right about the resonance of "huxtable" for North Americans, and if the package were mine, I'd be slightly embarrassed about the name.

CRAN generally will not allow you to rename a package, for several obvious reasons: For example, packages that depend on yours would break (but there don't appear to be any yet), users might be confused, and there would be a discontinuity in archived versions of the package. See <https://stat.ethz.ch/pipermail/r-devel/2013-August/067264.html> for a comment by one of the CRAN maintainers about renaming packages.

You could, however, ask the CRAN maintainers for a dispensation, explaining the reason for the desired change.

Best,
 John

-----------------------------
John Fox, Professor
McMaster University
Hamilton, Ontario
Canada L8S 4M4
web: socserv.mcmaster.ca/jfox


________________________________________
From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf of David Hugh-Jones [davidhughjones at gmail.com]
Sent: June 11, 2017 9:51 AM
To: R package devel
Subject: [R-pkg-devel] Changing a package's name

Hello all,

A short while ago I released the "huxtable" package for writing HTML and
LaTeX tables:
https://www.github.com/hughjonesd/huxtable

The name seemed cute to me, but I later found out that to Americans it has
special associations. The Huxtables were the family in the Cosby show. That
would be fine, except that Bill Cosby is now on trial for one case of rape,
and there are accusations of many other cases.

So, two questions:

* Do you think I should change the name?

Comments welcome from Americans and others on this difficult cultural issue.

* If I do, what's the best and least disruptive way to do it? Bear in mind
that I have a couple of thousand users.

My first thought would be to release an update which gives a warning about
the future change when the package is loaded; then release a package with
the new name and continue development on this branch.

David

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From patrick.schratz at gmail.com  Mon Jun 12 11:44:22 2017
From: patrick.schratz at gmail.com (Patrick Schratz)
Date: Mon, 12 Jun 2017 11:44:22 +0200
Subject: [R-pkg-devel] Using plyr::mutate and dplyr::mutate in one package
Message-ID: <c12c6b8a-0035-4a75-a52a-8f5ae905f107@Spark>

Hi guys,

I?m using both ?plyr? and ?dplyr? in my package, specifically the ?mutate? function of each. I use ?plyr::mutate? ?and ?dplyr::mutate? in two different functions and import both using roxygen2 notation 'importFrom plyr mutate? (the same for dplyr). However, I cannot get rid of the warning message

Warning: replacing previous import ?dplyr::mutate? by ?plyr::mutate? when loading

How is this done correctly?

Cheers, Pat

PhD Student at Department of Geography - GIScience group
Friedrich-Schiller-University Jena, Germany
Tel.: +49-3641-9-48973
Web: https://pat-s.github.io

	[[alternative HTML version deleted]]


From csardi.gabor at gmail.com  Mon Jun 12 11:46:06 2017
From: csardi.gabor at gmail.com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Mon, 12 Jun 2017 10:46:06 +0100
Subject: [R-pkg-devel] Using plyr::mutate and dplyr::mutate in one
	package
In-Reply-To: <c12c6b8a-0035-4a75-a52a-8f5ae905f107@Spark>
References: <c12c6b8a-0035-4a75-a52a-8f5ae905f107@Spark>
Message-ID: <CABtg=KnryHmeF7pRRAJzvyeAepcqNvE4pUru1jBKJdKMB9sZRA@mail.gmail.com>

Do not import the functions explicitly, just refer to them as
plyr::mutate and dplyr::mutate.

For the :: references, you do not need to use @importFrom.

Gabor

On Mon, Jun 12, 2017 at 10:44 AM, Patrick Schratz
<patrick.schratz at gmail.com> wrote:
> Hi guys,
>
> I?m using both ?plyr? and ?dplyr? in my package, specifically the ?mutate? function of each. I use ?plyr::mutate?  and ?dplyr::mutate? in two different functions and import both using roxygen2 notation 'importFrom plyr mutate? (the same for dplyr). However, I cannot get rid of the warning message
>
> Warning: replacing previous import ?dplyr::mutate? by ?plyr::mutate? when loading
>
> How is this done correctly?
>
> Cheers, Pat
>
> PhD Student at Department of Geography - GIScience group
> Friedrich-Schiller-University Jena, Germany
> Tel.: +49-3641-9-48973
> Web: https://pat-s.github.io
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From dasonk at gmail.com  Mon Jun 12 15:58:14 2017
From: dasonk at gmail.com (Dason Kurkiewicz)
Date: Mon, 12 Jun 2017 09:58:14 -0400
Subject: [R-pkg-devel] Changing a package's name
In-Reply-To: <ACD1644AA6C67E4FBD0C350625508EC836679EA5@FHSDB2D11-2.csu.mcmaster.ca>
References: <11368_1497189120_v5BDpxMZ010073_CAARY7kgQ7wZwmjUas=pGaX1FpiU0bb6z-3XS-t5wXdKHyRcbeQ@mail.gmail.com>
 <ACD1644AA6C67E4FBD0C350625508EC836679EA5@FHSDB2D11-2.csu.mcmaster.ca>
Message-ID: <CAJZYZZ7hXObLkztGVosioiyHypeEz=M_59Vn-N=ppDzigUZHwA@mail.gmail.com>

Hi David,

Honestly I'm from the US and know about the scandal with Cosby but
don't think that it would be an issue for your package.  First off
it's the name of the fictional family - not Bill Cosby's name
directly. There are more members of the family than just what Bill
portrayed.  If you show me anybody that sees your package name and
says something like "well I guess that author is for sexual assault"
then I doubt they're really thinking at a capacity to do any sort of
real work anyways.  There are other "Huxtable"s that exist by the way:
https://en.wikipedia.org/wiki/Ada_Louise_Huxtable is a prime example
that comes to mind for me.  A quote from Carter Wiseman: "Huxtable's
insistence on intellectual rigor and high design standards made her
the conscience of the national architectural community".  That doesn't
seem like a bad person to have an association with if you ask me.

Changing the package's name seems to be much too high of a cost (if
even possible) to shake the extremely loose association one might see
the package having with Bill Cosby.  It's not like you called your
package "ISIS". I would highly recommend just not worrying about it.

-Dason Kurkiewicz

On Sun, Jun 11, 2017 at 7:46 PM, Fox, John <jfox at mcmaster.ca> wrote:
> Dear David,
>
> No one at CRAN has responded yet, so I'll take a stab at it.
>
> First, you're right about the resonance of "huxtable" for North Americans, and if the package were mine, I'd be slightly embarrassed about the name.
>
> CRAN generally will not allow you to rename a package, for several obvious reasons: For example, packages that depend on yours would break (but there don't appear to be any yet), users might be confused, and there would be a discontinuity in archived versions of the package. See <https://stat.ethz.ch/pipermail/r-devel/2013-August/067264.html> for a comment by one of the CRAN maintainers about renaming packages.
>
> You could, however, ask the CRAN maintainers for a dispensation, explaining the reason for the desired change.
>
> Best,
>  John
>
> -----------------------------
> John Fox, Professor
> McMaster University
> Hamilton, Ontario
> Canada L8S 4M4
> web: socserv.mcmaster.ca/jfox
>
>
> ________________________________________
> From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf of David Hugh-Jones [davidhughjones at gmail.com]
> Sent: June 11, 2017 9:51 AM
> To: R package devel
> Subject: [R-pkg-devel] Changing a package's name
>
> Hello all,
>
> A short while ago I released the "huxtable" package for writing HTML and
> LaTeX tables:
> https://www.github.com/hughjonesd/huxtable
>
> The name seemed cute to me, but I later found out that to Americans it has
> special associations. The Huxtables were the family in the Cosby show. That
> would be fine, except that Bill Cosby is now on trial for one case of rape,
> and there are accusations of many other cases.
>
> So, two questions:
>
> * Do you think I should change the name?
>
> Comments welcome from Americans and others on this difficult cultural issue.
>
> * If I do, what's the best and least disruptive way to do it? Bear in mind
> that I have a couple of thousand users.
>
> My first thought would be to release an update which gives a warning about
> the future change when the package is loaded; then release a package with
> the new name and continue development on this branch.
>
> David
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd at debian.org  Mon Jun 12 16:19:41 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Mon, 12 Jun 2017 09:19:41 -0500
Subject: [R-pkg-devel] Note about portable file names
In-Reply-To: <22845.19991.728853.326936@max.eddelbuettel.com>
References: <CAFjK30tP_p-zyjYXkqVkw-twq5_EzV=ZYoG=756=MFxFGQL4Hw@mail.gmail.com>
 <22845.17030.977289.877288@max.eddelbuettel.com>
 <CAFjK30v==OOpQTjFJ8DXa_NtSXsQ_7o4-gWMutiGu834Cs2Pow@mail.gmail.com>
 <22845.19991.728853.326936@max.eddelbuettel.com>
Message-ID: <22846.41725.946439.91611@max.eddelbuettel.com>


Konstantin,

RcppMsgPack 0.1.1, containing MsgPack headers from msgpack-c 1.4.2, is now on
CRAN. It should work for your purposes with a simple LinkingTo: RcppMsgPack.

I turned of Windows builds; there is a weird interaction that may just be one
of these include header order things but I haven't had time to chase this on
Windows.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From Joris.Meys at ugent.be  Mon Jun 12 17:18:35 2017
From: Joris.Meys at ugent.be (Joris Meys)
Date: Mon, 12 Jun 2017 17:18:35 +0200
Subject: [R-pkg-devel] Changing a package's name
In-Reply-To: <CAJZYZZ7hXObLkztGVosioiyHypeEz=M_59Vn-N=ppDzigUZHwA@mail.gmail.com>
References: <11368_1497189120_v5BDpxMZ010073_CAARY7kgQ7wZwmjUas=pGaX1FpiU0bb6z-3XS-t5wXdKHyRcbeQ@mail.gmail.com>
 <ACD1644AA6C67E4FBD0C350625508EC836679EA5@FHSDB2D11-2.csu.mcmaster.ca>
 <CAJZYZZ7hXObLkztGVosioiyHypeEz=M_59Vn-N=ppDzigUZHwA@mail.gmail.com>
Message-ID: <CAO1zAVaaGwfs=FyB+KsvL8ptfV-J_ETUD3xZQCbqdaEqszP9CQ@mail.gmail.com>

I'll chime in from the other side of the ocean: I didn't even know that the
Huxtables was their family name, and I've watched the Cosby show often as a
kid. I did a quick check in the office and of the 12 R users I asked,
exactly 0 knew who the Huxtables were.

So I wouldn't worry too much about it.

Cheers
Joris

On Mon, Jun 12, 2017 at 3:58 PM, Dason Kurkiewicz <dasonk at gmail.com> wrote:

> Hi David,
>
> Honestly I'm from the US and know about the scandal with Cosby but
> don't think that it would be an issue for your package.  First off
> it's the name of the fictional family - not Bill Cosby's name
> directly. There are more members of the family than just what Bill
> portrayed.  If you show me anybody that sees your package name and
> says something like "well I guess that author is for sexual assault"
> then I doubt they're really thinking at a capacity to do any sort of
> real work anyways.  There are other "Huxtable"s that exist by the way:
> https://en.wikipedia.org/wiki/Ada_Louise_Huxtable is a prime example
> that comes to mind for me.  A quote from Carter Wiseman: "Huxtable's
> insistence on intellectual rigor and high design standards made her
> the conscience of the national architectural community".  That doesn't
> seem like a bad person to have an association with if you ask me.
>
> Changing the package's name seems to be much too high of a cost (if
> even possible) to shake the extremely loose association one might see
> the package having with Bill Cosby.  It's not like you called your
> package "ISIS". I would highly recommend just not worrying about it.
>
> -Dason Kurkiewicz
>
> On Sun, Jun 11, 2017 at 7:46 PM, Fox, John <jfox at mcmaster.ca> wrote:
> > Dear David,
> >
> > No one at CRAN has responded yet, so I'll take a stab at it.
> >
> > First, you're right about the resonance of "huxtable" for North
> Americans, and if the package were mine, I'd be slightly embarrassed about
> the name.
> >
> > CRAN generally will not allow you to rename a package, for several
> obvious reasons: For example, packages that depend on yours would break
> (but there don't appear to be any yet), users might be confused, and there
> would be a discontinuity in archived versions of the package. See <
> https://stat.ethz.ch/pipermail/r-devel/2013-August/067264.html> for a
> comment by one of the CRAN maintainers about renaming packages.
> >
> > You could, however, ask the CRAN maintainers for a dispensation,
> explaining the reason for the desired change.
> >
> > Best,
> >  John
> >
> > -----------------------------
> > John Fox, Professor
> > McMaster University
> > Hamilton, Ontario
> > Canada L8S 4M4
> > web: socserv.mcmaster.ca/jfox
> >
> >
> > ________________________________________
> > From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf
> of David Hugh-Jones [davidhughjones at gmail.com]
> > Sent: June 11, 2017 9:51 AM
> > To: R package devel
> > Subject: [R-pkg-devel] Changing a package's name
> >
> > Hello all,
> >
> > A short while ago I released the "huxtable" package for writing HTML and
> > LaTeX tables:
> > https://www.github.com/hughjonesd/huxtable
> >
> > The name seemed cute to me, but I later found out that to Americans it
> has
> > special associations. The Huxtables were the family in the Cosby show.
> That
> > would be fine, except that Bill Cosby is now on trial for one case of
> rape,
> > and there are accusations of many other cases.
> >
> > So, two questions:
> >
> > * Do you think I should change the name?
> >
> > Comments welcome from Americans and others on this difficult cultural
> issue.
> >
> > * If I do, what's the best and least disruptive way to do it? Bear in
> mind
> > that I have a couple of thousand users.
> >
> > My first thought would be to release an update which gives a warning
> about
> > the future change when the package is loaded; then release a package with
> > the new name and continue development on this branch.
> >
> > David
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Joris Meys
Statistical consultant

Ghent University
Faculty of Bioscience Engineering
Department of Mathematical Modelling, Statistics and Bio-Informatics

tel : +32 9 264 59 87
Joris.Meys at Ugent.be
-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From lists at dewey.myzen.co.uk  Tue Jun 13 14:29:55 2017
From: lists at dewey.myzen.co.uk (Michael Dewey)
Date: Tue, 13 Jun 2017 13:29:55 +0100
Subject: [R-pkg-devel] Changing a package's name
In-Reply-To: <CAARY7kgQ7wZwmjUas=pGaX1FpiU0bb6z-3XS-t5wXdKHyRcbeQ@mail.gmail.com>
References: <CAARY7kgQ7wZwmjUas=pGaX1FpiU0bb6z-3XS-t5wXdKHyRcbeQ@mail.gmail.com>
Message-ID: <9f3abe04-61ea-37d0-cc8e-5cf23a9bdbb1@dewey.myzen.co.uk>

Dear David

It is your package and you can choose the name you prefer. If you feel 
uncomfortable with the current one then change it. I do not think anyone 
else's opinion is relevant unless a package author picks a name that all 
right thinking people would find offensive.

On 11/06/2017 14:51, David Hugh-Jones wrote:
> Hello all,
>
> A short while ago I released the "huxtable" package for writing HTML and
> LaTeX tables:
> https://www.github.com/hughjonesd/huxtable
>
> The name seemed cute to me, but I later found out that to Americans it has
> special associations. The Huxtables were the family in the Cosby show. That
> would be fine, except that Bill Cosby is now on trial for one case of rape,
> and there are accusations of many other cases.
>
> So, two questions:
>
> * Do you think I should change the name?
>
> Comments welcome from Americans and others on this difficult cultural issue.
>
> * If I do, what's the best and least disruptive way to do it? Bear in mind
> that I have a couple of thousand users.
>
> My first thought would be to release an update which gives a warning about
> the future change when the package is loaded; then release a package with
> the new name and continue development on this branch.
>
> David
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ---
> This email has been checked for viruses by AVG.
> http://www.avg.com
>
>

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From davidhughjones at gmail.com  Tue Jun 13 14:56:41 2017
From: davidhughjones at gmail.com (David Hugh-Jones)
Date: Tue, 13 Jun 2017 13:56:41 +0100
Subject: [R-pkg-devel] Changing a package's name
In-Reply-To: <9f3abe04-61ea-37d0-cc8e-5cf23a9bdbb1@dewey.myzen.co.uk>
References: <CAARY7kgQ7wZwmjUas=pGaX1FpiU0bb6z-3XS-t5wXdKHyRcbeQ@mail.gmail.com>
 <9f3abe04-61ea-37d0-cc8e-5cf23a9bdbb1@dewey.myzen.co.uk>
Message-ID: <CAARY7kh+PZnddf4BhN0cv-NtKzKDzrEjKOxXQe7+CYuzPPztFA@mail.gmail.com>

Apropos of nothing, I just came across this line at
https://github.com/trestletech/plumber:

plumber was originally released as the rapier package and has since been
renamed (7/13/2015)

Heh.

David

On 13 June 2017 at 13:29, Michael Dewey <lists at dewey.myzen.co.uk> wrote:

> Dear David
>
> It is your package and you can choose the name you prefer. If you feel
> uncomfortable with the current one then change it. I do not think anyone
> else's opinion is relevant unless a package author picks a name that all
> right thinking people would find offensive.
>
>
> On 11/06/2017 14:51, David Hugh-Jones wrote:
>
>> Hello all,
>>
>> A short while ago I released the "huxtable" package for writing HTML and
>> LaTeX tables:
>> https://www.github.com/hughjonesd/huxtable
>>
>> The name seemed cute to me, but I later found out that to Americans it has
>> special associations. The Huxtables were the family in the Cosby show.
>> That
>> would be fine, except that Bill Cosby is now on trial for one case of
>> rape,
>> and there are accusations of many other cases.
>>
>> So, two questions:
>>
>> * Do you think I should change the name?
>>
>> Comments welcome from Americans and others on this difficult cultural
>> issue.
>>
>> * If I do, what's the best and least disruptive way to do it? Bear in mind
>> that I have a couple of thousand users.
>>
>> My first thought would be to release an update which gives a warning about
>> the future change when the package is loaded; then release a package with
>> the new name and continue development on this branch.
>>
>> David
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ---
>> This email has been checked for viruses by AVG.
>> http://www.avg.com
>>
>>
>>
> --
> Michael
> http://www.dewey.myzen.co.uk/home.html
>

	[[alternative HTML version deleted]]


From berryboessenkool at hotmail.com  Tue Jun 13 15:01:07 2017
From: berryboessenkool at hotmail.com (Berry Boessenkool)
Date: Tue, 13 Jun 2017 13:01:07 +0000
Subject: [R-pkg-devel] dependency cycle
Message-ID: <DB5PR0401MB17819F765D2A491D0E5F6677D5C20@DB5PR0401MB1781.eurprd04.prod.outlook.com>


Hi,

I have a package A. Some of its functions are used in package B.

B imports A in the DESCRIPTION, both are on CRAN.

A has a function fff where I want to add some optional functionality.

The problem: that optional stuff uses code in package B.


I feel like I have two bad options:

- put fff in a package C that imports both A and B.
However, C would really be too small to be on CRAN.
Also, some people already know of A::fff and I'm rather inclined to keep it there.

- put B in Suggests and make the optional part of fff conditional on requireNamespace("B").

But then B imports A while A suggests B, which sounds dangerous.


Any ideas on what I could/should do here?

Thanks ahead,

Berry


	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Tue Jun 13 15:40:11 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 13 Jun 2017 08:40:11 -0500
Subject: [R-pkg-devel] Changing a package's name
In-Reply-To: <9f3abe04-61ea-37d0-cc8e-5cf23a9bdbb1@dewey.myzen.co.uk>
References: <CAARY7kgQ7wZwmjUas=pGaX1FpiU0bb6z-3XS-t5wXdKHyRcbeQ@mail.gmail.com>
 <9f3abe04-61ea-37d0-cc8e-5cf23a9bdbb1@dewey.myzen.co.uk>
Message-ID: <6d41f3c1-9aad-a7e3-98ba-d0480397dac9@gmail.com>

On 13/06/2017 7:29 AM, Michael Dewey wrote:
> Dear David
>
> It is your package and you can choose the name you prefer. If you feel
> uncomfortable with the current one then change it. I do not think anyone
> else's opinion is relevant unless a package author picks a name that all
> right thinking people would find offensive.

However, CRAN's opinion is relevant if you want them to distribute it 
for you.  Name changes cause extra work for them so please don't do it 
unnecessarily, and if you do think it's necessary, explain your 
reasoning to them when you submit.

Duncan Murdoch

>
> On 11/06/2017 14:51, David Hugh-Jones wrote:
>> Hello all,
>>
>> A short while ago I released the "huxtable" package for writing HTML and
>> LaTeX tables:
>> https://www.github.com/hughjonesd/huxtable
>>
>> The name seemed cute to me, but I later found out that to Americans it has
>> special associations. The Huxtables were the family in the Cosby show. That
>> would be fine, except that Bill Cosby is now on trial for one case of rape,
>> and there are accusations of many other cases.
>>
>> So, two questions:
>>
>> * Do you think I should change the name?
>>
>> Comments welcome from Americans and others on this difficult cultural issue.
>>
>> * If I do, what's the best and least disruptive way to do it? Bear in mind
>> that I have a couple of thousand users.
>>
>> My first thought would be to release an update which gives a warning about
>> the future change when the package is loaded; then release a package with
>> the new name and continue development on this branch.
>>
>> David
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ---
>> This email has been checked for viruses by AVG.
>> http://www.avg.com
>>
>>
>


From edd at debian.org  Tue Jun 13 16:27:22 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 13 Jun 2017 09:27:22 -0500
Subject: [R-pkg-devel] dependency cycle
In-Reply-To: <DB5PR0401MB17819F765D2A491D0E5F6677D5C20@DB5PR0401MB1781.eurprd04.prod.outlook.com>
References: <DB5PR0401MB17819F765D2A491D0E5F6677D5C20@DB5PR0401MB1781.eurprd04.prod.outlook.com>
Message-ID: <22847.63050.860213.88304@max.eddelbuettel.com>


On 13 June 2017 at 13:01, Berry Boessenkool wrote:
| 
| Hi,
| 
| I have a package A. Some of its functions are used in package B.
| 
| B imports A in the DESCRIPTION, both are on CRAN.
| 
| A has a function fff where I want to add some optional functionality.
| 
| The problem: that optional stuff uses code in package B.
| 
| 
| I feel like I have two bad options:
| 
| - put fff in a package C that imports both A and B.
| However, C would really be too small to be on CRAN.
| Also, some people already know of A::fff and I'm rather inclined to keep it there.
| 
| - put B in Suggests and make the optional part of fff conditional on requireNamespace("B").
| 
| But then B imports A while A suggests B, which sounds dangerous.
| 
| 
| Any ideas on what I could/should do here?

My Google-Fu is weak this morning but I think we just that discussion here.

Usual tip: Disentangle.  Create package C with common code.  Have A use
it. Have B use A.  No cycles.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ligges at statistik.tu-dortmund.de  Tue Jun 13 16:50:54 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 13 Jun 2017 16:50:54 +0200
Subject: [R-pkg-devel] Changing a package's name
In-Reply-To: <6d41f3c1-9aad-a7e3-98ba-d0480397dac9@gmail.com>
References: <CAARY7kgQ7wZwmjUas=pGaX1FpiU0bb6z-3XS-t5wXdKHyRcbeQ@mail.gmail.com>
 <9f3abe04-61ea-37d0-cc8e-5cf23a9bdbb1@dewey.myzen.co.uk>
 <6d41f3c1-9aad-a7e3-98ba-d0480397dac9@gmail.com>
Message-ID: <011d19b7-da79-3a5d-4bc0-f5f8c9f0c967@statistik.tu-dortmund.de>



On 13.06.2017 15:40, Duncan Murdoch wrote:
> On 13/06/2017 7:29 AM, Michael Dewey wrote:
>> Dear David
>>
>> It is your package and you can choose the name you prefer. If you feel
>> uncomfortable with the current one then change it. I do not think anyone
>> else's opinion is relevant unless a package author picks a name that all
>> right thinking people would find offensive.
> 
> However, CRAN's opinion is relevant if you want them to distribute it 
> for you.  Name changes cause extra work for them so please don't do it 
> unnecessarily, and if you do think it's necessary, explain your 
> reasoning to them when you submit.

OK, it appears I have to say a word:

Thanks to all for contributing to this thread so far.
Indeed, Duncan is right, and not only the work required to get it done 
is relevant, also the effort for users to recognize the name change and 
the fact that the old name is reserved for the CRAN namespace and nobody 
else can submit another package under such a name is an issue to be 
considered.

So for the archives, as Duncan says: You have to have a very good reason 
to justify publication of an updated package under a new name.

Best,
Uwe Ligges




> Duncan Murdoch
> 
>>
>> On 11/06/2017 14:51, David Hugh-Jones wrote:
>>> Hello all,
>>>
>>> A short while ago I released the "huxtable" package for writing HTML and
>>> LaTeX tables:
>>> https://www.github.com/hughjonesd/huxtable
>>>
>>> The name seemed cute to me, but I later found out that to Americans 
>>> it has
>>> special associations. The Huxtables were the family in the Cosby 
>>> show. That
>>> would be fine, except that Bill Cosby is now on trial for one case of 
>>> rape,
>>> and there are accusations of many other cases.
>>>
>>> So, two questions:
>>>
>>> * Do you think I should change the name?
>>>
>>> Comments welcome from Americans and others on this difficult cultural 
>>> issue.
>>>
>>> * If I do, what's the best and least disruptive way to do it? Bear in 
>>> mind
>>> that I have a couple of thousand users.
>>>
>>> My first thought would be to release an update which gives a warning 
>>> about
>>> the future change when the package is loaded; then release a package 
>>> with
>>> the new name and continue development on this branch.
>>>
>>> David
>>>
>>>     [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>> ---
>>> This email has been checked for viruses by AVG.
>>> http://www.avg.com
>>>
>>>
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From i.ucar86 at gmail.com  Sat Jun 17 17:30:57 2017
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Sat, 17 Jun 2017 17:30:57 +0200
Subject: [R-pkg-devel] Linking external libraries in non-standard locations
Message-ID: <CALEXWq0AMzhrQkD5zAKobFOfiW9JGyHLX8p87iGtgg6S6TpDWA@mail.gmail.com>

Hi all,

After googling around for a while, I found that this is a common
problem, but still it is not clear to me how I should handle this.

I have a package A, with C++ code via Rcpp, that needs an external C++
library libB. I have a configure script that sets

PKG_CPPFLAGS=-I/path/to/B/include
PKG_LIBS=-L/path/to/B/lib -lB

in src/Makevars. Compilation and linking seem to go just fine. But then,

** testing if installed package can be loaded
Error in dyn.load(file, DLLpath = DLLpath, ...) :
  unable to load shared object
'/home/xxx/R/x86_64-redhat-linux-gnu-library/3.3/A/libs/A.so':
  libB.so: cannot open shared object file: No such file or directory

If I set LD_LIBRARY_PATH=/path/to/B/lib, the error above is solved and
the package is installed. But then I try to load the package with
library(A), with LD_LIBRARY_PATH still set, and the same error
reappears.

So what is the proper and more portable way of linking a external
library in a non-standard location?

Regards,
I?aki


From edd at debian.org  Sat Jun 17 18:00:21 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 17 Jun 2017 11:00:21 -0500
Subject: [R-pkg-devel] Linking external libraries in non-standard
	locations
In-Reply-To: <CALEXWq0AMzhrQkD5zAKobFOfiW9JGyHLX8p87iGtgg6S6TpDWA@mail.gmail.com>
References: <CALEXWq0AMzhrQkD5zAKobFOfiW9JGyHLX8p87iGtgg6S6TpDWA@mail.gmail.com>
Message-ID: <22853.21013.802975.579165@max.eddelbuettel.com>


On 17 June 2017 at 17:30, I?aki ?car wrote:
| Hi all,
| 
| After googling around for a while, I found that this is a common
| problem, but still it is not clear to me how I should handle this.
| 
| I have a package A, with C++ code via Rcpp, that needs an external C++
| library libB. I have a configure script that sets
| 
| PKG_CPPFLAGS=-I/path/to/B/include
| PKG_LIBS=-L/path/to/B/lib -lB
| 
| in src/Makevars. Compilation and linking seem to go just fine. But then,
| 
| ** testing if installed package can be loaded
| Error in dyn.load(file, DLLpath = DLLpath, ...) :
|   unable to load shared object
| '/home/xxx/R/x86_64-redhat-linux-gnu-library/3.3/A/libs/A.so':
|   libB.so: cannot open shared object file: No such file or directory
| 
| If I set LD_LIBRARY_PATH=/path/to/B/lib, the error above is solved and
| the package is installed. But then I try to load the package with
| library(A), with LD_LIBRARY_PATH still set, and the same error
| reappears.
| 
| So what is the proper and more portable way of linking a external
| library in a non-standard location?

In short, I fear there is none.

The _dynamic_ linker needs to know where the library is. There are defaults,
and there are ways to extend this (i.e. /etc/ld.so.conf.d/*conf on the OS I
use, or LD_LIBRARY_PATH as you used) but _none of those means are accessible
to an R package_. This is system dependent.

A static library you can control for yourself in your package.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From carnivorescience at gmail.com  Sat Jun 17 21:32:22 2017
From: carnivorescience at gmail.com (Guillaume Chapron)
Date: Sat, 17 Jun 2017 21:32:22 +0200
Subject: [R-pkg-devel] Compiler optimization flags with R package
Message-ID: <CCC024C9-048C-4C3A-96E0-658FE3AB9245@gmail.com>

Hello,

I am trying to debug some C code that is run only through a R package. I debug with lldb but I always get a message telling that the package "was compiled with optimization - stepping may behave oddly; variables may not be available.? And in fact, I cannot evaluate all variables and understand what is wrong. I have created a Makevars file in ~/.R/ that contains C=clang -O0 -g but it does not seem to change much. What should I do to make sure I can evaluate all variables in lldb? I am on a Mac and I wrote C=clang because I read that it produced much better error messages but I am happy to use gcc as well if this can be a solution.

Many thanks

Guillaume

From edd at debian.org  Sat Jun 17 21:57:13 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 17 Jun 2017 14:57:13 -0500
Subject: [R-pkg-devel] Compiler optimization flags with R package
In-Reply-To: <CCC024C9-048C-4C3A-96E0-658FE3AB9245@gmail.com>
References: <CCC024C9-048C-4C3A-96E0-658FE3AB9245@gmail.com>
Message-ID: <22853.35225.2381.355332@max.eddelbuettel.com>


On 17 June 2017 at 21:32, Guillaume Chapron wrote:
| I am trying to debug some C code that is run only through a R package. I debug with lldb but I always get a message telling that the package "was compiled with optimization - stepping may behave oddly; variables may not be available.? And in fact, I cannot evaluate all variables and understand what is wrong. I have created a Makevars file in ~/.R/ that contains C=clang -O0 -g but it does not seem to change much. What should I do to make sure I can evaluate all variables in lldb? I am on a Mac and I wrote C=clang because I read that it produced much better error messages but I am happy to use gcc as well if this can be a solution.

Edit the file Makeconf in e.g.

     R> file.path(Sys.getenv("R_HOME"), "etc", "Makeconf")
     [1] "/usr/lib/R/etc/Makeconf"
     R> 

It has those settings hardwired from when R itself was compiled for you.  You
probably want to keep a copy of the original file to be able to revert.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From carnivorescience at gmail.com  Sun Jun 18 09:22:00 2017
From: carnivorescience at gmail.com (Guillaume Chapron)
Date: Sun, 18 Jun 2017 09:22:00 +0200
Subject: [R-pkg-devel] Compiler optimization flags with R package
In-Reply-To: <22853.35225.2381.355332@max.eddelbuettel.com>
References: <CCC024C9-048C-4C3A-96E0-658FE3AB9245@gmail.com>
 <22853.35225.2381.355332@max.eddelbuettel.com>
Message-ID: <C0DB13A5-3F30-403E-8796-E6DB96698042@gmail.com>

Thanks!

In that file, I see:

CC = clang
CFLAGS = -Wall -mtune=core2 -g -O2 $(LTO)

will having -O0 instead give me all the variables or is there a flag for better debugging (I guess -g does it a little already)?

Thanks again 

> On 17 Jun 2017, at 21:57, Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> 
> On 17 June 2017 at 21:32, Guillaume Chapron wrote:
> | I am trying to debug some C code that is run only through a R package. I debug with lldb but I always get a message telling that the package "was compiled with optimization - stepping may behave oddly; variables may not be available.? And in fact, I cannot evaluate all variables and understand what is wrong. I have created a Makevars file in ~/.R/ that contains C=clang -O0 -g but it does not seem to change much. What should I do to make sure I can evaluate all variables in lldb? I am on a Mac and I wrote C=clang because I read that it produced much better error messages but I am happy to use gcc as well if this can be a solution.
> 
> Edit the file Makeconf in e.g.
> 
>    R> file.path(Sys.getenv("R_HOME"), "etc", "Makeconf")
>    [1] "/usr/lib/R/etc/Makeconf"
>    R> 
> 
> It has those settings hardwired from when R itself was compiled for you.  You
> probably want to keep a copy of the original file to be able to revert.
> 
> Dirk
> 
> -- 
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From i.ucar86 at gmail.com  Sun Jun 18 10:40:24 2017
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Sun, 18 Jun 2017 10:40:24 +0200
Subject: [R-pkg-devel] Linking external libraries in non-standard
	locations
In-Reply-To: <22853.21013.802975.579165@max.eddelbuettel.com>
References: <CALEXWq0AMzhrQkD5zAKobFOfiW9JGyHLX8p87iGtgg6S6TpDWA@mail.gmail.com>
 <22853.21013.802975.579165@max.eddelbuettel.com>
Message-ID: <CALEXWq3YOcNL6EDn82ayPzohivGcRAr0oZnK4qWhg3QRpHoeTg@mail.gmail.com>

2017-06-17 18:00 GMT+02:00 Dirk Eddelbuettel <edd at debian.org>:
>
> On 17 June 2017 at 17:30, I?aki ?car wrote:
> | Hi all,
> |
> | After googling around for a while, I found that this is a common
> | problem, but still it is not clear to me how I should handle this.
> |
> | I have a package A, with C++ code via Rcpp, that needs an external C++
> | library libB. I have a configure script that sets
> |
> | PKG_CPPFLAGS=-I/path/to/B/include
> | PKG_LIBS=-L/path/to/B/lib -lB
> |
> | in src/Makevars. Compilation and linking seem to go just fine. But then,
> |
> | ** testing if installed package can be loaded
> | Error in dyn.load(file, DLLpath = DLLpath, ...) :
> |   unable to load shared object
> | '/home/xxx/R/x86_64-redhat-linux-gnu-library/3.3/A/libs/A.so':
> |   libB.so: cannot open shared object file: No such file or directory
> |
> | If I set LD_LIBRARY_PATH=/path/to/B/lib, the error above is solved and
> | the package is installed. But then I try to load the package with
> | library(A), with LD_LIBRARY_PATH still set, and the same error
> | reappears.
> |
> | So what is the proper and more portable way of linking a external
> | library in a non-standard location?
>
> In short, I fear there is none.
>
> The _dynamic_ linker needs to know where the library is. There are defaults,
> and there are ways to extend this (i.e. /etc/ld.so.conf.d/*conf on the OS I
> use, or LD_LIBRARY_PATH as you used) but _none of those means are accessible
> to an R package_. This is system dependent.
>
> A static library you can control for yourself in your package.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

Thanks, Dirk, as I had feared. However, I was wondering whether,
instead of relying on the OS, it would be possible to save this
non-standard location of the library at installation time and then to
call dyn.load() before loading the package.

I?aki


From edd at debian.org  Sun Jun 18 14:57:38 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 18 Jun 2017 07:57:38 -0500
Subject: [R-pkg-devel] Compiler optimization flags with R package
In-Reply-To: <C0DB13A5-3F30-403E-8796-E6DB96698042@gmail.com>
References: <CCC024C9-048C-4C3A-96E0-658FE3AB9245@gmail.com>
 <22853.35225.2381.355332@max.eddelbuettel.com>
 <C0DB13A5-3F30-403E-8796-E6DB96698042@gmail.com>
Message-ID: <22854.30914.772858.851375@max.eddelbuettel.com>


On 18 June 2017 at 09:22, Guillaume Chapron wrote:
| Thanks!
| 
| In that file, I see:
| 
| CC = clang
| CFLAGS = -Wall -mtune=core2 -g -O2 $(LTO)
| 
| will having -O0 instead give me all the variables or is there a flag for better debugging (I guess -g does it a little already)?

Right, -g is what you need. I used to not alter -O flags for simplicity but
because code _could_ be reorganized for optimization it is not a bad idea to
use -O0 as well.

But the key is -g (just how there is -pg for profiling).

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd at debian.org  Sun Jun 18 14:59:37 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 18 Jun 2017 07:59:37 -0500
Subject: [R-pkg-devel] Linking external libraries in non-standard
	locations
In-Reply-To: <CALEXWq3YOcNL6EDn82ayPzohivGcRAr0oZnK4qWhg3QRpHoeTg@mail.gmail.com>
References: <CALEXWq0AMzhrQkD5zAKobFOfiW9JGyHLX8p87iGtgg6S6TpDWA@mail.gmail.com>
 <22853.21013.802975.579165@max.eddelbuettel.com>
 <CALEXWq3YOcNL6EDn82ayPzohivGcRAr0oZnK4qWhg3QRpHoeTg@mail.gmail.com>
Message-ID: <22854.31033.416197.356608@max.eddelbuettel.com>


On 18 June 2017 at 10:40, I?aki ?car wrote:
| 2017-06-17 18:00 GMT+02:00 Dirk Eddelbuettel <edd at debian.org>:
| >
| > On 17 June 2017 at 17:30, I?aki ?car wrote:
| > | Hi all,
| > |
| > | After googling around for a while, I found that this is a common
| > | problem, but still it is not clear to me how I should handle this.
| > |
| > | I have a package A, with C++ code via Rcpp, that needs an external C++
| > | library libB. I have a configure script that sets
| > |
| > | PKG_CPPFLAGS=-I/path/to/B/include
| > | PKG_LIBS=-L/path/to/B/lib -lB
| > |
| > | in src/Makevars. Compilation and linking seem to go just fine. But then,
| > |
| > | ** testing if installed package can be loaded
| > | Error in dyn.load(file, DLLpath = DLLpath, ...) :
| > |   unable to load shared object
| > | '/home/xxx/R/x86_64-redhat-linux-gnu-library/3.3/A/libs/A.so':
| > |   libB.so: cannot open shared object file: No such file or directory
| > |
| > | If I set LD_LIBRARY_PATH=/path/to/B/lib, the error above is solved and
| > | the package is installed. But then I try to load the package with
| > | library(A), with LD_LIBRARY_PATH still set, and the same error
| > | reappears.
| > |
| > | So what is the proper and more portable way of linking a external
| > | library in a non-standard location?
| >
| > In short, I fear there is none.
| >
| > The _dynamic_ linker needs to know where the library is. There are defaults,
| > and there are ways to extend this (i.e. /etc/ld.so.conf.d/*conf on the OS I
| > use, or LD_LIBRARY_PATH as you used) but _none of those means are accessible
| > to an R package_. This is system dependent.
| >
| > A static library you can control for yourself in your package.
| >
| > Dirk
| >
| > --
| > http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
| 
| Thanks, Dirk, as I had feared. However, I was wondering whether,
| instead of relying on the OS, it would be possible to save this
| non-standard location of the library at installation time and then to
| call dyn.load() before loading the package.

In theory, yes. In practice, no. You would haev to suspend the calling R
process and restart it for this to have effect.  The only other alternative
is "to become like R" and control your dlopen() but you probably don't want
to go there...

It's simply a difficult problem. "Just" become a FC/RH contributor and make
the library a system library :)

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From pedro.aphalo at helsinki.fi  Mon Jun 19 23:44:39 2017
From: pedro.aphalo at helsinki.fi (Pedro J. Aphalo)
Date: Tue, 20 Jun 2017 00:44:39 +0300
Subject: [R-pkg-devel] Surprised by as.Date() and lubridate::today()
Message-ID: <4858b0cd-20ea-786e-92b2-541d20ccda15@helsinki.fi>

Hello,

I was surprised first by the behaviour of lubridate::today(), and when I 
investigated further, by the behaviour of as.Date.POSIXlt(). Some 
examples follow:

library(lubridate)
# today() does not behave as I expected
tz(now(tzone = "EET"))
tz(today(tzone = "EET")) # UTC!!
today("America/New_York") == today("Asia/Tokyo") # FALSE with no warning 
(lack of warning is wrong?).
tz(today("America/New_York")) # UTC!
tz(today("Asia/Tokyo")) # UTC!
ymd("2017-06-19", tz = "America/New_York") == ymd("2017-06-20", tz = 
"Asia/Tokyo") # FALSE with warning.
tz(ymd("2017-06-19", tz = "America/New_York")) # OK
tz(ymd("2017-06-20", tz = "Asia/Tokyo")) # OK

# nothing unusual here
tz(as.POSIXlt(now(), tz = "EET"))
tz(as.POSIXlt(now(tzone = "EET")))
tz(as.POSIXlt(now(tzone = "EET"), tz = "EET"))
# but the unexpected seems to be the behaviour of as.Date.POSIXlt() as 
all returned values have tz set to "UTC"
tz(as.Date(as.POSIXlt(now())))  # UTC!!
tz(as.Date(as.POSIXlt(now(tzone = "EET"), tz = "EET"), tz = "EET"))  # UTC!!
tz(as.Date(as.POSIXlt(now(), tz = "EET"), tz = "EET"))  # UTC!!
tz(as.Date(as.POSIXlt(now()), tz = "EET"))  # UTC!!

Is this as expected? (R 3.4.0 Windows 10 64, and R 3.3.3, with lubridate 
1.6.0)

Thanks in advance for any insight.

Best regards,

Pedro.

-- 
------------------------------------------------------------------------
Pedro J. Aphalo
University Lecturer, Principal Investigator
(Office 4417, Biocenter 3, Viikinkaari 1)

Department of Biosciences
Plant Biology
P.O. Box 65
00014 University of Helsinki
Finland

e-mail: pedro.aphalo at helsinki.fi <mailto:pedro.aphalo at helsinki.fi>
Tel. (mobile) +358 50 4150623
Tel. (office) +358 2941 57897

------------------------------------------------------------------------
*Web sites and blogs*
Web site (research group): http://blogs.helsinki.fi/senpep-blog/
Web site (own teaching): http://www.helsinki.fi/people/pedro.aphalo/
Web site (using R in photobiology): http://www.r4photobiology.info/
------------------------------------------------------------------------
*Societies*
UV4Plants <http://www.uv4plants.org/> (communications officer), ESP 
<http://www.photobiology.eu/> (member) SEB <http://www.sebiology.org/> 
(member), BES <http://www.britishecologicalsociety.org/> (member), SPPS 
<http://www.spps.fi/> (member), SMS 
<http://www.metsatieteellinenseura.fi/english> (member), TUG 
<http://tug.org/> (member), FOAS <http://www.foastat.org/> (member).
------------------------------------------------------------------------

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Tue Jun 20 00:36:05 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Mon, 19 Jun 2017 18:36:05 -0400
Subject: [R-pkg-devel] Surprised by as.Date() and lubridate::today()
In-Reply-To: <4858b0cd-20ea-786e-92b2-541d20ccda15@helsinki.fi>
References: <4858b0cd-20ea-786e-92b2-541d20ccda15@helsinki.fi>
Message-ID: <9b1cdfcc-e74b-b906-74c7-7994fd204991@gmail.com>

On 19/06/2017 5:44 PM, Pedro J. Aphalo wrote:
> Hello,
>
> I was surprised first by the behaviour of lubridate::today(), and when I
> investigated further, by the behaviour of as.Date.POSIXlt(). Some
> examples follow:

You've written to the wrong place.  This list is for package developers.

If you think there's a problem in lubridate, you should write to its 
maintainer, which maintainer("lubridate") says is "Vitalie Spinu 
<spinuvit at gmail.com>".

If you think there's a problem with as.Date.POSIXlt, you should confirm 
that it happens in a clean session (lubridate might have replaced it), 
then report on the bug list, or on R-devel.

Duncan Murdoch

>
> library(lubridate)
> # today() does not behave as I expected
> tz(now(tzone = "EET"))
> tz(today(tzone = "EET")) # UTC!!
> today("America/New_York") == today("Asia/Tokyo") # FALSE with no warning
> (lack of warning is wrong?).
> tz(today("America/New_York")) # UTC!
> tz(today("Asia/Tokyo")) # UTC!
> ymd("2017-06-19", tz = "America/New_York") == ymd("2017-06-20", tz =
> "Asia/Tokyo") # FALSE with warning.
> tz(ymd("2017-06-19", tz = "America/New_York")) # OK
> tz(ymd("2017-06-20", tz = "Asia/Tokyo")) # OK
>
> # nothing unusual here
> tz(as.POSIXlt(now(), tz = "EET"))
> tz(as.POSIXlt(now(tzone = "EET")))
> tz(as.POSIXlt(now(tzone = "EET"), tz = "EET"))
> # but the unexpected seems to be the behaviour of as.Date.POSIXlt() as
> all returned values have tz set to "UTC"
> tz(as.Date(as.POSIXlt(now())))  # UTC!!
> tz(as.Date(as.POSIXlt(now(tzone = "EET"), tz = "EET"), tz = "EET"))  # UTC!!
> tz(as.Date(as.POSIXlt(now(), tz = "EET"), tz = "EET"))  # UTC!!
> tz(as.Date(as.POSIXlt(now()), tz = "EET"))  # UTC!!
>
> Is this as expected? (R 3.4.0 Windows 10 64, and R 3.3.3, with lubridate
> 1.6.0)
>
> Thanks in advance for any insight.
>
> Best regards,
>
> Pedro.
>


From thosjleeper at gmail.com  Tue Jun 20 17:49:55 2017
From: thosjleeper at gmail.com (Thomas J. Leeper)
Date: Tue, 20 Jun 2017 16:49:55 +0100
Subject: [R-pkg-devel] Spell checking
Message-ID: <CAOC91MSUs6guFNg4KV=+Gp8kC5d-WCfZuvJ6jQykbJvxvedLCg@mail.gmail.com>

I've now had two packages recently that had uncaught spelling errors
(i.e., nothing on my local R CMD check --as-cran) that emerged only
during CRAN submission. Is there a platform-specific component to the
CRAN spellchecker or an option that must be specified explicitly to
catch these?

Thanks,
-Thomas

Thomas J. Leeper


From mark.vanderloo at gmail.com  Tue Jun 20 18:12:12 2017
From: mark.vanderloo at gmail.com (Mark van der Loo)
Date: Tue, 20 Jun 2017 16:12:12 +0000
Subject: [R-pkg-devel] Spell checking
In-Reply-To: <CAOC91MSUs6guFNg4KV=+Gp8kC5d-WCfZuvJ6jQykbJvxvedLCg@mail.gmail.com>
References: <CAOC91MSUs6guFNg4KV=+Gp8kC5d-WCfZuvJ6jQykbJvxvedLCg@mail.gmail.com>
Message-ID: <CAOKDuOhX-iaY-ZHdOXStN5YrPEs5cHUFEP3QD1MutfgZ_Pk=jA@mail.gmail.com>

I had the same experience. Also recently I uploaded a pkg without a
vignette but with a vignette engine specified in the  DESCRIPTION. This
gave no error with R CMD check --as-cran (r-dev) but I did receive a
request to fix it.

-M

On Tue, Jun 20, 2017, 17:50 Thomas J. Leeper <thosjleeper at gmail.com> wrote:

> I've now had two packages recently that had uncaught spelling errors
> (i.e., nothing on my local R CMD check --as-cran) that emerged only
> during CRAN submission. Is there a platform-specific component to the
> CRAN spellchecker or an option that must be specified explicitly to
> catch these?
>
> Thanks,
> -Thomas
>
> Thomas J. Leeper
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Tue Jun 20 18:42:55 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 20 Jun 2017 12:42:55 -0400
Subject: [R-pkg-devel] Spell checking
In-Reply-To: <CAOC91MSUs6guFNg4KV=+Gp8kC5d-WCfZuvJ6jQykbJvxvedLCg@mail.gmail.com>
References: <CAOC91MSUs6guFNg4KV=+Gp8kC5d-WCfZuvJ6jQykbJvxvedLCg@mail.gmail.com>
Message-ID: <18e011e1-bd47-a157-efdf-a4d6ba9abbea@gmail.com>

On 20/06/2017 11:49 AM, Thomas J. Leeper wrote:
> I've now had two packages recently that had uncaught spelling errors
> (i.e., nothing on my local R CMD check --as-cran) that emerged only
> during CRAN submission. Is there a platform-specific component to the
> CRAN spellchecker or an option that must be specified explicitly to
> catch these?

I believe the spell checking is only done if you have the 
_R_CHECK_CRAN_INCOMING_USE_ASPELL_ environment variable set to "TRUE" 
(or some equivalent string), and have the aspell program available.

In general, a lot of information about CRAN checks is in the R Internals 
manual in section 8, "Tools", but this appears to have been overlooked.

Another possible explanation for differences between CRAN checks and 
yours (which I don't think applies here) is that CRAN normally uses a 
very recent build of R-devel; you may be using a release version that 
hasn't had the checks added.

This is another reason why it's good to check your package on 
WinBuilder:  it not only checks on Windows (which might not be your 
development platform), but it probably has the most recent CRAN checks 
activated.  I'm not sure if this is also true of R-hub, but it does 
offer checks on other platforms.

Duncan Murdoch


From thosjleeper at gmail.com  Wed Jun 21 12:45:41 2017
From: thosjleeper at gmail.com (Thomas J. Leeper)
Date: Wed, 21 Jun 2017 11:45:41 +0100
Subject: [R-pkg-devel] Spell checking
In-Reply-To: <18e011e1-bd47-a157-efdf-a4d6ba9abbea@gmail.com>
References: <CAOC91MSUs6guFNg4KV=+Gp8kC5d-WCfZuvJ6jQykbJvxvedLCg@mail.gmail.com>
 <18e011e1-bd47-a157-efdf-a4d6ba9abbea@gmail.com>
Message-ID: <CAOC91MSBwu4-muFUZ-M9o86EdZwgNH_BXOkTWD_R757cn05bcw@mail.gmail.com>

On Tue, Jun 20, 2017 at 5:42 PM, Duncan Murdoch
<murdoch.duncan at gmail.com> wrote:
> On 20/06/2017 11:49 AM, Thomas J. Leeper wrote:
>>
>> I've now had two packages recently that had uncaught spelling errors
>> (i.e., nothing on my local R CMD check --as-cran) that emerged only
>> during CRAN submission. Is there a platform-specific component to the
>> CRAN spellchecker or an option that must be specified explicitly to
>> catch these?
>
>
> I believe the spell checking is only done if you have the
> _R_CHECK_CRAN_INCOMING_USE_ASPELL_ environment variable set to "TRUE" (or
> some equivalent string), and have the aspell program available.
>
> In general, a lot of information about CRAN checks is in the R Internals
> manual in section 8, "Tools", but this appears to have been overlooked.
>
> Another possible explanation for differences between CRAN checks and yours
> (which I don't think applies here) is that CRAN normally uses a very recent
> build of R-devel; you may be using a release version that hasn't had the
> checks added.
>
> This is another reason why it's good to check your package on WinBuilder:
> it not only checks on Windows (which might not be your development
> platform), but it probably has the most recent CRAN checks activated.  I'm
> not sure if this is also true of R-hub, but it does offer checks on other
> platforms.
>
> Duncan Murdoch

Hi Duncan,

Thank you for this. That appears to be the issue (the environment
variable). Setting that to TRUE causes R CMD check --as-cran to fail
in the absence of aspell:

* checking CRAN incoming feasibility ...Error in aspell(files, filter
= list("dcf", ignore = ignore), control = control,  :

  No suitable spell-checker program found
Execution halted

I'm not sure if it should fail like that as opposed to generating an
Error, but regardless, thanks for the help in tracking it down.
Getting that envvar mentioned in "R Internals" would be very helpful.

Good suggestions, too, regarding Winbuilder.

Thanks,
-Thomas


From simon.barthelme at gipsa-lab.fr  Tue Jun 20 10:27:28 2017
From: simon.barthelme at gipsa-lab.fr (=?UTF-8?Q?Simon_Barthelm=c3=a9?=)
Date: Tue, 20 Jun 2017 10:27:28 +0200
Subject: [R-pkg-devel] problem with
	package_native_routine_registration_skeleton
Message-ID: <75fd9502-51fc-ed60-3b5d-a2e29d8ac7de@gipsa-lab.fr>

Dear list,

Is anybody else having problems with 
tools::package_native_routine_registration_skeleton?

 > tools::package_native_routine_registration_skeleton("~/Repos/imager")

Error in native_routine_registration_db_from_ff_call_db(calls, dir, 
character_only) :
   no native symbols were extracted

This used to work fine up until a few weeks ago, and I can't tell which 
update broke the function. Anybody else getting this?

Many thanks, best

Simon Barthelme


From mark.vanderloo at gmail.com  Thu Jun 22 09:33:49 2017
From: mark.vanderloo at gmail.com (Mark van der Loo)
Date: Thu, 22 Jun 2017 07:33:49 +0000
Subject: [R-pkg-devel] problem with
	package_native_routine_registration_skeleton
In-Reply-To: <75fd9502-51fc-ed60-3b5d-a2e29d8ac7de@gipsa-lab.fr>
References: <75fd9502-51fc-ed60-3b5d-a2e29d8ac7de@gipsa-lab.fr>
Message-ID: <CAOKDuOi4_ZdzpzLUVwjtDRO78HV2nbrvc222npok1uuMPbJ92A@mail.gmail.com>

I have had no problems recently (having updated a pkg or two with this over
the last couple of weeks). Your question is not reproducible so its hard to
help...

best,
Mark

Op wo 21 jun. 2017 om 23:46 schreef Simon Barthelm? <
simon.barthelme at gipsa-lab.fr>:

> Dear list,
>
> Is anybody else having problems with
> tools::package_native_routine_registration_skeleton?
>
>  > tools::package_native_routine_registration_skeleton("~/Repos/imager")
>
> Error in native_routine_registration_db_from_ff_call_db(calls, dir,
> character_only) :
>    no native symbols were extracted
>
> This used to work fine up until a few weeks ago, and I can't tell which
> update broke the function. Anybody else getting this?
>
> Many thanks, best
>
> Simon Barthelme
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From maechler at stat.math.ethz.ch  Thu Jun 22 09:57:41 2017
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Thu, 22 Jun 2017 09:57:41 +0200
Subject: [R-pkg-devel] problem
	with	package_native_routine_registration_skeleton
In-Reply-To: <CAOKDuOi4_ZdzpzLUVwjtDRO78HV2nbrvc222npok1uuMPbJ92A@mail.gmail.com>
References: <75fd9502-51fc-ed60-3b5d-a2e29d8ac7de@gipsa-lab.fr>
 <CAOKDuOi4_ZdzpzLUVwjtDRO78HV2nbrvc222npok1uuMPbJ92A@mail.gmail.com>
Message-ID: <22859.30837.146883.870069@stat.math.ethz.ch>

>>>>> Mark van der Loo <mark.vanderloo at gmail.com>
>>>>>     on Thu, 22 Jun 2017 07:33:49 +0000 writes:

    > I have had no problems recently (having updated a pkg or two with this over
    > the last couple of weeks). Your question is not reproducible so its hard to
    > help...

    > best,
    > Mark

    > Op wo 21 jun. 2017 om 23:46 schreef Simon Barthelm? <
    > simon.barthelme at gipsa-lab.fr>:

    >> Dear list,
    >> 
    >> Is anybody else having problems with
    >> tools::package_native_routine_registration_skeleton?
    >> 
    >> > tools::package_native_routine_registration_skeleton("~/Repos/imager")
    >> 
    >> Error in native_routine_registration_db_from_ff_call_db(calls, dir,
    >> character_only) :
    >> no native symbols were extracted

please carefully re-read the error message!

Hint :  What is the name of the first argument of that function,
        and what is the name of the 2nd one ?


	
    >> This used to work fine up until a few weeks ago, and I can't tell which
    >> update broke the function. Anybody else getting this?
    >> 
    >> Many thanks, best
    >> 
    >> Simon Barthelme


From maechler at stat.math.ethz.ch  Thu Jun 22 10:41:12 2017
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Thu, 22 Jun 2017 10:41:12 +0200
Subject: [R-pkg-devel]
	problem	with	package_native_routine_registration_skeleton
In-Reply-To: <22859.30837.146883.870069@stat.math.ethz.ch>
References: <75fd9502-51fc-ed60-3b5d-a2e29d8ac7de@gipsa-lab.fr>
 <CAOKDuOi4_ZdzpzLUVwjtDRO78HV2nbrvc222npok1uuMPbJ92A@mail.gmail.com>
 <22859.30837.146883.870069@stat.math.ethz.ch>
Message-ID: <22859.33448.894089.965729@stat.math.ethz.ch>

>>>>> Martin Maechler <maechler at stat.math.ethz.ch>
>>>>>     on Thu, 22 Jun 2017 09:57:41 +0200 writes:

>>>>> Mark van der Loo <mark.vanderloo at gmail.com>
>>>>>     on Thu, 22 Jun 2017 07:33:49 +0000 writes:

    >> I have had no problems recently (having updated a pkg or two with this over
    >> the last couple of weeks). Your question is not reproducible so its hard to
    >> help...

    >> best,
    >> Mark

    >> Op wo 21 jun. 2017 om 23:46 schreef Simon Barthelm? <
    >> simon.barthelme at gipsa-lab.fr>:

    >>> Dear list,
    >>> 
    >>> Is anybody else having problems with
    >>> tools::package_native_routine_registration_skeleton?
    >>> 
    >>> > tools::package_native_routine_registration_skeleton("~/Repos/imager")
    >>> 
    >>> Error in native_routine_registration_db_from_ff_call_db(calls, dir,
    >>> character_only) :
    >>> no native symbols were extracted

    > please carefully re-read the error message!

    > Hint :  What is the name of the first argument of that function,
    > and what is the name of the 2nd one ?

I'm sorry and do apologize: The above was not at all helpful.

'dir' _is_ the first argument of
package_native_routine_registration_skeleton()  and the error
message showed another function (with a similarly much much much
too long name, so nobody reads the name to an end).

Indeed, I get the same message as you when I use this on a
source package directory... though one that does already contain
everything perfect in the init.c file.

So maybe the function should not give an error but just
acknowledge that no *unregisterted* native symbols were found ?

Martin Maechler


    >>> This used to work fine up until a few weeks ago, and I can't tell which
    >>> update broke the function. Anybody else getting this?
    >>> 
    >>> Many thanks, best
    >>> 
    >>> Simon Barthelme


From maximilian.leodolter at gmail.com  Thu Jun 22 10:47:54 2017
From: maximilian.leodolter at gmail.com (Maximilian Leodolter)
Date: Thu, 22 Jun 2017 08:47:54 +0000
Subject: [R-pkg-devel] Problems with Notes for Package IncDTW
In-Reply-To: <CAMi3rCDh8YydR_PMWbne+=An2Tz08tymjaX3o9iezR2Euh_8jA@mail.gmail.com>
References: <CAMi3rCBHZ9Gr3Ywdjm-MALfn=3P-iJRF6-z3-io8xubkhF8Rmw@mail.gmail.com>
 <CAMi3rCDh8YydR_PMWbne+=An2Tz08tymjaX3o9iezR2Euh_8jA@mail.gmail.com>
Message-ID: <CAMi3rCB-2GVyYn0EQ5FnmTDGyG90FJAjpyUGO-KVs73hPtDL_A@mail.gmail.com>

Hello,

I would like to ask for your help. I want to contribute a package and fail
because of two Notes. Here is the temporary directory:
https://win-builder.r-project.org/incoming_pretest/170621_173212_IncDTW_010/


The first Note asks for spelling mistakes, which is a false positive. "DTW"
means Dynamic Time Warp and is a common abbreviation. "Sakoe" is a name of
an author of DTW. :

* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Maximilian Leodolter <maximilian.leodolter at gmail.com>'

New submission

Possibly mis-spelled words in DESCRIPTION:
  DTW (7:328)
  Sakoe (7:271)


I do not understand the meaning of the second Note, neither do I know how
to deal with it:

* checking compiled code ... NOTE

File 'IncDTW/libs/i386/IncDTW.dll':
  Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
File 'IncDTW/libs/x64/IncDTW.dll':
  Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'


Thank you. Any help is highly appreciated.

Best regards,

Maximilian Leodolter

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Thu Jun 22 12:35:36 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Thu, 22 Jun 2017 12:35:36 +0200
Subject: [R-pkg-devel] Problems with Notes for Package IncDTW
In-Reply-To: <CAMi3rCB-2GVyYn0EQ5FnmTDGyG90FJAjpyUGO-KVs73hPtDL_A@mail.gmail.com>
References: <CAMi3rCBHZ9Gr3Ywdjm-MALfn=3P-iJRF6-z3-io8xubkhF8Rmw@mail.gmail.com>
 <CAMi3rCDh8YydR_PMWbne+=An2Tz08tymjaX3o9iezR2Euh_8jA@mail.gmail.com>
 <CAMi3rCB-2GVyYn0EQ5FnmTDGyG90FJAjpyUGO-KVs73hPtDL_A@mail.gmail.com>
Message-ID: <2da1217d-7f39-4403-86a6-2305e1bfc735@statistik.tu-dortmund.de>



On 22.06.2017 10:47, Maximilian Leodolter wrote:
> Hello,
> 
> I would like to ask for your help. I want to contribute a package and fail
> because of two Notes. Here is the temporary directory:
> https://win-builder.r-project.org/incoming_pretest/170621_173212_IncDTW_010/
> 
> 
> The first Note asks for spelling mistakes, which is a false positive. "DTW"
> means Dynamic Time Warp and is a common abbreviation. "Sakoe" is a name of
> an author of DTW. :
> 
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: 'Maximilian Leodolter <maximilian.leodolter at gmail.com>'
> 
> New submission
> 
> Possibly mis-spelled words in DESCRIPTION:
>    DTW (7:328)
>    Sakoe (7:271)

This is OK, just submit without any changes here.

> 
> 
> I do not understand the meaning of the second Note, neither do I know how
> to deal with it:
> 
> * checking compiled code ... NOTE
> 
> File 'IncDTW/libs/i386/IncDTW.dll':
>    Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
> File 'IncDTW/libs/x64/IncDTW.dll':
>    Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'

Well, the full message is longer and says

"It is good practice to register native routines and to disable symbol
search.

See 'Writing portable packages' in the 'Writing R Extensions' manual."

And there is the answer.

Best,
Uwe Ligges




> 
> Thank you. Any help is highly appreciated.
> 
> Best regards,
> 
> Maximilian Leodolter
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From simon.barthelme at gipsa-lab.fr  Thu Jun 22 12:38:23 2017
From: simon.barthelme at gipsa-lab.fr (=?UTF-8?Q?Simon_Barthelm=c3=a9?=)
Date: Thu, 22 Jun 2017 12:38:23 +0200
Subject: [R-pkg-devel] problem with
 package_native_routine_registration_skeleton
In-Reply-To: <22859.33448.894089.965729@stat.math.ethz.ch>
References: <75fd9502-51fc-ed60-3b5d-a2e29d8ac7de@gipsa-lab.fr>
 <CAOKDuOi4_ZdzpzLUVwjtDRO78HV2nbrvc222npok1uuMPbJ92A@mail.gmail.com>
 <22859.30837.146883.870069@stat.math.ethz.ch>
 <22859.33448.894089.965729@stat.math.ethz.ch>
Message-ID: <594B9E1F.1090001@gipsa-lab.fr>

Dear Martin

OK, thanks, I see now. Yes, a warning saying that all symbols have been 
properly registered already would be easier to understand, I think. You 
might want to generate the output anyway, it can't hurt!

Best

Simon

On 22/06/2017 10:41, Martin Maechler wrote:
>>>>>> Martin Maechler <maechler at stat.math.ethz.ch>
>>>>>>      on Thu, 22 Jun 2017 09:57:41 +0200 writes:
>>>>>> Mark van der Loo <mark.vanderloo at gmail.com>
>>>>>>      on Thu, 22 Jun 2017 07:33:49 +0000 writes:
>      >> I have had no problems recently (having updated a pkg or two with this over
>      >> the last couple of weeks). Your question is not reproducible so its hard to
>      >> help...
>
>      >> best,
>      >> Mark
>
>      >> Op wo 21 jun. 2017 om 23:46 schreef Simon Barthelm? <
>      >> simon.barthelme at gipsa-lab.fr>:
>
>      >>> Dear list,
>      >>>
>      >>> Is anybody else having problems with
>      >>> tools::package_native_routine_registration_skeleton?
>      >>>
>      >>> > tools::package_native_routine_registration_skeleton("~/Repos/imager")
>      >>>
>      >>> Error in native_routine_registration_db_from_ff_call_db(calls, dir,
>      >>> character_only) :
>      >>> no native symbols were extracted
>
>      > please carefully re-read the error message!
>
>      > Hint :  What is the name of the first argument of that function,
>      > and what is the name of the 2nd one ?
>
> I'm sorry and do apologize: The above was not at all helpful.
>
> 'dir' _is_ the first argument of
> package_native_routine_registration_skeleton()  and the error
> message showed another function (with a similarly much much much
> too long name, so nobody reads the name to an end).
>
> Indeed, I get the same message as you when I use this on a
> source package directory... though one that does already contain
> everything perfect in the init.c file.
>
> So maybe the function should not give an error but just
> acknowledge that no *unregisterted* native symbols were found ?
>
> Martin Maechler
>
>
>      >>> This used to work fine up until a few weeks ago, and I can't tell which
>      >>> update broke the function. Anybody else getting this?
>      >>>
>      >>> Many thanks, best
>      >>>
>      >>> Simon Barthelme
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ligges at statistik.tu-dortmund.de  Thu Jun 22 16:36:47 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Thu, 22 Jun 2017 16:36:47 +0200
Subject: [R-pkg-devel] Package submission - Issue with pandoc in R CMD
 check
In-Reply-To: <22834.48852.136344.947957@max.eddelbuettel.com>
References: <01d2d583$Blat.v2.2.2$b6356e09@mail.statistik.tu-dortmund.de>
 <4d567883-51b1-3704-0d55-b30234a746fb@gmail.com>
 <af9d8208-7e91-e441-7c28-6688f7e10176@statistik.tu-dortmund.de>
 <4f455878-090f-1e0a-0c4d-69d03472ae9c@gmail.com>
 <97708b6f-afc3-a303-892a-11bc6fccd133@statistik.tu-dortmund.de>
 <fbaa2607-0266-bc5c-f098-d5fcdd96e0b7@gmail.com>
 <22834.47599.329490.850327@max.eddelbuettel.com>
 <22834.48852.136344.947957@max.eddelbuettel.com>
Message-ID: <07b6c144-56fe-0081-97fc-ef9742ed474d@statistik.tu-dortmund.de>

This should be resolved in general now.

Best,
Uwe Ligges



On 03.06.2017 15:51, Dirk Eddelbuettel wrote:
> 
> On 3 June 2017 at 08:30, Dirk Eddelbuettel wrote:
> |
> | On 27 May 2017 at 22:18, Emmanuel Blondel wrote:
> | | Dear Uwe, i clearly understand the CRAN team needs time on this. I have
> | | no problem in postponing on my side, and resubmit later next month.
> |
> | As the problem appears to be somewhat hard and rooted in two areas that are
> | difficult to effectuate change in (as in: "we" control neither the pandoc
> | binary, nor the img.shields.io webserver) I took a somewhat more pessimistic
> | view of coming changes and ... simply coded around the problem by
> |
> |   i)   caching a copy of the badge I needed in a new GitHub repository
> |
> |   ii)  enabling the web server feature of the repo
> |
> |   iii) reference that cached copy
> |
> | See the new repo 'badges' at
> |
> |   https://github.com/eddelbuettel/badges
> |
> | and a first use in my RcppArmadillo package
> |
> |   https://github.com/RcppCore/RcppArmadillo/blob/master/README.md
> |
> | which is currently simmering for already well over twenty-four hours at a low
> | temperature in the incoming area of our favourite repository.
> |
> | By using the cached copy a simple static file from a (working) server, all
> | issues with pandoc are avoided.  So far it only has "my default" license
> | badge, it would of course be trivial add others so PR away.
> 
> I should add that this works well when you only call to the license badge (or
> another static badge).
> 
> Another use case is to retrieve the code coverage badge, and that is a little
> trickier as one essentially turns of the on-demand calculation.  But to me it
> is still defensible to allow a CRAN submission, or until we get a better fix.
> 
> Dirk
>


From edd at debian.org  Thu Jun 22 17:02:35 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 22 Jun 2017 10:02:35 -0500
Subject: [R-pkg-devel] Package submission - Issue with pandoc in R CMD
 check
In-Reply-To: <07b6c144-56fe-0081-97fc-ef9742ed474d@statistik.tu-dortmund.de>
References: <01d2d583$Blat.v2.2.2$b6356e09@mail.statistik.tu-dortmund.de>
 <4d567883-51b1-3704-0d55-b30234a746fb@gmail.com>
 <af9d8208-7e91-e441-7c28-6688f7e10176@statistik.tu-dortmund.de>
 <4f455878-090f-1e0a-0c4d-69d03472ae9c@gmail.com>
 <97708b6f-afc3-a303-892a-11bc6fccd133@statistik.tu-dortmund.de>
 <fbaa2607-0266-bc5c-f098-d5fcdd96e0b7@gmail.com>
 <22834.47599.329490.850327@max.eddelbuettel.com>
 <22834.48852.136344.947957@max.eddelbuettel.com>
 <07b6c144-56fe-0081-97fc-ef9742ed474d@statistik.tu-dortmund.de>
Message-ID: <22859.56331.656347.678483@max.eddelbuettel.com>


On 22 June 2017 at 16:36, Uwe Ligges wrote:
| This should be resolved in general now.

I appreciate your work on this, as well Gabor's help in providing new binaries.

But correct me here if I wrong:  It still does not help with this issue as
long as _any other pandoc binary_ is called, correct?

I.e. when I run R CMD check at home on a standard Linux box, I still get an
error.  Unless I switch to an alternate source for the file to continue to
avoid that particular server, or unless I use an alternate pandoc binary.

So just thinking out aloud: Given that a key piece of R testing now depends
on a custom binary, should be we look into providing that binary?  Should the
call to pandoc utilize an 'R-supplied' pandoc version?

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From csardi.gabor at gmail.com  Thu Jun 22 17:23:16 2017
From: csardi.gabor at gmail.com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 22 Jun 2017 16:23:16 +0100
Subject: [R-pkg-devel] Package submission - Issue with pandoc in R CMD
	check
In-Reply-To: <22859.56331.656347.678483@max.eddelbuettel.com>
References: <01d2d583$Blat.v2.2.2$b6356e09@mail.statistik.tu-dortmund.de>
 <4d567883-51b1-3704-0d55-b30234a746fb@gmail.com>
 <af9d8208-7e91-e441-7c28-6688f7e10176@statistik.tu-dortmund.de>
 <4f455878-090f-1e0a-0c4d-69d03472ae9c@gmail.com>
 <97708b6f-afc3-a303-892a-11bc6fccd133@statistik.tu-dortmund.de>
 <fbaa2607-0266-bc5c-f098-d5fcdd96e0b7@gmail.com>
 <22834.47599.329490.850327@max.eddelbuettel.com>
 <22834.48852.136344.947957@max.eddelbuettel.com>
 <07b6c144-56fe-0081-97fc-ef9742ed474d@statistik.tu-dortmund.de>
 <22859.56331.656347.678483@max.eddelbuettel.com>
Message-ID: <CABtg=KnL9_yjv42od-YnHZNDBV-feto+m66+7_dfSx9vbFLqRA@mail.gmail.com>

So, along these lines, I was thinking if we could / should build a
pandoc R package, that could just pull the right binary at install
time. Would that make sense? It is a bit unusual, but I think a lot of
users would like it, and it would help standardizing pandoc versions
and usage.

The static binary is good for 64 bit Linux, and we also have
self-contained binaries for Windows and MacOS.

(The relevant links to the Docker containers and the binaries, in case
you are interested:
https://github.com/r-hub/pandoc-builders#readme
https://files.r-hub.io/pandoc/

Gabor

On Thu, Jun 22, 2017 at 4:02 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
>
> On 22 June 2017 at 16:36, Uwe Ligges wrote:
> | This should be resolved in general now.
>
> I appreciate your work on this, as well Gabor's help in providing new binaries.
>
> But correct me here if I wrong:  It still does not help with this issue as
> long as _any other pandoc binary_ is called, correct?
>
> I.e. when I run R CMD check at home on a standard Linux box, I still get an
> error.  Unless I switch to an alternate source for the file to continue to
> avoid that particular server, or unless I use an alternate pandoc binary.
>
> So just thinking out aloud: Given that a key piece of R testing now depends
> on a custom binary, should be we look into providing that binary?  Should the
> call to pandoc utilize an 'R-supplied' pandoc version?
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd at debian.org  Thu Jun 22 17:35:26 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 22 Jun 2017 10:35:26 -0500
Subject: [R-pkg-devel] Package submission - Issue with pandoc in R CMD
	check
In-Reply-To: <CABtg=KnL9_yjv42od-YnHZNDBV-feto+m66+7_dfSx9vbFLqRA@mail.gmail.com>
References: <01d2d583$Blat.v2.2.2$b6356e09@mail.statistik.tu-dortmund.de>
 <4d567883-51b1-3704-0d55-b30234a746fb@gmail.com>
 <af9d8208-7e91-e441-7c28-6688f7e10176@statistik.tu-dortmund.de>
 <4f455878-090f-1e0a-0c4d-69d03472ae9c@gmail.com>
 <97708b6f-afc3-a303-892a-11bc6fccd133@statistik.tu-dortmund.de>
 <fbaa2607-0266-bc5c-f098-d5fcdd96e0b7@gmail.com>
 <22834.47599.329490.850327@max.eddelbuettel.com>
 <22834.48852.136344.947957@max.eddelbuettel.com>
 <07b6c144-56fe-0081-97fc-ef9742ed474d@statistik.tu-dortmund.de>
 <22859.56331.656347.678483@max.eddelbuettel.com>
 <CABtg=KnL9_yjv42od-YnHZNDBV-feto+m66+7_dfSx9vbFLqRA@mail.gmail.com>
Message-ID: <22859.58302.612047.587801@max.eddelbuettel.com>


On 22 June 2017 at 16:23, G?bor Cs?rdi wrote:
| So, along these lines, I was thinking if we could / should build a
| pandoc R package, that could just pull the right binary at install
| time. Would that make sense? It is a bit unusual, but I think a lot of
| users would like it, and it would help standardizing pandoc versions
| and usage.

Exactly.  That is pretty much what Christoph and I do for x13binary to
provide the (also free but nuisance to build) x13ashtml binaries.

Here x13binary is a CRAN package utilizing a GitHub repo x13prebuilt
containing those builds, and "shielding" the binary.

Other CRAN packages such as seasonal then just depend on x13binary and only
see automagic provision of binaries --- replacing and old scheme of manual
download and environment variable settings.  Much better now.
 
| The static binary is good for 64 bit Linux, and we also have
| self-contained binaries for Windows and MacOS.
| 
| (The relevant links to the Docker containers and the binaries, in case
| you are interested:
| https://github.com/r-hub/pandoc-builders#readme
| https://files.r-hub.io/pandoc/

Yes, I saw those when you tweeted about it.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ligges at statistik.tu-dortmund.de  Thu Jun 22 18:35:20 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Thu, 22 Jun 2017 18:35:20 +0200
Subject: [R-pkg-devel] Package submission - Issue with pandoc in R CMD
 check
In-Reply-To: <22859.58302.612047.587801@max.eddelbuettel.com>
References: <01d2d583$Blat.v2.2.2$b6356e09@mail.statistik.tu-dortmund.de>
 <4d567883-51b1-3704-0d55-b30234a746fb@gmail.com>
 <af9d8208-7e91-e441-7c28-6688f7e10176@statistik.tu-dortmund.de>
 <4f455878-090f-1e0a-0c4d-69d03472ae9c@gmail.com>
 <97708b6f-afc3-a303-892a-11bc6fccd133@statistik.tu-dortmund.de>
 <fbaa2607-0266-bc5c-f098-d5fcdd96e0b7@gmail.com>
 <22834.47599.329490.850327@max.eddelbuettel.com>
 <22834.48852.136344.947957@max.eddelbuettel.com>
 <07b6c144-56fe-0081-97fc-ef9742ed474d@statistik.tu-dortmund.de>
 <22859.56331.656347.678483@max.eddelbuettel.com>
 <CABtg=KnL9_yjv42od-YnHZNDBV-feto+m66+7_dfSx9vbFLqRA@mail.gmail.com>
 <22859.58302.612047.587801@max.eddelbuettel.com>
Message-ID: <238c1474-fd3c-1d32-eacc-08d832a9812f@statistik.tu-dortmund.de>

On 22.06.2017 17:35, Dirk Eddelbuettel wrote:
> 
> On 22 June 2017 at 16:23, G?bor Cs?rdi wrote:
> | So, along these lines, I was thinking if we could / should build a
> | pandoc R package, that could just pull the right binary at install
> | time. 

And drops it in the package? Then we cannot provide binaries for these 
package on CRAN unless we also copy the pandoc sources to CRAN, or do I 
get this wrong?

Best,
Uwe


> Would that make sense? It is a bit unusual, but I think a lot of
> | users would like it, and it would help standardizing pandoc versions
> | and usage.
> 
> Exactly.  That is pretty much what Christoph and I do for x13binary to
> provide the (also free but nuisance to build) x13ashtml binaries.
> 
> Here x13binary is a CRAN package utilizing a GitHub repo x13prebuilt
> containing those builds, and "shielding" the binary.
> 
> Other CRAN packages such as seasonal then just depend on x13binary and only
> see automagic provision of binaries --- replacing and old scheme of manual
> download and environment variable settings.  Much better now.
>   
> | The static binary is good for 64 bit Linux, and we also have
> | self-contained binaries for Windows and MacOS.
> |
> | (The relevant links to the Docker containers and the binaries, in case
> | you are interested:
> | https://github.com/r-hub/pandoc-builders#readme
> | https://files.r-hub.io/pandoc/
> 
> Yes, I saw those when you tweeted about it.
> 
> Dirk
>


From csardi.gabor at gmail.com  Thu Jun 22 18:57:43 2017
From: csardi.gabor at gmail.com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 22 Jun 2017 17:57:43 +0100
Subject: [R-pkg-devel] Package submission - Issue with pandoc in R CMD
	check
In-Reply-To: <238c1474-fd3c-1d32-eacc-08d832a9812f@statistik.tu-dortmund.de>
References: <01d2d583$Blat.v2.2.2$b6356e09@mail.statistik.tu-dortmund.de>
 <4d567883-51b1-3704-0d55-b30234a746fb@gmail.com>
 <af9d8208-7e91-e441-7c28-6688f7e10176@statistik.tu-dortmund.de>
 <4f455878-090f-1e0a-0c4d-69d03472ae9c@gmail.com>
 <97708b6f-afc3-a303-892a-11bc6fccd133@statistik.tu-dortmund.de>
 <fbaa2607-0266-bc5c-f098-d5fcdd96e0b7@gmail.com>
 <22834.47599.329490.850327@max.eddelbuettel.com>
 <22834.48852.136344.947957@max.eddelbuettel.com>
 <07b6c144-56fe-0081-97fc-ef9742ed474d@statistik.tu-dortmund.de>
 <22859.56331.656347.678483@max.eddelbuettel.com>
 <CABtg=KnL9_yjv42od-YnHZNDBV-feto+m66+7_dfSx9vbFLqRA@mail.gmail.com>
 <22859.58302.612047.587801@max.eddelbuettel.com>
 <238c1474-fd3c-1d32-eacc-08d832a9812f@statistik.tu-dortmund.de>
Message-ID: <CABtg=KkMrrAZ0y_Ck+-Lskh8WHT61Zs9VZS1Qkbce=qkF_-FLA@mail.gmail.com>

On Thu, Jun 22, 2017 at 5:35 PM, Uwe Ligges
<ligges at statistik.tu-dortmund.de> wrote:
> On 22.06.2017 17:35, Dirk Eddelbuettel wrote:
>>
>>
>> On 22 June 2017 at 16:23, G?bor Cs?rdi wrote:
>> | So, along these lines, I was thinking if we could / should build a
>> | pandoc R package, that could just pull the right binary at install
>> | time.
>
>
> And drops it in the package? Then we cannot provide binaries for these
> package on CRAN unless we also copy the pandoc sources to CRAN, or do I get
> this wrong?

Is this a CRAN issue or a GPL issue? Several packages are actually
doing this already. E.g. all the windows binary packages that link to
static library, like the XML package to libxml2.
AFAIK the windows binary for XML contains a binary build of libxml2,
and I don't think the libxml2 sources are included anywhere in the XML
package.

I can't say anything for CRAN, but for the GPL, I think we are fine.

But if you think we are not, then yes, we can just put the pandoc
sources in the source package.

Gabor

> Best,
> Uwe
>
>
>
>> Would that make sense? It is a bit unusual, but I think a lot of
>> | users would like it, and it would help standardizing pandoc versions
>> | and usage.
>>
>> Exactly.  That is pretty much what Christoph and I do for x13binary to
>> provide the (also free but nuisance to build) x13ashtml binaries.
>>
>> Here x13binary is a CRAN package utilizing a GitHub repo x13prebuilt
>> containing those builds, and "shielding" the binary.
>>
>> Other CRAN packages such as seasonal then just depend on x13binary and
>> only
>> see automagic provision of binaries --- replacing and old scheme of manual
>> download and environment variable settings.  Much better now.
>>   | The static binary is good for 64 bit Linux, and we also have
>> | self-contained binaries for Windows and MacOS.
>> |
>> | (The relevant links to the Docker containers and the binaries, in case
>> | you are interested:
>> | https://github.com/r-hub/pandoc-builders#readme
>> | https://files.r-hub.io/pandoc/
>>
>> Yes, I saw those when you tweeted about it.
>>
>> Dirk
>>
>
>


From charlie at stat.umn.edu  Fri Jun 23 16:46:03 2017
From: charlie at stat.umn.edu (Charles Geyer)
Date: Fri, 23 Jun 2017 09:46:03 -0500
Subject: [R-pkg-devel] Problems with Notes for Package IncDTW
Message-ID: <CAKctRd2esiy9cRQepumYAxq9C_EdVeq7uT9z5ruXX5TPx3KVYA@mail.gmail.com>

I modified a toy package I use for teaching to do the registration right
(to serve as an example). See
https://github.com/cjgeyer/foo/tree/master/package where packages foo and
fooRegister do the same thing except for registration.  Diffing them shows
what is needed.
-- 
Charles Geyer
Professor, School of Statistics
Resident Fellow, Minnesota Center for Philosophy of Science
University of Minnesota
charlie at stat.umn.edu

	[[alternative HTML version deleted]]


From cdetermanjr at gmail.com  Mon Jun 26 18:28:29 2017
From: cdetermanjr at gmail.com (Charles Determan)
Date: Mon, 26 Jun 2017 11:28:29 -0500
Subject: [R-pkg-devel] Exporting S3 methods for base generics
Message-ID: <CAKxd1KOWWk_tThGrq9vT5GCtdcWPq-M_awhMF4+-zOad5Z5VSw@mail.gmail.com>

Greetings R users,

I was wondering how others are exporting S3 methods in their packages when
the generic is in 'base'.  For example, let's say I want to export a new
pmax method.  The only way I have found to get this to work is by
redefining the function with 'UseMethod' and setting the default method.

#' @export
pmax <- function(...){ UseMethod("pmax") }
#' @export
pmax.default <- function(..., na.rm=FALSE){ base::pmax(..., na.rm=FALSE) }

setClass("myclass")

#' @export
pmax.myclass <- function(..., na.rm = FALSE){
    print('myclass pmax!')
}

Although this works, I get the 'warning'

The following objects are masked from 'package:base':

    pmax


I would like the package build and loading to be as clean as possible but
if this is acceptable and not considered a problem I will let it go.  It
just seems odd that one would to redefine a the generic when in states in
the docs for 'pmax' that it will also work on classed S3 objects but
perhaps I am reading this incorrectly.

Thanks,
Charles

	[[alternative HTML version deleted]]


From Joris.Meys at ugent.be  Mon Jun 26 19:10:53 2017
From: Joris.Meys at ugent.be (Joris Meys)
Date: Mon, 26 Jun 2017 19:10:53 +0200
Subject: [R-pkg-devel] Exporting S3 methods for base generics
In-Reply-To: <CAKxd1KOWWk_tThGrq9vT5GCtdcWPq-M_awhMF4+-zOad5Z5VSw@mail.gmail.com>
References: <CAKxd1KOWWk_tThGrq9vT5GCtdcWPq-M_awhMF4+-zOad5Z5VSw@mail.gmail.com>
Message-ID: <CAO1zAVbrEgSf3nXUqzKoQZ1kq3yz=bpyg8SRwSBQ9sX4fc5X2g@mail.gmail.com>

Hi Charles,

if a generic exists already in the base, you only have to export the actual
S3 method. Your problem is that base::pmax() is not a generic S3 function.
So R gives you the correct warning: the S3 generic in your package will
always mask the base pmax function. And that's not really a problem,
especially since you ensured the base functionality with your default
method.

If you want to avoid that warning, use S4.

#' @rdname
setGeneric("pmax")

#' @rdname pmax
#' @method pmax myclass
#' @export
setMethod("pmax",
                  "myclass",
                  function(...){
                     # do some stuff
})

More information on how to deal with dots can be found on the help page
?dotsMethods.

If you have a generic in the base package (eg plot is such one), you only
define the method and use:

#' @export
plot.myclass <- function(x, y, ...){
   # do some more stuff
}

Cheers
Joris



On Mon, Jun 26, 2017 at 6:28 PM, Charles Determan <cdetermanjr at gmail.com>
wrote:

> Greetings R users,
>
> I was wondering how others are exporting S3 methods in their packages when
> the generic is in 'base'.  For example, let's say I want to export a new
> pmax method.  The only way I have found to get this to work is by
> redefining the function with 'UseMethod' and setting the default method.
>
> #' @export
> pmax <- function(...){ UseMethod("pmax") }
> #' @export
> pmax.default <- function(..., na.rm=FALSE){ base::pmax(..., na.rm=FALSE) }
>
> setClass("myclass")
>
> #' @export
> pmax.myclass <- function(..., na.rm = FALSE){
>     print('myclass pmax!')
> }
>
> Although this works, I get the 'warning'
>
> The following objects are masked from 'package:base':
>
>     pmax
>
>
> I would like the package build and loading to be as clean as possible but
> if this is acceptable and not considered a problem I will let it go.  It
> just seems odd that one would to redefine a the generic when in states in
> the docs for 'pmax' that it will also work on classed S3 objects but
> perhaps I am reading this incorrectly.
>
> Thanks,
> Charles
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Joris Meys
Statistical consultant

Ghent University
Faculty of Bioscience Engineering
Department of Mathematical Modelling, Statistics and Bio-Informatics

tel : +32 9 264 59 87
Joris.Meys at Ugent.be
-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From cdetermanjr at gmail.com  Mon Jun 26 19:20:43 2017
From: cdetermanjr at gmail.com (Charles Determan)
Date: Mon, 26 Jun 2017 12:20:43 -0500
Subject: [R-pkg-devel] Exporting S3 methods for base generics
In-Reply-To: <CAO1zAVbrEgSf3nXUqzKoQZ1kq3yz=bpyg8SRwSBQ9sX4fc5X2g@mail.gmail.com>
References: <CAKxd1KOWWk_tThGrq9vT5GCtdcWPq-M_awhMF4+-zOad5Z5VSw@mail.gmail.com>
 <CAO1zAVbrEgSf3nXUqzKoQZ1kq3yz=bpyg8SRwSBQ9sX4fc5X2g@mail.gmail.com>
Message-ID: <CAKxd1KOe-O=cBzNa2nSCB4XV3SkwKq7_8Qgt2Xv0oPPVy2f_-w@mail.gmail.com>

Thanks for the reply Joris, although I am not sure what I could be doing
wrong.  I implement exactly the lines you show and yet I just get the
following error when I call 'pmax' on the class.

> pmax(x, 0)

Error in mmm < each :
  comparison (3) is possible only for atomic and list types
In addition: Warning message:
In is.na(mmm) : is.na() applied to non-(list or vector) of type 'S4'

Regards,
Charles

On Mon, Jun 26, 2017 at 12:10 PM, Joris Meys <Joris.Meys at ugent.be> wrote:

> Hi Charles,
>
> if a generic exists already in the base, you only have to export the
> actual S3 method. Your problem is that base::pmax() is not a generic S3
> function. So R gives you the correct warning: the S3 generic in your
> package will always mask the base pmax function. And that's not really a
> problem, especially since you ensured the base functionality with your
> default method.
>
> If you want to avoid that warning, use S4.
>
> #' @rdname
> setGeneric("pmax")
>
> #' @rdname pmax
> #' @method pmax myclass
> #' @export
> setMethod("pmax",
>                   "myclass",
>                   function(...){
>                      # do some stuff
> })
>
> More information on how to deal with dots can be found on the help page
> ?dotsMethods.
>
> If you have a generic in the base package (eg plot is such one), you only
> define the method and use:
>
> #' @export
> plot.myclass <- function(x, y, ...){
>    # do some more stuff
> }
>
> Cheers
> Joris
>
>
>
> On Mon, Jun 26, 2017 at 6:28 PM, Charles Determan <cdetermanjr at gmail.com>
> wrote:
>
>> Greetings R users,
>>
>> I was wondering how others are exporting S3 methods in their packages when
>> the generic is in 'base'.  For example, let's say I want to export a new
>> pmax method.  The only way I have found to get this to work is by
>> redefining the function with 'UseMethod' and setting the default method.
>>
>> #' @export
>> pmax <- function(...){ UseMethod("pmax") }
>> #' @export
>> pmax.default <- function(..., na.rm=FALSE){ base::pmax(..., na.rm=FALSE) }
>>
>> setClass("myclass")
>>
>> #' @export
>> pmax.myclass <- function(..., na.rm = FALSE){
>>     print('myclass pmax!')
>> }
>>
>> Although this works, I get the 'warning'
>>
>> The following objects are masked from 'package:base':
>>
>>     pmax
>>
>>
>> I would like the package build and loading to be as clean as possible but
>> if this is acceptable and not considered a problem I will let it go.  It
>> just seems odd that one would to redefine a the generic when in states in
>> the docs for 'pmax' that it will also work on classed S3 objects but
>> perhaps I am reading this incorrectly.
>>
>> Thanks,
>> Charles
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>
>
> --
> Joris Meys
> Statistical consultant
>
> Ghent University
> Faculty of Bioscience Engineering
> Department of Mathematical Modelling, Statistics and Bio-Informatics
>
> tel : +32 9 264 59 87 <+32%209%20264%2059%2087>
> Joris.Meys at Ugent.be
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>

	[[alternative HTML version deleted]]


From Joris.Meys at ugent.be  Mon Jun 26 19:32:36 2017
From: Joris.Meys at ugent.be (Joris Meys)
Date: Mon, 26 Jun 2017 19:32:36 +0200
Subject: [R-pkg-devel] Exporting S3 methods for base generics
In-Reply-To: <CAKxd1KOe-O=cBzNa2nSCB4XV3SkwKq7_8Qgt2Xv0oPPVy2f_-w@mail.gmail.com>
References: <CAKxd1KOWWk_tThGrq9vT5GCtdcWPq-M_awhMF4+-zOad5Z5VSw@mail.gmail.com>
 <CAO1zAVbrEgSf3nXUqzKoQZ1kq3yz=bpyg8SRwSBQ9sX4fc5X2g@mail.gmail.com>
 <CAKxd1KOe-O=cBzNa2nSCB4XV3SkwKq7_8Qgt2Xv0oPPVy2f_-w@mail.gmail.com>
Message-ID: <CAO1zAVZ-iNkof4KAA=GJeY2dXZX=04fA256S6e2Vxt+dwUNWsA@mail.gmail.com>

Hi Charles,

my mistake. I forgot that pmax has an extra argument na.rm. I'm surprised
you could define the method, as this normally should return an error from
conformMethod().

So:
#' @rdname pmax
setGeneric("pmax", signature = "...")

should work. I've used this myself in quite a number of packages.

Cheers
Joris

On Mon, Jun 26, 2017 at 7:20 PM, Charles Determan <cdetermanjr at gmail.com>
wrote:

> Thanks for the reply Joris, although I am not sure what I could be doing
> wrong.  I implement exactly the lines you show and yet I just get the
> following error when I call 'pmax' on the class.
>
> > pmax(x, 0)
>
> Error in mmm < each :
>   comparison (3) is possible only for atomic and list types
> In addition: Warning message:
> In is.na(mmm) : is.na() applied to non-(list or vector) of type 'S4'
>
> Regards,
> Charles
>
> On Mon, Jun 26, 2017 at 12:10 PM, Joris Meys <Joris.Meys at ugent.be> wrote:
>
>> Hi Charles,
>>
>> if a generic exists already in the base, you only have to export the
>> actual S3 method. Your problem is that base::pmax() is not a generic S3
>> function. So R gives you the correct warning: the S3 generic in your
>> package will always mask the base pmax function. And that's not really a
>> problem, especially since you ensured the base functionality with your
>> default method.
>>
>> If you want to avoid that warning, use S4.
>>
>> #' @rdname
>> setGeneric("pmax")
>>
>> #' @rdname pmax
>> #' @method pmax myclass
>> #' @export
>> setMethod("pmax",
>>                   "myclass",
>>                   function(...){
>>                      # do some stuff
>> })
>>
>> More information on how to deal with dots can be found on the help page
>> ?dotsMethods.
>>
>> If you have a generic in the base package (eg plot is such one), you only
>> define the method and use:
>>
>> #' @export
>> plot.myclass <- function(x, y, ...){
>>    # do some more stuff
>> }
>>
>> Cheers
>> Joris
>>
>>
>>
>> On Mon, Jun 26, 2017 at 6:28 PM, Charles Determan <cdetermanjr at gmail.com>
>> wrote:
>>
>>> Greetings R users,
>>>
>>> I was wondering how others are exporting S3 methods in their packages
>>> when
>>> the generic is in 'base'.  For example, let's say I want to export a new
>>> pmax method.  The only way I have found to get this to work is by
>>> redefining the function with 'UseMethod' and setting the default method.
>>>
>>> #' @export
>>> pmax <- function(...){ UseMethod("pmax") }
>>> #' @export
>>> pmax.default <- function(..., na.rm=FALSE){ base::pmax(..., na.rm=FALSE)
>>> }
>>>
>>> setClass("myclass")
>>>
>>> #' @export
>>> pmax.myclass <- function(..., na.rm = FALSE){
>>>     print('myclass pmax!')
>>> }
>>>
>>> Although this works, I get the 'warning'
>>>
>>> The following objects are masked from 'package:base':
>>>
>>>     pmax
>>>
>>>
>>> I would like the package build and loading to be as clean as possible but
>>> if this is acceptable and not considered a problem I will let it go.  It
>>> just seems odd that one would to redefine a the generic when in states in
>>> the docs for 'pmax' that it will also work on classed S3 objects but
>>> perhaps I am reading this incorrectly.
>>>
>>> Thanks,
>>> Charles
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>>
>>
>> --
>> Joris Meys
>> Statistical consultant
>>
>> Ghent University
>> Faculty of Bioscience Engineering
>> Department of Mathematical Modelling, Statistics and Bio-Informatics
>>
>> tel : +32 9 264 59 87 <+32%209%20264%2059%2087>
>> Joris.Meys at Ugent.be
>> -------------------------------
>> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>>
>
>


-- 
Joris Meys
Statistical consultant

Ghent University
Faculty of Bioscience Engineering
Department of Mathematical Modelling, Statistics and Bio-Informatics

tel : +32 9 264 59 87
Joris.Meys at Ugent.be
-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From cdetermanjr at gmail.com  Mon Jun 26 19:42:06 2017
From: cdetermanjr at gmail.com (Charles Determan)
Date: Mon, 26 Jun 2017 12:42:06 -0500
Subject: [R-pkg-devel] Exporting S3 methods for base generics
In-Reply-To: <CAO1zAVZ-iNkof4KAA=GJeY2dXZX=04fA256S6e2Vxt+dwUNWsA@mail.gmail.com>
References: <CAKxd1KOWWk_tThGrq9vT5GCtdcWPq-M_awhMF4+-zOad5Z5VSw@mail.gmail.com>
 <CAO1zAVbrEgSf3nXUqzKoQZ1kq3yz=bpyg8SRwSBQ9sX4fc5X2g@mail.gmail.com>
 <CAKxd1KOe-O=cBzNa2nSCB4XV3SkwKq7_8Qgt2Xv0oPPVy2f_-w@mail.gmail.com>
 <CAO1zAVZ-iNkof4KAA=GJeY2dXZX=04fA256S6e2Vxt+dwUNWsA@mail.gmail.com>
Message-ID: <CAKxd1KNM2Ue3KJh3pQ5S8_0K6u7r9xiZSWh_MLpGffYR_SWF8Q@mail.gmail.com>

Could you point to one of these packages you refer to?  I'm still having
problems and not sure why at the moment.

Thanks

On Mon, Jun 26, 2017 at 12:32 PM, Joris Meys <Joris.Meys at ugent.be> wrote:

> Hi Charles,
>
> my mistake. I forgot that pmax has an extra argument na.rm. I'm surprised
> you could define the method, as this normally should return an error from
> conformMethod().
>
> So:
> #' @rdname pmax
> setGeneric("pmax", signature = "...")
>
> should work. I've used this myself in quite a number of packages.
>
> Cheers
> Joris
>
> On Mon, Jun 26, 2017 at 7:20 PM, Charles Determan <cdetermanjr at gmail.com>
> wrote:
>
>> Thanks for the reply Joris, although I am not sure what I could be doing
>> wrong.  I implement exactly the lines you show and yet I just get the
>> following error when I call 'pmax' on the class.
>>
>> > pmax(x, 0)
>>
>> Error in mmm < each :
>>   comparison (3) is possible only for atomic and list types
>> In addition: Warning message:
>> In is.na(mmm) : is.na() applied to non-(list or vector) of type 'S4'
>>
>> Regards,
>> Charles
>>
>> On Mon, Jun 26, 2017 at 12:10 PM, Joris Meys <Joris.Meys at ugent.be> wrote:
>>
>>> Hi Charles,
>>>
>>> if a generic exists already in the base, you only have to export the
>>> actual S3 method. Your problem is that base::pmax() is not a generic S3
>>> function. So R gives you the correct warning: the S3 generic in your
>>> package will always mask the base pmax function. And that's not really a
>>> problem, especially since you ensured the base functionality with your
>>> default method.
>>>
>>> If you want to avoid that warning, use S4.
>>>
>>> #' @rdname
>>> setGeneric("pmax")
>>>
>>> #' @rdname pmax
>>> #' @method pmax myclass
>>> #' @export
>>> setMethod("pmax",
>>>                   "myclass",
>>>                   function(...){
>>>                      # do some stuff
>>> })
>>>
>>> More information on how to deal with dots can be found on the help page
>>> ?dotsMethods.
>>>
>>> If you have a generic in the base package (eg plot is such one), you
>>> only define the method and use:
>>>
>>> #' @export
>>> plot.myclass <- function(x, y, ...){
>>>    # do some more stuff
>>> }
>>>
>>> Cheers
>>> Joris
>>>
>>>
>>>
>>> On Mon, Jun 26, 2017 at 6:28 PM, Charles Determan <cdetermanjr at gmail.com
>>> > wrote:
>>>
>>>> Greetings R users,
>>>>
>>>> I was wondering how others are exporting S3 methods in their packages
>>>> when
>>>> the generic is in 'base'.  For example, let's say I want to export a new
>>>> pmax method.  The only way I have found to get this to work is by
>>>> redefining the function with 'UseMethod' and setting the default method.
>>>>
>>>> #' @export
>>>> pmax <- function(...){ UseMethod("pmax") }
>>>> #' @export
>>>> pmax.default <- function(..., na.rm=FALSE){ base::pmax(...,
>>>> na.rm=FALSE) }
>>>>
>>>> setClass("myclass")
>>>>
>>>> #' @export
>>>> pmax.myclass <- function(..., na.rm = FALSE){
>>>>     print('myclass pmax!')
>>>> }
>>>>
>>>> Although this works, I get the 'warning'
>>>>
>>>> The following objects are masked from 'package:base':
>>>>
>>>>     pmax
>>>>
>>>>
>>>> I would like the package build and loading to be as clean as possible
>>>> but
>>>> if this is acceptable and not considered a problem I will let it go.  It
>>>> just seems odd that one would to redefine a the generic when in states
>>>> in
>>>> the docs for 'pmax' that it will also work on classed S3 objects but
>>>> perhaps I am reading this incorrectly.
>>>>
>>>> Thanks,
>>>> Charles
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>>
>>>
>>> --
>>> Joris Meys
>>> Statistical consultant
>>>
>>> Ghent University
>>> Faculty of Bioscience Engineering
>>> Department of Mathematical Modelling, Statistics and Bio-Informatics
>>>
>>> tel : +32 9 264 59 87 <+32%209%20264%2059%2087>
>>> Joris.Meys at Ugent.be
>>> -------------------------------
>>> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>>>
>>
>>
>
>
> --
> Joris Meys
> Statistical consultant
>
> Ghent University
> Faculty of Bioscience Engineering
> Department of Mathematical Modelling, Statistics and Bio-Informatics
>
> tel : +32 9 264 59 87 <+32%209%20264%2059%2087>
> Joris.Meys at Ugent.be
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>

	[[alternative HTML version deleted]]


From cdetermanjr at gmail.com  Mon Jun 26 19:56:15 2017
From: cdetermanjr at gmail.com (Charles Determan)
Date: Mon, 26 Jun 2017 12:56:15 -0500
Subject: [R-pkg-devel] Exporting S3 methods for base generics
In-Reply-To: <CAKxd1KNM2Ue3KJh3pQ5S8_0K6u7r9xiZSWh_MLpGffYR_SWF8Q@mail.gmail.com>
References: <CAKxd1KOWWk_tThGrq9vT5GCtdcWPq-M_awhMF4+-zOad5Z5VSw@mail.gmail.com>
 <CAO1zAVbrEgSf3nXUqzKoQZ1kq3yz=bpyg8SRwSBQ9sX4fc5X2g@mail.gmail.com>
 <CAKxd1KOe-O=cBzNa2nSCB4XV3SkwKq7_8Qgt2Xv0oPPVy2f_-w@mail.gmail.com>
 <CAO1zAVZ-iNkof4KAA=GJeY2dXZX=04fA256S6e2Vxt+dwUNWsA@mail.gmail.com>
 <CAKxd1KNM2Ue3KJh3pQ5S8_0K6u7r9xiZSWh_MLpGffYR_SWF8Q@mail.gmail.com>
Message-ID: <CAKxd1KOVZrSkf9rPsQ_BefvW12Ps_mNxb7jkAyr_HFCFO6LBtA@mail.gmail.com>

Ah, I see now.  I came across this previous post (
http://r.789695.n4.nabble.com/override-pmin-pmax-for-my-own-matrix-td4715903.html)
which mentioned the caveat that all the elements passed to ... must be the
same.  When I pass two of the same class it works but I believe I will need
to go back to the S3 if I want different classes passed to the call.

Charles

On Mon, Jun 26, 2017 at 12:42 PM, Charles Determan <cdetermanjr at gmail.com>
wrote:

> Could you point to one of these packages you refer to?  I'm still having
> problems and not sure why at the moment.
>
> Thanks
>
> On Mon, Jun 26, 2017 at 12:32 PM, Joris Meys <Joris.Meys at ugent.be> wrote:
>
>> Hi Charles,
>>
>> my mistake. I forgot that pmax has an extra argument na.rm. I'm surprised
>> you could define the method, as this normally should return an error from
>> conformMethod().
>>
>> So:
>> #' @rdname pmax
>> setGeneric("pmax", signature = "...")
>>
>> should work. I've used this myself in quite a number of packages.
>>
>> Cheers
>> Joris
>>
>> On Mon, Jun 26, 2017 at 7:20 PM, Charles Determan <cdetermanjr at gmail.com>
>> wrote:
>>
>>> Thanks for the reply Joris, although I am not sure what I could be doing
>>> wrong.  I implement exactly the lines you show and yet I just get the
>>> following error when I call 'pmax' on the class.
>>>
>>> > pmax(x, 0)
>>>
>>> Error in mmm < each :
>>>   comparison (3) is possible only for atomic and list types
>>> In addition: Warning message:
>>> In is.na(mmm) : is.na() applied to non-(list or vector) of type 'S4'
>>>
>>> Regards,
>>> Charles
>>>
>>> On Mon, Jun 26, 2017 at 12:10 PM, Joris Meys <Joris.Meys at ugent.be>
>>> wrote:
>>>
>>>> Hi Charles,
>>>>
>>>> if a generic exists already in the base, you only have to export the
>>>> actual S3 method. Your problem is that base::pmax() is not a generic S3
>>>> function. So R gives you the correct warning: the S3 generic in your
>>>> package will always mask the base pmax function. And that's not really a
>>>> problem, especially since you ensured the base functionality with your
>>>> default method.
>>>>
>>>> If you want to avoid that warning, use S4.
>>>>
>>>> #' @rdname
>>>> setGeneric("pmax")
>>>>
>>>> #' @rdname pmax
>>>> #' @method pmax myclass
>>>> #' @export
>>>> setMethod("pmax",
>>>>                   "myclass",
>>>>                   function(...){
>>>>                      # do some stuff
>>>> })
>>>>
>>>> More information on how to deal with dots can be found on the help page
>>>> ?dotsMethods.
>>>>
>>>> If you have a generic in the base package (eg plot is such one), you
>>>> only define the method and use:
>>>>
>>>> #' @export
>>>> plot.myclass <- function(x, y, ...){
>>>>    # do some more stuff
>>>> }
>>>>
>>>> Cheers
>>>> Joris
>>>>
>>>>
>>>>
>>>> On Mon, Jun 26, 2017 at 6:28 PM, Charles Determan <
>>>> cdetermanjr at gmail.com> wrote:
>>>>
>>>>> Greetings R users,
>>>>>
>>>>> I was wondering how others are exporting S3 methods in their packages
>>>>> when
>>>>> the generic is in 'base'.  For example, let's say I want to export a
>>>>> new
>>>>> pmax method.  The only way I have found to get this to work is by
>>>>> redefining the function with 'UseMethod' and setting the default
>>>>> method.
>>>>>
>>>>> #' @export
>>>>> pmax <- function(...){ UseMethod("pmax") }
>>>>> #' @export
>>>>> pmax.default <- function(..., na.rm=FALSE){ base::pmax(...,
>>>>> na.rm=FALSE) }
>>>>>
>>>>> setClass("myclass")
>>>>>
>>>>> #' @export
>>>>> pmax.myclass <- function(..., na.rm = FALSE){
>>>>>     print('myclass pmax!')
>>>>> }
>>>>>
>>>>> Although this works, I get the 'warning'
>>>>>
>>>>> The following objects are masked from 'package:base':
>>>>>
>>>>>     pmax
>>>>>
>>>>>
>>>>> I would like the package build and loading to be as clean as possible
>>>>> but
>>>>> if this is acceptable and not considered a problem I will let it go.
>>>>> It
>>>>> just seems odd that one would to redefine a the generic when in states
>>>>> in
>>>>> the docs for 'pmax' that it will also work on classed S3 objects but
>>>>> perhaps I am reading this incorrectly.
>>>>>
>>>>> Thanks,
>>>>> Charles
>>>>>
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Joris Meys
>>>> Statistical consultant
>>>>
>>>> Ghent University
>>>> Faculty of Bioscience Engineering
>>>> Department of Mathematical Modelling, Statistics and Bio-Informatics
>>>>
>>>> tel : +32 9 264 59 87 <+32%209%20264%2059%2087>
>>>> Joris.Meys at Ugent.be
>>>> -------------------------------
>>>> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>>>>
>>>
>>>
>>
>>
>> --
>> Joris Meys
>> Statistical consultant
>>
>> Ghent University
>> Faculty of Bioscience Engineering
>> Department of Mathematical Modelling, Statistics and Bio-Informatics
>>
>> tel : +32 9 264 59 87 <+32%209%20264%2059%2087>
>> Joris.Meys at Ugent.be
>> -------------------------------
>> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>>
>
>

	[[alternative HTML version deleted]]


From Joris.Meys at ugent.be  Mon Jun 26 19:56:48 2017
From: Joris.Meys at ugent.be (Joris Meys)
Date: Mon, 26 Jun 2017 19:56:48 +0200
Subject: [R-pkg-devel] Exporting S3 methods for base generics
In-Reply-To: <CAKxd1KNM2Ue3KJh3pQ5S8_0K6u7r9xiZSWh_MLpGffYR_SWF8Q@mail.gmail.com>
References: <CAKxd1KOWWk_tThGrq9vT5GCtdcWPq-M_awhMF4+-zOad5Z5VSw@mail.gmail.com>
 <CAO1zAVbrEgSf3nXUqzKoQZ1kq3yz=bpyg8SRwSBQ9sX4fc5X2g@mail.gmail.com>
 <CAKxd1KOe-O=cBzNa2nSCB4XV3SkwKq7_8Qgt2Xv0oPPVy2f_-w@mail.gmail.com>
 <CAO1zAVZ-iNkof4KAA=GJeY2dXZX=04fA256S6e2Vxt+dwUNWsA@mail.gmail.com>
 <CAKxd1KNM2Ue3KJh3pQ5S8_0K6u7r9xiZSWh_MLpGffYR_SWF8Q@mail.gmail.com>
Message-ID: <CAO1zAVYy43d9HAVB4fiLgX+uzBWP5h0_YpnS=4=wLpwDZZwr8g@mail.gmail.com>

Hi Charles,

that particular construct (with the dots) I only have in proprietary
packages, so I can't share the code for those. If you have the package on a
repo on github, you can give me a link and a pointer as to what file you're
working on, and I can take a look.

You also find some nice examples on the help page of ?dotsMethods

Cheers
Joris

On Mon, Jun 26, 2017 at 7:42 PM, Charles Determan <cdetermanjr at gmail.com>
wrote:

> Could you point to one of these packages you refer to?  I'm still having
> problems and not sure why at the moment.
>
> Thanks
>
> On Mon, Jun 26, 2017 at 12:32 PM, Joris Meys <Joris.Meys at ugent.be> wrote:
>
>> Hi Charles,
>>
>> my mistake. I forgot that pmax has an extra argument na.rm. I'm surprised
>> you could define the method, as this normally should return an error from
>> conformMethod().
>>
>> So:
>> #' @rdname pmax
>> setGeneric("pmax", signature = "...")
>>
>> should work. I've used this myself in quite a number of packages.
>>
>> Cheers
>> Joris
>>
>> On Mon, Jun 26, 2017 at 7:20 PM, Charles Determan <cdetermanjr at gmail.com>
>> wrote:
>>
>>> Thanks for the reply Joris, although I am not sure what I could be doing
>>> wrong.  I implement exactly the lines you show and yet I just get the
>>> following error when I call 'pmax' on the class.
>>>
>>> > pmax(x, 0)
>>>
>>> Error in mmm < each :
>>>   comparison (3) is possible only for atomic and list types
>>> In addition: Warning message:
>>> In is.na(mmm) : is.na() applied to non-(list or vector) of type 'S4'
>>>
>>> Regards,
>>> Charles
>>>
>>> On Mon, Jun 26, 2017 at 12:10 PM, Joris Meys <Joris.Meys at ugent.be>
>>> wrote:
>>>
>>>> Hi Charles,
>>>>
>>>> if a generic exists already in the base, you only have to export the
>>>> actual S3 method. Your problem is that base::pmax() is not a generic S3
>>>> function. So R gives you the correct warning: the S3 generic in your
>>>> package will always mask the base pmax function. And that's not really a
>>>> problem, especially since you ensured the base functionality with your
>>>> default method.
>>>>
>>>> If you want to avoid that warning, use S4.
>>>>
>>>> #' @rdname
>>>> setGeneric("pmax")
>>>>
>>>> #' @rdname pmax
>>>> #' @method pmax myclass
>>>> #' @export
>>>> setMethod("pmax",
>>>>                   "myclass",
>>>>                   function(...){
>>>>                      # do some stuff
>>>> })
>>>>
>>>> More information on how to deal with dots can be found on the help page
>>>> ?dotsMethods.
>>>>
>>>> If you have a generic in the base package (eg plot is such one), you
>>>> only define the method and use:
>>>>
>>>> #' @export
>>>> plot.myclass <- function(x, y, ...){
>>>>    # do some more stuff
>>>> }
>>>>
>>>> Cheers
>>>> Joris
>>>>
>>>>
>>>>
>>>> On Mon, Jun 26, 2017 at 6:28 PM, Charles Determan <
>>>> cdetermanjr at gmail.com> wrote:
>>>>
>>>>> Greetings R users,
>>>>>
>>>>> I was wondering how others are exporting S3 methods in their packages
>>>>> when
>>>>> the generic is in 'base'.  For example, let's say I want to export a
>>>>> new
>>>>> pmax method.  The only way I have found to get this to work is by
>>>>> redefining the function with 'UseMethod' and setting the default
>>>>> method.
>>>>>
>>>>> #' @export
>>>>> pmax <- function(...){ UseMethod("pmax") }
>>>>> #' @export
>>>>> pmax.default <- function(..., na.rm=FALSE){ base::pmax(...,
>>>>> na.rm=FALSE) }
>>>>>
>>>>> setClass("myclass")
>>>>>
>>>>> #' @export
>>>>> pmax.myclass <- function(..., na.rm = FALSE){
>>>>>     print('myclass pmax!')
>>>>> }
>>>>>
>>>>> Although this works, I get the 'warning'
>>>>>
>>>>> The following objects are masked from 'package:base':
>>>>>
>>>>>     pmax
>>>>>
>>>>>
>>>>> I would like the package build and loading to be as clean as possible
>>>>> but
>>>>> if this is acceptable and not considered a problem I will let it go.
>>>>> It
>>>>> just seems odd that one would to redefine a the generic when in states
>>>>> in
>>>>> the docs for 'pmax' that it will also work on classed S3 objects but
>>>>> perhaps I am reading this incorrectly.
>>>>>
>>>>> Thanks,
>>>>> Charles
>>>>>
>>>>>         [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Joris Meys
>>>> Statistical consultant
>>>>
>>>> Ghent University
>>>> Faculty of Bioscience Engineering
>>>> Department of Mathematical Modelling, Statistics and Bio-Informatics
>>>>
>>>> tel : +32 9 264 59 87 <+32%209%20264%2059%2087>
>>>> Joris.Meys at Ugent.be
>>>> -------------------------------
>>>> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>>>>
>>>
>>>
>>
>>
>> --
>> Joris Meys
>> Statistical consultant
>>
>> Ghent University
>> Faculty of Bioscience Engineering
>> Department of Mathematical Modelling, Statistics and Bio-Informatics
>>
>> tel : +32 9 264 59 87 <+32%209%20264%2059%2087>
>> Joris.Meys at Ugent.be
>> -------------------------------
>> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>>
>
>


-- 
Joris Meys
Statistical consultant

Ghent University
Faculty of Bioscience Engineering
Department of Mathematical Modelling, Statistics and Bio-Informatics

tel : +32 9 264 59 87
Joris.Meys at Ugent.be
-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From Joris.Meys at ugent.be  Mon Jun 26 20:01:59 2017
From: Joris.Meys at ugent.be (Joris Meys)
Date: Mon, 26 Jun 2017 20:01:59 +0200
Subject: [R-pkg-devel] Exporting S3 methods for base generics
In-Reply-To: <CAKxd1KOVZrSkf9rPsQ_BefvW12Ps_mNxb7jkAyr_HFCFO6LBtA@mail.gmail.com>
References: <CAKxd1KOWWk_tThGrq9vT5GCtdcWPq-M_awhMF4+-zOad5Z5VSw@mail.gmail.com>
 <CAO1zAVbrEgSf3nXUqzKoQZ1kq3yz=bpyg8SRwSBQ9sX4fc5X2g@mail.gmail.com>
 <CAKxd1KOe-O=cBzNa2nSCB4XV3SkwKq7_8Qgt2Xv0oPPVy2f_-w@mail.gmail.com>
 <CAO1zAVZ-iNkof4KAA=GJeY2dXZX=04fA256S6e2Vxt+dwUNWsA@mail.gmail.com>
 <CAKxd1KNM2Ue3KJh3pQ5S8_0K6u7r9xiZSWh_MLpGffYR_SWF8Q@mail.gmail.com>
 <CAKxd1KOVZrSkf9rPsQ_BefvW12Ps_mNxb7jkAyr_HFCFO6LBtA@mail.gmail.com>
Message-ID: <CAO1zAVakSHrZxgt69eRM9zOjZ4DHNSGvvmSTpYwQeSxn2=9i_g@mail.gmail.com>

Ah, good point :-)  You can avoid that by using inheritance, but now you're
on a route to refactoring your entire package actually. See also this
question on stackoverflow for a nice example of how this can be done:

https://stackoverflow.com/questions/26963900/generalizing-three-dots-argument-dispatch-s4-methods-for-argument-set-i

If neither class can inherit from the other in a logical way, you could
define a virtual "superclass" they both inherit from, and define the pmax
method for that virtual class. In R you do this using setClassUnion(), see
also ?setClassUnion and the section on virtual classes in ?setClass.

Hope this helps
Cheers
Joris

On Mon, Jun 26, 2017 at 7:56 PM, Charles Determan <cdetermanjr at gmail.com>
wrote:

> Ah, I see now.  I came across this previous post (
> http://r.789695.n4.nabble.com/override-pmin-pmax-for-my-
> own-matrix-td4715903.html) which mentioned the caveat that all the
> elements passed to ... must be the same.  When I pass two of the same class
> it works but I believe I will need to go back to the S3 if I want different
> classes passed to the call.
>
> Charles
>
> On Mon, Jun 26, 2017 at 12:42 PM, Charles Determan <cdetermanjr at gmail.com>
> wrote:
>
>> Could you point to one of these packages you refer to?  I'm still having
>> problems and not sure why at the moment.
>>
>> Thanks
>>
>> On Mon, Jun 26, 2017 at 12:32 PM, Joris Meys <Joris.Meys at ugent.be> wrote:
>>
>>> Hi Charles,
>>>
>>> my mistake. I forgot that pmax has an extra argument na.rm. I'm
>>> surprised you could define the method, as this normally should return an
>>> error from conformMethod().
>>>
>>> So:
>>> #' @rdname pmax
>>> setGeneric("pmax", signature = "...")
>>>
>>> should work. I've used this myself in quite a number of packages.
>>>
>>> Cheers
>>> Joris
>>>
>>> On Mon, Jun 26, 2017 at 7:20 PM, Charles Determan <cdetermanjr at gmail.com
>>> > wrote:
>>>
>>>> Thanks for the reply Joris, although I am not sure what I could be
>>>> doing wrong.  I implement exactly the lines you show and yet I just get the
>>>> following error when I call 'pmax' on the class.
>>>>
>>>> > pmax(x, 0)
>>>>
>>>> Error in mmm < each :
>>>>   comparison (3) is possible only for atomic and list types
>>>> In addition: Warning message:
>>>> In is.na(mmm) : is.na() applied to non-(list or vector) of type 'S4'
>>>>
>>>> Regards,
>>>> Charles
>>>>
>>>> On Mon, Jun 26, 2017 at 12:10 PM, Joris Meys <Joris.Meys at ugent.be>
>>>> wrote:
>>>>
>>>>> Hi Charles,
>>>>>
>>>>> if a generic exists already in the base, you only have to export the
>>>>> actual S3 method. Your problem is that base::pmax() is not a generic S3
>>>>> function. So R gives you the correct warning: the S3 generic in your
>>>>> package will always mask the base pmax function. And that's not really a
>>>>> problem, especially since you ensured the base functionality with your
>>>>> default method.
>>>>>
>>>>> If you want to avoid that warning, use S4.
>>>>>
>>>>> #' @rdname
>>>>> setGeneric("pmax")
>>>>>
>>>>> #' @rdname pmax
>>>>> #' @method pmax myclass
>>>>> #' @export
>>>>> setMethod("pmax",
>>>>>                   "myclass",
>>>>>                   function(...){
>>>>>                      # do some stuff
>>>>> })
>>>>>
>>>>> More information on how to deal with dots can be found on the help
>>>>> page ?dotsMethods.
>>>>>
>>>>> If you have a generic in the base package (eg plot is such one), you
>>>>> only define the method and use:
>>>>>
>>>>> #' @export
>>>>> plot.myclass <- function(x, y, ...){
>>>>>    # do some more stuff
>>>>> }
>>>>>
>>>>> Cheers
>>>>> Joris
>>>>>
>>>>>
>>>>>
>>>>> On Mon, Jun 26, 2017 at 6:28 PM, Charles Determan <
>>>>> cdetermanjr at gmail.com> wrote:
>>>>>
>>>>>> Greetings R users,
>>>>>>
>>>>>> I was wondering how others are exporting S3 methods in their packages
>>>>>> when
>>>>>> the generic is in 'base'.  For example, let's say I want to export a
>>>>>> new
>>>>>> pmax method.  The only way I have found to get this to work is by
>>>>>> redefining the function with 'UseMethod' and setting the default
>>>>>> method.
>>>>>>
>>>>>> #' @export
>>>>>> pmax <- function(...){ UseMethod("pmax") }
>>>>>> #' @export
>>>>>> pmax.default <- function(..., na.rm=FALSE){ base::pmax(...,
>>>>>> na.rm=FALSE) }
>>>>>>
>>>>>> setClass("myclass")
>>>>>>
>>>>>> #' @export
>>>>>> pmax.myclass <- function(..., na.rm = FALSE){
>>>>>>     print('myclass pmax!')
>>>>>> }
>>>>>>
>>>>>> Although this works, I get the 'warning'
>>>>>>
>>>>>> The following objects are masked from 'package:base':
>>>>>>
>>>>>>     pmax
>>>>>>
>>>>>>
>>>>>> I would like the package build and loading to be as clean as possible
>>>>>> but
>>>>>> if this is acceptable and not considered a problem I will let it go.
>>>>>> It
>>>>>> just seems odd that one would to redefine a the generic when in
>>>>>> states in
>>>>>> the docs for 'pmax' that it will also work on classed S3 objects but
>>>>>> perhaps I am reading this incorrectly.
>>>>>>
>>>>>> Thanks,
>>>>>> Charles
>>>>>>
>>>>>>         [[alternative HTML version deleted]]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Joris Meys
>>>>> Statistical consultant
>>>>>
>>>>> Ghent University
>>>>> Faculty of Bioscience Engineering
>>>>> Department of Mathematical Modelling, Statistics and Bio-Informatics
>>>>>
>>>>> tel : +32 9 264 59 87 <+32%209%20264%2059%2087>
>>>>> Joris.Meys at Ugent.be
>>>>> -------------------------------
>>>>> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>>>>>
>>>>
>>>>
>>>
>>>
>>> --
>>> Joris Meys
>>> Statistical consultant
>>>
>>> Ghent University
>>> Faculty of Bioscience Engineering
>>> Department of Mathematical Modelling, Statistics and Bio-Informatics
>>>
>>> tel : +32 9 264 59 87 <+32%209%20264%2059%2087>
>>> Joris.Meys at Ugent.be
>>> -------------------------------
>>> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>>>
>>
>>
>


-- 
Joris Meys
Statistical consultant

Ghent University
Faculty of Bioscience Engineering
Department of Mathematical Modelling, Statistics and Bio-Informatics

tel : +32 9 264 59 87
Joris.Meys at Ugent.be
-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From dariotorressan at gmail.com  Mon Jun 26 20:20:15 2017
From: dariotorressan at gmail.com (=?UTF-8?Q?Dar=C3=ADo_Torres_S=C3=A1nchez?=)
Date: Mon, 26 Jun 2017 13:20:15 -0500
Subject: [R-pkg-devel] Doubt about adding files to a R package
Message-ID: <CAHz4VQsdW_a688c74fCgvri9q1KovOHgAKVaX_ofUjtCyCjCKQ@mail.gmail.com>

Good day,

I have a problem I will like to ask for some help,

My package needs some .csv files to run, but when i attached them to the
.tar file to submit to the CRAN and after the test it marks an error so my
doubt is how can I attached this files and when i submit it they not mark
error?.


Thanks a lot for your help, I hope hear from you soon

My regards
Dario

<http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
Libre
de virus. www.avg.com
<http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
<#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>

	[[alternative HTML version deleted]]


From thierry.onkelinx at inbo.be  Wed Jun 28 11:43:23 2017
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Wed, 28 Jun 2017 11:43:23 +0200
Subject: [R-pkg-devel] Doubt about adding files to a R package
In-Reply-To: <CAHz4VQsdW_a688c74fCgvri9q1KovOHgAKVaX_ofUjtCyCjCKQ@mail.gmail.com>
References: <CAHz4VQsdW_a688c74fCgvri9q1KovOHgAKVaX_ofUjtCyCjCKQ@mail.gmail.com>
Message-ID: <CAJuCY5x6nj2Rh9hRd4rQyS8NSA=UZWJCsD6E5zwDRhb63aLOng@mail.gmail.com>

Dear Dario,

The attachments got stripped from the mail by the server. Can you provide a
link to the results of R CMD check and the source code of the package?

Best regards,

ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature and
Forest
team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
Kliniekstraat 25
1070 Anderlecht
Belgium

To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey

2017-06-26 20:20 GMT+02:00 Dar?o Torres S?nchez <dariotorressan at gmail.com>:

> Good day,
>
> I have a problem I will like to ask for some help,
>
> My package needs some .csv files to run, but when i attached them to the
> .tar file to submit to the CRAN and after the test it marks an error so my
> doubt is how can I attached this files and when i submit it they not mark
> error?.
>
>
> Thanks a lot for your help, I hope hear from you soon
>
> My regards
> Dario
>
> <http://www.avg.com/email-signature?utm_medium=email&
> utm_source=link&utm_campaign=sig-email&utm_content=webmail>
> Libre
> de virus. www.avg.com
> <http://www.avg.com/email-signature?utm_medium=email&
> utm_source=link&utm_campaign=sig-email&utm_content=webmail>
> <#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Wed Jun 28 12:35:25 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 28 Jun 2017 06:35:25 -0400
Subject: [R-pkg-devel] Doubt about adding files to a R package
In-Reply-To: <CAHz4VQsdW_a688c74fCgvri9q1KovOHgAKVaX_ofUjtCyCjCKQ@mail.gmail.com>
References: <CAHz4VQsdW_a688c74fCgvri9q1KovOHgAKVaX_ofUjtCyCjCKQ@mail.gmail.com>
Message-ID: <dd26b67d-5951-d9f0-cfe8-8f519790333e@gmail.com>

On 26/06/2017 2:20 PM, Dar?o Torres S?nchez wrote:
> Good day,
>
> I have a problem I will like to ask for some help,
>
> My package needs some .csv files to run, but when i attached them to the
> .tar file to submit to the CRAN and after the test it marks an error so my
> doubt is how can I attached this files and when i submit it they not mark
> error?.
>
>
> Thanks a lot for your help, I hope hear from you soon
>

In general, you can put files into your own directories below the "inst" 
directory.  ("inst/doc" is special; only put things there if you want 
them displayed to users.)

You can also use the "data" directory if you want to make them available 
to users using the data() function.

Duncan Murdoch


From simon.barthelme at gipsa-lab.fr  Wed Jun 28 16:29:59 2017
From: simon.barthelme at gipsa-lab.fr (=?UTF-8?Q?Simon_Barthelm=c3=a9?=)
Date: Wed, 28 Jun 2017 16:29:59 +0200
Subject: [R-pkg-devel] best approach to getting an external library to *not*
 use stdout, stderr, etc.
Message-ID: <5953BD67.9010106@gipsa-lab.fr>

Dear list,

I'm trying to wrap an external C++ library that has the bad habit of 
printing errors to std::cerr, a behaviour which will lead to CRAN 
issuing warnings. I was wondering if people had come up with a solution 
to this problem that's better than patching everything by hand?

Thanks

Simon


From i.ucar86 at gmail.com  Wed Jun 28 17:13:31 2017
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Wed, 28 Jun 2017 17:13:31 +0200
Subject: [R-pkg-devel] best approach to getting an external library to
 *not* use stdout, stderr, etc.
In-Reply-To: <5953BD67.9010106@gipsa-lab.fr>
References: <5953BD67.9010106@gipsa-lab.fr>
Message-ID: <CALEXWq1HfMJEKKDBmhu8pkWzN4Tzfi9sS=5EnWZfWpYNp+V+YA@mail.gmail.com>

2017-06-28 16:29 GMT+02:00 Simon Barthelm? <simon.barthelme at gipsa-lab.fr>:
> Dear list,
>
> I'm trying to wrap an external C++ library that has the bad habit of
> printing errors to std::cerr, a behaviour which will lead to CRAN issuing
> warnings. I was wondering if people had come up with a solution to this
> problem that's better than patching everything by hand?
>
> Thanks
>
> Simon

Hi, take a look at freopen: http://www.cplusplus.com/reference/cstdio/freopen/

I?aki


From simon.barthelme at gipsa-lab.fr  Wed Jun 28 18:34:54 2017
From: simon.barthelme at gipsa-lab.fr (=?UTF-8?Q?Simon_Barthelm=c3=a9?=)
Date: Wed, 28 Jun 2017 18:34:54 +0200
Subject: [R-pkg-devel] best approach to getting an external library to
 *not* use stdout, stderr, etc.
In-Reply-To: <CALEXWq1HfMJEKKDBmhu8pkWzN4Tzfi9sS=5EnWZfWpYNp+V+YA@mail.gmail.com>
References: <5953BD67.9010106@gipsa-lab.fr>
 <CALEXWq1HfMJEKKDBmhu8pkWzN4Tzfi9sS=5EnWZfWpYNp+V+YA@mail.gmail.com>
Message-ID: <5953DAAE.9070107@gipsa-lab.fr>

Hi I?aki

Thanks for the suggestion. I'm not sure how to make it work, though, if 
you call freopen on stderr, R CMD check will still detect a call to 
stderr and trigger a warning. Have you yourself used it?

Best

Simon

On 28/06/2017 17:13, I?aki ?car wrote:
> 2017-06-28 16:29 GMT+02:00 Simon Barthelm? <simon.barthelme at gipsa-lab.fr>:
>> Dear list,
>>
>> I'm trying to wrap an external C++ library that has the bad habit of
>> printing errors to std::cerr, a behaviour which will lead to CRAN issuing
>> warnings. I was wondering if people had come up with a solution to this
>> problem that's better than patching everything by hand?
>>
>> Thanks
>>
>> Simon
> Hi, take a look at freopen: http://www.cplusplus.com/reference/cstdio/freopen/
>
> I?aki


From i.ucar86 at gmail.com  Wed Jun 28 19:02:22 2017
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Wed, 28 Jun 2017 19:02:22 +0200
Subject: [R-pkg-devel] best approach to getting an external library to
 *not* use stdout, stderr, etc.
In-Reply-To: <5953DAAE.9070107@gipsa-lab.fr>
References: <5953BD67.9010106@gipsa-lab.fr>
 <CALEXWq1HfMJEKKDBmhu8pkWzN4Tzfi9sS=5EnWZfWpYNp+V+YA@mail.gmail.com>
 <5953DAAE.9070107@gipsa-lab.fr>
Message-ID: <CALEXWq1Bc_xF084EoXqKuYUY49_VM2OH8bjp2RSoE+E=ShyD2A@mail.gmail.com>

2017-06-28 18:34 GMT+02:00 Simon Barthelm? <simon.barthelme at gipsa-lab.fr>:
> Hi I?aki
>
> Thanks for the suggestion. I'm not sure how to make it work, though, if you
> call freopen on stderr, R CMD check will still detect a call to stderr and
> trigger a warning. Have you yourself used it?

Not in an R package. Anyways, you can redirect stdout and stderr to
null or even to Rcpp::cout and Rcpp::cerr, but I fear this probably
won't help with the CRAN checks, since the library will still have
symbols writing to stdout and stderr. :-\

>
> Best
>
> Simon
>
> On 28/06/2017 17:13, I?aki ?car wrote:
>>
>> 2017-06-28 16:29 GMT+02:00 Simon Barthelm? <simon.barthelme at gipsa-lab.fr>:
>>>
>>> Dear list,
>>>
>>> I'm trying to wrap an external C++ library that has the bad habit of
>>> printing errors to std::cerr, a behaviour which will lead to CRAN issuing
>>> warnings. I was wondering if people had come up with a solution to this
>>> problem that's better than patching everything by hand?
>>>
>>> Thanks
>>>
>>> Simon
>>
>> Hi, take a look at freopen:
>> http://www.cplusplus.com/reference/cstdio/freopen/
>>
>> I?aki
>
>



-- 
I?aki ?car
http://www.enchufa2.es
@Enchufa2


From bill at denney.ws  Wed Jun 28 22:23:33 2017
From: bill at denney.ws (Bill Denney)
Date: Wed, 28 Jun 2017 16:23:33 -0400
Subject: [R-pkg-devel] Loading Libraries Outside of .lib.loc
Message-ID: <cc20e44d-7c4e-41c5-8573-cdb00e8a9645@denney.ws>

Hi,

I'm working on a script to test my library (PKNCA) for what the minimum 
required version of its dependencies are.  Specifically, I've received 
bug reports when people are using versions of dplyr < 0.5.0.

To test my package against old versions of libraries, I'm installing old 
versions of packages in separate directories with:

> dir.create("/tmp/current", recursive=TRUE)
> install.packages("devtools", lib="/tmp/current")

I then try to load the devtools library that I've just installed, and I 
get an error:

> library(devtools, lib.loc="/tmp/current")
Error: package or namespace load failed for ?devtools?:
  .onLoad failed in loadNamespace() for 'devtools', details:
   call: loadNamespace(name)
   error: there is no package called ?withr?

I would have assumed that lib.loc would cause R to search within the 
directory I just created for the dependencies, too.  But it doesn't 
appear to do so:

> library(withr, lib.loc="/tmp/current")
>

(no error)

Is this intended behavior or a bug?  If intended behavior, I can 
manipulate .lib.loc through something like:

assign(".lib.loc", envir=environment(.libPaths),
        c("/tmp/current", "/usr/local/lib/R/site-library",
          "/usr/lib/R/site-library", "/usr/lib/R/library"))

Thanks,

Bill

P.S. Apologies if this would better fit on a more general mailing list, 
but the only reason I'm bashing at library and install.packages is 
related to package development and testing.


From ligges at statistik.tu-dortmund.de  Wed Jun 28 23:36:50 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 28 Jun 2017 23:36:50 +0200
Subject: [R-pkg-devel] Loading Libraries Outside of .lib.loc
In-Reply-To: <cc20e44d-7c4e-41c5-8573-cdb00e8a9645@denney.ws>
References: <cc20e44d-7c4e-41c5-8573-cdb00e8a9645@denney.ws>
Message-ID: <8e580eb0-e4ce-ecdb-edeb-1d0cd5ab2fb0@statistik.tu-dortmund.de>

Just set
.libPaths("/tmp/current")
and then
library(devtools)
shoudl do the trick.
Best,
Uwe Ligges




On 28.06.2017 22:23, Bill Denney wrote:
> Hi,
> 
> I'm working on a script to test my library (PKNCA) for what the minimum 
> required version of its dependencies are.  Specifically, I've received 
> bug reports when people are using versions of dplyr < 0.5.0.
> 
> To test my package against old versions of libraries, I'm installing old 
> versions of packages in separate directories with:
> 
>> dir.create("/tmp/current", recursive=TRUE)
>> install.packages("devtools", lib="/tmp/current")
> 
> I then try to load the devtools library that I've just installed, and I 
> get an error:
> 
>> library(devtools, lib.loc="/tmp/current")
> Error: package or namespace load failed for ?devtools?:
>   .onLoad failed in loadNamespace() for 'devtools', details:
>    call: loadNamespace(name)
>    error: there is no package called ?withr?
> 
> I would have assumed that lib.loc would cause R to search within the 
> directory I just created for the dependencies, too.  But it doesn't 
> appear to do so:
> 
>> library(withr, lib.loc="/tmp/current")
>>
> 
> (no error)
> 
> Is this intended behavior or a bug?  If intended behavior, I can 
> manipulate .lib.loc through something like:
> 
> assign(".lib.loc", envir=environment(.libPaths),
>         c("/tmp/current", "/usr/local/lib/R/site-library",
>           "/usr/lib/R/site-library", "/usr/lib/R/library"))
> 
> Thanks,
> 
> Bill
> 
> P.S. Apologies if this would better fit on a more general mailing list, 
> but the only reason I'm bashing at library and install.packages is 
> related to package development and testing.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From nicolas.hiot at etu.univ-orleans.fr  Fri Jun 30 13:57:24 2017
From: nicolas.hiot at etu.univ-orleans.fr (Nicolas Hiot)
Date: Fri, 30 Jun 2017 13:57:24 +0200
Subject: [R-pkg-devel] Package submission with external library
Message-ID: <20170630135724.16487afy27j0grs4@webmaileturc.univ-orleans.fr>

Hello,

I'm the developer of a package for R, it's work fine on my computer  
but when I publish it the installation failed due to the external  
library. My C code needs GSL (GNU Scientific Library), I made an auto  
configuration file and a Makevars but I don't know how to specify to  
CRAN to install the library (I tried "SystemRequirements" in  
DESCRIPTION and I put a comment but that continue to failed :/).

So, how link external library to CRAN submission?

Results:  
https://win-builder.r-project.org/incoming_pretest/170630_105826_COveR_0102/
Project: https://github.com/Neplex/COveR

Thanks,
Nicolas HIOT


From ligges at statistik.tu-dortmund.de  Fri Jun 30 15:32:33 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Fri, 30 Jun 2017 15:32:33 +0200
Subject: [R-pkg-devel] Package submission with external library
In-Reply-To: <20170630135724.16487afy27j0grs4@webmaileturc.univ-orleans.fr>
References: <20170630135724.16487afy27j0grs4@webmaileturc.univ-orleans.fr>
Message-ID: <018be79d-3006-f628-c876-33b2f51d697b@statistik.tu-dortmund.de>

1. perhaps the gsl package or some other package already making use of 
gsl can be used? So please make use of available infrastructure.

2. For Windows, the directories with GSL are defined in env vars, see
https://cran.r-project.org/bin/windows/contrib/ThirdPartySoftware.html
You can copy ideas of Makevars.win files from other GSL using packages ...

Best,
Uwe Ligges





On 30.06.2017 13:57, Nicolas Hiot wrote:
> Hello,
> 
> I'm the developer of a package for R, it's work fine on my computer but 
> when I publish it the installation failed due to the external library. 
> My C code needs GSL (GNU Scientific Library), I made an auto 
> configuration file and a Makevars but I don't know how to specify to 
> CRAN to install the library (I tried "SystemRequirements" in DESCRIPTION 
> and I put a comment but that continue to failed :/).
> 
> So, how link external library to CRAN submission?
> 
> Results: 
> https://win-builder.r-project.org/incoming_pretest/170630_105826_COveR_0102/ 
> 
> Project: https://github.com/Neplex/COveR
> 
> Thanks,
> Nicolas HIOT
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From nicolas.hiot at etu.univ-orleans.fr  Fri Jun 30 16:13:05 2017
From: nicolas.hiot at etu.univ-orleans.fr (Nicolas Hiot)
Date: Fri, 30 Jun 2017 16:13:05 +0200
Subject: [R-pkg-devel] Package submission with external library
In-Reply-To: <018be79d-3006-f628-c876-33b2f51d697b@statistik.tu-dortmund.de>
References: <20170630135724.16487afy27j0grs4@webmaileturc.univ-orleans.fr>
 <018be79d-3006-f628-c876-33b2f51d697b@statistik.tu-dortmund.de>
Message-ID: <20170630161305.14195edi2m1jzuk1@webmaileturc.univ-orleans.fr>

Thanks for your reply.

1. I don't want to depend on other packages that implement GSL. (Too  
heavy for my purpose)

2. I used "LIB_GSL" environment variable in my Makevars.win  
(https://github.com/Neplex/COveR/blob/master/src/Makevars.win take  
from GSL package itself) but it seems to not used the Makevars (see  
compiler flags  
https://win-builder.r-project.org/incoming_pretest/170630_105826_COveR_0102/00install.out)

Have you an idea?

Nicolas HIOT

Uwe Ligges <ligges at statistik.tu-dortmund.de> a ?crit?:

> 1. perhaps the gsl package or some other package already making use  
> of gsl can be used? So please make use of available infrastructure.
>
> 2. For Windows, the directories with GSL are defined in env vars, see
> https://cran.r-project.org/bin/windows/contrib/ThirdPartySoftware.html
> You can copy ideas of Makevars.win files from other GSL using packages ...
>
> Best,
> Uwe Ligges
>
>
>
>
>
> On 30.06.2017 13:57, Nicolas Hiot wrote:
>> Hello,
>>
>> I'm the developer of a package for R, it's work fine on my computer  
>> but when I publish it the installation failed due to the external  
>> library. My C code needs GSL (GNU Scientific Library), I made an  
>> auto configuration file and a Makevars but I don't know how to  
>> specify to CRAN to install the library (I tried  
>> "SystemRequirements" in DESCRIPTION and I put a comment but that  
>> continue to failed :/).
>>
>> So, how link external library to CRAN submission?
>>
>> Results:  
>> https://win-builder.r-project.org/incoming_pretest/170630_105826_COveR_0102/ Project:  
>> https://github.com/Neplex/COveR
>>
>> Thanks,
>> Nicolas HIOT
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From edd at debian.org  Fri Jun 30 21:42:24 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri, 30 Jun 2017 14:42:24 -0500
Subject: [R-pkg-devel] Package submission with external library
In-Reply-To: <20170630161305.14195edi2m1jzuk1@webmaileturc.univ-orleans.fr>
References: <20170630135724.16487afy27j0grs4@webmaileturc.univ-orleans.fr>
 <018be79d-3006-f628-c876-33b2f51d697b@statistik.tu-dortmund.de>
 <20170630161305.14195edi2m1jzuk1@webmaileturc.univ-orleans.fr>
Message-ID: <22870.43424.856316.563121@bud.eddelbuettel.com>


On 30 June 2017 at 16:13, Nicolas Hiot wrote:
| Thanks for your reply.
| 
| 1. I don't want to depend on other packages that implement GSL. (Too  
| heavy for my purpose)

That is *not* what Uwe suggested.

He suggested you look at _other packages_ which _successfully use the GSL_
which include packages 'gsl', my own 'RcppGSL' and many more.

I cannot agree more with Uwe: you have working examples to work from. Study
them.

| 2. I used "LIB_GSL" environment variable in my Makevars.win  
| (https://github.com/Neplex/COveR/blob/master/src/Makevars.win take  
| from GSL package itself) but it seems to not used the Makevars (see  
| compiler flags  
| https://win-builder.r-project.org/incoming_pretest/170630_105826_COveR_0102/00install.out)
| 
| Have you an idea?

See above. We have many packages building against GSL -- including on
Windows.

Dirk

| 
| Nicolas HIOT
| 
| Uwe Ligges <ligges at statistik.tu-dortmund.de> a ?crit?:
| 
| > 1. perhaps the gsl package or some other package already making use  
| > of gsl can be used? So please make use of available infrastructure.
| >
| > 2. For Windows, the directories with GSL are defined in env vars, see
| > https://cran.r-project.org/bin/windows/contrib/ThirdPartySoftware.html
| > You can copy ideas of Makevars.win files from other GSL using packages ...
| >
| > Best,
| > Uwe Ligges
| >
| >
| >
| >
| >
| > On 30.06.2017 13:57, Nicolas Hiot wrote:
| >> Hello,
| >>
| >> I'm the developer of a package for R, it's work fine on my computer  
| >> but when I publish it the installation failed due to the external  
| >> library. My C code needs GSL (GNU Scientific Library), I made an  
| >> auto configuration file and a Makevars but I don't know how to  
| >> specify to CRAN to install the library (I tried  
| >> "SystemRequirements" in DESCRIPTION and I put a comment but that  
| >> continue to failed :/).
| >>
| >> So, how link external library to CRAN submission?
| >>
| >> Results:  
| >> https://win-builder.r-project.org/incoming_pretest/170630_105826_COveR_0102/ Project:  
| >> https://github.com/Neplex/COveR
| >>
| >> Thanks,
| >> Nicolas HIOT
| >>
| >> ______________________________________________
| >> R-package-devel at r-project.org mailing list
| >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
| >
| 
| ______________________________________________
| R-package-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


