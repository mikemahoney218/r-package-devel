From lafaye at dms.umontreal.ca  Sat Jan  2 20:39:58 2016
From: lafaye at dms.umontreal.ca (Pierre Lafaye de Micheaux)
Date: Sat, 2 Jan 2016 20:39:58 +0100
Subject: [R-pkg-devel] Problem (with complex.h?) under Microsoft Windows
In-Reply-To: <564649B0.8000701@gmail.com>
References: <56460EC9.1020303@dms.umontreal.ca> <564649B0.8000701@gmail.com>
Message-ID: <5688278E.1020804@dms.umontreal.ca>

Dear all,

Thank you very much for your answers. And sorry for the last reply.
Here is how I solved my problem.

I incorporated some files from the src/ directory of the R package 
Faddeeva to
the subdirectory /libraries of the src/ directory of my own package.

This is because I needed to use some functions (in C)  from this package.
Then I used something as:
#include <R.h>
#include "Rmath.h"
#include "libraries/callFaddeeva.cpp"
#include "libraries/Faddeeva.cpp"
#include "libraries/RcppExports.cpp"

It is then possible, to initialise and manipulate complex numbers in C 
in my own code. For example:

cmplx I = C(0.0, 1.0); # For a + ib where a = 0 and b = 1.
cmplx res;
res = Faddeeva::erfi(I, 0.0);

And this compiles well under Windows now.

Note that I first tried to add the Faddeeva package in the Depends field 
of my own package thinking that this might prevent me from having to put 
the Faddeeva source files in my own package but it did not work ...

Best regards,

Pierre L.




Le 13/11/2015 21:36, Duncan Murdoch a ?crit :
> On 13/11/2015 11:24 AM, Pierre Lafaye de Micheaux wrote:
>> Dear all,
>>
>> I created a new version of the package IndependenceTests where I call
>> some C and Fortran functions (using the .C() or .Fortran() interface).
>> It works perfectly under Linux, with gcc. No problem with R CMD check. I
>> would like to upload this package on the CRAN.
>>
>> But when I first tried to use winbuilder, I got an error with the
>> following message:
>>
>> * installing *source* package 'IndependenceTests' ...
>> ** libs
>>
>> *** arch - i386
>> g++  -I"D:/RCompile/recent/R/include" -DNDEBUG
>> -I"d:/RCompile/r-compiling/local/local320/include"     -O2 -Wall
>> -mtune=core2 -c Cnhat.cpp -o Cnhat.o
>> Cnhat.cpp:9:89: error: 'complex' has not been declared
>> Cnhat.cpp:9:105: error: two or more data types in declaration of 'res'
>> ....
>> .....
>> etc.
>>
>>
>> I think I understand that there is a problem (only under Windows though)
>> with the complex type.
>> The beginning of my file Cnhat.cpp is as follows:
>>
>> 1. #include <R.h>
>> 2. #include "Rmath.h"
>> 3. #include <complex.h>
>> 4. #include <iostream>
>> 5. using namespace std;
>> 6.
>> 7. extern"C" {
>> 8.
>> 9.   void CnhatC(double *vecs, double *vect, double *X, int *n, int *q,
>> int *p, int *vecd, complex double *res) {
>> 10.
>> 11.    void phinhatReturn(double *vect1, double *vect2, double *vect3,
>> double *X, int *q, int *n, double _Complex *res1, double _Complex *res2,
>> double _Complex *res3);
>> 12.    double _Complex tmp2, prod1 = 1.0 + 0.0*_Complex_I, prod2 = 1.0 +
>> 0.0*_Complex_I, somme = 0.0 + 0.0*_Complex_I;
>> 13.    int indbeginblocl, l, i, *vecdl, k, j;
>> 14.    double *vecsl, *mvectl, *diffvecsvectl, *Xl;
>> 15.    double _Complex *res1, *res2, *res3;
>> 16.    vecdl = new int[1];
>> 17.    res1 =  new _Complex double[1];
>> ....
>> .....
>> etc.
>>
>> As you can see, there seem to be some problem (on line 9.) with: complex
>> double *res
>>
>> Could you please point me to something (e.g., another package) that
>> might help me solve the problem? If possible, I would like to avoid
>> invest too much time using the new .Call() interface because I am quite
>> familiar
>> with the old .C(). And also I am not even sure if it would help solving
>> the problem.
>
> You should be using Rcomplex in the type declaration. (See Writing R 
> Extensions for a discussion of this.)  It is defined as
>
> typedef struct {
>     double r;
>     double i;
> } Rcomplex;
>
> which is likely compatible with your "complex double" on those other 
> systems (which are using newer gcc versions), but it's not guaranteed 
> to be, even there.
>
> Duncan Murdoch

-- 
Pierre Lafaye de Micheaux

Adresse courrier:
Universit? de Montr?al
Pavillon Andr?-Aisenstadt
D?partement de Math?matiques et Statistique
CP 6128 Succursale Centre-ville
Montr?al Qc H3C 3J7
CANADA

Adresse physique:
D?partement de Math?matiques et Statistique
Bureau 4249, Pavillon Andr?-Aisenstadt
2920, chemin de la Tour
Montr?al, Qu?bec H3T 1J4
CANADA

T?l.: (00-1) 514-343-6607 / Fax: (00-1) 514-343-5700
lafaye at dms.umontreal.ca
http://www.biostatisticien.eu


From murdoch.duncan at gmail.com  Sat Jan  2 21:09:02 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 2 Jan 2016 15:09:02 -0500
Subject: [R-pkg-devel] Problem (with complex.h?) under Microsoft Windows
In-Reply-To: <5688278E.1020804@dms.umontreal.ca>
References: <56460EC9.1020303@dms.umontreal.ca> <564649B0.8000701@gmail.com>
	<5688278E.1020804@dms.umontreal.ca>
Message-ID: <56882E5E.2020009@gmail.com>

On 02/01/2016 2:39 PM, Pierre Lafaye de Micheaux wrote:
> Dear all,
>
> Thank you very much for your answers. And sorry for the last reply.
> Here is how I solved my problem.
>
> I incorporated some files from the src/ directory of the R package
> Faddeeva to
> the subdirectory /libraries of the src/ directory of my own package.

I don't know of an R package called Faddeeva.  There's an 	RcppFaddeeva 
package.

>
> This is because I needed to use some functions (in C)  from this package.
> Then I used something as:
> #include <R.h>
> #include "Rmath.h"
> #include "libraries/callFaddeeva.cpp"
> #include "libraries/Faddeeva.cpp"
> #include "libraries/RcppExports.cpp"
>
> It is then possible, to initialise and manipulate complex numbers in C
> in my own code. For example:
>
> cmplx I = C(0.0, 1.0); # For a + ib where a = 0 and b = 1.
> cmplx res;
> res = Faddeeva::erfi(I, 0.0);
>
> And this compiles well under Windows now.

You shouldn't need to copy the code if you're using RcppFaddeeva, but I 
can't tell you exactly what you need to do:  the Rcpp mailing list would 
be a better place to ask.

>
> Note that I first tried to add the Faddeeva package in the Depends field
> of my own package thinking that this might prevent me from having to put
> the Faddeeva source files in my own package but it did not work ...

Depends is not the way to link at the C++ level.  If this is possible, 
you'll need to use LinkingTo as well as Imports.  I'm not sure if it's 
possible, but people on the Rcpp list would know...

Duncan Murdoch

>
> Best regards,
>
> Pierre L.
>
>
>
>
> Le 13/11/2015 21:36, Duncan Murdoch a ?crit :
>> On 13/11/2015 11:24 AM, Pierre Lafaye de Micheaux wrote:
>>> Dear all,
>>>
>>> I created a new version of the package IndependenceTests where I call
>>> some C and Fortran functions (using the .C() or .Fortran() interface).
>>> It works perfectly under Linux, with gcc. No problem with R CMD check. I
>>> would like to upload this package on the CRAN.
>>>
>>> But when I first tried to use winbuilder, I got an error with the
>>> following message:
>>>
>>> * installing *source* package 'IndependenceTests' ...
>>> ** libs
>>>
>>> *** arch - i386
>>> g++  -I"D:/RCompile/recent/R/include" -DNDEBUG
>>> -I"d:/RCompile/r-compiling/local/local320/include"     -O2 -Wall
>>> -mtune=core2 -c Cnhat.cpp -o Cnhat.o
>>> Cnhat.cpp:9:89: error: 'complex' has not been declared
>>> Cnhat.cpp:9:105: error: two or more data types in declaration of 'res'
>>> ....
>>> .....
>>> etc.
>>>
>>>
>>> I think I understand that there is a problem (only under Windows though)
>>> with the complex type.
>>> The beginning of my file Cnhat.cpp is as follows:
>>>
>>> 1. #include <R.h>
>>> 2. #include "Rmath.h"
>>> 3. #include <complex.h>
>>> 4. #include <iostream>
>>> 5. using namespace std;
>>> 6.
>>> 7. extern"C" {
>>> 8.
>>> 9.   void CnhatC(double *vecs, double *vect, double *X, int *n, int *q,
>>> int *p, int *vecd, complex double *res) {
>>> 10.
>>> 11.    void phinhatReturn(double *vect1, double *vect2, double *vect3,
>>> double *X, int *q, int *n, double _Complex *res1, double _Complex *res2,
>>> double _Complex *res3);
>>> 12.    double _Complex tmp2, prod1 = 1.0 + 0.0*_Complex_I, prod2 = 1.0 +
>>> 0.0*_Complex_I, somme = 0.0 + 0.0*_Complex_I;
>>> 13.    int indbeginblocl, l, i, *vecdl, k, j;
>>> 14.    double *vecsl, *mvectl, *diffvecsvectl, *Xl;
>>> 15.    double _Complex *res1, *res2, *res3;
>>> 16.    vecdl = new int[1];
>>> 17.    res1 =  new _Complex double[1];
>>> ....
>>> .....
>>> etc.
>>>
>>> As you can see, there seem to be some problem (on line 9.) with: complex
>>> double *res
>>>
>>> Could you please point me to something (e.g., another package) that
>>> might help me solve the problem? If possible, I would like to avoid
>>> invest too much time using the new .Call() interface because I am quite
>>> familiar
>>> with the old .C(). And also I am not even sure if it would help solving
>>> the problem.
>>
>> You should be using Rcomplex in the type declaration. (See Writing R
>> Extensions for a discussion of this.)  It is defined as
>>
>> typedef struct {
>>      double r;
>>      double i;
>> } Rcomplex;
>>
>> which is likely compatible with your "complex double" on those other
>> systems (which are using newer gcc versions), but it's not guaranteed
>> to be, even there.
>>
>> Duncan Murdoch
>


From lafaye at dms.umontreal.ca  Sun Jan  3 09:48:03 2016
From: lafaye at dms.umontreal.ca (Pierre Lafaye de Micheaux)
Date: Sun, 3 Jan 2016 09:48:03 +0100
Subject: [R-pkg-devel] Problem (with complex.h?) under Microsoft Windows
In-Reply-To: <56882E5E.2020009@gmail.com>
References: <56460EC9.1020303@dms.umontreal.ca> <564649B0.8000701@gmail.com>
	<5688278E.1020804@dms.umontreal.ca> <56882E5E.2020009@gmail.com>
Message-ID: <5688E043.8010801@dms.umontreal.ca>

Thank you for your comments.

It is indeed the RcppFaddeeva package. I had also tried to put 
RcppFaddeeva on the LinkingTo line with no success.
But I will try to ask on the Rcpp mailing list.

Best regards,
Pierre L.

Le 02/01/2016 21:09, Duncan Murdoch a ?crit :
> On 02/01/2016 2:39 PM, Pierre Lafaye de Micheaux wrote:
>> Dear all,
>>
>> Thank you very much for your answers. And sorry for the last reply.
>> Here is how I solved my problem.
>>
>> I incorporated some files from the src/ directory of the R package
>> Faddeeva to
>> the subdirectory /libraries of the src/ directory of my own package.
>
> I don't know of an R package called Faddeeva.  There's an RcppFaddeeva 
> package.
>
>>
>> This is because I needed to use some functions (in C)  from this 
>> package.
>> Then I used something as:
>> #include <R.h>
>> #include "Rmath.h"
>> #include "libraries/callFaddeeva.cpp"
>> #include "libraries/Faddeeva.cpp"
>> #include "libraries/RcppExports.cpp"
>>
>> It is then possible, to initialise and manipulate complex numbers in C
>> in my own code. For example:
>>
>> cmplx I = C(0.0, 1.0); # For a + ib where a = 0 and b = 1.
>> cmplx res;
>> res = Faddeeva::erfi(I, 0.0);
>>
>> And this compiles well under Windows now.
>
> You shouldn't need to copy the code if you're using RcppFaddeeva, but 
> I can't tell you exactly what you need to do:  the Rcpp mailing list 
> would be a better place to ask.
>
>>
>> Note that I first tried to add the Faddeeva package in the Depends field
>> of my own package thinking that this might prevent me from having to put
>> the Faddeeva source files in my own package but it did not work ...
>
> Depends is not the way to link at the C++ level.  If this is possible, 
> you'll need to use LinkingTo as well as Imports.  I'm not sure if it's 
> possible, but people on the Rcpp list would know...
>
> Duncan Murdoch
>
>>
>> Best regards,
>>
>> Pierre L.
>>
>>
>>
>>
>> Le 13/11/2015 21:36, Duncan Murdoch a ?crit :
>>> On 13/11/2015 11:24 AM, Pierre Lafaye de Micheaux wrote:
>>>> Dear all,
>>>>
>>>> I created a new version of the package IndependenceTests where I call
>>>> some C and Fortran functions (using the .C() or .Fortran() interface).
>>>> It works perfectly under Linux, with gcc. No problem with R CMD 
>>>> check. I
>>>> would like to upload this package on the CRAN.
>>>>
>>>> But when I first tried to use winbuilder, I got an error with the
>>>> following message:
>>>>
>>>> * installing *source* package 'IndependenceTests' ...
>>>> ** libs
>>>>
>>>> *** arch - i386
>>>> g++  -I"D:/RCompile/recent/R/include" -DNDEBUG
>>>> -I"d:/RCompile/r-compiling/local/local320/include"     -O2 -Wall
>>>> -mtune=core2 -c Cnhat.cpp -o Cnhat.o
>>>> Cnhat.cpp:9:89: error: 'complex' has not been declared
>>>> Cnhat.cpp:9:105: error: two or more data types in declaration of 'res'
>>>> ....
>>>> .....
>>>> etc.
>>>>
>>>>
>>>> I think I understand that there is a problem (only under Windows 
>>>> though)
>>>> with the complex type.
>>>> The beginning of my file Cnhat.cpp is as follows:
>>>>
>>>> 1. #include <R.h>
>>>> 2. #include "Rmath.h"
>>>> 3. #include <complex.h>
>>>> 4. #include <iostream>
>>>> 5. using namespace std;
>>>> 6.
>>>> 7. extern"C" {
>>>> 8.
>>>> 9.   void CnhatC(double *vecs, double *vect, double *X, int *n, int 
>>>> *q,
>>>> int *p, int *vecd, complex double *res) {
>>>> 10.
>>>> 11.    void phinhatReturn(double *vect1, double *vect2, double *vect3,
>>>> double *X, int *q, int *n, double _Complex *res1, double _Complex 
>>>> *res2,
>>>> double _Complex *res3);
>>>> 12.    double _Complex tmp2, prod1 = 1.0 + 0.0*_Complex_I, prod2 = 
>>>> 1.0 +
>>>> 0.0*_Complex_I, somme = 0.0 + 0.0*_Complex_I;
>>>> 13.    int indbeginblocl, l, i, *vecdl, k, j;
>>>> 14.    double *vecsl, *mvectl, *diffvecsvectl, *Xl;
>>>> 15.    double _Complex *res1, *res2, *res3;
>>>> 16.    vecdl = new int[1];
>>>> 17.    res1 =  new _Complex double[1];
>>>> ....
>>>> .....
>>>> etc.
>>>>
>>>> As you can see, there seem to be some problem (on line 9.) with: 
>>>> complex
>>>> double *res
>>>>
>>>> Could you please point me to something (e.g., another package) that
>>>> might help me solve the problem? If possible, I would like to avoid
>>>> invest too much time using the new .Call() interface because I am 
>>>> quite
>>>> familiar
>>>> with the old .C(). And also I am not even sure if it would help 
>>>> solving
>>>> the problem.
>>>
>>> You should be using Rcomplex in the type declaration. (See Writing R
>>> Extensions for a discussion of this.)  It is defined as
>>>
>>> typedef struct {
>>>      double r;
>>>      double i;
>>> } Rcomplex;
>>>
>>> which is likely compatible with your "complex double" on those other
>>> systems (which are using newer gcc versions), but it's not guaranteed
>>> to be, even there.
>>>
>>> Duncan Murdoch
>>
>

-- 
Pierre Lafaye de Micheaux

Adresse courrier:
Universit? de Montr?al
Pavillon Andr?-Aisenstadt
D?partement de Math?matiques et Statistique
CP 6128 Succursale Centre-ville
Montr?al Qc H3C 3J7
CANADA

Adresse physique:
D?partement de Math?matiques et Statistique
Bureau 4249, Pavillon Andr?-Aisenstadt
2920, chemin de la Tour
Montr?al, Qu?bec H3T 1J4
CANADA

T?l.: (00-1) 514-343-6607 / Fax: (00-1) 514-343-5700
lafaye at dms.umontreal.ca
http://www.biostatisticien.eu


From edd at debian.org  Sun Jan  3 13:18:22 2016
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 3 Jan 2016 06:18:22 -0600
Subject: [R-pkg-devel] Problem (with complex.h?) under Microsoft Windows
In-Reply-To: <5688E043.8010801@dms.umontreal.ca>
References: <56460EC9.1020303@dms.umontreal.ca> <564649B0.8000701@gmail.com>
	<5688278E.1020804@dms.umontreal.ca> <56882E5E.2020009@gmail.com>
	<5688E043.8010801@dms.umontreal.ca>
Message-ID: <22153.4494.107707.691269@max.nulle.part>


On 3 January 2016 at 09:48, Pierre Lafaye de Micheaux wrote:
| Thank you for your comments.
| 
| It is indeed the RcppFaddeeva package. I had also tried to put 
| RcppFaddeeva on the LinkingTo line with no success.
| But I will try to ask on the Rcpp mailing list.

The RcppFaddeeva package does _not_ export any headers so there is little use
in adding a 'LinkingTo: RcppFadeeva'.

Compare the directory structure of the installed (or even source) RcppFadeeva
with, say, RcppArmadillo to see the difference.

In short, you can't just reuse / link / deploy another random package. It
needs to be exported.

But if you write to rcpp-devel (after subscribing first !!) we will try to
help you there.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From i.costigan at me.com  Sat Jan  9 02:20:40 2016
From: i.costigan at me.com (Imanuel Costigan)
Date: Sat, 09 Jan 2016 12:20:40 +1100
Subject: [R-pkg-devel] Calls to exported dplyr functions from DBI/dplyr
	backend
Message-ID: <9B90E77F-EF00-4959-AAAD-737C11EB63A2@me.com>

Hi 

I am looking to release an updated version of RSQLServer and noticed that when checking the package, I was getting a large number of errors of the style:

* checking R code for possible problems ... NOTE
auto_copy: no visible global function definition for ?same_src?
b

I have dplyr in Description > Imports and call dplyr functions such as `same_src` without them being imported into my package?s NAMESPACE (or making qualified calls using `::`, the latter being my usual preference). My thinking is that my package?s (dplyr) backend functionality should fail if dplyr itself is not attached on the search path (by for e.g. calling `library(dplyr)`). I think the latter is the behaviour that Hadley has advocated elsewhere (I can?t find reference in places I would expect).

I am looking for guidance on what to do in this circumstance. I see at least two possibilities:

* I import all these dplyr functions into my package (or call with ::) and make CRAN errors go away
* I stick with behaviour described above and risk wasting CRAN maintainers' time and have package rejected.

Many thanks

From edd at debian.org  Sat Jan  9 02:43:20 2016
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri, 8 Jan 2016 19:43:20 -0600
Subject: [R-pkg-devel] Calls to exported dplyr functions from
	DBI/dplyr	backend
In-Reply-To: <9B90E77F-EF00-4959-AAAD-737C11EB63A2@me.com>
References: <9B90E77F-EF00-4959-AAAD-737C11EB63A2@me.com>
Message-ID: <22160.26040.562485.178046@max.nulle.part>


On 9 January 2016 at 12:20, Imanuel Costigan wrote:
| * I import all these dplyr functions into my package (or call with ::) and make CRAN errors go away

This is emerging as a recommended idiom for packages.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch.duncan at gmail.com  Sat Jan  9 10:47:15 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 9 Jan 2016 04:47:15 -0500
Subject: [R-pkg-devel] Calls to exported dplyr functions from DBI/dplyr
 backend
In-Reply-To: <9B90E77F-EF00-4959-AAAD-737C11EB63A2@me.com>
References: <9B90E77F-EF00-4959-AAAD-737C11EB63A2@me.com>
Message-ID: <5690D723.7000302@gmail.com>

On 08/01/2016 8:20 PM, Imanuel Costigan wrote:
> Hi
>
> I am looking to release an updated version of RSQLServer and noticed that when checking the package, I was getting a large number of errors of the style:
>
> * checking R code for possible problems ... NOTE
> auto_copy: no visible global function definition for ?same_src?
> b

> I have dplyr in Description > Imports and call dplyr functions such as `same_src` without them being imported into my package?s NAMESPACE (or making qualified calls using `::`, the latter being my usual preference). My thinking is that my package?s (dplyr) backend functionality should fail if dplyr itself is not attached on the search path (by for e.g. calling `library(dplyr)`). I think the latter is the behaviour that Hadley has advocated elsewhere (I can?t find reference in places I would expect).

If it makes no sense to use your package without dplyr on the search 
path, you should have

Depends:  dplyr

in your DESCRIPTION file rather than Imports:  dplyr.  You should 
explain this choice when you submit to CRAN, because using this means 
that calling library(RSQLServer) will add dplyr to the search path if 
it's not there.  That could mess up something else that a user is doing, 
so should normally be avoided.  It can also cause your functions to 
fail, if a user has already got dplyr on the search path, as well as 
another package that masks some of its functions.  Your package will use 
the first copies it sees (unless you use :: even in this case).

If your package has functions that users might want to use on their own, 
then you should import the dplyr functions that you need, or call them 
with ::.

It doesn't sound like this applies to you, but another possibility is 
that most of your package doesn't need dplyr.  Then you might use

Suggests:  dplyr

and check for it (using "if (requireNamespace('dplyr'))" ) before each 
use with ::.

Duncan Murdoch

> I am looking for guidance on what to do in this circumstance. I see at least two possibilities:

> * I import all these dplyr functions into my package (or call with ::) and make CRAN errors go away
> * I stick with behaviour described above and risk wasting CRAN maintainers' time and have package rejected.


From wx5356a at student.american.edu  Thu Jan 14 06:18:45 2016
From: wx5356a at student.american.edu (Chelsey Xiao)
Date: Thu, 14 Jan 2016 00:18:45 -0500
Subject: [R-pkg-devel] Self built R package would not be installed from
 local zip file in plain R
Message-ID: <CAH6zZCH7V2NSMh+gepPhKDjbYYAe2-oxYgsF1vRTj_3pnOszVw@mail.gmail.com>

Hi Everyone,

Recently I built an R package and it passed R CMD check, install and
generated package manual.

But my problem is that although the package works well on my laptop, it
would not work well in other computers. When I tried on R-studio in other
laptops with no r packages that were needed to be imported to make my
package run, it wouldn't automatically installing packages that I listed in
the "Imports" in Description file. And when I tried to install this Package
in plain R by installing from local zip file, the plain R had warnings:

"Warning in install.packages(choose.files("", filters = Filters[c("zip",  :

Error in read.dcf(file.path(pkgname, "DESCRIPTION"), c("Package", "Type"))
:
  cannot open the connection
In addition: Warning messages:
1: In unzip(zipname, exdir = dest) : error 1 in extracting from zip file
2: In read.dcf(file.path(pkgname, "DESCRIPTION"), c("Package", "Type")) :
  cannot open compressed file 'R-3.2.3-win.exe/DESCRIPTION', probable
reason 'No such file or directory'
> utils:::menuInstallPkgs()

I do not know how to handle these problems. How would I test my package
before I put it on CRAN if the package would not run in other devices?

Could anyone tell me what should I do? I will appreciate any helps.

Sincerely,
Chelsey

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Thu Jan 14 16:29:03 2016
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Thu, 14 Jan 2016 16:29:03 +0100
Subject: [R-pkg-devel] Self built R package would not be installed from
 local zip file in plain R
In-Reply-To: <CAH6zZCH7V2NSMh+gepPhKDjbYYAe2-oxYgsF1vRTj_3pnOszVw@mail.gmail.com>
References: <CAH6zZCH7V2NSMh+gepPhKDjbYYAe2-oxYgsF1vRTj_3pnOszVw@mail.gmail.com>
Message-ID: <5697BEBF.6070903@statistik.tu-dortmund.de>



On 14.01.2016 06:18, Chelsey Xiao wrote:
> Hi Everyone,
>
> Recently I built an R package and it passed R CMD check, install and
> generated package manual.
>
> But my problem is that although the package works well on my laptop, it
> would not work well in other computers. When I tried on R-studio in other
> laptops with no r packages that were needed to be imported to make my
> package run, it wouldn't automatically installing packages that I listed in
> the "Imports" in Description file. And when I tried to install this Package
> in plain R by installing from local zip file, the plain R had warnings:
>
> "Warning in install.packages(choose.files("", filters = Filters[c("zip",  :
>
> Error in read.dcf(file.path(pkgname, "DESCRIPTION"), c("Package", "Type"))
> :
>    cannot open the connection
> In addition: Warning messages:
> 1: In unzip(zipname, exdir = dest) : error 1 in extracting from zip file
> 2: In read.dcf(file.path(pkgname, "DESCRIPTION"), c("Package", "Type")) :
>    cannot open compressed file 'R-3.2.3-win.exe

Errr, your packasge is not called "R-3.2.3-win.exe", is it?

Best,
Uwe Ligges





/DESCRIPTION', probable
> reason 'No such file or directory'
>> utils:::menuInstallPkgs()
>
> I do not know how to handle these problems. How would I test my package
> before I put it on CRAN if the package would not run in other devices?
>
> Could anyone tell me what should I do? I will appreciate any helps.
>
> Sincerely,
> Chelsey
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From sven.templer at gmail.com  Wed Jan 20 08:42:22 2016
From: sven.templer at gmail.com (Sven E. Templer)
Date: Wed, 20 Jan 2016 08:42:22 +0100
Subject: [R-pkg-devel] winbuilder - missing global definitions / error in
	example latex code stdout
Message-ID: <B9B52584-1C27-4172-ADD3-E5C0B4C35490@icloud.com>

Hello everybody,

i uploaded a package to the win-builder.r-project.org (R-devel) and received a 00check.log that NOTifiEs about missing visible global functions. Please see 
http://win-builder.r-project.org/WZnnzaSqBse4/00check.log 
at the lines following: 
* checking R code for possible problems ... NOTE

This is not happening on local Darwin and Linux (64bit) (R 3.2.3) checks, nor on the win-builder R-release, e.g. see
http://win-builder.r-project.org/a83iezxtXSg4/00check.log

Despite, on both win-builder checks, I recognized errors (not on local Darwin and Linux) running examples that print latex code (see the logs from above).

Two questions:

a) Is the 'missing global functions' issue in win-builder R-devel a planned change in the R future release, so one will need to import base functions in future, or is it an unsolved issue in the developmental stage?

b) Is it (also for Linux and Darwin) suggested to '\dontrun{}' examples with standard output (esp. in latex code)?

Many thanks for enlightening me,
Sven

From ligges at statistik.tu-dortmund.de  Wed Jan 20 09:58:25 2016
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 20 Jan 2016 09:58:25 +0100
Subject: [R-pkg-devel] winbuilder - missing global definitions / error
 in example latex code stdout
In-Reply-To: <B9B52584-1C27-4172-ADD3-E5C0B4C35490@icloud.com>
References: <B9B52584-1C27-4172-ADD3-E5C0B4C35490@icloud.com>
Message-ID: <569F4C31.3070405@statistik.tu-dortmund.de>



On 20.01.2016 08:42, Sven E. Templer wrote:
> Hello everybody,
>
> i uploaded a package to the win-builder.r-project.org (R-devel) and received a 00check.log that NOTifiEs about missing visible global functions. Please see
> http://win-builder.r-project.org/WZnnzaSqBse4/00check.log
> at the lines following:
> * checking R code for possible problems ... NOTE
>
> This is not happening on local Darwin and Linux (64bit) (R 3.2.3) checks, nor on the win-builder R-release, e.g. see
> http://win-builder.r-project.org/a83iezxtXSg4/00check.log
>
> Despite, on both win-builder checks, I recognized errors (not on local Darwin and Linux) running examples that print latex code (see the logs from above).
>
> Two questions:
>
> a) Is the 'missing global functions' issue in win-builder R-devel a planned change in the R future release, so one will need to import base functions in future, or is it an unsolved issue in the developmental stage?


No, this is a new and important check that we forgot in previous 
releases of R. Hence R-release is wrong not to warn about it.


> b) Is it (also for Linux and Darwin) suggested to '\dontrun{}' examples with standard output (esp. in latex code)?

No, it is suggested not to hardcode paths such as "/tmp" that are not 
available under, e.g., Windows. You can write to tempdir().

Best,
Uwe Ligges


>
> Many thanks for enlightening me,
> Sven
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From francois.michonneau at gmail.com  Wed Jan 20 17:50:04 2016
From: francois.michonneau at gmail.com (=?UTF-8?Q?Fran=C3=A7ois_Michonneau?=)
Date: Wed, 20 Jan 2016 11:50:04 -0500
Subject: [R-pkg-devel] Issue with vignette on win-builder
Message-ID: <CAKL30wXPvfGcm=1HtooVH6m1ORJVpQM90pNpd8c3jrofS+vNhA@mail.gmail.com>

Hello all,

  On win-builder (both with R 3.2.3 and R-devel), I see this error at the
end of the check.log. Would anyone have any hint on what might be wrong and
possible ways of debugging? I obviously can't reproduce this on my Linux
systems.

  The vignette is built to HTML with knitr as the engine and contains calls
to an API. Previous versions of it were passing the R CMD check on
win-builder without this issue.

 Thanks,
  -- Fran?ois

* checking re-building of vignette outputs ... ERROR
Check process probably crashed or hung up for 20 minutes ... killed
Most likely this happened in the example checks (?),
if not, ignore the following last lines of example output:

======== End of example output (where/before crash/hang up occured ?) ========

	[[alternative HTML version deleted]]


From dmarcelino at live.com  Wed Jan 20 18:10:23 2016
From: dmarcelino at live.com (Daniel Marcelino)
Date: Wed, 20 Jan 2016 14:10:23 -0300
Subject: [R-pkg-devel] =?windows-1256?q?Previous_messageNext_messageBack_t?=
 =?windows-1256?q?o_messages_The_following_files_should_probably_not_be_in?=
 =?windows-1256?q?stalled=FE?=
Message-ID: <SNT146-W41CCB69C3A1E80AB0D4541BBC20@phx.gbl>

Hi, I used to have some pictures in ?inst/doc? for decoration of the README.MD text, most for the Github repository.
I was able to build the package without any NOTE on this, but since I updated to R 3.2.3 and created a vignette folder I'm receiving the following message. Am I missing something from the last R release?

* checking sizes of PDF files under ?inst/doc? ... OK
* checking installed files from ?inst/doc? ... NOTE
The following files should probably not be installed:
?Rlogo.png?, ?SciencesPo_logo.png?, ?butterfly.png?

Daniel

 		 	   		  

From edd at debian.org  Wed Jan 20 18:55:47 2016
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 20 Jan 2016 11:55:47 -0600
Subject: [R-pkg-devel]
	=?utf-8?q?Previous_messageNext_messageBack_to_messa?=
	=?utf-8?q?ges_The_following_files_should_probably_not_be_installed?=
	=?utf-8?b?4oCP?=
In-Reply-To: <SNT146-W41CCB69C3A1E80AB0D4541BBC20@phx.gbl>
References: <SNT146-W41CCB69C3A1E80AB0D4541BBC20@phx.gbl>
Message-ID: <22175.51747.513815.205143@max.nulle.part>


On 20 January 2016 at 14:10, Daniel Marcelino wrote:
| Hi, I used to have some pictures in ?inst/doc? for decoration of the README.MD text, most for the Github repository.
| I was able to build the package without any NOTE on this, but since I updated to R 3.2.3 and created a vignette folder I'm receiving the following message. Am I missing something from the last R release?
| 
| * checking sizes of PDF files under ?inst/doc? ... OK
| * checking installed files from ?inst/doc? ... NOTE
| The following files should probably not be installed:
| ?Rlogo.png?, ?SciencesPo_logo.png?, ?butterfly.png?

Just list them in .Rbuildignore --- they will still be in the GH repo but not
be part of the resulting .tar.gz. Hemce R CMD check will be no longer complain.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch.duncan at gmail.com  Wed Jan 20 19:08:01 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 20 Jan 2016 13:08:01 -0500
Subject: [R-pkg-devel] Issue with vignette on win-builder
In-Reply-To: <CAKL30wXPvfGcm=1HtooVH6m1ORJVpQM90pNpd8c3jrofS+vNhA@mail.gmail.com>
References: <CAKL30wXPvfGcm=1HtooVH6m1ORJVpQM90pNpd8c3jrofS+vNhA@mail.gmail.com>
Message-ID: <569FCD01.5030708@gmail.com>

On 20/01/2016 11:50 AM, Fran?ois Michonneau wrote:
> Hello all,
>
>    On win-builder (both with R 3.2.3 and R-devel), I see this error at the
> end of the check.log. Would anyone have any hint on what might be wrong and
> possible ways of debugging? I obviously can't reproduce this on my Linux
> systems.
>
>    The vignette is built to HTML with knitr as the engine and contains calls
> to an API. Previous versions of it were passing the R CMD check on
> win-builder without this issue.
>
>   Thanks,
>    -- Fran?ois
>
> * checking re-building of vignette outputs ... ERROR
> Check process probably crashed or hung up for 20 minutes ... killed
> Most likely this happened in the example checks (?),
> if not, ignore the following last lines of example output:
>

It says that it started building your vignette, but the process was 
killed when it hadn't finished in 20 minutes.

I'd suggest to debug it that you leave the vignette out of the package 
temporarily, but extract all of its R code (using the purl() function), 
and include that script as a test script.  I believe you'll get more 
informative error messages from a test failure than a vignette failure.

Duncan Murdoch


From dmarcelino at live.com  Wed Jan 20 19:20:43 2016
From: dmarcelino at live.com (Daniel Marcelino)
Date: Wed, 20 Jan 2016 16:20:43 -0200
Subject: [R-pkg-devel]
 =?utf-8?q?Previous_messageNext_messageBack_to_messa?=
 =?utf-8?q?ges_The_following_files_should_probably_not_be_installed?=
 =?utf-8?b?4oCP?=
In-Reply-To: <22175.51747.513815.205143@max.nulle.part>
References: <SNT146-W41CCB69C3A1E80AB0D4541BBC20@phx.gbl>
	<22175.51747.513815.205143@max.nulle.part>
Message-ID: <SNT404-EAS20666C64B53BE3FDAA4CD75BBC20@phx.gbl>

Thanks for this Dirk.
Daniel

Sent from my iPhone

> On Jan 20, 2016, at 3:55 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> 
> On 20 January 2016 at 14:10, Daniel Marcelino wrote:
> | Hi, I used to have some pictures in ?inst/doc? for decoration of the README.MD text, most for the Github repository.
> | I was able to build the package without any NOTE on this, but since I updated to R 3.2.3 and created a vignette folder I'm receiving the following message. Am I missing something from the last R release?
> | 
> | * checking sizes of PDF files under ?inst/doc? ... OK
> | * checking installed files from ?inst/doc? ... NOTE
> | The following files should probably not be installed:
> | ?Rlogo.png?, ?SciencesPo_logo.png?, ?butterfly.png?
> 
> Just list them in .Rbuildignore --- they will still be in the GH repo but not
> be part of the resulting .tar.gz. Hemce R CMD check will be no longer complain.
> 
> Dirk
> 
> -- 
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

From Rainer at krugs.de  Thu Jan 21 11:03:59 2016
From: Rainer at krugs.de (Rainer M Krug)
Date: Thu, 21 Jan 2016 11:03:59 +0100
Subject: [R-pkg-devel] Adding non-exported functions in an extra environment
	in new S4 object
Message-ID: <m27fj3s0z4.fsf@krugs.de>

Hi

I have a package named asm which contains many non-exported functions
which are all starting with "for.eq.".

I also have an S4 class ASM which, when a new object asm of class ASM is
created by using the function newASM() (in the package asm) contains
among other slots one sot with an environment called "equations"
(including the definition of the function"equations" and "equations<-").

Now in this function newASM() I want to copy all functions starting with
"for.eq." into this environment.

I have the following code:

--8<---------------cut here---------------start------------->8---
    ASM at equations <- new.env()
    funs <- apropos("^for\\.eq\\.", mode="function")
    for (fun in funs) {
        assign(
            gsub("for.eq.", "", fun),
            get(fun),
            ASM at equations
        )
    }
--8<---------------cut here---------------end--------------->8---

outside the package I call it as follow:

--8<---------------cut here---------------start------------->8---
asm <- newASM()
--8<---------------cut here---------------end--------------->8---

This worked fine when the functions "for.eq.*" were exported, but does
not work anymore now that I don't export them anymore.

This is a bit surprising to me, as the function newASM() is in the
package and I assumed that inside of a package, all exported and
non-exported functions are seen.

My question:

how can I add all functions starting with "for.eq." into the
environment, irrespective if they are exported or not?

Why I want to do this: I want to be able to have the functions
encapsulated in the environment of the object asm as they are used in a
simulation executed by the sim() function, which attaches the equations
environment at the beginning and detaches it at the end.

This enables me to have different simulation objects with different
functions.

Thanks,

Rainer

-- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Centre of Excellence for Invasion Biology
Stellenbosch University
South Africa

Tel :       +33 - (0)9 53 10 27 44
Cell:       +33 - (0)6 85 62 59 98
Fax :       +33 - (0)9 58 10 27 44

Fax (D):    +49 - (0)3 21 21 25 22 44

email:      Rainer at krugs.de

Skype:      RMkrug

PGP: 0x0F52F982
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 454 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20160121/c4f43e8e/attachment.bin>

From Rainer at krugs.de  Thu Jan 21 11:50:43 2016
From: Rainer at krugs.de (Rainer M Krug)
Date: Thu, 21 Jan 2016 11:50:43 +0100
Subject: [R-pkg-devel] Adding non-exported functions in an extra
	environment in new S4 object
In-Reply-To: <m27fj3s0z4.fsf@krugs.de> (Rainer M. Krug's message of "Thu, 21
	Jan 2016 11:03:59 +0100")
References: <m27fj3s0z4.fsf@krugs.de>
Message-ID: <m237trryt8.fsf@krugs.de>

Rainer M Krug <Rainer at krugs.de> writes:

> Hi
>
> I have a package named asm which contains many non-exported functions
> which are all starting with "for.eq.".
>
> I also have an S4 class ASM which, when a new object asm of class ASM is
> created by using the function newASM() (in the package asm) contains
> among other slots one sot with an environment called "equations"
> (including the definition of the function"equations" and "equations<-").
>
> Now in this function newASM() I want to copy all functions starting with
> "for.eq." into this environment.
>
> I have the following code:
>
>     ASM at equations <- new.env()
>     funs <- apropos("^for\\.eq\\.", mode="function")
>     for (fun in funs) {
>         assign(
>             gsub("for.eq.", "", fun),
>             get(fun),
>             ASM at equations
>         )
>     }
>
> outside the package I call it as follow:
>
> asm <- newASM()
>
> This worked fine when the functions "for.eq.*" were exported, but does
> not work anymore now that I don't export them anymore.
>
> This is a bit surprising to me, as the function newASM() is in the
> package and I assumed that inside of a package, all exported and
> non-exported functions are seen.
>
> My question:
>
> how can I add all functions starting with "for.eq." into the
> environment, irrespective if they are exported or not?

I found a solution:

--8<---------------cut here---------------start------------->8---
    funs <- grep(
        pattern = "for.eq.*",
        x = ls(
            getNamespace("asm"),
            all.names=TRUE
        ),
        value = TRUE
    )
    for (fun in funs) {
        assign(
            gsub("for.eq.", "", fun),
            get(fun, getNamespace("asm")),
            ASM at equations
        )
    }
--8<---------------cut here---------------end--------------->8---

It adds all objects starting with "for.eq." but this is fine with me.

Thanks,

Rainer

>
> Why I want to do this: I want to be able to have the functions
> encapsulated in the environment of the object asm as they are used in a
> simulation executed by the sim() function, which attaches the equations
> environment at the beginning and detaches it at the end.
>
> This enables me to have different simulation objects with different
> functions.
>
> Thanks,
>
> Rainer

-- 
Rainer M. Krug
email: Rainer<at>krugs<dot>de
PGP: 0x0F52F982
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 454 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20160121/ab1aa8ad/attachment.bin>

From tom.quarendon at teamwpc.co.uk  Thu Jan 21 17:39:59 2016
From: tom.quarendon at teamwpc.co.uk (Tom Quarendon)
Date: Thu, 21 Jan 2016 16:39:59 +0000
Subject: [R-pkg-devel] How to pass a connection into a C function (R 3.2)
Message-ID: <AM2PR05MB0771D366F6E514BCE535C68DB0C30@AM2PR05MB0771.eurprd05.prod.outlook.com>

I would like to implement a package that contains a C function that writes to a connection.
So the R_ext/Connections.h defines what a connection IS, but not how to get one.

What seems to work is to manually declare
Rconnection getConnection(int n);
In my C file, and while this works, and I can then use the connection object, it fails package validation with:

?Found non-API call to R: ?getConnection?
Compiled code should not call non-API entry points in R.?

So how am I supposed to do this? Is there a way? Or do I just live with the check warning (ideally not)?

Thanks.

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Thu Jan 21 18:42:55 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 21 Jan 2016 12:42:55 -0500
Subject: [R-pkg-devel] How to pass a connection into a C function (R 3.2)
In-Reply-To: <AM2PR05MB0771D366F6E514BCE535C68DB0C30@AM2PR05MB0771.eurprd05.prod.outlook.com>
References: <AM2PR05MB0771D366F6E514BCE535C68DB0C30@AM2PR05MB0771.eurprd05.prod.outlook.com>
Message-ID: <56A1189F.3080307@gmail.com>

On 21/01/2016 11:39 AM, Tom Quarendon wrote:
> I would like to implement a package that contains a C function that writes to a connection.
> So the R_ext/Connections.h defines what a connection IS, but not how to get one.
>
> What seems to work is to manually declare
> Rconnection getConnection(int n);
> In my C file, and while this works, and I can then use the connection object, it fails package validation with:
>
> ?Found non-API call to R: ?getConnection?
> Compiled code should not call non-API entry points in R.?
>
> So how am I supposed to do this? Is there a way? Or do I just live with the check warning (ideally not)?

The usual way to do that would be to create the connection in R code, 
and pass it in with your call.

If you don't know what connection you need at the time you call your C 
code, you can evaluate an R expression from C to do the same, but this 
is relatively tricky, so I'd advise the other method.

Duncan Murdoch


From tom.quarendon at teamwpc.co.uk  Thu Jan 21 18:49:45 2016
From: tom.quarendon at teamwpc.co.uk (Tom Quarendon)
Date: Thu, 21 Jan 2016 17:49:45 +0000
Subject: [R-pkg-devel] How to pass a connection into a C function (R 3.2)
In-Reply-To: <56A1189F.3080307@gmail.com>
References: <AM2PR05MB0771D366F6E514BCE535C68DB0C30@AM2PR05MB0771.eurprd05.prod.outlook.com>,
	<56A1189F.3080307@gmail.com>
Message-ID: <4DC2EEB5-EFF2-471A-BF7F-B2799DB2D5F5@teamwpc.co.uk>

But that's what I want to do, create the connection in R code and pass it on to the C function.
My question is, how do I do that?
You appear to need the C getConnection entry point, but it's not part of the API. 
So I'm wondering how I'm supposed to do what you describe.

Sorry if I was unclear.

Sent from my iPhone

> On 21 Jan 2016, at 5:44 pm, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
>> On 21/01/2016 11:39 AM, Tom Quarendon wrote:
>> I would like to implement a package that contains a C function that writes to a connection.
>> So the R_ext/Connections.h defines what a connection IS, but not how to get one.
>> 
>> What seems to work is to manually declare
>> Rconnection getConnection(int n);
>> In my C file, and while this works, and I can then use the connection object, it fails package validation with:
>> 
>> ?Found non-API call to R: ?getConnection?
>> Compiled code should not call non-API entry points in R.?
>> 
>> So how am I supposed to do this? Is there a way? Or do I just live with the check warning (ideally not)?
> 
> The usual way to do that would be to create the connection in R code, and pass it in with your call.
> 
> If you don't know what connection you need at the time you call your C code, you can evaluate an R expression from C to do the same, but this is relatively tricky, so I'd advise the other method.
> 
> Duncan Murdoch

From tom.quarendon at teamwpc.co.uk  Thu Jan 21 18:50:25 2016
From: tom.quarendon at teamwpc.co.uk (Tom Quarendon)
Date: Thu, 21 Jan 2016 17:50:25 +0000
Subject: [R-pkg-devel] How to pass a connection into a C function (R 3.2)
In-Reply-To: <56A1189F.3080307@gmail.com>
References: <AM2PR05MB0771D366F6E514BCE535C68DB0C30@AM2PR05MB0771.eurprd05.prod.outlook.com>
	<56A1189F.3080307@gmail.com>
Message-ID: <30AC5829-2DAF-45D6-B249-DA2508541748@teamwpc.co.uk>

But that's what I want to do, create the connection in R code and pass it on to the C function.
My question is, how do I do that?
You appear to need the C getConnection entry point, but it's not part of the API. 
So I'm wondering how I'm supposed to do what you describe.

Sorry if I was unclear.

Sent from my iPhone

>> On 21 Jan 2016, at 5:44 pm, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>> 
>> On 21/01/2016 11:39 AM, Tom Quarendon wrote:
>> I would like to implement a package that contains a C function that writes to a connection.
>> So the R_ext/Connections.h defines what a connection IS, but not how to get one.
>> 
>> What seems to work is to manually declare
>> Rconnection getConnection(int n);
>> In my C file, and while this works, and I can then use the connection object, it fails package validation with:
>> 
>> ?Found non-API call to R: ?getConnection?
>> Compiled code should not call non-API entry points in R.?
>> 
>> So how am I supposed to do this? Is there a way? Or do I just live with the check warning (ideally not)?
> 
> The usual way to do that would be to create the connection in R code, and pass it in with your call.
> 
> If you don't know what connection you need at the time you call your C code, you can evaluate an R expression from C to do the same, but this is relatively tricky, so I'd advise the other method.
> 
> Duncan Murdoch

From murdoch.duncan at gmail.com  Thu Jan 21 19:03:14 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 21 Jan 2016 13:03:14 -0500
Subject: [R-pkg-devel] How to pass a connection into a C function (R 3.2)
In-Reply-To: <30AC5829-2DAF-45D6-B249-DA2508541748@teamwpc.co.uk>
References: <AM2PR05MB0771D366F6E514BCE535C68DB0C30@AM2PR05MB0771.eurprd05.prod.outlook.com>
	<56A1189F.3080307@gmail.com>
	<30AC5829-2DAF-45D6-B249-DA2508541748@teamwpc.co.uk>
Message-ID: <56A11D62.9090209@gmail.com>

On 21/01/2016 12:50 PM, Tom Quarendon wrote:
> But that's what I want to do, create the connection in R code and pass it on to the C function.
> My question is, how do I do that?
> You appear to need the C getConnection entry point, but it's not part of the API.
> So I'm wondering how I'm supposed to do what you describe.

Sorry, my advice was wrong.  I remembered that we exposed code to create 
new connections, and assumed it had some code to work with them, but it 
doesn't.

Duncan Murdoch
>
> Sorry if I was unclear.
>
> Sent from my iPhone
>
> >> On 21 Jan 2016, at 5:44 pm, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> >>
> >> On 21/01/2016 11:39 AM, Tom Quarendon wrote:
> >> I would like to implement a package that contains a C function that writes to a connection.
> >> So the R_ext/Connections.h defines what a connection IS, but not how to get one.
> >>
> >> What seems to work is to manually declare
> >> Rconnection getConnection(int n);
> >> In my C file, and while this works, and I can then use the connection object, it fails package validation with:
> >>
> >> ?Found non-API call to R: ?getConnection?
> >> Compiled code should not call non-API entry points in R.?
> >>
> >> So how am I supposed to do this? Is there a way? Or do I just live with the check warning (ideally not)?
> >
> > The usual way to do that would be to create the connection in R code, and pass it in with your call.
> >
> > If you don't know what connection you need at the time you call your C code, you can evaluate an R expression from C to do the same, but this is relatively tricky, so I'd advise the other method.
> >
> > Duncan Murdoch


From tom.quarendon at teamwpc.co.uk  Thu Jan 21 19:07:46 2016
From: tom.quarendon at teamwpc.co.uk (Tom Quarendon)
Date: Thu, 21 Jan 2016 18:07:46 +0000
Subject: [R-pkg-devel] How to pass a connection into a C function (R 3.2)
In-Reply-To: <56A11D62.9090209@gmail.com>
References: <AM2PR05MB0771D366F6E514BCE535C68DB0C30@AM2PR05MB0771.eurprd05.prod.outlook.com>
	<56A1189F.3080307@gmail.com>
	<30AC5829-2DAF-45D6-B249-DA2508541748@teamwpc.co.uk>,
	<56A11D62.9090209@gmail.com>
Message-ID: <7086C8A6-AEE1-47E9-98E2-A23D9918532A@teamwpc.co.uk>

So upshot is that I can only do why I want by using the function that's not part of the api, or just not using connections at all and just using normal C file io, opened from C, and simply pass the file name in instead, rather than a proper connection object?

> On 21 Jan 2016, at 6:04 pm, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
>> On 21/01/2016 12:50 PM, Tom Quarendon wrote:
>> But that's what I want to do, create the connection in R code and pass it on to the C function.
>> My question is, how do I do that?
>> You appear to need the C getConnection entry point, but it's not part of the API.
>> So I'm wondering how I'm supposed to do what you describe.
> 
> Sorry, my advice was wrong.  I remembered that we exposed code to create new connections, and assumed it had some code to work with them, but it doesn't.
> 
> Duncan Murdoch
>> 
>> Sorry if I was unclear.
>> 
>> Sent from my iPhone
>> 
>> >> On 21 Jan 2016, at 5:44 pm, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>> >>
>> >> On 21/01/2016 11:39 AM, Tom Quarendon wrote:
>> >> I would like to implement a package that contains a C function that writes to a connection.
>> >> So the R_ext/Connections.h defines what a connection IS, but not how to get one.
>> >>
>> >> What seems to work is to manually declare
>> >> Rconnection getConnection(int n);
>> >> In my C file, and while this works, and I can then use the connection object, it fails package validation with:
>> >>
>> >> ?Found non-API call to R: ?getConnection?
>> >> Compiled code should not call non-API entry points in R.?
>> >>
>> >> So how am I supposed to do this? Is there a way? Or do I just live with the check warning (ideally not)?
>> >
>> > The usual way to do that would be to create the connection in R code, and pass it in with your call.
>> >
>> > If you don't know what connection you need at the time you call your C code, you can evaluate an R expression from C to do the same, but this is relatively tricky, so I'd advise the other method.
>> >
>> > Duncan Murdoch
> 

From murdoch.duncan at gmail.com  Thu Jan 21 20:57:14 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 21 Jan 2016 14:57:14 -0500
Subject: [R-pkg-devel] How to pass a connection into a C function (R 3.2)
In-Reply-To: <7086C8A6-AEE1-47E9-98E2-A23D9918532A@teamwpc.co.uk>
References: <AM2PR05MB0771D366F6E514BCE535C68DB0C30@AM2PR05MB0771.eurprd05.prod.outlook.com>
	<56A1189F.3080307@gmail.com>
	<30AC5829-2DAF-45D6-B249-DA2508541748@teamwpc.co.uk>
	<56A11D62.9090209@gmail.com>
	<7086C8A6-AEE1-47E9-98E2-A23D9918532A@teamwpc.co.uk>
Message-ID: <56A1381A.6080600@gmail.com>

On 21/01/2016 1:07 PM, Tom Quarendon wrote:
> So upshot is that I can only do why I want by using the function that's not part of the api, or just not using connections at all and just using normal C file io, opened from C, and simply pass the file name in instead, rather than a proper connection object?

You could also call R from C to do the I/O for you.

Duncan Murdoch

>> On 21 Jan 2016, at 6:04 pm, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>>> On 21/01/2016 12:50 PM, Tom Quarendon wrote:
>>> But that's what I want to do, create the connection in R code and pass it on to the C function.
>>> My question is, how do I do that?
>>> You appear to need the C getConnection entry point, but it's not part of the API.
>>> So I'm wondering how I'm supposed to do what you describe.
>>
>> Sorry, my advice was wrong.  I remembered that we exposed code to create new connections, and assumed it had some code to work with them, but it doesn't.
>>
>> Duncan Murdoch
>>>
>>> Sorry if I was unclear.
>>>
>>> Sent from my iPhone
>>>
>>>>> On 21 Jan 2016, at 5:44 pm, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>>>>
>>>>> On 21/01/2016 11:39 AM, Tom Quarendon wrote:
>>>>> I would like to implement a package that contains a C function that writes to a connection.
>>>>> So the R_ext/Connections.h defines what a connection IS, but not how to get one.
>>>>>
>>>>> What seems to work is to manually declare
>>>>> Rconnection getConnection(int n);
>>>>> In my C file, and while this works, and I can then use the connection object, it fails package validation with:
>>>>>
>>>>> ?Found non-API call to R: ?getConnection?
>>>>> Compiled code should not call non-API entry points in R.?
>>>>>
>>>>> So how am I supposed to do this? Is there a way? Or do I just live with the check warning (ideally not)?
>>>>
>>>> The usual way to do that would be to create the connection in R code, and pass it in with your call.
>>>>
>>>> If you don't know what connection you need at the time you call your C code, you can evaluate an R expression from C to do the same, but this is relatively tricky, so I'd advise the other method.
>>>>
>>>> Duncan Murdoch
>>


From malsburg at posteo.de  Sun Jan 24 00:12:01 2016
From: malsburg at posteo.de (Titus von der Malsburg)
Date: Sat, 23 Jan 2016 15:12:01 -0800
Subject: [R-pkg-devel] Packages that depend on third-party binaries
Message-ID: <87wpqzx54u.fsf@posteo.de>


Hi all,

I have a package that might be useful for a lot of my colleagues.  It
provides functions for reading a binary file format generated by
measurement instruments by a specific manufacturer.  Eventually, I would
like to make this package available on CRAN.

One problem is that this package uses a binary blob provided by said
manufacturer.  I understand that it is not allowed to include binaries
in R packages.  The question is, what else can I do?  Are there any
recommendations or best practices that one should follow in this
situation?  Any example of existing CRAN packages that deal with this
problem?

I suppose one solution would be that the R code installs without the
binary but warns when the user tries to use it without having installed
the binary.  In this scenario, it would be the user?s responsibility to
make sure that the binary is correctly installed.  If the user fails to
do that, the package is completely useless.  Of course this also has
implications for the sample code in the man pages which is not
guaranteed to work and will certainly not work on CRAN build servers.

  Titus
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 472 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20160123/434211c7/attachment.bin>

From murdoch.duncan at gmail.com  Sun Jan 24 00:27:07 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 23 Jan 2016 18:27:07 -0500
Subject: [R-pkg-devel] Packages that depend on third-party binaries
In-Reply-To: <87wpqzx54u.fsf@posteo.de>
References: <87wpqzx54u.fsf@posteo.de>
Message-ID: <56A40C4B.9010904@gmail.com>

On 23/01/2016 6:12 PM, Titus von der Malsburg wrote:
>
> Hi all,
>
> I have a package that might be useful for a lot of my colleagues.  It
> provides functions for reading a binary file format generated by
> measurement instruments by a specific manufacturer.  Eventually, I would
> like to make this package available on CRAN.
>
> One problem is that this package uses a binary blob provided by said
> manufacturer.  I understand that it is not allowed to include binaries
> in R packages.  The question is, what else can I do?  Are there any
> recommendations or best practices that one should follow in this
> situation?  Any example of existing CRAN packages that deal with this
> problem?
>
> I suppose one solution would be that the R code installs without the
> binary but warns when the user tries to use it without having installed
> the binary.  In this scenario, it would be the user?s responsibility to
> make sure that the binary is correctly installed.  If the user fails to
> do that, the package is completely useless.  Of course this also has
> implications for the sample code in the man pages which is not
> guaranteed to work and will certainly not work on CRAN build servers.

Examples of packages like that are RGtk2 and rjags (for either or both 
of which I might have the capitalization wrong).

You need to be sure your examples don't fail whether or not the 
externals are available.

I think both of those packages list the external dependencies in 
DESCRIPTION, and refuse to load if the dependencies aren't present.  So 
then the examples should all work.

Another approach is to include a function that tests for the presence of 
the externals, and only runs the examples when they will work.

You shouldn't include examples that fail.

I don't know if CRAN will accept your package if it is hard to obtain 
the external software because of license issues.  So you might think 
about distributing such a package to your colleagues and others by a 
less careful channel, e.g. Github.  I tell my students *never* to use 
packages unless they are on CRAN, but you may have no choice.

Duncan Murdoch


From edd at debian.org  Sun Jan 24 00:55:06 2016
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 23 Jan 2016 17:55:06 -0600
Subject: [R-pkg-devel] Packages that depend on third-party binaries
In-Reply-To: <87wpqzx54u.fsf@posteo.de>
References: <87wpqzx54u.fsf@posteo.de>
Message-ID: <22180.4826.534879.85098@max.nulle.part>


Titus,

On 23 January 2016 at 15:12, Titus von der Malsburg wrote:
| I have a package that might be useful for a lot of my colleagues.  It
| provides functions for reading a binary file format generated by
| measurement instruments by a specific manufacturer.  Eventually, I would
| like to make this package available on CRAN.
| 
| One problem is that this package uses a binary blob provided by said
| manufacturer.  I understand that it is not allowed to include binaries
| in R packages.  The question is, what else can I do?  Are there any
| recommendations or best practices that one should follow in this
| situation?  Any example of existing CRAN packages that deal with this
| problem?

We just released the 'x13binary' package to CRAN for this.

It provides the X-13ARIMA-SEATS seasonal adjustment program provided by the
US Census for use by other programs -- notably Christoph Sax's (excellent)
'seasonal' CRAN package (see also the very pretty http://www.seasonal.website ).

The 'x13binary' package downloads suitable binaries we fetch at build time
from the corresponding 'x13prebuilt' repo.  Both the source for 'x13binary'
and these 'x13prebuilt' binaries are inside the http://github.com/x13org repo
Christoph and I set up.

Now X-13ARIMA-SEATS is a special case. US Government works cannot be
copyright in the US, so distribution here is fine -- but for other countries
it is murky because it is a bit of a non-standard license.  CRAN and I went
back and forth for a few days on this.  But that package is now out there.
We are currently awaiting the processing of 'seasonal' from incoming at CRAN
which should hopefilly get through 'soon'.  Once it is, I plan to release a
(small) package using 'seasonal' (and hence 'x13binary' / X-13ARIMA-SEATS) to
redo something (in a package) the NY Times recently did with (and for which
they released non-package code).

Now, for your 'binary blob from said manufacturer' the license may well
prevent upload to CRAN.  You can, however, have CRAN use a Suggests: to a
third-party repo -- for which you could use small repo (maybe even created
and managed with my 'drat' package -- there are precedents) and then have the
off-CRAN package deal with the blob.
 
| I suppose one solution would be that the R code installs without the
| binary but warns when the user tries to use it without having installed
| the binary.  In this scenario, it would be the user?s responsibility to
| make sure that the binary is correctly installed.  If the user fails to

That is exactly what 'seasonal' versions up to 1.1 (currently on CRAN) did.

Now we are trying to do one better to automate this because here we can (or
so we think -- given the license).  We think it would be a boost for
'X-13ARIMA-SEATS' use which is why the did this work in the first place.

| do that, the package is completely useless.  Of course this also has
| implications for the sample code in the man pages which is not
| guaranteed to work and will certainly not work on CRAN build servers.

Hope this helps, regards, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From malsburg at posteo.de  Sun Jan 24 01:34:28 2016
From: malsburg at posteo.de (Titus von der Malsburg)
Date: Sat, 23 Jan 2016 16:34:28 -0800
Subject: [R-pkg-devel] Packages that depend on third-party binaries
In-Reply-To: <22180.4826.534879.85098@max.nulle.part>
References: <87wpqzx54u.fsf@posteo.de> <22180.4826.534879.85098@max.nulle.part>
Message-ID: <87vb6jx1bo.fsf@posteo.de>


Thank you, Dirk and Duncan.  I think I will go the same route as the
current seasonal package then.  In my case, I can expect users to be
able to install the binary by themselves.  The license of the binary may
also prevent us from doing anything more than that.

Duncan, according to ?Writing R Extensions?, the field
SystemRequirements can be used to list external dependencies but I
gather that the content of this field is purely descriptive and that the
dependencies listed in it are not enforced by R.

Thanks again.

  Titus

On 2016-01-23 Sat 15:55, Dirk Eddelbuettel wrote:
> Titus,
>
> On 23 January 2016 at 15:12, Titus von der Malsburg wrote:
> | I have a package that might be useful for a lot of my colleagues.  It
> | provides functions for reading a binary file format generated by
> | measurement instruments by a specific manufacturer.  Eventually, I would
> | like to make this package available on CRAN.
> | 
> | One problem is that this package uses a binary blob provided by said
> | manufacturer.  I understand that it is not allowed to include binaries
> | in R packages.  The question is, what else can I do?  Are there any
> | recommendations or best practices that one should follow in this
> | situation?  Any example of existing CRAN packages that deal with this
> | problem?
>
> We just released the 'x13binary' package to CRAN for this.
>
> It provides the X-13ARIMA-SEATS seasonal adjustment program provided by the
> US Census for use by other programs -- notably Christoph Sax's (excellent)
> 'seasonal' CRAN package (see also the very pretty http://www.seasonal.website ).
>
> The 'x13binary' package downloads suitable binaries we fetch at build time
> from the corresponding 'x13prebuilt' repo.  Both the source for 'x13binary'
> and these 'x13prebuilt' binaries are inside the http://github.com/x13org repo
> Christoph and I set up.
>
> Now X-13ARIMA-SEATS is a special case. US Government works cannot be
> copyright in the US, so distribution here is fine -- but for other countries
> it is murky because it is a bit of a non-standard license.  CRAN and I went
> back and forth for a few days on this.  But that package is now out there.
> We are currently awaiting the processing of 'seasonal' from incoming at CRAN
> which should hopefilly get through 'soon'.  Once it is, I plan to release a
> (small) package using 'seasonal' (and hence 'x13binary' / X-13ARIMA-SEATS) to
> redo something (in a package) the NY Times recently did with (and for which
> they released non-package code).
>
> Now, for your 'binary blob from said manufacturer' the license may well
> prevent upload to CRAN.  You can, however, have CRAN use a Suggests: to a
> third-party repo -- for which you could use small repo (maybe even created
> and managed with my 'drat' package -- there are precedents) and then have the
> off-CRAN package deal with the blob.
>  
> | I suppose one solution would be that the R code installs without the
> | binary but warns when the user tries to use it without having installed
> | the binary.  In this scenario, it would be the user?s responsibility to
> | make sure that the binary is correctly installed.  If the user fails to
>
> That is exactly what 'seasonal' versions up to 1.1 (currently on CRAN) did.
>
> Now we are trying to do one better to automate this because here we can (or
> so we think -- given the license).  We think it would be a boost for
> 'X-13ARIMA-SEATS' use which is why the did this work in the first place.
>
> | do that, the package is completely useless.  Of course this also has
> | implications for the sample code in the man pages which is not
> | guaranteed to work and will certainly not work on CRAN build servers.
>
> Hope this helps, regards, Dirk


From asz25 at case.edu  Tue Jan 26 20:03:01 2016
From: asz25 at case.edu (Adah Zhang)
Date: Tue, 26 Jan 2016 14:03:01 -0500
Subject: [R-pkg-devel] R CMD check yielding different results for me than
	CRAN reviewer
Message-ID: <CAHHtEr-oJKLEcC_=O9gPAHEka_PKUATURryiyzV_HdE+SPY4XQ@mail.gmail.com>

Hello,

I am running R CMD check (and also with the --as-cran flag), which results
in all OK's in my 00check.log. However, after submitting the package, the
CRAN reviewer tells me of a warning/error regarding one of my examples
(which is easily fix-able if I got the warning myself).

How do I ensure that all warnings, errors, and notes are addressed if I do
not receive these when running the standard checks or when testing the
examples myself? Is there a standard order of commands that a CRAN reviewer
goes through aside from 'R CMD check'?

Thanks,
Adah

	[[alternative HTML version deleted]]


From bbolker at gmail.com  Tue Jan 26 20:53:46 2016
From: bbolker at gmail.com (Ben Bolker)
Date: Tue, 26 Jan 2016 14:53:46 -0500
Subject: [R-pkg-devel] R CMD check yielding different results for me
 than CRAN reviewer
In-Reply-To: <CAHHtEr-oJKLEcC_=O9gPAHEka_PKUATURryiyzV_HdE+SPY4XQ@mail.gmail.com>
References: <CAHHtEr-oJKLEcC_=O9gPAHEka_PKUATURryiyzV_HdE+SPY4XQ@mail.gmail.com>
Message-ID: <CABghstT3UekAVR5t=PeEKrQbcVURBb+yQQpWWsPtrkpdpv_rEg@mail.gmail.com>

The most common scenario is that you're using R-release and the
warnings are coming from the R-devel version, which often has a bunch
of new, additional tests.

The other frequent answer to this question (is there a FAQ list for
this mailing list yet?) is that using CRAN's win-builder service is a
very easy way to get access to the R-release and R-devel tests without
changing anything in your local setup.


On Tue, Jan 26, 2016 at 2:03 PM, Adah Zhang <asz25 at case.edu> wrote:
> Hello,
>
> I am running R CMD check (and also with the --as-cran flag), which results
> in all OK's in my 00check.log. However, after submitting the package, the
> CRAN reviewer tells me of a warning/error regarding one of my examples
> (which is easily fix-able if I got the warning myself).
>
> How do I ensure that all warnings, errors, and notes are addressed if I do
> not receive these when running the standard checks or when testing the
> examples myself? Is there a standard order of commands that a CRAN reviewer
> goes through aside from 'R CMD check'?
>
> Thanks,
> Adah
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd at debian.org  Tue Jan 26 20:54:22 2016
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 26 Jan 2016 13:54:22 -0600
Subject: [R-pkg-devel] R CMD check yielding different results for me
	than	CRAN reviewer
In-Reply-To: <CAHHtEr-oJKLEcC_=O9gPAHEka_PKUATURryiyzV_HdE+SPY4XQ@mail.gmail.com>
References: <CAHHtEr-oJKLEcC_=O9gPAHEka_PKUATURryiyzV_HdE+SPY4XQ@mail.gmail.com>
Message-ID: <22183.52974.754694.397246@max.nulle.part>


On 26 January 2016 at 14:03, Adah Zhang wrote:
| I am running R CMD check (and also with the --as-cran flag), which results
| in all OK's in my 00check.log. However, after submitting the package, the
| CRAN reviewer tells me of a warning/error regarding one of my examples
| (which is easily fix-able if I got the warning myself).
| 
| How do I ensure that all warnings, errors, and notes are addressed if I do
| not receive these when running the standard checks or when testing the
| examples myself? Is there a standard order of commands that a CRAN reviewer
| goes through aside from 'R CMD check'?

"Use a different computer."

That is not as flippant as it sounds because

 -- thanks to Uwe you have r-release and r-devel on Windows just one ftp
    submission away

 -- thanks to Carl and yours truly you can also try a variety of Docker
    containers for R including r-devel prebuilt and even SAN/ASAN/UBSAN
    flavours

 -- the remainer of campus should offer some choices too though that relies
    on your local contacts.

Sometimes these things are of course also due to something else but as you
supplied nothing concrete or reproducible I cannot be more specific either.

Hope this helps.  It's the right list for the question.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ligges at statistik.tu-dortmund.de  Tue Jan 26 20:54:38 2016
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 26 Jan 2016 20:54:38 +0100
Subject: [R-pkg-devel] R CMD check yielding different results for me
 than CRAN reviewer
In-Reply-To: <CAHHtEr-oJKLEcC_=O9gPAHEka_PKUATURryiyzV_HdE+SPY4XQ@mail.gmail.com>
References: <CAHHtEr-oJKLEcC_=O9gPAHEka_PKUATURryiyzV_HdE+SPY4XQ@mail.gmail.com>
Message-ID: <56A7CEFE.5070501@statistik.tu-dortmund.de>



On 26.01.2016 20:03, Adah Zhang wrote:
> Hello,
>
> I am running R CMD check (and also with the --as-cran flag), which results
> in all OK's in my 00check.log. However, after submitting the package, the
> CRAN reviewer tells me of a warning/error regarding one of my examples
> (which is easily fix-able if I got the warning myself).
>
> How do I ensure that all warnings, errors, and notes are addressed if I do
> not receive these when running the standard checks or when testing the
> examples myself? Is there a standard order of commands that a CRAN reviewer
> goes through aside from 'R CMD check'?

The reviewer uses a recent version of R-devel (i.e. a daily built), a 
recent set of packages (i.e. run update.packages() first) and then

R CMD check --as-cran (well, at least similar, but you will get the 
warnings you talk about if you do that, as I already told you when you 
asked CRAN).

Best,
Uwe Ligges



> Thanks,
> Adah
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From sven.templer at gmail.com  Tue Jan 26 21:53:51 2016
From: sven.templer at gmail.com (Sven E. Templer)
Date: Tue, 26 Jan 2016 21:53:51 +0100
Subject: [R-pkg-devel] R CMD check yielding different results for
	me	than CRAN reviewer
In-Reply-To: <22183.52974.754694.397246@max.nulle.part>
References: <CAHHtEr-oJKLEcC_=O9gPAHEka_PKUATURryiyzV_HdE+SPY4XQ@mail.gmail.com>
	<22183.52974.754694.397246@max.nulle.part>
Message-ID: <A2B7448B-3344-4EA5-833A-79CC44661871@icloud.com>

Dear Adah,

win-builder is fairly easy, but once you've setup a github repository using

https://github.com/metacran/r-builder

you might save even that few amount of work.

Best,
Sven

> On 26 Jan 2016, at 20:54, Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> 
> On 26 January 2016 at 14:03, Adah Zhang wrote:
> | I am running R CMD check (and also with the --as-cran flag), which results
> | in all OK's in my 00check.log. However, after submitting the package, the
> | CRAN reviewer tells me of a warning/error regarding one of my examples
> | (which is easily fix-able if I got the warning myself).
> | 
> | How do I ensure that all warnings, errors, and notes are addressed if I do
> | not receive these when running the standard checks or when testing the
> | examples myself? Is there a standard order of commands that a CRAN reviewer
> | goes through aside from 'R CMD check'?
> 
> "Use a different computer."
> 
> That is not as flippant as it sounds because
> 
> -- thanks to Uwe you have r-release and r-devel on Windows just one ftp
>    submission away
> 
> -- thanks to Carl and yours truly you can also try a variety of Docker
>    containers for R including r-devel prebuilt and even SAN/ASAN/UBSAN
>    flavours
> 
> -- the remainer of campus should offer some choices too though that relies
>    on your local contacts.
> 
> Sometimes these things are of course also due to something else but as you
> supplied nothing concrete or reproducible I cannot be more specific either.
> 
> Hope this helps.  It's the right list for the question.
> 
> Dirk
> 
> -- 
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From asz25 at case.edu  Tue Jan 26 22:13:20 2016
From: asz25 at case.edu (Adah Zhang)
Date: Tue, 26 Jan 2016 16:13:20 -0500
Subject: [R-pkg-devel] R CMD check yielding different results for
	me	than CRAN reviewer
In-Reply-To: <A2B7448B-3344-4EA5-833A-79CC44661871@icloud.com>
References: <CAHHtEr-oJKLEcC_=O9gPAHEka_PKUATURryiyzV_HdE+SPY4XQ@mail.gmail.com>
	<22183.52974.754694.397246@max.nulle.part>
	<A2B7448B-3344-4EA5-833A-79CC44661871@icloud.com>
Message-ID: <DDEF22D7-FD31-4367-AF43-2D33D399E3C8@case.edu>

Thanks for all the suggestions! I'm working off of a Mac, so I don't think win-builder would work for my case.


> On Jan 26, 2016, at 3:53 PM, Sven E. Templer <sven.templer at gmail.com> wrote:
> 
> Dear Adah,
> 
> win-builder is fairly easy, but once you've setup a github repository using
> 
> https://github.com/metacran/r-builder
> 
> you might save even that few amount of work.
> 
> Best,
> Sven
> 
>> On 26 Jan 2016, at 20:54, Dirk Eddelbuettel <edd at debian.org> wrote:
>> 
>> 
>> On 26 January 2016 at 14:03, Adah Zhang wrote:
>> | I am running R CMD check (and also with the --as-cran flag), which results
>> | in all OK's in my 00check.log. However, after submitting the package, the
>> | CRAN reviewer tells me of a warning/error regarding one of my examples
>> | (which is easily fix-able if I got the warning myself).
>> | 
>> | How do I ensure that all warnings, errors, and notes are addressed if I do
>> | not receive these when running the standard checks or when testing the
>> | examples myself? Is there a standard order of commands that a CRAN reviewer
>> | goes through aside from 'R CMD check'?
>> 
>> "Use a different computer."
>> 
>> That is not as flippant as it sounds because
>> 
>> -- thanks to Uwe you have r-release and r-devel on Windows just one ftp
>>   submission away
>> 
>> -- thanks to Carl and yours truly you can also try a variety of Docker
>>   containers for R including r-devel prebuilt and even SAN/ASAN/UBSAN
>>   flavours
>> 
>> -- the remainer of campus should offer some choices too though that relies
>>   on your local contacts.
>> 
>> Sometimes these things are of course also due to something else but as you
>> supplied nothing concrete or reproducible I cannot be more specific either.
>> 
>> Hope this helps.  It's the right list for the question.
>> 
>> Dirk
>> 
>> -- 
>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From edd at debian.org  Tue Jan 26 22:35:42 2016
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 26 Jan 2016 15:35:42 -0600
Subject: [R-pkg-devel] R CMD check yielding different results
	for	me	than CRAN reviewer
In-Reply-To: <DDEF22D7-FD31-4367-AF43-2D33D399E3C8@case.edu>
References: <CAHHtEr-oJKLEcC_=O9gPAHEka_PKUATURryiyzV_HdE+SPY4XQ@mail.gmail.com>
	<22183.52974.754694.397246@max.nulle.part>
	<A2B7448B-3344-4EA5-833A-79CC44661871@icloud.com>
	<DDEF22D7-FD31-4367-AF43-2D33D399E3C8@case.edu>
Message-ID: <22183.59054.312112.535814@max.nulle.part>


On 26 January 2016 at 16:13, Adah Zhang wrote:
| Thanks for all the suggestions! I'm working off of a Mac, so I don't think win-builder would work for my case.

Wrong. Read http://win-builder.r-project.org.  It is a _service_ that you
submit _source_ tarballs to.  Which is why I called it just one ftp away:

| >> On 26 Jan 2016, at 20:54, Dirk Eddelbuettel <edd at debian.org> wrote:
| >> -- thanks to Uwe you have r-release and r-devel on Windows just one ftp
| >>   submission away

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From carloscinelli at hotmail.com  Wed Jan 27 14:00:52 2016
From: carloscinelli at hotmail.com (Carlos Cinelli)
Date: Wed, 27 Jan 2016 13:00:52 +0000
Subject: [R-pkg-devel] R CMD check yielding different results for me
 than CRAN reviewer
In-Reply-To: <mailman.7.1453892402.3298.r-package-devel@r-project.org>
References: <mailman.7.1453892402.3298.r-package-devel@r-project.org>
Message-ID: <SNT148-W33427EAD7171E518EB86CAA7D90@phx.gbl>

I have been using win-builder and Gabor's R-Builder .
You can use win-builder either from the webpage (http://win-builder.r-project.org/) or using the function build_win() from  Hadley's devtools package. Win-builder will test both r-devel and r-release in Windows.
As for r-builder, you will can use it with Travis or Semaphore (see https://github.com/metacran/r-builder). It will test with r-oldrel, r-release and r-devel in Linux. 

> From: r-package-devel-request at r-project.org
> Subject: R-package-devel Digest, Vol 9, Issue 10
> To: r-package-devel at r-project.org
> Date: Wed, 27 Jan 2016 12:00:02 +0100
> 
> Send R-package-devel mailing list submissions to
> 	r-package-devel at r-project.org
> 
> To subscribe or unsubscribe via the World Wide Web, visit
> 	https://stat.ethz.ch/mailman/listinfo/r-package-devel
> or, via email, send a message with subject or body 'help' to
> 	r-package-devel-request at r-project.org
> 
> You can reach the person managing the list at
> 	r-package-devel-owner at r-project.org
> 
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of R-package-devel digest..."
> 
> 
> Today's Topics:
> 
>    1. R CMD check yielding different results for me than	CRAN
>       reviewer (Adah Zhang)
>    2. Re: R CMD check yielding different results for me than CRAN
>       reviewer (Ben Bolker)
>    3. Re: R CMD check yielding different results for me	than	CRAN
>       reviewer (Dirk Eddelbuettel)
>    4. Re: R CMD check yielding different results for me than CRAN
>       reviewer (Uwe Ligges)
>    5. Re: R CMD check yielding different results for	me	than CRAN
>       reviewer (Sven E. Templer)
>    6. Re: R CMD check yielding different results for	me	than CRAN
>       reviewer (Adah Zhang)
>    7. Re: R CMD check yielding different results	for	me	than CRAN
>       reviewer (Dirk Eddelbuettel)
> 
> 
> ----------------------------------------------------------------------
> 
> Message: 1
> Date: Tue, 26 Jan 2016 14:03:01 -0500
> From: Adah Zhang <asz25 at case.edu>
> To: r-package-devel at r-project.org
> Subject: [R-pkg-devel] R CMD check yielding different results for me
> 	than	CRAN reviewer
> Message-ID:
> 	<CAHHtEr-oJKLEcC_=O9gPAHEka_PKUATURryiyzV_HdE+SPY4XQ at mail.gmail.com>
> Content-Type: text/plain; charset="UTF-8"
> 
> Hello,
> 
> I am running R CMD check (and also with the --as-cran flag), which results
> in all OK's in my 00check.log. However, after submitting the package, the
> CRAN reviewer tells me of a warning/error regarding one of my examples
> (which is easily fix-able if I got the warning myself).
> 
> How do I ensure that all warnings, errors, and notes are addressed if I do
> not receive these when running the standard checks or when testing the
> examples myself? Is there a standard order of commands that a CRAN reviewer
> goes through aside from 'R CMD check'?
> 
> Thanks,
> Adah
> 
> 	[[alternative HTML version deleted]]
> 
> 
> 
> ------------------------------
> 
> Message: 2
> Date: Tue, 26 Jan 2016 14:53:46 -0500
> From: Ben Bolker <bbolker at gmail.com>
> To: Adah Zhang <asz25 at case.edu>
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] R CMD check yielding different results for
> 	me than CRAN reviewer
> Message-ID:
> 	<CABghstT3UekAVR5t=PeEKrQbcVURBb+yQQpWWsPtrkpdpv_rEg at mail.gmail.com>
> Content-Type: text/plain; charset=UTF-8
> 
> The most common scenario is that you're using R-release and the
> warnings are coming from the R-devel version, which often has a bunch
> of new, additional tests.
> 
> The other frequent answer to this question (is there a FAQ list for
> this mailing list yet?) is that using CRAN's win-builder service is a
> very easy way to get access to the R-release and R-devel tests without
> changing anything in your local setup.
> 
> 
> On Tue, Jan 26, 2016 at 2:03 PM, Adah Zhang <asz25 at case.edu> wrote:
> > Hello,
> >
> > I am running R CMD check (and also with the --as-cran flag), which results
> > in all OK's in my 00check.log. However, after submitting the package, the
> > CRAN reviewer tells me of a warning/error regarding one of my examples
> > (which is easily fix-able if I got the warning myself).
> >
> > How do I ensure that all warnings, errors, and notes are addressed if I do
> > not receive these when running the standard checks or when testing the
> > examples myself? Is there a standard order of commands that a CRAN reviewer
> > goes through aside from 'R CMD check'?
> >
> > Thanks,
> > Adah
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> 
> ------------------------------
> 
> Message: 3
> Date: Tue, 26 Jan 2016 13:54:22 -0600
> From: Dirk Eddelbuettel <edd at debian.org>
> To: Adah Zhang <asz25 at case.edu>
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] R CMD check yielding different results for
> 	me	than	CRAN reviewer
> Message-ID: <22183.52974.754694.397246 at max.nulle.part>
> Content-Type: text/plain; charset=us-ascii
> 
> 
> On 26 January 2016 at 14:03, Adah Zhang wrote:
> | I am running R CMD check (and also with the --as-cran flag), which results
> | in all OK's in my 00check.log. However, after submitting the package, the
> | CRAN reviewer tells me of a warning/error regarding one of my examples
> | (which is easily fix-able if I got the warning myself).
> | 
> | How do I ensure that all warnings, errors, and notes are addressed if I do
> | not receive these when running the standard checks or when testing the
> | examples myself? Is there a standard order of commands that a CRAN reviewer
> | goes through aside from 'R CMD check'?
> 
> "Use a different computer."
> 
> That is not as flippant as it sounds because
> 
>  -- thanks to Uwe you have r-release and r-devel on Windows just one ftp
>     submission away
> 
>  -- thanks to Carl and yours truly you can also try a variety of Docker
>     containers for R including r-devel prebuilt and even SAN/ASAN/UBSAN
>     flavours
> 
>  -- the remainer of campus should offer some choices too though that relies
>     on your local contacts.
> 
> Sometimes these things are of course also due to something else but as you
> supplied nothing concrete or reproducible I cannot be more specific either.
> 
> Hope this helps.  It's the right list for the question.
> 
> Dirk
> 
> -- 
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> 
> 
> 
> ------------------------------
> 
> Message: 4
> Date: Tue, 26 Jan 2016 20:54:38 +0100
> From: Uwe Ligges <ligges at statistik.tu-dortmund.de>
> To: Adah Zhang <asz25 at case.edu>, r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] R CMD check yielding different results for
> 	me than CRAN reviewer
> Message-ID: <56A7CEFE.5070501 at statistik.tu-dortmund.de>
> Content-Type: text/plain; charset=utf-8; format=flowed
> 
> 
> 
> On 26.01.2016 20:03, Adah Zhang wrote:
> > Hello,
> >
> > I am running R CMD check (and also with the --as-cran flag), which results
> > in all OK's in my 00check.log. However, after submitting the package, the
> > CRAN reviewer tells me of a warning/error regarding one of my examples
> > (which is easily fix-able if I got the warning myself).
> >
> > How do I ensure that all warnings, errors, and notes are addressed if I do
> > not receive these when running the standard checks or when testing the
> > examples myself? Is there a standard order of commands that a CRAN reviewer
> > goes through aside from 'R CMD check'?
> 
> The reviewer uses a recent version of R-devel (i.e. a daily built), a 
> recent set of packages (i.e. run update.packages() first) and then
> 
> R CMD check --as-cran (well, at least similar, but you will get the 
> warnings you talk about if you do that, as I already told you when you 
> asked CRAN).
> 
> Best,
> Uwe Ligges
> 
> 
> 
> > Thanks,
> > Adah
> >
> > 	[[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> 
> 
> 
> ------------------------------
> 
> Message: 5
> Date: Tue, 26 Jan 2016 21:53:51 +0100
> From: "Sven E. Templer" <sven.templer at gmail.com>
> To: Adah Zhang <asz25 at case.edu>
> Cc: List r-package-devel <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] R CMD check yielding different results for
> 	me	than CRAN reviewer
> Message-ID: <A2B7448B-3344-4EA5-833A-79CC44661871 at icloud.com>
> Content-Type: text/plain; charset=us-ascii
> 
> Dear Adah,
> 
> win-builder is fairly easy, but once you've setup a github repository using
> 
> https://github.com/metacran/r-builder
> 
> you might save even that few amount of work.
> 
> Best,
> Sven
> 
> > On 26 Jan 2016, at 20:54, Dirk Eddelbuettel <edd at debian.org> wrote:
> > 
> > 
> > On 26 January 2016 at 14:03, Adah Zhang wrote:
> > | I am running R CMD check (and also with the --as-cran flag), which results
> > | in all OK's in my 00check.log. However, after submitting the package, the
> > | CRAN reviewer tells me of a warning/error regarding one of my examples
> > | (which is easily fix-able if I got the warning myself).
> > | 
> > | How do I ensure that all warnings, errors, and notes are addressed if I do
> > | not receive these when running the standard checks or when testing the
> > | examples myself? Is there a standard order of commands that a CRAN reviewer
> > | goes through aside from 'R CMD check'?
> > 
> > "Use a different computer."
> > 
> > That is not as flippant as it sounds because
> > 
> > -- thanks to Uwe you have r-release and r-devel on Windows just one ftp
> >    submission away
> > 
> > -- thanks to Carl and yours truly you can also try a variety of Docker
> >    containers for R including r-devel prebuilt and even SAN/ASAN/UBSAN
> >    flavours
> > 
> > -- the remainer of campus should offer some choices too though that relies
> >    on your local contacts.
> > 
> > Sometimes these things are of course also due to something else but as you
> > supplied nothing concrete or reproducible I cannot be more specific either.
> > 
> > Hope this helps.  It's the right list for the question.
> > 
> > Dirk
> > 
> > -- 
> > http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> > 
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> 
> ------------------------------
> 
> Message: 6
> Date: Tue, 26 Jan 2016 16:13:20 -0500
> From: Adah Zhang <asz25 at case.edu>
> To: "Sven E. Templer" <sven.templer at gmail.com>
> Cc: List r-package-devel <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] R CMD check yielding different results for
> 	me	than CRAN reviewer
> Message-ID: <DDEF22D7-FD31-4367-AF43-2D33D399E3C8 at case.edu>
> Content-Type: text/plain;	charset=us-ascii
> 
> Thanks for all the suggestions! I'm working off of a Mac, so I don't think win-builder would work for my case.
> 
> 
> > On Jan 26, 2016, at 3:53 PM, Sven E. Templer <sven.templer at gmail.com> wrote:
> > 
> > Dear Adah,
> > 
> > win-builder is fairly easy, but once you've setup a github repository using
> > 
> > https://github.com/metacran/r-builder
> > 
> > you might save even that few amount of work.
> > 
> > Best,
> > Sven
> > 
> >> On 26 Jan 2016, at 20:54, Dirk Eddelbuettel <edd at debian.org> wrote:
> >> 
> >> 
> >> On 26 January 2016 at 14:03, Adah Zhang wrote:
> >> | I am running R CMD check (and also with the --as-cran flag), which results
> >> | in all OK's in my 00check.log. However, after submitting the package, the
> >> | CRAN reviewer tells me of a warning/error regarding one of my examples
> >> | (which is easily fix-able if I got the warning myself).
> >> | 
> >> | How do I ensure that all warnings, errors, and notes are addressed if I do
> >> | not receive these when running the standard checks or when testing the
> >> | examples myself? Is there a standard order of commands that a CRAN reviewer
> >> | goes through aside from 'R CMD check'?
> >> 
> >> "Use a different computer."
> >> 
> >> That is not as flippant as it sounds because
> >> 
> >> -- thanks to Uwe you have r-release and r-devel on Windows just one ftp
> >>   submission away
> >> 
> >> -- thanks to Carl and yours truly you can also try a variety of Docker
> >>   containers for R including r-devel prebuilt and even SAN/ASAN/UBSAN
> >>   flavours
> >> 
> >> -- the remainer of campus should offer some choices too though that relies
> >>   on your local contacts.
> >> 
> >> Sometimes these things are of course also due to something else but as you
> >> supplied nothing concrete or reproducible I cannot be more specific either.
> >> 
> >> Hope this helps.  It's the right list for the question.
> >> 
> >> Dirk
> >> 
> >> -- 
> >> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> >> 
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > 
> 
> 
> 
> ------------------------------
> 
> Message: 7
> Date: Tue, 26 Jan 2016 15:35:42 -0600
> From: Dirk Eddelbuettel <edd at debian.org>
> To: Adah Zhang <asz25 at case.edu>
> Cc: List r-package-devel <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] R CMD check yielding different results	for
> 	me	than CRAN reviewer
> Message-ID: <22183.59054.312112.535814 at max.nulle.part>
> Content-Type: text/plain; charset=us-ascii
> 
> 
> On 26 January 2016 at 16:13, Adah Zhang wrote:
> | Thanks for all the suggestions! I'm working off of a Mac, so I don't think win-builder would work for my case.
> 
> Wrong. Read http://win-builder.r-project.org.  It is a _service_ that you
> submit _source_ tarballs to.  Which is why I called it just one ftp away:
> 
> | >> On 26 Jan 2016, at 20:54, Dirk Eddelbuettel <edd at debian.org> wrote:
> | >> -- thanks to Uwe you have r-release and r-devel on Windows just one ftp
> | >>   submission away
> 
> Dirk
> 
> -- 
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> 
> 
> 
> ------------------------------
> 
> Subject: Digest Footer
> 
> _______________________________________________
> R-package-devel mailing list
> R-package-devel at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ------------------------------
> 
> End of R-package-devel Digest, Vol 9, Issue 10
> **********************************************
 		 	   		  
	[[alternative HTML version deleted]]


From edd at debian.org  Wed Jan 27 14:20:24 2016
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 27 Jan 2016 07:20:24 -0600
Subject: [R-pkg-devel] R CMD check yielding different results for me
 than CRAN reviewer
In-Reply-To: <SNT148-W33427EAD7171E518EB86CAA7D90@phx.gbl>
References: <mailman.7.1453892402.3298.r-package-devel@r-project.org>
	<SNT148-W33427EAD7171E518EB86CAA7D90@phx.gbl>
Message-ID: <22184.50200.615950.3237@max.nulle.part>


On 27 January 2016 at 13:00, Carlos Cinelli wrote:
| I have been using win-builder and Gabor's R-Builder .
| You can use win-builder either from the webpage (http://win-builder.r-project.org/) or using the function build_win() from  Hadley's devtools package. Win-builder will test both r-devel and r-release in Windows.

You misses an obvious one which which devtools hides from you: ftp.

You can parameterize your ftp client -- in my case ncftp which keeps a
bookmark associating the shorthand 'win-builder' with a host as well as
default directory and more:

  edd at max:~$ grep win-builder .ncftp/bookmarks 
  win-builder,win-builder.r-project.org,,,,R-release,I,21,1252258158,1,1,1,1,129.217.207.166,,,,,,S,0,
  edd at max:~$ 

Then a trivial helper scripts facilitates this:

  edd at max:~$ cat bin/wbput.sh 
  #!/bin/bash
  
  function errorexit () {
      echo "Error: $1"
      exit 1
  }
  
  if [ "$#" -lt 1 ]; then
      errorexit "Need to specify argument file"
  fi
  
  if [ ! -f ${1} ]; then
      errorexit "File ${1} not found, aborting."
  fi
  
  ncftpput win-builder.r-project.org /R-release ${1}
  ncftpput win-builder.r-project.org /R-devel ${1}
  edd at max:~$

So I just say, eg, 'R CMD build foo; wbput.sh foo_1.2-3.tar.gz' and then
simply await the email replies.

No packages involving excessive amounts of underscores were used in
assembling this message.

Dirk


| As for r-builder, you will can use it with Travis or Semaphore (see https://github.com/metacran/r-builder). It will test with r-oldrel, r-release and r-devel in Linux. 
| 
| > From: r-package-devel-request at r-project.org
| > Subject: R-package-devel Digest, Vol 9, Issue 10
| > To: r-package-devel at r-project.org
| > Date: Wed, 27 Jan 2016 12:00:02 +0100
| > 
| > Send R-package-devel mailing list submissions to
| > 	r-package-devel at r-project.org
| > 
| > To subscribe or unsubscribe via the World Wide Web, visit
| > 	https://stat.ethz.ch/mailman/listinfo/r-package-devel
| > or, via email, send a message with subject or body 'help' to
| > 	r-package-devel-request at r-project.org
| > 
| > You can reach the person managing the list at
| > 	r-package-devel-owner at r-project.org
| > 
| > When replying, please edit your Subject line so it is more specific
| > than "Re: Contents of R-package-devel digest..."
| > 
| > 
| > Today's Topics:
| > 
| >    1. R CMD check yielding different results for me than	CRAN
| >       reviewer (Adah Zhang)
| >    2. Re: R CMD check yielding different results for me than CRAN
| >       reviewer (Ben Bolker)
| >    3. Re: R CMD check yielding different results for me	than	CRAN
| >       reviewer (Dirk Eddelbuettel)
| >    4. Re: R CMD check yielding different results for me than CRAN
| >       reviewer (Uwe Ligges)
| >    5. Re: R CMD check yielding different results for	me	than CRAN
| >       reviewer (Sven E. Templer)
| >    6. Re: R CMD check yielding different results for	me	than CRAN
| >       reviewer (Adah Zhang)
| >    7. Re: R CMD check yielding different results	for	me	than CRAN
| >       reviewer (Dirk Eddelbuettel)
| > 
| > 
| > ----------------------------------------------------------------------
| > 
| > Message: 1
| > Date: Tue, 26 Jan 2016 14:03:01 -0500
| > From: Adah Zhang <asz25 at case.edu>
| > To: r-package-devel at r-project.org
| > Subject: [R-pkg-devel] R CMD check yielding different results for me
| > 	than	CRAN reviewer
| > Message-ID:
| > 	<CAHHtEr-oJKLEcC_=O9gPAHEka_PKUATURryiyzV_HdE+SPY4XQ at mail.gmail.com>
| > Content-Type: text/plain; charset="UTF-8"
| > 
| > Hello,
| > 
| > I am running R CMD check (and also with the --as-cran flag), which results
| > in all OK's in my 00check.log. However, after submitting the package, the
| > CRAN reviewer tells me of a warning/error regarding one of my examples
| > (which is easily fix-able if I got the warning myself).
| > 
| > How do I ensure that all warnings, errors, and notes are addressed if I do
| > not receive these when running the standard checks or when testing the
| > examples myself? Is there a standard order of commands that a CRAN reviewer
| > goes through aside from 'R CMD check'?
| > 
| > Thanks,
| > Adah
| > 
| > 	[[alternative HTML version deleted]]
| > 
| > 
| > 
| > ------------------------------
| > 
| > Message: 2
| > Date: Tue, 26 Jan 2016 14:53:46 -0500
| > From: Ben Bolker <bbolker at gmail.com>
| > To: Adah Zhang <asz25 at case.edu>
| > Cc: r-package-devel at r-project.org
| > Subject: Re: [R-pkg-devel] R CMD check yielding different results for
| > 	me than CRAN reviewer
| > Message-ID:
| > 	<CABghstT3UekAVR5t=PeEKrQbcVURBb+yQQpWWsPtrkpdpv_rEg at mail.gmail.com>
| > Content-Type: text/plain; charset=UTF-8
| > 
| > The most common scenario is that you're using R-release and the
| > warnings are coming from the R-devel version, which often has a bunch
| > of new, additional tests.
| > 
| > The other frequent answer to this question (is there a FAQ list for
| > this mailing list yet?) is that using CRAN's win-builder service is a
| > very easy way to get access to the R-release and R-devel tests without
| > changing anything in your local setup.
| > 
| > 
| > On Tue, Jan 26, 2016 at 2:03 PM, Adah Zhang <asz25 at case.edu> wrote:
| > > Hello,
| > >
| > > I am running R CMD check (and also with the --as-cran flag), which results
| > > in all OK's in my 00check.log. However, after submitting the package, the
| > > CRAN reviewer tells me of a warning/error regarding one of my examples
| > > (which is easily fix-able if I got the warning myself).
| > >
| > > How do I ensure that all warnings, errors, and notes are addressed if I do
| > > not receive these when running the standard checks or when testing the
| > > examples myself? Is there a standard order of commands that a CRAN reviewer
| > > goes through aside from 'R CMD check'?
| > >
| > > Thanks,
| > > Adah
| > >
| > >         [[alternative HTML version deleted]]
| > >
| > > ______________________________________________
| > > R-package-devel at r-project.org mailing list
| > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
| > 
| > 
| > 
| > ------------------------------
| > 
| > Message: 3
| > Date: Tue, 26 Jan 2016 13:54:22 -0600
| > From: Dirk Eddelbuettel <edd at debian.org>
| > To: Adah Zhang <asz25 at case.edu>
| > Cc: r-package-devel at r-project.org
| > Subject: Re: [R-pkg-devel] R CMD check yielding different results for
| > 	me	than	CRAN reviewer
| > Message-ID: <22183.52974.754694.397246 at max.nulle.part>
| > Content-Type: text/plain; charset=us-ascii
| > 
| > 
| > On 26 January 2016 at 14:03, Adah Zhang wrote:
| > | I am running R CMD check (and also with the --as-cran flag), which results
| > | in all OK's in my 00check.log. However, after submitting the package, the
| > | CRAN reviewer tells me of a warning/error regarding one of my examples
| > | (which is easily fix-able if I got the warning myself).
| > | 
| > | How do I ensure that all warnings, errors, and notes are addressed if I do
| > | not receive these when running the standard checks or when testing the
| > | examples myself? Is there a standard order of commands that a CRAN reviewer
| > | goes through aside from 'R CMD check'?
| > 
| > "Use a different computer."
| > 
| > That is not as flippant as it sounds because
| > 
| >  -- thanks to Uwe you have r-release and r-devel on Windows just one ftp
| >     submission away
| > 
| >  -- thanks to Carl and yours truly you can also try a variety of Docker
| >     containers for R including r-devel prebuilt and even SAN/ASAN/UBSAN
| >     flavours
| > 
| >  -- the remainer of campus should offer some choices too though that relies
| >     on your local contacts.
| > 
| > Sometimes these things are of course also due to something else but as you
| > supplied nothing concrete or reproducible I cannot be more specific either.
| > 
| > Hope this helps.  It's the right list for the question.
| > 
| > Dirk
| > 
| > -- 
| > http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
| > 
| > 
| > 
| > ------------------------------
| > 
| > Message: 4
| > Date: Tue, 26 Jan 2016 20:54:38 +0100
| > From: Uwe Ligges <ligges at statistik.tu-dortmund.de>
| > To: Adah Zhang <asz25 at case.edu>, r-package-devel at r-project.org
| > Subject: Re: [R-pkg-devel] R CMD check yielding different results for
| > 	me than CRAN reviewer
| > Message-ID: <56A7CEFE.5070501 at statistik.tu-dortmund.de>
| > Content-Type: text/plain; charset=utf-8; format=flowed
| > 
| > 
| > 
| > On 26.01.2016 20:03, Adah Zhang wrote:
| > > Hello,
| > >
| > > I am running R CMD check (and also with the --as-cran flag), which results
| > > in all OK's in my 00check.log. However, after submitting the package, the
| > > CRAN reviewer tells me of a warning/error regarding one of my examples
| > > (which is easily fix-able if I got the warning myself).
| > >
| > > How do I ensure that all warnings, errors, and notes are addressed if I do
| > > not receive these when running the standard checks or when testing the
| > > examples myself? Is there a standard order of commands that a CRAN reviewer
| > > goes through aside from 'R CMD check'?
| > 
| > The reviewer uses a recent version of R-devel (i.e. a daily built), a 
| > recent set of packages (i.e. run update.packages() first) and then
| > 
| > R CMD check --as-cran (well, at least similar, but you will get the 
| > warnings you talk about if you do that, as I already told you when you 
| > asked CRAN).
| > 
| > Best,
| > Uwe Ligges
| > 
| > 
| > 
| > > Thanks,
| > > Adah
| > >
| > > 	[[alternative HTML version deleted]]
| > >
| > > ______________________________________________
| > > R-package-devel at r-project.org mailing list
| > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
| > >
| > 
| > 
| > 
| > ------------------------------
| > 
| > Message: 5
| > Date: Tue, 26 Jan 2016 21:53:51 +0100
| > From: "Sven E. Templer" <sven.templer at gmail.com>
| > To: Adah Zhang <asz25 at case.edu>
| > Cc: List r-package-devel <r-package-devel at r-project.org>
| > Subject: Re: [R-pkg-devel] R CMD check yielding different results for
| > 	me	than CRAN reviewer
| > Message-ID: <A2B7448B-3344-4EA5-833A-79CC44661871 at icloud.com>
| > Content-Type: text/plain; charset=us-ascii
| > 
| > Dear Adah,
| > 
| > win-builder is fairly easy, but once you've setup a github repository using
| > 
| > https://github.com/metacran/r-builder
| > 
| > you might save even that few amount of work.
| > 
| > Best,
| > Sven
| > 
| > > On 26 Jan 2016, at 20:54, Dirk Eddelbuettel <edd at debian.org> wrote:
| > > 
| > > 
| > > On 26 January 2016 at 14:03, Adah Zhang wrote:
| > > | I am running R CMD check (and also with the --as-cran flag), which results
| > > | in all OK's in my 00check.log. However, after submitting the package, the
| > > | CRAN reviewer tells me of a warning/error regarding one of my examples
| > > | (which is easily fix-able if I got the warning myself).
| > > | 
| > > | How do I ensure that all warnings, errors, and notes are addressed if I do
| > > | not receive these when running the standard checks or when testing the
| > > | examples myself? Is there a standard order of commands that a CRAN reviewer
| > > | goes through aside from 'R CMD check'?
| > > 
| > > "Use a different computer."
| > > 
| > > That is not as flippant as it sounds because
| > > 
| > > -- thanks to Uwe you have r-release and r-devel on Windows just one ftp
| > >    submission away
| > > 
| > > -- thanks to Carl and yours truly you can also try a variety of Docker
| > >    containers for R including r-devel prebuilt and even SAN/ASAN/UBSAN
| > >    flavours
| > > 
| > > -- the remainer of campus should offer some choices too though that relies
| > >    on your local contacts.
| > > 
| > > Sometimes these things are of course also due to something else but as you
| > > supplied nothing concrete or reproducible I cannot be more specific either.
| > > 
| > > Hope this helps.  It's the right list for the question.
| > > 
| > > Dirk
| > > 
| > > -- 
| > > http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
| > > 
| > > ______________________________________________
| > > R-package-devel at r-project.org mailing list
| > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
| > 
| > 
| > 
| > ------------------------------
| > 
| > Message: 6
| > Date: Tue, 26 Jan 2016 16:13:20 -0500
| > From: Adah Zhang <asz25 at case.edu>
| > To: "Sven E. Templer" <sven.templer at gmail.com>
| > Cc: List r-package-devel <r-package-devel at r-project.org>
| > Subject: Re: [R-pkg-devel] R CMD check yielding different results for
| > 	me	than CRAN reviewer
| > Message-ID: <DDEF22D7-FD31-4367-AF43-2D33D399E3C8 at case.edu>
| > Content-Type: text/plain;	charset=us-ascii
| > 
| > Thanks for all the suggestions! I'm working off of a Mac, so I don't think win-builder would work for my case.
| > 
| > 
| > > On Jan 26, 2016, at 3:53 PM, Sven E. Templer <sven.templer at gmail.com> wrote:
| > > 
| > > Dear Adah,
| > > 
| > > win-builder is fairly easy, but once you've setup a github repository using
| > > 
| > > https://github.com/metacran/r-builder
| > > 
| > > you might save even that few amount of work.
| > > 
| > > Best,
| > > Sven
| > > 
| > >> On 26 Jan 2016, at 20:54, Dirk Eddelbuettel <edd at debian.org> wrote:
| > >> 
| > >> 
| > >> On 26 January 2016 at 14:03, Adah Zhang wrote:
| > >> | I am running R CMD check (and also with the --as-cran flag), which results
| > >> | in all OK's in my 00check.log. However, after submitting the package, the
| > >> | CRAN reviewer tells me of a warning/error regarding one of my examples
| > >> | (which is easily fix-able if I got the warning myself).
| > >> | 
| > >> | How do I ensure that all warnings, errors, and notes are addressed if I do
| > >> | not receive these when running the standard checks or when testing the
| > >> | examples myself? Is there a standard order of commands that a CRAN reviewer
| > >> | goes through aside from 'R CMD check'?
| > >> 
| > >> "Use a different computer."
| > >> 
| > >> That is not as flippant as it sounds because
| > >> 
| > >> -- thanks to Uwe you have r-release and r-devel on Windows just one ftp
| > >>   submission away
| > >> 
| > >> -- thanks to Carl and yours truly you can also try a variety of Docker
| > >>   containers for R including r-devel prebuilt and even SAN/ASAN/UBSAN
| > >>   flavours
| > >> 
| > >> -- the remainer of campus should offer some choices too though that relies
| > >>   on your local contacts.
| > >> 
| > >> Sometimes these things are of course also due to something else but as you
| > >> supplied nothing concrete or reproducible I cannot be more specific either.
| > >> 
| > >> Hope this helps.  It's the right list for the question.
| > >> 
| > >> Dirk
| > >> 
| > >> -- 
| > >> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
| > >> 
| > >> ______________________________________________
| > >> R-package-devel at r-project.org mailing list
| > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
| > > 
| > 
| > 
| > 
| > ------------------------------
| > 
| > Message: 7
| > Date: Tue, 26 Jan 2016 15:35:42 -0600
| > From: Dirk Eddelbuettel <edd at debian.org>
| > To: Adah Zhang <asz25 at case.edu>
| > Cc: List r-package-devel <r-package-devel at r-project.org>
| > Subject: Re: [R-pkg-devel] R CMD check yielding different results	for
| > 	me	than CRAN reviewer
| > Message-ID: <22183.59054.312112.535814 at max.nulle.part>
| > Content-Type: text/plain; charset=us-ascii
| > 
| > 
| > On 26 January 2016 at 16:13, Adah Zhang wrote:
| > | Thanks for all the suggestions! I'm working off of a Mac, so I don't think win-builder would work for my case.
| > 
| > Wrong. Read http://win-builder.r-project.org.  It is a _service_ that you
| > submit _source_ tarballs to.  Which is why I called it just one ftp away:
| > 
| > | >> On 26 Jan 2016, at 20:54, Dirk Eddelbuettel <edd at debian.org> wrote:
| > | >> -- thanks to Uwe you have r-release and r-devel on Windows just one ftp
| > | >>   submission away
| > 
| > Dirk
| > 
| > -- 
| > http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
| > 
| > 
| > 
| > ------------------------------
| > 
| > Subject: Digest Footer
| > 
| > _______________________________________________
| > R-package-devel mailing list
| > R-package-devel at r-project.org
| > https://stat.ethz.ch/mailman/listinfo/r-package-devel
| > 
| > ------------------------------
| > 
| > End of R-package-devel Digest, Vol 9, Issue 10
| > **********************************************
|  		 	   		  
| 	[[alternative HTML version deleted]]
| 
| ______________________________________________
| R-package-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From d.scott at auckland.ac.nz  Thu Jan 28 13:47:53 2016
From: d.scott at auckland.ac.nz (David Scott)
Date: Fri, 29 Jan 2016 01:47:53 +1300
Subject: [R-pkg-devel] Problems with :::
Message-ID: <56AA0DF9.8020205@auckland.ac.nz>

I am trying to incorporate a print method for flat tables into the 
package xtable which I maintain.

To format the flat table before printing, I wish to use format.ftable 
from the base package stats.
This is unfortunately not exported, so R CMD check --as-cran produces a 
warning because I access that function using stats:::format.ftable.

So, having read the thread about this problem, I think I should copy the 
function into my package. I do that, and declare format.ftable as an S3 
format method. Now I get a different warning:

Registered S3 method from a standard package overwritten by 'xtable':
  method        from
  format.ftable stats

I am at a loss. Any suggestions?

David Scott

-- 
_________________________________________________________________
David Scott	Department of Statistics
		The University of Auckland, PB 92019
		Auckland 1142,    NEW ZEALAND
Phone: +64 9 923 5055, or +64 9 373 7599 ext 85055
Email:	d.scott at auckland.ac.nz,  Fax: +64 9 373 7018


From csardi.gabor at gmail.com  Thu Jan 28 14:21:52 2016
From: csardi.gabor at gmail.com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 28 Jan 2016 13:21:52 +0000
Subject: [R-pkg-devel] Problems with :::
In-Reply-To: <56AA0DF9.8020205@auckland.ac.nz>
References: <56AA0DF9.8020205@auckland.ac.nz>
Message-ID: <CABtg=Kn8w=mE02rJUbSFJzrtyFB4OysJtcM5FRozcUD52PRsCA@mail.gmail.com>

Ho David, just rename the copied function to sg else. It does not even has
to be s3, probably.

Gabor
On 28 Jan 2016 13:16, "David Scott" <d.scott at auckland.ac.nz> wrote:

> I am trying to incorporate a print method for flat tables into the package
> xtable which I maintain.
>
> To format the flat table before printing, I wish to use format.ftable from
> the base package stats.
> This is unfortunately not exported, so R CMD check --as-cran produces a
> warning because I access that function using stats:::format.ftable.
>
> So, having read the thread about this problem, I think I should copy the
> function into my package. I do that, and declare format.ftable as an S3
> format method. Now I get a different warning:
>
> Registered S3 method from a standard package overwritten by 'xtable':
>  method        from
>  format.ftable stats
>
> I am at a loss. Any suggestions?
>
> David Scott
>
> --
> _________________________________________________________________
> David Scott     Department of Statistics
>                 The University of Auckland, PB 92019
>                 Auckland 1142,    NEW ZEALAND
> Phone: +64 9 923 5055, or +64 9 373 7599 ext 85055
> Email:  d.scott at auckland.ac.nz,  Fax: +64 9 373 7018
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Thu Jan 28 14:20:48 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 28 Jan 2016 08:20:48 -0500
Subject: [R-pkg-devel] Problems with :::
In-Reply-To: <56AA0DF9.8020205@auckland.ac.nz>
References: <56AA0DF9.8020205@auckland.ac.nz>
Message-ID: <56AA15B0.7070000@gmail.com>

On 28/01/2016 7:47 AM, David Scott wrote:
> I am trying to incorporate a print method for flat tables into the
> package xtable which I maintain.
>
> To format the flat table before printing, I wish to use format.ftable
> from the base package stats.
> This is unfortunately not exported, so R CMD check --as-cran produces a
> warning because I access that function using stats:::format.ftable.
>
> So, having read the thread about this problem, I think I should copy the
> function into my package. I do that, and declare format.ftable as an S3
> format method. Now I get a different warning:
>
> Registered S3 method from a standard package overwritten by 'xtable':
>    method        from
>    format.ftable stats
>
> I am at a loss. Any suggestions?

stats::format() is exported, and it will delegate to format.ftable if 
the class of the object is "ftable".  So the normal solution is just to 
call stats::format() on your object.

If your object has a different class (e.g. "mytable"), it might be that 
you need to do this from your own format.mytable method.  Then 
NextMethod() is supposed to work, assuming the class is really 
c("mytable", "ftable").

If the class is just "mytable", then you'll have to change it to 
"ftable" before calling stats::format().

Duncan Murdoch


From kirill.mueller at ivt.baug.ethz.ch  Thu Jan 28 17:42:12 2016
From: kirill.mueller at ivt.baug.ethz.ch (=?UTF-8?Q?Kirill_M=c3=bcller?=)
Date: Thu, 28 Jan 2016 17:42:12 +0100
Subject: [R-pkg-devel] Problems with :::
In-Reply-To: <56AA15B0.7070000@gmail.com>
References: <56AA0DF9.8020205@auckland.ac.nz> <56AA15B0.7070000@gmail.com>
Message-ID: <56AA44E4.3060205@ivt.baug.ethz.ch>

On 28.01.2016 14:20, Duncan Murdoch wrote:
> If the class is just "mytable", then you'll have to change it to 
> "ftable" before calling stats::format(). 
Side note: The following will fail, because format.ftable double-checks 
the class of its argument:

format_ftable <- utils::getS3method("format", "ftable")
format_ftable(mytable)


-Kirill


From berryboessenkool at hotmail.com  Fri Jan 29 15:21:42 2016
From: berryboessenkool at hotmail.com (Berry Boessenkool)
Date: Fri, 29 Jan 2016 15:21:42 +0100
Subject: [R-pkg-devel] double colon
Message-ID: <DUB127-W103F48A679D41783DF4427D5DB0@phx.gbl>


Hi,
in our Berlin R User Group meeting yesterday we talked about dependencies in package development.
One thing that came up is that it's a good practice to explicitly write   package::function   in the code.

Is it worth to go through all of my package and enhance the code in all instances? 
Or do you think that NAMESPACE sufficiently prevents using a function with the same name from another package than intended and people reading source code should be aware of that anyways?
If Answer1==YES:
Should I also refer to other functions within my own package through   myPackage::otherFunction?
Should I do that for base packages like graphics, stats, utils, grDevices? (we have to declare them in the NAMESPACE imports, after all)
What's a fast and easy way to find all the instances of 'external' function usage?

I guess there must be discussions and guidelines about this, so some pointers instead of answers would be fine as well.
Thanks ahead,
Berry


 		 	   		  
	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Fri Jan 29 16:56:28 2016
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Fri, 29 Jan 2016 16:56:28 +0100
Subject: [R-pkg-devel] double colon
In-Reply-To: <DUB127-W103F48A679D41783DF4427D5DB0@phx.gbl>
References: <DUB127-W103F48A679D41783DF4427D5DB0@phx.gbl>
Message-ID: <56AB8BAC.2050208@statistik.tu-dortmund.de>



On 29.01.2016 15:21, Berry Boessenkool wrote:
>
> Hi,
> in our Berlin R User Group meeting yesterday we talked about dependencies in package development.
> One thing that came up is that it's a good practice to explicitly write   package::function   in the code.
>
> Is it worth to go through all of my package and enhance the code in all instances?

No, *if* you import anyway (see below).


> Or do you think that NAMESPACE sufficiently prevents using a function with the same name from another package than intended and people reading source code should be aware of that anyways?

Yes.


> If Answer1==YES:
> Should I also refer to other functions within my own package through   myPackage::otherFunction?

Yes, *if* you only suggest the package and do not import from the 
namespace unconditionally, you should do that.


Best,
Uwe Ligges


> Should I do that for base packages like graphics, stats, utils, grDevices? (we have to declare them in the NAMESPACE imports, after all)
> What's a fast and easy way to find all the instances of 'external' function usage?
>
> I guess there must be discussions and guidelines about this, so some pointers instead of answers would be fine as well.
> Thanks ahead,
> Berry
>
>
>   		 	   		
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From murdoch.duncan at gmail.com  Fri Jan 29 17:30:37 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 29 Jan 2016 11:30:37 -0500
Subject: [R-pkg-devel] double colon
In-Reply-To: <56AB8BAC.2050208@statistik.tu-dortmund.de>
References: <DUB127-W103F48A679D41783DF4427D5DB0@phx.gbl>
	<56AB8BAC.2050208@statistik.tu-dortmund.de>
Message-ID: <56AB93AD.8060503@gmail.com>

On 29/01/2016 10:56 AM, Uwe Ligges wrote:
>
> On 29.01.2016 15:21, Berry Boessenkool wrote:
> >
> > Hi,
> > in our Berlin R User Group meeting yesterday we talked about dependencies in package development.
> > One thing that came up is that it's a good practice to explicitly write   package::function   in the code.
> >
> > Is it worth to go through all of my package and enhance the code in all instances?
>
> No, *if* you import anyway (see below).
>
>
> > Or do you think that NAMESPACE sufficiently prevents using a function with the same name from another package than intended and people reading source code should be aware of that anyways?
>
> Yes.

I'd add one caveat here:  if you explicitly import things by name, this 
is definitely true.

If you import everything from another package, then conceivably you 
could end up with problems:  e.g. you import all of package A and all of 
package B.  You want Fn from B, and since A doesn't have a function like 
that, you're fine.  But later if package A adds a function called Fn,  
you might get in trouble and end up using the wrong one.

So use

importFrom(A, something)
importFrom(B, Fn)

rather than

import(A, B)

Duncan Murdoch

>
>
> > If Answer1==YES:
> > Should I also refer to other functions within my own package through   myPackage::otherFunction?
>
> Yes, *if* you only suggest the package and do not import from the
> namespace unconditionally, you should do that.

I think Berry was referring to the case where package Foo has function 
Fn, and was asking whether he should use Foo::Fn within the code of 
package Foo.  The answer to that is no.  Your own locally defined 
functions generally have precedence over ones from other packages 
(unless you mess around with environments; don't do that).


From berryboessenkool at hotmail.com  Fri Jan 29 17:41:40 2016
From: berryboessenkool at hotmail.com (Berry Boessenkool)
Date: Fri, 29 Jan 2016 17:41:40 +0100
Subject: [R-pkg-devel] double colon
In-Reply-To: <56AB8BAC.2050208@statistik.tu-dortmund.de>
References: <DUB127-W103F48A679D41783DF4427D5DB0@phx.gbl>,
	<56AB8BAC.2050208@statistik.tu-dortmund.de>
Message-ID: <DUB127-W321D010CC12F3B0892D673D5DB0@phx.gbl>


Thanks for your reply, Uwe.
The guy yesterday very strongly suggested it for user readability, but I wanted to get more opinions before doing so much work. (No offense, Steven).

I'm not sure whether we talk about the same thing considering functions *within* the package.
Say I have 'MyPackage' with 'fun_a' and also 'fun_b', which inside calls 'fun_a'. (Both exported)
That wouldn't be in imports or suggests, right?

Now image by unfortunate history there is 'AnotherPackage' that also has (its own and different) 'fun_a'.
Is far as I remember, 'fun_b' will still call 'fun_a' from 'MyPackage'.
I can't find back where I read that, though.
For user readability and to be on the safe side, in the future I'll write 'MyPackage::fun_a'.
(Of course, if I'm aware, I'll avoid same-name functions altogether).

kind regards,
Berry


> Subject: Re: [R-pkg-devel] double colon
> To: berryboessenkool at hotmail.com; r-package-devel at r-project.org
> From: ligges at statistik.tu-dortmund.de
> Date: Fri, 29 Jan 2016 16:56:28 +0100
> 
> 
> 
> On 29.01.2016 15:21, Berry Boessenkool wrote:
> >
> > Hi,
> > in our Berlin R User Group meeting yesterday we talked about dependencies in package development.
> > One thing that came up is that it's a good practice to explicitly write   package::function   in the code.
> >
> > Is it worth to go through all of my package and enhance the code in all instances?
> 
> No, *if* you import anyway (see below).
> 
> 
> > Or do you think that NAMESPACE sufficiently prevents using a function with the same name from another package than intended and people reading source code should be aware of that anyways?
> 
> Yes.
> 
> 
> > If Answer1==YES:
> > Should I also refer to other functions within my own package through   myPackage::otherFunction?
> 
> Yes, *if* you only suggest the package and do not import from the 
> namespace unconditionally, you should do that.
> 
> 
> Best,
> Uwe Ligges
> 
> 
> > Should I do that for base packages like graphics, stats, utils, grDevices? (we have to declare them in the NAMESPACE imports, after all)
> > What's a fast and easy way to find all the instances of 'external' function usage?
> >
> > I guess there must be discussions and guidelines about this, so some pointers instead of answers would be fine as well.
> > Thanks ahead,
> > Berry
> >
> >
> >   		 	   		
> > 	[[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
 		 	   		  
	[[alternative HTML version deleted]]


From patrick.giraudoux at univ-fcomte.fr  Sun Jan 31 11:37:22 2016
From: patrick.giraudoux at univ-fcomte.fr (Patrick Giraudoux)
Date: Sun, 31 Jan 2016 11:37:22 +0100
Subject: [R-pkg-devel] checking PDF version of manual
In-Reply-To: <mailman.9.1454065202.22890.r-package-devel@r-project.org>
References: <mailman.9.1454065202.22890.r-package-devel@r-project.org>
Message-ID: <56ADE3E2.5040203@univ-fcomte.fr>

I am trying to check a package using R 3.2.3 on Windows

R cmd check --as-cran pgirmess

but surprisingly, the check get suspended on "checking PDF version of 
manual ..."

* checking data for non-ASCII characters ... OK
* checking data for ASCII and uncompressed saves ... OK
* checking examples ... OK
* checking PDF version of manual ...

then nothing happens, and the prompt stays on that...

Any idea about what is happening ?

Patrick Giraudoux


From patrick.giraudoux at univ-fcomte.fr  Sun Jan 31 12:13:21 2016
From: patrick.giraudoux at univ-fcomte.fr (Patrick Giraudoux)
Date: Sun, 31 Jan 2016 12:13:21 +0100
Subject: [R-pkg-devel] checking PDF version of manual
In-Reply-To: <56ADE3E2.5040203@univ-fcomte.fr>
References: <mailman.9.1454065202.22890.r-package-devel@r-project.org>
	<56ADE3E2.5040203@univ-fcomte.fr>
Message-ID: <56ADEC51.1090101@univ-fcomte.fr>

Le 31/01/2016 11:37, Patrick Giraudoux a ?crit :
> I am trying to check a package using R 3.2.3 on Windows
>
> R cmd check --as-cran pgirmess
>
> but surprisingly, the check get suspended on "checking PDF version of 
> manual ..."
>
> * checking data for non-ASCII characters ... OK
> * checking data for ASCII and uncompressed saves ... OK
> * checking examples ... OK
> * checking PDF version of manual ...
>
> then nothing happens, and the prompt stays on that...
>
> Any idea about what is happening ?
>
> Patrick Giraudoux
>
>

I am trying to "debug", now exploring  Rd2pdf, and get this:

U:\Users\pgiraudo2\Documents\R\pgir_arch\pgirmess_arch\151104v1.6.3>rcmd 
Rd2pdf
pgirmess
Hmm ... looks like a package
Converting Rd files to LaTeX .....
Creating pdf output from LaTeX ...
Warning: running command 
'"C:\PROGRA~2\MIKTEX~1.9\miktex\bin\texify.exe"  --pdf
"Rd2.tex" --max-iterations=20 -I 
"C:/PROGRA~1/R/R-32~1.3/share/texmf/tex/latex"
-I "C:/PROGRA~1/R/R-32~1.3/share/texmf/bibtex/bst"' had status 1
Error : running 'texi2dvi' on 'Rd2.tex' failed

LaTeX errors:
!pdfTeX error: pdflatex.EXE (file ec-inconsolata): Font ec-inconsolata 
at 540 n
ot found
  ==> Fatal error occurred, no output PDF file produced!

Warning: running command 
'"C:\PROGRA~2\MIKTEX~1.9\miktex\bin\texify.exe"  --pdf
"Rd2.tex" --max-iterations=20 -I 
"C:/PROGRA~1/R/R-32~1.3/share/texmf/tex/latex"
-I "C:/PROGRA~1/R/R-32~1.3/share/texmf/bibtex/bst"' had status 1
Error : running 'texi2dvi' on 'Rd2.tex' failed

LaTeX errors:
!pdfTeX error: pdflatex.EXE (file ec-inconsolata): Font ec-inconsolata 
at 540 n
ot found
  ==> Fatal error occurred, no output PDF file produced!

Error in running tools::texi2pdf()

Looks like there is someting wrong with the call to MIKTEX and a font 
missing. However I did not change anything to the MIKTEX configuration 
(MIKTEK 2.9) which was working OK last time I packaged pgirmess...

Also I can not find out how to download an "ec-inconsolata" fond through 
the MIKTEX package manager

Any advise appreciated.

Cheers,

Patrick


From patrick.giraudoux at univ-fcomte.fr  Sun Jan 31 12:44:05 2016
From: patrick.giraudoux at univ-fcomte.fr (Patrick Giraudoux)
Date: Sun, 31 Jan 2016 12:44:05 +0100
Subject: [R-pkg-devel] checking PDF version of manual
In-Reply-To: <56ADEC51.1090101@univ-fcomte.fr>
References: <mailman.9.1454065202.22890.r-package-devel@r-project.org>
	<56ADE3E2.5040203@univ-fcomte.fr> <56ADEC51.1090101@univ-fcomte.fr>
Message-ID: <56ADF385.3040109@univ-fcomte.fr>

Le 31/01/2016 12:13, Patrick Giraudoux a ?crit :
> Le 31/01/2016 11:37, Patrick Giraudoux a ?crit :
>> I am trying to check a package using R 3.2.3 on Windows
>>
>> R cmd check --as-cran pgirmess
>>
>> but surprisingly, the check get suspended on "checking PDF version of 
>> manual ..."
>>
>> * checking data for non-ASCII characters ... OK
>> * checking data for ASCII and uncompressed saves ... OK
>> * checking examples ... OK
>> * checking PDF version of manual ...
>>
>> then nothing happens, and the prompt stays on that...
>>
>> Any idea about what is happening ?
>>
>> Patrick Giraudoux
>>
>>
>
> I am trying to "debug", now exploring  Rd2pdf, and get this:
>
> U:\Users\pgiraudo2\Documents\R\pgir_arch\pgirmess_arch\151104v1.6.3>rcmd 
> Rd2pdf
> pgirmess
> Hmm ... looks like a package
> Converting Rd files to LaTeX .....
> Creating pdf output from LaTeX ...
> Warning: running command 
> '"C:\PROGRA~2\MIKTEX~1.9\miktex\bin\texify.exe"  --pdf
> "Rd2.tex" --max-iterations=20 -I 
> "C:/PROGRA~1/R/R-32~1.3/share/texmf/tex/latex"
> -I "C:/PROGRA~1/R/R-32~1.3/share/texmf/bibtex/bst"' had status 1
> Error : running 'texi2dvi' on 'Rd2.tex' failed
>
> LaTeX errors:
> !pdfTeX error: pdflatex.EXE (file ec-inconsolata): Font ec-inconsolata 
> at 540 n
> ot found
>  ==> Fatal error occurred, no output PDF file produced!
>
> Warning: running command 
> '"C:\PROGRA~2\MIKTEX~1.9\miktex\bin\texify.exe"  --pdf
> "Rd2.tex" --max-iterations=20 -I 
> "C:/PROGRA~1/R/R-32~1.3/share/texmf/tex/latex"
> -I "C:/PROGRA~1/R/R-32~1.3/share/texmf/bibtex/bst"' had status 1
> Error : running 'texi2dvi' on 'Rd2.tex' failed
>
> LaTeX errors:
> !pdfTeX error: pdflatex.EXE (file ec-inconsolata): Font ec-inconsolata 
> at 540 n
> ot found
>  ==> Fatal error occurred, no output PDF file produced!
>
> Error in running tools::texi2pdf()
>
> Looks like there is someting wrong with the call to MIKTEX and a font 
> missing. However I did not change anything to the MIKTEX configuration 
> (MIKTEK 2.9) which was working OK last time I packaged pgirmess...
>
> Also I can not find out how to download an "ec-inconsolata" fond 
> through the MIKTEX package manager
>
> Any advise appreciated.
>
> Cheers,
>
> Patrick
>
>
>
>


I have updated all packages of MIKTEX, but with no improvement. I ge the 
same error.

Question: does it comes from the MIKTEX installation (do I re-install 
it) or from rcmd Rd2pdf ?

Any other user having experienced the same problem ?

Patrick


From brian at braverock.com  Sun Jan 31 13:04:33 2016
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 31 Jan 2016 06:04:33 -0600
Subject: [R-pkg-devel] checking PDF version of manual
In-Reply-To: <56ADF385.3040109@univ-fcomte.fr>
References: <mailman.9.1454065202.22890.r-package-devel@r-project.org>
	<56ADE3E2.5040203@univ-fcomte.fr> <56ADEC51.1090101@univ-fcomte.fr>
	<56ADF385.3040109@univ-fcomte.fr>
Message-ID: <56ADF851.2040504@braverock.com>

The error says:
" Font ec-inconsolata at 540 not found"

So it looks like you need to install extra fonts.  I'm on linux, and 
haven't tried to do that on Windows in years, so I think that's about 
all I can do to help you out.

Regards,

Brian


On 01/31/2016 05:44 AM, Patrick Giraudoux wrote:
> Le 31/01/2016 12:13, Patrick Giraudoux a ?crit :
>> Le 31/01/2016 11:37, Patrick Giraudoux a ?crit :
>>> I am trying to check a package using R 3.2.3 on Windows
>>>
>>> R cmd check --as-cran pgirmess
>>>
>>> but surprisingly, the check get suspended on "checking PDF version of
>>> manual ..."
>>>
>>> * checking data for non-ASCII characters ... OK
>>> * checking data for ASCII and uncompressed saves ... OK
>>> * checking examples ... OK
>>> * checking PDF version of manual ...
>>>
>>> then nothing happens, and the prompt stays on that...
>>>
>>> Any idea about what is happening ?
>>>
>>> Patrick Giraudoux
>>>
>>>
>>
>> I am trying to "debug", now exploring  Rd2pdf, and get this:
>>
>> U:\Users\pgiraudo2\Documents\R\pgir_arch\pgirmess_arch\151104v1.6.3>rcmd
>> Rd2pdf
>> pgirmess
>> Hmm ... looks like a package
>> Converting Rd files to LaTeX .....
>> Creating pdf output from LaTeX ...
>> Warning: running command
>> '"C:\PROGRA~2\MIKTEX~1.9\miktex\bin\texify.exe"  --pdf
>> "Rd2.tex" --max-iterations=20 -I
>> "C:/PROGRA~1/R/R-32~1.3/share/texmf/tex/latex"
>> -I "C:/PROGRA~1/R/R-32~1.3/share/texmf/bibtex/bst"' had status 1
>> Error : running 'texi2dvi' on 'Rd2.tex' failed
>>
>> LaTeX errors:
>> !pdfTeX error: pdflatex.EXE (file ec-inconsolata): Font ec-inconsolata
>> at 540 n
>> ot found
>>  ==> Fatal error occurred, no output PDF file produced!
>>
>> Warning: running command
>> '"C:\PROGRA~2\MIKTEX~1.9\miktex\bin\texify.exe"  --pdf
>> "Rd2.tex" --max-iterations=20 -I
>> "C:/PROGRA~1/R/R-32~1.3/share/texmf/tex/latex"
>> -I "C:/PROGRA~1/R/R-32~1.3/share/texmf/bibtex/bst"' had status 1
>> Error : running 'texi2dvi' on 'Rd2.tex' failed
>>
>> LaTeX errors:
>> !pdfTeX error: pdflatex.EXE (file ec-inconsolata): Font ec-inconsolata
>> at 540 n
>> ot found
>>  ==> Fatal error occurred, no output PDF file produced!
>>
>> Error in running tools::texi2pdf()
>>
>> Looks like there is someting wrong with the call to MIKTEX and a font
>> missing. However I did not change anything to the MIKTEX configuration
>> (MIKTEK 2.9) which was working OK last time I packaged pgirmess...
>>
>> Also I can not find out how to download an "ec-inconsolata" fond
>> through the MIKTEX package manager
>>
>> Any advise appreciated.
>>
>> Cheers,
>>
>> Patrick
>>
>>
>>
>>
>
>
> I have updated all packages of MIKTEX, but with no improvement. I ge the
> same error.
>
> Question: does it comes from the MIKTEX installation (do I re-install
> it) or from rcmd Rd2pdf ?
>
> Any other user having experienced the same problem ?
>
> Patrick
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From ligges at statistik.tu-dortmund.de  Sun Jan 31 14:36:16 2016
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sun, 31 Jan 2016 14:36:16 +0100
Subject: [R-pkg-devel] checking PDF version of manual
In-Reply-To: <56ADEC51.1090101@univ-fcomte.fr>
References: <mailman.9.1454065202.22890.r-package-devel@r-project.org>
	<56ADE3E2.5040203@univ-fcomte.fr> <56ADEC51.1090101@univ-fcomte.fr>
Message-ID: <56AE0DD0.1060308@statistik.tu-dortmund.de>

Eitehr the file is no longer there or corrupted, or the database that 
know about the file got corrupted.

For the former, re-instal the package, fr the latter, just go to MikTeX 
settings and run "refresh FNDB" and "Update Formats".

You can also upload the package to the winbuilder service to verify - it 
also uses MikTeX 2.9 ...


Best,
Uwe Ligges



On 31.01.2016 12:13, Patrick Giraudoux wrote:
> Le 31/01/2016 11:37, Patrick Giraudoux a ?crit :
>> I am trying to check a package using R 3.2.3 on Windows
>>
>> R cmd check --as-cran pgirmess
>>
>> but surprisingly, the check get suspended on "checking PDF version of
>> manual ..."
>>
>> * checking data for non-ASCII characters ... OK
>> * checking data for ASCII and uncompressed saves ... OK
>> * checking examples ... OK
>> * checking PDF version of manual ...
>>
>> then nothing happens, and the prompt stays on that...
>>
>> Any idea about what is happening ?
>>
>> Patrick Giraudoux
>>
>>
>
> I am trying to "debug", now exploring  Rd2pdf, and get this:
>
> U:\Users\pgiraudo2\Documents\R\pgir_arch\pgirmess_arch\151104v1.6.3>rcmd
> Rd2pdf
> pgirmess
> Hmm ... looks like a package
> Converting Rd files to LaTeX .....
> Creating pdf output from LaTeX ...
> Warning: running command
> '"C:\PROGRA~2\MIKTEX~1.9\miktex\bin\texify.exe"  --pdf
> "Rd2.tex" --max-iterations=20 -I
> "C:/PROGRA~1/R/R-32~1.3/share/texmf/tex/latex"
> -I "C:/PROGRA~1/R/R-32~1.3/share/texmf/bibtex/bst"' had status 1
> Error : running 'texi2dvi' on 'Rd2.tex' failed
>
> LaTeX errors:
> !pdfTeX error: pdflatex.EXE (file ec-inconsolata): Font ec-inconsolata
> at 540 n
> ot found
>   ==> Fatal error occurred, no output PDF file produced!
>
> Warning: running command
> '"C:\PROGRA~2\MIKTEX~1.9\miktex\bin\texify.exe"  --pdf
> "Rd2.tex" --max-iterations=20 -I
> "C:/PROGRA~1/R/R-32~1.3/share/texmf/tex/latex"
> -I "C:/PROGRA~1/R/R-32~1.3/share/texmf/bibtex/bst"' had status 1
> Error : running 'texi2dvi' on 'Rd2.tex' failed
>
> LaTeX errors:
> !pdfTeX error: pdflatex.EXE (file ec-inconsolata): Font ec-inconsolata
> at 540 n
> ot found
>   ==> Fatal error occurred, no output PDF file produced!
>
> Error in running tools::texi2pdf()
>
> Looks like there is someting wrong with the call to MIKTEX and a font
> missing. However I did not change anything to the MIKTEX configuration
> (MIKTEK 2.9) which was working OK last time I packaged pgirmess...
>
> Also I can not find out how to download an "ec-inconsolata" fond through
> the MIKTEX package manager
>
> Any advise appreciated.
>
> Cheers,
>
> Patrick
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From patrick.giraudoux at univ-fcomte.fr  Sun Jan 31 15:22:52 2016
From: patrick.giraudoux at univ-fcomte.fr (Patrick Giraudoux)
Date: Sun, 31 Jan 2016 15:22:52 +0100
Subject: [R-pkg-devel] checking PDF version of manual
In-Reply-To: <56AE0DD0.1060308@statistik.tu-dortmund.de>
References: <mailman.9.1454065202.22890.r-package-devel@r-project.org>
	<56ADE3E2.5040203@univ-fcomte.fr> <56ADEC51.1090101@univ-fcomte.fr>
	<56AE0DD0.1060308@statistik.tu-dortmund.de>
Message-ID: <56AE18BC.4090905@univ-fcomte.fr>

Le 31/01/2016 14:36, Uwe Ligges a ?crit :
> Eitehr the file is no longer there or corrupted, or the database that 
> know about the file got corrupted.
>
> For the former, re-instal the package, fr the latter, just go to 
> MikTeX settings and run "refresh FNDB" and "Update Formats".
>
> You can also upload the package to the winbuilder service to verify - 
> it also uses MikTeX 2.9 ...
>
>
> Best,
> Uwe Ligges
>

Thanks. Meanwhile I have already reinstalled MikTEX 2.9,  run "refresh 
FNDB" and "Update Formats", and still get a similar error.... There 
should be something with MikTEX since the package was submitted to CRAN 
and went through successfully (Kurt Hornik).

A bit beyond my understanding...


U:\Users\pgiraudo2\Documents\R\pgir_arch\pgirmess_arch\On work>rcmd 
Rd2pdf pgirmess
Hmm ... looks like a package
Converting Rd files to LaTeX .....
Creating pdf output from LaTeX ...
Warning: running command 
'"C:\PROGRA~2\MIKTEX~1.9\miktex\bin\texify.exe"  --pdf
"Rd2.tex" --max-iterations=20 -I 
"C:/PROGRA~1/R/R-32~1.3/share/texmf/tex/latex"
-I "C:/PROGRA~1/R/R-32~1.3/share/texmf/bibtex/bst"' had status 1
Error : running 'texi2dvi' on 'Rd2.tex' failed

LaTeX errors:
!pdfTeX error: pdflatex.EXE (file ts1-zi4r): Font ts1-zi4r at 540 not found
  ==> Fatal error occurred, no output PDF file produced!

Warning: running command 
'"C:\PROGRA~2\MIKTEX~1.9\miktex\bin\texify.exe"  --pdf
"Rd2.tex" --max-iterations=20 -I 
"C:/PROGRA~1/R/R-32~1.3/share/texmf/tex/latex"
-I "C:/PROGRA~1/R/R-32~1.3/share/texmf/bibtex/bst"' had status 1
Error : running 'texi2dvi' on 'Rd2.tex' failed

LaTeX errors:
!pdfTeX error: pdflatex.EXE (file ts1-zi4r): Font ts1-zi4r at 540 not found
  ==> Fatal error occurred, no output PDF file produced!

Error in running tools::texi2pdf()


From patrick.giraudoux at univ-fcomte.fr  Sun Jan 31 15:58:45 2016
From: patrick.giraudoux at univ-fcomte.fr (Patrick Giraudoux)
Date: Sun, 31 Jan 2016 15:58:45 +0100
Subject: [R-pkg-devel] checking PDF version of manual
In-Reply-To: <56AE18BC.4090905@univ-fcomte.fr>
References: <mailman.9.1454065202.22890.r-package-devel@r-project.org>
	<56ADE3E2.5040203@univ-fcomte.fr> <56ADEC51.1090101@univ-fcomte.fr>
	<56AE0DD0.1060308@statistik.tu-dortmund.de>
	<56AE18BC.4090905@univ-fcomte.fr>
Message-ID: <56AE2125.6010708@univ-fcomte.fr>

Le 31/01/2016 15:22, Patrick Giraudoux a ?crit :
> Le 31/01/2016 14:36, Uwe Ligges a ?crit :
>> Eitehr the file is no longer there or corrupted, or the database that 
>> know about the file got corrupted.
>>
>> For the former, re-instal the package, fr the latter, just go to 
>> MikTeX settings and run "refresh FNDB" and "Update Formats".
>>
>> You can also upload the package to the winbuilder service to verify - 
>> it also uses MikTeX 2.9 ...
>>
>>
>> Best,
>> Uwe Ligges
>>
>
> Thanks. Meanwhile I have already reinstalled MikTEX 2.9,  run "refresh 
> FNDB" and "Update Formats", and still get a similar error.... There 
> should be something with MikTEX since the package was submitted to 
> CRAN and went through successfully (Kurt Hornik).
>
> A bit beyond my understanding...
>
>
> U:\Users\pgiraudo2\Documents\R\pgir_arch\pgirmess_arch\On work>rcmd 
> Rd2pdf pgirmess
> Hmm ... looks like a package
> Converting Rd files to LaTeX .....
> Creating pdf output from LaTeX ...
> Warning: running command 
> '"C:\PROGRA~2\MIKTEX~1.9\miktex\bin\texify.exe"  --pdf
> "Rd2.tex" --max-iterations=20 -I 
> "C:/PROGRA~1/R/R-32~1.3/share/texmf/tex/latex"
> -I "C:/PROGRA~1/R/R-32~1.3/share/texmf/bibtex/bst"' had status 1
> Error : running 'texi2dvi' on 'Rd2.tex' failed
>
> LaTeX errors:
> !pdfTeX error: pdflatex.EXE (file ts1-zi4r): Font ts1-zi4r at 540 not 
> found
>  ==> Fatal error occurred, no output PDF file produced!
>
> Warning: running command 
> '"C:\PROGRA~2\MIKTEX~1.9\miktex\bin\texify.exe"  --pdf
> "Rd2.tex" --max-iterations=20 -I 
> "C:/PROGRA~1/R/R-32~1.3/share/texmf/tex/latex"
> -I "C:/PROGRA~1/R/R-32~1.3/share/texmf/bibtex/bst"' had status 1
> Error : running 'texi2dvi' on 'Rd2.tex' failed
>
> LaTeX errors:
> !pdfTeX error: pdflatex.EXE (file ts1-zi4r): Font ts1-zi4r at 540 not 
> found
>  ==> Fatal error occurred, no output PDF file produced!
>
> Error in running tools::texi2pdf()
>

I am closer to the solution. Rd2pdf (and MikTeX) works fine when I am 
running it as administrator. Does not work (with subsequent errors) when 
I run it on my usual user account (with limited rights). Now I remember 
that 2 weeks ago our computer manager has created a new user account on 
my labtop... Suspect some access rights may have been modified by him... 
Will see him tomorow...

Best,

Patrick


From patrick.giraudoux at univ-fcomte.fr  Sun Jan 31 16:28:34 2016
From: patrick.giraudoux at univ-fcomte.fr (Patrick Giraudoux)
Date: Sun, 31 Jan 2016 16:28:34 +0100
Subject: [R-pkg-devel] checking PDF version of manual
In-Reply-To: <OF45DACFA8.2F155253-ON85257F4B.00523DA8-1454252298166@american.edu>
References: <OF45DACFA8.2F155253-ON85257F4B.00523DA8-1454252298166@american.edu>
Message-ID: <56AE2822.5090006@univ-fcomte.fr>

Le 31/01/2016 15:58, John Nolan a ?crit :
>
> Years ago I had a similar problem.   I had to manually install some 
> font using the MikTex Settings program.  I think I also had to run the 
> administrator version of this, not the regular user version, or the 
> font didn't go in the right folder.   I don't remember details, but 
> perhaps this will help.
>
> John Nolan
> American University
>

Yes thanks; this is true for installing; the standard account does not 
give appropriate warnings and subsequent proposals for MikTeX package 
installation if missing, but does it as administrator. However,  that is 
part of the truth only (;-), now works fine as administrator, but still 
not under usual account (even after having resfreshed FNDB and updated 
formats... following Uwe's instructions, see earlier mails). Suppose 
matter of access rights. Will see that with our computer professionnals 
in the lab tomorow Monday morning...

Will inform the list thenafter in case it may help other users

	[[alternative HTML version deleted]]


From patrick.giraudoux at univ-fcomte.fr  Sun Jan 31 20:20:40 2016
From: patrick.giraudoux at univ-fcomte.fr (Patrick Giraudoux)
Date: Sun, 31 Jan 2016 20:20:40 +0100
Subject: [R-pkg-devel] checking PDF version of manual
In-Reply-To: <56AE2822.5090006@univ-fcomte.fr>
References: <OF45DACFA8.2F155253-ON85257F4B.00523DA8-1454252298166@american.edu>
	<56AE2822.5090006@univ-fcomte.fr>
Message-ID: <56AE5E88.9080100@univ-fcomte.fr>

Le 31/01/2016 16:28, Patrick Giraudoux a ?crit :
> Le 31/01/2016 15:58, John Nolan a ?crit :
>>
>> Years ago I had a similar problem.   I had to manually install some 
>> font using the MikTex Settings program.  I think I also had to run 
>> the administrator version of this, not the regular user version, or 
>> the font didn't go in the right folder.   I don't remember details, 
>> but perhaps this will help.
>>
>> John Nolan
>> American University
>>
>
> Yes thanks; this is true for installing; the standard account does not 
> give appropriate warnings and subsequent proposals for MikTeX package 
> installation if missing, but does it as administrator. However,  that 
> is part of the truth only (;-), now works fine as administrator, but 
> still not under usual account (even after having resfreshed FNDB and 
> updated formats... following Uwe's instructions, see earlier mails). 
> Suppose matter of access rights. Will see that with our computer 
> professionnals in the lab tomorow Monday morning...
>
> Will inform the list thenafter in case it may help other users


At last found a way round... Actually gave administrator rights to the 
standard account. Then updated using MikTeX update (admin); new files to 
update appeared and these files were then visibly copied somewhere in 
the 'AppData' folder of the standard account; then rcmd Rd2pdf worked... 
Went back to the adminstrator account to give back standard rights to 
the standard account.

Works now !

Looks like there is sometting either weird in the way MiKTeX manages 
installation or weird in the way I manage with MiKTeX.







	[[alternative HTML version deleted]]


From maechler at stat.math.ethz.ch  Mon Feb  1 09:49:26 2016
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 1 Feb 2016 09:49:26 +0100
Subject: [R-pkg-devel] Problems with :::
In-Reply-To: <56AA44E4.3060205@ivt.baug.ethz.ch>
References: <56AA0DF9.8020205@auckland.ac.nz> <56AA15B0.7070000@gmail.com>
	<56AA44E4.3060205@ivt.baug.ethz.ch>
Message-ID: <22191.7190.852199.122299@stat.math.ethz.ch>

>>>>> Kirill M?ller <kirill.mueller at ivt.baug.ethz.ch>
>>>>>     on Thu, 28 Jan 2016 17:42:12 +0100 writes:

    > On 28.01.2016 14:20, Duncan Murdoch wrote:
    >> If the class is just "mytable", then you'll have to
    >> change it to "ftable" before calling stats::format().
    > Side note: The following will fail, because format.ftable
    > double-checks the class of its argument:

    > format_ftable <- utils::getS3method("format", "ftable")
    > format_ftable(mytable)

    > -Kirill

Well, I don't think it would fail as that does

    if (!inherits(x, "ftable")) 
        stop("'x' must be an \"ftable\" object")

and the OP did mention that his objects were flat tables.

Note that the above is *good style* as opposed to the  "bad"
code I've seen so often in packages (and otherwise) which would
use something like

   if(class(x) == "ftable")  ## really really bad

because that code will work incorrectly for objects with S3
class attribute, say   c("myFtable", "ftable")

Martin


From berryboessenkool at hotmail.com  Mon Feb  1 10:39:59 2016
From: berryboessenkool at hotmail.com (Berry Boessenkool)
Date: Mon, 1 Feb 2016 10:39:59 +0100
Subject: [R-pkg-devel] Problems with :::
In-Reply-To: <22191.7190.852199.122299@stat.math.ethz.ch>
References: <56AA0DF9.8020205@auckland.ac.nz>
	<56AA15B0.7070000@gmail.com>, <56AA44E4.3060205@ivt.baug.ethz.ch>,
	<22191.7190.852199.122299@stat.math.ethz.ch>
Message-ID: <DUB127-W69D9BF9E743B88DF898D19D5DE0@phx.gbl>

>     if (!inherits(x, "ftable")) 
>    if(class(x) == "ftable")  ## really really bad


Thank you Martin, for pointing that out!
I was not aware of it yet and changed all occurences in my package and added in note in my R course material.

(This message is mainly an encouragement that some people actually read the mails and act on it, even if not usually replying).

Regards,
Berry


> From: maechler at stat.math.ethz.ch
> Date: Mon, 1 Feb 2016 09:49:26 +0100
> To: kirill.mueller at ivt.baug.ethz.ch
> CC: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Problems with :::
> 
> >>>>> Kirill M?ller <kirill.mueller at ivt.baug.ethz.ch>
> >>>>>     on Thu, 28 Jan 2016 17:42:12 +0100 writes:
> 
>     > On 28.01.2016 14:20, Duncan Murdoch wrote:
>     >> If the class is just "mytable", then you'll have to
>     >> change it to "ftable" before calling stats::format().
>     > Side note: The following will fail, because format.ftable
>     > double-checks the class of its argument:
> 
>     > format_ftable <- utils::getS3method("format", "ftable")
>     > format_ftable(mytable)
> 
>     > -Kirill
> 
> Well, I don't think it would fail as that does
> 
>     if (!inherits(x, "ftable")) 
>         stop("'x' must be an \"ftable\" object")
> 
> and the OP did mention that his objects were flat tables.
> 
> Note that the above is *good style* as opposed to the  "bad"
> code I've seen so often in packages (and otherwise) which would
> use something like
> 
>    if(class(x) == "ftable")  ## really really bad
> 
> because that code will work incorrectly for objects with S3
> class attribute, say   c("myFtable", "ftable")
> 
> Martin
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
 		 	   		  
	[[alternative HTML version deleted]]


From nawendt84 at gmail.com  Sat Jan 30 20:25:03 2016
From: nawendt84 at gmail.com (Nathan Wendt)
Date: Sat, 30 Jan 2016 13:25:03 -0600
Subject: [R-pkg-devel] S3 length method behavior
Message-ID: <CAB3F6BwvNLQUFOJF_V4LzO86P17pQCaTe5ZjjHLW6OAgy88ZiA@mail.gmail.com>

Hello,

I have run into an issue while developing an R package. Specifically, my
issue relates to what happens when I define an S3 length method for my
class. Here is my basic setup:

# Here is the structure of myClass
# uses an externalptr to operate on file using some C functions
list(file = "my/file/location", handle = <externalptr>)

# this function gets an S3Method() in NAMESPACE
length.myClass <- function(x) {
  .Call("get_class_length",myPkg)
}

As you can see, myClass is just a list of two pieces of information about
the particular object. Without a defined length method, length(myClass)
would be 2. However, I defined a length method to give me the information
about the amount of binary messages contained in the file the object points
to. In one of my test files there are 82 messages and length(myObject)
correctly returns 82. What I ran into is that I was crashing RStudio when
rebuilding my package with an object of myClass in my environment. Only
removing my S3 length method caused the crash to not occur. After looking
for memory leaks and other errors I finally noticed that the str() on the
object of myClass looked odd. It returned something like this:

List of 82
 $ file  : chr "my/file/location"
 $ handle:<externalptr>
 $ NA:
Error in object[[i]] : subscript out of bounds

It seems that when I define an S3 method for length that somehow the object
of myClass then gets restructured to have the length returned by the
function. There are 82 messages in the file, but myClass objects should
only have two elements. My best guess here is that the RStudio crash was
happening because the object was misrepresented internally. Of course, I
cannot be sure. None of my tests pointed to anything useful.

My questions are, then, whether this behavior makes sense and what to do
about it. If I define my own str() method, will that fix it? I think I am
just misunderstanding what is going on with the methods I have defined.
Hopefully, someone can offer some clarity.

Thanks,

	[[alternative HTML version deleted]]


From georgi.boshnakov at manchester.ac.uk  Mon Feb  1 14:46:10 2016
From: georgi.boshnakov at manchester.ac.uk (Georgi Boshnakov)
Date: Mon, 1 Feb 2016 13:46:10 +0000
Subject: [R-pkg-devel] S3 length method behavior
In-Reply-To: <CAB3F6BwvNLQUFOJF_V4LzO86P17pQCaTe5ZjjHLW6OAgy88ZiA@mail.gmail.com>
References: <CAB3F6BwvNLQUFOJF_V4LzO86P17pQCaTe5ZjjHLW6OAgy88ZiA@mail.gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E0179B0E0C8@MBXP01.ds.man.ac.uk>

Hi,

>I have run into an issue while developing an R package. Specifically, my issue relates to what happens when I define an S3 length 
>method for my class. Here is my basic setup:

># Here is the structure of myClass
># uses an externalptr to operate on file using some C functions list(file = "my/file/location", handle = <externalptr>)

># this function gets an S3Method() in NAMESPACE length.myClass <- function(x) {
 > .Call("get_class_length",myPkg)
>}

>As you can see, myClass is just a list of two pieces of information about the particular object. Without a defined length method, length(myClass) would be 2. However, I defined a length method to give me the information about the amount of binary messages contained in the file the object points to. In one of my test files there are 82 messages and length(myObject) correctly returns 82. What I ran into is that I was crashing RStudio when rebuilding my package with an object of myClass in my environment. Only 
> removing my S3 length method caused the crash to not occur. After looking for memory leaks and other errors I finally noticed that > the str() on the object of myClass looked odd. It returned something like this:
> List of 82
> $ file  : chr "my/file/location"
> $ handle:<externalptr>
 >$ NA:
>Error in object[[i]] : subscript out of bounds


You could define methods for indexing ("[" and "[[") for objects from your class. 
Since you have not defined special subsetting methods for your class, R uses a default one,  but honours your length(), hence the mess.

Regards,
Georgi Boshnkaov


-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Nathan Wendt
Sent: 30 January 2016 19:25
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] S3 length method behavior

Hello,

I have run into an issue while developing an R package. Specifically, my issue relates to what happens when I define an S3 length method for my class. Here is my basic setup:

# Here is the structure of myClass
# uses an externalptr to operate on file using some C functions list(file = "my/file/location", handle = <externalptr>)

# this function gets an S3Method() in NAMESPACE length.myClass <- function(x) {
  .Call("get_class_length",myPkg)
}

As you can see, myClass is just a list of two pieces of information about the particular object. Without a defined length method, length(myClass) would be 2. However, I defined a length method to give me the information about the amount of binary messages contained in the file the object points to. In one of my test files there are 82 messages and length(myObject) correctly returns 82. What I ran into is that I was crashing RStudio when rebuilding my package with an object of myClass in my environment. Only removing my S3 length method caused the crash to not occur. After looking for memory leaks and other errors I finally noticed that the str() on the object of myClass looked odd. It returned something like this:

List of 82
 $ file  : chr "my/file/location"
 $ handle:<externalptr>
 $ NA:
Error in object[[i]] : subscript out of bounds

It seems that when I define an S3 method for length that somehow the object of myClass then gets restructured to have the length returned by the function. There are 82 messages in the file, but myClass objects should only have two elements. My best guess here is that the RStudio crash was happening because the object was misrepresented internally. Of course, I cannot be sure. None of my tests pointed to anything useful.

My questions are, then, whether this behavior makes sense and what to do about it. If I define my own str() method, will that fix it? I think I am just misunderstanding what is going on with the methods I have defined.
Hopefully, someone can offer some clarity.

Thanks,

	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From drjimlemon at gmail.com  Mon Feb  1 23:24:29 2016
From: drjimlemon at gmail.com (Jim Lemon)
Date: Tue, 2 Feb 2016 09:24:29 +1100
Subject: [R-pkg-devel] S3 length method behavior
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E0179B0E0C8@MBXP01.ds.man.ac.uk>
References: <CAB3F6BwvNLQUFOJF_V4LzO86P17pQCaTe5ZjjHLW6OAgy88ZiA@mail.gmail.com>
	<438D2EC9EAFE5946B2D5864670EA468E0179B0E0C8@MBXP01.ds.man.ac.uk>
Message-ID: <CA+8X3fU+HjHeH1Wbz0BDa3yCENK9eA+FxNYRTW-9sadER4iYWA@mail.gmail.com>

Hi Nathan,
Perhaps if you defined your "length" object as "nbm" (number of binary
messages), it would not interfere with the default "length".

Jim


On Tue, Feb 2, 2016 at 12:46 AM, Georgi Boshnakov <
georgi.boshnakov at manchester.ac.uk> wrote:

> Hi,
>
> >I have run into an issue while developing an R package. Specifically, my
> issue relates to what happens when I define an S3 length
> >method for my class. Here is my basic setup:
>
> ># Here is the structure of myClass
> ># uses an externalptr to operate on file using some C functions list(file
> = "my/file/location", handle = <externalptr>)
>
> ># this function gets an S3Method() in NAMESPACE length.myClass <-
> function(x) {
>  > .Call("get_class_length",myPkg)
> >}
>
> >As you can see, myClass is just a list of two pieces of information about
> the particular object. Without a defined length method, length(myClass)
> would be 2. However, I defined a length method to give me the information
> about the amount of binary messages contained in the file the object points
> to. In one of my test files there are 82 messages and length(myObject)
> correctly returns 82. What I ran into is that I was crashing RStudio when
> rebuilding my package with an object of myClass in my environment. Only
> > removing my S3 length method caused the crash to not occur. After
> looking for memory leaks and other errors I finally noticed that > the
> str() on the object of myClass looked odd. It returned something like this:
> > List of 82
> > $ file  : chr "my/file/location"
> > $ handle:<externalptr>
>  >$ NA:
> >Error in object[[i]] : subscript out of bounds
>
>
> You could define methods for indexing ("[" and "[[") for objects from your
> class.
> Since you have not defined special subsetting methods for your class, R
> uses a default one,  but honours your length(), hence the mess.
>
> Regards,
> Georgi Boshnkaov
>
>
> -----Original Message-----
> From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On
> Behalf Of Nathan Wendt
> Sent: 30 January 2016 19:25
> To: r-package-devel at r-project.org
> Subject: [R-pkg-devel] S3 length method behavior
>
> Hello,
>
> I have run into an issue while developing an R package. Specifically, my
> issue relates to what happens when I define an S3 length method for my
> class. Here is my basic setup:
>
> # Here is the structure of myClass
> # uses an externalptr to operate on file using some C functions list(file
> = "my/file/location", handle = <externalptr>)
>
> # this function gets an S3Method() in NAMESPACE length.myClass <-
> function(x) {
>   .Call("get_class_length",myPkg)
> }
>
> As you can see, myClass is just a list of two pieces of information about
> the particular object. Without a defined length method, length(myClass)
> would be 2. However, I defined a length method to give me the information
> about the amount of binary messages contained in the file the object points
> to. In one of my test files there are 82 messages and length(myObject)
> correctly returns 82. What I ran into is that I was crashing RStudio when
> rebuilding my package with an object of myClass in my environment. Only
> removing my S3 length method caused the crash to not occur. After looking
> for memory leaks and other errors I finally noticed that the str() on the
> object of myClass looked odd. It returned something like this:
>
> List of 82
>  $ file  : chr "my/file/location"
>  $ handle:<externalptr>
>  $ NA:
> Error in object[[i]] : subscript out of bounds
>
> It seems that when I define an S3 method for length that somehow the
> object of myClass then gets restructured to have the length returned by the
> function. There are 82 messages in the file, but myClass objects should
> only have two elements. My best guess here is that the RStudio crash was
> happening because the object was misrepresented internally. Of course, I
> cannot be sure. None of my tests pointed to anything useful.
>
> My questions are, then, whether this behavior makes sense and what to do
> about it. If I define my own str() method, will that fix it? I think I am
> just misunderstanding what is going on with the methods I have defined.
> Hopefully, someone can offer some clarity.
>
> Thanks,
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From h.wickham at gmail.com  Tue Feb  2 16:28:48 2016
From: h.wickham at gmail.com (Hadley Wickham)
Date: Tue, 2 Feb 2016 09:28:48 -0600
Subject: [R-pkg-devel] S3 length method behavior
In-Reply-To: <CAB3F6BwvNLQUFOJF_V4LzO86P17pQCaTe5ZjjHLW6OAgy88ZiA@mail.gmail.com>
References: <CAB3F6BwvNLQUFOJF_V4LzO86P17pQCaTe5ZjjHLW6OAgy88ZiA@mail.gmail.com>
Message-ID: <CABdHhvGMo4MzYDuphEaNrSBTnEU7EBdT8_K9n5ZwEE=W9pq1Cg@mail.gmail.com>

I've found that it's a very bad idea to provide length or names
methods for just this reason.
Hadley

On Sat, Jan 30, 2016 at 1:25 PM, Nathan Wendt <nawendt84 at gmail.com> wrote:
> Hello,
>
> I have run into an issue while developing an R package. Specifically, my
> issue relates to what happens when I define an S3 length method for my
> class. Here is my basic setup:
>
> # Here is the structure of myClass
> # uses an externalptr to operate on file using some C functions
> list(file = "my/file/location", handle = <externalptr>)
>
> # this function gets an S3Method() in NAMESPACE
> length.myClass <- function(x) {
>   .Call("get_class_length",myPkg)
> }
>
> As you can see, myClass is just a list of two pieces of information about
> the particular object. Without a defined length method, length(myClass)
> would be 2. However, I defined a length method to give me the information
> about the amount of binary messages contained in the file the object points
> to. In one of my test files there are 82 messages and length(myObject)
> correctly returns 82. What I ran into is that I was crashing RStudio when
> rebuilding my package with an object of myClass in my environment. Only
> removing my S3 length method caused the crash to not occur. After looking
> for memory leaks and other errors I finally noticed that the str() on the
> object of myClass looked odd. It returned something like this:
>
> List of 82
>  $ file  : chr "my/file/location"
>  $ handle:<externalptr>
>  $ NA:
> Error in object[[i]] : subscript out of bounds
>
> It seems that when I define an S3 method for length that somehow the object
> of myClass then gets restructured to have the length returned by the
> function. There are 82 messages in the file, but myClass objects should
> only have two elements. My best guess here is that the RStudio crash was
> happening because the object was misrepresented internally. Of course, I
> cannot be sure. None of my tests pointed to anything useful.
>
> My questions are, then, whether this behavior makes sense and what to do
> about it. If I define my own str() method, will that fix it? I think I am
> just misunderstanding what is going on with the methods I have defined.
> Hopefully, someone can offer some clarity.
>
> Thanks,
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
http://had.co.nz/


From b.rowlingson at lancaster.ac.uk  Tue Feb  2 18:23:46 2016
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Tue, 2 Feb 2016 17:23:46 +0000
Subject: [R-pkg-devel] S3 length method behavior
In-Reply-To: <CABdHhvGMo4MzYDuphEaNrSBTnEU7EBdT8_K9n5ZwEE=W9pq1Cg@mail.gmail.com>
References: <CAB3F6BwvNLQUFOJF_V4LzO86P17pQCaTe5ZjjHLW6OAgy88ZiA@mail.gmail.com>
	<CABdHhvGMo4MzYDuphEaNrSBTnEU7EBdT8_K9n5ZwEE=W9pq1Cg@mail.gmail.com>
Message-ID: <CANVKczP-UhrEag0ea_LKc1MreezBMXpNMaL2v2ewMGacoe+DQw@mail.gmail.com>

On Tue, Feb 2, 2016 at 3:28 PM, Hadley Wickham <h.wickham at gmail.com> wrote:
> I've found that it's a very bad idea to provide length or names
> methods for just this reason.


>> After looking
>> for memory leaks and other errors I finally noticed that the str() on the
>> object of myClass looked odd. It returned something like this:
>>
>> List of 82
>>  $ file  : chr "my/file/location"
>>  $ handle:<externalptr>
>>  $ NA:
>> Error in object[[i]] : subscript out of bounds


>> My questions are, then, whether this behavior makes sense and what to do
>> about it. If I define my own str() method, will that fix it? I think I am
>> just misunderstanding what is going on with the methods I have defined.
>> Hopefully, someone can offer some clarity.

 Defining a str on your class will at least fix the out of bounds error:

Create a trivial S3 class:

 > z=list(1,22)
 > class(z)="foo"

length method looks at the second element:

 > length.foo=function(x){x[[2]]}
 > length(z)
[1] 22

 and str barfs:

 > str(z)
List of 22
 $ : num 1
 $ : num 22
 $ :Error in object[[i]] : subscript out of bounds

Define a str method:

 > str.foo=function(object,...){for(i in
1:length(unclass(object))){str(unclass(object[[i]]))}}
 > str(z)
 num 1
 num 22

BUT... the real problem is that S3 classes are seriously informal and
there's no concept of what methods you need to define on a class
because there's no concept of an "interface" that new classes have to
conform to. So stuff breaks, seemingly at random, and via action at a
distance. Somewhere something is going to expect z[[1]] to
z[[length(z)]] to exist, which is what the default str is doing...

+1 on Hadley - don't override any basic R structural methods, create
new ones with new names. You can make them more meaningful too. For
your example, maybe "messageCount(myObject)"?

Barry


From nawendt84 at gmail.com  Tue Feb  2 19:00:33 2016
From: nawendt84 at gmail.com (Nathan Wendt)
Date: Tue, 2 Feb 2016 12:00:33 -0600
Subject: [R-pkg-devel] S3 length method behavior
In-Reply-To: <CANVKczP-UhrEag0ea_LKc1MreezBMXpNMaL2v2ewMGacoe+DQw@mail.gmail.com>
References: <CAB3F6BwvNLQUFOJF_V4LzO86P17pQCaTe5ZjjHLW6OAgy88ZiA@mail.gmail.com>
	<CABdHhvGMo4MzYDuphEaNrSBTnEU7EBdT8_K9n5ZwEE=W9pq1Cg@mail.gmail.com>
	<CANVKczP-UhrEag0ea_LKc1MreezBMXpNMaL2v2ewMGacoe+DQw@mail.gmail.com>
Message-ID: <CAB3F6ByBDc0BDR_axD-Y=EdUY+A=tVPFf87G=Vg4C_8bSOuTeQ@mail.gmail.com>

After toying around with trying some of the suggested fixes, I have to
agree that it's more trouble than it is worth to add my own primitive
methods. It'll work just fine to move on and write my own methods. Thanks
to all for the explanations and suggestions.

On Tue, Feb 2, 2016 at 11:23 AM, Barry Rowlingson <
b.rowlingson at lancaster.ac.uk> wrote:

> On Tue, Feb 2, 2016 at 3:28 PM, Hadley Wickham <h.wickham at gmail.com>
> wrote:
> > I've found that it's a very bad idea to provide length or names
> > methods for just this reason.
>
>
> >> After looking
> >> for memory leaks and other errors I finally noticed that the str() on
> the
> >> object of myClass looked odd. It returned something like this:
> >>
> >> List of 82
> >>  $ file  : chr "my/file/location"
> >>  $ handle:<externalptr>
> >>  $ NA:
> >> Error in object[[i]] : subscript out of bounds
>
>
> >> My questions are, then, whether this behavior makes sense and what to do
> >> about it. If I define my own str() method, will that fix it? I think I
> am
> >> just misunderstanding what is going on with the methods I have defined.
> >> Hopefully, someone can offer some clarity.
>
>  Defining a str on your class will at least fix the out of bounds error:
>
> Create a trivial S3 class:
>
>  > z=list(1,22)
>  > class(z)="foo"
>
> length method looks at the second element:
>
>  > length.foo=function(x){x[[2]]}
>  > length(z)
> [1] 22
>
>  and str barfs:
>
>  > str(z)
> List of 22
>  $ : num 1
>  $ : num 22
>  $ :Error in object[[i]] : subscript out of bounds
>
> Define a str method:
>
>  > str.foo=function(object,...){for(i in
> 1:length(unclass(object))){str(unclass(object[[i]]))}}
>  > str(z)
>  num 1
>  num 22
>
> BUT... the real problem is that S3 classes are seriously informal and
> there's no concept of what methods you need to define on a class
> because there's no concept of an "interface" that new classes have to
> conform to. So stuff breaks, seemingly at random, and via action at a
> distance. Somewhere something is going to expect z[[1]] to
> z[[length(z)]] to exist, which is what the default str is doing...
>
> +1 on Hadley - don't override any basic R structural methods, create
> new ones with new names. You can make them more meaningful too. For
> your example, maybe "messageCount(myObject)"?
>
> Barry
>

	[[alternative HTML version deleted]]


From maechler at stat.math.ethz.ch  Wed Feb  3 08:52:24 2016
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed, 3 Feb 2016 08:52:24 +0100
Subject: [R-pkg-devel] S3 length method behavior
In-Reply-To: <CANVKczP-UhrEag0ea_LKc1MreezBMXpNMaL2v2ewMGacoe+DQw@mail.gmail.com>
References: <CAB3F6BwvNLQUFOJF_V4LzO86P17pQCaTe5ZjjHLW6OAgy88ZiA@mail.gmail.com>
	<CABdHhvGMo4MzYDuphEaNrSBTnEU7EBdT8_K9n5ZwEE=W9pq1Cg@mail.gmail.com>
	<CANVKczP-UhrEag0ea_LKc1MreezBMXpNMaL2v2ewMGacoe+DQw@mail.gmail.com>
Message-ID: <22193.45496.260831.363295@stat.math.ethz.ch>

>>>>> Barry Rowlingson <b.rowlingson at lancaster.ac.uk>
>>>>>     on Tue, 2 Feb 2016 17:23:46 +0000 writes:

    > On Tue, Feb 2, 2016 at 3:28 PM, Hadley Wickham <h.wickham at gmail.com> wrote:
    >> I've found that it's a very bad idea to provide length or names
    >> methods for just this reason.

well, not quite, see below ..

    >>> After looking
    >>> for memory leaks and other errors I finally noticed that the str() on the
    >>> object of myClass looked odd. It returned something like this:
    >>> 
    >>> List of 82
    >>> $ file  : chr "my/file/location"
    >>> $ handle:<externalptr>
    >>> $ NA:
    >>> Error in object[[i]] : subscript out of bounds


    >>> My questions are, then, whether this behavior makes sense and what to do
    >>> about it. If I define my own str() method, will that fix it? I think I am
    >>> just misunderstanding what is going on with the methods I have defined.
    >>> Hopefully, someone can offer some clarity.

    > Defining a str on your class will at least fix the out of bounds error:

    > Create a trivial S3 class:

    >> z=list(1,22)
    >> class(z)="foo"

    > length method looks at the second element:

    >> length.foo=function(x){x[[2]]}
    >> length(z)
    > [1] 22

    > and str barfs:

    >> str(z)
    > List of 22
    > $ : num 1
    > $ : num 22
    > $ :Error in object[[i]] : subscript out of bounds

    > Define a str method:

    >> str.foo=function(object,...){for(i in
    > 1:length(unclass(object))){str(unclass(object[[i]]))}}
    >> str(z)
    > num 1
    > num 22

    > BUT... the real problem is that S3 classes are seriously informal and
    > there's no concept of what methods you need to define on a class
    > because there's no concept of an "interface" that new classes have to
    > conform to. So stuff breaks, seemingly at random, and via action at a
    > distance. Somewhere something is going to expect z[[1]] to
    > z[[length(z)]] to exist, which is what the default str is doing...

Indeed.
Still, it can also be advantageous to define such methods *consistently*.

With *consistence*, I mean that at least

- names(obj) either returns NULL or a character vector of
  length length(obj), and that as Barry mentions,
- obj[[ i ]]  is meaningful  for (i in  seq_along(obj))
           [yes, seq_along(.) automatically works with your length() method !]

- often you'd also want  obj[ i ]  to also work consistently
  (sometimes identically to `[[`)

I'd say that oftentimes it may be easier (and more "rewarding")
to define such `[` and `[[` methods for your class anyway.

As author of str(), I'll declare the design(*) of str() to be such
that with these methods (length, names, `[`, `[[`) defined
consistently, str.default(obj) already works sensibly.  
The alternative is indeed to define your own str() method.  

One of the two you'd want often, because e.g.,
  str( list( <obj1>, <obj2> ) )
or similar things should work too.

--
(*) to be honest, str() grew and developed very much
    historically, so the above is more an "implementation principle"

    > +1 on Hadley - don't override any basic R structural methods, create
    > new ones with new names. You can make them more meaningful too. For
    > your example, maybe "messageCount(myObject)"?

    > Barry


From complexm at gmail.com  Wed Feb  3 09:37:23 2016
From: complexm at gmail.com (code M)
Date: Wed, 3 Feb 2016 09:37:23 +0100
Subject: [R-pkg-devel] compiling and executing binaries while testing
Message-ID: <CAA2dc0CCOND8iTUaHoBLA5yAn6YUpw5U+dzYVTqdPM-33ak00g@mail.gmail.com>

hi, i am sorry if this has been asked already,
but i could not find an answer.

in short: am i allowed to download, compile and
execute (github) packages while testing?

reason for this: the package i develop is a simple
'bridge', the goal is to allow users to easily access
(commonly used or their own) machine learning
binaries (like LIBSVM). obviously i will not add any
kind of binary to the package itself, but on the other
hand i cannot test the functionality of the package
without having a binary. therefore it seems most
reasonable to compile the binary while testing and
delete it afterwards.

are there any objections to this procedure?

thanks & all the best,
aydin


From iruckaE at mail2world.com  Tue Feb  2 20:23:51 2016
From: iruckaE at mail2world.com (Irucka Embry)
Date: Tue, 2 Feb 2016 11:23:51 -0800
Subject: [R-pkg-devel] Package fails to build on Windows only,
	builds on GNU/Linux (parse issue)
Message-ID: <A7206C4442984C489FB32461F8E78C03@mail2world.com>

https://gitlab.com/iembry/install.load/raw/master/R/install_load.R is
the link to raw R code for my package. I have been successful at
building the package on GNU/Linux, but building on Windows fails. I have
used R 3.2.3 in both cases.

On Windows, using readLines, this is the result of the Line 1:

[1] "?#' Check, Install and Load CRAN & USGS GRAN Packages"


On GNU/Linux, using readLines, this is the result of Line 1:

[1] "#' Check, Install and Load CRAN & USGS GRAN Packages"


Can someone offer suggestions on how to fix this character issue for
Windows package development?

I have created the R code with the Kate text editor. I have not had this
issue in the past with any of my R packages using the Kate text editor.

I have a few packages that have the same issue.

Thank you.

Irucka Embry 


<span id=m2wTl><p><font face="Arial, Helvetica, sans-serif" size="2" style="font-size:13.5px">_______________________________________________________________<BR>Get the Free email that has everyone talking at <a href=http://www.mail2world.com target=new>http://www.mail2world.com</a><br>  <font color=#999999>Unlimited Email Storage &#150; POP3 &#150; Calendar &#150; SMS &#150; Translator &#150; Much More!</font></font></span>
	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Wed Feb  3 10:51:21 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 3 Feb 2016 04:51:21 -0500
Subject: [R-pkg-devel] Package fails to build on Windows only,
 builds on GNU/Linux (parse issue)
In-Reply-To: <A7206C4442984C489FB32461F8E78C03@mail2world.com>
References: <A7206C4442984C489FB32461F8E78C03@mail2world.com>
Message-ID: <56B1CD99.4020501@gmail.com>

On 02/02/2016 2:23 PM, Irucka Embry wrote:
> https://gitlab.com/iembry/install.load/raw/master/R/install_load.R is
> the link to raw R code for my package. I have been successful at
> building the package on GNU/Linux, but building on Windows fails. I have
> used R 3.2.3 in both cases.
>
> On Windows, using readLines, this is the result of the Line 1:
>
> [1] "?#' Check, Install and Load CRAN & USGS GRAN Packages"
>
>
> On GNU/Linux, using readLines, this is the result of Line 1:
>
> [1] "#' Check, Install and Load CRAN & USGS GRAN Packages"
>
>
> Can someone offer suggestions on how to fix this character issue for
> Windows package development?

I can't see any difference there.  Is that the point, or do you see a 
difference?

What is the exact error message you get when parsing?

Duncan Murdoch

>
> I have created the R code with the Kate text editor. I have not had this
> issue in the past with any of my R packages using the Kate text editor.
>
> I have a few packages that have the same issue.
>
> Thank you.
>
> Irucka Embry
>
>
> <span id=m2wTl><p><font face="Arial, Helvetica, sans-serif" size="2" style="font-size:13.5px">_______________________________________________________________<BR>Get the Free email that has everyone talking at <a href=http://www.mail2world.com target=new>http://www.mail2world.com</a><br>  <font color=#999999>Unlimited Email Storage &#150; POP3 &#150; Calendar &#150; SMS &#150; Translator &#150; Much More!</font></font></span>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From lists at dewey.myzen.co.uk  Wed Feb  3 14:31:26 2016
From: lists at dewey.myzen.co.uk (Michael Dewey)
Date: Wed, 03 Feb 2016 13:31:26 +0000
Subject: [R-pkg-devel] Package fails to build on Windows only,
	builds on GNU/Linux (parse issue)
Message-ID: <Zen-1aQxWo-0004Sg-O5@smarthost01a.mail.zen.net.uk>

Duncan Murdoch <murdoch.duncan at gmail.com> wrote :

> On 02/02/2016 2:23 PM, Irucka Embry wrote:
> > https://gitlab.com/iembry/install.load/raw/master/R/install_load.R
> is
> > the link to raw R code for my package. I have been successful at
> > building the package on GNU/Linux, but building on Windows fails. I have
> > used R 3.2.3 in both cases.
> >
> > On Windows, using readLines, this is the result of the Line 1:
> >
> > [1] "???#' Check, Install and Load CRAN & USGS GRAN Packages"
> >

When I view that line via my webmail and using Chrome browser on Windows I see a string which seems to start:

lower case i possibly with an umlaut
closing guillemet
inverted question mark
hash symbol

whereas the GNU/Linux example just starts hash symbol

Hope that helps someone

> >
> > On GNU/Linux, using readLines, this is the result of Line 1:
> >
> > [1] "#' Check, Install and Load CRAN & USGS GRAN Packages"
> >
> >
> > Can someone offer suggestions on how to fix this character issue for
> > Windows package development?
> 
> I can't see any difference there.  Is that the point, or do you see a 
> difference?
> 
> What is the exact error message you get when parsing?
> 
> Duncan Murdoch
> 
> >
> > I have created the R code with the Kate text editor. I have not had this
> > issue in the past with any of my R packages using the Kate text editor.
> >
> > I have a few packages that have the same issue.
> >
> > Thank you.
> >
> > Irucka Embry
> >
> >
> > _______________________________________________________________Get
> the Free email that has everyone talking at  	[[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org
> mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> 
> ______________________________________________
> R-package-devel at r-project.org
> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ligges at statistik.tu-dortmund.de  Wed Feb  3 14:38:05 2016
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 3 Feb 2016 14:38:05 +0100
Subject: [R-pkg-devel] Package fails to build on Windows only,
 builds on GNU/Linux (parse issue)
In-Reply-To: <Zen-1aQxWo-0004Sg-O5@smarthost01a.mail.zen.net.uk>
References: <Zen-1aQxWo-0004Sg-O5@smarthost01a.mail.zen.net.uk>
Message-ID: <56B202BD.2010807@statistik.tu-dortmund.de>



On 03.02.2016 14:31, Michael Dewey wrote:
> Duncan Murdoch <murdoch.duncan at gmail.com> wrote :
>
>> On 02/02/2016 2:23 PM, Irucka Embry wrote:
>>> https://gitlab.com/iembry/install.load/raw/master/R/install_load.R
>> is
>>> the link to raw R code for my package. I have been successful at
>>> building the package on GNU/Linux, but building on Windows fails. I have
>>> used R 3.2.3 in both cases.
>>>
>>> On Windows, using readLines, this is the result of the Line 1:
>>>
>>> [1] "???#' Check, Install and Load CRAN & USGS GRAN Packages"
>>>
>
> When I view that line via my webmail and using Chrome browser on Windows I see a string which seems to start:
>
> lower case i possibly with an umlaut
> closing guillemet
> inverted question mark
> hash symbol
>


I guess the file is UTF-8 encoded and you read it under Windows as 
latin1 or therelike, so declare an encoding.

Best,
Uwe Ligges



> whereas the GNU/Linux example just starts hash symbol
>
> Hope that helps someone
>
>>>
>>> On GNU/Linux, using readLines, this is the result of Line 1:
>>>
>>> [1] "#' Check, Install and Load CRAN & USGS GRAN Packages"
>>>
>>>
>>> Can someone offer suggestions on how to fix this character issue for
>>> Windows package development?
>>
>> I can't see any difference there.  Is that the point, or do you see a
>> difference?
>>
>> What is the exact error message you get when parsing?
>>
>> Duncan Murdoch
>>
>>>
>>> I have created the R code with the Kate text editor. I have not had this
>>> issue in the past with any of my R packages using the Kate text editor.
>>>
>>> I have a few packages that have the same issue.
>>>
>>> Thank you.
>>>
>>> Irucka Embry
>>>
>>>
>>> _______________________________________________________________Get
>> the Free email that has everyone talking at  	[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org
>> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org
>> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From edd at debian.org  Wed Feb  3 19:17:25 2016
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 3 Feb 2016 12:17:25 -0600
Subject: [R-pkg-devel] compiling and executing binaries while testing
In-Reply-To: <CAA2dc0CCOND8iTUaHoBLA5yAn6YUpw5U+dzYVTqdPM-33ak00g@mail.gmail.com>
References: <CAA2dc0CCOND8iTUaHoBLA5yAn6YUpw5U+dzYVTqdPM-33ak00g@mail.gmail.com>
Message-ID: <22194.17461.108363.350023@max.nulle.part>


Dear 'code M',

We all participate here with 'vizors up' and clear view of each other's
identities. Please consider doing the same.

On 3 February 2016 at 09:37, code M wrote:
| hi, i am sorry if this has been asked already,
| but i could not find an answer.
| 
| in short: am i allowed to download, compile and
| execute (github) packages while testing?

On you own machine: sure, do whatever.

On CRAN: I do not know, and I don't get to set the rules but at a minimum
there are time limits for tests.
 
| reason for this: the package i develop is a simple
| 'bridge', the goal is to allow users to easily access
| (commonly used or their own) machine learning
| binaries (like LIBSVM). obviously i will not add any

That is an odd example as LIBSVM has been packaged for R for years if not
decades -- eg starting the with common package 'e1071', see JSS Vol 15 Issue
9 in 2006 for a paper by the authors.

| kind of binary to the package itself, but on the other
| hand i cannot test the functionality of the package
| without having a binary. therefore it seems most
| reasonable to compile the binary while testing and
| delete it afterwards.

Maybe you can mock the tests otherwise?  Or just depend on e1071 for testing?
 
| are there any objections to this procedure?

"Maybe".

In general, "it is complicated" and "it depends".  Christoph Sax and I just
created and released a package acting as an installer for binaries off GitHub
but I don't think you one generalize this in as unqualified a manner as you
suggest here.

Dirk

| 
| thanks & all the best,
| aydin
| 
| ______________________________________________
| R-package-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From iruckaE at mail2world.com  Wed Feb  3 23:20:50 2016
From: iruckaE at mail2world.com (Irucka Embry)
Date: Wed, 3 Feb 2016 14:20:50 -0800
Subject: [R-pkg-devel] Package fails to build on Windows only,
	builds on GNU/Linux (parse issue)
Message-ID: <38D5BA98FA0A417D90A080268029836C@mail2world.com>

Hi everyone, thank you for the responses.

I did some more searching after I had posted my question. It was a BOM
(Byte Order Mark) issue. I removed the BOM from all of my files and I
have been successful at submitting the packages to CRAN.

Thank you again.

Irucka


<-----Original Message-----> 
>From: Uwe Ligges [ligges at statistik.tu-dortmund.de]
>Sent: 2/3/2016 7:38:05 AM
>To:
lists at dewey.myzen.co.uk;murdoch.duncan at gmail.com;iruckaE at mail2world.com;
r-package-devel at r-
>project.org
>Subject: Re: [R-pkg-devel] Package fails to build on Windows only,
builds on GNU/Linux (parse issue)
>
>On 03.02.2016 14:31, Michael Dewey wrote:
>> Duncan Murdoch <murdoch.duncan at gmail.com> wrote :
>>
>>> On 02/02/2016 2:23 PM, Irucka Embry wrote:
>>>> https://gitlab.com/iembry/install.load/raw/master/R/install_load.R
>>> is
>>>> the link to raw R code for my package. I have been successful at
>>>> building the package on GNU/Linux, but building on Windows fails. I
have
>>>> used R 3.2.3 in both cases.
>>>>
>>>> On Windows, using readLines, this is the result of the Line 1:
>>>>
>>>> [1] "?#' Check, Install and Load CRAN & USGS GRAN Packages"
>>>>
>>
>> When I view that line via my webmail and using Chrome browser on
Windows I see a string which 
>seems to start:
>>
>> lower case i possibly with an umlaut
>> closing guillemet
>> inverted question mark
>> hash symbol
>>
>
>
>I guess the file is UTF-8 encoded and you read it under Windows as 
>latin1 or therelike, so declare an encoding.
>
>Best,
>Uwe Ligges
>
>
>
>> whereas the GNU/Linux example just starts hash symbol
>>
>> Hope that helps someone
>>
>>>>
>>>> On GNU/Linux, using readLines, this is the result of Line 1:
>>>>
>>>> [1] "#' Check, Install and Load CRAN & USGS GRAN Packages"
>>>>
>>>>
>>>> Can someone offer suggestions on how to fix this character issue
for
>>>> Windows package development?
>>>
>>> I can't see any difference there. Is that the point, or do you see a
>>> difference?
>>>
>>> What is the exact error message you get when parsing?
>>>
>>> Duncan Murdoch
>>>
>>>>
>>>> I have created the R code with the Kate text editor. I have not had
this
>>>> issue in the past with any of my R packages using the Kate text
editor.
>>>>
>>>> I have a few packages that have the same issue.
>>>>
>>>> Thank you.
>>>>
>>>> Irucka Embry
>>>>
>>>>
>>>> _______________________________________________________________Get
>>> the Free email that has everyone talking at [[alternative HTML
version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org
>>> mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org
>>> mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>.
> 


<span id=m2wTl><p><font face="Arial, Helvetica, sans-serif" size="2" style="font-size:13.5px">_______________________________________________________________<BR>Get the Free email that has everyone talking at <a href=http://www.mail2world.com target=new>http://www.mail2world.com</a><br>  <font color=#999999>Unlimited Email Storage &#150; POP3 &#150; Calendar &#150; SMS &#150; Translator &#150; Much More!</font></font></span>
	[[alternative HTML version deleted]]


From cdetermanjr at gmail.com  Fri Feb  5 14:30:41 2016
From: cdetermanjr at gmail.com (Charles Determan)
Date: Fri, 5 Feb 2016 07:30:41 -0600
Subject: [R-pkg-devel] Development Testers?
Message-ID: <CAKxd1KMiC_AC33qTYdZBWhyMx5NuxJFAh6qCPmNCaJQatwhjhw@mail.gmail.com>

I'm not sure if this question is appropriate for the R mailing lists but
I'm not sure where else to ask.

I am wondering if there is any means by which package authors can solicit
testers for a package.  I believe this is often referred to as 'crowd
sourced testing'.

I am aware of continuous integration platforms and unit testing (e.g.
testthat) but that only gets me so far.  In my particular instance I am
developing packages for GPU computing (maybe this request would be best on
the HPC mailing list?).  As such, I can't possibly have access to every
type of GPU.  I would like to find a means of 'recruiting' users who may
have different pieces of hardware to test my package.  Of course this won't
be exhaustive but any additional testing that others could provide would
make the package all the more stable.

Regards,
Charles

	[[alternative HTML version deleted]]


From cdetermanjr at gmail.com  Sat Feb  6 17:33:03 2016
From: cdetermanjr at gmail.com (Charles Determan)
Date: Sat, 6 Feb 2016 10:33:03 -0600
Subject: [R-pkg-devel] Development Testers?
In-Reply-To: <560AD7FA-17DF-41B1-AE2D-B67B1081F65C@utoronto.ca>
References: <CAKxd1KMiC_AC33qTYdZBWhyMx5NuxJFAh6qCPmNCaJQatwhjhw@mail.gmail.com>
	<560AD7FA-17DF-41B1-AE2D-B67B1081F65C@utoronto.ca>
Message-ID: <CAKxd1KPSToQ9Rwq3kiiZVKGqVqGvWHu1a0kapvcqKhuop498Gw@mail.gmail.com>

Thanks Boris,

My main concern I suppose is if this mailing list is appropriate to
occasionally solicit additional testers.  Just curious what people (i.e.
Admins) would think about using the list for such a purpose.

Regards,
Charles

On Friday, February 5, 2016, Boris Steipe <boris.steipe at utoronto.ca> wrote:

> Of course I can speak only for myself, but I'd help out if asked and I
> think in general you'll find people here to be a pretty helpful bunch.
>
> Cheers,
> Boris
>
>
> On Feb 5, 2016, at 8:30 AM, Charles Determan <cdetermanjr at gmail.com
> <javascript:;>> wrote:
>
> > I'm not sure if this question is appropriate for the R mailing lists but
> > I'm not sure where else to ask.
> >
> > I am wondering if there is any means by which package authors can solicit
> > testers for a package.  I believe this is often referred to as 'crowd
> > sourced testing'.
> >
> > I am aware of continuous integration platforms and unit testing (e.g.
> > testthat) but that only gets me so far.  In my particular instance I am
> > developing packages for GPU computing (maybe this request would be best
> on
> > the HPC mailing list?).  As such, I can't possibly have access to every
> > type of GPU.  I would like to find a means of 'recruiting' users who may
> > have different pieces of hardware to test my package.  Of course this
> won't
> > be exhaustive but any additional testing that others could provide would
> > make the package all the more stable.
> >
> > Regards,
> > Charles
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org <javascript:;> mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>

	[[alternative HTML version deleted]]


From boris.steipe at utoronto.ca  Sat Feb  6 01:40:21 2016
From: boris.steipe at utoronto.ca (Boris Steipe)
Date: Fri, 5 Feb 2016 19:40:21 -0500
Subject: [R-pkg-devel] Development Testers?
In-Reply-To: <CAKxd1KMiC_AC33qTYdZBWhyMx5NuxJFAh6qCPmNCaJQatwhjhw@mail.gmail.com>
References: <CAKxd1KMiC_AC33qTYdZBWhyMx5NuxJFAh6qCPmNCaJQatwhjhw@mail.gmail.com>
Message-ID: <560AD7FA-17DF-41B1-AE2D-B67B1081F65C@utoronto.ca>

Of course I can speak only for myself, but I'd help out if asked and I think in general you'll find people here to be a pretty helpful bunch.

Cheers,
Boris


On Feb 5, 2016, at 8:30 AM, Charles Determan <cdetermanjr at gmail.com> wrote:

> I'm not sure if this question is appropriate for the R mailing lists but
> I'm not sure where else to ask.
> 
> I am wondering if there is any means by which package authors can solicit
> testers for a package.  I believe this is often referred to as 'crowd
> sourced testing'.
> 
> I am aware of continuous integration platforms and unit testing (e.g.
> testthat) but that only gets me so far.  In my particular instance I am
> developing packages for GPU computing (maybe this request would be best on
> the HPC mailing list?).  As such, I can't possibly have access to every
> type of GPU.  I would like to find a means of 'recruiting' users who may
> have different pieces of hardware to test my package.  Of course this won't
> be exhaustive but any additional testing that others could provide would
> make the package all the more stable.
> 
> Regards,
> Charles
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From dmcp at webmail.co.za  Sat Feb  6 10:20:59 2016
From: dmcp at webmail.co.za (David McPearson)
Date: Sat, 06 Feb 2016 11:20:59 +0200
Subject: [R-pkg-devel] double colon
In-Reply-To: <DUB127-W321D010CC12F3B0892D673D5DB0@phx.gbl>
References: <DUB127-W103F48A679D41783DF4427D5DB0@phx.gbl>,
	<56AB8BAC.2050208@statistik.tu-dortmund.de>,
	<DUB127-W321D010CC12F3B0892D673D5DB0@phx.gbl>
Message-ID: <df4d931e4bf29de14e89b39a0831ecdc@www.webmail.co.za>

On Fri, 29 Jan 2016 17:41:40 +0100 Berry Boessenkool
<berryboessenkool at hotmail.com> wrote

> Thanks for your reply, Uwe.
> The guy yesterday very strongly suggested it for user readability, but I
> wanted to get more opinions before doing so much work. (No offense, Steven).
> 
> I'm not sure whether we talk about the same thing considering functions
> *within* the package. Say I have 'MyPackage' with 'fun_a' and also 'fun_b',
> which inside calls 'fun_a'. (Both exported) That wouldn't be in imports or
> suggests, right? 
>
> Now image by unfortunate history there is 'AnotherPackage' that also has
(its
> own and different) 'fun_a'. Is far as I remember, 'fun_b' will still call
> 'fun_a' from 'MyPackage'. I can't find back where I read that, though.
> For user readability and to be on the safe side, in the future I'll write
> 'MyPackage::fun_a'. (Of course, if I'm aware, I'll avoid same-name functions
> altogether). 
>
> kind regards,
> Berry
> 
> 
> > Subject: Re: [R-pkg-devel] double colon
<... cut for brevity...>

Indeed you appear to be correct. Have a look at
http://adv-r.had.co.nz/Environments.html#function-envs
..and a much briefer (if a little less detailed) explanation in
https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Package-namespaces

+ + + + +

And Hadley, if you're reading this (if you're not I suppose it's a waste of
bandwidth):
Thanks very much for "Advanced R" It has been of immeasurable help to me.
I see you've put answers to (at least) some of the exercises. This is a good
thing. When I worked through it last I usually came up with *an* answer to one
of the exercise, but often I had little clue as to whether or not it was the
(or a) correct answer (not you're writing, my brain turned into a brick a
decade or two ago, before I'd even heard of R). So thanks also for your
continuing work, and I get to go back over it again.

Cheers all.

____________________________________________________________
South Africas premier free email service - www.webmail.co.za


From maechler at stat.math.ethz.ch  Tue Feb  9 11:43:54 2016
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Tue, 9 Feb 2016 11:43:54 +0100
Subject: [R-pkg-devel] Development Testers?
In-Reply-To: <CAKxd1KPSToQ9Rwq3kiiZVKGqVqGvWHu1a0kapvcqKhuop498Gw@mail.gmail.com>
References: <CAKxd1KMiC_AC33qTYdZBWhyMx5NuxJFAh6qCPmNCaJQatwhjhw@mail.gmail.com>
	<560AD7FA-17DF-41B1-AE2D-B67B1081F65C@utoronto.ca>
	<CAKxd1KPSToQ9Rwq3kiiZVKGqVqGvWHu1a0kapvcqKhuop498Gw@mail.gmail.com>
Message-ID: <22201.49898.902979.364802@stat.math.ethz.ch>

>>>>> Charles Determan <cdetermanjr at gmail.com>
>>>>>     on Sat, 6 Feb 2016 10:33:03 -0600 writes:

    > Thanks Boris, My main concern I suppose is if this mailing
    > list is appropriate to occasionally solicit additional
    > testers.  Just curious what people (i.e.  Admins) would
    > think about using the list for such a purpose.

I (as one of the moderators) don't have a strong view on this
for this special case, but would actually recommend to use
R-devel (or even R-help) for this, rather than R-package-devel,
because the latter is indeed quite focused (with a somewhat different
focus).

And yes, for the specific, I'd strongly recommend  R-SIG-HPC (in
addition, i.e., with the very rare case of sensible cross posting).

Best regards,
Martin


--
Martin Maechler
ETH Zurich and R Core Team

    > Regards, Charles

    > On Friday, February 5, 2016, Boris Steipe
    > <boris.steipe at utoronto.ca> wrote:

    >> Of course I can speak only for myself, but I'd help out
    >> if asked and I think in general you'll find people here
    >> to be a pretty helpful bunch.
    >> 
    >> Cheers, Boris
    >> 
    >> 
    >> On Feb 5, 2016, at 8:30 AM, Charles Determan
    >> <cdetermanjr at gmail.com <javascript:;>> wrote:
    >> 
    >> > I'm not sure if this question is appropriate for the R
    >> mailing lists but > I'm not sure where else to ask.
    >> >
    >> > I am wondering if there is any means by which package
    >> authors can solicit > testers for a package.  I believe
    >> this is often referred to as 'crowd > sourced testing'.
    >> >
    >> > I am aware of continuous integration platforms and unit
    >> testing (e.g.  > testthat) but that only gets me so far.
    >> In my particular instance I am > developing packages for
    >> GPU computing (maybe this request would be best on > the
    >> HPC mailing list?).  As such, I can't possibly have
    >> access to every > type of GPU.  I would like to find a
    >> means of 'recruiting' users who may > have different
    >> pieces of hardware to test my package.  Of course this
    >> won't > be exhaustive but any additional testing that
    >> others could provide would > make the package all the
    >> more stable.
    >> >
    >> > Regards, > Charles
    >> >
    >> > [[alternative HTML version deleted]]
    >> >
    >> > ______________________________________________ >
    >> R-package-devel at r-project.org <javascript:;> mailing list
    >> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
    >> 
    >> 

    > 	[[alternative HTML version deleted]]

    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From thierry.onkelinx at inbo.be  Tue Feb  9 15:33:26 2016
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Tue, 9 Feb 2016 15:33:26 +0100
Subject: [R-pkg-devel] pdflatex crashes with R CMD check
Message-ID: <CAJuCY5xNceAXxPp57SSuYCz1UWK8mNW_rF90nmUhRLFczn-t3A@mail.gmail.com>

Dear all,

I have a package with a Rnw vignette. The vignette builds without a
problem. R CMD build and R CMD check run without problem on Ubuntu but fail
on Windows.

The problem starts at the point where "R CMD build mypackage" creates the
vignettes.
- First the log shows: "* creating vignettes ..."
- Then I get a popup window stating "pdflatex.EXE stops working".
- I choose to "stop pdflatex.exe".
- R CMD build resumes and displays "* creating vignettes ... OK".

A similar problem occurs wtih "R CMD check --as-cran mypackage_x.z.y.tar.gz"

- The log shows: "* checking re-building of vignette outputs ..."
- Then I get a popup window stating "pdflatex.EXE stops working".
- I choose to "stop pdflatex.exe".
- R CMD check resumes and displays "* checking re-building of vignette
outputs ... OK".
- The log shows: "* checking PDF version of manual ..."
- Then I get a popup window stating "pdflatex.EXE stops working".
- I choose to "stop pdflatex.exe".
- R CMD check resumes and displays "* checking PDF version of manual ...
OK".

The pdf of both the vignette and the manual are compiled in
mypackage.Rcheck. The pdf of the vignette is present in the tar.gz and .zip

The only warning I can find it in Rdaltex.log:
Warning: running command '"C:\R\MIKTEX~1.9\miktex\bin\x64\texify.exe"
 --pdf "Rd2.tex" --max-iterations=20 -I
"c:/R/R-32~1.3/share/texmf/tex/latex" -I
"c:/R/R-32~1.3/share/texmf/bibtex/bst"' had status 1

Does someone has a clue what is going wrong?

Best regards,

Thierry

ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature and
Forest
team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
Kliniekstraat 25
1070 Anderlecht
Belgium

To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Tue Feb  9 15:59:23 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 9 Feb 2016 09:59:23 -0500
Subject: [R-pkg-devel] pdflatex crashes with R CMD check
In-Reply-To: <CAJuCY5xNceAXxPp57SSuYCz1UWK8mNW_rF90nmUhRLFczn-t3A@mail.gmail.com>
References: <CAJuCY5xNceAXxPp57SSuYCz1UWK8mNW_rF90nmUhRLFczn-t3A@mail.gmail.com>
Message-ID: <56B9FECB.8020809@gmail.com>

On 09/02/2016 9:33 AM, Thierry Onkelinx wrote:
> Dear all,
>
> I have a package with a Rnw vignette. The vignette builds without a
> problem. R CMD build and R CMD check run without problem on Ubuntu but fail
> on Windows.
>
> The problem starts at the point where "R CMD build mypackage" creates the
> vignettes.
> - First the log shows: "* creating vignettes ..."
> - Then I get a popup window stating "pdflatex.EXE stops working".
> - I choose to "stop pdflatex.exe".
> - R CMD build resumes and displays "* creating vignettes ... OK".
>
> A similar problem occurs wtih "R CMD check --as-cran mypackage_x.z.y.tar.gz"
>
> - The log shows: "* checking re-building of vignette outputs ..."
> - Then I get a popup window stating "pdflatex.EXE stops working".
> - I choose to "stop pdflatex.exe".
> - R CMD check resumes and displays "* checking re-building of vignette
> outputs ... OK".
> - The log shows: "* checking PDF version of manual ..."
> - Then I get a popup window stating "pdflatex.EXE stops working".
> - I choose to "stop pdflatex.exe".
> - R CMD check resumes and displays "* checking PDF version of manual ...
> OK".
>
> The pdf of both the vignette and the manual are compiled in
> mypackage.Rcheck. The pdf of the vignette is present in the tar.gz and .zip
>
> The only warning I can find it in Rdaltex.log:
> Warning: running command '"C:\R\MIKTEX~1.9\miktex\bin\x64\texify.exe"
>   --pdf "Rd2.tex" --max-iterations=20 -I
> "c:/R/R-32~1.3/share/texmf/tex/latex" -I
> "c:/R/R-32~1.3/share/texmf/bibtex/bst"' had status 1
>
> Does someone has a clue what is going wrong?

Miktex has been messing around with texify, and possibly with pdflatex 
(I'm just guessing from your popups).  You might try updating it, or 
switching to a different version, or switching to texlive.

Duncan Murdoch


From carnivorescience at gmail.com  Thu Feb 11 16:45:40 2016
From: carnivorescience at gmail.com (Guillaume Chapron)
Date: Thu, 11 Feb 2016 16:45:40 +0100
Subject: [R-pkg-devel] Rprintf with mclapply
Message-ID: <34A4BBE3-B4C1-4685-8697-C1CACE0CF00E@gmail.com>

Hello,

I have a R package with a compiled C executable to run simulations. Simulations can be very long so I use mclapply to launch several instances (each with a different R seed). I would need to follow the simulation progress and I used to do that with printf in the C code. But this is not allowed on CRAN and I have to use Rprintf. The problem is that with mclapply, Rprintf prints nothing in the R console! Any idea how can I fix this? Thanks!

Guillaume

From glennmschultz at me.com  Tue Feb 16 18:14:18 2016
From: glennmschultz at me.com (Glenn Schultz)
Date: Tue, 16 Feb 2016 17:14:18 +0000 (GMT)
Subject: [R-pkg-devel] Namespace error
Message-ID: <c7b28371-1da8-4f01-a897-6c513098c728@me.com>

All

I am not sure why I am getting this error and I cannot find anything on the net other than try to restart R. I am
using Roxygen2 and it clearly says don't edit by hand at the top of the namespace so I am stuck as what to do or look for.

Glenn

Error in namespaceExport(ns, exports) : undefined exports: View
Error: package or namespace load failed for ?BondLab?
Execution halted
* checking whether the namespace can be loaded with stated dependencies ... WARNING
Error in namespaceExport(ns, exports) : undefined exports: View
Calls: loadNamespace ... namespaceImportFrom -> asNamespace -> loadNamespace -> namespaceExport
Execution halted

A namespace must be able to be loaded with just the base namespace
loaded: otherwise if the namespace gets loaded by a saved object, the
session will be unable to start.

Probably some imports need to be declared in the NAMESPACE file.
* checking whether the namespace can be unloaded cleanly ... OK
* checking dependencies in R code ... NOTE
Error: package or namespace load failed for ?BondLab?
Call sequence:
2: stop(gettextf("package or namespace load failed for %s", sQuote(package)), 
call. = FALSE, domain = NA)


Here is my namespace:

# Generated by roxygen2: do not edit by hand

export(AtomsData)
export(BeginBal)
export(Bond)
export(BondAnalytics)
export(BondBasisConversion)
export(BondCashFlows)
export(CDR.To.MDR)
export(CIRBondPrice)
export(CIRSim)
export(CPR.To.SMM)
export(CalibrateCIR)
export(CashFlowTable)
export(CollateralGroup)
export(CusipRecord)
export(DollarRoll)
export(DollarRollAnalytics)
export(Effective.Convexity)
export(Effective.Duration)
export(Effective.Measure)
export(EndingBal)
export(EstimYTM)
export(Forward.Rate)
export(ForwardPassThrough)
export(HPISim)
export(Interest)
export(MBS)
export(MakeBondDetails)
export(MakeCollateral)
export(MakeMBSDetails)
export(MakeModelTune)
export(MakeRAID)
export(MakeRDME)
export(MakeScenario)
export(MakeSchedule)
export(MakeTranche)
export(ModelTune)
export(Mortgage.Monthly.Payment)
export(Mortgage.OAS)
export(MortgageCashFlow)
export(MortgageCashFlowArray)
export(MortgageCashFlow_Array)
export(MortgageRate)
export(Mtg.Scenario)
export(MtgRate)
export(MtgTermStructure)
export(PPC.Ramp)
export(PassThroughOAS)
export(PaymentDate)
export(PrepaymentAssumption)
export(RDMEData)
export(RDMEFactor)
export(REMICDeal)
export(REMICGroupConn)
export(REMICSchedules)
export(REMICWaterFall)
export(Rates)
export(ReadRAID)
export(Remain.Balance)
export(RemicStructure)
export(SMM.To.CPR)
export(SMMVector.To.CPR)
export(SaveCollGroup)
export(SaveMBS)
export(SaveModelTune)
export(SaveRAID)
export(SaveRDME)
export(SaveREMIC)
export(SaveScenario)
export(SaveSchedules)
export(SaveTranche)
export(SaveTranches)
export(ScenarioCall)
export(Sched.Prin)
export(SwapRateData)
export(TermStructure)
export(TimeValue)
export(Tranches)
export(ULTV)
export(bondprice)
exportClasses(AtomsAnalytics)
exportClasses(AtomsData)
exportClasses(AtomsScenario)
exportClasses(BondCashFlows)
exportClasses(BondDetails)
exportClasses(BondTermStructure)
exportClasses(MBSDetails)
exportClasses(TermStructure)
import(data.tree)
import(methods)
import(optimx)
importFrom(lubridate,"%m+%")
importFrom(lubridate,day)
importFrom(lubridate,month)
importFrom(lubridate,year)
importFrom(lubridate,years)
importFrom(termstrc,create_cashflows_matrix)
importFrom(termstrc,create_maturities_matrix)
importFrom(termstrc,estim_cs)
importFrom(termstrc,estim_nss)
importFrom(termstrc,forwardrates)
importFrom(termstrc,spotrates)

From murdoch.duncan at gmail.com  Wed Feb 17 02:04:50 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 16 Feb 2016 20:04:50 -0500
Subject: [R-pkg-devel] Namespace error
In-Reply-To: <c7b28371-1da8-4f01-a897-6c513098c728@me.com>
References: <c7b28371-1da8-4f01-a897-6c513098c728@me.com>
Message-ID: <56C3C732.9030702@gmail.com>

On 16/02/2016 12:14 PM, Glenn Schultz wrote:
> All
>
> I am not sure why I am getting this error and I cannot find anything on the net other than try to restart R. I am
> using Roxygen2 and it clearly says don't edit by hand at the top of the namespace so I am stuck as what to do or look for.

You will need to contact the Roxygen2 maintainers about this.  We don't 
support it.

Duncan Murdoch

> Glenn
>
> Error in namespaceExport(ns, exports) : undefined exports: View
> Error: package or namespace load failed for ?BondLab?
> Execution halted
> * checking whether the namespace can be loaded with stated dependencies ... WARNING
> Error in namespaceExport(ns, exports) : undefined exports: View
> Calls: loadNamespace ... namespaceImportFrom -> asNamespace -> loadNamespace -> namespaceExport
> Execution halted
>
> A namespace must be able to be loaded with just the base namespace
> loaded: otherwise if the namespace gets loaded by a saved object, the
> session will be unable to start.
>
> Probably some imports need to be declared in the NAMESPACE file.
> * checking whether the namespace can be unloaded cleanly ... OK
> * checking dependencies in R code ... NOTE
> Error: package or namespace load failed for ?BondLab?
> Call sequence:
> 2: stop(gettextf("package or namespace load failed for %s", sQuote(package)),
> call. = FALSE, domain = NA)
>
>
> Here is my namespace:
>
> # Generated by roxygen2: do not edit by hand
>
> export(AtomsData)
> export(BeginBal)
> export(Bond)
> export(BondAnalytics)
> export(BondBasisConversion)
> export(BondCashFlows)
> export(CDR.To.MDR)
> export(CIRBondPrice)
> export(CIRSim)
> export(CPR.To.SMM)
> export(CalibrateCIR)
> export(CashFlowTable)
> export(CollateralGroup)
> export(CusipRecord)
> export(DollarRoll)
> export(DollarRollAnalytics)
> export(Effective.Convexity)
> export(Effective.Duration)
> export(Effective.Measure)
> export(EndingBal)
> export(EstimYTM)
> export(Forward.Rate)
> export(ForwardPassThrough)
> export(HPISim)
> export(Interest)
> export(MBS)
> export(MakeBondDetails)
> export(MakeCollateral)
> export(MakeMBSDetails)
> export(MakeModelTune)
> export(MakeRAID)
> export(MakeRDME)
> export(MakeScenario)
> export(MakeSchedule)
> export(MakeTranche)
> export(ModelTune)
> export(Mortgage.Monthly.Payment)
> export(Mortgage.OAS)
> export(MortgageCashFlow)
> export(MortgageCashFlowArray)
> export(MortgageCashFlow_Array)
> export(MortgageRate)
> export(Mtg.Scenario)
> export(MtgRate)
> export(MtgTermStructure)
> export(PPC.Ramp)
> export(PassThroughOAS)
> export(PaymentDate)
> export(PrepaymentAssumption)
> export(RDMEData)
> export(RDMEFactor)
> export(REMICDeal)
> export(REMICGroupConn)
> export(REMICSchedules)
> export(REMICWaterFall)
> export(Rates)
> export(ReadRAID)
> export(Remain.Balance)
> export(RemicStructure)
> export(SMM.To.CPR)
> export(SMMVector.To.CPR)
> export(SaveCollGroup)
> export(SaveMBS)
> export(SaveModelTune)
> export(SaveRAID)
> export(SaveRDME)
> export(SaveREMIC)
> export(SaveScenario)
> export(SaveSchedules)
> export(SaveTranche)
> export(SaveTranches)
> export(ScenarioCall)
> export(Sched.Prin)
> export(SwapRateData)
> export(TermStructure)
> export(TimeValue)
> export(Tranches)
> export(ULTV)
> export(bondprice)
> exportClasses(AtomsAnalytics)
> exportClasses(AtomsData)
> exportClasses(AtomsScenario)
> exportClasses(BondCashFlows)
> exportClasses(BondDetails)
> exportClasses(BondTermStructure)
> exportClasses(MBSDetails)
> exportClasses(TermStructure)
> import(data.tree)
> import(methods)
> import(optimx)
> importFrom(lubridate,"%m+%")
> importFrom(lubridate,day)
> importFrom(lubridate,month)
> importFrom(lubridate,year)
> importFrom(lubridate,years)
> importFrom(termstrc,create_cashflows_matrix)
> importFrom(termstrc,create_maturities_matrix)
> importFrom(termstrc,estim_cs)
> importFrom(termstrc,estim_nss)
> importFrom(termstrc,forwardrates)
> importFrom(termstrc,spotrates)
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From csardi.gabor at gmail.com  Wed Feb 17 10:25:23 2016
From: csardi.gabor at gmail.com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Wed, 17 Feb 2016 09:25:23 +0000
Subject: [R-pkg-devel] Namespace error
In-Reply-To: <56C3C732.9030702@gmail.com>
References: <c7b28371-1da8-4f01-a897-6c513098c728@me.com>
	<56C3C732.9030702@gmail.com>
Message-ID: <CABtg=KnimXCZswsQoU+7hhUCeb0V_cpVBw6W4QDNLmDp=3rxhg@mail.gmail.com>

On Wed, Feb 17, 2016 at 1:04 AM, Duncan Murdoch
<murdoch.duncan at gmail.com> wrote:
> On 16/02/2016 12:14 PM, Glenn Schultz wrote:
>>
>> All
>>
>> I am not sure why I am getting this error and I cannot find anything on
>> the net other than try to restart R. I am
>> using Roxygen2 and it clearly says don't edit by hand at the top of the
>> namespace so I am stuck as what to do or look for.
>
>
> You will need to contact the Roxygen2 maintainers about this.  We don't
> support it.

So, this mailing list is about developing packages using base R
packages only and exclusively?

I suggest that the owners clarify this on the "about" page, because I
totally missed it, and almost answered this question. :)

Gabor

> Duncan Murdoch
[...]


From pdalgd at gmail.com  Wed Feb 17 11:07:37 2016
From: pdalgd at gmail.com (peter dalgaard)
Date: Wed, 17 Feb 2016 11:07:37 +0100
Subject: [R-pkg-devel] Namespace error
In-Reply-To: <CABtg=KnimXCZswsQoU+7hhUCeb0V_cpVBw6W4QDNLmDp=3rxhg@mail.gmail.com>
References: <c7b28371-1da8-4f01-a897-6c513098c728@me.com>
	<56C3C732.9030702@gmail.com>
	<CABtg=KnimXCZswsQoU+7hhUCeb0V_cpVBw6W4QDNLmDp=3rxhg@mail.gmail.com>
Message-ID: <E69610B4-9908-42C7-BBF8-C13913EBD695@gmail.com>


On 17 Feb 2016, at 10:25 , G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:

> On Wed, Feb 17, 2016 at 1:04 AM, Duncan Murdoch
> <murdoch.duncan at gmail.com> wrote:
>> On 16/02/2016 12:14 PM, Glenn Schultz wrote:
>>> 
>>> All
>>> 
>>> I am not sure why I am getting this error and I cannot find anything on
>>> the net other than try to restart R. I am
>>> using Roxygen2 and it clearly says don't edit by hand at the top of the
>>> namespace so I am stuck as what to do or look for.
>> 
>> 
>> You will need to contact the Roxygen2 maintainers about this.  We don't
>> support it.
> 
> So, this mailing list is about developing packages using base R
> packages only and exclusively?
> 
> I suggest that the owners clarify this on the "about" page, because I
> totally missed it, and almost answered this question. :)


Well, by all means, then....

It's like r-help. Sometimes a question seems better directed at RStudio support or the platform specific mailing lists, and people get redirected, but hey, we're supposed to be friendly in here, so if you happen to know the answer, just tell. 

(The list was mainly set up to facilitate issues between CRAN and package maintainers, so the expertise that you can assume to be present is that of people who know why CRAN is being picky, etc. There's little point in keeping the expertise of others out, but there's a blurry line towards doing 3rd party maintainers' work for them.)

-pd

> 
> Gabor
> 
>> Duncan Murdoch
> [...]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From kirill.mueller at ivt.baug.ethz.ch  Tue Feb 23 11:45:46 2016
From: kirill.mueller at ivt.baug.ethz.ch (=?UTF-8?Q?Kirill_M=c3=bcller?=)
Date: Tue, 23 Feb 2016 11:45:46 +0100
Subject: [R-pkg-devel] Namespace error
In-Reply-To: <c7b28371-1da8-4f01-a897-6c513098c728@me.com>
References: <c7b28371-1da8-4f01-a897-6c513098c728@me.com>
Message-ID: <56CC385A.9000106@ivt.baug.ethz.ch>

It's difficult to tell without seeing the source code, but the NAMESPACE 
you posted doesn't seem to contain "View". This file usually gets 
updated when you call devtools::document() or roxygen2::roxygenize(). 
What happens if you run one of these functions?


-Kirill


On 16.02.2016 18:14, Glenn Schultz wrote:
> All
>
> I am not sure why I am getting this error and I cannot find anything 
> on the net other than try to restart R. I am
> using Roxygen2 and it clearly says don't edit by hand at the top of 
> the namespace so I am stuck as what to do or look for.
>
> Glenn
>
> Error in namespaceExport(ns, exports) : undefined exports: View
> Error: package or namespace load failed for ?BondLab?
> Execution halted
> * checking whether the namespace can be loaded with stated 
> dependencies ... WARNING
> Error in namespaceExport(ns, exports) : undefined exports: View
> Calls: loadNamespace ... namespaceImportFrom -> asNamespace -> 
> loadNamespace -> namespaceExport
> Execution halted
>
> A namespace must be able to be loaded with just the base namespace
> loaded: otherwise if the namespace gets loaded by a saved object, the
> session will be unable to start.
>
> Probably some imports need to be declared in the NAMESPACE file.
> * checking whether the namespace can be unloaded cleanly ... OK
> * checking dependencies in R code ... NOTE
> Error: package or namespace load failed for ?BondLab?
> Call sequence:
> 2: stop(gettextf("package or namespace load failed for %s", 
> sQuote(package)), call. = FALSE, domain = NA)
>
>
> Here is my namespace:
>
> # Generated by roxygen2: do not edit by hand
>
> export(AtomsData)
> export(BeginBal)
> export(Bond)
> export(BondAnalytics)
> export(BondBasisConversion)
> export(BondCashFlows)
> export(CDR.To.MDR)
> export(CIRBondPrice)
> export(CIRSim)
> export(CPR.To.SMM)
> export(CalibrateCIR)
> export(CashFlowTable)
> export(CollateralGroup)
> export(CusipRecord)
> export(DollarRoll)
> export(DollarRollAnalytics)
> export(Effective.Convexity)
> export(Effective.Duration)
> export(Effective.Measure)
> export(EndingBal)
> export(EstimYTM)
> export(Forward.Rate)
> export(ForwardPassThrough)
> export(HPISim)
> export(Interest)
> export(MBS)
> export(MakeBondDetails)
> export(MakeCollateral)
> export(MakeMBSDetails)
> export(MakeModelTune)
> export(MakeRAID)
> export(MakeRDME)
> export(MakeScenario)
> export(MakeSchedule)
> export(MakeTranche)
> export(ModelTune)
> export(Mortgage.Monthly.Payment)
> export(Mortgage.OAS)
> export(MortgageCashFlow)
> export(MortgageCashFlowArray)
> export(MortgageCashFlow_Array)
> export(MortgageRate)
> export(Mtg.Scenario)
> export(MtgRate)
> export(MtgTermStructure)
> export(PPC.Ramp)
> export(PassThroughOAS)
> export(PaymentDate)
> export(PrepaymentAssumption)
> export(RDMEData)
> export(RDMEFactor)
> export(REMICDeal)
> export(REMICGroupConn)
> export(REMICSchedules)
> export(REMICWaterFall)
> export(Rates)
> export(ReadRAID)
> export(Remain.Balance)
> export(RemicStructure)
> export(SMM.To.CPR)
> export(SMMVector.To.CPR)
> export(SaveCollGroup)
> export(SaveMBS)
> export(SaveModelTune)
> export(SaveRAID)
> export(SaveRDME)
> export(SaveREMIC)
> export(SaveScenario)
> export(SaveSchedules)
> export(SaveTranche)
> export(SaveTranches)
> export(ScenarioCall)
> export(Sched.Prin)
> export(SwapRateData)
> export(TermStructure)
> export(TimeValue)
> export(Tranches)
> export(ULTV)
> export(bondprice)
> exportClasses(AtomsAnalytics)
> exportClasses(AtomsData)
> exportClasses(AtomsScenario)
> exportClasses(BondCashFlows)
> exportClasses(BondDetails)
> exportClasses(BondTermStructure)
> exportClasses(MBSDetails)
> exportClasses(TermStructure)
> import(data.tree)
> import(methods)
> import(optimx)
> importFrom(lubridate,"%m+%")
> importFrom(lubridate,day)
> importFrom(lubridate,month)
> importFrom(lubridate,year)
> importFrom(lubridate,years)
> importFrom(termstrc,create_cashflows_matrix)
> importFrom(termstrc,create_maturities_matrix)
> importFrom(termstrc,estim_cs)
> importFrom(termstrc,estim_nss)
> importFrom(termstrc,forwardrates)
> importFrom(termstrc,spotrates)
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From d.luedecke at uke.de  Fri Feb 26 10:32:30 2016
From: d.luedecke at uke.de (=?utf-8?Q?Daniel_L=C3=BCdecke?=)
Date: Fri, 26 Feb 2016 10:32:30 +0100
Subject: [R-pkg-devel] Issue with nlme-package on Windows
Message-ID: <688B0979-C9D3-4699-BF97-2B29F333FA96@uke.de>

I have an issue with the nlme-package on Windows, where the package update is installed into my user folder (because the Program Files folder is write protected resp. access only for admins), while the nlme-package version that come along with the R installation is still in my Program Files directory. So I have two nlme-versions: 3.1-122 in my R-installation folder, and 3.1-124 in my Documents folder.

I recognized this because my package does not install when running R CMD check. The log states that ?nlme 3.1-122 is being loaded, but nlme 3.1-124 is required?. I then saw that both nlme-versions are installed.

Is this a Windows-, R- or nlme-issue? When installing R on Windows, I?m being asked to choose a library-folder because ?Program Files? is write protected?

Best
Daniel

--

_____________________________________________________________________

Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr. Dr. Uwe Koch-Gromus, Joachim Pr?l?, Rainer Schoppik
_____________________________________________________________________

SAVE PAPER - THINK BEFORE PRINTING

From murdoch.duncan at gmail.com  Fri Feb 26 16:10:00 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 26 Feb 2016 10:10:00 -0500
Subject: [R-pkg-devel] Issue with nlme-package on Windows
In-Reply-To: <688B0979-C9D3-4699-BF97-2B29F333FA96@uke.de>
References: <688B0979-C9D3-4699-BF97-2B29F333FA96@uke.de>
Message-ID: <56D06AC8.5020507@gmail.com>

On 26/02/2016 4:32 AM, Daniel L?decke wrote:
> I have an issue with the nlme-package on Windows, where the package update is installed into my user folder (because the Program Files folder is write protected resp. access only for admins), while the nlme-package version that come along with the R installation is still in my Program Files directory. So I have two nlme-versions: 3.1-122 in my R-installation folder, and 3.1-124 in my Documents folder.
>
> I recognized this because my package does not install when running R CMD check. The log states that ?nlme 3.1-122 is being loaded, but nlme 3.1-124 is required?. I then saw that both nlme-versions are installed.
>
> Is this a Windows-, R- or nlme-issue? When installing R on Windows, I?m being asked to choose a library-folder because ?Program Files? is write protected?

It's a user-issue.  You need to tell R to use your user folder as a 
library upon startup.  Since installing and checking of packages is done 
in a separate R process, you would do this by setting an environment 
variable.

Quoting Brian Ripley recently in R-devel:

> Set R_LIBS to change the library path for new sessions: see ?.libPath .

Duncan Murdoch


From thomas.petzoldt at tu-dresden.de  Mon Feb 29 10:33:03 2016
From: thomas.petzoldt at tu-dresden.de (Thomas Petzoldt)
Date: Mon, 29 Feb 2016 10:33:03 +0100
Subject: [R-pkg-devel] S4 generic with variable naming of arguments
Message-ID: <56D4104F.8050104@tu-dresden.de>

Dear colleagues,

after testing one of my packages with students, I'm trying to improve
the user interface, to make it even simpler and more robust. The package
uses S4 classes and I was very happy with this, but my aim is now to
allow non-named arguments with different ordering, depending on their
class and with and 'speaking argument names', not simply x and y.

It looks to me as this could be a FAQ and please excuse if I overlooked
something, but I still wonder. Let's assume a generic like this:

foo <- function(formula, data, grouping, ...)

It is of course easy in S4 write methods that allow either

'foo(y ~ x, df)' or 'foo(data = df, grouping = g)'

but I want to allow also 'foo(df, g)'

This works easily in S3 (see below), but [how] can this also be done
with S4 to avoid mixture of class systems in the package?

Thanks a lot!

Thomas


### Example ######################################################

foo <- function(formula, data, grouping = NULL, ...) UseMethod("foo")

foo.formula <- function(formula, data, ...) {
   cat("formula method\n")
}

foo.data.frame <- function(data, grouping, ...) {
   cat("data method\n")
}

foo.default <- function(data, ...)
   cat("method for class", class(data), "not yet implemented\n")


df <- data.frame(x=1:10, y=runif(10), groups=rep(c("a", "b"), 5))

foo(y~x, df)    # easy in S4

foo(df, grouping="groups") # easy in S3, but how in S4?

foo(1)

##################################################################


From bruce.hoff at sagebase.org  Mon Feb 29 22:01:06 2016
From: bruce.hoff at sagebase.org (Bruce Hoff)
Date: Mon, 29 Feb 2016 13:01:06 -0800
Subject: [R-pkg-devel] Linking an R package to the Python library
Message-ID: <CAAeMkWsncRAxX1X3rc-R+XVYcP9F_06f-ndkxycJr5an_8z1VQ@mail.gmail.com>

I am trying to create a self-contained R package wrapping Python that works
cross platform and have not been able to do this on Windows.  There is
already an R package which calls Python, requiring Python to be installed
on the target machine: https://github.com/cjgb/rPython-win.  When the R
package is built it successfully links to the resident Python dll.

I retrieved the Python source code plus associated Visual Studio projects
as described here: https://docs.python.org/devguide/setup.html  I ran the
Python 3.6 build and verified that rPython-win can link to the generated
dll, as expected.  In order to make a portable, self-contained R package, I
changed the build to create a _static_ Python library as described in the
file PCbuild\readme.txt.  This creates a 31MB file "python36.lib" but when
I try to build the rPython-win package under R i386 (and using the latest
RTools) I get:

gcc -m32 -shared -s -static-libgcc -o rPython.dll tmp.def pycall.o
-LC:/cpython/PCbuild/win32 -lpython3stub -lpython36
-Ld:/RCompile/r-compiling/local/local323/lib/i386
-Ld:/RCompile/r-compiling/local/local323/lib
-LC:/PROGRA~1/R/R-32~1.3/bin/i386 -lR
C:/cpython/PCbuild/win32/python36.lib: *error adding symbols: File format
not recognized*
collect2.exe: error: ld returned 1 exit status
no DLL was created
ERROR: compilation failed for package 'rPython'

I see some mention of the link error here:
https://sourceware.org/bugzilla/show_bug.cgi?id=17910
It looks like a related bug was in binutils 2.25 on 2/27/2015.  It seems
like the fix would have made it into Rtools 3.3 since:
1) this page suggests that the aforementioned was resolved before the
latest release of binutils, 2.25.1, 9/15/2015:
https://sourceforge.net/projects/mingw/files/MinGW/Base/binutils/
2) Installing Rtools 3.3, one can see that the binaries which are part of
binutils (like ld.exe) are dated 9/22/2015.

I don't know if MinGW is 'buggy', if I'm doing something wrong, and/or what
to do to fix the link error.

Is there anyone on this list with experience linking an R package to a
static library built on Windows using Visual Studio?

Any suggestions are appreciated!

	[[alternative HTML version deleted]]


From jranke at uni-bremen.de  Tue Mar  1 08:16:09 2016
From: jranke at uni-bremen.de (Johannes Ranke)
Date: Tue, 01 Mar 2016 08:16:09 +0100
Subject: [R-pkg-devel] Linking an R package to the Python library
In-Reply-To: <CAAeMkWsncRAxX1X3rc-R+XVYcP9F_06f-ndkxycJr5an_8z1VQ@mail.gmail.com>
References: <CAAeMkWsncRAxX1X3rc-R+XVYcP9F_06f-ndkxycJr5an_8z1VQ@mail.gmail.com>
Message-ID: <2049273.fyg8YAvWIl@tux>

Bruce,

maybe you want to also have a look at PythonInR, which solves a similar, if 
not the same, problem

https://bitbucket.org/Floooo/pythoninr/

Johannes

Am Montag, 29. Februar 2016, 13:01:06 schrieb Bruce Hoff:
> I am trying to create a self-contained R package wrapping Python that works
> cross platform and have not been able to do this on Windows.  There is
> already an R package which calls Python, requiring Python to be installed
> on the target machine: https://github.com/cjgb/rPython-win.  When the R
> package is built it successfully links to the resident Python dll.
> 
> I retrieved the Python source code plus associated Visual Studio projects
> as described here: https://docs.python.org/devguide/setup.html  I ran the
> Python 3.6 build and verified that rPython-win can link to the generated
> dll, as expected.  In order to make a portable, self-contained R package, I
> changed the build to create a _static_ Python library as described in the
> file PCbuild\readme.txt.  This creates a 31MB file "python36.lib" but when
> I try to build the rPython-win package under R i386 (and using the latest
> RTools) I get:
> 
> gcc -m32 -shared -s -static-libgcc -o rPython.dll tmp.def pycall.o
> -LC:/cpython/PCbuild/win32 -lpython3stub -lpython36
> -Ld:/RCompile/r-compiling/local/local323/lib/i386
> -Ld:/RCompile/r-compiling/local/local323/lib
> -LC:/PROGRA~1/R/R-32~1.3/bin/i386 -lR
> C:/cpython/PCbuild/win32/python36.lib: *error adding symbols: File format
> not recognized*
> collect2.exe: error: ld returned 1 exit status
> no DLL was created
> ERROR: compilation failed for package 'rPython'
> 
> I see some mention of the link error here:
> https://sourceware.org/bugzilla/show_bug.cgi?id=17910
> It looks like a related bug was in binutils 2.25 on 2/27/2015.  It seems
> like the fix would have made it into Rtools 3.3 since:
> 1) this page suggests that the aforementioned was resolved before the
> latest release of binutils, 2.25.1, 9/15/2015:
> https://sourceforge.net/projects/mingw/files/MinGW/Base/binutils/
> 2) Installing Rtools 3.3, one can see that the binaries which are part of
> binutils (like ld.exe) are dated 9/22/2015.
> 
> I don't know if MinGW is 'buggy', if I'm doing something wrong, and/or what
> to do to fix the link error.
> 
> Is there anyone on this list with experience linking an R package to a
> static library built on Windows using Visual Studio?
> 
> Any suggestions are appreciated!
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
-- 
PD Dr. Johannes Ranke
Kronacher Str. 8
79639 Grenzach-Wyhlen


From bruce.hoff at sagebase.org  Tue Mar  1 17:40:36 2016
From: bruce.hoff at sagebase.org (Bruce Hoff)
Date: Tue, 1 Mar 2016 08:40:36 -0800
Subject: [R-pkg-devel] Linking an R package to the Python library
In-Reply-To: <2049273.fyg8YAvWIl@tux>
References: <CAAeMkWsncRAxX1X3rc-R+XVYcP9F_06f-ndkxycJr5an_8z1VQ@mail.gmail.com>
	<2049273.fyg8YAvWIl@tux>
Message-ID: <CAAeMkWtN4FVrhbW+6wMyfKvWqtttCyFEBqbbbg67FPXUTvv-KA@mail.gmail.com>

Dear Johannes:
Thank you for sending the link to "pythoninr".  Looking at the page, under
"Windows" there is the statement  "One obviously needs to have R and Python
installed."  Our goal is to create a package which does not require that
the user install Python prior to installing the R package.  The use of
Python should be seamless/invisible to the user.  So pythoninr may be an
interesting alternative to rPython/rPython-win but (based on my read of the
documentation) it doesn't get me closer to the solution of embedding Python
within the R package.
Again, thanks for the reference, which I had not seen previously.
Best,
Bruce Hoff
Sage Bionetworks

On Mon, Feb 29, 2016 at 11:16 PM, Johannes Ranke <jranke at uni-bremen.de>
wrote:

> Bruce,
>
> maybe you want to also have a look at PythonInR, which solves a similar, if
> not the same, problem
>
> https://bitbucket.org/Floooo/pythoninr/
>
> Johannes
>
> Am Montag, 29. Februar 2016, 13:01:06 schrieb Bruce Hoff:
> > I am trying to create a self-contained R package wrapping Python that
> works
> > cross platform and have not been able to do this on Windows.  There is
> > already an R package which calls Python, requiring Python to be installed
> > on the target machine: https://github.com/cjgb/rPython-win.  When the R
> > package is built it successfully links to the resident Python dll.
> >
> > I retrieved the Python source code plus associated Visual Studio projects
> > as described here: https://docs.python.org/devguide/setup.html  I ran
> the
> > Python 3.6 build and verified that rPython-win can link to the generated
> > dll, as expected.  In order to make a portable, self-contained R
> package, I
> > changed the build to create a _static_ Python library as described in the
> > file PCbuild\readme.txt.  This creates a 31MB file "python36.lib" but
> when
> > I try to build the rPython-win package under R i386 (and using the latest
> > RTools) I get:
> >
> > gcc -m32 -shared -s -static-libgcc -o rPython.dll tmp.def pycall.o
> > -LC:/cpython/PCbuild/win32 -lpython3stub -lpython36
> > -Ld:/RCompile/r-compiling/local/local323/lib/i386
> > -Ld:/RCompile/r-compiling/local/local323/lib
> > -LC:/PROGRA~1/R/R-32~1.3/bin/i386 -lR
> > C:/cpython/PCbuild/win32/python36.lib: *error adding symbols: File format
> > not recognized*
> > collect2.exe: error: ld returned 1 exit status
> > no DLL was created
> > ERROR: compilation failed for package 'rPython'
> >
> > I see some mention of the link error here:
> > https://sourceware.org/bugzilla/show_bug.cgi?id=17910
> > It looks like a related bug was in binutils 2.25 on 2/27/2015.  It seems
> > like the fix would have made it into Rtools 3.3 since:
> > 1) this page suggests that the aforementioned was resolved before the
> > latest release of binutils, 2.25.1, 9/15/2015:
> > https://sourceforge.net/projects/mingw/files/MinGW/Base/binutils/
> > 2) Installing Rtools 3.3, one can see that the binaries which are part of
> > binutils (like ld.exe) are dated 9/22/2015.
> >
> > I don't know if MinGW is 'buggy', if I'm doing something wrong, and/or
> what
> > to do to fix the link error.
> >
> > Is there anyone on this list with experience linking an R package to a
> > static library built on Windows using Visual Studio?
> >
> > Any suggestions are appreciated!
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> --
> PD Dr. Johannes Ranke
> Kronacher Str. 8
> 79639 Grenzach-Wyhlen
>

	[[alternative HTML version deleted]]


From lists at dewey.myzen.co.uk  Tue Mar  1 17:47:52 2016
From: lists at dewey.myzen.co.uk (Michael Dewey)
Date: Tue, 1 Mar 2016 16:47:52 +0000
Subject: [R-pkg-devel] Is it possible to protect a word from the spell
	checker?
Message-ID: <56D5C7B8.5080909@dewey.myzen.co.uk>

The spell checker is correct they are not correctly spelled English 
words but names. I searched the Writing R Extensions manual but did not 
find any solution. I know it is only a NOTE not more serious.

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From murdoch.duncan at gmail.com  Tue Mar  1 18:29:00 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 1 Mar 2016 12:29:00 -0500
Subject: [R-pkg-devel] Is it possible to protect a word from the spell
 checker?
In-Reply-To: <56D5C7B8.5080909@dewey.myzen.co.uk>
References: <56D5C7B8.5080909@dewey.myzen.co.uk>
Message-ID: <56D5D15C.9070807@gmail.com>

On 01/03/2016 11:47 AM, Michael Dewey wrote:
> The spell checker is correct they are not correctly spelled English
> words but names. I searched the Writing R Extensions manual but did not
> find any solution. I know it is only a NOTE not more serious.
>
I think so.  See the discussion of the .aspell directory in ?"aspell-utils".

Duncan Murdoch


From hanas at uw.edu  Tue Mar  1 20:45:34 2016
From: hanas at uw.edu (Hana Sevcikova)
Date: Tue, 1 Mar 2016 11:45:34 -0800
Subject: [R-pkg-devel] Is it possible to protect a word from the spell
 checker?
In-Reply-To: <56D5C7B8.5080909@dewey.myzen.co.uk>
References: <56D5C7B8.5080909@dewey.myzen.co.uk>
Message-ID: <56D5F15E.2030609@uw.edu>

If it's in the DESCRIPTION file put the word into quotes.
Hana

On 01/03/2016 08:47, Michael Dewey wrote:
> The spell checker is correct they are not correctly spelled English
> words but names. I searched the Writing R Extensions manual but did not
> find any solution. I know it is only a NOTE not more serious.
>


From maechler at stat.math.ethz.ch  Wed Mar  2 09:53:41 2016
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed, 2 Mar 2016 09:53:41 +0100
Subject: [R-pkg-devel] Is it possible to protect a word from the spell
 checker?
In-Reply-To: <56D5F15E.2030609@uw.edu>
References: <56D5C7B8.5080909@dewey.myzen.co.uk>
	<56D5F15E.2030609@uw.edu>
Message-ID: <22230.43541.192789.891424@stat.math.ethz.ch>

>>>>> Hana Sevcikova <hanas at uw.edu>
>>>>>     on Tue, 1 Mar 2016 11:45:34 -0800 writes:

    > If it's in the DESCRIPTION file put the word into quotes.
    > Hana

Indeed, thank you Hana!

To add - embarrassingly I've only learned this about a week ago -
they need to be *single* quotes (as used 'here', they are also
called 'apostroph') and *not* double quotes.

Martin

    > On 01/03/2016 08:47, Michael Dewey wrote:
    >> The spell checker is correct they are not correctly spelled English
    >> words but names. I searched the Writing R Extensions manual but did not
    >> find any solution. I know it is only a NOTE not more serious.


From ligges at statistik.tu-dortmund.de  Wed Mar  2 12:40:14 2016
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 2 Mar 2016 12:40:14 +0100
Subject: [R-pkg-devel] Is it possible to protect a word from the spell
 checker?
In-Reply-To: <22230.43541.192789.891424@stat.math.ethz.ch>
References: <56D5C7B8.5080909@dewey.myzen.co.uk> <56D5F15E.2030609@uw.edu>
	<22230.43541.192789.891424@stat.math.ethz.ch>
Message-ID: <56D6D11E.9090707@statistik.tu-dortmund.de>

Indeed, from Writing R Extensions:

"double quotes should be used for quotations (including titles of books 
and articles), and single quotes for non-English usage, including names 
of other packages and external software."

Best,
Uwe




On 02.03.2016 09:53, Martin Maechler wrote:
>>>>>> Hana Sevcikova <hanas at uw.edu>
>>>>>>      on Tue, 1 Mar 2016 11:45:34 -0800 writes:
>
>      > If it's in the DESCRIPTION file put the word into quotes.
>      > Hana
>
> Indeed, thank you Hana!
>
> To add - embarrassingly I've only learned this about a week ago -
> they need to be *single* quotes (as used 'here', they are also
> called 'apostroph') and *not* double quotes.
>
> Martin
>
>      > On 01/03/2016 08:47, Michael Dewey wrote:
>      >> The spell checker is correct they are not correctly spelled English
>      >> words but names. I searched the Writing R Extensions manual but did not
>      >> find any solution. I know it is only a NOTE not more serious.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From sebastien.moretti at unil.ch  Thu Mar  3 15:26:59 2016
From: sebastien.moretti at unil.ch (Sebastien Moretti)
Date: Thu, 3 Mar 2016 15:26:59 +0100
Subject: [R-pkg-devel] Namespace problem with pre-R 3.0.0 package
Message-ID: <56D849B3.8040909@unil.ch>

Hi

I have issues with an R package developed in 2004.
It works perfectly in R < 3.
It can be installed in R > 3 but functions are not available.

Documentation I found is not really helpful for me who are not an R master.
I have already fixed some problems with R CMD check but remaining ones 
are less trivial.


For what I understand - with R < 3 - everything is loaded with this 
command in an R file in the R/ directory:
.First.lib <- function(lib, pkg) library.dynam("jacop", pkg, lib); 
require("cluster")

Now I replaced that with
.onLoad <- function(lib, pkg) {library.dynam("jacop", pkg, lib); 
require("cluster")}
but functions are not found when called.

NAMESPACE exists but is empty.


Any idea how to solve that?


Regards

--
S?bastien Moretti


From sebastien.moretti at unil.ch  Thu Mar  3 15:45:37 2016
From: sebastien.moretti at unil.ch (Sebastien Moretti)
Date: Thu, 3 Mar 2016 15:45:37 +0100
Subject: [R-pkg-devel] Namespace problem with pre-R 3.0.0 package
In-Reply-To: <56D849B3.8040909@unil.ch>
References: <56D849B3.8040909@unil.ch>
Message-ID: <56D84E11.5090406@unil.ch>

I have just found that R 2 filled by itself the NAMESPACE file with
# Export all names
exportPattern(".")

# Import all packages listed as Imports or Depends
import(
   cluster
)


So I filled the NAMESPACE file with that and gave it to R 3
Now functions are found!


Is it enough to do that?
Is it good practice to do that?
is .onLoad ... still required?

Regards

> Hi
>
> I have issues with an R package developed in 2004.
> It works perfectly in R < 3.
> It can be installed in R > 3 but functions are not available.
>
> Documentation I found is not really helpful for me who are not an R master.
> I have already fixed some problems with R CMD check but remaining ones
> are less trivial.
>
>
> For what I understand - with R < 3 - everything is loaded with this
> command in an R file in the R/ directory:
> .First.lib <- function(lib, pkg) library.dynam("jacop", pkg, lib);
> require("cluster")
>
> Now I replaced that with
> .onLoad <- function(lib, pkg) {library.dynam("jacop", pkg, lib);
> require("cluster")}
> but functions are not found when called.
>
> NAMESPACE exists but is empty.
>
>
> Any idea how to solve that?
>
>
> Regards
>
> --
> S?bastien Moretti


From plummerm at iarc.fr  Thu Mar  3 16:08:10 2016
From: plummerm at iarc.fr (Martyn Plummer)
Date: Thu, 3 Mar 2016 15:08:10 +0000
Subject: [R-pkg-devel] Namespace problem with pre-R 3.0.0 package
In-Reply-To: <56D84E11.5090406@unil.ch>
References: <56D849B3.8040909@unil.ch> <56D84E11.5090406@unil.ch>
Message-ID: <1457017690.3141.18.camel@iarc.fr>

On Thu, 2016-03-03 at 15:45 +0100, Sebastien Moretti wrote:
> I have just found that R 2 filled by itself the NAMESPACE file with
> # Export all names
> exportPattern(".")
> 
> # Import all packages listed as Imports or Depends
> import(
> ???cluster
> )
> 
> 
> So I filled the NAMESPACE file with that and gave it to R 3
> Now functions are found!
> 
> 
> Is it enough to do that?

Yes. Even in the latest version of R, "R CMD build" will create a
default NAMESPACE file like that for you if one does not exist.
?
> Is it good practice to do that?

No. The Writing R Extensions manual says "such broad patterns are not
recommended for production code: it is better to list all exports or
use narrowly-defined groups"

> is .onLoad ... still required?

Yes, if your package has compiled code (e.g. C, C++, Fortran) then the
.onLoad function is required to load it into R.

Martyn
?
> Regards
> 
> > Hi
> > 
> > I have issues with an R package developed in 2004.
> > It works perfectly in R < 3.
> > It can be installed in R > 3 but functions are not available.
> > 
> > Documentation I found is not really helpful for me who are not an R
> > master.
> > I have already fixed some problems with R CMD check but remaining
> > ones
> > are less trivial.
> > 
> > 
> > For what I understand - with R < 3 - everything is loaded with this
> > command in an R file in the R/ directory:
> > .First.lib <- function(lib, pkg) library.dynam("jacop", pkg, lib);
> > require("cluster")
> > 
> > Now I replaced that with
> > .onLoad <- function(lib, pkg) {library.dynam("jacop", pkg, lib);
> > require("cluster")}
> > but functions are not found when called.
> > 
> > NAMESPACE exists but is empty.
> > 
> > 
> > Any idea how to solve that?
> > 
> > 
> > Regards
> > 
> > --
> > S?bastien Moretti
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel-----------------------------------------------------------------------
This message and its attachments are strictly confidenti...{{dropped:8}}


From luke-tierney at uiowa.edu  Thu Mar  3 16:42:17 2016
From: luke-tierney at uiowa.edu (luke-tierney at uiowa.edu)
Date: Thu, 3 Mar 2016 09:42:17 -0600
Subject: [R-pkg-devel] Namespace problem with pre-R 3.0.0 package
In-Reply-To: <1457017690.3141.18.camel@iarc.fr>
References: <56D849B3.8040909@unil.ch> <56D84E11.5090406@unil.ch>
	<1457017690.3141.18.camel@iarc.fr>
Message-ID: <alpine.DEB.2.10.1603030940140.2759@luke-Latitude>

On Thu, 3 Mar 2016, Martyn Plummer wrote:

> On Thu, 2016-03-03 at 15:45 +0100, Sebastien Moretti wrote:
>> I have just found that R 2 filled by itself the NAMESPACE file with
>> # Export all names
>> exportPattern(".")
>>
>> # Import all packages listed as Imports or Depends
>> import(
>> ???cluster
>> )
>>
>>
>> So I filled the NAMESPACE file with that and gave it to R 3
>> Now functions are found!
>>
>>
>> Is it enough to do that?
>
> Yes. Even in the latest version of R, "R CMD build" will create a
> default NAMESPACE file like that for you if one does not exist.
> ?
>> Is it good practice to do that?
>
> No. The Writing R Extensions manual says "such broad patterns are not
> recommended for production code: it is better to list all exports or
> use narrowly-defined groups"
>
>> is .onLoad ... still required?
>
> Yes, if your package has compiled code (e.g. C, C++, Fortran) then the
> .onLoad function is required to load it into R.

Actually you do not need .onLoad if you use the useDynLib directive in the 
NAMESPACE file; details are in teh extensions manual at

https://cran.r-project.org/doc/manuals/r-release/R-exts.html#useDynLib

Best,

luke


>
> Martyn
> ?
>> Regards
>>
>>> Hi
>>>
>>> I have issues with an R package developed in 2004.
>>> It works perfectly in R < 3.
>>> It can be installed in R > 3 but functions are not available.
>>>
>>> Documentation I found is not really helpful for me who are not an R
>>> master.
>>> I have already fixed some problems with R CMD check but remaining
>>> ones
>>> are less trivial.
>>>
>>>
>>> For what I understand - with R < 3 - everything is loaded with this
>>> command in an R file in the R/ directory:
>>> .First.lib <- function(lib, pkg) library.dynam("jacop", pkg, lib);
>>> require("cluster")
>>>
>>> Now I replaced that with
>>> .onLoad <- function(lib, pkg) {library.dynam("jacop", pkg, lib);
>>> require("cluster")}
>>> but functions are not found when called.
>>>
>>> NAMESPACE exists but is empty.
>>>
>>>
>>> Any idea how to solve that?
>>>
>>>
>>> Regards
>>>
>>> --
>>> S?bastien Moretti
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel-----------------------------------------------------------------------
> This message and its attachments are strictly confidenti...{{dropped:8}}
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From ligges at statistik.tu-dortmund.de  Thu Mar  3 16:42:32 2016
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Thu, 3 Mar 2016 16:42:32 +0100
Subject: [R-pkg-devel] Namespace problem with pre-R 3.0.0 package
In-Reply-To: <1457017690.3141.18.camel@iarc.fr>
References: <56D849B3.8040909@unil.ch> <56D84E11.5090406@unil.ch>
	<1457017690.3141.18.camel@iarc.fr>
Message-ID: <56D85B68.6020504@statistik.tu-dortmund.de>



On 03.03.2016 16:08, Martyn Plummer wrote:
> On Thu, 2016-03-03 at 15:45 +0100, Sebastien Moretti wrote:
>> I have just found that R 2 filled by itself the NAMESPACE file with
>> # Export all names
>> exportPattern(".")
>>
>> # Import all packages listed as Imports or Depends
>> import(
>>     cluster
>> )
>>
>>
>> So I filled the NAMESPACE file with that and gave it to R 3
>> Now functions are found!
>>
>>
>> Is it enough to do that?
>
> Yes. Even in the latest version of R, "R CMD build" will create a
> default NAMESPACE file like that for you if one does not exist.
>
>> Is it good practice to do that?
>
> No. The Writing R Extensions manual says "such broad patterns are not
> recommended for production code: it is better to list all exports or
> use narrowly-defined groups"
>
>> is .onLoad ... still required?
>
> Yes, if your package has compiled code (e.g. C, C++, Fortran) then the
> .onLoad function is required to load it into R.

Well, I do not use .onLoad but just the

useDynLib(packagename)

directive in the NAESPACE file.



Best,
Uwe Ligges





>
> Martyn
>
>> Regards
>>
>>> Hi
>>>
>>> I have issues with an R package developed in 2004.
>>> It works perfectly in R < 3.
>>> It can be installed in R > 3 but functions are not available.
>>>
>>> Documentation I found is not really helpful for me who are not an R
>>> master.
>>> I have already fixed some problems with R CMD check but remaining
>>> ones
>>> are less trivial.
>>>
>>>
>>> For what I understand - with R < 3 - everything is loaded with this
>>> command in an R file in the R/ directory:
>>> .First.lib <- function(lib, pkg) library.dynam("jacop", pkg, lib);
>>> require("cluster")
>>>
>>> Now I replaced that with
>>> .onLoad <- function(lib, pkg) {library.dynam("jacop", pkg, lib);
>>> require("cluster")}
>>> but functions are not found when called.
>>>
>>> NAMESPACE exists but is empty.
>>>
>>>
>>> Any idea how to solve that?
>>>
>>>
>>> Regards
>>>
>>> --
>>> S?bastien Moretti
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel-----------------------------------------------------------------------
> This message and its attachments are strictly confidenti...{{dropped:8}}
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From plummerm at iarc.fr  Thu Mar  3 16:58:28 2016
From: plummerm at iarc.fr (Martyn Plummer)
Date: Thu, 3 Mar 2016 15:58:28 +0000
Subject: [R-pkg-devel] Namespace problem with pre-R 3.0.0 package
In-Reply-To: <56D85B68.6020504@statistik.tu-dortmund.de>
References: <56D849B3.8040909@unil.ch> <56D84E11.5090406@unil.ch>
	<1457017690.3141.18.camel@iarc.fr>
	<56D85B68.6020504@statistik.tu-dortmund.de>
Message-ID: <1457020708.3141.20.camel@iarc.fr>

On Thu, 2016-03-03 at 16:42 +0100, Uwe Ligges wrote:
> 
> On 03.03.2016 16:08, Martyn Plummer wrote:
> > On Thu, 2016-03-03 at 15:45 +0100, Sebastien Moretti wrote:
> > > I have just found that R 2 filled by itself the NAMESPACE file
> > > with
> > > # Export all names
> > > exportPattern(".")
> > > 
> > > # Import all packages listed as Imports or Depends
> > > import(
> > > ????cluster
> > > )
> > > 
> > > 
> > > So I filled the NAMESPACE file with that and gave it to R 3
> > > Now functions are found!
> > > 
> > > 
> > > Is it enough to do that?
> > 
> > Yes. Even in the latest version of R, "R CMD build" will create a
> > default NAMESPACE file like that for you if one does not exist.
> > 
> > > Is it good practice to do that?
> > 
> > No. The Writing R Extensions manual says "such broad patterns are
> > not
> > recommended for production code: it is better to list all exports
> > or
> > use narrowly-defined groups"
> > 
> > > is .onLoad ... still required?
> > 
> > Yes, if your package has compiled code (e.g. C, C++, Fortran) then
> > the
> > .onLoad function is required to load it into R.
> 
> Well, I do not use .onLoad but just the
> 
> useDynLib(packagename)
> 
> directive in the NAESPACE file.

I stand corrected. Twice.

Martyn

> Best,
> Uwe Ligges
> 
> 
> 
> 
> 
> > 
> > Martyn
> > 
> > > Regards
> > > 
> > > > Hi
> > > > 
> > > > I have issues with an R package developed in 2004.
> > > > It works perfectly in R < 3.
> > > > It can be installed in R > 3 but functions are not available.
> > > > 
> > > > Documentation I found is not really helpful for me who are not
> > > > an R
> > > > master.
> > > > I have already fixed some problems with R CMD check but
> > > > remaining
> > > > ones
> > > > are less trivial.
> > > > 
> > > > 
> > > > For what I understand - with R < 3 - everything is loaded with
> > > > this
> > > > command in an R file in the R/ directory:
> > > > .First.lib <- function(lib, pkg) library.dynam("jacop", pkg,
> > > > lib);
> > > > require("cluster")
> > > > 
> > > > Now I replaced that with
> > > > .onLoad <- function(lib, pkg) {library.dynam("jacop", pkg,
> > > > lib);
> > > > require("cluster")}
> > > > but functions are not found when called.
> > > > 
> > > > NAMESPACE exists but is empty.
> > > > 
> > > > 
> > > > Any idea how to solve that?
> > > > 
> > > > 
> > > > Regards
> > > > 
> > > > --
> > > > S?bastien Moretti
> > > 
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel------------
> > > -----------------------------------------------------------
> > This message and its attachments are strictly
> > confidenti...{{dropped:8}}
> > 
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > -----------------------------------------------------------------------
This message and its attachments are strictly confidenti...{{dropped:8}}


From sebastien.moretti at unil.ch  Fri Mar  4 08:48:47 2016
From: sebastien.moretti at unil.ch (Sebastien Moretti)
Date: Fri, 4 Mar 2016 08:48:47 +0100
Subject: [R-pkg-devel] Namespace problem with pre-R 3.0.0 package
In-Reply-To: <1457017690.3141.18.camel@iarc.fr>
References: <56D849B3.8040909@unil.ch> <56D84E11.5090406@unil.ch>
	<1457017690.3141.18.camel@iarc.fr>
Message-ID: <56D93DDF.60103@unil.ch>

>> I have just found that R 2 filled by itself the NAMESPACE file with
>> # Export all names
>> exportPattern(".")
>>
>> # Import all packages listed as Imports or Depends
>> import(
>>     cluster
>> )
>>
>>
>> So I filled the NAMESPACE file with that and gave it to R 3
>> Now functions are found!
>>
>>
>> Is it enough to do that?
>
> Yes. Even in the latest version of R, "R CMD build" will create a
> default NAMESPACE file like that for you if one does not exist.

The package contained an empty NAMESPACE file.
That's maybe why it failed.

>> Is it good practice to do that?
>
> No. The Writing R Extensions manual says "such broad patterns are not
> recommended for production code: it is better to list all exports or
> use narrowly-defined groups"

Will export only required functions once identified.


Functions are available now!
Thanks

Will compare results with R 2 and 3 to see if I did not break something.

>> is .onLoad ... still required?
>
> Yes, if your package has compiled code (e.g. C, C++, Fortran) then the
> .onLoad function is required to load it into R.
>
> Martyn
>
>> Regards
>>
>>> Hi
>>>
>>> I have issues with an R package developed in 2004.
>>> It works perfectly in R < 3.
>>> It can be installed in R > 3 but functions are not available.
>>>
>>> Documentation I found is not really helpful for me who are not an R
>>> master.
>>> I have already fixed some problems with R CMD check but remaining
>>> ones
>>> are less trivial.
>>>
>>>
>>> For what I understand - with R < 3 - everything is loaded with this
>>> command in an R file in the R/ directory:
>>> .First.lib <- function(lib, pkg) library.dynam("jacop", pkg, lib);
>>> require("cluster")
>>>
>>> Now I replaced that with
>>> .onLoad <- function(lib, pkg) {library.dynam("jacop", pkg, lib);
>>> require("cluster")}
>>> but functions are not found when called.
>>>
>>> NAMESPACE exists but is empty.
>>>
>>>
>>> Any idea how to solve that?
>>>
>>>
>>> Regards

--
S?bastien Moretti


From sebastien.moretti at unil.ch  Fri Mar  4 08:51:37 2016
From: sebastien.moretti at unil.ch (Sebastien Moretti)
Date: Fri, 4 Mar 2016 08:51:37 +0100
Subject: [R-pkg-devel] Namespace problem with pre-R 3.0.0 package
In-Reply-To: <56D85B68.6020504@statistik.tu-dortmund.de>
References: <56D849B3.8040909@unil.ch> <56D84E11.5090406@unil.ch>
	<1457017690.3141.18.camel@iarc.fr>
	<56D85B68.6020504@statistik.tu-dortmund.de>
Message-ID: <56D93E89.1010901@unil.ch>

>>> I have just found that R 2 filled by itself the NAMESPACE file with
>>> # Export all names
>>> exportPattern(".")
>>>
>>> # Import all packages listed as Imports or Depends
>>> import(
>>>     cluster
>>> )
>>>
>>>
>>> So I filled the NAMESPACE file with that and gave it to R 3
>>> Now functions are found!
>>>
>>>
>>> Is it enough to do that?
>>
>> Yes. Even in the latest version of R, "R CMD build" will create a
>> default NAMESPACE file like that for you if one does not exist.
>>
>>> Is it good practice to do that?
>>
>> No. The Writing R Extensions manual says "such broad patterns are not
>> recommended for production code: it is better to list all exports or
>> use narrowly-defined groups"
>>
>>> is .onLoad ... still required?
>>
>> Yes, if your package has compiled code (e.g. C, C++, Fortran) then the
>> .onLoad function is required to load it into R.
>
> Well, I do not use .onLoad but just the
>
> useDynLib(packagename)
>
> directive in the NAESPACE file.

Much simpler like that and I can remove the zzz.R file with .onLoad ...

Thanks again


Is useDynLib enough for package with compiled code?

> Best,
> Uwe Ligges
>
>
>
>
>
>>
>> Martyn
>>
>>> Regards
>>>
>>>> Hi
>>>>
>>>> I have issues with an R package developed in 2004.
>>>> It works perfectly in R < 3.
>>>> It can be installed in R > 3 but functions are not available.
>>>>
>>>> Documentation I found is not really helpful for me who are not an R
>>>> master.
>>>> I have already fixed some problems with R CMD check but remaining
>>>> ones
>>>> are less trivial.
>>>>
>>>>
>>>> For what I understand - with R < 3 - everything is loaded with this
>>>> command in an R file in the R/ directory:
>>>> .First.lib <- function(lib, pkg) library.dynam("jacop", pkg, lib);
>>>> require("cluster")
>>>>
>>>> Now I replaced that with
>>>> .onLoad <- function(lib, pkg) {library.dynam("jacop", pkg, lib);
>>>> require("cluster")}
>>>> but functions are not found when called.
>>>>
>>>> NAMESPACE exists but is empty.
>>>>
>>>>
>>>> Any idea how to solve that?
>>>>
>>>>
>>>> Regards

--
S?bastien Moretti


From edd at debian.org  Fri Mar  4 17:55:25 2016
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri, 4 Mar 2016 10:55:25 -0600
Subject: [R-pkg-devel] Namespace problem with pre-R 3.0.0 package
In-Reply-To: <56D93E89.1010901@unil.ch>
References: <56D849B3.8040909@unil.ch> <56D84E11.5090406@unil.ch>
	<1457017690.3141.18.camel@iarc.fr>
	<56D85B68.6020504@statistik.tu-dortmund.de>
	<56D93E89.1010901@unil.ch>
Message-ID: <22233.48637.272900.256603@max.nulle.part>


On 4 March 2016 at 08:51, Sebastien Moretti wrote:
| Is useDynLib enough for package with compiled code?

For the loading of the shared library, yes.

Your other importing and exporting of R functions is orthogonal to this.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From sebastien.moretti at unil.ch  Fri Mar  4 19:19:37 2016
From: sebastien.moretti at unil.ch (=?UTF-8?Q?S=c3=a9bastien_Moretti?=)
Date: Fri, 4 Mar 2016 19:19:37 +0100
Subject: [R-pkg-devel] Namespace problem with pre-R 3.0.0 package
In-Reply-To: <22233.48637.272900.256603@max.nulle.part>
References: <56D849B3.8040909@unil.ch> <56D84E11.5090406@unil.ch>
	<1457017690.3141.18.camel@iarc.fr>
	<56D85B68.6020504@statistik.tu-dortmund.de> <56D93E89.1010901@unil.ch>
	<22233.48637.272900.256603@max.nulle.part>
Message-ID: <56D9D1B9.6050602@unil.ch>

Great!

Thanks for your explanation

Le 04/03/2016 17:55, Dirk Eddelbuettel a ?crit :
>
> On 4 March 2016 at 08:51, Sebastien Moretti wrote:
> | Is useDynLib enough for package with compiled code?
>
> For the loading of the shared library, yes.
>
> Your other importing and exporting of R functions is orthogonal to this.
>
> Dirk

--
S?bastien Moretti


From lists at dewey.myzen.co.uk  Sun Mar  6 17:08:49 2016
From: lists at dewey.myzen.co.uk (Michael Dewey)
Date: Sun, 6 Mar 2016 16:08:49 +0000
Subject: [R-pkg-devel] Is it possible to protect a word from the spell
 checker?
In-Reply-To: <56D6D11E.9090707@statistik.tu-dortmund.de>
References: <56D5C7B8.5080909@dewey.myzen.co.uk> <56D5F15E.2030609@uw.edu>
	<22230.43541.192789.891424@stat.math.ethz.ch>
	<56D6D11E.9090707@statistik.tu-dortmund.de>
Message-ID: <56DC5611.7060402@dewey.myzen.co.uk>

Thanks to all. I find it quite reassuring that even someone so steeped 
in R is still finding new things to learn, it gives me hope.

On 02/03/2016 11:40, Uwe Ligges wrote:
> Indeed, from Writing R Extensions:
>
> "double quotes should be used for quotations (including titles of books
> and articles), and single quotes for non-English usage, including names
> of other packages and external software."
>
> Best,
> Uwe
>
>
>
>
> On 02.03.2016 09:53, Martin Maechler wrote:
>>>>>>> Hana Sevcikova <hanas at uw.edu>
>>>>>>>      on Tue, 1 Mar 2016 11:45:34 -0800 writes:
>>
>>      > If it's in the DESCRIPTION file put the word into quotes.
>>      > Hana
>>
>> Indeed, thank you Hana!
>>
>> To add - embarrassingly I've only learned this about a week ago -
>> they need to be *single* quotes (as used 'here', they are also
>> called 'apostroph') and *not* double quotes.
>>
>> Martin
>>
>>      > On 01/03/2016 08:47, Michael Dewey wrote:
>>      >> The spell checker is correct they are not correctly spelled
>> English
>>      >> words but names. I searched the Writing R Extensions manual
>> but did not
>>      >> find any solution. I know it is only a NOTE not more serious.
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From bob at rudis.net  Mon Mar  7 03:14:13 2016
From: bob at rudis.net (boB Rudis)
Date: Sun, 6 Mar 2016 21:14:13 -0500
Subject: [R-pkg-devel] Is it possible to protect a word from the spell
	checker?
In-Reply-To: <56DC5611.7060402@dewey.myzen.co.uk>
References: <56D5C7B8.5080909@dewey.myzen.co.uk> <56D5F15E.2030609@uw.edu>
	<22230.43541.192789.891424@stat.math.ethz.ch>
	<56D6D11E.9090707@statistik.tu-dortmund.de>
	<56DC5611.7060402@dewey.myzen.co.uk>
Message-ID: <CAJ4QxaPCNhY+nB6XZeoVmqoFwaGkbuAcdyOV48FZOY_VNy2aeg@mail.gmail.com>

Is there a minimum length req for the single quote spell checker
firewall? I've been putting 'API' in proper single quotes and it
always gets flagged.

On Sun, Mar 6, 2016 at 11:08 AM, Michael Dewey <lists at dewey.myzen.co.uk> wrote:
> Thanks to all. I find it quite reassuring that even someone so steeped in R
> is still finding new things to learn, it gives me hope.
>
>
> On 02/03/2016 11:40, Uwe Ligges wrote:
>>
>> Indeed, from Writing R Extensions:
>>
>> "double quotes should be used for quotations (including titles of books
>> and articles), and single quotes for non-English usage, including names
>> of other packages and external software."
>>
>> Best,
>> Uwe
>>
>>
>>
>>
>> On 02.03.2016 09:53, Martin Maechler wrote:
>>>>>>>>
>>>>>>>> Hana Sevcikova <hanas at uw.edu>
>>>>>>>>      on Tue, 1 Mar 2016 11:45:34 -0800 writes:
>>>
>>>
>>>      > If it's in the DESCRIPTION file put the word into quotes.
>>>      > Hana
>>>
>>> Indeed, thank you Hana!
>>>
>>> To add - embarrassingly I've only learned this about a week ago -
>>> they need to be *single* quotes (as used 'here', they are also
>>> called 'apostroph') and *not* double quotes.
>>>
>>> Martin
>>>
>>>      > On 01/03/2016 08:47, Michael Dewey wrote:
>>>      >> The spell checker is correct they are not correctly spelled
>>> English
>>>      >> words but names. I searched the Writing R Extensions manual
>>> but did not
>>>      >> find any solution. I know it is only a NOTE not more serious.
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
> --
> Michael
> http://www.dewey.myzen.co.uk/home.html
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ligges at statistik.tu-dortmund.de  Mon Mar  7 07:31:48 2016
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Mon, 7 Mar 2016 07:31:48 +0100
Subject: [R-pkg-devel] Is it possible to protect a word from the spell
 checker?
In-Reply-To: <CAJ4QxaPCNhY+nB6XZeoVmqoFwaGkbuAcdyOV48FZOY_VNy2aeg@mail.gmail.com>
References: <56D5C7B8.5080909@dewey.myzen.co.uk> <56D5F15E.2030609@uw.edu>
	<22230.43541.192789.891424@stat.math.ethz.ch>
	<56D6D11E.9090707@statistik.tu-dortmund.de>
	<56DC5611.7060402@dewey.myzen.co.uk>
	<CAJ4QxaPCNhY+nB6XZeoVmqoFwaGkbuAcdyOV48FZOY_VNy2aeg@mail.gmail.com>
Message-ID: <56DD2054.6030000@statistik.tu-dortmund.de>



On 07.03.2016 03:14, boB Rudis wrote:
> Is there a minimum length req for the single quote spell checker
> firewall? I've been putting 'API' in proper single quotes and it
> always gets flagged.

You do not need toout everything within qtuotes.
There are humans looking at the check result who know that the spell 
checker does not know some words. If a function foo() or a package 'pkg' 
are not typeset correctly (i.e. without parantheses or quotes, 
respectively), we see this quickly using the spellchecker. But the 
spellchecker is actually intended for spell checking. ;-)

Best,
Uwe Ligges

>
> On Sun, Mar 6, 2016 at 11:08 AM, Michael Dewey <lists at dewey.myzen.co.uk> wrote:
>> Thanks to all. I find it quite reassuring that even someone so steeped in R
>> is still finding new things to learn, it gives me hope.
>>
>>
>> On 02/03/2016 11:40, Uwe Ligges wrote:
>>>
>>> Indeed, from Writing R Extensions:
>>>
>>> "double quotes should be used for quotations (including titles of books
>>> and articles), and single quotes for non-English usage, including names
>>> of other packages and external software."
>>>
>>> Best,
>>> Uwe
>>>
>>>
>>>
>>>
>>> On 02.03.2016 09:53, Martin Maechler wrote:
>>>>>>>>>
>>>>>>>>> Hana Sevcikova <hanas at uw.edu>
>>>>>>>>>       on Tue, 1 Mar 2016 11:45:34 -0800 writes:
>>>>
>>>>
>>>>       > If it's in the DESCRIPTION file put the word into quotes.
>>>>       > Hana
>>>>
>>>> Indeed, thank you Hana!
>>>>
>>>> To add - embarrassingly I've only learned this about a week ago -
>>>> they need to be *single* quotes (as used 'here', they are also
>>>> called 'apostroph') and *not* double quotes.
>>>>
>>>> Martin
>>>>
>>>>       > On 01/03/2016 08:47, Michael Dewey wrote:
>>>>       >> The spell checker is correct they are not correctly spelled
>>>> English
>>>>       >> words but names. I searched the Writing R Extensions manual
>>>> but did not
>>>>       >> find any solution. I know it is only a NOTE not more serious.
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> --
>> Michael
>> http://www.dewey.myzen.co.uk/home.html
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jack at jackwasey.com  Mon Mar  7 14:12:02 2016
From: jack at jackwasey.com (Jack Wasey)
Date: Mon, 7 Mar 2016 08:12:02 -0500
Subject: [R-pkg-devel] Is it possible to protect a word from the spell
	checker?
In-Reply-To: <56D5D15C.9070807@gmail.com>
References: <56D5C7B8.5080909@dewey.myzen.co.uk> <56D5D15C.9070807@gmail.com>
Message-ID: <CA+zP7HH6y8-fHpxzcNSuiBmpKJnkBdR+F4e=eFWaG+94NU7zPA@mail.gmail.com>

I have a fair number of medical words and acronyms in my icd9 package
and found aspell to be very useful. For an example, look in the icd10
branch in github at https://github.com/jackwasey/icd9/tree/icd10 .
Look in .aspell/ and R/generate_spelling.R.

On Tue, Mar 1, 2016 at 12:29 PM, Duncan Murdoch
<murdoch.duncan at gmail.com> wrote:
> On 01/03/2016 11:47 AM, Michael Dewey wrote:
>>
>> The spell checker is correct they are not correctly spelled English
>> words but names. I searched the Writing R Extensions manual but did not
>> find any solution. I know it is only a NOTE not more serious.
>>
> I think so.  See the discussion of the .aspell directory in ?"aspell-utils".
>
> Duncan Murdoch
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From sberri at illumina.com  Wed Mar  9 13:10:15 2016
From: sberri at illumina.com (Berri, Stefano)
Date: Wed, 9 Mar 2016 12:10:15 +0000
Subject: [R-pkg-devel] documentation of generic '['
Message-ID: <D5A1EEBA3EB597469E03B74F43274534CC4136ED@UKCH-PRD-EXMB01.illumina.com>

Hi. 

I am having problems with R CMD check around documentation of method "[". I am pretty sure I didn't have this WARNING when I used R-3.0.2. I have tried many things, but I am not sure how to fix it.


$  R CMD check encore
...
* using R version 3.2.3 (2015-12-10)
...
* checking for missing documentation entries ... WARNING
Undocumented S4 methods:
  generic '[' and siglist 'encore,ANY,ANY'
All user-level objects in a package (including S4 classes and methods)
should have documentation entries.
See chapter 'Writing R documentation files' in the 'Writing R
Extensions' manual.
...

Everything else is OK, there is an unrelated NOTE we are addressing

##### R CODE ######

setMethod("[", "encore", function(x,i,j,drop){
	... code here ...
})

##### DOCUMENTATION #####

\name{encore-class}
\Rdversion{0.1}
\docType{class}
\alias{encore}
\alias{subtraction-class}
\alias{encore-class}
\alias{dConn-class}

\alias{[,encore-method}

... description of the class, no explicit description of method "[" though 

##########################

I have tried various things searching around, but I seem to introduce new WARNINGS without removing the one I have.

I have read the "Writing R documentation files", but there is no special description of method "[", and I am struggling to understand what's wrong.

Thank you very much in advance

Stefano


From murdoch.duncan at gmail.com  Wed Mar  9 14:11:38 2016
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 9 Mar 2016 08:11:38 -0500
Subject: [R-pkg-devel] documentation of generic '['
In-Reply-To: <D5A1EEBA3EB597469E03B74F43274534CC4136ED@UKCH-PRD-EXMB01.illumina.com>
References: <D5A1EEBA3EB597469E03B74F43274534CC4136ED@UKCH-PRD-EXMB01.illumina.com>
Message-ID: <56E0210A.7020900@gmail.com>

On 09/03/2016 7:10 AM, Berri, Stefano wrote:
> Hi.
>
> I am having problems with R CMD check around documentation of method "[". I am pretty sure I didn't have this WARNING when I used R-3.0.2. I have tried many things, but I am not sure how to fix it.
>
>
> $  R CMD check encore
> ...
> * using R version 3.2.3 (2015-12-10)
> ...
> * checking for missing documentation entries ... WARNING
> Undocumented S4 methods:
>    generic '[' and siglist 'encore,ANY,ANY'
> All user-level objects in a package (including S4 classes and methods)
> should have documentation entries.
> See chapter 'Writing R documentation files' in the 'Writing R
> Extensions' manual.
> ...
>
> Everything else is OK, there is an unrelated NOTE we are addressing
>
> ##### R CODE ######
>
> setMethod("[", "encore", function(x,i,j,drop){
> 	... code here ...
> })
>
> ##### DOCUMENTATION #####
>
> \name{encore-class}
> \Rdversion{0.1}
> \docType{class}
> \alias{encore}
> \alias{subtraction-class}
> \alias{encore-class}
> \alias{dConn-class}
>
> \alias{[,encore-method}
>
> ... description of the class, no explicit description of method "[" though
>
> ##########################
>
> I have tried various things searching around, but I seem to introduce new WARNINGS without removing the one I have.
>
> I have read the "Writing R documentation files", but there is no special description of method "[", and I am struggling to understand what's wrong.
>
> Thank you very much in advance

 From the error message, it looks as though you need

\alias{[,encore,ANY,ANY-method}

and perhaps a corresponding \S4method{} entry.  I don't see why that 
would arise from the setMethod call you give; I would have guessed 3 
"ANY"s, but I don't use S4 much.

Duncan Murdoch


From Joris.Meys at Ugent.be  Wed Mar  9 14:14:56 2016
From: Joris.Meys at Ugent.be (Joris Meys)
Date: Wed, 9 Mar 2016 14:14:56 +0100
Subject: [R-pkg-devel] documentation of generic '['
In-Reply-To: <D5A1EEBA3EB597469E03B74F43274534CC4136ED@UKCH-PRD-EXMB01.illumina.com>
References: <D5A1EEBA3EB597469E03B74F43274534CC4136ED@UKCH-PRD-EXMB01.illumina.com>
Message-ID: <CAO1zAVYXnJ6fek6BAZqjyZ9VFNLL7YJZsSh0a_GU3KO7RbZY+w@mail.gmail.com>

Hi Stefano,

did you try moving the method to a separate file already? I've noticed that
documentation of classes and methods in the same .Rd file isn't very
straightforward. You need a \usage{} section to document the method, and
that's likely to cause trouble when used in a class document.

In any case, afaik you need a :

\S4method{generic}{signature_list}(argument_list)

in the usage section, and you have to refer to the method as

\alias{[, encore,ANY,ANY-method}

See
https://cran.r-project.org/doc/manuals/R-exts.html#Documenting-S4-classes-and-methods

Cheers
Joris

On Wed, Mar 9, 2016 at 1:10 PM, Berri, Stefano <sberri at illumina.com> wrote:

> Hi.
>
> I am having problems with R CMD check around documentation of method "[".
> I am pretty sure I didn't have this WARNING when I used R-3.0.2. I have
> tried many things, but I am not sure how to fix it.
>
>
> $  R CMD check encore
> ...
> * using R version 3.2.3 (2015-12-10)
> ...
> * checking for missing documentation entries ... WARNING
> Undocumented S4 methods:
>   generic '[' and siglist 'encore,ANY,ANY'
> All user-level objects in a package (including S4 classes and methods)
> should have documentation entries.
> See chapter 'Writing R documentation files' in the 'Writing R
> Extensions' manual.
> ...
>
> Everything else is OK, there is an unrelated NOTE we are addressing
>
> ##### R CODE ######
>
> setMethod("[", "encore", function(x,i,j,drop){
>         ... code here ...
> })
>
> ##### DOCUMENTATION #####
>
> \name{encore-class}
> \Rdversion{0.1}
> \docType{class}
> \alias{encore}
> \alias{subtraction-class}
> \alias{encore-class}
> \alias{dConn-class}
>
> \alias{[,encore-method}
>
> ... description of the class, no explicit description of method "[" though
>
> ##########################
>
> I have tried various things searching around, but I seem to introduce new
> WARNINGS without removing the one I have.
>
> I have read the "Writing R documentation files", but there is no special
> description of method "[", and I am struggling to understand what's wrong.
>
> Thank you very much in advance
>
> Stefano
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Joris Meys
Statistical consultant

Ghent University
Faculty of Bioscience Engineering
Department of Mathematical Modelling, Statistics and Bio-Informatics

tel : +32 9 264 59 87
Joris.Meys at Ugent.be
-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From sberri at illumina.com  Wed Mar  9 14:32:30 2016
From: sberri at illumina.com (Berri, Stefano)
Date: Wed, 9 Mar 2016 13:32:30 +0000
Subject: [R-pkg-devel] documentation of generic '['
In-Reply-To: <CAO1zAVYXnJ6fek6BAZqjyZ9VFNLL7YJZsSh0a_GU3KO7RbZY+w@mail.gmail.com>
References: <D5A1EEBA3EB597469E03B74F43274534CC4136ED@UKCH-PRD-EXMB01.illumina.com>
	<CAO1zAVYXnJ6fek6BAZqjyZ9VFNLL7YJZsSh0a_GU3KO7RbZY+w@mail.gmail.com>
Message-ID: <D5A1EEBA3EB597469E03B74F43274534CC413720@UKCH-PRD-EXMB01.illumina.com>

Thank you Joris and Duncan!

\alias{[, encore,ANY,ANY-method}

is all it is needed to fix the WARNING.

Now that it is fixed, I will try to follow your other suggestions and move the documentation outside the class documentation (probably with other accessors would make more sense) and add 

S4method{generic}{signature_list}(argument_list)

cheers

Stefano

From: jorismeys at gmail.com [mailto:jorismeys at gmail.com] On Behalf Of Joris Meys
Sent: 09 March 2016 13:15
To: Berri, Stefano
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] documentation of generic '['

Hi Stefano,
did you try moving the method to a separate file already? I've noticed that documentation of classes and methods in the same .Rd file isn't very straightforward. You need a \usage{} section to document the method, and that's likely to cause trouble when used in a class document. 

In any case, afaik you need a :
\S4method{generic}{signature_list}(argument_list)
in the usage section, and you have to refer to the method as 

\alias{[, encore,ANY,ANY-method}
See https://cran.r-project.org/doc/manuals/R-exts.html#Documenting-S4-classes-and-methods
Cheers
Joris

From glennmschultz at me.com  Thu Mar 10 15:05:02 2016
From: glennmschultz at me.com (Glenn Schultz)
Date: Thu, 10 Mar 2016 08:05:02 -0600
Subject: [R-pkg-devel] Creating Accessor Methods
Message-ID: <046ED2F0-31DF-4464-BBF0-45B3C43454EA@me.com>

All,

I have a package with to S4 classes (MBSCashFlow, REMICCashFlow and BondCashFlow) all of which contain the slot Duration.  I would like have an accessor Duration that would work on multiple signatures.  Is this possible?  I have checked my books, help, BioConductor tutorials and it appears that this is not possible.  Has anyone ever run into this situation?

Best Glenn  

From Joris.Meys at Ugent.be  Thu Mar 10 15:13:56 2016
From: Joris.Meys at Ugent.be (Joris Meys)
Date: Thu, 10 Mar 2016 15:13:56 +0100
Subject: [R-pkg-devel] Creating Accessor Methods
In-Reply-To: <046ED2F0-31DF-4464-BBF0-45B3C43454EA@me.com>
References: <046ED2F0-31DF-4464-BBF0-45B3C43454EA@me.com>
Message-ID: <CAO1zAVaN=ttiAxA8yA9hxwxraF22MKJUJ75ze1FUZJWkbSkcpg@mail.gmail.com>

Hi Glenn,

that is actually as easy as defining a generic and defining a method for
each class to extract the slot. I do this literally in every package I
write.

setGeneric('duration', function(x, ...) standardGeneric('duration')

setMethod('duration', signature = 'MBSCashFlow', function(x) { x at Duration})
setMethod('duration', signature = 'REMICCashFlow', function(x) {x at Duration})
etc...

I suggest you take a close look at Hadley Wickham's books 'Advanced R'  and
'R packages', both freely available online.

This is the relevant section of the first book :
http://adv-r.had.co.nz/OO-essentials.html
This is the other book : http://r-pkgs.had.co.nz/

Cheers
Joris

On Thu, Mar 10, 2016 at 3:05 PM, Glenn Schultz <glennmschultz at me.com> wrote:

> All,
>
> I have a package with to S4 classes (MBSCashFlow, REMICCashFlow and
> BondCashFlow) all of which contain the slot Duration.  I would like have an
> accessor Duration that would work on multiple signatures.  Is this
> possible?  I have checked my books, help, BioConductor tutorials and it
> appears that this is not possible.  Has anyone ever run into this situation?
>
> Best Glenn
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Joris Meys
Statistical consultant

Ghent University
Faculty of Bioscience Engineering
Department of Mathematical Modelling, Statistics and Bio-Informatics

tel : +32 9 264 59 87
Joris.Meys at Ugent.be
-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From daniel.nuest at uni-muenster.de  Thu Mar 10 16:48:04 2016
From: daniel.nuest at uni-muenster.de (=?UTF-8?Q?Daniel_N=c3=bcst?=)
Date: Thu, 10 Mar 2016 16:48:04 +0100
Subject: [R-pkg-devel] Creating Accessor Methods
In-Reply-To: <046ED2F0-31DF-4464-BBF0-45B3C43454EA@me.com>
References: <046ED2F0-31DF-4464-BBF0-45B3C43454EA@me.com>
Message-ID: <56E19734.7080605@uni-muenster.de>

Hi Glenn!

On 10/03/16 15:05, Glenn Schultz wrote:
> I have a package with to S4 classes (MBSCashFlow, REMICCashFlow and BondCashFlow) all of which contain the slot Duration.  I would like have an accessor Duration that would work on multiple signatures.  Is this possible?  I have checked my books, help, BioConductor tutorials and it appears that this is not possible.  Has anyone ever run into this situation?

I actually use a similar mechanism to extract values from different S4 
classes in my package, and it works quite well. So if I understand you 
right, the following code might help you to get closer to want you want:

https://github.com/52North/sos4R/blob/master/R/SOS-methods-accessor.R

I created methods for different signatures, see for example 
"sosObservedProperties".


Hope this helps,
Daniel

-- 
Daniel N?st
Institute for Geoinformatics (ifgi),   University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 31962
http://ifgi.uni-muenster.de/~d_nues01        http://o2r.info


From thomas.petzoldt at tu-dresden.de  Thu Mar 10 17:33:16 2016
From: thomas.petzoldt at tu-dresden.de (Thomas Petzoldt)
Date: Thu, 10 Mar 2016 17:33:16 +0100
Subject: [R-pkg-devel] Creating Accessor Methods
In-Reply-To: <56E19734.7080605@uni-muenster.de>
References: <046ED2F0-31DF-4464-BBF0-45B3C43454EA@me.com>
	<56E19734.7080605@uni-muenster.de>
Message-ID: <56E1A1CC.4090000@tu-dresden.de>

On 10.03.2016 16:48, Daniel N?st wrote:
> Hi Glenn!
>
> On 10/03/16 15:05, Glenn Schultz wrote:
>> I have a package with to S4 classes (MBSCashFlow, REMICCashFlow and
>> BondCashFlow) all of which contain the slot Duration.  I would like
>> have an accessor Duration that would work on multiple signatures.  Is
>> this possible?  I have checked my books, help, BioConductor tutorials
>> and it appears that this is not possible.  Has anyone ever run into
>> this situation?
>
> I actually use a similar mechanism to extract values from different S4
> classes in my package, and it works quite well. So if I understand you
> right, the following code might help you to get closer to want you want:
>
> https://github.com/52North/sos4R/blob/master/R/SOS-methods-accessor.R
>
> I created methods for different signatures, see for example
> "sosObservedProperties".

Yes, that's straightforward. But I still wonder if it is at all possible 
to use not only different *signatures*, but also different argument 
*names* in S4, e.g.:

foo(formula, data, ...)

foo(data, grouping, ...)


Now I'm using a combination of S3 and S4 in my package for this purpose, 
and for some other quirks.

Thomas


-- 
Dr. Thomas Petzoldt
Technische Universitaet Dresden
Faculty of Environmental Sciences
Institute of Hydrobiology
01062 Dresden, Germany

E-Mail: thomas.petzoldt at tu-dresden.de
http://tu-dresden.de/Members/thomas.petzoldt


From glennmschultz at me.com  Thu Mar 10 22:04:25 2016
From: glennmschultz at me.com (Glenn Schultz)
Date: Thu, 10 Mar 2016 15:04:25 -0600
Subject: [R-pkg-devel] Creating Accessor Methods
In-Reply-To: <CAO1zAVaN=ttiAxA8yA9hxwxraF22MKJUJ75ze1FUZJWkbSkcpg@mail.gmail.com>
References: <046ED2F0-31DF-4464-BBF0-45B3C43454EA@me.com>
	<CAO1zAVaN=ttiAxA8yA9hxwxraF22MKJUJ75ze1FUZJWkbSkcpg@mail.gmail.com>
Message-ID: <BD54320D-DB45-484B-83F4-E625B70A0ACE@me.com>

Hello Joris,

Thank worked perfectly.  My main concern was that I was creating multiple methods which may have the same name but different signature. Just over thinking things I guess but I appreciate your time answering my question.

Glenn

> On Mar 10, 2016, at 8:13 AM, Joris Meys <Joris.Meys at Ugent.be> wrote:
> 
> Hi Glenn,
> 
> that is actually as easy as defining a generic and defining a method for each class to extract the slot. I do this literally in every package I write.
> 
> setGeneric('duration', function(x, ...) standardGeneric('duration')
> 
> setMethod('duration', signature = 'MBSCashFlow', function(x) { x at Duration})
> setMethod('duration', signature = 'REMICCashFlow', function(x) {x at Duration})
> etc...
> 
> I suggest you take a close look at Hadley Wickham's books 'Advanced R'  and 'R packages', both freely available online.
> 
> This is the relevant section of the first book : http://adv-r.had.co.nz/OO-essentials.html <http://adv-r.had.co.nz/OO-essentials.html>
> This is the other book : http://r-pkgs.had.co.nz/ <http://r-pkgs.had.co.nz/>
> 
> Cheers
> Joris
> 
> On Thu, Mar 10, 2016 at 3:05 PM, Glenn Schultz <glennmschultz at me.com <mailto:glennmschultz at me.com>> wrote:
> All,
> 
> I have a package with to S4 classes (MBSCashFlow, REMICCashFlow and BondCashFlow) all of which contain the slot Duration.  I would like have an accessor Duration that would work on multiple signatures.  Is this possible?  I have checked my books, help, BioConductor tutorials and it appears that this is not possible.  Has anyone ever run into this situation?
> 
> Best Glenn
> ______________________________________________
> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> 
> 
> 
> -- 
> Joris Meys
> Statistical consultant
> 
> Ghent University
> Faculty of Bioscience Engineering
> Department of Mathematical Modelling, Statistics and Bio-Informatics
> 
> tel : +32 9 264 59 87
> Joris.Meys at Ugent.be
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php <http://helpdesk.ugent.be/e-maildisclaimer.php>

	[[alternative HTML version deleted]]


From kasperdanielhansen at gmail.com  Fri Mar 11 03:01:43 2016
From: kasperdanielhansen at gmail.com (Kasper Daniel Hansen)
Date: Thu, 10 Mar 2016 21:01:43 -0500
Subject: [R-pkg-devel] Creating Accessor Methods
In-Reply-To: <BD54320D-DB45-484B-83F4-E625B70A0ACE@me.com>
References: <046ED2F0-31DF-4464-BBF0-45B3C43454EA@me.com>
	<CAO1zAVaN=ttiAxA8yA9hxwxraF22MKJUJ75ze1FUZJWkbSkcpg@mail.gmail.com>
	<BD54320D-DB45-484B-83F4-E625B70A0ACE@me.com>
Message-ID: <CAC2h7uudOt6rTHqGoiJRz17MrMqA5e_Gu9Jf26492OFkAbgG=w@mail.gmail.com>

Creating functions that looks like they have the same name, but have
different internals is exactly (one of) the purposes of having methods.

Best,
Kasper

On Thu, Mar 10, 2016 at 4:04 PM, Glenn Schultz <glennmschultz at me.com> wrote:

> Hello Joris,
>
> Thank worked perfectly.  My main concern was that I was creating multiple
> methods which may have the same name but different signature. Just over
> thinking things I guess but I appreciate your time answering my question.
>
> Glenn
>
> > On Mar 10, 2016, at 8:13 AM, Joris Meys <Joris.Meys at Ugent.be> wrote:
> >
> > Hi Glenn,
> >
> > that is actually as easy as defining a generic and defining a method for
> each class to extract the slot. I do this literally in every package I
> write.
> >
> > setGeneric('duration', function(x, ...) standardGeneric('duration')
> >
> > setMethod('duration', signature = 'MBSCashFlow', function(x) { x at Duration
> })
> > setMethod('duration', signature = 'REMICCashFlow', function(x)
> {x at Duration})
> > etc...
> >
> > I suggest you take a close look at Hadley Wickham's books 'Advanced R'
> and 'R packages', both freely available online.
> >
> > This is the relevant section of the first book :
> http://adv-r.had.co.nz/OO-essentials.html <
> http://adv-r.had.co.nz/OO-essentials.html>
> > This is the other book : http://r-pkgs.had.co.nz/ <
> http://r-pkgs.had.co.nz/>
> >
> > Cheers
> > Joris
> >
> > On Thu, Mar 10, 2016 at 3:05 PM, Glenn Schultz <glennmschultz at me.com
> <mailto:glennmschultz at me.com>> wrote:
> > All,
> >
> > I have a package with to S4 classes (MBSCashFlow, REMICCashFlow and
> BondCashFlow) all of which contain the slot Duration.  I would like have an
> accessor Duration that would work on multiple signatures.  Is this
> possible?  I have checked my books, help, BioConductor tutorials and it
> appears that this is not possible.  Has anyone ever run into this situation?
> >
> > Best Glenn
> > ______________________________________________
> > R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
> mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel <
> https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> >
> >
> >
> > --
> > Joris Meys
> > Statistical consultant
> >
> > Ghent University
> > Faculty of Bioscience Engineering
> > Department of Mathematical Modelling, Statistics and Bio-Informatics
> >
> > tel : +32 9 264 59 87
> > Joris.Meys at Ugent.be
> > -------------------------------
> > Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php <
> http://helpdesk.ugent.be/e-maildisclaimer.php>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From nilsson.henric at gmail.com  Wed Mar 16 18:07:20 2016
From: nilsson.henric at gmail.com (Henric Winell)
Date: Wed, 16 Mar 2016 18:07:20 +0100
Subject: [R-pkg-devel] No reference output from knitr vignettes
Message-ID: <56E992C8.5020604@gmail.com>

Hi,

After having converted a couple of package vignettes from Sweave to 
knitr, I discovered that the reference output generated by R CMD check, 
i.e., <vignette>.Rnw.log in the check directory, is now empty except for 
the timings.

When doing the conversion I added knitr to DESCRIPTION's Suggests and 
VignetteBuilder fields.  I also added %\VignetteEngine(knitr::knitr) to 
the LaTeX preamble in <vignette>.Rnw.  The vignettes are built OK.

Am I doing something wrong here?


Henric Winell


From olbapjose at gmail.com  Fri Mar 18 13:20:56 2016
From: olbapjose at gmail.com (Manny Calavera)
Date: Fri, 18 Mar 2016 13:20:56 +0100
Subject: [R-pkg-devel] Documenting S4 generic does not show usage
Message-ID: <CANHtDkSjCqP86+NyzQ+f1U+_99vwrbYqJb-908usPcWaA7umCw@mail.gmail.com>

Good day to everyone,
I have an issue when documenting an S4 generic. I have the following in my
file generics.R:

#' @rdname myfunction-methods#' @name myfunction <- without this,
roxygen2 complaints about missing name#' @export
methods::setGeneric("myfunction",
  function( arg1, arg2 ),
      arg3, arg4 {
        methods::standardGeneric("myfunction")});

and then in my file mymethods.R:

#' Something#'#' A brief description#'#' @param all params... #'
@return Something#' @name myfunction <- without this, roxygen2
complaints on missing name#' @include generics.R#' @rdname
myfunction-methods#' @export
methods::setMethod( "myfunction",
  methods::signature( arg1 = "formula", arg2 = "data.frame" ),
  function( arg1, arg2, arg3, arg4 ) {

   ...whatever
    })

With this, everything is fine except that the usage section is not showing
up. Could you please correct what is wrong in my documentation? More
precisely:

   1.

   Is it correct to write the documentation before setMethod or is it
   preferably before setGeneric ?
   2.

   Why do I need the @namein both files? Should it be different? Does it
   matter?
   3.

   Do I need @export in both files?
   4.

   Would @alias help at all?

I tried reading Hadley Wickham's section on how to document S4 functions
but did not help (probably I didn't understand something correctly).

Thank you very much in advance.

	[[alternative HTML version deleted]]


From h.wickham at gmail.com  Fri Mar 18 15:11:18 2016
From: h.wickham at gmail.com (Hadley Wickham)
Date: Fri, 18 Mar 2016 09:11:18 -0500
Subject: [R-pkg-devel] Documenting S4 generic does not show usage
In-Reply-To: <CANHtDkSjCqP86+NyzQ+f1U+_99vwrbYqJb-908usPcWaA7umCw@mail.gmail.com>
References: <CANHtDkSjCqP86+NyzQ+f1U+_99vwrbYqJb-908usPcWaA7umCw@mail.gmail.com>
Message-ID: <CABdHhvHJ6Ynw0Dj_eTVrfsSo2R1eNi1kmXWfmwE3pS5Nn7VwqA@mail.gmail.com>

The problem seems to be your use of methods::setMethod instead of
setMethod (etc). Roxygen2 doesn't seem to be quite smart enough to
realise that these aren't equivalent. You might want to file an issue
on github so I look into this the next time I'm working on roxygen2.

Hadley

On Fri, Mar 18, 2016 at 7:20 AM, Manny Calavera <olbapjose at gmail.com> wrote:
> Good day to everyone,
> I have an issue when documenting an S4 generic. I have the following in my
> file generics.R:
>
> #' @rdname myfunction-methods#' @name myfunction <- without this,
> roxygen2 complaints about missing name#' @export
> methods::setGeneric("myfunction",
>   function( arg1, arg2 ),
>       arg3, arg4 {
>         methods::standardGeneric("myfunction")});
>
> and then in my file mymethods.R:
>
> #' Something#'#' A brief description#'#' @param all params... #'
> @return Something#' @name myfunction <- without this, roxygen2
> complaints on missing name#' @include generics.R#' @rdname
> myfunction-methods#' @export
> methods::setMethod( "myfunction",
>   methods::signature( arg1 = "formula", arg2 = "data.frame" ),
>   function( arg1, arg2, arg3, arg4 ) {
>
>    ...whatever
>     })
>
> With this, everything is fine except that the usage section is not showing
> up. Could you please correct what is wrong in my documentation? More
> precisely:
>
>    1.
>
>    Is it correct to write the documentation before setMethod or is it
>    preferably before setGeneric ?
>    2.
>
>    Why do I need the @namein both files? Should it be different? Does it
>    matter?
>    3.
>
>    Do I need @export in both files?
>    4.
>
>    Would @alias help at all?
>
> I tried reading Hadley Wickham's section on how to document S4 functions
> but did not help (probably I didn't understand something correctly).
>
> Thank you very much in advance.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
http://hadley.nz


From olbapjose at gmail.com  Mon Mar 21 17:06:36 2016
From: olbapjose at gmail.com (Manny Calavera)
Date: Mon, 21 Mar 2016 17:06:36 +0100
Subject: [R-pkg-devel] Documenting S4 generic does not show usage
Message-ID: <CANHtDkTai_Jws+mUgfEQp8TQ8r_82zm2vf=N98owhLEc7r+PSg@mail.gmail.com>

Thank you so much, it works like a charm :-)

I would appreciate if you could please answer (very briefly) questions 1 to
3, so I can learn how to correctly document S4 generics properly in the
future.

Thanks again.

2016-03-18 15:11 GMT+01:00 Hadley Wickham <h.wickham at gmail.com>:

> The problem seems to be your use of methods::setMethod instead of
> setMethod (etc). Roxygen2 doesn't seem to be quite smart enough to
> realise that these aren't equivalent. You might want to file an issue
> on github so I look into this the next time I'm working on roxygen2.
>
> Hadley
>
> On Fri, Mar 18, 2016 at 7:20 AM, Manny Calavera <olbapjose at gmail.com>
> wrote:
> > Good day to everyone,
> > I have an issue when documenting an S4 generic. I have the following in
> my
> > file generics.R:
> >
> > #' @rdname myfunction-methods#' @name myfunction <- without this,
> > roxygen2 complaints about missing name#' @export
> > methods::setGeneric("myfunction",
> >   function( arg1, arg2 ),
> >       arg3, arg4 {
> >         methods::standardGeneric("myfunction")});
> >
> > and then in my file mymethods.R:
> >
> > #' Something#'#' A brief description#'#' @param all params... #'
> > @return Something#' @name myfunction <- without this, roxygen2
> > complaints on missing name#' @include generics.R#' @rdname
> > myfunction-methods#' @export
> > methods::setMethod( "myfunction",
> >   methods::signature( arg1 = "formula", arg2 = "data.frame" ),
> >   function( arg1, arg2, arg3, arg4 ) {
> >
> >    ...whatever
> >     })
> >
> > With this, everything is fine except that the usage section is not
> showing
> > up. Could you please correct what is wrong in my documentation? More
> > precisely:
> >
> >    1.
> >
> >    Is it correct to write the documentation before setMethod or is it
> >    preferably before setGeneric ?
> >    2.
> >
> >    Why do I need the @name in both files? Should it be different? Does it
> >    matter?
> >    3.
> >
> >    Do I need @export in both files?
> >    4.
> >
> >    Would @alias help at all?
> >
> > I tried reading Hadley Wickham's section on how to document S4 functions
> > but did not help (probably I didn't understand something correctly).
> >
> > Thank you very much in advance.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>
> --
> http://hadley.nz
>

	[[alternative HTML version deleted]]


From h.wickham at gmail.com  Mon Mar 21 17:10:01 2016
From: h.wickham at gmail.com (Hadley Wickham)
Date: Mon, 21 Mar 2016 11:10:01 -0500
Subject: [R-pkg-devel] Documenting S4 generic does not show usage
In-Reply-To: <CANHtDkTai_Jws+mUgfEQp8TQ8r_82zm2vf=N98owhLEc7r+PSg@mail.gmail.com>
References: <CANHtDkTai_Jws+mUgfEQp8TQ8r_82zm2vf=N98owhLEc7r+PSg@mail.gmail.com>
Message-ID: <CABdHhvGeux3BehAynz8OLqpsLNtQh7F78thM=2kHHqSHT6KcrQ@mail.gmail.com>

1. Depends on whether you're documenting the method or the generic.
2. You don't
3. I can never remember. I think if it's your generic, you only need
it in one place.

Hadley

On Mon, Mar 21, 2016 at 11:06 AM, Manny Calavera <olbapjose at gmail.com> wrote:
> Thank you so much, it works like a charm :-)
>
> I would appreciate if you could please answer (very briefly) questions 1 to
> 3, so I can learn how to correctly document S4 generics properly in the
> future.
>
> Thanks again.
>
> 2016-03-18 15:11 GMT+01:00 Hadley Wickham <h.wickham at gmail.com>:
>>
>> The problem seems to be your use of methods::setMethod instead of
>> setMethod (etc). Roxygen2 doesn't seem to be quite smart enough to
>> realise that these aren't equivalent. You might want to file an issue
>> on github so I look into this the next time I'm working on roxygen2.
>>
>> Hadley
>>
>> On Fri, Mar 18, 2016 at 7:20 AM, Manny Calavera <olbapjose at gmail.com>
>> wrote:
>> > Good day to everyone,
>> > I have an issue when documenting an S4 generic. I have the following in
>> > my
>> > file generics.R:
>> >
>> > #' @rdname myfunction-methods#' @name myfunction <- without this,
>> > roxygen2 complaints about missing name#' @export
>> > methods::setGeneric("myfunction",
>> >   function( arg1, arg2 ),
>> >       arg3, arg4 {
>> >         methods::standardGeneric("myfunction")});
>> >
>> > and then in my file mymethods.R:
>> >
>> > #' Something#'#' A brief description#'#' @param all params... #'
>> > @return Something#' @name myfunction <- without this, roxygen2
>> > complaints on missing name#' @include generics.R#' @rdname
>> > myfunction-methods#' @export
>> > methods::setMethod( "myfunction",
>> >   methods::signature( arg1 = "formula", arg2 = "data.frame" ),
>> >   function( arg1, arg2, arg3, arg4 ) {
>> >
>> >    ...whatever
>> >     })
>> >
>> > With this, everything is fine except that the usage section is not
>> > showing
>> > up. Could you please correct what is wrong in my documentation? More
>> > precisely:
>> >
>> >    1.
>> >
>> >    Is it correct to write the documentation before setMethod or is it
>> >    preferably before setGeneric ?
>> >    2.
>> >
>> >    Why do I need the @name in both files? Should it be different? Does
>> > it
>> >    matter?
>> >    3.
>> >
>> >    Do I need @export in both files?
>> >    4.
>> >
>> >    Would @alias help at all?
>> >
>> > I tried reading Hadley Wickham's section on how to document S4 functions
>> > but did not help (probably I didn't understand something correctly).
>> >
>> > Thank you very much in advance.
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>
>>
>> --
>> http://hadley.nz
>
>



-- 
http://hadley.nz


From kevin.r.coombes at gmail.com  Tue Mar 22 13:52:03 2016
From: kevin.r.coombes at gmail.com (Kevin Coombes)
Date: Tue, 22 Mar 2016 08:52:03 -0400
Subject: [R-pkg-devel] Data-generating scripts in R packages
Message-ID: <56F13FF3.1030006@gmail.com>

Hi,

I'm currently developing an R package that includes a small data set 
along with the functions that I want to export. I have an R script that 
generates the data set; the computation time is long (well, relative to 
the size of the data set). So, my plan is to run the script and save() 
the data set as an *.rda file that I can put in the data directory.  (It 
is possible that some users of the package will _only_ be interested in 
the data set.)

But, I'd like to keep the script with the package, both because it shows 
how to use some of the functions and because I might want to modify how 
the data set is generated in the future.  My question: What is the "best 
practice" for where in the package directory structure to store such a 
script?

Best,
   Kevin

---
This email has been checked for viruses by Avast antivirus software.
https://www.avast.com/antivirus


From brian at braverock.com  Tue Mar 22 14:15:09 2016
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 22 Mar 2016 08:15:09 -0500
Subject: [R-pkg-devel] Data-generating scripts in R packages
In-Reply-To: <56F13FF3.1030006@gmail.com>
References: <56F13FF3.1030006@gmail.com>
Message-ID: <1458652509.29692.28.camel@brian-rcg>

On Tue, 2016-03-22 at 08:52 -0400, Kevin Coombes wrote:
> I'm currently developing an R package that includes a small data set 
> along with the functions that I want to export. I have an R script that 
> generates the data set; the computation time is long (well, relative to 
> the size of the data set). So, my plan is to run the script and save() 
> the data set as an *.rda file that I can put in the data directory.  (It 
> is possible that some users of the package will _only_ be interested in 
> the data set.)
> 
> But, I'd like to keep the script with the package, both because it shows 
> how to use some of the functions and because I might want to modify how 
> the data set is generated in the future.  My question: What is the "best 
> practice" for where in the package directory structure to store such a 
> script?

I'd probably put the script in the 'demo' directory so that it would be
easy for a user to run it.  

My team has taken to documenting things like that as RStudio notebooks
(.R files with rmarkdown comments that may be compiled as an annotated
document), but that's just a suggestion and certainly not necessary.

The other place things like this could go would be in the inst/
directory.  We have a package that includes several 'parser' scripts for
different data providers, and we chose to include these in a directory
under inst/

Regards,

Brian


From jack at jackwasey.com  Tue Mar 22 21:03:48 2016
From: jack at jackwasey.com (Jack Wasey)
Date: Tue, 22 Mar 2016 16:03:48 -0400
Subject: [R-pkg-devel]  Data-generating scripts in R packages
In-Reply-To: <1458652509.29692.28.camel@brian-rcg>
References: <56F13FF3.1030006@gmail.com> <1458652509.29692.28.camel@brian-rcg>
Message-ID: <CA+zP7HG3sRAhM6aQstanbdT1PT8MN9CAwEZ1LsW2BDyTB_u1bg@mail.gmail.com>

You can leave them in R/ (and write them as functions) but use
.Rbuildignore to exclude them from the distributed package. People can use
the source, eg github, to regenerate the package and all its data if they
wish. This way, R CMD check and tests can cover them easily while
developing.

However, if the source data is small, I would think including it in the
distributed source package may be a good idea for reproducibility, without
actually invoking the reconstruction of the data on install (or CRAN
check). Or you can pull the data from the Internet as needed, and leave the
source data out of the package, and just include the pre-processing
function, which you need not export in the namespace.

On Tue, Mar 22, 2016 at 9:15 AM, Brian G. Peterson <brian at braverock.com
<javascript:;>> wrote:
> On Tue, 2016-03-22 at 08:52 -0400, Kevin Coombes wrote:
>> I'm currently developing an R package that includes a small data set
>> along with the functions that I want to export. I have an R script that
>> generates the data set; the computation time is long (well, relative to
>> the size of the data set). So, my plan is to run the script and save()
>> the data set as an *.rda file that I can put in the data directory.  (It
>> is possible that some users of the package will _only_ be interested in
>> the data set.)
>>
>> But, I'd like to keep the script with the package, both because it shows
>> how to use some of the functions and because I might want to modify how
>> the data set is generated in the future.  My question: What is the "best
>> practice" for where in the package directory structure to store such a
>> script?
>
> I'd probably put the script in the 'demo' directory so that it would be
> easy for a user to run it.
>
> My team has taken to documenting things like that as RStudio notebooks
> (.R files with rmarkdown comments that may be compiled as an annotated
> document), but that's just a suggestion and certainly not necessary.
>
> The other place things like this could go would be in the inst/
> directory.  We have a package that includes several 'parser' scripts for
> different data providers, and we chose to include these in a directory
> under inst/
>
> Regards,
>
> Brian
>
> ______________________________________________
> R-package-devel at r-project.org <javascript:;> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From edd at debian.org  Tue Mar 22 22:08:22 2016
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 22 Mar 2016 16:08:22 -0500
Subject: [R-pkg-devel] Data-generating scripts in R packages
In-Reply-To: <56F13FF3.1030006@gmail.com>
References: <56F13FF3.1030006@gmail.com>
Message-ID: <22257.46150.676711.260299@max.nulle.part>


Kevin,

The inst/ directory gives a good handle to pass arbitrary directory layouts
of your choosing through.  You just need to avoid inst/data as it would clash
with an existing data/ directory.

I think I have seen

    inst/rawData
    inst/extData                # as in 'external data'

and of course

    inst/scripts

or

    inst/tools

Note that there is a reasonable discussion in Writing R Extensions, but as
always, you have to find it first.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From r.turner at auckland.ac.nz  Wed Mar 23 00:38:56 2016
From: r.turner at auckland.ac.nz (Rolf Turner)
Date: Wed, 23 Mar 2016 12:38:56 +1300
Subject: [R-pkg-devel] [FORGED] Re: Data-generating scripts in R packages
In-Reply-To: <22257.46150.676711.260299@max.nulle.part>
References: <56F13FF3.1030006@gmail.com>
	<22257.46150.676711.260299@max.nulle.part>
Message-ID: <56F1D790.9040007@auckland.ac.nz>


On 23/03/16 10:08, Dirk Eddelbuettel wrote:

<SNIP>

> Note that there is a reasonable discussion in Writing R Extensions, but as
> always, you have to find it first.

Fortune nomination!

cheers,

Rolf Turner

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From es at enricoschumann.net  Wed Mar 23 11:46:50 2016
From: es at enricoschumann.net (Enrico Schumann)
Date: Wed, 23 Mar 2016 11:46:50 +0100
Subject: [R-pkg-devel] Data-generating scripts in R packages
In-Reply-To: <56F13FF3.1030006@gmail.com> (Kevin Coombes's message of "Tue, 22
	Mar 2016 08:52:03 -0400")
References: <56F13FF3.1030006@gmail.com>
Message-ID: <87y499tqsl.fsf@enricoschumann.net>

On Tue, 22 Mar 2016, Kevin Coombes <kevin.r.coombes at gmail.com> writes:

> Hi,
>
> I'm currently developing an R package that includes a small data set
> along with the functions that I want to export. I have an R script
> that generates the data set; the computation time is long (well,
> relative to the size of the data set). So, my plan is to run the
> script and save() the data set as an *.rda file that I can put in the
> data directory.  (It is possible that some users of the package will
> _only_ be interested in the data set.)
>
> But, I'd like to keep the script with the package, both because it
> shows how to use some of the functions and because I might want to
> modify how the data set is generated in the future.  My question: What
> is the "best practice" for where in the package directory structure to
> store such a script?
>
> Best,
>   Kevin

If the script is short, you could wrap it in \dontrun{...}
and put it into the Examples section of the Rd file that
describes the data. In this way people can quickly find the
code when they look up the data's documentation.


Kind regards
    Enrico


-- 
Enrico Schumann
Lucerne, Switzerland
http://enricoschumann.net


From thierry.onkelinx at inbo.be  Wed Mar 23 12:25:08 2016
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Wed, 23 Mar 2016 12:25:08 +0100
Subject: [R-pkg-devel] Data-generating scripts in R packages
In-Reply-To: <87y499tqsl.fsf@enricoschumann.net>
References: <56F13FF3.1030006@gmail.com>
	<87y499tqsl.fsf@enricoschumann.net>
Message-ID: <CAJuCY5ySOiCDD6Kn9J16R_jirf3wkbbQuxE-pvW7ZPhRdjEwpA@mail.gmail.com>

Dear Kevin,

I would convert the script into a function and add it to the R folder. This
makes it easy to document the script using the standard R help files. Then
add the function to the examples in the helpfile of the data in a
\dontrun{}. Then it is clear to to user how the data was generated.

Best regards,

ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature and
Forest
team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
Kliniekstraat 25
1070 Anderlecht
Belgium

To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey

2016-03-23 11:46 GMT+01:00 Enrico Schumann <es at enricoschumann.net>:

> On Tue, 22 Mar 2016, Kevin Coombes <kevin.r.coombes at gmail.com> writes:
>
> > Hi,
> >
> > I'm currently developing an R package that includes a small data set
> > along with the functions that I want to export. I have an R script
> > that generates the data set; the computation time is long (well,
> > relative to the size of the data set). So, my plan is to run the
> > script and save() the data set as an *.rda file that I can put in the
> > data directory.  (It is possible that some users of the package will
> > _only_ be interested in the data set.)
> >
> > But, I'd like to keep the script with the package, both because it
> > shows how to use some of the functions and because I might want to
> > modify how the data set is generated in the future.  My question: What
> > is the "best practice" for where in the package directory structure to
> > store such a script?
> >
> > Best,
> >   Kevin
>
> If the script is short, you could wrap it in \dontrun{...}
> and put it into the Examples section of the Rd file that
> describes the data. In this way people can quickly find the
> code when they look up the data's documentation.
>
>
> Kind regards
>     Enrico
>
>
> --
> Enrico Schumann
> Lucerne, Switzerland
> http://enricoschumann.net
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From kevin.r.coombes at gmail.com  Wed Mar 23 15:53:00 2016
From: kevin.r.coombes at gmail.com (Kevin Coombes)
Date: Wed, 23 Mar 2016 10:53:00 -0400
Subject: [R-pkg-devel] Data-generating scripts in R packages
In-Reply-To: <22257.46150.676711.260299@max.nulle.part>
References: <56F13FF3.1030006@gmail.com>
	<22257.46150.676711.260299@max.nulle.part>
Message-ID: <56F2ADCC.7080302@gmail.com>

Hi,

I'm going to start by summarizing the suggestions (for where to put the 
script) that have been presented so far:

[1] in the /demo directory
[2] in /inst/SOMETHING, where Dirk lists four possible values for SOMETHING
[3] in /R , but hidden using .Rbuildignore
[4] in the Example section of a man page, protected by \dontrun{...}
[5] the same as [4], but after encapsulating the script in a function 
that could be exported.

Of these, I think I like [5] the best (and so will probably do things 
that way), followed by [1].

And I can't resist following up on to Dirk's (fortune-eligible?) comment 
that "there is a reasonable discussion in Writing R Extensions, but as 
always, you have to find it first".  Before posting, I read section 
1.1.6 (Data in packages) of the "fine manual", and couldn't find a clear 
recommendation for my situation. Given the range of responses, it seems 
that I wasn't alone....

Thanks to all,
   Kevin

On 3/22/2016 5:08 PM, Dirk Eddelbuettel wrote:
> Kevin,
>
> The inst/ directory gives a good handle to pass arbitrary directory layouts
> of your choosing through.  You just need to avoid inst/data as it would clash
> with an existing data/ directory.
>
> I think I have seen
>
>      inst/rawData
>      inst/extData                # as in 'external data'
>
> and of course
>
>      inst/scripts
>
> or
>
>      inst/tools
>
> Note that there is a reasonable discussion in Writing R Extensions, but as
> always, you have to find it first.
>
> Dirk
>


---
This email has been checked for viruses by Avast antivirus software.
https://www.avast.com/antivirus


From paulhurleyuk at gmail.com  Wed Mar 23 21:43:36 2016
From: paulhurleyuk at gmail.com (Paul Hurley)
Date: Wed, 23 Mar 2016 20:43:36 +0000
Subject: [R-pkg-devel] Is it possible to reverse engineer a package from the
 installed library directory ?
Message-ID: <CAJCz-yKvkjeehvkZ9k3_hkjGr_jEHSVmVm1Vwx5XAhym5O5puA@mail.gmail.com>

Several years ago I assembled some of my own most used code into a package,
and had that installed on my machine.  Since then I have lost the source
files, but still have the package installed in an old v2.x R installation.

I now need to use the package in my current R install, which is v3.1, and
won't let me just copy the directory across, as it complains it was build
pre v3.  Is it possible to reverse engineer a package back to R source
files so I can then rebuild it in a new package ?

Thanks

Paul.

--http://www.paulhurley.co.uk

	[[alternative HTML version deleted]]


From bbolker at gmail.com  Thu Mar 24 03:25:57 2016
From: bbolker at gmail.com (Ben Bolker)
Date: Wed, 23 Mar 2016 22:25:57 -0400
Subject: [R-pkg-devel] Is it possible to reverse engineer a package from
 the installed library directory ?
In-Reply-To: <CAJCz-yKvkjeehvkZ9k3_hkjGr_jEHSVmVm1Vwx5XAhym5O5puA@mail.gmail.com>
References: <CAJCz-yKvkjeehvkZ9k3_hkjGr_jEHSVmVm1Vwx5XAhym5O5puA@mail.gmail.com>
Message-ID: <56F35035.90504@gmail.com>


  You could take your old install and do this:

   library("your_package")
   funs <- ls(pos="package:your_package")
   dump(funs,"your_package.R")

   that wouldn't recreate documentation, NAMESPACE files, etc., but it 
would be a start.

On 16-03-23 04:43 PM, Paul Hurley wrote:
> Several years ago I assembled some of my own most used code into a package,
> and had that installed on my machine.  Since then I have lost the source
> files, but still have the package installed in an old v2.x R installation.
>
> I now need to use the package in my current R install, which is v3.1, and
> won't let me just copy the directory across, as it complains it was build
> pre v3.  Is it possible to reverse engineer a package back to R source
> files so I can then rebuild it in a new package ?
>
> Thanks
>
> Paul.
>
> --http://www.paulhurley.co.uk
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From josh.m.ulrich at gmail.com  Thu Mar 24 06:53:25 2016
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Thu, 24 Mar 2016 00:53:25 -0500
Subject: [R-pkg-devel] Is it possible to reverse engineer a package from
 the installed library directory ?
In-Reply-To: <56F35035.90504@gmail.com>
References: <CAJCz-yKvkjeehvkZ9k3_hkjGr_jEHSVmVm1Vwx5XAhym5O5puA@mail.gmail.com>
	<56F35035.90504@gmail.com>
Message-ID: <CAPPM_gRuTdvmY9RBb0RQ9_rLbcA2eMWLw_FCuBXqsk24BL=ccQ@mail.gmail.com>

On Wed, Mar 23, 2016 at 9:25 PM, Ben Bolker <bbolker at gmail.com> wrote:
>
>  You could take your old install and do this:
>
>   library("your_package")
>   funs <- ls(pos="package:your_package")
>   dump(funs,"your_package.R")
>
>   that wouldn't recreate documentation, NAMESPACE files, etc., but it would
> be a start.
>
You might be able to recreate the Rd files using the answers to this
StackOverflow question: http://stackoverflow.com/q/7493843/271616

Using the example in my answer as a starting point:
sink(file="survey.Rd")
utils:::.getHelpFile(as.character(help(survey,package="MASS")))
sink()

It might still need some formatting clean-up, but hopefully that gets
you 80-90% of the solution.

>
> On 16-03-23 04:43 PM, Paul Hurley wrote:
>>
>> Several years ago I assembled some of my own most used code into a
>> package,
>> and had that installed on my machine.  Since then I have lost the source
>> files, but still have the package installed in an old v2.x R installation.
>>
>> I now need to use the package in my current R install, which is v3.1, and
>> won't let me just copy the directory across, as it complains it was build
>> pre v3.  Is it possible to reverse engineer a package back to R source
>> files so I can then rebuild it in a new package ?
>>
>> Thanks
>>
>> Paul.
>>
>> --http://www.paulhurley.co.uk
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com
R/Finance 2016 | www.rinfinance.com


From georgi.boshnakov at manchester.ac.uk  Thu Mar 24 08:43:46 2016
From: georgi.boshnakov at manchester.ac.uk (Georgi Boshnakov)
Date: Thu, 24 Mar 2016 07:43:46 +0000
Subject: [R-pkg-devel] Is it possible to reverse engineer a package from
 the installed library directory ?
In-Reply-To: <CAPPM_gRuTdvmY9RBb0RQ9_rLbcA2eMWLw_FCuBXqsk24BL=ccQ@mail.gmail.com>
References: <CAJCz-yKvkjeehvkZ9k3_hkjGr_jEHSVmVm1Vwx5XAhym5O5puA@mail.gmail.com>
	<56F35035.90504@gmail.com>
	<CAPPM_gRuTdvmY9RBb0RQ9_rLbcA2eMWLw_FCuBXqsk24BL=ccQ@mail.gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E0179C6FDA5@MBXP01.ds.man.ac.uk>

Further to Joshua's comment, 
package "Rdpack" has a function reprompt(), which when called with one argument 
creates an Rd documentation file. It can do this for methods (S3/S4), classes and package-package if required,
e.g.

library(Rdpack)
reprompt(lm)

creates a lm.Rd in the current working directory.

reprompt() actually checks if the current documentation is up to date and updates the usage statement or adds the  items for additional arguments as needed. I use it during development.

Georgi

-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Joshua Ulrich
Sent: 24 March 2016 05:53
To: Ben Bolker
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Is it possible to reverse engineer a package from the installed library directory ?

On Wed, Mar 23, 2016 at 9:25 PM, Ben Bolker <bbolker at gmail.com> wrote:
>
>  You could take your old install and do this:
>
>   library("your_package")
>   funs <- ls(pos="package:your_package")
>   dump(funs,"your_package.R")
>
>   that wouldn't recreate documentation, NAMESPACE files, etc., but it 
> would be a start.
>
You might be able to recreate the Rd files using the answers to this StackOverflow question: http://stackoverflow.com/q/7493843/271616

Using the example in my answer as a starting point:
sink(file="survey.Rd")
utils:::.getHelpFile(as.character(help(survey,package="MASS")))
sink()

It might still need some formatting clean-up, but hopefully that gets you 80-90% of the solution.

>
> On 16-03-23 04:43 PM, Paul Hurley wrote:
>>
>> Several years ago I assembled some of my own most used code into a 
>> package, and had that installed on my machine.  Since then I have 
>> lost the source files, but still have the package installed in an old 
>> v2.x R installation.
>>
>> I now need to use the package in my current R install, which is v3.1, 
>> and won't let me just copy the directory across, as it complains it 
>> was build pre v3.  Is it possible to reverse engineer a package back 
>> to R source files so I can then rebuild it in a new package ?
>>
>> Thanks
>>
>> Paul.
>>
>> --http://www.paulhurley.co.uk
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list 
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com
R/Finance 2016 | www.rinfinance.com

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From arilamstein at gmail.com  Fri Mar 25 21:55:42 2016
From: arilamstein at gmail.com (arilamstein at gmail.com)
Date: Fri, 25 Mar 2016 13:55:42 -0700
Subject: [R-pkg-devel] =?utf-8?q?=E2=80=9Cunable_to_find_an_inherited_meth?=
	=?utf-8?q?od=E2=80=9D_error_in_choroplethr_package?=
Message-ID: <CAEO2kuJKyP+H-xT_Y9H_oa6fLF242wDiouCSLvxtXMzABKX9TQ@mail.gmail.com>

Recently the functionality in the choroplethr
<https://cran.r-project.org/web/packages/choroplethr/index.html> package
that depends on the acs
<https://cran.r-project.org/web/packages/acs/index.html> package has
stopped working. I've been able to narrow down the cause, but cannot figure
out how to fix it. Any help would be appreciated. To reproduce the error
you can type:

install.packages("choroplethr")

library(choroplethr)

?get_state_demographics

get_state_demographics()

Error in (function (classes, fdef, mtable)  :

unable to find an inherited method for function ?geography? for signature
"matrix"?

(Note: you will need to set a census API key for this example to "work".
See here
<https://cran.r-project.org/web/packages/choroplethr/vignettes/e-mapping-us-census-data.html>
for instructions).

I believe that this error was introduced by version 2.0 of the acs package,
which was just released. I suspect that choroplethr is either not importing
something that it should be importing, or acs is not exporting something
that it should be exporting. For example, the problem can be fixed by
simply loading the acs package first:

library(acs)

get_state_demographics()

<valid result>

The acs package uses both S3 and S4, which I do not have much experience
with. I have been reading Hadley's excellent chapter on Namespaces
<http://r-pkgs.had.co.nz/namespace.html>, and tweaked various import
directives in the choroplethr package (the actual code that crashes is here
<https://github.com/arilamstein/choroplethr/blob/master/R/get_state_demograhpics.R#L42>).
But I am still not sure how to fix this problem.. Any help would be
appreciated.

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Sun Mar 27 20:52:05 2016
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sun, 27 Mar 2016 20:52:05 +0200
Subject: [R-pkg-devel]
 =?utf-8?q?=E2=80=9Cunable_to_find_an_inherited_meth?=
 =?utf-8?q?od=E2=80=9D_error_in_choroplethr_package?=
In-Reply-To: <CAEO2kuJKyP+H-xT_Y9H_oa6fLF242wDiouCSLvxtXMzABKX9TQ@mail.gmail.com>
References: <CAEO2kuJKyP+H-xT_Y9H_oa6fLF242wDiouCSLvxtXMzABKX9TQ@mail.gmail.com>
Message-ID: <56F82BD5.9080809@statistik.tu-dortmund.de>

Has this been resolved now?

I cannot reproduce the problem as I get:

 > library(choroplethr)
 >
 > ?get_state_demographics
starting httpd help server ... done
 >
 > get_state_demographics()
Error in (function (classes, fdef, mtable)  :
   unable to find an inherited method for function ?geography? for 
signature ?"logical"?
In addition: Warning message:
In acs::acs.fetch(geography = state_geo, table.number = "B03002",  :
   'key' required to access Census API site for download;
   See http://www.census.gov/developers/ to request a key
   and/or use 'key=' (or run 'api.key.install()') to avoid this error.


Best,
Uwe Ligges



On 25.03.2016 21:55, arilamstein at gmail.com wrote:
> Recently the functionality in the choroplethr
> <https://cran.r-project.org/web/packages/choroplethr/index.html> package
> that depends on the acs
> <https://cran.r-project.org/web/packages/acs/index.html> package has
> stopped working. I've been able to narrow down the cause, but cannot figure
> out how to fix it. Any help would be appreciated. To reproduce the error
> you can type:
>
> install.packages("choroplethr")
>
> library(choroplethr)
>
> ?get_state_demographics
>
> get_state_demographics()
>
> Error in (function (classes, fdef, mtable)  :
>
> unable to find an inherited method for function ?geography? for signature
> "matrix"?
>
> (Note: you will need to set a census API key for this example to "work".
> See here
> <https://cran.r-project.org/web/packages/choroplethr/vignettes/e-mapping-us-census-data.html>
> for instructions).
>
> I believe that this error was introduced by version 2.0 of the acs package,
> which was just released. I suspect that choroplethr is either not importing
> something that it should be importing, or acs is not exporting something
> that it should be exporting. For example, the problem can be fixed by
> simply loading the acs package first:
>
> library(acs)
>
> get_state_demographics()
>
> <valid result>
>
> The acs package uses both S3 and S4, which I do not have much experience
> with. I have been reading Hadley's excellent chapter on Namespaces
> <http://r-pkgs.had.co.nz/namespace.html>, and tweaked various import
> directives in the choroplethr package (the actual code that crashes is here
> <https://github.com/arilamstein/choroplethr/blob/master/R/get_state_demograhpics.R#L42>).
> But I am still not sure how to fix this problem.. Any help would be
> appreciated.
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From glennmschultz at me.com  Mon Mar 28 20:09:19 2016
From: glennmschultz at me.com (Glenn Schultz)
Date: Mon, 28 Mar 2016 13:09:19 -0500
Subject: [R-pkg-devel] set generic and methods when slot is a function
Message-ID: <BD18BE68-1F4B-4ABA-9D66-7432AEE5CD95@me.com>

All,
I am creating a mortgage prepayment model package.  The idea is to create a class FRMModelFunction and each slot in the class is a function that may be use in the prepayment. So I would like to create a generic and method that will allow me to call the slot by name.  However, I think that I am missing something in my setup

If I run the below code I can do the following

Omega(Model) which returns the function

Omega <- Omega(Model) which then assigns the function and allows me to pass values and get a result from Omega(x = 1)

However I can also get a result by directly accessing the slot

Model at Omega(x=1)

What I want to do is set a generic and method so that I can do the following

Omega(x=1)

The below is close but still not what I would like to have.  Is what  I have described possible and if so what have I missed?

Glenn 


setGeneric("Omega", function(object,...) {standardGeneric("Omega")})

 setMethod("Omega", signature = "FRMModelFunction", 
           definition = function(object){object at Omega})

 setClass("FRMModelFunction",
          representation(
            Omega = "function"))

 Model <- new("FRMModelFunction",
           Omega = function(x = numeric()) {return(max(0, min(1, x)))}
           )

From kasperdanielhansen at gmail.com  Mon Mar 28 21:14:52 2016
From: kasperdanielhansen at gmail.com (Kasper Daniel Hansen)
Date: Mon, 28 Mar 2016 15:14:52 -0400
Subject: [R-pkg-devel] set generic and methods when slot is a function
In-Reply-To: <BD18BE68-1F4B-4ABA-9D66-7432AEE5CD95@me.com>
References: <BD18BE68-1F4B-4ABA-9D66-7432AEE5CD95@me.com>
Message-ID: <CAC2h7uudTRB+9L4aU2eF8s-NG=hWu0TnOgv9ddnQfVuhtorXeQ@mail.gmail.com>

This syntax
  Omega(x = 1)
seems weird.  How do you know that this call should refer back to the Model
object and not some other hypothetical Model2 object?  The code you're
defining should make something like this work
  Omega(Model)(x=1)
where you can see the direct dependence on the Model object.

(unrelated: One experience from Bioconductor, is that it is good to have
explicit constructors for S4 objects instead of using new("...").)

Best,
Kasper

On Mon, Mar 28, 2016 at 2:09 PM, Glenn Schultz <glennmschultz at me.com> wrote:

> All,
> I am creating a mortgage prepayment model package.  The idea is to create
> a class FRMModelFunction and each slot in the class is a function that may
> be use in the prepayment. So I would like to create a generic and method
> that will allow me to call the slot by name.  However, I think that I am
> missing something in my setup
>
> If I run the below code I can do the following
>
> Omega(Model) which returns the function
>
> Omega <- Omega(Model) which then assigns the function and allows me to
> pass values and get a result from Omega(x = 1)
>
> However I can also get a result by directly accessing the slot
>
> Model at Omega(x=1)
>
> What I want to do is set a generic and method so that I can do the
> following
>
> Omega(x=1)
>
> The below is close but still not what I would like to have.  Is what  I
> have described possible and if so what have I missed?
>
> Glenn
>
>
> setGeneric("Omega", function(object,...) {standardGeneric("Omega")})
>
>  setMethod("Omega", signature = "FRMModelFunction",
>            definition = function(object){object at Omega})
>
>  setClass("FRMModelFunction",
>           representation(
>             Omega = "function"))
>
>  Model <- new("FRMModelFunction",
>            Omega = function(x = numeric()) {return(max(0, min(1, x)))}
>            )
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From arilamstein at gmail.com  Mon Mar 28 22:49:23 2016
From: arilamstein at gmail.com (arilamstein at gmail.com)
Date: Mon, 28 Mar 2016 13:49:23 -0700
Subject: [R-pkg-devel]
	=?utf-8?q?=E2=80=9Cunable_to_find_an_inherited_meth?=
	=?utf-8?q?od=E2=80=9D_error_in_choroplethr_package?=
In-Reply-To: <56F82BD5.9080809@statistik.tu-dortmund.de>
References: <CAEO2kuJKyP+H-xT_Y9H_oa6fLF242wDiouCSLvxtXMzABKX9TQ@mail.gmail.com>
	<56F82BD5.9080809@statistik.tu-dortmund.de>
Message-ID: <CAEO2ku+1O74UVEfb9JuCdeXNqLAWzD6JGwhVGzt2y7qQ6Em1CA@mail.gmail.com>

Unfortunately I am still getting the same error:

install.packages(c("choroplethr", "acs"))
library(acs)
api.key.install("f8b2a6df01479981aef39577b3c4466f5a4c8274")
detach("package:acs", unload=TRUE)

library(choroplethr)
get_state_demographics()
Error in (function (classes, fdef, mtable)  :
            unable to find an inherited method for function ?geography? for
signature ?"matrix"?

Someone suggested that I import the acs class in my NAMESPACE. But even
after adding:

importClassesFrom(acs,acs)

I get the same error.


On Sun, Mar 27, 2016 at 11:52 AM, Uwe Ligges <
ligges at statistik.tu-dortmund.de> wrote:

> Has this been resolved now?
>
> I cannot reproduce the problem as I get:
>
> > library(choroplethr)
> >
> > ?get_state_demographics
> starting httpd help server ... done
> >
> > get_state_demographics()
> Error in (function (classes, fdef, mtable)  :
>   unable to find an inherited method for function ?geography? for
> signature ?"logical"?
> In addition: Warning message:
> In acs::acs.fetch(geography = state_geo, table.number = "B03002",  :
>   'key' required to access Census API site for download;
>   See http://www.census.gov/developers/ to request a key
>   and/or use 'key=' (or run 'api.key.install()') to avoid this error.
>
>
> Best,
> Uwe Ligges
>
>
>
> On 25.03.2016 21:55, arilamstein at gmail.com wrote:
>
>> Recently the functionality in the choroplethr
>> <https://cran.r-project.org/web/packages/choroplethr/index.html> package
>> that depends on the acs
>> <https://cran.r-project.org/web/packages/acs/index.html> package has
>> stopped working. I've been able to narrow down the cause, but cannot
>> figure
>> out how to fix it. Any help would be appreciated. To reproduce the error
>> you can type:
>>
>> install.packages("choroplethr")
>>
>> library(choroplethr)
>>
>> ?get_state_demographics
>>
>> get_state_demographics()
>>
>> Error in (function (classes, fdef, mtable)  :
>>
>> unable to find an inherited method for function ?geography? for signature
>> "matrix"?
>>
>> (Note: you will need to set a census API key for this example to "work".
>> See here
>> <
>> https://cran.r-project.org/web/packages/choroplethr/vignettes/e-mapping-us-census-data.html
>> >
>> for instructions).
>>
>> I believe that this error was introduced by version 2.0 of the acs
>> package,
>> which was just released. I suspect that choroplethr is either not
>> importing
>> something that it should be importing, or acs is not exporting something
>> that it should be exporting. For example, the problem can be fixed by
>> simply loading the acs package first:
>>
>> library(acs)
>>
>> get_state_demographics()
>>
>> <valid result>
>>
>> The acs package uses both S3 and S4, which I do not have much experience
>> with. I have been reading Hadley's excellent chapter on Namespaces
>> <http://r-pkgs.had.co.nz/namespace.html>, and tweaked various import
>> directives in the choroplethr package (the actual code that crashes is
>> here
>> <
>> https://github.com/arilamstein/choroplethr/blob/master/R/get_state_demograhpics.R#L42
>> >).
>> But I am still not sure how to fix this problem.. Any help would be
>> appreciated.
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Mon Mar 28 23:01:41 2016
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Mon, 28 Mar 2016 23:01:41 +0200
Subject: [R-pkg-devel]
 =?utf-8?q?=E2=80=9Cunable_to_find_an_inherited_meth?=
 =?utf-8?q?od=E2=80=9D_error_in_choroplethr_package?=
In-Reply-To: <CAEO2ku+1O74UVEfb9JuCdeXNqLAWzD6JGwhVGzt2y7qQ6Em1CA@mail.gmail.com>
References: <CAEO2kuJKyP+H-xT_Y9H_oa6fLF242wDiouCSLvxtXMzABKX9TQ@mail.gmail.com>
	<56F82BD5.9080809@statistik.tu-dortmund.de>
	<CAEO2ku+1O74UVEfb9JuCdeXNqLAWzD6JGwhVGzt2y7qQ6Em1CA@mail.gmail.com>
Message-ID: <56F99BB5.2080809@statistik.tu-dortmund.de>

I just tried your code with acs 2.0 and choroplethr 3.5.1 under R-3.3.0 
alpha and got a result rather than an error...

Are you using a different version of anything?

Best,
Uwe Ligges



On 28.03.2016 22:49, arilamstein at gmail.com wrote:
> Unfortunately I am still getting the same error:
>
> install.packages(c("choroplethr", "acs"))
> library(acs)
> api.key.install("f8b2a6df01479981aef39577b3c4466f5a4c8274")
> detach("package:acs", unload=TRUE)
>
> library(choroplethr)
> get_state_demographics()
> Error in (function (classes, fdef, mtable)  :
>              unable to find an inherited method for function ?geography?
> for signature ?"matrix"?
>
> Someone suggested that I import the acs class in my NAMESPACE. But even
> after adding:
>
> importClassesFrom(acs,acs)
>
> I get the same error.
>
>
> On Sun, Mar 27, 2016 at 11:52 AM, Uwe Ligges
> <ligges at statistik.tu-dortmund.de
> <mailto:ligges at statistik.tu-dortmund.de>> wrote:
>
>     Has this been resolved now?
>
>     I cannot reproduce the problem as I get:
>
>      > library(choroplethr)
>      >
>      > ?get_state_demographics
>     starting httpd help server ... done
>     >
>     > get_state_demographics()
>     Error in (function (classes, fdef, mtable)  :
>        unable to find an inherited method for function ?geography? for
>     signature ?"logical"?
>     In addition: Warning message:
>     In acs::acs.fetch(geography = state_geo, table.number = "B03002",  :
>        'key' required to access Census API site for download;
>        See http://www.census.gov/developers/ to request a key
>        and/or use 'key=' (or run 'api.key.install()') to avoid this error.
>
>
>     Best,
>     Uwe Ligges
>
>
>
>     On 25.03.2016 21 <tel:25.03.2016%2021>:55, arilamstein at gmail.com
>     <mailto:arilamstein at gmail.com> wrote:
>
>         Recently the functionality in the choroplethr
>         <https://cran.r-project.org/web/packages/choroplethr/index.html>
>         package
>         that depends on the acs
>         <https://cran.r-project.org/web/packages/acs/index.html> package has
>         stopped working. I've been able to narrow down the cause, but
>         cannot figure
>         out how to fix it. Any help would be appreciated. To reproduce
>         the error
>         you can type:
>
>         install.packages("choroplethr")
>
>         library(choroplethr)
>
>         ?get_state_demographics
>
>         get_state_demographics()
>
>         Error in (function (classes, fdef, mtable)  :
>
>         unable to find an inherited method for function ?geography? for
>         signature
>         "matrix"?
>
>         (Note: you will need to set a census API key for this example to
>         "work".
>         See here
>         <https://cran.r-project.org/web/packages/choroplethr/vignettes/e-mapping-us-census-data.html>
>         for instructions).
>
>         I believe that this error was introduced by version 2.0 of the
>         acs package,
>         which was just released. I suspect that choroplethr is either
>         not importing
>         something that it should be importing, or acs is not exporting
>         something
>         that it should be exporting. For example, the problem can be
>         fixed by
>         simply loading the acs package first:
>
>         library(acs)
>
>         get_state_demographics()
>
>         <valid result>
>
>         The acs package uses both S3 and S4, which I do not have much
>         experience
>         with. I have been reading Hadley's excellent chapter on Namespaces
>         <http://r-pkgs.had.co.nz/namespace.html>, and tweaked various import
>         directives in the choroplethr package (the actual code that
>         crashes is here
>         <https://github.com/arilamstein/choroplethr/blob/master/R/get_state_demograhpics.R#L42>).
>         But I am still not sure how to fix this problem.. Any help would be
>         appreciated.
>
>                  [[alternative HTML version deleted]]
>
>         ______________________________________________
>         R-package-devel at r-project.org
>         <mailto:R-package-devel at r-project.org> mailing list
>         https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>


From arilamstein at gmail.com  Mon Mar 28 23:07:15 2016
From: arilamstein at gmail.com (arilamstein at gmail.com)
Date: Mon, 28 Mar 2016 14:07:15 -0700
Subject: [R-pkg-devel]
	=?utf-8?q?=E2=80=9Cunable_to_find_an_inherited_meth?=
	=?utf-8?q?od=E2=80=9D_error_in_choroplethr_package?=
In-Reply-To: <56F99BB5.2080809@statistik.tu-dortmund.de>
References: <CAEO2kuJKyP+H-xT_Y9H_oa6fLF242wDiouCSLvxtXMzABKX9TQ@mail.gmail.com>
	<56F82BD5.9080809@statistik.tu-dortmund.de>
	<CAEO2ku+1O74UVEfb9JuCdeXNqLAWzD6JGwhVGzt2y7qQ6Em1CA@mail.gmail.com>
	<56F99BB5.2080809@statistik.tu-dortmund.de>
Message-ID: <CAEO2kuLz4=2Yw8pLKX5Ba_1AiMN70A05sdv50kSpnjVm8rDUrA@mail.gmail.com>

I am using R 3.2.4 for mac. Here is my sessionInfo():

> sessionInfo()
R version 3.2.4 (2016-03-10)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X 10.10.5 (Yosemite)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] choroplethr_3.5.1 XML_3.98-1.4      plyr_1.8.3        stringr_1.0.0

loaded via a namespace (and not attached):
 [1] Rcpp_0.12.4         RColorBrewer_1.1-2  bitops_1.0-6
 tools_3.2.4
 [5] rpart_4.1-10        gtable_0.2.0        lattice_0.20-33     png_0.1-7

 [9] WDI_2.4             DBI_0.3.1           mapproj_1.2-4
parallel_3.2.4
[13] proto_0.3-10        gridExtra_2.2.1     dplyr_0.4.3
cluster_2.0.3
[17] maps_3.1.0          RgoogleMaps_1.2.0.7 grid_3.2.4
 nnet_7.3-12
[21] R6_2.1.2            jpeg_0.1-8          survival_2.38-3
foreign_0.8-66
[25] RJSONIO_1.3-0       sp_1.1-1            ggmap_2.6.1
latticeExtra_0.6-28
[29] Formula_1.2-1       reshape2_1.4.1      ggplot2_2.1.0
magrittr_1.5
[33] Hmisc_3.17-2        scales_0.4.0        acs_2.0
splines_3.2.4
[37] assertthat_0.1      colorspace_1.2-6    geosphere_1.5-1
stringi_1.0-1
[41] acepack_1.3-3.3     RCurl_1.95-4.8      munsell_0.4.3
rjson_0.2.15
>

On Mon, Mar 28, 2016 at 2:01 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de
> wrote:

> I just tried your code with acs 2.0 and choroplethr 3.5.1 under R-3.3.0
> alpha and got a result rather than an error...
>
> Are you using a different version of anything?
>
> Best,
> Uwe Ligges
>
>
>
> On 28.03.2016 22:49, arilamstein at gmail.com wrote:
>
>> Unfortunately I am still getting the same error:
>>
>> install.packages(c("choroplethr", "acs"))
>> library(acs)
>> api.key.install("f8b2a6df01479981aef39577b3c4466f5a4c8274")
>> detach("package:acs", unload=TRUE)
>>
>> library(choroplethr)
>> get_state_demographics()
>> Error in (function (classes, fdef, mtable)  :
>>              unable to find an inherited method for function ?geography?
>> for signature ?"matrix"?
>>
>> Someone suggested that I import the acs class in my NAMESPACE. But even
>> after adding:
>>
>> importClassesFrom(acs,acs)
>>
>> I get the same error.
>>
>>
>> On Sun, Mar 27, 2016 at 11:52 AM, Uwe Ligges
>> <ligges at statistik.tu-dortmund.de
>> <mailto:ligges at statistik.tu-dortmund.de>> wrote:
>>
>>     Has this been resolved now?
>>
>>     I cannot reproduce the problem as I get:
>>
>>      > library(choroplethr)
>>      >
>>      > ?get_state_demographics
>>     starting httpd help server ... done
>>     >
>>     > get_state_demographics()
>>     Error in (function (classes, fdef, mtable)  :
>>        unable to find an inherited method for function ?geography? for
>>     signature ?"logical"?
>>     In addition: Warning message:
>>     In acs::acs.fetch(geography = state_geo, table.number = "B03002",  :
>>        'key' required to access Census API site for download;
>>        See http://www.census.gov/developers/ to request a key
>>        and/or use 'key=' (or run 'api.key.install()') to avoid this error.
>>
>>
>>     Best,
>>     Uwe Ligges
>>
>>
>>
>>     On 25.03.2016 21 <tel:25.03.2016%2021>:55, arilamstein at gmail.com
>>
>>     <mailto:arilamstein at gmail.com> wrote:
>>
>>         Recently the functionality in the choroplethr
>>         <https://cran.r-project.org/web/packages/choroplethr/index.html>
>>         package
>>         that depends on the acs
>>         <https://cran.r-project.org/web/packages/acs/index.html> package
>> has
>>         stopped working. I've been able to narrow down the cause, but
>>         cannot figure
>>         out how to fix it. Any help would be appreciated. To reproduce
>>         the error
>>         you can type:
>>
>>         install.packages("choroplethr")
>>
>>         library(choroplethr)
>>
>>         ?get_state_demographics
>>
>>         get_state_demographics()
>>
>>         Error in (function (classes, fdef, mtable)  :
>>
>>         unable to find an inherited method for function ?geography? for
>>         signature
>>         "matrix"?
>>
>>         (Note: you will need to set a census API key for this example to
>>         "work".
>>         See here
>>         <
>> https://cran.r-project.org/web/packages/choroplethr/vignettes/e-mapping-us-census-data.html
>> >
>>         for instructions).
>>
>>         I believe that this error was introduced by version 2.0 of the
>>         acs package,
>>         which was just released. I suspect that choroplethr is either
>>         not importing
>>         something that it should be importing, or acs is not exporting
>>         something
>>         that it should be exporting. For example, the problem can be
>>         fixed by
>>         simply loading the acs package first:
>>
>>         library(acs)
>>
>>         get_state_demographics()
>>
>>         <valid result>
>>
>>         The acs package uses both S3 and S4, which I do not have much
>>         experience
>>         with. I have been reading Hadley's excellent chapter on Namespaces
>>         <http://r-pkgs.had.co.nz/namespace.html>, and tweaked various
>> import
>>         directives in the choroplethr package (the actual code that
>>         crashes is here
>>         <
>> https://github.com/arilamstein/choroplethr/blob/master/R/get_state_demograhpics.R#L42
>> >).
>>         But I am still not sure how to fix this problem.. Any help would
>> be
>>         appreciated.
>>
>>                  [[alternative HTML version deleted]]
>>
>>         ______________________________________________
>>         R-package-devel at r-project.org
>>         <mailto:R-package-devel at r-project.org> mailing list
>>         https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>
>>

	[[alternative HTML version deleted]]


From glennmschultz at me.com  Tue Mar 29 01:27:13 2016
From: glennmschultz at me.com (Glenn Schultz)
Date: Mon, 28 Mar 2016 18:27:13 -0500
Subject: [R-pkg-devel] set generic and methods when slot is a function
In-Reply-To: <CAC2h7uudTRB+9L4aU2eF8s-NG=hWu0TnOgv9ddnQfVuhtorXeQ@mail.gmail.com>
References: <BD18BE68-1F4B-4ABA-9D66-7432AEE5CD95@me.com>
	<CAC2h7uudTRB+9L4aU2eF8s-NG=hWu0TnOgv9ddnQfVuhtorXeQ@mail.gmail.com>
Message-ID: <EED74E89-AE66-49C8-84DD-59C538ABBE91@me.com>

Kasper,

Thanks! I that was the clue I was looking for.  Simple change to the code makes it work perfectly as you describe.  I also have constructor function for Model beyond the minimal example.  I also like you reference to Bioconductor as that is the model I am trying to follow.

Glenn

 setGeneric("Omega", function(object) {standardGeneric("Omega")})
  
  setMethod("Omega", signature = "FRMModelFunction", 
            definition = function(object){object at Omega})
  
  setClass("FRMModelFunction",
           representation(
             Omega = "function"))

  Model <- new("FRMModelFunction",
            Omega = function(x = numeric()) {return(max(0, min(1, x)))}
            )
  


> On Mar 28, 2016, at 2:14 PM, Kasper Daniel Hansen <kasperdanielhansen at gmail.com> wrote:
> 
> This syntax 
>   Omega(x = 1)
> seems weird.  How do you know that this call should refer back to the Model object and not some other hypothetical Model2 object?  The code you're defining should make something like this work
>   Omega(Model)(x=1)
> where you can see the direct dependence on the Model object.
> 
> (unrelated: One experience from Bioconductor, is that it is good to have explicit constructors for S4 objects instead of using new("...").)
> 
> Best,
> Kasper
> 
> On Mon, Mar 28, 2016 at 2:09 PM, Glenn Schultz <glennmschultz at me.com <mailto:glennmschultz at me.com>> wrote:
> All,
> I am creating a mortgage prepayment model package.  The idea is to create a class FRMModelFunction and each slot in the class is a function that may be use in the prepayment. So I would like to create a generic and method that will allow me to call the slot by name.  However, I think that I am missing something in my setup
> 
> If I run the below code I can do the following
> 
> Omega(Model) which returns the function
> 
> Omega <- Omega(Model) which then assigns the function and allows me to pass values and get a result from Omega(x = 1)
> 
> However I can also get a result by directly accessing the slot
> 
> Model at Omega(x=1)
> 
> What I want to do is set a generic and method so that I can do the following
> 
> Omega(x=1)
> 
> The below is close but still not what I would like to have.  Is what  I have described possible and if so what have I missed?
> 
> Glenn
> 
> 
> setGeneric("Omega", function(object,...) {standardGeneric("Omega")})
> 
>  setMethod("Omega", signature = "FRMModelFunction",
>            definition = function(object){object at Omega})
> 
>  setClass("FRMModelFunction",
>           representation(
>             Omega = "function"))
> 
>  Model <- new("FRMModelFunction",
>            Omega = function(x = numeric()) {return(max(0, min(1, x)))}
>            )
> ______________________________________________
> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> 


	[[alternative HTML version deleted]]


From iago at mosqueira.eu  Wed Mar 30 14:03:33 2016
From: iago at mosqueira.eu (Iago Mosqueira)
Date: Wed, 30 Mar 2016 14:03:33 +0200
Subject: [R-pkg-devel] Scripts to generate data objects
Message-ID: <153c7684651.c9ba4e4c105108.251294087408673004@mosqueira.eu>

Hello,

What is the best way of keeping R scripts that are used to generate the data files in the data/ folder? These are not meant to be available to the user, but I would like to keep them in the package itself. Right now I am storing them inside data/, for example PKG/data/datasetone.R to create PKG/data/dataseton.RData, and then adding those R files to .Rbuildignore.

Are there any other sensible ways of doing this?

Thanks,


Iago






	[[alternative HTML version deleted]]


From edd at debian.org  Wed Mar 30 14:23:19 2016
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 30 Mar 2016 07:23:19 -0500
Subject: [R-pkg-devel] Scripts to generate data objects
In-Reply-To: <153c7684651.c9ba4e4c105108.251294087408673004@mosqueira.eu>
References: <153c7684651.c9ba4e4c105108.251294087408673004@mosqueira.eu>
Message-ID: <22267.50487.877949.695045@max.nulle.part>


On 30 March 2016 at 14:03, Iago Mosqueira wrote:
| What is the best way of keeping R scripts that are used to generate the data files in the data/ folder? These are not meant to be available to the user, but I would like to keep them in the package itself. Right now I am storing them inside data/, for example PKG/data/datasetone.R to create PKG/data/dataseton.RData, and then adding those R files to .Rbuildignore.
| 
| Are there any other sensible ways of doing this?

For gunsales we keep it simple:
    https://github.com/NYTimes/gunsales/blob/master/R/data.R

It is both a convenience for us (when more data gets released) and
documentation for the user.  

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From arilamstein at gmail.com  Wed Mar 30 18:55:28 2016
From: arilamstein at gmail.com (arilamstein at gmail.com)
Date: Wed, 30 Mar 2016 09:55:28 -0700
Subject: [R-pkg-devel]
	=?utf-8?q?=E2=80=9Cunable_to_find_an_inherited_meth?=
	=?utf-8?q?od=E2=80=9D_error_in_choroplethr_package?=
In-Reply-To: <CAEO2kuLz4=2Yw8pLKX5Ba_1AiMN70A05sdv50kSpnjVm8rDUrA@mail.gmail.com>
References: <CAEO2kuJKyP+H-xT_Y9H_oa6fLF242wDiouCSLvxtXMzABKX9TQ@mail.gmail.com>
	<56F82BD5.9080809@statistik.tu-dortmund.de>
	<CAEO2ku+1O74UVEfb9JuCdeXNqLAWzD6JGwhVGzt2y7qQ6Em1CA@mail.gmail.com>
	<56F99BB5.2080809@statistik.tu-dortmund.de>
	<CAEO2kuLz4=2Yw8pLKX5Ba_1AiMN70A05sdv50kSpnjVm8rDUrA@mail.gmail.com>
Message-ID: <CAEO2kuJSBRK2E=UnqSRLbGwVVFNk3_Z=3XrbdNiZGnxhVEJdCA@mail.gmail.com>

Uwe,

Based on what you report, it seems at least possible that the bug is
related to some changes in R between versions.

I just submitted an updated version of the package to CRAN that moves the
acs package from "import" to "depends'. This solves the problem because it
forces users to load the acs package whenever they use the choroplethr
package. This is the solution that I was hoping to avoid (it seems like
overkill to me), but it will at least allow me to distribute a version of
my package where all the functions work.

Ari

On Mon, Mar 28, 2016 at 2:07 PM, <arilamstein at gmail.com> wrote:

> I am using R 3.2.4 for mac. Here is my sessionInfo():
>
> > sessionInfo()
> R version 3.2.4 (2016-03-10)
> Platform: x86_64-apple-darwin13.4.0 (64-bit)
> Running under: OS X 10.10.5 (Yosemite)
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] choroplethr_3.5.1 XML_3.98-1.4      plyr_1.8.3        stringr_1.0.0
>
> loaded via a namespace (and not attached):
>  [1] Rcpp_0.12.4         RColorBrewer_1.1-2  bitops_1.0-6
>  tools_3.2.4
>  [5] rpart_4.1-10        gtable_0.2.0        lattice_0.20-33     png_0.1-7
>
>  [9] WDI_2.4             DBI_0.3.1           mapproj_1.2-4
> parallel_3.2.4
> [13] proto_0.3-10        gridExtra_2.2.1     dplyr_0.4.3
> cluster_2.0.3
> [17] maps_3.1.0          RgoogleMaps_1.2.0.7 grid_3.2.4
>  nnet_7.3-12
> [21] R6_2.1.2            jpeg_0.1-8          survival_2.38-3
> foreign_0.8-66
> [25] RJSONIO_1.3-0       sp_1.1-1            ggmap_2.6.1
> latticeExtra_0.6-28
> [29] Formula_1.2-1       reshape2_1.4.1      ggplot2_2.1.0
> magrittr_1.5
> [33] Hmisc_3.17-2        scales_0.4.0        acs_2.0
> splines_3.2.4
> [37] assertthat_0.1      colorspace_1.2-6    geosphere_1.5-1
> stringi_1.0-1
> [41] acepack_1.3-3.3     RCurl_1.95-4.8      munsell_0.4.3
> rjson_0.2.15
> >
>
> On Mon, Mar 28, 2016 at 2:01 PM, Uwe Ligges <
> ligges at statistik.tu-dortmund.de> wrote:
>
>> I just tried your code with acs 2.0 and choroplethr 3.5.1 under R-3.3.0
>> alpha and got a result rather than an error...
>>
>> Are you using a different version of anything?
>>
>> Best,
>> Uwe Ligges
>>
>>
>>
>> On 28.03.2016 22:49, arilamstein at gmail.com wrote:
>>
>>> Unfortunately I am still getting the same error:
>>>
>>> install.packages(c("choroplethr", "acs"))
>>> library(acs)
>>> api.key.install("f8b2a6df01479981aef39577b3c4466f5a4c8274")
>>> detach("package:acs", unload=TRUE)
>>>
>>> library(choroplethr)
>>> get_state_demographics()
>>> Error in (function (classes, fdef, mtable)  :
>>>              unable to find an inherited method for function ?geography?
>>> for signature ?"matrix"?
>>>
>>> Someone suggested that I import the acs class in my NAMESPACE. But even
>>> after adding:
>>>
>>> importClassesFrom(acs,acs)
>>>
>>> I get the same error.
>>>
>>>
>>> On Sun, Mar 27, 2016 at 11:52 AM, Uwe Ligges
>>> <ligges at statistik.tu-dortmund.de
>>> <mailto:ligges at statistik.tu-dortmund.de>> wrote:
>>>
>>>     Has this been resolved now?
>>>
>>>     I cannot reproduce the problem as I get:
>>>
>>>      > library(choroplethr)
>>>      >
>>>      > ?get_state_demographics
>>>     starting httpd help server ... done
>>>     >
>>>     > get_state_demographics()
>>>     Error in (function (classes, fdef, mtable)  :
>>>        unable to find an inherited method for function ?geography? for
>>>     signature ?"logical"?
>>>     In addition: Warning message:
>>>     In acs::acs.fetch(geography = state_geo, table.number = "B03002",  :
>>>        'key' required to access Census API site for download;
>>>        See http://www.census.gov/developers/ to request a key
>>>        and/or use 'key=' (or run 'api.key.install()') to avoid this
>>> error.
>>>
>>>
>>>     Best,
>>>     Uwe Ligges
>>>
>>>
>>>
>>>     On 25.03.2016 21 <tel:25.03.2016%2021>:55, arilamstein at gmail.com
>>>
>>>     <mailto:arilamstein at gmail.com> wrote:
>>>
>>>         Recently the functionality in the choroplethr
>>>         <https://cran.r-project.org/web/packages/choroplethr/index.html>
>>>         package
>>>         that depends on the acs
>>>         <https://cran.r-project.org/web/packages/acs/index.html>
>>> package has
>>>         stopped working. I've been able to narrow down the cause, but
>>>         cannot figure
>>>         out how to fix it. Any help would be appreciated. To reproduce
>>>         the error
>>>         you can type:
>>>
>>>         install.packages("choroplethr")
>>>
>>>         library(choroplethr)
>>>
>>>         ?get_state_demographics
>>>
>>>         get_state_demographics()
>>>
>>>         Error in (function (classes, fdef, mtable)  :
>>>
>>>         unable to find an inherited method for function ?geography? for
>>>         signature
>>>         "matrix"?
>>>
>>>         (Note: you will need to set a census API key for this example to
>>>         "work".
>>>         See here
>>>         <
>>> https://cran.r-project.org/web/packages/choroplethr/vignettes/e-mapping-us-census-data.html
>>> >
>>>         for instructions).
>>>
>>>         I believe that this error was introduced by version 2.0 of the
>>>         acs package,
>>>         which was just released. I suspect that choroplethr is either
>>>         not importing
>>>         something that it should be importing, or acs is not exporting
>>>         something
>>>         that it should be exporting. For example, the problem can be
>>>         fixed by
>>>         simply loading the acs package first:
>>>
>>>         library(acs)
>>>
>>>         get_state_demographics()
>>>
>>>         <valid result>
>>>
>>>         The acs package uses both S3 and S4, which I do not have much
>>>         experience
>>>         with. I have been reading Hadley's excellent chapter on
>>> Namespaces
>>>         <http://r-pkgs.had.co.nz/namespace.html>, and tweaked various
>>> import
>>>         directives in the choroplethr package (the actual code that
>>>         crashes is here
>>>         <
>>> https://github.com/arilamstein/choroplethr/blob/master/R/get_state_demograhpics.R#L42
>>> >).
>>>         But I am still not sure how to fix this problem.. Any help would
>>> be
>>>         appreciated.
>>>
>>>                  [[alternative HTML version deleted]]
>>>
>>>         ______________________________________________
>>>         R-package-devel at r-project.org
>>>         <mailto:R-package-devel at r-project.org> mailing list
>>>         https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>>
>>>
>

	[[alternative HTML version deleted]]


From kirill.mueller at ivt.baug.ethz.ch  Thu Mar 31 14:14:19 2016
From: kirill.mueller at ivt.baug.ethz.ch (=?UTF-8?Q?Kirill_M=c3=bcller?=)
Date: Thu, 31 Mar 2016 14:14:19 +0200
Subject: [R-pkg-devel] Scripts to generate data objects
In-Reply-To: <153c7684651.c9ba4e4c105108.251294087408673004@mosqueira.eu>
References: <153c7684651.c9ba4e4c105108.251294087408673004@mosqueira.eu>
Message-ID: <56FD149B.7080106@ivt.baug.ethz.ch>

The devtools::use_data_raw() function creates a "data-raw" directory for 
this purpose, and adds it to .Rbuildignore so that it's not included in 
the built package. Your scripts can then write the data to the proper 
place using devtools::use_data().


-Kirill


On 30.03.2016 14:03, Iago Mosqueira wrote:
> Hello,
>
> What is the best way of keeping R scripts that are used to generate the data files in the data/ folder? These are not meant to be available to the user, but I would like to keep them in the package itself. Right now I am storing them inside data/, for example PKG/data/datasetone.R to create PKG/data/dataseton.RData, and then adding those R files to .Rbuildignore.
>
> Are there any other sensible ways of doing this?
>
> Thanks,
>
>
> Iago
>
>
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd at debian.org  Thu Mar 31 14:30:49 2016
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 31 Mar 2016 07:30:49 -0500
Subject: [R-pkg-devel] Scripts to generate data objects
In-Reply-To: <56FD149B.7080106@ivt.baug.ethz.ch>
References: <153c7684651.c9ba4e4c105108.251294087408673004@mosqueira.eu>
	<56FD149B.7080106@ivt.baug.ethz.ch>
Message-ID: <22269.6265.540598.734326@max.nulle.part>


On 31 March 2016 at 14:14, Kirill M?ller wrote:
| The devtools::use_data_raw() function

But the question was about the best way ;-)   <ducks>

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


