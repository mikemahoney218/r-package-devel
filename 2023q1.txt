From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Mon Jan  2 19:20:11 2023
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 2 Jan 2023 12:20:11 -0600
Subject: [R-pkg-devel] Current recommendations re. GitHub Action?
Message-ID: <869a200d-ed9a-232e-795e-e459849ce164@effectivedefense.org>

Hello, All:


	  What are current recommendations for GitHub Action?


	  My most recent change to "sos" generated "Failed to get R" for 
ubuntu-latest (release, devel, and oldrel-1).


https://github.com/sbgraves237/sos/actions/runs/3820307473/jobs/6498527786


	  I would happily rtfm if I only knew which fmtr.


	  Thanks,
	  Spencer Graves


From zk@mv@r @end|ng |rom gm@||@com  Mon Jan  2 19:34:41 2023
From: zk@mv@r @end|ng |rom gm@||@com (Zhian Kamvar)
Date: Mon, 2 Jan 2023 10:34:41 -0800
Subject: [R-pkg-devel] Current recommendations re. GitHub Action?
In-Reply-To: <869a200d-ed9a-232e-795e-e459849ce164@effectivedefense.org>
References: <869a200d-ed9a-232e-795e-e459849ce164@effectivedefense.org>
Message-ID: <CAPsXksJ=MPS=979NnD4hJGeg5hDk80JF-KPhYoMtDv64ZKxXWw@mail.gmail.com>

This warning says to update to v2 of the action from r-lib:

Warning: r-lib/actions/setup-r at v1 is deprecated. Please update your
> workflow to use the 'v2' version. Also look at the examples at
> https://github.com/r-lib/actions/tree/v2/examples because '@v2' workflows
> are much simpler than 'v1' workflows.


We ran into a similar problem and switching to v2 did the trick.

Best,
Zhian

On Mon, Jan 2, 2023 at 10:20 AM Spencer Graves <
spencer.graves at effectivedefense.org> wrote:

> Hello, All:
>
>
>           What are current recommendations for GitHub Action?
>
>
>           My most recent change to "sos" generated "Failed to get R" for
> ubuntu-latest (release, devel, and oldrel-1).
>
>
> https://github.com/sbgraves237/sos/actions/runs/3820307473/jobs/6498527786
>
>
>           I would happily rtfm if I only knew which fmtr.
>
>
>           Thanks,
>           Spencer Graves
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Mon Jan  2 19:38:16 2023
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 2 Jan 2023 12:38:16 -0600
Subject: [R-pkg-devel] Current recommendations re. GitHub Action?
In-Reply-To: <869a200d-ed9a-232e-795e-e459849ce164@effectivedefense.org>
References: <869a200d-ed9a-232e-795e-e459849ce164@effectivedefense.org>
Message-ID: <25523.9368.854032.549309@rob.eddelbuettel.com>


As the error is common against your _all three_ of your Ubuntu runs, you
could consider the possibility that the events are correlated.  Most often it
simply means a (temporary, usually) network or server outage.  I would wait,
and then relaunch (which these days you can do just for the failed jobs).

It is also worth paying attention to warnings such as

   Warning: r-lib/actions/setup-r at v1 is deprecated. Please update your
   workflow to use the 'v2' version. Also look at the examples at
   https://github.com/r-lib/actions/tree/v2/examples because '@v2' workflows
   are much simpler than 'v1' workflows.

Hth,  Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue Jan  3 02:18:33 2023
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 2 Jan 2023 19:18:33 -0600
Subject: [R-pkg-devel] Current recommendations re. GitHub Action?
In-Reply-To: <25523.9368.854032.549309@rob.eddelbuettel.com>
References: <869a200d-ed9a-232e-795e-e459849ce164@effectivedefense.org>
 <25523.9368.854032.549309@rob.eddelbuettel.com>
Message-ID: <b97fe385-c884-1365-3ab2-d86a293d9a27@effectivedefense.org>



On 1/2/23 12:38 PM, Dirk Eddelbuettel wrote:
> 
> As the error is common against your _all three_ of your Ubuntu runs, you
> could consider the possibility that the events are correlated.  Most often it
> simply means a (temporary, usually) network or server outage.  I would wait,
> and then relaunch (which these days you can do just for the failed jobs).
> 
> It is also worth paying attention to warnings such as
> 
>     Warning: r-lib/actions/setup-r at v1 is deprecated. Please update your
>     workflow to use the 'v2' version. Also look at the examples at
>     https://github.com/r-lib/actions/tree/v2/examples because '@v2' workflows
>     are much simpler than 'v1' workflows.


	  Thanks to Zhian Kamvar and Dirk Eddelbuettel for encouraging me to 
look at the warning.


	  I replaced a few lined of my "R-CMD-check.yaml" file with the the 
"v3" and "v2" versions in the example in 
"https://github.com/r-lib/actions/tree/v2/examples" and deleted 
subsequent lines that I didn't understand, and I got an instant failure: 
  It didn't run even one of the 5 tests.  Then I did "git revert" with 
the version number from GitHub and changed several lines to match the 
example with the succeeding yaml code.  GitHub Action ran and failed on 
all 5 platforms.  I did "git revert" with that and changed 
"r-lib/actions/setup-r at v1" to "r-lib/actions/setup-r at v2".  With that, 
R-release ran successfully on Unbuntu as well as Windows and macOS.


	  However, Ubuntu failed with devel and oldrel1, complaining, "there is 
no package called ?rcmdcheck?".


	  See:


https://github.com/sbgraves237/sos


	  Suggestions?
	  Thanks,
	  Spencer Graves

> 
> Hth,  Dirk
>


