From Bernd@Mueller @ending from zbmed@de  Mon Oct  1 14:39:29 2018
From: Bernd@Mueller @ending from zbmed@de (=?Windows-1252?Q?M=FCller=2C_Bernd?=)
Date: Mon, 1 Oct 2018 12:39:29 +0000
Subject: [R-pkg-devel] R package submission: does not pass the incoming
 checks automatically, 
Message-ID: <dc5c759d70984fa198054a01fd0cbf4c@zbmmx12.zbmed.de>

Dear Sir or Madam,

On Friday, I submitted my packae epos_0.1.0 via the web submission system https://cran.r-project.org/submit.html without any further errors, warnings, and notes except this one:

* checking CRAN incoming feasibility ... NOTE
Maintainer: ?Bernd Mueller <bernd.mueller at zbmed.de>?

I don't know how to resolve this note. Previously I used the German special charater "?" in my name. Then, I tried again with "ue" instead of "?". But somehow, I am stucked at this point becaause I don't know how to proceed any further. The log files can be found here:

https://win-builder.r-project.org/incoming_pretest/epos_0.1.0_20180928_204638/Windows/00check.log

and here:

https://win-builder.r-project.org/incoming_pretest/epos_0.1.0_20180928_204638/Debian/00check.log

Please assist me in this case about my R-package submission.

Kind regards,

Bernd M?ller

From @@r@h@go@lee @ending from gm@il@com  Mon Oct  1 14:46:52 2018
From: @@r@h@go@lee @ending from gm@il@com (Sarah Goslee)
Date: Mon, 1 Oct 2018 08:46:52 -0400
Subject: [R-pkg-devel] R package submission: does not pass the incoming
 checks automatically, 
In-Reply-To: <dc5c759d70984fa198054a01fd0cbf4c@zbmmx12.zbmed.de>
References: <dc5c759d70984fa198054a01fd0cbf4c@zbmmx12.zbmed.de>
Message-ID: <CAM_vjuk_fXsvBdaFX9XRz=-=htbmHyQBPp1JH35FDhAr3y2GMg@mail.gmail.com>

It's normal and expected, and nothing to worry about. It's a NOTE to ensure
that the package comes from the designated maintainer.

See for instance:
https://stackoverflow.com/questions/23829978/checking-cran-incoming-feasibility-note-maintainer

Sarah

On Mon, Oct 1, 2018 at 8:45 AM M?ller, Bernd <Bernd.Mueller at zbmed.de> wrote:

> Dear Sir or Madam,
>
> On Friday, I submitted my packae epos_0.1.0 via the web submission system
> https://cran.r-project.org/submit.html without any further errors,
> warnings, and notes except this one:
>
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?Bernd Mueller <bernd.mueller at zbmed.de>?
>
> I don't know how to resolve this note. Previously I used the German
> special charater "?" in my name. Then, I tried again with "ue" instead of
> "?". But somehow, I am stucked at this point becaause I don't know how to
> proceed any further. The log files can be found here:
>
>
> https://win-builder.r-project.org/incoming_pretest/epos_0.1.0_20180928_204638/Windows/00check.log
>
> and here:
>
>
> https://win-builder.r-project.org/incoming_pretest/epos_0.1.0_20180928_204638/Debian/00check.log
>
> Please assist me in this case about my R-package submission.
>
> Kind regards,
>
> Bernd M?ller
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From r@lf@@tubner @ending from d@q@n@@com  Mon Oct  1 14:48:08 2018
From: r@lf@@tubner @ending from d@q@n@@com (Ralf Stubner)
Date: Mon, 1 Oct 2018 14:48:08 +0200
Subject: [R-pkg-devel] R package submission: does not pass the incoming
 checks automatically, 
In-Reply-To: <dc5c759d70984fa198054a01fd0cbf4c@zbmmx12.zbmed.de>
References: <dc5c759d70984fa198054a01fd0cbf4c@zbmmx12.zbmed.de>
Message-ID: <bd468bf6-85b4-9f0a-1ad4-3d82429a2ad0@daqana.com>

Hi Bernd,

On 10/1/18 2:39 PM, M?ller, Bernd wrote:
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?Bernd Mueller <bernd.mueller at zbmed.de>?

This NOTE is expected for a new package. It acts as a reminder to THE
CRAN team to look at the package manually.

Greetings
Ralf

-- 
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966 P
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Prof. Dr. Dr. Karl-Kuno Kunze


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20181001/4d3bdfd2/attachment.sig>

From iuc@r @ending from fedor@project@org  Mon Oct  1 14:51:02 2018
From: iuc@r @ending from fedor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Mon, 1 Oct 2018 14:51:02 +0200
Subject: [R-pkg-devel] R package submission: does not pass the incoming
 checks automatically, 
In-Reply-To: <dc5c759d70984fa198054a01fd0cbf4c@zbmmx12.zbmed.de>
References: <dc5c759d70984fa198054a01fd0cbf4c@zbmmx12.zbmed.de>
Message-ID: <CALEXWq1Lc6YXUxM16b9XHqjfKrxtsyidYnGNeyGLM4s09J8uGA@mail.gmail.com>

El lun., 1 oct. 2018 a las 14:45, M?ller, Bernd
(<Bernd.Mueller at zbmed.de>) escribi?:
>
> Dear Sir or Madam,
>
> On Friday, I submitted my packae epos_0.1.0 via the web submission system https://cran.r-project.org/submit.html without any further errors, warnings, and notes except this one:
>
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?Bernd Mueller <bernd.mueller at zbmed.de>?

That's ok, this is a NOTE for CRAN maintainers. Your package will be
manually inspected soon.

I?aki

>
> I don't know how to resolve this note. Previously I used the German special charater "?" in my name. Then, I tried again with "ue" instead of "?". But somehow, I am stucked at this point becaause I don't know how to proceed any further. The log files can be found here:
>
> https://win-builder.r-project.org/incoming_pretest/epos_0.1.0_20180928_204638/Windows/00check.log
>
> and here:
>
> https://win-builder.r-project.org/incoming_pretest/epos_0.1.0_20180928_204638/Debian/00check.log
>
> Please assist me in this case about my R-package submission.
>
> Kind regards,
>
> Bernd M?ller
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From bbolker @ending from gm@il@com  Mon Oct  1 14:52:53 2018
From: bbolker @ending from gm@il@com (Ben Bolker)
Date: Mon, 1 Oct 2018 08:52:53 -0400
Subject: [R-pkg-devel] R package submission: does not pass the incoming
 checks automatically, 
In-Reply-To: <dc5c759d70984fa198054a01fd0cbf4c@zbmmx12.zbmed.de>
References: <dc5c759d70984fa198054a01fd0cbf4c@zbmmx12.zbmed.de>
Message-ID: <59ff086e-4fd7-6464-9875-29759c7d1bd6@gmail.com>


  From the horse's mouth, via

https://stackoverflow.com/questions/23829978/checking-cran-incoming-feasibility-note-maintainer
:

> According to CRAN Maintainer Uwe Ligges,

    This is just a note that reminds CRAN maintainers to check that the
submission comes actually from his maintainer and not anybody else.

> Thus, it is safe to ignore such a message.

  cheers
    Ben Bolker



On 2018-10-01 08:39 AM, M?ller, Bernd wrote:
> Dear Sir or Madam,
> 
> On Friday, I submitted my packae epos_0.1.0 via the web submission system https://cran.r-project.org/submit.html without any further errors, warnings, and notes except this one:
> 
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?Bernd Mueller <bernd.mueller at zbmed.de>?
> 
> I don't know how to resolve this note. Previously I used the German special charater "?" in my name. Then, I tried again with "ue" instead of "?". But somehow, I am stucked at this point becaause I don't know how to proceed any further. The log files can be found here:
> 
> https://win-builder.r-project.org/incoming_pretest/epos_0.1.0_20180928_204638/Windows/00check.log
> 
> and here:
> 
> https://win-builder.r-project.org/incoming_pretest/epos_0.1.0_20180928_204638/Debian/00check.log
> 
> Please assist me in this case about my R-package submission.
> 
> Kind regards,
> 
> Bernd M?ller
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From kevinu@hey @ending from gm@il@com  Mon Oct  1 18:43:06 2018
From: kevinu@hey @ending from gm@il@com (Kevin Ushey)
Date: Mon, 1 Oct 2018 09:43:06 -0700
Subject: [R-pkg-devel] Notes from rchk on hdf5r package
In-Reply-To: <CAFDswJtDbNO8=aawF4c1D+7rnmtC_PMUcc18hi+nCVxb4_qq4g@mail.gmail.com>
References: <CAFDswJtDbNO8=aawF4c1D+7rnmtC_PMUcc18hi+nCVxb4_qq4g@mail.gmail.com>
Message-ID: <CAJXgQP1yveUMNs9_-2egPOEU6=kBbJ_jKPNZ8MCbUgrgPe1j6w@mail.gmail.com>

Using this line of code as an example:

    SEXP hdf5r_ns = PROTECT(eval(lang2(install("getNamespace"),
mkString("hdf5r")), R_GlobalEnv));

The issue is fairly nuanced. There are a few main things to note
before we can understand the issue:

    1. The order of evaluation of arguments in C is unspecified, and
so arguments might be evaluated in any order depending on what the
compiler decides to do,
    2. `mkString()`, like other R APIs, creates an unprotected vector,
    3. `install()` can evaluate, if the symbol "getNamespace" has not
yet been interned into R's symbol table.

That implies that the following could potentially happen:

    1. First, an (unprotected!) R object is created by 'mkString("hdf5r")',
    2. Next, the invocation of `install("getNamespace")` causes an
allocation in R,
    3. That allocation triggers the garbage collector,
    4. The string created in 1. is erroneously collected.

While normally the SEXP created by `mkString()` would implicitly be
protected because it lives within the language object created by
`lang2()`, this doesn't happen in time since `install()` is evaluated
before `lang2()`.

So your intuition is correct: you should protect the result of
`mkString()` before putting it into the list.

For the second case:

    eval(lang3(install("set_ref.H5R"), result, _Robj), hdf5r_ns);

`eval()` does not protect its arguments, and `lang3()` creates an
unprotected SEXP. This implies it could be garbage collected during
execution. This would imply that calls like `sys.calls()`, which
attempt to inspect the set of calls, could break (as the SEXP used for
evaluation of that call has since been cleaned up).

In other words, you should protect language objects before evaluating them.

Best,
Kevin

On Sun, Sep 30, 2018 at 9:10 AM Holger Hoefling <hhoeflin at gmail.com> wrote:
>
> Hi all,
>
> I have been submitting a bug-fix version of a package and was alerted
> to some notes that rchk brought up for it.
>
> A link to the notes
>
> https://raw.githubusercontent.com/kalibera/cran-checks/master/rchk/results/hdf5r.out
>
> and to the version of the code the package refers to
>
> https://github.com/cran/hdf5r/blob/master/src/convert.c
>
>
> To be more specific:
>
> The errors are more specific about usage of Rf_lang2 and Rf_lang1. I
> am not very familiar with them and would appreciate some guidance on
> how to fix.
>
> Example
>
> Suspicious call (two or more unprotected arguments) to Rf_lang2 at
> H5ToR_Post_REFERENCE hdf5r/src/convert.c:1140
>
> Code: SEXP hdf5r_ns = PROTECT(eval(lang2(install("getNamespace"), mkString("
> hdf5r")), R_GlobalEnv));
>
> I assume this can be fixed by wrapping the "install" and "mkString" in
> an additional PROTECT? Is this what it is complaining about?
>
>
> The other:
>
> calling allocating function Rf_eval with argument allocated using
> Rf_lang3(S:set_ref.H5R,?,?) hdf5r/src/convert.c:1141
>
> Code:
>
> eval(lang3(install("set_ref.H5R"), result, _Robj), hdf5r_ns);
>
> I remember cobbling these parts together off of the internet and don't
> understand enough about the internals of R functions to know what is
> going wrong and how to fix.
>
>
> Any help anyone can offer would be appreciated.
>
>
> Thank you!
>
>
> Holger
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From wewol@ki @ending from gm@il@com  Wed Oct  3 20:23:46 2018
From: wewol@ki @ending from gm@il@com (Witold E Wolski)
Date: Wed, 3 Oct 2018 20:23:46 +0200
Subject: [R-pkg-devel] Fwd: unable to load shared object
In-Reply-To: <CAAjnpdg3+ZASotVACBNAwj-vHuptEEUHAvHb5uJ0yhtVxaXMHw@mail.gmail.com>
References: <CAAjnpdg3+ZASotVACBNAwj-vHuptEEUHAvHb5uJ0yhtVxaXMHw@mail.gmail.com>
Message-ID: <CAAjnpdg6UjNdeEQY9xKwSw67+hkfsSJkupzfeZHvOa_A+gZ_hA@mail.gmail.com>

Hello,

I am trying to install a package with some src files on windows (linux
build works smooth).

The sources seem to build (against MSYS2 libraries), there is an *.dll in
the src folder but than the installation process fails with:

```
** testing if installed package can be loaded
Error: package or namespace load failed for 'grpc' in inDL(x,
as.logical(local), as.logical(now), ...):
 unable to load shared object
'C:/Users/wewol/OneDrive/Documents/R/win-library/3.5/grpc/libs/x64/grpc.dll':
  LoadLibrary failure:  The specified module could not be found.

Error: loading failed
Execution halted
```

Help would be greatly appreciated.

The packages sources are here:
https://github.com/wolski/grpc-1

A more detailed discussion with the package author can be found here:
https://github.com/nfultz/grpc/issues/21

Witek

PS. Posted this on r-devel but since no one is replying I try it here.
-- 
Witold Eryk Wolski


From m@i@lb@ m@ili@g off @lum@i@uv@es  Fri Oct  5 11:36:30 2018
From: m@i@lb@ m@ili@g off @lum@i@uv@es (m@i@lb@ m@ili@g off @lum@i@uv@es)
Date: Fri, 5 Oct 2018 11:36:30 +0200 (CEST)
Subject: [R-pkg-devel] dependency on a bioconductor package
In-Reply-To: <01d45c8a$Blat.v3.2.16$6ba188a9$19b6076dc@mail.statistik.tu-dortmund.de>
References: <01d45c8a$Blat.v3.2.16$6ba188a9$19b6076dc@mail.statistik.tu-dortmund.de>
Message-ID: <8755728938maialba@alumni.uv.es>

I do not know how to solve this warning. I guess it comes from the package dependency on CAMERA (bioconductor) but I can?t solve it.

https://win-builder.r-project.org/incoming_pretest/LipidMS_1.0.0_20181005_103151/Windows/00check.log>


From mtmorg@n@bioc @ending from gm@il@com  Fri Oct  5 14:41:41 2018
From: mtmorg@n@bioc @ending from gm@il@com (Morgan, Martin)
Date: Fri, 5 Oct 2018 08:41:41 -0400
Subject: [R-pkg-devel] dependency on a bioconductor package
In-Reply-To: <8755728938maialba@alumni.uv.es>
References: <01d45c8a$Blat.v3.2.16$6ba188a9$19b6076dc@mail.statistik.tu-dortmund.de>
 <8755728938maialba@alumni.uv.es>
Message-ID: <6136904c-8325-7b0b-2b42-0663913861ec@gmail.com>

BiocInstaller has been replaced by the CRAN package BiocManager; the 
appropriate way to install Bioconductor packages is 
BiocManager::install(). See the vignette at

https://cran.r-project.org/web/packages/BiocManager/vignettes/BiocManager.html

Martin


On 10/5/18 5:36 AM, maialba at alumni.uv.es wrote:
> I do not know how to solve this warning. I guess it comes from the package dependency on CAMERA (bioconductor) but I can?t solve it.
>
> https://win-builder.r-project.org/incoming_pretest/LipidMS_1.0.0_20181005_103151/Windows/00check.log>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From mtmorg@n@bioc @ending from gm@il@com  Fri Oct  5 19:58:09 2018
From: mtmorg@n@bioc @ending from gm@il@com (Morgan, Martin)
Date: Fri, 5 Oct 2018 13:58:09 -0400
Subject: [R-pkg-devel] dependency on a bioconductor package
In-Reply-To: <8745565331maialba@alumni.uv.es>
References: <6136904c-8325-7b0b-2b42-0663913861ec@gmail.com>
 <8745565331maialba@alumni.uv.es>
Message-ID: <63bed766-82d8-019a-fafd-8a41a60aee58@gmail.com>

(don't forget to 'reply all', so that others may benefit / contribute to 
the conversation).

You or one of the packages your package depends on must Depend: or 
Import: BiocInstaller. If it is your package, then you should no longer 
do so. If it is one of the packages your package depends on, then the 
responsible thing to do is to contact the author of that package and 
indicate that they should update their package to no longer depend on 
BiocInstaller.

I do not know how the CRAN team will view this warning; I would guess 
that, if it is not directly under your control, then they will not be 
overly concerned about it.

Martin

On 10/5/18 1:35 PM, maialba at alumni.uv.es wrote:
> Hello Morgan,
> 
> thank you for the replay but, how should I solve the problem in my package? I did install CAMERA using BiocManager in my computer and my package works fine. I do not get any warnings when I run R CDM check but the problem appears when I try to submit it to CRAN.
> 
> Maribel
> 
> 
>> BiocInstaller has been replaced by the CRAN package BiocManager; the
>> appropriate way to install Bioconductor packages is
>> BiocManager::install(). See the vignette at
>>
>> https://cran.r-project.org/web/packages/BiocManager/vignettes/BiocManagerhtml
>>
>> Martin
>>
>>
>> On 10/5/18 5:36 AM, maialba at alumni.uv.es wrote:
>>> I do not know how to solve this warning. I guess it comes from the package dependency on CAMERA (bioconductor) but I can?t solve it.
>>>
>>> https://win-builder.r-project.org/incoming_pretest/LipidMS_1.0.0_20181005_103151/Windows/00check.log>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
>


From m@i@lb@ m@ili@g off @lum@i@uv@es  Fri Oct  5 20:09:24 2018
From: m@i@lb@ m@ili@g off @lum@i@uv@es (m@i@lb@ m@ili@g off @lum@i@uv@es)
Date: Fri, 5 Oct 2018 20:09:24 +0200 (CEST)
Subject: [R-pkg-devel] dependency on a bioconductor package
In-Reply-To: <63bed766-82d8-019a-fafd-8a41a60aee58@gmail.com>
References: <63bed766-82d8-019a-fafd-8a41a60aee58@gmail.com>
Message-ID: <2686845737maialba@alumni.uv.es>

(sorry about the replay, my mistake)

ok, then I guess that is the problem...I do not depend on BiocInstaller so it must be one of my dependencies.


Thank you very much!

Maribel


> (don't forget to 'reply all', so that others may benefit / contribute to 
> the conversation).
> 
> You or one of the packages your package depends on must Depend: or 
> Import: BiocInstaller. If it is your package, then you should no longer 
> do so. If it is one of the packages your package depends on, then the 
> responsible thing to do is to contact the author of that package and 
> indicate that they should update their package to no longer depend on 
> BiocInstaller.
> 
> I do not know how the CRAN team will view this warning; I would guess 
> that, if it is not directly under your control, then they will not be 
> overly concerned about it.
> 
> Martin
> 
> On 10/5/18 1:35 PM, maialba at alumni.uv.es wrote:
> > Hello Morgan,
> > 
> > thank you for the replay but, how should I solve the problem in my package? I did install CAMERA using BiocManager in my computer and my package works fine. I do not get any warnings when I run R CDM check but the problem appears when I try to submit it to CRAN.
> > 
> > Maribel
> > 
> > 
> >> BiocInstaller has been replaced by the CRAN package BiocManager; the
> >> appropriate way to install Bioconductor packages is
> >> BiocManager::install(). See the vignette at
> >>
> >> https://cran.r-project.org/web/packages/BiocManager/vignettes/BiocManagerhtml
> >>
> >> Martin
> >>
> >>
> >> On 10/5/18 5:36 AM, maialba at alumni.uv.es wrote:
> >>> I do not know how to solve this warning. I guess it comes from the package dependency on CAMERA (bioconductor) but I can?t solve it.
> >>>
> >>> https://win-builder.r-project.org/incoming_pretest/LipidMS_1.0.0_20181005_103151/Windows/00check.log>
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> > 
> > 
> 


From wdunl@p @ending from tibco@com  Fri Oct  5 20:26:54 2018
From: wdunl@p @ending from tibco@com (William Dunlap)
Date: Fri, 5 Oct 2018 11:26:54 -0700
Subject: [R-pkg-devel] dependency on a bioconductor package
In-Reply-To: <63bed766-82d8-019a-fafd-8a41a60aee58@gmail.com>
References: <6136904c-8325-7b0b-2b42-0663913861ec@gmail.com>
 <8745565331maialba@alumni.uv.es>
 <63bed766-82d8-019a-fafd-8a41a60aee58@gmail.com>
Message-ID: <CAF8bMcZ3b5Y7Mzanr=d6r_qe4bqYC2svkd+ALUmZPH_0Jxg-Xg@mail.gmail.com>

It looks like affy is the culprit.

> requiredByCAMERA <- tools::package_dependencies("CAMERA",
recursive=TRUE)$CAMERA
> directlyRequired <- tools::package_dependencies(requiredByCAMERA)
> names(directlyRequired)[ vapply(directlyRequired,
function(x)"BiocInstaller"%in%x, FUN.VALUE=NA) ]
[1] "affy"
> directlyRequired$affy
 [1] "BiocGenerics"   "Biobase"        "affyio"         "BiocInstaller"
"graphics"       "grDevices"
 [7] "methods"        "preprocessCore" "stats"          "utils"
"zlibbioc"
> getOption("repos")
                                                  CRAN
                         BioCsoft
                         "https://cloud.r-project.org"    "
http://www.bioconductor.org/packages/release/bioc"
                                               BioCann
                          BioCexp
"http://bioconductor.org/packages/3.5/data/annotation" "
http://bioconductor.org/packages/3.5/data/experiment"


Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Fri, Oct 5, 2018 at 10:58 AM, Morgan, Martin <mtmorgan.bioc at gmail.com>
wrote:

> (don't forget to 'reply all', so that others may benefit / contribute to
> the conversation).
>
> You or one of the packages your package depends on must Depend: or Import:
> BiocInstaller. If it is your package, then you should no longer do so. If
> it is one of the packages your package depends on, then the responsible
> thing to do is to contact the author of that package and indicate that they
> should update their package to no longer depend on BiocInstaller.
>
> I do not know how the CRAN team will view this warning; I would guess
> that, if it is not directly under your control, then they will not be
> overly concerned about it.
>
> Martin
>
> On 10/5/18 1:35 PM, maialba at alumni.uv.es wrote:
>
>> Hello Morgan,
>>
>> thank you for the replay but, how should I solve the problem in my
>> package? I did install CAMERA using BiocManager in my computer and my
>> package works fine. I do not get any warnings when I run R CDM check but
>> the problem appears when I try to submit it to CRAN.
>>
>> Maribel
>>
>>
>> BiocInstaller has been replaced by the CRAN package BiocManager; the
>>> appropriate way to install Bioconductor packages is
>>> BiocManager::install(). See the vignette at
>>>
>>> https://cran.r-project.org/web/packages/BiocManager/vignette
>>> s/BiocManagerhtml
>>>
>>> Martin
>>>
>>>
>>> On 10/5/18 5:36 AM, maialba at alumni.uv.es wrote:
>>>
>>>> I do not know how to solve this warning. I guess it comes from the
>>>> package dependency on CAMERA (bioconductor) but I can?t solve it.
>>>>
>>>> https://win-builder.r-project.org/incoming_pretest/LipidMS_1
>>>> .0.0_20181005_103151/Windows/00check.log>
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>>
>>
>>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From mtmorg@n@bioc @ending from gm@il@com  Fri Oct  5 20:52:14 2018
From: mtmorg@n@bioc @ending from gm@il@com (Morgan, Martin)
Date: Fri, 5 Oct 2018 14:52:14 -0400
Subject: [R-pkg-devel] dependency on a bioconductor package
In-Reply-To: <CAF8bMcZ3b5Y7Mzanr=d6r_qe4bqYC2svkd+ALUmZPH_0Jxg-Xg@mail.gmail.com>
References: <6136904c-8325-7b0b-2b42-0663913861ec@gmail.com>
 <8745565331maialba@alumni.uv.es>
 <63bed766-82d8-019a-fafd-8a41a60aee58@gmail.com>
 <CAF8bMcZ3b5Y7Mzanr=d6r_qe4bqYC2svkd+ALUmZPH_0Jxg-Xg@mail.gmail.com>
Message-ID: <57ba3381-8cde-39c2-fb31-a828e2999889@gmail.com>

Bioconductor has a release and a devel branch, with the idea that new 
features are introduced into 'devel'. The transition to use BiocManager 
is a new feature introduced into devel, and BiocInstaller has a 
deprecation message added in devel only. It follows that win-builder is 
using bioc-devel (this is reasonable; our next release is at the end of 
this month), and that we'd look for use of BiocInstaller in devel 
packages. affy is itself a 'core team' package, and we have removed use 
of BiocInstaller from that.

But let's see... the 'release' branch has

 > dput(repos)
c(BioCsoft = "https://bioconductor.org/packages/3.7/bioc", BioCann = 
"https://bioconductor.org/packages/3.7/data/annotation",
BioCexp = "https://bioconductor.org/packages/3.7/data/experiment",
BioCworkflows = "https://bioconductor.org/packages/3.7/workflows",
CRAN = "https://cran.rstudio.com")
 > db = available.packages(repos=repos)
 > revdeps = tools::package_dependencies("LipidMS", db, recursive=TRUE)
 > "BiocInstaller" %in% unlist(revdeps)
[1] TRUE

and indeed BiocInstaller is problematic (but BiocInstaller in the 
release branch doesn't generate the warning...) (also, I'm not sure 
about the '3.5' components of your annotation / experiment repos, these 
should be the same as the main repository).

On the other hand in our devel branch

 > repos = sub("3.7", "3.8", repos)
 > db = available.packages(repos=repos)
 > revdeps = tools::package_dependencies("LipidMS", db, recursive=TRUE)
 > "BiocInstaller" %in% unlist(revdeps)
[1] FALSE

So at least for packages that are current in CRAN and in the devel 
branch of Bioconductor there is no use of BiocInstaller.

I'm not exactly sure where this leaves us...

Martin

On 10/5/18 2:26 PM, William Dunlap wrote:
> It looks like affy is the culprit.
> 
>  > requiredByCAMERA <- tools::package_dependencies("CAMERA", 
> recursive=TRUE)$CAMERA
>  > directlyRequired <- tools::package_dependencies(requiredByCAMERA)
>  > names(directlyRequired)[ vapply(directlyRequired, 
> function(x)"BiocInstaller"%in%x, FUN.VALUE=NA) ]
> [1] "affy"
>  > directlyRequired$affy
>  ?[1] "BiocGenerics"? ?"Biobase"? ? ? ? "affyio"        
>  ?"BiocInstaller"? "graphics"? ? ? ?"grDevices"
>  ?[7] "methods"? ? ? ? "preprocessCore" "stats"? ? ? ? ? "utils"        
>  ? "zlibbioc"
>  > getOption("repos")
>  ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? CRAN                  
>  ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?BioCsoft
>  ? ? ? ? ? ? ? ? ? ? ? ? ?"https://cloud.r-project.org"    
> "http://www.bioconductor.org/packages/release/bioc"
>  ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?BioCann                  
>  ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? BioCexp
> "http://bioconductor.org/packages/3.5/data/annotation" 
> "http://bioconductor.org/packages/3.5/data/experiment"
> 
> 
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com <http://tibco.com>
> 
> On Fri, Oct 5, 2018 at 10:58 AM, Morgan, Martin <mtmorgan.bioc at gmail.com 
> <mailto:mtmorgan.bioc at gmail.com>> wrote:
> 
>     (don't forget to 'reply all', so that others may benefit /
>     contribute to the conversation).
> 
>     You or one of the packages your package depends on must Depend: or
>     Import: BiocInstaller. If it is your package, then you should no
>     longer do so. If it is one of the packages your package depends on,
>     then the responsible thing to do is to contact the author of that
>     package and indicate that they should update their package to no
>     longer depend on BiocInstaller.
> 
>     I do not know how the CRAN team will view this warning; I would
>     guess that, if it is not directly under your control, then they will
>     not be overly concerned about it.
> 
>     Martin
> 
>     On 10/5/18 1:35 PM, maialba at alumni.uv.es
>     <mailto:maialba at alumni.uv.es> wrote:
> 
>         Hello Morgan,
> 
>         thank you for the replay but, how should I solve the problem in
>         my package? I did install CAMERA using BiocManager in my
>         computer and my package works fine. I do not get any warnings
>         when I run R CDM check but the problem appears when I try to
>         submit it to CRAN.
> 
>         Maribel
> 
> 
>             BiocInstaller has been replaced by the CRAN package
>             BiocManager; the
>             appropriate way to install Bioconductor packages is
>             BiocManager::install(). See the vignette at
> 
>             https://cran.r-project.org/web/packages/BiocManager/vignettes/BiocManagerhtml
>             <https://cran.r-project.org/web/packages/BiocManager/vignettes/BiocManagerhtml>
> 
>             Martin
> 
> 
>             On 10/5/18 5:36 AM, maialba at alumni.uv.es
>             <mailto:maialba at alumni.uv.es> wrote:
> 
>                 I do not know how to solve this warning. I guess it
>                 comes from the package dependency on CAMERA
>                 (bioconductor) but I can?t solve it.
> 
>                 https://win-builder.r-project.org/incoming_pretest/LipidMS_1.0.0_20181005_103151/Windows/00check.log
>                 <https://win-builder.r-project.org/incoming_pretest/LipidMS_1.0.0_20181005_103151/Windows/00check.log>>
> 
>                 ______________________________________________
>                 R-package-devel at r-project.org
>                 <mailto:R-package-devel at r-project.org> mailing list
>                 https://stat.ethz.ch/mailman/listinfo/r-package-devel
>                 <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> 
> 
>             ______________________________________________
>             R-package-devel at r-project.org
>             <mailto:R-package-devel at r-project.org> mailing list
>             https://stat.ethz.ch/mailman/listinfo/r-package-devel
>             <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> 
> 
> 
> 
>     ______________________________________________
>     R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>     mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> 
>


From gkr@emer @ending from bgc-jen@@mpg@de  Mon Oct  8 13:08:47 2018
From: gkr@emer @ending from bgc-jen@@mpg@de (Guido Kraemer)
Date: Mon, 8 Oct 2018 13:08:47 +0200
Subject: [R-pkg-devel] object 'nativeRoutines' not found
In-Reply-To: <6cee5995-533e-7edd-1236-c37d5b89dd09@bgc-jena.mpg.de>
References: <6cee5995-533e-7edd-1236-c37d5b89dd09@bgc-jena.mpg.de>
Message-ID: <96587a6a-c366-3004-e9ae-5cf5cb81b669@bgc-jena.mpg.de>

Hi all,

update: I submitted to CRAN and it passes all test just fine 
(https://cran.r-project.org/web/checks/check_results_coRanking.html). I 
still have no idea why travis fails.

Best Regards,

Guido Kraemer


On 09/17/2018 05:45 PM, Guido Kraemer wrote:
>
> Hi all,
>
> Since a couple of days travis-ci fails for my package coRanking with 
> "R: devel".
> The error message is:
>
> Error in nativeRoutines[[lib]] <- routines :
> object 'nativeRoutines' not found
>
> "R: release" and "R: oldrel" work fine. Did some R internals change or 
> is the
> "R: devel" on travis currently broken?
>
> I also sent the package to winbuilder and it works fine with R-devel
>
> You can find the travis build here:
>
> https://travis-ci.org/gdkrmr/coRanking/jobs/428661435
>
> Best Regards,
>
> Guido
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Guido Kraemer
Max Planck Institute for Biogeochemistry Jena
Department for Biogeochemical Integration
Hans-Kn?ll-Str. 10
07745 Jena
Germany

phone: +49 3641 576293
e-mail: gkraemer at bgc-jena.mpg.de


From murdoch@dunc@n @ending from gm@il@com  Mon Oct  8 13:34:01 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Mon, 8 Oct 2018 07:34:01 -0400
Subject: [R-pkg-devel] object 'nativeRoutines' not found
In-Reply-To: <96587a6a-c366-3004-e9ae-5cf5cb81b669@bgc-jena.mpg.de>
References: <6cee5995-533e-7edd-1236-c37d5b89dd09@bgc-jena.mpg.de>
 <96587a6a-c366-3004-e9ae-5cf5cb81b669@bgc-jena.mpg.de>
Message-ID: <8601d87f-8eb9-aae5-af81-1ff346b73113@gmail.com>

On 08/10/2018 7:08 AM, Guido Kraemer wrote:
> Hi all,
> 
> update: I submitted to CRAN and it passes all test just fine
> (https://cran.r-project.org/web/checks/check_results_coRanking.html). I
> still have no idea why travis fails.
> 

That looks as though the travis system isn't using the latest version of 
some package.  Can you see sessionInfo() on the two systems?  It prints 
versions for R and for all used packages.  Look for differences there.

Duncan Murdoch


> Best Regards,
> 
> Guido Kraemer
> 
> 
> On 09/17/2018 05:45 PM, Guido Kraemer wrote:
>>
>> Hi all,
>>
>> Since a couple of days travis-ci fails for my package coRanking with
>> "R: devel".
>> The error message is:
>>
>> Error in nativeRoutines[[lib]] <- routines :
>> object 'nativeRoutines' not found
>>
>> "R: release" and "R: oldrel" work fine. Did some R internals change or
>> is the
>> "R: devel" on travis currently broken?
>>
>> I also sent the package to winbuilder and it works fine with R-devel
>>
>> You can find the travis build here:
>>
>> https://travis-ci.org/gdkrmr/coRanking/jobs/428661435
>>
>> Best Regards,
>>
>> Guido
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From c@@rdi@g@bor @ending from gm@il@com  Mon Oct  8 13:37:25 2018
From: c@@rdi@g@bor @ending from gm@il@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Mon, 8 Oct 2018 12:37:25 +0100
Subject: [R-pkg-devel] object 'nativeRoutines' not found
In-Reply-To: <8601d87f-8eb9-aae5-af81-1ff346b73113@gmail.com>
References: <6cee5995-533e-7edd-1236-c37d5b89dd09@bgc-jena.mpg.de>
 <96587a6a-c366-3004-e9ae-5cf5cb81b669@bgc-jena.mpg.de>
 <8601d87f-8eb9-aae5-af81-1ff346b73113@gmail.com>
Message-ID: <CABtg=KmLRC2KEfQbXhPDN7DyasGwj4wtE6b37au+R189ap2qWw@mail.gmail.com>

The package versions are in the output:
https://travis-ci.org/gdkrmr/coRanking/jobs/428661435#L2836

I would just try to purge the cache on Travis, that often helps with
incompatible package versions.

Gabor
On Mon, Oct 8, 2018 at 12:34 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 08/10/2018 7:08 AM, Guido Kraemer wrote:
> > Hi all,
> >
> > update: I submitted to CRAN and it passes all test just fine
> > (https://cran.r-project.org/web/checks/check_results_coRanking.html). I
> > still have no idea why travis fails.
> >
>
> That looks as though the travis system isn't using the latest version of
> some package.  Can you see sessionInfo() on the two systems?  It prints
> versions for R and for all used packages.  Look for differences there.
>
> Duncan Murdoch
>
>
> > Best Regards,
> >
> > Guido Kraemer
> >
> >
> > On 09/17/2018 05:45 PM, Guido Kraemer wrote:
> >>
> >> Hi all,
> >>
> >> Since a couple of days travis-ci fails for my package coRanking with
> >> "R: devel".
> >> The error message is:
> >>
> >> Error in nativeRoutines[[lib]] <- routines :
> >> object 'nativeRoutines' not found
> >>
> >> "R: release" and "R: oldrel" work fine. Did some R internals change or
> >> is the
> >> "R: devel" on travis currently broken?
> >>
> >> I also sent the package to winbuilder and it works fine with R-devel
> >>
> >> You can find the travis build here:
> >>
> >> https://travis-ci.org/gdkrmr/coRanking/jobs/428661435
> >>
> >> Best Regards,
> >>
> >> Guido
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @ending from gm@il@com  Mon Oct  8 13:47:18 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Mon, 8 Oct 2018 07:47:18 -0400
Subject: [R-pkg-devel] object 'nativeRoutines' not found
In-Reply-To: <CABtg=KmLRC2KEfQbXhPDN7DyasGwj4wtE6b37au+R189ap2qWw@mail.gmail.com>
References: <6cee5995-533e-7edd-1236-c37d5b89dd09@bgc-jena.mpg.de>
 <96587a6a-c366-3004-e9ae-5cf5cb81b669@bgc-jena.mpg.de>
 <8601d87f-8eb9-aae5-af81-1ff346b73113@gmail.com>
 <CABtg=KmLRC2KEfQbXhPDN7DyasGwj4wtE6b37au+R189ap2qWw@mail.gmail.com>
Message-ID: <8313751a-d4df-bf0b-51d1-d2246d839480@gmail.com>

On 08/10/2018 7:37 AM, G?bor Cs?rdi wrote:
> The package versions are in the output:
> https://travis-ci.org/gdkrmr/coRanking/jobs/428661435#L2836
> 
> I would just try to purge the cache on Travis, that often helps with
> incompatible package versions.

I see  "fansi", "mime" and "R6" are out of date.  There may be others; 
those are just from the ones that update.packages() updated on my system 
(so they are probably recent releases).

Duncan Murdoch

> 
> Gabor
> On Mon, Oct 8, 2018 at 12:34 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> On 08/10/2018 7:08 AM, Guido Kraemer wrote:
>>> Hi all,
>>>
>>> update: I submitted to CRAN and it passes all test just fine
>>> (https://cran.r-project.org/web/checks/check_results_coRanking.html). I
>>> still have no idea why travis fails.
>>>
>>
>> That looks as though the travis system isn't using the latest version of
>> some package.  Can you see sessionInfo() on the two systems?  It prints
>> versions for R and for all used packages.  Look for differences there.
>>
>> Duncan Murdoch
>>
>>
>>> Best Regards,
>>>
>>> Guido Kraemer
>>>
>>>
>>> On 09/17/2018 05:45 PM, Guido Kraemer wrote:
>>>>
>>>> Hi all,
>>>>
>>>> Since a couple of days travis-ci fails for my package coRanking with
>>>> "R: devel".
>>>> The error message is:
>>>>
>>>> Error in nativeRoutines[[lib]] <- routines :
>>>> object 'nativeRoutines' not found
>>>>
>>>> "R: release" and "R: oldrel" work fine. Did some R internals change or
>>>> is the
>>>> "R: devel" on travis currently broken?
>>>>
>>>> I also sent the package to winbuilder and it works fine with R-devel
>>>>
>>>> You can find the travis build here:
>>>>
>>>> https://travis-ci.org/gdkrmr/coRanking/jobs/428661435
>>>>
>>>> Best Regards,
>>>>
>>>> Guido
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @ending from gm@il@com  Mon Oct  8 13:50:34 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Mon, 8 Oct 2018 07:50:34 -0400
Subject: [R-pkg-devel] object 'nativeRoutines' not found
In-Reply-To: <8313751a-d4df-bf0b-51d1-d2246d839480@gmail.com>
References: <6cee5995-533e-7edd-1236-c37d5b89dd09@bgc-jena.mpg.de>
 <96587a6a-c366-3004-e9ae-5cf5cb81b669@bgc-jena.mpg.de>
 <8601d87f-8eb9-aae5-af81-1ff346b73113@gmail.com>
 <CABtg=KmLRC2KEfQbXhPDN7DyasGwj4wtE6b37au+R189ap2qWw@mail.gmail.com>
 <8313751a-d4df-bf0b-51d1-d2246d839480@gmail.com>
Message-ID: <477a950d-949c-be6d-0676-17ff10adda0b@gmail.com>

On 08/10/2018 7:47 AM, Duncan Murdoch wrote:
> On 08/10/2018 7:37 AM, G?bor Cs?rdi wrote:
>> The package versions are in the output:
>> https://travis-ci.org/gdkrmr/coRanking/jobs/428661435#L2836
>>
>> I would just try to purge the cache on Travis, that often helps with
>> incompatible package versions.
> 
> I see  "fansi", "mime" and "R6" are out of date.  There may be others;
> those are just from the ones that update.packages() updated on my system
> (so they are probably recent releases).

And R itself:  travis is using revision 75381 from Sept 29; current 
R-devel is 75412.

> 
> Duncan Murdoch
> 
>>
>> Gabor
>> On Mon, Oct 8, 2018 at 12:34 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>>
>>> On 08/10/2018 7:08 AM, Guido Kraemer wrote:
>>>> Hi all,
>>>>
>>>> update: I submitted to CRAN and it passes all test just fine
>>>> (https://cran.r-project.org/web/checks/check_results_coRanking.html). I
>>>> still have no idea why travis fails.
>>>>
>>>
>>> That looks as though the travis system isn't using the latest version of
>>> some package.  Can you see sessionInfo() on the two systems?  It prints
>>> versions for R and for all used packages.  Look for differences there.
>>>
>>> Duncan Murdoch
>>>
>>>
>>>> Best Regards,
>>>>
>>>> Guido Kraemer
>>>>
>>>>
>>>> On 09/17/2018 05:45 PM, Guido Kraemer wrote:
>>>>>
>>>>> Hi all,
>>>>>
>>>>> Since a couple of days travis-ci fails for my package coRanking with
>>>>> "R: devel".
>>>>> The error message is:
>>>>>
>>>>> Error in nativeRoutines[[lib]] <- routines :
>>>>> object 'nativeRoutines' not found
>>>>>
>>>>> "R: release" and "R: oldrel" work fine. Did some R internals change or
>>>>> is the
>>>>> "R: devel" on travis currently broken?
>>>>>
>>>>> I also sent the package to winbuilder and it works fine with R-devel
>>>>>
>>>>> You can find the travis build here:
>>>>>
>>>>> https://travis-ci.org/gdkrmr/coRanking/jobs/428661435
>>>>>
>>>>> Best Regards,
>>>>>
>>>>> Guido
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From gkr@emer @ending from bgc-jen@@mpg@de  Mon Oct  8 14:52:31 2018
From: gkr@emer @ending from bgc-jen@@mpg@de (Guido Kraemer)
Date: Mon, 8 Oct 2018 14:52:31 +0200
Subject: [R-pkg-devel] object 'nativeRoutines' not found
In-Reply-To: <477a950d-949c-be6d-0676-17ff10adda0b@gmail.com>
References: <6cee5995-533e-7edd-1236-c37d5b89dd09@bgc-jena.mpg.de>
 <96587a6a-c366-3004-e9ae-5cf5cb81b669@bgc-jena.mpg.de>
 <8601d87f-8eb9-aae5-af81-1ff346b73113@gmail.com>
 <CABtg=KmLRC2KEfQbXhPDN7DyasGwj4wtE6b37au+R189ap2qWw@mail.gmail.com>
 <8313751a-d4df-bf0b-51d1-d2246d839480@gmail.com>
 <477a950d-949c-be6d-0676-17ff10adda0b@gmail.com>
Message-ID: <db37a129-30e4-c264-8117-be01c1d5214e@bgc-jena.mpg.de>

Thanks for looking into this:

- I deleted the travis cache and it did not help.

- R should update all its packages before attempting to install the 
coRanking package, so old packages shouldn't be a problem.

So I guess I should just wait until R-devel on travis gets updated.


On 10/08/2018 01:50 PM, Duncan Murdoch wrote:
> On 08/10/2018 7:47 AM, Duncan Murdoch wrote:
>> On 08/10/2018 7:37 AM, G?bor Cs?rdi wrote:
>>> The package versions are in the output:
>>> https://travis-ci.org/gdkrmr/coRanking/jobs/428661435#L2836
>>>
>>> I would just try to purge the cache on Travis, that often helps with
>>> incompatible package versions.
>>
>> I see? "fansi", "mime" and "R6" are out of date.? There may be others;
>> those are just from the ones that update.packages() updated on my system
>> (so they are probably recent releases).
>
> And R itself:? travis is using revision 75381 from Sept 29; current 
> R-devel is 75412.
>
>>
>> Duncan Murdoch
>>
>>>
>>> Gabor
>>> On Mon, Oct 8, 2018 at 12:34 PM Duncan Murdoch 
>>> <murdoch.duncan at gmail.com> wrote:
>>>>
>>>> On 08/10/2018 7:08 AM, Guido Kraemer wrote:
>>>>> Hi all,
>>>>>
>>>>> update: I submitted to CRAN and it passes all test just fine
>>>>> (https://cran.r-project.org/web/checks/check_results_coRanking.html). 
>>>>> I
>>>>> still have no idea why travis fails.
>>>>>
>>>>
>>>> That looks as though the travis system isn't using the latest 
>>>> version of
>>>> some package.? Can you see sessionInfo() on the two systems?? It 
>>>> prints
>>>> versions for R and for all used packages.? Look for differences there.
>>>>
>>>> Duncan Murdoch
>>>>
>>>>
>>>>> Best Regards,
>>>>>
>>>>> Guido Kraemer
>>>>>
>>>>>
>>>>> On 09/17/2018 05:45 PM, Guido Kraemer wrote:
>>>>>>
>>>>>> Hi all,
>>>>>>
>>>>>> Since a couple of days travis-ci fails for my package coRanking with
>>>>>> "R: devel".
>>>>>> The error message is:
>>>>>>
>>>>>> Error in nativeRoutines[[lib]] <- routines :
>>>>>> object 'nativeRoutines' not found
>>>>>>
>>>>>> "R: release" and "R: oldrel" work fine. Did some R internals 
>>>>>> change or
>>>>>> is the
>>>>>> "R: devel" on travis currently broken?
>>>>>>
>>>>>> I also sent the package to winbuilder and it works fine with R-devel
>>>>>>
>>>>>> You can find the travis build here:
>>>>>>
>>>>>> https://travis-ci.org/gdkrmr/coRanking/jobs/428661435
>>>>>>
>>>>>> Best Regards,
>>>>>>
>>>>>> Guido
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

-- 
Guido Kraemer
Max Planck Institute for Biogeochemistry Jena
Department for Biogeochemical Integration
Hans-Kn?ll-Str. 10
07745 Jena
Germany

phone: +49 3641 576293
e-mail: gkraemer at bgc-jena.mpg.de


From hongooi @ending from micro@oft@com  Fri Oct 19 01:16:11 2018
From: hongooi @ending from micro@oft@com (Hong Ooi)
Date: Thu, 18 Oct 2018 23:16:11 +0000
Subject: Extending/adding to an R6 class from another package: qns
Message-ID: <KL1P15301MB0023CFDBA79E04257E9E5CC7A6F80@KL1P15301MB0023.APCP153.PROD.OUTLOOK.COM>

I'm writing a family of packages for talking to Azure (Microsoft's cloud service) from R. The basic architecture is

AzureRMR: the "base" package, provides a number of R6 classes
AzureVM: a "child" package that extends classes from AzureRMR with extra functionality related to virtual machines
AzureStor: another child package that extends classes from AzureRMR, this time for storage accounts
Etc.

For example, AzureRMR defines a class called "az_resource_group" that represents an Azure resource group. Within this class, I have convenience functions to manage individual Azure resources: az_resource_group$get_resource(), az_resource_group$create_resource(), etc. One benefit of this approach is that method chaining works: I can do something like

   az_subscription("xxx")$get_resource_group("yyy")$get_resource("zzz").

In my child packages, I then define further classes and methods for dealing with specific services. For consistency, I also add convenience functions to the base AzureRMR::az_resource_group class to work with these new classes. For example, AzureVM defines a new class az_vm_template, and also adds a $get_vm() method to AzureRMR::az_resource_group.

Running devtools::check() however brings up a note and warning for the child packages. For example, with AzureVM:

* checking R code for possible problems ... NOTE
File 'AzureVM/R/add_methods.R':
  .onLoad calls:
    message("Creating resource group '", resource_group, "'")

Package startup functions should use 'packageStartupMessage' to  generate messages.
See section 'Good practice' in '?.onAttach'.

. . .

* checking for code/documentation mismatches ... WARNING
Functions or methods with usage in documentation object 'get_vm' but not in code:
  get_vm get_vm_cluster list_vms


The reason for the note is because modifying R6 classes from another package has to be done at runtime, ie, in the .onLoad function. The message() call referred to is inside one of the new methods that I define for an AzureRMR class, hence it never actually appears at package startup. I assume it's okay to ignore this note?

The reason for the warning is because writing documentation for R6 methods is rather awkward, even/especially with Roxygen. This goes doubly so when the method in question is for a class from a different package. What I've done is to write a Roxygen block for the method as if it was a standalone function; for example, the documentation for az_resource_group$get_vm() is like this:

#' Get existing virtual machine(s)
#'
#' Method for the [AzureRMR::az_subscription] and [AzureRMR::az_resource_group] classes.
#'
#' @rdname get_vm
#' @name get_vm
#' @usage
#' get_vm(name)
#' get_vm(name, resource_group = name)
#'
#' @param name The name of the VM or cluster.
#' @param resource_group For the `az_subscription` method, the resource group in which `get_vm()` will look for the VM. Defaults to the VM name.
#'
#' @details
#' ...
NULL

This way, typing ?get_vm will bring up the relevant page, which seems to me to be the best compromise in terms of the end-user experience. Is this an acceptable way of doing the documentation for CRAN?

Hong


From h@wickh@m @ending from gm@il@com  Fri Oct 19 17:42:20 2018
From: h@wickh@m @ending from gm@il@com (Hadley Wickham)
Date: Fri, 19 Oct 2018 10:42:20 -0500
Subject: [R-pkg-devel] 
 Extending/adding to an R6 class from another package: qns
In-Reply-To: <mailman.3183.6901.1539938002.1179.r-package-devel@r-project.org>
References: <mailman.3183.6901.1539938002.1179.r-package-devel@r-project.org>
Message-ID: <CABdHhvHGT0oZqpvLn5Mw2HbQ3xm8oT9dAKx8RtPf+q=WtVdg5A@mail.gmail.com>

> AzureRMR: the "base" package, provides a number of R6 classes
> AzureVM: a "child" package that extends classes from AzureRMR with extra functionality related to virtual machines
> AzureStor: another child package that extends classes from AzureRMR, this time for storage accounts
> Etc.
>
> For example, AzureRMR defines a class called "az_resource_group" that represents an Azure resource group. Within this class, I have convenience functions to manage individual Azure resources: az_resource_group$get_resource(), az_resource_group$create_resource(), etc. One benefit of this approach is that method chaining works: I can do something like
>
>    az_subscription("xxx")$get_resource_group("yyy")$get_resource("zzz").
>
> In my child packages, I then define further classes and methods for dealing with specific services. For consistency, I also add convenience functions to the base AzureRMR::az_resource_group class to work with these new classes. For example, AzureVM defines a new class az_vm_template, and also adds a $get_vm() method to AzureRMR::az_resource_group.
>
> Running devtools::check() however brings up a note and warning for the child packages. For example, with AzureVM:
>
> * checking R code for possible problems ... NOTE
> File 'AzureVM/R/add_methods.R':
>   .onLoad calls:
>     message("Creating resource group '", resource_group, "'")
>
> Package startup functions should use 'packageStartupMessage' to  generate messages.
> See section 'Good practice' in '?.onAttach'.
>
> . . .
>
> * checking for code/documentation mismatches ... WARNING
> Functions or methods with usage in documentation object 'get_vm' but not in code:
>   get_vm get_vm_cluster list_vms
>
>
> The reason for the note is because modifying R6 classes from another package has to be done at runtime, ie, in the .onLoad function. The message() call referred to is inside one of the new methods that I define for an AzureRMR class, hence it never actually appears at package startup. I assume it's okay to ignore this note?

I think monkey-patching classes on load is an extremely bad idea. You
would be better off subclassing, or if the classes are so closely
inter-related, you should put them in a single package. Or re-design
your interface to use the pipe instead of method chaining so this
isn't a problem (brief discussion at
https://adv-r.hadley.nz/oo-tradeoffs.html#tradeoffs-pipe)

> The reason for the warning is because writing documentation for R6 methods is rather awkward, even/especially with Roxygen. This goes doubly so when the method in question is for a class from a different package. What I've done is to write a Roxygen block for the method as if it was a standalone function; for example, the documentation for az_resource_group$get_vm() is like this:
>
> #' Get existing virtual machine(s)
> #'
> #' Method for the [AzureRMR::az_subscription] and [AzureRMR::az_resource_group] classes.
> #'
> #' @rdname get_vm
> #' @name get_vm
> #' @usage
> #' get_vm(name)
> #' get_vm(name, resource_group = name)
> #'
> #' @param name The name of the VM or cluster.
> #' @param resource_group For the `az_subscription` method, the resource group in which `get_vm()` will look for the VM. Defaults to the VM name.
> #'
> #' @details
> #' ...
> NULL
>
> This way, typing ?get_vm will bring up the relevant page, which seems to me to be the best compromise in terms of the end-user experience. Is this an acceptable way of doing the documentation for CRAN?

I think the usage should be consistent with how people actually call
the function, i.e. x$get_vm(name). I'm not sure if R CMD check will
like this, but I suspect it will silence the warning.

Hadley

-- 
http://hadley.nz


From hongooi @ending from micro@oft@com  Fri Oct 19 18:27:03 2018
From: hongooi @ending from micro@oft@com (Hong Ooi)
Date: Fri, 19 Oct 2018 16:27:03 +0000
Subject: [R-pkg-devel] Extending/adding to an R6 class from another
 package: qns
In-Reply-To: <CABdHhvHGT0oZqpvLn5Mw2HbQ3xm8oT9dAKx8RtPf+q=WtVdg5A@mail.gmail.com>
References: <mailman.3183.6901.1539938002.1179.r-package-devel@r-project.org>
 <CABdHhvHGT0oZqpvLn5Mw2HbQ3xm8oT9dAKx8RtPf+q=WtVdg5A@mail.gmail.com>
Message-ID: <KL1P15301MB00239FB2400F617B9EBC4309A6F90@KL1P15301MB0023.APCP153.PROD.OUTLOOK.COM>

I do use subclassing as you suggest. In my base package I have an az_resource class that represents any generic Azure resource. Eg in the VM package, I extend it to obtain az_vm_resource; in the storage package I extend it to obtain az_storage; and so on. In addition to simple subclassing, I also define more complex classes that combine resources of different types.

However, Azure also has a hierarchical structure where a subscription can contain multiple resource groups, each of which can contain multiple resources. So I have a resource_group class that includes functions to manage resources. It's this class that I'm adding methods to at runtime, so that you can work with az_vm_resource objects the same way that you work with az_resource objects.

Given that I'm using R6 (for its persistent state, since I'm tracking Azure resources), and given that I'm writing multiple packages, I don't really see any way around "monkey-patching" classes on load. Azure has approximately 1e6 services on offer, and I don't want to support them via one monster package (in principle).

You can see the work-in-progress on the CloudyR repo if you like:
https://github.com/cloudyr/AzureRMR
https://github.com/cloudyr/AzureVM
https://github.com/cloudyr/AzureStor
https://github.com/cloudyr/AzureContainers

In any case, I've realised I can work around the note about startup messages by simply hiving off all the xxx$set() calls to a secondary function, rather than having them directly in .onLoad().


-----Original Message-----
From: Hadley Wickham <h.wickham at gmail.com> 
Sent: Saturday, 20 October, 2018 2:42 AM
To: Hong Ooi <hongooi at microsoft.com>
Cc: R Package Development <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Extending/adding to an R6 class from another package: qns


I think monkey-patching classes on load is an extremely bad idea. You
would be better off subclassing, or if the classes are so closely
inter-related, you should put them in a single package. Or re-design
your interface to use the pipe instead of method chaining so this
isn't a problem (brief discussion at
https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fadv-r.hadley.nz%2Foo-tradeoffs.html%23tradeoffs-pipe&amp;data=02%7C01%7Chongooi%40microsoft.com%7C444ca3edfdc6470f026208d635d97c48%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636755605574903433&amp;sdata=MQqYwnd7hWSEiEUeIFHUwzyo1SQ8R85Aq%2FpdqNW8ppg%3D&amp;reserved=0)

> The reason for the warning is because writing documentation for R6 methods is rather awkward, even/especially with Roxygen. This goes doubly so when the method in question is for a class from a different package. What I've done is to write a Roxygen block for the method as if it was a standalone function; for example, the documentation for az_resource_group$get_vm() is like this:
>
> #' Get existing virtual machine(s)
> #'
> #' Method for the [AzureRMR::az_subscription] and [AzureRMR::az_resource_group] classes.
> #'
> #' @rdname get_vm
> #' @name get_vm
> #' @usage
> #' get_vm(name)
> #' get_vm(name, resource_group = name)
> #'
> #' @param name The name of the VM or cluster.
> #' @param resource_group For the `az_subscription` method, the resource group in which `get_vm()` will look for the VM. Defaults to the VM name.
> #'
> #' @details
> #' ...
> NULL
>
> This way, typing ?get_vm will bring up the relevant page, which seems to me to be the best compromise in terms of the end-user experience. Is this an acceptable way of doing the documentation for CRAN?

I think the usage should be consistent with how people actually call
the function, i.e. x$get_vm(name). I'm not sure if R CMD check will
like this, but I suspect it will silence the warning.

Hadley

-- 
https://na01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fhadley.nz&amp;data=02%7C01%7Chongooi%40microsoft.com%7C444ca3edfdc6470f026208d635d97c48%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636755605574903433&amp;sdata=sNTNDb%2BcxGHWvTkrhztq0%2F%2B6nqg97loNaU813Z5UN6s%3D&amp;reserved=0

From gkr@emer @ending from bgc-jen@@mpg@de  Mon Oct 22 09:26:29 2018
From: gkr@emer @ending from bgc-jen@@mpg@de (Guido Kraemer)
Date: Mon, 22 Oct 2018 09:26:29 +0200
Subject: [R-pkg-devel] object 'nativeRoutines' not found
In-Reply-To: <db37a129-30e4-c264-8117-be01c1d5214e@bgc-jena.mpg.de>
References: <6cee5995-533e-7edd-1236-c37d5b89dd09@bgc-jena.mpg.de>
 <96587a6a-c366-3004-e9ae-5cf5cb81b669@bgc-jena.mpg.de>
 <8601d87f-8eb9-aae5-af81-1ff346b73113@gmail.com>
 <CABtg=KmLRC2KEfQbXhPDN7DyasGwj4wtE6b37au+R189ap2qWw@mail.gmail.com>
 <8313751a-d4df-bf0b-51d1-d2246d839480@gmail.com>
 <477a950d-949c-be6d-0676-17ff10adda0b@gmail.com>
 <db37a129-30e4-c264-8117-be01c1d5214e@bgc-jena.mpg.de>
Message-ID: <d1f22270-210b-9ea5-7624-9184d049d673@bgc-jena.mpg.de>

FYI, the problem just fixed itself.

On 10/8/18 2:52 PM, Guido Kraemer wrote:
> Thanks for looking into this:
>
> - I deleted the travis cache and it did not help.
>
> - R should update all its packages before attempting to install the 
> coRanking package, so old packages shouldn't be a problem.
>
> So I guess I should just wait until R-devel on travis gets updated.
>
>
> On 10/08/2018 01:50 PM, Duncan Murdoch wrote:
>> On 08/10/2018 7:47 AM, Duncan Murdoch wrote:
>>> On 08/10/2018 7:37 AM, G?bor Cs?rdi wrote:
>>>> The package versions are in the output:
>>>> https://travis-ci.org/gdkrmr/coRanking/jobs/428661435#L2836
>>>>
>>>> I would just try to purge the cache on Travis, that often helps with
>>>> incompatible package versions.
>>>
>>> I see? "fansi", "mime" and "R6" are out of date.? There may be others;
>>> those are just from the ones that update.packages() updated on my 
>>> system
>>> (so they are probably recent releases).
>>
>> And R itself:? travis is using revision 75381 from Sept 29; current 
>> R-devel is 75412.
>>
>>>
>>> Duncan Murdoch
>>>
>>>>
>>>> Gabor
>>>> On Mon, Oct 8, 2018 at 12:34 PM Duncan Murdoch 
>>>> <murdoch.duncan at gmail.com> wrote:
>>>>>
>>>>> On 08/10/2018 7:08 AM, Guido Kraemer wrote:
>>>>>> Hi all,
>>>>>>
>>>>>> update: I submitted to CRAN and it passes all test just fine
>>>>>> (https://cran.r-project.org/web/checks/check_results_coRanking.html). 
>>>>>> I
>>>>>> still have no idea why travis fails.
>>>>>>
>>>>>
>>>>> That looks as though the travis system isn't using the latest 
>>>>> version of
>>>>> some package.? Can you see sessionInfo() on the two systems?? It 
>>>>> prints
>>>>> versions for R and for all used packages.? Look for differences 
>>>>> there.
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>>
>>>>>> Best Regards,
>>>>>>
>>>>>> Guido Kraemer
>>>>>>
>>>>>>
>>>>>> On 09/17/2018 05:45 PM, Guido Kraemer wrote:
>>>>>>>
>>>>>>> Hi all,
>>>>>>>
>>>>>>> Since a couple of days travis-ci fails for my package coRanking 
>>>>>>> with
>>>>>>> "R: devel".
>>>>>>> The error message is:
>>>>>>>
>>>>>>> Error in nativeRoutines[[lib]] <- routines :
>>>>>>> object 'nativeRoutines' not found
>>>>>>>
>>>>>>> "R: release" and "R: oldrel" work fine. Did some R internals 
>>>>>>> change or
>>>>>>> is the
>>>>>>> "R: devel" on travis currently broken?
>>>>>>>
>>>>>>> I also sent the package to winbuilder and it works fine with 
>>>>>>> R-devel
>>>>>>>
>>>>>>> You can find the travis build here:
>>>>>>>
>>>>>>> https://travis-ci.org/gdkrmr/coRanking/jobs/428661435
>>>>>>>
>>>>>>> Best Regards,
>>>>>>>
>>>>>>> Guido
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-package-devel at r-project.org mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>
-- 
Guido Kraemer
Max Planck Institute for Biogeochemistry Jena
Department for Biogeochemical Integration
Hans-Kn?ll-Str. 10
07745 Jena
Germany

phone: +49 3641 576293
e-mail: gkraemer at bgc-jena.mpg.de


From tdhock5 @ending from gm@il@com  Tue Oct 23 23:02:52 2018
From: tdhock5 @ending from gm@il@com (Toby Hocking)
Date: Tue, 23 Oct 2018 14:02:52 -0700
Subject: [R-pkg-devel] SystemRequirements: Berkeley DB STL
Message-ID: <CALK03d2axehJd1Cs1Na6UaN0Vi1vGnmnSu+XJwisj_jzQpru9g@mail.gmail.com>

I would like to put the https://github.com/tdhock/PeakSegDisk package on
CRAN. This package needs Berkeley DB C++ Standard Template Library. What do
I need to do to get this package (with compiled mac/windows binaries) on
CRAN?

This C++ library is relatively easy to install
https://github.com/tdhock/PeakSegPipeline/wiki/FAQ#installing-berkeleydb-stl
but probably too big (tar.gz source code is 43MB) to include in the R
package, so I have indicated this external library dependency in the
SystemRequirements field of DESCRIPTION. I have also put PKG_LIBS=-ldb_stl
in my src/Makevars. Is that OK?

My Linux travis builds pass CRAN checks just fine
https://travis-ci.org/tdhock/PeakSegDisk/jobs/442813478 because I have
installed the libdb5.1-stl-dev package which provides -ldb_stl.

Usually I check my packages on win-builder prior to CRAN submission. When I
check PeakSegDisk on win-builder, I get a linker error (db_stl not found)
because presumbly it is not installed on the win-builder machine. So
presumably my package would not pass checks on CRAN.

I have emailed Uwe Ligges to ask to install BerkeleyDB STL on win-builder
but I have got no response. Is there anybody else I should ask?

Is there anything else I should do?

FYI I believe that I have done my homework. From a search of
"systemrequirements" on r-package-devel I saw that there are several
related threads, for example a message on Feb 4 from Dirk who explains how
to use PKG_LIBS. However I did not see any specific explanation of how to
get a package with dependent compiled code on CRAN. Maybe the officially
accepted method should be added to Writing R Extensions or CRAN Repository
policies?

Thanks in advance for any help/advice you can provide.
Toby Dylan Hocking

	[[alternative HTML version deleted]]


From hongooi @ending from micro@oft@com  Wed Oct 24 05:53:27 2018
From: hongooi @ending from micro@oft@com (Hong Ooi)
Date: Wed, 24 Oct 2018 03:53:27 +0000
Subject: [R-pkg-devel] SystemRequirements: Berkeley DB STL
In-Reply-To: <CALK03d2axehJd1Cs1Na6UaN0Vi1vGnmnSu+XJwisj_jzQpru9g@mail.gmail.com>
References: <CALK03d2axehJd1Cs1Na6UaN0Vi1vGnmnSu+XJwisj_jzQpru9g@mail.gmail.com>
Message-ID: <KL1P15301MB00230890689095A81707EF64A6F60@KL1P15301MB0023.APCP153.PROD.OUTLOOK.COM>

This looks like a similar situation to the C++ Boost headers, which are packaged up for easy R consumption in the boost package. You could try doing that with BerkeleyDB.

There's another issue though: looking at your FAQ page, you seem to rely on a bunch of tools written by UCSC. These tools aren't available for Windows, or at least I didn't see a download link. What are Windows users supposed to do?


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Toby Hocking
Sent: Wednesday, 24 October, 2018 5:03 AM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] SystemRequirements: Berkeley DB STL

I would like to put the https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Ftdhock%2FPeakSegDisk&amp;data=02%7C01%7Chongooi%40microsoft.com%7C8a2dca6e52e844d5f38808d6392ba1c3%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636759256910869612&amp;sdata=bxglS4I%2BlPieYCAjiZHIAvnkOLqCIwxj%2BPocGrfRR2Q%3D&amp;reserved=0 package on
CRAN. This package needs Berkeley DB C++ Standard Template Library. What do
I need to do to get this package (with compiled mac/windows binaries) on
CRAN?

This C++ library is relatively easy to install
https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Ftdhock%2FPeakSegPipeline%2Fwiki%2FFAQ%23installing-berkeleydb-stl&amp;data=02%7C01%7Chongooi%40microsoft.com%7C8a2dca6e52e844d5f38808d6392ba1c3%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636759256910869612&amp;sdata=%2FGQgkzrA7bveVJkRGcfr4swCsZ5EoQUzqRcW%2BGR8lS0%3D&amp;reserved=0
but probably too big (tar.gz source code is 43MB) to include in the R
package, so I have indicated this external library dependency in the
SystemRequirements field of DESCRIPTION. I have also put PKG_LIBS=-ldb_stl
in my src/Makevars. Is that OK?

My Linux travis builds pass CRAN checks just fine
https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Ftravis-ci.org%2Ftdhock%2FPeakSegDisk%2Fjobs%2F442813478&amp;data=02%7C01%7Chongooi%40microsoft.com%7C8a2dca6e52e844d5f38808d6392ba1c3%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636759256910869612&amp;sdata=RGv3KjWuWcp7mR2JVBZzFj7mQErYHceC2cweRwWD93E%3D&amp;reserved=0 because I have
installed the libdb5.1-stl-dev package which provides -ldb_stl.

Usually I check my packages on win-builder prior to CRAN submission. When I
check PeakSegDisk on win-builder, I get a linker error (db_stl not found)
because presumbly it is not installed on the win-builder machine. So
presumably my package would not pass checks on CRAN.

I have emailed Uwe Ligges to ask to install BerkeleyDB STL on win-builder
but I have got no response. Is there anybody else I should ask?

Is there anything else I should do?

FYI I believe that I have done my homework. From a search of
"systemrequirements" on r-package-devel I saw that there are several
related threads, for example a message on Feb 4 from Dirk who explains how
to use PKG_LIBS. However I did not see any specific explanation of how to
get a package with dependent compiled code on CRAN. Maybe the officially
accepted method should be added to Writing R Extensions or CRAN Repository
policies?

Thanks in advance for any help/advice you can provide.
Toby Dylan Hocking

	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7C8a2dca6e52e844d5f38808d6392ba1c3%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636759256910869612&amp;sdata=JHyirFiiFY9zonR9p2CgeQh2EuP3YBsi%2FZLG2NFv%2FDA%3D&amp;reserved=0


From edd @ending from debi@n@org  Wed Oct 24 14:09:28 2018
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Wed, 24 Oct 2018 07:09:28 -0500
Subject: [R-pkg-devel] SystemRequirements: Berkeley DB STL
In-Reply-To: <CALK03d2axehJd1Cs1Na6UaN0Vi1vGnmnSu+XJwisj_jzQpru9g@mail.gmail.com>
References: <CALK03d2axehJd1Cs1Na6UaN0Vi1vGnmnSu+XJwisj_jzQpru9g@mail.gmail.com>
Message-ID: <23504.24824.285159.261386@rob.eddelbuettel.com>


On 23 October 2018 at 14:02, Toby Hocking wrote:
| I would like to put the https://github.com/tdhock/PeakSegDisk package on
| CRAN. This package needs Berkeley DB C++ Standard Template Library. What do
| I need to do to get this package (with compiled mac/windows binaries) on
| CRAN?
| 
| This C++ library is relatively easy to install
| https://github.com/tdhock/PeakSegPipeline/wiki/FAQ#installing-berkeleydb-stl
| but probably too big (tar.gz source code is 43MB) to include in the R
| package, so I have indicated this external library dependency in the
| SystemRequirements field of DESCRIPTION. I have also put PKG_LIBS=-ldb_stl
| in my src/Makevars. Is that OK?

In short, no.

This is a messy topic, but in the briefest of nutshells you have an external
library here which needs linking.  That makes it complicated.

A short road map (in increasing order of complexity) about the situation:


 - a small external library shipped just as headers, eg catch2, is easiest:
 
   => just include the header file
   => maybe even package the header file up in a package so that other
      packages can use it


 - a small external library ie just a few files is doable with little work:
 
   => just include it in your src/ directory
   => or maybe one level below src/ and have Makevars build it
      (which is something I just did to one of my packages)


 - a small-to-medium library typically installed externally gets harder
 
   => you are at the mercy of CRAN to have THAT LIBRARY on ALL of their systems
   => or if you can do the work, install it via your package (nloptr does that)
      (nloptr is extra-special because it then also exports 10 or so C entry points)


 - a large and complex library is really difficult
 
   => like the last point, only worse


These (three to) four approaches could be split up further, eg by C versus
C++, or by 'do you want other CRAN packages to use it too or not' etc.

Here, you are at the last point. You have library that is
  a) large
  b) reasonably uncommon
  c) available in some but not other places

As your README states, it exists for Debian/Ubuntu so you could (privately)
ask Kurt to install it on his machines which he will probably do.  A start.

But then you still need Windows (where Uwe is generally equally helpful, but
not everything builds on Windows, he has zero spare time to build it for you
and we have no mechanism to get it to him -- or maybe we do via Jeroen's
rwinlibs -- to be checked). So a possible roadblock.

And then you need macOS.  I will not say much more in order to remain polite
and civil, but if you check the archives of this list and r-devel you will
find me _begging_ a few weeks ago to be given a handle to turn off builds of
a package of mine because it could never have its libraries on macOS yet it
would still always attempt to build on macOS yielding me two ERROR and a "bad
package" stigma.  I still have that problem with a few other packages of mine
lacking a macOS library at CRAN, and it is "difficult" to understate by some
order. 

Oh, and did I mention the joy that is Solaris?

In short, this is complicated. See fortunes::fortune(356) (h/t Doug Bates).

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From tdhock5 @ending from gm@il@com  Wed Oct 24 18:47:35 2018
From: tdhock5 @ending from gm@il@com (Toby Hocking)
Date: Wed, 24 Oct 2018 09:47:35 -0700
Subject: [R-pkg-devel] SystemRequirements: Berkeley DB STL
In-Reply-To: <23504.24824.285159.261386@rob.eddelbuettel.com>
References: <CALK03d2axehJd1Cs1Na6UaN0Vi1vGnmnSu+XJwisj_jzQpru9g@mail.gmail.com>
 <23504.24824.285159.261386@rob.eddelbuettel.com>
Message-ID: <CALK03d3iSz5UjLgADRDLW-Jtj8u4uSEz7OrBe-JnRrZsN+c4Ag@mail.gmail.com>

Hi Dirk thanks for the helpful response.
On Wed, Oct 24, 2018 at 5:09 AM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 23 October 2018 at 14:02, Toby Hocking wrote:
> | I would like to put the https://github.com/tdhock/PeakSegDisk package on
> | CRAN. This package needs Berkeley DB C++ Standard Template Library. What
> do
> | I need to do to get this package (with compiled mac/windows binaries) on
> | CRAN?
> |
> | This C++ library is relatively easy to install
> |
> https://github.com/tdhock/PeakSegPipeline/wiki/FAQ#installing-berkeleydb-stl
> | but probably too big (tar.gz source code is 43MB) to include in the R
> | package, so I have indicated this external library dependency in the
> | SystemRequirements field of DESCRIPTION. I have also put
> PKG_LIBS=-ldb_stl
> | in my src/Makevars. Is that OK?
>
> In short, no.
>
> This is a messy topic, but in the briefest of nutshells you have an
> external
> library here which needs linking.  That makes it complicated.
>
> A short road map (in increasing order of complexity) about the situation:
>
>
>  - a small external library shipped just as headers, eg catch2, is easiest:
>
>    => just include the header file
>    => maybe even package the header file up in a package so that other
>       packages can use it
>
>
>  - a small external library ie just a few files is doable with little work:
>
>    => just include it in your src/ directory
>    => or maybe one level below src/ and have Makevars build it
>       (which is something I just did to one of my packages)
>
>
>  - a small-to-medium library typically installed externally gets harder
>
>    => you are at the mercy of CRAN to have THAT LIBRARY on ALL of their
> systems
>    => or if you can do the work, install it via your package (nloptr does
> that)
>       (nloptr is extra-special because it then also exports 10 or so C
> entry points)
>
>
>  - a large and complex library is really difficult
>
>    => like the last point, only worse
>
>
> These (three to) four approaches could be split up further, eg by C versus
> C++, or by 'do you want other CRAN packages to use it too or not' etc.
>
> Here, you are at the last point. You have library that is
>   a) large
>   b) reasonably uncommon
>   c) available in some but not other places
>
> As your README states, it exists for Debian/Ubuntu so you could (privately)
> ask Kurt to install it on his machines which he will probably do.  A start.
>

I have emailed Kurt about this.


> But then you still need Windows (where Uwe is generally equally helpful,
> but
> not everything builds on Windows, he has zero spare time to build it for
> you
> and we have no mechanism to get it to him -- or maybe we do via Jeroen's
> rwinlibs -- to be checked). So a possible roadblock.
>

Judging from Uwe's non-response to my email requests, Jeroen's rwinlibs may
be a better option -- but what is that? I am not familiar with rwinlib.
Where are the docs?


>
> And then you need macOS.  I will not say much more in order to remain
> polite
> and civil, but if you check the archives of this list and r-devel you will
> find me _begging_ a few weeks ago to be given a handle to turn off builds
> of
> a package of mine because it could never have its libraries on macOS yet it
> would still always attempt to build on macOS yielding me two ERROR and a
> "bad
> package" stigma.  I still have that problem with a few other packages of
> mine
> lacking a macOS library at CRAN, and it is "difficult" to understate by
> some
> order.
>
I emailed Simon about this and he added to his recipes so hopefully that
will work,
https://github.com/s-u/recipes/commit/b61ee4d82b58f0114475c790f0844f98b918be01


>
> Oh, and did I mention the joy that is Solaris?
>
In theory Solaris should not be hard -- the installation from source is
pretty much a standard configure && make && make install.

curl -OL http://download.oracle.com/berkeley-db/db-6.2.23.NC.tar.gz
tar xf db-6.2.23.NC.tar.gz
cd db-6.2.23.NC/build_unix
../dist/configure --prefix=$HOME --enable-stl
make
make install


BTW in response to Hong: sorry for linking to the wrong wiki page -- in
fact PeakSegDisk does NOT depend on any UCSC tools. Just Berkeley DB STL
C++ library.

>
> In short, this is complicated. See fortunes::fortune(356) (h/t Doug Bates).
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From mrcr@tnheredi@gmez @ending from gm@il@com  Thu Oct 25 11:56:35 2018
From: mrcr@tnheredi@gmez @ending from gm@il@com (=?UTF-8?Q?Maria_Cristina_Heredia_G=C3=B3mez?=)
Date: Thu, 25 Oct 2018 11:56:35 +0200
Subject: [R-pkg-devel] Question: Download package JAR from Github URL to
 /inst/java in an R package
Message-ID: <CACTC0VAmOJhykp7YhoY_YmddAma6KOeKJvbvitbes8p51JtFiA@mail.gmail.com>

Hi everyone!

I have been developing an R package for ordinal and monotonic data named
OCAPIS <https://github.com/CristinaHG/OCAPIS> but algorithms are mainly
built in Scala. So, I provide a FAT Jar
<https://github.com/CristinaHG/OCAPIS/tree/master/OCAPIS/inst/java/scala-2.12>
with the package in /inst/java folder.
Providing that FAT JAR is intended to facilitate the installation to the
user, as he/she will not need to install the Scala Breeze
<https://github.com/scalanlp/breeze> library used for algebraic and numeric
operations. As a result, the package weights 37M and I doubt if CRAN would
accept it.

I was wondering if you guys knew any way that I can specify to download the
.Jar from, for example, the Github repository
<https://github.com/CristinaHG/OCAPIS/tree/master/OCAPIS/inst/java/scala-2.12>
where it is located and place it under /inst/java when installing the
package. Or something similar.

Thanks in advance,

Cristina HG

	[[alternative HTML version deleted]]


From nfultz @ending from gm@il@com  Thu Oct 25 18:57:02 2018
From: nfultz @ending from gm@il@com (Neal Fultz)
Date: Thu, 25 Oct 2018 09:57:02 -0700
Subject: [R-pkg-devel] Question: Download package JAR from Github URL to
 /inst/java in an R package
In-Reply-To: <CACTC0VAmOJhykp7YhoY_YmddAma6KOeKJvbvitbes8p51JtFiA@mail.gmail.com>
References: <CACTC0VAmOJhykp7YhoY_YmddAma6KOeKJvbvitbes8p51JtFiA@mail.gmail.com>
Message-ID: <CAL9B2vfpd+DgNuHGmhHw4_pGrbMXsXkf3BfqpfJJXYSOccgffw@mail.gmail.com>

Hi Marina - several of the AWR packages for using the AWS java sdk are
implemented this way. For example:

https://gitlab.com/daroczig/AWR/blob/master/R/zzz.R#L18

Best,

-Neal


On Thu, Oct 25, 2018 at 4:45 AM Maria Cristina Heredia G?mez <
mrcrstnherediagmez at gmail.com> wrote:

> Hi everyone!
>
> I have been developing an R package for ordinal and monotonic data named
> OCAPIS <https://github.com/CristinaHG/OCAPIS> but algorithms are mainly
> built in Scala. So, I provide a FAT Jar
> <
> https://github.com/CristinaHG/OCAPIS/tree/master/OCAPIS/inst/java/scala-2.12
> >
> with the package in /inst/java folder.
> Providing that FAT JAR is intended to facilitate the installation to the
> user, as he/she will not need to install the Scala Breeze
> <https://github.com/scalanlp/breeze> library used for algebraic and
> numeric
> operations. As a result, the package weights 37M and I doubt if CRAN would
> accept it.
>
> I was wondering if you guys knew any way that I can specify to download the
> .Jar from, for example, the Github repository
> <
> https://github.com/CristinaHG/OCAPIS/tree/master/OCAPIS/inst/java/scala-2.12
> >
> where it is located and place it under /inst/java when installing the
> package. Or something similar.
>
> Thanks in advance,
>
> Cristina HG
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From r@mp@letienne @ending from gm@il@com  Thu Nov  1 23:40:56 2018
From: r@mp@letienne @ending from gm@il@com (Rampal Etienne)
Date: Thu, 1 Nov 2018 23:40:56 +0100
Subject: [R-pkg-devel] nativeRoutines error when using roxygen2 in RStudio
In-Reply-To: <23504.24824.285159.261386@rob.eddelbuettel.com>
References: <CALK03d2axehJd1Cs1Na6UaN0Vi1vGnmnSu+XJwisj_jzQpru9g@mail.gmail.com>
 <23504.24824.285159.261386@rob.eddelbuettel.com>
Message-ID: <c4ae2d75-e048-2c3e-4325-a4ffc0b5e3ce@gmail.com>

Since a few weeks (after updating R-devel and Rtools) I get the 
following error when trying to build a package or document it, when 
using roxygen2 in RStudio:

In R CMD INSTALL Error in nativeRoutines[[lib]] <- routines : object 
'nativeRoutines' not found Calls: suppressPackageStartupMessages ... 
withCallingHandlers -> <Anonymous> -> load_all -> load_dll Execution halted

When I disable roxygen2, I do not get this error, but of course the 
documentation is not created.

I have installed the latest versions of RStudio, Rtools, R-devel, 
roxygen2, pkgload, but the problem persists.

Does anybody have a clue what is causing this? I am using Windows 10, 
and the package contains Fortran code.

Kind regards,
Rampal Etienne

	[[alternative HTML version deleted]]


From georgi@bo@hn@kov @ending from m@nche@ter@@c@uk  Fri Nov  2 08:33:56 2018
From: georgi@bo@hn@kov @ending from m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Fri, 2 Nov 2018 07:33:56 +0000
Subject: [R-pkg-devel] 
 nativeRoutines error when using roxygen2 in RStudio
In-Reply-To: <c4ae2d75-e048-2c3e-4325-a4ffc0b5e3ce@gmail.com>
References: <CALK03d2axehJd1Cs1Na6UaN0Vi1vGnmnSu+XJwisj_jzQpru9g@mail.gmail.com>
 <23504.24824.285159.261386@rob.eddelbuettel.com>,
 <c4ae2d75-e048-2c3e-4325-a4ffc0b5e3ce@gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F6BB927@MBXP01.ds.man.ac.uk>

Try installing the latest development version of roxygen2, if you are not using it already.
There was a bug in the released version preventing installation in some cases. 
If you don't want to use development version of roxygen2,
try putting all filenames in the Collate field in DESCRIPTION on one line and make sure that there is a single space
between them. This should work if your problem is what I think.

By the way, in such cases you will get more informative messages if you run devtools::check(). 

--
Georgi Boshnakov              


________________________________________
From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf of Rampal Etienne [rampaletienne at gmail.com]
Sent: 01 November 2018 22:40
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] nativeRoutines error when using roxygen2 in RStudio

Since a few weeks (after updating R-devel and Rtools) I get the
following error when trying to build a package or document it, when
using roxygen2 in RStudio:

In R CMD INSTALL Error in nativeRoutines[[lib]] <- routines : object
'nativeRoutines' not found Calls: suppressPackageStartupMessages ...
withCallingHandlers -> <Anonymous> -> load_all -> load_dll Execution halted

When I disable roxygen2, I do not get this error, but of course the
documentation is not created.

I have installed the latest versions of RStudio, Rtools, R-devel,
roxygen2, pkgload, but the problem persists.

Does anybody have a clue what is causing this? I am using Windows 10,
and the package contains Fortran code.

Kind regards,
Rampal Etienne

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@mp@letienne @ending from gm@il@com  Tue Nov  6 21:27:21 2018
From: r@mp@letienne @ending from gm@il@com (Rampal Etienne)
Date: Tue, 6 Nov 2018 21:27:21 +0100
Subject: [R-pkg-devel] 
 nativeRoutines error when using roxygen2 in RStudio
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F6BB927@MBXP01.ds.man.ac.uk>
References: <CALK03d2axehJd1Cs1Na6UaN0Vi1vGnmnSu+XJwisj_jzQpru9g@mail.gmail.com>
 <23504.24824.285159.261386@rob.eddelbuettel.com>
 <c4ae2d75-e048-2c3e-4325-a4ffc0b5e3ce@gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F6BB927@MBXP01.ds.man.ac.uk>
Message-ID: <2a99f409-1c34-801c-f432-fe0e6c4fe54f@gmail.com>

Dear Georgi,

Thanks for your suggestions. I have tried to install the development 
version of roxygen2, but to no avail.

I don't have a Collate field in DESCRIPTION.

devtools::check() gives me:

Updating secsse documentation Loading secsse Registered S3 method 
overwritten by 'dplyr': method from as.data.frame.tbl_df tibble 
Registered S3 method overwritten by 'geiger': method from 
unique.multiPhylo ape Error in nativeRoutines[[lib]] <- routines : 
object 'nativeRoutines' not found


Any other suggestions?

Cheers, Rampal

On 02-Nov-18 08:33, Georgi Boshnakov wrote:
> Try installing the latest development version of roxygen2, if you are not using it already.
> There was a bug in the released version preventing installation in some cases.
> If you don't want to use development version of roxygen2,
> try putting all filenames in the Collate field in DESCRIPTION on one line and make sure that there is a single space
> between them. This should work if your problem is what I think.
>
> By the way, in such cases you will get more informative messages if you run devtools::check().
>
> --
> Georgi Boshnakov
>
>
> ________________________________________
> From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf of Rampal Etienne [rampaletienne at gmail.com]
> Sent: 01 November 2018 22:40
> To: r-package-devel at r-project.org
> Subject: [R-pkg-devel] nativeRoutines error when using roxygen2 in RStudio
>
> Since a few weeks (after updating R-devel and Rtools) I get the
> following error when trying to build a package or document it, when
> using roxygen2 in RStudio:
>
> In R CMD INSTALL Error in nativeRoutines[[lib]] <- routines : object
> 'nativeRoutines' not found Calls: suppressPackageStartupMessages ...
> withCallingHandlers -> <Anonymous> -> load_all -> load_dll Execution halted
>
> When I disable roxygen2, I do not get this error, but of course the
> documentation is not created.
>
> I have installed the latest versions of RStudio, Rtools, R-devel,
> roxygen2, pkgload, but the problem persists.
>
> Does anybody have a clue what is causing this? I am using Windows 10,
> and the package contains Fortran code.
>
> Kind regards,
> Rampal Etienne
>
>          [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From gkr@emer @ending from bgc-jen@@mpg@de  Tue Nov  6 22:13:37 2018
From: gkr@emer @ending from bgc-jen@@mpg@de (Guido Kraemer)
Date: Tue, 6 Nov 2018 22:13:37 +0100
Subject: [R-pkg-devel] 
 nativeRoutines error when using roxygen2 in RStudio
In-Reply-To: <2a99f409-1c34-801c-f432-fe0e6c4fe54f@gmail.com>
References: <CALK03d2axehJd1Cs1Na6UaN0Vi1vGnmnSu+XJwisj_jzQpru9g@mail.gmail.com>
 <23504.24824.285159.261386@rob.eddelbuettel.com>
 <c4ae2d75-e048-2c3e-4325-a4ffc0b5e3ce@gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F6BB927@MBXP01.ds.man.ac.uk>
 <2a99f409-1c34-801c-f432-fe0e6c4fe54f@gmail.com>
Message-ID: <d42b1ad0-4584-c83e-419d-2fe624d8e671@bgc-jena.mpg.de>

Dear Rampal:

What version of R are you using? I had this bug appearing a while a go 
on r-devel on travis 
(https://stackoverflow.com/questions/52532026/r-object-nativeroutines-not-found/52924244#52924244), 
it disappeared after a while.

Cheers,

Guido

On 11/6/18 9:27 PM, Rampal Etienne wrote:
> Dear Georgi,
>
> Thanks for your suggestions. I have tried to install the development
> version of roxygen2, but to no avail.
>
> I don't have a Collate field in DESCRIPTION.
>
> devtools::check() gives me:
>
> Updating secsse documentation Loading secsse Registered S3 method
> overwritten by 'dplyr': method from as.data.frame.tbl_df tibble
> Registered S3 method overwritten by 'geiger': method from
> unique.multiPhylo ape Error in nativeRoutines[[lib]] <- routines :
> object 'nativeRoutines' not found
>
>
> Any other suggestions?
>
> Cheers, Rampal
>
> On 02-Nov-18 08:33, Georgi Boshnakov wrote:
>> Try installing the latest development version of roxygen2, if you are not using it already.
>> There was a bug in the released version preventing installation in some cases.
>> If you don't want to use development version of roxygen2,
>> try putting all filenames in the Collate field in DESCRIPTION on one line and make sure that there is a single space
>> between them. This should work if your problem is what I think.
>>
>> By the way, in such cases you will get more informative messages if you run devtools::check().
>>
>> --
>> Georgi Boshnakov
>>
>>
>> ________________________________________
>> From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf of Rampal Etienne [rampaletienne at gmail.com]
>> Sent: 01 November 2018 22:40
>> To: r-package-devel at r-project.org
>> Subject: [R-pkg-devel] nativeRoutines error when using roxygen2 in RStudio
>>
>> Since a few weeks (after updating R-devel and Rtools) I get the
>> following error when trying to build a package or document it, when
>> using roxygen2 in RStudio:
>>
>> In R CMD INSTALL Error in nativeRoutines[[lib]] <- routines : object
>> 'nativeRoutines' not found Calls: suppressPackageStartupMessages ...
>> withCallingHandlers -> <Anonymous> -> load_all -> load_dll Execution halted
>>
>> When I disable roxygen2, I do not get this error, but of course the
>> documentation is not created.
>>
>> I have installed the latest versions of RStudio, Rtools, R-devel,
>> roxygen2, pkgload, but the problem persists.
>>
>> Does anybody have a clue what is causing this? I am using Windows 10,
>> and the package contains Fortran code.
>>
>> Kind regards,
>> Rampal Etienne
>>
>>           [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@mp@letienne @ending from gm@il@com  Tue Nov  6 22:42:30 2018
From: r@mp@letienne @ending from gm@il@com (Rampal Etienne)
Date: Tue, 6 Nov 2018 22:42:30 +0100
Subject: [R-pkg-devel] 
 nativeRoutines error when using roxygen2 in RStudio
In-Reply-To: <d42b1ad0-4584-c83e-419d-2fe624d8e671@bgc-jena.mpg.de>
References: <CALK03d2axehJd1Cs1Na6UaN0Vi1vGnmnSu+XJwisj_jzQpru9g@mail.gmail.com>
 <23504.24824.285159.261386@rob.eddelbuettel.com>
 <c4ae2d75-e048-2c3e-4325-a4ffc0b5e3ce@gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F6BB927@MBXP01.ds.man.ac.uk>
 <2a99f409-1c34-801c-f432-fe0e6c4fe54f@gmail.com>
 <d42b1ad0-4584-c83e-419d-2fe624d8e671@bgc-jena.mpg.de>
Message-ID: <9514ccbc-4adf-8882-4c74-464a411c0559@gmail.com>

Hi Guido,

I am using the latest version of R-devel (on Windows). I've been having 
these problems since I updated R-devel mid-October (my previous version 
was a few months old). I have been updating R-devel since then, hoping 
that the problem would be disappear, but it is still there.

Cheers, Rampal


On 06-Nov-18 22:13, Guido Kraemer wrote:
> Dear Rampal:
>
> What version of R are you using? I had this bug appearing a while a go 
> on r-devel on travis 
> (https://stackoverflow.com/questions/52532026/r-object-nativeroutines-not-found/52924244#52924244), 
> it disappeared after a while.
>
> Cheers,
>
> Guido
>
> On 11/6/18 9:27 PM, Rampal Etienne wrote:
>> Dear Georgi,
>>
>> Thanks for your suggestions. I have tried to install the development
>> version of roxygen2, but to no avail.
>>
>> I don't have a Collate field in DESCRIPTION.
>>
>> devtools::check() gives me:
>>
>> Updating secsse documentation Loading secsse Registered S3 method
>> overwritten by 'dplyr': method from as.data.frame.tbl_df tibble
>> Registered S3 method overwritten by 'geiger': method from
>> unique.multiPhylo ape Error in nativeRoutines[[lib]] <- routines :
>> object 'nativeRoutines' not found
>>
>>
>> Any other suggestions?
>>
>> Cheers, Rampal
>>
>> On 02-Nov-18 08:33, Georgi Boshnakov wrote:
>>> Try installing the latest development version of roxygen2, if you 
>>> are not using it already.
>>> There was a bug in the released version preventing installation in 
>>> some cases.
>>> If you don't want to use development version of roxygen2,
>>> try putting all filenames in the Collate field in DESCRIPTION on one 
>>> line and make sure that there is a single space
>>> between them. This should work if your problem is what I think.
>>>
>>> By the way, in such cases you will get more informative messages if 
>>> you run devtools::check().
>>>
>>> -- 
>>> Georgi Boshnakov
>>>
>>>
>>> ________________________________________
>>> From: R-package-devel [r-package-devel-bounces at r-project.org] on 
>>> behalf of Rampal Etienne [rampaletienne at gmail.com]
>>> Sent: 01 November 2018 22:40
>>> To: r-package-devel at r-project.org
>>> Subject: [R-pkg-devel] nativeRoutines error when using roxygen2 in 
>>> RStudio
>>>
>>> Since a few weeks (after updating R-devel and Rtools) I get the
>>> following error when trying to build a package or document it, when
>>> using roxygen2 in RStudio:
>>>
>>> In R CMD INSTALL Error in nativeRoutines[[lib]] <- routines : object
>>> 'nativeRoutines' not found Calls: suppressPackageStartupMessages ...
>>> withCallingHandlers -> <Anonymous> -> load_all -> load_dll Execution 
>>> halted
>>>
>>> When I disable roxygen2, I do not get this error, but of course the
>>> documentation is not created.
>>>
>>> I have installed the latest versions of RStudio, Rtools, R-devel,
>>> roxygen2, pkgload, but the problem persists.
>>>
>>> Does anybody have a clue what is causing this? I am using Windows 10,
>>> and the package contains Fortran code.
>>>
>>> Kind regards,
>>> Rampal Etienne
>>>
>>> ????????? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @ending from gm@il@com  Tue Nov  6 22:50:43 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Tue, 6 Nov 2018 16:50:43 -0500
Subject: [R-pkg-devel] 
 nativeRoutines error when using roxygen2 in RStudio
In-Reply-To: <2a99f409-1c34-801c-f432-fe0e6c4fe54f@gmail.com>
References: <CALK03d2axehJd1Cs1Na6UaN0Vi1vGnmnSu+XJwisj_jzQpru9g@mail.gmail.com>
 <23504.24824.285159.261386@rob.eddelbuettel.com>
 <c4ae2d75-e048-2c3e-4325-a4ffc0b5e3ce@gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F6BB927@MBXP01.ds.man.ac.uk>
 <2a99f409-1c34-801c-f432-fe0e6c4fe54f@gmail.com>
Message-ID: <cffe6ae8-47f9-3335-f324-f26499207c38@gmail.com>

On 06/11/2018 3:27 PM, Rampal Etienne wrote:
> Dear Georgi,
> 
> Thanks for your suggestions. I have tried to install the development
> version of roxygen2, but to no avail.
> 
> I don't have a Collate field in DESCRIPTION.
> 
> devtools::check() gives me:
> 
> Updating secsse documentation Loading secsse Registered S3 method
> overwritten by 'dplyr': method from as.data.frame.tbl_df tibble
> Registered S3 method overwritten by 'geiger': method from
> unique.multiPhylo ape Error in nativeRoutines[[lib]] <- routines :
> object 'nativeRoutines' not found

Do you get that error if you run "R CMD check" on the tarball of your 
package?

If so, how comfortable are you with debugging R code?  I can tell you 
how to debug the check process, but it's a little tricky.

Duncan Murdoch

> 
> 
> Any other suggestions?
> 
> Cheers, Rampal
> 
> On 02-Nov-18 08:33, Georgi Boshnakov wrote:
>> Try installing the latest development version of roxygen2, if you are not using it already.
>> There was a bug in the released version preventing installation in some cases.
>> If you don't want to use development version of roxygen2,
>> try putting all filenames in the Collate field in DESCRIPTION on one line and make sure that there is a single space
>> between them. This should work if your problem is what I think.
>>
>> By the way, in such cases you will get more informative messages if you run devtools::check().
>>
>> --
>> Georgi Boshnakov
>>
>>
>> ________________________________________
>> From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf of Rampal Etienne [rampaletienne at gmail.com]
>> Sent: 01 November 2018 22:40
>> To: r-package-devel at r-project.org
>> Subject: [R-pkg-devel] nativeRoutines error when using roxygen2 in RStudio
>>
>> Since a few weeks (after updating R-devel and Rtools) I get the
>> following error when trying to build a package or document it, when
>> using roxygen2 in RStudio:
>>
>> In R CMD INSTALL Error in nativeRoutines[[lib]] <- routines : object
>> 'nativeRoutines' not found Calls: suppressPackageStartupMessages ...
>> withCallingHandlers -> <Anonymous> -> load_all -> load_dll Execution halted
>>
>> When I disable roxygen2, I do not get this error, but of course the
>> documentation is not created.
>>
>> I have installed the latest versions of RStudio, Rtools, R-devel,
>> roxygen2, pkgload, but the problem persists.
>>
>> Does anybody have a clue what is causing this? I am using Windows 10,
>> and the package contains Fortran code.
>>
>> Kind regards,
>> Rampal Etienne
>>
>>           [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From r@mp@letienne @ending from gm@il@com  Tue Nov  6 23:17:37 2018
From: r@mp@letienne @ending from gm@il@com (Rampal Etienne)
Date: Tue, 6 Nov 2018 23:17:37 +0100
Subject: [R-pkg-devel] 
 nativeRoutines error when using roxygen2 in RStudio
In-Reply-To: <cffe6ae8-47f9-3335-f324-f26499207c38@gmail.com>
References: <CALK03d2axehJd1Cs1Na6UaN0Vi1vGnmnSu+XJwisj_jzQpru9g@mail.gmail.com>
 <23504.24824.285159.261386@rob.eddelbuettel.com>
 <c4ae2d75-e048-2c3e-4325-a4ffc0b5e3ce@gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F6BB927@MBXP01.ds.man.ac.uk>
 <2a99f409-1c34-801c-f432-fe0e6c4fe54f@gmail.com>
 <cffe6ae8-47f9-3335-f324-f26499207c38@gmail.com>
Message-ID: <db420cd8-bf07-fd86-4562-213bd0cf1e67@gmail.com>

Dear Duncan,

I don't get it when using R CMD check.

I only get it when building/loading using roxygen2 or when I call 
load_all (which roxygen2 does too, I think). load_all calls load_dll 
which then throws this error. I have registered my routines in 
R_init_secsse.c:

void R_init_secsse(DllInfo *dll)
{
 ? R_registerRoutines(dll, NULL, NULL, FortranEntries, NULL);
 ? R_useDynamicSymbols(dll, FALSE);
}

Any suggestions?

Cheers, Rampal


On 06-Nov-18 22:50, Duncan Murdoch wrote:
> On 06/11/2018 3:27 PM, Rampal Etienne wrote:
>> Dear Georgi,
>>
>> Thanks for your suggestions. I have tried to install the development
>> version of roxygen2, but to no avail.
>>
>> I don't have a Collate field in DESCRIPTION.
>>
>> devtools::check() gives me:
>>
>> Updating secsse documentation Loading secsse Registered S3 method
>> overwritten by 'dplyr': method from as.data.frame.tbl_df tibble
>> Registered S3 method overwritten by 'geiger': method from
>> unique.multiPhylo ape Error in nativeRoutines[[lib]] <- routines :
>> object 'nativeRoutines' not found
>
> Do you get that error if you run "R CMD check" on the tarball of your 
> package?
>
> If so, how comfortable are you with debugging R code?? I can tell you 
> how to debug the check process, but it's a little tricky.
>
> Duncan Murdoch
>
>>
>>
>> Any other suggestions?
>>
>> Cheers, Rampal
>>
>> On 02-Nov-18 08:33, Georgi Boshnakov wrote:
>>> Try installing the latest development version of roxygen2, if you 
>>> are not using it already.
>>> There was a bug in the released version preventing installation in 
>>> some cases.
>>> If you don't want to use development version of roxygen2,
>>> try putting all filenames in the Collate field in DESCRIPTION on one 
>>> line and make sure that there is a single space
>>> between them. This should work if your problem is what I think.
>>>
>>> By the way, in such cases you will get more informative messages if 
>>> you run devtools::check().
>>>
>>> -- 
>>> Georgi Boshnakov
>>>
>>>
>>> ________________________________________
>>> From: R-package-devel [r-package-devel-bounces at r-project.org] on 
>>> behalf of Rampal Etienne [rampaletienne at gmail.com]
>>> Sent: 01 November 2018 22:40
>>> To: r-package-devel at r-project.org
>>> Subject: [R-pkg-devel] nativeRoutines error when using roxygen2 in 
>>> RStudio
>>>
>>> Since a few weeks (after updating R-devel and Rtools) I get the
>>> following error when trying to build a package or document it, when
>>> using roxygen2 in RStudio:
>>>
>>> In R CMD INSTALL Error in nativeRoutines[[lib]] <- routines : object
>>> 'nativeRoutines' not found Calls: suppressPackageStartupMessages ...
>>> withCallingHandlers -> <Anonymous> -> load_all -> load_dll Execution 
>>> halted
>>>
>>> When I disable roxygen2, I do not get this error, but of course the
>>> documentation is not created.
>>>
>>> I have installed the latest versions of RStudio, Rtools, R-devel,
>>> roxygen2, pkgload, but the problem persists.
>>>
>>> Does anybody have a clue what is causing this? I am using Windows 10,
>>> and the package contains Fortran code.
>>>
>>> Kind regards,
>>> Rampal Etienne
>>>
>>> ????????? [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>


From murdoch@dunc@n @ending from gm@il@com  Wed Nov  7 01:25:45 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Tue, 6 Nov 2018 19:25:45 -0500
Subject: [R-pkg-devel] 
 nativeRoutines error when using roxygen2 in RStudio
In-Reply-To: <db420cd8-bf07-fd86-4562-213bd0cf1e67@gmail.com>
References: <CALK03d2axehJd1Cs1Na6UaN0Vi1vGnmnSu+XJwisj_jzQpru9g@mail.gmail.com>
 <23504.24824.285159.261386@rob.eddelbuettel.com>
 <c4ae2d75-e048-2c3e-4325-a4ffc0b5e3ce@gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F6BB927@MBXP01.ds.man.ac.uk>
 <2a99f409-1c34-801c-f432-fe0e6c4fe54f@gmail.com>
 <cffe6ae8-47f9-3335-f324-f26499207c38@gmail.com>
 <db420cd8-bf07-fd86-4562-213bd0cf1e67@gmail.com>
Message-ID: <31c2042d-3eaa-49da-9bd5-eb9714df9516@gmail.com>

On 06/11/2018 5:17 PM, Rampal Etienne wrote:
> Dear Duncan,
> 
> I don't get it when using R CMD check.
> 
> I only get it when building/loading using roxygen2 or when I call
> load_all (which roxygen2 does too, I think). load_all calls load_dll
> which then throws this error. I have registered my routines in
> R_init_secsse.c:
> 
> void R_init_secsse(DllInfo *dll)
> {
>   ? R_registerRoutines(dll, NULL, NULL, FortranEntries, NULL);
>   ? R_useDynamicSymbols(dll, FALSE);
> }
> 
> Any suggestions?

Nope!  Sounds like a bug in devtools/roxygen2, but I don't know either 
of those packages well.

Duncan Murdoch

> 
> Cheers, Rampal
> 
> 
> On 06-Nov-18 22:50, Duncan Murdoch wrote:
>> On 06/11/2018 3:27 PM, Rampal Etienne wrote:
>>> Dear Georgi,
>>>
>>> Thanks for your suggestions. I have tried to install the development
>>> version of roxygen2, but to no avail.
>>>
>>> I don't have a Collate field in DESCRIPTION.
>>>
>>> devtools::check() gives me:
>>>
>>> Updating secsse documentation Loading secsse Registered S3 method
>>> overwritten by 'dplyr': method from as.data.frame.tbl_df tibble
>>> Registered S3 method overwritten by 'geiger': method from
>>> unique.multiPhylo ape Error in nativeRoutines[[lib]] <- routines :
>>> object 'nativeRoutines' not found
>>
>> Do you get that error if you run "R CMD check" on the tarball of your
>> package?
>>
>> If so, how comfortable are you with debugging R code?? I can tell you
>> how to debug the check process, but it's a little tricky.
>>
>> Duncan Murdoch
>>
>>>
>>>
>>> Any other suggestions?
>>>
>>> Cheers, Rampal
>>>
>>> On 02-Nov-18 08:33, Georgi Boshnakov wrote:
>>>> Try installing the latest development version of roxygen2, if you
>>>> are not using it already.
>>>> There was a bug in the released version preventing installation in
>>>> some cases.
>>>> If you don't want to use development version of roxygen2,
>>>> try putting all filenames in the Collate field in DESCRIPTION on one
>>>> line and make sure that there is a single space
>>>> between them. This should work if your problem is what I think.
>>>>
>>>> By the way, in such cases you will get more informative messages if
>>>> you run devtools::check().
>>>>
>>>> -- 
>>>> Georgi Boshnakov
>>>>
>>>>
>>>> ________________________________________
>>>> From: R-package-devel [r-package-devel-bounces at r-project.org] on
>>>> behalf of Rampal Etienne [rampaletienne at gmail.com]
>>>> Sent: 01 November 2018 22:40
>>>> To: r-package-devel at r-project.org
>>>> Subject: [R-pkg-devel] nativeRoutines error when using roxygen2 in
>>>> RStudio
>>>>
>>>> Since a few weeks (after updating R-devel and Rtools) I get the
>>>> following error when trying to build a package or document it, when
>>>> using roxygen2 in RStudio:
>>>>
>>>> In R CMD INSTALL Error in nativeRoutines[[lib]] <- routines : object
>>>> 'nativeRoutines' not found Calls: suppressPackageStartupMessages ...
>>>> withCallingHandlers -> <Anonymous> -> load_all -> load_dll Execution
>>>> halted
>>>>
>>>> When I disable roxygen2, I do not get this error, but of course the
>>>> documentation is not created.
>>>>
>>>> I have installed the latest versions of RStudio, Rtools, R-devel,
>>>> roxygen2, pkgload, but the problem persists.
>>>>
>>>> Does anybody have a clue what is causing this? I am using Windows 10,
>>>> and the package contains Fortran code.
>>>>
>>>> Kind regards,
>>>> Rampal Etienne
>>>>
>>>>  ????????? [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>>
>>>  ????[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>


From georgi@bo@hn@kov @ending from m@nche@ter@@c@uk  Wed Nov  7 12:45:49 2018
From: georgi@bo@hn@kov @ending from m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Wed, 7 Nov 2018 11:45:49 +0000
Subject: [R-pkg-devel] 
 nativeRoutines error when using roxygen2 in RStudio
In-Reply-To: <31c2042d-3eaa-49da-9bd5-eb9714df9516@gmail.com>
References: <CALK03d2axehJd1Cs1Na6UaN0Vi1vGnmnSu+XJwisj_jzQpru9g@mail.gmail.com>
 <23504.24824.285159.261386@rob.eddelbuettel.com>
 <c4ae2d75-e048-2c3e-4325-a4ffc0b5e3ce@gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F6BB927@MBXP01.ds.man.ac.uk>
 <2a99f409-1c34-801c-f432-fe0e6c4fe54f@gmail.com>
 <cffe6ae8-47f9-3335-f324-f26499207c38@gmail.com>
 <db420cd8-bf07-fd86-4562-213bd0cf1e67@gmail.com>
 <31c2042d-3eaa-49da-9bd5-eb9714df9516@gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F6BBEA9@MBXP01.ds.man.ac.uk>

Without code we are guessing.  A bug is possible but I will make another guess suggestion.

Delete all binary files created by devtools during compilation in your package directory.
devtools::load_all() is so fast partly because it recompiles the C/Fortran files only when necessary
but sometimes compilation may be needed even if devtools thinks otherwise.

 Georgi Boshnakov


-----Original Message-----
From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com] 
Sent: 07 November 2018 00:26
To: Rampal Etienne; Georgi Boshnakov; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] nativeRoutines error when using roxygen2 in RStudio

On 06/11/2018 5:17 PM, Rampal Etienne wrote:
> Dear Duncan,
> 
> I don't get it when using R CMD check.
> 
> I only get it when building/loading using roxygen2 or when I call
> load_all (which roxygen2 does too, I think). load_all calls load_dll
> which then throws this error. I have registered my routines in
> R_init_secsse.c:
> 
> void R_init_secsse(DllInfo *dll)
> {
>   ? R_registerRoutines(dll, NULL, NULL, FortranEntries, NULL);
>   ? R_useDynamicSymbols(dll, FALSE);
> }
> 
> Any suggestions?

Nope!  Sounds like a bug in devtools/roxygen2, but I don't know either 
of those packages well.

Duncan Murdoch

> 
> Cheers, Rampal
> 
> 
> On 06-Nov-18 22:50, Duncan Murdoch wrote:
>> On 06/11/2018 3:27 PM, Rampal Etienne wrote:
>>> Dear Georgi,
>>>
>>> Thanks for your suggestions. I have tried to install the development
>>> version of roxygen2, but to no avail.
>>>
>>> I don't have a Collate field in DESCRIPTION.
>>>
>>> devtools::check() gives me:
>>>
>>> Updating secsse documentation Loading secsse Registered S3 method
>>> overwritten by 'dplyr': method from as.data.frame.tbl_df tibble
>>> Registered S3 method overwritten by 'geiger': method from
>>> unique.multiPhylo ape Error in nativeRoutines[[lib]] <- routines :
>>> object 'nativeRoutines' not found
>>
>> Do you get that error if you run "R CMD check" on the tarball of your
>> package?
>>
>> If so, how comfortable are you with debugging R code?? I can tell you
>> how to debug the check process, but it's a little tricky.
>>
>> Duncan Murdoch
>>
>>>
>>>
>>> Any other suggestions?
>>>
>>> Cheers, Rampal
>>>
>>> On 02-Nov-18 08:33, Georgi Boshnakov wrote:
>>>> Try installing the latest development version of roxygen2, if you
>>>> are not using it already.
>>>> There was a bug in the released version preventing installation in
>>>> some cases.
>>>> If you don't want to use development version of roxygen2,
>>>> try putting all filenames in the Collate field in DESCRIPTION on one
>>>> line and make sure that there is a single space
>>>> between them. This should work if your problem is what I think.
>>>>
>>>> By the way, in such cases you will get more informative messages if
>>>> you run devtools::check().
>>>>
>>>> -- 
>>>> Georgi Boshnakov
>>>>
>>>>
>>>> ________________________________________
>>>> From: R-package-devel [r-package-devel-bounces at r-project.org] on
>>>> behalf of Rampal Etienne [rampaletienne at gmail.com]
>>>> Sent: 01 November 2018 22:40
>>>> To: r-package-devel at r-project.org
>>>> Subject: [R-pkg-devel] nativeRoutines error when using roxygen2 in
>>>> RStudio
>>>>
>>>> Since a few weeks (after updating R-devel and Rtools) I get the
>>>> following error when trying to build a package or document it, when
>>>> using roxygen2 in RStudio:
>>>>
>>>> In R CMD INSTALL Error in nativeRoutines[[lib]] <- routines : object
>>>> 'nativeRoutines' not found Calls: suppressPackageStartupMessages ...
>>>> withCallingHandlers -> <Anonymous> -> load_all -> load_dll Execution
>>>> halted
>>>>
>>>> When I disable roxygen2, I do not get this error, but of course the
>>>> documentation is not created.
>>>>
>>>> I have installed the latest versions of RStudio, Rtools, R-devel,
>>>> roxygen2, pkgload, but the problem persists.
>>>>
>>>> Does anybody have a clue what is causing this? I am using Windows 10,
>>>> and the package contains Fortran code.
>>>>
>>>> Kind regards,
>>>> Rampal Etienne
>>>>
>>>>  ????????? [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>>
>>>  ????[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
> 


From r@mp@letienne @ending from gm@il@com  Wed Nov  7 15:27:20 2018
From: r@mp@letienne @ending from gm@il@com (Rampal S. Etienne)
Date: Wed, 7 Nov 2018 15:27:20 +0100
Subject: [R-pkg-devel] 
 nativeRoutines error when using roxygen2 in RStudio
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F6BBEA9@MBXP01.ds.man.ac.uk>
References: <CALK03d2axehJd1Cs1Na6UaN0Vi1vGnmnSu+XJwisj_jzQpru9g@mail.gmail.com>
 <23504.24824.285159.261386@rob.eddelbuettel.com>
 <c4ae2d75-e048-2c3e-4325-a4ffc0b5e3ce@gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F6BB927@MBXP01.ds.man.ac.uk>
 <2a99f409-1c34-801c-f432-fe0e6c4fe54f@gmail.com>
 <cffe6ae8-47f9-3335-f324-f26499207c38@gmail.com>
 <db420cd8-bf07-fd86-4562-213bd0cf1e67@gmail.com>
 <31c2042d-3eaa-49da-9bd5-eb9714df9516@gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F6BBEA9@MBXP01.ds.man.ac.uk>
Message-ID: <47f98e79-5a40-7918-9220-84d994ed7145@gmail.com>

Dear Georgi,

Thanks for the suggestion, but that does not work either.

I can send the code if that would help. But note that the code was
working fine until I installed a new R-devel version. But perhaps there
is an update in how the routines should be registered. I am doing it
like this:

#include <R.h>
#include <Rinternals.h>
#include <stdlib.h> // for NULL
#include <R_ext/Rdynload.h>

/* .Fortran calls */
extern void F77_NAME(fill1d)(double *vec, int *DIMP, double *parms, int
*II);
extern void F77_NAME(initmod)(void (*steadyparms)(int *, double *));
extern void F77_NAME(runmod)(int *neq, double *t, double *Conc, double
*dConc, double *yout, int *ip);

static const R_FortranMethodDef FortranEntries[] = {
  {"fill1d", (DL_FUNC) &F77_NAME(fill1d),  4},
  {"initmod", (DL_FUNC) &F77_NAME(initmod),  1},
  {"runmod", (DL_FUNC) &F77_NAME(runmod),  6},
  {NULL, NULL, 0}
};

void R_init_secsse(DllInfo *dll)
{
  R_registerRoutines(dll, NULL, NULL, FortranEntries, NULL);
  R_useDynamicSymbols(dll, FALSE);
}

Does that look OK?

Cheers, Rampal

On 7-11-2018 12:45, Georgi Boshnakov wrote:
> Without code we are guessing.  A bug is possible but I will make another guess suggestion.
>
> Delete all binary files created by devtools during compilation in your package directory.
> devtools::load_all() is so fast partly because it recompiles the C/Fortran files only when necessary
> but sometimes compilation may be needed even if devtools thinks otherwise.
>
>  Georgi Boshnakov
>
>
> -----Original Message-----
> From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com] 
> Sent: 07 November 2018 00:26
> To: Rampal Etienne; Georgi Boshnakov; r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] nativeRoutines error when using roxygen2 in RStudio
>
> On 06/11/2018 5:17 PM, Rampal Etienne wrote:
>> Dear Duncan,
>>
>> I don't get it when using R CMD check.
>>
>> I only get it when building/loading using roxygen2 or when I call
>> load_all (which roxygen2 does too, I think). load_all calls load_dll
>> which then throws this error. I have registered my routines in
>> R_init_secsse.c:
>>
>> void R_init_secsse(DllInfo *dll)
>> {
>>     R_registerRoutines(dll, NULL, NULL, FortranEntries, NULL);
>>     R_useDynamicSymbols(dll, FALSE);
>> }
>>
>> Any suggestions?
> Nope!  Sounds like a bug in devtools/roxygen2, but I don't know either 
> of those packages well.
>
> Duncan Murdoch
>
>> Cheers, Rampal
>>
>>
>> On 06-Nov-18 22:50, Duncan Murdoch wrote:
>>> On 06/11/2018 3:27 PM, Rampal Etienne wrote:
>>>> Dear Georgi,
>>>>
>>>> Thanks for your suggestions. I have tried to install the development
>>>> version of roxygen2, but to no avail.
>>>>
>>>> I don't have a Collate field in DESCRIPTION.
>>>>
>>>> devtools::check() gives me:
>>>>
>>>> Updating secsse documentation Loading secsse Registered S3 method
>>>> overwritten by 'dplyr': method from as.data.frame.tbl_df tibble
>>>> Registered S3 method overwritten by 'geiger': method from
>>>> unique.multiPhylo ape Error in nativeRoutines[[lib]] <- routines :
>>>> object 'nativeRoutines' not found
>>> Do you get that error if you run "R CMD check" on the tarball of your
>>> package?
>>>
>>> If so, how comfortable are you with debugging R code?  I can tell you
>>> how to debug the check process, but it's a little tricky.
>>>
>>> Duncan Murdoch
>>>
>>>>
>>>> Any other suggestions?
>>>>
>>>> Cheers, Rampal
>>>>
>>>> On 02-Nov-18 08:33, Georgi Boshnakov wrote:
>>>>> Try installing the latest development version of roxygen2, if you
>>>>> are not using it already.
>>>>> There was a bug in the released version preventing installation in
>>>>> some cases.
>>>>> If you don't want to use development version of roxygen2,
>>>>> try putting all filenames in the Collate field in DESCRIPTION on one
>>>>> line and make sure that there is a single space
>>>>> between them. This should work if your problem is what I think.
>>>>>
>>>>> By the way, in such cases you will get more informative messages if
>>>>> you run devtools::check().
>>>>>
>>>>> -- 
>>>>> Georgi Boshnakov
>>>>>
>>>>>
>>>>> ________________________________________
>>>>> From: R-package-devel [r-package-devel-bounces at r-project.org] on
>>>>> behalf of Rampal Etienne [rampaletienne at gmail.com]
>>>>> Sent: 01 November 2018 22:40
>>>>> To: r-package-devel at r-project.org
>>>>> Subject: [R-pkg-devel] nativeRoutines error when using roxygen2 in
>>>>> RStudio
>>>>>
>>>>> Since a few weeks (after updating R-devel and Rtools) I get the
>>>>> following error when trying to build a package or document it, when
>>>>> using roxygen2 in RStudio:
>>>>>
>>>>> In R CMD INSTALL Error in nativeRoutines[[lib]] <- routines : object
>>>>> 'nativeRoutines' not found Calls: suppressPackageStartupMessages ...
>>>>> withCallingHandlers -> <Anonymous> -> load_all -> load_dll Execution
>>>>> halted
>>>>>
>>>>> When I disable roxygen2, I do not get this error, but of course the
>>>>> documentation is not created.
>>>>>
>>>>> I have installed the latest versions of RStudio, Rtools, R-devel,
>>>>> roxygen2, pkgload, but the problem persists.
>>>>>
>>>>> Does anybody have a clue what is causing this? I am using Windows 10,
>>>>> and the package contains Fortran code.
>>>>>
>>>>> Kind regards,
>>>>> Rampal Etienne
>>>>>
>>>>>            [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>>      [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>


From wdunl@p @ending from tibco@com  Wed Nov  7 16:59:27 2018
From: wdunl@p @ending from tibco@com (William Dunlap)
Date: Wed, 7 Nov 2018 07:59:27 -0800
Subject: [R-pkg-devel] 
 nativeRoutines error when using roxygen2 in RStudio
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F6BBEA9@MBXP01.ds.man.ac.uk>
References: <CALK03d2axehJd1Cs1Na6UaN0Vi1vGnmnSu+XJwisj_jzQpru9g@mail.gmail.com>
 <23504.24824.285159.261386@rob.eddelbuettel.com>
 <c4ae2d75-e048-2c3e-4325-a4ffc0b5e3ce@gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F6BB927@MBXP01.ds.man.ac.uk>
 <2a99f409-1c34-801c-f432-fe0e6c4fe54f@gmail.com>
 <cffe6ae8-47f9-3335-f324-f26499207c38@gmail.com>
 <db420cd8-bf07-fd86-4562-213bd0cf1e67@gmail.com>
 <31c2042d-3eaa-49da-9bd5-eb9714df9516@gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F6BBEA9@MBXP01.ds.man.ac.uk>
Message-ID: <CAF8bMcYMc1XojEm3ePJy4jTbGb6CYAweX-tJSjhNA2CmokXW+g@mail.gmail.com>

After installing a new version of R the OP may have to rebuild (and retest)
packages like pkgload that define functions by grabbing functions from the
base package and modifying them, as in pkgload/R/namespace-env.r:

onload_assign("makeNamespace",
  eval(
    modify_lang(
      extract_lang(body(loadNamespace),

        # Find makeNamespace definition
        comp_lang, y = quote(makeNamespace <- NULL), idx = 1:2)[[3]],

      # Replace call to .Internal(registerNamespace()) is replaced by a
call to
      # register_namespace
      function(x) {
        if (comp_lang(x, quote(.Internal(registerNamespace(name, env))))) {
          quote(register_namespace(name, env))
        } else {
          x
        }
      }))
)




Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Wed, Nov 7, 2018 at 3:45 AM, Georgi Boshnakov <
georgi.boshnakov at manchester.ac.uk> wrote:

> Without code we are guessing.  A bug is possible but I will make another
> guess suggestion.
>
> Delete all binary files created by devtools during compilation in your
> package directory.
> devtools::load_all() is so fast partly because it recompiles the C/Fortran
> files only when necessary
> but sometimes compilation may be needed even if devtools thinks otherwise.
>
>  Georgi Boshnakov
>
>
> -----Original Message-----
> From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com]
> Sent: 07 November 2018 00:26
> To: Rampal Etienne; Georgi Boshnakov; r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] nativeRoutines error when using roxygen2 in
> RStudio
>
> On 06/11/2018 5:17 PM, Rampal Etienne wrote:
> > Dear Duncan,
> >
> > I don't get it when using R CMD check.
> >
> > I only get it when building/loading using roxygen2 or when I call
> > load_all (which roxygen2 does too, I think). load_all calls load_dll
> > which then throws this error. I have registered my routines in
> > R_init_secsse.c:
> >
> > void R_init_secsse(DllInfo *dll)
> > {
> >     R_registerRoutines(dll, NULL, NULL, FortranEntries, NULL);
> >     R_useDynamicSymbols(dll, FALSE);
> > }
> >
> > Any suggestions?
>
> Nope!  Sounds like a bug in devtools/roxygen2, but I don't know either
> of those packages well.
>
> Duncan Murdoch
>
> >
> > Cheers, Rampal
> >
> >
> > On 06-Nov-18 22:50, Duncan Murdoch wrote:
> >> On 06/11/2018 3:27 PM, Rampal Etienne wrote:
> >>> Dear Georgi,
> >>>
> >>> Thanks for your suggestions. I have tried to install the development
> >>> version of roxygen2, but to no avail.
> >>>
> >>> I don't have a Collate field in DESCRIPTION.
> >>>
> >>> devtools::check() gives me:
> >>>
> >>> Updating secsse documentation Loading secsse Registered S3 method
> >>> overwritten by 'dplyr': method from as.data.frame.tbl_df tibble
> >>> Registered S3 method overwritten by 'geiger': method from
> >>> unique.multiPhylo ape Error in nativeRoutines[[lib]] <- routines :
> >>> object 'nativeRoutines' not found
> >>
> >> Do you get that error if you run "R CMD check" on the tarball of your
> >> package?
> >>
> >> If so, how comfortable are you with debugging R code?  I can tell you
> >> how to debug the check process, but it's a little tricky.
> >>
> >> Duncan Murdoch
> >>
> >>>
> >>>
> >>> Any other suggestions?
> >>>
> >>> Cheers, Rampal
> >>>
> >>> On 02-Nov-18 08:33, Georgi Boshnakov wrote:
> >>>> Try installing the latest development version of roxygen2, if you
> >>>> are not using it already.
> >>>> There was a bug in the released version preventing installation in
> >>>> some cases.
> >>>> If you don't want to use development version of roxygen2,
> >>>> try putting all filenames in the Collate field in DESCRIPTION on one
> >>>> line and make sure that there is a single space
> >>>> between them. This should work if your problem is what I think.
> >>>>
> >>>> By the way, in such cases you will get more informative messages if
> >>>> you run devtools::check().
> >>>>
> >>>> --
> >>>> Georgi Boshnakov
> >>>>
> >>>>
> >>>> ________________________________________
> >>>> From: R-package-devel [r-package-devel-bounces at r-project.org] on
> >>>> behalf of Rampal Etienne [rampaletienne at gmail.com]
> >>>> Sent: 01 November 2018 22:40
> >>>> To: r-package-devel at r-project.org
> >>>> Subject: [R-pkg-devel] nativeRoutines error when using roxygen2 in
> >>>> RStudio
> >>>>
> >>>> Since a few weeks (after updating R-devel and Rtools) I get the
> >>>> following error when trying to build a package or document it, when
> >>>> using roxygen2 in RStudio:
> >>>>
> >>>> In R CMD INSTALL Error in nativeRoutines[[lib]] <- routines : object
> >>>> 'nativeRoutines' not found Calls: suppressPackageStartupMessages ...
> >>>> withCallingHandlers -> <Anonymous> -> load_all -> load_dll Execution
> >>>> halted
> >>>>
> >>>> When I disable roxygen2, I do not get this error, but of course the
> >>>> documentation is not created.
> >>>>
> >>>> I have installed the latest versions of RStudio, Rtools, R-devel,
> >>>> roxygen2, pkgload, but the problem persists.
> >>>>
> >>>> Does anybody have a clue what is causing this? I am using Windows 10,
> >>>> and the package contains Fortran code.
> >>>>
> >>>> Kind regards,
> >>>> Rampal Etienne
> >>>>
> >>>>            [[alternative HTML version deleted]]
> >>>>
> >>>> ______________________________________________
> >>>> R-package-devel at r-project.org mailing list
> >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>
> >>>
> >>>      [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>
> >>
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From r@mp@letienne @ending from gm@il@com  Wed Nov  7 17:44:52 2018
From: r@mp@letienne @ending from gm@il@com (Rampal S. Etienne)
Date: Wed, 7 Nov 2018 17:44:52 +0100
Subject: [R-pkg-devel] 
 nativeRoutines error when using roxygen2 in RStudio
In-Reply-To: <CAF8bMcYMc1XojEm3ePJy4jTbGb6CYAweX-tJSjhNA2CmokXW+g@mail.gmail.com>
References: <CALK03d2axehJd1Cs1Na6UaN0Vi1vGnmnSu+XJwisj_jzQpru9g@mail.gmail.com>
 <23504.24824.285159.261386@rob.eddelbuettel.com>
 <c4ae2d75-e048-2c3e-4325-a4ffc0b5e3ce@gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F6BB927@MBXP01.ds.man.ac.uk>
 <2a99f409-1c34-801c-f432-fe0e6c4fe54f@gmail.com>
 <cffe6ae8-47f9-3335-f324-f26499207c38@gmail.com>
 <db420cd8-bf07-fd86-4562-213bd0cf1e67@gmail.com>
 <31c2042d-3eaa-49da-9bd5-eb9714df9516@gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F6BBEA9@MBXP01.ds.man.ac.uk>
 <CAF8bMcYMc1XojEm3ePJy4jTbGb6CYAweX-tJSjhNA2CmokXW+g@mail.gmail.com>
Message-ID: <8bcc0eaf-d458-c813-94e7-75f9085f2b6c@gmail.com>

The problem was resolved by installing again a new version of devtools.

However, this new version gives other problems: devtools::check() says
the DESCRIPTION file is missing a License field, but there IS a license
field in this file.


On 7-11-2018 16:59, William Dunlap wrote:
> After installing a new version of R the OP may have to rebuild (and
> retest) packages like pkgload that define functions by grabbing
> functions from the base package and modifying them, as in
> pkgload/R/namespace-env.r:
>
> onload_assign("makeNamespace",
>   eval(
>     modify_lang(
>       extract_lang(body(loadNamespace),
>
>         # Find makeNamespace definition
>         comp_lang, y = quote(makeNamespace <- NULL), idx = 1:2)[[3]],
>
>       # Replace call to .Internal(registerNamespace()) is replaced by
> a call to
>       # register_namespace
>       function(x) {
>         if (comp_lang(x, quote(.Internal(registerNamespace(name,
> env))))) {
>           quote(register_namespace(name, env))
>         } else {
>           x
>         }
>       }))
> )
>
>
>
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com <http://tibco.com>
>
> On Wed, Nov 7, 2018 at 3:45 AM, Georgi Boshnakov
> <georgi.boshnakov at manchester.ac.uk
> <mailto:georgi.boshnakov at manchester.ac.uk>> wrote:
>
>     Without code we are guessing.  A bug is possible but I will make
>     another guess suggestion.
>
>     Delete all binary files created by devtools during compilation in
>     your package directory.
>     devtools::load_all() is so fast partly because it recompiles the
>     C/Fortran files only when necessary
>     but sometimes compilation may be needed even if devtools thinks
>     otherwise.
>
>      Georgi Boshnakov
>
>
>     -----Original Message-----
>     From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com
>     <mailto:murdoch.duncan at gmail.com>]
>     Sent: 07 November 2018 00:26
>     To: Rampal Etienne; Georgi Boshnakov;
>     r-package-devel at r-project.org <mailto:r-package-devel at r-project.org>
>     Subject: Re: [R-pkg-devel] nativeRoutines error when using
>     roxygen2 in RStudio
>
>     On 06/11/2018 5:17 PM, Rampal Etienne wrote:
>     > Dear Duncan,
>     >
>     > I don't get it when using R CMD check.
>     >
>     > I only get it when building/loading using roxygen2 or when I call
>     > load_all (which roxygen2 does too, I think). load_all calls load_dll
>     > which then throws this error. I have registered my routines in
>     > R_init_secsse.c:
>     >
>     > void R_init_secsse(DllInfo *dll)
>     > {
>     >     R_registerRoutines(dll, NULL, NULL, FortranEntries, NULL);
>     >     R_useDynamicSymbols(dll, FALSE);
>     > }
>     >
>     > Any suggestions?
>
>     Nope!  Sounds like a bug in devtools/roxygen2, but I don't know
>     either
>     of those packages well.
>
>     Duncan Murdoch
>
>     >
>     > Cheers, Rampal
>     >
>     >
>     > On 06-Nov-18 22:50, Duncan Murdoch wrote:
>     >> On 06/11/2018 3:27 PM, Rampal Etienne wrote:
>     >>> Dear Georgi,
>     >>>
>     >>> Thanks for your suggestions. I have tried to install the
>     development
>     >>> version of roxygen2, but to no avail.
>     >>>
>     >>> I don't have a Collate field in DESCRIPTION.
>     >>>
>     >>> devtools::check() gives me:
>     >>>
>     >>> Updating secsse documentation Loading secsse Registered S3 method
>     >>> overwritten by 'dplyr': method from as.data.frame.tbl_df tibble
>     >>> Registered S3 method overwritten by 'geiger': method from
>     >>> unique.multiPhylo ape Error in nativeRoutines[[lib]] <- routines :
>     >>> object 'nativeRoutines' not found
>     >>
>     >> Do you get that error if you run "R CMD check" on the tarball
>     of your
>     >> package?
>     >>
>     >> If so, how comfortable are you with debugging R code?  I can
>     tell you
>     >> how to debug the check process, but it's a little tricky.
>     >>
>     >> Duncan Murdoch
>     >>
>     >>>
>     >>>
>     >>> Any other suggestions?
>     >>>
>     >>> Cheers, Rampal
>     >>>
>     >>> On 02-Nov-18 08:33, Georgi Boshnakov wrote:
>     >>>> Try installing the latest development version of roxygen2, if you
>     >>>> are not using it already.
>     >>>> There was a bug in the released version preventing
>     installation in
>     >>>> some cases.
>     >>>> If you don't want to use development version of roxygen2,
>     >>>> try putting all filenames in the Collate field in DESCRIPTION
>     on one
>     >>>> line and make sure that there is a single space
>     >>>> between them. This should work if your problem is what I think.
>     >>>>
>     >>>> By the way, in such cases you will get more informative
>     messages if
>     >>>> you run devtools::check().
>     >>>>
>     >>>> --
>     >>>> Georgi Boshnakov
>     >>>>
>     >>>>
>     >>>> ________________________________________
>     >>>> From: R-package-devel [r-package-devel-bounces at r-project.org
>     <mailto:r-package-devel-bounces at r-project.org>] on
>     >>>> behalf of Rampal Etienne [rampaletienne at gmail.com
>     <mailto:rampaletienne at gmail.com>]
>     >>>> Sent: 01 November 2018 22:40
>     >>>> To: r-package-devel at r-project.org
>     <mailto:r-package-devel at r-project.org>
>     >>>> Subject: [R-pkg-devel] nativeRoutines error when using
>     roxygen2 in
>     >>>> RStudio
>     >>>>
>     >>>> Since a few weeks (after updating R-devel and Rtools) I get the
>     >>>> following error when trying to build a package or document
>     it, when
>     >>>> using roxygen2 in RStudio:
>     >>>>
>     >>>> In R CMD INSTALL Error in nativeRoutines[[lib]] <- routines :
>     object
>     >>>> 'nativeRoutines' not found Calls:
>     suppressPackageStartupMessages ...
>     >>>> withCallingHandlers -> <Anonymous> -> load_all -> load_dll
>     Execution
>     >>>> halted
>     >>>>
>     >>>> When I disable roxygen2, I do not get this error, but of
>     course the
>     >>>> documentation is not created.
>     >>>>
>     >>>> I have installed the latest versions of RStudio, Rtools, R-devel,
>     >>>> roxygen2, pkgload, but the problem persists.
>     >>>>
>     >>>> Does anybody have a clue what is causing this? I am using
>     Windows 10,
>     >>>> and the package contains Fortran code.
>     >>>>
>     >>>> Kind regards,
>     >>>> Rampal Etienne
>     >>>>
>     >>>>            [[alternative HTML version deleted]]
>     >>>>
>     >>>> ______________________________________________
>     >>>> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>     >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>     >>>
>     >>>
>     >>>      [[alternative HTML version deleted]]
>     >>>
>     >>> ______________________________________________
>     >>> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>     >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>     >>>
>     >>
>     >
>
>     ______________________________________________
>     R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>
>


	[[alternative HTML version deleted]]


From jo@h@m@ulrich @ending from gm@il@com  Wed Nov  7 18:02:37 2018
From: jo@h@m@ulrich @ending from gm@il@com (Joshua Ulrich)
Date: Wed, 7 Nov 2018 11:02:37 -0600
Subject: [R-pkg-devel] 
 nativeRoutines error when using roxygen2 in RStudio
In-Reply-To: <8bcc0eaf-d458-c813-94e7-75f9085f2b6c@gmail.com>
References: <CALK03d2axehJd1Cs1Na6UaN0Vi1vGnmnSu+XJwisj_jzQpru9g@mail.gmail.com>
 <23504.24824.285159.261386@rob.eddelbuettel.com>
 <c4ae2d75-e048-2c3e-4325-a4ffc0b5e3ce@gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F6BB927@MBXP01.ds.man.ac.uk>
 <2a99f409-1c34-801c-f432-fe0e6c4fe54f@gmail.com>
 <cffe6ae8-47f9-3335-f324-f26499207c38@gmail.com>
 <db420cd8-bf07-fd86-4562-213bd0cf1e67@gmail.com>
 <31c2042d-3eaa-49da-9bd5-eb9714df9516@gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F6BBEA9@MBXP01.ds.man.ac.uk>
 <CAF8bMcYMc1XojEm3ePJy4jTbGb6CYAweX-tJSjhNA2CmokXW+g@mail.gmail.com>
 <8bcc0eaf-d458-c813-94e7-75f9085f2b6c@gmail.com>
Message-ID: <CAPPM_gR6VoJG=bs2yv55_rOwaSJ68J1-5SRttEV-SeYjM_j6GA@mail.gmail.com>

Also note that William's suggestion is documented at the bottom of the
"Generic Functions and Methods" section of Writing R Extensions.
https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Generic-functions-and-methods

"... as a package can take over a function in the base package and
make it generic by something like
    foo <- function(object, ...) UseMethod("foo")
    foo.default <- function(object, ...) base::foo(object)
"Earlier versions of this manual suggested assigning foo.default <-
base::foo. This is not a good idea, as it captures the base function
at the time of installation and it might be changed as R is patched or
updated."

Best,
Josh

On Wed, Nov 7, 2018 at 10:45 AM Rampal S. Etienne
<rampaletienne at gmail.com> wrote:
>
> The problem was resolved by installing again a new version of devtools.
>
> However, this new version gives other problems: devtools::check() says
> the DESCRIPTION file is missing a License field, but there IS a license
> field in this file.
>
>
> On 7-11-2018 16:59, William Dunlap wrote:
> > After installing a new version of R the OP may have to rebuild (and
> > retest) packages like pkgload that define functions by grabbing
> > functions from the base package and modifying them, as in
> > pkgload/R/namespace-env.r:
> >
> > onload_assign("makeNamespace",
> >   eval(
> >     modify_lang(
> >       extract_lang(body(loadNamespace),
> >
> >         # Find makeNamespace definition
> >         comp_lang, y = quote(makeNamespace <- NULL), idx = 1:2)[[3]],
> >
> >       # Replace call to .Internal(registerNamespace()) is replaced by
> > a call to
> >       # register_namespace
> >       function(x) {
> >         if (comp_lang(x, quote(.Internal(registerNamespace(name,
> > env))))) {
> >           quote(register_namespace(name, env))
> >         } else {
> >           x
> >         }
> >       }))
> > )
> >
> >
> >
> >
> > Bill Dunlap
> > TIBCO Software
> > wdunlap tibco.com <http://tibco.com>
> >
> > On Wed, Nov 7, 2018 at 3:45 AM, Georgi Boshnakov
> > <georgi.boshnakov at manchester.ac.uk
> > <mailto:georgi.boshnakov at manchester.ac.uk>> wrote:
> >
> >     Without code we are guessing.  A bug is possible but I will make
> >     another guess suggestion.
> >
> >     Delete all binary files created by devtools during compilation in
> >     your package directory.
> >     devtools::load_all() is so fast partly because it recompiles the
> >     C/Fortran files only when necessary
> >     but sometimes compilation may be needed even if devtools thinks
> >     otherwise.
> >
> >      Georgi Boshnakov
> >
> >
> >     -----Original Message-----
> >     From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com
> >     <mailto:murdoch.duncan at gmail.com>]
> >     Sent: 07 November 2018 00:26
> >     To: Rampal Etienne; Georgi Boshnakov;
> >     r-package-devel at r-project.org <mailto:r-package-devel at r-project.org>
> >     Subject: Re: [R-pkg-devel] nativeRoutines error when using
> >     roxygen2 in RStudio
> >
> >     On 06/11/2018 5:17 PM, Rampal Etienne wrote:
> >     > Dear Duncan,
> >     >
> >     > I don't get it when using R CMD check.
> >     >
> >     > I only get it when building/loading using roxygen2 or when I call
> >     > load_all (which roxygen2 does too, I think). load_all calls load_dll
> >     > which then throws this error. I have registered my routines in
> >     > R_init_secsse.c:
> >     >
> >     > void R_init_secsse(DllInfo *dll)
> >     > {
> >     >     R_registerRoutines(dll, NULL, NULL, FortranEntries, NULL);
> >     >     R_useDynamicSymbols(dll, FALSE);
> >     > }
> >     >
> >     > Any suggestions?
> >
> >     Nope!  Sounds like a bug in devtools/roxygen2, but I don't know
> >     either
> >     of those packages well.
> >
> >     Duncan Murdoch
> >
> >     >
> >     > Cheers, Rampal
> >     >
> >     >
> >     > On 06-Nov-18 22:50, Duncan Murdoch wrote:
> >     >> On 06/11/2018 3:27 PM, Rampal Etienne wrote:
> >     >>> Dear Georgi,
> >     >>>
> >     >>> Thanks for your suggestions. I have tried to install the
> >     development
> >     >>> version of roxygen2, but to no avail.
> >     >>>
> >     >>> I don't have a Collate field in DESCRIPTION.
> >     >>>
> >     >>> devtools::check() gives me:
> >     >>>
> >     >>> Updating secsse documentation Loading secsse Registered S3 method
> >     >>> overwritten by 'dplyr': method from as.data.frame.tbl_df tibble
> >     >>> Registered S3 method overwritten by 'geiger': method from
> >     >>> unique.multiPhylo ape Error in nativeRoutines[[lib]] <- routines :
> >     >>> object 'nativeRoutines' not found
> >     >>
> >     >> Do you get that error if you run "R CMD check" on the tarball
> >     of your
> >     >> package?
> >     >>
> >     >> If so, how comfortable are you with debugging R code?  I can
> >     tell you
> >     >> how to debug the check process, but it's a little tricky.
> >     >>
> >     >> Duncan Murdoch
> >     >>
> >     >>>
> >     >>>
> >     >>> Any other suggestions?
> >     >>>
> >     >>> Cheers, Rampal
> >     >>>
> >     >>> On 02-Nov-18 08:33, Georgi Boshnakov wrote:
> >     >>>> Try installing the latest development version of roxygen2, if you
> >     >>>> are not using it already.
> >     >>>> There was a bug in the released version preventing
> >     installation in
> >     >>>> some cases.
> >     >>>> If you don't want to use development version of roxygen2,
> >     >>>> try putting all filenames in the Collate field in DESCRIPTION
> >     on one
> >     >>>> line and make sure that there is a single space
> >     >>>> between them. This should work if your problem is what I think.
> >     >>>>
> >     >>>> By the way, in such cases you will get more informative
> >     messages if
> >     >>>> you run devtools::check().
> >     >>>>
> >     >>>> --
> >     >>>> Georgi Boshnakov
> >     >>>>
> >     >>>>
> >     >>>> ________________________________________
> >     >>>> From: R-package-devel [r-package-devel-bounces at r-project.org
> >     <mailto:r-package-devel-bounces at r-project.org>] on
> >     >>>> behalf of Rampal Etienne [rampaletienne at gmail.com
> >     <mailto:rampaletienne at gmail.com>]
> >     >>>> Sent: 01 November 2018 22:40
> >     >>>> To: r-package-devel at r-project.org
> >     <mailto:r-package-devel at r-project.org>
> >     >>>> Subject: [R-pkg-devel] nativeRoutines error when using
> >     roxygen2 in
> >     >>>> RStudio
> >     >>>>
> >     >>>> Since a few weeks (after updating R-devel and Rtools) I get the
> >     >>>> following error when trying to build a package or document
> >     it, when
> >     >>>> using roxygen2 in RStudio:
> >     >>>>
> >     >>>> In R CMD INSTALL Error in nativeRoutines[[lib]] <- routines :
> >     object
> >     >>>> 'nativeRoutines' not found Calls:
> >     suppressPackageStartupMessages ...
> >     >>>> withCallingHandlers -> <Anonymous> -> load_all -> load_dll
> >     Execution
> >     >>>> halted
> >     >>>>
> >     >>>> When I disable roxygen2, I do not get this error, but of
> >     course the
> >     >>>> documentation is not created.
> >     >>>>
> >     >>>> I have installed the latest versions of RStudio, Rtools, R-devel,
> >     >>>> roxygen2, pkgload, but the problem persists.
> >     >>>>
> >     >>>> Does anybody have a clue what is causing this? I am using
> >     Windows 10,
> >     >>>> and the package contains Fortran code.
> >     >>>>
> >     >>>> Kind regards,
> >     >>>> Rampal Etienne
> >     >>>>
> >     >>>>            [[alternative HTML version deleted]]
> >     >>>>
> >     >>>> ______________________________________________
> >     >>>> R-package-devel at r-project.org
> >     <mailto:R-package-devel at r-project.org> mailing list
> >     >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> >     >>>
> >     >>>
> >     >>>      [[alternative HTML version deleted]]
> >     >>>
> >     >>> ______________________________________________
> >     >>> R-package-devel at r-project.org
> >     <mailto:R-package-devel at r-project.org> mailing list
> >     >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> >     >>>
> >     >>
> >     >
> >
> >     ______________________________________________
> >     R-package-devel at r-project.org
> >     <mailto:R-package-devel at r-project.org> mailing list
> >     https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> >
> >
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com
R/Finance 2018 | www.rinfinance.com


From DOgle @ending from northl@nd@edu  Wed Nov  7 22:55:24 2018
From: DOgle @ending from northl@nd@edu (Derek Ogle)
Date: Wed, 7 Nov 2018 21:55:24 +0000
Subject: [R-pkg-devel] ICU init failed: U_FILE_ACCESS_ERROR
Message-ID: <13b167e112c4419d9bbeff4e81790fc1@northland.edu>

I am considering a CRAN release of a new package and was using R-winbuilder as a check. The check was successful with all but the "old-release" version (see https://win-builder.r-project.org/UhyHnNyn4Ukz/00check.log). The two errors both appear to be related to tests using testhtat::expect_output() and begin with the "ICU init failed: U_FILE_ACCESS_ERROR" error message. The full output for the first error is pasted below. My internet searches suggest (to me, but I am not confident) that this error is related to the stringr or stringi packages, which both appear to be used by testthat::expect_output(). Given that I don't receive this error in any other checking, I am not sure how to troubleshoot it (besides simply removing this test). Any thoughts would be greatly appreciated. Thank you.

** running tests for arch 'i386' ... [5s] ERROR
  Running 'test-all.R' [4s]
Running the tests in 'tests/test-all.R' failed.
Complete output:
  > library(testthat)
  > test_check("RFishBC")
  Loading required package: RFishBC
  ## RFishBC v0.0.13.9000. See vignettes at derekogle.com/RFishBC/.
  
  -- 1. Error: backCalc() output types (@test_OUTPUTS.R#272)  --------------------
  ICU init failed: U_FILE_ACCESS_ERROR
  1: expect_output(backCalc(SMBassWB, lencap, BCM = "DALE", inFormat = "wide", digits = 0), 
         "Dahl-Lea") at testthat/test_OUTPUTS.R:272
  2: quasi_capture(enquo(object), capture_output, label = label)
  3: capture(act$val <- eval_bare(get_expr(quo), get_env(quo)))
  4: capture_output_lines(code, print, width = width)
  5: eval_with_output(code, print = print, width = width)
  6: withr::with_output_sink(temp, withVisible(code))
  7: force(code)
  8: withVisible(code)
  9: eval_bare(get_expr(quo), get_env(quo))
  10: backCalc(SMBassWB, lencap, BCM = "DALE", inFormat = "wide", digits = 0)
  11: stringr::str_replace_all
  12: getExportedValue(pkg, name)
  13: asNamespace(ns)
  14: getNamespace(ns)
  15: tryCatch(loadNamespace(name), error = function(e) stop(e))
  16: tryCatchList(expr, classes, parentenv, handlers)
  17: tryCatchOne(expr, names, parentenv, handlers[[1L]])
  18: value[[3L]](cond)


From bbolker @ending from gm@il@com  Wed Nov  7 23:04:26 2018
From: bbolker @ending from gm@il@com (Ben Bolker)
Date: Wed, 7 Nov 2018 17:04:26 -0500
Subject: [R-pkg-devel] ICU init failed: U_FILE_ACCESS_ERROR
In-Reply-To: <13b167e112c4419d9bbeff4e81790fc1@northland.edu>
References: <13b167e112c4419d9bbeff4e81790fc1@northland.edu>
Message-ID: <0002c0cf-6b48-d08a-da48-0f2e4f6f9029@gmail.com>


  Does it happen consistently?  If it's only happened once, could be a
transient glitch in package dependencies.  I'd try re-testing, as a
start.  Alternatively, if you're willing to add an R >= 3.5.1 dependency
to your package, presumably CRAN won't mind if it fails tests on
old-release ...



On 2018-11-07 4:55 p.m., Derek Ogle wrote:
> I am considering a CRAN release of a new package and was using R-winbuilder as a check. The check was successful with all but the "old-release" version (see https://win-builder.r-project.org/UhyHnNyn4Ukz/00check.log). The two errors both appear to be related to tests using testhtat::expect_output() and begin with the "ICU init failed: U_FILE_ACCESS_ERROR" error message. The full output for the first error is pasted below. My internet searches suggest (to me, but I am not confident) that this error is related to the stringr or stringi packages, which both appear to be used by testthat::expect_output(). Given that I don't receive this error in any other checking, I am not sure how to troubleshoot it (besides simply removing this test). Any thoughts would be greatly appreciated. Thank you.
> 
> ** running tests for arch 'i386' ... [5s] ERROR
>   Running 'test-all.R' [4s]
> Running the tests in 'tests/test-all.R' failed.
> Complete output:
>   > library(testthat)
>   > test_check("RFishBC")
>   Loading required package: RFishBC
>   ## RFishBC v0.0.13.9000. See vignettes at derekogle.com/RFishBC/.
>   
>   -- 1. Error: backCalc() output types (@test_OUTPUTS.R#272)  --------------------
>   ICU init failed: U_FILE_ACCESS_ERROR
>   1: expect_output(backCalc(SMBassWB, lencap, BCM = "DALE", inFormat = "wide", digits = 0), 
>          "Dahl-Lea") at testthat/test_OUTPUTS.R:272
>   2: quasi_capture(enquo(object), capture_output, label = label)
>   3: capture(act$val <- eval_bare(get_expr(quo), get_env(quo)))
>   4: capture_output_lines(code, print, width = width)
>   5: eval_with_output(code, print = print, width = width)
>   6: withr::with_output_sink(temp, withVisible(code))
>   7: force(code)
>   8: withVisible(code)
>   9: eval_bare(get_expr(quo), get_env(quo))
>   10: backCalc(SMBassWB, lencap, BCM = "DALE", inFormat = "wide", digits = 0)
>   11: stringr::str_replace_all
>   12: getExportedValue(pkg, name)
>   13: asNamespace(ns)
>   14: getNamespace(ns)
>   15: tryCatch(loadNamespace(name), error = function(e) stop(e))
>   16: tryCatchList(expr, classes, parentenv, handlers)
>   17: tryCatchOne(expr, names, parentenv, handlers[[1L]])
>   18: value[[3L]](cond)
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From d@vidhughjone@ @ending from gm@il@com  Wed Nov  7 23:24:22 2018
From: d@vidhughjone@ @ending from gm@il@com (David Hugh-Jones)
Date: Wed, 7 Nov 2018 22:24:22 +0000
Subject: [R-pkg-devel] ICU init failed: U_FILE_ACCESS_ERROR
In-Reply-To: <0002c0cf-6b48-d08a-da48-0f2e4f6f9029@gmail.com>
References: <13b167e112c4419d9bbeff4e81790fc1@northland.edu>
 <0002c0cf-6b48-d08a-da48-0f2e4f6f9029@gmail.com>
Message-ID: <CAARY7kjTLzGzZcyCGf-bDwDkX_ayBb7ZayPvwPpvaoacOuSxtQ@mail.gmail.com>

My package had this issue and still got accepted. I think it is a known
transient glitch. Just mention it when you submit.

On Wed, 7 Nov 2018 at 22:05, Ben Bolker <bbolker at gmail.com> wrote:

>
>   Does it happen consistently?  If it's only happened once, could be a
> transient glitch in package dependencies.  I'd try re-testing, as a
> start.  Alternatively, if you're willing to add an R >= 3.5.1 dependency
> to your package, presumably CRAN won't mind if it fails tests on
> old-release ...
>
>
>
> On 2018-11-07 4:55 p.m., Derek Ogle wrote:
> > I am considering a CRAN release of a new package and was using
> R-winbuilder as a check. The check was successful with all but the
> "old-release" version (see
> https://win-builder.r-project.org/UhyHnNyn4Ukz/00check.log). The two
> errors both appear to be related to tests using testhtat::expect_output()
> and begin with the "ICU init failed: U_FILE_ACCESS_ERROR" error message.
> The full output for the first error is pasted below. My internet searches
> suggest (to me, but I am not confident) that this error is related to the
> stringr or stringi packages, which both appear to be used by
> testthat::expect_output(). Given that I don't receive this error in any
> other checking, I am not sure how to troubleshoot it (besides simply
> removing this test). Any thoughts would be greatly appreciated. Thank you.
> >
> > ** running tests for arch 'i386' ... [5s] ERROR
> >   Running 'test-all.R' [4s]
> > Running the tests in 'tests/test-all.R' failed.
> > Complete output:
> >   > library(testthat)
> >   > test_check("RFishBC")
> >   Loading required package: RFishBC
> >   ## RFishBC v0.0.13.9000. See vignettes at derekogle.com/RFishBC/.
> >
> >   -- 1. Error: backCalc() output types (@test_OUTPUTS.R#272)
> --------------------
> >   ICU init failed: U_FILE_ACCESS_ERROR
> >   1: expect_output(backCalc(SMBassWB, lencap, BCM = "DALE", inFormat =
> "wide", digits = 0),
> >          "Dahl-Lea") at testthat/test_OUTPUTS.R:272
> >   2: quasi_capture(enquo(object), capture_output, label = label)
> >   3: capture(act$val <- eval_bare(get_expr(quo), get_env(quo)))
> >   4: capture_output_lines(code, print, width = width)
> >   5: eval_with_output(code, print = print, width = width)
> >   6: withr::with_output_sink(temp, withVisible(code))
> >   7: force(code)
> >   8: withVisible(code)
> >   9: eval_bare(get_expr(quo), get_env(quo))
> >   10: backCalc(SMBassWB, lencap, BCM = "DALE", inFormat = "wide", digits
> = 0)
> >   11: stringr::str_replace_all
> >   12: getExportedValue(pkg, name)
> >   13: asNamespace(ns)
> >   14: getNamespace(ns)
> >   15: tryCatch(loadNamespace(name), error = function(e) stop(e))
> >   16: tryCatchList(expr, classes, parentenv, handlers)
> >   17: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> >   18: value[[3L]](cond)
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
-- 
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From DOgle @ending from northl@nd@edu  Thu Nov  8 03:06:38 2018
From: DOgle @ending from northl@nd@edu (Derek Ogle)
Date: Thu, 8 Nov 2018 02:06:38 +0000
Subject: [R-pkg-devel] ICU init failed: U_FILE_ACCESS_ERROR
In-Reply-To: <CAARY7kjTLzGzZcyCGf-bDwDkX_ayBb7ZayPvwPpvaoacOuSxtQ@mail.gmail.com>
References: <13b167e112c4419d9bbeff4e81790fc1@northland.edu>
 <0002c0cf-6b48-d08a-da48-0f2e4f6f9029@gmail.com>
 <CAARY7kjTLzGzZcyCGf-bDwDkX_ayBb7ZayPvwPpvaoacOuSxtQ@mail.gmail.com>
Message-ID: <19d4b8d3119f4c7dba955a68491deab4@northland.edu>

Ben ... I tried two more times today and still the same issue. Perhaps it is transient on a different time scale than what I have tested. I was hoping to not raise the R dependency level, but had thought about that as well. Thank you for your thoughts.

David ... thank you for the experience and advice. I will try noting that on my submission to CRAN and see what happens. I will report back so others can see my experience with this issue.

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of David Hugh-Jones
Sent: Wednesday, November 7, 2018 4:24 PM
To: Ben Bolker <bbolker at gmail.com>
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] ICU init failed: U_FILE_ACCESS_ERROR

My package had this issue and still got accepted. I think it is a known transient glitch. Just mention it when you submit.

On Wed, 7 Nov 2018 at 22:05, Ben Bolker <bbolker at gmail.com> wrote:

>
>   Does it happen consistently?  If it's only happened once, could be a 
> transient glitch in package dependencies.  I'd try re-testing, as a 
> start.  Alternatively, if you're willing to add an R >= 3.5.1 
> dependency to your package, presumably CRAN won't mind if it fails 
> tests on old-release ...
>
>
>
> On 2018-11-07 4:55 p.m., Derek Ogle wrote:
> > I am considering a CRAN release of a new package and was using
> R-winbuilder as a check. The check was successful with all but the 
> "old-release" version (see 
> https://win-builder.r-project.org/UhyHnNyn4Ukz/00check.log). The two 
> errors both appear to be related to tests using 
> testhtat::expect_output() and begin with the "ICU init failed: U_FILE_ACCESS_ERROR" error message.
> The full output for the first error is pasted below. My internet 
> searches suggest (to me, but I am not confident) that this error is 
> related to the stringr or stringi packages, which both appear to be 
> used by testthat::expect_output(). Given that I don't receive this 
> error in any other checking, I am not sure how to troubleshoot it 
> (besides simply removing this test). Any thoughts would be greatly appreciated. Thank you.
> >
> > ** running tests for arch 'i386' ... [5s] ERROR
> >   Running 'test-all.R' [4s]
> > Running the tests in 'tests/test-all.R' failed.
> > Complete output:
> >   > library(testthat)
> >   > test_check("RFishBC")
> >   Loading required package: RFishBC
> >   ## RFishBC v0.0.13.9000. See vignettes at derekogle.com/RFishBC/.
> >
> >   -- 1. Error: backCalc() output types (@test_OUTPUTS.R#272)
> --------------------
> >   ICU init failed: U_FILE_ACCESS_ERROR
> >   1: expect_output(backCalc(SMBassWB, lencap, BCM = "DALE", inFormat 
> > =
> "wide", digits = 0),
> >          "Dahl-Lea") at testthat/test_OUTPUTS.R:272
> >   2: quasi_capture(enquo(object), capture_output, label = label)
> >   3: capture(act$val <- eval_bare(get_expr(quo), get_env(quo)))
> >   4: capture_output_lines(code, print, width = width)
> >   5: eval_with_output(code, print = print, width = width)
> >   6: withr::with_output_sink(temp, withVisible(code))
> >   7: force(code)
> >   8: withVisible(code)
> >   9: eval_bare(get_expr(quo), get_env(quo))
> >   10: backCalc(SMBassWB, lencap, BCM = "DALE", inFormat = "wide", 
> > digits
> = 0)
> >   11: stringr::str_replace_all
> >   12: getExportedValue(pkg, name)
> >   13: asNamespace(ns)
> >   14: getNamespace(ns)
> >   15: tryCatch(loadNamespace(name), error = function(e) stop(e))
> >   16: tryCatchList(expr, classes, parentenv, handlers)
> >   17: tryCatchOne(expr, names, parentenv, handlers[[1L]])
> >   18: value[[3L]](cond)
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list 
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
--
Sent from Gmail Mobile

	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From pedro@@ph@lo @ending from hel@inki@fi  Thu Nov  8 08:24:53 2018
From: pedro@@ph@lo @ending from hel@inki@fi (Pedro J. Aphalo)
Date: Thu, 8 Nov 2018 09:24:53 +0200
Subject: [R-pkg-devel] ICU init failed: U_FILE_ACCESS_ERROR
In-Reply-To: <19d4b8d3119f4c7dba955a68491deab4@northland.edu>
References: <13b167e112c4419d9bbeff4e81790fc1@northland.edu>
 <0002c0cf-6b48-d08a-da48-0f2e4f6f9029@gmail.com>
 <CAARY7kjTLzGzZcyCGf-bDwDkX_ayBb7ZayPvwPpvaoacOuSxtQ@mail.gmail.com>
 <19d4b8d3119f4c7dba955a68491deab4@northland.edu>
Message-ID: <513a754c-0a16-2833-5e1b-5893a374181e@helsinki.fi>

I think this error has to do with the binary version of stringi for 
Windows oldrel being out-of-date in CRAN (version 1.1.7 while source is 
at 1.2.4). The current version of stringi under Windows gives a 
compilation note, so the binary is not available in CRAN. This causes 
difficulties even with indirect dependencies (e.g. on lubridate). Even 
lubridate itself is failing CRAN tests on Windows oldrel. Also one of my 
packages is failing CRAN tests because it depends on lubridate. These 
packages have been accepted by CRAN. The compilation note triggered when 
building the stringi binary under Windows oldrel seems not to affect 
stringi in use (circumstantial evidence rather than systematic checking) 
and the current version of stringi can be installed from sources under 
Windows oldrel and at least locally this seems to solve the type of 
problems you are seeing.

Best regards,

Pedro.

On 2018-11-08 04:06, Derek Ogle wrote:
> Ben ... I tried two more times today and still the same issue. Perhaps it is transient on a different time scale than what I have tested. I was hoping to not raise the R dependency level, but had thought about that as well. Thank you for your thoughts.
>
> David ... thank you for the experience and advice. I will try noting that on my submission to CRAN and see what happens. I will report back so others can see my experience with this issue.
>
> -----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of David Hugh-Jones
> Sent: Wednesday, November 7, 2018 4:24 PM
> To: Ben Bolker <bbolker at gmail.com>
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] ICU init failed: U_FILE_ACCESS_ERROR
>
> My package had this issue and still got accepted. I think it is a known transient glitch. Just mention it when you submit.
>
> On Wed, 7 Nov 2018 at 22:05, Ben Bolker <bbolker at gmail.com> wrote:
>
>>    Does it happen consistently?  If it's only happened once, could be a
>> transient glitch in package dependencies.  I'd try re-testing, as a
>> start.  Alternatively, if you're willing to add an R >= 3.5.1
>> dependency to your package, presumably CRAN won't mind if it fails
>> tests on old-release ...
>>
>>
>>
>> On 2018-11-07 4:55 p.m., Derek Ogle wrote:
>>> I am considering a CRAN release of a new package and was using
>> R-winbuilder as a check. The check was successful with all but the
>> "old-release" version (see
>> https://win-builder.r-project.org/UhyHnNyn4Ukz/00check.log). The two
>> errors both appear to be related to tests using
>> testhtat::expect_output() and begin with the "ICU init failed: U_FILE_ACCESS_ERROR" error message.
>> The full output for the first error is pasted below. My internet
>> searches suggest (to me, but I am not confident) that this error is
>> related to the stringr or stringi packages, which both appear to be
>> used by testthat::expect_output(). Given that I don't receive this
>> error in any other checking, I am not sure how to troubleshoot it
>> (besides simply removing this test). Any thoughts would be greatly appreciated. Thank you.
>>> ** running tests for arch 'i386' ... [5s] ERROR
>>>    Running 'test-all.R' [4s]
>>> Running the tests in 'tests/test-all.R' failed.
>>> Complete output:
>>>    > library(testthat)
>>>    > test_check("RFishBC")
>>>    Loading required package: RFishBC
>>>    ## RFishBC v0.0.13.9000. See vignettes at derekogle.com/RFishBC/.
>>>
>>>    -- 1. Error: backCalc() output types (@test_OUTPUTS.R#272)
>> --------------------
>>>    ICU init failed: U_FILE_ACCESS_ERROR
>>>    1: expect_output(backCalc(SMBassWB, lencap, BCM = "DALE", inFormat
>>> =
>> "wide", digits = 0),
>>>           "Dahl-Lea") at testthat/test_OUTPUTS.R:272
>>>    2: quasi_capture(enquo(object), capture_output, label = label)
>>>    3: capture(act$val <- eval_bare(get_expr(quo), get_env(quo)))
>>>    4: capture_output_lines(code, print, width = width)
>>>    5: eval_with_output(code, print = print, width = width)
>>>    6: withr::with_output_sink(temp, withVisible(code))
>>>    7: force(code)
>>>    8: withVisible(code)
>>>    9: eval_bare(get_expr(quo), get_env(quo))
>>>    10: backCalc(SMBassWB, lencap, BCM = "DALE", inFormat = "wide",
>>> digits
>> = 0)
>>>    11: stringr::str_replace_all
>>>    12: getExportedValue(pkg, name)
>>>    13: asNamespace(ns)
>>>    14: getNamespace(ns)
>>>    15: tryCatch(loadNamespace(name), error = function(e) stop(e))
>>>    16: tryCatchList(expr, classes, parentenv, handlers)
>>>    17: tryCatchOne(expr, names, parentenv, handlers[[1L]])
>>>    18: value[[3L]](cond)
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> --
> Sent from Gmail Mobile
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
------------------------------------------------------------------------
Pedro J. Aphalo
University Lecturer, Principal Investigator
(Office 5605, Biocenter 3, Viikinkaari 1)

Department of Biosciences
Plant Biology
P.O. Box 65
00014 University of Helsinki
Finland

e-mail: pedro.aphalo at helsinki.fi <mailto:pedro.aphalo at helsinki.fi>
Tel. (mobile) +358 50 4150623
Tel. (office) +358 2941 57897

------------------------------------------------------------------------
*Web sites and blogs*
Web site (research group): http://blogs.helsinki.fi/senpep-blog/
Web site (own teaching): http://www.helsinki.fi/people/pedro.aphalo/
Web site (using R in photobiology): http://www.r4photobiology.info/
------------------------------------------------------------------------
*Societies*
UV4Plants <http://www.uv4plants.org/> (communications officer), ESP 
<http://www.photobiology.eu/> (member) SEB <http://www.sebiology.org/> 
(member), BES <http://www.britishecologicalsociety.org/> (member), SPPS 
<http://www.spps.fi/> (member), SMS 
<http://www.metsatieteellinenseura.fi/english> (member), TUG 
<http://tug.org/> (member), FOAS <http://www.foastat.org/> (member).
------------------------------------------------------------------------

	[[alternative HTML version deleted]]


From r@mp@letienne @ending from gm@il@com  Thu Nov  8 09:24:21 2018
From: r@mp@letienne @ending from gm@il@com (Rampal S. Etienne)
Date: Thu, 8 Nov 2018 09:24:21 +0100
Subject: [R-pkg-devel] devtools::check() gives error on missing License
 field, but License field is not missing
Message-ID: <9275940c-3602-22a9-bb83-3d96f3e254c3@gmail.com>

Yesterday I updated the devtools package and suddenly obtained some
strange errors when running devtools::check().

For instance, I get

E checking for file 'secsse/DESCRIPTION'Required field missing or empty:
'License'

However. the License line is present. I don't see anything wrong with
it. See below.

Furthermore, for another package, I get

-checking package dependencies ...Error in if (force_suggests) lsuggests
: (5.3s)missing value where TRUE/FALSE needed


The check completes without reporting any warning, note or error, so
this error seems an error in the function check itself.

Does anyone get these errors too and know how to fix them?

Cheers,

Rampal Etienne

DESCRIPTION


Package: secsse
Title: Several Examined and Concealed States-Dependent Speciation and
 Extinction
Version: 0.1.11
License: GPL-3
Authors at R: c(
 person("Leonel", "Herrera Alsina", email = "leonelhalsina at gmail.com", role = "cre"),
 person("Paul", "van Els", email = "paulvanels at gmail.com", role = "aut"),
 person("Rampal", "Etienne", email = "r.s.etienne at rug.nl", role = "aut"))
Description: It combines the features of HiSSE and MuSSE to
 simultaneously infer state-dependent diversification across
 two or more traits or states while accounting for the role
 of a possible concealed trait.
Depends: R (>= 3.5.0)
Imports: utils,
 DDD (> 3.0),
 ape,
 foreach,
 doParallel,
 apTreeshape,
 phylobase,
 geiger,
 deSolve
Suggests: testthat,
 testit,
 knitr,
 rmarkdown,
 doMC,
 odeintr
Encoding: UTF-8
LazyData: true
VignetteBuilder: knitr
RoxygenNote: 6.1.1


	[[alternative HTML version deleted]]


From j@n@li@ec @ending from b@m@de  Thu Nov  8 08:21:01 2018
From: j@n@li@ec @ending from b@m@de (Lisec, Jan)
Date: Thu, 8 Nov 2018 07:21:01 +0000
Subject: [R-pkg-devel] Version number in check_results
In-Reply-To: <0134406946cb40cdb0f2bd31130fb544@bam.de>
References: <0134406946cb40cdb0f2bd31130fb544@bam.de>
Message-ID: <bc14c8fa2f1c44b4a7a18d30ce303744@bam.de>

Hi fellow developers,

[short version]
Is the depicted 'Version' in the CRAN package check results page referring to the version of the uploaded package?

[long version]
Due to changes in a suggested package I had to update my own and fail to get it pass the CRAN check_results step (while locally not even a Note remains in Rcheck).
Particularly I am worried about an ERROR for Flavor r-oldrel-windows-ix86+x86_64. However, if I understand it correctly than this error occurs for version 1.0 of my package on CRAN while I try to upload version 1.1. How do I proceed? Do I need to/can I fix the previous version first? Should I reply to the rejection e-mail stating that the error is not fur the current version? Or do I misinterpret something here?

Thank you very much.
Regards, Jan

	[[alternative HTML version deleted]]


From edd @ending from debi@n@org  Thu Nov  8 14:26:24 2018
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Thu, 8 Nov 2018 07:26:24 -0600
Subject: [R-pkg-devel] Version number in check_results
In-Reply-To: <bc14c8fa2f1c44b4a7a18d30ce303744@bam.de>
References: <0134406946cb40cdb0f2bd31130fb544@bam.de>
 <bc14c8fa2f1c44b4a7a18d30ce303744@bam.de>
Message-ID: <23524.14720.587991.872875@rob.eddelbuettel.com>


On 8 November 2018 at 07:21, Lisec, Jan wrote:
| [short version]
| Is the depicted 'Version' in the CRAN package check results page referring to the version of the uploaded package?
| 
| [long version]
| Due to changes in a suggested package I had to update my own and fail to get it pass the CRAN check_results step (while locally not even a Note remains in Rcheck).
| Particularly I am worried about an ERROR for Flavor r-oldrel-windows-ix86+x86_64. However, if I understand it correctly than this error occurs for version 1.0 of my package on CRAN while I try to upload version 1.1. How do I proceed? Do I need to/can I fix the previous version first? Should I reply to the rejection e-mail stating that the error is not fur the current version? Or do I misinterpret something here?

You fix 1.0 by replacing it with an improved 1.1.

And sometimes we can't.

With excellent help from James and Simon for the macOS side, I just worked
reasonably hard to get RProtoBuf down from three 'ERRORS' to one, but one of
those is on 'macOS oldrel' and my strategy to fix that one is to ... wait til
April for this release to die away.

CRAN gives us limited hooks, and things can be frustrating to debug and
check. The RHub helps a lot (and I managed to take care of the Slowlaris
issues that way) but the situation is of course far from perfect.  But we all
have limited resources and time so this may not change any time soon.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From kevinu@hey @ending from gm@il@com  Thu Nov  8 17:32:06 2018
From: kevinu@hey @ending from gm@il@com (Kevin Ushey)
Date: Thu, 8 Nov 2018 08:32:06 -0800
Subject: [R-pkg-devel] devtools::check() gives error on missing License
 field, but License field is not missing
In-Reply-To: <9275940c-3602-22a9-bb83-3d96f3e254c3@gmail.com>
References: <9275940c-3602-22a9-bb83-3d96f3e254c3@gmail.com>
Message-ID: <CAJXgQP0tGDBmMvW7ujb1yM0oXJQNtpnGgEbAwVvmvkWN+dSctQ@mail.gmail.com>

It would be easiest for others to diagnose if you could make your
package sources available (e.g. on GitHub) so that others might try to
download your package and reproduce the issue if possible on their own
machines.

Best,
Kevin

On Thu, Nov 8, 2018 at 12:24 AM Rampal S. Etienne
<rampaletienne at gmail.com> wrote:
>
> Yesterday I updated the devtools package and suddenly obtained some
> strange errors when running devtools::check().
>
> For instance, I get
>
> E checking for file 'secsse/DESCRIPTION'Required field missing or empty:
> 'License'
>
> However. the License line is present. I don't see anything wrong with
> it. See below.
>
> Furthermore, for another package, I get
>
> -checking package dependencies ...Error in if (force_suggests) lsuggests
> : (5.3s)missing value where TRUE/FALSE needed
>
>
> The check completes without reporting any warning, note or error, so
> this error seems an error in the function check itself.
>
> Does anyone get these errors too and know how to fix them?
>
> Cheers,
>
> Rampal Etienne
>
> DESCRIPTION
>
>
> Package: secsse
> Title: Several Examined and Concealed States-Dependent Speciation and
>  Extinction
> Version: 0.1.11
> License: GPL-3
> Authors at R: c(
>  person("Leonel", "Herrera Alsina", email = "leonelhalsina at gmail.com", role = "cre"),
>  person("Paul", "van Els", email = "paulvanels at gmail.com", role = "aut"),
>  person("Rampal", "Etienne", email = "r.s.etienne at rug.nl", role = "aut"))
> Description: It combines the features of HiSSE and MuSSE to
>  simultaneously infer state-dependent diversification across
>  two or more traits or states while accounting for the role
>  of a possible concealed trait.
> Depends: R (>= 3.5.0)
> Imports: utils,
>  DDD (> 3.0),
>  ape,
>  foreach,
>  doParallel,
>  apTreeshape,
>  phylobase,
>  geiger,
>  deSolve
> Suggests: testthat,
>  testit,
>  knitr,
>  rmarkdown,
>  doMC,
>  odeintr
> Encoding: UTF-8
> LazyData: true
> VignetteBuilder: knitr
> RoxygenNote: 6.1.1
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From wdunl@p @ending from tibco@com  Thu Nov  8 17:49:38 2018
From: wdunl@p @ending from tibco@com (William Dunlap)
Date: Thu, 8 Nov 2018 08:49:38 -0800
Subject: [R-pkg-devel] devtools::check() gives error on missing License
 field, but License field is not missing
In-Reply-To: <CAJXgQP0tGDBmMvW7ujb1yM0oXJQNtpnGgEbAwVvmvkWN+dSctQ@mail.gmail.com>
References: <9275940c-3602-22a9-bb83-3d96f3e254c3@gmail.com>
 <CAJXgQP0tGDBmMvW7ujb1yM0oXJQNtpnGgEbAwVvmvkWN+dSctQ@mail.gmail.com>
Message-ID: <CAF8bMcYXA9JktqabcgeCKbcFsdxHvUeW+x8rYgqGV7q4-_k+SA@mail.gmail.com>

The output of sessionInfo(), at the time of the error, would also be useful
- it will give the versions of devtools, pkgload, and all the other
packages that devtools requires.

Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Thu, Nov 8, 2018 at 8:32 AM, Kevin Ushey <kevinushey at gmail.com> wrote:

> It would be easiest for others to diagnose if you could make your
> package sources available (e.g. on GitHub) so that others might try to
> download your package and reproduce the issue if possible on their own
> machines.
>
> Best,
> Kevin
>
> On Thu, Nov 8, 2018 at 12:24 AM Rampal S. Etienne
> <rampaletienne at gmail.com> wrote:
> >
> > Yesterday I updated the devtools package and suddenly obtained some
> > strange errors when running devtools::check().
> >
> > For instance, I get
> >
> > E checking for file 'secsse/DESCRIPTION'Required field missing or empty:
> > 'License'
> >
> > However. the License line is present. I don't see anything wrong with
> > it. See below.
> >
> > Furthermore, for another package, I get
> >
> > -checking package dependencies ...Error in if (force_suggests) lsuggests
> > : (5.3s)missing value where TRUE/FALSE needed
> >
> >
> > The check completes without reporting any warning, note or error, so
> > this error seems an error in the function check itself.
> >
> > Does anyone get these errors too and know how to fix them?
> >
> > Cheers,
> >
> > Rampal Etienne
> >
> > DESCRIPTION
> >
> >
> > Package: secsse
> > Title: Several Examined and Concealed States-Dependent Speciation and
> >  Extinction
> > Version: 0.1.11
> > License: GPL-3
> > Authors at R: c(
> >  person("Leonel", "Herrera Alsina", email = "leonelhalsina at gmail.com",
> role = "cre"),
> >  person("Paul", "van Els", email = "paulvanels at gmail.com", role =
> "aut"),
> >  person("Rampal", "Etienne", email = "r.s.etienne at rug.nl", role =
> "aut"))
> > Description: It combines the features of HiSSE and MuSSE to
> >  simultaneously infer state-dependent diversification across
> >  two or more traits or states while accounting for the role
> >  of a possible concealed trait.
> > Depends: R (>= 3.5.0)
> > Imports: utils,
> >  DDD (> 3.0),
> >  ape,
> >  foreach,
> >  doParallel,
> >  apTreeshape,
> >  phylobase,
> >  geiger,
> >  deSolve
> > Suggests: testthat,
> >  testit,
> >  knitr,
> >  rmarkdown,
> >  doMC,
> >  odeintr
> > Encoding: UTF-8
> > LazyData: true
> > VignetteBuilder: knitr
> > RoxygenNote: 6.1.1
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Fri Nov  9 18:49:25 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Fri, 9 Nov 2018 18:49:25 +0100
Subject: [R-pkg-devel] ICU init failed: U_FILE_ACCESS_ERROR
In-Reply-To: <513a754c-0a16-2833-5e1b-5893a374181e@helsinki.fi>
References: <13b167e112c4419d9bbeff4e81790fc1@northland.edu>
 <0002c0cf-6b48-d08a-da48-0f2e4f6f9029@gmail.com>
 <CAARY7kjTLzGzZcyCGf-bDwDkX_ayBb7ZayPvwPpvaoacOuSxtQ@mail.gmail.com>
 <19d4b8d3119f4c7dba955a68491deab4@northland.edu>
 <513a754c-0a16-2833-5e1b-5893a374181e@helsinki.fi>
Message-ID: <d6a4835c-dea8-eac7-fc6e-deb51c88d716@statistik.tu-dortmund.de>

There was a local problem with stringi under Windows oldrel on 
winbuilder. This has been fixed, but it will need 2-3 more days to clear up.

Best,
Uwe Ligges

On 08.11.2018 08:24, Pedro J. Aphalo wrote:
> I think this error has to do with the binary version of stringi for
> Windows oldrel being out-of-date in CRAN (version 1.1.7 while source is
> at 1.2.4). The current version of stringi under Windows gives a
> compilation note, so the binary is not available in CRAN. This causes
> difficulties even with indirect dependencies (e.g. on lubridate). Even
> lubridate itself is failing CRAN tests on Windows oldrel. Also one of my
> packages is failing CRAN tests because it depends on lubridate. These
> packages have been accepted by CRAN. The compilation note triggered when
> building the stringi binary under Windows oldrel seems not to affect
> stringi in use (circumstantial evidence rather than systematic checking)
> and the current version of stringi can be installed from sources under
> Windows oldrel and at least locally this seems to solve the type of
> problems you are seeing.
> 
> Best regards,
> 
> Pedro.
> 
> On 2018-11-08 04:06, Derek Ogle wrote:
>> Ben ... I tried two more times today and still the same issue. Perhaps it is transient on a different time scale than what I have tested. I was hoping to not raise the R dependency level, but had thought about that as well. Thank you for your thoughts.
>>
>> David ... thank you for the experience and advice. I will try noting that on my submission to CRAN and see what happens. I will report back so others can see my experience with this issue.
>>
>> -----Original Message-----
>> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of David Hugh-Jones
>> Sent: Wednesday, November 7, 2018 4:24 PM
>> To: Ben Bolker <bbolker at gmail.com>
>> Cc: r-package-devel at r-project.org
>> Subject: Re: [R-pkg-devel] ICU init failed: U_FILE_ACCESS_ERROR
>>
>> My package had this issue and still got accepted. I think it is a known transient glitch. Just mention it when you submit.
>>
>> On Wed, 7 Nov 2018 at 22:05, Ben Bolker <bbolker at gmail.com> wrote:
>>
>>>     Does it happen consistently?  If it's only happened once, could be a
>>> transient glitch in package dependencies.  I'd try re-testing, as a
>>> start.  Alternatively, if you're willing to add an R >= 3.5.1
>>> dependency to your package, presumably CRAN won't mind if it fails
>>> tests on old-release ...
>>>
>>>
>>>
>>> On 2018-11-07 4:55 p.m., Derek Ogle wrote:
>>>> I am considering a CRAN release of a new package and was using
>>> R-winbuilder as a check. The check was successful with all but the
>>> "old-release" version (see
>>> https://win-builder.r-project.org/UhyHnNyn4Ukz/00check.log). The two
>>> errors both appear to be related to tests using
>>> testhtat::expect_output() and begin with the "ICU init failed: U_FILE_ACCESS_ERROR" error message.
>>> The full output for the first error is pasted below. My internet
>>> searches suggest (to me, but I am not confident) that this error is
>>> related to the stringr or stringi packages, which both appear to be
>>> used by testthat::expect_output(). Given that I don't receive this
>>> error in any other checking, I am not sure how to troubleshoot it
>>> (besides simply removing this test). Any thoughts would be greatly appreciated. Thank you.
>>>> ** running tests for arch 'i386' ... [5s] ERROR
>>>>     Running 'test-all.R' [4s]
>>>> Running the tests in 'tests/test-all.R' failed.
>>>> Complete output:
>>>>     > library(testthat)
>>>>     > test_check("RFishBC")
>>>>     Loading required package: RFishBC
>>>>     ## RFishBC v0.0.13.9000. See vignettes at derekogle.com/RFishBC/.
>>>>
>>>>     -- 1. Error: backCalc() output types (@test_OUTPUTS.R#272)
>>> --------------------
>>>>     ICU init failed: U_FILE_ACCESS_ERROR
>>>>     1: expect_output(backCalc(SMBassWB, lencap, BCM = "DALE", inFormat
>>>> =
>>> "wide", digits = 0),
>>>>            "Dahl-Lea") at testthat/test_OUTPUTS.R:272
>>>>     2: quasi_capture(enquo(object), capture_output, label = label)
>>>>     3: capture(act$val <- eval_bare(get_expr(quo), get_env(quo)))
>>>>     4: capture_output_lines(code, print, width = width)
>>>>     5: eval_with_output(code, print = print, width = width)
>>>>     6: withr::with_output_sink(temp, withVisible(code))
>>>>     7: force(code)
>>>>     8: withVisible(code)
>>>>     9: eval_bare(get_expr(quo), get_env(quo))
>>>>     10: backCalc(SMBassWB, lencap, BCM = "DALE", inFormat = "wide",
>>>> digits
>>> = 0)
>>>>     11: stringr::str_replace_all
>>>>     12: getExportedValue(pkg, name)
>>>>     13: asNamespace(ns)
>>>>     14: getNamespace(ns)
>>>>     15: tryCatch(loadNamespace(name), error = function(e) stop(e))
>>>>     16: tryCatchList(expr, classes, parentenv, handlers)
>>>>     17: tryCatchOne(expr, names, parentenv, handlers[[1L]])
>>>>     18: value[[3L]](cond)
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>> --
>> Sent from Gmail Mobile
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From tylermw @ending from gm@il@com  Fri Nov  9 21:14:44 2018
From: tylermw @ending from gm@il@com (Tyler)
Date: Fri, 9 Nov 2018 15:14:44 -0500
Subject: [R-pkg-devel] win-builder 3.4.4 build failure
Message-ID: <CAJhwqzR4nVhsXie5hYwjY+gaqnd7+JcTz-ne05fvCMJ979YA0g@mail.gmail.com>

 I uploaded a package to win-builder to run a CHECK and it seems to be
having some issues with the oldrelease build failing due to some
interaction with the `stringi` package. Not sure exactly what's causing the
issue, but I also recently found the same namespace errors on a recent
oldrelease CHECK of ggplot2:

My check:
https://win-builder.r-project.org/3jEiPwibmtvi/00install.out

ggplot2 recent example:
https://www.r-project.org/nosvn/R.check/r-oldrel-windows-ix86+x86_64/ggplot2-00check.html

Any idea what the issue is?
Tyler

	[[alternative HTML version deleted]]


From jknowle@ @ending from gm@il@com  Sun Nov 11 21:39:14 2018
From: jknowle@ @ending from gm@il@com (Jared Knowles)
Date: Sun, 11 Nov 2018 15:39:14 -0500
Subject: [R-pkg-devel] Unexpected symbol when checking package examples
Message-ID: <CADBYA3J3cFXMJ9dGgV6bhn8z5gVcAd_epLUFmfqTqyLkbRAuaQ@mail.gmail.com>

Hi!

I have a bit of a weird issue when I'm trying to check my package merTools
(source repo available here: https://github.com/jknowles/merTools

On Windows and Linux builds for R-release and R-devel, when R CMD CHECK
checks examples, it returns the following error below:

Warning: parse error in file 'merTools-Ex.R':
1: unexpected symbol
117: cleanEx()
118: nameEx


Upon inspecting the example file generated by R CMD CHECK (mertools-Ex.R) -
it contains only valid R code. I can run it line by line or source the
whole file in R without any errors. But, during the check process, this
error occurs.

The functions cleanEx() and nameEx() appear to be created as part of the
checking process.

I have not changed the examples in the code since the last time I ran R CMD
CHECK so I am quite confident that the example code for all functions is
valid R code.

Any ideas on what might be the source of this problem?

               Thanks!
                 Jared



Jared Knowles
President, Civilytics Consulting LLC
www.jaredknowles.com

	[[alternative HTML version deleted]]


From pd@lgd @ending from gm@il@com  Mon Nov 12 00:20:34 2018
From: pd@lgd @ending from gm@il@com (Peter Dalgaard)
Date: Mon, 12 Nov 2018 00:20:34 +0100
Subject: [R-pkg-devel] Unexpected symbol when checking package examples
In-Reply-To: <CADBYA3J3cFXMJ9dGgV6bhn8z5gVcAd_epLUFmfqTqyLkbRAuaQ@mail.gmail.com>
References: <CADBYA3J3cFXMJ9dGgV6bhn8z5gVcAd_epLUFmfqTqyLkbRAuaQ@mail.gmail.com>
Message-ID: <C6B2A220-1C57-4B13-B126-69E18C691158@gmail.com>

Not just a capitalization issue (mertools vs. merTools)?

Barring that, maybe locale trouble? Can you also do things like

LC_ALL=C R < merTools-Ex.R

?

Also, check for lines starting with "else" (I think you shouldn't be able to run it line-by-line if that was the issue, though).

-pd

> On 11 Nov 2018, at 21:39 , Jared Knowles <jknowles at gmail.com> wrote:
> 
> Hi!
> 
> I have a bit of a weird issue when I'm trying to check my package merTools
> (source repo available here: https://github.com/jknowles/merTools
> 
> On Windows and Linux builds for R-release and R-devel, when R CMD CHECK
> checks examples, it returns the following error below:
> 
> Warning: parse error in file 'merTools-Ex.R':
> 1: unexpected symbol
> 117: cleanEx()
> 118: nameEx
> 
> 
> Upon inspecting the example file generated by R CMD CHECK (mertools-Ex.R) -
> it contains only valid R code. I can run it line by line or source the
> whole file in R without any errors. But, during the check process, this
> error occurs.
> 
> The functions cleanEx() and nameEx() appear to be created as part of the
> checking process.
> 
> I have not changed the examples in the code since the last time I ran R CMD
> CHECK so I am quite confident that the example code for all functions is
> valid R code.
> 
> Any ideas on what might be the source of this problem?
> 
>               Thanks!
>                 Jared
> 
> 
> 
> Jared Knowles
> President, Civilytics Consulting LLC
> www.jaredknowles.com
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From murdoch@dunc@n @ending from gm@il@com  Mon Nov 12 00:53:11 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Sun, 11 Nov 2018 18:53:11 -0500
Subject: [R-pkg-devel] Unexpected symbol when checking package examples
In-Reply-To: <CADBYA3J3cFXMJ9dGgV6bhn8z5gVcAd_epLUFmfqTqyLkbRAuaQ@mail.gmail.com>
References: <CADBYA3J3cFXMJ9dGgV6bhn8z5gVcAd_epLUFmfqTqyLkbRAuaQ@mail.gmail.com>
Message-ID: <928bf7b1-ccca-01fa-1599-361d49dc57e7@gmail.com>

On 11/11/2018 3:39 PM, Jared Knowles wrote:
> Hi!
> 
> I have a bit of a weird issue when I'm trying to check my package merTools
> (source repo available here: https://github.com/jknowles/merTools
> 
> On Windows and Linux builds for R-release and R-devel, when R CMD CHECK
> checks examples, it returns the following error below:
> 
> Warning: parse error in file 'merTools-Ex.R':
> 1: unexpected symbol
> 117: cleanEx()
> 118: nameEx

I also get this error on MacOS.

> 
> 
> Upon inspecting the example file generated by R CMD CHECK (mertools-Ex.R) -
> it contains only valid R code. I can run it line by line or source the
> whole file in R without any errors. But, during the check process, this
> error occurs.

The problem is in the REimpact help file.  It contains this:

zed3 <- REimpact(g1, newdata = InstEval[9:12, ], groupFctr = "d", breaks 
= 5,

and there's no closing paren.

This is in a \donttest section of the examples, so it gets deleted when 
running the examples, and that's the version of merTools-Ex.R that is 
left at the end.  But the warning happened in a different test,

* checking for unstated dependencies in examples ... WARNING
Warning: parse error in file 'merTools-Ex.R':
1: unexpected symbol
118: cleanEx()
119: nameEx
      ^

and it is based on a different version of that file that doesn't omit 
the \donttest section.

This is arguably an R bug:  the line numbers are misleading, since they 
refer to a version of the file that no longer exists.  Perhaps when you 
say \donttest, no tests should be done.

Duncan Murdoch



> The functions cleanEx() and nameEx() appear to be created as part of the
> checking process.
> 
> I have not changed the examples in the code since the last time I ran R CMD
> CHECK so I am quite confident that the example code for all functions is
> valid R code.
> 
> Any ideas on what might be the source of this problem?
> 
>                 Thanks!
>                   Jared
> 
> 
> 
> Jared Knowles
> President, Civilytics Consulting LLC
> www.jaredknowles.com
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From murdoch@dunc@n @ending from gm@il@com  Mon Nov 12 01:01:11 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Sun, 11 Nov 2018 19:01:11 -0500
Subject: [R-pkg-devel] Unexpected symbol when checking package examples
In-Reply-To: <928bf7b1-ccca-01fa-1599-361d49dc57e7@gmail.com>
References: <CADBYA3J3cFXMJ9dGgV6bhn8z5gVcAd_epLUFmfqTqyLkbRAuaQ@mail.gmail.com>
 <928bf7b1-ccca-01fa-1599-361d49dc57e7@gmail.com>
Message-ID: <587bd0bf-00a2-93c2-18ea-aea33018d018@gmail.com>

On 11/11/2018 6:53 PM, Duncan Murdoch wrote:
> On 11/11/2018 3:39 PM, Jared Knowles wrote:
>> Hi!
>>
>> I have a bit of a weird issue when I'm trying to check my package merTools
>> (source repo available here: https://github.com/jknowles/merTools
>>
>> On Windows and Linux builds for R-release and R-devel, when R CMD CHECK
>> checks examples, it returns the following error below:
>>
>> Warning: parse error in file 'merTools-Ex.R':
>> 1: unexpected symbol
>> 117: cleanEx()
>> 118: nameEx
> 
> I also get this error on MacOS.
> 
>>
>>
>> Upon inspecting the example file generated by R CMD CHECK (mertools-Ex.R) -
>> it contains only valid R code. I can run it line by line or source the
>> whole file in R without any errors. But, during the check process, this
>> error occurs.
> 
> The problem is in the REimpact help file.  It contains this:
> 
> zed3 <- REimpact(g1, newdata = InstEval[9:12, ], groupFctr = "d", breaks
> = 5,
> 
> and there's no closing paren.
> 
> This is in a \donttest section of the examples, so it gets deleted when
> running the examples, and that's the version of merTools-Ex.R that is
> left at the end.  But the warning happened in a different test,
> 
> * checking for unstated dependencies in examples ... WARNING
> Warning: parse error in file 'merTools-Ex.R':
> 1: unexpected symbol
> 118: cleanEx()
> 119: nameEx
>        ^
> 
> and it is based on a different version of that file that doesn't omit
> the \donttest section.
> 
> This is arguably an R bug:  the line numbers are misleading, since they
> refer to a version of the file that no longer exists.  Perhaps when you
> say \donttest, no tests should be done.

Cancel that last sentence:  if you run "example(REimpact)", you get a 
syntax error message, because \donttest is not the same as \dontrun.  So 
this has to be fixed in the original file.

But the first part is still right:  you shouldn't say the problem is on 
line 119 of 'merTools-Ex.R', and then rewrite the file so that line 
isn't there any more.

Duncan Murdoch

> 
> Duncan Murdoch
> 
> 
> 
>> The functions cleanEx() and nameEx() appear to be created as part of the
>> checking process.
>>
>> I have not changed the examples in the code since the last time I ran R CMD
>> CHECK so I am quite confident that the example code for all functions is
>> valid R code.
>>
>> Any ideas on what might be the source of this problem?
>>
>>                  Thanks!
>>                    Jared
>>
>>
>>
>> Jared Knowles
>> President, Civilytics Consulting LLC
>> www.jaredknowles.com
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>


From dh@mm@p@lb @ending from uohyd@@c@in  Mon Nov 12 03:54:54 2018
From: dh@mm@p@lb @ending from uohyd@@c@in (dhamma pal)
Date: Mon, 12 Nov 2018 08:24:54 +0530
Subject: [R-pkg-devel] Fwd: [CRAN-pretest-archived] CRAN submission maGUI 2.3
In-Reply-To: <01d47736$Blat.v3.2.16$a4a2f5f2$1bc644c8a@mail.statistik.tu-dortmund.de>
References: <20181108071501.873F2160B2B@xmpalantir.wu.ac.at>
 <01d47736$Blat.v3.2.16$a4a2f5f2$1bc644c8a@mail.statistik.tu-dortmund.de>
Message-ID: <CACApb-FndGmO0VyZSP2BPLtDQdma54-N03f31cD1LQ3POKWASw@mail.gmail.com>

The latest version donot use BIOCINSTALLER or bioclite, still getting a
warning.

Errors are not detected in the current version, i.e. 2.3 version of maGUI.
But errors are getting reported in the earlier version i.e., 2.2 which is
not the making the current version to pass through the CRAN. I have tried
to submit the corrected  package with version 2.2 to rectify the errors,
but getting overriden error. Now how to ugrade maGUI to 2.3?
Thanks in advance.


---------- Forwarded message ---------
From: <ligges at statistik.tu-dortmund.de>
Date: Thu, 8 Nov 2018, 1:12 pm
Subject: [CRAN-pretest-archived] CRAN submission maGUI 2.3
To: <dhammapalb at uohyd.ac.in>
Cc: <CRAN-submissions at r-project.org>


Dear maintainer,

package maGUI_2.3.tar.gz does not pass the incoming checks automatically,
please see the following pre-tests:
Windows: <
https://win-builder.r-project.org/incoming_pretest/maGUI_2.3_20181108_081501/Windows/00check.log
>
Status: 1 WARNING, 1 NOTE
Debian: <
https://win-builder.r-project.org/incoming_pretest/maGUI_2.3_20181108_081501/Debian/00check.log
>
Status: 1 NOTE

Last released version's CRAN status: ERROR: 2
See: <https://CRAN.R-project.org/web/checks/check_results_maGUI.html>

CRAN Web: <https://cran.r-project.org/package=maGUI>

Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on
the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please
reply-all to this message and explain.

More details are given in the directory:
<
https://win-builder.r-project.org/incoming_pretest/maGUI_2.3_20181108_081501/
>
The files will be removed after roughly 7 days.

No strong reverse dependencies to be checked.

Best regards,
CRAN teams' auto-check service
Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
Check: CRAN incoming feasibility, Result: NOTE
  Maintainer: 'Dhammapal Bharne <dhammapalb at uohyd.ac.in>'

  New submission

  Package was archived on CRAN

  CRAN repository db overrides:
    X-CRAN-Comment: Archived on 2018-11-01 as check warnings were not
      corrected despite a month's notice.

    Needed change for BioC 3.8

Flavor: r-devel-windows-ix86+x86_64
Check: whether package can be installed, Result: WARNING
  Found the following significant warnings:
    Warning: 'BiocInstaller' and 'biocLite()' are deprecated, use the
'BiocManager' CRAN
  See 'd:/RCompile/CRANincoming/R-devel/maGUI.Rcheck/00install.out' for
details.

	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Mon Nov 12 13:12:02 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Mon, 12 Nov 2018 07:12:02 -0500
Subject: [R-pkg-devel] Unexpected symbol when checking package examples
In-Reply-To: <587bd0bf-00a2-93c2-18ea-aea33018d018@gmail.com>
References: <CADBYA3J3cFXMJ9dGgV6bhn8z5gVcAd_epLUFmfqTqyLkbRAuaQ@mail.gmail.com>
 <928bf7b1-ccca-01fa-1599-361d49dc57e7@gmail.com>
 <587bd0bf-00a2-93c2-18ea-aea33018d018@gmail.com>
Message-ID: <55bc4ce4-9005-5b07-a86b-1ef572ed6a22@gmail.com>

On 11/11/2018 7:01 PM, Duncan Murdoch wrote:
> On 11/11/2018 6:53 PM, Duncan Murdoch wrote:
>> On 11/11/2018 3:39 PM, Jared Knowles wrote:
>>> Hi!
>>>
>>> I have a bit of a weird issue when I'm trying to check my package merTools
>>> (source repo available here: https://github.com/jknowles/merTools
>>>
>>> On Windows and Linux builds for R-release and R-devel, when R CMD CHECK
>>> checks examples, it returns the following error below:
>>>
>>> Warning: parse error in file 'merTools-Ex.R':
>>> 1: unexpected symbol
>>> 117: cleanEx()
>>> 118: nameEx
>>
>> I also get this error on MacOS.
>>
>>>
>>>
>>> Upon inspecting the example file generated by R CMD CHECK (mertools-Ex.R) -
>>> it contains only valid R code. I can run it line by line or source the
>>> whole file in R without any errors. But, during the check process, this
>>> error occurs.
>>
>> The problem is in the REimpact help file.  It contains this:
>>
>> zed3 <- REimpact(g1, newdata = InstEval[9:12, ], groupFctr = "d", breaks
>> = 5,
>>
>> and there's no closing paren.
>>
>> This is in a \donttest section of the examples, so it gets deleted when
>> running the examples, and that's the version of merTools-Ex.R that is
>> left at the end.  But the warning happened in a different test,
>>
>> * checking for unstated dependencies in examples ... WARNING
>> Warning: parse error in file 'merTools-Ex.R':
>> 1: unexpected symbol
>> 118: cleanEx()
>> 119: nameEx
>>         ^
>>
>> and it is based on a different version of that file that doesn't omit
>> the \donttest section.
>>
>> This is arguably an R bug:  the line numbers are misleading, since they
>> refer to a version of the file that no longer exists.  Perhaps when you
>> say \donttest, no tests should be done.
> 
> Cancel that last sentence:  if you run "example(REimpact)", you get a
> syntax error message, because \donttest is not the same as \dontrun.  So
> this has to be fixed in the original file.
> 
> But the first part is still right:  you shouldn't say the problem is on
> line 119 of 'merTools-Ex.R', and then rewrite the file so that line
> isn't there any more.

I have submitted a bug report 
(https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=17501) about this.

Duncan Murdoch


From mtmorg@n@bioc @ending from gm@il@com  Mon Nov 12 13:14:58 2018
From: mtmorg@n@bioc @ending from gm@il@com (Martin Morgan)
Date: Mon, 12 Nov 2018 12:14:58 +0000
Subject: [R-pkg-devel] 
 Fwd: [CRAN-pretest-archived] CRAN submission maGUI 2.3
In-Reply-To: <CACApb-FndGmO0VyZSP2BPLtDQdma54-N03f31cD1LQ3POKWASw@mail.gmail.com>
References: <20181108071501.873F2160B2B@xmpalantir.wu.ac.at>
 <01d47736$Blat.v3.2.16$a4a2f5f2$1bc644c8a@mail.statistik.tu-dortmund.de>
 <CACApb-FndGmO0VyZSP2BPLtDQdma54-N03f31cD1LQ3POKWASw@mail.gmail.com>
Message-ID: <MWHPR05MB3582D8704C86C6193CB15266F9C10@MWHPR05MB3582.namprd05.prod.outlook.com>

I cannot tell whether this will be helpful or not. It looks to me like the warning occurs when one of your dependencies uses BiocInstaller. You could create a database of all available packages

  chooseCRANmirror()
  chooseBioCmirror()
  db = available.packages()

find the installation dependencies of your package dependencies

  flds = c("Depends", "Imports", "LinkingTo")
  pkgs = read.dcf("DESCRIPTION", flds)[, flds]
  pkgs = trimws(unlist(strsplit(pkgs, ","), use.names = FALSE))
  pkgs = pkgs[!is.na(pkgs)]

and discover which references BiocInstaller

  deps = tools::package_dependencies(pkgs, db, recursive = TRUE)
  unlist(deps)["BiocInstaller" %in% unlist(deps)]

But actually when I run this with version 2.2 of your package I don't see a dependency on BiocInstaller (other than in your own package).

Martin

?On 11/11/18, 9:55 PM, "R-package-devel on behalf of dhamma pal" <r-package-devel-bounces at r-project.org on behalf of dhammapalb at uohyd.ac.in> wrote:

    The latest version donot use BIOCINSTALLER or bioclite, still getting a
    warning.
    
    Errors are not detected in the current version, i.e. 2.3 version of maGUI.
    But errors are getting reported in the earlier version i.e., 2.2 which is
    not the making the current version to pass through the CRAN. I have tried
    to submit the corrected  package with version 2.2 to rectify the errors,
    but getting overriden error. Now how to ugrade maGUI to 2.3?
    Thanks in advance.
    
    
    ---------- Forwarded message ---------
    From: <ligges at statistik.tu-dortmund.de>
    Date: Thu, 8 Nov 2018, 1:12 pm
    Subject: [CRAN-pretest-archived] CRAN submission maGUI 2.3
    To: <dhammapalb at uohyd.ac.in>
    Cc: <CRAN-submissions at r-project.org>
    
    
    Dear maintainer,
    
    package maGUI_2.3.tar.gz does not pass the incoming checks automatically,
    please see the following pre-tests:
    Windows: <
    https://win-builder.r-project.org/incoming_pretest/maGUI_2.3_20181108_081501/Windows/00check.log
    >
    Status: 1 WARNING, 1 NOTE
    Debian: <
    https://win-builder.r-project.org/incoming_pretest/maGUI_2.3_20181108_081501/Debian/00check.log
    >
    Status: 1 NOTE
    
    Last released version's CRAN status: ERROR: 2
    See: <https://CRAN.R-project.org/web/checks/check_results_maGUI.html>
    
    CRAN Web: <https://cran.r-project.org/package=maGUI>
    
    Please fix all problems and resubmit a fixed version via the webform.
    If you are not sure how to fix the problems shown, please ask for help on
    the R-package-devel mailing list:
    <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
    If you are fairly certain the rejection is a false positive, please
    reply-all to this message and explain.
    
    More details are given in the directory:
    <
    https://win-builder.r-project.org/incoming_pretest/maGUI_2.3_20181108_081501/
    >
    The files will be removed after roughly 7 days.
    
    No strong reverse dependencies to be checked.
    
    Best regards,
    CRAN teams' auto-check service
    Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
    Check: CRAN incoming feasibility, Result: NOTE
      Maintainer: 'Dhammapal Bharne <dhammapalb at uohyd.ac.in>'
    
      New submission
    
      Package was archived on CRAN
    
      CRAN repository db overrides:
        X-CRAN-Comment: Archived on 2018-11-01 as check warnings were not
          corrected despite a month's notice.
    
        Needed change for BioC 3.8
    
    Flavor: r-devel-windows-ix86+x86_64
    Check: whether package can be installed, Result: WARNING
      Found the following significant warnings:
        Warning: 'BiocInstaller' and 'biocLite()' are deprecated, use the
    'BiocManager' CRAN
      See 'd:/RCompile/CRANincoming/R-devel/maGUI.Rcheck/00install.out' for
    details.
    
    	[[alternative HTML version deleted]]
    
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel
    

From jknowle@ @ending from gm@il@com  Mon Nov 12 13:56:34 2018
From: jknowle@ @ending from gm@il@com (Jared Knowles)
Date: Mon, 12 Nov 2018 07:56:34 -0500
Subject: [R-pkg-devel] Unexpected symbol when checking package examples
In-Reply-To: <928bf7b1-ccca-01fa-1599-361d49dc57e7@gmail.com>
References: <CADBYA3J3cFXMJ9dGgV6bhn8z5gVcAd_epLUFmfqTqyLkbRAuaQ@mail.gmail.com>
 <928bf7b1-ccca-01fa-1599-361d49dc57e7@gmail.com>
Message-ID: <CADBYA3JjddYY9sEjFNLbqiMyY-vPL0XzdS=o-=SaTSu=iacf5w@mail.gmail.com>

Thank you so much for the help!

The origin of this mistake was mine - I forgot a ' following a # in my
roxygen example code - which meant roxygen ignored the closing parens on
the next line. (See example)

\donttest{
#' # You can also pass additional arguments to predictInterval through
REimpact
#' g1 <- lmer(y ~ lectage + studage + (1|d) + (1|s), data=InstEval)
#' zed <- REimpact(g1, newdata = InstEval[9:12, ], groupFctr = "d", n.sims
= 50,
#'                 include.resid.var = TRUE)
#' zed2 <- REimpact(g1, newdata = InstEval[9:12, ], groupFctr = "s", n.sims
= 50,
#'                  include.resid.var = TRUE)
#' zed3 <- REimpact(g1, newdata = InstEval[9:12, ], groupFctr = "d", breaks
= 5,
#                 n.sims = 50, include.resid.var = TRUE)
#' }

Thanks everyone for the help. I never would have found this mistake without
this list.

         Jared


On Sun, Nov 11, 2018 at 6:53 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 11/11/2018 3:39 PM, Jared Knowles wrote:
> > Hi!
> >
> > I have a bit of a weird issue when I'm trying to check my package
> merTools
> > (source repo available here: https://github.com/jknowles/merTools
> >
> > On Windows and Linux builds for R-release and R-devel, when R CMD CHECK
> > checks examples, it returns the following error below:
> >
> > Warning: parse error in file 'merTools-Ex.R':
> > 1: unexpected symbol
> > 117: cleanEx()
> > 118: nameEx
>
> I also get this error on MacOS.
>
> >
> >
> > Upon inspecting the example file generated by R CMD CHECK
> (mertools-Ex.R) -
> > it contains only valid R code. I can run it line by line or source the
> > whole file in R without any errors. But, during the check process, this
> > error occurs.
>
> The problem is in the REimpact help file.  It contains this:
>
> zed3 <- REimpact(g1, newdata = InstEval[9:12, ], groupFctr = "d", breaks
> = 5,
>
> and there's no closing paren.
>
> This is in a \donttest section of the examples, so it gets deleted when
> running the examples, and that's the version of merTools-Ex.R that is
> left at the end.  But the warning happened in a different test,
>
> * checking for unstated dependencies in examples ... WARNING
> Warning: parse error in file 'merTools-Ex.R':
> 1: unexpected symbol
> 118: cleanEx()
> 119: nameEx
>       ^
>
> and it is based on a different version of that file that doesn't omit
> the \donttest section.
>
> This is arguably an R bug:  the line numbers are misleading, since they
> refer to a version of the file that no longer exists.  Perhaps when you
> say \donttest, no tests should be done.
>
> Duncan Murdoch
>
>
>
> > The functions cleanEx() and nameEx() appear to be created as part of the
> > checking process.
> >
> > I have not changed the examples in the code since the last time I ran R
> CMD
> > CHECK so I am quite confident that the example code for all functions is
> > valid R code.
> >
> > Any ideas on what might be the source of this problem?
> >
> >                 Thanks!
> >                   Jared
> >
> >
> >
> > Jared Knowles
> > President, Civilytics Consulting LLC
> > www.jaredknowles.com
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Mon Nov 12 14:19:09 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Mon, 12 Nov 2018 08:19:09 -0500
Subject: [R-pkg-devel] Unexpected symbol when checking package examples
In-Reply-To: <CADBYA3JjddYY9sEjFNLbqiMyY-vPL0XzdS=o-=SaTSu=iacf5w@mail.gmail.com>
References: <CADBYA3J3cFXMJ9dGgV6bhn8z5gVcAd_epLUFmfqTqyLkbRAuaQ@mail.gmail.com>
 <928bf7b1-ccca-01fa-1599-361d49dc57e7@gmail.com>
 <CADBYA3JjddYY9sEjFNLbqiMyY-vPL0XzdS=o-=SaTSu=iacf5w@mail.gmail.com>
Message-ID: <15aec28b-e876-f11d-7714-a4aeff18af67@gmail.com>

On 12/11/2018 7:56 AM, Jared Knowles wrote:
> Thank you so much for the help!
> 
> The origin of this mistake was mine - I forgot a ' following a # in my 
> roxygen example code - which meant roxygen ignored the closing parens on 
> the next line. (See example)
> 
> \donttest{
> #' # You can also pass additional arguments to predictInterval through 
> REimpact
> #' g1 <- lmer(y ~ lectage + studage + (1|d) + (1|s), data=InstEval)
> #' zed <- REimpact(g1, newdata = InstEval[9:12, ], groupFctr = "d", 
> n.sims = 50,
> #'???????????????? include.resid.var = TRUE)
> #' zed2 <- REimpact(g1, newdata = InstEval[9:12, ], groupFctr = "s", 
> n.sims = 50,
> #'????????????????? include.resid.var = TRUE)
> #' zed3 <- REimpact(g1, newdata = InstEval[9:12, ], groupFctr = "d", 
> breaks = 5,
> #???????????????? n.sims = 50, include.resid.var = TRUE)
> #' }
> 
> Thanks everyone for the help. I never would have found this mistake 
> without this list.

Perhaps roxygen should try parsing the code it inserts as examples.  It 
can probably give a better error message than R could, since it knows 
which .R file it's looking at when the problem happens.

Duncan Murdoch

> 
>  ???????? Jared
> 
> 
> On Sun, Nov 11, 2018 at 6:53 PM Duncan Murdoch <murdoch.duncan at gmail.com 
> <mailto:murdoch.duncan at gmail.com>> wrote:
> 
>     On 11/11/2018 3:39 PM, Jared Knowles wrote:
>      > Hi!
>      >
>      > I have a bit of a weird issue when I'm trying to check my package
>     merTools
>      > (source repo available here: https://github.com/jknowles/merTools
>      >
>      > On Windows and Linux builds for R-release and R-devel, when R CMD
>     CHECK
>      > checks examples, it returns the following error below:
>      >
>      > Warning: parse error in file 'merTools-Ex.R':
>      > 1: unexpected symbol
>      > 117: cleanEx()
>      > 118: nameEx
> 
>     I also get this error on MacOS.
> 
>      >
>      >
>      > Upon inspecting the example file generated by R CMD CHECK
>     (mertools-Ex.R) -
>      > it contains only valid R code. I can run it line by line or
>     source the
>      > whole file in R without any errors. But, during the check
>     process, this
>      > error occurs.
> 
>     The problem is in the REimpact help file.? It contains this:
> 
>     zed3 <- REimpact(g1, newdata = InstEval[9:12, ], groupFctr = "d",
>     breaks
>     = 5,
> 
>     and there's no closing paren.
> 
>     This is in a \donttest section of the examples, so it gets deleted when
>     running the examples, and that's the version of merTools-Ex.R that is
>     left at the end.? But the warning happened in a different test,
> 
>     * checking for unstated dependencies in examples ... WARNING
>     Warning: parse error in file 'merTools-Ex.R':
>     1: unexpected symbol
>     118: cleanEx()
>     119: nameEx
>      ? ? ? ^
> 
>     and it is based on a different version of that file that doesn't omit
>     the \donttest section.
> 
>     This is arguably an R bug:? the line numbers are misleading, since they
>     refer to a version of the file that no longer exists.? Perhaps when you
>     say \donttest, no tests should be done.
> 
>     Duncan Murdoch
> 
> 
> 
>      > The functions cleanEx() and nameEx() appear to be created as part
>     of the
>      > checking process.
>      >
>      > I have not changed the examples in the code since the last time I
>     ran R CMD
>      > CHECK so I am quite confident that the example code for all
>     functions is
>      > valid R code.
>      >
>      > Any ideas on what might be the source of this problem?
>      >
>      >? ? ? ? ? ? ? ? ?Thanks!
>      >? ? ? ? ? ? ? ? ? ?Jared
>      >
>      >
>      >
>      > Jared Knowles
>      > President, Civilytics Consulting LLC
>      > www.jaredknowles.com <http://www.jaredknowles.com>
>      >
>      >? ? ? ?[[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >
>


From dh@mm@p@lb @ending from uohyd@@c@in  Wed Nov 14 14:39:24 2018
From: dh@mm@p@lb @ending from uohyd@@c@in (dhamma pal)
Date: Wed, 14 Nov 2018 19:09:24 +0530
Subject: [R-pkg-devel] 
 Fwd: [CRAN-pretest-archived] CRAN submission maGUI 2.3
In-Reply-To: <MWHPR05MB3582D8704C86C6193CB15266F9C10@MWHPR05MB3582.namprd05.prod.outlook.com>
References: <20181108071501.873F2160B2B@xmpalantir.wu.ac.at>
 <01d47736$Blat.v3.2.16$a4a2f5f2$1bc644c8a@mail.statistik.tu-dortmund.de>
 <CACApb-FndGmO0VyZSP2BPLtDQdma54-N03f31cD1LQ3POKWASw@mail.gmail.com>
 <MWHPR05MB3582D8704C86C6193CB15266F9C10@MWHPR05MB3582.namprd05.prod.outlook.com>
Message-ID: <CACApb-EmZD+QfzozTB82b-s6AM0Hyw7vupxwvFbH3-OL9+YOGg@mail.gmail.com>

0Ok, thanks.
I have tried all suggested by you. But no package or function detected to
be dependent on BiocInstaller or Bioclite.
I have tested on both windows and linux OSs, but none shown any warning
related to these deprecated packages. Everything working fine on my PCs but
not able to pass through CRAN check at the CRAN organisation.

On Mon, 12 Nov 2018, 5:45 pm Martin Morgan <mtmorgan.bioc at gmail.com wrote:

> I cannot tell whether this will be helpful or not. It looks to me like the
> warning occurs when one of your dependencies uses BiocInstaller. You could
> create a database of all available packages
>
>   chooseCRANmirror()
>   chooseBioCmirror()
>   db = available.packages()
>
> find the installation dependencies of your package dependencies
>
>   flds = c("Depends", "Imports", "LinkingTo")
>   pkgs = read.dcf("DESCRIPTION", flds)[, flds]
>   pkgs = trimws(unlist(strsplit(pkgs, ","), use.names = FALSE))
>   pkgs = pkgs[!is.na(pkgs)]
>
> and discover which references BiocInstaller
>
>   deps = tools::package_dependencies(pkgs, db, recursive = TRUE)
>   unlist(deps)["BiocInstaller" %in% unlist(deps)]
>
> But actually when I run this with version 2.2 of your package I don't see
> a dependency on BiocInstaller (other than in your own package).
>
> Martin
>
> ?On 11/11/18, 9:55 PM, "R-package-devel on behalf of dhamma pal" <
> r-package-devel-bounces at r-project.org on behalf of dhammapalb at uohyd.ac.in>
> wrote:
>
>     The latest version donot use BIOCINSTALLER or bioclite, still getting a
>     warning.
>
>     Errors are not detected in the current version, i.e. 2.3 version of
> maGUI.
>     But errors are getting reported in the earlier version i.e., 2.2 which
> is
>     not the making the current version to pass through the CRAN. I have
> tried
>     to submit the corrected  package with version 2.2 to rectify the
> errors,
>     but getting overriden error. Now how to ugrade maGUI to 2.3?
>     Thanks in advance.
>
>
>     ---------- Forwarded message ---------
>     From: <ligges at statistik.tu-dortmund.de>
>     Date: Thu, 8 Nov 2018, 1:12 pm
>     Subject: [CRAN-pretest-archived] CRAN submission maGUI 2.3
>     To: <dhammapalb at uohyd.ac.in>
>     Cc: <CRAN-submissions at r-project.org>
>
>
>     Dear maintainer,
>
>     package maGUI_2.3.tar.gz does not pass the incoming checks
> automatically,
>     please see the following pre-tests:
>     Windows: <
>
> https://win-builder.r-project.org/incoming_pretest/maGUI_2.3_20181108_081501/Windows/00check.log
>     >
>     Status: 1 WARNING, 1 NOTE
>     Debian: <
>
> https://win-builder.r-project.org/incoming_pretest/maGUI_2.3_20181108_081501/Debian/00check.log
>     >
>     Status: 1 NOTE
>
>     Last released version's CRAN status: ERROR: 2
>     See: <https://CRAN.R-project.org/web/checks/check_results_maGUI.html>
>
>     CRAN Web: <https://cran.r-project.org/package=maGUI>
>
>     Please fix all problems and resubmit a fixed version via the webform.
>     If you are not sure how to fix the problems shown, please ask for help
> on
>     the R-package-devel mailing list:
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>     If you are fairly certain the rejection is a false positive, please
>     reply-all to this message and explain.
>
>     More details are given in the directory:
>     <
>
> https://win-builder.r-project.org/incoming_pretest/maGUI_2.3_20181108_081501/
>     >
>     The files will be removed after roughly 7 days.
>
>     No strong reverse dependencies to be checked.
>
>     Best regards,
>     CRAN teams' auto-check service
>     Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
>     Check: CRAN incoming feasibility, Result: NOTE
>       Maintainer: 'Dhammapal Bharne <dhammapalb at uohyd.ac.in>'
>
>       New submission
>
>       Package was archived on CRAN
>
>       CRAN repository db overrides:
>         X-CRAN-Comment: Archived on 2018-11-01 as check warnings were not
>           corrected despite a month's notice.
>
>         Needed change for BioC 3.8
>
>     Flavor: r-devel-windows-ix86+x86_64
>     Check: whether package can be installed, Result: WARNING
>       Found the following significant warnings:
>         Warning: 'BiocInstaller' and 'biocLite()' are deprecated, use the
>     'BiocManager' CRAN
>       See 'd:/RCompile/CRANincoming/R-devel/maGUI.Rcheck/00install.out' for
>     details.
>
>         [[alternative HTML version deleted]]
>
>     ______________________________________________
>     R-package-devel at r-project.org mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
On 12 Nov 2018 5:45 pm, "Martin Morgan" <mtmorgan.bioc at gmail.com> wrote:

I cannot tell whether this will be helpful or not. It looks to me like the
warning occurs when one of your dependencies uses BiocInstaller. You could
create a database of all available packages

  chooseCRANmirror()
  chooseBioCmirror()
  db = available.packages()

find the installation dependencies of your package dependencies

  flds = c("Depends", "Imports", "LinkingTo")
  pkgs = read.dcf("DESCRIPTION", flds)[, flds]
  pkgs = trimws(unlist(strsplit(pkgs, ","), use.names = FALSE))
  pkgs = pkgs[!is.na(pkgs)]

and discover which references BiocInstaller

  deps = tools::package_dependencies(pkgs, db, recursive = TRUE)
  unlist(deps)["BiocInstaller" %in% unlist(deps)]

But actually when I run this with version 2.2 of your package I don't see a
dependency on BiocInstaller (other than in your own package).

Martin


?On 11/11/18, 9:55 PM, "R-package-devel on behalf of dhamma pal" <
r-package-devel-bounces at r-project.org on behalf of dhammapalb at uohyd.ac.in>
wrote:

    The latest version donot use BIOCINSTALLER or bioclite, still getting a
    warning.

    Errors are not detected in the current version, i.e. 2.3 version of
maGUI.
    But errors are getting reported in the earlier version i.e., 2.2 which
is
    not the making the current version to pass through the CRAN. I have
tried
    to submit the corrected  package with version 2.2 to rectify the errors,
    but getting overriden error. Now how to ugrade maGUI to 2.3?
    Thanks in advance.


    ---------- Forwarded message ---------
    From: <ligges at statistik.tu-dortmund.de>
    Date: Thu, 8 Nov 2018, 1:12 pm
    Subject: [CRAN-pretest-archived] CRAN submission maGUI 2.3
    To: <dhammapalb at uohyd.ac.in>
    Cc: <CRAN-submissions at r-project.org>


    Dear maintainer,

    package maGUI_2.3.tar.gz does not pass the incoming checks
automatically,
    please see the following pre-tests:
    Windows: <

https://win-builder.r-project.org/incoming_pretest/maGUI_2.3_20181108_081501/Windows/00check.log
    >
    Status: 1 WARNING, 1 NOTE
    Debian: <

https://win-builder.r-project.org/incoming_pretest/maGUI_2.3_20181108_081501/Debian/00check.log
    >
    Status: 1 NOTE

    Last released version's CRAN status: ERROR: 2
    See: <https://CRAN.R-project.org/web/checks/check_results_maGUI.html>

    CRAN Web: <https://cran.r-project.org/package=maGUI>

    Please fix all problems and resubmit a fixed version via the webform.
    If you are not sure how to fix the problems shown, please ask for help
on
    the R-package-devel mailing list:
    <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
    If you are fairly certain the rejection is a false positive, please
    reply-all to this message and explain.

    More details are given in the directory:
    <

https://win-builder.r-project.org/incoming_pretest/maGUI_2.3_20181108_081501/
    >
    The files will be removed after roughly 7 days.

    No strong reverse dependencies to be checked.

    Best regards,
    CRAN teams' auto-check service
    Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
    Check: CRAN incoming feasibility, Result: NOTE
      Maintainer: 'Dhammapal Bharne <dhammapalb at uohyd.ac.in>'

      New submission

      Package was archived on CRAN

      CRAN repository db overrides:
        X-CRAN-Comment: Archived on 2018-11-01 as check warnings were not
          corrected despite a month's notice.

        Needed change for BioC 3.8

    Flavor: r-devel-windows-ix86+x86_64
    Check: whether package can be installed, Result: WARNING
      Found the following significant warnings:
        Warning: 'BiocInstaller' and 'biocLite()' are deprecated, use the
    'BiocManager' CRAN
      See 'd:/RCompile/CRANincoming/R-devel/maGUI.Rcheck/00install.out' for
    details.

        [[alternative HTML version deleted]]

    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From lind@@y@nnerutter @ending from gm@il@com  Mon Nov 19 08:49:14 2018
From: lind@@y@nnerutter @ending from gm@il@com (L Rutter)
Date: Mon, 19 Nov 2018 02:49:14 -0500
Subject: [R-pkg-devel] R CMD check halts on @example in shiny::runApp()
Message-ID: <CADobdkoF_SCALC2GQYOdG8gUSBfua033_Q5t+-Zr-0YGr9U+4g@mail.gmail.com>

Hello all:

R CMD check does not complete for my package and halts at the line "*
checking examples ..." I suspect the halting is due to @examples
hanging in certain R/foo.R files, where shiny::runApp() is called for
a shiny app located in a separate directory in this type of format:

appDir <- system.file("shiny-examples", "plotLitreApp", package = "bigPint")
shiny::runApp(appDir, display.mode = "normal")

I suspect this is the problem because I previously had \dontrun{}
around my @examples that used shiny apps and R CMD check worked fine.
When I run the example code for these shiny apps directly into R, the
shiny app works no problem. An example of one such R/foo.R file
causing this hanging problem is located in the developing package at:

https://github.com/lrutter/bigPint/blob/master/R/plotLitreApp.R

Any advice on how to successfully use the @examples for this script
and not halt R CMD check would be much appreciated!

Thank you!...
Lindsay


From oloyede@i @ending from unilorin@edu@ng  Mon Nov 19 11:53:35 2018
From: oloyede@i @ending from unilorin@edu@ng (Oloyede Isiaq)
Date: Mon, 19 Nov 2018 11:53:35 +0100
Subject: [R-pkg-devel] (no subject)
Message-ID: <CA+FZR6oMLa-0Eoj9MFm56OZo0wV4G7nFbV7-eScihkx+Fj8f-g@mail.gmail.com>

 I am developing a package in R, but I encountered the below problems,
kindly assist.


Updating relrisks documentation
Loading relrisksWarning: The existing 'NAMESPACE' file was not
generated by roxygen2, and will not be overwritten.-- Building
------------------------------------------------------------- relrisks
--Setting env vars:
* CFLAGS    : -Wall -pedantic -fdiagnostics-color=always
* CXXFLAGS  : -Wall -pedantic -fdiagnostics-color=always
* CXX11FLAGS: -Wall -pedantic
-fdiagnostics-color=always-------------------------------------------------------------------------------------v
 checking for file
'C:\Users\DrIOloyede\Documents\relrisks/DESCRIPTION' (1.6s)-
preparing 'relrisks': (3.1s)v  checking DESCRIPTION meta-information-
checking for LF line-endings in source and make files and shell
scripts (845ms)-  checking for empty or unneeded directories-
building 'relrisks_0.1.0.tar.gz'
   -- Checking -------------------------------------------------------------
relrisks --Setting env vars:
* _R_CHECK_CRAN_INCOMING_REMOTE_: FALSE
* _R_CHECK_CRAN_INCOMING_       : FALSE
* _R_CHECK_FORCE_SUGGESTS_      : FALSE-- R CMD check
------------------------------------------------------------------
using log directory 'C:/Users/DrIOloyede/Documents/relrisks.Rcheck'
(2.3s)-  using R version 3.5.1 (2018-07-02)-  using platform:
x86_64-w64-mingw32 (64-bit)-  using session charset: ISO8859-1-  using
options '--no-manual --as-cran' (1.3s)v  checking for file
'relrisks/DESCRIPTION'-  checking extension type ... Package-  this is
package 'relrisks' version '0.1.0'-  package encoding: UTF-8v
checking package namespace information ...v  checking package
dependencies (3m 54.2s)v  checking if this is a source package ...v
checking if there is a namespacev  checking for executable files
(982ms)v  checking for hidden files and directoriesv  checking for
portable file names ...v  checking serialization versionsv  checking
whether package 'relrisks' can be installed (7.8s)v  checking
installed package size (533ms)v  checking package directoryv  checking
DESCRIPTION meta-information (1s)N  checking top-level files ...
   Non-standard files/directories found at top level:
     'rrisks.Rmd' 'rrisks.html'v  checking for left-over filesv
checking index informationv  checking package subdirectories (517ms)v
checking R files for non-ASCII characters (482ms)v  checking R files
for syntax errors (460ms)v  checking whether the package can be loaded
(967ms)v  checking whether the package can be loaded with stated
dependencies (342ms)v  checking whether the package can be unloaded
cleanly (451ms)v  checking whether the namespace can be loaded with
stated dependencies (455ms)v  checking whether the namespace can be
unloaded cleanly (563ms)v  checking loading without being on the
library search path (705ms)v  checking dependencies in R code (352ms)v
 checking S3 generic/method consistency (1.2s)v  checking replacement
functions (335ms)v  checking foreign function calls (469ms)v  checking
R code for possible problems (8.9s)v  checking Rd files (582ms)v
checking Rd metadata (370ms)v  checking Rd line widths (359ms)v
checking Rd cross-references (2.2s)v  checking for missing
documentation entries (674ms)v  checking for code/documentation
mismatches (2.1s)W  checking Rd \usage sections (907ms)
   Undocumented arguments in documentation object 'rrci'
     'coefs' 'se' 'df'
   Documented arguments not in \usage in documentation object 'rrci':
     'coefficients'

   Undocumented arguments in documentation object 'rrcip'
     'coefs' 'se' 'df'
   Documented arguments not in \usage in documentation object 'rrcip':
     'coefficients'

   Undocumented arguments in documentation object 'rrciqr'
     'coefs' 'se' 'iqr' 'df'
   Documented arguments not in \usage in documentation object 'rrciqr':
     'coefficients'

   Undocumented arguments in documentation object 'rrciqrp'
     'coefs' 'se' 'iqr' 'df'
   Documented arguments not in \usage in documentation object 'rrciqrp':
     'coefficients'

   Functions with \usage entries need to have the appropriate \alias
   entries, and all their arguments documented.
   The \usage entries must correspond to syntactically valid R code.
   See chapter 'Writing R documentation files' in the 'Writing R
   Extensions' manual.v  checking Rd contents (2.5s)v  checking for
unstated dependencies in examples (453ms)-  checking examples ... NONE
(841ms)

   See
     'C:/Users/DrIOloyede/Documents/relrisks.Rcheck/00check.log'
   for details.

   -- R CMD check results -------------------------------------
relrisks 0.1.0 ----
Duration: 4m 36.5s
> checking Rd \usage sections ... WARNING
  Undocumented arguments in documentation object 'rrci'
    'coefs' 'se' 'df'
  Documented arguments not in \usage in documentation object 'rrci':
    'coefficients'

  Undocumented arguments in documentation object 'rrcip'
    'coefs' 'se' 'df'
  Documented arguments not in \usage in documentation object 'rrcip':
    'coefficients'

  Undocumented arguments in documentation object 'rrciqr'
    'coefs' 'se' 'iqr' 'df'
  Documented arguments not in \usage in documentation object 'rrciqr':
    'coefficients'

  Undocumented arguments in documentation object 'rrciqrp'
    'coefs' 'se' 'iqr' 'df'
  Documented arguments not in \usage in documentation object 'rrciqrp':
    'coefficients'

  Functions with \usage entries need to have the appropriate \alias
  entries, and all their arguments documented.
  The \usage entries must correspond to syntactically valid R code.
  See chapter 'Writing R documentation files' in the 'Writing R
  Extensions' manual.
> checking top-level files ... NOTE
  Non-standard files/directories found at top level:
    'rrisks.Rmd' 'rrisks.html'
0 errors v | 1 warning x | 1 note xError: R CMD check found
WARNINGsExecution halted
Exited with status 1.

#' @title Computing Relative Risks, Confidence Interval & P-Values.
#'
#' @param   coefs Numeric value of the coefficients of GAM and GLM.
#' @param   se    Numeric value of the standard errors of GAM and GLM.
#' @param   df    Numeric value of the different between the number of
rows and columns of explanatory variables.
#' @return The sequence of the RR,CI & P-values.
#' @export
###RR & Ci

-- 
Website <http://www.unilorin.edu.ng>,?Weekly Bulletin 
<http://www.unilorin.edu.ng/index.php/bulletin>?UGPortal 
<http://uilugportal.unilorin.edu.ng/> PGPortal 
<https://uilpgportal.unilorin.edu.ng/>



	[[alternative HTML version deleted]]


From Jori@@Mey@ @ending from ugent@be  Mon Nov 19 16:17:34 2018
From: Jori@@Mey@ @ending from ugent@be (Joris Meys)
Date: Mon, 19 Nov 2018 16:17:34 +0100
Subject: [R-pkg-devel] R CMD check halts on @example in shiny::runApp()
In-Reply-To: <CADobdkoF_SCALC2GQYOdG8gUSBfua033_Q5t+-Zr-0YGr9U+4g@mail.gmail.com>
References: <CADobdkoF_SCALC2GQYOdG8gUSBfua033_Q5t+-Zr-0YGr9U+4g@mail.gmail.com>
Message-ID: <CAO1zAVbZxFs91fsJ_V=zSrgrFouiCUO-=5X6Ap0Erjx8kutTLw@mail.gmail.com>

Hi Lindsay,

this is normal and to be expected, as shiny blocks R and shifts focus to
the browser. This only makes sense in interactive modus, as your app needs
input from a user before it does anything.

So for your shiny examples, you always have to use \dontrun{}.
Cheers
Joris

On Mon, Nov 19, 2018 at 3:14 PM L Rutter <lindsayannerutter at gmail.com>
wrote:

> Hello all:
>
> R CMD check does not complete for my package and halts at the line "*
> checking examples ..." I suspect the halting is due to @examples
> hanging in certain R/foo.R files, where shiny::runApp() is called for
> a shiny app located in a separate directory in this type of format:
>
> appDir <- system.file("shiny-examples", "plotLitreApp", package =
> "bigPint")
> shiny::runApp(appDir, display.mode = "normal")
>
> I suspect this is the problem because I previously had \dontrun{}
> around my @examples that used shiny apps and R CMD check worked fine.
> When I run the example code for these shiny apps directly into R, the
> shiny app works no problem. An example of one such R/foo.R file
> causing this hanging problem is located in the developing package at:
>
> https://github.com/lrutter/bigPint/blob/master/R/plotLitreApp.R
>
> Any advice on how to successfully use the @examples for this script
> and not halt R CMD check would be much appreciated!
>
> Thank you!...
> Lindsay
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From p@ul@buerkner @ending from gm@il@com  Mon Nov 19 17:49:56 2018
From: p@ul@buerkner @ending from gm@il@com (Paul Buerkner)
Date: Mon, 19 Nov 2018 17:49:56 +0100
Subject: [R-pkg-devel] Effieciency drop in do.call?
Message-ID: <CAGoSky9cNVkzn1PUkds2P3VuC_X8CZJjDu5jN=ejbwUbgKuWmw@mail.gmail.com>

Hi all,

today, I stumbled upon a puzzling (to me) problem apparently related to
do.call() that resulted
in an efficiency drop of multiple orders of magnitudes compared to just
calling the function directly (multiple minutes as compared to one second).

That is

fun(a = a, b = b, c = c, ...)

took one second, while

args <- list(a = a, b = b, c = c, ...)
do.call(fun, args)

took multiple minutes.

In my package (brms), I use do.call in various places but only in one it
resulted in this
efficiency drop.

Before I try to make a reproducible example, I wanted to ask if there are
any known issues
with do.call that may explain this?

Paul

	[[alternative HTML version deleted]]


From ggrothendieck @ending from gm@il@com  Mon Nov 19 18:53:15 2018
From: ggrothendieck @ending from gm@il@com (Gabor Grothendieck)
Date: Mon, 19 Nov 2018 12:53:15 -0500
Subject: [R-pkg-devel] Effieciency drop in do.call?
In-Reply-To: <CAGoSky9cNVkzn1PUkds2P3VuC_X8CZJjDu5jN=ejbwUbgKuWmw@mail.gmail.com>
References: <CAGoSky9cNVkzn1PUkds2P3VuC_X8CZJjDu5jN=ejbwUbgKuWmw@mail.gmail.com>
Message-ID: <CAP01uRm0qDj-GL7L7YWbnOaEpBUkWw+9z6rbeKxLSnqQFPc6fg@mail.gmail.com>

The do.call version evaluates all arguments while the normal version
may not depending on the function.  There could also be a difference
if the function uses non-standard evaluation since in that case the
two could be passing different different argument values.

For an example of the second case,

  f <- function(x) deparse(substitute(x))

  f(pi)
  ## [1] "pi"

  do.call("f", list(pi))
  ## [1] "3.14159265358979"

On Mon, Nov 19, 2018 at 11:50 AM Paul Buerkner <paul.buerkner at gmail.com> wrote:
>
> Hi all,
>
> today, I stumbled upon a puzzling (to me) problem apparently related to
> do.call() that resulted
> in an efficiency drop of multiple orders of magnitudes compared to just
> calling the function directly (multiple minutes as compared to one second).
>
> That is
>
> fun(a = a, b = b, c = c, ...)
>
> took one second, while
>
> args <- list(a = a, b = b, c = c, ...)
> do.call(fun, args)
>
> took multiple minutes.
>
> In my package (brms), I use do.call in various places but only in one it
> resulted in this
> efficiency drop.
>
> Before I try to make a reproducible example, I wanted to ask if there are
> any known issues
> with do.call that may explain this?
>
> Paul
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
Statistics & Software Consulting
GKX Group, GKX Associates Inc.
tel: 1-877-GKX-GROUP
email: ggrothendieck at gmail.com


From lind@@y@nnerutter @ending from gm@il@com  Mon Nov 19 19:36:02 2018
From: lind@@y@nnerutter @ending from gm@il@com (L Rutter)
Date: Mon, 19 Nov 2018 13:36:02 -0500
Subject: [R-pkg-devel] R CMD check halts on @example in shiny::runApp()
In-Reply-To: <CAO1zAVbZxFs91fsJ_V=zSrgrFouiCUO-=5X6Ap0Erjx8kutTLw@mail.gmail.com>
References: <CADobdkoF_SCALC2GQYOdG8gUSBfua033_Q5t+-Zr-0YGr9U+4g@mail.gmail.com>
 <CAO1zAVbZxFs91fsJ_V=zSrgrFouiCUO-=5X6Ap0Erjx8kutTLw@mail.gmail.com>
Message-ID: <CADobdkrpJBKu=KaM0a6PUhaaCsoL31K8+mUL-vWsm0fc04mL8A@mail.gmail.com>

Hi Joris Meys:

Thank you for your helpful response and confirmation that \dontrun{}
is necessary for shiny examples.

Lindsay
On Mon, Nov 19, 2018 at 10:17 AM Joris Meys <Joris.Meys at ugent.be> wrote:
>
> Hi Lindsay,
>
> this is normal and to be expected, as shiny blocks R and shifts focus to the browser. This only makes sense in interactive modus, as your app needs input from a user before it does anything.
>
> So for your shiny examples, you always have to use \dontrun{}.
> Cheers
> Joris
>
> On Mon, Nov 19, 2018 at 3:14 PM L Rutter <lindsayannerutter at gmail.com> wrote:
>>
>> Hello all:
>>
>> R CMD check does not complete for my package and halts at the line "*
>> checking examples ..." I suspect the halting is due to @examples
>> hanging in certain R/foo.R files, where shiny::runApp() is called for
>> a shiny app located in a separate directory in this type of format:
>>
>> appDir <- system.file("shiny-examples", "plotLitreApp", package = "bigPint")
>> shiny::runApp(appDir, display.mode = "normal")
>>
>> I suspect this is the problem because I previously had \dontrun{}
>> around my @examples that used shiny apps and R CMD check worked fine.
>> When I run the example code for these shiny apps directly into R, the
>> shiny app works no problem. An example of one such R/foo.R file
>> causing this hanging problem is located in the developing package at:
>>
>> https://github.com/lrutter/bigPint/blob/master/R/plotLitreApp.R
>>
>> Any advice on how to successfully use the @examples for this script
>> and not halt R CMD check would be much appreciated!
>>
>> Thank you!...
>> Lindsay
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>
> --
> Joris Meys
> Statistical consultant
>
> Department of Data Analysis and Mathematical Modelling
> Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
>
> tel: +32 (0)9 264 61 79
> -----------
> Biowiskundedagen 2017-2018
> http://www.biowiskundedagen.ugent.be/
>
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


From h@rg@rtenp @ending from mym@il@vcu@edu  Mon Nov 19 20:59:20 2018
From: h@rg@rtenp @ending from mym@il@vcu@edu (Paul Hargarten)
Date: Mon, 19 Nov 2018 14:59:20 -0500
Subject: [R-pkg-devel] Dependencies in DESCRIPTION: Imports vs. Suggests
In-Reply-To: <CADGzAP-uEBPcVpokbYp7=Z885_D8JHKjW-8qRhNX1OiJ982qLg@mail.gmail.com>
References: <CADGzAP-uEBPcVpokbYp7=Z885_D8JHKjW-8qRhNX1OiJ982qLg@mail.gmail.com>
Message-ID: <CADGzAP_8SgC2PCfLdF7E-qHrzK57f12eNXmm7=iHSt3S9mngCg@mail.gmail.com>

Hi all,

I am relatively new in creating R packages. I have created a new package
called *"foo"* and submitted it to CRAN for review.
I am wondering the difference between "Imports" and "Suggests" dependencies
in DESCRIPTION file.  According to my understanding, the "Imports" field
contains all packages required for my functions to work; the "suggests"
field contains packages that* foo* uses but doesn't require them. Programmers
place these suggested packages to run examples, to run tests, and build
vignettes, according to Hadley Wickham (also see
  <http://r-pkgs.had.co.nz/description.html
<http://r-pkgs.had.co.nz/description.html> >).  I think that this field
exists to limit the user the burden of downloading extra packages.

As suggested packages are not installed, I should add the following line in
examples that use this package. For instance,* abind* was listed as a
suggested package for *foo;* so I should add this line anywhere before I
use any functions in *abind. *
*      > if( !requireNamespace("abind", quietly = TRUE) )
{  install.packages("abind")}*

But I got an error from CRAN that I should not install packages in the
examples. I suppose that these packages should be in the "Import" field in
DESCRIPTION file. But, I am confused why that would be the case given that
these packages were used in the examples only and not in any functions in
*foo. *

Thus, I am wondering how you decide which packages are suggested compared to
 imported.


-- 
Paul Hargarten, M.S.
PhD Candidate
Biostatistics,  VCU School of Medicine
Biochemistry and Molecular Biology, B.S.;  Chemistry, B.A. ; Mathematics,
minor
hargartenp at vcu.edu

	[[alternative HTML version deleted]]


From Jori@@Mey@ @ending from ugent@be  Mon Nov 19 21:18:04 2018
From: Jori@@Mey@ @ending from ugent@be (Joris Meys)
Date: Mon, 19 Nov 2018 21:18:04 +0100
Subject: [R-pkg-devel] Dependencies in DESCRIPTION: Imports vs. Suggests
In-Reply-To: <CADGzAP_8SgC2PCfLdF7E-qHrzK57f12eNXmm7=iHSt3S9mngCg@mail.gmail.com>
References: <CADGzAP-uEBPcVpokbYp7=Z885_D8JHKjW-8qRhNX1OiJ982qLg@mail.gmail.com>
 <CADGzAP_8SgC2PCfLdF7E-qHrzK57f12eNXmm7=iHSt3S9mngCg@mail.gmail.com>
Message-ID: <CAO1zAVa0jbXAae0BNZPMLHMEbvG2Mj5rj8QfOV3u0SuCVfu2nA@mail.gmail.com>

Dear Paul,

the correct form is something like:

if( requireNamespace("abind", quietly = TRUE) )
{  abind::foo() # do sth with abind} else {
    message("you need to install the pkg abind for this example")
}

In general you should avoid sending out code that installs packages. Some
people work with specific versions of packages and don't want them
overwritten by a call to install.packages(). Others use specific libraries
on their computer instead of the default. The CRAN requirements are there
to protect people from unexpected changes to their setup.

Cheers
Joris

On Mon, Nov 19, 2018 at 9:04 PM Paul Hargarten <hargartenp at mymail.vcu.edu>
wrote:

> Hi all,
>
> I am relatively new in creating R packages. I have created a new package
> called *"foo"* and submitted it to CRAN for review.
> I am wondering the difference between "Imports" and "Suggests" dependencies
> in DESCRIPTION file.  According to my understanding, the "Imports" field
> contains all packages required for my functions to work; the "suggests"
> field contains packages that* foo* uses but doesn't require them.
> Programmers
> place these suggested packages to run examples, to run tests, and build
> vignettes, according to Hadley Wickham (also see
>   <http://r-pkgs.had.co.nz/description.html
> <http://r-pkgs.had.co.nz/description.html> >).  I think that this field
> exists to limit the user the burden of downloading extra packages.
>
> As suggested packages are not installed, I should add the following line in
> examples that use this package. For instance,* abind* was listed as a
> suggested package for *foo;* so I should add this line anywhere before I
> use any functions in *abind. *
> *      > if( !requireNamespace("abind", quietly = TRUE) )
> {  install.packages("abind")}*
>
> But I got an error from CRAN that I should not install packages in the
> examples. I suppose that these packages should be in the "Import" field in
> DESCRIPTION file. But, I am confused why that would be the case given that
> these packages were used in the examples only and not in any functions in
> *foo. *
>
> Thus, I am wondering how you decide which packages are suggested compared
> to
>  imported.
>
>
> --
> Paul Hargarten, M.S.
> PhD Candidate
> Biostatistics,  VCU School of Medicine
> Biochemistry and Molecular Biology, B.S.;  Chemistry, B.A. ; Mathematics,
> minor
> hargartenp at vcu.edu
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From pd@lgd @ending from gm@il@com  Mon Nov 19 22:32:59 2018
From: pd@lgd @ending from gm@il@com (peter dalgaard)
Date: Mon, 19 Nov 2018 22:32:59 +0100
Subject: [R-pkg-devel] Effieciency drop in do.call?
In-Reply-To: <CAP01uRm0qDj-GL7L7YWbnOaEpBUkWw+9z6rbeKxLSnqQFPc6fg@mail.gmail.com>
References: <CAGoSky9cNVkzn1PUkds2P3VuC_X8CZJjDu5jN=ejbwUbgKuWmw@mail.gmail.com>
 <CAP01uRm0qDj-GL7L7YWbnOaEpBUkWw+9z6rbeKxLSnqQFPc6fg@mail.gmail.com>
Message-ID: <444DC949-93CF-4D52-B665-937B6C6CA45F@gmail.com>

If it was just about args evaluation, then the slowness would be in the list() call, no?
An accidental deparse of a large structure could well be the culprit.

-pd


> On 19 Nov 2018, at 18:53 , Gabor Grothendieck <ggrothendieck at gmail.com> wrote:
> 
> The do.call version evaluates all arguments while the normal version
> may not depending on the function.  There could also be a difference
> if the function uses non-standard evaluation since in that case the
> two could be passing different different argument values.
> 
> For an example of the second case,
> 
>  f <- function(x) deparse(substitute(x))
> 
>  f(pi)
>  ## [1] "pi"
> 
>  do.call("f", list(pi))
>  ## [1] "3.14159265358979"
> 
> On Mon, Nov 19, 2018 at 11:50 AM Paul Buerkner <paul.buerkner at gmail.com> wrote:
>> 
>> Hi all,
>> 
>> today, I stumbled upon a puzzling (to me) problem apparently related to
>> do.call() that resulted
>> in an efficiency drop of multiple orders of magnitudes compared to just
>> calling the function directly (multiple minutes as compared to one second).
>> 
>> That is
>> 
>> fun(a = a, b = b, c = c, ...)
>> 
>> took one second, while
>> 
>> args <- list(a = a, b = b, c = c, ...)
>> do.call(fun, args)
>> 
>> took multiple minutes.
>> 
>> In my package (brms), I use do.call in various places but only in one it
>> resulted in this
>> efficiency drop.
>> 
>> Before I try to make a reproducible example, I wanted to ask if there are
>> any known issues
>> with do.call that may explain this?
>> 
>> Paul
>> 
>>        [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> 
> -- 
> Statistics & Software Consulting
> GKX Group, GKX Associates Inc.
> tel: 1-877-GKX-GROUP
> email: ggrothendieck at gmail.com
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From p@ul@buerkner @ending from gm@il@com  Mon Nov 19 22:54:57 2018
From: p@ul@buerkner @ending from gm@il@com (Paul Buerkner)
Date: Mon, 19 Nov 2018 22:54:57 +0100
Subject: [R-pkg-devel] Effieciency drop in do.call?
In-Reply-To: <444DC949-93CF-4D52-B665-937B6C6CA45F@gmail.com>
References: <CAGoSky9cNVkzn1PUkds2P3VuC_X8CZJjDu5jN=ejbwUbgKuWmw@mail.gmail.com>
 <CAP01uRm0qDj-GL7L7YWbnOaEpBUkWw+9z6rbeKxLSnqQFPc6fg@mail.gmail.com>
 <444DC949-93CF-4D52-B665-937B6C6CA45F@gmail.com>
Message-ID: <CAGoSky-By0oNSKQEiuB-Be5qFp_k4vS8iGFTirSOdECopcVoQA@mail.gmail.com>

Thanks! You are likely right that this was the problem. Actually, I was
using a pattern of the form

args <- nlist(a, b, c, ...)
do.call(fun, args)

where nlist() uses NSE to set names for unnamed arguments.

As I was passing big model objects and data through multiple layers of
do.call(), it is not unlikely
that some ended up being deparsed in the wrong way when evaluated in
do.call().

Paul



Am Mo., 19. Nov. 2018 um 22:33 Uhr schrieb peter dalgaard <pdalgd at gmail.com
>:

> If it was just about args evaluation, then the slowness would be in the
> list() call, no?
> An accidental deparse of a large structure could well be the culprit.
>
> -pd
>
>
> > On 19 Nov 2018, at 18:53 , Gabor Grothendieck <ggrothendieck at gmail.com>
> wrote:
> >
> > The do.call version evaluates all arguments while the normal version
> > may not depending on the function.  There could also be a difference
> > if the function uses non-standard evaluation since in that case the
> > two could be passing different different argument values.
> >
> > For an example of the second case,
> >
> >  f <- function(x) deparse(substitute(x))
> >
> >  f(pi)
> >  ## [1] "pi"
> >
> >  do.call("f", list(pi))
> >  ## [1] "3.14159265358979"
> >
> > On Mon, Nov 19, 2018 at 11:50 AM Paul Buerkner <paul.buerkner at gmail.com>
> wrote:
> >>
> >> Hi all,
> >>
> >> today, I stumbled upon a puzzling (to me) problem apparently related to
> >> do.call() that resulted
> >> in an efficiency drop of multiple orders of magnitudes compared to just
> >> calling the function directly (multiple minutes as compared to one
> second).
> >>
> >> That is
> >>
> >> fun(a = a, b = b, c = c, ...)
> >>
> >> took one second, while
> >>
> >> args <- list(a = a, b = b, c = c, ...)
> >> do.call(fun, args)
> >>
> >> took multiple minutes.
> >>
> >> In my package (brms), I use do.call in various places but only in one it
> >> resulted in this
> >> efficiency drop.
> >>
> >> Before I try to make a reproducible example, I wanted to ask if there
> are
> >> any known issues
> >> with do.call that may explain this?
> >>
> >> Paul
> >>
> >>        [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >
> >
> > --
> > Statistics & Software Consulting
> > GKX Group, GKX Associates Inc.
> > tel: 1-877-GKX-GROUP
> > email: ggrothendieck at gmail.com
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>
>
>
>
>
>
>
>
>
>

	[[alternative HTML version deleted]]


From jfox @ending from mcm@@ter@c@  Mon Nov 19 23:48:49 2018
From: jfox @ending from mcm@@ter@c@ (Fox, John)
Date: Mon, 19 Nov 2018 22:48:49 +0000
Subject: [R-pkg-devel] creating a link to a vignette in a .Rd file
Message-ID: <ACD1644AA6C67E4FBD0C350625508EC83695052D@FHSDB2D11-2.csu.mcmaster.ca>

Dear r-package-devel list members,

I'd like to create a link to a package vignette from a help file in the same package, for example to the "partial-residuals" vignette in the effects package from effect.Rd. I'm able to generate a URL for the vignette as follows:

	\Sexpr[results=text]{paste0("file://", system.file("doc", "partial-residuals.pdf", package="effects"))}

but I'm unable to link to the resulting text string using href{}{} or url{} because \Sexpr[etc]{etc.} is treated as verbatim text rather than evaluated. 

Is there a way around this problem or another approach that works?

Any help would be appreciated.

John

-----------------------------------------------------------------
John Fox
Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
Web: https://socialsciences.mcmaster.ca/jfox/


From pd@lgd @ending from gm@il@com  Mon Nov 19 23:59:12 2018
From: pd@lgd @ending from gm@il@com (peter dalgaard)
Date: Mon, 19 Nov 2018 23:59:12 +0100
Subject: [R-pkg-devel] Effieciency drop in do.call?
In-Reply-To: <444DC949-93CF-4D52-B665-937B6C6CA45F@gmail.com>
References: <CAGoSky9cNVkzn1PUkds2P3VuC_X8CZJjDu5jN=ejbwUbgKuWmw@mail.gmail.com>
 <CAP01uRm0qDj-GL7L7YWbnOaEpBUkWw+9z6rbeKxLSnqQFPc6fg@mail.gmail.com>
 <444DC949-93CF-4D52-B665-937B6C6CA45F@gmail.com>
Message-ID: <33315948-1A42-4AD7-BAC1-5CB80168BF50@gmail.com>

A classical way of encountering this is

x <- rnorm(1000)
do.call("plot", list(x))

A way out is

do.call("plot", list(quote(x)))

-pd


> On 19 Nov 2018, at 22:32 , peter dalgaard <pdalgd at gmail.com> wrote:
> 
> If it was just about args evaluation, then the slowness would be in the list() call, no?
> An accidental deparse of a large structure could well be the culprit.
> 
> -pd
> 
> 
>> On 19 Nov 2018, at 18:53 , Gabor Grothendieck <ggrothendieck at gmail.com> wrote:
>> 
>> The do.call version evaluates all arguments while the normal version
>> may not depending on the function.  There could also be a difference
>> if the function uses non-standard evaluation since in that case the
>> two could be passing different different argument values.
>> 
>> For an example of the second case,
>> 
>> f <- function(x) deparse(substitute(x))
>> 
>> f(pi)
>> ## [1] "pi"
>> 
>> do.call("f", list(pi))
>> ## [1] "3.14159265358979"
>> 
>> On Mon, Nov 19, 2018 at 11:50 AM Paul Buerkner <paul.buerkner at gmail.com> wrote:
>>> 
>>> Hi all,
>>> 
>>> today, I stumbled upon a puzzling (to me) problem apparently related to
>>> do.call() that resulted
>>> in an efficiency drop of multiple orders of magnitudes compared to just
>>> calling the function directly (multiple minutes as compared to one second).
>>> 
>>> That is
>>> 
>>> fun(a = a, b = b, c = c, ...)
>>> 
>>> took one second, while
>>> 
>>> args <- list(a = a, b = b, c = c, ...)
>>> do.call(fun, args)
>>> 
>>> took multiple minutes.
>>> 
>>> In my package (brms), I use do.call in various places but only in one it
>>> resulted in this
>>> efficiency drop.
>>> 
>>> Before I try to make a reproducible example, I wanted to ask if there are
>>> any known issues
>>> with do.call that may explain this?
>>> 
>>> Paul
>>> 
>>>       [[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
>> 
>> 
>> -- 
>> Statistics & Software Consulting
>> GKX Group, GKX Associates Inc.
>> tel: 1-877-GKX-GROUP
>> email: ggrothendieck at gmail.com
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> -- 
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> 
> 
> 
> 
> 
> 
> 
> 

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From h@wickh@m @ending from gm@il@com  Tue Nov 20 00:17:53 2018
From: h@wickh@m @ending from gm@il@com (Hadley Wickham)
Date: Mon, 19 Nov 2018 17:17:53 -0600
Subject: [R-pkg-devel] R CMD check halts on @example in shiny::runApp()
In-Reply-To: <CADobdkoF_SCALC2GQYOdG8gUSBfua033_Q5t+-Zr-0YGr9U+4g@mail.gmail.com>
References: <CADobdkoF_SCALC2GQYOdG8gUSBfua033_Q5t+-Zr-0YGr9U+4g@mail.gmail.com>
Message-ID: <CABdHhvF0iQNU5DQGoHj-Z19g6VBgyXeEs2biN_jZfD2OTxHPnA@mail.gmail.com>

On Mon, Nov 19, 2018 at 8:14 AM L Rutter <lindsayannerutter at gmail.com> wrote:
>
> Hello all:
>
> R CMD check does not complete for my package and halts at the line "*
> checking examples ..." I suspect the halting is due to @examples
> hanging in certain R/foo.R files, where shiny::runApp() is called for
> a shiny app located in a separate directory in this type of format:
>
> appDir <- system.file("shiny-examples", "plotLitreApp", package = "bigPint")
> shiny::runApp(appDir, display.mode = "normal")
>
> I suspect this is the problem because I previously had \dontrun{}
> around my @examples that used shiny apps and R CMD check worked fine.
> When I run the example code for these shiny apps directly into R, the
> shiny app works no problem. An example of one such R/foo.R file
> causing this hanging problem is located in the developing package at:
>
> https://github.com/lrutter/bigPint/blob/master/R/plotLitreApp.R
>
> Any advice on how to successfully use the @examples for this script
> and not halt R CMD check would be much appreciated!

One option is to use interactive:

if (interactive()) {
  runApp()
}

That way it won't run in R CMD check, but it will run from example()

Hadley

-- 
http://hadley.nz


From h@wickh@m @ending from gm@il@com  Tue Nov 20 00:21:10 2018
From: h@wickh@m @ending from gm@il@com (Hadley Wickham)
Date: Mon, 19 Nov 2018 17:21:10 -0600
Subject: [R-pkg-devel] creating a link to a vignette in a .Rd file
In-Reply-To: <ACD1644AA6C67E4FBD0C350625508EC83695052D@FHSDB2D11-2.csu.mcmaster.ca>
References: <ACD1644AA6C67E4FBD0C350625508EC83695052D@FHSDB2D11-2.csu.mcmaster.ca>
Message-ID: <CABdHhvGjtmp7KTrBe0GueN08EpE=mh0s8A8a0i4K9734xwC2dg@mail.gmail.com>

On Mon, Nov 19, 2018 at 4:49 PM Fox, John <jfox at mcmaster.ca> wrote:
>
> Dear r-package-devel list members,
>
> I'd like to create a link to a package vignette from a help file in the same package, for example to the "partial-residuals" vignette in the effects package from effect.Rd. I'm able to generate a URL for the vignette as follows:
>
>         \Sexpr[results=text]{paste0("file://", system.file("doc", "partial-residuals.pdf", package="effects"))}
>
> but I'm unable to link to the resulting text string using href{}{} or url{} because \Sexpr[etc]{etc.} is treated as verbatim text rather than evaluated.
>
> Is there a way around this problem or another approach that works?

Have you confirmed that a raw file:// url works?  I would be mildly
surprised if it did, given my understanding of how web browser
security works (which is patchy, but you should still check before
going too far down this path).

Don't you just need `results=rd` ?

\Sexpr[results=rd]{paste0("\\url{file://", system.file("doc",
"partial-residuals.pdf", package="effects"), "}")}

Hadley

-- 
http://hadley.nz


From jfox @ending from mcm@@ter@c@  Tue Nov 20 02:15:44 2018
From: jfox @ending from mcm@@ter@c@ (Fox, John)
Date: Tue, 20 Nov 2018 01:15:44 +0000
Subject: [R-pkg-devel] creating a link to a vignette in a .Rd file
In-Reply-To: <CABdHhvGjtmp7KTrBe0GueN08EpE=mh0s8A8a0i4K9734xwC2dg@mail.gmail.com>
References: <ACD1644AA6C67E4FBD0C350625508EC83695052D@FHSDB2D11-2.csu.mcmaster.ca>
 <CABdHhvGjtmp7KTrBe0GueN08EpE=mh0s8A8a0i4K9734xwC2dg@mail.gmail.com>
Message-ID: <ACD1644AA6C67E4FBD0C350625508EC83695096A@FHSDB2D11-2.csu.mcmaster.ca>

Dear Hadley,

You're right -- my approach was flawed and the document doesn't open even when the file URL is hard-coded in the .Rd file. With that hint, I found the following solution:

	\href{../doc/partial-residuals.pdf}{partial-residuals vignette}

This works and passes package checking. A caveat: I tried it only under Windows, both inside and outside of RStudio. I'll follow up on macOS and Linux and report if there are problems.

I'm surprised that this question hasn't arisen more frequently -- wanting to link to vignettes from help pages seems natural to me. I found a couple of queries in a web search but no solution. 

Thanks for this,
 John

> -----Original Message-----
> From: Hadley Wickham [mailto:h.wickham at gmail.com]
> Sent: Monday, November 19, 2018 6:21 PM
> To: Fox, John <jfox at mcmaster.ca>
> Cc: R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] creating a link to a vignette in a .Rd file
> 
> On Mon, Nov 19, 2018 at 4:49 PM Fox, John <jfox at mcmaster.ca> wrote:
> >
> > Dear r-package-devel list members,
> >
> > I'd like to create a link to a package vignette from a help file in the same
> package, for example to the "partial-residuals" vignette in the effects package
> from effect.Rd. I'm able to generate a URL for the vignette as follows:
> >
> >         \Sexpr[results=text]{paste0("file://", system.file("doc",
> > "partial-residuals.pdf", package="effects"))}
> >
> > but I'm unable to link to the resulting text string using href{}{} or url{}
> because \Sexpr[etc]{etc.} is treated as verbatim text rather than evaluated.
> >
> > Is there a way around this problem or another approach that works?
> 
> Have you confirmed that a raw file:// url works?  I would be mildly surprised if
> it did, given my understanding of how web browser security works (which is
> patchy, but you should still check before going too far down this path).
> 
> Don't you just need `results=rd` ?
> 
> \Sexpr[results=rd]{paste0("\\url{file://", system.file("doc", "partial-
> residuals.pdf", package="effects"), "}")}
> 
> Hadley
> 
> --
> http://hadley.nz

From georgi@bo@hn@kov @ending from m@nche@ter@@c@uk  Tue Nov 20 10:36:12 2018
From: georgi@bo@hn@kov @ending from m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Tue, 20 Nov 2018 09:36:12 +0000
Subject: [R-pkg-devel] creating a link to a vignette in a .Rd file
In-Reply-To: <ACD1644AA6C67E4FBD0C350625508EC83695096A@FHSDB2D11-2.csu.mcmaster.ca>
References: <ACD1644AA6C67E4FBD0C350625508EC83695052D@FHSDB2D11-2.csu.mcmaster.ca>
 <CABdHhvGjtmp7KTrBe0GueN08EpE=mh0s8A8a0i4K9734xwC2dg@mail.gmail.com>
 <ACD1644AA6C67E4FBD0C350625508EC83695096A@FHSDB2D11-2.csu.mcmaster.ca>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F6C904E@MBXP02.ds.man.ac.uk>

It is somewhat problematic to make the link to the vignette fully portable.  The solution with "../doc/..." may not work if the reference manual is read off the CRAN page of a package. For a CRAN package, an alternative is to link to the vignette on its CRAN page (if the vignette is already there), with the downside that the link will not work offline. 

An alternative, which can be used along with a link, is to give a command that opens the vignette \code{vignette("xxx", package = "pkg")} or even \code{browseVignettes(package = "pkg")}. This will be directly usable also when the help is rendered in text mode. The vignette() command could also be put in the "Examples" section. 

Georgi Boshnakov


-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Fox, John
Sent: 20 November 2018 01:16
To: Hadley Wickham
Cc: R Package Development
Subject: Re: [R-pkg-devel] creating a link to a vignette in a .Rd file

Dear Hadley,

You're right -- my approach was flawed and the document doesn't open even when the file URL is hard-coded in the .Rd file. With that hint, I found the following solution:

	\href{../doc/partial-residuals.pdf}{partial-residuals vignette}

This works and passes package checking. A caveat: I tried it only under Windows, both inside and outside of RStudio. I'll follow up on macOS and Linux and report if there are problems.

I'm surprised that this question hasn't arisen more frequently -- wanting to link to vignettes from help pages seems natural to me. I found a couple of queries in a web search but no solution. 

Thanks for this,
 John

> -----Original Message-----
> From: Hadley Wickham [mailto:h.wickham at gmail.com]
> Sent: Monday, November 19, 2018 6:21 PM
> To: Fox, John <jfox at mcmaster.ca>
> Cc: R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] creating a link to a vignette in a .Rd file
> 
> On Mon, Nov 19, 2018 at 4:49 PM Fox, John <jfox at mcmaster.ca> wrote:
> >
> > Dear r-package-devel list members,
> >
> > I'd like to create a link to a package vignette from a help file in the same
> package, for example to the "partial-residuals" vignette in the effects package
> from effect.Rd. I'm able to generate a URL for the vignette as follows:
> >
> >         \Sexpr[results=text]{paste0("file://", system.file("doc",
> > "partial-residuals.pdf", package="effects"))}
> >
> > but I'm unable to link to the resulting text string using href{}{} or url{}
> because \Sexpr[etc]{etc.} is treated as verbatim text rather than evaluated.
> >
> > Is there a way around this problem or another approach that works?
> 
> Have you confirmed that a raw file:// url works?  I would be mildly surprised if
> it did, given my understanding of how web browser security works (which is
> patchy, but you should still check before going too far down this path).
> 
> Don't you just need `results=rd` ?
> 
> \Sexpr[results=rd]{paste0("\\url{file://", system.file("doc", "partial-
> residuals.pdf", package="effects"), "}")}
> 
> Hadley
> 
> --
> http://hadley.nz
______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@mp@letienne @ending from gm@il@com  Tue Nov 20 10:45:35 2018
From: r@mp@letienne @ending from gm@il@com (Rampal Etienne)
Date: Tue, 20 Nov 2018 10:45:35 +0100
Subject: [R-pkg-devel] avoiding .mod files
In-Reply-To: <bd2465f2-ea39-d1f6-dfe7-6895edc6066e@tu-dresden.de>
References: <01d017ac-8e2b-4d76-9f64-19592d9e9218@gmail.com>
 <bd2465f2-ea39-d1f6-dfe7-6895edc6066e@tu-dresden.de>
Message-ID: <9fa4a6c2-9a88-212f-039b-fd4f8e722c85@gmail.com>

Dear Thomas,

My FORTRAN code to be used with deSolve contains a module dimmod. During 
build a file called dimmod.mod is created in the src directory. I can 
avoid this by including it in the .RBuildignore file, but when I submit 
the package to CRAN, the package is rejected because it keeps creating 
the dimmod.mod file. How do I solve this?

Kind regards,

Rampal Etienne


From @@o10 @ending from p@u@edu  Tue Nov 20 04:58:12 2018
From: @@o10 @ending from p@u@edu (Oswald, Stephen A)
Date: Tue, 20 Nov 2018 03:58:12 +0000
Subject: [R-pkg-devel] recreating pretest Error in debian platform
In-Reply-To: <BN7PR02MB5297366565AC587FF4449724AAD90@BN7PR02MB5297.namprd02.prod.outlook.com>
References: <20181110071104.4D96B160B2C@xmpalantir.wu.ac.at>
 , <01d478c5$Blat.v3.2.16$f448257c$e52c6a33@mail.statistik.tu-dortmund.de>,
 <BN7PR02MB5297366565AC587FF4449724AAD90@BN7PR02MB5297.namprd02.prod.outlook.com>
Message-ID: <BN7PR02MB52977E08B1B6032C303A036CAAD90@BN7PR02MB5297.namprd02.prod.outlook.com>



Dear All,

I am seeking direction on how to successfully recreate an CRAN check error (see email below) for the debian gcc platform (see attached log). I'm pretty confident that there is still an error associated with my code  calling if() with a vector of length 2 or more. However, the code is long and as there are likely multiple incidences, I really want to be able to recreate this error myself so I do not waste CRAN time resubmitting each time I fix one incidence.

I have tried multiple approaches to recreate this error without success. These include:
1) Running rhub::check while specifying environmental variables suggested by Brian Ripley ('_R_CHECK_LENGTH_1_CONDITION'="package:_R_CHECK_PACKAGE_NAME_,abort,verbose") on the platform "debian-gcc-devel". Check proceeds with no errors but I suspect the environmental variables are not being correctly specified (see https://github.com/r-hub/rhub/issues/174)

2) Running devtools::check() in Rstudio 1.0.143. But as I am running on windows, the code compiles OK.
My system:

platform       x86_64-w64-mingw32
arch           x86_64
os             mingw32
system         x86_64, mingw32
status         Under development (unstable)
major          3
minor          6.0
year           2018
month          10
day            15
svn rev        75443
language       R
version.string R Under development (unstable) (2018-10-15 r75443)
nickname       Unsuffered Consequences

3) I have set up a GitHub profile and repository for the current code of my package FlexParamCurve v 1.5-5 (https://github.com/sao10/FlexParamCurve1.5-5). I have then used Travis to build and check it (https://travis-ci.org/sao10/FlexParamCurve1.5-5/jobs/457270859) but, I am pretty certain that my environmental variables are not transferring. I tried setting them as Global Environmental Variables and also in my .travis.yml file.  My config was:

{
  "os": "linux",
  "dist": "trusty",
  "sudo": false,
  "cache": "packages",
  "group": "stable",
  "language": "r",
  "global_env": "_R_CHECK_LENGTH_1_CONDITION = \"package:_R_CHECK_PACKAGE_NAME_,abort,verbose\" R_C_BOUNDS_CHECK = yes _R_CHECK_FORCE_SUGGESTS_ = false"
}


and my .travis.yml file was:

language: R
cache: packages
sudo: false
env:
    global:
    - _R_CHECK_LENGTH_1_CONDITION = "package:_R_CHECK_PACKAGE_NAME_,abort,verbose"
    - R_C_BOUNDS_CHECK = yes
    - _R_CHECK_FORCE_SUGGESTS_ = false


One possibility I have yet to explore is potentially running debian from a flash drive but I'm not sure whether my tool chains would need to change and it seems a major undertaking. Currently my tool chain looks like this:

C:\Rtools\bin;C:\Rtools\mingw_64\bin;C:\Strawberry\c\bin;C:\Program Files (x86)\MiKTeX 2.9\miktex\bin; H:\R\R-devel\bin\x64;C:\Strawberry\perl\site\bin;C:\Strawberry;C:\Program Files (x86)\Common Files\Adobe\AGL;C:\Program Files (x86)\Calibre2\;C:\Program Files (x86)\Skype\Phone\

and I am running
Rtools version 3.5.0.4
MiKTeX 2.9

R Under development (unstable) (2018-10-15 r75443)

Thank you for any direction you may be able to offer.

Steve.





________________________________
From: ligges at statistik.tu-dortmund.de <ligges at statistik.tu-dortmund.de>
Sent: Saturday, November 10, 2018 2:21 AM
To: Oswald, Stephen A
Cc: CRAN-submissions at R-project.org
Subject: [CRAN-pretest-archived] CRAN submission FlexParamCurve 1.5-4

Dear maintainer,

package FlexParamCurve_1.5-4.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
Windows: <https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2Fincoming_pretest%2FFlexParamCurve_1.5-4_20181110_081104%2FWindows%2F00check.log&amp;data=02%7C01%7Csao10%40psu.edu%7C65b2199d35c84127424208d646dd12c9%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636774312669497914&amp;sdata=xQS4VyaVt7WH1k%2FHQCfzcAxDKg9CHcIFvDgYnwyHG7I%3D&amp;reserved=0>
Status: 3 NOTEs
Debian: <https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2Fincoming_pretest%2FFlexParamCurve_1.5-4_20181110_081104%2FDebian%2F00check.log&amp;data=02%7C01%7Csao10%40psu.edu%7C65b2199d35c84127424208d646dd12c9%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636774312669497914&amp;sdata=0EHVRHW1wiBtEXPdhVmEvL4F4Z5ksyOSeHBX8hWTP14%3D&amp;reserved=0>
Status: 1 ERROR, 1 NOTE

Last released version's CRAN status: OK: 2
See: <https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2FCRAN.R-project.org%2Fweb%2Fchecks%2Fcheck_results_FlexParamCurve.html&amp;data=02%7C01%7Csao10%40psu.edu%7C65b2199d35c84127424208d646dd12c9%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636774312669497914&amp;sdata=9bvY8TABo2i7%2FCXGzEsuwt1CXQSo%2Fmr8qMxHZDVjsCg%3D&amp;reserved=0>

CRAN Web: <https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DFlexParamCurve&amp;data=02%7C01%7Csao10%40psu.edu%7C65b2199d35c84127424208d646dd12c9%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636774312669497914&amp;sdata=kMDzQTyyQLjyBMTZs%2FUUfVg4HN%2FirDNFFDJ72CIhS4o%3D&amp;reserved=0>

Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
<https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Csao10%40psu.edu%7C65b2199d35c84127424208d646dd12c9%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636774312669497914&amp;sdata=dAfiX9Nrj3yHPdnB6b%2BloeLUZXHPv9Fx56R9%2Fjjkbik%3D&amp;reserved=0>
If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.

More details are given in the directory:
<https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2Fincoming_pretest%2FFlexParamCurve_1.5-4_20181110_081104%2F&amp;data=02%7C01%7Csao10%40psu.edu%7C65b2199d35c84127424208d646dd12c9%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636774312669497914&amp;sdata=D09NHBYWDGlTpbtADDeUsHcpYDHeWyAOjXVvl67l1UI%3D&amp;reserved=0>
The files will be removed after roughly 7 days.

No strong reverse dependencies to be checked.

Best regards,
CRAN teams' auto-check service

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: 00details.log
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20181120/2a3a760a/attachment.log>

From c@@rdi@g@bor @ending from gm@il@com  Tue Nov 20 13:18:07 2018
From: c@@rdi@g@bor @ending from gm@il@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 20 Nov 2018 12:18:07 +0000
Subject: [R-pkg-devel] recreating pretest Error in debian platform
In-Reply-To: <BN7PR02MB52977E08B1B6032C303A036CAAD90@BN7PR02MB5297.namprd02.prod.outlook.com>
References: <20181110071104.4D96B160B2C@xmpalantir.wu.ac.at>
 <01d478c5$Blat.v3.2.16$f448257c$e52c6a33@mail.statistik.tu-dortmund.de>
 <BN7PR02MB5297366565AC587FF4449724AAD90@BN7PR02MB5297.namprd02.prod.outlook.com>
 <BN7PR02MB52977E08B1B6032C303A036CAAD90@BN7PR02MB5297.namprd02.prod.outlook.com>
Message-ID: <CABtg=K=c118+JSRhn39qCw-RWdoie3trxNXkGk1cOjOhxKtQuQ@mail.gmail.com>

You are missing an underscore. This works for me for a package that I
just  added an error to:

rhub::check(env_vars = c("_R_CHECK_LENGTH_1_CONDITION_"  = "verbose"),
  platform = "debian-gcc-devel",
  email = "csardi.gabor at gmail.com")

?  Building package
?  Uploading package

[...]

E  checking examples (788ms)
   Running examples in ?dotenv-Ex.R? failed
   The error most likely occurred in:

   > ### Name: load_dot_env
   > ### Title: Load environment variables from the specified file
   > ### Aliases: load_dot_env
   >
   > ### ** Examples
   >
   > # Remove, if it exists
   > Sys.unsetenv("dotenvexamplefoo")
   > Sys.getenv("dotenvexamplefoo")
   [1] ""
   >
   > # Load from a file
   > tmp <- tempfile()
   > cat("dotenvexamplefoo=bar\n", file = tmp)
   > load_dot_env(tmp)
   > Sys.getenv("dotenvexamplefoo")
   [1] "bar"
   >
   > # Clean up
   > unlink(tmp)
   >
   > if (c(TRUE, FALSE)) print("oops")
    ----------- FAILURE REPORT --------------
    --- failure: the condition has length > 1 ---
    --- srcref ---
   :
    --- package (from environment) ---

[...]

Gabor
On Tue, Nov 20, 2018 at 11:35 AM Oswald, Stephen A <sao10 at psu.edu> wrote:
>
>
>
> Dear All,
>
> I am seeking direction on how to successfully recreate an CRAN check error (see email below) for the debian gcc platform (see attached log). I'm pretty confident that there is still an error associated with my code  calling if() with a vector of length 2 or more. However, the code is long and as there are likely multiple incidences, I really want to be able to recreate this error myself so I do not waste CRAN time resubmitting each time I fix one incidence.
>
> I have tried multiple approaches to recreate this error without success. These include:
> 1) Running rhub::check while specifying environmental variables suggested by Brian Ripley ('_R_CHECK_LENGTH_1_CONDITION'="package:_R_CHECK_PACKAGE_NAME_,abort,verbose") on the platform "debian-gcc-devel". Check proceeds with no errors but I suspect the environmental variables are not being correctly specified (see https://github.com/r-hub/rhub/issues/174)
>
> 2) Running devtools::check() in Rstudio 1.0.143. But as I am running on windows, the code compiles OK.
> My system:
>
> platform       x86_64-w64-mingw32
> arch           x86_64
> os             mingw32
> system         x86_64, mingw32
> status         Under development (unstable)
> major          3
> minor          6.0
> year           2018
> month          10
> day            15
> svn rev        75443
> language       R
> version.string R Under development (unstable) (2018-10-15 r75443)
> nickname       Unsuffered Consequences
>
> 3) I have set up a GitHub profile and repository for the current code of my package FlexParamCurve v 1.5-5 (https://github.com/sao10/FlexParamCurve1.5-5). I have then used Travis to build and check it (https://travis-ci.org/sao10/FlexParamCurve1.5-5/jobs/457270859) but, I am pretty certain that my environmental variables are not transferring. I tried setting them as Global Environmental Variables and also in my .travis.yml file.  My config was:
>
> {
>   "os": "linux",
>   "dist": "trusty",
>   "sudo": false,
>   "cache": "packages",
>   "group": "stable",
>   "language": "r",
>   "global_env": "_R_CHECK_LENGTH_1_CONDITION = \"package:_R_CHECK_PACKAGE_NAME_,abort,verbose\" R_C_BOUNDS_CHECK = yes _R_CHECK_FORCE_SUGGESTS_ = false"
> }
>
>
> and my .travis.yml file was:
>
> language: R
> cache: packages
> sudo: false
> env:
>     global:
>     - _R_CHECK_LENGTH_1_CONDITION = "package:_R_CHECK_PACKAGE_NAME_,abort,verbose"
>     - R_C_BOUNDS_CHECK = yes
>     - _R_CHECK_FORCE_SUGGESTS_ = false
>
>
> One possibility I have yet to explore is potentially running debian from a flash drive but I'm not sure whether my tool chains would need to change and it seems a major undertaking. Currently my tool chain looks like this:
>
> C:\Rtools\bin;C:\Rtools\mingw_64\bin;C:\Strawberry\c\bin;C:\Program Files (x86)\MiKTeX 2.9\miktex\bin; H:\R\R-devel\bin\x64;C:\Strawberry\perl\site\bin;C:\Strawberry;C:\Program Files (x86)\Common Files\Adobe\AGL;C:\Program Files (x86)\Calibre2\;C:\Program Files (x86)\Skype\Phone\
>
> and I am running
> Rtools version 3.5.0.4
> MiKTeX 2.9
>
> R Under development (unstable) (2018-10-15 r75443)
>
> Thank you for any direction you may be able to offer.
>
> Steve.
>
>
>
>
>
> ________________________________
> From: ligges at statistik.tu-dortmund.de <ligges at statistik.tu-dortmund.de>
> Sent: Saturday, November 10, 2018 2:21 AM
> To: Oswald, Stephen A
> Cc: CRAN-submissions at R-project.org
> Subject: [CRAN-pretest-archived] CRAN submission FlexParamCurve 1.5-4
>
> Dear maintainer,
>
> package FlexParamCurve_1.5-4.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
> Windows: <https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2Fincoming_pretest%2FFlexParamCurve_1.5-4_20181110_081104%2FWindows%2F00check.log&amp;data=02%7C01%7Csao10%40psu.edu%7C65b2199d35c84127424208d646dd12c9%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636774312669497914&amp;sdata=xQS4VyaVt7WH1k%2FHQCfzcAxDKg9CHcIFvDgYnwyHG7I%3D&amp;reserved=0>
> Status: 3 NOTEs
> Debian: <https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2Fincoming_pretest%2FFlexParamCurve_1.5-4_20181110_081104%2FDebian%2F00check.log&amp;data=02%7C01%7Csao10%40psu.edu%7C65b2199d35c84127424208d646dd12c9%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636774312669497914&amp;sdata=0EHVRHW1wiBtEXPdhVmEvL4F4Z5ksyOSeHBX8hWTP14%3D&amp;reserved=0>
> Status: 1 ERROR, 1 NOTE
>
> Last released version's CRAN status: OK: 2
> See: <https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2FCRAN.R-project.org%2Fweb%2Fchecks%2Fcheck_results_FlexParamCurve.html&amp;data=02%7C01%7Csao10%40psu.edu%7C65b2199d35c84127424208d646dd12c9%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636774312669497914&amp;sdata=9bvY8TABo2i7%2FCXGzEsuwt1CXQSo%2Fmr8qMxHZDVjsCg%3D&amp;reserved=0>
>
> CRAN Web: <https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DFlexParamCurve&amp;data=02%7C01%7Csao10%40psu.edu%7C65b2199d35c84127424208d646dd12c9%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636774312669497914&amp;sdata=kMDzQTyyQLjyBMTZs%2FUUfVg4HN%2FirDNFFDJ72CIhS4o%3D&amp;reserved=0>
>
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
> <https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Csao10%40psu.edu%7C65b2199d35c84127424208d646dd12c9%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636774312669497914&amp;sdata=dAfiX9Nrj3yHPdnB6b%2BloeLUZXHPv9Fx56R9%2Fjjkbik%3D&amp;reserved=0>
> If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
>
> More details are given in the directory:
> <https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2Fincoming_pretest%2FFlexParamCurve_1.5-4_20181110_081104%2F&amp;data=02%7C01%7Csao10%40psu.edu%7C65b2199d35c84127424208d646dd12c9%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636774312669497914&amp;sdata=D09NHBYWDGlTpbtADDeUsHcpYDHeWyAOjXVvl67l1UI%3D&amp;reserved=0>
> The files will be removed after roughly 7 days.
>
> No strong reverse dependencies to be checked.
>
> Best regards,
> CRAN teams' auto-check service
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From li@t@ @ending from dewey@myzen@co@uk  Tue Nov 20 14:18:54 2018
From: li@t@ @ending from dewey@myzen@co@uk (Michael Dewey)
Date: Tue, 20 Nov 2018 13:18:54 +0000
Subject: [R-pkg-devel] (no subject)
In-Reply-To: <CA+FZR6oMLa-0Eoj9MFm56OZo0wV4G7nFbV7-eScihkx+Fj8f-g@mail.gmail.com>
References: <CA+FZR6oMLa-0Eoj9MFm56OZo0wV4G7nFbV7-eScihkx+Fj8f-g@mail.gmail.com>
Message-ID: <7daf7386-4600-1810-0a6a-23377a82b1a3@dewey.myzen.co.uk>

Your documentation files do not match the functions and you have some 
files R was not expecting. See inline below for more detail

On 19/11/2018 10:53, Oloyede Isiaq wrote:
>   I am developing a package in R, but I encountered the below problems,
> kindly assist.
> 
> 
> Updating relrisks documentation
> Loading relrisksWarning: The existing 'NAMESPACE' file was not
> generated by roxygen2, and will not be overwritten.-- Building
> ------------------------------------------------------------- relrisks
> --Setting env vars:
> * CFLAGS    : -Wall -pedantic -fdiagnostics-color=always
> * CXXFLAGS  : -Wall -pedantic -fdiagnostics-color=always
> * CXX11FLAGS: -Wall -pedantic
> -fdiagnostics-color=always-------------------------------------------------------------------------------------v
>   checking for file
> 'C:\Users\DrIOloyede\Documents\relrisks/DESCRIPTION' (1.6s)-
> preparing 'relrisks': (3.1s)v  checking DESCRIPTION meta-information-
> checking for LF line-endings in source and make files and shell
> scripts (845ms)-  checking for empty or unneeded directories-
> building 'relrisks_0.1.0.tar.gz'
>     -- Checking -------------------------------------------------------------
> relrisks --Setting env vars:
> * _R_CHECK_CRAN_INCOMING_REMOTE_: FALSE
> * _R_CHECK_CRAN_INCOMING_       : FALSE
> * _R_CHECK_FORCE_SUGGESTS_      : FALSE-- R CMD check
> ------------------------------------------------------------------
> using log directory 'C:/Users/DrIOloyede/Documents/relrisks.Rcheck'
> (2.3s)-  using R version 3.5.1 (2018-07-02)-  using platform:
> x86_64-w64-mingw32 (64-bit)-  using session charset: ISO8859-1-  using
> options '--no-manual --as-cran' (1.3s)v  checking for file
> 'relrisks/DESCRIPTION'-  checking extension type ... Package-  this is
> package 'relrisks' version '0.1.0'-  package encoding: UTF-8v
> checking package namespace information ...v  checking package
> dependencies (3m 54.2s)v  checking if this is a source package ...v
> checking if there is a namespacev  checking for executable files
> (982ms)v  checking for hidden files and directoriesv  checking for
> portable file names ...v  checking serialization versionsv  checking
> whether package 'relrisks' can be installed (7.8s)v  checking
> installed package size (533ms)v  checking package directoryv  checking
> DESCRIPTION meta-information (1s)N  checking top-level files ...
>     Non-standard files/directories found at top level:
>       'rrisks.Rmd' 'rrisks.html'v  checking for left-over filesv
> checking index informationv  checking package subdirectories (517ms)v
> checking R files for non-ASCII characters (482ms)v  checking R files
> for syntax errors (460ms)v  checking whether the package can be loaded
> (967ms)v  checking whether the package can be loaded with stated
> dependencies (342ms)v  checking whether the package can be unloaded
> cleanly (451ms)v  checking whether the namespace can be loaded with
> stated dependencies (455ms)v  checking whether the namespace can be
> unloaded cleanly (563ms)v  checking loading without being on the
> library search path (705ms)v  checking dependencies in R code (352ms)v
>   checking S3 generic/method consistency (1.2s)v  checking replacement
> functions (335ms)v  checking foreign function calls (469ms)v  checking
> R code for possible problems (8.9s)v  checking Rd files (582ms)v
> checking Rd metadata (370ms)v  checking Rd line widths (359ms)v
> checking Rd cross-references (2.2s)v  checking for missing
> documentation entries (674ms)v  checking for code/documentation
> mismatches (2.1s)W  checking Rd \usage sections (907ms)

So here, for example, you have not documented coefs, se and df

>     Undocumented arguments in documentation object 'rrci'
>       'coefs' 'se' 'df'

But you have documented arguments which do not exist in the function in 
the code.

>     Documented arguments not in \usage in documentation object 'rrci':
>       'coefficients'
> 
>     Undocumented arguments in documentation object 'rrcip'
>       'coefs' 'se' 'df'
>     Documented arguments not in \usage in documentation object 'rrcip':
>       'coefficients'
> 
>     Undocumented arguments in documentation object 'rrciqr'
>       'coefs' 'se' 'iqr' 'df'
>     Documented arguments not in \usage in documentation object 'rrciqr':
>       'coefficients'
> 
>     Undocumented arguments in documentation object 'rrciqrp'
>       'coefs' 'se' 'iqr' 'df'
>     Documented arguments not in \usage in documentation object 'rrciqrp':
>       'coefficients'
> 
>     Functions with \usage entries need to have the appropriate \alias
>     entries, and all their arguments documented.
>     The \usage entries must correspond to syntactically valid R code.
>     See chapter 'Writing R documentation files' in the 'Writing R
>     Extensions' manual.v  checking Rd contents (2.5s)v  checking for
> unstated dependencies in examples (453ms)-  checking examples ... NONE
> (841ms)
> 
>     See
>       'C:/Users/DrIOloyede/Documents/relrisks.Rcheck/00check.log'
>     for details.
> 
>     -- R CMD check results -------------------------------------
> relrisks 0.1.0 ----
> Duration: 4m 36.5s
>> checking Rd \usage sections ... WARNING
>    Undocumented arguments in documentation object 'rrci'
>      'coefs' 'se' 'df'
>    Documented arguments not in \usage in documentation object 'rrci':
>      'coefficients'
> 
>    Undocumented arguments in documentation object 'rrcip'
>      'coefs' 'se' 'df'
>    Documented arguments not in \usage in documentation object 'rrcip':
>      'coefficients'
> 
>    Undocumented arguments in documentation object 'rrciqr'
>      'coefs' 'se' 'iqr' 'df'
>    Documented arguments not in \usage in documentation object 'rrciqr':
>      'coefficients'
> 
>    Undocumented arguments in documentation object 'rrciqrp'
>      'coefs' 'se' 'iqr' 'df'
>    Documented arguments not in \usage in documentation object 'rrciqrp':
>      'coefficients'
> 
>    Functions with \usage entries need to have the appropriate \alias
>    entries, and all their arguments documented.
>    The \usage entries must correspond to syntactically valid R code.
>    See chapter 'Writing R documentation files' in the 'Writing R
>    Extensions' manual.
>> checking top-level files ... NOTE
>    Non-standard files/directories found at top level:
>      'rrisks.Rmd' 'rrisks.html'

These files are in the wrong place.

> 0 errors v | 1 warning x | 1 note xError: R CMD check found
> WARNINGsExecution halted
> Exited with status 1.
> 
> #' @title Computing Relative Risks, Confidence Interval & P-Values.
> #'
> #' @param   coefs Numeric value of the coefficients of GAM and GLM.
> #' @param   se    Numeric value of the standard errors of GAM and GLM.
> #' @param   df    Numeric value of the different between the number of
> rows and columns of explanatory variables.
> #' @return The sequence of the RR,CI & P-values.
> #' @export
> ###RR & Ci
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From @@o10 @ending from p@u@edu  Tue Nov 20 15:00:55 2018
From: @@o10 @ending from p@u@edu (Oswald, Stephen A)
Date: Tue, 20 Nov 2018 14:00:55 +0000
Subject: [R-pkg-devel] recreating pretest Error in debian platform
In-Reply-To: <CABtg=K=c118+JSRhn39qCw-RWdoie3trxNXkGk1cOjOhxKtQuQ@mail.gmail.com>
References: <20181110071104.4D96B160B2C@xmpalantir.wu.ac.at>
 <01d478c5$Blat.v3.2.16$f448257c$e52c6a33@mail.statistik.tu-dortmund.de>
 <BN7PR02MB5297366565AC587FF4449724AAD90@BN7PR02MB5297.namprd02.prod.outlook.com>
 <BN7PR02MB52977E08B1B6032C303A036CAAD90@BN7PR02MB5297.namprd02.prod.outlook.com>,
 <CABtg=K=c118+JSRhn39qCw-RWdoie3trxNXkGk1cOjOhxKtQuQ@mail.gmail.com>
Message-ID: <BN7PR02MB5297D479C3B636D457A0CA2FAAD90@BN7PR02MB5297.namprd02.prod.outlook.com>

Thanks Gabor. Yes, this was my faulty syntax. It appears to be transferring environmental variables fine and the runs as expected on debian-gcc-devel replicating the output from the CRAN checks on this system, even though the environmental variables do not print in the log.

________________________________
From: G??bor Cs??rdi <csardi.gabor at gmail.com>
Sent: Tuesday, November 20, 2018 7:18:07 AM
To: Oswald, Stephen A
Cc: R Package Devel
Subject: Re: [R-pkg-devel] recreating pretest Error in debian platform

You are missing an underscore. This works for me for a package that I
just  added an error to:

rhub::check(env_vars = c("_R_CHECK_LENGTH_1_CONDITION_"  = "verbose"),
  platform = "debian-gcc-devel",
  email = "csardi.gabor at gmail.com")

??  Building package
??  Uploading package

[...]

E  checking examples (788ms)
   Running examples in ??dotenv-Ex.R?? failed
   The error most likely occurred in:

   > ### Name: load_dot_env
   > ### Title: Load environment variables from the specified file
   > ### Aliases: load_dot_env
   >
   > ### ** Examples
   >
   > # Remove, if it exists
   > Sys.unsetenv("dotenvexamplefoo")
   > Sys.getenv("dotenvexamplefoo")
   [1] ""
   >
   > # Load from a file
   > tmp <- tempfile()
   > cat("dotenvexamplefoo=bar\n", file = tmp)
   > load_dot_env(tmp)
   > Sys.getenv("dotenvexamplefoo")
   [1] "bar"
   >
   > # Clean up
   > unlink(tmp)
   >
   > if (c(TRUE, FALSE)) print("oops")
    ----------- FAILURE REPORT --------------
    --- failure: the condition has length > 1 ---
    --- srcref ---
   :
    --- package (from environment) ---

[...]

Gabor
On Tue, Nov 20, 2018 at 11:35 AM Oswald, Stephen A <sao10 at psu.edu> wrote:
>
>
>
> Dear All,
>
> I am seeking direction on how to successfully recreate an CRAN check error (see email below) for the debian gcc platform (see attached log). I'm pretty confident that there is still an error associated with my code  calling if() with a vector of length 2 or more. However, the code is long and as there are likely multiple incidences, I really want to be able to recreate this error myself so I do not waste CRAN time resubmitting each time I fix one incidence.
>
> I have tried multiple approaches to recreate this error without success. These include:
> 1) Running rhub::check while specifying environmental variables suggested by Brian Ripley ('_R_CHECK_LENGTH_1_CONDITION'="package:_R_CHECK_PACKAGE_NAME_,abort,verbose") on the platform "debian-gcc-devel". Check proceeds with no errors but I suspect the environmental variables are not being correctly specified (see https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fr-hub%2Frhub%2Fissues%2F174&amp;data=02%7C01%7Csao10%40psu.edu%7Cd7e1846aeb0743b871d608d64ee2480b%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636783131119236418&amp;sdata=qevoVXPaFbV4wrBYOzu8DKudD1yUFWerZhX3djiGHp4%3D&amp;reserved=0)
>
> 2) Running devtools::check() in Rstudio 1.0.143. But as I am running on windows, the code compiles OK.
> My system:
>
> platform       x86_64-w64-mingw32
> arch           x86_64
> os             mingw32
> system         x86_64, mingw32
> status         Under development (unstable)
> major          3
> minor          6.0
> year           2018
> month          10
> day            15
> svn rev        75443
> language       R
> version.string R Under development (unstable) (2018-10-15 r75443)
> nickname       Unsuffered Consequences
>
> 3) I have set up a GitHub profile and repository for the current code of my package FlexParamCurve v 1.5-5 (https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fsao10%2FFlexParamCurve1.5-5&amp;data=02%7C01%7Csao10%40psu.edu%7Cd7e1846aeb0743b871d608d64ee2480b%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636783131119236418&amp;sdata=VsXnWzBD61IDme8V7LMXgcOXK3MQD%2F4l5orRTwI0y90%3D&amp;reserved=0). I have then used Travis to build and check it (https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Ftravis-ci.org%2Fsao10%2FFlexParamCurve1.5-5%2Fjobs%2F457270859&amp;data=02%7C01%7Csao10%40psu.edu%7Cd7e1846aeb0743b871d608d64ee2480b%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636783131119236418&amp;sdata=%2Box09S5pbO%2FJFWGJ65jdYDJQoOdNAONhcx4R231ug0A%3D&amp;reserved=0) but, I am pretty certain that my environmental variables are not transferring. I tried setting them as Global Environmental Variables and also in my .travis.yml file.  My config was:
>
> {
>   "os": "linux",
>   "dist": "trusty",
>   "sudo": false,
>   "cache": "packages",
>   "group": "stable",
>   "language": "r",
>   "global_env": "_R_CHECK_LENGTH_1_CONDITION = \"package:_R_CHECK_PACKAGE_NAME_,abort,verbose\" R_C_BOUNDS_CHECK = yes _R_CHECK_FORCE_SUGGESTS_ = false"
> }
>
>
> and my .travis.yml file was:
>
> language: R
> cache: packages
> sudo: false
> env:
>     global:
>     - _R_CHECK_LENGTH_1_CONDITION = "package:_R_CHECK_PACKAGE_NAME_,abort,verbose"
>     - R_C_BOUNDS_CHECK = yes
>     - _R_CHECK_FORCE_SUGGESTS_ = false
>
>
> One possibility I have yet to explore is potentially running debian from a flash drive but I'm not sure whether my tool chains would need to change and it seems a major undertaking. Currently my tool chain looks like this:
>
> C:\Rtools\bin;C:\Rtools\mingw_64\bin;C:\Strawberry\c\bin;C:\Program Files (x86)\MiKTeX 2.9\miktex\bin; H:\R\R-devel\bin\x64;C:\Strawberry\perl\site\bin;C:\Strawberry;C:\Program Files (x86)\Common Files\Adobe\AGL;C:\Program Files (x86)\Calibre2\;C:\Program Files (x86)\Skype\Phone\
>
> and I am running
> Rtools version 3.5.0.4
> MiKTeX 2.9
>
> R Under development (unstable) (2018-10-15 r75443)
>
> Thank you for any direction you may be able to offer.
>
> Steve.
>
>
>
>
>
> ________________________________
> From: ligges at statistik.tu-dortmund.de <ligges at statistik.tu-dortmund.de>
> Sent: Saturday, November 10, 2018 2:21 AM
> To: Oswald, Stephen A
> Cc: CRAN-submissions at R-project.org
> Subject: [CRAN-pretest-archived] CRAN submission FlexParamCurve 1.5-4
>
> Dear maintainer,
>
> package FlexParamCurve_1.5-4.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
> Windows: <https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2Fincoming_pretest%2FFlexParamCurve_1.5-4_20181110_081104%2FWindows%2F00check.log&amp;data=02%7C01%7Csao10%40psu.edu%7Cd7e1846aeb0743b871d608d64ee2480b%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636783131119236418&amp;sdata=E67idaroiK%2BTuZ4jRlWZhMlJ2UYGeh5wEZMwKzKmBVY%3D&amp;reserved=0>
> Status: 3 NOTEs
> Debian: <https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2Fincoming_pretest%2FFlexParamCurve_1.5-4_20181110_081104%2FDebian%2F00check.log&amp;data=02%7C01%7Csao10%40psu.edu%7Cd7e1846aeb0743b871d608d64ee2480b%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636783131119236418&amp;sdata=MNcLOBouQ265sijNXFZCAM1FqiaxETLBehHeCAvUX%2Bs%3D&amp;reserved=0>
> Status: 1 ERROR, 1 NOTE
>
> Last released version's CRAN status: OK: 2
> See: <https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2FCRAN.R-project.org%2Fweb%2Fchecks%2Fcheck_results_FlexParamCurve.html&amp;data=02%7C01%7Csao10%40psu.edu%7Cd7e1846aeb0743b871d608d64ee2480b%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636783131119236418&amp;sdata=qxiQhe3jywSUzJcXcLaZC9O1M5%2FZVd5UYs9tTQgbrWo%3D&amp;reserved=0>
>
> CRAN Web: <https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DFlexParamCurve&amp;data=02%7C01%7Csao10%40psu.edu%7Cd7e1846aeb0743b871d608d64ee2480b%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636783131119236418&amp;sdata=apsGe7ZxfB2fgOvZNFlTrM47Z6FeLu0t9UiFrVyp6XY%3D&amp;reserved=0>
>
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
> <https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Csao10%40psu.edu%7Cd7e1846aeb0743b871d608d64ee2480b%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636783131119236418&amp;sdata=xjTLWTycdb7XL03lRY5It007uqqI7o7LbzQCObedQc4%3D&amp;reserved=0>
> If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
>
> More details are given in the directory:
> <https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2Fincoming_pretest%2FFlexParamCurve_1.5-4_20181110_081104%2F&amp;data=02%7C01%7Csao10%40psu.edu%7Cd7e1846aeb0743b871d608d64ee2480b%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636783131119236418&amp;sdata=13z8YFP0RGJM1s%2FXkFZH7ecf%2BZXLa83Oj9Jdf%2B1mp0k%3D&amp;reserved=0>
> The files will be removed after roughly 7 days.
>
> No strong reverse dependencies to be checked.
>
> Best regards,
> CRAN teams' auto-check service
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Csao10%40psu.edu%7Cd7e1846aeb0743b871d608d64ee2480b%7C7cf48d453ddb4389a9c1c115526eb52e%7C0%7C0%7C636783131119236418&amp;sdata=xjTLWTycdb7XL03lRY5It007uqqI7o7LbzQCObedQc4%3D&amp;reserved=0

	[[alternative HTML version deleted]]


From jfox @ending from mcm@@ter@c@  Tue Nov 20 15:30:20 2018
From: jfox @ending from mcm@@ter@c@ (Fox, John)
Date: Tue, 20 Nov 2018 14:30:20 +0000
Subject: [R-pkg-devel] creating a link to a vignette in a .Rd file
In-Reply-To: <11985_1542706576_wAK9aFvw027316_438D2EC9EAFE5946B2D5864670EA468E018F6C904E@MBXP02.ds.man.ac.uk>
References: <ACD1644AA6C67E4FBD0C350625508EC83695052D@FHSDB2D11-2.csu.mcmaster.ca>
 <CABdHhvGjtmp7KTrBe0GueN08EpE=mh0s8A8a0i4K9734xwC2dg@mail.gmail.com>
 <ACD1644AA6C67E4FBD0C350625508EC83695096A@FHSDB2D11-2.csu.mcmaster.ca>
 <11985_1542706576_wAK9aFvw027316_438D2EC9EAFE5946B2D5864670EA468E018F6C904E@MBXP02.ds.man.ac.uk>
Message-ID: <AF4141A5-1D25-4E6C-B274-582393113E25@mcmaster.ca>

Dear Georgi,

Thank you for this. 

None of these solutions seem perfect to me. I think that my suggestion is the most natural, but as you point out it won?t work in all contexts. Perhaps the safest approach is to give the vignette() command in the text of the help file, one of your suggestions.

Best,
 John

> On Nov 20, 2018, at 4:36 AM, Georgi Boshnakov <georgi.boshnakov at manchester.ac.uk> wrote:
> 
> It is somewhat problematic to make the link to the vignette fully portable.  The solution with "../doc/..." may not work if the reference manual is read off the CRAN page of a package. For a CRAN package, an alternative is to link to the vignette on its CRAN page (if the vignette is already there), with the downside that the link will not work offline. 
> 
> An alternative, which can be used along with a link, is to give a command that opens the vignette \code{vignette("xxx", package = "pkg")} or even \code{browseVignettes(package = "pkg")}. This will be directly usable also when the help is rendered in text mode. The vignette() command could also be put in the "Examples" section. 
> 
> Georgi Boshnakov
> 
> 
> -----Original Message-----
> From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Fox, John
> Sent: 20 November 2018 01:16
> To: Hadley Wickham
> Cc: R Package Development
> Subject: Re: [R-pkg-devel] creating a link to a vignette in a .Rd file
> 
> Dear Hadley,
> 
> You're right -- my approach was flawed and the document doesn't open even when the file URL is hard-coded in the .Rd file. With that hint, I found the following solution:
> 
> 	\href{../doc/partial-residuals.pdf}{partial-residuals vignette}
> 
> This works and passes package checking. A caveat: I tried it only under Windows, both inside and outside of RStudio. I'll follow up on macOS and Linux and report if there are problems.
> 
> I'm surprised that this question hasn't arisen more frequently -- wanting to link to vignettes from help pages seems natural to me. I found a couple of queries in a web search but no solution. 
> 
> Thanks for this,
> John
> 
>> -----Original Message-----
>> From: Hadley Wickham [mailto:h.wickham at gmail.com]
>> Sent: Monday, November 19, 2018 6:21 PM
>> To: Fox, John <jfox at mcmaster.ca>
>> Cc: R Package Development <r-package-devel at r-project.org>
>> Subject: Re: [R-pkg-devel] creating a link to a vignette in a .Rd file
>> 
>> On Mon, Nov 19, 2018 at 4:49 PM Fox, John <jfox at mcmaster.ca> wrote:
>>> 
>>> Dear r-package-devel list members,
>>> 
>>> I'd like to create a link to a package vignette from a help file in the same
>> package, for example to the "partial-residuals" vignette in the effects package
>> from effect.Rd. I'm able to generate a URL for the vignette as follows:
>>> 
>>>        \Sexpr[results=text]{paste0("file://", system.file("doc",
>>> "partial-residuals.pdf", package="effects"))}
>>> 
>>> but I'm unable to link to the resulting text string using href{}{} or url{}
>> because \Sexpr[etc]{etc.} is treated as verbatim text rather than evaluated.
>>> 
>>> Is there a way around this problem or another approach that works?
>> 
>> Have you confirmed that a raw file:// url works?  I would be mildly surprised if
>> it did, given my understanding of how web browser security works (which is
>> patchy, but you should still check before going too far down this path).
>> 
>> Don't you just need `results=rd` ?
>> 
>> \Sexpr[results=rd]{paste0("\\url{file://", system.file("doc", "partial-
>> residuals.pdf", package="effects"), "}")}
>> 
>> Hadley
>> 
>> --
>> http://hadley.nz
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From h@wickh@m @ending from gm@il@com  Tue Nov 20 16:27:16 2018
From: h@wickh@m @ending from gm@il@com (Hadley Wickham)
Date: Tue, 20 Nov 2018 09:27:16 -0600
Subject: [R-pkg-devel] creating a link to a vignette in a .Rd file
In-Reply-To: <AF4141A5-1D25-4E6C-B274-582393113E25@mcmaster.ca>
References: <ACD1644AA6C67E4FBD0C350625508EC83695052D@FHSDB2D11-2.csu.mcmaster.ca>
 <CABdHhvGjtmp7KTrBe0GueN08EpE=mh0s8A8a0i4K9734xwC2dg@mail.gmail.com>
 <ACD1644AA6C67E4FBD0C350625508EC83695096A@FHSDB2D11-2.csu.mcmaster.ca>
 <11985_1542706576_wAK9aFvw027316_438D2EC9EAFE5946B2D5864670EA468E018F6C904E@MBXP02.ds.man.ac.uk>
 <AF4141A5-1D25-4E6C-B274-582393113E25@mcmaster.ca>
Message-ID: <CABdHhvEKbh+epVEqA7nrGEhvmyB9J3P0-SVxs=Mx=jNVMXWfqA@mail.gmail.com>

> None of these solutions seem perfect to me. I think that my suggestion is the most natural, but as you point out it won?t work in all contexts. Perhaps the safest approach is to give the vignette() command in the text of the help file, one of your suggestions.

If you do that, and you use pkgdown (https://pkgdown.r-lib.org), that
code chunk will automatically be linked to the vignette when you build
the website.

Hadley

-- 
http://hadley.nz


From @vr@h@m@@dler @ending from gm@il@com  Wed Nov 21 03:03:46 2018
From: @vr@h@m@@dler @ending from gm@il@com (Avraham Adler)
Date: Tue, 20 Nov 2018 21:03:46 -0500
Subject: [R-pkg-devel] avoiding .mod files
In-Reply-To: <9fa4a6c2-9a88-212f-039b-fd4f8e722c85@gmail.com>
References: <01d017ac-8e2b-4d76-9f64-19592d9e9218@gmail.com>
 <bd2465f2-ea39-d1f6-dfe7-6895edc6066e@tu-dresden.de>
 <9fa4a6c2-9a88-212f-039b-fd4f8e722c85@gmail.com>
Message-ID: <CAL6gwnKp53O0p7wCB2Synp5r4gbCSBkpnTqPN3yEVuau+8uqsg@mail.gmail.com>

On Tue, Nov 20, 2018 at 4:45 AM Rampal Etienne <rampaletienne at gmail.com> wrote:
>
> Dear Thomas,
>
> My FORTRAN code to be used with deSolve contains a module dimmod. During
> build a file called dimmod.mod is created in the src directory. I can
> avoid this by including it in the .RBuildignore file, but when I submit
> the package to CRAN, the package is rejected because it keeps creating
> the dimmod.mod file. How do I solve this?
>
> Kind regards,
>
> Rampal Etienne

Hello, Rampal.

I use Fortran modules with my Delaporte package [1]. I clean them by
having a clean (actually two clean) routines in Makvars [2]. Perhaps
something like that would work for you.

Good Luck,

Avi

[1] https://CRAN.R-project.org/package=Delaporte
[2] https://bitbucket.org/aadler/delaporte/src/master/src/Makevars


From r@mp@letienne @ending from gm@il@com  Wed Nov 21 12:56:42 2018
From: r@mp@letienne @ending from gm@il@com (Rampal S. Etienne)
Date: Wed, 21 Nov 2018 12:56:42 +0100
Subject: [R-pkg-devel] avoiding .mod files
In-Reply-To: <CAL6gwnKp53O0p7wCB2Synp5r4gbCSBkpnTqPN3yEVuau+8uqsg@mail.gmail.com>
References: <01d017ac-8e2b-4d76-9f64-19592d9e9218@gmail.com>
 <bd2465f2-ea39-d1f6-dfe7-6895edc6066e@tu-dresden.de>
 <9fa4a6c2-9a88-212f-039b-fd4f8e722c85@gmail.com>
 <CAL6gwnKp53O0p7wCB2Synp5r4gbCSBkpnTqPN3yEVuau+8uqsg@mail.gmail.com>
Message-ID: <c0afc428-c20e-10bc-b936-e71ef12f39fc@gmail.com>

That helps. Thanks!

Rampal


On 21-11-2018 3:03, Avraham Adler wrote:
> On Tue, Nov 20, 2018 at 4:45 AM Rampal Etienne <rampaletienne at gmail.com> wrote:
>> Dear Thomas,
>>
>> My FORTRAN code to be used with deSolve contains a module dimmod. During
>> build a file called dimmod.mod is created in the src directory. I can
>> avoid this by including it in the .RBuildignore file, but when I submit
>> the package to CRAN, the package is rejected because it keeps creating
>> the dimmod.mod file. How do I solve this?
>>
>> Kind regards,
>>
>> Rampal Etienne
> Hello, Rampal.
>
> I use Fortran modules with my Delaporte package [1]. I clean them by
> having a clean (actually two clean) routines in Makvars [2]. Perhaps
> something like that would work for you.
>
> Good Luck,
>
> Avi
>
> [1] https://CRAN.R-project.org/package=Delaporte
> [2] https://bitbucket.org/aadler/delaporte/src/master/src/Makevars


From Bernd@Gruber @ending from c@nberr@@edu@@u  Thu Nov 22 00:22:06 2018
From: Bernd@Gruber @ending from c@nberr@@edu@@u (Bernd.Gruber)
Date: Wed, 21 Nov 2018 23:22:06 +0000
Subject: [R-pkg-devel] Note issued though package is in depends (or imports)
Message-ID: <SYBPR01MB4681A1F85C6DB7F7DFCAF4CFD4DA0@SYBPR01MB4681.ausprd01.prod.outlook.com>

Hi,

I had a package on cran for a while.

Since the latest update/recompile I get the Note (not via R-studio, but running Rstudio to compile)


NOTE


checking data for non-ASCII characters ... NOTE
  Error in .requirePackage(package) :
    unable to find required package 'raster'
  Calls: <Anonymous> ... getClass -> getClassDef -> .classEnv -> .requirePackage
  Execution halted




when I test the package.

Unfortunately I am stuck here as I do not know why this Note is issued.

My suspicion is that I have an internal data set of type raster that throws the error. But I have the raster package in the depends in my description file also I tried to put it into imports.

Or add an @import raster into the roxygen description of the data set. Nothing seems to work and the Note still occurs.

Anyone has a similar idea and or is there an idea how can I reproduce the Note (as said under R-studio I cannot see it, it compiles fine without Note) only on win-builder I get that.

Any advice would be highly appreciated.

Regards, Bernd




==============================================================================
Dr Bernd Gruber                                              )/_
                                                         _.--..---"-,--c_
Associate Professor                                 \|..'           ._O__)_
Tel: (02) 6206 3804                         ,=.    _.+   _ \..--( /
Fax: (02) 6201 2328                           \\.-''_.-' \ (     \_
Institute for Applied Ecology                  `'''       `\__   /\
Faculty of Science and Technology                          ')
University of Canberra   ACT 2601 AUSTRALIA
Email: bernd.gruber at canberra.edu.au<mailto:bernd.gruber at canberra.edu.au>
WWW: bernd-gruber<https://researchprofiles.canberra.edu.au/en/persons/bernd-gruber>

Australian Government Higher Education Provider Number CRICOS #00212K
NOTICE & DISCLAIMER: This email and any files transmitted with it may contain
confidential or copyright material and are for the attention of the addressee
only. If you have received this email in error please notify us by email
reply and delete it from your system. The University of Canberra accepts
no liability for any damage caused by any virus transmitted by this email.
==============================================================================


[UC Logo]<http://www.canberra.edu.au>           [UC #1 IN THE ACT]


[UC Facebook]<https://www.facebook.com/UniversityOfCanberra>[UC Twitter]<https://twitter.com/UniCanberra> [UC Instagram] <https://www.instagram.com/unicanberra/> [UC Youtube] <https://www.youtube.com/user/uniofcanberra>             [University of Canberra] <http://www.canberra.edu.au>   *GUG 2019

Australian Government Higher Education Registered Provider number (CRICOS) #00212K

	[[alternative HTML version deleted]]


From jg@rci@pint@do @ending from m@rum@de  Thu Nov 22 10:49:46 2018
From: jg@rci@pint@do @ending from m@rum@de (=?UTF-8?Q?Javier=20Garc=C3=ADa-Pintado?=)
Date: Thu, 22 Nov 2018 09:49:46 +0000
Subject: [R-pkg-devel] FOSS license and restricted use by further dependence
Message-ID: <c5e979cb0d51f38ccf459696be3e235508284c30@marum.de>

Dear all,
At package submission, I have 1 NOTE + 1 ERROR in the Debian log file, which I am pasting here:


...
* checking CRAN incoming feasibility ... NOTE
Maintainer: ?Javier Garcia-Pintado <jgarciapintado at marum.de>?

New submission

Possibly mis-spelled words in DESCRIPTION:
  Kalman (11:49)

Package has a FOSS license but eventually depends on the following
package which restricts use:
  akima

The Date field is over a month old.
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking serialization versions ... OK
* checking whether package ?rDAF? can be installed ... [2s/2s] ERROR
Installation failed.
See ?/srv/hornik/tmp/CRAN/rDAF.Rcheck/00install.out? for details.
* DONE
Status: 1 ERROR, 1 NOTE



I can for sure delete 'Kalman' from the description, although can't understand why a name is considered an error. Still, it seems that another error is regarding the license and the dependence on akima. Please do you know if there is a workaround for this?

Best wishes,
Javier
-- 
-----------------------------------------------------------------------------------------------------
Dr. Javier Garc?a-Pintado
MARUM - Center for Marine Environmental Sciences
Geosystem Modeling, Department of Geosciences, University of Bremen, Germany
Phone: (+49)(0)421 218 65437
Fachbereich 5 - Geowissenschaften, Klagenfurter Strasse
Geb?ude Geo II - Raum 5050


	[[alternative HTML version deleted]]


From r@lf@@tubner @ending from d@q@n@@com  Thu Nov 22 13:34:25 2018
From: r@lf@@tubner @ending from d@q@n@@com (Ralf Stubner)
Date: Thu, 22 Nov 2018 13:34:25 +0100
Subject: [R-pkg-devel] 
 FOSS license and restricted use by further dependence
In-Reply-To: <c5e979cb0d51f38ccf459696be3e235508284c30@marum.de>
References: <c5e979cb0d51f38ccf459696be3e235508284c30@marum.de>
Message-ID: <45d09284-ee37-badc-8a8d-215bb1ebcf3a@daqana.com>

Hi Javier,

the ERROR does not come from the license but from the installation failure:

On 22.11.18 10:49, Javier Garc?a-Pintado wrote:
> * checking whether package ?rDAF? can be installed ... [2s/2s] ERROR
> Installation failed.
> See ?/srv/hornik/tmp/CRAN/rDAF.Rcheck/00install.out? for details.

cheerio
Ralf

-- 
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20181122/2fd205e2/attachment.sig>

From edd @ending from debi@n@org  Thu Nov 22 15:11:44 2018
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Thu, 22 Nov 2018 08:11:44 -0600
Subject: [R-pkg-devel] 
 FOSS license and restricted use by further dependence
In-Reply-To: <c5e979cb0d51f38ccf459696be3e235508284c30@marum.de>
References: <c5e979cb0d51f38ccf459696be3e235508284c30@marum.de>
Message-ID: <23542.47392.179371.546397@rob.eddelbuettel.com>


Javier,

On 22 November 2018 at 09:49, Javier Garc?a-Pintado wrote:
| * checking CRAN incoming feasibility ... NOTE
| Maintainer: ?Javier Garcia-Pintado <jgarciapintado at marum.de>?
| 
| New submission
| 
| Possibly mis-spelled words in DESCRIPTION:
|   Kalman (11:49)

Just _either_ use apostrophes around it: ie wite 'Kalman' or 'Kalman Filter'
or trust that the CRAN maintainers may have seen the name before.

Exceptions happen.
 
| Package has a FOSS license but eventually depends on the following
| package which restricts use:
|   akima

It is one of the older CRAN dependencies which unfortunately has an
unsuitable license. I believe there are now alternatives, the interp package
may be what you want.

See this poster by Roger and Albrecht for more:
https://www.user2017.brussels/uploads/bivand_gebhardt_user17_a0.pdf

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Thu Nov 22 15:18:56 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Thu, 22 Nov 2018 15:18:56 +0100
Subject: [R-pkg-devel] 
 FOSS license and restricted use by further dependence
In-Reply-To: <23542.47392.179371.546397@rob.eddelbuettel.com>
References: <c5e979cb0d51f38ccf459696be3e235508284c30@marum.de>
 <23542.47392.179371.546397@rob.eddelbuettel.com>
Message-ID: <b64832cf-89a0-8700-bfb5-5b660a01fe7c@statistik.tu-dortmund.de>



On 22.11.2018 15:11, Dirk Eddelbuettel wrote:
> 
> Javier,
> 
> On 22 November 2018 at 09:49, Javier Garc?a-Pintado wrote:
> | * checking CRAN incoming feasibility ... NOTE
> | Maintainer: ?Javier Garcia-Pintado <jgarciapintado at marum.de>?
> |
> | New submission
> |
> | Possibly mis-spelled words in DESCRIPTION:
> |   Kalman (11:49)
> 
> Just _either_ use apostrophes around it: ie wite 'Kalman' or 'Kalman Filter'
> or trust that the CRAN maintainers may have seen the name before.
> 
> Exceptions happen.

Thanks for the answer, Dirk. In this case we'd prefer no quotes around 
person names, please. spell check items are always subject to manual 
inspection on first submission and if new spell check output is apparent..

Single quotes around software names such as 'pkg', functions should be 
written with parentheses as in foo().


Best,
Uwe

>   
> | Package has a FOSS license but eventually depends on the following
> | package which restricts use:
> |   akima
> 
> It is one of the older CRAN dependencies which unfortunately has an
> unsuitable license. I believe there are now alternatives, the interp package
> may be what you want.
> 
> See this poster by Roger and Albrecht for more:
> https://www.user2017.brussels/uploads/bivand_gebhardt_user17_a0.pdf
> 
> Dirk
>


From @@ligr@m@427 @ending from gm@il@com  Sun Nov 25 18:18:30 2018
From: @@ligr@m@427 @ending from gm@il@com (Aditya Saligrama)
Date: Sun, 25 Nov 2018 12:18:30 -0500
Subject: [R-pkg-devel] Submitting CORELS (Certifiably Optimal Rule Lists)
 package with Windows support
Message-ID: <CAFK=p6KpPktxedyaVv=vb9RD7Dg_-Wnzm6q3K3k485uFvr08Kw@mail.gmail.com>

Hi,

I am trying to submit an R interface for CORELS (Certifiably Optimal Rule
Lists). However, I've had a lot of difficulty getting this to compile and
run on Windows. In its current state, it compiles on Windows but crashes
when I try to run it. Am I able to submit this without Windows support, or
could somebody help us with supporting Windows?

The code is at https://github.com/saligrama/rcorels, and the main project
is available at https://corels.eecs.harvard.edu.

Thanks!
-Aditya Saligrama

	[[alternative HTML version deleted]]


From d@hl @ending from @t@t@byu@edu  Fri Nov 30 17:36:12 2018
From: d@hl @ending from @t@t@byu@edu (David B. Dahl)
Date: Fri, 30 Nov 2018 09:36:12 -0700
Subject: [R-pkg-devel] Cannot reproduce errors for an already-accepted
 package
Message-ID: <CALivmgaPPFidqtKMy_EGCsVVzXCSLjT-frL4dMMLLba+2A6T0g@mail.gmail.com>

I am having a hard time reproducing errors in Windows that CRAN finds on my
already-accepted rscala package.  Details of the ERROR's are here:

https://cran.r-project.org/web/checks/check_results_rscala.html

In particular, CRAN's Windows check fails on tests written using the
testthat package.

Unfortunately, I cannot reproduce the errors on any of the following
platforms:

+ My Windows 10 test machine running R 3.5.1.
+ The win-builder service (https://win-builder.r-project.org/)
+ The rhub service (https://github.com/r-hub/rhub)

Does anyone have advice on how to reproduce the errors?  Thanks.

-- David

	[[alternative HTML version deleted]]


From Jori@@Mey@ @ending from ugent@be  Fri Nov 30 18:12:03 2018
From: Jori@@Mey@ @ending from ugent@be (Joris Meys)
Date: Fri, 30 Nov 2018 18:12:03 +0100
Subject: [R-pkg-devel] Cannot reproduce errors for an already-accepted
 package
In-Reply-To: <CALivmgaPPFidqtKMy_EGCsVVzXCSLjT-frL4dMMLLba+2A6T0g@mail.gmail.com>
References: <CALivmgaPPFidqtKMy_EGCsVVzXCSLjT-frL4dMMLLba+2A6T0g@mail.gmail.com>
Message-ID: <CAO1zAVY+w1BkKnkvJ9jM4Z+Be0TZEKfo7cCjeHSK9Watb7nODw@mail.gmail.com>

Hi David,

all errors I see go back to scalaConnect(). As far as I could judge, on
CRAN this function doesn't return a TRUE or FALSE but a missing value for
some reason. As apparently all the failing tests need to call that
function, none of those can exit correctly. Why this works on rhub or
win-builder but not on CRAN is beyond me.

Cheers
Joris

On Fri, Nov 30, 2018 at 5:36 PM David B. Dahl <dahl at stat.byu.edu> wrote:

> I am having a hard time reproducing errors in Windows that CRAN finds on my
> already-accepted rscala package.  Details of the ERROR's are here:
>
> https://cran.r-project.org/web/checks/check_results_rscala.html
>
> In particular, CRAN's Windows check fails on tests written using the
> testthat package.
>
> Unfortunately, I cannot reproduce the errors on any of the following
> platforms:
>
> + My Windows 10 test machine running R 3.5.1.
> + The win-builder service (https://win-builder.r-project.org/)
> + The rhub service (https://github.com/r-hub/rhub)
>
> Does anyone have advice on how to reproduce the errors?  Thanks.
>
> -- David
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From @vr@h@m@@dler @ending from gm@il@com  Tue Dec  4 06:34:27 2018
From: @vr@h@m@@dler @ending from gm@il@com (Avraham Adler)
Date: Tue, 4 Dec 2018 00:34:27 -0500
Subject: [R-pkg-devel] Best practices for R package requiring Fortran 2003
Message-ID: <CAL6gwnLe1pW2NyiOnXWOOK1OqyZ5HV4c74Ho=cGfKBDx+oyqTg@mail.gmail.com>

Following the news, I've been trying to clean up my package which uses
Fortran in preparation for the changes that appear to be coming in
R-devel. The package has implicitly been relying on Fortran 2003,
since it uses iso_c_binding. In practice, is it proper that
"-std=f2003" be explicitly added to PKG_FCFLAGS (or possibPKG_FFLAGS
in 3.6.0)? Should "Fortran 2003" be listed in SystemRequirements? It
currently passes CRAN checks, but that's because all the Fortran
compilers in use have the iso_c_bindings implemented (GCC 4.5 already
had it, and it's clearly in Oracle Developer Studio 12.5).

Thank you,

Avi


From li@t@ @ending from dewey@myzen@co@uk  Wed Dec  5 16:19:26 2018
From: li@t@ @ending from dewey@myzen@co@uk (Michael Dewey)
Date: Wed, 5 Dec 2018 15:19:26 +0000
Subject: [R-pkg-devel] Can I put my small data-sets into one .rda file in my
 CRAN package?
Message-ID: <b71f2e1c-bb0e-c806-111a-f07e69fc9aec@dewey.myzen.co.uk>

At the moment my package (metap) has a number of small data-sets each as
a separate .rda file. It works fine. I thought it would be neater to put
them all into one file which I called data.rda (original choice of name
there).

Now when I do R CMD build metap
it fails when trying to build the vignette when that executes
data(validity)
where validity is contained in data.rda.

I cannot find anything in writing R extensions which explicitly forbids
this but equally nothing which explicitly permits it. Am I missing
something? Obviously this is not an important problem and as the title
says the solution should work on CRAN too.

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From Jori@@Mey@ @ending from ugent@be  Wed Dec  5 17:22:29 2018
From: Jori@@Mey@ @ending from ugent@be (Joris Meys)
Date: Wed, 5 Dec 2018 17:22:29 +0100
Subject: [R-pkg-devel] 
 Can I put my small data-sets into one .rda file in my CRAN package?
In-Reply-To: <b71f2e1c-bb0e-c806-111a-f07e69fc9aec@dewey.myzen.co.uk>
References: <b71f2e1c-bb0e-c806-111a-f07e69fc9aec@dewey.myzen.co.uk>
Message-ID: <CAO1zAVbqxqD4=wxh7-FqHGoZbFMLQssA+yuq7-L0Nqh-hNGqYQ@mail.gmail.com>

Hi Michael,

in the data() function you have to use the name of the rda file, not the
name of the dataset you need.
So say you have the datasets validity and data2 in a file called
alldata.rda, you need to do:

data(alldata)

and that will make both validity and data2 available to the user.

imho it only makes sense to combine data in one .rda file when they're also
related (for example an dataset with species and the similarity matrix for
those species).

Hope this helps
Cheers
Joris

On Wed, Dec 5, 2018 at 4:19 PM Michael Dewey <lists at dewey.myzen.co.uk>
wrote:

> At the moment my package (metap) has a number of small data-sets each as
> a separate .rda file. It works fine. I thought it would be neater to put
> them all into one file which I called data.rda (original choice of name
> there).
>
> Now when I do R CMD build metap
> it fails when trying to build the vignette when that executes
> data(validity)
> where validity is contained in data.rda.
>
> I cannot find anything in writing R extensions which explicitly forbids
> this but equally nothing which explicitly permits it. Am I missing
> something? Obviously this is not an important problem and as the title
> says the solution should work on CRAN too.
>
> --
> Michael
> http://www.dewey.myzen.co.uk/home.html
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From georgi@bo@hn@kov @ending from m@nche@ter@@c@uk  Wed Dec  5 17:44:38 2018
From: georgi@bo@hn@kov @ending from m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Wed, 5 Dec 2018 16:44:38 +0000
Subject: [R-pkg-devel] 
 Can I put my small data-sets into one .rda file in my CRAN package?
In-Reply-To: <CAO1zAVbqxqD4=wxh7-FqHGoZbFMLQssA+yuq7-L0Nqh-hNGqYQ@mail.gmail.com>
References: <b71f2e1c-bb0e-c806-111a-f07e69fc9aec@dewey.myzen.co.uk>
 <CAO1zAVbqxqD4=wxh7-FqHGoZbFMLQssA+yuq7-L0Nqh-hNGqYQ@mail.gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F6CB019@MBXP02.ds.man.ac.uk>

Further to Joris' email, the help page of data() is very informative. 
If the reason for wishing to combine the datasets together is so that they can be made available in a single command,
an option might be to create an R source file which loads all datasets, thus giving this option without withdrawing the possibility for  loading the individual datasets.

Georgi Boshnakov


-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Joris Meys
Sent: 05 December 2018 16:22
To: lists at dewey.myzen.co.uk
Cc: R Package Development
Subject: Re: [R-pkg-devel] Can I put my small data-sets into one .rda file in my CRAN package?

Hi Michael,

in the data() function you have to use the name of the rda file, not the
name of the dataset you need.
So say you have the datasets validity and data2 in a file called
alldata.rda, you need to do:

data(alldata)

and that will make both validity and data2 available to the user.

imho it only makes sense to combine data in one .rda file when they're also
related (for example an dataset with species and the similarity matrix for
those species).

Hope this helps
Cheers
Joris

On Wed, Dec 5, 2018 at 4:19 PM Michael Dewey <lists at dewey.myzen.co.uk>
wrote:

> At the moment my package (metap) has a number of small data-sets each as
> a separate .rda file. It works fine. I thought it would be neater to put
> them all into one file which I called data.rda (original choice of name
> there).
>
> Now when I do R CMD build metap
> it fails when trying to build the vignette when that executes
> data(validity)
> where validity is contained in data.rda.
>
> I cannot find anything in writing R extensions which explicitly forbids
> this but equally nothing which explicitly permits it. Am I missing
> something? Obviously this is not an important problem and as the title
> says the solution should work on CRAN too.
>
> --
> Michael
> http://www.dewey.myzen.co.uk/home.html
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From dd@lthorp @ending from u@g@@gov  Thu Dec  6 07:28:01 2018
From: dd@lthorp @ending from u@g@@gov (Dalthorp, Daniel)
Date: Wed, 5 Dec 2018 22:28:01 -0800
Subject: package 'corpus' not available?
Message-ID: <CAJeYpE_1q=fQgfFx2cQXBH9_m+vx8YETt_pveEJt6Ou+wr51aw@mail.gmail.com>

Dear All,
I am trying to submit a minor update of new package (GenEst) to CRAN, but
got an error that has not appeared in releases earlier this year (the
latest was two weeks ago):

* checking package dependencies ... ERROR
Package required but not available: ?corpus?

I see the package on CRAN, and it installs and runs fine on my machine.
Since its last release, my package has not had any changes that involve
'corpus' functions, the 'corpus' package at CRAN has not changed, and R is
still 3.5.1. Any ideas about what might be going on?

Any help would be greatly appreciated!

-Dan

-- 
Dan Dalthorp, PhD
USGS Forest and Rangeland Ecosystem Science Center
Forest Sciences Lab, Rm 311
3200 SW Jefferson Way
Corvallis, OR 97331
ph: 541-750-0953
ddalthorp at usgs.gov

	[[alternative HTML version deleted]]


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Thu Dec  6 09:16:13 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Thu, 6 Dec 2018 09:16:13 +0100
Subject: [R-pkg-devel] package 'corpus' not available?
In-Reply-To: <mailman.3265.9212.1544077711.1179.r-package-devel@r-project.org>
References: <mailman.3265.9212.1544077711.1179.r-package-devel@r-project.org>
Message-ID: <7e36b565-4cfb-9084-6d61-b3b176df1486@statistik.tu-dortmund.de>

Please submit again, perhaps a race cndition on one of the incoming 
check machines that instaled corpus when your package was checked?

If this persists, pls write to  <cran-submissions at r-project.org> in 
response to the auto-rejection.

Best,
Uwe Ligges




On 06.12.2018 07:28, Dalthorp, Daniel via R-package-devel wrote:
> 
> Subject:
> package 'corpus' not available?
> From:
> "Dalthorp, Daniel" <ddalthorp at usgs.gov>
> Date:
> 06.12.2018 07:28
> To:
> <r-package-devel at r-project.org>
> 
> To:
> <r-package-devel at r-project.org>
> 
> 
> Dear All,
> I am trying to submit a minor update of new package (GenEst) to CRAN, but
> got an error that has not appeared in releases earlier this year (the
> latest was two weeks ago):
> 
> * checking package dependencies ... ERROR
> Package required but not available: ?corpus?
> 
> I see the package on CRAN, and it installs and runs fine on my machine.
> Since its last release, my package has not had any changes that involve
> 'corpus' functions, the 'corpus' package at CRAN has not changed, and R is
> still 3.5.1. Any ideas about what might be going on?
> 
> Any help would be greatly appreciated!
> 
> -Dan
> 
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From kevin@r@coombe@ @ending from gm@il@com  Thu Dec  6 16:59:12 2018
From: kevin@r@coombe@ @ending from gm@il@com (Kevin Coombes)
Date: Thu, 6 Dec 2018 10:59:12 -0500
Subject: [R-pkg-devel] testing coercion
Message-ID: <CAHJ+2VLmGPsVzCJfMj4ttvcmSNdRap8SxWCFpFv7zBSD4-dEGQ@mail.gmail.com>

 Hi,

A package I recently submitted to CRAN includes an S4 class that defines a
method to coerce from that class to a numeric vector, basically through

>  setAs("myClass", "numeric", function(from) from at psi)

Being perhaps overly compulsive about trying to test everything while
documenting behavior, my accompanying test script includes these lines:

> try( as.numeric(wv) )            # should fail
> canCoerce(wv, "numeric")   # returns TRUE
> canCoerce(wv, "double")     # gets a complaint from CRAN incoming pretest

The complaint on the last line arises because
+ in the current version of R, the answer is FALSE
+ in the development version of R, the answer is TRUE
The change is (probably) documented on the R-devel daily news from 04 Sept
2018, which lists

Bug Fix:  as(1L, "double") now does coerce (PR#17457)

So, here's my question. Do I remove this test (and thus lose my
documentation of how the method behaves) in order to get the incoming
precheck to stop whinging? Or do I tell the CRAN maintainers to not worry
about the test changing, since it's due to a core bug fix, and promise to
change my saved test results when the devel version becomes current? (Even
though the fixed results will then show up as wrong in the "oldrel" tests.)

Best,
  Kevin

	[[alternative HTML version deleted]]


From h@wickh@m @ending from gm@il@com  Thu Dec  6 17:22:47 2018
From: h@wickh@m @ending from gm@il@com (Hadley Wickham)
Date: Thu, 6 Dec 2018 10:22:47 -0600
Subject: [R-pkg-devel] New CRAN internet policy
Message-ID: <CABdHhvFWTfTHcVvWLqrRne_T76W_+jhwuOYWzbxahPwnip_N1A@mail.gmail.com>

Hi all,

I'd love to get some clarification on what the new internet policy
means for packages like httr:

> Packages which use Internet resources should fail gracefully with an informative
> message if the resource is not available (and not give a check warning nor error).

It's not clear what "internet resource" means here? If it means
dataset, then I think the httr tests and examples are ok. If it means
any use of the internet, I'm not sure what do - httr critically
depends on internet access, so I can't see any way to make it fail
gracefully.

Hadley

-- 
http://hadley.nz


From roy@mendel@@ohn @ending from no@@@gov  Thu Dec  6 17:41:57 2018
From: roy@mendel@@ohn @ending from no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Thu, 6 Dec 2018 08:41:57 -0800
Subject: [R-pkg-devel] New CRAN internet policy
In-Reply-To: <CABdHhvFWTfTHcVvWLqrRne_T76W_+jhwuOYWzbxahPwnip_N1A@mail.gmail.com>
References: <CABdHhvFWTfTHcVvWLqrRne_T76W_+jhwuOYWzbxahPwnip_N1A@mail.gmail.com>
Message-ID: <088FAC1C-9ED8-4239-A03E-92AED4A96C68@noaa.gov>

Hi All:

Can someone point me to where all the policies such as this one are posted.  This may affect a package I have,  and one problem I have is different people have differing ideas of what defines a "graceful" exit.

Thanks,

Roy


> On Dec 6, 2018, at 8:22 AM, Hadley Wickham <h.wickham at gmail.com> wrote:
> 
> Hi all,
> 
> I'd love to get some clarification on what the new internet policy
> means for packages like httr:
> 
>> Packages which use Internet resources should fail gracefully with an informative
>> message if the resource is not available (and not give a check warning nor error).
> 
> It's not clear what "internet resource" means here? If it means
> dataset, then I think the httr tests and examples are ok. If it means
> any use of the internet, I'm not sure what do - httr critically
> depends on internet access, so I can't see any way to make it fail
> gracefully.
> 
> Hadley
> 
> -- 
> http://hadley.nz
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From h@wickh@m @ending from gm@il@com  Thu Dec  6 17:50:16 2018
From: h@wickh@m @ending from gm@il@com (Hadley Wickham)
Date: Thu, 6 Dec 2018 10:50:16 -0600
Subject: [R-pkg-devel] New CRAN internet policy
In-Reply-To: <088FAC1C-9ED8-4239-A03E-92AED4A96C68@noaa.gov>
References: <CABdHhvFWTfTHcVvWLqrRne_T76W_+jhwuOYWzbxahPwnip_N1A@mail.gmail.com>
 <088FAC1C-9ED8-4239-A03E-92AED4A96C68@noaa.gov>
Message-ID: <CABdHhvEtm0R1soCndfNJ_6iF_1ztzOQxBNxDix4MKqpExjKHLw@mail.gmail.com>

Policies at https://cran.r-project.org/web/packages/policies.html

Dirk Eddelbuettel has a CRAN policy watch where you can see the
changes: https://github.com/eddelbuettel/crp

Hadley

On Thu, Dec 6, 2018 at 10:42 AM Roy Mendelssohn - NOAA Federal
<roy.mendelssohn at noaa.gov> wrote:
>
> Hi All:
>
> Can someone point me to where all the policies such as this one are posted.  This may affect a package I have,  and one problem I have is different people have differing ideas of what defines a "graceful" exit.
>
> Thanks,
>
> Roy
>
>
> > On Dec 6, 2018, at 8:22 AM, Hadley Wickham <h.wickham at gmail.com> wrote:
> >
> > Hi all,
> >
> > I'd love to get some clarification on what the new internet policy
> > means for packages like httr:
> >
> >> Packages which use Internet resources should fail gracefully with an informative
> >> message if the resource is not available (and not give a check warning nor error).
> >
> > It's not clear what "internet resource" means here? If it means
> > dataset, then I think the httr tests and examples are ok. If it means
> > any use of the internet, I'm not sure what do - httr critically
> > depends on internet access, so I can't see any way to make it fail
> > gracefully.
> >
> > Hadley
> >
> > --
> > http://hadley.nz
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>


-- 
http://hadley.nz


From @eb@meyer @ending from f@u@de  Thu Dec  6 17:41:39 2018
From: @eb@meyer @ending from f@u@de (Sebastian Meyer)
Date: Thu, 6 Dec 2018 17:41:39 +0100
Subject: [R-pkg-devel] testing coercion
In-Reply-To: <CAHJ+2VLmGPsVzCJfMj4ttvcmSNdRap8SxWCFpFv7zBSD4-dEGQ@mail.gmail.com>
References: <CAHJ+2VLmGPsVzCJfMj4ttvcmSNdRap8SxWCFpFv7zBSD4-dEGQ@mail.gmail.com>
Message-ID: <6c9e0ea3-f36b-aeba-2255-11d407de50ed@fau.de>

Hi Kevin,

I think using

> canCoerce(wv, "double") || getRversion() < "3.6.0"

could solve the issue of an inconsistent test result and is descriptive.

Best regards,

	Sebastian


Am 06.12.18 um 16:59 schrieb Kevin Coombes:
>  Hi,
> 
> A package I recently submitted to CRAN includes an S4 class that defines a
> method to coerce from that class to a numeric vector, basically through
> 
>>  setAs("myClass", "numeric", function(from) from at psi)
> 
> Being perhaps overly compulsive about trying to test everything while
> documenting behavior, my accompanying test script includes these lines:
> 
>> try( as.numeric(wv) )            # should fail
>> canCoerce(wv, "numeric")   # returns TRUE
>> canCoerce(wv, "double")     # gets a complaint from CRAN incoming pretest
> 
> The complaint on the last line arises because
> + in the current version of R, the answer is FALSE
> + in the development version of R, the answer is TRUE
> The change is (probably) documented on the R-devel daily news from 04 Sept
> 2018, which lists
> 
> Bug Fix:  as(1L, "double") now does coerce (PR#17457)
> 
> So, here's my question. Do I remove this test (and thus lose my
> documentation of how the method behaves) in order to get the incoming
> precheck to stop whinging? Or do I tell the CRAN maintainers to not worry
> about the test changing, since it's due to a core bug fix, and promise to
> change my saved test results when the devel version becomes current? (Even
> though the fixed results will then show up as wrong in the "oldrel" tests.)
> 
> Best,
>   Kevin
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From roy@mendel@@ohn @ending from no@@@gov  Thu Dec  6 17:54:58 2018
From: roy@mendel@@ohn @ending from no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Thu, 6 Dec 2018 08:54:58 -0800
Subject: [R-pkg-devel] New CRAN internet policy
In-Reply-To: <CABdHhvEtm0R1soCndfNJ_6iF_1ztzOQxBNxDix4MKqpExjKHLw@mail.gmail.com>
References: <CABdHhvFWTfTHcVvWLqrRne_T76W_+jhwuOYWzbxahPwnip_N1A@mail.gmail.com>
 <088FAC1C-9ED8-4239-A03E-92AED4A96C68@noaa.gov>
 <CABdHhvEtm0R1soCndfNJ_6iF_1ztzOQxBNxDix4MKqpExjKHLw@mail.gmail.com>
Message-ID: <AA55A481-1E31-41EF-B8F1-EFEE9C4062F2@noaa.gov>

Thanks muchly.

-Roy


> On Dec 6, 2018, at 8:50 AM, Hadley Wickham <h.wickham at gmail.com> wrote:
> 
> Policies at https://cran.r-project.org/web/packages/policies.html
> 
> Dirk Eddelbuettel has a CRAN policy watch where you can see the
> changes: https://github.com/eddelbuettel/crp
> 
> Hadley
> 
> On Thu, Dec 6, 2018 at 10:42 AM Roy Mendelssohn - NOAA Federal
> <roy.mendelssohn at noaa.gov> wrote:
>> 
>> Hi All:
>> 
>> Can someone point me to where all the policies such as this one are posted.  This may affect a package I have,  and one problem I have is different people have differing ideas of what defines a "graceful" exit.
>> 
>> Thanks,
>> 
>> Roy
>> 
>> 
>>> On Dec 6, 2018, at 8:22 AM, Hadley Wickham <h.wickham at gmail.com> wrote:
>>> 
>>> Hi all,
>>> 
>>> I'd love to get some clarification on what the new internet policy
>>> means for packages like httr:
>>> 
>>>> Packages which use Internet resources should fail gracefully with an informative
>>>> message if the resource is not available (and not give a check warning nor error).
>>> 
>>> It's not clear what "internet resource" means here? If it means
>>> dataset, then I think the httr tests and examples are ok. If it means
>>> any use of the internet, I'm not sure what do - httr critically
>>> depends on internet access, so I can't see any way to make it fail
>>> gracefully.
>>> 
>>> Hadley
>>> 
>>> --
>>> http://hadley.nz
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>> 
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected"
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> 
> 
> 
> -- 
> http://hadley.nz

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From kevin@r@coombe@ @ending from gm@il@com  Thu Dec  6 18:52:00 2018
From: kevin@r@coombe@ @ending from gm@il@com (Kevin Coombes)
Date: Thu, 6 Dec 2018 12:52:00 -0500
Subject: [R-pkg-devel] testing coercion
In-Reply-To: <6c9e0ea3-f36b-aeba-2255-11d407de50ed@fau.de>
References: <CAHJ+2VLmGPsVzCJfMj4ttvcmSNdRap8SxWCFpFv7zBSD4-dEGQ@mail.gmail.com>
 <6c9e0ea3-f36b-aeba-2255-11d407de50ed@fau.de>
Message-ID: <CAHJ+2VLfcepypUgqe6KeG1rPAvU1gByUg4VGbVS8C0OVvZyXFw@mail.gmail.com>

Thanks for the suggestion. But it may not be quite expressive enough; I
think I will instead use

 > ifelse(getRversion() < "3.6.0",
 >           ! canCoerce(wv, "double"),   # fails in older versions
 >              canCoerce(wv, "double"))  # works in newer versions

That way, when I update the package six months from now, I might have a
chance of remembering what was going on.

Best,
   Kevin

On 12/6/2018 11:41 AM, Sebastian Meyer wrote:
> Hi Kevin,
>
> I think using
>
>> canCoerce(wv, "double") || getRversion() < "3.6.0"
> could solve the issue of an inconsistent test result and is descriptive.
>
> Best regards,
>
>       Sebastian
>
>
> Am 06.12.18 um 16:59 schrieb Kevin Coombes:
>>   Hi,
>>
>> A package I recently submitted to CRAN includes an S4 class that defines a
>> method to coerce from that class to a numeric vector, basically through
>>
>>>   setAs("myClass", "numeric", function(from) from at psi)
>> Being perhaps overly compulsive about trying to test everything while
>> documenting behavior, my accompanying test script includes these lines:
>>
>>> try( as.numeric(wv) )            # should fail
>>> canCoerce(wv, "numeric")   # returns TRUE
>>> canCoerce(wv, "double")     # gets a complaint from CRAN incoming pretest
>> The complaint on the last line arises because
>> + in the current version of R, the answer is FALSE
>> + in the development version of R, the answer is TRUE
>> The change is (probably) documented on the R-devel daily news from 04 Sept
>> 2018, which lists
>>
>> Bug Fix:  as(1L, "double") now does coerce (PR#17457)
>>
>> So, here's my question. Do I remove this test (and thus lose my
>> documentation of how the method behaves) in order to get the incoming
>> precheck to stop whinging? Or do I tell the CRAN maintainers to not worry
>> about the test changing, since it's due to a core bug fix, and promise to
>> change my saved test results when the devel version becomes current? (Even
>> though the fixed results will then show up as wrong in the "oldrel" tests.)
>>
>> Best,
>>    Kevin
>>
>>      [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From mrkellerm@nn @ending from gm@il@com  Thu Dec  6 19:29:07 2018
From: mrkellerm@nn @ending from gm@il@com (Michael Kellermann)
Date: Thu, 6 Dec 2018 13:29:07 -0500
Subject: [R-pkg-devel] R package submission - C code does not compile
Message-ID: <CADj50wF=ja3fXYMuyWzLPsnH-ks127jJJv4t4uoH+fGw6OkNFQ@mail.gmail.com>

Hi all,

I'm attempting to submit an update of our eiPack package to CRAN.  When I
submitted it, it passed the Windows check with no problem (other than a
note for a change in maintainer), but it failed almost immediately on the
Debian check.  The 00install.out file shows that it failed due to an
inability to compile the C code included in the package.  The error message
was as follows:

** libs
gcc-8  -I"/home/hornik/tmp/R/include" -DNDEBUG   -I/usr/local/include
=  -fpic  -g -O2 -Wall -pedantic -mtune=native -c eiutil.c -o eiutil.o
gcc-8: error: =: No such file or directory
make: *** [/home/hornik/tmp/R/etc/Makeconf:166: eiutil.o] Error 1
ERROR: compilation failed for package ?eiPack?


I updated the package on a Windows machine, but tested it on several
linux systems using the rhub package and never encountered this issue.
I think it has something to do with the equal sign in the following
code snippet

-I/usr/local/include =  -fpic

but I could be wrong, as I don't have much experience with linux.  I'm
sure that I made a mistake somewhere, but I'm at a bit of a loss as to
what to try next.  Any advice would be most appreciated.


Best regards,

Mike Kellermann

	[[alternative HTML version deleted]]


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Fri Dec  7 08:23:42 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Fri, 7 Dec 2018 08:23:42 +0100
Subject: [R-pkg-devel] R package submission - C code does not compile
In-Reply-To: <CADj50wF=ja3fXYMuyWzLPsnH-ks127jJJv4t4uoH+fGw6OkNFQ@mail.gmail.com>
References: <CADj50wF=ja3fXYMuyWzLPsnH-ks127jJJv4t4uoH+fGw6OkNFQ@mail.gmail.com>
Message-ID: <4fcfbdd6-298c-7526-6d81-8dc581c2ce9f@statistik.tu-dortmund.de>

Please resubmit, a hicc up on the check machine.

Best,
Uwe Ligges

On 06.12.2018 19:29, Michael Kellermann wrote:
> Hi all,
> 
> I'm attempting to submit an update of our eiPack package to CRAN.  When I
> submitted it, it passed the Windows check with no problem (other than a
> note for a change in maintainer), but it failed almost immediately on the
> Debian check.  The 00install.out file shows that it failed due to an
> inability to compile the C code included in the package.  The error message
> was as follows:
> 
> ** libs
> gcc-8  -I"/home/hornik/tmp/R/include" -DNDEBUG   -I/usr/local/include
> =  -fpic  -g -O2 -Wall -pedantic -mtune=native -c eiutil.c -o eiutil.o
> gcc-8: error: =: No such file or directory
> make: *** [/home/hornik/tmp/R/etc/Makeconf:166: eiutil.o] Error 1
> ERROR: compilation failed for package ?eiPack?
> 
> 
> I updated the package on a Windows machine, but tested it on several
> linux systems using the rhub package and never encountered this issue.
> I think it has something to do with the equal sign in the following
> code snippet
> 
> -I/usr/local/include =  -fpic
> 
> but I could be wrong, as I don't have much experience with linux.  I'm
> sure that I made a mistake somewhere, but I'm at a bit of a loss as to
> what to try next.  Any advice would be most appreciated.
> 
> 
> Best regards,
> 
> Mike Kellermann
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From m@echler @ending from @t@t@m@th@ethz@ch  Fri Dec  7 09:48:37 2018
From: m@echler @ending from @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 7 Dec 2018 09:48:37 +0100
Subject: [R-pkg-devel] New CRAN internet policy
In-Reply-To: <CABdHhvFWTfTHcVvWLqrRne_T76W_+jhwuOYWzbxahPwnip_N1A@mail.gmail.com>
References: <CABdHhvFWTfTHcVvWLqrRne_T76W_+jhwuOYWzbxahPwnip_N1A@mail.gmail.com>
Message-ID: <23562.13285.820319.446050@stat.math.ethz.ch>

>>>>> Hadley Wickham 
>>>>>     on Thu, 6 Dec 2018 10:22:47 -0600 writes:

    > Hi all,
    > I'd love to get some clarification on what the new internet policy
    > means for packages like httr:

    >> Packages which use Internet resources should fail gracefully with an informative
    >> message if the resource is not available (and not give a check warning nor error).

    > It's not clear what "internet resource" means here? If it means
    > dataset, then I think the httr tests and examples are ok. If it means
    > any use of the internet, I'm not sure what do - httr critically
    > depends on internet access, so I can't see any way to make it fail
    > gracefully.

    > Hadley

I cannot answer your question, notably as I'm not part of the CRAN
team, but as R Core developer, I've encountered the problem
many times which this policy tries to mitigate
(but I also think we should consider to go further than the
 above "policy") :

As R developer, I'd like to see the effect of a change to the
sources of base R, and so eventually, I may want to run the
equivalent of 'R CMD check' on all existing CRAN and
Bioconductor packages. If I have access to a server with many
cores and very fast hard disks, I can hope to finish running the
tests with 1--2 days.
But then I have to deal with the result.  The few times I've
done this, the result has been "a mess" because many many
packages  nowadays assume in their examples and their regression/unit
tests that internet access to some resources works, ... which it
"often" does not, and so  download.file(),
read.table("http://.....") etc result in errors sooner or later.

Because of that some packages fail their checks "randomly" (in
the sense that internet resources are not available "randomly").
Ideally we'd find a very good way that these failures are
communicated back to the person / process running (a version of)
'R CMD check', because in the above scenario, I'd like to weed
out the 300 packages that just failed because of internet
resource access failures,  and only look at the other packages
that got a change in their 'R CMD check' results.

The recent introduction in R-devel of classed error conditions
(in some cases), e.g., https://developer.r-project.org/blosxom.cgi/R-devel/NEWS/2018/10/04#n2018-10-04,  and the similar and somewhat earlier
effort of Lionel Henry to use classed error conditions (in
rlang only, unfortunately, rather than as a patch proposal to R ..)
maybe one step towards a nice solution here.

Ideally we'd not just get  'ERROR'  in the check 'Status:' line,
but qualified errors, and if for a package the only errors are caused by
internet resource access failures, I could easily filter them out.

Martin


From wolfg@ng@lenh@rd @ending from uni-wuerzburg@de  Fri Dec  7 08:54:30 2018
From: wolfg@ng@lenh@rd @ending from uni-wuerzburg@de (Wolfgang Lenhard)
Date: Fri, 7 Dec 2018 08:54:30 +0100
Subject: [R-pkg-devel] Package update submission to CRAN fails on pretest
Message-ID: <81d78b1e-afa5-177b-fac5-055025ec96d8@uni-wuerzburg.de>

Dear list,
I am getting problems when trying to submit an update of the package 
cNORM to CRAN. I am developing the package with RStudio and devtools and 
I am using Travis for automatic testing. The package is tested locally 
on Win10 and Mac OS X and on Travis with Ubuntu and Mac both for 
development and release versions of R. All local tests and tests on 
Travis work flawlessly - no errors, warning or notes. When submitting to 
CRAN, a note and an error show up on some of the Linux OS (Fedora & 
Solaris) and Mac OS X, while others display an 'OK' (Win, Debian). The 
results: https://cran.r-project.org/web/checks/check_results_cNORM.html

- error: This seems to be related to the vignette with the following 
message:
> * checking examples ... ERROR
> Running examples in ?cNORM-Ex.R? failed
I can however not identify the location of the error

- Note: Check: data for non-ASCII characters

The strange thing is: I checked all data files multiple times. They 
mainly consist of data.frames with numerics and all colnames? are ASCII. 
I am not able to replicate the issue. The same is true for the error, 
which does not show up on Travis and as well locally. And finally, the 
results state, that the version of the package is 1.0.1, which had been 
the first submission to CRAN a month ago. The current version of the 
package is 1.1.1. Could this be the reason for the problem?

Do you have an idea how to progress with the testing or how to locate 
the errors? Any help is welcome.

Best regards,
 ??? Wolfgang Lenhard


	[[alternative HTML version deleted]]


From georgi@bo@hn@kov @ending from m@nche@ter@@c@uk  Fri Dec  7 13:46:04 2018
From: georgi@bo@hn@kov @ending from m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Fri, 7 Dec 2018 12:46:04 +0000
Subject: [R-pkg-devel] 
 Package update submission to CRAN fails on pretest
In-Reply-To: <81d78b1e-afa5-177b-fac5-055025ec96d8@uni-wuerzburg.de>
References: <81d78b1e-afa5-177b-fac5-055025ec96d8@uni-wuerzburg.de>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F6CB2E7@MBXP02.ds.man.ac.uk>

The link you gave, https://cran.r-project.org/web/checks/check_results_cNORM.html,
is to the check results for the package currently on CRAN and it is indeed v. 1.0.1
(it is linked from https://CRAN.R-project.org/package=cNORM).

Was this really the link you got from CRAN's pretest? Sometimes they ask if care has been taken about NOTEs/WARNINGs for the current CRAN version, since some tests are not done during submission, but this doesn't seem the case here.

Georgi Boshnakov


-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Wolfgang Lenhard
Sent: 07 December 2018 07:55
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Package update submission to CRAN fails on pretest

Dear list,
I am getting problems when trying to submit an update of the package 
cNORM to CRAN. I am developing the package with RStudio and devtools and 
I am using Travis for automatic testing. The package is tested locally 
on Win10 and Mac OS X and on Travis with Ubuntu and Mac both for 
development and release versions of R. All local tests and tests on 
Travis work flawlessly - no errors, warning or notes. When submitting to 
CRAN, a note and an error show up on some of the Linux OS (Fedora & 
Solaris) and Mac OS X, while others display an 'OK' (Win, Debian). The 
results: https://cran.r-project.org/web/checks/check_results_cNORM.html

- error: This seems to be related to the vignette with the following 
message:
> * checking examples ... ERROR
> Running examples in ?cNORM-Ex.R? failed
I can however not identify the location of the error

- Note: Check: data for non-ASCII characters

The strange thing is: I checked all data files multiple times. They 
mainly consist of data.frames with numerics and all colnames? are ASCII. 
I am not able to replicate the issue. The same is true for the error, 
which does not show up on Travis and as well locally. And finally, the 
results state, that the version of the package is 1.0.1, which had been 
the first submission to CRAN a month ago. The current version of the 
package is 1.1.1. Could this be the reason for the problem?

Do you have an idea how to progress with the testing or how to locate 
the errors? Any help is welcome.

Best regards,
 ??? Wolfgang Lenhard


	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

From pd@lgd @ending from gm@il@com  Fri Dec  7 13:58:03 2018
From: pd@lgd @ending from gm@il@com (peter dalgaard)
Date: Fri, 7 Dec 2018 13:58:03 +0100
Subject: [R-pkg-devel] 
 Package update submission to CRAN fails on pretest
In-Reply-To: <81d78b1e-afa5-177b-fac5-055025ec96d8@uni-wuerzburg.de>
References: <81d78b1e-afa5-177b-fac5-055025ec96d8@uni-wuerzburg.de>
Message-ID: <BEEC124C-5489-4CBE-8030-D0F604F536CE@gmail.com>

Hmm, no ERRORs in the CRAN checks at this moment? 

Re. utf-8, on Mac OS, the CRAN checks have a note about 90 strings marked as utf8.

I see 57 of them in


> life$Country[Encoding(life$Country)!="unknown"]
 [1] "Korea, Dem. People?s Rep." "Korea, Dem. People?s Rep."
 [3] "Korea, Dem. People?s Rep." "Korea, Dem. People?s Rep."
 [5] "Korea, Dem. People?s Rep." "Korea, Dem. People?s Rep."
...

and 32 more in "mortality". You go find the remaining 1...

This seems to be an issue with the quote symbol:


> u <- life$Country[Encoding(life$Country)!="unknown"][1]
> Encoding(u)
[1] "UTF-8"
> Encoding(u) <- "bytes"
> u
[1] "Korea, Dem. People\\xe2\\x80\\x99s Rep."


I have no clue why this is not an issue on only some platforms.

-pd


> On 7 Dec 2018, at 08:54 , Wolfgang Lenhard <wolfgang.lenhard at uni-wuerzburg.de> wrote:
> 
> Dear list,
> I am getting problems when trying to submit an update of the package 
> cNORM to CRAN. I am developing the package with RStudio and devtools and 
> I am using Travis for automatic testing. The package is tested locally 
> on Win10 and Mac OS X and on Travis with Ubuntu and Mac both for 
> development and release versions of R. All local tests and tests on 
> Travis work flawlessly - no errors, warning or notes. When submitting to 
> CRAN, a note and an error show up on some of the Linux OS (Fedora & 
> Solaris) and Mac OS X, while others display an 'OK' (Win, Debian). The 
> results: https://cran.r-project.org/web/checks/check_results_cNORM.html
> 
> - error: This seems to be related to the vignette with the following 
> message:
>> * checking examples ... ERROR
>> Running examples in ?cNORM-Ex.R? failed
> I can however not identify the location of the error
> 
> - Note: Check: data for non-ASCII characters
> 
> The strange thing is: I checked all data files multiple times. They 
> mainly consist of data.frames with numerics and all colnames  are ASCII. 
> I am not able to replicate the issue. The same is true for the error, 
> which does not show up on Travis and as well locally. And finally, the 
> results state, that the version of the package is 1.0.1, which had been 
> the first submission to CRAN a month ago. The current version of the 
> package is 1.1.1. Could this be the reason for the problem?
> 
> Do you have an idea how to progress with the testing or how to locate 
> the errors? Any help is welcome.
> 
> Best regards,
>     Wolfgang Lenhard
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From li@t@ @ending from dewey@myzen@co@uk  Fri Dec  7 16:20:40 2018
From: li@t@ @ending from dewey@myzen@co@uk (Michael Dewey)
Date: Fri, 7 Dec 2018 15:20:40 +0000
Subject: [R-pkg-devel] 
 Can I put my small data-sets into one .rda file in my CRAN package?
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F6CB019@MBXP02.ds.man.ac.uk>
References: <b71f2e1c-bb0e-c806-111a-f07e69fc9aec@dewey.myzen.co.uk>
 <CAO1zAVbqxqD4=wxh7-FqHGoZbFMLQssA+yuq7-L0Nqh-hNGqYQ@mail.gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F6CB019@MBXP02.ds.man.ac.uk>
Message-ID: <7705b8da-a988-1709-6afb-7b5f01f737be@dewey.myzen.co.uk>

Thanks to both Joris and Georgi for some helpful information. I was 
taken by Joris' aside that combining the data-sets makes more sense if 
they are conceptually related so I have decided to stick with separate 
files.

Michael

On 05/12/2018 16:44, Georgi Boshnakov wrote:
> Further to Joris' email, the help page of data() is very informative.
> If the reason for wishing to combine the datasets together is so that they can be made available in a single command,
> an option might be to create an R source file which loads all datasets, thus giving this option without withdrawing the possibility for  loading the individual datasets.
> 
> Georgi Boshnakov
> 
> 
> -----Original Message-----
> From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Joris Meys
> Sent: 05 December 2018 16:22
> To: lists at dewey.myzen.co.uk
> Cc: R Package Development
> Subject: Re: [R-pkg-devel] Can I put my small data-sets into one .rda file in my CRAN package?
> 
> Hi Michael,
> 
> in the data() function you have to use the name of the rda file, not the
> name of the dataset you need.
> So say you have the datasets validity and data2 in a file called
> alldata.rda, you need to do:
> 
> data(alldata)
> 
> and that will make both validity and data2 available to the user.
> 
> imho it only makes sense to combine data in one .rda file when they're also
> related (for example an dataset with species and the similarity matrix for
> those species).
> 
> Hope this helps
> Cheers
> Joris
> 
> On Wed, Dec 5, 2018 at 4:19 PM Michael Dewey <lists at dewey.myzen.co.uk>
> wrote:
> 
>> At the moment my package (metap) has a number of small data-sets each as
>> a separate .rda file. It works fine. I thought it would be neater to put
>> them all into one file which I called data.rda (original choice of name
>> there).
>>
>> Now when I do R CMD build metap
>> it fails when trying to build the vignette when that executes
>> data(validity)
>> where validity is contained in data.rda.
>>
>> I cannot find anything in writing R extensions which explicitly forbids
>> this but equally nothing which explicitly permits it. Am I missing
>> something? Obviously this is not an important problem and as the title
>> says the solution should work on CRAN too.
>>
>> --
>> Michael
>> http://www.dewey.myzen.co.uk/home.html
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From d@vidhughjone@ @ending from gm@il@com  Fri Dec  7 17:10:18 2018
From: d@vidhughjone@ @ending from gm@il@com (David Hugh-Jones)
Date: Fri, 7 Dec 2018 16:10:18 +0000
Subject: [R-pkg-devel] Suggested package relies on recent R
Message-ID: <CAARY7khQcGUkAP5OOLt4RBSJanVc2A2OOyuef2ffG4RSqthdeg@mail.gmail.com>

Hi,

My package Suggests a package that relies on R >= 3.5.0. My package works
fine with earlier R, though. When travis runs R CMD check on R-oldrel,
therefore, it fails because it can't install the suggested package.

Is this going to stop me submitting to CRAN? I don't really want to require
R 3.5.0 just to satisfy an optional dependency.

Cheers,
David

	[[alternative HTML version deleted]]


From wolfg@ng@lenh@rd @ending from uni-wuerzburg@de  Fri Dec  7 18:45:43 2018
From: wolfg@ng@lenh@rd @ending from uni-wuerzburg@de (Wolfgang Lenhard)
Date: Fri, 7 Dec 2018 18:45:43 +0100
Subject: [R-pkg-devel] 
 Package update submission to CRAN fails on pretest
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F6CB2E7@MBXP02.ds.man.ac.uk>
References: <81d78b1e-afa5-177b-fac5-055025ec96d8@uni-wuerzburg.de>
 <438D2EC9EAFE5946B2D5864670EA468E018F6CB2E7@MBXP02.ds.man.ac.uk>
Message-ID: <db8fb11a-faa6-5af8-9bb4-de86ea2a5b87@uni-wuerzburg.de>

Many thanks for the remark. It seems, it has something to do with 
submitting via the devtools (maybe I did something wrong with tagging 
the prior release). Submitting it manually at least does not result in 
pretest rejection. I guess there is something out of sync which resulted 
in rechecking and old version.

Am 07.12.2018 um 13:46 schrieb Georgi Boshnakov:
> The link you gave, https://cran.r-project.org/web/checks/check_results_cNORM.html,
> is to the check results for the package currently on CRAN and it is indeed v. 1.0.1
> (it is linked from https://CRAN.R-project.org/package=cNORM).
>
> Was this really the link you got from CRAN's pretest? Sometimes they ask if care has been taken about NOTEs/WARNINGs for the current CRAN version, since some tests are not done during submission, but this doesn't seem the case here.
>
> Georgi Boshnakov
>
>
> -----Original Message-----
> From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Wolfgang Lenhard
> Sent: 07 December 2018 07:55
> To: r-package-devel at r-project.org
> Subject: [R-pkg-devel] Package update submission to CRAN fails on pretest
>
> Dear list,
> I am getting problems when trying to submit an update of the package
> cNORM to CRAN. I am developing the package with RStudio and devtools and
> I am using Travis for automatic testing. The package is tested locally
> on Win10 and Mac OS X and on Travis with Ubuntu and Mac both for
> development and release versions of R. All local tests and tests on
> Travis work flawlessly - no errors, warning or notes. When submitting to
> CRAN, a note and an error show up on some of the Linux OS (Fedora &
> Solaris) and Mac OS X, while others display an 'OK' (Win, Debian). The
> results: https://cran.r-project.org/web/checks/check_results_cNORM.html
>
> - error: This seems to be related to the vignette with the following
> message:
>> * checking examples ... ERROR
>> Running examples in ?cNORM-Ex.R? failed
> I can however not identify the location of the error
>
> - Note: Check: data for non-ASCII characters
>
> The strange thing is: I checked all data files multiple times. They
> mainly consist of data.frames with numerics and all colnames? are ASCII.
> I am not able to replicate the issue. The same is true for the error,
> which does not show up on Travis and as well locally. And finally, the
> results state, that the version of the package is 1.0.1, which had been
> the first submission to CRAN a month ago. The current version of the
> package is 1.1.1. Could this be the reason for the problem?
>
> Do you have an idea how to progress with the testing or how to locate
> the errors? Any help is welcome.
>
> Best regards,
>   ??? Wolfgang Lenhard
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Prof. Dr. Wolfgang Lenhard
Lehrstuhl Psychologie IV
Raum 02.130
Wittelsbacherplatz 1
D-97070 W?rzburg

Tel.: 0931 3189791
FAX:  0931 3184891
URL:  https://go.uniwue.de/lenhard
Map:  https://go.uni-wuerzburg.de/3b


From wolfg@ng@lenh@rd @ending from uni-wuerzburg@de  Fri Dec  7 18:47:56 2018
From: wolfg@ng@lenh@rd @ending from uni-wuerzburg@de (Wolfgang Lenhard)
Date: Fri, 7 Dec 2018 18:47:56 +0100
Subject: [R-pkg-devel] 
 Package update submission to CRAN fails on pretest
In-Reply-To: <BEEC124C-5489-4CBE-8030-D0F604F536CE@gmail.com>
References: <81d78b1e-afa5-177b-fac5-055025ec96d8@uni-wuerzburg.de>
 <BEEC124C-5489-4CBE-8030-D0F604F536CE@gmail.com>
Message-ID: <442cea25-9782-64e4-1d37-8b9c145b5786@uni-wuerzburg.de>

Thanks for pointing that out. I rebuilt everything from scratch. Indeed 
I thought, there were no UTF-8 encodings in the data and neither Travis, 
checking it locally and R-Hub (all kinds of OS) resulted in errors.

Am 07.12.2018 um 13:58 schrieb peter dalgaard:
> Hmm, no ERRORs in the CRAN checks at this moment?
>
> Re. utf-8, on Mac OS, the CRAN checks have a note about 90 strings marked as utf8.
>
> I see 57 of them in
>
>
>> life$Country[Encoding(life$Country)!="unknown"]
>   [1] "Korea, Dem. People?s Rep." "Korea, Dem. People?s Rep."
>   [3] "Korea, Dem. People?s Rep." "Korea, Dem. People?s Rep."
>   [5] "Korea, Dem. People?s Rep." "Korea, Dem. People?s Rep."
> ...
>
> and 32 more in "mortality". You go find the remaining 1...
>
> This seems to be an issue with the quote symbol:
>
>
>> u <- life$Country[Encoding(life$Country)!="unknown"][1]
>> Encoding(u)
> [1] "UTF-8"
>> Encoding(u) <- "bytes"
>> u
> [1] "Korea, Dem. People\\xe2\\x80\\x99s Rep."
>
>
> I have no clue why this is not an issue on only some platforms.
>
> -pd
>
>
>> On 7 Dec 2018, at 08:54 , Wolfgang Lenhard <wolfgang.lenhard at uni-wuerzburg.de> wrote:
>>
>> Dear list,
>> I am getting problems when trying to submit an update of the package
>> cNORM to CRAN. I am developing the package with RStudio and devtools and
>> I am using Travis for automatic testing. The package is tested locally
>> on Win10 and Mac OS X and on Travis with Ubuntu and Mac both for
>> development and release versions of R. All local tests and tests on
>> Travis work flawlessly - no errors, warning or notes. When submitting to
>> CRAN, a note and an error show up on some of the Linux OS (Fedora &
>> Solaris) and Mac OS X, while others display an 'OK' (Win, Debian). The
>> results: https://cran.r-project.org/web/checks/check_results_cNORM.html
>>
>> - error: This seems to be related to the vignette with the following
>> message:
>>> * checking examples ... ERROR
>>> Running examples in ?cNORM-Ex.R? failed
>> I can however not identify the location of the error
>>
>> - Note: Check: data for non-ASCII characters
>>
>> The strange thing is: I checked all data files multiple times. They
>> mainly consist of data.frames with numerics and all colnames  are ASCII.
>> I am not able to replicate the issue. The same is true for the error,
>> which does not show up on Travis and as well locally. And finally, the
>> results state, that the version of the package is 1.0.1, which had been
>> the first submission to CRAN a month ago. The current version of the
>> package is 1.1.1. Could this be the reason for the problem?
>>
>> Do you have an idea how to progress with the testing or how to locate
>> the errors? Any help is welcome.
>>
>> Best regards,
>>      Wolfgang Lenhard
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Prof. Dr. Wolfgang Lenhard
Lehrstuhl Psychologie IV
Raum 02.130
Wittelsbacherplatz 1
D-97070 W?rzburg

Tel.: 0931 3189791
FAX:  0931 3184891
URL:  https://go.uniwue.de/lenhard
Map:  https://go.uni-wuerzburg.de/3b


From dm@rcelino @ending from live@com  Fri Dec  7 20:27:21 2018
From: dm@rcelino @ending from live@com (Daniel Marcelino)
Date: Fri, 7 Dec 2018 19:27:21 +0000
Subject: [R-pkg-devel] 
 Package update submission to CRAN fails on pretest
In-Reply-To: <db8fb11a-faa6-5af8-9bb4-de86ea2a5b87@uni-wuerzburg.de>
References: <81d78b1e-afa5-177b-fac5-055025ec96d8@uni-wuerzburg.de>
 <438D2EC9EAFE5946B2D5864670EA468E018F6CB2E7@MBXP02.ds.man.ac.uk>,
 <db8fb11a-faa6-5af8-9bb4-de86ea2a5b87@uni-wuerzburg.de>
Message-ID: <CY4PR19MB01511BF3B5CCF9429A6E14E1BBAA0@CY4PR19MB0151.namprd19.prod.outlook.com>

Daniel Marcelino

"Small steps toward a much better world"
________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Wolfgang Lenhard <wolfgang.lenhard at uni-wuerzburg.de>
Sent: December 7, 2018 2:15 PM
To: Georgi Boshnakov; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel]  Package update submission to CRAN fails on pretest

Many thanks for the remark. It seems, it has something to do with
submitting via the devtools (maybe I did something wrong with tagging
the prior release). Submitting it manually at least does not result in
pretest rejection. I guess there is something out of sync which resulted
in rechecking and old version.

Am 07.12.2018 um 13:46 schrieb Georgi Boshnakov:
&gt; The link you gave, https://cran.r-project.org/web/checks/check_results_cNORM.html,
&gt; is to the check results for the package currently on CRAN and it is indeed v. 1.0.1
&gt; (it is linked from https://CRAN.R-project.org/package=cNORM).
&gt;
&gt; Was this really the link you got from CRAN's pretest? Sometimes they ask if care has been taken about NOTEs/WARNINGs for the current CRAN version, since some tests are not done during submission, but this doesn't seem the case here.
&gt;
&gt; Georgi Boshnakov
&gt;
&gt;
&gt; -----Original Message-----
&gt; From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Wolfgang Lenhard
&gt; Sent: 07 December 2018 07:55
&gt; To: r-package-devel at r-project.org
&gt; Subject: [R-pkg-devel] Package update submission to CRAN fails on pretest
&gt;
&gt; Dear list,
&gt; I am getting problems when trying to submit an update of the package
&gt; cNORM to CRAN. I am developing the package with RStudio and devtools and
&gt; I am using Travis for automatic testing. The package is tested locally
&gt; on Win10 and Mac OS X and on Travis with Ubuntu and Mac both for
&gt; development and release versions of R. All local tests and tests on
&gt; Travis work flawlessly - no errors, warning or notes. When submitting to
&gt; CRAN, a note and an error show up on some of the Linux OS (Fedora &amp;
&gt; Solaris) and Mac OS X, while others display an 'OK' (Win, Debian). The
&gt; results: https://cran.r-project.org/web/checks/check_results_cNORM.html
&gt;
&gt; - error: This seems to be related to the vignette with the following
&gt; message:
&gt;&gt; * checking examples ... ERROR
&gt;&gt; Running examples in ?cNORM-Ex.R? failed
&gt; I can however not identify the location of the error
&gt;
&gt; - Note: Check: data for non-ASCII characters
&gt;
&gt; The strange thing is: I checked all data files multiple times. They
&gt; mainly consist of data.frames with numerics and all colnames  are ASCII.
&gt; I am not able to replicate the issue. The same is true for the error,
&gt; which does not show up on Travis and as well locally. And finally, the
&gt; results state, that the version of the package is 1.0.1, which had been
&gt; the first submission to CRAN a month ago. The current version of the
&gt; package is 1.1.1. Could this be the reason for the problem?
&gt;
&gt; Do you have an idea how to progress with the testing or how to locate
&gt; the errors? Any help is welcome.
&gt;
&gt; Best regards,
&gt;       Wolfgang Lenhard
&gt;
&gt;
&gt;       [[alternative HTML version deleted]]
&gt;
&gt; ______________________________________________
&gt; R-package-devel at r-project.org mailing list
&gt; https://stat.ethz.ch/mailman/listinfo/r-package-devel

--
Prof. Dr. Wolfgang Lenhard
Lehrstuhl Psychologie IV
Raum 02.130
Wittelsbacherplatz 1
D-97070 W?rzburg

Tel.: 0931 3189791
FAX:  0931 3184891
URL:  https://go.uniwue.de/lenhard
Map:  https://go.uni-wuerzburg.de/3b

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel
</wolfgang.lenhard at uni-wuerzburg.de></r-package-devel-bounces at r-project.org>

From h@wickh@m @ending from gm@il@com  Sat Dec  8 15:28:01 2018
From: h@wickh@m @ending from gm@il@com (Hadley Wickham)
Date: Sat, 8 Dec 2018 07:28:01 -0700
Subject: [R-pkg-devel] Suggested package relies on recent R
In-Reply-To: <CAARY7khQcGUkAP5OOLt4RBSJanVc2A2OOyuef2ffG4RSqthdeg@mail.gmail.com>
References: <CAARY7khQcGUkAP5OOLt4RBSJanVc2A2OOyuef2ffG4RSqthdeg@mail.gmail.com>
Message-ID: <CABdHhvG0dJOvgyUK7e_oO5pL1Y88_XFyRVfiNpeOM61qeGniPA@mail.gmail.com>

Can you just set _R_CHECK_FORCE_SUGGESTS_=false?

env:
  global:
  # don't treat missing suggested packages as error
  - _R_CHECK_FORCE_SUGGESTS_=false

I am reasonably certain that is what CRAN uses.

Hadley

On Fri, Dec 7, 2018 at 9:11 AM David Hugh-Jones
<davidhughjones at gmail.com> wrote:
>
> Hi,
>
> My package Suggests a package that relies on R >= 3.5.0. My package works
> fine with earlier R, though. When travis runs R CMD check on R-oldrel,
> therefore, it fails because it can't install the suggested package.
>
> Is this going to stop me submitting to CRAN? I don't really want to require
> R 3.5.0 just to satisfy an optional dependency.
>
> Cheers,
> David
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
http://hadley.nz


From h@wickh@m @ending from gm@il@com  Sat Dec  8 15:31:20 2018
From: h@wickh@m @ending from gm@il@com (Hadley Wickham)
Date: Sat, 8 Dec 2018 07:31:20 -0700
Subject: [R-pkg-devel] 
 Package update submission to CRAN fails on pretest
In-Reply-To: <db8fb11a-faa6-5af8-9bb4-de86ea2a5b87@uni-wuerzburg.de>
References: <81d78b1e-afa5-177b-fac5-055025ec96d8@uni-wuerzburg.de>
 <438D2EC9EAFE5946B2D5864670EA468E018F6CB2E7@MBXP02.ds.man.ac.uk>
 <db8fb11a-faa6-5af8-9bb4-de86ea2a5b87@uni-wuerzburg.de>
Message-ID: <CABdHhvGQU8ddqCTSN6wLEjc1irVAo5R8k=3-CJ7uwmS6-3q8jw@mail.gmail.com>

You might try reinstalling devtools and dependencies - there was
unfortunately a brief combination of versions that lead to build()
failing to overwrite existing files.

Hadley
On Fri, Dec 7, 2018 at 10:46 AM Wolfgang Lenhard
<wolfgang.lenhard at uni-wuerzburg.de> wrote:
>
> Many thanks for the remark. It seems, it has something to do with
> submitting via the devtools (maybe I did something wrong with tagging
> the prior release). Submitting it manually at least does not result in
> pretest rejection. I guess there is something out of sync which resulted
> in rechecking and old version.
>
> Am 07.12.2018 um 13:46 schrieb Georgi Boshnakov:
> > The link you gave, https://cran.r-project.org/web/checks/check_results_cNORM.html,
> > is to the check results for the package currently on CRAN and it is indeed v. 1.0.1
> > (it is linked from https://CRAN.R-project.org/package=cNORM).
> >
> > Was this really the link you got from CRAN's pretest? Sometimes they ask if care has been taken about NOTEs/WARNINGs for the current CRAN version, since some tests are not done during submission, but this doesn't seem the case here.
> >
> > Georgi Boshnakov
> >
> >
> > -----Original Message-----
> > From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Wolfgang Lenhard
> > Sent: 07 December 2018 07:55
> > To: r-package-devel at r-project.org
> > Subject: [R-pkg-devel] Package update submission to CRAN fails on pretest
> >
> > Dear list,
> > I am getting problems when trying to submit an update of the package
> > cNORM to CRAN. I am developing the package with RStudio and devtools and
> > I am using Travis for automatic testing. The package is tested locally
> > on Win10 and Mac OS X and on Travis with Ubuntu and Mac both for
> > development and release versions of R. All local tests and tests on
> > Travis work flawlessly - no errors, warning or notes. When submitting to
> > CRAN, a note and an error show up on some of the Linux OS (Fedora &
> > Solaris) and Mac OS X, while others display an 'OK' (Win, Debian). The
> > results: https://cran.r-project.org/web/checks/check_results_cNORM.html
> >
> > - error: This seems to be related to the vignette with the following
> > message:
> >> * checking examples ... ERROR
> >> Running examples in ?cNORM-Ex.R? failed
> > I can however not identify the location of the error
> >
> > - Note: Check: data for non-ASCII characters
> >
> > The strange thing is: I checked all data files multiple times. They
> > mainly consist of data.frames with numerics and all colnames  are ASCII.
> > I am not able to replicate the issue. The same is true for the error,
> > which does not show up on Travis and as well locally. And finally, the
> > results state, that the version of the package is 1.0.1, which had been
> > the first submission to CRAN a month ago. The current version of the
> > package is 1.1.1. Could this be the reason for the problem?
> >
> > Do you have an idea how to progress with the testing or how to locate
> > the errors? Any help is welcome.
> >
> > Best regards,
> >       Wolfgang Lenhard
> >
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
> Prof. Dr. Wolfgang Lenhard
> Lehrstuhl Psychologie IV
> Raum 02.130
> Wittelsbacherplatz 1
> D-97070 W?rzburg
>
> Tel.: 0931 3189791
> FAX:  0931 3184891
> URL:  https://go.uniwue.de/lenhard
> Map:  https://go.uni-wuerzburg.de/3b
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
http://hadley.nz


From murdoch@dunc@n @ending from gm@il@com  Sat Dec  8 15:36:22 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Sat, 8 Dec 2018 09:36:22 -0500
Subject: [R-pkg-devel] Suggested package relies on recent R
In-Reply-To: <CABdHhvG0dJOvgyUK7e_oO5pL1Y88_XFyRVfiNpeOM61qeGniPA@mail.gmail.com>
References: <CAARY7khQcGUkAP5OOLt4RBSJanVc2A2OOyuef2ffG4RSqthdeg@mail.gmail.com>
 <CABdHhvG0dJOvgyUK7e_oO5pL1Y88_XFyRVfiNpeOM61qeGniPA@mail.gmail.com>
Message-ID: <5e85c8ee-6be6-c64e-96c7-4359ed9f6bfe@gmail.com>

On 08/12/2018 9:28 AM, Hadley Wickham wrote:
> Can you just set _R_CHECK_FORCE_SUGGESTS_=false?
> 
> env:
>    global:
>    # don't treat missing suggested packages as error
>    - _R_CHECK_FORCE_SUGGESTS_=false
> 
> I am reasonably certain that is what CRAN uses.

Also make sure that examples fail gracefully if the suggested package is 
not present, i.e. wrap uses of the suggested package in

if (requireNamespace(...)) { ... }

Duncan Murdoch


> 
> Hadley
> 
> On Fri, Dec 7, 2018 at 9:11 AM David Hugh-Jones
> <davidhughjones at gmail.com> wrote:
>>
>> Hi,
>>
>> My package Suggests a package that relies on R >= 3.5.0. My package works
>> fine with earlier R, though. When travis runs R CMD check on R-oldrel,
>> therefore, it fails because it can't install the suggested package.
>>
>> Is this going to stop me submitting to CRAN? I don't really want to require
>> R 3.5.0 just to satisfy an optional dependency.


From d@vidhughjone@ @ending from gm@il@com  Sat Dec  8 15:41:03 2018
From: d@vidhughjone@ @ending from gm@il@com (David Hugh-Jones)
Date: Sat, 8 Dec 2018 14:41:03 +0000
Subject: [R-pkg-devel] Suggested package relies on recent R
In-Reply-To: <5e85c8ee-6be6-c64e-96c7-4359ed9f6bfe@gmail.com>
References: <CAARY7khQcGUkAP5OOLt4RBSJanVc2A2OOyuef2ffG4RSqthdeg@mail.gmail.com>
 <CABdHhvG0dJOvgyUK7e_oO5pL1Y88_XFyRVfiNpeOM61qeGniPA@mail.gmail.com>
 <5e85c8ee-6be6-c64e-96c7-4359ed9f6bfe@gmail.com>
Message-ID: <CAARY7ki+oZDnXTenHnT6ZW=E5ceS3K2f29uzeFy6=Ga4wyDf_w@mail.gmail.com>

Thanks guys. If CRAN already sets FORCE_SUGGESTS = false, then I think I
don't have a problem.
David


On Sat, 8 Dec 2018 at 14:36, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 08/12/2018 9:28 AM, Hadley Wickham wrote:
> > Can you just set _R_CHECK_FORCE_SUGGESTS_=false?
> >
> > env:
> >    global:
> >    # don't treat missing suggested packages as error
> >    - _R_CHECK_FORCE_SUGGESTS_=false
> >
> > I am reasonably certain that is what CRAN uses.
>
> Also make sure that examples fail gracefully if the suggested package is
> not present, i.e. wrap uses of the suggested package in
>
> if (requireNamespace(...)) { ... }
>
> Duncan Murdoch
>
>
> >
> > Hadley
> >
> > On Fri, Dec 7, 2018 at 9:11 AM David Hugh-Jones
> > <davidhughjones at gmail.com> wrote:
> >>
> >> Hi,
> >>
> >> My package Suggests a package that relies on R >= 3.5.0. My package
> works
> >> fine with earlier R, though. When travis runs R CMD check on R-oldrel,
> >> therefore, it fails because it can't install the suggested package.
> >>
> >> Is this going to stop me submitting to CRAN? I don't really want to
> require
> >> R 3.5.0 just to satisfy an optional dependency.
>
>
>

	[[alternative HTML version deleted]]


From edd @ending from debi@n@org  Sat Dec  8 16:17:02 2018
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Sat, 8 Dec 2018 09:17:02 -0600
Subject: [R-pkg-devel] Suggested package relies on recent R
In-Reply-To: <CAARY7ki+oZDnXTenHnT6ZW=E5ceS3K2f29uzeFy6=Ga4wyDf_w@mail.gmail.com>
References: <CAARY7khQcGUkAP5OOLt4RBSJanVc2A2OOyuef2ffG4RSqthdeg@mail.gmail.com>
 <CABdHhvG0dJOvgyUK7e_oO5pL1Y88_XFyRVfiNpeOM61qeGniPA@mail.gmail.com>
 <5e85c8ee-6be6-c64e-96c7-4359ed9f6bfe@gmail.com>
 <CAARY7ki+oZDnXTenHnT6ZW=E5ceS3K2f29uzeFy6=Ga4wyDf_w@mail.gmail.com>
Message-ID: <23563.57454.231471.88527@rob.eddelbuettel.com>


On 8 December 2018 at 14:41, David Hugh-Jones wrote:
| Thanks guys. If CRAN already sets FORCE_SUGGESTS = false, then I think I
| don't have a problem.

I think you still do as long as you ignore Duncan's advice.  It's not "just"
about skirting CRAN tests and rules, it is about doing packaging right.

For that, Suggests != Depends and you should test presence of optional
ppackage just like Duncan showed you.

Dirk


| David
| 
| 
| On Sat, 8 Dec 2018 at 14:36, Duncan Murdoch <murdoch.duncan at gmail.com>
| wrote:
| 
| > On 08/12/2018 9:28 AM, Hadley Wickham wrote:
| > > Can you just set _R_CHECK_FORCE_SUGGESTS_=false?
| > >
| > > env:
| > >    global:
| > >    # don't treat missing suggested packages as error
| > >    - _R_CHECK_FORCE_SUGGESTS_=false
| > >
| > > I am reasonably certain that is what CRAN uses.
| >
| > Also make sure that examples fail gracefully if the suggested package is
| > not present, i.e. wrap uses of the suggested package in
| >
| > if (requireNamespace(...)) { ... }


-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From d@vidhughjone@ @ending from gm@il@com  Sat Dec  8 16:56:16 2018
From: d@vidhughjone@ @ending from gm@il@com (David Hugh-Jones)
Date: Sat, 8 Dec 2018 15:56:16 +0000
Subject: [R-pkg-devel] Suggested package relies on recent R
In-Reply-To: <23563.57454.231471.88527@rob.eddelbuettel.com>
References: <CAARY7khQcGUkAP5OOLt4RBSJanVc2A2OOyuef2ffG4RSqthdeg@mail.gmail.com>
 <CABdHhvG0dJOvgyUK7e_oO5pL1Y88_XFyRVfiNpeOM61qeGniPA@mail.gmail.com>
 <5e85c8ee-6be6-c64e-96c7-4359ed9f6bfe@gmail.com>
 <CAARY7ki+oZDnXTenHnT6ZW=E5ceS3K2f29uzeFy6=Ga4wyDf_w@mail.gmail.com>
 <23563.57454.231471.88527@rob.eddelbuettel.com>
Message-ID: <CAARY7kiKo4C1J+VqK4ZHHcyy-KTmvCSQYVPKgFSd2pLNnDA-2A@mail.gmail.com>

Yes, I certainly will do that. I've checked on win-builder and the package
seems to pass, so my examples seem to be in good order.
David


On Sat, 8 Dec 2018 at 15:17, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 8 December 2018 at 14:41, David Hugh-Jones wrote:
> | Thanks guys. If CRAN already sets FORCE_SUGGESTS = false, then I think I
> | don't have a problem.
>
> I think you still do as long as you ignore Duncan's advice.  It's not
> "just"
> about skirting CRAN tests and rules, it is about doing packaging right.
>
> For that, Suggests != Depends and you should test presence of optional
> ppackage just like Duncan showed you.
>
> Dirk
>
>
> | David
> |
> |
> | On Sat, 8 Dec 2018 at 14:36, Duncan Murdoch <murdoch.duncan at gmail.com>
> | wrote:
> |
> | > On 08/12/2018 9:28 AM, Hadley Wickham wrote:
> | > > Can you just set _R_CHECK_FORCE_SUGGESTS_=false?
> | > >
> | > > env:
> | > >    global:
> | > >    # don't treat missing suggested packages as error
> | > >    - _R_CHECK_FORCE_SUGGESTS_=false
> | > >
> | > > I am reasonably certain that is what CRAN uses.
> | >
> | > Also make sure that examples fail gracefully if the suggested package
> is
> | > not present, i.e. wrap uses of the suggested package in
> | >
> | > if (requireNamespace(...)) { ... }
>
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From wolfg@ng@lenh@rd @ending from uni-wuerzburg@de  Sat Dec  8 20:20:53 2018
From: wolfg@ng@lenh@rd @ending from uni-wuerzburg@de (Wolfgang Lenhard)
Date: Sat, 8 Dec 2018 20:20:53 +0100
Subject: [R-pkg-devel] 
 Package update submission to CRAN fails on pretest
In-Reply-To: <CABdHhvGQU8ddqCTSN6wLEjc1irVAo5R8k=3-CJ7uwmS6-3q8jw@mail.gmail.com>
References: <81d78b1e-afa5-177b-fac5-055025ec96d8@uni-wuerzburg.de>
 <438D2EC9EAFE5946B2D5864670EA468E018F6CB2E7@MBXP02.ds.man.ac.uk>
 <db8fb11a-faa6-5af8-9bb4-de86ea2a5b87@uni-wuerzburg.de>
 <CABdHhvGQU8ddqCTSN6wLEjc1irVAo5R8k=3-CJ7uwmS6-3q8jw@mail.gmail.com>
Message-ID: <dda9fc4a-a51c-c040-9280-be66a61f0a74@uni-wuerzburg.de>

Dear Hadley,
many thanks for your comment and much more for your fantastic tutorial 
and packages! I essentially learned (and still learn) package 
development by your tutorial. In the concrete case, changing some 
settings finally did it and devtools worked like charm. I want to thank 
you for your really great work.

There was a strange thing, though, that I do not yet understand. The 
submission failed on some systems (fedora and Mac OS X; not on Win and 
Ubuntu) because of errors building the vignette. Adding rmarkdown to 
imports in the description file solved the pretest rejection and the new 
version of cNORM is on CRAN, but now, I have the following note:
> checking dependencies in R code ... NOTE
> Namespace in Imports field not imported from: ?rmarkdown?
> ??All declared Imports should be used.

Apart from the note, it works now. Maybe, I remove the code from the 
vignette in future releases and.

Best regards,
Wolfgang

Am 08.12.2018 um 15:31 schrieb Hadley Wickham:
> You might try reinstalling devtools and dependencies - there was
> unfortunately a brief combination of versions that lead to build()
> failing to overwrite existing files.
>
> Hadley
> On Fri, Dec 7, 2018 at 10:46 AM Wolfgang Lenhard
> <wolfgang.lenhard at uni-wuerzburg.de> wrote:
>> Many thanks for the remark. It seems, it has something to do with
>> submitting via the devtools (maybe I did something wrong with tagging
>> the prior release). Submitting it manually at least does not result in
>> pretest rejection. I guess there is something out of sync which resulted
>> in rechecking and old version.
>>
>> Am 07.12.2018 um 13:46 schrieb Georgi Boshnakov:
>>> The link you gave, https://cran.r-project.org/web/checks/check_results_cNORM.html,
>>> is to the check results for the package currently on CRAN and it is indeed v. 1.0.1
>>> (it is linked from https://CRAN.R-project.org/package=cNORM).
>>>
>>> Was this really the link you got from CRAN's pretest? Sometimes they ask if care has been taken about NOTEs/WARNINGs for the current CRAN version, since some tests are not done during submission, but this doesn't seem the case here.
>>>
>>> Georgi Boshnakov
>>>
>>>
>>> -----Original Message-----
>>> From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Wolfgang Lenhard
>>> Sent: 07 December 2018 07:55
>>> To: r-package-devel at r-project.org
>>> Subject: [R-pkg-devel] Package update submission to CRAN fails on pretest
>>>
>>> Dear list,
>>> I am getting problems when trying to submit an update of the package
>>> cNORM to CRAN. I am developing the package with RStudio and devtools and
>>> I am using Travis for automatic testing. The package is tested locally
>>> on Win10 and Mac OS X and on Travis with Ubuntu and Mac both for
>>> development and release versions of R. All local tests and tests on
>>> Travis work flawlessly - no errors, warning or notes. When submitting to
>>> CRAN, a note and an error show up on some of the Linux OS (Fedora &
>>> Solaris) and Mac OS X, while others display an 'OK' (Win, Debian). The
>>> results: https://cran.r-project.org/web/checks/check_results_cNORM.html
>>>
>>> - error: This seems to be related to the vignette with the following
>>> message:
>>>> * checking examples ... ERROR
>>>> Running examples in ?cNORM-Ex.R? failed
>>> I can however not identify the location of the error
>>>
>>> - Note: Check: data for non-ASCII characters
>>>
>>> The strange thing is: I checked all data files multiple times. They
>>> mainly consist of data.frames with numerics and all colnames  are ASCII.
>>> I am not able to replicate the issue. The same is true for the error,
>>> which does not show up on Travis and as well locally. And finally, the
>>> results state, that the version of the package is 1.0.1, which had been
>>> the first submission to CRAN a month ago. The current version of the
>>> package is 1.1.1. Could this be the reason for the problem?
>>>
>>> Do you have an idea how to progress with the testing or how to locate
>>> the errors? Any help is welcome.
>>>
>>> Best regards,
>>>        Wolfgang Lenhard
>>>
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> --
>> Prof. Dr. Wolfgang Lenhard
>> Lehrstuhl Psychologie IV
>> Raum 02.130
>> Wittelsbacherplatz 1
>> D-97070 W?rzburg
>>
>> Tel.: 0931 3189791
>> FAX:  0931 3184891
>> URL:  https://go.uniwue.de/lenhard
>> Map:  https://go.uni-wuerzburg.de/3b
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>


From r@jendr@@pingte @ending from or@cle@com  Tue Dec 11 20:48:37 2018
From: r@jendr@@pingte @ending from or@cle@com (Rajendra Pingte)
Date: Tue, 11 Dec 2018 11:48:37 -0800
Subject: [R-pkg-devel] 
 [CRAN-pretest-archived] CRAN submission ROracle 1.3-2
In-Reply-To: <010b2f34-0a90-1544-915b-2ccb03da881b@oracle.com>
References: <20181204204547.3D683160B2C@xmpalantir.wu.ac.at>
 <01d48c5b$Blat.v3.2.16$53a31c30$3182064e5@mail.statistik.tu-dortmund.de>
 <701f23f1-c8bf-2259-456e-6453485c9a77@oracle.com>
 <7cc7f519-1e89-fe13-d52b-325c50ab01b7@oracle.com>
 <010b2f34-0a90-1544-915b-2ccb03da881b@oracle.com>
Message-ID: <9dcccee1-1145-7cce-3523-3804216b3a34@oracle.com>

Hi,

I like to know how to resolve this? Oracle client libraries have to be 
downloaded in order to install ROracle package.

Thanks
Rajendra

On 12/10/2018 7:48 AM, Rajendra Pingte wrote:
>
> Hi,
>
> Any update on this?
>
> Thanks
> Rajendra
> On 12/6/2018 10:15 AM, Rajendra Pingte wrote:
>>
>> Hi,
>>
>> Also, wanted to pint out that configure script seems to look for 
>> '^M., as shown below:
>>
>> # Set up the scripts for CONFIG_FILES section.
>> # No need to generate them if there are no CONFIG_FILES.
>> # This happens for instance with `./config.status config.h'.
>> if test -n "$CONFIG_FILES"; then
>>
>>
>> ac_cr='^M'
>> ac_cs_awk_cr=`$AWK 'BEGIN { print "a\rb" }' </dev/null 2>/dev/null`
>> if test "$ac_cs_awk_cr" = "a${ac_cr}b"; then
>> ? ac_cs_awk_cr='\\r'
>> else
>> ? ac_cs_awk_cr=$ac_cr
>> fi
>>
>> Please let me know?
>>
>> Thanks
>> Rajendra
>> On 12/5/2018 7:34 AM, Rajendra Pingte wrote:
>>>
>>> Hi,
>>>
>>> We will not be able to verify installation on Windows with ROracle 
>>> package as it requires Oracle Database Client. One also needs to 
>>> setup the location of the library OCI_LIB64, which is call 
>>> documented in INSTALL. There is no easy way to download the Oracle 
>>> Database Client other than getting it from OTN: 
>>> https://www.oracle.com/technetwork/topics/winx64soft-089540.html
>>>
>>> It has various versions. How can we by pass this check on CRAN? We 
>>> are working on no-click download of Oracle DB client.
>>>
>>> Thanks
>>> Rajendra
>>> On 12/4/2018 9:28 PM, ligges at statistik.tu-dortmund.de wrote:
>>>> Dear maintainer,
>>>>   
>>>> package ROracle_1.3-2.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
>>>> Windows:<https://urldefense.proofpoint.com/v2/url?u=https-3A__win-2Dbuilder.r-2Dproject.org_incoming-5Fpretest_ROracle-5F1.3-2D2-5F20181204-5F214547_Windows_00check.log&d=DwICAw&c=RoP1YumCXCgaWHvlZYR8PZh8Bv7qIrMUB65eapI_JnE&r=NlZZlfpgVvHUlbdDm824ek-8oDW5SzsVQZWw3jApv-8&m=1XnAYHVX7BGvPf2Sb48bvBqxvwD9hq5UYS5brDBKqzU&s=ANo6DpMhwm62weOctj7W07-lm3O-CDRex1H93n04TkI&e=>
>>>> Status: 1 ERROR, 1 NOTE
>>>> Debian:<https://urldefense.proofpoint.com/v2/url?u=https-3A__win-2Dbuilder.r-2Dproject.org_incoming-5Fpretest_ROracle-5F1.3-2D2-5F20181204-5F214547_Debian_00check.log&d=DwICAw&c=RoP1YumCXCgaWHvlZYR8PZh8Bv7qIrMUB65eapI_JnE&r=NlZZlfpgVvHUlbdDm824ek-8oDW5SzsVQZWw3jApv-8&m=1XnAYHVX7BGvPf2Sb48bvBqxvwD9hq5UYS5brDBKqzU&s=L7TdvkmyIDRD4iJNeZMlQIOW2q0iC2Uun62aSkhSo-Y&e=>
>>>> Status: 1 WARNING, 1 NOTE
>>>>   
>>>> Last released version's CRAN status: ERROR: 3, OK: 4
>>>> See:<https://urldefense.proofpoint.com/v2/url?u=https-3A__CRAN.R-2Dproject.org_web_checks_check-5Fresults-5FROracle.html&d=DwICAw&c=RoP1YumCXCgaWHvlZYR8PZh8Bv7qIrMUB65eapI_JnE&r=NlZZlfpgVvHUlbdDm824ek-8oDW5SzsVQZWw3jApv-8&m=1XnAYHVX7BGvPf2Sb48bvBqxvwD9hq5UYS5brDBKqzU&s=tGY-wzUoUAuRuKguUxbCZxD-2ZWQPE_ZL0CkLNQN3oI&e=>
>>>>   
>>>> CRAN Web:<https://urldefense.proofpoint.com/v2/url?u=https-3A__cran.r-2Dproject.org_package-3DROracle&d=DwICAw&c=RoP1YumCXCgaWHvlZYR8PZh8Bv7qIrMUB65eapI_JnE&r=NlZZlfpgVvHUlbdDm824ek-8oDW5SzsVQZWw3jApv-8&m=1XnAYHVX7BGvPf2Sb48bvBqxvwD9hq5UYS5brDBKqzU&s=1h7-Un3ySBYCuY3lJg_Po2k-LCbdrOlLWJ6AGozJjpQ&e=>
>>>>   
>>>> Please fix all problems and resubmit a fixed version via the webform.
>>>> If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
>>>> <https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwICAw&c=RoP1YumCXCgaWHvlZYR8PZh8Bv7qIrMUB65eapI_JnE&r=NlZZlfpgVvHUlbdDm824ek-8oDW5SzsVQZWw3jApv-8&m=1XnAYHVX7BGvPf2Sb48bvBqxvwD9hq5UYS5brDBKqzU&s=egI7FRKuOPNjS8e1-Dg4T8RuEIrOkbgaWAMw5bS40ME&e=>
>>>> If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
>>>>   
>>>> More details are given in the directory:
>>>> <https://urldefense.proofpoint.com/v2/url?u=https-3A__win-2Dbuilder.r-2Dproject.org_incoming-5Fpretest_ROracle-5F1.3-2D2-5F20181204-5F214547_&d=DwICAw&c=RoP1YumCXCgaWHvlZYR8PZh8Bv7qIrMUB65eapI_JnE&r=NlZZlfpgVvHUlbdDm824ek-8oDW5SzsVQZWw3jApv-8&m=1XnAYHVX7BGvPf2Sb48bvBqxvwD9hq5UYS5brDBKqzU&s=OTv_08965QsmhVjsk7UfsN3x3XUXezTgQ48zi38tq88&e=>
>>>> The files will be removed after roughly 7 days.
>>>>   
>>>> *** Strong rev. depends ***: ora
>>>>   
>>>> Best regards,
>>>> CRAN teams' auto-check service
>>>>
>>>> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
>>>> Check: CRAN incoming feasibility, Result: NOTE
>>>>    Maintainer: 'Rajendra S. Pingte<rajendra.pingte at oracle.com>'
>>>>    
>>>>    The Date field is over a month old.
>>>>
>>>> Flavor: r-devel-windows-ix86+x86_64
>>>> Check: whether package can be installed, Result: ERROR
>>>>    Installation failed.
>>>>    See 'd:/RCompile/CRANincoming/R-devel/ROracle.Rcheck/00install.out' for details.
>>>>
>>>> Flavor: r-devel-linux-x86_64-debian-gcc
>>>> Check: line endings in shell scripts, Result: WARNING
>>>>    Found the following shell script(s) with CR or CRLF line endings:
>>>>      configure
>>>>    Non-Windows OSes require LF line endings.

	[[alternative HTML version deleted]]


From profjcn@@h @ending from gm@il@com  Wed Dec 12 15:06:33 2018
From: profjcn@@h @ending from gm@il@com (J C Nash)
Date: Wed, 12 Dec 2018 09:06:33 -0500
Subject: [R-pkg-devel] Collaboration request to build R wrapper for C
 program(s)
In-Reply-To: <CALivmgaPPFidqtKMy_EGCsVVzXCSLjT-frL4dMMLLba+2A6T0g@mail.gmail.com>
References: <CALivmgaPPFidqtKMy_EGCsVVzXCSLjT-frL4dMMLLba+2A6T0g@mail.gmail.com>
Message-ID: <a94ce9db-d827-4352-2835-cc6923e636cb@gmail.com>

There is a quite well-developed but not terribly large C program
for conjugate gradients and similar approaches to optimization I would
like to wrap in a package for use in R. I would then build this into the
optimx package I maintain. I suspect that the approach may turn out to be
one of the most efficient for large-n problems.

However, my skills with C and C++ are essentially knowing how to mimic
existing code, and I would welcome collaboration or help to build the
package, likely using Rcpp. Possibly this would be a suitable term
project in a stat. computing course. I'm more than happy to share my
expertise on the optimization side, or with other computing languages,
particularly Fortran.

To reduce noise on the list, I'll suggest off-line contact to the
address above (profjcnash _at_ gmail.com).

Best, JN


From emm@nuel@blondel1 @ending from gm@il@com  Sun Dec 16 22:35:51 2018
From: emm@nuel@blondel1 @ending from gm@il@com (Emmanuel Blondel (GMAIL))
Date: Sun, 16 Dec 2018 22:35:51 +0100
Subject: [R-pkg-devel] Issue with package check on Debian, XML issue?
In-Reply-To: <01d4955b$Blat.v3.2.16$e1bec255$feb45776@mail.statistik.tu-dortmund.de>
References: <01d4955b$Blat.v3.2.16$e1bec255$feb45776@mail.statistik.tu-dortmund.de>
Message-ID: <a6f42f14-d139-9e3b-dd9e-e2dd867c21ff@gmail.com>

Dear all, I've received some notice from CRAN to fix issues in geometa 
pkg i'm maintaining. I've fixed some issue, and tried to upload a 
package package. I've tested the package on x86_64-pc-linux-gnu (64-bit) 
/ Ubuntu 14.04.5 LTS, and Windows OS. For both, R CMD check goes well. 
Here results for Win.

https://win-builder.r-project.org/7ZXV14p14Spe
https://win-builder.r-project.org/RwX93ZPJuMr8
https://win-builder.r-project.org/9O8W7dYJLlOW

I've received pre-archived message here below stating that they are 
still issues on Debian.

I receive? 2 messages that let me suspect this is due to an issue with 
XML package:

Error: package or namespace load failed for ?XML?:

 ?.onLoad failed in loadNamespace() for ?XML?, details:

 ??call: dyn.load(file, DLLpath = DLLpath, ...)

 ??error: unable to load shared object 
?/home/hornik/tmp/R.check/r-devel-clang/Work/build/Packages/XML/libs/XML.so?:

 ??/home/hornik/tmp/R.check/r-devel-clang/Work/build/Packages/XML/libs/XML.so: failed to map segment from shared object

(this message also appears in this moment for XML package checks 
https://cran.r-project.org/web/checks/check_results_XML.html)

and

Unknown IO errorfailed to load external entity


Would someone have any idea what could be wrong? I'm stuck on that.

Thanks in advance for your help,

Best,
Emmanuel


-------- Message transf?r? --------
Sujet?: 	[CRAN-pretest-archived] CRAN submission geometa 0.4-0
Date?: 	Sun, 16 Dec 2018 17:24:56 +0100
De?: 	ligges at statistik.tu-dortmund.de
R?pondre ??: 	CRAN-submissions at R-project.org
Pour?: 	emmanuel.blondel1 at gmail.com
Copie ??: 	CRAN-submissions at R-project.org



Dear maintainer,
package geometa_0.4-0.tar.gz does not pass the incoming checks 
automatically, please see the following pre-tests:
Windows: 
<https://win-builder.r-project.org/incoming_pretest/geometa_0.4-0_20181216_165029/Windows/00check.log>
Status: OK
Debian: 
<https://win-builder.r-project.org/incoming_pretest/geometa_0.4-0_20181216_165029/Debian/00check.log>
Status: 2 ERRORs
Last released version's CRAN status: ERROR: 10, NOTE: 1, OK: 1
See: <https://CRAN.R-project.org/web/checks/check_results_geometa.html>
CRAN Web: <https://cran.r-project.org/package=geometa>
Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help 
on the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please 
reply-all to this message and explain.
More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/geometa_0.4-0_20181216_165029/>
The files will be removed after roughly 7 days.
*** Strong rev. depends ***: geonapi ows4R
Best regards,
CRAN teams' auto-check service


-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Portion de message joint
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20181216/d2ea3c72/attachment.ksh>

From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Mon Dec 17 16:20:17 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Mon, 17 Dec 2018 16:20:17 +0100
Subject: [R-pkg-devel] CRAN incoming queue closed from Dec 21 to Jan 02
Message-ID: <15ba3bbe-73aa-558d-c2f7-86f5870800f3@statistik.tu-dortmund.de>

Dear package developers,

the CRAN incoming queue will be closed from Dec 21, 2018 to Jan 02, 
2019. Hence package submissions are only possible before and after that 
period.

Best,
Uwe Ligges
(for the CRAN team)


From m@rt@@k@r@@@ @ending from gm@il@com  Mon Dec 17 18:54:11 2018
From: m@rt@@k@r@@@ @ending from gm@il@com (=?UTF-8?B?TWFydGEgS2FyYcWb?=)
Date: Mon, 17 Dec 2018 12:54:11 -0500
Subject: [R-pkg-devel] In R package directory,
 where to put results for some long-taking simulations
 I want to use in README / vignette?
Message-ID: <CADVZz_pFr4be3ERS0MipZSTrkxzXx5prWXM5ciPWf0H0H1Kuew@mail.gmail.com>

For my R package, I want to demonstrate some benchmark results that take a
while to generate. I want to present the results in both README and
vignette.

I thought a way to go is to have a README.Rmd code chunk with generates the
results with `eval = FALSE`, which I run in R console and save the table in
some place within a package, and then read the saved table and display it
in both README.Rmd (in a next chunk) and in the vignette Rmd file.

Questions:

   - What is the proper subdirectory (naming, location) I should save
   the results into?
   - Should I out this subdirectory into .gitignore, or rather keep them
   (i.e., they would be available to anybody who downloads package's source
   files from CRAN?)

Thank you,
Marta

	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Mon Dec 17 21:58:37 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Mon, 17 Dec 2018 15:58:37 -0500
Subject: [R-pkg-devel] In R package directory,
 where to put results for some long-taking simulations
 I want to use in README / vignette?
In-Reply-To: <CADVZz_pFr4be3ERS0MipZSTrkxzXx5prWXM5ciPWf0H0H1Kuew@mail.gmail.com>
References: <CADVZz_pFr4be3ERS0MipZSTrkxzXx5prWXM5ciPWf0H0H1Kuew@mail.gmail.com>
Message-ID: <fdb89bae-dab1-d50a-7cbc-6b23d24738c4@gmail.com>

On 17/12/2018 12:54 PM, Marta Kara? wrote:
> For my R package, I want to demonstrate some benchmark results that take a
> while to generate. I want to present the results in both README and
> vignette.
> 
> I thought a way to go is to have a README.Rmd code chunk with generates the
> results with `eval = FALSE`, which I run in R console and save the table in
> some place within a package, and then read the saved table and display it
> in both README.Rmd (in a next chunk) and in the vignette Rmd file.
> 
> Questions:
> 
>     - What is the proper subdirectory (naming, location) I should save
>     the results into?

either data/ or inst/<your choice>/ would be fine.  Use data if you want 
these to be easily available to package users, some private name if you 
don't.

>     - Should I out this subdirectory into .gitignore, or rather keep them
>     (i.e., they would be available to anybody who downloads package's source
>     files from CRAN?)

What you put in .gitignore is up to you.  Do you want version control on 
these files?  Usually derived objects like your benchmark results aren't 
put in version control, you just put in the code to generate them.  But 
in this case, you might find it interesting to compare current results 
with historical ones, and version control would let you do that.

Duncan Murdoch

> 
> Thank you,
> Marta
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From m@rt@@k@r@@@ @ending from gm@il@com  Mon Dec 17 23:07:01 2018
From: m@rt@@k@r@@@ @ending from gm@il@com (=?UTF-8?B?TWFydGEgS2FyYcWb?=)
Date: Mon, 17 Dec 2018 17:07:01 -0500
Subject: [R-pkg-devel] In R package directory,
 where to put results for some long-taking simulations
 I want to use in README / vignette?
In-Reply-To: <fdb89bae-dab1-d50a-7cbc-6b23d24738c4@gmail.com>
References: <CADVZz_pFr4be3ERS0MipZSTrkxzXx5prWXM5ciPWf0H0H1Kuew@mail.gmail.com>
 <fdb89bae-dab1-d50a-7cbc-6b23d24738c4@gmail.com>
Message-ID: <CADVZz_qYWofy+9fvffve1SVTBYRvZjPTWAyki41y9yqcuDepCA@mail.gmail.com>

Cool, thanks! 100% clear and very helpful, I appreciate your answer a lot!

Bests / Pozdrawiam,
Marta Karas





On Mon, Dec 17, 2018 at 3:58 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 17/12/2018 12:54 PM, Marta Kara? wrote:
> > For my R package, I want to demonstrate some benchmark results that take
> a
> > while to generate. I want to present the results in both README and
> > vignette.
> >
> > I thought a way to go is to have a README.Rmd code chunk with generates
> the
> > results with `eval = FALSE`, which I run in R console and save the table
> in
> > some place within a package, and then read the saved table and display it
> > in both README.Rmd (in a next chunk) and in the vignette Rmd file.
> >
> > Questions:
> >
> >     - What is the proper subdirectory (naming, location) I should save
> >     the results into?
>
> either data/ or inst/<your choice>/ would be fine.  Use data if you want
> these to be easily available to package users, some private name if you
> don't.
>
> >     - Should I out this subdirectory into .gitignore, or rather keep them
> >     (i.e., they would be available to anybody who downloads package's
> source
> >     files from CRAN?)
>
> What you put in .gitignore is up to you.  Do you want version control on
> these files?  Usually derived objects like your benchmark results aren't
> put in version control, you just put in the code to generate them.  But
> in this case, you might find it interesting to compare current results
> with historical ones, and version control would let you do that.
>
> Duncan Murdoch
>
> >
> > Thank you,
> > Marta
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>

	[[alternative HTML version deleted]]


From @lex @ending from lec@irn@org  Tue Dec 18 22:08:12 2018
From: @lex @ending from lec@irn@org (Alexandre =?ISO-8859-1?Q?G=E9nin?=)
Date: Tue, 18 Dec 2018 22:08:12 +0100
Subject: [R-pkg-devel] file35451f8cc152 found a top level
Message-ID: <3190425.fZs42kuUFN@alex-laptop>

Dear all, 

I am preparing an update to my CRAN package 'spatialwarnings' and fixing the 
last issues before submitting it. 

I keep running into this type of message arising during checking: 

* checking top-level files ... NOTE
Non-standard files/directories found at top level:
  'file35451f8cc152' 'file35451f9d8e7a' 'file3545214f4cdf'
  'file354524b354c4' 'file35452559ca7' 'file354525cb8eb1'
  'file35452a4e4bdd' 'file35452ac564a0' 'file35452ae421b2'
  'file35452d03ad' 'file35452dc8e4d4' 'file354530b2d171'
[snip]

(the complete log is available there: https://pastebin.com/JgyG9SwJ )

This happens for a variety of architectures, R versions and building service 
(I tried rhub and win-builder). I am a bit puzzled because the files are 
absent from the archive built through R CMD build and from my git tree. I also 
added the following pattern to my .Rbuildignore to try to fix the issue: 
^file.*$, without success. 

I have no idea of what generates these files (the problem does not arise on my 
computers). Any hints on how to fix this ? 

Thanks in advance and sorry if the question has already been asked (a quick 
search returned nothing)

Alexandre

-- 
Lisez, causez ! http://saulecauseur.org


From murdoch@dunc@n @ending from gm@il@com  Tue Dec 18 22:19:52 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Tue, 18 Dec 2018 16:19:52 -0500
Subject: [R-pkg-devel] file35451f8cc152 found a top level
In-Reply-To: <3190425.fZs42kuUFN@alex-laptop>
References: <3190425.fZs42kuUFN@alex-laptop>
Message-ID: <2a9769bf-b640-0c6d-2470-ea8deca4e913@gmail.com>

On 18/12/2018 4:08 PM, Alexandre G?nin wrote:
> Dear all,
> 
> I am preparing an update to my CRAN package 'spatialwarnings' and fixing the
> last issues before submitting it.
> 
> I keep running into this type of message arising during checking:
> 
> * checking top-level files ... NOTE
> Non-standard files/directories found at top level:
>    'file35451f8cc152' 'file35451f9d8e7a' 'file3545214f4cdf'
>    'file354524b354c4' 'file35452559ca7' 'file354525cb8eb1'
>    'file35452a4e4bdd' 'file35452ac564a0' 'file35452ae421b2'
>    'file35452d03ad' 'file35452dc8e4d4' 'file354530b2d171'
> [snip]
> 
> (the complete log is available there: https://pastebin.com/JgyG9SwJ )
> 
> This happens for a variety of architectures, R versions and building service
> (I tried rhub and win-builder). I am a bit puzzled because the files are
> absent from the archive built through R CMD build and from my git tree. I also
> added the following pattern to my .Rbuildignore to try to fix the issue:
> ^file.*$, without success.
> 
> I have no idea of what generates these files (the problem does not arise on my
> computers). Any hints on how to fix this ?
> 
> Thanks in advance and sorry if the question has already been asked (a quick
> search returned nothing)

Those look like filenames generated by the tempfile() function.  Those 
would normally be in the tempdir() directory.  If you have some 
environment variable (TMPDIR, TMP, TEMP) set to ".", they could be 
created in the top level of your package.  Alternatively, if you are 
using basename() on tempfile() you'll get the same sort of thing.

Duncan Murdoch


From @lex @ending from lec@irn@org  Wed Dec 19 12:00:33 2018
From: @lex @ending from lec@irn@org (Alexandre =?ISO-8859-1?Q?G=E9nin?=)
Date: Wed, 19 Dec 2018 12:00:33 +0100
Subject: [R-pkg-devel] file35451f8cc152 found a top level
In-Reply-To: <2a9769bf-b640-0c6d-2470-ea8deca4e913@gmail.com>
References: <3190425.fZs42kuUFN@alex-laptop>
 <2a9769bf-b640-0c6d-2470-ea8deca4e913@gmail.com>
Message-ID: <5643992.AgjVLdAzdO@alex-laptop>

On mardi 18 d?cembre 2018 22:19:52 CET Duncan Murdoch wrote:
> On 18/12/2018 4:08 PM, Alexandre G?nin wrote:
> > Dear all,
> > 
> > I am preparing an update to my CRAN package 'spatialwarnings' and fixing
> > the last issues before submitting it.
> > 
> > I keep running into this type of message arising during checking:
> > 
> > * checking top-level files ... NOTE
> > 
> > Non-standard files/directories found at top level:
> >    'file35451f8cc152' 'file35451f9d8e7a' 'file3545214f4cdf'
> >    'file354524b354c4' 'file35452559ca7' 'file354525cb8eb1'
> >    'file35452a4e4bdd' 'file35452ac564a0' 'file35452ae421b2'
> >    'file35452d03ad' 'file35452dc8e4d4' 'file354530b2d171'
> > 
> > [snip]
> > 
> > (the complete log is available there: https://pastebin.com/JgyG9SwJ )
> > 
> > This happens for a variety of architectures, R versions and building
> > service (I tried rhub and win-builder). I am a bit puzzled because the
> > files are absent from the archive built through R CMD build and from my
> > git tree. I also added the following pattern to my .Rbuildignore to try
> > to fix the issue: ^file.*$, without success.
> > 
> > I have no idea of what generates these files (the problem does not arise
> > on my computers). Any hints on how to fix this ?
> > 
> > Thanks in advance and sorry if the question has already been asked (a
> > quick
> > search returned nothing)
> 
> Those look like filenames generated by the tempfile() function.  Those
> would normally be in the tempdir() directory.  If you have some
> environment variable (TMPDIR, TMP, TEMP) set to ".", they could be
> created in the top level of your package.  Alternatively, if you are
> using basename() on tempfile() you'll get the same sort of thing.
> 
> Duncan Murdoch

Ah, this was exactly it ! My checking script was using a temporary directory 
(using tempdir()) and those files were created in the package root for some 
reason. 

Thanks very much for the quick answer, 

Alexandre


From @@ligr@m@427 @ending from gm@il@com  Thu Dec 20 02:54:27 2018
From: @@ligr@m@427 @ending from gm@il@com (Aditya Saligrama)
Date: Wed, 19 Dec 2018 20:54:27 -0500
Subject: [R-pkg-devel] Submitting CORELS (Certifiably Optimal Rule Lists)
 package with/without Windows support
Message-ID: <1545270808.local-8bb473c0-9bed-v1.5.3-420ce003@getmailspring.com>

Hi,

I am trying to submit an R interface for CORELS (Certifiably Optimal Rule Lists). However, I've had a lot of difficulty getting this to compile and run on Windows. In its current state, it compiles on Windows but crashes when I try to run it. Am I able to submit this without Windows support, or could somebody help us with supporting Windows?
The code is at https://github.com/saligrama/rcorels, and the main project is available at https://corels.eecs.harvard.edu.
Thanks!
-Aditya Saligrama

	[[alternative HTML version deleted]]


From r@lf@@tubner @ending from d@q@n@@com  Thu Dec 20 09:00:10 2018
From: r@lf@@tubner @ending from d@q@n@@com (Ralf Stubner)
Date: Thu, 20 Dec 2018 09:00:10 +0100
Subject: [R-pkg-devel] 
 Submitting CORELS (Certifiably Optimal Rule Lists)
 package with/without Windows support
In-Reply-To: <1545270808.local-8bb473c0-9bed-v1.5.3-420ce003@getmailspring.com>
References: <1545270808.local-8bb473c0-9bed-v1.5.3-420ce003@getmailspring.com>
Message-ID: <8bf9d9bf-5376-2282-1920-2a22ca654548@daqana.com>

On 20.12.18 02:54, Aditya Saligrama wrote:
> I am trying to submit an R interface for CORELS (Certifiably Optimal Rule Lists). However, I've had a lot of difficulty getting this to compile and run on Windows. In its current state, it compiles on Windows but crashes when I try to run it. Am I able to submit this without Windows support, or could somebody help us with supporting Windows?
> The code is at https://github.com/saligrama/rcorels, and the main project is available at https://corels.eecs.harvard.edu.

What errors doe you get? Your package seems to require GMP and GSL
libraries, which can impose problems on Windows if not handled
correctly. Have a look at CRAN for how other packages using these
libraries handle it.

Greetinga
Ralf

-- 
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20181220/9c5cc1d5/attachment.sig>

From @@ligr@m@427 @ending from gm@il@com  Thu Dec 20 13:52:24 2018
From: @@ligr@m@427 @ending from gm@il@com (Aditya Saligrama)
Date: Thu, 20 Dec 2018 07:52:24 -0500
Subject: [R-pkg-devel] 
 Submitting CORELS (Certifiably Optimal Rule Lists)
 package with/without Windows support
In-Reply-To: <8bf9d9bf-5376-2282-1920-2a22ca654548@daqana.com>
References: <8bf9d9bf-5376-2282-1920-2a22ca654548@daqana.com>
Message-ID: <1545310217.local-1f2481e9-0201-v1.4.2-f587b7b7@getmailspring.com>

I was able to get the package to compile on Windows by emulating the way the sbrl package builds in Windows support. However, when I try to run the package on Windows, R completely crashes and exits to the desktop.

Would you have any suggestions on how to debug or fix this?
Thanks,
-Aditya Saligrama

On Dec 20 2018, at 3:00 am, Ralf Stubner <ralf.stubner at daqana.com> wrote:
>
> On 20.12.18 02:54, Aditya Saligrama wrote:
> > I am trying to submit an R interface for CORELS (Certifiably Optimal Rule Lists). However, I've had a lot of difficulty getting this to compile and run on Windows. In its current state, it compiles on Windows but crashes when I try to run it. Am I able to submit this without Windows support, or could somebody help us with supporting Windows?
> > The code is at https://github.com/saligrama/rcorels, and the main project is available at https://corels.eecs.harvard.edu.
>
>
> What errors doe you get? Your package seems to require GMP and GSL
> libraries, which can impose problems on Windows if not handled
> correctly. Have a look at CRAN for how other packages using these
> libraries handle it.
>
> Greetinga
> Ralf
>
> --
> Ralf Stubner
> Senior Software Engineer / Trainer
>
> daqana GmbH
> Dortustra?e 48
> 14467 Potsdam
>
> T: +49 331 23 61 93 11
> F: +49 331 23 61 93 90
> M: +49 162 20 91 196
> Mail: ralf.stubner at daqana.com
>
> Sitz: Potsdam
> Register: AG Potsdam HRB 27966
> Ust.-IdNr.: DE300072622
> Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


	[[alternative HTML version deleted]]


From r@lf@@tubner @ending from d@q@n@@com  Thu Dec 20 14:07:09 2018
From: r@lf@@tubner @ending from d@q@n@@com (Ralf Stubner)
Date: Thu, 20 Dec 2018 14:07:09 +0100
Subject: [R-pkg-devel] 
 Submitting CORELS (Certifiably Optimal Rule Lists)
 package with/without Windows support
In-Reply-To: <1545310217.local-1f2481e9-0201-v1.4.2-f587b7b7@getmailspring.com>
References: <8bf9d9bf-5376-2282-1920-2a22ca654548@daqana.com>
 <1545310217.local-1f2481e9-0201-v1.4.2-f587b7b7@getmailspring.com>
Message-ID: <f47eb7d3-c964-bb51-3dbe-245feda45775@daqana.com>

On 20.12.18 13:52, Aditya Saligrama wrote:
> I was able to get the package to compile on Windows by emulating the way
> the sbrl package builds in Windows support. However, when I try to run
> the package on Windows, R completely crashes and exits to the desktop.
> 
> Would you have any suggestions on how to debug or fix this?

Start R from a command prompt. This way you might catch the error
message when R exits. Alternatively you could run R (or Rgui) in the gdb
debugger:

cmd> gdb.exe Rgui.exe
gdb> run
R> ...

See http://sourceware.org/gdb/current/onlinedocs/gdb/ for more info on gdb.

Greetings
Ralf


-- 
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20181220/e18e7262/attachment.sig>

From m@rk@v@nderloo @ending from gm@il@com  Thu Dec 20 15:36:10 2018
From: m@rk@v@nderloo @ending from gm@il@com (Mark van der Loo)
Date: Thu, 20 Dec 2018 15:36:10 +0100
Subject: [R-pkg-devel] 
 Submitting CORELS (Certifiably Optimal Rule Lists)
 package with/without Windows support
In-Reply-To: <f47eb7d3-c964-bb51-3dbe-245feda45775@daqana.com>
References: <8bf9d9bf-5376-2282-1920-2a22ca654548@daqana.com>
 <1545310217.local-1f2481e9-0201-v1.4.2-f587b7b7@getmailspring.com>
 <f47eb7d3-c964-bb51-3dbe-245feda45775@daqana.com>
Message-ID: <CAOKDuOhpz5k+=m0GuuhmnFkZH7Yri1W3+nZ6iE=fm+xvc=fUnw@mail.gmail.com>

Dear Aditya,

You ask:

|  Am I able to submit this without Windows support, or could somebody help
us with supporting Windows?

The CRAN policy[1] is pretty clear about this:

"Package authors should make all reasonable efforts to provide
cross-platform portable code. Packages will not normally be accepted that
do not run on at least two of the major R platforms."

and also

"It should be normal for those without Windows machines of their own to use
the winbuilder service to check a package before submission. "


Best wishes,
Mark
[1] https://cran.r-project.org/web/packages/policies.html

On Thu, Dec 20, 2018 at 2:07 PM Ralf Stubner <ralf.stubner at daqana.com>
wrote:

> On 20.12.18 13:52, Aditya Saligrama wrote:
> > I was able to get the package to compile on Windows by emulating the way
> > the sbrl package builds in Windows support. However, when I try to run
> > the package on Windows, R completely crashes and exits to the desktop.
> >
> > Would you have any suggestions on how to debug or fix this?
>
> Start R from a command prompt. This way you might catch the error
> message when R exits. Alternatively you could run R (or Rgui) in the gdb
> debugger:
>
> cmd> gdb.exe Rgui.exe
> gdb> run
> R> ...
>
> See http://sourceware.org/gdb/current/onlinedocs/gdb/ for more info on
> gdb.
>
> Greetings
> Ralf
>
>
> --
> Ralf Stubner
> Senior Software Engineer / Trainer
>
> daqana GmbH
> Dortustra?e 48
> 14467 Potsdam
>
> T: +49 331 23 61 93 11
> F: +49 331 23 61 93 90
> M: +49 162 20 91 196
> Mail: ralf.stubner at daqana.com
>
> Sitz: Potsdam
> Register: AG Potsdam HRB 27966
> Ust.-IdNr.: DE300072622
> Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From price0416 @ending from gm@il@com  Thu Dec 20 17:33:45 2018
From: price0416 @ending from gm@il@com (Adam Price)
Date: Thu, 20 Dec 2018 11:33:45 -0500
Subject: [R-pkg-devel] '! LaTeX Error: Option clash for package xcolor' on
 linux-based builds
Message-ID: <CAO49RG5E-o4S_mBgr=7+iQ1rGuUrZoCOk8h_HhUs6cusKtNpyQ@mail.gmail.com>

Hi,

I am currently having an issue getting past a warning that's occurring on
linux based builds for my vignette.  The warning is: "! LaTeX Error: Option
clash for package xcolor."

The check results are here:
https://cran.r-project.org/web/checks/check_results_DEVis.html

I currently cannot reproduce this issue on my side, and travis-ci checks do
not seem to produce this warning.  I can only see it currently when
submitting an update to my package and failing the CRAN auto-checks.

I have recently changed from PDF vignette to html-based, and am not sure
why LaTeX packages would even be loading in this case.  I have attempted to
correct for it based on this post (
https://github.com/haozhu233/kableExtra/issues/274) which claims the issue
is a conflict between kableExtra and xcolor.

Some relevant sections of code from the vignette might include:
"
vignette: |
  %\VignetteIndexEntry{DEVis}
  %\usepackage[utf8]{inputenc}
  %\usepackage[table]{xcolor}
  %\VignetteEngine{knitr::knitr}
---

```{r loadData, echo = F, eval = TRUE}
#load("../data/exampleData.Rda")
knitr::opts_knit$set(root.dir = '../vignettes/')
knitr::opts_chunk$set(fig.path='figure/graphics-',
                 cache.path='cache/graphics-',
                 fig.align='center',
                 external=TRUE,
                 echo=TRUE,
                 warning=FALSE,
                 fig.pos='H'
                )
  a4width<- 8.3
  a4height<- 11.7
library(kableExtra)
library(rmarkdown)
library(knitr)
options(knitr.table.format = "html")
options(kableExtra.latex.load_packages = FALSE)
"


The full package code can be found here: https://github.com/price0416/DEvis

I would appreciate any insight anyone can offer into this issue, as I
cannot update my package until I get to the bottom of this!  Thanks very
much in advance!

Best,
-Adam

	[[alternative HTML version deleted]]


From h@wickh@m @ending from gm@il@com  Fri Dec 21 17:35:17 2018
From: h@wickh@m @ending from gm@il@com (Hadley Wickham)
Date: Fri, 21 Dec 2018 10:35:17 -0600
Subject: [R-pkg-devel] New CRAN internet policy
In-Reply-To: <23562.13285.820319.446050@stat.math.ethz.ch>
References: <CABdHhvFWTfTHcVvWLqrRne_T76W_+jhwuOYWzbxahPwnip_N1A@mail.gmail.com>
 <23562.13285.820319.446050@stat.math.ethz.ch>
Message-ID: <CABdHhvFQBPvddqPm0ZYx-p4FPhYc=j1fGRv7Fag0fP8LJWrGQw@mail.gmail.com>

On Fri, Dec 7, 2018 at 2:48 AM Martin Maechler
<maechler at stat.math.ethz.ch> wrote:
>
> >>>>> Hadley Wickham
> >>>>>     on Thu, 6 Dec 2018 10:22:47 -0600 writes:
>
>     > Hi all,
>     > I'd love to get some clarification on what the new internet policy
>     > means for packages like httr:
>
>     >> Packages which use Internet resources should fail gracefully with an informative
>     >> message if the resource is not available (and not give a check warning nor error).
>
>     > It's not clear what "internet resource" means here? If it means
>     > dataset, then I think the httr tests and examples are ok. If it means
>     > any use of the internet, I'm not sure what do - httr critically
>     > depends on internet access, so I can't see any way to make it fail
>     > gracefully.
>
>     > Hadley
>
> I cannot answer your question, notably as I'm not part of the CRAN
> team, but as R Core developer, I've encountered the problem
> many times which this policy tries to mitigate
> (but I also think we should consider to go further than the
>  above "policy") :
>
> As R developer, I'd like to see the effect of a change to the
> sources of base R, and so eventually, I may want to run the
> equivalent of 'R CMD check' on all existing CRAN and
> Bioconductor packages. If I have access to a server with many
> cores and very fast hard disks, I can hope to finish running the
> tests with 1--2 days.
> But then I have to deal with the result.  The few times I've
> done this, the result has been "a mess" because many many
> packages  nowadays assume in their examples and their regression/unit
> tests that internet access to some resources works, ... which it
> "often" does not, and so  download.file(),
> read.table("http://.....") etc result in errors sooner or later.
>
> Because of that some packages fail their checks "randomly" (in
> the sense that internet resources are not available "randomly").
> Ideally we'd find a very good way that these failures are
> communicated back to the person / process running (a version of)
> 'R CMD check', because in the above scenario, I'd like to weed
> out the 300 packages that just failed because of internet
> resource access failures,  and only look at the other packages
> that got a change in their 'R CMD check' results.

We have now decent tooling for this in revdepcheck
(https://www.github.com/r-lib/revdepcheck, planning for CRAN
submission next year). After performing all the revdepchecks, you can
run revdep_add_broken() to recheck packages that failed in the
previous round - in my experience testing httr (whose revdeps
obviously use the internet a lot) this resolves most of the randomness
(since it's fairly unlikely to get two random failures in a row).

My main concern about making the checking in examples and tests
stricter is that I think the primary result is that people will simply
do less testing and write fewer realistic examples, which is a net
negative for the community. When you want people to do the right
thing, I think you have to provide a carrot along with the stick.

> The recent introduction in R-devel of classed error conditions
> (in some cases), e.g., https://developer.r-project.org/blosxom.cgi/R-devel/NEWS/2018/10/04#n2018-10-04,  and the similar and somewhat earlier
> effort of Lionel Henry to use classed error conditions (in
> rlang only, unfortunately, rather than as a patch proposal to R ..)
> maybe one step towards a nice solution here.

We'd be happy to propose a patch to base R, but it's not yet clear to
us exactly how things should work so I think it makes the most sense
to first prototype in a package.

Hadley

-- 
http://hadley.nz


From D@n@Kelley @ending from D@l@C@  Sat Dec 22 13:22:20 2018
From: D@n@Kelley @ending from D@l@C@ (Daniel Kelley)
Date: Sat, 22 Dec 2018 12:22:20 +0000
Subject: [R-pkg-devel] R-package-devel Digest, Vol 44, Issue 14
In-Reply-To: <mailman.3308.9.1545476402.12456.r-package-devel@r-project.org>
References: <mailman.3308.9.1545476402.12456.r-package-devel@r-project.org>
Message-ID: <9C2A9373-95E8-464A-9317-FB6ABDCDB3A7@dal.ca>

> On Dec 22, 2018, at 7:00 AM, r-package-devel-request at r-project.org wrote:
>
> (since it's fairly unlikely to get two random failures in a row).

Flakey links are also a problem for packages, per se, as opposed to revdeps.  For example, I have a package (oce) that has quite a lot of \url{} items in its docs, and I get failures quite often. Sometimes the failures will persist (perhaps intermittently) for days, as work is done on servers, etc.  My policy is to just change \url to \code (usually with a note to tell the user that the link is actually likely to work), and that's not a good thing, because it leads to less testing. I do not know what the best policy is ... maybe a new macro like \checkedurl{} that will make a link if the resource is found, and add a note about the link failing to work, otherwise. That way, the package could still build, and the user would not be stuck with a lot of non-linked URLs in the docs.

From tomkellygenetic@ @ending from gm@il@com  Wed Dec 26 09:00:38 2018
From: tomkellygenetic@ @ending from gm@il@com (Tom Kelly)
Date: Wed, 26 Dec 2018 17:00:38 +0900
Subject: [R-pkg-devel] Fwd: [CRAN-pretest-archived] CRAN submission vioplot
 0.3.0
In-Reply-To: <CAOXa6G28SDXkT0rzHZQn9jpk0QZqec+n4Hh8s2Rxi5bEXa=KHQ@mail.gmail.com>
References: <20180224153007.49B241641AA@xmpalantir.wu.ac.at>
 <01d3ad84$Blat.v2.2.2$f8fcba75@mail.statistik.tu-dortmund.de>
 <CAOXa6G28SDXkT0rzHZQn9jpk0QZqec+n4Hh8s2Rxi5bEXa=KHQ@mail.gmail.com>
Message-ID: <CAOXa6G0QY-=p16ufOHQAnAYsVNh5jQk4V3uxzRmcQ=g0X+m19Q@mail.gmail.com>

Dear CRAN maintainers and R package developers,

I am still interested in submitting this update to the "vioplot" package. I
would like to revisit the idea to update this package on CRAN. I think the
changes that I've made here would be useful to a significant number of R
users.

I am submitting to take over as maintainer as this package has been
orphaned for years. I will of course take measures to attribute the
original author and preserve the original LICENSE.

This is a major update with many additional features. This includes fine
control over plotting parameters and formula inputs with documentation on
these parameters. I've added tests and vignettes showing that these work.
However, it does not pass automated checks such as the LICENSE since some
aspects of the original package are very outdated (the additional NOTEs
from the CRAN checks were due to the outdated LICENSE and not being the
current maintainer). Thus a manual review would be required. Otherwise, I
have taken every measure I think is possible to reduce the number of errors
from automated checks and ensure backwards compatibility. These additional
features can be pushed to the repo without disrupting the behaviour of any
existing scripts or packages calling this function.

I realise that the files may since been removed and I would need to
resubmit if it is possible. These can be found at the following GitHub repo:

https://github.com/TomKellyGenetics/vioplot

Kind regards,

Tom Kelly

---------- Forwarded message ---------
From: Tom Kelly <tomkellygenetics at gmail.com>
Date: Sun, Feb 25, 2018 at 10:33 AM
Subject: Re: [CRAN-pretest-archived] CRAN submission vioplot 0.3.0
To: <CRAN-submissions at r-project.org>
Cc: Tom Kelly <tom.kelly at postgrad.otago.ac.nz>


Dear CRAN team,

I have documented the NOTE issues in a cran-comments.md file. I think some
of these are unavoidable as stated in this file. In particular, some issues
with automated checks may arise due to legacy code and meta-data for
compatibility with vioplot 0.2 (last updated in 2005). Please notice that
many of the checks failed by the original package vioplot 0.2 have been
resolved with this release. In addition, this supports range of added
features and input methods consistent with similar plotting functions while
preserving backwards-compatibility.

Due to the proposal to take over as maintainer of an orphaned package, I
request that this submission be reviewed manually. Sorry for the
inconvenience, I will do my best to resolve any further issues that should
arise.

Kind Regards,

Tom Kelly


On Sun, Feb 25, 2018 at 12:34 AM, <Uwe.Ligges at r-project.org> wrote:

> Dear maintainer,
>
> package vioplot_0.3.0.tar.gz does not pass the incoming checks
> automatically, please see the pre-test at:
> <
> https://win-builder.r-project.org/incoming_pretest/180224_163015_vioplot_030/00check.log
> >
> Status: 5 NOTEs
>
> Current CRAN status: NOTE: 12
> See: <https://CRAN.R-project.org/web/checks/check_results_vioplot.html>
>
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on
> the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> If you are fairly certain the rejection is a false positive, please
> reply-all to this message and explain.
>
> More details are given in the directory:
> <
> https://win-builder.r-project.org/incoming_pretest/180224_163015_vioplot_030
> >
> The files will be removed after roughly 7 days.
>
> Strong rev. depends: parviol regplot
>
> Best regards,
> CRAN teams' auto-check service
>
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Wed Dec 26 15:27:42 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Wed, 26 Dec 2018 09:27:42 -0500
Subject: [R-pkg-devel] 
 Fwd: [CRAN-pretest-archived] CRAN submission vioplot 0.3.0
In-Reply-To: <CAOXa6G0QY-=p16ufOHQAnAYsVNh5jQk4V3uxzRmcQ=g0X+m19Q@mail.gmail.com>
References: <20180224153007.49B241641AA@xmpalantir.wu.ac.at>
 <01d3ad84$Blat.v2.2.2$f8fcba75@mail.statistik.tu-dortmund.de>
 <CAOXa6G28SDXkT0rzHZQn9jpk0QZqec+n4Hh8s2Rxi5bEXa=KHQ@mail.gmail.com>
 <CAOXa6G0QY-=p16ufOHQAnAYsVNh5jQk4V3uxzRmcQ=g0X+m19Q@mail.gmail.com>
Message-ID: <e024f264-153f-5793-0fca-a5e1b188b391@gmail.com>

On 26/12/2018 3:00 a.m., Tom Kelly wrote:
> Dear CRAN maintainers and R package developers,
> 
> I am still interested in submitting this update to the "vioplot" package. I
> would like to revisit the idea to update this package on CRAN. I think the
> changes that I've made here would be useful to a significant number of R
> users.
> 
> I am submitting to take over as maintainer as this package has been
> orphaned for years. I will of course take measures to attribute the
> original author and preserve the original LICENSE.
> 
> This is a major update with many additional features. This includes fine
> control over plotting parameters and formula inputs with documentation on
> these parameters. I've added tests and vignettes showing that these work.
> However, it does not pass automated checks such as the LICENSE since some
> aspects of the original package are very outdated (the additional NOTEs
> from the CRAN checks were due to the outdated LICENSE and not being the
> current maintainer). Thus a manual review would be required. Otherwise, I
> have taken every measure I think is possible to reduce the number of errors
> from automated checks and ensure backwards compatibility. These additional
> features can be pushed to the repo without disrupting the behaviour of any
> existing scripts or packages calling this function.
> 
> I realise that the files may since been removed and I would need to
> resubmit if it is possible. These can be found at the following GitHub repo:
> 
> https://github.com/TomKellyGenetics/vioplot

CRAN has announced they are taking a (well-deserved) holiday, and not 
processing incoming packages until after Jan 2.  The check log from your 
February submission is long since removed, so I can't give specific 
comments, but here are some general ones:

1.  Check your package using the "as-cran" option on R-devel before 
submitting again.  Make sure that the only remaining problems are 
unavoidable:  e.g. including your name as maintainer.  You should be 
able to fix the License issue following the instructions in Writing R 
Extensions, if the license really is compatible with CRAN.  If it is not 
compatible with CRAN, then don't waste everyone's time by submitting it 
there:  let interested people install it from Github.

2.  Submit it again after Jan 2, following the instructions in 
https://cran.r-project.org/web/packages/policies.html.

Duncan Murdoch

> 
> Kind regards,
> 
> Tom Kelly
> 
> ---------- Forwarded message ---------
> From: Tom Kelly <tomkellygenetics at gmail.com>
> Date: Sun, Feb 25, 2018 at 10:33 AM
> Subject: Re: [CRAN-pretest-archived] CRAN submission vioplot 0.3.0
> To: <CRAN-submissions at r-project.org>
> Cc: Tom Kelly <tom.kelly at postgrad.otago.ac.nz>
> 
> 
> Dear CRAN team,
> 
> I have documented the NOTE issues in a cran-comments.md file. I think some
> of these are unavoidable as stated in this file. In particular, some issues
> with automated checks may arise due to legacy code and meta-data for
> compatibility with vioplot 0.2 (last updated in 2005). Please notice that
> many of the checks failed by the original package vioplot 0.2 have been
> resolved with this release. In addition, this supports range of added
> features and input methods consistent with similar plotting functions while
> preserving backwards-compatibility.
> 
> Due to the proposal to take over as maintainer of an orphaned package, I
> request that this submission be reviewed manually. Sorry for the
> inconvenience, I will do my best to resolve any further issues that should
> arise.
> 
> Kind Regards,
> 
> Tom Kelly
> 
> 
> On Sun, Feb 25, 2018 at 12:34 AM, <Uwe.Ligges at r-project.org> wrote:
> 
>> Dear maintainer,
>>
>> package vioplot_0.3.0.tar.gz does not pass the incoming checks
>> automatically, please see the pre-test at:
>> <
>> https://win-builder.r-project.org/incoming_pretest/180224_163015_vioplot_030/00check.log
>>>
>> Status: 5 NOTEs
>>
>> Current CRAN status: NOTE: 12
>> See: <https://CRAN.R-project.org/web/checks/check_results_vioplot.html>
>>
>> Please fix all problems and resubmit a fixed version via the webform.
>> If you are not sure how to fix the problems shown, please ask for help on
>> the R-package-devel mailing list:
>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>> If you are fairly certain the rejection is a false positive, please
>> reply-all to this message and explain.
>>
>> More details are given in the directory:
>> <
>> https://win-builder.r-project.org/incoming_pretest/180224_163015_vioplot_030
>>>
>> The files will be removed after roughly 7 days.
>>
>> Strong rev. depends: parviol regplot
>>
>> Best regards,
>> CRAN teams' auto-check service
>>
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From hongooi @ending from micro@oft@com  Wed Dec 26 15:38:53 2018
From: hongooi @ending from micro@oft@com (Hong Ooi)
Date: Wed, 26 Dec 2018 14:38:53 +0000
Subject: [R-pkg-devel] Fwd: [CRAN-pretest-archived] CRAN submission
 vioplot 0.3.0
In-Reply-To: <CAOXa6G0QY-=p16ufOHQAnAYsVNh5jQk4V3uxzRmcQ=g0X+m19Q@mail.gmail.com>
References: <20180224153007.49B241641AA@xmpalantir.wu.ac.at>
 <01d3ad84$Blat.v2.2.2$f8fcba75@mail.statistik.tu-dortmund.de>
 <CAOXa6G28SDXkT0rzHZQn9jpk0QZqec+n4Hh8s2Rxi5bEXa=KHQ@mail.gmail.com>
 <CAOXa6G0QY-=p16ufOHQAnAYsVNh5jQk4V3uxzRmcQ=g0X+m19Q@mail.gmail.com>
Message-ID: <KL1P15301MB0023F1E82CCDF348C9822705A6B50@KL1P15301MB0023.APCP153.PROD.OUTLOOK.COM>

Just a few comments:

- Given vioplot 0.2 is 12 years old, I wouldn't be TOO concerned with backward compatibility. I wouldn't ignore it either, but if I had to choose, I'd go for modern idioms over ensuring that everything works exactly the same.

- You don't need to keep HTML versions of the vignettes in the repo. They'll be built automatically from the Rmd files when you run install.packages("vioplot"). Also, if size is an issue, you can set output: rmarkdown::html_vignette instead of rmarkdown::html_document which reduces the output size considerably.

- Using attach() to evaluate a formula in the context of a data frame should never be necessary; use model.frame(*, data=df) or eval(*, envir=df). That said, I didn't see any uses of attach in the repo, so presumably you've already fixed this.

- BSD is a very permissive license. While I'm not a lawyer, I don't think there would be any conflicts if you changed it to, say, the MIT license which is also very permissive.

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Tom Kelly
Sent: Wednesday, 26 December, 2018 7:01 PM
To: CRAN-submissions at r-project.org; r-package-devel at r-project.org
Subject: [R-pkg-devel] Fwd: [CRAN-pretest-archived] CRAN submission vioplot 0.3.0

Dear CRAN maintainers and R package developers,

I am still interested in submitting this update to the "vioplot" package. I would like to revisit the idea to update this package on CRAN. I think the changes that I've made here would be useful to a significant number of R users.

I am submitting to take over as maintainer as this package has been orphaned for years. I will of course take measures to attribute the original author and preserve the original LICENSE.

This is a major update with many additional features. This includes fine control over plotting parameters and formula inputs with documentation on these parameters. I've added tests and vignettes showing that these work.
However, it does not pass automated checks such as the LICENSE since some aspects of the original package are very outdated (the additional NOTEs from the CRAN checks were due to the outdated LICENSE and not being the current maintainer). Thus a manual review would be required. Otherwise, I have taken every measure I think is possible to reduce the number of errors from automated checks and ensure backwards compatibility. These additional features can be pushed to the repo without disrupting the behaviour of any existing scripts or packages calling this function.

I realise that the files may since been removed and I would need to resubmit if it is possible. These can be found at the following GitHub repo:

https://github.com/TomKellyGenetics/vioplot

Kind regards,

Tom Kelly

---------- Forwarded message ---------
From: Tom Kelly <tomkellygenetics at gmail.com>
Date: Sun, Feb 25, 2018 at 10:33 AM
Subject: Re: [CRAN-pretest-archived] CRAN submission vioplot 0.3.0
To: <CRAN-submissions at r-project.org>
Cc: Tom Kelly <tom.kelly at postgrad.otago.ac.nz>


Dear CRAN team,

I have documented the NOTE issues in a cran-comments.md file. I think some of these are unavoidable as stated in this file. In particular, some issues with automated checks may arise due to legacy code and meta-data for compatibility with vioplot 0.2 (last updated in 2005). Please notice that many of the checks failed by the original package vioplot 0.2 have been resolved with this release. In addition, this supports range of added features and input methods consistent with similar plotting functions while preserving backwards-compatibility.

Due to the proposal to take over as maintainer of an orphaned package, I request that this submission be reviewed manually. Sorry for the inconvenience, I will do my best to resolve any further issues that should arise.

Kind Regards,

Tom Kelly


On Sun, Feb 25, 2018 at 12:34 AM, <Uwe.Ligges at r-project.org> wrote:

> Dear maintainer,
>
> package vioplot_0.3.0.tar.gz does not pass the incoming checks 
> automatically, please see the pre-test at:
> <
> https://win-builder.r-project.org/incoming_pretest/180224_163015_viopl
> ot_030/00check.log
> >
> Status: 5 NOTEs
>
> Current CRAN status: NOTE: 12
> See: 
> <https://CRAN.R-project.org/web/checks/check_results_vioplot.html>
>
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help 
> on the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> If you are fairly certain the rejection is a false positive, please 
> reply-all to this message and explain.
>
> More details are given in the directory:
> <
> https://win-builder.r-project.org/incoming_pretest/180224_163015_viopl
> ot_030
> >
> The files will be removed after roughly 7 days.
>
> Strong rev. depends: parviol regplot
>
> Best regards,
> CRAN teams' auto-check service
>
>

	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From i@co@tig@n @ending from me@com  Fri Dec 28 01:41:13 2018
From: i@co@tig@n @ending from me@com (Imanuel Costigan)
Date: Fri, 28 Dec 2018 11:41:13 +1100
Subject: [R-pkg-devel] Odd R CMD build behaviour on Windows
Message-ID: <495889EA-8260-4B89-ADE0-21CC802E5E6A@me.com>

Hi all

[Originally posted on R-help which is probably not the right place - hence no response?]

I am finding that on Windows 10:

* the archive file produced by R (i386) CMD build command saves the resulting archive file in the present working directory 
* ...BUT the archive produced by the R (x64) CMD build command is **not** saved in the present working directory. Instead it is saved in the file path produced by `paste0(Sys.getenv("HOMEDRIVE"), Sys.getenv("HOMEPATH"))` or `Sys.getenv("HOMESHARE")` (the former resolves to H:\ which is an alias for the latter). This path is not represented in any other environment variables returned by Sys.getenv()

This behaviour persists for R-3.5.1 (formally release) and R-3.4.4. It also persists after I uninstall R and Rtools and then clean reinstall R-3.4.4 and R-3.5.1.

Has anyone else had this issue? Or tips on what might be causing this? Alternatively a pointer to the part of the R source code that determines the output directory for R CMD build would be much appreciated. 

I am running these commands in Powershell using the following commands:

Thanks.

```
& 'C:\R\R-3.5.1\bin\x64\R.exe' --no-site-file --no-environ --no-save --no-restore --quiet CMD build "C:\users\XXXX\Coding\testpackage\" --no-resave-data --no-manual

# Archive is **not** saved in present working directory, but saved to H:\

& 'C:\R\R-3.5.1\bin\i386\R.exe' --no-site-file --no-environ --no-save --no-restore --quiet CMD build "C:\users\XXXX\Coding\testpackage\" --no-resave-data --no-manual

# Archive is saved in present working directory.
```

