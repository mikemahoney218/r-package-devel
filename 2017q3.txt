From john.reid at mrc-bsu.cam.ac.uk  Mon Jul  3 12:53:39 2017
From: john.reid at mrc-bsu.cam.ac.uk (John Reid)
Date: Mon, 3 Jul 2017 11:53:39 +0100
Subject: [R-pkg-devel] Functions erroneously identified as S3 methods
Message-ID: <39868161-19f6-c4bc-243d-204cdebc7b18@mrc-bsu.cam.ac.uk>

Hi,

I have some functions in my package that are getting confused for S3 
methods. I named them `filter.genes` and `filter.cells` which in 
hindsight looks like a mistake as `filter` is a S3 method.

When I submit my package I receive a WARNING:

* checking S3 generic/method consistency ... WARNING filter: function(x, 
filter, method, sides, circular, init) filter.cells: function(dl, 
.filter, number, cells) filter: function(x, filter, method, sides, 
circular, init) filter.genes: function(dl, .filter, number, genes) See 
section ?Generic functions and methods? in the ?Writing R Extensions? 
manual. Found the following apparent S3 methods exported but not 
registered: filter.cells filter.genes See section ?Registering S3 
methods? in the ?Writing R Extensions? manual.

I have deprecated the functions and replaced them with versions named 
with underscores but do not want to remove them until a later release. 
However I received a `pre-test archived` email from the CRAN team:

package DeLorean_1.2.5.tar.gz does not pass the incoming checks automatically, please see the pre-test at:
<https://win-builder.r-project.org/incoming_pretest/170703_114446_DeLorean_125/00check.log>
Status: 1 WARNING, 1 NOTE
  
Current CRAN status: WARN: 11, OK: 1
See:<https://CRAN.R-project.org/web/checks/check_results_DeLorean.html>
  
Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
  
More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/170703_114446_DeLorean_125>
The files will be removed after roughly 7 days.


How should I proceed?

FWIW here is the Roxygen documenation for one of the functions:

#' Filter genes
#'
#' @param dl de.lorean object
#' @param .filter Function that gakes a list of genes as input and returns
#'     a vector of TRUE/FALSE
#' @param number Number to sample if filter function or genes not supplied.
#' @param genes The genes to keep.
#' @examples
#' \dontrun{
#' genes <- c('NANOG', 'DAZ1', 'SOX4', 'PRDM14')
#' filter.genes(dl, .filter = function(x) x %in% genes)
#' filter.genes(dl, number = 4)
#' filter.genes(dl, genes = genes)
#' }
#'
#' @export filter.genes
#'

Thanks,
-- 
John Reid <http://johnreid.github.io>
MRC Biostatistics Unit
Cambridge, UK
Twitter: @__Reidy__ <https://twitter.com/__Reidy__>

	[[alternative HTML version deleted]]


From bodenhofer at bioinf.jku.at  Mon Jul  3 18:14:19 2017
From: bodenhofer at bioinf.jku.at (Ulrich Bodenhofer)
Date: Mon, 3 Jul 2017 18:14:19 +0200
Subject: [R-pkg-devel] Calling registered C methods with a "variable name"
Message-ID: <b45d1ad6-a096-e40f-18b1-223bf90796c1@bioinf.jku.at>

Hi,

As R CMD check is more pedantic about the registration of native 
routines since version 3.4, I wanted to update my CRAN packages 
accordingly. While this worked nicely for my 'apcluster' packages (and, 
some time ago, for my  Bioconductor packages), I am having problems with 
my 'rococo' package. The problem is that I use string variables for some 
of the .NAME arguments of the calls to the .Call() function. In other 
word, the R function calling .Call() uses paste() to put together the 
function name into a string and then calls .Call() with the .NAME 
argument being this string variable. This is the simplest and most 
efficient approach under the given circumstances (I omit a detailed 
justification at this point, but I can provide it if wanted). Any other 
approach would require a lot more coding. It is also safe, since the 
variable part of the name is secured against invalid names using 
match.arg() with a fixed list of options.

In more detail, here is a (slightly simplified) example: suppose there 
are three C functions rcor_matrix_min, rcor_matrix_prod, and 
rcor_matrix_lukasiewicz ...

     dummy <- function(x, y, sim=c("min", "prod", "lukasiewicz"))
     {
         sim <- match.arg(sim)

         ...

         funcName <- paste0("rcor_matrix_", sim)
         result <- .Call(funcName, x, y)

         ...
     }


The approach described above worked perfectly before I registered the 
native routines rcor_matrix_min, rcor_matrix_prod, and 
rcor_matrix_lukasiewicz. And it still works now with registered native 
routines. The whole package also passes 'R CMD check' without errors, 
warnings, or notes. However, if I add the option '--as-cran', I get a 
bunch of notes saying that the symbol 'funcName' that I use as .NAME 
argument is not registered. Can anybody comment on that please? Can I 
simply ignore this? Is it imperative to fix this? Or is it an issue in 
the 'R CMD check *** --as-cran' that this special case is simply overlooked?

Thanks in advance and best regards,
Ulrich


From ligges at statistik.tu-dortmund.de  Tue Jul  4 10:47:34 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 4 Jul 2017 10:47:34 +0200
Subject: [R-pkg-devel] Functions erroneously identified as S3 methods
In-Reply-To: <39868161-19f6-c4bc-243d-204cdebc7b18@mrc-bsu.cam.ac.uk>
References: <39868161-19f6-c4bc-243d-204cdebc7b18@mrc-bsu.cam.ac.uk>
Message-ID: <0e97e1f8-e194-1c51-a75a-44fa1592fe28@statistik.tu-dortmund.de>



On 03.07.2017 12:53, John Reid wrote:
> Hi,
> 
> I have some functions in my package that are getting confused for S3
> methods. I named them `filter.genes` and `filter.cells` which in
> hindsight looks like a mistake as `filter` is a S3 method.

S3 generic, actually.


> When I submit my package I receive a WARNING:
> 
> * checking S3 generic/method consistency ... WARNING filter: function(x,
> filter, method, sides, circular, init) filter.cells: function(dl,
> .filter, number, cells) filter: function(x, filter, method, sides,
> circular, init) filter.genes: function(dl, .filter, number, genes) See
> section ?Generic functions and methods? in the ?Writing R Extensions?
> manual. Found the following apparent S3 methods exported but not
> registered: filter.cells filter.genes See section ?Registering S3
> methods? in the ?Writing R Extensions? manual.
> 
> I have deprecated the functions and replaced them with versions named
> with underscores but do not want to remove them until a later release.
> However I received a `pre-test archived` email from the CRAN team:

Resubmit and once you get the auto-rejection reply to the CRAN team 
explaining it by what you wrote here.

Best,
Uwe Ligges


> 
> package DeLorean_1.2.5.tar.gz does not pass the incoming checks automatically, please see the pre-test at:
> <https://win-builder.r-project.org/incoming_pretest/170703_114446_DeLorean_125/00check.log>
> Status: 1 WARNING, 1 NOTE
>    
> Current CRAN status: WARN: 11, OK: 1
> See:<https://CRAN.R-project.org/web/checks/check_results_DeLorean.html>
>    
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
>    
> More details are given in the directory:
> <https://win-builder.r-project.org/incoming_pretest/170703_114446_DeLorean_125>
> The files will be removed after roughly 7 days.
> 
> 
> How should I proceed?
> 
> FWIW here is the Roxygen documenation for one of the functions:
> 
> #' Filter genes
> #'
> #' @param dl de.lorean object
> #' @param .filter Function that gakes a list of genes as input and returns
> #'     a vector of TRUE/FALSE
> #' @param number Number to sample if filter function or genes not supplied.
> #' @param genes The genes to keep.
> #' @examples
> #' \dontrun{
> #' genes <- c('NANOG', 'DAZ1', 'SOX4', 'PRDM14')
> #' filter.genes(dl, .filter = function(x) x %in% genes)
> #' filter.genes(dl, number = 4)
> #' filter.genes(dl, genes = genes)
> #' }
> #'
> #' @export filter.genes
> #'
> 
> Thanks,
>


From uzai_ff at hotmail.com  Tue Jul  4 01:58:55 2017
From: uzai_ff at hotmail.com (Luis Gustavo Uzai)
Date: Mon, 3 Jul 2017 23:58:55 +0000
Subject: [R-pkg-devel]  A Survey on Automated Unit Test in R Language
Message-ID: <DM5PR12MB128967B0F541D623A892072297D60@DM5PR12MB1289.namprd12.prod.outlook.com>

Hi, my name is Luis Gustavo Uzai, I am a master's student at Federal Technology University in Brazil, I am studying Automated Unit Tests in the R.

Could you help me with my research? To do so, could respond to this form:
Https://goo.gl/forms/i4jN4NPFKylEt8bF2

Identification is optional.
Thank you very much for your time.

	[[alternative HTML version deleted]]


From Joris.Meys at ugent.be  Wed Jul  5 21:19:08 2017
From: Joris.Meys at ugent.be (Joris Meys)
Date: Wed, 5 Jul 2017 21:19:08 +0200
Subject: [R-pkg-devel] Using non-exported functions from another package
	with :::
Message-ID: <CAO1zAVZaGZ9unLOZJ50RJ_LCdZcD6y_QU=s6rq9iQ-P+qMefAg@mail.gmail.com>

Hi all,

I'm working on a very small package where I redesign the inputs of Shiny to
have the label inline instead of above the actual widget. To avoid having
to rewrite quite big parts of Shiny, I need access to a number of internal
functions. I do this using :::, but R CMD check obviously gives a note,
indicating that this is "a bad idea".

I understand why this is in most cases a bad idea, but I see no other
option apart from literally copying these functions (and the ones they
depend on) all into my package.

Hence my questions:

- is it acceptable to get a package using ::: on CRAN? When I run R CMD
check --as-cran it only gives a note, but just to be sure...

- anybody a better option to be able to use eg shiny:::selectizeIt,
shiny:::selectOptions etc?

Thank you in advance
Joris

-- 
Joris Meys
Statistical consultant

Ghent University
Faculty of Bioscience Engineering
Department of Mathematical Modelling, Statistics and Bio-Informatics

tel : +32 9 264 59 87
Joris.Meys at Ugent.be
-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Thu Jul  6 00:03:07 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 5 Jul 2017 18:03:07 -0400
Subject: [R-pkg-devel] Using non-exported functions from another package
 with :::
In-Reply-To: <CAO1zAVZaGZ9unLOZJ50RJ_LCdZcD6y_QU=s6rq9iQ-P+qMefAg@mail.gmail.com>
References: <CAO1zAVZaGZ9unLOZJ50RJ_LCdZcD6y_QU=s6rq9iQ-P+qMefAg@mail.gmail.com>
Message-ID: <a4d6c2d9-5d0a-5ae1-9761-70762ac0f1dd@gmail.com>

On 05/07/2017 3:19 PM, Joris Meys wrote:
> Hi all,
>
> I'm working on a very small package where I redesign the inputs of Shiny to
> have the label inline instead of above the actual widget. To avoid having
> to rewrite quite big parts of Shiny, I need access to a number of internal
> functions. I do this using :::, but R CMD check obviously gives a note,
> indicating that this is "a bad idea".
>
> I understand why this is in most cases a bad idea, but I see no other
> option apart from literally copying these functions (and the ones they
> depend on) all into my package.
>
> Hence my questions:
>
> - is it acceptable to get a package using ::: on CRAN? When I run R CMD
> check --as-cran it only gives a note, but just to be sure...

No.

>
> - anybody a better option to be able to use eg shiny:::selectizeIt,
> shiny:::selectOptions etc?

Talk to the maintainer of shiny, and ask them to export those functions 
(or equivalent ones).  This might be more successful if you write the 
help pages and send them a Github pull request explaining your need, 
since that makes it essentially no immediate work (just long term 
support work).

Duncan Murdoch

>
> Thank you in advance
> Joris
>


From Joris.Meys at ugent.be  Thu Jul  6 11:52:12 2017
From: Joris.Meys at ugent.be (Joris Meys)
Date: Thu, 6 Jul 2017 11:52:12 +0200
Subject: [R-pkg-devel] Using non-exported functions from another package
 with :::
In-Reply-To: <a4d6c2d9-5d0a-5ae1-9761-70762ac0f1dd@gmail.com>
References: <CAO1zAVZaGZ9unLOZJ50RJ_LCdZcD6y_QU=s6rq9iQ-P+qMefAg@mail.gmail.com>
 <a4d6c2d9-5d0a-5ae1-9761-70762ac0f1dd@gmail.com>
Message-ID: <CAO1zAVZRaV2MtvhE=acMnTNx8W7Xk-W=L2vxFSK=Ug22kyGrtQ@mail.gmail.com>

Hi Duncan,

I hoped against all odds to get a different answer, but alas you confirm my
biggest fears. I'll get in touch with the shiny guys and hope they'll grant
me my wishes.

Cheers
Joris

On Thu, Jul 6, 2017 at 12:03 AM, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 05/07/2017 3:19 PM, Joris Meys wrote:
>
>> Hi all,
>>
>> I'm working on a very small package where I redesign the inputs of Shiny
>> to
>> have the label inline instead of above the actual widget. To avoid having
>> to rewrite quite big parts of Shiny, I need access to a number of internal
>> functions. I do this using :::, but R CMD check obviously gives a note,
>> indicating that this is "a bad idea".
>>
>> I understand why this is in most cases a bad idea, but I see no other
>> option apart from literally copying these functions (and the ones they
>> depend on) all into my package.
>>
>> Hence my questions:
>>
>> - is it acceptable to get a package using ::: on CRAN? When I run R CMD
>> check --as-cran it only gives a note, but just to be sure...
>>
>
> No.
>
>
>> - anybody a better option to be able to use eg shiny:::selectizeIt,
>> shiny:::selectOptions etc?
>>
>
> Talk to the maintainer of shiny, and ask them to export those functions
> (or equivalent ones).  This might be more successful if you write the help
> pages and send them a Github pull request explaining your need, since that
> makes it essentially no immediate work (just long term support work).
>
> Duncan Murdoch
>
>
>
>> Thank you in advance
>> Joris
>>
>>
>


-- 
Joris Meys
Statistical consultant

Ghent University
Faculty of Bioscience Engineering
Department of Mathematical Modelling, Statistics and Bio-Informatics

tel : +32 9 264 59 87
Joris.Meys at Ugent.be
-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From disa at jhu.edu  Thu Jul  6 23:58:38 2017
From: disa at jhu.edu (Disa Mhembere)
Date: Thu, 6 Jul 2017 17:58:38 -0400
Subject: [R-pkg-devel] Question about selective platform for my R package
Message-ID: <CAHnX4PG+V_TjxavVav7SY-uifRWcGfXFmZyv5N3-vOFc9sa8bQ@mail.gmail.com>

Hello,

I made an R package that is specifically for OSX and Linux, and not
Windows. I pass all checks locally on these platforms, but when I upload my
package to CRAN the system tries to compile my code on a Windows box which
obviously results in an error. What is the traditional method of specifying
supported OSes and getting around this?

Thanks in advance,
Disa

	[[alternative HTML version deleted]]


From dasonk at gmail.com  Fri Jul  7 07:41:27 2017
From: dasonk at gmail.com (Dason Kurkiewicz)
Date: Fri, 7 Jul 2017 01:41:27 -0400
Subject: [R-pkg-devel] Question about selective platform for my R package
In-Reply-To: <CAHnX4PG+V_TjxavVav7SY-uifRWcGfXFmZyv5N3-vOFc9sa8bQ@mail.gmail.com>
References: <CAHnX4PG+V_TjxavVav7SY-uifRWcGfXFmZyv5N3-vOFc9sa8bQ@mail.gmail.com>
Message-ID: <CAJZYZZ5os=S260VoFmLhjOxnUQiKDpdPjL8=Zas+E638avVOog@mail.gmail.com>

What you want is to specify the OS_type in your DESCRIPTION file. This is
documented in writing R extensions
https://cran.r-project.org/doc/manuals/r-release/R-exts.html#The-DESCRIPTION-file

-Dason Kurkiewicz

On Jul 7, 2017 1:30 AM, "Disa Mhembere" <disa at jhu.edu> wrote:

> Hello,
>
> I made an R package that is specifically for OSX and Linux, and not
> Windows. I pass all checks locally on these platforms, but when I upload my
> package to CRAN the system tries to compile my code on a Windows box which
> obviously results in an error. What is the traditional method of specifying
> supported OSes and getting around this?
>
> Thanks in advance,
> Disa
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From disa at jhu.edu  Fri Jul  7 15:31:01 2017
From: disa at jhu.edu (Disa Mhembere)
Date: Fri, 7 Jul 2017 09:31:01 -0400
Subject: [R-pkg-devel] Question about selective platform for my R package
In-Reply-To: <CAJZYZZ5os=S260VoFmLhjOxnUQiKDpdPjL8=Zas+E638avVOog@mail.gmail.com>
References: <CAHnX4PG+V_TjxavVav7SY-uifRWcGfXFmZyv5N3-vOFc9sa8bQ@mail.gmail.com>
 <CAJZYZZ5os=S260VoFmLhjOxnUQiKDpdPjL8=Zas+E638avVOog@mail.gmail.com>
Message-ID: <CAHnX4PEr5JNJ3JrUVc=hF4h9miEDG-WG2JGhNZGJBOjdnpA1dw@mail.gmail.com>

Super -- exactly what I needed!
My other question was how to define OS level dependencies like `hwloc` for
linux that is obtainable via the system package manager?

Thanks,
- Disa

On Fri, Jul 7, 2017 at 1:41 AM, Dason Kurkiewicz <dasonk at gmail.com> wrote:

> What you want is to specify the OS_type in your DESCRIPTION file. This is
> documented in writing R extensions https://cran.r-
> project.org/doc/manuals/r-release/R-exts.html#The-DESCRIPTION-file
>
> -Dason Kurkiewicz
>
> On Jul 7, 2017 1:30 AM, "Disa Mhembere" <disa at jhu.edu> wrote:
>
>> Hello,
>>
>> I made an R package that is specifically for OSX and Linux, and not
>> Windows. I pass all checks locally on these platforms, but when I upload
>> my
>> package to CRAN the system tries to compile my code on a Windows box which
>> obviously results in an error. What is the traditional method of
>> specifying
>> supported OSes and getting around this?
>>
>> Thanks in advance,
>> Disa
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

	[[alternative HTML version deleted]]


From dasonk at gmail.com  Fri Jul  7 15:37:51 2017
From: dasonk at gmail.com (Dason Kurkiewicz)
Date: Fri, 7 Jul 2017 09:37:51 -0400
Subject: [R-pkg-devel] Question about selective platform for my R package
In-Reply-To: <CAJZYZZ5y5aaN1rLrS9EzK4WwZ2TJSTjyMdtzbZFVFX8ZYB7Y1Q@mail.gmail.com>
References: <CAHnX4PG+V_TjxavVav7SY-uifRWcGfXFmZyv5N3-vOFc9sa8bQ@mail.gmail.com>
 <CAJZYZZ5os=S260VoFmLhjOxnUQiKDpdPjL8=Zas+E638avVOog@mail.gmail.com>
 <CAHnX4PEr5JNJ3JrUVc=hF4h9miEDG-WG2JGhNZGJBOjdnpA1dw@mail.gmail.com>
 <CAJZYZZ5y5aaN1rLrS9EzK4WwZ2TJSTjyMdtzbZFVFX8ZYB7Y1Q@mail.gmail.com>
Message-ID: <CAJZYZZ7BPcbwdRdTvNu45N-zDhv_nGjHHbnP_Nfuhs81bKnN0Q@mail.gmail.com>

You'll want to examine the note on the SystemRequirements field for the
DESCRIPTION file in the same link as before. Actually maybe you should
spend some time reading through that documentation - it's a bit dry but
will get you more familiar with what's possible.

-Dason Kurkiewicz

On Jul 7, 2017 9:31 AM, "Disa Mhembere" <disa at jhu.edu> wrote:

Super -- exactly what I needed!
My other question was how to define OS level dependencies like `hwloc` for
linux that is obtainable via the system package manager?

Thanks,
- Disa

On Fri, Jul 7, 2017 at 1:41 AM, Dason Kurkiewicz <dasonk at gmail.com> wrote:

> What you want is to specify the OS_type in your DESCRIPTION file. This is
> documented in writing R extensions https://cran.r-proj
> ect.org/doc/manuals/r-release/R-exts.html#The-DESCRIPTION-file
>
> -Dason Kurkiewicz
>
> On Jul 7, 2017 1:30 AM, "Disa Mhembere" <disa at jhu.edu> wrote:
>
>> Hello,
>>
>> I made an R package that is specifically for OSX and Linux, and not
>> Windows. I pass all checks locally on these platforms, but when I upload
>> my
>> package to CRAN the system tries to compile my code on a Windows box which
>> obviously results in an error. What is the traditional method of
>> specifying
>> supported OSes and getting around this?
>>
>> Thanks in advance,
>> Disa
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

	[[alternative HTML version deleted]]


From disa at jhu.edu  Fri Jul  7 15:45:43 2017
From: disa at jhu.edu (Disa Mhembere)
Date: Fri, 7 Jul 2017 09:45:43 -0400
Subject: [R-pkg-devel] Question about selective platform for my R package
In-Reply-To: <CAJZYZZ7BPcbwdRdTvNu45N-zDhv_nGjHHbnP_Nfuhs81bKnN0Q@mail.gmail.com>
References: <CAHnX4PG+V_TjxavVav7SY-uifRWcGfXFmZyv5N3-vOFc9sa8bQ@mail.gmail.com>
 <CAJZYZZ5os=S260VoFmLhjOxnUQiKDpdPjL8=Zas+E638avVOog@mail.gmail.com>
 <CAHnX4PEr5JNJ3JrUVc=hF4h9miEDG-WG2JGhNZGJBOjdnpA1dw@mail.gmail.com>
 <CAJZYZZ5y5aaN1rLrS9EzK4WwZ2TJSTjyMdtzbZFVFX8ZYB7Y1Q@mail.gmail.com>
 <CAJZYZZ7BPcbwdRdTvNu45N-zDhv_nGjHHbnP_Nfuhs81bKnN0Q@mail.gmail.com>
Message-ID: <CAHnX4PFMBPAhr0uuR_bgZHdRHgVzQu5NTJAoCF1s+BBKNdWk4Q@mail.gmail.com>

Ok, sure. Thanks again :)

On Fri, Jul 7, 2017 at 9:37 AM, Dason Kurkiewicz <dasonk at gmail.com> wrote:

> You'll want to examine the note on the SystemRequirements field for the
> DESCRIPTION file in the same link as before. Actually maybe you should
> spend some time reading through that documentation - it's a bit dry but
> will get you more familiar with what's possible.
>
> -Dason Kurkiewicz
>
> On Jul 7, 2017 9:31 AM, "Disa Mhembere" <disa at jhu.edu> wrote:
>
> Super -- exactly what I needed!
> My other question was how to define OS level dependencies like `hwloc` for
> linux that is obtainable via the system package manager?
>
> Thanks,
> - Disa
>
> On Fri, Jul 7, 2017 at 1:41 AM, Dason Kurkiewicz <dasonk at gmail.com> wrote:
>
>> What you want is to specify the OS_type in your DESCRIPTION file. This is
>> documented in writing R extensions https://cran.r-proj
>> ect.org/doc/manuals/r-release/R-exts.html#The-DESCRIPTION-file
>>
>> -Dason Kurkiewicz
>>
>> On Jul 7, 2017 1:30 AM, "Disa Mhembere" <disa at jhu.edu> wrote:
>>
>>> Hello,
>>>
>>> I made an R package that is specifically for OSX and Linux, and not
>>> Windows. I pass all checks locally on these platforms, but when I upload
>>> my
>>> package to CRAN the system tries to compile my code on a Windows box
>>> which
>>> obviously results in an error. What is the traditional method of
>>> specifying
>>> supported OSes and getting around this?
>>>
>>> Thanks in advance,
>>> Disa
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>
>

	[[alternative HTML version deleted]]


From thorsten.wagner at mpi-dortmund.mpg.de  Tue Jul 11 10:19:33 2017
From: thorsten.wagner at mpi-dortmund.mpg.de (Thorsten Wagner)
Date: Tue, 11 Jul 2017 08:19:33 +0000
Subject: [R-pkg-devel] MAP-DP Clustering Algorithm package
Message-ID: <55129EE4-A431-4B0B-B5C8-C3E8FCA2832D@mpi-dortmund.mpg.de>

Hi,

I?ve implemented the MAP-DP clustering algorithm in R  following MatLab scripts of this paper:
http://journals.plos.org/plosone/article/citation?id=10.1371/journal.pone.0162259

Here is the repository:
https://github.com/thorstenwagner/R-ClustMAPDP

I would like to add the package to CRAN but something seems to be wrong with my description file:
"Malformed Description field: should contain one or more complete sentences.?

I would be happy if someone could tell me the reason.

Best,
Thorsten

From sarah.goslee at gmail.com  Tue Jul 11 14:10:18 2017
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Tue, 11 Jul 2017 08:10:18 -0400
Subject: [R-pkg-devel] MAP-DP Clustering Algorithm package
In-Reply-To: <55129EE4-A431-4B0B-B5C8-C3E8FCA2832D@mpi-dortmund.mpg.de>
References: <55129EE4-A431-4B0B-B5C8-C3E8FCA2832D@mpi-dortmund.mpg.de>
Message-ID: <CAM_vju=cMRyuz7Dsnoig2tc1E4z7jkq8MTCxmsj-tm3k5HY2Lg@mail.gmail.com>

A complete sentence ends in a period.



On Tue, Jul 11, 2017 at 4:19 AM, Thorsten Wagner
<thorsten.wagner at mpi-dortmund.mpg.de> wrote:
> Hi,
>
> I?ve implemented the MAP-DP clustering algorithm in R  following MatLab scripts of this paper:
> http://journals.plos.org/plosone/article/citation?id=10.1371/journal.pone.0162259
>
> Here is the repository:
> https://github.com/thorstenwagner/R-ClustMAPDP
>
> I would like to add the package to CRAN but something seems to be wrong with my description file:
> "Malformed Description field: should contain one or more complete sentences.?
>
> I would be happy if someone could tell me the reason.
>
> Best,
> Thorsten
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
Sarah Goslee
http://www.functionaldiversity.org


From ranjitstat at gmail.com  Wed Jul 12 13:00:38 2017
From: ranjitstat at gmail.com (Ranjit Paul)
Date: Wed, 12 Jul 2017 16:30:38 +0530
Subject: [R-pkg-devel] Errors during R package development
Message-ID: <CAC9Pq08VNOf9dbUt8yW+vLKyfnNMS0vaYyrh8P7uWync2CyHvg@mail.gmail.com>

I am trying to develop one package but getting the following errors and
notes. Please suggest for the possible solutions.


* checking R code for possible problems ... NOTE
StructuralBrekwithLongmemory: Error while checking: cannot open file
  'd:/temp/RtmpeMJ2np/RLIBS_2fe0425c94fc3/fracdiff/R/fracdiff.rdb': No
  such file or directory

** running examples for arch 'i386' ... ERROR
Running examples in 'TSF-Ex.R' failed
The error most likely occurred in:

base::assign(".ptime", proc.time(), pos = "CheckExEnv")

StructuralBrekwithLongmemory(Xt,bandwidth)
Error in StructuralBrekwithLongmemory(Xt, bandwidth) :
  cannot open file
'd:/temp/RtmpeMJ2np/RLIBS_2fe0425c94fc3/fracdiff/R/fracdiff.rdb':
No such file or directory
Execution halted
** running examples for arch 'x64' ... ERROR
Running examples in 'TSF-Ex.R' failed
The error most likely occurred in:

base::assign(".ptime", proc.time(), pos = "CheckExEnv")

-- 
Dr. Ranjit Kumar Paul
Scientist
IASRI, New Delhi
Mob: +91-8287778896

	[[alternative HTML version deleted]]


From lists at dewey.myzen.co.uk  Wed Jul 12 16:27:12 2017
From: lists at dewey.myzen.co.uk (Michael Dewey)
Date: Wed, 12 Jul 2017 15:27:12 +0100
Subject: [R-pkg-devel] Errors during R package development
In-Reply-To: <CAC9Pq08VNOf9dbUt8yW+vLKyfnNMS0vaYyrh8P7uWync2CyHvg@mail.gmail.com>
References: <CAC9Pq08VNOf9dbUt8yW+vLKyfnNMS0vaYyrh8P7uWync2CyHvg@mail.gmail.com>
Message-ID: <f7ccfd68-a8c2-e31f-20a5-1b67702e0e61@dewey.myzen.co.uk>

Dear Ranjit

Do you in fact have fracdiff.rdb and if so where is it in your file 
structure?

On 12/07/2017 12:00, Ranjit Paul wrote:
> I am trying to develop one package but getting the following errors and
> notes. Please suggest for the possible solutions.
>
>
> * checking R code for possible problems ... NOTE
> StructuralBrekwithLongmemory: Error while checking: cannot open file
>   'd:/temp/RtmpeMJ2np/RLIBS_2fe0425c94fc3/fracdiff/R/fracdiff.rdb': No
>   such file or directory
>
> ** running examples for arch 'i386' ... ERROR
> Running examples in 'TSF-Ex.R' failed
> The error most likely occurred in:
>
> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>
> StructuralBrekwithLongmemory(Xt,bandwidth)
> Error in StructuralBrekwithLongmemory(Xt, bandwidth) :
>   cannot open file
> 'd:/temp/RtmpeMJ2np/RLIBS_2fe0425c94fc3/fracdiff/R/fracdiff.rdb':
> No such file or directory
> Execution halted
> ** running examples for arch 'x64' ... ERROR
> Running examples in 'TSF-Ex.R' failed
> The error most likely occurred in:
>
> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From Brooke.Anderson at colostate.edu  Thu Jul 13 18:58:29 2017
From: Brooke.Anderson at colostate.edu (Anderson,Brooke)
Date: Thu, 13 Jul 2017 16:58:29 +0000
Subject: [R-pkg-devel] CRAN submission pretest warning about Rcpp version
 used to build dplyr
Message-ID: <BLUPR0701MB1012F95851C7D6B42B836AA7E6AC0@BLUPR0701MB1012.namprd07.prod.outlook.com>

I got the following warning when submitting a package to CRAN that I am struggling to understand:


Warning: Installed Rcpp (0.12.12) different from Rcpp used to build dplyr (0.12.11).


Here is a link to the directory with the full logs from the CRAN pretest checks:

https://win-builder.r-project.org/incoming_pretest/170713_171433_noaastormevents_010/


I did not get this warning on any of the systems where I ran checks before submitting to CRAN

(I ran checks on my local Mac OS X install, which is R 3.4.0, on win-builder, and on Travis using the

?trusty? distribution, ubuntu 14.04.5 with R 3.4.0). Within the 00install.out file from the CRAN pretest

(available in the link to the full log posted above), there is the message:


Please reinstall dplyr to avoid random crashes or undefined behavior.


I am curious if reinstalling dplyr on my local system should fix this, given that I did not get this warning

or message on my local system, or if the warning might result from the versions of dplyr and Rcpp on

the system used by the CRAN pretest? The only other example I could find through googling

of someone having a similar problem is here: https://github.com/KopfLab/lans2r/blob/master/cran-comments.md.

It sounds like in that case the warning may have resulted from the configuration of win-builder at the

time and was not something that could be resolved by the package maintainer.


The package I submitted does not have a direct dependency on Rcpp but does import dplyr and other

tidyverse  packages. My local system (on which I built the package I submitted to CRAN) has

the latest CRAN versions of both Rcpp (0.12.11) and dplyr (0.7.1). The full source code for the

package I submitted is at  https://github.com/geanders/noaastormevents.


I have not had this warning or a similar in past packages I?ve submitted with dependencies on

dplyr. I looked through recent threads here on r-pkg-devel and could not find any related posts.

Does anyone have a suggestion for what?s causing this warning on the CRAN pretest and

how I can resolve it? Thanks very much in advance for any advice.


	[[alternative HTML version deleted]]


From edd at debian.org  Thu Jul 13 19:13:48 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 13 Jul 2017 12:13:48 -0500
Subject: [R-pkg-devel] CRAN submission pretest warning about Rcpp
 version used to build dplyr
In-Reply-To: <BLUPR0701MB1012F95851C7D6B42B836AA7E6AC0@BLUPR0701MB1012.namprd07.prod.outlook.com>
References: <BLUPR0701MB1012F95851C7D6B42B836AA7E6AC0@BLUPR0701MB1012.namprd07.prod.outlook.com>
Message-ID: <22887.43596.880563.604643@bud.eddelbuettel.com>


On 13 July 2017 at 16:58, Anderson,Brooke wrote:
| I got the following warning when submitting a package to CRAN that I am struggling to understand:
| 
| 
| Warning: Installed Rcpp (0.12.12) different from Rcpp used to build dplyr (0.12.11).

It's a dplyr "thing". And for them, 'thing := feature' but to me 'thing := bug'.

For more, see   https://github.com/tidyverse/dplyr/issues/2966   which Kirill
opened after I brought this up in private. It even broke a Rcpp back test for me
for one package as it triggers a WARNING.

My world would be better without this, but it does not come from a package I
have control over.  So ... <shrugs> from here.  

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd at debian.org  Thu Jul 13 19:43:50 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 13 Jul 2017 12:43:50 -0500
Subject: [R-pkg-devel] CRAN submission pretest warning about Rcpp
 version used to build dplyr
In-Reply-To: <22887.43596.880563.604643@bud.eddelbuettel.com>
References: <BLUPR0701MB1012F95851C7D6B42B836AA7E6AC0@BLUPR0701MB1012.namprd07.prod.outlook.com>
 <22887.43596.880563.604643@bud.eddelbuettel.com>
Message-ID: <22887.45398.685310.676106@bud.eddelbuettel.com>


On 13 July 2017 at 12:13, Dirk Eddelbuettel wrote:
| 
| On 13 July 2017 at 16:58, Anderson,Brooke wrote:
| | I got the following warning when submitting a package to CRAN that I am struggling to understand:
| | 
| | 
| | Warning: Installed Rcpp (0.12.12) different from Rcpp used to build dplyr (0.12.11).

And what is worse is that you are now an innocent bystander injured by the
shrapnel from our Rcpp upload (0.12.12 is as of yet unreleased and currently
in testing at CRAN) which is about as orthogonal to your package upload as
can be.

Systems like rhub use Docker container to seperate testing environments.  On
win-builder everything seems to be one big happy family ...

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From i.ucar86 at gmail.com  Thu Jul 13 19:52:40 2017
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Thu, 13 Jul 2017 19:52:40 +0200
Subject: [R-pkg-devel] CRAN submission pretest warning about Rcpp
 version used to build dplyr
In-Reply-To: <22887.43596.880563.604643@bud.eddelbuettel.com>
References: <BLUPR0701MB1012F95851C7D6B42B836AA7E6AC0@BLUPR0701MB1012.namprd07.prod.outlook.com>
 <22887.43596.880563.604643@bud.eddelbuettel.com>
Message-ID: <CALEXWq1JjZMyZ1H0T-giGCo+OOUmPAR=VxN0+kNFuL1o=z9Upw@mail.gmail.com>

2017-07-13 19:13 GMT+02:00 Dirk Eddelbuettel <edd at debian.org>:
>
> On 13 July 2017 at 16:58, Anderson,Brooke wrote:
> | I got the following warning when submitting a package to CRAN that I am struggling to understand:
> |
> |
> | Warning: Installed Rcpp (0.12.12) different from Rcpp used to build dplyr (0.12.11).
>
> It's a dplyr "thing". And for them, 'thing := feature' but to me 'thing := bug'.
>
> For more, see   https://github.com/tidyverse/dplyr/issues/2966   which Kirill
> opened after I brought this up in private. It even broke a Rcpp back test for me
> for one package as it triggers a WARNING.
>
> My world would be better without this, but it does not come from a package I
> have control over.  So ... <shrugs> from here.

Or, in other words, Brooke, now you have to wait until Rcpp 0.12.12
appears on CRAN and then one or two days more until dplyr is rebuilt.
Then, try to resubmit your package.

I?aki


From Brooke.Anderson at colostate.edu  Thu Jul 13 19:55:49 2017
From: Brooke.Anderson at colostate.edu (Anderson,Brooke)
Date: Thu, 13 Jul 2017 17:55:49 +0000
Subject: [R-pkg-devel] CRAN submission pretest warning about Rcpp
 version used to build dplyr
In-Reply-To: <CALEXWq1JjZMyZ1H0T-giGCo+OOUmPAR=VxN0+kNFuL1o=z9Upw@mail.gmail.com>
References: <BLUPR0701MB1012F95851C7D6B42B836AA7E6AC0@BLUPR0701MB1012.namprd07.prod.outlook.com>
 <22887.43596.880563.604643@bud.eddelbuettel.com>,
 <CALEXWq1JjZMyZ1H0T-giGCo+OOUmPAR=VxN0+kNFuL1o=z9Upw@mail.gmail.com>
Message-ID: <BLUPR0701MB10121610AFE7F9AECCF70D1AE6AC0@BLUPR0701MB1012.namprd07.prod.outlook.com>

Great, thanks so much to you both for the tips. It's very useful to have an idea of why I got the warning and what I can do to resolve it.


Best,

Brooke

________________________________
From: I?aki ?car <i.ucar86 at gmail.com>
Sent: Thursday, July 13, 2017 11:52:40 AM
To: Dirk Eddelbuettel
Cc: Anderson,Brooke; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] CRAN submission pretest warning about Rcpp version used to build dplyr

2017-07-13 19:13 GMT+02:00 Dirk Eddelbuettel <edd at debian.org>:
>
> On 13 July 2017 at 16:58, Anderson,Brooke wrote:
> | I got the following warning when submitting a package to CRAN that I am struggling to understand:
> |
> |
> | Warning: Installed Rcpp (0.12.12) different from Rcpp used to build dplyr (0.12.11).
>
> It's a dplyr "thing". And for them, 'thing := feature' but to me 'thing := bug'.
>
> For more, see   https://github.com/tidyverse/dplyr/issues/2966   which Kirill
> opened after I brought this up in private. It even broke a Rcpp back test for me
> for one package as it triggers a WARNING.
>
> My world would be better without this, but it does not come from a package I
> have control over.  So ... <shrugs> from here.

Or, in other words, Brooke, now you have to wait until Rcpp 0.12.12
appears on CRAN and then one or two days more until dplyr is rebuilt.
Then, try to resubmit your package.

I?aki

	[[alternative HTML version deleted]]


From edd at debian.org  Thu Jul 13 20:19:58 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 13 Jul 2017 13:19:58 -0500
Subject: [R-pkg-devel] CRAN submission pretest warning about Rcpp
 version used to build dplyr
In-Reply-To: <CALEXWq1JjZMyZ1H0T-giGCo+OOUmPAR=VxN0+kNFuL1o=z9Upw@mail.gmail.com>
References: <BLUPR0701MB1012F95851C7D6B42B836AA7E6AC0@BLUPR0701MB1012.namprd07.prod.outlook.com>
 <22887.43596.880563.604643@bud.eddelbuettel.com>
 <CALEXWq1JjZMyZ1H0T-giGCo+OOUmPAR=VxN0+kNFuL1o=z9Upw@mail.gmail.com>
Message-ID: <22887.47566.804816.11059@bud.eddelbuettel.com>


On 13 July 2017 at 19:52, I?aki ?car wrote:
| Or, in other words, Brooke, now you have to wait until Rcpp 0.12.12
| appears on CRAN and then one or two days more until dplyr is rebuilt.
| Then, try to resubmit your package.

I disagree.

That was a false alert, and it can be ignored.  News at 11pm.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ligges at statistik.tu-dortmund.de  Thu Jul 13 23:52:35 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Thu, 13 Jul 2017 23:52:35 +0200
Subject: [R-pkg-devel] CRAN submission pretest warning about Rcpp
 version used to build dplyr
In-Reply-To: <22887.47566.804816.11059@bud.eddelbuettel.com>
References: <BLUPR0701MB1012F95851C7D6B42B836AA7E6AC0@BLUPR0701MB1012.namprd07.prod.outlook.com>
 <22887.43596.880563.604643@bud.eddelbuettel.com>
 <CALEXWq1JjZMyZ1H0T-giGCo+OOUmPAR=VxN0+kNFuL1o=z9Upw@mail.gmail.com>
 <22887.47566.804816.11059@bud.eddelbuettel.com>
Message-ID: <50d3839c-b4a6-f016-235a-1161b3264412@statistik.tu-dortmund.de>

Folks,

the behaviour on winbuilder is meant as a feature when people upload a 
series of package updates so that each one is checked against the newly 
uploaded version of the others.

In this case it was a mis-feature of course.
We will re-echeck this one and the Rcpp version has been cleaned up as well.

Note that I am not happy at all with the warning you got.

Best,
Uwe Ligges


On 13.07.2017 20:19, Dirk Eddelbuettel wrote:
> 
> On 13 July 2017 at 19:52, I?aki ?car wrote:
> | Or, in other words, Brooke, now you have to wait until Rcpp 0.12.12
> | appears on CRAN and then one or two days more until dplyr is rebuilt.
> | Then, try to resubmit your package.
> 
> I disagree.
> 
> That was a false alert, and it can be ignored.  News at 11pm.
> 
> Dirk
>


From i.ucar86 at gmail.com  Fri Jul 14 00:13:01 2017
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Fri, 14 Jul 2017 00:13:01 +0200
Subject: [R-pkg-devel] CRAN submission pretest warning about Rcpp
 version used to build dplyr
In-Reply-To: <22887.47566.804816.11059@bud.eddelbuettel.com>
References: <BLUPR0701MB1012F95851C7D6B42B836AA7E6AC0@BLUPR0701MB1012.namprd07.prod.outlook.com>
 <22887.43596.880563.604643@bud.eddelbuettel.com>
 <CALEXWq1JjZMyZ1H0T-giGCo+OOUmPAR=VxN0+kNFuL1o=z9Upw@mail.gmail.com>
 <22887.47566.804816.11059@bud.eddelbuettel.com>
Message-ID: <CALEXWq1YOwYoPAd=ks7X5Bizjcx4=HSUd5VJhbn3x+L67i3v5w@mail.gmail.com>

2017-07-13 20:19 GMT+02:00 Dirk Eddelbuettel <edd at debian.org>:
>
> On 13 July 2017 at 19:52, I?aki ?car wrote:
> | Or, in other words, Brooke, now you have to wait until Rcpp 0.12.12
> | appears on CRAN and then one or two days more until dplyr is rebuilt.
> | Then, try to resubmit your package.
>
> I disagree.
>
> That was a false alert, and it can be ignored.  News at 11pm.

So you just uploaded the package to win-builder? I thought you were
already submitting a new release.

Sorry, Brooke, then you can resubmit right away.

I?aki


From jernej.jevsenak at gmail.com  Thu Jul 20 08:01:31 2017
From: jernej.jevsenak at gmail.com (=?UTF-8?Q?Jernej_Jev=C5=A1enak?=)
Date: Thu, 20 Jul 2017 08:01:31 +0200
Subject: [R-pkg-devel] Package required and available but unsuitable
	version: 'stats'
Message-ID: <CACKka2357N9cYRDL6_m6JQSGP6G55RY3Uo2Z9KodWLUUCbs-6A@mail.gmail.com>

Hi,

recently, my first R package dendroExtra
<https://cran.r-project.org/package=dendroExtra> was accepted on CRAN. I
still must fix one problem that is given by CRAN checks
<https://cran.r-project.org/web/checks/check_results_dendroExtra.html>.

It says: Package required and available but unsuitable version: 'stats'.

I see that probable I did not correctly import the stats package. If I
remove the 'stats' package, I get an error in R CMD check. Is there any
suggestion how to properly solve the issue? How to properly import stats
package?


Thank you for your help.


Bests, Jernej

	[[alternative HTML version deleted]]


From maxime.turgeon at mail.mcgill.ca  Thu Jul 20 17:51:18 2017
From: maxime.turgeon at mail.mcgill.ca (Maxime Turgeon)
Date: Thu, 20 Jul 2017 15:51:18 +0000
Subject: [R-pkg-devel] Package required and available but
	unsuitable	version: 'stats'
In-Reply-To: <CACKka2357N9cYRDL6_m6JQSGP6G55RY3Uo2Z9KodWLUUCbs-6A@mail.gmail.com>
References: <CACKka2357N9cYRDL6_m6JQSGP6G55RY3Uo2Z9KodWLUUCbs-6A@mail.gmail.com>
Message-ID: <BLUPR03MB1425FA5C6992FD64E8C10F72BAA70@BLUPR03MB1425.namprd03.prod.outlook.com>

Hi Jernej,


The check errors you get are for older releases of R (3.3.2 and 3.3.3). The issue arises from your requirement in DESCRIPTION that the version of stats should be 3.4.0. Therefore, the solution to your problem depends on whether you really need this requirement on the version of stats or not: if you don't, simply lower the requirements to whatever you need; if you do, then this check error is valid, in the sense that you don't want users to use your package if they don't have the appropriate version of the stats package.


Note that if the latter applies, you should probably change your requirement on the version of R itself: currently you're requiring 3.1, which clashes with you're requiring 3.4 for stats.


Best,

Max

________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Jernej Jev?enak <jernej.jevsenak at gmail.com>
Sent: July 20, 2017 2:01:31 AM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Package required and available but unsuitable version: 'stats'

Hi,

recently, my first R package dendroExtra
<https://cran.r-project.org/package=dendroExtra> was accepted on CRAN. I
still must fix one problem that is given by CRAN checks
<https://cran.r-project.org/web/checks/check_results_dendroExtra.html>.

It says: Package required and available but unsuitable version: 'stats'.

I see that probable I did not correctly import the stats package. If I
remove the 'stats' package, I get an error in R CMD check. Is there any
suggestion how to properly solve the issue? How to properly import stats
package?


Thank you for your help.


Bests, Jernej

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From dasonk at gmail.com  Thu Jul 20 17:54:49 2017
From: dasonk at gmail.com (Dason Kurkiewicz)
Date: Thu, 20 Jul 2017 11:54:49 -0400
Subject: [R-pkg-devel] Package required and available but unsuitable
 version: 'stats'
In-Reply-To: <CACKka2357N9cYRDL6_m6JQSGP6G55RY3Uo2Z9KodWLUUCbs-6A@mail.gmail.com>
References: <CACKka2357N9cYRDL6_m6JQSGP6G55RY3Uo2Z9KodWLUUCbs-6A@mail.gmail.com>
Message-ID: <CAJZYZZ42zTF16g0WjUan+s9jbQm0iT02c_=tE=ArPLH4r6x1Sw@mail.gmail.com>

If you truly require stats>=3.4 you will need to also specify R>=3.4. If
you don't require that version of stats then just remove the version
specification.

You are getting errors only on r-oldrel which runs older versions of R so
it doesn't have access to stats>=3.4. With a specification on the minimum
version of R it would know not to run on those and you won't get the
errors.

-Dason Kurkiewicz

On Jul 20, 2017 11:43 AM, "Jernej Jev?enak" <jernej.jevsenak at gmail.com>
wrote:

> Hi,
>
> recently, my first R package dendroExtra
> <https://cran.r-project.org/package=dendroExtra> was accepted on CRAN. I
> still must fix one problem that is given by CRAN checks
> <https://cran.r-project.org/web/checks/check_results_dendroExtra.html>.
>
> It says: Package required and available but unsuitable version: 'stats'.
>
> I see that probable I did not correctly import the stats package. If I
> remove the 'stats' package, I get an error in R CMD check. Is there any
> suggestion how to properly solve the issue? How to properly import stats
> package?
>
>
> Thank you for your help.
>
>
> Bests, Jernej
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From maechler at stat.math.ethz.ch  Thu Jul 20 18:01:44 2017
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Thu, 20 Jul 2017 18:01:44 +0200
Subject: [R-pkg-devel] Package required and available but unsuitable
	version: 'stats'
In-Reply-To: <BLUPR03MB1425FA5C6992FD64E8C10F72BAA70@BLUPR03MB1425.namprd03.prod.outlook.com>
References: <CACKka2357N9cYRDL6_m6JQSGP6G55RY3Uo2Z9KodWLUUCbs-6A@mail.gmail.com>
 <BLUPR03MB1425FA5C6992FD64E8C10F72BAA70@BLUPR03MB1425.namprd03.prod.outlook.com>
Message-ID: <22896.54248.114478.194987@stat.math.ethz.ch>

>>>>> Maxime Turgeon <maxime.turgeon at mail.mcgill.ca>
>>>>>     on Thu, 20 Jul 2017 15:51:18 +0000 writes:

    > Hi Jernej,
    > The check errors you get are for older releases of R (3.3.2 and 3.3.3). The issue arises from your requirement in DESCRIPTION that the version of stats should be 3.4.0. Therefore, the solution to your problem depends on whether you really need this requirement on the version of stats or not: if you don't, simply lower the requirements to whatever you need; if you do, then this check error is valid, in the sense that you don't want users to use your package if they don't have the appropriate version of the stats package.


    > Note that if the latter applies, you should probably change your requirement on the version of R itself: currently you're requiring 3.1, which clashes with you're requiring 3.4 for stats.

I would go slightly further say that it is "conceptually wrong"
to use any version requirement on 'stats':  The version of
'stats' is *always* equal to the version of R.

So really, do replace
     "stats (>= 3.4.0)"
by   "stats"     


Also, are you sure that R 3.1.0 is sufficient for dendroExtra, i.e.,
can you check that, or did you at least check that for a
slightly older version of dendroExtra in the past?

The CRAN "robots" will not be able to check that, but as you see
checks for the "last before release" version, in this case R 3.3.x,
are made.

To be save, you'd say  "R (>= 3.3.3)"
whereas to be relaxed, you'd leave away any version requirement
for R unless you know that you are using a relatively new
feature of R (which includes 'stats', 'utils', etc). 

Best,
Martin

    > Best,
    > Max

    >> Hi,

    >> recently, my first R package dendroExtra
    >> <https://cran.r-project.org/package=dendroExtra> was accepted on CRAN. I
    >> still must fix one problem that is given by CRAN checks
    >> <https://cran.r-project.org/web/checks/check_results_dendroExtra.html>.

    >> It says: Package required and available but unsuitable version: 'stats'.

    >> I see that probable I did not correctly import the stats package. If I
    >> remove the 'stats' package, I get an error in R CMD check. Is there any
    >> suggestion how to properly solve the issue? How to properly import stats
    >> package?


    >> Thank you for your help.


    >> Bests, Jernej


From jernej.jevsenak at gmail.com  Fri Jul 21 08:28:06 2017
From: jernej.jevsenak at gmail.com (=?UTF-8?Q?Jernej_Jev=C5=A1enak?=)
Date: Fri, 21 Jul 2017 08:28:06 +0200
Subject: [R-pkg-devel] Package required and available but unsuitable
 version: 'stats'
In-Reply-To: <22896.54248.114478.194987@stat.math.ethz.ch>
References: <CACKka2357N9cYRDL6_m6JQSGP6G55RY3Uo2Z9KodWLUUCbs-6A@mail.gmail.com>
 <BLUPR03MB1425FA5C6992FD64E8C10F72BAA70@BLUPR03MB1425.namprd03.prod.outlook.com>
 <22896.54248.114478.194987@stat.math.ethz.ch>
Message-ID: <CACKka212dehxH3EY5Gy12Wzzwp+2ODQDFjKrTfReU5XTTz5G2w@mail.gmail.com>

Thank you all for the helpful responses.

Best, Jerry

2017-07-20 18:01 GMT+02:00 Martin Maechler <maechler at stat.math.ethz.ch>:

> >>>>> Maxime Turgeon <maxime.turgeon at mail.mcgill.ca>
> >>>>>     on Thu, 20 Jul 2017 15:51:18 +0000 writes:
>
>     > Hi Jernej,
>     > The check errors you get are for older releases of R (3.3.2 and
> 3.3.3). The issue arises from your requirement in DESCRIPTION that the
> version of stats should be 3.4.0. Therefore, the solution to your problem
> depends on whether you really need this requirement on the version of stats
> or not: if you don't, simply lower the requirements to whatever you need;
> if you do, then this check error is valid, in the sense that you don't want
> users to use your package if they don't have the appropriate version of the
> stats package.
>
>
>     > Note that if the latter applies, you should probably change your
> requirement on the version of R itself: currently you're requiring 3.1,
> which clashes with you're requiring 3.4 for stats.
>
> I would go slightly further say that it is "conceptually wrong"
> to use any version requirement on 'stats':  The version of
> 'stats' is *always* equal to the version of R.
>
> So really, do replace
>      "stats (>= 3.4.0)"
> by   "stats"
>
>
> Also, are you sure that R 3.1.0 is sufficient for dendroExtra, i.e.,
> can you check that, or did you at least check that for a
> slightly older version of dendroExtra in the past?
>
> The CRAN "robots" will not be able to check that, but as you see
> checks for the "last before release" version, in this case R 3.3.x,
> are made.
>
> To be save, you'd say  "R (>= 3.3.3)"
> whereas to be relaxed, you'd leave away any version requirement
> for R unless you know that you are using a relatively new
> feature of R (which includes 'stats', 'utils', etc).
>
> Best,
> Martin
>
>     > Best,
>     > Max
>
>     >> Hi,
>
>     >> recently, my first R package dendroExtra
>     >> <https://cran.r-project.org/package=dendroExtra> was accepted on
> CRAN. I
>     >> still must fix one problem that is given by CRAN checks
>     >> <https://cran.r-project.org/web/checks/check_results_
> dendroExtra.html>.
>
>     >> It says: Package required and available but unsuitable version:
> 'stats'.
>
>     >> I see that probable I did not correctly import the stats package.
> If I
>     >> remove the 'stats' package, I get an error in R CMD check. Is there
> any
>     >> suggestion how to properly solve the issue? How to properly import
> stats
>     >> package?
>
>
>     >> Thank you for your help.
>
>
>     >> Bests, Jernej
>
>

	[[alternative HTML version deleted]]


From rphilip.chalmers at gmail.com  Tue Jul 25 22:42:44 2017
From: rphilip.chalmers at gmail.com (Phil Chalmers)
Date: Tue, 25 Jul 2017 16:42:44 -0400
Subject: [R-pkg-devel] \Sexpr{} expressions but no 'build/partial.rdb' file
Message-ID: <CAKYNACFtcSbcCdDxiQxnvCSK-w6u05qmK4ry3cuOf2V=cpfxuw@mail.gmail.com>

Hi all,

First time posting here, so hopefully I'm following the correct etiquette.

I recently received the error:

"Package has help file(s) containing build-stage \Sexpr{} expressions but
no 'build/partial.rdb' file."

when submitting a package to CRAN (source code: https://github.com/
philchalmers/mirtCAT). However, I'm having difficulty reproducing the exact
problem on my Windows and Linux computers with the latest R dev version
(2017-07-25 r72968). Moreover, I don't really understand the issue, as I do
not use \Sexpr{} anywhere in the package.

After a quick search, I found a link on SO (https://stackoverflow.com/
questions/32357637/two-note-messages-from-r-cmd-check-as-cran), but it does
not appear too helpful as far as I can tell (I don't explicitly use
\package_____() commands anywhere). Can anyone shed some light on this
warning and my difficulty in reproducing the message? Thank you in advance.

Phil

	[[alternative HTML version deleted]]


From maxime.turgeon at mail.mcgill.ca  Wed Jul 26 04:13:39 2017
From: maxime.turgeon at mail.mcgill.ca (MTurgeon)
Date: Tue, 25 Jul 2017 20:13:39 -0600
Subject: [R-pkg-devel] \Sexpr{} expressions but no 'build/partial.rdb'
 file
In-Reply-To: <CAKYNACFtcSbcCdDxiQxnvCSK-w6u05qmK4ry3cuOf2V=cpfxuw@mail.gmail.com>
References: <CAKYNACFtcSbcCdDxiQxnvCSK-w6u05qmK4ry3cuOf2V=cpfxuw@mail.gmail.com>
Message-ID: <cacc93cd-5af6-11ff-9474-9c034c26c5f4@mail.mcgill.ca>

Hi Phil,

As you said yourself, if you can't reproduce the message locally, it 
will be difficult to fix. But maybe the following will help: I looked at 
your Github repository, Tand it seems the only changes that were made to 
your files in the man/ directory since your successful release of 
mirtCAR 1.5 to CRAN is the doi's that you added. In particular, you're 
using the macro \doi. As explained in WRE 
(https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#User_002ddefined-macros), 
since R 3.2.0 users can define their own Latex-like macros to be used in 
the documentation files. I don't know how to fix your error, but I would 
look into that first. Maybe it's a matter of a missing dependency (e.g. 
one of the base packages), maybe you need to add an extra file to your 
package when you use macros. But it still doesn't explain why the error 
doesn't appear on all/most platforms...

Hope my comments help,

Max


On 2017-07-25 02:42 PM, Phil Chalmers wrote:
> Hi all,
>
> First time posting here, so hopefully I'm following the correct etiquette.
>
> I recently received the error:
>
> "Package has help file(s) containing build-stage \Sexpr{} expressions but
> no 'build/partial.rdb' file."
>
> when submitting a package to CRAN (source code: https://github.com/
> philchalmers/mirtCAT). However, I'm having difficulty reproducing the exact
> problem on my Windows and Linux computers with the latest R dev version
> (2017-07-25 r72968). Moreover, I don't really understand the issue, as I do
> not use \Sexpr{} anywhere in the package.
>
> After a quick search, I found a link on SO (https://stackoverflow.com/
> questions/32357637/two-note-messages-from-r-cmd-check-as-cran), but it does
> not appear too helpful as far as I can tell (I don't explicitly use
> \package_____() commands anywhere). Can anyone shed some light on this
> warning and my difficulty in reproducing the message? Thank you in advance.
>
> Phil
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
-----------------------------------------------------------------

Maxime Turgeon, PhD candidate

Department of Epidemiology, Biostatistics and Occupational Health
McGill University


From rphilip.chalmers at gmail.com  Wed Jul 26 06:31:47 2017
From: rphilip.chalmers at gmail.com (Phil Chalmers)
Date: Wed, 26 Jul 2017 00:31:47 -0400
Subject: [R-pkg-devel] \Sexpr{} expressions but no 'build/partial.rdb'
	file
In-Reply-To: <cacc93cd-5af6-11ff-9474-9c034c26c5f4@mail.mcgill.ca>
References: <CAKYNACFtcSbcCdDxiQxnvCSK-w6u05qmK4ry3cuOf2V=cpfxuw@mail.gmail.com>
 <cacc93cd-5af6-11ff-9474-9c034c26c5f4@mail.mcgill.ca>
Message-ID: <CAKYNACEjiPs=D0-0_K3nVxj107o7wyoPDkUK=4xUWmts+wh8Bw@mail.gmail.com>

Hi Max,

Thank you for your reply and feedback. As an aside, I recently released a
package which also adopted the new \doi{} macro, and it seems to have
passed CRANs tests and is now available. So, I suspect it's not related to
this inherently macro, though perhaps you are right it could be related to
a missing dependency. What, exactly, I'm not sure, and tracking it down
seems nearly impossible at the moment....

Phil

On Tue, Jul 25, 2017 at 10:13 PM, MTurgeon <maxime.turgeon at mail.mcgill.ca>
wrote:

> Hi Phil,
>
> As you said yourself, if you can't reproduce the message locally, it will
> be difficult to fix. But maybe the following will help: I looked at your
> Github repository, Tand it seems the only changes that were made to your
> files in the man/ directory since your successful release of mirtCAR 1.5 to
> CRAN is the doi's that you added. In particular, you're using the macro
> \doi. As explained in WRE (https://cran.r-project.org/do
> c/manuals/r-devel/R-exts.html#User_002ddefined-macros), since R 3.2.0
> users can define their own Latex-like macros to be used in the
> documentation files. I don't know how to fix your error, but I would look
> into that first. Maybe it's a matter of a missing dependency (e.g. one of
> the base packages), maybe you need to add an extra file to your package
> when you use macros. But it still doesn't explain why the error doesn't
> appear on all/most platforms...
>
> Hope my comments help,
>
> Max
>
>
>
> On 2017-07-25 02:42 PM, Phil Chalmers wrote:
>
>> Hi all,
>>
>> First time posting here, so hopefully I'm following the correct etiquette.
>>
>> I recently received the error:
>>
>> "Package has help file(s) containing build-stage \Sexpr{} expressions but
>> no 'build/partial.rdb' file."
>>
>> when submitting a package to CRAN (source code: https://github.com/
>> philchalmers/mirtCAT). However, I'm having difficulty reproducing the
>> exact
>> problem on my Windows and Linux computers with the latest R dev version
>> (2017-07-25 r72968). Moreover, I don't really understand the issue, as I
>> do
>> not use \Sexpr{} anywhere in the package.
>>
>> After a quick search, I found a link on SO (https://stackoverflow.com/
>> questions/32357637/two-note-messages-from-r-cmd-check-as-cran), but it
>> does
>> not appear too helpful as far as I can tell (I don't explicitly use
>> \package_____() commands anywhere). Can anyone shed some light on this
>> warning and my difficulty in reproducing the message? Thank you in
>> advance.
>>
>> Phil
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
> --
> -----------------------------------------------------------------
>
> Maxime Turgeon, PhD candidate
>
> Department of Epidemiology, Biostatistics and Occupational Health
> McGill University
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Wed Jul 26 13:06:38 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 26 Jul 2017 07:06:38 -0400
Subject: [R-pkg-devel] \Sexpr{} expressions but no 'build/partial.rdb'
 file
In-Reply-To: <CAKYNACFtcSbcCdDxiQxnvCSK-w6u05qmK4ry3cuOf2V=cpfxuw@mail.gmail.com>
References: <CAKYNACFtcSbcCdDxiQxnvCSK-w6u05qmK4ry3cuOf2V=cpfxuw@mail.gmail.com>
Message-ID: <e22c5830-3d8b-b3ca-b4a6-9ec45f91ffbb@gmail.com>

On 25/07/2017 4:42 PM, Phil Chalmers wrote:
> Hi all,
>
> First time posting here, so hopefully I'm following the correct etiquette.
>
> I recently received the error:
>
> "Package has help file(s) containing build-stage \Sexpr{} expressions but
> no 'build/partial.rdb' file."
>
> when submitting a package to CRAN (source code: https://github.com/
> philchalmers/mirtCAT). However, I'm having difficulty reproducing the exact
> problem on my Windows and Linux computers with the latest R dev version
> (2017-07-25 r72968). Moreover, I don't really understand the issue, as I do
> not use \Sexpr{} anywhere in the package.
>
> After a quick search, I found a link on SO (https://stackoverflow.com/
> questions/32357637/two-note-messages-from-r-cmd-check-as-cran), but it does
> not appear too helpful as far as I can tell (I don't explicitly use
> \package_____() commands anywhere). Can anyone shed some light on this
> warning and my difficulty in reproducing the message? Thank you in advance.

How did you produce the tar.gz file?  If you did it in some way other 
than running "R CMD build ...", don't do that.   When I run R CMD build, 
I do get the build/partial.rdb file in the tarball.

Duncan Murdoch


From rphilip.chalmers at gmail.com  Wed Jul 26 15:05:03 2017
From: rphilip.chalmers at gmail.com (Phil Chalmers)
Date: Wed, 26 Jul 2017 09:05:03 -0400
Subject: [R-pkg-devel] \Sexpr{} expressions but no 'build/partial.rdb'
	file
In-Reply-To: <e22c5830-3d8b-b3ca-b4a6-9ec45f91ffbb@gmail.com>
References: <CAKYNACFtcSbcCdDxiQxnvCSK-w6u05qmK4ry3cuOf2V=cpfxuw@mail.gmail.com>
 <e22c5830-3d8b-b3ca-b4a6-9ec45f91ffbb@gmail.com>
Message-ID: <CAKYNACGbpv1mD6ktGHKsVWaf4YeTZoL7aRGW+ovMKFR0vUh9pA@mail.gmail.com>

Hi Duncan,

I use the standard R CMD build/check --as-cran combo. Here's my output from
my Win 10 64-bit box:

C:\Users\Phil\Desktop>C:/PROGRA~1/R/R-devel/bin/x64/R CMD build mirtCAT
* checking for file 'mirtCAT/DESCRIPTION' ... OK
* preparing 'mirtCAT':
* checking DESCRIPTION meta-information ... OK
* cleaning src
* installing the package to process help pages
* saving partial Rd database
* creating vignettes ... OK
* cleaning src
* checking for LF line-endings in source and make files and shell scripts
* checking for empty or unneeded directories
* building 'mirtCAT_1.6.tar.gz'


C:\Users\Phil\Desktop>C:/PROGRA~1/R/R-devel/bin/x64/R CMD check
mirtCAT_1.6.tar.gz --as-cran
* using log directory 'C:/Users/Phil/Desktop/mirtCAT.Rcheck'
* using R Under development (unstable) (2017-07-25 r72968)
* using platform: x86_64-w64-mingw32 (64-bit)
* using session charset: ISO8859-1
* using option '--as-cran'
* checking for file 'mirtCAT/DESCRIPTION' ... OK
* checking extension type ... Package
* this is package 'mirtCAT' version '1.6'
* checking CRAN incoming feasibility ... Note_to_CRAN_maintainers
Maintainer: 'Phil Chalmers <rphilip.chalmers at gmail.com>'
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking whether package 'mirtCAT' can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking 'build' directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ...
OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking loading without being on the library search path ... OK
* checking use of S3 registration ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd line widths ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking line endings in C/C++/Fortran sources/headers ... OK
* checking line endings in Makefiles ... OK
* checking compilation flags in Makevars ... OK
* checking for GNU extensions in Makefiles ... OK
* checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS) ... OK
* checking compiled code ... OK
* checking installed files from 'inst/doc' ... OK
* checking files in 'vignettes' ... OK
* checking examples ... OK
* checking for unstated dependencies in vignettes ... OK
* checking package vignettes in 'inst/doc' ... OK
* checking re-building of vignette outputs ... OK
* checking PDF version of manual ... OK
* DONE

Status: OK

--------------------------------------------------------

Exactly the same thing occurs on my Ubuntu 64-bit box. So again, I'm still
unsure how to proceed, particularly if only some OS's/versions are
detecting this error other than mine.

Phil

On Wed, Jul 26, 2017 at 7:06 AM, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 25/07/2017 4:42 PM, Phil Chalmers wrote:
>
>> Hi all,
>>
>> First time posting here, so hopefully I'm following the correct etiquette.
>>
>> I recently received the error:
>>
>> "Package has help file(s) containing build-stage \Sexpr{} expressions but
>> no 'build/partial.rdb' file."
>>
>> when submitting a package to CRAN (source code: https://github.com/
>> philchalmers/mirtCAT). However, I'm having difficulty reproducing the
>> exact
>> problem on my Windows and Linux computers with the latest R dev version
>> (2017-07-25 r72968). Moreover, I don't really understand the issue, as I
>> do
>> not use \Sexpr{} anywhere in the package.
>>
>> After a quick search, I found a link on SO (https://stackoverflow.com/
>> questions/32357637/two-note-messages-from-r-cmd-check-as-cran), but it
>> does
>> not appear too helpful as far as I can tell (I don't explicitly use
>> \package_____() commands anywhere). Can anyone shed some light on this
>> warning and my difficulty in reproducing the message? Thank you in
>> advance.
>>
>
> How did you produce the tar.gz file?  If you did it in some way other than
> running "R CMD build ...", don't do that.   When I run R CMD build, I do
> get the build/partial.rdb file in the tarball.
>
> Duncan Murdoch
>
>

	[[alternative HTML version deleted]]


From simon.wood at bath.edu  Wed Jul 26 12:47:30 2017
From: simon.wood at bath.edu (Simon Wood)
Date: Wed, 26 Jul 2017 11:47:30 +0100
Subject: [R-pkg-devel] spell check in DESCRIPTION
In-Reply-To: <mailman.1024.1501065793.1137.r-package-devel@r-project.org>
References: <mailman.1024.1501065793.1137.r-package-devel@r-project.org>
Message-ID: <49fd488c-eea5-e4a6-30c7-2b7f719f6a60@bath.edu>

I've just had my package (mgcv) bounced because of 3 notes. One of these
is complaining about spelling in the DESCRIPTION file.

Possibly mis-spelled words in DESCRIPTION:
    AIC (5:47, 8:75)
    GAM (5:14)
    GAMMs (7:20)
    GAMs (7:14)
    GCV (5:43, 8:57)
    REML (5:51, 8:62)
    UBRE (8:70)
    smoothers (9:59)

However if I run

R CMD check mgcv_1.8-18.tar.gz --as-cran

using the same rdevel version apparently used in the test then no problem is reported. Does anyone know how I can turn on the spell check? And how do I request that `smoothers' be allowed as a valid word (even if acronyms are to be banned)?
(Full report in link below)

best,
Simon


<https://win-builder.r-project.org/incoming_pretest/170726_112041_mgcv_1818/00check.log>

-- Simon Wood, School of Mathematics, University of Bristol BS8 1TW UK 
+44 (0)117 33 18273 http://www.maths.bris.ac.uk/~sw15190




	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Wed Jul 26 16:30:00 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 26 Jul 2017 10:30:00 -0400
Subject: [R-pkg-devel] \Sexpr{} expressions but no 'build/partial.rdb'
 file
In-Reply-To: <CAKYNACGbpv1mD6ktGHKsVWaf4YeTZoL7aRGW+ovMKFR0vUh9pA@mail.gmail.com>
References: <CAKYNACFtcSbcCdDxiQxnvCSK-w6u05qmK4ry3cuOf2V=cpfxuw@mail.gmail.com>
 <e22c5830-3d8b-b3ca-b4a6-9ec45f91ffbb@gmail.com>
 <CAKYNACGbpv1mD6ktGHKsVWaf4YeTZoL7aRGW+ovMKFR0vUh9pA@mail.gmail.com>
Message-ID: <2c14ba39-7f97-0b92-c1c1-abe8b8c22d3f@gmail.com>

On 26/07/2017 9:05 AM, Phil Chalmers wrote:
> Hi Duncan,
>
> I use the standard R CMD build/check --as-cran combo. Here's my output
> from my Win 10 64-bit box:
>
> C:\Users\Phil\Desktop>C:/PROGRA~1/R/R-devel/bin/x64/R CMD build mirtCAT
> * checking for file 'mirtCAT/DESCRIPTION' ... OK
> * preparing 'mirtCAT':
> * checking DESCRIPTION meta-information ... OK
> * cleaning src
> * installing the package to process help pages
> * saving partial Rd database
> * creating vignettes ... OK
> * cleaning src
> * checking for LF line-endings in source and make files and shell scripts
> * checking for empty or unneeded directories
> * building 'mirtCAT_1.6.tar.gz'
>
>
> C:\Users\Phil\Desktop>C:/PROGRA~1/R/R-devel/bin/x64/R CMD check
> mirtCAT_1.6.tar.gz --as-cran
> * using log directory 'C:/Users/Phil/Desktop/mirtCAT.Rcheck'
> * using R Under development (unstable) (2017-07-25 r72968)
> * using platform: x86_64-w64-mingw32 (64-bit)
> * using session charset: ISO8859-1
> * using option '--as-cran'
> * checking for file 'mirtCAT/DESCRIPTION' ... OK
> * checking extension type ... Package
> * this is package 'mirtCAT' version '1.6'
> * checking CRAN incoming feasibility ... Note_to_CRAN_maintainers
> Maintainer: 'Phil Chalmers <rphilip.chalmers at gmail.com
> <mailto:rphilip.chalmers at gmail.com>>'
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking whether package 'mirtCAT' can be installed ... OK
> * checking installed package size ... OK
> * checking package directory ... OK
> * checking 'build' directory ... OK
> * checking DESCRIPTION meta-information ... OK
> * checking top-level files ... OK
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * checking whether the package can be loaded ... OK
> * checking whether the package can be loaded with stated dependencies ... OK
> * checking whether the package can be unloaded cleanly ... OK
> * checking whether the namespace can be loaded with stated dependencies
> ... OK
> * checking whether the namespace can be unloaded cleanly ... OK
> * checking loading without being on the library search path ... OK
> * checking use of S3 registration ... OK
> * checking dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... OK
> * checking Rd files ... OK
> * checking Rd metadata ... OK
> * checking Rd line widths ... OK
> * checking Rd cross-references ... OK
> * checking for missing documentation entries ... OK
> * checking for code/documentation mismatches ... OK
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking line endings in C/C++/Fortran sources/headers ... OK
> * checking line endings in Makefiles ... OK
> * checking compilation flags in Makevars ... OK
> * checking for GNU extensions in Makefiles ... OK
> * checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS) ... OK
> * checking compiled code ... OK
> * checking installed files from 'inst/doc' ... OK
> * checking files in 'vignettes' ... OK
> * checking examples ... OK
> * checking for unstated dependencies in vignettes ... OK
> * checking package vignettes in 'inst/doc' ... OK
> * checking re-building of vignette outputs ... OK
> * checking PDF version of manual ... OK
> * DONE
>
> Status: OK
>
> --------------------------------------------------------
>
> Exactly the same thing occurs on my Ubuntu 64-bit box. So again, I'm
> still unsure how to proceed, particularly if only some OS's/versions are
> detecting this error other than mine.

Sounds like a bug somewhere.  Does the file you submitted to CRAN 
contain the build/partial.rdb file?  If so, the bug is in the check code 
being run by CRAN.  If not, the bug is in the build code that you ran.

You can get a listing of the contents from within R using

untar("mirtCAT_1.6.tar.gz", list = TRUE)

When I do that, the partial.rdb file is entry 28.

Duncan Murdoch

>
> Phil
>
> On Wed, Jul 26, 2017 at 7:06 AM, Duncan Murdoch
> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
>
>     On 25/07/2017 4:42 PM, Phil Chalmers wrote:
>
>         Hi all,
>
>         First time posting here, so hopefully I'm following the correct
>         etiquette.
>
>         I recently received the error:
>
>         "Package has help file(s) containing build-stage \Sexpr{}
>         expressions but
>         no 'build/partial.rdb' file."
>
>         when submitting a package to CRAN (source code: https://github.com/
>         philchalmers/mirtCAT). However, I'm having difficulty
>         reproducing the exact
>         problem on my Windows and Linux computers with the latest R dev
>         version
>         (2017-07-25 r72968). Moreover, I don't really understand the
>         issue, as I do
>         not use \Sexpr{} anywhere in the package.
>
>         After a quick search, I found a link on SO
>         (https://stackoverflow.com/
>         questions/32357637/two-note-messages-from-r-cmd-check-as-cran),
>         but it does
>         not appear too helpful as far as I can tell (I don't explicitly use
>         \package_____() commands anywhere). Can anyone shed some light
>         on this
>         warning and my difficulty in reproducing the message? Thank you
>         in advance.
>
>
>     How did you produce the tar.gz file?  If you did it in some way
>     other than running "R CMD build ...", don't do that.   When I run R
>     CMD build, I do get the build/partial.rdb file in the tarball.
>
>     Duncan Murdoch
>
>


From murdoch.duncan at gmail.com  Wed Jul 26 16:45:51 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 26 Jul 2017 10:45:51 -0400
Subject: [R-pkg-devel] spell check in DESCRIPTION
In-Reply-To: <49fd488c-eea5-e4a6-30c7-2b7f719f6a60@bath.edu>
References: <mailman.1024.1501065793.1137.r-package-devel@r-project.org>
 <49fd488c-eea5-e4a6-30c7-2b7f719f6a60@bath.edu>
Message-ID: <081328ba-1734-7f13-d65a-0e34f1aee442@gmail.com>

On 26/07/2017 6:47 AM, Simon Wood wrote:
> I've just had my package (mgcv) bounced because of 3 notes. One of these
> is complaining about spelling in the DESCRIPTION file.
>
> Possibly mis-spelled words in DESCRIPTION:
>     AIC (5:47, 8:75)
>     GAM (5:14)
>     GAMMs (7:20)
>     GAMs (7:14)
>     GCV (5:43, 8:57)
>     REML (5:51, 8:62)
>     UBRE (8:70)
>     smoothers (9:59)
>
> However if I run
>
> R CMD check mgcv_1.8-18.tar.gz --as-cran
>
> using the same rdevel version apparently used in the test then no problem is reported. Does anyone know how I can turn on the spell check?

If you have aspell, you can set the environment variable

_R_CHECK_CRAN_INCOMING_USE_ASPELL_

to TRUE.  (This should be documented in "R Internals" along with the 
other incoming check variables, but appears to have been overlooked.)


  And how do I request that `smoothers' be allowed as a valid word (even 
if acronyms are to be banned)?

Acronyms aren't banned, those are false positives (as is "smoothers"). 
To get words added, you would normally suggest they be added to 
share/dictionaries/en_stats.txt in the R sources, but I see "smoothers" 
is already there, and has been since 2012.  Not sure why it showed up in 
your check.

Duncan Murdoch

> (Full report in link below)
>
> best,
> Simon
>
>
> <https://win-builder.r-project.org/incoming_pretest/170726_112041_mgcv_1818/00check.log>
>
> -- Simon Wood, School of Mathematics, University of Bristol BS8 1TW UK
> +44 (0)117 33 18273 http://www.maths.bris.ac.uk/~sw15190
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From rphilip.chalmers at gmail.com  Wed Jul 26 18:23:03 2017
From: rphilip.chalmers at gmail.com (Phil Chalmers)
Date: Wed, 26 Jul 2017 12:23:03 -0400
Subject: [R-pkg-devel] \Sexpr{} expressions but no 'build/partial.rdb'
	file
In-Reply-To: <2c14ba39-7f97-0b92-c1c1-abe8b8c22d3f@gmail.com>
References: <CAKYNACFtcSbcCdDxiQxnvCSK-w6u05qmK4ry3cuOf2V=cpfxuw@mail.gmail.com>
 <e22c5830-3d8b-b3ca-b4a6-9ec45f91ffbb@gmail.com>
 <CAKYNACGbpv1mD6ktGHKsVWaf4YeTZoL7aRGW+ovMKFR0vUh9pA@mail.gmail.com>
 <2c14ba39-7f97-0b92-c1c1-abe8b8c22d3f@gmail.com>
Message-ID: <CAKYNACE1nsLtm5=F6B+mcw6Bz+rMgV-5r1PCcwoMR6gc8xmMcg@mail.gmail.com>

Yes, I can see the partial.rdb file in the list, also in entry 28. So I
believe the problem is on the CRAN build.

Phil

On Wed, Jul 26, 2017 at 10:30 AM, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 26/07/2017 9:05 AM, Phil Chalmers wrote:
>
>> Hi Duncan,
>>
>> I use the standard R CMD build/check --as-cran combo. Here's my output
>> from my Win 10 64-bit box:
>>
>> C:\Users\Phil\Desktop>C:/PROGRA~1/R/R-devel/bin/x64/R CMD build mirtCAT
>> * checking for file 'mirtCAT/DESCRIPTION' ... OK
>> * preparing 'mirtCAT':
>> * checking DESCRIPTION meta-information ... OK
>> * cleaning src
>> * installing the package to process help pages
>> * saving partial Rd database
>> * creating vignettes ... OK
>> * cleaning src
>> * checking for LF line-endings in source and make files and shell scripts
>> * checking for empty or unneeded directories
>> * building 'mirtCAT_1.6.tar.gz'
>>
>>
>> C:\Users\Phil\Desktop>C:/PROGRA~1/R/R-devel/bin/x64/R CMD check
>> mirtCAT_1.6.tar.gz --as-cran
>> * using log directory 'C:/Users/Phil/Desktop/mirtCAT.Rcheck'
>> * using R Under development (unstable) (2017-07-25 r72968)
>> * using platform: x86_64-w64-mingw32 (64-bit)
>> * using session charset: ISO8859-1
>> * using option '--as-cran'
>> * checking for file 'mirtCAT/DESCRIPTION' ... OK
>> * checking extension type ... Package
>> * this is package 'mirtCAT' version '1.6'
>> * checking CRAN incoming feasibility ... Note_to_CRAN_maintainers
>> Maintainer: 'Phil Chalmers <rphilip.chalmers at gmail.com
>> <mailto:rphilip.chalmers at gmail.com>>'
>>
>> * checking package namespace information ... OK
>> * checking package dependencies ... OK
>> * checking if this is a source package ... OK
>> * checking if there is a namespace ... OK
>> * checking for executable files ... OK
>> * checking for hidden files and directories ... OK
>> * checking for portable file names ... OK
>> * checking whether package 'mirtCAT' can be installed ... OK
>> * checking installed package size ... OK
>> * checking package directory ... OK
>> * checking 'build' directory ... OK
>> * checking DESCRIPTION meta-information ... OK
>> * checking top-level files ... OK
>> * checking for left-over files ... OK
>> * checking index information ... OK
>> * checking package subdirectories ... OK
>> * checking R files for non-ASCII characters ... OK
>> * checking R files for syntax errors ... OK
>> * checking whether the package can be loaded ... OK
>> * checking whether the package can be loaded with stated dependencies ...
>> OK
>> * checking whether the package can be unloaded cleanly ... OK
>> * checking whether the namespace can be loaded with stated dependencies
>> ... OK
>> * checking whether the namespace can be unloaded cleanly ... OK
>> * checking loading without being on the library search path ... OK
>> * checking use of S3 registration ... OK
>> * checking dependencies in R code ... OK
>> * checking S3 generic/method consistency ... OK
>> * checking replacement functions ... OK
>> * checking foreign function calls ... OK
>> * checking R code for possible problems ... OK
>> * checking Rd files ... OK
>> * checking Rd metadata ... OK
>> * checking Rd line widths ... OK
>> * checking Rd cross-references ... OK
>> * checking for missing documentation entries ... OK
>> * checking for code/documentation mismatches ... OK
>> * checking Rd \usage sections ... OK
>> * checking Rd contents ... OK
>> * checking for unstated dependencies in examples ... OK
>> * checking line endings in C/C++/Fortran sources/headers ... OK
>> * checking line endings in Makefiles ... OK
>> * checking compilation flags in Makevars ... OK
>> * checking for GNU extensions in Makefiles ... OK
>> * checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS) ... OK
>> * checking compiled code ... OK
>> * checking installed files from 'inst/doc' ... OK
>> * checking files in 'vignettes' ... OK
>> * checking examples ... OK
>> * checking for unstated dependencies in vignettes ... OK
>> * checking package vignettes in 'inst/doc' ... OK
>> * checking re-building of vignette outputs ... OK
>> * checking PDF version of manual ... OK
>> * DONE
>>
>> Status: OK
>>
>> --------------------------------------------------------
>>
>> Exactly the same thing occurs on my Ubuntu 64-bit box. So again, I'm
>> still unsure how to proceed, particularly if only some OS's/versions are
>> detecting this error other than mine.
>>
>
> Sounds like a bug somewhere.  Does the file you submitted to CRAN contain
> the build/partial.rdb file?  If so, the bug is in the check code being run
> by CRAN.  If not, the bug is in the build code that you ran.
>
> You can get a listing of the contents from within R using
>
> untar("mirtCAT_1.6.tar.gz", list = TRUE)
>
> When I do that, the partial.rdb file is entry 28.
>
> Duncan Murdoch
>
>
>> Phil
>>
>> On Wed, Jul 26, 2017 at 7:06 AM, Duncan Murdoch
>> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
>>
>>     On 25/07/2017 4:42 PM, Phil Chalmers wrote:
>>
>>         Hi all,
>>
>>         First time posting here, so hopefully I'm following the correct
>>         etiquette.
>>
>>         I recently received the error:
>>
>>         "Package has help file(s) containing build-stage \Sexpr{}
>>         expressions but
>>         no 'build/partial.rdb' file."
>>
>>         when submitting a package to CRAN (source code:
>> https://github.com/
>>         philchalmers/mirtCAT). However, I'm having difficulty
>>         reproducing the exact
>>         problem on my Windows and Linux computers with the latest R dev
>>         version
>>         (2017-07-25 r72968). Moreover, I don't really understand the
>>         issue, as I do
>>         not use \Sexpr{} anywhere in the package.
>>
>>         After a quick search, I found a link on SO
>>         (https://stackoverflow.com/
>>         questions/32357637/two-note-messages-from-r-cmd-check-as-cran),
>>         but it does
>>         not appear too helpful as far as I can tell (I don't explicitly
>> use
>>         \package_____() commands anywhere). Can anyone shed some light
>>         on this
>>         warning and my difficulty in reproducing the message? Thank you
>>         in advance.
>>
>>
>>     How did you produce the tar.gz file?  If you did it in some way
>>     other than running "R CMD build ...", don't do that.   When I run R
>>     CMD build, I do get the build/partial.rdb file in the tarball.
>>
>>     Duncan Murdoch
>>
>>
>>
>

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Thu Jul 27 14:34:22 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 27 Jul 2017 08:34:22 -0400
Subject: [R-pkg-devel] \Sexpr{} expressions but no 'build/partial.rdb'
 file
In-Reply-To: <CAKYNACE1nsLtm5=F6B+mcw6Bz+rMgV-5r1PCcwoMR6gc8xmMcg@mail.gmail.com>
References: <CAKYNACFtcSbcCdDxiQxnvCSK-w6u05qmK4ry3cuOf2V=cpfxuw@mail.gmail.com>
 <e22c5830-3d8b-b3ca-b4a6-9ec45f91ffbb@gmail.com>
 <CAKYNACGbpv1mD6ktGHKsVWaf4YeTZoL7aRGW+ovMKFR0vUh9pA@mail.gmail.com>
 <2c14ba39-7f97-0b92-c1c1-abe8b8c22d3f@gmail.com>
 <CAKYNACE1nsLtm5=F6B+mcw6Bz+rMgV-5r1PCcwoMR6gc8xmMcg@mail.gmail.com>
Message-ID: <d78edaed-5766-cb6b-7d81-68651d46984f@gmail.com>

On 26/07/2017 12:23 PM, Phil Chalmers wrote:
> Yes, I can see the partial.rdb file in the list, also in entry 28. So I
> believe the problem is on the CRAN build.

For the rest of the list:  This claim is incorrect.  The tarball that 
was submitted to CRAN did not contain the partial.rdb file.  The CRAN 
message was correct.

Phil, it would be helpful if you explained how you really produced that 
tarball, so people know how not to do it.

Duncan Murdoch

>
> Phil
>
> On Wed, Jul 26, 2017 at 10:30 AM, Duncan Murdoch
> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
>
>     On 26/07/2017 9:05 AM, Phil Chalmers wrote:
>
>         Hi Duncan,
>
>         I use the standard R CMD build/check --as-cran combo. Here's my
>         output
>         from my Win 10 64-bit box:
>
>         C:\Users\Phil\Desktop>C:/PROGRA~1/R/R-devel/bin/x64/R CMD build
>         mirtCAT
>         * checking for file 'mirtCAT/DESCRIPTION' ... OK
>         * preparing 'mirtCAT':
>         * checking DESCRIPTION meta-information ... OK
>         * cleaning src
>         * installing the package to process help pages
>         * saving partial Rd database
>         * creating vignettes ... OK
>         * cleaning src
>         * checking for LF line-endings in source and make files and
>         shell scripts
>         * checking for empty or unneeded directories
>         * building 'mirtCAT_1.6.tar.gz'
>
>
>         C:\Users\Phil\Desktop>C:/PROGRA~1/R/R-devel/bin/x64/R CMD check
>         mirtCAT_1.6.tar.gz --as-cran
>         * using log directory 'C:/Users/Phil/Desktop/mirtCAT.Rcheck'
>         * using R Under development (unstable) (2017-07-25 r72968)
>         * using platform: x86_64-w64-mingw32 (64-bit)
>         * using session charset: ISO8859-1
>         * using option '--as-cran'
>         * checking for file 'mirtCAT/DESCRIPTION' ... OK
>         * checking extension type ... Package
>         * this is package 'mirtCAT' version '1.6'
>         * checking CRAN incoming feasibility ... Note_to_CRAN_maintainers
>         Maintainer: 'Phil Chalmers <rphilip.chalmers at gmail.com
>         <mailto:rphilip.chalmers at gmail.com>
>         <mailto:rphilip.chalmers at gmail.com
>         <mailto:rphilip.chalmers at gmail.com>>>'
>
>         * checking package namespace information ... OK
>         * checking package dependencies ... OK
>         * checking if this is a source package ... OK
>         * checking if there is a namespace ... OK
>         * checking for executable files ... OK
>         * checking for hidden files and directories ... OK
>         * checking for portable file names ... OK
>         * checking whether package 'mirtCAT' can be installed ... OK
>         * checking installed package size ... OK
>         * checking package directory ... OK
>         * checking 'build' directory ... OK
>         * checking DESCRIPTION meta-information ... OK
>         * checking top-level files ... OK
>         * checking for left-over files ... OK
>         * checking index information ... OK
>         * checking package subdirectories ... OK
>         * checking R files for non-ASCII characters ... OK
>         * checking R files for syntax errors ... OK
>         * checking whether the package can be loaded ... OK
>         * checking whether the package can be loaded with stated
>         dependencies ... OK
>         * checking whether the package can be unloaded cleanly ... OK
>         * checking whether the namespace can be loaded with stated
>         dependencies
>         ... OK
>         * checking whether the namespace can be unloaded cleanly ... OK
>         * checking loading without being on the library search path ... OK
>         * checking use of S3 registration ... OK
>         * checking dependencies in R code ... OK
>         * checking S3 generic/method consistency ... OK
>         * checking replacement functions ... OK
>         * checking foreign function calls ... OK
>         * checking R code for possible problems ... OK
>         * checking Rd files ... OK
>         * checking Rd metadata ... OK
>         * checking Rd line widths ... OK
>         * checking Rd cross-references ... OK
>         * checking for missing documentation entries ... OK
>         * checking for code/documentation mismatches ... OK
>         * checking Rd \usage sections ... OK
>         * checking Rd contents ... OK
>         * checking for unstated dependencies in examples ... OK
>         * checking line endings in C/C++/Fortran sources/headers ... OK
>         * checking line endings in Makefiles ... OK
>         * checking compilation flags in Makevars ... OK
>         * checking for GNU extensions in Makefiles ... OK
>         * checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS)
>         ... OK
>         * checking compiled code ... OK
>         * checking installed files from 'inst/doc' ... OK
>         * checking files in 'vignettes' ... OK
>         * checking examples ... OK
>         * checking for unstated dependencies in vignettes ... OK
>         * checking package vignettes in 'inst/doc' ... OK
>         * checking re-building of vignette outputs ... OK
>         * checking PDF version of manual ... OK
>         * DONE
>
>         Status: OK
>
>         --------------------------------------------------------
>
>         Exactly the same thing occurs on my Ubuntu 64-bit box. So again, I'm
>         still unsure how to proceed, particularly if only some
>         OS's/versions are
>         detecting this error other than mine.
>
>
>     Sounds like a bug somewhere.  Does the file you submitted to CRAN
>     contain the build/partial.rdb file?  If so, the bug is in the check
>     code being run by CRAN.  If not, the bug is in the build code that
>     you ran.
>
>     You can get a listing of the contents from within R using
>
>     untar("mirtCAT_1.6.tar.gz", list = TRUE)
>
>     When I do that, the partial.rdb file is entry 28.
>
>     Duncan Murdoch
>
>
>         Phil
>
>         On Wed, Jul 26, 2017 at 7:06 AM, Duncan Murdoch
>         <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>
>         <mailto:murdoch.duncan at gmail.com
>         <mailto:murdoch.duncan at gmail.com>>> wrote:
>
>             On 25/07/2017 4:42 PM, Phil Chalmers wrote:
>
>                 Hi all,
>
>                 First time posting here, so hopefully I'm following the
>         correct
>                 etiquette.
>
>                 I recently received the error:
>
>                 "Package has help file(s) containing build-stage \Sexpr{}
>                 expressions but
>                 no 'build/partial.rdb' file."
>
>                 when submitting a package to CRAN (source code:
>         https://github.com/
>                 philchalmers/mirtCAT). However, I'm having difficulty
>                 reproducing the exact
>                 problem on my Windows and Linux computers with the
>         latest R dev
>                 version
>                 (2017-07-25 r72968). Moreover, I don't really understand the
>                 issue, as I do
>                 not use \Sexpr{} anywhere in the package.
>
>                 After a quick search, I found a link on SO
>                 (https://stackoverflow.com/
>
>         questions/32357637/two-note-messages-from-r-cmd-check-as-cran),
>                 but it does
>                 not appear too helpful as far as I can tell (I don't
>         explicitly use
>                 \package_____() commands anywhere). Can anyone shed some
>         light
>                 on this
>                 warning and my difficulty in reproducing the message?
>         Thank you
>                 in advance.
>
>
>             How did you produce the tar.gz file?  If you did it in some way
>             other than running "R CMD build ...", don't do that.   When
>         I run R
>             CMD build, I do get the build/partial.rdb file in the tarball.
>
>             Duncan Murdoch
>
>
>
>


From rphilip.chalmers at gmail.com  Thu Jul 27 15:34:23 2017
From: rphilip.chalmers at gmail.com (Phil Chalmers)
Date: Thu, 27 Jul 2017 09:34:23 -0400
Subject: [R-pkg-devel] \Sexpr{} expressions but no 'build/partial.rdb'
	file
In-Reply-To: <d78edaed-5766-cb6b-7d81-68651d46984f@gmail.com>
References: <CAKYNACFtcSbcCdDxiQxnvCSK-w6u05qmK4ry3cuOf2V=cpfxuw@mail.gmail.com>
 <e22c5830-3d8b-b3ca-b4a6-9ec45f91ffbb@gmail.com>
 <CAKYNACGbpv1mD6ktGHKsVWaf4YeTZoL7aRGW+ovMKFR0vUh9pA@mail.gmail.com>
 <2c14ba39-7f97-0b92-c1c1-abe8b8c22d3f@gmail.com>
 <CAKYNACE1nsLtm5=F6B+mcw6Bz+rMgV-5r1PCcwoMR6gc8xmMcg@mail.gmail.com>
 <d78edaed-5766-cb6b-7d81-68651d46984f@gmail.com>
Message-ID: <CAKYNACFtjZQ6VktyaThMLy=JjGeE7UA0eP3qH95mZXyjuubh6w@mail.gmail.com>

Thanks, Duncan. The tarball was created using the standard R CMD build
function. But, as far as I can tell, I must have built the tarball with a
previous R version (e.g., version 3.3), which did not contain the
partial.rdb file when constructing the tarball, and then checked with the
dev version. For some reason my check didn't flag this missing file
locally; but, I suppose mixing and matching R command line versions is a
dangerous game to play anyway.

Moral: always check AND build the package for CRAN with the latest dev, as
even the build process may have changed.

Phil

On Thu, Jul 27, 2017 at 8:34 AM, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 26/07/2017 12:23 PM, Phil Chalmers wrote:
>
>> Yes, I can see the partial.rdb file in the list, also in entry 28. So I
>> believe the problem is on the CRAN build.
>>
>
> For the rest of the list:  This claim is incorrect.  The tarball that was
> submitted to CRAN did not contain the partial.rdb file.  The CRAN message
> was correct.
>
> Phil, it would be helpful if you explained how you really produced that
> tarball, so people know how not to do it.
>
> Duncan Murdoch
>
>
>> Phil
>>
>> On Wed, Jul 26, 2017 at 10:30 AM, Duncan Murdoch
>> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
>>
>>     On 26/07/2017 9:05 AM, Phil Chalmers wrote:
>>
>>         Hi Duncan,
>>
>>         I use the standard R CMD build/check --as-cran combo. Here's my
>>         output
>>         from my Win 10 64-bit box:
>>
>>         C:\Users\Phil\Desktop>C:/PROGRA~1/R/R-devel/bin/x64/R CMD build
>>         mirtCAT
>>         * checking for file 'mirtCAT/DESCRIPTION' ... OK
>>         * preparing 'mirtCAT':
>>         * checking DESCRIPTION meta-information ... OK
>>         * cleaning src
>>         * installing the package to process help pages
>>         * saving partial Rd database
>>         * creating vignettes ... OK
>>         * cleaning src
>>         * checking for LF line-endings in source and make files and
>>         shell scripts
>>         * checking for empty or unneeded directories
>>         * building 'mirtCAT_1.6.tar.gz'
>>
>>
>>         C:\Users\Phil\Desktop>C:/PROGRA~1/R/R-devel/bin/x64/R CMD check
>>         mirtCAT_1.6.tar.gz --as-cran
>>         * using log directory 'C:/Users/Phil/Desktop/mirtCAT.Rcheck'
>>         * using R Under development (unstable) (2017-07-25 r72968)
>>         * using platform: x86_64-w64-mingw32 (64-bit)
>>         * using session charset: ISO8859-1
>>         * using option '--as-cran'
>>         * checking for file 'mirtCAT/DESCRIPTION' ... OK
>>         * checking extension type ... Package
>>         * this is package 'mirtCAT' version '1.6'
>>         * checking CRAN incoming feasibility ... Note_to_CRAN_maintainers
>>         Maintainer: 'Phil Chalmers <rphilip.chalmers at gmail.com
>>         <mailto:rphilip.chalmers at gmail.com>
>>         <mailto:rphilip.chalmers at gmail.com
>>
>>         <mailto:rphilip.chalmers at gmail.com>>>'
>>
>>         * checking package namespace information ... OK
>>         * checking package dependencies ... OK
>>         * checking if this is a source package ... OK
>>         * checking if there is a namespace ... OK
>>         * checking for executable files ... OK
>>         * checking for hidden files and directories ... OK
>>         * checking for portable file names ... OK
>>         * checking whether package 'mirtCAT' can be installed ... OK
>>         * checking installed package size ... OK
>>         * checking package directory ... OK
>>         * checking 'build' directory ... OK
>>         * checking DESCRIPTION meta-information ... OK
>>         * checking top-level files ... OK
>>         * checking for left-over files ... OK
>>         * checking index information ... OK
>>         * checking package subdirectories ... OK
>>         * checking R files for non-ASCII characters ... OK
>>         * checking R files for syntax errors ... OK
>>         * checking whether the package can be loaded ... OK
>>         * checking whether the package can be loaded with stated
>>         dependencies ... OK
>>         * checking whether the package can be unloaded cleanly ... OK
>>         * checking whether the namespace can be loaded with stated
>>         dependencies
>>         ... OK
>>         * checking whether the namespace can be unloaded cleanly ... OK
>>         * checking loading without being on the library search path ... OK
>>         * checking use of S3 registration ... OK
>>         * checking dependencies in R code ... OK
>>         * checking S3 generic/method consistency ... OK
>>         * checking replacement functions ... OK
>>         * checking foreign function calls ... OK
>>         * checking R code for possible problems ... OK
>>         * checking Rd files ... OK
>>         * checking Rd metadata ... OK
>>         * checking Rd line widths ... OK
>>         * checking Rd cross-references ... OK
>>         * checking for missing documentation entries ... OK
>>         * checking for code/documentation mismatches ... OK
>>         * checking Rd \usage sections ... OK
>>         * checking Rd contents ... OK
>>         * checking for unstated dependencies in examples ... OK
>>         * checking line endings in C/C++/Fortran sources/headers ... OK
>>         * checking line endings in Makefiles ... OK
>>         * checking compilation flags in Makevars ... OK
>>         * checking for GNU extensions in Makefiles ... OK
>>         * checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS)
>>         ... OK
>>         * checking compiled code ... OK
>>         * checking installed files from 'inst/doc' ... OK
>>         * checking files in 'vignettes' ... OK
>>         * checking examples ... OK
>>         * checking for unstated dependencies in vignettes ... OK
>>         * checking package vignettes in 'inst/doc' ... OK
>>         * checking re-building of vignette outputs ... OK
>>         * checking PDF version of manual ... OK
>>         * DONE
>>
>>         Status: OK
>>
>>         --------------------------------------------------------
>>
>>         Exactly the same thing occurs on my Ubuntu 64-bit box. So again,
>> I'm
>>         still unsure how to proceed, particularly if only some
>>         OS's/versions are
>>         detecting this error other than mine.
>>
>>
>>     Sounds like a bug somewhere.  Does the file you submitted to CRAN
>>     contain the build/partial.rdb file?  If so, the bug is in the check
>>     code being run by CRAN.  If not, the bug is in the build code that
>>     you ran.
>>
>>     You can get a listing of the contents from within R using
>>
>>     untar("mirtCAT_1.6.tar.gz", list = TRUE)
>>
>>     When I do that, the partial.rdb file is entry 28.
>>
>>     Duncan Murdoch
>>
>>
>>         Phil
>>
>>         On Wed, Jul 26, 2017 at 7:06 AM, Duncan Murdoch
>>         <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>
>>         <mailto:murdoch.duncan at gmail.com
>>
>>         <mailto:murdoch.duncan at gmail.com>>> wrote:
>>
>>             On 25/07/2017 4:42 PM, Phil Chalmers wrote:
>>
>>                 Hi all,
>>
>>                 First time posting here, so hopefully I'm following the
>>         correct
>>                 etiquette.
>>
>>                 I recently received the error:
>>
>>                 "Package has help file(s) containing build-stage \Sexpr{}
>>                 expressions but
>>                 no 'build/partial.rdb' file."
>>
>>                 when submitting a package to CRAN (source code:
>>         https://github.com/
>>                 philchalmers/mirtCAT). However, I'm having difficulty
>>                 reproducing the exact
>>                 problem on my Windows and Linux computers with the
>>         latest R dev
>>                 version
>>                 (2017-07-25 r72968). Moreover, I don't really understand
>> the
>>                 issue, as I do
>>                 not use \Sexpr{} anywhere in the package.
>>
>>                 After a quick search, I found a link on SO
>>                 (https://stackoverflow.com/
>>
>>         questions/32357637/two-note-messages-from-r-cmd-check-as-cran),
>>                 but it does
>>                 not appear too helpful as far as I can tell (I don't
>>         explicitly use
>>                 \package_____() commands anywhere). Can anyone shed some
>>         light
>>                 on this
>>                 warning and my difficulty in reproducing the message?
>>         Thank you
>>                 in advance.
>>
>>
>>             How did you produce the tar.gz file?  If you did it in some
>> way
>>             other than running "R CMD build ...", don't do that.   When
>>         I run R
>>             CMD build, I do get the build/partial.rdb file in the tarball.
>>
>>             Duncan Murdoch
>>
>>
>>
>>
>>
>

	[[alternative HTML version deleted]]


From pavel at uow.edu.au  Fri Jul 28 14:42:01 2017
From: pavel at uow.edu.au (Pavel Krivitsky)
Date: Fri, 28 Jul 2017 12:42:01 +0000
Subject: [R-pkg-devel] Seamless way for a CRAN-bound package to depend on a
 Bioconductor package?
Message-ID: <1501245721.3057.19.camel@uow.edu.au>

Dear All,

There is a Bioconductor package (S4Vectors) whose functionality I want
to use in one of my packages, which I usually submit to CRAN.

At this time, install.packages() does not automatically fetch
dependencies from Bioconductor as far as I can tell, though it can be
told to do so via setRepostitory().

Is there any way to make it more seamless for the end-user?

I know that there is the 'Additional_repositories:' setting, but I
think that's for R CMD check only: although devtools::install()
understands it and the 'biocView:' setting, install.packages() does
not.

Another option might be to make it a Suggested package and then force
its installation (if necessary) and loading in the .onLoad() function
of my package, but it's not clear whether that's CRAN-appropriate
behaviour.

				Thanks in advance,
				Pavel




-- 
Pavel Krivitsky
Lecturer in Statistics
National Institute of Applied Statistics Research Australia (NIASRA)
School of Mathematics and Applied Statistics | Building 39C Room 154
University of Wollongong NSW 2522 Australia
T +61 2 4221 3713
Web (NIASRA): http://niasra.uow.edu.au/index.html
Web (Personal): http://www.krivitsky.net/research
ORCID: 0000-0002-9101-3362

NOTICE: This email is intended for the addressee named and may contain
confidential information. If you are not the intended recipient, please
delete it and notify the sender. Please consider the environment before
printing this email.

From edd at debian.org  Fri Jul 28 14:52:55 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri, 28 Jul 2017 07:52:55 -0500
Subject: [R-pkg-devel] Seamless way for a CRAN-bound package to depend
 on a Bioconductor package?
In-Reply-To: <1501245721.3057.19.camel@uow.edu.au>
References: <1501245721.3057.19.camel@uow.edu.au>
Message-ID: <22907.13223.219898.384064@bud.eddelbuettel.com>


On 28 July 2017 at 12:42, Pavel Krivitsky wrote:
| Dear All,
| 
| There is a Bioconductor package (S4Vectors) whose functionality I want
| to use in one of my packages, which I usually submit to CRAN.
| 
| At this time, install.packages() does not automatically fetch
| dependencies from Bioconductor as far as I can tell, though it can be
| told to do so via setRepostitory().
| 
| Is there any way to make it more seamless for the end-user?

It's there all along, see from the sources (and sorry for the linewrap):

edd at bud:~/svn/r-devel$ cat etc/repositories
## The fields here are tab-delimited: there is a row name
## menu_name    is the name to be used in setRepositories()
## URL          is the base URL (see R-admin.texi)
## default      is whether this should be a default choice
## source, win.binary, mac.binary   indicate if the corresponding type is 
present
##
## BioC entries are version-specific, with %v getting expanded to the
## BioC version associated with the current R version.
## Also, %bm is substituted from the setting of getOption("BioC_mirror")
##
menu_name       URL     default source  win.binary      mac.binary
CRAN    CRAN    @CRAN@  TRUE    TRUE    TRUE    TRUE
BioCsoft        "BioC software" %bm/packages/%v/bioc    FALSE   TRUE    TRUE
TRUE
BioCann "BioC annotation"       %bm/packages/%v/data/annotation FALSE   TRUE
TRUE    TRUE
BioCexp "BioC experiment"       %bm/packages/%v/data/experiment FALSE   TRUE
TRUE    TRUE
BioCextra       "BioC extra"    %bm/packages/%v/extra   FALSE   TRUE    TRUE
TRUE
CRANextra       CRAN (extras)   https://www.stats.ox.ac.uk/pub/RWin     FALSE
TRUE    TRUE    TRUE
Omegahat        Omegahat        http://www.omegahat.net/R       FALSE   TRUE
FALSE   FALSE
R-Forge R-Forge https://R-Forge.R-project.org   FALSE   TRUE    TRUE    TRUE
rforge.net      rforge.net      https://www.rforge.net  FALSE   TRUE    TRUE
TRUE
edd at bud:~/svn/r-devel$

But you simply cannot ensure that users have it enabled.

| I know that there is the 'Additional_repositories:' setting, but I
| think that's for R CMD check only: although devtools::install()
| understands it and the 'biocView:' setting, install.packages() does
| not.

You can use that for suggsted packages, see Anderson and Eddelbuettel in the
current issue of the R Journal for more.

| Another option might be to make it a Suggested package and then force
| its installation (if necessary) and loading in the .onLoad() function
| of my package, but it's not clear whether that's CRAN-appropriate
| behaviour.

I'd say it is not.

Dirk
| 
| 				Thanks in advance,
| 				Pavel
| 
| 
| 
| 
| -- 
| Pavel Krivitsky
| Lecturer in Statistics
| National Institute of Applied Statistics Research Australia (NIASRA)
| School of Mathematics and Applied Statistics | Building 39C Room 154
| University of Wollongong NSW 2522 Australia
| T +61 2 4221 3713
| Web (NIASRA): http://niasra.uow.edu.au/index.html
| Web (Personal): http://www.krivitsky.net/research
| ORCID: 0000-0002-9101-3362
| 
| NOTICE: This email is intended for the addressee named and may contain
| confidential information. If you are not the intended recipient, please
| delete it and notify the sender. Please consider the environment before
| printing this email.
| ______________________________________________
| R-package-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From kevin.asr at outlook.com  Fri Jul 28 17:30:58 2017
From: kevin.asr at outlook.com (=?iso-8859-1?Q?K=E9vin_A=2E_S=2E_R=2E?=)
Date: Fri, 28 Jul 2017 15:30:58 +0000
Subject: [R-pkg-devel] Problems runing a example (shiny App) within a package
Message-ID: <RO1P152MB0380DBC7A337903A14F5948AEDBF0@RO1P152MB0380.LAMP152.PROD.OUTLOOK.COM>

Problems running a example (shiny App) within a package


#main code


runclt = function(){
  shiny::runApp(system.file("shinyCLT", package="CLT"))
}


#example


\examples{
 runclt()
}



#Problem


R CMD check breaks in "checking examples ..." and don't complete the tests.

How to solve it


Link to source code https://1drv.ms/u/s!AqhYme4BRWAog3VVjYb7oJ4jopDN

[https://r1.res.office365.com/owa/prem/images/dc-generic_40.png]<https://1drv.ms/u/s!AqhYme4BRWAog3VVjYb7oJ4jopDN>
CLT_2.1.1.tar.gz<https://1drv.ms/u/s!AqhYme4BRWAog3VVjYb7oJ4jopDN>
Compartilhado via OneDrive




thanks in advance,

Kevin Allan S. R.

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Sat Jul 29 10:43:01 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 29 Jul 2017 04:43:01 -0400
Subject: [R-pkg-devel] Problems runing a example (shiny App) within a
 package
In-Reply-To: <RO1P152MB0380DBC7A337903A14F5948AEDBF0@RO1P152MB0380.LAMP152.PROD.OUTLOOK.COM>
References: <RO1P152MB0380DBC7A337903A14F5948AEDBF0@RO1P152MB0380.LAMP152.PROD.OUTLOOK.COM>
Message-ID: <cfc12177-de64-149b-cfc8-d70cc30fcf51@gmail.com>

On 28/07/2017 11:30 AM, K?vin A. S. R. wrote:
> Problems running a example (shiny App) within a package
>
>
> #main code
>
>
> runclt = function(){
>   shiny::runApp(system.file("shinyCLT", package="CLT"))
> }
>
>
> #example
>
>
> \examples{
>  runclt()
> }
>
>
>
> #Problem
>
>
> R CMD check breaks in "checking examples ..." and don't complete the tests.
>
> How to solve it

Shiny apps are interactive, and the tests are performed in a batch 
session, so one simple approach is to change your example to

if (interactive())
   runclt()

Duncan Murdoch

>
>
> Link to source code https://1drv.ms/u/s!AqhYme4BRWAog3VVjYb7oJ4jopDN
>
> [https://r1.res.office365.com/owa/prem/images/dc-generic_40.png]<https://1drv.ms/u/s!AqhYme4BRWAog3VVjYb7oJ4jopDN>
> CLT_2.1.1.tar.gz<https://1drv.ms/u/s!AqhYme4BRWAog3VVjYb7oJ4jopDN>
> Compartilhado via OneDrive
>
>
>
>
> thanks in advance,
>
> Kevin Allan S. R.
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From f.clems at gmail.com  Fri Aug  4 11:51:01 2017
From: f.clems at gmail.com (=?UTF-8?B?ZnLDqWTDqXJpYyBDbGVtZW50?=)
Date: Fri, 04 Aug 2017 09:51:01 +0000
Subject: [R-pkg-devel] DBI connection at package load
Message-ID: <CAEa8_orZQWm4NdtekK9C=nDULtyTefTdMv+Jd-i-aytBq2pavA@mail.gmail.com>

Hello,

I want to use a package to load and set up a working environment (Only
intern used). It has function, but also create a connection object
(RPostgreSQL) to make dplyr::tbl implicitely use this connection.

After trying to save the connection object in "Data\"... and failed. I made
the following work around.

Is it the right way to do it, or should it be solved in other ways.

PS: This is my first attent at package development experience, I mainly
follow http://r-pkgs.had.co.nz/

regards

frederic Clement

----- the script----

.onAttach <- function(libname = find.package("dbName"), pkgname = "dbName")
{
  packageStartupMessage("Intranet Company required")

  dbNameConPool = dbName_create_pool()
  assign("dbNameConPool", dbNameConPool, envir =
as.environment("package:dbName"))
}


## This is a function so that I can call it in .onAttach
##
dbName_create_pool = function(){

    DBI::dbConnect(drv = RPostgreSQL::PostgreSQL(),
                 user = "dbName",
                 password = .rs.askForPassword("Enter password:"),
                 port = 0000,
                 host = "dbName-int.company.com")
}


#' Dummy function
#'
#' Only used for package build purpose
#'     to import the usefull function.
#' @return NULL
#' @export
#' @import dplyr dbplyr DBI magrittr RPostgreSQL tidyr
#'
#' @examples
#' fun_import()
fun_import <- function(){
  NULL
}

--- session

R version 3.4.1 (2017-06-30)
Platform: i386-w64-mingw32/i386 (32-bit)
Running under: Windows >= 8 x64 (build 9200)

Matrix products: default

locale:
[1] LC_COLLATE=German_Germany.1252  LC_CTYPE=German_Germany.1252
LC_MONETARY=German_Germany.1252 LC_NUMERIC=C
LC_TIME=German_Germany.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_3.4.1 tools_3.4.1

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Fri Aug  4 16:19:10 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 4 Aug 2017 10:19:10 -0400
Subject: [R-pkg-devel] DBI connection at package load
In-Reply-To: <CAEa8_orZQWm4NdtekK9C=nDULtyTefTdMv+Jd-i-aytBq2pavA@mail.gmail.com>
References: <CAEa8_orZQWm4NdtekK9C=nDULtyTefTdMv+Jd-i-aytBq2pavA@mail.gmail.com>
Message-ID: <f5066ad2-4d2d-6cde-315d-8ad8e03d4b53@gmail.com>

On 04/08/2017 5:51 AM, fr?d?ric Clement wrote:
> Hello,
>
> I want to use a package to load and set up a working environment (Only
> intern used). It has function, but also create a connection object
> (RPostgreSQL) to make dplyr::tbl implicitely use this connection.
>
> After trying to save the connection object in "Data\"... and failed. I made
> the following work around.
>
> Is it the right way to do it, or should it be solved in other ways.
>
> PS: This is my first attent at package development experience, I mainly
> follow http://r-pkgs.had.co.nz/
>
> regards
>
> frederic Clement
>
> ----- the script----
>
> .onAttach <- function(libname = find.package("dbName"), pkgname = "dbName")
> {
>   packageStartupMessage("Intranet Company required")
>
>   dbNameConPool = dbName_create_pool()
>   assign("dbNameConPool", dbNameConPool, envir =
> as.environment("package:dbName"))
> }

Usually you should use .onLoad, not .onAttach.  If someone who hasn't 
attached your package calls one of the functions using dbName::fn(...),
your package will be loaded but not attached.  Similarly if another 
package imports one of your functions.


>
>
> ## This is a function so that I can call it in .onAttach
> ##
> dbName_create_pool = function(){
>
>     DBI::dbConnect(drv = RPostgreSQL::PostgreSQL(),
>                  user = "dbName",
>                  password = .rs.askForPassword("Enter password:"),
>                  port = 0000,
>                  host = "dbName-int.company.com")
> }

However, for this particular use, it might be bad to put the code even 
in .onLoad.  A better way to go would be to have a function in your 
package that calls dbName_create_pool the first time you call it, and 
just returns the same value on subsequent calls.  For example,

getcon <- local({
   con <- NULL
   function() {
     if (is.null(con))
       con <<- dbName_create_pool()
     con
   }})


This way nobody is prompted for a password unless they actually need to 
access the database.

>
> #' Dummy function
> #'
> #' Only used for package build purpose
> #'     to import the usefull function.
> #' @return NULL
> #' @export
> #' @import dplyr dbplyr DBI magrittr RPostgreSQL tidyr
> #'
> #' @examples
> #' fun_import()
> fun_import <- function(){
>   NULL
> }

Not sure why you'd want these 13 lines instead of editing your NAMESPACE 
file, but that's your choice...

Duncan Murdoch

>
> --- session
>
> R version 3.4.1 (2017-06-30)
> Platform: i386-w64-mingw32/i386 (32-bit)
> Running under: Windows >= 8 x64 (build 9200)
>
> Matrix products: default
>
> locale:
> [1] LC_COLLATE=German_Germany.1252  LC_CTYPE=German_Germany.1252
> LC_MONETARY=German_Germany.1252 LC_NUMERIC=C
> LC_TIME=German_Germany.1252
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> loaded via a namespace (and not attached):
> [1] compiler_3.4.1 tools_3.4.1
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From David.Kaethner at dlr.de  Mon Aug  7 09:41:21 2017
From: David.Kaethner at dlr.de (David.Kaethner at dlr.de)
Date: Mon, 7 Aug 2017 07:41:21 +0000
Subject: [R-pkg-devel] The Help (e.g. links) is not working for my packages
Message-ID: <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACB83D@dlrexmbx02.intra.dlr.de>

Hello,



I am hoping to post to the right mailing list, if not apologies!



I have recently written my first couple packages, relying on devtools and roxygen. Everything is done in RStudio (details regarding the setup: see end of text).



But the help is not working! Specifically:



On Windows 7:

* functions: I cannot click the links in the 'help'-panel. Or at least nothing happens when I click them.

* DESCRIPTION: If I build the package locally, it has the same issues as the packages. If I install the packages from Github (devtools::install_github) or from a network drive, it works.

* The "my_package::my_function" syntax throws an error. Once I enter 'my_package::' and click TAB, the following error appears in the console: "Error in gzfile(file, "rb") : cannot open the connection"

* "?my_package::my_function" brings me to the function overview page for the package, but not to the help page for the my_function()

* the link itself (on the function overview page) looks inocuous: http://127.0.0.1:44391/help/library/helpers/html/my_function.html



I would love to do a Traceback on this, but I do not know how, since it only happens when hitting TAB. I have done a Traceback for "?my_package::my_function", it just returns the path to where the help should be, like "D:/Home/R/Rpackages/my_package/help/my_function".



On MacOS Sierra:

* DESCRIPTION can always be opened, no matter how the package is installed

* when clicking on functions in the help panel, the known error appears (as text in the help panel): "Error in gzfile(file, "rb") : cannot open the connection"



It gets much weirder: When installing the package for the very first time, it seems to work! But after that it quits working, even not when I delete the package, re-install R, re-install RStudio, and create the package from scratch.



I really wish I was kidding with all of this. I have tried every debugging-idea that came to my mind, including (but not limited to):

* the .Rd-files are generated, they definitely are not missing

* taking an auto-generated DESCRIPTION file

* removing every function file save for a test file

* copying content from a function file into the auto-generated "hello.R" file

* changing the encoding from UTF-8 to WINDOWS-1252

* as mentioned, trying everying both on Windows and MacOS, and trying different ways of installation

* as mentioned, re-installing both R and RStudio



I would enormously appreciate it if anyone has an idea how to get a handle on this, any suggestions are welcome!





David



______________________

My setup:

* Windows 7 / MacOS Sierra

* R 3.4.1

* RStudio 1.0.153

* devtools 1.13.3

* roxygen2 6.0.1


	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Wed Aug  9 14:38:31 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 9 Aug 2017 08:38:31 -0400
Subject: [R-pkg-devel] The Help (e.g. links) is not working for my
 packages
In-Reply-To: <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACB83D@dlrexmbx02.intra.dlr.de>
References: <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACB83D@dlrexmbx02.intra.dlr.de>
Message-ID: <7781f91d-1ec9-be41-05e9-b3a99a591490@gmail.com>

On 07/08/2017 3:41 AM, David.Kaethner at dlr.de wrote:
> Hello,
>
>
>
> I am hoping to post to the right mailing list, if not apologies!
>
>
>
> I have recently written my first couple packages, relying on devtools and roxygen. Everything is done in RStudio (details regarding the setup: see end of text).
>
>
>
> But the help is not working! Specifically:
>
>
>
> On Windows 7:
>
> * functions: I cannot click the links in the 'help'-panel. Or at least nothing happens when I click them.
>
> * DESCRIPTION: If I build the package locally, it has the same issues as the packages. If I install the packages from Github (devtools::install_github) or from a network drive, it works.
>
> * The "my_package::my_function" syntax throws an error. Once I enter 'my_package::' and click TAB, the following error appears in the console: "Error in gzfile(file, "rb") : cannot open the connection"
>
> * "?my_package::my_function" brings me to the function overview page for the package, but not to the help page for the my_function()
>
> * the link itself (on the function overview page) looks inocuous: http://127.0.0.1:44391/help/library/helpers/html/my_function.html
>
>
>
> I would love to do a Traceback on this, but I do not know how, since it only happens when hitting TAB. I have done a Traceback for "?my_package::my_function", it just returns the path to where the help should be, like "D:/Home/R/Rpackages/my_package/help/my_function".
>
>
>
> On MacOS Sierra:
>
> * DESCRIPTION can always be opened, no matter how the package is installed
>
> * when clicking on functions in the help panel, the known error appears (as text in the help panel): "Error in gzfile(file, "rb") : cannot open the connection"
>
>
>
> It gets much weirder: When installing the package for the very first time, it seems to work! But after that it quits working, even not when I delete the package, re-install R, re-install RStudio, and create the package from scratch.
>
>
>
> I really wish I was kidding with all of this. I have tried every debugging-idea that came to my mind, including (but not limited to):
>
> * the .Rd-files are generated, they definitely are not missing
>
> * taking an auto-generated DESCRIPTION file
>
> * removing every function file save for a test file
>
> * copying content from a function file into the auto-generated "hello.R" file
>
> * changing the encoding from UTF-8 to WINDOWS-1252
>
> * as mentioned, trying everying both on Windows and MacOS, and trying different ways of installation
>
> * as mentioned, re-installing both R and RStudio
>
>
>
> I would enormously appreciate it if anyone has an idea how to get a handle on this, any suggestions are welcome!

Nothing that you've written is reproducible by others.  See if you can 
put together a short self-contained series of instructions that display 
the problems (or just one of them).  It might involve installing from 
Github, or making a package tarball available somewhere.

Duncan Murdoch


From pedro.aphalo at helsinki.fi  Thu Aug 10 13:41:08 2017
From: pedro.aphalo at helsinki.fi (Pedro J. Aphalo)
Date: Thu, 10 Aug 2017 14:41:08 +0300
Subject: [R-pkg-devel] Generic method redefinition and dispatch
Message-ID: <742bb140-4808-d195-ab7a-b360de956e11@helsinki.fi>

Hello,

Package 'ggplot2' defines `ggplot()` as an S3 generic.

My package 'ggspectra' defines some specializations of ggplot() for 
additional classes, which work as expected together with all packages 
extending 'ggplot2' that I have tested, except for 'ggtern'.

Package 'ggtern' imports 'ggplot2' and then redefines the ggplot() 
generic with exactly the same code as in 'ggplot2' itself.

If one attempts to use my package and 'ggtern' in the same session, 
dispatch fails for the ggplot() specializations defined in my package, 
unless an explicit call to ggplot2::ggpplot() is used.

I do not understand why the generic needs to be redefined in 'ggtern', 
and although I have raised an issue for 'ggtern' last November, the just 
released version of 'ggtern' retains the redefinition of the generic.

So, I have some questions:

1) Can I do anything in my own package to ensure that method dispatch 
works correctly even after 'ggtern' is attached?

2) Is it good practice for a package to redefine a generic from an 
imported package?

3) Is it possible to redefine a generic, without disturbing the dispatch 
of specializations already known to R?

Thanks in advance for any insights,

Pedro.

-- 
------------------------------------------------------------------------
Pedro J. Aphalo
University Lecturer, Principal Investigator
(Office 4417, Biocenter 3, Viikinkaari 1)

Department of Biosciences
Plant Biology
P.O. Box 65
00014 University of Helsinki
Finland

e-mail: pedro.aphalo at helsinki.fi <mailto:pedro.aphalo at helsinki.fi>
Tel. (mobile) +358 50 4150623
Tel. (office) +358 2941 57897

------------------------------------------------------------------------
*Web sites and blogs*
Web site (research group): http://blogs.helsinki.fi/senpep-blog/
Web site (own teaching): http://www.helsinki.fi/people/pedro.aphalo/
Web site (using R in photobiology): http://www.r4photobiology.info/
------------------------------------------------------------------------
*Societies*
UV4Plants <http://www.uv4plants.org/> (communications officer), ESP 
<http://www.photobiology.eu/> (member) SEB <http://www.sebiology.org/> 
(member), BES <http://www.britishecologicalsociety.org/> (member), SPPS 
<http://www.spps.fi/> (member), SMS 
<http://www.metsatieteellinenseura.fi/english> (member), TUG 
<http://tug.org/> (member), FOAS <http://www.foastat.org/> (member).
------------------------------------------------------------------------

	[[alternative HTML version deleted]]


From f.clems at gmail.com  Thu Aug 10 14:10:38 2017
From: f.clems at gmail.com (=?UTF-8?B?ZnLDqWTDqXJpYyBDbGVtZW50?=)
Date: Thu, 10 Aug 2017 12:10:38 +0000
Subject: [R-pkg-devel] DBI connection at package load
In-Reply-To: <f5066ad2-4d2d-6cde-315d-8ad8e03d4b53@gmail.com>
References: <CAEa8_orZQWm4NdtekK9C=nDULtyTefTdMv+Jd-i-aytBq2pavA@mail.gmail.com>
 <f5066ad2-4d2d-6cde-315d-8ad8e03d4b53@gmail.com>
Message-ID: <CAEa8_oq+oYYaBVdKOsWGb6Kxnn7BEyxVsTp78d-wfbxLd8DUwQ@mail.gmail.com>

hi duncan,
Thank you, it refreshed my memories on "local", cool.

About the dummy function to load packages, it lets Rstudio bring them in
the Namespace, kind of a tradeoff because of the warning I get in NAMESPACE
after building the documentation:
>>> # Generated by roxygen2: do not edit by hand

regards
frederic


On Fri, Aug 4, 2017 at 4:19 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 04/08/2017 5:51 AM, fr?d?ric Clement wrote:
> > Hello,
> >
> > I want to use a package to load and set up a working environment (Only
> > intern used). It has function, but also create a connection object
> > (RPostgreSQL) to make dplyr::tbl implicitely use this connection.
> >
> > After trying to save the connection object in "Data\"... and failed. I
> made
> > the following work around.
> >
> > Is it the right way to do it, or should it be solved in other ways.
> >
> > PS: This is my first attent at package development experience, I mainly
> > follow http://r-pkgs.had.co.nz/
> >
> > regards
> >
> > frederic Clement
> >
> > ----- the script----
> >
> > .onAttach <- function(libname = find.package("dbName"), pkgname =
> "dbName")
> > {
> >   packageStartupMessage("Intranet Company required")
> >
> >   dbNameConPool = dbName_create_pool()
> >   assign("dbNameConPool", dbNameConPool, envir =
> > as.environment("package:dbName"))
> > }
>
> Usually you should use .onLoad, not .onAttach.  If someone who hasn't
> attached your package calls one of the functions using dbName::fn(...),
> your package will be loaded but not attached.  Similarly if another
> package imports one of your functions.
>
>
> >
> >
> > ## This is a function so that I can call it in .onAttach
> > ##
> > dbName_create_pool = function(){
> >
> >     DBI::dbConnect(drv = RPostgreSQL::PostgreSQL(),
> >                  user = "dbName",
> >                  password = .rs.askForPassword("Enter password:"),
> >                  port = 0000,
> >                  host = "dbName-int.company.com")
> > }
>
> However, for this particular use, it might be bad to put the code even
> in .onLoad.  A better way to go would be to have a function in your
> package that calls dbName_create_pool the first time you call it, and
> just returns the same value on subsequent calls.  For example,
>
> getcon <- local({
>    con <- NULL
>    function() {
>      if (is.null(con))
>        con <<- dbName_create_pool()
>      con
>    }})
>
>
> This way nobody is prompted for a password unless they actually need to
> access the database.
>
> >
> > #' Dummy function
> > #'
> > #' Only used for package build purpose
> > #'     to import the usefull function.
> > #' @return NULL
> > #' @export
> > #' @import dplyr dbplyr DBI magrittr RPostgreSQL tidyr
> > #'
> > #' @examples
> > #' fun_import()
> > fun_import <- function(){
> >   NULL
> > }
>
> Not sure why you'd want these 13 lines instead of editing your NAMESPACE
> file, but that's your choice...
>
> Duncan Murdoch
>
> >
> > --- session
> >
> > R version 3.4.1 (2017-06-30)
> > Platform: i386-w64-mingw32/i386 (32-bit)
> > Running under: Windows >= 8 x64 (build 9200)
> >
> > Matrix products: default
> >
> > locale:
> > [1] LC_COLLATE=German_Germany.1252  LC_CTYPE=German_Germany.1252
> > LC_MONETARY=German_Germany.1252 LC_NUMERIC=C
> > LC_TIME=German_Germany.1252
> >
> > attached base packages:
> > [1] stats     graphics  grDevices utils     datasets  methods   base
> >
> > loaded via a namespace (and not attached):
> > [1] compiler_3.4.1 tools_3.4.1
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>

	[[alternative HTML version deleted]]


From edd at debian.org  Thu Aug 10 14:31:50 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 10 Aug 2017 07:31:50 -0500
Subject: [R-pkg-devel] The Help (e.g. links) is not working for my
 packages
In-Reply-To: <7781f91d-1ec9-be41-05e9-b3a99a591490@gmail.com>
References: <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACB83D@dlrexmbx02.intra.dlr.de>
 <7781f91d-1ec9-be41-05e9-b3a99a591490@gmail.com>
Message-ID: <22924.21046.156978.973030@bud.eddelbuettel.com>


On 9 August 2017 at 08:38, Duncan Murdoch wrote:
| Nothing that you've written is reproducible by others.  See if you can 
| put together a short self-contained series of instructions that display 
| the problems (or just one of them).  It might involve installing from 
| Github, or making a package tarball available somewhere.

I am fairly certain I have observed this myself, and I *think* it simply
stems from running R CMD INSTALL (and alike) from a source directory, as
opposed to a tarball.  I filed it under minor nuisance and didn't care too
much either as the official two-step of 'R CMD build ...; R CMD INSTALL ...'
is just that: the official and recommended way. With which things work.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From mark.vanderloo at gmail.com  Thu Aug 10 15:08:52 2017
From: mark.vanderloo at gmail.com (Mark van der Loo)
Date: Thu, 10 Aug 2017 13:08:52 +0000
Subject: [R-pkg-devel] Error on rhub/fedora not appearing on CRAN
Message-ID: <CAOKDuOhuH=eSverGkPMXZirVnPud7a02Yq830ZPp+E_UKx8jRQ@mail.gmail.com>

Dear list,


I'm getting some false 'R CMD check' positives on rhub / Fedora: errors
appearing on rhub that are not reproduced by CRAN. I have reported the
matter here:

https://github.com/r-hub/rhub/issues/92

It happens reproducibly for at least two of my packages: validate and
lumberjack (I haven't tested any other yet).

In short, knitr tries to open a png device while compiling a vignette and
fails as follows.

W checking re-building of vignette outputs
  Error in re-building vignettes: ...
Warning in (function (filename = "Rplot%03d.png", width = 480, height =
480, :
  unable to open connection to X11 display ''

It runs fine on R-devel, R-oldrel, R on windoze, solaris, centos, my own
machines,..., and also on CRAN so it seems tied to rhub/Fedora.

I have tried the following things already

- Check whether R is called with xvfb-run (to simulate the X11 environment)
in rhub's log. That's the case
- Set up a minimal package with several vignettes and knitr settings, but I
could not reproduce it minimally.

If anyone has similar experiences it'd be nice to hear about it. Either for
a workaround, or to gather some evidence that we can pass to Gabor, if it
indeed is an rhub issue.

Cheers,
Mark

	[[alternative HTML version deleted]]


From David.Kaethner at dlr.de  Thu Aug 10 16:47:08 2017
From: David.Kaethner at dlr.de (David.Kaethner at dlr.de)
Date: Thu, 10 Aug 2017 14:47:08 +0000
Subject: [R-pkg-devel] The Help (e.g. links) is not working for my
 packages
In-Reply-To: <22924.21046.156978.973030@bud.eddelbuettel.com>
References: <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACB83D@dlrexmbx02.intra.dlr.de>
 <7781f91d-1ec9-be41-05e9-b3a99a591490@gmail.com>
 <22924.21046.156978.973030@bud.eddelbuettel.com>
Message-ID: <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACD52A@dlrexmbx02.intra.dlr.de>

Thank you for the replies!

First of all, here is the test package: 
    https://github.com/c06n/helpers2

Session info and the log of R CMD check at the end. There is an error: "LaTeX errors when creating PDF version." However, it says "checking Rd files ... OK".

I have tried the install now on 4 different computers (via devtools::install_github), they all did not work. 

Further points:
- Unfortunately, installation from a tarball did not work either. I build the tarball from the command line (Cygwin), then used R CMD, but tried it also from within RStudio ("Build Source Package", then "install.packages")
- I have managed to create another package WHICH WORKS. I have not been able to do it again though, I just don't know what I did differently.
- I played around with the documentation lines in the test package, to no avail.

I am sure that it is something very minor where I went wrong, and in all likelihood the problem is on my side. I just cannot figure out what it might be.

David

-----
> sessionInfo()
R version 3.4.1 (2017-06-30)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

Matrix products: default

locale:
[1] LC_COLLATE=German_Germany.1252  LC_CTYPE=German_Germany.1252   
[3] LC_MONETARY=German_Germany.1252 LC_NUMERIC=C                   
[5] LC_TIME=German_Germany.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] _0.1.0 

loaded via a namespace (and not attached):
[1] compiler_3.4.1 tools_3.4.1  

--------
* using log directory '/cygdrive/d/Home/projects/R_package_dev/helpers2.Rcheck'
* using R version 3.4.0 (2017-04-21)
* using platform: x86_64-unknown-cygwin (64-bit)
* using session charset: ISO8859-1
* checking for file 'helpers2/DESCRIPTION' ... OK
* checking extension type ... Package
* this is package 'helpers2' version '0.1.0'
* package encoding: UTF-8
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking whether package 'helpers2' can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking DESCRIPTION meta-information ... WARNING
Non-standard license specification:
  testlicense
Standardizable: FALSE
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ... OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking loading without being on the library search path ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking examples ... NONE
* checking PDF version of manual ... WARNING
LaTeX errors when creating PDF version.
This typically indicates Rd problems.
* checking PDF version of manual without hyperrefs or index ... ERROR
* DONE
Status: 1 ERROR, 2 WARNINGs












-----Urspr?ngliche Nachricht-----
Von: Dirk Eddelbuettel [mailto:dirk.eddelbuettel at gmail.com] Im Auftrag von Dirk Eddelbuettel
Gesendet: Donnerstag, 10. August 2017 14:32
An: Duncan Murdoch
Cc: K?thner, David; r-package-devel at r-project.org
Betreff: Re: [R-pkg-devel] The Help (e.g. links) is not working for my packages


On 9 August 2017 at 08:38, Duncan Murdoch wrote:
| Nothing that you've written is reproducible by others.  See if you can 
| put together a short self-contained series of instructions that 
| display the problems (or just one of them).  It might involve 
| installing from Github, or making a package tarball available somewhere.

I am fairly certain I have observed this myself, and I *think* it simply stems from running R CMD INSTALL (and alike) from a source directory, as opposed to a tarball.  I filed it under minor nuisance and didn't care too much either as the official two-step of 'R CMD build ...; R CMD INSTALL ...'
is just that: the official and recommended way. With which things work.

Dirk

--
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From lists at dewey.myzen.co.uk  Thu Aug 10 17:38:56 2017
From: lists at dewey.myzen.co.uk (Michael Dewey)
Date: Thu, 10 Aug 2017 16:38:56 +0100
Subject: [R-pkg-devel] The Help (e.g. links) is not working for my
 packages
In-Reply-To: <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACD52A@dlrexmbx02.intra.dlr.de>
References: <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACB83D@dlrexmbx02.intra.dlr.de>
 <7781f91d-1ec9-be41-05e9-b3a99a591490@gmail.com>
 <22924.21046.156978.973030@bud.eddelbuettel.com>
 <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACD52A@dlrexmbx02.intra.dlr.de>
Message-ID: <f783e131-002e-7f23-169a-692aa0fc6614@dewey.myzen.co.uk>

Your log says you have no examples but you do in your Rd file.
Your examples look the wrong way round x(function) rather than function(x)

Not sure whether those are relevant issues but perhaps they help.

On 10/08/2017 15:47, David.Kaethner at dlr.de wrote:
> Thank you for the replies!
>
> First of all, here is the test package:
>     https://github.com/c06n/helpers2
>
> Session info and the log of R CMD check at the end. There is an error: "LaTeX errors when creating PDF version." However, it says "checking Rd files ... OK".
>
> I have tried the install now on 4 different computers (via devtools::install_github), they all did not work.
>
> Further points:
> - Unfortunately, installation from a tarball did not work either. I build the tarball from the command line (Cygwin), then used R CMD, but tried it also from within RStudio ("Build Source Package", then "install.packages")
> - I have managed to create another package WHICH WORKS. I have not been able to do it again though, I just don't know what I did differently.
> - I played around with the documentation lines in the test package, to no avail.
>
> I am sure that it is something very minor where I went wrong, and in all likelihood the problem is on my side. I just cannot figure out what it might be.
>
> David
>
> -----
>> sessionInfo()
> R version 3.4.1 (2017-06-30)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 7 x64 (build 7601) Service Pack 1
>
> Matrix products: default
>
> locale:
> [1] LC_COLLATE=German_Germany.1252  LC_CTYPE=German_Germany.1252
> [3] LC_MONETARY=German_Germany.1252 LC_NUMERIC=C
> [5] LC_TIME=German_Germany.1252
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] _0.1.0
>
> loaded via a namespace (and not attached):
> [1] compiler_3.4.1 tools_3.4.1
>
> --------
> * using log directory '/cygdrive/d/Home/projects/R_package_dev/helpers2.Rcheck'
> * using R version 3.4.0 (2017-04-21)
> * using platform: x86_64-unknown-cygwin (64-bit)
> * using session charset: ISO8859-1
> * checking for file 'helpers2/DESCRIPTION' ... OK
> * checking extension type ... Package
> * this is package 'helpers2' version '0.1.0'
> * package encoding: UTF-8
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking whether package 'helpers2' can be installed ... OK
> * checking installed package size ... OK
> * checking package directory ... OK
> * checking DESCRIPTION meta-information ... WARNING
> Non-standard license specification:
>   testlicense
> Standardizable: FALSE
> * checking top-level files ... OK
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * checking whether the package can be loaded ... OK
> * checking whether the package can be loaded with stated dependencies ... OK
> * checking whether the package can be unloaded cleanly ... OK
> * checking whether the namespace can be loaded with stated dependencies ... OK
> * checking whether the namespace can be unloaded cleanly ... OK
> * checking loading without being on the library search path ... OK
> * checking dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... OK
> * checking Rd files ... OK
> * checking Rd metadata ... OK
> * checking Rd cross-references ... OK
> * checking for missing documentation entries ... OK
> * checking for code/documentation mismatches ... OK
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking examples ... NONE
> * checking PDF version of manual ... WARNING
> LaTeX errors when creating PDF version.
> This typically indicates Rd problems.
> * checking PDF version of manual without hyperrefs or index ... ERROR
> * DONE
> Status: 1 ERROR, 2 WARNINGs
>
>
>
>
>
>
>
>
>
>
>
>
> -----Urspr?ngliche Nachricht-----
> Von: Dirk Eddelbuettel [mailto:dirk.eddelbuettel at gmail.com] Im Auftrag von Dirk Eddelbuettel
> Gesendet: Donnerstag, 10. August 2017 14:32
> An: Duncan Murdoch
> Cc: K?thner, David; r-package-devel at r-project.org
> Betreff: Re: [R-pkg-devel] The Help (e.g. links) is not working for my packages
>
>
> On 9 August 2017 at 08:38, Duncan Murdoch wrote:
> | Nothing that you've written is reproducible by others.  See if you can
> | put together a short self-contained series of instructions that
> | display the problems (or just one of them).  It might involve
> | installing from Github, or making a package tarball available somewhere.
>
> I am fairly certain I have observed this myself, and I *think* it simply stems from running R CMD INSTALL (and alike) from a source directory, as opposed to a tarball.  I filed it under minor nuisance and didn't care too much either as the official two-step of 'R CMD build ...; R CMD INSTALL ...'
> is just that: the official and recommended way. With which things work.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ---
> This email has been checked for viruses by AVG.
> http://www.avg.com
>
>

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From David.Kaethner at dlr.de  Thu Aug 10 18:39:30 2017
From: David.Kaethner at dlr.de (David.Kaethner at dlr.de)
Date: Thu, 10 Aug 2017 16:39:30 +0000
Subject: [R-pkg-devel] The Help (e.g. links) is not working for my
 packages
In-Reply-To: <f783e131-002e-7f23-169a-692aa0fc6614@dewey.myzen.co.uk>
References: <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACB83D@dlrexmbx02.intra.dlr.de>
 <7781f91d-1ec9-be41-05e9-b3a99a591490@gmail.com>
 <22924.21046.156978.973030@bud.eddelbuettel.com>
 <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACD52A@dlrexmbx02.intra.dlr.de>,
 <f783e131-002e-7f23-169a-692aa0fc6614@dewey.myzen.co.uk>
Message-ID: <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACD540@dlrexmbx02.intra.dlr.de>

Thank you for pointing that out, this solved the ERROR in the R CMD check. I've updated the repo.

Unfortunately, it did not solve the problem. So when you clone/pull the repo now, the error should persist.


* using log directory ?/Users/spaceicons/code/R_package_dev/helpers2/helpers2.Rcheck?
* using R version 3.4.1 (2017-06-30)
* using platform: x86_64-apple-darwin15.6.0 (64-bit)
* using session charset: UTF-8
* checking for file ?helpers2/DESCRIPTION? ... OK
* checking extension type ... Package
* this is package ?helpers2? version ?0.1.0?
* package encoding: UTF-8
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking whether package ?helpers2? can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking DESCRIPTION meta-information ... WARNING
Non-standard license specification:
  What license is it under?
Standardizable: FALSE
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ... OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking examples ... OK
* checking PDF version of manual ... OK
* DONE
Status: 1 WARNING



________________________________________
Von: Michael Dewey [lists at dewey.myzen.co.uk]
Gesendet: Donnerstag, 10. August 2017 17:38
An: K?thner, David; edd at debian.org; murdoch.duncan at gmail.com
Cc: r-package-devel at r-project.org
Betreff: Re: [R-pkg-devel] The Help (e.g. links) is not working for my packages

Your log says you have no examples but you do in your Rd file.
Your examples look the wrong way round x(function) rather than function(x)

Not sure whether those are relevant issues but perhaps they help.

On 10/08/2017 15:47, David.Kaethner at dlr.de wrote:
> Thank you for the replies!
>
> First of all, here is the test package:
>     https://github.com/c06n/helpers2
>
> Session info and the log of R CMD check at the end. There is an error: "LaTeX errors when creating PDF version." However, it says "checking Rd files ... OK".
>
> I have tried the install now on 4 different computers (via devtools::install_github), they all did not work.
>
> Further points:
> - Unfortunately, installation from a tarball did not work either. I build the tarball from the command line (Cygwin), then used R CMD, but tried it also from within RStudio ("Build Source Package", then "install.packages")
> - I have managed to create another package WHICH WORKS. I have not been able to do it again though, I just don't know what I did differently.
> - I played around with the documentation lines in the test package, to no avail.
>
> I am sure that it is something very minor where I went wrong, and in all likelihood the problem is on my side. I just cannot figure out what it might be.
>
> David
>
> -----
>> sessionInfo()
> R version 3.4.1 (2017-06-30)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 7 x64 (build 7601) Service Pack 1
>
> Matrix products: default
>
> locale:
> [1] LC_COLLATE=German_Germany.1252  LC_CTYPE=German_Germany.1252
> [3] LC_MONETARY=German_Germany.1252 LC_NUMERIC=C
> [5] LC_TIME=German_Germany.1252
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] _0.1.0
>
> loaded via a namespace (and not attached):
> [1] compiler_3.4.1 tools_3.4.1
>
> --------
> * using log directory '/cygdrive/d/Home/projects/R_package_dev/helpers2.Rcheck'
> * using R version 3.4.0 (2017-04-21)
> * using platform: x86_64-unknown-cygwin (64-bit)
> * using session charset: ISO8859-1
> * checking for file 'helpers2/DESCRIPTION' ... OK
> * checking extension type ... Package
> * this is package 'helpers2' version '0.1.0'
> * package encoding: UTF-8
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking whether package 'helpers2' can be installed ... OK
> * checking installed package size ... OK
> * checking package directory ... OK
> * checking DESCRIPTION meta-information ... WARNING
> Non-standard license specification:
>   testlicense
> Standardizable: FALSE
> * checking top-level files ... OK
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * checking whether the package can be loaded ... OK
> * checking whether the package can be loaded with stated dependencies ... OK
> * checking whether the package can be unloaded cleanly ... OK
> * checking whether the namespace can be loaded with stated dependencies ... OK
> * checking whether the namespace can be unloaded cleanly ... OK
> * checking loading without being on the library search path ... OK
> * checking dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... OK
> * checking Rd files ... OK
> * checking Rd metadata ... OK
> * checking Rd cross-references ... OK
> * checking for missing documentation entries ... OK
> * checking for code/documentation mismatches ... OK
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking examples ... NONE
> * checking PDF version of manual ... WARNING
> LaTeX errors when creating PDF version.
> This typically indicates Rd problems.
> * checking PDF version of manual without hyperrefs or index ... ERROR
> * DONE
> Status: 1 ERROR, 2 WARNINGs
>
>
>
>
>
>
>
>
>
>
>
>
> -----Urspr?ngliche Nachricht-----
> Von: Dirk Eddelbuettel [mailto:dirk.eddelbuettel at gmail.com] Im Auftrag von Dirk Eddelbuettel
> Gesendet: Donnerstag, 10. August 2017 14:32
> An: Duncan Murdoch
> Cc: K?thner, David; r-package-devel at r-project.org
> Betreff: Re: [R-pkg-devel] The Help (e.g. links) is not working for my packages
>
>
> On 9 August 2017 at 08:38, Duncan Murdoch wrote:
> | Nothing that you've written is reproducible by others.  See if you can
> | put together a short self-contained series of instructions that
> | display the problems (or just one of them).  It might involve
> | installing from Github, or making a package tarball available somewhere.
>
> I am fairly certain I have observed this myself, and I *think* it simply stems from running R CMD INSTALL (and alike) from a source directory, as opposed to a tarball.  I filed it under minor nuisance and didn't care too much either as the official two-step of 'R CMD build ...; R CMD INSTALL ...'
> is just that: the official and recommended way. With which things work.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ---
> This email has been checked for viruses by AVG.
> http://www.avg.com
>
>

--
Michael
http://www.dewey.myzen.co.uk/home.html


From dasonk at gmail.com  Thu Aug 10 18:42:05 2017
From: dasonk at gmail.com (Dason Kurkiewicz)
Date: Thu, 10 Aug 2017 12:42:05 -0400
Subject: [R-pkg-devel] The Help (e.g. links) is not working for my
	packages
In-Reply-To: <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACD540@dlrexmbx02.intra.dlr.de>
References: <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACB83D@dlrexmbx02.intra.dlr.de>
 <7781f91d-1ec9-be41-05e9-b3a99a591490@gmail.com>
 <22924.21046.156978.973030@bud.eddelbuettel.com>
 <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACD52A@dlrexmbx02.intra.dlr.de>
 <f783e131-002e-7f23-169a-692aa0fc6614@dewey.myzen.co.uk>
 <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACD540@dlrexmbx02.intra.dlr.de>
Message-ID: <CAJZYZZ6-3ztNX7TsDNjA6BDv5dmLTT5tEFz+BVDtzQ9BbM+_QQ@mail.gmail.com>

It tells you what the warning is. You need to specify a license in your
DESCRIPTION file. You should really fill the entire thing out properly
anyways.

On Aug 10, 2017 12:39 PM, <David.Kaethner at dlr.de> wrote:

> Thank you for pointing that out, this solved the ERROR in the R CMD check.
> I've updated the repo.
>
> Unfortunately, it did not solve the problem. So when you clone/pull the
> repo now, the error should persist.
>
>
> * using log directory ?/Users/spaceicons/code/R_
> package_dev/helpers2/helpers2.Rcheck?
> * using R version 3.4.1 (2017-06-30)
> * using platform: x86_64-apple-darwin15.6.0 (64-bit)
> * using session charset: UTF-8
> * checking for file ?helpers2/DESCRIPTION? ... OK
> * checking extension type ... Package
> * this is package ?helpers2? version ?0.1.0?
> * package encoding: UTF-8
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking whether package ?helpers2? can be installed ... OK
> * checking installed package size ... OK
> * checking package directory ... OK
> * checking DESCRIPTION meta-information ... WARNING
> Non-standard license specification:
>   What license is it under?
> Standardizable: FALSE
> * checking top-level files ... OK
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * checking whether the package can be loaded ... OK
> * checking whether the package can be loaded with stated dependencies ...
> OK
> * checking whether the package can be unloaded cleanly ... OK
> * checking whether the namespace can be loaded with stated dependencies
> ... OK
> * checking whether the namespace can be unloaded cleanly ... OK
> * checking dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... OK
> * checking Rd files ... OK
> * checking Rd metadata ... OK
> * checking Rd cross-references ... OK
> * checking for missing documentation entries ... OK
> * checking for code/documentation mismatches ... OK
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking examples ... OK
> * checking PDF version of manual ... OK
> * DONE
> Status: 1 WARNING
>
>
>
> ________________________________________
> Von: Michael Dewey [lists at dewey.myzen.co.uk]
> Gesendet: Donnerstag, 10. August 2017 17:38
> An: K?thner, David; edd at debian.org; murdoch.duncan at gmail.com
> Cc: r-package-devel at r-project.org
> Betreff: Re: [R-pkg-devel] The Help (e.g. links) is not working for my
> packages
>
> Your log says you have no examples but you do in your Rd file.
> Your examples look the wrong way round x(function) rather than function(x)
>
> Not sure whether those are relevant issues but perhaps they help.
>
> On 10/08/2017 15:47, David.Kaethner at dlr.de wrote:
> > Thank you for the replies!
> >
> > First of all, here is the test package:
> >     https://github.com/c06n/helpers2
> >
> > Session info and the log of R CMD check at the end. There is an error:
> "LaTeX errors when creating PDF version." However, it says "checking Rd
> files ... OK".
> >
> > I have tried the install now on 4 different computers (via
> devtools::install_github), they all did not work.
> >
> > Further points:
> > - Unfortunately, installation from a tarball did not work either. I
> build the tarball from the command line (Cygwin), then used R CMD, but
> tried it also from within RStudio ("Build Source Package", then
> "install.packages")
> > - I have managed to create another package WHICH WORKS. I have not been
> able to do it again though, I just don't know what I did differently.
> > - I played around with the documentation lines in the test package, to
> no avail.
> >
> > I am sure that it is something very minor where I went wrong, and in all
> likelihood the problem is on my side. I just cannot figure out what it
> might be.
> >
> > David
> >
> > -----
> >> sessionInfo()
> > R version 3.4.1 (2017-06-30)
> > Platform: x86_64-w64-mingw32/x64 (64-bit)
> > Running under: Windows 7 x64 (build 7601) Service Pack 1
> >
> > Matrix products: default
> >
> > locale:
> > [1] LC_COLLATE=German_Germany.1252  LC_CTYPE=German_Germany.1252
> > [3] LC_MONETARY=German_Germany.1252 LC_NUMERIC=C
> > [5] LC_TIME=German_Germany.1252
> >
> > attached base packages:
> > [1] stats     graphics  grDevices utils     datasets  methods   base
> >
> > other attached packages:
> > [1] _0.1.0
> >
> > loaded via a namespace (and not attached):
> > [1] compiler_3.4.1 tools_3.4.1
> >
> > --------
> > * using log directory '/cygdrive/d/Home/projects/R_
> package_dev/helpers2.Rcheck'
> > * using R version 3.4.0 (2017-04-21)
> > * using platform: x86_64-unknown-cygwin (64-bit)
> > * using session charset: ISO8859-1
> > * checking for file 'helpers2/DESCRIPTION' ... OK
> > * checking extension type ... Package
> > * this is package 'helpers2' version '0.1.0'
> > * package encoding: UTF-8
> > * checking package namespace information ... OK
> > * checking package dependencies ... OK
> > * checking if this is a source package ... OK
> > * checking if there is a namespace ... OK
> > * checking for executable files ... OK
> > * checking for hidden files and directories ... OK
> > * checking for portable file names ... OK
> > * checking for sufficient/correct file permissions ... OK
> > * checking whether package 'helpers2' can be installed ... OK
> > * checking installed package size ... OK
> > * checking package directory ... OK
> > * checking DESCRIPTION meta-information ... WARNING
> > Non-standard license specification:
> >   testlicense
> > Standardizable: FALSE
> > * checking top-level files ... OK
> > * checking for left-over files ... OK
> > * checking index information ... OK
> > * checking package subdirectories ... OK
> > * checking R files for non-ASCII characters ... OK
> > * checking R files for syntax errors ... OK
> > * checking whether the package can be loaded ... OK
> > * checking whether the package can be loaded with stated dependencies
> ... OK
> > * checking whether the package can be unloaded cleanly ... OK
> > * checking whether the namespace can be loaded with stated dependencies
> ... OK
> > * checking whether the namespace can be unloaded cleanly ... OK
> > * checking loading without being on the library search path ... OK
> > * checking dependencies in R code ... OK
> > * checking S3 generic/method consistency ... OK
> > * checking replacement functions ... OK
> > * checking foreign function calls ... OK
> > * checking R code for possible problems ... OK
> > * checking Rd files ... OK
> > * checking Rd metadata ... OK
> > * checking Rd cross-references ... OK
> > * checking for missing documentation entries ... OK
> > * checking for code/documentation mismatches ... OK
> > * checking Rd \usage sections ... OK
> > * checking Rd contents ... OK
> > * checking for unstated dependencies in examples ... OK
> > * checking examples ... NONE
> > * checking PDF version of manual ... WARNING
> > LaTeX errors when creating PDF version.
> > This typically indicates Rd problems.
> > * checking PDF version of manual without hyperrefs or index ... ERROR
> > * DONE
> > Status: 1 ERROR, 2 WARNINGs
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> > -----Urspr?ngliche Nachricht-----
> > Von: Dirk Eddelbuettel [mailto:dirk.eddelbuettel at gmail.com] Im Auftrag
> von Dirk Eddelbuettel
> > Gesendet: Donnerstag, 10. August 2017 14:32
> > An: Duncan Murdoch
> > Cc: K?thner, David; r-package-devel at r-project.org
> > Betreff: Re: [R-pkg-devel] The Help (e.g. links) is not working for my
> packages
> >
> >
> > On 9 August 2017 at 08:38, Duncan Murdoch wrote:
> > | Nothing that you've written is reproducible by others.  See if you can
> > | put together a short self-contained series of instructions that
> > | display the problems (or just one of them).  It might involve
> > | installing from Github, or making a package tarball available
> somewhere.
> >
> > I am fairly certain I have observed this myself, and I *think* it simply
> stems from running R CMD INSTALL (and alike) from a source directory, as
> opposed to a tarball.  I filed it under minor nuisance and didn't care too
> much either as the official two-step of 'R CMD build ...; R CMD INSTALL ...'
> > is just that: the official and recommended way. With which things work.
> >
> > Dirk
> >
> > --
> > http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > ---
> > This email has been checked for viruses by AVG.
> > http://www.avg.com
> >
> >
>
> --
> Michael
> http://www.dewey.myzen.co.uk/home.html
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From David.Kaethner at dlr.de  Thu Aug 10 19:34:45 2017
From: David.Kaethner at dlr.de (David.Kaethner at dlr.de)
Date: Thu, 10 Aug 2017 17:34:45 +0000
Subject: [R-pkg-devel] The Help (e.g. links) is not working for my
 packages
In-Reply-To: <CAJZYZZ6-3ztNX7TsDNjA6BDv5dmLTT5tEFz+BVDtzQ9BbM+_QQ@mail.gmail.com>
References: <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACB83D@dlrexmbx02.intra.dlr.de>
 <7781f91d-1ec9-be41-05e9-b3a99a591490@gmail.com>
 <22924.21046.156978.973030@bud.eddelbuettel.com>
 <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACD52A@dlrexmbx02.intra.dlr.de>
 <f783e131-002e-7f23-169a-692aa0fc6614@dewey.myzen.co.uk>
 <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACD540@dlrexmbx02.intra.dlr.de>,
 <CAJZYZZ6-3ztNX7TsDNjA6BDv5dmLTT5tEFz+BVDtzQ9BbM+_QQ@mail.gmail.com>
Message-ID: <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACD56A@dlrexmbx02.intra.dlr.de>

sorry, I got sloppy - I had played around before with the DESCRIPTION file, that does not seem to be the culprit. But you are right of course, it should run without warnings in any case.



* using log directory ?/Users/spaceicons/code/R_package_dev/helpers2/helpers2.Rcheck?
* using R version 3.4.1 (2017-06-30)
* using platform: x86_64-apple-darwin15.6.0 (64-bit)
* using session charset: UTF-8
* checking for file ?helpers2/DESCRIPTION? ... OK
* this is package ?helpers2? version ?0.1?
* package encoding: UTF-8
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking whether package ?helpers2? can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ... OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking examples ... OK
* checking PDF version of manual ... OK
* DONE
Status: OK



________________________________
Von: Dason Kurkiewicz [dasonk at gmail.com]
Gesendet: Donnerstag, 10. August 2017 18:42
An: K?thner, David
Cc: Duncan Murdoch; R package devel; edd at debian.org; lists at dewey.myzen.co.uk
Betreff: Re: [R-pkg-devel] The Help (e.g. links) is not working for my packages

It tells you what the warning is. You need to specify a license in your DESCRIPTION file. You should really fill the entire thing out properly anyways.

On Aug 10, 2017 12:39 PM, <David.Kaethner at dlr.de<mailto:David.Kaethner at dlr.de>> wrote:
Thank you for pointing that out, this solved the ERROR in the R CMD check. I've updated the repo.

Unfortunately, it did not solve the problem. So when you clone/pull the repo now, the error should persist.


* using log directory ?/Users/spaceicons/code/R_package_dev/helpers2/helpers2.Rcheck?
* using R version 3.4.1 (2017-06-30)
* using platform: x86_64-apple-darwin15.6.0 (64-bit)
* using session charset: UTF-8
* checking for file ?helpers2/DESCRIPTION? ... OK
* checking extension type ... Package
* this is package ?helpers2? version ?0.1.0?
* package encoding: UTF-8
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking whether package ?helpers2? can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking DESCRIPTION meta-information ... WARNING
Non-standard license specification:
  What license is it under?
Standardizable: FALSE
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ... OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking examples ... OK
* checking PDF version of manual ... OK
* DONE
Status: 1 WARNING



________________________________________
Von: Michael Dewey [lists at dewey.myzen.co.uk<mailto:lists at dewey.myzen.co.uk>]
Gesendet: Donnerstag, 10. August 2017 17:38
An: K?thner, David; edd at debian.org<mailto:edd at debian.org>; murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>
Cc: r-package-devel at r-project.org<mailto:r-package-devel at r-project.org>
Betreff: Re: [R-pkg-devel] The Help (e.g. links) is not working for my packages

Your log says you have no examples but you do in your Rd file.
Your examples look the wrong way round x(function) rather than function(x)

Not sure whether those are relevant issues but perhaps they help.

On 10/08/2017 15:47, David.Kaethner at dlr.de<mailto:David.Kaethner at dlr.de> wrote:
> Thank you for the replies!
>
> First of all, here is the test package:
>     https://github.com/c06n/helpers2
>
> Session info and the log of R CMD check at the end. There is an error: "LaTeX errors when creating PDF version." However, it says "checking Rd files ... OK".
>
> I have tried the install now on 4 different computers (via devtools::install_github), they all did not work.
>
> Further points:
> - Unfortunately, installation from a tarball did not work either. I build the tarball from the command line (Cygwin), then used R CMD, but tried it also from within RStudio ("Build Source Package", then "install.packages")
> - I have managed to create another package WHICH WORKS. I have not been able to do it again though, I just don't know what I did differently.
> - I played around with the documentation lines in the test package, to no avail.
>
> I am sure that it is something very minor where I went wrong, and in all likelihood the problem is on my side. I just cannot figure out what it might be.
>
> David
>
> -----
>> sessionInfo()
> R version 3.4.1 (2017-06-30)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 7 x64 (build 7601) Service Pack 1
>
> Matrix products: default
>
> locale:
> [1] LC_COLLATE=German_Germany.1252  LC_CTYPE=German_Germany.1252
> [3] LC_MONETARY=German_Germany.1252 LC_NUMERIC=C
> [5] LC_TIME=German_Germany.1252
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] _0.1.0
>
> loaded via a namespace (and not attached):
> [1] compiler_3.4.1 tools_3.4.1
>
> --------
> * using log directory '/cygdrive/d/Home/projects/R_package_dev/helpers2.Rcheck'
> * using R version 3.4.0 (2017-04-21)
> * using platform: x86_64-unknown-cygwin (64-bit)
> * using session charset: ISO8859-1
> * checking for file 'helpers2/DESCRIPTION' ... OK
> * checking extension type ... Package
> * this is package 'helpers2' version '0.1.0'
> * package encoding: UTF-8
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking whether package 'helpers2' can be installed ... OK
> * checking installed package size ... OK
> * checking package directory ... OK
> * checking DESCRIPTION meta-information ... WARNING
> Non-standard license specification:
>   testlicense
> Standardizable: FALSE
> * checking top-level files ... OK
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * checking whether the package can be loaded ... OK
> * checking whether the package can be loaded with stated dependencies ... OK
> * checking whether the package can be unloaded cleanly ... OK
> * checking whether the namespace can be loaded with stated dependencies ... OK
> * checking whether the namespace can be unloaded cleanly ... OK
> * checking loading without being on the library search path ... OK
> * checking dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... OK
> * checking Rd files ... OK
> * checking Rd metadata ... OK
> * checking Rd cross-references ... OK
> * checking for missing documentation entries ... OK
> * checking for code/documentation mismatches ... OK
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking examples ... NONE
> * checking PDF version of manual ... WARNING
> LaTeX errors when creating PDF version.
> This typically indicates Rd problems.
> * checking PDF version of manual without hyperrefs or index ... ERROR
> * DONE
> Status: 1 ERROR, 2 WARNINGs
>
>
>
>
>
>
>
>
>
>
>
>
> -----Urspr?ngliche Nachricht-----
> Von: Dirk Eddelbuettel [mailto:dirk.eddelbuettel at gmail.com<mailto:dirk.eddelbuettel at gmail.com>] Im Auftrag von Dirk Eddelbuettel
> Gesendet: Donnerstag, 10. August 2017 14:32
> An: Duncan Murdoch
> Cc: K?thner, David; r-package-devel at r-project.org<mailto:r-package-devel at r-project.org>
> Betreff: Re: [R-pkg-devel] The Help (e.g. links) is not working for my packages
>
>
> On 9 August 2017 at 08:38, Duncan Murdoch wrote:
> | Nothing that you've written is reproducible by others.  See if you can
> | put together a short self-contained series of instructions that
> | display the problems (or just one of them).  It might involve
> | installing from Github, or making a package tarball available somewhere.
>
> I am fairly certain I have observed this myself, and I *think* it simply stems from running R CMD INSTALL (and alike) from a source directory, as opposed to a tarball.  I filed it under minor nuisance and didn't care too much either as the official two-step of 'R CMD build ...; R CMD INSTALL ...'
> is just that: the official and recommended way. With which things work.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org<mailto:edd at debian.org>
>
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ---
> This email has been checked for viruses by AVG.
> http://www.avg.com
>
>

--
Michael
http://www.dewey.myzen.co.uk/home.html

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From jernej.jevsenak at gmail.com  Sat Aug 12 14:01:07 2017
From: jernej.jevsenak at gmail.com (=?UTF-8?Q?Jernej_Jev=C5=A1enak?=)
Date: Sat, 12 Aug 2017 14:01:07 +0200
Subject: [R-pkg-devel] CRAN checks errors
Message-ID: <CACKka23U01g7CCVtCFejPhLPrJAVZZa3MOZ3js1mttXjf5NKHA@mail.gmail.com>

Dear R-package-devel community, recently I have released my R package
dendroExtra
0.0.2 <https://cran.r-project.org/web/packages/dendroExtra/> on CRAN.

CRAN cheks
<https://cran.r-project.org/web/checks/check_results_dendroExtra.html>
still give some errors (on Linux and Solaris), which I do not understand. I
am kindly asking for some hints, how to resolve the problems.



Bests, Jerry

	[[alternative HTML version deleted]]


From edd at debian.org  Sat Aug 12 14:35:00 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 12 Aug 2017 07:35:00 -0500
Subject: [R-pkg-devel] CRAN checks errors
In-Reply-To: <CACKka23U01g7CCVtCFejPhLPrJAVZZa3MOZ3js1mttXjf5NKHA@mail.gmail.com>
References: <CACKka23U01g7CCVtCFejPhLPrJAVZZa3MOZ3js1mttXjf5NKHA@mail.gmail.com>
Message-ID: <22926.62964.860898.439724@bud.eddelbuettel.com>


On 12 August 2017 at 14:01, Jernej Jev?enak wrote:
| Dear R-package-devel community, recently I have released my R package
| dendroExtra
| 0.0.2 <https://cran.r-project.org/web/packages/dendroExtra/> on CRAN.
| 
| CRAN cheks
| <https://cran.r-project.org/web/checks/check_results_dendroExtra.html>
| still give some errors (on Linux and Solaris), which I do not understand. I
| am kindly asking for some hints, how to resolve the problems.

It does NOT right now.  I see 'OK' and the way down and across ALL operating
systems for version 0.02 -- apart for the last two entries covering 'oldrel'.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From jernej.jevsenak at gmail.com  Sat Aug 12 15:40:13 2017
From: jernej.jevsenak at gmail.com (=?UTF-8?Q?Jernej_Jev=C5=A1enak?=)
Date: Sat, 12 Aug 2017 15:40:13 +0200
Subject: [R-pkg-devel] CRAN checks errors
In-Reply-To: <22926.62964.860898.439724@bud.eddelbuettel.com>
References: <CACKka23U01g7CCVtCFejPhLPrJAVZZa3MOZ3js1mttXjf5NKHA@mail.gmail.com>
 <22926.62964.860898.439724@bud.eddelbuettel.com>
Message-ID: <CACKka20suRxn3-v4ytGxFCxc0_MXxxQr2WKE4bDau4eDZyAfHA@mail.gmail.com>

Ok, I see now, that actually everything is OK.

ERROR on older versions of R is therefore not a problem, right?



One more thing, a few hours after package was accepted, I received an email
from CRAN:

*Package dendroExtra_0.0.2.tar.gz has been built for Windows*



I did not receive any similar email for other operating systems (e.g.
Linux, Solaris). Is this normal?



Jerry

2017-08-12 14:35 GMT+02:00 Dirk Eddelbuettel <edd at debian.org>:

>
> On 12 August 2017 at 14:01, Jernej Jev?enak wrote:
> | Dear R-package-devel community, recently I have released my R package
> | dendroExtra
> | 0.0.2 <https://cran.r-project.org/web/packages/dendroExtra/> on CRAN.
> |
> | CRAN cheks
> | <https://cran.r-project.org/web/checks/check_results_dendroExtra.html>
> | still give some errors (on Linux and Solaris), which I do not
> understand. I
> | am kindly asking for some hints, how to resolve the problems.
>
> It does NOT right now.  I see 'OK' and the way down and across ALL
> operating
> systems for version 0.02 -- apart for the last two entries covering
> 'oldrel'.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From edd at debian.org  Sat Aug 12 17:04:53 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 12 Aug 2017 10:04:53 -0500
Subject: [R-pkg-devel] CRAN checks errors
In-Reply-To: <CACKka20suRxn3-v4ytGxFCxc0_MXxxQr2WKE4bDau4eDZyAfHA@mail.gmail.com>
References: <CACKka23U01g7CCVtCFejPhLPrJAVZZa3MOZ3js1mttXjf5NKHA@mail.gmail.com>
 <22926.62964.860898.439724@bud.eddelbuettel.com>
 <CACKka20suRxn3-v4ytGxFCxc0_MXxxQr2WKE4bDau4eDZyAfHA@mail.gmail.com>
Message-ID: <22927.6421.978182.842202@bud.eddelbuettel.com>


On 12 August 2017 at 15:40, Jernej Jev?enak wrote:
| Ok, I see now, that actually everything is OK.
| 
| ERROR on older versions of R is therefore not a problem, right?

"Ideally" those would show OK too but it is of lesser importance / sometimes
explainable.  Life goes on.
  
| One more thing, a few hours after package was accepted, I received an email
| from CRAN:
| 
| *Package dendroExtra_0.0.2.tar.gz has been built for Windows*
| 
| I did not receive any similar email for other operating systems (e.g.
| Linux, Solaris). Is this normal?

Yes. Those platforms do not provide binaries. (And macOS does but does not
spam you.)

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ligges at statistik.tu-dortmund.de  Sat Aug 12 23:53:28 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sat, 12 Aug 2017 23:53:28 +0200
Subject: [R-pkg-devel] CRAN checks errors
In-Reply-To: <22927.6421.978182.842202@bud.eddelbuettel.com>
References: <CACKka23U01g7CCVtCFejPhLPrJAVZZa3MOZ3js1mttXjf5NKHA@mail.gmail.com>
 <22926.62964.860898.439724@bud.eddelbuettel.com>
 <CACKka20suRxn3-v4ytGxFCxc0_MXxxQr2WKE4bDau4eDZyAfHA@mail.gmail.com>
 <22927.6421.978182.842202@bud.eddelbuettel.com>
Message-ID: <24f534b3-6381-5588-eea8-1c219576568d@statistik.tu-dortmund.de>

In thr particular case you even asked for a specific stats version that 
oinly shipd for R-release and later. Hence you should expect that your 
package fails under oldrelease.

By the way, it is typically better to depoend on a specific R version if 
it comes to base packages such as stats.

Best,
Uwe Ligges


On 12.08.2017 17:04, Dirk Eddelbuettel wrote:
> 
> On 12 August 2017 at 15:40, Jernej Jev?enak wrote:
> | Ok, I see now, that actually everything is OK.
> |
> | ERROR on older versions of R is therefore not a problem, right?
> 
> "Ideally" those would show OK too but it is of lesser importance / sometimes
> explainable.  Life goes on.
>    
> | One more thing, a few hours after package was accepted, I received an email
> | from CRAN:
> |
> | *Package dendroExtra_0.0.2.tar.gz has been built for Windows*
> |
> | I did not receive any similar email for other operating systems (e.g.
> | Linux, Solaris). Is this normal?
> 
> Yes. Those platforms do not provide binaries. (And macOS does but does not
> spam you.)
> 
> Dirk
>


From lbusett at gmail.com  Sun Aug 13 15:19:29 2017
From: lbusett at gmail.com (Lorenzo Busetto)
Date: Sun, 13 Aug 2017 15:19:29 +0200
Subject: [R-pkg-devel] mistake in submission of MODIStsp
Message-ID: <CAM1G4SQkF_9nWZn=bxETSA4Xuu+yfXQ=uuxY=a5Eqi4-kCQSpw@mail.gmail.com>

Dear all,

    I recon I did a mistake in my recent submission of v 1.3.3 of package
MODIStsp.

As you can see from the current check results at

https://cran.rstudio.com/web/checks/check_results_MODIStsp.html

, I am obviously missing an import call for package "gWidgetsRGtk2"
? in NAMESPACE?
. I'm sorry about that.

On this topic, I have two questions:

1) How should I proceed to submit a patched version ? Do I need to wait for
all checks to be completed or
?should
I start a
?re-
submission already ?

2) Although this was obviously a mistake on my side, to avoid similar
problems in the future I was wondering why the checks I did on windows
locally (with as--cran option active) and with winbuilder (on r-devel), and
on linux with travis-ci (also with as--cran option active) didn't catch the
problem. Are there different check settings active on the different builds
?

Thanks in advance
? for any advice?
,

Lorenzo

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Sun Aug 13 22:27:16 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sun, 13 Aug 2017 22:27:16 +0200
Subject: [R-pkg-devel] mistake in submission of MODIStsp
In-Reply-To: <CAM1G4SQkF_9nWZn=bxETSA4Xuu+yfXQ=uuxY=a5Eqi4-kCQSpw@mail.gmail.com>
References: <CAM1G4SQkF_9nWZn=bxETSA4Xuu+yfXQ=uuxY=a5Eqi4-kCQSpw@mail.gmail.com>
Message-ID: <834de12d-5293-5660-7727-55f3ca323038@statistik.tu-dortmund.de>



On 13.08.2017 15:19, Lorenzo Busetto wrote:
> Dear all,
> 
>      I recon I did a mistake in my recent submission of v 1.3.3 of package
> MODIStsp.
> 
> As you can see from the current check results at
> 
> https://cran.rstudio.com/web/checks/check_results_MODIStsp.html
> 
> , I am obviously missing an import call for package "gWidgetsRGtk2"
> ? in NAMESPACE?
> . I'm sorry about that.
> 
> On this topic, I have two questions:
> 
> 1) How should I proceed to submit a patched version ? Do I need to wait for
> all checks to be completed or
> ?should
> I start a
> ?re-
> submission already ?


Ideally wait one or two days to see whether this is the only problem, 
then resubmit.


> 2) Although this was obviously a mistake on my side, to avoid similar
> problems in the future I was wondering why the checks I did on windows
> locally (with as--cran option active) and with winbuilder (on r-devel), and
> on linux with travis-ci (also with as--cran option active) didn't catch the
> problem. Are there different check settings active on the different builds
> ?

Yes, but in this case all shluld have got the same problem unless you 
are using the function only under non Windows OS?

Best,
Uwe Ligges



> Thanks in advance
> ? for any advice?
> ,
> 
> Lorenzo
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From lbusett at gmail.com  Sun Aug 13 23:17:34 2017
From: lbusett at gmail.com (Lorenzo Busetto)
Date: Sun, 13 Aug 2017 23:17:34 +0200
Subject: [R-pkg-devel] mistake in submission of MODIStsp
In-Reply-To: <834de12d-5293-5660-7727-55f3ca323038@statistik.tu-dortmund.de>
References: <CAM1G4SQkF_9nWZn=bxETSA4Xuu+yfXQ=uuxY=a5Eqi4-kCQSpw@mail.gmail.com>
 <834de12d-5293-5660-7727-55f3ca323038@statistik.tu-dortmund.de>
Message-ID: <CAM1G4SRBLoOSqytXLLZRtUQsvp8ZdpztfK-rgtJX-giYYuYVpw@mail.gmail.com>

Thanks for your answer. I'll proceed as suggested.

Concerning the checks, besides my own check on windows 10, both the
submission to winbuilder:

(https://win-builder.r-project.org/T7H7Nd2vH7Rh/00check.log)

and a travis-ci run on linux:

(https://travis-ci.org/lbusett/MODIStsp/builds/263772681)

didn't catch the issue.

Lorenzo


On 13 August 2017 at 22:27, Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

>
>
> On 13.08.2017 15:19, Lorenzo Busetto wrote:
>
>> Dear all,
>>
>>      I recon I did a mistake in my recent submission of v 1.3.3 of package
>> MODIStsp.
>>
>> As you can see from the current check results at
>>
>> https://cran.rstudio.com/web/checks/check_results_MODIStsp.html
>>
>> , I am obviously missing an import call for package "gWidgetsRGtk2"
>> ? in NAMESPACE?
>> . I'm sorry about that.
>>
>> On this topic, I have two questions:
>>
>> 1) How should I proceed to submit a patched version ? Do I need to wait
>> for
>> all checks to be completed or
>> ?should
>> I start a
>> ?re-
>> submission already ?
>>
>
>
> Ideally wait one or two days to see whether this is the only problem, then
> resubmit.
>
>
> 2) Although this was obviously a mistake on my side, to avoid similar
>> problems in the future I was wondering why the checks I did on windows
>> locally (with as--cran option active) and with winbuilder (on r-devel),
>> and
>> on linux with travis-ci (also with as--cran option active) didn't catch
>> the
>> problem. Are there different check settings active on the different builds
>> ?
>>
>
> Yes, but in this case all shluld have got the same problem unless you are
> using the function only under non Windows OS?
>
> Best,
> Uwe Ligges
>
>
>
> Thanks in advance
>> ? for any advice?
>> ,
>>
>> Lorenzo
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>

	[[alternative HTML version deleted]]


From David.Kaethner at dlr.de  Mon Aug 14 20:10:01 2017
From: David.Kaethner at dlr.de (David.Kaethner at dlr.de)
Date: Mon, 14 Aug 2017 18:10:01 +0000
Subject: [R-pkg-devel] The Help (e.g. links) is not working for my
 packages
In-Reply-To: <7781f91d-1ec9-be41-05e9-b3a99a591490@gmail.com>
References: <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACB83D@dlrexmbx02.intra.dlr.de>
 <7781f91d-1ec9-be41-05e9-b3a99a591490@gmail.com>
Message-ID: <CDB1C7AAB482D246A4AEF6C17ACD9CF239ACF036@dlrexmbx02.intra.dlr.de>

Hello,

for the archive: I believe I found the solution, validated on Win7 and MacOS.

This error occurs for any package that starts with "help". So "hell" is ok, "help12345" is not ok as a package name.

Is this documented behavior? Apologies if I missed that.


-----Urspr?ngliche Nachricht-----
Von: Duncan Murdoch [mailto:murdoch.duncan at gmail.com] 
Gesendet: Mittwoch, 9. August 2017 14:39
An: K?thner, David; r-package-devel at r-project.org
Betreff: Re: [R-pkg-devel] The Help (e.g. links) is not working for my packages

On 07/08/2017 3:41 AM, David.Kaethner at dlr.de wrote:
> Hello,
>
>
>
> I am hoping to post to the right mailing list, if not apologies!
>
>
>
> I have recently written my first couple packages, relying on devtools and roxygen. Everything is done in RStudio (details regarding the setup: see end of text).
>
>
>
> But the help is not working! Specifically:
>
>
>
> On Windows 7:
>
> * functions: I cannot click the links in the 'help'-panel. Or at least nothing happens when I click them.
>
> * DESCRIPTION: If I build the package locally, it has the same issues as the packages. If I install the packages from Github (devtools::install_github) or from a network drive, it works.
>
> * The "my_package::my_function" syntax throws an error. Once I enter 'my_package::' and click TAB, the following error appears in the console: "Error in gzfile(file, "rb") : cannot open the connection"
>
> * "?my_package::my_function" brings me to the function overview page 
> for the package, but not to the help page for the my_function()
>
> * the link itself (on the function overview page) looks inocuous: 
> http://127.0.0.1:44391/help/library/helpers/html/my_function.html
>
>
>
> I would love to do a Traceback on this, but I do not know how, since it only happens when hitting TAB. I have done a Traceback for "?my_package::my_function", it just returns the path to where the help should be, like "D:/Home/R/Rpackages/my_package/help/my_function".
>
>
>
> On MacOS Sierra:
>
> * DESCRIPTION can always be opened, no matter how the package is 
> installed
>
> * when clicking on functions in the help panel, the known error appears (as text in the help panel): "Error in gzfile(file, "rb") : cannot open the connection"
>
>
>
> It gets much weirder: When installing the package for the very first time, it seems to work! But after that it quits working, even not when I delete the package, re-install R, re-install RStudio, and create the package from scratch.
>
>
>
> I really wish I was kidding with all of this. I have tried every debugging-idea that came to my mind, including (but not limited to):
>
> * the .Rd-files are generated, they definitely are not missing
>
> * taking an auto-generated DESCRIPTION file
>
> * removing every function file save for a test file
>
> * copying content from a function file into the auto-generated 
> "hello.R" file
>
> * changing the encoding from UTF-8 to WINDOWS-1252
>
> * as mentioned, trying everying both on Windows and MacOS, and trying 
> different ways of installation
>
> * as mentioned, re-installing both R and RStudio
>
>
>
> I would enormously appreciate it if anyone has an idea how to get a handle on this, any suggestions are welcome!

Nothing that you've written is reproducible by others.  See if you can put together a short self-contained series of instructions that display the problems (or just one of them).  It might involve installing from Github, or making a package tarball available somewhere.

Duncan Murdoch


From lbusett at gmail.com  Wed Aug 16 08:58:29 2017
From: lbusett at gmail.com (Lorenzo Busetto)
Date: Wed, 16 Aug 2017 08:58:29 +0200
Subject: [R-pkg-devel] mistake in submission of MODIStsp
In-Reply-To: <CAM1G4SRBLoOSqytXLLZRtUQsvp8ZdpztfK-rgtJX-giYYuYVpw@mail.gmail.com>
References: <CAM1G4SQkF_9nWZn=bxETSA4Xuu+yfXQ=uuxY=a5Eqi4-kCQSpw@mail.gmail.com>
 <834de12d-5293-5660-7727-55f3ca323038@statistik.tu-dortmund.de>
 <CAM1G4SRBLoOSqytXLLZRtUQsvp8ZdpztfK-rgtJX-giYYuYVpw@mail.gmail.com>
Message-ID: <CAM1G4SSJfNAhMnNjgA=ugZyGpyCCDBddTq44GqdjY+7SQUM1Vg@mail.gmail.com>

In case you're interested,  the "final results" of CRAN checks on MODIStsp
were the following
(https://cran.r-project.org/web/checks/check_results_MODIStsp.html):

- Builds on Debian, Linux and Windows didn't catch the missing import
problem
and completed with no NOTES

- Builds on Solaris, Fedora and OSX identified the problem it and issued a
NOTE.

HTH,

Lorenzo


On 13 August 2017 at 23:17, Lorenzo Busetto <lbusett at gmail.com> wrote:

> Thanks for your answer. I'll proceed as suggested.
>
> Concerning the checks, besides my own check on windows 10, both the
> submission to winbuilder:
>
> (https://win-builder.r-project.org/T7H7Nd2vH7Rh/00check.log)
>
> and a travis-ci run on linux:
>
> (https://travis-ci.org/lbusett/MODIStsp/builds/263772681)
>
> didn't catch the issue.
>
> Lorenzo
>
>
> On 13 August 2017 at 22:27, Uwe Ligges <ligges at statistik.tu-dortmund.de>
> wrote:
>
>>
>>
>> On 13.08.2017 15:19, Lorenzo Busetto wrote:
>>
>>> Dear all,
>>>
>>>      I recon I did a mistake in my recent submission of v 1.3.3 of
>>> package
>>> MODIStsp.
>>>
>>> As you can see from the current check results at
>>>
>>> https://cran.rstudio.com/web/checks/check_results_MODIStsp.html
>>>
>>> , I am obviously missing an import call for package "gWidgetsRGtk2"
>>> ? in NAMESPACE?
>>> . I'm sorry about that.
>>>
>>> On this topic, I have two questions:
>>>
>>> 1) How should I proceed to submit a patched version ? Do I need to wait
>>> for
>>> all checks to be completed or
>>> ?should
>>> I start a
>>> ?re-
>>> submission already ?
>>>
>>
>>
>> Ideally wait one or two days to see whether this is the only problem,
>> then resubmit.
>>
>>
>> 2) Although this was obviously a mistake on my side, to avoid similar
>>> problems in the future I was wondering why the checks I did on windows
>>> locally (with as--cran option active) and with winbuilder (on r-devel),
>>> and
>>> on linux with travis-ci (also with as--cran option active) didn't catch
>>> the
>>> problem. Are there different check settings active on the different
>>> builds
>>> ?
>>>
>>
>> Yes, but in this case all shluld have got the same problem unless you are
>> using the function only under non Windows OS?
>>
>> Best,
>> Uwe Ligges
>>
>>
>>
>> Thanks in advance
>>> ? for any advice?
>>> ,
>>>
>>> Lorenzo
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>>
>

	[[alternative HTML version deleted]]


From berryboessenkool at hotmail.com  Wed Aug 16 11:11:24 2017
From: berryboessenkool at hotmail.com (Berry Boessenkool)
Date: Wed, 16 Aug 2017 09:11:24 +0000
Subject: [R-pkg-devel] package dependencies not detected?
Message-ID: <DB5PR0401MB17813060BD5941A875DAA85BD5820@DB5PR0401MB1781.eurprd04.prod.outlook.com>


Hi,


if a function in a package uses graphics::legend in the code, but does not import it in the namespace, shouldn't there be a warning in the check?

There is not, also not on CRAN (one of my packages did this with stats::density).

Should I report this to the CRAN team?


Regards,

Berry


Here's a minimal working example using devtools:

### install.packages(c("devtools","roxygen2"))

# create package structure ----
getwd()
devtools::create("testPack", description=list(License="GPL (>=2)"))
setwd("testPack/")
devtools::check() # everything is fine

# add function ----
cat("
#' @title test function
#' @description test function
#' @export
#' @importFrom graphics plot
#' @examples testFun(1:6, col=2)
#' @param x Values
#' @param args List of arguments passed to legend
#' @param \\dots Further arguments passed to plot
#'
testFun <- function(
  x,
  args=list(x='topright', legend=c('A','B'), lty=1),
  ...
  )
  {
  plot(x, ...)
  do.call(graphics::legend, args)
  }
", file="R/testFun.R")

devtools::check() # no problems - even though I only import plot, not legend
# same thing if I use graphics::legend directly (outside of do.call)


	[[alternative HTML version deleted]]


From edd at debian.org  Wed Aug 16 12:29:40 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 16 Aug 2017 05:29:40 -0500
Subject: [R-pkg-devel] package dependencies not detected?
In-Reply-To: <DB5PR0401MB17813060BD5941A875DAA85BD5820@DB5PR0401MB1781.eurprd04.prod.outlook.com>
References: <DB5PR0401MB17813060BD5941A875DAA85BD5820@DB5PR0401MB1781.eurprd04.prod.outlook.com>
Message-ID: <22932.7828.349420.826590@bud.eddelbuettel.com>


On 16 August 2017 at 09:11, Berry Boessenkool wrote:
| if a function in a package uses graphics::legend in the code, but does not import it in the namespace, shouldn't there be a warning in the check?

The 'graphics' package is a base package, and as such *always* available
where R is -- see its DESCRIPTION below stating 'Priority: base'.

An explicit import would be redundant.

Dirk


Package: graphics
Version: 3.4.1
Priority: base
Title: The R Graphics Package
Author: R Core Team and contributors worldwide
Maintainer: R Core Team <R-core at r-project.org>
Description: R functions for base graphics.
Imports: grDevices
License: Part of R 3.4.1
NeedsCompilation: yes
Built: R 3.4.1; x86_64-pc-linux-gnu; 2017-07-08 15:13:56 UTC; unix


-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From pdalgd at gmail.com  Wed Aug 16 12:51:24 2017
From: pdalgd at gmail.com (peter dalgaard)
Date: Wed, 16 Aug 2017 12:51:24 +0200
Subject: [R-pkg-devel] package dependencies not detected?
In-Reply-To: <DB5PR0401MB17813060BD5941A875DAA85BD5820@DB5PR0401MB1781.eurprd04.prod.outlook.com>
References: <DB5PR0401MB17813060BD5941A875DAA85BD5820@DB5PR0401MB1781.eurprd04.prod.outlook.com>
Message-ID: <B7F6F266-4EEF-469C-9207-B7EABD110CDF@gmail.com>


> On 16 Aug 2017, at 11:11 , Berry Boessenkool <berryboessenkool at hotmail.com> wrote:
> 
> 
> Hi,
> 
> 
> if a function in a package uses graphics::legend in the code, but does not import it in the namespace, shouldn't there be a warning in the check?
> 

Er, no... Importing into a namespace is used to avoid the graphics:: qualifier. This is conceptually different from having a dependency.

-pd


> There is not, also not on CRAN (one of my packages did this with stats::density).
> 
> Should I report this to the CRAN team?
> 
> 
> Regards,
> 
> Berry
> 
> 
> Here's a minimal working example using devtools:
> 
> ### install.packages(c("devtools","roxygen2"))
> 
> # create package structure ----
> getwd()
> devtools::create("testPack", description=list(License="GPL (>=2)"))
> setwd("testPack/")
> devtools::check() # everything is fine
> 
> # add function ----
> cat("
> #' @title test function
> #' @description test function
> #' @export
> #' @importFrom graphics plot
> #' @examples testFun(1:6, col=2)
> #' @param x Values
> #' @param args List of arguments passed to legend
> #' @param \\dots Further arguments passed to plot
> #'
> testFun <- function(
>  x,
>  args=list(x='topright', legend=c('A','B'), lty=1),
>  ...
>  )
>  {
>  plot(x, ...)
>  do.call(graphics::legend, args)
>  }
> ", file="R/testFun.R")
> 
> devtools::check() # no problems - even though I only import plot, not legend
> # same thing if I use graphics::legend directly (outside of do.call)
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From edd at debian.org  Wed Aug 16 14:31:56 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 16 Aug 2017 07:31:56 -0500
Subject: [R-pkg-devel] package dependencies not detected?
In-Reply-To: <B7F6F266-4EEF-469C-9207-B7EABD110CDF@gmail.com>
References: <DB5PR0401MB17813060BD5941A875DAA85BD5820@DB5PR0401MB1781.eurprd04.prod.outlook.com>
 <B7F6F266-4EEF-469C-9207-B7EABD110CDF@gmail.com>
Message-ID: <22932.15164.509475.434038@bud.eddelbuettel.com>


On 16 August 2017 at 12:51, peter dalgaard wrote:
| > On 16 Aug 2017, at 11:11 , Berry Boessenkool <berryboessenkool at hotmail.com> wrote:
| > 
| > if a function in a package uses graphics::legend in the code, but does not import it in the namespace, shouldn't there be a warning in the check?
| > 
| 
| Er, no... Importing into a namespace is used to avoid the graphics:: qualifier. This is conceptually different from having a dependency.

Exactly, but IIRC we get warnings on packages not listed in Suggests: which are
accessed via '::'.  And that need for a Suggests: goes away for a base package.

Otherwise Peter's reminder is entirely correct. You can do _either_ an
  importForm("graphics", "plot", "legend") in NAMESPACE (which I have done)
or use the explicit
  graphics::legend
you have.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch.duncan at gmail.com  Wed Aug 16 15:44:50 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 16 Aug 2017 09:44:50 -0400
Subject: [R-pkg-devel] package dependencies not detected?
In-Reply-To: <22932.15164.509475.434038@bud.eddelbuettel.com>
References: <DB5PR0401MB17813060BD5941A875DAA85BD5820@DB5PR0401MB1781.eurprd04.prod.outlook.com>
 <B7F6F266-4EEF-469C-9207-B7EABD110CDF@gmail.com>
 <22932.15164.509475.434038@bud.eddelbuettel.com>
Message-ID: <bea8c147-f51a-03d4-5cdf-7863a87e9c09@gmail.com>

On 16/08/2017 8:31 AM, Dirk Eddelbuettel wrote:
>
> On 16 August 2017 at 12:51, peter dalgaard wrote:
> | > On 16 Aug 2017, at 11:11 , Berry Boessenkool <berryboessenkool at hotmail.com> wrote:
> | >
> | > if a function in a package uses graphics::legend in the code, but does not import it in the namespace, shouldn't there be a warning in the check?
> | >
> |
> | Er, no... Importing into a namespace is used to avoid the graphics:: qualifier. This is conceptually different from having a dependency.
>
> Exactly, but IIRC we get warnings on packages not listed in Suggests: which are
> accessed via '::'.  And that need for a Suggests: goes away for a base package.

s/Suggests/Imports/g

>
> Otherwise Peter's reminder is entirely correct. You can do _either_ an
>   importForm("graphics", "plot", "legend") in NAMESPACE (which I have done)
> or use the explicit
>   graphics::legend
> you have.
>
> Dirk
>


From edd at debian.org  Wed Aug 16 16:21:19 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 16 Aug 2017 09:21:19 -0500
Subject: [R-pkg-devel] package dependencies not detected?
In-Reply-To: <bea8c147-f51a-03d4-5cdf-7863a87e9c09@gmail.com>
References: <DB5PR0401MB17813060BD5941A875DAA85BD5820@DB5PR0401MB1781.eurprd04.prod.outlook.com>
 <B7F6F266-4EEF-469C-9207-B7EABD110CDF@gmail.com>
 <22932.15164.509475.434038@bud.eddelbuettel.com>
 <bea8c147-f51a-03d4-5cdf-7863a87e9c09@gmail.com>
Message-ID: <22932.21727.863476.467771@bud.eddelbuettel.com>


On 16 August 2017 at 09:44, Duncan Murdoch wrote:
| On 16/08/2017 8:31 AM, Dirk Eddelbuettel wrote:
| >
| > On 16 August 2017 at 12:51, peter dalgaard wrote:
| > | > On 16 Aug 2017, at 11:11 , Berry Boessenkool <berryboessenkool at hotmail.com> wrote:
| > | >
| > | > if a function in a package uses graphics::legend in the code, but does not import it in the namespace, shouldn't there be a warning in the check?
| > | >
| > |
| > | Er, no... Importing into a namespace is used to avoid the graphics:: qualifier. This is conceptually different from having a dependency.
| >
| > Exactly, but IIRC we get warnings on packages not listed in Suggests: which are
| > accessed via '::'.  And that need for a Suggests: goes away for a base package.
| 
| s/Suggests/Imports/g

Yes, I wasn't perfectly clear but Suggests: is what I have in a (smaller,
still local, still experimental) package where I have only

  Description: A collection of utility functions.
  Suggests: anytime, data.table, zoo, xts, TTR, quantmod

ie not a single Depends: or Imports: or LinkingTo: and all use in R/ is
prefixed by double colon.

And in that case I do not need Suggests: for base packages I use.

But yes, in the general case, one would have NAMESPACE and importFrom(...)
along with an Imports:

Dirk, who has now beaten that poor horse of Berry into utter pulp
 
| >
| > Otherwise Peter's reminder is entirely correct. You can do _either_ an
| >   importForm("graphics", "plot", "legend") in NAMESPACE (which I have done)
| > or use the explicit
| >   graphics::legend
| > you have.
| >
| > Dirk
| >
| 

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From chulankao at gmail.com  Thu Aug 17 10:14:59 2017
From: chulankao at gmail.com (Chu-Lan Kao)
Date: Thu, 17 Aug 2017 16:14:59 +0800
Subject: [R-pkg-devel] Question on Notes for Package Submission
Message-ID: <CAGAt5k-im3tcvW4uL-6R9Mvx07frj2cFxOrKnfsoDSLQTNx97g@mail.gmail.com>

Dear Sir,

We've just uploaded a package with two notes that we couldn't figure out
how to deal with it. They are:

1) * checking R code for possible problems ... NOTE

est.changepoints: no visible global function definition for
  'prior_normal_A'
est.changepoints: no visible binding for global variable 'data.X'
est.changepoints: no visible global function definition for
  'prior_pois'
Undefined global functions or variables:
  data.X prior_normal_A prior_pois


2) * checking compiled code ... NOTE

File 'StepSignalMargiLike/libs/i386/StepSignalMargiLike.dll':
  Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
File 'StepSignalMargiLike/libs/x64/StepSignalMargiLike.dll':
  Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'

It is good practice to register native routines and to disable symbol
search.

See 'Writing portable packages' in the 'Writing R Extensions' manual.



We have browsed through the internet, and couldn't find the correct way to
solve these. So, we kindly ask for you help.

Sincerely,


Chu-Lan Kao ( ??? Michael )
*http://chulankao.blogspot.com / <http://chulankao.blogspot.com/>*
ChuLanKao at gmail.com
<http://chulankao.blogspot.com%20/%20ChuLanKao at gmail.com> / 0956242509

Assist. Prof. in Statistics, National Chiao-Tung University
Music Director for dramAcappella Theater
<https://www.facebook.com/dramAcappella>
Composer, Taipei Philaharmonic Chorus <http://www.tpf.org.tw/index.php>
Gamer Consultant and Designer, Swan Panasia Co., Ltd.
<http://www.swanpanasia.com/public/indexs.php?cont=1&lng=ct&flash=on>

	[[alternative HTML version deleted]]


From i.ucar86 at gmail.com  Fri Aug 18 12:07:06 2017
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Fri, 18 Aug 2017 12:07:06 +0200
Subject: [R-pkg-devel] Question on Notes for Package Submission
In-Reply-To: <CAGAt5k-im3tcvW4uL-6R9Mvx07frj2cFxOrKnfsoDSLQTNx97g@mail.gmail.com>
References: <CAGAt5k-im3tcvW4uL-6R9Mvx07frj2cFxOrKnfsoDSLQTNx97g@mail.gmail.com>
Message-ID: <CALEXWq271UiRcRQh3n-Kw2gXE0-Y4ZS=YTrpFk1d7XdcSuhL8g@mail.gmail.com>

Hi,

The messages are quite clear:

2017-08-17 10:14 GMT+02:00 Chu-Lan Kao <chulankao at gmail.com>:
> Dear Sir,
>
> We've just uploaded a package with two notes that we couldn't figure out
> how to deal with it. They are:
>
> 1) * checking R code for possible problems ... NOTE
>
> est.changepoints: no visible global function definition for
>   'prior_normal_A'
> est.changepoints: no visible binding for global variable 'data.X'
> est.changepoints: no visible global function definition for
>   'prior_pois'
> Undefined global functions or variables:
>   data.X prior_normal_A prior_pois

These are checks for undefined functions and variables. Sometimes,
non-standard evaluation causes this kind of message, but without a
link to the source code, it's impossible for me to assess the problem.
There are dozens of excellent posts about this topic though, so I
shall not elaborate on it any further.

For instance: https://stackoverflow.com/q/9439256/6788081

> 2) * checking compiled code ... NOTE
>
> File 'StepSignalMargiLike/libs/i386/StepSignalMargiLike.dll':
>   Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
> File 'StepSignalMargiLike/libs/x64/StepSignalMargiLike.dll':
>   Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
>
> It is good practice to register native routines and to disable symbol
> search.
>
> See 'Writing portable packages' in the 'Writing R Extensions' manual.

This is mandatory since v3.4.0 and should issue a warning if I'm not
mistaken. Please, read "Writing R Extensions" carefully as the message
is exhorting you. This and further readings:

https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Registering-native-routines
http://dirk.eddelbuettel.com/blog/2017/03/29/#001_easy_package_registration
http://dirk.eddelbuettel.com/blog/2017/03/30/#002_even_easier_package_registration

Regards,
I?aki


From sushantorama at gmail.com  Sun Aug 20 20:10:00 2017
From: sushantorama at gmail.com (Dr. Sushant Singh)
Date: Sun, 20 Aug 2017 14:10:00 -0400
Subject: [R-pkg-devel] Package errors
Message-ID: <CAEXLBu-VWbcPACU0L4R14o8KYTJCSr2=M3bafc45gOyD=QzCew@mail.gmail.com>

Hi there,
This is the first time I am submitting an r-Package and I have received
this error detail:<https://win-builder.r-project.org/incoming_pretest/
170820_191515_VulnerabilityIndex_010>

I am not sure how to fix them. Could you please help me to fix this?

Thank you.

Best regards,

Sushant

-- 

*Sushant Singh*
Data Scientist
PhD (Environmental Management-USA)
PhD (Environmental Science-India)
Jawaharlal Nehru Fellow, India
E-mail: sushantorama at gmail.com
Skype ID: singhsushant15

	[[alternative HTML version deleted]]


From edd at debian.org  Tue Aug 22 12:27:35 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 22 Aug 2017 05:27:35 -0500
Subject: [R-pkg-devel] Package errors
In-Reply-To: <CAEXLBu-VWbcPACU0L4R14o8KYTJCSr2=M3bafc45gOyD=QzCew@mail.gmail.com>
References: <CAEXLBu-VWbcPACU0L4R14o8KYTJCSr2=M3bafc45gOyD=QzCew@mail.gmail.com>
Message-ID: <22940.1815.980749.197266@bud.eddelbuettel.com>


On 20 August 2017 at 14:10, Dr. Sushant Singh wrote:
| Hi there,
| This is the first time I am submitting an r-Package and I have received
| this error detail:<https://win-builder.r-project.org/incoming_pretest/
| 170820_191515_VulnerabilityIndex_010>
| 
| I am not sure how to fix them. Could you please help me to fix this?

You have
  Status: 1 WARNING, 2 NOTEs

where the WARNING is more serious:

  * checking for missing documentation entries ... WARNING
  Undocumented code objects:
    'vulnerability'
  All user-level objects in a package should have documentation entries.
  See chapter 'Writing R documentation files' in the 'Writing R
  Extensions' manual.

Please read the section, and add the missing manual page.

Next, the NOTE

  * checking R code for possible problems ... [4s] NOTE
  vulnerability: no visible binding for global variable 'Vulnerability'
  Undefined global functions or variables:
    Vulnerability

suggest that maybe you were not careful about case as Vulnerability !=
vulnerability.  In any event you can have undefined global objects.

The other NOTE is about spelling which you can normally ignore.

You can check these things locally too via 'R CME check ...packagename...'

Dirk
 
| Thank you.
| 
| Best regards,
| 
| Sushant
| 
| -- 
| 
| *Sushant Singh*
| Data Scientist
| PhD (Environmental Management-USA)
| PhD (Environmental Science-India)
| Jawaharlal Nehru Fellow, India
| E-mail: sushantorama at gmail.com
| Skype ID: singhsushant15
| 
| 	[[alternative HTML version deleted]]
| 
| ______________________________________________
| R-package-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From drjimlemon at gmail.com  Wed Aug 23 00:15:59 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Wed, 23 Aug 2017 08:15:59 +1000
Subject: [R-pkg-devel] Plotrix install bug with Umlauts in path name
Message-ID: <CA+8X3fWe6D=5OPk_KH7PzD4ef=5MfYiNkDLqBKTr-C-OqOL8Pg@mail.gmail.com>

Hi,
I received the message below a few days ago. I have no idea why the
plotrix package should not install properly to a directory with
umlauts in the path name. Apparently other packages do install
properly for the OP. If any package gurus know the answer to this, I
would be happy to hear about it as if there is a problem with the
plotrix package I would like to fix it. Thanks.

Jim

Original message

Just wanted to let you know, that installing plotrix on a Windows
machine where my userprofile path has Umlauts fails. Installing into
another directory runs fine.

If you want to look into this, I am happy to provide logs and help where I can.

Cheers, Andr?


From bruce.hoff at sagebase.org  Wed Aug 23 01:37:50 2017
From: bruce.hoff at sagebase.org (Bruce Hoff)
Date: Tue, 22 Aug 2017 16:37:50 -0700
Subject: [R-pkg-devel] Directing package feedback to Github issues
Message-ID: <CAAeMkWvRjYqg+A4HwomfWd6iBPsMfGyZdav+MoN6hd2KZoOGvA@mail.gmail.com>

Hi:

The official instructions for writing an R package (https://cran.r-project.
org/doc/manuals/r-release/R-exts.html) states, in part,

"The mandatory ?Maintainer? field should give a *single* name followed by a
*valid* (RFC 2822) email address in angle brackets.... For a CRAN package
it should be a *person*, not a mailing list and not a corporate entity: do
ensure that it is valid and will remain valid for the lifetime of the
package."


It seems like user feedback for a package (e.g. bug reports and feature
requests) to the maintainer would best be provided in terms of issues
opened in an issue tracking system rather than an email sent to a "person,
not a mailing list".  A prominent example is Github issue tracking, where
the Github repository for the issues could be the same issue.

Is there an accepted approach among R package authors to direct users of a
package to an issue tracking system?

Thank you,

Bruce Hoff
Sage Bionetworks

	[[alternative HTML version deleted]]


From i.ucar86 at gmail.com  Wed Aug 23 01:43:50 2017
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Wed, 23 Aug 2017 01:43:50 +0200
Subject: [R-pkg-devel] Directing package feedback to Github issues
In-Reply-To: <CAAeMkWvRjYqg+A4HwomfWd6iBPsMfGyZdav+MoN6hd2KZoOGvA@mail.gmail.com>
References: <CAAeMkWvRjYqg+A4HwomfWd6iBPsMfGyZdav+MoN6hd2KZoOGvA@mail.gmail.com>
Message-ID: <CALEXWq2zgZE339za5-Y-1ZtBDAAV0_ezQs-+17RCFYfrPon+vg@mail.gmail.com>

Hi,

2017-08-23 1:37 GMT+02:00 Bruce Hoff <bruce.hoff at sagebase.org>:
> The official instructions for writing an R package (https://cran.r-project.
> org/doc/manuals/r-release/R-exts.html) states, in part,
>
> "The mandatory ?Maintainer? field should give a *single* name followed by a
> *valid* (RFC 2822) email address in angle brackets.... For a CRAN package
> it should be a *person*, not a mailing list and not a corporate entity: do
> ensure that it is valid and will remain valid for the lifetime of the
> package."
>
>
> It seems like user feedback for a package (e.g. bug reports and feature
> requests) to the maintainer would best be provided in terms of issues
> opened in an issue tracking system rather than an email sent to a "person,
> not a mailing list".  A prominent example is Github issue tracking, where
> the Github repository for the issues could be the same issue.
>
> Is there an accepted approach among R package authors to direct users of a
> package to an issue tracking system?

See 8 paragraphs ahead of that quote:

"The ?BugReports? field may contain a single URL to which bug reports
about the package should be submitted. This URL will be used by
bug.report instead of sending an email to the maintainer."

I?aki


From bruce.hoff at sagebase.org  Wed Aug 23 01:49:35 2017
From: bruce.hoff at sagebase.org (Bruce Hoff)
Date: Tue, 22 Aug 2017 16:49:35 -0700
Subject: [R-pkg-devel] Directing package feedback to Github issues
In-Reply-To: <CALEXWq2zgZE339za5-Y-1ZtBDAAV0_ezQs-+17RCFYfrPon+vg@mail.gmail.com>
References: <CAAeMkWvRjYqg+A4HwomfWd6iBPsMfGyZdav+MoN6hd2KZoOGvA@mail.gmail.com>
 <CALEXWq2zgZE339za5-Y-1ZtBDAAV0_ezQs-+17RCFYfrPon+vg@mail.gmail.com>
Message-ID: <CAAeMkWtAHdz=3b+g+YNtbE_vAQu6E5BU-vr_7GgGMRVAt4E=HQ@mail.gmail.com>

I?aki:
That's perfect.
Thanks,
Bruce

On Tue, Aug 22, 2017 at 4:43 PM, I?aki ?car <i.ucar86 at gmail.com> wrote:

> Hi,
>
> 2017-08-23 1:37 GMT+02:00 Bruce Hoff <bruce.hoff at sagebase.org>:
> > The official instructions for writing an R package (
> https://cran.r-project.
> > org/doc/manuals/r-release/R-exts.html) states, in part,
> >
> > "The mandatory ?Maintainer? field should give a *single* name followed
> by a
> > *valid* (RFC 2822) email address in angle brackets.... For a CRAN package
> > it should be a *person*, not a mailing list and not a corporate entity:
> do
> > ensure that it is valid and will remain valid for the lifetime of the
> > package."
> >
> >
> > It seems like user feedback for a package (e.g. bug reports and feature
> > requests) to the maintainer would best be provided in terms of issues
> > opened in an issue tracking system rather than an email sent to a
> "person,
> > not a mailing list".  A prominent example is Github issue tracking, where
> > the Github repository for the issues could be the same issue.
> >
> > Is there an accepted approach among R package authors to direct users of
> a
> > package to an issue tracking system?
>
> See 8 paragraphs ahead of that quote:
>
> "The ?BugReports? field may contain a single URL to which bug reports
> about the package should be submitted. This URL will be used by
> bug.report instead of sending an email to the maintainer."
>
> I?aki
>

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Wed Aug 23 02:08:31 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 22 Aug 2017 20:08:31 -0400
Subject: [R-pkg-devel] Plotrix install bug with Umlauts in path name
In-Reply-To: <CA+8X3fWe6D=5OPk_KH7PzD4ef=5MfYiNkDLqBKTr-C-OqOL8Pg@mail.gmail.com>
References: <CA+8X3fWe6D=5OPk_KH7PzD4ef=5MfYiNkDLqBKTr-C-OqOL8Pg@mail.gmail.com>
Message-ID: <a9b83a6e-d7cd-d994-4e51-26271de7abb5@gmail.com>

On 22/08/2017 6:15 PM, Jim Lemon wrote:
> Hi,
> I received the message below a few days ago. I have no idea why the
> plotrix package should not install properly to a directory with
> umlauts in the path name. Apparently other packages do install
> properly for the OP. If any package gurus know the answer to this, I
> would be happy to hear about it as if there is a problem with the
> plotrix package I would like to fix it. Thanks.

I just tried this, and had no problem.  So I think you'll need to see 
the logs of exactly what problem Andr? was seeing.

Duncan Murdoch

>
> Jim
>
> Original message
>
> Just wanted to let you know, that installing plotrix on a Windows
> machine where my userprofile path has Umlauts fails. Installing into
> another directory runs fine.
>
> If you want to look into this, I am happy to provide logs and help where I can.
>
> Cheers, Andr?
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From blerner at mtholyoke.edu  Wed Aug 23 18:07:43 2017
From: blerner at mtholyoke.edu (Barbara Lerner)
Date: Wed, 23 Aug 2017 12:07:43 -0400
Subject: [R-pkg-devel] Including a jar file in a package
Message-ID: <599DA84F.8090103@mtholyoke.edu>

We are developing a package that makes a call out to a Java program.  We 
have placed a jar file for this program in inst/java and it works 
nicely.  However, when we run R CMD check, it results in a NOTE:

* checking installed package size ... NOTE
   installed size is 11.0Mb
   sub-directories of 1Mb or more:
     java  10.8Mb

Is it likely that CRAN would accept a package that includes a large 
subdirectory like this?  If not, what is the recommended way to do 
this?  The nice thing about our current solution is that the user of our 
package does not need to separately install the Java program and deal 
with Java's classpath.

Thanks for the advice.

Barbara

-- 
<http://www.getpostbox.com>Barbara Lerner
Associate Professor
Computer Science Department
Mount Holyoke College

<http://www.getpostbox.com><http://www.getpostbox.com>

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Wed Aug 23 18:56:16 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 23 Aug 2017 12:56:16 -0400
Subject: [R-pkg-devel] Including a jar file in a package
In-Reply-To: <599DA84F.8090103@mtholyoke.edu>
References: <599DA84F.8090103@mtholyoke.edu>
Message-ID: <2b34ca53-31b6-9de8-cf01-de75f6b0e4e1@gmail.com>

On 23/08/2017 12:07 PM, Barbara Lerner wrote:
> We are developing a package that makes a call out to a Java program.  We
> have placed a jar file for this program in inst/java and it works
> nicely.  However, when we run R CMD check, it results in a NOTE:
>
> * checking installed package size ... NOTE
>    installed size is 11.0Mb
>    sub-directories of 1Mb or more:
>      java  10.8Mb
>
> Is it likely that CRAN would accept a package that includes a large
> subdirectory like this?  If not, what is the recommended way to do
> this?  The nice thing about our current solution is that the user of our
> package does not need to separately install the Java program and deal
> with Java's classpath.
>
> Thanks for the advice.
>
> Barbara
>

It likely depends on the circumstances.  Did you write the Java code in 
the jar file?  If not, does any other CRAN package use the same jar 
file?  It doesn't really make sense for both of you to package it.

Assuming the jar file isn't already on CRAN, and it really is necessary 
for your package, and your package adds something to CRAN, they'll 
probably allow it.  You should include a comment with your submission 
explaining why you need the exception.

Duncan Murdoch


From blerner at mtholyoke.edu  Wed Aug 23 19:05:43 2017
From: blerner at mtholyoke.edu (Barbara Lerner)
Date: Wed, 23 Aug 2017 13:05:43 -0400
Subject: [R-pkg-devel] Including a jar file in a package
In-Reply-To: <2b34ca53-31b6-9de8-cf01-de75f6b0e4e1@gmail.com>
References: <599DA84F.8090103@mtholyoke.edu>
 <2b34ca53-31b6-9de8-cf01-de75f6b0e4e1@gmail.com>
Message-ID: <599DB5E7.30201@mtholyoke.edu>

Thanks for this advice.  The Java code was developed by our project and 
is not used by any other R packages.

Barbara

> Duncan Murdoch <mailto:murdoch.duncan at gmail.com>
> August 23, 2017 at 12:56 PM
>
>
> It likely depends on the circumstances.  Did you write the Java code 
> in the jar file?  If not, does any other CRAN package use the same jar 
> file?  It doesn't really make sense for both of you to package it.
>
> Assuming the jar file isn't already on CRAN, and it really is 
> necessary for your package, and your package adds something to CRAN, 
> they'll probably allow it.  You should include a comment with your 
> submission explaining why you need the exception.
>
> Duncan Murdoch
> Barbara Lerner <mailto:blerner at mtholyoke.edu>
> August 23, 2017 at 12:07 PM
> We are developing a package that makes a call out to a Java program.  
> We have placed a jar file for this program in inst/java and it works 
> nicely.  However, when we run R CMD check, it results in a NOTE:
>
> * checking installed package size ... NOTE
>   installed size is 11.0Mb
>   sub-directories of 1Mb or more:
>     java  10.8Mb
>
> Is it likely that CRAN would accept a package that includes a large 
> subdirectory like this?  If not, what is the recommended way to do 
> this?  The nice thing about our current solution is that the user of 
> our package does not need to separately install the Java program and 
> deal with Java's classpath.
>
> Thanks for the advice.
>
> Barbara
>

-- 
<http://www.getpostbox.com>Barbara Lerner
Associate Professor
Computer Science Department
Mount Holyoke College

<http://www.getpostbox.com><http://www.getpostbox.com>

	[[alternative HTML version deleted]]


From nonsense at graumannschaft.org  Thu Aug 24 09:28:22 2017
From: nonsense at graumannschaft.org (Johannes Graumann)
Date: Thu, 24 Aug 2017 09:28:22 +0200
Subject: [R-pkg-devel] CRAN upload and prechecking confusion
Message-ID: <1503559702.10262.12.camel@graumannschaft.org>

Hello,

I'm trying to submit a new version (0.10.2) of my package
(multipanelfigure) to CRAN and have received the following email:

> Dear maintainer,
>  
> package multipanelfigure_0.10.2.tar.gz does not pass the incoming
> checks automatically, please see the pre-test at:
> <https://win-builder.r-project.org/incoming_pretest/170824_085724_mul
> tipanelfigure_0102/00check.log>
> Status: 2 NOTEs
>  
> Current CRAN status: ERROR: 1, OK: 10
> See: <https://CRAN.R-project.org/web/checks/check_results_multipanelf
> igure.html>

This is confusing. What's the deal breaker? 
The 2 Notes (which are timing issues related to drawing grid graphics)
or 
the Error on x86_64-apple-darwin15.6.0 which is based on the fact that
gridGraphics is unavailable for that platform and even more
confungsingly seems to be based on the former version (0.9.0) of the
package ...

Thanks for any hints.

Sincerely, Joh


From brian at braverock.com  Thu Aug 24 09:59:55 2017
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 24 Aug 2017 02:59:55 -0500
Subject: [R-pkg-devel] CRAN upload and prechecking confusion
In-Reply-To: <1503559702.10262.12.camel@graumannschaft.org>
References: <1503559702.10262.12.camel@graumannschaft.org>
Message-ID: <079ea766-e0bb-8d92-e297-def972560c70@braverock.com>

On 08/24/2017 02:28 AM, Johannes Graumann wrote:
> Hello,
> 
> I'm trying to submit a new version (0.10.2) of my package
> (multipanelfigure) to CRAN and have received the following email:
> 
>> Dear maintainer,
>>   
>> package multipanelfigure_0.10.2.tar.gz does not pass the incoming
>> checks automatically, please see the pre-test at:
>> <https://win-builder.r-project.org/incoming_pretest/170824_085724_mul
>> tipanelfigure_0102/00check.log>
>> Status: 2 NOTEs
>>   
>> Current CRAN status: ERROR: 1, OK: 10
>> See: <https://CRAN.R-project.org/web/checks/check_results_multipanelf
>> igure.html>
> 
> This is confusing. What's the deal breaker?
> The 2 Notes (which are timing issues related to drawing grid graphics)
> or
> the Error on x86_64-apple-darwin15.6.0 which is based on the fact that
> gridGraphics is unavailable for that platform and even more
> confungsingly seems to be based on the former version (0.9.0) of the
> package ...

The URL's you've referenced have both expired.

I would suggest re-running your package checks using R-devel on RHub and 
Winbuilder first, and copying any output you receive.

Then it will be easier for others to help you.

Regards,

Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From pedro.aphalo at helsinki.fi  Thu Aug 24 10:39:27 2017
From: pedro.aphalo at helsinki.fi (Pedro J. Aphalo)
Date: Thu, 24 Aug 2017 11:39:27 +0300
Subject: [R-pkg-devel] CRAN upload and prechecking confusion
In-Reply-To: <079ea766-e0bb-8d92-e297-def972560c70@braverock.com>
References: <1503559702.10262.12.camel@graumannschaft.org>
 <079ea766-e0bb-8d92-e297-def972560c70@braverock.com>
Message-ID: <24bdbbc7-2639-c36a-a594-3fc506b21085@helsinki.fi>

Hello,

The version currently in CRAN fails the check on for 
r-release-osx-x86_64 with ERROR.

https://cran.r-project.org/web/checks/check_results_multipanelfigure.html 
shows this.

In general maintainers are expected to solve ERRORs when submitting a 
new version. If this is impossible, then you should explain in the 
submission message why you cannot solve the problem that you are in 
principle required to solve according to the submission form you fill-in 
in CRAN.

As the cause the ERROR is that your package depends on a package that is 
unavailable under r-release-osx-x86_64, an explanation in the submission 
message should be enough, I think.

Regards,

Pedro.


On 2017-08-24 10:59, Brian G. Peterson wrote:
> On 08/24/2017 02:28 AM, Johannes Graumann wrote:
>> Hello,
>>
>> I'm trying to submit a new version (0.10.2) of my package
>> (multipanelfigure) to CRAN and have received the following email:
>>
>>> Dear maintainer,
>>> ? package multipanelfigure_0.10.2.tar.gz does not pass the incoming
>>> checks automatically, please see the pre-test at:
>>> <https://win-builder.r-project.org/incoming_pretest/170824_085724_mul
>>> tipanelfigure_0102/00check.log>
>>> Status: 2 NOTEs
>>> ? Current CRAN status: ERROR: 1, OK: 10
>>> See: <https://CRAN.R-project.org/web/checks/check_results_multipanelf
>>> igure.html>
>>
>> This is confusing. What's the deal breaker?
>> The 2 Notes (which are timing issues related to drawing grid graphics)
>> or
>> the Error on x86_64-apple-darwin15.6.0 which is based on the fact that
>> gridGraphics is unavailable for that platform and even more
>> confungsingly seems to be based on the former version (0.9.0) of the
>> package ...
>
> The URL's you've referenced have both expired.
>
> I would suggest re-running your package checks using R-devel on RHub 
> and Winbuilder first, and copying any output you receive.
>
> Then it will be easier for others to help you.
>
> Regards,
>
> Brian
>

-- 
------------------------------------------------------------------------
Pedro J. Aphalo
University Lecturer, Principal Investigator
(Office 4417, Biocenter 3, Viikinkaari 1)

Department of Biosciences
Plant Biology
P.O. Box 65
00014 University of Helsinki
Finland

e-mail: pedro.aphalo at helsinki.fi <mailto:pedro.aphalo at helsinki.fi>
Tel. (mobile) +358 50 4150623
Tel. (office) +358 2941 57897

------------------------------------------------------------------------
*Web sites and blogs*
Web site (research group): http://blogs.helsinki.fi/senpep-blog/
Web site (own teaching): http://www.helsinki.fi/people/pedro.aphalo/
Web site (using R in photobiology): http://www.r4photobiology.info/
------------------------------------------------------------------------
*Societies*
UV4Plants <http://www.uv4plants.org/> (communications officer), ESP 
<http://www.photobiology.eu/> (member) SEB <http://www.sebiology.org/> 
(member), BES <http://www.britishecologicalsociety.org/> (member), SPPS 
<http://www.spps.fi/> (member), SMS 
<http://www.metsatieteellinenseura.fi/english> (member), TUG 
<http://tug.org/> (member), FOAS <http://www.foastat.org/> (member).
------------------------------------------------------------------------

	[[alternative HTML version deleted]]


From nonsense at graumannschaft.org  Thu Aug 24 10:45:02 2017
From: nonsense at graumannschaft.org (Johannes Graumann)
Date: Thu, 24 Aug 2017 10:45:02 +0200
Subject: [R-pkg-devel] CRAN upload and prechecking confusion
In-Reply-To: <079ea766-e0bb-8d92-e297-def972560c70@braverock.com>
References: <1503559702.10262.12.camel@graumannschaft.org>
 <079ea766-e0bb-8d92-e297-def972560c70@braverock.com>
Message-ID: <1503564302.10262.18.camel@graumannschaft.org>

On Thu, 2017-08-24 at 02:59 -0500, Brian G. Peterson wrote:
> On 08/24/2017 02:28 AM, Johannes Graumann wrote:
> > Hello,
> > 
> > I'm trying to submit a new version (0.10.2) of my package
> > (multipanelfigure) to CRAN and have received the following email:
> > 
> > > Dear maintainer,
> > >   
> > > package multipanelfigure_0.10.2.tar.gz does not pass the incoming
> > > checks automatically, please see the pre-test at:
> > > <https://win-builder.r-project.org/incoming_pretest/170824_085724
> > > _mul
> > > tipanelfigure_0102/00check.log>
> > > Status: 2 NOTEs
> > >   
> > > Current CRAN status: ERROR: 1, OK: 10
> > > See: <https://CRAN.R-project.org/web/checks/check_results_multipa
> > > nelf
> > > igure.html>
> > 
> > This is confusing. What's the deal breaker?
> > The 2 Notes (which are timing issues related to drawing grid
> > graphics)
> > or
> > the Error on x86_64-apple-darwin15.6.0 which is based on the fact
> > that
> > gridGraphics is unavailable for that platform and even more
> > confungsingly seems to be based on the former version (0.9.0) of
> > the
> > package ...
> 
> The URL's you've referenced have both expired.
> 
> I would suggest re-running your package checks using R-devel on RHub
> and 
> Winbuilder first, and copying any output you receive.
> 
> Then it will be easier for others to help you.
Thank you for that hint. I run on https://builder.r-hub.io and as on my
own arch systems, there appears to be NO issue with the package using
debian:
2591#> About to run xvfb-run R CMD check multipanelfigure_0.10.2.tar.gz
2592#> * using log directory ?/home/docker/multipanelfigure.Rcheck?
2593#> * using R Under development (unstable) (2017-08-19 r73108)
2594#> * using platform: x86_64-pc-linux-gnu (64-bit)
2595#> * using session charset: UTF-8
2596#> * checking for file ?multipanelfigure/DESCRIPTION? ... OK
2597#> * checking extension type ... Package
2598#> * this is package ?multipanelfigure? version ?0.10.2?
2599#> * checking package namespace information ... OK
2600#> * checking package dependencies ... OK
2601#> * checking if this is a source package ... OK
2602#> * checking if there is a namespace ... OK
2603#> * checking for executable files ... OK
2604#> * checking for hidden files and directories ... OK
2605#> * checking for portable file names ... OK
2606#> * checking for sufficient/correct file permissions ... OK
2607#> * checking whether package ?multipanelfigure? can be installed
... OK
2608#> * checking installed package size ... OK
2609#> * checking package directory ... OK
2610#> * checking ?build? directory ... OK
2611#> * checking DESCRIPTION meta-information ... OK
2612#> * checking top-level files ... OK
2613#> * checking for left-over files ... OK
2614#> * checking index information ... OK
2615#> * checking package subdirectories ... OK
2616#> * checking R files for non-ASCII characters ... OK
2617#> * checking R files for syntax errors ... OK
2618#> * checking whether the package can be loaded ... OK
2619#> * checking whether the package can be loaded with stated
dependencies ... OK
2620#> * checking whether the package can be unloaded cleanly ... OK
2621#> * checking whether the namespace can be loaded with stated
dependencies ... OK
2622#> * checking whether the namespace can be unloaded cleanly ... OK
2623#> * checking loading without being on the library search path ...
OK
2624#> * checking dependencies in R code ... OK
2625#> * checking S3 generic/method consistency ... OK
2626#> * checking replacement functions ... OK
2627#> * checking foreign function calls ... OK
2628#> * checking R code for possible problems ... OK
2629#> * checking Rd files ... OK
2630#> * checking Rd metadata ... OK
2631#> * checking Rd cross-references ... OK
2632#> * checking for missing documentation entries ... OK
2633#> * checking for code/documentation mismatches ... OK
2634#> * checking Rd \usage sections ... OK
2635#> * checking Rd contents ... OK
2636#> * checking for unstated dependencies in examples ... OK
2637#> * checking contents of ?data? directory ... OK
2638#> * checking data for non-ASCII characters ... OK
2639#> * checking data for ASCII and uncompressed saves ... OK
2640#> * checking installed files from ?inst/doc? ... OK
2641#> * checking files in ?vignettes? ... OK
2642#> * checking examples ... OK
2643#> * checking for unstated dependencies in vignettes ... OK
2644#> * checking package vignettes in ?inst/doc? ... OK
2645#> * checking running R code from vignettes ...
2646#> ?panel-positioning.Rmd? ... OK
2647#> ?scaling-clipping-images.Rmd? ... OK
2648#> NONE
2649#> * checking re-building of vignette outputs ... OK
2650#> * checking PDF version of manual ... OK
2651#> * DONE
2652#> Status: OK

Am rerunning on windows now ...

Sincerely, Joh


From rubak at math.aau.dk  Thu Aug 24 11:02:28 2017
From: rubak at math.aau.dk (Ege Rubak)
Date: Thu, 24 Aug 2017 11:02:28 +0200
Subject: [R-pkg-devel] CRAN upload and prechecking confusion
In-Reply-To: <24bdbbc7-2639-c36a-a594-3fc506b21085@helsinki.fi>
References: <1503559702.10262.12.camel@graumannschaft.org>
 <079ea766-e0bb-8d92-e297-def972560c70@braverock.com>
 <24bdbbc7-2639-c36a-a594-3fc506b21085@helsinki.fi>
Message-ID: <311cb4eb-28fa-5450-cd51-d89037e0ad5c@math.aau.dk>

Hello,

Maybe you could start by writing a polite email to Paul Murrell (the 
maintainer of `gridGraphics` according to 
https://cran.r-project.org/package=gridGraphics) and ask if he is aware 
that his package fails on OSX on CRAN.

If you are lucky he might be able to quickly fix the issue and send a 
new version to CRAN.

Regards,
Ege

On 08/24/2017 10:39 AM, Pedro J. Aphalo wrote:
> Hello,
> 
> The version currently in CRAN fails the check on for
> r-release-osx-x86_64 with ERROR.
> 
> https://cran.r-project.org/web/checks/check_results_multipanelfigure.html
> shows this.
> 
> In general maintainers are expected to solve ERRORs when submitting a
> new version. If this is impossible, then you should explain in the
> submission message why you cannot solve the problem that you are in
> principle required to solve according to the submission form you fill-in
> in CRAN.
> 
> As the cause the ERROR is that your package depends on a package that is
> unavailable under r-release-osx-x86_64, an explanation in the submission
> message should be enough, I think.
> 
> Regards,
> 
> Pedro.
> 
> 
> On 2017-08-24 10:59, Brian G. Peterson wrote:
>> On 08/24/2017 02:28 AM, Johannes Graumann wrote:
>>> Hello,
>>>
>>> I'm trying to submit a new version (0.10.2) of my package
>>> (multipanelfigure) to CRAN and have received the following email:
>>>
>>>> Dear maintainer,
>>>>    package multipanelfigure_0.10.2.tar.gz does not pass the incoming
>>>> checks automatically, please see the pre-test at:
>>>> <https://win-builder.r-project.org/incoming_pretest/170824_085724_mul
>>>> tipanelfigure_0102/00check.log>
>>>> Status: 2 NOTEs
>>>>    Current CRAN status: ERROR: 1, OK: 10
>>>> See: <https://CRAN.R-project.org/web/checks/check_results_multipanelf
>>>> igure.html>
>>>
>>> This is confusing. What's the deal breaker?
>>> The 2 Notes (which are timing issues related to drawing grid graphics)
>>> or
>>> the Error on x86_64-apple-darwin15.6.0 which is based on the fact that
>>> gridGraphics is unavailable for that platform and even more
>>> confungsingly seems to be based on the former version (0.9.0) of the
>>> package ...
>>
>> The URL's you've referenced have both expired.
>>
>> I would suggest re-running your package checks using R-devel on RHub
>> and Winbuilder first, and copying any output you receive.
>>
>> Then it will be easier for others to help you.
>>
>> Regards,
>>
>> Brian
>>
>


From nonsense at graumannschaft.org  Thu Aug 24 13:43:39 2017
From: nonsense at graumannschaft.org (Johannes Graumann)
Date: Thu, 24 Aug 2017 13:43:39 +0200
Subject: [R-pkg-devel] CRAN upload and prechecking confusion
In-Reply-To: <079ea766-e0bb-8d92-e297-def972560c70@braverock.com>
References: <1503559702.10262.12.camel@graumannschaft.org>
 <079ea766-e0bb-8d92-e297-def972560c70@braverock.com>
Message-ID: <1503575019.10262.37.camel@graumannschaft.org>

On Thu, 2017-08-24 at 02:59 -0500, Brian G. Peterson wrote:
> On 08/24/2017 02:28 AM, Johannes Graumann wrote:
> > Hello,
> > 
> > I'm trying to submit a new version (0.10.2) of my package
> > (multipanelfigure) to CRAN and have received the following email:
> > 
> > > Dear maintainer,
> > >   
> > > package multipanelfigure_0.10.2.tar.gz does not pass the incoming
> > > checks automatically, please see the pre-test at:
> > > <https://win-builder.r-project.org/incoming_pretest/170824_085724
> > > _mul
> > > tipanelfigure_0102/00check.log>
> > > Status: 2 NOTEs
> > >   
> > > Current CRAN status: ERROR: 1, OK: 10
> > > See: <https://CRAN.R-project.org/web/checks/check_results_multipa
> > > nelf
> > > igure.html>
> > 
> > This is confusing. What's the deal breaker?
> > The 2 Notes (which are timing issues related to drawing grid
> > graphics)
> > or
> > the Error on x86_64-apple-darwin15.6.0 which is based on the fact
> > that
> > gridGraphics is unavailable for that platform and even more
> > confungsingly seems to be based on the former version (0.9.0) of
> > the
> > package ...
> 
> The URL's you've referenced have both expired.
> 
> I would suggest re-running your package checks using R-devel on RHub
> and 
> Winbuilder first, and copying any output you receive.
> 
> Then it will be easier for others to help you.
Have a look hier:
https://builder.r-hub.io/status/multipanelfigure_0.10.2.tar.gz-7184a1dc
6654eaea5463f8cc9cac3f73
https://builder.r-hub.io/status/multipanelfigure_0.10.2.tar.gz-033531ed
74ed5a90ce66bac077293e3c
https://builder.r-hub.io/status/multipanelfigure_0.10.2.tar.gz-1c5377c9
369c4936e0c5e1a81c863275

Linux & windows work. OSX fails because gridGraphics (currently) does
not exist for the platform.

In the meantime CRAN (Uwe Ligges) got back telling me the problem is
long timing in an example ... this is based on grid speed and as the
package heavily uses that I feel uncomfortable moving the example to
'dontrun' ... thoughts.

Sincerely, Joh


From charlie at stat.umn.edu  Fri Aug 25 14:58:51 2017
From: charlie at stat.umn.edu (Charles Geyer)
Date: Fri, 25 Aug 2017 07:58:51 -0500
Subject: [R-pkg-devel] CRAN upload and prechecking confusion (Johannes
	Graumann)
Message-ID: <CAKctRd2gVRoM3VDXsjG9WSEkaPfZZHG1HvQekk9TDxE2LRRgjQ@mail.gmail.com>

You can precompute long running things in vignettes.  See CRAN package
mcmc for examples that do this reproducibly.

-- 
Charles Geyer
Professor, School of Statistics
Resident Fellow, Minnesota Center for Philosophy of Science
University of Minnesota
charlie at stat.umn.edu


From blerner at mtholyoke.edu  Fri Aug 25 17:42:37 2017
From: blerner at mtholyoke.edu (Barbara Lerner)
Date: Fri, 25 Aug 2017 11:42:37 -0400
Subject: [R-pkg-devel] Saving provenance data to the file system
Message-ID: <59A0456D.4050006@mtholyoke.edu>

We are working on a package that collects provenance as an R script 
executes, saving the provenance to the file system.  In reading the 
rules for submitting packages to CRAN, there is this rule:
> Packages should not write in the users? home filespace, nor anywhere 
> else on the file system apart from the R session?s temporary directory 
> (or during installation in the location pointed to by |TMPDIR|: and 
> such usage should be cleaned up). Installing into the system?s R 
> installation (e.g., scripts to its bin directory) is not allowed. 
> Limited exceptions may be allowed in interactive sessions if the 
> package obtains confirmation from the user. 
To use our package, the R programmer calls a function that has an 
optional parameter to specify where the provenance is saved.  I have a 
few questions about whether this approach will pass CRAN or some other 
alternatives we have considered.

1. Currently, we save to the user's file space and provide an optional 
parameter to save the provenance somewhere else.  Is this acceptable?

2. A second alternative would be to have the default location be the R 
session's temporary directory.  To save in the user's file space, the 
user would need to provide a value for the optional parameter mention in 
#1.

3. A third alternative would be to do the same as #2 and also ask the 
user to confirm that they want to save the provenance before actually 
writing to the filesystem.

4. A fourth alternative would be to save the provenance in a database, 
which might or might not be on the user's computer.

I would appreciate advice on which of these options is likely to pass 
CRAN's rules.  Our package will be of little use if the provenance is 
not saved somewhere.

Thanks for any advice.

Barbara

-- 
<http://www.getpostbox.com>Barbara Lerner
Associate Professor
Computer Science Department
Mount Holyoke College

<http://www.getpostbox.com><http://www.getpostbox.com>

	[[alternative HTML version deleted]]


From jenny at stat.ubc.ca  Fri Aug 25 21:11:31 2017
From: jenny at stat.ubc.ca (Jenny Bryan)
Date: Fri, 25 Aug 2017 12:11:31 -0700
Subject: [R-pkg-devel] Saving provenance data to the file system
In-Reply-To: <59A0456D.4050006@mtholyoke.edu>
References: <59A0456D.4050006@mtholyoke.edu>
Message-ID: <803B2327-3BBC-4371-8B76-556A5C647292@stat.ubc.ca>

I can't comment on the specific intersection of your plans and CRAN's rules, but
note that you might want to check out the rappdirs package (already on CRAN
and imported by some other packages) as a possible helper for whatever you
decide to do.

https://cran.r-project.org/package=rappdirs

-- Jenny

> On Aug 25, 2017, at 8:42 AM, Barbara Lerner <blerner at mtholyoke.edu> wrote:
> 
> We are working on a package that collects provenance as an R script 
> executes, saving the provenance to the file system.  In reading the 
> rules for submitting packages to CRAN, there is this rule:
>> Packages should not write in the users? home filespace, nor anywhere 
>> else on the file system apart from the R session?s temporary directory 
>> (or during installation in the location pointed to by |TMPDIR|: and 
>> such usage should be cleaned up). Installing into the system?s R 
>> installation (e.g., scripts to its bin directory) is not allowed. 
>> Limited exceptions may be allowed in interactive sessions if the 
>> package obtains confirmation from the user. 
> To use our package, the R programmer calls a function that has an 
> optional parameter to specify where the provenance is saved.  I have a 
> few questions about whether this approach will pass CRAN or some other 
> alternatives we have considered.
> 
> 1. Currently, we save to the user's file space and provide an optional 
> parameter to save the provenance somewhere else.  Is this acceptable?
> 
> 2. A second alternative would be to have the default location be the R 
> session's temporary directory.  To save in the user's file space, the 
> user would need to provide a value for the optional parameter mention in 
> #1.
> 
> 3. A third alternative would be to do the same as #2 and also ask the 
> user to confirm that they want to save the provenance before actually 
> writing to the filesystem.
> 
> 4. A fourth alternative would be to save the provenance in a database, 
> which might or might not be on the user's computer.
> 
> I would appreciate advice on which of these options is likely to pass 
> CRAN's rules.  Our package will be of little use if the provenance is 
> not saved somewhere.
> 
> Thanks for any advice.
> 
> Barbara
> 
> -- 
> <http://www.getpostbox.com>Barbara Lerner
> Associate Professor
> Computer Science Department
> Mount Holyoke College
> 
> <http://www.getpostbox.com><http://www.getpostbox.com>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From Dan.Kelley at Dal.Ca  Fri Aug 25 23:39:50 2017
From: Dan.Kelley at Dal.Ca (Daniel Kelley)
Date: Fri, 25 Aug 2017 21:39:50 +0000
Subject: [R-pkg-devel] "no prebuilt vignette index" error
Message-ID: <0BB734A2-FD5C-41F0-B9AF-E2497C79FB19@dal.ca>

QUESTION:

I wonder how to address the error that I?ve quoted in the subject line?


DETAILS:

I am using R 3.4.1 to build the ?oce? package, which helps with the analysis of oceanographic data.  It?s several years old.

Lately, when I submit the ?oce? package to winbuilder using

	devtools:build_win(version=?R-devel")

the message

	Package has a VignetteBuilder field but no prebuilt vignette index.

is issued. I do not get this message with

	devtools::build_win(version="R-release")

Using

	rhub::check_for_cran()

I find that message for some machines, but not all of them.

My DESCRIPTION (https://github.com/dankelley/oce/blob/develop/DESCRIPTION) has

	VignetteBuilder: knitr

and also

	Suggests: knitr, rmarkdown

(amongst other suggestions).  The file (https://raw.githubusercontent.com/dankelley/oce/develop/vignettes/oce.Rmd)

	vignettes/oce.Rnw

has YAML

	---
	title: "Oce"
	author: "Dan Kelley and Clark Richards"
	date: "`r Sys.Date()`"
	output:
	  rmarkdown::html_vignette:
	    fig_caption: yes
	vignette: >
	  %\VignetteIndexEntry{Oce}
	  %\VignetteEngine{knitr::rmarkdown}
	  \usepackage[utf8]{inputenc}
	?

and in this YAML sequence, I?ve also tried replacing the second-last line with

	%\VignetteEncoding{UTF-8}

I downloaded R 3.4.1 and see at lie 6703 of

	src/library/tools/R/QC.R

that R wants to find a file named

	build/vignette.rds

and (sure enough) that file is not in the tarball that is created with

	R CMD BUILD oce

at the commandline, or with

	devtools::build()

from within Rstudio.  As an aside, the latter issues a warning 

	Warning in tools:::.build_packages() :
	  invalid value for '--compact-vignettes', assuming ?qpdf"

I?m not sure how to proceed to solve the problem I state in the second sentence of this email. And I?m not even positive that it *is* a problem, since it does not occur on all test systems.

Does anyone have any advice for further tests?

I?m sorry this email is very long ? I tried to be quite clear.



SIGNATURE:


Dan E. Kelley, Professor
Oceanography Department, Dalhousie University
PO BOX 15000
Halifax, NS, Canada
B3H 4R2
Dan.Kelley at Dal.CA









From berryboessenkool at hotmail.com  Sat Aug 26 14:11:35 2017
From: berryboessenkool at hotmail.com (Berry Boessenkool)
Date: Sat, 26 Aug 2017 12:11:35 +0000
Subject: [R-pkg-devel] "no prebuilt vignette index" error
In-Reply-To: <0BB734A2-FD5C-41F0-B9AF-E2497C79FB19@dal.ca>
References: <0BB734A2-FD5C-41F0-B9AF-E2497C79FB19@dal.ca>
Message-ID: <DB5PR0401MB17819620ED82A6A983377682D5980@DB5PR0401MB1781.eurprd04.prod.outlook.com>


On my windows machine, I once installed qpdf to get things done, but I'm not sure if that applies here.

https://sourceforge.net/projects/qpdf/


Linking to source code is also possible online, by the way:

https://github.com/wch/r-source/blob/trunk/src/library/tools/R/QC.R#L6713

I use a little package to find such URLs from within R:

https://github.com/brry/rskey#funsource

Kind regards,
Berry


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Daniel Kelley <Dan.Kelley at Dal.Ca>
Sent: Friday, August 25, 2017 23:39
To: R-package-devel at r-project.org
Cc: Daniel Kelley
Subject: [R-pkg-devel] "no prebuilt vignette index" error

QUESTION:

I wonder how to address the error that I?ve quoted in the subject line?


DETAILS:

I am using R 3.4.1 to build the ?oce? package, which helps with the analysis of oceanographic data.  It?s several years old.

Lately, when I submit the ?oce? package to winbuilder using

        devtools:build_win(version=?R-devel")

the message

        Package has a VignetteBuilder field but no prebuilt vignette index.

is issued. I do not get this message with

        devtools::build_win(version="R-release")

Using

        rhub::check_for_cran()

I find that message for some machines, but not all of them.

My DESCRIPTION (https://github.com/dankelley/oce/blob/develop/DESCRIPTION) has

        VignetteBuilder: knitr

and also

        Suggests: knitr, rmarkdown

(amongst other suggestions).  The file (https://raw.githubusercontent.com/dankelley/oce/develop/vignettes/oce.Rmd)

        vignettes/oce.Rnw

has YAML

        ---
        title: "Oce"
        author: "Dan Kelley and Clark Richards"
        date: "`r Sys.Date()`"
        output:
          rmarkdown::html_vignette:
            fig_caption: yes
        vignette: >
          %\VignetteIndexEntry{Oce}
          %\VignetteEngine{knitr::rmarkdown}
          \usepackage[utf8]{inputenc}
        ?

and in this YAML sequence, I?ve also tried replacing the second-last line with

        %\VignetteEncoding{UTF-8}

I downloaded R 3.4.1 and see at lie 6703 of

        src/library/tools/R/QC.R

that R wants to find a file named

        build/vignette.rds

and (sure enough) that file is not in the tarball that is created with

        R CMD BUILD oce

at the commandline, or with

        devtools::build()

from within Rstudio.  As an aside, the latter issues a warning

        Warning in tools:::.build_packages() :
          invalid value for '--compact-vignettes', assuming ?qpdf"

I?m not sure how to proceed to solve the problem I state in the second sentence of this email. And I?m not even positive that it *is* a problem, since it does not occur on all test systems.

Does anyone have any advice for further tests?

I?m sorry this email is very long ? I tried to be quite clear.



SIGNATURE:


Dan E. Kelley, Professor
Oceanography Department, Dalhousie University
PO BOX 15000
Halifax, NS, Canada
B3H 4R2
Dan.Kelley at Dal.CA








______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From Dan.Kelley at Dal.Ca  Sat Aug 26 14:27:25 2017
From: Dan.Kelley at Dal.Ca (Daniel Kelley)
Date: Sat, 26 Aug 2017 12:27:25 +0000
Subject: [R-pkg-devel] "no prebuilt vignette index" error
In-Reply-To: <DB5PR0401MB17819620ED82A6A983377682D5980@DB5PR0401MB1781.eurprd04.prod.outlook.com>
References: <0BB734A2-FD5C-41F0-B9AF-E2497C79FB19@dal.ca>
 <DB5PR0401MB17819620ED82A6A983377682D5980@DB5PR0401MB1781.eurprd04.prod.outlook.com>
Message-ID: <52F9C686-EE6B-4B98-AD24-D9DF672C3A98@dal.ca>

Thanks, Berry.  It turns out that the problem was an inclusion of

^build$

in my .Rbuildignore file.

Best regards, Dan.


Dan E. Kelley, Professor
Oceanography Department, Dalhousie University
Halifax, NS, Canada


From alku at dtu.dk  Sat Aug 26 22:42:17 2017
From: alku at dtu.dk (Alexandra Kuznetsova)
Date: Sat, 26 Aug 2017 20:42:17 +0000
Subject: [R-pkg-devel] R CMD check errors in Win-Builder
In-Reply-To: <0566E17B6DEC62459078112371B7508E0C40D9DC@ait-pex02mbx05.win.dtu.dk>
References: <0566E17B6DEC62459078112371B7508E0C40D9DC@ait-pex02mbx05.win.dtu.dk>
Message-ID: <0566E17B6DEC62459078112371B7508E0C40D9FD@ait-pex02mbx05.win.dtu.dk>

Dear R-package-devel community,

We are trying to submit our R package lmerTest to CRAN. The Win-Builder gives some errors https://win-builder.r-project.org/wcXr7vXdiRMf/    , that we cannot reproduce (by using the same system and the same R devel version ).

 I  am kindly asking for some hints, how to resolve the problem. Is there a way to know which versions of the packages are used when used in  WinBuilder check (or CRAN check)?

With best,
Alexandra



	[[alternative HTML version deleted]]


From edd at debian.org  Sun Aug 27 00:31:53 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 26 Aug 2017 17:31:53 -0500
Subject: [R-pkg-devel] R CMD check errors in Win-Builder
In-Reply-To: <0566E17B6DEC62459078112371B7508E0C40D9FD@ait-pex02mbx05.win.dtu.dk>
References: <0566E17B6DEC62459078112371B7508E0C40D9DC@ait-pex02mbx05.win.dtu.dk>
 <0566E17B6DEC62459078112371B7508E0C40D9FD@ait-pex02mbx05.win.dtu.dk>
Message-ID: <22945.63193.101177.374751@bud.eddelbuettel.com>


On 26 August 2017 at 20:42, Alexandra Kuznetsova wrote:
| Dear R-package-devel community,
| 
| We are trying to submit our R package lmerTest to CRAN. The Win-Builder gives some errors https://win-builder.r-project.org/wcXr7vXdiRMf/    , that we cannot reproduce (by using the same system and the same R devel version ).

That link is stale now.
 
|  I  am kindly asking for some hints, how to resolve the problem. Is there a way to know which versions of the packages are used when used in  WinBuilder check (or CRAN check)?

AFAIK almost always "the current CRAN version".

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch.duncan at gmail.com  Sun Aug 27 00:32:58 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 26 Aug 2017 18:32:58 -0400
Subject: [R-pkg-devel] R CMD check errors in Win-Builder
In-Reply-To: <0566E17B6DEC62459078112371B7508E0C40D9FD@ait-pex02mbx05.win.dtu.dk>
References: <0566E17B6DEC62459078112371B7508E0C40D9DC@ait-pex02mbx05.win.dtu.dk>
 <0566E17B6DEC62459078112371B7508E0C40D9FD@ait-pex02mbx05.win.dtu.dk>
Message-ID: <15398bcc-7679-c83d-c86b-48e3308dd399@gmail.com>

On 26/08/2017 4:42 PM, Alexandra Kuznetsova wrote:
> Dear R-package-devel community,
> 
> We are trying to submit our R package lmerTest to CRAN. The Win-Builder gives some errors https://win-builder.r-project.org/wcXr7vXdiRMf/    , that we cannot reproduce (by using the same system and the same R devel version ).

I get a 404 error on that URL.  Perhaps it has expired?

>   I  am kindly asking for some hints, how to resolve the problem. Is there a way to know which versions of the packages are used when used in  WinBuilder check (or CRAN check)?

I believe it uses the latest versions of all packages.  So run 
update.packages(type = "source") and you should get the same versions.

Duncan Murdoch


From lesshaste at gmail.com  Mon Aug 28 11:21:45 2017
From: lesshaste at gmail.com (Peter Clifford [peter.clifford@stats.ox.ac.uk] )
Date: Mon, 28 Aug 2017 10:21:45 +0100
Subject: [R-pkg-devel] Rcpp.package.skeleton -- Rcmd check --as-cran Windows
Message-ID: <CAOJokxOmgwGt7bQbEo6vdR8KC=xsE4O5j4t3khBVtqk7myfUpw@mail.gmail.com>

R version 3.4.0 and 3.4.1 with Rcpp 0.12.12 Windows 7.

Trying to fix persistent "Found no calls to: 'R_registerRoutines',
'R_useDynamicSymbols'" problem, when running Rcmd check --as-cran.

Eventually gave up with my own package and tried the simplest possible case
using Rcpp.package.skeleton("test") with defaults, i.e. the hello_world
example.
That works fine with Rcmd build test and Rcmd check test_1.0.tar.gz, but if
I try Rcmd check --as-cran test_1.0.tar.gz I get the NOTE:

File 'test/libs/x64/test.dll':
  Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'

It is good practice to register native routines and to disable symbol
search.

I don't whether there really is a registration problem and if there is, how
to fix it.

I'd be grateful for suggestions. Thanks.

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Mon Aug 28 17:50:52 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Mon, 28 Aug 2017 17:50:52 +0200
Subject: [R-pkg-devel] Saving provenance data to the file system
In-Reply-To: <803B2327-3BBC-4371-8B76-556A5C647292@stat.ubc.ca>
References: <59A0456D.4050006@mtholyoke.edu>
 <803B2327-3BBC-4371-8B76-556A5C647292@stat.ubc.ca>
Message-ID: <860f5699-cd84-ad15-4827-b4af4c479ea7@statistik.tu-dortmund.de>

Can't you do it as, e.g. write.table() writes files: Simply require a 
filename from the user, then you are on the save side. And in your 
examples / tests, write to some tempfile().

Best,
Uwe Ligges



On 25.08.2017 21:11, Jenny Bryan wrote:
> I can't comment on the specific intersection of your plans and CRAN's rules, but
> note that you might want to check out the rappdirs package (already on CRAN
> and imported by some other packages) as a possible helper for whatever you
> decide to do.
> 
> https://cran.r-project.org/package=rappdirs
> 
> -- Jenny
> 
>> On Aug 25, 2017, at 8:42 AM, Barbara Lerner <blerner at mtholyoke.edu> wrote:
>>
>> We are working on a package that collects provenance as an R script
>> executes, saving the provenance to the file system.  In reading the
>> rules for submitting packages to CRAN, there is this rule:
>>> Packages should not write in the users? home filespace, nor anywhere
>>> else on the file system apart from the R session?s temporary directory
>>> (or during installation in the location pointed to by |TMPDIR|: and
>>> such usage should be cleaned up). Installing into the system?s R
>>> installation (e.g., scripts to its bin directory) is not allowed.
>>> Limited exceptions may be allowed in interactive sessions if the
>>> package obtains confirmation from the user.
>> To use our package, the R programmer calls a function that has an
>> optional parameter to specify where the provenance is saved.  I have a
>> few questions about whether this approach will pass CRAN or some other
>> alternatives we have considered.
>>
>> 1. Currently, we save to the user's file space and provide an optional
>> parameter to save the provenance somewhere else.  Is this acceptable?
>>
>> 2. A second alternative would be to have the default location be the R
>> session's temporary directory.  To save in the user's file space, the
>> user would need to provide a value for the optional parameter mention in
>> #1.
>>
>> 3. A third alternative would be to do the same as #2 and also ask the
>> user to confirm that they want to save the provenance before actually
>> writing to the filesystem.
>>
>> 4. A fourth alternative would be to save the provenance in a database,
>> which might or might not be on the user's computer.
>>
>> I would appreciate advice on which of these options is likely to pass
>> CRAN's rules.  Our package will be of little use if the provenance is
>> not saved somewhere.
>>
>> Thanks for any advice.
>>
>> Barbara
>>
>> -- 
>> <http://www.getpostbox.com>Barbara Lerner
>> Associate Professor
>> Computer Science Department
>> Mount Holyoke College
>>
>> <http://www.getpostbox.com><http://www.getpostbox.com>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From edd at debian.org  Mon Aug 28 17:53:48 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Mon, 28 Aug 2017 10:53:48 -0500
Subject: [R-pkg-devel] Rcpp.package.skeleton -- Rcmd check --as-cran
	Windows
In-Reply-To: <CAOJokxOmgwGt7bQbEo6vdR8KC=xsE4O5j4t3khBVtqk7myfUpw@mail.gmail.com>
References: <CAOJokxOmgwGt7bQbEo6vdR8KC=xsE4O5j4t3khBVtqk7myfUpw@mail.gmail.com>
Message-ID: <22948.15500.594094.838981@bud.eddelbuettel.com>


On 28 August 2017 at 10:21, Peter Clifford [peter.clifford at stats.ox.ac.uk]  wrote:
| R version 3.4.0 and 3.4.1 with Rcpp 0.12.12 Windows 7.

Potentially wrong list here as it is an Rcpp question...
 
| Trying to fix persistent "Found no calls to: 'R_registerRoutines',
| 'R_useDynamicSymbols'" problem, when running Rcmd check --as-cran.
| 
| Eventually gave up with my own package and tried the simplest possible case
| using Rcpp.package.skeleton("test") with defaults, i.e. the hello_world
| example.
| That works fine with Rcmd build test and Rcmd check test_1.0.tar.gz, but if
| I try Rcmd check --as-cran test_1.0.tar.gz I get the NOTE:
| 
| File 'test/libs/x64/test.dll':
|   Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
| 
| It is good practice to register native routines and to disable symbol
| search.
| 
| I don't whether there really is a registration problem and if there is, how
| to fix it.
| 
| I'd be grateful for suggestions. Thanks.

I cannot reproduce this.  Full log below -- new package, and running
compileAttributes() creates the registration as it should.

(For all the R Core members in the audience: We still need pre-build /
post-build hooks like cleanup to have R CMD foo do more things. Happy to work
on that if somewhat can work with me to shepherd this in ...)

Dirk


edd at bud:/tmp$ r -e 'Rcpp::Rcpp.package.skeleton("barePackage")'
Creating directories ...
Creating DESCRIPTION ...
Creating NAMESPACE ...
Creating Read-and-delete-me ...
Saving functions and data ...
Making help files ...
Done.
Further steps are described in './barePackage/Read-and-delete-me'.

Adding Rcpp settings
 >> added Imports: Rcpp
 >> added LinkingTo: Rcpp
 >> added useDynLib directive to NAMESPACE
 >> added importFrom(Rcpp, evalCpp) directive to NAMESPACE
 >> added example src file using Rcpp attributes
 >> added Rd file for rcpp_hello_world
 >> compiled Rcpp attributes 
edd at bud:/tmp$ 
edd at bud:/tmp$ build.r barePackagePlus/    # simple littler wrapper
* checking for file ?barePackagePlus/DESCRIPTION? ... OK
* preparing ?barePackagePlus?:
* checking DESCRIPTION meta-information ... OK
* cleaning src
* installing the package to process help pages
* saving partial Rd database
* cleaning src
* checking for LF line-endings in source and make files
* checking for empty or unneeded directories
* building ?barePackagePlus_1.0.tar.gz?

edd at bud:/tmp$ 
edd at bud:/tmp$ RD CMD check --as-cran barePackage_1.0.tar.gz 
* using log directory ?/tmp/barePackage.Rcheck?
* using R Under development (unstable) (2017-08-24 r73125)
* using platform: x86_64-pc-linux-gnu (64-bit)
* using session charset: UTF-8
* using option ?--as-cran?
* checking for file ?barePackage/DESCRIPTION? ... OK
* checking extension type ... Package
* this is package ?barePackage? version ?1.0?
* checking CRAN incoming feasibility ... NOTE
Maintainer: ?Your Name <your at email.com>?

New submission
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking whether package ?barePackage? can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ... OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking loading without being on the library search path ... OK
* checking use of S3 registration ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd line widths ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking line endings in C/C++/Fortran sources/headers ... OK
* checking compiled code ... OK
* checking examples ... OK
* checking PDF version of manual ... OK
* DONE

Status: 1 NOTE
See
  ?/tmp/barePackage.Rcheck/00check.log?
for details.


edd at bud:/tmp$ 




-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From peter.clifford at stats.ox.ac.uk  Mon Aug 28 18:10:24 2017
From: peter.clifford at stats.ox.ac.uk (Peter Clifford [peter.clifford@stats.ox.ac.uk] )
Date: Mon, 28 Aug 2017 17:10:24 +0100
Subject: [R-pkg-devel] Rcpp.package.skeleton -- Rcmd check --as-cran
	Windows
In-Reply-To: <22948.15500.594094.838981@bud.eddelbuettel.com>
References: <CAOJokxOmgwGt7bQbEo6vdR8KC=xsE4O5j4t3khBVtqk7myfUpw@mail.gmail.com>
 <22948.15500.594094.838981@bud.eddelbuettel.com>
Message-ID: <CAOJokxN+80zBDA3FpiN31w7zeO6ThJ_zFpwKec=eanRURid-Zw@mail.gmail.com>

On Mon, Aug 28, 2017 at 4:53 PM, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 28 August 2017 at 10:21, Peter Clifford [peter.clifford at stats.ox.ac.uk]
> wrote:
> | R version 3.4.0 and 3.4.1 with Rcpp 0.12.12 Windows 7.
>
> Potentially wrong list here as it is an Rcpp question...
>
> | Trying to fix persistent "Found no calls to: 'R_registerRoutines',
> | 'R_useDynamicSymbols'" problem, when running Rcmd check --as-cran.
> |
> | Eventually gave up with my own package and tried the simplest possible
> case
> | using Rcpp.package.skeleton("test") with defaults, i.e. the hello_world
> | example.
> | That works fine with Rcmd build test and Rcmd check test_1.0.tar.gz, but
> if
> | I try Rcmd check --as-cran test_1.0.tar.gz I get the NOTE:
> |
> | File 'test/libs/x64/test.dll':
> |   Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
> |
> | It is good practice to register native routines and to disable symbol
> | search.
> |
> | I don't whether there really is a registration problem and if there is,
> how
> | to fix it.
> |
> | I'd be grateful for suggestions. Thanks.
>
> I cannot reproduce this.  Full log below -- new package, and running
> compileAttributes() creates the registration as it should.
>
> (For all the R Core members in the audience: We still need pre-build /
> post-build hooks like cleanup to have R CMD foo do more things. Happy to
> work
> on that if somewhat can work with me to shepherd this in ...)
>
> Dirk
>
>
> edd at bud:/tmp$ r -e 'Rcpp::Rcpp.package.skeleton("barePackage")'
> Creating directories ...
> Creating DESCRIPTION ...
> Creating NAMESPACE ...
> Creating Read-and-delete-me ...
> Saving functions and data ...
> Making help files ...
> Done.
> Further steps are described in './barePackage/Read-and-delete-me'.
>
> Adding Rcpp settings
>  >> added Imports: Rcpp
>  >> added LinkingTo: Rcpp
>  >> added useDynLib directive to NAMESPACE
>  >> added importFrom(Rcpp, evalCpp) directive to NAMESPACE
>  >> added example src file using Rcpp attributes
>  >> added Rd file for rcpp_hello_world
>  >> compiled Rcpp attributes
> edd at bud:/tmp$
> edd at bud:/tmp$ build.r barePackagePlus/    # simple littler wrapper
> * checking for file ?barePackagePlus/DESCRIPTION? ... OK
> * preparing ?barePackagePlus?:
> * checking DESCRIPTION meta-information ... OK
> * cleaning src
> * installing the package to process help pages
> * saving partial Rd database
> * cleaning src
> * checking for LF line-endings in source and make files
> * checking for empty or unneeded directories
> * building ?barePackagePlus_1.0.tar.gz?
>
> edd at bud:/tmp$
> edd at bud:/tmp$ RD CMD check --as-cran barePackage_1.0.tar.gz
> * using log directory ?/tmp/barePackage.Rcheck?
> * using R Under development (unstable) (2017-08-24 r73125)
> * using platform: x86_64-pc-linux-gnu (64-bit)
> * using session charset: UTF-8
> * using option ?--as-cran?
> * checking for file ?barePackage/DESCRIPTION? ... OK
> * checking extension type ... Package
> * this is package ?barePackage? version ?1.0?
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?Your Name <your at email.com>?
>
> New submission
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking whether package ?barePackage? can be installed ... OK
> * checking installed package size ... OK
> * checking package directory ... OK
> * checking DESCRIPTION meta-information ... OK
> * checking top-level files ... OK
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * checking whether the package can be loaded ... OK
> * checking whether the package can be loaded with stated dependencies ...
> OK
> * checking whether the package can be unloaded cleanly ... OK
> * checking whether the namespace can be loaded with stated dependencies
> ... OK
> * checking whether the namespace can be unloaded cleanly ... OK
> * checking loading without being on the library search path ... OK
> * checking use of S3 registration ... OK
> * checking dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... OK
> * checking Rd files ... OK
> * checking Rd metadata ... OK
> * checking Rd line widths ... OK
> * checking Rd cross-references ... OK
> * checking for missing documentation entries ... OK
> * checking for code/documentation mismatches ... OK
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking line endings in C/C++/Fortran sources/headers ... OK
> * checking compiled code ... OK
> * checking examples ... OK
> * checking PDF version of manual ... OK
> * DONE
>
> Status: 1 NOTE
> See
>   ?/tmp/barePackage.Rcheck/00check.log?
> for details.
>
>
> edd at bud:/tmp$
>
>
>
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


Apologies Dirk, I should have emphasized that this is on Windows 7.  I
tried it on a Linux box later with no problem. I sent it to this list
because I thought it might be a general problem for package development in
Windows.

Thanks

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Mon Aug 28 20:48:34 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Mon, 28 Aug 2017 20:48:34 +0200
Subject: [R-pkg-devel] Rcpp.package.skeleton -- Rcmd check --as-cran
 Windows
In-Reply-To: <CAOJokxN+80zBDA3FpiN31w7zeO6ThJ_zFpwKec=eanRURid-Zw@mail.gmail.com>
References: <CAOJokxOmgwGt7bQbEo6vdR8KC=xsE4O5j4t3khBVtqk7myfUpw@mail.gmail.com>
 <22948.15500.594094.838981@bud.eddelbuettel.com>
 <CAOJokxN+80zBDA3FpiN31w7zeO6ThJ_zFpwKec=eanRURid-Zw@mail.gmail.com>
Message-ID: <bc74dedf-01e1-1c2b-1dd6-8421f11ca367@statistik.tu-dortmund.de>



On 28.08.2017 18:10, Peter Clifford [peter.clifford at stats.ox.ac.uk]  wrote:
> On Mon, Aug 28, 2017 at 4:53 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
> 
>>
>> On 28 August 2017 at 10:21, Peter Clifford [peter.clifford at stats.ox.ac.uk]
>> wrote:
>> | R version 3.4.0 and 3.4.1 with Rcpp 0.12.12 Windows 7.
>>
>> Potentially wrong list here as it is an Rcpp question...
>>
>> | Trying to fix persistent "Found no calls to: 'R_registerRoutines',
>> | 'R_useDynamicSymbols'" problem, when running Rcmd check --as-cran.
>> |
>> | Eventually gave up with my own package and tried the simplest possible
>> case
>> | using Rcpp.package.skeleton("test") with defaults, i.e. the hello_world
>> | example.
>> | That works fine with Rcmd build test and Rcmd check test_1.0.tar.gz, but
>> if
>> | I try Rcmd check --as-cran test_1.0.tar.gz I get the NOTE:
>> |
>> | File 'test/libs/x64/test.dll':
>> |   Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
>> |
>> | It is good practice to register native routines and to disable symbol
>> | search.
>> |
>> | I don't whether there really is a registration problem and if there is,
>> how
>> | to fix it.
>> |
>> | I'd be grateful for suggestions. Thanks.
>>
>> I cannot reproduce this.  Full log below -- new package, and running
>> compileAttributes() creates the registration as it should.
>>
>> (For all the R Core members in the audience: We still need pre-build /
>> post-build hooks like cleanup to have R CMD foo do more things. Happy to
>> work
>> on that if somewhat can work with me to shepherd this in ...)
>>
>> Dirk
>>
>>
>> edd at bud:/tmp$ r -e 'Rcpp::Rcpp.package.skeleton("barePackage")'
>> Creating directories ...
>> Creating DESCRIPTION ...
>> Creating NAMESPACE ...
>> Creating Read-and-delete-me ...
>> Saving functions and data ...
>> Making help files ...
>> Done.
>> Further steps are described in './barePackage/Read-and-delete-me'.
>>
>> Adding Rcpp settings
>>   >> added Imports: Rcpp
>>   >> added LinkingTo: Rcpp
>>   >> added useDynLib directive to NAMESPACE
>>   >> added importFrom(Rcpp, evalCpp) directive to NAMESPACE
>>   >> added example src file using Rcpp attributes
>>   >> added Rd file for rcpp_hello_world
>>   >> compiled Rcpp attributes
>> edd at bud:/tmp$
>> edd at bud:/tmp$ build.r barePackagePlus/    # simple littler wrapper
>> * checking for file ?barePackagePlus/DESCRIPTION? ... OK
>> * preparing ?barePackagePlus?:
>> * checking DESCRIPTION meta-information ... OK
>> * cleaning src
>> * installing the package to process help pages
>> * saving partial Rd database
>> * cleaning src
>> * checking for LF line-endings in source and make files
>> * checking for empty or unneeded directories
>> * building ?barePackagePlus_1.0.tar.gz?
>>
>> edd at bud:/tmp$
>> edd at bud:/tmp$ RD CMD check --as-cran barePackage_1.0.tar.gz
>> * using log directory ?/tmp/barePackage.Rcheck?
>> * using R Under development (unstable) (2017-08-24 r73125)
>> * using platform: x86_64-pc-linux-gnu (64-bit)
>> * using session charset: UTF-8
>> * using option ?--as-cran?
>> * checking for file ?barePackage/DESCRIPTION? ... OK
>> * checking extension type ... Package
>> * this is package ?barePackage? version ?1.0?
>> * checking CRAN incoming feasibility ... NOTE
>> Maintainer: ?Your Name <your at email.com>?
>>
>> New submission
>> * checking package namespace information ... OK
>> * checking package dependencies ... OK
>> * checking if this is a source package ... OK
>> * checking if there is a namespace ... OK
>> * checking for executable files ... OK
>> * checking for hidden files and directories ... OK
>> * checking for portable file names ... OK
>> * checking for sufficient/correct file permissions ... OK
>> * checking whether package ?barePackage? can be installed ... OK
>> * checking installed package size ... OK
>> * checking package directory ... OK
>> * checking DESCRIPTION meta-information ... OK
>> * checking top-level files ... OK
>> * checking for left-over files ... OK
>> * checking index information ... OK
>> * checking package subdirectories ... OK
>> * checking R files for non-ASCII characters ... OK
>> * checking R files for syntax errors ... OK
>> * checking whether the package can be loaded ... OK
>> * checking whether the package can be loaded with stated dependencies ...
>> OK
>> * checking whether the package can be unloaded cleanly ... OK
>> * checking whether the namespace can be loaded with stated dependencies
>> ... OK
>> * checking whether the namespace can be unloaded cleanly ... OK
>> * checking loading without being on the library search path ... OK
>> * checking use of S3 registration ... OK
>> * checking dependencies in R code ... OK
>> * checking S3 generic/method consistency ... OK
>> * checking replacement functions ... OK
>> * checking foreign function calls ... OK
>> * checking R code for possible problems ... OK
>> * checking Rd files ... OK
>> * checking Rd metadata ... OK
>> * checking Rd line widths ... OK
>> * checking Rd cross-references ... OK
>> * checking for missing documentation entries ... OK
>> * checking for code/documentation mismatches ... OK
>> * checking Rd \usage sections ... OK
>> * checking Rd contents ... OK
>> * checking for unstated dependencies in examples ... OK
>> * checking line endings in C/C++/Fortran sources/headers ... OK
>> * checking compiled code ... OK
>> * checking examples ... OK
>> * checking PDF version of manual ... OK
>> * DONE
>>
>> Status: 1 NOTE
>> See
>>    ?/tmp/barePackage.Rcheck/00check.log?
>> for details.
>>
>>
>> edd at bud:/tmp$
>>
>>
>>
>>
>> --
>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> Apologies Dirk, I should have emphasized that this is on Windows 7.  I
> tried it on a Linux box later with no problem. I sent it to this list
> because I thought it might be a general problem for package development in
> Windows.


Could it be your Windows installation contains an outdated version of Rcpp?

Best,
Uwe Ligges


> 
> Thanks
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From peter.clifford at stats.ox.ac.uk  Mon Aug 28 23:30:57 2017
From: peter.clifford at stats.ox.ac.uk (Peter Clifford [peter.clifford@stats.ox.ac.uk] )
Date: Mon, 28 Aug 2017 22:30:57 +0100
Subject: [R-pkg-devel] Rcpp.package.skeleton -- Rcmd check --as-cran
	Windows
In-Reply-To: <bc74dedf-01e1-1c2b-1dd6-8421f11ca367@statistik.tu-dortmund.de>
References: <CAOJokxOmgwGt7bQbEo6vdR8KC=xsE4O5j4t3khBVtqk7myfUpw@mail.gmail.com>
 <22948.15500.594094.838981@bud.eddelbuettel.com>
 <CAOJokxN+80zBDA3FpiN31w7zeO6ThJ_zFpwKec=eanRURid-Zw@mail.gmail.com>
 <bc74dedf-01e1-1c2b-1dd6-8421f11ca367@statistik.tu-dortmund.de>
Message-ID: <CAOJokxPrego1uHE9RTPYz3x5k5vTFnsv20Bw70SHCXoHc0i=8A@mail.gmail.com>

It's Rcpp 0.12.12 and R 3.4.1.   If nobody can reproduce this with Windows
7 (?), I'll assume it's something odd with my system.

Thanks

On Mon, Aug 28, 2017 at 7:48 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de
> wrote:

>
>
> On 28.08.2017 18:10, Peter Clifford [peter.clifford at stats.ox.ac.uk]
> wrote:
>
>> On Mon, Aug 28, 2017 at 4:53 PM, Dirk Eddelbuettel <edd at debian.org>
>> wrote:
>>
>>
>>> On 28 August 2017 at 10:21, Peter Clifford [
>>> peter.clifford at stats.ox.ac.uk]
>>> wrote:
>>> | R version 3.4.0 and 3.4.1 with Rcpp 0.12.12 Windows 7.
>>>
>>> Potentially wrong list here as it is an Rcpp question...
>>>
>>> | Trying to fix persistent "Found no calls to: 'R_registerRoutines',
>>> | 'R_useDynamicSymbols'" problem, when running Rcmd check --as-cran.
>>> |
>>> | Eventually gave up with my own package and tried the simplest possible
>>> case
>>> | using Rcpp.package.skeleton("test") with defaults, i.e. the hello_world
>>> | example.
>>> | That works fine with Rcmd build test and Rcmd check test_1.0.tar.gz,
>>> but
>>> if
>>> | I try Rcmd check --as-cran test_1.0.tar.gz I get the NOTE:
>>> |
>>> | File 'test/libs/x64/test.dll':
>>> |   Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
>>> |
>>> | It is good practice to register native routines and to disable symbol
>>> | search.
>>> |
>>> | I don't whether there really is a registration problem and if there is,
>>> how
>>> | to fix it.
>>> |
>>> | I'd be grateful for suggestions. Thanks.
>>>
>>> I cannot reproduce this.  Full log below -- new package, and running
>>> compileAttributes() creates the registration as it should.
>>>
>>> (For all the R Core members in the audience: We still need pre-build /
>>> post-build hooks like cleanup to have R CMD foo do more things. Happy to
>>> work
>>> on that if somewhat can work with me to shepherd this in ...)
>>>
>>> Dirk
>>>
>>>
>>> edd at bud:/tmp$ r -e 'Rcpp::Rcpp.package.skeleton("barePackage")'
>>> Creating directories ...
>>> Creating DESCRIPTION ...
>>> Creating NAMESPACE ...
>>> Creating Read-and-delete-me ...
>>> Saving functions and data ...
>>> Making help files ...
>>> Done.
>>> Further steps are described in './barePackage/Read-and-delete-me'.
>>>
>>> Adding Rcpp settings
>>>   >> added Imports: Rcpp
>>>   >> added LinkingTo: Rcpp
>>>   >> added useDynLib directive to NAMESPACE
>>>   >> added importFrom(Rcpp, evalCpp) directive to NAMESPACE
>>>   >> added example src file using Rcpp attributes
>>>   >> added Rd file for rcpp_hello_world
>>>   >> compiled Rcpp attributes
>>> edd at bud:/tmp$
>>> edd at bud:/tmp$ build.r barePackagePlus/    # simple littler wrapper
>>> * checking for file ?barePackagePlus/DESCRIPTION? ... OK
>>> * preparing ?barePackagePlus?:
>>> * checking DESCRIPTION meta-information ... OK
>>> * cleaning src
>>> * installing the package to process help pages
>>> * saving partial Rd database
>>> * cleaning src
>>> * checking for LF line-endings in source and make files
>>> * checking for empty or unneeded directories
>>> * building ?barePackagePlus_1.0.tar.gz?
>>>
>>> edd at bud:/tmp$
>>> edd at bud:/tmp$ RD CMD check --as-cran barePackage_1.0.tar.gz
>>> * using log directory ?/tmp/barePackage.Rcheck?
>>> * using R Under development (unstable) (2017-08-24 r73125)
>>> * using platform: x86_64-pc-linux-gnu (64-bit)
>>> * using session charset: UTF-8
>>> * using option ?--as-cran?
>>> * checking for file ?barePackage/DESCRIPTION? ... OK
>>> * checking extension type ... Package
>>> * this is package ?barePackage? version ?1.0?
>>> * checking CRAN incoming feasibility ... NOTE
>>> Maintainer: ?Your Name <your at email.com>?
>>>
>>> New submission
>>> * checking package namespace information ... OK
>>> * checking package dependencies ... OK
>>> * checking if this is a source package ... OK
>>> * checking if there is a namespace ... OK
>>> * checking for executable files ... OK
>>> * checking for hidden files and directories ... OK
>>> * checking for portable file names ... OK
>>> * checking for sufficient/correct file permissions ... OK
>>> * checking whether package ?barePackage? can be installed ... OK
>>> * checking installed package size ... OK
>>> * checking package directory ... OK
>>> * checking DESCRIPTION meta-information ... OK
>>> * checking top-level files ... OK
>>> * checking for left-over files ... OK
>>> * checking index information ... OK
>>> * checking package subdirectories ... OK
>>> * checking R files for non-ASCII characters ... OK
>>> * checking R files for syntax errors ... OK
>>> * checking whether the package can be loaded ... OK
>>> * checking whether the package can be loaded with stated dependencies ...
>>> OK
>>> * checking whether the package can be unloaded cleanly ... OK
>>> * checking whether the namespace can be loaded with stated dependencies
>>> ... OK
>>> * checking whether the namespace can be unloaded cleanly ... OK
>>> * checking loading without being on the library search path ... OK
>>> * checking use of S3 registration ... OK
>>> * checking dependencies in R code ... OK
>>> * checking S3 generic/method consistency ... OK
>>> * checking replacement functions ... OK
>>> * checking foreign function calls ... OK
>>> * checking R code for possible problems ... OK
>>> * checking Rd files ... OK
>>> * checking Rd metadata ... OK
>>> * checking Rd line widths ... OK
>>> * checking Rd cross-references ... OK
>>> * checking for missing documentation entries ... OK
>>> * checking for code/documentation mismatches ... OK
>>> * checking Rd \usage sections ... OK
>>> * checking Rd contents ... OK
>>> * checking for unstated dependencies in examples ... OK
>>> * checking line endings in C/C++/Fortran sources/headers ... OK
>>> * checking compiled code ... OK
>>> * checking examples ... OK
>>> * checking PDF version of manual ... OK
>>> * DONE
>>>
>>> Status: 1 NOTE
>>> See
>>>    ?/tmp/barePackage.Rcheck/00check.log?
>>> for details.
>>>
>>>
>>> edd at bud:/tmp$
>>>
>>>
>>>
>>>
>>> --
>>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>>
>> Apologies Dirk, I should have emphasized that this is on Windows 7.  I
>> tried it on a Linux box later with no problem. I sent it to this list
>> because I thought it might be a general problem for package development in
>> Windows.
>>
>
>
> Could it be your Windows installation contains an outdated version of Rcpp?
>
> Best,
> Uwe Ligges
>
>
>
>> Thanks
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>

	[[alternative HTML version deleted]]


From roy.mendelssohn at noaa.gov  Tue Aug 29 18:24:54 2017
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 29 Aug 2017 09:24:54 -0700
Subject: [R-pkg-devel] In Description file,
	how far removed should the depends go?
Message-ID: <23130BFF-952C-4D95-A042-AD5CA239C046@noaa.gov>

HI All:

What is best practice for the "depends" in the Description file,  in terms of how of how many layers down do I list depends?  For example,  if my package depends on the rerddap package,  is it best practice  to just list rerddap in the depends,  or should I also list all the packages rerddap depends on  - which can go many layers deep.  What is best practice for this?

Thanks,

-Roy

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From dasonk at gmail.com  Tue Aug 29 18:39:29 2017
From: dasonk at gmail.com (Dason Kurkiewicz)
Date: Tue, 29 Aug 2017 12:39:29 -0400
Subject: [R-pkg-devel] In Description file,
 how far removed should the depends go?
In-Reply-To: <23130BFF-952C-4D95-A042-AD5CA239C046@noaa.gov>
References: <23130BFF-952C-4D95-A042-AD5CA239C046@noaa.gov>
Message-ID: <CAJZYZZ4bpNb1-+QuK_5c3eN111wL48yc7H6Y-EMstd8OtkJNkA@mail.gmail.com>

You just need to list the packages that you explicitly depend on.
Most likely you should be using imports instead of "depends" but
that's a different issue.  It might seem like you're doing the user a
favor by making it explicit *all* the packages that will end up on
their system if your package is installed but what happens when a
package you use changes the packages that it depends on?  Are you
going to take the time to check n layers deep to make sure your
dependency list matches what should be on the users system?  If a
package you use drops one of the other packages that they used to
import in favor of a different package and you don't notice it then
you're going to end up installing a package on the user's system that
they don't actually need.

tldr: Just list the packages you explicitly need.

-Dason Kurkiewicz

On Tue, Aug 29, 2017 at 12:24 PM, Roy Mendelssohn - NOAA Federal
<roy.mendelssohn at noaa.gov> wrote:
> HI All:
>
> What is best practice for the "depends" in the Description file,  in terms of how of how many layers down do I list depends?  For example,  if my package depends on the rerddap package,  is it best practice  to just list rerddap in the depends,  or should I also list all the packages rerddap depends on  - which can go many layers deep.  What is best practice for this?
>
> Thanks,
>
> -Roy
>
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ligges at statistik.tu-dortmund.de  Tue Aug 29 18:50:51 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 29 Aug 2017 18:50:51 +0200
Subject: [R-pkg-devel] In Description file,
 how far removed should the depends go?
In-Reply-To: <23130BFF-952C-4D95-A042-AD5CA239C046@noaa.gov>
References: <23130BFF-952C-4D95-A042-AD5CA239C046@noaa.gov>
Message-ID: <1aa16926-f3ab-c635-1b79-52499dc1f978@statistik.tu-dortmund.de>



On 29.08.2017 18:24, Roy Mendelssohn - NOAA Federal wrote:
> HI All:
> 
> What is best practice for the "depends" in the Description file,  in terms of how of how many layers down do I list depends?  For example,  if my package depends on the rerddap package,  is it best practice  to just list rerddap in the depends,  or should I also list all the packages rerddap depends on  - which can go many layers deep.  What is best practice for this?

Only rerddap, and ideally in Imports rather than Depends.

Best,
Uwe Ligges


> 
> Thanks,
> 
> -Roy
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From roy.mendelssohn at noaa.gov  Tue Aug 29 18:55:55 2017
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 29 Aug 2017 09:55:55 -0700
Subject: [R-pkg-devel] In Description file,
 how far removed should the depends go?
In-Reply-To: <1aa16926-f3ab-c635-1b79-52499dc1f978@statistik.tu-dortmund.de>
References: <23130BFF-952C-4D95-A042-AD5CA239C046@noaa.gov>
 <1aa16926-f3ab-c635-1b79-52499dc1f978@statistik.tu-dortmund.de>
Message-ID: <9C80EC11-1F03-4749-8201-F4C2D2B71741@noaa.gov>

Thanks I meant Imports,  just wasn't thinking.  The main issue was how deep to recurse.

-Roy

> On Aug 29, 2017, at 9:50 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> 
> 
> On 29.08.2017 18:24, Roy Mendelssohn - NOAA Federal wrote:
>> HI All:
>> What is best practice for the "depends" in the Description file,  in terms of how of how many layers down do I list depends?  For example,  if my package depends on the rerddap package,  is it best practice  to just list rerddap in the depends,  or should I also list all the packages rerddap depends on  - which can go many layers deep.  What is best practice for this?
> 
> Only rerddap, and ideally in Imports rather than Depends.
> 
> Best,
> Uwe Ligges
> 
> 
>> Thanks,
>> -Roy
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected"
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From joe at poissonconsulting.ca  Fri Sep  1 21:23:08 2017
From: joe at poissonconsulting.ca (Joe Thorley)
Date: Fri, 1 Sep 2017 12:23:08 -0700
Subject: [R-pkg-devel] Please ensure that the license you choose also covers
 any dependencies (including system dependencies) of your package
Message-ID: <1544815A-F9B2-4BAD-AA7B-18E7DF159B28@poissonconsulting.ca>

Writing R extensions <https://cran.r-project.org/doc/manuals/R-exts.html#Licensing> states that

> Please ensure that the license you choose also covers any dependencies (including system dependencies) of your package

Is this considered to apply to R packages in Imports, Depends or Suggests?

Thanks

Joe

Joe Thorley PhD, RPBio
Computational Biologist
Poisson Consulting Ltd.
4216 Shasheen Road
Nelson, BC
V1L 6X1, Canada
Tel: +1 250 551 2194
Email: joe at poissonconsulting.ca
Web: www.poissonconsulting.ca
Skype: joethorley




	[[alternative HTML version deleted]]


From edd at debian.org  Sat Sep  2 23:07:29 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 2 Sep 2017 16:07:29 -0500
Subject: [R-pkg-devel] Please ensure that the license you choose also
 covers any dependencies (including system dependencies) of your package
In-Reply-To: <1544815A-F9B2-4BAD-AA7B-18E7DF159B28@poissonconsulting.ca>
References: <1544815A-F9B2-4BAD-AA7B-18E7DF159B28@poissonconsulting.ca>
Message-ID: <22955.7569.765971.601667@bud.eddelbuettel.com>


On 1 September 2017 at 12:23, Joe Thorley wrote:
| Writing R extensions <https://cran.r-project.org/doc/manuals/R-exts.html#Licensing> states that
| 
| > Please ensure that the license you choose also covers any dependencies (including system dependencies) of your package
| 
| Is this considered to apply to R packages in Imports, Depends or Suggests?

No, AFAIK it pertains to code you include in _your_ package or any external
resources which your package directory depends upon (via SystemRequirements).

Example 1: You write a package as (free, open source) wrapper around another
library, say in C or Fortran.  This paragraph wants to make sure that you do
not attempt hide any possible "less-free" licenses of the included code, or
the required code.

The remainder of the paragraph which you omitted in your mail is instructive

   it is particularly important that any restrictions on the use of such
   dependencies are evident to people reading your DESCRIPTION file.

as the rest of that Section 1.1.2 really talks about the requirement for
'free or open source software'.  And the line quote talks about possible
restrictions -- please make any such restrictions as clear as possible.

Hth,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From traversc at gmail.com  Sun Sep  3 05:50:49 2017
From: traversc at gmail.com (Travers Ching)
Date: Sat, 2 Sep 2017 20:50:49 -0700
Subject: [R-pkg-devel] Submitting a package to C-RAN
Message-ID: <CAPLMX9EeEUDmdwez3JzjHUz2xsXEkjCrg37WkzagBi5DmRLZkg@mail.gmail.com>

I am trying to submit a package to CRAN.  It did not pass the automated
checks.  However, I don't understand what it is I am supposed to fix.

I have run R CMD check ... -- as-cran and it seems to pass.  And I have
also verified that it installs and works on ubuntu and windows.

The message I get from the submission system is:

Dear maintainer,

package msgpack2R_0.1.tar.gz does not pass the incoming checks
automatically, please see the pre-test at:
<https://win-builder.r-project.org/incoming_pretest/
170903_030012_msgpack2R_01/00check.log>
Status: 3 NOTEs

It doesn't list any warnings or errors.

	[[alternative HTML version deleted]]


From mark.vanderloo at gmail.com  Sun Sep  3 13:11:31 2017
From: mark.vanderloo at gmail.com (Mark van der Loo)
Date: Sun, 03 Sep 2017 11:11:31 +0000
Subject: [R-pkg-devel] Submitting a package to C-RAN
In-Reply-To: <CAPLMX9EeEUDmdwez3JzjHUz2xsXEkjCrg37WkzagBi5DmRLZkg@mail.gmail.com>
References: <CAPLMX9EeEUDmdwez3JzjHUz2xsXEkjCrg37WkzagBi5DmRLZkg@mail.gmail.com>
Message-ID: <CAOKDuOjabfO02PH=sKvXiUhzoskR2+opLYMNA4vPJiyH2WhSuw@mail.gmail.com>

I suggest you follow the link and check the notes..

On Sun, Sep 3, 2017, 1:06 PM Travers Ching <traversc at gmail.com> wrote:

> I am trying to submit a package to CRAN.  It did not pass the automated
> checks.  However, I don't understand what it is I am supposed to fix.
>
> I have run R CMD check ... -- as-cran and it seems to pass.  And I have
> also verified that it installs and works on ubuntu and windows.
>
> The message I get from the submission system is:
>
> Dear maintainer,
>
> package msgpack2R_0.1.tar.gz does not pass the incoming checks
> automatically, please see the pre-test at:
> <https://win-builder.r-project.org/incoming_pretest/
> 170903_030012_msgpack2R_01/00check.log>
> Status: 3 NOTEs
>
> It doesn't list any warnings or errors.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From olbapjose at gmail.com  Sun Sep  3 13:12:30 2017
From: olbapjose at gmail.com (Manny Calavera)
Date: Sun, 3 Sep 2017 13:12:30 +0200
Subject: [R-pkg-devel] Submitting a package to C-RAN
In-Reply-To: <CAPLMX9EeEUDmdwez3JzjHUz2xsXEkjCrg37WkzagBi5DmRLZkg@mail.gmail.com>
References: <CAPLMX9EeEUDmdwez3JzjHUz2xsXEkjCrg37WkzagBi5DmRLZkg@mail.gmail.com>
Message-ID: <CANHtDkR==tsJ9Ywf1B6gnvSE+K7OHrR5+_K2JL8WMWVhzfdbpw@mail.gmail.com>

Check the logs here:

https://win-builder.r-project.org/incoming_pretest/170903_030012_msgpack2R_01/

Are you using the latest R-devel version (not the current stable version)
to run R CMD check --as-cran ?


2017-09-03 5:50 GMT+02:00 Travers Ching <traversc at gmail.com>:

> I am trying to submit a package to CRAN.  It did not pass the automated
> checks.  However, I don't understand what it is I am supposed to fix.
>
> I have run R CMD check ... -- as-cran and it seems to pass.  And I have
> also verified that it installs and works on ubuntu and windows.
>
> The message I get from the submission system is:
>
> Dear maintainer,
>
> package msgpack2R_0.1.tar.gz does not pass the incoming checks
> automatically, please see the pre-test at:
> <https://win-builder.r-project.org/incoming_pretest/
> 170903_030012_msgpack2R_01/00check.log>
> Status: 3 NOTEs
>
> It doesn't list any warnings or errors.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd at debian.org  Sun Sep  3 16:48:20 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 3 Sep 2017 09:48:20 -0500
Subject: [R-pkg-devel] Submitting a package to C-RAN
In-Reply-To: <CAPLMX9EeEUDmdwez3JzjHUz2xsXEkjCrg37WkzagBi5DmRLZkg@mail.gmail.com>
References: <CAPLMX9EeEUDmdwez3JzjHUz2xsXEkjCrg37WkzagBi5DmRLZkg@mail.gmail.com>
Message-ID: <22956.5684.716802.600164@bud.eddelbuettel.com>


Per https://win-builder.r-project.org/incoming_pretest/170903_030012_msgpack2R_01/00check.log 
you three NOTEs:

1. Spelling in DESCRIPTION: You need ' around those words, ie 'MsgPack'; I
also suggest consistent use of capitals.

2. Installed package size:  There is nothing you can here. (Short of maybe
using 'LnkingTo: RcppMsgPack' as my package already includes MsgPack)

3. Top-level directory examples: You probably want to have that directory be 
inst/examples instead.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From traversc at gmail.com  Sun Sep  3 20:36:18 2017
From: traversc at gmail.com (Travers Ching)
Date: Sun, 3 Sep 2017 11:36:18 -0700
Subject: [R-pkg-devel] Submitting a package to C-RAN
In-Reply-To: <22956.5684.716802.600164@bud.eddelbuettel.com>
References: <CAPLMX9EeEUDmdwez3JzjHUz2xsXEkjCrg37WkzagBi5DmRLZkg@mail.gmail.com>
 <22956.5684.716802.600164@bud.eddelbuettel.com>
Message-ID: <CAPLMX9H4xiKyFiJmBBy8p4s1qC3LW0F02Uavvx6UM76ZVYnn6A@mail.gmail.com>

Thanks for your help!  I misunderstood the purpose of 'notes' and was only
looking for errors/warnings.  Also, could you update RccpMsgPack to use the
latest version?

On Sun, Sep 3, 2017 at 7:48 AM, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> Per https://win-builder.r-project.org/incoming_pretest/170903_
> 030012_msgpack2R_01/00check.log
> you three NOTEs:
>
> 1. Spelling in DESCRIPTION: You need ' around those words, ie 'MsgPack'; I
> also suggest consistent use of capitals.
>
> 2. Installed package size:  There is nothing you can here. (Short of maybe
> using 'LnkingTo: RcppMsgPack' as my package already includes MsgPack)
>
> 3. Top-level directory examples: You probably want to have that directory
> be
> inst/examples instead.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From edd at debian.org  Sun Sep  3 21:27:47 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 3 Sep 2017 14:27:47 -0500
Subject: [R-pkg-devel] Submitting a package to C-RAN
In-Reply-To: <CAPLMX9H4xiKyFiJmBBy8p4s1qC3LW0F02Uavvx6UM76ZVYnn6A@mail.gmail.com>
References: <CAPLMX9EeEUDmdwez3JzjHUz2xsXEkjCrg37WkzagBi5DmRLZkg@mail.gmail.com>
 <22956.5684.716802.600164@bud.eddelbuettel.com>
 <CAPLMX9H4xiKyFiJmBBy8p4s1qC3LW0F02Uavvx6UM76ZVYnn6A@mail.gmail.com>
Message-ID: <22956.22451.504634.28847@bud.eddelbuettel.com>


On 3 September 2017 at 11:36, Travers Ching wrote:
| Thanks for your help!  I misunderstood the purpose of 'notes' and was only
| looking for errors/warnings.

You still want to address the fixable notes.

| Also, could you update RccpMsgPack to use the
| latest version?

I can't quite remember why I decided to stay at 1.4.* but yes, I can probably
look into 2.1.* as well.

Shall we (maybe off-line) talk about potentially merging the two packages?

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From traversc at gmail.com  Sun Sep  3 22:04:34 2017
From: traversc at gmail.com (Travers Ching)
Date: Sun, 3 Sep 2017 13:04:34 -0700
Subject: [R-pkg-devel] Submitting a package to C-RAN
In-Reply-To: <22956.22451.504634.28847@bud.eddelbuettel.com>
References: <CAPLMX9EeEUDmdwez3JzjHUz2xsXEkjCrg37WkzagBi5DmRLZkg@mail.gmail.com>
 <22956.5684.716802.600164@bud.eddelbuettel.com>
 <CAPLMX9H4xiKyFiJmBBy8p4s1qC3LW0F02Uavvx6UM76ZVYnn6A@mail.gmail.com>
 <22956.22451.504634.28847@bud.eddelbuettel.com>
Message-ID: <CAPLMX9Ft+Eda5aVxLLMOeT4P2ZAWysEqBcn_j105sidwAU32kA@mail.gmail.com>

Sure thing.  How did you want to merge them?

On Sun, Sep 3, 2017 at 12:27 PM, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 3 September 2017 at 11:36, Travers Ching wrote:
> | Thanks for your help!  I misunderstood the purpose of 'notes' and was
> only
> | looking for errors/warnings.
>
> You still want to address the fixable notes.
>
> | Also, could you update RccpMsgPack to use the
> | latest version?
>
> I can't quite remember why I decided to stay at 1.4.* but yes, I can
> probably
> look into 2.1.* as well.
>
> Shall we (maybe off-line) talk about potentially merging the two packages?
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From berryboessenkool at hotmail.com  Mon Sep  4 16:22:35 2017
From: berryboessenkool at hotmail.com (Berry Boessenkool)
Date: Mon, 4 Sep 2017 14:22:35 +0000
Subject: [R-pkg-devel] installing packages from github
Message-ID: <DB5PR0401MB17816D3952BE3F5899DEF271D5910@DB5PR0401MB1781.eurprd04.prod.outlook.com>


Dear fellow package developers,


I recently came across


source("https://install-github.me/MangoTheCat/goodpractice")


which seems very elegant to write into a github package readme as installation instructions.

That way, people wanting to simply use a package can avoid installing devtools with all its dependencies.

It is also a bit more concise than:


if(!requireNamespace("devtoools", quietly=TRUE)) install.packages("devtoools")
devtools::install_github("MangoTheCat/goodpractice")


And it (seems to) work for any github repo, so no drat [1] setup on the side of the package maintainer is needed.


I had never seen this before (probably just missed it) and install-github.me only shows "coming soon".

So I wonder:

- is this safe to use and platform compatible?

- why isn't it more common?

- are there yet better alternatives?

- do I miss something obvious?


Thanks ahead for thoughts and opinions,

Berry


[1] https://github.com/eddelbuettel/drat




	[[alternative HTML version deleted]]


From csardi.gabor at gmail.com  Mon Sep  4 16:37:24 2017
From: csardi.gabor at gmail.com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Mon, 4 Sep 2017 15:37:24 +0100
Subject: [R-pkg-devel] installing packages from github
In-Reply-To: <DB5PR0401MB17816D3952BE3F5899DEF271D5910@DB5PR0401MB1781.eurprd04.prod.outlook.com>
References: <DB5PR0401MB17816D3952BE3F5899DEF271D5910@DB5PR0401MB1781.eurprd04.prod.outlook.com>
Message-ID: <CABtg=KmuAwJcjsYdZ4HO=O3v+Mu_HqvRt+2L6E9YVmicFt2iyA@mail.gmail.com>

Disclaimer: I built install-github.me. More below.

On Mon, Sep 4, 2017 at 3:22 PM, Berry Boessenkool
<berryboessenkool at hotmail.com> wrote:
[...]
> I had never seen this before (probably just missed it) and install-github.me only shows "coming soon".
>
> So I wonder:
>
> - is this safe to use and platform compatible?

I am not sure what you mean by safe. It is just the collated R files
of https://github.com/r-lib/remotes, you can also read the code if you
are concerned: https://install-github.me/MangoTheCat/goodpractice

It should work on all platforms, please report bugs if it fails for you.

> - why isn't it more common?

I can't fully answer that, but at least partly because I am not
promoting it, and the r-lib team is not promoting it, either.
I believe that this is because we don't have consensus on whether it
is a good idea to teach people to source "random" code from the web.

> - are there yet better alternatives?

Better in what way?

> - do I miss something obvious?

I don't think so. :)

Best,
Gabor

> Thanks ahead for thoughts and opinions,
>
> Berry

[...]


From edd at debian.org  Mon Sep  4 16:54:36 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Mon, 4 Sep 2017 09:54:36 -0500
Subject: [R-pkg-devel] installing packages from github
In-Reply-To: <DB5PR0401MB17816D3952BE3F5899DEF271D5910@DB5PR0401MB1781.eurprd04.prod.outlook.com>
References: <DB5PR0401MB17816D3952BE3F5899DEF271D5910@DB5PR0401MB1781.eurprd04.prod.outlook.com>
Message-ID: <22957.26924.772705.218777@bud.eddelbuettel.com>


On 4 September 2017 at 14:22, Berry Boessenkool wrote:
| - do I miss something obvious?

The part where devtools has been undergoing a renovation for some time now
splitting functionality into many small packages?

I have my own views on repos with clearly marked and explicitly prepared
releases versus 'installing random commit snapshots from GH' -- but sometimes
you need the latter and I tend to use the helper below at the shell prompt.
It switches to using remotes quite some time ago.

Dirk


#!/usr/bin/env r
#
# A simple example to install one or more packages from GitHub
#
# Copyright (C) 2014 - 2016  Carl Boettiger and Dirk Eddelbuettel
#
# Released under GPL (>= 2)

## load docopt and remotes (or devtools) from CRAN
suppressMessages(library(docopt))       # we need docopt (>= 0.3) as on CRAN
suppressMessages(library(remotes))      # can use devtools as a fallback

## configuration for docopt
doc <- "Usage: installGithub.r [-h] [-x] [-d DEPS] [-u UPDATE] [REPOS...]

-d --deps DEPS       install suggested dependencies as well? [default: NA]
-u --update UPDATE   update dependencies? [default: TRUE]
-h --help            show this help text
-x --usage           show help and short example usage"

opt <- docopt(doc)			# docopt parsing

if (opt$usage) {
    cat(doc, "\n\n")
    cat("where REPOS... is one or more GitHub repositories.

Examples:
  installGithub.r RcppCore/RcppEigen                     

installGithub.r is part of littler which brings 'r' to the command-line.
See http://dirk.eddelbuettel.com/code/littler.html for more information.\n")
    q("no")
}

## docopt parsing
opt <- docopt(doc)
if (opt$deps == "TRUE" || opt$deps == "FALSE") {
    opt$deps <- as.logical(opt$deps)
} else if (opt$deps == "NA") {
    opt$deps <- NA
}

opt$update <- as.logical(opt$update)

invisible(sapply(opt$REPOS, function(r) install_github(r, dependencies = opt$deps, upgrade = opt$update)))

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From DOgle at northland.edu  Thu Sep  7 18:00:49 2017
From: DOgle at northland.edu (Derek Ogle)
Date: Thu, 7 Sep 2017 16:00:49 +0000
Subject: [R-pkg-devel] CRAN Submission Question (FSA)
Message-ID: <5C759AAB3680854DA1CFD152DD5CCE5A013D152730@NC-MAIL2010.northland.edu>

I recently updated my FSA package and submitted it to CRAN, but it was rejected with errors on the pre-test. I tested the package, both before and now after submission, on my Windows machine (with R 3.4.1), on Travis-CI and AppVeyor, and on all three versions of R (old, current, and development) on WinBuilder. In all instances, no errors were returned. Furthermore, I cannot interpret the error messages returned from the CRAN pre-test file. From this, I have two questions.

How can I locally reproduce the CRAN pre-test checks/errors so that I can troubleshoot the problem myself?

Any suggestions for how to interpret the CRAN pre-test checks/errors? [For what it is worth, it feels like this error is related to the availability of nlme or lme4 (see the error at the bottom of the 64-bit examples file), but I trust CRAN more than myself in these matters.]

The CRAN pre-test folder is at https://win-builder.r-project.org/incoming_pretest/170907_041001_FSA_0815/ with the errors shown in the log and the .Rout files in the examples/tests folder.
 
My WinBuilder checks are at: Old-release -- https://win-builder.r-project.org/7i5svuyd2kP3/00check.log, current -- https://win-builder.r-project.org/vR33M8284Jbg/, devel - https://win-builder.r-project.org/XqHThgnnnvpv/00check.log 

If necessary, my package source code is at https://github.com/droglenc/FSA

Thanks in advance for any help.


From thierry.onkelinx at inbo.be  Thu Sep  7 20:44:50 2017
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Thu, 7 Sep 2017 20:44:50 +0200
Subject: [R-pkg-devel] CRAN Submission Question (FSA)
In-Reply-To: <5C759AAB3680854DA1CFD152DD5CCE5A013D152730@NC-MAIL2010.northland.edu>
References: <5C759AAB3680854DA1CFD152DD5CCE5A013D152730@NC-MAIL2010.northland.edu>
Message-ID: <CAJuCY5y_hBB=vo3ggT_gQpF9QUHNCQoKBf2A+S7NRtU0D=di2g@mail.gmail.com>

Dear Olek,

One of the problems seems to be that lme4 (dependency of fishmethod) wasn't
installed during the pretest. I have no idea why.

Best regards,

ir. Thierry Onkelinx
Instituut voor natuur- en bosonderzoek / Research Institute for Nature and
Forest
team Biometrie & Kwaliteitszorg / team Biometrics & Quality Assurance
Kliniekstraat 25
1070 Anderlecht
Belgium

To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey

2017-09-07 18:00 GMT+02:00 Derek Ogle <DOgle at northland.edu>:

> I recently updated my FSA package and submitted it to CRAN, but it was
> rejected with errors on the pre-test. I tested the package, both before and
> now after submission, on my Windows machine (with R 3.4.1), on Travis-CI
> and AppVeyor, and on all three versions of R (old, current, and
> development) on WinBuilder. In all instances, no errors were returned.
> Furthermore, I cannot interpret the error messages returned from the CRAN
> pre-test file. From this, I have two questions.
>
> How can I locally reproduce the CRAN pre-test checks/errors so that I can
> troubleshoot the problem myself?
>
> Any suggestions for how to interpret the CRAN pre-test checks/errors? [For
> what it is worth, it feels like this error is related to the availability
> of nlme or lme4 (see the error at the bottom of the 64-bit examples file),
> but I trust CRAN more than myself in these matters.]
>
> The CRAN pre-test folder is at https://win-builder.r-project.
> org/incoming_pretest/170907_041001_FSA_0815/ with the errors shown in the
> log and the .Rout files in the examples/tests folder.
>
> My WinBuilder checks are at: Old-release -- https://win-builder.r-project.
> org/7i5svuyd2kP3/00check.log, current -- https://win-builder.r-project.
> org/vR33M8284Jbg/, devel - https://win-builder.r-project.
> org/XqHThgnnnvpv/00check.log
>
> If necessary, my package source code is at https://github.com/droglenc/FSA
>
> Thanks in advance for any help.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Thu Sep  7 20:46:26 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Thu, 7 Sep 2017 20:46:26 +0200
Subject: [R-pkg-devel] CRAN Submission Question (FSA)
In-Reply-To: <5C759AAB3680854DA1CFD152DD5CCE5A013D152730@NC-MAIL2010.northland.edu>
References: <5C759AAB3680854DA1CFD152DD5CCE5A013D152730@NC-MAIL2010.northland.edu>
Message-ID: <5765058b-0925-cddf-3fc6-783a0bd56af9@statistik.tu-dortmund.de>

Looks like a race condition on the incominf check system. Please simply 
resubmit.
If this happens again, please respond omn the auto generated message and 
we will take a look manually.

Best,
Uwe Ligges





On 07.09.2017 18:00, Derek Ogle wrote:
> I recently updated my FSA package and submitted it to CRAN, but it was rejected with errors on the pre-test. I tested the package, both before and now after submission, on my Windows machine (with R 3.4.1), on Travis-CI and AppVeyor, and on all three versions of R (old, current, and development) on WinBuilder. In all instances, no errors were returned. Furthermore, I cannot interpret the error messages returned from the CRAN pre-test file. From this, I have two questions.
> 
> How can I locally reproduce the CRAN pre-test checks/errors so that I can troubleshoot the problem myself?
> 
> Any suggestions for how to interpret the CRAN pre-test checks/errors? [For what it is worth, it feels like this error is related to the availability of nlme or lme4 (see the error at the bottom of the 64-bit examples file), but I trust CRAN more than myself in these matters.]
> 
> The CRAN pre-test folder is at https://win-builder.r-project.org/incoming_pretest/170907_041001_FSA_0815/ with the errors shown in the log and the .Rout files in the examples/tests folder.
>   
> My WinBuilder checks are at: Old-release -- https://win-builder.r-project.org/7i5svuyd2kP3/00check.log, current -- https://win-builder.r-project.org/vR33M8284Jbg/, devel - https://win-builder.r-project.org/XqHThgnnnvpv/00check.log
> 
> If necessary, my package source code is at https://github.com/droglenc/FSA
> 
> Thanks in advance for any help.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From DOgle at northland.edu  Thu Sep  7 23:33:50 2017
From: DOgle at northland.edu (Derek Ogle)
Date: Thu, 7 Sep 2017 21:33:50 +0000
Subject: [R-pkg-devel] CRAN Submission Question (FSA)
In-Reply-To: <5765058b-0925-cddf-3fc6-783a0bd56af9@statistik.tu-dortmund.de>
References: <5C759AAB3680854DA1CFD152DD5CCE5A013D152730@NC-MAIL2010.northland.edu>
 <5765058b-0925-cddf-3fc6-783a0bd56af9@statistik.tu-dortmund.de>
Message-ID: <5C759AAB3680854DA1CFD152DD5CCE5A013D1528D1@NC-MAIL2010.northland.edu>

Just to close this "issue." I resubmitted as suggested and the package appears to have made it through to CRAN.

Thank you Thierry and Uwe for your help.

-----Original Message-----
From: Uwe Ligges [mailto:ligges at statistik.tu-dortmund.de] 
Sent: Thursday, September 07, 2017 1:46 PM
To: Derek Ogle <DOgle at northland.edu>; R-package-devel at r-project.org
Subject: Re: [R-pkg-devel] CRAN Submission Question (FSA)

Looks like a race condition on the incominf check system. Please simply resubmit.
If this happens again, please respond omn the auto generated message and we will take a look manually.

Best,
Uwe Ligges





On 07.09.2017 18:00, Derek Ogle wrote:
> I recently updated my FSA package and submitted it to CRAN, but it was rejected with errors on the pre-test. I tested the package, both before and now after submission, on my Windows machine (with R 3.4.1), on Travis-CI and AppVeyor, and on all three versions of R (old, current, and development) on WinBuilder. In all instances, no errors were returned. Furthermore, I cannot interpret the error messages returned from the CRAN pre-test file. From this, I have two questions.
> 
> How can I locally reproduce the CRAN pre-test checks/errors so that I can troubleshoot the problem myself?
> 
> Any suggestions for how to interpret the CRAN pre-test checks/errors? 
> [For what it is worth, it feels like this error is related to the 
> availability of nlme or lme4 (see the error at the bottom of the 
> 64-bit examples file), but I trust CRAN more than myself in these 
> matters.]
> 
> The CRAN pre-test folder is at https://win-builder.r-project.org/incoming_pretest/170907_041001_FSA_0815/ with the errors shown in the log and the .Rout files in the examples/tests folder.
>   
> My WinBuilder checks are at: Old-release -- 
> https://win-builder.r-project.org/7i5svuyd2kP3/00check.log, current -- 
> https://win-builder.r-project.org/vR33M8284Jbg/, devel - 
> https://win-builder.r-project.org/XqHThgnnnvpv/00check.log
> 
> If necessary, my package source code is at 
> https://github.com/droglenc/FSA
> 
> Thanks in advance for any help.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

From baptiste.auguie at gmail.com  Sun Sep 10 00:15:31 2017
From: baptiste.auguie at gmail.com (Baptiste Auguie)
Date: Sun, 10 Sep 2017 10:15:31 +1200
Subject: [R-pkg-devel] README.Rmd and associated figure files
Message-ID: <CANLFJPrHhFn1LG5K3GJxzuKkPP-AfZKtj4_0oBD6A7sbSksLEw@mail.gmail.com>

Hi,

I'm not sure what to do with README.Rmd; I followed Hadley's instructions*
at http://r-pkgs.had.co.nz/release.html but I'm getting a Warning from CRAN
(missing figure files). Writing R Extensions does not seem to mention this
particular way of generating a README.md file (and in fact, mildly
discourages README.md, see https://cran.r-project.org/
doc/manuals/r-release/R-exts.html#FOOT2). Here's what I've done:

- top level README.Rmd file with knitr option fig.path = "README-"
- ^README\.Rmd$ and  ^README-.*\.png$ added in .Rbuildignore

as a result, R CMD build creates README.md, and removes the associated
figures and Rmd source file. However CRAN issues a Warning that the png
files are missing.

So my next step has been to remove ^README-.*\.png$ from .Rbuildignore, but
that yields a NOTE: "Non-standard files/directories found at top level:
...<pngs>"

I thought perhaps this should go in .Rinstignore, but that yields the same
NOTE.

What is the proper way to deal with these image files? (pointing fig.path
to inst/ doesn't seem like an option either, as it will break the paths).

Has there been a recent change in how README.Rmd files are processed? (I
did not find this step documented in WRE). I looked at a few packages and
they seem to follow the model recommended in Hadley's r-pkgs resource, so
presumably it used to work without warnings.

Thanks,

baptiste


*: I realise this is not an official documentation; however, from a
pragmatic point of view, it would seem mutually beneficial if
recommendations could somehow be kept in sync between this document and
official CRAN policies.

	[[alternative HTML version deleted]]


From jlongrc at gmail.com  Sun Sep 10 13:02:28 2017
From: jlongrc at gmail.com (Jacob Long)
Date: Sun, 10 Sep 2017 07:02:28 -0400
Subject: [R-pkg-devel] CRAN submission never published
Message-ID: <CAHZ=-tEE-baZSMCWfxf4tAYLf=YxRGzUCQxqnQsOyDLFiLbfuA@mail.gmail.com>

I noticed my package, jtools (
https://cran.r-project.org/web/packages/jtools/index.html), didn?t
increment its version number on CRAN after my most recent update. I
initially didn?t give it much thought, assuming I must have forgotten to
change it prior to my submission. Looking back through my records, though,
I now see that I did increment the version number but something odd
happened in the submission process.

The version on CRAN (0.5.0) says it was updated on 8/8/2017. My email
records show I submitted 0.6.0 on 8/29/17 and got the following
confirmation after about 15 minutes:



?Dear maintainer,

thanks, package jtools_0.6.0.tar.gz is on its way to CRAN now.



Best regards,

CRAN teams' auto-check service?



Now it does look like when I submitted it in the past, I would receive an
email a day later from Uwe Ligges informing me the Windows binary had been
built and was headed to CRAN. I never received that follow-up for the
8/29/17 submission nor any other kind of follow-up.



Any idea what happened with that update? I?ve submitted a new update about
12 hours ago and received the same ?on its way to CRAN now? message though
it still hasn?t published to CRAN yet either. This is still in the normal
window of time that CRAN can take to push an update to the public-facing
servers, but given what happened with my previous update I wonder if I?m
making some kind of rookie mistake (I?ve published 4 other updates without
issue previously).

	[[alternative HTML version deleted]]


From henrik.bengtsson at gmail.com  Mon Sep 11 05:28:49 2017
From: henrik.bengtsson at gmail.com (Henrik Bengtsson)
Date: Sun, 10 Sep 2017 20:28:49 -0700
Subject: [R-pkg-devel] CRAN submission never published
In-Reply-To: <CAHZ=-tEE-baZSMCWfxf4tAYLf=YxRGzUCQxqnQsOyDLFiLbfuA@mail.gmail.com>
References: <CAHZ=-tEE-baZSMCWfxf4tAYLf=YxRGzUCQxqnQsOyDLFiLbfuA@mail.gmail.com>
Message-ID: <CAFDcVCT5ExXKjMka71F7oBEd5sTOz0Rv_dTVR_V95veN7aNeag@mail.gmail.com>

Looks like a hiccup to me - this never happened to me. I suggest
sending cran at ... an email about this.  /Henrik

On Sun, Sep 10, 2017 at 4:02 AM, Jacob Long <jlongrc at gmail.com> wrote:
> I noticed my package, jtools (
> https://cran.r-project.org/web/packages/jtools/index.html), didn?t
> increment its version number on CRAN after my most recent update. I
> initially didn?t give it much thought, assuming I must have forgotten to
> change it prior to my submission. Looking back through my records, though,
> I now see that I did increment the version number but something odd
> happened in the submission process.
>
> The version on CRAN (0.5.0) says it was updated on 8/8/2017. My email
> records show I submitted 0.6.0 on 8/29/17 and got the following
> confirmation after about 15 minutes:
>
>
>
> ?Dear maintainer,
>
> thanks, package jtools_0.6.0.tar.gz is on its way to CRAN now.
>
>
>
> Best regards,
>
> CRAN teams' auto-check service?
>
>
>
> Now it does look like when I submitted it in the past, I would receive an
> email a day later from Uwe Ligges informing me the Windows binary had been
> built and was headed to CRAN. I never received that follow-up for the
> 8/29/17 submission nor any other kind of follow-up.
>
>
>
> Any idea what happened with that update? I?ve submitted a new update about
> 12 hours ago and received the same ?on its way to CRAN now? message though
> it still hasn?t published to CRAN yet either. This is still in the normal
> window of time that CRAN can take to push an update to the public-facing
> servers, but given what happened with my previous update I wonder if I?m
> making some kind of rookie mistake (I?ve published 4 other updates without
> issue previously).
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ligges at statistik.tu-dortmund.de  Mon Sep 11 09:08:46 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Mon, 11 Sep 2017 09:08:46 +0200
Subject: [R-pkg-devel] CRAN submission never published
In-Reply-To: <CAFDcVCT5ExXKjMka71F7oBEd5sTOz0Rv_dTVR_V95veN7aNeag@mail.gmail.com>
References: <CAHZ=-tEE-baZSMCWfxf4tAYLf=YxRGzUCQxqnQsOyDLFiLbfuA@mail.gmail.com>
 <CAFDcVCT5ExXKjMka71F7oBEd5sTOz0Rv_dTVR_V95veN7aNeag@mail.gmail.com>
Message-ID: <62d9d0c8-720f-c385-42eb-bf869a10dba3@statistik.tu-dortmund.de>

Same from here, we have not had such a problem before, please resubmit 
the package (we do not have it any more) and send us additionally a 
separate mail to CRAN at ... at the same time citing this communication.

Best,
Uwe Ligges


On 11.09.2017 05:28, Henrik Bengtsson wrote:
> Looks like a hiccup to me - this never happened to me. I suggest
> sending cran at ... an email about this.  /Henrik
> 
> On Sun, Sep 10, 2017 at 4:02 AM, Jacob Long <jlongrc at gmail.com> wrote:
>> I noticed my package, jtools (
>> https://cran.r-project.org/web/packages/jtools/index.html), didn?t
>> increment its version number on CRAN after my most recent update. I
>> initially didn?t give it much thought, assuming I must have forgotten to
>> change it prior to my submission. Looking back through my records, though,
>> I now see that I did increment the version number but something odd
>> happened in the submission process.
>>
>> The version on CRAN (0.5.0) says it was updated on 8/8/2017. My email
>> records show I submitted 0.6.0 on 8/29/17 and got the following
>> confirmation after about 15 minutes:
>>
>>
>>
>> ?Dear maintainer,
>>
>> thanks, package jtools_0.6.0.tar.gz is on its way to CRAN now.
>>
>>
>>
>> Best regards,
>>
>> CRAN teams' auto-check service?
>>
>>
>>
>> Now it does look like when I submitted it in the past, I would receive an
>> email a day later from Uwe Ligges informing me the Windows binary had been
>> built and was headed to CRAN. I never received that follow-up for the
>> 8/29/17 submission nor any other kind of follow-up.
>>
>>
>>
>> Any idea what happened with that update? I?ve submitted a new update about
>> 12 hours ago and received the same ?on its way to CRAN now? message though
>> it still hasn?t published to CRAN yet either. This is still in the normal
>> window of time that CRAN can take to push an update to the public-facing
>> servers, but given what happened with my previous update I wonder if I?m
>> making some kind of rookie mistake (I?ve published 4 other updates without
>> issue previously).
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ligges at statistik.tu-dortmund.de  Mon Sep 11 09:24:46 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Mon, 11 Sep 2017 09:24:46 +0200
Subject: [R-pkg-devel] README.Rmd and associated figure files
In-Reply-To: <CANLFJPrHhFn1LG5K3GJxzuKkPP-AfZKtj4_0oBD6A7sbSksLEw@mail.gmail.com>
References: <CANLFJPrHhFn1LG5K3GJxzuKkPP-AfZKtj4_0oBD6A7sbSksLEw@mail.gmail.com>
Message-ID: <2128dd44-bbc7-390c-fcf0-0176edbb2d53@statistik.tu-dortmund.de>

Hi,

If the images are also used for vignettes or Rd files, you can put them
in the 'vignettes' or 'man/figures' directories. Otherwise, please put
them in the top-level 'tools' directory, or a subdirectory of it.

Best,
Uwe Ligges


On 10.09.2017 00:15, Baptiste Auguie wrote:
> Hi,
> 
> I'm not sure what to do with README.Rmd; I followed Hadley's instructions*
> at http://r-pkgs.had.co.nz/release.html but I'm getting a Warning from CRAN
> (missing figure files). Writing R Extensions does not seem to mention this
> particular way of generating a README.md file (and in fact, mildly
> discourages README.md, see https://cran.r-project.org/
> doc/manuals/r-release/R-exts.html#FOOT2). Here's what I've done:
> 
> - top level README.Rmd file with knitr option fig.path = "README-"
> - ^README\.Rmd$ and  ^README-.*\.png$ added in .Rbuildignore
> 
> as a result, R CMD build creates README.md, and removes the associated
> figures and Rmd source file. However CRAN issues a Warning that the png
> files are missing.
> 
> So my next step has been to remove ^README-.*\.png$ from .Rbuildignore, but
> that yields a NOTE: "Non-standard files/directories found at top level:
> ...<pngs>"
> 
> I thought perhaps this should go in .Rinstignore, but that yields the same
> NOTE.
> 
> What is the proper way to deal with these image files? (pointing fig.path
> to inst/ doesn't seem like an option either, as it will break the paths).
> 
> Has there been a recent change in how README.Rmd files are processed? (I
> did not find this step documented in WRE). I looked at a few packages and
> they seem to follow the model recommended in Hadley's r-pkgs resource, so
> presumably it used to work without warnings.
> 
> Thanks,
> 
> baptiste
> 
> 
> *: I realise this is not an official documentation; however, from a
> pragmatic point of view, it would seem mutually beneficial if
> recommendations could somehow be kept in sync between this document and
> official CRAN policies.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From pamela.russell.ucdenver at gmail.com  Mon Sep 11 16:42:08 2017
From: pamela.russell.ucdenver at gmail.com (Pamela Russell)
Date: Mon, 11 Sep 2017 08:42:08 -0600
Subject: [R-pkg-devel] Skip running vignette code with package submission
Message-ID: <CALPSvOtvPSPmYqUCP_f_gJiXopM5HbExbCE2BiK4ApM2TyJG6w@mail.gmail.com>

Hi,

I'm wondering if it's possible to have the CRAN maintainers skip running
the code in my vignettes along with R CMD CHECK. I've developed a package
that wraps a REST API for which authentication is required. My code fails
with a helpful error message if the user does not have a valid API key
installed locally.

I've instructed CRAN to skip the code in my tests (with skip_on_cran()) and
examples (with \dontrun{}), but I can't figure out how to ask them to skip
running the code in my vignettes. Therefore, with my submission, R CMD
CHECK fails with a WARNING:

* checking re-building of vignette outputs ... [3s] WARNING
Error in re-building vignettes:
  ...
Quitting from lines 56-58 (introduction.Rmd)
Error: processing vignette 'introduction.Rmd' failed with diagnostics:
Please request and store a valid API key (instructions:
https://github.com/pamelarussell/TCIApathfinder)
Execution halted

I included a comment about this along with my package submission, but I
believe no human saw it as the package failed an automatic check.

My package source is at https://github.com/pamelarussell/TCIApathfinder.

Thanks,
Pam Russell



-----------------------------------------------------------
Pamela Russell
Research Instructor
Department of Biostatistics and Informatics
Colorado School of Public Health
pamela.russell at ucdenver.edu

	[[alternative HTML version deleted]]


From i.ucar86 at gmail.com  Mon Sep 11 17:05:45 2017
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Mon, 11 Sep 2017 17:05:45 +0200
Subject: [R-pkg-devel] Skip running vignette code with package submission
In-Reply-To: <CALPSvOtvPSPmYqUCP_f_gJiXopM5HbExbCE2BiK4ApM2TyJG6w@mail.gmail.com>
References: <CALPSvOtvPSPmYqUCP_f_gJiXopM5HbExbCE2BiK4ApM2TyJG6w@mail.gmail.com>
Message-ID: <CALEXWq3VNk_iw-JCscW+C--SUOfQ70z85e3tb-hxe9_WpViiVw@mail.gmail.com>

Hi,

2017-09-11 16:42 GMT+02:00 Pamela Russell <pamela.russell.ucdenver at gmail.com>:
> Hi,
>
> I'm wondering if it's possible to have the CRAN maintainers skip running
> the code in my vignettes along with R CMD CHECK. I've developed a package
> that wraps a REST API for which authentication is required. My code fails
> with a helpful error message if the user does not have a valid API key
> installed locally.

You can conditionally disable your chunks with
knitr::opts_chunk$set(eval = FALSE), as in
https://github.com/r-simmer/simmer/blob/master/vignettes/simmer-03-trajectories.Rmd

This method is further developed in this R Journal article:
https://journal.r-project.org/archive/2017/RJ-2017-026/index.html

Regards,
I?aki


From pamela.russell.ucdenver at gmail.com  Mon Sep 11 18:23:08 2017
From: pamela.russell.ucdenver at gmail.com (Pamela Russell)
Date: Mon, 11 Sep 2017 10:23:08 -0600
Subject: [R-pkg-devel] Skip running vignette code with package submission
In-Reply-To: <CALEXWq3VNk_iw-JCscW+C--SUOfQ70z85e3tb-hxe9_WpViiVw@mail.gmail.com>
References: <CALPSvOtvPSPmYqUCP_f_gJiXopM5HbExbCE2BiK4ApM2TyJG6w@mail.gmail.com>
 <CALEXWq3VNk_iw-JCscW+C--SUOfQ70z85e3tb-hxe9_WpViiVw@mail.gmail.com>
Message-ID: <CALPSvOt_x-kDFFu0PWnse-VepBeW1ciMdKs6549sYNryu9Nq-A@mail.gmail.com>

Thanks so much, this is working.


-----------------------------------------------------------
Pamela Russell
Research Instructor
Department of Biostatistics and Informatics
Colorado School of Public Health
pamela.russell at ucdenver.edu

On Mon, Sep 11, 2017 at 9:05 AM, I?aki ?car <i.ucar86 at gmail.com> wrote:

> Hi,
>
> 2017-09-11 16:42 GMT+02:00 Pamela Russell <pamela.russell.ucdenver@
> gmail.com>:
> > Hi,
> >
> > I'm wondering if it's possible to have the CRAN maintainers skip running
> > the code in my vignettes along with R CMD CHECK. I've developed a package
> > that wraps a REST API for which authentication is required. My code fails
> > with a helpful error message if the user does not have a valid API key
> > installed locally.
>
> You can conditionally disable your chunks with
> knitr::opts_chunk$set(eval = FALSE), as in
> https://github.com/r-simmer/simmer/blob/master/vignettes/
> simmer-03-trajectories.Rmd
>
> This method is further developed in this R Journal article:
> https://journal.r-project.org/archive/2017/RJ-2017-026/index.html
>
> Regards,
> I?aki
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From baptiste.auguie at gmail.com  Mon Sep 11 22:02:23 2017
From: baptiste.auguie at gmail.com (Baptiste Auguie)
Date: Tue, 12 Sep 2017 08:02:23 +1200
Subject: [R-pkg-devel] README.Rmd and associated figure files
In-Reply-To: <2128dd44-bbc7-390c-fcf0-0176edbb2d53@statistik.tu-dortmund.de>
References: <CANLFJPrHhFn1LG5K3GJxzuKkPP-AfZKtj4_0oBD6A7sbSksLEw@mail.gmail.com>
 <2128dd44-bbc7-390c-fcf0-0176edbb2d53@statistik.tu-dortmund.de>
Message-ID: <CANLFJPp=SHeFKHd6zxL3woGavBudG+KoO8zFssB_eMFH-_rLVA@mail.gmail.com>

Hi,

Thanks all, that was helpful. I believe it would be worth an extra footnote
in Writing R Extensions, as such files are getting more and more widespread
in practice.

Thanks,
Baptiste

On 11/09/2017 19:24, "Uwe Ligges" <ligges at statistik.tu-dortmund.de> wrote:

> Hi,
>
> If the images are also used for vignettes or Rd files, you can put them
> in the 'vignettes' or 'man/figures' directories. Otherwise, please put
> them in the top-level 'tools' directory, or a subdirectory of it.
>
> Best,
> Uwe Ligges
>
>
> On 10.09.2017 00:15, Baptiste Auguie wrote:
>
>> Hi,
>>
>> I'm not sure what to do with README.Rmd; I followed Hadley's instructions*
>> at http://r-pkgs.had.co.nz/release.html but I'm getting a Warning from
>> CRAN
>> (missing figure files). Writing R Extensions does not seem to mention this
>> particular way of generating a README.md file (and in fact, mildly
>> discourages README.md, see https://cran.r-project.org/
>> doc/manuals/r-release/R-exts.html#FOOT2). Here's what I've done:
>>
>> - top level README.Rmd file with knitr option fig.path = "README-"
>> - ^README\.Rmd$ and  ^README-.*\.png$ added in .Rbuildignore
>>
>> as a result, R CMD build creates README.md, and removes the associated
>> figures and Rmd source file. However CRAN issues a Warning that the png
>> files are missing.
>>
>> So my next step has been to remove ^README-.*\.png$ from .Rbuildignore,
>> but
>> that yields a NOTE: "Non-standard files/directories found at top level:
>> ...<pngs>"
>>
>> I thought perhaps this should go in .Rinstignore, but that yields the same
>> NOTE.
>>
>> What is the proper way to deal with these image files? (pointing fig.path
>> to inst/ doesn't seem like an option either, as it will break the paths).
>>
>> Has there been a recent change in how README.Rmd files are processed? (I
>> did not find this step documented in WRE). I looked at a few packages and
>> they seem to follow the model recommended in Hadley's r-pkgs resource, so
>> presumably it used to work without warnings.
>>
>> Thanks,
>>
>> baptiste
>>
>>
>> *: I realise this is not an official documentation; however, from a
>> pragmatic point of view, it would seem mutually beneficial if
>> recommendations could somehow be kept in sync between this document and
>> official CRAN policies.
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Wed Sep 13 09:21:09 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 13 Sep 2017 09:21:09 +0200
Subject: [R-pkg-devel] CRAN incoming checks / winbuilder on demand results
	for R-devel
Message-ID: <22f4b802-f4de-cf1d-c8c8-80b40c0f328e@statistik.tu-dortmund.de>

Dear package developers,

given some very recent changes in R-devel, many packages under R-devel 
have to be reinstalled. Due to maintainance work on CRAN we probably 
won't process submissions today. R-devel results from winbuilder will be 
flaky at least during the next 10 hours.

Best,
Uwe Ligges


From russell-lenth at uiowa.edu  Wed Sep 13 21:00:03 2017
From: russell-lenth at uiowa.edu (Lenth, Russell V)
Date: Wed, 13 Sep 2017 19:00:03 +0000
Subject: [R-pkg-devel] Migrating a package name
Message-ID: <CO2PR04MB220091707F0331006CD7E31FF16E0@CO2PR04MB2200.namprd04.prod.outlook.com>

Hello,

I have a package 'lsmeans' (for "least-squares means") for follow-up analyses of models; and it has become increasingly clear to me that its name is archaic and misleading. It works for GLMs, ordinal and count regression, Bayesian models fitted using MCMC, and all sorts of other models that may or may not have been fitted by least squares. A better term for what the package does is "estimated marginal means" -- a term has become widely accepted. 

In my own recent development version of 'lsmeans', I have changed all kinds of internal stuff, and the primary user functions are now emmeans() and such. I also have written wrappers so that an existing user can still run the same analyses they did before with the same function calls. For example, the lsmeans() function runs emmeans() and changes the column labels in the results. The wrappers actually work: all the old example code and vignette examples run and produce the same results as before. But 'lsmeans::emmeans()' just doesn't look good. I'd like to rename the package 'emmeans'.

Here's what I propose to do:

  -- After thorough checking, submit a new 'emmeans' package to CRAN that has the same (a bit more) functionality as the current 'lsmeans'.

  -- Shortly thereafter, submit a revised 'lsmeans' package that consists just of the wrappers and minimal documentation. It will depend on 'emmeans'.

  -- Perhaps eventually remove 'lsmeans' (but it will be a very small package anyway)

This ensures continuity for current 'lsmeans' users, allows for migrating to the new name, and avoids having two packages on CRAN that do the same thing, except for the brief transition period.

Are there any additional issues I need to consider, and is this OK per CRAN policies?

Russ

Russell V. Lenth? -? Professor Emeritus
Department of Statistics and Actuarial Science?? 
The University of Iowa ?-? Iowa City, IA 52242? USA?? 
Voice (319)335-0712 (Dept. office)? -? FAX (319)335-3017


From sme at iysik.com  Thu Sep 14 15:20:57 2017
From: sme at iysik.com (=?UTF-8?Q?Stefan_McKinnon_H=C3=B8j=2DEdwards?=)
Date: Thu, 14 Sep 2017 14:20:57 +0100
Subject: [R-pkg-devel] Write and print Fortran commands yields Note in R CMD
	check
Message-ID: <CAHJFP8Q_ogAyMRuLc7nL9qfN87DedLFw6gEqW9-NKPdgNMN_DQ@mail.gmail.com>

Dear all,

I am in the process of preparing a R-package that uses Fortran subroutines,
and upon R CMD check (both local and on win-builder), I receive the
following Note:

File 'Siccuracy/libs/i386/Siccuracy.dll':
  Found '_gfortran_st_write', possibly from 'write' (Fortran), 'print'
    (Fortran)
    Objects: 'converters.o', 'mutate_chips.o', 'plink.o'


I use the write command in two ways: 1) writing to a file, and 2)
convert a numeric value to a string.

For 1), it is the usual 'write(unit=int, fmt) vars'.

For 2), the 'write(nChar,*) ncol' is required for integer 'ncol' and
character 'nChar'.


These instances are the only occurrences of 'write' and 'print'. Can I
ignore this Note?


Kindly,
Stefan McKinnon H?j-Edwards
ph.d. Genetics
+44 (0)776 231 2464
+45 2888 6598
Twitter: @iysik_com

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Thu Sep 14 16:27:33 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 14 Sep 2017 10:27:33 -0400
Subject: [R-pkg-devel] Write and print Fortran commands yields Note in R
 CMD check
In-Reply-To: <CAHJFP8Q_ogAyMRuLc7nL9qfN87DedLFw6gEqW9-NKPdgNMN_DQ@mail.gmail.com>
References: <CAHJFP8Q_ogAyMRuLc7nL9qfN87DedLFw6gEqW9-NKPdgNMN_DQ@mail.gmail.com>
Message-ID: <e5921d53-0b0f-f6af-473c-8f403bf9aa83@gmail.com>

On 14/09/2017 9:20 AM, Stefan McKinnon H?j-Edwards wrote:
> Dear all,
> 
> I am in the process of preparing a R-package that uses Fortran subroutines,
> and upon R CMD check (both local and on win-builder), I receive the
> following Note:
> 
> File 'Siccuracy/libs/i386/Siccuracy.dll':
>    Found '_gfortran_st_write', possibly from 'write' (Fortran), 'print'
>      (Fortran)
>      Objects: 'converters.o', 'mutate_chips.o', 'plink.o'
> 
> 
> I use the write command in two ways: 1) writing to a file, and 2)
> convert a numeric value to a string.
> 
> For 1), it is the usual 'write(unit=int, fmt) vars'.
> 
> For 2), the 'write(nChar,*) ncol' is required for integer 'ncol' and
> character 'nChar'.
> 
> 
> These instances are the only occurrences of 'write' and 'print'. Can I
> ignore this Note?
> 

I suspect not.  The Writing R Extensions manual describes the problem: 
Fortran I/O initialization can interfere with the C I/O used by R.

This won't happen on all platforms, so it's really difficult for you to 
be sure your uses are safe.

The recommended way to handle this is to do all the I/O in R or C code.

Duncan Murdoch


From sme at iysik.com  Thu Sep 14 16:56:00 2017
From: sme at iysik.com (=?UTF-8?Q?Stefan_McKinnon_H=C3=B8j=2DEdwards?=)
Date: Thu, 14 Sep 2017 15:56:00 +0100
Subject: [R-pkg-devel] Write and print Fortran commands yields Note in R
 CMD check
In-Reply-To: <e5921d53-0b0f-f6af-473c-8f403bf9aa83@gmail.com>
References: <CAHJFP8Q_ogAyMRuLc7nL9qfN87DedLFw6gEqW9-NKPdgNMN_DQ@mail.gmail.com>
 <e5921d53-0b0f-f6af-473c-8f403bf9aa83@gmail.com>
Message-ID: <CAHJFP8RbKz2oWK1MjRjLFbr+-HDTG0awoE1RUAX7OmFVmGS=mg@mail.gmail.com>

Oh. I was under the impression the risk of interference was only for stdout
and stderr.

I suspect the affected Fortran subroutines should be re-written in R or C.
Is writing to files with Rcpp affected by the interference?
Or would it be feasible to have the Fortran subroutine call a C subroutine
for writing to files?

Thanks in advance,
Stefan

Stefan McKinnon H?j-Edwards
ph.d. Genetics
+44 (0)776 231 2464
+45 2888 6598
Skype: stefan_edwards

2017-09-14 15:27 GMT+01:00 Duncan Murdoch <murdoch.duncan at gmail.com>:

> On 14/09/2017 9:20 AM, Stefan McKinnon H?j-Edwards wrote:
>
>> Dear all,
>>
>> I am in the process of preparing a R-package that uses Fortran
>> subroutines,
>> and upon R CMD check (both local and on win-builder), I receive the
>> following Note:
>>
>> File 'Siccuracy/libs/i386/Siccuracy.dll':
>>    Found '_gfortran_st_write', possibly from 'write' (Fortran), 'print'
>>      (Fortran)
>>      Objects: 'converters.o', 'mutate_chips.o', 'plink.o'
>>
>>
>> I use the write command in two ways: 1) writing to a file, and 2)
>> convert a numeric value to a string.
>>
>> For 1), it is the usual 'write(unit=int, fmt) vars'.
>>
>> For 2), the 'write(nChar,*) ncol' is required for integer 'ncol' and
>> character 'nChar'.
>>
>>
>> These instances are the only occurrences of 'write' and 'print'. Can I
>> ignore this Note?
>>
>>
> I suspect not.  The Writing R Extensions manual describes the problem:
> Fortran I/O initialization can interfere with the C I/O used by R.
>
> This won't happen on all platforms, so it's really difficult for you to be
> sure your uses are safe.
>
> The recommended way to handle this is to do all the I/O in R or C code.
>
> Duncan Murdoch
>

	[[alternative HTML version deleted]]


From edd at debian.org  Thu Sep 14 17:24:56 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 14 Sep 2017 10:24:56 -0500
Subject: [R-pkg-devel] Write and print Fortran commands yields Note in R
 CMD check
In-Reply-To: <CAHJFP8RbKz2oWK1MjRjLFbr+-HDTG0awoE1RUAX7OmFVmGS=mg@mail.gmail.com>
References: <CAHJFP8Q_ogAyMRuLc7nL9qfN87DedLFw6gEqW9-NKPdgNMN_DQ@mail.gmail.com>
 <e5921d53-0b0f-f6af-473c-8f403bf9aa83@gmail.com>
 <CAHJFP8RbKz2oWK1MjRjLFbr+-HDTG0awoE1RUAX7OmFVmGS=mg@mail.gmail.com>
Message-ID: <22970.40776.106253.738994@bud.eddelbuettel.com>


On 14 September 2017 at 15:56, Stefan McKinnon H?j-Edwards wrote:
| Oh. I was under the impression the risk of interference was only for stdout
| and stderr.
| 
| I suspect the affected Fortran subroutines should be re-written in R or C.
| Is writing to files with Rcpp affected by the interference?

As you mention Rcpp: we adhere to the manual and redirect to the C facilities
of the R API.  Ie in

    Rcpp::Rcout << "Hello, world\n";

it only looks like streams. In reality, a very clever trick sent to us by
Jelmer many many moons ago turns into a call to Rprintf().
    
| Or would it be feasible to have the Fortran subroutine call a C subroutine
| for writing to files?

Possibly. It's all about avoiding Kurt's regexps :)

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From jtelleriar at gmail.com  Sun Sep 17 00:24:47 2017
From: jtelleriar at gmail.com (Juan Telleria)
Date: Sun, 17 Sep 2017 00:24:47 +0200
Subject: [R-pkg-devel] New Package Proposal: Feather with Matrix Notation (
	[ , ] $ ) Access
In-Reply-To: <CANNd7=nDPhuKZaZjs9PNeypeEbz3KfDQF3tYGEDz=Skp_4uyoQ@mail.gmail.com>
References: <CANNd7=nDPhuKZaZjs9PNeypeEbz3KfDQF3tYGEDz=Skp_4uyoQ@mail.gmail.com>
Message-ID: <CANNd7=nN=NkV_fa_CUP9mirC6hP6nfuW1qvpPkS4hzf0DPzgyA@mail.gmail.com>

Dear R Developers,

I am writing as I would like to propose a github project for the creation
of on-disk data.frames/tibbles.

These new S3 class, could be based on feathers (which have a columnar
structure for saving data), which would allow the use of matrix notation or
$ symbols for individual column access, as if they where regular in-memory
data.frames.

The feather github project link is on the following page:
https://github.com/wesm/feather

SparkR Apache project, as I have been told in R-devel, offers a similar
functionality, but the point is to extend it for feathers:

https://spark.apache.org/docs/latest/sparkr.html

Anyone would be interested in such project?

Kind regards,
Juan

	[[alternative HTML version deleted]]


From mark.vanderloo at gmail.com  Sun Sep 17 10:13:38 2017
From: mark.vanderloo at gmail.com (Mark van der Loo)
Date: Sun, 17 Sep 2017 08:13:38 +0000
Subject: [R-pkg-devel] New Package Proposal: Feather with Matrix
 Notation ( [ , ] $ ) Access
In-Reply-To: <CANNd7=nN=NkV_fa_CUP9mirC6hP6nfuW1qvpPkS4hzf0DPzgyA@mail.gmail.com>
References: <CANNd7=nDPhuKZaZjs9PNeypeEbz3KfDQF3tYGEDz=Skp_4uyoQ@mail.gmail.com>
 <CANNd7=nN=NkV_fa_CUP9mirC6hP6nfuW1qvpPkS4hzf0DPzgyA@mail.gmail.com>
Message-ID: <CAOKDuOjT5_dZg21q9wuBtHkuQPZxBay7dotTN8YzG_zzxY+Kfg@mail.gmail.com>

You could first have a look at the LaF packge. It does a lot of what you
want already.
-M

Op zo 17 sep. 2017 om 04:41 schreef Juan Telleria <jtelleriar at gmail.com>:

> Dear R Developers,
>
> I am writing as I would like to propose a github project for the creation
> of on-disk data.frames/tibbles.
>
> These new S3 class, could be based on feathers (which have a columnar
> structure for saving data), which would allow the use of matrix notation or
> $ symbols for individual column access, as if they where regular in-memory
> data.frames.
>
> The feather github project link is on the following page:
> https://github.com/wesm/feather
>
> SparkR Apache project, as I have been told in R-devel, offers a similar
> functionality, but the point is to extend it for feathers:
>
> https://spark.apache.org/docs/latest/sparkr.html
>
> Anyone would be interested in such project?
>
> Kind regards,
> Juan
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From robert.dodier at gmail.com  Sun Sep 17 21:35:53 2017
From: robert.dodier at gmail.com (Robert Dodier)
Date: Sun, 17 Sep 2017 12:35:53 -0700
Subject: [R-pkg-devel] Questions about third-party package distribution,
 especially with respect to security
Message-ID: <CAAsY_sQGQQhZjt4Rpw5pm9qZPzRjux9L7p+DjacRFixT7U4q-Q@mail.gmail.com>

Hi, people other than the R developers can create packages which use R
to do interesting things. I gather such packages are mostly
distributed via CRAN, is that right? I am curious to know about the
process for approving such packages.

How much effort goes into reviewing and vetting packages? Is there any
process for approving packages before publication? Have any security
problems ever been encountered in third-party packages? Does the
package distributor make any statements as to guarantees about
security or the lack of them?

The reason I ask these questions is that we are debating package
distribution over in the Maxima project, and I would just like to
check in and see what you have encountered and how it has been
resolved. Thanks for any light you can shed on this topic.

best,

Robert Dodier
Maxima project administrator and developer


From mark.vanderloo at gmail.com  Mon Sep 18 05:57:02 2017
From: mark.vanderloo at gmail.com (Mark van der Loo)
Date: Mon, 18 Sep 2017 03:57:02 +0000
Subject: [R-pkg-devel] Questions about third-party package distribution,
 especially with respect to security
In-Reply-To: <CAAsY_sQGQQhZjt4Rpw5pm9qZPzRjux9L7p+DjacRFixT7U4q-Q@mail.gmail.com>
References: <CAAsY_sQGQQhZjt4Rpw5pm9qZPzRjux9L7p+DjacRFixT7U4q-Q@mail.gmail.com>
Message-ID: <CAOKDuOhyg7VCAtvBwjm6wvYL+=VpnLqY9qQ42YWMGnaeUQwavg@mail.gmail.com>

Dear Robert,

R supports package repositories out of the box. A repository is just a way
of organizing files. The most popular repositories are CRAN and
Bioconductor. There is even a package that allows you to set up your own
repository on Github (the drat package).

It depends on the repository maintainer if and how things are checked. My
experience is limited to CRAN, so I'll comment on that.

The main point of reference is the CRAN repository policy:
https://cran.r-project.org/web/packages/policies.html

Before a package is accepted, CRAN performs an extensive number of
automated checks, ranging from whether code is valid R, to running coded
examples and unit tests (if any). Also, some consistency between exported
functionality and documentation is enforced. When packages are submitted
the first time, there is also some manual checking regarding intellectual
property. Importantly, packages that are updated are not allowed to break
any package depending on them. This is checked as well.

For an introduction to CRAN it is also worth checking out Uwe Ligges'
keynote at this year's useR! conference.
https://channel9.msdn.com/Events/useR-international-R-User-conferences/useR-International-R-User-2017-Conference/KEYNOTE-20-years-of-CRAN


Best,
-M





Op zo 17 sep. 2017 om 21:56 schreef Robert Dodier <robert.dodier at gmail.com>:

> Hi, people other than the R developers can create packages which use R
> to do interesting things. I gather such packages are mostly
> distributed via CRAN, is that right? I am curious to know about the
> process for approving such packages.
>
> How much effort goes into reviewing and vetting packages? Is there any
> process for approving packages before publication? Have any security
> problems ever been encountered in third-party packages? Does the
> package distributor make any statements as to guarantees about
> security or the lack of them?
>
> The reason I ask these questions is that we are debating package
> distribution over in the Maxima project, and I would just like to
> check in and see what you have encountered and how it has been
> resolved. Thanks for any light you can shed on this topic.
>
> best,
>
> Robert Dodier
> Maxima project administrator and developer
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From profjcnash at gmail.com  Mon Sep 18 14:41:33 2017
From: profjcnash at gmail.com (J C Nash)
Date: Mon, 18 Sep 2017 08:41:33 -0400
Subject: [R-pkg-devel] Advice on dealing with absent dependencies
Message-ID: <42b426e1-9ad3-c11c-3535-102fb1a38dab@gmail.com>

Although I have been working with R for quite a while, I still find some issues
of dependencies troubling. In particular, my optimr package is set up to allow
users to access many function minimization tools via a single wrapper. In the past
I've had notices from CRAN to fix things when called packages fail. To avoid such
messages, the CRAN version has a limited set of solvers, and I've put the full
version (optimrx) on R-forge.

I'm now thinking I should try to adjust optimr so that it works with all the solvers
it has available (a user may not want to install them all, for example), and does
not give more than a warning when one or more is unavailable.

Can someone point me to best practise for doing this sort of conditional operation?
While I've some ideas, I'd prefer to do things right and not give the CRAN
admins any extra work. Assuming I succeed, I'll happily prepare a write-up if one
is not available.

Cheers,

John Nash


From edd at debian.org  Mon Sep 18 15:43:52 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Mon, 18 Sep 2017 08:43:52 -0500
Subject: [R-pkg-devel] Advice on dealing with absent dependencies
In-Reply-To: <42b426e1-9ad3-c11c-3535-102fb1a38dab@gmail.com>
References: <42b426e1-9ad3-c11c-3535-102fb1a38dab@gmail.com>
Message-ID: <22975.52632.76458.747700@bud.eddelbuettel.com>


http://dirk.eddelbuettel.com/blog/2017/03/22#suggests_is_not_depends

For a decent (and long-standing) example in code, see the R Commander.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ht at heatherturner.net  Mon Sep 18 23:38:02 2017
From: ht at heatherturner.net (Heather Turner)
Date: Mon, 18 Sep 2017 22:38:02 +0100
Subject: [R-pkg-devel] Build of PDF vignette fails on r-oldrel-osx-x86_64
Message-ID: <1505770682.1811345.1110362208.360FC452@webmail.messagingengine.com>

Dear All,

I am getting the NOTE below on my BradleyTerry2 package for
r-oldrel-osx-x86_64. Unfortunately I don't have access to a Mac and I
can't reproduce the error using R-hub.

checking re-building of vignette outputs ... NOTE
Error in re-building vignettes:
  ...
Warning in grepl("(Rerun to get|biblatex.*\\(re\\)run)", readLines(log,
:
  input string 434 is invalid in this locale
Warning in grepl("(Rerun to get|biblatex.*\\(re\\)run)", readLines(log,
:
  input string 435 is invalid in this locale
Warning in grepl("(Rerun to get|biblatex.*\\(re\\)run)", readLines(log,
:
  input string 443 is invalid in this locale
Error in texi2dvi(file = file, pdf = TRUE, clean = clean, quiet = quiet,
:
  Running 'texi2dvi' on 'BradleyTerry.tex' failed.
LaTeX errors:
! Undefined control sequence.
l.16
...<fa><ed>l^^B<d8>`L^^B<e5>;<a0><e7>7?y<df><fb><fe><bc><df><f7><bd>G_<b3>?<b3>K<ca><eb><9e>@o<e9>\<bc>
                                                  <d3>L<e7><e2><9d>f:^^W<ef>4?x<a7><99><ce><c5>;<cd>t.^^^...
The control sequence at the end of the top line
of your error message was never \def'ed. If you have
! Undefined control sequence.
l.20 ADL?\<ee>
            <e2><d4><d4>SO^^L|V<ad>^^F"^^Q<c9><d0><fd><ac><8e><d9>8]!<86>^^N<ef>Nx<eb>h<ef>^^^Lg<dc><f7><ce>8(<eb>*<b4>^^@X1<c6><e2><f1><b8>^^Pb~...
The control sequence at the end of the top line
of your error message was never \def'ed. If you have
! Undefined control sequence.
l.20
...<ab>U<bf><df>^^?<b0><84>^^R^Y<96>^^U<89>D<d0><e6><9c>?<9d>H$:^^_gO:<f7><bd><d3>Lg\<bc>
                                                  6<a1>%<93>?<cc><<ba><a1>^^C<b0><eb>^^Y<f7><bd><e3>?^^G...
The control sequence at the end of the top
Calls: buildVignettes -> texi2pdf -> texi2dvi
Execution halted

Googling the warning from grepl shows this is happening for a few other
packages, but looking at their vignettes hasn't given any clue as to the
problem. Lines 434 to 443 are unremarkable in the log file created when
I run texi2pdf on Ubuntu 14.04:

LaTeX Font Info:    ... okay on input line 71.
LaTeX Font Info:    Checking defaults for OT1/cmr/m/n on input line 71.
LaTeX Font Info:    ... okay on input line 71.
LaTeX Font Info:    Checking defaults for OMS/cmsy/m/n on input line 71.
LaTeX Font Info:    ... okay on input line 71.
LaTeX Font Info:    Checking defaults for OMX/cmex/m/n on input line 71.
LaTeX Font Info:    ... okay on input line 71.
LaTeX Font Info:    Checking defaults for U/cmr/m/n on input line 71.
LaTeX Font Info:    ... okay on input line 71.
LaTeX Font Info:    Checking defaults for TS1/cmr/m/n on input line 71.

Any ideas how to fix?

Thanks,

Heather


From d.luedecke at uke.de  Tue Sep 19 09:53:53 2017
From: d.luedecke at uke.de (=?iso-8859-1?Q?Daniel_L=FCdecke?=)
Date: Tue, 19 Sep 2017 09:53:53 +0200
Subject: [R-pkg-devel] Errors in Package Check Results due to package in
	Suggestions
Message-ID: <000e01d3311c$700a39c0$501ead40$@uke.de>

Hi,

I have a package on CRAN where most check results are OK except two with
errors (one of those two I'm already addressing).

However, the one of the errors
(https://www.r-project.org/nosvn/R.check/r-release-osx-x86_64/sjstats-00chec
k.html) is because I use the package "rstanarm" for one of the examples, and
running this example fails. What would be an appropriate way to deal with
this issue? My package does not depend on rstanarm, it's "just" a suggestion
because I needed it for the examples. I'm a bit unsure about the status of
these check results. When submitting a package, the maintainer is asked to
address issues from these checks, so I'd like to fix this error. I could, of
course, wrap the example into a "don't run"-section, but this seems to me
like a sloppy hack rather than a proper solution...

Best
Daniel


--

_____________________________________________________________________

Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr. Dr. Uwe Koch-Gromus, Joachim Pr?l?, Martina Saurin (komm.)
_____________________________________________________________________

SAVE PAPER - THINK BEFORE PRINTING


From josh.m.ulrich at gmail.com  Tue Sep 19 22:24:44 2017
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 19 Sep 2017 15:24:44 -0500
Subject: [R-pkg-devel] Errors in Package Check Results due to package in
	Suggestions
In-Reply-To: <000e01d3311c$700a39c0$501ead40$@uke.de>
References: <000e01d3311c$700a39c0$501ead40$@uke.de>
Message-ID: <CAPPM_gSDjMopGS0nAXtvU_GR-rZssypf6+2fczoUCjZ6c-WUUA@mail.gmail.com>

Hi Daniel,

See section 1.1.3.1 of Writing R Extensions:
https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Suggested-packages

On Tue, Sep 19, 2017 at 2:53 AM, Daniel L?decke <d.luedecke at uke.de> wrote:
> Hi,
>
> I have a package on CRAN where most check results are OK except two with
> errors (one of those two I'm already addressing).
>
> However, the one of the errors
> (https://www.r-project.org/nosvn/R.check/r-release-osx-x86_64/sjstats-00chec
> k.html) is because I use the package "rstanarm" for one of the examples, and
> running this example fails. What would be an appropriate way to deal with
> this issue? My package does not depend on rstanarm, it's "just" a suggestion
> because I needed it for the examples. I'm a bit unsure about the status of
> these check results. When submitting a package, the maintainer is asked to
> address issues from these checks, so I'd like to fix this error. I could, of
> course, wrap the example into a "don't run"-section, but this seems to me
> like a sloppy hack rather than a proper solution...
>
> Best
> Daniel
>
>
> --
>
> _____________________________________________________________________
>
> Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
> Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr. Dr. Uwe Koch-Gromus, Joachim Pr?l?, Martina Saurin (komm.)
> _____________________________________________________________________
>
> SAVE PAPER - THINK BEFORE PRINTING
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com
R/Finance 2017 | www.rinfinance.com


From i.ucar86 at gmail.com  Tue Sep 19 22:49:34 2017
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Tue, 19 Sep 2017 22:49:34 +0200
Subject: [R-pkg-devel] Errors in Package Check Results due to package in
	Suggestions
In-Reply-To: <000e01d3311c$700a39c0$501ead40$@uke.de>
References: <000e01d3311c$700a39c0$501ead40$@uke.de>
Message-ID: <CALEXWq1aLVbN79ineAt5YB62V+QNCp1YTyhFGmZa3a=YVgKjCA@mail.gmail.com>

Hi,

It's not only your test, but the rstanarm package is erroring in most
flavours: https://cran.r-project.org/web/checks/check_results_rstanarm.html

You should alert the maintainer.

Regards,
I?aki

2017-09-19 9:53 GMT+02:00 Daniel L?decke <d.luedecke at uke.de>:

> Hi,
>
> I have a package on CRAN where most check results are OK except two with
> errors (one of those two I'm already addressing).
>
> However, the one of the errors
> (https://www.r-project.org/nosvn/R.check/r-release-osx-
> x86_64/sjstats-00chec
> k.html) is because I use the package "rstanarm" for one of the examples,
> and
> running this example fails. What would be an appropriate way to deal with
> this issue? My package does not depend on rstanarm, it's "just" a
> suggestion
> because I needed it for the examples. I'm a bit unsure about the status of
> these check results. When submitting a package, the maintainer is asked to
> address issues from these checks, so I'd like to fix this error. I could,
> of
> course, wrap the example into a "don't run"-section, but this seems to me
> like a sloppy hack rather than a proper solution...
>
> Best
> Daniel
>
>
> --
>
> _____________________________________________________________________
>
> Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen
> Rechts; Gerichtsstand: Hamburg | www.uke.de
> Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr. Dr.
> Uwe Koch-Gromus, Joachim Pr?l?, Martina Saurin (komm.)
> _____________________________________________________________________
>
> SAVE PAPER - THINK BEFORE PRINTING
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
I?aki ?car
http://www.enchufa2.es
@Enchufa2 <https://twitter.com/#%21/Enchufa2>

	[[alternative HTML version deleted]]


From thierry.onkelinx at inbo.be  Wed Sep 20 14:45:08 2017
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Wed, 20 Sep 2017 14:45:08 +0200
Subject: [R-pkg-devel] loadMethod() not available with Rscript
Message-ID: <CAJuCY5wk2tN_zz4SZweR91apNeMQNv-FbLKb061kreguTv2wog@mail.gmail.com>

Dear all,

Could someone explain this to me? I have a simple script (see below).
my_function() is an S4 method. The package imports all functions from
methods that it uses.

When I run the script in a vanilla R session it works. When using
Rscript I get the error: Error in loadMethod(function (x, ...)  :
could not find function "loadMethod"

loadMethod() is NOT used in mypackage and not imported.

library(mypackage)
my_function()

Best regards,

ir. Thierry Onkelinx
Statisticus/ Statiscian

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
AND FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Kliniekstraat 25, B-1070 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no
more than asking him to perform a post-mortem examination: he may be
able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does
not ensure that a reasonable answer can be extracted from a given body
of data. ~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////


Van 14 tot en met 19 december 2017 verhuizen we uit onze vestiging in
Brussel naar het Herman Teirlinckgebouw op de site Thurn & Taxis.
Vanaf dan ben je welkom op het nieuwe adres: Havenlaan 88 bus 73, 1000 Brussel.


From josh.m.ulrich at gmail.com  Wed Sep 20 14:48:10 2017
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 20 Sep 2017 07:48:10 -0500
Subject: [R-pkg-devel] loadMethod() not available with Rscript
In-Reply-To: <CAJuCY5wk2tN_zz4SZweR91apNeMQNv-FbLKb061kreguTv2wog@mail.gmail.com>
References: <CAJuCY5wk2tN_zz4SZweR91apNeMQNv-FbLKb061kreguTv2wog@mail.gmail.com>
Message-ID: <CAPPM_gS-=pLJrb0rjR2v4QGvV84Hx=UJ5phV57Z8cdJk-SoRbQ@mail.gmail.com>

Hi Thierry,

On Wed, Sep 20, 2017 at 7:45 AM, Thierry Onkelinx
<thierry.onkelinx at inbo.be> wrote:
> Dear all,
>
> Could someone explain this to me? I have a simple script (see below).
> my_function() is an S4 method. The package imports all functions from
> methods that it uses.
>
> When I run the script in a vanilla R session it works. When using
> Rscript I get the error: Error in loadMethod(function (x, ...)  :
> could not find function "loadMethod"
>
> loadMethod() is NOT used in mypackage and not imported.
>
Rscript does not load/attach the "methods" package like is done in an
interactive R session.

Perhaps your package uses a package that needs methods::loadMethod(),
but does not import it correctly?

> library(mypackage)
> my_function()
>
> Best regards,
>
> ir. Thierry Onkelinx
> Statisticus/ Statiscian
>
> Vlaamse Overheid / Government of Flanders
> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
> AND FOREST
> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
> thierry.onkelinx at inbo.be
> Kliniekstraat 25, B-1070 Brussel
> www.inbo.be
>
> ///////////////////////////////////////////////////////////////////////////////////////////
> To call in the statistician after the experiment is done may be no
> more than asking him to perform a post-mortem examination: he may be
> able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
> The plural of anecdote is not data. ~ Roger Brinner
> The combination of some data and an aching desire for an answer does
> not ensure that a reasonable answer can be extracted from a given body
> of data. ~ John Tukey
> ///////////////////////////////////////////////////////////////////////////////////////////
>
>
> Van 14 tot en met 19 december 2017 verhuizen we uit onze vestiging in
> Brussel naar het Herman Teirlinckgebouw op de site Thurn & Taxis.
> Vanaf dan ben je welkom op het nieuwe adres: Havenlaan 88 bus 73, 1000 Brussel.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com
R/Finance 2017 | www.rinfinance.com


From thierry.onkelinx at inbo.be  Wed Sep 20 14:59:47 2017
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Wed, 20 Sep 2017 14:59:47 +0200
Subject: [R-pkg-devel] loadMethod() not available with Rscript
In-Reply-To: <CAPPM_gS-=pLJrb0rjR2v4QGvV84Hx=UJ5phV57Z8cdJk-SoRbQ@mail.gmail.com>
References: <CAJuCY5wk2tN_zz4SZweR91apNeMQNv-FbLKb061kreguTv2wog@mail.gmail.com>
 <CAPPM_gS-=pLJrb0rjR2v4QGvV84Hx=UJ5phV57Z8cdJk-SoRbQ@mail.gmail.com>
Message-ID: <CAJuCY5zvAz0q1pFoEZWbA+9rw=B45XkxBYyHn_=hVDAygha=iw@mail.gmail.com>

Dear Joshua,

Thanks for your prompt reply.

I had a look at all dependencies and none of them use loadMethod(). So
the culprit is probably one of their dependencies.

What would be the best way to deal with this? add library(methods) to
the script or import loadMethod() via the NAMESPACE?

Best regards,

ir. Thierry Onkelinx
Statisticus/ Statiscian

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
AND FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Kliniekstraat 25, B-1070 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no
more than asking him to perform a post-mortem examination: he may be
able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does
not ensure that a reasonable answer can be extracted from a given body
of data. ~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////


Van 14 tot en met 19 december 2017 verhuizen we uit onze vestiging in
Brussel naar het Herman Teirlinckgebouw op de site Thurn & Taxis.
Vanaf dan ben je welkom op het nieuwe adres: Havenlaan 88 bus 73, 1000 Brussel.

///////////////////////////////////////////////////////////////////////////////////////////



2017-09-20 14:48 GMT+02:00 Joshua Ulrich <josh.m.ulrich at gmail.com>:
> Hi Thierry,
>
> On Wed, Sep 20, 2017 at 7:45 AM, Thierry Onkelinx
> <thierry.onkelinx at inbo.be> wrote:
>> Dear all,
>>
>> Could someone explain this to me? I have a simple script (see below).
>> my_function() is an S4 method. The package imports all functions from
>> methods that it uses.
>>
>> When I run the script in a vanilla R session it works. When using
>> Rscript I get the error: Error in loadMethod(function (x, ...)  :
>> could not find function "loadMethod"
>>
>> loadMethod() is NOT used in mypackage and not imported.
>>
> Rscript does not load/attach the "methods" package like is done in an
> interactive R session.
>
> Perhaps your package uses a package that needs methods::loadMethod(),
> but does not import it correctly?
>
>> library(mypackage)
>> my_function()
>>
>> Best regards,
>>
>> ir. Thierry Onkelinx
>> Statisticus/ Statiscian
>>
>> Vlaamse Overheid / Government of Flanders
>> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
>> AND FOREST
>> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
>> thierry.onkelinx at inbo.be
>> Kliniekstraat 25, B-1070 Brussel
>> www.inbo.be
>>
>> ///////////////////////////////////////////////////////////////////////////////////////////
>> To call in the statistician after the experiment is done may be no
>> more than asking him to perform a post-mortem examination: he may be
>> able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
>> The plural of anecdote is not data. ~ Roger Brinner
>> The combination of some data and an aching desire for an answer does
>> not ensure that a reasonable answer can be extracted from a given body
>> of data. ~ John Tukey
>> ///////////////////////////////////////////////////////////////////////////////////////////
>>
>>
>> Van 14 tot en met 19 december 2017 verhuizen we uit onze vestiging in
>> Brussel naar het Herman Teirlinckgebouw op de site Thurn & Taxis.
>> Vanaf dan ben je welkom op het nieuwe adres: Havenlaan 88 bus 73, 1000 Brussel.
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>
> --
> Joshua Ulrich  |  about.me/joshuaulrich
> FOSS Trading  |  www.fosstrading.com
> R/Finance 2017 | www.rinfinance.com


From edd at debian.org  Wed Sep 20 16:45:56 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 20 Sep 2017 09:45:56 -0500
Subject: [R-pkg-devel] loadMethod() not available with Rscript
In-Reply-To: <CAJuCY5zvAz0q1pFoEZWbA+9rw=B45XkxBYyHn_=hVDAygha=iw@mail.gmail.com>
References: <CAJuCY5wk2tN_zz4SZweR91apNeMQNv-FbLKb061kreguTv2wog@mail.gmail.com>
 <CAPPM_gS-=pLJrb0rjR2v4QGvV84Hx=UJ5phV57Z8cdJk-SoRbQ@mail.gmail.com>
 <CAJuCY5zvAz0q1pFoEZWbA+9rw=B45XkxBYyHn_=hVDAygha=iw@mail.gmail.com>
Message-ID: <22978.32548.970900.175083@bud.eddelbuettel.com>


Thierry,

This has always been a considerable puzzle, and the source of some amusement,
to me.  It is a clear design bug in Rscript because _code that would
otherwise work_ will not if it happens to rely on library(methods). S4 comes
to mind.  This has also been answered at least a few times on SO.

Now, 'r' from littler always did this differently and lods methods, just like
R itself does.  And 'r' still starts (way) faster as I once documented in a
blog post.

If someone from R Core reads this and nods silently: please put this to rest
and make sure Rscript also loads the methods package.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From roy.mendelssohn at noaa.gov  Wed Sep 20 18:32:08 2017
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Wed, 20 Sep 2017 09:32:08 -0700
Subject: [R-pkg-devel] Storing Data Used in an Example
Message-ID: <A4ED8626-08DC-403A-9501-EA55636822F9@noaa.gov>

Hi All:

I have a package whose main function is to download environmental data using a service.  I have added some plot routines,  As it is, my examples of just the downloads push the CRAN limits on time,  so I want the plot examples to use data that has already been downloaded and stored as part of the package.

Questions:

1.  Most appropriate place to store the example data (they will be .RData files).

2.  What size of data set is considered to be getting too large to be appropriate to include in a package.

Thanks,

-Roy



**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From josh.m.ulrich at gmail.com  Wed Sep 20 18:37:18 2017
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 20 Sep 2017 11:37:18 -0500
Subject: [R-pkg-devel] Storing Data Used in an Example
In-Reply-To: <A4ED8626-08DC-403A-9501-EA55636822F9@noaa.gov>
References: <A4ED8626-08DC-403A-9501-EA55636822F9@noaa.gov>
Message-ID: <CAPPM_gRsUumcetpb3e2v1ftJkHCAER2+TE-CPTdcYbqTedcKOw@mail.gmail.com>

On Wed, Sep 20, 2017 at 11:32 AM, Roy Mendelssohn - NOAA Federal
<roy.mendelssohn at noaa.gov> wrote:
> Hi All:
>
> I have a package whose main function is to download environmental data using a service.  I have added some plot routines,  As it is, my examples of just the downloads push the CRAN limits on time,  so I want the plot examples to use data that has already been downloaded and stored as part of the package.
>
> Questions:
>
> 1.  Most appropriate place to store the example data (they will be .RData files).
>
https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Data-in-packages

> 2.  What size of data set is considered to be getting too large to be appropriate to include in a package.
>
The CRAN Repository Policy says:

"As a general rule, neither data nor documentation should exceed 5MB
(which covers several books). A CRAN package is not an appropriate way
to distribute course notes, and authors will be asked to trim their
documentation to a maximum of 5MB."

> Thanks,
>
> -Roy
>
>
>
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com
R/Finance 2017 | www.rinfinance.com


From plummerm at iarc.fr  Wed Sep 20 18:44:40 2017
From: plummerm at iarc.fr (Martyn Plummer)
Date: Wed, 20 Sep 2017 16:44:40 +0000
Subject: [R-pkg-devel] loadMethod() not available with Rscript
In-Reply-To: <22978.32548.970900.175083@bud.eddelbuettel.com>
References: <CAJuCY5wk2tN_zz4SZweR91apNeMQNv-FbLKb061kreguTv2wog@mail.gmail.com>
 <CAPPM_gS-=pLJrb0rjR2v4QGvV84Hx=UJ5phV57Z8cdJk-SoRbQ@mail.gmail.com>
 <CAJuCY5zvAz0q1pFoEZWbA+9rw=B45XkxBYyHn_=hVDAygha=iw@mail.gmail.com>
 <22978.32548.970900.175083@bud.eddelbuettel.com>
Message-ID: <1505925879.8344.28.camel@iarc.fr>

On Wed, 2017-09-20 at 09:45 -0500, Dirk Eddelbuettel wrote:
> Thierry,
> 
> This has always been a considerable puzzle, and the source of some amusement,
> to me.  It is a clear design bug in Rscript because _code that would
> otherwise work_ will not if it happens to rely on library(methods). S4 comes
> to mind.  This has also been answered at least a few times on SO.
> 
> Now, 'r' from littler always did this differently and lods methods, just like
> R itself does.  And 'r' still starts (way) faster as I once documented in a
> blog post.
> 
> If someone from R Core reads this and nods silently: please put this to rest
> and make sure Rscript also loads the methods package.

We have been here before, most recently in 2016

https://bugs.r-project.org/bugzilla/show_bug.cgi?id=16921

There are opinions on both sides, of course, but the decision rests in
the hands of those who use extensively for its original purpose (i.e.
running short snippets of R code) and for whom the overhead from
loading the methods package is still unacceptable, despite being
substantially reduced since this decision was made 10 years ago.

Martyn

> Dirk
> 

From roy.mendelssohn at noaa.gov  Wed Sep 20 18:54:23 2017
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Wed, 20 Sep 2017 09:54:23 -0700
Subject: [R-pkg-devel] Storing Data Used in an Example
In-Reply-To: <CAPPM_gRsUumcetpb3e2v1ftJkHCAER2+TE-CPTdcYbqTedcKOw@mail.gmail.com>
References: <A4ED8626-08DC-403A-9501-EA55636822F9@noaa.gov>
 <CAPPM_gRsUumcetpb3e2v1ftJkHCAER2+TE-CPTdcYbqTedcKOw@mail.gmail.com>
Message-ID: <D64B38E0-B6F4-48F2-BA6A-59C3C2FB3873@noaa.gov>

Thanks.

-Roy

> On Sep 20, 2017, at 9:37 AM, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> 
> On Wed, Sep 20, 2017 at 11:32 AM, Roy Mendelssohn - NOAA Federal
> <roy.mendelssohn at noaa.gov> wrote:
>> Hi All:
>> 
>> I have a package whose main function is to download environmental data using a service.  I have added some plot routines,  As it is, my examples of just the downloads push the CRAN limits on time,  so I want the plot examples to use data that has already been downloaded and stored as part of the package.
>> 
>> Questions:
>> 
>> 1.  Most appropriate place to store the example data (they will be .RData files).
>> 
> https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Data-in-packages
> 
>> 2.  What size of data set is considered to be getting too large to be appropriate to include in a package.
>> 
> The CRAN Repository Policy says:
> 
> "As a general rule, neither data nor documentation should exceed 5MB
> (which covers several books). A CRAN package is not an appropriate way
> to distribute course notes, and authors will be asked to trim their
> documentation to a maximum of 5MB."
> 
>> Thanks,
>> 
>> -Roy
>> 
>> 
>> 
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>> 
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected"
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> 
> -- 
> Joshua Ulrich  |  about.me/joshuaulrich
> FOSS Trading  |  www.fosstrading.com
> R/Finance 2017 | www.rinfinance.com

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From bagaria.siddhartha at gmail.com  Fri Sep 22 00:40:15 2017
From: bagaria.siddhartha at gmail.com (Siddhartha Bagaria)
Date: Thu, 21 Sep 2017 22:40:15 +0000
Subject: [R-pkg-devel] Announcing Bazel for R packages
Message-ID: <CAK68aVU1i=tZcJY_GKua6_AoXWz_88Qmoryeh8U4V2OdP6J=+g@mail.gmail.com>

Hello,

We have released some Bazel rules for R packages.
https://github.com/grailbio/rules_r

What is Bazel?

Bazel <https://bazel.build/> is an industry tested build system that can be
used for continuous integration and testing in large monorepos (multiple
software libraries as part of one repository).

When should you use Bazel for your R packages?

1. Continuous integration and testing
If your organization already uses Bazel, and you have R packages as part of
the same repo. These rules will run unit tests or R CMD check on changes to
your package, or any dependency as part of the same build system that your
organization uses. You can also deploy docker images with your R packages
installed in them as part of your continuous integration.

2. Reproducible builds
Using Bazel will force you to fix versions of your package dependencies,
and every build will be reproducible. Updates to package dependencies can
then be vetted and be done incrementally if desired. This is an alternative
to maintaining a private repository of CRAN/Bioc packages or using a CRAN
snapshot service.

If these do not concern you, then you should not consider Bazel because of
the additional complexity introduced.

I am happy to answer any questions you may have.

Thank you.

Sid

	[[alternative HTML version deleted]]


From edd at debian.org  Fri Sep 22 02:16:46 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 21 Sep 2017 19:16:46 -0500
Subject: [R-pkg-devel] loadMethod() not available with Rscript
In-Reply-To: <1505925879.8344.28.camel@iarc.fr>
References: <CAJuCY5wk2tN_zz4SZweR91apNeMQNv-FbLKb061kreguTv2wog@mail.gmail.com>
 <CAPPM_gS-=pLJrb0rjR2v4QGvV84Hx=UJ5phV57Z8cdJk-SoRbQ@mail.gmail.com>
 <CAJuCY5zvAz0q1pFoEZWbA+9rw=B45XkxBYyHn_=hVDAygha=iw@mail.gmail.com>
 <22978.32548.970900.175083@bud.eddelbuettel.com>
 <1505925879.8344.28.camel@iarc.fr>
Message-ID: <22980.22126.64344.572537@bud.eddelbuettel.com>


On 20 September 2017 at 16:44, Martyn Plummer wrote:
| On Wed, 2017-09-20 at 09:45 -0500, Dirk Eddelbuettel wrote:
| > Thierry,
| > 
| > This has always been a considerable puzzle, and the source of some amusement,
| > to me.  It is a clear design bug in Rscript because _code that would
| > otherwise work_ will not if it happens to rely on library(methods). S4 comes
| > to mind.  This has also been answered at least a few times on SO.
| > 
| > Now, 'r' from littler always did this differently and lods methods, just like
| > R itself does.  And 'r' still starts (way) faster as I once documented in a
| > blog post.
| > 
| > If someone from R Core reads this and nods silently: please put this to rest
| > and make sure Rscript also loads the methods package.
| 
| We have been here before, most recently in 2016
| 
| https://bugs.r-project.org/bugzilla/show_bug.cgi?id=16921
| 
| There are opinions on both sides, of course, but the decision rests in
| the hands of those who use extensively for its original purpose (i.e.
| running short snippets of R code) and for whom the overhead from
| loading the methods package is still unacceptable, despite being
| substantially reduced since this decision was made 10 years ago.

Sure, I don't care. I wrote littler for my purposes.

But to be honet I still find it strange that you all troll your users by
withholding one (base) package on one platform only, but your call.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd at debian.org  Fri Sep 22 02:18:20 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 21 Sep 2017 19:18:20 -0500
Subject: [R-pkg-devel] Announcing Bazel for R packages
In-Reply-To: <CAK68aVU1i=tZcJY_GKua6_AoXWz_88Qmoryeh8U4V2OdP6J=+g@mail.gmail.com>
References: <CAK68aVU1i=tZcJY_GKua6_AoXWz_88Qmoryeh8U4V2OdP6J=+g@mail.gmail.com>
Message-ID: <22980.22220.520637.558418@bud.eddelbuettel.com>


On 21 September 2017 at 22:40, Siddhartha Bagaria wrote:
| We have released some Bazel rules for R packages.
| https://github.com/grailbio/rules_r
| 
| What is Bazel?
| 
| Bazel <https://bazel.build/> is an industry tested build system that can be
| used for continuous integration and testing in large monorepos (multiple
| software libraries as part of one repository).
| 
| When should you use Bazel for your R packages?
| 
| 1. Continuous integration and testing
| If your organization already uses Bazel, and you have R packages as part of
| the same repo. These rules will run unit tests or R CMD check on changes to
| your package, or any dependency as part of the same build system that your
| organization uses. You can also deploy docker images with your R packages
| installed in them as part of your continuous integration.
| 
| 2. Reproducible builds
| Using Bazel will force you to fix versions of your package dependencies,
| and every build will be reproducible. Updates to package dependencies can
| then be vetted and be done incrementally if desired. This is an alternative
| to maintaining a private repository of CRAN/Bioc packages or using a CRAN
| snapshot service.
| 
| If these do not concern you, then you should not consider Bazel because of
| the additional complexity introduced.
| 
| I am happy to answer any questions you may have.

Are you aware of any bazel users outside of Google and its spin-offs,
including Grail?

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From bagaria.siddhartha at gmail.com  Fri Sep 22 02:28:52 2017
From: bagaria.siddhartha at gmail.com (Siddhartha Bagaria)
Date: Fri, 22 Sep 2017 00:28:52 +0000
Subject: [R-pkg-devel] Announcing Bazel for R packages
In-Reply-To: <22980.22220.520637.558418@bud.eddelbuettel.com>
References: <CAK68aVU1i=tZcJY_GKua6_AoXWz_88Qmoryeh8U4V2OdP6J=+g@mail.gmail.com>
 <22980.22220.520637.558418@bud.eddelbuettel.com>
Message-ID: <CAK68aVULK+JCz6Zh1VAeYEvnaJ_DXu_oU74ZNGKpmN9L4KfWAg@mail.gmail.com>

I agree the open source version has not been around for that long.

But... It is picking up adoption within many other companies this year:
https://github.com/bazelbuild/bazel/wiki/Bazel-Users

And some adoption in academia as well, e.g.
http://drake.mit.edu/bazel.html


On Thu, 21 Sep 2017 at 17:18 Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 21 September 2017 at 22:40, Siddhartha Bagaria wrote:
> | We have released some Bazel rules for R packages.
> | https://github.com/grailbio/rules_r
> |
> | What is Bazel?
> |
> | Bazel <https://bazel.build/> is an industry tested build system that
> can be
> | used for continuous integration and testing in large monorepos (multiple
> | software libraries as part of one repository).
> |
> | When should you use Bazel for your R packages?
> |
> | 1. Continuous integration and testing
> | If your organization already uses Bazel, and you have R packages as part
> of
> | the same repo. These rules will run unit tests or R CMD check on changes
> to
> | your package, or any dependency as part of the same build system that
> your
> | organization uses. You can also deploy docker images with your R packages
> | installed in them as part of your continuous integration.
> |
> | 2. Reproducible builds
> | Using Bazel will force you to fix versions of your package dependencies,
> | and every build will be reproducible. Updates to package dependencies can
> | then be vetted and be done incrementally if desired. This is an
> alternative
> | to maintaining a private repository of CRAN/Bioc packages or using a CRAN
> | snapshot service.
> |
> | If these do not concern you, then you should not consider Bazel because
> of
> | the additional complexity introduced.
> |
> | I am happy to answer any questions you may have.
>
> Are you aware of any bazel users outside of Google and its spin-offs,
> including Grail?
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From edd at debian.org  Fri Sep 22 02:53:21 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu, 21 Sep 2017 19:53:21 -0500
Subject: [R-pkg-devel] Announcing Bazel for R packages
In-Reply-To: <CAK68aVULK+JCz6Zh1VAeYEvnaJ_DXu_oU74ZNGKpmN9L4KfWAg@mail.gmail.com>
References: <CAK68aVU1i=tZcJY_GKua6_AoXWz_88Qmoryeh8U4V2OdP6J=+g@mail.gmail.com>
 <22980.22220.520637.558418@bud.eddelbuettel.com>
 <CAK68aVULK+JCz6Zh1VAeYEvnaJ_DXu_oU74ZNGKpmN9L4KfWAg@mail.gmail.com>
Message-ID: <22980.24321.646948.748933@bud.eddelbuettel.com>


On 22 September 2017 at 00:28, Siddhartha Bagaria wrote:
| I agree the open source version has not been around for that long.
| 
| But... It is picking up adoption within many other companies this year:
| https://github.com/bazelbuild/bazel/wiki/Bazel-Users
| 
| And some adoption in academia as well, e.g.
| http://drake.mit.edu/bazel.html

Nice, thanks!

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From Jens.Oehlschlaegel at truecluster.com  Fri Sep 22 11:23:13 2017
From: Jens.Oehlschlaegel at truecluster.com (=?UTF-8?Q?Jens_Oehlschl=c3=a4gel?=)
Date: Fri, 22 Sep 2017 11:23:13 +0200
Subject: [R-pkg-devel] Can roxygen2 export export() and S3method() to
	namespace?
Message-ID: <b87c0c7c-b198-3f6a-0d09-036097249daf@truecluster.com>

Hi,

is there a way to have roxygen2 write both export(<generic>,<class>)
and S3method(<generic>,<class>) to the NAMESPACE file?

I tried

#' @rdname Summaries
#' @export
all.bit <- function(x, range=NULL, ...)

and only get

S3method(all,bit)

but not

export(all.bit)

Thanks for any help


Jens Oehlschl?gel


P.S.


roxygen2 version 6.0.1


 > version
 ?????????????? _
platform?????? x86_64-pc-linux-gnu
arch?????????? x86_64
os???????????? linux-gnu
system???????? x86_64, linux-gnu
status
major????????? 3
minor????????? 4.1
year?????????? 2017
month????????? 06
day??????????? 30
svn rev??????? 72865
language?????? R
version.string R version 3.4.1 (2017-06-30)
nickname?????? Single Candle


From ht at heatherturner.net  Fri Sep 22 14:44:44 2017
From: ht at heatherturner.net (Heather Turner)
Date: Fri, 22 Sep 2017 13:44:44 +0100
Subject: [R-pkg-devel] Can roxygen2 export export() and S3method() to
 namespace?
In-Reply-To: <b87c0c7c-b198-3f6a-0d09-036097249daf@truecluster.com>
References: <b87c0c7c-b198-3f6a-0d09-036097249daf@truecluster.com>
Message-ID: <1506084284.256434.1114821112.0790F94C@webmail.messagingengine.com>

Hi Jens,

If you also have the line

#' @export all.bit

you will get 

export(all.bit)

in  the NAMESPACE file. You still need to keep 

#' @export

to get 

S3method(all,bit)

Best wishes,

Heather

On Fri, Sep 22, 2017, at 10:23 AM, Jens Oehlschl?gel wrote:
> Hi,
> 
> is there a way to have roxygen2 write both export(<generic>,<class>)
> and S3method(<generic>,<class>) to the NAMESPACE file?
> 
> I tried
> 
> #' @rdname Summaries
> #' @export
> all.bit <- function(x, range=NULL, ...)
> 
> and only get
> 
> S3method(all,bit)
> 
> but not
> 
> export(all.bit)
> 
> Thanks for any help
> 
> 
> Jens Oehlschl?gel
> 
> 
> P.S.
> 
> 
> roxygen2 version 6.0.1
> 
> 
>  > version
>  ?????????????? _
> platform?????? x86_64-pc-linux-gnu
> arch?????????? x86_64
> os???????????? linux-gnu
> system???????? x86_64, linux-gnu
> status
> major????????? 3
> minor????????? 4.1
> year?????????? 2017
> month????????? 06
> day??????????? 30
> svn rev??????? 72865
> language?????? R
> version.string R version 3.4.1 (2017-06-30)
> nickname?????? Single Candle
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From zhenkewu at gmail.com  Mon Sep 25 22:23:57 2017
From: zhenkewu at gmail.com (Zhenke Wu)
Date: Mon, 25 Sep 2017 20:23:57 +0000
Subject: [R-pkg-devel] How to fix R CRAN submission check warning: cannot
 load without being on the library search path
Message-ID: <CAC4Thc7MVwTavY6oXSvCCNYFFqt+HnpNB7uH-nro28TVaeqfDg@mail.gmail.com>

Hi all,

I have submitted my package via CRAN submission page but had the following
error that I couldn't fix. It has something to do with package 'rrcov'. On
my machine (OSX), rrcov is installed. How can I make the CRAN package
checking server install 'rrcov'?

Thanks!
Zhenke

** checking loading without being on the library search path ... WARNING
Error: package or namespace load failed for 'baker' in loadNamespace(i,
c(lib.loc, .libPaths()), versionCheck = vI[[i]]):
 there is no package called 'rrcov'
Execution halted

It looks like this package has a loading problem when not on .libPaths:
see the messages for details.
** checking use of S3 registration ... OK
* loading checks for arch 'x64'
** checking whether the package can be loaded ... ERROR
Loading this package had a fatal error status code 1
Loading log:
Error: package or namespace load failed for 'baker' in library.dynam(lib,
package, package.lib):
 DLL 'rrcov' not found: maybe not installed for this architecture?
In addition: Warning message:
S3 methods 'T2.test.default', 'T2.test.formula', 'Wilks.test.default',
'Wilks.test.formula', 'Wilks.test.data.frame', 'Wilks.test.matrix',
'PcaClassic.default', 'PcaClassic.formula', 'PcaHubert.default',
'PcaHubert.formula', 'PcaLocantore.default', 'PcaLocantore.formula',
'PcaCov.default', 'PcaCov.formula', 'PcaProj.default', 'PcaProj.formula',
'PcaGrid.default', 'PcaGrid.formula', 'LdaClassic.default',
'LdaClassic.formula', 'Linda.default', 'Linda.formula', 'LdaPP.default',
'LdaPP.formula', 'QdaClassic.default', 'QdaClassic.formula',
'QdaCov.default', 'QdaCov.formula' were declared in NAMESPACE but not found
Execution halted
** DONE
Status: 1 ERROR, 1 WARNING, 1 NOTE

	[[alternative HTML version deleted]]


From edd at debian.org  Mon Sep 25 23:10:56 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Mon, 25 Sep 2017 16:10:56 -0500
Subject: [R-pkg-devel] How to fix R CRAN submission check warning:
 cannot load without being on the library search path
In-Reply-To: <CAC4Thc7MVwTavY6oXSvCCNYFFqt+HnpNB7uH-nro28TVaeqfDg@mail.gmail.com>
References: <CAC4Thc7MVwTavY6oXSvCCNYFFqt+HnpNB7uH-nro28TVaeqfDg@mail.gmail.com>
Message-ID: <22985.28896.513098.91276@bud.eddelbuettel.com>


On 25 September 2017 at 20:23, Zhenke Wu wrote:
| Hi all,
| 
| I have submitted my package via CRAN submission page but had the following
| error that I couldn't fix. It has something to do with package 'rrcov'. On
| my machine (OSX), rrcov is installed. How can I make the CRAN package
| checking server install 'rrcov'?

Your DESCRIPTION file [1] does not list rrcov as an Imports, Suggests,
Depends -- so the test machine does not install it.

Adding it should fix your issues.

Dirk

[1] https://github.com/zhenkewu/baker/blob/master/DESCRIPTION
| 
| Thanks!
| Zhenke
| 
| ** checking loading without being on the library search path ... WARNING
| Error: package or namespace load failed for 'baker' in loadNamespace(i,
| c(lib.loc, .libPaths()), versionCheck = vI[[i]]):
|  there is no package called 'rrcov'
| Execution halted
| 
| It looks like this package has a loading problem when not on .libPaths:
| see the messages for details.
| ** checking use of S3 registration ... OK
| * loading checks for arch 'x64'
| ** checking whether the package can be loaded ... ERROR
| Loading this package had a fatal error status code 1
| Loading log:
| Error: package or namespace load failed for 'baker' in library.dynam(lib,
| package, package.lib):
|  DLL 'rrcov' not found: maybe not installed for this architecture?
| In addition: Warning message:
| S3 methods 'T2.test.default', 'T2.test.formula', 'Wilks.test.default',
| 'Wilks.test.formula', 'Wilks.test.data.frame', 'Wilks.test.matrix',
| 'PcaClassic.default', 'PcaClassic.formula', 'PcaHubert.default',
| 'PcaHubert.formula', 'PcaLocantore.default', 'PcaLocantore.formula',
| 'PcaCov.default', 'PcaCov.formula', 'PcaProj.default', 'PcaProj.formula',
| 'PcaGrid.default', 'PcaGrid.formula', 'LdaClassic.default',
| 'LdaClassic.formula', 'Linda.default', 'Linda.formula', 'LdaPP.default',
| 'LdaPP.formula', 'QdaClassic.default', 'QdaClassic.formula',
| 'QdaCov.default', 'QdaCov.formula' were declared in NAMESPACE but not found
| Execution halted
| ** DONE
| Status: 1 ERROR, 1 WARNING, 1 NOTE
| 
| 	[[alternative HTML version deleted]]
| 
| ______________________________________________
| R-package-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From goran.brostrom at umu.se  Tue Sep 26 09:30:59 2017
From: goran.brostrom at umu.se (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Tue, 26 Sep 2017 09:30:59 +0200
Subject: [R-pkg-devel] tibbles are not data frames
Message-ID: <5839235b-f52f-7942-1168-d99a07036213@umu.se>

I am beginning to get complaints from users of my CRAN packages 
(especially 'eha') to the effect that they get error messages like 
"Error: Unsupported use of matrix or array for column indexing".

It turns out that they are sticking in tibbles into functions that 
expect data frames as input. And I am using the kind of subsetting that 
Hadley dislikes (eha is an old package, much older than tibbles). It is 
of course a simple matter to change the code so it handles both data 
frames and tibbles correctly, but this affects many functions, and it 
will take some time. And when the next guy introduces 'troubles' as an 
improvement of 'tibbles', I will have to rewrite the code again.

While I like Hadley's way of doing it, I think it is a mistake to let a 
tibble also be of class data frame. To me it is a matter of inheritance 
and backwards compability: A tibble should add nice things to a data 
frame, not change basic behaviour, in order to call itself a data frame.

Is it correct to let a tibble be of class "data.frame"?

G?ran Brostr?m


From sme at iysik.com  Tue Sep 26 10:57:47 2017
From: sme at iysik.com (=?UTF-8?Q?Stefan_McKinnon_H=C3=B8j=2DEdwards?=)
Date: Tue, 26 Sep 2017 09:57:47 +0100
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
Message-ID: <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>

Hi G?ran,

Could you please elaborate on which kind of subsetting that Hadley dislikes?
I am yet to encounter operations on data frames that are not possible on
tribbles.

Kindly,
Stefan McKinnon Hoj-Edwards

Stefan McKinnon H?j-Edwards
ph.d. Genetics
+44 (0)776 231 2464
+45 2888 6598
Skype: stefan_edwards

2017-09-26 8:30 GMT+01:00 G?ran Brostr?m <goran.brostrom at umu.se>:

> I am beginning to get complaints from users of my CRAN packages
> (especially 'eha') to the effect that they get error messages like "Error:
> Unsupported use of matrix or array for column indexing".
>
> It turns out that they are sticking in tibbles into functions that expect
> data frames as input. And I am using the kind of subsetting that Hadley
> dislikes (eha is an old package, much older than tibbles). It is of course
> a simple matter to change the code so it handles both data frames and
> tibbles correctly, but this affects many functions, and it will take some
> time. And when the next guy introduces 'troubles' as an improvement of
> 'tibbles', I will have to rewrite the code again.
>
> While I like Hadley's way of doing it, I think it is a mistake to let a
> tibble also be of class data frame. To me it is a matter of inheritance and
> backwards compability: A tibble should add nice things to a data frame, not
> change basic behaviour, in order to call itself a data frame.
>
> Is it correct to let a tibble be of class "data.frame"?
>
> G?ran Brostr?m
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From alexandre.courtiol at gmail.com  Tue Sep 26 11:02:30 2017
From: alexandre.courtiol at gmail.com (Alexandre Courtiol)
Date: Tue, 26 Sep 2017 11:02:30 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
Message-ID: <CAERMt4fRZzU1nbEOZroGiEroq1zDctzgXS83Vay4WgbkX4iN+Q@mail.gmail.com>

I could not agree more with G?ran and we had to change code in our packages
because if this too. I also see students often facing bugs because of it.
Again, with all the respect I have for Hadley.


On 26 Sep 2017 9:32 a.m., "G?ran Brostr?m" <goran.brostrom at umu.se> wrote:

I am beginning to get complaints from users of my CRAN packages (especially
'eha') to the effect that they get error messages like "Error: Unsupported
use of matrix or array for column indexing".

It turns out that they are sticking in tibbles into functions that expect
data frames as input. And I am using the kind of subsetting that Hadley
dislikes (eha is an old package, much older than tibbles). It is of course
a simple matter to change the code so it handles both data frames and
tibbles correctly, but this affects many functions, and it will take some
time. And when the next guy introduces 'troubles' as an improvement of
'tibbles', I will have to rewrite the code again.

While I like Hadley's way of doing it, I think it is a mistake to let a
tibble also be of class data frame. To me it is a matter of inheritance and
backwards compability: A tibble should add nice things to a data frame, not
change basic behaviour, in order to call itself a data frame.

Is it correct to let a tibble be of class "data.frame"?

G?ran Brostr?m

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From goran.brostrom at umu.se  Tue Sep 26 11:03:49 2017
From: goran.brostrom at umu.se (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Tue, 26 Sep 2017 11:03:49 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
Message-ID: <e3e692e9-f043-aeb7-af11-03d8446401df@umu.se>

Hej Stefan,

On 2017-09-26 10:57, Stefan McKinnon H?j-Edwards wrote:
> Hi G?ran,
> 
> Could you please elaborate on which kind of subsetting that Hadley dislikes?
> I am yet to encounter operations on data frames that are not possible on 
> tribbles.

For instance, if 'dat' is a data frame, dat[1:3, 5] returns a vector of 
length 3. If 'dat' is a tibble, you do dat[[5]][1:3] to get the same 
vector. A tibble never 'drops dimensions'. See Hadley's book, on the web.

G?ran

> 
> Kindly,
> Stefan McKinnon Hoj-Edwards
> 
> Stefan McKinnon H?j-Edwards
> ph.d. Genetics
> +44 (0)776 231 2464
> +45 2888 6598
> Skype: stefan_edwards
> 
> 2017-09-26 8:30 GMT+01:00 G?ran Brostr?m <goran.brostrom at umu.se 
> <mailto:goran.brostrom at umu.se>>:
> 
>     I am beginning to get complaints from users of my CRAN packages
>     (especially 'eha') to the effect that they get error messages like
>     "Error: Unsupported use of matrix or array for column indexing".
> 
>     It turns out that they are sticking in tibbles into functions that
>     expect data frames as input. And I am using the kind of subsetting
>     that Hadley dislikes (eha is an old package, much older than
>     tibbles). It is of course a simple matter to change the code so it
>     handles both data frames and tibbles correctly, but this affects
>     many functions, and it will take some time. And when the next guy
>     introduces 'troubles' as an improvement of 'tibbles', I will have to
>     rewrite the code again.
> 
>     While I like Hadley's way of doing it, I think it is a mistake to
>     let a tibble also be of class data frame. To me it is a matter of
>     inheritance and backwards compability: A tibble should add nice
>     things to a data frame, not change basic behaviour, in order to call
>     itself a data frame.
> 
>     Is it correct to let a tibble be of class "data.frame"?
> 
>     G?ran Brostr?m
> 
>     ______________________________________________
>     R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>     mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> 
>


From Joris.Meys at ugent.be  Tue Sep 26 11:05:36 2017
From: Joris.Meys at ugent.be (Joris Meys)
Date: Tue, 26 Sep 2017 11:05:36 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
Message-ID: <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>

Here's one difference:

atib <- tibble(a = 1:5, b = letters[5:1])
atib[3,"a"]
as.data.frame(atib)[3,"a"]

The second line returns a tibble (no dropping dimensions), the third line
does (dropping dimensions). Huge difference if you use [ , aColumn] to
select a vector from a data frame.

Cheers
Joris

On Tue, Sep 26, 2017 at 10:57 AM, Stefan McKinnon H?j-Edwards <sme at iysik.com
> wrote:

> Hi G?ran,
>
> Could you please elaborate on which kind of subsetting that Hadley
> dislikes?
> I am yet to encounter operations on data frames that are not possible on
> tribbles.
>
> Kindly,
> Stefan McKinnon Hoj-Edwards
>
> Stefan McKinnon H?j-Edwards
> ph.d. Genetics
> +44 (0)776 231 2464
> +45 2888 6598
> Skype: stefan_edwards
>
> 2017-09-26 8:30 GMT+01:00 G?ran Brostr?m <goran.brostrom at umu.se>:
>
> > I am beginning to get complaints from users of my CRAN packages
> > (especially 'eha') to the effect that they get error messages like
> "Error:
> > Unsupported use of matrix or array for column indexing".
> >
> > It turns out that they are sticking in tibbles into functions that expect
> > data frames as input. And I am using the kind of subsetting that Hadley
> > dislikes (eha is an old package, much older than tibbles). It is of
> course
> > a simple matter to change the code so it handles both data frames and
> > tibbles correctly, but this affects many functions, and it will take some
> > time. And when the next guy introduces 'troubles' as an improvement of
> > 'tibbles', I will have to rewrite the code again.
> >
> > While I like Hadley's way of doing it, I think it is a mistake to let a
> > tibble also be of class data frame. To me it is a matter of inheritance
> and
> > backwards compability: A tibble should add nice things to a data frame,
> not
> > change basic behaviour, in order to call itself a data frame.
> >
> > Is it correct to let a tibble be of class "data.frame"?
> >
> > G?ran Brostr?m
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Joris Meys
Statistical consultant

Ghent University
Faculty of Bioscience Engineering
Department of Mathematical Modelling, Statistics and Bio-Informatics

tel : +32 9 264 59 87
Joris.Meys at Ugent.be
-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From sme at iysik.com  Tue Sep 26 11:23:51 2017
From: sme at iysik.com (=?UTF-8?Q?Stefan_McKinnon_H=C3=B8j=2DEdwards?=)
Date: Tue, 26 Sep 2017 10:23:51 +0100
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
Message-ID: <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>

Thanks for the examples. Personally, I have been struck out multiple times
by data frames dropping dimensions, so I have a distaste for this dropping
behaviour.

Personally, I prefer data frame *not* to drop dimensions. They are not
arrays, where slicing drops a dimension makes sense because all entries are
same data type.
You can pull out a column in vector form from both tribbles and data frame
with the $ index; subsetting a row from a data frame and forcing it into an
atomic vector will require cast all columns to lowest common denominator,
often character.

So I would argue that yes, tribbles are data.frame with extra bells and
whistles, even if I do not understand the use of list columns.

I suggest a defensive coding technique; if you need a data frame subset to
really be a vector, cast it as a vector. Users *will* attempt to throw
unexpected structures at your methods. When your methods fails in
mysterious ways because it didn't extract a vector, users will be
stupefied. Fail at `as.vector` will indicate why.

Kindly,
Stefan

Stefan McKinnon H?j-Edwards
ph.d. Genetics
+44 (0)776 231 2464
+45 2888 6598
Skype: stefan_edwards

2017-09-26 10:05 GMT+01:00 Joris Meys <Joris.Meys at ugent.be>:

> Here's one difference:
>
> atib <- tibble(a = 1:5, b = letters[5:1])
> atib[3,"a"]
> as.data.frame(atib)[3,"a"]
>
> The second line returns a tibble (no dropping dimensions), the third line
> does (dropping dimensions). Huge difference if you use [ , aColumn] to
> select a vector from a data frame.
>
> Cheers
> Joris
>
> On Tue, Sep 26, 2017 at 10:57 AM, Stefan McKinnon H?j-Edwards <
> sme at iysik.com> wrote:
>
>> Hi G?ran,
>>
>> Could you please elaborate on which kind of subsetting that Hadley
>> dislikes?
>> I am yet to encounter operations on data frames that are not possible on
>> tribbles.
>>
>> Kindly,
>> Stefan McKinnon Hoj-Edwards
>>
>> Stefan McKinnon H?j-Edwards
>> ph.d. Genetics
>> +44 (0)776 231 2464
>> +45 2888 6598
>> Skype: stefan_edwards
>>
>> 2017-09-26 8:30 GMT+01:00 G?ran Brostr?m <goran.brostrom at umu.se>:
>>
>> > I am beginning to get complaints from users of my CRAN packages
>> > (especially 'eha') to the effect that they get error messages like
>> "Error:
>> > Unsupported use of matrix or array for column indexing".
>> >
>> > It turns out that they are sticking in tibbles into functions that
>> expect
>> > data frames as input. And I am using the kind of subsetting that Hadley
>> > dislikes (eha is an old package, much older than tibbles). It is of
>> course
>> > a simple matter to change the code so it handles both data frames and
>> > tibbles correctly, but this affects many functions, and it will take
>> some
>> > time. And when the next guy introduces 'troubles' as an improvement of
>> > 'tibbles', I will have to rewrite the code again.
>> >
>> > While I like Hadley's way of doing it, I think it is a mistake to let a
>> > tibble also be of class data frame. To me it is a matter of inheritance
>> and
>> > backwards compability: A tibble should add nice things to a data frame,
>> not
>> > change basic behaviour, in order to call itself a data frame.
>> >
>> > Is it correct to let a tibble be of class "data.frame"?
>> >
>> > G?ran Brostr?m
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>
>
> --
> Joris Meys
> Statistical consultant
>
> Ghent University
> Faculty of Bioscience Engineering
> Department of Mathematical Modelling, Statistics and Bio-Informatics
>
> tel : +32 9 264 59 87 <+32%209%20264%2059%2087>
> Joris.Meys at Ugent.be
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>

	[[alternative HTML version deleted]]


From Joris.Meys at ugent.be  Tue Sep 26 11:35:02 2017
From: Joris.Meys at ugent.be (Joris Meys)
Date: Tue, 26 Sep 2017 11:35:02 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
Message-ID: <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>

I don't like the dropping of dimensions either. That doesn't change the
fact that a tibble reacts different from a data.frame. So tibbles do not
inherit correctly from the class data.frame, and it can thus be argued that
it's against OOP paradigms to pretend tibbles inherit from the class
data.frame. Defensive coding techniques would check if it's a tibble and
return an error saying a data.frame is expected. Unless tibbles inherit
correctly from data.frame.

I have nothing against tibbles. But calling them "data.frame" raises
expectations that can't be fulfilled.


On Tue, Sep 26, 2017 at 11:23 AM, Stefan McKinnon H?j-Edwards <sme at iysik.com
> wrote:

> Thanks for the examples. Personally, I have been struck out multiple times
> by data frames dropping dimensions, so I have a distaste for this dropping
> behaviour.
>
> Personally, I prefer data frame *not* to drop dimensions. They are not
> arrays, where slicing drops a dimension makes sense because all entries are
> same data type.
> You can pull out a column in vector form from both tribbles and data frame
> with the $ index; subsetting a row from a data frame and forcing it into an
> atomic vector will require cast all columns to lowest common denominator,
> often character.
>
> So I would argue that yes, tribbles are data.frame with extra bells and
> whistles, even if I do not understand the use of list columns.
>
> I suggest a defensive coding technique; if you need a data frame subset to
> really be a vector, cast it as a vector. Users *will* attempt to throw
> unexpected structures at your methods. When your methods fails in
> mysterious ways because it didn't extract a vector, users will be
> stupefied. Fail at `as.vector` will indicate why.
>
> Kindly,
> Stefan
>
> Stefan McKinnon H?j-Edwards
> ph.d. Genetics
> +44 (0)776 231 2464 <+44%207762%20312464>
> +45 2888 6598 <+45%2028%2088%2065%2098>
> Skype: stefan_edwards
>
> 2017-09-26 10:05 GMT+01:00 Joris Meys <Joris.Meys at ugent.be>:
>
>> Here's one difference:
>>
>> atib <- tibble(a = 1:5, b = letters[5:1])
>> atib[3,"a"]
>> as.data.frame(atib)[3,"a"]
>>
>> The second line returns a tibble (no dropping dimensions), the third line
>> does (dropping dimensions). Huge difference if you use [ , aColumn] to
>> select a vector from a data frame.
>>
>> Cheers
>> Joris
>>
>> On Tue, Sep 26, 2017 at 10:57 AM, Stefan McKinnon H?j-Edwards <
>> sme at iysik.com> wrote:
>>
>>> Hi G?ran,
>>>
>>> Could you please elaborate on which kind of subsetting that Hadley
>>> dislikes?
>>> I am yet to encounter operations on data frames that are not possible on
>>> tribbles.
>>>
>>> Kindly,
>>> Stefan McKinnon Hoj-Edwards
>>>
>>> Stefan McKinnon H?j-Edwards
>>> ph.d. Genetics
>>> +44 (0)776 231 2464
>>> +45 2888 6598
>>> Skype: stefan_edwards
>>>
>>> 2017-09-26 8:30 GMT+01:00 G?ran Brostr?m <goran.brostrom at umu.se>:
>>>
>>> > I am beginning to get complaints from users of my CRAN packages
>>> > (especially 'eha') to the effect that they get error messages like
>>> "Error:
>>> > Unsupported use of matrix or array for column indexing".
>>> >
>>> > It turns out that they are sticking in tibbles into functions that
>>> expect
>>> > data frames as input. And I am using the kind of subsetting that Hadley
>>> > dislikes (eha is an old package, much older than tibbles). It is of
>>> course
>>> > a simple matter to change the code so it handles both data frames and
>>> > tibbles correctly, but this affects many functions, and it will take
>>> some
>>> > time. And when the next guy introduces 'troubles' as an improvement of
>>> > 'tibbles', I will have to rewrite the code again.
>>> >
>>> > While I like Hadley's way of doing it, I think it is a mistake to let a
>>> > tibble also be of class data frame. To me it is a matter of
>>> inheritance and
>>> > backwards compability: A tibble should add nice things to a data
>>> frame, not
>>> > change basic behaviour, in order to call itself a data frame.
>>> >
>>> > Is it correct to let a tibble be of class "data.frame"?
>>> >
>>> > G?ran Brostr?m
>>> >
>>> > ______________________________________________
>>> > R-package-devel at r-project.org mailing list
>>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>>
>>
>> --
>> Joris Meys
>> Statistical consultant
>>
>> Ghent University
>> Faculty of Bioscience Engineering
>> Department of Mathematical Modelling, Statistics and Bio-Informatics
>>
>> tel : +32 9 264 59 87 <+32%209%20264%2059%2087>
>> Joris.Meys at Ugent.be
>> -------------------------------
>> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>>
>
>


-- 
Joris Meys
Statistical consultant

Ghent University
Faculty of Bioscience Engineering
Department of Mathematical Modelling, Statistics and Bio-Informatics

tel : +32 9 264 59 87
Joris.Meys at Ugent.be
-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From csardi.gabor at gmail.com  Tue Sep 26 11:56:56 2017
From: csardi.gabor at gmail.com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 26 Sep 2017 10:56:56 +0100
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
Message-ID: <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>

On Tue, Sep 26, 2017 at 10:35 AM, Joris Meys <Joris.Meys at ugent.be> wrote:
> I don't like the dropping of dimensions either. That doesn't change the
> fact that a tibble reacts different from a data.frame. So tibbles do not
> inherit correctly from the class data.frame, and it can thus be argued that
> it's against OOP paradigms to pretend tibbles inherit from the class
> data.frame.

I have yet to see an OOP system in which a subclass cannot override the methods
of its superclass. Not only is this in line with OOP paradigms, it is
actually one of
the essential OOP features.

To be more constructive, if you have a function that only works with
data frame inputs, then
it is good practice to check that the supplied input is indeed a data
frame. This is
independent of tibbles.

In practice it seems to me that an easy fix is to just call
as.data.frame on the input. This should
either convert it to a data frame, or throw an error. For tibbles it
drops the tbl* classes.

Gabor

> Defensive coding techniques would check if it's a tibble and
> return an error saying a data.frame is expected. Unless tibbles inherit
> correctly from data.frame.
>
> I have nothing against tibbles. But calling them "data.frame" raises
> expectations that can't be fulfilled.

[...]


From goran.brostrom at umu.se  Tue Sep 26 12:02:37 2017
From: goran.brostrom at umu.se (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Tue, 26 Sep 2017 12:02:37 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
Message-ID: <0a2a9917-3eac-009d-9268-944faeedb9b9@umu.se>

On 2017-09-26 11:35, Joris Meys wrote:
> I don't like the dropping of dimensions either. That doesn't change the 
> fact that a tibble reacts different from a data.frame. So tibbles do not 
> inherit correctly from the class data.frame, and it can thus be argued 
> that it's against OOP paradigms to pretend tibbles inherit from the 
> class data.frame. Defensive coding techniques would check if it's a 
> tibble and return an error saying a data.frame is expected. Unless 
> tibbles inherit correctly from data.frame.

The correct and logical way (which I use in 'eha') is to check if input 
is a data frame, and if not, throw an error. Checking for other things 
would soon be too overwhelming.

> 
> I have nothing against tibbles. But calling them "data.frame" raises 
> expectations that can't be fulfilled.

Exactly what I think. I wouldn't object to changing base data frames to 
behave like tibbles (with a few exceptions).

G?ran

> 
> On Tue, Sep 26, 2017 at 11:23 AM, Stefan McKinnon H?j-Edwards 
> <sme at iysik.com <mailto:sme at iysik.com>> wrote:
> 
>     Thanks for the examples. Personally, I have been struck out multiple
>     times by data frames dropping dimensions, so I have a distaste for
>     this dropping behaviour.
> 
>     Personally, I prefer data frame *not* to drop dimensions. They are
>     not arrays, where slicing drops a dimension makes sense because all
>     entries are same data type.
>     You can pull out a column in vector form from both tribbles and data
>     frame with the $ index; subsetting a row from a data frame and
>     forcing it into an atomic vector will require cast all columns to
>     lowest common denominator, often character.
> 
>     So I would argue that yes, tribbles are data.frame with extra bells
>     and whistles, even if I do not understand the use of list columns.
> 
>     I suggest a defensive coding technique; if you need a data frame
>     subset to really be a vector, cast it as a vector. Users *will*
>     attempt to throw unexpected structures at your methods. When your
>     methods fails in mysterious ways because it didn't extract a vector,
>     users will be stupefied. Fail at `as.vector` will indicate why.
> 
>     Kindly,
>     Stefan
> 
>     Stefan McKinnon H?j-Edwards
>     ph.d. Genetics
>     +44 (0)776 231 2464 <tel:+44%207762%20312464>
>     +45 2888 6598 <tel:+45%2028%2088%2065%2098>
>     Skype: stefan_edwards
> 
>     2017-09-26 10:05 GMT+01:00 Joris Meys <Joris.Meys at ugent.be
>     <mailto:Joris.Meys at ugent.be>>:
> 
>         Here's one difference:
> 
>         atib <- tibble(a = 1:5, b = letters[5:1])
>         atib[3,"a"]
>         as.data.frame(atib)[3,"a"]
> 
>         The second line returns a tibble (no dropping dimensions), the
>         third line does (dropping dimensions). Huge difference if you
>         use [ , aColumn] to select a vector from a data frame.
> 
>         Cheers
>         Joris
> 
>         On Tue, Sep 26, 2017 at 10:57 AM, Stefan McKinnon H?j-Edwards
>         <sme at iysik.com <mailto:sme at iysik.com>> wrote:
> 
>             Hi G?ran,
> 
>             Could you please elaborate on which kind of subsetting that
>             Hadley dislikes?
>             I am yet to encounter operations on data frames that are not
>             possible on
>             tribbles.
> 
>             Kindly,
>             Stefan McKinnon Hoj-Edwards
> 
>             Stefan McKinnon H?j-Edwards
>             ph.d. Genetics
>             +44 (0)776 231 2464 <tel:%2B44%20%280%29776%20231%202464>
>             +45 2888 6598 <tel:%2B45%202888%206598>
>             Skype: stefan_edwards
> 
>             2017-09-26 8:30 GMT+01:00 G?ran Brostr?m
>             <goran.brostrom at umu.se <mailto:goran.brostrom at umu.se>>:
> 
>              > I am beginning to get complaints from users of my CRAN
>             packages
>              > (especially 'eha') to the effect that they get error
>             messages like "Error:
>              > Unsupported use of matrix or array for column indexing".
>              >
>              > It turns out that they are sticking in tibbles into
>             functions that expect
>              > data frames as input. And I am using the kind of
>             subsetting that Hadley
>              > dislikes (eha is an old package, much older than
>             tibbles). It is of course
>              > a simple matter to change the code so it handles both
>             data frames and
>              > tibbles correctly, but this affects many functions, and
>             it will take some
>              > time. And when the next guy introduces 'troubles' as an
>             improvement of
>              > 'tibbles', I will have to rewrite the code again.
>              >
>              > While I like Hadley's way of doing it, I think it is a
>             mistake to let a
>              > tibble also be of class data frame. To me it is a matter
>             of inheritance and
>              > backwards compability: A tibble should add nice things to
>             a data frame, not
>              > change basic behaviour, in order to call itself a data frame.
>              >
>              > Is it correct to let a tibble be of class "data.frame"?
>              >
>              > G?ran Brostr?m
>              >
>              > ______________________________________________
>              > R-package-devel at r-project.org
>             <mailto:R-package-devel at r-project.org> mailing list
>              > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>             <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> 
>              ? ? ? ? [[alternative HTML version deleted]]
> 
>             ______________________________________________
>             R-package-devel at r-project.org
>             <mailto:R-package-devel at r-project.org> mailing list
>             https://stat.ethz.ch/mailman/listinfo/r-package-devel
>             <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> 
> 
> 
> 
>         -- 
>         Joris Meys
>         Statistical consultant
> 
>         Ghent University
>         Faculty of Bioscience Engineering
>         Department of Mathematical Modelling, Statistics and Bio-Informatics
> 
>         tel : +32 9 264 59 87 <tel:+32%209%20264%2059%2087>
>         Joris.Meys at Ugent.be
>         -------------------------------
>         Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>         <http://helpdesk.ugent.be/e-maildisclaimer.php>
> 
> 
> 
> 
> 
> -- 
> Joris Meys
> Statistical consultant
> 
> Ghent University
> Faculty of Bioscience Engineering
> Department of Mathematical Modelling, Statistics and Bio-Informatics
> 
> tel : +32 9 264 59 87
> Joris.Meys at Ugent.be
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


From goran.brostrom at umu.se  Tue Sep 26 12:08:44 2017
From: goran.brostrom at umu.se (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Tue, 26 Sep 2017 12:08:44 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
Message-ID: <0ab1dece-770f-10b8-26ae-3769ad79593a@umu.se>



On 2017-09-26 11:56, G?bor Cs?rdi wrote:
> On Tue, Sep 26, 2017 at 10:35 AM, Joris Meys <Joris.Meys at ugent.be> wrote:
>> I don't like the dropping of dimensions either. That doesn't change the
>> fact that a tibble reacts different from a data.frame. So tibbles do not
>> inherit correctly from the class data.frame, and it can thus be argued that
>> it's against OOP paradigms to pretend tibbles inherit from the class
>> data.frame.
> 
> I have yet to see an OOP system in which a subclass cannot override the methods
> of its superclass. Not only is this in line with OOP paradigms, it is
> actually one of
> the essential OOP features.
> 
> To be more constructive, if you have a function that only works with
> data frame inputs, then
> it is good practice to check that the supplied input is indeed a data
> frame. This is
> independent of tibbles.

It is not. I check input for being a data frame, but tibbles pass that 
test. That's the essence of the problem.

> In practice it seems to me that an easy fix is to just call
> as.data.frame on the input. This should
> either convert it to a data frame, or throw an error.

Sure, but I still need to rewrite the package.

G?rn

> For tibbles it
> drops the tbl* classes.
> 
> Gabor
> 
>> Defensive coding techniques would check if it's a tibble and
>> return an error saying a data.frame is expected. Unless tibbles inherit
>> correctly from data.frame.
>>
>> I have nothing against tibbles. But calling them "data.frame" raises
>> expectations that can't be fulfilled.
> 
> [...]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From d.luedecke at uke.de  Tue Sep 26 12:11:31 2017
From: d.luedecke at uke.de (=?utf-8?Q?Daniel_L=C3=BCdecke?=)
Date: Tue, 26 Sep 2017 12:11:31 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <0ab1dece-770f-10b8-26ae-3769ad79593a@umu.se>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <0ab1dece-770f-10b8-26ae-3769ad79593a@umu.se>
Message-ID: <002001d336af$d35053f0$79f0fbd0$@uke.de>

Since tibbles add their class attributes first, you could use:

tb <- tibble(a = 5)
inherits(tb, "data.frame", which = TRUE) == 1

if "tb" is a data frame (only), TRUE is returned, for tibble FALSE. You could then coerce to data frame: as.data.frame(tb)

-----Urspr?ngliche Nachricht-----
Von: R-package-devel [mailto:r-package-devel-bounces at r-project.org] Im Auftrag von G?ran Brostr?m
Gesendet: Dienstag, 26. September 2017 12:09
An: r-package-devel at r-project.org
Betreff: Re: [R-pkg-devel] tibbles are not data frames



On 2017-09-26 11:56, G?bor Cs?rdi wrote:
> On Tue, Sep 26, 2017 at 10:35 AM, Joris Meys <Joris.Meys at ugent.be> wrote:
>> I don't like the dropping of dimensions either. That doesn't change 
>> the fact that a tibble reacts different from a data.frame. So tibbles 
>> do not inherit correctly from the class data.frame, and it can thus 
>> be argued that it's against OOP paradigms to pretend tibbles inherit 
>> from the class data.frame.
> 
> I have yet to see an OOP system in which a subclass cannot override 
> the methods of its superclass. Not only is this in line with OOP 
> paradigms, it is actually one of the essential OOP features.
> 
> To be more constructive, if you have a function that only works with 
> data frame inputs, then it is good practice to check that the supplied 
> input is indeed a data frame. This is independent of tibbles.

It is not. I check input for being a data frame, but tibbles pass that test. That's the essence of the problem.

> In practice it seems to me that an easy fix is to just call 
> as.data.frame on the input. This should either convert it to a data 
> frame, or throw an error.

Sure, but I still need to rewrite the package.

G?rn

> For tibbles it
> drops the tbl* classes.
> 
> Gabor
> 
>> Defensive coding techniques would check if it's a tibble and return 
>> an error saying a data.frame is expected. Unless tibbles inherit 
>> correctly from data.frame.
>>
>> I have nothing against tibbles. But calling them "data.frame" raises 
>> expectations that can't be fulfilled.
> 
> [...]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel

--

_____________________________________________________________________

Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr. Dr. Uwe Koch-Gromus, Joachim Pr?l?, Martina Saurin (komm.)
_____________________________________________________________________

SAVE PAPER - THINK BEFORE PRINTING

From csardi.gabor at gmail.com  Tue Sep 26 12:15:26 2017
From: csardi.gabor at gmail.com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 26 Sep 2017 11:15:26 +0100
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <002001d336af$d35053f0$79f0fbd0$@uke.de>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <0ab1dece-770f-10b8-26ae-3769ad79593a@umu.se>
 <002001d336af$d35053f0$79f0fbd0$@uke.de>
Message-ID: <CABtg=Km5WRHGP0Ze0G6Og7AgwErJWudp8_ODq=barjJzFj=vbw@mail.gmail.com>

What is the benefit here, compared to just calling as.data.frame() on it?

Gabor

On Tue, Sep 26, 2017 at 11:11 AM, Daniel L?decke <d.luedecke at uke.de> wrote:
> Since tibbles add their class attributes first, you could use:
>
> tb <- tibble(a = 5)
> inherits(tb, "data.frame", which = TRUE) == 1
>
> if "tb" is a data frame (only), TRUE is returned, for tibble FALSE. You could then coerce to data frame: as.data.frame(tb)
>
> -----Urspr?ngliche Nachricht-----
> Von: R-package-devel [mailto:r-package-devel-bounces at r-project.org] Im Auftrag von G?ran Brostr?m
> Gesendet: Dienstag, 26. September 2017 12:09
> An: r-package-devel at r-project.org
> Betreff: Re: [R-pkg-devel] tibbles are not data frames
>
>
>
> On 2017-09-26 11:56, G?bor Cs?rdi wrote:
>> On Tue, Sep 26, 2017 at 10:35 AM, Joris Meys <Joris.Meys at ugent.be> wrote:
>>> I don't like the dropping of dimensions either. That doesn't change
>>> the fact that a tibble reacts different from a data.frame. So tibbles
>>> do not inherit correctly from the class data.frame, and it can thus
>>> be argued that it's against OOP paradigms to pretend tibbles inherit
>>> from the class data.frame.
>>
>> I have yet to see an OOP system in which a subclass cannot override
>> the methods of its superclass. Not only is this in line with OOP
>> paradigms, it is actually one of the essential OOP features.
>>
>> To be more constructive, if you have a function that only works with
>> data frame inputs, then it is good practice to check that the supplied
>> input is indeed a data frame. This is independent of tibbles.
>
> It is not. I check input for being a data frame, but tibbles pass that test. That's the essence of the problem.
>
>> In practice it seems to me that an easy fix is to just call
>> as.data.frame on the input. This should either convert it to a data
>> frame, or throw an error.
>
> Sure, but I still need to rewrite the package.
>
> G?rn
>
>> For tibbles it
>> drops the tbl* classes.
>>
>> Gabor
>>
>>> Defensive coding techniques would check if it's a tibble and return
>>> an error saying a data.frame is expected. Unless tibbles inherit
>>> correctly from data.frame.
>>>
>>> I have nothing against tibbles. But calling them "data.frame" raises
>>> expectations that can't be fulfilled.
>>
>> [...]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
>
> _____________________________________________________________________
>
> Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
> Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr. Dr. Uwe Koch-Gromus, Joachim Pr?l?, Martina Saurin (komm.)
> _____________________________________________________________________
>
> SAVE PAPER - THINK BEFORE PRINTING
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From davidhughjones at gmail.com  Tue Sep 26 12:21:39 2017
From: davidhughjones at gmail.com (David Hugh-Jones)
Date: Tue, 26 Sep 2017 11:21:39 +0100
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CABtg=Km5WRHGP0Ze0G6Og7AgwErJWudp8_ODq=barjJzFj=vbw@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <0ab1dece-770f-10b8-26ae-3769ad79593a@umu.se>
 <002001d336af$d35053f0$79f0fbd0$@uke.de>
 <CABtg=Km5WRHGP0Ze0G6Og7AgwErJWudp8_ODq=barjJzFj=vbw@mail.gmail.com>
Message-ID: <CAARY7kjDPxkc6_JFkWLWg0DWczXyZXUV-hX9PZQGaFB5AOy-JQ@mail.gmail.com>

These replies seem to be missing the point, which is that old code has to
be rewritten because tibbles don't behave like data frames.

It is true that subclasses can override behaviour, but there is an implicit
contract that the same methods should do the same things.

The as.xxx pattern seems weird to me, though I see it a lot. What is the
point of inheritance if you always have to convert an object upwards before
you can treat it as a member of the superclass?

I can see this argument will run...

David

On 26 September 2017 at 11:15, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:

> What is the benefit here, compared to just calling as.data.frame() on it?
>
> Gabor
>
> On Tue, Sep 26, 2017 at 11:11 AM, Daniel L?decke <d.luedecke at uke.de>
> wrote:
> > Since tibbles add their class attributes first, you could use:
> >
> > tb <- tibble(a = 5)
> > inherits(tb, "data.frame", which = TRUE) == 1
> >
> > if "tb" is a data frame (only), TRUE is returned, for tibble FALSE. You
> could then coerce to data frame: as.data.frame(tb)
> >
> > -----Urspr?ngliche Nachricht-----
> > Von: R-package-devel [mailto:r-package-devel-bounces at r-project.org] Im
> Auftrag von G?ran Brostr?m
> > Gesendet: Dienstag, 26. September 2017 12:09
> > An: r-package-devel at r-project.org
> > Betreff: Re: [R-pkg-devel] tibbles are not data frames
> >
> >
> >
> > On 2017-09-26 11:56, G?bor Cs?rdi wrote:
> >> On Tue, Sep 26, 2017 at 10:35 AM, Joris Meys <Joris.Meys at ugent.be>
> wrote:
> >>> I don't like the dropping of dimensions either. That doesn't change
> >>> the fact that a tibble reacts different from a data.frame. So tibbles
> >>> do not inherit correctly from the class data.frame, and it can thus
> >>> be argued that it's against OOP paradigms to pretend tibbles inherit
> >>> from the class data.frame.
> >>
> >> I have yet to see an OOP system in which a subclass cannot override
> >> the methods of its superclass. Not only is this in line with OOP
> >> paradigms, it is actually one of the essential OOP features.
> >>
> >> To be more constructive, if you have a function that only works with
> >> data frame inputs, then it is good practice to check that the supplied
> >> input is indeed a data frame. This is independent of tibbles.
> >
> > It is not. I check input for being a data frame, but tibbles pass that
> test. That's the essence of the problem.
> >
> >> In practice it seems to me that an easy fix is to just call
> >> as.data.frame on the input. This should either convert it to a data
> >> frame, or throw an error.
> >
> > Sure, but I still need to rewrite the package.
> >
> > G?rn
> >
> >> For tibbles it
> >> drops the tbl* classes.
> >>
> >> Gabor
> >>
> >>> Defensive coding techniques would check if it's a tibble and return
> >>> an error saying a data.frame is expected. Unless tibbles inherit
> >>> correctly from data.frame.
> >>>
> >>> I have nothing against tibbles. But calling them "data.frame" raises
> >>> expectations that can't be fulfilled.
> >>
> >> [...]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/
> listinfo/r-package-devel
> >
> > --
> >
> > _____________________________________________________________________
> >
> > Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen
> Rechts; Gerichtsstand: Hamburg | www.uke.de
> > Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr.
> Dr. Uwe Koch-Gromus, Joachim Pr?l?, Martina Saurin (komm.)
> > _____________________________________________________________________
> >
> > SAVE PAPER - THINK BEFORE PRINTING
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From sme at iysik.com  Tue Sep 26 12:21:51 2017
From: sme at iysik.com (=?UTF-8?Q?Stefan_McKinnon_H=C3=B8j=2DEdwards?=)
Date: Tue, 26 Sep 2017 11:21:51 +0100
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CABtg=Km5WRHGP0Ze0G6Og7AgwErJWudp8_ODq=barjJzFj=vbw@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <0ab1dece-770f-10b8-26ae-3769ad79593a@umu.se>
 <002001d336af$d35053f0$79f0fbd0$@uke.de>
 <CABtg=Km5WRHGP0Ze0G6Og7AgwErJWudp8_ODq=barjJzFj=vbw@mail.gmail.com>
Message-ID: <CAHJFP8SKO2i=YWCnW7x5TybNVAzW8N9b8j3S-iGwH_vsr90L7w@mail.gmail.com>

There is no benefit. It is a rather cumbersome approach to checking whether
something behaves as you expect it to. `as.data.frame` will force it into
what you need; if it cannot be forced, then it will fail. That it can be
converted to a data.frame is the class' designers responsibility, not
yours. So you can use `as.data.frame` on *any* input that you need to
behave as a data.frame.
Consider a grouped tribble; now you have to test 2 different classes.

Kindly,
Stefan

Stefan McKinnon H?j-Edwards
ph.d. Genetics
+44 (0)776 231 2464
+45 2888 6598
Skype: stefan_edwards

2017-09-26 11:15 GMT+01:00 G?bor Cs?rdi <csardi.gabor at gmail.com>:

> What is the benefit here, compared to just calling as.data.frame() on it?
>
> Gabor
>
> On Tue, Sep 26, 2017 at 11:11 AM, Daniel L?decke <d.luedecke at uke.de>
> wrote:
> > Since tibbles add their class attributes first, you could use:
> >
> > tb <- tibble(a = 5)
> > inherits(tb, "data.frame", which = TRUE) == 1
> >
> > if "tb" is a data frame (only), TRUE is returned, for tibble FALSE. You
> could then coerce to data frame: as.data.frame(tb)
> >
> > -----Urspr?ngliche Nachricht-----
> > Von: R-package-devel [mailto:r-package-devel-bounces at r-project.org] Im
> Auftrag von G?ran Brostr?m
> > Gesendet: Dienstag, 26. September 2017 12:09
> > An: r-package-devel at r-project.org
> > Betreff: Re: [R-pkg-devel] tibbles are not data frames
> >
> >
> >
> > On 2017-09-26 11:56, G?bor Cs?rdi wrote:
> >> On Tue, Sep 26, 2017 at 10:35 AM, Joris Meys <Joris.Meys at ugent.be>
> wrote:
> >>> I don't like the dropping of dimensions either. That doesn't change
> >>> the fact that a tibble reacts different from a data.frame. So tibbles
> >>> do not inherit correctly from the class data.frame, and it can thus
> >>> be argued that it's against OOP paradigms to pretend tibbles inherit
> >>> from the class data.frame.
> >>
> >> I have yet to see an OOP system in which a subclass cannot override
> >> the methods of its superclass. Not only is this in line with OOP
> >> paradigms, it is actually one of the essential OOP features.
> >>
> >> To be more constructive, if you have a function that only works with
> >> data frame inputs, then it is good practice to check that the supplied
> >> input is indeed a data frame. This is independent of tibbles.
> >
> > It is not. I check input for being a data frame, but tibbles pass that
> test. That's the essence of the problem.
> >
> >> In practice it seems to me that an easy fix is to just call
> >> as.data.frame on the input. This should either convert it to a data
> >> frame, or throw an error.
> >
> > Sure, but I still need to rewrite the package.
> >
> > G?rn
> >
> >> For tibbles it
> >> drops the tbl* classes.
> >>
> >> Gabor
> >>
> >>> Defensive coding techniques would check if it's a tibble and return
> >>> an error saying a data.frame is expected. Unless tibbles inherit
> >>> correctly from data.frame.
> >>>
> >>> I have nothing against tibbles. But calling them "data.frame" raises
> >>> expectations that can't be fulfilled.
> >>
> >> [...]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/
> listinfo/r-package-devel
> >
> > --
> >
> > _____________________________________________________________________
> >
> > Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen
> Rechts; Gerichtsstand: Hamburg | www.uke.de
> > Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr.
> Dr. Uwe Koch-Gromus, Joachim Pr?l?, Martina Saurin (komm.)
> > _____________________________________________________________________
> >
> > SAVE PAPER - THINK BEFORE PRINTING
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From alexandre.courtiol at gmail.com  Tue Sep 26 13:10:30 2017
From: alexandre.courtiol at gmail.com (Alexandre Courtiol)
Date: Tue, 26 Sep 2017 13:10:30 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CAHJFP8SKO2i=YWCnW7x5TybNVAzW8N9b8j3S-iGwH_vsr90L7w@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <0ab1dece-770f-10b8-26ae-3769ad79593a@umu.se>
 <002001d336af$d35053f0$79f0fbd0$@uke.de>
 <CABtg=Km5WRHGP0Ze0G6Og7AgwErJWudp8_ODq=barjJzFj=vbw@mail.gmail.com>
 <CAHJFP8SKO2i=YWCnW7x5TybNVAzW8N9b8j3S-iGwH_vsr90L7w@mail.gmail.com>
Message-ID: <CAERMt4ei=MehXL=hzwBFw6u6Pa2kiaaGBuBDA44M3-RnTKhHhQ@mail.gmail.com>

David is right,

imagine an old silly code such as:

get_a.data.frame <- function(d) if("data.frame" %in% class(d)) d["a" ,]

This line of code giving you the row "a" of a data.frame could be in any
package.
No matter how ugly it is, it is technically correct and conforms to the
original definition of data.frames.

Now you have a data.frame:

foo <- data.frame(x=1:3, row.names = c("a", "b", "c"))

> geta.data.frame(foo)
[1] 1

this is expected

> geta.data.frame(as.matrix(foo))
[1]

This returns nothing, again it is expected as a matrix is not a data.frame

But here comes the tibble trouble:

> get_a.data.frame(as.tibble(foo))
# A tibble: 1 x 1
      x
  <int>
1    NA

And now the old package is broken.
Also if we tolerate this, think what would happen if this kind of practice
would scale up!
If anyone can call any classes the way they want without fulfilling the law
of inheritance we will soon be in big troubles, lost among the mutants.

Tibbles are great, data.frame are widely used, Tibbles should not be of the
class data.frame, unless tibbles start behaving as data.frame do.

Alex









On 26 September 2017 at 12:21, Stefan McKinnon H?j-Edwards <sme at iysik.com>
wrote:

> There is no benefit. It is a rather cumbersome approach to checking whether
> something behaves as you expect it to. `as.data.frame` will force it into
> what you need; if it cannot be forced, then it will fail. That it can be
> converted to a data.frame is the class' designers responsibility, not
> yours. So you can use `as.data.frame` on *any* input that you need to
> behave as a data.frame.
> Consider a grouped tribble; now you have to test 2 different classes.
>
> Kindly,
> Stefan
>
> Stefan McKinnon H?j-Edwards
> ph.d. Genetics
> +44 (0)776 231 2464
> +45 2888 6598
> Skype: stefan_edwards
>
> 2017-09-26 11:15 GMT+01:00 G?bor Cs?rdi <csardi.gabor at gmail.com>:
>
> > What is the benefit here, compared to just calling as.data.frame() on it?
> >
> > Gabor
> >
> > On Tue, Sep 26, 2017 at 11:11 AM, Daniel L?decke <d.luedecke at uke.de>
> > wrote:
> > > Since tibbles add their class attributes first, you could use:
> > >
> > > tb <- tibble(a = 5)
> > > inherits(tb, "data.frame", which = TRUE) == 1
> > >
> > > if "tb" is a data frame (only), TRUE is returned, for tibble FALSE. You
> > could then coerce to data frame: as.data.frame(tb)
> > >
> > > -----Urspr?ngliche Nachricht-----
> > > Von: R-package-devel [mailto:r-package-devel-bounces at r-project.org] Im
> > Auftrag von G?ran Brostr?m
> > > Gesendet: Dienstag, 26. September 2017 12:09
> > > An: r-package-devel at r-project.org
> > > Betreff: Re: [R-pkg-devel] tibbles are not data frames
> > >
> > >
> > >
> > > On 2017-09-26 11:56, G?bor Cs?rdi wrote:
> > >> On Tue, Sep 26, 2017 at 10:35 AM, Joris Meys <Joris.Meys at ugent.be>
> > wrote:
> > >>> I don't like the dropping of dimensions either. That doesn't change
> > >>> the fact that a tibble reacts different from a data.frame. So tibbles
> > >>> do not inherit correctly from the class data.frame, and it can thus
> > >>> be argued that it's against OOP paradigms to pretend tibbles inherit
> > >>> from the class data.frame.
> > >>
> > >> I have yet to see an OOP system in which a subclass cannot override
> > >> the methods of its superclass. Not only is this in line with OOP
> > >> paradigms, it is actually one of the essential OOP features.
> > >>
> > >> To be more constructive, if you have a function that only works with
> > >> data frame inputs, then it is good practice to check that the supplied
> > >> input is indeed a data frame. This is independent of tibbles.
> > >
> > > It is not. I check input for being a data frame, but tibbles pass that
> > test. That's the essence of the problem.
> > >
> > >> In practice it seems to me that an easy fix is to just call
> > >> as.data.frame on the input. This should either convert it to a data
> > >> frame, or throw an error.
> > >
> > > Sure, but I still need to rewrite the package.
> > >
> > > G?rn
> > >
> > >> For tibbles it
> > >> drops the tbl* classes.
> > >>
> > >> Gabor
> > >>
> > >>> Defensive coding techniques would check if it's a tibble and return
> > >>> an error saying a data.frame is expected. Unless tibbles inherit
> > >>> correctly from data.frame.
> > >>>
> > >>> I have nothing against tibbles. But calling them "data.frame" raises
> > >>> expectations that can't be fulfilled.
> > >>
> > >> [...]
> > >>
> > >> ______________________________________________
> > >> R-package-devel at r-project.org mailing list
> > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >>
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/
> > listinfo/r-package-devel
> > >
> > > --
> > >
> > > _____________________________________________________________________
> > >
> > > Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen
> > Rechts; Gerichtsstand: Hamburg | www.uke.de
> > > Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr.
> > Dr. Uwe Koch-Gromus, Joachim Pr?l?, Martina Saurin (komm.)
> > > _____________________________________________________________________
> > >
> > > SAVE PAPER - THINK BEFORE PRINTING
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Alexandre Courtiol

http://sites.google.com/site/alexandrecourtiol/home

*"Science is the belief in the ignorance of experts"*, R. Feynman

	[[alternative HTML version deleted]]


From Joris.Meys at ugent.be  Tue Sep 26 13:18:59 2017
From: Joris.Meys at ugent.be (Joris Meys)
Date: Tue, 26 Sep 2017 13:18:59 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
Message-ID: <CAO1zAVa5COGZGbwWR=TaodjnwMzDVfau=tvUtUk5vsrC+ycRJw@mail.gmail.com>

On Tue, Sep 26, 2017 at 11:56 AM, G?bor Cs?rdi <csardi.gabor at gmail.com>
wrote:

>
> I have yet to see an OOP system in which a subclass cannot override the
> methods
> of its superclass. Not only is this in line with OOP paradigms, it is
> actually one of
> the essential OOP features.
>

Fair enough. And I shouldn't have used the word "inherit" in the first
place, we're talking S3 after all. Fwiw, overriding a method to do the
exact same except for one detail isn't encouraged in the OOP world either.


> To be more constructive, if you have a function that only works with
> data frame inputs, then
> it is good practice to check that the supplied input is indeed a data
> frame. This is
> independent of tibbles.
>

Actually it's not independent of tibbles as illustrated by others.
is.data.frame() returns TRUE for tibbles. It doesn't for matrices or
vectors.


>
> In practice it seems to me that an easy fix is to just call
> as.data.frame on the input. This should
> either convert it to a data frame, or throw an error. For tibbles it
> drops the tbl* classes.
>

This would also allow matrices or vectors to be converted to data.frames,
and that might or might not be warranted.

I agree that the S3 system allows you to do this, and think it's up to the
package manager to decide whether or not they would allow their users to
use tibbles instead of data.frame objects.

I think the bigger frustration is that tibble users are more prone to
expect all code to work exactly like it does with data.frames. Which it
obviously doesn't.

-- 
Joris Meys
Statistical consultant

Ghent University
Faculty of Bioscience Engineering
Department of Mathematical Modelling, Statistics and Bio-Informatics

tel : +32 9 264 59 87
Joris.Meys at Ugent.be
-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From thierry.onkelinx at inbo.be  Tue Sep 26 13:32:09 2017
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Tue, 26 Sep 2017 13:32:09 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CAO1zAVa5COGZGbwWR=TaodjnwMzDVfau=tvUtUk5vsrC+ycRJw@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <CAO1zAVa5COGZGbwWR=TaodjnwMzDVfau=tvUtUk5vsrC+ycRJw@mail.gmail.com>
Message-ID: <CAJuCY5xJmcnCyw7MQzHpCdS0ab4_BO+o4zs0OaVFbTsEfg6yqg@mail.gmail.com>

Dear all,

IMHO the problem is being look at from the wrong perspective. The
tibble doesn't change the data.frame, it uses all methods from
data.frame which it doesn't implement itself. Hence it behaves like at
data.frame to some extent.

If a package requires a data.frame, then it is up to the _user_ to
provide a data.frame (and a tibble is not a data.frame). Documenting
this in the package documentation/FAQ or issuing a warning "don't use
tibble" when the package is loaded should be sufficient.

Best regards,

ir. Thierry Onkelinx
Statisticus/ Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
AND FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Kliniekstraat 25, B-1070 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no
more than asking him to perform a post-mortem examination: he may be
able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does
not ensure that a reasonable answer can be extracted from a given body
of data. ~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////


Van 14 tot en met 19 december 2017 verhuizen we uit onze vestiging in
Brussel naar het Herman Teirlinckgebouw op de site Thurn & Taxis.
Vanaf dan ben je welkom op het nieuwe adres: Havenlaan 88 bus 73, 1000 Brussel.

///////////////////////////////////////////////////////////////////////////////////////////


2017-09-26 13:18 GMT+02:00 Joris Meys <Joris.Meys at ugent.be>:
>
> On Tue, Sep 26, 2017 at 11:56 AM, G?bor Cs?rdi <csardi.gabor at gmail.com>
> wrote:
>
> >
> > I have yet to see an OOP system in which a subclass cannot override the
> > methods
> > of its superclass. Not only is this in line with OOP paradigms, it is
> > actually one of
> > the essential OOP features.
> >
>
> Fair enough. And I shouldn't have used the word "inherit" in the first
> place, we're talking S3 after all. Fwiw, overriding a method to do the
> exact same except for one detail isn't encouraged in the OOP world either.
>
>
> > To be more constructive, if you have a function that only works with
> > data frame inputs, then
> > it is good practice to check that the supplied input is indeed a data
> > frame. This is
> > independent of tibbles.
> >
>
> Actually it's not independent of tibbles as illustrated by others.
> is.data.frame() returns TRUE for tibbles. It doesn't for matrices or
> vectors.
>
>
> >
> > In practice it seems to me that an easy fix is to just call
> > as.data.frame on the input. This should
> > either convert it to a data frame, or throw an error. For tibbles it
> > drops the tbl* classes.
> >
>
> This would also allow matrices or vectors to be converted to data.frames,
> and that might or might not be warranted.
>
> I agree that the S3 system allows you to do this, and think it's up to the
> package manager to decide whether or not they would allow their users to
> use tibbles instead of data.frame objects.
>
> I think the bigger frustration is that tibble users are more prone to
> expect all code to work exactly like it does with data.frames. Which it
> obviously doesn't.
>
> --
> Joris Meys
> Statistical consultant
>
> Ghent University
> Faculty of Bioscience Engineering
> Department of Mathematical Modelling, Statistics and Bio-Informatics
>
> tel : +32 9 264 59 87
> Joris.Meys at Ugent.be
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From hhoeflin at gmail.com  Tue Sep 26 13:41:11 2017
From: hhoeflin at gmail.com (Holger Hoefling)
Date: Tue, 26 Sep 2017 13:41:11 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CAJuCY5xJmcnCyw7MQzHpCdS0ab4_BO+o4zs0OaVFbTsEfg6yqg@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <CAO1zAVa5COGZGbwWR=TaodjnwMzDVfau=tvUtUk5vsrC+ycRJw@mail.gmail.com>
 <CAJuCY5xJmcnCyw7MQzHpCdS0ab4_BO+o4zs0OaVFbTsEfg6yqg@mail.gmail.com>
Message-ID: <CAFDswJvF_D2tEfVwtjVLH3=aFnPqnJUMC=anmROMGDSWJrOd7g@mail.gmail.com>

Hi Thierry,

You write:

"If a package requires a data.frame, then it is up to the _user_ to
provide a data.frame (and a tibble is not a data.frame). "

Actually, as pointed out before, calling

is.data.frame

on a tibble returns TRUE. So I think that R says - yes, a tibble is a data
frame. What would be the point of having a "is.data.frame" function, if you
can't trust its answer?

And you can also look at it from the other side: Why does tibble need to
inherit from a data.frame? I don't know exactly what the original intention
behind this was, but I would guess that it was intended to make tibbles a
drop-in replacement for data.frames. And it looks like it is not succeeding
at this task.

Best

Holger Hoefling

On Tue, Sep 26, 2017 at 1:32 PM, Thierry Onkelinx <thierry.onkelinx at inbo.be>
wrote:

> Dear all,
>
> IMHO the problem is being look at from the wrong perspective. The
> tibble doesn't change the data.frame, it uses all methods from
> data.frame which it doesn't implement itself. Hence it behaves like at
> data.frame to some extent.
>
> If a package requires a data.frame, then it is up to the _user_ to
> provide a data.frame (and a tibble is not a data.frame). Documenting
> this in the package documentation/FAQ or issuing a warning "don't use
> tibble" when the package is loaded should be sufficient.
>
> Best regards,
>
> ir. Thierry Onkelinx
> Statisticus/ Statistician
>
> Vlaamse Overheid / Government of Flanders
> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
> AND FOREST
> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
> thierry.onkelinx at inbo.be
> Kliniekstraat 25, B-1070 Brussel
> www.inbo.be
>
> ////////////////////////////////////////////////////////////
> ///////////////////////////////
> To call in the statistician after the experiment is done may be no
> more than asking him to perform a post-mortem examination: he may be
> able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
> The plural of anecdote is not data. ~ Roger Brinner
> The combination of some data and an aching desire for an answer does
> not ensure that a reasonable answer can be extracted from a given body
> of data. ~ John Tukey
> ////////////////////////////////////////////////////////////
> ///////////////////////////////
>
>
> Van 14 tot en met 19 december 2017 verhuizen we uit onze vestiging in
> Brussel naar het Herman Teirlinckgebouw op de site Thurn & Taxis.
> Vanaf dan ben je welkom op het nieuwe adres: Havenlaan 88 bus 73, 1000
> Brussel.
>
> ////////////////////////////////////////////////////////////
> ///////////////////////////////
>
>
> 2017-09-26 13:18 GMT+02:00 Joris Meys <Joris.Meys at ugent.be>:
> >
> > On Tue, Sep 26, 2017 at 11:56 AM, G?bor Cs?rdi <csardi.gabor at gmail.com>
> > wrote:
> >
> > >
> > > I have yet to see an OOP system in which a subclass cannot override the
> > > methods
> > > of its superclass. Not only is this in line with OOP paradigms, it is
> > > actually one of
> > > the essential OOP features.
> > >
> >
> > Fair enough. And I shouldn't have used the word "inherit" in the first
> > place, we're talking S3 after all. Fwiw, overriding a method to do the
> > exact same except for one detail isn't encouraged in the OOP world
> either.
> >
> >
> > > To be more constructive, if you have a function that only works with
> > > data frame inputs, then
> > > it is good practice to check that the supplied input is indeed a data
> > > frame. This is
> > > independent of tibbles.
> > >
> >
> > Actually it's not independent of tibbles as illustrated by others.
> > is.data.frame() returns TRUE for tibbles. It doesn't for matrices or
> > vectors.
> >
> >
> > >
> > > In practice it seems to me that an easy fix is to just call
> > > as.data.frame on the input. This should
> > > either convert it to a data frame, or throw an error. For tibbles it
> > > drops the tbl* classes.
> > >
> >
> > This would also allow matrices or vectors to be converted to data.frames,
> > and that might or might not be warranted.
> >
> > I agree that the S3 system allows you to do this, and think it's up to
> the
> > package manager to decide whether or not they would allow their users to
> > use tibbles instead of data.frame objects.
> >
> > I think the bigger frustration is that tibble users are more prone to
> > expect all code to work exactly like it does with data.frames. Which it
> > obviously doesn't.
> >
> > --
> > Joris Meys
> > Statistical consultant
> >
> > Ghent University
> > Faculty of Bioscience Engineering
> > Department of Mathematical Modelling, Statistics and Bio-Informatics
> >
> > tel : +32 9 264 59 87
> > Joris.Meys at Ugent.be
> > -------------------------------
> > Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From i.ucar86 at gmail.com  Tue Sep 26 13:47:36 2017
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Tue, 26 Sep 2017 13:47:36 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CAFDswJvF_D2tEfVwtjVLH3=aFnPqnJUMC=anmROMGDSWJrOd7g@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <CAO1zAVa5COGZGbwWR=TaodjnwMzDVfau=tvUtUk5vsrC+ycRJw@mail.gmail.com>
 <CAJuCY5xJmcnCyw7MQzHpCdS0ab4_BO+o4zs0OaVFbTsEfg6yqg@mail.gmail.com>
 <CAFDswJvF_D2tEfVwtjVLH3=aFnPqnJUMC=anmROMGDSWJrOd7g@mail.gmail.com>
Message-ID: <CALEXWq2+R6MZDYmVyZoJMc-bdRoE-e3WKFXR9VF44afUO_TsdQ@mail.gmail.com>

2017-09-26 13:41 GMT+02:00 Holger Hoefling <hhoeflin at gmail.com>:
> Hi Thierry,
>
> You write:
>
> "If a package requires a data.frame, then it is up to the _user_ to
> provide a data.frame (and a tibble is not a data.frame). "
>
> Actually, as pointed out before, calling
>
> is.data.frame
>
> on a tibble returns TRUE. So I think that R says - yes, a tibble is a data
> frame. What would be the point of having a "is.data.frame" function, if you
> can't trust its answer?

is.data.frame is just a wrapper for inherits(x, "data.frame"). As
Daniel pointed out before, inherits(x, "data.frame", TRUE) == 1
returns TRUE for data frames and FALSE for tibbles.

I?aki


From d.luedecke at uke.de  Tue Sep 26 14:01:09 2017
From: d.luedecke at uke.de (=?utf-8?Q?Daniel_L=C3=BCdecke?=)
Date: Tue, 26 Sep 2017 14:01:09 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CABtg=Km5WRHGP0Ze0G6Og7AgwErJWudp8_ODq=barjJzFj=vbw@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <0ab1dece-770f-10b8-26ae-3769ad79593a@umu.se>
 <002001d336af$d35053f0$79f0fbd0$@uke.de>
 <CABtg=Km5WRHGP0Ze0G6Og7AgwErJWudp8_ODq=barjJzFj=vbw@mail.gmail.com>
Message-ID: <002601d336bf$242a9420$6c7fbc60$@uke.de>

You wrote:

The correct and logical way (which I use in 'eha') is to check if input is a data frame, and if not, throw an error.

If you want to check for a data frame (and a data frame only), because you don't want to coerce *any* object to data frames, then this would be one way to check for df/tibble, and coerce tibbles only. That's what I had in mind...

But as I mentioned before, since simplifying is the most (or even only?) relevant point when dealing with tibbles, I have re-written all parts in my packages that used df[, x] indexing, and replaced with df[[x]], resp. used df[, x, drop = FALSE], or - if a vector is needed - you can use "dplyr::pull()" to make sure you get a vector.

Best
Daniel

-----Urspr?ngliche Nachricht-----
Von: G?bor Cs?rdi [mailto:csardi.gabor at gmail.com] 
Gesendet: Dienstag, 26. September 2017 12:15
An: Daniel L?decke <d.luedecke at uke.de>
Cc: R Package Devel <r-package-devel at r-project.org>
Betreff: Re: [R-pkg-devel] tibbles are not data frames

What is the benefit here, compared to just calling as.data.frame() on it?

Gabor

On Tue, Sep 26, 2017 at 11:11 AM, Daniel L?decke <d.luedecke at uke.de> wrote:
> Since tibbles add their class attributes first, you could use:
>
> tb <- tibble(a = 5)
> inherits(tb, "data.frame", which = TRUE) == 1
>
> if "tb" is a data frame (only), TRUE is returned, for tibble FALSE. 
> You could then coerce to data frame: as.data.frame(tb)
>
> -----Urspr?ngliche Nachricht-----
> Von: R-package-devel [mailto:r-package-devel-bounces at r-project.org] Im 
> Auftrag von G?ran Brostr?m
> Gesendet: Dienstag, 26. September 2017 12:09
> An: r-package-devel at r-project.org
> Betreff: Re: [R-pkg-devel] tibbles are not data frames
>
>
>
> On 2017-09-26 11:56, G?bor Cs?rdi wrote:
>> On Tue, Sep 26, 2017 at 10:35 AM, Joris Meys <Joris.Meys at ugent.be> wrote:
>>> I don't like the dropping of dimensions either. That doesn't change 
>>> the fact that a tibble reacts different from a data.frame. So 
>>> tibbles do not inherit correctly from the class data.frame, and it 
>>> can thus be argued that it's against OOP paradigms to pretend 
>>> tibbles inherit from the class data.frame.
>>
>> I have yet to see an OOP system in which a subclass cannot override 
>> the methods of its superclass. Not only is this in line with OOP 
>> paradigms, it is actually one of the essential OOP features.
>>
>> To be more constructive, if you have a function that only works with 
>> data frame inputs, then it is good practice to check that the 
>> supplied input is indeed a data frame. This is independent of tibbles.
>
> It is not. I check input for being a data frame, but tibbles pass that test. That's the essence of the problem.
>
>> In practice it seems to me that an easy fix is to just call 
>> as.data.frame on the input. This should either convert it to a data 
>> frame, or throw an error.
>
> Sure, but I still need to rewrite the package.
>
> G?rn
>
>> For tibbles it
>> drops the tbl* classes.
>>
>> Gabor
>>
>>> Defensive coding techniques would check if it's a tibble and return 
>>> an error saying a data.frame is expected. Unless tibbles inherit 
>>> correctly from data.frame.
>>>
>>> I have nothing against tibbles. But calling them "data.frame" raises 
>>> expectations that can't be fulfilled.
>>
>> [...]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list 
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
>
> _____________________________________________________________________
>
> Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen 
> Rechts; Gerichtsstand: Hamburg | www.uke.de
> Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr. 
> Dr. Uwe Koch-Gromus, Joachim Pr?l?, Martina Saurin (komm.) 
> _____________________________________________________________________
>
> SAVE PAPER - THINK BEFORE PRINTING
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

--

_____________________________________________________________________

Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr. Dr. Uwe Koch-Gromus, Joachim Pr?l?, Martina Saurin (komm.)
_____________________________________________________________________

SAVE PAPER - THINK BEFORE PRINTING

From pedro.aphalo at helsinki.fi  Tue Sep 26 14:02:30 2017
From: pedro.aphalo at helsinki.fi (Pedro J. Aphalo)
Date: Tue, 26 Sep 2017 15:02:30 +0300
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CALEXWq2+R6MZDYmVyZoJMc-bdRoE-e3WKFXR9VF44afUO_TsdQ@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <CAO1zAVa5COGZGbwWR=TaodjnwMzDVfau=tvUtUk5vsrC+ycRJw@mail.gmail.com>
 <CAJuCY5xJmcnCyw7MQzHpCdS0ab4_BO+o4zs0OaVFbTsEfg6yqg@mail.gmail.com>
 <CAFDswJvF_D2tEfVwtjVLH3=aFnPqnJUMC=anmROMGDSWJrOd7g@mail.gmail.com>
 <CALEXWq2+R6MZDYmVyZoJMc-bdRoE-e3WKFXR9VF44afUO_TsdQ@mail.gmail.com>
Message-ID: <2a836483-a6c4-9c33-9374-c3f929928dc4@helsinki.fi>

Hi,

But the point is that

inherits(x, "data.frame", TRUE) == 1

will not distinguish between tibbles and other classes derived from 
data.frame that do respect the original syntax. You cannot/want in most 
cases block the use of every class derived from data.frame. One would 
need to use a test that specifically disallows 'tibble', which is 
possible, but inelegant.

However, maybe the main thing is that packages like tibble and magrittr 
are changing the syntax of R. Maybe we are reaching a point where we 
need to define R++, with tibbles REPLACING data frames, etc. Then it 
would be clear that some porting is required, and with only one syntax 
and behaviour in use no confusion created.

Pedro.

On 2017-09-26 14:47, I?aki ?car wrote:
> 2017-09-26 13:41 GMT+02:00 Holger Hoefling <hhoeflin at gmail.com>:
>> Hi Thierry,
>>
>> You write:
>>
>> "If a package requires a data.frame, then it is up to the _user_ to
>> provide a data.frame (and a tibble is not a data.frame). "
>>
>> Actually, as pointed out before, calling
>>
>> is.data.frame
>>
>> on a tibble returns TRUE. So I think that R says - yes, a tibble is a data
>> frame. What would be the point of having a "is.data.frame" function, if you
>> can't trust its answer?
> is.data.frame is just a wrapper for inherits(x, "data.frame"). As
> Daniel pointed out before, inherits(x, "data.frame", TRUE) == 1
> returns TRUE for data frames and FALSE for tibbles.
>
> I?aki
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
------------------------------------------------------------------------
Pedro J. Aphalo
University Lecturer, Principal Investigator
(Office 4417, Biocenter 3, Viikinkaari 1)

Department of Biosciences
Plant Biology
P.O. Box 65
00014 University of Helsinki
Finland

e-mail: pedro.aphalo at helsinki.fi <mailto:pedro.aphalo at helsinki.fi>
Tel. (mobile) +358 50 4150623
Tel. (office) +358 2941 57897

------------------------------------------------------------------------
*Web sites and blogs*
Web site (research group): http://blogs.helsinki.fi/senpep-blog/
Web site (own teaching): http://www.helsinki.fi/people/pedro.aphalo/
Web site (using R in photobiology): http://www.r4photobiology.info/
------------------------------------------------------------------------
*Societies*
UV4Plants <http://www.uv4plants.org/> (communications officer), ESP 
<http://www.photobiology.eu/> (member) SEB <http://www.sebiology.org/> 
(member), BES <http://www.britishecologicalsociety.org/> (member), SPPS 
<http://www.spps.fi/> (member), SMS 
<http://www.metsatieteellinenseura.fi/english> (member), TUG 
<http://tug.org/> (member), FOAS <http://www.foastat.org/> (member).
------------------------------------------------------------------------

	[[alternative HTML version deleted]]


From goran.brostrom at umu.se  Tue Sep 26 14:08:26 2017
From: goran.brostrom at umu.se (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Tue, 26 Sep 2017 14:08:26 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <002601d336bf$242a9420$6c7fbc60$@uke.de>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <0ab1dece-770f-10b8-26ae-3769ad79593a@umu.se>
 <002001d336af$d35053f0$79f0fbd0$@uke.de>
 <CABtg=Km5WRHGP0Ze0G6Og7AgwErJWudp8_ODq=barjJzFj=vbw@mail.gmail.com>
 <002601d336bf$242a9420$6c7fbc60$@uke.de>
Message-ID: <4a79f181-3752-1c8b-63c1-825cb12ef700@umu.se>



On 2017-09-26 14:01, Daniel L?decke wrote:
> You wrote:
> 
> The correct and logical way (which I use in 'eha') is to check if input is a data frame, and if not, throw an error.
> 
> If you want to check for a data frame (and a data frame only), because you don't want to coerce *any* object to data frames, then this would be one way to check for df/tibble, and coerce tibbles only. That's what I had in mind...
> 
> But as I mentioned before, since simplifying is the most (or even only?) relevant point when dealing with tibbles, I have re-written all parts in my packages that used df[, x] indexing, and replaced with df[[x]], resp. used df[, x, drop = FALSE], or - if a vector is needed - you can use "dplyr::pull()" to make sure you get a vector.

One important thing for me (my packages) is to stay out of dependence on 
other packages, as far as it is possible. But I am in the process of 
doing what you suggest: Treat a data frame as the _list_ it is. Back to 
basics!

G?ran

> 
> Best
> Daniel
> 
> -----Urspr?ngliche Nachricht-----
> Von: G?bor Cs?rdi [mailto:csardi.gabor at gmail.com]
> Gesendet: Dienstag, 26. September 2017 12:15
> An: Daniel L?decke <d.luedecke at uke.de>
> Cc: R Package Devel <r-package-devel at r-project.org>
> Betreff: Re: [R-pkg-devel] tibbles are not data frames
> 
> What is the benefit here, compared to just calling as.data.frame() on it?
> 
> Gabor
> 
> On Tue, Sep 26, 2017 at 11:11 AM, Daniel L?decke <d.luedecke at uke.de> wrote:
>> Since tibbles add their class attributes first, you could use:
>>
>> tb <- tibble(a = 5)
>> inherits(tb, "data.frame", which = TRUE) == 1
>>
>> if "tb" is a data frame (only), TRUE is returned, for tibble FALSE.
>> You could then coerce to data frame: as.data.frame(tb)
>>
>> -----Urspr?ngliche Nachricht-----
>> Von: R-package-devel [mailto:r-package-devel-bounces at r-project.org] Im
>> Auftrag von G?ran Brostr?m
>> Gesendet: Dienstag, 26. September 2017 12:09
>> An: r-package-devel at r-project.org
>> Betreff: Re: [R-pkg-devel] tibbles are not data frames
>>
>>
>>
>> On 2017-09-26 11:56, G?bor Cs?rdi wrote:
>>> On Tue, Sep 26, 2017 at 10:35 AM, Joris Meys <Joris.Meys at ugent.be> wrote:
>>>> I don't like the dropping of dimensions either. That doesn't change
>>>> the fact that a tibble reacts different from a data.frame. So
>>>> tibbles do not inherit correctly from the class data.frame, and it
>>>> can thus be argued that it's against OOP paradigms to pretend
>>>> tibbles inherit from the class data.frame.
>>>
>>> I have yet to see an OOP system in which a subclass cannot override
>>> the methods of its superclass. Not only is this in line with OOP
>>> paradigms, it is actually one of the essential OOP features.
>>>
>>> To be more constructive, if you have a function that only works with
>>> data frame inputs, then it is good practice to check that the
>>> supplied input is indeed a data frame. This is independent of tibbles.
>>
>> It is not. I check input for being a data frame, but tibbles pass that test. That's the essence of the problem.
>>
>>> In practice it seems to me that an easy fix is to just call
>>> as.data.frame on the input. This should either convert it to a data
>>> frame, or throw an error.
>>
>> Sure, but I still need to rewrite the package.
>>
>> G?rn
>>
>>> For tibbles it
>>> drops the tbl* classes.
>>>
>>> Gabor
>>>
>>>> Defensive coding techniques would check if it's a tibble and return
>>>> an error saying a data.frame is expected. Unless tibbles inherit
>>>> correctly from data.frame.
>>>>
>>>> I have nothing against tibbles. But calling them "data.frame" raises
>>>> expectations that can't be fulfilled.
>>>
>>> [...]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> --
>>
>> _____________________________________________________________________
>>
>> Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen
>> Rechts; Gerichtsstand: Hamburg | www.uke.de
>> Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr.
>> Dr. Uwe Koch-Gromus, Joachim Pr?l?, Martina Saurin (komm.)
>> _____________________________________________________________________
>>
>> SAVE PAPER - THINK BEFORE PRINTING
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> --
> 
> _____________________________________________________________________
> 
> Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
> Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr. Dr. Uwe Koch-Gromus, Joachim Pr?l?, Martina Saurin (komm.)
> _____________________________________________________________________
> 
> SAVE PAPER - THINK BEFORE PRINTING
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From csardi.gabor at gmail.com  Tue Sep 26 14:17:49 2017
From: csardi.gabor at gmail.com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 26 Sep 2017 13:17:49 +0100
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CAARY7kjDPxkc6_JFkWLWg0DWczXyZXUV-hX9PZQGaFB5AOy-JQ@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <0ab1dece-770f-10b8-26ae-3769ad79593a@umu.se>
 <002001d336af$d35053f0$79f0fbd0$@uke.de>
 <CABtg=Km5WRHGP0Ze0G6Og7AgwErJWudp8_ODq=barjJzFj=vbw@mail.gmail.com>
 <CAARY7kjDPxkc6_JFkWLWg0DWczXyZXUV-hX9PZQGaFB5AOy-JQ@mail.gmail.com>
Message-ID: <CABtg=KmaRLcEJOaAp38+iJ45Zg2AgMUdywZhYBXgXBNwqifkZQ@mail.gmail.com>

Yes, basically tibbles violate the substitution principle. A lot of
other packages do, probably base R as well, although it is sometimes
hard to say, because there is no clear object hierarchy.

Let's take a step back, and see how you can check for a data frame argument.

1. Weak check.

is.data.frame(arg)

This essentially means that you trust subclasses of data.frame to
adhere to the substitution principle. While this is nice in theory, a
lot packages (including both major packages implementing subclasses of
data.frame!) do not always adhere. So this is not really a safe
solution.

Base R does this as well, sometimes, e.g. aggregate.data.frame has:

    if (!is.data.frame(x))
        x <- as.data.frame(x)

which is essentially equivalent to the weak check, since it leaves
data.frame subclasses untouched.

2. Strong "check".

arg <- as.data.frame(arg)

This is safer, because it does not rely on subclass implementors. It
also has the additional benefit that your code is polymorphic: it
works with any input, as long as it can be converted to a data frame.

Base R also uses this often, e.g. in merge.data.frame:

    nx <- nrow(x <- as.data.frame(x))
    ny <- nrow(y <- as.data.frame(y))

Gabor

Disclaimer: I do not represent the tibble authors in any way.

On Tue, Sep 26, 2017 at 11:21 AM, David Hugh-Jones
<davidhughjones at gmail.com> wrote:
> These replies seem to be missing the point, which is that old code has to be
> rewritten because tibbles don't behave like data frames.
>
> It is true that subclasses can override behaviour, but there is an implicit
> contract that the same methods should do the same things.
>
> The as.xxx pattern seems weird to me, though I see it a lot. What is the
> point of inheritance if you always have to convert an object upwards before
> you can treat it as a member of the superclass?
>
> I can see this argument will run...
>
> David
>
> On 26 September 2017 at 11:15, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>>
>> What is the benefit here, compared to just calling as.data.frame() on it?
>>
>> Gabor
>>
>> On Tue, Sep 26, 2017 at 11:11 AM, Daniel L?decke <d.luedecke at uke.de>
>> wrote:
>> > Since tibbles add their class attributes first, you could use:
>> >
>> > tb <- tibble(a = 5)
>> > inherits(tb, "data.frame", which = TRUE) == 1
>> >
>> > if "tb" is a data frame (only), TRUE is returned, for tibble FALSE. You
>> > could then coerce to data frame: as.data.frame(tb)
>> >
>> > -----Urspr?ngliche Nachricht-----
>> > Von: R-package-devel [mailto:r-package-devel-bounces at r-project.org] Im
>> > Auftrag von G?ran Brostr?m
>> > Gesendet: Dienstag, 26. September 2017 12:09
>> > An: r-package-devel at r-project.org
>> > Betreff: Re: [R-pkg-devel] tibbles are not data frames
>> >
>> >
>> >
>> > On 2017-09-26 11:56, G?bor Cs?rdi wrote:
>> >> On Tue, Sep 26, 2017 at 10:35 AM, Joris Meys <Joris.Meys at ugent.be>
>> >> wrote:
>> >>> I don't like the dropping of dimensions either. That doesn't change
>> >>> the fact that a tibble reacts different from a data.frame. So tibbles
>> >>> do not inherit correctly from the class data.frame, and it can thus
>> >>> be argued that it's against OOP paradigms to pretend tibbles inherit
>> >>> from the class data.frame.
>> >>
>> >> I have yet to see an OOP system in which a subclass cannot override
>> >> the methods of its superclass. Not only is this in line with OOP
>> >> paradigms, it is actually one of the essential OOP features.
>> >>
>> >> To be more constructive, if you have a function that only works with
>> >> data frame inputs, then it is good practice to check that the supplied
>> >> input is indeed a data frame. This is independent of tibbles.
>> >
>> > It is not. I check input for being a data frame, but tibbles pass that
>> > test. That's the essence of the problem.
>> >
>> >> In practice it seems to me that an easy fix is to just call
>> >> as.data.frame on the input. This should either convert it to a data
>> >> frame, or throw an error.
>> >
>> > Sure, but I still need to rewrite the package.
>> >
>> > G?rn
>> >
>> >> For tibbles it
>> >> drops the tbl* classes.
>> >>
>> >> Gabor
>> >>
>> >>> Defensive coding techniques would check if it's a tibble and return
>> >>> an error saying a data.frame is expected. Unless tibbles inherit
>> >>> correctly from data.frame.
>> >>>
>> >>> I have nothing against tibbles. But calling them "data.frame" raises
>> >>> expectations that can't be fulfilled.
>> >>
>> >> [...]
>> >>
>> >> ______________________________________________
>> >> R-package-devel at r-project.org mailing list
>> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >>
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >
>> > --
>> >
>> > _____________________________________________________________________
>> >
>> > Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen
>> > Rechts; Gerichtsstand: Hamburg | www.uke.de
>> > Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr.
>> > Dr. Uwe Koch-Gromus, Joachim Pr?l?, Martina Saurin (komm.)
>> > _____________________________________________________________________
>> >
>> > SAVE PAPER - THINK BEFORE PRINTING
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>


From cj at cjyetman.com  Tue Sep 26 13:45:49 2017
From: cj at cjyetman.com (CJ Yetman)
Date: Tue, 26 Sep 2017 13:45:49 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CAERMt4ei=MehXL=hzwBFw6u6Pa2kiaaGBuBDA44M3-RnTKhHhQ@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <0ab1dece-770f-10b8-26ae-3769ad79593a@umu.se>
 <002001d336af$d35053f0$79f0fbd0$@uke.de>
 <CABtg=Km5WRHGP0Ze0G6Og7AgwErJWudp8_ODq=barjJzFj=vbw@mail.gmail.com>
 <CAHJFP8SKO2i=YWCnW7x5TybNVAzW8N9b8j3S-iGwH_vsr90L7w@mail.gmail.com>
 <CAERMt4ei=MehXL=hzwBFw6u6Pa2kiaaGBuBDA44M3-RnTKhHhQ@mail.gmail.com>
Message-ID: <CANZA7owBPhk2UMDwqgTJ3oGZAenLopgCmYDsNZsrK4AbubLi-Q@mail.gmail.com>

The problem is not with a data.frame or a tibble... the problem is when a
package unwittingly converts a data.frame/tibble to a vector, because of
bad defaults in data.frame methods, and then later on expects that vector
to be a vector without explicitly making it a vector or checking if it is a
vector.

On Tue, Sep 26, 2017 at 1:10 PM, Alexandre Courtiol <
alexandre.courtiol at gmail.com> wrote:

> David is right,
>
> imagine an old silly code such as:
>
> get_a.data.frame <- function(d) if("data.frame" %in% class(d)) d["a" ,]
>
> This line of code giving you the row "a" of a data.frame could be in any
> package.
> No matter how ugly it is, it is technically correct and conforms to the
> original definition of data.frames.
>
> Now you have a data.frame:
>
> foo <- data.frame(x=1:3, row.names = c("a", "b", "c"))
>
> > geta.data.frame(foo)
> [1] 1
>
> this is expected
>
> > geta.data.frame(as.matrix(foo))
> [1]
>
> This returns nothing, again it is expected as a matrix is not a data.frame
>
> But here comes the tibble trouble:
>
> > get_a.data.frame(as.tibble(foo))
> # A tibble: 1 x 1
>       x
>   <int>
> 1    NA
>
> And now the old package is broken.
> Also if we tolerate this, think what would happen if this kind of practice
> would scale up!
> If anyone can call any classes the way they want without fulfilling the law
> of inheritance we will soon be in big troubles, lost among the mutants.
>
> Tibbles are great, data.frame are widely used, Tibbles should not be of the
> class data.frame, unless tibbles start behaving as data.frame do.
>
> Alex
>
>
>
>
>
>
>
>
>
> On 26 September 2017 at 12:21, Stefan McKinnon H?j-Edwards <sme at iysik.com>
> wrote:
>
> > There is no benefit. It is a rather cumbersome approach to checking
> whether
> > something behaves as you expect it to. `as.data.frame` will force it into
> > what you need; if it cannot be forced, then it will fail. That it can be
> > converted to a data.frame is the class' designers responsibility, not
> > yours. So you can use `as.data.frame` on *any* input that you need to
> > behave as a data.frame.
> > Consider a grouped tribble; now you have to test 2 different classes.
> >
> > Kindly,
> > Stefan
> >
> > Stefan McKinnon H?j-Edwards
> > ph.d. Genetics
> > +44 (0)776 231 2464
> > +45 2888 6598
> > Skype: stefan_edwards
> >
> > 2017-09-26 11:15 GMT+01:00 G?bor Cs?rdi <csardi.gabor at gmail.com>:
> >
> > > What is the benefit here, compared to just calling as.data.frame() on
> it?
> > >
> > > Gabor
> > >
> > > On Tue, Sep 26, 2017 at 11:11 AM, Daniel L?decke <d.luedecke at uke.de>
> > > wrote:
> > > > Since tibbles add their class attributes first, you could use:
> > > >
> > > > tb <- tibble(a = 5)
> > > > inherits(tb, "data.frame", which = TRUE) == 1
> > > >
> > > > if "tb" is a data frame (only), TRUE is returned, for tibble FALSE.
> You
> > > could then coerce to data frame: as.data.frame(tb)
> > > >
> > > > -----Urspr?ngliche Nachricht-----
> > > > Von: R-package-devel [mailto:r-package-devel-bounces at r-project.org]
> Im
> > > Auftrag von G?ran Brostr?m
> > > > Gesendet: Dienstag, 26. September 2017 12:09
> > > > An: r-package-devel at r-project.org
> > > > Betreff: Re: [R-pkg-devel] tibbles are not data frames
> > > >
> > > >
> > > >
> > > > On 2017-09-26 11:56, G?bor Cs?rdi wrote:
> > > >> On Tue, Sep 26, 2017 at 10:35 AM, Joris Meys <Joris.Meys at ugent.be>
> > > wrote:
> > > >>> I don't like the dropping of dimensions either. That doesn't change
> > > >>> the fact that a tibble reacts different from a data.frame. So
> tibbles
> > > >>> do not inherit correctly from the class data.frame, and it can thus
> > > >>> be argued that it's against OOP paradigms to pretend tibbles
> inherit
> > > >>> from the class data.frame.
> > > >>
> > > >> I have yet to see an OOP system in which a subclass cannot override
> > > >> the methods of its superclass. Not only is this in line with OOP
> > > >> paradigms, it is actually one of the essential OOP features.
> > > >>
> > > >> To be more constructive, if you have a function that only works with
> > > >> data frame inputs, then it is good practice to check that the
> supplied
> > > >> input is indeed a data frame. This is independent of tibbles.
> > > >
> > > > It is not. I check input for being a data frame, but tibbles pass
> that
> > > test. That's the essence of the problem.
> > > >
> > > >> In practice it seems to me that an easy fix is to just call
> > > >> as.data.frame on the input. This should either convert it to a data
> > > >> frame, or throw an error.
> > > >
> > > > Sure, but I still need to rewrite the package.
> > > >
> > > > G?rn
> > > >
> > > >> For tibbles it
> > > >> drops the tbl* classes.
> > > >>
> > > >> Gabor
> > > >>
> > > >>> Defensive coding techniques would check if it's a tibble and return
> > > >>> an error saying a data.frame is expected. Unless tibbles inherit
> > > >>> correctly from data.frame.
> > > >>>
> > > >>> I have nothing against tibbles. But calling them "data.frame"
> raises
> > > >>> expectations that can't be fulfilled.
> > > >>
> > > >> [...]
> > > >>
> > > >> ______________________________________________
> > > >> R-package-devel at r-project.org mailing list
> > > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > > >>
> > > >
> > > > ______________________________________________
> > > > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/
> > > listinfo/r-package-devel
> > > >
> > > > --
> > > >
> > > > ____________________________________________________________
> _________
> > > >
> > > > Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen
> > > Rechts; Gerichtsstand: Hamburg | www.uke.de
> > > > Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof.
> Dr.
> > > Dr. Uwe Koch-Gromus, Joachim Pr?l?, Martina Saurin (komm.)
> > > > ____________________________________________________________
> _________
> > > >
> > > > SAVE PAPER - THINK BEFORE PRINTING
> > > > ______________________________________________
> > > > R-package-devel at r-project.org mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>
>
> --
> Alexandre Courtiol
>
> http://sites.google.com/site/alexandrecourtiol/home
>
> *"Science is the belief in the ignorance of experts"*, R. Feynman
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From goran.brostrom at umu.se  Tue Sep 26 15:01:19 2017
From: goran.brostrom at umu.se (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Tue, 26 Sep 2017 15:01:19 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CABtg=KmaRLcEJOaAp38+iJ45Zg2AgMUdywZhYBXgXBNwqifkZQ@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <0ab1dece-770f-10b8-26ae-3769ad79593a@umu.se>
 <002001d336af$d35053f0$79f0fbd0$@uke.de>
 <CABtg=Km5WRHGP0Ze0G6Og7AgwErJWudp8_ODq=barjJzFj=vbw@mail.gmail.com>
 <CAARY7kjDPxkc6_JFkWLWg0DWczXyZXUV-hX9PZQGaFB5AOy-JQ@mail.gmail.com>
 <CABtg=KmaRLcEJOaAp38+iJ45Zg2AgMUdywZhYBXgXBNwqifkZQ@mail.gmail.com>
Message-ID: <eb1f0996-02e0-07f1-903a-01896aa4c212@umu.se>

Thanks G?bor,

that is OK. However, if I would like an input tibble remain a tibble 
(after massaging) in output, as a courtesy to the user, this will fail. 
I think that it works if I instead treat the input as a list: That's all 
'the tibble way' does (in my case at least).

G?ran

On 2017-09-26 14:17, G?bor Cs?rdi wrote:
> Yes, basically tibbles violate the substitution principle. A lot of
> other packages do, probably base R as well, although it is sometimes
> hard to say, because there is no clear object hierarchy.
> 
> Let's take a step back, and see how you can check for a data frame argument.
> 
> 1. Weak check.
> 
> is.data.frame(arg)
> 
> This essentially means that you trust subclasses of data.frame to
> adhere to the substitution principle. While this is nice in theory, a
> lot packages (including both major packages implementing subclasses of
> data.frame!) do not always adhere. So this is not really a safe
> solution.
> 
> Base R does this as well, sometimes, e.g. aggregate.data.frame has:
> 
>      if (!is.data.frame(x))
>          x <- as.data.frame(x)
> 
> which is essentially equivalent to the weak check, since it leaves
> data.frame subclasses untouched.
> 
> 2. Strong "check".
> 
> arg <- as.data.frame(arg)
> 
> This is safer, because it does not rely on subclass implementors. It
> also has the additional benefit that your code is polymorphic: it
> works with any input, as long as it can be converted to a data frame.
> 
> Base R also uses this often, e.g. in merge.data.frame:
> 
>      nx <- nrow(x <- as.data.frame(x))
>      ny <- nrow(y <- as.data.frame(y))
> 
> Gabor
> 
> Disclaimer: I do not represent the tibble authors in any way.
> 
> On Tue, Sep 26, 2017 at 11:21 AM, David Hugh-Jones
> <davidhughjones at gmail.com> wrote:
>> These replies seem to be missing the point, which is that old code has to be
>> rewritten because tibbles don't behave like data frames.
>>
>> It is true that subclasses can override behaviour, but there is an implicit
>> contract that the same methods should do the same things.
>>
>> The as.xxx pattern seems weird to me, though I see it a lot. What is the
>> point of inheritance if you always have to convert an object upwards before
>> you can treat it as a member of the superclass?
>>
>> I can see this argument will run...
>>
>> David
>>
>> On 26 September 2017 at 11:15, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>>>
>>> What is the benefit here, compared to just calling as.data.frame() on it?
>>>
>>> Gabor
>>>
>>> On Tue, Sep 26, 2017 at 11:11 AM, Daniel L?decke <d.luedecke at uke.de>
>>> wrote:
>>>> Since tibbles add their class attributes first, you could use:
>>>>
>>>> tb <- tibble(a = 5)
>>>> inherits(tb, "data.frame", which = TRUE) == 1
>>>>
>>>> if "tb" is a data frame (only), TRUE is returned, for tibble FALSE. You
>>>> could then coerce to data frame: as.data.frame(tb)
>>>>
>>>> -----Urspr?ngliche Nachricht-----
>>>> Von: R-package-devel [mailto:r-package-devel-bounces at r-project.org] Im
>>>> Auftrag von G?ran Brostr?m
>>>> Gesendet: Dienstag, 26. September 2017 12:09
>>>> An: r-package-devel at r-project.org
>>>> Betreff: Re: [R-pkg-devel] tibbles are not data frames
>>>>
>>>>
>>>>
>>>> On 2017-09-26 11:56, G?bor Cs?rdi wrote:
>>>>> On Tue, Sep 26, 2017 at 10:35 AM, Joris Meys <Joris.Meys at ugent.be>
>>>>> wrote:
>>>>>> I don't like the dropping of dimensions either. That doesn't change
>>>>>> the fact that a tibble reacts different from a data.frame. So tibbles
>>>>>> do not inherit correctly from the class data.frame, and it can thus
>>>>>> be argued that it's against OOP paradigms to pretend tibbles inherit
>>>>>> from the class data.frame.
>>>>>
>>>>> I have yet to see an OOP system in which a subclass cannot override
>>>>> the methods of its superclass. Not only is this in line with OOP
>>>>> paradigms, it is actually one of the essential OOP features.
>>>>>
>>>>> To be more constructive, if you have a function that only works with
>>>>> data frame inputs, then it is good practice to check that the supplied
>>>>> input is indeed a data frame. This is independent of tibbles.
>>>>
>>>> It is not. I check input for being a data frame, but tibbles pass that
>>>> test. That's the essence of the problem.
>>>>
>>>>> In practice it seems to me that an easy fix is to just call
>>>>> as.data.frame on the input. This should either convert it to a data
>>>>> frame, or throw an error.
>>>>
>>>> Sure, but I still need to rewrite the package.
>>>>
>>>> G?rn
>>>>
>>>>> For tibbles it
>>>>> drops the tbl* classes.
>>>>>
>>>>> Gabor
>>>>>
>>>>>> Defensive coding techniques would check if it's a tibble and return
>>>>>> an error saying a data.frame is expected. Unless tibbles inherit
>>>>>> correctly from data.frame.
>>>>>>
>>>>>> I have nothing against tibbles. But calling them "data.frame" raises
>>>>>> expectations that can't be fulfilled.
>>>>>
>>>>> [...]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>> --
>>>>
>>>> _____________________________________________________________________
>>>>
>>>> Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen
>>>> Rechts; Gerichtsstand: Hamburg | www.uke.de
>>>> Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr.
>>>> Dr. Uwe Koch-Gromus, Joachim Pr?l?, Martina Saurin (komm.)
>>>> _____________________________________________________________________
>>>>
>>>> SAVE PAPER - THINK BEFORE PRINTING
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From jeroenooms at gmail.com  Tue Sep 26 15:28:31 2017
From: jeroenooms at gmail.com (Jeroen Ooms)
Date: Tue, 26 Sep 2017 15:28:31 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
Message-ID: <CABFfbXtEaX0moo7D3VuP=K33zCj63e2Z-kzUhQC=iSdod7bT4g@mail.gmail.com>

On Tue, Sep 26, 2017 at 11:56 AM, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>
> On Tue, Sep 26, 2017 at 10:35 AM, Joris Meys <Joris.Meys at ugent.be> wrote:
> > I don't like the dropping of dimensions either. That doesn't change the
> > fact that a tibble reacts different from a data.frame. So tibbles do not
> > inherit correctly from the class data.frame, and it can thus be argued that
> > it's against OOP paradigms to pretend tibbles inherit from the class
> > data.frame.
>
> I have yet to see an OOP system in which a subclass cannot override the methods
> of its superclass. Not only is this in line with OOP paradigms, it is
> actually one of the essential OOP features.

Not if this compromises type safety. Formal OOP languages enforce the
signature matches when you override a method. The fact that R is
dynamically typed puts this responsibility at the developer. The fact
that tibble [ returns a data frame where it's parent class returns an
atomic vector violates this principle, resulting in the obvious type
errors where tibbles are used as data frames.


From h.wickham at gmail.com  Tue Sep 26 15:33:02 2017
From: h.wickham at gmail.com (Hadley Wickham)
Date: Tue, 26 Sep 2017 08:33:02 -0500
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CABFfbXtEaX0moo7D3VuP=K33zCj63e2Z-kzUhQC=iSdod7bT4g@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <CABFfbXtEaX0moo7D3VuP=K33zCj63e2Z-kzUhQC=iSdod7bT4g@mail.gmail.com>
Message-ID: <CABdHhvGmY+L2pb6DY-A2FmMBcA07OnP9fr_xvTmuwB7=jNmu3w@mail.gmail.com>

On Tue, Sep 26, 2017 at 8:28 AM, Jeroen Ooms <jeroenooms at gmail.com> wrote:
> On Tue, Sep 26, 2017 at 11:56 AM, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>>
>> On Tue, Sep 26, 2017 at 10:35 AM, Joris Meys <Joris.Meys at ugent.be> wrote:
>> > I don't like the dropping of dimensions either. That doesn't change the
>> > fact that a tibble reacts different from a data.frame. So tibbles do not
>> > inherit correctly from the class data.frame, and it can thus be argued that
>> > it's against OOP paradigms to pretend tibbles inherit from the class
>> > data.frame.
>>
>> I have yet to see an OOP system in which a subclass cannot override the methods
>> of its superclass. Not only is this in line with OOP paradigms, it is
>> actually one of the essential OOP features.
>
> Not if this compromises type safety. Formal OOP languages enforce the
> signature matches when you override a method. The fact that R is
> dynamically typed puts this responsibility at the developer. The fact
> that tibble [ returns a data frame where it's parent class returns an
> atomic vector violates this principle, resulting in the obvious type
> errors where tibbles are used as data frames.

Where its parent class _sometimes_ returns an atomic vector and
_sometimes_ returns a data frame.

Hadley

-- 
http://hadley.nz


From Joris.Meys at ugent.be  Tue Sep 26 15:35:20 2017
From: Joris.Meys at ugent.be (Joris Meys)
Date: Tue, 26 Sep 2017 15:35:20 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CABdHhvGmY+L2pb6DY-A2FmMBcA07OnP9fr_xvTmuwB7=jNmu3w@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <CABFfbXtEaX0moo7D3VuP=K33zCj63e2Z-kzUhQC=iSdod7bT4g@mail.gmail.com>
 <CABdHhvGmY+L2pb6DY-A2FmMBcA07OnP9fr_xvTmuwB7=jNmu3w@mail.gmail.com>
Message-ID: <CAO1zAVbcnz=1fn_3PdMvAL66po1WHpygR9a4-bWr0T9G4xTrTg@mail.gmail.com>

Where its parent class _sometimes_ returns an atomic vector and

> _sometimes_ returns a data frame.
>
> Hadley
>

Indeed. And a tibble doesn't, so there's a conflict. Nobody said data.frame
works better than tibble. Actually, we all agree that the legacy behaviour
sucks. But it exists, and causes conflicts when users expect a tibble to
behave the same as a data.frame.

It does not.

-- 
Joris Meys
Statistical consultant

Ghent University
Faculty of Bioscience Engineering
Department of Mathematical Modelling, Statistics and Bio-Informatics

tel : +32 9 264 59 87
Joris.Meys at Ugent.be
-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From h.wickham at gmail.com  Tue Sep 26 15:37:01 2017
From: h.wickham at gmail.com (Hadley Wickham)
Date: Tue, 26 Sep 2017 08:37:01 -0500
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
Message-ID: <CABdHhvE1Zeu18h=uL1__79-x3ysS3jmkEPgW5vWsU_CkLmbUyw@mail.gmail.com>

On Tue, Sep 26, 2017 at 2:30 AM, G?ran Brostr?m <goran.brostrom at umu.se> wrote:
> I am beginning to get complaints from users of my CRAN packages (especially
> 'eha') to the effect that they get error messages like "Error: Unsupported
> use of matrix or array for column indexing".
>
> It turns out that they are sticking in tibbles into functions that expect
> data frames as input. And I am using the kind of subsetting that Hadley
> dislikes (eha is an old package, much older than tibbles). It is of course a
> simple matter to change the code so it handles both data frames and tibbles
> correctly, but this affects many functions, and it will take some time. And
> when the next guy introduces 'troubles' as an improvement of 'tibbles', I
> will have to rewrite the code again.

Changing df[, x] to df[[x]] is not very hard and makes your code
easier to understand because it more clearly conveys the intent that
you want a single column.

> While I like Hadley's way of doing it, I think it is a mistake to let a
> tibble also be of class data frame. To me it is a matter of inheritance and
> backwards compability: A tibble should add nice things to a data frame, not
> change basic behaviour, in order to call itself a data frame.
>
> Is it correct to let a tibble be of class "data.frame"?

If it not inherit from data frame, it would be not work with the 99%
of functions that work with data frames and don't deliberately take
advantage of the dropping behaviour of [. In other words, it would be
pointless.

I decided to make [.tibble type-stable (i.e. always return a data
frame) because this behaviour causes substantial problems in real data
analysis code. I did it understanding that it would cause some package
developers frustration, but I think it's better for a handful of
package maintainers to be frustrated than hundreds of users creating
dangerous code.

Hadley

-- 
http://hadley.nz


From h.wickham at gmail.com  Tue Sep 26 15:38:30 2017
From: h.wickham at gmail.com (Hadley Wickham)
Date: Tue, 26 Sep 2017 08:38:30 -0500
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CAO1zAVbcnz=1fn_3PdMvAL66po1WHpygR9a4-bWr0T9G4xTrTg@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <CABFfbXtEaX0moo7D3VuP=K33zCj63e2Z-kzUhQC=iSdod7bT4g@mail.gmail.com>
 <CABdHhvGmY+L2pb6DY-A2FmMBcA07OnP9fr_xvTmuwB7=jNmu3w@mail.gmail.com>
 <CAO1zAVbcnz=1fn_3PdMvAL66po1WHpygR9a4-bWr0T9G4xTrTg@mail.gmail.com>
Message-ID: <CABdHhvG5Gx1BZbnaiVVxP5b5zjPUDuLxTd=tgU4JJwR1J4kj=g@mail.gmail.com>

On Tue, Sep 26, 2017 at 8:35 AM, Joris Meys <Joris.Meys at ugent.be> wrote:
> Where its parent class _sometimes_ returns an atomic vector and
>>
>> _sometimes_ returns a data frame.
>
> Indeed. And a tibble doesn't, so there's a conflict. Nobody said data.frame
> works better than tibble. Actually, we all agree that the legacy behaviour
> sucks. But it exists, and causes conflicts when users expect a tibble to
> behave the same as a data.frame.
>
> It does not.

So we should never try and improve upon legacy behaviour? I don't
understand what you're arguing for here. If a tibble didn't inherit
from a data frame, it would be useless.

Hadley

-- 
http://hadley.nz


From pedro.aphalo at helsinki.fi  Tue Sep 26 15:51:24 2017
From: pedro.aphalo at helsinki.fi (Pedro J. Aphalo)
Date: Tue, 26 Sep 2017 16:51:24 +0300
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <eb1f0996-02e0-07f1-903a-01896aa4c212@umu.se>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <0ab1dece-770f-10b8-26ae-3769ad79593a@umu.se>
 <002001d336af$d35053f0$79f0fbd0$@uke.de>
 <CABtg=Km5WRHGP0Ze0G6Og7AgwErJWudp8_ODq=barjJzFj=vbw@mail.gmail.com>
 <CAARY7kjDPxkc6_JFkWLWg0DWczXyZXUV-hX9PZQGaFB5AOy-JQ@mail.gmail.com>
 <CABtg=KmaRLcEJOaAp38+iJ45Zg2AgMUdywZhYBXgXBNwqifkZQ@mail.gmail.com>
 <eb1f0996-02e0-07f1-903a-01896aa4c212@umu.se>
Message-ID: <d1f82e62-823c-01b1-7034-3936ad414d30@helsinki.fi>

What I think is troublesome is that data.frame is part of the definition 
of the R language, and the expectation based on R's normal behaviour is 
that testing with is.data.frame() should be enough to ensure that an 
object can be treated as a data frame. We can think of different 
solutions for use in our packages, but the naive R user will be always 
surprised by the behaviour of tibbles because package 'tibble' breaks 
the expectations of the R language with an exception.

I do not know what could be the best solution... though. Maybe thinking 
of tibbles as a step towards R++ or R 4 or whatever future enhanced 
version of R, in which they will replace data frames completely. Hadley 
is correct in that they are a very significant improvement to R, but the 
problem is the inconsistent behaviour.

Pedro.


On 2017-09-26 16:01, G?ran Brostr?m wrote:
> Thanks G?bor,
>
> that is OK. However, if I would like an input tibble remain a tibble 
> (after massaging) in output, as a courtesy to the user, this will 
> fail. I think that it works if I instead treat the input as a list: 
> That's all 'the tibble way' does (in my case at least).
>
> G?ran
>
> On 2017-09-26 14:17, G?bor Cs?rdi wrote:
>> Yes, basically tibbles violate the substitution principle. A lot of
>> other packages do, probably base R as well, although it is sometimes
>> hard to say, because there is no clear object hierarchy.
>>
>> Let's take a step back, and see how you can check for a data frame 
>> argument.
>>
>> 1. Weak check.
>>
>> is.data.frame(arg)
>>
>> This essentially means that you trust subclasses of data.frame to
>> adhere to the substitution principle. While this is nice in theory, a
>> lot packages (including both major packages implementing subclasses of
>> data.frame!) do not always adhere. So this is not really a safe
>> solution.
>>
>> Base R does this as well, sometimes, e.g. aggregate.data.frame has:
>>
>> ???? if (!is.data.frame(x))
>> ???????? x <- as.data.frame(x)
>>
>> which is essentially equivalent to the weak check, since it leaves
>> data.frame subclasses untouched.
>>
>> 2. Strong "check".
>>
>> arg <- as.data.frame(arg)
>>
>> This is safer, because it does not rely on subclass implementors. It
>> also has the additional benefit that your code is polymorphic: it
>> works with any input, as long as it can be converted to a data frame.
>>
>> Base R also uses this often, e.g. in merge.data.frame:
>>
>> ???? nx <- nrow(x <- as.data.frame(x))
>> ???? ny <- nrow(y <- as.data.frame(y))
>>
>> Gabor
>>
>> Disclaimer: I do not represent the tibble authors in any way.
>>
>> On Tue, Sep 26, 2017 at 11:21 AM, David Hugh-Jones
>> <davidhughjones at gmail.com> wrote:
>>> These replies seem to be missing the point, which is that old code 
>>> has to be
>>> rewritten because tibbles don't behave like data frames.
>>>
>>> It is true that subclasses can override behaviour, but there is an 
>>> implicit
>>> contract that the same methods should do the same things.
>>>
>>> The as.xxx pattern seems weird to me, though I see it a lot. What is 
>>> the
>>> point of inheritance if you always have to convert an object upwards 
>>> before
>>> you can treat it as a member of the superclass?
>>>
>>> I can see this argument will run...
>>>
>>> David
>>>
>>> On 26 September 2017 at 11:15, G?bor Cs?rdi <csardi.gabor at gmail.com> 
>>> wrote:
>>>>
>>>> What is the benefit here, compared to just calling as.data.frame() 
>>>> on it?
>>>>
>>>> Gabor
>>>>
>>>> On Tue, Sep 26, 2017 at 11:11 AM, Daniel L?decke <d.luedecke at uke.de>
>>>> wrote:
>>>>> Since tibbles add their class attributes first, you could use:
>>>>>
>>>>> tb <- tibble(a = 5)
>>>>> inherits(tb, "data.frame", which = TRUE) == 1
>>>>>
>>>>> if "tb" is a data frame (only), TRUE is returned, for tibble 
>>>>> FALSE. You
>>>>> could then coerce to data frame: as.data.frame(tb)
>>>>>
>>>>> -----Urspr?ngliche Nachricht-----
>>>>> Von: R-package-devel 
>>>>> [mailto:r-package-devel-bounces at r-project.org] Im
>>>>> Auftrag von G?ran Brostr?m
>>>>> Gesendet: Dienstag, 26. September 2017 12:09
>>>>> An: r-package-devel at r-project.org
>>>>> Betreff: Re: [R-pkg-devel] tibbles are not data frames
>>>>>
>>>>>
>>>>>
>>>>> On 2017-09-26 11:56, G?bor Cs?rdi wrote:
>>>>>> On Tue, Sep 26, 2017 at 10:35 AM, Joris Meys <Joris.Meys at ugent.be>
>>>>>> wrote:
>>>>>>> I don't like the dropping of dimensions either. That doesn't change
>>>>>>> the fact that a tibble reacts different from a data.frame. So 
>>>>>>> tibbles
>>>>>>> do not inherit correctly from the class data.frame, and it can thus
>>>>>>> be argued that it's against OOP paradigms to pretend tibbles 
>>>>>>> inherit
>>>>>>> from the class data.frame.
>>>>>>
>>>>>> I have yet to see an OOP system in which a subclass cannot override
>>>>>> the methods of its superclass. Not only is this in line with OOP
>>>>>> paradigms, it is actually one of the essential OOP features.
>>>>>>
>>>>>> To be more constructive, if you have a function that only works with
>>>>>> data frame inputs, then it is good practice to check that the 
>>>>>> supplied
>>>>>> input is indeed a data frame. This is independent of tibbles.
>>>>>
>>>>> It is not. I check input for being a data frame, but tibbles pass 
>>>>> that
>>>>> test. That's the essence of the problem.
>>>>>
>>>>>> In practice it seems to me that an easy fix is to just call
>>>>>> as.data.frame on the input. This should either convert it to a data
>>>>>> frame, or throw an error.
>>>>>
>>>>> Sure, but I still need to rewrite the package.
>>>>>
>>>>> G?rn
>>>>>
>>>>>> For tibbles it
>>>>>> drops the tbl* classes.
>>>>>>
>>>>>> Gabor
>>>>>>
>>>>>>> Defensive coding techniques would check if it's a tibble and return
>>>>>>> an error saying a data.frame is expected. Unless tibbles inherit
>>>>>>> correctly from data.frame.
>>>>>>>
>>>>>>> I have nothing against tibbles. But calling them "data.frame" 
>>>>>>> raises
>>>>>>> expectations that can't be fulfilled.
>>>>>>
>>>>>> [...]
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>>> -- 
>>>>>
>>>>> _____________________________________________________________________
>>>>>
>>>>> Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen
>>>>> Rechts; Gerichtsstand: Hamburg | www.uke.de
>>>>> Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. 
>>>>> Dr.
>>>>> Dr. Uwe Koch-Gromus, Joachim Pr?l?, Martina Saurin (komm.)
>>>>> _____________________________________________________________________
>>>>>
>>>>> SAVE PAPER - THINK BEFORE PRINTING
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
------------------------------------------------------------------------
Pedro J. Aphalo
University Lecturer, Principal Investigator
(Office 4417, Biocenter 3, Viikinkaari 1)

Department of Biosciences
Plant Biology
P.O. Box 65
00014 University of Helsinki
Finland

e-mail: pedro.aphalo at helsinki.fi <mailto:pedro.aphalo at helsinki.fi>
Tel. (mobile) +358 50 4150623
Tel. (office) +358 2941 57897

------------------------------------------------------------------------
*Web sites and blogs*
Web site (research group): http://blogs.helsinki.fi/senpep-blog/
Web site (own teaching): http://www.helsinki.fi/people/pedro.aphalo/
Web site (using R in photobiology): http://www.r4photobiology.info/
------------------------------------------------------------------------
*Societies*
UV4Plants <http://www.uv4plants.org/> (communications officer), ESP 
<http://www.photobiology.eu/> (member) SEB <http://www.sebiology.org/> 
(member), BES <http://www.britishecologicalsociety.org/> (member), SPPS 
<http://www.spps.fi/> (member), SMS 
<http://www.metsatieteellinenseura.fi/english> (member), TUG 
<http://tug.org/> (member), FOAS <http://www.foastat.org/> (member).
------------------------------------------------------------------------

	[[alternative HTML version deleted]]


From h.wickham at gmail.com  Tue Sep 26 16:06:37 2017
From: h.wickham at gmail.com (Hadley Wickham)
Date: Tue, 26 Sep 2017 09:06:37 -0500
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <d1f82e62-823c-01b1-7034-3936ad414d30@helsinki.fi>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <0ab1dece-770f-10b8-26ae-3769ad79593a@umu.se>
 <002001d336af$d35053f0$79f0fbd0$@uke.de>
 <CABtg=Km5WRHGP0Ze0G6Og7AgwErJWudp8_ODq=barjJzFj=vbw@mail.gmail.com>
 <CAARY7kjDPxkc6_JFkWLWg0DWczXyZXUV-hX9PZQGaFB5AOy-JQ@mail.gmail.com>
 <CABtg=KmaRLcEJOaAp38+iJ45Zg2AgMUdywZhYBXgXBNwqifkZQ@mail.gmail.com>
 <eb1f0996-02e0-07f1-903a-01896aa4c212@umu.se>
 <d1f82e62-823c-01b1-7034-3936ad414d30@helsinki.fi>
Message-ID: <CABdHhvGF7e-3ba04VHGMCv0PbfDZUBuK3Yup_vfe+UAyPnRDWA@mail.gmail.com>

On Tue, Sep 26, 2017 at 8:51 AM, Pedro J. Aphalo
<pedro.aphalo at helsinki.fi> wrote:
> What I think is troublesome is that data.frame is part of the definition
> of the R language, and the expectation based on R's normal behaviour is
> that testing with is.data.frame() should be enough to ensure that an
> object can be treated as a data frame. We can think of different
> solutions for use in our packages, but the naive R user will be always
> surprised by the behaviour of tibbles because package 'tibble' breaks
> the expectations of the R language with an exception.
>
> I do not know what could be the best solution... though. Maybe thinking
> of tibbles as a step towards R++ or R 4 or whatever future enhanced
> version of R, in which they will replace data frames completely. Hadley
> is correct in that they are a very significant improvement to R, but the
> problem is the inconsistent behaviour.

There are basically two classes of surprise:

1) You might be surprised that [ sometimes returns a vector and
sometimes returns a data frame.

2) You might be surprised that tibbles behave differently to data
frames for this one method.

I obviously believe that 1) is the worse surprise, but others differ.
This wouldn't normally be a problem but people use tibbles with
packages written by people who don't share my belief that 1) is
surprising and dangerous.

Hadley

-- 
http://hadley.nz


From Joris.Meys at ugent.be  Tue Sep 26 16:15:28 2017
From: Joris.Meys at ugent.be (Joris Meys)
Date: Tue, 26 Sep 2017 16:15:28 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CABdHhvG5Gx1BZbnaiVVxP5b5zjPUDuLxTd=tgU4JJwR1J4kj=g@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <CABFfbXtEaX0moo7D3VuP=K33zCj63e2Z-kzUhQC=iSdod7bT4g@mail.gmail.com>
 <CABdHhvGmY+L2pb6DY-A2FmMBcA07OnP9fr_xvTmuwB7=jNmu3w@mail.gmail.com>
 <CAO1zAVbcnz=1fn_3PdMvAL66po1WHpygR9a4-bWr0T9G4xTrTg@mail.gmail.com>
 <CABdHhvG5Gx1BZbnaiVVxP5b5zjPUDuLxTd=tgU4JJwR1J4kj=g@mail.gmail.com>
Message-ID: <CAO1zAVbVvcCCaLVuJtY6q2C-CCBrV-am6Bb=qskjExe-zGLFAw@mail.gmail.com>

On Tue, Sep 26, 2017 at 3:38 PM, Hadley Wickham <h.wickham at gmail.com> wrote:

>
> So we should never try and improve upon legacy behaviour? I don't
> understand what you're arguing for here. If a tibble didn't inherit
> from a data frame, it would be useless.
>
> Hadley
>
> --
> http://hadley.nz
>

I didn't say that. I said a tibble does not react always like a data.frame,
and you of all people know very well that this is by design. I consider
this a good design choice, but it also means one shouldn't expect that all
code that works with a data.frame will also work with a tibble.

By design.

That's what initiated this entire discussion, and that is a correct
assessment. I am not arguing for any change, and said before that it is up
to the package developer to choose whether he/she takes tibbles into
account. It's not because I comment on tibbles or the tidyverse, that it is
meant as a frontal attack on your work. I cannot repeat enough how much I
value that. But the difference should be acknowledged, and imho in the
first place by the user.

I for one am happy this discussion pops up, because it's a piece of
information I give to my students as well: convert to a data.frame when you
start your analysis just to play safe. And this discussion shows why that
is -for the time being!- a good advice. The moment tibbles become the
default data format in R, or some R++, or in Julia for all I care, I'll be
more than happy to burn that drop = FALSE on a stake. But for now we can't
ignore the differences and the potential for conflicts when you try to use
a tibble instead of a data.frame.

With respect
Joris

-- 
Joris Meys
Statistical consultant

Ghent University
Faculty of Bioscience Engineering
Department of Mathematical Modelling, Statistics and Bio-Informatics

tel : +32 9 264 59 87
Joris.Meys at Ugent.be
-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From goran.brostrom at umu.se  Tue Sep 26 16:27:04 2017
From: goran.brostrom at umu.se (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Tue, 26 Sep 2017 16:27:04 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CABdHhvE1Zeu18h=uL1__79-x3ysS3jmkEPgW5vWsU_CkLmbUyw@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CABdHhvE1Zeu18h=uL1__79-x3ysS3jmkEPgW5vWsU_CkLmbUyw@mail.gmail.com>
Message-ID: <8978715b-35a5-ee44-74fa-f3afc5014874@umu.se>



On 2017-09-26 15:37, Hadley Wickham wrote:
> On Tue, Sep 26, 2017 at 2:30 AM, G?ran Brostr?m <goran.brostrom at umu.se> wrote:
>> I am beginning to get complaints from users of my CRAN packages (especially
>> 'eha') to the effect that they get error messages like "Error: Unsupported
>> use of matrix or array for column indexing".
>>
>> It turns out that they are sticking in tibbles into functions that expect
>> data frames as input. And I am using the kind of subsetting that Hadley
>> dislikes (eha is an old package, much older than tibbles). It is of course a
>> simple matter to change the code so it handles both data frames and tibbles
>> correctly, but this affects many functions, and it will take some time. And
>> when the next guy introduces 'troubles' as an improvement of 'tibbles', I
>> will have to rewrite the code again.
> 
> Changing df[, x] to df[[x]] is not very hard and makes your code
> easier to understand because it more clearly conveys the intent that
> you want a single column.

Couldn't agree more: Not because it works with tibbles, but because it 
works with lists. And therefore with data frames. If we trust inheritance.

G?ran

>> While I like Hadley's way of doing it, I think it is a mistake to let a
>> tibble also be of class data frame. To me it is a matter of inheritance and
>> backwards compability: A tibble should add nice things to a data frame, not
>> change basic behaviour, in order to call itself a data frame.
>>
>> Is it correct to let a tibble be of class "data.frame"?
> 
> If it not inherit from data frame, it would be not work with the 99%
> of functions that work with data frames and don't deliberately take
> advantage of the dropping behaviour of [. In other words, it would be
> pointless.
> 
> I decided to make [.tibble type-stable (i.e. always return a data
> frame) because this behaviour causes substantial problems in real data
> analysis code.
> I did it understanding that it would cause some package
> developers frustration, but I think it's better for a handful of
> package maintainers to be frustrated than hundreds of users creating
> dangerous code.

> Hadley
>


From h.wickham at gmail.com  Tue Sep 26 17:29:41 2017
From: h.wickham at gmail.com (Hadley Wickham)
Date: Tue, 26 Sep 2017 10:29:41 -0500
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <59CA62A3.4090505@gmail.com>
References: <CABdHhvGF7e-3ba04VHGMCv0PbfDZUBuK3Yup_vfe+UAyPnRDWA@mail.gmail.com>
 <59CA62A3.4090505@gmail.com>
Message-ID: <CABdHhvEa6bB+59vadxyzaFCEYo1KgMWSrMLA-QvFAoMbWQUYXQ@mail.gmail.com>

On Tue, Sep 26, 2017 at 9:22 AM, Patrick Perry <patperry at gmail.com> wrote:
> Would it be possible to change tibbles so that
>
> x[,1,drop=TRUE]
>
> returns a vector, not a data frame? I certainly find it surprising that
> tibbles ignore
> the drop argument. If tibbles respeced the drop argument, then package
> developers could rely on
>
> x[,1,drop=FALSE]
>
> or
>
> x[,1,drop=TRUE]
>
> behaving consistently, regardless of whether the argument is a tibble or a
> data.frame.

They can currently rely on x[[1]] returning alway a vector and x[, 1,
drop = FALSE] always returning a data frame whether x is a tibble or a
data frame. I personally don't believe that an additional approach
would help.

> Alternatively, would it be possible to make is.data.frame return FALSE for a
> tibble? Then
> developers that want base-R data.frame behavior can do
>
> if (!is.data.frame(x)) {
>     x <- as.data.frame(x)
> }
>

As I've said elsewhere in the thread that would effectively render
tibbles useless because they wouldn't work with many functions.

Hadley

-- 
http://hadley.nz


From h.wickham at gmail.com  Tue Sep 26 17:33:22 2017
From: h.wickham at gmail.com (Hadley Wickham)
Date: Tue, 26 Sep 2017 10:33:22 -0500
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CAO1zAVbVvcCCaLVuJtY6q2C-CCBrV-am6Bb=qskjExe-zGLFAw@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <CABFfbXtEaX0moo7D3VuP=K33zCj63e2Z-kzUhQC=iSdod7bT4g@mail.gmail.com>
 <CABdHhvGmY+L2pb6DY-A2FmMBcA07OnP9fr_xvTmuwB7=jNmu3w@mail.gmail.com>
 <CAO1zAVbcnz=1fn_3PdMvAL66po1WHpygR9a4-bWr0T9G4xTrTg@mail.gmail.com>
 <CABdHhvG5Gx1BZbnaiVVxP5b5zjPUDuLxTd=tgU4JJwR1J4kj=g@mail.gmail.com>
 <CAO1zAVbVvcCCaLVuJtY6q2C-CCBrV-am6Bb=qskjExe-zGLFAw@mail.gmail.com>
Message-ID: <CABdHhvG0T7XMKfbktNTERgv2zHR-d44CXdgZZsWLG4h2uTWU+g@mail.gmail.com>

> I for one am happy this discussion pops up, because it's a piece of
> information I give to my students as well: convert to a data.frame when you
> start your analysis just to play safe. And this discussion shows why that is
> -for the time being!- a good advice. The moment tibbles become the default
> data format in R, or some R++, or in Julia for all I care, I'll be more than
> happy to burn that drop = FALSE on a stake. But for now we can't ignore the
> differences and the potential for conflicts when you try to use a tibble
> instead of a data.frame.

I think this is sub-optimal advice because most functions do work fine
with tibbles. It is only a few packages (largely written some time
ago) that don't. And typically, if they don't work with tibbles,
you'll get a (usually slightly confusing) error message because some
function will get a data frame instead of a vector. So as far I can
tell, you only need to as.data.frame() retrospectively, not
prospectively. Are you aware of any code that returns an incorrect
result (i.e. no error) when given a tibble instead of a data frame?

Hadley

-- 
http://hadley.nz


From Joris.Meys at ugent.be  Tue Sep 26 17:40:26 2017
From: Joris.Meys at ugent.be (Joris Meys)
Date: Tue, 26 Sep 2017 17:40:26 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CABdHhvG0T7XMKfbktNTERgv2zHR-d44CXdgZZsWLG4h2uTWU+g@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <CABFfbXtEaX0moo7D3VuP=K33zCj63e2Z-kzUhQC=iSdod7bT4g@mail.gmail.com>
 <CABdHhvGmY+L2pb6DY-A2FmMBcA07OnP9fr_xvTmuwB7=jNmu3w@mail.gmail.com>
 <CAO1zAVbcnz=1fn_3PdMvAL66po1WHpygR9a4-bWr0T9G4xTrTg@mail.gmail.com>
 <CABdHhvG5Gx1BZbnaiVVxP5b5zjPUDuLxTd=tgU4JJwR1J4kj=g@mail.gmail.com>
 <CAO1zAVbVvcCCaLVuJtY6q2C-CCBrV-am6Bb=qskjExe-zGLFAw@mail.gmail.com>
 <CABdHhvG0T7XMKfbktNTERgv2zHR-d44CXdgZZsWLG4h2uTWU+g@mail.gmail.com>
Message-ID: <CAO1zAVant8FdcRP+YYY3v1JZSYUG3_BB1Ooua_x3W3dxa8kv=Q@mail.gmail.com>

On Tue, Sep 26, 2017 at 5:33 PM, Hadley Wickham <h.wickham at gmail.com> wrote:

> > I for one am happy this discussion pops up, because it's a piece of
> > information I give to my students as well: convert to a data.frame when
> you
> > start your analysis just to play safe. And this discussion shows why
> that is
> > -for the time being!- a good advice. The moment tibbles become the
> default
> > data format in R, or some R++, or in Julia for all I care, I'll be more
> than
> > happy to burn that drop = FALSE on a stake. But for now we can't ignore
> the
> > differences and the potential for conflicts when you try to use a tibble
> > instead of a data.frame.
>
> I think this is sub-optimal advice because most functions do work fine
> with tibbles.


Most. Not all. Either tibbles work exactly like a data.frame, or they
don't. If they do, I wouldn't give that advice. But they don't.

It is only a few packages (largely written some time
> ago) that don't. And typically, if they don't work with tibbles,
> you'll get a (usually slightly confusing) error message because some
> function will get a data frame instead of a vector. So as far I can
> tell, you only need to as.data.frame() retrospectively, not
> prospectively. Are you aware of any code that returns an incorrect
> result (i.e. no error) when given a tibble instead of a data frame?
>

x <- tibble(a = 1:5, b = 5:1)

relcount <- function(x, id){
  table(x[,id]) / length(x[,id])
}
relcount(x, "a")
relcount(as.data.frame(x), "a")

You're welcome.


>
> Hadley
>
> --
> http://hadley.nz
>



-- 
Joris Meys
Statistical consultant

Ghent University
Faculty of Bioscience Engineering
Department of Mathematical Modelling, Statistics and Bio-Informatics

tel : +32 9 264 59 87
Joris.Meys at Ugent.be
-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From pperry at stern.nyu.edu  Tue Sep 26 19:15:04 2017
From: pperry at stern.nyu.edu (Patrick Perry)
Date: Tue, 26 Sep 2017 13:15:04 -0400
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CABdHhvEa6bB+59vadxyzaFCEYo1KgMWSrMLA-QvFAoMbWQUYXQ@mail.gmail.com>
References: <CABdHhvGF7e-3ba04VHGMCv0PbfDZUBuK3Yup_vfe+UAyPnRDWA@mail.gmail.com>
 <59CA62A3.4090505@gmail.com>
 <CABdHhvEa6bB+59vadxyzaFCEYo1KgMWSrMLA-QvFAoMbWQUYXQ@mail.gmail.com>
Message-ID: <59CA8B18.8060904@stern.nyu.edu>

Pro ignoring x[,1,drop=TRUE]:
(1) it forces users to write consistent code for extracting a vector 
from a data frame

Con:
(1) functions that accept both matrices and data frames might break 
(x[[j]][i] doesn't work for a matrix)
(2) functions that use the access pattern x[i,j,drop = TRUE] will break

Most of the breakages for Con (2) can be fixed by changing to x[[j]][i], 
but not all of them:

 > x <- data.frame(V=1:26, row.names = letters)
 > x[c("a","e","i","o","u"), "V", drop = TRUE]
[1]  1  5  9 15 21
 > x[["V"]][c("a","e","i","o","u")]
[1] NA NA NA NA NA

To me, the Cons outweigh the Pro, but I understand that the tidyverse 
puts a heavy weight on "one way to do things".

Perhaps a bigger issue with tibbles is that they don't let you index 
with row names:

 > y <- tibble(x = letters)
 > rownames(y)
  [1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10" "11" "12" "13" 
"14" "15"
[16] "16" "17" "18" "19" "20" "21" "22" "23" "24" "25" "26"
 > y[rownames(y)[c(1,5,9,15,21)],]
# A tibble: 5 x 1
       x
<chr>
1 <NA>
2 <NA>
3 <NA>
4 <NA>
5 <NA>

If you want to write code that supports both tibbles and data frames, 
then you either have to avoid row names and drop = TRUE, or else you 
have to call `as.data.frame` on the input. This goes the other way, too. 
If you want to write a tidyverse function that also accepts data.frames, 
then you should call as_tibble on the input, otherwise your function 
will break when you index the input like x[,1].


Patrick
> Hadley Wickham <mailto:h.wickham at gmail.com>
> September 26, 2017 at 11:29 AM
> On Tue, Sep 26, 2017 at 9:22 AM, Patrick Perry<patperry at gmail.com>  wrote:
>> Would it be possible to change tibbles so that
>>
>> x[,1,drop=TRUE]
>>
>> returns a vector, not a data frame? I certainly find it surprising that
>> tibbles ignore
>> the drop argument. If tibbles respeced the drop argument, then package
>> developers could rely on
>>
>> x[,1,drop=FALSE]
>>
>> or
>>
>> x[,1,drop=TRUE]
>>
>> behaving consistently, regardless of whether the argument is a tibble or a
>> data.frame.
>
> They can currently rely on x[[1]] returning alway a vector and x[, 1,
> drop = FALSE] always returning a data frame whether x is a tibble or a
> data frame. I personally don't believe that an additional approach
> would help.

	[[alternative HTML version deleted]]


From h.wickham at gmail.com  Tue Sep 26 21:48:03 2017
From: h.wickham at gmail.com (Hadley Wickham)
Date: Tue, 26 Sep 2017 14:48:03 -0500
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CAO1zAVant8FdcRP+YYY3v1JZSYUG3_BB1Ooua_x3W3dxa8kv=Q@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CAHJFP8R0AgUP+mDx0y-76LLkOBFFn-vPmB8=ucrzGbqSyPe6vg@mail.gmail.com>
 <CAO1zAVZ6H8zvzfNBDDCWw5Eb9Y-f7MO+9xB8wM1QypuDan+diw@mail.gmail.com>
 <CAHJFP8TXDDhHm38Rfkm2v9f6hxYO9NREXxPoEooLHruHH2jZGw@mail.gmail.com>
 <CAO1zAVY7-nQDCom6ZsUonadCdyQHyTqU7B3vS7ymTZdOpZAbrQ@mail.gmail.com>
 <CABtg=KkWd_XFfMg4AMX8EoLXZ=nk2wWsXb7ym7unhyenZRgoiw@mail.gmail.com>
 <CABFfbXtEaX0moo7D3VuP=K33zCj63e2Z-kzUhQC=iSdod7bT4g@mail.gmail.com>
 <CABdHhvGmY+L2pb6DY-A2FmMBcA07OnP9fr_xvTmuwB7=jNmu3w@mail.gmail.com>
 <CAO1zAVbcnz=1fn_3PdMvAL66po1WHpygR9a4-bWr0T9G4xTrTg@mail.gmail.com>
 <CABdHhvG5Gx1BZbnaiVVxP5b5zjPUDuLxTd=tgU4JJwR1J4kj=g@mail.gmail.com>
 <CAO1zAVbVvcCCaLVuJtY6q2C-CCBrV-am6Bb=qskjExe-zGLFAw@mail.gmail.com>
 <CABdHhvG0T7XMKfbktNTERgv2zHR-d44CXdgZZsWLG4h2uTWU+g@mail.gmail.com>
 <CAO1zAVant8FdcRP+YYY3v1JZSYUG3_BB1Ooua_x3W3dxa8kv=Q@mail.gmail.com>
Message-ID: <CABdHhvGZTg+kAV_MCWU-0cc3g6aweK9m6aYoH2oRpK_Hyt2jEA@mail.gmail.com>

On Tue, Sep 26, 2017 at 10:40 AM, Joris Meys <Joris.Meys at ugent.be> wrote:
> On Tue, Sep 26, 2017 at 5:33 PM, Hadley Wickham <h.wickham at gmail.com> wrote:
>>
>> > I for one am happy this discussion pops up, because it's a piece of
>> > information I give to my students as well: convert to a data.frame when
>> > you
>> > start your analysis just to play safe. And this discussion shows why
>> > that is
>> > -for the time being!- a good advice. The moment tibbles become the
>> > default
>> > data format in R, or some R++, or in Julia for all I care, I'll be more
>> > than
>> > happy to burn that drop = FALSE on a stake. But for now we can't ignore
>> > the
>> > differences and the potential for conflicts when you try to use a tibble
>> > instead of a data.frame.
>>
>> I think this is sub-optimal advice because most functions do work fine
>> with tibbles.
>
>
> Most. Not all. Either tibbles work exactly like a data.frame, or they don't.
> If they do, I wouldn't give that advice. But they don't.

They work 95% like a data frame. Seems odd to recommend that you
coerce 100% of the time for a <5% of the time problem.

>> It is only a few packages (largely written some time
>> ago) that don't. And typically, if they don't work with tibbles,
>> you'll get a (usually slightly confusing) error message because some
>> function will get a data frame instead of a vector. So as far I can
>> tell, you only need to as.data.frame() retrospectively, not
>> prospectively. Are you aware of any code that returns an incorrect
>> result (i.e. no error) when given a tibble instead of a data frame?
>
>
> x <- tibble(a = 1:5, b = 5:1)
>
> relcount <- function(x, id){
>   table(x[,id]) / length(x[,id])
> }
> relcount(x, "a")
> relcount(as.data.frame(x), "a")
>
> You're welcome.

Obviously you can contrive an example that fails (why wouldn't you use
nrow() here?). I meant an existing function in a package.

Hadley


-- 
http://hadley.nz


From Jens.Oehlschlaegel at truecluster.com  Tue Sep 26 22:52:17 2017
From: Jens.Oehlschlaegel at truecluster.com (=?UTF-8?Q?Jens_Oehlschl=c3=a4gel?=)
Date: Tue, 26 Sep 2017 22:52:17 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CABdHhvE1Zeu18h=uL1__79-x3ysS3jmkEPgW5vWsU_CkLmbUyw@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CABdHhvE1Zeu18h=uL1__79-x3ysS3jmkEPgW5vWsU_CkLmbUyw@mail.gmail.com>
Message-ID: <8209babd-eeed-5e94-61ae-b77dacddba21@truecluster.com>


On 26.09.2017 15:37, Hadley Wickham wrote:
> I decided to make [.tibble type-stable (i.e. always return a data
> frame) because this behaviour causes substantial problems in real data
> analysis code. I did it understanding that it would cause some package
> developers frustration, but I think it's better for a handful of
> package maintainers to be frustrated than hundreds of users creating
> dangerous code.g
>
> Hadley
>

If that is right -- and I tend to believe it is right -- this change had 
better been done in R core and not on package level. I think the root of 
this evil is design inconsistencies of the language together with the 
lack of removing these inconsistencies. The longer we hesitated, the 
more packages such a change could break. The lack of addressing issues 
in R core drives people to try to solve issues on package level. But now 
we have two conflicting standards, i.e. a fork-within-the-language: Am I 
a member of the tidyverse or not? Am I writing a package for the 
tidyverse or for standard-R or for both. With a fork-of-the-language we 
would at least have a majority vote for one of the two and only the 
fitter would survive. But with a fork-within-the-language 'R' gets more 
and more complex, and working with it more and more difficult. There is 
not only the tidyverse, also the Rcppverse and I don't know how many 
other verses. If there is no extinction of inconsistencies in R, not 
sufficient evolution in R, but lots of evolution in Julia, evolution 
will extinct R together with all its foobarverses in favor of Julia (or 
Python). May be that's a good thing.

I think tibble should respect drop=TRUE and respect the work of all 
package authors who wrote defensive code and explicitly passed drop= 
instead of relying on the (wrong) default. Again: better would be a 
long-term clean-up roadmap of R itself and one simple standard called 
'data.frame'. Instead of forking or betting on any particular 
foobarverse: why not have direct democratic votes about certain critical 
features of such a long-term roadmap in such a big community?

Kind regards


Jens Oehlschl?gel


From h.wickham at gmail.com  Tue Sep 26 23:06:05 2017
From: h.wickham at gmail.com (Hadley Wickham)
Date: Tue, 26 Sep 2017 16:06:05 -0500
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <59CA8B18.8060904@stern.nyu.edu>
References: <CABdHhvGF7e-3ba04VHGMCv0PbfDZUBuK3Yup_vfe+UAyPnRDWA@mail.gmail.com>
 <59CA62A3.4090505@gmail.com>
 <CABdHhvEa6bB+59vadxyzaFCEYo1KgMWSrMLA-QvFAoMbWQUYXQ@mail.gmail.com>
 <59CA8B18.8060904@stern.nyu.edu>
Message-ID: <CABdHhvF-pCb+GrAfMJyecacK1XRHiB5Q1Dce9wp6SsHL_Bw7_Q@mail.gmail.com>

On Tue, Sep 26, 2017 at 12:15 PM, Patrick Perry <pperry at stern.nyu.edu> wrote:
> Pro ignoring x[,1,drop=TRUE]:
> (1) it forces users to write consistent code for extracting a vector from a
> data frame
>
> Con:
> (1) functions that accept both matrices and data frames might break
> (x[[j]][i] doesn't work for a matrix)

I generally think that it's better to keep matrices and data frame
completely separate, but point taken.

> (2) functions that use the access pattern x[i,j,drop = TRUE] will break

This seems pretty rare, and I don't think anyone has complained about it yet.

I don't love adding support for drop = TRUE because it makes [.tibble
type-unstable, but maybe it's reasonable to do so in order to slightly
improve backward compatibility. I've filed an issue so we consider it
for the next major release:
https://github.com/tidyverse/tibble/issues/311

> Perhaps a bigger issue with tibbles is that they don't let you index with
> row names:
>
>> y <- tibble(x = letters)
>> rownames(y)
>  [1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10" "11" "12" "13" "14"
> "15"
> [16] "16" "17" "18" "19" "20" "21" "22" "23" "24" "25" "26"
>> y[rownames(y)[c(1,5,9,15,21)],]
> # A tibble: 5 x 1
>       x
>   <chr>
> 1  <NA>
> 2  <NA>
> 3  <NA>
> 4  <NA>
> 5  <NA>

I'd argue that this is not as big as an issue, as I have no
recollection of anyone complaining about it.

Hadley

-- 
http://hadley.nz


From h.wickham at gmail.com  Tue Sep 26 23:08:49 2017
From: h.wickham at gmail.com (Hadley Wickham)
Date: Tue, 26 Sep 2017 16:08:49 -0500
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <8209babd-eeed-5e94-61ae-b77dacddba21@truecluster.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CABdHhvE1Zeu18h=uL1__79-x3ysS3jmkEPgW5vWsU_CkLmbUyw@mail.gmail.com>
 <8209babd-eeed-5e94-61ae-b77dacddba21@truecluster.com>
Message-ID: <CABdHhvF+WKqPUBehdAMJXMtkPCwBXjD8-Diw+XCpF-T9TYiYcA@mail.gmail.com>

> If that is right -- and I tend to believe it is right -- this change had
> better been done in R core and not on package level. I think the root of
> this evil is design inconsistencies of the language together with the lack
> of removing these inconsistencies. The longer we hesitated, the more
> packages such a change could break. The lack of addressing issues in R core
> drives people to try to solve issues on package level. But now we have two
> conflicting standards, i.e. a fork-within-the-language: Am I a member of the
> tidyverse or not? Am I writing a package for the tidyverse or for standard-R
> or for both. With a fork-of-the-language we would at least have a majority
> vote for one of the two and only the fitter would survive. But with a
> fork-within-the-language 'R' gets more and more complex, and working with it
> more and more difficult. There is not only the tidyverse, also the Rcppverse
> and I don't know how many other verses. If there is no extinction of
> inconsistencies in R, not sufficient evolution in R, but lots of evolution
> in Julia, evolution will extinct R together with all its foobarverses in
> favor of Julia (or Python). May be that's a good thing.

I think you are making a slippery slope argument, and I'm not sure I
buy it. I am quite aware of the danger of introducing additional
inconsistencies, and do it very selectively, only when I'm convinced
that the pain is worth it.

> I think tibble should respect drop=TRUE and respect the work of all package
> authors who wrote defensive code and explicitly passed drop= instead of
> relying on the (wrong) default

We'll consider for the next major release:
https://github.com/tidyverse/tibble/issues/311

> . Again: better would be a long-term clean-up
> roadmap of R itself and one simple standard called 'data.frame'. Instead of
> forking or betting on any particular foobarverse: why not have direct
> democratic votes about certain critical features of such a long-term roadmap
> in such a big community?

I'm not sure that democracy works for programming language design.

Hadley

-- 
http://hadley.nz


From profjcnash at gmail.com  Tue Sep 26 23:29:38 2017
From: profjcnash at gmail.com (J C Nash)
Date: Tue, 26 Sep 2017 17:29:38 -0400
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CABdHhvF+WKqPUBehdAMJXMtkPCwBXjD8-Diw+XCpF-T9TYiYcA@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CABdHhvE1Zeu18h=uL1__79-x3ysS3jmkEPgW5vWsU_CkLmbUyw@mail.gmail.com>
 <8209babd-eeed-5e94-61ae-b77dacddba21@truecluster.com>
 <CABdHhvF+WKqPUBehdAMJXMtkPCwBXjD8-Diw+XCpF-T9TYiYcA@mail.gmail.com>
Message-ID: <e3d64b00-4f72-bf4b-38d8-56f650f28957@gmail.com>

Having been around a while and part of several programming language and
other standards (see ISO 6373:1984 and IEEE 754-1985), I prefer some democracy at the
level of getting a standard. Though perhaps at the design level I can agree
with Hadley. However, we're now at the stage of needing to clean up R
and actually get rid of some serious annoyances, in which I would include
my own contributions that appear in optim(), namely the Nelder-Mead,
BFGS and CG options for which there are replacements.

In the tibble/data-frame issue, it would appear there could be a resolution
with some decision making at the R-core level, and whether that is democratic
or ad-hoc, it needs to happen.

JN


On 2017-09-26 05:08 PM, Hadley Wickham wrote:

> 
> I'm not sure that democracy works for programming language design.
> 
> Hadley
>


From edd at debian.org  Tue Sep 26 23:43:53 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Tue, 26 Sep 2017 16:43:53 -0500
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <8209babd-eeed-5e94-61ae-b77dacddba21@truecluster.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CABdHhvE1Zeu18h=uL1__79-x3ysS3jmkEPgW5vWsU_CkLmbUyw@mail.gmail.com>
 <8209babd-eeed-5e94-61ae-b77dacddba21@truecluster.com>
Message-ID: <22986.51737.204553.801361@bud.eddelbuettel.com>


On 26 September 2017 at 22:52, Jens Oehlschl?gel wrote:
| also the Rcppverse

Not really, in the context of this thread.

Rcpp does not impose or suggest a particular way of doing things at the R
level.  Rcpp, really, is mostly about making it a little easier to interface
with C/C++ level code from R (and again is not required or imposed and people
still write C accessing packages without).  And there really is no
"Rcppverse" though I (and at least some others) like the prefix in the
package names.

Agree with the rest of your post though.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch.duncan at gmail.com  Wed Sep 27 01:00:04 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 26 Sep 2017 19:00:04 -0400
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <8209babd-eeed-5e94-61ae-b77dacddba21@truecluster.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CABdHhvE1Zeu18h=uL1__79-x3ysS3jmkEPgW5vWsU_CkLmbUyw@mail.gmail.com>
 <8209babd-eeed-5e94-61ae-b77dacddba21@truecluster.com>
Message-ID: <daed7ce5-6744-097f-da6d-ee5cfec725ae@gmail.com>

On 26/09/2017 4:52 PM, Jens Oehlschl?gel wrote:
> 
> On 26.09.2017 15:37, Hadley Wickham wrote:
>> I decided to make [.tibble type-stable (i.e. always return a data
>> frame) because this behaviour causes substantial problems in real data
>> analysis code. I did it understanding that it would cause some package
>> developers frustration, but I think it's better for a handful of
>> package maintainers to be frustrated than hundreds of users creating
>> dangerous code.g
>>
>> Hadley
>>
> 
> If that is right -- and I tend to believe it is right -- this change had
> better been done in R core and not on package level. I think the root of
> this evil is design inconsistencies of the language together with the
> lack of removing these inconsistencies. The longer we hesitated, the
> more packages such a change could break. The lack of addressing issues
> in R core drives people to try to solve issues on package level. But now
> we have two conflicting standards, i.e. a fork-within-the-language: Am I
> a member of the tidyverse or not? Am I writing a package for the
> tidyverse or for standard-R or for both. With a fork-of-the-language we
> would at least have a majority vote for one of the two and only the
> fitter would survive. But with a fork-within-the-language 'R' gets more
> and more complex, and working with it more and more difficult. There is
> not only the tidyverse, also the Rcppverse and I don't know how many
> other verses. If there is no extinction of inconsistencies in R, not
> sufficient evolution in R, but lots of evolution in Julia, evolution
> will extinct R together with all its foobarverses in favor of Julia (or
> Python). May be that's a good thing.
> 
> I think tibble should respect drop=TRUE and respect the work of all
> package authors who wrote defensive code and explicitly passed drop=
> instead of relying on the (wrong) default. Again: better would be a
> long-term clean-up roadmap of R itself and one simple standard called
> 'data.frame'. Instead of forking or betting on any particular
> foobarverse: why not have direct democratic votes about certain critical
> features of such a long-term roadmap in such a big community?


I think R Core would not be interested in a vote, because you'd be 
voting to give them work to do, and that's really rude.

What would have a better chance of success would be for someone to write 
a short article describing the proposal in detail, and listing all 
changes to CRAN and Bioconductor packages that would be necessary to 
implement it.  That's a lot of work!  Do you have time to do it?

Duncan Murdoch


From profjcnash at gmail.com  Wed Sep 27 01:21:56 2017
From: profjcnash at gmail.com (J C Nash)
Date: Tue, 26 Sep 2017 19:21:56 -0400
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <daed7ce5-6744-097f-da6d-ee5cfec725ae@gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CABdHhvE1Zeu18h=uL1__79-x3ysS3jmkEPgW5vWsU_CkLmbUyw@mail.gmail.com>
 <8209babd-eeed-5e94-61ae-b77dacddba21@truecluster.com>
 <daed7ce5-6744-097f-da6d-ee5cfec725ae@gmail.com>
Message-ID: <70a9e6d3-5379-45c7-c44e-852a79c71b4a@gmail.com>

Duncan's observation is correct. The background work to the standards
I worked on was a big effort, and the content was a lot smaller than R,
though possibly similar in scope to dealing with the current question.
The "voting" was also very late in the process, after the proposals
were developed, discussed and written, so more a confirmation of a
decision than a vote to do some work.

On the other hand, I do think such effort has to be made from time to
time. On this particular matter I don't feel well-suited. However, the
collective body of material that is R is mostly a result of those of us
who are willing to put out the effort, particularly R-core members.

JN

On 2017-09-26 07:00 PM, Duncan Murdoch wrote:
> On 26/09/2017 4:52 PM, Jens Oehlschl?gel wrote:
>>
>> On 26.09.2017 15:37, Hadley Wickham wrote:
>>> I decided to make [.tibble type-stable (i.e. always return a data
>>> frame) because this behaviour causes substantial problems in real data
>>> analysis code. I did it understanding that it would cause some package
>>> developers frustration, but I think it's better for a handful of
>>> package maintainers to be frustrated than hundreds of users creating
>>> dangerous code.g
>>>
>>> Hadley
>>>
>>
>> If that is right -- and I tend to believe it is right -- this change had
>> better been done in R core and not on package level. I think the root of
>> this evil is design inconsistencies of the language together with the
>> lack of removing these inconsistencies. The longer we hesitated, the
>> more packages such a change could break. The lack of addressing issues
>> in R core drives people to try to solve issues on package level. But now
>> we have two conflicting standards, i.e. a fork-within-the-language: Am I
>> a member of the tidyverse or not? Am I writing a package for the
>> tidyverse or for standard-R or for both. With a fork-of-the-language we
>> would at least have a majority vote for one of the two and only the
>> fitter would survive. But with a fork-within-the-language 'R' gets more
>> and more complex, and working with it more and more difficult. There is
>> not only the tidyverse, also the Rcppverse and I don't know how many
>> other verses. If there is no extinction of inconsistencies in R, not
>> sufficient evolution in R, but lots of evolution in Julia, evolution
>> will extinct R together with all its foobarverses in favor of Julia (or
>> Python). May be that's a good thing.
>>
>> I think tibble should respect drop=TRUE and respect the work of all
>> package authors who wrote defensive code and explicitly passed drop=
>> instead of relying on the (wrong) default. Again: better would be a
>> long-term clean-up roadmap of R itself and one simple standard called
>> 'data.frame'. Instead of forking or betting on any particular
>> foobarverse: why not have direct democratic votes about certain critical
>> features of such a long-term roadmap in such a big community?
> 
> 
> I think R Core would not be interested in a vote, because you'd be voting to give them work to do, and that's really rude.
> 
> What would have a better chance of success would be for someone to write a short article describing the proposal in
> detail, and listing all changes to CRAN and Bioconductor packages that would be necessary to implement it.? That's a lot
> of work!? Do you have time to do it?
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From drjimlemon at gmail.com  Wed Sep 27 01:37:09 2017
From: drjimlemon at gmail.com (Jim Lemon)
Date: Wed, 27 Sep 2017 09:37:09 +1000
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <daed7ce5-6744-097f-da6d-ee5cfec725ae@gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CABdHhvE1Zeu18h=uL1__79-x3ysS3jmkEPgW5vWsU_CkLmbUyw@mail.gmail.com>
 <8209babd-eeed-5e94-61ae-b77dacddba21@truecluster.com>
 <daed7ce5-6744-097f-da6d-ee5cfec725ae@gmail.com>
Message-ID: <CA+8X3fW_ds8EZNxbmjXhQs371JkchucQW9_TvpM6ACnGX3N7_g@mail.gmail.com>

I suppose that it is far too late to offer such a suggestion, but it
seems to me that the problem is in some measure the mechanism of
inheritance.

First, the tibble (although the name is incomprehensible, why not
something like "data.blob") is superior to the bog standard R
data.frame.

This may not be a good metaphor, but consider the problem of including
tigers in the mixed martial arts competitions. Tigers are much better
than the average (or perhaps all) MMA fighters at damaging their
opponents. However, they change the whole game. All of the usual
techniques are out the window if one encounters a tiger.

Suppose the tibble (or data.blob) did not inherit from the data.frame,
but had a different path of inheritance. Like the evolutionary
development of Felidae and Hominoidea, it would branch way back around
Mammalia. Then it would not fool the referees into letting it into the
MMA competition. If one wanted to use the improved functionality, it
would not be necessary to consider whether this thing that said it was
a data frame had too much hair and retractable claws. I can't say
whether this is an effective suggestion or even a good one, but I
thought it was worthwhile making.

Jim


From Jens.Oehlschlaegel at truecluster.com  Wed Sep 27 10:50:18 2017
From: Jens.Oehlschlaegel at truecluster.com (=?UTF-8?Q?Jens_Oehlschl=c3=a4gel?=)
Date: Wed, 27 Sep 2017 10:50:18 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <CABdHhvF+WKqPUBehdAMJXMtkPCwBXjD8-Diw+XCpF-T9TYiYcA@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CABdHhvE1Zeu18h=uL1__79-x3ysS3jmkEPgW5vWsU_CkLmbUyw@mail.gmail.com>
 <8209babd-eeed-5e94-61ae-b77dacddba21@truecluster.com>
 <CABdHhvF+WKqPUBehdAMJXMtkPCwBXjD8-Diw+XCpF-T9TYiYcA@mail.gmail.com>
Message-ID: <254bc3fa-3ae4-26a2-7bd1-9ccd3279dc0b@truecluster.com>


On 26.09.2017 23:08, Hadley Wickham wrote:
> I'm not sure that democracy works for programming language design. 

Agree. The obstacle I hope to overcome by voting is not missing 
agreement on the fact of inconsistent design, the obstacle is the 
question whether a majority of contributers is willing to invest work to 
get rid of the inconsistency. Where 'majority' could be defined in terms 
of weighted voting using LOC of the respective author as a proxy for the 
work he would expect to do.

Jens


From Jens.Oehlschlaegel at truecluster.com  Wed Sep 27 12:21:01 2017
From: Jens.Oehlschlaegel at truecluster.com (=?UTF-8?Q?Jens_Oehlschl=c3=a4gel?=)
Date: Wed, 27 Sep 2017 12:21:01 +0200
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <daed7ce5-6744-097f-da6d-ee5cfec725ae@gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CABdHhvE1Zeu18h=uL1__79-x3ysS3jmkEPgW5vWsU_CkLmbUyw@mail.gmail.com>
 <8209babd-eeed-5e94-61ae-b77dacddba21@truecluster.com>
 <daed7ce5-6744-097f-da6d-ee5cfec725ae@gmail.com>
Message-ID: <07b70adf-38d5-272f-d934-80f3b32f91d3@truecluster.com>


On 27.09.2017 01:00, Duncan Murdoch wrote:
> I think R Core would not be interested in a vote, because you'd be 
> voting to give them work to do, and that's really rude.

Voting about other people's work is indeed a problem. This is were I 
hope money from the R Consortium could help, assuming they are serious 
about contributing to the community (and serious about protecting their 
investments into interfacing R).

> What would have a better chance of success would be for someone to 
> write a short article describing the proposal in detail, and listing 
> all changes to CRAN and Bioconductor packages that would be necessary 
> to implement it.? That's a lot of work!? Do you have time to do it?

Specifying all the consequences of such a change in detail is a similar 
amount of work than actually doing it. Are you suggesting that I do the 
work alone? And predicting from past experience the chances that R-core 
would accept my suggestion: guess what I would do?

Such improvements of the language should be suggested by everyone who 
sees need, filtered through a voting process open to every user (flagged 
for package authors to get an early picture of their votes), the 
promising changes planned in detail by R Core (given a budget for 
implementation from the R-consortium), confirmed by a voting process of 
all package authors and then put on a sufficient long-term roadmap. So 
if R Consortium and R Core commit to such a process and you ask me if I 
am willing to compile a first list of suggestions for change: I don't 
have time but I would collect and consolidate input from this list. Any 
volunteers for organizing a voting system assuming the above commitments?

Best


Jens


From murdoch.duncan at gmail.com  Wed Sep 27 13:39:01 2017
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 27 Sep 2017 07:39:01 -0400
Subject: [R-pkg-devel] tibbles are not data frames
In-Reply-To: <07b70adf-38d5-272f-d934-80f3b32f91d3@truecluster.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CABdHhvE1Zeu18h=uL1__79-x3ysS3jmkEPgW5vWsU_CkLmbUyw@mail.gmail.com>
 <8209babd-eeed-5e94-61ae-b77dacddba21@truecluster.com>
 <daed7ce5-6744-097f-da6d-ee5cfec725ae@gmail.com>
 <07b70adf-38d5-272f-d934-80f3b32f91d3@truecluster.com>
Message-ID: <870ce16b-798c-8960-ab61-9a2506f01105@gmail.com>

On 27/09/2017 6:21 AM, Jens Oehlschl?gel wrote:
> 
> On 27.09.2017 01:00, Duncan Murdoch wrote:
>> I think R Core would not be interested in a vote, because you'd be
>> voting to give them work to do, and that's really rude.
> 
> Voting about other people's work is indeed a problem. This is were I
> hope money from the R Consortium could help, assuming they are serious
> about contributing to the community (and serious about protecting their
> investments into interfacing R).
> 
>> What would have a better chance of success would be for someone to
>> write a short article describing the proposal in detail, and listing
>> all changes to CRAN and Bioconductor packages that would be necessary
>> to implement it.? That's a lot of work!? Do you have time to do it?
> 
> Specifying all the consequences of such a change in detail is a similar
> amount of work than actually doing it. 

No, it's only half the work.  Most of the changes have to be made by the 
package maintainers.  From my short experience working on CRAN last 
winter, it's at least as much work to contact and explain the changes to 
the maintainers as it is to work out what the changes are

Are you suggesting that I do the
> work alone? 

No, but someone has to organize it, and I was suggesting you should do that.

> And predicting from past experience the chances that R-core
> would accept my suggestion: guess what I would do?
You're right that most suggestions are rejected by R Core, so I'd 
recommend writing the detailed spec first.  It shouldn't just describe 
the code changes, it should describe how they will be implemented.

> 
> Such improvements of the language should be suggested by everyone who
> sees need, filtered through a voting process open to every user (flagged
> for package authors to get an early picture of their votes), the
> promising changes planned in detail by R Core (given a budget for
> implementation from the R-consortium), confirmed by a voting process of
> all package authors and then put on a sufficient long-term roadmap. So
> if R Consortium and R Core commit to such a process and you ask me if I
> am willing to compile a first list of suggestions for change: I don't
> have time but I would collect and consolidate input from this list. Any
> volunteers for organizing a voting system assuming the above commitments?
I don't think voting should be a part of it, as I said in my previous 
message.  You need to convince every R Core member not to veto the 
change, and at least one member of R Core to commit the changes.  They 
aren't going to be convinced by a vote.

For funding, the R Consortium does have a process of applying for money 
(see https://www.r-consortium.org/projects).

Duncan Murdoch


From yabdia at bwh.harvard.edu  Wed Sep 27 19:47:46 2017
From: yabdia at bwh.harvard.edu (Abdia, Younathan)
Date: Wed, 27 Sep 2017 17:47:46 +0000
Subject: [R-pkg-devel] R Package Submission Problem
Message-ID: <7E40CBEF198F4D46B85A8EA5BBF2A4E904749345@PHSX10MB11.partners.org>

Hi,

My name is Younathan and I am trying to submit it but every time it gives me message that my package does not pass the incoming checks automatically and it gives me 3 NOTES. I tried to fix them but I am unable to do so. If possible do you know how to take care of the 3 Notes. The three notes are as following:

* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Younathan Abdia <yabdia at bwh.harvard.edu>'

New submission

Possibly mis-spelled words in DESCRIPTION:
  Plasmode (3:8)

The Title field starts with the package name.

The build time stamp is missing.


* checking DESCRIPTION meta-information ... NOTE

Checking should be performed on sources prepared by 'R CMD build'.

* checking top-level files ... NOTE

Non-standard file/directory found at top level:

  'Plasmode.Rproj'

You can also see the NOTES by clicking on the link.

https://win-builder.r-project.org/incoming_pretest/170927_165838_Plasmode_010/00check.log

Please let me know if there is any question or concern. Thank you for help.



Regards,

Younathan



The information in this e-mail is intended only for the ...{{dropped:14}}


From maxime.turgeon at mail.mcgill.ca  Wed Sep 27 21:02:18 2017
From: maxime.turgeon at mail.mcgill.ca (MTurgeon)
Date: Wed, 27 Sep 2017 13:02:18 -0600
Subject: [R-pkg-devel] R Package Submission Problem
In-Reply-To: <7E40CBEF198F4D46B85A8EA5BBF2A4E904749345@PHSX10MB11.partners.org>
References: <7E40CBEF198F4D46B85A8EA5BBF2A4E904749345@PHSX10MB11.partners.org>
Message-ID: <e4027797-fd4a-c65a-7fbd-d1c2ebc955a8@mail.mcgill.ca>

Hi Younathan,

You can ignore the first note: it simply says that this is a new package.

The second note highlights a few possible problems with your DESCRIPTION 
file. It flags the word "Plasmode" as being possibly misspelled; if it 
isn't, you can ignore the comment. Then it points out that the Title 
field contains the name of the package; as per CRAN policy, you 
shouldn't do that (cf. the manual, 
https://cran.r-project.org/doc/manuals/r-release/R-exts.html#The-DESCRIPTION-file).

Finally, the third note says that there is a file in the tarball that 
shouldn't be there, namely Plasmode.Rproj. You can control what is 
omitted from the tarball using the .Rbuildignore file. In particular, 
you could add the following line:

^Plasmode\.Rproj$

Max


On 2017-09-27 11:47 AM, Abdia, Younathan wrote:
> Hi,
>
> My name is Younathan and I am trying to submit it but every time it gives me message that my package does not pass the incoming checks automatically and it gives me 3 NOTES. I tried to fix them but I am unable to do so. If possible do you know how to take care of the 3 Notes. The three notes are as following:
>
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: 'Younathan Abdia <yabdia at bwh.harvard.edu>'
>
> New submission
>
> Possibly mis-spelled words in DESCRIPTION:
>    Plasmode (3:8)
>
> The Title field starts with the package name.
>
> The build time stamp is missing.
>
>
> * checking DESCRIPTION meta-information ... NOTE
>
> Checking should be performed on sources prepared by 'R CMD build'.
>
> * checking top-level files ... NOTE
>
> Non-standard file/directory found at top level:
>
>    'Plasmode.Rproj'
>
> You can also see the NOTES by clicking on the link.
>
> https://win-builder.r-project.org/incoming_pretest/170927_165838_Plasmode_010/00check.log
>
> Please let me know if there is any question or concern. Thank you for help.
>
>
>
> Regards,
>
> Younathan
>
>
>
> The information in this e-mail is intended only for th...{{dropped:14}}


From ligges at statistik.tu-dortmund.de  Wed Sep 27 21:29:19 2017
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 27 Sep 2017 21:29:19 +0200
Subject: [R-pkg-devel] R Package Submission Problem
In-Reply-To: <e4027797-fd4a-c65a-7fbd-d1c2ebc955a8@mail.mcgill.ca>
References: <7E40CBEF198F4D46B85A8EA5BBF2A4E904749345@PHSX10MB11.partners.org>
 <e4027797-fd4a-c65a-7fbd-d1c2ebc955a8@mail.mcgill.ca>
Message-ID: <4372267f-6145-100b-14f9-fcbea36ff2a0@statistik.tu-dortmund.de>

More important:

Checking should be performed on sources prepared by 'R CMD build'.

So at first prepare the sources via R CMD build and then check yourself 
prior to submission following the CRAN policies. And *really* read that.

Best,
Uwe Ligges





On 27.09.2017 21:02, MTurgeon wrote:
> Hi Younathan,
> 
> You can ignore the first note: it simply says that this is a new package.
> 
> The second note highlights a few possible problems with your DESCRIPTION 
> file. It flags the word "Plasmode" as being possibly misspelled; if it 
> isn't, you can ignore the comment. Then it points out that the Title 
> field contains the name of the package; as per CRAN policy, you 
> shouldn't do that (cf. the manual, 
> https://cran.r-project.org/doc/manuals/r-release/R-exts.html#The-DESCRIPTION-file). 
> 
> 
> Finally, the third note says that there is a file in the tarball that 
> shouldn't be there, namely Plasmode.Rproj. You can control what is 
> omitted from the tarball using the .Rbuildignore file. In particular, 
> you could add the following line:
> 
> ^Plasmode\.Rproj$
> 
> Max
> 
> 
> On 2017-09-27 11:47 AM, Abdia, Younathan wrote:
>> Hi,
>>
>> My name is Younathan and I am trying to submit it but every time it 
>> gives me message that my package does not pass the incoming checks 
>> automatically and it gives me 3 NOTES. I tried to fix them but I am 
>> unable to do so. If possible do you know how to take care of the 3 
>> Notes. The three notes are as following:
>>
>> * checking CRAN incoming feasibility ... NOTE
>> Maintainer: 'Younathan Abdia <yabdia at bwh.harvard.edu>'
>>
>> New submission
>>
>> Possibly mis-spelled words in DESCRIPTION:
>> ?? Plasmode (3:8)
>>
>> The Title field starts with the package name.
>>
>> The build time stamp is missing.
>>
>>
>> * checking DESCRIPTION meta-information ... NOTE
>>
>> Checking should be performed on sources prepared by 'R CMD build'.
>>
>> * checking top-level files ... NOTE
>>
>> Non-standard file/directory found at top level:
>>
>> ?? 'Plasmode.Rproj'
>>
>> You can also see the NOTES by clicking on the link.
>>
>> https://win-builder.r-project.org/incoming_pretest/170927_165838_Plasmode_010/00check.log 
>>
>>
>> Please let me know if there is any question or concern. Thank you for 
>> help.
>>
>>
>>
>> Regards,
>>
>> Younathan
>>
>>
>>
>> The information in this e-mail is intended only for t...{{dropped:6}}


From bbolker at gmail.com  Thu Sep 28 00:10:36 2017
From: bbolker at gmail.com (Ben Bolker)
Date: Wed, 27 Sep 2017 18:10:36 -0400
Subject: [R-pkg-devel] R Package Submission Problem
In-Reply-To: <4372267f-6145-100b-14f9-fcbea36ff2a0@statistik.tu-dortmund.de>
References: <7E40CBEF198F4D46B85A8EA5BBF2A4E904749345@PHSX10MB11.partners.org>
 <e4027797-fd4a-c65a-7fbd-d1c2ebc955a8@mail.mcgill.ca>
 <4372267f-6145-100b-14f9-fcbea36ff2a0@statistik.tu-dortmund.de>
Message-ID: <983d8df9-2790-9642-408c-8abff23d7e3b@gmail.com>


Also from the CRAN submission guidelines:

> If there are warnings or notes you cannot eliminate (for example
because you believe them to be spurious) send an explanatory note as
part of your covering email, or as a comment on the submission form.

  This would apply to your spelling issues.


On 17-09-27 03:29 PM, Uwe Ligges wrote:
> More important:
> 
> Checking should be performed on sources prepared by 'R CMD build'.
> 
> So at first prepare the sources via R CMD build and then check yourself
> prior to submission following the CRAN policies. And *really* read that.
> 
> Best,
> Uwe Ligges
> 
> 
> 
> 
> 
> On 27.09.2017 21:02, MTurgeon wrote:
>> Hi Younathan,
>>
>> You can ignore the first note: it simply says that this is a new package.
>>
>> The second note highlights a few possible problems with your
>> DESCRIPTION file. It flags the word "Plasmode" as being possibly
>> misspelled; if it isn't, you can ignore the comment. Then it points
>> out that the Title field contains the name of the package; as per CRAN
>> policy, you shouldn't do that (cf. the manual,
>> https://cran.r-project.org/doc/manuals/r-release/R-exts.html#The-DESCRIPTION-file).
>>
>>
>> Finally, the third note says that there is a file in the tarball that
>> shouldn't be there, namely Plasmode.Rproj. You can control what is
>> omitted from the tarball using the .Rbuildignore file. In particular,
>> you could add the following line:
>>
>> ^Plasmode\.Rproj$
>>
>> Max
>>
>>
>> On 2017-09-27 11:47 AM, Abdia, Younathan wrote:
>>> Hi,
>>>
>>> My name is Younathan and I am trying to submit it but every time it
>>> gives me message that my package does not pass the incoming checks
>>> automatically and it gives me 3 NOTES. I tried to fix them but I am
>>> unable to do so. If possible do you know how to take care of the 3
>>> Notes. The three notes are as following:
>>>
>>> * checking CRAN incoming feasibility ... NOTE
>>> Maintainer: 'Younathan Abdia <yabdia at bwh.harvard.edu>'
>>>
>>> New submission
>>>
>>> Possibly mis-spelled words in DESCRIPTION:
>>> ?? Plasmode (3:8)
>>>
>>> The Title field starts with the package name.
>>>
>>> The build time stamp is missing.
>>>
>>>
>>> * checking DESCRIPTION meta-information ... NOTE
>>>
>>> Checking should be performed on sources prepared by 'R CMD build'.
>>>
>>> * checking top-level files ... NOTE
>>>
>>> Non-standard file/directory found at top level:
>>>
>>> ?? 'Plasmode.Rproj'
>>>
>>> You can also see the NOTES by clicking on the link.
>>>
>>> https://win-builder.r-project.org/incoming_pretest/170927_165838_Plasmode_010/00check.log
>>>
>>>
>>> Please let me know if there is any question or concern. Thank you for
>>> help.
>>>
>>>
>>>
>>> Regards,
>>>
>>> Younathan
>>>
>>>
>>>
>>> The information in this e-mail is intended only for t...{{dropped:6}}
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From goran.brostrom at umu.se  Fri Sep 29 11:50:23 2017
From: goran.brostrom at umu.se (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Fri, 29 Sep 2017 11:50:23 +0200
Subject: [R-pkg-devel]  Summary: tibbles are not data frames
In-Reply-To: <CABdHhvE1Zeu18h=uL1__79-x3ysS3jmkEPgW5vWsU_CkLmbUyw@mail.gmail.com>
References: <5839235b-f52f-7942-1168-d99a07036213@umu.se>
 <CABdHhvE1Zeu18h=uL1__79-x3ysS3jmkEPgW5vWsU_CkLmbUyw@mail.gmail.com>
Message-ID: <ef4a8147-b331-f018-5b82-9fd20700da3c@umu.se>

Dear all,

I got an overwhelming amount of response to my question, and making a
complete summary is not possible. However, I learned that I should 
change things like 'dat[5:8, 1]' to 'dat[[1]][5:8]',
respecting the fact that a data frame is a list, in my packages.
Accidentally, this also solves the problem  of using tibbles where data 
frames are expected. The classes "tbl" and "tbl_df" will be preserved on 
output; no need to use 'as.data.frame', the simple check 'is.data.frame' 
is enough.

Thanks for a very interesting and enlightening discussion! A special 
thanks to Hadley for sharing great packages with us; I could only wish 
they were easier to use in my own packages;)

G?ran

On 2017-09-26 15:37, Hadley Wickham wrote:
> On Tue, Sep 26, 2017 at 2:30 AM, G?ran Brostr?m
> <goran.brostrom at umu.se> wrote:
>> I am beginning to get complaints from users of my CRAN packages
>> (especially 'eha') to the effect that they get error messages like
>> "Error: Unsupported use of matrix or array for column indexing".
>> 
>> It turns out that they are sticking in tibbles into functions that
>> expect data frames as input. And I am using the kind of subsetting
>> that Hadley dislikes (eha is an old package, much older than
>> tibbles). It is of course a simple matter to change the code so it
>> handles both data frames and tibbles correctly, but this affects
>> many functions, and it will take some time. And when the next guy
>> introduces 'troubles' as an improvement of 'tibbles', I will have
>> to rewrite the code again.
> 
> Changing df[, x] to df[[x]] is not very hard and makes your code 
> easier to understand because it more clearly conveys the intent that 
> you want a single column.
> 
>> While I like Hadley's way of doing it, I think it is a mistake to
>> let a tibble also be of class data frame. To me it is a matter of
>> inheritance and backwards compability: A tibble should add nice
>> things to a data frame, not change basic behaviour, in order to
>> call itself a data frame.
>> 
>> Is it correct to let a tibble be of class "data.frame"?
> 
> If it not inherit from data frame, it would be not work with the 99% 
> of functions that work with data frames and don't deliberately take 
> advantage of the dropping behaviour of [. In other words, it would
> be pointless.
> 
> I decided to make [.tibble type-stable (i.e. always return a data 
> frame) because this behaviour causes substantial problems in real
> data analysis code. I did it understanding that it would cause some
> package developers frustration, but I think it's better for a handful
> of package maintainers to be frustrated than hundreds of users
> creating dangerous code.
> 
> Hadley
>


From cdetermanjr at gmail.com  Fri Sep 29 18:50:25 2017
From: cdetermanjr at gmail.com (Charles Determan)
Date: Fri, 29 Sep 2017 11:50:25 -0500
Subject: [R-pkg-devel] Testthat environment using sourceCpp
Message-ID: <CAKxd1KPZqOqAnm_OTehs0Cuy2=6e6nGeu_tN6UK6vh9jgNMOqg@mail.gmail.com>

Greetings,

I am trying to create some unit tests for a Rcpp::sourceCpp call.  It
includes some dependencies with the // [[Rcpp::depends]] flag and compiles
and passes if I call the test file with testthat::test_file.  However, if I
try to call it with devtools::test() to run all of my tests, the
compilation will fail.  I have discovered that this is because of the way
it is trying to find the relevant headers.

The correct call should be:

g++  -std=gnu++11 -I"C:/Users/mydir/DOCUME~1/R/R-34~1.0/include" -DNDEBUG
-I"C:/Users/mydir/Documents/R/R-3.4.0/library/Rcpp/include"
-I"C:/Users/mydir/Documents/R/R-3.4.0/library/BH/include"
-I"C:/Users/mydir/Documents/R/R-3.4.0/library/RcppEigen/include"
-I"C:/Users/mydir/Documents/R/R-3.4.0/library/RViennaCL/include" -
*I"C:/Users/mydir/Documents/R/R-3.4.0/library/gpuR/include"*
-I"C:/Users/mydir/AppData/Local/Temp/Rtmp4MX4Mi"
  -I"d:/Compiler/gcc-4.9.3/local330/include"     -O2 -Wall  -mtune=core2 -c
file32503f79470f.cpp -o file32503f79470f.o



but instead it is looking locally within the package for the 'include'
directory



g++  -std=gnu++11 -I"C:/Users/mydir/DOCUME~1/R/R-34~1.0/include" -DNDEBUG
-I"C:/Users/mydir/Documents/R/R-3.4.0/library/Rcpp/include"
-I"C:/Users/mydir/Documents/R/R-3.4.0/library/BH/include"
-I"C:/Users/mydir/Documents/R/R-3.4.0/library/RcppEigen/include"
-I"C:/Users/mydir/Documents/R/R-3.4.0/library/RViennaCL/include" -
*I"C:/Users/mydir/Documents/R_projects/gpuR/include"*
-I"C:/Users/mydir/AppData/Local/Temp/Rtmp4MX4Mi"
  -I"d:/Compiler/gcc-4.9.3/local330/include"     -O2 -Wall  -mtune=core2 -c
file32503f79470f.cpp -o file32503f79470f.o

This directory is within the 'inst' directory and therefore not found when
an internal header file is referenced.  Any thoughts both why this is
different when call the 'devtools::test()' versus calling the individual
'testthat::test_file()'?

Regards,
Charles

	[[alternative HTML version deleted]]


From driver at mpib-berlin.mpg.de  Fri Sep 29 16:49:42 2017
From: driver at mpib-berlin.mpg.de (Driver, Charles)
Date: Fri, 29 Sep 2017 14:49:42 +0000
Subject: [R-pkg-devel] Vignette build problem on winbuilder devel only
Message-ID: <07FF1137ECDF224F98289F2ADD580139AA92905B@MaxMail04.mpib-berlin.mpg.de>

Hi, I can't find anything in the R devel NEWS that would explain this warning that occurs when building with the devel version on winbuilder:
"
Warning: running command '"D:\compiler\texmf\miktex\bin\texify.exe" --quiet --pdf "hierarchical.tex" --max-iterations=20 -I "D:/RCompile/recent/R/share/texmf/tex/latex" -I "D:/RCompile/recent/R/share/texmf/bibtex/bst"' had status 1
Error: running 'texi2dvi' on 'hierarchical.tex' failed

LaTeX errors:
hical.tex:10481:  ==> Fatal error occurred, no output PDF file produced!
Execution halted
"
and the only information I find online suggests it may be a problem with the build system. Other packages also seem to be failing with this error on R devel. Building on my own windows r devel build I have no problems like this, and neither does a travis CI R devel build. 

I'm trying to build / submit to CRAN the ctsem package, from https://github.com/cdriveraus/ctsem , any help would be welcome!

Cheers,
Charles


From edd at debian.org  Sat Sep 30 15:23:44 2017
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 30 Sep 2017 08:23:44 -0500
Subject: [R-pkg-devel] Testthat environment using sourceCpp
In-Reply-To: <CAKxd1KPZqOqAnm_OTehs0Cuy2=6e6nGeu_tN6UK6vh9jgNMOqg@mail.gmail.com>
References: <CAKxd1KPZqOqAnm_OTehs0Cuy2=6e6nGeu_tN6UK6vh9jgNMOqg@mail.gmail.com>
Message-ID: <22991.39648.356026.119268@bud.eddelbuettel.com>


Charles,

I cannot help you with testthat or devtools, but the very issue of how to get
C++ test files compiled (with the help of Rcpp) and used is deployed in a
number of packages, both ours and other.

To take but one example, RcppArmadillo does it with about half a dozen C++
files it keeps in a subdirectory inst/unitTests/cpp/ --- and those files are
then sourced and compiled from the test setup function of each unit test file
requiring C++.  This generally calls a short helper function passing the
filename; that helper figures our whether to find the file in the installed
or tested package. You can see that helper function here:
  https://github.com/RcppCore/RcppArmadillo/blob/master/R/unit.test.R

I would assume that someone may have cooked up something similar for use with
testthat, and presumably also with devtools. Otherwise maybe you can, and
then blog about it. We had this setup working pretty much before those tools
existed so I never had a reason to switch.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


