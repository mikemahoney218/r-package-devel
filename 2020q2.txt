From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Fri Apr  3 22:03:12 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Fri, 3 Apr 2020 15:03:12 -0500
Subject: [R-pkg-devel] GitHub problems
In-Reply-To: <24791f17-dadf-4dc2-bbf5-4d9d100afdc2@effectivedefense.org>
References: <9524ce4c-4408-5e0b-1826-6291ccf5c54a@effectivedefense.org>
 <CAJmOi+N7M3+YstV7TW7j+t5Qc=DsMJbq38XDp5ppDB3RU-+41w@mail.gmail.com>
 <24791f17-dadf-4dc2-bbf5-4d9d100afdc2@effectivedefense.org>
Message-ID: <71d38934-2cac-aaf2-c5b2-5006ae3967ca@effectivedefense.org>

Hello, All:


 ????? I've been unable to get SSH to work with 
"https://github.com/JamesRamsay5/fda", documented in my email to this 
group almost 3 weeks ago.? I've been able to do "git clone 
https://sbgraves237:<GitHub-password>@github.com/JamesRamsay5/fda", then 
change a file, do "git commit" and "git push".


 ????? However, this has my GitHub password in a plain text ".git" file 
on my hard drive.? I think the hard drive on my computer is encrypted, 
so maybe that's not a problem.


 ????? Am I not allowed to use SSH with a GitHub repository that's not 
my own?


 ????? Thanks,
 ????? Spencer Graves


p.s.? Since my previous email, Ramsay added "README.md" to that 
repository.? I can do "git clone" and get it, then edit it, then "git 
commit".? However, "git push" keeps giving me errors:


git push
remote: Invalid username or password.
fatal: Authentication failed for 
'https://<token>@github.com/JamesRamsay5/fda/'


 ????? A few hours ago, the owner, JamesRamsay5, went to "Settings" > 
"Manage access", then invited me as a collaborator.? I got an email 
asking me to "view invitation", which I did.? I got another email 
saying, "Hey there, we?re just writing to let you know that you?ve been 
automatically subscribed to a repository on GitHub." Sadly, I still 
couldn't access it, so I I deleted my token and created a new one.? I 
also deleted my previous local clone of "fda" and recreated it using? 
"git clone https://<token>@github.com/JamesRamsay5/fda".? Then I did a 
test edit to the one file in that repository, README.md.? I think did 
'git commit README.md -m "tst edit"'.? Then "git push" keeps giving me 
the error just mentioned.


 > sessionInfo()
R version 3.6.3 (2020-02-29)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS Catalina 10.15.4

Matrix products: default
BLAS: 
/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
LAPACK: 
/Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats???? graphics? grDevices utils???? datasets
[6] methods?? base

loaded via a namespace (and not attached):
[1] compiler_3.6.3 tools_3.6.3


On 2020-03-14 02:33, Spencer Graves wrote:
> Thanks very much.
>
>
> I deleted my token.? I will forward your comment to Jim Ramsay to try 
> to figure out the permissions question.
>
>
> Spencer
>
>
> On 2020-03-14 01:35, Hugh Parsonage wrote:
>>
>> You published your token. You should revoke it.
>>
>> You probably don?t have the right permissions associated with git.
>>
>>
>>
>> On Sat, 14 Mar 2020 at 2:14 pm, Spencer Graves 
>> <spencer.graves at effectivedefense.org 
>> <mailto:spencer.graves at effectivedefense.org>> wrote:
>>
>>     Hello, All:
>>
>>
>>     ?????? What do you suggest Jim Ramsay and I do to migrate the fda
>>     package to GitHub?
>>
>>
>>     ?????? Jim successfully created an empty repository:
>>
>>
>>     https://github.com/JamesRamsay5/fda
>>
>>
>>     ?????? He told me he had officially made me a "contributor".? I did:
>>
>>
>>     git clone https://<token>@github.com/JamesRamsay5/fda
>>     <http://github.com/JamesRamsay5/fda>
>>     Cloning into 'fda'...
>>     warning: You appear to have cloned an empty repository.
>>     Checking connectivity... done.
>>
>>
>>     ???? ? Then I copied files into this directory, did "git add" and
>>     "git
>>     commit".
>>
>>
>>     ?????? Then I did "git push", and it wouldn't let me:
>>
>>
>>     SpenceravessMBP:fda sbgraves$ git push
>>     remote: Permission to JamesRamsay5/fda.git denied to sbgraves237.
>>     fatal: unable to access
>>     'https://892da70262d9a4faa857b8602145414d6b21085b at github.com/JamesRamsay5/fda/':
>>
>>     The requested URL returned error: 403
>>
>>
>>     ?????? Suggestions?
>>     ?????? Thanks,
>>     ?????? Spencer Graves
>>
>>     ______________________________________________
>>     R-package-devel at r-project.org
>>     <mailto:R-package-devel at r-project.org> mailing list
>>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>


	[[alternative HTML version deleted]]


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Fri Apr  3 22:17:34 2020
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Fri, 3 Apr 2020 20:17:34 +0000
Subject: [R-pkg-devel] GitHub problems
In-Reply-To: <71d38934-2cac-aaf2-c5b2-5006ae3967ca@effectivedefense.org>
References: <9524ce4c-4408-5e0b-1826-6291ccf5c54a@effectivedefense.org>
 <CAJmOi+N7M3+YstV7TW7j+t5Qc=DsMJbq38XDp5ppDB3RU-+41w@mail.gmail.com>
 <24791f17-dadf-4dc2-bbf5-4d9d100afdc2@effectivedefense.org>,
 <71d38934-2cac-aaf2-c5b2-5006ae3967ca@effectivedefense.org>
Message-ID: <bda9c0780cba4674a32bfea51be97d9b@umanitoba.ca>

Hi Spencer,


Did you follow the instructions here? https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh


Once the key is setup, you should be able to do "git clone git at github.com:JamesRamsay5/fda.git", without any need to input a token or a password in the command. Similarly, git push/pull/fetch should all work seamlessly.


This is how I've used Github for many years, and it's always worked fine.


Best,

Max

Connecting to GitHub with SSH - GitHub Help<https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh>
help.github.com
You can connect to GitHub using SSH.





Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Spencer Graves <spencer.graves at effectivedefense.org>
Sent: April 3, 2020 3:03:12 PM
To: Hugh Parsonage
Cc: List r-package-devel
Subject: Re: [R-pkg-devel] GitHub problems

********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

Hello, All:


       I've been unable to get SSH to work with
"https://github.com/JamesRamsay5/fda", documented in my email to this
group almost 3 weeks ago.  I've been able to do "git clone
https://sbgraves237:<GitHub-password>@github.com/JamesRamsay5/fda", then
change a file, do "git commit" and "git push".


       However, this has my GitHub password in a plain text ".git" file
on my hard drive.  I think the hard drive on my computer is encrypted,
so maybe that's not a problem.


       Am I not allowed to use SSH with a GitHub repository that's not
my own?


       Thanks,
       Spencer Graves


p.s.  Since my previous email, Ramsay added "README.md" to that
repository.  I can do "git clone" and get it, then edit it, then "git
commit".  However, "git push" keeps giving me errors:


git push
remote: Invalid username or password.
fatal: Authentication failed for
'https://<token>@github.com/JamesRamsay5/fda/'


       A few hours ago, the owner, JamesRamsay5, went to "Settings" >
"Manage access", then invited me as a collaborator.  I got an email
asking me to "view invitation", which I did.  I got another email
saying, "Hey there, we?re just writing to let you know that you?ve been
automatically subscribed to a repository on GitHub." Sadly, I still
couldn't access it, so I I deleted my token and created a new one.  I
also deleted my previous local clone of "fda" and recreated it using
"git clone https://<token>@github.com/JamesRamsay5/fda".  Then I did a
test edit to the one file in that repository, README.md.  I think did
'git commit README.md -m "tst edit"'.  Then "git push" keeps giving me
the error just mentioned.


 > sessionInfo()
R version 3.6.3 (2020-02-29)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS Catalina 10.15.4

Matrix products: default
BLAS:
/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
LAPACK:
/Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets
[6] methods   base

loaded via a namespace (and not attached):
[1] compiler_3.6.3 tools_3.6.3


On 2020-03-14 02:33, Spencer Graves wrote:
> Thanks very much.
>
>
> I deleted my token.  I will forward your comment to Jim Ramsay to try
> to figure out the permissions question.
>
>
> Spencer
>
>
> On 2020-03-14 01:35, Hugh Parsonage wrote:
>>
>> You published your token. You should revoke it.
>>
>> You probably don?t have the right permissions associated with git.
>>
>>
>>
>> On Sat, 14 Mar 2020 at 2:14 pm, Spencer Graves
>> <spencer.graves at effectivedefense.org
>> <mailto:spencer.graves at effectivedefense.org>> wrote:
>>
>>     Hello, All:
>>
>>
>>            What do you suggest Jim Ramsay and I do to migrate the fda
>>     package to GitHub?
>>
>>
>>            Jim successfully created an empty repository:
>>
>>
>>     https://github.com/JamesRamsay5/fda
>>
>>
>>            He told me he had officially made me a "contributor".  I did:
>>
>>
>>     git clone https://<token>@github.com/JamesRamsay5/fda
>>     <http://github.com/JamesRamsay5/fda>
>>     Cloning into 'fda'...
>>     warning: You appear to have cloned an empty repository.
>>     Checking connectivity... done.
>>
>>
>>            Then I copied files into this directory, did "git add" and
>>     "git
>>     commit".
>>
>>
>>            Then I did "git push", and it wouldn't let me:
>>
>>
>>     SpenceravessMBP:fda sbgraves$ git push
>>     remote: Permission to JamesRamsay5/fda.git denied to sbgraves237.
>>     fatal: unable to access
>>     'https://892da70262d9a4faa857b8602145414d6b21085b at github.com/JamesRamsay5/fda/':
>>
>>     The requested URL returned error: 403
>>
>>
>>            Suggestions?
>>            Thanks,
>>            Spencer Graves
>>
>>     ______________________________________________
>>     R-package-devel at r-project.org
>>     <mailto:R-package-devel at r-project.org> mailing list
>>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>


        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Fri Apr  3 22:45:51 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Fri, 3 Apr 2020 15:45:51 -0500
Subject: [R-pkg-devel] GitHub problems
In-Reply-To: <bda9c0780cba4674a32bfea51be97d9b@umanitoba.ca>
References: <9524ce4c-4408-5e0b-1826-6291ccf5c54a@effectivedefense.org>
 <CAJmOi+N7M3+YstV7TW7j+t5Qc=DsMJbq38XDp5ppDB3RU-+41w@mail.gmail.com>
 <24791f17-dadf-4dc2-bbf5-4d9d100afdc2@effectivedefense.org>
 <71d38934-2cac-aaf2-c5b2-5006ae3967ca@effectivedefense.org>
 <bda9c0780cba4674a32bfea51be97d9b@umanitoba.ca>
Message-ID: <07f2367a-d7d8-1194-19e2-337fd94bb922@effectivedefense.org>

Hi, Max et al.:


 ??? ? With SSH established:


git clone git at github.com:JamesRamsay5/fda.git


 ??? ? Worked.


 ????? I had tried something like "git clone 
git at github.com:JamesRamsay5/fda.git" before, but I either did not have 
that exact syntax or I tried that before I had SSH.


 ????? Thanks again,
 ????? Spencer Graves


On 2020-04-03 15:17, Max Turgeon wrote:
>
> Hi Spencer,
>
>
> Did you follow the instructions here? 
> https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh
>
>
> Once the key is setup, you should be able to do "git clone 
> git at github.com:JamesRamsay5/fda.git", without any need to input a 
> token or a password in the command. Similarly, git push/pull/fetch 
> should all work seamlessly.
>
>
> This is how I've used Github for many years, and it's always worked fine.
>
>
> Best,
>
> Max
>
> Connecting to GitHub with SSH - GitHub Help 
> <https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh>
> help.github.com
> You can connect to GitHub using SSH.
>
>
>
>
> Max Turgeon
> Assistant Professor
> Department of Statistics
> Department of Computer Science
> University of Manitoba
> maxturgeon.ca <http://maxturgeon.ca>
>
>
> ------------------------------------------------------------------------
> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on 
> behalf of Spencer Graves <spencer.graves at effectivedefense.org>
> *Sent:* April 3, 2020 3:03:12 PM
> *To:* Hugh Parsonage
> *Cc:* List r-package-devel
> *Subject:* Re: [R-pkg-devel] GitHub problems
> ********************************************************
> Caution: This message was sent from outside the University of Manitoba.
> ********************************************************
>
> Hello, All:
>
>
> ?????? I've been unable to get SSH to work with
> "https://github.com/JamesRamsay5/fda", documented in my email to this
> group almost 3 weeks ago.? I've been able to do "git clone
> https://sbgraves237:<GitHub-password>@github.com/JamesRamsay5/fda", then
> change a file, do "git commit" and "git push".
>
>
> ?????? However, this has my GitHub password in a plain text ".git" file
> on my hard drive.? I think the hard drive on my computer is encrypted,
> so maybe that's not a problem.
>
>
> ?????? Am I not allowed to use SSH with a GitHub repository that's not
> my own?
>
>
> ?????? Thanks,
> ?????? Spencer Graves
>
>
> p.s.? Since my previous email, Ramsay added "README.md" to that
> repository.? I can do "git clone" and get it, then edit it, then "git
> commit".? However, "git push" keeps giving me errors:
>
>
> git push
> remote: Invalid username or password.
> fatal: Authentication failed for
> 'https://<token>@github.com/JamesRamsay5/fda/'
>
>
> ?????? A few hours ago, the owner, JamesRamsay5, went to "Settings" >
> "Manage access", then invited me as a collaborator.? I got an email
> asking me to "view invitation", which I did.? I got another email
> saying, "Hey there, we?re just writing to let you know that you?ve been
> automatically subscribed to a repository on GitHub." Sadly, I still
> couldn't access it, so I I deleted my token and created a new one.? I
> also deleted my previous local clone of "fda" and recreated it using
> "git clone https://<token>@github.com/JamesRamsay5/fda".? Then I did a
> test edit to the one file in that repository, README.md.? I think did
> 'git commit README.md -m "tst edit"'.? Then "git push" keeps giving me
> the error just mentioned.
>
>
> ?> sessionInfo()
> R version 3.6.3 (2020-02-29)
> Platform: x86_64-apple-darwin15.6.0 (64-bit)
> Running under: macOS Catalina 10.15.4
>
> Matrix products: default
> BLAS:
> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
> LAPACK:
> /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRlapack.dylib
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] stats???? graphics? grDevices utils???? datasets
> [6] methods?? base
>
> loaded via a namespace (and not attached):
> [1] compiler_3.6.3 tools_3.6.3
>
>
> On 2020-03-14 02:33, Spencer Graves wrote:
> > Thanks very much.
> >
> >
> > I deleted my token.? I will forward your comment to Jim Ramsay to try
> > to figure out the permissions question.
> >
> >
> > Spencer
> >
> >
> > On 2020-03-14 01:35, Hugh Parsonage wrote:
> >>
> >> You published your token. You should revoke it.
> >>
> >> You probably don?t have the right permissions associated with git.
> >>
> >>
> >>
> >> On Sat, 14 Mar 2020 at 2:14 pm, Spencer Graves
> >> <spencer.graves at effectivedefense.org
> >> <mailto:spencer.graves at effectivedefense.org>> wrote:
> >>
> >>???? Hello, All:
> >>
> >>
> >>???? ?????? What do you suggest Jim Ramsay and I do to migrate the fda
> >>???? package to GitHub?
> >>
> >>
> >>???? ?????? Jim successfully created an empty repository:
> >>
> >>
> >> https://github.com/JamesRamsay5/fda
> >>
> >>
> >>???? ?????? He told me he had officially made me a "contributor".? I 
> did:
> >>
> >>
> >>???? git clone https://<token>@github.com/JamesRamsay5/fda
> >>???? <http://github.com/JamesRamsay5/fda>
> >>???? Cloning into 'fda'...
> >>???? warning: You appear to have cloned an empty repository.
> >>???? Checking connectivity... done.
> >>
> >>
> >>???? ???? ? Then I copied files into this directory, did "git add" and
> >>???? "git
> >>???? commit".
> >>
> >>
> >>???? ?????? Then I did "git push", and it wouldn't let me:
> >>
> >>
> >>???? SpenceravessMBP:fda sbgraves$ git push
> >>???? remote: Permission to JamesRamsay5/fda.git denied to sbgraves237.
> >>???? fatal: unable to access
> >>???? 
> 'https://892da70262d9a4faa857b8602145414d6b21085b at github.com/JamesRamsay5/fda/':
> >>
> >>???? The requested URL returned error: 403
> >>
> >>
> >>???? ?????? Suggestions?
> >>???? ?????? Thanks,
> >>???? ?????? Spencer Graves
> >>
> >>???? ______________________________________________
> >>???? R-package-devel at r-project.org
> >>???? <mailto:R-package-devel at r-project.org> mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
>
>
> ??????? [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From |enz @end|ng |rom |mb|@un|-|re|burg@de  Mon Apr  6 14:21:29 2020
From: |enz @end|ng |rom |mb|@un|-|re|burg@de (Stefan Lenz IMBI)
Date: Mon, 06 Apr 2020 14:21:29 +0200
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
Message-ID: <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>

Dear all,

I just submitted the new package "JuliaConnectoR" to CRAN.
(See https://github.com/stefan-m-lenz/JuliaConnectoR )
The submission does not pass the automatic checks because of two notes (see below).
One note is simply that I am a new submitter.
The other note is because of the the use of "attach".
But I am certain that I am using "attach" in the right way. In its documentation, under "Good practice" , it says,
"In programming, functions should not change the search path unless that is their purpose."
Here this is exactly the purpose because one of the main functionalities of the package is to add Julia functions to the search path.
Can anybody help me with this?
Best wishes
Stefan

----------------urspr?ngliche Nachricht-----------------
Von: Stefan Lenz [Stefan-M-Lenz at web.de ]
An: lenz at imbi.uni-freiburg.de 
Datum: Mon, 6 Apr 2020 14:04:21 +0200
----------------------------------------------------------
>
>
>Gesendet: Montag, 06. April 2020 um 13:04 Uhr
>Von: ligges at statistik.tu-dortmund.de 
>An: stefan-m-lenz at web.de 
>Cc: CRAN-submissions at R-project.org 
>Betreff: [CRAN-pretest-archived] CRAN submission JuliaConnectoR 0.5.0
>Dear maintainer,
>
>package JuliaConnectoR_0.5.0.tar.gz does not pass the incoming checks 
>automatically, please see the following pre-tests:
>Windows: 
>Status: 2 NOTEs
>Debian: 
>Status: 2 NOTEs
>
>Please fix all problems and resubmit a fixed version via the webform.
>If you are not sure how to fix the problems shown, please ask for help on the 
>R-package-devel mailing list:
>
>If you are fairly certain the rejection is a false positive, please reply-all to this 
>message and explain.
>
>More details are given in the directory:
>
>The files will be removed after roughly 7 days.
>
>No strong reverse dependencies to be checked.
>
>Best regards,
>CRAN teams' auto-check service
>Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
>Check: CRAN incoming feasibility, Result: NOTE
>Maintainer: 'Stefan Lenz stefan-m-lenz at web.de '
>
>New submission
>
>Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
>Check: R code for possible problems, Result: NOTE
>Found the following calls to attach():
>File 'JuliaConnectoR/R/importing.R':
>attach(funenv, name = envName)
>See section 'Good practice' in '?attach'.
 

__________________________________________________
Stefan Lenz

Institut f?r Medizinische Biometrie und Statistik
Medizinische Fakult?t / Universit?tsklinikum Freiburg

Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg

Tel.: 0761/203-6670
E-Mail: lenz at imbi.uni-freiburg.de 
	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Mon Apr  6 14:38:34 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Mon, 6 Apr 2020 08:38:34 -0400
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
Message-ID: <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>

  Just reply to the CRAN maintainers and explain this situation.  It?s
slightly buried, but the e-mail you received does say:

> If you are fairly certain the rejection is a false positive, please reply-all to this
> message and explain.

  cheers
    Ben Bolker

On Mon, Apr 6, 2020 at 8:28 AM Stefan Lenz IMBI
<lenz at imbi.uni-freiburg.de> wrote:
>
> Dear all,
>
> I just submitted the new package "JuliaConnectoR" to CRAN.
> (See https://github.com/stefan-m-lenz/JuliaConnectoR )
> The submission does not pass the automatic checks because of two notes (see below).
> One note is simply that I am a new submitter.
> The other note is because of the the use of "attach".
> But I am certain that I am using "attach" in the right way. In its documentation, under "Good practice" , it says,
> "In programming, functions should not change the search path unless that is their purpose."
> Here this is exactly the purpose because one of the main functionalities of the package is to add Julia functions to the search path.
> Can anybody help me with this?
> Best wishes
> Stefan
>
> ----------------urspr?ngliche Nachricht-----------------
> Von: Stefan Lenz [Stefan-M-Lenz at web.de ]
> An: lenz at imbi.uni-freiburg.de
> Datum: Mon, 6 Apr 2020 14:04:21 +0200
> ----------------------------------------------------------
> >
> >
> >Gesendet: Montag, 06. April 2020 um 13:04 Uhr
> >Von: ligges at statistik.tu-dortmund.de
> >An: stefan-m-lenz at web.de
> >Cc: CRAN-submissions at R-project.org
> >Betreff: [CRAN-pretest-archived] CRAN submission JuliaConnectoR 0.5.0
> >Dear maintainer,
> >
> >package JuliaConnectoR_0.5.0.tar.gz does not pass the incoming checks
> >automatically, please see the following pre-tests:
> >Windows:
> >Status: 2 NOTEs
> >Debian:
> >Status: 2 NOTEs
> >
> >Please fix all problems and resubmit a fixed version via the webform.
> >If you are not sure how to fix the problems shown, please ask for help on the
> >R-package-devel mailing list:
> >
> >If you are fairly certain the rejection is a false positive, please reply-all to this
> >message and explain.
> >
> >More details are given in the directory:
> >
> >The files will be removed after roughly 7 days.
> >
> >No strong reverse dependencies to be checked.
> >
> >Best regards,
> >CRAN teams' auto-check service
> >Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
> >Check: CRAN incoming feasibility, Result: NOTE
> >Maintainer: 'Stefan Lenz stefan-m-lenz at web.de '
> >
> >New submission
> >
> >Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
> >Check: R code for possible problems, Result: NOTE
> >Found the following calls to attach():
> >File 'JuliaConnectoR/R/importing.R':
> >attach(funenv, name = envName)
> >See section 'Good practice' in '?attach'.
>
>
> __________________________________________________
> Stefan Lenz
>
> Institut f?r Medizinische Biometrie und Statistik
> Medizinische Fakult?t / Universit?tsklinikum Freiburg
>
> Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg
>
> Tel.: 0761/203-6670
> E-Mail: lenz at imbi.uni-freiburg.de
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Mon Apr  6 16:49:49 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 6 Apr 2020 09:49:49 -0500
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
Message-ID: <24203.16781.429161.610624@rob.eddelbuettel.com>


On 6 April 2020 at 08:38, Ben Bolker wrote:
|   Just reply to the CRAN maintainers and explain this situation.  It?s
| slightly buried, but the e-mail you received does say:
| 
| > If you are fairly certain the rejection is a false positive, please reply-all to this
| > message and explain.

True, but this misses the "Letter of the law" versus the "Spirit of the law".

It might be worth mentioning that use of attach() is seen, to find one poor
analogy, pretty much like use of global variables these days. "Just because
you could does not mean you should".

See e.g. one of the first google hits for 'r do not use attach' here:
https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From bbo|ker @end|ng |rom gm@||@com  Mon Apr  6 16:59:22 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Mon, 6 Apr 2020 10:59:22 -0400
Subject: [R-pkg-devel] attach
In-Reply-To: <24203.16781.429161.610624@rob.eddelbuettel.com>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
Message-ID: <2ea0c9cb-b79e-efd3-5884-291a4a4d1cb3@gmail.com>


  Fair enough.  I'm going to derail/repurpose this thread to ask a
couple of questions about attach().

   I have often used with() for situations where I want to evaluate a
bunch of expressions with the elements of a parameter vector, e.g.
inside a gradient function for deSolve::ode().  However, I have found
this very hard to debug because (AFAIK) you can't debug-step through the
components of a with() expression.
  Potential solutions for this include

 1. attach(params); on.exit(detach(params))

  * this will be flagged by CRAN
  * I have found some really surprising (to me) precedence issues with
this _when used in a package context_ - it looks like the elements in
'params' are found _after_ built-in objects in R?? (I have to take some
time to make a MRE of this

  2. The zeallot package does 'unpacking' as with Python tuples.  I was
worried about dragging in tidyverse dependencies, but it looks like it
doesn't actually Import: anything.
   This doesn't quite do what I want, as I want to unpack using the
names in the object (which makes it look perfect for the attach() solution)


  Thoughts?

On 2020-04-06 10:49 a.m., Dirk Eddelbuettel wrote:
> 
> On 6 April 2020 at 08:38, Ben Bolker wrote:
> |   Just reply to the CRAN maintainers and explain this situation.  It?s
> | slightly buried, but the e-mail you received does say:
> | 
> | > If you are fairly certain the rejection is a false positive, please reply-all to this
> | > message and explain.
> 
> True, but this misses the "Letter of the law" versus the "Spirit of the law".
> 
> It might be worth mentioning that use of attach() is seen, to find one poor
> analogy, pretty much like use of global variables these days. "Just because
> you could does not mean you should".
> 
> See e.g. one of the first google hits for 'r do not use attach' here:
> https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
> 
> Dirk
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Apr  6 17:00:09 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 6 Apr 2020 11:00:09 -0400
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <24203.16781.429161.610624@rob.eddelbuettel.com>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
Message-ID: <3cadf8d8-0591-8763-8a18-7cc4458d281f@gmail.com>

On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
> 
> On 6 April 2020 at 08:38, Ben Bolker wrote:
> |   Just reply to the CRAN maintainers and explain this situation.  It?s
> | slightly buried, but the e-mail you received does say:
> |
> | > If you are fairly certain the rejection is a false positive, please reply-all to this
> | > message and explain.
> 
> True, but this misses the "Letter of the law" versus the "Spirit of the law".
> 
> It might be worth mentioning that use of attach() is seen, to find one poor
> analogy, pretty much like use of global variables these days. "Just because
> you could does not mean you should".
> 
> See e.g. one of the first google hits for 'r do not use attach' here:
> https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead

I don't have a strong opinion on this:  the proposed use seems to be no 
worse than library() or require().  Those are fine for users to use, but 
are discouraged in a package.  If the attach() never happens without an 
explicit request from the user (and that's what it sounds like), I'd say 
it's probably okay.

However, there is an easy workaround:  just return the environment 
without attaching it.  Then the user has the choice of attaching it, or 
using it as a prefix when they call the functions in it.  So it's not as 
though this will destroy the utility of the package if Stefan isn't 
allowed to call attach().

Duncan Murdoch


From |enz @end|ng |rom |mb|@un|-|re|burg@de  Mon Apr  6 17:10:52 2020
From: |enz @end|ng |rom |mb|@un|-|re|burg@de (Stefan Lenz IMBI)
Date: Mon, 06 Apr 2020 17:10:52 +0200
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
Message-ID: <20200406171052.EGroupware.7j2P2odqTiWrpTZjYHlxYFP@_>

My case is a little bit different from the use of global variables for data described in the Stackoverflow post.
I import a data base which contains function names of Julia functions from a Julia package.
This is analogous to loading a package in R.
The goal is to make it possible to call Julia functions like R functions.
If you call library(...) in R then the functions contained in the package are also available in the global search path.
In this case it doesn't make sense to use "with".
I am open to suggestions how I can change it to make it better, but the goal is really to be able to write

    juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
    myJuliaFunction()

same as you would write

    library("MyRPackage") # exports myRFunction
    myRFunction()

Best wishes

Stefan
 
----------------urspr?ngliche Nachricht-----------------
Von: Dirk Eddelbuettel [edd at debian.org]
An: Ben Bolker [bbolker at gmail.com]
Kopie: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de], List r-package-devel [r-package-devel at r-project.org]
Datum: Mon, 6 Apr 2020 09:49:49 -0500
-------------------------------------------------
 
 
> 
> On 6 April 2020 at 08:38, Ben Bolker wrote:
> | Just reply to the CRAN maintainers and explain this situation. It?s
> | slightly buried, but the e-mail you received does say:
> | 
> | > If you are fairly certain the rejection is a false positive, please reply-all 
> to this
> | > message and explain.
> 
> True, but this misses the "Letter of the law" versus the "Spirit of the law".
> 
> It might be worth mentioning that use of attach() is seen, to find one poor
> analogy, pretty much like use of global variables these days. "Just because
> you could does not mean you should".
> 
> See e.g. one of the first google hits for 'r do not use attach' here:
> 
> https://stackoverflow.com/questions/10067680/why-is-it-not-advisable
> -to-use-attach-in-r-and-what-should-i-use-instead
> 
> Dirk
> 


-- 

Stefan Lenz

Institut f?r Medizinische Biometrie und Statistik
Medizinische Fakult?t / Universit?tsklinikum Freiburg

Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg

Tel.: 0761/203-6670
E-Mail: lenz at imbi.uni-freiburg.de


From renoz@o @end|ng |rom protonm@||@com  Mon Apr  6 17:16:33 2020
From: renoz@o @end|ng |rom protonm@||@com (renozao)
Date: Mon, 06 Apr 2020 15:16:33 +0000
Subject: [R-pkg-devel] =?utf-8?q?Error_creating_union_class=3A_object_?=
 =?utf-8?b?4oCYLl9fQ19fY29tcE1hdHJpeOKAmSBub3QgZm91bmQ=?=
Message-ID: <3NF8PazyTwlR-NsDz0970jmrLD2_ITDmQFXKMkeW075iKUrvebyOISwaQAWAIjvCE8WFbQdAkRakCtUGLFdl7bMJ2TZW3jKcoxsWVnq4CFk=@protonmail.com>

Hi,
following up on this.
Has anybody encountered this issue or could give some insights on it?
Is there anything I can do here, except avoiding using Matrix in the union class?

Thanks
	[[alternative HTML version deleted]]


From |enz @end|ng |rom |mb|@un|-|re|burg@de  Mon Apr  6 17:25:35 2020
From: |enz @end|ng |rom |mb|@un|-|re|burg@de (Stefan Lenz IMBI)
Date: Mon, 06 Apr 2020 17:25:35 +0200
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <24203.16781.429161.610624@rob.eddelbuettel.com>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
Message-ID: <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>

Yes, as I wrote earlier, I would like to imitate the behaviour of loading an R package

 juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
 myJuliaFunction()

like R:

 library("MyRPackage") # exports myRFunction
 myRFunction()

I could return an environment, such that the call becomes

 attach(juliaUsing("SomeJuliaPackage"))
 myJuliaFunction()

But calling juliaUsing(), as it is now, takes care that if a package is imported a second time,
the first data base is removed via detach().
This way, users do not have to worry about calling juliaUsing() mutliple times in a script, same
as R users don't have to worry about calling library() multiple times.
If you call the code with attach() multiple times and do not detach, you get your screen cluttered with
warnings "xxx is masked by xxx".
So I would say it would decrease user-friendliness to return an environment.
I also want to make explicit, that the call to attach
occurs only once in my code, after creating the environment:

 envName <- paste0("JuliaConnectoR:", absoluteModulePath)
 if (envName %in% search()) {
 detach(envName, character.only = TRUE)
 }
 attach(funenv, name = envName)

This code is only called by juliaImport() and juliaUsing(), which aren't called by any other function of 
the package
and are supposed to be called directly by the user.

Stefan 
 
----------------urspr?ngliche Nachricht-----------------
Von: Duncan Murdoch [murdoch.duncan at gmail.com]
An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker [bbolker at gmail.com]
Kopie: List r-package-devel [r-package-devel at r-project.org]
Datum: Mon, 6 Apr 2020 11:00:09 -0400
-------------------------------------------------
 
 
> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>> 
>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>> | Just reply to the CRAN maintainers and explain this situation. It?s
>> | slightly buried, but the e-mail you received does say:
>> |
>> | > If you are fairly certain the rejection is a false positive, please reply-all to this
>> | > message and explain.
>> 
>> True, but this misses the "Letter of the law" versus the "Spirit of the law".
>> 
>> It might be worth mentioning that use of attach() is seen, to find one poor
>> analogy, pretty much like use of global variables these days. "Just because
>> you could does not mean you should".
>> 
>> See e.g. one of the first google hits for 'r do not use attach' here:
>> https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
> 
> I don't have a strong opinion on this: the proposed use seems to be no 
> worse than library() or require(). Those are fine for users to use, but 
> are discouraged in a package. If the attach() never happens without an 
> explicit request from the user (and that's what it sounds like), I'd say 
> it's probably okay.
> 
> However, there is an easy workaround: just return the environment 
> without attaching it. Then the user has the choice of attaching it, or 
> using it as a prefix when they call the functions in it. So it's not as 
> though this will destroy the utility of the package if Stefan isn't 
> allowed to call attach().
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


-- 

Stefan Lenz

Institut f?r Medizinische Biometrie und Statistik
Medizinische Fakult?t / Universit?tsklinikum Freiburg

Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg

Tel.: 0761/203-6670
E-Mail: lenz at imbi.uni-freiburg.de


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Apr  6 17:33:51 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 6 Apr 2020 11:33:51 -0400
Subject: [R-pkg-devel] attach
In-Reply-To: <2ea0c9cb-b79e-efd3-5884-291a4a4d1cb3@gmail.com>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <2ea0c9cb-b79e-efd3-5884-291a4a4d1cb3@gmail.com>
Message-ID: <a3128fc4-340e-02c2-5b53-fc071258540e@gmail.com>

On 06/04/2020 10:59 a.m., Ben Bolker wrote:
> 
>    Fair enough.  I'm going to derail/repurpose this thread to ask a
> couple of questions about attach().
> 
>     I have often used with() for situations where I want to evaluate a
> bunch of expressions with the elements of a parameter vector, e.g.
> inside a gradient function for deSolve::ode().  However, I have found
> this very hard to debug because (AFAIK) you can't debug-step through the
> components of a with() expression.
>    Potential solutions for this include
> 
>   1. attach(params); on.exit(detach(params))
> 
>    * this will be flagged by CRAN
>    * I have found some really surprising (to me) precedence issues with
> this _when used in a package context_ - it looks like the elements in
> 'params' are found _after_ built-in objects in R?? (I have to take some
> time to make a MRE of this

I suspect what happened is that you had a copy of a built-in function in 
the global environment.  The global environment always comes ahead of 
attach()'d environments.  On the other hand, with() gets it right.

You can see this:

x <- 123
df <- data.frame(x = 456)
with(df, x)
#> [1] 456
attach(df)
#> The following object is masked _by_ .GlobalEnv:
#>
#>     x
x
#> [1] 123
detach(df)

As for debugging, the setBreakpoint() function can set a breakpoint in 
the code block in with().  RStudio uses that or some equivalent for 
setting breakpoints, so it can set breakpoints within the block.

If you call debug() on a function and get to a with() statement, you can 
eventually get to the code within it by hitting "s" (step in) several 
times.  It's fairly scary stepping into .Internal(), but it does 
eventually get you there.

Duncan Murdoch

> 
>    2. The zeallot package does 'unpacking' as with Python tuples.  I was
> worried about dragging in tidyverse dependencies, but it looks like it
> doesn't actually Import: anything.
>     This doesn't quite do what I want, as I want to unpack using the
> names in the object (which makes it look perfect for the attach() solution)
> 
> 
>    Thoughts?
> 
> On 2020-04-06 10:49 a.m., Dirk Eddelbuettel wrote:
>>
>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>> |   Just reply to the CRAN maintainers and explain this situation.  It?s
>> | slightly buried, but the e-mail you received does say:
>> |
>> | > If you are fairly certain the rejection is a false positive, please reply-all to this
>> | > message and explain.
>>
>> True, but this misses the "Letter of the law" versus the "Spirit of the law".
>>
>> It might be worth mentioning that use of attach() is seen, to find one poor
>> analogy, pretty much like use of global variables these days. "Just because
>> you could does not mean you should".
>>
>> See e.g. one of the first google hits for 'r do not use attach' here:
>> https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>
>> Dirk
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Apr  6 17:40:12 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 6 Apr 2020 11:40:12 -0400
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
Message-ID: <510e7822-e79a-c760-0031-66d878273936@gmail.com>

On 06/04/2020 11:25 a.m., Stefan Lenz IMBI wrote:
> Yes, as I wrote earlier, I would like to imitate the behaviour of loading an R package
> 
>   juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
>   myJuliaFunction()
> 
> like R:
> 
>   library("MyRPackage") # exports myRFunction
>   myRFunction()
> 
> I could return an environment, such that the call becomes
> 
>   attach(juliaUsing("SomeJuliaPackage"))
>   myJuliaFunction()

I wouldn't use it that way.  I'd write it as

     sjp <- juliaUsing("SomeJuliaPackage")
     sjp$myJuliaFunction()

This is similar to the advice to use pkg::foo() rather than library(pkg) 
followed by plain foo() in the code.

Duncan Murdoch

> 
> But calling juliaUsing(), as it is now, takes care that if a package is imported a second time,
> the first data base is removed via detach().
> This way, users do not have to worry about calling juliaUsing() mutliple times in a script, same
> as R users don't have to worry about calling library() multiple times.
> If you call the code with attach() multiple times and do not detach, you get your screen cluttered with
> warnings "xxx is masked by xxx".
> So I would say it would decrease user-friendliness to return an environment.
> I also want to make explicit, that the call to attach
> occurs only once in my code, after creating the environment:
> 
>   envName <- paste0("JuliaConnectoR:", absoluteModulePath)
>   if (envName %in% search()) {
>   detach(envName, character.only = TRUE)
>   }
>   attach(funenv, name = envName)
> 
> This code is only called by juliaImport() and juliaUsing(), which aren't called by any other function of
> the package
> and are supposed to be called directly by the user.
> 
> Stefan
>   
> ----------------urspr?ngliche Nachricht-----------------
> Von: Duncan Murdoch [murdoch.duncan at gmail.com]
> An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker [bbolker at gmail.com]
> Kopie: List r-package-devel [r-package-devel at r-project.org]
> Datum: Mon, 6 Apr 2020 11:00:09 -0400
> -------------------------------------------------
>   
>   
>> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>>>
>>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>>> | Just reply to the CRAN maintainers and explain this situation. It?s
>>> | slightly buried, but the e-mail you received does say:
>>> |
>>> | > If you are fairly certain the rejection is a false positive, please reply-all to this
>>> | > message and explain.
>>>
>>> True, but this misses the "Letter of the law" versus the "Spirit of the law".
>>>
>>> It might be worth mentioning that use of attach() is seen, to find one poor
>>> analogy, pretty much like use of global variables these days. "Just because
>>> you could does not mean you should".
>>>
>>> See e.g. one of the first google hits for 'r do not use attach' here:
>>> https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>
>> I don't have a strong opinion on this: the proposed use seems to be no
>> worse than library() or require(). Those are fine for users to use, but
>> are discouraged in a package. If the attach() never happens without an
>> explicit request from the user (and that's what it sounds like), I'd say
>> it's probably okay.
>>
>> However, there is an easy workaround: just return the environment
>> without attaching it. Then the user has the choice of attaching it, or
>> using it as a prefix when they call the functions in it. So it's not as
>> though this will destroy the utility of the package if Stefan isn't
>> allowed to call attach().
>>
>> Duncan Murdoch
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Apr  6 19:51:53 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 06 Apr 2020 10:51:53 -0700
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <510e7822-e79a-c760-0031-66d878273936@gmail.com>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
 <510e7822-e79a-c760-0031-66d878273936@gmail.com>
Message-ID: <37F2BD9A-21AE-400D-BEEC-19382A591AEB@dcn.davis.ca.us>

One could take the position that the library and require functions were a mistake to begin with and that all contributed packages should be accessed using ::...  or one could recognize that these functions are an expected feature of R at this point and then it is not defensible to ban the proposed approach of importing names as Stefan wants to. I don't think it is fair to require this higher level of specificity just because it involves use of attach.

That said, another feature of R packages is the integrated help system... importing Julia functions wholesale may lead to problems with consistency in navigating the help files. IMO it may be justifiable to ban this particular syntactic convenience to maintain some separation in the minds of users looking for help on these new functions, since the syntactic and semantic structure of functions from another language may not align well with normal R functions. But I am not familiar with Julia or Stefan's package or the support it brings in this area... I just disagree with banning a "library" lookalike function "just because" it happens to involve attach.

On April 6, 2020 8:40:12 AM PDT, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>On 06/04/2020 11:25 a.m., Stefan Lenz IMBI wrote:
>> Yes, as I wrote earlier, I would like to imitate the behaviour of
>loading an R package
>> 
>>   juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
>>   myJuliaFunction()
>> 
>> like R:
>> 
>>   library("MyRPackage") # exports myRFunction
>>   myRFunction()
>> 
>> I could return an environment, such that the call becomes
>> 
>>   attach(juliaUsing("SomeJuliaPackage"))
>>   myJuliaFunction()
>
>I wouldn't use it that way.  I'd write it as
>
>     sjp <- juliaUsing("SomeJuliaPackage")
>     sjp$myJuliaFunction()
>
>This is similar to the advice to use pkg::foo() rather than
>library(pkg) 
>followed by plain foo() in the code.
>
>Duncan Murdoch
>
>> 
>> But calling juliaUsing(), as it is now, takes care that if a package
>is imported a second time,
>> the first data base is removed via detach().
>> This way, users do not have to worry about calling juliaUsing()
>mutliple times in a script, same
>> as R users don't have to worry about calling library() multiple
>times.
>> If you call the code with attach() multiple times and do not detach,
>you get your screen cluttered with
>> warnings "xxx is masked by xxx".
>> So I would say it would decrease user-friendliness to return an
>environment.
>> I also want to make explicit, that the call to attach
>> occurs only once in my code, after creating the environment:
>> 
>>   envName <- paste0("JuliaConnectoR:", absoluteModulePath)
>>   if (envName %in% search()) {
>>   detach(envName, character.only = TRUE)
>>   }
>>   attach(funenv, name = envName)
>> 
>> This code is only called by juliaImport() and juliaUsing(), which
>aren't called by any other function of
>> the package
>> and are supposed to be called directly by the user.
>> 
>> Stefan
>>   
>> ----------------urspr?ngliche Nachricht-----------------
>> Von: Duncan Murdoch [murdoch.duncan at gmail.com]
>> An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker
>[bbolker at gmail.com]
>> Kopie: List r-package-devel [r-package-devel at r-project.org]
>> Datum: Mon, 6 Apr 2020 11:00:09 -0400
>> -------------------------------------------------
>>   
>>   
>>> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>>>>
>>>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>>>> | Just reply to the CRAN maintainers and explain this situation.
>It?s
>>>> | slightly buried, but the e-mail you received does say:
>>>> |
>>>> | > If you are fairly certain the rejection is a false positive,
>please reply-all to this
>>>> | > message and explain.
>>>>
>>>> True, but this misses the "Letter of the law" versus the "Spirit of
>the law".
>>>>
>>>> It might be worth mentioning that use of attach() is seen, to find
>one poor
>>>> analogy, pretty much like use of global variables these days. "Just
>because
>>>> you could does not mean you should".
>>>>
>>>> See e.g. one of the first google hits for 'r do not use attach'
>here:
>>>>
>https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>>
>>> I don't have a strong opinion on this: the proposed use seems to be
>no
>>> worse than library() or require(). Those are fine for users to use,
>but
>>> are discouraged in a package. If the attach() never happens without
>an
>>> explicit request from the user (and that's what it sounds like), I'd
>say
>>> it's probably okay.
>>>
>>> However, there is an easy workaround: just return the environment
>>> without attaching it. Then the user has the choice of attaching it,
>or
>>> using it as a prefix when they call the functions in it. So it's not
>as
>>> though this will destroy the utility of the package if Stefan isn't
>>> allowed to call attach().
>>>
>>> Duncan Murdoch
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>> 
>>
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From j@red_wood @end|ng |rom 163@com  Tue Apr  7 08:25:21 2020
From: j@red_wood @end|ng |rom 163@com (jared_wood)
Date: Tue, 7 Apr 2020 14:25:21 +0800 (GMT+08:00)
Subject: [R-pkg-devel] About dataset in my own package
Message-ID: <7cf879d3.2ce8.171535093ff.Coremail.jared_wood@163.com>

Dear all?

I have three datasets (drugbank.rda edgar.rda mala.rda) in my package and I put them in the document folder which called ?data?.

 

And I just use the dataset in the function. However, here comes a note:

 

drugbank_disease_gene: no visible binding for global variable

    'drugbank'

  edgar_disease_gene: no visible binding for global variable 'edgar'

  malacards_disease_gene: no visible binding for global variable 'mala'

  Undefined global functions or variables:

drugbank edgar mala

 

It shows that I need to do something else. I am confused and I don? know what need to do next.

 

Thanks for your attention. 

| |
jared_wood
|
|
jared_wood at 163.com
|
???????????
	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Apr  7 09:11:23 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 07 Apr 2020 00:11:23 -0700
Subject: [R-pkg-devel] About dataset in my own package
In-Reply-To: <7cf879d3.2ce8.171535093ff.Coremail.jared_wood@163.com>
References: <7cf879d3.2ce8.171535093ff.Coremail.jared_wood@163.com>
Message-ID: <BD91642D-4EE8-4902-A915-546118D5EB8D@dcn.davis.ca.us>

Either use the data() function to retrieve it or use the

LazyData: true

line in your DESCRIPTION file.

On April 6, 2020 11:25:21 PM PDT, jared_wood <jared_wood at 163.com> wrote:
>Dear all?
>
>I have three datasets (drugbank.rda edgar.rda mala.rda) in my package
>and I put them in the document folder which called ?data?.
>
> 
>
>And I just use the dataset in the function. However, here comes a note:
>
> 
>
>drugbank_disease_gene: no visible binding for global variable
>
>    'drugbank'
>
>  edgar_disease_gene: no visible binding for global variable 'edgar'
>
>  malacards_disease_gene: no visible binding for global variable 'mala'
>
>  Undefined global functions or variables:
>
>drugbank edgar mala
>
> 
>
>It shows that I need to do something else. I am confused and I don?
>know what need to do next.
>
> 
>
>Thanks for your attention. 
>
>| |
>jared_wood
>|
>|
>jared_wood at 163.com
>|
>???????????
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From @tep@n@@|nde|@r @end|ng |rom or@c|e@com  Tue Apr  7 09:16:31 2020
From: @tep@n@@|nde|@r @end|ng |rom or@c|e@com (Stepan)
Date: Tue, 7 Apr 2020 09:16:31 +0200
Subject: [R-pkg-devel] RIOT 2020: canceled
In-Reply-To: <f079b5c4-6d72-c7eb-c347-a2e0ee494965@oracle.com>
References: <f079b5c4-6d72-c7eb-c347-a2e0ee494965@oracle.com>
Message-ID: <b108a8e9-5fb2-bfb6-bb25-c22de8a49754@oracle.com>

After carefully considering the current situation regarding COVID-19, we 
decided to cancel this year's RIOT workshop.

Best regards,
Stepan

On 25. 02. 20 17:47, Stepan wrote:
> I hope you don?t mind us using this mailing list for a small 
> advertisement, but we think it is relevant for this group:
> 
> We'd like to invite you to RIOT 2020 - the 5rd workshop on R 
> Implementation, Optimization and Tooling [1]. It will take place 
> co-located with, and during, useR! 2020 in St. Louis on July 8th. RIOT 
> is an excellent venue for deep technical discussions about R 
> implementations, tools, optimizations and R extensions, and will be very 
> interesting for anyone interested in what?s under the hood of R.
> 
> The RIOT workshop topics include experience reports and technical 
> details of novel R extensions. For example: ALTREP implementations, 
> approaches to parallelization of R, integration with other (parallel, 
> distributed, ...) computing engines, etc.
> 
> Regards,
> Stepan Sindelar, Lukas Stadler (Oracle Labs), Jan Vitek (Northeastern), 
> Alexander Bertram (BeDataDriven)
> 
> [1] http://riotworkshop.github.io/


From |enz @end|ng |rom |mb|@un|-|re|burg@de  Tue Apr  7 18:40:02 2020
From: |enz @end|ng |rom |mb|@un|-|re|burg@de (Stefan Lenz IMBI)
Date: Tue, 07 Apr 2020 18:40:02 +0200
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <510e7822-e79a-c760-0031-66d878273936@gmail.com>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
 <510e7822-e79a-c760-0031-66d878273936@gmail.com>
Message-ID: <20200407184002.EGroupware.fWu2KFXjoOWHPfhdb2Vo69K@_>

Thank you very much for your comment. 
Could you elaborate how you think that it could interfere with the help system?
I haven't yet connected the Julia help with the R help, as the R help system is quite complex and RStudio handles it again differently. So it's simply like the functions were declared on the command line. They have no help.
A simply way to print the help for a Julia function, e.g. the function "first", is to call
 juliaEval("@doc first")
This then simply prints the output on the command line.

 
----------------urspr?ngliche Nachricht-----------------
Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
An: r-package-devel at r-project.org, Duncan Murdoch [murdoch.duncan at gmail.com], Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de]
Datum: Mon, 06 Apr 2020 10:51:53 -0700
-------------------------------------------------
 
 
> One could take the position that the library and require functions were a mistake 
> to begin with and that all contributed packages should be accessed using ::... or 
> one could recognize that these functions are an expected feature of R at this 
> point and then it is not defensible to ban the proposed approach of importing 
> names as Stefan wants to. I don't think it is fair to require this higher level of 
> specificity just because it involves use of attach.
> 
> That said, another feature of R packages is the integrated help system... 
> importing Julia functions wholesale may lead to problems with consistency in 
> navigating the help files. IMO it may be justifiable to ban this particular 
> syntactic convenience to maintain some separation in the minds of users looking 
> for help on these new functions, since the syntactic and semantic structure of 
> functions from another language may not align well with normal R functions. But I 
> am not familiar with Julia or Stefan's package or the support it brings in this 
> area... I just disagree with banning a "library" lookalike function "just 
> because" it happens to involve attach.
> 
> On April 6, 2020 8:40:12 AM PDT, Duncan Murdoch <murdoch.duncan at gmail.com> 
> wrote:
>>On 06/04/2020 11:25 a.m., Stefan Lenz IMBI wrote:
>>> Yes, as I wrote earlier, I would like to imitate the behaviour of
>>loading an R package
>>> 
>>> juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
>>> myJuliaFunction()
>>> 
>>> like R:
>>> 
>>> library("MyRPackage") # exports myRFunction
>>> myRFunction()
>>> 
>>> I could return an environment, such that the call becomes
>>> 
>>> attach(juliaUsing("SomeJuliaPackage"))
>>> myJuliaFunction()
>>
>>I wouldn't use it that way. I'd write it as
>>
>> sjp <- juliaUsing("SomeJuliaPackage")
>> sjp$myJuliaFunction()
>>
>>This is similar to the advice to use pkg::foo() rather than
>>library(pkg) 
>>followed by plain foo() in the code.
>>
>>Duncan Murdoch
>>
>>> 
>>> But calling juliaUsing(), as it is now, takes care that if a package
>>is imported a second time,
>>> the first data base is removed via detach().
>>> This way, users do not have to worry about calling juliaUsing()
>>mutliple times in a script, same
>>> as R users don't have to worry about calling library() multiple
>>times.
>>> If you call the code with attach() multiple times and do not detach,
>>you get your screen cluttered with
>>> warnings "xxx is masked by xxx".
>>> So I would say it would decrease user-friendliness to return an
>>environment.
>>> I also want to make explicit, that the call to attach
>>> occurs only once in my code, after creating the environment:
>>> 
>>> envName <- paste0("JuliaConnectoR:", absoluteModulePath)
>>> if (envName %in% search()) {
>>> detach(envName, character.only = TRUE)
>>> }
>>> attach(funenv, name = envName)
>>> 
>>> This code is only called by juliaImport() and juliaUsing(), which
>>aren't called by any other function of
>>> the package
>>> and are supposed to be called directly by the user.
>>> 
>>> Stefan
>>> 
>>> ----------------urspr?ngliche Nachricht-----------------
>>> Von: Duncan Murdoch [murdoch.duncan at gmail.com]
>>> An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker
>>[bbolker at gmail.com]
>>> Kopie: List r-package-devel [r-package-devel at r-project.org]
>>> Datum: Mon, 6 Apr 2020 11:00:09 -0400
>>> -------------------------------------------------
>>> 
>>> 
>>>> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>>>>>
>>>>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>>>>> | Just reply to the CRAN maintainers and explain this situation.
>>It?s
>>>>> | slightly buried, but the e-mail you received does say:
>>>>> |
>>>>> | > If you are fairly certain the rejection is a false positive,
>>please reply-all to this
>>>>> | > message and explain.
>>>>>
>>>>> True, but this misses the "Letter of the law" versus the "Spirit of
>>the law".
>>>>>
>>>>> It might be worth mentioning that use of attach() is seen, to find
>>one poor
>>>>> analogy, pretty much like use of global variables these days. "Just
>>because
>>>>> you could does not mean you should".
>>>>>
>>>>> See e.g. one of the first google hits for 'r do not use attach'
>>here:
>>>>>
>>https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>>>
>>>> I don't have a strong opinion on this: the proposed use seems to be
>>no
>>>> worse than library() or require(). Those are fine for users to use,
>>but
>>>> are discouraged in a package. If the attach() never happens without
>>an
>>>> explicit request from the user (and that's what it sounds like), I'd
>>say
>>>> it's probably okay.
>>>>
>>>> However, there is an easy workaround: just return the environment
>>>> without attaching it. Then the user has the choice of attaching it,
>>or
>>>> using it as a prefix when they call the functions in it. So it's not
>>as
>>>> though this will destroy the utility of the package if Stefan isn't
>>>> allowed to call attach().
>>>>
>>>> Duncan Murdoch
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>> 
>>>
>>
>>______________________________________________
>>R-package-devel at r-project.org mailing list
>>https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


-- 

Stefan Lenz

Institut f?r Medizinische Biometrie und Statistik
Medizinische Fakult?t / Universit?tsklinikum Freiburg

Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg

Tel.: 0761/203-6670
E-Mail: lenz at imbi.uni-freiburg.de


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Apr  7 18:52:52 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 07 Apr 2020 09:52:52 -0700
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <20200407184002.EGroupware.fWu2KFXjoOWHPfhdb2Vo69K@_>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
 <510e7822-e79a-c760-0031-66d878273936@gmail.com>
 <20200407184002.EGroupware.fWu2KFXjoOWHPfhdb2Vo69K@_>
Message-ID: <B1F3A1B9-EBDA-4506-BBDA-487D8DBF494E@dcn.davis.ca.us>

I did not say "interfere"... I said "problems with consistency". I don't think your wholesale import of functions without corresponding help pages is consistent with the normal use of R, which will make reading R code written with this mechanism in place a painful source of trouble for help forums.

On the other hand, if the code is prefaced with an environment name then there will be no expectation that a help page should exist on the part of someone reading that code for the first time. (It will be no less obscure, but at least it won't be misleading.)

On April 7, 2020 9:40:02 AM PDT, Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de> wrote:
>Thank you very much for your comment. 
>Could you elaborate how you think that it could interfere with the help
>system?
>I haven't yet connected the Julia help with the R help, as the R help
>system is quite complex and RStudio handles it again differently. So
>it's simply like the functions were declared on the command line. They
>have no help.
>A simply way to print the help for a Julia function, e.g. the function
>"first", is to call
> juliaEval("@doc first")
>This then simply prints the output on the command line.
>
> 
>----------------urspr?ngliche Nachricht-----------------
>Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
>An: r-package-devel at r-project.org, Duncan Murdoch
>[murdoch.duncan at gmail.com], Stefan Lenz IMBI
>[lenz at imbi.uni-freiburg.de]
>Datum: Mon, 06 Apr 2020 10:51:53 -0700
>-------------------------------------------------
> 
> 
>> One could take the position that the library and require functions
>were a mistake 
>> to begin with and that all contributed packages should be accessed
>using ::... or 
>> one could recognize that these functions are an expected feature of R
>at this 
>> point and then it is not defensible to ban the proposed approach of
>importing 
>> names as Stefan wants to. I don't think it is fair to require this
>higher level of 
>> specificity just because it involves use of attach.
>> 
>> That said, another feature of R packages is the integrated help
>system... 
>> importing Julia functions wholesale may lead to problems with
>consistency in 
>> navigating the help files. IMO it may be justifiable to ban this
>particular 
>> syntactic convenience to maintain some separation in the minds of
>users looking 
>> for help on these new functions, since the syntactic and semantic
>structure of 
>> functions from another language may not align well with normal R
>functions. But I 
>> am not familiar with Julia or Stefan's package or the support it
>brings in this 
>> area... I just disagree with banning a "library" lookalike function
>"just 
>> because" it happens to involve attach.
>> 
>> On April 6, 2020 8:40:12 AM PDT, Duncan Murdoch
><murdoch.duncan at gmail.com> 
>> wrote:
>>>On 06/04/2020 11:25 a.m., Stefan Lenz IMBI wrote:
>>>> Yes, as I wrote earlier, I would like to imitate the behaviour of
>>>loading an R package
>>>> 
>>>> juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
>>>> myJuliaFunction()
>>>> 
>>>> like R:
>>>> 
>>>> library("MyRPackage") # exports myRFunction
>>>> myRFunction()
>>>> 
>>>> I could return an environment, such that the call becomes
>>>> 
>>>> attach(juliaUsing("SomeJuliaPackage"))
>>>> myJuliaFunction()
>>>
>>>I wouldn't use it that way. I'd write it as
>>>
>>> sjp <- juliaUsing("SomeJuliaPackage")
>>> sjp$myJuliaFunction()
>>>
>>>This is similar to the advice to use pkg::foo() rather than
>>>library(pkg) 
>>>followed by plain foo() in the code.
>>>
>>>Duncan Murdoch
>>>
>>>> 
>>>> But calling juliaUsing(), as it is now, takes care that if a
>package
>>>is imported a second time,
>>>> the first data base is removed via detach().
>>>> This way, users do not have to worry about calling juliaUsing()
>>>mutliple times in a script, same
>>>> as R users don't have to worry about calling library() multiple
>>>times.
>>>> If you call the code with attach() multiple times and do not
>detach,
>>>you get your screen cluttered with
>>>> warnings "xxx is masked by xxx".
>>>> So I would say it would decrease user-friendliness to return an
>>>environment.
>>>> I also want to make explicit, that the call to attach
>>>> occurs only once in my code, after creating the environment:
>>>> 
>>>> envName <- paste0("JuliaConnectoR:", absoluteModulePath)
>>>> if (envName %in% search()) {
>>>> detach(envName, character.only = TRUE)
>>>> }
>>>> attach(funenv, name = envName)
>>>> 
>>>> This code is only called by juliaImport() and juliaUsing(), which
>>>aren't called by any other function of
>>>> the package
>>>> and are supposed to be called directly by the user.
>>>> 
>>>> Stefan
>>>> 
>>>> ----------------urspr?ngliche Nachricht-----------------
>>>> Von: Duncan Murdoch [murdoch.duncan at gmail.com]
>>>> An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker
>>>[bbolker at gmail.com]
>>>> Kopie: List r-package-devel [r-package-devel at r-project.org]
>>>> Datum: Mon, 6 Apr 2020 11:00:09 -0400
>>>> -------------------------------------------------
>>>> 
>>>> 
>>>>> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>>>>>>
>>>>>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>>>>>> | Just reply to the CRAN maintainers and explain this situation.
>>>It?s
>>>>>> | slightly buried, but the e-mail you received does say:
>>>>>> |
>>>>>> | > If you are fairly certain the rejection is a false positive,
>>>please reply-all to this
>>>>>> | > message and explain.
>>>>>>
>>>>>> True, but this misses the "Letter of the law" versus the "Spirit
>of
>>>the law".
>>>>>>
>>>>>> It might be worth mentioning that use of attach() is seen, to
>find
>>>one poor
>>>>>> analogy, pretty much like use of global variables these days.
>"Just
>>>because
>>>>>> you could does not mean you should".
>>>>>>
>>>>>> See e.g. one of the first google hits for 'r do not use attach'
>>>here:
>>>>>>
>>>https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>>>>
>>>>> I don't have a strong opinion on this: the proposed use seems to
>be
>>>no
>>>>> worse than library() or require(). Those are fine for users to
>use,
>>>but
>>>>> are discouraged in a package. If the attach() never happens
>without
>>>an
>>>>> explicit request from the user (and that's what it sounds like),
>I'd
>>>say
>>>>> it's probably okay.
>>>>>
>>>>> However, there is an easy workaround: just return the environment
>>>>> without attaching it. Then the user has the choice of attaching
>it,
>>>or
>>>>> using it as a prefix when they call the functions in it. So it's
>not
>>>as
>>>>> though this will destroy the utility of the package if Stefan
>isn't
>>>>> allowed to call attach().
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>> 
>>>>
>>>
>>>______________________________________________
>>>R-package-devel at r-project.org mailing list
>>>https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 

-- 
Sent from my phone. Please excuse my brevity.


From @@rtorry @end|ng |rom gm@||@com  Tue Apr  7 23:20:20 2020
From: @@rtorry @end|ng |rom gm@||@com (Ryan Sartor)
Date: Tue, 7 Apr 2020 17:20:20 -0400
Subject: [R-pkg-devel] Windows specific install error
Message-ID: <CAD9kV-LGosh0NoV90pYv3UuRSAaVwMpmxJLqvV4wyMSXaF538w@mail.gmail.com>

Hello everyone,

My package seems to pass all the CRAN checks for Linux but fails to install
on Windows. This is the contents of 00install.out:

* installing *source* package 'DiPALM' ...
** using staged installation
** R
** data
** inst
** byte-compile and prepare package for lazy loading
Error: .onLoad failed in loadNamespace() for 'S4Vectors', details:
  call: validObject(.Object)
  error: invalid class "LLint" object: superclass "integer_OR_LLint"
not defined in the environment of the object's class
Execution halted
ERROR: lazy loading failed for package 'DiPALM'
* removing 'd:/RCompile/CRANincoming/R-devel/lib/DiPALM'


If I understand the error, it's saying that the CRAN server cannot
load the S4Vectors package because one of classes it depends on is not
defined. I'm guessing this is a namespace issue? I've taken a few
shots at adding directives to my NAMESPACE file but obviously I don't
know what I'm doing or maybe the error has nothing to do with my
package namespace.

Any insight would be greatly appreciated.

Thank you!

	[[alternative HTML version deleted]]


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Wed Apr  8 00:16:03 2020
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Tue, 7 Apr 2020 22:16:03 +0000
Subject: [R-pkg-devel] Windows specific install error
In-Reply-To: <CAD9kV-LGosh0NoV90pYv3UuRSAaVwMpmxJLqvV4wyMSXaF538w@mail.gmail.com>
References: <CAD9kV-LGosh0NoV90pYv3UuRSAaVwMpmxJLqvV4wyMSXaF538w@mail.gmail.com>
Message-ID: <BL0PR04MB6609C9BDFED98E6FD684D69EF9C30@BL0PR04MB6609.namprd04.prod.outlook.com>

This is the same as

  https://stat.ethz.ch/pipermail/r-package-devel/2020q1/005256.html

and due I believe to stale packages on the CRAN windows builder; the solution is I believe on the CRAN side.

Martin Morgan

?On 4/7/20, 6:14 PM, "R-package-devel on behalf of Ryan Sartor" <r-package-devel-bounces at r-project.org on behalf of sartorry at gmail.com> wrote:

    Hello everyone,
    
    My package seems to pass all the CRAN checks for Linux but fails to install
    on Windows. This is the contents of 00install.out:
    
    * installing *source* package 'DiPALM' ...
    ** using staged installation
    ** R
    ** data
    ** inst
    ** byte-compile and prepare package for lazy loading
    Error: .onLoad failed in loadNamespace() for 'S4Vectors', details:
      call: validObject(.Object)
      error: invalid class "LLint" object: superclass "integer_OR_LLint"
    not defined in the environment of the object's class
    Execution halted
    ERROR: lazy loading failed for package 'DiPALM'
    * removing 'd:/RCompile/CRANincoming/R-devel/lib/DiPALM'
    
    
    If I understand the error, it's saying that the CRAN server cannot
    load the S4Vectors package because one of classes it depends on is not
    defined. I'm guessing this is a namespace issue? I've taken a few
    shots at adding directives to my NAMESPACE file but obviously I don't
    know what I'm doing or maybe the error has nothing to do with my
    package namespace.
    
    Any insight would be greatly appreciated.
    
    Thank you!
    
    	[[alternative HTML version deleted]]
    
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel
    

From he|mut@@chuetz @end|ng |rom beb@c@@t  Wed Apr  8 13:43:28 2020
From: he|mut@@chuetz @end|ng |rom beb@c@@t (=?UTF-8?Q?Helmut_Sch=c3=bctz?=)
Date: Wed, 8 Apr 2020 13:43:28 +0200
Subject: [R-pkg-devel] Errors in r-devel (Linux) and r-patched (Solaris)
Message-ID: <387bb665-2e08-f2d7-fcb9-2f363581392b@bebac.at>

Dear all,

I was notified about errors:
https://cran.r-project.org/web/checks/check_results_replicateBE.html

Since I don't have access to those operating systems, I'm a little bit lost.
Here is what I get with 64bit R on Windows:
library(replicateBE)
x <- method.B(details = TRUE, print = FALSE,
               data = rds30, option = 1)[c(10, 19)]
y <- c(17.86418, 92.73371)
d <- as.numeric(signif(abs(x - y), 7))

With R 3.6.2
print(d)
[1] 4.431372e-06 1.182994e-07

With R 3.6.3
print(d)
[1] 1.078696e-05 1.182989e-07

x[10] are Satterthwaite's degrees of freedom obtained by package 
pbkrtest. In both R-versions I use its current version (0.4-8.6 of 
2020-02-20).

Any ideas / suggestions?
As a workaround I could reduce the tolerance of testthat's 
expect_quivalent() from to currently 5e-7 to a higher (_which one?_) 
value. But I still want to know what might be going on the CRAN's 
linux/solaris devel/patched installations since the other R-versions on 
all operating systems passed the tests.

Cheers,
Helmut

-- 
Ing. Helmut Sch?tz
BEBAC?? Consultancy Services for
Bioequivalence and Bioavailability Studies
Neubaugasse 36/11
1070 Vienna, Austria
T +43 1 2311746
E helmut.schuetz at bebac.at
W https://bebac.at/
F https://forum.bebac.at/


From @eb@meyer @end|ng |rom |@u@de  Wed Apr  8 14:15:22 2020
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Wed, 8 Apr 2020 14:15:22 +0200
Subject: [R-pkg-devel] Errors in r-devel (Linux) and r-patched (Solaris)
In-Reply-To: <387bb665-2e08-f2d7-fcb9-2f363581392b@bebac.at>
References: <387bb665-2e08-f2d7-fcb9-2f363581392b@bebac.at>
Message-ID: <d64058a5-0b68-4916-44b6-33927a6f9577@fau.de>

Do both of your R installations use the same version of lme4 ?

A new lme4 version has been published on CRAN yesterday and some changes
regarding default numerical tolerances in optimizations could explain
the difference in your results. See the NEWS here:
https://cran.r-project.org/web/packages/lme4/news.html

Best regards,

	Sebastian Meyer


Am 08.04.20 um 13:43 schrieb Helmut Sch?tz:
> Dear all,
> 
> I was notified about errors:
> https://cran.r-project.org/web/checks/check_results_replicateBE.html
> 
> Since I don't have access to those operating systems, I'm a little bit
> lost.
> Here is what I get with 64bit R on Windows:
> library(replicateBE)
> x <- method.B(details = TRUE, print = FALSE,
> ????????????? data = rds30, option = 1)[c(10, 19)]
> y <- c(17.86418, 92.73371)
> d <- as.numeric(signif(abs(x - y), 7))
> 
> With R 3.6.2
> print(d)
> [1] 4.431372e-06 1.182994e-07
> 
> With R 3.6.3
> print(d)
> [1] 1.078696e-05 1.182989e-07
> 
> x[10] are Satterthwaite's degrees of freedom obtained by package
> pbkrtest. In both R-versions I use its current version (0.4-8.6 of
> 2020-02-20).
> 
> Any ideas / suggestions?
> As a workaround I could reduce the tolerance of testthat's
> expect_quivalent() from to currently 5e-7 to a higher (_which one?_)
> value. But I still want to know what might be going on the CRAN's
> linux/solaris devel/patched installations since the other R-versions on
> all operating systems passed the tests.
> 
> Cheers,
> Helmut
>


From he|mut@@chuetz @end|ng |rom beb@c@@t  Wed Apr  8 14:53:29 2020
From: he|mut@@chuetz @end|ng |rom beb@c@@t (=?UTF-8?Q?Helmut_Sch=c3=bctz?=)
Date: Wed, 8 Apr 2020 14:53:29 +0200
Subject: [R-pkg-devel] Errors in r-devel (Linux) and r-patched (Solaris)
In-Reply-To: <d64058a5-0b68-4916-44b6-33927a6f9577@fau.de>
References: <387bb665-2e08-f2d7-fcb9-2f363581392b@bebac.at>
 <d64058a5-0b68-4916-44b6-33927a6f9577@fau.de>
Message-ID: <85762eb5-abaa-d55b-30d5-c6c8c7b3d910@bebac.at>

Dear Sebastian,

Sebastian Meyer wrote on 2020-04-08 14:15:
> Do both of your R installations use the same version of lme4 ?

THX, good point! On R3.6.2 I have lme4 1.1-21 (2019-03-05) and on R3.6.3 
indeed yesterday's lme4 1.1-23.

> A new lme4 version has been published on CRAN yesterday and some changes
> regarding default numerical tolerances in optimizations could explain
> the difference in your results. See the NEWS here:
> https://cran.r-project.org/web/packages/lme4/news.html

I see. Since the other 93 (!) tests passed, I will submit a fix only for 
_this_ data set. A little bit nasty since we recently published a paper 
about software validation: https://dx.doi.org/10.1208/s12248-020-0427-6
The supplementary material contains code for IQ (installation 
qualification). If a user on r-devel (Linux) or r-patched (Solaris) runs 
it ? with the current lme4 - he/she will be slapped in the face and the 
suppl. material will tell him/her:
"If a test fails [?] the package did not pass IQ in the user?s 
computational environment (hardware, operating system, R-release) and 
_must not_ be used."
Splendid.

Cheers,
Helmut

-- 
Ing. Helmut Sch?tz
BEBAC?? Consultancy Services for
Bioequivalence and Bioavailability Studies
Neubaugasse 36/11
1070 Vienna, Austria
T +43 1 2311746
E helmut.schuetz at bebac.at
W https://bebac.at/
F https://forum.bebac.at/


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Wed Apr  8 16:34:45 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Wed, 8 Apr 2020 16:34:45 +0200
Subject: [R-pkg-devel] =?utf-8?q?Error_creating_union_class=3A_object_?=
 =?utf-8?b?4oCYLl9fQ19fY29tcE1hdHJpeOKAmSBub3QgZm91bmQ=?=
In-Reply-To: <na_hvS9mQoE2Ex7h3m1UlL7AzQFz0Fuuets5kNRC7b7NBrkkYObfnkUAyj8T8oz48jBuBXZcEf0CJn2UL7f5TZ-N9jiT4qUd0eiE50R9xkU=-4805@protonmail.com>
References: <na_hvS9mQoE2Ex7h3m1UlL7AzQFz0Fuuets5kNRC7b7NBrkkYObfnkUAyj8T8oz48jBuBXZcEf0CJn2UL7f5TZ-N9jiT4qUd0eiE50R9xkU=-4805@protonmail.com>
Message-ID: <24205.57605.672636.944802@stat.math.ethz.ch>

>>>>> renozao  
>>>>>     on Mon, 30 Mar 2020 21:20:43 +0000 writes:

    > Hi,
    > when R CMD check is run under R-devel (2020-03-29 r78108) I get the following error at installation:

    > Error in get(cname, envir = cwhere, inherits = FALSE) :
    > object ?.__C__compMatrix? not found
    > Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
    > unable to create union class:  could not set members "Matrix"

    > This does not happen on R 3.6.3.

    > I tried with Matrix listed in Depends but I still get the same error.

    > Is this linked to some changes in union classes or the Matrix package?

    > Thank you.

    > Bests,
    > Renaud

Hi Renaud,
One reason you got no response here, is because we don't even
know about which package you are talking.

So there's nothing, anybody can reproduce from your posting.

There have been changes in R's dealing with class unions etc,
notably even *relating* to an earlier bug report on class unions
exactly for such a case which was *triggered* when people built
on such Matrix classes.

But we would really want to be able to reproduce what you are seeing..

Best regards,
Martin Maechler

ETH Zurich, R Core Team *and* maintainer("Matrix")


From wdun|@p @end|ng |rom t|bco@com  Wed Apr  8 17:19:42 2020
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Wed, 8 Apr 2020 08:19:42 -0700
Subject: [R-pkg-devel] =?utf-8?q?Error_creating_union_class=3A_object_?=
	=?utf-8?b?4oCYLl9fQ19fY29tcE1hdHJpeOKAmSBub3QgZm91bmQ=?=
In-Reply-To: <CAF8bMca+KFHQfb87qbZywWchXy9GJ_7qr5iD5GJ3PL-xWJO_fA@mail.gmail.com>
References: <na_hvS9mQoE2Ex7h3m1UlL7AzQFz0Fuuets5kNRC7b7NBrkkYObfnkUAyj8T8oz48jBuBXZcEf0CJn2UL7f5TZ-N9jiT4qUd0eiE50R9xkU=-4805@protonmail.com>
 <24205.57605.672636.944802@stat.math.ethz.ch>
 <CAF8bMca+KFHQfb87qbZywWchXy9GJ_7qr5iD5GJ3PL-xWJO_fA@mail.gmail.com>
Message-ID: <CAF8bMcb-KbfR==w1g3ixjEpGNR7=zn3SEBtwn3i4MimYzzt-dw@mail.gmail.com>

Use trace() to get a bit more detail - .__C_compMatrix is looked for in the
wrong environment with inherits=FALSE.

> setClassUnion("mMatrix", c("Matrix", "matrix"))
Tracing get(name, envir = env) on entry
    x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get(name, envir = env) on entry
    x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get(name, envir = env) on entry
    x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get("#HAS_DUPLICATE_CLASS_NAMES", envir = .classTable) on entry
    x="#HAS_DUPLICATE_CLASS_NAMES", envir="<environment: 0x2787710>",
topenv="<environment: base>", inherits=TRUE
Tracing get(name, envir = env) on entry
    x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get(name, envir = env) on entry
    x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get(name, envir = env) on entry
    x=".MTable", envir="<environment: 0x21dcf10>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get(".SigLength", envir = env) on entry
    x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get(".SigLength", envir = env) on entry
    x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get(name, envir = env) on entry
    x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get(".SigLength", envir = env) on entry
    x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get(".SigLength", envir = env) on entry
    x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment:
namespace:methods>", inherits=TRUE
Tracing get(cname, envir = cwhere, inherits = FALSE) on entry
    x=".__C__compMatrix", envir="<environment: R_GlobalEnv>",
topenv="<environment: R_GlobalEnv>", inherits=FALSE
Error in get(cname, envir = cwhere, inherits = FALSE) :
  object '.__C__compMatrix' not found
...

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Wed, Apr 8, 2020 at 7:52 AM William Dunlap <wdunlap at tibco.com> wrote:

> % R-devel --vanilla --quiet
> > library(Matrix)
> > setClassUnion("mMatrix", c("Matrix", "matrix"))
> Error in get(cname, envir = cwhere, inherits = FALSE) :
>   object '.__C__compMatrix' not found
> Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
>   unable to create union class:  could not set members "Matrix"
> > sessionInfo()
> R Under development (unstable) (2020-04-07 r78175)
> Platform: x86_64-pc-linux-gnu (64-bit)
> Running under: Ubuntu 16.04.6 LTS
>
> Matrix products: default
> BLAS/LAPACK: /usr/lib/libopenblasp-r0.2.18.so
>
> locale:
>  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>  [9] LC_ADDRESS=C               LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] Matrix_1.2-18
>
> loaded via a namespace (and not attached):
> [1] compiler_4.1.0  grid_4.1.0      lattice_0.20-41
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
>
> On Wed, Apr 8, 2020 at 7:35 AM Martin Maechler <maechler at stat.math.ethz.ch>
> wrote:
>
>> >>>>> renozao
>> >>>>>     on Mon, 30 Mar 2020 21:20:43 +0000 writes:
>>
>>     > Hi,
>>     > when R CMD check is run under R-devel (2020-03-29 r78108) I get the
>> following error at installation:
>>
>>     > Error in get(cname, envir = cwhere, inherits = FALSE) :
>>     > object ?.__C__compMatrix? not found
>>     > Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
>>     > unable to create union class:  could not set members "Matrix"
>>
>>     > This does not happen on R 3.6.3.
>>
>>     > I tried with Matrix listed in Depends but I still get the same
>> error.
>>
>>     > Is this linked to some changes in union classes or the Matrix
>> package?
>>
>>     > Thank you.
>>
>>     > Bests,
>>     > Renaud
>>
>> Hi Renaud,
>> One reason you got no response here, is because we don't even
>> know about which package you are talking.
>>
>> So there's nothing, anybody can reproduce from your posting.
>>
>> There have been changes in R's dealing with class unions etc,
>> notably even *relating* to an earlier bug report on class unions
>> exactly for such a case which was *triggered* when people built
>> on such Matrix classes.
>>
>> But we would really want to be able to reproduce what you are seeing..
>>
>> Best regards,
>> Martin Maechler
>>
>> ETH Zurich, R Core Team *and* maintainer("Matrix")
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

	[[alternative HTML version deleted]]


From wdun|@p @end|ng |rom t|bco@com  Wed Apr  8 16:52:03 2020
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Wed, 8 Apr 2020 07:52:03 -0700
Subject: [R-pkg-devel] =?utf-8?q?Error_creating_union_class=3A_object_?=
	=?utf-8?b?4oCYLl9fQ19fY29tcE1hdHJpeOKAmSBub3QgZm91bmQ=?=
In-Reply-To: <24205.57605.672636.944802@stat.math.ethz.ch>
References: <na_hvS9mQoE2Ex7h3m1UlL7AzQFz0Fuuets5kNRC7b7NBrkkYObfnkUAyj8T8oz48jBuBXZcEf0CJn2UL7f5TZ-N9jiT4qUd0eiE50R9xkU=-4805@protonmail.com>
 <24205.57605.672636.944802@stat.math.ethz.ch>
Message-ID: <CAF8bMca+KFHQfb87qbZywWchXy9GJ_7qr5iD5GJ3PL-xWJO_fA@mail.gmail.com>

% R-devel --vanilla --quiet
> library(Matrix)
> setClassUnion("mMatrix", c("Matrix", "matrix"))
Error in get(cname, envir = cwhere, inherits = FALSE) :
  object '.__C__compMatrix' not found
Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
  unable to create union class:  could not set members "Matrix"
> sessionInfo()
R Under development (unstable) (2020-04-07 r78175)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 16.04.6 LTS

Matrix products: default
BLAS/LAPACK: /usr/lib/libopenblasp-r0.2.18.so

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] Matrix_1.2-18

loaded via a namespace (and not attached):
[1] compiler_4.1.0  grid_4.1.0      lattice_0.20-41

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Wed, Apr 8, 2020 at 7:35 AM Martin Maechler <maechler at stat.math.ethz.ch>
wrote:

> >>>>> renozao
> >>>>>     on Mon, 30 Mar 2020 21:20:43 +0000 writes:
>
>     > Hi,
>     > when R CMD check is run under R-devel (2020-03-29 r78108) I get the
> following error at installation:
>
>     > Error in get(cname, envir = cwhere, inherits = FALSE) :
>     > object ?.__C__compMatrix? not found
>     > Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
>     > unable to create union class:  could not set members "Matrix"
>
>     > This does not happen on R 3.6.3.
>
>     > I tried with Matrix listed in Depends but I still get the same error.
>
>     > Is this linked to some changes in union classes or the Matrix
> package?
>
>     > Thank you.
>
>     > Bests,
>     > Renaud
>
> Hi Renaud,
> One reason you got no response here, is because we don't even
> know about which package you are talking.
>
> So there's nothing, anybody can reproduce from your posting.
>
> There have been changes in R's dealing with class unions etc,
> notably even *relating* to an earlier bug report on class unions
> exactly for such a case which was *triggered* when people built
> on such Matrix classes.
>
> But we would really want to be able to reproduce what you are seeing..
>
> Best regards,
> Martin Maechler
>
> ETH Zurich, R Core Team *and* maintainer("Matrix")
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From renoz@o @end|ng |rom protonm@||@com  Wed Apr  8 18:19:59 2020
From: renoz@o @end|ng |rom protonm@||@com (renozao)
Date: Wed, 08 Apr 2020 16:19:59 +0000
Subject: [R-pkg-devel] =?utf-8?q?Error_creating_union_class=3A_object_?=
 =?utf-8?b?4oCYLl9fQ19fY29tcE1hdHJpeOKAmSBub3QgZm91bmQ=?=
In-Reply-To: <CAF8bMcb-KbfR==w1g3ixjEpGNR7=zn3SEBtwn3i4MimYzzt-dw@mail.gmail.com>
References: <na_hvS9mQoE2Ex7h3m1UlL7AzQFz0Fuuets5kNRC7b7NBrkkYObfnkUAyj8T8oz48jBuBXZcEf0CJn2UL7f5TZ-N9jiT4qUd0eiE50R9xkU=-4805@protonmail.com>
 <24205.57605.672636.944802@stat.math.ethz.ch>
 <CAF8bMca+KFHQfb87qbZywWchXy9GJ_7qr5iD5GJ3PL-xWJO_fA@mail.gmail.com>
 <CAF8bMcb-KbfR==w1g3ixjEpGNR7=zn3SEBtwn3i4MimYzzt-dw@mail.gmail.com>
Message-ID: <cTfz9LdQTDeljdpr97HnBeKOSPRLo90TKjTnzHfV4zfOx0UrOPO5F0KcTex4T85VVqLzSXGp0MyTFZHNjCSoiTYj5nPFijuKiPf2E6siAyg=@protonmail.com>

Thank you William for the reproducible example.

Currently I using the following (same as in William's example):
setClassUnion("mMatrix", c("Matrix", "matrix"))

Martin, are the changes made in the union class handling affecting the way we should declare them?
Thank you.

Bests,
Renaud

??????? Original Message ???????
On Wednesday, April 8, 2020 11:19 AM, William Dunlap <wdunlap at tibco.com> wrote:

> Use trace() to get a bit more detail - .__C_compMatrix is looked for in the wrong environment with inherits=FALSE.
>
>> setClassUnion("mMatrix", c("Matrix", "matrix"))
> Tracing get(name, envir = env) on entry
>     x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get(name, envir = env) on entry
>     x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get(name, envir = env) on entry
>     x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get("#HAS_DUPLICATE_CLASS_NAMES", envir = .classTable) on entry
>     x="#HAS_DUPLICATE_CLASS_NAMES", envir="<environment: 0x2787710>", topenv="<environment: base>", inherits=TRUE
> Tracing get(name, envir = env) on entry
>     x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get(name, envir = env) on entry
>     x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get(name, envir = env) on entry
>     x=".MTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get(".SigLength", envir = env) on entry
>     x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get(".SigLength", envir = env) on entry
>     x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get(name, envir = env) on entry
>     x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get(".SigLength", envir = env) on entry
>     x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get(".SigLength", envir = env) on entry
>     x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
> Tracing get(cname, envir = cwhere, inherits = FALSE) on entry
>     x=".__C__compMatrix", envir="<environment: R_GlobalEnv>", topenv="<environment: R_GlobalEnv>", inherits=FALSE
> Error in get(cname, envir = cwhere, inherits = FALSE) :
>   object '.__C__compMatrix' not found
> ...
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
> On Wed, Apr 8, 2020 at 7:52 AM William Dunlap <wdunlap at tibco.com> wrote:
>
>> % R-devel --vanilla --quiet
>>> library(Matrix)
>>> setClassUnion("mMatrix", c("Matrix", "matrix"))
>> Error in get(cname, envir = cwhere, inherits = FALSE) :
>>   object '.__C__compMatrix' not found
>> Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
>>   unable to create union class:  could not set members "Matrix"
>>> sessionInfo()
>> R Under development (unstable) (2020-04-07 r78175)
>> Platform: x86_64-pc-linux-gnu (64-bit)
>> Running under: Ubuntu 16.04.6 LTS
>>
>> Matrix products: default
>> BLAS/LAPACK: /usr/lib/libopenblasp-r0.2.18.so
>>
>> locale:
>>  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>>  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>>  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>>  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>>  [9] LC_ADDRESS=C               LC_TELEPHONE=C
>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>> other attached packages:
>> [1] Matrix_1.2-18
>>
>> loaded via a namespace (and not attached):
>> [1] compiler_4.1.0  grid_4.1.0      lattice_0.20-41
>>
>> Bill Dunlap
>> TIBCO Software
>> wdunlap tibco.com
>>
>> On Wed, Apr 8, 2020 at 7:35 AM Martin Maechler <maechler at stat.math.ethz.ch> wrote:
>>
>>>>>>>> renozao
>>>>>>>>     on Mon, 30 Mar 2020 21:20:43 +0000 writes:
>>>
>>>     > Hi,
>>>     > when R CMD check is run under R-devel (2020-03-29 r78108) I get the following error at installation:
>>>
>>>     > Error in get(cname, envir = cwhere, inherits = FALSE) :
>>>     > object ?.__C__compMatrix? not found
>>>     > Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
>>>     > unable to create union class:  could not set members "Matrix"
>>>
>>>     > This does not happen on R 3.6.3.
>>>
>>>     > I tried with Matrix listed in Depends but I still get the same error.
>>>
>>>     > Is this linked to some changes in union classes or the Matrix package?
>>>
>>>     > Thank you.
>>>
>>>     > Bests,
>>>     > Renaud
>>>
>>> Hi Renaud,
>>> One reason you got no response here, is because we don't even
>>> know about which package you are talking.
>>>
>>> So there's nothing, anybody can reproduce from your posting.
>>>
>>> There have been changes in R's dealing with class unions etc,
>>> notably even *relating* to an earlier bug report on class unions
>>> exactly for such a case which was *triggered* when people built
>>> on such Matrix classes.
>>>
>>> But we would really want to be able to reproduce what you are seeing..
>>>
>>> Best regards,
>>> Martin Maechler
>>>
>>> ETH Zurich, R Core Team *and* maintainer("Matrix")
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
	[[alternative HTML version deleted]]


From |eutn@nt @end|ng |rom |h-muen@ter@de  Thu Apr  9 09:51:56 2020
From: |eutn@nt @end|ng |rom |h-muen@ter@de (Dominik Leutnant)
Date: Thu, 9 Apr 2020 07:51:56 +0000
Subject: [R-pkg-devel] Add SystemRequirements of imported package in
 description file?
Message-ID: <936BA237-CCC6-4006-B5FC-FEF0AEA60FD4@contoso.com>

Hi all,

should ?SystemRequirements? of an imported package be listed in the description file of a package?

General scenario:
- Package X imports Package Y.
- Package Y lists ?libzzz? as SystemRequirements.

Should Package X list the SystemRequirements ?libzzz? as well? (question occurred @ https://github.com/dleutnant/influxdbr/issues/47)

Thank you and happy easter!
Dominik



Dr. Dominik Leutnant
Department of Civil Engineering
Institute for Infrastucture?Water?Resources?Environment (IWARU)
WG Urban Hydrology and Water Management

Muenster University of Applied Sciences
Corrensstr. 25
FRG-48149 M?nster
Germany

Tel.:  +49 (0) 251/83-65274
Mail:  leutnant at fh-muenster.de<mailto:leutnant at fh-muenster.de>
Web: https://www.fh-muenster.de/


	[[alternative HTML version deleted]]


From th|erry@onke||nx @end|ng |rom |nbo@be  Thu Apr  9 10:06:10 2020
From: th|erry@onke||nx @end|ng |rom |nbo@be (Thierry Onkelinx)
Date: Thu, 9 Apr 2020 10:06:10 +0200
Subject: [R-pkg-devel] Add SystemRequirements of imported package in
 description file?
In-Reply-To: <936BA237-CCC6-4006-B5FC-FEF0AEA60FD4@contoso.com>
References: <936BA237-CCC6-4006-B5FC-FEF0AEA60FD4@contoso.com>
Message-ID: <CAJuCY5yZgVc9KLyyVL+SQpUsdsbOxMZY-Ono1EVzE4h96PHSGQ@mail.gmail.com>

Dear Dominik,

IMHO you only need to list "first order" dependencies: things that your
package directly uses. Listing higher order dependencies would be redundant
as they are listed in the packages that have them as first order dependency.

Best regards,

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>


Op do 9 apr. 2020 om 09:52 schreef Dominik Leutnant <leutnant at fh-muenster.de
>:

> Hi all,
>
> should ?SystemRequirements? of an imported package be listed in the
> description file of a package?
>
> General scenario:
> - Package X imports Package Y.
> - Package Y lists ?libzzz? as SystemRequirements.
>
> Should Package X list the SystemRequirements ?libzzz? as well? (question
> occurred @ https://github.com/dleutnant/influxdbr/issues/47)
>
> Thank you and happy easter!
> Dominik
>
>
>
> Dr. Dominik Leutnant
> Department of Civil Engineering
> Institute for Infrastucture?Water?Resources?Environment (IWARU)
> WG Urban Hydrology and Water Management
>
> Muenster University of Applied Sciences
> Corrensstr. 25
> FRG-48149 M?nster
> Germany
>
> Tel.:  +49 (0) 251/83-65274
> Mail:  leutnant at fh-muenster.de<mailto:leutnant at fh-muenster.de>
> Web: https://www.fh-muenster.de/
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From |enz @end|ng |rom |mb|@un|-|re|burg@de  Thu Apr  9 10:41:27 2020
From: |enz @end|ng |rom |mb|@un|-|re|burg@de (Stefan Lenz IMBI)
Date: Thu, 09 Apr 2020 10:41:27 +0200
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <20200407184002.EGroupware.fWu2KFXjoOWHPfhdb2Vo69K@_>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
 <510e7822-e79a-c760-0031-66d878273936@gmail.com>
 <20200407184002.EGroupware.fWu2KFXjoOWHPfhdb2Vo69K@_>
Message-ID: <20200409104127.EGroupware.Frn8sICScuDTqpktcG74Az3@_>

It is important for me to get my package into CRAN.
I haven't gotten any answer from the CRAN maintainers. I already tried to submit a version of the package before some months and haven't gotten any reply then.
The replies you gave me (thanks to all engaged in the discussion) were mixed.
I still think that the library-like import is a good feature, but if it is not possible to get this package on CRAN with it, I will change it with returning an environment like reticulate.
My question now is:
So what would be the process how to proceed?
Is there anybody who can make a decision in such cases?
Or do I make this decision myself after I lost hope that it will be accepted the way it is now?

Stefan

 
----------------urspr?ngliche Nachricht-----------------
Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de], r-package-devel at r-project.org, Duncan Murdoch [murdoch.duncan at gmail.com]
Datum: Tue, 07 Apr 2020 09:52:52 -0700
-------------------------------------------------
 
 
> I did not say "interfere"... I said "problems with consistency". I don't think 
> your wholesale import of functions without corresponding help pages is 
> consistent with the normal use of R, which will make reading R code written with 
> this mechanism in place a painful source of trouble for help forums.
> 
> On the other hand, if the code is prefaced with an environment name then there will 
> be no expectation that a help page should exist on the part of someone reading that 
> code for the first time. (It will be no less obscure, but at least it won't be 
> misleading.)
> 
> On April 7, 2020 9:40:02 AM PDT, Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de> 
> wrote:
>>Thank you very much for your comment. 
>>Could you elaborate how you think that it could interfere with the help
>>system?
>>I haven't yet connected the Julia help with the R help, as the R help
>>system is quite complex and RStudio handles it again differently. So
>>it's simply like the functions were declared on the command line. They
>>have no help.
>>A simply way to print the help for a Julia function, e.g. the function
>>"first", is to call
>> juliaEval("@doc first")
>>This then simply prints the output on the command line.
>>
>> 
>>----------------urspr?ngliche Nachricht-----------------
>>Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
>>An: r-package-devel at r-project.org, Duncan Murdoch
>>[murdoch.duncan at gmail.com], Stefan Lenz IMBI
>>[lenz at imbi.uni-freiburg.de]
>>Datum: Mon, 06 Apr 2020 10:51:53 -0700
>>-------------------------------------------------
>> 
>> 
>>> One could take the position that the library and require functions
>>were a mistake 
>>> to begin with and that all contributed packages should be accessed
>>using ::... or 
>>> one could recognize that these functions are an expected feature of R
>>at this 
>>> point and then it is not defensible to ban the proposed approach of
>>importing 
>>> names as Stefan wants to. I don't think it is fair to require this
>>higher level of 
>>> specificity just because it involves use of attach.
>>> 
>>> That said, another feature of R packages is the integrated help
>>system... 
>>> importing Julia functions wholesale may lead to problems with
>>consistency in 
>>> navigating the help files. IMO it may be justifiable to ban this
>>particular 
>>> syntactic convenience to maintain some separation in the minds of
>>users looking 
>>> for help on these new functions, since the syntactic and semantic
>>structure of 
>>> functions from another language may not align well with normal R
>>functions. But I 
>>> am not familiar with Julia or Stefan's package or the support it
>>brings in this 
>>> area... I just disagree with banning a "library" lookalike function
>>"just 
>>> because" it happens to involve attach.
>>> 
>>> On April 6, 2020 8:40:12 AM PDT, Duncan Murdoch
>><murdoch.duncan at gmail.com> 
>>> wrote:
>>>>On 06/04/2020 11:25 a.m., Stefan Lenz IMBI wrote:
>>>>> Yes, as I wrote earlier, I would like to imitate the behaviour of
>>>>loading an R package
>>>>> 
>>>>> juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
>>>>> myJuliaFunction()
>>>>> 
>>>>> like R:
>>>>> 
>>>>> library("MyRPackage") # exports myRFunction
>>>>> myRFunction()
>>>>> 
>>>>> I could return an environment, such that the call becomes
>>>>> 
>>>>> attach(juliaUsing("SomeJuliaPackage"))
>>>>> myJuliaFunction()
>>>>
>>>>I wouldn't use it that way. I'd write it as
>>>>
>>>> sjp <- juliaUsing("SomeJuliaPackage")
>>>> sjp$myJuliaFunction()
>>>>
>>>>This is similar to the advice to use pkg::foo() rather than
>>>>library(pkg) 
>>>>followed by plain foo() in the code.
>>>>
>>>>Duncan Murdoch
>>>>
>>>>> 
>>>>> But calling juliaUsing(), as it is now, takes care that if a
>>package
>>>>is imported a second time,
>>>>> the first data base is removed via detach().
>>>>> This way, users do not have to worry about calling juliaUsing()
>>>>mutliple times in a script, same
>>>>> as R users don't have to worry about calling library() multiple
>>>>times.
>>>>> If you call the code with attach() multiple times and do not
>>detach,
>>>>you get your screen cluttered with
>>>>> warnings "xxx is masked by xxx".
>>>>> So I would say it would decrease user-friendliness to return an
>>>>environment.
>>>>> I also want to make explicit, that the call to attach
>>>>> occurs only once in my code, after creating the environment:
>>>>> 
>>>>> envName <- paste0("JuliaConnectoR:", absoluteModulePath)
>>>>> if (envName %in% search()) {
>>>>> detach(envName, character.only = TRUE)
>>>>> }
>>>>> attach(funenv, name = envName)
>>>>> 
>>>>> This code is only called by juliaImport() and juliaUsing(), which
>>>>aren't called by any other function of
>>>>> the package
>>>>> and are supposed to be called directly by the user.
>>>>> 
>>>>> Stefan
>>>>> 
>>>>> ----------------urspr?ngliche Nachricht-----------------
>>>>> Von: Duncan Murdoch [murdoch.duncan at gmail.com]
>>>>> An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker
>>>>[bbolker at gmail.com]
>>>>> Kopie: List r-package-devel [r-package-devel at r-project.org]
>>>>> Datum: Mon, 6 Apr 2020 11:00:09 -0400
>>>>> -------------------------------------------------
>>>>> 
>>>>> 
>>>>>> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>>>>>>>
>>>>>>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>>>>>>> | Just reply to the CRAN maintainers and explain this situation.
>>>>It?s
>>>>>>> | slightly buried, but the e-mail you received does say:
>>>>>>> |
>>>>>>> | > If you are fairly certain the rejection is a false positive,
>>>>please reply-all to this
>>>>>>> | > message and explain.
>>>>>>>
>>>>>>> True, but this misses the "Letter of the law" versus the "Spirit
>>of
>>>>the law".
>>>>>>>
>>>>>>> It might be worth mentioning that use of attach() is seen, to
>>find
>>>>one poor
>>>>>>> analogy, pretty much like use of global variables these days.
>>"Just
>>>>because
>>>>>>> you could does not mean you should".
>>>>>>>
>>>>>>> See e.g. one of the first google hits for 'r do not use attach'
>>>>here:
>>>>>>>
>>>>https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>>>>>
>>>>>> I don't have a strong opinion on this: the proposed use seems to
>>be
>>>>no
>>>>>> worse than library() or require(). Those are fine for users to
>>use,
>>>>but
>>>>>> are discouraged in a package. If the attach() never happens
>>without
>>>>an
>>>>>> explicit request from the user (and that's what it sounds like),
>>I'd
>>>>say
>>>>>> it's probably okay.
>>>>>>
>>>>>> However, there is an easy workaround: just return the environment
>>>>>> without attaching it. Then the user has the choice of attaching
>>it,
>>>>or
>>>>>> using it as a prefix when they call the functions in it. So it's
>>not
>>>>as
>>>>>> though this will destroy the utility of the package if Stefan
>>isn't
>>>>>> allowed to call attach().
>>>>>>
>>>>>> Duncan Murdoch
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>> 
>>>>>
>>>>
>>>>______________________________________________
>>>>R-package-devel at r-project.org mailing list
>>>>https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> 
> 


-- 

Stefan Lenz

Institut f?r Medizinische Biometrie und Statistik
Medizinische Fakult?t / Universit?tsklinikum Freiburg

Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg

Tel.: 0761/203-6670
E-Mail: lenz at imbi.uni-freiburg.de


From Jor|@@Mey@ @end|ng |rom UGent@be  Thu Apr  9 14:59:23 2020
From: Jor|@@Mey@ @end|ng |rom UGent@be (Joris Meys)
Date: Thu, 9 Apr 2020 12:59:23 +0000
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <20200409104127.EGroupware.Frn8sICScuDTqpktcG74Az3@_>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
 <510e7822-e79a-c760-0031-66d878273936@gmail.com>
 <20200407184002.EGroupware.fWu2KFXjoOWHPfhdb2Vo69K@_>,
 <20200409104127.EGroupware.Frn8sICScuDTqpktcG74Az3@_>
Message-ID: <1586437163584.5571@UGent.be>

Hi Stefan,

first of all, thank you for taking the time and effort to link Julia and R. That said, I would strongly encourage you to go for a reticulate-like approach. There's a good reason for that. Once you start mixing languages, you really want to have some indication what code is ran in what language. Especially since I can imagine at one point there'll be a Julia function masking an R function of the same name, and that is going to cause a world of hurt and confusion. 

If you don't like environments, you can try to use namespace functionality. There's the "namespace" package that allows you to create one, and some internal namespace functions are visible (eg namespaceExport() from base). That's going to be the closest to mimicking R packages, but it's beyond my knowledge to know how feasible this approach actually is. I hope someone else chimes in, especially if this is dangerous for other reasons I overlooked.

Kind regards
Joris

Joris Meys
Statistician
T +32 9 264 61 79

Department Data Analysis and Mathematical Modelling

Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent, Belgium
T administration office +32 9 264 59 32

www.ugent.be

e-maildisclaimer


________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
Sent: Thursday, April 9, 2020 10:41 AM
To: Jeff Newmiller; r-package-devel at r-project.org; Duncan Murdoch
Subject: Re: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission JuliaConnectoR 0.5.0

It is important for me to get my package into CRAN.
I haven't gotten any answer from the CRAN maintainers. I already tried to submit a version of the package before some months and haven't gotten any reply then.
The replies you gave me (thanks to all engaged in the discussion) were mixed.
I still think that the library-like import is a good feature, but if it is not possible to get this package on CRAN with it, I will change it with returning an environment like reticulate.
My question now is:
So what would be the process how to proceed?
Is there anybody who can make a decision in such cases?
Or do I make this decision myself after I lost hope that it will be accepted the way it is now?

Stefan


----------------urspr?ngliche Nachricht-----------------
Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de], r-package-devel at r-project.org, Duncan Murdoch [murdoch.duncan at gmail.com]
Datum: Tue, 07 Apr 2020 09:52:52 -0700
-------------------------------------------------


> I did not say "interfere"... I said "problems with consistency". I don't think
> your wholesale import of functions without corresponding help pages is
> consistent with the normal use of R, which will make reading R code written with
> this mechanism in place a painful source of trouble for help forums.
>
> On the other hand, if the code is prefaced with an environment name then there will
> be no expectation that a help page should exist on the part of someone reading that
> code for the first time. (It will be no less obscure, but at least it won't be
> misleading.)
>
> On April 7, 2020 9:40:02 AM PDT, Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
> wrote:
>>Thank you very much for your comment.
>>Could you elaborate how you think that it could interfere with the help
>>system?
>>I haven't yet connected the Julia help with the R help, as the R help
>>system is quite complex and RStudio handles it again differently. So
>>it's simply like the functions were declared on the command line. They
>>have no help.
>>A simply way to print the help for a Julia function, e.g. the function
>>"first", is to call
>> juliaEval("@doc first")
>>This then simply prints the output on the command line.
>>
>>
>>----------------urspr?ngliche Nachricht-----------------
>>Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
>>An: r-package-devel at r-project.org, Duncan Murdoch
>>[murdoch.duncan at gmail.com], Stefan Lenz IMBI
>>[lenz at imbi.uni-freiburg.de]
>>Datum: Mon, 06 Apr 2020 10:51:53 -0700
>>-------------------------------------------------
>>
>>
>>> One could take the position that the library and require functions
>>were a mistake
>>> to begin with and that all contributed packages should be accessed
>>using ::... or
>>> one could recognize that these functions are an expected feature of R
>>at this
>>> point and then it is not defensible to ban the proposed approach of
>>importing
>>> names as Stefan wants to. I don't think it is fair to require this
>>higher level of
>>> specificity just because it involves use of attach.
>>>
>>> That said, another feature of R packages is the integrated help
>>system...
>>> importing Julia functions wholesale may lead to problems with
>>consistency in
>>> navigating the help files. IMO it may be justifiable to ban this
>>particular
>>> syntactic convenience to maintain some separation in the minds of
>>users looking
>>> for help on these new functions, since the syntactic and semantic
>>structure of
>>> functions from another language may not align well with normal R
>>functions. But I
>>> am not familiar with Julia or Stefan's package or the support it
>>brings in this
>>> area... I just disagree with banning a "library" lookalike function
>>"just
>>> because" it happens to involve attach.
>>>
>>> On April 6, 2020 8:40:12 AM PDT, Duncan Murdoch
>><murdoch.duncan at gmail.com>
>>> wrote:
>>>>On 06/04/2020 11:25 a.m., Stefan Lenz IMBI wrote:
>>>>> Yes, as I wrote earlier, I would like to imitate the behaviour of
>>>>loading an R package
>>>>>
>>>>> juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
>>>>> myJuliaFunction()
>>>>>
>>>>> like R:
>>>>>
>>>>> library("MyRPackage") # exports myRFunction
>>>>> myRFunction()
>>>>>
>>>>> I could return an environment, such that the call becomes
>>>>>
>>>>> attach(juliaUsing("SomeJuliaPackage"))
>>>>> myJuliaFunction()
>>>>
>>>>I wouldn't use it that way. I'd write it as
>>>>
>>>> sjp <- juliaUsing("SomeJuliaPackage")
>>>> sjp$myJuliaFunction()
>>>>
>>>>This is similar to the advice to use pkg::foo() rather than
>>>>library(pkg)
>>>>followed by plain foo() in the code.
>>>>
>>>>Duncan Murdoch
>>>>
>>>>>
>>>>> But calling juliaUsing(), as it is now, takes care that if a
>>package
>>>>is imported a second time,
>>>>> the first data base is removed via detach().
>>>>> This way, users do not have to worry about calling juliaUsing()
>>>>mutliple times in a script, same
>>>>> as R users don't have to worry about calling library() multiple
>>>>times.
>>>>> If you call the code with attach() multiple times and do not
>>detach,
>>>>you get your screen cluttered with
>>>>> warnings "xxx is masked by xxx".
>>>>> So I would say it would decrease user-friendliness to return an
>>>>environment.
>>>>> I also want to make explicit, that the call to attach
>>>>> occurs only once in my code, after creating the environment:
>>>>>
>>>>> envName <- paste0("JuliaConnectoR:", absoluteModulePath)
>>>>> if (envName %in% search()) {
>>>>> detach(envName, character.only = TRUE)
>>>>> }
>>>>> attach(funenv, name = envName)
>>>>>
>>>>> This code is only called by juliaImport() and juliaUsing(), which
>>>>aren't called by any other function of
>>>>> the package
>>>>> and are supposed to be called directly by the user.
>>>>>
>>>>> Stefan
>>>>>
>>>>> ----------------urspr?ngliche Nachricht-----------------
>>>>> Von: Duncan Murdoch [murdoch.duncan at gmail.com]
>>>>> An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker
>>>>[bbolker at gmail.com]
>>>>> Kopie: List r-package-devel [r-package-devel at r-project.org]
>>>>> Datum: Mon, 6 Apr 2020 11:00:09 -0400
>>>>> -------------------------------------------------
>>>>>
>>>>>
>>>>>> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>>>>>>>
>>>>>>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>>>>>>> | Just reply to the CRAN maintainers and explain this situation.
>>>>It?s
>>>>>>> | slightly buried, but the e-mail you received does say:
>>>>>>> |
>>>>>>> | > If you are fairly certain the rejection is a false positive,
>>>>please reply-all to this
>>>>>>> | > message and explain.
>>>>>>>
>>>>>>> True, but this misses the "Letter of the law" versus the "Spirit
>>of
>>>>the law".
>>>>>>>
>>>>>>> It might be worth mentioning that use of attach() is seen, to
>>find
>>>>one poor
>>>>>>> analogy, pretty much like use of global variables these days.
>>"Just
>>>>because
>>>>>>> you could does not mean you should".
>>>>>>>
>>>>>>> See e.g. one of the first google hits for 'r do not use attach'
>>>>here:
>>>>>>>
>>>>https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>>>>>
>>>>>> I don't have a strong opinion on this: the proposed use seems to
>>be
>>>>no
>>>>>> worse than library() or require(). Those are fine for users to
>>use,
>>>>but
>>>>>> are discouraged in a package. If the attach() never happens
>>without
>>>>an
>>>>>> explicit request from the user (and that's what it sounds like),
>>I'd
>>>>say
>>>>>> it's probably okay.
>>>>>>
>>>>>> However, there is an easy workaround: just return the environment
>>>>>> without attaching it. Then the user has the choice of attaching
>>it,
>>>>or
>>>>>> using it as a prefix when they call the functions in it. So it's
>>not
>>>>as
>>>>>> though this will destroy the utility of the package if Stefan
>>isn't
>>>>>> allowed to call attach().
>>>>>>
>>>>>> Duncan Murdoch
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>
>>>>>
>>>>
>>>>______________________________________________
>>>>R-package-devel at r-project.org mailing list
>>>>https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>


--

Stefan Lenz

Institut f?r Medizinische Biometrie und Statistik
Medizinische Fakult?t / Universit?tsklinikum Freiburg

Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg

Tel.: 0761/203-6670
E-Mail: lenz at imbi.uni-freiburg.de

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |enz @end|ng |rom |mb|@un|-|re|burg@de  Thu Apr  9 17:30:35 2020
From: |enz @end|ng |rom |mb|@un|-|re|burg@de (Stefan Lenz IMBI)
Date: Thu, 09 Apr 2020 17:30:35 +0200
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <20200409104127.EGroupware.Frn8sICScuDTqpktcG74Az3@_>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
 <510e7822-e79a-c760-0031-66d878273936@gmail.com>
 <20200407184002.EGroupware.fWu2KFXjoOWHPfhdb2Vo69K@_>,
 <20200409104127.EGroupware.Frn8sICScuDTqpktcG74Az3@_>
Message-ID: <20200409173035.EGroupware.9va3hIotP_Ry5zTry04BGzf@_>

Hi!
Thanks for pointing to the package "namespace". 
I experimented with it but I couldn't really figure out how it is supposed to work:

The following code leads to strange errors that I don't understand:

 > nse <- list2env(list(data="x", asdf = 2))
 > namespace::registerNamespace(name = "NewNamespace", env = nse)
 > NewNamespace::asdf
 Error in asNamespace(ns) : not a namespace

It would really be interesting if someone could comment on whether the namespace approach is feasible, how it is supposed to work, and whether/how it would be better than using attach.
Greetings!
Stefan

 
----------------urspr?ngliche Nachricht-----------------
Von: Joris Meys [Joris.Meys at ugent.be]
An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de], Jeff Newmiller [jdnewmil at dcn.davis.ca.us], r-package-devel at r-project.org, Duncan Murdoch [murdoch.duncan at gmail.com]
Datum: Thu, 9 Apr 2020 12:59:23 +0000
-------------------------------------------------
 
 
> Hi Stefan,
> 
> first of all, thank you for taking the time and effort to link Julia and R. That 
> said, I would strongly encourage you to go for a reticulate-like approach. 
> There's a good reason for that. Once you start mixing languages, you really want 
> to have some indication what code is ran in what language. Especially since I can 
> imagine at one point there'll be a Julia function masking an R function of the same 
> name, and that is going to cause a world of hurt and confusion.
> 
> If you don't like environments, you can try to use namespace functionality. 
> There's the "namespace" package that allows you to create one, and some internal 
> namespace functions are visible (eg namespaceExport() from base). That's 
> going to be the closest to mimicking R packages, but it's beyond my knowledge to 
> know how feasible this approach actually is. I hope someone else chimes in, 
> especially if this is dangerous for other reasons I overlooked.
> 
> Kind regards
> Joris
> 
> Joris Meys
> Statistician
> T +32 9 264 61 79
> 
> Department Data Analysis and Mathematical Modelling
> 
> Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent, 
> Belgium
> T administration office +32 9 264 59 32
> 
> www.ugent.be
> 
> e-maildisclaimer
> 
> 
> ________________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf 
> of Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
> Sent: Thursday, April 9, 2020 10:41 AM
> To: Jeff Newmiller; r-package-devel at r-project.org; Duncan Murdoch
> Subject: Re: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission 
> JuliaConnectoR 0.5.0
> 
> It is important for me to get my package into CRAN.
> I haven't gotten any answer from the CRAN maintainers. I already tried to submit a 
> version of the package before some months and haven't gotten any reply then.
> The replies you gave me (thanks to all engaged in the discussion) were mixed.
> I still think that the library-like import is a good feature, but if it is not 
> possible to get this package on CRAN with it, I will change it with returning an 
> environment like reticulate.
> My question now is:
> So what would be the process how to proceed?
> Is there anybody who can make a decision in such cases?
> Or do I make this decision myself after I lost hope that it will be accepted the way 
> it is now?
> 
> Stefan
> 
> 
> ----------------urspr?ngliche Nachricht-----------------
> Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
> An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de], 
> r-package-devel at r-project.org, Duncan Murdoch 
> [murdoch.duncan at gmail.com]
> Datum: Tue, 07 Apr 2020 09:52:52 -0700
> -------------------------------------------------
> 
> 
>> I did not say "interfere"... I said "problems with consistency". I don't think
>> your wholesale import of functions without corresponding help pages is
>> consistent with the normal use of R, which will make reading R code written with
>> this mechanism in place a painful source of trouble for help forums.
>>
>> On the other hand, if the code is prefaced with an environment name then there will
>> be no expectation that a help page should exist on the part of someone reading that
>> code for the first time. (It will be no less obscure, but at least it won't be
>> misleading.)
>>
>> On April 7, 2020 9:40:02 AM PDT, Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
>> wrote:
>>>Thank you very much for your comment.
>>>Could you elaborate how you think that it could interfere with the help
>>>system?
>>>I haven't yet connected the Julia help with the R help, as the R help
>>>system is quite complex and RStudio handles it again differently. So
>>>it's simply like the functions were declared on the command line. They
>>>have no help.
>>>A simply way to print the help for a Julia function, e.g. the function
>>>"first", is to call
>>> juliaEval("@doc first")
>>>This then simply prints the output on the command line.
>>>
>>>
>>>----------------urspr?ngliche Nachricht-----------------
>>>Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
>>>An: r-package-devel at r-project.org, Duncan Murdoch
>>>[murdoch.duncan at gmail.com], Stefan Lenz IMBI
>>>[lenz at imbi.uni-freiburg.de]
>>>Datum: Mon, 06 Apr 2020 10:51:53 -0700
>>>-------------------------------------------------
>>>
>>>
>>>> One could take the position that the library and require functions
>>>were a mistake
>>>> to begin with and that all contributed packages should be accessed
>>>using ::... or
>>>> one could recognize that these functions are an expected feature of R
>>>at this
>>>> point and then it is not defensible to ban the proposed approach of
>>>importing
>>>> names as Stefan wants to. I don't think it is fair to require this
>>>higher level of
>>>> specificity just because it involves use of attach.
>>>>
>>>> That said, another feature of R packages is the integrated help
>>>system...
>>>> importing Julia functions wholesale may lead to problems with
>>>consistency in
>>>> navigating the help files. IMO it may be justifiable to ban this
>>>particular
>>>> syntactic convenience to maintain some separation in the minds of
>>>users looking
>>>> for help on these new functions, since the syntactic and semantic
>>>structure of
>>>> functions from another language may not align well with normal R
>>>functions. But I
>>>> am not familiar with Julia or Stefan's package or the support it
>>>brings in this
>>>> area... I just disagree with banning a "library" lookalike function
>>>"just
>>>> because" it happens to involve attach.
>>>>
>>>> On April 6, 2020 8:40:12 AM PDT, Duncan Murdoch
>>><murdoch.duncan at gmail.com>
>>>> wrote:
>>>>>On 06/04/2020 11:25 a.m., Stefan Lenz IMBI wrote:
>>>>>> Yes, as I wrote earlier, I would like to imitate the behaviour of
>>>>>loading an R package
>>>>>>
>>>>>> juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
>>>>>> myJuliaFunction()
>>>>>>
>>>>>> like R:
>>>>>>
>>>>>> library("MyRPackage") # exports myRFunction
>>>>>> myRFunction()
>>>>>>
>>>>>> I could return an environment, such that the call becomes
>>>>>>
>>>>>> attach(juliaUsing("SomeJuliaPackage"))
>>>>>> myJuliaFunction()
>>>>>
>>>>>I wouldn't use it that way. I'd write it as
>>>>>
>>>>> sjp <- juliaUsing("SomeJuliaPackage")
>>>>> sjp$myJuliaFunction()
>>>>>
>>>>>This is similar to the advice to use pkg::foo() rather than
>>>>>library(pkg)
>>>>>followed by plain foo() in the code.
>>>>>
>>>>>Duncan Murdoch
>>>>>
>>>>>>
>>>>>> But calling juliaUsing(), as it is now, takes care that if a
>>>package
>>>>>is imported a second time,
>>>>>> the first data base is removed via detach().
>>>>>> This way, users do not have to worry about calling juliaUsing()
>>>>>mutliple times in a script, same
>>>>>> as R users don't have to worry about calling library() multiple
>>>>>times.
>>>>>> If you call the code with attach() multiple times and do not
>>>detach,
>>>>>you get your screen cluttered with
>>>>>> warnings "xxx is masked by xxx".
>>>>>> So I would say it would decrease user-friendliness to return an
>>>>>environment.
>>>>>> I also want to make explicit, that the call to attach
>>>>>> occurs only once in my code, after creating the environment:
>>>>>>
>>>>>> envName <- paste0("JuliaConnectoR:", absoluteModulePath)
>>>>>> if (envName %in% search()) {
>>>>>> detach(envName, character.only = TRUE)
>>>>>> }
>>>>>> attach(funenv, name = envName)
>>>>>>
>>>>>> This code is only called by juliaImport() and juliaUsing(), which
>>>>>aren't called by any other function of
>>>>>> the package
>>>>>> and are supposed to be called directly by the user.
>>>>>>
>>>>>> Stefan
>>>>>>
>>>>>> ----------------urspr?ngliche Nachricht-----------------
>>>>>> Von: Duncan Murdoch [murdoch.duncan at gmail.com]
>>>>>> An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker
>>>>>[bbolker at gmail.com]
>>>>>> Kopie: List r-package-devel [r-package-devel at r-project.org]
>>>>>> Datum: Mon, 6 Apr 2020 11:00:09 -0400
>>>>>> -------------------------------------------------
>>>>>>
>>>>>>
>>>>>>> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>>>>>>>>
>>>>>>>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>>>>>>>> | Just reply to the CRAN maintainers and explain this situation.
>>>>>It?s
>>>>>>>> | slightly buried, but the e-mail you received does say:
>>>>>>>> |
>>>>>>>> | > If you are fairly certain the rejection is a false positive,
>>>>>please reply-all to this
>>>>>>>> | > message and explain.
>>>>>>>>
>>>>>>>> True, but this misses the "Letter of the law" versus the "Spirit
>>>of
>>>>>the law".
>>>>>>>>
>>>>>>>> It might be worth mentioning that use of attach() is seen, to
>>>find
>>>>>one poor
>>>>>>>> analogy, pretty much like use of global variables these days.
>>>"Just
>>>>>because
>>>>>>>> you could does not mean you should".
>>>>>>>>
>>>>>>>> See e.g. one of the first google hits for 'r do not use attach'
>>>>>here:
>>>>>>>>
>>>>>https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>>>>>>
>>>>>>> I don't have a strong opinion on this: the proposed use seems to
>>>be
>>>>>no
>>>>>>> worse than library() or require(). Those are fine for users to
>>>use,
>>>>>but
>>>>>>> are discouraged in a package. If the attach() never happens
>>>without
>>>>>an
>>>>>>> explicit request from the user (and that's what it sounds like),
>>>I'd
>>>>>say
>>>>>>> it's probably okay.
>>>>>>>
>>>>>>> However, there is an easy workaround: just return the environment
>>>>>>> without attaching it. Then the user has the choice of attaching
>>>it,
>>>>>or
>>>>>>> using it as a prefix when they call the functions in it. So it's
>>>not
>>>>>as
>>>>>>> though this will destroy the utility of the package if Stefan
>>>isn't
>>>>>>> allowed to call attach().
>>>>>>>
>>>>>>> Duncan Murdoch
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-package-devel at r-project.org mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>______________________________________________
>>>>>R-package-devel at r-project.org mailing list
>>>>>https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>
> 
> 
> --
> 
> Stefan Lenz
> 
> Institut f?r Medizinische Biometrie und Statistik
> Medizinische Fakult?t / Universit?tsklinikum Freiburg
> 
> Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg
> 
> Tel.: 0761/203-6670
> E-Mail: lenz at imbi.uni-freiburg.de
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


-- 

Stefan Lenz

Institut f?r Medizinische Biometrie und Statistik
Medizinische Fakult?t / Universit?tsklinikum Freiburg

Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg

Tel.: 0761/203-6670
E-Mail: lenz at imbi.uni-freiburg.de


From Jor|@@Mey@ @end|ng |rom UGent@be  Thu Apr  9 17:37:09 2020
From: Jor|@@Mey@ @end|ng |rom UGent@be (Joris Meys)
Date: Thu, 9 Apr 2020 15:37:09 +0000
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <20200409173035.EGroupware.9va3hIotP_Ry5zTry04BGzf@_>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
 <510e7822-e79a-c760-0031-66d878273936@gmail.com>
 <20200407184002.EGroupware.fWu2KFXjoOWHPfhdb2Vo69K@_>,
 <20200409104127.EGroupware.Frn8sICScuDTqpktcG74Az3@_>,
 <20200409173035.EGroupware.9va3hIotP_Ry5zTry04BGzf@_>
Message-ID: <1586446629798.79698@UGent.be>

Hi Stefan,

you need the function makeNamespace() to create the environment as a namespace. Look at the examples in the help files, I found them rather instructive. I also hope someone else chimes in to shed some light on whether or not that approach would be acceptable. 


Joris Meys
Statistician
T +32 9 264 61 79

Department Data Analysis and Mathematical Modelling

Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent, Belgium
T administration office +32 9 264 59 32

www.ugent.be

e-maildisclaimer


________________________________________
From: Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
Sent: Thursday, April 9, 2020 5:30 PM
To: Joris Meys; Jeff Newmiller; r-package-devel at r-project.org; Duncan Murdoch
Subject: Re: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission JuliaConnectoR 0.5.0

Hi!
Thanks for pointing to the package "namespace".
I experimented with it but I couldn't really figure out how it is supposed to work:

The following code leads to strange errors that I don't understand:

 > nse <- list2env(list(data="x", asdf = 2))
 > namespace::registerNamespace(name = "NewNamespace", env = nse)
 > NewNamespace::asdf
 Error in asNamespace(ns) : not a namespace

It would really be interesting if someone could comment on whether the namespace approach is feasible, how it is supposed to work, and whether/how it would be better than using attach.
Greetings!
Stefan


----------------urspr?ngliche Nachricht-----------------
Von: Joris Meys [Joris.Meys at ugent.be]
An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de], Jeff Newmiller [jdnewmil at dcn.davis.ca.us], r-package-devel at r-project.org, Duncan Murdoch [murdoch.duncan at gmail.com]
Datum: Thu, 9 Apr 2020 12:59:23 +0000
-------------------------------------------------


> Hi Stefan,
>
> first of all, thank you for taking the time and effort to link Julia and R. That
> said, I would strongly encourage you to go for a reticulate-like approach.
> There's a good reason for that. Once you start mixing languages, you really want
> to have some indication what code is ran in what language. Especially since I can
> imagine at one point there'll be a Julia function masking an R function of the same
> name, and that is going to cause a world of hurt and confusion.
>
> If you don't like environments, you can try to use namespace functionality.
> There's the "namespace" package that allows you to create one, and some internal
> namespace functions are visible (eg namespaceExport() from base). That's
> going to be the closest to mimicking R packages, but it's beyond my knowledge to
> know how feasible this approach actually is. I hope someone else chimes in,
> especially if this is dangerous for other reasons I overlooked.
>
> Kind regards
> Joris
>
> Joris Meys
> Statistician
> T +32 9 264 61 79
>
> Department Data Analysis and Mathematical Modelling
>
> Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent,
> Belgium
> T administration office +32 9 264 59 32
>
> www.ugent.be
>
> e-maildisclaimer
>
>
> ________________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf
> of Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
> Sent: Thursday, April 9, 2020 10:41 AM
> To: Jeff Newmiller; r-package-devel at r-project.org; Duncan Murdoch
> Subject: Re: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
> JuliaConnectoR 0.5.0
>
> It is important for me to get my package into CRAN.
> I haven't gotten any answer from the CRAN maintainers. I already tried to submit a
> version of the package before some months and haven't gotten any reply then.
> The replies you gave me (thanks to all engaged in the discussion) were mixed.
> I still think that the library-like import is a good feature, but if it is not
> possible to get this package on CRAN with it, I will change it with returning an
> environment like reticulate.
> My question now is:
> So what would be the process how to proceed?
> Is there anybody who can make a decision in such cases?
> Or do I make this decision myself after I lost hope that it will be accepted the way
> it is now?
>
> Stefan
>
>
> ----------------urspr?ngliche Nachricht-----------------
> Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
> An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de],
> r-package-devel at r-project.org, Duncan Murdoch
> [murdoch.duncan at gmail.com]
> Datum: Tue, 07 Apr 2020 09:52:52 -0700
> -------------------------------------------------
>
>
>> I did not say "interfere"... I said "problems with consistency". I don't think
>> your wholesale import of functions without corresponding help pages is
>> consistent with the normal use of R, which will make reading R code written with
>> this mechanism in place a painful source of trouble for help forums.
>>
>> On the other hand, if the code is prefaced with an environment name then there will
>> be no expectation that a help page should exist on the part of someone reading that
>> code for the first time. (It will be no less obscure, but at least it won't be
>> misleading.)
>>
>> On April 7, 2020 9:40:02 AM PDT, Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
>> wrote:
>>>Thank you very much for your comment.
>>>Could you elaborate how you think that it could interfere with the help
>>>system?
>>>I haven't yet connected the Julia help with the R help, as the R help
>>>system is quite complex and RStudio handles it again differently. So
>>>it's simply like the functions were declared on the command line. They
>>>have no help.
>>>A simply way to print the help for a Julia function, e.g. the function
>>>"first", is to call
>>> juliaEval("@doc first")
>>>This then simply prints the output on the command line.
>>>
>>>
>>>----------------urspr?ngliche Nachricht-----------------
>>>Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
>>>An: r-package-devel at r-project.org, Duncan Murdoch
>>>[murdoch.duncan at gmail.com], Stefan Lenz IMBI
>>>[lenz at imbi.uni-freiburg.de]
>>>Datum: Mon, 06 Apr 2020 10:51:53 -0700
>>>-------------------------------------------------
>>>
>>>
>>>> One could take the position that the library and require functions
>>>were a mistake
>>>> to begin with and that all contributed packages should be accessed
>>>using ::... or
>>>> one could recognize that these functions are an expected feature of R
>>>at this
>>>> point and then it is not defensible to ban the proposed approach of
>>>importing
>>>> names as Stefan wants to. I don't think it is fair to require this
>>>higher level of
>>>> specificity just because it involves use of attach.
>>>>
>>>> That said, another feature of R packages is the integrated help
>>>system...
>>>> importing Julia functions wholesale may lead to problems with
>>>consistency in
>>>> navigating the help files. IMO it may be justifiable to ban this
>>>particular
>>>> syntactic convenience to maintain some separation in the minds of
>>>users looking
>>>> for help on these new functions, since the syntactic and semantic
>>>structure of
>>>> functions from another language may not align well with normal R
>>>functions. But I
>>>> am not familiar with Julia or Stefan's package or the support it
>>>brings in this
>>>> area... I just disagree with banning a "library" lookalike function
>>>"just
>>>> because" it happens to involve attach.
>>>>
>>>> On April 6, 2020 8:40:12 AM PDT, Duncan Murdoch
>>><murdoch.duncan at gmail.com>
>>>> wrote:
>>>>>On 06/04/2020 11:25 a.m., Stefan Lenz IMBI wrote:
>>>>>> Yes, as I wrote earlier, I would like to imitate the behaviour of
>>>>>loading an R package
>>>>>>
>>>>>> juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
>>>>>> myJuliaFunction()
>>>>>>
>>>>>> like R:
>>>>>>
>>>>>> library("MyRPackage") # exports myRFunction
>>>>>> myRFunction()
>>>>>>
>>>>>> I could return an environment, such that the call becomes
>>>>>>
>>>>>> attach(juliaUsing("SomeJuliaPackage"))
>>>>>> myJuliaFunction()
>>>>>
>>>>>I wouldn't use it that way. I'd write it as
>>>>>
>>>>> sjp <- juliaUsing("SomeJuliaPackage")
>>>>> sjp$myJuliaFunction()
>>>>>
>>>>>This is similar to the advice to use pkg::foo() rather than
>>>>>library(pkg)
>>>>>followed by plain foo() in the code.
>>>>>
>>>>>Duncan Murdoch
>>>>>
>>>>>>
>>>>>> But calling juliaUsing(), as it is now, takes care that if a
>>>package
>>>>>is imported a second time,
>>>>>> the first data base is removed via detach().
>>>>>> This way, users do not have to worry about calling juliaUsing()
>>>>>mutliple times in a script, same
>>>>>> as R users don't have to worry about calling library() multiple
>>>>>times.
>>>>>> If you call the code with attach() multiple times and do not
>>>detach,
>>>>>you get your screen cluttered with
>>>>>> warnings "xxx is masked by xxx".
>>>>>> So I would say it would decrease user-friendliness to return an
>>>>>environment.
>>>>>> I also want to make explicit, that the call to attach
>>>>>> occurs only once in my code, after creating the environment:
>>>>>>
>>>>>> envName <- paste0("JuliaConnectoR:", absoluteModulePath)
>>>>>> if (envName %in% search()) {
>>>>>> detach(envName, character.only = TRUE)
>>>>>> }
>>>>>> attach(funenv, name = envName)
>>>>>>
>>>>>> This code is only called by juliaImport() and juliaUsing(), which
>>>>>aren't called by any other function of
>>>>>> the package
>>>>>> and are supposed to be called directly by the user.
>>>>>>
>>>>>> Stefan
>>>>>>
>>>>>> ----------------urspr?ngliche Nachricht-----------------
>>>>>> Von: Duncan Murdoch [murdoch.duncan at gmail.com]
>>>>>> An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker
>>>>>[bbolker at gmail.com]
>>>>>> Kopie: List r-package-devel [r-package-devel at r-project.org]
>>>>>> Datum: Mon, 6 Apr 2020 11:00:09 -0400
>>>>>> -------------------------------------------------
>>>>>>
>>>>>>
>>>>>>> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>>>>>>>>
>>>>>>>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>>>>>>>> | Just reply to the CRAN maintainers and explain this situation.
>>>>>It?s
>>>>>>>> | slightly buried, but the e-mail you received does say:
>>>>>>>> |
>>>>>>>> | > If you are fairly certain the rejection is a false positive,
>>>>>please reply-all to this
>>>>>>>> | > message and explain.
>>>>>>>>
>>>>>>>> True, but this misses the "Letter of the law" versus the "Spirit
>>>of
>>>>>the law".
>>>>>>>>
>>>>>>>> It might be worth mentioning that use of attach() is seen, to
>>>find
>>>>>one poor
>>>>>>>> analogy, pretty much like use of global variables these days.
>>>"Just
>>>>>because
>>>>>>>> you could does not mean you should".
>>>>>>>>
>>>>>>>> See e.g. one of the first google hits for 'r do not use attach'
>>>>>here:
>>>>>>>>
>>>>>https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>>>>>>
>>>>>>> I don't have a strong opinion on this: the proposed use seems to
>>>be
>>>>>no
>>>>>>> worse than library() or require(). Those are fine for users to
>>>use,
>>>>>but
>>>>>>> are discouraged in a package. If the attach() never happens
>>>without
>>>>>an
>>>>>>> explicit request from the user (and that's what it sounds like),
>>>I'd
>>>>>say
>>>>>>> it's probably okay.
>>>>>>>
>>>>>>> However, there is an easy workaround: just return the environment
>>>>>>> without attaching it. Then the user has the choice of attaching
>>>it,
>>>>>or
>>>>>>> using it as a prefix when they call the functions in it. So it's
>>>not
>>>>>as
>>>>>>> though this will destroy the utility of the package if Stefan
>>>isn't
>>>>>>> allowed to call attach().
>>>>>>>
>>>>>>> Duncan Murdoch
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-package-devel at r-project.org mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>______________________________________________
>>>>>R-package-devel at r-project.org mailing list
>>>>>https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>
>
>
> --
>
> Stefan Lenz
>
> Institut f?r Medizinische Biometrie und Statistik
> Medizinische Fakult?t / Universit?tsklinikum Freiburg
>
> Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg
>
> Tel.: 0761/203-6670
> E-Mail: lenz at imbi.uni-freiburg.de
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


--

Stefan Lenz

Institut f?r Medizinische Biometrie und Statistik
Medizinische Fakult?t / Universit?tsklinikum Freiburg

Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg

Tel.: 0761/203-6670
E-Mail: lenz at imbi.uni-freiburg.de


From |enz @end|ng |rom |mb|@un|-|re|burg@de  Thu Apr  9 18:09:18 2020
From: |enz @end|ng |rom |mb|@un|-|re|burg@de (Stefan Lenz IMBI)
Date: Thu, 09 Apr 2020 18:09:18 +0200
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <20200409173035.EGroupware.9va3hIotP_Ry5zTry04BGzf@_>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
 <510e7822-e79a-c760-0031-66d878273936@gmail.com>
 <20200407184002.EGroupware.fWu2KFXjoOWHPfhdb2Vo69K@_>,
 <20200409104127.EGroupware.Frn8sICScuDTqpktcG74Az3@_>,
 <20200409173035.EGroupware.9va3hIotP_Ry5zTry04BGzf@_>
Message-ID: <20200409180918.EGroupware.QBjFgVbmXMVuv5G-LPtbU2w@_>

When I execute the example, I also get a strange behaviour:

 library(namespace)
 ns <- makeNamespace("myNamespace")
 assign("test",7, env=ns)
 ls(env=ns) 

When I now want to invoke any help for a function, I get a warning message:

 > ?loadNamespace
 Warning message:
 In find.package(if (is.null(package)) loadedNamespaces() else package, :
 there is no package called ?myNamespace?

Also sessionInfo doesn't work any more:

 > sessionInfo()
 Error in if (pkgpath == "") { : argument is of length zero

I don't think this is a good sign....
Stefan

 
----------------urspr?ngliche Nachricht-----------------
Von: Joris Meys [Joris.Meys at ugent.be]
An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de], r-package-devel at r-project.org
Datum: Thu, 9 Apr 2020 15:37:09 +0000
-------------------------------------------------
 
 
> Hi Stefan,
> 
> you need the function makeNamespace() to create the environment as a namespace. 
> Look at the examples in the help files, I found them rather instructive. I also 
> hope someone else chimes in to shed some light on whether or not that approach 
> would be acceptable.
> 
> 
> Joris Meys
> Statistician
> T +32 9 264 61 79
> 
> Department Data Analysis and Mathematical Modelling
> 
> Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent, 
> Belgium
> T administration office +32 9 264 59 32
> 
> www.ugent.be
> 
> e-maildisclaimer
> 
> 
> ________________________________________
> From: Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
> Sent: Thursday, April 9, 2020 5:30 PM
> To: Joris Meys; Jeff Newmiller; r-package-devel at r-project.org; Duncan 
> Murdoch
> Subject: Re: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission 
> JuliaConnectoR 0.5.0
> 
> Hi!
> Thanks for pointing to the package "namespace".
> I experimented with it but I couldn't really figure out how it is supposed to work:
> 
> The following code leads to strange errors that I don't understand:
> 
> > nse <- list2env(list(data="x", asdf = 2))
> > namespace::registerNamespace(name = "NewNamespace", env = nse)
> > NewNamespace::asdf
> Error in asNamespace(ns) : not a namespace
> 
> It would really be interesting if someone could comment on whether the namespace 
> approach is feasible, how it is supposed to work, and whether/how it would be 
> better than using attach.
> Greetings!
> Stefan
> 
> 
> ----------------urspr?ngliche Nachricht-----------------
> Von: Joris Meys [Joris.Meys at ugent.be]
> An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de], Jeff Newmiller 
> [jdnewmil at dcn.davis.ca.us], r-package-devel at r-project.org, Duncan 
> Murdoch [murdoch.duncan at gmail.com]
> Datum: Thu, 9 Apr 2020 12:59:23 +0000
> -------------------------------------------------
> 
> 
>> Hi Stefan,
>>
>> first of all, thank you for taking the time and effort to link Julia and R. That
>> said, I would strongly encourage you to go for a reticulate-like approach.
>> There's a good reason for that. Once you start mixing languages, you really want
>> to have some indication what code is ran in what language. Especially since I can
>> imagine at one point there'll be a Julia function masking an R function of the same
>> name, and that is going to cause a world of hurt and confusion.
>>
>> If you don't like environments, you can try to use namespace functionality.
>> There's the "namespace" package that allows you to create one, and some internal
>> namespace functions are visible (eg namespaceExport() from base). That's
>> going to be the closest to mimicking R packages, but it's beyond my knowledge to
>> know how feasible this approach actually is. I hope someone else chimes in,
>> especially if this is dangerous for other reasons I overlooked.
>>
>> Kind regards
>> Joris
>>
>> Joris Meys
>> Statistician
>> T +32 9 264 61 79
>>
>> Department Data Analysis and Mathematical Modelling
>>
>> Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent,
>> Belgium
>> T administration office +32 9 264 59 32
>>
>> www.ugent.be
>>
>> e-maildisclaimer
>>
>>
>> ________________________________________
>> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf
>> of Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
>> Sent: Thursday, April 9, 2020 10:41 AM
>> To: Jeff Newmiller; r-package-devel at r-project.org; Duncan Murdoch
>> Subject: Re: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
>> JuliaConnectoR 0.5.0
>>
>> It is important for me to get my package into CRAN.
>> I haven't gotten any answer from the CRAN maintainers. I already tried to submit a
>> version of the package before some months and haven't gotten any reply then.
>> The replies you gave me (thanks to all engaged in the discussion) were mixed.
>> I still think that the library-like import is a good feature, but if it is not
>> possible to get this package on CRAN with it, I will change it with returning an
>> environment like reticulate.
>> My question now is:
>> So what would be the process how to proceed?
>> Is there anybody who can make a decision in such cases?
>> Or do I make this decision myself after I lost hope that it will be accepted the way
>> it is now?
>>
>> Stefan
>>
>>
>> ----------------urspr?ngliche Nachricht-----------------
>> Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
>> An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de],
>> r-package-devel at r-project.org, Duncan Murdoch
>> [murdoch.duncan at gmail.com]
>> Datum: Tue, 07 Apr 2020 09:52:52 -0700
>> -------------------------------------------------
>>
>>
>>> I did not say "interfere"... I said "problems with consistency". I don't think
>>> your wholesale import of functions without corresponding help pages is
>>> consistent with the normal use of R, which will make reading R code written with
>>> this mechanism in place a painful source of trouble for help forums.
>>>
>>> On the other hand, if the code is prefaced with an environment name then there will
>>> be no expectation that a help page should exist on the part of someone reading that
>>> code for the first time. (It will be no less obscure, but at least it won't be
>>> misleading.)
>>>
>>> On April 7, 2020 9:40:02 AM PDT, Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
>>> wrote:
>>>>Thank you very much for your comment.
>>>>Could you elaborate how you think that it could interfere with the help
>>>>system?
>>>>I haven't yet connected the Julia help with the R help, as the R help
>>>>system is quite complex and RStudio handles it again differently. So
>>>>it's simply like the functions were declared on the command line. They
>>>>have no help.
>>>>A simply way to print the help for a Julia function, e.g. the function
>>>>"first", is to call
>>>> juliaEval("@doc first")
>>>>This then simply prints the output on the command line.
>>>>
>>>>
>>>>----------------urspr?ngliche Nachricht-----------------
>>>>Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
>>>>An: r-package-devel at r-project.org, Duncan Murdoch
>>>>[murdoch.duncan at gmail.com], Stefan Lenz IMBI
>>>>[lenz at imbi.uni-freiburg.de]
>>>>Datum: Mon, 06 Apr 2020 10:51:53 -0700
>>>>-------------------------------------------------
>>>>
>>>>
>>>>> One could take the position that the library and require functions
>>>>were a mistake
>>>>> to begin with and that all contributed packages should be accessed
>>>>using ::... or
>>>>> one could recognize that these functions are an expected feature of R
>>>>at this
>>>>> point and then it is not defensible to ban the proposed approach of
>>>>importing
>>>>> names as Stefan wants to. I don't think it is fair to require this
>>>>higher level of
>>>>> specificity just because it involves use of attach.
>>>>>
>>>>> That said, another feature of R packages is the integrated help
>>>>system...
>>>>> importing Julia functions wholesale may lead to problems with
>>>>consistency in
>>>>> navigating the help files. IMO it may be justifiable to ban this
>>>>particular
>>>>> syntactic convenience to maintain some separation in the minds of
>>>>users looking
>>>>> for help on these new functions, since the syntactic and semantic
>>>>structure of
>>>>> functions from another language may not align well with normal R
>>>>functions. But I
>>>>> am not familiar with Julia or Stefan's package or the support it
>>>>brings in this
>>>>> area... I just disagree with banning a "library" lookalike function
>>>>"just
>>>>> because" it happens to involve attach.
>>>>>
>>>>> On April 6, 2020 8:40:12 AM PDT, Duncan Murdoch
>>>><murdoch.duncan at gmail.com>
>>>>> wrote:
>>>>>>On 06/04/2020 11:25 a.m., Stefan Lenz IMBI wrote:
>>>>>>> Yes, as I wrote earlier, I would like to imitate the behaviour of
>>>>>>loading an R package
>>>>>>>
>>>>>>> juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
>>>>>>> myJuliaFunction()
>>>>>>>
>>>>>>> like R:
>>>>>>>
>>>>>>> library("MyRPackage") # exports myRFunction
>>>>>>> myRFunction()
>>>>>>>
>>>>>>> I could return an environment, such that the call becomes
>>>>>>>
>>>>>>> attach(juliaUsing("SomeJuliaPackage"))
>>>>>>> myJuliaFunction()
>>>>>>
>>>>>>I wouldn't use it that way. I'd write it as
>>>>>>
>>>>>> sjp <- juliaUsing("SomeJuliaPackage")
>>>>>> sjp$myJuliaFunction()
>>>>>>
>>>>>>This is similar to the advice to use pkg::foo() rather than
>>>>>>library(pkg)
>>>>>>followed by plain foo() in the code.
>>>>>>
>>>>>>Duncan Murdoch
>>>>>>
>>>>>>>
>>>>>>> But calling juliaUsing(), as it is now, takes care that if a
>>>>package
>>>>>>is imported a second time,
>>>>>>> the first data base is removed via detach().
>>>>>>> This way, users do not have to worry about calling juliaUsing()
>>>>>>mutliple times in a script, same
>>>>>>> as R users don't have to worry about calling library() multiple
>>>>>>times.
>>>>>>> If you call the code with attach() multiple times and do not
>>>>detach,
>>>>>>you get your screen cluttered with
>>>>>>> warnings "xxx is masked by xxx".
>>>>>>> So I would say it would decrease user-friendliness to return an
>>>>>>environment.
>>>>>>> I also want to make explicit, that the call to attach
>>>>>>> occurs only once in my code, after creating the environment:
>>>>>>>
>>>>>>> envName <- paste0("JuliaConnectoR:", absoluteModulePath)
>>>>>>> if (envName %in% search()) {
>>>>>>> detach(envName, character.only = TRUE)
>>>>>>> }
>>>>>>> attach(funenv, name = envName)
>>>>>>>
>>>>>>> This code is only called by juliaImport() and juliaUsing(), which
>>>>>>aren't called by any other function of
>>>>>>> the package
>>>>>>> and are supposed to be called directly by the user.
>>>>>>>
>>>>>>> Stefan
>>>>>>>
>>>>>>> ----------------urspr?ngliche Nachricht-----------------
>>>>>>> Von: Duncan Murdoch [murdoch.duncan at gmail.com]
>>>>>>> An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker
>>>>>>[bbolker at gmail.com]
>>>>>>> Kopie: List r-package-devel [r-package-devel at r-project.org]
>>>>>>> Datum: Mon, 6 Apr 2020 11:00:09 -0400
>>>>>>> -------------------------------------------------
>>>>>>>
>>>>>>>
>>>>>>>> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>>>>>>>>>
>>>>>>>>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>>>>>>>>> | Just reply to the CRAN maintainers and explain this situation.
>>>>>>It?s
>>>>>>>>> | slightly buried, but the e-mail you received does say:
>>>>>>>>> |
>>>>>>>>> | > If you are fairly certain the rejection is a false positive,
>>>>>>please reply-all to this
>>>>>>>>> | > message and explain.
>>>>>>>>>
>>>>>>>>> True, but this misses the "Letter of the law" versus the "Spirit
>>>>of
>>>>>>the law".
>>>>>>>>>
>>>>>>>>> It might be worth mentioning that use of attach() is seen, to
>>>>find
>>>>>>one poor
>>>>>>>>> analogy, pretty much like use of global variables these days.
>>>>"Just
>>>>>>because
>>>>>>>>> you could does not mean you should".
>>>>>>>>>
>>>>>>>>> See e.g. one of the first google hits for 'r do not use attach'
>>>>>>here:
>>>>>>>>>
>>>>>>https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>>>>>>>
>>>>>>>> I don't have a strong opinion on this: the proposed use seems to
>>>>be
>>>>>>no
>>>>>>>> worse than library() or require(). Those are fine for users to
>>>>use,
>>>>>>but
>>>>>>>> are discouraged in a package. If the attach() never happens
>>>>without
>>>>>>an
>>>>>>>> explicit request from the user (and that's what it sounds like),
>>>>I'd
>>>>>>say
>>>>>>>> it's probably okay.
>>>>>>>>
>>>>>>>> However, there is an easy workaround: just return the environment
>>>>>>>> without attaching it. Then the user has the choice of attaching
>>>>it,
>>>>>>or
>>>>>>>> using it as a prefix when they call the functions in it. So it's
>>>>not
>>>>>>as
>>>>>>>> though this will destroy the utility of the package if Stefan
>>>>isn't
>>>>>>>> allowed to call attach().
>>>>>>>>
>>>>>>>> Duncan Murdoch
>>>>>>>>
>>>>>>>> ______________________________________________
>>>>>>>> R-package-devel at r-project.org mailing list
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>______________________________________________
>>>>>>R-package-devel at r-project.org mailing list
>>>>>>https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>
>>
>>
>> --
>>
>> Stefan Lenz
>>
>> Institut f?r Medizinische Biometrie und Statistik
>> Medizinische Fakult?t / Universit?tsklinikum Freiburg
>>
>> Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg
>>
>> Tel.: 0761/203-6670
>> E-Mail: lenz at imbi.uni-freiburg.de
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 
> --
> 
> Stefan Lenz
> 
> Institut f?r Medizinische Biometrie und Statistik
> Medizinische Fakult?t / Universit?tsklinikum Freiburg
> 
> Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg
> 
> Tel.: 0761/203-6670
> E-Mail: lenz at imbi.uni-freiburg.de
> 


-- 

Stefan Lenz

Institut f?r Medizinische Biometrie und Statistik
Medizinische Fakult?t / Universit?tsklinikum Freiburg

Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg

Tel.: 0761/203-6670
E-Mail: lenz at imbi.uni-freiburg.de


From Jor|@@Mey@ @end|ng |rom UGent@be  Thu Apr  9 18:20:37 2020
From: Jor|@@Mey@ @end|ng |rom UGent@be (Joris Meys)
Date: Thu, 9 Apr 2020 16:20:37 +0000
Subject: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
 JuliaConnectoR 0.5.0
In-Reply-To: <20200409180918.EGroupware.QBjFgVbmXMVuv5G-LPtbU2w@_>
References: <20200406105041.591AA161E26@xmpalantir.wu.ac.at>
 <01d60c03$Blat.v3.2.16$208584b7$2b9307833@mail.statistik.tu-dortmund.de>
 <20200406142129.EGroupware.03ZLD_VgacS_cdTQ6r6zcEC@_>
 <CABghstQzbKkjy+C=yYPtbEPXf0xXmD3vgT3iiTLQu4N-vGYANw@mail.gmail.com>
 <24203.16781.429161.610624@rob.eddelbuettel.com>
 <20200406172535.EGroupware.NKaiemiu1midtZ2tBhXcvmw@_>
 <510e7822-e79a-c760-0031-66d878273936@gmail.com>
 <20200407184002.EGroupware.fWu2KFXjoOWHPfhdb2Vo69K@_>,
 <20200409104127.EGroupware.Frn8sICScuDTqpktcG74Az3@_>,
 <20200409173035.EGroupware.9va3hIotP_Ry5zTry04BGzf@_>,
 <20200409180918.EGroupware.QBjFgVbmXMVuv5G-LPtbU2w@_>
Message-ID: <1586449238351.7197@UGent.be>

You're right, that's enough to not dig any further. I remembered it from the earlier days of devtools, but they removed that dependency ages ago. I also believe now the namespace package predates the later changes to the namespace mechanism. Forget what I said, I should have spent a bit more time testing it myself first.

Kind regards
Joris


Joris Meys
Statistician
T +32 9 264 61 79

Department Data Analysis and Mathematical Modelling

Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent, Belgium
T administration office +32 9 264 59 32

www.ugent.be

e-maildisclaimer


________________________________________
From: Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
Sent: Thursday, April 9, 2020 6:09 PM
To: Joris Meys; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission JuliaConnectoR 0.5.0

When I execute the example, I also get a strange behaviour:

 library(namespace)
 ns <- makeNamespace("myNamespace")
 assign("test",7, env=ns)
 ls(env=ns)

When I now want to invoke any help for a function, I get a warning message:

 > ?loadNamespace
 Warning message:
 In find.package(if (is.null(package)) loadedNamespaces() else package, :
 there is no package called ?myNamespace?

Also sessionInfo doesn't work any more:

 > sessionInfo()
 Error in if (pkgpath == "") { : argument is of length zero

I don't think this is a good sign....
Stefan


----------------urspr?ngliche Nachricht-----------------
Von: Joris Meys [Joris.Meys at ugent.be]
An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de], r-package-devel at r-project.org
Datum: Thu, 9 Apr 2020 15:37:09 +0000
-------------------------------------------------


> Hi Stefan,
>
> you need the function makeNamespace() to create the environment as a namespace.
> Look at the examples in the help files, I found them rather instructive. I also
> hope someone else chimes in to shed some light on whether or not that approach
> would be acceptable.
>
>
> Joris Meys
> Statistician
> T +32 9 264 61 79
>
> Department Data Analysis and Mathematical Modelling
>
> Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent,
> Belgium
> T administration office +32 9 264 59 32
>
> www.ugent.be
>
> e-maildisclaimer
>
>
> ________________________________________
> From: Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
> Sent: Thursday, April 9, 2020 5:30 PM
> To: Joris Meys; Jeff Newmiller; r-package-devel at r-project.org; Duncan
> Murdoch
> Subject: Re: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
> JuliaConnectoR 0.5.0
>
> Hi!
> Thanks for pointing to the package "namespace".
> I experimented with it but I couldn't really figure out how it is supposed to work:
>
> The following code leads to strange errors that I don't understand:
>
> > nse <- list2env(list(data="x", asdf = 2))
> > namespace::registerNamespace(name = "NewNamespace", env = nse)
> > NewNamespace::asdf
> Error in asNamespace(ns) : not a namespace
>
> It would really be interesting if someone could comment on whether the namespace
> approach is feasible, how it is supposed to work, and whether/how it would be
> better than using attach.
> Greetings!
> Stefan
>
>
> ----------------urspr?ngliche Nachricht-----------------
> Von: Joris Meys [Joris.Meys at ugent.be]
> An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de], Jeff Newmiller
> [jdnewmil at dcn.davis.ca.us], r-package-devel at r-project.org, Duncan
> Murdoch [murdoch.duncan at gmail.com]
> Datum: Thu, 9 Apr 2020 12:59:23 +0000
> -------------------------------------------------
>
>
>> Hi Stefan,
>>
>> first of all, thank you for taking the time and effort to link Julia and R. That
>> said, I would strongly encourage you to go for a reticulate-like approach.
>> There's a good reason for that. Once you start mixing languages, you really want
>> to have some indication what code is ran in what language. Especially since I can
>> imagine at one point there'll be a Julia function masking an R function of the same
>> name, and that is going to cause a world of hurt and confusion.
>>
>> If you don't like environments, you can try to use namespace functionality.
>> There's the "namespace" package that allows you to create one, and some internal
>> namespace functions are visible (eg namespaceExport() from base). That's
>> going to be the closest to mimicking R packages, but it's beyond my knowledge to
>> know how feasible this approach actually is. I hope someone else chimes in,
>> especially if this is dangerous for other reasons I overlooked.
>>
>> Kind regards
>> Joris
>>
>> Joris Meys
>> Statistician
>> T +32 9 264 61 79
>>
>> Department Data Analysis and Mathematical Modelling
>>
>> Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent,
>> Belgium
>> T administration office +32 9 264 59 32
>>
>> www.ugent.be
>>
>> e-maildisclaimer
>>
>>
>> ________________________________________
>> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf
>> of Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
>> Sent: Thursday, April 9, 2020 10:41 AM
>> To: Jeff Newmiller; r-package-devel at r-project.org; Duncan Murdoch
>> Subject: Re: [R-pkg-devel] [FWD] [CRAN-pretest-archived] CRAN submission
>> JuliaConnectoR 0.5.0
>>
>> It is important for me to get my package into CRAN.
>> I haven't gotten any answer from the CRAN maintainers. I already tried to submit a
>> version of the package before some months and haven't gotten any reply then.
>> The replies you gave me (thanks to all engaged in the discussion) were mixed.
>> I still think that the library-like import is a good feature, but if it is not
>> possible to get this package on CRAN with it, I will change it with returning an
>> environment like reticulate.
>> My question now is:
>> So what would be the process how to proceed?
>> Is there anybody who can make a decision in such cases?
>> Or do I make this decision myself after I lost hope that it will be accepted the way
>> it is now?
>>
>> Stefan
>>
>>
>> ----------------urspr?ngliche Nachricht-----------------
>> Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
>> An: Stefan Lenz IMBI [lenz at imbi.uni-freiburg.de],
>> r-package-devel at r-project.org, Duncan Murdoch
>> [murdoch.duncan at gmail.com]
>> Datum: Tue, 07 Apr 2020 09:52:52 -0700
>> -------------------------------------------------
>>
>>
>>> I did not say "interfere"... I said "problems with consistency". I don't think
>>> your wholesale import of functions without corresponding help pages is
>>> consistent with the normal use of R, which will make reading R code written with
>>> this mechanism in place a painful source of trouble for help forums.
>>>
>>> On the other hand, if the code is prefaced with an environment name then there will
>>> be no expectation that a help page should exist on the part of someone reading that
>>> code for the first time. (It will be no less obscure, but at least it won't be
>>> misleading.)
>>>
>>> On April 7, 2020 9:40:02 AM PDT, Stefan Lenz IMBI <lenz at imbi.uni-freiburg.de>
>>> wrote:
>>>>Thank you very much for your comment.
>>>>Could you elaborate how you think that it could interfere with the help
>>>>system?
>>>>I haven't yet connected the Julia help with the R help, as the R help
>>>>system is quite complex and RStudio handles it again differently. So
>>>>it's simply like the functions were declared on the command line. They
>>>>have no help.
>>>>A simply way to print the help for a Julia function, e.g. the function
>>>>"first", is to call
>>>> juliaEval("@doc first")
>>>>This then simply prints the output on the command line.
>>>>
>>>>
>>>>----------------urspr?ngliche Nachricht-----------------
>>>>Von: Jeff Newmiller [jdnewmil at dcn.davis.ca.us]
>>>>An: r-package-devel at r-project.org, Duncan Murdoch
>>>>[murdoch.duncan at gmail.com], Stefan Lenz IMBI
>>>>[lenz at imbi.uni-freiburg.de]
>>>>Datum: Mon, 06 Apr 2020 10:51:53 -0700
>>>>-------------------------------------------------
>>>>
>>>>
>>>>> One could take the position that the library and require functions
>>>>were a mistake
>>>>> to begin with and that all contributed packages should be accessed
>>>>using ::... or
>>>>> one could recognize that these functions are an expected feature of R
>>>>at this
>>>>> point and then it is not defensible to ban the proposed approach of
>>>>importing
>>>>> names as Stefan wants to. I don't think it is fair to require this
>>>>higher level of
>>>>> specificity just because it involves use of attach.
>>>>>
>>>>> That said, another feature of R packages is the integrated help
>>>>system...
>>>>> importing Julia functions wholesale may lead to problems with
>>>>consistency in
>>>>> navigating the help files. IMO it may be justifiable to ban this
>>>>particular
>>>>> syntactic convenience to maintain some separation in the minds of
>>>>users looking
>>>>> for help on these new functions, since the syntactic and semantic
>>>>structure of
>>>>> functions from another language may not align well with normal R
>>>>functions. But I
>>>>> am not familiar with Julia or Stefan's package or the support it
>>>>brings in this
>>>>> area... I just disagree with banning a "library" lookalike function
>>>>"just
>>>>> because" it happens to involve attach.
>>>>>
>>>>> On April 6, 2020 8:40:12 AM PDT, Duncan Murdoch
>>>><murdoch.duncan at gmail.com>
>>>>> wrote:
>>>>>>On 06/04/2020 11:25 a.m., Stefan Lenz IMBI wrote:
>>>>>>> Yes, as I wrote earlier, I would like to imitate the behaviour of
>>>>>>loading an R package
>>>>>>>
>>>>>>> juliaUsing("SomeJuliaPackage") # exports myJuliaFunction
>>>>>>> myJuliaFunction()
>>>>>>>
>>>>>>> like R:
>>>>>>>
>>>>>>> library("MyRPackage") # exports myRFunction
>>>>>>> myRFunction()
>>>>>>>
>>>>>>> I could return an environment, such that the call becomes
>>>>>>>
>>>>>>> attach(juliaUsing("SomeJuliaPackage"))
>>>>>>> myJuliaFunction()
>>>>>>
>>>>>>I wouldn't use it that way. I'd write it as
>>>>>>
>>>>>> sjp <- juliaUsing("SomeJuliaPackage")
>>>>>> sjp$myJuliaFunction()
>>>>>>
>>>>>>This is similar to the advice to use pkg::foo() rather than
>>>>>>library(pkg)
>>>>>>followed by plain foo() in the code.
>>>>>>
>>>>>>Duncan Murdoch
>>>>>>
>>>>>>>
>>>>>>> But calling juliaUsing(), as it is now, takes care that if a
>>>>package
>>>>>>is imported a second time,
>>>>>>> the first data base is removed via detach().
>>>>>>> This way, users do not have to worry about calling juliaUsing()
>>>>>>mutliple times in a script, same
>>>>>>> as R users don't have to worry about calling library() multiple
>>>>>>times.
>>>>>>> If you call the code with attach() multiple times and do not
>>>>detach,
>>>>>>you get your screen cluttered with
>>>>>>> warnings "xxx is masked by xxx".
>>>>>>> So I would say it would decrease user-friendliness to return an
>>>>>>environment.
>>>>>>> I also want to make explicit, that the call to attach
>>>>>>> occurs only once in my code, after creating the environment:
>>>>>>>
>>>>>>> envName <- paste0("JuliaConnectoR:", absoluteModulePath)
>>>>>>> if (envName %in% search()) {
>>>>>>> detach(envName, character.only = TRUE)
>>>>>>> }
>>>>>>> attach(funenv, name = envName)
>>>>>>>
>>>>>>> This code is only called by juliaImport() and juliaUsing(), which
>>>>>>aren't called by any other function of
>>>>>>> the package
>>>>>>> and are supposed to be called directly by the user.
>>>>>>>
>>>>>>> Stefan
>>>>>>>
>>>>>>> ----------------urspr?ngliche Nachricht-----------------
>>>>>>> Von: Duncan Murdoch [murdoch.duncan at gmail.com]
>>>>>>> An: Dirk Eddelbuettel [edd at debian.org], Ben Bolker
>>>>>>[bbolker at gmail.com]
>>>>>>> Kopie: List r-package-devel [r-package-devel at r-project.org]
>>>>>>> Datum: Mon, 6 Apr 2020 11:00:09 -0400
>>>>>>> -------------------------------------------------
>>>>>>>
>>>>>>>
>>>>>>>> On 06/04/2020 10:49 a.m., Dirk Eddelbuettel wrote:
>>>>>>>>>
>>>>>>>>> On 6 April 2020 at 08:38, Ben Bolker wrote:
>>>>>>>>> | Just reply to the CRAN maintainers and explain this situation.
>>>>>>It?s
>>>>>>>>> | slightly buried, but the e-mail you received does say:
>>>>>>>>> |
>>>>>>>>> | > If you are fairly certain the rejection is a false positive,
>>>>>>please reply-all to this
>>>>>>>>> | > message and explain.
>>>>>>>>>
>>>>>>>>> True, but this misses the "Letter of the law" versus the "Spirit
>>>>of
>>>>>>the law".
>>>>>>>>>
>>>>>>>>> It might be worth mentioning that use of attach() is seen, to
>>>>find
>>>>>>one poor
>>>>>>>>> analogy, pretty much like use of global variables these days.
>>>>"Just
>>>>>>because
>>>>>>>>> you could does not mean you should".
>>>>>>>>>
>>>>>>>>> See e.g. one of the first google hits for 'r do not use attach'
>>>>>>here:
>>>>>>>>>
>>>>>>https://stackoverflow.com/questions/10067680/why-is-it-not-advisable-to-use-attach-in-r-and-what-should-i-use-instead
>>>>>>>>
>>>>>>>> I don't have a strong opinion on this: the proposed use seems to
>>>>be
>>>>>>no
>>>>>>>> worse than library() or require(). Those are fine for users to
>>>>use,
>>>>>>but
>>>>>>>> are discouraged in a package. If the attach() never happens
>>>>without
>>>>>>an
>>>>>>>> explicit request from the user (and that's what it sounds like),
>>>>I'd
>>>>>>say
>>>>>>>> it's probably okay.
>>>>>>>>
>>>>>>>> However, there is an easy workaround: just return the environment
>>>>>>>> without attaching it. Then the user has the choice of attaching
>>>>it,
>>>>>>or
>>>>>>>> using it as a prefix when they call the functions in it. So it's
>>>>not
>>>>>>as
>>>>>>>> though this will destroy the utility of the package if Stefan
>>>>isn't
>>>>>>>> allowed to call attach().
>>>>>>>>
>>>>>>>> Duncan Murdoch
>>>>>>>>
>>>>>>>> ______________________________________________
>>>>>>>> R-package-devel at r-project.org mailing list
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>______________________________________________
>>>>>>R-package-devel at r-project.org mailing list
>>>>>>https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>
>>
>>
>> --
>>
>> Stefan Lenz
>>
>> Institut f?r Medizinische Biometrie und Statistik
>> Medizinische Fakult?t / Universit?tsklinikum Freiburg
>>
>> Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg
>>
>> Tel.: 0761/203-6670
>> E-Mail: lenz at imbi.uni-freiburg.de
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>
> --
>
> Stefan Lenz
>
> Institut f?r Medizinische Biometrie und Statistik
> Medizinische Fakult?t / Universit?tsklinikum Freiburg
>
> Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg
>
> Tel.: 0761/203-6670
> E-Mail: lenz at imbi.uni-freiburg.de
>


--

Stefan Lenz

Institut f?r Medizinische Biometrie und Statistik
Medizinische Fakult?t / Universit?tsklinikum Freiburg

Postadresse: Stefan-Meier-Str. 26, 79104 Freiburg

Tel.: 0761/203-6670
E-Mail: lenz at imbi.uni-freiburg.de


From |@w@onj@|7net @end|ng |rom gm@||@com  Thu Apr  9 21:28:49 2020
From: |@w@onj@|7net @end|ng |rom gm@||@com (John Lawson)
Date: Thu, 9 Apr 2020 13:28:49 -0600
Subject: [R-pkg-devel] manual inspection of new packages
Message-ID: <CAJiVmSBKg9OeVh5U76m9w+f6YWsruw4ZD9bMyX4ZpsxuY6Wpgg@mail.gmail.com>

I submitted the Package AQLSchemes on Dec 9, 2019. I corrected the errors
noted in the manual inspection and resubmitted it on Jan 9. I got the
message that it passed the automatic checks and was awaiting manual
inspection. I have not heard anything since.  Do I need to resubmitt the
package? Or how can I find out if this package is still in the queue for
manual inspection?

Thank you
John Lawson

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Thu Apr  9 21:33:13 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Thu, 9 Apr 2020 15:33:13 -0400
Subject: [R-pkg-devel] manual inspection of new packages
In-Reply-To: <CAJiVmSBKg9OeVh5U76m9w+f6YWsruw4ZD9bMyX4ZpsxuY6Wpgg@mail.gmail.com>
References: <CAJiVmSBKg9OeVh5U76m9w+f6YWsruw4ZD9bMyX4ZpsxuY6Wpgg@mail.gmail.com>
Message-ID: <18901446-8c10-1a39-008e-ff16745cba2f@gmail.com>

 ? foghorn::cran_incoming() will let you inspect the package queue.

 ? (most likely if the package has been sitting this long it's not ever 
going to move farther through the queue and you should resubmit.? An 
e-mail to the CRAN maintainers after you check the status would probably 
be appropriate.)


On 4/9/20 3:28 PM, John Lawson wrote:
> I submitted the Package AQLSchemes on Dec 9, 2019. I corrected the errors
> noted in the manual inspection and resubmitted it on Jan 9. I got the
> message that it passed the automatic checks and was awaiting manual
> inspection. I have not heard anything since.  Do I need to resubmitt the
> package? Or how can I find out if this package is still in the queue for
> manual inspection?
>
> Thank you
> John Lawson
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Apr  9 21:46:09 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 9 Apr 2020 15:46:09 -0400
Subject: [R-pkg-devel] manual inspection of new packages
In-Reply-To: <CAJiVmSBKg9OeVh5U76m9w+f6YWsruw4ZD9bMyX4ZpsxuY6Wpgg@mail.gmail.com>
References: <CAJiVmSBKg9OeVh5U76m9w+f6YWsruw4ZD9bMyX4ZpsxuY6Wpgg@mail.gmail.com>
Message-ID: <429ad5d3-2e10-a709-e976-5f0fd6e08afe@gmail.com>

On 09/04/2020 3:28 p.m., John Lawson wrote:
> I submitted the Package AQLSchemes on Dec 9, 2019. I corrected the errors
> noted in the manual inspection and resubmitted it on Jan 9. I got the
> message that it passed the automatic checks and was awaiting manual
> inspection. I have not heard anything since.  Do I need to resubmitt the
> package? Or how can I find out if this package is still in the queue for
> manual inspection?
> 

As the CRAN policy document says under Submission, you can see the queue 
by looking at ftp://cran.r-project.org/incoming/.  The foghorn package 
makes this really easy:  you run foghorn::cran_incoming("AQLSchemes") to 
see where your package is sitting.  It doesn't appear to be there at all.

Next time, I'd follow up if you go a week without hearing a reply; 
waiting 3 months seems a bit long.

Duncan Murdoch


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Apr 10 00:13:56 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 09 Apr 2020 15:13:56 -0700
Subject: [R-pkg-devel] Add SystemRequirements of imported package in
 description file?
In-Reply-To: <936BA237-CCC6-4006-B5FC-FEF0AEA60FD4@contoso.com>
References: <936BA237-CCC6-4006-B5FC-FEF0AEA60FD4@contoso.com>
Message-ID: <DD591087-3C32-45B9-8C8E-11846C1A49BD@dcn.davis.ca.us>

AFAIK, no, though if the upstream package cannot (or won't) be implemented without that system requirement and it really is a requirement for this package then you might want to indicate "libzzz via Package X" just to be clear for users. If it isn't a requirement for most of your functionality then you may want to use Suggests to alleviate the problem.

On April 9, 2020 12:51:56 AM PDT, Dominik Leutnant <leutnant at fh-muenster.de> wrote:
>Hi all,
>
>should ?SystemRequirements? of an imported package be listed in the
>description file of a package?
>
>General scenario:
>- Package X imports Package Y.
>- Package Y lists ?libzzz? as SystemRequirements.
>
>Should Package X list the SystemRequirements ?libzzz? as well?
>(question occurred @ https://github.com/dleutnant/influxdbr/issues/47)
>
>Thank you and happy easter!
>Dominik
>
>
>
>Dr. Dominik Leutnant
>Department of Civil Engineering
>Institute for Infrastucture?Water?Resources?Environment (IWARU)
>WG Urban Hydrology and Water Management
>
>Muenster University of Applied Sciences
>Corrensstr. 25
>FRG-48149 M?nster
>Germany
>
>Tel.:  +49 (0) 251/83-65274
>Mail:  leutnant at fh-muenster.de<mailto:leutnant at fh-muenster.de>
>Web: https://www.fh-muenster.de/
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From |@w@onj@|7net @end|ng |rom gm@||@com  Fri Apr 10 05:08:46 2020
From: |@w@onj@|7net @end|ng |rom gm@||@com (John Lawson)
Date: Thu, 9 Apr 2020 21:08:46 -0600
Subject: [R-pkg-devel] manual inspection of new packages
In-Reply-To: <429ad5d3-2e10-a709-e976-5f0fd6e08afe@gmail.com>
References: <CAJiVmSBKg9OeVh5U76m9w+f6YWsruw4ZD9bMyX4ZpsxuY6Wpgg@mail.gmail.com>
 <429ad5d3-2e10-a709-e976-5f0fd6e08afe@gmail.com>
Message-ID: <CAJiVmSCW=iUXSQ4koyPGv1M6zF2UeGW7HDMv7U8rjbr00niYEg@mail.gmail.com>

Ok, thanks.

On Thu, Apr 9, 2020 at 1:46 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 09/04/2020 3:28 p.m., John Lawson wrote:
> > I submitted the Package AQLSchemes on Dec 9, 2019. I corrected the errors
> > noted in the manual inspection and resubmitted it on Jan 9. I got the
> > message that it passed the automatic checks and was awaiting manual
> > inspection. I have not heard anything since.  Do I need to resubmitt the
> > package? Or how can I find out if this package is still in the queue for
> > manual inspection?
> >
>
> As the CRAN policy document says under Submission, you can see the queue
> by looking at ftp://cran.r-project.org/incoming/.  The foghorn package
> makes this really easy:  you run foghorn::cran_incoming("AQLSchemes") to
> see where your package is sitting.  It doesn't appear to be there at all.
>
> Next time, I'd follow up if you go a week without hearing a reply;
> waiting 3 months seems a bit long.
>
> Duncan Murdoch
>

	[[alternative HTML version deleted]]


From p@u|@de@n@b@||ey @end|ng |rom gm@||@com  Sat Apr 11 00:23:59 2020
From: p@u|@de@n@b@||ey @end|ng |rom gm@||@com (Paul Bailey)
Date: Fri, 10 Apr 2020 17:23:59 -0500
Subject: [R-pkg-devel] R CMD check fails on namespace load for an installed
 package
References: <BYAPR05MB565544AF3B69FC73B317AE6ABEDE0@BYAPR05MB5655.namprd05.prod.outlook.com>
Message-ID: <831CE732-A262-4534-9321-A0914FB0CC92@gmail.com>

When I try to R CMD check --as-cran the EdSurvey package for submission on R-devel I get this error:

> 
> * installing *source* package 'EdSurvey' ...
> ** using staged installation
> ** R
> ** inst
> ** byte-compile and prepare package for lazy loading
> Error: package or namespace load failed for 'car':
> package 'car' was installed before R 4.0.0: please re-install it
> Error: package 'car' could not be loaded
> Execution halted
> ERROR: lazy loading failed for package 'EdSurvey'
> * removing 'C:/Users/pbailey/Documents/GitHub/EdSurvey.Rcheck/EdSurvey'
>  


So, I went into R and tried installing car, and that  appears to exit cleanly (at end of message). But then I still got the same (above) message.

I made sure the .libPath was the one in R-devel/library.

What can I do to test my package on R-devel?


>  
> > install.packages("car")
> Warning: unable to access index for repository https://cloud.r-project.org/bin/windows/contrib/4.1: <https://cloud.r-project.org/bin/windows/contrib/4.1:>
>   cannot open URL 'https://cloud.r-project.org/bin/windows/contrib/4.1/PACKAGES <https://cloud.r-project.org/bin/windows/contrib/4.1/PACKAGES>'
> installing the source package ?car?
>  
> trying URL 'https://cloud.r-project.org/src/contrib/car_3.0-7.tar.gz <https://cloud.r-project.org/src/contrib/car_3.0-7.tar.gz>'
> Content type 'application/x-gzip' length 497735 bytes (486 KB)
> downloaded 486 KB
>  
> * installing *source* package 'car' ...
> ** package 'car' successfully unpacked and MD5 sums checked
> ** using staged installation
> ** R
> ** inst
> ** byte-compile and prepare package for lazy loading
> ** help
> *** installing help indices
>   converting help for package 'car'
>     finding HTML links ... done
>     Anova                                   html  
>     Boot                                    html  
>     Boxplot                                 html  
>     Contrasts                               html  
> Rd warning: C:/Users/pbailey/AppData/Local/Temp/1/Rtmpisyc8f/R.INSTALL3f14202022a7/car/man/Contrasts.Rd:68: file link 'contr.treatment' in package 'stats' does not exist and so has been treated as a topic
> Rd warning: C:/Users/pbailey/AppData/Local/Temp/1/Rtmpisyc8f/R.INSTALL3f14202022a7/car/man/Contrasts.Rd:68: file link 'contr.sum' in package 'stats' does not exist and so has been treated as a topic
> Rd warning: C:/Users/pbailey/AppData/Local/Temp/1/Rtmpisyc8f/R.INSTALL3f14202022a7/car/man/Contrasts.Rd:69: file link 'contr.helmert' in package 'stats' does not exist and so has been treated as a topic
> Rd warning: C:/Users/pbailey/AppData/Local/Temp/1/Rtmpisyc8f/R.INSTALL3f14202022a7/car/man/Contrasts.Rd:69: file link 'contr.poly' in package 'stats' does not exist and so has been treated as a topic
>     Ellipses                                html  
>     Export                                  html  
>     Import                                  html  
>     Predict                                 html  
>     S                                       html  
>     ScatterplotSmoothers                    html  
>     Tapply                                  html  
>     TransformationAxes                      html  
>     avPlots                                 html  
>     bcPower                                 html  
>     boxCox                                  html  
>     boxCoxVariable                          html  
>     boxTidwell                              html  
>     brief                                   html  
>     car-defunct                             html  
>     car-deprecated                          html  
>     car-internal                            html  
>     carHexsticker                           html  
>     carPalette                              html  
>     carWeb                                  html  
>     ceresPlots                              html  
>     compareCoefs                            html  
>     crPlots                                 html  
>     deltaMethod                             html  
>     densityPlot                             html  
>     dfbetaPlots                             html  
>     durbinWatsonTest                        html  
>     hccm                                    html  
>     hist.boot                               html  
>     infIndexPlot                            html  
>     influence-mixed-models                  html  
>     influencePlot                           html  
> Rd warning: C:/Users/pbailey/AppData/Local/Temp/1/Rtmpisyc8f/R.INSTALL3f14202022a7/car/man/influencePlot.Rd:57: file link 'cooks.distance' in package 'stats' does not exist and so has been treated as a topic
> Rd warning: C:/Users/pbailey/AppData/Local/Temp/1/Rtmpisyc8f/R.INSTALL3f14202022a7/car/man/influencePlot.Rd:57: file link 'rstudent' in package 'stats' does not exist and so has been treated as a topic
> Rd warning: C:/Users/pbailey/AppData/Local/Temp/1/Rtmpisyc8f/R.INSTALL3f14202022a7/car/man/influencePlot.Rd:58: file link 'hatvalues' in package 'stats' does not exist and so has been treated as a topic
>     invResPlot                              html  
>     invTranPlot                             html  
>     leveneTest                              html  
>     leveragePlots                           html  
>     linearHypothesis                        html  
>     logit                                   html  
>     marginalModelPlot                       html  
>     mcPlots                                 html  
>     ncvTest                                 html  
>     outlierTest                             html  
>     panel.car                               html  
>     poTest                                  html  
>     powerTransform                          html  
>     qqPlot                                  html  
> Rd warning: C:/Users/pbailey/AppData/Local/Temp/1/Rtmpisyc8f/R.INSTALL3f14202022a7/car/man/qqPlot.Rd:124: file link 'qqplot' in package 'stats' does not exist and so has been treated as a topic
> Rd warning: C:/Users/pbailey/AppData/Local/Temp/1/Rtmpisyc8f/R.INSTALL3f14202022a7/car/man/qqPlot.Rd:125: file link 'qqline' in package 'stats' does not exist and so has been treated as a topic
>     recode                                  html  
>     regLine                                 html  
>     residualPlots                           html  
>     scatter3d                               html  
>     scatterplot                             html  
>     finding level-2 HTML links ... done
>  
>     scatterplotMatrix                       html  
>     showLabels                              html  
>     sigmaHat                                html  
>     some                                    html  
> Rd warning: C:/Users/pbailey/AppData/Local/Temp/1/Rtmpisyc8f/R.INSTALL3f14202022a7/car/man/some.Rd:48: file link 'tail' in package 'utils' does not exist and so has been treated as a topic
>     spreadLevelPlot                         html  
>     subsets                                 html  
>     symbox                                  html  
>     testTransform                           html  
>     vif                                     html  
>     wcrossprod                              html  
>     which.names                             html  
> ** building package indices
> ** installing vignettes
> ** testing if installed package can be loaded from temporary location
> *** arch - i386
> *** arch - x64
> ** testing if installed package can be loaded from final location
> *** arch - i386
> *** arch - x64
> ** testing if installed package keeps a record of temporary installation path
> * DONE (car)
>  
> The downloaded source packages are in
>         ?C:\Users\pbailey\AppData\Local\Temp\1\RtmpWiUQtf\downloaded_packages?


	[[alternative HTML version deleted]]


From |ro@o @end|ng |rom un@|@edu@co  Sat Apr 11 22:58:43 2020
From: |ro@o @end|ng |rom un@|@edu@co (Fernando Roa)
Date: Sat, 11 Apr 2020 17:58:43 -0300
Subject: [R-pkg-devel] vignette warning in r-patched os-x
Message-ID: <CA+fi=+kgWhanLUWQFoPdK4pbx93f9HGVsCNEnpvaW8pzo8insA@mail.gmail.com>

Hello,
All packages with vignettes are having this error in r-patched-osx-x86_64:

    dyld: Symbol not found: ____chkstk_darwin
     Referenced from: /usr/local/bin/pandoc (which was built for Mac OS X
10.15)
     Expected in: /usr/lib/libSystem.B.dylib

    Error: processing vignette 'topography.Rmd' failed with diagnostics:
    pandoc document conversion failed with error 6
    --- failed re-building ?topography.Rmd?

For example:
https://cran.r-project.org/web/checks/check_results_mdsumner_at_gmail.com.html
https://cran.r-project.org/web/checks/check_results_santaR.html

I wonder if it will affect future submissions (having the same error in 2
submissions)

best,
-- 
Fernando Roa

	[[alternative HTML version deleted]]


From |p@|om@re@ @end|ng |rom correo@ugr@e@  Mon Apr 13 12:29:50 2020
From: |p@|om@re@ @end|ng |rom correo@ugr@e@ (Francisco Palomares)
Date: Mon, 13 Apr 2020 12:29:50 +0200
Subject: [R-pkg-devel] Update my package
Message-ID: <c9a524dd2270650326dde7cb06416edb@correo.ugr.es>


Hi,

I want to update the version of my package

What is the procedure?

Best,
Francisco


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Mon Apr 13 13:07:46 2020
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Mon, 13 Apr 2020 12:07:46 +0100
Subject: [R-pkg-devel] Update my package
In-Reply-To: <c9a524dd2270650326dde7cb06416edb@correo.ugr.es>
References: <c9a524dd2270650326dde7cb06416edb@correo.ugr.es>
Message-ID: <1f8e399a-4a25-69be-b685-359a51dcf420@dewey.myzen.co.uk>

Dear Francisco

It is hard to answer this without more details. If you mean to update a 
package which you have on CRAN then the CRAN policy document has a short 
section on re-submission at the very end. If it is a private package not 
for distribution then you just update the version in the DESCRIPTION file.

Michael

On 13/04/2020 11:29, Francisco Palomares wrote:
> 
> Hi,
> 
> I want to update the version of my package
> 
> What is the procedure?
> 
> Best,
> Francisco
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Apr 14 11:03:58 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 14 Apr 2020 11:03:58 +0200
Subject: [R-pkg-devel] manual inspection of new packages
In-Reply-To: <CAJiVmSCW=iUXSQ4koyPGv1M6zF2UeGW7HDMv7U8rjbr00niYEg@mail.gmail.com>
References: <CAJiVmSBKg9OeVh5U76m9w+f6YWsruw4ZD9bMyX4ZpsxuY6Wpgg@mail.gmail.com>
 <429ad5d3-2e10-a709-e976-5f0fd6e08afe@gmail.com>
 <CAJiVmSCW=iUXSQ4koyPGv1M6zF2UeGW7HDMv7U8rjbr00niYEg@mail.gmail.com>
Message-ID: <4ed1fb9f-ad38-5467-2b48-d6e07cf4ebbf@statistik.tu-dortmund.de>

I just looked, you got a repsonse from Swetlana Herbrandt on Dec 16.
Will forward privately.

Best,
Uwe Ligges





On 10.04.2020 05:08, John Lawson wrote:
> Ok, thanks.
> 
> On Thu, Apr 9, 2020 at 1:46 PM Duncan Murdoch <murdoch.duncan at gmail.com>
> wrote:
> 
>> On 09/04/2020 3:28 p.m., John Lawson wrote:
>>> I submitted the Package AQLSchemes on Dec 9, 2019. I corrected the errors
>>> noted in the manual inspection and resubmitted it on Jan 9. I got the
>>> message that it passed the automatic checks and was awaiting manual
>>> inspection. I have not heard anything since.  Do I need to resubmitt the
>>> package? Or how can I find out if this package is still in the queue for
>>> manual inspection?
>>>
>>
>> As the CRAN policy document says under Submission, you can see the queue
>> by looking at ftp://cran.r-project.org/incoming/.  The foghorn package
>> makes this really easy:  you run foghorn::cran_incoming("AQLSchemes") to
>> see where your package is sitting.  It doesn't appear to be there at all.
>>
>> Next time, I'd follow up if you go a week without hearing a reply;
>> waiting 3 months seems a bit long.
>>
>> Duncan Murdoch
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From konr@d@rudo|ph @end|ng |rom gm@||@com  Tue Apr 14 12:23:07 2020
From: konr@d@rudo|ph @end|ng |rom gm@||@com (Konrad Rudolph)
Date: Tue, 14 Apr 2020 11:23:07 +0100
Subject: [R-pkg-devel] R CMD check failure during vignette rebuilding
Message-ID: <CAM2gKPZfgke_+p5ZGhmWpmRXV=+ccykxgFtuhuwSqiTn5frb1g@mail.gmail.com>

I have a package vignette that reproducibly fails the second time
round in `R CMD check`, in the ?checking re-building of vignette
outputs? step.

I have uploaded a small reprex to GitHub [1]. But in a nutshell the
vignette contains a subfolder `foo`, and a file `foo/bar`. And the
`test.rmd` vignette contains the following R code:

> newfile = file.path(getwd(), 'foo', 'baz')
> writeLines('baz', newfile)

This code causes `R CMD check` to delete the folder `foo` inside
`00_pkg_src/vignettes` after building the vignette, leading to the
following error message further down the line:

>   Error(s) in re-building vignettes:
>     ...
>   --- re-building ?test.rmd? using rmarkdown
>   Quitting from lines 8-10 (test.rmd)
>   Error: processing vignette 'test.rmd' failed with diagnostics:
>   cannot open the connection
>   --- failed re-building ?test.rmd?

This seems to be due to the cleanup after building vignettes inside
`tools::buildVignette`, because creating a file inside a folder
changes the directory subfolder modification time (on POSIX-like
systems) so the whole folder is deleted in cleanup, rather than just
the file. Can I prevent this?

[1] https://github.com/klmr/vignettetest

-- 
Konrad Rudolph // @klmr


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Apr 14 14:11:15 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 14 Apr 2020 14:11:15 +0200
Subject: [R-pkg-devel] Windows specific install error
In-Reply-To: <BL0PR04MB6609C9BDFED98E6FD684D69EF9C30@BL0PR04MB6609.namprd04.prod.outlook.com>
References: <CAD9kV-LGosh0NoV90pYv3UuRSAaVwMpmxJLqvV4wyMSXaF538w@mail.gmail.com>
 <BL0PR04MB6609C9BDFED98E6FD684D69EF9C30@BL0PR04MB6609.namprd04.prod.outlook.com>
Message-ID: <e26a5f3f-34e7-fc69-88d4-134177171566@statistik.tu-dortmund.de>

Yes, should be fixed by tmorrow,
Uwe


On 08.04.2020 00:16, Martin Morgan wrote:
> This is the same as
> 
>    https://stat.ethz.ch/pipermail/r-package-devel/2020q1/005256.html
> 
> and due I believe to stale packages on the CRAN windows builder; the solution is I believe on the CRAN side.
> 
> Martin Morgan
> 
> ?On 4/7/20, 6:14 PM, "R-package-devel on behalf of Ryan Sartor" <r-package-devel-bounces at r-project.org on behalf of sartorry at gmail.com> wrote:
> 
>      Hello everyone,
>      
>      My package seems to pass all the CRAN checks for Linux but fails to install
>      on Windows. This is the contents of 00install.out:
>      
>      * installing *source* package 'DiPALM' ...
>      ** using staged installation
>      ** R
>      ** data
>      ** inst
>      ** byte-compile and prepare package for lazy loading
>      Error: .onLoad failed in loadNamespace() for 'S4Vectors', details:
>        call: validObject(.Object)
>        error: invalid class "LLint" object: superclass "integer_OR_LLint"
>      not defined in the environment of the object's class
>      Execution halted
>      ERROR: lazy loading failed for package 'DiPALM'
>      * removing 'd:/RCompile/CRANincoming/R-devel/lib/DiPALM'
>      
>      
>      If I understand the error, it's saying that the CRAN server cannot
>      load the S4Vectors package because one of classes it depends on is not
>      defined. I'm guessing this is a namespace issue? I've taken a few
>      shots at adding directives to my NAMESPACE file but obviously I don't
>      know what I'm doing or maybe the error has nothing to do with my
>      package namespace.
>      
>      Any insight would be greatly appreciated.
>      
>      Thank you!
>      
>      	[[alternative HTML version deleted]]
>      
>      ______________________________________________
>      R-package-devel at r-project.org mailing list
>      https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Apr 14 14:53:02 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 14 Apr 2020 08:53:02 -0400
Subject: [R-pkg-devel] R CMD check failure during vignette rebuilding
In-Reply-To: <CAM2gKPZfgke_+p5ZGhmWpmRXV=+ccykxgFtuhuwSqiTn5frb1g@mail.gmail.com>
References: <CAM2gKPZfgke_+p5ZGhmWpmRXV=+ccykxgFtuhuwSqiTn5frb1g@mail.gmail.com>
Message-ID: <56680cce-7733-a647-0acc-b89b1e29275c@gmail.com>

On 14/04/2020 6:23 a.m., Konrad Rudolph wrote:
> I have a package vignette that reproducibly fails the second time
> round in `R CMD check`, in the ?checking re-building of vignette
> outputs? step.
> 
> I have uploaded a small reprex to GitHub [1]. But in a nutshell the
> vignette contains a subfolder `foo`, and a file `foo/bar`. And the
> `test.rmd` vignette contains the following R code:
> 
>> newfile = file.path(getwd(), 'foo', 'baz')
>> writeLines('baz', newfile)
> 
> This code causes `R CMD check` to delete the folder `foo` inside
> `00_pkg_src/vignettes` after building the vignette, leading to the
> following error message further down the line:
> 
>>    Error(s) in re-building vignettes:
>>      ...
>>    --- re-building ?test.rmd? using rmarkdown
>>    Quitting from lines 8-10 (test.rmd)
>>    Error: processing vignette 'test.rmd' failed with diagnostics:
>>    cannot open the connection
>>    --- failed re-building ?test.rmd?
> 
> This seems to be due to the cleanup after building vignettes inside
> `tools::buildVignette`, because creating a file inside a folder
> changes the directory subfolder modification time (on POSIX-like
> systems) so the whole folder is deleted in cleanup, rather than just
> the file. Can I prevent this?
> 
> [1] https://github.com/klmr/vignettetest
> 

Normally the checks don't want you to be writing files outside of the 
temp dir, because if a user processed your vignette, it might stomp on 
their files.  So can't you change that code to

   dir.create(tempdir(), 'foo')
   newfile <- file.path(tempdir(), 'foo', 'baz')

Duncan Murdoch


From konr@d@rudo|ph @end|ng |rom gm@||@com  Tue Apr 14 18:22:02 2020
From: konr@d@rudo|ph @end|ng |rom gm@||@com (Konrad Rudolph)
Date: Tue, 14 Apr 2020 17:22:02 +0100
Subject: [R-pkg-devel] R CMD check failure during vignette rebuilding
In-Reply-To: <56680cce-7733-a647-0acc-b89b1e29275c@gmail.com>
References: <CAM2gKPZfgke_+p5ZGhmWpmRXV=+ccykxgFtuhuwSqiTn5frb1g@mail.gmail.com>
 <56680cce-7733-a647-0acc-b89b1e29275c@gmail.com>
Message-ID: <CAM2gKPbLweJXV0kR0_BXF5ciya0K5q0FNj-quVNRQnubKNcyxw@mail.gmail.com>

Hi Duncan,

Thanks for the explanation. Using a temporary directory is what I?m
doing at the moment as a workaround.

What confused me was that `R CMD check` *already* works inside a new
directory (a set of different ones, in fact), and it doesn?t seem to
be documented anywhere that this is the intended behaviour (the
documentation of `buildVignettes` only mentions it removes ?newly
created ? files?, not existing folders), so I thought creating
temporary files under `vignettes` was fair game. Could you clarify
whether this behaviour (deleting existing folders during cleanup) is
intentional? If so, could it be documented more explicitly??


On Tue, Apr 14, 2020 at 1:53 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 14/04/2020 6:23 a.m., Konrad Rudolph wrote:
> > I have a package vignette that reproducibly fails the second time
> > round in `R CMD check`, in the ?checking re-building of vignette
> > outputs? step.
> >
> > I have uploaded a small reprex to GitHub [1]. But in a nutshell the
> > vignette contains a subfolder `foo`, and a file `foo/bar`. And the
> > `test.rmd` vignette contains the following R code:
> >
> >> newfile = file.path(getwd(), 'foo', 'baz')
> >> writeLines('baz', newfile)
> >
> > This code causes `R CMD check` to delete the folder `foo` inside
> > `00_pkg_src/vignettes` after building the vignette, leading to the
> > following error message further down the line:
> >
> >>    Error(s) in re-building vignettes:
> >>      ...
> >>    --- re-building ?test.rmd? using rmarkdown
> >>    Quitting from lines 8-10 (test.rmd)
> >>    Error: processing vignette 'test.rmd' failed with diagnostics:
> >>    cannot open the connection
> >>    --- failed re-building ?test.rmd?
> >
> > This seems to be due to the cleanup after building vignettes inside
> > `tools::buildVignette`, because creating a file inside a folder
> > changes the directory subfolder modification time (on POSIX-like
> > systems) so the whole folder is deleted in cleanup, rather than just
> > the file. Can I prevent this?
> >
> > [1] https://github.com/klmr/vignettetest
> >
>
> Normally the checks don't want you to be writing files outside of the
> temp dir, because if a user processed your vignette, it might stomp on
> their files.  So can't you change that code to
>
>    dir.create(tempdir(), 'foo')
>    newfile <- file.path(tempdir(), 'foo', 'baz')
>
> Duncan Murdoch



--
Konrad Rudolph // @klmr


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Apr 14 18:38:04 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 14 Apr 2020 12:38:04 -0400
Subject: [R-pkg-devel] R CMD check failure during vignette rebuilding
In-Reply-To: <CAM2gKPbLweJXV0kR0_BXF5ciya0K5q0FNj-quVNRQnubKNcyxw@mail.gmail.com>
References: <CAM2gKPZfgke_+p5ZGhmWpmRXV=+ccykxgFtuhuwSqiTn5frb1g@mail.gmail.com>
 <56680cce-7733-a647-0acc-b89b1e29275c@gmail.com>
 <CAM2gKPbLweJXV0kR0_BXF5ciya0K5q0FNj-quVNRQnubKNcyxw@mail.gmail.com>
Message-ID: <d36caadf-9018-590e-8918-5e37a98534c1@gmail.com>

No, I can't tell you whether the behaviour you saw was intentional or 
not, I didn't write it.  But the CRAN policy (which is the motivation 
for many of the checks) says "Packages should not write in the user?s 
home filespace (including clipboards), nor anywhere else on the file 
system apart from the R session?s temporary directory (or during 
installation in the location pointed to by TMPDIR: and such usage should 
be cleaned up)."

Duncan Murdoch

On 14/04/2020 12:22 p.m., Konrad Rudolph wrote:
> Hi Duncan,
> 
> Thanks for the explanation. Using a temporary directory is what I?m
> doing at the moment as a workaround.
> 
> What confused me was that `R CMD check` *already* works inside a new
> directory (a set of different ones, in fact), and it doesn?t seem to
> be documented anywhere that this is the intended behaviour (the
> documentation of `buildVignettes` only mentions it removes ?newly
> created ? files?, not existing folders), so I thought creating
> temporary files under `vignettes` was fair game. Could you clarify
> whether this behaviour (deleting existing folders during cleanup) is
> intentional? If so, could it be documented more explicitly??
> 
> 
> On Tue, Apr 14, 2020 at 1:53 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> On 14/04/2020 6:23 a.m., Konrad Rudolph wrote:
>>> I have a package vignette that reproducibly fails the second time
>>> round in `R CMD check`, in the ?checking re-building of vignette
>>> outputs? step.
>>>
>>> I have uploaded a small reprex to GitHub [1]. But in a nutshell the
>>> vignette contains a subfolder `foo`, and a file `foo/bar`. And the
>>> `test.rmd` vignette contains the following R code:
>>>
>>>> newfile = file.path(getwd(), 'foo', 'baz')
>>>> writeLines('baz', newfile)
>>>
>>> This code causes `R CMD check` to delete the folder `foo` inside
>>> `00_pkg_src/vignettes` after building the vignette, leading to the
>>> following error message further down the line:
>>>
>>>>     Error(s) in re-building vignettes:
>>>>       ...
>>>>     --- re-building ?test.rmd? using rmarkdown
>>>>     Quitting from lines 8-10 (test.rmd)
>>>>     Error: processing vignette 'test.rmd' failed with diagnostics:
>>>>     cannot open the connection
>>>>     --- failed re-building ?test.rmd?
>>>
>>> This seems to be due to the cleanup after building vignettes inside
>>> `tools::buildVignette`, because creating a file inside a folder
>>> changes the directory subfolder modification time (on POSIX-like
>>> systems) so the whole folder is deleted in cleanup, rather than just
>>> the file. Can I prevent this?
>>>
>>> [1] https://github.com/klmr/vignettetest
>>>
>>
>> Normally the checks don't want you to be writing files outside of the
>> temp dir, because if a user processed your vignette, it might stomp on
>> their files.  So can't you change that code to
>>
>>     dir.create(tempdir(), 'foo')
>>     newfile <- file.path(tempdir(), 'foo', 'baz')
>>
>> Duncan Murdoch
> 
> 
> 
> --
> Konrad Rudolph // @klmr
>


From p@u|@@@v@ry @end|ng |rom un|v-|comte@|r  Wed Apr 15 11:14:48 2020
From: p@u|@@@v@ry @end|ng |rom un|v-|comte@|r (Paul SAVARY)
Date: Wed, 15 Apr 2020 11:14:48 +0200 (CEST)
Subject: [R-pkg-devel] Error vignette rebuilding and package imports when
 re-submitting package
Message-ID: <325213815.42520131.1586942087995.JavaMail.zimbra@univ-fcomte.fr>

Hello, 

I'm having trouble re-submitting a package (graph4lg). 

- With r-patched_osx, vignette rebuilding fails with the following message : 

checking re-building of vignette outputs ... [12s/16s] WARNING 
Error(s) in re-building vignettes: 
... 
--- re-building ?vignette_graph4lg.Rmd? using rmarkdown 
dyld: lazy symbol binding failed: Symbol not found: ____chkstk_darwin 
Referenced from: /usr/local/bin/pandoc (which was built for Mac OS X 10.15) 
Expected in: /usr/lib/libSystem.B.dylib 

dyld: Symbol not found: ____chkstk_darwin 
Referenced from: /usr/local/bin/pandoc (which was built for Mac OS X 10.15) 
Expected in: /usr/lib/libSystem.B.dylib 

Error: processing vignette 'vignette_graph4lg.Rmd' failed with diagnostics: 
pandoc document conversion failed with error 6 
--- failed re-building ?vignette_graph4lg.Rmd? 

SUMMARY: processing the following file failed: 
?vignette_graph4lg.Rmd? 

Error: Vignette re-building failed. 
Execution halted 

- Besides, although I removed some unused packages from the imports in DESCRIPTION file, I still obtain this message : 

checking dependencies in R code ... NOTE 
Namespaces in Imports field not imported from: 
?Imap? ?Rdpack? ?ade4? ?doBy? ?mclust? 
All declared Imports should be used. 

Except Rdpack which is needed to build the vignette, I removed these packages. 

Finally, although I submit version 0.4.0, I receive checking errors relative to version 0.3.0. 

I thank you in advance for your feedbacks. 
Regards 
Paul Savary 







	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Apr 15 16:04:05 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 15 Apr 2020 10:04:05 -0400
Subject: [R-pkg-devel] 
 Error vignette rebuilding and package imports when
 re-submitting package
In-Reply-To: <325213815.42520131.1586942087995.JavaMail.zimbra@univ-fcomte.fr>
References: <325213815.42520131.1586942087995.JavaMail.zimbra@univ-fcomte.fr>
Message-ID: <235954c4-97d3-9657-c9b2-fe03fa8af35e@gmail.com>

On 15/04/2020 5:14 a.m., Paul SAVARY wrote:
> Hello,
> 
> I'm having trouble re-submitting a package (graph4lg).
> 
> - With r-patched_osx, vignette rebuilding fails with the following message :
> 
> checking re-building of vignette outputs ... [12s/16s] WARNING
> Error(s) in re-building vignettes:
> ...
> --- re-building ?vignette_graph4lg.Rmd? using rmarkdown
> dyld: lazy symbol binding failed: Symbol not found: ____chkstk_darwin
> Referenced from: /usr/local/bin/pandoc (which was built for Mac OS X 10.15)
> Expected in: /usr/lib/libSystem.B.dylib
> 
> dyld: Symbol not found: ____chkstk_darwin
> Referenced from: /usr/local/bin/pandoc (which was built for Mac OS X 10.15)
> Expected in: /usr/lib/libSystem.B.dylib
> 
> Error: processing vignette 'vignette_graph4lg.Rmd' failed with diagnostics:
> pandoc document conversion failed with error 6
> --- failed re-building ?vignette_graph4lg.Rmd?
> 
> SUMMARY: processing the following file failed:
> ?vignette_graph4lg.Rmd?
> 
> Error: Vignette re-building failed.
> Execution halted

I was told this was a transient problem on the MacOS build system:  the 
pandoc installed there was defective.  I don't know if it has been fixed 
yet.

> 
> - Besides, although I removed some unused packages from the imports in DESCRIPTION file, I still obtain this message :
> 
> checking dependencies in R code ... NOTE
> Namespaces in Imports field not imported from:
> ?Imap? ?Rdpack? ?ade4? ?doBy? ?mclust?
> All declared Imports should be used.
> 
> Except Rdpack which is needed to build the vignette, I removed these packages.

Generally something needed only for the vignettes should be in Suggests 
rather than Imports.

> Finally, although I submit version 0.4.0, I receive checking errors relative to version 0.3.0.

It sounds like someone slipped up.  It might have been you (sending the 
wrong file, or looking at the wrong check log), or maybe CRAN.  In 
either case, I don't think there's anything you can do other than check 
that you're submitting the right file (use a new version number) after 
fixing the Rdpack issue.

Duncan Murdoch
> 
> I thank you in advance for your feedbacks.
> Regards
> Paul Savary
> 
> 
> 
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Thu Apr 16 09:29:58 2020
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Thu, 16 Apr 2020 07:29:58 +0000
Subject: [R-pkg-devel] 
 Error vignette rebuilding and package imports when
 re-submitting package
In-Reply-To: <325213815.42520131.1586942087995.JavaMail.zimbra@univ-fcomte.fr>
References: <325213815.42520131.1586942087995.JavaMail.zimbra@univ-fcomte.fr>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E01D8A72D21@MBXP03.ds.man.ac.uk>

Just add 

importFrom(Rdpack,  reprompt) 

in the NAMESPACE file (any function from Rdpack will do). 

Georgi Boshnakov

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Paul SAVARY
Sent: 15 April 2020 10:15
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Error vignette rebuilding and package imports when re-submitting package

Hello, 

I'm having trouble re-submitting a package (graph4lg). 

- With r-patched_osx, vignette rebuilding fails with the following message : 

checking re-building of vignette outputs ... [12s/16s] WARNING
Error(s) in re-building vignettes: 
... 
--- re-building ?vignette_graph4lg.Rmd? using rmarkdown
dyld: lazy symbol binding failed: Symbol not found: ____chkstk_darwin Referenced from: /usr/local/bin/pandoc (which was built for Mac OS X 10.15) Expected in: /usr/lib/libSystem.B.dylib 

dyld: Symbol not found: ____chkstk_darwin Referenced from: /usr/local/bin/pandoc (which was built for Mac OS X 10.15) Expected in: /usr/lib/libSystem.B.dylib 

Error: processing vignette 'vignette_graph4lg.Rmd' failed with diagnostics: 
pandoc document conversion failed with error 6
--- failed re-building ?vignette_graph4lg.Rmd? 

SUMMARY: processing the following file failed: 
?vignette_graph4lg.Rmd? 

Error: Vignette re-building failed. 
Execution halted 

- Besides, although I removed some unused packages from the imports in DESCRIPTION file, I still obtain this message : 

checking dependencies in R code ... NOTE Namespaces in Imports field not imported from: 
?Imap? ?Rdpack? ?ade4? ?doBy? ?mclust? 
All declared Imports should be used. 

Except Rdpack which is needed to build the vignette, I removed these packages. 

Finally, although I submit version 0.4.0, I receive checking errors relative to version 0.3.0. 

I thank you in advance for your feedbacks. 
Regards
Paul Savary 







	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

From |ro@o @end|ng |rom un@|@edu@co  Thu Apr 16 13:37:44 2020
From: |ro@o @end|ng |rom un@|@edu@co (Fernando Roa)
Date: Thu, 16 Apr 2020 08:37:44 -0300
Subject: [R-pkg-devel] 
 Error vignette rebuilding and package imports when
 re-submitting package
In-Reply-To: <325213815.42520131.1586942087995.JavaMail.zimbra@univ-fcomte.fr>
References: <325213815.42520131.1586942087995.JavaMail.zimbra@univ-fcomte.fr>
Message-ID: <CA+fi=+mm+Ud4guudKfv0PDBOCW=SsQHi_xZ5wT6kgcmCeqnTLw@mail.gmail.com>

Related thread:
https://stat.ethz.ch/pipermail/r-package-devel/2020q2/005300.html
best,

On Wed, Apr 15, 2020 at 9:13 AM Paul SAVARY <paul.savary at univ-fcomte.fr>
wrote:

> Hello,
>
> I'm having trouble re-submitting a package (graph4lg).
>
> - With r-patched_osx, vignette rebuilding fails with the following message
> :
>
> checking re-building of vignette outputs ... [12s/16s] WARNING
> Error(s) in re-building vignettes:
> ...
> --- re-building ?vignette_graph4lg.Rmd? using rmarkdown
> dyld: lazy symbol binding failed: Symbol not found: ____chkstk_darwin
> Referenced from: /usr/local/bin/pandoc (which was built for Mac OS X
> 10.15)
> Expected in: /usr/lib/libSystem.B.dylib
>
> dyld: Symbol not found: ____chkstk_darwin
> Referenced from: /usr/local/bin/pandoc (which was built for Mac OS X
> 10.15)
> Expected in: /usr/lib/libSystem.B.dylib
>
> Error: processing vignette 'vignette_graph4lg.Rmd' failed with
> diagnostics:
> pandoc document conversion failed with error 6
> --- failed re-building ?vignette_graph4lg.Rmd?
>
> SUMMARY: processing the following file failed:
> ?vignette_graph4lg.Rmd?
>
> Error: Vignette re-building failed.
> Execution halted
>
> - Besides, although I removed some unused packages from the imports in
> DESCRIPTION file, I still obtain this message :
>
> checking dependencies in R code ... NOTE
> Namespaces in Imports field not imported from:
> ?Imap? ?Rdpack? ?ade4? ?doBy? ?mclust?
> All declared Imports should be used.
>
> Except Rdpack which is needed to build the vignette, I removed these
> packages.
>
> Finally, although I submit version 0.4.0, I receive checking errors
> relative to version 0.3.0.
>
> I thank you in advance for your feedbacks.
> Regards
> Paul Savary
>
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Fernando Roa

	[[alternative HTML version deleted]]


From d@z@mor@@ @end|ng |rom un@|@edu@co  Thu Apr 16 19:11:25 2020
From: d@z@mor@@ @end|ng |rom un@|@edu@co (David Andres Zamora Avila)
Date: Thu, 16 Apr 2020 12:11:25 -0500
Subject: [R-pkg-devel] Detritus in temp directory - Note from submission of
 R package in CRAN
Message-ID: <CAJ+nqZ6f_8SBf3mm4xF13+GF4pJJmW6qfhAqLO5-i5nZ=3EpGA@mail.gmail.com>

 Hi,

I submitted my package in CRAN and always appearance the next NOTE.

Flavor: r-devel-linux-x86_64-debian-gcc
Check: for detritus in the temp directory, Result: NOTE
  Found the following files/directories:
    'RtmpcDoRWjr.nc'

I have tried to solve it in several ways (like if(interactive()), but I not
sure how can I solve it.

Thanks.

Kind regards


-- 

David Zamora <https://sites.google.com/a/unal.edu.co/dazamoraa/>
PhD Student, Universidad Nacional de Colombia, Bogot?
phone: +571 3165000 ext 13406
address: Av. NQS (Carrera 30) # 45-03, Hydraulics Lab (408-213)
email: dazamoraa at unal.edu.co

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Apr 16 20:09:19 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 16 Apr 2020 14:09:19 -0400
Subject: [R-pkg-devel] 
 Detritus in temp directory - Note from submission of
 R package in CRAN
In-Reply-To: <CAJ+nqZ6f_8SBf3mm4xF13+GF4pJJmW6qfhAqLO5-i5nZ=3EpGA@mail.gmail.com>
References: <CAJ+nqZ6f_8SBf3mm4xF13+GF4pJJmW6qfhAqLO5-i5nZ=3EpGA@mail.gmail.com>
Message-ID: <c16a5df8-f31a-33da-463d-640420909197@gmail.com>

On 16/04/2020 1:11 p.m., David Andres Zamora Avila wrote:
>   Hi,
> 
> I submitted my package in CRAN and always appearance the next NOTE.
> 
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: for detritus in the temp directory, Result: NOTE
>    Found the following files/directories:
>      'RtmpcDoRWjr.nc'
> 
> I have tried to solve it in several ways (like if(interactive()), but I not
> sure how can I solve it.

How was the file created?  What the check wants is that you delete it 
when you are finished with it.  You can use the unlink() function to do 
that.

Duncan Murdoch


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Apr 17 00:12:48 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 17 Apr 2020 00:12:48 +0200
Subject: [R-pkg-devel] 
 Detritus in temp directory - Note from submission of
 R package in CRAN
In-Reply-To: <c16a5df8-f31a-33da-463d-640420909197@gmail.com>
References: <CAJ+nqZ6f_8SBf3mm4xF13+GF4pJJmW6qfhAqLO5-i5nZ=3EpGA@mail.gmail.com>
 <c16a5df8-f31a-33da-463d-640420909197@gmail.com>
Message-ID: <5cc2d031-2807-67a3-c7ca-4f3534eee228@statistik.tu-dortmund.de>



On 16.04.2020 20:09, Duncan Murdoch wrote:
> On 16/04/2020 1:11 p.m., David Andres Zamora Avila wrote:
>> ? Hi,
>>
>> I submitted my package in CRAN and always appearance the next NOTE.
>>
>> Flavor: r-devel-linux-x86_64-debian-gcc
>> Check: for detritus in the temp directory, Result: NOTE
>> ?? Found the following files/directories:
>> ???? 'RtmpcDoRWjr.nc'
>>
>> I have tried to solve it in several ways (like if(interactive()), but 
>> I not
>> sure how can I solve it.
> 
> How was the file created?? What the check wants is that you delete it 
> when you are finished with it.? You can use the unlink() function to do 
> that.

Or better create it in tempdir(): I guess you used paste(tempdir(), ...) 
instead of file.path() and got afilename one level above tempdir()?

Best,
Uwe Ligges


> 
> Duncan Murdoch
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@turner @end|ng |rom @uck|@nd@@c@nz  Fri Apr 17 02:12:30 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Fri, 17 Apr 2020 12:12:30 +1200
Subject: [R-pkg-devel] Appropriate keyword in help file.
Message-ID: <077d016e-57ee-f878-4955-6ec4a394729d@auckland.ac.nz>


I'm writing a package (just for my own use, for the time being at least)
that contains a function for estimating the parameters of a 
distribution.  The function is essentially a wrapper for fitdistr() from 
the MASS package.

When I looked at RShowDoc("KEYWORDS"), I could not find an appropriate 
keyword to use in the help file for this function.  There's "htest & 
Statistical Inference", but that's not right, since this function is 
about estimation, not hypothesis testing.  I'd hoped that there'd be a 
keyword "estimation" (or "point estimation") or something like that, but 
there isn't.

I guess I can use "utilities" (???) or "misc", but these seem a bit 
unsatisfactory.

Can anyone suggest a better idea?

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Apr 17 02:14:08 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 16 Apr 2020 20:14:08 -0400
Subject: [R-pkg-devel] Appropriate keyword in help file.
In-Reply-To: <077d016e-57ee-f878-4955-6ec4a394729d@auckland.ac.nz>
References: <077d016e-57ee-f878-4955-6ec4a394729d@auckland.ac.nz>
Message-ID: <799ed9d7-ed2c-b4f5-fe45-24fd06cca001@gmail.com>

On 16/04/2020 8:12 p.m., Rolf Turner wrote:
> 
> I'm writing a package (just for my own use, for the time being at least)
> that contains a function for estimating the parameters of a
> distribution.  The function is essentially a wrapper for fitdistr() from
> the MASS package.
> 
> When I looked at RShowDoc("KEYWORDS"), I could not find an appropriate
> keyword to use in the help file for this function.  There's "htest &
> Statistical Inference", but that's not right, since this function is
> about estimation, not hypothesis testing.  I'd hoped that there'd be a
> keyword "estimation" (or "point estimation") or something like that, but
> there isn't.
> 
> I guess I can use "utilities" (???) or "misc", but these seem a bit
> unsatisfactory.
> 
> Can anyone suggest a better idea?

Don't use any keyword. When was the last time you searched on one?

Duncan Murdoch


From r@turner @end|ng |rom @uck|@nd@@c@nz  Fri Apr 17 02:50:04 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Fri, 17 Apr 2020 12:50:04 +1200
Subject: [R-pkg-devel] Appropriate keyword in help file.
In-Reply-To: <799ed9d7-ed2c-b4f5-fe45-24fd06cca001@gmail.com>
References: <077d016e-57ee-f878-4955-6ec4a394729d@auckland.ac.nz>
 <799ed9d7-ed2c-b4f5-fe45-24fd06cca001@gmail.com>
Message-ID: <efbaf82a-fef9-0057-282f-02e6f9772726@auckland.ac.nz>


On 17/04/20 12:14 pm, Duncan Murdoch wrote:

> On 16/04/2020 8:12 p.m., Rolf Turner wrote:
>>
>> I'm writing a package (just for my own use, for the time being at least)
>> that contains a function for estimating the parameters of a
>> distribution.? The function is essentially a wrapper for fitdistr() from
>> the MASS package.
>>
>> When I looked at RShowDoc("KEYWORDS"), I could not find an appropriate
>> keyword to use in the help file for this function.? There's "htest &
>> Statistical Inference", but that's not right, since this function is
>> about estimation, not hypothesis testing.? I'd hoped that there'd be a
>> keyword "estimation" (or "point estimation") or something like that, but
>> there isn't.
>>
>> I guess I can use "utilities" (???) or "misc", but these seem a bit
>> unsatisfactory.
>>
>> Can anyone suggest a better idea?
> 
> Don't use any keyword. When was the last time you searched on one?


I have *never* in my life searched on a keyword! :-)

I just thought that it was an Immutable Law of the Universe that a help 
file had to have at least one keyword, and that the R Gods would rain 
fire and brimstone down upon one's head if no keyword was supplied.

In a similar vein:  would the R Gods allow me to make up my own keyword 
rather than choosing from those listed by RShowDoc("KEYWORDS")?

Thanks.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Apr 17 02:57:20 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 16 Apr 2020 17:57:20 -0700
Subject: [R-pkg-devel] Appropriate keyword in help file.
In-Reply-To: <efbaf82a-fef9-0057-282f-02e6f9772726@auckland.ac.nz>
References: <077d016e-57ee-f878-4955-6ec4a394729d@auckland.ac.nz>
 <799ed9d7-ed2c-b4f5-fe45-24fd06cca001@gmail.com>
 <efbaf82a-fef9-0057-282f-02e6f9772726@auckland.ac.nz>
Message-ID: <D1B0902A-F79E-4F56-931D-4AECA1001F98@dcn.davis.ca.us>

You can get away with a lot if you are not distributing your package. But I usually try to satisfy R CMD check at least.

On April 16, 2020 5:50:04 PM PDT, Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>On 17/04/20 12:14 pm, Duncan Murdoch wrote:
>
>> On 16/04/2020 8:12 p.m., Rolf Turner wrote:
>>>
>>> I'm writing a package (just for my own use, for the time being at
>least)
>>> that contains a function for estimating the parameters of a
>>> distribution.? The function is essentially a wrapper for fitdistr()
>from
>>> the MASS package.
>>>
>>> When I looked at RShowDoc("KEYWORDS"), I could not find an
>appropriate
>>> keyword to use in the help file for this function.? There's "htest &
>>> Statistical Inference", but that's not right, since this function is
>>> about estimation, not hypothesis testing.? I'd hoped that there'd be
>a
>>> keyword "estimation" (or "point estimation") or something like that,
>but
>>> there isn't.
>>>
>>> I guess I can use "utilities" (???) or "misc", but these seem a bit
>>> unsatisfactory.
>>>
>>> Can anyone suggest a better idea?
>> 
>> Don't use any keyword. When was the last time you searched on one?
>
>
>I have *never* in my life searched on a keyword! :-)
>
>I just thought that it was an Immutable Law of the Universe that a help
>
>file had to have at least one keyword, and that the R Gods would rain 
>fire and brimstone down upon one's head if no keyword was supplied.
>
>In a similar vein:  would the R Gods allow me to make up my own keyword
>
>rather than choosing from those listed by RShowDoc("KEYWORDS")?
>
>Thanks.
>
>cheers,
>
>Rolf

-- 
Sent from my phone. Please excuse my brevity.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Apr 17 10:41:24 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 17 Apr 2020 10:41:24 +0200
Subject: [R-pkg-devel] Appropriate keyword in help file.
In-Reply-To: <D1B0902A-F79E-4F56-931D-4AECA1001F98@dcn.davis.ca.us>
References: <077d016e-57ee-f878-4955-6ec4a394729d@auckland.ac.nz>
 <799ed9d7-ed2c-b4f5-fe45-24fd06cca001@gmail.com>
 <efbaf82a-fef9-0057-282f-02e6f9772726@auckland.ac.nz>
 <D1B0902A-F79E-4F56-931D-4AECA1001F98@dcn.davis.ca.us>
Message-ID: <7f6f6e09-ec03-9d65-0006-198e4318a0c3@statistik.tu-dortmund.de>

keywords are not mandatory.

You can invent your own keywords and use them in

\concept{}
entries.

Best,
Uwe Ligges



On 17.04.2020 02:57, Jeff Newmiller wrote:
> You can get away with a lot if you are not distributing your package. But I usually try to satisfy R CMD check at least.
> 
> On April 16, 2020 5:50:04 PM PDT, Rolf Turner <r.turner at auckland.ac.nz> wrote:
>>
>> On 17/04/20 12:14 pm, Duncan Murdoch wrote:
>>
>>> On 16/04/2020 8:12 p.m., Rolf Turner wrote:
>>>>
>>>> I'm writing a package (just for my own use, for the time being at
>> least)
>>>> that contains a function for estimating the parameters of a
>>>> distribution.? The function is essentially a wrapper for fitdistr()
>> from
>>>> the MASS package.
>>>>
>>>> When I looked at RShowDoc("KEYWORDS"), I could not find an
>> appropriate
>>>> keyword to use in the help file for this function.? There's "htest &
>>>> Statistical Inference", but that's not right, since this function is
>>>> about estimation, not hypothesis testing.? I'd hoped that there'd be
>> a
>>>> keyword "estimation" (or "point estimation") or something like that,
>> but
>>>> there isn't.
>>>>
>>>> I guess I can use "utilities" (???) or "misc", but these seem a bit
>>>> unsatisfactory.
>>>>
>>>> Can anyone suggest a better idea?
>>>
>>> Don't use any keyword. When was the last time you searched on one?
>>
>>
>> I have *never* in my life searched on a keyword! :-)
>>
>> I just thought that it was an Immutable Law of the Universe that a help
>>
>> file had to have at least one keyword, and that the R Gods would rain
>> fire and brimstone down upon one's head if no keyword was supplied.
>>
>> In a similar vein:  would the R Gods allow me to make up my own keyword
>>
>> rather than choosing from those listed by RShowDoc("KEYWORDS")?
>>
>> Thanks.
>>
>> cheers,
>>
>> Rolf
>


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sat Apr 18 01:01:38 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sat, 18 Apr 2020 11:01:38 +1200
Subject: [R-pkg-devel] Appropriate keyword in help file.
In-Reply-To: <7f6f6e09-ec03-9d65-0006-198e4318a0c3@statistik.tu-dortmund.de>
References: <077d016e-57ee-f878-4955-6ec4a394729d@auckland.ac.nz>
 <799ed9d7-ed2c-b4f5-fe45-24fd06cca001@gmail.com>
 <efbaf82a-fef9-0057-282f-02e6f9772726@auckland.ac.nz>
 <D1B0902A-F79E-4F56-931D-4AECA1001F98@dcn.davis.ca.us>
 <7f6f6e09-ec03-9d65-0006-198e4318a0c3@statistik.tu-dortmund.de>
Message-ID: <9fe0cefe-abe5-0d4c-7c7c-a74f259c52b6@auckland.ac.nz>


On 17/04/20 8:41 pm, Uwe Ligges wrote:

> keywords are not mandatory.
> 
> You can invent your own keywords and use them in
> 
> \concept{}
> entries.

Thanks Uwe.  This has given me new insight and enlightenment!

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Sat Apr 18 18:36:36 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Sat, 18 Apr 2020 18:36:36 +0200
Subject: [R-pkg-devel] =?utf-8?q?Error_creating_union_class=3A_object_?=
 =?utf-8?b?4oCYLl9fQ19fY29tcE1hdHJpeOKAmSBub3QgZm91bmQ=?=
In-Reply-To: <cTfz9LdQTDeljdpr97HnBeKOSPRLo90TKjTnzHfV4zfOx0UrOPO5F0KcTex4T85VVqLzSXGp0MyTFZHNjCSoiTYj5nPFijuKiPf2E6siAyg=-1872@protonmail.com>
References: <na_hvS9mQoE2Ex7h3m1UlL7AzQFz0Fuuets5kNRC7b7NBrkkYObfnkUAyj8T8oz48jBuBXZcEf0CJn2UL7f5TZ-N9jiT4qUd0eiE50R9xkU=-4805@protonmail.com>
 <24205.57605.672636.944802@stat.math.ethz.ch>
 <CAF8bMca+KFHQfb87qbZywWchXy9GJ_7qr5iD5GJ3PL-xWJO_fA@mail.gmail.com>
 <CAF8bMcb-KbfR==w1g3ixjEpGNR7=zn3SEBtwn3i4MimYzzt-dw@mail.gmail.com>
 <cTfz9LdQTDeljdpr97HnBeKOSPRLo90TKjTnzHfV4zfOx0UrOPO5F0KcTex4T85VVqLzSXGp0MyTFZHNjCSoiTYj5nPFijuKiPf2E6siAyg=-1872@protonmail.com>
Message-ID: <24219.11412.330746.824585@stat.math.ethz.ch>

>>>>> renozao  
>>>>>     on Wed, 8 Apr 2020 16:19:59 +0000 writes:

    > Thank you William for the reproducible example.
    > Currently I using the following (same as in William's example):
    > setClassUnion("mMatrix", c("Matrix", "matrix"))

    > Martin, are the changes made in the union class handling affecting the way we should declare them?

    > Thank you.

    > Bests,
    > Renaud

Thank you, Renaud, and Bill Dunlap.

There is obviously a bit of a problem there, but it may well be
"only" a problem in error handling.

As Bill's  trace(get, ..)  shows,  R tries to get
"#HAS_DUPLICATE_CLASS_NAMES"   which is indeed an indication of the problem:

You are trying to  *RE*define a class union that already exists
*identically* in the Matrix package:
In the R-forge development version of 'Matrix', it is
line 717 of  Matrix/R/AllClass.R   (and that will be close also
     	     			    in the CRAN version of Matrix).
				    
So at least for you, Renaud, the solution to the problem is easy:
Just don't do what you should not do: What you want is already
part of Matrix.... and after searching:  It's been part of
Matrix since ca. July 2012 ...

--
But yes, there's a buglet in the 'methods' package currently,
which leads to a misleading error message
(It's arguable if it *should* give an error which it did not previously;
 I think it would be quite a good idea to give at least a
 warning as you are masking class definition of the Matrix
 package which is in your search() path or at least among the
 loaded namespaces at this time).

Best,
Martin


    > ??????? Original Message ???????
    > On Wednesday, April 8, 2020 11:19 AM, William Dunlap <wdunlap at tibco.com> wrote:

    >> Use trace() to get a bit more detail - .__C_compMatrix is looked for in the wrong environment with inherits=FALSE.
    >> 
    >>> setClassUnion("mMatrix", c("Matrix", "matrix"))
    >> Tracing get(name, envir = env) on entry
    >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get(name, envir = env) on entry
    >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get(name, envir = env) on entry
    >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get("#HAS_DUPLICATE_CLASS_NAMES", envir = .classTable) on entry
    >> x="#HAS_DUPLICATE_CLASS_NAMES", envir="<environment: 0x2787710>", topenv="<environment: base>", inherits=TRUE
    >> Tracing get(name, envir = env) on entry
    >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get(name, envir = env) on entry
    >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get(name, envir = env) on entry
    >> x=".MTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get(".SigLength", envir = env) on entry
    >> x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get(".SigLength", envir = env) on entry
    >> x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get(name, envir = env) on entry
    >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get(".SigLength", envir = env) on entry
    >> x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get(".SigLength", envir = env) on entry
    >> x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
    >> Tracing get(cname, envir = cwhere, inherits = FALSE) on entry
    >> x=".__C__compMatrix", envir="<environment: R_GlobalEnv>", topenv="<environment: R_GlobalEnv>", inherits=FALSE
    >> Error in get(cname, envir = cwhere, inherits = FALSE) :
    >> object '.__C__compMatrix' not found
    >> ...
    >> 
    >> Bill Dunlap
    >> TIBCO Software
    >> wdunlap tibco.com
    >> 
    >> On Wed, Apr 8, 2020 at 7:52 AM William Dunlap <wdunlap at tibco.com> wrote:
    >> 
    >>> % R-devel --vanilla --quiet
    >>>> library(Matrix)
    >>>> setClassUnion("mMatrix", c("Matrix", "matrix"))
    >>> Error in get(cname, envir = cwhere, inherits = FALSE) :
    >>> object '.__C__compMatrix' not found
    >>> Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
    >>> unable to create union class:  could not set members "Matrix"
    >>>> sessionInfo()
    >>> R Under development (unstable) (2020-04-07 r78175)
    >>> Platform: x86_64-pc-linux-gnu (64-bit)
    >>> Running under: Ubuntu 16.04.6 LTS
    >>> 
    >>> Matrix products: default
    >>> BLAS/LAPACK: /usr/lib/libopenblasp-r0.2.18.so
    >>> 
    >>> locale:
    >>> [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
    >>> [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
    >>> [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
    >>> [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
    >>> [9] LC_ADDRESS=C               LC_TELEPHONE=C
    >>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
    >>> 
    >>> attached base packages:
    >>> [1] stats     graphics  grDevices utils     datasets  methods   base
    >>> 
    >>> other attached packages:
    >>> [1] Matrix_1.2-18
    >>> 
    >>> loaded via a namespace (and not attached):
    >>> [1] compiler_4.1.0  grid_4.1.0      lattice_0.20-41
    >>> 
    >>> Bill Dunlap
    >>> TIBCO Software
    >>> wdunlap tibco.com
    >>> 
    >>> On Wed, Apr 8, 2020 at 7:35 AM Martin Maechler <maechler at stat.math.ethz.ch> wrote:
    >>> 
    >>>>>>>>> renozao
    >>>>>>>>> on Mon, 30 Mar 2020 21:20:43 +0000 writes:
    >>>> 
    >>>> > Hi,
    >>>> > when R CMD check is run under R-devel (2020-03-29 r78108) I get the following error at installation:
    >>>> 
    >>>> > Error in get(cname, envir = cwhere, inherits = FALSE) :
    >>>> > object ?.__C__compMatrix? not found
    >>>> > Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
    >>>> > unable to create union class:  could not set members "Matrix"
    >>>> 
    >>>> > This does not happen on R 3.6.3.
    >>>> 
    >>>> > I tried with Matrix listed in Depends but I still get the same error.
    >>>> 
    >>>> > Is this linked to some changes in union classes or the Matrix package?
    >>>> 
    >>>> > Thank you.
    >>>> 
    >>>> > Bests,
    >>>> > Renaud
    >>>> 
    >>>> Hi Renaud,
    >>>> One reason you got no response here, is because we don't even
    >>>> know about which package you are talking.
    >>>> 
    >>>> So there's nothing, anybody can reproduce from your posting.
    >>>> 
    >>>> There have been changes in R's dealing with class unions etc,
    >>>> notably even *relating* to an earlier bug report on class unions
    >>>> exactly for such a case which was *triggered* when people built
    >>>> on such Matrix classes.
    >>>> 
    >>>> But we would really want to be able to reproduce what you are seeing..
    >>>> 
    >>>> Best regards,
    >>>> Martin Maechler
    >>>> 
    >>>> ETH Zurich, R Core Team *and* maintainer("Matrix")
    >>>> 
    >>>> ______________________________________________
    >>>> R-package-devel at r-project.org mailing list
    >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
    > [[alternative HTML version deleted]]

    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From d@z@mor@@ @end|ng |rom un@|@edu@co  Sat Apr 18 22:45:50 2020
From: d@z@mor@@ @end|ng |rom un@|@edu@co (David Andres Zamora Avila)
Date: Sat, 18 Apr 2020 15:45:50 -0500
Subject: [R-pkg-devel] 
 Detritus in temp directory - Note from submission of
 R package in CRAN
In-Reply-To: <5cc2d031-2807-67a3-c7ca-4f3534eee228@statistik.tu-dortmund.de>
References: <CAJ+nqZ6f_8SBf3mm4xF13+GF4pJJmW6qfhAqLO5-i5nZ=3EpGA@mail.gmail.com>
 <c16a5df8-f31a-33da-463d-640420909197@gmail.com>
 <5cc2d031-2807-67a3-c7ca-4f3534eee228@statistik.tu-dortmund.de>
Message-ID: <CAJ+nqZ5a6e3fa31jAJY=pL--T8NXXM_bba6q9CK5=1mUe0mvDA@mail.gmail.com>

Thanks for your answers.
This a part of my script where it creates files and saves it in anything
path. I am not pretty secure how use file.path() or tempdir(). Can you give
me more details about it, please?

 if (!exists("path_pet")){
    path_pet <- getwd()
  } else if (!exists("path_p")){
    path_p <- getwd()
  } else if (!exists("path_p") | !exists("path_pet")){
    path_pet <- getwd()
    path_p <- getwd()
  }

  if (file_type == "raster"){
    # ---- identify raster format and loading----
    if (format == "GTiff"){

      if( length(list.files(path_pet, pattern = ".tif")) == 0 | length(
list.files(path_p, pattern = ".tif")) == 0){
        stop("Not avaliable data of precipitation or evapotranspiration")
      }
      pet_files <- list.files(path_pet)
      pet <- raster::stack(paste(path_pet, pet_files, sep = ""))
      p_files <- list.files(path_p)

Kind regards,

David Zamora

El jue., 16 abr. 2020 a las 17:12, Uwe Ligges (<
ligges at statistik.tu-dortmund.de>) escribi?:

>
>
> On 16.04.2020 20:09, Duncan Murdoch wrote:
> > On 16/04/2020 1:11 p.m., David Andres Zamora Avila wrote:
> >>   Hi,
> >>
> >> I submitted my package in CRAN and always appearance the next NOTE.
> >>
> >> Flavor: r-devel-linux-x86_64-debian-gcc
> >> Check: for detritus in the temp directory, Result: NOTE
> >>    Found the following files/directories:
> >>      'RtmpcDoRWjr.nc'
> >>
> >> I have tried to solve it in several ways (like if(interactive()), but
> >> I not
> >> sure how can I solve it.
> >
> > How was the file created?  What the check wants is that you delete it
> > when you are finished with it.  You can use the unlink() function to do
> > that.
>
> Or better create it in tempdir(): I guess you used paste(tempdir(), ...)
> instead of file.path() and got afilename one level above tempdir()?
>
> Best,
> Uwe Ligges
>
>
> >
> > Duncan Murdoch
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 

David Zamora <https://sites.google.com/a/unal.edu.co/dazamoraa/>
PhD Student, Universidad Nacional de Colombia, Bogot?
phone: +571 3165000 ext 13406
address: Av. NQS (Carrera 30) # 45-03, Hydraulics Lab (408-213)
email: dazamoraa at unal.edu.co

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Apr 18 23:55:32 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 18 Apr 2020 14:55:32 -0700 (PDT)
Subject: [R-pkg-devel] 
 Detritus in temp directory - Note from submission of
 R package in CRAN
In-Reply-To: <CAJ+nqZ5a6e3fa31jAJY=pL--T8NXXM_bba6q9CK5=1mUe0mvDA@mail.gmail.com>
References: <CAJ+nqZ6f_8SBf3mm4xF13+GF4pJJmW6qfhAqLO5-i5nZ=3EpGA@mail.gmail.com>
 <c16a5df8-f31a-33da-463d-640420909197@gmail.com>
 <5cc2d031-2807-67a3-c7ca-4f3534eee228@statistik.tu-dortmund.de>
 <CAJ+nqZ5a6e3fa31jAJY=pL--T8NXXM_bba6q9CK5=1mUe0mvDA@mail.gmail.com>
Message-ID: <alpine.BSF.2.00.2004181434580.74617@pedal.dcn.davis.ca.us>

See below:

On Sat, 18 Apr 2020, David Andres Zamora Avila wrote:

> Thanks for your answers.
> This a part of my script where it creates files and saves it in anything
> path. I am not pretty secure how use file.path() or tempdir(). Can you give
> me more details about it, please?
>
> if (!exists("path_pet")){
>    path_pet <- getwd()
>  } else if (!exists("path_p")){
>    path_p <- getwd()
>  } else if (!exists("path_p") | !exists("path_pet")){
>    path_pet <- getwd()
>    path_p <- getwd()
>  }

The above code should not exist. You are making a package, so you are 
putting it into a function and either looking for the existence of global 
variables (side effects! requiring user to use special variable names! 
this is not good!), or the "path_pet" and "path_p" variables were created 
in your function and you should already know that they exist.

If we assume that "path_pet" and "path_p" are parameters to this package 
function you are writing, like so:

myfunc <- function( x, y, ..., path_pet = getwd(), path_p = getwd() ) {
   ...
}

then the user can let the default be the current working directory, or can 
specify which directories the function should work in. Specifically, when 
you are writing your examples or test code and pretending to be a user, 
you can create a temporary directory and use it like so:

workingdir <- tempdir(TRUE)
result <- myfunc( A, B, path_pet = workingdir, path_p = workingdir )

which means you can then clean up after yourself with

unlink( workingdir, recursive = TRUE )

I don't think this question is really about R packages anymore... if you 
still cannot read the help files to figure out your questions about how to 
do manage temporary files then you should probably make a small 
reproducible example(!!) and post a question on R-help.

(end of comments)

>  if (file_type == "raster"){
>    # ---- identify raster format and loading----
>    if (format == "GTiff"){
>
>      if( length(list.files(path_pet, pattern = ".tif")) == 0 | length(
> list.files(path_p, pattern = ".tif")) == 0){
>        stop("Not avaliable data of precipitation or evapotranspiration")
>      }
>      pet_files <- list.files(path_pet)
>      pet <- raster::stack(paste(path_pet, pet_files, sep = ""))
>      p_files <- list.files(path_p)
> Kind regards,
>
> David Zamora
>
> El jue., 16 abr. 2020 a las 17:12, Uwe Ligges (<
> ligges at statistik.tu-dortmund.de>) escribi?:
>
>>
>>
>> On 16.04.2020 20:09, Duncan Murdoch wrote:
>>> On 16/04/2020 1:11 p.m., David Andres Zamora Avila wrote:
>>>>   Hi,
>>>>
>>>> I submitted my package in CRAN and always appearance the next NOTE.
>>>>
>>>> Flavor: r-devel-linux-x86_64-debian-gcc
>>>> Check: for detritus in the temp directory, Result: NOTE
>>>>    Found the following files/directories:
>>>>      'RtmpcDoRWjr.nc'
>>>>
>>>> I have tried to solve it in several ways (like if(interactive()), but
>>>> I not
>>>> sure how can I solve it.
>>>
>>> How was the file created?  What the check wants is that you delete it
>>> when you are finished with it.  You can use the unlink() function to do
>>> that.
>>
>> Or better create it in tempdir(): I guess you used paste(tempdir(), ...)
>> instead of file.path() and got afilename one level above tempdir()?
>>
>> Best,
>> Uwe Ligges
>>
>>
>>>
>>> Duncan Murdoch
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>
> -- 
>
> David Zamora <https://sites.google.com/a/unal.edu.co/dazamoraa/>
> PhD Student, Universidad Nacional de Colombia, Bogot?
> phone: +571 3165000 ext 13406
> address: Av. NQS (Carrera 30) # 45-03, Hydraulics Lab (408-213)
> email: dazamoraa at unal.edu.co
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

---------------------------------------------------------------------------
Jeff Newmiller                        The     .....       .....  Go Live...
DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
                                       Live:   OO#.. Dead: OO#..  Playing
Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
/Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Apr 19 00:02:17 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 18 Apr 2020 18:02:17 -0400
Subject: [R-pkg-devel] 
 Detritus in temp directory - Note from submission of
 R package in CRAN
In-Reply-To: <alpine.BSF.2.00.2004181434580.74617@pedal.dcn.davis.ca.us>
References: <CAJ+nqZ6f_8SBf3mm4xF13+GF4pJJmW6qfhAqLO5-i5nZ=3EpGA@mail.gmail.com>
 <c16a5df8-f31a-33da-463d-640420909197@gmail.com>
 <5cc2d031-2807-67a3-c7ca-4f3534eee228@statistik.tu-dortmund.de>
 <CAJ+nqZ5a6e3fa31jAJY=pL--T8NXXM_bba6q9CK5=1mUe0mvDA@mail.gmail.com>
 <alpine.BSF.2.00.2004181434580.74617@pedal.dcn.davis.ca.us>
Message-ID: <4a49847a-1afc-6d69-f653-d78c837b72ff@gmail.com>

On 18/04/2020 5:55 p.m., Jeff Newmiller wrote:
> See below:
> 
> On Sat, 18 Apr 2020, David Andres Zamora Avila wrote:
> 
>> Thanks for your answers.
>> This a part of my script where it creates files and saves it in anything
>> path. I am not pretty secure how use file.path() or tempdir(). Can you give
>> me more details about it, please?
>>
>> if (!exists("path_pet")){
>>     path_pet <- getwd()
>>   } else if (!exists("path_p")){
>>     path_p <- getwd()
>>   } else if (!exists("path_p") | !exists("path_pet")){
>>     path_pet <- getwd()
>>     path_p <- getwd()
>>   }
> 
> The above code should not exist. You are making a package, so you are
> putting it into a function and either looking for the existence of global
> variables (side effects! requiring user to use special variable names!
> this is not good!), or the "path_pet" and "path_p" variables were created
> in your function and you should already know that they exist.
> 
> If we assume that "path_pet" and "path_p" are parameters to this package
> function you are writing, like so:
> 
> myfunc <- function( x, y, ..., path_pet = getwd(), path_p = getwd() ) {
>     ...
> }
> 
> then the user can let the default be the current working directory, or can
> specify which directories the function should work in. Specifically, when
> you are writing your examples or test code and pretending to be a user,
> you can create a temporary directory and use it like so:

I think your advice would probably pass the checks, but it's bad advice, 
because it leaves the user vulnerable to having files wiped out by 
myfunc().

Functions shouldn't write to the current directory unless the user 
explicitly asks for it.

A better header would be

myfunc <- function( x, y, ..., path_pet = temp.dir(), path_p = 
temp.dir() ) {

Then the user has to explicitly code "path_pet = getwd()" to wipe out 
their own files.

Duncan Murdoch

> 
> workingdir <- tempdir(TRUE)
> result <- myfunc( A, B, path_pet = workingdir, path_p = workingdir )
> 
> which means you can then clean up after yourself with
> 
> unlink( workingdir, recursive = TRUE )
> 
> I don't think this question is really about R packages anymore... if you
> still cannot read the help files to figure out your questions about how to
> do manage temporary files then you should probably make a small
> reproducible example(!!) and post a question on R-help.
> 
> (end of comments)
> 
>>   if (file_type == "raster"){
>>     # ---- identify raster format and loading----
>>     if (format == "GTiff"){
>>
>>       if( length(list.files(path_pet, pattern = ".tif")) == 0 | length(
>> list.files(path_p, pattern = ".tif")) == 0){
>>         stop("Not avaliable data of precipitation or evapotranspiration")
>>       }
>>       pet_files <- list.files(path_pet)
>>       pet <- raster::stack(paste(path_pet, pet_files, sep = ""))
>>       p_files <- list.files(path_p)
>> Kind regards,
>>
>> David Zamora
>>
>> El jue., 16 abr. 2020 a las 17:12, Uwe Ligges (<
>> ligges at statistik.tu-dortmund.de>) escribi?:
>>
>>>
>>>
>>> On 16.04.2020 20:09, Duncan Murdoch wrote:
>>>> On 16/04/2020 1:11 p.m., David Andres Zamora Avila wrote:
>>>>>    Hi,
>>>>>
>>>>> I submitted my package in CRAN and always appearance the next NOTE.
>>>>>
>>>>> Flavor: r-devel-linux-x86_64-debian-gcc
>>>>> Check: for detritus in the temp directory, Result: NOTE
>>>>>     Found the following files/directories:
>>>>>       'RtmpcDoRWjr.nc'
>>>>>
>>>>> I have tried to solve it in several ways (like if(interactive()), but
>>>>> I not
>>>>> sure how can I solve it.
>>>>
>>>> How was the file created?  What the check wants is that you delete it
>>>> when you are finished with it.  You can use the unlink() function to do
>>>> that.
>>>
>>> Or better create it in tempdir(): I guess you used paste(tempdir(), ...)
>>> instead of file.path() and got afilename one level above tempdir()?
>>>
>>> Best,
>>> Uwe Ligges
>>>
>>>
>>>>
>>>> Duncan Murdoch
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>>
>> -- 
>>
>> David Zamora <https://sites.google.com/a/unal.edu.co/dazamoraa/>
>> PhD Student, Universidad Nacional de Colombia, Bogot?
>> phone: +571 3165000 ext 13406
>> address: Av. NQS (Carrera 30) # 45-03, Hydraulics Lab (408-213)
>> email: dazamoraa at unal.edu.co
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ---------------------------------------------------------------------------
> Jeff Newmiller                        The     .....       .....  Go Live...
> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live Go...
>                                         Live:   OO#.. Dead: OO#..  Playing
> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
> /Software/Embedded Controllers)               .OO#.       .OO#.  rocks...1k
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Apr 19 03:05:48 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 18 Apr 2020 18:05:48 -0700
Subject: [R-pkg-devel] 
 Detritus in temp directory - Note from submission of
 R package in CRAN
In-Reply-To: <4a49847a-1afc-6d69-f653-d78c837b72ff@gmail.com>
References: <CAJ+nqZ6f_8SBf3mm4xF13+GF4pJJmW6qfhAqLO5-i5nZ=3EpGA@mail.gmail.com>
 <c16a5df8-f31a-33da-463d-640420909197@gmail.com>
 <5cc2d031-2807-67a3-c7ca-4f3534eee228@statistik.tu-dortmund.de>
 <CAJ+nqZ5a6e3fa31jAJY=pL--T8NXXM_bba6q9CK5=1mUe0mvDA@mail.gmail.com>
 <alpine.BSF.2.00.2004181434580.74617@pedal.dcn.davis.ca.us>
 <4a49847a-1afc-6d69-f653-d78c837b72ff@gmail.com>
Message-ID: <AAD7285D-CD1E-47FE-AB95-4C61023A483C@dcn.davis.ca.us>

I agree that my example was not optimal, but I was trying to duplicate the existing behaviour with the exception of use of global variables.

On April 18, 2020 3:02:17 PM PDT, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>On 18/04/2020 5:55 p.m., Jeff Newmiller wrote:
>> See below:
>> 
>> On Sat, 18 Apr 2020, David Andres Zamora Avila wrote:
>> 
>>> Thanks for your answers.
>>> This a part of my script where it creates files and saves it in
>anything
>>> path. I am not pretty secure how use file.path() or tempdir(). Can
>you give
>>> me more details about it, please?
>>>
>>> if (!exists("path_pet")){
>>>     path_pet <- getwd()
>>>   } else if (!exists("path_p")){
>>>     path_p <- getwd()
>>>   } else if (!exists("path_p") | !exists("path_pet")){
>>>     path_pet <- getwd()
>>>     path_p <- getwd()
>>>   }
>> 
>> The above code should not exist. You are making a package, so you are
>> putting it into a function and either looking for the existence of
>global
>> variables (side effects! requiring user to use special variable
>names!
>> this is not good!), or the "path_pet" and "path_p" variables were
>created
>> in your function and you should already know that they exist.
>> 
>> If we assume that "path_pet" and "path_p" are parameters to this
>package
>> function you are writing, like so:
>> 
>> myfunc <- function( x, y, ..., path_pet = getwd(), path_p = getwd() )
>{
>>     ...
>> }
>> 
>> then the user can let the default be the current working directory,
>or can
>> specify which directories the function should work in. Specifically,
>when
>> you are writing your examples or test code and pretending to be a
>user,
>> you can create a temporary directory and use it like so:
>
>I think your advice would probably pass the checks, but it's bad
>advice, 
>because it leaves the user vulnerable to having files wiped out by 
>myfunc().
>
>Functions shouldn't write to the current directory unless the user 
>explicitly asks for it.
>
>A better header would be
>
>myfunc <- function( x, y, ..., path_pet = temp.dir(), path_p = 
>temp.dir() ) {
>
>Then the user has to explicitly code "path_pet = getwd()" to wipe out 
>their own files.
>
>Duncan Murdoch
>
>> 
>> workingdir <- tempdir(TRUE)
>> result <- myfunc( A, B, path_pet = workingdir, path_p = workingdir )
>> 
>> which means you can then clean up after yourself with
>> 
>> unlink( workingdir, recursive = TRUE )
>> 
>> I don't think this question is really about R packages anymore... if
>you
>> still cannot read the help files to figure out your questions about
>how to
>> do manage temporary files then you should probably make a small
>> reproducible example(!!) and post a question on R-help.
>> 
>> (end of comments)
>> 
>>>   if (file_type == "raster"){
>>>     # ---- identify raster format and loading----
>>>     if (format == "GTiff"){
>>>
>>>       if( length(list.files(path_pet, pattern = ".tif")) == 0 |
>length(
>>> list.files(path_p, pattern = ".tif")) == 0){
>>>         stop("Not avaliable data of precipitation or
>evapotranspiration")
>>>       }
>>>       pet_files <- list.files(path_pet)
>>>       pet <- raster::stack(paste(path_pet, pet_files, sep = ""))
>>>       p_files <- list.files(path_p)
>>> Kind regards,
>>>
>>> David Zamora
>>>
>>> El jue., 16 abr. 2020 a las 17:12, Uwe Ligges (<
>>> ligges at statistik.tu-dortmund.de>) escribi?:
>>>
>>>>
>>>>
>>>> On 16.04.2020 20:09, Duncan Murdoch wrote:
>>>>> On 16/04/2020 1:11 p.m., David Andres Zamora Avila wrote:
>>>>>>    Hi,
>>>>>>
>>>>>> I submitted my package in CRAN and always appearance the next
>NOTE.
>>>>>>
>>>>>> Flavor: r-devel-linux-x86_64-debian-gcc
>>>>>> Check: for detritus in the temp directory, Result: NOTE
>>>>>>     Found the following files/directories:
>>>>>>       'RtmpcDoRWjr.nc'
>>>>>>
>>>>>> I have tried to solve it in several ways (like if(interactive()),
>but
>>>>>> I not
>>>>>> sure how can I solve it.
>>>>>
>>>>> How was the file created?  What the check wants is that you delete
>it
>>>>> when you are finished with it.  You can use the unlink() function
>to do
>>>>> that.
>>>>
>>>> Or better create it in tempdir(): I guess you used paste(tempdir(),
>...)
>>>> instead of file.path() and got afilename one level above tempdir()?
>>>>
>>>> Best,
>>>> Uwe Ligges
>>>>
>>>>
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>>
>>> -- 
>>>
>>> David Zamora <https://sites.google.com/a/unal.edu.co/dazamoraa/>
>>> PhD Student, Universidad Nacional de Colombia, Bogot?
>>> phone: +571 3165000 ext 13406
>>> address: Av. NQS (Carrera 30) # 45-03, Hydraulics Lab (408-213)
>>> email: dazamoraa at unal.edu.co
>>>
>>> 	[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>> 
>>
>---------------------------------------------------------------------------
>> Jeff Newmiller                        The     .....       .....  Go
>Live...
>> DCN:<jdnewmil at dcn.davis.ca.us>        Basics: ##.#.       ##.#.  Live
>Go...
>>                                         Live:   OO#.. Dead: OO#.. 
>Playing
>> Research Engineer (Solar/Batteries            O.O#.       #.O#.  with
>> /Software/Embedded Controllers)               .OO#.       .OO#. 
>rocks...1k
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 

-- 
Sent from my phone. Please excuse my brevity.


From m@rc|njurek1988 @end|ng |rom gm@||@com  Mon Apr 20 19:00:09 2020
From: m@rc|njurek1988 @end|ng |rom gm@||@com (Marcin Jurek)
Date: Mon, 20 Apr 2020 12:00:09 -0500
Subject: [R-pkg-devel] debugging memory sanitation errors
Message-ID: <CAKpFkB3wEzjd99-fb39e1p=cTY3yt6dWoJeK20oiGWgbPE9ADA@mail.gmail.com>

Hello so I keep getting my package turned back because of errors detected
by UBSAN. I am trying to catch it using r-hub's platform with UBSAN but
there are no errors thrown there. What would be a good way for me to debug
this.

Obviously I did R CMD check --as-cran on my own machine, and on Travis and
I can't detect a thing.

What surprises me is that this is a runtime error and I wonder why all the
systems I test it on give it a pass...

Thanks for suggestions!

Marcin


---------- Forwarded message ---------
From: Uwe Ligges <ligges at statistik.tu-dortmund.de>
Date: Sat, Apr 18, 2020 at 2:32 AM
Subject: Re: CRAN submission GPvecchia 0.1.3
To: Marcin Jurek <marcinjurek1988 at gmail.com>, CRAN <
cran-submissions at r-project.org>


Thanks, we see:

checking with clang-UBSAN still has

/data/gannet/ripley/R/test-clang/RcppArmadillo/include/armadillo_bits/subview_meat.hpp:1277:23:

runtime error: reference binding to null pointer of type 'const unsigned
int'
     #0 0x7f8b9133b5ae in arma::subview<unsigned int>::colptr(unsigned
int)
/data/gannet/ripley/R/test-clang/RcppArmadillo/include/armadillo_bits/subview_meat.hpp:1277:12
     #1 0x7f8b9133b5ae in arma::subview_col<unsigned
int>::subview_col(arma::Mat<unsigned int> const&, unsigned int, unsigned
int, unsigned int)
/data/gannet/ripley/R/test-clang/RcppArmadillo/include/armadillo_bits/subview_meat.hpp:3133:25
     #2 0x7f8b913218d3 in arma::Col<unsigned int>::head(unsigned int)
/data/gannet/ripley/R/test-clang/RcppArmadillo/include/armadillo_bits/Col_meat.hpp:782:10
     #3 0x7f8b913218d3 in clusterEqual(arma::Mat<double>, int, int)
/data/gannet/ripley/R/packages/incoming/GPvecchia.Rcheck/00_pkg_src/GPvecchia/src/fastTree.cpp:53:35
     #4 0x7f8b9132722d in knotTree(arma::Mat<double>,
std::__1::map<std::__1::basic_string<char, std::__1::char_traits<char>,
std::__1::allocator<char> >, arma::Col<unsigned int>,
std::__1::less<std::__1::basic_string<char, std::__1::char_traits<char>,
std::__1::allocator<char> > >,
std::__1::allocator<std::__1::pair<std::__1::basic_string<char,
std::__1::char_traits<char>, std::__1::allocator<char> > const,
arma::Col<unsigned int> > > >)
/data/gannet/ripley/R/packages/incoming/GPvecchia.Rcheck/00_pkg_src/GPvecchia/src/fastTree.cpp:241:21
     #5 0x7f8b91328fae in generateNNarray(arma::Mat<double>,
arma::Col<unsigned int>, int, arma::Col<unsigned int>, int)
/data/gannet/ripley/R/packages/incoming/GPvecchia.Rcheck/00_pkg_src/GPvecchia/src/fastTree.cpp:279:39
     #6 0x7f8b91267769 in _GPvecchia_generateNNarray
/data/gannet/ripley/R/packages/incoming/GPvecchia.Rcheck/00_pkg_src/GPvecchia/src/RcppExports.cpp:93:34

and others not from this package.

Please fix the issue reported above and resubmit.

Best,
Uwe Ligges


On 16.04.2020 00:37, CRAN submission wrote:
> [This was generated from CRAN.R-project.org/submit.html]
>
> The following package was uploaded to CRAN:
> ===========================================
>
> Package Information:
> Package: GPvecchia
> Version: 0.1.3
> Title: Scalable Gaussian-Process Approximations
> Author(s): Matthias Katzfuss [aut], Marcin Jurek [aut, cre], Daniel Zilber
>    [aut], Wenlong Gong [aut], Joe Guinness [ctb], Jingjie Zhang
>    [ctb], Florian Schaefer [ctb]
> Maintainer: Marcin Jurek <marcinjurek1988 at gmail.com>
> Suggests: mvtnorm, knitr, rmarkdown, testthat
> Description: Fast scalable Gaussian process approximations, particularly
>    well suited to spatial (aerial, remote-sensed) and
>    environmental data, described in more detail in Katzfuss and
>    Guinness (2017) <arXiv:1708.06302>. Package also contains a
>    fast implementation of the incomplete Cholesky decomposition
>    (IC0), based on Schaefer et al. (2019) <arXiv:1706.02205> and
>    MaxMin ordering proposed in Guinness (2018)
>    <arXiv:1609.05372>.
> License: GPL (>=2)
> Imports: Rcpp (>= 0.12.16), methods, stats, sparseinv, fields,
>    Matrix(>= 1.2.14), parallel, GpGp, FNN
> LinkingTo: Rcpp, RcppArmadillo, BH
>
>
> The maintainer confirms that he or she
> has read and agrees to the CRAN policies.
>
> Submitter's comment: ### Resubmission 5
> This is a fifth resubmission
>
> *
>    fixed problems reported in
>    https://cran.r-project.org/web/checks/check_results_GPvecchia.html
>
>
>
>
>
> ###
>    Resubmission 4
> This is a fourth resubmission
>
> * fixed
>    a problem with unmatched variable types encountered
>    during the last submission:
>    runtime error:
>    reference binding to null pointer of type 'const
>    unsigned
>
> other check results as in submission
>    3
>
>
>
>
>
>
> ### Resubmission 3
> This is a third
>    resubmission
>
> * fixed the problem with variable types
>    (unsigned int) in src/U_NZentries.cpp
>
>
> ## Test
>    environments
> * local ubuntu 18.04, R 3.4.4
> * ubuntu
>    16.04 (Travis CI), R-devel
> * Windows Server 2008 R2
>    SP1, R-devel, 32/64 bit (R-hub)
>
> There was 1 NOTE:
> *
>    checking installed package size ... NOTE
>    installed
>    size is  7.0Mb
>    sub-directories of 1Mb or more:
>
>    libs   6.5Mb
>
> This is not unexpected in packages with
>    compiled code as observed by Dirk
>    Eddelbuettel
>
https://stackoverflow.com/questions/53819970/r-package-libs-directory-too-large-after-compilation-to-submit-on-cran
>
>
>
>
>
>
> ###
>    Resubmission 2
> This is a second resubmission.
>
> *
>    fixed an alloc-dealloc-mismatch error as reported
>    here
>
>    https://cran.r-project.org/web/checks/check_results_GPvecchia.html
>
>
> ##
>    Test environments
> * local ubuntu 18.04, R 3.4.4
> *
>    ubuntu 16.04 (Travis CI), R 3.6.1
> * local OS X
>    install, R 3.5.1
>
> ## R CMD check results
> There were
>    no ERRORs or WARNINGs under either Ubuntu
>    version
>
> There were 2 NOTEs on Travis:
>
> * checking
>    installed package size ... NOTE
>    installed size is
>    5.1Mb
>    sub-directories of 1Mb or more:
>
> libs
>    4.6Mb
>
> This is not unexpected in packages with
>    compiled code as observed by Dirk
>    Eddelbuettel
>
https://stackoverflow.com/questions/53819970/r-package-libs-directory-too-large-after-compilation-to-submit-on-cran
>
> *
>    checking for hidden files and directories ... NOTE
>
>    Found the following hidden files and directories:
>
>       .travis.yml
>    These were most likely included in
>    error. See section ?Package
>    structure? in the
>    ?Writing R Extensions? manual.
>
> The said file is
>    listed in .Rbuildignore and the note goes away in the
>    local check of the build tarball
>
>
> There was 1 NOTE
>    on local ubuntu installation:
>
> * checking installed
>    package size ... NOTE
>    installed size is  6.3Mb
>
>    sub-directories of 1Mb or more:
>      libs   5.9Mb
>
> See
>    explanation above
>
>
>
> There was 1 WARNING under local
>    OS X:
>
> *  checking whether package ?GPvecchia?
>    can be installed (41.2s)
>     Found the following
>    significant warnings:
>       Warning: package
>    ?GpGp? was built under R version 3.5.2
>
> Local R
>    version used for development is 3.5.1
>
>
>
> ##
>    Downstream dependencies
> none
>
> =================================================
>
> Original content of DESCRIPTION file:
>
> Package: GPvecchia
> Type: Package
> Title: Scalable Gaussian-Process Approximations
> Version: 0.1.3
> Date: 2020-04-15
> Authors at R: c(
>          person("Matthias", "Katzfuss", role=c("aut"), email="
katzfuss at gmail.com"),
>          person("Marcin", "Jurek", role=c("aut", "cre"), email="
marcinjurek1988 at gmail.com"),
>          person("Daniel", "Zilber", role="aut"),
>          person("Wenlong", "Gong", role="aut"),
>          person("Joe", "Guinness", role="ctb"),
>          person("Jingjie", "Zhang", role="ctb"),
>          person("Florian", "Schaefer", role="ctb"))
> Maintainer: Marcin Jurek <marcinjurek1988 at gmail.com>
> Author: Matthias Katzfuss [aut],
>    Marcin Jurek [aut, cre],
>    Daniel Zilber [aut],
>    Wenlong Gong [aut],
>    Joe Guinness [ctb],
>    Jingjie Zhang [ctb],
>    Florian Schaefer [ctb]
> Description: Fast scalable Gaussian process approximations, particularly
well suited to spatial (aerial, remote-sensed) and environmental data,
described in more detail in Katzfuss and Guinness (2017)
<arXiv:1708.06302>. Package also contains a fast implementation of the
incomplete Cholesky decomposition (IC0), based on Schaefer et al. (2019)
<arXiv:1706.02205> and MaxMin ordering proposed in Guinness (2018)
<arXiv:1609.05372>.
> License: GPL (>=2)
> Imports: Rcpp (>= 0.12.16), methods, stats, sparseinv, fields,
>          Matrix(>= 1.2.14), parallel, GpGp, FNN
> LinkingTo: Rcpp, RcppArmadillo, BH
> RoxygenNote: 6.1.1
> Suggests: mvtnorm, knitr, rmarkdown, testthat
> VignetteBuilder: knitr
> NeedsCompilation: yes
> Packaged: 2020-04-15 22:36:32 UTC; marcin
>

	[[alternative HTML version deleted]]


From er|c@|e||er @end|ng |rom gm@||@com  Mon Apr 20 23:34:08 2020
From: er|c@|e||er @end|ng |rom gm@||@com (Eric Leifer)
Date: Mon, 20 Apr 2020 17:34:08 -0400
Subject: [R-pkg-devel] check_for_cran not responsive
Message-ID: <CADC3n84F5vjFCeAK2pozwbtt3ovduP+p0iNzyU-eXMQap-w0tw@mail.gmail.com>

Hello,
I apologize if I'm asking this question in the wrong place, but I'm trying
to check my R package for upload to CRAN using  the check_for_cran command,
and it's stuck after the following messages:

-  Building package
-  Uploading package
-  Preparing build, see status at

https://builder.r-hub.io/status/factorial2x2_0.2.0.tar.gz-6c92f626dae242f7b915c43bbf111e48

https://builder.r-hub.io/status/factorial2x2_0.2.0.tar.gz-de397558bc2a453cbcd389ffe3a45c77

https://builder.r-hub.io/status/factorial2x2_0.2.0.tar.gz-f500a010bc0e4e07b8dbd0821efaa242

Does anybody know what might be going on?
Thank you.

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Apr 20 23:50:09 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 20 Apr 2020 17:50:09 -0400
Subject: [R-pkg-devel] check_for_cran not responsive
In-Reply-To: <CADC3n84F5vjFCeAK2pozwbtt3ovduP+p0iNzyU-eXMQap-w0tw@mail.gmail.com>
References: <CADC3n84F5vjFCeAK2pozwbtt3ovduP+p0iNzyU-eXMQap-w0tw@mail.gmail.com>
Message-ID: <0fdde86a-2a0c-a707-7296-62394769b76d@gmail.com>

On 20/04/2020 5:34 p.m., Eric Leifer wrote:
> Hello,
> I apologize if I'm asking this question in the wrong place, but I'm trying
> to check my R package for upload to CRAN using  the check_for_cran command,
> and it's stuck after the following messages:
> 
> -  Building package
> -  Uploading package
> -  Preparing build, see status at
> 
> https://builder.r-hub.io/status/factorial2x2_0.2.0.tar.gz-6c92f626dae242f7b915c43bbf111e48
> 
> https://builder.r-hub.io/status/factorial2x2_0.2.0.tar.gz-de397558bc2a453cbcd389ffe3a45c77
> 
> https://builder.r-hub.io/status/factorial2x2_0.2.0.tar.gz-f500a010bc0e4e07b8dbd0821efaa242
> 
> Does anybody know what might be going on?

check_for_cran() is from the rhub package, right?  You probably need to 
ask the package maintainer, who also maintains the website it was 
working with.

Duncan Murdoch


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue Apr 21 06:44:43 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 20 Apr 2020 23:44:43 -0500
Subject: [R-pkg-devel] More GitHub problems
Message-ID: <9cfa4cd6-c4c9-7f58-8ccf-7e724a892e10@effectivedefense.org>

Hello:


 ????? Is there a way to restore the functionality of a local clone of a 
GitHub repository after the SSH key it used was replaced?


 ????? I have a local clone that previously worked fine but now asks for 
a password that I don't think I have when I try "git push".


 ????? Thanks,
 ????? Spencer Graves


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Apr 21 09:15:10 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 21 Apr 2020 10:15:10 +0300
Subject: [R-pkg-devel] More GitHub problems
In-Reply-To: <9cfa4cd6-c4c9-7f58-8ccf-7e724a892e10@effectivedefense.org>
References: <9cfa4cd6-c4c9-7f58-8ccf-7e724a892e10@effectivedefense.org>
Message-ID: <20200421101510.597edfaa@Tarkus>

On Mon, 20 Apr 2020 23:44:43 -0500
Spencer Graves <spencer.graves at effectivedefense.org> wrote:

> Is there a way to restore the functionality of a local clone of a 
> GitHub repository after the SSH key it used was replaced?

Does `git remote -v` in the repo directory show https://github.com/...
or git at github.com:... or ssh://... URLs?

Can you add the new SSH key on <https://github.com/settings/keys> and
check ~/.ssh/config to make sure that it's used when connecting to
github.com? You can verify that the SSH part of the stack works by
running `ssh git at github.com`:

PTY allocation request failed on channel 0
Hi <username>! You've successfully authenticated, but GitHub does not
provide shell access.
Connection to github.com closed.

>  ????? I have a local clone that previously worked fine but now asks
> for a password that I don't think I have when I try "git push".

This sounds like it's using an https:// remote URL, not ssh. But I
might be mistaken.

-- 
Best regards,
Ivan


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue Apr 21 15:30:20 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Tue, 21 Apr 2020 08:30:20 -0500
Subject: [R-pkg-devel] More GitHub problems
In-Reply-To: <20200421101510.597edfaa@Tarkus>
References: <9cfa4cd6-c4c9-7f58-8ccf-7e724a892e10@effectivedefense.org>
 <20200421101510.597edfaa@Tarkus>
Message-ID: <68cdf2eb-5280-e7c6-6d2d-5237a5e802d2@effectivedefense.org>

Hi, Ivan et al:


On 2020-04-21 02:15, Ivan Krylov wrote:
> On Mon, 20 Apr 2020 23:44:43 -0500
> Spencer Graves <spencer.graves at effectivedefense.org> wrote:
>
>> Is there a way to restore the functionality of a local clone of a
>> GitHub repository after the SSH key it used was replaced?
> Does `git remote -v` in the repo directory show https://github.com/...
> or git at github.com:... or ssh://... URLs?
>
> Can you add the new SSH key on <https://github.com/settings/keys> and
> check ~/.ssh/config to make sure that it's used when connecting to
> github.com? You can verify that the SSH part of the stack works by
> running `ssh git at github.com`:
>
> PTY allocation request failed on channel 0
> Hi <username>! You've successfully authenticated, but GitHub does not
> provide shell access.
> Connection to github.com closed.
>
>>   ????? I have a local clone that previously worked fine but now asks
>> for a password that I don't think I have when I try "git push".
> This sounds like it's using an https:// remote URL, not ssh. But I
> might be mistaken.

You were absolutely correct.? The problem was fixed by copying "url = 
git at github.com:<GitHub_user>/<GitHub_repository>.git" from a repository 
where it worked properly into this one, and it worked.


 ????? Thanks,
 ????? Spencer Graves


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Apr 21 20:00:04 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 21 Apr 2020 19:00:04 +0100
Subject: [R-pkg-devel] check_for_cran not responsive
In-Reply-To: <CADC3n84F5vjFCeAK2pozwbtt3ovduP+p0iNzyU-eXMQap-w0tw@mail.gmail.com>
References: <CADC3n84F5vjFCeAK2pozwbtt3ovduP+p0iNzyU-eXMQap-w0tw@mail.gmail.com>
Message-ID: <CABtg=K=qU1S6LcLjoC6ivRf1_cFKq8TZ8xrnK7VGie2uHneeMg@mail.gmail.com>

Hi, please reports R-hub issues at https://github.com/r-hub/rhub/issues

It takes a bit longer to get started when there R-hub is busy. You can
always interrupt the display with CTRL+C / ESC, and then query the
results later:

? rhub::get_check("factorial2x2_0.2.0.tar.gz-6c92f626dae242f7b915c43bbf111e48")

?? factorial2x2 0.2.0: OK

  Build ID:   factorial2x2_0.2.0.tar.gz-6c92f626dae242f7b915c43bbf111e48
  Platform:   Windows Server 2008 R2 SP1, R-devel, 32/64 bit
  Submitted:  20h 48m 11.3s ago
  Build time: 2m 33.8s

You'll always get a summary email as well.

Gabor
0 errors ? | 0 warnings ? | 0 notes ?

On Mon, Apr 20, 2020 at 10:34 PM Eric Leifer <eric.leifer at gmail.com> wrote:
>
> Hello,
> I apologize if I'm asking this question in the wrong place, but I'm trying
> to check my R package for upload to CRAN using  the check_for_cran command,
> and it's stuck after the following messages:
>
> -  Building package
> -  Uploading package
> -  Preparing build, see status at
>
> https://builder.r-hub.io/status/factorial2x2_0.2.0.tar.gz-6c92f626dae242f7b915c43bbf111e48
>
> https://builder.r-hub.io/status/factorial2x2_0.2.0.tar.gz-de397558bc2a453cbcd389ffe3a45c77
>
> https://builder.r-hub.io/status/factorial2x2_0.2.0.tar.gz-f500a010bc0e4e07b8dbd0821efaa242
>
> Does anybody know what might be going on?
> Thank you.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From p@u|@@@v@ry @end|ng |rom un|v-|comte@|r  Wed Apr 22 18:44:26 2020
From: p@u|@@@v@ry @end|ng |rom un|v-|comte@|r (Paul SAVARY)
Date: Wed, 22 Apr 2020 18:44:26 +0200 (CEST)
Subject: [R-pkg-devel] Warning R-hub Windows Server 2008 : qpdf needed
Message-ID: <2147478298.47395542.1587573866435.JavaMail.zimbra@univ-fcomte.fr>

Hello, 

I'm having trouble checking a package (graph4lg). 

With devtools::check_rhub(), I obtain a warning message on Windows Server 2008 

*checking data fro ASCII and uncompressed saves ... OK 
WARNING 
'qpdf' is needed for checks on size reduction of PDFs 

I checked that qpdf is intalled. It is, because I have Rtools. 
Rtools is in my environment path 

That's the first time I obtain this message, although I checked my package several times on Rhub. 
I do not obtain similar messages with other checking platforms. 

I thank you in advance 
Regards 
Paul Savary 


	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Wed Apr 22 18:54:32 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Wed, 22 Apr 2020 17:54:32 +0100
Subject: [R-pkg-devel] Warning R-hub Windows Server 2008 : qpdf needed
In-Reply-To: <2147478298.47395542.1587573866435.JavaMail.zimbra@univ-fcomte.fr>
References: <2147478298.47395542.1587573866435.JavaMail.zimbra@univ-fcomte.fr>
Message-ID: <CABtg=KmvPUsSxgRSZG6o72LZKwPtij57VFfdt7JXH7FN2oZ_bQ@mail.gmail.com>

Hi,

which R version was this? Can you point to a build log?

qpdf is definitely installed on R-hub's Windows machines, and it is
even on the PATH. Maybe the new toolchain did not find it, I have
copied it to a better place now, please try again.

Best,
Gabor

On Wed, Apr 22, 2020 at 5:44 PM Paul SAVARY <paul.savary at univ-fcomte.fr> wrote:
>
> Hello,
>
> I'm having trouble checking a package (graph4lg).
>
> With devtools::check_rhub(), I obtain a warning message on Windows Server 2008
>
> *checking data fro ASCII and uncompressed saves ... OK
> WARNING
> 'qpdf' is needed for checks on size reduction of PDFs
>
> I checked that qpdf is intalled. It is, because I have Rtools.
> Rtools is in my environment path
>
> That's the first time I obtain this message, although I checked my package several times on Rhub.
> I do not obtain similar messages with other checking platforms.
>
> I thank you in advance
> Regards
> Paul Savary
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From d@n|e|@nue@t @end|ng |rom un|-muen@ter@de  Wed Apr 22 18:55:29 2020
From: d@n|e|@nue@t @end|ng |rom un|-muen@ter@de (=?UTF-8?Q?Daniel_N=c3=bcst?=)
Date: Wed, 22 Apr 2020 18:55:29 +0200
Subject: [R-pkg-devel] Warning R-hub Windows Server 2008 : qpdf needed
In-Reply-To: <2147478298.47395542.1587573866435.JavaMail.zimbra@univ-fcomte.fr>
References: <2147478298.47395542.1587573866435.JavaMail.zimbra@univ-fcomte.fr>
Message-ID: <ae9ca87c-b9fd-b621-8335-6b3ebb5f37e1@uni-muenster.de>

Hi Paul,

On 22.04.20 18:44, Paul SAVARY wrote:
> I'm having trouble checking a package (graph4lg).
> 
> With devtools::check_rhub(), I obtain a warning message on Windows Server 2008
> 
> *checking data fro ASCII and uncompressed saves ... OK
> WARNING
> 'qpdf' is needed for checks on size reduction of PDFs
> 
> I checked that qpdf is intalled. It is, because I have Rtools.
> Rtools is in my environment path

The function actually submits your package to the R-hub builder, see 
?devtools::check_rhub so you having qpdf installed locally does not help.

Looking at the r-hub/wincheck repository, I found this documentation 
file that qpdf is currently not available yet: 
https://github.com/r-hub/wincheck/blob/master/Extra.md

So you probably have to live with this warning.


Hope this helps!

/Daniel



> That's the first time I obtain this message, although I checked my package several times on Rhub.
> I do not obtain similar messages with other checking platforms.
> 
> I thank you in advance
> Regards
> Paul Savary
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

-- 
Daniel N?st
Institute for Geoinformatics (ifgi),   University of M?nster
Heisenbergstra?e 2, 48149 M?nster, Germany; +49 251 83 31962
https://nuest.staff.ifgi.de | @nordholmen | https://o2r.info


From bgunter@4567 @end|ng |rom gm@||@com  Thu Apr 23 01:03:15 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 22 Apr 2020 16:03:15 -0700
Subject: [R-pkg-devel] Math symbols in .Rd files
Message-ID: <CAGxFJbSzFEQ2CXbLPGszUoHRjFvkGEK7+r3qUWZZrcCJ1m1Stw@mail.gmail.com>

OS: Mac OSX Catalina
R Version 3.6.3
UTF-8 declared as Encoding in DESCRIPTION file

First, apologies: I'm nearly certain that this has been asked (many
times) before, and I think I know the answer. But I need to verify.

\eqn{...} allows me to insert a few math symbols in .Rd files, but
does not seem to work for symbols equivalent to unicode U+00B0 (degree
sign) and U+00B1 (plus minus sign). That is \eqn{\pm } is not rendered
properly, and there is no degree sign for Latex without adding
packages.  I can enter these as Mac symbols (presumably using UTF-8
encoding)  and they render properly on my machine in the installed
package documentation. But CRAN's winbuilder doesn't like them with
error message:

LaTeX errors found:
! Package inputenc Error: Unicode char ? (U+2264)
(inputenc)                not set up for use with LaTeX.

Are there any fixes/workarounds other than a fallback to plain text?

Thanks. Again, my apologies for asking this again, but I just wanted
to be sure my understanding is correct -- or find out where I'm
confused.

Bert Gunter


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Apr 23 04:17:24 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 23 Apr 2020 14:17:24 +1200
Subject: [R-pkg-devel] [FORGED]  Math symbols in .Rd files
In-Reply-To: <CAGxFJbSzFEQ2CXbLPGszUoHRjFvkGEK7+r3qUWZZrcCJ1m1Stw@mail.gmail.com>
References: <CAGxFJbSzFEQ2CXbLPGszUoHRjFvkGEK7+r3qUWZZrcCJ1m1Stw@mail.gmail.com>
Message-ID: <f58d8998-b1a6-9a3b-cead-0715233e174a@auckland.ac.nz>


On 23/04/20 11:03 am, Bert Gunter wrote:

> OS: Mac OSX Catalina
> R Version 3.6.3
> UTF-8 declared as Encoding in DESCRIPTION file
> 
> First, apologies: I'm nearly certain that this has been asked (many
> times) before, and I think I know the answer. But I need to verify.
> 
> \eqn{...} allows me to insert a few math symbols in .Rd files, but
> does not seem to work for symbols equivalent to unicode U+00B0 (degree
> sign) and U+00B1 (plus minus sign). That is \eqn{\pm } is not rendered
> properly, and there is no degree sign for Latex without adding
> packages.  I can enter these as Mac symbols (presumably using UTF-8
> encoding)  and they render properly on my machine in the installed
> package documentation. But CRAN's winbuilder doesn't like them with
> error message:
> 
> LaTeX errors found:
> ! Package inputenc Error: Unicode char ? (U+2264)
> (inputenc)                not set up for use with LaTeX.
> 
> Are there any fixes/workarounds other than a fallback to plain text?
> 
> Thanks. Again, my apologies for asking this again, but I just wanted
> to be sure my understanding is correct -- or find out where I'm
> confused.

My understanding is that \eqn{...} doesn't really work with html, only 
with LaTeX.  You need to do something like:

\eqn{\hat{\theta} \pm 1.96 \times SE}{theta.hat +/- 1.96*SE}

which (for me at least) gives a nicely rendered result in LaTeX -> pdf 
and the kludgy workaround in html.

As for the degree sign I find that \eqn{42^\circ} gives acceptable 
results in LaTeX, but of course doesn't work in html.

My understanding is that if you enclose things like "?" or "?" in 
\enc{...} and have

\encoding{UTF-8}

as the very first line of your *.Rd file, then CRAN won't complain about 
the presence of these symbols.  But this doesn't work inside \eqn{...}; 
there the "\enc{...}" gets rendered literally.

So for html I think you are stuck with the kludgy fallback to plain text.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From t|@goo||voto @end|ng |rom gm@||@com  Thu Apr 23 04:33:26 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Wed, 22 Apr 2020 23:33:26 -0300
Subject: [R-pkg-devel] Error in \donttest{} not observed with --run-donttest
 option
Message-ID: <000001d61917$92bb9f00$b832dd00$@gmail.com>

Dear all,

I've submitted the v1.5.0 of my R package metan
<https://github.com/TiagoOlivoto/metan> a few days ago to fix some errors
related to a recent upgrade of package 'tibble' to version 3.0.0, with
breaking changes described at
<https://tibble.tidyverse.org/news/index.html>.  When checking locally metan
v1.5.0' with "R CMD check --as-cran --run-donttest metan_1.5.0.tar.gz" no
errors were observed (log file attached).

 

On Monday 13, April, I was notified that "Version 1.5.0 still fails in its
\donttest examples, which should work". Looking to the CRAN Package Check
Results page <https://www.stats.ox.ac.uk/pub/bdr/donttest/metan.out> I
observed an error that occurred because I used a data set with
non-significant genotype effect to compute an index that requires a
significant genotype effect in all trait. Unfortunately, metan was removed
from CRAN because check problems were not corrected in time.

 

Any idea about why I've not observed any error even using  --run-donttest
option locally?  That function's example had not been changed since the
first release, so, I'm also asking myself why this error was observed only
now, after four successful releases on CRAN.

 

I'd appreciate any comment.

Best regards,

Tiago

 


From bgunter@4567 @end|ng |rom gm@||@com  Thu Apr 23 04:57:03 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 22 Apr 2020 19:57:03 -0700
Subject: [R-pkg-devel] [FORGED]  Math symbols in .Rd files
In-Reply-To: <f58d8998-b1a6-9a3b-cead-0715233e174a@auckland.ac.nz>
References: <CAGxFJbSzFEQ2CXbLPGszUoHRjFvkGEK7+r3qUWZZrcCJ1m1Stw@mail.gmail.com>
 <f58d8998-b1a6-9a3b-cead-0715233e174a@auckland.ac.nz>
Message-ID: <CAGxFJbSp_yZZGnRkCUdMXLGGrCqrN8nUkTSK=vmNRrpLA_KGRg@mail.gmail.com>

Thanks, Rolf. This is very helpful.

Actually, I'm not that concerned about latex --> pdf. It's the html
that I want rendered nicely. So I'll see is that \enc{...} approach
works and gets me through the CRAN checks.

Not that the package is a big deal anyway -- just something I hope
might be useful to a few folks on occasion.

Bert


On Wed, Apr 22, 2020 at 7:17 PM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>
> On 23/04/20 11:03 am, Bert Gunter wrote:
>
> > OS: Mac OSX Catalina
> > R Version 3.6.3
> > UTF-8 declared as Encoding in DESCRIPTION file
> >
> > First, apologies: I'm nearly certain that this has been asked (many
> > times) before, and I think I know the answer. But I need to verify.
> >
> > \eqn{...} allows me to insert a few math symbols in .Rd files, but
> > does not seem to work for symbols equivalent to unicode U+00B0 (degree
> > sign) and U+00B1 (plus minus sign). That is \eqn{\pm } is not rendered
> > properly, and there is no degree sign for Latex without adding
> > packages.  I can enter these as Mac symbols (presumably using UTF-8
> > encoding)  and they render properly on my machine in the installed
> > package documentation. But CRAN's winbuilder doesn't like them with
> > error message:
> >
> > LaTeX errors found:
> > ! Package inputenc Error: Unicode char ? (U+2264)
> > (inputenc)                not set up for use with LaTeX.
> >
> > Are there any fixes/workarounds other than a fallback to plain text?
> >
> > Thanks. Again, my apologies for asking this again, but I just wanted
> > to be sure my understanding is correct -- or find out where I'm
> > confused.
>
> My understanding is that \eqn{...} doesn't really work with html, only
> with LaTeX.  You need to do something like:
>
> \eqn{\hat{\theta} \pm 1.96 \times SE}{theta.hat +/- 1.96*SE}
>
> which (for me at least) gives a nicely rendered result in LaTeX -> pdf
> and the kludgy workaround in html.
>
> As for the degree sign I find that \eqn{42^\circ} gives acceptable
> results in LaTeX, but of course doesn't work in html.
>
> My understanding is that if you enclose things like "?" or "?" in
> \enc{...} and have
>
> \encoding{UTF-8}
>
> as the very first line of your *.Rd file, then CRAN won't complain about
> the presence of these symbols.  But this doesn't work inside \eqn{...};
> there the "\enc{...}" gets rendered literally.
>
> So for html I think you are stuck with the kludgy fallback to plain text.
>
> cheers,
>
> Rolf
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276


From p@u|@@@v@ry @end|ng |rom un|v-|comte@|r  Thu Apr 23 09:30:44 2020
From: p@u|@@@v@ry @end|ng |rom un|v-|comte@|r (Paul SAVARY)
Date: Thu, 23 Apr 2020 09:30:44 +0200 (CEST)
Subject: [R-pkg-devel] (SOLVED) Warning R-hub Windows Server 2008 : qpdf
 needed
In-Reply-To: <CABtg=KmvPUsSxgRSZG6o72LZKwPtij57VFfdt7JXH7FN2oZ_bQ@mail.gmail.com>
References: <2147478298.47395542.1587573866435.JavaMail.zimbra@univ-fcomte.fr>
 <CABtg=KmvPUsSxgRSZG6o72LZKwPtij57VFfdt7JXH7FN2oZ_bQ@mail.gmail.com>
Message-ID: <1878998597.47687493.1587627044560.JavaMail.zimbra@univ-fcomte.fr>

Hi,

Here is the build log showing this warning message: https://builder.r-hub.io/status/graph4lg_0.5.0.tar.gz-31e8935d0c724c4b9d6986f31eeff357 

I have just tried again and this warning message does not show up anymore. I thank you Gabor for your help.
(new build log: https://builder.r-hub.io/status/graph4lg_0.5.0.tar.gz-6e69d658b38242d0a81efaae5d942be9)

Best regards
Paul

----- Mail original -----
De: "G?bor Cs?rdi" <csardi.gabor at gmail.com>
?: "Paul SAVARY" <paul.savary at univ-fcomte.fr>
Cc: "r-package-devel" <r-package-devel at r-project.org>
Envoy?: Mercredi 22 Avril 2020 18:54:32
Objet: Re: [R-pkg-devel] Warning R-hub Windows Server 2008 : qpdf needed

Hi,

which R version was this? Can you point to a build log?

qpdf is definitely installed on R-hub's Windows machines, and it is
even on the PATH. Maybe the new toolchain did not find it, I have
copied it to a better place now, please try again.

Best,
Gabor

On Wed, Apr 22, 2020 at 5:44 PM Paul SAVARY <paul.savary at univ-fcomte.fr> wrote:
>
> Hello,
>
> I'm having trouble checking a package (graph4lg).
>
> With devtools::check_rhub(), I obtain a warning message on Windows Server 2008
>
> *checking data fro ASCII and uncompressed saves ... OK
> WARNING
> 'qpdf' is needed for checks on size reduction of PDFs
>
> I checked that qpdf is intalled. It is, because I have Rtools.
> Rtools is in my environment path
>
> That's the first time I obtain this message, although I checked my package several times on Rhub.
> I do not obtain similar messages with other checking platforms.
>
> I thank you in advance
> Regards
> Paul Savary
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu Apr 23 13:51:22 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 23 Apr 2020 12:51:22 +0100
Subject: [R-pkg-devel] Non-standard things in the check directory
In-Reply-To: <d3d3e30d30bf44f29711cd565c926612@nyulangone.org>
References: <d3d3e30d30bf44f29711cd565c926612@nyulangone.org>
Message-ID: <CABtg=KnrpoqgaGggjS=vHd9x7MuWpxUSTB_oWdyv-KKOT6Rprw@mail.gmail.com>

Just realized that nobody replied to this. So this seems to be a bug
in `R CMD check --as-cran`, it does not ignore the arch specific
examples and tests directories and files. It happens as well if you
run your check on a local windows, not just on R-hub.

Should I open a bug for this?

There is an env var for it called _R_CHECK_THINGS_IN_CHECK_DIR_, but
--as-cran overrides that, so there is not much we can do about it on
R-hub.

Right now this NOTE does not show up in new package submissions, new
package submission probably do not use `--as-cran`, but they set up
their own configuration, which might look like this:
https://svn.r-project.org/R-dev-web/trunk/CRAN/QA/Uwe/make/incoming_env.bat

Summary: you'll have to ignore this NOTE for now on R-hub and on your machines.

Gabor


On Tue, Mar 31, 2020 at 3:37 PM Goldfeld, Keith
<Keith.Goldfeld at nyulangone.org> wrote:
>
> Good morning -
> I am running checks (using devtools::check_rhub) for my package `simstudy`, and I get one note from one server, Windows Server 2008 R2 SP1, R-devel, 32/64 bit:
> NOTES:
>
> * checking for non-standard things in the check directory ... NOTE
> Found the following files/directories:
>   'examples_i386' 'examples_x64' 'simstudy-Ex_i386.Rout'
>   'simstudy-Ex_x64.Rout' 'tests_i386' 'tests_x64'
>
> In my previous submission, I got this note as well. I see that it is likely a server issue, and not my issue, but is there any way for me to modify my package to make this go away?
>
>
> - Keith
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |@w@onj@|7net @end|ng |rom gm@||@com  Thu Apr 23 17:10:35 2020
From: |@w@onj@|7net @end|ng |rom gm@||@com (John Lawson)
Date: Thu, 23 Apr 2020 09:10:35 -0600
Subject: [R-pkg-devel] WARNING Files in the 'vignettes' directory but no
 files in 'inst/doc':
Message-ID: <CAJiVmSDHNQSeRynfBKU5g7hU3hHibaVvZXG3VaeXg6sX=oiTOQ@mail.gmail.com>

My AQLSchemes package has a pdf vignette created with Rmarkdown. I tried to
add a vignette to my daewr package in exactly the same way, by setting the
Description file like the AQLSchemes package Description file with the
statements
Suggests: R.rsp
VignetteBuilder: R.rsp.

In both packages I put the vignette .Rmd file and output .pdf file in the
vignettes directory, and the inst directory is empty

When I run the check on the AQLSchemes  on my local machine, I see the
messages

-  preparing 'AQLSchemes':
v  checking DESCRIPTION meta-information ...
-  installing the package to build vignettes
...
> checking sizes of PDF files under 'inst/doc' ... NOTE
  Unable to find GhostScript executable to run checks on size reduction

0 errors v | 0 warnings v | 1 note x

and the package builds correctly with the vignette

However,  when I run the check on daewr I see the messages
-  preparing 'daewr': (665ms)
v  checking DESCRIPTION meta-information ...
-  checking for LF line-endings in source and make files and shell scripts
(894ms)
-  checking for empty or unneeded directories
   Removed empty directory 'daewr/inst'
...
> checking files in 'vignettes' ... WARNING
  Files in the 'vignettes' directory but no files in 'inst/doc':
    'ModelRobust.Rmd', 'ModelRobust.pdf'

0 errors v | 1 warning x | 0 notes v
Error: R CMD check found WARNINGs
Execution halted

The two packages are set up in the same way. Any insight as to why one
builds with the vignette but the other does not, would be greatly
appreciated.

Sincerely John Lawson

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Apr 23 18:04:55 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 23 Apr 2020 12:04:55 -0400
Subject: [R-pkg-devel] WARNING Files in the 'vignettes' directory but no
 files in 'inst/doc':
In-Reply-To: <CAJiVmSDHNQSeRynfBKU5g7hU3hHibaVvZXG3VaeXg6sX=oiTOQ@mail.gmail.com>
References: <CAJiVmSDHNQSeRynfBKU5g7hU3hHibaVvZXG3VaeXg6sX=oiTOQ@mail.gmail.com>
Message-ID: <029e9b06-5045-8090-acbb-3727345875ec@gmail.com>

On 23/04/2020 11:10 a.m., John Lawson wrote:
> My AQLSchemes package has a pdf vignette created with Rmarkdown. I tried to
> add a vignette to my daewr package in exactly the same way, by setting the
> Description file like the AQLSchemes package Description file with the
> statements
> Suggests: R.rsp
> VignetteBuilder: R.rsp.
> 
> In both packages I put the vignette .Rmd file and output .pdf file in the
> vignettes directory, and the inst directory is empty
> 
> When I run the check on the AQLSchemes  on my local machine, I see the
> messages
> 
> -  preparing 'AQLSchemes':
> v  checking DESCRIPTION meta-information ...
> -  installing the package to build vignettes
> ...
>> checking sizes of PDF files under 'inst/doc' ... NOTE
>    Unable to find GhostScript executable to run checks on size reduction
> 
> 0 errors v | 0 warnings v | 1 note x
> 
> and the package builds correctly with the vignette
> 
> However,  when I run the check on daewr I see the messages
> -  preparing 'daewr': (665ms)
> v  checking DESCRIPTION meta-information ...
> -  checking for LF line-endings in source and make files and shell scripts
> (894ms)
> -  checking for empty or unneeded directories
>     Removed empty directory 'daewr/inst'
> ...
>> checking files in 'vignettes' ... WARNING
>    Files in the 'vignettes' directory but no files in 'inst/doc':
>      'ModelRobust.Rmd', 'ModelRobust.pdf'
> 
> 0 errors v | 1 warning x | 0 notes v
> Error: R CMD check found WARNINGs
> Execution halted
> 
> The two packages are set up in the same way. Any insight as to why one
> builds with the vignette but the other does not, would be greatly
> appreciated.
> 

As far as I know R.rsp doesn't support Rmd vignettes.  I just took a 
quick look at the code, and it appears to support these formats:  .rsp, 
.pdf.asis, .html.asis, .tex, .ltx, .md, .md.rsp.

So you should rename the source file to one of those, or choose a 
different vignette engine.  knitr::rmarkdown is the usual engine to use 
with R Markdown files.

Duncan Murdoch


From @tu@rt@|@cy @end|ng |rom york@@c@uk  Thu Apr 23 20:06:58 2020
From: @tu@rt@|@cy @end|ng |rom york@@c@uk (Stuart Lacy)
Date: Thu, 23 Apr 2020 19:06:58 +0100
Subject: [R-pkg-devel] Package fails on OSX on CRAN but not on rhub
Message-ID: <CAHNFD2BVetqPk=1=8nf_44UkzUpW=s=Mn8VcpMX6eUD-9LnUfg@mail.gmail.com>

Hi,

I've been told to fix the problems that my package 'multistateutils' has on
OSX:
https://cran.r-project.org/web/checks/check_results_multistateutils.html

This is seemingly something to do with my Rcpp code, but I can't debug it
on my local (Linux) machine, as when I check my code using Rhub it passes
the checks:
https://builder.r-hub.io/status/multistateutils_1.2.4.tar.gz-9295de3b93d746eb93983d33269cf08d

Does anyone have any tips for testing their packages on OSX, or any
OSX-specific issues with Rcpp?

Thanks,
Stuart
-- 
Stuart Lacy
Research Software Engineer
Wolfson Atmospheric Chemistry Lab & Information Services
*C/G/116*
University of York
Heslington
York
YO10 5DD
+44 (0)1904 324756

[image:
https://www.york.ac.uk/media/abouttheuniversity/supportservices/informationdirectorate/images/cse/CSEUK%20Primary%20(r)%20RGB-80x95.jpg]
Disclaimer: https://www.york.ac.uk/about/legal-statements/email-disclaimer/

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Thu Apr 23 20:24:20 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 23 Apr 2020 13:24:20 -0500
Subject: [R-pkg-devel] Package fails on OSX on CRAN but not on rhub
In-Reply-To: <CAHNFD2BVetqPk=1=8nf_44UkzUpW=s=Mn8VcpMX6eUD-9LnUfg@mail.gmail.com>
References: <CAHNFD2BVetqPk=1=8nf_44UkzUpW=s=Mn8VcpMX6eUD-9LnUfg@mail.gmail.com>
Message-ID: <24225.56660.761108.218155@rob.eddelbuettel.com>


On 23 April 2020 at 19:06, Stuart Lacy via R-package-devel wrote:
| I've been told to fix the problems that my package 'multistateutils' has on
| OSX:
| https://cran.r-project.org/web/checks/check_results_multistateutils.html
| 
| This is seemingly something to do with my Rcpp code, but I can't debug it
| on my local (Linux) machine, as when I check my code using Rhub it passes
| the checks:
| https://builder.r-hub.io/status/multistateutils_1.2.4.tar.gz-9295de3b93d746eb93983d33269cf08d
| 
| Does anyone have any tips for testing their packages on OSX, or any
| OSX-specific issues with Rcpp?

Yes -- Rcpp 1.0.4 passed on macOS at CRAN was released there. And only
post-release, many macOS users (who could have tested pre-release) made a lot
of noise concerning issues on their machines.  Eventually, and thanks to
careful digging by Winston, it was seen as being caused by a newer (relative
to what CRAN has) macOS SDK issued by Apple. And Rcpp 1.0.4.6 was prepared
almost three weeks ago, admitted on CRAN about two weeks ago ... but still
only has one out of three binaries for macOS built on CRAN as you see at

   https://cloud.r-project.org/web/packages/Rcpp/index.html

Given that the _binary_ package for macOS may be useless for you, you could
try to force installation of the _source_ package for your testing.

It should work just fine.

If you want to see more details, see issue #1060 at the Rcpp GitHub repo.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From retep@me|@@ner @end|ng |rom gm@||@com  Thu Apr 23 20:34:40 2020
From: retep@me|@@ner @end|ng |rom gm@||@com (Peter Meissner)
Date: Thu, 23 Apr 2020 20:34:40 +0200
Subject: [R-pkg-devel] CRAN-Policies
Message-ID: <CAB-BFRrY-RWafC5-KY4qAKpBToOJMYhSiLginE5A-g0aunPPVw@mail.gmail.com>

Hello Everyone,

some weeks back I already wrote to CRAN but got no response. So, I post my
question here seeking for advice.

I am trying to publish a package to CRAN. I got rejected once with some
minor change requests. I implemented them and submitted again. This time I
got a whole array of change requests.

The problem is, I am confused since none of the requests is mentioned
anywhere in CRAN policies. So, are those mere suggestions? Are these common
policy now? Has everyone to implement them? How should I proceed?

(In general, I have no problem with complying with CRAN policies, but I am
not sure if these are actually common requirements now or not.)

Copy of the change requests:

***************** quote >>>> **************************************
Please add \value to all .Rd files for exported functions and explain
the functions results in the documentation.
f.i.: time_stamp.Rd
If a function does not return a value, please document that too, e.g.
\value{None}.

The \description tag in the .Rd files should be one or two sentences on
how the function works and what it's good for. Don't just repeat the
function name.
F.i.: stats_modus_multi.Rd

An .Rd file title should:
- be capitalized
- not end in a period
- be at most 65 characters long
- exist and stand alone (there must be exactly one title)
Please adjust to these standards and again don't simply repeat the name.
https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Documenting-functions
F.i.: stats_modus_multi.Rd

Please fix and resubmit, and document what was changed in the submission
comments.
***************** <<<< quote **************************************


Best, Peter

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Thu Apr 23 20:36:00 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 23 Apr 2020 13:36:00 -0500
Subject: [R-pkg-devel] Package fails on OSX on CRAN but not on rhub
In-Reply-To: <24225.56660.761108.218155@rob.eddelbuettel.com>
References: <CAHNFD2BVetqPk=1=8nf_44UkzUpW=s=Mn8VcpMX6eUD-9LnUfg@mail.gmail.com>
 <24225.56660.761108.218155@rob.eddelbuettel.com>
Message-ID: <24225.57360.41161.5266@rob.eddelbuettel.com>


Stuart,

As a follow-up, the errors are of the '*** caught illegal operation ***'
variety which is frequently seen when different compiled components (and
particularly C++ ones) are out of sync with respect to their toolchains.

So I would suggest a clean rebuild, but given that it is at CRAN that is out
of our hands.

Sorry,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Apr 23 20:51:44 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 23 Apr 2020 14:51:44 -0400
Subject: [R-pkg-devel] CRAN-Policies
In-Reply-To: <CAB-BFRrY-RWafC5-KY4qAKpBToOJMYhSiLginE5A-g0aunPPVw@mail.gmail.com>
References: <CAB-BFRrY-RWafC5-KY4qAKpBToOJMYhSiLginE5A-g0aunPPVw@mail.gmail.com>
Message-ID: <1933f8df-48e0-dea2-9f27-ef7e9dab6caf@gmail.com>

On 23/04/2020 2:34 p.m., Peter Meissner wrote:
> Hello Everyone,
> 
> some weeks back I already wrote to CRAN but got no response. So, I post my
> question here seeking for advice.
> 
> I am trying to publish a package to CRAN. I got rejected once with some
> minor change requests. I implemented them and submitted again. This time I
> got a whole array of change requests.
> 
> The problem is, I am confused since none of the requests is mentioned
> anywhere in CRAN policies. So, are those mere suggestions? Are these common
> policy now? Has everyone to implement them? How should I proceed?

I'd say that the changes being requested are all things stated in the 
Writing R Extensions manual, so this falls under the blanket statement 
in the policy that "CRAN hosts packages of publication quality and is 
not a development platform."

> (In general, I have no problem with complying with CRAN policies, but I am
> not sure if these are actually common requirements now or not.)

I'd guess the requests will vary depending on who the reviewer is and 
what their mood is, but if you ignore their requests, you're not going 
to put them in a better mood.

Duncan Murdoch

> 
> Copy of the change requests:
> 
> ***************** quote >>>> **************************************
> Please add \value to all .Rd files for exported functions and explain
> the functions results in the documentation.
> f.i.: time_stamp.Rd
> If a function does not return a value, please document that too, e.g.
> \value{None}.
> 
> The \description tag in the .Rd files should be one or two sentences on
> how the function works and what it's good for. Don't just repeat the
> function name.
> F.i.: stats_modus_multi.Rd
> 
> An .Rd file title should:
> - be capitalized
> - not end in a period
> - be at most 65 characters long
> - exist and stand alone (there must be exactly one title)
> Please adjust to these standards and again don't simply repeat the name.
> https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Documenting-functions
> F.i.: stats_modus_multi.Rd
> 
> Please fix and resubmit, and document what was changed in the submission
> comments.
> ***************** <<<< quote **************************************
> 
> 
> Best, Peter
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @|@n@c@nt|n @end|ng |rom c@n@d@@c@  Thu Apr 23 22:53:30 2020
From: @|@n@c@nt|n @end|ng |rom c@n@d@@c@ (Cantin, Alan (NRCan/RNCan))
Date: Thu, 23 Apr 2020 20:53:30 +0000
Subject: [R-pkg-devel] Documenting raw data
Message-ID: <mailman.5352.8.1587676604.2263.r-package-devel@r-project.org>

Hi Folks,

Looking for some help documenting my raw data (data in inst/extdata).

Is the correct doctype "data"?

The usage of loading this type of data is system.file("extdata", nameoffile, package="nameofpackage")

Is this the correct string to put in the \usage section?  I have tried this, but get errors such as:

Functions or methods with usage in documentation object 'nameoffile' but not in code:
    'system.file'


Has anyone done this recently and have an example to see where I'm going wrong?

This check seems to be new as in the past I simply had lazydata set to true and it passed tests.

Thanks for any help.

Cheers,

Alan Cantin



	[[alternative HTML version deleted]]


From retep@me|@@ner @end|ng |rom gm@||@com  Fri Apr 24 14:42:29 2020
From: retep@me|@@ner @end|ng |rom gm@||@com (Peter Meissner)
Date: Fri, 24 Apr 2020 14:42:29 +0200
Subject: [R-pkg-devel] CRAN-Policies
In-Reply-To: <1933f8df-48e0-dea2-9f27-ef7e9dab6caf@gmail.com>
References: <CAB-BFRrY-RWafC5-KY4qAKpBToOJMYhSiLginE5A-g0aunPPVw@mail.gmail.com>
 <1933f8df-48e0-dea2-9f27-ef7e9dab6caf@gmail.com>
Message-ID: <CAB-BFRp=Q1LPG44rUXHgpxowVWWud8GzT2vgmMZVD5E+zei=Xg@mail.gmail.com>

Hey,

thanks for taking the time to reply - I will start working on my changes
requests then.

Best, Peter




Am Do., 23. Apr. 2020 um 20:51 Uhr schrieb Duncan Murdoch <
murdoch.duncan at gmail.com>:

> On 23/04/2020 2:34 p.m., Peter Meissner wrote:
> > Hello Everyone,
> >
> > some weeks back I already wrote to CRAN but got no response. So, I post
> my
> > question here seeking for advice.
> >
> > I am trying to publish a package to CRAN. I got rejected once with some
> > minor change requests. I implemented them and submitted again. This time
> I
> > got a whole array of change requests.
> >
> > The problem is, I am confused since none of the requests is mentioned
> > anywhere in CRAN policies. So, are those mere suggestions? Are these
> common
> > policy now? Has everyone to implement them? How should I proceed?
>
> I'd say that the changes being requested are all things stated in the
> Writing R Extensions manual, so this falls under the blanket statement
> in the policy that "CRAN hosts packages of publication quality and is
> not a development platform."
>
> > (In general, I have no problem with complying with CRAN policies, but I
> am
> > not sure if these are actually common requirements now or not.)
>
> I'd guess the requests will vary depending on who the reviewer is and
> what their mood is, but if you ignore their requests, you're not going
> to put them in a better mood.
>
> Duncan Murdoch
>
> >
> > Copy of the change requests:
> >
> > ***************** quote >>>> **************************************
> > Please add \value to all .Rd files for exported functions and explain
> > the functions results in the documentation.
> > f.i.: time_stamp.Rd
> > If a function does not return a value, please document that too, e.g.
> > \value{None}.
> >
> > The \description tag in the .Rd files should be one or two sentences on
> > how the function works and what it's good for. Don't just repeat the
> > function name.
> > F.i.: stats_modus_multi.Rd
> >
> > An .Rd file title should:
> > - be capitalized
> > - not end in a period
> > - be at most 65 characters long
> > - exist and stand alone (there must be exactly one title)
> > Please adjust to these standards and again don't simply repeat the name.
> >
> https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Documenting-functions
> > F.i.: stats_modus_multi.Rd
> >
> > Please fix and resubmit, and document what was changed in the submission
> > comments.
> > ***************** <<<< quote **************************************
> >
> >
> > Best, Peter
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>

	[[alternative HTML version deleted]]


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Sun Apr 26 15:41:27 2020
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Sun, 26 Apr 2020 13:41:27 +0000
Subject: [R-pkg-devel] /usr/bin/ld: cannot find -ludev
Message-ID: <9582A33F-BB15-4E64-86D4-2E9AE9AD2652@kaust.edu.sa>

I am getting this error when trying to install my package on CRAN. Do I need to contact
CRAN to include it on the CRAN system? or there is another solution.


/usr/bin/ld: cannot find -ludev
collect2: error: ld returned 1 exit status



--Sameh



	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Apr 26 17:01:13 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 26 Apr 2020 08:01:13 -0700
Subject: [R-pkg-devel] /usr/bin/ld: cannot find -ludev
In-Reply-To: <9582A33F-BB15-4E64-86D4-2E9AE9AD2652@kaust.edu.sa>
References: <9582A33F-BB15-4E64-86D4-2E9AE9AD2652@kaust.edu.sa>
Message-ID: <60ED4775-2207-4DFF-8F59-85EEFF2962D8@dcn.davis.ca.us>

This is a highly OS-specific dependency. Are you sure you need this? Is it listed in your SystemRequirements entry in your DESCRIPTION file?

On April 26, 2020 6:41:27 AM PDT, "Sameh M. Abdulah" <sameh.abdulah at kaust.edu.sa> wrote:
>I am getting this error when trying to install my package on CRAN. Do I
>need to contact
>CRAN to include it on the CRAN system? or there is another solution.
>
>
>/usr/bin/ld: cannot find -ludev
>collect2: error: ld returned 1 exit status
>
>
>
>--Sameh
>
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Sun Apr 26 17:39:50 2020
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Sun, 26 Apr 2020 15:39:50 +0000
Subject: [R-pkg-devel] /usr/bin/ld: cannot find -ludev
In-Reply-To: <60ED4775-2207-4DFF-8F59-85EEFF2962D8@dcn.davis.ca.us>
References: <9582A33F-BB15-4E64-86D4-2E9AE9AD2652@kaust.edu.sa>,
 <60ED4775-2207-4DFF-8F59-85EEFF2962D8@dcn.davis.ca.us>
Message-ID: <AB7C14D7-242A-432B-86EF-C30E1002C72F@kaust.edu.sa>

Yes, I think I will need it but I did not specify it in my DESCRIPTION file, since I know that this is an OS libs, does adding this will help?


?Sameh

> On Apr 26, 2020, at 6:01 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> 
> ?This is a highly OS-specific dependency. Are you sure you need this? Is it listed in your SystemRequirements entry in your DESCRIPTION file?
> 
>> On April 26, 2020 6:41:27 AM PDT, "Sameh M. Abdulah" <sameh.abdulah at kaust.edu.sa> wrote:
>> I am getting this error when trying to install my package on CRAN. Do I
>> need to contact
>> CRAN to include it on the CRAN system? or there is another solution.
>> 
>> 
>> /usr/bin/ld: cannot find -ludev
>> collect2: error: ld returned 1 exit status
>> 
>> 
>> 
>> --Sameh
>> 
>> 
>> 
>>    [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> -- 
> Sent from my phone. Please excuse my brevity.

From kry|ov@r00t @end|ng |rom gm@||@com  Sun Apr 26 19:57:28 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sun, 26 Apr 2020 20:57:28 +0300
Subject: [R-pkg-devel] /usr/bin/ld: cannot find -ludev
In-Reply-To: <AB7C14D7-242A-432B-86EF-C30E1002C72F@kaust.edu.sa>
References: <9582A33F-BB15-4E64-86D4-2E9AE9AD2652@kaust.edu.sa>
 <60ED4775-2207-4DFF-8F59-85EEFF2962D8@dcn.davis.ca.us>
 <AB7C14D7-242A-432B-86EF-C30E1002C72F@kaust.edu.sa>
Message-ID: <20200426205728.3b16aaac@Tarkus>

On Sun, 26 Apr 2020 15:39:50 +0000
"Sameh M. Abdulah" <sameh.abdulah at kaust.edu.sa> wrote:

> Yes, I think I will need it

Could you tell us why your package needs it? Perhaps there is a way
to make it an optional dependency.

> since I know that this is an OS libs

It is true that libudev is required for successful bootup of most
desktop and server GNU/Linux installations... not so for *BSDs, macOS,
Solaris, and Windows. I think that libudev (now part of systemd) will
not even build on these platforms.

> does adding this will help?

It will help in the sense of indicating a system requirement that might
not be present on the target system, but won't get you much further.

Is libudev a hard dependency of your package? If yes, CRAN may reject
the package as not portable enough ("Packages will not normally be
accepted that do not run on at least two of the major R platforms.").
If no, consider including a configure script [*] and some #ifdefs in
your code to make the package only depend on libudev when it is
present.

-- 
Best regards,
Ivan

[*]
https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Configure-and-cleanup


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Mon Apr 27 08:02:57 2020
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Mon, 27 Apr 2020 16:02:57 +1000
Subject: [R-pkg-devel] Including fst in inst/extdata
Message-ID: <CAJmOi+OV4WXq7UisayWWgO8Cgt5d7n0M6YCN4C2tW7W-UkJp9Q@mail.gmail.com>

I would like to include some fst files (produced by fst::write_fst) in
inst/extdata so that (a) users can update them between releases and
(b) to take advantage of fst's benefits. However, when I do this and
run R CMD check I get the warning "Found the following executable
file: "inst/extdata/file.fst"
I'm not sure whether this qualifies as a "rare false positive" as WRE
mentions, but if it isn't is there a way to include fst files in a
package without raising a warning?


Hugh Parsonage.


From edd @end|ng |rom deb|@n@org  Mon Apr 27 14:12:04 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 27 Apr 2020 07:12:04 -0500
Subject: [R-pkg-devel] Including fst in inst/extdata
In-Reply-To: <CAJmOi+OV4WXq7UisayWWgO8Cgt5d7n0M6YCN4C2tW7W-UkJp9Q@mail.gmail.com>
References: <CAJmOi+OV4WXq7UisayWWgO8Cgt5d7n0M6YCN4C2tW7W-UkJp9Q@mail.gmail.com>
Message-ID: <24230.52244.792572.712337@rob.eddelbuettel.com>


Hugh,

On 27 April 2020 at 16:02, Hugh Parsonage wrote:
| I would like to include some fst files (produced by fst::write_fst) in
| inst/extdata so that (a) users can update them between releases and
| (b) to take advantage of fst's benefits. However, when I do this and

Good idea, it is a very capable format!

| run R CMD check I get the warning "Found the following executable
| file: "inst/extdata/file.fst"

That refers to the file modes which will be (in octal notation) 775 or 755.

| I'm not sure whether this qualifies as a "rare false positive" as WRE
| mentions, but if it isn't is there a way to include fst files in a
| package without raising a warning?

Turn the execute bit off i.e. make them 664 or 644 and warning goes away.

In short, this has nothing to do with the .fst extension or content.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From iv@ircu m@iii@g oii m@iibox@org  Tue Apr 28 08:05:49 2020
From: iv@ircu m@iii@g oii m@iibox@org (iv@ircu m@iii@g oii m@iibox@org)
Date: Tue, 28 Apr 2020 08:05:49 +0200
Subject: [R-pkg-devel] Problems importing packages with SystemRequirements
Message-ID: <20200428060549.fkcxo7wzu6nqxskd@h6.fooboz>

Dear All,
I maintain a package that has issues 
`sh: whoami: not found` and `sh: git: not found`
(see https://cran.r-project.org/web/checks/check_results_packager.html),
albeit not having any (declared or undeclared) external
dependencies -- no calls to system() or system2().

It does import functions from CRAN packages `whoami` and `git2r`, though. 
Mysteriously to me, neither
https://cran.r-project.org/web/checks/check_results_git2r.html
nor 
https://cran.r-project.org/web/checks/check_results_whoami.html
show any issues.

Has anybody any clue why this is so? 

Thanks anyway,
Dominik Cullmann


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Apr 28 08:34:40 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 27 Apr 2020 23:34:40 -0700
Subject: [R-pkg-devel] 
 Problems importing packages with SystemRequirements
In-Reply-To: <20200428060549.fkcxo7wzu6nqxskd@h6.fooboz>
References: <20200428060549.fkcxo7wzu6nqxskd@h6.fooboz>
Message-ID: <7E25A696-6159-434E-BADD-DDD2AA00C9DB@dcn.davis.ca.us>

Maybe your use of those packages represent use cases that are not tested by those packages. If you pare down your code that triggers these problems to small reproducible examples then you can contribute them to those packages?

On April 27, 2020 11:05:49 PM PDT, fvafrcu at mailbox.org wrote:
>Dear All,
>I maintain a package that has issues 
>`sh: whoami: not found` and `sh: git: not found`
>(see
>https://cran.r-project.org/web/checks/check_results_packager.html),
>albeit not having any (declared or undeclared) external
>dependencies -- no calls to system() or system2().
>
>It does import functions from CRAN packages `whoami` and `git2r`,
>though. 
>Mysteriously to me, neither
>https://cran.r-project.org/web/checks/check_results_git2r.html
>nor 
>https://cran.r-project.org/web/checks/check_results_whoami.html
>show any issues.
>
>Has anybody any clue why this is so? 
>
>Thanks anyway,
>Dominik Cullmann
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From iv@ircu m@iii@g oii m@iibox@org  Tue Apr 28 09:28:27 2020
From: iv@ircu m@iii@g oii m@iibox@org (iv@ircu m@iii@g oii m@iibox@org)
Date: Tue, 28 Apr 2020 09:28:27 +0200
Subject: [R-pkg-devel] 
 Problems importing packages with SystemRequirements
In-Reply-To: <7E25A696-6159-434E-BADD-DDD2AA00C9DB@dcn.davis.ca.us>
References: <20200428060549.fkcxo7wzu6nqxskd@h6.fooboz>
 <7E25A696-6159-434E-BADD-DDD2AA00C9DB@dcn.davis.ca.us>
Message-ID: <20200428072827.nl6wduuey36mdvh5@h6.fooboz>

Dear Jeff,
thanks for your reply, 
I exactly know, where gitr and whoami are called, since I constitently use the
`::` operator to import from any dependency.
I am pretty sure that I use those packages for intended purposes only.

Furthermore, CRAN reports issues for system calls (made by `git2r` and `whoami`, I guess) 
for my package on r-patched-solaris-x86 only, so I am not sure how to reproduce
them.

Best,
Dominik Cullmann

On Mon, Apr 27, 2020 23:34:40, Jeff Newmiller wrote:
> Maybe your use of those packages represent use cases that are not tested by those packages. If you pare down your code that triggers these problems to small reproducible examples then you can contribute them to those packages?
> 
> On April 27, 2020 11:05:49 PM PDT, fvafrcu at mailbox.org wrote:
> >Dear All,
> >I maintain a package that has issues 
> >`sh: whoami: not found` and `sh: git: not found`
> >(see
> >https://cran.r-project.org/web/checks/check_results_packager.html),
> >albeit not having any (declared or undeclared) external
> >dependencies -- no calls to system() or system2().
> >
> >It does import functions from CRAN packages `whoami` and `git2r`,
> >though. 
> >Mysteriously to me, neither
> >https://cran.r-project.org/web/checks/check_results_git2r.html
> >nor 
> >https://cran.r-project.org/web/checks/check_results_whoami.html
> >show any issues.
> >
> >Has anybody any clue why this is so? 
> >
> >Thanks anyway,
> >Dominik Cullmann
> >
> >______________________________________________
> >R-package-devel at r-project.org mailing list
> >https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> -- 
> Sent from my phone. Please excuse my brevity.


-- 
https://www.globalplanetauthority.com/


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Apr 28 14:08:03 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 28 Apr 2020 14:08:03 +0200
Subject: [R-pkg-devel] 
 Problems importing packages with SystemRequirements
In-Reply-To: <20200428072827.nl6wduuey36mdvh5@h6.fooboz>
References: <20200428060549.fkcxo7wzu6nqxskd@h6.fooboz>
 <7E25A696-6159-434E-BADD-DDD2AA00C9DB@dcn.davis.ca.us>
 <20200428072827.nl6wduuey36mdvh5@h6.fooboz>
Message-ID: <969ad2a1-708b-74ce-c70f-28e7a1e2a80b@statistik.tu-dortmund.de>



On 28.04.2020 09:28, fvafrcu at mailbox.org wrote:
> Dear Jeff,
> thanks for your reply,
> I exactly know, where gitr and whoami are called, since I constitently use the
> `::` operator to import from any dependency.
> I am pretty sure that I use those packages for intended purposes only.
> 
> Furthermore, CRAN reports issues for system calls (made by `git2r` and `whoami`, I guess)
> for my package on r-patched-solaris-x86 only, so I am not sure how to reproduce
> them.

Yes, but as SystemRequirements are not alsways fullfilled, you should 
test whether these are available before use.

Best,
Uwe Ligges



> Best,
> Dominik Cullmann
> 
> On Mon, Apr 27, 2020 23:34:40, Jeff Newmiller wrote:
>> Maybe your use of those packages represent use cases that are not tested by those packages. If you pare down your code that triggers these problems to small reproducible examples then you can contribute them to those packages?
>>
>> On April 27, 2020 11:05:49 PM PDT, fvafrcu at mailbox.org wrote:
>>> Dear All,
>>> I maintain a package that has issues
>>> `sh: whoami: not found` and `sh: git: not found`
>>> (see
>>> https://cran.r-project.org/web/checks/check_results_packager.html),
>>> albeit not having any (declared or undeclared) external
>>> dependencies -- no calls to system() or system2().
>>>
>>> It does import functions from CRAN packages `whoami` and `git2r`,
>>> though.
>>> Mysteriously to me, neither
>>> https://cran.r-project.org/web/checks/check_results_git2r.html
>>> nor
>>> https://cran.r-project.org/web/checks/check_results_whoami.html
>>> show any issues.
>>>
>>> Has anybody any clue why this is so?
>>>
>>> Thanks anyway,
>>> Dominik Cullmann
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> -- 
>> Sent from my phone. Please excuse my brevity.
> 
>


From iv@ircu m@iii@g oii m@iibox@org  Tue Apr 28 15:35:22 2020
From: iv@ircu m@iii@g oii m@iibox@org (iv@ircu m@iii@g oii m@iibox@org)
Date: Tue, 28 Apr 2020 15:35:22 +0200
Subject: [R-pkg-devel] 
 Problems importing packages with SystemRequirements
In-Reply-To: <969ad2a1-708b-74ce-c70f-28e7a1e2a80b@statistik.tu-dortmund.de>
References: <20200428060549.fkcxo7wzu6nqxskd@h6.fooboz>
 <7E25A696-6159-434E-BADD-DDD2AA00C9DB@dcn.davis.ca.us>
 <20200428072827.nl6wduuey36mdvh5@h6.fooboz>
 <969ad2a1-708b-74ce-c70f-28e7a1e2a80b@statistik.tu-dortmund.de>
Message-ID: <20200428133522.s2otnl4wyssd7nmc@h6.fooboz>

Dear Uwe,
thanks for your reply.
But wouldn't checking for the SystemRequirements be the dependencies' jobs?
Looking at `whoami`'s code (which is basically a single very well structured
and clearly written file of 350 lines including roxygen comments by Gabor Csardi),
I see exactly a single call to system("whoami"), which of course gets caught if it throws an exception and it should be called on windows only. Under solaris I would expect whoami::whoami() to call `id`.
I don't understand why I'm getting this error with  r-patched-solaris-x86.
Gabor, can you help?!

Best, Dominik Cullmann

On Tue, Apr 28, 2020 14:08:03, Uwe Ligges wrote:
> 
> 
> On 28.04.2020 09:28, fvafrcu at mailbox.org wrote:
> > Dear Jeff,
> > thanks for your reply,
> > I exactly know, where gitr and whoami are called, since I constitently use the
> > `::` operator to import from any dependency.
> > I am pretty sure that I use those packages for intended purposes only.
> > 
> > Furthermore, CRAN reports issues for system calls (made by `git2r` and `whoami`, I guess)
> > for my package on r-patched-solaris-x86 only, so I am not sure how to reproduce
> > them.
> 
> Yes, but as SystemRequirements are not alsways fullfilled, you should test
> whether these are available before use.
> 
> Best,
> Uwe Ligges
> 
> 
> 
> > Best,
> > Dominik Cullmann
> > 
> > On Mon, Apr 27, 2020 23:34:40, Jeff Newmiller wrote:
> > > Maybe your use of those packages represent use cases that are not tested by those packages. If you pare down your code that triggers these problems to small reproducible examples then you can contribute them to those packages?
> > > 
> > > On April 27, 2020 11:05:49 PM PDT, fvafrcu at mailbox.org wrote:
> > > > Dear All,
> > > > I maintain a package that has issues
> > > > `sh: whoami: not found` and `sh: git: not found`
> > > > (see
> > > > https://cran.r-project.org/web/checks/check_results_packager.html),
> > > > albeit not having any (declared or undeclared) external
> > > > dependencies -- no calls to system() or system2().
> > > > 
> > > > It does import functions from CRAN packages `whoami` and `git2r`,
> > > > though.
> > > > Mysteriously to me, neither
> > > > https://cran.r-project.org/web/checks/check_results_git2r.html
> > > > nor
> > > > https://cran.r-project.org/web/checks/check_results_whoami.html
> > > > show any issues.
> > > > 
> > > > Has anybody any clue why this is so?
> > > > 
> > > > Thanks anyway,
> > > > Dominik Cullmann
> > > > 
> > > > ______________________________________________
> > > > R-package-devel at r-project.org mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > > 
> > > -- 
> > > Sent from my phone. Please excuse my brevity.
> > 
> > 


-- 
https://www.globalplanetauthority.com/


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Apr 28 16:39:52 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 28 Apr 2020 15:39:52 +0100
Subject: [R-pkg-devel] 
 Problems importing packages with SystemRequirements
In-Reply-To: <20200428133522.s2otnl4wyssd7nmc@h6.fooboz>
References: <20200428060549.fkcxo7wzu6nqxskd@h6.fooboz>
 <7E25A696-6159-434E-BADD-DDD2AA00C9DB@dcn.davis.ca.us>
 <20200428072827.nl6wduuey36mdvh5@h6.fooboz>
 <969ad2a1-708b-74ce-c70f-28e7a1e2a80b@statistik.tu-dortmund.de>
 <20200428133522.s2otnl4wyssd7nmc@h6.fooboz>
Message-ID: <CABtg=Kkhq_O7_s50YHT8_EJXpLwwY3-TCF6anEaSC54Jacu41w@mail.gmail.com>

Yeah, this is a bug in whoami I think. It has a tryCatch() but it does
not suppress the error message from system().

Gabor

On Tue, Apr 28, 2020 at 2:35 PM <fvafrcu at mailbox.org> wrote:
>
> Dear Uwe,
> thanks for your reply.
> But wouldn't checking for the SystemRequirements be the dependencies' jobs?
> Looking at `whoami`'s code (which is basically a single very well structured
> and clearly written file of 350 lines including roxygen comments by Gabor Csardi),
> I see exactly a single call to system("whoami"), which of course gets caught if it throws an exception and it should be called on windows only. Under solaris I would expect whoami::whoami() to call `id`.
> I don't understand why I'm getting this error with  r-patched-solaris-x86.
> Gabor, can you help?!
>
> Best, Dominik Cullmann
>
> On Tue, Apr 28, 2020 14:08:03, Uwe Ligges wrote:
> >
> >
> > On 28.04.2020 09:28, fvafrcu at mailbox.org wrote:
> > > Dear Jeff,
> > > thanks for your reply,
> > > I exactly know, where gitr and whoami are called, since I constitently use the
> > > `::` operator to import from any dependency.
> > > I am pretty sure that I use those packages for intended purposes only.
> > >
> > > Furthermore, CRAN reports issues for system calls (made by `git2r` and `whoami`, I guess)
> > > for my package on r-patched-solaris-x86 only, so I am not sure how to reproduce
> > > them.
> >
> > Yes, but as SystemRequirements are not alsways fullfilled, you should test
> > whether these are available before use.
> >
> > Best,
> > Uwe Ligges
> >
> >
> >
> > > Best,
> > > Dominik Cullmann
> > >
> > > On Mon, Apr 27, 2020 23:34:40, Jeff Newmiller wrote:
> > > > Maybe your use of those packages represent use cases that are not tested by those packages. If you pare down your code that triggers these problems to small reproducible examples then you can contribute them to those packages?
> > > >
> > > > On April 27, 2020 11:05:49 PM PDT, fvafrcu at mailbox.org wrote:
> > > > > Dear All,
> > > > > I maintain a package that has issues
> > > > > `sh: whoami: not found` and `sh: git: not found`
> > > > > (see
> > > > > https://cran.r-project.org/web/checks/check_results_packager.html),
> > > > > albeit not having any (declared or undeclared) external
> > > > > dependencies -- no calls to system() or system2().
> > > > >
> > > > > It does import functions from CRAN packages `whoami` and `git2r`,
> > > > > though.
> > > > > Mysteriously to me, neither
> > > > > https://cran.r-project.org/web/checks/check_results_git2r.html
> > > > > nor
> > > > > https://cran.r-project.org/web/checks/check_results_whoami.html
> > > > > show any issues.
> > > > >
> > > > > Has anybody any clue why this is so?
> > > > >
> > > > > Thanks anyway,
> > > > > Dominik Cullmann
> > > > >
> > > > > ______________________________________________
> > > > > R-package-devel at r-project.org mailing list
> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > > >
> > > > --
> > > > Sent from my phone. Please excuse my brevity.
> > >
> > >
>
>
> --
> https://www.globalplanetauthority.com/


From renoz@o @end|ng |rom protonm@||@com  Wed Apr 29 19:16:41 2020
From: renoz@o @end|ng |rom protonm@||@com (renozao)
Date: Wed, 29 Apr 2020 17:16:41 +0000
Subject: [R-pkg-devel] =?utf-8?q?Error_creating_union_class=3A_object_?=
 =?utf-8?b?4oCYLl9fQ19fY29tcE1hdHJpeOKAmSBub3QgZm91bmQ=?=
In-Reply-To: <24219.11412.330746.824585@stat.math.ethz.ch>
References: <na_hvS9mQoE2Ex7h3m1UlL7AzQFz0Fuuets5kNRC7b7NBrkkYObfnkUAyj8T8oz48jBuBXZcEf0CJn2UL7f5TZ-N9jiT4qUd0eiE50R9xkU=-4805@protonmail.com>
 <24205.57605.672636.944802@stat.math.ethz.ch>
 <CAF8bMca+KFHQfb87qbZywWchXy9GJ_7qr5iD5GJ3PL-xWJO_fA@mail.gmail.com>
 <CAF8bMcb-KbfR==w1g3ixjEpGNR7=zn3SEBtwn3i4MimYzzt-dw@mail.gmail.com>
 <cTfz9LdQTDeljdpr97HnBeKOSPRLo90TKjTnzHfV4zfOx0UrOPO5F0KcTex4T85VVqLzSXGp0MyTFZHNjCSoiTYj5nPFijuKiPf2E6siAyg=-1872@protonmail.com>
 <24219.11412.330746.824585@stat.math.ethz.ch>
Message-ID: <klaxwZ-BWTJ90EYmWUjXntHafKk-OZcNZYMSmPhTX2SJ00_MHfo3dC7GCd6-aFSjXIP1X3WH77SyPCxZ7cb4OT7i2iALmTkpb8TH2CyIeJ8=@protonmail.com>

Thank you Martin,

Looks like the mMatrix class defined in Matrix is not exported in 3.6.3, maybe it is now exported in the current R-devel.

In this case I'd rather use a conditional import and definition.
I'll try that route.

Bests,
Renaud

Sent with ProtonMail Secure Email.

??????? Original Message ???????
On Saturday, April 18, 2020 12:36 PM, Martin Maechler <maechler at stat.math.ethz.ch> wrote:

> > > > > > renozao
> > > > > > on Wed, 8 Apr 2020 16:19:59 +0000 writes:
>
> > Thank you William for the reproducible example.
>
>     > Currently I using the following (same as in William's example):
>
>     > setClassUnion("mMatrix", c("Matrix", "matrix"))
>
>
> > Martin, are the changes made in the union class handling affecting the way we should declare them?
>
> > Thank you.
>
> > Bests,
>
>     > Renaud
>
>
> Thank you, Renaud, and Bill Dunlap.
>
> There is obviously a bit of a problem there, but it may well be
> "only" a problem in error handling.
>
> As Bill's trace(get, ..) shows, R tries to get
> "#HAS_DUPLICATE_CLASS_NAMES" which is indeed an indication of the problem:
>
> You are trying to REdefine a class union that already exists
> identically in the Matrix package:
> In the R-forge development version of 'Matrix', it is
> line 717 of Matrix/R/AllClass.R (and that will be close also
> in the CRAN version of Matrix).
>
> So at least for you, Renaud, the solution to the problem is easy:
> Just don't do what you should not do: What you want is already
> part of Matrix.... and after searching: It's been part of
> Matrix since ca. July 2012 ...
>
> -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
>
> But yes, there's a buglet in the 'methods' package currently,
> which leads to a misleading error message
> (It's arguable if it should give an error which it did not previously;
> I think it would be quite a good idea to give at least a
> warning as you are masking class definition of the Matrix
> package which is in your search() path or at least among the
> loaded namespaces at this time).
>
> Best,
> Martin
>
> > ??????? Original Message ???????
>
>     > On Wednesday, April 8, 2020 11:19 AM, William Dunlap <wdunlap at tibco.com> wrote:
>
>
> >> Use trace() to get a bit more detail - .__C_compMatrix is looked for in the wrong environment with inherits=FALSE.
>
>     >>
>
>     >>> setClassUnion("mMatrix", c("Matrix", "matrix"))
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get("#HAS_DUPLICATE_CLASS_NAMES", envir = .classTable) on entry
>
>     >> x="#HAS_DUPLICATE_CLASS_NAMES", envir="<environment: 0x2787710>", topenv="<environment: base>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".MTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(".SigLength", envir = env) on entry
>
>     >> x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(".SigLength", envir = env) on entry
>
>     >> x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(".SigLength", envir = env) on entry
>
>     >> x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(".SigLength", envir = env) on entry
>
>     >> x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(cname, envir = cwhere, inherits = FALSE) on entry
>
>     >> x=".__C__compMatrix", envir="<environment: R_GlobalEnv>", topenv="<environment: R_GlobalEnv>", inherits=FALSE
>
>     >> Error in get(cname, envir = cwhere, inherits = FALSE) :
>
>     >> object '.__C__compMatrix' not found
>
>     >> ...
>
>     >>
>
>     >> Bill Dunlap
>
>     >> TIBCO Software
>
>     >> wdunlap tibco.com
>
>     >>
>
>     >> On Wed, Apr 8, 2020 at 7:52 AM William Dunlap <wdunlap at tibco.com> wrote:
>
>     >>
>
>     >>> % R-devel --vanilla --quiet
>
>     >>>> library(Matrix)
>
>     >>>> setClassUnion("mMatrix", c("Matrix", "matrix"))
>
>     >>> Error in get(cname, envir = cwhere, inherits = FALSE) :
>
>     >>> object '.__C__compMatrix' not found
>
>     >>> Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
>
>     >>> unable to create union class:  could not set members "Matrix"
>
>     >>>> sessionInfo()
>
>     >>> R Under development (unstable) (2020-04-07 r78175)
>
>     >>> Platform: x86_64-pc-linux-gnu (64-bit)
>
>     >>> Running under: Ubuntu 16.04.6 LTS
>
>     >>>
>
>     >>> Matrix products: default
>
>     >>> BLAS/LAPACK: /usr/lib/libopenblasp-r0.2.18.so
>
>     >>>
>
>     >>> locale:
>
>     >>> [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>
>     >>> [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>
>     >>> [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>
>     >>> [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>
>     >>> [9] LC_ADDRESS=C               LC_TELEPHONE=C
>
>     >>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
>     >>>
>
>     >>> attached base packages:
>
>     >>> [1] stats     graphics  grDevices utils     datasets  methods   base
>
>     >>>
>
>     >>> other attached packages:
>
>     >>> [1] Matrix_1.2-18
>
>     >>>
>
>     >>> loaded via a namespace (and not attached):
>
>     >>> [1] compiler_4.1.0  grid_4.1.0      lattice_0.20-41
>
>     >>>
>
>     >>> Bill Dunlap
>
>     >>> TIBCO Software
>
>     >>> wdunlap tibco.com
>
>     >>>
>
>     >>> On Wed, Apr 8, 2020 at 7:35 AM Martin Maechler <maechler at stat.math.ethz.ch> wrote:
>
>     >>>
>
>     >>>>>>>>> renozao
>
>     >>>>>>>>> on Mon, 30 Mar 2020 21:20:43 +0000 writes:
>
>     >>>>
>
>     >>>> > Hi,
>
>     >>>> > when R CMD check is run under R-devel (2020-03-29 r78108) I get the following error at installation:
>
>     >>>>
>
>     >>>> > Error in get(cname, envir = cwhere, inherits = FALSE) :
>
>     >>>> > object ?.__C__compMatrix? not found
>
>     >>>> > Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
>
>     >>>> > unable to create union class:  could not set members "Matrix"
>
>     >>>>
>
>     >>>> > This does not happen on R 3.6.3.
>
>     >>>>
>
>     >>>> > I tried with Matrix listed in Depends but I still get the same error.
>
>     >>>>
>
>     >>>> > Is this linked to some changes in union classes or the Matrix package?
>
>     >>>>
>
>     >>>> > Thank you.
>
>     >>>>
>
>     >>>> > Bests,
>
>     >>>> > Renaud
>
>     >>>>
>
>     >>>> Hi Renaud,
>
>     >>>> One reason you got no response here, is because we don't even
>
>     >>>> know about which package you are talking.
>
>     >>>>
>
>     >>>> So there's nothing, anybody can reproduce from your posting.
>
>     >>>>
>
>     >>>> There have been changes in R's dealing with class unions etc,
>
>     >>>> notably even *relating* to an earlier bug report on class unions
>
>     >>>> exactly for such a case which was *triggered* when people built
>
>     >>>> on such Matrix classes.
>
>     >>>>
>
>     >>>> But we would really want to be able to reproduce what you are seeing..
>
>     >>>>
>
>     >>>> Best regards,
>
>     >>>> Martin Maechler
>
>     >>>>
>
>     >>>> ETH Zurich, R Core Team *and* maintainer("Matrix")
>
>     >>>>
>
>     >>>> ______________________________________________
>
>     >>>> R-package-devel at r-project.org mailing list
>
>     >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>     > [[alternative HTML version deleted]]
>
>
> > ______________________________________________
>
>     > R-package-devel at r-project.org mailing list
>
>     > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From renoz@o @end|ng |rom protonm@||@com  Wed Apr 29 19:16:41 2020
From: renoz@o @end|ng |rom protonm@||@com (renozao)
Date: Wed, 29 Apr 2020 17:16:41 +0000
Subject: [R-pkg-devel] =?utf-8?q?Error_creating_union_class=3A_object_?=
 =?utf-8?b?4oCYLl9fQ19fY29tcE1hdHJpeOKAmSBub3QgZm91bmQ=?=
In-Reply-To: <24219.11412.330746.824585@stat.math.ethz.ch>
References: <na_hvS9mQoE2Ex7h3m1UlL7AzQFz0Fuuets5kNRC7b7NBrkkYObfnkUAyj8T8oz48jBuBXZcEf0CJn2UL7f5TZ-N9jiT4qUd0eiE50R9xkU=-4805@protonmail.com>
 <24205.57605.672636.944802@stat.math.ethz.ch>
 <CAF8bMca+KFHQfb87qbZywWchXy9GJ_7qr5iD5GJ3PL-xWJO_fA@mail.gmail.com>
 <CAF8bMcb-KbfR==w1g3ixjEpGNR7=zn3SEBtwn3i4MimYzzt-dw@mail.gmail.com>
 <cTfz9LdQTDeljdpr97HnBeKOSPRLo90TKjTnzHfV4zfOx0UrOPO5F0KcTex4T85VVqLzSXGp0MyTFZHNjCSoiTYj5nPFijuKiPf2E6siAyg=-1872@protonmail.com>
 <24219.11412.330746.824585@stat.math.ethz.ch>
Message-ID: <klaxwZ-BWTJ90EYmWUjXntHafKk-OZcNZYMSmPhTX2SJ00_MHfo3dC7GCd6-aFSjXIP1X3WH77SyPCxZ7cb4OT7i2iALmTkpb8TH2CyIeJ8=@protonmail.com>

Thank you Martin,

Looks like the mMatrix class defined in Matrix is not exported in 3.6.3, maybe it is now exported in the current R-devel.

In this case I'd rather use a conditional import and definition.
I'll try that route.

Bests,
Renaud

Sent with ProtonMail Secure Email.

??????? Original Message ???????
On Saturday, April 18, 2020 12:36 PM, Martin Maechler <maechler at stat.math.ethz.ch> wrote:

> > > > > > renozao
> > > > > > on Wed, 8 Apr 2020 16:19:59 +0000 writes:
>
> > Thank you William for the reproducible example.
>
>     > Currently I using the following (same as in William's example):
>
>     > setClassUnion("mMatrix", c("Matrix", "matrix"))
>
>
> > Martin, are the changes made in the union class handling affecting the way we should declare them?
>
> > Thank you.
>
> > Bests,
>
>     > Renaud
>
>
> Thank you, Renaud, and Bill Dunlap.
>
> There is obviously a bit of a problem there, but it may well be
> "only" a problem in error handling.
>
> As Bill's trace(get, ..) shows, R tries to get
> "#HAS_DUPLICATE_CLASS_NAMES" which is indeed an indication of the problem:
>
> You are trying to REdefine a class union that already exists
> identically in the Matrix package:
> In the R-forge development version of 'Matrix', it is
> line 717 of Matrix/R/AllClass.R (and that will be close also
> in the CRAN version of Matrix).
>
> So at least for you, Renaud, the solution to the problem is easy:
> Just don't do what you should not do: What you want is already
> part of Matrix.... and after searching: It's been part of
> Matrix since ca. July 2012 ...
>
> -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
>
> But yes, there's a buglet in the 'methods' package currently,
> which leads to a misleading error message
> (It's arguable if it should give an error which it did not previously;
> I think it would be quite a good idea to give at least a
> warning as you are masking class definition of the Matrix
> package which is in your search() path or at least among the
> loaded namespaces at this time).
>
> Best,
> Martin
>
> > ??????? Original Message ???????
>
>     > On Wednesday, April 8, 2020 11:19 AM, William Dunlap <wdunlap at tibco.com> wrote:
>
>
> >> Use trace() to get a bit more detail - .__C_compMatrix is looked for in the wrong environment with inherits=FALSE.
>
>     >>
>
>     >>> setClassUnion("mMatrix", c("Matrix", "matrix"))
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get("#HAS_DUPLICATE_CLASS_NAMES", envir = .classTable) on entry
>
>     >> x="#HAS_DUPLICATE_CLASS_NAMES", envir="<environment: 0x2787710>", topenv="<environment: base>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".MTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(".SigLength", envir = env) on entry
>
>     >> x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(".SigLength", envir = env) on entry
>
>     >> x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(name, envir = env) on entry
>
>     >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(".SigLength", envir = env) on entry
>
>     >> x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(".SigLength", envir = env) on entry
>
>     >> x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>
>     >> Tracing get(cname, envir = cwhere, inherits = FALSE) on entry
>
>     >> x=".__C__compMatrix", envir="<environment: R_GlobalEnv>", topenv="<environment: R_GlobalEnv>", inherits=FALSE
>
>     >> Error in get(cname, envir = cwhere, inherits = FALSE) :
>
>     >> object '.__C__compMatrix' not found
>
>     >> ...
>
>     >>
>
>     >> Bill Dunlap
>
>     >> TIBCO Software
>
>     >> wdunlap tibco.com
>
>     >>
>
>     >> On Wed, Apr 8, 2020 at 7:52 AM William Dunlap <wdunlap at tibco.com> wrote:
>
>     >>
>
>     >>> % R-devel --vanilla --quiet
>
>     >>>> library(Matrix)
>
>     >>>> setClassUnion("mMatrix", c("Matrix", "matrix"))
>
>     >>> Error in get(cname, envir = cwhere, inherits = FALSE) :
>
>     >>> object '.__C__compMatrix' not found
>
>     >>> Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
>
>     >>> unable to create union class:  could not set members "Matrix"
>
>     >>>> sessionInfo()
>
>     >>> R Under development (unstable) (2020-04-07 r78175)
>
>     >>> Platform: x86_64-pc-linux-gnu (64-bit)
>
>     >>> Running under: Ubuntu 16.04.6 LTS
>
>     >>>
>
>     >>> Matrix products: default
>
>     >>> BLAS/LAPACK: /usr/lib/libopenblasp-r0.2.18.so
>
>     >>>
>
>     >>> locale:
>
>     >>> [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>
>     >>> [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>
>     >>> [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>
>     >>> [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>
>     >>> [9] LC_ADDRESS=C               LC_TELEPHONE=C
>
>     >>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>
>     >>>
>
>     >>> attached base packages:
>
>     >>> [1] stats     graphics  grDevices utils     datasets  methods   base
>
>     >>>
>
>     >>> other attached packages:
>
>     >>> [1] Matrix_1.2-18
>
>     >>>
>
>     >>> loaded via a namespace (and not attached):
>
>     >>> [1] compiler_4.1.0  grid_4.1.0      lattice_0.20-41
>
>     >>>
>
>     >>> Bill Dunlap
>
>     >>> TIBCO Software
>
>     >>> wdunlap tibco.com
>
>     >>>
>
>     >>> On Wed, Apr 8, 2020 at 7:35 AM Martin Maechler <maechler at stat.math.ethz.ch> wrote:
>
>     >>>
>
>     >>>>>>>>> renozao
>
>     >>>>>>>>> on Mon, 30 Mar 2020 21:20:43 +0000 writes:
>
>     >>>>
>
>     >>>> > Hi,
>
>     >>>> > when R CMD check is run under R-devel (2020-03-29 r78108) I get the following error at installation:
>
>     >>>>
>
>     >>>> > Error in get(cname, envir = cwhere, inherits = FALSE) :
>
>     >>>> > object ?.__C__compMatrix? not found
>
>     >>>> > Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
>
>     >>>> > unable to create union class:  could not set members "Matrix"
>
>     >>>>
>
>     >>>> > This does not happen on R 3.6.3.
>
>     >>>>
>
>     >>>> > I tried with Matrix listed in Depends but I still get the same error.
>
>     >>>>
>
>     >>>> > Is this linked to some changes in union classes or the Matrix package?
>
>     >>>>
>
>     >>>> > Thank you.
>
>     >>>>
>
>     >>>> > Bests,
>
>     >>>> > Renaud
>
>     >>>>
>
>     >>>> Hi Renaud,
>
>     >>>> One reason you got no response here, is because we don't even
>
>     >>>> know about which package you are talking.
>
>     >>>>
>
>     >>>> So there's nothing, anybody can reproduce from your posting.
>
>     >>>>
>
>     >>>> There have been changes in R's dealing with class unions etc,
>
>     >>>> notably even *relating* to an earlier bug report on class unions
>
>     >>>> exactly for such a case which was *triggered* when people built
>
>     >>>> on such Matrix classes.
>
>     >>>>
>
>     >>>> But we would really want to be able to reproduce what you are seeing..
>
>     >>>>
>
>     >>>> Best regards,
>
>     >>>> Martin Maechler
>
>     >>>>
>
>     >>>> ETH Zurich, R Core Team *and* maintainer("Matrix")
>
>     >>>>
>
>     >>>> ______________________________________________
>
>     >>>> R-package-devel at r-project.org mailing list
>
>     >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>     > [[alternative HTML version deleted]]
>
>
> > ______________________________________________
>
>     > R-package-devel at r-project.org mailing list
>
>     > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Wed Apr 29 19:19:41 2020
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Wed, 29 Apr 2020 17:19:41 +0000
Subject: [R-pkg-devel] exit and 'stderr' warning
Message-ID: <EB776CB3-BDB4-49D5-B0EA-DE13D3608999@kaust.edu.sa>

I am getting this warning which I need to get rid of.



         Found 'exit', possibly from 'exit' (C)

         Found 'stderr', possibly from 'stderr' (C)


I am depending on several C-based software that has many calls for 'exit'  and 'stderr'.   In this case, how can I avoid this warning?


Thanks,
--Sameh

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Apr 29 19:26:19 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 29 Apr 2020 19:26:19 +0200
Subject: [R-pkg-devel] exit and 'stderr' warning
In-Reply-To: <EB776CB3-BDB4-49D5-B0EA-DE13D3608999@kaust.edu.sa>
References: <EB776CB3-BDB4-49D5-B0EA-DE13D3608999@kaust.edu.sa>
Message-ID: <c60d60f1-e429-d6fd-20c8-ea66909db597@statistik.tu-dortmund.de>



On 29.04.2020 19:19, Sameh M. Abdulah wrote:
> I am getting this warning which I need to get rid of.
> 
> 
> 
>           Found 'exit', possibly from 'exit' (C)
> 
>           Found 'stderr', possibly from 'stderr' (C)
> 
> 
> I am depending on several C-based software that has many calls for 'exit'  and 'stderr'.   In this case, how can I avoid this warning?

Not use those calls, see Writing R Extensions.

Best,
Uwe Ligges




> 
> Thanks,
> --Sameh
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Thu Apr 30 09:43:42 2020
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Thu, 30 Apr 2020 17:43:42 +1000
Subject: [R-pkg-devel] Including fst in inst/extdata
In-Reply-To: <24230.52244.792572.712337@rob.eddelbuettel.com>
References: <CAJmOi+OV4WXq7UisayWWgO8Cgt5d7n0M6YCN4C2tW7W-UkJp9Q@mail.gmail.com>
 <24230.52244.792572.712337@rob.eddelbuettel.com>
Message-ID: <CAJmOi+PcaK2xPgzzac9ZV0bPMV0VvdWiN3okGikAoyTpFdWhoA@mail.gmail.com>

For reference, the file mode was not set as executable; however,
`file` was reporting a particular file (only one of several .fst
files) as a  DOS executable (COM, 0x8C-variant), which according to
comments in the code of "file" appears to be a common false positive.
Converting the character columns to ASCII and changing the order of
the columns changed the output of file to 'data'.  Dropping a column
also prevented the false identification.

On Mon, 27 Apr 2020 at 22:12, Dirk Eddelbuettel <edd at debian.org> wrote:
>
>
> Hugh,
>
> On 27 April 2020 at 16:02, Hugh Parsonage wrote:
> | I would like to include some fst files (produced by fst::write_fst) in
> | inst/extdata so that (a) users can update them between releases and
> | (b) to take advantage of fst's benefits. However, when I do this and
>
> Good idea, it is a very capable format!
>
> | run R CMD check I get the warning "Found the following executable
> | file: "inst/extdata/file.fst"
>
> That refers to the file modes which will be (in octal notation) 775 or 755.
>
> | I'm not sure whether this qualifies as a "rare false positive" as WRE
> | mentions, but if it isn't is there a way to include fst files in a
> | package without raising a warning?
>
> Turn the execute bit off i.e. make them 664 or 644 and warning goes away.
>
> In short, this has nothing to do with the .fst extension or content.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd @end|ng |rom deb|@n@org  Fri May  1 03:54:55 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 30 Apr 2020 20:54:55 -0500
Subject: [R-pkg-devel] Including fst in inst/extdata
In-Reply-To: <CAJmOi+PcaK2xPgzzac9ZV0bPMV0VvdWiN3okGikAoyTpFdWhoA@mail.gmail.com>
References: <CAJmOi+OV4WXq7UisayWWgO8Cgt5d7n0M6YCN4C2tW7W-UkJp9Q@mail.gmail.com>
 <24230.52244.792572.712337@rob.eddelbuettel.com>
 <CAJmOi+PcaK2xPgzzac9ZV0bPMV0VvdWiN3okGikAoyTpFdWhoA@mail.gmail.com>
Message-ID: <24235.33135.564782.200317@rob.eddelbuettel.com>


On 30 April 2020 at 17:43, Hugh Parsonage wrote:
| For reference, the file mode was not set as executable; however,
| `file` was reporting a particular file (only one of several .fst
| files) as a  DOS executable (COM, 0x8C-variant), which according to
| comments in the code of "file" appears to be a common false positive.

Interesting. So the heuristic of looking at the first few bytes was fooled.
Well, stuff happens, esp with heuristics, once N goes to 'really large'  ...

| Converting the character columns to ASCII and changing the order of
| the columns changed the output of file to 'data'.  Dropping a column
| also prevented the false identification.

Nice. The check is there to help. It may get things wrong. A good portion of
the traffic on this list is on perceived or actual errors in these checks. So
here you found an actual one, or rather, the reason why info supplied to one
was misleading.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From bkum@r @end|ng |rom rocket@o|tw@re@com  Fri May  1 18:06:53 2020
From: bkum@r @end|ng |rom rocket@o|tw@re@com (Binit Kumar)
Date: Fri, 1 May 2020 16:06:53 +0000
Subject: [R-pkg-devel] 
 [CRAN-pretest-archived] CRAN submission RIBMDB 0.1.0
In-Reply-To: <CY4PR07MB274387E0EC18CC025746391EBCAB0@CY4PR07MB2743.namprd07.prod.outlook.com>
References: <20200311122936.CB92A161E86@xmpalantir.wu.ac.at>
 <01d61f78$Blat.v3.2.16$21321805$57a0912@mail.statistik.tu-dortmund.de>
 <CY4PR07MB274387E0EC18CC025746391EBCAB0@CY4PR07MB2743.namprd07.prod.outlook.com>
Message-ID: <CY4PR07MB27435125EDC198CF979B862EBCAB0@CY4PR07MB2743.namprd07.prod.outlook.com>

Hi Team,

Based on the logs shared below, I need your help:

1) Windows:

Error: D:/RCompile/recent/R/library/RIBMDB_CLI/clidriver/bin/db2app64.dll: file not recognized: file format not recognized

Question: why is the windows environment unable to recognize the file? What could be the issue?



2) Debian:

Error: package or namespace load failed for 'RIBMDB' in dyn.load(file, DLLpath = DLLpath, ...):

unable to load shared object '/srv/hornik/tmp/CRAN/RIBMDB.Rcheck/00LOCK-RIBMDB/00new/RIBMDB/libs/RIBMDB.so':

  libdb2.so.1: cannot open shared object file: No such file or directory

Question: My package requires the clidriver component and as the same is downloaded in temp location the same will not be found. IN my local system there are two ways to have a workaround i.e. --no-test-load during package installation (OR) --no-staged-install during installation. Is there any other way that I can stop the folder being created be stopped from deleting or how to fix the test load issue. In my local system the package works fine even though test load fails.



Please let me know if you need additional details on my package RIBMDB.





Thanks & Regards,



Binit Kumar

Software Engineer, DB2 Connect

Rocket Software, Inc.(INDIA)

Karle Towers, HUB-I, NAGAVARA,

BANGALORE-45, KARNATAKA(INDIA)

T: +91 80 6745(7478)

Mob(IN): +91 9980233664

E: bkumar at rocketsoftware.com<mailto:bkumar at rocketsoftware.com>

W: www.rocketsoftware.com<http://www.rocketsoftware.com>



Please Keep your Mobile in Silent Mode at Work. Respect others.



-----Original Message-----
From: ligges at statistik.tu-dortmund.de<mailto:ligges at statistik.tu-dortmund.de> <ligges at statistik.tu-dortmund.de<mailto:ligges at statistik.tu-dortmund.de>>
Sent: Friday, May 1, 2020 10:50 AM
To: Binit Kumar <bkumar at rocketsoftware.com<mailto:bkumar at rocketsoftware.com>>
Cc: CRAN-submissions at R-project.org<mailto:CRAN-submissions at R-project.org>
Subject: [CRAN-pretest-archived] CRAN submission RIBMDB 0.1.0



EXTERNAL EMAIL











Dear maintainer,



package RIBMDB_0.1.0.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:

Windows: <https://nam01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2Fincoming_pretest%2FRIBMDB_0.1.0_20200501_050641%2FWindows%2F00check.log&amp;data=02%7C01%7C%7Cbae8f0ae88314c20cc8508d7ed8f3d9d%7C79544c1eed224879a082b67a9a672aae%7C0%7C0%7C637239071803367430&amp;sdata=5Gm%2BMHgedqbrj5X5s9DNmlhGiZAgiB9E2eXlfBzD1DM%3D&amp;reserved=0>

Status: 1 ERROR, 1 NOTE

Debian: <https://nam01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2Fincoming_pretest%2FRIBMDB_0.1.0_20200501_050641%2FDebian%2F00check.log&amp;data=02%7C01%7C%7Cbae8f0ae88314c20cc8508d7ed8f3d9d%7C79544c1eed224879a082b67a9a672aae%7C0%7C0%7C637239071803367430&amp;sdata=nKOtsZKmQIDqod13kAw4qs4wiYlGTvVTQ4rvzqJH4J0%3D&amp;reserved=0>

Status: 1 ERROR, 1 NOTE







Please fix all problems and resubmit a fixed version via the webform.

If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:

<https://nam01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7C%7Cbae8f0ae88314c20cc8508d7ed8f3d9d%7C79544c1eed224879a082b67a9a672aae%7C0%7C0%7C637239071803367430&amp;sdata=JfEmwtIL%2Bzh0Geu1PhKe4LwCTHTOiuN754ImpvjCooQ%3D&amp;reserved=0>

If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.



More details are given in the directory:

<https://nam01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwin-builder.r-project.org%2Fincoming_pretest%2FRIBMDB_0.1.0_20200501_050641%2F&amp;data=02%7C01%7C%7Cbae8f0ae88314c20cc8508d7ed8f3d9d%7C79544c1eed224879a082b67a9a672aae%7C0%7C0%7C637239071803367430&amp;sdata=iI15In5Z8%2FPRTQ54pdzhN3x0I8GbHhM0dGlzhFFKZx4%3D&amp;reserved=0>

The files will be removed after roughly 7 days.



No strong reverse dependencies to be checked.



Best regards,

CRAN teams' auto-check service

================================
Rocket Software, Inc. and subsidiaries ? 77 Fourth Avenue, Waltham MA 02451 ? Main Office Toll Free Number: +1 855.577.4323
Contact Customer Support: https://my.rocketsoftware.com/RocketCommunity/RCEmailSupport
Unsubscribe from Marketing Messages/Manage Your Subscription Preferences - http://www.rocketsoftware.com/manage-your-email-preferences
Privacy Policy - http://www.rocketsoftware.com/company/legal/privacy-policy
================================

This communication and any attachments may contain confidential information of Rocket Software, Inc. All unauthorized use, disclosure or distribution is prohibited. If you are not the intended recipient, please notify Rocket Software immediately and destroy all copies of this communication. Thank you.

	[[alternative HTML version deleted]]


From my4 @end|ng |rom @@nger@@c@uk  Fri May  1 21:24:40 2020
From: my4 @end|ng |rom @@nger@@c@uk (Matthew Young)
Date: Fri, 1 May 2020 19:24:40 +0000
Subject: [R-pkg-devel] Rmarkdown vignette yields r inline warning on windows
 build
Message-ID: <431379CC-A390-4F2F-9EAD-5DEFF131E235@sanger.ac.uk>

I am trying to submit a package to CRAN that includes a vignette built using rmarkdown.  It passes fine on the machines I have access to (ubuntu and osx).  When I submit to CRAN using the form, it passes the Debian checks, but fails on windows with the following WARNING:

! Missing $ inserted.
<inserted text>
                $
l.1030

You may need to add $ $ around a certain inline R expression `r `


I?m really not sure what is causing this error or how to debug it.  I do not have any inline r expressions in my vignette (code here https://github.com/constantAmateur/SoupX/blob/devel/vignettes/pbmcTutorial.Rmd).  I do have back-ticked expression such as `round`, but they are not executed code.  Can anyone suggest what might be causing this issue?

Many thanks,

Matthew



-- 
 The Wellcome Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE.
	[[alternative HTML version deleted]]


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Fri May  1 21:39:50 2020
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Fri, 1 May 2020 19:39:50 +0000
Subject: [R-pkg-devel] 
 Rmarkdown vignette yields r inline warning on windows build
In-Reply-To: <431379CC-A390-4F2F-9EAD-5DEFF131E235@sanger.ac.uk>
References: <431379CC-A390-4F2F-9EAD-5DEFF131E235@sanger.ac.uk>
Message-ID: <e48fd215d6454c0fb53692b3f53616a9@umanitoba.ca>

Since you're looking for suggestions and that's all I have:


Could it be the space between the tick mark and the r? For example, does replacing ` round` with `round` (and all other instances) fix the issue?


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Matthew Young <my4 at sanger.ac.uk>
Sent: May 1, 2020 2:24:40 PM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Rmarkdown vignette yields r inline warning on windows build

********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

I am trying to submit a package to CRAN that includes a vignette built using rmarkdown.  It passes fine on the machines I have access to (ubuntu and osx).  When I submit to CRAN using the form, it passes the Debian checks, but fails on windows with the following WARNING:

! Missing $ inserted.
<inserted text>
                $
l.1030

You may need to add $ $ around a certain inline R expression `r `


I?m really not sure what is causing this error or how to debug it.  I do not have any inline r expressions in my vignette (code here https://github.com/constantAmateur/SoupX/blob/devel/vignettes/pbmcTutorial.Rmd).  I do have back-ticked expression such as `round`, but they are not executed code.  Can anyone suggest what might be causing this issue?

Many thanks,

Matthew



--
 The Wellcome Sanger Institute is operated by Genome Research
 Limited, a charity registered in England with number 1021457 and a
 company registered in England with number 2742969, whose registered
 office is 215 Euston Road, London, NW1 2BE.
        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Fri May  1 21:56:10 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Fri, 1 May 2020 14:56:10 -0500
Subject: [R-pkg-devel] 
 Rmarkdown vignette yields r inline warning on windows build
In-Reply-To: <e48fd215d6454c0fb53692b3f53616a9@umanitoba.ca>
References: <431379CC-A390-4F2F-9EAD-5DEFF131E235@sanger.ac.uk>
 <e48fd215d6454c0fb53692b3f53616a9@umanitoba.ca>
Message-ID: <59ecc708-37f6-4edd-acb0-f4381c5efbeb@effectivedefense.org>

In R Markdown, you can say, "The number `r round(pi)` will appear as 
"The number 3".? If you write "`round`", it should display "round" in a 
special font for R commands.? Meanwhile "$\sigma > 2\Phi^{-1}(q)$" 
passes the string between the two dollar signs to a LaTeX processor.? If 
you already know this, I apologize for wasting your time with this 
reply.? If you did not know this, it might help you understand the 
problem.? Spencer Graves


On 2020-05-01 14:39, Max Turgeon wrote:
> Since you're looking for suggestions and that's all I have:
>
>
> Could it be the space between the tick mark and the r? For example, does replacing ` round` with `round` (and all other instances) fix the issue?
>
>
> Max Turgeon
> Assistant Professor
> Department of Statistics
> Department of Computer Science
> University of Manitoba
> maxturgeon.ca<http://maxturgeon.ca>
>
>
> ________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Matthew Young <my4 at sanger.ac.uk>
> Sent: May 1, 2020 2:24:40 PM
> To: r-package-devel at r-project.org
> Subject: [R-pkg-devel] Rmarkdown vignette yields r inline warning on windows build
>
> ********************************************************
> Caution: This message was sent from outside the University of Manitoba.
> ********************************************************
>
> I am trying to submit a package to CRAN that includes a vignette built using rmarkdown.  It passes fine on the machines I have access to (ubuntu and osx).  When I submit to CRAN using the form, it passes the Debian checks, but fails on windows with the following WARNING:
>
> ! Missing $ inserted.
> <inserted text>
>                  $
> l.1030
>
> You may need to add $ $ around a certain inline R expression `r `
>
>
> I?m really not sure what is causing this error or how to debug it.  I do not have any inline r expressions in my vignette (code here https://github.com/constantAmateur/SoupX/blob/devel/vignettes/pbmcTutorial.Rmd).  I do have back-ticked expression such as `round`, but they are not executed code.  Can anyone suggest what might be causing this issue?
>
> Many thanks,
>
> Matthew
>
>
>
> --
>   The Wellcome Sanger Institute is operated by Genome Research
>   Limited, a charity registered in England with number 1021457 and a
>   company registered in England with number 2742969, whose registered
>   office is 215 Euston Road, London, NW1 2BE.
>          [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> 	[[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From my4 @end|ng |rom @@nger@@c@uk  Sat May  2 01:12:33 2020
From: my4 @end|ng |rom @@nger@@c@uk (Matthew Young)
Date: Fri, 1 May 2020 23:12:33 +0000
Subject: [R-pkg-devel] 
 Rmarkdown vignette yields r inline warning on windows build [EXT]
In-Reply-To: <e48fd215d6454c0fb53692b3f53616a9@umanitoba.ca>
References: <431379CC-A390-4F2F-9EAD-5DEFF131E235@sanger.ac.uk>
 <e48fd215d6454c0fb53692b3f53616a9@umanitoba.ca>
Message-ID: <AB03113E-0C7C-45BA-9660-FA0E2D6E02C1@sanger.ac.uk>

I?ve tried both ways (with and without a space after the backtick) and get the same error.

From: Max Turgeon <Max.Turgeon at umanitoba.ca>
Date: Friday, 1 May 2020 at 20:39
To: Matthew Young <my4 at sanger.ac.uk>, "r-package-devel at r-project.org" <r-package-devel at r-project.org>
Subject: Re: Rmarkdown vignette yields r inline warning on windows build [EXT]


Since you're looking for suggestions and that's all I have:



Could it be the space between the tick mark and the r? For example, does replacing ` round` with `round` (and all other instances) fix the issue?


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca [maxturgeon.ca]<https://urldefense.proofpoint.com/v2/url?u=http-3A__maxturgeon.ca&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=AbhQu2y3TVl5oJQLLYAJXIyLZredpV9XsmkkeGsu1Js&e=>



________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Matthew Young <my4 at sanger.ac.uk>
Sent: May 1, 2020 2:24:40 PM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Rmarkdown vignette yields r inline warning on windows build

********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

I am trying to submit a package to CRAN that includes a vignette built using rmarkdown.  It passes fine on the machines I have access to (ubuntu and osx).  When I submit to CRAN using the form, it passes the Debian checks, but fails on windows with the following WARNING:

! Missing $ inserted.
<inserted text>
                $
l.1030

You may need to add $ $ around a certain inline R expression `r `


I?m really not sure what is causing this error or how to debug it.  I do not have any inline r expressions in my vignette (code here https://github.com/constantAmateur/SoupX/blob/devel/vignettes/pbmcTutorial.Rmd [github.com]<https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_constantAmateur_SoupX_blob_devel_vignettes_pbmcTutorial.Rmd&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=1GWJLKyp3TJoM0X6-KWdkBEwtTer6JTOQKvF0d5iSPE&e=>).  I do have back-ticked expression such as `round`, but they are not executed code.  Can anyone suggest what might be causing this issue?

Many thanks,

Matthew



--
 The Wellcome Sanger Institute is operated by Genome Research
 Limited, a charity registered in England with number 1021457 and a
 company registered in England with number 2742969, whose registered
 office is 215 Euston Road, London, NW1 2BE.
        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel [stat.ethz.ch]<https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=aGl7Y0D-JZ1wiONI57CC8uOIDd4wneCjR-eCz6PZaVw&e=>



-- 
 The Wellcome Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE.
	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sat May  2 17:54:52 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sat, 2 May 2020 17:54:52 +0200
Subject: [R-pkg-devel] 
 Rmarkdown vignette yields r inline warning on windows build [EXT]
In-Reply-To: <AB03113E-0C7C-45BA-9660-FA0E2D6E02C1@sanger.ac.uk>
References: <431379CC-A390-4F2F-9EAD-5DEFF131E235@sanger.ac.uk>
 <e48fd215d6454c0fb53692b3f53616a9@umanitoba.ca>
 <AB03113E-0C7C-45BA-9660-FA0E2D6E02C1@sanger.ac.uk>
Message-ID: <a25e1dde-5755-32a3-bd4f-ea095b123fbf@statistik.tu-dortmund.de>

My wild guess is that 'r ' indicates there is an invisible char after 
the r that is not representable in the chosen encoding.

Best,
Uwe Ligges



On 02.05.2020 01:12, Matthew Young wrote:
> I?ve tried both ways (with and without a space after the backtick) and get the same error.
> 
> From: Max Turgeon <Max.Turgeon at umanitoba.ca>
> Date: Friday, 1 May 2020 at 20:39
> To: Matthew Young <my4 at sanger.ac.uk>, "r-package-devel at r-project.org" <r-package-devel at r-project.org>
> Subject: Re: Rmarkdown vignette yields r inline warning on windows build [EXT]
> 
> 
> Since you're looking for suggestions and that's all I have:
> 
> 
> 
> Could it be the space between the tick mark and the r? For example, does replacing ` round` with `round` (and all other instances) fix the issue?
> 
> 
> Max Turgeon
> Assistant Professor
> Department of Statistics
> Department of Computer Science
> University of Manitoba
> maxturgeon.ca [maxturgeon.ca]<https://urldefense.proofpoint.com/v2/url?u=http-3A__maxturgeon.ca&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=AbhQu2y3TVl5oJQLLYAJXIyLZredpV9XsmkkeGsu1Js&e=>
> 
> 
> 
> ________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Matthew Young <my4 at sanger.ac.uk>
> Sent: May 1, 2020 2:24:40 PM
> To: r-package-devel at r-project.org
> Subject: [R-pkg-devel] Rmarkdown vignette yields r inline warning on windows build
> 
> ********************************************************
> Caution: This message was sent from outside the University of Manitoba.
> ********************************************************
> 
> I am trying to submit a package to CRAN that includes a vignette built using rmarkdown.  It passes fine on the machines I have access to (ubuntu and osx).  When I submit to CRAN using the form, it passes the Debian checks, but fails on windows with the following WARNING:
> 
> ! Missing $ inserted.
> <inserted text>
>                  $
> l.1030
> 
> You may need to add $ $ around a certain inline R expression `r `
> 
> 
> I?m really not sure what is causing this error or how to debug it.  I do not have any inline r expressions in my vignette (code here https://github.com/constantAmateur/SoupX/blob/devel/vignettes/pbmcTutorial.Rmd [github.com]<https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_constantAmateur_SoupX_blob_devel_vignettes_pbmcTutorial.Rmd&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=1GWJLKyp3TJoM0X6-KWdkBEwtTer6JTOQKvF0d5iSPE&e=>).  I do have back-ticked expression such as `round`, but they are not executed code.  Can anyone suggest what might be causing this issue?
> 
> Many thanks,
> 
> Matthew
> 
> 
> 
> --
>   The Wellcome Sanger Institute is operated by Genome Research
>   Limited, a charity registered in England with number 1021457 and a
>   company registered in England with number 2742969, whose registered
>   office is 215 Euston Road, London, NW1 2BE.
>          [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel [stat.ethz.ch]<https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=aGl7Y0D-JZ1wiONI57CC8uOIDd4wneCjR-eCz6PZaVw&e=>
> 
> 
>


From ordonezjo@e@|ej@ndro @end|ng |rom gm@||@com  Sat May  2 01:41:19 2020
From: ordonezjo@e@|ej@ndro @end|ng |rom gm@||@com (=?UTF-8?B?Sm9zw6kgQWxlamFuZHJvIE9yZG/DsWV6?=)
Date: Fri, 1 May 2020 18:41:19 -0500
Subject: [R-pkg-devel] CensSpatial package error.
Message-ID: <CAC7JchBhET3EPdU8unDB_onvtmOQwVFwzD9aaG7GMODvBDkdrg@mail.gmail.com>

Good evening,

My name is Jose and I'm the mantainer of the CensSpatial package. This
package was available as public but it was discharged because a problem
with the geoR orphan package.
That situation was solved and now I'm trying to resubmit the package. The
problem is that when I try to submit it, it does not pass the automatic
incoming checks,* even when I tested it using the function check available
in R studio without errors.*
Apparently is a problem with the OS Linux and Debian but I couldn't
identify it yet. I also tested it using the package rhub and ran
CensSpatial with different OS without results.

I'm provinding below the link to the source package and the error messages,
hoping to get some help from you.

https://www.dropbox.com/sh/gp5iwubkgbv9r8s/AADvJg-GGHKzoMU_PHNWdcYea?dl=0
<https://www.dropbox.com/sh/gp5iwubkgbv9r8s/AADvJg-GGHKzoMU_PHNWdcYea?dl=0&fbclid=IwAR1xeC1ArV-7IGBhatSil7u_aCjZbFoj3BDc_TD2fVq_pwGl5sdH8vgVuKQ>


In the link below, I cannot recognize what the error is. SOS!

https://win-builder.r-project.org/incoming_pretest/CensSpatial_2.5_20200428_224633/Debian/00check.log
<https://win-builder.r-project.org/incoming_pretest/CensSpatial_2.5_20200428_224633/Debian/00check.log?fbclid=IwAR2vaWkuHuyURbZH1WrUREFpmy4uO_XbXQd6leglq4CPPnn8HZgggm-1xMs>


Thanks for the attention.


Att,
Jos? Alejandro Ordo?ez.
Ph.D Student
UNICAMP.


<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
Libre
de virus. www.avast.com
<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
<#m_2258293037509368237_DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sat May  2 18:15:23 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sat, 2 May 2020 18:15:23 +0200
Subject: [R-pkg-devel] CensSpatial package error.
In-Reply-To: <CAC7JchBhET3EPdU8unDB_onvtmOQwVFwzD9aaG7GMODvBDkdrg@mail.gmail.com>
References: <CAC7JchBhET3EPdU8unDB_onvtmOQwVFwzD9aaG7GMODvBDkdrg@mail.gmail.com>
Message-ID: <a6d5e1b0-439a-3483-98da-9fb8fcccd64f@statistik.tu-dortmund.de>

This indicates a programing error:


<bytecode: 0x56489c23c2f8>
<environment: namespace:CensSpatial>
  --- function search by body ---
Function FCi.fixo in namespace CensSpatial has this body.
  ----------- END OF FAILURE REPORT --------------
Error in if (class(V.inv) == "try-error") return(Inf) :
   the condition has length > 1
Calls: SAEMSCL


Yoiu see class(N.inv) has length > 1 hence if(cond) has a length > 1 
condition and cannot deal with it (well takes only the first value), 
hence rewrite to, e.g.,
if ("try-error" %in% class(V.inv))

Best,
Uwe Ligges



On 02.05.2020 01:41, Jos? Alejandro Ordo?ez wrote:
> Good evening,
> 
> My name is Jose and I'm the mantainer of the CensSpatial package. This
> package was available as public but it was discharged because a problem
> with the geoR orphan package.
> That situation was solved and now I'm trying to resubmit the package. The
> problem is that when I try to submit it, it does not pass the automatic
> incoming checks,* even when I tested it using the function check available
> in R studio without errors.*
> Apparently is a problem with the OS Linux and Debian but I couldn't
> identify it yet. I also tested it using the package rhub and ran
> CensSpatial with different OS without results.
> 
> I'm provinding below the link to the source package and the error messages,
> hoping to get some help from you.
> 
> https://www.dropbox.com/sh/gp5iwubkgbv9r8s/AADvJg-GGHKzoMU_PHNWdcYea?dl=0
> <https://www.dropbox.com/sh/gp5iwubkgbv9r8s/AADvJg-GGHKzoMU_PHNWdcYea?dl=0&fbclid=IwAR1xeC1ArV-7IGBhatSil7u_aCjZbFoj3BDc_TD2fVq_pwGl5sdH8vgVuKQ>
> 
> 
> In the link below, I cannot recognize what the error is. SOS!
> 
> https://win-builder.r-project.org/incoming_pretest/CensSpatial_2.5_20200428_224633/Debian/00check.log
> <https://win-builder.r-project.org/incoming_pretest/CensSpatial_2.5_20200428_224633/Debian/00check.log?fbclid=IwAR2vaWkuHuyURbZH1WrUREFpmy4uO_XbXQd6leglq4CPPnn8HZgggm-1xMs>
> 
> 
> Thanks for the attention.
> 
> 
> Att,
> Jos? Alejandro Ordo?ez.
> Ph.D Student
> UNICAMP.
> 
> 
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
> Libre
> de virus. www.avast.com
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
> <#m_2258293037509368237_DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Sat May  2 18:20:48 2020
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Sat, 2 May 2020 16:20:48 +0000
Subject: [R-pkg-devel] CensSpatial package error.
In-Reply-To: <CAC7JchBhET3EPdU8unDB_onvtmOQwVFwzD9aaG7GMODvBDkdrg@mail.gmail.com>
References: <CAC7JchBhET3EPdU8unDB_onvtmOQwVFwzD9aaG7GMODvBDkdrg@mail.gmail.com>
Message-ID: <445b71e3-86d6-49a9-9b55-ac3940d3daa5@email.android.com>

Hi Jos?,

The error message is pretty clear:

Error in if (class(V.inv) == "try-error") return(Inf) :
  the condition has length > 1

Instead of testing for equality of the class, you should use the function "inherits". Then, even if "class(V.inv)" has length greater than one, your condition in the if clause will be exactly TRUE or FALSE.

Best,

Max Turgeon

On May 2, 2020 10:07 AM, Jos? Alejandro Ordo?ez <ordonezjosealejandro at gmail.com> wrote:
********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

Good evening,

My name is Jose and I'm the mantainer of the CensSpatial package. This
package was available as public but it was discharged because a problem
with the geoR orphan package.
That situation was solved and now I'm trying to resubmit the package. The
problem is that when I try to submit it, it does not pass the automatic
incoming checks,* even when I tested it using the function check available
in R studio without errors.*
Apparently is a problem with the OS Linux and Debian but I couldn't
identify it yet. I also tested it using the package rhub and ran
CensSpatial with different OS without results.

I'm provinding below the link to the source package and the error messages,
hoping to get some help from you.

https://www.dropbox.com/sh/gp5iwubkgbv9r8s/AADvJg-GGHKzoMU_PHNWdcYea?dl=0
<https://www.dropbox.com/sh/gp5iwubkgbv9r8s/AADvJg-GGHKzoMU_PHNWdcYea?dl=0&fbclid=IwAR1xeC1ArV-7IGBhatSil7u_aCjZbFoj3BDc_TD2fVq_pwGl5sdH8vgVuKQ>


In the link below, I cannot recognize what the error is. SOS!

https://win-builder.r-project.org/incoming_pretest/CensSpatial_2.5_20200428_224633/Debian/00check.log
<https://win-builder.r-project.org/incoming_pretest/CensSpatial_2.5_20200428_224633/Debian/00check.log?fbclid=IwAR2vaWkuHuyURbZH1WrUREFpmy4uO_XbXQd6leglq4CPPnn8HZgggm-1xMs>


Thanks for the attention.


Att,
Jos? Alejandro Ordo?ez.
Ph.D Student
UNICAMP.


<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
Libre
de virus. www.avast.com<http://www.avast.com>
<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
<#m_2258293037509368237_DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From my4 @end|ng |rom @@nger@@c@uk  Mon May  4 11:09:55 2020
From: my4 @end|ng |rom @@nger@@c@uk (Matthew Young)
Date: Mon, 4 May 2020 09:09:55 +0000
Subject: [R-pkg-devel] 
 Rmarkdown vignette yields r inline warning on windows build [EXT]
In-Reply-To: <a25e1dde-5755-32a3-bd4f-ea095b123fbf@statistik.tu-dortmund.de>
References: <431379CC-A390-4F2F-9EAD-5DEFF131E235@sanger.ac.uk>
 <e48fd215d6454c0fb53692b3f53616a9@umanitoba.ca>
 <AB03113E-0C7C-45BA-9660-FA0E2D6E02C1@sanger.ac.uk>
 <a25e1dde-5755-32a3-bd4f-ea095b123fbf@statistik.tu-dortmund.de>
Message-ID: <463FA593-BD2D-4043-91EC-51B6E80475C8@sanger.ac.uk>

I progressively chopped bits out of the vignette till the error stopped to identify the error.  It was being caused by inline latex, where I had two %% marks.  I'm not really sure why this broke things, but removing it fixed it.

Thanks,

Matthew 

?On 02/05/2020, 16:54, "Uwe Ligges" <ligges at statistik.tu-dortmund.de> wrote:

    My wild guess is that 'r ' indicates there is an invisible char after 
    the r that is not representable in the chosen encoding.
    
    Best,
    Uwe Ligges
    
    
    
    On 02.05.2020 01:12, Matthew Young wrote:
    > I?ve tried both ways (with and without a space after the backtick) and get the same error.
    > 
    > From: Max Turgeon <Max.Turgeon at umanitoba.ca>
    > Date: Friday, 1 May 2020 at 20:39
    > To: Matthew Young <my4 at sanger.ac.uk>, "r-package-devel at r-project.org" <r-package-devel at r-project.org>
    > Subject: Re: Rmarkdown vignette yields r inline warning on windows build [EXT]
    > 
    > 
    > Since you're looking for suggestions and that's all I have:
    > 
    > 
    > 
    > Could it be the space between the tick mark and the r? For example, does replacing ` round` with `round` (and all other instances) fix the issue?
    > 
    > 
    > Max Turgeon
    > Assistant Professor
    > Department of Statistics
    > Department of Computer Science
    > University of Manitoba
    > maxturgeon.ca [maxturgeon.ca]<https://urldefense.proofpoint.com/v2/url?u=http-3A__maxturgeon.ca&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=AbhQu2y3TVl5oJQLLYAJXIyLZredpV9XsmkkeGsu1Js&e=>
    > 
    > 
    > 
    > ________________________________
    > From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Matthew Young <my4 at sanger.ac.uk>
    > Sent: May 1, 2020 2:24:40 PM
    > To: r-package-devel at r-project.org
    > Subject: [R-pkg-devel] Rmarkdown vignette yields r inline warning on windows build
    > 
    > ********************************************************
    > Caution: This message was sent from outside the University of Manitoba.
    > ********************************************************
    > 
    > I am trying to submit a package to CRAN that includes a vignette built using rmarkdown.  It passes fine on the machines I have access to (ubuntu and osx).  When I submit to CRAN using the form, it passes the Debian checks, but fails on windows with the following WARNING:
    > 
    > ! Missing $ inserted.
    > <inserted text>
    >                  $
    > l.1030
    > 
    > You may need to add $ $ around a certain inline R expression `r `
    > 
    > 
    > I?m really not sure what is causing this error or how to debug it.  I do not have any inline r expressions in my vignette (code here https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_constantAmateur_SoupX_blob_devel_vignettes_pbmcTutorial.Rmd&d=DwIDaQ&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=ES3UP2LbqvhOCSwVRP53v_p9EkdNJSwmYuIlfmKly28&s=R9IaPh1UjnNyLSsE8CxG_GorvzRQPg8160TkSZoRoac&e=  [github.com]<https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_constantAmateur_SoupX_blob_devel_vignettes_pbmcTutorial.Rmd&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=1GWJLKyp3TJoM0X6-KWdkBEwtTer6JTOQKvF0d5iSPE&e=>).  I do have back-ticked expression such as `round`, but they are not executed code.  Can anyone suggest what might be causing this issue?
    > 
    > Many thanks,
    > 
    > Matthew
    > 
    > 
    > 
    > --
    >   The Wellcome Sanger Institute is operated by Genome Research
    >   Limited, a charity registered in England with number 1021457 and a
    >   company registered in England with number 2742969, whose registered
    >   office is 215 Euston Road, London, NW1 2BE.
    >          [[alternative HTML version deleted]]
    > 
    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwIDaQ&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=ES3UP2LbqvhOCSwVRP53v_p9EkdNJSwmYuIlfmKly28&s=jHcMcn59Q1-o_syCiYCMbWM1iyrmJpxUICKHEcK4j9w&e=  [stat.ethz.ch]<https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=aGl7Y0D-JZ1wiONI57CC8uOIDd4wneCjR-eCz6PZaVw&e=>
    > 
    > 
    > 
    




-- 
 The Wellcome Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE.

From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Tue May  5 16:30:11 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Tue, 5 May 2020 16:30:11 +0200
Subject: [R-pkg-devel] 
 Rmarkdown vignette yields r inline warning on windows build [EXT]
In-Reply-To: <463FA593-BD2D-4043-91EC-51B6E80475C8@sanger.ac.uk>
References: <431379CC-A390-4F2F-9EAD-5DEFF131E235@sanger.ac.uk>
 <e48fd215d6454c0fb53692b3f53616a9@umanitoba.ca>
 <AB03113E-0C7C-45BA-9660-FA0E2D6E02C1@sanger.ac.uk>
 <a25e1dde-5755-32a3-bd4f-ea095b123fbf@statistik.tu-dortmund.de>
 <463FA593-BD2D-4043-91EC-51B6E80475C8@sanger.ac.uk>
Message-ID: <24241.30835.83685.271330@stat.math.ethz.ch>

>>>>> Matthew Young 
>>>>>     on Mon, 4 May 2020 09:09:55 +0000 writes:

    > I progressively chopped bits out of the vignette till the
    > error stopped to identify the error.  It was being caused
    > by inline latex, where I had two %% marks.  I'm not really
    > sure why this broke things, but removing it fixed it.

"fascinating" .. yes, unfortunately, the Rmarkdown related
engines (I suspect pandoc, but haven't thought or digged about it)
are clearly not bug free.

That's been my experience quite frequently when I "exaggerate"
in my use of LaTeX "tricks" in Rmarkdown documents ..

If somebody knows where exactly such cases should be sent, it
may help improving the situation.. I'm really no expert here.

Martin

    > Thanks,
    > Matthew

    > ?On 02/05/2020, 16:54, "Uwe Ligges"
    > <ligges at statistik.tu-dortmund.de> wrote:

    >     My wild guess is that 'r ' indicates there is an
    > invisible char after the r that is not representable in
    > the chosen encoding.
    
    >     Best, Uwe Ligges
    
    
    
    >     On 02.05.2020 01:12, Matthew Young wrote:
    >> I?ve tried both ways (with and without a space after the
    >> backtick) and get the same error.
    >> 
    >> From: Max Turgeon <Max.Turgeon at umanitoba.ca> Date:
    >> Friday, 1 May 2020 at 20:39 To: Matthew Young
    >> <my4 at sanger.ac.uk>, "r-package-devel at r-project.org"
    >> <r-package-devel at r-project.org> Subject: Re: Rmarkdown
    >> vignette yields r inline warning on windows build [EXT]
    >> 
    >> 
    >> Since you're looking for suggestions and that's all I
    >> have:
    >> 
    >> 
    >> 
    >> Could it be the space between the tick mark and the r?
    >> For example, does replacing ` round` with `round` (and
    >> all other instances) fix the issue?
    >> 
    >> 
    >> Max Turgeon Assistant Professor Department of Statistics
    >> Department of Computer Science University of Manitoba
    >> maxturgeon.ca
    >> [maxturgeon.ca]<https://urldefense.proofpoint.com/v2/url?u=http-3A__maxturgeon.ca&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=AbhQu2y3TVl5oJQLLYAJXIyLZredpV9XsmkkeGsu1Js&e=>
    >> 
    >> 
    >> 
    >> ________________________________ From: R-package-devel
    >> <r-package-devel-bounces at r-project.org> on behalf of
    >> Matthew Young <my4 at sanger.ac.uk> Sent: May 1, 2020
    >> 2:24:40 PM To: r-package-devel at r-project.org Subject:
    >> [R-pkg-devel] Rmarkdown vignette yields r inline warning
    >> on windows build
    >> 
    >> ********************************************************
    >> Caution: This message was sent from outside the
    >> University of Manitoba.
    >> ********************************************************
    >> 
    >> I am trying to submit a package to CRAN that includes a
    >> vignette built using rmarkdown.  It passes fine on the
    >> machines I have access to (ubuntu and osx).  When I
    >> submit to CRAN using the form, it passes the Debian
    >> checks, but fails on windows with the following WARNING:
    >> 
    >> ! Missing $ inserted.  <inserted text> $ l.1030
    >> 
    >> You may need to add $ $ around a certain inline R
    >> expression `r `
    >> 
    >> 
    >> I?m really not sure what is causing this error or how to
    >> debug it.  I do not have any inline r expressions in my
    >> vignette (code here
    >> https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_constantAmateur_SoupX_blob_devel_vignettes_pbmcTutorial.Rmd&d=DwIDaQ&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=ES3UP2LbqvhOCSwVRP53v_p9EkdNJSwmYuIlfmKly28&s=R9IaPh1UjnNyLSsE8CxG_GorvzRQPg8160TkSZoRoac&e=
    >> [github.com]<https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_constantAmateur_SoupX_blob_devel_vignettes_pbmcTutorial.Rmd&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=1GWJLKyp3TJoM0X6-KWdkBEwtTer6JTOQKvF0d5iSPE&e=>).
    >> I do have back-ticked expression such as `round`, but
    >> they are not executed code.  Can anyone suggest what
    >> might be causing this issue?
    >> 
    >> Many thanks,
    >> 
    >> Matthew
    >> 
    >> 
    >> 
    >> --
    >> The Wellcome Sanger Institute is operated by Genome
    >> Research Limited, a charity registered in England with
    >> number 1021457 and a company registered in England with
    >> number 2742969, whose registered office is 215 Eu...{{dropped:26}}


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue May  5 17:54:22 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 5 May 2020 11:54:22 -0400
Subject: [R-pkg-devel] 
 Rmarkdown vignette yields r inline warning on windows build [EXT]
In-Reply-To: <24241.30835.83685.271330@stat.math.ethz.ch>
References: <431379CC-A390-4F2F-9EAD-5DEFF131E235@sanger.ac.uk>
 <e48fd215d6454c0fb53692b3f53616a9@umanitoba.ca>
 <AB03113E-0C7C-45BA-9660-FA0E2D6E02C1@sanger.ac.uk>
 <a25e1dde-5755-32a3-bd4f-ea095b123fbf@statistik.tu-dortmund.de>
 <463FA593-BD2D-4043-91EC-51B6E80475C8@sanger.ac.uk>
 <24241.30835.83685.271330@stat.math.ethz.ch>
Message-ID: <00652ace-c94e-aabd-1174-669f322d16aa@gmail.com>

On 05/05/2020 10:30 a.m., Martin Maechler wrote:
>>>>>> Matthew Young
>>>>>>      on Mon, 4 May 2020 09:09:55 +0000 writes:
> 
>      > I progressively chopped bits out of the vignette till the
>      > error stopped to identify the error.  It was being caused
>      > by inline latex, where I had two %% marks.  I'm not really
>      > sure why this broke things, but removing it fixed it.
> 
> "fascinating" .. yes, unfortunately, the Rmarkdown related
> engines (I suspect pandoc, but haven't thought or digged about it)
> are clearly not bug free.
> 
> That's been my experience quite frequently when I "exaggerate"
> in my use of LaTeX "tricks" in Rmarkdown documents ..
> 
> If somebody knows where exactly such cases should be sent, it
> may help improving the situation.. I'm really no expert here.

We don't have anything to send, so it's hard to say where to send it.

Put together a minimal reproducible example, and it'll probably be easy 
to work out whether it's R, R Markdown, knitr, Pandoc, or LaTeX that has 
the bug.

(Naturally I suspect it's not R, and past experience makes me think it's 
not LaTeX, but there are still three other possibilities in the list.)

Duncan Murdoch

> 
> Martin
> 
>      > Thanks,
>      > Matthew
> 
>      > ?On 02/05/2020, 16:54, "Uwe Ligges"
>      > <ligges at statistik.tu-dortmund.de> wrote:
> 
>      >     My wild guess is that 'r ' indicates there is an
>      > invisible char after the r that is not representable in
>      > the chosen encoding.
>      
>      >     Best, Uwe Ligges
>      
>      
>      
>      >     On 02.05.2020 01:12, Matthew Young wrote:
>      >> I?ve tried both ways (with and without a space after the
>      >> backtick) and get the same error.
>      >>
>      >> From: Max Turgeon <Max.Turgeon at umanitoba.ca> Date:
>      >> Friday, 1 May 2020 at 20:39 To: Matthew Young
>      >> <my4 at sanger.ac.uk>, "r-package-devel at r-project.org"
>      >> <r-package-devel at r-project.org> Subject: Re: Rmarkdown
>      >> vignette yields r inline warning on windows build [EXT]
>      >>
>      >>
>      >> Since you're looking for suggestions and that's all I
>      >> have:
>      >>
>      >>
>      >>
>      >> Could it be the space between the tick mark and the r?
>      >> For example, does replacing ` round` with `round` (and
>      >> all other instances) fix the issue?
>      >>
>      >>
>      >> Max Turgeon Assistant Professor Department of Statistics
>      >> Department of Computer Science University of Manitoba
>      >> maxturgeon.ca
>      >> [maxturgeon.ca]<https://urldefense.proofpoint.com/v2/url?u=http-3A__maxturgeon.ca&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=AbhQu2y3TVl5oJQLLYAJXIyLZredpV9XsmkkeGsu1Js&e=>
>      >>
>      >>
>      >>
>      >> ________________________________ From: R-package-devel
>      >> <r-package-devel-bounces at r-project.org> on behalf of
>      >> Matthew Young <my4 at sanger.ac.uk> Sent: May 1, 2020
>      >> 2:24:40 PM To: r-package-devel at r-project.org Subject:
>      >> [R-pkg-devel] Rmarkdown vignette yields r inline warning
>      >> on windows build
>      >>
>      >> ********************************************************
>      >> Caution: This message was sent from outside the
>      >> University of Manitoba.
>      >> ********************************************************
>      >>
>      >> I am trying to submit a package to CRAN that includes a
>      >> vignette built using rmarkdown.  It passes fine on the
>      >> machines I have access to (ubuntu and osx).  When I
>      >> submit to CRAN using the form, it passes the Debian
>      >> checks, but fails on windows with the following WARNING:
>      >>
>      >> ! Missing $ inserted.  <inserted text> $ l.1030
>      >>
>      >> You may need to add $ $ around a certain inline R
>      >> expression `r `
>      >>
>      >>
>      >> I?m really not sure what is causing this error or how to
>      >> debug it.  I do not have any inline r expressions in my
>      >> vignette (code here
>      >> https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_constantAmateur_SoupX_blob_devel_vignettes_pbmcTutorial.Rmd&d=DwIDaQ&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=ES3UP2LbqvhOCSwVRP53v_p9EkdNJSwmYuIlfmKly28&s=R9IaPh1UjnNyLSsE8CxG_GorvzRQPg8160TkSZoRoac&e=
>      >> [github.com]<https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_constantAmateur_SoupX_blob_devel_vignettes_pbmcTutorial.Rmd&d=DwMF-g&c=D7ByGjS34AllFgecYw0iC6Zq7qlm8uclZFI0SqQnqBo&r=XXcY8t_J1mVMCDTmi3629g&m=KD5hkiMRJXvOAV1srKNufKVz3MOekQAmaDIOmgmxB6A&s=1GWJLKyp3TJoM0X6-KWdkBEwtTer6JTOQKvF0d5iSPE&e=>).
>      >> I do have back-ticked expression such as `round`, but
>      >> they are not executed code.  Can anyone suggest what
>      >> might be causing this issue?
>      >>
>      >> Many thanks,
>      >>
>      >> Matthew
>      >>
>      >>
>      >>
>      >> --
>      >> The Wellcome Sanger Institute is operated by Genome
>      >> Research Limited, a charity registered in England with
>      >> number 1021457 and a company registered in England with
>      >> number 2742969, whose registered office is 215 Eu...{{dropped:26}}
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From j@me@@r@m@@y @end|ng |rom mcg|||@c@  Tue May  5 21:58:27 2020
From: j@me@@r@m@@y @end|ng |rom mcg|||@c@ (James Owen Ramsay, Dr.)
Date: Tue, 5 May 2020 19:58:27 +0000
Subject: [R-pkg-devel] Using Rcpp to set up a package
Message-ID: <410A4CCB-03BF-489E-AB4C-480FF0C61568@mcgill.ca>

I?m working on max OS-X 10.15.3, using R 4.0.0, and updated Xcode as well as updated tools:

Here?s my setup of a package called Data2LD2. (An update of an existing package Data2LD already on Iran):

code_files = c("~/Documents/R/Data2LDRcpp/R/Atensorfn.R",
              "~/Documents/R/Data2LDRcpp/R/BAtensorfn.R",
              "~/Documents/R/Data2LDRcpp/R/Btensorfn.R",
              "~/Documents/R/Data2LDRcpp/R/checkModel.R",
              "~/Documents/R/Data2LDRcpp/R/Data2LD.opt.R",
              "~/Documents/R/Data2LDRcpp/R/Data2LD.R",
              "~/Documents/R/Data2LDRcpp/R/fun.explinear.R",
              "~/Documents/R/Data2LDRcpp/R/fun.Dexplinear.R",
              "~/Documents/R/Data2LDRcpp/R/getForceterm.R",
              "~/Documents/R/Data2LDRcpp/R/getHomoTerm.R",
              "~/Documents/R/Data2LDRcpp/R/inprod.TPbasis.R",
              "~/Documents/R/Data2LDRcpp/R/make.Fterm.R",
              "~/Documents/R/Data2LDRcpp/R/make.Xterm.R",
              "~/Documents/R/Data2LDRcpp/R/make.Variable.R",
              "~/Documents/R/Data2LDRcpp/R/modelList2Vec.R",
              "~/Documents/R/Data2LDRcpp/R/modelVec2List.R",
              "~/Documents/R/Data2LDRcpp/R/printMatrix.R",
              "~/Documents/R/Data2LDRcpp/R/printModel.R")

cpp_files = c("~/Documents/R/Data2LDRcpp/src/DASarrayFnCpp",
             "~/Documents/R/Data2LDRcpp/src/DBSarrayFnCpp",
             "~/Documents/R/Data2LDRcpp/src/DRarrayFnCpp",
             "~/Documents/R/Data2LDRcpp/src/loopJuanCpp",
             "~/Documents/R/Data2LDRcpp/src/RmatFnCpp",
             "~/Documents/R/Data2LDRcpp/src/SmatFnCpp")

Rcpp.package.skeleton(name="Data2LD2", 
                     code_files=code_files,
                     cpp_files =cpp_files,
                     author="James Ramsay",
                     maintainer="James Ramsay",
                     force=TRUE)

Here?s the bad news from R CMD check:

Error: package or namespace load failed for ?Data2LD2? in dyn.load(file, DLLpath = DLLpath, ...):
unable to load shared object '/Users/jimramsay/Documents/R/Data2LD2.Rcheck/00LOCK-Data2LD2/00new/Data2LD2/libs/Data2LD2.so':
 dlopen(/Users/jimramsay/Documents/R/Data2LD2.Rcheck/00LOCK-Data2LD2/00new/Data2LD2/libs/Data2LD2.so, 6): Symbol not found: _DASarrayFnCpp
 Referenced from: /Users/jimramsay/Documents/R/Data2LD2.Rcheck/00LOCK-Data2LD2/00new/Data2LD2/libs/Data2LD2.so
 Expected in: flat namespace
in /Users/jimramsay/Documents/R/Data2LD2.Rcheck/00LOCK-Data2LD2/00new/Data2LD2/libs/Data2LD2.so
Error: loading failed
Execution halted
ERROR: loading failed
* removing ?/Users/jimramsay/Documents/R/Data2LD2.Rcheck/Data2LD2?

I?m getting this failure after many iterations of this setup, this being the simplest and most direct that I know.

Sure would like some help (or some sympathy at least)

Jim Ramsay

From edd @end|ng |rom deb|@n@org  Tue May  5 22:24:01 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 5 May 2020 15:24:01 -0500
Subject: [R-pkg-devel] Using Rcpp to set up a package
In-Reply-To: <410A4CCB-03BF-489E-AB4C-480FF0C61568@mcgill.ca>
References: <410A4CCB-03BF-489E-AB4C-480FF0C61568@mcgill.ca>
Message-ID: <24241.52065.416943.494066@rob.eddelbuettel.com>


Jim,

This is not the list for Rcpp discussions, as the package and its
documentation have been saying for a decade you should subscribe
to the rcpp-devel list.

Allow me to add one item:

On 5 May 2020 at 19:58, James Owen Ramsay, Dr. wrote:
| I?m working on max OS-X 10.15.3, using R 4.0.0, and updated Xcode as well as updated tools:
| 
| Here?s my setup of a package called Data2LD2. (An update of an existing package Data2LD already on Iran):
| 
| code_files = c("~/Documents/R/Data2LDRcpp/R/Atensorfn.R",
|               "~/Documents/R/Data2LDRcpp/R/BAtensorfn.R",
|               "~/Documents/R/Data2LDRcpp/R/Btensorfn.R",
|               "~/Documents/R/Data2LDRcpp/R/checkModel.R",
|               "~/Documents/R/Data2LDRcpp/R/Data2LD.opt.R",
|               "~/Documents/R/Data2LDRcpp/R/Data2LD.R",
|               "~/Documents/R/Data2LDRcpp/R/fun.explinear.R",
|               "~/Documents/R/Data2LDRcpp/R/fun.Dexplinear.R",
|               "~/Documents/R/Data2LDRcpp/R/getForceterm.R",
|               "~/Documents/R/Data2LDRcpp/R/getHomoTerm.R",
|               "~/Documents/R/Data2LDRcpp/R/inprod.TPbasis.R",
|               "~/Documents/R/Data2LDRcpp/R/make.Fterm.R",
|               "~/Documents/R/Data2LDRcpp/R/make.Xterm.R",
|               "~/Documents/R/Data2LDRcpp/R/make.Variable.R",
|               "~/Documents/R/Data2LDRcpp/R/modelList2Vec.R",
|               "~/Documents/R/Data2LDRcpp/R/modelVec2List.R",
|               "~/Documents/R/Data2LDRcpp/R/printMatrix.R",
|               "~/Documents/R/Data2LDRcpp/R/printModel.R")
| 
| cpp_files = c("~/Documents/R/Data2LDRcpp/src/DASarrayFnCpp",
|              "~/Documents/R/Data2LDRcpp/src/DBSarrayFnCpp",
|              "~/Documents/R/Data2LDRcpp/src/DRarrayFnCpp",
|              "~/Documents/R/Data2LDRcpp/src/loopJuanCpp",
|              "~/Documents/R/Data2LDRcpp/src/RmatFnCpp",
|              "~/Documents/R/Data2LDRcpp/src/SmatFnCpp")
| 
| Rcpp.package.skeleton(name="Data2LD2", 
|                      code_files=code_files,
|                      cpp_files =cpp_files,
|                      author="James Ramsay",
|                      maintainer="James Ramsay",
|                      force=TRUE)

I have created many packages using Rcpp.package.skeleton(), but I usually do
NOT supply lists of files. I would consider starting with an empty package,
and adding files as you go along.  For a deeper look it usually helps us most
to actually _see_ the code so if it is in public repo, tell us.

| Here?s the bad news from R CMD check:
| 
| Error: package or namespace load failed for ?Data2LD2? in dyn.load(file, DLLpath = DLLpath, ...):
| unable to load shared object '/Users/jimramsay/Documents/R/Data2LD2.Rcheck/00LOCK-Data2LD2/00new/Data2LD2/libs/Data2LD2.so':
|  dlopen(/Users/jimramsay/Documents/R/Data2LD2.Rcheck/00LOCK-Data2LD2/00new/Data2LD2/libs/Data2LD2.so, 6): Symbol not found: _DASarrayFnCpp
|  Referenced from: /Users/jimramsay/Documents/R/Data2LD2.Rcheck/00LOCK-Data2LD2/00new/Data2LD2/libs/Data2LD2.so
|  Expected in: flat namespace

We've seen that error but I don't recall from the top of my head where this
leads.

Overall, I would expect this to be simple to fix. Let's lay out the files as
expect, let's run `compileAttributes()` (if you use Rcpp Attributes as one
should) and let's take it from there.

But let's maybe have that discussion over at rcpp-devel.

Best,  Dirk


| in /Users/jimramsay/Documents/R/Data2LD2.Rcheck/00LOCK-Data2LD2/00new/Data2LD2/libs/Data2LD2.so
| Error: loading failed
| Execution halted
| ERROR: loading failed
| * removing ?/Users/jimramsay/Documents/R/Data2LD2.Rcheck/Data2LD2?
| 
| I?m getting this failure after many iterations of this setup, this being the simplest and most direct that I know.
| 
| Sure would like some help (or some sympathy at least)
| 
| Jim Ramsay
| ______________________________________________
| R-package-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From |@b|o@corr@d|n| @end|ng |rom |n|@@c|  Wed May  6 12:17:41 2020
From: |@b|o@corr@d|n| @end|ng |rom |n|@@c| (Fabio Corradini Santander)
Date: Wed, 6 May 2020 12:17:41 +0200
Subject: [R-pkg-devel] MacOS flat namespace
Message-ID: <CAOxgwDD=sbCFsYiWyoXwc1OggkVcde1Rn88O6FyCREbki4Y56w@mail.gmail.com>

Hi,
Two months ago I released a package I developed in Debian 9 GCC (
https://CRAN.R-project.org/package=uFTIR). The package was accepted on
CRAN, and it can be installed on Windows and Linux machines. However, it is
not working on MacOS. I don't know why. The problem starts after the
installation, as the OS cannot load the compiled code. Cutting the long
paths of CRAN, the problem looks like (for r-oldrel-osx-x86_64):

...
** testing if installed package can be loaded from temporary location
Error: package or namespace load failed for ?uFTIR? in dyn.load(file,
DLLpath = DLLpath, ...):
 unable to load shared object '.../libs/uFTIR.so':
  dlopen(.../libs/uFTIR.so, 6): Symbol not found:
_H5P_CLS_DATASET_CREATE_ID_g
  Referenced from: .../libs/uFTIR.so
  Expected in: flat namespace
 in .../libs/uFTIR.so
Error: loading failed
...
(The missing symbol for r-release-osx-x86_64 is a different
one: _jpeg_resync_to_restart)

I saw this thread (https://github.com/RcppCore/RcppArmadillo/issues/224)
about Rcpp, but CRAN is not using gcc, but clang, so it is not really the
same... although I was lost when they discussed about libc++ and libstdc++.

I also saw this thread from stackoverflow (
https://stackoverflow.com/questions/40922814/error-in-dyn-loaddllfile-unable-to-load-shared-object-expected-in-flat-na)
but I don't have a mix between cpp and plain c.

I think that probably has to do with my Makevars file (
https://community.rstudio.com/t/error-during-the-installation-of-utf8-package/4005/2)...
maybe I shouldn't use PKG_LIBS and LDLIBS instead? But if I change it, how
will it affect the -already successful- installations on windows and linux?

The Makevars for Mac and Linux is:

CXX_STD = CXX11
PKG_CXXFLAGS = $(SHLIB_OPENMP_CXXFLAGS) `pkg-config --cflags gdal`
PKG_LIBS = $(SHLIB_OPENMP_CXXFLAGS) $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)
`pkg-config --libs gdal`

I will appreciate a hint,

Fabio.

-- 


	[[alternative HTML version deleted]]


From rtob@r @end|ng |rom |cr@r@org  Thu May  7 06:35:19 2020
From: rtob@r @end|ng |rom |cr@r@org (Rodrigo Tobar)
Date: Thu, 7 May 2020 12:35:19 +0800
Subject: [R-pkg-devel] MacOS flat namespace
In-Reply-To: <CAOxgwDD=sbCFsYiWyoXwc1OggkVcde1Rn88O6FyCREbki4Y56w@mail.gmail.com>
References: <CAOxgwDD=sbCFsYiWyoXwc1OggkVcde1Rn88O6FyCREbki4Y56w@mail.gmail.com>
Message-ID: <36f6d215-cf77-2e87-78ec-a42bbf72b429@icrar.org>

Hi,

On 6/5/20 6:17 pm, Fabio Corradini Santander wrote:
> ... Cutting the long
> paths of CRAN, the problem looks like (for r-oldrel-osx-x86_64):
> 
> ...
> ** testing if installed package can be loaded from temporary location
> Error: package or namespace load failed for ?uFTIR? in dyn.load(file,
> DLLpath = DLLpath, ...):
>   unable to load shared object '.../libs/uFTIR.so':
>    dlopen(.../libs/uFTIR.so, 6): Symbol not found:
> _H5P_CLS_DATASET_CREATE_ID_g
>    Referenced from: .../libs/uFTIR.so
>    Expected in: flat namespace
>   in .../libs/uFTIR.so
> Error: loading failed

_H5P_CLS_DATASET_CREATE_ID_g comes from the HDF5 library. You don't seem 
to use it directly, and is probably a transitive dependency coming from 
gdal, which you do link against, so it seems more like a problem with 
gdal, not with your code. You could double check this by trying to 
compile anything else against that gdal installation and see if it 
works, or the fact that you are compiling an R package.

You will find many people on internet having exactly the same problem 
but in other products, not R. It seems to boil down to a mismatch in how 
hdf5 was compiled, and how hdf5 users (in this case, gdal) compile 
against the library (with/without defining the H5_BUILT_AS_DYNAMIC_LIB 
preprocessor macro). But again, this is probably on gdal's side, not yours.

Make sure you have a proper gdal installation; after that things should 
work. If you want you could be more defensive about this, and add some 
logic to your configure script to test if a binary compiled against gdal 
runs correctly or not, and react accordingly (e.g., if gdal is a strong 
dependency then you don't continue further into the compilation of your 
package).

> (The missing symbol for r-release-osx-x86_64 is a different
> one: _jpeg_resync_to_restart)

No idea, but I'd suspect gdal here again, not your code.

Cheers,

Rodrigo


From |@b|o@corr@d|n| @end|ng |rom |n|@@c|  Thu May  7 16:37:37 2020
From: |@b|o@corr@d|n| @end|ng |rom |n|@@c| (Fabio Corradini Santander)
Date: Thu, 7 May 2020 16:37:37 +0200
Subject: [R-pkg-devel] MacOS flat namespace
In-Reply-To: <36f6d215-cf77-2e87-78ec-a42bbf72b429@icrar.org>
References: <CAOxgwDD=sbCFsYiWyoXwc1OggkVcde1Rn88O6FyCREbki4Y56w@mail.gmail.com>
 <36f6d215-cf77-2e87-78ec-a42bbf72b429@icrar.org>
Message-ID: <CAOxgwDCZXAVOwXDiH7XnydUhU0QCrOrH10057i0LwD35Sbe5Pg@mail.gmail.com>

Hi,
Thank you both very much for your help. Summarizing your comments:
1. There were no problems when installing the package from CRAN on a macOS
Catalina with clang11 and R 4.0.0.
2. Since I don't use any of the objects directly, it is probably a gdal
thing due to an improper(?) installation.

OK, but the problem happens on CRAN during the CRAN checks for the OS X and
macOS system flavors... Does this mean that there might be something wrong
with CRAN gdal installation for OS X and macOS? (I don't think so, plus how
can I check that without bothering CRAN maintainers?)

> Make sure you have a proper gdal installation; after that things should
> work. If you want you could be more defensive about this, and add some
> logic to your configure script to test if a binary compiled against gdal
> runs correctly or not, and react accordingly (e.g., if gdal is a strong
> dependency then you don't continue further into the compilation of your
> package).

Although Rodrigo suggestion will work, if I abort the installation I will
fail the CRAN check, which is the reason I'm asking this question...

Thanks once again,

Fabio.

-- 


	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Thu May  7 17:23:41 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Thu, 7 May 2020 08:23:41 -0700
Subject: [R-pkg-devel] MacOS flat namespace
In-Reply-To: <CAOxgwDCZXAVOwXDiH7XnydUhU0QCrOrH10057i0LwD35Sbe5Pg@mail.gmail.com>
References: <CAOxgwDD=sbCFsYiWyoXwc1OggkVcde1Rn88O6FyCREbki4Y56w@mail.gmail.com>
 <36f6d215-cf77-2e87-78ec-a42bbf72b429@icrar.org>
 <CAOxgwDCZXAVOwXDiH7XnydUhU0QCrOrH10057i0LwD35Sbe5Pg@mail.gmail.com>
Message-ID: <9ad6f5ee-c53b-02ce-c933-26f9a528cf1f@comcast.net>


On 5/7/20 7:37 AM, Fabio Corradini Santander wrote:
> Hi,
> Thank you both very much for your help. Summarizing your comments:
> 1. There were no problems when installing the package from CRAN on a macOS
> Catalina with clang11 and R 4.0.0.
> 2. Since I don't use any of the objects directly, it is probably a gdal
> thing due to an improper(?) installation.
>
> OK, but the problem happens on CRAN during the CRAN checks for the OS X and
> macOS system flavors... Does this mean that there might be something wrong
> with CRAN gdal installation for OS X and macOS? (I don't think so, plus how
> can I check that without bothering CRAN maintainers?)
>
>> Make sure you have a proper gdal installation; after that things should
>> work. If you want you could be more defensive about this, and add some
>> logic to your configure script to test if a binary compiled against gdal
>> runs correctly or not, and react accordingly (e.g., if gdal is a strong
>> dependency then you don't continue further into the compilation of your
>> package).
> Although Rodrigo suggestion will work, if I abort the installation I will
> fail the CRAN check, which is the reason I'm asking this question...

You might want to look at the 'sf' package to see how it handles GDAL 
SystemRequirements.

When I was using MacOS a few years ago I would typically need to make 
GDAL available on my system using the KingChaos distribution of the 
GDAL, GEOS, PROJ bundle whenever there was a major change in macOS. It 
provides a proper framework installation.

If the user has chosen (against the Mac fork's maintainer's advice)? to 
install GDAL and friends using homebrew, there may be difficulty during 
the linkage steps trying to find the headers that will not be in the 
expected directory. If they have gone the homebrew route, then I believe 
there are additional steps needed to establish the proper system 
environment symlinks and/or environment variables. You can probably find 
some discussion in the R-sig-mac mailing list archives. I generally use 
the MarkMail search facility. You can try:


https://markmail.org/search/?q=+list%3Aorg.r-project.r-sig-mac+gdal


 ?You might want to post the question on the R-sig-mac mailing list if 
you remain stuck.

-- 

David.

>
> Thanks once again,
>
> Fabio.
>

	[[alternative HTML version deleted]]


From |@b|o@corr@d|n| @end|ng |rom |n|@@c|  Fri May  8 11:07:15 2020
From: |@b|o@corr@d|n| @end|ng |rom |n|@@c| (Fabio Corradini Santander)
Date: Fri, 8 May 2020 11:07:15 +0200
Subject: [R-pkg-devel] MacOS flat namespace
In-Reply-To: <9ad6f5ee-c53b-02ce-c933-26f9a528cf1f@comcast.net>
References: <CAOxgwDD=sbCFsYiWyoXwc1OggkVcde1Rn88O6FyCREbki4Y56w@mail.gmail.com>
 <36f6d215-cf77-2e87-78ec-a42bbf72b429@icrar.org>
 <CAOxgwDCZXAVOwXDiH7XnydUhU0QCrOrH10057i0LwD35Sbe5Pg@mail.gmail.com>
 <9ad6f5ee-c53b-02ce-c933-26f9a528cf1f@comcast.net>
Message-ID: <CAOxgwDBR=0b2OsdkCw0R1K9wo+yLpep0YMr1JKn=K3NYz=3QbQ@mail.gmail.com>

Hi,
[SOLVED]
It was a problem of linking the libraries correctly, as suggested by
Rodrigo Tobar and David Winsemius.
I checked the package in rhub and it was working fine in the
macos-highsierra-release platform, which uses homebrew to install gdal and
proj. These are probably the settings that Bob Rudis used and that's why he
didn't catch the problem. However, the package check did not work ok in the
macos-highsierra-release-cran platform, probably because CRAN uses
KingChaos distribution of GDAL, etc. As I wasn't sure, I opened an issue in
the rhub github page (#372) and G?bor Cs?rdi pointed me in the right
direction.

I saw how rgdal solved its system requirements. I copied their configure.ac
file and targeted my exports to generate an ad-hoc configure file and
ta-dah! it's working ok in both r-hub platforms (and hopefully it will on
cran too). Now I need to prune rgdal configure.ac file to remove all that
it isn't necessary.

Thank you,
Fabio.

El jue., 7 may. 2020 a las 17:23, David Winsemius (<dwinsemius at comcast.net>)
escribi?:

>
> On 5/7/20 7:37 AM, Fabio Corradini Santander wrote:
>
> Hi,
> Thank you both very much for your help. Summarizing your comments:
> 1. There were no problems when installing the package from CRAN on a macOS
> Catalina with clang11 and R 4.0.0.
> 2. Since I don't use any of the objects directly, it is probably a gdal
> thing due to an improper(?) installation.
>
> OK, but the problem happens on CRAN during the CRAN checks for the OS X and
> macOS system flavors... Does this mean that there might be something wrong
> with CRAN gdal installation for OS X and macOS? (I don't think so, plus how
> can I check that without bothering CRAN maintainers?)
>
>
> Make sure you have a proper gdal installation; after that things should
> work. If you want you could be more defensive about this, and add some
> logic to your configure script to test if a binary compiled against gdal
> runs correctly or not, and react accordingly (e.g., if gdal is a strong
> dependency then you don't continue further into the compilation of your
> package).
>
> Although Rodrigo suggestion will work, if I abort the installation I will
> fail the CRAN check, which is the reason I'm asking this question...
>
> You might want to look at the 'sf' package to see how it handles GDAL
> SystemRequirements.
>
> When I was using MacOS a few years ago I would typically need to make GDAL
> available on my system using the KingChaos distribution of the GDAL, GEOS,
> PROJ bundle whenever there was a major change in macOS. It provides a
> proper framework installation.
>
> If the user has chosen (against the Mac fork's maintainer's advice)  to
> install GDAL and friends using homebrew, there may be difficulty during the
> linkage steps trying to find the headers that will not be in the expected
> directory. If they have gone the homebrew route, then I believe there are
> additional steps needed to establish the proper system environment symlinks
> and/or environment variables. You can probably find some discussion in the
> R-sig-mac mailing list archives. I generally use the MarkMail search
> facility. You can try:
>
>
> https://markmail.org/search/?q=+list%3Aorg.r-project.r-sig-mac+gdal
>
>
>  You might want to post the question on the R-sig-mac mailing list if you
> remain stuck.
>
> --
>
> David.
>
> Thanks once again,
>
> Fabio.
>
>
>

-- 


	[[alternative HTML version deleted]]


From j@y|@mb20 @end|ng |rom gm@||@com  Sun May 10 22:31:17 2020
From: j@y|@mb20 @end|ng |rom gm@||@com (James Lamb)
Date: Sun, 10 May 2020 21:31:17 +0100
Subject: [R-pkg-devel] Is there an Rtools40 changelog?
Message-ID: <CADPubGRsQFfm6gXRttFi-xq3VaAVkxTDGLxWUMMFbz+-e1TQ+w@mail.gmail.com>

Hello,

I am a maintainer on the LightGBM project, focused on that project's R
package. The R package is not available on CRAN yet (we are working on it),
so for now our users must build it from source.

The package includes compilation of a C++ library, and we link to R.dll /
R.so to use R-provided functions like Rprintf.

With the release of R4.0 and Rtools40, we recently received reports from
our users that they are unable to build our package on Windows systems with
R 4.0 and Rtools 4.0 (https://github.com/microsoft/LightGBM/issues/3064).

After some investigation, I've learned that the following changes in
Rtools40 (relative to Rtools35) broke our installation process:

   - *gendef.exe* was removed
   - *mingw32-make.exe* was removed
   - paths like "mingw_64/bin" were changed to "mingw64/bin"

I do not expect that our off-CRAN installation process is supported. I
understand that by maintaining our own process, we are taking on the burden
of keeping up with new releases of R and Rtools.

My question is this...is there public documentation about why the changes I
mentioned above were made? I have not found any mention of them in the
following places, and am not sure where else to look.

   - https://cran.r-project.org/bin/windows/Rtools/
   - https://github.com/r-windows/docs/blob/master/faq.md#readme
   - https://jeroen.github.io/rstudio2019

Thank you very much for your time and consideration,

-James Lamb

	[[alternative HTML version deleted]]


From @@pph|rezhou0404 @end|ng |rom gm@||@com  Sun May 10 23:26:30 2020
From: @@pph|rezhou0404 @end|ng |rom gm@||@com (Sapphire Zhou)
Date: Sun, 10 May 2020 16:26:30 -0500
Subject: [R-pkg-devel] Documentation for non-user-level objects
Message-ID: <9CEB8C27-F083-45E1-A574-A390202BE994@gmail.com>

I met a problem when I uploaded the package to CRAN. There is a warning told me 
?All user-level objects in a package should have documentation entries.?

Actually, those functions are not user-level functions. How could I claim non-user-level functions in an R package.
Is there any idea to remove this warning.

Thanks!

From bgunter@4567 @end|ng |rom gm@||@com  Mon May 11 00:03:11 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 10 May 2020 15:03:11 -0700
Subject: [R-pkg-devel] Documentation for non-user-level objects
In-Reply-To: <9CEB8C27-F083-45E1-A574-A390202BE994@gmail.com>
References: <9CEB8C27-F083-45E1-A574-A390202BE994@gmail.com>
Message-ID: <CAGxFJbR2cWg3_UE9PS+sHqCrH5WnXS_apkUVCcGi2mKP7S2Npw@mail.gmail.com>

1. Don't export them.

2. Use:  \keyword{ internal } in the .Rd file
>From "Writing R Extensions"
"The special keyword ?internal? marks a page of internal objects that
are not part of the package?s API. If the help page for object foo has
keyword ?internal?, then help(foo) gives this help page, but foo is
excluded from several object indices, including the alphabetical list
of objects in the HTMLhelp system."

Cheers,
Bert

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Sun, May 10, 2020 at 2:31 PM Sapphire Zhou
<sapphirezhou0404 at gmail.com> wrote:
>
> I met a problem when I uploaded the package to CRAN. There is a warning told me
> ?All user-level objects in a package should have documentation entries.?
>
> Actually, those functions are not user-level functions. How could I claim non-user-level functions in an R package.
> Is there any idea to remove this warning.
>
> Thanks!
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon May 11 00:15:51 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 11 May 2020 00:15:51 +0200
Subject: [R-pkg-devel] Documentation for non-user-level objects
In-Reply-To: <9CEB8C27-F083-45E1-A574-A390202BE994@gmail.com>
References: <9CEB8C27-F083-45E1-A574-A390202BE994@gmail.com>
Message-ID: <762ea177-b5bc-6c1a-478a-85af60cbbc9c@statistik.tu-dortmund.de>



On 10.05.2020 23:26, Sapphire Zhou wrote:
> I met a problem when I uploaded the package to CRAN. There is a warning told me
> ?All user-level objects in a package should have documentation entries.?
> 
> Actually, those functions are not user-level functions. How could I claim non-user-level functions in an R package.
> Is there any idea to remove this warning.

Have you exported the function?

Best,
Uwe Ligges


> Thanks!
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From bbo|ker @end|ng |rom gm@||@com  Sun May 10 23:35:40 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sun, 10 May 2020 17:35:40 -0400
Subject: [R-pkg-devel] Documentation for non-user-level objects
In-Reply-To: <9CEB8C27-F083-45E1-A574-A390202BE994@gmail.com>
References: <9CEB8C27-F083-45E1-A574-A390202BE994@gmail.com>
Message-ID: <1e571d52-eb45-fdf4-cb62-4a7864abfb4d-8144@gmail.com>

 ?? If you've exported them then they are "user-level objects". You can 
either remove them from the list of exported objects (edit your 
NAMESPACE or change your roxygen specifications), or document them 
somewhere.? One standard solution is? to use the "internal" keyword 
<https://stackoverflow.com/questions/32457581/how-can-i-hide-the-documentation-of-helper-functions>: 
they still need to be documented, but they're not in the package index.

"Using the internal keyword removes all functions in the associated .Rd 
file from the documentation index and disables some of their automated 
tests. A common use case is to both export a function (using |@export|) 
and marking it as internal. That way, advanced users can access a 
function that new users would be confused about if they were to see it 
in the index."


 ? Hope that's helpful; if not, feel free to give a little more 
detail/clarify your situation.

On 5/10/20 5:26 PM, Sapphire Zhou wrote:
> I met a problem when I uploaded the package to CRAN. There is a warning told me
> ?All user-level objects in a package should have documentation entries.?
>
> Actually, those functions are not user-level functions. How could I claim non-user-level functions in an R package.
> Is there any idea to remove this warning.
> Thanks!
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From bob @end|ng |rom rud@|@  Wed May  6 17:55:58 2020
From: bob @end|ng |rom rud@|@ (Bob Rudis)
Date: Wed, 6 May 2020 11:55:58 -0400
Subject: [R-pkg-devel] MacOS flat namespace
In-Reply-To: <CAOxgwDD=sbCFsYiWyoXwc1OggkVcde1Rn88O6FyCREbki4Y56w@mail.gmail.com>
References: <CAOxgwDD=sbCFsYiWyoXwc1OggkVcde1Rn88O6FyCREbki4Y56w@mail.gmail.com>
Message-ID: <DF1B85C1-6481-4550-8C39-3E14B0136C16@rud.is>


Can you provide a bit more context? I just grabbed the pkg source from CRAN and it builds fine.


$ clang --version
Apple clang version 11.0.3 (clang-1103.0.32.59)
Target: x86_64-apple-darwin19.5.0
Thread model: posix
InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin

? Session info ???????????????????????????????????????????????????????????????????????????

 setting  value                                 
 version  R version 4.0.0 RC (2020-04-21 r78267)
 os       macOS Catalina 10.15.5                
 system   x86_64, darwin17.0                    
 ui       RStudio                               
 language (EN)                                  
 collate  en_US.UTF-8                           
 ctype    en_US.UTF-8                           
 tz       America/New_York                      
 date     2020-05-06                            

? Packages ???????????????????????????????????????????????????????????????????????????????

 package     * version  date       lib source        
 assertthat    0.2.1    2019-03-21 [1] CRAN (R 4.0.0)
 backports     1.1.6    2020-04-05 [1] CRAN (R 4.0.0)
 bit         * 1.1-15.2 2020-02-10 [1] CRAN (R 4.0.0)
 bit64       * 0.9-7    2017-05-08 [1] CRAN (R 4.0.0)
 callr         3.4.3    2020-03-28 [1] CRAN (R 4.0.0)
 cli           2.0.2    2020-02-28 [1] CRAN (R 4.0.0)
 codetools     0.2-16   2018-12-24 [1] CRAN (R 4.0.0)
 crayon        1.3.4    2017-09-16 [1] CRAN (R 4.0.0)
 desc          1.2.0    2018-05-01 [1] CRAN (R 4.0.0)
 devtools    * 2.2.2    2020-02-17 [1] CRAN (R 4.0.0)
 digest        0.6.25   2020-02-23 [1] CRAN (R 4.0.0)
 ellipsis      0.3.0    2019-09-20 [1] CRAN (R 4.0.0)
 fansi         0.4.1    2020-01-08 [1] CRAN (R 4.0.0)
 fs            1.4.1    2020-04-04 [1] CRAN (R 4.0.0)
 glue          1.4.0    2020-04-03 [1] CRAN (R 4.0.0)
 lattice       0.20-41  2020-04-02 [1] CRAN (R 4.0.0)
 magrittr      1.5      2014-11-22 [1] CRAN (R 4.0.0)
 memoise       1.1.0    2017-04-21 [1] CRAN (R 4.0.0)
 pkgbuild      1.0.6    2019-10-09 [1] CRAN (R 4.0.0)
 pkgload       1.0.2    2018-10-29 [1] CRAN (R 4.0.0)
 prettyunits   1.1.1    2020-01-24 [1] CRAN (R 4.0.0)
 processx      3.4.2    2020-02-09 [1] CRAN (R 4.0.0)
 ps            1.3.2    2020-02-13 [1] CRAN (R 4.0.0)
 R6            2.4.1    2019-11-12 [1] CRAN (R 4.0.0)
 raster        3.1-5    2020-04-19 [1] CRAN (R 4.0.0)
 Rcpp          1.0.4.6  2020-04-09 [1] CRAN (R 4.0.0)
 remotes       2.1.1    2020-02-15 [1] CRAN (R 4.0.0)
 rgdal         1.4-8    2019-11-27 [1] CRAN (R 4.0.0)
 rlang         0.4.5    2020-03-01 [1] CRAN (R 4.0.0)
 rprojroot     1.3-2    2018-01-03 [1] CRAN (R 4.0.0)
 rstudioapi    0.11     2020-02-07 [1] CRAN (R 4.0.0)
 sessioninfo   1.1.1    2018-11-05 [1] CRAN (R 4.0.0)
 sp            1.4-1    2020-02-28 [1] CRAN (R 4.0.0)
 testthat      2.3.2    2020-03-02 [1] CRAN (R 4.0.0)
 uFTIR       * 0.1.1    2020-03-11 [1] CRAN (R 4.0.0)
 usethis     * 1.5.1    2019-07-04 [1] CRAN (R 4.0.0)
 withr         2.2.0    2020-04-20 [1] CRAN (R 4.0.0)

[1] /Library/Frameworks/R.framework/Versions/4.0/Resources/library

> On May 6, 2020, at 06:17, Fabio Corradini Santander <fabio.corradini at inia.cl> wrote:
> 
> Hi,
> Two months ago I released a package I developed in Debian 9 GCC (
> https://CRAN.R-project.org/package=uFTIR). The package was accepted on
> CRAN, and it can be installed on Windows and Linux machines. However, it is
> not working on MacOS. I don't know why. The problem starts after the
> installation, as the OS cannot load the compiled code. Cutting the long
> paths of CRAN, the problem looks like (for r-oldrel-osx-x86_64):
> 
> ...
> ** testing if installed package can be loaded from temporary location
> Error: package or namespace load failed for ?uFTIR? in dyn.load(file,
> DLLpath = DLLpath, ...):
> unable to load shared object '.../libs/uFTIR.so':
>  dlopen(.../libs/uFTIR.so, 6): Symbol not found:
> _H5P_CLS_DATASET_CREATE_ID_g
>  Referenced from: .../libs/uFTIR.so
>  Expected in: flat namespace
> in .../libs/uFTIR.so
> Error: loading failed
> ...
> (The missing symbol for r-release-osx-x86_64 is a different
> one: _jpeg_resync_to_restart)
> 
> I saw this thread (https://github.com/RcppCore/RcppArmadillo/issues/224)
> about Rcpp, but CRAN is not using gcc, but clang, so it is not really the
> same... although I was lost when they discussed about libc++ and libstdc++.
> 
> I also saw this thread from stackoverflow (
> https://stackoverflow.com/questions/40922814/error-in-dyn-loaddllfile-unable-to-load-shared-object-expected-in-flat-na)
> but I don't have a mix between cpp and plain c.
> 
> I think that probably has to do with my Makevars file (
> https://community.rstudio.com/t/error-during-the-installation-of-utf8-package/4005/2)...
> maybe I shouldn't use PKG_LIBS and LDLIBS instead? But if I change it, how
> will it affect the -already successful- installations on windows and linux?
> 
> The Makevars for Mac and Linux is:
> 
> CXX_STD = CXX11
> PKG_CXXFLAGS = $(SHLIB_OPENMP_CXXFLAGS) `pkg-config --cflags gdal`
> PKG_LIBS = $(SHLIB_OPENMP_CXXFLAGS) $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)
> `pkg-config --libs gdal`
> 
> I will appreciate a hint,
> 
> Fabio.
> 
> -- 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jw|j||e|@ @end|ng |rom bno@@c@be  Mon May 11 13:54:41 2020
From: jw|j||e|@ @end|ng |rom bno@@c@be (Jan Wijffels)
Date: Mon, 11 May 2020 11:54:41 +0000
Subject: [R-pkg-devel] how to specify to let a package only build 64bit on
 CRAN
Message-ID: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>

Hello everyone,

I have a package which I would like to host on CRAN. The package is at https://github.com/bnosac/golgotha
The package only builds on 64bit however because the package uses R package reticulate which requires a python library called torch which does not build on 32 bit platforms.
So installation only works using INSTALL_opts = "--no-multiarch"

How do you specify this to the CRAN maintainers that this is the way it should be set up on CRAN such that it only is built for 64bit systems.

thanks,
Jan

Jan Wijffels
Statistician
www.bnosac.be  | +32 486 611708
	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon May 11 14:39:42 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 11 May 2020 08:39:42 -0400
Subject: [R-pkg-devel] 
 how to specify to let a package only build 64bit on CRAN
In-Reply-To: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>
References: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>
Message-ID: <7f92f51b-6039-75ff-ad9f-8cca8aef24a1@gmail.com>

On 11/05/2020 7:54 a.m., Jan Wijffels wrote:
> Hello everyone,
> 
> I have a package which I would like to host on CRAN. The package is at https://github.com/bnosac/golgotha
> The package only builds on 64bit however because the package uses R package reticulate which requires a python library called torch which does not build on 32 bit platforms.
> So installation only works using INSTALL_opts = "--no-multiarch"
> 
> How do you specify this to the CRAN maintainers that this is the way it should be set up on CRAN such that it only is built for 64bit systems.
> 

I don't see how your package has any 32 bit dependence, since it has no 
src directory.  It's probably sufficient to declare the dependency on 
reticulate, which indirectly implies the 32 bit dependence.  But if 
reticulate works on 32 bit systems as long as users don't need "torch",
then just state that.

One thing I'd recommend:  you should try to change the dependency from 
Depends to Imports.  If there are a few reticulate functions that you 
want your users to have access to, you can import them and re-export 
them so they're available from your package as well.

Duncan


From jw|j||e|@ @end|ng |rom bno@@c@be  Mon May 11 14:46:06 2020
From: jw|j||e|@ @end|ng |rom bno@@c@be (Jan Wijffels)
Date: Mon, 11 May 2020 12:46:06 +0000
Subject: [R-pkg-devel] 
 how to specify to let a package only build 64bit on CRAN
In-Reply-To: <7f92f51b-6039-75ff-ad9f-8cca8aef24a1@gmail.com>
References: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>
 <7f92f51b-6039-75ff-ad9f-8cca8aef24a1@gmail.com>
Message-ID: <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>

Duncan,

Thanks for the reply. Let me make this more clear.
The R package reticulate works on 32bit and 64bit. My golgotha package depends on reticulate and an extra Python package called torch which is not available for 32bit platforms. This is specified in the DESCRIPTION file at https://github.com/bnosac/golgotha/blob/master/DESCRIPTION#L17

For that reason R CMD check will fail on CRAN for 32bit. Hence my question. How do I specify this in the package such that I can distribute it on CRAN.

best,
Jan


Jan Wijffels
Statistician
www.bnosac.be? | +32 486 611708

??????? Original Message ???????
On Monday 11 May 2020 14:39, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> On 11/05/2020 7:54 a.m., Jan Wijffels wrote:
>
> > Hello everyone,
> > I have a package which I would like to host on CRAN. The package is at https://github.com/bnosac/golgotha
> > The package only builds on 64bit however because the package uses R package reticulate which requires a python library called torch which does not build on 32 bit platforms.
> > So installation only works using INSTALL_opts = "--no-multiarch"
> > How do you specify this to the CRAN maintainers that this is the way it should be set up on CRAN such that it only is built for 64bit systems.
>
> I don't see how your package has any 32 bit dependence, since it has no
> src directory. It's probably sufficient to declare the dependency on
> reticulate, which indirectly implies the 32 bit dependence. But if
> reticulate works on 32 bit systems as long as users don't need "torch",
> then just state that.
>
> One thing I'd recommend: you should try to change the dependency from
> Depends to Imports. If there are a few reticulate functions that you
> want your users to have access to, you can import them and re-export
> them so they're available from your package as well.
>
> Duncan


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon May 11 14:55:13 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 11 May 2020 08:55:13 -0400
Subject: [R-pkg-devel] 
 how to specify to let a package only build 64bit on CRAN
In-Reply-To: <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>
References: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>
 <7f92f51b-6039-75ff-ad9f-8cca8aef24a1@gmail.com>
 <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>
Message-ID: <a171cae7-095f-4865-552b-6635919aeb68@gmail.com>

On 11/05/2020 8:46 a.m., Jan Wijffels wrote:
> Duncan,
> 
> Thanks for the reply. Let me make this more clear.
> The R package reticulate works on 32bit and 64bit. My golgotha package depends on reticulate and an extra Python package called torch which is not available for 32bit platforms. This is specified in the DESCRIPTION file at https://github.com/bnosac/golgotha/blob/master/DESCRIPTION#L17
> 
> For that reason R CMD check will fail on CRAN for 32bit. Hence my question. How do I specify this in the package such that I can distribute it on CRAN.

I don't think there's a formal way to state that, and there shouldn't 
be.  Maybe some day someone will make 32 bit torch available, and then 
your restriction would be unnecessary.  Just state the current situation 
in your submission comments.  You may get an automatic rejection because 
of the build failure, then follow the instructions for getting a human 
to look at things.

It's possible that CRAN will not be flexible on this, because it aims 
for wide portability of the packages it hosts.  However, 32 bit systems 
are less and less common, so a good argument about why your package is 
useful even if not usable on some old systems would probably get it 
accepted.

Duncan Murdoch

> 
> best,
> Jan
> 
> 
> Jan Wijffels
> Statistician
> www.bnosac.be? | +32 486 611708
> 
> ??????? Original Message ???????
> On Monday 11 May 2020 14:39, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
>> On 11/05/2020 7:54 a.m., Jan Wijffels wrote:
>>
>>> Hello everyone,
>>> I have a package which I would like to host on CRAN. The package is at https://github.com/bnosac/golgotha
>>> The package only builds on 64bit however because the package uses R package reticulate which requires a python library called torch which does not build on 32 bit platforms.
>>> So installation only works using INSTALL_opts = "--no-multiarch"
>>> How do you specify this to the CRAN maintainers that this is the way it should be set up on CRAN such that it only is built for 64bit systems.
>>
>> I don't see how your package has any 32 bit dependence, since it has no
>> src directory. It's probably sufficient to declare the dependency on
>> reticulate, which indirectly implies the 32 bit dependence. But if
>> reticulate works on 32 bit systems as long as users don't need "torch",
>> then just state that.
>>
>> One thing I'd recommend: you should try to change the dependency from
>> Depends to Imports. If there are a few reticulate functions that you
>> want your users to have access to, you can import them and re-export
>> them so they're available from your package as well.
>>
>> Duncan
> 
>


From jw|j||e|@ @end|ng |rom bno@@c@be  Mon May 11 14:59:45 2020
From: jw|j||e|@ @end|ng |rom bno@@c@be (Jan Wijffels)
Date: Mon, 11 May 2020 12:59:45 +0000
Subject: [R-pkg-devel] 
 how to specify to let a package only build 64bit on CRAN
In-Reply-To: <a171cae7-095f-4865-552b-6635919aeb68@gmail.com>
References: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>
 <7f92f51b-6039-75ff-ad9f-8cca8aef24a1@gmail.com>
 <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>
 <a171cae7-095f-4865-552b-6635919aeb68@gmail.com>
Message-ID: <AMr5ja6zgnGPgA9aoEOSWfZeKzsAKYwjKv-T0XeDKLDdCS6v8LkpQeAc9IJ-mC2dv1LZSvsLFMoIpKUP_pCOBD5Ybx63ppPaPSdsJTrfCPg=@bnosac.be>

Duncan,

Thanks for the confirmation that there isn't a formal way to state this 64bit dependency.

have a nice day,
Jan

Jan Wijffels
Statistician
www.bnosac.be? | +32 486 611708

??????? Original Message ???????
On Monday 11 May 2020 14:55, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> On 11/05/2020 8:46 a.m., Jan Wijffels wrote:
>
> > Duncan,
> > Thanks for the reply. Let me make this more clear.
> > The R package reticulate works on 32bit and 64bit. My golgotha package depends on reticulate and an extra Python package called torch which is not available for 32bit platforms. This is specified in the DESCRIPTION file at https://github.com/bnosac/golgotha/blob/master/DESCRIPTION#L17
> > For that reason R CMD check will fail on CRAN for 32bit. Hence my question. How do I specify this in the package such that I can distribute it on CRAN.
>
> I don't think there's a formal way to state that, and there shouldn't
> be. Maybe some day someone will make 32 bit torch available, and then
> your restriction would be unnecessary. Just state the current situation
> in your submission comments. You may get an automatic rejection because
> of the build failure, then follow the instructions for getting a human
> to look at things.
>
> It's possible that CRAN will not be flexible on this, because it aims
> for wide portability of the packages it hosts. However, 32 bit systems
> are less and less common, so a good argument about why your package is
> useful even if not usable on some old systems would probably get it
> accepted.
>
> Duncan Murdoch
>
> > best,
> > Jan
> > Jan Wijffels
> > Statistician
> > www.bnosac.be? | +32 486 611708
> > ??????? Original Message ???????
> > On Monday 11 May 2020 14:39, Duncan Murdoch murdoch.duncan at gmail.com wrote:
> >
> > > On 11/05/2020 7:54 a.m., Jan Wijffels wrote:
> > >
> > > > Hello everyone,
> > > > I have a package which I would like to host on CRAN. The package is at https://github.com/bnosac/golgotha
> > > > The package only builds on 64bit however because the package uses R package reticulate which requires a python library called torch which does not build on 32 bit platforms.
> > > > So installation only works using INSTALL_opts = "--no-multiarch"
> > > > How do you specify this to the CRAN maintainers that this is the way it should be set up on CRAN such that it only is built for 64bit systems.
> > >
> > > I don't see how your package has any 32 bit dependence, since it has no
> > > src directory. It's probably sufficient to declare the dependency on
> > > reticulate, which indirectly implies the 32 bit dependence. But if
> > > reticulate works on 32 bit systems as long as users don't need "torch",
> > > then just state that.
> > > One thing I'd recommend: you should try to change the dependency from
> > > Depends to Imports. If there are a few reticulate functions that you
> > > want your users to have access to, you can import them and re-export
> > > them so they're available from your package as well.
> > > Duncan


From c@@rd|@g@bor @end|ng |rom gm@||@com  Mon May 11 15:05:57 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Mon, 11 May 2020 14:05:57 +0100
Subject: [R-pkg-devel] 
 how to specify to let a package only build 64bit on CRAN
In-Reply-To: <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>
References: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>
 <7f92f51b-6039-75ff-ad9f-8cca8aef24a1@gmail.com>
 <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>
Message-ID: <CABtg=KmjLy2XTxJgH_jCrtocj5_HNe9KWuuvvpHp-UicFAVu+w@mail.gmail.com>

Hi Jan,

this is the only example that I could find:
https://github.com/cran/regRSM/blob/master/DESCRIPTION#L13

I.e. you can have an 'Archs' field in DESCRIPTION, and apparently you
can set that to 'i386' or 'x64' or both.

 I don't know what OSes support this field, and this package hasn't
been updated for a while, so I am not 100% sure, but this definitely
seems like the proper way to declare a 64-bit only package.

Gabor


On Mon, May 11, 2020 at 1:50 PM Jan Wijffels <jwijffels at bnosac.be> wrote:
>
> Duncan,
>
> Thanks for the reply. Let me make this more clear.
> The R package reticulate works on 32bit and 64bit. My golgotha package depends on reticulate and an extra Python package called torch which is not available for 32bit platforms. This is specified in the DESCRIPTION file at https://github.com/bnosac/golgotha/blob/master/DESCRIPTION#L17
>
> For that reason R CMD check will fail on CRAN for 32bit. Hence my question. How do I specify this in the package such that I can distribute it on CRAN.
>
> best,
> Jan
>
>
> Jan Wijffels
> Statistician
> www.bnosac.be  | +32 486 611708
>
> ??????? Original Message ???????
> On Monday 11 May 2020 14:39, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> > On 11/05/2020 7:54 a.m., Jan Wijffels wrote:
> >
> > > Hello everyone,
> > > I have a package which I would like to host on CRAN. The package is at https://github.com/bnosac/golgotha
> > > The package only builds on 64bit however because the package uses R package reticulate which requires a python library called torch which does not build on 32 bit platforms.
> > > So installation only works using INSTALL_opts = "--no-multiarch"
> > > How do you specify this to the CRAN maintainers that this is the way it should be set up on CRAN such that it only is built for 64bit systems.
> >
> > I don't see how your package has any 32 bit dependence, since it has no
> > src directory. It's probably sufficient to declare the dependency on
> > reticulate, which indirectly implies the 32 bit dependence. But if
> > reticulate works on 32 bit systems as long as users don't need "torch",
> > then just state that.
> >
> > One thing I'd recommend: you should try to change the dependency from
> > Depends to Imports. If there are a few reticulate functions that you
> > want your users to have access to, you can import them and re-export
> > them so they're available from your package as well.
> >
> > Duncan
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From Jor|@@Mey@ @end|ng |rom UGent@be  Mon May 11 15:13:02 2020
From: Jor|@@Mey@ @end|ng |rom UGent@be (Joris Meys)
Date: Mon, 11 May 2020 13:13:02 +0000
Subject: [R-pkg-devel] 
 how to specify to let a package only build 64bit on CRAN
In-Reply-To: <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>
References: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>
 <7f92f51b-6039-75ff-ad9f-8cca8aef24a1@gmail.com>,
 <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>
Message-ID: <1589202782466.74268@UGent.be>

Hi Jan,

To add to the suggestion of Gabor and Duncan, it might be a good idea to add a packageStartupMessage that warns the user about the problem when running on a 32bit system. You can easily extract that info from R.Version()$arch . That might help negotiating with CRAN.

Kind regards
Joris


Joris Meys
Statistician
T +32 9 264 61 79

Department Data Analysis and Mathematical Modelling

Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent, Belgium
T administration office +32 9 264 59 32

www.ugent.be

e-maildisclaimer


________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Jan Wijffels <jwijffels at bnosac.be>
Sent: Monday, May 11, 2020 2:46 PM
To: Duncan Murdoch
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel]  how to specify to let a package only build 64bit on CRAN

Duncan,

Thanks for the reply. Let me make this more clear.
The R package reticulate works on 32bit and 64bit. My golgotha package depends on reticulate and an extra Python package called torch which is not available for 32bit platforms. This is specified in the DESCRIPTION file at https://github.com/bnosac/golgotha/blob/master/DESCRIPTION#L17

For that reason R CMD check will fail on CRAN for 32bit. Hence my question. How do I specify this in the package such that I can distribute it on CRAN.

best,
Jan


Jan Wijffels
Statistician
www.bnosac.be  | +32 486 611708

??????? Original Message ???????
On Monday 11 May 2020 14:39, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> On 11/05/2020 7:54 a.m., Jan Wijffels wrote:
>
> > Hello everyone,
> > I have a package which I would like to host on CRAN. The package is at https://github.com/bnosac/golgotha
> > The package only builds on 64bit however because the package uses R package reticulate which requires a python library called torch which does not build on 32 bit platforms.
> > So installation only works using INSTALL_opts = "--no-multiarch"
> > How do you specify this to the CRAN maintainers that this is the way it should be set up on CRAN such that it only is built for 64bit systems.
>
> I don't see how your package has any 32 bit dependence, since it has no
> src directory. It's probably sufficient to declare the dependency on
> reticulate, which indirectly implies the 32 bit dependence. But if
> reticulate works on 32 bit systems as long as users don't need "torch",
> then just state that.
>
> One thing I'd recommend: you should try to change the dependency from
> Depends to Imports. If there are a few reticulate functions that you
> want your users to have access to, you can import them and re-export
> them so they're available from your package as well.
>
> Duncan

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jw|j||e|@ @end|ng |rom bno@@c@be  Mon May 11 15:19:58 2020
From: jw|j||e|@ @end|ng |rom bno@@c@be (Jan Wijffels)
Date: Mon, 11 May 2020 13:19:58 +0000
Subject: [R-pkg-devel] 
 how to specify to let a package only build 64bit on CRAN
In-Reply-To: <1589202782466.74268@UGent.be>
References: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>
 <7f92f51b-6039-75ff-ad9f-8cca8aef24a1@gmail.com>,
 <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>
 <1589202782466.74268@UGent.be>
Message-ID: <x0ZHtKoxmSChw6I53d7foFg0IUEfZeV-SVbo3dDIy2Wrs_Z_msWX11gsW1JoVPGU7Ga7aEdDgl52BBDvwXnKkYwm7S6Kknvs_hrEGPtXIgM=@bnosac.be>

Gabor/Joris,

Thanks for the suggestions!
I'll try it out and see if it reaches the CRAN servers.

best,
Jan


Jan Wijffels
Statistician
www.bnosac.be? | +32 486 611708

??????? Original Message ???????
On Monday 11 May 2020 15:13, Joris Meys <Joris.Meys at UGent.be> wrote:

> Hi Jan,
>
> To add to the suggestion of Gabor and Duncan, it might be a good idea to add a packageStartupMessage that warns the user about the problem when running on a 32bit system. You can easily extract that info from R.Version()$arch . That might help negotiating with CRAN.
>
> Kind regards
> Joris
>
> Joris Meys
> Statistician
> T +32 9 264 61 79
>
> Department Data Analysis and Mathematical Modelling
>
> Campus Coupure, Block A 1st floor 110.050, Coupure links 653, B-9000 Ghent, Belgium
> T administration office +32 9 264 59 32
>
> www.ugent.be
>
> e-maildisclaimer
>
> From: R-package-devel r-package-devel-bounces at r-project.org on behalf of Jan Wijffels jwijffels at bnosac.be
> Sent: Monday, May 11, 2020 2:46 PM
> To: Duncan Murdoch
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] how to specify to let a package only build 64bit on CRAN
>
> Duncan,
>
> Thanks for the reply. Let me make this more clear.
> The R package reticulate works on 32bit and 64bit. My golgotha package depends on reticulate and an extra Python package called torch which is not available for 32bit platforms. This is specified in the DESCRIPTION file at https://github.com/bnosac/golgotha/blob/master/DESCRIPTION#L17
>
> For that reason R CMD check will fail on CRAN for 32bit. Hence my question. How do I specify this in the package such that I can distribute it on CRAN.
>
> best,
> Jan
>
> Jan Wijffels
> Statistician
> www.bnosac.be | +32 486 611708
>
> ??????? Original Message ???????
> On Monday 11 May 2020 14:39, Duncan Murdoch murdoch.duncan at gmail.com wrote:
>
> > On 11/05/2020 7:54 a.m., Jan Wijffels wrote:
> >
> > > Hello everyone,
> > > I have a package which I would like to host on CRAN. The package is at https://github.com/bnosac/golgotha
> > > The package only builds on 64bit however because the package uses R package reticulate which requires a python library called torch which does not build on 32 bit platforms.
> > > So installation only works using INSTALL_opts = "--no-multiarch"
> > > How do you specify this to the CRAN maintainers that this is the way it should be set up on CRAN such that it only is built for 64bit systems.
> >
> > I don't see how your package has any 32 bit dependence, since it has no
> > src directory. It's probably sufficient to declare the dependency on
> > reticulate, which indirectly implies the 32 bit dependence. But if
> > reticulate works on 32 bit systems as long as users don't need "torch",
> > then just state that.
> > One thing I'd recommend: you should try to change the dependency from
> > Depends to Imports. If there are a few reticulate functions that you
> > want your users to have access to, you can import them and re-export
> > them so they're available from your package as well.
> > Duncan
>
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Mon May 11 15:51:03 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 11 May 2020 08:51:03 -0500
Subject: [R-pkg-devel] 
 how to specify to let a package only build 64bit on CRAN
In-Reply-To: <1589202782466.74268@UGent.be>
References: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>
 <7f92f51b-6039-75ff-ad9f-8cca8aef24a1@gmail.com>
 <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>
 <1589202782466.74268@UGent.be>
Message-ID: <24249.22599.912368.111953@rob.eddelbuettel.com>


On 11 May 2020 at 13:13, Joris Meys wrote:
| To add to the suggestion of Gabor and Duncan, it might be a good idea to add a packageStartupMessage that warns the user about the problem when running on a 32bit system. You can easily extract that info from R.Version()$arch . That might help negotiating with CRAN.

Related: As CRAN does not give you a hook, approximate one yourself in the
package.  I.e. demote reticulate to a mere Suggests:, then in .onAttach()
check a) if it is present and howl if not as well as b) if on 32 bit and say
you're sorry if so. Obviously, a real switch would be better but ... 

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From jw|j||e|@ @end|ng |rom bno@@c@be  Mon May 11 16:46:57 2020
From: jw|j||e|@ @end|ng |rom bno@@c@be (Jan Wijffels)
Date: Mon, 11 May 2020 14:46:57 +0000
Subject: [R-pkg-devel] 
 how to specify to let a package only build 64bit on CRAN
In-Reply-To: <24249.22599.912368.111953@rob.eddelbuettel.com>
References: <MiNFqTNRplB4S5yTMf1AAnG8Ax_1XgRMDxiWZjeHpcsZYz0isEGQLLyn_GViqzLNEHRKwBmX2dbooF0vJFFwYHDruGJoLB7R5XXEdR2rDY8=@bnosac.be>
 <7f92f51b-6039-75ff-ad9f-8cca8aef24a1@gmail.com>
 <JdLKGxxsiFvugpRM0EKLx-wF1ngFdbfpRtjr60gsSWXCp18fBv-Igypv9ShfSiCeZdboMkbC7fURWzsNQSRf4yqw9IfId6WcCz65eQelI6o=@bnosac.be>
 <1589202782466.74268@UGent.be>
 <24249.22599.912368.111953@rob.eddelbuettel.com>
Message-ID: <b_xTx8sTOL3eTYL9smIML44-jUiotW_O4uv-6NNrWS6Lx_nSk_2XmrrswC5XSjMrAL3NQXqe1U9DcQUkdBSPkccxTB6O7yWlyy8IB2EKsdA=@bnosac.be>

Dirk,

Thanks. I'll use this suggestion as well.

have a nice day,
Jan

Jan Wijffels
Statistician
www.bnosac.be? | +32 486 611708

??????? Original Message ???????
On Monday 11 May 2020 15:51, Dirk Eddelbuettel <edd at debian.org> wrote:

>
>
> On 11 May 2020 at 13:13, Joris Meys wrote:
> | To add to the suggestion of Gabor and Duncan, it might be a good idea to add a packageStartupMessage that warns the user about the problem when running on a 32bit system. You can easily extract that info from R.Version()$arch . That might help negotiating with CRAN.
>
> Related: As CRAN does not give you a hook, approximate one yourself in the
> package. I.e. demote reticulate to a mere Suggests:, then in .onAttach()
> check a) if it is present and howl if not as well as b) if on 32 bit and say
> you're sorry if so. Obviously, a real switch would be better but ...
>
> Dirk
>
> -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
>
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From per @end|ng |rom @||p@@@@e  Mon May 11 19:59:05 2020
From: per @end|ng |rom @||p@@@@e (Per Nyfelt)
Date: Mon, 11 May 2020 19:59:05 +0200
Subject: [R-pkg-devel] Assigning values to fields in Reference Classes
Message-ID: <83ab0e83-f641-b912-a69b-ab0841831a2d@alipsa.se>

Hi,

I have been playing with alternative ways to assign values to fields in 
reference classes.

Besides the "standard" <<- there are two other ways that also "seems to 
work". One is using .self$fieldName assigned with <- and the the other 
one is field(fieldName, value).

With regards to the ".self method" (example below): is this a "safe" 
equivalent to <<- i.e. are these two ways identical in result and 
possible "side effects"?

StandardAssignment <- setRefClass(
 ? Class ="StandardAssignment",
 ? fields = list(
 ??? m_attributes = "list"
 ? ),
 ? methods = list(
 ??? setAttribute = function(name, value) {
 ????? m_attributes[[as.character(name)]] <<- as.character(value)
 ????? return(invisible(.self))
 ??? },
 ??? getAttribute = function(name) {
 ????? m_attributes[[name]]
 ??? }
 ? )
)

s1 <- StandardAssignment$new()
s1$setAttribute("name", "foo")
s1$getAttribute("name")

[1] "foo"

SelfAssignment <- setRefClass(
 ? Class ="SelfAssignment",
 ? fields = list(
 ??? m_attributes = "list"
 ? ),
 ? methods = list(
 ??? setAttribute = function(name, value) {
 ????? .self$m_attributes[[as.character(name)]] <- as.character(value)
 ????? return(invisible(.self))
 ??? },
 ??? getAttribute = function(name) {
 ????? m_attributes[[name]]
 ??? }
 ? )
)

s2 <- SelfAssignment$new()
s2$setAttribute("name", "foo")
s2$getAttribute("name")

[1] "foo"


Best regards,

Per


From bgunter@4567 @end|ng |rom gm@||@com  Mon May 11 20:58:31 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 11 May 2020 11:58:31 -0700
Subject: [R-pkg-devel] Assigning values to fields in Reference Classes
In-Reply-To: <83ab0e83-f641-b912-a69b-ab0841831a2d@alipsa.se>
References: <83ab0e83-f641-b912-a69b-ab0841831a2d@alipsa.se>
Message-ID: <CAGxFJbTrw6MaC7B0jLRuMq_PoCckuE3qdzaZHyJiASF=_UKX0g@mail.gmail.com>

What does this have to do with package development? Seems more like a
query for r-help.

Cheers,
Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Mon, May 11, 2020 at 11:27 AM Per Nyfelt <per at alipsa.se> wrote:
>
> Hi,
>
> I have been playing with alternative ways to assign values to fields in
> reference classes.
>
> Besides the "standard" <<- there are two other ways that also "seems to
> work". One is using .self$fieldName assigned with <- and the the other
> one is field(fieldName, value).
>
> With regards to the ".self method" (example below): is this a "safe"
> equivalent to <<- i.e. are these two ways identical in result and
> possible "side effects"?
>
> StandardAssignment <- setRefClass(
>    Class ="StandardAssignment",
>    fields = list(
>      m_attributes = "list"
>    ),
>    methods = list(
>      setAttribute = function(name, value) {
>        m_attributes[[as.character(name)]] <<- as.character(value)
>        return(invisible(.self))
>      },
>      getAttribute = function(name) {
>        m_attributes[[name]]
>      }
>    )
> )
>
> s1 <- StandardAssignment$new()
> s1$setAttribute("name", "foo")
> s1$getAttribute("name")
>
> [1] "foo"
>
> SelfAssignment <- setRefClass(
>    Class ="SelfAssignment",
>    fields = list(
>      m_attributes = "list"
>    ),
>    methods = list(
>      setAttribute = function(name, value) {
>        .self$m_attributes[[as.character(name)]] <- as.character(value)
>        return(invisible(.self))
>      },
>      getAttribute = function(name) {
>        m_attributes[[name]]
>      }
>    )
> )
>
> s2 <- SelfAssignment$new()
> s2$setAttribute("name", "foo")
> s2$getAttribute("name")
>
> [1] "foo"
>
>
> Best regards,
>
> Per
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From per @end|ng |rom @||p@@@@e  Mon May 11 22:37:44 2020
From: per @end|ng |rom @||p@@@@e (Per Nyfelt)
Date: Mon, 11 May 2020 22:37:44 +0200
Subject: [R-pkg-devel] Assigning values to fields in Reference Classes
In-Reply-To: <CAGxFJbTrw6MaC7B0jLRuMq_PoCckuE3qdzaZHyJiASF=_UKX0g@mail.gmail.com>
References: <83ab0e83-f641-b912-a69b-ab0841831a2d@alipsa.se>
 <CAGxFJbTrw6MaC7B0jLRuMq_PoCckuE3qdzaZHyJiASF=_UKX0g@mail.gmail.com>
Message-ID: <2631dee9-d686-b284-1028-1d8187cb40b5@alipsa.se>

I developed a package where reference classes is used a lot. When 
submitting it to CRAN i got the feedback that? i should not use <<- as 
that was "modifying the global environment". That was a misunderstanding 
that was sorted out but before it was, I started to investigate 
alternative ways to assign values to refclass fields. I can it this 
elsewhere since it does not belong.

Thanks,

Per

On 5/11/20 8:58 PM, Bert Gunter wrote:
> What does this have to do with package development? Seems more like a
> query for r-help.
>
> Cheers,
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
> On Mon, May 11, 2020 at 11:27 AM Per Nyfelt <per at alipsa.se> wrote:
>> Hi,
>>
>> I have been playing with alternative ways to assign values to fields in
>> reference classes.
>>
>> Besides the "standard" <<- there are two other ways that also "seems to
>> work". One is using .self$fieldName assigned with <- and the the other
>> one is field(fieldName, value).
>>
>> With regards to the ".self method" (example below): is this a "safe"
>> equivalent to <<- i.e. are these two ways identical in result and
>> possible "side effects"?
>>
>> StandardAssignment <- setRefClass(
>>     Class ="StandardAssignment",
>>     fields = list(
>>       m_attributes = "list"
>>     ),
>>     methods = list(
>>       setAttribute = function(name, value) {
>>         m_attributes[[as.character(name)]] <<- as.character(value)
>>         return(invisible(.self))
>>       },
>>       getAttribute = function(name) {
>>         m_attributes[[name]]
>>       }
>>     )
>> )
>>
>> s1 <- StandardAssignment$new()
>> s1$setAttribute("name", "foo")
>> s1$getAttribute("name")
>>
>> [1] "foo"
>>
>> SelfAssignment <- setRefClass(
>>     Class ="SelfAssignment",
>>     fields = list(
>>       m_attributes = "list"
>>     ),
>>     methods = list(
>>       setAttribute = function(name, value) {
>>         .self$m_attributes[[as.character(name)]] <- as.character(value)
>>         return(invisible(.self))
>>       },
>>       getAttribute = function(name) {
>>         m_attributes[[name]]
>>       }
>>     )
>> )
>>
>> s2 <- SelfAssignment$new()
>> s2$setAttribute("name", "foo")
>> s2$getAttribute("name")
>>
>> [1] "foo"
>>
>>
>> Best regards,
>>
>> Per
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @@pph|rezhou0404 @end|ng |rom gm@||@com  Mon May 11 23:09:06 2020
From: @@pph|rezhou0404 @end|ng |rom gm@||@com (Sapphire Zhou)
Date: Mon, 11 May 2020 16:09:06 -0500
Subject: [R-pkg-devel] A Note about Vignette
Message-ID: <1939C2FF-D16D-421D-BFA4-F866018759E3@gmail.com>

I obtained a note for my R package  from the feedback of CRAN

????????????????????????????
Package has a VignetteBuilder field but no prebuilt vignette index.
????????????????????????????

Actually, there is no vignettes in my package. What is meaning of this note?
How could I fix it?

From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Mon May 11 23:14:27 2020
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Mon, 11 May 2020 21:14:27 +0000
Subject: [R-pkg-devel] A Note about Vignette
In-Reply-To: <1939C2FF-D16D-421D-BFA4-F866018759E3@gmail.com>
References: <1939C2FF-D16D-421D-BFA4-F866018759E3@gmail.com>
Message-ID: <8efb91ec7dbd406a88ce11b633dcdb3b@umanitoba.ca>

Good afternoon,


It probably means that in your DESCRIPTION file, you wrote something like

VignetteBuilder: knitr


If you don't have a vignette, you should remove that line.


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Sapphire Zhou <sapphirezhou0404 at gmail.com>
Sent: May 11, 2020 4:09:06 PM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] A Note about Vignette

********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

I obtained a note for my R package  from the feedback of CRAN

????????????????????????????
Package has a VignetteBuilder field but no prebuilt vignette index.
????????????????????????????

Actually, there is no vignettes in my package. What is meaning of this note?
How could I fix it?
______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon May 11 23:20:28 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 11 May 2020 14:20:28 -0700
Subject: [R-pkg-devel] A Note about Vignette
In-Reply-To: <1939C2FF-D16D-421D-BFA4-F866018759E3@gmail.com>
References: <1939C2FF-D16D-421D-BFA4-F866018759E3@gmail.com>
Message-ID: <CAGxFJbTibLdk-TrLxqjpzu2AQwn2n9LHWHdYmzmxsHUU9f+xkQ@mail.gmail.com>

You really need to read the 'Writing R Extensions" manual, in
particular the section on the DESCRIPTION file. You are asking basic
questions that are covered there.


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Mon, May 11, 2020 at 2:09 PM Sapphire Zhou
<sapphirezhou0404 at gmail.com> wrote:
>
> I obtained a note for my R package  from the feedback of CRAN
>
> ????????????????????????????
> Package has a VignetteBuilder field but no prebuilt vignette index.
> ????????????????????????????
>
> Actually, there is no vignettes in my package. What is meaning of this note?
> How could I fix it?
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m@e||e@@@|mon @end|ng |rom y@hoo@@e  Tue May 12 08:17:04 2020
From: m@e||e@@@|mon @end|ng |rom y@hoo@@e (=?UTF-8?Q?Ma=C3=ABlle_SALMON?=)
Date: Tue, 12 May 2020 06:17:04 +0000 (UTC)
Subject: [R-pkg-devel] Documentation for non-user-level objects
In-Reply-To: <9CEB8C27-F083-45E1-A574-A390202BE994@gmail.com>
References: <9CEB8C27-F083-45E1-A574-A390202BE994@gmail.com>
Message-ID: <1419256810.3366553.1589264224728@mail.yahoo.com>

I see you already got useful answers, but here is a further resource: I wrote a blog post about internal functions earlier this year <https://blog.r-hub.io/2019/12/12/internal-functions/>

Best wishes

Ma?lle.


Den s?ndag 10 maj 2020 23:32:00 CEST, Sapphire Zhou <sapphirezhou0404 at gmail.com> skrev: 





I met a problem when I uploaded the package to CRAN. There is a warning told me 
?All user-level objects in a package should have documentation entries.?

Actually, those functions are not user-level functions. How could I claim non-user-level functions in an R package.
Is there any idea to remove this warning.

Thanks!
______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue May 12 08:55:14 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Tue, 12 May 2020 01:55:14 -0500
Subject: [R-pkg-devel] 
 [BULK] Re: [Rd] "not a valid win32 application" with
 rtools40-x86_65.exe on Windows 10
In-Reply-To: <07330765-1A84-43DE-BC03-D89A05DE35D8@R-project.org>
References: <48910d2a-c3f0-7a2a-b94a-4f7c2cc74a54@prodsyse.com>
 <CABFfbXtKWAuc0y61jV3WDpX52ksPJOzsaY=h+6rmOuMySWHZfw@mail.gmail.com>
 <bcf6e1e7-38f7-595c-63ca-d0106753aefc@prodsyse.com>
 <07330765-1A84-43DE-BC03-D89A05DE35D8@R-project.org>
Message-ID: <47500f33-4650-7040-139d-6831625a122e@effectivedefense.org>

Hi, Simon et al.


[changing to "R-package-devel, because I've heard complaints that this 
may not be appropriate for R-devel.]


 ????? I'm still having problems.? I found that I had Java twice in the 
path and deleted both versions (~\AdoptOpenJDK\jdk-11.0.6.10-hotspot\bin 
and ~Java\jre1.8.0_241). That seemed not to change anything as far as I 
can tell.


 ????? I have both directories for both "~Rtools" and "~rtools40", and 
the path includes "~rtools40\bin".? When running R4.0.0 within RStudio, 
"install.package('rJava', type='source', INSTALL_opts = 
'--merge-multiarch') complained, "WARNING:? Rtools is required ... but 
no version compatible ... was found.? Note that the following 
incompatible versions(s) ... were found:? - Rtools 3.5".? When I run r 
in a CMD prompt, I don't get that warning.? However, both complain,


 ????? warning in system("sh ./configure.win") : 'sh' not found


 ????? When I tried "install.packages('rJava')", it seemed to work OK 
(though I still got the complaint from R within RStudio that it could 
not find rtools40).


 ????? And my primary problem is unchanged:? "R CMD check 
Ecfun_0.2-4.tar.gz" ends with the following:


Error:? package or namespace load failed for 'Ecfun':
 ? .onLoad failed in loadNamespace() for 'rJava', details
 ?? call: inDL(x, as.logical(local), as.logical(now), ...)
 ?? error:? unable to load shared object 'c:/Program
Files/R/R-4.0.0/library/rJava/libs/i386/rJava.dll':
 ?? LoadLibrary failure: ^1 is not a valid win32 application


 ????? The same package on my Mac quits with a LaTeX error I have yet to 
figure out how to fix.


 ????? Suggestions?
 ????? Thanks,
 ????? Spencer Graves


00install.out:


* installing *source* package 'Ecfun' ...
** using staged installation
** R
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** installing vignettes
** testing if installed package can be loaded from temporary location
*** arch - i386
Error: package or namespace load failed for 'Ecfun':
 ?.onLoad failed in loadNamespace() for 'rJava', details:
 ? call: inDL(x, as.logical(local), as.logical(now), ...)
 ? error: unable to load shared object 'C:/Program 
Files/R/R-4.0.0/library/rJava/libs/i386/rJava.dll':
 ? LoadLibrary failure:? %1 is not a valid Win32 application.

Error: loading failed
Execution halted
*** arch - x64
ERROR: loading failed for 'i386'
* removing 'C:/Users/spenc/Documents/R/Ecfun/Ecfun.Rcheck/Ecfun'


On 2020-05-02 02:20, Simon Urbanek wrote:
> Spencer,
>
> you shouldn't have anything on the PATH, the location of Java is taken from the registry so you only need t have a valid installation of Java. Better don't set PATH or JAVA_HOME as it will stop rJava from working if you get it wrong. The errors on Windows are confusing, the actual error is shown via GUI as pop-up, what they report in the console is not the real error.
>
> Re installation from source - it sooks like you either don't have Rtools40 or you didn't set PATH properly. If I recall the new Rtools40 no longer set the PATH (for whatever reason) so you have to do it by hand and the instructions it gives you are not working for the command shell.
>
> Cheers,
> Simon
>
>
>
>> On 1/05/2020, at 4:51 PM, Spencer Graves <spencer.graves at prodsyse.com> wrote:
>>
>> Hi, Jeroen et al.:
>>
>>
>> On 2020-04-30 03:15, Jeroen Ooms wrote:
>>> On Thu, Apr 30, 2020 at 6:38 AM Spencer Graves
>>> <spencer.graves at prodsyse.com> wrote:
>>>> Hello, All:
>>>>
>>>>
>>>>         "00install.out" from "R CMD check Ecfun_0.2-4.tar.gz" includes:
>>>>
>>>>
>>>> Error:  package or namespace load failed for 'Ecfun':
>>>>    .onLoad failed in loadNamespace() for 'rJava', details
>>>>     call: inDL(x, as.logical(local), as.logical(now), ...)
>>>>     error:  unable to load shared object 'c:/Program
>>>> Files/R/R-4.0.0/library/rJava/libs/i386/rJava.dll':
>>>>     LoadLibrary failure: ^1 is not a valid win32 application
>>>>
>>> This is an error in loading the rJava package, so it is not related to
>>> rtools40, and probably inappropriate for this mailing list.
>>>
>>> As Simon suggested, you may have to install the 32-bit Java JDK. See
>>> also this faq: https://github.com/r-windows/docs/blob/master/faq.md#how-to-install-rjava-on-windows
>>
>>        In fact I had both 32- and 64-bit Java installed but only the 64-bit was in the path.  I added the 32-bit, but that did not fix the problem.  The last 2.5 lines in the section "How to install rJava on Windows?" to which you referred me reads:
>>
>>
>> to build rJava from source, you need the --merge-multiarch flag:
>>
>> install.packages('rJava', type = 'source', INSTALL_opts='--merge-multiarch')
>>
>>
>>        When I tried that, I got:
>>
>>
>> Warning in system("sh ./configure.win") : 'sh' not found
>>
>>
>> *** ON THE OTHER HAND:  The error message above says 'c:/Program
>> Files/R/R-4.0.0/library/rJava/libs/i386/rJava.dll':
>>     LoadLibrary failure: ^1 is not a valid win32 application
>>
>>
>>>>>> Is "rJava.dll" a valid win32 application?
>>
>>        Suggestions?
>>        Thanks,
>>        Spencer Graves
>>
>>
>> p.s.  A similar problem with rJava a month ago was fixed by installed 64-bit Java.  Now with the upgrade to R 4.0.0 and rtools40, this no longer works.
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>


From jeroenoom@ @end|ng |rom gm@||@com  Tue May 12 09:38:55 2020
From: jeroenoom@ @end|ng |rom gm@||@com (Jeroen Ooms)
Date: Tue, 12 May 2020 09:38:55 +0200
Subject: [R-pkg-devel] Is there an Rtools40 changelog?
In-Reply-To: <CADPubGRsQFfm6gXRttFi-xq3VaAVkxTDGLxWUMMFbz+-e1TQ+w@mail.gmail.com>
References: <CADPubGRsQFfm6gXRttFi-xq3VaAVkxTDGLxWUMMFbz+-e1TQ+w@mail.gmail.com>
Message-ID: <CABFfbXttj3zCfnh5kk9Uw2A3nvewpvp6GdSHGR-CFusUsR1pGA@mail.gmail.com>

On Sun, May 10, 2020 at 11:31 PM James Lamb <jaylamb20 at gmail.com> wrote:
>
> Hello,
>
> I am a maintainer on the LightGBM project, focused on that project's R
> package. The R package is not available on CRAN yet (we are working on it),
> so for now our users must build it from source.
>
> The package includes compilation of a C++ library, and we link to R.dll /
> R.so to use R-provided functions like Rprintf.
>
> With the release of R4.0 and Rtools40, we recently received reports from
> our users that they are unable to build our package on Windows systems with
> R 4.0 and Rtools 4.0 (https://github.com/microsoft/LightGBM/issues/3064).
>
> After some investigation, I've learned that the following changes in
> Rtools40 (relative to Rtools35) broke our installation process:
>
>    - *gendef.exe* was removed
>    - *mingw32-make.exe* was removed
>    - paths like "mingw_64/bin" were changed to "mingw64/bin"
>

Some utilities that were previously bundled with all rtools
installations can now be installed with the package manager.

To install gendef use:

     pacman -S mingw-w64-{i686,x86_64}-tools

To install mingw32-make.exe use:

      pacman -S mingw-w64-{i686,x86_64}-make

To install both of the at once you can use:

      pacman -S mingw-w64-{i686,x86_64}-{tools,make}

Note that it's often better to use 'make.exe' which is included with
all rtools installations instead of mingw32-make.exe.

These changes were a result of switching to an msys2 based toolchain.
The default rtools40 installer only includes the things needed to
build CRAN packages or base-R. Extra stuff such as system libraries,
debuggers, cmake, etc, are all optionally available via the package
manager.


From m@e||e@@@|mon @end|ng |rom y@hoo@@e  Tue May 12 10:01:07 2020
From: m@e||e@@@|mon @end|ng |rom y@hoo@@e (=?UTF-8?Q?Ma=C3=ABlle_SALMON?=)
Date: Tue, 12 May 2020 08:01:07 +0000 (UTC)
Subject: [R-pkg-devel] CensSpatial package error.
In-Reply-To: <445b71e3-86d6-49a9-9b55-ac3940d3daa5@email.android.com>
References: <CAC7JchBhET3EPdU8unDB_onvtmOQwVFwzD9aaG7GMODvBDkdrg@mail.gmail.com>
 <445b71e3-86d6-49a9-9b55-ac3940d3daa5@email.android.com>
Message-ID: <784735587.3457870.1589270467709@mail.yahoo.com>

I just wanted to add that <https://developer.r-project.org/Blog/public/2019/11/09/when-you-think-class.-think-again/index.html> is an interesting read on the topic. :-)



Den l?rdag 2 maj 2020 18:27:29 CEST, Max Turgeon <max.turgeon at umanitoba.ca> skrev: 





Hi Jos?,

The error message is pretty clear:

Error in if (class(V.inv) == "try-error") return(Inf) :
? the condition has length > 1

Instead of testing for equality of the class, you should use the function "inherits". Then, even if "class(V.inv)" has length greater than one, your condition in the if clause will be exactly TRUE or FALSE.

Best,

Max Turgeon

On May 2, 2020 10:07 AM, Jos? Alejandro Ordo?ez <ordonezjosealejandro at gmail.com> wrote:
********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

Good evening,

My name is Jose and I'm the mantainer of the CensSpatial package. This
package was available as public but it was discharged because a problem
with the geoR orphan package.
That situation was solved and now I'm trying to resubmit the package. The
problem is that when I try to submit it, it does not pass the automatic
incoming checks,* even when I tested it using the function check available
in R studio without errors.*
Apparently is a problem with the OS Linux and Debian but I couldn't
identify it yet. I also tested it using the package rhub and ran
CensSpatial with different OS without results.

I'm provinding below the link to the source package and the error messages,
hoping to get some help from you.

https://www.dropbox.com/sh/gp5iwubkgbv9r8s/AADvJg-GGHKzoMU_PHNWdcYea?dl=0
<https://www.dropbox.com/sh/gp5iwubkgbv9r8s/AADvJg-GGHKzoMU_PHNWdcYea?dl=0&fbclid=IwAR1xeC1ArV-7IGBhatSil7u_aCjZbFoj3BDc_TD2fVq_pwGl5sdH8vgVuKQ>


In the link below, I cannot recognize what the error is. SOS!

https://win-builder.r-project.org/incoming_pretest/CensSpatial_2.5_20200428_224633/Debian/00check.log
<https://win-builder.r-project.org/incoming_pretest/CensSpatial_2.5_20200428_224633/Debian/00check.log?fbclid=IwAR2vaWkuHuyURbZH1WrUREFpmy4uO_XbXQd6leglq4CPPnn8HZgggm-1xMs>


Thanks for the attention.


Att,
Jos? Alejandro Ordo?ez.
Ph.D Student
UNICAMP.


<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
Libre
de virus. www.avast.com<http://www.avast.com>
<https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
<#m_2258293037509368237_DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>

? ? ? ? [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


??? [[alternative HTML version deleted]]
______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m@e||e@@@|mon @end|ng |rom y@hoo@@e  Tue May 12 10:24:20 2020
From: m@e||e@@@|mon @end|ng |rom y@hoo@@e (=?UTF-8?Q?Ma=C3=ABlle_SALMON?=)
Date: Tue, 12 May 2020 08:24:20 +0000 (UTC)
Subject: [R-pkg-devel] Documenting raw data
In-Reply-To: <20200423210616.1455027CD@hypatia.math.ethz.ch>
References: <20200423210616.1455027CD@hypatia.math.ethz.ch>
Message-ID: <156121078.3485788.1589271860807@mail.yahoo.com>

Hello,

I don't think you have to (and shouldn't?) document raw data. However, you can use it in examples/tests/etc. using the system.file() command you mention.

But maybe you want to export the data? In that case it should be under data/.

This chapter of the R packages book might be useful <https://r-pkgs.org/data.html> (as well as <https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Data-in-packages>).

Ma?lle.


Den torsdag 23 april 2020 23:06:26 CEST, Cantin, Alan (NRCan/RNCan) <alan.cantin at canada.ca> skrev: 





Hi Folks,

Looking for some help documenting my raw data (data in inst/extdata).

Is the correct doctype "data"?

The usage of loading this type of data is system.file("extdata", nameoffile, package="nameofpackage")

Is this the correct string to put in the \usage section?? I have tried this, but get errors such as:

Functions or methods with usage in documentation object 'nameoffile' but not in code:
? ? 'system.file'


Has anyone done this recently and have an example to see where I'm going wrong?

This check seems to be new as in the past I simply had lazydata set to true and it passed tests.

Thanks for any help.

Cheers,

Alan Cantin



??? [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @|@n@c@nt|n @end|ng |rom c@n@d@@c@  Tue May 12 14:43:22 2020
From: @|@n@c@nt|n @end|ng |rom c@n@d@@c@ (Cantin, Alan (NRCan/RNCan))
Date: Tue, 12 May 2020 12:43:22 +0000
Subject: [R-pkg-devel] Documenting raw data
In-Reply-To: <156121078.3485788.1589271860807@mail.yahoo.com>
References: <20200423210616.1455027CD@hypatia.math.ethz.ch>,
 <156121078.3485788.1589271860807@mail.yahoo.com>
Message-ID: <2832563f02cc45e2946594133baa7bf6@PELEPCDEXC027.birch.int.bell.ca>

Hello,

Yes thanks, I was able to figure out that I can (and should) remove documentation for these files. This solved my issue and thank you for taking the time to respond.

Cheers,


Alan Cantin



-------- Original message --------
From: Ma?lle SALMON <maelle.salmon at yahoo.se>
Date: 2020-05-12 4:24 a.m. (GMT-05:00)
To: r-package-devel at r-project.org, "Cantin, Alan (NRCan/RNCan)" <alan.cantin at canada.ca>
Subject: Re: [R-pkg-devel] Documenting raw data

Hello,

I don't think you have to (and shouldn't?) document raw data. However, you can use it in examples/tests/etc. using the system.file() command you mention.

But maybe you want to export the data? In that case it should be under data/.

This chapter of the R packages book might be useful <https://r-pkgs.org/data.html> (as well as <https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Data-in-packages>).

Ma?lle.


Den torsdag 23 april 2020 23:06:26 CEST, Cantin, Alan (NRCan/RNCan) <alan.cantin at canada.ca> skrev:





Hi Folks,

Looking for some help documenting my raw data (data in inst/extdata).

Is the correct doctype "data"?

The usage of loading this type of data is system.file("extdata", nameoffile, package="nameofpackage")

Is this the correct string to put in the \usage section?  I have tried this, but get errors such as:

Functions or methods with usage in documentation object 'nameoffile' but not in code:
    'system.file'


Has anyone done this recently and have an example to see where I'm going wrong?

This check seems to be new as in the past I simply had lazydata set to true and it passed tests.

Thanks for any help.

Cheers,

Alan Cantin



    [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue May 12 15:38:19 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 12 May 2020 15:38:19 +0200
Subject: [R-pkg-devel] 
 [BULK] Re: [Rd] "not a valid win32 application" with
 rtools40-x86_65.exe on Windows 10
In-Reply-To: <47500f33-4650-7040-139d-6831625a122e@effectivedefense.org>
References: <48910d2a-c3f0-7a2a-b94a-4f7c2cc74a54@prodsyse.com>
 <CABFfbXtKWAuc0y61jV3WDpX52ksPJOzsaY=h+6rmOuMySWHZfw@mail.gmail.com>
 <bcf6e1e7-38f7-595c-63ca-d0106753aefc@prodsyse.com>
 <07330765-1A84-43DE-BC03-D89A05DE35D8@R-project.org>
 <47500f33-4650-7040-139d-6831625a122e@effectivedefense.org>
Message-ID: <3ba7ec5e-25b7-7fde-d148-dea8e15ee906@statistik.tu-dortmund.de>

Spencer, I guess you have 64 bit components on the path before the new 
toolchain is found.

Also  check at first if you can load rJava both under 32-bit RGui and 
64-bit RGui.

If this does not help: Can you send me privately the full output (i.e. 
including check.log and also install.out file)?

Best,
Uwe






On 12.05.2020 08:55, Spencer Graves wrote:
> Hi, Simon et al.
> 
> 
> [changing to "R-package-devel, because I've heard complaints that this 
> may not be appropriate for R-devel.]
> 
> 
>  ????? I'm still having problems.? I found that I had Java twice in the 
> path and deleted both versions (~\AdoptOpenJDK\jdk-11.0.6.10-hotspot\bin 
> and ~Java\jre1.8.0_241). That seemed not to change anything as far as I 
> can tell.
> 
> 
>  ????? I have both directories for both "~Rtools" and "~rtools40", and 
> the path includes "~rtools40\bin".? When running R4.0.0 within RStudio, 
> "install.package('rJava', type='source', INSTALL_opts = 
> '--merge-multiarch') complained, "WARNING:? Rtools is required ... but 
> no version compatible ... was found.? Note that the following 
> incompatible versions(s) ... were found:? - Rtools 3.5".? When I run r 
> in a CMD prompt, I don't get that warning.? However, both complain,
> 
> 
>  ????? warning in system("sh ./configure.win") : 'sh' not found
> 
> 
>  ????? When I tried "install.packages('rJava')", it seemed to work OK 
> (though I still got the complaint from R within RStudio that it could 
> not find rtools40).
> 
> 
>  ????? And my primary problem is unchanged:? "R CMD check 
> Ecfun_0.2-4.tar.gz" ends with the following:
> 
> 
> Error:? package or namespace load failed for 'Ecfun':
>  ? .onLoad failed in loadNamespace() for 'rJava', details
>  ?? call: inDL(x, as.logical(local), as.logical(now), ...)
>  ?? error:? unable to load shared object 'c:/Program
> Files/R/R-4.0.0/library/rJava/libs/i386/rJava.dll':
>  ?? LoadLibrary failure: ^1 is not a valid win32 application
> 
> 
>  ????? The same package on my Mac quits with a LaTeX error I have yet to 
> figure out how to fix.
> 
> 
>  ????? Suggestions?
>  ????? Thanks,
>  ????? Spencer Graves
> 
> 
> 00install.out:
> 
> 
> * installing *source* package 'Ecfun' ...
> ** using staged installation
> ** R
> ** inst
> ** byte-compile and prepare package for lazy loading
> ** help
> *** installing help indices
> ** building package indices
> ** installing vignettes
> ** testing if installed package can be loaded from temporary location
> *** arch - i386
> Error: package or namespace load failed for 'Ecfun':
>  ?.onLoad failed in loadNamespace() for 'rJava', details:
>  ? call: inDL(x, as.logical(local), as.logical(now), ...)
>  ? error: unable to load shared object 'C:/Program 
> Files/R/R-4.0.0/library/rJava/libs/i386/rJava.dll':
>  ? LoadLibrary failure:? %1 is not a valid Win32 application.
> 
> Error: loading failed
> Execution halted
> *** arch - x64
> ERROR: loading failed for 'i386'
> * removing 'C:/Users/spenc/Documents/R/Ecfun/Ecfun.Rcheck/Ecfun'
> 
> 
> On 2020-05-02 02:20, Simon Urbanek wrote:
>> Spencer,
>>
>> you shouldn't have anything on the PATH, the location of Java is taken 
>> from the registry so you only need t have a valid installation of 
>> Java. Better don't set PATH or JAVA_HOME as it will stop rJava from 
>> working if you get it wrong. The errors on Windows are confusing, the 
>> actual error is shown via GUI as pop-up, what they report in the 
>> console is not the real error.
>>
>> Re installation from source - it sooks like you either don't have 
>> Rtools40 or you didn't set PATH properly. If I recall the new Rtools40 
>> no longer set the PATH (for whatever reason) so you have to do it by 
>> hand and the instructions it gives you are not working for the command 
>> shell.
>>
>> Cheers,
>> Simon
>>
>>
>>
>>> On 1/05/2020, at 4:51 PM, Spencer Graves 
>>> <spencer.graves at prodsyse.com> wrote:
>>>
>>> Hi, Jeroen et al.:
>>>
>>>
>>> On 2020-04-30 03:15, Jeroen Ooms wrote:
>>>> On Thu, Apr 30, 2020 at 6:38 AM Spencer Graves
>>>> <spencer.graves at prodsyse.com> wrote:
>>>>> Hello, All:
>>>>>
>>>>>
>>>>> ??????? "00install.out" from "R CMD check Ecfun_0.2-4.tar.gz" 
>>>>> includes:
>>>>>
>>>>>
>>>>> Error:? package or namespace load failed for 'Ecfun':
>>>>> ?? .onLoad failed in loadNamespace() for 'rJava', details
>>>>> ??? call: inDL(x, as.logical(local), as.logical(now), ...)
>>>>> ??? error:? unable to load shared object 'c:/Program
>>>>> Files/R/R-4.0.0/library/rJava/libs/i386/rJava.dll':
>>>>> ??? LoadLibrary failure: ^1 is not a valid win32 application
>>>>>
>>>> This is an error in loading the rJava package, so it is not related to
>>>> rtools40, and probably inappropriate for this mailing list.
>>>>
>>>> As Simon suggested, you may have to install the 32-bit Java JDK. See
>>>> also this faq: 
>>>> https://github.com/r-windows/docs/blob/master/faq.md#how-to-install-rjava-on-windows 
>>>>
>>>
>>> ?????? In fact I had both 32- and 64-bit Java installed but only the 
>>> 64-bit was in the path.? I added the 32-bit, but that did not fix the 
>>> problem.? The last 2.5 lines in the section "How to install rJava on 
>>> Windows?" to which you referred me reads:
>>>
>>>
>>> to build rJava from source, you need the --merge-multiarch flag:
>>>
>>> install.packages('rJava', type = 'source', 
>>> INSTALL_opts='--merge-multiarch')
>>>
>>>
>>> ?????? When I tried that, I got:
>>>
>>>
>>> Warning in system("sh ./configure.win") : 'sh' not found
>>>
>>>
>>> *** ON THE OTHER HAND:? The error message above says 'c:/Program
>>> Files/R/R-4.0.0/library/rJava/libs/i386/rJava.dll':
>>> ??? LoadLibrary failure: ^1 is not a valid win32 application
>>>
>>>
>>>>>>> Is "rJava.dll" a valid win32 application?
>>>
>>> ?????? Suggestions?
>>> ?????? Thanks,
>>> ?????? Spencer Graves
>>>
>>>
>>> p.s.? A similar problem with rJava a month ago was fixed by installed 
>>> 64-bit Java.? Now with the upgrade to R 4.0.0 and rtools40, this no 
>>> longer works.
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From p@c|orek @end|ng |rom @t@t@berke|ey@edu  Wed May 13 03:00:42 2020
From: p@c|orek @end|ng |rom @t@t@berke|ey@edu (Chris Paciorek)
Date: Tue, 12 May 2020 18:00:42 -0700
Subject: [R-pkg-devel] clang11 CRAN check and use of Eigen
Message-ID: <CAG=M9LpvRWJA3=0mDyFbQw5TNAjcE5=RDAZnk4L2YTw9WxrbGw@mail.gmail.com>

As of some point recently (at least since January) our package
(nimble) is being flagged by CRAN's clang11 check. The check reports
various errors when compiling one of our C++ files that makes use of
code from the Eigen C++ package, which we include with our package.
Here's the report from CRAN:
https://www.stats.ox.ac.uk/pub/bdr/clang11/nimble.log

Similar errors are occurring for a few other packages on CRAN (some
that directly include Eigen and others that do so via RcppEigen).

1) Does anyone happen to know why this problem with Eigen is occurring
with clang11?

2) Given clang11 is not yet released, perhaps CRAN is simply flagging
this for the future. I'm hoping we can still release our next version
without addressing this, and I see that some of the other packages
this affects have released recently (e.g., prophet) seemingly without
addressing the issue. Does anyone know CRAN's policy in this regard?

thanks,
-Chris

Adjunct Professor, Statistical Computing Consultant
Department of Statistics
UC Berkeley


From @teve@the@b@ye@|@n @end|ng |rom gm@||@com  Wed May 13 04:53:09 2020
From: @teve@the@b@ye@|@n @end|ng |rom gm@||@com (Steven Scott)
Date: Tue, 12 May 2020 19:53:09 -0700
Subject: [R-pkg-devel] clang11 CRAN check and use of Eigen
In-Reply-To: <CAG=M9LpvRWJA3=0mDyFbQw5TNAjcE5=RDAZnk4L2YTw9WxrbGw@mail.gmail.com>
References: <CAG=M9LpvRWJA3=0mDyFbQw5TNAjcE5=RDAZnk4L2YTw9WxrbGw@mail.gmail.com>
Message-ID: <CAJqTW47n=fVsuwevgfD-d0=xCrU+u9UmeeUDaDWcXw57U_MGmw@mail.gmail.com>

The errors are all around std::ostream.  My guess is that Eigen is missing
an #include.  The missing include was probably included transitively in
earlier versions of clang, but clang11 cleaned up some files that didn't
need that include themselves, and the downstream file got broken as a
result.

On Tue, May 12, 2020 at 6:51 PM Chris Paciorek <paciorek at stat.berkeley.edu>
wrote:

> As of some point recently (at least since January) our package
> (nimble) is being flagged by CRAN's clang11 check. The check reports
> various errors when compiling one of our C++ files that makes use of
> code from the Eigen C++ package, which we include with our package.
> Here's the report from CRAN:
> https://www.stats.ox.ac.uk/pub/bdr/clang11/nimble.log
>
> Similar errors are occurring for a few other packages on CRAN (some
> that directly include Eigen and others that do so via RcppEigen).
>
> 1) Does anyone happen to know why this problem with Eigen is occurring
> with clang11?
>
> 2) Given clang11 is not yet released, perhaps CRAN is simply flagging
> this for the future. I'm hoping we can still release our next version
> without addressing this, and I see that some of the other packages
> this affects have released recently (e.g., prophet) seemingly without
> addressing the issue. Does anyone know CRAN's policy in this regard?
>
> thanks,
> -Chris
>
> Adjunct Professor, Statistical Computing Consultant
> Department of Statistics
> UC Berkeley
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From t|@goo||voto @end|ng |rom gm@||@com  Wed May 13 08:55:02 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Wed, 13 May 2020 03:55:02 -0300
Subject: [R-pkg-devel] MathJax for Rd files
Message-ID: <000001d628f3$6eccfc60$4c66f520$@gmail.com>

Dear all,

I'm not sure if this is the correct place to make this question, but here I
am.

I'm trying to use MathJax for html help files in my package metan
(https://cran.r-project.org/package=metan)

I have success with the following approach:

 

Including the following call

 

#'\if{html}{\out{

#'<script id="MathJax-script" async

#'src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-full.js">

#'  </script>

#'}} 

 

And then typing the equations I need. A simple example bellow

 

#' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}

 

Is there any way to put "tex-chtml-full.js" locally so that everyone that
has my package installed see the equations rendered properly even offline?

Thanks in advance

Olivoto

 


	[[alternative HTML version deleted]]


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Wed May 13 09:39:51 2020
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (SP))
Date: Wed, 13 May 2020 07:39:51 +0000
Subject: [R-pkg-devel] MathJax for Rd files
In-Reply-To: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
Message-ID: <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>

Dear Olivoto,

There is a package now for this purpose:

https://cran.r-project.org/package=mathjaxr
https://github.com/wviechtb/mathjaxr

Best,
Wolfgang

>-----Original Message-----
>From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On
>Behalf Of Tiago Olivoto
>Sent: Wednesday, 13 May, 2020 8:55
>To: r-package-devel at r-project.org
>Subject: [R-pkg-devel] MathJax for Rd files
>
>Dear all,
>
>I'm not sure if this is the correct place to make this question, but here I
>am.
>
>I'm trying to use MathJax for html help files in my package metan
>(https://cran.r-project.org/package=metan)
>
>I have success with the following approach:
>
>Including the following call
>
>#'\if{html}{\out{
>
>#'<script id="MathJax-script" async
>
>#'src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-full.js">
>
>#'  </script>
>
>#'}}
>
>And then typing the equations I need. A simple example bellow
>
>#' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}
>
>Is there any way to put "tex-chtml-full.js" locally so that everyone that
>has my package installed see the equations rendered properly even offline?
>
>Thanks in advance
>
>Olivoto


From edd @end|ng |rom deb|@n@org  Wed May 13 14:33:08 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 13 May 2020 07:33:08 -0500
Subject: [R-pkg-devel] clang11 CRAN check and use of Eigen
In-Reply-To: <CAG=M9LpvRWJA3=0mDyFbQw5TNAjcE5=RDAZnk4L2YTw9WxrbGw@mail.gmail.com>
References: <CAG=M9LpvRWJA3=0mDyFbQw5TNAjcE5=RDAZnk4L2YTw9WxrbGw@mail.gmail.com>
Message-ID: <24251.59652.899923.918772@rob.eddelbuettel.com>


Hi Chris,

On 12 May 2020 at 18:00, Chris Paciorek wrote:
| 1) Does anyone happen to know why this problem with Eigen is occurring
| with clang11?

Compilers change. Languages changes. Requirements change.

Many of us have been there (e.g. witness the "excitement" about gcc-10 last
December enforcing C level extern to be defined only once forcing a lot of
packages to have to make changes -- i.e. happens with C code too).
 
| 2) Given clang11 is not yet released, perhaps CRAN is simply flagging
| this for the future. I'm hoping we can still release our next version
| without addressing this, and I see that some of the other packages

I doubt it. CRAN, and one tireless operator in particular, are relentless in
chasing upcoming changes _early_ to give you time.

That, one comes to realize after a while, really is a feature.

The nag emails are painful each time, but this is one of the many small
technical details CRAN has gotten right, enforces, and thus ensures quality.

| this affects have released recently (e.g., prophet) seemingly without
| addressing the issue. Does anyone know CRAN's policy in this regard?

Yes. They will likely ask you to update your code "or else".

[ Now, with large (external) code bases this is also royal PITA. I happen to be
the maintainer of BH and RcppEigen, and both can create an unbelievable long
and annoying list of compiler warnings. If it were up to me, I'd suppress
them.  But my opinion doesn't matter, so the warning are there. ]

CRAN built the sandbox. A nice one, actually. And they still extend it.  We
just get to play in it.

So in short I would try to adjust the package.

Cheers,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From t|@goo||voto @end|ng |rom gm@||@com  Wed May 13 16:19:39 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Wed, 13 May 2020 11:19:39 -0300
Subject: [R-pkg-devel] RES:  MathJax for Rd files
In-Reply-To: <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
Message-ID: <001001d62931$8b703010$a2509030$@gmail.com>

Dear Wolfgang,
Thank you so much for the awesome package
I've installed mathjaxr and it worked.
I have some more questions, with a short example bellow
I created an equation in my mgidi.R file as follows

#' \loadmathjax
#' \mjsdeqn{MGIDI_i = \sum\limits_{j = 1}^f}

And then I ran devtools::document()
The mgidi.Rd contains

\loadmathjax
\mjsdeqn{MGIDI_i = \sum\limits_{j = 1}^f}

But when I try to preview the current document as HTML, the equation is not
rendered and the help page shows
\loadmathjax \mjsdeqnMGIDI_i = \sum\limits_j = 1^f
The equation is only rendered after I install my package locally with
devtools::install(). Is this an expected behavior?

Another question is regarding more complex formulae.
I tried using
#' \loadmathjax
#' \mjsdeqn{MGID{I_i} = {\left[ {\sum\limits_{j = 1}^f {{{\left( {{F_{ij}} -
{F_j}} \right)}^2}} } \right]^{0.5}}}

Even after installing the package locally the equation is not rendered in
the html help page, which shows the tex command. 
I tested the same equation with https://www.mathjax.org/#demo and it seems
to be ok.
Have I missed anything or used any code not supported by mathjaxr?
Thanks in advance
Olivoto

-----Mensagem original-----
De: Viechtbauer, Wolfgang (SP)
<wolfgang.viechtbauer at maastrichtuniversity.nl> 
Enviada em: quarta-feira, 13 de maio de 2020 04:40
Para: tiagoolivoto at gmail.com; r-package-devel at r-project.org
Assunto: RE: [R-pkg-devel] MathJax for Rd files

Dear Olivoto,

There is a package now for this purpose:

https://cran.r-project.org/package=mathjaxr
https://github.com/wviechtb/mathjaxr

Best,
Wolfgang

>-----Original Message-----
>From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On 
>Behalf Of Tiago Olivoto
>Sent: Wednesday, 13 May, 2020 8:55
>To: r-package-devel at r-project.org
>Subject: [R-pkg-devel] MathJax for Rd files
>
>Dear all,
>
>I'm not sure if this is the correct place to make this question, but 
>here I am.
>
>I'm trying to use MathJax for html help files in my package metan
>(https://cran.r-project.org/package=metan)
>
>I have success with the following approach:
>
>Including the following call
>
>#'\if{html}{\out{
>
>#'<script id="MathJax-script" async
>
>#'src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-full.js
>">
>
>#'  </script>
>
>#'}}
>
>And then typing the equations I need. A simple example bellow
>
>#' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}
>
>Is there any way to put "tex-chtml-full.js" locally so that everyone 
>that has my package installed see the equations rendered properly even
offline?
>
>Thanks in advance
>
>Olivoto


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Wed May 13 16:53:42 2020
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (SP))
Date: Wed, 13 May 2020 14:53:42 +0000
Subject: [R-pkg-devel] MathJax for Rd files
In-Reply-To: <001001d62931$8b703010$a2509030$@gmail.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
Message-ID: <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>

Seems like you are using roxygen2. I have little experience with that, as all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).

But what specifically do you mean by "when I try to preview the current document as HTML"? Is this some particular functionality of roxygen2 / devtools / RStudio? Or do you simply mean using tools::Rd2HTML()? Then you will have to use permissive=TRUE so that the macros from mathjaxr (which will not be recognized by default by parse_Rd()) are just passed through as text. Or you could try adjusting the 'macros' argument, maybe in combination with loadPkgRdMacros(), to specify that the mathjaxr macros should be loaded. See help(Rd2HTML, package="tools") and help(parse_Rd, package="tools") for details.

But if I want to see the HTML help file, I just install and load the package and call up the help file on some function. That works for sure.

As for the more complex equation - it includes a lot of curly braces. See the note I added recently to the 'devel' version about this:

https://github.com/wviechtb/mathjaxr#issues

Best,
Wolfgang

>-----Original Message-----
>From: Tiago Olivoto [mailto:tiagoolivoto at gmail.com]
>Sent: Wednesday, 13 May, 2020 16:20
>To: Viechtbauer, Wolfgang (SP); r-package-devel at r-project.org
>Subject: RES: [R-pkg-devel] MathJax for Rd files
>
>Dear Wolfgang,
>Thank you so much for the awesome package
>I've installed mathjaxr and it worked.
>I have some more questions, with a short example bellow
>I created an equation in my mgidi.R file as follows
>
>#' \loadmathjax
>#' \mjsdeqn{MGIDI_i = \sum\limits_{j = 1}^f}
>
>And then I ran devtools::document()
>The mgidi.Rd contains
>
>\loadmathjax
>\mjsdeqn{MGIDI_i = \sum\limits_{j = 1}^f}
>
>But when I try to preview the current document as HTML, the equation is not
>rendered and the help page shows
>\loadmathjax \mjsdeqnMGIDI_i = \sum\limits_j = 1^f
>The equation is only rendered after I install my package locally with
>devtools::install(). Is this an expected behavior?
>
>Another question is regarding more complex formulae.
>I tried using
>#' \loadmathjax
>#' \mjsdeqn{MGID{I_i} = {\left[ {\sum\limits_{j = 1}^f {{{\left( {{F_{ij}} -
>{F_j}} \right)}^2}} } \right]^{0.5}}}
>
>Even after installing the package locally the equation is not rendered in
>the html help page, which shows the tex command.
>I tested the same equation with https://www.mathjax.org/#demo and it seems
>to be ok.
>Have I missed anything or used any code not supported by mathjaxr?
>Thanks in advance
>Olivoto
>
>-----Mensagem original-----
>De: Viechtbauer, Wolfgang (SP)
><wolfgang.viechtbauer at maastrichtuniversity.nl>
>Enviada em: quarta-feira, 13 de maio de 2020 04:40
>Para: tiagoolivoto at gmail.com; r-package-devel at r-project.org
>Assunto: RE: [R-pkg-devel] MathJax for Rd files
>
>Dear Olivoto,
>
>There is a package now for this purpose:
>
>https://cran.r-project.org/package=mathjaxr
>https://github.com/wviechtb/mathjaxr
>
>Best,
>Wolfgang
>
>>-----Original Message-----
>>From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On
>>Behalf Of Tiago Olivoto
>>Sent: Wednesday, 13 May, 2020 8:55
>>To: r-package-devel at r-project.org
>>Subject: [R-pkg-devel] MathJax for Rd files
>>
>>Dear all,
>>
>>I'm not sure if this is the correct place to make this question, but
>>here I am.
>>
>>I'm trying to use MathJax for html help files in my package metan
>>(https://cran.r-project.org/package=metan)
>>
>>I have success with the following approach:
>>
>>Including the following call
>>
>>#'\if{html}{\out{
>>
>>#'<script id="MathJax-script" async
>>
>>#'src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-full.js
>>">
>>
>>#'  </script>
>>
>>#'}}
>>
>>And then typing the equations I need. A simple example bellow
>>
>>#' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}
>>
>>Is there any way to put "tex-chtml-full.js" locally so that everyone
>>that has my package installed see the equations rendered properly even
>offline?
>>
>>Thanks in advance
>>
>>Olivoto


From he|mut@@chuetz @end|ng |rom beb@c@@t  Wed May 13 17:00:47 2020
From: he|mut@@chuetz @end|ng |rom beb@c@@t (=?UTF-8?Q?Helmut_Sch=c3=bctz?=)
Date: Wed, 13 May 2020 17:00:47 +0200
Subject: [R-pkg-devel] MathJax for Rd files
In-Reply-To: <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
Message-ID: <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>

Hi Wolfgang,

Viechtbauer, Wolfgang (SP) wrote on 2020-05-13 16:53:
> Seems like you are using roxygen2. I have little experience with that, as all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).

As are mine. ;-)
In the HTML-preview of RStudio the LaTeX is indeed not parsed. I get it 
only (in the HTML man-page and the PDF) if I build the package.

Helmut

-- 
Ing. Helmut Sch?tz
BEBAC?? Consultancy Services for
Bioequivalence and Bioavailability Studies
Neubaugasse 36/11
1070 Vienna, Austria
E helmut.schuetz at bebac.at
W https://bebac.at/
F https://forum.bebac.at/


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Wed May 13 18:13:52 2020
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (SP))
Date: Wed, 13 May 2020 16:13:52 +0000
Subject: [R-pkg-devel] MathJax for Rd files
In-Reply-To: <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
Message-ID: <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>

Thanks for the info! Can confirm now that I tried this (I don't usually use RStudio). That's an RStudio issue then. My guess is that 'Preview' uses tools::Rd2HTML() and that indeed won't automatically understand macros coming from mathjaxr (or any add-on package for that matter). This would be an issue to raise with the RStudio folks then.

But once a package is installed, the equations are nicely rendered also in the RStudio help browser, so that part works.

Best,
Wolfgang

>-----Original Message-----
>From: Helmut Sch?tz [mailto:helmut.schuetz at bebac.at]
>Sent: Wednesday, 13 May, 2020 17:01
>To: Viechtbauer, Wolfgang (SP); tiagoolivoto at gmail.com; r-package-devel at r-
>project.org
>Subject: Re: [R-pkg-devel] MathJax for Rd files
>
>Hi Wolfgang,
>
>Viechtbauer, Wolfgang (SP) wrote on 2020-05-13 16:53:
>> Seems like you are using roxygen2. I have little experience with that, as
>all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).
>
>As are mine. ;-)
>In the HTML-preview of RStudio the LaTeX is indeed not parsed. I get it
>only (in the HTML man-page and the PDF) if I build the package.
>
>Helmut
>
>--
>Ing. Helmut Sch?tz
>BEBAC?? Consultancy Services for
>Bioequivalence and Bioavailability Studies
>Neubaugasse 36/11
>1070 Vienna, Austria
>E helmut.schuetz at bebac.at
>W https://bebac.at/
>F https://forum.bebac.at/

From t|@goo||voto @end|ng |rom gm@||@com  Wed May 13 18:35:33 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Wed, 13 May 2020 13:35:33 -0300
Subject: [R-pkg-devel] RES:  MathJax for Rd files
In-Reply-To: <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
Message-ID: <000001d62944$888b16e0$99a144a0$@gmail.com>

Thanks, Wolfgang and Helmut for the explanations.
When I was trying to use

#'\if{html}{\out{'<script id="MathJax-script" async
#''src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-full.js
#'</script> }}
#'
#'And then typing
#' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}
My mgidi.Rd file was produced with devtools::document();
then, I just used ?mgidi, and the html page was rendered nicely.

If I could do the same with mathjaxr, It would be nice, because I wouldn't need to install the package to see if the equations are as I expect
Anyway, mathjaxr is a very useful package.
Congratulations on the efforts for developing it.

Best
Olivoto

-----Mensagem original-----
De: Viechtbauer, Wolfgang (SP) <wolfgang.viechtbauer at maastrichtuniversity.nl> 
Enviada em: quarta-feira, 13 de maio de 2020 13:14
Para: Helmut Sch?tz <helmut.schuetz at bebac.at>; tiagoolivoto at gmail.com; r-package-devel at r-project.org
Assunto: RE: [R-pkg-devel] MathJax for Rd files

Thanks for the info! Can confirm now that I tried this (I don't usually use RStudio). That's an RStudio issue then. My guess is that 'Preview' uses tools::Rd2HTML() and that indeed won't automatically understand macros coming from mathjaxr (or any add-on package for that matter). This would be an issue to raise with the RStudio folks then.

But once a package is installed, the equations are nicely rendered also in the RStudio help browser, so that part works.

Best,
Wolfgang

>-----Original Message-----
>From: Helmut Sch?tz [mailto:helmut.schuetz at bebac.at]
>Sent: Wednesday, 13 May, 2020 17:01
>To: Viechtbauer, Wolfgang (SP); tiagoolivoto at gmail.com; 
>r-package-devel at r- project.org
>Subject: Re: [R-pkg-devel] MathJax for Rd files
>
>Hi Wolfgang,
>
>Viechtbauer, Wolfgang (SP) wrote on 2020-05-13 16:53:
>> Seems like you are using roxygen2. I have little experience with 
>> that, as
>all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).
>
>As are mine. ;-)
>In the HTML-preview of RStudio the LaTeX is indeed not parsed. I get it 
>only (in the HTML man-page and the PDF) if I build the package.
>
>Helmut
>
>--
>Ing. Helmut Sch?tz
>BEBAC ? Consultancy Services for
>Bioequivalence and Bioavailability Studies Neubaugasse 36/11
>1070 Vienna, Austria
>E helmut.schuetz at bebac.at
>W https://bebac.at/
>F https://forum.bebac.at/


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed May 13 19:30:15 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 13 May 2020 13:30:15 -0400
Subject: [R-pkg-devel] RES: MathJax for Rd files
In-Reply-To: <000001d62944$888b16e0$99a144a0$@gmail.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <000001d62944$888b16e0$99a144a0$@gmail.com>
Message-ID: <a7560602-d569-36c1-80e0-1a8b2f3f9b48@gmail.com>

On 13/05/2020 12:35 p.m., Tiago Olivoto wrote:
> Thanks, Wolfgang and Helmut for the explanations.
> When I was trying to use
> 
> #'\if{html}{\out{'<script id="MathJax-script" async
> #''src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-full.js
> #'</script> }}
> #'
> #'And then typing
> #' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}
> My mgidi.Rd file was produced with devtools::document();
> then, I just used ?mgidi, and the html page was rendered nicely.
> 
> If I could do the same with mathjaxr, It would be nice, because I wouldn't need to install the package to see if the equations are as I expect
> Anyway, mathjaxr is a very useful package.
> Congratulations on the efforts for developing it.

Sounds like it's a devtools issue.  I don't know how they are simulating 
the install, but it needs to say to use the mathjaxr macros when 
converting the Rd pages.

Duncan Murdoch

> 
> Best
> Olivoto
> 
> -----Mensagem original-----
> De: Viechtbauer, Wolfgang (SP) <wolfgang.viechtbauer at maastrichtuniversity.nl>
> Enviada em: quarta-feira, 13 de maio de 2020 13:14
> Para: Helmut Sch?tz <helmut.schuetz at bebac.at>; tiagoolivoto at gmail.com; r-package-devel at r-project.org
> Assunto: RE: [R-pkg-devel] MathJax for Rd files
> 
> Thanks for the info! Can confirm now that I tried this (I don't usually use RStudio). That's an RStudio issue then. My guess is that 'Preview' uses tools::Rd2HTML() and that indeed won't automatically understand macros coming from mathjaxr (or any add-on package for that matter). This would be an issue to raise with the RStudio folks then.
> 
> But once a package is installed, the equations are nicely rendered also in the RStudio help browser, so that part works.
> 
> Best,
> Wolfgang
> 
>> -----Original Message-----
>> From: Helmut Sch?tz [mailto:helmut.schuetz at bebac.at]
>> Sent: Wednesday, 13 May, 2020 17:01
>> To: Viechtbauer, Wolfgang (SP); tiagoolivoto at gmail.com;
>> r-package-devel at r- project.org
>> Subject: Re: [R-pkg-devel] MathJax for Rd files
>>
>> Hi Wolfgang,
>>
>> Viechtbauer, Wolfgang (SP) wrote on 2020-05-13 16:53:
>>> Seems like you are using roxygen2. I have little experience with
>>> that, as
>> all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).
>>
>> As are mine. ;-)
>> In the HTML-preview of RStudio the LaTeX is indeed not parsed. I get it
>> only (in the HTML man-page and the PDF) if I build the package.
>>
>> Helmut
>>
>> --
>> Ing. Helmut Sch?tz
>> BEBAC ? Consultancy Services for
>> Bioequivalence and Bioavailability Studies Neubaugasse 36/11
>> 1070 Vienna, Austria
>> E helmut.schuetz at bebac.at
>> W https://bebac.at/
>> F https://forum.bebac.at/
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Wed May 13 19:40:39 2020
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (SP))
Date: Wed, 13 May 2020 17:40:39 +0000
Subject: [R-pkg-devel] RES: MathJax for Rd files
In-Reply-To: <a7560602-d569-36c1-80e0-1a8b2f3f9b48@gmail.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <000001d62944$888b16e0$99a144a0$@gmail.com>
 <a7560602-d569-36c1-80e0-1a8b2f3f9b48@gmail.com>
Message-ID: <78d45d95a561426980a4ba55ca3542b6@UM-MAIL3214.unimaas.nl>

Thanks, Duncan. I was about to respond to suggest the same thing.

One way of getting this to work:

Sys.setenv(MATHJAXR.USECDN = "TRUE")
Rd <- file.path("<path>/<file>.Rd") # specify the .Rd file you want to preview
outfile <- tempfile(fileext = ".html")
browseURL(tools::Rd2HTML(Rd, outfile, macros="<path to library where mathjaxr is installed>/mathjaxr/help/macros/mathjax.Rd"))

Best,
Wolfgang

>-----Original Message-----
>From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com]
>Sent: Wednesday, 13 May, 2020 19:30
>To: tiagoolivoto at gmail.com; Viechtbauer, Wolfgang (SP); 'Helmut Sch?tz'; r-
>package-devel at r-project.org
>Subject: Re: [R-pkg-devel] RES: MathJax for Rd files
>
>On 13/05/2020 12:35 p.m., Tiago Olivoto wrote:
>> Thanks, Wolfgang and Helmut for the explanations.
>> When I was trying to use
>>
>> #'\if{html}{\out{'<script id="MathJax-script" async
>> #''src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-full.js
>> #'</script> }}
>> #'
>> #'And then typing
>> #' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}
>> My mgidi.Rd file was produced with devtools::document();
>> then, I just used ?mgidi, and the html page was rendered nicely.
>>
>> If I could do the same with mathjaxr, It would be nice, because I wouldn't
>need to install the package to see if the equations are as I expect
>> Anyway, mathjaxr is a very useful package.
>> Congratulations on the efforts for developing it.
>
>Sounds like it's a devtools issue.  I don't know how they are simulating
>the install, but it needs to say to use the mathjaxr macros when
>converting the Rd pages.
>
>Duncan Murdoch
>
>> Best
>> Olivoto
>>
>> -----Mensagem original-----
>> De: Viechtbauer, Wolfgang (SP)
><wolfgang.viechtbauer at maastrichtuniversity.nl>
>> Enviada em: quarta-feira, 13 de maio de 2020 13:14
>> Para: Helmut Sch?tz <helmut.schuetz at bebac.at>; tiagoolivoto at gmail.com; r-
>package-devel at r-project.org
>> Assunto: RE: [R-pkg-devel] MathJax for Rd files
>>
>> Thanks for the info! Can confirm now that I tried this (I don't usually
>use RStudio). That's an RStudio issue then. My guess is that 'Preview' uses
>tools::Rd2HTML() and that indeed won't automatically understand macros
>coming from mathjaxr (or any add-on package for that matter). This would be
>an issue to raise with the RStudio folks then.
>>
>> But once a package is installed, the equations are nicely rendered also in
>the RStudio help browser, so that part works.
>>
>> Best,
>> Wolfgang
>>
>>> -----Original Message-----
>>> From: Helmut Sch?tz [mailto:helmut.schuetz at bebac.at]
>>> Sent: Wednesday, 13 May, 2020 17:01
>>> To: Viechtbauer, Wolfgang (SP); tiagoolivoto at gmail.com;
>>> r-package-devel at r- project.org
>>> Subject: Re: [R-pkg-devel] MathJax for Rd files
>>>
>>> Hi Wolfgang,
>>>
>>> Viechtbauer, Wolfgang (SP) wrote on 2020-05-13 16:53:
>>>> Seems like you are using roxygen2. I have little experience with
>>>> that, as
>>> all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).
>>>
>>> As are mine. ;-)
>>> In the HTML-preview of RStudio the LaTeX is indeed not parsed. I get it
>>> only (in the HTML man-page and the PDF) if I build the package.
>>>
>>> Helmut
>>>
>>> --
>>> Ing. Helmut Sch?tz
>>> BEBAC ? Consultancy Services for
>>> Bioequivalence and Bioavailability Studies Neubaugasse 36/11
>>> 1070 Vienna, Austria
>>> E helmut.schuetz at bebac.at
>>> W https://bebac.at/
>>> F https://forum.bebac.at/

From t|@goo||voto @end|ng |rom gm@||@com  Wed May 13 20:30:51 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Wed, 13 May 2020 15:30:51 -0300
Subject: [R-pkg-devel] RES:  RES: MathJax for Rd files
In-Reply-To: <78d45d95a561426980a4ba55ca3542b6@UM-MAIL3214.unimaas.nl>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <000001d62944$888b16e0$99a144a0$@gmail.com>
 <a7560602-d569-36c1-80e0-1a8b2f3f9b48@gmail.com>
 <78d45d95a561426980a4ba55ca3542b6@UM-MAIL3214.unimaas.nl>
Message-ID: <000501d62954$a37dca50$ea795ef0$@gmail.com>

Thank you so much! It works!
In my example, I've created a simple helper function, preview_rd()

preview_rd <- function(rdfile){ # without '.rd'
Rd <- file.path(paste("man/", rdfile, ".rd", sep = "")) # specify the .Rd file you want to preview
outfile <- tempfile(fileext = ".html")
browseURL(tools::Rd2HTML(Rd, outfile, macros="D:/Documents/R/win-library/4.0/mathjaxr/help/macros/mathjax.Rd"))
}

I added the macros \loadmathjax and \mjsdeqn in the mgidi.R file, ran devtools::document() and then preview_rd("mgidi")
The html was rendered nicely (in my browser) and shows the equation without installing the package.
That's what I was looking for.
Thanks again!
Olivoto

-----Mensagem original-----
De: Viechtbauer, Wolfgang (SP) <wolfgang.viechtbauer at maastrichtuniversity.nl> 
Enviada em: quarta-feira, 13 de maio de 2020 14:41
Para: Duncan Murdoch <murdoch.duncan at gmail.com>; tiagoolivoto at gmail.com; r-package-devel at r-project.org
Assunto: RE: [R-pkg-devel] RES: MathJax for Rd files

Thanks, Duncan. I was about to respond to suggest the same thing.

One way of getting this to work:

Sys.setenv(MATHJAXR.USECDN = "TRUE")
Rd <- file.path("<path>/<file>.Rd") # specify the .Rd file you want to preview outfile <- tempfile(fileext = ".html") browseURL(tools::Rd2HTML(Rd, outfile, macros="<path to library where mathjaxr is installed>/mathjaxr/help/macros/mathjax.Rd"))

Best,
Wolfgang

>-----Original Message-----
>From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com]
>Sent: Wednesday, 13 May, 2020 19:30
>To: tiagoolivoto at gmail.com; Viechtbauer, Wolfgang (SP); 'Helmut 
>Sch?tz'; r- package-devel at r-project.org
>Subject: Re: [R-pkg-devel] RES: MathJax for Rd files
>
>On 13/05/2020 12:35 p.m., Tiago Olivoto wrote:
>> Thanks, Wolfgang and Helmut for the explanations.
>> When I was trying to use
>>
>> #'\if{html}{\out{'<script id="MathJax-script" async 
>> #''src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-full
>> .js
>> #'</script> }}
>> #'
>> #'And then typing
>> #' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}
>> My mgidi.Rd file was produced with devtools::document(); then, I just 
>> used ?mgidi, and the html page was rendered nicely.
>>
>> If I could do the same with mathjaxr, It would be nice, because I 
>> wouldn't
>need to install the package to see if the equations are as I expect
>> Anyway, mathjaxr is a very useful package.
>> Congratulations on the efforts for developing it.
>
>Sounds like it's a devtools issue.  I don't know how they are 
>simulating the install, but it needs to say to use the mathjaxr macros 
>when converting the Rd pages.
>
>Duncan Murdoch
>
>> Best
>> Olivoto
>>
>> -----Mensagem original-----
>> De: Viechtbauer, Wolfgang (SP)
><wolfgang.viechtbauer at maastrichtuniversity.nl>
>> Enviada em: quarta-feira, 13 de maio de 2020 13:14
>> Para: Helmut Sch?tz <helmut.schuetz at bebac.at>; 
>> tiagoolivoto at gmail.com; r-
>package-devel at r-project.org
>> Assunto: RE: [R-pkg-devel] MathJax for Rd files
>>
>> Thanks for the info! Can confirm now that I tried this (I don't 
>> usually
>use RStudio). That's an RStudio issue then. My guess is that 'Preview' 
>uses
>tools::Rd2HTML() and that indeed won't automatically understand macros 
>coming from mathjaxr (or any add-on package for that matter). This 
>would be an issue to raise with the RStudio folks then.
>>
>> But once a package is installed, the equations are nicely rendered 
>> also in
>the RStudio help browser, so that part works.
>>
>> Best,
>> Wolfgang
>>
>>> -----Original Message-----
>>> From: Helmut Sch?tz [mailto:helmut.schuetz at bebac.at]
>>> Sent: Wednesday, 13 May, 2020 17:01
>>> To: Viechtbauer, Wolfgang (SP); tiagoolivoto at gmail.com;
>>> r-package-devel at r- project.org
>>> Subject: Re: [R-pkg-devel] MathJax for Rd files
>>>
>>> Hi Wolfgang,
>>>
>>> Viechtbauer, Wolfgang (SP) wrote on 2020-05-13 16:53:
>>>> Seems like you are using roxygen2. I have little experience with 
>>>> that, as
>>> all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).
>>>
>>> As are mine. ;-)
>>> In the HTML-preview of RStudio the LaTeX is indeed not parsed. I get 
>>> it only (in the HTML man-page and the PDF) if I build the package.
>>>
>>> Helmut
>>>
>>> --
>>> Ing. Helmut Sch?tz
>>> BEBAC ? Consultancy Services for
>>> Bioequivalence and Bioavailability Studies Neubaugasse 36/11
>>> 1070 Vienna, Austria
>>> E helmut.schuetz at bebac.at
>>> W https://bebac.at/
>>> F https://forum.bebac.at/


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Wed May 13 20:38:27 2020
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (SP))
Date: Wed, 13 May 2020 18:38:27 +0000
Subject: [R-pkg-devel] RES: MathJax for Rd files
In-Reply-To: <000501d62954$a37dca50$ea795ef0$@gmail.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <000001d62944$888b16e0$99a144a0$@gmail.com>
 <a7560602-d569-36c1-80e0-1a8b2f3f9b48@gmail.com>
 <78d45d95a561426980a4ba55ca3542b6@UM-MAIL3214.unimaas.nl>
 <000501d62954$a37dca50$ea795ef0$@gmail.com>
Message-ID: <2093061fcaa7469e93ea0583a0c57d17@UM-MAIL3214.unimaas.nl>

Glad to hear that. I might consider adding a function along those lines to mathjaxr itself, to make it easier to preview files while working on a help page.

Best,
Wolfgang

>-----Original Message-----
>From: Tiago Olivoto [mailto:tiagoolivoto at gmail.com]
>Sent: Wednesday, 13 May, 2020 20:31
>To: Viechtbauer, Wolfgang (SP); 'Duncan Murdoch'; r-package-devel at r-
>project.org
>Subject: RES: [R-pkg-devel] RES: MathJax for Rd files
>
>Thank you so much! It works!
>In my example, I've created a simple helper function, preview_rd()
>
>preview_rd <- function(rdfile){ # without '.rd'
>Rd <- file.path(paste("man/", rdfile, ".rd", sep = "")) # specify the .Rd
>file you want to preview
>outfile <- tempfile(fileext = ".html")
>browseURL(tools::Rd2HTML(Rd, outfile, macros="D:/Documents/R/win-
>library/4.0/mathjaxr/help/macros/mathjax.Rd"))
>}
>
>I added the macros \loadmathjax and \mjsdeqn in the mgidi.R file, ran
>devtools::document() and then preview_rd("mgidi")
>The html was rendered nicely (in my browser) and shows the equation without
>installing the package.
>That's what I was looking for.
>Thanks again!
>Olivoto
>
>-----Mensagem original-----
>De: Viechtbauer, Wolfgang (SP)
><wolfgang.viechtbauer at maastrichtuniversity.nl>
>Enviada em: quarta-feira, 13 de maio de 2020 14:41
>Para: Duncan Murdoch <murdoch.duncan at gmail.com>; tiagoolivoto at gmail.com; r-
>package-devel at r-project.org
>Assunto: RE: [R-pkg-devel] RES: MathJax for Rd files
>
>Thanks, Duncan. I was about to respond to suggest the same thing.
>
>One way of getting this to work:
>
>Sys.setenv(MATHJAXR.USECDN = "TRUE")
>Rd <- file.path("<path>/<file>.Rd") # specify the .Rd file you want to
>preview outfile <- tempfile(fileext = ".html") browseURL(tools::Rd2HTML(Rd,
>outfile, macros="<path to library where mathjaxr is
>installed>/mathjaxr/help/macros/mathjax.Rd"))
>
>Best,
>Wolfgang
>
>>-----Original Message-----
>>From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com]
>>Sent: Wednesday, 13 May, 2020 19:30
>>To: tiagoolivoto at gmail.com; Viechtbauer, Wolfgang (SP); 'Helmut
>>Sch?tz'; r- package-devel at r-project.org
>>Subject: Re: [R-pkg-devel] RES: MathJax for Rd files
>>
>>On 13/05/2020 12:35 p.m., Tiago Olivoto wrote:
>>> Thanks, Wolfgang and Helmut for the explanations.
>>> When I was trying to use
>>>
>>> #'\if{html}{\out{'<script id="MathJax-script" async
>>> #''src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-full
>>> .js
>>> #'</script> }}
>>> #'
>>> #'And then typing
>>> #' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}
>>> My mgidi.Rd file was produced with devtools::document(); then, I just
>>> used ?mgidi, and the html page was rendered nicely.
>>>
>>> If I could do the same with mathjaxr, It would be nice, because I
>>> wouldn't
>>need to install the package to see if the equations are as I expect
>>> Anyway, mathjaxr is a very useful package.
>>> Congratulations on the efforts for developing it.
>>
>>Sounds like it's a devtools issue.  I don't know how they are
>>simulating the install, but it needs to say to use the mathjaxr macros
>>when converting the Rd pages.
>>
>>Duncan Murdoch
>>
>>> Best
>>> Olivoto
>>>
>>> -----Mensagem original-----
>>> De: Viechtbauer, Wolfgang (SP)
>><wolfgang.viechtbauer at maastrichtuniversity.nl>
>>> Enviada em: quarta-feira, 13 de maio de 2020 13:14
>>> Para: Helmut Sch?tz <helmut.schuetz at bebac.at>;
>>> tiagoolivoto at gmail.com; r-
>>package-devel at r-project.org
>>> Assunto: RE: [R-pkg-devel] MathJax for Rd files
>>>
>>> Thanks for the info! Can confirm now that I tried this (I don't
>>> usually
>>use RStudio). That's an RStudio issue then. My guess is that 'Preview'
>>uses
>>tools::Rd2HTML() and that indeed won't automatically understand macros
>>coming from mathjaxr (or any add-on package for that matter). This
>>would be an issue to raise with the RStudio folks then.
>>>
>>> But once a package is installed, the equations are nicely rendered
>>> also in
>>the RStudio help browser, so that part works.
>>>
>>> Best,
>>> Wolfgang
>>>
>>>> -----Original Message-----
>>>> From: Helmut Sch?tz [mailto:helmut.schuetz at bebac.at]
>>>> Sent: Wednesday, 13 May, 2020 17:01
>>>> To: Viechtbauer, Wolfgang (SP); tiagoolivoto at gmail.com;
>>>> r-package-devel at r- project.org
>>>> Subject: Re: [R-pkg-devel] MathJax for Rd files
>>>>
>>>> Hi Wolfgang,
>>>>
>>>> Viechtbauer, Wolfgang (SP) wrote on 2020-05-13 16:53:
>>>>> Seems like you are using roxygen2. I have little experience with
>>>>> that, as
>>>> all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).
>>>>
>>>> As are mine. ;-)
>>>> In the HTML-preview of RStudio the LaTeX is indeed not parsed. I get
>>>> it only (in the HTML man-page and the PDF) if I build the package.
>>>>
>>>> Helmut
>>>>
>>>> --
>>>> Ing. Helmut Sch?tz
>>>> BEBAC ? Consultancy Services for
>>>> Bioequivalence and Bioavailability Studies Neubaugasse 36/11
>>>> 1070 Vienna, Austria
>>>> E helmut.schuetz at bebac.at
>>>> W https://bebac.at/
>>>> F https://forum.bebac.at/

From murdoch@dunc@n @end|ng |rom gm@||@com  Wed May 13 21:16:14 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 13 May 2020 15:16:14 -0400
Subject: [R-pkg-devel] RES:  RES: MathJax for Rd files
In-Reply-To: <000501d62954$a37dca50$ea795ef0$@gmail.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <000001d62944$888b16e0$99a144a0$@gmail.com>
 <a7560602-d569-36c1-80e0-1a8b2f3f9b48@gmail.com>
 <78d45d95a561426980a4ba55ca3542b6@UM-MAIL3214.unimaas.nl>
 <000501d62954$a37dca50$ea795ef0$@gmail.com>
Message-ID: <6eaa6d7e-ede3-deaf-27c2-40a6a9a63dbe@gmail.com>

On 13/05/2020 2:30 p.m., Tiago Olivoto wrote:
> Thank you so much! It works!
> In my example, I've created a simple helper function, preview_rd()
> 
> preview_rd <- function(rdfile){ # without '.rd'
> Rd <- file.path(paste("man/", rdfile, ".rd", sep = "")) # specify the .Rd file you want to preview
> outfile <- tempfile(fileext = ".html")
> browseURL(tools::Rd2HTML(Rd, outfile, macros="D:/Documents/R/win-library/4.0/mathjaxr/help/macros/mathjax.Rd"))
> }

Good to hear.  I'd suggest this way to find the macros:

   browseURL(tools::Rd2HTML(Rd, outfile, macros = 
system.file("help/macros/mathjax.Rd", package = "mathjaxr")))

so that it works if you use it on a different system that puts the 
library somewhere else.

Duncan Murdoch

> 
> I added the macros \loadmathjax and \mjsdeqn in the mgidi.R file, ran devtools::document() and then preview_rd("mgidi")
> The html was rendered nicely (in my browser) and shows the equation without installing the package.
> That's what I was looking for.
> Thanks again!
> Olivoto
> 
> -----Mensagem original-----
> De: Viechtbauer, Wolfgang (SP) <wolfgang.viechtbauer at maastrichtuniversity.nl>
> Enviada em: quarta-feira, 13 de maio de 2020 14:41
> Para: Duncan Murdoch <murdoch.duncan at gmail.com>; tiagoolivoto at gmail.com; r-package-devel at r-project.org
> Assunto: RE: [R-pkg-devel] RES: MathJax for Rd files
> 
> Thanks, Duncan. I was about to respond to suggest the same thing.
> 
> One way of getting this to work:
> 
> Sys.setenv(MATHJAXR.USECDN = "TRUE")
> Rd <- file.path("<path>/<file>.Rd") # specify the .Rd file you want to preview outfile <- tempfile(fileext = ".html") browseURL(tools::Rd2HTML(Rd, outfile, macros="<path to library where mathjaxr is installed>/mathjaxr/help/macros/mathjax.Rd"))
> 
> Best,
> Wolfgang
> 
>> -----Original Message-----
>> From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com]
>> Sent: Wednesday, 13 May, 2020 19:30
>> To: tiagoolivoto at gmail.com; Viechtbauer, Wolfgang (SP); 'Helmut
>> Sch?tz'; r- package-devel at r-project.org
>> Subject: Re: [R-pkg-devel] RES: MathJax for Rd files
>>
>> On 13/05/2020 12:35 p.m., Tiago Olivoto wrote:
>>> Thanks, Wolfgang and Helmut for the explanations.
>>> When I was trying to use
>>>
>>> #'\if{html}{\out{'<script id="MathJax-script" async
>>> #''src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-full
>>> .js
>>> #'</script> }}
>>> #'
>>> #'And then typing
>>> #' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}
>>> My mgidi.Rd file was produced with devtools::document(); then, I just
>>> used ?mgidi, and the html page was rendered nicely.
>>>
>>> If I could do the same with mathjaxr, It would be nice, because I
>>> wouldn't
>> need to install the package to see if the equations are as I expect
>>> Anyway, mathjaxr is a very useful package.
>>> Congratulations on the efforts for developing it.
>>
>> Sounds like it's a devtools issue.  I don't know how they are
>> simulating the install, but it needs to say to use the mathjaxr macros
>> when converting the Rd pages.
>>
>> Duncan Murdoch
>>
>>> Best
>>> Olivoto
>>>
>>> -----Mensagem original-----
>>> De: Viechtbauer, Wolfgang (SP)
>> <wolfgang.viechtbauer at maastrichtuniversity.nl>
>>> Enviada em: quarta-feira, 13 de maio de 2020 13:14
>>> Para: Helmut Sch?tz <helmut.schuetz at bebac.at>;
>>> tiagoolivoto at gmail.com; r-
>> package-devel at r-project.org
>>> Assunto: RE: [R-pkg-devel] MathJax for Rd files
>>>
>>> Thanks for the info! Can confirm now that I tried this (I don't
>>> usually
>> use RStudio). That's an RStudio issue then. My guess is that 'Preview'
>> uses
>> tools::Rd2HTML() and that indeed won't automatically understand macros
>> coming from mathjaxr (or any add-on package for that matter). This
>> would be an issue to raise with the RStudio folks then.
>>>
>>> But once a package is installed, the equations are nicely rendered
>>> also in
>> the RStudio help browser, so that part works.
>>>
>>> Best,
>>> Wolfgang
>>>
>>>> -----Original Message-----
>>>> From: Helmut Sch?tz [mailto:helmut.schuetz at bebac.at]
>>>> Sent: Wednesday, 13 May, 2020 17:01
>>>> To: Viechtbauer, Wolfgang (SP); tiagoolivoto at gmail.com;
>>>> r-package-devel at r- project.org
>>>> Subject: Re: [R-pkg-devel] MathJax for Rd files
>>>>
>>>> Hi Wolfgang,
>>>>
>>>> Viechtbauer, Wolfgang (SP) wrote on 2020-05-13 16:53:
>>>>> Seems like you are using roxygen2. I have little experience with
>>>>> that, as
>>>> all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).
>>>>
>>>> As are mine. ;-)
>>>> In the HTML-preview of RStudio the LaTeX is indeed not parsed. I get
>>>> it only (in the HTML man-page and the PDF) if I build the package.
>>>>
>>>> Helmut
>>>>
>>>> --
>>>> Ing. Helmut Sch?tz
>>>> BEBAC ? Consultancy Services for
>>>> Bioequivalence and Bioavailability Studies Neubaugasse 36/11
>>>> 1070 Vienna, Austria
>>>> E helmut.schuetz at bebac.at
>>>> W https://bebac.at/
>>>> F https://forum.bebac.at/
>


From t|@goo||voto @end|ng |rom gm@||@com  Wed May 13 21:25:10 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Wed, 13 May 2020 16:25:10 -0300
Subject: [R-pkg-devel] RES: RES:  RES: MathJax for Rd files
In-Reply-To: <6eaa6d7e-ede3-deaf-27c2-40a6a9a63dbe@gmail.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <000001d62944$888b16e0$99a144a0$@gmail.com>
 <a7560602-d569-36c1-80e0-1a8b2f3f9b48@gmail.com>
 <78d45d95a561426980a4ba55ca3542b6@UM-MAIL3214.unimaas.nl>
 <000501d62954$a37dca50$ea795ef0$@gmail.com>
 <6eaa6d7e-ede3-deaf-27c2-40a6a9a63dbe@gmail.com>
Message-ID: <000c01d6295c$3a090cd0$ae1b2670$@gmail.com>

Definitively this is a better way to find the macros.
I think a function like 'preview_rd()' could be useful in mathjaxr

Thanks for all support
Olivoto

-----Mensagem original-----
De: Duncan Murdoch <murdoch.duncan at gmail.com> 
Enviada em: quarta-feira, 13 de maio de 2020 16:16
Para: tiagoolivoto at gmail.com; 'Viechtbauer, Wolfgang (SP)' <wolfgang.viechtbauer at maastrichtuniversity.nl>; r-package-devel at r-project.org
Assunto: Re: RES: [R-pkg-devel] RES: MathJax for Rd files

On 13/05/2020 2:30 p.m., Tiago Olivoto wrote:
> Thank you so much! It works!
> In my example, I've created a simple helper function, preview_rd()
> 
> preview_rd <- function(rdfile){ # without '.rd'
> Rd <- file.path(paste("man/", rdfile, ".rd", sep = "")) # specify the 
> .Rd file you want to preview outfile <- tempfile(fileext = ".html") 
> browseURL(tools::Rd2HTML(Rd, outfile, 
> macros="D:/Documents/R/win-library/4.0/mathjaxr/help/macros/mathjax.Rd
> "))
> }

Good to hear.  I'd suggest this way to find the macros:

   browseURL(tools::Rd2HTML(Rd, outfile, macros = system.file("help/macros/mathjax.Rd", package = "mathjaxr")))

so that it works if you use it on a different system that puts the library somewhere else.

Duncan Murdoch

> 
> I added the macros \loadmathjax and \mjsdeqn in the mgidi.R file, ran 
> devtools::document() and then preview_rd("mgidi") The html was rendered nicely (in my browser) and shows the equation without installing the package.
> That's what I was looking for.
> Thanks again!
> Olivoto
> 
> -----Mensagem original-----
> De: Viechtbauer, Wolfgang (SP) 
> <wolfgang.viechtbauer at maastrichtuniversity.nl>
> Enviada em: quarta-feira, 13 de maio de 2020 14:41
> Para: Duncan Murdoch <murdoch.duncan at gmail.com>; 
> tiagoolivoto at gmail.com; r-package-devel at r-project.org
> Assunto: RE: [R-pkg-devel] RES: MathJax for Rd files
> 
> Thanks, Duncan. I was about to respond to suggest the same thing.
> 
> One way of getting this to work:
> 
> Sys.setenv(MATHJAXR.USECDN = "TRUE")
> Rd <- file.path("<path>/<file>.Rd") # specify the .Rd file you want to 
> preview outfile <- tempfile(fileext = ".html") 
> browseURL(tools::Rd2HTML(Rd, outfile, macros="<path to library where 
> mathjaxr is installed>/mathjaxr/help/macros/mathjax.Rd"))
> 
> Best,
> Wolfgang
> 
>> -----Original Message-----
>> From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com]
>> Sent: Wednesday, 13 May, 2020 19:30
>> To: tiagoolivoto at gmail.com; Viechtbauer, Wolfgang (SP); 'Helmut 
>> Sch?tz'; r- package-devel at r-project.org
>> Subject: Re: [R-pkg-devel] RES: MathJax for Rd files
>>
>> On 13/05/2020 12:35 p.m., Tiago Olivoto wrote:
>>> Thanks, Wolfgang and Helmut for the explanations.
>>> When I was trying to use
>>>
>>> #'\if{html}{\out{'<script id="MathJax-script" async 
>>> #''src="https://cdn.jsdelivr.net/npm/mathjax at 3.0.5/es5/tex-chtml-ful
>>> l
>>> .js
>>> #'</script> }}
>>> #'
>>> #'And then typing
>>> #' \ifelse{html}{\out{\[\sqrt{a^2}\]}}{\deqn{\sqrt{a^2}}}
>>> My mgidi.Rd file was produced with devtools::document(); then, I 
>>> just used ?mgidi, and the html page was rendered nicely.
>>>
>>> If I could do the same with mathjaxr, It would be nice, because I 
>>> wouldn't
>> need to install the package to see if the equations are as I expect
>>> Anyway, mathjaxr is a very useful package.
>>> Congratulations on the efforts for developing it.
>>
>> Sounds like it's a devtools issue.  I don't know how they are 
>> simulating the install, but it needs to say to use the mathjaxr 
>> macros when converting the Rd pages.
>>
>> Duncan Murdoch
>>
>>> Best
>>> Olivoto
>>>
>>> -----Mensagem original-----
>>> De: Viechtbauer, Wolfgang (SP)
>> <wolfgang.viechtbauer at maastrichtuniversity.nl>
>>> Enviada em: quarta-feira, 13 de maio de 2020 13:14
>>> Para: Helmut Sch?tz <helmut.schuetz at bebac.at>; 
>>> tiagoolivoto at gmail.com; r-
>> package-devel at r-project.org
>>> Assunto: RE: [R-pkg-devel] MathJax for Rd files
>>>
>>> Thanks for the info! Can confirm now that I tried this (I don't 
>>> usually
>> use RStudio). That's an RStudio issue then. My guess is that 'Preview'
>> uses
>> tools::Rd2HTML() and that indeed won't automatically understand 
>> macros coming from mathjaxr (or any add-on package for that matter). 
>> This would be an issue to raise with the RStudio folks then.
>>>
>>> But once a package is installed, the equations are nicely rendered 
>>> also in
>> the RStudio help browser, so that part works.
>>>
>>> Best,
>>> Wolfgang
>>>
>>>> -----Original Message-----
>>>> From: Helmut Sch?tz [mailto:helmut.schuetz at bebac.at]
>>>> Sent: Wednesday, 13 May, 2020 17:01
>>>> To: Viechtbauer, Wolfgang (SP); tiagoolivoto at gmail.com;
>>>> r-package-devel at r- project.org
>>>> Subject: Re: [R-pkg-devel] MathJax for Rd files
>>>>
>>>> Hi Wolfgang,
>>>>
>>>> Viechtbauer, Wolfgang (SP) wrote on 2020-05-13 16:53:
>>>>> Seems like you are using roxygen2. I have little experience with 
>>>>> that, as
>>>> all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).
>>>>
>>>> As are mine. ;-)
>>>> In the HTML-preview of RStudio the LaTeX is indeed not parsed. I 
>>>> get it only (in the HTML man-page and the PDF) if I build the package.
>>>>
>>>> Helmut
>>>>
>>>> --
>>>> Ing. Helmut Sch?tz
>>>> BEBAC ? Consultancy Services for
>>>> Bioequivalence and Bioavailability Studies Neubaugasse 36/11
>>>> 1070 Vienna, Austria
>>>> E helmut.schuetz at bebac.at
>>>> W https://bebac.at/
>>>> F https://forum.bebac.at/
> 


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Wed May 13 23:25:43 2020
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (SP))
Date: Wed, 13 May 2020 21:25:43 +0000
Subject: [R-pkg-devel] RES:  RES: MathJax for Rd files
In-Reply-To: <000c01d6295c$3a090cd0$ae1b2670$@gmail.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <000001d62944$888b16e0$99a144a0$@gmail.com>
 <a7560602-d569-36c1-80e0-1a8b2f3f9b48@gmail.com>
 <78d45d95a561426980a4ba55ca3542b6@UM-MAIL3214.unimaas.nl>
 <000501d62954$a37dca50$ea795ef0$@gmail.com>
 <6eaa6d7e-ede3-deaf-27c2-40a6a9a63dbe@gmail.com>
 <000c01d6295c$3a090cd0$ae1b2670$@gmail.com>
Message-ID: <e4ef20aae4824fc5b96c6a800eb1ff49@UM-MAIL3214.unimaas.nl>

I've added a preview_rd() function to the 'devel' version of mathjaxr:

https://github.com/wviechtb/mathjaxr

If you want to give this a try:

remotes::install_github("wviechtb/mathjaxr")
library(mathjaxr)

Then set the working dir to the root of the package you are working on. Then use:

preview_rd(Rdfile)

with the name of the Rd file given as a character string (either with or without the .Rd/.rd extension).

By default, the browser (or a new tab in your browser) should open up. But if you then make further changes to the Rd file, opening up a new tab each time is inconvenient. Use:

preview_rd(Rdfile, view=FALSE)

to prevent that (then just refresh the page in the open tab in your browser to see the updates).

One limitation: As far as I can tell, it will not be possible to load MathJax from the mathjaxr package when using preview_rd(). So, it will be loaded via the CDN, which means that you need an internet connection for equations to render.

Best,
Wolfgang

>-----Original Message-----
>From: Tiago Olivoto [mailto:tiagoolivoto at gmail.com]
>Sent: Wednesday, 13 May, 2020 21:25
>To: 'Duncan Murdoch'; Viechtbauer, Wolfgang (SP); r-package-devel at r-
>project.org
>Subject: RES: RES: [R-pkg-devel] RES: MathJax for Rd files
>
>Definitively this is a better way to find the macros.
>I think a function like 'preview_rd()' could be useful in mathjaxr
>
>Thanks for all support
>Olivoto
>
>-----Mensagem original-----
>De: Duncan Murdoch <murdoch.duncan at gmail.com>
>Enviada em: quarta-feira, 13 de maio de 2020 16:16
>Para: tiagoolivoto at gmail.com; 'Viechtbauer, Wolfgang (SP)'
><wolfgang.viechtbauer at maastrichtuniversity.nl>; r-package-devel at r-
>project.org
>Assunto: Re: RES: [R-pkg-devel] RES: MathJax for Rd files
>
>On 13/05/2020 2:30 p.m., Tiago Olivoto wrote:
>> Thank you so much! It works!
>> In my example, I've created a simple helper function, preview_rd()
>>
>> preview_rd <- function(rdfile){ # without '.rd'
>> Rd <- file.path(paste("man/", rdfile, ".rd", sep = "")) # specify the
>> .Rd file you want to preview outfile <- tempfile(fileext = ".html")
>> browseURL(tools::Rd2HTML(Rd, outfile,
>> macros="D:/Documents/R/win-library/4.0/mathjaxr/help/macros/mathjax.Rd
>> "))
>> }
>
>Good to hear.  I'd suggest this way to find the macros:
>
>   browseURL(tools::Rd2HTML(Rd, outfile, macros =
>system.file("help/macros/mathjax.Rd", package = "mathjaxr")))
>
>so that it works if you use it on a different system that puts the library
>somewhere else.
>
>Duncan Murdoch

From t|@goo||voto @end|ng |rom gm@||@com  Thu May 14 02:30:50 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Wed, 13 May 2020 21:30:50 -0300
Subject: [R-pkg-devel] RES: RES:  RES: MathJax for Rd files
In-Reply-To: <e4ef20aae4824fc5b96c6a800eb1ff49@UM-MAIL3214.unimaas.nl>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <000001d62944$888b16e0$99a144a0$@gmail.com>
 <a7560602-d569-36c1-80e0-1a8b2f3f9b48@gmail.com>
 <78d45d95a561426980a4ba55ca3542b6@UM-MAIL3214.unimaas.nl>
 <000501d62954$a37dca50$ea795ef0$@gmail.com>
 <6eaa6d7e-ede3-deaf-27c2-40a6a9a63dbe@gmail.com>
 <000c01d6295c$3a090cd0$ae1b2670$@gmail.com>
 <e4ef20aae4824fc5b96c6a800eb1ff49@UM-MAIL3214.unimaas.nl>
Message-ID: <000001d62986$ed418960$c7c49c20$@gmail.com>

I installed the 'devel' version of mathjaxr and tested preview_rd()
All seems to be working fine!
Thank you for the quick and useful implementation!
Best,
Olivoto

-----Mensagem original-----
De: Viechtbauer, Wolfgang (SP) <wolfgang.viechtbauer at maastrichtuniversity.nl> 
Enviada em: quarta-feira, 13 de maio de 2020 18:26
Para: tiagoolivoto at gmail.com; 'Duncan Murdoch' <murdoch.duncan at gmail.com>; r-package-devel at r-project.org
Assunto: RE: RES: [R-pkg-devel] RES: MathJax for Rd files

I've added a preview_rd() function to the 'devel' version of mathjaxr:

https://github.com/wviechtb/mathjaxr

If you want to give this a try:

remotes::install_github("wviechtb/mathjaxr")
library(mathjaxr)

Then set the working dir to the root of the package you are working on. Then use:

preview_rd(Rdfile)

with the name of the Rd file given as a character string (either with or without the .Rd/.rd extension).

By default, the browser (or a new tab in your browser) should open up. But if you then make further changes to the Rd file, opening up a new tab each time is inconvenient. Use:

preview_rd(Rdfile, view=FALSE)

to prevent that (then just refresh the page in the open tab in your browser to see the updates).

One limitation: As far as I can tell, it will not be possible to load MathJax from the mathjaxr package when using preview_rd(). So, it will be loaded via the CDN, which means that you need an internet connection for equations to render.

Best,
Wolfgang

>-----Original Message-----
>From: Tiago Olivoto [mailto:tiagoolivoto at gmail.com]
>Sent: Wednesday, 13 May, 2020 21:25
>To: 'Duncan Murdoch'; Viechtbauer, Wolfgang (SP); r-package-devel at r- 
>project.org
>Subject: RES: RES: [R-pkg-devel] RES: MathJax for Rd files
>
>Definitively this is a better way to find the macros.
>I think a function like 'preview_rd()' could be useful in mathjaxr
>
>Thanks for all support
>Olivoto
>
>-----Mensagem original-----
>De: Duncan Murdoch <murdoch.duncan at gmail.com> Enviada em: quarta-feira, 
>13 de maio de 2020 16:16
>Para: tiagoolivoto at gmail.com; 'Viechtbauer, Wolfgang (SP)'
><wolfgang.viechtbauer at maastrichtuniversity.nl>; r-package-devel at r- 
>project.org
>Assunto: Re: RES: [R-pkg-devel] RES: MathJax for Rd files
>
>On 13/05/2020 2:30 p.m., Tiago Olivoto wrote:
>> Thank you so much! It works!
>> In my example, I've created a simple helper function, preview_rd()
>>
>> preview_rd <- function(rdfile){ # without '.rd'
>> Rd <- file.path(paste("man/", rdfile, ".rd", sep = "")) # specify the 
>> .Rd file you want to preview outfile <- tempfile(fileext = ".html") 
>> browseURL(tools::Rd2HTML(Rd, outfile, 
>> macros="D:/Documents/R/win-library/4.0/mathjaxr/help/macros/mathjax.R
>> d
>> "))
>> }
>
>Good to hear.  I'd suggest this way to find the macros:
>
>   browseURL(tools::Rd2HTML(Rd, outfile, macros = 
>system.file("help/macros/mathjax.Rd", package = "mathjaxr")))
>
>so that it works if you use it on a different system that puts the 
>library somewhere else.
>
>Duncan Murdoch


From j@y|@mb20 @end|ng |rom gm@||@com  Thu May 14 04:45:53 2020
From: j@y|@mb20 @end|ng |rom gm@||@com (James Lamb)
Date: Wed, 13 May 2020 21:45:53 -0500
Subject: [R-pkg-devel] Is there an Rtools40 changelog?
In-Reply-To: <CABFfbXttj3zCfnh5kk9Uw2A3nvewpvp6GdSHGR-CFusUsR1pGA@mail.gmail.com>
References: <CADPubGRsQFfm6gXRttFi-xq3VaAVkxTDGLxWUMMFbz+-e1TQ+w@mail.gmail.com>
 <CABFfbXttj3zCfnh5kk9Uw2A3nvewpvp6GdSHGR-CFusUsR1pGA@mail.gmail.com>
Message-ID: <CADPubGS+7nyHStjryr7xThGUMziJKVuDHu5vzbZGfP57Sir7sQ@mail.gmail.com>

Thank you very much for the help!

This definitely answered my question. I wasn't familiar with pacman before.

For the curious, I've had success generating a .def file from R.dll with
*objdump.exe*, a utility that exists in prior Rtools distributions and
the current ones. With something like the R code below.

```r
# [description]
#     Create a definition file (.def) from a .dll file, using objdump.
#
# [usage]
#
#     Rscript make-r-def.R something.dll something.def
#
# [references]
#    * https://www.cs.colorado.edu/~main/cs1300/doc/mingwfaq.html

args <- commandArgs(trailingOnly = TRUE)

IN_DLL_FILE <- args[[1L]]
OUT_DEF_FILE <- args[[2L]]
DLL_BASE_NAME <- basename(IN_DLL_FILE)

print(sprintf("Creating '%s' from '%s'", OUT_DEF_FILE, IN_DLL_FILE))

# use objdump to dump all the symbols
OBJDUMP_FILE <- "objdump-out.txt"
exit_code <- system2(
    command = "objdump"
    , args = c(
        "-p"
        , shQuote(IN_DLL_FILE)
    )
    , stdout = OBJDUMP_FILE
)

objdump_results <- readLines(OBJDUMP_FILE)
result <- file.remove(OBJDUMP_FILE)

# Only one table in the objdump results matters for our purposes,
# see https://www.cs.colorado.edu/~main/cs1300/doc/mingwfaq.html
start_index <- which(
    grepl(
        pattern = "[Ordinal/Name Pointer] Table"
        , x = objdump_results
        , fixed = TRUE
    )
)
empty_lines <- which(objdump_results == "")
end_of_table <- empty_lines[empty_lines > start_index][1L]

# Read the contents of the table
exported_symbols <- objdump_results[(start_index + 1L):end_of_table]
exported_symbols <- gsub("\t", "", exported_symbols)
exported_symbols <- gsub(".*\\] ", "", exported_symbols)
exported_symbols <- gsub(" ", "", exported_symbols)

# Write R.def file
writeLines(
    text = c(
        paste0("LIBRARY \"", DLL_BASE_NAME, "\"")
        , "EXPORTS"
        , exported_symbols
    )
    , con = OUT_DEF_FILE
    , sep = "\n"
)
```

On Tue, May 12, 2020 at 2:39 AM Jeroen Ooms <jeroenooms at gmail.com> wrote:

> On Sun, May 10, 2020 at 11:31 PM James Lamb <jaylamb20 at gmail.com> wrote:
> >
> > Hello,
> >
> > I am a maintainer on the LightGBM project, focused on that project's R
> > package. The R package is not available on CRAN yet (we are working on
> it),
> > so for now our users must build it from source.
> >
> > The package includes compilation of a C++ library, and we link to R.dll /
> > R.so to use R-provided functions like Rprintf.
> >
> > With the release of R4.0 and Rtools40, we recently received reports from
> > our users that they are unable to build our package on Windows systems
> with
> > R 4.0 and Rtools 4.0 (https://github.com/microsoft/LightGBM/issues/3064
> ).
> >
> > After some investigation, I've learned that the following changes in
> > Rtools40 (relative to Rtools35) broke our installation process:
> >
> >    - *gendef.exe* was removed
> >    - *mingw32-make.exe* was removed
> >    - paths like "mingw_64/bin" were changed to "mingw64/bin"
> >
>
> Some utilities that were previously bundled with all rtools
> installations can now be installed with the package manager.
>
> To install gendef use:
>
>      pacman -S mingw-w64-{i686,x86_64}-tools
>
> To install mingw32-make.exe use:
>
>       pacman -S mingw-w64-{i686,x86_64}-make
>
> To install both of the at once you can use:
>
>       pacman -S mingw-w64-{i686,x86_64}-{tools,make}
>
> Note that it's often better to use 'make.exe' which is included with
> all rtools installations instead of mingw32-make.exe.
>
> These changes were a result of switching to an msys2 based toolchain.
> The default rtools40 installer only includes the things needed to
> build CRAN packages or base-R. Extra stuff such as system libraries,
> debuggers, cmake, etc, are all optionally available via the package
> manager.
>


-- 
James Lamb
GitHub <https://github.com/jameslamb> | Twitter
<https://twitter.com/_jameslamb> | LinkedIn
<https://www.linkedin.com/in/jameslamb1/>

	[[alternative HTML version deleted]]


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Thu May 14 09:30:23 2020
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Thu, 14 May 2020 07:30:23 +0000
Subject: [R-pkg-devel] MathJax for Rd files
In-Reply-To: <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
Message-ID: <HE1PR0102MB3258D08800995B3208965E77AEBC0@HE1PR0102MB3258.eurprd01.prod.exchangelabs.com>

The issue is not with Rstudio per se but that in devtools' development mode  help() is modified to show the Rd files in the source directory, as one would expect, but doesn't load the RdMacros. So, the issue appears when one is development mode. 

Rdpack::viewRd() can be of some help but it currently loads only the RdMacro's from its package.

Georgi Boshnakov

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Viechtbauer, Wolfgang (SP)
Sent: 13 May 2020 17:14
To: Helmut Sch?tz <helmut.schuetz at bebac.at>; tiagoolivoto at gmail.com; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] MathJax for Rd files

Thanks for the info! Can confirm now that I tried this (I don't usually use RStudio). That's an RStudio issue then. My guess is that 'Preview' uses tools::Rd2HTML() and that indeed won't automatically understand macros coming from mathjaxr (or any add-on package for that matter). This would be an issue to raise with the RStudio folks then.

But once a package is installed, the equations are nicely rendered also in the RStudio help browser, so that part works.

Best,
Wolfgang

>-----Original Message-----
>From: Helmut Sch?tz [mailto:helmut.schuetz at bebac.at]
>Sent: Wednesday, 13 May, 2020 17:01
>To: Viechtbauer, Wolfgang (SP); tiagoolivoto at gmail.com; 
>r-package-devel at r- project.org
>Subject: Re: [R-pkg-devel] MathJax for Rd files
>
>Hi Wolfgang,
>
>Viechtbauer, Wolfgang (SP) wrote on 2020-05-13 16:53:
>> Seems like you are using roxygen2. I have little experience with 
>> that, as
>all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).
>
>As are mine. ;-)
>In the HTML-preview of RStudio the LaTeX is indeed not parsed. I get it 
>only (in the HTML man-page and the PDF) if I build the package.
>
>Helmut
>
>--
>Ing. Helmut Sch?tz
>BEBAC?? Consultancy Services for
>Bioequivalence and Bioavailability Studies Neubaugasse 36/11
>1070 Vienna, Austria
>E helmut.schuetz at bebac.at
>W https://bebac.at/
>F https://forum.bebac.at/
______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel

From murdoch@dunc@n @end|ng |rom gm@||@com  Thu May 14 11:27:02 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 14 May 2020 05:27:02 -0400
Subject: [R-pkg-devel] MathJax for Rd files
In-Reply-To: <HE1PR0102MB3258D08800995B3208965E77AEBC0@HE1PR0102MB3258.eurprd01.prod.exchangelabs.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <HE1PR0102MB3258D08800995B3208965E77AEBC0@HE1PR0102MB3258.eurprd01.prod.exchangelabs.com>
Message-ID: <b6260e22-cc7a-bdbf-8615-4aec46e26bf7@gmail.com>

On 14/05/2020 3:30 a.m., Georgi Boshnakov wrote:
> The issue is not with Rstudio per se but that in devtools' development mode  help() is modified to show the Rd files in the source directory, as one would expect, but doesn't load the RdMacros. So, the issue appears when one is development mode.

Yes, the error appears to be in the pkgload::load_rd_macros() function 
here: 
https://github.com/r-lib/pkgload/blob/1b1adc39628671f2ea4256f0bebcdb76e1f89f45/R/dev-help.r#L47.

It doesn't look at the DESCRIPTION file to see if there's an RdMacros entry.

Duncan Murdoch

> 
> Rdpack::viewRd() can be of some help but it currently loads only the RdMacro's from its package.
> 
> Georgi Boshnakov
> 
> -----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Viechtbauer, Wolfgang (SP)
> Sent: 13 May 2020 17:14
> To: Helmut Sch?tz <helmut.schuetz at bebac.at>; tiagoolivoto at gmail.com; r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] MathJax for Rd files
> 
> Thanks for the info! Can confirm now that I tried this (I don't usually use RStudio). That's an RStudio issue then. My guess is that 'Preview' uses tools::Rd2HTML() and that indeed won't automatically understand macros coming from mathjaxr (or any add-on package for that matter). This would be an issue to raise with the RStudio folks then.
> 
> But once a package is installed, the equations are nicely rendered also in the RStudio help browser, so that part works.
> 
> Best,
> Wolfgang
> 
>> -----Original Message-----
>> From: Helmut Sch?tz [mailto:helmut.schuetz at bebac.at]
>> Sent: Wednesday, 13 May, 2020 17:01
>> To: Viechtbauer, Wolfgang (SP); tiagoolivoto at gmail.com;
>> r-package-devel at r- project.org
>> Subject: Re: [R-pkg-devel] MathJax for Rd files
>>
>> Hi Wolfgang,
>>
>> Viechtbauer, Wolfgang (SP) wrote on 2020-05-13 16:53:
>>> Seems like you are using roxygen2. I have little experience with
>>> that, as
>> all my Rd files are 'handcrafted' (plus 100% organic and biodegradable).
>>
>> As are mine. ;-)
>> In the HTML-preview of RStudio the LaTeX is indeed not parsed. I get it
>> only (in the HTML man-page and the PDF) if I build the package.
>>
>> Helmut
>>
>> --
>> Ing. Helmut Sch?tz
>> BEBAC?? Consultancy Services for
>> Bioequivalence and Bioavailability Studies Neubaugasse 36/11
>> 1070 Vienna, Austria
>> E helmut.schuetz at bebac.at
>> W https://bebac.at/
>> F https://forum.bebac.at/
> ______________________________________________
> R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu May 14 11:46:14 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 14 May 2020 10:46:14 +0100
Subject: [R-pkg-devel] MathJax for Rd files
In-Reply-To: <b6260e22-cc7a-bdbf-8615-4aec46e26bf7@gmail.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <HE1PR0102MB3258D08800995B3208965E77AEBC0@HE1PR0102MB3258.eurprd01.prod.exchangelabs.com>
 <b6260e22-cc7a-bdbf-8615-4aec46e26bf7@gmail.com>
Message-ID: <CABtg=KneGMoQPQMAnwkxmV5is7HA3-GKFy54PYxhpwyb4-JEKA@mail.gmail.com>

On Thu, May 14, 2020 at 10:27 AM Duncan Murdoch
<murdoch.duncan at gmail.com> wrote:
>
> On 14/05/2020 3:30 a.m., Georgi Boshnakov wrote:
> > The issue is not with Rstudio per se but that in devtools' development mode  help() is modified to show the Rd files in the source directory, as one would expect, but doesn't load the RdMacros. So, the issue appears when one is development mode.
>
> Yes, the error appears to be in the pkgload::load_rd_macros() function
> here:
> https://github.com/r-lib/pkgload/blob/1b1adc39628671f2ea4256f0bebcdb76e1f89f45/R/dev-help.r#L47.
>
> It doesn't look at the DESCRIPTION file to see if there's an RdMacros entry.

Isn't that what tools::loadPkgRdMacros() does there? I believe so.

Gabor

[...]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu May 14 13:29:08 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 14 May 2020 07:29:08 -0400
Subject: [R-pkg-devel] MathJax for Rd files
In-Reply-To: <CABtg=KneGMoQPQMAnwkxmV5is7HA3-GKFy54PYxhpwyb4-JEKA@mail.gmail.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <HE1PR0102MB3258D08800995B3208965E77AEBC0@HE1PR0102MB3258.eurprd01.prod.exchangelabs.com>
 <b6260e22-cc7a-bdbf-8615-4aec46e26bf7@gmail.com>
 <CABtg=KneGMoQPQMAnwkxmV5is7HA3-GKFy54PYxhpwyb4-JEKA@mail.gmail.com>
Message-ID: <909edde9-73d2-ae5b-e089-942fdc3df782@gmail.com>

On 14/05/2020 5:46 a.m., G?bor Cs?rdi wrote:
> On Thu, May 14, 2020 at 10:27 AM Duncan Murdoch
> <murdoch.duncan at gmail.com> wrote:
>>
>> On 14/05/2020 3:30 a.m., Georgi Boshnakov wrote:
>>> The issue is not with Rstudio per se but that in devtools' development mode  help() is modified to show the Rd files in the source directory, as one would expect, but doesn't load the RdMacros. So, the issue appears when one is development mode.
>>
>> Yes, the error appears to be in the pkgload::load_rd_macros() function
>> here:
>> https://github.com/r-lib/pkgload/blob/1b1adc39628671f2ea4256f0bebcdb76e1f89f45/R/dev-help.r#L47.
>>
>> It doesn't look at the DESCRIPTION file to see if there's an RdMacros entry.
> 
> Isn't that what tools::loadPkgRdMacros() does there? I believe so.

Yes, you're right.  So it's not clear why the preview isn't working.

Duncan Murdoch


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Thu May 14 13:37:07 2020
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Thu, 14 May 2020 11:37:07 +0000
Subject: [R-pkg-devel] MathJax for Rd files
In-Reply-To: <909edde9-73d2-ae5b-e089-942fdc3df782@gmail.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <HE1PR0102MB3258D08800995B3208965E77AEBC0@HE1PR0102MB3258.eurprd01.prod.exchangelabs.com>
 <b6260e22-cc7a-bdbf-8615-4aec46e26bf7@gmail.com>
 <CABtg=KneGMoQPQMAnwkxmV5is7HA3-GKFy54PYxhpwyb4-JEKA@mail.gmail.com>
 <909edde9-73d2-ae5b-e089-942fdc3df782@gmail.com>
Message-ID: <HE1PR0102MB3258032B11335E9E3911E568AEBC0@HE1PR0102MB3258.eurprd01.prod.exchangelabs.com>

I don't know if this helps but I have the following note in  viewRd() (from 2017!) at https://github.com/GeoBosh/Rdpack/blob/81af94d0e690b9f02275e89d474ce184d63fb044/R/bib.R

...
    ## TODO: (BUG) e is NULL under RStudio
    e <- tools::loadPkgRdMacros(system.file(package = "Rdpack"))
## Rdo <- parse_Rd(infile, macros = e)
...

Maybe I have forgotten to delete the note after fixing that since it works  (I just checked in Rstudio) but maybe that's the reason I restricted it to just macros in Rdpack.

Georgi Boshnakov


-----Original Message-----
From: Duncan Murdoch <murdoch.duncan at gmail.com> 
Sent: 14 May 2020 12:29
To: G?bor Cs?rdi <csardi.gabor at gmail.com>
Cc: Georgi Boshnakov <georgi.boshnakov at manchester.ac.uk>; Viechtbauer, Wolfgang (SP) <wolfgang.viechtbauer at maastrichtuniversity.nl>; Helmut Sch?tz <helmut.schuetz at bebac.at>; tiagoolivoto at gmail.com; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] MathJax for Rd files

On 14/05/2020 5:46 a.m., G?bor Cs?rdi wrote:
> On Thu, May 14, 2020 at 10:27 AM Duncan Murdoch 
> <murdoch.duncan at gmail.com> wrote:
>>
>> On 14/05/2020 3:30 a.m., Georgi Boshnakov wrote:
>>> The issue is not with Rstudio per se but that in devtools' development mode  help() is modified to show the Rd files in the source directory, as one would expect, but doesn't load the RdMacros. So, the issue appears when one is development mode.
>>
>> Yes, the error appears to be in the pkgload::load_rd_macros() 
>> function
>> here:
>> https://github.com/r-lib/pkgload/blob/1b1adc39628671f2ea4256f0bebcdb76e1f89f45/R/dev-help.r#L47.
>>
>> It doesn't look at the DESCRIPTION file to see if there's an RdMacros entry.
> 
> Isn't that what tools::loadPkgRdMacros() does there? I believe so.

Yes, you're right.  So it's not clear why the preview isn't working.

Duncan Murdoch

From murdoch@dunc@n @end|ng |rom gm@||@com  Thu May 14 14:21:43 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 14 May 2020 08:21:43 -0400
Subject: [R-pkg-devel] MathJax for Rd files
In-Reply-To: <CABtg=KneGMoQPQMAnwkxmV5is7HA3-GKFy54PYxhpwyb4-JEKA@mail.gmail.com>
References: <000001d628f3$6eccfc60$4c66f520$@gmail.com>
 <91ddcb3d9fc74fbcb75d4865c815759e@UM-MAIL3214.unimaas.nl>
 <001001d62931$8b703010$a2509030$@gmail.com>
 <680041cad2b745c68335aa123c1c63f8@UM-MAIL3214.unimaas.nl>
 <c867c88b-a00c-681c-ef18-e0c588cc29db@bebac.at>
 <348d13f751a044bfb0ce70c292f12c48@UM-MAIL3214.unimaas.nl>
 <HE1PR0102MB3258D08800995B3208965E77AEBC0@HE1PR0102MB3258.eurprd01.prod.exchangelabs.com>
 <b6260e22-cc7a-bdbf-8615-4aec46e26bf7@gmail.com>
 <CABtg=KneGMoQPQMAnwkxmV5is7HA3-GKFy54PYxhpwyb4-JEKA@mail.gmail.com>
Message-ID: <ea6fb5f0-9a0c-a211-37e8-f3f109a0db5c@gmail.com>

On 14/05/2020 5:46 a.m., G?bor Cs?rdi wrote:
> On Thu, May 14, 2020 at 10:27 AM Duncan Murdoch
> <murdoch.duncan at gmail.com> wrote:
>>
>> On 14/05/2020 3:30 a.m., Georgi Boshnakov wrote:
>>> The issue is not with Rstudio per se but that in devtools' development mode  help() is modified to show the Rd files in the source directory, as one would expect, but doesn't load the RdMacros. So, the issue appears when one is development mode.
>>
>> Yes, the error appears to be in the pkgload::load_rd_macros() function
>> here:
>> https://github.com/r-lib/pkgload/blob/1b1adc39628671f2ea4256f0bebcdb76e1f89f45/R/dev-help.r#L47.
>>
>> It doesn't look at the DESCRIPTION file to see if there's an RdMacros entry.
> 
> Isn't that what tools::loadPkgRdMacros() does there? I believe so.

I think I've tracked it down correctly this time.

The problem appears to be in RStudio code called by 
pkgload::print.dev_Topic. That function correctly loads the macros, but 
has this code:

     if (rstudioapi::hasFun("previewRd")) {
       rstudioapi::callFun("previewRd", x$path)
       return(invisible())
     }

(This is here: 
https://github.com/r-lib/pkgload/blob/1b1adc39628671f2ea4256f0bebcdb76e1f89f45/R/dev-help.r#L68 
.)

This never passes the macros to the preview code built in to RStudio. 
The function in RStudio is here: 
https://github.com/rstudio/rstudio/blob/2596a760603e06251cce829f236f57c5eff048c9/src/cpp/r/R/Api.R#L101 
.  It only accepts one argument, rather than the two that are needed.

Duncan Murdoch


From p@u|h|bb|ng @end|ng |rom gm@||@com  Thu May 14 17:36:05 2020
From: p@u|h|bb|ng @end|ng |rom gm@||@com (Paul Hibbing)
Date: Thu, 14 May 2020 11:36:05 -0400
Subject: [R-pkg-devel] Help Debugging Debian Error
Message-ID: <CANA-rNN-m5d-FPt8ZCSWNWdLOTA-LV8o-GWU_zLbGMKoi+m5tA@mail.gmail.com>

Hi all,

At some point (I believe within the last week or so), my package
`PAutilities` has developed the following error for
r-devel-linux-x86_64-debian-gcc:

* checking tests ... [3s/3s] ERROR
  Running ?testthat.R? [3s/3s]
Running the tests in ?tests/testthat.R? failed.
Complete output:
  > library(testthat)
  > library(PAutilities)
  package 'PAutilities' was built under R version 3.5.0
  >
  > test_check("PAutilities")

I get the same error using `rhub::check_on_debian`, but not
`rhub::check(platform = "debian-gcc-devel")`.

So far, my best guesses have been that issues were caused by either a
dependency problem (particularly the `matchingMarkets` package, which
has given me trouble in the past), or with the major increment in R
itself. But so far neither of those ideas have yielded much fruit. Any
other ideas, considerations, or things I should be aware of? I'm
working on installing a virtual machine to see about some manual
debugging, but I would love some guidance in the meantime.

Best,
Paul Hibbing


From p@u|h|bb|ng @end|ng |rom gm@||@com  Thu May 14 17:41:49 2020
From: p@u|h|bb|ng @end|ng |rom gm@||@com (Paul Hibbing)
Date: Thu, 14 May 2020 11:41:49 -0400
Subject: [R-pkg-devel] Help Debugging Debian Error
In-Reply-To: <CANA-rNN-m5d-FPt8ZCSWNWdLOTA-LV8o-GWU_zLbGMKoi+m5tA@mail.gmail.com>
References: <CANA-rNN-m5d-FPt8ZCSWNWdLOTA-LV8o-GWU_zLbGMKoi+m5tA@mail.gmail.com>
Message-ID: <CANA-rNMw4co816RdZdHv5L=q1vRrwKj=ZWdGZio-chD4BujNQg@mail.gmail.com>

* Here is the CRAN check (devel version 2020-05-13):

https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-gcc/PAutilities-00check.html

* Here is the successful R-hub check (devel version 2020-05-10):

https://artifacts.r-hub.io/PAutilities_1.0.0.tar.gz-43f919fd5595416799d74bfb312fdd34/PAutilities.Rcheck/00check.log

* Here is the unsuccessful R-hub check (R 3.6.3)

https://artifacts.r-hub.io/PAutilities_1.0.0.tar.gz-c1592e94abe04155933d5dfe5898c1b8/PAutilities.Rcheck/00check.log

On Thu, May 14, 2020 at 11:36 AM Paul Hibbing <paulhibbing at gmail.com> wrote:
>
> Hi all,
>
> At some point (I believe within the last week or so), my package
> `PAutilities` has developed the following error for
> r-devel-linux-x86_64-debian-gcc:
>
> * checking tests ... [3s/3s] ERROR
>   Running ?testthat.R? [3s/3s]
> Running the tests in ?tests/testthat.R? failed.
> Complete output:
>   > library(testthat)
>   > library(PAutilities)
>   package 'PAutilities' was built under R version 3.5.0
>   >
>   > test_check("PAutilities")
>
> I get the same error using `rhub::check_on_debian`, but not
> `rhub::check(platform = "debian-gcc-devel")`.
>
> So far, my best guesses have been that issues were caused by either a
> dependency problem (particularly the `matchingMarkets` package, which
> has given me trouble in the past), or with the major increment in R
> itself. But so far neither of those ideas have yielded much fruit. Any
> other ideas, considerations, or things I should be aware of? I'm
> working on installing a virtual machine to see about some manual
> debugging, but I would love some guidance in the meantime.
>
> Best,
> Paul Hibbing


From w@r@||e|@berger @end|ng |rom un|@tr@@|r  Thu May 14 20:02:35 2020
From: w@r@||e|@berger @end|ng |rom un|@tr@@|r (RAFFELSBERGER Wolfgang (IGBMC))
Date: Thu, 14 May 2020 20:02:35 +0200 (CEST)
Subject: [R-pkg-devel] package submission rejected "checking CRAN incoming
 feasibility ... NOTE"
Message-ID: <1519218419.549411.1589479355957.JavaMail.zimbra@unistra.fr>

Dear expeRts, 

when trying to submit a new package of mine, my submission was rejected during automic incoming checks. 
In fact on Windows it says Status: 1 NOTE 
This note says: 
* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Wolfgang Raffelsberger <w.raffelsberger at unistra.fr>'

New submission 
On my previous submissions I always had this message and it never posed a problem. 
When reading up on this issue I also find no suggestions how to avoid or explanations what problem this reflects to, see [ https://stackoverflow.com/questions/23829978/checking-cran-incoming-feasibility-note-maintainer | https://stackoverflow.com/questions/23829978/checking-cran-incoming-feasibility-note-maintainer ] . 

Automatic checking on Debian also lists a second NOTE concerning the presence of files not directly related to my package : 
* checking for detritus in the temp directory ... NOTE
Found the following files/directories:
  ?calibre_4.99.5_tmp_4_1f_nbo? ?calibre_4.99.5_tmp_94i_sjvs?
  ?calibre_4.99.5_tmp_l2if0v8a? ?calibre_4.99.5_tmp_oxc2vtjx?
  ?runtime-hornik?
* DONE
Status: 2 NOTEs 

These packages seem to be related to files generated during the automatic checks... 

What do you suggest ? 
Thank's in advance, 
Wolfgang 


	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Fri May 15 03:08:07 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 14 May 2020 20:08:07 -0500
Subject: [R-pkg-devel] Help Debugging Debian Error
In-Reply-To: <CANA-rNMw4co816RdZdHv5L=q1vRrwKj=ZWdGZio-chD4BujNQg@mail.gmail.com>
References: <CANA-rNN-m5d-FPt8ZCSWNWdLOTA-LV8o-GWU_zLbGMKoi+m5tA@mail.gmail.com>
 <CANA-rNMw4co816RdZdHv5L=q1vRrwKj=ZWdGZio-chD4BujNQg@mail.gmail.com>
Message-ID: <24253.60279.763106.287393@rob.eddelbuettel.com>


On 14 May 2020 at 11:41, Paul Hibbing wrote:
| * Here is the CRAN check (devel version 2020-05-13):
| 
| https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-gcc/PAutilities-00check.html
| 
| * Here is the successful R-hub check (devel version 2020-05-10):
| 
| https://artifacts.r-hub.io/PAutilities_1.0.0.tar.gz-43f919fd5595416799d74bfb312fdd34/PAutilities.Rcheck/00check.log
| 
| * Here is the unsuccessful R-hub check (R 3.6.3)
| 
| https://artifacts.r-hub.io/PAutilities_1.0.0.tar.gz-c1592e94abe04155933d5dfe5898c1b8/PAutilities.Rcheck/00check.log

Hm, doesn't that simply mean that this r-hub box is out of sync?

So maybe file an issue at the rhub github repo, and test with another of the
(many!)  available platforms at rhub -- run rhub::platforms() to see.

Dirk
 
| On Thu, May 14, 2020 at 11:36 AM Paul Hibbing <paulhibbing at gmail.com> wrote:
| >
| > Hi all,
| >
| > At some point (I believe within the last week or so), my package
| > `PAutilities` has developed the following error for
| > r-devel-linux-x86_64-debian-gcc:
| >
| > * checking tests ... [3s/3s] ERROR
| >   Running ?testthat.R? [3s/3s]
| > Running the tests in ?tests/testthat.R? failed.
| > Complete output:
| >   > library(testthat)
| >   > library(PAutilities)
| >   package 'PAutilities' was built under R version 3.5.0
| >   >
| >   > test_check("PAutilities")
| >
| > I get the same error using `rhub::check_on_debian`, but not
| > `rhub::check(platform = "debian-gcc-devel")`.
| >
| > So far, my best guesses have been that issues were caused by either a
| > dependency problem (particularly the `matchingMarkets` package, which
| > has given me trouble in the past), or with the major increment in R
| > itself. But so far neither of those ideas have yielded much fruit. Any
| > other ideas, considerations, or things I should be aware of? I'm
| > working on installing a virtual machine to see about some manual
| > debugging, but I would love some guidance in the meantime.
| >
| > Best,
| > Paul Hibbing
| 
| ______________________________________________
| R-package-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From c@@rd|@g@bor @end|ng |rom gm@||@com  Fri May 15 03:30:24 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Fri, 15 May 2020 02:30:24 +0100
Subject: [R-pkg-devel] Help Debugging Debian Error
In-Reply-To: <24253.60279.763106.287393@rob.eddelbuettel.com>
References: <CANA-rNN-m5d-FPt8ZCSWNWdLOTA-LV8o-GWU_zLbGMKoi+m5tA@mail.gmail.com>
 <CANA-rNMw4co816RdZdHv5L=q1vRrwKj=ZWdGZio-chD4BujNQg@mail.gmail.com>
 <24253.60279.763106.287393@rob.eddelbuettel.com>
Message-ID: <CABtg=Kn-Q8LVBaMUC=VuigWZbZpvs5qLdU4=Pf=57d5rZbL4Jw@mail.gmail.com>

It is unlikely that this is an R-hub issue because the first link is
CRAN's machine, and the same error happens there.

I can reproduce it on macOS:

git clone https://github.com/paulhibbing/PAutilities
R CMD INSTALL PAutilities

R -q -e 'packageDescription("PAutilities")$Built'
#> > packageDescription("PAutilities")$Built
#> [1] "R 3.6.2; x86_64-apple-darwin15.6.0; 2020-05-15 01:24:03 UTC; unix"

R -q -e "library(PAutilities)"
#> > library(PAutilities)
#> package 'PAutilities' was built under R version 3.5.0

I have no clue how this can happen, I clearly just built it on R 3.6.3

Gabor

On Fri, May 15, 2020 at 2:08 AM Dirk Eddelbuettel <edd at debian.org> wrote:
>
> On 14 May 2020 at 11:41, Paul Hibbing wrote:
> | * Here is the CRAN check (devel version 2020-05-13):
> |
> | https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-gcc/PAutilities-00check.html
> |
> | * Here is the successful R-hub check (devel version 2020-05-10):
> |
> | https://artifacts.r-hub.io/PAutilities_1.0.0.tar.gz-43f919fd5595416799d74bfb312fdd34/PAutilities.Rcheck/00check.log
> |
> | * Here is the unsuccessful R-hub check (R 3.6.3)
> |
> | https://artifacts.r-hub.io/PAutilities_1.0.0.tar.gz-c1592e94abe04155933d5dfe5898c1b8/PAutilities.Rcheck/00check.log
>
> Hm, doesn't that simply mean that this r-hub box is out of sync?
>
> So maybe file an issue at the rhub github repo, and test with another of the
> (many!)  available platforms at rhub -- run rhub::platforms() to see.
>
> Dirk
>
> | On Thu, May 14, 2020 at 11:36 AM Paul Hibbing <paulhibbing at gmail.com> wrote:
> | >
> | > Hi all,
> | >
> | > At some point (I believe within the last week or so), my package
> | > `PAutilities` has developed the following error for
> | > r-devel-linux-x86_64-debian-gcc:
> | >
> | > * checking tests ... [3s/3s] ERROR
> | >   Running ?testthat.R? [3s/3s]
> | > Running the tests in ?tests/testthat.R? failed.
> | > Complete output:
> | >   > library(testthat)
> | >   > library(PAutilities)
> | >   package 'PAutilities' was built under R version 3.5.0
> | >   >
> | >   > test_check("PAutilities")
> | >
> | > I get the same error using `rhub::check_on_debian`, but not
> | > `rhub::check(platform = "debian-gcc-devel")`.
> | >
> | > So far, my best guesses have been that issues were caused by either a
> | > dependency problem (particularly the `matchingMarkets` package, which
> | > has given me trouble in the past), or with the major increment in R
> | > itself. But so far neither of those ideas have yielded much fruit. Any
> | > other ideas, considerations, or things I should be aware of? I'm
> | > working on installing a virtual machine to see about some manual
> | > debugging, but I would love some guidance in the meantime.
> | >
> | > Best,
> | > Paul Hibbing
> |
> | ______________________________________________
> | R-package-devel at r-project.org mailing list
> | https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From c@@rd|@g@bor @end|ng |rom gm@||@com  Fri May 15 04:03:38 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Fri, 15 May 2020 03:03:38 +0100
Subject: [R-pkg-devel] Help Debugging Debian Error
In-Reply-To: <CABtg=Kn-Q8LVBaMUC=VuigWZbZpvs5qLdU4=Pf=57d5rZbL4Jw@mail.gmail.com>
References: <CANA-rNN-m5d-FPt8ZCSWNWdLOTA-LV8o-GWU_zLbGMKoi+m5tA@mail.gmail.com>
 <CANA-rNMw4co816RdZdHv5L=q1vRrwKj=ZWdGZio-chD4BujNQg@mail.gmail.com>
 <24253.60279.763106.287393@rob.eddelbuettel.com>
 <CABtg=Kn-Q8LVBaMUC=VuigWZbZpvs5qLdU4=Pf=57d5rZbL4Jw@mail.gmail.com>
Message-ID: <CABtg=Kk90nFAWs2KPPbnbj6EArr=Qc9dq5Rbq662gnHhWHD1jw@mail.gmail.com>

Apparently, this is not a warning, but the package itself is printing
it as a startup message:
https://github.com/cran/PAutilities/blob/ada73d8d44177c12867cc385cdca0054885ddae3/R/zzz.R#L5

Gabor

On Fri, May 15, 2020 at 2:30 AM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>
> It is unlikely that this is an R-hub issue because the first link is
> CRAN's machine, and the same error happens there.
>
> I can reproduce it on macOS:
>
> git clone https://github.com/paulhibbing/PAutilities
> R CMD INSTALL PAutilities
>
> R -q -e 'packageDescription("PAutilities")$Built'
> #> > packageDescription("PAutilities")$Built
> #> [1] "R 3.6.2; x86_64-apple-darwin15.6.0; 2020-05-15 01:24:03 UTC; unix"
>
> R -q -e "library(PAutilities)"
> #> > library(PAutilities)
> #> package 'PAutilities' was built under R version 3.5.0
>
> I have no clue how this can happen, I clearly just built it on R 3.6.3
>
> Gabor
>
> On Fri, May 15, 2020 at 2:08 AM Dirk Eddelbuettel <edd at debian.org> wrote:
> >
> > On 14 May 2020 at 11:41, Paul Hibbing wrote:
> > | * Here is the CRAN check (devel version 2020-05-13):
> > |
> > | https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-gcc/PAutilities-00check.html
> > |
> > | * Here is the successful R-hub check (devel version 2020-05-10):
> > |
> > | https://artifacts.r-hub.io/PAutilities_1.0.0.tar.gz-43f919fd5595416799d74bfb312fdd34/PAutilities.Rcheck/00check.log
> > |
> > | * Here is the unsuccessful R-hub check (R 3.6.3)
> > |
> > | https://artifacts.r-hub.io/PAutilities_1.0.0.tar.gz-c1592e94abe04155933d5dfe5898c1b8/PAutilities.Rcheck/00check.log
> >
> > Hm, doesn't that simply mean that this r-hub box is out of sync?
> >
> > So maybe file an issue at the rhub github repo, and test with another of the
> > (many!)  available platforms at rhub -- run rhub::platforms() to see.
> >
> > Dirk
> >
> > | On Thu, May 14, 2020 at 11:36 AM Paul Hibbing <paulhibbing at gmail.com> wrote:
> > | >
> > | > Hi all,
> > | >
> > | > At some point (I believe within the last week or so), my package
> > | > `PAutilities` has developed the following error for
> > | > r-devel-linux-x86_64-debian-gcc:
> > | >
> > | > * checking tests ... [3s/3s] ERROR
> > | >   Running ?testthat.R? [3s/3s]
> > | > Running the tests in ?tests/testthat.R? failed.
> > | > Complete output:
> > | >   > library(testthat)
> > | >   > library(PAutilities)
> > | >   package 'PAutilities' was built under R version 3.5.0
> > | >   >
> > | >   > test_check("PAutilities")
> > | >
> > | > I get the same error using `rhub::check_on_debian`, but not
> > | > `rhub::check(platform = "debian-gcc-devel")`.
> > | >
> > | > So far, my best guesses have been that issues were caused by either a
> > | > dependency problem (particularly the `matchingMarkets` package, which
> > | > has given me trouble in the past), or with the major increment in R
> > | > itself. But so far neither of those ideas have yielded much fruit. Any
> > | > other ideas, considerations, or things I should be aware of? I'm
> > | > working on installing a virtual machine to see about some manual
> > | > debugging, but I would love some guidance in the meantime.
> > | >
> > | > Best,
> > | > Paul Hibbing
> > |
> > | ______________________________________________
> > | R-package-devel at r-project.org mailing list
> > | https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > --
> > http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From p@u|h|bb|ng @end|ng |rom gm@||@com  Fri May 15 04:12:40 2020
From: p@u|h|bb|ng @end|ng |rom gm@||@com (Paul Hibbing)
Date: Thu, 14 May 2020 22:12:40 -0400
Subject: [R-pkg-devel] Help Debugging Debian Error
In-Reply-To: <CABtg=Kk90nFAWs2KPPbnbj6EArr=Qc9dq5Rbq662gnHhWHD1jw@mail.gmail.com>
References: <CANA-rNN-m5d-FPt8ZCSWNWdLOTA-LV8o-GWU_zLbGMKoi+m5tA@mail.gmail.com>
 <CANA-rNMw4co816RdZdHv5L=q1vRrwKj=ZWdGZio-chD4BujNQg@mail.gmail.com>
 <24253.60279.763106.287393@rob.eddelbuettel.com>
 <CABtg=Kn-Q8LVBaMUC=VuigWZbZpvs5qLdU4=Pf=57d5rZbL4Jw@mail.gmail.com>
 <CABtg=Kk90nFAWs2KPPbnbj6EArr=Qc9dq5Rbq662gnHhWHD1jw@mail.gmail.com>
Message-ID: <CANA-rNOaZy_rihxVHn2v4FZ20hjQp-MnRE7E=Jh4yZAk4-TJVA@mail.gmail.com>

Ah, I hadn't considered that the startup message could be the problem
- I thought the point of startup messages was to be distinct from
errors and warnings, so I wouldn't have expected that to trip up R CMD
Check. I assumed the failure was occurring somewhere inside the actual
code for my unit tests... I will see if removing the startup message
fixes things.

Paul

On Thu, May 14, 2020 at 10:03 PM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>
> Apparently, this is not a warning, but the package itself is printing
> it as a startup message:
> https://github.com/cran/PAutilities/blob/ada73d8d44177c12867cc385cdca0054885ddae3/R/zzz.R#L5
>
> Gabor
>
> On Fri, May 15, 2020 at 2:30 AM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> >
> > It is unlikely that this is an R-hub issue because the first link is
> > CRAN's machine, and the same error happens there.
> >
> > I can reproduce it on macOS:
> >
> > git clone https://github.com/paulhibbing/PAutilities
> > R CMD INSTALL PAutilities
> >
> > R -q -e 'packageDescription("PAutilities")$Built'
> > #> > packageDescription("PAutilities")$Built
> > #> [1] "R 3.6.2; x86_64-apple-darwin15.6.0; 2020-05-15 01:24:03 UTC; unix"
> >
> > R -q -e "library(PAutilities)"
> > #> > library(PAutilities)
> > #> package 'PAutilities' was built under R version 3.5.0
> >
> > I have no clue how this can happen, I clearly just built it on R 3.6.3
> >
> > Gabor
> >
> > On Fri, May 15, 2020 at 2:08 AM Dirk Eddelbuettel <edd at debian.org> wrote:
> > >
> > > On 14 May 2020 at 11:41, Paul Hibbing wrote:
> > > | * Here is the CRAN check (devel version 2020-05-13):
> > > |
> > > | https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-gcc/PAutilities-00check.html
> > > |
> > > | * Here is the successful R-hub check (devel version 2020-05-10):
> > > |
> > > | https://artifacts.r-hub.io/PAutilities_1.0.0.tar.gz-43f919fd5595416799d74bfb312fdd34/PAutilities.Rcheck/00check.log
> > > |
> > > | * Here is the unsuccessful R-hub check (R 3.6.3)
> > > |
> > > | https://artifacts.r-hub.io/PAutilities_1.0.0.tar.gz-c1592e94abe04155933d5dfe5898c1b8/PAutilities.Rcheck/00check.log
> > >
> > > Hm, doesn't that simply mean that this r-hub box is out of sync?
> > >
> > > So maybe file an issue at the rhub github repo, and test with another of the
> > > (many!)  available platforms at rhub -- run rhub::platforms() to see.
> > >
> > > Dirk
> > >
> > > | On Thu, May 14, 2020 at 11:36 AM Paul Hibbing <paulhibbing at gmail.com> wrote:
> > > | >
> > > | > Hi all,
> > > | >
> > > | > At some point (I believe within the last week or so), my package
> > > | > `PAutilities` has developed the following error for
> > > | > r-devel-linux-x86_64-debian-gcc:
> > > | >
> > > | > * checking tests ... [3s/3s] ERROR
> > > | >   Running ?testthat.R? [3s/3s]
> > > | > Running the tests in ?tests/testthat.R? failed.
> > > | > Complete output:
> > > | >   > library(testthat)
> > > | >   > library(PAutilities)
> > > | >   package 'PAutilities' was built under R version 3.5.0
> > > | >   >
> > > | >   > test_check("PAutilities")
> > > | >
> > > | > I get the same error using `rhub::check_on_debian`, but not
> > > | > `rhub::check(platform = "debian-gcc-devel")`.
> > > | >
> > > | > So far, my best guesses have been that issues were caused by either a
> > > | > dependency problem (particularly the `matchingMarkets` package, which
> > > | > has given me trouble in the past), or with the major increment in R
> > > | > itself. But so far neither of those ideas have yielded much fruit. Any
> > > | > other ideas, considerations, or things I should be aware of? I'm
> > > | > working on installing a virtual machine to see about some manual
> > > | > debugging, but I would love some guidance in the meantime.
> > > | >
> > > | > Best,
> > > | > Paul Hibbing
> > > |
> > > | ______________________________________________
> > > | R-package-devel at r-project.org mailing list
> > > | https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> > > --
> > > http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Fri May 15 04:26:03 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 14 May 2020 21:26:03 -0500
Subject: [R-pkg-devel] Help Debugging Debian Error
In-Reply-To: <CABtg=Kn-Q8LVBaMUC=VuigWZbZpvs5qLdU4=Pf=57d5rZbL4Jw@mail.gmail.com>
References: <CANA-rNN-m5d-FPt8ZCSWNWdLOTA-LV8o-GWU_zLbGMKoi+m5tA@mail.gmail.com>
 <CANA-rNMw4co816RdZdHv5L=q1vRrwKj=ZWdGZio-chD4BujNQg@mail.gmail.com>
 <24253.60279.763106.287393@rob.eddelbuettel.com>
 <CABtg=Kn-Q8LVBaMUC=VuigWZbZpvs5qLdU4=Pf=57d5rZbL4Jw@mail.gmail.com>
Message-ID: <24253.64955.905516.838795@rob.eddelbuettel.com>


On 15 May 2020 at 02:30, G?bor Cs?rdi wrote:
| It is unlikely that this is an R-hub issue because the first link is
| CRAN's machine, and the same error happens there.

My bad, sorry -- I read the original email(s) wrong.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From p@u|h|bb|ng @end|ng |rom gm@||@com  Fri May 15 09:50:12 2020
From: p@u|h|bb|ng @end|ng |rom gm@||@com (Paul Hibbing)
Date: Fri, 15 May 2020 03:50:12 -0400
Subject: [R-pkg-devel] Help Debugging Debian Error
In-Reply-To: <24253.64955.905516.838795@rob.eddelbuettel.com>
References: <CANA-rNN-m5d-FPt8ZCSWNWdLOTA-LV8o-GWU_zLbGMKoi+m5tA@mail.gmail.com>
 <CANA-rNMw4co816RdZdHv5L=q1vRrwKj=ZWdGZio-chD4BujNQg@mail.gmail.com>
 <24253.60279.763106.287393@rob.eddelbuettel.com>
 <CABtg=Kn-Q8LVBaMUC=VuigWZbZpvs5qLdU4=Pf=57d5rZbL4Jw@mail.gmail.com>
 <24253.64955.905516.838795@rob.eddelbuettel.com>
Message-ID: <CANA-rNOZk7E+mR4C-wiNWkwjvs2QgjytJo8Z87-BzO5PKUgGug@mail.gmail.com>

Removing the startup message did not resolve the issue. Now I have just:

* checking tests ...
  Running ?testthat.R?
 ERROR
Running the tests in ?tests/testthat.R? failed.
Complete output:
  > library(testthat)
  > library(PAutilities)
  >
  > test_check("PAutilities")

See https://artifacts.r-hub.io/PAutilities_1.0.0.tar.gz-6f71309b168b4e65a685775a20764c70/PAutilities.Rcheck/00check.log

Paul


On Fri, May 15, 2020 at 2:34 AM Dirk Eddelbuettel <edd at debian.org> wrote:
>
>
> On 15 May 2020 at 02:30, G?bor Cs?rdi wrote:
> | It is unlikely that this is an R-hub issue because the first link is
> | CRAN's machine, and the same error happens there.
>
> My bad, sorry -- I read the original email(s) wrong.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From kry|ov@r00t @end|ng |rom gm@||@com  Fri May 15 11:00:02 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 15 May 2020 12:00:02 +0300
Subject: [R-pkg-devel] Help Debugging Debian Error
In-Reply-To: <CANA-rNOZk7E+mR4C-wiNWkwjvs2QgjytJo8Z87-BzO5PKUgGug@mail.gmail.com>
References: <CANA-rNN-m5d-FPt8ZCSWNWdLOTA-LV8o-GWU_zLbGMKoi+m5tA@mail.gmail.com>
 <CANA-rNMw4co816RdZdHv5L=q1vRrwKj=ZWdGZio-chD4BujNQg@mail.gmail.com>
 <24253.60279.763106.287393@rob.eddelbuettel.com>
 <CABtg=Kn-Q8LVBaMUC=VuigWZbZpvs5qLdU4=Pf=57d5rZbL4Jw@mail.gmail.com>
 <24253.64955.905516.838795@rob.eddelbuettel.com>
 <CANA-rNOZk7E+mR4C-wiNWkwjvs2QgjytJo8Z87-BzO5PKUgGug@mail.gmail.com>
Message-ID: <20200515120002.3754f3f2@Tarkus>

On Fri, 15 May 2020 03:50:12 -0400
Paul Hibbing <paulhibbing at gmail.com> wrote:

> Complete output:
>   > library(testthat)
>   > library(PAutilities)
>   >
>   > test_check("PAutilities")  

It seems to me that the R process crashes while running your tests, but
since testthat::test_check captures everything to summarise it later,
you don't get to know where the crash occurs.

Perhaps if you (temporarily) move your tests out of testthat/
subdirectory and remove the context() and testthat::test_that("...",
{ ... }) calls, you would be able to see the exact location of the
crash in the *.Rout files?

That said, it's probably one of your dependencies that's responsible
for the crash, not your package, since there is no compiled code.

-- 
Best regards,
Ivan


From c@@rd|@g@bor @end|ng |rom gm@||@com  Fri May 15 11:05:48 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Fri, 15 May 2020 10:05:48 +0100
Subject: [R-pkg-devel] Help Debugging Debian Error
In-Reply-To: <20200515120002.3754f3f2@Tarkus>
References: <CANA-rNN-m5d-FPt8ZCSWNWdLOTA-LV8o-GWU_zLbGMKoi+m5tA@mail.gmail.com>
 <CANA-rNMw4co816RdZdHv5L=q1vRrwKj=ZWdGZio-chD4BujNQg@mail.gmail.com>
 <24253.60279.763106.287393@rob.eddelbuettel.com>
 <CABtg=Kn-Q8LVBaMUC=VuigWZbZpvs5qLdU4=Pf=57d5rZbL4Jw@mail.gmail.com>
 <24253.64955.905516.838795@rob.eddelbuettel.com>
 <CANA-rNOZk7E+mR4C-wiNWkwjvs2QgjytJo8Z87-BzO5PKUgGug@mail.gmail.com>
 <20200515120002.3754f3f2@Tarkus>
Message-ID: <CABtg=Km4DDNeU42Dj4ROUVyJ_Sxgq345gaq4Qms=HiXBECSNHQ@mail.gmail.com>

You don't need to move the files around, though, just use a more
verbose testthat reporter, e.g. in testthat.R use

test_check("PAutilities", reporter = "summary")

and then at least you'll know where it crashes. But to fix this,
you'll probably need to debug it locally. You can do that in Docker if
you don't have a local Linux machine.

Gabor

On Fri, May 15, 2020 at 10:00 AM Ivan Krylov <krylov.r00t at gmail.com> wrote:
>
> On Fri, 15 May 2020 03:50:12 -0400
> Paul Hibbing <paulhibbing at gmail.com> wrote:
>
> > Complete output:
> >   > library(testthat)
> >   > library(PAutilities)
> >   >
> >   > test_check("PAutilities")
>
> It seems to me that the R process crashes while running your tests, but
> since testthat::test_check captures everything to summarise it later,
> you don't get to know where the crash occurs.
>
> Perhaps if you (temporarily) move your tests out of testthat/
> subdirectory and remove the context() and testthat::test_that("...",
> { ... }) calls, you would be able to see the exact location of the
> crash in the *.Rout files?
>
> That said, it's probably one of your dependencies that's responsible
> for the crash, not your package, since there is no compiled code.
>
> --
> Best regards,
> Ivan
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |@r@h@d@t@b@@|nej@d @end|ng |rom @u@@energy@com  Fri May 15 06:46:29 2020
From: |@r@h@d@t@b@@|nej@d @end|ng |rom @u@@energy@com (FARSHAD TABASINEJAD)
Date: Thu, 14 May 2020 22:46:29 -0600
Subject: [R-pkg-devel] Package submission failed with two warnings
Message-ID: <1589517991120.72a63db72c4c0170@susaenergy.com>

Dear R-package-devel experts,

This is the first time I?m writing to this platform about a package I recently submitted to CRAN (my first package).
While the package is already available on CRAN, I still must fix a few warnings and one error as reported on the CRAN package check results page:
https://cran.r-project.org/web/checks/check_results_Rpvt.html

I recently resubmitted a modified version of the package to CRAN, however, it didn?t pass the automatic incoming checks. 

Windows:  https://win-builder.r-project.org/incoming_pretest/Rpvt_0.1.0_20200512_051950/Windows/00check.log
Status: 1 WARNING

Debian:  https://win-builder.r-project.org/incoming_pretest/Rpvt_0.1.0_20200512_051950/Debian/00check.log
Status: 2 WARNINGs


1) The first warning that appears on both Windows and Debian results is ?Insufficient package version (submitted: 0.1.0, existing: 0.1.0)?.

Since the package is conditionally available on CRAN, do I need to modify the package version to 0.1.1 to get rid of this warning?
Is there any way to fix this problem with the current version of the package(0.1.0)?

2) The second problem appears on the Debian test results:
    
    * checking re-building of vignette outputs ... [8s/8s] WARNING 
    
    Error(s) in re-building vignettes: 
    ... 
    --- re-building ?Rpvt.Rmd? using rmarkdown 
    
    pandoc-citeproc: Error in $: Incompatible API versions: encoded with [1,20] but attempted to decode with [1,17,5,4].
    
    CallStack (from HasCallStack): 
    error, called at ./Text/Pandoc/JSON.hs:111:48 in pandoc-types-1.17.5.4 5tHZ3B61A58JaKOMxwGQR4:Text.Pandoc.JSON 
    
    Error running filter /usr/bin/pandoc-citeproc: 
    
    Filter returned error status 1 
    Error: processing vignette 'Rpvt.Rmd' failed with diagnostics: 
    pandoc document conversion failed with error 83 --- 
    failed re-building ?Rpvt.Rmd? 
    
    SUMMARY: processing the following file failed: 
    ?Rpvt.Rmd? 
    
    Error: Vignette re-building failed. 
    Execution halted

I?ve created this package on a Windows operating system with no problem in creating the ?Rpvt.Rmd? file as is the case with the CRAN tests on x86_64-w64-mingw32 (64-bit).
Why does it fail to create the ?Rpvt.Rmd? file on x86_64-pc-linux-gnu (Debian)? Is this something related to the citation style of the library.bib file that I?ve used in my vignettes folder? It is the ?apa-6th-edition.csl? file downloaded from https://raw.githubusercontent.com/citation-style-language/styles/master/apa-6th-edition.csl

Thank you in advance!

Regards,
Farshad 


	[[alternative HTML version deleted]]


From m@ur|c|o@z@mbr@no @end|ng |rom u|ronter@@c|  Fri May 15 17:24:25 2020
From: m@ur|c|o@z@mbr@no @end|ng |rom u|ronter@@c| (Mauricio Zambrano-Bigiarini)
Date: Fri, 15 May 2020 11:24:25 -0400
Subject: [R-pkg-devel] Package submission failed with two warnings
In-Reply-To: <1589517991120.72a63db72c4c0170@susaenergy.com>
References: <1589517991120.72a63db72c4c0170@susaenergy.com>
Message-ID: <CAP6VarsMcNxEA=1At97ydNSHfvwd0HR_m8Viv5xEimFF7ReAyA@mail.gmail.com>

On Fri, 15 May 2020 at 10:34, FARSHAD TABASINEJAD
<farshad.tabasinejad at susaenergy.com> wrote:
>
> Dear R-package-devel experts,
>
> This is the first time I?m writing to this platform about a package I recently submitted to CRAN (my first package).
> While the package is already available on CRAN, I still must fix a few warnings and one error as reported on the CRAN package check results page:
> https://cran.r-project.org/web/checks/check_results_Rpvt.html
>
> I recently resubmitted a modified version of the package to CRAN, however, it didn?t pass the automatic incoming checks.
>
> Windows:  https://win-builder.r-project.org/incoming_pretest/Rpvt_0.1.0_20200512_051950/Windows/00check.log
> Status: 1 WARNING
>
> Debian:  https://win-builder.r-project.org/incoming_pretest/Rpvt_0.1.0_20200512_051950/Debian/00check.log
> Status: 2 WARNINGs
>
>
> 1) The first warning that appears on both Windows and Debian results is ?Insufficient package version (submitted: 0.1.0, existing: 0.1.0)?.
>
> Since the package is conditionally available on CRAN, do I need to modify the package version to 0.1.1 to get rid of this warning?
> Is there any way to fix this problem with the current version of the package(0.1.0)?

>From https://cran.r-project.org/web/packages/policies.html:

"Updates to previously-published packages must have an increased
version. Increasing the version number at each submission reduces
confusion so is preferred even when a previous submission was not
accepted."


>
> 2) The second problem appears on the Debian test results:
>
>     * checking re-building of vignette outputs ... [8s/8s] WARNING
>
>     Error(s) in re-building vignettes:
>     ...
>     --- re-building ?Rpvt.Rmd? using rmarkdown
>
>     pandoc-citeproc: Error in $: Incompatible API versions: encoded with [1,20] but attempted to decode with [1,17,5,4].
>
>     CallStack (from HasCallStack):
>     error, called at ./Text/Pandoc/JSON.hs:111:48 in pandoc-types-1.17.5.4 5tHZ3B61A58JaKOMxwGQR4:Text.Pandoc.JSON
>
>     Error running filter /usr/bin/pandoc-citeproc:
>
>     Filter returned error status 1
>     Error: processing vignette 'Rpvt.Rmd' failed with diagnostics:
>     pandoc document conversion failed with error 83 ---
>     failed re-building ?Rpvt.Rmd?
>
>     SUMMARY: processing the following file failed:
>     ?Rpvt.Rmd?
>
>     Error: Vignette re-building failed.
>     Execution halted
>
> I?ve created this package on a Windows operating system with no problem in creating the ?Rpvt.Rmd? file as is the case with the CRAN tests on x86_64-w64-mingw32 (64-bit).
> Why does it fail to create the ?Rpvt.Rmd? file on x86_64-pc-linux-gnu (Debian)? Is this something related to the citation style of the library.bib file that I?ve used in my vignettes folder? It is the ?apa-6th-edition.csl? file downloaded from https://raw.githubusercontent.com/citation-style-language/styles/master/apa-6th-edition.csl
>
>From https://cran.r-project.org/submit.html

"Package authors should make all reasonable efforts to provide
cross-platform portable code. Packages will not normally be accepted
that do not run on at least two of the major R platforms. Cases for
Windows-only packages will be considered, but CRAN may not be the most
appropriate place to host them.""

You might want to use win-builder (https://win-builder.r-project.org/)
to test your package on other platforms.

All the best,

Mauricio

=====================================
Department of Civil Engineering
Faculty of Engineering and Sciences
Universidad de La Frontera, Temuco, Chile
http://hzambran.github.io/
=====================================
mailto : mauricio.zambrano at ufrontera.cl
work-phone : +56 45 259 2812
=====================================
"Life goes by so fast, that if you don't stop
and look around, you might miss it"
(from the film Ferris Bueller's Day Off)
=====================================
Linux user #454569 -- Linux Mint user

-- 
La informaci?n contenida en este correo electr?nico y cualquier anexo o 
respuesta relacionada, puede contener datos e informaci?n confidencial y no 
puede ser usada o difundida por personas distintas a su(s) destinatario(s). 
Si usted no es el destinatario de esta comunicaci?n, le informamos que 
cualquier divulgaci?n, distribuci?n o copia de esta informaci?n constituye 
un delito conforme a la ley chilena. Si lo ha recibido por error, por favor 
borre el mensaje y todos sus anexos y notifique al remitente.


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri May 15 17:27:55 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 15 May 2020 11:27:55 -0400
Subject: [R-pkg-devel] Package submission failed with two warnings
In-Reply-To: <1589517991120.72a63db72c4c0170@susaenergy.com>
References: <1589517991120.72a63db72c4c0170@susaenergy.com>
Message-ID: <0ef206c9-7166-cee4-ab05-35253ab7868e@gmail.com>

For your first warning, see the CRAN policy:  "Updates to 
previously-published packages must have an increased version. Increasing 
the version number at each submission reduces confusion so is preferred 
even when a previous submission was not accepted."

For the second, it's hard to say what's happening.  Is your package 
online somewhere so we could try it on different machines?

Duncan Murdoch

On 15/05/2020 12:46 a.m., FARSHAD TABASINEJAD wrote:
> Dear R-package-devel experts,
> 
> This is the first time I?m writing to this platform about a package I recently submitted to CRAN (my first package).
> While the package is already available on CRAN, I still must fix a few warnings and one error as reported on the CRAN package check results page:
> https://cran.r-project.org/web/checks/check_results_Rpvt.html
> 
> I recently resubmitted a modified version of the package to CRAN, however, it didn?t pass the automatic incoming checks.
> 
> Windows:  https://win-builder.r-project.org/incoming_pretest/Rpvt_0.1.0_20200512_051950/Windows/00check.log
> Status: 1 WARNING
> 
> Debian:  https://win-builder.r-project.org/incoming_pretest/Rpvt_0.1.0_20200512_051950/Debian/00check.log
> Status: 2 WARNINGs
> 
> 
> 1) The first warning that appears on both Windows and Debian results is ?Insufficient package version (submitted: 0.1.0, existing: 0.1.0)?.
> 
> Since the package is conditionally available on CRAN, do I need to modify the package version to 0.1.1 to get rid of this warning?
> Is there any way to fix this problem with the current version of the package(0.1.0)?
> 
> 2) The second problem appears on the Debian test results:
>      
>      * checking re-building of vignette outputs ... [8s/8s] WARNING
>      
>      Error(s) in re-building vignettes:
>      ...
>      --- re-building ?Rpvt.Rmd? using rmarkdown
>      
>      pandoc-citeproc: Error in $: Incompatible API versions: encoded with [1,20] but attempted to decode with [1,17,5,4].
>      
>      CallStack (from HasCallStack):
>      error, called at ./Text/Pandoc/JSON.hs:111:48 in pandoc-types-1.17.5.4 5tHZ3B61A58JaKOMxwGQR4:Text.Pandoc.JSON
>      
>      Error running filter /usr/bin/pandoc-citeproc:
>      
>      Filter returned error status 1
>      Error: processing vignette 'Rpvt.Rmd' failed with diagnostics:
>      pandoc document conversion failed with error 83 ---
>      failed re-building ?Rpvt.Rmd?
>      
>      SUMMARY: processing the following file failed:
>      ?Rpvt.Rmd?
>      
>      Error: Vignette re-building failed.
>      Execution halted
> 
> I?ve created this package on a Windows operating system with no problem in creating the ?Rpvt.Rmd? file as is the case with the CRAN tests on x86_64-w64-mingw32 (64-bit).
> Why does it fail to create the ?Rpvt.Rmd? file on x86_64-pc-linux-gnu (Debian)? Is this something related to the citation style of the library.bib file that I?ve used in my vignettes folder? It is the ?apa-6th-edition.csl? file downloaded from https://raw.githubusercontent.com/citation-style-language/styles/master/apa-6th-edition.csl
> 
> Thank you in advance!
> 
> Regards,
> Farshad
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From |@r@h@d@t@b@@|nej@d @end|ng |rom @u@@energy@com  Fri May 15 23:11:36 2020
From: |@r@h@d@t@b@@|nej@d @end|ng |rom @u@@energy@com (FARSHAD TABASINEJAD)
Date: Fri, 15 May 2020 15:11:36 -0600
Subject: [R-pkg-devel] Package submission failed with two warnings
In-Reply-To: <0ef206c9-7166-cee4-ab05-35253ab7868e@gmail.com>
References: <1589517991120.72a63db72c4c0170@susaenergy.com>
 <0ef206c9-7166-cee4-ab05-35253ab7868e@gmail.com>
Message-ID: <1589577100689.7cd4bf09384e458a@susaenergy.com>

Hi Duncan,

I changed the version, recreated the package, and then tested it with the rhub::check_for_cran(). The function failed to create a summary for all the platform results together, however individual results are available in the following links.


https://builder.r-hub.io/status/Rpvt_0.1.1.tar.gz-5e89b16f7bfb420ebe310a57eb8357b3
https://artifacts.r-hub.io/Rpvt_0.1.1.tar.gz-5e89b16f7bfb420ebe310a57eb8357b3/
https://artifacts.r-hub.io/Rpvt_0.1.1.tar.gz-2ee682316e0f4bc7b09faf7a9e46b670/
https://builder.r-hub.io/status/original/Rpvt_0.1.1.tar.gz-08fc2dbd591f4d80b2e0049a7c8db8b8

you can also find the source code in the following link:
https://github.com/susaenergy/Rpvt

Thank you for the help!

Farshad


From: Duncan Murdoch
Sent: Friday, May 15, 2020 9:28 AM
To: FARSHAD TABASINEJAD; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Package submission failed with two warnings

For your first warning, see the CRAN policy:  "Updates to 
previously-published packages must have an increased version. Increasing 
the version number at each submission reduces confusion so is preferred 
even when a previous submission was not accepted."

For the second, it's hard to say what's happening.  Is your package 
online somewhere so we could try it on different machines?

Duncan Murdoch

On 15/05/2020 12:46 a.m., FARSHAD TABASINEJAD wrote:
> Dear R-package-devel experts,
> 
> This is the first time I?m writing to this platform about a package I recently submitted to CRAN (my first package).
> While the package is already available on CRAN, I still must fix a few warnings and one error as reported on the CRAN package check results page:
> https://cran.r-project.org/web/checks/check_results_Rpvt.html
> 
> I recently resubmitted a modified version of the package to CRAN, however, it didn?t pass the automatic incoming checks.
> 
> Windows:  https://win-builder.r-project.org/incoming_pretest/Rpvt_0.1.0_20200512_051950/Windows/00check.log
> Status: 1 WARNING
> 
> Debian:  https://win-builder.r-project.org/incoming_pretest/Rpvt_0.1.0_20200512_051950/Debian/00check.log
> Status: 2 WARNINGs
> 
> 
> 1) The first warning that appears on both Windows and Debian results is ?Insufficient package version (submitted: 0.1.0, existing: 0.1.0)?.
> 
> Since the package is conditionally available on CRAN, do I need to modify the package version to 0.1.1 to get rid of this warning?
> Is there any way to fix this problem with the current version of the package(0.1.0)?
> 
> 2) The second problem appears on the Debian test results:
>      
>      * checking re-building of vignette outputs ... [8s/8s] WARNING
>      
>      Error(s) in re-building vignettes:
>      ...
>      --- re-building ?Rpvt.Rmd? using rmarkdown
>      
>      pandoc-citeproc: Error in $: Incompatible API versions: encoded with [1,20] but attempted to decode with [1,17,5,4].
>      
>      CallStack (from HasCallStack):
>      error, called at ./Text/Pandoc/JSON.hs:111:48 in pandoc-types-1.17.5.4 5tHZ3B61A58JaKOMxwGQR4:Text.Pandoc.JSON
>      
>      Error running filter /usr/bin/pandoc-citeproc:
>      
>      Filter returned error status 1
>      Error: processing vignette 'Rpvt.Rmd' failed with diagnostics:
>      pandoc document conversion failed with error 83 ---
>      failed re-building ?Rpvt.Rmd?
>      
>      SUMMARY: processing the following file failed:
>      ?Rpvt.Rmd?
>      
>      Error: Vignette re-building failed.
>      Execution halted
> 
> I?ve created this package on a Windows operating system with no problem in creating the ?Rpvt.Rmd? file as is the case with the CRAN tests on x86_64-w64-mingw32 (64-bit).
> Why does it fail to create the ?Rpvt.Rmd? file on x86_64-pc-linux-gnu (Debian)? Is this something related to the citation style of the library.bib file that I?ve used in my vignettes folder? It is the ?apa-6th-edition.csl? file downloaded from https://raw.githubusercontent.com/citation-style-language/styles/master/apa-6th-edition.csl
> 
> Thank you in advance!
> 
> Regards,
> Farshad
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 



	[[alternative HTML version deleted]]


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Fri May 15 23:50:12 2020
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Fri, 15 May 2020 21:50:12 +0000
Subject: [R-pkg-devel] Package submission failed with two warnings
In-Reply-To: <1589577100689.7cd4bf09384e458a@susaenergy.com>
References: <1589517991120.72a63db72c4c0170@susaenergy.com>
 <0ef206c9-7166-cee4-ab05-35253ab7868e@gmail.com>,
 <1589577100689.7cd4bf09384e458a@susaenergy.com>
Message-ID: <5109fe3d98f2479896514e9b739ce9ed@umanitoba.ca>

Hi Farshad,


The error you get when compiling your vignette gives us a hint:

Error: processing vignette 'Rpvt.Rmd' failed with diagnostics:
package or namespace load failed for 'ggpubr' in loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()), versionCheck = vI[[j]]):
 there is no package called 'data.table'

There is a long chain of dependencies here: if I write A -> B to say that package A lists package B as an Import (and therefore package B is loaded when package A is attached), we have


ggpubr -> rstatix -> car -> rio -> data.table.


I think the issue is that, since you list ggpubr in "Suggests", there's never a check that all its dependencies (and their dependencies etc) are installed, and therefore data.table was not installed before checking your package. (But I'm not sure exactly why ggpubr is installed but not all the dependencies.)


A solution would be to make your whole vignette fail "gracefully" when ggpubr isn't attached properly. Which is good practice anyway.


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of FARSHAD TABASINEJAD <farshad.tabasinejad at susaenergy.com>
Sent: May 15, 2020 4:11:36 PM
To: Duncan Murdoch; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Package submission failed with two warnings

********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

Hi Duncan,

I changed the version, recreated the package, and then tested it with the rhub::check_for_cran(). The function failed to create a summary for all the platform results together, however individual results are available in the following links.


https://builder.r-hub.io/status/Rpvt_0.1.1.tar.gz-5e89b16f7bfb420ebe310a57eb8357b3
https://artifacts.r-hub.io/Rpvt_0.1.1.tar.gz-5e89b16f7bfb420ebe310a57eb8357b3/
https://artifacts.r-hub.io/Rpvt_0.1.1.tar.gz-2ee682316e0f4bc7b09faf7a9e46b670/
https://builder.r-hub.io/status/original/Rpvt_0.1.1.tar.gz-08fc2dbd591f4d80b2e0049a7c8db8b8

you can also find the source code in the following link:
https://github.com/susaenergy/Rpvt

Thank you for the help!

Farshad


From: Duncan Murdoch
Sent: Friday, May 15, 2020 9:28 AM
To: FARSHAD TABASINEJAD; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Package submission failed with two warnings

For your first warning, see the CRAN policy:  "Updates to
previously-published packages must have an increased version. Increasing
the version number at each submission reduces confusion so is preferred
even when a previous submission was not accepted."

For the second, it's hard to say what's happening.  Is your package
online somewhere so we could try it on different machines?

Duncan Murdoch

On 15/05/2020 12:46 a.m., FARSHAD TABASINEJAD wrote:
> Dear R-package-devel experts,
>
> This is the first time I?m writing to this platform about a package I recently submitted to CRAN (my first package).
> While the package is already available on CRAN, I still must fix a few warnings and one error as reported on the CRAN package check results page:
> https://cran.r-project.org/web/checks/check_results_Rpvt.html
>
> I recently resubmitted a modified version of the package to CRAN, however, it didn?t pass the automatic incoming checks.
>
> Windows:  https://win-builder.r-project.org/incoming_pretest/Rpvt_0.1.0_20200512_051950/Windows/00check.log
> Status: 1 WARNING
>
> Debian:  https://win-builder.r-project.org/incoming_pretest/Rpvt_0.1.0_20200512_051950/Debian/00check.log
> Status: 2 WARNINGs
>
>
> 1) The first warning that appears on both Windows and Debian results is ?Insufficient package version (submitted: 0.1.0, existing: 0.1.0)?.
>
> Since the package is conditionally available on CRAN, do I need to modify the package version to 0.1.1 to get rid of this warning?
> Is there any way to fix this problem with the current version of the package(0.1.0)?
>
> 2) The second problem appears on the Debian test results:
>
>      * checking re-building of vignette outputs ... [8s/8s] WARNING
>
>      Error(s) in re-building vignettes:
>      ...
>      --- re-building ?Rpvt.Rmd? using rmarkdown
>
>      pandoc-citeproc: Error in $: Incompatible API versions: encoded with [1,20] but attempted to decode with [1,17,5,4].
>
>      CallStack (from HasCallStack):
>      error, called at ./Text/Pandoc/JSON.hs:111:48 in pandoc-types-1.17.5.4 5tHZ3B61A58JaKOMxwGQR4:Text.Pandoc.JSON
>
>      Error running filter /usr/bin/pandoc-citeproc:
>
>      Filter returned error status 1
>      Error: processing vignette 'Rpvt.Rmd' failed with diagnostics:
>      pandoc document conversion failed with error 83 ---
>      failed re-building ?Rpvt.Rmd?
>
>      SUMMARY: processing the following file failed:
>      ?Rpvt.Rmd?
>
>      Error: Vignette re-building failed.
>      Execution halted
>
> I?ve created this package on a Windows operating system with no problem in creating the ?Rpvt.Rmd? file as is the case with the CRAN tests on x86_64-w64-mingw32 (64-bit).
> Why does it fail to create the ?Rpvt.Rmd? file on x86_64-pc-linux-gnu (Debian)? Is this something related to the citation style of the library.bib file that I?ve used in my vignettes folder? It is the ?apa-6th-edition.csl? file downloaded from https://raw.githubusercontent.com/citation-style-language/styles/master/apa-6th-edition.csl
>
> Thank you in advance!
>
> Regards,
> Farshad
>
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Fri May 15 23:57:09 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Fri, 15 May 2020 22:57:09 +0100
Subject: [R-pkg-devel] Package submission failed with two warnings
In-Reply-To: <5109fe3d98f2479896514e9b739ce9ed@umanitoba.ca>
References: <1589517991120.72a63db72c4c0170@susaenergy.com>
 <0ef206c9-7166-cee4-ab05-35253ab7868e@gmail.com>
 <1589577100689.7cd4bf09384e458a@susaenergy.com>
 <5109fe3d98f2479896514e9b739ce9ed@umanitoba.ca>
Message-ID: <CABtg=Kms_MXYPSW9Q34v5as34c9QAz1v6TJRBvweXOSKx7ZMeg@mail.gmail.com>

The reason is that CRAN does not have an R-devel binary for
data.table, and because of this install.packages() decides not to
install it. Here is a workaround:
https://github.com/r-hub/rhub/issues/367#issuecomment-621757715

Gabor

On Fri, May 15, 2020 at 10:50 PM Max Turgeon <Max.Turgeon at umanitoba.ca> wrote:
>
> Hi Farshad,
>
>
> The error you get when compiling your vignette gives us a hint:
>
> Error: processing vignette 'Rpvt.Rmd' failed with diagnostics:
> package or namespace load failed for 'ggpubr' in loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()), versionCheck = vI[[j]]):
>  there is no package called 'data.table'
>
> There is a long chain of dependencies here: if I write A -> B to say that package A lists package B as an Import (and therefore package B is loaded when package A is attached), we have
>
>
> ggpubr -> rstatix -> car -> rio -> data.table.
>
>
> I think the issue is that, since you list ggpubr in "Suggests", there's never a check that all its dependencies (and their dependencies etc) are installed, and therefore data.table was not installed before checking your package. (But I'm not sure exactly why ggpubr is installed but not all the dependencies.)
>
>
> A solution would be to make your whole vignette fail "gracefully" when ggpubr isn't attached properly. Which is good practice anyway.
>
>
> Max Turgeon
> Assistant Professor
> Department of Statistics
> Department of Computer Science
> University of Manitoba
> maxturgeon.ca<http://maxturgeon.ca>
>
>
> ________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of FARSHAD TABASINEJAD <farshad.tabasinejad at susaenergy.com>
> Sent: May 15, 2020 4:11:36 PM
> To: Duncan Murdoch; r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Package submission failed with two warnings
>
> ********************************************************
> Caution: This message was sent from outside the University of Manitoba.
> ********************************************************
>
> Hi Duncan,
>
> I changed the version, recreated the package, and then tested it with the rhub::check_for_cran(). The function failed to create a summary for all the platform results together, however individual results are available in the following links.
>
>
> https://builder.r-hub.io/status/Rpvt_0.1.1.tar.gz-5e89b16f7bfb420ebe310a57eb8357b3
> https://artifacts.r-hub.io/Rpvt_0.1.1.tar.gz-5e89b16f7bfb420ebe310a57eb8357b3/
> https://artifacts.r-hub.io/Rpvt_0.1.1.tar.gz-2ee682316e0f4bc7b09faf7a9e46b670/
> https://builder.r-hub.io/status/original/Rpvt_0.1.1.tar.gz-08fc2dbd591f4d80b2e0049a7c8db8b8
>
> you can also find the source code in the following link:
> https://github.com/susaenergy/Rpvt
>
> Thank you for the help!
>
> Farshad
>
>
> From: Duncan Murdoch
> Sent: Friday, May 15, 2020 9:28 AM
> To: FARSHAD TABASINEJAD; r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Package submission failed with two warnings
>
> For your first warning, see the CRAN policy:  "Updates to
> previously-published packages must have an increased version. Increasing
> the version number at each submission reduces confusion so is preferred
> even when a previous submission was not accepted."
>
> For the second, it's hard to say what's happening.  Is your package
> online somewhere so we could try it on different machines?
>
> Duncan Murdoch
>
> On 15/05/2020 12:46 a.m., FARSHAD TABASINEJAD wrote:
> > Dear R-package-devel experts,
> >
> > This is the first time I?m writing to this platform about a package I recently submitted to CRAN (my first package).
> > While the package is already available on CRAN, I still must fix a few warnings and one error as reported on the CRAN package check results page:
> > https://cran.r-project.org/web/checks/check_results_Rpvt.html
> >
> > I recently resubmitted a modified version of the package to CRAN, however, it didn?t pass the automatic incoming checks.
> >
> > Windows:  https://win-builder.r-project.org/incoming_pretest/Rpvt_0.1.0_20200512_051950/Windows/00check.log
> > Status: 1 WARNING
> >
> > Debian:  https://win-builder.r-project.org/incoming_pretest/Rpvt_0.1.0_20200512_051950/Debian/00check.log
> > Status: 2 WARNINGs
> >
> >
> > 1) The first warning that appears on both Windows and Debian results is ?Insufficient package version (submitted: 0.1.0, existing: 0.1.0)?.
> >
> > Since the package is conditionally available on CRAN, do I need to modify the package version to 0.1.1 to get rid of this warning?
> > Is there any way to fix this problem with the current version of the package(0.1.0)?
> >
> > 2) The second problem appears on the Debian test results:
> >
> >      * checking re-building of vignette outputs ... [8s/8s] WARNING
> >
> >      Error(s) in re-building vignettes:
> >      ...
> >      --- re-building ?Rpvt.Rmd? using rmarkdown
> >
> >      pandoc-citeproc: Error in $: Incompatible API versions: encoded with [1,20] but attempted to decode with [1,17,5,4].
> >
> >      CallStack (from HasCallStack):
> >      error, called at ./Text/Pandoc/JSON.hs:111:48 in pandoc-types-1.17.5.4 5tHZ3B61A58JaKOMxwGQR4:Text.Pandoc.JSON
> >
> >      Error running filter /usr/bin/pandoc-citeproc:
> >
> >      Filter returned error status 1
> >      Error: processing vignette 'Rpvt.Rmd' failed with diagnostics:
> >      pandoc document conversion failed with error 83 ---
> >      failed re-building ?Rpvt.Rmd?
> >
> >      SUMMARY: processing the following file failed:
> >      ?Rpvt.Rmd?
> >
> >      Error: Vignette re-building failed.
> >      Execution halted
> >
> > I?ve created this package on a Windows operating system with no problem in creating the ?Rpvt.Rmd? file as is the case with the CRAN tests on x86_64-w64-mingw32 (64-bit).
> > Why does it fail to create the ?Rpvt.Rmd? file on x86_64-pc-linux-gnu (Debian)? Is this something related to the citation style of the library.bib file that I?ve used in my vignettes folder? It is the ?apa-6th-edition.csl? file downloaded from https://raw.githubusercontent.com/citation-style-language/styles/master/apa-6th-edition.csl
> >
> > Thank you in advance!
> >
> > Regards,
> > Farshad
> >
> >
> >        [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From p@u|h|bb|ng @end|ng |rom gm@||@com  Sat May 16 07:47:54 2020
From: p@u|h|bb|ng @end|ng |rom gm@||@com (Paul Hibbing)
Date: Sat, 16 May 2020 01:47:54 -0400
Subject: [R-pkg-devel] Help Debugging Debian Error
In-Reply-To: <CABtg=Km4DDNeU42Dj4ROUVyJ_Sxgq345gaq4Qms=HiXBECSNHQ@mail.gmail.com>
References: <CANA-rNN-m5d-FPt8ZCSWNWdLOTA-LV8o-GWU_zLbGMKoi+m5tA@mail.gmail.com>
 <CANA-rNMw4co816RdZdHv5L=q1vRrwKj=ZWdGZio-chD4BujNQg@mail.gmail.com>
 <24253.60279.763106.287393@rob.eddelbuettel.com>
 <CABtg=Kn-Q8LVBaMUC=VuigWZbZpvs5qLdU4=Pf=57d5rZbL4Jw@mail.gmail.com>
 <24253.64955.905516.838795@rob.eddelbuettel.com>
 <CANA-rNOZk7E+mR4C-wiNWkwjvs2QgjytJo8Z87-BzO5PKUgGug@mail.gmail.com>
 <20200515120002.3754f3f2@Tarkus>
 <CABtg=Km4DDNeU42Dj4ROUVyJ_Sxgq345gaq4Qms=HiXBECSNHQ@mail.gmail.com>
Message-ID: <CANA-rNOPs6_mtNb1N9Trcc6A0EzqdPaWyiYuGJmn40djjcvOTg@mail.gmail.com>

Thanks for the tips. It appears the error is indeed related to the
matchingMarkets package, but specifically an issue with rJava
configuration. Now I get the following (see
https://artifacts.r-hub.io/PAutilities_1.0.0.tar.gz-54a555386e924de6a53385479a1e199f/PAutilities.Rcheck/00check.log
):

VALIDATE...PREFS...MATCHES [*ignore this -- these are updates I printed
myself to pinpoint matchingMarkets as the culprit*]
WARNING: Initial Java 12 release has broken JNI support and does NOT work.
Use stable Java 11 (or watch for 12u if avaiable).
ERROR: Java exception occurred during rJava bootstrap - see stderr for Java
stack trace. Exception in thread "main"

* Is there a specification I can provide to get around this?

* Since the current CRAN version of my package depends on a recently
orphaned package, I am due to provide a new release by the 17th (per an
email from Prof. Brian Ripley). Is this a hard deadline, or can/should I
notify someone and/or request an extension? To complicate matters, I have a
publication coming out imminently, in which my package plays a central
role. So it's important that I avoid any lapse in its availability.

Paul

On Fri, May 15, 2020 at 5:06 AM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:

> You don't need to move the files around, though, just use a more
> verbose testthat reporter, e.g. in testthat.R use
>
> test_check("PAutilities", reporter = "summary")
>
> and then at least you'll know where it crashes. But to fix this,
> you'll probably need to debug it locally. You can do that in Docker if
> you don't have a local Linux machine.
>
> Gabor
>
> On Fri, May 15, 2020 at 10:00 AM Ivan Krylov <krylov.r00t at gmail.com>
> wrote:
> >
> > On Fri, 15 May 2020 03:50:12 -0400
> > Paul Hibbing <paulhibbing at gmail.com> wrote:
> >
> > > Complete output:
> > >   > library(testthat)
> > >   > library(PAutilities)
> > >   >
> > >   > test_check("PAutilities")
> >
> > It seems to me that the R process crashes while running your tests, but
> > since testthat::test_check captures everything to summarise it later,
> > you don't get to know where the crash occurs.
> >
> > Perhaps if you (temporarily) move your tests out of testthat/
> > subdirectory and remove the context() and testthat::test_that("...",
> > { ... }) calls, you would be able to see the exact location of the
> > crash in the *.Rout files?
> >
> > That said, it's probably one of your dependencies that's responsible
> > for the crash, not your package, since there is no compiled code.
> >
> > --
> > Best regards,
> > Ivan
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From renoz@o @end|ng |rom protonm@||@com  Mon May 18 20:19:01 2020
From: renoz@o @end|ng |rom protonm@||@com (renozao)
Date: Mon, 18 May 2020 18:19:01 +0000
Subject: [R-pkg-devel] =?utf-8?q?Error_creating_union_class=3A_object_?=
 =?utf-8?b?4oCYLl9fQ19fY29tcE1hdHJpeOKAmSBub3QgZm91bmQ=?=
In-Reply-To: <klaxwZ-BWTJ90EYmWUjXntHafKk-OZcNZYMSmPhTX2SJ00_MHfo3dC7GCd6-aFSjXIP1X3WH77SyPCxZ7cb4OT7i2iALmTkpb8TH2CyIeJ8=@protonmail.com>
References: <na_hvS9mQoE2Ex7h3m1UlL7AzQFz0Fuuets5kNRC7b7NBrkkYObfnkUAyj8T8oz48jBuBXZcEf0CJn2UL7f5TZ-N9jiT4qUd0eiE50R9xkU=-4805@protonmail.com>
 <24205.57605.672636.944802@stat.math.ethz.ch>
 <CAF8bMca+KFHQfb87qbZywWchXy9GJ_7qr5iD5GJ3PL-xWJO_fA@mail.gmail.com>
 <CAF8bMcb-KbfR==w1g3ixjEpGNR7=zn3SEBtwn3i4MimYzzt-dw@mail.gmail.com>
 <cTfz9LdQTDeljdpr97HnBeKOSPRLo90TKjTnzHfV4zfOx0UrOPO5F0KcTex4T85VVqLzSXGp0MyTFZHNjCSoiTYj5nPFijuKiPf2E6siAyg=-1872@protonmail.com>
 <24219.11412.330746.824585@stat.math.ethz.ch>
 <klaxwZ-BWTJ90EYmWUjXntHafKk-OZcNZYMSmPhTX2SJ00_MHfo3dC7GCd6-aFSjXIP1X3WH77SyPCxZ7cb4OT7i2iALmTkpb8TH2CyIeJ8=@protonmail.com>
Message-ID: <blVO_taCz7F51iPwzUvgWuDe21_jjKv7QtDOH-G2b8EcC0euPr1tzc_GXXDYNWBwlWtEiacP2euDwAf7mayZig12cQ_x80rdhSQeRr6pWaY=@protonmail.com>

Hi,

I tried to solve the issue in multiple ways, but I keep getting an installation error when running R CMD check, although the package installs fine with R CMD INSTALL:

Error: package ?Matrix? required by ?NMF? could not be found

I clearly have the package Matrix installed and up-to-date.
I tried with/without Matrix in Depends, with/without importing it all in the NAMESPACE.
Do I need to have a statement like this in the NAMESPACE:

importClassesFrom(Matrix,mMatrix)


The class appears not to be exported.
Puzzled.

Thank you.


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon May 18 20:31:10 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 18 May 2020 14:31:10 -0400
Subject: [R-pkg-devel] =?utf-8?q?Error_creating_union_class=3A_object_?=
 =?utf-8?b?4oCYLl9fQ19fY29tcE1hdHJpeOKAmSBub3QgZm91bmQ=?=
In-Reply-To: <klaxwZ-BWTJ90EYmWUjXntHafKk-OZcNZYMSmPhTX2SJ00_MHfo3dC7GCd6-aFSjXIP1X3WH77SyPCxZ7cb4OT7i2iALmTkpb8TH2CyIeJ8=@protonmail.com>
References: <na_hvS9mQoE2Ex7h3m1UlL7AzQFz0Fuuets5kNRC7b7NBrkkYObfnkUAyj8T8oz48jBuBXZcEf0CJn2UL7f5TZ-N9jiT4qUd0eiE50R9xkU=-4805@protonmail.com>
 <24205.57605.672636.944802@stat.math.ethz.ch>
 <CAF8bMca+KFHQfb87qbZywWchXy9GJ_7qr5iD5GJ3PL-xWJO_fA@mail.gmail.com>
 <CAF8bMcb-KbfR==w1g3ixjEpGNR7=zn3SEBtwn3i4MimYzzt-dw@mail.gmail.com>
 <cTfz9LdQTDeljdpr97HnBeKOSPRLo90TKjTnzHfV4zfOx0UrOPO5F0KcTex4T85VVqLzSXGp0MyTFZHNjCSoiTYj5nPFijuKiPf2E6siAyg=-1872@protonmail.com>
 <24219.11412.330746.824585@stat.math.ethz.ch>
 <klaxwZ-BWTJ90EYmWUjXntHafKk-OZcNZYMSmPhTX2SJ00_MHfo3dC7GCd6-aFSjXIP1X3WH77SyPCxZ7cb4OT7i2iALmTkpb8TH2CyIeJ8=@protonmail.com>
Message-ID: <f3de0398-9d29-e2cd-7ce1-c0d238cf87bd@gmail.com>

On 29/04/2020 1:16 p.m., renozao wrote:
> Thank you Martin,
> 
> Looks like the mMatrix class defined in Matrix is not exported in 3.6.3, maybe it is now exported in the current R-devel.

Matrix doesn't have the same versions as R:  it's a recommended package, 
not a base package.  It can be updated independently of R.  The current 
version on CRAN is 1.2-18, but the R-forge version is 1.3-0.  Neither 
one exports mMatrix.

Duncan Murdoch

> 
> In this case I'd rather use a conditional import and definition.
> I'll try that route.
> 
> Bests,
> Renaud
> 
> Sent with ProtonMail Secure Email.
> 
> ??????? Original Message ???????
> On Saturday, April 18, 2020 12:36 PM, Martin Maechler <maechler at stat.math.ethz.ch> wrote:
> 
>>>>>>> renozao
>>>>>>> on Wed, 8 Apr 2020 16:19:59 +0000 writes:
>>
>>> Thank you William for the reproducible example.
>>
>>      > Currently I using the following (same as in William's example):
>>
>>      > setClassUnion("mMatrix", c("Matrix", "matrix"))
>>
>>
>>> Martin, are the changes made in the union class handling affecting the way we should declare them?
>>
>>> Thank you.
>>
>>> Bests,
>>
>>      > Renaud
>>
>>
>> Thank you, Renaud, and Bill Dunlap.
>>
>> There is obviously a bit of a problem there, but it may well be
>> "only" a problem in error handling.
>>
>> As Bill's trace(get, ..) shows, R tries to get
>> "#HAS_DUPLICATE_CLASS_NAMES" which is indeed an indication of the problem:
>>
>> You are trying to REdefine a class union that already exists
>> identically in the Matrix package:
>> In the R-forge development version of 'Matrix', it is
>> line 717 of Matrix/R/AllClass.R (and that will be close also
>> in the CRAN version of Matrix).
>>
>> So at least for you, Renaud, the solution to the problem is easy:
>> Just don't do what you should not do: What you want is already
>> part of Matrix.... and after searching: It's been part of
>> Matrix since ca. July 2012 ...
>>
>> -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
>>
>> But yes, there's a buglet in the 'methods' package currently,
>> which leads to a misleading error message
>> (It's arguable if it should give an error which it did not previously;
>> I think it would be quite a good idea to give at least a
>> warning as you are masking class definition of the Matrix
>> package which is in your search() path or at least among the
>> loaded namespaces at this time).
>>
>> Best,
>> Martin
>>
>>> ??????? Original Message ???????
>>
>>      > On Wednesday, April 8, 2020 11:19 AM, William Dunlap <wdunlap at tibco.com> wrote:
>>
>>
>>>> Use trace() to get a bit more detail - .__C_compMatrix is looked for in the wrong environment with inherits=FALSE.
>>
>>      >>
>>
>>      >>> setClassUnion("mMatrix", c("Matrix", "matrix"))
>>
>>      >> Tracing get(name, envir = env) on entry
>>
>>      >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>>
>>      >> Tracing get(name, envir = env) on entry
>>
>>      >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>>
>>      >> Tracing get(name, envir = env) on entry
>>
>>      >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>>
>>      >> Tracing get("#HAS_DUPLICATE_CLASS_NAMES", envir = .classTable) on entry
>>
>>      >> x="#HAS_DUPLICATE_CLASS_NAMES", envir="<environment: 0x2787710>", topenv="<environment: base>", inherits=TRUE
>>
>>      >> Tracing get(name, envir = env) on entry
>>
>>      >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>>
>>      >> Tracing get(name, envir = env) on entry
>>
>>      >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>>
>>      >> Tracing get(name, envir = env) on entry
>>
>>      >> x=".MTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>>
>>      >> Tracing get(".SigLength", envir = env) on entry
>>
>>      >> x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>>
>>      >> Tracing get(".SigLength", envir = env) on entry
>>
>>      >> x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
>>
>>      >> Tracing get(name, envir = env) on entry
>>
>>      >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>>
>>      >> Tracing get(".SigLength", envir = env) on entry
>>
>>      >> x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>>
>>      >> Tracing get(".SigLength", envir = env) on entry
>>
>>      >> x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
>>
>>      >> Tracing get(cname, envir = cwhere, inherits = FALSE) on entry
>>
>>      >> x=".__C__compMatrix", envir="<environment: R_GlobalEnv>", topenv="<environment: R_GlobalEnv>", inherits=FALSE
>>
>>      >> Error in get(cname, envir = cwhere, inherits = FALSE) :
>>
>>      >> object '.__C__compMatrix' not found
>>
>>      >> ...
>>
>>      >>
>>
>>      >> Bill Dunlap
>>
>>      >> TIBCO Software
>>
>>      >> wdunlap tibco.com
>>
>>      >>
>>
>>      >> On Wed, Apr 8, 2020 at 7:52 AM William Dunlap <wdunlap at tibco.com> wrote:
>>
>>      >>
>>
>>      >>> % R-devel --vanilla --quiet
>>
>>      >>>> library(Matrix)
>>
>>      >>>> setClassUnion("mMatrix", c("Matrix", "matrix"))
>>
>>      >>> Error in get(cname, envir = cwhere, inherits = FALSE) :
>>
>>      >>> object '.__C__compMatrix' not found
>>
>>      >>> Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
>>
>>      >>> unable to create union class:  could not set members "Matrix"
>>
>>      >>>> sessionInfo()
>>
>>      >>> R Under development (unstable) (2020-04-07 r78175)
>>
>>      >>> Platform: x86_64-pc-linux-gnu (64-bit)
>>
>>      >>> Running under: Ubuntu 16.04.6 LTS
>>
>>      >>>
>>
>>      >>> Matrix products: default
>>
>>      >>> BLAS/LAPACK: /usr/lib/libopenblasp-r0.2.18.so
>>
>>      >>>
>>
>>      >>> locale:
>>
>>      >>> [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
>>
>>      >>> [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
>>
>>      >>> [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
>>
>>      >>> [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
>>
>>      >>> [9] LC_ADDRESS=C               LC_TELEPHONE=C
>>
>>      >>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
>>
>>      >>>
>>
>>      >>> attached base packages:
>>
>>      >>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>>      >>>
>>
>>      >>> other attached packages:
>>
>>      >>> [1] Matrix_1.2-18
>>
>>      >>>
>>
>>      >>> loaded via a namespace (and not attached):
>>
>>      >>> [1] compiler_4.1.0  grid_4.1.0      lattice_0.20-41
>>
>>      >>>
>>
>>      >>> Bill Dunlap
>>
>>      >>> TIBCO Software
>>
>>      >>> wdunlap tibco.com
>>
>>      >>>
>>
>>      >>> On Wed, Apr 8, 2020 at 7:35 AM Martin Maechler <maechler at stat.math.ethz.ch> wrote:
>>
>>      >>>
>>
>>      >>>>>>>>> renozao
>>
>>      >>>>>>>>> on Mon, 30 Mar 2020 21:20:43 +0000 writes:
>>
>>      >>>>
>>
>>      >>>> > Hi,
>>
>>      >>>> > when R CMD check is run under R-devel (2020-03-29 r78108) I get the following error at installation:
>>
>>      >>>>
>>
>>      >>>> > Error in get(cname, envir = cwhere, inherits = FALSE) :
>>
>>      >>>> > object ?.__C__compMatrix? not found
>>
>>      >>>> > Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
>>
>>      >>>> > unable to create union class:  could not set members "Matrix"
>>
>>      >>>>
>>
>>      >>>> > This does not happen on R 3.6.3.
>>
>>      >>>>
>>
>>      >>>> > I tried with Matrix listed in Depends but I still get the same error.
>>
>>      >>>>
>>
>>      >>>> > Is this linked to some changes in union classes or the Matrix package?
>>
>>      >>>>
>>
>>      >>>> > Thank you.
>>
>>      >>>>
>>
>>      >>>> > Bests,
>>
>>      >>>> > Renaud
>>
>>      >>>>
>>
>>      >>>> Hi Renaud,
>>
>>      >>>> One reason you got no response here, is because we don't even
>>
>>      >>>> know about which package you are talking.
>>
>>      >>>>
>>
>>      >>>> So there's nothing, anybody can reproduce from your posting.
>>
>>      >>>>
>>
>>      >>>> There have been changes in R's dealing with class unions etc,
>>
>>      >>>> notably even *relating* to an earlier bug report on class unions
>>
>>      >>>> exactly for such a case which was *triggered* when people built
>>
>>      >>>> on such Matrix classes.
>>
>>      >>>>
>>
>>      >>>> But we would really want to be able to reproduce what you are seeing..
>>
>>      >>>>
>>
>>      >>>> Best regards,
>>
>>      >>>> Martin Maechler
>>
>>      >>>>
>>
>>      >>>> ETH Zurich, R Core Team *and* maintainer("Matrix")
>>
>>      >>>>
>>
>>      >>>> ______________________________________________
>>
>>      >>>> R-package-devel at r-project.org mailing list
>>
>>      >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>      > [[alternative HTML version deleted]]
>>
>>
>>> ______________________________________________
>>
>>      > R-package-devel at r-project.org mailing list
>>
>>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From renoz@o @end|ng |rom protonm@||@com  Mon May 18 20:56:45 2020
From: renoz@o @end|ng |rom protonm@||@com (renozao)
Date: Mon, 18 May 2020 18:56:45 +0000
Subject: [R-pkg-devel] =?utf-8?q?Error_creating_union_class=3A_object_?=
 =?utf-8?b?4oCYLl9fQ19fY29tcE1hdHJpeOKAmSBub3QgZm91bmQ=?=
In-Reply-To: <f3de0398-9d29-e2cd-7ce1-c0d238cf87bd@gmail.com>
References: <na_hvS9mQoE2Ex7h3m1UlL7AzQFz0Fuuets5kNRC7b7NBrkkYObfnkUAyj8T8oz48jBuBXZcEf0CJn2UL7f5TZ-N9jiT4qUd0eiE50R9xkU=-4805@protonmail.com>
 <24205.57605.672636.944802@stat.math.ethz.ch>
 <CAF8bMca+KFHQfb87qbZywWchXy9GJ_7qr5iD5GJ3PL-xWJO_fA@mail.gmail.com>
 <CAF8bMcb-KbfR==w1g3ixjEpGNR7=zn3SEBtwn3i4MimYzzt-dw@mail.gmail.com>
 <cTfz9LdQTDeljdpr97HnBeKOSPRLo90TKjTnzHfV4zfOx0UrOPO5F0KcTex4T85VVqLzSXGp0MyTFZHNjCSoiTYj5nPFijuKiPf2E6siAyg=-1872@protonmail.com>
 <24219.11412.330746.824585@stat.math.ethz.ch>
 <klaxwZ-BWTJ90EYmWUjXntHafKk-OZcNZYMSmPhTX2SJ00_MHfo3dC7GCd6-aFSjXIP1X3WH77SyPCxZ7cb4OT7i2iALmTkpb8TH2CyIeJ8=@protonmail.com>
 <f3de0398-9d29-e2cd-7ce1-c0d238cf87bd@gmail.com>
Message-ID: <_ox9IHnYEZvGNdzOqgmLtVcOMWnPFPDHYvr4PWj18i0Sw3Ise9vGravUMuyT5Uc2qzugngMLsKviUbshQxNTPBUyT4AGd2dsWZwa0lv8kuU=@protonmail.com>

So I can't use neither use the the class mMatrix form Matrix in my package, neither define an internal union class of ("Matrix", "matrix").
If I define a union class with a different name, then I have to import the class "Matrix" from Matrix or I get a check error.
But then I need to add Matrix as Depends (or I get an error, which makes sense).
The issue is that if I add Matrix as Depends I get the error that the package "Matrix" is not found, when checking if the package can be installed.
This error does not happen when installing with R CMD INSTALL.

I eventually managed to reproduce the error: as soon as I add ggplot2 in Imports I get the error.
A DESCRIPTION file with this breaks:

Depends:
  Matrix
Imports:
  ggplot2


I have Matrix 1.2.18 and ggplot2 3.3.0





Sent with ProtonMail Secure Email.

??????? Original Message ???????
On Monday, May 18, 2020 2:31 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> On 29/04/2020 1:16 p.m., renozao wrote:
>
> > Thank you Martin,
> > Looks like the mMatrix class defined in Matrix is not exported in 3.6.3, maybe it is now exported in the current R-devel.
>
> Matrix doesn't have the same versions as R: it's a recommended package,
> not a base package. It can be updated independently of R. The current
> version on CRAN is 1.2-18, but the R-forge version is 1.3-0. Neither
> one exports mMatrix.
>
> Duncan Murdoch
>
> > In this case I'd rather use a conditional import and definition.
> > I'll try that route.
> > Bests,
> > Renaud
> > Sent with ProtonMail Secure Email.
> > ??????? Original Message ???????
> > On Saturday, April 18, 2020 12:36 PM, Martin Maechler maechler at stat.math.ethz.ch wrote:
> >
> > > > > > > > renozao
> > > > > > > > on Wed, 8 Apr 2020 16:19:59 +0000 writes:
> > >
> > > > Thank you William for the reproducible example.
> > >
> > >      > Currently I using the following (same as in William's example):
> > >
> > >      > setClassUnion("mMatrix", c("Matrix", "matrix"))
> > >
> > >
> > > > Martin, are the changes made in the union class handling affecting the way we should declare them?
> > >
> > > > Thank you.
> > >
> > > > Bests,
> > >
> > >      > Renaud
> > >
> > >
> > > Thank you, Renaud, and Bill Dunlap.
> > > There is obviously a bit of a problem there, but it may well be
> > > "only" a problem in error handling.
> > > As Bill's trace(get, ..) shows, R tries to get
> > > "#HAS_DUPLICATE_CLASS_NAMES" which is indeed an indication of the problem:
> > > You are trying to REdefine a class union that already exists
> > > identically in the Matrix package:
> > > In the R-forge development version of 'Matrix', it is
> > > line 717 of Matrix/R/AllClass.R (and that will be close also
> > > in the CRAN version of Matrix).
> > > So at least for you, Renaud, the solution to the problem is easy:
> > > Just don't do what you should not do: What you want is already
> > > part of Matrix.... and after searching: It's been part of
> > > Matrix since ca. July 2012 ...
> > >
> > > But yes, there's a buglet in the 'methods' package currently,
> > > which leads to a misleading error message
> > > (It's arguable if it should give an error which it did not previously;
> > > I think it would be quite a good idea to give at least a
> > > warning as you are masking class definition of the Matrix
> > > package which is in your search() path or at least among the
> > > loaded namespaces at this time).
> > > Best,
> > > Martin
> > >
> > > > ??????? Original Message ???????
> > >
> > >      > On Wednesday, April 8, 2020 11:19 AM, William Dunlap <wdunlap at tibco.com> wrote:
> > >
> > >
> > > > > Use trace() to get a bit more detail - .__C_compMatrix is looked for in the wrong environment with inherits=FALSE.
> > >
> > >      >>
> > >
> > >      >>> setClassUnion("mMatrix", c("Matrix", "matrix"))
> > >
> > >      >> Tracing get(name, envir = env) on entry
> > >
> > >      >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
> > >
> > >      >> Tracing get(name, envir = env) on entry
> > >
> > >      >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
> > >
> > >      >> Tracing get(name, envir = env) on entry
> > >
> > >      >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
> > >
> > >      >> Tracing get("#HAS_DUPLICATE_CLASS_NAMES", envir = .classTable) on entry
> > >
> > >      >> x="#HAS_DUPLICATE_CLASS_NAMES", envir="<environment: 0x2787710>", topenv="<environment: base>", inherits=TRUE
> > >
> > >      >> Tracing get(name, envir = env) on entry
> > >
> > >      >> x=".AllMTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
> > >
> > >      >> Tracing get(name, envir = env) on entry
> > >
> > >      >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
> > >
> > >      >> Tracing get(name, envir = env) on entry
> > >
> > >      >> x=".MTable", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
> > >
> > >      >> Tracing get(".SigLength", envir = env) on entry
> > >
> > >      >> x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
> > >
> > >      >> Tracing get(".SigLength", envir = env) on entry
> > >
> > >      >> x=".SigLength", envir="<environment: 0x21dcf10>", topenv="<environment: namespace:methods>", inherits=TRUE
> > >
> > >      >> Tracing get(name, envir = env) on entry
> > >
> > >      >> x=".MTable", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
> > >
> > >      >> Tracing get(".SigLength", envir = env) on entry
> > >
> > >      >> x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
> > >
> > >      >> Tracing get(".SigLength", envir = env) on entry
> > >
> > >      >> x=".SigLength", envir="<environment: 0x2238cf0>", topenv="<environment: namespace:methods>", inherits=TRUE
> > >
> > >      >> Tracing get(cname, envir = cwhere, inherits = FALSE) on entry
> > >
> > >      >> x=".__C__compMatrix", envir="<environment: R_GlobalEnv>", topenv="<environment: R_GlobalEnv>", inherits=FALSE
> > >
> > >      >> Error in get(cname, envir = cwhere, inherits = FALSE) :
> > >
> > >      >> object '.__C__compMatrix' not found
> > >
> > >      >> ...
> > >
> > >      >>
> > >
> > >      >> Bill Dunlap
> > >
> > >      >> TIBCO Software
> > >
> > >      >> wdunlap tibco.com
> > >
> > >      >>
> > >
> > >      >> On Wed, Apr 8, 2020 at 7:52 AM William Dunlap <wdunlap at tibco.com> wrote:
> > >
> > >      >>
> > >
> > >      >>> % R-devel --vanilla --quiet
> > >
> > >      >>>> library(Matrix)
> > >
> > >      >>>> setClassUnion("mMatrix", c("Matrix", "matrix"))
> > >
> > >      >>> Error in get(cname, envir = cwhere, inherits = FALSE) :
> > >
> > >      >>> object '.__C__compMatrix' not found
> > >
> > >      >>> Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
> > >
> > >      >>> unable to create union class:  could not set members "Matrix"
> > >
> > >      >>>> sessionInfo()
> > >
> > >      >>> R Under development (unstable) (2020-04-07 r78175)
> > >
> > >      >>> Platform: x86_64-pc-linux-gnu (64-bit)
> > >
> > >      >>> Running under: Ubuntu 16.04.6 LTS
> > >
> > >      >>>
> > >
> > >      >>> Matrix products: default
> > >
> > >      >>> BLAS/LAPACK: /usr/lib/libopenblasp-r0.2.18.so
> > >
> > >      >>>
> > >
> > >      >>> locale:
> > >
> > >      >>> [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
> > >
> > >      >>> [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
> > >
> > >      >>> [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
> > >
> > >      >>> [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
> > >
> > >      >>> [9] LC_ADDRESS=C               LC_TELEPHONE=C
> > >
> > >      >>> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
> > >
> > >      >>>
> > >
> > >      >>> attached base packages:
> > >
> > >      >>> [1] stats     graphics  grDevices utils     datasets  methods   base
> > >
> > >      >>>
> > >
> > >      >>> other attached packages:
> > >
> > >      >>> [1] Matrix_1.2-18
> > >
> > >      >>>
> > >
> > >      >>> loaded via a namespace (and not attached):
> > >
> > >      >>> [1] compiler_4.1.0  grid_4.1.0      lattice_0.20-41
> > >
> > >      >>>
> > >
> > >      >>> Bill Dunlap
> > >
> > >      >>> TIBCO Software
> > >
> > >      >>> wdunlap tibco.com
> > >
> > >      >>>
> > >
> > >      >>> On Wed, Apr 8, 2020 at 7:35 AM Martin Maechler <maechler at stat.math.ethz.ch> wrote:
> > >
> > >      >>>
> > >
> > >      >>>>>>>>> renozao
> > >
> > >      >>>>>>>>> on Mon, 30 Mar 2020 21:20:43 +0000 writes:
> > >
> > >      >>>>
> > >
> > >      >>>> > Hi,
> > >
> > >      >>>> > when R CMD check is run under R-devel (2020-03-29 r78108) I get the following error at installation:
> > >
> > >      >>>>
> > >
> > >      >>>> > Error in get(cname, envir = cwhere, inherits = FALSE) :
> > >
> > >      >>>> > object ?.__C__compMatrix? not found
> > >
> > >      >>>> > Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
> > >
> > >      >>>> > unable to create union class:  could not set members "Matrix"
> > >
> > >      >>>>
> > >
> > >      >>>> > This does not happen on R 3.6.3.
> > >
> > >      >>>>
> > >
> > >      >>>> > I tried with Matrix listed in Depends but I still get the same error.
> > >
> > >      >>>>
> > >
> > >      >>>> > Is this linked to some changes in union classes or the Matrix package?
> > >
> > >      >>>>
> > >
> > >      >>>> > Thank you.
> > >
> > >      >>>>
> > >
> > >      >>>> > Bests,
> > >
> > >      >>>> > Renaud
> > >
> > >      >>>>
> > >
> > >      >>>> Hi Renaud,
> > >
> > >      >>>> One reason you got no response here, is because we don't even
> > >
> > >      >>>> know about which package you are talking.
> > >
> > >      >>>>
> > >
> > >      >>>> So there's nothing, anybody can reproduce from your posting.
> > >
> > >      >>>>
> > >
> > >      >>>> There have been changes in R's dealing with class unions etc,
> > >
> > >      >>>> notably even *relating* to an earlier bug report on class unions
> > >
> > >      >>>> exactly for such a case which was *triggered* when people built
> > >
> > >      >>>> on such Matrix classes.
> > >
> > >      >>>>
> > >
> > >      >>>> But we would really want to be able to reproduce what you are seeing..
> > >
> > >      >>>>
> > >
> > >      >>>> Best regards,
> > >
> > >      >>>> Martin Maechler
> > >
> > >      >>>>
> > >
> > >      >>>> ETH Zurich, R Core Team *and* maintainer("Matrix")
> > >
> > >      >>>>
> > >
> > >      >>>> ______________________________________________
> > >
> > >      >>>> R-package-devel at r-project.org mailing list
> > >
> > >      >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> > >      > [[alternative HTML version deleted]]
> > >
> > >
> > > >
> > >
> > >      > R-package-devel at r-project.org mailing list
> > >
> > >      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> >
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From hongy|ng@un1101 @end|ng |rom gm@||@com  Thu May 21 21:14:35 2020
From: hongy|ng@un1101 @end|ng |rom gm@||@com (Hongying Sun)
Date: Thu, 21 May 2020 14:14:35 -0500
Subject: [R-pkg-devel] Difference between local R CMD check and winbuilder
Message-ID: <CAF54HsQVFpyFi7U7GGejnTC6B2qhJDrBjW7-Vjam3YARLT0x0Q@mail.gmail.com>

Hello,

My package passed the R CMD check locally on my desktop with Windows
system, but not the winbuilder.   These are both done on R-4.0.0.

Does this happen to anyone else?

Here is the error:

* checking PDF version of manual ... WARNING
LaTeX errors when creating PDF version.
This typically indicates Rd problems.
LaTeX errors found:
! LaTeX Error: There's no line here to end.

See the LaTeX manual or LaTeX Companion for explanation.
Type  H <return>  for immediate help.
 ...
* checking PDF version of manual without hyperrefs or index ... ERROR




I also have difficulty install R-devel on my desktop.  Here is the error
message:

$ tar -xvzf R-devel.tar.gz
Library/Frameworks/R.framework/
Library/Frameworks/R.framework/PrivateHeaders
Library/Frameworks/R.framework/Resources
Library/Frameworks/R.framework/Versions/
Library/Frameworks/R.framework/R
tar: Library/Frameworks/R.framework/R: Cannot create symlink to
?Versions/Current/R?: No such file or directory
Library/Frameworks/R.framework/Libraries
Library/Frameworks/R.framework/Headers
tar: Library/Frameworks/R.framework/Headers: Cannot create symlink to
?Versions/Current/Headers?: No such file or directory
Library/Frameworks/R.framework/Versions/Current
Aborted (core dumped)


  I'm new to R and this is my first R package.   Please help.   Much
appreciated.

Thanks,
Hongying

	[[alternative HTML version deleted]]


From t|m@b@te@ @end|ng |rom ed@@c@uk  Thu May 21 21:57:57 2020
From: t|m@b@te@ @end|ng |rom ed@@c@uk (BATES Timothy)
Date: Thu, 21 May 2020 19:57:57 +0000
Subject: [R-pkg-devel] 
 Difference between local R CMD check and winbuilder
In-Reply-To: <CAF54HsQVFpyFi7U7GGejnTC6B2qhJDrBjW7-Vjam3YARLT0x0Q@mail.gmail.com>
References: <CAF54HsQVFpyFi7U7GGejnTC6B2qhJDrBjW7-Vjam3YARLT0x0Q@mail.gmail.com>
Message-ID: <BFFA97CA-16F2-4B92-857F-EF0D88C9276D@ed.ac.uk>

Different error report: but I?ve been getting an error reported from winbuilder, but no error/code failures revealed in the log?


Running examples in 'umx-Ex.R' failed
The error most likely occurred in:


?

[example code with no error showing in the code?]


Passes release checks fine on MacOS with R 4.0.0 So, hard to debug?

Best, tim

On 21 May 2020, at 20:14, Hongying Sun <hongyingsun1101 at gmail.com<mailto:hongyingsun1101 at gmail.com>> wrote:
Hello,
My package passed the R CMD check locally on my desktop with Windows
system, but not the winbuilder.   These are both done on R-4.0.0.

Does this happen to anyone else?

Here is the error:

* checking PDF version of manual ... WARNING
LaTeX errors when creating PDF version.
This typically indicates Rd problems.
LaTeX errors found:
! LaTeX Error: There's no line here to end.

See the LaTeX manual or LaTeX Companion for explanation.
Type  H <return>  for immediate help.
...
* checking PDF version of manual without hyperrefs or index ... ERROR

$ tar -xvzf R-devel.tar.gz
Library/Frameworks/R.framework/
Library/Frameworks/R.framework/PrivateHeaders
Library/Frameworks/R.framework/Resources
Library/Frameworks/R.framework/Versions/
Library/Frameworks/R.framework/R
tar: Library/Frameworks/R.framework/R: Cannot create symlink to
?Versions/Current/R?: No such file or directory
Library/Frameworks/R.framework/Libraries
Library/Frameworks/R.framework/Headers
tar: Library/Frameworks/R.framework/Headers: Cannot create symlink to
?Versions/Current/Headers?: No such file or directory
Library/Frameworks/R.framework/Versions/Current
Aborted (core dumped)

 I'm new to R and this is my first R package.   Please help.   Much appreciated.
The University of Edinburgh is a charitable body, registered in Scotland, with registration number SC005336.

	[[alternative HTML version deleted]]


From |@r@h@d@t@b@@|nej@d @end|ng |rom @u@@energy@com  Thu May 21 22:54:10 2020
From: |@r@h@d@t@b@@|nej@d @end|ng |rom @u@@energy@com (FARSHAD TABASINEJAD)
Date: Thu, 21 May 2020 14:54:10 -0600
Subject: [R-pkg-devel] Package submission failed with two warnings
In-Reply-To: <CABtg=Kms_MXYPSW9Q34v5as34c9QAz1v6TJRBvweXOSKx7ZMeg@mail.gmail.com>
References: <1589517991120.72a63db72c4c0170@susaenergy.com>
 <0ef206c9-7166-cee4-ab05-35253ab7868e@gmail.com>
 <1589577100689.7cd4bf09384e458a@susaenergy.com>
 <5109fe3d98f2479896514e9b739ce9ed@umanitoba.ca>
 <CABtg=Kms_MXYPSW9Q34v5as34c9QAz1v6TJRBvweXOSKx7ZMeg@mail.gmail.com>
Message-ID: <1590094453125.2c19505a5ba59224@susaenergy.com>

Hi all,

Thank you very much for all your great comments.
I followed the Gabor?s suggestion and didn?t receive any warnings or errors by testing the package on different platforms using rhub::check_for_cran(). 

Regards,
Farshad


From: G?bor Cs?rdi
Sent: Friday, May 15, 2020 3:58 PM
To: Max Turgeon
Cc: FARSHAD TABASINEJAD; Duncan Murdoch; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Package submission failed with two warnings

The reason is that CRAN does not have an R-devel binary for
data.table, and because of this install.packages() decides not to
install it. Here is a workaround:
https://github.com/r-hub/rhub/issues/367#issuecomment-621757715

Gabor

On Fri, May 15, 2020 at 10:50 PM Max Turgeon <Max.Turgeon at umanitoba.ca> wrote:
>
> Hi Farshad,
>
>
> The error you get when compiling your vignette gives us a hint:
>
> Error: processing vignette 'Rpvt.Rmd' failed with diagnostics:
> package or namespace load failed for 'ggpubr' in loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()), versionCheck = vI[[j]]):
>  there is no package called 'data.table'
>
> There is a long chain of dependencies here: if I write A -> B to say that package A lists package B as an Import (and therefore package B is loaded when package A is attached), we have
>
>
> ggpubr -> rstatix -> car -> rio -> data.table.
>
>
> I think the issue is that, since you list ggpubr in "Suggests", there's never a check that all its dependencies (and their dependencies etc) are installed, and therefore data.table was not installed before checking your package. (But I'm not sure exactly why ggpubr is installed but not all the dependencies.)
>
>
> A solution would be to make your whole vignette fail "gracefully" when ggpubr isn't attached properly. Which is good practice anyway.
>
>
> Max Turgeon
> Assistant Professor
> Department of Statistics
> Department of Computer Science
> University of Manitoba
> maxturgeon.ca<http://maxturgeon.ca>
>
>
> ________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of FARSHAD TABASINEJAD <farshad.tabasinejad at susaenergy.com>
> Sent: May 15, 2020 4:11:36 PM
> To: Duncan Murdoch; r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Package submission failed with two warnings
>
> ********************************************************
> Caution: This message was sent from outside the University of Manitoba.
> ********************************************************
>
> Hi Duncan,
>
> I changed the version, recreated the package, and then tested it with the rhub::check_for_cran(). The function failed to create a summary for all the platform results together, however individual results are available in the following links.
>
>
> https://builder.r-hub.io/status/Rpvt_0.1.1.tar.gz-5e89b16f7bfb420ebe310a57eb8357b3
> https://artifacts.r-hub.io/Rpvt_0.1.1.tar.gz-5e89b16f7bfb420ebe310a57eb8357b3/
> https://artifacts.r-hub.io/Rpvt_0.1.1.tar.gz-2ee682316e0f4bc7b09faf7a9e46b670/
> https://builder.r-hub.io/status/original/Rpvt_0.1.1.tar.gz-08fc2dbd591f4d80b2e0049a7c8db8b8
>
> you can also find the source code in the following link:
> https://github.com/susaenergy/Rpvt
>
> Thank you for the help!
>
> Farshad
>
>
> From: Duncan Murdoch
> Sent: Friday, May 15, 2020 9:28 AM
> To: FARSHAD TABASINEJAD; r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Package submission failed with two warnings
>
> For your first warning, see the CRAN policy:  "Updates to
> previously-published packages must have an increased version. Increasing
> the version number at each submission reduces confusion so is preferred
> even when a previous submission was not accepted."
>
> For the second, it's hard to say what's happening.  Is your package
> online somewhere so we could try it on different machines?
>
> Duncan Murdoch
>
> On 15/05/2020 12:46 a.m., FARSHAD TABASINEJAD wrote:
> > Dear R-package-devel experts,
> >
> > This is the first time I?m writing to this platform about a package I recently submitted to CRAN (my first package).
> > While the package is already available on CRAN, I still must fix a few warnings and one error as reported on the CRAN package check results page:
> > https://cran.r-project.org/web/checks/check_results_Rpvt.html
> >
> > I recently resubmitted a modified version of the package to CRAN, however, it didn?t pass the automatic incoming checks.
> >
> > Windows:  https://win-builder.r-project.org/incoming_pretest/Rpvt_0.1.0_20200512_051950/Windows/00check.log
> > Status: 1 WARNING
> >
> > Debian:  https://win-builder.r-project.org/incoming_pretest/Rpvt_0.1.0_20200512_051950/Debian/00check.log
> > Status: 2 WARNINGs
> >
> >
> > 1) The first warning that appears on both Windows and Debian results is ?Insufficient package version (submitted: 0.1.0, existing: 0.1.0)?.
> >
> > Since the package is conditionally available on CRAN, do I need to modify the package version to 0.1.1 to get rid of this warning?
> > Is there any way to fix this problem with the current version of the package(0.1.0)?
> >
> > 2) The second problem appears on the Debian test results:
> >
> >      * checking re-building of vignette outputs ... [8s/8s] WARNING
> >
> >      Error(s) in re-building vignettes:
> >      ...
> >      --- re-building ?Rpvt.Rmd? using rmarkdown
> >
> >      pandoc-citeproc: Error in $: Incompatible API versions: encoded with [1,20] but attempted to decode with [1,17,5,4].
> >
> >      CallStack (from HasCallStack):
> >      error, called at ./Text/Pandoc/JSON.hs:111:48 in pandoc-types-1.17.5.4 5tHZ3B61A58JaKOMxwGQR4:Text.Pandoc.JSON
> >
> >      Error running filter /usr/bin/pandoc-citeproc:
> >
> >      Filter returned error status 1
> >      Error: processing vignette 'Rpvt.Rmd' failed with diagnostics:
> >      pandoc document conversion failed with error 83 ---
> >      failed re-building ?Rpvt.Rmd?
> >
> >      SUMMARY: processing the following file failed:
> >      ?Rpvt.Rmd?
> >
> >      Error: Vignette re-building failed.
> >      Execution halted
> >
> > I?ve created this package on a Windows operating system with no problem in creating the ?Rpvt.Rmd? file as is the case with the CRAN tests on x86_64-w64-mingw32 (64-bit).
> > Why does it fail to create the ?Rpvt.Rmd? file on x86_64-pc-linux-gnu (Debian)? Is this something related to the citation style of the library.bib file that I?ve used in my vignettes folder? It is the ?apa-6th-edition.csl? file downloaded from https://raw.githubusercontent.com/citation-style-language/styles/master/apa-6th-edition.csl
> >
> > Thank you in advance!
> >
> > Regards,
> > Farshad
> >
> >
> >        [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From j3||d|ck @end|ng |rom gm@||@com  Fri May 22 16:14:20 2020
From: j3||d|ck @end|ng |rom gm@||@com (Jeffrey Dick)
Date: Fri, 22 May 2020 22:14:20 +0800
Subject: [R-pkg-devel] Dependencies NOTE lost with --as-cran
Message-ID: <CANBtttZMxR9K-Wer9CZ5cdJ9QMWBH2pALwAxQbOS7svdiYnsRQ@mail.gmail.com>

Hi all,

I'm not sure whether this is a packaging problem or a bug. Consider a
minimal package 'testpkg' with these files. The DESCRIPTION is
slightly modified from the output of utils::package.skeleton() to
create valid Title, Description, and License, and add a single package
to Imports.

---

DESCRIPTION
-----------
Package: testpkg
Type: Package
Title: What the Package Does (Short Line)
Version: 1.0
Date: 2020-05-22
Author: Who wrote it
Maintainer: Who to complain to <yourfault at somewhere.net>
Description: More about what it does (maybe more than one line).
License: GPL-2
Imports: MASS

NAMESPACE [empty file]
---------

R/testfun.R
-----------
testfun <- function() {}

---

Note that NAMESPACE is present, but empty, so that testfun() is not
exported, and R CMD check doesn't complain about missing
documentation.

After building the package using R CMD build testpkg, I checked it twice with
R Under development (unstable) (2020-05-19 r78492) -- "Unsuffered Consequences"

1) R CMD check testpkg_1.0.tar.gz
...
* checking dependencies in R code ... NOTE
Namespace in Imports field not imported from: ?MASS?
  All declared Imports should be used.
...

2) R CMD check --as-cran testpkg_1.0.tar.gz
...
* checking CRAN incoming feasibility ... NOTE
[omitted text about New submission and placeholder content]
...
* checking dependencies in R code ... OK
...

My question is why the NOTE for "checking dependencies in R code" is
not present when using --as-cran? Possible clue: the NOTE also
disappears if testfun.R is removed.

Context: My package canprot_1.0.0 was recently published on CRAN. My
local checks with R CMD check --as-cran and checks on winbuilder both
showed "checking dependencies in R code ... OK", but now that the
package is on CRAN, a NOTE about "Namespace in Imports field not
imported from: ?knitr?" appears for a subset of check flavors
(https://cran.r-project.org/web/checks/check_results_canprot.html).

I found a probable solution for canprot, which is to move knitr from
Imports to Suggests. However, I am surprised that the package
apparently needs to be checked *without* --as-cran to raise this NOTE.

This unanswered SO question seems related (specifically, the
'unfortunate note' comment of @vlad1490), but doesn't addresses the
particular behavior of --as-cran:
https://stackoverflow.com/questions/48487541/r-cmd-check-note-namespace-in-imports-field-not-imported

Cheers,

Jeff


From kry|ov@r00t @end|ng |rom gm@||@com  Sun May 24 16:21:47 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sun, 24 May 2020 17:21:47 +0300
Subject: [R-pkg-devel] Guidelines on use of snow-style clusters in R
 packages?
Message-ID: <20200524172147.6cee696e@trisector>

Some of the packages I use make it possible to run some of the
computations in parallel. For example, sNPLS::cv_snpls calls
makeCluster() itself, makes sure that the package is loaded by workers,
exports the necessary variables and stops the cluster after it is
finished. On the other hand, multiway::parafac accepts arbitrary
cluster objects supplied by user, but requires the user to manually
preload the package on the workers. Both packages export and document
the internal functions intended to run on the workers.

Are there any guidelines for use of snow-style clusters in R packages? I
remember reading somewhere that accepting arbitrary cluster objects from
the user instead of makeCluster(detectCores()) is generally considered
a good idea (for multiple reasons ranging from giving the user more
control of CPU load to making it possible to run the code on a number
of networked machines that the package code knows nothing about), but I
couldn't find a reference for that in Writing R Extensions or parallel
package documentation.

What about preloading the package on the workers? Are there any
downsides to the package code unconditionally running clusterEvalQ(cl,
library(myself)) to avoid disappointing errors like "10 nodes produced
errors; first error: could not find function"?

Speaking of private functions intended to run by the package itself on
the worker nodes, should they be exported? I have prepared a test
package doing little more than the following:

R/fun.R:
private <- function(x) paste(x, Sys.getpid())
public <- function(cl, x) parallel::parLapply(cl, x, private)

NAMESPACE:
export(public)

The package passes R CMD check --as-cran without warnings or errors,
which seems to suggest that exporting worker functions is not required.

-- 
Best regards,
Ivan


From @|@n@c@nt|n @end|ng |rom c@n@d@@c@  Mon May 25 16:38:51 2020
From: @|@n@c@nt|n @end|ng |rom c@n@d@@c@ (Cantin, Alan (NRCan/RNCan))
Date: Mon, 25 May 2020 14:38:51 +0000
Subject: [R-pkg-devel] References in DESCRIPTION file
Message-ID: <7f27d41db73448b8989c6b96adb09a4e@PELEPCDEXC027.birch.int.bell.ca>

Hi folks,

Upon manual inspection of my package by CRAN maintainers I have been asked to put my references in the description field of the DESCRIPTION file. I have formatted all of my references as requested and put them there but get a note when checking the package (Malformed Description field: should contain one or more complete sentences.).  Does anyone have advice on how to place these here so I can clear this final hurdle to get the package back up on CRAN?

Thanks,

Alan Cantin


	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon May 25 16:53:01 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 25 May 2020 07:53:01 -0700
Subject: [R-pkg-devel] References in DESCRIPTION file
In-Reply-To: <7f27d41db73448b8989c6b96adb09a4e@PELEPCDEXC027.birch.int.bell.ca>
References: <7f27d41db73448b8989c6b96adb09a4e@PELEPCDEXC027.birch.int.bell.ca>
Message-ID: <CA776A88-70FD-44FF-8481-6EF8B4512C4D@dcn.davis.ca.us>

Sorry, ESP not working today. Note that this list may or may not include the reviewer who last checked your submission.

Perhaps re-read [1] and if you are still puzzled then consider pointing us to (or pasting into the body of the email) the DESCRIPTION file you are having difficulty with so we don't have to engage psychic powers.

Oh, and DON'T post HTML-formatted email on the R mailing lists.

[1] https://cran.r-project.org/web/packages/submission_checklist.html

On May 25, 2020 7:38:51 AM PDT, "Cantin, Alan (NRCan/RNCan)" <alan.cantin at canada.ca> wrote:
>Hi folks,
>
>Upon manual inspection of my package by CRAN maintainers I have been
>asked to put my references in the description field of the DESCRIPTION
>file. I have formatted all of my references as requested and put them
>there but get a note when checking the package (Malformed Description
>field: should contain one or more complete sentences.).  Does anyone
>have advice on how to place these here so I can clear this final hurdle
>to get the package back up on CRAN?
>
>Thanks,
>
>Alan Cantin
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Mon May 25 17:03:06 2020
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Mon, 25 May 2020 16:03:06 +0100
Subject: [R-pkg-devel] References in DESCRIPTION file
In-Reply-To: <7f27d41db73448b8989c6b96adb09a4e@PELEPCDEXC027.birch.int.bell.ca>
References: <7f27d41db73448b8989c6b96adb09a4e@PELEPCDEXC027.birch.int.bell.ca>
Message-ID: <ed488ffc-7a56-16ba-d44b-189281d25b88@dewey.myzen.co.uk>

Dear Alan

Without seeing your file it is hard to know but there are many examples 
on CRAN in the list of packages. It may be something simple like 
forgetting the full stop.

Michael

On 25/05/2020 15:38, Cantin, Alan (NRCan/RNCan) wrote:
> Hi folks,
> 
> Upon manual inspection of my package by CRAN maintainers I have been asked to put my references in the description field of the DESCRIPTION file. I have formatted all of my references as requested and put them there but get a note when checking the package (Malformed Description field: should contain one or more complete sentences.).  Does anyone have advice on how to place these here so I can clear this final hurdle to get the package back up on CRAN?
> 
> Thanks,
> 
> Alan Cantin
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From @|@n@c@nt|n @end|ng |rom c@n@d@@c@  Mon May 25 19:06:54 2020
From: @|@n@c@nt|n @end|ng |rom c@n@d@@c@ (Cantin, Alan (NRCan/RNCan))
Date: Mon, 25 May 2020 17:06:54 +0000
Subject: [R-pkg-devel] References in DESCRIPTION file
In-Reply-To: <CA776A88-70FD-44FF-8481-6EF8B4512C4D@dcn.davis.ca.us>
References: <7f27d41db73448b8989c6b96adb09a4e@PELEPCDEXC027.birch.int.bell.ca>
 <CA776A88-70FD-44FF-8481-6EF8B4512C4D@dcn.davis.ca.us>
Message-ID: <4310fdaffb19444c88952d344926a5d5@PELEPCDEXC027.birch.int.bell.ca>

Hi Jeff,

Thank you for your response. My apologies for the lack of information or unintentional HTML formatting, I will take note for next time. This response (and the link you provided) did, however, remind me to take another look at the question and I now understand that I mis-interpreted what was being asked of me, and instead of references, I was being asked to present in-text citations. This has been resolved and I appreciate you taking the time to respond to my question.

Cheers,

Alan

-----Original Message-----
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us> 
Sent: May 25, 2020 10:53
To: r-package-devel at r-project.org; Cantin, Alan (NRCan/RNCan) <alan.cantin at canada.ca>; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] References in DESCRIPTION file

Sorry, ESP not working today. Note that this list may or may not include the reviewer who last checked your submission.

Perhaps re-read [1] and if you are still puzzled then consider pointing us to (or pasting into the body of the email) the DESCRIPTION file you are having difficulty with so we don't have to engage psychic powers.

Oh, and DON'T post HTML-formatted email on the R mailing lists.

[1] https://cran.r-project.org/web/packages/submission_checklist.html

On May 25, 2020 7:38:51 AM PDT, "Cantin, Alan (NRCan/RNCan)" <alan.cantin at canada.ca> wrote:
>Hi folks,
>
>Upon manual inspection of my package by CRAN maintainers I have been 
>asked to put my references in the description field of the DESCRIPTION 
>file. I have formatted all of my references as requested and put them 
>there but get a note when checking the package (Malformed Description
>field: should contain one or more complete sentences.).  Does anyone 
>have advice on how to place these here so I can clear this final hurdle 
>to get the package back up on CRAN?
>
>Thanks,
>
>Alan Cantin
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list 
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

--
Sent from my phone. Please excuse my brevity.


From rh@|en @end|ng |rom gm@||@com  Thu May 28 08:44:09 2020
From: rh@|en @end|ng |rom gm@||@com (Ryan Hafen)
Date: Wed, 27 May 2020 23:44:09 -0700
Subject: [R-pkg-devel] Issue with submitting update of trelliscopejs to CRAN
Message-ID: <69E3237C-E54D-4C41-A9EC-7D83BF9B0FCF@gmail.com>

I submitted an update of trelliscopejs to CRAN a few days ago and received the following email:

Subject: [CRAN-pretest-archived] CRAN submission trelliscopejs 0.2.5

<<begin content>>

package trelliscopejs_0.2.5.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
Windows: <https://win-builder.r-project.org/incoming_pretest/trelliscopejs_0.2.5_20200525_203924/Windows/00check.log <https://win-builder.r-project.org/incoming_pretest/trelliscopejs_0.2.5_20200525_203924/Windows/00check.log>>
Status: OK
Debian: <https://win-builder.r-project.org/incoming_pretest/trelliscopejs_0.2.5_20200525_203924/Debian/00check.log <https://win-builder.r-project.org/incoming_pretest/trelliscopejs_0.2.5_20200525_203924/Debian/00check.log>>
Status: 1 NOTE

Last released version's CRAN status: ERROR: 5, OK: 7
See: <https://CRAN.R-project.org/web/checks/check_results_trelliscopejs.html <https://cran.r-project.org/web/checks/check_results_trelliscopejs.html>>

CRAN Web: <https://cran.r-project.org/package=trelliscopejs <https://cran.r-project.org/package=trelliscopejs>>

Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>>
If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.

More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/trelliscopejs_0.2.5_20200525_203924/ <https://win-builder.r-project.org/incoming_pretest/trelliscopejs_0.2.5_20200525_203924/>>
The files will be removed after roughly 7 days.

No strong reverse dependencies to be checked.

Best regards,
CRAN teams' auto-check service
Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
Check: CRAN incoming feasibility, Result: Note_to_CRAN_maintainers
 Maintainer: 'Ryan Hafen <rhafen at gmail.com <mailto:rhafen at gmail.com>>'

Flavor: r-devel-linux-x86_64-debian-gcc
Check: for detritus in the temp directory, Result: NOTE
 Found the following files/directories:
   'runtime-hornik?

<<end content>>

I can't reproduce this issue of the directory ?runtime-hornik' in any of my testing environments. The last CRAN submission in February didn?t have this issue, and the updates in the current submission don?t have anything to do with the creation of files.

Any advice for how to proceed would be appreciated.

Thanks,

Ryan
	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu May 28 13:26:20 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 28 May 2020 13:26:20 +0200
Subject: [R-pkg-devel] 
 Issue with submitting update of trelliscopejs to CRAN
In-Reply-To: <69E3237C-E54D-4C41-A9EC-7D83BF9B0FCF@gmail.com>
References: <69E3237C-E54D-4C41-A9EC-7D83BF9B0FCF@gmail.com>
Message-ID: <3f0f5e2c-08f5-6daa-6257-8a31fd318117@statistik.tu-dortmund.de>

Likely a false positive, we will accept this.

Best,
Uwe Ligges


On 28.05.2020 08:44, Ryan Hafen wrote:
> I submitted an update of trelliscopejs to CRAN a few days ago and received the following email:
> 
> Subject: [CRAN-pretest-archived] CRAN submission trelliscopejs 0.2.5
> 
> <<begin content>>
> 
> package trelliscopejs_0.2.5.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
> Windows: <https://win-builder.r-project.org/incoming_pretest/trelliscopejs_0.2.5_20200525_203924/Windows/00check.log <https://win-builder.r-project.org/incoming_pretest/trelliscopejs_0.2.5_20200525_203924/Windows/00check.log>>
> Status: OK
> Debian: <https://win-builder.r-project.org/incoming_pretest/trelliscopejs_0.2.5_20200525_203924/Debian/00check.log <https://win-builder.r-project.org/incoming_pretest/trelliscopejs_0.2.5_20200525_203924/Debian/00check.log>>
> Status: 1 NOTE
> 
> Last released version's CRAN status: ERROR: 5, OK: 7
> See: <https://CRAN.R-project.org/web/checks/check_results_trelliscopejs.html <https://cran.r-project.org/web/checks/check_results_trelliscopejs.html>>
> 
> CRAN Web: <https://cran.r-project.org/package=trelliscopejs <https://cran.r-project.org/package=trelliscopejs>>
> 
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>>
> If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
> 
> More details are given in the directory:
> <https://win-builder.r-project.org/incoming_pretest/trelliscopejs_0.2.5_20200525_203924/ <https://win-builder.r-project.org/incoming_pretest/trelliscopejs_0.2.5_20200525_203924/>>
> The files will be removed after roughly 7 days.
> 
> No strong reverse dependencies to be checked.
> 
> Best regards,
> CRAN teams' auto-check service
> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
> Check: CRAN incoming feasibility, Result: Note_to_CRAN_maintainers
>   Maintainer: 'Ryan Hafen <rhafen at gmail.com <mailto:rhafen at gmail.com>>'
> 
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: for detritus in the temp directory, Result: NOTE
>   Found the following files/directories:
>     'runtime-hornik?
> 
> <<end content>>
> 
> I can't reproduce this issue of the directory ?runtime-hornik' in any of my testing environments. The last CRAN submission in February didn?t have this issue, and the updates in the current submission don?t have anything to do with the creation of files.
> 
> Any advice for how to proceed would be appreciated.
> 
> Thanks,
> 
> Ryan
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From m|n@h@|| @end|ng |rom um|ch@edu  Mon Jun  1 04:56:34 2020
From: m|n@h@|| @end|ng |rom um|ch@edu (Greg Minshall)
Date: Sun, 31 May 2020 19:56:34 -0700
Subject: [R-pkg-devel] *not* re-making package if contents haven't changed
Message-ID: <1386619.1590980194@apollo2.minshall.org>

hi.  i use emacs org-mode to write my literate (semi-, in my case)
code.  then, 'tangle' the results into package/R/foo.R, etc.

the tangling is driven by a makefile.  (my methodology is to make the
package source tree as a subdirectory of where my makefile sits; i
realize this is non-standard, and in many respects sub-optimal.)

the makefile then proceeds to R-CMD-build, R-CMD-check, and, assuming
those pass, Rscript-install the package.

i would like to *not* do the build/check/install if, in fact, nothing
has changed in the tangled files since the last time the
build/check/install ran.  the *dates* of the files (which is what make
typically looks at) *will* have changed.  but, i want to rely on the
contents, not on the dates.

i can imagine various hacks to accomplish this.  but, i thought that
someone on the list may have run into this before and have a
recommendation.

if so, i'm all ears!  thanks in advance.

cheers, Greg


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Mon Jun  1 09:54:33 2020
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Mon, 1 Jun 2020 07:54:33 +0000
Subject: [R-pkg-devel] 
 *not* re-making package if contents haven't changed
In-Reply-To: <1386619.1590980194@apollo2.minshall.org>
References: <1386619.1590980194@apollo2.minshall.org>
Message-ID: <HE1PR0102MB3258A778C8598351A159731DAE8A0@HE1PR0102MB3258.eurprd01.prod.exchangelabs.com>

Maybe let 'git' decide which files have changed?

Georgi Boshnakov

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Greg Minshall
Sent: 01 June 2020 03:57
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] *not* re-making package if contents haven't changed

hi.  i use emacs org-mode to write my literate (semi-, in my case) code.  then, 'tangle' the results into package/R/foo.R, etc.

the tangling is driven by a makefile.  (my methodology is to make the package source tree as a subdirectory of where my makefile sits; i realize this is non-standard, and in many respects sub-optimal.)

the makefile then proceeds to R-CMD-build, R-CMD-check, and, assuming those pass, Rscript-install the package.

i would like to *not* do the build/check/install if, in fact, nothing has changed in the tangled files since the last time the build/check/install ran.  the *dates* of the files (which is what make typically looks at) *will* have changed.  but, i want to rely on the contents, not on the dates.

i can imagine various hacks to accomplish this.  but, i thought that someone on the list may have run into this before and have a recommendation.

if so, i'm all ears!  thanks in advance.

cheers, Greg

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jun  1 13:44:33 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 1 Jun 2020 07:44:33 -0400
Subject: [R-pkg-devel] Workflow for Javascript in package?
Message-ID: <cf1785e3-48fc-7277-44ac-b78ccce71f2f@gmail.com>

The rgl package includes a large amount of Javascript source to handle 
the display of output in browsers using rglwidget().  Currently this is 
mostly in one big file (inst/htmlwidgets/lib/rglClass/rglClass.src.js), 
but I'd like to make some improvements:

  - splitting it into separate files with related functions
  - automatically "compiling" it into a single file stripped of white 
space and comments, for faster loading.

Unfortunately, I have no other experience writing a Javascript library, 
so I really don't know what I'm doing.  Can anyone point me to other R 
packages containing htmlwidgets that do this "properly", or point to 
instructions for the standard workflow for Javascript library 
development outside of R that I could adapt?

Duncan Murdoch


From j@goreck| @end|ng |rom w|t@edu@p|  Mon Jun  1 13:58:19 2020
From: j@goreck| @end|ng |rom w|t@edu@p| (Jan Gorecki)
Date: Mon, 1 Jun 2020 12:58:19 +0100
Subject: [R-pkg-devel] R_MAKEVARS_USER fail to pass down to sub-makes?
Message-ID: <CAOO9MKUtBYnT1eMzYnZ6m-6i8Tqm6sYP23iXP4oC0gMMV2MG9A@mail.gmail.com>

Hi package devel support,

I am trying to use R_MAKEVARS_USER to customize build, rather than
.R/Makevars. It is properly displayed from config CFLAGS but during
package install it doesn't seem to work.

In R-admin in "6.3.3 Customizing package compilation" there is:

> Note that these mechanisms do not work with packages which fail to pass settings down to sub-makes, perhaps reading etc/Makeconf in makefiles in subdirectories.

It seems that it applies to me. How should I debug that? to make this
env var respected? Note that my pkg has src/Makevars to handle openmp
switch nicely
Thank you

system("R_MAKEVARS_USER=library/gcc/O3/Makevars R CMD config CFLAGS")
-O3

system("R_MAKEVARS_USER=library/gcc/O3/Makevars R CMD INSTALL
--library=library/gcc/O3 mypkg_1.0.0.tar.gz")
* installing *source* package 'mypkg' ...
** using staged installation
** libs
gcc -std=gnu99 -I"/usr/share/R/include" -DNDEBUG    -fopenmp -fpic  -g
-O2 -fdebug-prefix-map=/build/r-base-V28x5H/r-base-3.6.3=.
-fstack-protector-strong -Wformat -Werror=format-security -Wdate-time
-D_FORTIFY_SOURCE=2 -g  -c assign.c -o assign.o


From h@n@on @end|ng |rom dep@uw@edu  Mon Jun  1 15:15:40 2020
From: h@n@on @end|ng |rom dep@uw@edu (Bryan Hanson)
Date: Mon, 1 Jun 2020 09:15:40 -0400
Subject: [R-pkg-devel] Workflow for Javascript in package?
In-Reply-To: <cf1785e3-48fc-7277-44ac-b78ccce71f2f@gmail.com>
References: <cf1785e3-48fc-7277-44ac-b78ccce71f2f@gmail.com>
Message-ID: <FF0378B6-2B8A-4A06-AA6D-88FB06F3787A@depauw.edu>

Duncan, I don?t think it is a particularly clever or efficient example, but my package exCon does some of what you describe.  Additional disclaimer: I?m not very good at serious Javascript, and find the scoping rules challenging.  Even so, exCon works pretty well on large data sets.  But you may be more interested in the infrastructure aspects.

https://cran.r-project.org/package=exCon <https://cran.r-project.org/package=exCon>

The gathering of separate .js files, minifying and deployment are handled in the main function exCon.R.  Javascript  and html files in inst/extdata.

Bryan
****************
Prof. Bryan Hanson (emeritus)
Dept of Chemistry & Biochemistry
DePauw University
Greencastle IN 46135 USA
Web: academic.depauw.edu/~hanson/index.html
Repo: github.com/bryanhanson
Nerdy Blog: ChemoSpec.org
The Twit: @ProfBryanHanson
I?m usually @ -4 GMT/UTC

> On Jun 1, 2020, at 7:44 AM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> The rgl package includes a large amount of Javascript source to handle the display of output in browsers using rglwidget().  Currently this is mostly in one big file (inst/htmlwidgets/lib/rglClass/rglClass.src.js), but I'd like to make some improvements:
> 
> - splitting it into separate files with related functions
> - automatically "compiling" it into a single file stripped of white space and comments, for faster loading.
> 
> Unfortunately, I have no other experience writing a Javascript library, so I really don't know what I'm doing.  Can anyone point me to other R packages containing htmlwidgets that do this "properly", or point to instructions for the standard workflow for Javascript library development outside of R that I could adapt?
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel












	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jun  1 16:29:33 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 1 Jun 2020 10:29:33 -0400
Subject: [R-pkg-devel] Workflow for Javascript in package?
In-Reply-To: <FF0378B6-2B8A-4A06-AA6D-88FB06F3787A@depauw.edu>
References: <cf1785e3-48fc-7277-44ac-b78ccce71f2f@gmail.com>
 <FF0378B6-2B8A-4A06-AA6D-88FB06F3787A@depauw.edu>
Message-ID: <bd19e917-4511-f994-7ec8-03c9d61932b5@gmail.com>

On 01/06/2020 9:15 a.m., Bryan Hanson wrote:
> Duncan, I don?t think it is a particularly clever or efficient example, 
> but my package exCon does some of what you describe. ?Additional 
> disclaimer: I?m not very good at serious Javascript, and find the 
> scoping rules challenging. ?Even so, exCon works pretty well on large 
> data sets. ?But you may be more interested in the infrastructure aspects.

Thanks!  I hadn't thought of using js::uglify_optimize().

I'd like to do the minification during package install rather than when 
used, and this appears to work in the R source code (at top level):

text <- 
readLines(system.file("htmlwidgets/lib/rglClass/rglClass.src.js", 
package = "rgl"))

if (requireNamespace("js", quietly = TRUE))
   text <- js::uglify_optimize(text)

writeLines(text, file.path(system.file("htmlwidgets/lib/rglClass", 
package = "rgl"), "rglClass.js"))

rm(text)

I'm not completely sure this is supported/allowed, though I don't see a 
CRAN rule to disallow it.

Now I can work on splitting up the big file, and doing a somewhat more 
complicated install of rglClass.js.

Duncan Murdoch

> 
> https://cran.r-project.org/package=exCon
> 
> The gathering of separate .js files, minifying and deployment are 
> handled in the main function exCon.R. ?Javascript ?and html files in 
> inst/extdata.
> 
> Bryan
> ****************
> Prof. Bryan Hanson (emeritus)
> Dept of Chemistry & Biochemistry
> DePauw University
> Greencastle IN 46135 USA
> Web: academic.depauw.edu/~hanson/index.html 
> <http://academic.depauw.edu/~hanson/index.html>
> Repo: github.com/bryanhanson <http://github.com/bryanhanson>
> Nerdy Blog: ChemoSpec.org <http://ChemoSpec.org>
> The Twit: @ProfBryanHanson
> I?m usually @ -4 GMT/UTC
> 
>> On Jun 1, 2020, at 7:44 AM, Duncan Murdoch <murdoch.duncan at gmail.com 
>> <mailto:murdoch.duncan at gmail.com>> wrote:
>>
>> The rgl package includes a large amount of Javascript source to handle 
>> the display of output in browsers using rglwidget(). ?Currently this 
>> is mostly in one big file 
>> (inst/htmlwidgets/lib/rglClass/rglClass.src.js), but I'd like to make 
>> some improvements:
>>
>> - splitting it into separate files with related functions
>> - automatically "compiling" it into a single file stripped of white 
>> space and comments, for faster loading.
>>
>> Unfortunately, I have no other experience writing a Javascript 
>> library, so I really don't know what I'm doing. ?Can anyone point me 
>> to other R packages containing htmlwidgets that do this "properly", or 
>> point to instructions for the standard workflow for Javascript library 
>> development outside of R that I could adapt?
>>
>> Duncan Murdoch
>>
>> ______________________________________________
>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> 
>> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Jun  1 17:03:57 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 01 Jun 2020 08:03:57 -0700
Subject: [R-pkg-devel] R_MAKEVARS_USER fail to pass down to sub-makes?
In-Reply-To: <CAOO9MKUtBYnT1eMzYnZ6m-6i8Tqm6sYP23iXP4oC0gMMV2MG9A@mail.gmail.com>
References: <CAOO9MKUtBYnT1eMzYnZ6m-6i8Tqm6sYP23iXP4oC0gMMV2MG9A@mail.gmail.com>
Message-ID: <9FDF5B85-C77F-42CA-9FA8-86EA283FCD57@dcn.davis.ca.us>

I don't know anything about the function of that environment variable, but 

a) system() invokes a child process so environment variable changes made using it will only affect the child process created by that system call.

b) The syntax you have used is shell-specific, so does not look portable.

On June 1, 2020 4:58:19 AM PDT, Jan Gorecki <j.gorecki at wit.edu.pl> wrote:
>Hi package devel support,
>
>I am trying to use R_MAKEVARS_USER to customize build, rather than
>.R/Makevars. It is properly displayed from config CFLAGS but during
>package install it doesn't seem to work.
>
>In R-admin in "6.3.3 Customizing package compilation" there is:
>
>> Note that these mechanisms do not work with packages which fail to
>pass settings down to sub-makes, perhaps reading etc/Makeconf in
>makefiles in subdirectories.
>
>It seems that it applies to me. How should I debug that? to make this
>env var respected? Note that my pkg has src/Makevars to handle openmp
>switch nicely
>Thank you
>
>system("R_MAKEVARS_USER=library/gcc/O3/Makevars R CMD config CFLAGS")
>-O3
>
>system("R_MAKEVARS_USER=library/gcc/O3/Makevars R CMD INSTALL
>--library=library/gcc/O3 mypkg_1.0.0.tar.gz")
>* installing *source* package 'mypkg' ...
>** using staged installation
>** libs
>gcc -std=gnu99 -I"/usr/share/R/include" -DNDEBUG    -fopenmp -fpic  -g
>-O2 -fdebug-prefix-map=/build/r-base-V28x5H/r-base-3.6.3=.
>-fstack-protector-strong -Wformat -Werror=format-security -Wdate-time
>-D_FORTIFY_SOURCE=2 -g  -c assign.c -o assign.o
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From w@ngz1 @end|ng |rom uth@c@@@edu  Mon Jun  1 18:34:27 2020
From: w@ngz1 @end|ng |rom uth@c@@@edu (Wang, Zhu)
Date: Mon, 1 Jun 2020 16:34:27 +0000
Subject: [R-pkg-devel] Warning: S4 exports specified in 'NAMESPACE' but not
 defined in package
Message-ID: <SN6PR10MB2432C7AF2DF09686942698399F8A0@SN6PR10MB2432.namprd10.prod.outlook.com>

Dear All,

I received warnings regarding a package:

https://cran.r-project.org/web/checks/check_results_bujar.html

The warning still occurred after I changed export(bujar, gcv.enet) to export(bujar) in NAMESPACE. The function bujar was defined in the package, so I probably missed something in Sec 1.5.6 in Writing R Extensions.

Could somebody kindly advise how to address the warning?

Thanks,

Zhu Wang

	[[alternative HTML version deleted]]


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Mon Jun  1 18:52:41 2020
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Mon, 1 Jun 2020 16:52:41 +0000
Subject: [R-pkg-devel] 
 Warning: S4 exports specified in 'NAMESPACE' but not
 defined in package
In-Reply-To: <SN6PR10MB2432C7AF2DF09686942698399F8A0@SN6PR10MB2432.namprd10.prod.outlook.com>
References: <SN6PR10MB2432C7AF2DF09686942698399F8A0@SN6PR10MB2432.namprd10.prod.outlook.com>
Message-ID: <f450cc9dc3dc42258e3223b4409b1133@umanitoba.ca>

Good morning,


I had a quick look at the source file on CRAN, and I don't see any evidence that you're using S4 classes...? Indeed, at the end of your function 'bujar', you are defining the class of the results using "class(x) <- value", which is an S3 idiom.


If indeed you're using S3 instead of S4, then the correct section of WRE is 1.5.2, and therefore you'll need to clean up your NAMESPACE.


Best,


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Wang, Zhu <wangz1 at uthscsa.edu>
Sent: June 1, 2020 11:34:27 AM
To: R-package-devel at r-project.org
Subject: [R-pkg-devel] Warning: S4 exports specified in 'NAMESPACE' but not defined in package

********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

Dear All,

I received warnings regarding a package:

https://cran.r-project.org/web/checks/check_results_bujar.html

The warning still occurred after I changed export(bujar, gcv.enet) to export(bujar) in NAMESPACE. The function bujar was defined in the package, so I probably missed something in Sec 1.5.6 in Writing R Extensions.

Could somebody kindly advise how to address the warning?

Thanks,

Zhu Wang

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From w@ngz1 @end|ng |rom uth@c@@@edu  Mon Jun  1 19:50:10 2020
From: w@ngz1 @end|ng |rom uth@c@@@edu (Wang, Zhu)
Date: Mon, 1 Jun 2020 17:50:10 +0000
Subject: [R-pkg-devel] 
 Warning: S4 exports specified in 'NAMESPACE' but not
 defined in package
In-Reply-To: <f450cc9dc3dc42258e3223b4409b1133@umanitoba.ca>
References: <SN6PR10MB2432C7AF2DF09686942698399F8A0@SN6PR10MB2432.namprd10.prod.outlook.com>
 <f450cc9dc3dc42258e3223b4409b1133@umanitoba.ca>
Message-ID: <SN6PR10MB243286447FCE575B267618C69F8A0@SN6PR10MB2432.namprd10.prod.outlook.com>

Thanks Max for the very helpful reply.

Best,

Zhu

From: Max Turgeon <Max.Turgeon at umanitoba.ca>
Sent: Monday, June 1, 2020 11:53 AM
To: Wang, Zhu <wangz1 at uthscsa.edu>; R-package-devel at r-project.org
Subject: Re: Warning: S4 exports specified in 'NAMESPACE' but not defined in package


Good morning,



I had a quick look at the source file on CRAN, and I don't see any evidence that you're using S4 classes...? Indeed, at the end of your function 'bujar', you are defining the class of the results using "class(x) <- value", which is an S3 idiom.



If indeed you're using S3 instead of S4, then the correct section of WRE is 1.5.2, and therefore you'll need to clean up your NAMESPACE.



Best,


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>



________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org<mailto:r-package-devel-bounces at r-project.org>> on behalf of Wang, Zhu <wangz1 at uthscsa.edu<mailto:wangz1 at uthscsa.edu>>
Sent: June 1, 2020 11:34:27 AM
To: R-package-devel at r-project.org<mailto:R-package-devel at r-project.org>
Subject: [R-pkg-devel] Warning: S4 exports specified in 'NAMESPACE' but not defined in package

********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

Dear All,

I received warnings regarding a package:

https://cran.r-project.org/web/checks/check_results_bujar.html

The warning still occurred after I changed export(bujar, gcv.enet) to export(bujar) in NAMESPACE. The function bujar was defined in the package, so I probably missed something in Sec 1.5.6 in Writing R Extensions.

Could somebody kindly advise how to address the warning?

Thanks,

Zhu Wang

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From j@goreck| @end|ng |rom w|t@edu@p|  Mon Jun  1 20:10:41 2020
From: j@goreck| @end|ng |rom w|t@edu@p| (Jan Gorecki)
Date: Mon, 1 Jun 2020 19:10:41 +0100
Subject: [R-pkg-devel] R_MAKEVARS_USER fail to pass down to sub-makes?
In-Reply-To: <9FDF5B85-C77F-42CA-9FA8-86EA283FCD57@dcn.davis.ca.us>
References: <CAOO9MKUtBYnT1eMzYnZ6m-6i8Tqm6sYP23iXP4oC0gMMV2MG9A@mail.gmail.com>
 <9FDF5B85-C77F-42CA-9FA8-86EA283FCD57@dcn.davis.ca.us>
Message-ID: <CAOO9MKXU=sUpxLhN=bKerP96TJ75tJA0Px4eXEKuoESFiFLyBg@mail.gmail.com>

Thank you Jeff for your comments.
Yet they does not seem to be related.
a) Environment variable is created inside `system` command, so env var
stays valid for the command. Which is confirmed in the first call that
properly shows CFLAGS.
b) Syntax passed checkbashisms so I expect no problems due to that.

On Mon, Jun 1, 2020 at 4:03 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> I don't know anything about the function of that environment variable, but
>
> a) system() invokes a child process so environment variable changes made using it will only affect the child process created by that system call.
>
> b) The syntax you have used is shell-specific, so does not look portable.
>
> On June 1, 2020 4:58:19 AM PDT, Jan Gorecki <j.gorecki at wit.edu.pl> wrote:
> >Hi package devel support,
> >
> >I am trying to use R_MAKEVARS_USER to customize build, rather than
> >.R/Makevars. It is properly displayed from config CFLAGS but during
> >package install it doesn't seem to work.
> >
> >In R-admin in "6.3.3 Customizing package compilation" there is:
> >
> >> Note that these mechanisms do not work with packages which fail to
> >pass settings down to sub-makes, perhaps reading etc/Makeconf in
> >makefiles in subdirectories.
> >
> >It seems that it applies to me. How should I debug that? to make this
> >env var respected? Note that my pkg has src/Makevars to handle openmp
> >switch nicely
> >Thank you
> >
> >system("R_MAKEVARS_USER=library/gcc/O3/Makevars R CMD config CFLAGS")
> >-O3
> >
> >system("R_MAKEVARS_USER=library/gcc/O3/Makevars R CMD INSTALL
> >--library=library/gcc/O3 mypkg_1.0.0.tar.gz")
> >* installing *source* package 'mypkg' ...
> >** using staged installation
> >** libs
> >gcc -std=gnu99 -I"/usr/share/R/include" -DNDEBUG    -fopenmp -fpic  -g
> >-O2 -fdebug-prefix-map=/build/r-base-V28x5H/r-base-3.6.3=.
> >-fstack-protector-strong -Wformat -Werror=format-security -Wdate-time
> >-D_FORTIFY_SOURCE=2 -g  -c assign.c -o assign.o
> >
> >______________________________________________
> >R-package-devel at r-project.org mailing list
> >https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
> Sent from my phone. Please excuse my brevity.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Jun  1 20:20:14 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 01 Jun 2020 11:20:14 -0700
Subject: [R-pkg-devel] R_MAKEVARS_USER fail to pass down to sub-makes?
In-Reply-To: <CAOO9MKXU=sUpxLhN=bKerP96TJ75tJA0Px4eXEKuoESFiFLyBg@mail.gmail.com>
References: <CAOO9MKUtBYnT1eMzYnZ6m-6i8Tqm6sYP23iXP4oC0gMMV2MG9A@mail.gmail.com>
 <9FDF5B85-C77F-42CA-9FA8-86EA283FCD57@dcn.davis.ca.us>
 <CAOO9MKXU=sUpxLhN=bKerP96TJ75tJA0Px4eXEKuoESFiFLyBg@mail.gmail.com>
Message-ID: <2DD6634D-3E32-4BA2-8800-507BA621DB24@dcn.davis.ca.us>

Each call to system is independent, so it definitely is a problem.

Use Sys.setenv to make changes in environment variables that can be used within system calls.

Bash is not involved with the system call on Windows... so your syntax for setting an environment variable is not portable.

On June 1, 2020 11:10:41 AM PDT, Jan Gorecki <j.gorecki at wit.edu.pl> wrote:
>Thank you Jeff for your comments.
>Yet they does not seem to be related.
>a) Environment variable is created inside `system` command, so env var
>stays valid for the command. Which is confirmed in the first call that
>properly shows CFLAGS.
>b) Syntax passed checkbashisms so I expect no problems due to that.
>
>On Mon, Jun 1, 2020 at 4:03 PM Jeff Newmiller
><jdnewmil at dcn.davis.ca.us> wrote:
>>
>> I don't know anything about the function of that environment
>variable, but
>>
>> a) system() invokes a child process so environment variable changes
>made using it will only affect the child process created by that system
>call.
>>
>> b) The syntax you have used is shell-specific, so does not look
>portable.
>>
>> On June 1, 2020 4:58:19 AM PDT, Jan Gorecki <j.gorecki at wit.edu.pl>
>wrote:
>> >Hi package devel support,
>> >
>> >I am trying to use R_MAKEVARS_USER to customize build, rather than
>> >.R/Makevars. It is properly displayed from config CFLAGS but during
>> >package install it doesn't seem to work.
>> >
>> >In R-admin in "6.3.3 Customizing package compilation" there is:
>> >
>> >> Note that these mechanisms do not work with packages which fail to
>> >pass settings down to sub-makes, perhaps reading etc/Makeconf in
>> >makefiles in subdirectories.
>> >
>> >It seems that it applies to me. How should I debug that? to make
>this
>> >env var respected? Note that my pkg has src/Makevars to handle
>openmp
>> >switch nicely
>> >Thank you
>> >
>> >system("R_MAKEVARS_USER=library/gcc/O3/Makevars R CMD config
>CFLAGS")
>> >-O3
>> >
>> >system("R_MAKEVARS_USER=library/gcc/O3/Makevars R CMD INSTALL
>> >--library=library/gcc/O3 mypkg_1.0.0.tar.gz")
>> >* installing *source* package 'mypkg' ...
>> >** using staged installation
>> >** libs
>> >gcc -std=gnu99 -I"/usr/share/R/include" -DNDEBUG    -fopenmp -fpic 
>-g
>> >-O2 -fdebug-prefix-map=/build/r-base-V28x5H/r-base-3.6.3=.
>> >-fstack-protector-strong -Wformat -Werror=format-security
>-Wdate-time
>> >-D_FORTIFY_SOURCE=2 -g  -c assign.c -o assign.o
>> >
>> >______________________________________________
>> >R-package-devel at r-project.org mailing list
>> >https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> --
>> Sent from my phone. Please excuse my brevity.

-- 
Sent from my phone. Please excuse my brevity.


From j@goreck| @end|ng |rom w|t@edu@p|  Mon Jun  1 20:35:55 2020
From: j@goreck| @end|ng |rom w|t@edu@p| (Jan Gorecki)
Date: Mon, 1 Jun 2020 19:35:55 +0100
Subject: [R-pkg-devel] R_MAKEVARS_USER fail to pass down to sub-makes?
In-Reply-To: <2DD6634D-3E32-4BA2-8800-507BA621DB24@dcn.davis.ca.us>
References: <CAOO9MKUtBYnT1eMzYnZ6m-6i8Tqm6sYP23iXP4oC0gMMV2MG9A@mail.gmail.com>
 <9FDF5B85-C77F-42CA-9FA8-86EA283FCD57@dcn.davis.ca.us>
 <CAOO9MKXU=sUpxLhN=bKerP96TJ75tJA0Px4eXEKuoESFiFLyBg@mail.gmail.com>
 <2DD6634D-3E32-4BA2-8800-507BA621DB24@dcn.davis.ca.us>
Message-ID: <CAOO9MKUVonZ17H=dYYE+DRshmZtGNSN8F5X+6qyyzNMugE42gg@mail.gmail.com>

What is the problem exactly? variable name is hardcoded, and variable
value is hardcoded as well.
How it is possible for the second `system` call to deliver different
makevars file than the first one?
This is the problem in question.

Yes, I haven't thought about Windows. I should have mentioned I am on Linux.

On Mon, Jun 1, 2020 at 7:20 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> Each call to system is independent, so it definitely is a problem.
>
> Use Sys.setenv to make changes in environment variables that can be used within system calls.
>
> Bash is not involved with the system call on Windows... so your syntax for setting an environment variable is not portable.
>
> On June 1, 2020 11:10:41 AM PDT, Jan Gorecki <j.gorecki at wit.edu.pl> wrote:
> >Thank you Jeff for your comments.
> >Yet they does not seem to be related.
> >a) Environment variable is created inside `system` command, so env var
> >stays valid for the command. Which is confirmed in the first call that
> >properly shows CFLAGS.
> >b) Syntax passed checkbashisms so I expect no problems due to that.
> >
> >On Mon, Jun 1, 2020 at 4:03 PM Jeff Newmiller
> ><jdnewmil at dcn.davis.ca.us> wrote:
> >>
> >> I don't know anything about the function of that environment
> >variable, but
> >>
> >> a) system() invokes a child process so environment variable changes
> >made using it will only affect the child process created by that system
> >call.
> >>
> >> b) The syntax you have used is shell-specific, so does not look
> >portable.
> >>
> >> On June 1, 2020 4:58:19 AM PDT, Jan Gorecki <j.gorecki at wit.edu.pl>
> >wrote:
> >> >Hi package devel support,
> >> >
> >> >I am trying to use R_MAKEVARS_USER to customize build, rather than
> >> >.R/Makevars. It is properly displayed from config CFLAGS but during
> >> >package install it doesn't seem to work.
> >> >
> >> >In R-admin in "6.3.3 Customizing package compilation" there is:
> >> >
> >> >> Note that these mechanisms do not work with packages which fail to
> >> >pass settings down to sub-makes, perhaps reading etc/Makeconf in
> >> >makefiles in subdirectories.
> >> >
> >> >It seems that it applies to me. How should I debug that? to make
> >this
> >> >env var respected? Note that my pkg has src/Makevars to handle
> >openmp
> >> >switch nicely
> >> >Thank you
> >> >
> >> >system("R_MAKEVARS_USER=library/gcc/O3/Makevars R CMD config
> >CFLAGS")
> >> >-O3
> >> >
> >> >system("R_MAKEVARS_USER=library/gcc/O3/Makevars R CMD INSTALL
> >> >--library=library/gcc/O3 mypkg_1.0.0.tar.gz")
> >> >* installing *source* package 'mypkg' ...
> >> >** using staged installation
> >> >** libs
> >> >gcc -std=gnu99 -I"/usr/share/R/include" -DNDEBUG    -fopenmp -fpic
> >-g
> >> >-O2 -fdebug-prefix-map=/build/r-base-V28x5H/r-base-3.6.3=.
> >> >-fstack-protector-strong -Wformat -Werror=format-security
> >-Wdate-time
> >> >-D_FORTIFY_SOURCE=2 -g  -c assign.c -o assign.o
> >> >
> >> >______________________________________________
> >> >R-package-devel at r-project.org mailing list
> >> >https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >> --
> >> Sent from my phone. Please excuse my brevity.
>
> --
> Sent from my phone. Please excuse my brevity.


From @eb@meyer @end|ng |rom |@u@de  Mon Jun  1 20:52:33 2020
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Mon, 1 Jun 2020 20:52:33 +0200
Subject: [R-pkg-devel] 
 Warning: S4 exports specified in 'NAMESPACE' but not
 defined in package
In-Reply-To: <SN6PR10MB2432C7AF2DF09686942698399F8A0@SN6PR10MB2432.namprd10.prod.outlook.com>
References: <SN6PR10MB2432C7AF2DF09686942698399F8A0@SN6PR10MB2432.namprd10.prod.outlook.com>
Message-ID: <ba71f151-6be2-6c73-e920-892b5a221555@fau.de>

This is a new check in R-devel. The NEWS say:

> R CMD check etc now warn when a package exports non-existing S4 classes or methods, also in case of no "methods" presence

In your case, the NAMESPACE contains

> exportClasses("bujar")
> exportMethods("show")

but the package neither defines an S4 class "bujar" nor methods for the
S4 generic "show". You should remove these two lines from your NAMESPACE.

Best regards,

	Sebastian Meyer


Am 01.06.20 um 18:34 schrieb Wang, Zhu:
> Dear All,
> 
> I received warnings regarding a package:
> 
> https://cran.r-project.org/web/checks/check_results_bujar.html
> 
> The warning still occurred after I changed export(bujar, gcv.enet) to export(bujar) in NAMESPACE. The function bujar was defined in the package, so I probably missed something in Sec 1.5.6 in Writing R Extensions.
> 
> Could somebody kindly advise how to address the warning?
> 
> Thanks,
> 
> Zhu Wang
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From w@ngz1 @end|ng |rom uth@c@@@edu  Mon Jun  1 20:55:41 2020
From: w@ngz1 @end|ng |rom uth@c@@@edu (Wang, Zhu)
Date: Mon, 1 Jun 2020 18:55:41 +0000
Subject: [R-pkg-devel] 
 Warning: S4 exports specified in 'NAMESPACE' but not
 defined in package
In-Reply-To: <ba71f151-6be2-6c73-e920-892b5a221555@fau.de>
References: <SN6PR10MB2432C7AF2DF09686942698399F8A0@SN6PR10MB2432.namprd10.prod.outlook.com>
 <ba71f151-6be2-6c73-e920-892b5a221555@fau.de>
Message-ID: <SN6PR10MB24324DF440AC3B3DAA0768F19F8A0@SN6PR10MB2432.namprd10.prod.outlook.com>

Thanks Sebastian, and I appreciate the suggestion.
Best,
Zhu

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Sebastian Meyer
Sent: Monday, June 1, 2020 1:53 PM
To: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Warning: S4 exports specified in 'NAMESPACE' but not defined in package

This is a new check in R-devel. The NEWS say:

> R CMD check etc now warn when a package exports non-existing S4 
> classes or methods, also in case of no "methods" presence

In your case, the NAMESPACE contains

> exportClasses("bujar")
> exportMethods("show")

but the package neither defines an S4 class "bujar" nor methods for the
S4 generic "show". You should remove these two lines from your NAMESPACE.

Best regards,

	Sebastian Meyer


Am 01.06.20 um 18:34 schrieb Wang, Zhu:
> Dear All,
> 
> I received warnings regarding a package:
> 
> https://cran.r-project.org/web/checks/check_results_bujar.html
> 
> The warning still occurred after I changed export(bujar, gcv.enet) to export(bujar) in NAMESPACE. The function bujar was defined in the package, so I probably missed something in Sec 1.5.6 in Writing R Extensions.
> 
> Could somebody kindly advise how to address the warning?
> 
> Thanks,
> 
> Zhu Wang
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From rm@h@rp @end|ng |rom me@com  Mon Jun  1 23:37:10 2020
From: rm@h@rp @end|ng |rom me@com (R. Mark Sharp)
Date: Mon, 1 Jun 2020 16:37:10 -0500
Subject: [R-pkg-devel] Fwd: [R] a question of etiquette
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
Message-ID: <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>

Adelchi,

I have a similar situation where I had made all of the typical academic references within the code and documentation for a small but important function my package uses. I was asked by the CRAN reviewers to add the author of that function to the DESCRIPTION Authors at R section. I added the following:
person("Terry", "Therneau", role = c("aut?))

Mark
R. Mark Sharp, Ph.D.
Data Scientist and Biomedical Statistical Consultant
7526 Meadow Green St.
San Antonio, TX 78251
mobile: 210-218-2868
rmsharp at me.com











> Begin forwarded message:
> 
> From: Adelchi Azzalini <azzalini at stat.unipd.it>
> Subject: [R] a question of etiquette
> Date: June 1, 2020 at 11:34:00 AM CDT
> To: r-help at r-project.org
> 
> The new version of a package which I maintain will include a new function which I have ported to R from Matlab.
> The documentation of this R function indicates the authors of the original Matlab code, reference to their paper, URL of the source code.
> 
> Question: is this adequate, or should I include them as co-authors of the package, or as contributors, or what else?
> Is there a general policy about this matter?
> 
> Adelchi Azzalini
> http://azzalini.stat.unipd.it/
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Jun  2 01:25:19 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 2 Jun 2020 01:25:19 +0200
Subject: [R-pkg-devel] Fwd: [R] a question of etiquette
In-Reply-To: <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
Message-ID: <80b2e97f-70b2-9e8f-9512-12e7e5452c83@statistik.tu-dortmund.de>

If you copy code, you have to make sure that you can use it under the 
currrent license of your package, and you have to make sure to declare 
copright holders and authors. As the code is part of the package now, 
therese are of course now also copyright holders and authors of your 
package.

Best,
Uwe Ligges

On 01.06.2020 23:37, R. Mark Sharp wrote:
> Adelchi,
> 
> I have a similar situation where I had made all of the typical academic references within the code and documentation for a small but important function my package uses. I was asked by the CRAN reviewers to add the author of that function to the DESCRIPTION Authors at R section. I added the following:
> person("Terry", "Therneau", role = c("aut?))
> 
> Mark
> R. Mark Sharp, Ph.D.
> Data Scientist and Biomedical Statistical Consultant
> 7526 Meadow Green St.
> San Antonio, TX 78251
> mobile: 210-218-2868
> rmsharp at me.com
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
>> Begin forwarded message:
>>
>> From: Adelchi Azzalini <azzalini at stat.unipd.it>
>> Subject: [R] a question of etiquette
>> Date: June 1, 2020 at 11:34:00 AM CDT
>> To: r-help at r-project.org
>>
>> The new version of a package which I maintain will include a new function which I have ported to R from Matlab.
>> The documentation of this R function indicates the authors of the original Matlab code, reference to their paper, URL of the source code.
>>
>> Question: is this adequate, or should I include them as co-authors of the package, or as contributors, or what else?
>> Is there a general policy about this matter?
>>
>> Adelchi Azzalini
>> http://azzalini.stat.unipd.it/
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @zz@||n| @end|ng |rom @t@t@un|pd@|t  Tue Jun  2 08:32:37 2020
From: @zz@||n| @end|ng |rom @t@t@un|pd@|t (Adelchi Azzalini)
Date: Tue, 2 Jun 2020 08:32:37 +0200
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
Message-ID: <42505A3C-F7F8-4332-ABD0-14F182849ED6@stat.unipd.it>

Thanks for this information, Mark.

Given the phrase "small but important function my package uses", it seems 
that you included in your package some code, reproducing it verbatim. 
Do I understand correctly?
In my case, the code which I am actually using is the R porting of  code
originally written in another language, namely Matlab.

Best wishes,

Adelchi


> On 1 Jun 2020, at 23:37, R. Mark Sharp <rmsharp at me.com> wrote:
> 
> Adelchi,
> 
> I have a similar situation where I had made all of the typical academic references within the code and documentation for a small but important function my package uses. I was asked by the CRAN reviewers to add the author of that function to the DESCRIPTION Authors at R section. I added the following:
> person("Terry", "Therneau", role = c("aut?))
> 
> Mark
> R. Mark Sharp, Ph.D.
> Data Scientist and Biomedical Statistical Consultant
> 7526 Meadow Green St.
> San Antonio, TX 78251
> mobile: 210-218-2868
> rmsharp at me.com
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
>> Begin forwarded message:
>> 
>> From: Adelchi Azzalini <azzalini at stat.unipd.it>
>> Subject: [R] a question of etiquette
>> Date: June 1, 2020 at 11:34:00 AM CDT
>> To: r-help at r-project.org
>> 
>> The new version of a package which I maintain will include a new function which I have ported to R from Matlab.
>> The documentation of this R function indicates the authors of the original Matlab code, reference to their paper, URL of the source code.
>> 
>> Question: is this adequate, or should I include them as co-authors of the package, or as contributors, or what else?
>> Is there a general policy about this matter?
>> 
>> Adelchi Azzalini
>> http://azzalini.stat.unipd.it/
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 


From @zz@||n| @end|ng |rom @t@t@un|pd@|t  Tue Jun  2 09:08:03 2020
From: @zz@||n| @end|ng |rom @t@t@un|pd@|t (Adelchi Azzalini)
Date: Tue, 2 Jun 2020 09:08:03 +0200
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <80b2e97f-70b2-9e8f-9512-12e7e5452c83@statistik.tu-dortmund.de>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <80b2e97f-70b2-9e8f-9512-12e7e5452c83@statistik.tu-dortmund.de>
Message-ID: <93F5C123-5EAB-43F7-8A23-A96ED4121808@stat.unipd.it>

The point in question does not refer to copying code, but to code translation.
Does this make any difference? 
This was the question which I raised.

The phrase "As the code is part of the package now," does not seem to apply in this case,
since the code is actually not there.

Also, if the authors of the original code (in Matlab) must be included in the Authors at R 
block of the DESCRIPTION file, should they be labelled as "aut", "cbt", or what?

Apart from the specific instance  which my earlier question was referring to,
the view "As the code is part of the package now, therese are of course now also copyright 
holders and authors of your package" opens another question, closely related but different,
as it refers to code which is included, not translated. 
The above-quoted sentence appears to say that anyone who has written any
portion of code is an author of the package. In this view, who must be labelled "cbt" then?

Best regards

Adelchi


> On 2 Jun 2020, at 01:25, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> If you copy code, you have to make sure that you can use it under the currrent license of your package, and you have to make sure to declare copright holders and authors. As the code is part of the package now, therese are of course now also copyright holders and authors of your package.
> 
> Best,
> Uwe Ligges
> 
> On 01.06.2020 23:37, R. Mark Sharp wrote:
>> Adelchi,
>> I have a similar situation where I had made all of the typical academic references within the code and documentation for a small but important function my package uses. I was asked by the CRAN reviewers to add the author of that function to the DESCRIPTION Authors at R section. I added the following:
>> person("Terry", "Therneau", role = c("aut?))
>> Mark
>> R. Mark Sharp, Ph.D.
>> Data Scientist and Biomedical Statistical Consultant
>> 7526 Meadow Green St.
>> San Antonio, TX 78251
>> mobile: 210-218-2868
>> rmsharp at me.com
>>> Begin forwarded message:
>>> 
>>> From: Adelchi Azzalini <azzalini at stat.unipd.it>
>>> Subject: [R] a question of etiquette
>>> Date: June 1, 2020 at 11:34:00 AM CDT
>>> To: r-help at r-project.org
>>> 
>>> The new version of a package which I maintain will include a new function which I have ported to R from Matlab.
>>> The documentation of this R function indicates the authors of the original Matlab code, reference to their paper, URL of the source code.
>>> 
>>> Question: is this adequate, or should I include them as co-authors of the package, or as contributors, or what else?
>>> Is there a general policy about this matter?
>>> 
>>> Adelchi Azzalini
>>> http://azzalini.stat.unipd.it/
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 	[[alternative HTML version deleted]]
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ejo@ym@rt @end|ng |rom gm@||@com  Tue Jun  2 10:01:25 2020
From: ejo@ym@rt @end|ng |rom gm@||@com (=?UTF-8?Q?Edgar_Josymar_Torrej=C3=B3n=2DMagallanes?=)
Date: Tue, 2 Jun 2020 02:01:25 -0600
Subject: [R-pkg-devel] S4 methods
Message-ID: <CAKtnMVzW-9jSrG3JfFWvc9mNPgfj8WOWypD-6EtiS+arGXD-ag@mail.gmail.com>

Dear members

I just finished some minor updates to an R package (sizeMat) I've had on
CRAN (haven't had to update in a month). My package passes Check on my
local machine, but it just bounced back from CRAN with the message

Warning: S4 exports specified in 'NAMESPACE' but not defined in package
'sizeMat'

I use roxygen2 to build my package NAMESPACE and don't have any S4 exports
that I'm aware of.

Perhaps this might be related to changes in R version 4.0.0?
How could I fix this problem?

Thanks.

-- 
Edgar Josymar Torrej?n Magallanes

	[[alternative HTML version deleted]]


From @eb@meyer @end|ng |rom |@u@de  Tue Jun  2 12:12:15 2020
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Tue, 2 Jun 2020 12:12:15 +0200
Subject: [R-pkg-devel] S4 methods
In-Reply-To: <CAKtnMVzW-9jSrG3JfFWvc9mNPgfj8WOWypD-6EtiS+arGXD-ag@mail.gmail.com>
References: <CAKtnMVzW-9jSrG3JfFWvc9mNPgfj8WOWypD-6EtiS+arGXD-ag@mail.gmail.com>
Message-ID: <70531a2d-9a9a-3de1-b0da-723a74c73cfa@fau.de>

This is a new check in R-devel. The NEWS say:

> R CMD check etc now warn when a package exports non-existing S4 classes or methods, also in case of no "methods" presence

In your case, the NAMESPACE contains

> exportClasses(classify)

> exportClasses(gonad_mature)

> exportClasses(morphMat)

but your package does not define these S4 classes.

You seem to instruct roxygen2 to create these invalid directives using
@exportClass tags manually instead of just @export. Simply remove these
wrong @exportClass tags from your source files and regenerate your
NAMESPACE.

Best regards,

	Sebastian Meyer


Am 02.06.20 um 10:01 schrieb Edgar Josymar Torrej?n-Magallanes:
> Dear members
> 
> I just finished some minor updates to an R package (sizeMat) I've had on
> CRAN (haven't had to update in a month). My package passes Check on my
> local machine, but it just bounced back from CRAN with the message
> 
> Warning: S4 exports specified in 'NAMESPACE' but not defined in package
> 'sizeMat'
> 
> I use roxygen2 to build my package NAMESPACE and don't have any S4 exports
> that I'm aware of.
> 
> Perhaps this might be related to changes in R version 4.0.0?
> How could I fix this problem?
> 
> Thanks.
>


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Jun  2 12:28:12 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 2 Jun 2020 11:28:12 +0100
Subject: [R-pkg-devel] S4 methods
In-Reply-To: <CAKtnMVzW-9jSrG3JfFWvc9mNPgfj8WOWypD-6EtiS+arGXD-ag@mail.gmail.com>
References: <CAKtnMVzW-9jSrG3JfFWvc9mNPgfj8WOWypD-6EtiS+arGXD-ag@mail.gmail.com>
Message-ID: <CABtg=KnUUusC6vDSA5gE0=MryCSA5z+v5z6YhUHOwVLDa6d2xw@mail.gmail.com>

You export these S4 classes from your package:
https://github.com/cran/sizeMat/blob/c4d257a9108cde3ddb6e8eb2072cd567ae85b5c8/NAMESPACE#L13-L15

But these are not actually S4 classes, AFAICT. Remove the
`@exportClass` tags here:
https://github.com/cran/sizeMat/blob/c4d257a9108cde3ddb6e8eb2072cd567ae85b5c8/R/gonadMat-main.R#L47
https://github.com/cran/sizeMat/blob/c4d257a9108cde3ddb6e8eb2072cd567ae85b5c8/R/morphMat-main.R#L101
https://github.com/cran/sizeMat/blob/c4d257a9108cde3ddb6e8eb2072cd567ae85b5c8/R/morphMat-main.R#L305

Gabor

On Tue, Jun 2, 2020 at 10:57 AM Edgar Josymar Torrej?n-Magallanes
<ejosymart at gmail.com> wrote:
>
> Dear members
>
> I just finished some minor updates to an R package (sizeMat) I've had on
> CRAN (haven't had to update in a month). My package passes Check on my
> local machine, but it just bounced back from CRAN with the message
>
> Warning: S4 exports specified in 'NAMESPACE' but not defined in package
> 'sizeMat'
>
> I use roxygen2 to build my package NAMESPACE and don't have any S4 exports
> that I'm aware of.
>
> Perhaps this might be related to changes in R version 4.0.0?
> How could I fix this problem?
>
> Thanks.
>
> --
> Edgar Josymar Torrej?n Magallanes
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Tue Jun  2 15:17:43 2020
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Tue, 2 Jun 2020 13:17:43 +0000
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <93F5C123-5EAB-43F7-8A23-A96ED4121808@stat.unipd.it>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <80b2e97f-70b2-9e8f-9512-12e7e5452c83@statistik.tu-dortmund.de>
 <93F5C123-5EAB-43F7-8A23-A96ED4121808@stat.unipd.it>
Message-ID: <BL0PR04MB6609777A9B875E02F9216375F98B0@BL0PR04MB6609.namprd04.prod.outlook.com>

To present a contrary view...

To me the commentary so far doesn't seem right -- if I were writing an academic paper (I personally think this is a good analogy for many R packages) and elaborating on the ideas of someone else, I would cite their work but I would not add them as an author to my paper. I would not expect the authors of cited work to agree with or take responsibility for my work, which is what authorship (in the publication domain) implies. In the current case there is no reason to think that the author of matlab code would be informed about or willing to vouch for the R implementation. Minimally, in an academic setting I would (be required to) ask whether the individual wished to be an author. 

Conversely, if an author were to have made a substantive contribution to my package, and objected to the content of the package with their name on it, I would feel obliged to respect their wishes and, e.g., withdraw or, if permitted by licensing, revise or re-publish the paper / package without the author. This makes me think carefully about who actually contributed to the package, rather than merely whose prior work my package builds upon.

Of course it is necessary to obey licensing terms of the prior work, and important to acknowledge, above and beyond the specific licensing terms, the contributions individuals make.

Martin Morgan

?On 6/2/20, 5:57 AM, "R-package-devel on behalf of Adelchi Azzalini" <r-package-devel-bounces at r-project.org on behalf of azzalini at stat.unipd.it> wrote:

    The point in question does not refer to copying code, but to code translation.
    Does this make any difference? 
    This was the question which I raised.

    The phrase "As the code is part of the package now," does not seem to apply in this case,
    since the code is actually not there.

    Also, if the authors of the original code (in Matlab) must be included in the Authors at R 
    block of the DESCRIPTION file, should they be labelled as "aut", "cbt", or what?

    Apart from the specific instance  which my earlier question was referring to,
    the view "As the code is part of the package now, therese are of course now also copyright 
    holders and authors of your package" opens another question, closely related but different,
    as it refers to code which is included, not translated. 
    The above-quoted sentence appears to say that anyone who has written any
    portion of code is an author of the package. In this view, who must be labelled "cbt" then?

    Best regards

    Adelchi


    > On 2 Jun 2020, at 01:25, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
    > 
    > If you copy code, you have to make sure that you can use it under the currrent license of your package, and you have to make sure to declare copright holders and authors. As the code is part of the package now, therese are of course now also copyright holders and authors of your package.
    > 
    > Best,
    > Uwe Ligges
    > 
    > On 01.06.2020 23:37, R. Mark Sharp wrote:
    >> Adelchi,
    >> I have a similar situation where I had made all of the typical academic references within the code and documentation for a small but important function my package uses. I was asked by the CRAN reviewers to add the author of that function to the DESCRIPTION Authors at R section. I added the following:
    >> person("Terry", "Therneau", role = c("aut?))
    >> Mark
    >> R. Mark Sharp, Ph.D.
    >> Data Scientist and Biomedical Statistical Consultant
    >> 7526 Meadow Green St.
    >> San Antonio, TX 78251
    >> mobile: 210-218-2868
    >> rmsharp at me.com
    >>> Begin forwarded message:
    >>> 
    >>> From: Adelchi Azzalini <azzalini at stat.unipd.it>
    >>> Subject: [R] a question of etiquette
    >>> Date: June 1, 2020 at 11:34:00 AM CDT
    >>> To: r-help at r-project.org
    >>> 
    >>> The new version of a package which I maintain will include a new function which I have ported to R from Matlab.
    >>> The documentation of this R function indicates the authors of the original Matlab code, reference to their paper, URL of the source code.
    >>> 
    >>> Question: is this adequate, or should I include them as co-authors of the package, or as contributors, or what else?
    >>> Is there a general policy about this matter?
    >>> 
    >>> Adelchi Azzalini
    >>> http://azzalini.stat.unipd.it/
    >>> 
    >>> ______________________________________________
    >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    >>> https://stat.ethz.ch/mailman/listinfo/r-help
    >>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    >>> and provide commented, minimal, self-contained, reproducible code.
    >> 	[[alternative HTML version deleted]]
    >> ______________________________________________
    >> R-package-devel at r-project.org mailing list
    >> https://stat.ethz.ch/mailman/listinfo/r-package-devel

    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel

From pd@|gd @end|ng |rom gm@||@com  Tue Jun  2 16:01:29 2020
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Tue, 2 Jun 2020 16:01:29 +0200
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <BL0PR04MB6609777A9B875E02F9216375F98B0@BL0PR04MB6609.namprd04.prod.outlook.com>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <80b2e97f-70b2-9e8f-9512-12e7e5452c83@statistik.tu-dortmund.de>
 <93F5C123-5EAB-43F7-8A23-A96ED4121808@stat.unipd.it>
 <BL0PR04MB6609777A9B875E02F9216375F98B0@BL0PR04MB6609.namprd04.prod.outlook.com>
Message-ID: <471DC47D-836C-4469-BBDC-497CD26ED4C9@gmail.com>

I had similar thoughts initially, but this area is governed by copyright, not academic authorship conventions. So 

(a) There is no real parallel to "citation rights" when it comes to software. If you use someone else's code, then it is very hard to avoid derived-works rules applying.

(b) Copyright transfers to translated works. This is pretty obvious when it comes to books, maybe less obvious for computer code, but it certainly wouldn't make sense if translation to machine language rendered copyright inapplicable. You cannot copyright ideas only their expression, but the question was explicitly about translation from Matlab to R.

So, I think the safe way is to include the original authors in the author list (and check their license carefully).

-pd


> On 2 Jun 2020, at 15:17 , Martin Morgan <mtmorgan.bioc at gmail.com> wrote:
> 
> To present a contrary view...
> 
> To me the commentary so far doesn't seem right -- if I were writing an academic paper (I personally think this is a good analogy for many R packages) and elaborating on the ideas of someone else, I would cite their work but I would not add them as an author to my paper. I would not expect the authors of cited work to agree with or take responsibility for my work, which is what authorship (in the publication domain) implies. In the current case there is no reason to think that the author of matlab code would be informed about or willing to vouch for the R implementation. Minimally, in an academic setting I would (be required to) ask whether the individual wished to be an author. 
> 
> Conversely, if an author were to have made a substantive contribution to my package, and objected to the content of the package with their name on it, I would feel obliged to respect their wishes and, e.g., withdraw or, if permitted by licensing, revise or re-publish the paper / package without the author. This makes me think carefully about who actually contributed to the package, rather than merely whose prior work my package builds upon.
> 
> Of course it is necessary to obey licensing terms of the prior work, and important to acknowledge, above and beyond the specific licensing terms, the contributions individuals make.
> 
> Martin Morgan
> 
> ?On 6/2/20, 5:57 AM, "R-package-devel on behalf of Adelchi Azzalini" <r-package-devel-bounces at r-project.org on behalf of azzalini at stat.unipd.it> wrote:
> 
>    The point in question does not refer to copying code, but to code translation.
>    Does this make any difference? 
>    This was the question which I raised.
> 
>    The phrase "As the code is part of the package now," does not seem to apply in this case,
>    since the code is actually not there.
> 
>    Also, if the authors of the original code (in Matlab) must be included in the Authors at R 
>    block of the DESCRIPTION file, should they be labelled as "aut", "cbt", or what?
> 
>    Apart from the specific instance  which my earlier question was referring to,
>    the view "As the code is part of the package now, therese are of course now also copyright 
>    holders and authors of your package" opens another question, closely related but different,
>    as it refers to code which is included, not translated. 
>    The above-quoted sentence appears to say that anyone who has written any
>    portion of code is an author of the package. In this view, who must be labelled "cbt" then?
> 
>    Best regards
> 
>    Adelchi
> 
> 
>> On 2 Jun 2020, at 01:25, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>> 
>> If you copy code, you have to make sure that you can use it under the currrent license of your package, and you have to make sure to declare copright holders and authors. As the code is part of the package now, therese are of course now also copyright holders and authors of your package.
>> 
>> Best,
>> Uwe Ligges
>> 
>> On 01.06.2020 23:37, R. Mark Sharp wrote:
>>> Adelchi,
>>> I have a similar situation where I had made all of the typical academic references within the code and documentation for a small but important function my package uses. I was asked by the CRAN reviewers to add the author of that function to the DESCRIPTION Authors at R section. I added the following:
>>> person("Terry", "Therneau", role = c("aut?))
>>> Mark
>>> R. Mark Sharp, Ph.D.
>>> Data Scientist and Biomedical Statistical Consultant
>>> 7526 Meadow Green St.
>>> San Antonio, TX 78251
>>> mobile: 210-218-2868
>>> rmsharp at me.com
>>>> Begin forwarded message:
>>>> 
>>>> From: Adelchi Azzalini <azzalini at stat.unipd.it>
>>>> Subject: [R] a question of etiquette
>>>> Date: June 1, 2020 at 11:34:00 AM CDT
>>>> To: r-help at r-project.org
>>>> 
>>>> The new version of a package which I maintain will include a new function which I have ported to R from Matlab.
>>>> The documentation of this R function indicates the authors of the original Matlab code, reference to their paper, URL of the source code.
>>>> 
>>>> Question: is this adequate, or should I include them as co-authors of the package, or as contributors, or what else?
>>>> Is there a general policy about this matter?
>>>> 
>>>> Adelchi Azzalini
>>>> http://azzalini.stat.unipd.it/
>>>> 
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>> 	[[alternative HTML version deleted]]
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
>    ______________________________________________
>    R-package-devel at r-project.org mailing list
>    https://stat.ethz.ch/mailman/listinfo/r-package-devel
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From d@n|e|d@@joberg @end|ng |rom gm@||@com  Tue Jun  2 16:08:38 2020
From: d@n|e|d@@joberg @end|ng |rom gm@||@com (Daniel Sjoberg)
Date: Tue, 2 Jun 2020 10:08:38 -0400
Subject: [R-pkg-devel] win-builder failing without informative message
Message-ID: <CAG5xu56mfBg1diGKFDK2pcCxe2vKi3X1_MHHhUbd3D6surhi1g@mail.gmail.com>

Hello List!

I am prepping gtsummary for a new release, but I am running into a problem
with the CRAN win-builder.

The package is passing checks on my local Windows machine, another local
Windows machine, on a GitHub Actions Windows machine (
https://github.com/ddsjoberg/gtsummary/runs/729569705?check_suite_focus=true).
However I am getting this error on win-builder in `00check.log`:

Check process probably crashed or hung up for 20 minutes ... killed
Most likely this happened in the example checks (?),
if not, ignore the following last lines of example output:

======== End of example output (where/before crash/hang up occured ?) ========

link to win-builder results https://win-builder.r-project.org/SFSFeP44df58/

Any ideas on how to troubleshoot this error?  The build is also passing on
macOS and Ubuntu GitHub Actions checks.

Thank you!
Daniel

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Tue Jun  2 16:13:10 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 2 Jun 2020 10:13:10 -0400
Subject: [R-pkg-devel] win-builder failing without informative message
In-Reply-To: <CAG5xu56mfBg1diGKFDK2pcCxe2vKi3X1_MHHhUbd3D6surhi1g@mail.gmail.com>
References: <CAG5xu56mfBg1diGKFDK2pcCxe2vKi3X1_MHHhUbd3D6surhi1g@mail.gmail.com>
Message-ID: <CABghstThiVCo7nfvKViMSCjYPCLjXkaaMm4FiNZJ9R678B1R4g@mail.gmail.com>

  In my opinion, if you've tested on multiple Windows system that
you've done your due diligence and shouldn't worry too much about
win-builder hiccups ...

On Tue, Jun 2, 2020 at 10:09 AM Daniel Sjoberg
<danield.sjoberg at gmail.com> wrote:
>
> Hello List!
>
> I am prepping gtsummary for a new release, but I am running into a problem
> with the CRAN win-builder.
>
> The package is passing checks on my local Windows machine, another local
> Windows machine, on a GitHub Actions Windows machine (
> https://github.com/ddsjoberg/gtsummary/runs/729569705?check_suite_focus=true).
> However I am getting this error on win-builder in `00check.log`:
>
> Check process probably crashed or hung up for 20 minutes ... killed
> Most likely this happened in the example checks (?),
> if not, ignore the following last lines of example output:
>
> ======== End of example output (where/before crash/hang up occured ?) ========
>
> link to win-builder results https://win-builder.r-project.org/SFSFeP44df58/
>
> Any ideas on how to troubleshoot this error?  The build is also passing on
> macOS and Ubuntu GitHub Actions checks.
>
> Thank you!
> Daniel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Jun  2 16:13:23 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 2 Jun 2020 15:13:23 +0100
Subject: [R-pkg-devel] win-builder failing without informative message
In-Reply-To: <CAG5xu56mfBg1diGKFDK2pcCxe2vKi3X1_MHHhUbd3D6surhi1g@mail.gmail.com>
References: <CAG5xu56mfBg1diGKFDK2pcCxe2vKi3X1_MHHhUbd3D6surhi1g@mail.gmail.com>
Message-ID: <CABtg=KmKAEdKYwcF3wckhuU2YKjvr1xRJFDOR3KD_dhPW4NzkQ@mail.gmail.com>

Seems like your tests did not finish:
https://win-builder.r-project.org/SFSFeP44df58/examples_and_tests/tests_x64/testthat.Rout

Either they take too long, or they froze. You can use a different
testthat reporter, to see which one is stuck, e.g. like this:
https://github.com/cran/desc/blob/3e52b4923c7852bc00fbc94887c42657ffc67283/tests/testthat.R#L4

Gabor

On Tue, Jun 2, 2020 at 3:09 PM Daniel Sjoberg <danield.sjoberg at gmail.com> wrote:
>
> Hello List!
>
> I am prepping gtsummary for a new release, but I am running into a problem
> with the CRAN win-builder.
>
> The package is passing checks on my local Windows machine, another local
> Windows machine, on a GitHub Actions Windows machine (
> https://github.com/ddsjoberg/gtsummary/runs/729569705?check_suite_focus=true).
> However I am getting this error on win-builder in `00check.log`:
>
> Check process probably crashed or hung up for 20 minutes ... killed
> Most likely this happened in the example checks (?),
> if not, ignore the following last lines of example output:
>
> ======== End of example output (where/before crash/hang up occured ?) ========
>
> link to win-builder results https://win-builder.r-project.org/SFSFeP44df58/
>
> Any ideas on how to troubleshoot this error?  The build is also passing on
> macOS and Ubuntu GitHub Actions checks.
>
> Thank you!
> Daniel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Tue Jun  2 16:54:00 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Tue, 2 Jun 2020 16:54:00 +0200
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <42505A3C-F7F8-4332-ABD0-14F182849ED6@stat.unipd.it>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <42505A3C-F7F8-4332-ABD0-14F182849ED6@stat.unipd.it>
Message-ID: <24278.26632.541822.463905@stat.math.ethz.ch>

>>>>> Adelchi Azzalini 
>>>>>     on Tue, 2 Jun 2020 08:32:37 +0200 writes:

    > Thanks for this information, Mark.  Given the phrase
    > "small but important function my package uses", it seems
    > that you included in your package some code, reproducing
    > it verbatim.  Do I understand correctly?  In my case, the
    > code which I am actually using is the R porting of code
    > originally written in another language, namely Matlab.

    > Best wishes,
    > Adelchi


Indeed. I would definitely not list the original Matlab authors as
'aut', but just as 'ctb' (= contributor).

e.g., for the 'robustbase' package, I have, among authors at R

      , person("Peter", "Rousseeuw", role="ctb", comment = "Qn and Sn")

Personally, I'd always use a  comment = "..."  tag mentioning
*what* the contributor (or "co-author") has contributed to.

Best,
Martin


    >> On 1 Jun 2020, at 23:37, R. Mark Sharp <rmsharp at me.com>
    >> wrote:
    >> 
    >> Adelchi,
    >> 
    >> I have a similar situation where I had made all of the
    >> typical academic references within the code and
    >> documentation for a small but important function my
    >> package uses. I was asked by the CRAN reviewers to add
    >> the author of that function to the DESCRIPTION Authors at R
    >> section. I added the following: person("Terry",
    >> "Therneau", role = c("aut?))
    >> 
    >> Mark R. Mark Sharp, Ph.D.  Data Scientist and Biomedical
    >> Statistical Consultant 7526 Meadow Green St.  San
    >> Antonio, TX 78251 mobile: 210-218-2868 rmsharp at me.com
    >> 
    >> 
    >> 
    >> 
    >> 
    >> 
    >> 
    >> 
    >> 
    >> 
    >> 
    >>> Begin forwarded message:
    >>> 
    >>> From: Adelchi Azzalini <azzalini at stat.unipd.it> Subject:
    >>> [R] a question of etiquette Date: June 1, 2020 at
    >>> 11:34:00 AM CDT To: r-help at r-project.org
    >>> 
    >>> The new version of a package which I maintain will
    >>> include a new function which I have ported to R from
    >>> Matlab.  The documentation of this R function indicates
    >>> the authors of the original Matlab code, reference to
    >>> their paper, URL of the source code.
    >>> 
    >>> Question: is this adequate, or should I include them as
    >>> co-authors of the package, or as contributors, or what
    >>> else?  Is there a general policy about this matter?
    >>> 
    >>> Adelchi Azzalini http://azzalini.stat.unipd.it/
    >>> 
    >>> ______________________________________________
    >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    >>> more, see https://stat.ethz.ch/mailman/listinfo/r-help
    >>> PLEASE do read the posting guide
    >>> http://www.R-project.org/posting-guide.html and provide
    >>> commented, minimal, self-contained, reproducible code.
    >> 

    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From rm@h@rp @end|ng |rom me@com  Tue Jun  2 17:06:36 2020
From: rm@h@rp @end|ng |rom me@com (R. Mark Sharp)
Date: Tue, 2 Jun 2020 10:06:36 -0500
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <42505A3C-F7F8-4332-ABD0-14F182849ED6@stat.unipd.it>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <42505A3C-F7F8-4332-ABD0-14F182849ED6@stat.unipd.it>
Message-ID: <4B7E6B5B-0288-4D30-9806-321556AB38BB@me.com>

Adelchi,

Actually, the person recognized wrote the original code for the algorithm and he has had other contributors over time that have made several improvements. The code I have is not verbatim from his package as it has been adapted for our purposes, but he is still the originator of the approach and I am certain he and others would recognize the code as being clearly deriviative. I have retained some of the same function names or near derivatives of those names. My coding style is different but that has not changed the basic logic.

With regard to licensing, we both use MIT, which I strongly prefer. The GPL-2 and GPL-3 licenses are apparently sufficiently ambiguous in the legal community that some companies avoid them.

Mark
R. Mark Sharp, Ph.D.
Data Scientist and Biomedical Statistical Consultant
7526 Meadow Green St.
San Antonio, TX 78251
mobile: 210-218-2868
rmsharp at me.com











> On Jun 2, 2020, at 1:32 AM, Adelchi Azzalini <azzalini at stat.unipd.it> wrote:
> 
> Thanks for this information, Mark.
> 
> Given the phrase "small but important function my package uses", it seems 
> that you included in your package some code, reproducing it verbatim. 
> Do I understand correctly?
> In my case, the code which I am actually using is the R porting of  code
> originally written in another language, namely Matlab.
> 
> Best wishes,
> 
> Adelchi
> 
> 
>> On 1 Jun 2020, at 23:37, R. Mark Sharp <rmsharp at me.com> wrote:
>> 
>> Adelchi,
>> 
>> I have a similar situation where I had made all of the typical academic references within the code and documentation for a small but important function my package uses. I was asked by the CRAN reviewers to add the author of that function to the DESCRIPTION Authors at R section. I added the following:
>> person("Terry", "Therneau", role = c("aut?))
>> 
>> Mark
>> R. Mark Sharp, Ph.D.
>> Data Scientist and Biomedical Statistical Consultant
>> 7526 Meadow Green St.
>> San Antonio, TX 78251
>> mobile: 210-218-2868
>> rmsharp at me.com
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>>> Begin forwarded message:
>>> 
>>> From: Adelchi Azzalini <azzalini at stat.unipd.it>
>>> Subject: [R] a question of etiquette
>>> Date: June 1, 2020 at 11:34:00 AM CDT
>>> To: r-help at r-project.org
>>> 
>>> The new version of a package which I maintain will include a new function which I have ported to R from Matlab.
>>> The documentation of this R function indicates the authors of the original Matlab code, reference to their paper, URL of the source code.
>>> 
>>> Question: is this adequate, or should I include them as co-authors of the package, or as contributors, or what else?
>>> Is there a general policy about this matter?
>>> 
>>> Adelchi Azzalini
>>> http://azzalini.stat.unipd.it/
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 
> 


From edd @end|ng |rom deb|@n@org  Tue Jun  2 17:12:20 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 2 Jun 2020 10:12:20 -0500
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <4B7E6B5B-0288-4D30-9806-321556AB38BB@me.com>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <42505A3C-F7F8-4332-ABD0-14F182849ED6@stat.unipd.it>
 <4B7E6B5B-0288-4D30-9806-321556AB38BB@me.com>
Message-ID: <24278.27732.72005.283713@rob.eddelbuettel.com>


On 2 June 2020 at 10:06, R. Mark Sharp wrote:
| The GPL-2 and GPL-3 licenses are apparently sufficiently ambiguous in the legal community that some companies avoid them.

Wittgenstein:  'That whereof we cannot speak, thereof we must remain silent'

This is a mailing list of the R project. R is a GNU Project. R is licensed
under the GPL, version two or later. That has not stopped large corporations
from using R, adopting R, or starting or acquiring R related businesses.

If you have a strong urge to spread FUD about the GPL and R, could you have the
modicum of etiquette to not do it on a mailing list of the R Project?

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @zz@||n| @end|ng |rom @t@t@un|pd@|t  Tue Jun  2 17:14:42 2020
From: @zz@||n| @end|ng |rom @t@t@un|pd@|t (Adelchi Azzalini)
Date: Tue, 2 Jun 2020 17:14:42 +0200
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <471DC47D-836C-4469-BBDC-497CD26ED4C9@gmail.com>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <80b2e97f-70b2-9e8f-9512-12e7e5452c83@statistik.tu-dortmund.de>
 <93F5C123-5EAB-43F7-8A23-A96ED4121808@stat.unipd.it>
 <BL0PR04MB6609777A9B875E02F9216375F98B0@BL0PR04MB6609.namprd04.prod.outlook.com>
 <471DC47D-836C-4469-BBDC-497CD26ED4C9@gmail.com>
Message-ID: <A98F5A87-8805-43BC-B6BA-F2CD3EA716BE@stat.unipd.it>

Thanks to all people that contributed  to this discussion,
which turned out to be interesting, definitely not something which I expected at the beginning.

To avoid verbosity, I restrict myself to two more points.

(1) In case one adopts the indication that all the authors of a portion of code (irrespective of the extension, even in other languages)  are "of course now also copyright holders and authors", how should this be translated  in the nomenclature of Writing R Extensions (Section 1.1.1 The DESCRIPTION file)?  In this view, "ctb" is the more appropriate role, I believe. The "aut" label is not the right option. Otherwise, dozens on CRAN packages where "ctb" is extensively used should be amended.

(2) Having read pertaining portions of manuals and pondered messages, I have come to the conclusion that the terminology set up in the above-quoted paragraph of "Writing R Extensions" is not always ideal. This issue would take a long time and space, so I only indicate one point: the role ?"cre"? (creator) for the package maintainer. There are many cases where this description does not fit. For instance, I have seen packages where an author has designed the package, written the entire code and documentation alone, maintained the package for some years, and then passed on the mere maintenance to somebody else; definitely, I would not describe the second person as the "creator". 

> 
> 
> So, I think the safe way is to include the original authors in the author list (and check their license carefully).

In  general, "check the license" is a very sensible indication. In the specific case, the Matlab code comes with no licence indication - nothing.

I have now submitted mnormt_2.0.0.tar.gz to CRAN, with a comment/query about this issue.  Let us see what "The CRAN" says. In case you want see the conclusion, the outcome should appear at https://cran.r-project.org/package=mnormt in a few days.

Best regards,

Adelchi Azzalini

From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue Jun  2 17:22:11 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Tue, 2 Jun 2020 10:22:11 -0500
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <24278.27732.72005.283713@rob.eddelbuettel.com>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <42505A3C-F7F8-4332-ABD0-14F182849ED6@stat.unipd.it>
 <4B7E6B5B-0288-4D30-9806-321556AB38BB@me.com>
 <24278.27732.72005.283713@rob.eddelbuettel.com>
Message-ID: <52b8a74b-e7fb-5127-13b7-9f1d3f2e27f0@effectivedefense.org>

 ????? Can Dr. Sharp kindly provide a credible reference, discussing the 
alleged ambiguities in GPL-2 and GPL-3 that convince some companies to 
avoid them?


 ????? I like Wikimedia Foundation projects like Wikipedia, where almost 
anyone can change almost anything, and what stays tends to be written 
from a neutral point of view, citing credible sources.? I get several 
emails a day notifying me of changes in articles I'm "watching".? FUD, 
vandalism, etc., are generally reverted fairly quickly or moved to the 
"Talk" page associated with each article, where the world is invited to 
provide credible source(s).


 ????? Spencer Graves


On 2020-06-02 10:12, Dirk Eddelbuettel wrote:
> On 2 June 2020 at 10:06, R. Mark Sharp wrote:
> | The GPL-2 and GPL-3 licenses are apparently sufficiently ambiguous in the legal community that some companies avoid them.
>
> Wittgenstein:  'That whereof we cannot speak, thereof we must remain silent'
>
> This is a mailing list of the R project. R is a GNU Project. R is licensed
> under the GPL, version two or later. That has not stopped large corporations
> from using R, adopting R, or starting or acquiring R related businesses.
>
> If you have a strong urge to spread FUD about the GPL and R, could you have the
> modicum of etiquette to not do it on a mailing list of the R Project?
>
> Dirk
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jun  2 17:48:59 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 2 Jun 2020 11:48:59 -0400
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <A98F5A87-8805-43BC-B6BA-F2CD3EA716BE@stat.unipd.it>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <80b2e97f-70b2-9e8f-9512-12e7e5452c83@statistik.tu-dortmund.de>
 <93F5C123-5EAB-43F7-8A23-A96ED4121808@stat.unipd.it>
 <BL0PR04MB6609777A9B875E02F9216375F98B0@BL0PR04MB6609.namprd04.prod.outlook.com>
 <471DC47D-836C-4469-BBDC-497CD26ED4C9@gmail.com>
 <A98F5A87-8805-43BC-B6BA-F2CD3EA716BE@stat.unipd.it>
Message-ID: <a21f3c1b-0b74-907b-072b-1ae157aa363d@gmail.com>

On 02/06/2020 11:14 a.m., Adelchi Azzalini wrote:
> Thanks to all people that contributed  to this discussion,
> which turned out to be interesting, definitely not something which I expected at the beginning.
> 
> To avoid verbosity, I restrict myself to two more points.
> 
> (1) In case one adopts the indication that all the authors of a portion of code (irrespective of the extension, even in other languages)  are "of course now also copyright holders and authors", how should this be translated  in the nomenclature of Writing R Extensions (Section 1.1.1 The DESCRIPTION file)?  In this view, "ctb" is the more appropriate role, I believe. The "aut" label is not the right option. Otherwise, dozens on CRAN packages where "ctb" is extensively used should be amended.
> 
> (2) Having read pertaining portions of manuals and pondered messages, I have come to the conclusion that the terminology set up in the above-quoted paragraph of "Writing R Extensions" is not always ideal. This issue would take a long time and space, so I only indicate one point: the role ?"cre"? (creator) for the package maintainer. There are many cases where this description does not fit. For instance, I have seen packages where an author has designed the package, written the entire code and documentation alone, maintained the package for some years, and then passed on the mere maintenance to somebody else; definitely, I would not describe the second person as the "creator".

I think the issue was that those roles are not invented by R, they are 
standard MARC roles (reference listed in the ?person help page), and the 
full list contains nothing that is particularly close to the role of 
maintainer.

Creator [cre] is defined as "A person or organization responsible for 
the intellectual or artistic content of a resource".  The common English 
use of the word creator would match that with "originally responsible", 
whereas a maintainer is "currently responsible", so it's not completely 
off-base.

Maybe R shouldn't have tried to use MARC roles, or should have invented 
an additional one.  It's a bit late for that now, though.

Duncan Murdoch

> 
>>
>>
>> So, I think the safe way is to include the original authors in the author list (and check their license carefully).
> 
> In  general, "check the license" is a very sensible indication. In the specific case, the Matlab code comes with no licence indication - nothing.
> 
> I have now submitted mnormt_2.0.0.tar.gz to CRAN, with a comment/query about this issue.  Let us see what "The CRAN" says. In case you want see the conclusion, the outcome should appear at https://cran.r-project.org/package=mnormt in a few days.
> 
> Best regards,
> 
> Adelchi Azzalini
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Jun  2 18:03:57 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 2 Jun 2020 18:03:57 +0200
Subject: [R-pkg-devel] win-builder failing without informative message
In-Reply-To: <CABtg=KmKAEdKYwcF3wckhuU2YKjvr1xRJFDOR3KD_dhPW4NzkQ@mail.gmail.com>
References: <CAG5xu56mfBg1diGKFDK2pcCxe2vKi3X1_MHHhUbd3D6surhi1g@mail.gmail.com>
 <CABtg=KmKAEdKYwcF3wckhuU2YKjvr1xRJFDOR3KD_dhPW4NzkQ@mail.gmail.com>
Message-ID: <746f7a6d-cd96-06cc-1b49-2cccc3289907@statistik.tu-dortmund.de>

Simply:

** running tests for arch 'i386' ... [14m] OK

And the CRAN threshold for the whole package is 10 min. So only the 
tests for two architectures already take ~ 30 min here. which is too 
much for CRAN.

Best,
Uwe Ligges




On 02.06.2020 16:13, G?bor Cs?rdi wrote:
> Seems like your tests did not finish:
> https://win-builder.r-project.org/SFSFeP44df58/examples_and_tests/tests_x64/testthat.Rout
> 
> Either they take too long, or they froze. You can use a different
> testthat reporter, to see which one is stuck, e.g. like this:
> https://github.com/cran/desc/blob/3e52b4923c7852bc00fbc94887c42657ffc67283/tests/testthat.R#L4
> 
> Gabor
> 
> On Tue, Jun 2, 2020 at 3:09 PM Daniel Sjoberg <danield.sjoberg at gmail.com> wrote:
>>
>> Hello List!
>>
>> I am prepping gtsummary for a new release, but I am running into a problem
>> with the CRAN win-builder.
>>
>> The package is passing checks on my local Windows machine, another local
>> Windows machine, on a GitHub Actions Windows machine (
>> https://github.com/ddsjoberg/gtsummary/runs/729569705?check_suite_focus=true).
>> However I am getting this error on win-builder in `00check.log`:
>>
>> Check process probably crashed or hung up for 20 minutes ... killed
>> Most likely this happened in the example checks (?),
>> if not, ignore the following last lines of example output:
>>
>> ======== End of example output (where/before crash/hang up occured ?) ========
>>
>> link to win-builder results https://win-builder.r-project.org/SFSFeP44df58/
>>
>> Any ideas on how to troubleshoot this error?  The build is also passing on
>> macOS and Ubuntu GitHub Actions checks.
>>
>> Thank you!
>> Daniel
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue Jun  2 19:01:08 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Tue, 2 Jun 2020 12:01:08 -0500
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <A98F5A87-8805-43BC-B6BA-F2CD3EA716BE@stat.unipd.it>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <80b2e97f-70b2-9e8f-9512-12e7e5452c83@statistik.tu-dortmund.de>
 <93F5C123-5EAB-43F7-8A23-A96ED4121808@stat.unipd.it>
 <BL0PR04MB6609777A9B875E02F9216375F98B0@BL0PR04MB6609.namprd04.prod.outlook.com>
 <471DC47D-836C-4469-BBDC-497CD26ED4C9@gmail.com>
 <A98F5A87-8805-43BC-B6BA-F2CD3EA716BE@stat.unipd.it>
Message-ID: <c582ea49-d53b-73e7-c07f-4aae9b0ad6ae@effectivedefense.org>



On 2020-06-02 10:14, Adelchi Azzalini wrote:

<snip>
>
> In  general, "check the license" is a very sensible indication. In the specific case, the Matlab code comes with no licence indication - nothing.
>

 ????? I'm not an attorney, but it's my understanding that "no license 
indication" is a legal minefield:? You can be sued for copyright 
infringement, even with anything that "comes with no license indicate - 
nothing."? For horror stories in that regard, see the Wikipedia article 
on Lawrence Lessig's "Free Culture (book) 
[https://en.wikipedia.org/wiki/Free_Culture_(book)]:? Hollywood has lots 
of money for SLAPP lawsuits, and they've used it to stifle competition.


 ????? To me, this is in blatant violation of the Copyright Clause of 
the US Constitution, which says, "[the United States Congress shall have 
power] To promote the Progress of Science and useful Arts, by securing 
for limited Times to Authors and Inventors the exclusive Right to their 
respective Writings and Discoveries."[1]? However, as Lessig documented, 
the US Supreme Court disagreed.


QUESTION:? How much money have people on this list received for what 
they've written?? I've received not one penny for any technical article 
I've written or for software contributed to CRAN.


 ????? Spencer


[1]
https://en.wikipedia.org/wiki/Copyright_Clause
>
> Best regards,
>
> Adelchi Azzalini
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From d@n|e|d@@joberg @end|ng |rom gm@||@com  Tue Jun  2 19:14:08 2020
From: d@n|e|d@@joberg @end|ng |rom gm@||@com (Daniel Sjoberg)
Date: Tue, 2 Jun 2020 13:14:08 -0400
Subject: [R-pkg-devel] win-builder failing without informative message
In-Reply-To: <746f7a6d-cd96-06cc-1b49-2cccc3289907@statistik.tu-dortmund.de>
References: <CAG5xu56mfBg1diGKFDK2pcCxe2vKi3X1_MHHhUbd3D6surhi1g@mail.gmail.com>
 <CABtg=KmKAEdKYwcF3wckhuU2YKjvr1xRJFDOR3KD_dhPW4NzkQ@mail.gmail.com>
 <746f7a6d-cd96-06cc-1b49-2cccc3289907@statistik.tu-dortmund.de>
Message-ID: <CAG5xu54pw5-RfFYorKa0D3MLf2ecZVCQuJuH3fAaQT3Q9VEMmA@mail.gmail.com>

Thank you!  I added skip on CRAN to the time intensive tests, and it's
passing again.  MUCH APPRECIATED!

On Tue, Jun 2, 2020 at 12:03 PM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

> Simply:
>
> ** running tests for arch 'i386' ... [14m] OK
>
> And the CRAN threshold for the whole package is 10 min. So only the
> tests for two architectures already take ~ 30 min here. which is too
> much for CRAN.
>
> Best,
> Uwe Ligges
>
>
>
>
> On 02.06.2020 16:13, G?bor Cs?rdi wrote:
> > Seems like your tests did not finish:
> >
> https://win-builder.r-project.org/SFSFeP44df58/examples_and_tests/tests_x64/testthat.Rout
> >
> > Either they take too long, or they froze. You can use a different
> > testthat reporter, to see which one is stuck, e.g. like this:
> >
> https://github.com/cran/desc/blob/3e52b4923c7852bc00fbc94887c42657ffc67283/tests/testthat.R#L4
> >
> > Gabor
> >
> > On Tue, Jun 2, 2020 at 3:09 PM Daniel Sjoberg <danield.sjoberg at gmail.com>
> wrote:
> >>
> >> Hello List!
> >>
> >> I am prepping gtsummary for a new release, but I am running into a
> problem
> >> with the CRAN win-builder.
> >>
> >> The package is passing checks on my local Windows machine, another local
> >> Windows machine, on a GitHub Actions Windows machine (
> >>
> https://github.com/ddsjoberg/gtsummary/runs/729569705?check_suite_focus=true
> ).
> >> However I am getting this error on win-builder in `00check.log`:
> >>
> >> Check process probably crashed or hung up for 20 minutes ... killed
> >> Most likely this happened in the example checks (?),
> >> if not, ignore the following last lines of example output:
> >>
> >> ======== End of example output (where/before crash/hang up occured ?)
> ========
> >>
> >> link to win-builder results
> https://win-builder.r-project.org/SFSFeP44df58/
> >>
> >> Any ideas on how to troubleshoot this error?  The build is also passing
> on
> >> macOS and Ubuntu GitHub Actions checks.
> >>
> >> Thank you!
> >> Daniel
> >>
> >>          [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>

	[[alternative HTML version deleted]]


From d@v|dhughjone@ @end|ng |rom gm@||@com  Tue Jun  2 20:13:33 2020
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Tue, 2 Jun 2020 19:13:33 +0100
Subject: [R-pkg-devel] Including fonts in an rmarkdown vignette
Message-ID: <CAARY7kjqC_7tuMoab5KddJ_8aCJ8zD84MdYzpR+z36yv5RtM9g@mail.gmail.com>

Hi,

I'd like to build a rmarkdown vignette with my own choice of fonts ? I'm
pernickety about look and feel.

R CMD check will rebuild vignettes in the vignettes/ directory, and if
relevant fonts aren't on the build machine, it'll give a warning.

Here are the options I can think of:
* build vignettes on my machine and put them in inst/doc. Don't mention the
specific fonts in the Rmd file in vignettes/. So the file built by "R CMD
check" won't look quite like the pre-built version.  This might work, but
it seems against open source principle.
* put font files in vignettes/ and refer to them in the rmarkdown file. I'm
not sure how to do this.
* limit myself to the fonts preinstalled on win-builder or CRAN machines.
I'm not sure what these are

Has anyone got any advice or examples?

Cheers,
David

	[[alternative HTML version deleted]]


From @vr@h@m@@d|er @end|ng |rom gm@||@com  Tue Jun  2 21:24:35 2020
From: @vr@h@m@@d|er @end|ng |rom gm@||@com (Avraham Adler)
Date: Tue, 2 Jun 2020 19:24:35 +0000
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <c582ea49-d53b-73e7-c07f-4aae9b0ad6ae@effectivedefense.org>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <80b2e97f-70b2-9e8f-9512-12e7e5452c83@statistik.tu-dortmund.de>
 <93F5C123-5EAB-43F7-8A23-A96ED4121808@stat.unipd.it>
 <BL0PR04MB6609777A9B875E02F9216375F98B0@BL0PR04MB6609.namprd04.prod.outlook.com>
 <471DC47D-836C-4469-BBDC-497CD26ED4C9@gmail.com>
 <A98F5A87-8805-43BC-B6BA-F2CD3EA716BE@stat.unipd.it>
 <c582ea49-d53b-73e7-c07f-4aae9b0ad6ae@effectivedefense.org>
Message-ID: <CAL6gwnLJjuYAWJAVQY1TwGSEgTeJ2YHtFp2B8-=i_hjzc7hENA@mail.gmail.com>

<snip>

On Tue, Jun 2, 2020 at 5:04 PM Spencer Graves <
spencer.graves at effectivedefense.org> wrote:
> QUESTION:  How much money have people on this list received for what
> they've written?  I've received not one penny for any technical article
> I've written or for software contributed to CRAN.
>
>        Spencer

Ditto. What's even more annoying is when people clearly use one's package
in their published work and do not cite it, but that is for a different
thread.

Avi

	[[alternative HTML version deleted]]


From tke|tt @end|ng |rom gm@||@com  Tue Jun  2 21:45:38 2020
From: tke|tt @end|ng |rom gm@||@com (Tim Keitt)
Date: Tue, 2 Jun 2020 14:45:38 -0500
Subject: [R-pkg-devel] Vignette depends on BH
Message-ID: <CANnL8gomGto=u6VEsqck83a8V1LLGPeRYp5-qPfrVdVOC9A=VQ@mail.gmail.com>

I have an RMarkdown vignette in a package that uses Rcpp and depends on BH.
I added BH to the Suggests list. It is still generating warnings about BH.
What is the correct way to handle this?

Thanks.

THK

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jun  2 21:53:17 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 2 Jun 2020 15:53:17 -0400
Subject: [R-pkg-devel] Vignette depends on BH
In-Reply-To: <CANnL8gomGto=u6VEsqck83a8V1LLGPeRYp5-qPfrVdVOC9A=VQ@mail.gmail.com>
References: <CANnL8gomGto=u6VEsqck83a8V1LLGPeRYp5-qPfrVdVOC9A=VQ@mail.gmail.com>
Message-ID: <2d1547b0-4f32-1ecf-84d3-7260e085727c@gmail.com>

On 02/06/2020 3:45 p.m., Tim Keitt wrote:
> I have an RMarkdown vignette in a package that uses Rcpp and depends on BH.
> I added BH to the Suggests list. It is still generating warnings about BH.
> What is the correct way to handle this?

If a package is listed in Suggests, it should still work (possibly with 
diminished capabilities) when that package is not present.  So at the 
start of your vignette you could have something like

if (!require("BH")) {
   message("This vignette needs BH; since it is not installed, code will 
not be executed.")

   # Set default for chunk option "exec" to FALSE in all code chunks.
}

Duncan Murdoch


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue Jun  2 22:06:11 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Tue, 2 Jun 2020 15:06:11 -0500
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <CAL6gwnLJjuYAWJAVQY1TwGSEgTeJ2YHtFp2B8-=i_hjzc7hENA@mail.gmail.com>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <80b2e97f-70b2-9e8f-9512-12e7e5452c83@statistik.tu-dortmund.de>
 <93F5C123-5EAB-43F7-8A23-A96ED4121808@stat.unipd.it>
 <BL0PR04MB6609777A9B875E02F9216375F98B0@BL0PR04MB6609.namprd04.prod.outlook.com>
 <471DC47D-836C-4469-BBDC-497CD26ED4C9@gmail.com>
 <A98F5A87-8805-43BC-B6BA-F2CD3EA716BE@stat.unipd.it>
 <c582ea49-d53b-73e7-c07f-4aae9b0ad6ae@effectivedefense.org>
 <CAL6gwnLJjuYAWJAVQY1TwGSEgTeJ2YHtFp2B8-=i_hjzc7hENA@mail.gmail.com>
Message-ID: <79c13cbf-4e77-3a28-43f7-621e45a7988a@effectivedefense.org>



On 2020-06-02 14:24, Avraham Adler wrote:
> <snip>
>
> On Tue, Jun 2, 2020 at 5:04 PM Spencer Graves 
> <spencer.graves at effectivedefense.org 
> <mailto:spencer.graves at effectivedefense.org>> wrote:
> > QUESTION: ?How much money have people on this list received for what
> > they've written?? I've received not one penny for any technical article
> > I've written or for software contributed to CRAN.
> >
> > ? ? ? ?Spencer
>
> Ditto. What's even more annoying is when people clearly use one's 
> package in their published work and do not cite it, but that is for a 
> different thread.


 ????? Might that be a copyright violation or just intellectual laziness 
or in some cases dishonesty but short of a level that could lead to some 
disciplinary action in a university or research organization?


 ?????? sg

>
> Avi
>


	[[alternative HTML version deleted]]


From kev|n@r@coombe@ @end|ng |rom gm@||@com  Tue Jun  2 22:13:58 2020
From: kev|n@r@coombe@ @end|ng |rom gm@||@com (Kevin R. Coombes)
Date: Tue, 2 Jun 2020 16:13:58 -0400
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <CAL6gwnLJjuYAWJAVQY1TwGSEgTeJ2YHtFp2B8-=i_hjzc7hENA@mail.gmail.com>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <80b2e97f-70b2-9e8f-9512-12e7e5452c83@statistik.tu-dortmund.de>
 <93F5C123-5EAB-43F7-8A23-A96ED4121808@stat.unipd.it>
 <BL0PR04MB6609777A9B875E02F9216375F98B0@BL0PR04MB6609.namprd04.prod.outlook.com>
 <471DC47D-836C-4469-BBDC-497CD26ED4C9@gmail.com>
 <A98F5A87-8805-43BC-B6BA-F2CD3EA716BE@stat.unipd.it>
 <c582ea49-d53b-73e7-c07f-4aae9b0ad6ae@effectivedefense.org>
 <CAL6gwnLJjuYAWJAVQY1TwGSEgTeJ2YHtFp2B8-=i_hjzc7hENA@mail.gmail.com>
Message-ID: <7b77153e-4a9b-5a14-912b-216a83878056@gmail.com>

For academics, aren't those citations the currency in which they are 
supposed to be paid (at least for R packages)?
 ? Kevin

On 6/2/2020 3:24 PM, Avraham Adler wrote:
> <snip>
>
> On Tue, Jun 2, 2020 at 5:04 PM Spencer Graves <
> spencer.graves at effectivedefense.org> wrote:
>> QUESTION:  How much money have people on this list received for what
>> they've written?  I've received not one penny for any technical article
>> I've written or for software contributed to CRAN.
>>
>>         Spencer
> Ditto. What's even more annoying is when people clearly use one's package
> in their published work and do not cite it, but that is for a different
> thread.
>
> Avi
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ejo@ym@rt @end|ng |rom gm@||@com  Wed Jun  3 00:48:33 2020
From: ejo@ym@rt @end|ng |rom gm@||@com (=?UTF-8?Q?Edgar_Josymar_Torrej=C3=B3n=2DMagallanes?=)
Date: Tue, 2 Jun 2020 16:48:33 -0600
Subject: [R-pkg-devel] S4 methods
In-Reply-To: <CABtg=KnUUusC6vDSA5gE0=MryCSA5z+v5z6YhUHOwVLDa6d2xw@mail.gmail.com>
References: <CAKtnMVzW-9jSrG3JfFWvc9mNPgfj8WOWypD-6EtiS+arGXD-ag@mail.gmail.com>
 <CABtg=KnUUusC6vDSA5gE0=MryCSA5z+v5z6YhUHOwVLDa6d2xw@mail.gmail.com>
Message-ID: <CAKtnMVx7_=CYMe0rSfhQ2Fdv71bgnad6zR0-tjeVZ--chfG6-A@mail.gmail.com>

Thank you so much for your help.

I delete the exporClass and the warnings and error have disappeared.

Regards

El mar., 2 jun. 2020 a las 4:28, G?bor Cs?rdi (<csardi.gabor at gmail.com>)
escribi?:

> You export these S4 classes from your package:
>
> https://github.com/cran/sizeMat/blob/c4d257a9108cde3ddb6e8eb2072cd567ae85b5c8/NAMESPACE#L13-L15
>
> But these are not actually S4 classes, AFAICT. Remove the
> `@exportClass` tags here:
>
> https://github.com/cran/sizeMat/blob/c4d257a9108cde3ddb6e8eb2072cd567ae85b5c8/R/gonadMat-main.R#L47
>
> https://github.com/cran/sizeMat/blob/c4d257a9108cde3ddb6e8eb2072cd567ae85b5c8/R/morphMat-main.R#L101
>
> https://github.com/cran/sizeMat/blob/c4d257a9108cde3ddb6e8eb2072cd567ae85b5c8/R/morphMat-main.R#L305
>
> Gabor
>
> On Tue, Jun 2, 2020 at 10:57 AM Edgar Josymar Torrej?n-Magallanes
> <ejosymart at gmail.com> wrote:
> >
> > Dear members
> >
> > I just finished some minor updates to an R package (sizeMat) I've had on
> > CRAN (haven't had to update in a month). My package passes Check on my
> > local machine, but it just bounced back from CRAN with the message
> >
> > Warning: S4 exports specified in 'NAMESPACE' but not defined in package
> > 'sizeMat'
> >
> > I use roxygen2 to build my package NAMESPACE and don't have any S4
> exports
> > that I'm aware of.
> >
> > Perhaps this might be related to changes in R version 4.0.0?
> > How could I fix this problem?
> >
> > Thanks.
> >
> > --
> > Edgar Josymar Torrej?n Magallanes
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Edgar Josymar Torrej?n Magallanes

	[[alternative HTML version deleted]]


From rm@h@rp @end|ng |rom me@com  Wed Jun  3 01:32:16 2020
From: rm@h@rp @end|ng |rom me@com (R. Mark Sharp)
Date: Tue, 2 Jun 2020 18:32:16 -0500
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <52b8a74b-e7fb-5127-13b7-9f1d3f2e27f0@effectivedefense.org>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <42505A3C-F7F8-4332-ABD0-14F182849ED6@stat.unipd.it>
 <4B7E6B5B-0288-4D30-9806-321556AB38BB@me.com>
 <24278.27732.72005.283713@rob.eddelbuettel.com>
 <52b8a74b-e7fb-5127-13b7-9f1d3f2e27f0@effectivedefense.org>
Message-ID: <1AE2BC82-DD81-4CF7-AA58-D0E134445FAD@me.com>

Spencer,

I apologize for my obvious (in hindsight) error in bringing up the topic. I will bring up one example, because of your request. Google has listed GPL-1, 2, and 3 as one of several licenses that are restricted and cannot be used by a Google product delivered to outside customers. This include downloadable client software and software such as insdie the Google Search Appliance. This includes having scripts that load packages dynamically as with ?library()? and ?require()?. Please see https://opensource.google/docs/thirdparty/licenses/#restricted for their wording. 

I am not defending their position and disagree with it. However, it is their position based on what I think is a conservative or overly cautious legal interpretation. I am not a lawyer, however, so my opinions are of no import.

Mark
R. Mark Sharp, Ph.D.
Data Scientist and Biomedical Statistical Consultant
7526 Meadow Green St.
San Antonio, TX 78251
mobile: 210-218-2868
rmsharp at me.com











> On Jun 2, 2020, at 10:22 AM, Spencer Graves <spencer.graves at effectivedefense.org> wrote:
> 
>       Can Dr. Sharp kindly provide a credible reference, discussing the alleged ambiguities in GPL-2 and GPL-3 that convince some companies to avoid them?
> 
> 
>       I like Wikimedia Foundation projects like Wikipedia, where almost anyone can change almost anything, and what stays tends to be written from a neutral point of view, citing credible sources.  I get several emails a day notifying me of changes in articles I'm "watching".  FUD, vandalism, etc., are generally reverted fairly quickly or moved to the "Talk" page associated with each article, where the world is invited to provide credible source(s).
> 
> 
>       Spencer Graves
> 
> 
> On 2020-06-02 10:12, Dirk Eddelbuettel wrote:
>> On 2 June 2020 at 10:06, R. Mark Sharp wrote:
>> | The GPL-2 and GPL-3 licenses are apparently sufficiently ambiguous in the legal community that some companies avoid them.
>> 
>> Wittgenstein:  'That whereof we cannot speak, thereof we must remain silent'
>> 
>> This is a mailing list of the R project. R is a GNU Project. R is licensed
>> under the GPL, version two or later. That has not stopped large corporations
>> from using R, adopting R, or starting or acquiring R related businesses.
>> 
>> If you have a strong urge to spread FUD about the GPL and R, could you have the
>> modicum of etiquette to not do it on a mailing list of the R Project?
>> 
>> Dirk
>> 
> 
> ______________________________________________
> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>

	[[alternative HTML version deleted]]


From @vr@h@m@@d|er @end|ng |rom gm@||@com  Wed Jun  3 01:49:25 2020
From: @vr@h@m@@d|er @end|ng |rom gm@||@com (Avraham Adler)
Date: Tue, 2 Jun 2020 19:49:25 -0400
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <1AE2BC82-DD81-4CF7-AA58-D0E134445FAD@me.com>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <42505A3C-F7F8-4332-ABD0-14F182849ED6@stat.unipd.it>
 <4B7E6B5B-0288-4D30-9806-321556AB38BB@me.com>
 <24278.27732.72005.283713@rob.eddelbuettel.com>
 <52b8a74b-e7fb-5127-13b7-9f1d3f2e27f0@effectivedefense.org>
 <1AE2BC82-DD81-4CF7-AA58-D0E134445FAD@me.com>
Message-ID: <CAL6gwn+nMD0cT7LT3CuYv+F0NHKso6gmthjq-F9mgV56O3UUmA@mail.gmail.com>

IANAL, but the GPL family of licenses is VIRAL copy left so it infects
anything it touched, which is why many shy away and prefer something like
the Mozilla Public License 2 (MPL) as a compromise between viral copyleft
and the permissive MIT/ISC/BSD2.

Avi

On Tue, Jun 2, 2020 at 7:32 PM R. Mark Sharp <rmsharp at me.com> wrote:

> Spencer,
>
> I apologize for my obvious (in hindsight) error in bringing up the topic.
> I will bring up one example, because of your request. Google has listed
> GPL-1, 2, and 3 as one of several licenses that are restricted and cannot
> be used by a Google product delivered to outside customers. This include
> downloadable client software and software such as insdie the Google Search
> Appliance. This includes having scripts that load packages dynamically as
> with ?library()? and ?require()?. Please see
> https://opensource.google/docs/thirdparty/licenses/#restricted for their
> wording.
>
> I am not defending their position and disagree with it. However, it is
> their position based on what I think is a conservative or overly cautious
> legal interpretation. I am not a lawyer, however, so my opinions are of no
> import.
>
> Mark
> R. Mark Sharp, Ph.D.
> Data Scientist and Biomedical Statistical Consultant
> 7526 Meadow Green St.
> San Antonio, TX 78251
> mobile: 210-218-2868
> rmsharp at me.com
>
>
>
>
>
>
>
>
>
>
>
> > On Jun 2, 2020, at 10:22 AM, Spencer Graves <
> spencer.graves at effectivedefense.org> wrote:
> >
> >       Can Dr. Sharp kindly provide a credible reference, discussing the
> alleged ambiguities in GPL-2 and GPL-3 that convince some companies to
> avoid them?
> >
> >
> >       I like Wikimedia Foundation projects like Wikipedia, where almost
> anyone can change almost anything, and what stays tends to be written from
> a neutral point of view, citing credible sources.  I get several emails a
> day notifying me of changes in articles I'm "watching".  FUD, vandalism,
> etc., are generally reverted fairly quickly or moved to the "Talk" page
> associated with each article, where the world is invited to provide
> credible source(s).
> >
> >
> >       Spencer Graves
> >
> >
> > On 2020-06-02 10:12, Dirk Eddelbuettel wrote:
> >> On 2 June 2020 at 10:06, R. Mark Sharp wrote:
> >> | The GPL-2 and GPL-3 licenses are apparently sufficiently ambiguous in
> the legal community that some companies avoid them.
> >>
> >> Wittgenstein:  'That whereof we cannot speak, thereof we must remain
> silent'
> >>
> >> This is a mailing list of the R project. R is a GNU Project. R is
> licensed
> >> under the GPL, version two or later. That has not stopped large
> corporations
> >> from using R, adopting R, or starting or acquiring R related businesses.
> >>
> >> If you have a strong urge to spread FUD about the GPL and R, could you
> have the
> >> modicum of etiquette to not do it on a mailing list of the R Project?
> >>
> >> Dirk
> >>
> >
> > ______________________________________________
> > R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
> mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel <
> https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
-- 
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Wed Jun  3 02:18:22 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 2 Jun 2020 19:18:22 -0500
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <1AE2BC82-DD81-4CF7-AA58-D0E134445FAD@me.com>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <42505A3C-F7F8-4332-ABD0-14F182849ED6@stat.unipd.it>
 <4B7E6B5B-0288-4D30-9806-321556AB38BB@me.com>
 <24278.27732.72005.283713@rob.eddelbuettel.com>
 <52b8a74b-e7fb-5127-13b7-9f1d3f2e27f0@effectivedefense.org>
 <1AE2BC82-DD81-4CF7-AA58-D0E134445FAD@me.com>
Message-ID: <24278.60494.656685.955536@rob.eddelbuettel.com>


On 2 June 2020 at 18:32, R. Mark Sharp wrote:
| I apologize for my obvious (in hindsight) error in bringing up the topic. I will bring up one example, because of your request. Google has listed GPL-1, 2, and 3 as one of several licenses that are restricted and cannot be used by a Google product delivered to outside customers. This include downloadable client software and software such as insdie the Google Search Appliance. This includes having scripts that load packages dynamically as with ?library()? and ?require()?. Please see https://opensource.google/docs/thirdparty/licenses/#restricted for their wording. 
| 
| I am not defending their position and disagree with it. However, it is their position based on what I think is a conservative or overly cautious legal interpretation. I am not a lawyer, however, so my opinions are of no import.

To a good first approximations, "nobody" on this list is a lawyer.

We are all statisticians, or analysts, or quantitatively-minded coders. Which
means it is the wrong list to have this discussion. Please take it elsewhere.

As for the argument contained in that email of yours, I think it boils down to

 - Company X quotes what you think are good reasons not use license Y.

 - We all read and interpret as we want to. But now you go on to conclude "So
   I should not use license Y."

 - And you then appear to extrapolate to "Nobody should use Y."

It simply does not work that way.  Not from 1) to 2), and (most certainly)
not from 2) to 3). Remember what you ignore from my last email: this is a
list of a GPL (>= 2) licensed project.

But that whole discussion had been had a million times already in a million
places.  This is not one of them.

A few of use came together here to offer help on packaging for R and CRAN, to
move traffic of R-devel (as packaging is generally "not R development", and
to help the CRAN maintainers by taking some load of their inboxes. I am one
of three founders of the list, and continue to help by 'filtering' first
posters. And I have *zero appetite* for this place to become your license
discussion hotspot. Please take it elsewhere, maybe even to a lawyer if you
want real advice.

Thank you, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jun  3 02:25:25 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 02 Jun 2020 17:25:25 -0700
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <CAL6gwn+nMD0cT7LT3CuYv+F0NHKso6gmthjq-F9mgV56O3UUmA@mail.gmail.com>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <42505A3C-F7F8-4332-ABD0-14F182849ED6@stat.unipd.it>
 <4B7E6B5B-0288-4D30-9806-321556AB38BB@me.com>
 <24278.27732.72005.283713@rob.eddelbuettel.com>
 <52b8a74b-e7fb-5127-13b7-9f1d3f2e27f0@effectivedefense.org>
 <1AE2BC82-DD81-4CF7-AA58-D0E134445FAD@me.com>
 <CAL6gwn+nMD0cT7LT3CuYv+F0NHKso6gmthjq-F9mgV56O3UUmA@mail.gmail.com>
Message-ID: <FE60F44F-A0BB-49AC-8741-DCAD615B554B@dcn.davis.ca.us>

"Viral" is has connotations that reflect the biases of the person using the term. A less loaded perspective is that some people don't want you to take their contributions out of circulation by using it as the foundation of your proprietary work. If you want to close it up, build from scratch or find some other code that isn't GPL.

Describing it as "viral" makes it sound as if they were trying to steal something you did instead of protecting their code from being stolen. Please refrain from being inflammatory.

On June 2, 2020 4:49:25 PM PDT, Avraham Adler <avraham.adler at gmail.com> wrote:
>IANAL, but the GPL family of licenses is VIRAL copy left so it infects
>anything it touched, which is why many shy away and prefer something
>like
>the Mozilla Public License 2 (MPL) as a compromise between viral
>copyleft
>and the permissive MIT/ISC/BSD2.
>
>Avi
>
>On Tue, Jun 2, 2020 at 7:32 PM R. Mark Sharp <rmsharp at me.com> wrote:
>
>> Spencer,
>>
>> I apologize for my obvious (in hindsight) error in bringing up the
>topic.
>> I will bring up one example, because of your request. Google has
>listed
>> GPL-1, 2, and 3 as one of several licenses that are restricted and
>cannot
>> be used by a Google product delivered to outside customers. This
>include
>> downloadable client software and software such as insdie the Google
>Search
>> Appliance. This includes having scripts that load packages
>dynamically as
>> with ?library()? and ?require()?. Please see
>> https://opensource.google/docs/thirdparty/licenses/#restricted for
>their
>> wording.
>>
>> I am not defending their position and disagree with it. However, it
>is
>> their position based on what I think is a conservative or overly
>cautious
>> legal interpretation. I am not a lawyer, however, so my opinions are
>of no
>> import.
>>
>> Mark
>> R. Mark Sharp, Ph.D.
>> Data Scientist and Biomedical Statistical Consultant
>> 7526 Meadow Green St.
>> San Antonio, TX 78251
>> mobile: 210-218-2868
>> rmsharp at me.com
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> > On Jun 2, 2020, at 10:22 AM, Spencer Graves <
>> spencer.graves at effectivedefense.org> wrote:
>> >
>> >       Can Dr. Sharp kindly provide a credible reference, discussing
>the
>> alleged ambiguities in GPL-2 and GPL-3 that convince some companies
>to
>> avoid them?
>> >
>> >
>> >       I like Wikimedia Foundation projects like Wikipedia, where
>almost
>> anyone can change almost anything, and what stays tends to be written
>from
>> a neutral point of view, citing credible sources.  I get several
>emails a
>> day notifying me of changes in articles I'm "watching".  FUD,
>vandalism,
>> etc., are generally reverted fairly quickly or moved to the "Talk"
>page
>> associated with each article, where the world is invited to provide
>> credible source(s).
>> >
>> >
>> >       Spencer Graves
>> >
>> >
>> > On 2020-06-02 10:12, Dirk Eddelbuettel wrote:
>> >> On 2 June 2020 at 10:06, R. Mark Sharp wrote:
>> >> | The GPL-2 and GPL-3 licenses are apparently sufficiently
>ambiguous in
>> the legal community that some companies avoid them.
>> >>
>> >> Wittgenstein:  'That whereof we cannot speak, thereof we must
>remain
>> silent'
>> >>
>> >> This is a mailing list of the R project. R is a GNU Project. R is
>> licensed
>> >> under the GPL, version two or later. That has not stopped large
>> corporations
>> >> from using R, adopting R, or starting or acquiring R related
>businesses.
>> >>
>> >> If you have a strong urge to spread FUD about the GPL and R, could
>you
>> have the
>> >> modicum of etiquette to not do it on a mailing list of the R
>Project?
>> >>
>> >> Dirk
>> >>
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org
><mailto:R-package-devel at r-project.org>
>> mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel <
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>

-- 
Sent from my phone. Please excuse my brevity.


From @vr@h@m@@d|er @end|ng |rom gm@||@com  Wed Jun  3 02:33:56 2020
From: @vr@h@m@@d|er @end|ng |rom gm@||@com (Avraham Adler)
Date: Tue, 2 Jun 2020 20:33:56 -0400
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <FE60F44F-A0BB-49AC-8741-DCAD615B554B@dcn.davis.ca.us>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <42505A3C-F7F8-4332-ABD0-14F182849ED6@stat.unipd.it>
 <4B7E6B5B-0288-4D30-9806-321556AB38BB@me.com>
 <24278.27732.72005.283713@rob.eddelbuettel.com>
 <52b8a74b-e7fb-5127-13b7-9f1d3f2e27f0@effectivedefense.org>
 <1AE2BC82-DD81-4CF7-AA58-D0E134445FAD@me.com>
 <CAL6gwn+nMD0cT7LT3CuYv+F0NHKso6gmthjq-F9mgV56O3UUmA@mail.gmail.com>
 <FE60F44F-A0BB-49AC-8741-DCAD615B554B@dcn.davis.ca.us>
Message-ID: <CAL6gwn+T5+v3RE72bMgmrvCrW8HGc8esuTJxJyX0Rof-+bij7Q@mail.gmail.com>

Apologies; my intent was not to disparage, but that is the term is used in
the industry and in venues which discuss FLOSS because it reflects that the
addition of one component with that kind of copyleft license causes the
entire project to need that particular copyleft license. If there is a term
which reflects that mechanism from a discipline other than biology,
please let me know.

Thanks,

Avi

On Tue, Jun 2, 2020 at 8:25 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> "Viral" is has connotations that reflect the biases of the person using
> the term. A less loaded perspective is that some people don't want you to
> take their contributions out of circulation by using it as the foundation
> of your proprietary work. If you want to close it up, build from scratch or
> find some other code that isn't GPL.
>
> Describing it as "viral" makes it sound as if they were trying to steal
> something you did instead of protecting their code from being stolen.
> Please refrain from being inflammatory.
>
> On June 2, 2020 4:49:25 PM PDT, Avraham Adler <avraham.adler at gmail.com>
> wrote:
> >IANAL, but the GPL family of licenses is VIRAL copy left so it infects
> >anything it touched, which is why many shy away and prefer something
> >like
> >the Mozilla Public License 2 (MPL) as a compromise between viral
> >copyleft
> >and the permissive MIT/ISC/BSD2.
> >
> >Avi
> >
> >On Tue, Jun 2, 2020 at 7:32 PM R. Mark Sharp <rmsharp at me.com> wrote:
> >
> >> Spencer,
> >>
> >> I apologize for my obvious (in hindsight) error in bringing up the
> >topic.
> >> I will bring up one example, because of your request. Google has
> >listed
> >> GPL-1, 2, and 3 as one of several licenses that are restricted and
> >cannot
> >> be used by a Google product delivered to outside customers. This
> >include
> >> downloadable client software and software such as insdie the Google
> >Search
> >> Appliance. This includes having scripts that load packages
> >dynamically as
> >> with ?library()? and ?require()?. Please see
> >> https://opensource.google/docs/thirdparty/licenses/#restricted for
> >their
> >> wording.
> >>
> >> I am not defending their position and disagree with it. However, it
> >is
> >> their position based on what I think is a conservative or overly
> >cautious
> >> legal interpretation. I am not a lawyer, however, so my opinions are
> >of no
> >> import.
> >>
> >> Mark
> >> R. Mark Sharp, Ph.D.
> >> Data Scientist and Biomedical Statistical Consu
> <https://www.google.com/maps/search/a+Scientist+and+Biomedical+Statistical+Consu?entry=gmail&source=g>
> ltant
> >> 7526 Meadow Green St.
> >> San Antonio, TX 78251
> >> mobile: 210-218-2868
> >> rmsharp at me.com
> >>
> >>
> >>
> >>
> >>
> >>
> >>
> >>
> >>
> >>
> >>
> >> > On Jun 2, 2020, at 10:22 AM, Spencer Graves <
> >> spencer.graves at effectivedefense.org> wrote:
> >> >
> >> >       Can Dr. Sharp kindly provide a credible reference, discussing
> >the
> >> alleged ambiguities in GPL-2 and GPL-3 that convince some companies
> >to
> >> avoid them?
> >> >
> >> >
> >> >       I like Wikimedia Foundation projects like Wikipedia, where
> >almost
> >> anyone can change almost anything, and what stays tends to be written
> >from
> >> a neutral point of view, citing credible sources.  I get several
> >emails a
> >> day notifying me of changes in articles I'm "watching".  FUD,
> >vandalism,
> >> etc., are generally reverted fairly quickly or moved to the "Talk"
> >page
> >> associated with each article, where the world is invited to provide
> >> credible source(s).
> >> >
> >> >
> >> >       Spencer Graves
> >> >
> >> >
> >> > On 2020-06-02 10:12, Dirk Eddelbuettel wrote:
> >> >> On 2 June 2020 at 10:06, R. Mark Sharp wrote:
> >> >> | The GPL-2 and GPL-3 licenses are apparently sufficiently
> >ambiguous in
> >> the legal community that some companies avoid them.
> >> >>
> >> >> Wittgenstein:  'That whereof we cannot speak, thereof we must
> >remain
> >> silent'
> >> >>
> >> >> This is a mailing list of the R project. R is a GNU Project. R is
> >> licensed
> >> >> under the GPL, version two or later. That has not stopped large
> >> corporations
> >> >> from using R, adopting R, or starting or acquiring R related
> >businesses.
> >> >>
> >> >> If you have a strong urge to spread FUD about the GPL and R, could
> >you
> >> have the
> >> >> modicum of etiquette to not do it on a mailing list of the R
> >Project?
> >> >>
> >> >> Dirk
> >> >>
> >> >
> >> > ______________________________________________
> >> > R-package-devel at r-project.org
> ><mailto:R-package-devel at r-project.org>
> >> mailing list
> >> > https://stat.ethz.ch/mailman/listinfo/r-package-devel <
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
>
> --
> Sent from my phone. Please excuse my brevity.
>
-- 
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jun  3 02:43:08 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 02 Jun 2020 17:43:08 -0700
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <CAL6gwn+T5+v3RE72bMgmrvCrW8HGc8esuTJxJyX0Rof-+bij7Q@mail.gmail.com>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <42505A3C-F7F8-4332-ABD0-14F182849ED6@stat.unipd.it>
 <4B7E6B5B-0288-4D30-9806-321556AB38BB@me.com>
 <24278.27732.72005.283713@rob.eddelbuettel.com>
 <52b8a74b-e7fb-5127-13b7-9f1d3f2e27f0@effectivedefense.org>
 <1AE2BC82-DD81-4CF7-AA58-D0E134445FAD@me.com>
 <CAL6gwn+nMD0cT7LT3CuYv+F0NHKso6gmthjq-F9mgV56O3UUmA@mail.gmail.com>
 <FE60F44F-A0BB-49AC-8741-DCAD615B554B@dcn.davis.ca.us>
 <CAL6gwn+T5+v3RE72bMgmrvCrW8HGc8esuTJxJyX0Rof-+bij7Q@mail.gmail.com>
Message-ID: <7EDBEDD4-1FE6-49FE-B92A-48D531646470@dcn.davis.ca.us>

The obvious answer is simply to refer to GPL. It isn't necessary to propagate a derogatory point of view by finding another word for an incorrect idea.  Try re-reading my previous words without trying to hold on to a flawed interpretation.

On June 2, 2020 5:33:56 PM PDT, Avraham Adler <avraham.adler at gmail.com> wrote:
>Apologies; my intent was not to disparage, but that is the term is used
>in
>the industry and in venues which discuss FLOSS because it reflects that
>the
>addition of one component with that kind of copyleft license causes the
>entire project to need that particular copyleft license. If there is a
>term
>which reflects that mechanism from a discipline other than biology,
>please let me know.
>
>Thanks,
>
>Avi
>
>On Tue, Jun 2, 2020 at 8:25 PM Jeff Newmiller
><jdnewmil at dcn.davis.ca.us>
>wrote:
>
>> "Viral" is has connotations that reflect the biases of the person
>using
>> the term. A less loaded perspective is that some people don't want
>you to
>> take their contributions out of circulation by using it as the
>foundation
>> of your proprietary work. If you want to close it up, build from
>scratch or
>> find some other code that isn't GPL.
>>
>> Describing it as "viral" makes it sound as if they were trying to
>steal
>> something you did instead of protecting their code from being stolen.
>> Please refrain from being inflammatory.
>>
>> On June 2, 2020 4:49:25 PM PDT, Avraham Adler
><avraham.adler at gmail.com>
>> wrote:
>> >IANAL, but the GPL family of licenses is VIRAL copy left so it
>infects
>> >anything it touched, which is why many shy away and prefer something
>> >like
>> >the Mozilla Public License 2 (MPL) as a compromise between viral
>> >copyleft
>> >and the permissive MIT/ISC/BSD2.
>> >
>> >Avi
>> >
>> >On Tue, Jun 2, 2020 at 7:32 PM R. Mark Sharp <rmsharp at me.com> wrote:
>> >
>> >> Spencer,
>> >>
>> >> I apologize for my obvious (in hindsight) error in bringing up the
>> >topic.
>> >> I will bring up one example, because of your request. Google has
>> >listed
>> >> GPL-1, 2, and 3 as one of several licenses that are restricted and
>> >cannot
>> >> be used by a Google product delivered to outside customers. This
>> >include
>> >> downloadable client software and software such as insdie the
>Google
>> >Search
>> >> Appliance. This includes having scripts that load packages
>> >dynamically as
>> >> with ?library()? and ?require()?. Please see
>> >> https://opensource.google/docs/thirdparty/licenses/#restricted for
>> >their
>> >> wording.
>> >>
>> >> I am not defending their position and disagree with it. However,
>it
>> >is
>> >> their position based on what I think is a conservative or overly
>> >cautious
>> >> legal interpretation. I am not a lawyer, however, so my opinions
>are
>> >of no
>> >> import.
>> >>
>> >> Mark
>> >> R. Mark Sharp, Ph.D.
>> >> Data Scientist and Biomedical Statistical Consu
>>
><https://www.google.com/maps/search/a+Scientist+and+Biomedical+Statistical+Consu?entry=gmail&source=g>
>> ltant
>> >> 7526 Meadow Green St.
>> >> San Antonio, TX 78251
>> >> mobile: 210-218-2868
>> >> rmsharp at me.com
>> >>
>> >>
>> >>
>> >>
>> >>
>> >>
>> >>
>> >>
>> >>
>> >>
>> >>
>> >> > On Jun 2, 2020, at 10:22 AM, Spencer Graves <
>> >> spencer.graves at effectivedefense.org> wrote:
>> >> >
>> >> >       Can Dr. Sharp kindly provide a credible reference,
>discussing
>> >the
>> >> alleged ambiguities in GPL-2 and GPL-3 that convince some
>companies
>> >to
>> >> avoid them?
>> >> >
>> >> >
>> >> >       I like Wikimedia Foundation projects like Wikipedia, where
>> >almost
>> >> anyone can change almost anything, and what stays tends to be
>written
>> >from
>> >> a neutral point of view, citing credible sources.  I get several
>> >emails a
>> >> day notifying me of changes in articles I'm "watching".  FUD,
>> >vandalism,
>> >> etc., are generally reverted fairly quickly or moved to the "Talk"
>> >page
>> >> associated with each article, where the world is invited to
>provide
>> >> credible source(s).
>> >> >
>> >> >
>> >> >       Spencer Graves
>> >> >
>> >> >
>> >> > On 2020-06-02 10:12, Dirk Eddelbuettel wrote:
>> >> >> On 2 June 2020 at 10:06, R. Mark Sharp wrote:
>> >> >> | The GPL-2 and GPL-3 licenses are apparently sufficiently
>> >ambiguous in
>> >> the legal community that some companies avoid them.
>> >> >>
>> >> >> Wittgenstein:  'That whereof we cannot speak, thereof we must
>> >remain
>> >> silent'
>> >> >>
>> >> >> This is a mailing list of the R project. R is a GNU Project. R
>is
>> >> licensed
>> >> >> under the GPL, version two or later. That has not stopped large
>> >> corporations
>> >> >> from using R, adopting R, or starting or acquiring R related
>> >businesses.
>> >> >>
>> >> >> If you have a strong urge to spread FUD about the GPL and R,
>could
>> >you
>> >> have the
>> >> >> modicum of etiquette to not do it on a mailing list of the R
>> >Project?
>> >> >>
>> >> >> Dirk
>> >> >>
>> >> >
>> >> > ______________________________________________
>> >> > R-package-devel at r-project.org
>> ><mailto:R-package-devel at r-project.org>
>> >> mailing list
>> >> > https://stat.ethz.ch/mailman/listinfo/r-package-devel <
>> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>> >>
>> >>         [[alternative HTML version deleted]]
>> >>
>> >> ______________________________________________
>> >> R-package-devel at r-project.org mailing list
>> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >>
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>

-- 
Sent from my phone. Please excuse my brevity.


From @vr@h@m@@d|er @end|ng |rom gm@||@com  Wed Jun  3 02:47:10 2020
From: @vr@h@m@@d|er @end|ng |rom gm@||@com (Avraham Adler)
Date: Tue, 2 Jun 2020 20:47:10 -0400
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <7EDBEDD4-1FE6-49FE-B92A-48D531646470@dcn.davis.ca.us>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <42505A3C-F7F8-4332-ABD0-14F182849ED6@stat.unipd.it>
 <4B7E6B5B-0288-4D30-9806-321556AB38BB@me.com>
 <24278.27732.72005.283713@rob.eddelbuettel.com>
 <52b8a74b-e7fb-5127-13b7-9f1d3f2e27f0@effectivedefense.org>
 <1AE2BC82-DD81-4CF7-AA58-D0E134445FAD@me.com>
 <CAL6gwn+nMD0cT7LT3CuYv+F0NHKso6gmthjq-F9mgV56O3UUmA@mail.gmail.com>
 <FE60F44F-A0BB-49AC-8741-DCAD615B554B@dcn.davis.ca.us>
 <CAL6gwn+T5+v3RE72bMgmrvCrW8HGc8esuTJxJyX0Rof-+bij7Q@mail.gmail.com>
 <7EDBEDD4-1FE6-49FE-B92A-48D531646470@dcn.davis.ca.us>
Message-ID: <CAL6gwnLSAgfARCi=bOEwAxxZ8pU1H6gu2vp3-LTnZL=b7LLd8g@mail.gmail.com>

I respectfully submit that the mechanism is accurately described as ?viral?
albeit the connotations may be uncomfortable. I will refrain from
commenting further in this thread. Happy to continue with you off-list if
you wish.

Thank you,

Aavi

On Tue, Jun 2, 2020 at 8:43 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> The obvious answer is simply to refer to GPL. It isn't necessary to
> propagate a derogatory point of view by finding another word for an
> incorrect idea.  Try re-reading my previous words without trying to hold on
> to a flawed interpretation.
>
> On June 2, 2020 5:33:56 PM PDT, Avraham Adler <avraham.adler at gmail.com>
> wrote:
> >Apologies; my intent was not to disparage, but that is the term is used
> >in
> >the industry and in venues which discuss FLOSS because it reflects that
> >the
> >addition of one component with that kind of copyleft license causes the
> >entire project to need that particular copyleft license. If there is a
> >term
> >which reflects that mechanism from a discipline other than biology,
> >please let me know.
> >
> >Thanks,
> >
> >Avi
> >
> >On Tue, Jun 2, 2020 at 8:25 PM Jeff Newmiller
> ><jdnewmil at dcn.davis.ca.us>
> >wrote:
> >
> >> "Viral" is has connotations that reflect the biases of the person
> >using
> >> the term. A less loaded perspective is that some people don't want
> >you to
> >> take their contributions out of circulation by using it as the
> >foundation
> >> of your proprietary work. If you want to close it up, build from
> >scratch or
> >> find some other code that isn't GPL.
> >>
> >> Describing it as "viral" makes it sound as if they were trying to
> >steal
> >> something you did instead of protecting their code from being stolen.
> >> Please refrain from being inflammatory.
> >>
> >> On June 2, 2020 4:49:25 PM PDT, Avraham Adler
> ><avraham.adler at gmail.com>
> >> wrote:
> >> >IANAL, but the GPL family of licenses is VIRAL copy left so it
> >infects
> >> >anything it touched, which is why many shy away and prefer something
> >> >like
> >> >the Mozilla Public License 2 (MPL) as a compromise between viral
> >> >copyleft
> >> >and the permissive MIT/ISC/BSD2.
> >> >
> >> >Avi
> >> >
> >> >On Tue, Jun 2, 2020 at 7:32 PM R. Mark Sharp <rmsharp at me.com> wrote:
> >> >
> >> >> Spencer,
> >> >>
> >> >> I apologize for my obvious (in hindsight) error in bringing up the
> >> >topic.
> >> >> I will bring up one example, because of your request. Google has
> >> >listed
> >> >> GPL-1, 2, and 3 as one of several licenses that are restricted and
> >> >cannot
> >> >> be used by a Google product delivered to outside customers. This
> >> >include
> >> >> downloadable client software and software such as insdie the
> >Google
> >> >Search
> >> >> Appliance. This includes having scripts that load packages
> >> >dynamically as
> >> >> with ?library()? and ?require()?. Please see
> >> >> https://opensource.google/docs/thirdparty/licenses/#restricted for
> >> >their
> >> >> wording.
> >> >>
> >> >> I am not defending their position and disagree with it. However,
> >it
> >> >is
> >> >> their position based on what I think is a conservative or overly
> >> >cautious
> >> >> legal interpretation. I am not a lawyer, however, so my opinions
> >are
> >> >of no
> >> >> import.
> >> >>
> >> >> Mark
> >> >> R. Mark Sharp, Ph.D.
> >> >> Data Scientist and Biomedical Statistical Consu
> >>
> ><
> https://www.google.com/maps/search/a+Scientist+and+Biomedical+Statistical+Consu?entry=gmail&source=g
> >
> >> ltant
> >> >> 7526 Meadow Green St.
> >> >> San Antonio, TX 78251
> >> >> mobile: 210-218-2868
> >> >> rmsharp at me.com
> >> >>
> >> >>
> >> >>
> >> >>
> >> >>
> >> >>
> >> >>
> >> >>
> >> >>
> >> >>
> >> >>
> >> >> > On Jun 2, 2020, at 10:22 AM, Spencer Graves <
> >> >> spencer.graves at effectivedefense.org> wrote:
> >> >> >
> >> >> >       Can Dr. Sharp kindly provide a credible reference,
> >discussing
> >> >the
> >> >> alleged ambiguities in GPL-2 and GPL-3 that convince some
> >companies
> >> >to
> >> >> avoid them?
> >> >> >
> >> >> >
> >> >> >       I like Wikimedia Foundation projects like Wikipedia, where
> >> >almost
> >> >> anyone can change almost anything, and what stays tends to be
> >written
> >> >from
> >> >> a neutral point of view, citing credible sources.  I get several
> >> >emails a
> >> >> day notifying me of changes in articles I'm "watching".  FUD,
> >> >vandalism,
> >> >> etc., are generally reverted fairly quickly or moved to the "Talk"
> >> >page
> >> >> associated with each article, where the world is invited to
> >provide
> >> >> credible source(s).
> >> >> >
> >> >> >
> >> >> >       Spencer Graves
> >> >> >
> >> >> >
> >> >> > On 2020-06-02 10:12, Dirk Eddelbuettel wrote:
> >> >> >> On 2 June 2020 at 10:06, R. Mark Sharp wrote:
> >> >> >> | The GPL-2 and GPL-3 licenses are apparently sufficiently
> >> >ambiguous in
> >> >> the legal community that some companies avoid them.
> >> >> >>
> >> >> >> Wittgenstein:  'That whereof we cannot speak, thereof we must
> >> >remain
> >> >> silent'
> >> >> >>
> >> >> >> This is a mailing list of the R project. R is a GNU Project. R
> >is
> >> >> licensed
> >> >> >> under the GPL, version two or later. That has not stopped large
> >> >> corporations
> >> >> >> from using R, adopting R, or starting or acquiring R related
> >> >businesses.
> >> >> >>
> >> >> >> If you have a strong urge to spread FUD about the GPL and R,
> >could
> >> >you
> >> >> have the
> >> >> >> modicum of etiquette to not do it on a mailing list of the R
> >> >Project?
> >> >> >>
> >> >> >> Dirk
> >> >> >>
> >> >> >
> >> >> > ______________________________________________
> >> >> > R-package-devel at r-project.org
> >> ><mailto:R-package-devel at r-project.org>
> >> >> mailing list
> >> >> > https://stat.ethz.ch/mailman/listinfo/r-package-devel <
> >> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> >> >>
> >> >>         [[alternative HTML version deleted]]
> >> >>
> >> >> ______________________________________________
> >> >> R-package-devel at r-project.org mailing list
> >> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >> >>
> >>
> >> --
> >> Sent from my phone. Please excuse my brevity.
> >>
>
> --
> Sent from my phone. Please excuse my brevity.
>
-- 
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Jun  3 08:31:30 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 3 Jun 2020 09:31:30 +0300
Subject: [R-pkg-devel] [R] a question of etiquette
In-Reply-To: <CAL6gwn+T5+v3RE72bMgmrvCrW8HGc8esuTJxJyX0Rof-+bij7Q@mail.gmail.com>
References: <8EDB1E40-8B17-4182-AD3F-2E0D9368C5BE@stat.unipd.it>
 <FA4AB18C-C179-4CE5-8113-504EBDEECE97@me.com>
 <42505A3C-F7F8-4332-ABD0-14F182849ED6@stat.unipd.it>
 <4B7E6B5B-0288-4D30-9806-321556AB38BB@me.com>
 <24278.27732.72005.283713@rob.eddelbuettel.com>
 <52b8a74b-e7fb-5127-13b7-9f1d3f2e27f0@effectivedefense.org>
 <1AE2BC82-DD81-4CF7-AA58-D0E134445FAD@me.com>
 <CAL6gwn+nMD0cT7LT3CuYv+F0NHKso6gmthjq-F9mgV56O3UUmA@mail.gmail.com>
 <FE60F44F-A0BB-49AC-8741-DCAD615B554B@dcn.davis.ca.us>
 <CAL6gwn+T5+v3RE72bMgmrvCrW8HGc8esuTJxJyX0Rof-+bij7Q@mail.gmail.com>
Message-ID: <20200603093130.20b8cdf7@Tarkus>

On Tue, 2 Jun 2020 20:33:56 -0400
Avraham Adler <avraham.adler at gmail.com> wrote:

> If there is a term which reflects that mechanism from a discipline
> other than biology, please let me know.

I think that "copyleft" is the term you are looking for. The Wikipedia
page [*] defines it as

>> the practice of offering people the right to freely distribute copies
>> and modified versions of a work with the stipulation that the same
>> rights be preserved in derivative works created later

-- 
Best regards,
Ivan

[*] https://en.wikipedia.org/wiki/Copyleft


From m@e||e@@@|mon @end|ng |rom y@hoo@@e  Wed Jun  3 08:46:12 2020
From: m@e||e@@@|mon @end|ng |rom y@hoo@@e (=?UTF-8?Q?Ma=C3=ABlle_SALMON?=)
Date: Wed, 3 Jun 2020 06:46:12 +0000 (UTC)
Subject: [R-pkg-devel] Including fonts in an rmarkdown vignette
In-Reply-To: <CAARY7kjqC_7tuMoab5KddJ_8aCJ8zD84MdYzpR+z36yv5RtM9g@mail.gmail.com>
References: <CAARY7kjqC_7tuMoab5KddJ_8aCJ8zD84MdYzpR+z36yv5RtM9g@mail.gmail.com>
Message-ID: <2024630999.3110522.1591166772096@mail.yahoo.com>

Hi,

I've recently seen an example of a package that provides its own fonts for a vignette. See links in https://blog.r-hub.io/2020/06/03/vignettes/#pretty-vignettes 


In that same post I link to a workaround I saw on this list https://www.mail-archive.com/r-package-devel at r-project.org/msg02921.html for changing the vignette format based on the versions of dependencies. Maybe something similar is possible for fonts (I have no idea).

Ma?lle.

Den tisdag 2 juni 2020 20:14:24 CEST, David Hugh-Jones <davidhughjones at gmail.com> skrev: 





Hi,

I'd like to build a rmarkdown vignette with my own choice of fonts ? I'm
pernickety about look and feel.

R CMD check will rebuild vignettes in the vignettes/ directory, and if
relevant fonts aren't on the build machine, it'll give a warning.

Here are the options I can think of:
* build vignettes on my machine and put them in inst/doc. Don't mention the
specific fonts in the Rmd file in vignettes/. So the file built by "R CMD
check" won't look quite like the pre-built version.? This might work, but
it seems against open source principle.
* put font files in vignettes/ and refer to them in the rmarkdown file. I'm
not sure how to do this.
* limit myself to the fonts preinstalled on win-builder or CRAN machines.
I'm not sure what these are

Has anyone got any advice or examples?

Cheers,
David

??? [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From d@v|d@gohe| @end|ng |rom @rd@t@@|r  Wed Jun  3 11:03:33 2020
From: d@v|d@gohe| @end|ng |rom @rd@t@@|r (David Gohel)
Date: Wed, 3 Jun 2020 11:03:33 +0200
Subject: [R-pkg-devel] Including fonts in an rmarkdown vignette
In-Reply-To: <2024630999.3110522.1591166772096@mail.yahoo.com>
References: <CAARY7kjqC_7tuMoab5KddJ_8aCJ8zD84MdYzpR+z36yv5RtM9g@mail.gmail.com>
 <2024630999.3110522.1591166772096@mail.yahoo.com>
Message-ID: <68BCC99E-D255-4016-B78B-01109F01D49A@ardata.fr>

David

If you are ok to use one of the fonts available on google font, you could use package gfonts (in Suggests):
https://cran.r-project.org/web/packages/gfonts/vignettes/gfonts.html <https://cran.r-project.org/web/packages/gfonts/vignettes/gfonts.html>

As it will be ? inline ?, your document size could inflate (I guess it could be an issue with CRAN) - if only one font, size should be ok.

Otherwise, you also could add a css chunk to import the font from a public server - if no internet connexion, nothing will break.

David


> Le 3 juin 2020 ? 08:46, Ma?lle SALMON via R-package-devel <r-package-devel at r-project.org> a ?crit :
> 
> Hi,
> 
> I've recently seen an example of a package that provides its own fonts for a vignette. See links in https://blog.r-hub.io/2020/06/03/vignettes/#pretty-vignettes 
> 
> 
> In that same post I link to a workaround I saw on this list https://www.mail-archive.com/r-package-devel at r-project.org/msg02921.html for changing the vignette format based on the versions of dependencies. Maybe something similar is possible for fonts (I have no idea).
> 
> Ma?lle.
> 
> Den tisdag 2 juni 2020 20:14:24 CEST, David Hugh-Jones <davidhughjones at gmail.com> skrev: 
> 
> 
> 
> 
> 
> Hi,
> 
> I'd like to build a rmarkdown vignette with my own choice of fonts ? I'm
> pernickety about look and feel.
> 
> R CMD check will rebuild vignettes in the vignettes/ directory, and if
> relevant fonts aren't on the build machine, it'll give a warning.
> 
> Here are the options I can think of:
> * build vignettes on my machine and put them in inst/doc. Don't mention the
> specific fonts in the Rmd file in vignettes/. So the file built by "R CMD
> check" won't look quite like the pre-built version.  This might work, but
> it seems against open source principle.
> * put font files in vignettes/ and refer to them in the rmarkdown file. I'm
> not sure how to do this.
> * limit myself to the fonts preinstalled on win-builder or CRAN machines.
> I'm not sure what these are
> 
> Has anyone got any advice or examples?
> 
> Cheers,
> David
> 
>     [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From d@v|dhughjone@ @end|ng |rom gm@||@com  Wed Jun  3 11:24:18 2020
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Wed, 3 Jun 2020 10:24:18 +0100
Subject: [R-pkg-devel] Including fonts in an rmarkdown vignette
In-Reply-To: <68BCC99E-D255-4016-B78B-01109F01D49A@ardata.fr>
References: <CAARY7kjqC_7tuMoab5KddJ_8aCJ8zD84MdYzpR+z36yv5RtM9g@mail.gmail.com>
 <2024630999.3110522.1591166772096@mail.yahoo.com>
 <68BCC99E-D255-4016-B78B-01109F01D49A@ardata.fr>
Message-ID: <CAARY7kh0fRLOdSR5Wi6f30O5xgc+HVegsyyXgf4NKSAVkGhZuw@mail.gmail.com>

Thank you for these suggestions. Google fonts sounds like quite an easy
approach.
David


On Wed, 3 Jun 2020 at 10:03, David Gohel <david.gohel at ardata.fr> wrote:

> David
>
> If you are ok to use one of the fonts available on google font, you could
> use package gfonts (in Suggests):
> https://cran.r-project.org/web/packages/gfonts/vignettes/gfonts.html
>
> As it will be ? inline ?, your document size could inflate (I guess it
> could be an issue with CRAN) - if only one font, size should be ok.
>
> Otherwise, you also could add a css chunk to import the font from a public
> server - if no internet connexion, nothing will break.
>
> David
>
>
> Le 3 juin 2020 ? 08:46, Ma?lle SALMON via R-package-devel <
> r-package-devel at r-project.org> a ?crit :
>
> Hi,
>
> I've recently seen an example of a package that provides its own fonts for
> a vignette. See links in
> https://blog.r-hub.io/2020/06/03/vignettes/#pretty-vignettes
>
>
> In that same post I link to a workaround I saw on this list
> https://www.mail-archive.com/r-package-devel at r-project.org/msg02921.html
> for changing the vignette format based on the versions of dependencies.
> Maybe something similar is possible for fonts (I have no idea).
>
> Ma?lle.
>
> Den tisdag 2 juni 2020 20:14:24 CEST, David Hugh-Jones <
> davidhughjones at gmail.com> skrev:
>
>
>
>
>
> Hi,
>
> I'd like to build a rmarkdown vignette with my own choice of fonts ? I'm
> pernickety about look and feel.
>
> R CMD check will rebuild vignettes in the vignettes/ directory, and if
> relevant fonts aren't on the build machine, it'll give a warning.
>
> Here are the options I can think of:
> * build vignettes on my machine and put them in inst/doc. Don't mention the
> specific fonts in the Rmd file in vignettes/. So the file built by "R CMD
> check" won't look quite like the pre-built version.  This might work, but
> it seems against open source principle.
> * put font files in vignettes/ and refer to them in the rmarkdown file. I'm
> not sure how to do this.
> * limit myself to the fonts preinstalled on win-builder or CRAN machines.
> I'm not sure what these are
>
> Has anyone got any advice or examples?
>
> Cheers,
> David
>
>     [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>

	[[alternative HTML version deleted]]


From iuke-tier@ey m@iii@g oii uiow@@edu  Wed Jun  3 15:54:56 2020
From: iuke-tier@ey m@iii@g oii uiow@@edu (iuke-tier@ey m@iii@g oii uiow@@edu)
Date: Wed, 3 Jun 2020 08:54:56 -0500 (CDT)
Subject: [R-pkg-devel] 
 [External] Guidelines on use of snow-style clusters in R packages?
In-Reply-To: <20200524172147.6cee696e@trisector>
References: <20200524172147.6cee696e@trisector>
Message-ID: <alpine.DEB.2.21.2006030841020.3474@luke-Latitude-7480>

The basic principle I would follow is to make sure your code only goes
parallel with explicit permission from the end user. One way to do
that is accept a cluster from the caller; another is to create
and shut down your won cluster if a global option is set (via options()
or a mechanism of your own).

If you create and shut down your own cluster you can do pretty much
what you like. If you use one passed to you it would be best to leave
it in the state you found it at least as far as the search path and
global environment are concerned. So use foo::bar instead of library().

User can also set a default cluster. You can use getDefaultCluster to
retrieve it; this returns NULL if no default cluster is set.  You
could assume that if one is set you are allowed to use it, but it
might still be a good idea to look for explicit permission via an
option or an argument. I would again try to leave the cluster used
this way in as clean a state as you can.

Best,

luke

On Sun, 24 May 2020, Ivan Krylov wrote:

> Some of the packages I use make it possible to run some of the
> computations in parallel. For example, sNPLS::cv_snpls calls
> makeCluster() itself, makes sure that the package is loaded by workers,
> exports the necessary variables and stops the cluster after it is
> finished. On the other hand, multiway::parafac accepts arbitrary
> cluster objects supplied by user, but requires the user to manually
> preload the package on the workers. Both packages export and document
> the internal functions intended to run on the workers.
>
> Are there any guidelines for use of snow-style clusters in R packages? I
> remember reading somewhere that accepting arbitrary cluster objects from
> the user instead of makeCluster(detectCores()) is generally considered
> a good idea (for multiple reasons ranging from giving the user more
> control of CPU load to making it possible to run the code on a number
> of networked machines that the package code knows nothing about), but I
> couldn't find a reference for that in Writing R Extensions or parallel
> package documentation.
>
> What about preloading the package on the workers? Are there any
> downsides to the package code unconditionally running clusterEvalQ(cl,
> library(myself)) to avoid disappointing errors like "10 nodes produced
> errors; first error: could not find function"?
>
> Speaking of private functions intended to run by the package itself on
> the worker nodes, should they be exported? I have prepared a test
> package doing little more than the following:
>
> R/fun.R:
> private <- function(x) paste(x, Sys.getpid())
> public <- function(cl, x) parallel::parLapply(cl, x, private)
>
> NAMESPACE:
> export(public)
>
> The package passes R CMD check --as-cran without warnings or errors,
> which seems to suggest that exporting worker functions is not required.
>
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu


From d@|uedecke @end|ng |rom uke@de  Wed Jun  3 10:18:37 2020
From: d@|uedecke @end|ng |rom uke@de (=?iso-8859-1?Q?Daniel_L=FCdecke?=)
Date: Wed, 3 Jun 2020 10:18:37 +0200
Subject: [R-pkg-devel] irrecoverable exception occurred during CRAN
 submission checks
Message-ID: <000001d6397f$950ec010$bf2c4030$@uke.de>

Hello,

I just submitted an update of my package to CRAN and it does not pass
incoming checks. While local checks, win-builder and GitHub CI
(Mac/Win/Linux) all pass, I get the Note you see below for the checks during
submission process. I have no idea why this happens and see this message for
the first time. I *assume* it's a temporary issue / false positive, but want
to be sure before I reply to the CRAN team.

Can anyone help how I can address this issue, or if it indeed might be a
false positive?

Thanks and best wishes
Daniel

Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
Check: CRAN incoming feasibility, Result: Note_to_CRAN_maintainers
  Maintainer: 'Daniel L?decke <d.luedecke at uke.de>'

Flavor: r-devel-linux-x86_64-debian-gcc
Check: dependencies in R code, Result: NOTE
  
   *** caught segfault ***
  address 0x7f1c76752008, cause 'invalid permissions'
  
  Traceback:
   1: dyn.load(file, DLLpath = DLLpath, ...)
   2: library.dynam(lib, package, package.lib)
   3: loadNamespace(p)
   4: withCallingHandlers(expr, message = function(c) if (inherits(c,
classes)) tryInvokeRestart("muffleMessage"))
   5: suppressMessages(loadNamespace(p))
   6: withCallingHandlers(expr, warning = function(w) if (inherits(w,
classes)) tryInvokeRestart("muffleWarning"))
   7: suppressWarnings(suppressMessages(loadNamespace(p)))
   8: doTryCatch(return(expr), name, parentenv, handler)
   9: tryCatchOne(expr, names, parentenv, handlers[[1L]])
  10: tryCatchList(expr, classes, parentenv, handlers)
  11: tryCatch(suppressWarnings(suppressMessages(loadNamespace(p))),
error = function(e) e)
  12: tools:::.check_packages_used(package = "insight")
  An irrecoverable exception occurred. R is aborting now ...
  Segmentation fault

--

_____________________________________________________________________

Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Joachim Pr?l?, Prof. Dr. Blanche Schwappach-Pignataro, Marya Verdel
_____________________________________________________________________

SAVE PAPER - THINK BEFORE PRINTING


From edd @end|ng |rom deb|@n@org  Thu Jun  4 02:01:15 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 3 Jun 2020 19:01:15 -0500
Subject: [R-pkg-devel] irrecoverable exception occurred during CRAN
 submission checks
In-Reply-To: <000001d6397f$950ec010$bf2c4030$@uke.de>
References: <000001d6397f$950ec010$bf2c4030$@uke.de>
Message-ID: <24280.14795.349205.310183@rob.eddelbuettel.com>


Daniel,

On 3 June 2020 at 10:18, Daniel L?decke wrote:
| I just submitted an update of my package to CRAN and it does not pass
| incoming checks. While local checks, win-builder and GitHub CI
| (Mac/Win/Linux) all pass, I get the Note you see below for the checks during
| submission process. I have no idea why this happens and see this message for
| the first time. I *assume* it's a temporary issue / false positive, but want
| to be sure before I reply to the CRAN team.
| 
| Can anyone help how I can address this issue, or if it indeed might be a
| false positive?

What package? A package / repo name would have helped here. Did I miss it?

One of my golden rules for debugging is the old "doctor, doctor, I hurt when
I do this" joke. There is no shame in disabling a test that bites: "if it
hurts, don't do it". The next step then is is to reproduce locally---which is
still an uphill battle because CRAN, resource contrained as they are, have
not provided their setups in ways that are easily reproducible by us mortals.

Hth,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From d@|uedecke @end|ng |rom uke@de  Thu Jun  4 08:19:17 2020
From: d@|uedecke @end|ng |rom uke@de (=?iso-8859-1?Q?Daniel_L=FCdecke?=)
Date: Thu, 4 Jun 2020 08:19:17 +0200
Subject: [R-pkg-devel] irrecoverable exception occurred during CRAN
 submission checks
In-Reply-To: <24280.14795.349205.310183@rob.eddelbuettel.com>
References: <000001d6397f$950ec010$bf2c4030$@uke.de>
 <24280.14795.349205.310183@rob.eddelbuettel.com>
Message-ID: <001401d63a38$13b00290$3b1007b0$@uke.de>

Hi Dirk,

the package in question is "insight"
(https://cran.r-project.org/package=insight). Since a few days, the test for
the panelr-package fails, because panelr itself fails on many systems
(https://cran.r-project.org/web/checks/check_results_panelr.html). I *think*
this is due to an update of dpylr that causes trouble with panelr, because
both insight and panelr checks were OK the last weeks.

Now win-builder checks for insight are OK, local checks (Win) are OK and
GitHub CI is ok (https://github.com/easystats/insight). 

If you need, I uploaded the source version of insight here:
https://drive.google.com/file/d/1sZ2n3utc27U0DrcFlAsH6NQpKMssIiEg/view?usp=s
haring

The GitHub version only differs in the package version number in the
DESCRIPTION file (which is 0.8.4.1 on GitHub and will be updated once the
update is accepted on CRAN).

I can't imagine any special revisions that might lead to that NOTE in the
incoming checks on Linux.

Hope that helps...

Best
Daniel

-----Urspr?ngliche Nachricht-----
Von: Dirk Eddelbuettel <edd at debian.org> 
Gesendet: Donnerstag, 4. Juni 2020 02:01
An: Daniel L?decke <d.luedecke at uke.de>
Cc: r-package-devel at r-project.org
Betreff: Re: [R-pkg-devel] irrecoverable exception occurred during CRAN
submission checks


Daniel,

On 3 June 2020 at 10:18, Daniel L?decke wrote:
| I just submitted an update of my package to CRAN and it does not pass
| incoming checks. While local checks, win-builder and GitHub CI
| (Mac/Win/Linux) all pass, I get the Note you see below for the checks
during
| submission process. I have no idea why this happens and see this message
for
| the first time. I *assume* it's a temporary issue / false positive, but
want
| to be sure before I reply to the CRAN team.
| 
| Can anyone help how I can address this issue, or if it indeed might be a
| false positive?

What package? A package / repo name would have helped here. Did I miss it?

One of my golden rules for debugging is the old "doctor, doctor, I hurt when
I do this" joke. There is no shame in disabling a test that bites: "if it
hurts, don't do it". The next step then is is to reproduce locally---which
is
still an uphill battle because CRAN, resource contrained as they are, have
not provided their setups in ways that are easily reproducible by us
mortals.

Hth,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

--

_____________________________________________________________________

Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Joachim Pr?l?, Prof. Dr. Blanche Schwappach-Pignataro, Marya Verdel
_____________________________________________________________________

SAVE PAPER - THINK BEFORE PRINTING


From edd @end|ng |rom deb|@n@org  Thu Jun  4 14:20:05 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 4 Jun 2020 07:20:05 -0500
Subject: [R-pkg-devel] irrecoverable exception occurred during CRAN
 submission checks
In-Reply-To: <001401d63a38$13b00290$3b1007b0$@uke.de>
References: <000001d6397f$950ec010$bf2c4030$@uke.de>
 <24280.14795.349205.310183@rob.eddelbuettel.com>
 <001401d63a38$13b00290$3b1007b0$@uke.de>
Message-ID: <24280.59125.238258.179070@rob.eddelbuettel.com>


Hi Daniel,

On 4 June 2020 at 08:19, Daniel L?decke wrote:
| the package in question is "insight"
| (https://cran.r-project.org/package=insight). Since a few days, the test for
| the panelr-package fails, because panelr itself fails on many systems
| (https://cran.r-project.org/web/checks/check_results_panelr.html). I *think*
| this is due to an update of dpylr that causes trouble with panelr, because
| both insight and panelr checks were OK the last weeks.

You could possibly confirm that hypothesis by working in a 'clean' test
environment -- Docker containers are an option -- via a simple comparison of
installing identical versions of all packages apart from the suspected one.
 
Dirk 

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From d@|uedecke @end|ng |rom uke@de  Thu Jun  4 14:48:31 2020
From: d@|uedecke @end|ng |rom uke@de (=?iso-8859-1?Q?Daniel_L=FCdecke?=)
Date: Thu, 4 Jun 2020 14:48:31 +0200
Subject: [R-pkg-devel] irrecoverable exception occurred during CRAN
 submission checks
In-Reply-To: <24280.59125.238258.179070@rob.eddelbuettel.com>
References: <000001d6397f$950ec010$bf2c4030$@uke.de>	<24280.14795.349205.310183@rob.eddelbuettel.com>	<001401d63a38$13b00290$3b1007b0$@uke.de>
 <24280.59125.238258.179070@rob.eddelbuettel.com>
Message-ID: <002701d63a6e$73ef8960$5bce9c20$@uke.de>

Hi Dirk,

I'm not sure I got what you mean? Locally, I used RStudio with R4.0 to check
the package. The checks I mentioned below were the official CRAN check
pages. I have now tried to run the checks on rhub, however, I'm not sure how
to access the logs:

https://builder.r-hub.io/status/insight_0.8.5.tar.gz-6f814b95949368dcdd83d8f
b9cee075b

Best
Daniel

-----Urspr?ngliche Nachricht-----
Von: Dirk Eddelbuettel <edd at debian.org> 
Gesendet: Donnerstag, 4. Juni 2020 14:20
An: Daniel L?decke <d.luedecke at uke.de>
Cc: 'Dirk Eddelbuettel' <edd at debian.org>; r-package-devel at r-project.org
Betreff: Re: AW: [R-pkg-devel] irrecoverable exception occurred during CRAN
submission checks


Hi Daniel,

On 4 June 2020 at 08:19, Daniel L?decke wrote:
| the package in question is "insight"
| (https://cran.r-project.org/package=insight). Since a few days, the test
for
| the panelr-package fails, because panelr itself fails on many systems
| (https://cran.r-project.org/web/checks/check_results_panelr.html). I
*think*
| this is due to an update of dpylr that causes trouble with panelr, because
| both insight and panelr checks were OK the last weeks.

You could possibly confirm that hypothesis by working in a 'clean' test
environment -- Docker containers are an option -- via a simple comparison of
installing identical versions of all packages apart from the suspected one.
 
Dirk 

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

--

_____________________________________________________________________

Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Joachim Pr?l?, Prof. Dr. Blanche Schwappach-Pignataro, Marya Verdel
_____________________________________________________________________

SAVE PAPER - THINK BEFORE PRINTING


From t|@goo||voto @end|ng |rom gm@||@com  Thu Jun  4 15:16:17 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Thu, 4 Jun 2020 10:16:17 -0300
Subject: [R-pkg-devel] Additional issues for the last version released on
 CRAN
Message-ID: <000001d63a72$56676df0$033649d0$@gmail.com>

Dear all,

I have submitted a patch release (1.6.0) of my package metan
(https://cran.r-project.org/web/packages/metan/) to fix an additional issue
and implement some improvements. All local checks had no errors or warnings,
but after the submission process, I received the following message.

 

<<<begin content>>>

 

Dear maintainer,

package metan_1.6.1.tar.gz has been auto-processed.

The auto-check found additional issues for the *last* version released on
CRAN:

  donttest < <https://www.stats.ox.ac.uk/pub/bdr/donttest/metan.out>
https://www.stats.ox.ac.uk/pub/bdr/donttest/metan.out>

CRAN incoming checks do not test for these additional issues and you will
need an appropriately instrumented build of R to reproduce these.

Hence please reply-all and explain: Have these been fixed?

Log dir:
<https://win-builder.r-project.org/incoming_pretest/metan_1.6.1_20200603_062
635/>

The files will be removed after roughly 7 days.

Installation time in seconds: 52

Check time in seconds: 407 

R Under development (unstable) (2020-05-29 r78617)

Pretests results:

Windows: <
<https://win-builder.r-project.org/incoming_pretest/metan_1.6.1_20200603_062
635/Windows/00check.log>
https://win-builder.r-project.org/incoming_pretest/metan_1.6.1_20200603_0626
35/Windows/00check.log>

Status: OK

Debian: <
<https://win-builder.r-project.org/incoming_pretest/metan_1.6.1_20200603_062
635/Debian/00check.log>
https://win-builder.r-project.org/incoming_pretest/metan_1.6.1_20200603_0626
35/Debian/00check.log>

Status: OK

Last released version's CRAN status: OK: 12

See: < <https://CRAN.R-project.org/web/checks/check_results_metan.html>
https://CRAN.R-project.org/web/checks/check_results_metan.html>

Last released version's additional issues:

  donttest < <https://www.stats.ox.ac.uk/pub/bdr/donttest/metan.out>
https://www.stats.ox.ac.uk/pub/bdr/donttest/metan.out>

CRAN Web: < <https://cran.r-project.org/package=metan>
https://cran.r-project.org/package=metan>

No strong reverse dependencies to be checked.

 

<<<end content>>>

 

I replied to <CRAN-submissions at R-project.org
<mailto:CRAN-submissions at R-project.org> >  explaining how the error was
fixed, but since this is my first experience with an issue like that, I'm
not sure if I need to do anything more or simply await a response from the
CRAN team.

Thanks in advance for any comments or suggestion,

Tiago

 


	[[alternative HTML version deleted]]


From d@|uedecke @end|ng |rom uke@de  Thu Jun  4 15:00:21 2020
From: d@|uedecke @end|ng |rom uke@de (=?iso-8859-1?Q?Daniel_L=FCdecke?=)
Date: Thu, 4 Jun 2020 15:00:21 +0200
Subject: [R-pkg-devel] irrecoverable exception occurred during CRAN
 submission checks
In-Reply-To: <24280.59125.238258.179070@rob.eddelbuettel.com>
References: <000001d6397f$950ec010$bf2c4030$@uke.de>	<24280.14795.349205.310183@rob.eddelbuettel.com>	<001401d63a38$13b00290$3b1007b0$@uke.de>
 <24280.59125.238258.179070@rob.eddelbuettel.com>
Message-ID: <003101d63a70$1b48c3b0$51da4b10$@uke.de>

Hi Dirk,

ok, I think I got what you meant. The error for insight-checks came from
panelr, which is a suggested package. I contacted the maintainer, who said
that he won't be able to fix panelr in time, so I removed the test for the
panelr-package from insight. So, for this submission, no matter what
problems the panelr-package has, this should not be related to the NOTE I
get from the CRAN checks during submission.

Best
Daniel

-----Urspr?ngliche Nachricht-----
Von: Dirk Eddelbuettel <edd at debian.org> 
Gesendet: Donnerstag, 4. Juni 2020 14:20
An: Daniel L?decke <d.luedecke at uke.de>
Cc: 'Dirk Eddelbuettel' <edd at debian.org>; r-package-devel at r-project.org
Betreff: Re: AW: [R-pkg-devel] irrecoverable exception occurred during CRAN
submission checks


Hi Daniel,

On 4 June 2020 at 08:19, Daniel L?decke wrote:
| the package in question is "insight"
| (https://cran.r-project.org/package=insight). Since a few days, the test
for
| the panelr-package fails, because panelr itself fails on many systems
| (https://cran.r-project.org/web/checks/check_results_panelr.html). I
*think*
| this is due to an update of dpylr that causes trouble with panelr, because
| both insight and panelr checks were OK the last weeks.

You could possibly confirm that hypothesis by working in a 'clean' test
environment -- Docker containers are an option -- via a simple comparison of
installing identical versions of all packages apart from the suspected one.
 
Dirk 

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

--

_____________________________________________________________________

Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Joachim Pr?l?, Prof. Dr. Blanche Schwappach-Pignataro, Marya Verdel
_____________________________________________________________________

SAVE PAPER - THINK BEFORE PRINTING


From |ro@o @end|ng |rom un@|@edu@co  Thu Jun  4 20:52:50 2020
From: |ro@o @end|ng |rom un@|@edu@co (Fernando Roa)
Date: Thu, 4 Jun 2020 15:52:50 -0300
Subject: [R-pkg-devel] line justification for long \code{} in .pdf manual
Message-ID: <CA+fi=+=O4BKC=tCE0HJ+eCVuYOD95q9zt7sHGyjsjcAznTH=4g@mail.gmail.com>

I notice the CRAN pdf didn't justify correctly long texts inside \code{}
even having "," or spaces irrespective of the status of the argument
(oneliner or multiliner)
in source (.R / .Rd)
https://imgur.com/RvjzMDh

I noticed also that it is not a problem in a pkgdown doc:
https://imgur.com/LsmuPE1

I ended up splitting the \code{} into several \codes{} with
file.R with \code{...} in one line as input.
example
from:
  \code{unique(c(dfMarkPos$markName,dfCenMarks$markName) ) }
to:
  \code{unique(c(dfMarkPos$markName,} \code{dfCenMarks$markName) ) }
https://imgur.com/Pwhfu0j

I used roxygen formatted .R, but could work with .Rd
after .R script (below) I produced .Rd with devtools:document(), then,
pdf:  devtools::build_manual(path=getwd())

gblines<-readLines(file)
for (i in 1:length(gblines) ) {
  if(grepl("^#\'",gblines[i]) & grepl("\\code",gblines[i] ) ) {
    co <- regmatches(gblines[i], gregexpr('code\\{.*?\\}', gblines[i],
perl=T) )
    if(length(co[[1]])>0){
      co2 <- strsplit(co[[1]],",")
      withCode <-    unlist(lapply(co2, function(x) unlist(regmatches(x,
gregexpr('code\\{.*', x, perl=T) ) ) ) )
      notWithCode <- (lapply(co2, function(x) unlist(regmatches(x,
gregexpr('^(?:(?!code\\{.*).)*$', x, perl=T) ) ) ) )
      names(notWithCode)<-1:length(notWithCode)
      names(withCode)<-1:length(withCode)
      l_tmp <- c(withCode, notWithCode)
      keys = unique(names(l_tmp))
      l = sapply(keys, function(name) {unlist(l_tmp[grep(name,
names(l_tmp))])}, simplify = F)
      repwith<-list(unlist(lapply(l, function(x) paste(x, collapse=",}
\\code{"))
                           ) )
      regmatches(gblines[i], gregexpr('code\\{.*?\\}', gblines[i], perl=T)
) <-repwith
    }
  }
}
writeLines(gblines, file)

best,


-- 
Fernando Roa

	[[alternative HTML version deleted]]


From @ndre@@@b|@ette @end|ng |rom un|-due@de  Sat Jun  6 22:23:48 2020
From: @ndre@@@b|@ette @end|ng |rom un|-due@de (=?utf-8?B?QmzDpHR0ZSwgQW5kcmVhcw==?=)
Date: Sat, 6 Jun 2020 20:23:48 +0000
Subject: [R-pkg-devel] using devtools::install_github() when curl is a
 dependency
Message-ID: <850EDE57-2121-4DB7-BA27-3D4489CA047F@uni-due.de>

Dear colleagues,

using devtools::install_github() is suggested frequently to install the development version of a package from GitHub.

But there is a nasty scenario on Windows when the package to be installed from GitHub has curl as a dependency and if a new version of curl or backports is available. The user will be prompted whether the outdated packages shall be updated. Users will usually confirm to update all CRAN packages. But after downloading the binaries, the installation will fail with a message that curl cannot be removed.

My understanding of the issue is as follows: devtools has curl as a dependency. When calling devtools::install_github() or remotes::install_github(), the curl package is attached. This implies loading the curl DLL. The dll file is then non-writable, if my analysis is correct. If (a) the package to be installed from GitHub has curl as a dependency and if (b) the curl version present on the users? system needs to be updated and if (c) the user agrees to perform the update, the binary is downloaded successfully, but installing the newer version of curl will fail, because loading the curl DLL has been triggered when attaching devtools and the DLL file is write-protected.

This is the line that has caused my headaches:
devtools::install_github(?PolMine/cwbtools?, ref = ?dev?)
The cwbtools package has curl as a dependency, and it was curl v4.2 that was installed, the newest version is v4.3.

First, I am interested whether you think my analysis is correct. Second, I would appreciate your advice on good practice to deal with this scenario!

My idea so far is to amend the README file, telling users (a) to reject updating dependencies if  curl is to be updated or alternatively (b) to recommend the snippet ` devtools::install_github(?PolMine/cwbtools?, ref = ?dev?, upgrade = ?never?)` for GithHub-installations and a manual update of dependencies.

I tend to think this is not an uncommon issue for Windows users. Something like this may occur whenever a package is to be installed from GitHub that has common dependency with devtools that needs to be updated. The error message is very hard to understand for ?human? users and it is hard to find the solution for ?human? users. Recommendations welcome!

Kind regards
Andreas

--
Prof. Dr. Andreas Bl?tte
Professor of Public Policy and Regional Politics
University of Duisburg-Essen

	[[alternative HTML version deleted]]


From je||er|@ @end|ng |rom gm@||@com  Sat Jun  6 22:38:54 2020
From: je||er|@ @end|ng |rom gm@||@com (Gregory Jefferis)
Date: Sat, 6 Jun 2020 21:38:54 +0100
Subject: [R-pkg-devel] using devtools::install_github() when curl is a
 dependency
In-Reply-To: <850EDE57-2121-4DB7-BA27-3D4489CA047F@uni-due.de>
References: <850EDE57-2121-4DB7-BA27-3D4489CA047F@uni-due.de>
Message-ID: <87690D42-41C3-4A9C-ABFE-5B9A332A26BD@gmail.com>

Have you tried setting

R_REMOTES_NO_ERRORS_FROM_WARNINGS=TRUE

I have feeling that is a warning promoted to an error by the remotes package. Similarly have you tried updating the curl package manually with install.packages after loading it in an R session? 

Best,

Greg. 

Sent from my iPhone

> On 6 Jun 2020, at 21:24, Bl?tte, Andreas <andreas.blaette at uni-due.de> wrote:
> 
> ?Dear colleagues,
> 
> using devtools::install_github() is suggested frequently to install the development version of a package from GitHub.
> 
> But there is a nasty scenario on Windows when the package to be installed from GitHub has curl as a dependency and if a new version of curl or backports is available. The user will be prompted whether the outdated packages shall be updated. Users will usually confirm to update all CRAN packages. But after downloading the binaries, the installation will fail with a message that curl cannot be removed.
> 
> My understanding of the issue is as follows: devtools has curl as a dependency. When calling devtools::install_github() or remotes::install_github(), the curl package is attached. This implies loading the curl DLL. The dll file is then non-writable, if my analysis is correct. If (a) the package to be installed from GitHub has curl as a dependency and if (b) the curl version present on the users? system needs to be updated and if (c) the user agrees to perform the update, the binary is downloaded successfully, but installing the newer version of curl will fail, because loading the curl DLL has been triggered when attaching devtools and the DLL file is write-protected.
> 
> This is the line that has caused my headaches:
> devtools::install_github(?PolMine/cwbtools?, ref = ?dev?)
> The cwbtools package has curl as a dependency, and it was curl v4.2 that was installed, the newest version is v4.3.
> 
> First, I am interested whether you think my analysis is correct. Second, I would appreciate your advice on good practice to deal with this scenario!
> 
> My idea so far is to amend the README file, telling users (a) to reject updating dependencies if  curl is to be updated or alternatively (b) to recommend the snippet ` devtools::install_github(?PolMine/cwbtools?, ref = ?dev?, upgrade = ?never?)` for GithHub-installations and a manual update of dependencies.
> 
> I tend to think this is not an uncommon issue for Windows users. Something like this may occur whenever a package is to be installed from GitHub that has common dependency with devtools that needs to be updated. The error message is very hard to understand for ?human? users and it is hard to find the solution for ?human? users. Recommendations welcome!
> 
> Kind regards
> Andreas
> 
> --
> Prof. Dr. Andreas Bl?tte
> Professor of Public Policy and Regional Politics
> University of Duisburg-Essen
> 
>    [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Sat Jun  6 22:43:01 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Sat, 6 Jun 2020 21:43:01 +0100
Subject: [R-pkg-devel] using devtools::install_github() when curl is a
 dependency
In-Reply-To: <850EDE57-2121-4DB7-BA27-3D4489CA047F@uni-due.de>
References: <850EDE57-2121-4DB7-BA27-3D4489CA047F@uni-due.de>
Message-ID: <CABtg=KnZf_8gxHjUWo1ZH4wO0KtBLZOtYvrq0JbDnyM1GU7gcQ@mail.gmail.com>

Hi, you can use the remotes package (that devtools itself uses under
the hood), and set the R_REMOTES_STANDALONE="true" environment
variable. Then remotes will not use any packages to perform the
downloads and the installations. See more here:
https://github.com/r-lib/remotes#standalone-mode

Gabor

On Sat, Jun 6, 2020 at 9:24 PM Bl?tte, Andreas
<andreas.blaette at uni-due.de> wrote:
>
> Dear colleagues,
>
> using devtools::install_github() is suggested frequently to install the development version of a package from GitHub.
>
> But there is a nasty scenario on Windows when the package to be installed from GitHub has curl as a dependency and if a new version of curl or backports is available. The user will be prompted whether the outdated packages shall be updated. Users will usually confirm to update all CRAN packages. But after downloading the binaries, the installation will fail with a message that curl cannot be removed.
>
> My understanding of the issue is as follows: devtools has curl as a dependency. When calling devtools::install_github() or remotes::install_github(), the curl package is attached. This implies loading the curl DLL. The dll file is then non-writable, if my analysis is correct. If (a) the package to be installed from GitHub has curl as a dependency and if (b) the curl version present on the users? system needs to be updated and if (c) the user agrees to perform the update, the binary is downloaded successfully, but installing the newer version of curl will fail, because loading the curl DLL has been triggered when attaching devtools and the DLL file is write-protected.
>
> This is the line that has caused my headaches:
> devtools::install_github(?PolMine/cwbtools?, ref = ?dev?)
> The cwbtools package has curl as a dependency, and it was curl v4.2 that was installed, the newest version is v4.3.
>
> First, I am interested whether you think my analysis is correct. Second, I would appreciate your advice on good practice to deal with this scenario!
>
> My idea so far is to amend the README file, telling users (a) to reject updating dependencies if  curl is to be updated or alternatively (b) to recommend the snippet ` devtools::install_github(?PolMine/cwbtools?, ref = ?dev?, upgrade = ?never?)` for GithHub-installations and a manual update of dependencies.
>
> I tend to think this is not an uncommon issue for Windows users. Something like this may occur whenever a package is to be installed from GitHub that has common dependency with devtools that needs to be updated. The error message is very hard to understand for ?human? users and it is hard to find the solution for ?human? users. Recommendations welcome!
>
> Kind regards
> Andreas
>
> --
> Prof. Dr. Andreas Bl?tte
> Professor of Public Policy and Regional Politics
> University of Duisburg-Essen
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @ndre@@@b|@ette @end|ng |rom un|-due@de  Sat Jun  6 22:57:56 2020
From: @ndre@@@b|@ette @end|ng |rom un|-due@de (=?utf-8?B?QmzDpHR0ZSwgQW5kcmVhcw==?=)
Date: Sat, 6 Jun 2020 20:57:56 +0000
Subject: [R-pkg-devel] using devtools::install_github() when curl is a
 dependency
In-Reply-To: <CABtg=KnZf_8gxHjUWo1ZH4wO0KtBLZOtYvrq0JbDnyM1GU7gcQ@mail.gmail.com>
References: <850EDE57-2121-4DB7-BA27-3D4489CA047F@uni-due.de>
 <CABtg=KnZf_8gxHjUWo1ZH4wO0KtBLZOtYvrq0JbDnyM1GU7gcQ@mail.gmail.com>
Message-ID: <11BE1C98-DE46-42B1-8904-38A826549F69@uni-due.de>

Dear Gabor, 

the standalone mode is the perfect fix for my issue and I will adapted the recommended GitHub installation mechanism in the README of my cwbtools package accordingly. Like this:

Sys.setenv(R_REMOTES_STANDALONE="true")
remotes::install_github("PolMine/cwbtools", ref = "dev")
 
Thanks so much for your swift help! 

A big thanks also to Greg for the very helpful idea.

Kind regards
Andreas 

?Am 06.06.20, 22:43 schrieb "G?bor Cs?rdi" <csardi.gabor at gmail.com>:

    Hi, you can use the remotes package (that devtools itself uses under
    the hood), and set the R_REMOTES_STANDALONE="true" environment
    variable. Then remotes will not use any packages to perform the
    downloads and the installations. See more here:
    https://github.com/r-lib/remotes#standalone-mode

    Gabor

    On Sat, Jun 6, 2020 at 9:24 PM Bl?tte, Andreas
    <andreas.blaette at uni-due.de> wrote:
    >
    > Dear colleagues,
    >
    > using devtools::install_github() is suggested frequently to install the development version of a package from GitHub.
    >
    > But there is a nasty scenario on Windows when the package to be installed from GitHub has curl as a dependency and if a new version of curl or backports is available. The user will be prompted whether the outdated packages shall be updated. Users will usually confirm to update all CRAN packages. But after downloading the binaries, the installation will fail with a message that curl cannot be removed.
    >
    > My understanding of the issue is as follows: devtools has curl as a dependency. When calling devtools::install_github() or remotes::install_github(), the curl package is attached. This implies loading the curl DLL. The dll file is then non-writable, if my analysis is correct. If (a) the package to be installed from GitHub has curl as a dependency and if (b) the curl version present on the users? system needs to be updated and if (c) the user agrees to perform the update, the binary is downloaded successfully, but installing the newer version of curl will fail, because loading the curl DLL has been triggered when attaching devtools and the DLL file is write-protected.
    >
    > This is the line that has caused my headaches:
    > devtools::install_github(?PolMine/cwbtools?, ref = ?dev?)
    > The cwbtools package has curl as a dependency, and it was curl v4.2 that was installed, the newest version is v4.3.
    >
    > First, I am interested whether you think my analysis is correct. Second, I would appreciate your advice on good practice to deal with this scenario!
    >
    > My idea so far is to amend the README file, telling users (a) to reject updating dependencies if  curl is to be updated or alternatively (b) to recommend the snippet ` devtools::install_github(?PolMine/cwbtools?, ref = ?dev?, upgrade = ?never?)` for GithHub-installations and a manual update of dependencies.
    >
    > I tend to think this is not an uncommon issue for Windows users. Something like this may occur whenever a package is to be installed from GitHub that has common dependency with devtools that needs to be updated. The error message is very hard to understand for ?human? users and it is hard to find the solution for ?human? users. Recommendations welcome!
    >
    > Kind regards
    > Andreas
    >
    > --
    > Prof. Dr. Andreas Bl?tte
    > Professor of Public Policy and Regional Politics
    > University of Duisburg-Essen
    >
    >         [[alternative HTML version deleted]]
    >
    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sun Jun  7 19:09:27 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sun, 7 Jun 2020 19:09:27 +0200
Subject: [R-pkg-devel] 
 Additional issues for the last version released on CRAN
In-Reply-To: <000001d63a72$56676df0$033649d0$@gmail.com>
References: <000001d63a72$56676df0$033649d0$@gmail.com>
Message-ID: <f7893613-405f-76b2-5441-95735219718a@statistik.tu-dortmund.de>

Right, so "reply-all and and explain: Have these been fixed?"

Best,
Uwe Ligges

On 04.06.2020 15:16, Tiago Olivoto wrote:
> Dear all,
> 
> I have submitted a patch release (1.6.0) of my package metan
> (https://cran.r-project.org/web/packages/metan/) to fix an additional issue
> and implement some improvements. All local checks had no errors or warnings,
> but after the submission process, I received the following message.
> 
>   
> 
> <<<begin content>>>
> 
>   
> 
> Dear maintainer,
> 
> package metan_1.6.1.tar.gz has been auto-processed.
> 
> The auto-check found additional issues for the *last* version released on
> CRAN:
> 
>    donttest < <https://www.stats.ox.ac.uk/pub/bdr/donttest/metan.out>
> https://www.stats.ox.ac.uk/pub/bdr/donttest/metan.out>
> 
> CRAN incoming checks do not test for these additional issues and you will
> need an appropriately instrumented build of R to reproduce these.
> 
> Hence please reply-all and explain: Have these been fixed?
> 
> Log dir:
> <https://win-builder.r-project.org/incoming_pretest/metan_1.6.1_20200603_062
> 635/>
> 
> The files will be removed after roughly 7 days.
> 
> Installation time in seconds: 52
> 
> Check time in seconds: 407
> 
> R Under development (unstable) (2020-05-29 r78617)
> 
> Pretests results:
> 
> Windows: <
> <https://win-builder.r-project.org/incoming_pretest/metan_1.6.1_20200603_062
> 635/Windows/00check.log>
> https://win-builder.r-project.org/incoming_pretest/metan_1.6.1_20200603_0626
> 35/Windows/00check.log>
> 
> Status: OK
> 
> Debian: <
> <https://win-builder.r-project.org/incoming_pretest/metan_1.6.1_20200603_062
> 635/Debian/00check.log>
> https://win-builder.r-project.org/incoming_pretest/metan_1.6.1_20200603_0626
> 35/Debian/00check.log>
> 
> Status: OK
> 
> Last released version's CRAN status: OK: 12
> 
> See: < <https://CRAN.R-project.org/web/checks/check_results_metan.html>
> https://CRAN.R-project.org/web/checks/check_results_metan.html>
> 
> Last released version's additional issues:
> 
>    donttest < <https://www.stats.ox.ac.uk/pub/bdr/donttest/metan.out>
> https://www.stats.ox.ac.uk/pub/bdr/donttest/metan.out>
> 
> CRAN Web: < <https://cran.r-project.org/package=metan>
> https://cran.r-project.org/package=metan>
> 
> No strong reverse dependencies to be checked.
> 
>   
> 
> <<<end content>>>
> 
>   
> 
> I replied to <CRAN-submissions at R-project.org
> <mailto:CRAN-submissions at R-project.org> >  explaining how the error was
> fixed, but since this is my first experience with an issue like that, I'm
> not sure if I need to do anything more or simply await a response from the
> CRAN team.
> 
> Thanks in advance for any comments or suggestion,
> 
> Tiago
> 
>   
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From t|@goo||voto @end|ng |rom gm@||@com  Mon Jun  8 01:39:54 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Sun, 7 Jun 2020 20:39:54 -0300
Subject: [R-pkg-devel] RES: Additional issues for the last version released
 on CRAN
In-Reply-To: <f7893613-405f-76b2-5441-95735219718a@statistik.tu-dortmund.de>
References: <000001d63a72$56676df0$033649d0$@gmail.com>
 <f7893613-405f-76b2-5441-95735219718a@statistik.tu-dortmund.de>
Message-ID: <000901d63d24$f3c57790$db5066b0$@gmail.com>

Thanks, Uwe:
Now, metan is on its way to CRAN.
Best
Tiago

-----Mensagem original-----
De: Uwe Ligges <ligges at statistik.tu-dortmund.de> 
Enviada em: domingo, 7 de junho de 2020 14:09
Para: tiagoolivoto at gmail.com; r-package-devel at r-project.org
Assunto: Re: [R-pkg-devel] Additional issues for the last version released on CRAN

Right, so "reply-all and and explain: Have these been fixed?"

Best,
Uwe Ligges

On 04.06.2020 15:16, Tiago Olivoto wrote:
> Dear all,
> 
> I have submitted a patch release (1.6.0) of my package metan
> (https://cran.r-project.org/web/packages/metan/) to fix an additional 
> issue and implement some improvements. All local checks had no errors 
> or warnings, but after the submission process, I received the following message.
> 
>   
> 
> <<<begin content>>>
> 
>   
> 
> Dear maintainer,
> 
> package metan_1.6.1.tar.gz has been auto-processed.
> 
> The auto-check found additional issues for the *last* version released 
> on
> CRAN:
> 
>    donttest < <https://www.stats.ox.ac.uk/pub/bdr/donttest/metan.out>
> https://www.stats.ox.ac.uk/pub/bdr/donttest/metan.out>
> 
> CRAN incoming checks do not test for these additional issues and you 
> will need an appropriately instrumented build of R to reproduce these.
> 
> Hence please reply-all and explain: Have these been fixed?
> 
> Log dir:
> <https://win-builder.r-project.org/incoming_pretest/metan_1.6.1_202006
> 03_062
> 635/>
> 
> The files will be removed after roughly 7 days.
> 
> Installation time in seconds: 52
> 
> Check time in seconds: 407
> 
> R Under development (unstable) (2020-05-29 r78617)
> 
> Pretests results:
> 
> Windows: <
> <https://win-builder.r-project.org/incoming_pretest/metan_1.6.1_202006
> 03_062
> 635/Windows/00check.log>
> https://win-builder.r-project.org/incoming_pretest/metan_1.6.1_2020060
> 3_0626
> 35/Windows/00check.log>
> 
> Status: OK
> 
> Debian: <
> <https://win-builder.r-project.org/incoming_pretest/metan_1.6.1_202006
> 03_062
> 635/Debian/00check.log>
> https://win-builder.r-project.org/incoming_pretest/metan_1.6.1_2020060
> 3_0626
> 35/Debian/00check.log>
> 
> Status: OK
> 
> Last released version's CRAN status: OK: 12
> 
> See: < 
> <https://CRAN.R-project.org/web/checks/check_results_metan.html>
> https://CRAN.R-project.org/web/checks/check_results_metan.html>
> 
> Last released version's additional issues:
> 
>    donttest < <https://www.stats.ox.ac.uk/pub/bdr/donttest/metan.out>
> https://www.stats.ox.ac.uk/pub/bdr/donttest/metan.out>
> 
> CRAN Web: < <https://cran.r-project.org/package=metan>
> https://cran.r-project.org/package=metan>
> 
> No strong reverse dependencies to be checked.
> 
>   
> 
> <<<end content>>>
> 
>   
> 
> I replied to <CRAN-submissions at R-project.org 
> <mailto:CRAN-submissions at R-project.org> >  explaining how the error 
> was fixed, but since this is my first experience with an issue like 
> that, I'm not sure if I need to do anything more or simply await a 
> response from the CRAN team.
> 
> Thanks in advance for any comments or suggestion,
> 
> Tiago
> 
>   
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From m@ng|o|@@te|@no @end|ng |rom gm@||@com  Mon Jun  8 16:26:45 2020
From: m@ng|o|@@te|@no @end|ng |rom gm@||@com (stefano)
Date: Tue, 9 Jun 2020 00:26:45 +1000
Subject: [R-pkg-devel] email misleading: checking CRAN incoming feasibility
 ... NOTE Maintainer
Message-ID: <CANYYnL2t7My8Gpwk1oU4JxW2TcgzBHH+3S8Ukq2nrDK5CZ1iNw@mail.gmail.com>

Hello,

I would like to point out that I (and others in various forums) find that
the CRAN check with the note :


*checking CRAN incoming feasibility ... NOTEMaintainer*

Triggers an email saying


1) *package nanny_0.1.7.tar.gz does not pass the incoming checks
automatically*

2) *Please fix all problems and resubmit a fixed version via the webform*


While apparently nothing should be done, at least according to some forum
post
https://stackoverflow.com/questions/23829978/checking-cran-incoming-feasibility-note-maintainer

It would be nice to avoid this from the test side or the email side. It is
pretty confusing for developers who think that they have to act.


Best wishes.

*Stefano *



Stefano Mangiola | Postdoctoral fellow

Papenfuss Laboratory

The Walter Eliza Hall Institute of Medical Research

+61 (0)466452544

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Jun  8 16:40:37 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 8 Jun 2020 16:40:37 +0200
Subject: [R-pkg-devel] 
 email misleading: checking CRAN incoming feasibility
 ... NOTE Maintainer
In-Reply-To: <CANYYnL2t7My8Gpwk1oU4JxW2TcgzBHH+3S8Ukq2nrDK5CZ1iNw@mail.gmail.com>
References: <CANYYnL2t7My8Gpwk1oU4JxW2TcgzBHH+3S8Ukq2nrDK5CZ1iNw@mail.gmail.com>
Message-ID: <f02d2d85-7cb8-02fd-bc33-b5cb00661b1d@statistik.tu-dortmund.de>



On 08.06.2020 16:26, stefano wrote:
> Hello,
> 
> I would like to point out that I (and others in various forums) find that
> the CRAN check with the note :
> 
> 
> *checking CRAN incoming feasibility ... NOTEMaintainer*


Not true, it also says

Flavor: r-devel-windows-ix86+x86_64
Check: running examples for arch 'x64', Result: NOTE
   Examples with CPU (user + system) or elapsed time > 10s
                             user system elapsed
   lower_triangular-methods 11.48      0    11.5

Please reduce each example to less than 5 sec.

Best,
Uwe Ligges
> 
> Triggers an email saying
> 
> 
> 1) *package nanny_0.1.7.tar.gz does not pass the incoming checks
> automatically*
> 
> 2) *Please fix all problems and resubmit a fixed version via the webform*
> 
> 
> While apparently nothing should be done, at least according to some forum
> post
> https://stackoverflow.com/questions/23829978/checking-cran-incoming-feasibility-note-maintainer
> 
> It would be nice to avoid this from the test side or the email side. It is
> pretty confusing for developers who think that they have to act.
> 
> 
> Best wishes.
> 
> *Stefano *
> 
> 
> 
> Stefano Mangiola | Postdoctoral fellow
> 
> Papenfuss Laboratory
> 
> The Walter Eliza Hall Institute of Medical Research
> 
> +61 (0)466452544
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From m@ng|o|@@te|@no @end|ng |rom gm@||@com  Mon Jun  8 16:43:16 2020
From: m@ng|o|@@te|@no @end|ng |rom gm@||@com (stefano)
Date: Tue, 9 Jun 2020 00:43:16 +1000
Subject: [R-pkg-devel] 
 email misleading: checking CRAN incoming feasibility
 ... NOTE Maintainer
In-Reply-To: <f02d2d85-7cb8-02fd-bc33-b5cb00661b1d@statistik.tu-dortmund.de>
References: <CANYYnL2t7My8Gpwk1oU4JxW2TcgzBHH+3S8Ukq2nrDK5CZ1iNw@mail.gmail.com>
 <f02d2d85-7cb8-02fd-bc33-b5cb00661b1d@statistik.tu-dortmund.de>
Message-ID: <CANYYnL0GMBow1hPqFHGj4DBrAZ2N-BpwfQvvDxMXRbnSGNCvqQ@mail.gmail.com>

Hello Uwe,

OK sorry for that.

Best wishes.

*Stefano *



Stefano Mangiola | Postdoctoral fellow

Papenfuss Laboratory

The Walter Eliza Hall Institute of Medical Research

+61 (0)466452544


Il giorno mar 9 giu 2020 alle ore 00:40 Uwe Ligges <
ligges at statistik.tu-dortmund.de> ha scritto:

>
>
> On 08.06.2020 16:26, stefano wrote:
> > Hello,
> >
> > I would like to point out that I (and others in various forums) find that
> > the CRAN check with the note :
> >
> >
> > *checking CRAN incoming feasibility ... NOTEMaintainer*
>
>
> Not true, it also says
>
> Flavor: r-devel-windows-ix86+x86_64
> Check: running examples for arch 'x64', Result: NOTE
>    Examples with CPU (user + system) or elapsed time > 10s
>                              user system elapsed
>    lower_triangular-methods 11.48      0    11.5
>
> Please reduce each example to less than 5 sec.
>
> Best,
> Uwe Ligges
> >
> > Triggers an email saying
> >
> >
> > 1) *package nanny_0.1.7.tar.gz does not pass the incoming checks
> > automatically*
> >
> > 2) *Please fix all problems and resubmit a fixed version via the webform*
> >
> >
> > While apparently nothing should be done, at least according to some forum
> > post
> >
> https://stackoverflow.com/questions/23829978/checking-cran-incoming-feasibility-note-maintainer
> >
> > It would be nice to avoid this from the test side or the email side. It
> is
> > pretty confusing for developers who think that they have to act.
> >
> >
> > Best wishes.
> >
> > *Stefano *
> >
> >
> >
> > Stefano Mangiola | Postdoctoral fellow
> >
> > Papenfuss Laboratory
> >
> > The Walter Eliza Hall Institute of Medical Research
> >
> > +61 (0)466452544
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Mon Jun  8 16:52:44 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 8 Jun 2020 09:52:44 -0500
Subject: [R-pkg-devel] 
 email misleading: checking CRAN incoming feasibility
 ... NOTE Maintainer
In-Reply-To: <CANYYnL0GMBow1hPqFHGj4DBrAZ2N-BpwfQvvDxMXRbnSGNCvqQ@mail.gmail.com>
References: <CANYYnL2t7My8Gpwk1oU4JxW2TcgzBHH+3S8Ukq2nrDK5CZ1iNw@mail.gmail.com>
 <f02d2d85-7cb8-02fd-bc33-b5cb00661b1d@statistik.tu-dortmund.de>
 <CANYYnL0GMBow1hPqFHGj4DBrAZ2N-BpwfQvvDxMXRbnSGNCvqQ@mail.gmail.com>
Message-ID: <9a2a865b-a6a8-a43a-a978-ee108f4998bc@effectivedefense.org>

Hi, Uwe et al.:


 ????? What's the preferred way to eliminate tests on CRAN that the 
maintainer still wants to run on other platforms?


 ????? For several years, I've been using "if(!fda::CRAN()){...}". I've 
been told that I should NOT do that, but it has worked for me, and I 
haven't found anything better.? I've recently seen 
"testthat::skip_on_cran(...)", but I have yet to understand enough of 
how it works to actually use it.


 ????? Thanks,
 ????? Spencer Graves


On 2020-06-08 09:43, stefano wrote:
> Hello Uwe,
>
> OK sorry for that.
>
> Best wishes.
>
> *Stefano *
>
>
>
> Stefano Mangiola | Postdoctoral fellow
>
> Papenfuss Laboratory
>
> The Walter Eliza Hall Institute of Medical Research
>
> +61 (0)466452544
>
>
> Il giorno mar 9 giu 2020 alle ore 00:40 Uwe Ligges <
> ligges at statistik.tu-dortmund.de> ha scritto:
>
>>
>> On 08.06.2020 16:26, stefano wrote:
>>> Hello,
>>>
>>> I would like to point out that I (and others in various forums) find that
>>> the CRAN check with the note :
>>>
>>>
>>> *checking CRAN incoming feasibility ... NOTEMaintainer*
>>
>> Not true, it also says
>>
>> Flavor: r-devel-windows-ix86+x86_64
>> Check: running examples for arch 'x64', Result: NOTE
>>     Examples with CPU (user + system) or elapsed time > 10s
>>                               user system elapsed
>>     lower_triangular-methods 11.48      0    11.5
>>
>> Please reduce each example to less than 5 sec.
>>
>> Best,
>> Uwe Ligges
>>> Triggers an email saying
>>>
>>>
>>> 1) *package nanny_0.1.7.tar.gz does not pass the incoming checks
>>> automatically*
>>>
>>> 2) *Please fix all problems and resubmit a fixed version via the webform*
>>>
>>>
>>> While apparently nothing should be done, at least according to some forum
>>> post
>>>
>> https://stackoverflow.com/questions/23829978/checking-cran-incoming-feasibility-note-maintainer
>>> It would be nice to avoid this from the test side or the email side. It
>> is
>>> pretty confusing for developers who think that they have to act.
>>>
>>>
>>> Best wishes.
>>>
>>> *Stefano *
>>>
>>>
>>>
>>> Stefano Mangiola | Postdoctoral fellow
>>>
>>> Papenfuss Laboratory
>>>
>>> The Walter Eliza Hall Institute of Medical Research
>>>
>>> +61 (0)466452544
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Jun  8 16:57:39 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 8 Jun 2020 16:57:39 +0200
Subject: [R-pkg-devel] 
 email misleading: checking CRAN incoming feasibility
 ... NOTE Maintainer
In-Reply-To: <9a2a865b-a6a8-a43a-a978-ee108f4998bc@effectivedefense.org>
References: <CANYYnL2t7My8Gpwk1oU4JxW2TcgzBHH+3S8Ukq2nrDK5CZ1iNw@mail.gmail.com>
 <f02d2d85-7cb8-02fd-bc33-b5cb00661b1d@statistik.tu-dortmund.de>
 <CANYYnL0GMBow1hPqFHGj4DBrAZ2N-BpwfQvvDxMXRbnSGNCvqQ@mail.gmail.com>
 <9a2a865b-a6a8-a43a-a978-ee108f4998bc@effectivedefense.org>
Message-ID: <d3187e98-2234-1319-1b49-33e492552f81@statistik.tu-dortmund.de>



On 08.06.2020 16:52, Spencer Graves wrote:
> Hi, Uwe et al.:
> 
> 
>  ????? What's the preferred way to eliminate tests on CRAN that the 
> maintainer still wants to run on other platforms?
> 
> 
>  ????? For several years, I've been using "if(!fda::CRAN()){...}". I've 
> been told that I should NOT do that, but it has worked for me, and I 
> haven't found anything better.? I've recently seen 
> "testthat::skip_on_cran(...)", but I have yet to understand enough of 
> how it works to actually use it.


Nor do I how they can find out, as our idea is that CRAN cannot be 
special cased.
If you want to run additional tests, you can execute them if some env 
var is set that you define on machines where you want to run the 
additional tests.

Best,
Uwe Ligges



> 
> 
>  ????? Thanks,
>  ????? Spencer Graves
> 
> 
> On 2020-06-08 09:43, stefano wrote:
>> Hello Uwe,
>>
>> OK sorry for that.
>>
>> Best wishes.
>>
>> *Stefano *
>>
>>
>>
>> Stefano Mangiola | Postdoctoral fellow
>>
>> Papenfuss Laboratory
>>
>> The Walter Eliza Hall Institute of Medical Research
>>
>> +61 (0)466452544
>>
>>
>> Il giorno mar 9 giu 2020 alle ore 00:40 Uwe Ligges <
>> ligges at statistik.tu-dortmund.de> ha scritto:
>>
>>>
>>> On 08.06.2020 16:26, stefano wrote:
>>>> Hello,
>>>>
>>>> I would like to point out that I (and others in various forums) find 
>>>> that
>>>> the CRAN check with the note :
>>>>
>>>>
>>>> *checking CRAN incoming feasibility ... NOTEMaintainer*
>>>
>>> Not true, it also says
>>>
>>> Flavor: r-devel-windows-ix86+x86_64
>>> Check: running examples for arch 'x64', Result: NOTE
>>> ??? Examples with CPU (user + system) or elapsed time > 10s
>>> ????????????????????????????? user system elapsed
>>> ??? lower_triangular-methods 11.48????? 0??? 11.5
>>>
>>> Please reduce each example to less than 5 sec.
>>>
>>> Best,
>>> Uwe Ligges
>>>> Triggers an email saying
>>>>
>>>>
>>>> 1) *package nanny_0.1.7.tar.gz does not pass the incoming checks
>>>> automatically*
>>>>
>>>> 2) *Please fix all problems and resubmit a fixed version via the 
>>>> webform*
>>>>
>>>>
>>>> While apparently nothing should be done, at least according to some 
>>>> forum
>>>> post
>>>>
>>> https://stackoverflow.com/questions/23829978/checking-cran-incoming-feasibility-note-maintainer 
>>>
>>>> It would be nice to avoid this from the test side or the email side. It
>>> is
>>>> pretty confusing for developers who think that they have to act.
>>>>
>>>>
>>>> Best wishes.
>>>>
>>>> *Stefano *
>>>>
>>>>
>>>>
>>>> Stefano Mangiola | Postdoctoral fellow
>>>>
>>>> Papenfuss Laboratory
>>>>
>>>> The Walter Eliza Hall Institute of Medical Research
>>>>
>>>> +61 (0)466452544
>>>>
>>>> ?????? [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From iuke-tier@ey m@iii@g oii uiow@@edu  Mon Jun  8 17:01:34 2020
From: iuke-tier@ey m@iii@g oii uiow@@edu (iuke-tier@ey m@iii@g oii uiow@@edu)
Date: Mon, 8 Jun 2020 10:01:34 -0500 (CDT)
Subject: [R-pkg-devel] [External] Re: email misleading: checking CRAN
 incoming feasibility ... NOTE Maintainer
In-Reply-To: <d3187e98-2234-1319-1b49-33e492552f81@statistik.tu-dortmund.de>
References: <CANYYnL2t7My8Gpwk1oU4JxW2TcgzBHH+3S8Ukq2nrDK5CZ1iNw@mail.gmail.com>
 <f02d2d85-7cb8-02fd-bc33-b5cb00661b1d@statistik.tu-dortmund.de>
 <CANYYnL0GMBow1hPqFHGj4DBrAZ2N-BpwfQvvDxMXRbnSGNCvqQ@mail.gmail.com>
 <9a2a865b-a6a8-a43a-a978-ee108f4998bc@effectivedefense.org>
 <d3187e98-2234-1319-1b49-33e492552f81@statistik.tu-dortmund.de>
Message-ID: <alpine.DEB.2.21.2006081001130.3474@luke-Latitude-7480>

> testthat::skip_on_cran
function () 
{
     skip_if(on_cran(), "On CRAN")
}
<bytecode: 0x5559f11a2d90>
<environment: namespace:testthat>

> testthat:::on_cran
function () 
!identical(Sys.getenv("NOT_CRAN"), "true")
<bytecode: 0x5559f12f5180>
<environment: namespace:testthat>

Best,

luke

On Mon, 8 Jun 2020, Uwe Ligges wrote:

>
>
> On 08.06.2020 16:52, Spencer Graves wrote:
>> Hi, Uwe et al.:
>> 
>>
>>  ????? What's the preferred way to eliminate tests on CRAN that the 
>> maintainer still wants to run on other platforms?
>> 
>>
>>  ????? For several years, I've been using "if(!fda::CRAN()){...}". I've 
>> been told that I should NOT do that, but it has worked for me, and I 
>> haven't found anything better.? I've recently seen 
>> "testthat::skip_on_cran(...)", but I have yet to understand enough of how 
>> it works to actually use it.
>
>
> Nor do I how they can find out, as our idea is that CRAN cannot be special 
> cased.
> If you want to run additional tests, you can execute them if some env var is 
> set that you define on machines where you want to run the additional tests.
>
> Best,
> Uwe Ligges
>
>
>
>> 
>>
>>  ????? Thanks,
>>  ????? Spencer Graves
>> 
>> 
>> On 2020-06-08 09:43, stefano wrote:
>>> Hello Uwe,
>>> 
>>> OK sorry for that.
>>> 
>>> Best wishes.
>>> 
>>> *Stefano *
>>> 
>>> 
>>> 
>>> Stefano Mangiola | Postdoctoral fellow
>>> 
>>> Papenfuss Laboratory
>>> 
>>> The Walter Eliza Hall Institute of Medical Research
>>> 
>>> +61 (0)466452544
>>> 
>>> 
>>> Il giorno mar 9 giu 2020 alle ore 00:40 Uwe Ligges <
>>> ligges at statistik.tu-dortmund.de> ha scritto:
>>> 
>>>> 
>>>> On 08.06.2020 16:26, stefano wrote:
>>>>> Hello,
>>>>> 
>>>>> I would like to point out that I (and others in various forums) find 
>>>>> that
>>>>> the CRAN check with the note :
>>>>> 
>>>>> 
>>>>> *checking CRAN incoming feasibility ... NOTEMaintainer*
>>>> 
>>>> Not true, it also says
>>>> 
>>>> Flavor: r-devel-windows-ix86+x86_64
>>>> Check: running examples for arch 'x64', Result: NOTE
>>>> ??? Examples with CPU (user + system) or elapsed time > 10s
>>>> ????????????????????????????? user system elapsed
>>>> ??? lower_triangular-methods 11.48????? 0??? 11.5
>>>> 
>>>> Please reduce each example to less than 5 sec.
>>>> 
>>>> Best,
>>>> Uwe Ligges
>>>>> Triggers an email saying
>>>>> 
>>>>> 
>>>>> 1) *package nanny_0.1.7.tar.gz does not pass the incoming checks
>>>>> automatically*
>>>>> 
>>>>> 2) *Please fix all problems and resubmit a fixed version via the 
>>>>> webform*
>>>>> 
>>>>> 
>>>>> While apparently nothing should be done, at least according to some 
>>>>> forum
>>>>> post
>>>>> 
>>>> https://stackoverflow.com/questions/23829978/checking-cran-incoming-feasibility-note-maintainer 
>>>>> It would be nice to avoid this from the test side or the email side. It
>>>> is
>>>>> pretty confusing for developers who think that they have to act.
>>>>> 
>>>>> 
>>>>> Best wishes.
>>>>> 
>>>>> *Stefano *
>>>>> 
>>>>> 
>>>>> 
>>>>> Stefano Mangiola | Postdoctoral fellow
>>>>> 
>>>>> Papenfuss Laboratory
>>>>> 
>>>>> The Walter Eliza Hall Institute of Medical Research
>>>>> 
>>>>> +61 (0)466452544
>>>>> 
>>>>> ?????? [[alternative HTML version deleted]]
>>>>> 
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>> 
>>> ????[[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From c@@rd|@g@bor @end|ng |rom gm@||@com  Mon Jun  8 17:02:15 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Mon, 8 Jun 2020 16:02:15 +0100
Subject: [R-pkg-devel] 
 email misleading: checking CRAN incoming feasibility
 ... NOTE Maintainer
In-Reply-To: <d3187e98-2234-1319-1b49-33e492552f81@statistik.tu-dortmund.de>
References: <CANYYnL2t7My8Gpwk1oU4JxW2TcgzBHH+3S8Ukq2nrDK5CZ1iNw@mail.gmail.com>
 <f02d2d85-7cb8-02fd-bc33-b5cb00661b1d@statistik.tu-dortmund.de>
 <CANYYnL0GMBow1hPqFHGj4DBrAZ2N-BpwfQvvDxMXRbnSGNCvqQ@mail.gmail.com>
 <9a2a865b-a6a8-a43a-a978-ee108f4998bc@effectivedefense.org>
 <d3187e98-2234-1319-1b49-33e492552f81@statistik.tu-dortmund.de>
Message-ID: <CABtg=KmmEt5LLjkCXXyyzt=7SxNZnaC-7jeexKBaBnsdsMVadA@mail.gmail.com>

On Mon, Jun 8, 2020 at 3:58 PM Uwe Ligges
<ligges at statistik.tu-dortmund.de> wrote:
[...]
> Nor do I how they can find out, as our idea is that CRAN cannot be
> special cased.
> If you want to run additional tests, you can execute them if some env
> var is set that you define on machines where you want to run the
> additional tests.
[...]

That is exactly how testthat::skip_on_cran() works. If you set
`NOT_CRAN="true"` then the test runs. And to make it more helpful,
Travis, GitHub Actions, etc. automatically set it.

Gabor


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Jun  8 17:05:11 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 8 Jun 2020 17:05:11 +0200
Subject: [R-pkg-devel] 
 email misleading: checking CRAN incoming feasibility
 ... NOTE Maintainer
In-Reply-To: <CABtg=KmmEt5LLjkCXXyyzt=7SxNZnaC-7jeexKBaBnsdsMVadA@mail.gmail.com>
References: <CANYYnL2t7My8Gpwk1oU4JxW2TcgzBHH+3S8Ukq2nrDK5CZ1iNw@mail.gmail.com>
 <f02d2d85-7cb8-02fd-bc33-b5cb00661b1d@statistik.tu-dortmund.de>
 <CANYYnL0GMBow1hPqFHGj4DBrAZ2N-BpwfQvvDxMXRbnSGNCvqQ@mail.gmail.com>
 <9a2a865b-a6a8-a43a-a978-ee108f4998bc@effectivedefense.org>
 <d3187e98-2234-1319-1b49-33e492552f81@statistik.tu-dortmund.de>
 <CABtg=KmmEt5LLjkCXXyyzt=7SxNZnaC-7jeexKBaBnsdsMVadA@mail.gmail.com>
Message-ID: <1fdc618f-ed4f-ca75-246a-8d60e847669d@statistik.tu-dortmund.de>



On 08.06.2020 17:02, G?bor Cs?rdi wrote:
> On Mon, Jun 8, 2020 at 3:58 PM Uwe Ligges
> <ligges at statistik.tu-dortmund.de> wrote:
> [...]
>> Nor do I how they can find out, as our idea is that CRAN cannot be
>> special cased.
>> If you want to run additional tests, you can execute them if some env
>> var is set that you define on machines where you want to run the
>> additional tests.
> [...]
> 
> That is exactly how testthat::skip_on_cran() works. If you set
> `NOT_CRAN="true"` then the test runs. And to make it more helpful,
> Travis, GitHub Actions, etc. automatically set it.
> 
> Gabor

Thanks to Luke and Gabor for enlighting me.

Uwe


From d@|uedecke @end|ng |rom uke@de  Mon Jun  8 17:08:07 2020
From: d@|uedecke @end|ng |rom uke@de (=?utf-8?Q?Daniel_L=C3=BCdecke?=)
Date: Mon, 8 Jun 2020 17:08:07 +0200
Subject: [R-pkg-devel] 
 email misleading: checking CRAN incoming feasibility
 ... NOTE Maintainer
In-Reply-To: <9a2a865b-a6a8-a43a-a978-ee108f4998bc@effectivedefense.org>
References: <CANYYnL2t7My8Gpwk1oU4JxW2TcgzBHH+3S8Ukq2nrDK5CZ1iNw@mail.gmail.com>
 <f02d2d85-7cb8-02fd-bc33-b5cb00661b1d@statistik.tu-dortmund.de>
 <CANYYnL0GMBow1hPqFHGj4DBrAZ2N-BpwfQvvDxMXRbnSGNCvqQ@mail.gmail.com>
 <9a2a865b-a6a8-a43a-a978-ee108f4998bc@effectivedefense.org>
Message-ID: <000d01d63da6$9ddbc6e0$d99354a0$@uke.de>

Hi Spencer,

the NOTE you posted in your email was related to examples, so you probably don't need to remove tests. You can wrap part of the examples in \dontrun{} to reduce check time for examples.

As for tests, there are several ways of skipping (long-running) tests on CRAN. If you're using testthat, you typically have code chunks like this in your test-files:

  test_that("my_function", {
    expect_false(...)
    expect_equal(...)
  })

Just insert a "testthat::skip_on_cran()" as first line in that code-chunk:

  test_that("my_function", {
    skip_on_cran()
    expect_false(...)
    expect_equal(...)
  })

This will skip this particular test.

Another way if you want to run a complete test-file only locally depends on versioning. I always use 4 decimals as version numbers for my packages in development, e.g. package_0.1.2.3, and on CRAN, only three decimals: package_0.1.3 (this related to the package version you define in the DESCRIPTION file). If you follow this rules, you can set a global environment variable in the main test file, when you use "testthat", you should insert following code (change package name accordingly) in "testthat.R":

if (length(strsplit(packageDescription("my_package")$Version, "\\.")[[1]]) > 3) {
  Sys.setenv("RunAllPkgTests" = "yes")
} else {
  Sys.setenv("RunAllPkgTests" = "no")
}

For versions on CRAN (i.e. version number like 0.1.0), the environment variable "RunAllPkgTests" is "no", for your local package with version number like 0.1.0.1 this would be "yes". Then you wrap your complete test file into an if-statement:

.runThisTest <- Sys.getenv("RunAllinsightTests") == "yes"

if (.runThisTest) {
  # ... all my tests here
}

Here's a practical example:
https://github.com/easystats/insight/blob/master/tests/testthat.R
https://github.com/easystats/insight/blob/master/tests/testthat/test-bigglm.R

And for skip_on_cran() / skip_on_travis:
https://github.com/easystats/insight/blob/cddc6df6783aae859f2b707dd5a938493bff3aaa/tests/testthat/test-spatial.R#L141

Hope this helps!

Best
Daniel

-----Urspr?ngliche Nachricht-----
Von: R-package-devel <r-package-devel-bounces at r-project.org> Im Auftrag von Spencer Graves
Gesendet: Montag, 8. Juni 2020 16:53
An: r-package-devel at r-project.org
Betreff: Re: [R-pkg-devel] email misleading: checking CRAN incoming feasibility ... NOTE Maintainer

Hi, Uwe et al.:


       What's the preferred way to eliminate tests on CRAN that the 
maintainer still wants to run on other platforms?


       For several years, I've been using "if(!fda::CRAN()){...}". I've 
been told that I should NOT do that, but it has worked for me, and I 
haven't found anything better.  I've recently seen 
"testthat::skip_on_cran(...)", but I have yet to understand enough of 
how it works to actually use it.


       Thanks,
       Spencer Graves


On 2020-06-08 09:43, stefano wrote:
> Hello Uwe,
>
> OK sorry for that.
>
> Best wishes.
>
> *Stefano *
>
>
>
> Stefano Mangiola | Postdoctoral fellow
>
> Papenfuss Laboratory
>
> The Walter Eliza Hall Institute of Medical Research
>
> +61 (0)466452544
>
>
> Il giorno mar 9 giu 2020 alle ore 00:40 Uwe Ligges <
> ligges at statistik.tu-dortmund.de> ha scritto:
>
>>
>> On 08.06.2020 16:26, stefano wrote:
>>> Hello,
>>>
>>> I would like to point out that I (and others in various forums) find that
>>> the CRAN check with the note :
>>>
>>>
>>> *checking CRAN incoming feasibility ... NOTEMaintainer*
>>
>> Not true, it also says
>>
>> Flavor: r-devel-windows-ix86+x86_64
>> Check: running examples for arch 'x64', Result: NOTE
>>     Examples with CPU (user + system) or elapsed time > 10s
>>                               user system elapsed
>>     lower_triangular-methods 11.48      0    11.5
>>
>> Please reduce each example to less than 5 sec.
>>
>> Best,
>> Uwe Ligges
>>> Triggers an email saying
>>>
>>>
>>> 1) *package nanny_0.1.7.tar.gz does not pass the incoming checks
>>> automatically*
>>>
>>> 2) *Please fix all problems and resubmit a fixed version via the webform*
>>>
>>>
>>> While apparently nothing should be done, at least according to some forum
>>> post
>>>
>> https://stackoverflow.com/questions/23829978/checking-cran-incoming-feasibility-note-maintainer
>>> It would be nice to avoid this from the test side or the email side. It
>> is
>>> pretty confusing for developers who think that they have to act.
>>>
>>>
>>> Best wishes.
>>>
>>> *Stefano *
>>>
>>>
>>>
>>> Stefano Mangiola | Postdoctoral fellow
>>>
>>> Papenfuss Laboratory
>>>
>>> The Walter Eliza Hall Institute of Medical Research
>>>
>>> +61 (0)466452544
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

--

_____________________________________________________________________

Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Joachim Pr?l?, Prof. Dr. Blanche Schwappach-Pignataro, Marya Verdel
_____________________________________________________________________

SAVE PAPER - THINK BEFORE PRINTING

From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jun  8 17:21:12 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 8 Jun 2020 11:21:12 -0400
Subject: [R-pkg-devel] 
 email misleading: checking CRAN incoming feasibility
 ... NOTE Maintainer
In-Reply-To: <9a2a865b-a6a8-a43a-a978-ee108f4998bc@effectivedefense.org>
References: <CANYYnL2t7My8Gpwk1oU4JxW2TcgzBHH+3S8Ukq2nrDK5CZ1iNw@mail.gmail.com>
 <f02d2d85-7cb8-02fd-bc33-b5cb00661b1d@statistik.tu-dortmund.de>
 <CANYYnL0GMBow1hPqFHGj4DBrAZ2N-BpwfQvvDxMXRbnSGNCvqQ@mail.gmail.com>
 <9a2a865b-a6a8-a43a-a978-ee108f4998bc@effectivedefense.org>
Message-ID: <c1d5f36d-698b-a255-660c-c0f8b0a991c7@gmail.com>

The built-in way is to put those tests in a separate directory, and 
specify that directory when you run R CMD check.  For example, rgl has 
directory "inst/slowTests", and I use these options to R CMD check:

--test-dir=inst/slowTests

Duncan Murdoch


On 08/06/2020 10:52 a.m., Spencer Graves wrote:
> Hi, Uwe et al.:
> 
> 
>   ????? What's the preferred way to eliminate tests on CRAN that the
> maintainer still wants to run on other platforms?
> 
> 
>   ????? For several years, I've been using "if(!fda::CRAN()){...}". I've
> been told that I should NOT do that, but it has worked for me, and I
> haven't found anything better.? I've recently seen
> "testthat::skip_on_cran(...)", but I have yet to understand enough of
> how it works to actually use it.
> 
> 
>   ????? Thanks,
>   ????? Spencer Graves
> 
> 
> On 2020-06-08 09:43, stefano wrote:
>> Hello Uwe,
>>
>> OK sorry for that.
>>
>> Best wishes.
>>
>> *Stefano *
>>
>>
>>
>> Stefano Mangiola | Postdoctoral fellow
>>
>> Papenfuss Laboratory
>>
>> The Walter Eliza Hall Institute of Medical Research
>>
>> +61 (0)466452544
>>
>>
>> Il giorno mar 9 giu 2020 alle ore 00:40 Uwe Ligges <
>> ligges at statistik.tu-dortmund.de> ha scritto:
>>
>>>
>>> On 08.06.2020 16:26, stefano wrote:
>>>> Hello,
>>>>
>>>> I would like to point out that I (and others in various forums) find that
>>>> the CRAN check with the note :
>>>>
>>>>
>>>> *checking CRAN incoming feasibility ... NOTEMaintainer*
>>>
>>> Not true, it also says
>>>
>>> Flavor: r-devel-windows-ix86+x86_64
>>> Check: running examples for arch 'x64', Result: NOTE
>>>      Examples with CPU (user + system) or elapsed time > 10s
>>>                                user system elapsed
>>>      lower_triangular-methods 11.48      0    11.5
>>>
>>> Please reduce each example to less than 5 sec.
>>>
>>> Best,
>>> Uwe Ligges
>>>> Triggers an email saying
>>>>
>>>>
>>>> 1) *package nanny_0.1.7.tar.gz does not pass the incoming checks
>>>> automatically*
>>>>
>>>> 2) *Please fix all problems and resubmit a fixed version via the webform*
>>>>
>>>>
>>>> While apparently nothing should be done, at least according to some forum
>>>> post
>>>>
>>> https://stackoverflow.com/questions/23829978/checking-cran-incoming-feasibility-note-maintainer
>>>> It would be nice to avoid this from the test side or the email side. It
>>> is
>>>> pretty confusing for developers who think that they have to act.
>>>>
>>>>
>>>> Best wishes.
>>>>
>>>> *Stefano *
>>>>
>>>>
>>>>
>>>> Stefano Mangiola | Postdoctoral fellow
>>>>
>>>> Papenfuss Laboratory
>>>>
>>>> The Walter Eliza Hall Institute of Medical Research
>>>>
>>>> +61 (0)466452544
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From gor@n@bro@trom @end|ng |rom umu@@e  Mon Jun  8 21:12:03 2020
From: gor@n@bro@trom @end|ng |rom umu@@e (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Mon, 8 Jun 2020 21:12:03 +0200
Subject: [R-pkg-devel] Forward function call
Message-ID: <c1c8f1ca-40d5-e19e-20f2-14e8034d2fce@umu.se>

Hello,

the function 'coxreg' in my package 'eha' is often just a wrapper for 
'coxph' in survival, so I have code like

     if (cox.ph){
         Call <- match.call()
         Call[[1]] <- as.name("coxph")
         fit <- eval.parent(Call)
         return(fit)
     }

which works since eha depends on survival. Now I am thinking of changing 
Depends to Imports, and I would like to change the code to

     if (cox.ph){
         Call <- match.call()
         Call[[1]] <- as.name("survival::coxph")
         fit <- eval.parent(Call)
         return(fit)
     }

but this doesn't work, because the function name is turned into
`survival::coxph` (with the backticks) and the evaluation fails.

How can I solve this?

Thanks, G,


From n|u|tz @end|ng |rom gm@||@com  Mon Jun  8 21:25:21 2020
From: n|u|tz @end|ng |rom gm@||@com (Neal Fultz)
Date: Mon, 8 Jun 2020 12:25:21 -0700
Subject: [R-pkg-devel] Forward function call
In-Reply-To: <c1c8f1ca-40d5-e19e-20f2-14e8034d2fce@umu.se>
References: <c1c8f1ca-40d5-e19e-20f2-14e8034d2fce@umu.se>
Message-ID: <CAL9B2vda+nXby_ogyCc1VZ43WE5XHMyPBgLs_bYYaw==x9g6gQ@mail.gmail.com>

You will first need to convert the function call to an expression, then you
can modify the expression as appropriate.

Here's a somewhat contrived minimal example:

> f <- function(z, ...) match.call()
> aaa = f(a=1,2,3)
> str(aaa)
 language f(z = 2, a = 1, 3)
> aaa <- as.expression(aaa)
> str(aaa)
  expression(f(z = 2, a = 1, 3))
> aaa[[1]][[1]] <- expression(base::c)[[1]]
> str(aaa)
  expression(base::c(z = 2, a = 1, 3))
> eval(aaa)
z a
2 1 3



On Mon, Jun 8, 2020 at 12:12 PM G?ran Brostr?m <goran.brostrom at umu.se>
wrote:

> Hello,
>
> the function 'coxreg' in my package 'eha' is often just a wrapper for
> 'coxph' in survival, so I have code like
>
>      if (cox.ph){
>          Call <- match.call()
>          Call[[1]] <- as.name("coxph")
>          fit <- eval.parent(Call)
>          return(fit)
>      }
>
> which works since eha depends on survival. Now I am thinking of changing
> Depends to Imports, and I would like to change the code to
>
>      if (cox.ph){
>          Call <- match.call()
>          Call[[1]] <- as.name("survival::coxph")
>          fit <- eval.parent(Call)
>          return(fit)
>      }
>
> but this doesn't work, because the function name is turned into
> `survival::coxph` (with the backticks) and the evaluation fails.
>
> How can I solve this?
>
> Thanks, G,
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Mon Jun  8 21:42:27 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Mon, 8 Jun 2020 15:42:27 -0400
Subject: [R-pkg-devel] Forward function call
In-Reply-To: <c1c8f1ca-40d5-e19e-20f2-14e8034d2fce@umu.se>
References: <c1c8f1ca-40d5-e19e-20f2-14e8034d2fce@umu.se>
Message-ID: <CABghstTnMGPs6TFwAbQH30Py44w3LinSOWfu1nWxKhJgXw55Hg@mail.gmail.com>

 I think quote(survival::coxph) will work in place of as.name() ?

On Mon, Jun 8, 2020 at 3:12 PM G?ran Brostr?m <goran.brostrom at umu.se> wrote:
>
> Hello,
>
> the function 'coxreg' in my package 'eha' is often just a wrapper for
> 'coxph' in survival, so I have code like
>
>      if (cox.ph){
>          Call <- match.call()
>          Call[[1]] <- as.name("coxph")
>          fit <- eval.parent(Call)
>          return(fit)
>      }
>
> which works since eha depends on survival. Now I am thinking of changing
> Depends to Imports, and I would like to change the code to
>
>      if (cox.ph){
>          Call <- match.call()
>          Call[[1]] <- as.name("survival::coxph")
>          fit <- eval.parent(Call)
>          return(fit)
>      }
>
> but this doesn't work, because the function name is turned into
> `survival::coxph` (with the backticks) and the evaluation fails.
>
> How can I solve this?
>
> Thanks, G,
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From wdun|@p @end|ng |rom t|bco@com  Mon Jun  8 21:28:52 2020
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Mon, 8 Jun 2020 12:28:52 -0700
Subject: [R-pkg-devel] Forward function call
In-Reply-To: <c1c8f1ca-40d5-e19e-20f2-14e8034d2fce@umu.se>
References: <c1c8f1ca-40d5-e19e-20f2-14e8034d2fce@umu.se>
Message-ID: <CAF8bMca3LVXS9T-_CToCbtFSVmFGrrnvPNizZRiZiz128HOqJA@mail.gmail.com>

Use
   Call[[1]] <- quote(survival::coxph)

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Mon, Jun 8, 2020 at 12:12 PM G?ran Brostr?m <goran.brostrom at umu.se>
wrote:

> Hello,
>
> the function 'coxreg' in my package 'eha' is often just a wrapper for
> 'coxph' in survival, so I have code like
>
>      if (cox.ph){
>          Call <- match.call()
>          Call[[1]] <- as.name("coxph")
>          fit <- eval.parent(Call)
>          return(fit)
>      }
>
> which works since eha depends on survival. Now I am thinking of changing
> Depends to Imports, and I would like to change the code to
>
>      if (cox.ph){
>          Call <- match.call()
>          Call[[1]] <- as.name("survival::coxph")
>          fit <- eval.parent(Call)
>          return(fit)
>      }
>
> but this doesn't work, because the function name is turned into
> `survival::coxph` (with the backticks) and the evaluation fails.
>
> How can I solve this?
>
> Thanks, G,
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From gor@n@bro@trom @end|ng |rom umu@@e  Mon Jun  8 23:02:30 2020
From: gor@n@bro@trom @end|ng |rom umu@@e (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Mon, 8 Jun 2020 23:02:30 +0200
Subject: [R-pkg-devel] Forward function call
In-Reply-To: <CABghstTnMGPs6TFwAbQH30Py44w3LinSOWfu1nWxKhJgXw55Hg@mail.gmail.com>
References: <c1c8f1ca-40d5-e19e-20f2-14e8034d2fce@umu.se>
 <CABghstTnMGPs6TFwAbQH30Py44w3LinSOWfu1nWxKhJgXw55Hg@mail.gmail.com>
Message-ID: <84d8869f-ecf4-23d1-d45e-7c1983fd15f5@umu.se>

Thanks for the responses!

I found the suggestion

Call[[1]] <- quote(survival::coxph)

easiest to implement. And it works.

Best, G?ran

On 2020-06-08 21:42, Ben Bolker wrote:
>   I think quote(survival::coxph) will work in place of as.name() ?
> 
> On Mon, Jun 8, 2020 at 3:12 PM G?ran Brostr?m <goran.brostrom at umu.se> wrote:
>>
>> Hello,
>>
>> the function 'coxreg' in my package 'eha' is often just a wrapper for
>> 'coxph' in survival, so I have code like
>>
>>       if (cox.ph){
>>           Call <- match.call()
>>           Call[[1]] <- as.name("coxph")
>>           fit <- eval.parent(Call)
>>           return(fit)
>>       }
>>
>> which works since eha depends on survival. Now I am thinking of changing
>> Depends to Imports, and I would like to change the code to
>>
>>       if (cox.ph){
>>           Call <- match.call()
>>           Call[[1]] <- as.name("survival::coxph")
>>           fit <- eval.parent(Call)
>>           return(fit)
>>       }
>>
>> but this doesn't work, because the function name is turned into
>> `survival::coxph` (with the backticks) and the evaluation fails.
>>
>> How can I solve this?
>>
>> Thanks, G,
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Tue Jun  9 09:10:53 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Tue, 9 Jun 2020 09:10:53 +0200
Subject: [R-pkg-devel] Forward function call
In-Reply-To: <84d8869f-ecf4-23d1-d45e-7c1983fd15f5@umu.se>
References: <c1c8f1ca-40d5-e19e-20f2-14e8034d2fce@umu.se>
 <CABghstTnMGPs6TFwAbQH30Py44w3LinSOWfu1nWxKhJgXw55Hg@mail.gmail.com>
 <84d8869f-ecf4-23d1-d45e-7c1983fd15f5@umu.se>
Message-ID: <24287.13821.452818.596542@stat.math.ethz.ch>

>>>>> G?ran Brostr?m 
>>>>>     on Mon, 8 Jun 2020 23:02:30 +0200 writes:

    > Thanks for the responses!
    > I found the suggestion

    > Call[[1]] <- quote(survival::coxph)

    > easiest to implement. And it works.

and it is what we use in R's own R source code in several
places (and that's where/how I assume it also came to  Ben
Bolker, lme4, etc) :

A simple grep inside current R's source <R>/src/library/ gives

grep -r --color -nHF -e 'quote(stats::'

./stats/R/acf.R:28:        m[[1L]] <- quote(stats::pacf)
./stats/R/aggregate.R:154:    m[[1L]] <- quote(stats::model.frame)
./stats/R/aov.R:36:    lmcall[[1L]] <- quote(stats::lm)
./stats/R/bartlett.test.R:86:    m[[1L]] <- quote(stats::model.frame)
./stats/R/cor.test.R:213:    m[[1L]] <- quote(stats::model.frame)
./stats/R/factanal.R:73:            mf[[1L]] <- quote(stats::model.frame)
./stats/R/friedman.test.R:92:    m[[1L]] <- quote(stats::model.frame)
./stats/R/ftable.R:150:        m[[1L]] <- quote(stats::model.frame)
./stats/R/glm.R:52:    mf[[1L]] <- quote(stats::model.frame)
./stats/R/glm.R:863:	fcall[[1L]] <- quote(stats::glm)
./stats/R/lm.R:34:    mf[[1L]] <- quote(stats::model.frame)
./stats/R/lm.R:546:        fcall[[1L]] <- quote(stats::model.frame)
./stats/R/loess.R:34:    mf[[1L]] <- quote(stats::model.frame)
./stats/R/manova.R:22:    fcall[[1L]] <- quote(stats::aov)
./stats/R/model.tables.R:485:    fcall <- c(list(quote(stats::model.frame)), args)
./stats/R/nls.R:570:            mf[[1L]] <- quote(stats::model.frame)
./stats/R/ppr.R:30:    m[[1L]] <- quote(stats::model.frame)
./stats/R/prcomp.R:69:    mf[[1L]] <- quote(stats::model.frame)
./stats/R/princomp.R:30:    mf[[1L]] <- quote(stats::model.frame)
./stats/R/quade.test.R:102:    m[[1L]] <- quote(stats::model.frame)
./stats/R/spectrum.R:220:        m[[1L]] <- quote(stats::plot.spec.coherency)
./stats/R/spectrum.R:226:        m[[1L]] <- quote(stats::plot.spec.phase)
./stats/R/t.test.R:141:    m[[1L]] <- quote(stats::model.frame)
./stats/R/ts.R:744:    m[[1L]] <- quote(stats::window)
./stats/R/var.test.R:97:    m[[1L]] <- quote(stats::model.frame)
./stats/R/xtabs.R:40:    m[[1L]] <- quote(stats::model.frame)


    > Best, G?ran

    > On 2020-06-08 21:42, Ben Bolker wrote:
    >> I think quote(survival::coxph) will work in place of as.name() ?
    >> 
    >> On Mon, Jun 8, 2020 at 3:12 PM G?ran Brostr?m <goran.brostrom at umu.se> wrote:
    >>> 
    >>> Hello,
    >>> 
    >>> the function 'coxreg' in my package 'eha' is often just a wrapper for
    >>> 'coxph' in survival, so I have code like
    >>> 
    >>> if (cox.ph){
    >>> Call <- match.call()
    >>> Call[[1]] <- as.name("coxph")
    >>> fit <- eval.parent(Call)
    >>> return(fit)
    >>> }
    >>> 
    >>> which works since eha depends on survival. Now I am thinking of changing
    >>> Depends to Imports, and I would like to change the code to
    >>> 
    >>> if (cox.ph){
    >>> Call <- match.call()
    >>> Call[[1]] <- as.name("survival::coxph")
    >>> fit <- eval.parent(Call)
    >>> return(fit)
    >>> }
    >>> 
    >>> but this doesn't work, because the function name is turned into
    >>> `survival::coxph` (with the backticks) and the evaluation fails.
    >>> 
    >>> How can I solve this?
    >>> 
    >>> Thanks, G,
    >>> 
    >>> ______________________________________________
    >>> R-package-devel at r-project.org mailing list
    >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From j@goreck| @end|ng |rom w|t@edu@p|  Tue Jun  9 11:54:38 2020
From: j@goreck| @end|ng |rom w|t@edu@p| (Jan Gorecki)
Date: Tue, 9 Jun 2020 10:54:38 +0100
Subject: [R-pkg-devel] Forward function call
In-Reply-To: <24287.13821.452818.596542@stat.math.ethz.ch>
References: <c1c8f1ca-40d5-e19e-20f2-14e8034d2fce@umu.se>
 <CABghstTnMGPs6TFwAbQH30Py44w3LinSOWfu1nWxKhJgXw55Hg@mail.gmail.com>
 <84d8869f-ecf4-23d1-d45e-7c1983fd15f5@umu.se>
 <24287.13821.452818.596542@stat.math.ethz.ch>
Message-ID: <CAOO9MKVTrir-uT84tGbP-9jcEnZDFL9TZq-oD3yiu+CZPVKjmA@mail.gmail.com>

"pkg::fun" cannot be a name because it is a function call already
`::`(pkg, fun).

On Tue, Jun 9, 2020 at 8:10 AM Martin Maechler
<maechler at stat.math.ethz.ch> wrote:
>
> >>>>> G?ran Brostr?m
> >>>>>     on Mon, 8 Jun 2020 23:02:30 +0200 writes:
>
>     > Thanks for the responses!
>     > I found the suggestion
>
>     > Call[[1]] <- quote(survival::coxph)
>
>     > easiest to implement. And it works.
>
> and it is what we use in R's own R source code in several
> places (and that's where/how I assume it also came to  Ben
> Bolker, lme4, etc) :
>
> A simple grep inside current R's source <R>/src/library/ gives
>
> grep -r --color -nHF -e 'quote(stats::'
>
> ./stats/R/acf.R:28:        m[[1L]] <- quote(stats::pacf)
> ./stats/R/aggregate.R:154:    m[[1L]] <- quote(stats::model.frame)
> ./stats/R/aov.R:36:    lmcall[[1L]] <- quote(stats::lm)
> ./stats/R/bartlett.test.R:86:    m[[1L]] <- quote(stats::model.frame)
> ./stats/R/cor.test.R:213:    m[[1L]] <- quote(stats::model.frame)
> ./stats/R/factanal.R:73:            mf[[1L]] <- quote(stats::model.frame)
> ./stats/R/friedman.test.R:92:    m[[1L]] <- quote(stats::model.frame)
> ./stats/R/ftable.R:150:        m[[1L]] <- quote(stats::model.frame)
> ./stats/R/glm.R:52:    mf[[1L]] <- quote(stats::model.frame)
> ./stats/R/glm.R:863:    fcall[[1L]] <- quote(stats::glm)
> ./stats/R/lm.R:34:    mf[[1L]] <- quote(stats::model.frame)
> ./stats/R/lm.R:546:        fcall[[1L]] <- quote(stats::model.frame)
> ./stats/R/loess.R:34:    mf[[1L]] <- quote(stats::model.frame)
> ./stats/R/manova.R:22:    fcall[[1L]] <- quote(stats::aov)
> ./stats/R/model.tables.R:485:    fcall <- c(list(quote(stats::model.frame)), args)
> ./stats/R/nls.R:570:            mf[[1L]] <- quote(stats::model.frame)
> ./stats/R/ppr.R:30:    m[[1L]] <- quote(stats::model.frame)
> ./stats/R/prcomp.R:69:    mf[[1L]] <- quote(stats::model.frame)
> ./stats/R/princomp.R:30:    mf[[1L]] <- quote(stats::model.frame)
> ./stats/R/quade.test.R:102:    m[[1L]] <- quote(stats::model.frame)
> ./stats/R/spectrum.R:220:        m[[1L]] <- quote(stats::plot.spec.coherency)
> ./stats/R/spectrum.R:226:        m[[1L]] <- quote(stats::plot.spec.phase)
> ./stats/R/t.test.R:141:    m[[1L]] <- quote(stats::model.frame)
> ./stats/R/ts.R:744:    m[[1L]] <- quote(stats::window)
> ./stats/R/var.test.R:97:    m[[1L]] <- quote(stats::model.frame)
> ./stats/R/xtabs.R:40:    m[[1L]] <- quote(stats::model.frame)
>
>
>     > Best, G?ran
>
>     > On 2020-06-08 21:42, Ben Bolker wrote:
>     >> I think quote(survival::coxph) will work in place of as.name() ?
>     >>
>     >> On Mon, Jun 8, 2020 at 3:12 PM G?ran Brostr?m <goran.brostrom at umu.se> wrote:
>     >>>
>     >>> Hello,
>     >>>
>     >>> the function 'coxreg' in my package 'eha' is often just a wrapper for
>     >>> 'coxph' in survival, so I have code like
>     >>>
>     >>> if (cox.ph){
>     >>> Call <- match.call()
>     >>> Call[[1]] <- as.name("coxph")
>     >>> fit <- eval.parent(Call)
>     >>> return(fit)
>     >>> }
>     >>>
>     >>> which works since eha depends on survival. Now I am thinking of changing
>     >>> Depends to Imports, and I would like to change the code to
>     >>>
>     >>> if (cox.ph){
>     >>> Call <- match.call()
>     >>> Call[[1]] <- as.name("survival::coxph")
>     >>> fit <- eval.parent(Call)
>     >>> return(fit)
>     >>> }
>     >>>
>     >>> but this doesn't work, because the function name is turned into
>     >>> `survival::coxph` (with the backticks) and the evaluation fails.
>     >>>
>     >>> How can I solve this?
>     >>>
>     >>> Thanks, G,
>     >>>
>     >>> ______________________________________________
>     >>> R-package-devel at r-project.org mailing list
>     >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>     > ______________________________________________
>     > R-package-devel at r-project.org mailing list
>     > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From kry|ov@r00t @end|ng |rom gm@||@com  Sat Jun 13 12:46:05 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sat, 13 Jun 2020 13:46:05 +0300
Subject: [R-pkg-devel] 
 [External] Guidelines on use of snow-style clusters in R packages?
In-Reply-To: <alpine.DEB.2.21.2006030841020.3474@luke-Latitude-7480>
References: <20200524172147.6cee696e@trisector>
 <alpine.DEB.2.21.2006030841020.3474@luke-Latitude-7480>
Message-ID: <20200613134605.49c4ea27@parabola>

On Wed, 3 Jun 2020 08:54:56 -0500 (CDT)
luke-tierney at uiowa.edu wrote:

> If you use [a cluster] passed to you it would be best to leave
> it in the state you found it at least as far as the search path and
> global environment are concerned.

Thanks for this advice! I guess that clusterExport() is also out of
question in package code, then.

> So use foo::bar instead of library().

I have found out that R Internals documents serialize() to use a very
efficient representation for package environments (a pseudo-SEXPTYPE
followed by the name). Does it mean that it is a good idea to pass
unexported private worker functions to parLapply(cl, X, fun), since the
package environment is not sent over network?

-- 
Best regards,
Ivan


From zk@mv@r @end|ng |rom gm@||@com  Sat Jun 13 19:17:51 2020
From: zk@mv@r @end|ng |rom gm@||@com (Zhian Kamvar)
Date: Sat, 13 Jun 2020 10:17:51 -0700
Subject: [R-pkg-devel] check cross-references error: Non-file
 package-anchored link(s)
Message-ID: <5F37E69B-BD3D-4B56-8B66-77E4A5EDECF3@gmail.com>

Hello,

I noticed a strange error pop up for R-devel (2020-06-12 r78687) check on travis: https://travis-ci.org/github/grunwaldlab/poppr/jobs/697831376#L4653-L4654

* checking Rd cross-references ... WARNING
Non-file package-anchored link(s) in documentation object 'aboot.Rd':
  ?[ape:phylo]{ape::phylo()}?

I looked at the Cross-reference section of WRE, but I couldn't find any mention of non-file package-anchored links being a problem: https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Cross_002dreferences

Is this a new policy?

All the best,
Zhian

From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Jun 13 21:09:50 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 13 Jun 2020 15:09:50 -0400
Subject: [R-pkg-devel] check cross-references error: Non-file
 package-anchored link(s)
In-Reply-To: <5F37E69B-BD3D-4B56-8B66-77E4A5EDECF3@gmail.com>
References: <5F37E69B-BD3D-4B56-8B66-77E4A5EDECF3@gmail.com>
Message-ID: <408847a9-ac14-c4fb-33d0-0734f180d228@gmail.com>

On 13/06/2020 1:17 p.m., Zhian Kamvar wrote:
> Hello,
> 
> I noticed a strange error pop up for R-devel (2020-06-12 r78687) check on travis: https://travis-ci.org/github/grunwaldlab/poppr/jobs/697831376#L4653-L4654
> 
> * checking Rd cross-references ... WARNING
> Non-file package-anchored link(s) in documentation object 'aboot.Rd':
>    ?[ape:phylo]{ape::phylo()}?
> 
> I looked at the Cross-reference section of WRE, but I couldn't find any mention of non-file package-anchored links being a problem: https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Cross_002dreferences
> 
> Is this a new policy?
> 

This is probably a new test of the long-time requirement that links 
should be to filenames, not aliases, when they go to other packages. 
WRE says

"There are two other forms of optional argument specified as 
\link[pkg]{foo} and \link[pkg:bar]{foo} to link to the package pkg, to 
files foo.html and bar.html respectively."

The problem is that `phylo` is documented in the read.tree.Rd file in 
ape, so your link needs to be

  \link[ape:read.tree]{ape::phylo()}

I wish I had fixed this inconsistency years ago when I rewrote the Rd 
code, but I didn't.  It would have been painful at the time (there were 
already thousands of CRAN packages, and lots would have needed fixing), 
but would be much worse now.

Another design flaw that I didn't fix is that you can have an Rd with 
\name{foo} and no \alias{foo}, and searching ?foo won't find it.  In 
that case I failed to convince other R core members that it would have 
been a good change.

Duncan Murdoch


From c@@rd|@g@bor @end|ng |rom gm@||@com  Sun Jun 14 03:00:32 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Sun, 14 Jun 2020 02:00:32 +0100
Subject: [R-pkg-devel] check cross-references error: Non-file
 package-anchored link(s)
In-Reply-To: <408847a9-ac14-c4fb-33d0-0734f180d228@gmail.com>
References: <5F37E69B-BD3D-4B56-8B66-77E4A5EDECF3@gmail.com>
 <408847a9-ac14-c4fb-33d0-0734f180d228@gmail.com>
Message-ID: <CABtg=K=c8TUAxmv1e2To5A5HHKUTQEA-tNadxUJGuA3eXh1p8A@mail.gmail.com>

On Sat, Jun 13, 2020 at 8:10 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 13/06/2020 1:17 p.m., Zhian Kamvar wrote:
[...]
> > Is this a new policy?

Zhian, it seems that some of the problematic links are created by
roxygen2. You can fix these using this PR:
https://github.com/r-lib/roxygen2/pull/1109
You can install this branch with
remotes::install_github("r-lib/roxygen2 at fix/link-to-file")

To fix the remaining ones, you need to modify your \link[]{} macros or
switch them to roxygen [pkg::fun()] links.

[...]
> This is probably a new test of the long-time requirement that links
> should be to filenames, not aliases, when they go to other packages.

I really like how the help system resolves links based on _topics_,
even for cross-package links. So I admit that I did not follow this
requirement too closely. It is better to link to topics instead of
files, because then links are independent of how the manual is
organized into files. E.g. it is not uncommon to split up a help file
that used to document multiple functions, into several files, because
the functions gain more functionality, or need more examples, etc. and
the manual page is getting less focused and harder to follow. It is
perfectly natural that the manual of a package is evolving together
with the code.

With enforcing this requirement, such documentation changes are
considered as breaking changes. If we need to link to files, then what
we get is more broken links, and more forced package updates, just to
fix the broken links. In particular, if a package moves a help topic
to another help file in a new release, then other packages linking to
this topic have to update their links, and if these happened to be
installed together with the old version of the linked package, they'll
have a broken link. This is a pity, because finding the right help
files is easy to automate, and in fact the help system already
supports it perfectly well.

As far as I can tell the only alternative of linking to the file is
using an unqualified link, i.e. not specifying the target package at
all. The help system can do the lookup at render time, and this is
usually OK, but for a non-trivial number of cases it is not, because
the resolution of the link depends on what packages are currently
loaded. If the right package is not loaded, then the link will
potentially go to the wrong help file, which is absurd. Or, if
multiple packages have the required topic, the user is presented with
a menu, which is also confusing. OTOH the manual authors know
perfectly well which package they want to link to, they just can't
specify it any more...

I am probably missing something, but what do we gain from linking to
files, instead of topics? Especially that linking to topics already
works perfectly well?

Gabor

[...]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jun 14 11:44:20 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 14 Jun 2020 05:44:20 -0400
Subject: [R-pkg-devel] check cross-references error: Non-file
 package-anchored link(s)
In-Reply-To: <CABtg=K=c8TUAxmv1e2To5A5HHKUTQEA-tNadxUJGuA3eXh1p8A@mail.gmail.com>
References: <5F37E69B-BD3D-4B56-8B66-77E4A5EDECF3@gmail.com>
 <408847a9-ac14-c4fb-33d0-0734f180d228@gmail.com>
 <CABtg=K=c8TUAxmv1e2To5A5HHKUTQEA-tNadxUJGuA3eXh1p8A@mail.gmail.com>
Message-ID: <0df3d1f3-f482-ee96-d6f5-a6aab74810b4@gmail.com>

On 13/06/2020 9:00 p.m., G?bor Cs?rdi wrote:
> On Sat, Jun 13, 2020 at 8:10 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> On 13/06/2020 1:17 p.m., Zhian Kamvar wrote:
> [...]
>>> Is this a new policy?
> 
> Zhian, it seems that some of the problematic links are created by
> roxygen2. You can fix these using this PR:
> https://github.com/r-lib/roxygen2/pull/1109
> You can install this branch with
> remotes::install_github("r-lib/roxygen2 at fix/link-to-file")
> 
> To fix the remaining ones, you need to modify your \link[]{} macros or
> switch them to roxygen [pkg::fun()] links.
> 
> [...]
>> This is probably a new test of the long-time requirement that links
>> should be to filenames, not aliases, when they go to other packages.
> 
> I really like how the help system resolves links based on _topics_,
> even for cross-package links. So I admit that I did not follow this
> requirement too closely. It is better to link to topics instead of
> files, because then links are independent of how the manual is
> organized into files. E.g. it is not uncommon to split up a help file
> that used to document multiple functions, into several files, because
> the functions gain more functionality, or need more examples, etc. and
> the manual page is getting less focused and harder to follow. It is
> perfectly natural that the manual of a package is evolving together
> with the code.
> 
> With enforcing this requirement, such documentation changes are
> considered as breaking changes. If we need to link to files, then what
> we get is more broken links, and more forced package updates, just to
> fix the broken links. In particular, if a package moves a help topic
> to another help file in a new release, then other packages linking to
> this topic have to update their links, and if these happened to be
> installed together with the old version of the linked package, they'll
> have a broken link. This is a pity, because finding the right help
> files is easy to automate, and in fact the help system already
> supports it perfectly well.
> 
> As far as I can tell the only alternative of linking to the file is
> using an unqualified link, i.e. not specifying the target package at
> all. The help system can do the lookup at render time, and this is
> usually OK, but for a non-trivial number of cases it is not, because
> the resolution of the link depends on what packages are currently
> loaded. If the right package is not loaded, then the link will
> potentially go to the wrong help file, which is absurd. Or, if
> multiple packages have the required topic, the user is presented with
> a menu, which is also confusing. OTOH the manual authors know
> perfectly well which package they want to link to, they just can't
> specify it any more...
> 
> I am probably missing something, but what do we gain from linking to
> files, instead of topics? Especially that linking to topics already
> works perfectly well?

I think the argument was that static builds of the help pages would have 
trouble resolving the links.  With the current system, you can build a 
help page that links to a page in package foo even if package foo is not 
installed yet, and have the link work later after you install foo.

Duncan Murdoch


From c@@rd|@g@bor @end|ng |rom gm@||@com  Sun Jun 14 12:26:35 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Sun, 14 Jun 2020 11:26:35 +0100
Subject: [R-pkg-devel] check cross-references error: Non-file
 package-anchored link(s)
In-Reply-To: <0df3d1f3-f482-ee96-d6f5-a6aab74810b4@gmail.com>
References: <5F37E69B-BD3D-4B56-8B66-77E4A5EDECF3@gmail.com>
 <408847a9-ac14-c4fb-33d0-0734f180d228@gmail.com>
 <CABtg=K=c8TUAxmv1e2To5A5HHKUTQEA-tNadxUJGuA3eXh1p8A@mail.gmail.com>
 <0df3d1f3-f482-ee96-d6f5-a6aab74810b4@gmail.com>
Message-ID: <CABtg=Kk2V4SWVx-MOQ32ErzS64GrtZV97ZGQ5ccU_SjpO_W_2A@mail.gmail.com>

On Sun, Jun 14, 2020 at 10:44 AM Duncan Murdoch
<murdoch.duncan at gmail.com> wrote:
[...]
>
> I think the argument was that static builds of the help pages would have
> trouble resolving the links.  With the current system, you can build a
> help page that links to a page in package foo even if package foo is not
> installed yet, and have the link work later after you install foo.

That is true, but it is also not a big problem, I think. The CRAN
Windows R installer does indeed build static help pages by default.
But the built-in web server that serves these works around broken
links by treating them as help topics instead of files. As you know.
:) So this would only be a problem if you wanted to serve the static
help pages with another web server. (Which is not a bad use case, but
then maybe Rd2HTML() can just resolve them as topics and avoid the
broken links.)

Btw. the problem of linking to the wrong page is even worse with
static builds of help pages, because if a link w/o a package (e.g.
\link{filter}) picks up the wrong package at install time, then the
wrong link is hard-coded in the html. If you are building binary
packages, then they will link to the wrong help pages.

WRE says that specifying the package in the link is rarely needed.
This was probably the case some time ago, especially when packages did
not have (compulsory) namespaces. But I am not sure if it still holds.
I would argue that it is better to specify the package you are linking
to. But the newly enforced requirement that we need to link to files
instead of topics makes this more error prone.

Gabor

[...]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jun 14 13:28:03 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 14 Jun 2020 07:28:03 -0400
Subject: [R-pkg-devel] check cross-references error: Non-file
 package-anchored link(s)
In-Reply-To: <CABtg=Kk2V4SWVx-MOQ32ErzS64GrtZV97ZGQ5ccU_SjpO_W_2A@mail.gmail.com>
References: <5F37E69B-BD3D-4B56-8B66-77E4A5EDECF3@gmail.com>
 <408847a9-ac14-c4fb-33d0-0734f180d228@gmail.com>
 <CABtg=K=c8TUAxmv1e2To5A5HHKUTQEA-tNadxUJGuA3eXh1p8A@mail.gmail.com>
 <0df3d1f3-f482-ee96-d6f5-a6aab74810b4@gmail.com>
 <CABtg=Kk2V4SWVx-MOQ32ErzS64GrtZV97ZGQ5ccU_SjpO_W_2A@mail.gmail.com>
Message-ID: <8a25ba2b-3b98-e469-07e4-dfd90d76e37e@gmail.com>

I agree with almost everything you wrote, except one thing:  this isn't 
newly enforced, it has been enforced since the help system began.  What 
I think is new is that there are now tests for it.  Previously those 
links just wouldn't work.

Duncan Murdoch

On 14/06/2020 6:26 a.m., G?bor Cs?rdi wrote:
> On Sun, Jun 14, 2020 at 10:44 AM Duncan Murdoch
> <murdoch.duncan at gmail.com> wrote:
> [...]
>>
>> I think the argument was that static builds of the help pages would have
>> trouble resolving the links.  With the current system, you can build a
>> help page that links to a page in package foo even if package foo is not
>> installed yet, and have the link work later after you install foo.
> 
> That is true, but it is also not a big problem, I think. The CRAN
> Windows R installer does indeed build static help pages by default.
> But the built-in web server that serves these works around broken
> links by treating them as help topics instead of files. As you know.
> :) So this would only be a problem if you wanted to serve the static
> help pages with another web server. (Which is not a bad use case, but
> then maybe Rd2HTML() can just resolve them as topics and avoid the
> broken links.)
> 
> Btw. the problem of linking to the wrong page is even worse with
> static builds of help pages, because if a link w/o a package (e.g.
> \link{filter}) picks up the wrong package at install time, then the
> wrong link is hard-coded in the html. If you are building binary
> packages, then they will link to the wrong help pages.
> 
> WRE says that specifying the package in the link is rarely needed.
> This was probably the case some time ago, especially when packages did
> not have (compulsory) namespaces. But I am not sure if it still holds.
> I would argue that it is better to specify the package you are linking
> to. But the newly enforced requirement that we need to link to files
> instead of topics makes this more error prone.
> 
> Gabor
> 
> [...]
>


From @ubh@d|pd@tt@007 @end|ng |rom gm@||@com  Sun Jun 14 10:55:50 2020
From: @ubh@d|pd@tt@007 @end|ng |rom gm@||@com (Subhadip Datta)
Date: Sun, 14 Jun 2020 14:25:50 +0530
Subject: [R-pkg-devel] Problem with test data folder. R package develpoment
Message-ID: <CABZr5Ry5Z4q2XzYVdOm1DDRtVgMQs2ShEAL-2ZbRAc5MXeqoxQ@mail.gmail.com>

I attached my test data in inst/data but why this warning is showing.
 "Found the following non-empty subdirectories of 'inst' also used by R:
    inst/data
  It is recommended not to interfere with package subdirectories used by
  R."
This is not a problem from my side.  It used the data from that
directory but showed an error for the folder.

-- 

*---------------------------------------------------------------------------------------------------------------------*

*Mr. Subhadip Datta*

--------------------------------------
M.Sc in Remote Sensing and GIS
Vidyasagar University
8348703617
subhadipdatta at live.com
subhadipdatta007 at gmail.com

	[[alternative HTML version deleted]]


From jpr|t|k|n @end|ng |rom pobox@com  Sat Jun 13 19:29:20 2020
From: jpr|t|k|n @end|ng |rom pobox@com (Joshua N Pritikin)
Date: Sat, 13 Jun 2020 13:29:20 -0400
Subject: [R-pkg-devel] 
 [CRAN-pretest-archived] CRAN submission gwsem 2.0.3
In-Reply-To: <01d63da0$Blat.v3.2.16$8d65077c$523031fd@mail.statistik.tu-dortmund.de>
References: <20200608140313.36B4D161E06@xmpalantir.wu.ac.at>
 <01d63da0$Blat.v3.2.16$8d65077c$523031fd@mail.statistik.tu-dortmund.de>
Message-ID: <20200613172920.czyt5q4fn5gowbi6-7118@cocoa>


I'm trying to include vignettes that take much too long for CRAN check.

At the beginning of the Rmarkdown vignette, I use

  is_CRAN <- !identical(Sys.getenv("NOT_CRAN"), "true")
  if (is_CRAN) q()

And then I use

  export NOT_CRAN=true

when I build locally. But CRAN check still complains,

On Mon, Jun 08, 2020 at 04:24:43PM +0200, ligges at statistik.tu-dortmund.de wrote:
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: re-building of vignette outputs, Result: WARNING
>   Error(s) in re-building vignettes:
>     ...
>   --- re-building 'GeneEnvironmentInteraction.Rmd' using rmarkdown
>   --- re-building 'OneFactorModel.Rmd' using rmarkdown
>   --- re-building 'PostGWASprocessing.Rmd' using rmarkdown
>   --- re-building 'ResidualsModel.Rmd' using rmarkdown
>   --- re-building 'StandardGWAS.Rmd' using rmarkdown
>   --- re-building 'TwoFactorModel.Rmd' using rmarkdown
>   --- re-building 'UserSpecifiedGWASModels.Rmd' using rmarkdown
>   --- re-building 'growth.Rmd' using rmarkdown
>   Error: Vignette re-building failed.
>   Execution halted

What's the correct way to avoid CRAN complaints?

-- 
Joshua N. Pritikin, Ph.D.
Virginia Institute for Psychiatric and Behavioral Genetics
Virginia Commonwealth University
PO Box 980126
800 E Leigh St, Biotech One, Suite 1-133
Richmond, VA 23219
http://exuberant-island.surge.sh


From jpr|t|k|n @end|ng |rom pobox@com  Fri Jun 12 17:34:20 2020
From: jpr|t|k|n @end|ng |rom pobox@com (Joshua N Pritikin)
Date: Fri, 12 Jun 2020 11:34:20 -0400
Subject: [R-pkg-devel] 
 [CRAN-pretest-archived] CRAN submission gwsem 2.0.3
In-Reply-To: <01d63da0$Blat.v3.2.16$8d65077c$523031fd@mail.statistik.tu-dortmund.de>
References: <20200608140313.36B4D161E06@xmpalantir.wu.ac.at>
 <01d63da0$Blat.v3.2.16$8d65077c$523031fd@mail.statistik.tu-dortmund.de>
Message-ID: <20200612153420.yqqsz5d2fyhqzkp4-5220@cocoa>


I'm trying to include vignettes that take much too long for CRAN check.

At the beginning of the Rmarkdown vignette, I use

  is_CRAN <- !identical(Sys.getenv("NOT_CRAN"), "true")
  if (is_CRAN) q()

And then I use

  export NOT_CRAN=true

when I build locally. But CRAN check still complains,

On Mon, Jun 08, 2020 at 04:24:43PM +0200, ligges at statistik.tu-dortmund.de wrote:
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: re-building of vignette outputs, Result: WARNING
>   Error(s) in re-building vignettes:
>     ...
>   --- re-building 'GeneEnvironmentInteraction.Rmd' using rmarkdown
>   --- re-building 'OneFactorModel.Rmd' using rmarkdown
>   --- re-building 'PostGWASprocessing.Rmd' using rmarkdown
>   --- re-building 'ResidualsModel.Rmd' using rmarkdown
>   --- re-building 'StandardGWAS.Rmd' using rmarkdown
>   --- re-building 'TwoFactorModel.Rmd' using rmarkdown
>   --- re-building 'UserSpecifiedGWASModels.Rmd' using rmarkdown
>   --- re-building 'growth.Rmd' using rmarkdown
>   Error: Vignette re-building failed.
>   Execution halted

What's the correct way to avoid CRAN complaints?

-- 
Joshua N. Pritikin, Ph.D.
Virginia Institute for Psychiatric and Behavioral Genetics
Virginia Commonwealth University
PO Box 980126
800 E Leigh St, Biotech One, Suite 1-133
Richmond, VA 23219
http://exuberant-island.surge.sh


From jpr|t|k|n @end|ng |rom pobox@com  Fri Jun 12 16:05:07 2020
From: jpr|t|k|n @end|ng |rom pobox@com (Joshua N Pritikin)
Date: Fri, 12 Jun 2020 10:05:07 -0400
Subject: [R-pkg-devel] 
 [CRAN-pretest-archived] CRAN submission gwsem 2.0.3
In-Reply-To: <01d63da0$Blat.v3.2.16$8d65077c$523031fd@mail.statistik.tu-dortmund.de>
References: <20200608140313.36B4D161E06@xmpalantir.wu.ac.at>
 <01d63da0$Blat.v3.2.16$8d65077c$523031fd@mail.statistik.tu-dortmund.de>
Message-ID: <20200612140507.rjkpgej75pzvithx-1366@cocoa>


I'm trying to include vignettes that take much too long for CRAN check.

At the beginning of the Rmarkdown vignette, I use

  is_CRAN <- !identical(Sys.getenv("NOT_CRAN"), "true")
  if (is_CRAN) q()

And then I use

  export NOT_CRAN=true

when I build locally. But CRAN check still complains,

On Mon, Jun 08, 2020 at 04:24:43PM +0200, ligges at statistik.tu-dortmund.de wrote:
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: re-building of vignette outputs, Result: WARNING
>   Error(s) in re-building vignettes:
>     ...
>   --- re-building 'GeneEnvironmentInteraction.Rmd' using rmarkdown
>   --- re-building 'OneFactorModel.Rmd' using rmarkdown
>   --- re-building 'PostGWASprocessing.Rmd' using rmarkdown
>   --- re-building 'ResidualsModel.Rmd' using rmarkdown
>   --- re-building 'StandardGWAS.Rmd' using rmarkdown
>   --- re-building 'TwoFactorModel.Rmd' using rmarkdown
>   --- re-building 'UserSpecifiedGWASModels.Rmd' using rmarkdown
>   --- re-building 'growth.Rmd' using rmarkdown
>   Error: Vignette re-building failed.
>   Execution halted

What's the correct way to avoid CRAN complaints?

-- 
Joshua N. Pritikin, Ph.D.
Virginia Institute for Psychiatric and Behavioral Genetics
Virginia Commonwealth University
PO Box 980126
800 E Leigh St, Biotech One, Suite 1-133
Richmond, VA 23219
http://exuberant-island.surge.sh


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Jun 14 14:44:37 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 14 Jun 2020 05:44:37 -0700
Subject: [R-pkg-devel] 
 Problem with test data folder. R package develpoment
In-Reply-To: <CABZr5Ry5Z4q2XzYVdOm1DDRtVgMQs2ShEAL-2ZbRAc5MXeqoxQ@mail.gmail.com>
References: <CABZr5Ry5Z4q2XzYVdOm1DDRtVgMQs2ShEAL-2ZbRAc5MXeqoxQ@mail.gmail.com>
Message-ID: <128B837A-E98D-43D3-BF73-E2BDC074CDB4@dcn.davis.ca.us>

Use a different name than "data" such as "rawdata" within "inst" to put files that your code refers to using the system.name() function. The directory name "data" is used for a specific purpose as described in the Writing R Extensions manual [1], and if you want to put files in that directory following those special requirements then they must be in the top level "data" directory.

[1] https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Data-in-packages

On June 14, 2020 1:55:50 AM PDT, Subhadip Datta <subhadipdatta007 at gmail.com> wrote:
>I attached my test data in inst/data but why this warning is showing.
>"Found the following non-empty subdirectories of 'inst' also used by R:
>    inst/data
> It is recommended not to interfere with package subdirectories used by
>  R."
>This is not a problem from my side.  It used the data from that
>directory but showed an error for the folder.

-- 
Sent from my phone. Please excuse my brevity.


From |uc@r @end|ng |rom |edor@project@org  Sun Jun 14 14:54:19 2020
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Sun, 14 Jun 2020 14:54:19 +0200
Subject: [R-pkg-devel] 
 [CRAN-pretest-archived] CRAN submission gwsem 2.0.3
In-Reply-To: <20200613172920.czyt5q4fn5gowbi6-7118@cocoa>
References: <20200608140313.36B4D161E06@xmpalantir.wu.ac.at>
 <01d63da0$Blat.v3.2.16$8d65077c$523031fd@mail.statistik.tu-dortmund.de>
 <20200613172920.czyt5q4fn5gowbi6-7118@cocoa>
Message-ID: <CALEXWq2FAkiRfOYS6yGpKP4bRe5C=_m1S-0Xi7yjKj1fHoGR0g@mail.gmail.com>

On Sun, 14 Jun 2020 at 14:32, Joshua N Pritikin <jpritikin at pobox.com> wrote:
>
>
> I'm trying to include vignettes that take much too long for CRAN check.
>
> At the beginning of the Rmarkdown vignette, I use
>
>   is_CRAN <- !identical(Sys.getenv("NOT_CRAN"), "true")
>   if (is_CRAN) q()
>
> And then I use
>
>   export NOT_CRAN=true
>
> when I build locally. But CRAN check still complains,

Because you're just exiting and nothing is generated. Instead, you
should mark all chunks as eval=FALSE. You could use something as
follows in the initial chunk:

if (is_CRAN) knitr::opts_chunk$set(eval = FALSE)

-- 
I?aki ?car


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jun 14 15:14:24 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 14 Jun 2020 09:14:24 -0400
Subject: [R-pkg-devel] 
 Problem with test data folder. R package develpoment
In-Reply-To: <CABZr5Ry5Z4q2XzYVdOm1DDRtVgMQs2ShEAL-2ZbRAc5MXeqoxQ@mail.gmail.com>
References: <CABZr5Ry5Z4q2XzYVdOm1DDRtVgMQs2ShEAL-2ZbRAc5MXeqoxQ@mail.gmail.com>
Message-ID: <ab38ba86-c631-e6a2-97b6-513ce6d56526@gmail.com>

On 14/06/2020 4:55 a.m., Subhadip Datta wrote:
> I attached my test data in inst/data but why this warning is showing.
>   "Found the following non-empty subdirectories of 'inst' also used by R:
>      inst/data
>    It is recommended not to interfere with package subdirectories used by
>    R."
> This is not a problem from my side.  It used the data from that
> directory but showed an error for the folder.
> 

What the message means is that the "data" folder has special meaning in 
R (it's where the data() function finds data), so you should use a 
different name for your own folder.  Or if you want stuff installed in 
data after the package is installed, just put it there in the source, 
not in inst/data:  and follow the rules for that folder from Writing R 
Extensions.

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jun 14 15:17:32 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 14 Jun 2020 09:17:32 -0400
Subject: [R-pkg-devel] 
 [CRAN-pretest-archived] CRAN submission gwsem 2.0.3
In-Reply-To: <20200613172920.czyt5q4fn5gowbi6-7118@cocoa>
References: <20200608140313.36B4D161E06@xmpalantir.wu.ac.at>
 <01d63da0$Blat.v3.2.16$8d65077c$523031fd@mail.statistik.tu-dortmund.de>
 <20200613172920.czyt5q4fn5gowbi6-7118@cocoa>
Message-ID: <db5123a5-4bb5-07e4-9676-2d0e5ed658d3@gmail.com>

On 13/06/2020 1:29 p.m., Joshua N Pritikin wrote:
> 
> I'm trying to include vignettes that take much too long for CRAN check.
> 
> At the beginning of the Rmarkdown vignette, I use
> 
>    is_CRAN <- !identical(Sys.getenv("NOT_CRAN"), "true")
>    if (is_CRAN) q()
> 
> And then I use
> 
>    export NOT_CRAN=true
> 
> when I build locally. But CRAN check still complains,

You shouldn't call q() from a vignette.  Since you're using Rmarkdown, 
you can use a variable for the eval chunk option, e.g. put this in your 
setup chunk:

knitr::opts_chunk$set(eval = !is_CRAN)

Duncan Murdoch

> 
> On Mon, Jun 08, 2020 at 04:24:43PM +0200, ligges at statistik.tu-dortmund.de wrote:
>> Flavor: r-devel-linux-x86_64-debian-gcc
>> Check: re-building of vignette outputs, Result: WARNING
>>    Error(s) in re-building vignettes:
>>      ...
>>    --- re-building 'GeneEnvironmentInteraction.Rmd' using rmarkdown
>>    --- re-building 'OneFactorModel.Rmd' using rmarkdown
>>    --- re-building 'PostGWASprocessing.Rmd' using rmarkdown
>>    --- re-building 'ResidualsModel.Rmd' using rmarkdown
>>    --- re-building 'StandardGWAS.Rmd' using rmarkdown
>>    --- re-building 'TwoFactorModel.Rmd' using rmarkdown
>>    --- re-building 'UserSpecifiedGWASModels.Rmd' using rmarkdown
>>    --- re-building 'growth.Rmd' using rmarkdown
>>    Error: Vignette re-building failed.
>>    Execution halted
> 
> What's the correct way to avoid CRAN complaints?
>


From jpr|t|k|n @end|ng |rom pobox@com  Sun Jun 14 15:44:44 2020
From: jpr|t|k|n @end|ng |rom pobox@com (Joshua N Pritikin)
Date: Sun, 14 Jun 2020 09:44:44 -0400
Subject: [R-pkg-devel] 
 [CRAN-pretest-archived] CRAN submission gwsem 2.0.3
In-Reply-To: <db5123a5-4bb5-07e4-9676-2d0e5ed658d3@gmail.com>
References: <20200608140313.36B4D161E06@xmpalantir.wu.ac.at>
 <01d63da0$Blat.v3.2.16$8d65077c$523031fd@mail.statistik.tu-dortmund.de>
 <20200613172920.czyt5q4fn5gowbi6-7118@cocoa>
 <db5123a5-4bb5-07e4-9676-2d0e5ed658d3@gmail.com>
Message-ID: <20200614134444.6ohddcygbipewtlt@cocoa>

Ah, thank you!

Sorry for the duplicate posts.

On Sun, Jun 14, 2020 at 09:17:32AM -0400, Duncan Murdoch wrote:
> On 13/06/2020 1:29 p.m., Joshua N Pritikin wrote:
> > 
> > I'm trying to include vignettes that take much too long for CRAN check.
> > 
> > At the beginning of the Rmarkdown vignette, I use
> > 
> >    is_CRAN <- !identical(Sys.getenv("NOT_CRAN"), "true")
> >    if (is_CRAN) q()
> > 
> > And then I use
> > 
> >    export NOT_CRAN=true
> > 
> > when I build locally. But CRAN check still complains,
> 
> You shouldn't call q() from a vignette.  Since you're using Rmarkdown, you
> can use a variable for the eval chunk option, e.g. put this in your setup
> chunk:
> 
> knitr::opts_chunk$set(eval = !is_CRAN)


From jpr|t|k|n @end|ng |rom pobox@com  Sun Jun 14 16:59:10 2020
From: jpr|t|k|n @end|ng |rom pobox@com (Joshua N Pritikin)
Date: Sun, 14 Jun 2020 10:59:10 -0400
Subject: [R-pkg-devel] 
 [CRAN-pretest-archived] CRAN submission gwsem 2.0.3
In-Reply-To: <db5123a5-4bb5-07e4-9676-2d0e5ed658d3@gmail.com>
References: <20200608140313.36B4D161E06@xmpalantir.wu.ac.at>
 <01d63da0$Blat.v3.2.16$8d65077c$523031fd@mail.statistik.tu-dortmund.de>
 <20200613172920.czyt5q4fn5gowbi6-7118@cocoa>
 <db5123a5-4bb5-07e4-9676-2d0e5ed658d3@gmail.com>
Message-ID: <20200614145910.j6t5ergniu6g75aa@cocoa>

On Sun, Jun 14, 2020 at 09:17:32AM -0400, Duncan Murdoch wrote:
> Since you're using Rmarkdown, you can use a variable for the eval 
> chunk option, e.g. put this in your setup chunk:
> 
> knitr::opts_chunk$set(eval = !is_CRAN)

This works except for in-text `r 1+1` code fragments. Is there an option 
to make these evaluate to "[MISSING]" or similar?


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jun 14 17:28:17 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 14 Jun 2020 11:28:17 -0400
Subject: [R-pkg-devel] 
 [CRAN-pretest-archived] CRAN submission gwsem 2.0.3
In-Reply-To: <20200614145910.j6t5ergniu6g75aa@cocoa>
References: <20200608140313.36B4D161E06@xmpalantir.wu.ac.at>
 <01d63da0$Blat.v3.2.16$8d65077c$523031fd@mail.statistik.tu-dortmund.de>
 <20200613172920.czyt5q4fn5gowbi6-7118@cocoa>
 <db5123a5-4bb5-07e4-9676-2d0e5ed658d3@gmail.com>
 <20200614145910.j6t5ergniu6g75aa@cocoa>
Message-ID: <f5f63b73-4c48-4639-3fc8-53c188592966@gmail.com>

On 14/06/2020 10:59 a.m., Joshua N Pritikin wrote:
> On Sun, Jun 14, 2020 at 09:17:32AM -0400, Duncan Murdoch wrote:
>> Since you're using Rmarkdown, you can use a variable for the eval
>> chunk option, e.g. put this in your setup chunk:
>>
>> knitr::opts_chunk$set(eval = !is_CRAN)
> 
> This works except for in-text `r 1+1` code fragments. Is there an option
> to make these evaluate to "[MISSING]" or similar?

To suppress evaluation of those, you can use this:

knitr::knit_hooks$set(evaluate.inline = function(x, envir) x)

This will show the code in place of evaluating it and showing its value.
Replace the function value with "[MISSING]" if you don't want to see the 
code.

Duncan


From jpr|t|k|n @end|ng |rom pobox@com  Sun Jun 14 17:38:25 2020
From: jpr|t|k|n @end|ng |rom pobox@com (Joshua N Pritikin)
Date: Sun, 14 Jun 2020 11:38:25 -0400
Subject: [R-pkg-devel] 
 [CRAN-pretest-archived] CRAN submission gwsem 2.0.3
In-Reply-To: <f5f63b73-4c48-4639-3fc8-53c188592966@gmail.com>
References: <20200608140313.36B4D161E06@xmpalantir.wu.ac.at>
 <01d63da0$Blat.v3.2.16$8d65077c$523031fd@mail.statistik.tu-dortmund.de>
 <20200613172920.czyt5q4fn5gowbi6-7118@cocoa>
 <db5123a5-4bb5-07e4-9676-2d0e5ed658d3@gmail.com>
 <20200614145910.j6t5ergniu6g75aa@cocoa>
 <f5f63b73-4c48-4639-3fc8-53c188592966@gmail.com>
Message-ID: <20200614153825.pjjyy3u5wts2tpnh@cocoa>

Ah, brilliant. Thanks.

On Sun, Jun 14, 2020 at 11:28:17AM -0400, Duncan Murdoch wrote:
> On 14/06/2020 10:59 a.m., Joshua N Pritikin wrote:
> > On Sun, Jun 14, 2020 at 09:17:32AM -0400, Duncan Murdoch wrote:
> > > knitr::opts_chunk$set(eval = !is_CRAN)
> > 
> > This works except for in-text `r 1+1` code fragments. Is there an option
> > to make these evaluate to "[MISSING]" or similar?
> 
> To suppress evaluation of those, you can use this:
> 
> knitr::knit_hooks$set(evaluate.inline = function(x, envir) x)


From D@n@Ke||ey @end|ng |rom D@|@C@  Mon Jun 15 13:13:21 2020
From: D@n@Ke||ey @end|ng |rom D@|@C@ (Daniel Kelley)
Date: Mon, 15 Jun 2020 11:13:21 +0000
Subject: [R-pkg-devel] how to prevent a small package from yielding a large
 installed size?
Message-ID: <46FB05FC-30C5-47AD-AB40-AA9CD4457C52@dal.ca>

I am working on a package (https://github.com/ArgoCanada/argoFloats) that has a 412K source tarball (most of which is data; the R code is 176K), but that creates a library .rdb file of MUCH larger size, namely 7.2M.  This file causes a build NOTE, being over the threshold of 1M, and that concerns me in terms of hoped-for submission to CRAN during this summer.

My goal in writing this email is to get some advice regarding reducing the size of the .rds file, if indeed this is a general problem and not an artifact of my (macOS) development environment.

Here's some more detail:

argoFloats depends on some other packages, and so I am wondering whether the large multiplier between R source and .rdb file is because the other sources are dragged in.  I could try moving everything to "Suggests", and use requireNamespace(), but that seems to go against recommendations, if I interpret Wickham and Bryan (https://r-pkgs.org/description.html) correctly.

A possible clue is that I get a large-file note on macOS, but not when I use rhub for test linux builds, or winbuilder for a windows build.  I do not have ready access to either linux or windows machines, to examine those builds in detail.

My thinking is that examination of the .rdb file might help me to learn about problems (e.g. if it holds code from packages I "import" from, that might motivate me to move from "import" to "suggest"). Unfortunately, I have not been able to discover a way to examine that file, which seems to be designed for internal R use.

I am attaching below my signature line the output from sessionInfo(), in case that helps.  The URL I reference in my second paragraph has my DESCRIPTION file, and I will admit that I do not fully understand its nuances.  Note that I use roxygen2 to build documentation and NAMESPACE.

Any advice would be greatly appreciated, and indeed I thank anyone who got to the bottom of this long email.

Dan E. Kelley [he/him/his 314ppm]
Department of Oceanography
Dalhousie University
Halifax, NS, Canada



R version 4.0.1 (2020-06-06)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Catalina 10.15.6

Matrix products: default
BLAS:   /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib

locale:
[1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] argoFloats_0.1.3

loaded via a namespace (and not attached):
 [1] Rcpp_1.0.4.6        pillar_1.4.4        compiler_4.0.1      plyr_1.8.6          class_7.3-17       
 [6] tools_4.0.1         testthat_2.3.2      digest_0.6.25       bit_1.1-15.2        ncdf4_1.17         
[11] oce_1.2-1           memoise_1.1.0       RSQLite_2.2.0       lifecycle_0.2.0     tibble_3.0.1       
[16] gtable_0.3.0        lattice_0.20-41     gsw_1.0-6           pkgconfig_2.0.3     rlang_0.4.6        
[21] DBI_1.1.0           rstudioapi_0.11     curl_4.3            e1071_1.7-3         dplyr_1.0.0        
[26] stringr_1.4.0       raster_3.1-5        generics_0.0.2      vctrs_0.3.1         classInt_0.4-3     
[31] bit64_0.9-7         grid_4.0.1          tidyselect_1.1.0    glue_1.4.1          sf_0.9-4           
[36] R6_2.4.1            sp_1.4-2            marmap_1.0.4        adehabitatMA_0.3.14 blob_1.2.1         
[41] ggplot2_3.3.1       purrr_0.3.4         reshape2_1.4.4      magrittr_1.5        units_0.6-6        
[46] scales_1.1.1        codetools_0.2-16    ellipsis_0.3.1      shape_1.4.4         colorspace_1.4-1   
[51] KernSmooth_2.23-17  stringi_1.4.6       munsell_0.5.0       crayon_1.3.4.9000  


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jun 15 15:50:27 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 15 Jun 2020 09:50:27 -0400
Subject: [R-pkg-devel] 
 how to prevent a small package from yielding a large installed size?
In-Reply-To: <46FB05FC-30C5-47AD-AB40-AA9CD4457C52@dal.ca>
References: <46FB05FC-30C5-47AD-AB40-AA9CD4457C52@dal.ca>
Message-ID: <6b541445-36d8-9f33-e9e8-12f68f5a6d3a@gmail.com>

I can't install your package (I don't have an up to date GDAL), but 
maybe this is some help:

- Package dependencies aren't included, except possibly for static 
linking of C/Fortran/C++ code.  Those normally won't end up in an .rdb file.

- .rdb files are part of the lazy load mechanism.  You can read the 
corresponding .rdx file using readRDS(); it contains information on 
where to look in the .rdb file to find the source of an object.  For 
example, if you have foo.rdb and foo.rdx, then this will tell you what's 
big in your foo.rdb file:

rdx <- readRDS("foo.rdx")
sizes <- sapply(rdx$variables, function(n) n[2])

Now sizes will be a named vector of objects contained in the rdb.  You 
should find that sum(sizes) is similar to the size of the .rdb file, but 
probably a bit smaller, because there are some objects missed by this 
count:  the ones contained in rdx$references.

Duncan Murdoch


On 15/06/2020 7:13 a.m., Daniel Kelley wrote:
> I am working on a package (https://github.com/ArgoCanada/argoFloats) that has a 412K source tarball (most of which is data; the R code is 176K), but that creates a library .rdb file of MUCH larger size, namely 7.2M.  This file causes a build NOTE, being over the threshold of 1M, and that concerns me in terms of hoped-for submission to CRAN during this summer.
> 
> My goal in writing this email is to get some advice regarding reducing the size of the .rds file, if indeed this is a general problem and not an artifact of my (macOS) development environment.
> 
> Here's some more detail:
> 
> argoFloats depends on some other packages, and so I am wondering whether the large multiplier between R source and .rdb file is because the other sources are dragged in.  I could try moving everything to "Suggests", and use requireNamespace(), but that seems to go against recommendations, if I interpret Wickham and Bryan (https://r-pkgs.org/description.html) correctly.
> 
> A possible clue is that I get a large-file note on macOS, but not when I use rhub for test linux builds, or winbuilder for a windows build.  I do not have ready access to either linux or windows machines, to examine those builds in detail.
> 
> My thinking is that examination of the .rdb file might help me to learn about problems (e.g. if it holds code from packages I "import" from, that might motivate me to move from "import" to "suggest"). Unfortunately, I have not been able to discover a way to examine that file, which seems to be designed for internal R use.
> 
> I am attaching below my signature line the output from sessionInfo(), in case that helps.  The URL I reference in my second paragraph has my DESCRIPTION file, and I will admit that I do not fully understand its nuances.  Note that I use roxygen2 to build documentation and NAMESPACE.
> 
> Any advice would be greatly appreciated, and indeed I thank anyone who got to the bottom of this long email.
> 
> Dan E. Kelley [he/him/his 314ppm]
> Department of Oceanography
> Dalhousie University
> Halifax, NS, Canada
> 
> 
> 
> R version 4.0.1 (2020-06-06)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Catalina 10.15.6
> 
> Matrix products: default
> BLAS:   /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
> LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
> 
> locale:
> [1] en_CA.UTF-8/en_CA.UTF-8/en_CA.UTF-8/C/en_CA.UTF-8/en_CA.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> other attached packages:
> [1] argoFloats_0.1.3
> 
> loaded via a namespace (and not attached):
>   [1] Rcpp_1.0.4.6        pillar_1.4.4        compiler_4.0.1      plyr_1.8.6          class_7.3-17
>   [6] tools_4.0.1         testthat_2.3.2      digest_0.6.25       bit_1.1-15.2        ncdf4_1.17
> [11] oce_1.2-1           memoise_1.1.0       RSQLite_2.2.0       lifecycle_0.2.0     tibble_3.0.1
> [16] gtable_0.3.0        lattice_0.20-41     gsw_1.0-6           pkgconfig_2.0.3     rlang_0.4.6
> [21] DBI_1.1.0           rstudioapi_0.11     curl_4.3            e1071_1.7-3         dplyr_1.0.0
> [26] stringr_1.4.0       raster_3.1-5        generics_0.0.2      vctrs_0.3.1         classInt_0.4-3
> [31] bit64_0.9-7         grid_4.0.1          tidyselect_1.1.0    glue_1.4.1          sf_0.9-4
> [36] R6_2.4.1            sp_1.4-2            marmap_1.0.4        adehabitatMA_0.3.14 blob_1.2.1
> [41] ggplot2_3.3.1       purrr_0.3.4         reshape2_1.4.4      magrittr_1.5        units_0.6-6
> [46] scales_1.1.1        codetools_0.2-16    ellipsis_0.3.1      shape_1.4.4         colorspace_1.4-1
> [51] KernSmooth_2.23-17  stringi_1.4.6       munsell_0.5.0       crayon_1.3.4.9000
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Jun 15 16:07:41 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 15 Jun 2020 17:07:41 +0300
Subject: [R-pkg-devel] 
 how to prevent a small package from yielding a large installed size?
In-Reply-To: <46FB05FC-30C5-47AD-AB40-AA9CD4457C52@dal.ca>
References: <46FB05FC-30C5-47AD-AB40-AA9CD4457C52@dal.ca>
Message-ID: <20200615170741.6890bfa6@Tarkus>

On Mon, 15 Jun 2020 11:13:21 +0000
Daniel Kelley <Dan.Kelley at Dal.Ca> wrote:

> A possible clue is that I get a large-file note on macOS, but not
> when I use rhub for test linux builds, or winbuilder for a windows
> build.  I do not have ready access to either linux or windows
> machines, to examine those builds in detail.

For what it's worth, if I build your package on Linux with R 3.6.3 and
--no-build-vignettes, it results in R/argoFloats.rdb being ~2.4M when
installed on either same Linux or R-hub's macOS "10.13.6 High Sierra,
R-release, CRAN's setup" [*]. Perhaps you would be able to find a
difference between artifacts from the R-hub installation and your own.

-- 
Best regards,
Ivan

[*]
https://artifacts.r-hub.io/argoFloats_0.1.3.tar.gz-b35fd40886b0a6c6b1b173a34944df14


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Mon Jun 15 18:05:06 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Mon, 15 Jun 2020 18:05:06 +0200
Subject: [R-pkg-devel] check cross-references error: Non-file
 package-anchored link(s)
In-Reply-To: <8a25ba2b-3b98-e469-07e4-dfd90d76e37e@gmail.com>
References: <5F37E69B-BD3D-4B56-8B66-77E4A5EDECF3@gmail.com>
 <408847a9-ac14-c4fb-33d0-0734f180d228@gmail.com>
 <CABtg=K=c8TUAxmv1e2To5A5HHKUTQEA-tNadxUJGuA3eXh1p8A@mail.gmail.com>
 <0df3d1f3-f482-ee96-d6f5-a6aab74810b4@gmail.com>
 <CABtg=Kk2V4SWVx-MOQ32ErzS64GrtZV97ZGQ5ccU_SjpO_W_2A@mail.gmail.com>
 <8a25ba2b-3b98-e469-07e4-dfd90d76e37e@gmail.com>
Message-ID: <24295.39986.892565.475924@stat.math.ethz.ch>

>>>>> Duncan Murdoch   on Sun, 14 Jun 2020 07:28:03 -0400 writes:

    > I agree with almost everything you wrote, except one thing:  this isn't 
    > newly enforced, it has been enforced since the help system began.  What 
    > I think is new is that there are now tests for it.  Previously those 
    > links just wouldn't work.

    > Duncan Murdoch

Yes, to all... including Duncan's agreement with G?bor.

Also, Duncan M earlier did mention that he had wanted to
*change* the link-to-file behavior for these cases (when he
wrote most of the Rd2html source code) but somehow did not get it.

And that's why we had partial workarounds (as the dynamic server
still finding the links under some circumstances).

My personal opinions was also that "we" (the R community; i.e.,
people providing good patches to the R sources / collaborating
with R core / ...) should rather work to fix the current
design/implementation "infelicity" than the current checks
starting to enforce something which is really a wart in my view,
and indeed, as G?bor also notes, will create R source
documentation that depends on implementation details of other
package's documentation.
I don't like it either, not at all.

Martin

    > On 14/06/2020 6:26 a.m., G?bor Cs?rdi wrote:
    >> On Sun, Jun 14, 2020 at 10:44 AM Duncan Murdoch
    >> <murdoch.duncan at gmail.com> wrote:
    >> [...]
    >>> 
    >>> I think the argument was that static builds of the help pages would have
    >>> trouble resolving the links.  With the current system, you can build a
    >>> help page that links to a page in package foo even if package foo is not
    >>> installed yet, and have the link work later after you install foo.
    >> 
    >> That is true, but it is also not a big problem, I think. The CRAN
    >> Windows R installer does indeed build static help pages by default.
    >> But the built-in web server that serves these works around broken
    >> links by treating them as help topics instead of files. As you know.
    >> :) So this would only be a problem if you wanted to serve the static
    >> help pages with another web server. (Which is not a bad use case, but
    >> then maybe Rd2HTML() can just resolve them as topics and avoid the
    >> broken links.)
    >> 
    >> Btw. the problem of linking to the wrong page is even worse with
    >> static builds of help pages, because if a link w/o a package (e.g.
    >> \link{filter}) picks up the wrong package at install time, then the
    >> wrong link is hard-coded in the html. If you are building binary
    >> packages, then they will link to the wrong help pages.
    >> 
    >> WRE says that specifying the package in the link is rarely needed.
    >> This was probably the case some time ago, especially when packages did
    >> not have (compulsory) namespaces. But I am not sure if it still holds.
    >> I would argue that it is better to specify the package you are linking
    >> to. But the newly enforced requirement that we need to link to files
    >> instead of topics makes this more error prone.
    >> 
    >> Gabor
    >> 
    >> [...]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jun 15 18:30:05 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 15 Jun 2020 12:30:05 -0400
Subject: [R-pkg-devel] check cross-references error: Non-file
 package-anchored link(s)
In-Reply-To: <24295.39986.892565.475924@stat.math.ethz.ch>
References: <5F37E69B-BD3D-4B56-8B66-77E4A5EDECF3@gmail.com>
 <408847a9-ac14-c4fb-33d0-0734f180d228@gmail.com>
 <CABtg=K=c8TUAxmv1e2To5A5HHKUTQEA-tNadxUJGuA3eXh1p8A@mail.gmail.com>
 <0df3d1f3-f482-ee96-d6f5-a6aab74810b4@gmail.com>
 <CABtg=Kk2V4SWVx-MOQ32ErzS64GrtZV97ZGQ5ccU_SjpO_W_2A@mail.gmail.com>
 <8a25ba2b-3b98-e469-07e4-dfd90d76e37e@gmail.com>
 <24295.39986.892565.475924@stat.math.ethz.ch>
Message-ID: <ed9be12f-5b74-ab7d-0846-2274718c881d@gmail.com>

On 15/06/2020 12:05 p.m., Martin Maechler wrote:
>>>>>> Duncan Murdoch   on Sun, 14 Jun 2020 07:28:03 -0400 writes:
> 
>      > I agree with almost everything you wrote, except one thing:  this isn't
>      > newly enforced, it has been enforced since the help system began.  What
>      > I think is new is that there are now tests for it.  Previously those
>      > links just wouldn't work.
> 
>      > Duncan Murdoch
> 
> Yes, to all... including Duncan's agreement with G?bor.
> 
> Also, Duncan M earlier did mention that he had wanted to
> *change* the link-to-file behavior for these cases (when he
> wrote most of the Rd2html source code) but somehow did not get it.

Actually, I don't think I pushed for this change at the time (or at 
least I didn't push much).  I just wish now that I had, because I think 
it will be harder to do it now than it would have been then.

Duncan

> 
> And that's why we had partial workarounds (as the dynamic server
> still finding the links under some circumstances).
> 
> My personal opinions was also that "we" (the R community; i.e.,
> people providing good patches to the R sources / collaborating
> with R core / ...) should rather work to fix the current
> design/implementation "infelicity" than the current checks
> starting to enforce something which is really a wart in my view,
> and indeed, as G?bor also notes, will create R source
> documentation that depends on implementation details of other
> package's documentation.
> I don't like it either, not at all.
> 
> Martin
> 
>      > On 14/06/2020 6:26 a.m., G?bor Cs?rdi wrote:
>      >> On Sun, Jun 14, 2020 at 10:44 AM Duncan Murdoch
>      >> <murdoch.duncan at gmail.com> wrote:
>      >> [...]
>      >>>
>      >>> I think the argument was that static builds of the help pages would have
>      >>> trouble resolving the links.  With the current system, you can build a
>      >>> help page that links to a page in package foo even if package foo is not
>      >>> installed yet, and have the link work later after you install foo.
>      >>
>      >> That is true, but it is also not a big problem, I think. The CRAN
>      >> Windows R installer does indeed build static help pages by default.
>      >> But the built-in web server that serves these works around broken
>      >> links by treating them as help topics instead of files. As you know.
>      >> :) So this would only be a problem if you wanted to serve the static
>      >> help pages with another web server. (Which is not a bad use case, but
>      >> then maybe Rd2HTML() can just resolve them as topics and avoid the
>      >> broken links.)
>      >>
>      >> Btw. the problem of linking to the wrong page is even worse with
>      >> static builds of help pages, because if a link w/o a package (e.g.
>      >> \link{filter}) picks up the wrong package at install time, then the
>      >> wrong link is hard-coded in the html. If you are building binary
>      >> packages, then they will link to the wrong help pages.
>      >>
>      >> WRE says that specifying the package in the link is rarely needed.
>      >> This was probably the case some time ago, especially when packages did
>      >> not have (compulsory) namespaces. But I am not sure if it still holds.
>      >> I would argue that it is better to specify the package you are linking
>      >> to. But the newly enforced requirement that we need to link to files
>      >> instead of topics makes this more error prone.
>      >>
>      >> Gabor
>      >>
>      >> [...]
>


From D@n@Ke||ey @end|ng |rom D@|@C@  Mon Jun 15 18:30:15 2020
From: D@n@Ke||ey @end|ng |rom D@|@C@ (Daniel Kelley)
Date: Mon, 15 Jun 2020 16:30:15 +0000
Subject: [R-pkg-devel] 
 how to prevent a small package from yielding a large installed size?
In-Reply-To: <6b541445-36d8-9f33-e9e8-12f68f5a6d3a@gmail.com>
References: <46FB05FC-30C5-47AD-AB40-AA9CD4457C52@dal.ca>
 <6b541445-36d8-9f33-e9e8-12f68f5a6d3a@gmail.com>
Message-ID: <58D17BBB-ECC1-4422-923A-F0995ED9757E@dal.ca>

Duncan, thanks very much for that very helpful hint.  I got as follows.  My guess is that the first column in rdx$variables is an address offset, and so it seems that the lion's share of the storage is dedicated to items with names starting with a decimal point.  For example, the "[[" item is at offset of nearly 4M.  I may try fiddling with my code in which I specialize that method, to see whether I can reduce the memory footprint.  From what I can gather, both linux and windows build argoFloats into a package with R directory of about 2.5M size, which is a lot better than what I get in macOS but still over the warning threshold (I think) and therefore I worry about CRAN acceptance.

R version 4.0.1 (2020-06-06) -- "See Things Now"
Copyright (C) 2020 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin17.0 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> rdx <- readRDS("~/Library/R/4.0/library/argoFloats/R/argoFloats.rdx")
> sizes <- sapply(rdx$variables, function(n) n[2])
> cat(str(rdx$variables))
List of 23
 $ .__C__argoFloats        : int [1:2] 0 299
 $ .__NAMESPACE__.         : int [1:2] 1431 51
 $ .__S3MethodsTable__.    : int [1:2] 1611 51
 $ .__T__[[:base           : int [1:2] 3914410 51
 $ .__T__initialize:methods: int [1:2] 4075727 53
 $ .__T__merge:base        : int [1:2] 4174252 53
 $ .__T__plot:base         : int [1:2] 6684924 53
 $ .__T__show:methods      : int [1:2] 6761290 53
 $ .__T__subset:base       : int [1:2] 7255136 53
 $ .__T__summary:base      : int [1:2] 7476028 53
 $ .packageName            : int [1:2] 7476081 54
 $ argoFloatsDebug         : int [1:2] 7476135 2035
 $ argoUseAdjusted         : int [1:2] 7478170 3736
 $ downloadWithRetries     : int [1:2] 7481906 3369
 $ geographical            : int [1:2] 7485275 40
 $ getIndex                : int [1:2] 7485315 9870
 $ getProfileFromUrl       : int [1:2] 7495185 1337
 $ getProfiles             : int [1:2] 7496522 2843
 $ merge                   : int [1:2] 7499365 455
 $ plot                    : int [1:2] 7499820 455
 $ readProfiles            : int [1:2] 7500275 6887
 $ subset                  : int [1:2] 7507162 443
 $ summary                 : int [1:2] 7507605 447
> sum(sizes)
[1] 32741
> system("ls -l ~/Library/R/4.0/library/argoFloats/R/argoFloats.rdb")
-rw-r--r--  1 kelley  staff  7508052 15 Jun 07:47 /Users/kelley/Library/R/4.0/library/argoFloats/R/argoFloats.rdb
>







On Jun 15, 2020, at 10:50 AM, Duncan Murdoch <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>> wrote:

rdx <- readRDS("foo.rdx")
sizes <- sapply(rdx$variables, function(n) n[2])


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jun 15 18:52:20 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 15 Jun 2020 12:52:20 -0400
Subject: [R-pkg-devel] 
 how to prevent a small package from yielding a large installed size?
In-Reply-To: <58D17BBB-ECC1-4422-923A-F0995ED9757E@dal.ca>
References: <46FB05FC-30C5-47AD-AB40-AA9CD4457C52@dal.ca>
 <6b541445-36d8-9f33-e9e8-12f68f5a6d3a@gmail.com>
 <58D17BBB-ECC1-4422-923A-F0995ED9757E@dal.ca>
Message-ID: <c54ef69d-d18e-dece-07f4-ca21a70d825f@gmail.com>

On 15/06/2020 12:30 p.m., Daniel Kelley wrote:
> Duncan, thanks very much for that very helpful hint. ?I got as follows. 
>  ?My guess is that the first column in rdx$variables is an address 
> offset, and so it seems that the lion's share of the storage is 
> dedicated to items with names starting with a decimal point. ?For 
> example, the "[[" item is at offset of nearly 4M. ?I may try fiddling 
> with my code in which I specialize that method, to see whether I can 
> reduce the memory footprint. ?From what I can gather, both linux and 
> windows build argoFloats into a package with R directory of about 2.5M 
> size, which is a lot better than what I get in macOS but still over the 
> warning threshold (I think) and therefore I worry about CRAN acceptance.

The second column is the size, so actually the lion's share is dedicated 
to things that are not being shown.  They are indexed in the 
rdx$references list, and are probably going to be harder to track down, 
because they probably don't have names assigned by you.

For example, in the rgl package, I see

 > rdx$references
$`env::1`
[1]  661 1037

$`env::10`
[1] 123952    221

$`env::11`
[1] 126378    224

$`env::12`
[1] 128575    226

[ many more deleted ]

Presumably `env::1` is an environment which might be referenced by 
several of the functions, and I'm guessing that one of yours is really 
big.  This can happen accidentally:  you have a temporary local variable 
in a function and create and save another function, or a formula, or 
some other environment-using object, and save the useless local variable 
along with it.

I don't have a good suggestion for figuring out what's in the bad 
environment; maybe someone else can suggest how to read an object from 
the .rdb file using R code.  Internally R uses C code for this.

Duncan Murdoch


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Jun 15 19:24:55 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 15 Jun 2020 20:24:55 +0300
Subject: [R-pkg-devel] 
 how to prevent a small package from yielding a large installed size?
In-Reply-To: <c54ef69d-d18e-dece-07f4-ca21a70d825f@gmail.com>
References: <46FB05FC-30C5-47AD-AB40-AA9CD4457C52@dal.ca>
 <6b541445-36d8-9f33-e9e8-12f68f5a6d3a@gmail.com>
 <58D17BBB-ECC1-4422-923A-F0995ED9757E@dal.ca>
 <c54ef69d-d18e-dece-07f4-ca21a70d825f@gmail.com>
Message-ID: <20200615202455.4ad6e7b0@Tarkus>

On Mon, 15 Jun 2020 12:52:20 -0400
Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> maybe someone else can suggest how to read an object from 
> the .rdb file using R code.  Internally R uses C code for this.

This function seems to work for me:

# filename: the .rdb file
# offset, size: the pair of values from the .rdx
# type: 'gzip' if $compressed is TRUE, 'bzip2' for 2, 'xz' for 3
readRDB <- function(filename, offset, size, type = 'gzip') {
	f <- file(filename, 'rb')
	on.exit(close(f))
	seek(f, offset + 4)
	unserialize(memDecompress(readBin(f, 'raw', size - 4), type))
}

-- 
Best regards,
Ivan


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jun 15 21:12:53 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 15 Jun 2020 15:12:53 -0400
Subject: [R-pkg-devel] 
 how to prevent a small package from yielding a large installed size?
In-Reply-To: <20200615202455.4ad6e7b0@Tarkus>
References: <46FB05FC-30C5-47AD-AB40-AA9CD4457C52@dal.ca>
 <6b541445-36d8-9f33-e9e8-12f68f5a6d3a@gmail.com>
 <58D17BBB-ECC1-4422-923A-F0995ED9757E@dal.ca>
 <c54ef69d-d18e-dece-07f4-ca21a70d825f@gmail.com>
 <20200615202455.4ad6e7b0@Tarkus>
Message-ID: <dbe037cd-9aa9-38ed-bc62-c236a7560b64@gmail.com>

On 15/06/2020 1:24 p.m., Ivan Krylov wrote:
> On Mon, 15 Jun 2020 12:52:20 -0400
> Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
>> maybe someone else can suggest how to read an object from
>> the .rdb file using R code.  Internally R uses C code for this.
> 
> This function seems to work for me:
> 
> # filename: the .rdb file
> # offset, size: the pair of values from the .rdx
> # type: 'gzip' if $compressed is TRUE, 'bzip2' for 2, 'xz' for 3
> readRDB <- function(filename, offset, size, type = 'gzip') {
> 	f <- file(filename, 'rb')
> 	on.exit(close(f))
> 	seek(f, offset + 4)
> 	unserialize(memDecompress(readBin(f, 'raw', size - 4), type))
> }
> 

Thanks, though it didn't work for me.  I get

Error in unserialize(memDecompress(readBin(f, "raw", size - 4), type)) :
   no restore method available

on every object I tried.  However, maybe Dan will have better luck.

Duncan Murdoch


From D@n@Ke||ey @end|ng |rom D@|@C@  Mon Jun 15 21:34:09 2020
From: D@n@Ke||ey @end|ng |rom D@|@C@ (Daniel Kelley)
Date: Mon, 15 Jun 2020 19:34:09 +0000
Subject: [R-pkg-devel] 
 how to prevent a small package from yielding a large installed size?
In-Reply-To: <dbe037cd-9aa9-38ed-bc62-c236a7560b64@gmail.com>
References: <46FB05FC-30C5-47AD-AB40-AA9CD4457C52@dal.ca>
 <6b541445-36d8-9f33-e9e8-12f68f5a6d3a@gmail.com>
 <58D17BBB-ECC1-4422-923A-F0995ED9757E@dal.ca>
 <c54ef69d-d18e-dece-07f4-ca21a70d825f@gmail.com>
 <20200615202455.4ad6e7b0@Tarkus>
 <dbe037cd-9aa9-38ed-bc62-c236a7560b64@gmail.com>
Message-ID: <10F4A8AF-42E6-4BC5-8FEE-A50D54B48E17@dal.ca>

I found as Duncan, but then I saw https://stackoverflow.com/questions/54144239/how-to-use-saverds-refhook-parameter and found more info as follows.  (It will take me a while to go through the output, but basically I am seeing code from the "oce" package, which makes me think I ought to get rid of the "Imports:" listing in my DESCRIPTION and instead use "Suggests:" and then grab things at runtime, as needed.  Maybe that will trim down the rds file, e.g. I see in the output from below about 1000 lines that correspond to a particular oce function (or set of specialized versions of a generic, actually), which yields size 38649 in a references$`env` entry.

unser <- function(s){
  i <- as.numeric(s)
  return(rdx$variables[[i]])
}

readRDB <- function(filename, offset, size, type = 'gzip') {
       f <- file(filename, 'rb')
       on.exit(close(f))
       seek(f, offset + 4)
       unserialize(memDecompress(readBin(f, 'raw', size - 4), type), refhook=unser)
}



Dan E. Kelley [he/him/his 314ppm]
Professor and Senator
Department of Oceanography
Dalhousie University
PO BOX 15000
Halifax, NS, Canada B3H 4R2
(902)494-1694  Dan.Kelley at Dal.CA<mailto:Dan.Kelley at Dal.CA>









On Jun 15, 2020, at 4:12 PM, Duncan Murdoch <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>> wrote:

CAUTION: The Sender of this email is not from within Dalhousie.

On 15/06/2020 1:24 p.m., Ivan Krylov wrote:
On Mon, 15 Jun 2020 12:52:20 -0400
Duncan Murdoch <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>> wrote:

maybe someone else can suggest how to read an object from
the .rdb file using R code.  Internally R uses C code for this.

This function seems to work for me:

# filename: the .rdb file
# offset, size: the pair of values from the .rdx
# type: 'gzip' if $compressed is TRUE, 'bzip2' for 2, 'xz' for 3
readRDB <- function(filename, offset, size, type = 'gzip') {
     f <- file(filename, 'rb')
     on.exit(close(f))
     seek(f, offset + 4)
     unserialize(memDecompress(readBin(f, 'raw', size - 4), type))
}


Thanks, though it didn't work for me.  I get

Error in unserialize(memDecompress(readBin(f, "raw", size - 4), type)) :
 no restore method available

on every object I tried.  However, maybe Dan will have better luck.

Duncan Murdoch


	[[alternative HTML version deleted]]


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Mon Jun 15 23:50:36 2020
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Mon, 15 Jun 2020 23:50:36 +0200
Subject: [R-pkg-devel] 
 how to prevent a small package from yielding a large installed size?
In-Reply-To: <c54ef69d-d18e-dece-07f4-ca21a70d825f@gmail.com>
References: <46FB05FC-30C5-47AD-AB40-AA9CD4457C52@dal.ca>
 <6b541445-36d8-9f33-e9e8-12f68f5a6d3a@gmail.com>
 <58D17BBB-ECC1-4422-923A-F0995ED9757E@dal.ca>
 <c54ef69d-d18e-dece-07f4-ca21a70d825f@gmail.com>
Message-ID: <78e0db6b-5510-6b4f-8bde-79cdf9cb59b7@gmail.com>

On 6/15/20 6:52 PM, Duncan Murdoch wrote:
> On 15/06/2020 12:30 p.m., Daniel Kelley wrote:
>> Duncan, thanks very much for that very helpful hint. ?I got as 
>> follows. ??My guess is that the first column in rdx$variables is an 
>> address offset, and so it seems that the lion's share of the storage 
>> is dedicated to items with names starting with a decimal point. ?For 
>> example, the "[[" item is at offset of nearly 4M. ?I may try fiddling 
>> with my code in which I specialize that method, to see whether I can 
>> reduce the memory footprint. ?From what I can gather, both linux and 
>> windows build argoFloats into a package with R directory of about 
>> 2.5M size, which is a lot better than what I get in macOS but still 
>> over the warning threshold (I think) and therefore I worry about CRAN 
>> acceptance.
>
> The second column is the size, so actually the lion's share is 
> dedicated to things that are not being shown.? They are indexed in the 
> rdx$references list, and are probably going to be harder to track 
> down, because they probably don't have names assigned by you.
>
> For example, in the rgl package, I see
>
> > rdx$references
> $`env::1`
> [1]? 661 1037
>
> $`env::10`
> [1] 123952??? 221
>
> $`env::11`
> [1] 126378??? 224
>
> $`env::12`
> [1] 128575??? 226
>
> [ many more deleted ]
>
> Presumably `env::1` is an environment which might be referenced by 
> several of the functions, and I'm guessing that one of yours is really 
> big.? This can happen accidentally:? you have a temporary local 
> variable in a function and create and save another function, or a 
> formula, or some other environment-using object, and save the useless 
> local variable along with it.
>
> I don't have a good suggestion for figuring out what's in the bad 
> environment; maybe someone else can suggest how to read an object from 
> the .rdb file using R code.? Internally R uses C code for this.

I think this can be done using lazyLoadDBfetch(key, file, compressed, 
hook). "key" is c(128575L, 226L) for "env::12" above. See 
library/base/R/lazyload.R. "file" is the .RDB file, "compressed" is 
TRUE, "envhook" for this can be "function(x) NULL"

Tomas

>
> Duncan Murdoch
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From n@r@@ @end|ng |rom @t@n|ord@edu  Tue Jun 16 00:03:31 2020
From: n@r@@ @end|ng |rom @t@n|ord@edu (Balasubramanian Narasimhan)
Date: Mon, 15 Jun 2020 15:03:31 -0700
Subject: [R-pkg-devel] Uncaught use of internal functions from other
 packages in R CMD check
Message-ID: <464f3fed-49de-14b7-88b5-6a4288fec798@stanford.edu>

At least one package on CRAN uses

get("foo", envir=asNamespace("imported_package"))

and passes check.

Is this known?

-Naras


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jun 16 00:42:10 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 15 Jun 2020 15:42:10 -0700
Subject: [R-pkg-devel] Uncaught use of internal functions from other
 packages in R CMD check
In-Reply-To: <464f3fed-49de-14b7-88b5-6a4288fec798@stanford.edu>
References: <464f3fed-49de-14b7-88b5-6a4288fec798@stanford.edu>
Message-ID: <CAGxFJbRJpfo3iPnQLZX3+dUPpxv_7A+AeGQ=fPZu8=EKdstjxw@mail.gmail.com>

Do note that ?asNamespace says:
"Not **intended** to be called directly," (emphasis added)
but not  "should never be called directly" or some such. I don't know if
this makes a difference to package checking, but it isn't clear to me that
it would.

Cheers,
Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Jun 15, 2020 at 3:03 PM Balasubramanian Narasimhan <
naras at stanford.edu> wrote:

> At least one package on CRAN uses
>
> get("foo", envir=asNamespace("imported_package"))
>
> and passes check.
>
> Is this known?
>
> -Naras
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From d@v|dhughjone@ @end|ng |rom gm@||@com  Tue Jun 16 08:50:34 2020
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Tue, 16 Jun 2020 07:50:34 +0100
Subject: [R-pkg-devel] check cross-references error: Non-file
 package-anchored link(s)
In-Reply-To: <ed9be12f-5b74-ab7d-0846-2274718c881d@gmail.com>
References: <5F37E69B-BD3D-4B56-8B66-77E4A5EDECF3@gmail.com>
 <408847a9-ac14-c4fb-33d0-0734f180d228@gmail.com>
 <CABtg=K=c8TUAxmv1e2To5A5HHKUTQEA-tNadxUJGuA3eXh1p8A@mail.gmail.com>
 <0df3d1f3-f482-ee96-d6f5-a6aab74810b4@gmail.com>
 <CABtg=Kk2V4SWVx-MOQ32ErzS64GrtZV97ZGQ5ccU_SjpO_W_2A@mail.gmail.com>
 <8a25ba2b-3b98-e469-07e4-dfd90d76e37e@gmail.com>
 <24295.39986.892565.475924@stat.math.ethz.ch>
 <ed9be12f-5b74-ab7d-0846-2274718c881d@gmail.com>
Message-ID: <CAARY7kgE6=dU_5aGvXQQ7pXR3d-Ugr_0PExpPPRPkMRm6wraaA@mail.gmail.com>

On this note, I just got

Non-file package-anchored link(s) in documentation object
'brk_width-for-datetime.Rd':
  ?[lubridate:%m+%]{lubridate::add_with_rollback()}?

The correct filename appears to be %m+% in the lubridate help. Can anyone
tell me the right way to format this? I would work it out myself, but the
check didn't cause problems on the r-devel systems I tested with, so I'd be
testing blind.

Cheers,
David


On Mon, 15 Jun 2020 at 17:30, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 15/06/2020 12:05 p.m., Martin Maechler wrote:
> >>>>>> Duncan Murdoch   on Sun, 14 Jun 2020 07:28:03 -0400 writes:
> >
> >      > I agree with almost everything you wrote, except one thing:  this
> isn't
> >      > newly enforced, it has been enforced since the help system
> began.  What
> >      > I think is new is that there are now tests for it.  Previously
> those
> >      > links just wouldn't work.
> >
> >      > Duncan Murdoch
> >
> > Yes, to all... including Duncan's agreement with G?bor.
> >
> > Also, Duncan M earlier did mention that he had wanted to
> > *change* the link-to-file behavior for these cases (when he
> > wrote most of the Rd2html source code) but somehow did not get it.
>
> Actually, I don't think I pushed for this change at the time (or at
> least I didn't push much).  I just wish now that I had, because I think
> it will be harder to do it now than it would have been then.
>
> Duncan
>
> >
> > And that's why we had partial workarounds (as the dynamic server
> > still finding the links under some circumstances).
> >
> > My personal opinions was also that "we" (the R community; i.e.,
> > people providing good patches to the R sources / collaborating
> > with R core / ...) should rather work to fix the current
> > design/implementation "infelicity" than the current checks
> > starting to enforce something which is really a wart in my view,
> > and indeed, as G?bor also notes, will create R source
> > documentation that depends on implementation details of other
> > package's documentation.
> > I don't like it either, not at all.
> >
> > Martin
> >
> >      > On 14/06/2020 6:26 a.m., G?bor Cs?rdi wrote:
> >      >> On Sun, Jun 14, 2020 at 10:44 AM Duncan Murdoch
> >      >> <murdoch.duncan at gmail.com> wrote:
> >      >> [...]
> >      >>>
> >      >>> I think the argument was that static builds of the help pages
> would have
> >      >>> trouble resolving the links.  With the current system, you can
> build a
> >      >>> help page that links to a page in package foo even if package
> foo is not
> >      >>> installed yet, and have the link work later after you install
> foo.
> >      >>
> >      >> That is true, but it is also not a big problem, I think. The CRAN
> >      >> Windows R installer does indeed build static help pages by
> default.
> >      >> But the built-in web server that serves these works around broken
> >      >> links by treating them as help topics instead of files. As you
> know.
> >      >> :) So this would only be a problem if you wanted to serve the
> static
> >      >> help pages with another web server. (Which is not a bad use
> case, but
> >      >> then maybe Rd2HTML() can just resolve them as topics and avoid
> the
> >      >> broken links.)
> >      >>
> >      >> Btw. the problem of linking to the wrong page is even worse with
> >      >> static builds of help pages, because if a link w/o a package
> (e.g.
> >      >> \link{filter}) picks up the wrong package at install time, then
> the
> >      >> wrong link is hard-coded in the html. If you are building binary
> >      >> packages, then they will link to the wrong help pages.
> >      >>
> >      >> WRE says that specifying the package in the link is rarely
> needed.
> >      >> This was probably the case some time ago, especially when
> packages did
> >      >> not have (compulsory) namespaces. But I am not sure if it still
> holds.
> >      >> I would argue that it is better to specify the package you are
> linking
> >      >> to. But the newly enforced requirement that we need to link to
> files
> >      >> instead of topics makes this more error prone.
> >      >>
> >      >> Gabor
> >      >>
> >      >> [...]
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Tue Jun 16 09:36:05 2020
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Tue, 16 Jun 2020 07:36:05 +0000
Subject: [R-pkg-devel] check cross-references error: Non-file
 package-anchored link(s)
In-Reply-To: <CAARY7kgE6=dU_5aGvXQQ7pXR3d-Ugr_0PExpPPRPkMRm6wraaA@mail.gmail.com>
References: <5F37E69B-BD3D-4B56-8B66-77E4A5EDECF3@gmail.com>
 <408847a9-ac14-c4fb-33d0-0734f180d228@gmail.com>
 <CABtg=K=c8TUAxmv1e2To5A5HHKUTQEA-tNadxUJGuA3eXh1p8A@mail.gmail.com>
 <0df3d1f3-f482-ee96-d6f5-a6aab74810b4@gmail.com>
 <CABtg=Kk2V4SWVx-MOQ32ErzS64GrtZV97ZGQ5ccU_SjpO_W_2A@mail.gmail.com>
 <8a25ba2b-3b98-e469-07e4-dfd90d76e37e@gmail.com>
 <24295.39986.892565.475924@stat.math.ethz.ch>
 <ed9be12f-5b74-ab7d-0846-2274718c881d@gmail.com>
 <CAARY7kgE6=dU_5aGvXQQ7pXR3d-Ugr_0PExpPPRPkMRm6wraaA@mail.gmail.com>
Message-ID: <HE1PR0102MB3258E094184B5D2AABCB127DAE9D0@HE1PR0102MB3258.eurprd01.prod.exchangelabs.com>

The Rd file is mplus.Rd, so   ?[lubridate:mplus]{lubridate::add_with_rollback()}? would do. 

Georgi Boshnakov

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of David Hugh-Jones
Sent: 16 June 2020 07:51
To: Duncan Murdoch <murdoch.duncan at gmail.com>
Cc: List r-package-devel <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] check cross-references error: Non-file package-anchored link(s)

On this note, I just got

Non-file package-anchored link(s) in documentation object
'brk_width-for-datetime.Rd':
  ?[lubridate:%m+%]{lubridate::add_with_rollback()}?

The correct filename appears to be %m+% in the lubridate help. Can anyone tell me the right way to format this? I would work it out myself, but the check didn't cause problems on the r-devel systems I tested with, so I'd be testing blind.

Cheers,
David


On Mon, 15 Jun 2020 at 17:30, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 15/06/2020 12:05 p.m., Martin Maechler wrote:
> >>>>>> Duncan Murdoch   on Sun, 14 Jun 2020 07:28:03 -0400 writes:
> >
> >      > I agree with almost everything you wrote, except one thing:  
> > this
> isn't
> >      > newly enforced, it has been enforced since the help system
> began.  What
> >      > I think is new is that there are now tests for it.  
> > Previously
> those
> >      > links just wouldn't work.
> >
> >      > Duncan Murdoch
> >
> > Yes, to all... including Duncan's agreement with G?bor.
> >
> > Also, Duncan M earlier did mention that he had wanted to
> > *change* the link-to-file behavior for these cases (when he wrote 
> > most of the Rd2html source code) but somehow did not get it.
>
> Actually, I don't think I pushed for this change at the time (or at 
> least I didn't push much).  I just wish now that I had, because I 
> think it will be harder to do it now than it would have been then.
>
> Duncan
>
> >
> > And that's why we had partial workarounds (as the dynamic server 
> > still finding the links under some circumstances).
> >
> > My personal opinions was also that "we" (the R community; i.e., 
> > people providing good patches to the R sources / collaborating with 
> > R core / ...) should rather work to fix the current 
> > design/implementation "infelicity" than the current checks starting 
> > to enforce something which is really a wart in my view, and indeed, 
> > as G?bor also notes, will create R source documentation that depends 
> > on implementation details of other package's documentation.
> > I don't like it either, not at all.
> >
> > Martin
> >
> >      > On 14/06/2020 6:26 a.m., G?bor Cs?rdi wrote:
> >      >> On Sun, Jun 14, 2020 at 10:44 AM Duncan Murdoch
> >      >> <murdoch.duncan at gmail.com> wrote:
> >      >> [...]
> >      >>>
> >      >>> I think the argument was that static builds of the help 
> > pages
> would have
> >      >>> trouble resolving the links.  With the current system, you 
> > can
> build a
> >      >>> help page that links to a page in package foo even if 
> > package
> foo is not
> >      >>> installed yet, and have the link work later after you 
> > install
> foo.
> >      >>
> >      >> That is true, but it is also not a big problem, I think. The CRAN
> >      >> Windows R installer does indeed build static help pages by
> default.
> >      >> But the built-in web server that serves these works around broken
> >      >> links by treating them as help topics instead of files. As 
> > you
> know.
> >      >> :) So this would only be a problem if you wanted to serve 
> > the
> static
> >      >> help pages with another web server. (Which is not a bad use
> case, but
> >      >> then maybe Rd2HTML() can just resolve them as topics and 
> > avoid
> the
> >      >> broken links.)
> >      >>
> >      >> Btw. the problem of linking to the wrong page is even worse with
> >      >> static builds of help pages, because if a link w/o a package
> (e.g.
> >      >> \link{filter}) picks up the wrong package at install time, 
> > then
> the
> >      >> wrong link is hard-coded in the html. If you are building binary
> >      >> packages, then they will link to the wrong help pages.
> >      >>
> >      >> WRE says that specifying the package in the link is rarely
> needed.
> >      >> This was probably the case some time ago, especially when
> packages did
> >      >> not have (compulsory) namespaces. But I am not sure if it 
> > still
> holds.
> >      >> I would argue that it is better to specify the package you 
> > are
> linking
> >      >> to. But the newly enforced requirement that we need to link 
> > to
> files
> >      >> instead of topics makes this more error prone.
> >      >>
> >      >> Gabor
> >      >>
> >      >> [...]
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel

From d@v|dhughjone@ @end|ng |rom gm@||@com  Tue Jun 16 10:55:57 2020
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Tue, 16 Jun 2020 09:55:57 +0100
Subject: [R-pkg-devel] check cross-references error: Non-file
 package-anchored link(s)
In-Reply-To: <HE1PR0102MB3258E094184B5D2AABCB127DAE9D0@HE1PR0102MB3258.eurprd01.prod.exchangelabs.com>
References: <5F37E69B-BD3D-4B56-8B66-77E4A5EDECF3@gmail.com>
 <408847a9-ac14-c4fb-33d0-0734f180d228@gmail.com>
 <CABtg=K=c8TUAxmv1e2To5A5HHKUTQEA-tNadxUJGuA3eXh1p8A@mail.gmail.com>
 <0df3d1f3-f482-ee96-d6f5-a6aab74810b4@gmail.com>
 <CABtg=Kk2V4SWVx-MOQ32ErzS64GrtZV97ZGQ5ccU_SjpO_W_2A@mail.gmail.com>
 <8a25ba2b-3b98-e469-07e4-dfd90d76e37e@gmail.com>
 <24295.39986.892565.475924@stat.math.ethz.ch>
 <ed9be12f-5b74-ab7d-0846-2274718c881d@gmail.com>
 <CAARY7kgE6=dU_5aGvXQQ7pXR3d-Ugr_0PExpPPRPkMRm6wraaA@mail.gmail.com>
 <HE1PR0102MB3258E094184B5D2AABCB127DAE9D0@HE1PR0102MB3258.eurprd01.prod.exchangelabs.com>
Message-ID: <CAARY7kgo6ySHgBtzwZAAJZkZTdYyC9h6TuO3uT_tjNAJ4kptRg@mail.gmail.com>

Thank you so much!
David


On Tue, 16 Jun 2020 at 08:36, Georgi Boshnakov <
georgi.boshnakov at manchester.ac.uk> wrote:

> The Rd file is mplus.Rd, so
>  ?[lubridate:mplus]{lubridate::add_with_rollback()}? would do.
>
> Georgi Boshnakov
>
> -----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf
> Of David Hugh-Jones
> Sent: 16 June 2020 07:51
> To: Duncan Murdoch <murdoch.duncan at gmail.com>
> Cc: List r-package-devel <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] check cross-references error: Non-file
> package-anchored link(s)
>
> On this note, I just got
>
> Non-file package-anchored link(s) in documentation object
> 'brk_width-for-datetime.Rd':
>   ?[lubridate:%m+%]{lubridate::add_with_rollback()}?
>
> The correct filename appears to be %m+% in the lubridate help. Can anyone
> tell me the right way to format this? I would work it out myself, but the
> check didn't cause problems on the r-devel systems I tested with, so I'd be
> testing blind.
>
> Cheers,
> David
>
>
> On Mon, 15 Jun 2020 at 17:30, Duncan Murdoch <murdoch.duncan at gmail.com>
> wrote:
>
> > On 15/06/2020 12:05 p.m., Martin Maechler wrote:
> > >>>>>> Duncan Murdoch   on Sun, 14 Jun 2020 07:28:03 -0400 writes:
> > >
> > >      > I agree with almost everything you wrote, except one thing:
> > > this
> > isn't
> > >      > newly enforced, it has been enforced since the help system
> > began.  What
> > >      > I think is new is that there are now tests for it.
> > > Previously
> > those
> > >      > links just wouldn't work.
> > >
> > >      > Duncan Murdoch
> > >
> > > Yes, to all... including Duncan's agreement with G?bor.
> > >
> > > Also, Duncan M earlier did mention that he had wanted to
> > > *change* the link-to-file behavior for these cases (when he wrote
> > > most of the Rd2html source code) but somehow did not get it.
> >
> > Actually, I don't think I pushed for this change at the time (or at
> > least I didn't push much).  I just wish now that I had, because I
> > think it will be harder to do it now than it would have been then.
> >
> > Duncan
> >
> > >
> > > And that's why we had partial workarounds (as the dynamic server
> > > still finding the links under some circumstances).
> > >
> > > My personal opinions was also that "we" (the R community; i.e.,
> > > people providing good patches to the R sources / collaborating with
> > > R core / ...) should rather work to fix the current
> > > design/implementation "infelicity" than the current checks starting
> > > to enforce something which is really a wart in my view, and indeed,
> > > as G?bor also notes, will create R source documentation that depends
> > > on implementation details of other package's documentation.
> > > I don't like it either, not at all.
> > >
> > > Martin
> > >
> > >      > On 14/06/2020 6:26 a.m., G?bor Cs?rdi wrote:
> > >      >> On Sun, Jun 14, 2020 at 10:44 AM Duncan Murdoch
> > >      >> <murdoch.duncan at gmail.com> wrote:
> > >      >> [...]
> > >      >>>
> > >      >>> I think the argument was that static builds of the help
> > > pages
> > would have
> > >      >>> trouble resolving the links.  With the current system, you
> > > can
> > build a
> > >      >>> help page that links to a page in package foo even if
> > > package
> > foo is not
> > >      >>> installed yet, and have the link work later after you
> > > install
> > foo.
> > >      >>
> > >      >> That is true, but it is also not a big problem, I think. The
> CRAN
> > >      >> Windows R installer does indeed build static help pages by
> > default.
> > >      >> But the built-in web server that serves these works around
> broken
> > >      >> links by treating them as help topics instead of files. As
> > > you
> > know.
> > >      >> :) So this would only be a problem if you wanted to serve
> > > the
> > static
> > >      >> help pages with another web server. (Which is not a bad use
> > case, but
> > >      >> then maybe Rd2HTML() can just resolve them as topics and
> > > avoid
> > the
> > >      >> broken links.)
> > >      >>
> > >      >> Btw. the problem of linking to the wrong page is even worse
> with
> > >      >> static builds of help pages, because if a link w/o a package
> > (e.g.
> > >      >> \link{filter}) picks up the wrong package at install time,
> > > then
> > the
> > >      >> wrong link is hard-coded in the html. If you are building
> binary
> > >      >> packages, then they will link to the wrong help pages.
> > >      >>
> > >      >> WRE says that specifying the package in the link is rarely
> > needed.
> > >      >> This was probably the case some time ago, especially when
> > packages did
> > >      >> not have (compulsory) namespaces. But I am not sure if it
> > > still
> > holds.
> > >      >> I would argue that it is better to specify the package you
> > > are
> > linking
> > >      >> to. But the newly enforced requirement that we need to link
> > > to
> > files
> > >      >> instead of topics makes this more error prone.
> > >      >>
> > >      >> Gabor
> > >      >>
> > >      >> [...]
> > >
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Jun 16 14:44:21 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 16 Jun 2020 13:44:21 +0100
Subject: [R-pkg-devel] check cross-references error: Non-file
 package-anchored link(s)
In-Reply-To: <ed9be12f-5b74-ab7d-0846-2274718c881d@gmail.com>
References: <5F37E69B-BD3D-4B56-8B66-77E4A5EDECF3@gmail.com>
 <408847a9-ac14-c4fb-33d0-0734f180d228@gmail.com>
 <CABtg=K=c8TUAxmv1e2To5A5HHKUTQEA-tNadxUJGuA3eXh1p8A@mail.gmail.com>
 <0df3d1f3-f482-ee96-d6f5-a6aab74810b4@gmail.com>
 <CABtg=Kk2V4SWVx-MOQ32ErzS64GrtZV97ZGQ5ccU_SjpO_W_2A@mail.gmail.com>
 <8a25ba2b-3b98-e469-07e4-dfd90d76e37e@gmail.com>
 <24295.39986.892565.475924@stat.math.ethz.ch>
 <ed9be12f-5b74-ab7d-0846-2274718c881d@gmail.com>
Message-ID: <CABtg=K=HG9HfUY_F+aseLrBdWQoTy8hFuDmtR1BtEXucfnegmA@mail.gmail.com>

On Mon, Jun 15, 2020 at 5:30 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 15/06/2020 12:05 p.m., Martin Maechler wrote:
> >>>>>> Duncan Murdoch   on Sun, 14 Jun 2020 07:28:03 -0400 writes:
> >
> >      > I agree with almost everything you wrote, except one thing:  this isn't
> >      > newly enforced, it has been enforced since the help system began.  What
> >      > I think is new is that there are now tests for it.  Previously those
> >      > links just wouldn't work.
> >
> >      > Duncan Murdoch
> >
> > Yes, to all... including Duncan's agreement with G?bor.
> >
> > Also, Duncan M earlier did mention that he had wanted to
> > *change* the link-to-file behavior for these cases (when he
> > wrote most of the Rd2html source code) but somehow did not get it.
>
> Actually, I don't think I pushed for this change at the time (or at
> least I didn't push much).  I just wish now that I had, because I think
> it will be harder to do it now than it would have been then.
>
> Duncan

I am not entirely sure, but maybe just documenting the current
behaviour and undoing 78674 could work. With some tweaks? E.g.

* updating R-exts to say that \link[pkg:topic]{text} will link to
`topic.html` in `pkg` first (for historical reasons), and falls back
to searching for `topic` in `pkg` at render time.
* updating Rd2HTML to look for the topic and use it in the link,
instead of throwing a warning, in it cannot find `topic.html`
* removing the `R CMD check` warning for non-file links, that was
added in 78674 :)

Is there anything else?

Gabor

[...]


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Tue Jun 16 15:27:06 2020
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Tue, 16 Jun 2020 13:27:06 +0000
Subject: [R-pkg-devel] check cross-references error: Non-file
 package-anchored link(s)
In-Reply-To: <CABtg=K=HG9HfUY_F+aseLrBdWQoTy8hFuDmtR1BtEXucfnegmA@mail.gmail.com>
References: <5F37E69B-BD3D-4B56-8B66-77E4A5EDECF3@gmail.com>
 <408847a9-ac14-c4fb-33d0-0734f180d228@gmail.com>
 <CABtg=K=c8TUAxmv1e2To5A5HHKUTQEA-tNadxUJGuA3eXh1p8A@mail.gmail.com>
 <0df3d1f3-f482-ee96-d6f5-a6aab74810b4@gmail.com>
 <CABtg=Kk2V4SWVx-MOQ32ErzS64GrtZV97ZGQ5ccU_SjpO_W_2A@mail.gmail.com>
 <8a25ba2b-3b98-e469-07e4-dfd90d76e37e@gmail.com>
 <24295.39986.892565.475924@stat.math.ethz.ch>
 <ed9be12f-5b74-ab7d-0846-2274718c881d@gmail.com>
 <CABtg=K=HG9HfUY_F+aseLrBdWQoTy8hFuDmtR1BtEXucfnegmA@mail.gmail.com>
Message-ID: <HE1PR0102MB325875BEA1D1D41D3C2C07DCAE9D0@HE1PR0102MB3258.eurprd01.prod.exchangelabs.com>

I think that the current behaviour is documented in WRE:

"...There are two other forms of optional argument specified as \link[pkg]{foo} and
\link[pkg:bar]{foo} to link to the package pkg, to files foo.html and bar.html respectively.
These are rarely needed, perhaps to refer to not-yet-installed packages (but there the HTML
help system will resolve the link at run time) or in the normally undesirable event that more
than one package offers help on a topic7 (in which case the present package has precedence so
this is only needed to refer to other packages). They are currently only used in HTML help
(and ignored for hyperlinks in LATEX conversions of help pages), and link to the file rather
than the topic (since there is no way to know which topics are in which files in an uninstalled
package) ...   Because they have been frequently misused, the HTML help system looks for topic foo in package pkg 
if it does not find file foo.html."

Unless I am missing something, it seems that it would be relatively painless to reverse the logic of the current behaviour of the help system,
i.e. to start looking first for the topic and then for a file.

Georgi Boshnakov

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of G?bor Cs?rdi
Sent: 16 June 2020 13:44
To: Duncan Murdoch <murdoch.duncan at gmail.com>
Cc: List r-package-devel <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] check cross-references error: Non-file package-anchored link(s)

On Mon, Jun 15, 2020 at 5:30 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 15/06/2020 12:05 p.m., Martin Maechler wrote:
> >>>>>> Duncan Murdoch   on Sun, 14 Jun 2020 07:28:03 -0400 writes:
> >
> >      > I agree with almost everything you wrote, except one thing:  this isn't
> >      > newly enforced, it has been enforced since the help system began.  What
> >      > I think is new is that there are now tests for it.  Previously those
> >      > links just wouldn't work.
> >
> >      > Duncan Murdoch
> >
> > Yes, to all... including Duncan's agreement with G?bor.
> >
> > Also, Duncan M earlier did mention that he had wanted to
> > *change* the link-to-file behavior for these cases (when he wrote 
> > most of the Rd2html source code) but somehow did not get it.
>
> Actually, I don't think I pushed for this change at the time (or at 
> least I didn't push much).  I just wish now that I had, because I 
> think it will be harder to do it now than it would have been then.
>
> Duncan

I am not entirely sure, but maybe just documenting the current behaviour and undoing 78674 could work. With some tweaks? E.g.

* updating R-exts to say that \link[pkg:topic]{text} will link to `topic.html` in `pkg` first (for historical reasons), and falls back to searching for `topic` in `pkg` at render time.
* updating Rd2HTML to look for the topic and use it in the link, instead of throwing a warning, in it cannot find `topic.html`
* removing the `R CMD check` warning for non-file links, that was added in 78674 :)

Is there anything else?

Gabor

[...]

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel

From hongoo| @end|ng |rom m|cro@o|t@com  Tue Jun 16 19:13:48 2020
From: hongoo| @end|ng |rom m|cro@o|t@com (Hong Ooi)
Date: Tue, 16 Jun 2020 17:13:48 +0000
Subject: [R-pkg-devel] SAR package: check errors with dataset documentation
Message-ID: <HK2P15301MB0036A224494190B0D4D18675A69D0@HK2P15301MB0036.APCP153.PROD.OUTLOOK.COM>

Hello all,

I'm refreshing the docs for my SAR package ( https://github.com/hongooi73/SAR ), and I'm running into a weird problem.

The package contains 2 example data frames, 'ms_catalog' and 'ms_usage'. Here is the relevant documentation for them, in the file R/ms_data.R:

#' Sample usage dataset
#'
#' Dataset of anonymised transaction records from the Microsoft online store.
#' @format A data frame with the following variables:
#' \describe{
#'  \item{user}{The user ID.}
#'  \item{item}{The item ID, corresponding to the items in the [ms_catalog] dataset.}
#'  \item{time}{The date and time of the transaction, in POSIXct format.}
#' }
#' @source Microsoft.
#' @seealso
#' [ms_catalog]
"ms_usage"

#' Sample catalog dataset
#'
#' Dataset of item descriptions from the Microsoft online store.
#' @format A data frame with the following variables:
#' \describe{
#'  \item{item}{The item ID, corresponding to the items in the [ms_usage] dataset.}
#'  \item{name}{A short description of the item.}
#'  \item{category}{The item category.}
#' }
#' @source Microsoft.
#' @seealso
#' [ms_usage]
"ms_catalog"


When I run devtools::check() and rhub::check_for_cran(), I get a warning:

* checking for code/documentation mismatches ... WARNING
  'ms_catalog'
Variables with usage in documentation object 'ms_usage' but not in code:
Variables with usage in documentation object 'ms_catalog' but not in code:
  'ms_usage'

Can anyone see where the problem lies? As far as I can tell, I'm following the correct procedure for documenting datasets with Roxygen. I'm using R 4.0.0 on Win 10.

(I also get a note about checking artifacts left over in the check directory, but I'm not worried about that for the moment -- seems to be a wart with devtools::check().)

Hong


From wdun|@p @end|ng |rom t|bco@com  Tue Jun 16 20:42:48 2020
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Tue, 16 Jun 2020 11:42:48 -0700
Subject: [R-pkg-devel] Uncaught use of internal functions from other
 packages in R CMD check
In-Reply-To: <464f3fed-49de-14b7-88b5-6a4288fec798@stanford.edu>
References: <464f3fed-49de-14b7-88b5-6a4288fec798@stanford.edu>
Message-ID: <CAF8bMcauX3nwBPE3d2EL9C_xkQhugFAS-dUTX3eMTGFcCQtMcA@mail.gmail.com>

And at least one widely used CRAN package defines `%:::%`, to mimic `:::`,
and uses it to use unexported functions from the tools package.

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Mon, Jun 15, 2020 at 3:03 PM Balasubramanian Narasimhan <
naras at stanford.edu> wrote:

> At least one package on CRAN uses
>
> get("foo", envir=asNamespace("imported_package"))
>
> and passes check.
>
> Is this known?
>
> -Naras
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From rwo|d|ord @end|ng |rom uw@ter|oo@c@  Tue Jun 16 22:07:47 2020
From: rwo|d|ord @end|ng |rom uw@ter|oo@c@ (Wayne Oldford)
Date: Tue, 16 Jun 2020 20:07:47 +0000
Subject: [R-pkg-devel] check cross-references error: Non-file
 package-anchored link(s)
In-Reply-To: <HE1PR0102MB325875BEA1D1D41D3C2C07DCAE9D0@HE1PR0102MB3258.eurprd01.prod.exchangelabs.com>
References: <5F37E69B-BD3D-4B56-8B66-77E4A5EDECF3@gmail.com>
 <408847a9-ac14-c4fb-33d0-0734f180d228@gmail.com>
 <CABtg=K=c8TUAxmv1e2To5A5HHKUTQEA-tNadxUJGuA3eXh1p8A@mail.gmail.com>
 <0df3d1f3-f482-ee96-d6f5-a6aab74810b4@gmail.com>
 <CABtg=Kk2V4SWVx-MOQ32ErzS64GrtZV97ZGQ5ccU_SjpO_W_2A@mail.gmail.com>
 <8a25ba2b-3b98-e469-07e4-dfd90d76e37e@gmail.com>
 <24295.39986.892565.475924@stat.math.ethz.ch>
 <ed9be12f-5b74-ab7d-0846-2274718c881d@gmail.com>
 <CABtg=K=HG9HfUY_F+aseLrBdWQoTy8hFuDmtR1BtEXucfnegmA@mail.gmail.com>
 <HE1PR0102MB325875BEA1D1D41D3C2C07DCAE9D0@HE1PR0102MB3258.eurprd01.prod.exchangelabs.com>
Message-ID: <3C1E2993-8F56-4813-B2EA-6E94B46B8C3A@uwaterloo.ca>

Hi 

I got caught by this new test this week in trying to push an updated release of the loon package to CRAN.

By following this thread, I corrected my cross-references to external packages but I got stymied by 
the one I hoped to give to the  "sp" package for Spatial data

_________

Here is the history:

I tried 
   \link[sp:sp]{sp}  
which failed here:
Debian: <https://win-builder.r-project.org/incoming_pretest/loon_1.3.1_20200616_162128/Debian/00check.log> 
Status: 1 WARNING


That was meant to correct an earlier attempt (it did for other links to "scales" for example) where I had tried 
  \link[sp]{sp}   
and  failed here: 
Debian: <https://win-builder.r-project.org/incoming_pretest/loon_1.3.1_20200615_213749/Debian/00check.log> 
Status: 1 WARNING


So to complete the possibilities as I understand them,  I just now tried 
   \link{sp}  
which, as might be expected, failed here:
Debian: <https://win-builder.r-project.org/incoming_pretest/loon_1.3.1_20200616_213921/Debian/00check.log>
Status: 1 WARNING
As expected, error here was different:  "Missing  link"  as opposed to "Non-file package-anchored link"

_________


I am not sure whether I have missed a subtlety in WRE or that the peculiar circumstance
where the package, the topic, and the file name are all identical (sp) is some weird boundary case.

Without further advice, I think I am just going to remove the link to "sp".
It really is just a courtesy link to the package description for "sp".

Thanks in advance for your thoughts.

Wayne




?-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Georgi Boshnakov <georgi.boshnakov at manchester.ac.uk>
Date: Tuesday, June 16, 2020 at 9:27 AM
To: G?bor Cs?rdi <csardi.gabor at gmail.com>, Duncan Murdoch <murdoch.duncan at gmail.com>
Cc: List r-package-devel <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] check cross-references error: Non-file package-anchored link(s)

    I think that the current behaviour is documented in WRE:
    
    "...There are two other forms of optional argument specified as \link[pkg]{foo} and
    \link[pkg:bar]{foo} to link to the package pkg, to files foo.html and bar.html respectively.
    These are rarely needed, perhaps to refer to not-yet-installed packages (but there the HTML
    help system will resolve the link at run time) or in the normally undesirable event that more
    than one package offers help on a topic7 (in which case the present package has precedence so
    this is only needed to refer to other packages). They are currently only used in HTML help
    (and ignored for hyperlinks in LATEX conversions of help pages), and link to the file rather
    than the topic (since there is no way to know which topics are in which files in an uninstalled
    package) ...   Because they have been frequently misused, the HTML help system looks for topic foo in package pkg 
    if it does not find file foo.html."
    
    Unless I am missing something, it seems that it would be relatively painless to reverse the logic of the current behaviour of the help system,
    i.e. to start looking first for the topic and then for a file.
    
    Georgi Boshnakov
    
    -----Original Message-----
    From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of G?bor Cs?rdi
    Sent: 16 June 2020 13:44
    To: Duncan Murdoch <murdoch.duncan at gmail.com>
    Cc: List r-package-devel <r-package-devel at r-project.org>
    Subject: Re: [R-pkg-devel] check cross-references error: Non-file package-anchored link(s)
    
    On Mon, Jun 15, 2020 at 5:30 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
    >
    > On 15/06/2020 12:05 p.m., Martin Maechler wrote:
    > >>>>>> Duncan Murdoch   on Sun, 14 Jun 2020 07:28:03 -0400 writes:
    > >
    > >      > I agree with almost everything you wrote, except one thing:  this isn't
    > >      > newly enforced, it has been enforced since the help system began.  What
    > >      > I think is new is that there are now tests for it.  Previously those
    > >      > links just wouldn't work.
    > >
    > >      > Duncan Murdoch
    > >
    > > Yes, to all... including Duncan's agreement with G?bor.
    > >
    > > Also, Duncan M earlier did mention that he had wanted to
    > > *change* the link-to-file behavior for these cases (when he wrote 
    > > most of the Rd2html source code) but somehow did not get it.
    >
    > Actually, I don't think I pushed for this change at the time (or at 
    > least I didn't push much).  I just wish now that I had, because I 
    > think it will be harder to do it now than it would have been then.
    >
    > Duncan
    
    I am not entirely sure, but maybe just documenting the current behaviour and undoing 78674 could work. With some tweaks? E.g.
    
    * updating R-exts to say that \link[pkg:topic]{text} will link to `topic.html` in `pkg` first (for historical reasons), and falls back to searching for `topic` in `pkg` at render time.
    * updating Rd2HTML to look for the topic and use it in the link, instead of throwing a warning, in it cannot find `topic.html`
    * removing the `R CMD check` warning for non-file links, that was added in 78674 :)
    
    Is there anything else?
    
    Gabor
    
    [...]
    
    ______________________________________________
    R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel
    


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Jun 16 22:31:59 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 16 Jun 2020 21:31:59 +0100
Subject: [R-pkg-devel] check cross-references error: Non-file
 package-anchored link(s)
In-Reply-To: <3C1E2993-8F56-4813-B2EA-6E94B46B8C3A@uwaterloo.ca>
References: <5F37E69B-BD3D-4B56-8B66-77E4A5EDECF3@gmail.com>
 <408847a9-ac14-c4fb-33d0-0734f180d228@gmail.com>
 <CABtg=K=c8TUAxmv1e2To5A5HHKUTQEA-tNadxUJGuA3eXh1p8A@mail.gmail.com>
 <0df3d1f3-f482-ee96-d6f5-a6aab74810b4@gmail.com>
 <CABtg=Kk2V4SWVx-MOQ32ErzS64GrtZV97ZGQ5ccU_SjpO_W_2A@mail.gmail.com>
 <8a25ba2b-3b98-e469-07e4-dfd90d76e37e@gmail.com>
 <24295.39986.892565.475924@stat.math.ethz.ch>
 <ed9be12f-5b74-ab7d-0846-2274718c881d@gmail.com>
 <CABtg=K=HG9HfUY_F+aseLrBdWQoTy8hFuDmtR1BtEXucfnegmA@mail.gmail.com>
 <HE1PR0102MB325875BEA1D1D41D3C2C07DCAE9D0@HE1PR0102MB3258.eurprd01.prod.exchangelabs.com>
 <3C1E2993-8F56-4813-B2EA-6E94B46B8C3A@uwaterloo.ca>
Message-ID: <CABtg=KkXsqmK1=ao4VojsG4hvyhkaDk7ZJoK1RvrGRBGYQ5UnQ@mail.gmail.com>

This is how to look up the filename. The first "sp" is the topic name,
the second is the package name.

> help("sp", "sp")[[1]]
[1] "C:/Users/csard/R/win-library/4.0/sp/help/00sp"

So you need to link to the "00sp.Rd" file:  \link[sp:00sp]{sp}

Gabor

On Tue, Jun 16, 2020 at 9:09 PM Wayne Oldford <rwoldford at uwaterloo.ca> wrote:
>
> Hi
>
> I got caught by this new test this week in trying to push an updated release of the loon package to CRAN.
>
> By following this thread, I corrected my cross-references to external packages but I got stymied by
> the one I hoped to give to the  "sp" package for Spatial data
>
> _________
>
> Here is the history:
>
> I tried
>    \link[sp:sp]{sp}
> which failed here:
> Debian: <https://win-builder.r-project.org/incoming_pretest/loon_1.3.1_20200616_162128/Debian/00check.log>
> Status: 1 WARNING
>
>
> That was meant to correct an earlier attempt (it did for other links to "scales" for example) where I had tried
>   \link[sp]{sp}
> and  failed here:
> Debian: <https://win-builder.r-project.org/incoming_pretest/loon_1.3.1_20200615_213749/Debian/00check.log>
> Status: 1 WARNING
>
>
> So to complete the possibilities as I understand them,  I just now tried
>    \link{sp}
> which, as might be expected, failed here:
> Debian: <https://win-builder.r-project.org/incoming_pretest/loon_1.3.1_20200616_213921/Debian/00check.log>
> Status: 1 WARNING
> As expected, error here was different:  "Missing  link"  as opposed to "Non-file package-anchored link"
>
> _________
>
>
> I am not sure whether I have missed a subtlety in WRE or that the peculiar circumstance
> where the package, the topic, and the file name are all identical (sp) is some weird boundary case.
>
> Without further advice, I think I am just going to remove the link to "sp".
> It really is just a courtesy link to the package description for "sp".
>
> Thanks in advance for your thoughts.
>
> Wayne
>
>
>
>
> ?-----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Georgi Boshnakov <georgi.boshnakov at manchester.ac.uk>
> Date: Tuesday, June 16, 2020 at 9:27 AM
> To: G?bor Cs?rdi <csardi.gabor at gmail.com>, Duncan Murdoch <murdoch.duncan at gmail.com>
> Cc: List r-package-devel <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] check cross-references error: Non-file package-anchored link(s)
>
>     I think that the current behaviour is documented in WRE:
>
>     "...There are two other forms of optional argument specified as \link[pkg]{foo} and
>     \link[pkg:bar]{foo} to link to the package pkg, to files foo.html and bar.html respectively.
>     These are rarely needed, perhaps to refer to not-yet-installed packages (but there the HTML
>     help system will resolve the link at run time) or in the normally undesirable event that more
>     than one package offers help on a topic7 (in which case the present package has precedence so
>     this is only needed to refer to other packages). They are currently only used in HTML help
>     (and ignored for hyperlinks in LATEX conversions of help pages), and link to the file rather
>     than the topic (since there is no way to know which topics are in which files in an uninstalled
>     package) ...   Because they have been frequently misused, the HTML help system looks for topic foo in package pkg
>     if it does not find file foo.html."
>
>     Unless I am missing something, it seems that it would be relatively painless to reverse the logic of the current behaviour of the help system,
>     i.e. to start looking first for the topic and then for a file.
>
>     Georgi Boshnakov
>
>     -----Original Message-----
>     From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of G?bor Cs?rdi
>     Sent: 16 June 2020 13:44
>     To: Duncan Murdoch <murdoch.duncan at gmail.com>
>     Cc: List r-package-devel <r-package-devel at r-project.org>
>     Subject: Re: [R-pkg-devel] check cross-references error: Non-file package-anchored link(s)
>
>     On Mon, Jun 15, 2020 at 5:30 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>     >
>     > On 15/06/2020 12:05 p.m., Martin Maechler wrote:
>     > >>>>>> Duncan Murdoch   on Sun, 14 Jun 2020 07:28:03 -0400 writes:
>     > >
>     > >      > I agree with almost everything you wrote, except one thing:  this isn't
>     > >      > newly enforced, it has been enforced since the help system began.  What
>     > >      > I think is new is that there are now tests for it.  Previously those
>     > >      > links just wouldn't work.
>     > >
>     > >      > Duncan Murdoch
>     > >
>     > > Yes, to all... including Duncan's agreement with G?bor.
>     > >
>     > > Also, Duncan M earlier did mention that he had wanted to
>     > > *change* the link-to-file behavior for these cases (when he wrote
>     > > most of the Rd2html source code) but somehow did not get it.
>     >
>     > Actually, I don't think I pushed for this change at the time (or at
>     > least I didn't push much).  I just wish now that I had, because I
>     > think it will be harder to do it now than it would have been then.
>     >
>     > Duncan
>
>     I am not entirely sure, but maybe just documenting the current behaviour and undoing 78674 could work. With some tweaks? E.g.
>
>     * updating R-exts to say that \link[pkg:topic]{text} will link to `topic.html` in `pkg` first (for historical reasons), and falls back to searching for `topic` in `pkg` at render time.
>     * updating Rd2HTML to look for the topic and use it in the link, instead of throwing a warning, in it cannot find `topic.html`
>     * removing the `R CMD check` warning for non-file links, that was added in 78674 :)
>
>     Is there anything else?
>
>     Gabor
>
>     [...]
>
>     ______________________________________________
>     R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     ______________________________________________
>     R-package-devel at r-project.org mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From rwo|d|ord @end|ng |rom uw@ter|oo@c@  Wed Jun 17 01:32:36 2020
From: rwo|d|ord @end|ng |rom uw@ter|oo@c@ (Wayne Oldford)
Date: Tue, 16 Jun 2020 23:32:36 +0000
Subject: [R-pkg-devel] check cross-references error: Non-file
 package-anchored link(s)
In-Reply-To: <CABtg=KkXsqmK1=ao4VojsG4hvyhkaDk7ZJoK1RvrGRBGYQ5UnQ@mail.gmail.com>
References: <5F37E69B-BD3D-4B56-8B66-77E4A5EDECF3@gmail.com>
 <408847a9-ac14-c4fb-33d0-0734f180d228@gmail.com>
 <CABtg=K=c8TUAxmv1e2To5A5HHKUTQEA-tNadxUJGuA3eXh1p8A@mail.gmail.com>
 <0df3d1f3-f482-ee96-d6f5-a6aab74810b4@gmail.com>
 <CABtg=Kk2V4SWVx-MOQ32ErzS64GrtZV97ZGQ5ccU_SjpO_W_2A@mail.gmail.com>
 <8a25ba2b-3b98-e469-07e4-dfd90d76e37e@gmail.com>
 <24295.39986.892565.475924@stat.math.ethz.ch>
 <ed9be12f-5b74-ab7d-0846-2274718c881d@gmail.com>
 <CABtg=K=HG9HfUY_F+aseLrBdWQoTy8hFuDmtR1BtEXucfnegmA@mail.gmail.com>
 <HE1PR0102MB325875BEA1D1D41D3C2C07DCAE9D0@HE1PR0102MB3258.eurprd01.prod.exchangelabs.com>
 <3C1E2993-8F56-4813-B2EA-6E94B46B8C3A@uwaterloo.ca>
 <CABtg=KkXsqmK1=ao4VojsG4hvyhkaDk7ZJoK1RvrGRBGYQ5UnQ@mail.gmail.com>
Message-ID: <74696BF9-331D-41A5-891A-18A8F6BD8F57@uwaterloo.ca>

Thank you!

?-----Original Message-----
From: G?bor Cs?rdi <csardi.gabor at gmail.com>
Date: Tuesday, June 16, 2020 at 4:32 PM
To: Wayne Oldford <rwoldford at uwaterloo.ca>
Cc: List r-package-devel <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] check cross-references error: Non-file package-anchored link(s)

    This is how to look up the filename. The first "sp" is the topic name,
    the second is the package name.
    
    > help("sp", "sp")[[1]]
    [1] "C:/Users/csard/R/win-library/4.0/sp/help/00sp"
    
    So you need to link to the "00sp.Rd" file:  \link[sp:00sp]{sp}
    
    Gabor
    
    On Tue, Jun 16, 2020 at 9:09 PM Wayne Oldford <rwoldford at uwaterloo.ca> wrote:
    >
    > Hi
    >
    > I got caught by this new test this week in trying to push an updated release of the loon package to CRAN.
    >
    > By following this thread, I corrected my cross-references to external packages but I got stymied by
    > the one I hoped to give to the  "sp" package for Spatial data
    >
    > _________
    >
    > Here is the history:
    >
    > I tried
    >    \link[sp:sp]{sp}
    > which failed here:
    > Debian: <https://win-builder.r-project.org/incoming_pretest/loon_1.3.1_20200616_162128/Debian/00check.log>
    > Status: 1 WARNING
    >
    >
    > That was meant to correct an earlier attempt (it did for other links to "scales" for example) where I had tried
    >   \link[sp]{sp}
    > and  failed here:
    > Debian: <https://win-builder.r-project.org/incoming_pretest/loon_1.3.1_20200615_213749/Debian/00check.log>
    > Status: 1 WARNING
    >
    >
    > So to complete the possibilities as I understand them,  I just now tried
    >    \link{sp}
    > which, as might be expected, failed here:
    > Debian: <https://win-builder.r-project.org/incoming_pretest/loon_1.3.1_20200616_213921/Debian/00check.log>
    > Status: 1 WARNING
    > As expected, error here was different:  "Missing  link"  as opposed to "Non-file package-anchored link"
    >
    > _________
    >
    >
    > I am not sure whether I have missed a subtlety in WRE or that the peculiar circumstance
    > where the package, the topic, and the file name are all identical (sp) is some weird boundary case.
    >
    > Without further advice, I think I am just going to remove the link to "sp".
    > It really is just a courtesy link to the package description for "sp".
    >
    > Thanks in advance for your thoughts.
    >
    > Wayne
    >
    >
    >
    >
    > -----Original Message-----
    > From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Georgi Boshnakov <georgi.boshnakov at manchester.ac.uk>
    > Date: Tuesday, June 16, 2020 at 9:27 AM
    > To: G?bor Cs?rdi <csardi.gabor at gmail.com>, Duncan Murdoch <murdoch.duncan at gmail.com>
    > Cc: List r-package-devel <r-package-devel at r-project.org>
    > Subject: Re: [R-pkg-devel] check cross-references error: Non-file package-anchored link(s)
    >
    >     I think that the current behaviour is documented in WRE:
    >
    >     "...There are two other forms of optional argument specified as \link[pkg]{foo} and
    >     \link[pkg:bar]{foo} to link to the package pkg, to files foo.html and bar.html respectively.
    >     These are rarely needed, perhaps to refer to not-yet-installed packages (but there the HTML
    >     help system will resolve the link at run time) or in the normally undesirable event that more
    >     than one package offers help on a topic7 (in which case the present package has precedence so
    >     this is only needed to refer to other packages). They are currently only used in HTML help
    >     (and ignored for hyperlinks in LATEX conversions of help pages), and link to the file rather
    >     than the topic (since there is no way to know which topics are in which files in an uninstalled
    >     package) ...   Because they have been frequently misused, the HTML help system looks for topic foo in package pkg
    >     if it does not find file foo.html."
    >
    >     Unless I am missing something, it seems that it would be relatively painless to reverse the logic of the current behaviour of the help system,
    >     i.e. to start looking first for the topic and then for a file.
    >
    >     Georgi Boshnakov
    >
    >     -----Original Message-----
    >     From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of G?bor Cs?rdi
    >     Sent: 16 June 2020 13:44
    >     To: Duncan Murdoch <murdoch.duncan at gmail.com>
    >     Cc: List r-package-devel <r-package-devel at r-project.org>
    >     Subject: Re: [R-pkg-devel] check cross-references error: Non-file package-anchored link(s)
    >
    >     On Mon, Jun 15, 2020 at 5:30 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
    >     >
    >     > On 15/06/2020 12:05 p.m., Martin Maechler wrote:
    >     > >>>>>> Duncan Murdoch   on Sun, 14 Jun 2020 07:28:03 -0400 writes:
    >     > >
    >     > >      > I agree with almost everything you wrote, except one thing:  this isn't
    >     > >      > newly enforced, it has been enforced since the help system began.  What
    >     > >      > I think is new is that there are now tests for it.  Previously those
    >     > >      > links just wouldn't work.
    >     > >
    >     > >      > Duncan Murdoch
    >     > >
    >     > > Yes, to all... including Duncan's agreement with G?bor.
    >     > >
    >     > > Also, Duncan M earlier did mention that he had wanted to
    >     > > *change* the link-to-file behavior for these cases (when he wrote
    >     > > most of the Rd2html source code) but somehow did not get it.
    >     >
    >     > Actually, I don't think I pushed for this change at the time (or at
    >     > least I didn't push much).  I just wish now that I had, because I
    >     > think it will be harder to do it now than it would have been then.
    >     >
    >     > Duncan
    >
    >     I am not entirely sure, but maybe just documenting the current behaviour and undoing 78674 could work. With some tweaks? E.g.
    >
    >     * updating R-exts to say that \link[pkg:topic]{text} will link to `topic.html` in `pkg` first (for historical reasons), and falls back to searching for `topic` in `pkg` at render time.
    >     * updating Rd2HTML to look for the topic and use it in the link, instead of throwing a warning, in it cannot find `topic.html`
    >     * removing the `R CMD check` warning for non-file links, that was added in 78674 :)
    >
    >     Is there anything else?
    >
    >     Gabor
    >
    >     [...]
    >
    >     ______________________________________________
    >     R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel
    >     ______________________________________________
    >     R-package-devel at r-project.org mailing list
    >     https://stat.ethz.ch/mailman/listinfo/r-package-devel
    >
    >
    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel
    


From n|u|tz @end|ng |rom gm@||@com  Wed Jun 17 20:25:18 2020
From: n|u|tz @end|ng |rom gm@||@com (Neal Fultz)
Date: Wed, 17 Jun 2020 11:25:18 -0700
Subject: [R-pkg-devel] Setting graphics device-copy parameters
Message-ID: <CAL9B2ve21My0vRPsE2R=xV6vdg7LUL8S1k7WeRQhStvnYLUOUQ@mail.gmail.com>

I'm working on a graphics device in a R package, and need to set some
graphical parameters for
text / labels on the devices as they are initialized or reset.

This feature is described in R Internals:

> The three copies of the GPar structure are used to store the current parameters (accessed via gpptr),
> the ?device copy? (accessed via dpptr) and space for a saved copy of the ?device copy? parameters.
> The current parameters are, clearly, those currently in use and are copied from the ?device copy?
> whenever plot.new() is called (whether or not that advances to the next ?page?). The saved copy
> keeps the state when the device was last completely cleared (e.g. when plot.new() was called
> with par(new=TRUE)), and is used to replay the display list.

How do I, from a package, actually access and initialize the "device copy" ?

All I've been able to find is a comment containing an older,
copy-pasted comment in GraphicsDevice.h :

>  * 2. I found this comment in the doc for dev_Open -- looks nasty
>  *    Any known instances of such a thing happening?  Should be
>  *    replaced by a function to query the device for preferred gpars
>  *    settings? (to be called when the device is initialised)
>          *
>          * NOTE that it is perfectly acceptable for this
>          * function to set generic graphics parameters too
>          * (i.e., override the generic parameter settings
>          * which GInit sets up) all at the author's own risk
>          * of course :)


Thanks,

Neal


From j@me@@|@he@ter @end|ng |rom gm@||@com  Wed Jun 17 21:33:47 2020
From: j@me@@|@he@ter @end|ng |rom gm@||@com (Jim Hester)
Date: Wed, 17 Jun 2020 15:33:47 -0400
Subject: [R-pkg-devel] R_MAKEVARS_USER fail to pass down to sub-makes?
In-Reply-To: <CAOO9MKUtBYnT1eMzYnZ6m-6i8Tqm6sYP23iXP4oC0gMMV2MG9A@mail.gmail.com>
References: <CAOO9MKUtBYnT1eMzYnZ6m-6i8Tqm6sYP23iXP4oC0gMMV2MG9A@mail.gmail.com>
Message-ID: <CAD6tx97uw+=GwZ3S5DkCXfnWq3-T3n9xXM+4ExoDA=2Noj1n3w@mail.gmail.com>

I think the issue is likely that you seem to be using a relative path to
the R_MAKEVARS_USER file, it needs to be an absolute path as the
installation is run in a temporary directory not from the directory you
call `R CMD INSTALL` from.
I observed similar behavior to what you describe when I had the
MAKEVARS_USER file as a relative path, but using an absolute path produced
the expected result.

On Mon, Jun 1, 2020 at 8:04 AM Jan Gorecki <j.gorecki at wit.edu.pl> wrote:

> Hi package devel support,
>
> I am trying to use R_MAKEVARS_USER to customize build, rather than
> .R/Makevars. It is properly displayed from config CFLAGS but during
> package install it doesn't seem to work.
>
> In R-admin in "6.3.3 Customizing package compilation" there is:
>
> > Note that these mechanisms do not work with packages which fail to pass
> settings down to sub-makes, perhaps reading etc/Makeconf in makefiles in
> subdirectories.
>
> It seems that it applies to me. How should I debug that? to make this
> env var respected? Note that my pkg has src/Makevars to handle openmp
> switch nicely
> Thank you
>
> system("R_MAKEVARS_USER=library/gcc/O3/Makevars R CMD config CFLAGS")
> -O3
>
> system("R_MAKEVARS_USER=library/gcc/O3/Makevars R CMD INSTALL
> --library=library/gcc/O3 mypkg_1.0.0.tar.gz")
> * installing *source* package 'mypkg' ...
> ** using staged installation
> ** libs
> gcc -std=gnu99 -I"/usr/share/R/include" -DNDEBUG    -fopenmp -fpic  -g
> -O2 -fdebug-prefix-map=/build/r-base-V28x5H/r-base-3.6.3=.
> -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time
> -D_FORTIFY_SOURCE=2 -g  -c assign.c -o assign.o
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From j@goreck| @end|ng |rom w|t@edu@p|  Thu Jun 18 14:31:04 2020
From: j@goreck| @end|ng |rom w|t@edu@p| (Jan Gorecki)
Date: Thu, 18 Jun 2020 13:31:04 +0100
Subject: [R-pkg-devel] R_MAKEVARS_USER fail to pass down to sub-makes?
In-Reply-To: <CAD6tx97uw+=GwZ3S5DkCXfnWq3-T3n9xXM+4ExoDA=2Noj1n3w@mail.gmail.com>
References: <CAOO9MKUtBYnT1eMzYnZ6m-6i8Tqm6sYP23iXP4oC0gMMV2MG9A@mail.gmail.com>
 <CAD6tx97uw+=GwZ3S5DkCXfnWq3-T3n9xXM+4ExoDA=2Noj1n3w@mail.gmail.com>
Message-ID: <CAOO9MKXjJzH0BVFLdbnzveseeR4UAWRWTx5bxZ5noCfjvg5PQw@mail.gmail.com>

Thank you Jim,
That was the problem indeed. Too bad it is not mentioned in the manual.

On Wed, Jun 17, 2020 at 8:33 PM Jim Hester <james.f.hester at gmail.com> wrote:
>
> I think the issue is likely that you seem to be using a relative path to the R_MAKEVARS_USER file, it needs to be an absolute path as the installation is run in a temporary directory not from the directory you call `R CMD INSTALL` from.
> I observed similar behavior to what you describe when I had the MAKEVARS_USER file as a relative path, but using an absolute path produced the expected result.
>
> On Mon, Jun 1, 2020 at 8:04 AM Jan Gorecki <j.gorecki at wit.edu.pl> wrote:
>>
>> Hi package devel support,
>>
>> I am trying to use R_MAKEVARS_USER to customize build, rather than
>> .R/Makevars. It is properly displayed from config CFLAGS but during
>> package install it doesn't seem to work.
>>
>> In R-admin in "6.3.3 Customizing package compilation" there is:
>>
>> > Note that these mechanisms do not work with packages which fail to pass settings down to sub-makes, perhaps reading etc/Makeconf in makefiles in subdirectories.
>>
>> It seems that it applies to me. How should I debug that? to make this
>> env var respected? Note that my pkg has src/Makevars to handle openmp
>> switch nicely
>> Thank you
>>
>> system("R_MAKEVARS_USER=library/gcc/O3/Makevars R CMD config CFLAGS")
>> -O3
>>
>> system("R_MAKEVARS_USER=library/gcc/O3/Makevars R CMD INSTALL
>> --library=library/gcc/O3 mypkg_1.0.0.tar.gz")
>> * installing *source* package 'mypkg' ...
>> ** using staged installation
>> ** libs
>> gcc -std=gnu99 -I"/usr/share/R/include" -DNDEBUG    -fopenmp -fpic  -g
>> -O2 -fdebug-prefix-map=/build/r-base-V28x5H/r-base-3.6.3=.
>> -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time
>> -D_FORTIFY_SOURCE=2 -g  -c assign.c -o assign.o
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From j@goreck| @end|ng |rom w|t@edu@p|  Sun Jun 21 14:31:14 2020
From: j@goreck| @end|ng |rom w|t@edu@p| (Jan Gorecki)
Date: Sun, 21 Jun 2020 13:31:14 +0100
Subject: [R-pkg-devel] Rbuildignore a file type from a top level directory
 only
Message-ID: <CAOO9MKV5UGRRV9g3DyVQmd2ppA=+wDvTS2H=E5yJv4kuFQA+kw@mail.gmail.com>

Hi R developers,

What is the proper way to define an entry in .Rbuildignore file to
exclude *.R files from a top level directory of R package?
Using ^.*\.R$ excludes every R script, including those in sub-directories.

Thank you,
Jan Gorecki


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Sun Jun 21 17:21:59 2020
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Mon, 22 Jun 2020 01:21:59 +1000
Subject: [R-pkg-devel] 
 Rbuildignore a file type from a top level directory only
In-Reply-To: <CAOO9MKV5UGRRV9g3DyVQmd2ppA=+wDvTS2H=E5yJv4kuFQA+kw@mail.gmail.com>
References: <CAOO9MKV5UGRRV9g3DyVQmd2ppA=+wDvTS2H=E5yJv4kuFQA+kw@mail.gmail.com>
Message-ID: <CAJmOi+No=KAh12ZQsUx8x9hvQeUvrtR=tCQ-ucR_3jz6Rm+T2w@mail.gmail.com>

Perhaps

^[^/]+\.R$

On Sun, 21 Jun 2020 at 22:31, Jan Gorecki <j.gorecki at wit.edu.pl> wrote:
>
> Hi R developers,
>
> What is the proper way to define an entry in .Rbuildignore file to
> exclude *.R files from a top level directory of R package?
> Using ^.*\.R$ excludes every R script, including those in sub-directories.
>
> Thank you,
> Jan Gorecki
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From j@goreck| @end|ng |rom w|t@edu@p|  Sun Jun 21 19:57:44 2020
From: j@goreck| @end|ng |rom w|t@edu@p| (Jan Gorecki)
Date: Sun, 21 Jun 2020 18:57:44 +0100
Subject: [R-pkg-devel] 
 Rbuildignore a file type from a top level directory only
In-Reply-To: <CAJmOi+No=KAh12ZQsUx8x9hvQeUvrtR=tCQ-ucR_3jz6Rm+T2w@mail.gmail.com>
References: <CAOO9MKV5UGRRV9g3DyVQmd2ppA=+wDvTS2H=E5yJv4kuFQA+kw@mail.gmail.com>
 <CAJmOi+No=KAh12ZQsUx8x9hvQeUvrtR=tCQ-ucR_3jz6Rm+T2w@mail.gmail.com>
Message-ID: <CAOO9MKUkHcoUG6kwcQD__07LGrdZRgB0v9LzGPqOD-v4gTt_CQ@mail.gmail.com>

Works great, thanks

On Sun, Jun 21, 2020 at 4:21 PM Hugh Parsonage <hugh.parsonage at gmail.com> wrote:
>
> Perhaps
>
> ^[^/]+\.R$
>
> On Sun, 21 Jun 2020 at 22:31, Jan Gorecki <j.gorecki at wit.edu.pl> wrote:
> >
> > Hi R developers,
> >
> > What is the proper way to define an entry in .Rbuildignore file to
> > exclude *.R files from a top level directory of R package?
> > Using ^.*\.R$ excludes every R script, including those in sub-directories.
> >
> > Thank you,
> > Jan Gorecki
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Mon Jun 22 19:00:02 2020
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (SP))
Date: Mon, 22 Jun 2020 17:00:02 +0000
Subject: [R-pkg-devel] Two packages with the same generic function
Message-ID: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>

Hi All,

Let's say there are two packages pkgA and pkgB, both of which have a generic function

foo <- function(x, ...)
   UseMethod("foo")

and pkgA has a method for objects of class "A":

foo.A <- function(x, ...)
   print(x)

and pkgB has a method for objects of class "B":

foo.B <- function(x, ...)
   plot(x)

Both packages export foo and their method and declare their respective S3 methods, so:

export(foo)
export(foo.A)
S3method(foo, A)

in NAMESPACE of pkgA and

export(foo)
export(foo.B)
S3method(foo, B)

in NAMESPACE of pkgB.

If a user loads pkgA first and then pkgB, this fails:

library(pkgA)
library(pkgB)
x <- 1:4
class(x) <- "A"
foo(x)

Error in UseMethod("foo") : 
  no applicable method for 'foo' applied to an object of class "A"

and vice-versa. Of course, pkgA::foo(x) works. Aside from pkgA importing foo() or vice-versa, is there some other clever way to make this work? In earlier versions of R (at least in 3.6.3), this used to work (i.e., the generic foo() from pkgB would find method foo.A() and vice-versa), but not since 4.0.0.

Best,
Wolfgang


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jun 22 19:38:53 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 22 Jun 2020 13:38:53 -0400
Subject: [R-pkg-devel] Two packages with the same generic function
In-Reply-To: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
References: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
Message-ID: <eade3449-5a5c-4e43-ec5e-1e4ed8506302@gmail.com>

On 22/06/2020 1:00 p.m., Viechtbauer, Wolfgang (SP) wrote:
> Hi All,
> 
> Let's say there are two packages pkgA and pkgB, both of which have a generic function
> 
> foo <- function(x, ...)
>     UseMethod("foo")
> 
> and pkgA has a method for objects of class "A":
> 
> foo.A <- function(x, ...)
>     print(x)
> 
> and pkgB has a method for objects of class "B":
> 
> foo.B <- function(x, ...)
>     plot(x)
> 
> Both packages export foo and their method and declare their respective S3 methods, so:
> 
> export(foo)
> export(foo.A)
> S3method(foo, A)
> 
> in NAMESPACE of pkgA and
> 
> export(foo)
> export(foo.B)
> S3method(foo, B)
> 
> in NAMESPACE of pkgB.
> 
> If a user loads pkgA first and then pkgB, this fails:
> 
> library(pkgA)
> library(pkgB)

Wouldn't the user have got a warning at this point about pkgB::foo 
masking pkgA::foo?

> x <- 1:4
> class(x) <- "A"
> foo(x)
> 
> Error in UseMethod("foo") :
>    no applicable method for 'foo' applied to an object of class "A"
> 
> and vice-versa. Of course, pkgA::foo(x) works. Aside from pkgA importing foo() or vice-versa, is there some other clever way to make this work? In earlier versions of R (at least in 3.6.3), this used to work (i.e., the generic foo() from pkgB would find method foo.A() and vice-versa), but not since 4.0.0.

Can't one of the packages import the generic from the other package, and 
then declare the method as a method of that other generic?  That seems 
like the only thing that would make sense.  There's no reason to believe 
that pkgA::foo has anything whatsoever to do with pkgB::foo without this.

Duncan Murdoch


From bgunter@4567 @end|ng |rom gm@||@com  Mon Jun 22 19:40:28 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 22 Jun 2020 10:40:28 -0700
Subject: [R-pkg-devel] Two packages with the same generic function
In-Reply-To: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
References: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
Message-ID: <CAGxFJbTX2h_c2LAemiQGbspjXf2stFWdKbmJWDkv-9WvQ3J=WQ@mail.gmail.com>

...
and just to add to the query, assume the author of pkg B did (does) not
know of pkg A and so, for example, could (did) not import any of pkg A's
content into B. Given that there are at the moment ~20,000 packages out
there, this does not seem to be an unreasonable assumption. One may even
further assume that the user may not know that (s)he has package B loaded,
as it may be a dependency of another package that (s)he uses. I certainly
don't keep track of all the dependencies of packages I use.

Under these assumptions, is there any more convenient alternative to
Wolfgang's pkgA:foo(x) explicit call under such assumptions? If pkgA has a
long name, what might one do?

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Jun 22, 2020 at 10:00 AM Viechtbauer, Wolfgang (SP) <
wolfgang.viechtbauer at maastrichtuniversity.nl> wrote:

> Hi All,
>
> Let's say there are two packages pkgA and pkgB, both of which have a
> generic function
>
> foo <- function(x, ...)
>    UseMethod("foo")
>
> and pkgA has a method for objects of class "A":
>
> foo.A <- function(x, ...)
>    print(x)
>
> and pkgB has a method for objects of class "B":
>
> foo.B <- function(x, ...)
>    plot(x)
>
> Both packages export foo and their method and declare their respective S3
> methods, so:
>
> export(foo)
> export(foo.A)
> S3method(foo, A)
>
> in NAMESPACE of pkgA and
>
> export(foo)
> export(foo.B)
> S3method(foo, B)
>
> in NAMESPACE of pkgB.
>
> If a user loads pkgA first and then pkgB, this fails:
>
> library(pkgA)
> library(pkgB)
> x <- 1:4
> class(x) <- "A"
> foo(x)
>
> Error in UseMethod("foo") :
>   no applicable method for 'foo' applied to an object of class "A"
>
> and vice-versa. Of course, pkgA::foo(x) works. Aside from pkgA importing
> foo() or vice-versa, is there some other clever way to make this work? In
> earlier versions of R (at least in 3.6.3), this used to work (i.e., the
> generic foo() from pkgB would find method foo.A() and vice-versa), but not
> since 4.0.0.
>
> Best,
> Wolfgang
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jun 22 19:52:36 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 22 Jun 2020 13:52:36 -0400
Subject: [R-pkg-devel] Two packages with the same generic function
In-Reply-To: <CAGxFJbTX2h_c2LAemiQGbspjXf2stFWdKbmJWDkv-9WvQ3J=WQ@mail.gmail.com>
References: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
 <CAGxFJbTX2h_c2LAemiQGbspjXf2stFWdKbmJWDkv-9WvQ3J=WQ@mail.gmail.com>
Message-ID: <156360bc-8764-e66c-80a2-676d09ac4332@gmail.com>

On 22/06/2020 1:40 p.m., Bert Gunter wrote:
> ...
> and just to add to the query, assume the author of pkg B did (does) not
> know of pkg A and so, for example, could (did) not import any of pkg A's
> content into B. Given that there are at the moment ~20,000 packages out
> there, this does not seem to be an unreasonable assumption. One may even
> further assume that the user may not know that (s)he has package B loaded,
> as it may be a dependency of another package that (s)he uses. I certainly
> don't keep track of all the dependencies of packages I use.
> 
> Under these assumptions, is there any more convenient alternative to
> Wolfgang's pkgA:foo(x) explicit call under such assumptions? If pkgA has a
> long name, what might one do?

It's always possible to make a new name, e.g.

fooA <- pkgA::foo
fooB <- pkgB::foo

If you are writing a package, this can be done in the NAMESPACE file, e.g.

importFrom(pkgA, fooA = foo)

though this doesn't appear to be documented in the usual places.

Duncan Murdoch


> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Mon, Jun 22, 2020 at 10:00 AM Viechtbauer, Wolfgang (SP) <
> wolfgang.viechtbauer at maastrichtuniversity.nl> wrote:
> 
>> Hi All,
>>
>> Let's say there are two packages pkgA and pkgB, both of which have a
>> generic function
>>
>> foo <- function(x, ...)
>>     UseMethod("foo")
>>
>> and pkgA has a method for objects of class "A":
>>
>> foo.A <- function(x, ...)
>>     print(x)
>>
>> and pkgB has a method for objects of class "B":
>>
>> foo.B <- function(x, ...)
>>     plot(x)
>>
>> Both packages export foo and their method and declare their respective S3
>> methods, so:
>>
>> export(foo)
>> export(foo.A)
>> S3method(foo, A)
>>
>> in NAMESPACE of pkgA and
>>
>> export(foo)
>> export(foo.B)
>> S3method(foo, B)
>>
>> in NAMESPACE of pkgB.
>>
>> If a user loads pkgA first and then pkgB, this fails:
>>
>> library(pkgA)
>> library(pkgB)
>> x <- 1:4
>> class(x) <- "A"
>> foo(x)
>>
>> Error in UseMethod("foo") :
>>    no applicable method for 'foo' applied to an object of class "A"
>>
>> and vice-versa. Of course, pkgA::foo(x) works. Aside from pkgA importing
>> foo() or vice-versa, is there some other clever way to make this work? In
>> earlier versions of R (at least in 3.6.3), this used to work (i.e., the
>> generic foo() from pkgB would find method foo.A() and vice-versa), but not
>> since 4.0.0.
>>
>> Best,
>> Wolfgang
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From n|u|tz @end|ng |rom gm@||@com  Mon Jun 22 20:35:50 2020
From: n|u|tz @end|ng |rom gm@||@com (Neal Fultz)
Date: Mon, 22 Jun 2020 11:35:50 -0700
Subject: [R-pkg-devel] Two packages with the same generic function
In-Reply-To: <156360bc-8764-e66c-80a2-676d09ac4332@gmail.com>
References: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
 <CAGxFJbTX2h_c2LAemiQGbspjXf2stFWdKbmJWDkv-9WvQ3J=WQ@mail.gmail.com>
 <156360bc-8764-e66c-80a2-676d09ac4332@gmail.com>
Message-ID: <CAL9B2vdGe0sU51xYb2epVQQM0v-fu+OXhu5zgy0WGiptoX7+Og@mail.gmail.com>

Another decent alternative is to submit the generic function to the
`generics` package - https://github.com/r-lib/generics - or create
your own API package.

Both package A and B can import the generic from it, and everything
works fine. It may also reduce your dependencies and/or build time.

This is much simpler than the workarounds we had tried to optionally
allow use of tidy() from DeclareDesign without transitively importing
the entire tidyverse, for example.

We had tried various ways of delegating from pkgA::foo.default to
pkgB::foo but it had some edge cases around the order that the user
attached the packages IIRC.

On Mon, Jun 22, 2020 at 11:01 AM Duncan Murdoch
<murdoch.duncan at gmail.com> wrote:
>
> On 22/06/2020 1:40 p.m., Bert Gunter wrote:
> > ...
> > and just to add to the query, assume the author of pkg B did (does) not
> > know of pkg A and so, for example, could (did) not import any of pkg A's
> > content into B. Given that there are at the moment ~20,000 packages out
> > there, this does not seem to be an unreasonable assumption. One may even
> > further assume that the user may not know that (s)he has package B loaded,
> > as it may be a dependency of another package that (s)he uses. I certainly
> > don't keep track of all the dependencies of packages I use.
> >
> > Under these assumptions, is there any more convenient alternative to
> > Wolfgang's pkgA:foo(x) explicit call under such assumptions? If pkgA has a
> > long name, what might one do?
>
> It's always possible to make a new name, e.g.
>
> fooA <- pkgA::foo
> fooB <- pkgB::foo
>
> If you are writing a package, this can be done in the NAMESPACE file, e.g.
>
> importFrom(pkgA, fooA = foo)
>
> though this doesn't appear to be documented in the usual places.
>
> Duncan Murdoch
>
>
> >
> > Bert Gunter
> >
> > "The trouble with having an open mind is that people keep coming along and
> > sticking things into it."
> > -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >
> >
> > On Mon, Jun 22, 2020 at 10:00 AM Viechtbauer, Wolfgang (SP) <
> > wolfgang.viechtbauer at maastrichtuniversity.nl> wrote:
> >
> >> Hi All,
> >>
> >> Let's say there are two packages pkgA and pkgB, both of which have a
> >> generic function
> >>
> >> foo <- function(x, ...)
> >>     UseMethod("foo")
> >>
> >> and pkgA has a method for objects of class "A":
> >>
> >> foo.A <- function(x, ...)
> >>     print(x)
> >>
> >> and pkgB has a method for objects of class "B":
> >>
> >> foo.B <- function(x, ...)
> >>     plot(x)
> >>
> >> Both packages export foo and their method and declare their respective S3
> >> methods, so:
> >>
> >> export(foo)
> >> export(foo.A)
> >> S3method(foo, A)
> >>
> >> in NAMESPACE of pkgA and
> >>
> >> export(foo)
> >> export(foo.B)
> >> S3method(foo, B)
> >>
> >> in NAMESPACE of pkgB.
> >>
> >> If a user loads pkgA first and then pkgB, this fails:
> >>
> >> library(pkgA)
> >> library(pkgB)
> >> x <- 1:4
> >> class(x) <- "A"
> >> foo(x)
> >>
> >> Error in UseMethod("foo") :
> >>    no applicable method for 'foo' applied to an object of class "A"
> >>
> >> and vice-versa. Of course, pkgA::foo(x) works. Aside from pkgA importing
> >> foo() or vice-versa, is there some other clever way to make this work? In
> >> earlier versions of R (at least in 3.6.3), this used to work (i.e., the
> >> generic foo() from pkgB would find method foo.A() and vice-versa), but not
> >> since 4.0.0.
> >>
> >> Best,
> >> Wolfgang
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From tcw@|nw @end|ng |rom gm@||@com  Mon Jun 22 21:48:49 2020
From: tcw@|nw @end|ng |rom gm@||@com (Tom Wainwright)
Date: Mon, 22 Jun 2020 12:48:49 -0700
Subject: [R-pkg-devel] Two packages with the same generic function
In-Reply-To: <CAGxFJbTX2h_c2LAemiQGbspjXf2stFWdKbmJWDkv-9WvQ3J=WQ@mail.gmail.com>
References: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
 <CAGxFJbTX2h_c2LAemiQGbspjXf2stFWdKbmJWDkv-9WvQ3J=WQ@mail.gmail.com>
Message-ID: <CAHHCy8G6TG9=tYDOFWdt9gsQo3j3AZi_JzNiECAAWy8mBjNOqg@mail.gmail.com>

Yet another alternative is simply to prevent your second package from
overriding the previously defined generic. The basic problem is the ease
with which R allows overriding prior generic definitions (one of those bits
of bad behavior we in the USA used to call "a Bozo No-No"), which hides all
the previous methods, as demonstrated by the following code:

> plot(1:3)
> > plot <- function(x, ...) UseMethod("plot")
> > plot(1:3)
> Error in UseMethod("plot") :
>   no applicable method for 'plot' applied to an object of class
> "c('integer', 'numeric')"
> > rm(plot)
> > plot(1:3)


(Despite Murdoch's suggestion that overriding the generic SHOULD issue a
warning, it doesn't seem to in R 4.0.1.)

So, we might try protecting the generic definitions of "foo" in both
packages by enclosing them in something like:

tryCatch(invisible(methods("foo")), error = {foo <- function(x,...)
> UseMethod("foo")}, finally=NULL)


There's probably a more elegant way to accomplish this. This relies on
"methods" returning an error if "foo" has no defined methods, so it is not
redefined if their are previous methods. I haven't had time to try this in
the two-package example, but it might work, although I'm not sure how to
handle the Namespace declarations.

  Tom Wainwright

On Mon, Jun 22, 2020 at 10:41 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> ...
> and just to add to the query, assume the author of pkg B did (does) not
> know of pkg A and so, for example, could (did) not import any of pkg A's
> content into B. Given that there are at the moment ~20,000 packages out
> there, this does not seem to be an unreasonable assumption. One may even
> further assume that the user may not know that (s)he has package B loaded,
> as it may be a dependency of another package that (s)he uses. I certainly
> don't keep track of all the dependencies of packages I use.
>
> Under these assumptions, is there any more convenient alternative to
> Wolfgang's pkgA:foo(x) explicit call under such assumptions? If pkgA has a
> long name, what might one do?
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Mon, Jun 22, 2020 at 10:00 AM Viechtbauer, Wolfgang (SP) <
> wolfgang.viechtbauer at maastrichtuniversity.nl> wrote:
>
> > Hi All,
> >
> > Let's say there are two packages pkgA and pkgB, both of which have a
> > generic function
> >
> > foo <- function(x, ...)
> >    UseMethod("foo")
> >
> > and pkgA has a method for objects of class "A":
> >
> > foo.A <- function(x, ...)
> >    print(x)
> >
> > and pkgB has a method for objects of class "B":
> >
> > foo.B <- function(x, ...)
> >    plot(x)
> >
> > Both packages export foo and their method and declare their respective S3
> > methods, so:
> >
> > export(foo)
> > export(foo.A)
> > S3method(foo, A)
> >
> > in NAMESPACE of pkgA and
> >
> > export(foo)
> > export(foo.B)
> > S3method(foo, B)
> >
> > in NAMESPACE of pkgB.
> >
> > If a user loads pkgA first and then pkgB, this fails:
> >
> > library(pkgA)
> > library(pkgB)
> > x <- 1:4
> > class(x) <- "A"
> > foo(x)
> >
> > Error in UseMethod("foo") :
> >   no applicable method for 'foo' applied to an object of class "A"
> >
> > and vice-versa. Of course, pkgA::foo(x) works. Aside from pkgA importing
> > foo() or vice-versa, is there some other clever way to make this work? In
> > earlier versions of R (at least in 3.6.3), this used to work (i.e., the
> > generic foo() from pkgB would find method foo.A() and vice-versa), but
> not
> > since 4.0.0.
> >
> > Best,
> > Wolfgang
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jun 23 01:57:24 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 22 Jun 2020 19:57:24 -0400
Subject: [R-pkg-devel] Two packages with the same generic function
In-Reply-To: <CAHHCy8G6TG9=tYDOFWdt9gsQo3j3AZi_JzNiECAAWy8mBjNOqg@mail.gmail.com>
References: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
 <CAGxFJbTX2h_c2LAemiQGbspjXf2stFWdKbmJWDkv-9WvQ3J=WQ@mail.gmail.com>
 <CAHHCy8G6TG9=tYDOFWdt9gsQo3j3AZi_JzNiECAAWy8mBjNOqg@mail.gmail.com>
Message-ID: <6f148591-e572-cc6d-1fa1-16ef1684b5b7@gmail.com>

On 22/06/2020 3:48 p.m., Tom Wainwright wrote:
> Yet another alternative is simply to prevent your second package from
> overriding the previously defined generic. The basic problem is the ease
> with which R allows overriding prior generic definitions (one of those bits
> of bad behavior we in the USA used to call "a Bozo No-No"), which hides all
> the previous methods, as demonstrated by the following code:
> 
>> plot(1:3)
>>> plot <- function(x, ...) UseMethod("plot")
>>> plot(1:3)
>> Error in UseMethod("plot") :
>>    no applicable method for 'plot' applied to an object of class
>> "c('integer', 'numeric')"
>>> rm(plot)
>>> plot(1:3)
> 
> 
> (Despite Murdoch's suggestion that overriding the generic SHOULD issue a
> warning, it doesn't seem to in R 4.0.1.)

Sure it does, if pkgA and pkgB both export the same name, then you get a 
warning when you attach the second one.  For example,

 > library(MASS)
 > library(dplyr)

Attaching package: ?dplyr?

The following object is masked from ?package:MASS?:

     select

The following objects are masked from ?package:stats?:

     filter, lag

The following objects are masked from ?package:base?:

     intersect, setdiff, setequal, union

Users don't get warned about overriding names in packages they've 
loaded, because that would just be irritating.

Duncan Murdoch

> 
> So, we might try protecting the generic definitions of "foo" in both
> packages by enclosing them in something like:
> 
> tryCatch(invisible(methods("foo")), error = {foo <- function(x,...)
>> UseMethod("foo")}, finally=NULL)
> 
> 
> There's probably a more elegant way to accomplish this. This relies on
> "methods" returning an error if "foo" has no defined methods, so it is not
> redefined if their are previous methods. I haven't had time to try this in
> the two-package example, but it might work, although I'm not sure how to
> handle the Namespace declarations.
> 
>    Tom Wainwright
> 
> On Mon, Jun 22, 2020 at 10:41 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
>> ...
>> and just to add to the query, assume the author of pkg B did (does) not
>> know of pkg A and so, for example, could (did) not import any of pkg A's
>> content into B. Given that there are at the moment ~20,000 packages out
>> there, this does not seem to be an unreasonable assumption. One may even
>> further assume that the user may not know that (s)he has package B loaded,
>> as it may be a dependency of another package that (s)he uses. I certainly
>> don't keep track of all the dependencies of packages I use.
>>
>> Under these assumptions, is there any more convenient alternative to
>> Wolfgang's pkgA:foo(x) explicit call under such assumptions? If pkgA has a
>> long name, what might one do?
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along and
>> sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Mon, Jun 22, 2020 at 10:00 AM Viechtbauer, Wolfgang (SP) <
>> wolfgang.viechtbauer at maastrichtuniversity.nl> wrote:
>>
>>> Hi All,
>>>
>>> Let's say there are two packages pkgA and pkgB, both of which have a
>>> generic function
>>>
>>> foo <- function(x, ...)
>>>     UseMethod("foo")
>>>
>>> and pkgA has a method for objects of class "A":
>>>
>>> foo.A <- function(x, ...)
>>>     print(x)
>>>
>>> and pkgB has a method for objects of class "B":
>>>
>>> foo.B <- function(x, ...)
>>>     plot(x)
>>>
>>> Both packages export foo and their method and declare their respective S3
>>> methods, so:
>>>
>>> export(foo)
>>> export(foo.A)
>>> S3method(foo, A)
>>>
>>> in NAMESPACE of pkgA and
>>>
>>> export(foo)
>>> export(foo.B)
>>> S3method(foo, B)
>>>
>>> in NAMESPACE of pkgB.
>>>
>>> If a user loads pkgA first and then pkgB, this fails:
>>>
>>> library(pkgA)
>>> library(pkgB)
>>> x <- 1:4
>>> class(x) <- "A"
>>> foo(x)
>>>
>>> Error in UseMethod("foo") :
>>>    no applicable method for 'foo' applied to an object of class "A"
>>>
>>> and vice-versa. Of course, pkgA::foo(x) works. Aside from pkgA importing
>>> foo() or vice-versa, is there some other clever way to make this work? In
>>> earlier versions of R (at least in 3.6.3), this used to work (i.e., the
>>> generic foo() from pkgB would find method foo.A() and vice-versa), but
>> not
>>> since 4.0.0.
>>>
>>> Best,
>>> Wolfgang
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From m@rk|eed@2 @end|ng |rom gm@||@com  Tue Jun 23 02:58:14 2020
From: m@rk|eed@2 @end|ng |rom gm@||@com (Mark Leeds)
Date: Mon, 22 Jun 2020 20:58:14 -0400
Subject: [R-pkg-devel] Two packages with the same generic function
In-Reply-To: <6f148591-e572-cc6d-1fa1-16ef1684b5b7@gmail.com>
References: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
 <CAGxFJbTX2h_c2LAemiQGbspjXf2stFWdKbmJWDkv-9WvQ3J=WQ@mail.gmail.com>
 <CAHHCy8G6TG9=tYDOFWdt9gsQo3j3AZi_JzNiECAAWy8mBjNOqg@mail.gmail.com>
 <6f148591-e572-cc6d-1fa1-16ef1684b5b7@gmail.com>
Message-ID: <CAHz+bWYfb22itYZ5gWLoJyXdUoZOWJ4GJJY6Gk0GW2FLdC2EPg@mail.gmail.com>

Hi Duncan: I maintain dynlm and your example is the exact reason I've been
getting emails from people regarding
it not working correctly. I've been telling them to load dplyr by using

library(dplyr, exclude = c("filter", "lag"))





On Mon, Jun 22, 2020 at 7:57 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 22/06/2020 3:48 p.m., Tom Wainwright wrote:
> > Yet another alternative is simply to prevent your second package from
> > overriding the previously defined generic. The basic problem is the ease
> > with which R allows overriding prior generic definitions (one of those
> bits
> > of bad behavior we in the USA used to call "a Bozo No-No"), which hides
> all
> > the previous methods, as demonstrated by the following code:
> >
> >> plot(1:3)
> >>> plot <- function(x, ...) UseMethod("plot")
> >>> plot(1:3)
> >> Error in UseMethod("plot") :
> >>    no applicable method for 'plot' applied to an object of class
> >> "c('integer', 'numeric')"
> >>> rm(plot)
> >>> plot(1:3)
> >
> >
> > (Despite Murdoch's suggestion that overriding the generic SHOULD issue a
> > warning, it doesn't seem to in R 4.0.1.)
>
> Sure it does, if pkgA and pkgB both export the same name, then you get a
> warning when you attach the second one.  For example,
>
>  > library(MASS)
>  > library(dplyr)
>
> Attaching package: ?dplyr?
>
> The following object is masked from ?package:MASS?:
>
>      select
>
> The following objects are masked from ?package:stats?:
>
>      filter, lag
>
> The following objects are masked from ?package:base?:
>
>      intersect, setdiff, setequal, union
>
> Users don't get warned about overriding names in packages they've
> loaded, because that would just be irritating.
>
> Duncan Murdoch
>
> >
> > So, we might try protecting the generic definitions of "foo" in both
> > packages by enclosing them in something like:
> >
> > tryCatch(invisible(methods("foo")), error = {foo <- function(x,...)
> >> UseMethod("foo")}, finally=NULL)
> >
> >
> > There's probably a more elegant way to accomplish this. This relies on
> > "methods" returning an error if "foo" has no defined methods, so it is
> not
> > redefined if their are previous methods. I haven't had time to try this
> in
> > the two-package example, but it might work, although I'm not sure how to
> > handle the Namespace declarations.
> >
> >    Tom Wainwright
> >
> > On Mon, Jun 22, 2020 at 10:41 AM Bert Gunter <bgunter.4567 at gmail.com>
> wrote:
> >
> >> ...
> >> and just to add to the query, assume the author of pkg B did (does) not
> >> know of pkg A and so, for example, could (did) not import any of pkg A's
> >> content into B. Given that there are at the moment ~20,000 packages out
> >> there, this does not seem to be an unreasonable assumption. One may even
> >> further assume that the user may not know that (s)he has package B
> loaded,
> >> as it may be a dependency of another package that (s)he uses. I
> certainly
> >> don't keep track of all the dependencies of packages I use.
> >>
> >> Under these assumptions, is there any more convenient alternative to
> >> Wolfgang's pkgA:foo(x) explicit call under such assumptions? If pkgA
> has a
> >> long name, what might one do?
> >>
> >> Bert Gunter
> >>
> >> "The trouble with having an open mind is that people keep coming along
> and
> >> sticking things into it."
> >> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >>
> >>
> >> On Mon, Jun 22, 2020 at 10:00 AM Viechtbauer, Wolfgang (SP) <
> >> wolfgang.viechtbauer at maastrichtuniversity.nl> wrote:
> >>
> >>> Hi All,
> >>>
> >>> Let's say there are two packages pkgA and pkgB, both of which have a
> >>> generic function
> >>>
> >>> foo <- function(x, ...)
> >>>     UseMethod("foo")
> >>>
> >>> and pkgA has a method for objects of class "A":
> >>>
> >>> foo.A <- function(x, ...)
> >>>     print(x)
> >>>
> >>> and pkgB has a method for objects of class "B":
> >>>
> >>> foo.B <- function(x, ...)
> >>>     plot(x)
> >>>
> >>> Both packages export foo and their method and declare their respective
> S3
> >>> methods, so:
> >>>
> >>> export(foo)
> >>> export(foo.A)
> >>> S3method(foo, A)
> >>>
> >>> in NAMESPACE of pkgA and
> >>>
> >>> export(foo)
> >>> export(foo.B)
> >>> S3method(foo, B)
> >>>
> >>> in NAMESPACE of pkgB.
> >>>
> >>> If a user loads pkgA first and then pkgB, this fails:
> >>>
> >>> library(pkgA)
> >>> library(pkgB)
> >>> x <- 1:4
> >>> class(x) <- "A"
> >>> foo(x)
> >>>
> >>> Error in UseMethod("foo") :
> >>>    no applicable method for 'foo' applied to an object of class "A"
> >>>
> >>> and vice-versa. Of course, pkgA::foo(x) works. Aside from pkgA
> importing
> >>> foo() or vice-versa, is there some other clever way to make this work?
> In
> >>> earlier versions of R (at least in 3.6.3), this used to work (i.e., the
> >>> generic foo() from pkgB would find method foo.A() and vice-versa), but
> >> not
> >>> since 4.0.0.
> >>>
> >>> Best,
> >>> Wolfgang
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>
> >>
> >>          [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jun 23 04:17:04 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 22 Jun 2020 19:17:04 -0700
Subject: [R-pkg-devel] Two packages with the same generic function
In-Reply-To: <CAHz+bWYfb22itYZ5gWLoJyXdUoZOWJ4GJJY6Gk0GW2FLdC2EPg@mail.gmail.com>
References: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
 <CAGxFJbTX2h_c2LAemiQGbspjXf2stFWdKbmJWDkv-9WvQ3J=WQ@mail.gmail.com>
 <CAHHCy8G6TG9=tYDOFWdt9gsQo3j3AZi_JzNiECAAWy8mBjNOqg@mail.gmail.com>
 <6f148591-e572-cc6d-1fa1-16ef1684b5b7@gmail.com>
 <CAHz+bWYfb22itYZ5gWLoJyXdUoZOWJ4GJJY6Gk0GW2FLdC2EPg@mail.gmail.com>
Message-ID: <CAGxFJbR1SJ0ge0Q0A3Z9NtWQ-Qi97bqe7UO2=L2PRWTLy_1haA@mail.gmail.com>

"Users don't get warned about overriding names in packages they've
loaded, because that would just be irritating."

Is that also true if the package or generic is imported by another that
they load; or is a dependency of a package they load? If so, I would not
call it "just irritating" because if silent, how would they know?


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Jun 22, 2020 at 5:58 PM Mark Leeds <markleeds2 at gmail.com> wrote:

> Hi Duncan: I maintain dynlm and your example is the exact reason I've been
> getting emails from people regarding
> it not working correctly. I've been telling them to load dplyr by using
>
> library(dplyr, exclude = c("filter", "lag"))
>
>
>
>
>
> On Mon, Jun 22, 2020 at 7:57 PM Duncan Murdoch <murdoch.duncan at gmail.com>
> wrote:
>
> > On 22/06/2020 3:48 p.m., Tom Wainwright wrote:
> > > Yet another alternative is simply to prevent your second package from
> > > overriding the previously defined generic. The basic problem is the
> ease
> > > with which R allows overriding prior generic definitions (one of those
> > bits
> > > of bad behavior we in the USA used to call "a Bozo No-No"), which hides
> > all
> > > the previous methods, as demonstrated by the following code:
> > >
> > >> plot(1:3)
> > >>> plot <- function(x, ...) UseMethod("plot")
> > >>> plot(1:3)
> > >> Error in UseMethod("plot") :
> > >>    no applicable method for 'plot' applied to an object of class
> > >> "c('integer', 'numeric')"
> > >>> rm(plot)
> > >>> plot(1:3)
> > >
> > >
> > > (Despite Murdoch's suggestion that overriding the generic SHOULD issue
> a
> > > warning, it doesn't seem to in R 4.0.1.)
> >
> > Sure it does, if pkgA and pkgB both export the same name, then you get a
> > warning when you attach the second one.  For example,
> >
> >  > library(MASS)
> >  > library(dplyr)
> >
> > Attaching package: ?dplyr?
> >
> > The following object is masked from ?package:MASS?:
> >
> >      select
> >
> > The following objects are masked from ?package:stats?:
> >
> >      filter, lag
> >
> > The following objects are masked from ?package:base?:
> >
> >      intersect, setdiff, setequal, union
> >
> > Users don't get warned about overriding names in packages they've
> > loaded, because that would just be irritating.
> >
> > Duncan Murdoch
> >
> > >
> > > So, we might try protecting the generic definitions of "foo" in both
> > > packages by enclosing them in something like:
> > >
> > > tryCatch(invisible(methods("foo")), error = {foo <- function(x,...)
> > >> UseMethod("foo")}, finally=NULL)
> > >
> > >
> > > There's probably a more elegant way to accomplish this. This relies on
> > > "methods" returning an error if "foo" has no defined methods, so it is
> > not
> > > redefined if their are previous methods. I haven't had time to try this
> > in
> > > the two-package example, but it might work, although I'm not sure how
> to
> > > handle the Namespace declarations.
> > >
> > >    Tom Wainwright
> > >
> > > On Mon, Jun 22, 2020 at 10:41 AM Bert Gunter <bgunter.4567 at gmail.com>
> > wrote:
> > >
> > >> ...
> > >> and just to add to the query, assume the author of pkg B did (does)
> not
> > >> know of pkg A and so, for example, could (did) not import any of pkg
> A's
> > >> content into B. Given that there are at the moment ~20,000 packages
> out
> > >> there, this does not seem to be an unreasonable assumption. One may
> even
> > >> further assume that the user may not know that (s)he has package B
> > loaded,
> > >> as it may be a dependency of another package that (s)he uses. I
> > certainly
> > >> don't keep track of all the dependencies of packages I use.
> > >>
> > >> Under these assumptions, is there any more convenient alternative to
> > >> Wolfgang's pkgA:foo(x) explicit call under such assumptions? If pkgA
> > has a
> > >> long name, what might one do?
> > >>
> > >> Bert Gunter
> > >>
> > >> "The trouble with having an open mind is that people keep coming along
> > and
> > >> sticking things into it."
> > >> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> > >>
> > >>
> > >> On Mon, Jun 22, 2020 at 10:00 AM Viechtbauer, Wolfgang (SP) <
> > >> wolfgang.viechtbauer at maastrichtuniversity.nl> wrote:
> > >>
> > >>> Hi All,
> > >>>
> > >>> Let's say there are two packages pkgA and pkgB, both of which have a
> > >>> generic function
> > >>>
> > >>> foo <- function(x, ...)
> > >>>     UseMethod("foo")
> > >>>
> > >>> and pkgA has a method for objects of class "A":
> > >>>
> > >>> foo.A <- function(x, ...)
> > >>>     print(x)
> > >>>
> > >>> and pkgB has a method for objects of class "B":
> > >>>
> > >>> foo.B <- function(x, ...)
> > >>>     plot(x)
> > >>>
> > >>> Both packages export foo and their method and declare their
> respective
> > S3
> > >>> methods, so:
> > >>>
> > >>> export(foo)
> > >>> export(foo.A)
> > >>> S3method(foo, A)
> > >>>
> > >>> in NAMESPACE of pkgA and
> > >>>
> > >>> export(foo)
> > >>> export(foo.B)
> > >>> S3method(foo, B)
> > >>>
> > >>> in NAMESPACE of pkgB.
> > >>>
> > >>> If a user loads pkgA first and then pkgB, this fails:
> > >>>
> > >>> library(pkgA)
> > >>> library(pkgB)
> > >>> x <- 1:4
> > >>> class(x) <- "A"
> > >>> foo(x)
> > >>>
> > >>> Error in UseMethod("foo") :
> > >>>    no applicable method for 'foo' applied to an object of class "A"
> > >>>
> > >>> and vice-versa. Of course, pkgA::foo(x) works. Aside from pkgA
> > importing
> > >>> foo() or vice-versa, is there some other clever way to make this
> work?
> > In
> > >>> earlier versions of R (at least in 3.6.3), this used to work (i.e.,
> the
> > >>> generic foo() from pkgB would find method foo.A() and vice-versa),
> but
> > >> not
> > >>> since 4.0.0.
> > >>>
> > >>> Best,
> > >>> Wolfgang
> > >>>
> > >>> ______________________________________________
> > >>> R-package-devel at r-project.org mailing list
> > >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >>>
> > >>
> > >>          [[alternative HTML version deleted]]
> > >>
> > >> ______________________________________________
> > >> R-package-devel at r-project.org mailing list
> > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >>
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From iuke-tier@ey m@iii@g oii uiow@@edu  Tue Jun 23 04:51:55 2020
From: iuke-tier@ey m@iii@g oii uiow@@edu (iuke-tier@ey m@iii@g oii uiow@@edu)
Date: Mon, 22 Jun 2020 21:51:55 -0500 (CDT)
Subject: [R-pkg-devel] [External] Re: Two packages with the same generic
 function
In-Reply-To: <CAGxFJbR1SJ0ge0Q0A3Z9NtWQ-Qi97bqe7UO2=L2PRWTLy_1haA@mail.gmail.com>
References: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
 <CAGxFJbTX2h_c2LAemiQGbspjXf2stFWdKbmJWDkv-9WvQ3J=WQ@mail.gmail.com>
 <CAHHCy8G6TG9=tYDOFWdt9gsQo3j3AZi_JzNiECAAWy8mBjNOqg@mail.gmail.com>
 <6f148591-e572-cc6d-1fa1-16ef1684b5b7@gmail.com>
 <CAHz+bWYfb22itYZ5gWLoJyXdUoZOWJ4GJJY6Gk0GW2FLdC2EPg@mail.gmail.com>
 <CAGxFJbR1SJ0ge0Q0A3Z9NtWQ-Qi97bqe7UO2=L2PRWTLy_1haA@mail.gmail.com>
Message-ID: <alpine.DEB.2.21.2006222147290.32631@luke-Latitude-7480>

On Tue, 23 Jun 2020, Bert Gunter wrote:

> "Users don't get warned about overriding names in packages they've
> loaded, because that would just be irritating."

All Duncan is saying is that you don't get a notification if you do

     mean <- log

in the interpreter. If you attach a package that does this you would
get a notification (or an error if you configure your conflict
resolution options appropriately).

Best,

luke

>
> Is that also true if the package or generic is imported by another that
> they load; or is a dependency of a package they load? If so, I would not
> call it "just irritating" because if silent, how would they know?
>
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Mon, Jun 22, 2020 at 5:58 PM Mark Leeds <markleeds2 at gmail.com> wrote:
>
>> Hi Duncan: I maintain dynlm and your example is the exact reason I've been
>> getting emails from people regarding
>> it not working correctly. I've been telling them to load dplyr by using
>>
>> library(dplyr, exclude = c("filter", "lag"))
>>
>>
>>
>>
>>
>> On Mon, Jun 22, 2020 at 7:57 PM Duncan Murdoch <murdoch.duncan at gmail.com>
>> wrote:
>>
>>> On 22/06/2020 3:48 p.m., Tom Wainwright wrote:
>>>> Yet another alternative is simply to prevent your second package from
>>>> overriding the previously defined generic. The basic problem is the
>> ease
>>>> with which R allows overriding prior generic definitions (one of those
>>> bits
>>>> of bad behavior we in the USA used to call "a Bozo No-No"), which hides
>>> all
>>>> the previous methods, as demonstrated by the following code:
>>>>
>>>>> plot(1:3)
>>>>>> plot <- function(x, ...) UseMethod("plot")
>>>>>> plot(1:3)
>>>>> Error in UseMethod("plot") :
>>>>>    no applicable method for 'plot' applied to an object of class
>>>>> "c('integer', 'numeric')"
>>>>>> rm(plot)
>>>>>> plot(1:3)
>>>>
>>>>
>>>> (Despite Murdoch's suggestion that overriding the generic SHOULD issue
>> a
>>>> warning, it doesn't seem to in R 4.0.1.)
>>>
>>> Sure it does, if pkgA and pkgB both export the same name, then you get a
>>> warning when you attach the second one.  For example,
>>>
>>> > library(MASS)
>>> > library(dplyr)
>>>
>>> Attaching package: ?dplyr?
>>>
>>> The following object is masked from ?package:MASS?:
>>>
>>>      select
>>>
>>> The following objects are masked from ?package:stats?:
>>>
>>>      filter, lag
>>>
>>> The following objects are masked from ?package:base?:
>>>
>>>      intersect, setdiff, setequal, union
>>>
>>> Users don't get warned about overriding names in packages they've
>>> loaded, because that would just be irritating.
>>>
>>> Duncan Murdoch
>>>
>>>>
>>>> So, we might try protecting the generic definitions of "foo" in both
>>>> packages by enclosing them in something like:
>>>>
>>>> tryCatch(invisible(methods("foo")), error = {foo <- function(x,...)
>>>>> UseMethod("foo")}, finally=NULL)
>>>>
>>>>
>>>> There's probably a more elegant way to accomplish this. This relies on
>>>> "methods" returning an error if "foo" has no defined methods, so it is
>>> not
>>>> redefined if their are previous methods. I haven't had time to try this
>>> in
>>>> the two-package example, but it might work, although I'm not sure how
>> to
>>>> handle the Namespace declarations.
>>>>
>>>>    Tom Wainwright
>>>>
>>>> On Mon, Jun 22, 2020 at 10:41 AM Bert Gunter <bgunter.4567 at gmail.com>
>>> wrote:
>>>>
>>>>> ...
>>>>> and just to add to the query, assume the author of pkg B did (does)
>> not
>>>>> know of pkg A and so, for example, could (did) not import any of pkg
>> A's
>>>>> content into B. Given that there are at the moment ~20,000 packages
>> out
>>>>> there, this does not seem to be an unreasonable assumption. One may
>> even
>>>>> further assume that the user may not know that (s)he has package B
>>> loaded,
>>>>> as it may be a dependency of another package that (s)he uses. I
>>> certainly
>>>>> don't keep track of all the dependencies of packages I use.
>>>>>
>>>>> Under these assumptions, is there any more convenient alternative to
>>>>> Wolfgang's pkgA:foo(x) explicit call under such assumptions? If pkgA
>>> has a
>>>>> long name, what might one do?
>>>>>
>>>>> Bert Gunter
>>>>>
>>>>> "The trouble with having an open mind is that people keep coming along
>>> and
>>>>> sticking things into it."
>>>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>>>>
>>>>>
>>>>> On Mon, Jun 22, 2020 at 10:00 AM Viechtbauer, Wolfgang (SP) <
>>>>> wolfgang.viechtbauer at maastrichtuniversity.nl> wrote:
>>>>>
>>>>>> Hi All,
>>>>>>
>>>>>> Let's say there are two packages pkgA and pkgB, both of which have a
>>>>>> generic function
>>>>>>
>>>>>> foo <- function(x, ...)
>>>>>>     UseMethod("foo")
>>>>>>
>>>>>> and pkgA has a method for objects of class "A":
>>>>>>
>>>>>> foo.A <- function(x, ...)
>>>>>>     print(x)
>>>>>>
>>>>>> and pkgB has a method for objects of class "B":
>>>>>>
>>>>>> foo.B <- function(x, ...)
>>>>>>     plot(x)
>>>>>>
>>>>>> Both packages export foo and their method and declare their
>> respective
>>> S3
>>>>>> methods, so:
>>>>>>
>>>>>> export(foo)
>>>>>> export(foo.A)
>>>>>> S3method(foo, A)
>>>>>>
>>>>>> in NAMESPACE of pkgA and
>>>>>>
>>>>>> export(foo)
>>>>>> export(foo.B)
>>>>>> S3method(foo, B)
>>>>>>
>>>>>> in NAMESPACE of pkgB.
>>>>>>
>>>>>> If a user loads pkgA first and then pkgB, this fails:
>>>>>>
>>>>>> library(pkgA)
>>>>>> library(pkgB)
>>>>>> x <- 1:4
>>>>>> class(x) <- "A"
>>>>>> foo(x)
>>>>>>
>>>>>> Error in UseMethod("foo") :
>>>>>>    no applicable method for 'foo' applied to an object of class "A"
>>>>>>
>>>>>> and vice-versa. Of course, pkgA::foo(x) works. Aside from pkgA
>>> importing
>>>>>> foo() or vice-versa, is there some other clever way to make this
>> work?
>>> In
>>>>>> earlier versions of R (at least in 3.6.3), this used to work (i.e.,
>> the
>>>>>> generic foo() from pkgB would find method foo.A() and vice-versa),
>> but
>>>>> not
>>>>>> since 4.0.0.
>>>>>>
>>>>>> Best,
>>>>>> Wolfgang
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-package-devel at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>
>>>>>
>>>>>          [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>
>>>>
>>>>       [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From bgunter@4567 @end|ng |rom gm@||@com  Tue Jun 23 04:55:08 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 22 Jun 2020 19:55:08 -0700
Subject: [R-pkg-devel] [External] Re: Two packages with the same generic
 function
In-Reply-To: <alpine.DEB.2.21.2006222147290.32631@luke-Latitude-7480>
References: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
 <CAGxFJbTX2h_c2LAemiQGbspjXf2stFWdKbmJWDkv-9WvQ3J=WQ@mail.gmail.com>
 <CAHHCy8G6TG9=tYDOFWdt9gsQo3j3AZi_JzNiECAAWy8mBjNOqg@mail.gmail.com>
 <6f148591-e572-cc6d-1fa1-16ef1684b5b7@gmail.com>
 <CAHz+bWYfb22itYZ5gWLoJyXdUoZOWJ4GJJY6Gk0GW2FLdC2EPg@mail.gmail.com>
 <CAGxFJbR1SJ0ge0Q0A3Z9NtWQ-Qi97bqe7UO2=L2PRWTLy_1haA@mail.gmail.com>
 <alpine.DEB.2.21.2006222147290.32631@luke-Latitude-7480>
Message-ID: <CAGxFJbTb+3YZAa6yavGmEJh=693my-mvYTinoo2UsyJzf9dz6g@mail.gmail.com>

OK. Thanks.

Bert Gunter




On Mon, Jun 22, 2020 at 7:51 PM <luke-tierney at uiowa.edu> wrote:

> On Tue, 23 Jun 2020, Bert Gunter wrote:
>
> > "Users don't get warned about overriding names in packages they've
> > loaded, because that would just be irritating."
>
> All Duncan is saying is that you don't get a notification if you do
>
>      mean <- log
>
> in the interpreter. If you attach a package that does this you would
> get a notification (or an error if you configure your conflict
> resolution options appropriately).
>
> Best,
>
> luke
>
> >
> > Is that also true if the package or generic is imported by another that
> > they load; or is a dependency of a package they load? If so, I would not
> > call it "just irritating" because if silent, how would they know?
> >
> >
> > Bert Gunter
> >
> > "The trouble with having an open mind is that people keep coming along
> and
> > sticking things into it."
> > -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >
> >
> > On Mon, Jun 22, 2020 at 5:58 PM Mark Leeds <markleeds2 at gmail.com> wrote:
> >
> >> Hi Duncan: I maintain dynlm and your example is the exact reason I've
> been
> >> getting emails from people regarding
> >> it not working correctly. I've been telling them to load dplyr by using
> >>
> >> library(dplyr, exclude = c("filter", "lag"))
> >>
> >>
> >>
> >>
> >>
> >> On Mon, Jun 22, 2020 at 7:57 PM Duncan Murdoch <
> murdoch.duncan at gmail.com>
> >> wrote:
> >>
> >>> On 22/06/2020 3:48 p.m., Tom Wainwright wrote:
> >>>> Yet another alternative is simply to prevent your second package from
> >>>> overriding the previously defined generic. The basic problem is the
> >> ease
> >>>> with which R allows overriding prior generic definitions (one of those
> >>> bits
> >>>> of bad behavior we in the USA used to call "a Bozo No-No"), which
> hides
> >>> all
> >>>> the previous methods, as demonstrated by the following code:
> >>>>
> >>>>> plot(1:3)
> >>>>>> plot <- function(x, ...) UseMethod("plot")
> >>>>>> plot(1:3)
> >>>>> Error in UseMethod("plot") :
> >>>>>    no applicable method for 'plot' applied to an object of class
> >>>>> "c('integer', 'numeric')"
> >>>>>> rm(plot)
> >>>>>> plot(1:3)
> >>>>
> >>>>
> >>>> (Despite Murdoch's suggestion that overriding the generic SHOULD issue
> >> a
> >>>> warning, it doesn't seem to in R 4.0.1.)
> >>>
> >>> Sure it does, if pkgA and pkgB both export the same name, then you get
> a
> >>> warning when you attach the second one.  For example,
> >>>
> >>> > library(MASS)
> >>> > library(dplyr)
> >>>
> >>> Attaching package: ?dplyr?
> >>>
> >>> The following object is masked from ?package:MASS?:
> >>>
> >>>      select
> >>>
> >>> The following objects are masked from ?package:stats?:
> >>>
> >>>      filter, lag
> >>>
> >>> The following objects are masked from ?package:base?:
> >>>
> >>>      intersect, setdiff, setequal, union
> >>>
> >>> Users don't get warned about overriding names in packages they've
> >>> loaded, because that would just be irritating.
> >>>
> >>> Duncan Murdoch
> >>>
> >>>>
> >>>> So, we might try protecting the generic definitions of "foo" in both
> >>>> packages by enclosing them in something like:
> >>>>
> >>>> tryCatch(invisible(methods("foo")), error = {foo <- function(x,...)
> >>>>> UseMethod("foo")}, finally=NULL)
> >>>>
> >>>>
> >>>> There's probably a more elegant way to accomplish this. This relies on
> >>>> "methods" returning an error if "foo" has no defined methods, so it is
> >>> not
> >>>> redefined if their are previous methods. I haven't had time to try
> this
> >>> in
> >>>> the two-package example, but it might work, although I'm not sure how
> >> to
> >>>> handle the Namespace declarations.
> >>>>
> >>>>    Tom Wainwright
> >>>>
> >>>> On Mon, Jun 22, 2020 at 10:41 AM Bert Gunter <bgunter.4567 at gmail.com>
> >>> wrote:
> >>>>
> >>>>> ...
> >>>>> and just to add to the query, assume the author of pkg B did (does)
> >> not
> >>>>> know of pkg A and so, for example, could (did) not import any of pkg
> >> A's
> >>>>> content into B. Given that there are at the moment ~20,000 packages
> >> out
> >>>>> there, this does not seem to be an unreasonable assumption. One may
> >> even
> >>>>> further assume that the user may not know that (s)he has package B
> >>> loaded,
> >>>>> as it may be a dependency of another package that (s)he uses. I
> >>> certainly
> >>>>> don't keep track of all the dependencies of packages I use.
> >>>>>
> >>>>> Under these assumptions, is there any more convenient alternative to
> >>>>> Wolfgang's pkgA:foo(x) explicit call under such assumptions? If pkgA
> >>> has a
> >>>>> long name, what might one do?
> >>>>>
> >>>>> Bert Gunter
> >>>>>
> >>>>> "The trouble with having an open mind is that people keep coming
> along
> >>> and
> >>>>> sticking things into it."
> >>>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >>>>>
> >>>>>
> >>>>> On Mon, Jun 22, 2020 at 10:00 AM Viechtbauer, Wolfgang (SP) <
> >>>>> wolfgang.viechtbauer at maastrichtuniversity.nl> wrote:
> >>>>>
> >>>>>> Hi All,
> >>>>>>
> >>>>>> Let's say there are two packages pkgA and pkgB, both of which have a
> >>>>>> generic function
> >>>>>>
> >>>>>> foo <- function(x, ...)
> >>>>>>     UseMethod("foo")
> >>>>>>
> >>>>>> and pkgA has a method for objects of class "A":
> >>>>>>
> >>>>>> foo.A <- function(x, ...)
> >>>>>>     print(x)
> >>>>>>
> >>>>>> and pkgB has a method for objects of class "B":
> >>>>>>
> >>>>>> foo.B <- function(x, ...)
> >>>>>>     plot(x)
> >>>>>>
> >>>>>> Both packages export foo and their method and declare their
> >> respective
> >>> S3
> >>>>>> methods, so:
> >>>>>>
> >>>>>> export(foo)
> >>>>>> export(foo.A)
> >>>>>> S3method(foo, A)
> >>>>>>
> >>>>>> in NAMESPACE of pkgA and
> >>>>>>
> >>>>>> export(foo)
> >>>>>> export(foo.B)
> >>>>>> S3method(foo, B)
> >>>>>>
> >>>>>> in NAMESPACE of pkgB.
> >>>>>>
> >>>>>> If a user loads pkgA first and then pkgB, this fails:
> >>>>>>
> >>>>>> library(pkgA)
> >>>>>> library(pkgB)
> >>>>>> x <- 1:4
> >>>>>> class(x) <- "A"
> >>>>>> foo(x)
> >>>>>>
> >>>>>> Error in UseMethod("foo") :
> >>>>>>    no applicable method for 'foo' applied to an object of class "A"
> >>>>>>
> >>>>>> and vice-versa. Of course, pkgA::foo(x) works. Aside from pkgA
> >>> importing
> >>>>>> foo() or vice-versa, is there some other clever way to make this
> >> work?
> >>> In
> >>>>>> earlier versions of R (at least in 3.6.3), this used to work (i.e.,
> >> the
> >>>>>> generic foo() from pkgB would find method foo.A() and vice-versa),
> >> but
> >>>>> not
> >>>>>> since 4.0.0.
> >>>>>>
> >>>>>> Best,
> >>>>>> Wolfgang
> >>>>>>
> >>>>>> ______________________________________________
> >>>>>> R-package-devel at r-project.org mailing list
> >>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>>>>
> >>>>>
> >>>>>          [[alternative HTML version deleted]]
> >>>>>
> >>>>> ______________________________________________
> >>>>> R-package-devel at r-project.org mailing list
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>>>
> >>>>
> >>>>       [[alternative HTML version deleted]]
> >>>>
> >>>> ______________________________________________
> >>>> R-package-devel at r-project.org mailing list
> >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>>
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> --
> Luke Tierney
> Ralph E. Wareham Professor of Mathematical Sciences
> University of Iowa                  Phone:             319-335-3386
> Department of Statistics and        Fax:               319-335-3017
>     Actuarial Science
> 241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
> Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

	[[alternative HTML version deleted]]


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Tue Jun 23 10:00:05 2020
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (SP))
Date: Tue, 23 Jun 2020 08:00:05 +0000
Subject: [R-pkg-devel] [External] Re: Two packages with the same generic
 function
In-Reply-To: <CAGxFJbTb+3YZAa6yavGmEJh=693my-mvYTinoo2UsyJzf9dz6g@mail.gmail.com>
References: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
 <CAGxFJbTX2h_c2LAemiQGbspjXf2stFWdKbmJWDkv-9WvQ3J=WQ@mail.gmail.com>
 <CAHHCy8G6TG9=tYDOFWdt9gsQo3j3AZi_JzNiECAAWy8mBjNOqg@mail.gmail.com>
 <6f148591-e572-cc6d-1fa1-16ef1684b5b7@gmail.com>
 <CAHz+bWYfb22itYZ5gWLoJyXdUoZOWJ4GJJY6Gk0GW2FLdC2EPg@mail.gmail.com>
 <CAGxFJbR1SJ0ge0Q0A3Z9NtWQ-Qi97bqe7UO2=L2PRWTLy_1haA@mail.gmail.com>
 <alpine.DEB.2.21.2006222147290.32631@luke-Latitude-7480>
 <CAGxFJbTb+3YZAa6yavGmEJh=693my-mvYTinoo2UsyJzf9dz6g@mail.gmail.com>
Message-ID: <f65f5bcde3ff49a493a321db57452720@UM-MAIL3214.unimaas.nl>

Thanks to all who replied and provided input.

@Duncan: Yes, of course there is the note about masking. In my experience, many people won't understand what this means, what the consequences are, and that pkgA::foo(x) and pkgB::foo(x) are workarounds. And yes, pkgA importing the foo() generic from pkgB or vice-versa is an obvious solution.

@Bert: Related to the suggestion that one package could import the generic from the other, you raise an important point. This in essence adds a whole package as a dependency for these two lines of code:

foo <- function(x, ...)
   UseMethod("foo")

And let's say pkgA imports this from pkgB and pkgB depends on 10 other packages? Does this mean that pkgA has now added 11 packages as dependencies for importing 2 lines of code? If so, that seems quite undesirable to me.

@Neal: A separate package with generic functions that pkgA and pkgB could import is an interesting suggestion, thanks!

@Tom: I might need some time to process what you are suggesting. What I am really hoping for (and not sure if your approach can handle this) is that the following works regardless of the order in which pkgA and pkgB are loaded:

x <- 1:4
class(x) <- "A"
foo(x)
class(x) <- "B"
foo(x)

Again, that used to be the case in R 3.6.3, but not anymore in 4.0.x.

Best,
Wolfgang

>-----Original Message-----
>From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On
>Behalf Of Bert Gunter
>Sent: Tuesday, 23 June, 2020 4:55
>To: luke-tierney at uiowa.edu
>Cc: r-package-devel at r-project.org
>Subject: Re: [R-pkg-devel] [External] Re: Two packages with the same generic
>function
>
>OK. Thanks.
>
>Bert Gunter
>
>On Mon, Jun 22, 2020 at 7:51 PM <luke-tierney at uiowa.edu> wrote:
>
>> On Tue, 23 Jun 2020, Bert Gunter wrote:
>>
>> > "Users don't get warned about overriding names in packages they've
>> > loaded, because that would just be irritating."
>>
>> All Duncan is saying is that you don't get a notification if you do
>>
>>      mean <- log
>>
>> in the interpreter. If you attach a package that does this you would
>> get a notification (or an error if you configure your conflict
>> resolution options appropriately).
>>
>> Best,
>>
>> luke
>>
>> >
>> > Is that also true if the package or generic is imported by another that
>> > they load; or is a dependency of a package they load? If so, I would not
>> > call it "just irritating" because if silent, how would they know?
>> >
>> >
>> > Bert Gunter
>> >
>> > "The trouble with having an open mind is that people keep coming along
>> and
>> > sticking things into it."
>> > -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>> >
>> >
>> > On Mon, Jun 22, 2020 at 5:58 PM Mark Leeds <markleeds2 at gmail.com> wrote:
>> >
>> >> Hi Duncan: I maintain dynlm and your example is the exact reason I've
>> been
>> >> getting emails from people regarding
>> >> it not working correctly. I've been telling them to load dplyr by using
>> >>
>> >> library(dplyr, exclude = c("filter", "lag"))
>> >>
>> >> On Mon, Jun 22, 2020 at 7:57 PM Duncan Murdoch <
>> murdoch.duncan at gmail.com>
>> >> wrote:
>> >>
>> >>> On 22/06/2020 3:48 p.m., Tom Wainwright wrote:
>> >>>> Yet another alternative is simply to prevent your second package from
>> >>>> overriding the previously defined generic. The basic problem is the
>> >> ease
>> >>>> with which R allows overriding prior generic definitions (one of
>those
>> >>> bits
>> >>>> of bad behavior we in the USA used to call "a Bozo No-No"), which
>> hides
>> >>> all
>> >>>> the previous methods, as demonstrated by the following code:
>> >>>>
>> >>>>> plot(1:3)
>> >>>>>> plot <- function(x, ...) UseMethod("plot")
>> >>>>>> plot(1:3)
>> >>>>> Error in UseMethod("plot") :
>> >>>>>    no applicable method for 'plot' applied to an object of class
>> >>>>> "c('integer', 'numeric')"
>> >>>>>> rm(plot)
>> >>>>>> plot(1:3)
>> >>>>
>> >>>> (Despite Murdoch's suggestion that overriding the generic SHOULD
>issue
>> >> a
>> >>>> warning, it doesn't seem to in R 4.0.1.)
>> >>>
>> >>> Sure it does, if pkgA and pkgB both export the same name, then you get
>> a
>> >>> warning when you attach the second one.  For example,
>> >>>
>> >>> > library(MASS)
>> >>> > library(dplyr)
>> >>>
>> >>> Attaching package: ?dplyr?
>> >>>
>> >>> The following object is masked from ?package:MASS?:
>> >>>
>> >>>      select
>> >>>
>> >>> The following objects are masked from ?package:stats?:
>> >>>
>> >>>      filter, lag
>> >>>
>> >>> The following objects are masked from ?package:base?:
>> >>>
>> >>>      intersect, setdiff, setequal, union
>> >>>
>> >>> Users don't get warned about overriding names in packages they've
>> >>> loaded, because that would just be irritating.
>> >>>
>> >>> Duncan Murdoch
>> >>>>
>> >>>> So, we might try protecting the generic definitions of "foo" in both
>> >>>> packages by enclosing them in something like:
>> >>>>
>> >>>> tryCatch(invisible(methods("foo")), error = {foo <- function(x,...)
>> >>>>> UseMethod("foo")}, finally=NULL)
>> >>>>
>> >>>>
>> >>>> There's probably a more elegant way to accomplish this. This relies
>on
>> >>>> "methods" returning an error if "foo" has no defined methods, so it
>is
>> >>> not
>> >>>> redefined if their are previous methods. I haven't had time to try
>> this
>> >>> in
>> >>>> the two-package example, but it might work, although I'm not sure how
>> >> to
>> >>>> handle the Namespace declarations.
>> >>>>
>> >>>>    Tom Wainwright
>> >>>>
>> >>>> On Mon, Jun 22, 2020 at 10:41 AM Bert Gunter <bgunter.4567 at gmail.com>
>> >>> wrote:
>> >>>>
>> >>>>> ...
>> >>>>> and just to add to the query, assume the author of pkg B did (does)
>> >> not
>> >>>>> know of pkg A and so, for example, could (did) not import any of pkg
>> >> A's
>> >>>>> content into B. Given that there are at the moment ~20,000 packages
>> >> out
>> >>>>> there, this does not seem to be an unreasonable assumption. One may
>> >> even
>> >>>>> further assume that the user may not know that (s)he has package B
>> >>> loaded,
>> >>>>> as it may be a dependency of another package that (s)he uses. I
>> >>> certainly
>> >>>>> don't keep track of all the dependencies of packages I use.
>> >>>>>
>> >>>>> Under these assumptions, is there any more convenient alternative to
>> >>>>> Wolfgang's pkgA:foo(x) explicit call under such assumptions? If pkgA
>> >>> has a
>> >>>>> long name, what might one do?
>> >>>>>
>> >>>>> Bert Gunter
>> >>>>>
>> >>>>> "The trouble with having an open mind is that people keep coming
>> along
>> >>> and
>> >>>>> sticking things into it."
>> >>>>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>> >>>>>
>> >>>>>
>> >>>>> On Mon, Jun 22, 2020 at 10:00 AM Viechtbauer, Wolfgang (SP) <
>> >>>>> wolfgang.viechtbauer at maastrichtuniversity.nl> wrote:
>> >>>>>
>> >>>>>> Hi All,
>> >>>>>>
>> >>>>>> Let's say there are two packages pkgA and pkgB, both of which have
>a
>> >>>>>> generic function
>> >>>>>>
>> >>>>>> foo <- function(x, ...)
>> >>>>>>     UseMethod("foo")
>> >>>>>>
>> >>>>>> and pkgA has a method for objects of class "A":
>> >>>>>>
>> >>>>>> foo.A <- function(x, ...)
>> >>>>>>     print(x)
>> >>>>>>
>> >>>>>> and pkgB has a method for objects of class "B":
>> >>>>>>
>> >>>>>> foo.B <- function(x, ...)
>> >>>>>>     plot(x)
>> >>>>>>
>> >>>>>> Both packages export foo and their method and declare their
>> >> respective
>> >>> S3
>> >>>>>> methods, so:
>> >>>>>>
>> >>>>>> export(foo)
>> >>>>>> export(foo.A)
>> >>>>>> S3method(foo, A)
>> >>>>>>
>> >>>>>> in NAMESPACE of pkgA and
>> >>>>>>
>> >>>>>> export(foo)
>> >>>>>> export(foo.B)
>> >>>>>> S3method(foo, B)
>> >>>>>>
>> >>>>>> in NAMESPACE of pkgB.
>> >>>>>>
>> >>>>>> If a user loads pkgA first and then pkgB, this fails:
>> >>>>>>
>> >>>>>> library(pkgA)
>> >>>>>> library(pkgB)
>> >>>>>> x <- 1:4
>> >>>>>> class(x) <- "A"
>> >>>>>> foo(x)
>> >>>>>>
>> >>>>>> Error in UseMethod("foo") :
>> >>>>>>    no applicable method for 'foo' applied to an object of class "A"
>> >>>>>>
>> >>>>>> and vice-versa. Of course, pkgA::foo(x) works. Aside from pkgA
>> >>> importing
>> >>>>>> foo() or vice-versa, is there some other clever way to make this
>> >> work?
>> >>> In
>> >>>>>> earlier versions of R (at least in 3.6.3), this used to work (i.e.,
>> >> the
>> >>>>>> generic foo() from pkgB would find method foo.A() and vice-versa),
>> >> but
>> >>>>> not
>> >>>>>> since 4.0.0.
>> >>>>>>
>> >>>>>> Best,
>> >>>>>> Wolfgang

From @c @end|ng |rom |mb|@un|-|re|burg@de  Tue Jun 23 10:22:26 2020
From: @c @end|ng |rom |mb|@un|-|re|burg@de (Guido Schwarzer)
Date: Tue, 23 Jun 2020 10:22:26 +0200
Subject: [R-pkg-devel] [External] Re: Two packages with the same generic
 function
In-Reply-To: <f65f5bcde3ff49a493a321db57452720@UM-MAIL3214.unimaas.nl>
References: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
 <CAGxFJbTX2h_c2LAemiQGbspjXf2stFWdKbmJWDkv-9WvQ3J=WQ@mail.gmail.com>
 <CAHHCy8G6TG9=tYDOFWdt9gsQo3j3AZi_JzNiECAAWy8mBjNOqg@mail.gmail.com>
 <6f148591-e572-cc6d-1fa1-16ef1684b5b7@gmail.com>
 <CAHz+bWYfb22itYZ5gWLoJyXdUoZOWJ4GJJY6Gk0GW2FLdC2EPg@mail.gmail.com>
 <CAGxFJbR1SJ0ge0Q0A3Z9NtWQ-Qi97bqe7UO2=L2PRWTLy_1haA@mail.gmail.com>
 <alpine.DEB.2.21.2006222147290.32631@luke-Latitude-7480>
 <CAGxFJbTb+3YZAa6yavGmEJh=693my-mvYTinoo2UsyJzf9dz6g@mail.gmail.com>
 <f65f5bcde3ff49a493a321db57452720@UM-MAIL3214.unimaas.nl>
Message-ID: <8c018f91-b507-af2b-fbd6-932c8e75cf03@imbi.uni-freiburg.de>

Am 23.06.20 um 10:00 schrieb Viechtbauer, Wolfgang (SP):
> [...]
> @Neal: A separate package with generic functions that pkgA and pkgB could import is an interesting suggestion, thanks!

What makes this interesting is that there is no dependency on other 
packages in generics.

Remains the question which help page would be shown for help(foo).

Best, Guido


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jun 23 12:10:38 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 23 Jun 2020 06:10:38 -0400
Subject: [R-pkg-devel] Two packages with the same generic function
In-Reply-To: <CAGxFJbR1SJ0ge0Q0A3Z9NtWQ-Qi97bqe7UO2=L2PRWTLy_1haA@mail.gmail.com>
References: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
 <CAGxFJbTX2h_c2LAemiQGbspjXf2stFWdKbmJWDkv-9WvQ3J=WQ@mail.gmail.com>
 <CAHHCy8G6TG9=tYDOFWdt9gsQo3j3AZi_JzNiECAAWy8mBjNOqg@mail.gmail.com>
 <6f148591-e572-cc6d-1fa1-16ef1684b5b7@gmail.com>
 <CAHz+bWYfb22itYZ5gWLoJyXdUoZOWJ4GJJY6Gk0GW2FLdC2EPg@mail.gmail.com>
 <CAGxFJbR1SJ0ge0Q0A3Z9NtWQ-Qi97bqe7UO2=L2PRWTLy_1haA@mail.gmail.com>
Message-ID: <ee662f5d-6822-08e6-5aba-126afb9d1abf@gmail.com>

On 22/06/2020 10:17 p.m., Bert Gunter wrote:
> "Users don't get warned about overriding names in packages they've
> loaded, because that would just be irritating."
> 
> Is that also true if the package or generic is imported by another that 
> they load; or is a dependency of a package they load? If so, I would not 
> call it "just irritating" because if silent, how would they know?

I can't think of an example where this would be a problem.  If a package 
imports objects from another package, it doesn't affect the user's 
search list.  Maybe it affects what methods are available, but I can't 
see how it would change what generics are available.

Can you give an example of what you're worried about?

Duncan Murdoch

> 
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along 
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Mon, Jun 22, 2020 at 5:58 PM Mark Leeds <markleeds2 at gmail.com 
> <mailto:markleeds2 at gmail.com>> wrote:
> 
>     Hi Duncan: I maintain dynlm and your example is the exact reason
>     I've been
>     getting emails from people regarding
>     it not working correctly. I've been telling them to load dplyr by using
> 
>     library(dplyr, exclude = c("filter", "lag"))
> 
> 
> 
> 
> 
>     On Mon, Jun 22, 2020 at 7:57 PM Duncan Murdoch
>     <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>>
>     wrote:
> 
>      > On 22/06/2020 3:48 p.m., Tom Wainwright wrote:
>      > > Yet another alternative is simply to prevent your second
>     package from
>      > > overriding the previously defined generic. The basic problem is
>     the ease
>      > > with which R allows overriding prior generic definitions (one
>     of those
>      > bits
>      > > of bad behavior we in the USA used to call "a Bozo No-No"),
>     which hides
>      > all
>      > > the previous methods, as demonstrated by the following code:
>      > >
>      > >> plot(1:3)
>      > >>> plot <- function(x, ...) UseMethod("plot")
>      > >>> plot(1:3)
>      > >> Error in UseMethod("plot") :
>      > >>? ? no applicable method for 'plot' applied to an object of class
>      > >> "c('integer', 'numeric')"
>      > >>> rm(plot)
>      > >>> plot(1:3)
>      > >
>      > >
>      > > (Despite Murdoch's suggestion that overriding the generic
>     SHOULD issue a
>      > > warning, it doesn't seem to in R 4.0.1.)
>      >
>      > Sure it does, if pkgA and pkgB both export the same name, then
>     you get a
>      > warning when you attach the second one.? For example,
>      >
>      >? > library(MASS)
>      >? > library(dplyr)
>      >
>      > Attaching package: ?dplyr?
>      >
>      > The following object is masked from ?package:MASS?:
>      >
>      >? ? ? select
>      >
>      > The following objects are masked from ?package:stats?:
>      >
>      >? ? ? filter, lag
>      >
>      > The following objects are masked from ?package:base?:
>      >
>      >? ? ? intersect, setdiff, setequal, union
>      >
>      > Users don't get warned about overriding names in packages they've
>      > loaded, because that would just be irritating.
>      >
>      > Duncan Murdoch
>      >
>      > >
>      > > So, we might try protecting the generic definitions of "foo" in
>     both
>      > > packages by enclosing them in something like:
>      > >
>      > > tryCatch(invisible(methods("foo")), error = {foo <- function(x,...)
>      > >> UseMethod("foo")}, finally=NULL)
>      > >
>      > >
>      > > There's probably a more elegant way to accomplish this. This
>     relies on
>      > > "methods" returning an error if "foo" has no defined methods,
>     so it is
>      > not
>      > > redefined if their are previous methods. I haven't had time to
>     try this
>      > in
>      > > the two-package example, but it might work, although I'm not
>     sure how to
>      > > handle the Namespace declarations.
>      > >
>      > >? ? Tom Wainwright
>      > >
>      > > On Mon, Jun 22, 2020 at 10:41 AM Bert Gunter
>     <bgunter.4567 at gmail.com <mailto:bgunter.4567 at gmail.com>>
>      > wrote:
>      > >
>      > >> ...
>      > >> and just to add to the query, assume the author of pkg B did
>     (does) not
>      > >> know of pkg A and so, for example, could (did) not import any
>     of pkg A's
>      > >> content into B. Given that there are at the moment ~20,000
>     packages out
>      > >> there, this does not seem to be an unreasonable assumption.
>     One may even
>      > >> further assume that the user may not know that (s)he has package B
>      > loaded,
>      > >> as it may be a dependency of another package that (s)he uses. I
>      > certainly
>      > >> don't keep track of all the dependencies of packages I use.
>      > >>
>      > >> Under these assumptions, is there any more convenient
>     alternative to
>      > >> Wolfgang's pkgA:foo(x) explicit call under such assumptions?
>     If pkgA
>      > has a
>      > >> long name, what might one do?
>      > >>
>      > >> Bert Gunter
>      > >>
>      > >> "The trouble with having an open mind is that people keep
>     coming along
>      > and
>      > >> sticking things into it."
>      > >> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>      > >>
>      > >>
>      > >> On Mon, Jun 22, 2020 at 10:00 AM Viechtbauer, Wolfgang (SP) <
>      > >> wolfgang.viechtbauer at maastrichtuniversity.nl
>     <mailto:wolfgang.viechtbauer at maastrichtuniversity.nl>> wrote:
>      > >>
>      > >>> Hi All,
>      > >>>
>      > >>> Let's say there are two packages pkgA and pkgB, both of which
>     have a
>      > >>> generic function
>      > >>>
>      > >>> foo <- function(x, ...)
>      > >>>? ? ?UseMethod("foo")
>      > >>>
>      > >>> and pkgA has a method for objects of class "A":
>      > >>>
>      > >>> foo.A <- function(x, ...)
>      > >>>? ? ?print(x)
>      > >>>
>      > >>> and pkgB has a method for objects of class "B":
>      > >>>
>      > >>> foo.B <- function(x, ...)
>      > >>>? ? ?plot(x)
>      > >>>
>      > >>> Both packages export foo and their method and declare their
>     respective
>      > S3
>      > >>> methods, so:
>      > >>>
>      > >>> export(foo)
>      > >>> export(foo.A)
>      > >>> S3method(foo, A)
>      > >>>
>      > >>> in NAMESPACE of pkgA and
>      > >>>
>      > >>> export(foo)
>      > >>> export(foo.B)
>      > >>> S3method(foo, B)
>      > >>>
>      > >>> in NAMESPACE of pkgB.
>      > >>>
>      > >>> If a user loads pkgA first and then pkgB, this fails:
>      > >>>
>      > >>> library(pkgA)
>      > >>> library(pkgB)
>      > >>> x <- 1:4
>      > >>> class(x) <- "A"
>      > >>> foo(x)
>      > >>>
>      > >>> Error in UseMethod("foo") :
>      > >>>? ? no applicable method for 'foo' applied to an object of
>     class "A"
>      > >>>
>      > >>> and vice-versa. Of course, pkgA::foo(x) works. Aside from pkgA
>      > importing
>      > >>> foo() or vice-versa, is there some other clever way to make
>     this work?
>      > In
>      > >>> earlier versions of R (at least in 3.6.3), this used to work
>     (i.e., the
>      > >>> generic foo() from pkgB would find method foo.A() and
>     vice-versa), but
>      > >> not
>      > >>> since 4.0.0.
>      > >>>
>      > >>> Best,
>      > >>> Wolfgang
>      > >>>
>      > >>> ______________________________________________
>      > >>> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      > >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      > >>>
>      > >>
>      > >>? ? ? ? ? [[alternative HTML version deleted]]
>      > >>
>      > >> ______________________________________________
>      > >> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      > >>
>      > >
>      > >? ? ? ?[[alternative HTML version deleted]]
>      > >
>      > > ______________________________________________
>      > > R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      > >
>      >
>      > ______________________________________________
>      > R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >
> 
>      ? ? ? ? [[alternative HTML version deleted]]
> 
>     ______________________________________________
>     R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>     mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jun 23 12:25:18 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 23 Jun 2020 06:25:18 -0400
Subject: [R-pkg-devel] [External] Re: Two packages with the same generic
 function
In-Reply-To: <8c018f91-b507-af2b-fbd6-932c8e75cf03@imbi.uni-freiburg.de>
References: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
 <CAGxFJbTX2h_c2LAemiQGbspjXf2stFWdKbmJWDkv-9WvQ3J=WQ@mail.gmail.com>
 <CAHHCy8G6TG9=tYDOFWdt9gsQo3j3AZi_JzNiECAAWy8mBjNOqg@mail.gmail.com>
 <6f148591-e572-cc6d-1fa1-16ef1684b5b7@gmail.com>
 <CAHz+bWYfb22itYZ5gWLoJyXdUoZOWJ4GJJY6Gk0GW2FLdC2EPg@mail.gmail.com>
 <CAGxFJbR1SJ0ge0Q0A3Z9NtWQ-Qi97bqe7UO2=L2PRWTLy_1haA@mail.gmail.com>
 <alpine.DEB.2.21.2006222147290.32631@luke-Latitude-7480>
 <CAGxFJbTb+3YZAa6yavGmEJh=693my-mvYTinoo2UsyJzf9dz6g@mail.gmail.com>
 <f65f5bcde3ff49a493a321db57452720@UM-MAIL3214.unimaas.nl>
 <8c018f91-b507-af2b-fbd6-932c8e75cf03@imbi.uni-freiburg.de>
Message-ID: <906454da-62ed-10a5-3cb7-cc337d731795@gmail.com>

On 23/06/2020 4:22 a.m., Guido Schwarzer wrote:
> Am 23.06.20 um 10:00 schrieb Viechtbauer, Wolfgang (SP):
>> [...]
>> @Neal: A separate package with generic functions that pkgA and pkgB could import is an interesting suggestion, thanks!
> 
> What makes this interesting is that there is no dependency on other
> packages in generics.
> 
> Remains the question which help page would be shown for help(foo).

If a package imports and then exports the generic, it would normally 
create a help page referring to the original one where the generic is 
defined.  So both pkgA and pkgB would probably both create help pages, 
and the help system would show a page listing them both plus the generic 
one, and asking the user to choose.

An example happens if you use

library(broom)
?tidy

The broom package links to a page that says "These objects are imported 
from other packages. Follow the links below to see their documentation."
One of the links is to the ?tidy page in the generics package.

You are allowed to say ?broom::tidy, and then you don't go to the list 
of possibilities, you go directly to the one you asked for.

Duncan Murdoch


From R@|ner @end|ng |rom krug@@de  Tue Jun 23 14:18:14 2020
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Tue, 23 Jun 2020 14:18:14 +0200
Subject: [R-pkg-devel] Proper CRAN way - How to handle dependency of java
 jar file?
Message-ID: <A52AC0C9-BD94-4E3E-B458-763D6B840322@krugs.de>

Hi

I have a package called `plantuml` (https://github.com/rkrug/plantuml) which converts plantuml code to UML graphs. It uses for this the java program https://plantuml.com which is Open Source. 

As it is not allowed to distribute a binary with an R package, I use the approach of a function which downloads the jar file into the directory `system.file("jar/plantuml.jar", package = "plantuml?)`. 

This works nicely, and at the moment, the function is called automatically before the plantuml.jar is used.

Now I would like to submit the package to CRAN. I can?t find the guidelines anymore, so I am asking here: 

What is the appropriate way of handling this?

I can think of a at least two ways of making it obvious to the user, that a binary is downloaded:

1) if the file plantuml.jar is not present, ask the user to run the function `updatePlantumlJar()` which downloads the jar to the original location in the package directory

2) tell the user to download the file manually and to put it somewhere, where the package will find it

I would prefer the first version, as the plantuml.jar would be in the package directory, where usually nobody but the package is doing stuff.

Any suggestions on how I could make this ?CRAN conform??

Thanks a lot,

Rainer

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982





--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jun 23 14:35:50 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 23 Jun 2020 08:35:50 -0400
Subject: [R-pkg-devel] 
 Proper CRAN way - How to handle dependency of java jar file?
In-Reply-To: <A52AC0C9-BD94-4E3E-B458-763D6B840322@krugs.de>
References: <A52AC0C9-BD94-4E3E-B458-763D6B840322@krugs.de>
Message-ID: <046623ab-f676-e752-8227-25cb1b1c616c@gmail.com>

Your assumption that .jar files are not allowed is wrong:  a number of 
packages contain them:  rscala, J4R, Rbgs, bartMachine, OpenStreetMap, 
...  There's a specific mention about how to include them in the CRAN 
policy document:

"For Java .class and .jar files, the sources should be in a top-level 
java directory in the source package (or that directory should explain 
how they can be obtained)."

If you still decide not to include your .jar file (maybe it is too big, 
for example), then I think your option 1 is unusable for those people 
who can't write to the library location because of permission problems. 
(Admin privileges are often necessary to install packages in the main 
library.)  Generally I think everyone can install packages somewhere, 
but users do really get confused when they have multiple library 
locations, possibly each containing a different version of a package.

Duncan Murdoch

On 23/06/2020 8:18 a.m., Rainer M Krug wrote:
> Hi
> 
> I have a package called `plantuml` (https://github.com/rkrug/plantuml) which converts plantuml code to UML graphs. It uses for this the java program https://plantuml.com which is Open Source.
> 
> As it is not allowed to distribute a binary with an R package, I use the approach of a function which downloads the jar file into the directory `system.file("jar/plantuml.jar", package = "plantuml?)`.
> 
> This works nicely, and at the moment, the function is called automatically before the plantuml.jar is used.
> 
> Now I would like to submit the package to CRAN. I can?t find the guidelines anymore, so I am asking here:
> 
> What is the appropriate way of handling this?
> 
> I can think of a at least two ways of making it obvious to the user, that a binary is downloaded:
> 
> 1) if the file plantuml.jar is not present, ask the user to run the function `updatePlantumlJar()` which downloads the jar to the original location in the package directory
> 
> 2) tell the user to download the file manually and to put it somewhere, where the package will find it
> 
> I would prefer the first version, as the plantuml.jar would be in the package directory, where usually nobody but the package is doing stuff.
> 
> Any suggestions on how I could make this ?CRAN conform??
> 
> Thanks a lot,
> 
> Rainer
> 
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> 
> Orcid ID: 0000-0002-7490-0066
> 
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
> 
> Office:	+41 (0)44 635 47 64
> Cell:       	+41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch
> 		Rainer at krugs.de
> Skype:     RMkrug
> 
> PGP: 0x0F52F982
> 
> 
> 
> 
> 
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> 
> Orcid ID: 0000-0002-7490-0066
> 
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
> 
> Office:	+41 (0)44 635 47 64
> Cell:       	+41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch
> 		Rainer at krugs.de
> Skype:     RMkrug
> 
> PGP: 0x0F52F982
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From kev|n@r@coombe@ @end|ng |rom gm@||@com  Tue Jun 23 14:44:34 2020
From: kev|n@r@coombe@ @end|ng |rom gm@||@com (Kevin R. Coombes)
Date: Tue, 23 Jun 2020 08:44:34 -0400
Subject: [R-pkg-devel] [External] Re: Two packages with the same generic
 function
In-Reply-To: <alpine.DEB.2.21.2006222147290.32631@luke-Latitude-7480>
References: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
 <CAGxFJbTX2h_c2LAemiQGbspjXf2stFWdKbmJWDkv-9WvQ3J=WQ@mail.gmail.com>
 <CAHHCy8G6TG9=tYDOFWdt9gsQo3j3AZi_JzNiECAAWy8mBjNOqg@mail.gmail.com>
 <6f148591-e572-cc6d-1fa1-16ef1684b5b7@gmail.com>
 <CAHz+bWYfb22itYZ5gWLoJyXdUoZOWJ4GJJY6Gk0GW2FLdC2EPg@mail.gmail.com>
 <CAGxFJbR1SJ0ge0Q0A3Z9NtWQ-Qi97bqe7UO2=L2PRWTLy_1haA@mail.gmail.com>
 <alpine.DEB.2.21.2006222147290.32631@luke-Latitude-7480>
Message-ID: <63b9d642-9961-b953-4c1f-c74cf4120214@gmail.com>

Wait; I have options on how to configure conflict resolution? Can you 
tell me where to read more about this feature?

Thanks,
 ? Kevin

On 6/22/2020 10:51 PM, luke-tierney at uiowa.edu wrote:
> On Tue, 23 Jun 2020, Bert Gunter wrote:
>
>> "Users don't get warned about overriding names in packages they've
>> loaded, because that would just be irritating."
>
> All Duncan is saying is that you don't get a notification if you do
>
> ??? mean <- log
>
> in the interpreter. If you attach a package that does this you would
> get a notification (or an error if you configure your conflict
> resolution options appropriately).
>
> Best,
>
> luke
>


From R@|ner @end|ng |rom krug@@de  Tue Jun 23 14:47:38 2020
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Tue, 23 Jun 2020 14:47:38 +0200
Subject: [R-pkg-devel] 
 Proper CRAN way - How to handle dependency of java jar file?
In-Reply-To: <046623ab-f676-e752-8227-25cb1b1c616c@gmail.com>
References: <A52AC0C9-BD94-4E3E-B458-763D6B840322@krugs.de>
 <046623ab-f676-e752-8227-25cb1b1c616c@gmail.com>
Message-ID: <61BDA495-A218-496D-8C61-C870008A04D1@krugs.de>

Thanks Duncan.

> On 23 Jun 2020, at 14:35, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> Your assumption that .jar files are not allowed is wrong:  a number of packages contain them:  rscala, J4R, Rbgs, bartMachine, OpenStreetMap, ...  There's a specific mention about how to include them in the CRAN policy document:

That?s good to know.

> 
> "For Java .class and .jar files, the sources should be in a top-level java directory in the source package (or that directory should explain how they can be obtained)."

So a tet file in the inst/jar directory giving the link to the GitHub repo would be fine in this case?
 
> 
> If you still decide not to include your .jar file (maybe it is too big, for example),


I guess it would be stretching it a bit, as the jar file is 8.2 MB, and plantuml has regular continuous updates, so I would prefer to keep it dynamic.


> then I think your option 1 is unusable for those people who can't write to the library location because of permission problems. (Admin privileges are often necessary to install packages in the main library.)  Generally I think everyone can install packages somewhere, but users do really get confused when they have multiple library locations, possibly each containing a different version of a package.

So the suggested option would be to have a function, which 
1) ask the user to create a directory in the home folder 
2) download the jar file into that directory or, when no permission is granted, into the tmpdir()

Thanks, no major changes necessary for that,

Rainer
 

> 
> Duncan Murdoch
> 
> On 23/06/2020 8:18 a.m., Rainer M Krug wrote:
>> Hi
>> I have a package called `plantuml` (https://github.com/rkrug/plantuml) which converts plantuml code to UML graphs. It uses for this the java program https://plantuml.com which is Open Source.
>> As it is not allowed to distribute a binary with an R package, I use the approach of a function which downloads the jar file into the directory `system.file("jar/plantuml.jar", package = "plantuml?)`.
>> This works nicely, and at the moment, the function is called automatically before the plantuml.jar is used.
>> Now I would like to submit the package to CRAN. I can?t find the guidelines anymore, so I am asking here:
>> What is the appropriate way of handling this?
>> I can think of a at least two ways of making it obvious to the user, that a binary is downloaded:
>> 1) if the file plantuml.jar is not present, ask the user to run the function `updatePlantumlJar()` which downloads the jar to the original location in the package directory
>> 2) tell the user to download the file manually and to put it somewhere, where the package will find it
>> I would prefer the first version, as the plantuml.jar would be in the package directory, where usually nobody but the package is doing stuff.
>> Any suggestions on how I could make this ?CRAN conform??
>> Thanks a lot,
>> Rainer
>> --
>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>> Orcid ID: 0000-0002-7490-0066
>> Department of Evolutionary Biology and Environmental Studies
>> University of Z?rich
>> Office Y34-J-74
>> Winterthurerstrasse 190
>> 8075 Z?rich
>> Switzerland
>> Office:	+41 (0)44 635 47 64
>> Cell:       	+41 (0)78 630 66 57
>> email:      Rainer.Krug at uzh.ch
>> 		Rainer at krugs.de
>> Skype:     RMkrug
>> PGP: 0x0F52F982
>> --
>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>> Orcid ID: 0000-0002-7490-0066
>> Department of Evolutionary Biology and Environmental Studies
>> University of Z?rich
>> Office Y34-J-74
>> Winterthurerstrasse 190
>> 8075 Z?rich
>> Switzerland
>> Office:	+41 (0)44 635 47 64
>> Cell:       	+41 (0)78 630 66 57
>> email:      Rainer.Krug at uzh.ch
>> 		Rainer at krugs.de
>> Skype:     RMkrug
>> PGP: 0x0F52F982
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From iuke-tier@ey m@iii@g oii uiow@@edu  Tue Jun 23 14:58:24 2020
From: iuke-tier@ey m@iii@g oii uiow@@edu (iuke-tier@ey m@iii@g oii uiow@@edu)
Date: Tue, 23 Jun 2020 07:58:24 -0500 (CDT)
Subject: [R-pkg-devel] [External] Re: Two packages with the same generic
 function
In-Reply-To: <63b9d642-9961-b953-4c1f-c74cf4120214@gmail.com>
References: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
 <CAGxFJbTX2h_c2LAemiQGbspjXf2stFWdKbmJWDkv-9WvQ3J=WQ@mail.gmail.com>
 <CAHHCy8G6TG9=tYDOFWdt9gsQo3j3AZi_JzNiECAAWy8mBjNOqg@mail.gmail.com>
 <6f148591-e572-cc6d-1fa1-16ef1684b5b7@gmail.com>
 <CAHz+bWYfb22itYZ5gWLoJyXdUoZOWJ4GJJY6Gk0GW2FLdC2EPg@mail.gmail.com>
 <CAGxFJbR1SJ0ge0Q0A3Z9NtWQ-Qi97bqe7UO2=L2PRWTLy_1haA@mail.gmail.com>
 <alpine.DEB.2.21.2006222147290.32631@luke-Latitude-7480>
 <63b9d642-9961-b953-4c1f-c74cf4120214@gmail.com>
Message-ID: <alpine.DEB.2.21.2006230757070.32631@luke-Latitude-7480>

It's described in ?library; tere is also a post on the R-blog at

https://developer.r-project.org/Blog/public/2019/03/19/managing-search-path-conflicts/index.html

Best,

luke

On Tue, 23 Jun 2020, Kevin R. Coombes wrote:

> Wait; I have options on how to configure conflict resolution? Can you tell me 
> where to read more about this feature?
>
> Thanks,
> ? Kevin
>
> On 6/22/2020 10:51 PM, luke-tierney at uiowa.edu wrote:
>> On Tue, 23 Jun 2020, Bert Gunter wrote:
>> 
>>> "Users don't get warned about overriding names in packages they've
>>> loaded, because that would just be irritating."
>> 
>> All Duncan is saying is that you don't get a notification if you do
>> 
>> ??? mean <- log
>> 
>> in the interpreter. If you attach a package that does this you would
>> get a notification (or an error if you configure your conflict
>> resolution options appropriately).
>> 
>> Best,
>> 
>> luke
>> 
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From hongoo| @end|ng |rom m|cro@o|t@com  Tue Jun 23 15:07:38 2020
From: hongoo| @end|ng |rom m|cro@o|t@com (Hong Ooi)
Date: Tue, 23 Jun 2020 13:07:38 +0000
Subject: [R-pkg-devel] [EXTERNAL] Re: Proper CRAN way - How to handle
 dependency of java jar file?
In-Reply-To: <61BDA495-A218-496D-8C61-C870008A04D1@krugs.de>
References: <A52AC0C9-BD94-4E3E-B458-763D6B840322@krugs.de>
 <046623ab-f676-e752-8227-25cb1b1c616c@gmail.com>
 <61BDA495-A218-496D-8C61-C870008A04D1@krugs.de>
Message-ID: <HK2P15301MB0036F8E2D6B156E485826C26A6940@HK2P15301MB0036.APCP153.PROD.OUTLOOK.COM>

Another possibility, if you want the jar to be dynamic and also have a standard location for it, is to write it to the R config/user dir. This is available via R_user_dir() in R 4.0 (and earlier versions via the backports package). An older alternative that still works is to use the rappdirs package.


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Rainer M Krug
Sent: Tuesday, 23 June 2020 10:48 PM
To: Duncan Murdoch <murdoch.duncan at gmail.com>
Cc: R Package Devel <r-package-devel at r-project.org>
Subject: [EXTERNAL] Re: [R-pkg-devel] Proper CRAN way - How to handle dependency of java jar file?

Thanks Duncan.

> On 23 Jun 2020, at 14:35, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> Your assumption that .jar files are not allowed is wrong:  a number of packages contain them:  rscala, J4R, Rbgs, bartMachine, OpenStreetMap, ...  There's a specific mention about how to include them in the CRAN policy document:

That?s good to know.

> 
> "For Java .class and .jar files, the sources should be in a top-level java directory in the source package (or that directory should explain how they can be obtained)."

So a tet file in the inst/jar directory giving the link to the GitHub repo would be fine in this case?
 
> 
> If you still decide not to include your .jar file (maybe it is too big, for example),


I guess it would be stretching it a bit, as the jar file is 8.2 MB, and plantuml has regular continuous updates, so I would prefer to keep it dynamic.


> then I think your option 1 is unusable for those people who can't write to the library location because of permission problems. (Admin privileges are often necessary to install packages in the main library.)  Generally I think everyone can install packages somewhere, but users do really get confused when they have multiple library locations, possibly each containing a different version of a package.

So the suggested option would be to have a function, which 
1) ask the user to create a directory in the home folder 
2) download the jar file into that directory or, when no permission is granted, into the tmpdir()

Thanks, no major changes necessary for that,

Rainer
 

> 
> Duncan Murdoch
> 
> On 23/06/2020 8:18 a.m., Rainer M Krug wrote:
>> Hi
>> I have a package called `plantuml` (https://github.com/rkrug/plantuml) which converts plantuml code to UML graphs. It uses for this the java program https://plantuml.com which is Open Source.
>> As it is not allowed to distribute a binary with an R package, I use the approach of a function which downloads the jar file into the directory `system.file("jar/plantuml.jar", package = "plantuml?)`.
>> This works nicely, and at the moment, the function is called automatically before the plantuml.jar is used.
>> Now I would like to submit the package to CRAN. I can?t find the guidelines anymore, so I am asking here:
>> What is the appropriate way of handling this?
>> I can think of a at least two ways of making it obvious to the user, that a binary is downloaded:
>> 1) if the file plantuml.jar is not present, ask the user to run the function `updatePlantumlJar()` which downloads the jar to the original location in the package directory
>> 2) tell the user to download the file manually and to put it somewhere, where the package will find it
>> I would prefer the first version, as the plantuml.jar would be in the package directory, where usually nobody but the package is doing stuff.
>> Any suggestions on how I could make this ?CRAN conform??
>> Thanks a lot,
>> Rainer
>> --
>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>> Orcid ID: 0000-0002-7490-0066
>> Department of Evolutionary Biology and Environmental Studies
>> University of Z?rich
>> Office Y34-J-74
>> Winterthurerstrasse 190
>> 8075 Z?rich
>> Switzerland
>> Office:	+41 (0)44 635 47 64
>> Cell:       	+41 (0)78 630 66 57
>> email:      Rainer.Krug at uzh.ch
>> 		Rainer at krugs.de
>> Skype:     RMkrug
>> PGP: 0x0F52F982
>> --
>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>> Orcid ID: 0000-0002-7490-0066
>> Department of Evolutionary Biology and Environmental Studies
>> University of Z?rich
>> Office Y34-J-74
>> Winterthurerstrasse 190
>> 8075 Z?rich
>> Switzerland
>> Office:	+41 (0)44 635 47 64
>> Cell:       	+41 (0)78 630 66 57
>> email:      Rainer.Krug at uzh.ch
>> 		Rainer at krugs.de
>> Skype:     RMkrug
>> PGP: 0x0F52F982
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

From R@|ner @end|ng |rom krug@@de  Tue Jun 23 15:12:09 2020
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Tue, 23 Jun 2020 15:12:09 +0200
Subject: [R-pkg-devel] 
 [EXTERNAL] Proper CRAN way - How to handle dependency
 of java jar file?
In-Reply-To: <HK2P15301MB0036F8E2D6B156E485826C26A6940@HK2P15301MB0036.APCP153.PROD.OUTLOOK.COM>
References: <A52AC0C9-BD94-4E3E-B458-763D6B840322@krugs.de>
 <046623ab-f676-e752-8227-25cb1b1c616c@gmail.com>
 <61BDA495-A218-496D-8C61-C870008A04D1@krugs.de>
 <HK2P15301MB0036F8E2D6B156E485826C26A6940@HK2P15301MB0036.APCP153.PROD.OUTLOOK.COM>
Message-ID: <C6F66F83-12E0-4F5B-AAB3-BA13B5DB7DE8@krugs.de>

Thanks Hong - I like that.

I found that package in the tools::R_user_dir() package - us that the one?

Rainer


> On 23 Jun 2020, at 15:07, Hong Ooi <hongooi at microsoft.com> wrote:
> 
> Another possibility, if you want the jar to be dynamic and also have a standard location for it, is to write it to the R config/user dir. This is available via R_user_dir() in R 4.0 (and earlier versions via the backports package). An older alternative that still works is to use the rappdirs package.
> 
> 
> -----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Rainer M Krug
> Sent: Tuesday, 23 June 2020 10:48 PM
> To: Duncan Murdoch <murdoch.duncan at gmail.com>
> Cc: R Package Devel <r-package-devel at r-project.org>
> Subject: [EXTERNAL] Re: [R-pkg-devel] Proper CRAN way - How to handle dependency of java jar file?
> 
> Thanks Duncan.
> 
>> On 23 Jun 2020, at 14:35, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>> 
>> Your assumption that .jar files are not allowed is wrong:  a number of packages contain them:  rscala, J4R, Rbgs, bartMachine, OpenStreetMap, ...  There's a specific mention about how to include them in the CRAN policy document:
> 
> That?s good to know.
> 
>> 
>> "For Java .class and .jar files, the sources should be in a top-level java directory in the source package (or that directory should explain how they can be obtained)."
> 
> So a tet file in the inst/jar directory giving the link to the GitHub repo would be fine in this case?
> 
>> 
>> If you still decide not to include your .jar file (maybe it is too big, for example),
> 
> 
> I guess it would be stretching it a bit, as the jar file is 8.2 MB, and plantuml has regular continuous updates, so I would prefer to keep it dynamic.
> 
> 
>> then I think your option 1 is unusable for those people who can't write to the library location because of permission problems. (Admin privileges are often necessary to install packages in the main library.)  Generally I think everyone can install packages somewhere, but users do really get confused when they have multiple library locations, possibly each containing a different version of a package.
> 
> So the suggested option would be to have a function, which 
> 1) ask the user to create a directory in the home folder 
> 2) download the jar file into that directory or, when no permission is granted, into the tmpdir()
> 
> Thanks, no major changes necessary for that,
> 
> Rainer
> 
> 
>> 
>> Duncan Murdoch
>> 
>> On 23/06/2020 8:18 a.m., Rainer M Krug wrote:
>>> Hi
>>> I have a package called `plantuml` (https://github.com/rkrug/plantuml) which converts plantuml code to UML graphs. It uses for this the java program https://plantuml.com which is Open Source.
>>> As it is not allowed to distribute a binary with an R package, I use the approach of a function which downloads the jar file into the directory `system.file("jar/plantuml.jar", package = "plantuml?)`.
>>> This works nicely, and at the moment, the function is called automatically before the plantuml.jar is used.
>>> Now I would like to submit the package to CRAN. I can?t find the guidelines anymore, so I am asking here:
>>> What is the appropriate way of handling this?
>>> I can think of a at least two ways of making it obvious to the user, that a binary is downloaded:
>>> 1) if the file plantuml.jar is not present, ask the user to run the function `updatePlantumlJar()` which downloads the jar to the original location in the package directory
>>> 2) tell the user to download the file manually and to put it somewhere, where the package will find it
>>> I would prefer the first version, as the plantuml.jar would be in the package directory, where usually nobody but the package is doing stuff.
>>> Any suggestions on how I could make this ?CRAN conform??
>>> Thanks a lot,
>>> Rainer
>>> --
>>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>>> Orcid ID: 0000-0002-7490-0066
>>> Department of Evolutionary Biology and Environmental Studies
>>> University of Z?rich
>>> Office Y34-J-74
>>> Winterthurerstrasse 190
>>> 8075 Z?rich
>>> Switzerland
>>> Office:	+41 (0)44 635 47 64
>>> Cell:       	+41 (0)78 630 66 57
>>> email:      Rainer.Krug at uzh.ch
>>> 		Rainer at krugs.de
>>> Skype:     RMkrug
>>> PGP: 0x0F52F982
>>> --
>>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>>> Orcid ID: 0000-0002-7490-0066
>>> Department of Evolutionary Biology and Environmental Studies
>>> University of Z?rich
>>> Office Y34-J-74
>>> Winterthurerstrasse 190
>>> 8075 Z?rich
>>> Switzerland
>>> Office:	+41 (0)44 635 47 64
>>> Cell:       	+41 (0)78 630 66 57
>>> email:      Rainer.Krug at uzh.ch
>>> 		Rainer at krugs.de
>>> Skype:     RMkrug
>>> PGP: 0x0F52F982
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
> 
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> 
> Orcid ID: 0000-0002-7490-0066
> 
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
> 
> Office:	+41 (0)44 635 47 64
> Cell:       	+41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch
> 		Rainer at krugs.de
> Skype:     RMkrug
> 
> PGP: 0x0F52F982
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Tue Jun 23 16:28:59 2020
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (SP))
Date: Tue, 23 Jun 2020 14:28:59 +0000
Subject: [R-pkg-devel] [External] Re: Two packages with the same generic
 function
In-Reply-To: <906454da-62ed-10a5-3cb7-cc337d731795@gmail.com>
References: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
 <CAGxFJbTX2h_c2LAemiQGbspjXf2stFWdKbmJWDkv-9WvQ3J=WQ@mail.gmail.com>
 <CAHHCy8G6TG9=tYDOFWdt9gsQo3j3AZi_JzNiECAAWy8mBjNOqg@mail.gmail.com>
 <6f148591-e572-cc6d-1fa1-16ef1684b5b7@gmail.com>
 <CAHz+bWYfb22itYZ5gWLoJyXdUoZOWJ4GJJY6Gk0GW2FLdC2EPg@mail.gmail.com>
 <CAGxFJbR1SJ0ge0Q0A3Z9NtWQ-Qi97bqe7UO2=L2PRWTLy_1haA@mail.gmail.com>
 <alpine.DEB.2.21.2006222147290.32631@luke-Latitude-7480>
 <CAGxFJbTb+3YZAa6yavGmEJh=693my-mvYTinoo2UsyJzf9dz6g@mail.gmail.com>
 <f65f5bcde3ff49a493a321db57452720@UM-MAIL3214.unimaas.nl>
 <8c018f91-b507-af2b-fbd6-932c8e75cf03@imbi.uni-freiburg.de>
 <906454da-62ed-10a5-3cb7-cc337d731795@gmail.com>
Message-ID: <efa149dbc07347d9aa231477d397ae5d@UM-MAIL3214.unimaas.nl>

Still, if pkgA imports the generic from pkgB, then installing pkgA installs pkgB and all of its dependencies (Depends and Imports). Which of course makes sense (as otherwise pkgB cannot be installed). But all of this just for importing

foo <- function(x, ...)
   UseMethod("foo")

from pkgB.

Best,
Wolfgang

>-----Original Message-----
>From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On
>Behalf Of Duncan Murdoch
>Sent: Tuesday, 23 June, 2020 12:25
>To: Guido Schwarzer; r-package-devel at r-project.org
>Subject: Re: [R-pkg-devel] [External] Re: Two packages with the same generic
>function
>
>On 23/06/2020 4:22 a.m., Guido Schwarzer wrote:
>> Am 23.06.20 um 10:00 schrieb Viechtbauer, Wolfgang (SP):
>>> [...]
>>> @Neal: A separate package with generic functions that pkgA and pkgB could
>import is an interesting suggestion, thanks!
>>
>> What makes this interesting is that there is no dependency on other
>> packages in generics.
>>
>> Remains the question which help page would be shown for help(foo).
>
>If a package imports and then exports the generic, it would normally
>create a help page referring to the original one where the generic is
>defined.  So both pkgA and pkgB would probably both create help pages,
>and the help system would show a page listing them both plus the generic
>one, and asking the user to choose.
>
>An example happens if you use
>
>library(broom)
>?tidy
>
>The broom package links to a page that says "These objects are imported
>from other packages. Follow the links below to see their documentation."
>One of the links is to the ?tidy page in the generics package.
>
>You are allowed to say ?broom::tidy, and then you don't go to the list
>of possibilities, you go directly to the one you asked for.
>
>Duncan Murdoch


From hongoo| @end|ng |rom m|cro@o|t@com  Tue Jun 23 16:34:46 2020
From: hongoo| @end|ng |rom m|cro@o|t@com (Hong Ooi)
Date: Tue, 23 Jun 2020 14:34:46 +0000
Subject: [R-pkg-devel] 
 [EXTERNAL] Proper CRAN way - How to handle dependency
 of java jar file?
In-Reply-To: <C6F66F83-12E0-4F5B-AAB3-BA13B5DB7DE8@krugs.de>
References: <A52AC0C9-BD94-4E3E-B458-763D6B840322@krugs.de>
 <046623ab-f676-e752-8227-25cb1b1c616c@gmail.com>
 <61BDA495-A218-496D-8C61-C870008A04D1@krugs.de>
 <HK2P15301MB0036F8E2D6B156E485826C26A6940@HK2P15301MB0036.APCP153.PROD.OUTLOOK.COM>
 <C6F66F83-12E0-4F5B-AAB3-BA13B5DB7DE8@krugs.de>
Message-ID: <HK2P15301MB00364DDE6657C8CB23A436A3A6940@HK2P15301MB0036.APCP153.PROD.OUTLOOK.COM>

Yes, that?s the one.

From: Rainer M Krug <Rainer at krugs.de>
Sent: Tuesday, 23 June 2020 11:12 PM
To: Hong Ooi <hongooi at microsoft.com>
Cc: R Package Devel <r-package-devel at r-project.org>
Subject: Re: [EXTERNAL] [R-pkg-devel] Proper CRAN way - How to handle dependency of java jar file?

Thanks Hong - I like that.

I found that package in the tools::R_user_dir() package - us that the one?

Rainer



On 23 Jun 2020, at 15:07, Hong Ooi <hongooi at microsoft.com<mailto:hongooi at microsoft.com>> wrote:

Another possibility, if you want the jar to be dynamic and also have a standard location for it, is to write it to the R config/user dir. This is available via R_user_dir() in R 4.0 (and earlier versions via the backports package). An older alternative that still works is to use the rappdirs package.


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org<mailto:r-package-devel-bounces at r-project.org>> On Behalf Of Rainer M Krug
Sent: Tuesday, 23 June 2020 10:48 PM
To: Duncan Murdoch <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>>
Cc: R Package Devel <r-package-devel at r-project.org<mailto:r-package-devel at r-project.org>>
Subject: [EXTERNAL] Re: [R-pkg-devel] Proper CRAN way - How to handle dependency of java jar file?

Thanks Duncan.


On 23 Jun 2020, at 14:35, Duncan Murdoch <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>> wrote:

Your assumption that .jar files are not allowed is wrong:  a number of packages contain them:  rscala, J4R, Rbgs, bartMachine, OpenStreetMap, ...  There's a specific mention about how to include them in the CRAN policy document:

That?s good to know.



"For Java .class and .jar files, the sources should be in a top-level java directory in the source package (or that directory should explain how they can be obtained)."

So a tet file in the inst/jar directory giving the link to the GitHub repo would be fine in this case?



If you still decide not to include your .jar file (maybe it is too big, for example),


I guess it would be stretching it a bit, as the jar file is 8.2 MB, and plantuml has regular continuous updates, so I would prefer to keep it dynamic.



then I think your option 1 is unusable for those people who can't write to the library location because of permission problems. (Admin privileges are often necessary to install packages in the main library.)  Generally I think everyone can install packages somewhere, but users do really get confused when they have multiple library locations, possibly each containing a different version of a package.

So the suggested option would be to have a function, which
1) ask the user to create a directory in the home folder
2) download the jar file into that directory or, when no permission is granted, into the tmpdir()

Thanks, no major changes necessary for that,

Rainer




Duncan Murdoch

On 23/06/2020 8:18 a.m., Rainer M Krug wrote:

Hi
I have a package called `plantuml` (https://github.com/rkrug/plantuml<https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Frkrug%2Fplantuml&data=02%7C01%7Chongooi%40microsoft.com%7C590b1587b3394bb6a8fd08d817770dc9%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637285147406339418&sdata=tDq%2Fnri4fwPoPvupKmloF47d5QH1Vb3J0lb5L17%2Fu%2FY%3D&reserved=0>) which converts plantuml code to UML graphs. It uses for this the java program https://plantuml.com<https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fplantuml.com%2F&data=02%7C01%7Chongooi%40microsoft.com%7C590b1587b3394bb6a8fd08d817770dc9%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637285147406339418&sdata=5vv%2B%2BXZCPuoblNQUH9%2Fyaz8Fg39aV8XlNIMh1RawoU0%3D&reserved=0> which is Open Source.
As it is not allowed to distribute a binary with an R package, I use the approach of a function which downloads the jar file into the directory `system.file("jar/plantuml.jar", package = "plantuml?)`.
This works nicely, and at the moment, the function is called automatically before the plantuml.jar is used.
Now I would like to submit the package to CRAN. I can?t find the guidelines anymore, so I am asking here:
What is the appropriate way of handling this?
I can think of a at least two ways of making it obvious to the user, that a binary is downloaded:
1) if the file plantuml.jar is not present, ask the user to run the function `updatePlantumlJar()` which downloads the jar to the original location in the package directory
2) tell the user to download the file manually and to put it somewhere, where the package will find it
I would prefer the first version, as the plantuml.jar would be in the package directory, where usually nobody but the package is doing stuff.
Any suggestions on how I could make this ?CRAN conform??
Thanks a lot,
Rainer
--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
Orcid ID: 0000-0002-7490-0066
Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland
Office:   +41 (0)44 635 47 64
Cell:          +41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch<mailto:Rainer.Krug at uzh.ch>
   Rainer at krugs.de<mailto:Rainer at krugs.de>
Skype:     RMkrug
PGP: 0x0F52F982
--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
Orcid ID: 0000-0002-7490-0066
Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland
Office:   +41 (0)44 635 47 64
Cell:          +41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch<mailto:Rainer.Krug at uzh.ch>
   Rainer at krugs.de<mailto:Rainer at krugs.de>
Skype:     RMkrug
PGP: 0x0F52F982
______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:   +41 (0)44 635 47 64
Cell:                    +41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch<mailto:Rainer.Krug at uzh.ch>
                           Rainer at krugs.de<mailto:Rainer at krugs.de>
Skype:     RMkrug

PGP: 0x0F52F982




              [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:   +41 (0)44 635 47 64
Cell:                    +41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch<mailto:Rainer.Krug at uzh.ch>
                           Rainer at krugs.de<mailto:Rainer at krugs.de>
Skype:     RMkrug

PGP: 0x0F52F982



	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jun 23 17:11:50 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 23 Jun 2020 11:11:50 -0400
Subject: [R-pkg-devel] [External] Re: Two packages with the same generic
 function
In-Reply-To: <efa149dbc07347d9aa231477d397ae5d@UM-MAIL3214.unimaas.nl>
References: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
 <CAGxFJbTX2h_c2LAemiQGbspjXf2stFWdKbmJWDkv-9WvQ3J=WQ@mail.gmail.com>
 <CAHHCy8G6TG9=tYDOFWdt9gsQo3j3AZi_JzNiECAAWy8mBjNOqg@mail.gmail.com>
 <6f148591-e572-cc6d-1fa1-16ef1684b5b7@gmail.com>
 <CAHz+bWYfb22itYZ5gWLoJyXdUoZOWJ4GJJY6Gk0GW2FLdC2EPg@mail.gmail.com>
 <CAGxFJbR1SJ0ge0Q0A3Z9NtWQ-Qi97bqe7UO2=L2PRWTLy_1haA@mail.gmail.com>
 <alpine.DEB.2.21.2006222147290.32631@luke-Latitude-7480>
 <CAGxFJbTb+3YZAa6yavGmEJh=693my-mvYTinoo2UsyJzf9dz6g@mail.gmail.com>
 <f65f5bcde3ff49a493a321db57452720@UM-MAIL3214.unimaas.nl>
 <8c018f91-b507-af2b-fbd6-932c8e75cf03@imbi.uni-freiburg.de>
 <906454da-62ed-10a5-3cb7-cc337d731795@gmail.com>
 <efa149dbc07347d9aa231477d397ae5d@UM-MAIL3214.unimaas.nl>
Message-ID: <fcebf703-f604-ba55-7aa0-ced0dce9191a@gmail.com>

On 23/06/2020 10:28 a.m., Viechtbauer, Wolfgang (SP) wrote:
> Still, if pkgA imports the generic from pkgB, then installing pkgA installs pkgB and all of its dependencies (Depends and Imports). Which of course makes sense (as otherwise pkgB cannot be installed). But all of this just for importing
> 
> foo <- function(x, ...)
>     UseMethod("foo")
> 
> from pkgB.

I think you'd need to be more specific about the two packages before I 
would believe this is much of a problem.

If pkgA and pkgB both contain methods for the same generic, then they 
are probably working in the same problem domain, and already share many 
dependencies.  It seems it would be rare that pkgA's dependencies and 
pkgB's dependencies are both big sets that don't have a lot of overlap.

If it's only pkgB that has the big dependency set, then just put the 
generic in pkgA.  And if you really are in that rare case where they 
both have big non-overlapping dependency sets, then create a tiny pkgC 
to hold the generic.

On the other hand, if both packages were allowed to declare foo as a 
generic, and R should think of it as the same generic, confusion would 
follow:

Think about the case of the filter functions in stats and dplyr.  It's 
not a generic in stats, but obviously could be.  In stats, the name is 
used to talk about linear filtering on a time series. (There are several 
different representations of time series in R, so it might make sense 
for stats::filter to be a generic to allow it to work on all of them.)

In dplyr, the same name is used to describe subsetting a dataset.

Those are both valid uses of the word "filter", but they have nothing to 
do with each other.  It's perfectly reasonable to think that a user 
might want to do both kinds of filtering.  If stats::filter was a 
generic and someone wrote a method for dplyr::filter, clearly a call to 
stats::filter should not use that method. It's even possible that some 
package doing time series analysis in the tidyverse framework would want 
to have methods for both generics.

Duncan Murdoch


> 
> Best,
> Wolfgang
> 
>> -----Original Message-----
>> From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On
>> Behalf Of Duncan Murdoch
>> Sent: Tuesday, 23 June, 2020 12:25
>> To: Guido Schwarzer; r-package-devel at r-project.org
>> Subject: Re: [R-pkg-devel] [External] Re: Two packages with the same generic
>> function
>>
>> On 23/06/2020 4:22 a.m., Guido Schwarzer wrote:
>>> Am 23.06.20 um 10:00 schrieb Viechtbauer, Wolfgang (SP):
>>>> [...]
>>>> @Neal: A separate package with generic functions that pkgA and pkgB could
>> import is an interesting suggestion, thanks!
>>>
>>> What makes this interesting is that there is no dependency on other
>>> packages in generics.
>>>
>>> Remains the question which help page would be shown for help(foo).
>>
>> If a package imports and then exports the generic, it would normally
>> create a help page referring to the original one where the generic is
>> defined.  So both pkgA and pkgB would probably both create help pages,
>> and the help system would show a page listing them both plus the generic
>> one, and asking the user to choose.
>>
>> An example happens if you use
>>
>> library(broom)
>> ?tidy
>>
>> The broom package links to a page that says "These objects are imported
>>from other packages. Follow the links below to see their documentation."
>> One of the links is to the ?tidy page in the generics package.
>>
>> You are allowed to say ?broom::tidy, and then you don't go to the list
>> of possibilities, you go directly to the one you asked for.
>>
>> Duncan Murdoch


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jun 23 17:23:30 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 23 Jun 2020 08:23:30 -0700
Subject: [R-pkg-devel] [External] Re: Two packages with the same generic
 function
In-Reply-To: <efa149dbc07347d9aa231477d397ae5d@UM-MAIL3214.unimaas.nl>
References: <d5c86a89b6f541e495f44efbb7e6e4c4@UM-MAIL3214.unimaas.nl>
 <CAGxFJbTX2h_c2LAemiQGbspjXf2stFWdKbmJWDkv-9WvQ3J=WQ@mail.gmail.com>
 <CAHHCy8G6TG9=tYDOFWdt9gsQo3j3AZi_JzNiECAAWy8mBjNOqg@mail.gmail.com>
 <6f148591-e572-cc6d-1fa1-16ef1684b5b7@gmail.com>
 <CAHz+bWYfb22itYZ5gWLoJyXdUoZOWJ4GJJY6Gk0GW2FLdC2EPg@mail.gmail.com>
 <CAGxFJbR1SJ0ge0Q0A3Z9NtWQ-Qi97bqe7UO2=L2PRWTLy_1haA@mail.gmail.com>
 <alpine.DEB.2.21.2006222147290.32631@luke-Latitude-7480>
 <CAGxFJbTb+3YZAa6yavGmEJh=693my-mvYTinoo2UsyJzf9dz6g@mail.gmail.com>
 <f65f5bcde3ff49a493a321db57452720@UM-MAIL3214.unimaas.nl>
 <8c018f91-b507-af2b-fbd6-932c8e75cf03@imbi.uni-freiburg.de>
 <906454da-62ed-10a5-3cb7-cc337d731795@gmail.com>
 <efa149dbc07347d9aa231477d397ae5d@UM-MAIL3214.unimaas.nl>
Message-ID: <CAGxFJbQi67miG-JfAiBSswBsT3ZpTGW6-rUoo9dREE50gD_L4w@mail.gmail.com>

Yes, but I think my concern may have been bogus. WRE says that even though
the whole package is loaded, it is *not* placed on the search path. Only
exports from the package go on the search path. So if the imported generic
is not then explicitly exported, it would not be seen nor cause a conflict
with another generic of the same name that is exported.

At least that's my understanding. However, this discussion is getting too
esoteric for me, so I'm just going to shut up and leave it to folks who are
more knowledgeable. With apologies for my noise.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jun 23, 2020 at 7:29 AM Viechtbauer, Wolfgang (SP) <
wolfgang.viechtbauer at maastrichtuniversity.nl> wrote:

> Still, if pkgA imports the generic from pkgB, then installing pkgA
> installs pkgB and all of its dependencies (Depends and Imports). Which of
> course makes sense (as otherwise pkgB cannot be installed). But all of this
> just for importing
>
> foo <- function(x, ...)
>    UseMethod("foo")
>
> from pkgB.
>
> Best,
> Wolfgang
>
> >-----Original Message-----
> >From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On
> >Behalf Of Duncan Murdoch
> >Sent: Tuesday, 23 June, 2020 12:25
> >To: Guido Schwarzer; r-package-devel at r-project.org
> >Subject: Re: [R-pkg-devel] [External] Re: Two packages with the same
> generic
> >function
> >
> >On 23/06/2020 4:22 a.m., Guido Schwarzer wrote:
> >> Am 23.06.20 um 10:00 schrieb Viechtbauer, Wolfgang (SP):
> >>> [...]
> >>> @Neal: A separate package with generic functions that pkgA and pkgB
> could
> >import is an interesting suggestion, thanks!
> >>
> >> What makes this interesting is that there is no dependency on other
> >> packages in generics.
> >>
> >> Remains the question which help page would be shown for help(foo).
> >
> >If a package imports and then exports the generic, it would normally
> >create a help page referring to the original one where the generic is
> >defined.  So both pkgA and pkgB would probably both create help pages,
> >and the help system would show a page listing them both plus the generic
> >one, and asking the user to choose.
> >
> >An example happens if you use
> >
> >library(broom)
> >?tidy
> >
> >The broom package links to a page that says "These objects are imported
> >from other packages. Follow the links below to see their documentation."
> >One of the links is to the ?tidy page in the generics package.
> >
> >You are allowed to say ?broom::tidy, and then you don't go to the list
> >of possibilities, you go directly to the one you asked for.
> >
> >Duncan Murdoch
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From R@|ner @end|ng |rom krug@@de  Tue Jun 23 20:53:09 2020
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Tue, 23 Jun 2020 20:53:09 +0200
Subject: [R-pkg-devel] 
 [EXTERNAL] Proper CRAN way - How to handle dependency
 of java jar file?
In-Reply-To: <HK2P15301MB00364DDE6657C8CB23A436A3A6940@HK2P15301MB0036.APCP153.PROD.OUTLOOK.COM>
References: <A52AC0C9-BD94-4E3E-B458-763D6B840322@krugs.de>
 <046623ab-f676-e752-8227-25cb1b1c616c@gmail.com>
 <61BDA495-A218-496D-8C61-C870008A04D1@krugs.de>
 <HK2P15301MB0036F8E2D6B156E485826C26A6940@HK2P15301MB0036.APCP153.PROD.OUTLOOK.COM>
 <C6F66F83-12E0-4F5B-AAB3-BA13B5DB7DE8@krugs.de>
 <HK2P15301MB00364DDE6657C8CB23A436A3A6940@HK2P15301MB0036.APCP153.PROD.OUTLOOK.COM>
Message-ID: <2F2A7341-F2F4-4180-BFB2-17A1ED796563@krugs.de>

Perfect. You also mention the ?backports?  package - how can I use that one to be able to also support old versions of R?

Thanks,

Rainer


> On 23 Jun 2020, at 16:34, Hong Ooi <hongooi at microsoft.com> wrote:
> 
> Yes, that?s the one.
>  
> From: Rainer M Krug <Rainer at krugs.de> 
> Sent: Tuesday, 23 June 2020 11:12 PM
> To: Hong Ooi <hongooi at microsoft.com>
> Cc: R Package Devel <r-package-devel at r-project.org>
> Subject: Re: [EXTERNAL] [R-pkg-devel] Proper CRAN way - How to handle dependency of java jar file?
>  
> Thanks Hong - I like that.
>  
> I found that package in the tools::R_user_dir() package - us that the one?
>  
> Rainer
>  
> 
> 
> On 23 Jun 2020, at 15:07, Hong Ooi <hongooi at microsoft.com <mailto:hongooi at microsoft.com>> wrote:
>  
> Another possibility, if you want the jar to be dynamic and also have a standard location for it, is to write it to the R config/user dir. This is available via R_user_dir() in R 4.0 (and earlier versions via the backports package). An older alternative that still works is to use the rappdirs package.
> 
> 
> -----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org <mailto:r-package-devel-bounces at r-project.org>> On Behalf Of Rainer M Krug
> Sent: Tuesday, 23 June 2020 10:48 PM
> To: Duncan Murdoch <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>>
> Cc: R Package Devel <r-package-devel at r-project.org <mailto:r-package-devel at r-project.org>>
> Subject: [EXTERNAL] Re: [R-pkg-devel] Proper CRAN way - How to handle dependency of java jar file?
> 
> Thanks Duncan.
> 
> 
> On 23 Jun 2020, at 14:35, Duncan Murdoch <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
> 
> Your assumption that .jar files are not allowed is wrong:  a number of packages contain them:  rscala, J4R, Rbgs, bartMachine, OpenStreetMap, ...  There's a specific mention about how to include them in the CRAN policy document:
> 
> That?s good to know.
> 
> 
> 
> "For Java .class and .jar files, the sources should be in a top-level java directory in the source package (or that directory should explain how they can be obtained)."
> 
> So a tet file in the inst/jar directory giving the link to the GitHub repo would be fine in this case?
> 
> 
> 
> If you still decide not to include your .jar file (maybe it is too big, for example),
> 
> 
> I guess it would be stretching it a bit, as the jar file is 8.2 MB, and plantuml has regular continuous updates, so I would prefer to keep it dynamic.
> 
> 
> 
> then I think your option 1 is unusable for those people who can't write to the library location because of permission problems. (Admin privileges are often necessary to install packages in the main library.)  Generally I think everyone can install packages somewhere, but users do really get confused when they have multiple library locations, possibly each containing a different version of a package.
> 
> So the suggested option would be to have a function, which 
> 1) ask the user to create a directory in the home folder 
> 2) download the jar file into that directory or, when no permission is granted, into the tmpdir()
> 
> Thanks, no major changes necessary for that,
> 
> Rainer
> 
> 
> 
> 
> Duncan Murdoch
> 
> On 23/06/2020 8:18 a.m., Rainer M Krug wrote:
> 
> Hi
> I have a package called `plantuml` (https://github.com/rkrug/plantuml <https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Frkrug%2Fplantuml&data=02%7C01%7Chongooi%40microsoft.com%7C590b1587b3394bb6a8fd08d817770dc9%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637285147406339418&sdata=tDq%2Fnri4fwPoPvupKmloF47d5QH1Vb3J0lb5L17%2Fu%2FY%3D&reserved=0>) which converts plantuml code to UML graphs. It uses for this the java program https://plantuml.com <https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fplantuml.com%2F&data=02%7C01%7Chongooi%40microsoft.com%7C590b1587b3394bb6a8fd08d817770dc9%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637285147406339418&sdata=5vv%2B%2BXZCPuoblNQUH9%2Fyaz8Fg39aV8XlNIMh1RawoU0%3D&reserved=0> which is Open Source.
> As it is not allowed to distribute a binary with an R package, I use the approach of a function which downloads the jar file into the directory `system.file("jar/plantuml.jar", package = "plantuml?)`.
> This works nicely, and at the moment, the function is called automatically before the plantuml.jar is used.
> Now I would like to submit the package to CRAN. I can?t find the guidelines anymore, so I am asking here:
> What is the appropriate way of handling this?
> I can think of a at least two ways of making it obvious to the user, that a binary is downloaded:
> 1) if the file plantuml.jar is not present, ask the user to run the function `updatePlantumlJar()` which downloads the jar to the original location in the package directory
> 2) tell the user to download the file manually and to put it somewhere, where the package will find it
> I would prefer the first version, as the plantuml.jar would be in the package directory, where usually nobody but the package is doing stuff.
> Any suggestions on how I could make this ?CRAN conform??
> Thanks a lot,
> Rainer
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> Orcid ID: 0000-0002-7490-0066
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
> Office:   +41 (0)44 635 47 64
> Cell:          +41 (0)78 630 66 57
> email: ?????Rainer.Krug at uzh.ch <mailto:Rainer.Krug at uzh.ch>
>    Rainer at krugs.de <mailto:Rainer at krugs.de>
> Skype:     RMkrug
> PGP: 0x0F52F982
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> Orcid ID: 0000-0002-7490-0066
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
> Office:   +41 (0)44 635 47 64
> Cell:          +41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch <mailto:Rainer.Krug at uzh.ch>
>    Rainer at krugs.de <mailto:Rainer at krugs.de>
> Skype:     RMkrug
> PGP: 0x0F52F982
> ______________________________________________
> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>  
> 
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> 
> Orcid ID: 0000-0002-7490-0066
> 
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
> 
> Office:   +41 (0)44 635 47 64
> Cell:                    +41 (0)78 630 66 57
> email: ?????Rainer.Krug at uzh.ch <mailto:Rainer.Krug at uzh.ch>
>                            Rainer at krugs.de <mailto:Rainer at krugs.de>
> Skype:     RMkrug
> 
> PGP: 0x0F52F982
> 
> 
> 
> 
>               [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>  
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> 
> Orcid ID: 0000-0002-7490-0066
>  
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
> 
> Office:   +41 (0)44 635 47 64
> Cell:                    +41 (0)78 630 66 57
> email: ? ? ?Rainer.Krug at uzh.ch <mailto:Rainer.Krug at uzh.ch>
>                            Rainer at krugs.de <mailto:Rainer at krugs.de>
> Skype:     RMkrug
> 
> PGP: 0x0F52F982
> 
> 
>  

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From we|@guo3 @end|ng |rom n|h@gov  Thu Jun 25 18:26:26 2020
From: we|@guo3 @end|ng |rom n|h@gov (Guo, Wei (NIH/NIMH) [C])
Date: Thu, 25 Jun 2020 16:26:26 +0000
Subject: [R-pkg-devel] checking package dependencies ... ERROR
Message-ID: <MN2PR09MB3581E1467DD50A9B77BA6286DE920@MN2PR09MB3581.namprd09.prod.outlook.com>

* using log directory 'd:/RCompile/CRANincoming/R-devel/postGGIR.Rcheck'
* using R Under development (unstable) (2020-06-23 r78741)
* using platform: x86_64-w64-mingw32 (64-bit)
* using session charset: ISO8859-1
* checking for file 'postGGIR/DESCRIPTION' ... OK
* checking extension type ... Package
* this is package 'postGGIR' version '2.0.0'
* package encoding: UTF-8
* checking CRAN incoming feasibility ... WARNING
Maintainer: 'Wei Guoi <wei.guo3 at nih.gov>'

New submission

Possibly mis-spelled words in DESCRIPTION:
  Accelerometer (3:46)
  ENMO (4:496)
  GGIR (3:37, 4:89, 4:150, 4:227)
  Rmarkdown (4:612)
  Rmd (4:39)
  Runing (3:30)
  accelerometer (4:98)
  actigraphy (4:734)
  csv (4:133)
  explortatory (4:651)

Strong dependencies not in mainstream repositories:
  actigraphy, r.jive, SpatioTemporal

Found the following (possibly) invalid URLs:
  URL: https://github.com/weiguo/postGGIR
    From: DESCRIPTION
    Status: 404
    Message: Not Found
  URL: https://github.com/weiguo/postGGIR/issues
    From: DESCRIPTION
    Status: 404
    Message: Not Found
* checking package namespace information ... OK
* checking package dependencies ... ERROR
Package required but not available: 'actigraphy'

See section 'The DESCRIPTION file' in the 'Writing R Extensions'
manual.
* DONE
Status: 1 ERROR, 1 WARNING



Dear all,
I have an error about R dependencies as shown above.
Strong dependencies not in mainstream repositories:
  actigraphy, r.jive, SpatioTemporal
actigraphy is not an R cran-package, and I downloaded it from github. How could I fix that?
Thanks,
Best,
Wei
...................................................................................................
Wei Guo [C] | Biostatistician
National Institute of Mental Health (NIMH)
E-mail: wei.guo3 at nih.gov<mailto:wei.guo3 at nih.gov>
Tel: 301-435-2206
35 Convent Dr, Bethesda,MD,20892


	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Jun 25 18:59:12 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 25 Jun 2020 18:59:12 +0200
Subject: [R-pkg-devel] checking package dependencies ... ERROR
In-Reply-To: <MN2PR09MB3581E1467DD50A9B77BA6286DE920@MN2PR09MB3581.namprd09.prod.outlook.com>
References: <MN2PR09MB3581E1467DD50A9B77BA6286DE920@MN2PR09MB3581.namprd09.prod.outlook.com>
Message-ID: <1375e221-b095-72c9-af9c-37b0efb91fe7@statistik.tu-dortmund.de>



On 25.06.2020 18:26, Guo, Wei (NIH/NIMH) [C] via R-package-devel wrote:
> * using log directory 'd:/RCompile/CRANincoming/R-devel/postGGIR.Rcheck'
> * using R Under development (unstable) (2020-06-23 r78741)
> * using platform: x86_64-w64-mingw32 (64-bit)
> * using session charset: ISO8859-1
> * checking for file 'postGGIR/DESCRIPTION' ... OK
> * checking extension type ... Package
> * this is package 'postGGIR' version '2.0.0'
> * package encoding: UTF-8
> * checking CRAN incoming feasibility ... WARNING
> Maintainer: 'Wei Guoi <wei.guo3 at nih.gov>'
> 
> New submission
> 
> Possibly mis-spelled words in DESCRIPTION:
>    Accelerometer (3:46)
>    ENMO (4:496)
>    GGIR (3:37, 4:89, 4:150, 4:227)
>    Rmarkdown (4:612)
>    Rmd (4:39)
>    Runing (3:30)
>    accelerometer (4:98)
>    actigraphy (4:734)
>    csv (4:133)
>    explortatory (4:651)
> 
> Strong dependencies not in mainstream repositories:
>    actigraphy, r.jive, SpatioTemporal
> 
> Found the following (possibly) invalid URLs:
>    URL: https://github.com/weiguo/postGGIR
>      From: DESCRIPTION
>      Status: 404
>      Message: Not Found
>    URL: https://github.com/weiguo/postGGIR/issues
>      From: DESCRIPTION
>      Status: 404
>      Message: Not Found
> * checking package namespace information ... OK
> * checking package dependencies ... ERROR
> Package required but not available: 'actigraphy'
> 
> See section 'The DESCRIPTION file' in the 'Writing R Extensions'
> manual.
> * DONE
> Status: 1 ERROR, 1 WARNING
> 
> 
> 
> Dear all,
> I have an error about R dependencies as shown above.
> Strong dependencies not in mainstream repositories:
>    actigraphy, r.jive, SpatioTemporal
> actigraphy is not an R cran-package, and I downloaded it from github. How could I fix that?

Get the package to a maintream repository (i.e. BioC or CRAN) or you 
cannot depend strongly on it.

Best,
Uwe Ligges


> Thanks,
> Best,
> Wei
> ...................................................................................................
> Wei Guo [C] | Biostatistician
> National Institute of Mental Health (NIMH)
> E-mail: wei.guo3 at nih.gov<mailto:wei.guo3 at nih.gov>
> Tel: 301-435-2206
> 35 Convent Dr, Bethesda,MD,20892
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From edd @end|ng |rom deb|@n@org  Thu Jun 25 19:31:48 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 25 Jun 2020 12:31:48 -0500
Subject: [R-pkg-devel] checking package dependencies ... ERROR
In-Reply-To: <1375e221-b095-72c9-af9c-37b0efb91fe7@statistik.tu-dortmund.de>
References: <MN2PR09MB3581E1467DD50A9B77BA6286DE920@MN2PR09MB3581.namprd09.prod.outlook.com>
 <1375e221-b095-72c9-af9c-37b0efb91fe7@statistik.tu-dortmund.de>
Message-ID: <24308.57220.553581.59544@rob.eddelbuettel.com>


On 25 June 2020 at 18:59, Uwe Ligges wrote:
| On 25.06.2020 18:26, Guo, Wei (NIH/NIMH) [C] via R-package-devel wrote:
| > Dear all,
| > I have an error about R dependencies as shown above.
| > Strong dependencies not in mainstream repositories:
| >    actigraphy, r.jive, SpatioTemporal
| > actigraphy is not an R cran-package, and I downloaded it from github. How could I fix that?
| 
| Get the package to a maintream repository (i.e. BioC or CRAN) or you 
| cannot depend strongly on it.

This is also explained in 'Writing R Extensions'.

Packages on "non-mainstream repos" (ie CRAN, BioC) can only be used in
Suggests: which means you need to condition access to them with a test.

All very doable, and Brooke and I once spelled it out in sufficient detail
for the use case of data packages. Code packages really are the same. See

  https://journal.r-project.org/archive/2017/RJ-2017-026/index.html

for more, including how to make code in your vignette conditional and more.

Cheers, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From we|@guo3 @end|ng |rom n|h@gov  Fri Jun 26 20:50:26 2020
From: we|@guo3 @end|ng |rom n|h@gov (Guo, Wei (NIH/NIMH) [C])
Date: Fri, 26 Jun 2020 18:50:26 +0000
Subject: [R-pkg-devel] error when submit a package
Message-ID: <MN2PR09MB3581CC58C12891FE3820B17ADE930@MN2PR09MB3581.namprd09.prod.outlook.com>

Good afternoon,

I am trying to submit my package to CRAN, and it failed to pass the checks due to 5 notes. I am wondering how to fix it.

Within the 5 notes, some are not fixable.
Thanks.
Best,
Wei



Dear maintainer,

package postGGIR_2.0.0.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:

Windows: <https://win-builder.r-project.org/incoming_pretest/postGGIR_2.0.0_20200626_200952/Windows/00check.log>

Status: 5 NOTEs

Debian: <https://win-builder.r-project.org/incoming_pretest/postGGIR_2.0.0_20200626_200952/Debian/00check.log>

Status: 6 NOTEs

...................................................................................................
Wei Guo [C] | Biostatistician
National Institute of Mental Health (NIMH)
E-mail: wei.guo3 at nih.gov<mailto:wei.guo3 at nih.gov>
Tel: 301-435-2206
35 Convent Dr, Bethesda,MD,20892


	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Fri Jun 26 20:55:44 2020
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 26 Jun 2020 11:55:44 -0700
Subject: [R-pkg-devel] error when submit a package
In-Reply-To: <MN2PR09MB3581CC58C12891FE3820B17ADE930@MN2PR09MB3581.namprd09.prod.outlook.com>
References: <MN2PR09MB3581CC58C12891FE3820B17ADE930@MN2PR09MB3581.namprd09.prod.outlook.com>
Message-ID: <CAGxFJbS5X_9u=4p1=KcjcbHjRLLUEU3F9faTj-TVMKMYbOvgtw@mail.gmail.com>

Did you not post this before and receive answers? Please explain why the
previous answers were insufficient. "Some notes are not fixable" is not a
satisfactory response.


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jun 26, 2020 at 11:50 AM Guo, Wei (NIH/NIMH) [C] via
R-package-devel <r-package-devel at r-project.org> wrote:

> Good afternoon,
>
> I am trying to submit my package to CRAN, and it failed to pass the checks
> due to 5 notes. I am wondering how to fix it.
>
> Within the 5 notes, some are not fixable.
> Thanks.
> Best,
> Wei
>
>
>
> Dear maintainer,
>
> package postGGIR_2.0.0.tar.gz does not pass the incoming checks
> automatically, please see the following pre-tests:
>
> Windows: <
> https://win-builder.r-project.org/incoming_pretest/postGGIR_2.0.0_20200626_200952/Windows/00check.log
> >
>
> Status: 5 NOTEs
>
> Debian: <
> https://win-builder.r-project.org/incoming_pretest/postGGIR_2.0.0_20200626_200952/Debian/00check.log
> >
>
> Status: 6 NOTEs
>
>
> ...................................................................................................
> Wei Guo [C] | Biostatistician
> National Institute of Mental Health (NIMH)
> E-mail: wei.guo3 at nih.gov<mailto:wei.guo3 at nih.gov>
> Tel: 301-435-2206
> 35 Convent Dr, Bethesda,MD,20892
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From z267xu @end|ng |rom uw@ter|oo@c@  Fri Jun 26 21:16:37 2020
From: z267xu @end|ng |rom uw@ter|oo@c@ (Zehao Xu)
Date: Fri, 26 Jun 2020 19:16:37 +0000
Subject: [R-pkg-devel] error when submit a package
In-Reply-To: <CAGxFJbS5X_9u=4p1=KcjcbHjRLLUEU3F9faTj-TVMKMYbOvgtw@mail.gmail.com>
References: <MN2PR09MB3581CC58C12891FE3820B17ADE930@MN2PR09MB3581.namprd09.prod.outlook.com>,
 <CAGxFJbS5X_9u=4p1=KcjcbHjRLLUEU3F9faTj-TVMKMYbOvgtw@mail.gmail.com>
Message-ID: <946c82978355482e84acd8a11a1d25db@uwaterloo.ca>

Well,


The first note can be ignored (Note that you are the maintainer),


the second one

```

Maintainer: 'Wei Guoi <wei.guo3 at nih.gov>'
  Authors at R:  'Wei Guo <wei.guo3 at nih.gov>'

```

clearly, you miss spelled your name...


the third one,

```

checking package dependencies ... NOTE
Package suggested but not available for checking: 'actigraphy'

```

This stackoverflow https://stackoverflow.com/questions/51453717/issue-with-r-package-check-on-windows-package-suggested-but-not-available-str can solve you problem



the fourth one

```

IV_long2: no visible binding for global variable 'IV'
Time_long2: no visible global function definition for 'wear_flag'

```

It looks like you are using some variables not well defined in your namespace, try to search "IV" and "wear_flag" in your package. Both of them seem missing somehow.


the fifth

```

Package vignette with placeholder title 'Vignette Title':

```

To be honest, I have no idea. What I suppose is that you use some illegal chars in your vignette title.  It would be helpful if your share your rmakrdown ymal.


Best

Zehao

________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Bert Gunter <bgunter.4567 at gmail.com>
Sent: Friday, June 26, 2020 3:55:44 PM
To: Guo, Wei (NIH/NIMH) [C]
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] error when submit a package

Did you not post this before and receive answers? Please explain why the
previous answers were insufficient. "Some notes are not fixable" is not a
satisfactory response.


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Fri, Jun 26, 2020 at 11:50 AM Guo, Wei (NIH/NIMH) [C] via
R-package-devel <r-package-devel at r-project.org> wrote:

> Good afternoon,
>
> I am trying to submit my package to CRAN, and it failed to pass the checks
> due to 5 notes. I am wondering how to fix it.
>
> Within the 5 notes, some are not fixable.
> Thanks.
> Best,
> Wei
>
>
>
> Dear maintainer,
>
> package postGGIR_2.0.0.tar.gz does not pass the incoming checks
> automatically, please see the following pre-tests:
>
> Windows: <
> https://win-builder.r-project.org/incoming_pretest/postGGIR_2.0.0_20200626_200952/Windows/00check.log
> >
>
> Status: 5 NOTEs
>
> Debian: <
> https://win-builder.r-project.org/incoming_pretest/postGGIR_2.0.0_20200626_200952/Debian/00check.log
> >
>
> Status: 6 NOTEs
>
>
> ...................................................................................................
> Wei Guo [C] | Biostatistician
> National Institute of Mental Health (NIMH)
> E-mail: wei.guo3 at nih.gov<mailto:wei.guo3 at nih.gov>
> Tel: 301-435-2206
> 35 Convent Dr, Bethesda,MD,20892
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From p@u|h|bb|ng @end|ng |rom gm@||@com  Fri Jun 26 21:31:17 2020
From: p@u|h|bb|ng @end|ng |rom gm@||@com (Paul Hibbing)
Date: Fri, 26 Jun 2020 15:31:17 -0400
Subject: [R-pkg-devel] error when submit a package
In-Reply-To: <946c82978355482e84acd8a11a1d25db@uwaterloo.ca>
References: <MN2PR09MB3581CC58C12891FE3820B17ADE930@MN2PR09MB3581.namprd09.prod.outlook.com>
 <CAGxFJbS5X_9u=4p1=KcjcbHjRLLUEU3F9faTj-TVMKMYbOvgtw@mail.gmail.com>
 <946c82978355482e84acd8a11a1d25db@uwaterloo.ca>
Message-ID: <CANA-rNPnpAhV7FdC08FDOi4cX37Rh3p72-ShhZMzsmux_QcEPg@mail.gmail.com>

* The fourth can likely be addressed by if(getRversion() >= "2.15.1")
utils::globalVariables(c("IV", "M", "filename2id", "wear_flag"))

See https://github.com/tidyverse/magrittr/issues/29

* The fifth suggests you need to replace the default vignette title
with something specific to your package.

* The sixth (on Debian) could be fixed by adding
STUDYNAME_part0.maincall.R to .Rbuildignore. But the filename suggests
you need that file in your R directory, not ignored...

Hope that helps.
-Paul

On Fri, Jun 26, 2020 at 3:21 PM Zehao Xu <z267xu at uwaterloo.ca> wrote:
>
> Well,
>
>
> The first note can be ignored (Note that you are the maintainer),
>
>
> the second one
>
> ```
>
> Maintainer: 'Wei Guoi <wei.guo3 at nih.gov>'
>   Authors at R:  'Wei Guo <wei.guo3 at nih.gov>'
>
> ```
>
> clearly, you miss spelled your name...
>
>
> the third one,
>
> ```
>
> checking package dependencies ... NOTE
> Package suggested but not available for checking: 'actigraphy'
>
> ```
>
> This stackoverflow https://stackoverflow.com/questions/51453717/issue-with-r-package-check-on-windows-package-suggested-but-not-available-str can solve you problem
>
>
>
> the fourth one
>
> ```
>
> IV_long2: no visible binding for global variable 'IV'
> Time_long2: no visible global function definition for 'wear_flag'
>
> ```
>
> It looks like you are using some variables not well defined in your namespace, try to search "IV" and "wear_flag" in your package. Both of them seem missing somehow.
>
>
> the fifth
>
> ```
>
> Package vignette with placeholder title 'Vignette Title':
>
> ```
>
> To be honest, I have no idea. What I suppose is that you use some illegal chars in your vignette title.  It would be helpful if your share your rmakrdown ymal.
>
>
> Best
>
> Zehao
>
> ________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Bert Gunter <bgunter.4567 at gmail.com>
> Sent: Friday, June 26, 2020 3:55:44 PM
> To: Guo, Wei (NIH/NIMH) [C]
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] error when submit a package
>
> Did you not post this before and receive answers? Please explain why the
> previous answers were insufficient. "Some notes are not fixable" is not a
> satisfactory response.
>
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Fri, Jun 26, 2020 at 11:50 AM Guo, Wei (NIH/NIMH) [C] via
> R-package-devel <r-package-devel at r-project.org> wrote:
>
> > Good afternoon,
> >
> > I am trying to submit my package to CRAN, and it failed to pass the checks
> > due to 5 notes. I am wondering how to fix it.
> >
> > Within the 5 notes, some are not fixable.
> > Thanks.
> > Best,
> > Wei
> >
> >
> >
> > Dear maintainer,
> >
> > package postGGIR_2.0.0.tar.gz does not pass the incoming checks
> > automatically, please see the following pre-tests:
> >
> > Windows: <
> > https://win-builder.r-project.org/incoming_pretest/postGGIR_2.0.0_20200626_200952/Windows/00check.log
> > >
> >
> > Status: 5 NOTEs
> >
> > Debian: <
> > https://win-builder.r-project.org/incoming_pretest/postGGIR_2.0.0_20200626_200952/Debian/00check.log
> > >
> >
> > Status: 6 NOTEs
> >
> >
> > ...................................................................................................
> > Wei Guo [C] | Biostatistician
> > National Institute of Mental Health (NIMH)
> > E-mail: wei.guo3 at nih.gov<mailto:wei.guo3 at nih.gov>
> > Tel: 301-435-2206
> > 35 Convent Dr, Bethesda,MD,20892
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Fri Jun 26 23:22:50 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 26 Jun 2020 16:22:50 -0500
Subject: [R-pkg-devel] error when submit a package
In-Reply-To: <946c82978355482e84acd8a11a1d25db@uwaterloo.ca>
References: <MN2PR09MB3581CC58C12891FE3820B17ADE930@MN2PR09MB3581.namprd09.prod.outlook.com>
 <CAGxFJbS5X_9u=4p1=KcjcbHjRLLUEU3F9faTj-TVMKMYbOvgtw@mail.gmail.com>
 <946c82978355482e84acd8a11a1d25db@uwaterloo.ca>
Message-ID: <24310.26410.828991.420428@rob.eddelbuettel.com>


On 26 June 2020 at 19:16, Zehao Xu wrote:
| Package suggested but not available for checking: 'actigraphy'
| 
| ```
| 
| This stackoverflow https://stackoverflow.com/questions/51453717/issue-with-r-package-check-on-windows-package-suggested-but-not-available-str can solve you problem

No, wrong analysis. This SO answer is for _within CRAN_ depedency graphs.

Mr Guo has a problem with a package _outside of CRAN_ he chooses to depends
upon. That will *never work*.

I answered on this list _just yesterday_ how I would address this, including
a relevant peer-review reference. If Mr Gup chooses to ignore such advice and
just spams us daily I suppose we may choose to ignore his emails. Oh well.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From we|@guo3 @end|ng |rom n|h@gov  Fri Jun 26 23:33:54 2020
From: we|@guo3 @end|ng |rom n|h@gov (Guo, Wei (NIH/NIMH) [C])
Date: Fri, 26 Jun 2020 21:33:54 +0000
Subject: [R-pkg-devel] error when submit a package
In-Reply-To: <24310.26410.828991.420428@rob.eddelbuettel.com>
References: <MN2PR09MB3581CC58C12891FE3820B17ADE930@MN2PR09MB3581.namprd09.prod.outlook.com>
 <CAGxFJbS5X_9u=4p1=KcjcbHjRLLUEU3F9faTj-TVMKMYbOvgtw@mail.gmail.com>
 <946c82978355482e84acd8a11a1d25db@uwaterloo.ca>
 <24310.26410.828991.420428@rob.eddelbuettel.com>
Message-ID: <MN2PR09MB358128B06E22C08723E16809DE930@MN2PR09MB3581.namprd09.prod.outlook.com>

Thank you all for the help. I do ask a question about a package _outside of CRAN yesterday. But I have new questions today about the global variable undefined, which was read from an Rdata object.

Thank you for your kind help again.
Best,
Wei

-----Original Message-----
From: Dirk Eddelbuettel <edd at debian.org> 
Sent: Friday, June 26, 2020 5:23 PM
To: Zehao Xu <z267xu at uwaterloo.ca>
Cc: Bert Gunter <bgunter.4567 at gmail.com>; Guo, Wei (NIH/NIMH) [C] <wei.guo3 at nih.gov>; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] error when submit a package


On 26 June 2020 at 19:16, Zehao Xu wrote:
| Package suggested but not available for checking: 'actigraphy'
| 
| ```
| 
| This stackoverflow 
| https://stackoverflow.com/questions/51453717/issue-with-r-package-chec
| k-on-windows-package-suggested-but-not-available-str can solve you 
| problem

No, wrong analysis. This SO answer is for _within CRAN_ depedency graphs.

Mr Guo has a problem with a package _outside of CRAN_ he chooses to depends upon. That will *never work*.

I answered on this list _just yesterday_ how I would address this, including a relevant peer-review reference. If Mr Gup chooses to ignore such advice and just spams us daily I suppose we may choose to ignore his emails. Oh well.

Dirk

--
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ||@@|nconnect|cut @end|ng |rom gm@||@com  Sun Jun 28 12:43:53 2020
From: ||@@|nconnect|cut @end|ng |rom gm@||@com (Lisa GM)
Date: Sun, 28 Jun 2020 12:43:53 +0200
Subject: [R-pkg-devel] R package does not find DLL routine
Message-ID: <CAJh6MA7s75kmu1rdWJPA9WjwX5EOhxA2hyWYcr040dkPvGqkjA@mail.gmail.com>

Hi,

I would like to create an R package that calls a DLL (in my case a .dylib)
which is already compiled. If I load and then call the DLL in a regular .R
file it works fine but when I try to add the DLL to the package it doesn't
work anymore. I'm using devtools and roxygen2 to update and compile the
package but it fails to add the routine from the DLL. If I generate the
NAMESPACE file of the package manually I get the same error, just later
when I try to run a function from my package that calls the DLL routine. To
better understand the issue, I created the following minimal working
example:

I called the package "sum", and it has a sum_R.R that contains the
following code:

# R function to call sum_R.so
#' @useDynLib sum sum_c
#' @name sum
#' @export

sum_call <- function(p, n, Y){
  shared_lib <- system.file("libs/sum.dylib", package="sum", mustWork =
TRUE)
  #shared_lib <- "~/Desktop/mysum/inst/libs/sum.dylib"
  dyn.load(shared_lib)

  rtn <- .C("sum_c", as.integer(p), as.integer(n), as.double(Y), PACKAGE =
"sum")
}

And a DLL called sum.dylib that comes from the c++ source code sum.cpp and
looks as follows:

#include <cstdio>
#include <ostream>
#include <iostream>

extern "C"
    void sum_c(int& p, int& n, double* array) {
        double res = 0;
        for (int i = 0; i < p * n; ++i) {
            res += array[i];
        }
        std::cout << "result : " << res << std::endl;
    }

and which I compile with:

g++-9 -Wall -O3 -shared sum.cpp -o sum.dylib

If I now add sum.dylib to my package and try to run devtools::document() to
update the package I get the following error:

Updating sum documentation

Loading sum

Error in .C("sum_c", as.integer(p), as.integer(n), as.double(Y)) (from
sum_fct.R#12) :

  "sum_c" not resolved from current namespace (sum)

Calls: document ... source_many -> source_one -> eval -> eval -> sum_call
-> .C

Execution halted

I'm using R 3.6. and a Mac Catalina but I get the same error message when
doing the above on a Linux machine.

Does anyone have an idea what might be causing this issue? I would be happy
to hear your suggestions.

Best,
Lisa

	[[alternative HTML version deleted]]


From ch@r||e @end|ng |rom @t@t@umn@edu  Sun Jun 28 18:07:46 2020
From: ch@r||e @end|ng |rom @t@t@umn@edu (Charles Geyer)
Date: Sun, 28 Jun 2020 11:07:46 -0500
Subject: [R-pkg-devel] package CatDataAnalysis
Message-ID: <CAKctRd04XEsuZwqj8SBO70Oc0w+_1Lhep=trpS3C1ZM5h2QRYQ@mail.gmail.com>

I have a package that has the datasets for Categorical Data Analysis by
Agresti that do not appear in the book.  The whole package is a github repo
https://github.com/cjgeyer/CatDataAnalysis.  All of the data were
translated mechanically using the R script foo.R included in the repo (but
not in the package) from Agresti's web site
http://www.stat.ufl.edu/~aa/cda/data.html.

This package seems to be a useful service to students and teachers.  The
data
are much simpler to use with this package than trying to get the data from
Agresti's web page (foo.R has 277 lines of code).

When I submitted the package to CRAN, I got the following response.

> The Description field of the DESCRIPTION file is intended to be a (one
> paragraph) description of what the package does and why it may be
> useful. Please elaborate. Tell the users what the datasets are about and
> what they contain so they can use them even when they haven't read your
> book.

> Please fix and resubmit, and document what was changed in the submission
> comments.

In an alternate universe without copyright law this seems a reasonable
request.  In this universe it seems to be asking for trouble.  I know about
fair use, but I am not a lawyer and do not want to walk the borderline
between fair use and copyright violation.

The package as it is seems OK because it comes from the author's public web
site and these data were never in the book.

Please note that I made Alan Agresti (with his acquiescence) the author of
the package because it is his book and his data, but I (or rather foo.R)
did all the work.

I replied to cran.r-project.org, but that was apparently sent to /dev/null.

This book is IMHO the authoritative textbook on the subject.  Amazon sales
rank agrees.  The book is used for many courses.  So this package would be
very helpful as is to many students and teachers.

So what to do?  Is there any way to get this package on CRAN?

-- 
Charles Geyer
Professor, School of Statistics
Resident Fellow, Minnesota Center for Philosophy of Science
University of Minnesota
charlie at stat.umn.edu

	[[alternative HTML version deleted]]


From n|u|tz @end|ng |rom gm@||@com  Sun Jun 28 18:31:33 2020
From: n|u|tz @end|ng |rom gm@||@com (Neal Fultz)
Date: Sun, 28 Jun 2020 09:31:33 -0700
Subject: [R-pkg-devel] package CatDataAnalysis
In-Reply-To: <CAKctRd04XEsuZwqj8SBO70Oc0w+_1Lhep=trpS3C1ZM5h2QRYQ@mail.gmail.com>
References: <CAKctRd04XEsuZwqj8SBO70Oc0w+_1Lhep=trpS3C1ZM5h2QRYQ@mail.gmail.com>
Message-ID: <CAL9B2vdvLxMKaOevAbry+nk7=kv5au7r=EnFHyd-ZFTg8Mb2-w@mail.gmail.com>

I'm not sure exactly what cran is asking for, but the wooldridge
package is a good example of a text book data set package, so maybe
you can use the same format they did.

https://cran.r-project.org/web/packages/wooldridge/index.html

Best,

Neal

On Sun, Jun 28, 2020 at 9:08 AM Charles Geyer <charlie at stat.umn.edu> wrote:
>
> I have a package that has the datasets for Categorical Data Analysis by
> Agresti that do not appear in the book.  The whole package is a github repo
> https://github.com/cjgeyer/CatDataAnalysis.  All of the data were
> translated mechanically using the R script foo.R included in the repo (but
> not in the package) from Agresti's web site
> http://www.stat.ufl.edu/~aa/cda/data.html.
>
> This package seems to be a useful service to students and teachers.  The
> data
> are much simpler to use with this package than trying to get the data from
> Agresti's web page (foo.R has 277 lines of code).
>
> When I submitted the package to CRAN, I got the following response.
>
> > The Description field of the DESCRIPTION file is intended to be a (one
> > paragraph) description of what the package does and why it may be
> > useful. Please elaborate. Tell the users what the datasets are about and
> > what they contain so they can use them even when they haven't read your
> > book.
>
> > Please fix and resubmit, and document what was changed in the submission
> > comments.
>
> In an alternate universe without copyright law this seems a reasonable
> request.  In this universe it seems to be asking for trouble.  I know about
> fair use, but I am not a lawyer and do not want to walk the borderline
> between fair use and copyright violation.
>
> The package as it is seems OK because it comes from the author's public web
> site and these data were never in the book.
>
> Please note that I made Alan Agresti (with his acquiescence) the author of
> the package because it is his book and his data, but I (or rather foo.R)
> did all the work.
>
> I replied to cran.r-project.org, but that was apparently sent to /dev/null.
>
> This book is IMHO the authoritative textbook on the subject.  Amazon sales
> rank agrees.  The book is used for many courses.  So this package would be
> very helpful as is to many students and teachers.
>
> So what to do?  Is there any way to get this package on CRAN?
>
> --
> Charles Geyer
> Professor, School of Statistics
> Resident Fellow, Minnesota Center for Philosophy of Science
> University of Minnesota
> charlie at stat.umn.edu
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ch@r||e @end|ng |rom @t@t@umn@edu  Sun Jun 28 18:38:50 2020
From: ch@r||e @end|ng |rom @t@t@umn@edu (Charles Geyer)
Date: Sun, 28 Jun 2020 11:38:50 -0500
Subject: [R-pkg-devel] package CatDataAnalysis
In-Reply-To: <CAL9B2vdvLxMKaOevAbry+nk7=kv5au7r=EnFHyd-ZFTg8Mb2-w@mail.gmail.com>
References: <CAKctRd04XEsuZwqj8SBO70Oc0w+_1Lhep=trpS3C1ZM5h2QRYQ@mail.gmail.com>
 <CAL9B2vdvLxMKaOevAbry+nk7=kv5au7r=EnFHyd-ZFTg8Mb2-w@mail.gmail.com>
Message-ID: <CAKctRd3rASDLnVv56gF_h4v0M0PsPeou5-VHOivAWqP05Uh5og@mail.gmail.com>

Actually the wooldridge package does not seem to satisfy any of the
specific requests CRAN asked me for.  I have checked several other CRAN
packages for textbooks and they don't seem to satisfy those requirements
either.  So this seems to be a new idea from CRAN.

On Sun, Jun 28, 2020 at 11:32 AM Neal Fultz <nfultz at gmail.com> wrote:

> I'm not sure exactly what cran is asking for, but the wooldridge
> package is a good example of a text book data set package, so maybe
> you can use the same format they did.
>
> https://cran.r-project.org/web/packages/wooldridge/index.html
>
> Best,
>
> Neal
>
> On Sun, Jun 28, 2020 at 9:08 AM Charles Geyer <charlie at stat.umn.edu>
> wrote:
> >
> > I have a package that has the datasets for Categorical Data Analysis by
> > Agresti that do not appear in the book.  The whole package is a github
> repo
> > https://github.com/cjgeyer/CatDataAnalysis.  All of the data were
> > translated mechanically using the R script foo.R included in the repo
> (but
> > not in the package) from Agresti's web site
> > http://www.stat.ufl.edu/~aa/cda/data.html.
> >
> > This package seems to be a useful service to students and teachers.  The
> > data
> > are much simpler to use with this package than trying to get the data
> from
> > Agresti's web page (foo.R has 277 lines of code).
> >
> > When I submitted the package to CRAN, I got the following response.
> >
> > > The Description field of the DESCRIPTION file is intended to be a (one
> > > paragraph) description of what the package does and why it may be
> > > useful. Please elaborate. Tell the users what the datasets are about
> and
> > > what they contain so they can use them even when they haven't read your
> > > book.
> >
> > > Please fix and resubmit, and document what was changed in the
> submission
> > > comments.
> >
> > In an alternate universe without copyright law this seems a reasonable
> > request.  In this universe it seems to be asking for trouble.  I know
> about
> > fair use, but I am not a lawyer and do not want to walk the borderline
> > between fair use and copyright violation.
> >
> > The package as it is seems OK because it comes from the author's public
> web
> > site and these data were never in the book.
> >
> > Please note that I made Alan Agresti (with his acquiescence) the author
> of
> > the package because it is his book and his data, but I (or rather foo.R)
> > did all the work.
> >
> > I replied to cran.r-project.org, but that was apparently sent to
> /dev/null.
> >
> > This book is IMHO the authoritative textbook on the subject.  Amazon
> sales
> > rank agrees.  The book is used for many courses.  So this package would
> be
> > very helpful as is to many students and teachers.
> >
> > So what to do?  Is there any way to get this package on CRAN?
> >
> > --
> > Charles Geyer
> > Professor, School of Statistics
> > Resident Fellow, Minnesota Center for Philosophy of Science
> > University of Minnesota
> > charlie at stat.umn.edu
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Charles Geyer
Professor, School of Statistics
Resident Fellow, Minnesota Center for Philosophy of Science
University of Minnesota
charlie at stat.umn.edu

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Sun Jun 28 18:47:29 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sun, 28 Jun 2020 11:47:29 -0500
Subject: [R-pkg-devel] R package does not find DLL routine
In-Reply-To: <CAJh6MA7s75kmu1rdWJPA9WjwX5EOhxA2hyWYcr040dkPvGqkjA@mail.gmail.com>
References: <CAJh6MA7s75kmu1rdWJPA9WjwX5EOhxA2hyWYcr040dkPvGqkjA@mail.gmail.com>
Message-ID: <24312.51617.374212.733906@rob.eddelbuettel.com>


Lisa,

One can do what you do, but it is fraught with some difficulties (as you
experienced) and even more so once you try to do this portably. Helper
packages exists: the `inline` package is the oldest of this class and still
supports the .C() interface you used here. And which for a few years now has
generally been recommended against.  But if you insist, you can; and `inline`
will take care of compiling, linking and loading for you.

But you already use C++ as evidenced by the iostream use. So why not use just
a wee bit more of it?  It makes you program simpler (one less argument on the
signature) and opens the door to more tooling--in the snippet below we use
Rcpp without using any of its data types. It even runs the R example for us.

Code first:
-----------------------------------------------------------------------------
#include <Rcpp.h>

// [[Rcpp::export]]
void sum_c(int& p, std::vector<double> array) {
  int n = array.size();
  double res = 0;
  for (int i = 0; i < p * n; ++i) {
    res += array[i];
  }
  std::cout << "result : " << res << std::endl;
}

/*** R
myvec <- sqrt(1:10)
sum(77, myvec)
*/
-----------------------------------------------------------------------------

Usage demo:
-----------------------------------------------------------------------------
R> Rcpp::sourceCpp("/tmp/lisademo.cpp")

R> myvec <- sqrt(1:10)

R> sum(77, myvec)
[1] 99.4683
R> 
-----------------------------------------------------------------------------

There are other helper packages, and if you still want to do it by hand all
details are in _Writing R Extensions_.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Sun Jun 28 19:12:37 2020
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Mon, 29 Jun 2020 03:12:37 +1000
Subject: [R-pkg-devel] package CatDataAnalysis
In-Reply-To: <CAKctRd3rASDLnVv56gF_h4v0M0PsPeou5-VHOivAWqP05Uh5og@mail.gmail.com>
References: <CAKctRd04XEsuZwqj8SBO70Oc0w+_1Lhep=trpS3C1ZM5h2QRYQ@mail.gmail.com>
 <CAL9B2vdvLxMKaOevAbry+nk7=kv5au7r=EnFHyd-ZFTg8Mb2-w@mail.gmail.com>
 <CAKctRd3rASDLnVv56gF_h4v0M0PsPeou5-VHOivAWqP05Uh5og@mail.gmail.com>
Message-ID: <CAJmOi+Nmp_9tdbVZTc2sFc_3uVn2doJFrXwDdUVMVN3rpTdkNw@mail.gmail.com>

If you?re not the author of the data, you can?t submit it as such. The
website has a copyright message on it which, while not definitive, doesn?t
suggest the use you?re proposing would be allowed.

Bear in mind that you may expose CRAN not just yourself to liability if you
try to conceal true authorship.

I?d recommend asking the author of that website for permission. Either he
says that?s fine in which case you have permission, or he doesn?t and you
dodge a bullet.


On Mon, 29 Jun 2020 at 2:45 am, Charles Geyer <charlie at stat.umn.edu> wrote:

> Actually the wooldridge package does not seem to satisfy any of the
> specific requests CRAN asked me for.  I have checked several other CRAN
> packages for textbooks and they don't seem to satisfy those requirements
> either.  So this seems to be a new idea from CRAN.
>
> On Sun, Jun 28, 2020 at 11:32 AM Neal Fultz <nfultz at gmail.com> wrote:
>
> > I'm not sure exactly what cran is asking for, but the wooldridge
> > package is a good example of a text book data set package, so maybe
> > you can use the same format they did.
> >
> > https://cran.r-project.org/web/packages/wooldridge/index.html
> >
> > Best,
> >
> > Neal
> >
> > On Sun, Jun 28, 2020 at 9:08 AM Charles Geyer <charlie at stat.umn.edu>
> > wrote:
> > >
> > > I have a package that has the datasets for Categorical Data Analysis by
> > > Agresti that do not appear in the book.  The whole package is a github
> > repo
> > > https://github.com/cjgeyer/CatDataAnalysis.  All of the data were
> > > translated mechanically using the R script foo.R included in the repo
> > (but
> > > not in the package) from Agresti's web site
> > > http://www.stat.ufl.edu/~aa/cda/data.html.
> > >
> > > This package seems to be a useful service to students and teachers.
> The
> > > data
> > > are much simpler to use with this package than trying to get the data
> > from
> > > Agresti's web page (foo.R has 277 lines of code).
> > >
> > > When I submitted the package to CRAN, I got the following response.
> > >
> > > > The Description field of the DESCRIPTION file is intended to be a
> (one
> > > > paragraph) description of what the package does and why it may be
> > > > useful. Please elaborate. Tell the users what the datasets are about
> > and
> > > > what they contain so they can use them even when they haven't read
> your
> > > > book.
> > >
> > > > Please fix and resubmit, and document what was changed in the
> > submission
> > > > comments.
> > >
> > > In an alternate universe without copyright law this seems a reasonable
> > > request.  In this universe it seems to be asking for trouble.  I know
> > about
> > > fair use, but I am not a lawyer and do not want to walk the borderline
> > > between fair use and copyright violation.
> > >
> > > The package as it is seems OK because it comes from the author's public
> > web
> > > site and these data were never in the book.
> > >
> > > Please note that I made Alan Agresti (with his acquiescence) the author
> > of
> > > the package because it is his book and his data, but I (or rather
> foo.R)
> > > did all the work.
> > >
> > > I replied to cran.r-project.org, but that was apparently sent to
> > /dev/null.
> > >
> > > This book is IMHO the authoritative textbook on the subject.  Amazon
> > sales
> > > rank agrees.  The book is used for many courses.  So this package would
> > be
> > > very helpful as is to many students and teachers.
> > >
> > > So what to do?  Is there any way to get this package on CRAN?
> > >
> > > --
> > > Charles Geyer
> > > Professor, School of Statistics
> > > Resident Fellow, Minnesota Center for Philosophy of Science
> > > University of Minnesota
> > > charlie at stat.umn.edu
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>
> --
> Charles Geyer
> Professor, School of Statistics
> Resident Fellow, Minnesota Center for Philosophy of Science
> University of Minnesota
> charlie at stat.umn.edu
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Sun Jun 28 19:16:12 2020
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Sun, 28 Jun 2020 17:16:12 +0000
Subject: [R-pkg-devel] package CatDataAnalysis
In-Reply-To: <CAKctRd3rASDLnVv56gF_h4v0M0PsPeou5-VHOivAWqP05Uh5og@mail.gmail.com>
References: <CAKctRd04XEsuZwqj8SBO70Oc0w+_1Lhep=trpS3C1ZM5h2QRYQ@mail.gmail.com>
 <CAL9B2vdvLxMKaOevAbry+nk7=kv5au7r=EnFHyd-ZFTg8Mb2-w@mail.gmail.com>,
 <CAKctRd3rASDLnVv56gF_h4v0M0PsPeou5-VHOivAWqP05Uh5og@mail.gmail.com>
Message-ID: <f4a25c190cf746db9851e3892eb1cb03@umanitoba.ca>

For what it's worth, I'd be inclined to interpreting CRAN's response *very* literally, i.e. your Description field is not descriptive enough. According to what I can see in the Github repo, you only have


"Datasets used in the book Categorical Data Analysis by Agresti but not printed in the book."


Which is not much more than what the Title field says. One glaring omission (IMO) from the Description field is any mention of Agresti's website, where the data comes from.


In contrast, looking at the "woolridge" package, I can see from the Description field that it contains 111 datasets (well, that's in the Title field), it's about econometrics, and the purpose of the package is to make it easier for students to work with these datasets.


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>



________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Charles Geyer <charlie at stat.umn.edu>
Sent: June 28, 2020 11:38 AM
To: Neal Fultz
Cc: R Package Development
Subject: Re: [R-pkg-devel] package CatDataAnalysis

********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

Actually the wooldridge package does not seem to satisfy any of the
specific requests CRAN asked me for.  I have checked several other CRAN
packages for textbooks and they don't seem to satisfy those requirements
either.  So this seems to be a new idea from CRAN.

On Sun, Jun 28, 2020 at 11:32 AM Neal Fultz <nfultz at gmail.com> wrote:

> I'm not sure exactly what cran is asking for, but the wooldridge
> package is a good example of a text book data set package, so maybe
> you can use the same format they did.
>
> https://cran.r-project.org/web/packages/wooldridge/index.html
>
> Best,
>
> Neal
>
> On Sun, Jun 28, 2020 at 9:08 AM Charles Geyer <charlie at stat.umn.edu>
> wrote:
> >
> > I have a package that has the datasets for Categorical Data Analysis by
> > Agresti that do not appear in the book.  The whole package is a github
> repo
> > https://github.com/cjgeyer/CatDataAnalysis.  All of the data were
> > translated mechanically using the R script foo.R included in the repo
> (but
> > not in the package) from Agresti's web site
> > http://www.stat.ufl.edu/~aa/cda/data.html.
> >
> > This package seems to be a useful service to students and teachers.  The
> > data
> > are much simpler to use with this package than trying to get the data
> from
> > Agresti's web page (foo.R has 277 lines of code).
> >
> > When I submitted the package to CRAN, I got the following response.
> >
> > > The Description field of the DESCRIPTION file is intended to be a (one
> > > paragraph) description of what the package does and why it may be
> > > useful. Please elaborate. Tell the users what the datasets are about
> and
> > > what they contain so they can use them even when they haven't read your
> > > book.
> >
> > > Please fix and resubmit, and document what was changed in the
> submission
> > > comments.
> >
> > In an alternate universe without copyright law this seems a reasonable
> > request.  In this universe it seems to be asking for trouble.  I know
> about
> > fair use, but I am not a lawyer and do not want to walk the borderline
> > between fair use and copyright violation.
> >
> > The package as it is seems OK because it comes from the author's public
> web
> > site and these data were never in the book.
> >
> > Please note that I made Alan Agresti (with his acquiescence) the author
> of
> > the package because it is his book and his data, but I (or rather foo.R)
> > did all the work.
> >
> > I replied to cran.r-project.org, but that was apparently sent to
> /dev/null.
> >
> > This book is IMHO the authoritative textbook on the subject.  Amazon
> sales
> > rank agrees.  The book is used for many courses.  So this package would
> be
> > very helpful as is to many students and teachers.
> >
> > So what to do?  Is there any way to get this package on CRAN?
> >
> > --
> > Charles Geyer
> > Professor, School of Statistics
> > Resident Fellow, Minnesota Center for Philosophy of Science
> > University of Minnesota
> > charlie at stat.umn.edu
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


--
Charles Geyer
Professor, School of Statistics
Resident Fellow, Minnesota Center for Philosophy of Science
University of Minnesota
charlie at stat.umn.edu

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Sun Jun 28 18:54:43 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sun, 28 Jun 2020 11:54:43 -0500
Subject: [R-pkg-devel] R package does not find DLL routine
In-Reply-To: <CAJh6MA7s75kmu1rdWJPA9WjwX5EOhxA2hyWYcr040dkPvGqkjA@mail.gmail.com>
References: <CAJh6MA7s75kmu1rdWJPA9WjwX5EOhxA2hyWYcr040dkPvGqkjA@mail.gmail.com>
Message-ID: <24312.52051.74436.345106@rob.eddelbuettel.com>


Lisa,

Sorry, I misread your code. There is a possible array overrun, so we need
argument n and p, apparently.  A likely better version, and demo running the
right code are below.  The rest of the reasoning likely stands, methinks.

Code
-----------------------------------------------------------------------------
#include <Rcpp.h>

// [[Rcpp::export]]
void mysum(int p, int n, std::vector<double> array) {
  double res = 0;
  int myend = std::min(p * n, (int)array.size());
  for (int i = 0; i < myend; ++i) {
    res += array[i];
  }
  std::cout << "result : " << res << std::endl;
}

/*** R
myvec <- sqrt(1:10)
mysum(2,3,myvec)
*/
-----------------------------------------------------------------------------

Demo usage
-----------------------------------------------------------------------------
R> Rcpp::sourceCpp("/tmp/lisademo.cpp")

R> myvec <- sqrt(1:10)

R> mysum(2,3,myvec)
result : 10.8318
R> 
-----------------------------------------------------------------------------

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ch@r||e @end|ng |rom @t@t@umn@edu  Sun Jun 28 19:43:36 2020
From: ch@r||e @end|ng |rom @t@t@umn@edu (Charles Geyer)
Date: Sun, 28 Jun 2020 12:43:36 -0500
Subject: [R-pkg-devel] package CatDataAnalysis
In-Reply-To: <CAJmOi+Nmp_9tdbVZTc2sFc_3uVn2doJFrXwDdUVMVN3rpTdkNw@mail.gmail.com>
References: <CAKctRd04XEsuZwqj8SBO70Oc0w+_1Lhep=trpS3C1ZM5h2QRYQ@mail.gmail.com>
 <CAL9B2vdvLxMKaOevAbry+nk7=kv5au7r=EnFHyd-ZFTg8Mb2-w@mail.gmail.com>
 <CAKctRd3rASDLnVv56gF_h4v0M0PsPeou5-VHOivAWqP05Uh5og@mail.gmail.com>
 <CAJmOi+Nmp_9tdbVZTc2sFc_3uVn2doJFrXwDdUVMVN3rpTdkNw@mail.gmail.com>
Message-ID: <CAKctRd0wPCdCkuwsbt+yOAGHxE9azZMXe4BTn28zajcmNchp-w@mail.gmail.com>

As I said in my original post, I have asked Alan Agresti and he agreed.
There is no problem about authorship.

On Sun, Jun 28, 2020 at 12:12 PM Hugh Parsonage <hugh.parsonage at gmail.com>
wrote:

> If you?re not the author of the data, you can?t submit it as such. The
> website has a copyright message on it which, while not definitive, doesn?t
> suggest the use you?re proposing would be allowed.
>
> Bear in mind that you may expose CRAN not just yourself to liability if
> you try to conceal true authorship.
>
> I?d recommend asking the author of that website for permission. Either he
> says that?s fine in which case you have permission, or he doesn?t and you
> dodge a bullet.
>
>
> On Mon, 29 Jun 2020 at 2:45 am, Charles Geyer <charlie at stat.umn.edu>
> wrote:
>
>> Actually the wooldridge package does not seem to satisfy any of the
>> specific requests CRAN asked me for.  I have checked several other CRAN
>> packages for textbooks and they don't seem to satisfy those requirements
>> either.  So this seems to be a new idea from CRAN.
>>
>> On Sun, Jun 28, 2020 at 11:32 AM Neal Fultz <nfultz at gmail.com> wrote:
>>
>> > I'm not sure exactly what cran is asking for, but the wooldridge
>> > package is a good example of a text book data set package, so maybe
>> > you can use the same format they did.
>> >
>> > https://cran.r-project.org/web/packages/wooldridge/index.html
>> >
>> > Best,
>> >
>> > Neal
>> >
>> > On Sun, Jun 28, 2020 at 9:08 AM Charles Geyer <charlie at stat.umn.edu>
>> > wrote:
>> > >
>> > > I have a package that has the datasets for Categorical Data Analysis
>> by
>> > > Agresti that do not appear in the book.  The whole package is a github
>> > repo
>> > > https://github.com/cjgeyer/CatDataAnalysis.  All of the data were
>> > > translated mechanically using the R script foo.R included in the repo
>> > (but
>> > > not in the package) from Agresti's web site
>> > > http://www.stat.ufl.edu/~aa/cda/data.html.
>> > >
>> > > This package seems to be a useful service to students and teachers.
>> The
>> > > data
>> > > are much simpler to use with this package than trying to get the data
>> > from
>> > > Agresti's web page (foo.R has 277 lines of code).
>> > >
>> > > When I submitted the package to CRAN, I got the following response.
>> > >
>> > > > The Description field of the DESCRIPTION file is intended to be a
>> (one
>> > > > paragraph) description of what the package does and why it may be
>> > > > useful. Please elaborate. Tell the users what the datasets are about
>> > and
>> > > > what they contain so they can use them even when they haven't read
>> your
>> > > > book.
>> > >
>> > > > Please fix and resubmit, and document what was changed in the
>> > submission
>> > > > comments.
>> > >
>> > > In an alternate universe without copyright law this seems a reasonable
>> > > request.  In this universe it seems to be asking for trouble.  I know
>> > about
>> > > fair use, but I am not a lawyer and do not want to walk the borderline
>> > > between fair use and copyright violation.
>> > >
>> > > The package as it is seems OK because it comes from the author's
>> public
>> > web
>> > > site and these data were never in the book.
>> > >
>> > > Please note that I made Alan Agresti (with his acquiescence) the
>> author
>> > of
>> > > the package because it is his book and his data, but I (or rather
>> foo.R)
>> > > did all the work.
>> > >
>> > > I replied to cran.r-project.org, but that was apparently sent to
>> > /dev/null.
>> > >
>> > > This book is IMHO the authoritative textbook on the subject.  Amazon
>> > sales
>> > > rank agrees.  The book is used for many courses.  So this package
>> would
>> > be
>> > > very helpful as is to many students and teachers.
>> > >
>> > > So what to do?  Is there any way to get this package on CRAN?
>> > >
>> > > --
>> > > Charles Geyer
>> > > Professor, School of Statistics
>> > > Resident Fellow, Minnesota Center for Philosophy of Science
>> > > University of Minnesota
>> > > charlie at stat.umn.edu
>> > >
>> > >         [[alternative HTML version deleted]]
>> > >
>> > > ______________________________________________
>> > > R-package-devel at r-project.org mailing list
>> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >
>>
>>
>> --
>> Charles Geyer
>> Professor, School of Statistics
>> Resident Fellow, Minnesota Center for Philosophy of Science
>> University of Minnesota
>> charlie at stat.umn.edu
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

-- 
Charles Geyer
Professor, School of Statistics
Resident Fellow, Minnesota Center for Philosophy of Science
University of Minnesota
charlie at stat.umn.edu

	[[alternative HTML version deleted]]


From ch@r||e @end|ng |rom @t@t@umn@edu  Sun Jun 28 19:48:06 2020
From: ch@r||e @end|ng |rom @t@t@umn@edu (Charles Geyer)
Date: Sun, 28 Jun 2020 12:48:06 -0500
Subject: [R-pkg-devel] package CatDataAnalysis
In-Reply-To: <f4a25c190cf746db9851e3892eb1cb03@umanitoba.ca>
References: <CAKctRd04XEsuZwqj8SBO70Oc0w+_1Lhep=trpS3C1ZM5h2QRYQ@mail.gmail.com>
 <CAL9B2vdvLxMKaOevAbry+nk7=kv5au7r=EnFHyd-ZFTg8Mb2-w@mail.gmail.com>
 <CAKctRd3rASDLnVv56gF_h4v0M0PsPeou5-VHOivAWqP05Uh5og@mail.gmail.com>
 <f4a25c190cf746db9851e3892eb1cb03@umanitoba.ca>
Message-ID: <CAKctRd26+h+1NKeeYk+rko7-k0RSo1JGYG6C9ur528eMEDEZ9Q@mail.gmail.com>

The link to Alan's web site is on every help page (in the source section).
That's where the source is supposed to be.

I have no problem with adding the source to the DESCRIPTION file, but that
is not what CRAN asked me to do.

On Sun, Jun 28, 2020 at 12:16 PM Max Turgeon <Max.Turgeon at umanitoba.ca>
wrote:

> For what it's worth, I'd be inclined to interpreting CRAN's response
> *very* literally, i.e. your Description field is not descriptive enough.
> According to what I can see in the Github repo, you only have
>
>
> "Datasets used in the book Categorical Data Analysis by Agresti but not
> printed in the book."
>
>
> Which is not much more than what the Title field says. One glaring
> omission (IMO) from the Description field is any mention of Agresti's
> website, where the data comes from.
>
>
> In contrast, looking at the "woolridge" package, I can see from the
> Description field that it contains 111 datasets (well, that's in the Title
> field), it's about econometrics, and the purpose of the package is to make
> it easier for students to work with these datasets.
>
>
> Max Turgeon
> Assistant Professor
> Department of Statistics
> Department of Computer Science
> University of Manitoba
> maxturgeon.ca
>
>
>
>
> ------------------------------
> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on behalf
> of Charles Geyer <charlie at stat.umn.edu>
> *Sent:* June 28, 2020 11:38 AM
> *To:* Neal Fultz
> *Cc:* R Package Development
> *Subject:* Re: [R-pkg-devel] package CatDataAnalysis
>
> ********************************************************
> Caution: This message was sent from outside the University of Manitoba.
> ********************************************************
>
> Actually the wooldridge package does not seem to satisfy any of the
> specific requests CRAN asked me for.  I have checked several other CRAN
> packages for textbooks and they don't seem to satisfy those requirements
> either.  So this seems to be a new idea from CRAN.
>
> On Sun, Jun 28, 2020 at 11:32 AM Neal Fultz <nfultz at gmail.com> wrote:
>
> > I'm not sure exactly what cran is asking for, but the wooldridge
> > package is a good example of a text book data set package, so maybe
> > you can use the same format they did.
> >
> > https://cran.r-project.org/web/packages/wooldridge/index.html
> >
> > Best,
> >
> > Neal
> >
> > On Sun, Jun 28, 2020 at 9:08 AM Charles Geyer <charlie at stat.umn.edu>
> > wrote:
> > >
> > > I have a package that has the datasets for Categorical Data Analysis by
> > > Agresti that do not appear in the book.  The whole package is a github
> > repo
> > > https://github.com/cjgeyer/CatDataAnalysis.  All of the data were
> > > translated mechanically using the R script foo.R included in the repo
> > (but
> > > not in the package) from Agresti's web site
> > > http://www.stat.ufl.edu/~aa/cda/data.html.
> > >
> > > This package seems to be a useful service to students and teachers.
> The
> > > data
> > > are much simpler to use with this package than trying to get the data
> > from
> > > Agresti's web page (foo.R has 277 lines of code).
> > >
> > > When I submitted the package to CRAN, I got the following response.
> > >
> > > > The Description field of the DESCRIPTION file is intended to be a
> (one
> > > > paragraph) description of what the package does and why it may be
> > > > useful. Please elaborate. Tell the users what the datasets are about
> > and
> > > > what they contain so they can use them even when they haven't read
> your
> > > > book.
> > >
> > > > Please fix and resubmit, and document what was changed in the
> > submission
> > > > comments.
> > >
> > > In an alternate universe without copyright law this seems a reasonable
> > > request.  In this universe it seems to be asking for trouble.  I know
> > about
> > > fair use, but I am not a lawyer and do not want to walk the borderline
> > > between fair use and copyright violation.
> > >
> > > The package as it is seems OK because it comes from the author's public
> > web
> > > site and these data were never in the book.
> > >
> > > Please note that I made Alan Agresti (with his acquiescence) the author
> > of
> > > the package because it is his book and his data, but I (or rather
> foo.R)
> > > did all the work.
> > >
> > > I replied to cran.r-project.org, but that was apparently sent to
> > /dev/null.
> > >
> > > This book is IMHO the authoritative textbook on the subject.  Amazon
> > sales
> > > rank agrees.  The book is used for many courses.  So this package would
> > be
> > > very helpful as is to many students and teachers.
> > >
> > > So what to do?  Is there any way to get this package on CRAN?
> > >
> > > --
> > > Charles Geyer
> > > Professor, School of Statistics
> > > Resident Fellow, Minnesota Center for Philosophy of Science
> > > University of Minnesota
> > > charlie at stat.umn.edu
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>
> --
> Charles Geyer
> Professor, School of Statistics
> Resident Fellow, Minnesota Center for Philosophy of Science
> University of Minnesota
> charlie at stat.umn.edu
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>

-- 
Charles Geyer
Professor, School of Statistics
Resident Fellow, Minnesota Center for Philosophy of Science
University of Minnesota
charlie at stat.umn.edu

	[[alternative HTML version deleted]]


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Sun Jun 28 19:52:39 2020
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Sun, 28 Jun 2020 17:52:39 +0000
Subject: [R-pkg-devel] package CatDataAnalysis
In-Reply-To: <CAKctRd26+h+1NKeeYk+rko7-k0RSo1JGYG6C9ur528eMEDEZ9Q@mail.gmail.com>
References: <CAKctRd04XEsuZwqj8SBO70Oc0w+_1Lhep=trpS3C1ZM5h2QRYQ@mail.gmail.com>
 <CAL9B2vdvLxMKaOevAbry+nk7=kv5au7r=EnFHyd-ZFTg8Mb2-w@mail.gmail.com>
 <CAKctRd3rASDLnVv56gF_h4v0M0PsPeou5-VHOivAWqP05Uh5og@mail.gmail.com>
 <f4a25c190cf746db9851e3892eb1cb03@umanitoba.ca>,
 <CAKctRd26+h+1NKeeYk+rko7-k0RSo1JGYG6C9ur528eMEDEZ9Q@mail.gmail.com>
Message-ID: <c5a7faf5648f4652b20825117f1b202f@umanitoba.ca>

Fair enough. But CRAN is clearly asking for a more detailed Description field. I simply offered one suggestion for expanding it. Keep in mind that users will typically see the DESCRIPTION file first, and not the help pages.


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>


________________________________
From: Charles Geyer <charlie at stat.umn.edu>
Sent: June 28, 2020 12:48:06 PM
To: Max Turgeon
Cc: R Package Development
Subject: Re: [R-pkg-devel] package CatDataAnalysis

Caution: This message was sent from outside the University of Manitoba.

The link to Alan's web site is on every help page (in the source section).  That's where the source is supposed to be.

I have no problem with adding the source to the DESCRIPTION file, but that is not what CRAN asked me to do.

On Sun, Jun 28, 2020 at 12:16 PM Max Turgeon <Max.Turgeon at umanitoba.ca<mailto:Max.Turgeon at umanitoba.ca>> wrote:

For what it's worth, I'd be inclined to interpreting CRAN's response *very* literally, i.e. your Description field is not descriptive enough. According to what I can see in the Github repo, you only have


"Datasets used in the book Categorical Data Analysis by Agresti but not printed in the book."


Which is not much more than what the Title field says. One glaring omission (IMO) from the Description field is any mention of Agresti's website, where the data comes from.


In contrast, looking at the "woolridge" package, I can see from the Description field that it contains 111 datasets (well, that's in the Title field), it's about econometrics, and the purpose of the package is to make it easier for students to work with these datasets.


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>



________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org<mailto:r-package-devel-bounces at r-project.org>> on behalf of Charles Geyer <charlie at stat.umn.edu<mailto:charlie at stat.umn.edu>>
Sent: June 28, 2020 11:38 AM
To: Neal Fultz
Cc: R Package Development
Subject: Re: [R-pkg-devel] package CatDataAnalysis

********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

Actually the wooldridge package does not seem to satisfy any of the
specific requests CRAN asked me for.  I have checked several other CRAN
packages for textbooks and they don't seem to satisfy those requirements
either.  So this seems to be a new idea from CRAN.

On Sun, Jun 28, 2020 at 11:32 AM Neal Fultz <nfultz at gmail.com<mailto:nfultz at gmail.com>> wrote:

> I'm not sure exactly what cran is asking for, but the wooldridge
> package is a good example of a text book data set package, so maybe
> you can use the same format they did.
>
> https://cran.r-project.org/web/packages/wooldridge/index.html
>
> Best,
>
> Neal
>
> On Sun, Jun 28, 2020 at 9:08 AM Charles Geyer <charlie at stat.umn.edu<mailto:charlie at stat.umn.edu>>
> wrote:
> >
> > I have a package that has the datasets for Categorical Data Analysis by
> > Agresti that do not appear in the book.  The whole package is a github
> repo
> > https://github.com/cjgeyer/CatDataAnalysis.  All of the data were
> > translated mechanically using the R script foo.R included in the repo
> (but
> > not in the package) from Agresti's web site
> > http://www.stat.ufl.edu/~aa/cda/data.html.
> >
> > This package seems to be a useful service to students and teachers.  The
> > data
> > are much simpler to use with this package than trying to get the data
> from
> > Agresti's web page (foo.R has 277 lines of code).
> >
> > When I submitted the package to CRAN, I got the following response.
> >
> > > The Description field of the DESCRIPTION file is intended to be a (one
> > > paragraph) description of what the package does and why it may be
> > > useful. Please elaborate. Tell the users what the datasets are about
> and
> > > what they contain so they can use them even when they haven't read your
> > > book.
> >
> > > Please fix and resubmit, and document what was changed in the
> submission
> > > comments.
> >
> > In an alternate universe without copyright law this seems a reasonable
> > request.  In this universe it seems to be asking for trouble.  I know
> about
> > fair use, but I am not a lawyer and do not want to walk the borderline
> > between fair use and copyright violation.
> >
> > The package as it is seems OK because it comes from the author's public
> web
> > site and these data were never in the book.
> >
> > Please note that I made Alan Agresti (with his acquiescence) the author
> of
> > the package because it is his book and his data, but I (or rather foo.R)
> > did all the work.
> >
> > I replied to cran.r-project.org<http://cran.r-project.org>, but that was apparently sent to
> /dev/null.
> >
> > This book is IMHO the authoritative textbook on the subject.  Amazon
> sales
> > rank agrees.  The book is used for many courses.  So this package would
> be
> > very helpful as is to many students and teachers.
> >
> > So what to do?  Is there any way to get this package on CRAN?
> >
> > --
> > Charles Geyer
> > Professor, School of Statistics
> > Resident Fellow, Minnesota Center for Philosophy of Science
> > University of Minnesota
> > charlie at stat.umn.edu<mailto:charlie at stat.umn.edu>
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


--
Charles Geyer
Professor, School of Statistics
Resident Fellow, Minnesota Center for Philosophy of Science
University of Minnesota
charlie at stat.umn.edu<mailto:charlie at stat.umn.edu>

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel



--
Charles Geyer
Professor, School of Statistics
Resident Fellow, Minnesota Center for Philosophy of Science
University of Minnesota
charlie at stat.umn.edu<mailto:charlie at stat.umn.edu>

	[[alternative HTML version deleted]]


From ch@r||e @end|ng |rom @t@t@umn@edu  Sun Jun 28 19:58:15 2020
From: ch@r||e @end|ng |rom @t@t@umn@edu (Charles Geyer)
Date: Sun, 28 Jun 2020 12:58:15 -0500
Subject: [R-pkg-devel] package CatDataAnalysis
In-Reply-To: <c5a7faf5648f4652b20825117f1b202f@umanitoba.ca>
References: <CAKctRd04XEsuZwqj8SBO70Oc0w+_1Lhep=trpS3C1ZM5h2QRYQ@mail.gmail.com>
 <CAL9B2vdvLxMKaOevAbry+nk7=kv5au7r=EnFHyd-ZFTg8Mb2-w@mail.gmail.com>
 <CAKctRd3rASDLnVv56gF_h4v0M0PsPeou5-VHOivAWqP05Uh5og@mail.gmail.com>
 <f4a25c190cf746db9851e3892eb1cb03@umanitoba.ca>
 <CAKctRd26+h+1NKeeYk+rko7-k0RSo1JGYG6C9ur528eMEDEZ9Q@mail.gmail.com>
 <c5a7faf5648f4652b20825117f1b202f@umanitoba.ca>
Message-ID: <CAKctRd26vTiSBxCzRZY6oJDdHpWub-wjxSshM1k5bRmOS0HfBA@mail.gmail.com>

CRAN did not just ask for an expanded Description field.  They instructed
"Tell the users what the datasets are about and what they contain so they
can use them even when they haven't read your book".  AFAIK no CRAN package
that goes with a book satisfies that.

On Sun, Jun 28, 2020 at 12:52 PM Max Turgeon <Max.Turgeon at umanitoba.ca>
wrote:

> Fair enough. But CRAN is clearly asking for a more detailed Description
> field. I simply offered one suggestion for expanding it. Keep in mind
> that users will typically see the DESCRIPTION file first, and not the help
> pages.
>
>
> Max Turgeon
> Assistant Professor
> Department of Statistics
> Department of Computer Science
> University of Manitoba
> maxturgeon.ca
>
>
> ------------------------------
> *From:* Charles Geyer <charlie at stat.umn.edu>
> *Sent:* June 28, 2020 12:48:06 PM
> *To:* Max Turgeon
> *Cc:* R Package Development
> *Subject:* Re: [R-pkg-devel] package CatDataAnalysis
>
> *Caution:* This message was sent from outside the University of Manitoba.
> The link to Alan's web site is on every help page (in the source
> section).  That's where the source is supposed to be.
>
> I have no problem with adding the source to the DESCRIPTION file, but that
> is not what CRAN asked me to do.
>
> On Sun, Jun 28, 2020 at 12:16 PM Max Turgeon <Max.Turgeon at umanitoba.ca>
> wrote:
>
>> For what it's worth, I'd be inclined to interpreting CRAN's response
>> *very* literally, i.e. your Description field is not descriptive enough.
>> According to what I can see in the Github repo, you only have
>>
>>
>> "Datasets used in the book Categorical Data Analysis by Agresti but not
>> printed in the book."
>>
>>
>> Which is not much more than what the Title field says. One glaring
>> omission (IMO) from the Description field is any mention of Agresti's
>> website, where the data comes from.
>>
>>
>> In contrast, looking at the "woolridge" package, I can see from the
>> Description field that it contains 111 datasets (well, that's in the Title
>> field), it's about econometrics, and the purpose of the package is to make
>> it easier for students to work with these datasets.
>>
>>
>> Max Turgeon
>> Assistant Professor
>> Department of Statistics
>> Department of Computer Science
>> University of Manitoba
>> maxturgeon.ca
>>
>>
>>
>>
>> ------------------------------
>> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on
>> behalf of Charles Geyer <charlie at stat.umn.edu>
>> *Sent:* June 28, 2020 11:38 AM
>> *To:* Neal Fultz
>> *Cc:* R Package Development
>> *Subject:* Re: [R-pkg-devel] package CatDataAnalysis
>>
>> ********************************************************
>> Caution: This message was sent from outside the University of Manitoba.
>> ********************************************************
>>
>> Actually the wooldridge package does not seem to satisfy any of the
>> specific requests CRAN asked me for.  I have checked several other CRAN
>> packages for textbooks and they don't seem to satisfy those requirements
>> either.  So this seems to be a new idea from CRAN.
>>
>> On Sun, Jun 28, 2020 at 11:32 AM Neal Fultz <nfultz at gmail.com> wrote:
>>
>> > I'm not sure exactly what cran is asking for, but the wooldridge
>> > package is a good example of a text book data set package, so maybe
>> > you can use the same format they did.
>> >
>> > https://cran.r-project.org/web/packages/wooldridge/index.html
>> >
>> > Best,
>> >
>> > Neal
>> >
>> > On Sun, Jun 28, 2020 at 9:08 AM Charles Geyer <charlie at stat.umn.edu>
>> > wrote:
>> > >
>> > > I have a package that has the datasets for Categorical Data Analysis
>> by
>> > > Agresti that do not appear in the book.  The whole package is a github
>> > repo
>> > > https://github.com/cjgeyer/CatDataAnalysis.  All of the data were
>> > > translated mechanically using the R script foo.R included in the repo
>> > (but
>> > > not in the package) from Agresti's web site
>> > > http://www.stat.ufl.edu/~aa/cda/data.html.
>> > >
>> > > This package seems to be a useful service to students and teachers.
>> The
>> > > data
>> > > are much simpler to use with this package than trying to get the data
>> > from
>> > > Agresti's web page (foo.R has 277 lines of code).
>> > >
>> > > When I submitted the package to CRAN, I got the following response.
>> > >
>> > > > The Description field of the DESCRIPTION file is intended to be a
>> (one
>> > > > paragraph) description of what the package does and why it may be
>> > > > useful. Please elaborate. Tell the users what the datasets are about
>> > and
>> > > > what they contain so they can use them even when they haven't read
>> your
>> > > > book.
>> > >
>> > > > Please fix and resubmit, and document what was changed in the
>> > submission
>> > > > comments.
>> > >
>> > > In an alternate universe without copyright law this seems a reasonable
>> > > request.  In this universe it seems to be asking for trouble.  I know
>> > about
>> > > fair use, but I am not a lawyer and do not want to walk the borderline
>> > > between fair use and copyright violation.
>> > >
>> > > The package as it is seems OK because it comes from the author's
>> public
>> > web
>> > > site and these data were never in the book.
>> > >
>> > > Please note that I made Alan Agresti (with his acquiescence) the
>> author
>> > of
>> > > the package because it is his book and his data, but I (or rather
>> foo.R)
>> > > did all the work.
>> > >
>> > > I replied to cran.r-project.org, but that was apparently sent to
>> > /dev/null.
>> > >
>> > > This book is IMHO the authoritative textbook on the subject.  Amazon
>> > sales
>> > > rank agrees.  The book is used for many courses.  So this package
>> would
>> > be
>> > > very helpful as is to many students and teachers.
>> > >
>> > > So what to do?  Is there any way to get this package on CRAN?
>> > >
>> > > --
>> > > Charles Geyer
>> > > Professor, School of Statistics
>> > > Resident Fellow, Minnesota Center for Philosophy of Science
>> > > University of Minnesota
>> > > charlie at stat.umn.edu
>> > >
>> > >         [[alternative HTML version deleted]]
>> > >
>> > > ______________________________________________
>> > > R-package-devel at r-project.org mailing list
>> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >
>>
>>
>> --
>> Charles Geyer
>> Professor, School of Statistics
>> Resident Fellow, Minnesota Center for Philosophy of Science
>> University of Minnesota
>> charlie at stat.umn.edu
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>
>
> --
> Charles Geyer
> Professor, School of Statistics
> Resident Fellow, Minnesota Center for Philosophy of Science
> University of Minnesota
> charlie at stat.umn.edu
>


-- 
Charles Geyer
Professor, School of Statistics
Resident Fellow, Minnesota Center for Philosophy of Science
University of Minnesota
charlie at stat.umn.edu

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Sun Jun 28 20:08:49 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sun, 28 Jun 2020 21:08:49 +0300
Subject: [R-pkg-devel] package CatDataAnalysis
In-Reply-To: <CAKctRd04XEsuZwqj8SBO70Oc0w+_1Lhep=trpS3C1ZM5h2QRYQ@mail.gmail.com>
References: <CAKctRd04XEsuZwqj8SBO70Oc0w+_1Lhep=trpS3C1ZM5h2QRYQ@mail.gmail.com>
Message-ID: <20200628210849.0cb010cc@trisector>

On Sun, 28 Jun 2020 11:07:46 -0500
Charles Geyer <charlie at stat.umn.edu> wrote:

>Please note that I made Alan Agresti (with his acquiescence) the
>author of the package

Sorry to derail this, but is it possible for Alan Agresti to add a line
to the page [*] allowing redistribution of the data, preferably under
the terms of a well-known license such as CC BY-NC [**] or ODbL [***]?
As it stands, CRAN only has your word (and the fact that this whole
thread is Cc: to Prof. Agresti) that Alan Agresti agreed to have the
data published as an R package. It might be needed to allow creating
derivative works to make creating such a package feasible, though
(otherwise I would assume that only literal redistribution is allowed).

With that done, you could be much more comfortable providing the
requested description for the package, no?

-- 
Best regards,
Ivan

[*] http://www.stat.ufl.edu/~aa/cda/data.html
[**] https://creativecommons.org/licenses/
[***] https://opendatacommons.org/licenses/


From @teve@the@b@ye@|@n @end|ng |rom gm@||@com  Sun Jun 28 20:09:01 2020
From: @teve@the@b@ye@|@n @end|ng |rom gm@||@com (Steven Scott)
Date: Sun, 28 Jun 2020 11:09:01 -0700
Subject: [R-pkg-devel] package CatDataAnalysis
In-Reply-To: <CAKctRd26vTiSBxCzRZY6oJDdHpWub-wjxSshM1k5bRmOS0HfBA@mail.gmail.com>
References: <CAKctRd04XEsuZwqj8SBO70Oc0w+_1Lhep=trpS3C1ZM5h2QRYQ@mail.gmail.com>
 <CAL9B2vdvLxMKaOevAbry+nk7=kv5au7r=EnFHyd-ZFTg8Mb2-w@mail.gmail.com>
 <CAKctRd3rASDLnVv56gF_h4v0M0PsPeou5-VHOivAWqP05Uh5og@mail.gmail.com>
 <f4a25c190cf746db9851e3892eb1cb03@umanitoba.ca>
 <CAKctRd26+h+1NKeeYk+rko7-k0RSo1JGYG6C9ur528eMEDEZ9Q@mail.gmail.com>
 <c5a7faf5648f4652b20825117f1b202f@umanitoba.ca>
 <CAKctRd26vTiSBxCzRZY6oJDdHpWub-wjxSshM1k5bRmOS0HfBA@mail.gmail.com>
Message-ID: <CAJqTW45K593BvNhuKZNJk1YoL_yg5ev8sH=CBX8HOwJUnbeoFA@mail.gmail.com>

Charlie,
The folks at CRAN try hard to serve everyone, but sometimes they wind up
making up rules as they go along.  I'd add another sentence or two about
the data, perhaps with an eye towards the wide world of "citizen data
scientists" who don't know about Alan's book.  Then resubmit the package
with a note that you've addressed their concerns the best you can, and see
what happens.
Steve

On Sun, Jun 28, 2020, 10:58 AM Charles Geyer <charlie at stat.umn.edu> wrote:

> CRAN did not just ask for an expanded Description field.  They instructed
> "Tell the users what the datasets are about and what they contain so they
> can use them even when they haven't read your book".  AFAIK no CRAN package
> that goes with a book satisfies that.
>
> On Sun, Jun 28, 2020 at 12:52 PM Max Turgeon <Max.Turgeon at umanitoba.ca>
> wrote:
>
> > Fair enough. But CRAN is clearly asking for a more detailed Description
> > field. I simply offered one suggestion for expanding it. Keep in mind
> > that users will typically see the DESCRIPTION file first, and not the
> help
> > pages.
> >
> >
> > Max Turgeon
> > Assistant Professor
> > Department of Statistics
> > Department of Computer Science
> > University of Manitoba
> > maxturgeon.ca
> >
> >
> > ------------------------------
> > *From:* Charles Geyer <charlie at stat.umn.edu>
> > *Sent:* June 28, 2020 12:48:06 PM
> > *To:* Max Turgeon
> > *Cc:* R Package Development
> > *Subject:* Re: [R-pkg-devel] package CatDataAnalysis
> >
> > *Caution:* This message was sent from outside the University of Manitoba.
> > The link to Alan's web site is on every help page (in the source
> > section).  That's where the source is supposed to be.
> >
> > I have no problem with adding the source to the DESCRIPTION file, but
> that
> > is not what CRAN asked me to do.
> >
> > On Sun, Jun 28, 2020 at 12:16 PM Max Turgeon <Max.Turgeon at umanitoba.ca>
> > wrote:
> >
> >> For what it's worth, I'd be inclined to interpreting CRAN's response
> >> *very* literally, i.e. your Description field is not descriptive enough.
> >> According to what I can see in the Github repo, you only have
> >>
> >>
> >> "Datasets used in the book Categorical Data Analysis by Agresti but not
> >> printed in the book."
> >>
> >>
> >> Which is not much more than what the Title field says. One glaring
> >> omission (IMO) from the Description field is any mention of Agresti's
> >> website, where the data comes from.
> >>
> >>
> >> In contrast, looking at the "woolridge" package, I can see from the
> >> Description field that it contains 111 datasets (well, that's in the
> Title
> >> field), it's about econometrics, and the purpose of the package is to
> make
> >> it easier for students to work with these datasets.
> >>
> >>
> >> Max Turgeon
> >> Assistant Professor
> >> Department of Statistics
> >> Department of Computer Science
> >> University of Manitoba
> >> maxturgeon.ca
> >>
> >>
> >>
> >>
> >> ------------------------------
> >> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on
> >> behalf of Charles Geyer <charlie at stat.umn.edu>
> >> *Sent:* June 28, 2020 11:38 AM
> >> *To:* Neal Fultz
> >> *Cc:* R Package Development
> >> *Subject:* Re: [R-pkg-devel] package CatDataAnalysis
> >>
> >> ********************************************************
> >> Caution: This message was sent from outside the University of Manitoba.
> >> ********************************************************
> >>
> >> Actually the wooldridge package does not seem to satisfy any of the
> >> specific requests CRAN asked me for.  I have checked several other CRAN
> >> packages for textbooks and they don't seem to satisfy those requirements
> >> either.  So this seems to be a new idea from CRAN.
> >>
> >> On Sun, Jun 28, 2020 at 11:32 AM Neal Fultz <nfultz at gmail.com> wrote:
> >>
> >> > I'm not sure exactly what cran is asking for, but the wooldridge
> >> > package is a good example of a text book data set package, so maybe
> >> > you can use the same format they did.
> >> >
> >> > https://cran.r-project.org/web/packages/wooldridge/index.html
> >> >
> >> > Best,
> >> >
> >> > Neal
> >> >
> >> > On Sun, Jun 28, 2020 at 9:08 AM Charles Geyer <charlie at stat.umn.edu>
> >> > wrote:
> >> > >
> >> > > I have a package that has the datasets for Categorical Data Analysis
> >> by
> >> > > Agresti that do not appear in the book.  The whole package is a
> github
> >> > repo
> >> > > https://github.com/cjgeyer/CatDataAnalysis.  All of the data were
> >> > > translated mechanically using the R script foo.R included in the
> repo
> >> > (but
> >> > > not in the package) from Agresti's web site
> >> > > http://www.stat.ufl.edu/~aa/cda/data.html.
> >> > >
> >> > > This package seems to be a useful service to students and teachers.
> >> The
> >> > > data
> >> > > are much simpler to use with this package than trying to get the
> data
> >> > from
> >> > > Agresti's web page (foo.R has 277 lines of code).
> >> > >
> >> > > When I submitted the package to CRAN, I got the following response.
> >> > >
> >> > > > The Description field of the DESCRIPTION file is intended to be a
> >> (one
> >> > > > paragraph) description of what the package does and why it may be
> >> > > > useful. Please elaborate. Tell the users what the datasets are
> about
> >> > and
> >> > > > what they contain so they can use them even when they haven't read
> >> your
> >> > > > book.
> >> > >
> >> > > > Please fix and resubmit, and document what was changed in the
> >> > submission
> >> > > > comments.
> >> > >
> >> > > In an alternate universe without copyright law this seems a
> reasonable
> >> > > request.  In this universe it seems to be asking for trouble.  I
> know
> >> > about
> >> > > fair use, but I am not a lawyer and do not want to walk the
> borderline
> >> > > between fair use and copyright violation.
> >> > >
> >> > > The package as it is seems OK because it comes from the author's
> >> public
> >> > web
> >> > > site and these data were never in the book.
> >> > >
> >> > > Please note that I made Alan Agresti (with his acquiescence) the
> >> author
> >> > of
> >> > > the package because it is his book and his data, but I (or rather
> >> foo.R)
> >> > > did all the work.
> >> > >
> >> > > I replied to cran.r-project.org, but that was apparently sent to
> >> > /dev/null.
> >> > >
> >> > > This book is IMHO the authoritative textbook on the subject.  Amazon
> >> > sales
> >> > > rank agrees.  The book is used for many courses.  So this package
> >> would
> >> > be
> >> > > very helpful as is to many students and teachers.
> >> > >
> >> > > So what to do?  Is there any way to get this package on CRAN?
> >> > >
> >> > > --
> >> > > Charles Geyer
> >> > > Professor, School of Statistics
> >> > > Resident Fellow, Minnesota Center for Philosophy of Science
> >> > > University of Minnesota
> >> > > charlie at stat.umn.edu
> >> > >
> >> > >         [[alternative HTML version deleted]]
> >> > >
> >> > > ______________________________________________
> >> > > R-package-devel at r-project.org mailing list
> >> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >> >
> >>
> >>
> >> --
> >> Charles Geyer
> >> Professor, School of Statistics
> >> Resident Fellow, Minnesota Center for Philosophy of Science
> >> University of Minnesota
> >> charlie at stat.umn.edu
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >>
> >
> > --
> > Charles Geyer
> > Professor, School of Statistics
> > Resident Fellow, Minnesota Center for Philosophy of Science
> > University of Minnesota
> > charlie at stat.umn.edu
> >
>
>
> --
> Charles Geyer
> Professor, School of Statistics
> Resident Fellow, Minnesota Center for Philosophy of Science
> University of Minnesota
> charlie at stat.umn.edu
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Jun 28 20:13:21 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 28 Jun 2020 11:13:21 -0700
Subject: [R-pkg-devel] package CatDataAnalysis
In-Reply-To: <CAKctRd26vTiSBxCzRZY6oJDdHpWub-wjxSshM1k5bRmOS0HfBA@mail.gmail.com>
References: <CAKctRd04XEsuZwqj8SBO70Oc0w+_1Lhep=trpS3C1ZM5h2QRYQ@mail.gmail.com>
 <CAL9B2vdvLxMKaOevAbry+nk7=kv5au7r=EnFHyd-ZFTg8Mb2-w@mail.gmail.com>
 <CAKctRd3rASDLnVv56gF_h4v0M0PsPeou5-VHOivAWqP05Uh5og@mail.gmail.com>
 <f4a25c190cf746db9851e3892eb1cb03@umanitoba.ca>
 <CAKctRd26+h+1NKeeYk+rko7-k0RSo1JGYG6C9ur528eMEDEZ9Q@mail.gmail.com>
 <c5a7faf5648f4652b20825117f1b202f@umanitoba.ca>
 <CAKctRd26vTiSBxCzRZY6oJDdHpWub-wjxSshM1k5bRmOS0HfBA@mail.gmail.com>
Message-ID: <E339C4C7-4F4F-4BC5-A1C5-EAEC5E265558@dcn.davis.ca.us>

Just describe the nature of the data sets literally as though the book was inaccessible. They are not asking you to describe how one should analyze the the data, so there really shouldn't be any conflict with the book content that your agreement with the author has not already resolved.

If you feel you are being held to a higher standard than others have been... that is life. As a user of packages I agree with the CRAN that package documention should be usable on its own.

On June 28, 2020 10:58:15 AM PDT, Charles Geyer <charlie at stat.umn.edu> wrote:
>CRAN did not just ask for an expanded Description field.  They
>instructed
>"Tell the users what the datasets are about and what they contain so
>they
>can use them even when they haven't read your book".  AFAIK no CRAN
>package
>that goes with a book satisfies that.
>
>On Sun, Jun 28, 2020 at 12:52 PM Max Turgeon <Max.Turgeon at umanitoba.ca>
>wrote:
>
>> Fair enough. But CRAN is clearly asking for a more detailed
>Description
>> field. I simply offered one suggestion for expanding it. Keep in mind
>> that users will typically see the DESCRIPTION file first, and not the
>help
>> pages.
>>
>>
>> Max Turgeon
>> Assistant Professor
>> Department of Statistics
>> Department of Computer Science
>> University of Manitoba
>> maxturgeon.ca
>>
>>
>> ------------------------------
>> *From:* Charles Geyer <charlie at stat.umn.edu>
>> *Sent:* June 28, 2020 12:48:06 PM
>> *To:* Max Turgeon
>> *Cc:* R Package Development
>> *Subject:* Re: [R-pkg-devel] package CatDataAnalysis
>>
>> *Caution:* This message was sent from outside the University of
>Manitoba.
>> The link to Alan's web site is on every help page (in the source
>> section).  That's where the source is supposed to be.
>>
>> I have no problem with adding the source to the DESCRIPTION file, but
>that
>> is not what CRAN asked me to do.
>>
>> On Sun, Jun 28, 2020 at 12:16 PM Max Turgeon
><Max.Turgeon at umanitoba.ca>
>> wrote:
>>
>>> For what it's worth, I'd be inclined to interpreting CRAN's response
>>> *very* literally, i.e. your Description field is not descriptive
>enough.
>>> According to what I can see in the Github repo, you only have
>>>
>>>
>>> "Datasets used in the book Categorical Data Analysis by Agresti but
>not
>>> printed in the book."
>>>
>>>
>>> Which is not much more than what the Title field says. One glaring
>>> omission (IMO) from the Description field is any mention of
>Agresti's
>>> website, where the data comes from.
>>>
>>>
>>> In contrast, looking at the "woolridge" package, I can see from the
>>> Description field that it contains 111 datasets (well, that's in the
>Title
>>> field), it's about econometrics, and the purpose of the package is
>to make
>>> it easier for students to work with these datasets.
>>>
>>>
>>> Max Turgeon
>>> Assistant Professor
>>> Department of Statistics
>>> Department of Computer Science
>>> University of Manitoba
>>> maxturgeon.ca
>>>
>>>
>>>
>>>
>>> ------------------------------
>>> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on
>>> behalf of Charles Geyer <charlie at stat.umn.edu>
>>> *Sent:* June 28, 2020 11:38 AM
>>> *To:* Neal Fultz
>>> *Cc:* R Package Development
>>> *Subject:* Re: [R-pkg-devel] package CatDataAnalysis
>>>
>>> ********************************************************
>>> Caution: This message was sent from outside the University of
>Manitoba.
>>> ********************************************************
>>>
>>> Actually the wooldridge package does not seem to satisfy any of the
>>> specific requests CRAN asked me for.  I have checked several other
>CRAN
>>> packages for textbooks and they don't seem to satisfy those
>requirements
>>> either.  So this seems to be a new idea from CRAN.
>>>
>>> On Sun, Jun 28, 2020 at 11:32 AM Neal Fultz <nfultz at gmail.com>
>wrote:
>>>
>>> > I'm not sure exactly what cran is asking for, but the wooldridge
>>> > package is a good example of a text book data set package, so
>maybe
>>> > you can use the same format they did.
>>> >
>>> > https://cran.r-project.org/web/packages/wooldridge/index.html
>>> >
>>> > Best,
>>> >
>>> > Neal
>>> >
>>> > On Sun, Jun 28, 2020 at 9:08 AM Charles Geyer
><charlie at stat.umn.edu>
>>> > wrote:
>>> > >
>>> > > I have a package that has the datasets for Categorical Data
>Analysis
>>> by
>>> > > Agresti that do not appear in the book.  The whole package is a
>github
>>> > repo
>>> > > https://github.com/cjgeyer/CatDataAnalysis.  All of the data
>were
>>> > > translated mechanically using the R script foo.R included in the
>repo
>>> > (but
>>> > > not in the package) from Agresti's web site
>>> > > http://www.stat.ufl.edu/~aa/cda/data.html.
>>> > >
>>> > > This package seems to be a useful service to students and
>teachers.
>>> The
>>> > > data
>>> > > are much simpler to use with this package than trying to get the
>data
>>> > from
>>> > > Agresti's web page (foo.R has 277 lines of code).
>>> > >
>>> > > When I submitted the package to CRAN, I got the following
>response.
>>> > >
>>> > > > The Description field of the DESCRIPTION file is intended to
>be a
>>> (one
>>> > > > paragraph) description of what the package does and why it may
>be
>>> > > > useful. Please elaborate. Tell the users what the datasets are
>about
>>> > and
>>> > > > what they contain so they can use them even when they haven't
>read
>>> your
>>> > > > book.
>>> > >
>>> > > > Please fix and resubmit, and document what was changed in the
>>> > submission
>>> > > > comments.
>>> > >
>>> > > In an alternate universe without copyright law this seems a
>reasonable
>>> > > request.  In this universe it seems to be asking for trouble.  I
>know
>>> > about
>>> > > fair use, but I am not a lawyer and do not want to walk the
>borderline
>>> > > between fair use and copyright violation.
>>> > >
>>> > > The package as it is seems OK because it comes from the author's
>>> public
>>> > web
>>> > > site and these data were never in the book.
>>> > >
>>> > > Please note that I made Alan Agresti (with his acquiescence) the
>>> author
>>> > of
>>> > > the package because it is his book and his data, but I (or
>rather
>>> foo.R)
>>> > > did all the work.
>>> > >
>>> > > I replied to cran.r-project.org, but that was apparently sent to
>>> > /dev/null.
>>> > >
>>> > > This book is IMHO the authoritative textbook on the subject. 
>Amazon
>>> > sales
>>> > > rank agrees.  The book is used for many courses.  So this
>package
>>> would
>>> > be
>>> > > very helpful as is to many students and teachers.
>>> > >
>>> > > So what to do?  Is there any way to get this package on CRAN?
>>> > >
>>> > > --
>>> > > Charles Geyer
>>> > > Professor, School of Statistics
>>> > > Resident Fellow, Minnesota Center for Philosophy of Science
>>> > > University of Minnesota
>>> > > charlie at stat.umn.edu
>>> > >
>>> > >         [[alternative HTML version deleted]]
>>> > >
>>> > > ______________________________________________
>>> > > R-package-devel at r-project.org mailing list
>>> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> >
>>>
>>>
>>> --
>>> Charles Geyer
>>> Professor, School of Statistics
>>> Resident Fellow, Minnesota Center for Philosophy of Science
>>> University of Minnesota
>>> charlie at stat.umn.edu
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>>
>>
>> --
>> Charles Geyer
>> Professor, School of Statistics
>> Resident Fellow, Minnesota Center for Philosophy of Science
>> University of Minnesota
>> charlie at stat.umn.edu
>>

-- 
Sent from my phone. Please excuse my brevity.


From ch@r||e @end|ng |rom @t@t@umn@edu  Sun Jun 28 20:18:30 2020
From: ch@r||e @end|ng |rom @t@t@umn@edu (Charles Geyer)
Date: Sun, 28 Jun 2020 13:18:30 -0500
Subject: [R-pkg-devel] package CatDataAnalysis
In-Reply-To: <20200628210849.0cb010cc@trisector>
References: <CAKctRd04XEsuZwqj8SBO70Oc0w+_1Lhep=trpS3C1ZM5h2QRYQ@mail.gmail.com>
 <20200628210849.0cb010cc@trisector>
Message-ID: <CAKctRd0oZGGr30gKQkdKMCB54=7qgKB3dO3b_0ftpT_G=qtmSA@mail.gmail.com>

That's a good idea about adding some licence info to the web page, but note
that Agresti is not the original source of any of this data.  Some of it
was published in subject matter papers by the scientists involved.  For
some perhaps (I don't know) Alan got the whole data set via consulting and
the whole data (as opposed to summary statistics) was never published.
This is the case for almost all real data that statisticians re-analyze for
examples.  There is no "licence" and AFAIK (IANAL) none is needed.  If
there were most textbooks and most papers in statistics would be in
violation of law.

On Sun, Jun 28, 2020 at 1:08 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:

> On Sun, 28 Jun 2020 11:07:46 -0500
> Charles Geyer <charlie at stat.umn.edu> wrote:
>
> >Please note that I made Alan Agresti (with his acquiescence) the
> >author of the package
>
> Sorry to derail this, but is it possible for Alan Agresti to add a line
> to the page [*] allowing redistribution of the data, preferably under
> the terms of a well-known license such as CC BY-NC [**] or ODbL [***]?
> As it stands, CRAN only has your word (and the fact that this whole
> thread is Cc: to Prof. Agresti) that Alan Agresti agreed to have the
> data published as an R package. It might be needed to allow creating
> derivative works to make creating such a package feasible, though
> (otherwise I would assume that only literal redistribution is allowed).
>
> With that done, you could be much more comfortable providing the
> requested description for the package, no?
>
> --
> Best regards,
> Ivan
>
> [*] http://www.stat.ufl.edu/~aa/cda/data.html
> [**] https://creativecommons.org/licenses/
> [***] https://opendatacommons.org/licenses/
>


-- 
Charles Geyer
Professor, School of Statistics
Resident Fellow, Minnesota Center for Philosophy of Science
University of Minnesota
charlie at stat.umn.edu

	[[alternative HTML version deleted]]


From ch@r||e @end|ng |rom @t@t@umn@edu  Sun Jun 28 20:22:41 2020
From: ch@r||e @end|ng |rom @t@t@umn@edu (Charles Geyer)
Date: Sun, 28 Jun 2020 13:22:41 -0500
Subject: [R-pkg-devel] package CatDataAnalysis
In-Reply-To: <E339C4C7-4F4F-4BC5-A1C5-EAEC5E265558@dcn.davis.ca.us>
References: <CAKctRd04XEsuZwqj8SBO70Oc0w+_1Lhep=trpS3C1ZM5h2QRYQ@mail.gmail.com>
 <CAL9B2vdvLxMKaOevAbry+nk7=kv5au7r=EnFHyd-ZFTg8Mb2-w@mail.gmail.com>
 <CAKctRd3rASDLnVv56gF_h4v0M0PsPeou5-VHOivAWqP05Uh5og@mail.gmail.com>
 <f4a25c190cf746db9851e3892eb1cb03@umanitoba.ca>
 <CAKctRd26+h+1NKeeYk+rko7-k0RSo1JGYG6C9ur528eMEDEZ9Q@mail.gmail.com>
 <c5a7faf5648f4652b20825117f1b202f@umanitoba.ca>
 <CAKctRd26vTiSBxCzRZY6oJDdHpWub-wjxSshM1k5bRmOS0HfBA@mail.gmail.com>
 <E339C4C7-4F4F-4BC5-A1C5-EAEC5E265558@dcn.davis.ca.us>
Message-ID: <CAKctRd0H-07UjzOdDTVYwisXev1jNoD2sNaAzsjDYjFCgA=O1Q@mail.gmail.com>

That's where the copyright violation comes in.  Copying descriptions from
the book is clear copyright violation unless it is so minimal as to be
"fair use" and I have no idea where that line is.  Even Alan may not be
free to add such descriptions.  I have no idea what his contract with Wiley
says.

So like I said in my original posting, good idea in an alternative universe
where copyright law does not exist.

On Sun, Jun 28, 2020 at 1:13 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> Just describe the nature of the data sets literally as though the book was
> inaccessible. They are not asking you to describe how one should analyze
> the the data, so there really shouldn't be any conflict with the book
> content that your agreement with the author has not already resolved.
>
> If you feel you are being held to a higher standard than others have
> been... that is life. As a user of packages I agree with the CRAN that
> package documention should be usable on its own.
>
> On June 28, 2020 10:58:15 AM PDT, Charles Geyer <charlie at stat.umn.edu>
> wrote:
> >CRAN did not just ask for an expanded Description field.  They
> >instructed
> >"Tell the users what the datasets are about and what they contain so
> >they
> >can use them even when they haven't read your book".  AFAIK no CRAN
> >package
> >that goes with a book satisfies that.
> >
> >On Sun, Jun 28, 2020 at 12:52 PM Max Turgeon <Max.Turgeon at umanitoba.ca>
> >wrote:
> >
> >> Fair enough. But CRAN is clearly asking for a more detailed
> >Description
> >> field. I simply offered one suggestion for expanding it. Keep in mind
> >> that users will typically see the DESCRIPTION file first, and not the
> >help
> >> pages.
> >>
> >>
> >> Max Turgeon
> >> Assistant Professor
> >> Department of Statistics
> >> Department of Computer Science
> >> University of Manitoba
> >> maxturgeon.ca
> >>
> >>
> >> ------------------------------
> >> *From:* Charles Geyer <charlie at stat.umn.edu>
> >> *Sent:* June 28, 2020 12:48:06 PM
> >> *To:* Max Turgeon
> >> *Cc:* R Package Development
> >> *Subject:* Re: [R-pkg-devel] package CatDataAnalysis
> >>
> >> *Caution:* This message was sent from outside the University of
> >Manitoba.
> >> The link to Alan's web site is on every help page (in the source
> >> section).  That's where the source is supposed to be.
> >>
> >> I have no problem with adding the source to the DESCRIPTION file, but
> >that
> >> is not what CRAN asked me to do.
> >>
> >> On Sun, Jun 28, 2020 at 12:16 PM Max Turgeon
> ><Max.Turgeon at umanitoba.ca>
> >> wrote:
> >>
> >>> For what it's worth, I'd be inclined to interpreting CRAN's response
> >>> *very* literally, i.e. your Description field is not descriptive
> >enough.
> >>> According to what I can see in the Github repo, you only have
> >>>
> >>>
> >>> "Datasets used in the book Categorical Data Analysis by Agresti but
> >not
> >>> printed in the book."
> >>>
> >>>
> >>> Which is not much more than what the Title field says. One glaring
> >>> omission (IMO) from the Description field is any mention of
> >Agresti's
> >>> website, where the data comes from.
> >>>
> >>>
> >>> In contrast, looking at the "woolridge" package, I can see from the
> >>> Description field that it contains 111 datasets (well, that's in the
> >Title
> >>> field), it's about econometrics, and the purpose of the package is
> >to make
> >>> it easier for students to work with these datasets.
> >>>
> >>>
> >>> Max Turgeon
> >>> Assistant Professor
> >>> Department of Statistics
> >>> Department of Computer Science
> >>> University of Manitoba
> >>> maxturgeon.ca
> >>>
> >>>
> >>>
> >>>
> >>> ------------------------------
> >>> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on
> >>> behalf of Charles Geyer <charlie at stat.umn.edu>
> >>> *Sent:* June 28, 2020 11:38 AM
> >>> *To:* Neal Fultz
> >>> *Cc:* R Package Development
> >>> *Subject:* Re: [R-pkg-devel] package CatDataAnalysis
> >>>
> >>> ********************************************************
> >>> Caution: This message was sent from outside the University of
> >Manitoba.
> >>> ********************************************************
> >>>
> >>> Actually the wooldridge package does not seem to satisfy any of the
> >>> specific requests CRAN asked me for.  I have checked several other
> >CRAN
> >>> packages for textbooks and they don't seem to satisfy those
> >requirements
> >>> either.  So this seems to be a new idea from CRAN.
> >>>
> >>> On Sun, Jun 28, 2020 at 11:32 AM Neal Fultz <nfultz at gmail.com>
> >wrote:
> >>>
> >>> > I'm not sure exactly what cran is asking for, but the wooldridge
> >>> > package is a good example of a text book data set package, so
> >maybe
> >>> > you can use the same format they did.
> >>> >
> >>> > https://cran.r-project.org/web/packages/wooldridge/index.html
> >>> >
> >>> > Best,
> >>> >
> >>> > Neal
> >>> >
> >>> > On Sun, Jun 28, 2020 at 9:08 AM Charles Geyer
> ><charlie at stat.umn.edu>
> >>> > wrote:
> >>> > >
> >>> > > I have a package that has the datasets for Categorical Data
> >Analysis
> >>> by
> >>> > > Agresti that do not appear in the book.  The whole package is a
> >github
> >>> > repo
> >>> > > https://github.com/cjgeyer/CatDataAnalysis.  All of the data
> >were
> >>> > > translated mechanically using the R script foo.R included in the
> >repo
> >>> > (but
> >>> > > not in the package) from Agresti's web site
> >>> > > http://www.stat.ufl.edu/~aa/cda/data.html.
> >>> > >
> >>> > > This package seems to be a useful service to students and
> >teachers.
> >>> The
> >>> > > data
> >>> > > are much simpler to use with this package than trying to get the
> >data
> >>> > from
> >>> > > Agresti's web page (foo.R has 277 lines of code).
> >>> > >
> >>> > > When I submitted the package to CRAN, I got the following
> >response.
> >>> > >
> >>> > > > The Description field of the DESCRIPTION file is intended to
> >be a
> >>> (one
> >>> > > > paragraph) description of what the package does and why it may
> >be
> >>> > > > useful. Please elaborate. Tell the users what the datasets are
> >about
> >>> > and
> >>> > > > what they contain so they can use them even when they haven't
> >read
> >>> your
> >>> > > > book.
> >>> > >
> >>> > > > Please fix and resubmit, and document what was changed in the
> >>> > submission
> >>> > > > comments.
> >>> > >
> >>> > > In an alternate universe without copyright law this seems a
> >reasonable
> >>> > > request.  In this universe it seems to be asking for trouble.  I
> >know
> >>> > about
> >>> > > fair use, but I am not a lawyer and do not want to walk the
> >borderline
> >>> > > between fair use and copyright violation.
> >>> > >
> >>> > > The package as it is seems OK because it comes from the author's
> >>> public
> >>> > web
> >>> > > site and these data were never in the book.
> >>> > >
> >>> > > Please note that I made Alan Agresti (with his acquiescence) the
> >>> author
> >>> > of
> >>> > > the package because it is his book and his data, but I (or
> >rather
> >>> foo.R)
> >>> > > did all the work.
> >>> > >
> >>> > > I replied to cran.r-project.org, but that was apparently sent to
> >>> > /dev/null.
> >>> > >
> >>> > > This book is IMHO the authoritative textbook on the subject.
> >Amazon
> >>> > sales
> >>> > > rank agrees.  The book is used for many courses.  So this
> >package
> >>> would
> >>> > be
> >>> > > very helpful as is to many students and teachers.
> >>> > >
> >>> > > So what to do?  Is there any way to get this package on CRAN?
> >>> > >
> >>> > > --
> >>> > > Charles Geyer
> >>> > > Professor, School of Statistics
> >>> > > Resident Fellow, Minnesota Center for Philosophy of Science
> >>> > > University of Minnesota
> >>> > > charlie at stat.umn.edu
> >>> > >
> >>> > >         [[alternative HTML version deleted]]
> >>> > >
> >>> > > ______________________________________________
> >>> > > R-package-devel at r-project.org mailing list
> >>> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>> >
> >>>
> >>>
> >>> --
> >>> Charles Geyer
> >>> Professor, School of Statistics
> >>> Resident Fellow, Minnesota Center for Philosophy of Science
> >>> University of Minnesota
> >>> charlie at stat.umn.edu
> >>>
> >>>         [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>
> >>>
> >>
> >> --
> >> Charles Geyer
> >> Professor, School of Statistics
> >> Resident Fellow, Minnesota Center for Philosophy of Science
> >> University of Minnesota
> >> charlie at stat.umn.edu
> >>
>
> --
> Sent from my phone. Please excuse my brevity.
>


-- 
Charles Geyer
Professor, School of Statistics
Resident Fellow, Minnesota Center for Philosophy of Science
University of Minnesota
charlie at stat.umn.edu

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Jun 28 20:28:11 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 28 Jun 2020 11:28:11 -0700
Subject: [R-pkg-devel] package CatDataAnalysis
In-Reply-To: <CAKctRd0H-07UjzOdDTVYwisXev1jNoD2sNaAzsjDYjFCgA=O1Q@mail.gmail.com>
References: <CAKctRd04XEsuZwqj8SBO70Oc0w+_1Lhep=trpS3C1ZM5h2QRYQ@mail.gmail.com>
 <CAL9B2vdvLxMKaOevAbry+nk7=kv5au7r=EnFHyd-ZFTg8Mb2-w@mail.gmail.com>
 <CAKctRd3rASDLnVv56gF_h4v0M0PsPeou5-VHOivAWqP05Uh5og@mail.gmail.com>
 <f4a25c190cf746db9851e3892eb1cb03@umanitoba.ca>
 <CAKctRd26+h+1NKeeYk+rko7-k0RSo1JGYG6C9ur528eMEDEZ9Q@mail.gmail.com>
 <c5a7faf5648f4652b20825117f1b202f@umanitoba.ca>
 <CAKctRd26vTiSBxCzRZY6oJDdHpWub-wjxSshM1k5bRmOS0HfBA@mail.gmail.com>
 <E339C4C7-4F4F-4BC5-A1C5-EAEC5E265558@dcn.davis.ca.us>
 <CAKctRd0H-07UjzOdDTVYwisXev1jNoD2sNaAzsjDYjFCgA=O1Q@mail.gmail.com>
Message-ID: <A142FB3F-DFC1-4F28-8B89-4F22FF078CA0@dcn.davis.ca.us>

Data are not copyrightable. As long as you do not use the exact phrases from the book you should be okay. But if you don't agree, then you should not proceed, and complaining here is not going to fix this.

On June 28, 2020 11:22:41 AM PDT, Charles Geyer <charlie at stat.umn.edu> wrote:
>That's where the copyright violation comes in.  Copying descriptions
>from
>the book is clear copyright violation unless it is so minimal as to be
>"fair use" and I have no idea where that line is.  Even Alan may not be
>free to add such descriptions.  I have no idea what his contract with
>Wiley
>says.
>
>So like I said in my original posting, good idea in an alternative
>universe
>where copyright law does not exist.
>
>On Sun, Jun 28, 2020 at 1:13 PM Jeff Newmiller
><jdnewmil at dcn.davis.ca.us>
>wrote:
>
>> Just describe the nature of the data sets literally as though the
>book was
>> inaccessible. They are not asking you to describe how one should
>analyze
>> the the data, so there really shouldn't be any conflict with the book
>> content that your agreement with the author has not already resolved.
>>
>> If you feel you are being held to a higher standard than others have
>> been... that is life. As a user of packages I agree with the CRAN
>that
>> package documention should be usable on its own.
>>
>> On June 28, 2020 10:58:15 AM PDT, Charles Geyer
><charlie at stat.umn.edu>
>> wrote:
>> >CRAN did not just ask for an expanded Description field.  They
>> >instructed
>> >"Tell the users what the datasets are about and what they contain so
>> >they
>> >can use them even when they haven't read your book".  AFAIK no CRAN
>> >package
>> >that goes with a book satisfies that.
>> >
>> >On Sun, Jun 28, 2020 at 12:52 PM Max Turgeon
><Max.Turgeon at umanitoba.ca>
>> >wrote:
>> >
>> >> Fair enough. But CRAN is clearly asking for a more detailed
>> >Description
>> >> field. I simply offered one suggestion for expanding it. Keep in
>mind
>> >> that users will typically see the DESCRIPTION file first, and not
>the
>> >help
>> >> pages.
>> >>
>> >>
>> >> Max Turgeon
>> >> Assistant Professor
>> >> Department of Statistics
>> >> Department of Computer Science
>> >> University of Manitoba
>> >> maxturgeon.ca
>> >>
>> >>
>> >> ------------------------------
>> >> *From:* Charles Geyer <charlie at stat.umn.edu>
>> >> *Sent:* June 28, 2020 12:48:06 PM
>> >> *To:* Max Turgeon
>> >> *Cc:* R Package Development
>> >> *Subject:* Re: [R-pkg-devel] package CatDataAnalysis
>> >>
>> >> *Caution:* This message was sent from outside the University of
>> >Manitoba.
>> >> The link to Alan's web site is on every help page (in the source
>> >> section).  That's where the source is supposed to be.
>> >>
>> >> I have no problem with adding the source to the DESCRIPTION file,
>but
>> >that
>> >> is not what CRAN asked me to do.
>> >>
>> >> On Sun, Jun 28, 2020 at 12:16 PM Max Turgeon
>> ><Max.Turgeon at umanitoba.ca>
>> >> wrote:
>> >>
>> >>> For what it's worth, I'd be inclined to interpreting CRAN's
>response
>> >>> *very* literally, i.e. your Description field is not descriptive
>> >enough.
>> >>> According to what I can see in the Github repo, you only have
>> >>>
>> >>>
>> >>> "Datasets used in the book Categorical Data Analysis by Agresti
>but
>> >not
>> >>> printed in the book."
>> >>>
>> >>>
>> >>> Which is not much more than what the Title field says. One
>glaring
>> >>> omission (IMO) from the Description field is any mention of
>> >Agresti's
>> >>> website, where the data comes from.
>> >>>
>> >>>
>> >>> In contrast, looking at the "woolridge" package, I can see from
>the
>> >>> Description field that it contains 111 datasets (well, that's in
>the
>> >Title
>> >>> field), it's about econometrics, and the purpose of the package
>is
>> >to make
>> >>> it easier for students to work with these datasets.
>> >>>
>> >>>
>> >>> Max Turgeon
>> >>> Assistant Professor
>> >>> Department of Statistics
>> >>> Department of Computer Science
>> >>> University of Manitoba
>> >>> maxturgeon.ca
>> >>>
>> >>>
>> >>>
>> >>>
>> >>> ------------------------------
>> >>> *From:* R-package-devel <r-package-devel-bounces at r-project.org>
>on
>> >>> behalf of Charles Geyer <charlie at stat.umn.edu>
>> >>> *Sent:* June 28, 2020 11:38 AM
>> >>> *To:* Neal Fultz
>> >>> *Cc:* R Package Development
>> >>> *Subject:* Re: [R-pkg-devel] package CatDataAnalysis
>> >>>
>> >>> ********************************************************
>> >>> Caution: This message was sent from outside the University of
>> >Manitoba.
>> >>> ********************************************************
>> >>>
>> >>> Actually the wooldridge package does not seem to satisfy any of
>the
>> >>> specific requests CRAN asked me for.  I have checked several
>other
>> >CRAN
>> >>> packages for textbooks and they don't seem to satisfy those
>> >requirements
>> >>> either.  So this seems to be a new idea from CRAN.
>> >>>
>> >>> On Sun, Jun 28, 2020 at 11:32 AM Neal Fultz <nfultz at gmail.com>
>> >wrote:
>> >>>
>> >>> > I'm not sure exactly what cran is asking for, but the
>wooldridge
>> >>> > package is a good example of a text book data set package, so
>> >maybe
>> >>> > you can use the same format they did.
>> >>> >
>> >>> > https://cran.r-project.org/web/packages/wooldridge/index.html
>> >>> >
>> >>> > Best,
>> >>> >
>> >>> > Neal
>> >>> >
>> >>> > On Sun, Jun 28, 2020 at 9:08 AM Charles Geyer
>> ><charlie at stat.umn.edu>
>> >>> > wrote:
>> >>> > >
>> >>> > > I have a package that has the datasets for Categorical Data
>> >Analysis
>> >>> by
>> >>> > > Agresti that do not appear in the book.  The whole package is
>a
>> >github
>> >>> > repo
>> >>> > > https://github.com/cjgeyer/CatDataAnalysis.  All of the data
>> >were
>> >>> > > translated mechanically using the R script foo.R included in
>the
>> >repo
>> >>> > (but
>> >>> > > not in the package) from Agresti's web site
>> >>> > > http://www.stat.ufl.edu/~aa/cda/data.html.
>> >>> > >
>> >>> > > This package seems to be a useful service to students and
>> >teachers.
>> >>> The
>> >>> > > data
>> >>> > > are much simpler to use with this package than trying to get
>the
>> >data
>> >>> > from
>> >>> > > Agresti's web page (foo.R has 277 lines of code).
>> >>> > >
>> >>> > > When I submitted the package to CRAN, I got the following
>> >response.
>> >>> > >
>> >>> > > > The Description field of the DESCRIPTION file is intended
>to
>> >be a
>> >>> (one
>> >>> > > > paragraph) description of what the package does and why it
>may
>> >be
>> >>> > > > useful. Please elaborate. Tell the users what the datasets
>are
>> >about
>> >>> > and
>> >>> > > > what they contain so they can use them even when they
>haven't
>> >read
>> >>> your
>> >>> > > > book.
>> >>> > >
>> >>> > > > Please fix and resubmit, and document what was changed in
>the
>> >>> > submission
>> >>> > > > comments.
>> >>> > >
>> >>> > > In an alternate universe without copyright law this seems a
>> >reasonable
>> >>> > > request.  In this universe it seems to be asking for trouble.
> I
>> >know
>> >>> > about
>> >>> > > fair use, but I am not a lawyer and do not want to walk the
>> >borderline
>> >>> > > between fair use and copyright violation.
>> >>> > >
>> >>> > > The package as it is seems OK because it comes from the
>author's
>> >>> public
>> >>> > web
>> >>> > > site and these data were never in the book.
>> >>> > >
>> >>> > > Please note that I made Alan Agresti (with his acquiescence)
>the
>> >>> author
>> >>> > of
>> >>> > > the package because it is his book and his data, but I (or
>> >rather
>> >>> foo.R)
>> >>> > > did all the work.
>> >>> > >
>> >>> > > I replied to cran.r-project.org, but that was apparently sent
>to
>> >>> > /dev/null.
>> >>> > >
>> >>> > > This book is IMHO the authoritative textbook on the subject.
>> >Amazon
>> >>> > sales
>> >>> > > rank agrees.  The book is used for many courses.  So this
>> >package
>> >>> would
>> >>> > be
>> >>> > > very helpful as is to many students and teachers.
>> >>> > >
>> >>> > > So what to do?  Is there any way to get this package on CRAN?
>> >>> > >
>> >>> > > --
>> >>> > > Charles Geyer
>> >>> > > Professor, School of Statistics
>> >>> > > Resident Fellow, Minnesota Center for Philosophy of Science
>> >>> > > University of Minnesota
>> >>> > > charlie at stat.umn.edu
>> >>> > >
>> >>> > >         [[alternative HTML version deleted]]
>> >>> > >
>> >>> > > ______________________________________________
>> >>> > > R-package-devel at r-project.org mailing list
>> >>> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >>> >
>> >>>
>> >>>
>> >>> --
>> >>> Charles Geyer
>> >>> Professor, School of Statistics
>> >>> Resident Fellow, Minnesota Center for Philosophy of Science
>> >>> University of Minnesota
>> >>> charlie at stat.umn.edu
>> >>>
>> >>>         [[alternative HTML version deleted]]
>> >>>
>> >>> ______________________________________________
>> >>> R-package-devel at r-project.org mailing list
>> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >>>
>> >>>
>> >>
>> >> --
>> >> Charles Geyer
>> >> Professor, School of Statistics
>> >> Resident Fellow, Minnesota Center for Philosophy of Science
>> >> University of Minnesota
>> >> charlie at stat.umn.edu
>> >>
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>

-- 
Sent from my phone. Please excuse my brevity.


From ||@@|nconnect|cut @end|ng |rom gm@||@com  Sun Jun 28 20:32:25 2020
From: ||@@|nconnect|cut @end|ng |rom gm@||@com (Lisa GM)
Date: Sun, 28 Jun 2020 20:32:25 +0200
Subject: [R-pkg-devel] R package does not find DLL routine
In-Reply-To: <24312.52051.74436.345106@rob.eddelbuettel.com>
References: <CAJh6MA7s75kmu1rdWJPA9WjwX5EOhxA2hyWYcr040dkPvGqkjA@mail.gmail.com>
 <24312.52051.74436.345106@rob.eddelbuettel.com>
Message-ID: <CAJh6MA4Q15Bv7QZrGjbQJkzFuBObA4TLnk+RxrSsLwGWXHYd7g@mail.gmail.com>

Dear Dirk,

Thank you so much for your quick reply. I'm not particularly set on the
'inline' package especially if it's becoming outdated. I looked into using
Rcpp but I couldn't figure out how to compile my c++ code outside of the
package and only include the DLL. My problem is that I cannot publish the
c++ source code with the package but I do have access to it. So I'm sorry
to ask in case this is obvious but can I compile the above to a DLL first
using Rcpp and then just add the compiled .dylib to the package?

Best,
Lisa

On Sun, Jun 28, 2020 at 7:30 PM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> Lisa,
>
> Sorry, I misread your code. There is a possible array overrun, so we need
> argument n and p, apparently.  A likely better version, and demo running
> the
> right code are below.  The rest of the reasoning likely stands, methinks.
>
> Code
>
> -----------------------------------------------------------------------------
> #include <Rcpp.h>
>
> // [[Rcpp::export]]
> void mysum(int p, int n, std::vector<double> array) {
>   double res = 0;
>   int myend = std::min(p * n, (int)array.size());
>   for (int i = 0; i < myend; ++i) {
>     res += array[i];
>   }
>   std::cout << "result : " << res << std::endl;
> }
>
> /*** R
> myvec <- sqrt(1:10)
> mysum(2,3,myvec)
> */
>
> -----------------------------------------------------------------------------
>
> Demo usage
>
> -----------------------------------------------------------------------------
> R> Rcpp::sourceCpp("/tmp/lisademo.cpp")
>
> R> myvec <- sqrt(1:10)
>
> R> mysum(2,3,myvec)
> result : 10.8318
> R>
>
> -----------------------------------------------------------------------------
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jun 28 20:32:45 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 28 Jun 2020 14:32:45 -0400
Subject: [R-pkg-devel] package CatDataAnalysis
In-Reply-To: <CAKctRd04XEsuZwqj8SBO70Oc0w+_1Lhep=trpS3C1ZM5h2QRYQ@mail.gmail.com>
References: <CAKctRd04XEsuZwqj8SBO70Oc0w+_1Lhep=trpS3C1ZM5h2QRYQ@mail.gmail.com>
Message-ID: <55fad577-2c96-74c7-0852-9e55bc55fdb8@gmail.com>

It's easier to install a package from CRAN than from Github, but not all 
that much easier.  If it's too much trouble to satisfy CRAN, then don't 
bother.  Just post instructions on how to do a Github install of it and 
move on to other things.  (I'd post those instructions in a README.md 
file on the Github site, so when people follow your link they'll find 
the description.)

Duncan Murdoch

On 28/06/2020 12:07 p.m., Charles Geyer wrote:
> I have a package that has the datasets for Categorical Data Analysis by
> Agresti that do not appear in the book.  The whole package is a github repo
> https://github.com/cjgeyer/CatDataAnalysis.  All of the data were
> translated mechanically using the R script foo.R included in the repo (but
> not in the package) from Agresti's web site
> http://www.stat.ufl.edu/~aa/cda/data.html.
> 
> This package seems to be a useful service to students and teachers.  The
> data
> are much simpler to use with this package than trying to get the data from
> Agresti's web page (foo.R has 277 lines of code).
> 
> When I submitted the package to CRAN, I got the following response.
> 
>> The Description field of the DESCRIPTION file is intended to be a (one
>> paragraph) description of what the package does and why it may be
>> useful. Please elaborate. Tell the users what the datasets are about and
>> what they contain so they can use them even when they haven't read your
>> book.
> 
>> Please fix and resubmit, and document what was changed in the submission
>> comments.
> 
> In an alternate universe without copyright law this seems a reasonable
> request.  In this universe it seems to be asking for trouble.  I know about
> fair use, but I am not a lawyer and do not want to walk the borderline
> between fair use and copyright violation.
> 
> The package as it is seems OK because it comes from the author's public web
> site and these data were never in the book.
> 
> Please note that I made Alan Agresti (with his acquiescence) the author of
> the package because it is his book and his data, but I (or rather foo.R)
> did all the work.
> 
> I replied to cran.r-project.org, but that was apparently sent to /dev/null.
> 
> This book is IMHO the authoritative textbook on the subject.  Amazon sales
> rank agrees.  The book is used for many courses.  So this package would be
> very helpful as is to many students and teachers.
> 
> So what to do?  Is there any way to get this package on CRAN?
>


From edd @end|ng |rom deb|@n@org  Sun Jun 28 20:54:37 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sun, 28 Jun 2020 13:54:37 -0500
Subject: [R-pkg-devel] R package does not find DLL routine
In-Reply-To: <CAJh6MA4Q15Bv7QZrGjbQJkzFuBObA4TLnk+RxrSsLwGWXHYd7g@mail.gmail.com>
References: <CAJh6MA7s75kmu1rdWJPA9WjwX5EOhxA2hyWYcr040dkPvGqkjA@mail.gmail.com>
 <24312.52051.74436.345106@rob.eddelbuettel.com>
 <CAJh6MA4Q15Bv7QZrGjbQJkzFuBObA4TLnk+RxrSsLwGWXHYd7g@mail.gmail.com>
Message-ID: <24312.59245.292226.419120@rob.eddelbuettel.com>


Hi Lisa,

On 28 June 2020 at 20:32, Lisa GM wrote:
| Thank you so much for your quick reply. I'm not particularly set on the
| 'inline' package especially if it's becoming outdated. I looked into using

Please report bugs or shortcomings in an issue ticket at GitHub. I am also
its maintainer and unaware of any deficiencies. Thanks.

| Rcpp but I couldn't figure out how to compile my c++ code outside of the
| package and only include the DLL. My problem is that I cannot publish the
| c++ source code with the package but I do have access to it. So I'm sorry
| to ask in case this is obvious but can I compile the above to a DLL first
| using Rcpp and then just add the compiled .dylib to the package?

There is generally somewhat limited patience on these lists for support of
code hiding and obfuscation, but methinks you are simply doing this
wrong. Create a source package. Hand your client a binary package built from
it. End of story. And still no messing with loading shared libries by hand.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From kry|ov@r00t @end|ng |rom gm@||@com  Sun Jun 28 22:39:53 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sun, 28 Jun 2020 23:39:53 +0300
Subject: [R-pkg-devel] R package does not find DLL routine
In-Reply-To: <CAJh6MA7s75kmu1rdWJPA9WjwX5EOhxA2hyWYcr040dkPvGqkjA@mail.gmail.com>
References: <CAJh6MA7s75kmu1rdWJPA9WjwX5EOhxA2hyWYcr040dkPvGqkjA@mail.gmail.com>
Message-ID: <20200628233953.1615607b@trisector>

On Sun, 28 Jun 2020 12:43:53 +0200
Lisa GM <lisainconnecticut at gmail.com> wrote:

>  "sum_c" not resolved from current namespace (sum)

As mentioned by Dirk Eddelbuettel, this is not the way R packages are
supposed to be built [*], but if you are absolutely positive you cannot
build the DLL from source together with the package or link your
package to externally installed DLL (as done by packages curl, rgdal,
and many others), it still seems to be possible. I have been able to
get a dummy package to work like this:

.onLoad <- function(libname, pkgname)
 library.dynam('dynl', pkgname, libname, TRUE)

.onUnload <- function(libpath)
 library.dynam.unload('dynl', libpath)

do <- function()
 .C('do_hello', x = as.integer(1L), y = as.numeric(2), PACKAGE = 'dynl')

(Note the extra PACKAGE argument required in absence of native routine
registration or useDynLib(...) declarations in NAMESPACE)

I placed the DLL itself in file.path('inst', 'libs',
paste0('dynl', .Platform$dynlib.ext)) under the package source
directory and made sure that it exports a C function
void do_hello(int * x, double * y).

Needless to say, this goes against CRAN and Bioconductor policies. The
preferred approach is described in Writing R Extensions, section 1.2.

-- 
Best regards,
Ivan

[*] See <https://cran.r-project.org/doc/manuals/R-exts.html> sections
1.5.4 and 5.4 for preparing C functions to be called from an R package.
The Rcpp package does wrap all this in a very convenient way, see the
Rcpp.package.skeleton function.


From g|t@demont @end|ng |rom gm@||@com  Mon Jun 29 16:04:02 2020
From: g|t@demont @end|ng |rom gm@||@com (git demont)
Date: Mon, 29 Jun 2020 16:04:02 +0200
Subject: [R-pkg-devel] How to refer to COPYRIGHTS and AUTHORS extra files in
 DESCRIPTION
Message-ID: <CAGf8esiDPYObVeG_izRV4D+8zMuYX=4a9jHnYrgtZyZYHSK+Dw@mail.gmail.com>

Hi all,

I am developing a package called 'IFC'.
https://github.com/gitdemont/IFC/
<https://github.com/gitdemont/IFC/tree/v0.0.7>

Last submission (v0.0.7) was almost the final one to get it CRAN
https://github.com/gitdemont/IFC/tree/v0.0.7
It was manually checked and it should be accepted if I removed a dontrun
(that I unfortunately forgot).

For the next submission ( I hope it will be the good one ), in addition to
fixing the dontrun, I would like to include a small modification that was
not asked. I would like to avoid another round of submission/review by
introducing an issue that was not here. In DESCRIPTION of 'IFC', I am
inviting users to refer to files for copyrights and authorship. "See file
inst/COPYRIGHTS and file inst/AUTHORS for a list of copyright holders and
authors"

However, I am not sure whether I should say 'inst/COPYRIGHTS' and
'inst/AUTHORS' because these files are in the 'inst/' directory of the
built tar.gz, or if I should only refer to 'COPYRIGHTS' and 'AUTHORS'
(without inst/) because once installed these files will be at the root of
IFC library directory.
The same question olds for "Copyright: file inst/COPYRIGHTS".

In CRAN policies, one can read:
"Where copyrights are held by an entity other than the package authors,
this should preferably be indicated via ?cph? roles in the ?Authors at R?
field, or using a ?Copyright? field (if necessary referring to an
inst/COPYRIGHTS file)."
In 'RcppMsgPack' for instance we have:
- in the description: "See the files 'COPYRIGHTS' and 'AUTHORS' for a full
list of copyright holders and contributors to 'msgpack-c'."
- in the copyrights: "inst/COPYRIGHTS".

Best,
Yohann

	[[alternative HTML version deleted]]


From gor@n@bro@trom @end|ng |rom umu@@e  Mon Jun 29 22:55:02 2020
From: gor@n@bro@trom @end|ng |rom umu@@e (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Mon, 29 Jun 2020 22:55:02 +0200
Subject: [R-pkg-devel] data and load version 3
Message-ID: <4f061f16-5371-651f-07f1-aac450a70bb7@umu.se>

I added two data sets (.rda) to my package eha, but when I build the new 
version I get:

  WARNING: Added dependency on R >= 3.5.0 because serialized objects in 
serialize/load version 3 cannot be read in older versions of R.  File(s) 
containing such objects: ?eha/data/swedeaths.rda?  ?eha/data/swepop.rda?

In DESCRIPTION I have 'Depends: R (>= 3.0.0)'

After googling for a while (found nothing relevant in 'WRE'), I 
understand that I have two options: (i) Change 'Depends' in DESCRIPTION 
as suggested, and (ii) using save with 'version = 2' for the new files.

And, if I am recommended to choose (i), should I recreate the old data 
files with 'version = 3'?

My guess is go for (i) and version = 3 for all data files, but I feel 
that I need advise.

Thanks, G?ran


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Jun 30 00:52:09 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 30 Jun 2020 00:52:09 +0200
Subject: [R-pkg-devel] data and load version 3
In-Reply-To: <4f061f16-5371-651f-07f1-aac450a70bb7@umu.se>
References: <4f061f16-5371-651f-07f1-aac450a70bb7@umu.se>
Message-ID: <b0eb51df-002a-ce43-7772-2591d1cbc94b@statistik.tu-dortmund.de>



On 29.06.2020 22:55, G?ran Brostr?m wrote:
> I added two data sets (.rda) to my package eha, but when I build the new 
> version I get:
> 
>  ?WARNING: Added dependency on R >= 3.5.0 because serialized objects in 
> serialize/load version 3 cannot be read in older versions of R.? File(s) 
> containing such objects: ?eha/data/swedeaths.rda?? ?eha/data/swepop.rda?
> 
> In DESCRIPTION I have 'Depends: R (>= 3.0.0)'
> 
> After googling for a while (found nothing relevant in 'WRE'), I 
> understand that I have two options: (i) Change 'Depends' in DESCRIPTION 
> as suggested, and (ii) using save with 'version = 2' for the new files.
> 
> And, if I am recommended to choose (i), should I recreate the old data 
> files with 'version = 3'?
> 
> My guess is go for (i) and version = 3 for all data files, but I feel 
> that I need advise.

You may use version 3 for all, but you can also have a mix and only use 
vesion 3 for the new files.

Best,
Uwe Ligges
> 
> Thanks, G?ran
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Jun 30 01:07:50 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 29 Jun 2020 16:07:50 -0700
Subject: [R-pkg-devel] data and load version 3
In-Reply-To: <4f061f16-5371-651f-07f1-aac450a70bb7@umu.se>
References: <4f061f16-5371-651f-07f1-aac450a70bb7@umu.se>
Message-ID: <7C2E5F9A-8DF5-4719-A9C9-9298E6366229@dcn.davis.ca.us>

Your choice. Do you want to support people using older versions of R, or not?

On June 29, 2020 1:55:02 PM PDT, "G?ran Brostr?m" <goran.brostrom at umu.se> wrote:
>I added two data sets (.rda) to my package eha, but when I build the
>new 
>version I get:
>
> WARNING: Added dependency on R >= 3.5.0 because serialized objects in 
>serialize/load version 3 cannot be read in older versions of R. 
>File(s) 
>containing such objects: ?eha/data/swedeaths.rda? 
>?eha/data/swepop.rda?
>
>In DESCRIPTION I have 'Depends: R (>= 3.0.0)'
>
>After googling for a while (found nothing relevant in 'WRE'), I 
>understand that I have two options: (i) Change 'Depends' in DESCRIPTION
>
>as suggested, and (ii) using save with 'version = 2' for the new files.
>
>And, if I am recommended to choose (i), should I recreate the old data 
>files with 'version = 3'?
>
>My guess is go for (i) and version = 3 for all data files, but I feel 
>that I need advise.
>
>Thanks, G?ran
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Jun 30 10:33:31 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 30 Jun 2020 11:33:31 +0300
Subject: [R-pkg-devel] data and load version 3
In-Reply-To: <4f061f16-5371-651f-07f1-aac450a70bb7@umu.se>
References: <4f061f16-5371-651f-07f1-aac450a70bb7@umu.se>
Message-ID: <20200630113331.609b4369@Tarkus>

On Mon, 29 Jun 2020 22:55:02 +0200
G?ran Brostr?m <goran.brostrom at umu.se> wrote:

> After googling for a while (found nothing relevant in 'WRE'), I 
> understand that I have two options: (i) Change 'Depends' in
> DESCRIPTION as suggested, and (ii) using save with 'version = 2' for
> the new files.

One of the steps performed by default during R CMD build is
tools::resaveRdaFiles(), which passes NULL as version= argument to
save(). Around R (not sure about this) 3.6.0 version=NULL was changed to
mean version=3, so if you want to preserve compatibility with R <
3.5.0, you may need to run tools::resaveRdaFiles(..., version = 2)
before running R CMD build --no-resave-data.

-- 
Best regards,
Ivan


From gor@n@bro@trom @end|ng |rom umu@@e  Tue Jun 30 11:48:29 2020
From: gor@n@bro@trom @end|ng |rom umu@@e (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Tue, 30 Jun 2020 11:48:29 +0200
Subject: [R-pkg-devel] data and load version 3
In-Reply-To: <7C2E5F9A-8DF5-4719-A9C9-9298E6366229@dcn.davis.ca.us>
References: <4f061f16-5371-651f-07f1-aac450a70bb7@umu.se>
 <7C2E5F9A-8DF5-4719-A9C9-9298E6366229@dcn.davis.ca.us>
Message-ID: <2aabab97-e3b6-a29d-b651-fb2e0405d6f8@umu.se>



On 2020-06-30 01:07, Jeff Newmiller wrote:
> Your choice. Do you want to support people using older versions of R, or not?

Is that all? No point at all with version 3 in packages? Why was it 
introduced? I have seen an argument for version 2: "... needed ... to 
support name spaces", but version 3 ...

G?ran

> 
> On June 29, 2020 1:55:02 PM PDT, "G?ran Brostr?m" <goran.brostrom at umu.se> wrote:
>> I added two data sets (.rda) to my package eha, but when I build the
>> new
>> version I get:
>>
>> WARNING: Added dependency on R >= 3.5.0 because serialized objects in
>> serialize/load version 3 cannot be read in older versions of R.
>> File(s)
>> containing such objects: ?eha/data/swedeaths.rda?
>> ?eha/data/swepop.rda?
>>
>> In DESCRIPTION I have 'Depends: R (>= 3.0.0)'
>>
>> After googling for a while (found nothing relevant in 'WRE'), I
>> understand that I have two options: (i) Change 'Depends' in DESCRIPTION
>>
>> as suggested, and (ii) using save with 'version = 2' for the new files.
>>
>> And, if I am recommended to choose (i), should I recreate the old data
>> files with 'version = 3'?
>>
>> My guess is go for (i) and version = 3 for all data files, but I feel
>> that I need advise.
>>
>> Thanks, G?ran
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Jun 30 11:58:30 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 30 Jun 2020 12:58:30 +0300
Subject: [R-pkg-devel] data and load version 3
In-Reply-To: <2aabab97-e3b6-a29d-b651-fb2e0405d6f8@umu.se>
References: <4f061f16-5371-651f-07f1-aac450a70bb7@umu.se>
 <7C2E5F9A-8DF5-4719-A9C9-9298E6366229@dcn.davis.ca.us>
 <2aabab97-e3b6-a29d-b651-fb2e0405d6f8@umu.se>
Message-ID: <20200630125830.1b746eb8@Tarkus>

On Tue, 30 Jun 2020 11:48:29 +0200
G?ran Brostr?m <goran.brostrom at umu.se> wrote:

> No point at all with version 3 in packages?

Format version 3 [1] introduces support for ALTREP objects [2].
Examples of where ALTREP might be useful include really long integer
vectors, like 1:1e10.

-- 
Best regards,
Ivan

[1]
https://developer.r-project.org/blosxom.cgi/R-3-5-branch/NEWS/2018/04/11#n2018-04-11

[2] https://svn.r-project.org/R/branches/ALTREP/ALTREP.html


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Tue Jun 30 12:09:11 2020
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Tue, 30 Jun 2020 12:09:11 +0200
Subject: [R-pkg-devel] data and load version 3
In-Reply-To: <2aabab97-e3b6-a29d-b651-fb2e0405d6f8@umu.se>
References: <4f061f16-5371-651f-07f1-aac450a70bb7@umu.se>
 <7C2E5F9A-8DF5-4719-A9C9-9298E6366229@dcn.davis.ca.us>
 <2aabab97-e3b6-a29d-b651-fb2e0405d6f8@umu.se>
Message-ID: <36122376-8136-c485-f845-a8db11be27b0@gmail.com>

On 6/30/20 11:48 AM, G?ran Brostr?m wrote:
>
>
> On 2020-06-30 01:07, Jeff Newmiller wrote:
>> Your choice. Do you want to support people using older versions of R, 
>> or not?
>
> Is that all? No point at all with version 3 in packages? Why was it 
> introduced? I have seen an argument for version 2: "... needed ... to 
> support name spaces", but version 3 ...

Format 3 supports efficient serialization of ALTREP objects, that is why 
it was introduced. It also saves the session native encoding and 
converts string on de-serialization when running in different native 
encoding. Documented also in R 3.5 NEWS, in R Internals.

Tomas


>
> G?ran
>
>>
>> On June 29, 2020 1:55:02 PM PDT, "G?ran Brostr?m" 
>> <goran.brostrom at umu.se> wrote:
>>> I added two data sets (.rda) to my package eha, but when I build the
>>> new
>>> version I get:
>>>
>>> WARNING: Added dependency on R >= 3.5.0 because serialized objects in
>>> serialize/load version 3 cannot be read in older versions of R.
>>> File(s)
>>> containing such objects: ?eha/data/swedeaths.rda?
>>> ?eha/data/swepop.rda?
>>>
>>> In DESCRIPTION I have 'Depends: R (>= 3.0.0)'
>>>
>>> After googling for a while (found nothing relevant in 'WRE'), I
>>> understand that I have two options: (i) Change 'Depends' in DESCRIPTION
>>>
>>> as suggested, and (ii) using save with 'version = 2' for the new files.
>>>
>>> And, if I am recommended to choose (i), should I recreate the old data
>>> files with 'version = 3'?
>>>
>>> My guess is go for (i) and version = 3 for all data files, but I feel
>>> that I need advise.
>>>
>>> Thanks, G?ran
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From gor@n@bro@trom @end|ng |rom umu@@e  Tue Jun 30 12:09:52 2020
From: gor@n@bro@trom @end|ng |rom umu@@e (=?UTF-8?Q?G=c3=b6ran_Brostr=c3=b6m?=)
Date: Tue, 30 Jun 2020 12:09:52 +0200
Subject: [R-pkg-devel] data and load version 3
In-Reply-To: <20200630125830.1b746eb8@Tarkus>
References: <4f061f16-5371-651f-07f1-aac450a70bb7@umu.se>
 <7C2E5F9A-8DF5-4719-A9C9-9298E6366229@dcn.davis.ca.us>
 <2aabab97-e3b6-a29d-b651-fb2e0405d6f8@umu.se>
 <20200630125830.1b746eb8@Tarkus>
Message-ID: <3b7d40ab-39db-617d-1777-83e74036fdfa@umu.se>



On 2020-06-30 11:58, Ivan Krylov wrote:
> On Tue, 30 Jun 2020 11:48:29 +0200
> G?ran Brostr?m <goran.brostrom at umu.se> wrote:
> 
>> No point at all with version 3 in packages?
> 
> Format version 3 [1] introduces support for ALTREP objects [2].
> Examples of where ALTREP might be useful include really long integer
> vectors, like 1:1e10.
> 

Thanks, no need for that in the actual data files, so I'll convert them 
to version 2.

G?ran


