From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Apr  1 00:49:19 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 1 Apr 2022 00:49:19 +0200
Subject: [R-pkg-devel] 
 "Setting LC_CTYPE=en_US.UTF-8" failed and "qpdf28.dll
 was not found" on Win 10
In-Reply-To: <f6aaf5e9-466b-c43b-f4a8-4828e25a3488@effectivedefense.org>
References: <1fbf0809-9e2f-448d-3809-5883ddfb94f9@effectivedefense.org>
 <20220331093934.51b68e24@Tarkus>
 <13e5ac7d-e559-90f1-3d5e-c5a0e212565b@gmail.com>
 <f6aaf5e9-466b-c43b-f4a8-4828e25a3488@effectivedefense.org>
Message-ID: <2d80665e-87c7-70b4-ea15-b466251ef62b@statistik.tu-dortmund.de>

Spencer, the suggestion are for chcks with R-4.2.0 alpha, for R-4.1.3 
the older toolchain is needed (but if no compiled code is used it may be 
fine to use the new one).

But then your qpdf is really in the Windows system32 directoy as 
suggested by
"C:\Windows\System32\qpdf_bin\qpdf.exe"
? I guess this is not the one from the new toolchain?


Best,
Uwe



On 31.03.2022 23:58, Spencer Graves wrote:
> Hi, Tomas and Ivan:
> 
> 
> On 3/31/22 1:52 AM, Tomas Kalibera wrote:
>>
>> On 3/31/22 08:39, Ivan Krylov wrote:
>>> On Wed, 30 Mar 2022 16:46:52 -0500
>>> Spencer Graves <spencer.graves at effectivedefense.org> wrote:
>>>
>>>> I'm getting different errors with MINGW64 and "Git CMD" under Windows
>>>> 10
>>> All these shortcuts do is launch cmd.exe or bash, optionally after
>>> setting %PATH%, optionally in a non-standard terminal application.
>>> Evidently, something in the %PATH% set by the shortcuts conflicts with
>>> the R CMD check process.
>>>
>>> For a package that doesn't have any compiled code, there should be no
>>> need for these tricks. Just start cmd.exe (for example, using Win+R,
>>> "cmd", Enter), navigate to your package and run something like
>>> "C:\Program Files\R-version\bin\R.exe" CMD check sos_2.1-4.tar.gz.
>>>
>>> If you're still having problems, try editing your %PATH% and trimming
>>> anything you don't need from there.
>>>
>>> If you're sure you need a special shortcut to launch a command line to
>>> check your package in, try installing Rtools and performing checks from
>>> "Rtools bash".
>>
>> With Rtools42, you don't need to run the Rtools bash, either, to check 
>> packages. You can use cmd.exe (or any other console/shell) or you can 
>> run the checks from R? (e.g. via tools::Rcmd). This has more details 
>> for R 4.2 with Rtools42 (but the same applies to R-devel):
>>
>> https://cran.r-project.org/bin/windows/base/howto-R-4.2.html
>>
>> With Rtools40 and R 4.0-4.1, this is almost the same but you need to 
>> adjust PATH in the running session of R (see 6.3.1 in R admin manual 
>> for the respective R release).
>>
>> Best
>> Tomas
> 
> Thanks.? On March 29, I upgraded to the latest version of R, RStudio 
> (free version), and installed rtools4.2.? I now have "Rtools", 
> "rtools40" and "rtools42" installed in the "C:\" root directory.? In a 
> terminal, I got "path", and noted that it does NOT contain anything 
> matching "rtools".
> 
> 
> After reviewing "howto-R-4.3.html", I ran "tools::Rcmd('check 
> sos_2.1-4.tar.gz')" as suggested there, with results given below.? I 
> have the sos package installed in "~Documents\R\sos\sos".? I have an R 
> project in "~Documents\R\sos", and I used devtools::load_all('sos') to 
> get RStudio to recognize the package.? With that, I pressed "Install and 
> Restart" and then "Check", and got seemingly the same results as 
> recorded below.
> 
> 
>  ????? What do you think?
>  ????? Thanks for the help.
>  ????? Spencer Graves
> 
> p.s.? On my Mac, "R CMD check sos_2.1-4.tar.gz" works fine, as does the 
> check process from within RStudio.? Something's wrong in my setup on my 
> Windows machine.
> 
> 
> tools::Rcmd('check sos_2.1-4.tar.gz')
> 
>  > tools::Rcmd('check sos_2.1-4.tar.gz')
> * using log directory 'C:/Users/spenc/Documents/R/sos/sos.Rcheck'
> * using R version 4.1.3 (2022-03-10)
> * using platform: x86_64-w64-mingw32 (64-bit)
> * using session charset: ISO8859-1
> * checking for file 'sos/DESCRIPTION' ... OK
> * this is package 'sos' version '2.1-4'
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking whether package 'sos' can be installed ... OK
> * checking installed package size ... OK
> * checking package directory ... OK
> * checking 'build' directory ... OK
> * checking DESCRIPTION meta-information ... OK
> * checking top-level files ... OK
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * checking whether the package can be loaded ... OK
> * checking whether the package can be loaded with stated dependencies 
> ... OK
> * checking whether the package can be unloaded cleanly ... OK
> * checking whether the namespace can be loaded with stated dependencies 
> ... OK
> * checking whether the namespace can be unloaded cleanly ... OK
> * checking dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... OK
> * checking Rd files ... OK
> * checking Rd metadata ... OK
> * checking Rd cross-references ... OK
> * checking for missing documentation entries ... OK
> * checking for code/documentation mismatches ... OK
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking sizes of PDF files under 'inst/doc' ...Warning in 
> system2(qpdf, "--version", TRUE) :
>  ? running command '"C:\Windows\System32\qpdf_bin\qpdf.exe" --version' 
> had status 309
> Error: invalid version specification 'NA'
> Execution halted
> 
> 
> R version 4.1.3 (2022-03-10)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 10 x64 (build 19043)
> 
> Matrix products: default
> 
> locale:
> [1] LC_COLLATE=English_United States.1252
> [2] LC_CTYPE=English_United States.1252
> [3] LC_MONETARY=English_United States.1252
> [4] LC_NUMERIC=C
> [5] LC_TIME=English_United States.1252
> 
> attached base packages:
> [1] stats???? graphics? grDevices utils???? datasets
> [6] methods?? base
> 
> other attached packages:
> [1] sos_2.1-4? brew_1.0-7
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.1.3 tools_4.1.3
> 
>>
>>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Fri Apr  1 11:59:57 2022
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Fri, 1 Apr 2022 10:59:57 +0100
Subject: [R-pkg-devel] 
 "Setting LC_CTYPE=en_US.UTF-8" failed and "qpdf28.dll
 was not found" on Win 10
In-Reply-To: <f6aaf5e9-466b-c43b-f4a8-4828e25a3488@effectivedefense.org>
References: <1fbf0809-9e2f-448d-3809-5883ddfb94f9@effectivedefense.org>
 <20220331093934.51b68e24@Tarkus>
 <13e5ac7d-e559-90f1-3d5e-c5a0e212565b@gmail.com>
 <f6aaf5e9-466b-c43b-f4a8-4828e25a3488@effectivedefense.org>
Message-ID: <6bb5d84b-cf4f-1923-60fd-b54a3e327b46@dewey.myzen.co.uk>

Dear Spencer

If I understand correctly your package sos does not have compiled code 
so as someone suggested earlier you do not need Rtools at all. The only 
drawback is that when I check my packages I get a note that it cannot 
find qpdf but they all pass checks on CRAN (which obviously does have qpdf).

Michael

On 31/03/2022 22:58, Spencer Graves wrote:
> Hi, Tomas and Ivan:
> 
> 
> On 3/31/22 1:52 AM, Tomas Kalibera wrote:
>>
>> On 3/31/22 08:39, Ivan Krylov wrote:
>>> On Wed, 30 Mar 2022 16:46:52 -0500
>>> Spencer Graves <spencer.graves at effectivedefense.org> wrote:
>>>
>>>> I'm getting different errors with MINGW64 and "Git CMD" under Windows
>>>> 10
>>> All these shortcuts do is launch cmd.exe or bash, optionally after
>>> setting %PATH%, optionally in a non-standard terminal application.
>>> Evidently, something in the %PATH% set by the shortcuts conflicts with
>>> the R CMD check process.
>>>
>>> For a package that doesn't have any compiled code, there should be no
>>> need for these tricks. Just start cmd.exe (for example, using Win+R,
>>> "cmd", Enter), navigate to your package and run something like
>>> "C:\Program Files\R-version\bin\R.exe" CMD check sos_2.1-4.tar.gz.
>>>
>>> If you're still having problems, try editing your %PATH% and trimming
>>> anything you don't need from there.
>>>
>>> If you're sure you need a special shortcut to launch a command line to
>>> check your package in, try installing Rtools and performing checks from
>>> "Rtools bash".
>>
>> With Rtools42, you don't need to run the Rtools bash, either, to check 
>> packages. You can use cmd.exe (or any other console/shell) or you can 
>> run the checks from R? (e.g. via tools::Rcmd). This has more details 
>> for R 4.2 with Rtools42 (but the same applies to R-devel):
>>
>> https://cran.r-project.org/bin/windows/base/howto-R-4.2.html
>>
>> With Rtools40 and R 4.0-4.1, this is almost the same but you need to 
>> adjust PATH in the running session of R (see 6.3.1 in R admin manual 
>> for the respective R release).
>>
>> Best
>> Tomas
> 
> Thanks.? On March 29, I upgraded to the latest version of R, RStudio 
> (free version), and installed rtools4.2.? I now have "Rtools", 
> "rtools40" and "rtools42" installed in the "C:\" root directory.? In a 
> terminal, I got "path", and noted that it does NOT contain anything 
> matching "rtools".
> 
> 
> After reviewing "howto-R-4.3.html", I ran "tools::Rcmd('check 
> sos_2.1-4.tar.gz')" as suggested there, with results given below.? I 
> have the sos package installed in "~Documents\R\sos\sos".? I have an R 
> project in "~Documents\R\sos", and I used devtools::load_all('sos') to 
> get RStudio to recognize the package.? With that, I pressed "Install and 
> Restart" and then "Check", and got seemingly the same results as 
> recorded below.
> 
> 
>  ????? What do you think?
>  ????? Thanks for the help.
>  ????? Spencer Graves
> 
> p.s.? On my Mac, "R CMD check sos_2.1-4.tar.gz" works fine, as does the 
> check process from within RStudio.? Something's wrong in my setup on my 
> Windows machine.
> 
> 
> tools::Rcmd('check sos_2.1-4.tar.gz')
> 
>  > tools::Rcmd('check sos_2.1-4.tar.gz')
> * using log directory 'C:/Users/spenc/Documents/R/sos/sos.Rcheck'
> * using R version 4.1.3 (2022-03-10)
> * using platform: x86_64-w64-mingw32 (64-bit)
> * using session charset: ISO8859-1
> * checking for file 'sos/DESCRIPTION' ... OK
> * this is package 'sos' version '2.1-4'
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking whether package 'sos' can be installed ... OK
> * checking installed package size ... OK
> * checking package directory ... OK
> * checking 'build' directory ... OK
> * checking DESCRIPTION meta-information ... OK
> * checking top-level files ... OK
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * checking whether the package can be loaded ... OK
> * checking whether the package can be loaded with stated dependencies 
> ... OK
> * checking whether the package can be unloaded cleanly ... OK
> * checking whether the namespace can be loaded with stated dependencies 
> ... OK
> * checking whether the namespace can be unloaded cleanly ... OK
> * checking dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... OK
> * checking Rd files ... OK
> * checking Rd metadata ... OK
> * checking Rd cross-references ... OK
> * checking for missing documentation entries ... OK
> * checking for code/documentation mismatches ... OK
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking sizes of PDF files under 'inst/doc' ...Warning in 
> system2(qpdf, "--version", TRUE) :
>  ? running command '"C:\Windows\System32\qpdf_bin\qpdf.exe" --version' 
> had status 309
> Error: invalid version specification 'NA'
> Execution halted
> 
> 
> R version 4.1.3 (2022-03-10)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 10 x64 (build 19043)
> 
> Matrix products: default
> 
> locale:
> [1] LC_COLLATE=English_United States.1252
> [2] LC_CTYPE=English_United States.1252
> [3] LC_MONETARY=English_United States.1252
> [4] LC_NUMERIC=C
> [5] LC_TIME=English_United States.1252
> 
> attached base packages:
> [1] stats???? graphics? grDevices utils???? datasets
> [6] methods?? base
> 
> other attached packages:
> [1] sos_2.1-4? brew_1.0-7
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.1.3 tools_4.1.3
> 
>>
>>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From m@pjg @end|ng |rom br|@to|@@c@uk  Fri Apr  1 17:46:51 2022
From: m@pjg @end|ng |rom br|@to|@@c@uk (Peter Green)
Date: Fri, 1 Apr 2022 16:46:51 +0100
Subject: [R-pkg-devel] Obscure-to-me parallel make issue
Message-ID: <8d05c5f1-1be0-f20e-45a3-747c015ffc2b@bristol.ac.uk>

I am having persistent but difficult-to-reproduce compilation errors for 
some CRAN tests on my package Nmix. These may be instances of the 
'parallel make' problem. A typical error message is
---
 ?? 30 |???????? use f2cio
 ????? |???????????????? 1
Fatal Error: Cannot open module file ?f2cio.mod? for reading at (1): No 
such file or directory
---

Apart from Nmix_init.c, my src directory has 8 source files:
---
.f : Nmix-sub3z, Nmix-aux, pnorm, rgamma, RNGfns
.c: wrapper.c
.f90: fef2cio, f2cio (each defining modules of the same name)
---

The dependency structure among them is summarised by:
---
Nmix-sub3z.f
 ?? ?calls pnorm.f rgamma.f Nmix-aux.f RNGfns.f
 ?? ?uses??? fef2cio.mod f2cio.mod
fef2cio.f90
 ?? ?uses? f2cio.mod
Nmix-aux.f
 ?? ?calls rgamma.f RNGfns.f
pnorm.f
 ?? ?calls RNGfns.f
rgamma.f
 ?? ?calls RNGfns.f
RNGfns.f
 ?? ?calls wrapper.c
---

My Makevars is:
---
C_OBJS = wrapper.o Nmix_init.o
FT_OBJS = Nmix-aux.o Nmix-sub3z.o RNGfns.o f2cio.o fef2cio.o pnorm.o 
rgamma2.o
all: $(SHLIB) clean
$(SHLIB): $(FT_OBJS) $(C_OBJS)
f2cio.mod: f2cio.o
fef2cio.mod: fef2cio.o f2cio.o
Nmix-sub3z.o: f2cio.mod fef2cio.mod
clean:
 ??? @rm -rf *.mod *.o
---

What dependency am I failing to capture? Or is there some other fault in 
the Makevars? Any clues welcome!

Peter Green



From tom@@@k@||ber@ @end|ng |rom gm@||@com  Fri Apr  1 18:09:29 2022
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Fri, 1 Apr 2022 18:09:29 +0200
Subject: [R-pkg-devel] Obscure-to-me parallel make issue
In-Reply-To: <8d05c5f1-1be0-f20e-45a3-747c015ffc2b@bristol.ac.uk>
References: <8d05c5f1-1be0-f20e-45a3-747c015ffc2b@bristol.ac.uk>
Message-ID: <c31ef7d5-4d24-778c-2577-a9489f91bcea@gmail.com>


On 4/1/22 17:46, Peter Green wrote:
> I am having persistent but difficult-to-reproduce compilation errors 
> for some CRAN tests on my package Nmix. These may be instances of the 
> 'parallel make' problem. A typical error message is
> ---
> ?? 30 |???????? use f2cio
> ????? |???????????????? 1
> Fatal Error: Cannot open module file ?f2cio.mod? for reading at (1): 
> No such file or directory
> ---
>
> Apart from Nmix_init.c, my src directory has 8 source files:
> ---
> .f : Nmix-sub3z, Nmix-aux, pnorm, rgamma, RNGfns
> .c: wrapper.c
> .f90: fef2cio, f2cio (each defining modules of the same name)
> ---
>
> The dependency structure among them is summarised by:
> ---
> Nmix-sub3z.f
> ?? ?calls pnorm.f rgamma.f Nmix-aux.f RNGfns.f
> ?? ?uses??? fef2cio.mod f2cio.mod
> fef2cio.f90
> ?? ?uses? f2cio.mod
> Nmix-aux.f
> ?? ?calls rgamma.f RNGfns.f
> pnorm.f
> ?? ?calls RNGfns.f
> rgamma.f
> ?? ?calls RNGfns.f
> RNGfns.f
> ?? ?calls wrapper.c
> ---
>
> My Makevars is:
> ---
> C_OBJS = wrapper.o Nmix_init.o
> FT_OBJS = Nmix-aux.o Nmix-sub3z.o RNGfns.o f2cio.o fef2cio.o pnorm.o 
> rgamma2.o
> all: $(SHLIB) clean
> $(SHLIB): $(FT_OBJS) $(C_OBJS)
> f2cio.mod: f2cio.o
> fef2cio.mod: fef2cio.o f2cio.o
> Nmix-sub3z.o: f2cio.mod fef2cio.mod
> clean:
> ??? @rm -rf *.mod *.o
> ---
>
> What dependency am I failing to capture? Or is there some other fault 
> in the Makevars? Any clues welcome!

Maybe that fef2cio.o depends on f2cio.mod

make -d might be useful for finding out what is make doing and why.

It might be easier to debug via an incremental serial build - once the 
build succeeds (e.g. by coincidence), touch specific files and run 
"make" again to see if things that should be rebuilt actually are.

Tomas

>
> Peter Green
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Apr  1 18:36:12 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 1 Apr 2022 19:36:12 +0300
Subject: [R-pkg-devel] Obscure-to-me parallel make issue
In-Reply-To: <8d05c5f1-1be0-f20e-45a3-747c015ffc2b@bristol.ac.uk>
References: <8d05c5f1-1be0-f20e-45a3-747c015ffc2b@bristol.ac.uk>
Message-ID: <20220401193612.613a56e3@arachnoid>

On Fri, 1 Apr 2022 16:46:51 +0100
Peter Green <mapjg at bristol.ac.uk> wrote:

> f2cio.mod: f2cio.o
> fef2cio.mod: fef2cio.o f2cio.o
> Nmix-sub3z.o: f2cio.mod fef2cio.mod

What rule does Make use for the f2cio.o -> f2cio.mod transition? GNU
Make could have a built-in rule for .mod files and get confused thinking
it has a circular dependency:

Nmix/src$ make -n Nmix-sub3z.o -f Makevars
make: Circular f2cio.o <- f2cio.mod dependency dropped.
m2c    -o f2cio.o
make: Circular fef2cio.o <- fef2cio.mod dependency dropped.
m2c    -o fef2cio.o
f77   -c -o Nmix-sub3z.o Nmix-sub3z.f

In my experience, it can be easier to express the Fortran module
dependencies by lying to Make and telling it that the .o file depends
on the .o file corresponding to the .mod file, not the .mod file
itself. This way, the dependent rule shouldn't be started until the
parent rule is finished producing both files.

If you have a quick way of reproducing the problem, does it help to use

Nmix-sub3z.o: f2cio.o fef2cio.o

in your dependencies and avoid mentioning *.mod at all?

-- 
Best regards,
Ivan


From edd @end|ng |rom deb|@n@org  Mon Apr  4 20:46:49 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 4 Apr 2022 13:46:49 -0500
Subject: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds
Message-ID: <25163.15641.715595.766989@rob.eddelbuettel.com>


Is anybody else looking into trying to come to terms with MXE for
cross-compiling for UCRT for R 4.2.0 and its updated Windows toolchain?  I
have been bugging Tomas in private email for a bit and figured it might be
useful to spread the load a little.

Is anybody else looking into this?  Any interest in pooling resources around
some virtual meeting place? New mailing list? Or an ad-hoc slack (or channel
on existing one)?

Dirk

PS My current status:
- MXE installed on Ubuntu as cross-compilation. Pretty straightforward.
- One initial test build (using cmake) failed:
     fatal error: Windows.h: No such file or directory
- Another of a known cmake-using library (nlopt) succeeded. Good. 

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From m@tth|@@-gond@n @end|ng |rom gmx@de  Mon Apr  4 21:05:12 2022
From: m@tth|@@-gond@n @end|ng |rom gmx@de (matthias-gondan)
Date: Mon, 04 Apr 2022 21:05:12 +0200
Subject: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds
In-Reply-To: <25163.15641.715595.766989@rob.eddelbuettel.com>
Message-ID: <1MZTmY-1nXadl3z6c-00WXR3@mail.gmx.net>

Still compiling... but when it is done, I might also need some advice. I don't mind if mxe help is given on this mailing list.Best wishesMatthias?
-------- Urspr?ngliche Nachricht --------Von: Dirk Eddelbuettel <edd at debian.org> Datum: 04.04.22  20:47  (GMT+01:00) An: r-package-devel at r-project.org Betreff: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds Is anybody else looking into trying to come to terms with MXE forcross-compiling for UCRT for R 4.2.0 and its updated Windows toolchain?? Ihave been bugging Tomas in private email for a bit and figured it might beuseful to spread the load a little.Is anybody else looking into this?? Any interest in pooling resources aroundsome virtual meeting place? New mailing list? Or an ad-hoc slack (or channelon existing one)?DirkPS My current status:- MXE installed on Ubuntu as cross-compilation. Pretty straightforward.- One initial test build (using cmake) failed:???? fatal error: Windows.h: No such file or directory- Another of a known cmake-using library (nlopt) succeeded. Good. -- dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org______________________________________________R-package-devel@r-project.org mailing listhttps://stat.ethz.ch/mailman/listinfo/r-package-devel
	[[alternative HTML version deleted]]


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Tue Apr  5 08:55:32 2022
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Tue, 5 Apr 2022 08:55:32 +0200
Subject: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds
In-Reply-To: <25163.15641.715595.766989@rob.eddelbuettel.com>
References: <25163.15641.715595.766989@rob.eddelbuettel.com>
Message-ID: <0d2831a0-bdbb-aeb8-c8a6-3ced81e2772a@gmail.com>


On 4/4/22 20:46, Dirk Eddelbuettel wrote:
> Is anybody else looking into trying to come to terms with MXE for
> cross-compiling for UCRT for R 4.2.0 and its updated Windows toolchain?  I
> have been bugging Tomas in private email for a bit and figured it might be
> useful to spread the load a little.
>
> Is anybody else looking into this?  Any interest in pooling resources around
> some virtual meeting place? New mailing list? Or an ad-hoc slack (or channel
> on existing one)?
>
> Dirk
>
> PS My current status:
> - MXE installed on Ubuntu as cross-compilation. Pretty straightforward.
> - One initial test build (using cmake) failed:
>       fatal error: Windows.h: No such file or directory

It might be you will have to patch the software for this one (to 
"windows.h"). Some software doesn't get regularly built on case 
sensitive filesystems.

See the "src" directory of MXE, grepping the ".patch" files,
grep Windows\.h *patch

for adaptations that had to be done for some software already

Best
Tomas

> - Another of a known cmake-using library (nlopt) succeeded. Good.
>


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Tue Apr  5 09:08:32 2022
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Tue, 5 Apr 2022 09:08:32 +0200
Subject: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds
In-Reply-To: <1MZTmY-1nXadl3z6c-00WXR3@mail.gmx.net>
References: <1MZTmY-1nXadl3z6c-00WXR3@mail.gmx.net>
Message-ID: <e3b3316d-3778-0800-eaa5-39efcf9b1d8e@gmail.com>

On 4/4/22 21:05, matthias-gondan wrote:
> Still compiling... but when it is done, I might also need some advice. I don't mind if mxe help is given on this mailing list.Best wishesMatthias

I am happy to help if you run into specific issues. If you decided to 
build SWI Prolog in the end from source, please note I've recently added 
a host build of cmake to Rtools42. The Berkeley db is part of MXE and 
can trivially be added to Rtools42 if you need it (simply would be 
listed in settings.mk, running "make db" succeeds on my system, 
producing libdb.a). Libuuid is already part of Rtools42.

Best
Tomas

> -------- Urspr?ngliche Nachricht --------Von: Dirk Eddelbuettel <edd at debian.org> Datum: 04.04.22  20:47  (GMT+01:00) An: r-package-devel at r-project.org Betreff: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds Is anybody else looking into trying to come to terms with MXE forcross-compiling for UCRT for R 4.2.0 and its updated Windows toolchain?? Ihave been bugging Tomas in private email for a bit and figured it might beuseful to spread the load a little.Is anybody else looking into this?? Any interest in pooling resources aroundsome virtual meeting place? New mailing list? Or an ad-hoc slack (or channelon existing one)?DirkPS My current status:- MXE installed on Ubuntu as cross-compilation. Pretty straightforward.- One initial test build (using cmake) failed:???? fatal error: Windows.h: No such file or directory- Another of a known cmake-using library (nlopt) succeeded. Good. -- dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org______________________________________________R-package-devel@r-project.org mailing listhttps://stat.ethz.ch/mailman/listinfo/r-package-devel
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

From m@tth|@@-gond@n @end|ng |rom gmx@de  Tue Apr  5 09:51:15 2022
From: m@tth|@@-gond@n @end|ng |rom gmx@de (Matthias Gondan)
Date: Tue, 5 Apr 2022 09:51:15 +0200
Subject: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds
In-Reply-To: <e3b3316d-3778-0800-eaa5-39efcf9b1d8e@gmail.com>
References: <1MZTmY-1nXadl3z6c-00WXR3@mail.gmx.net>
 <e3b3316d-3778-0800-eaa5-39efcf9b1d8e@gmail.com>
Message-ID: <1MWics-1nUvqF0wu0-00X4RV@mail.gmx.net>

Dear Tomas,

Wow, thanks! Having cmake is, of course, a great improvement, of use for many people. Thanks a lot! 

Best wishes,

Matthias



Von: Tomas Kalibera
Gesendet: Dienstag, 5. April 2022 09:08
An: matthias-gondan; Dirk Eddelbuettel; r-package-devel at r-project.org
Betreff: Re: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds

On 4/4/22 21:05, matthias-gondan wrote:
> Still compiling... but when it is done, I might also need some advice. I don't mind if mxe help is given on this mailing list.Best wishesMatthias

I am happy to help if you run into specific issues. If you decided to 
build SWI Prolog in the end from source, please note I've recently added 
a host build of cmake to Rtools42. The Berkeley db is part of MXE and 
can trivially be added to Rtools42 if you need it (simply would be 
listed in settings.mk, running "make db" succeeds on my system, 
producing libdb.a). Libuuid is already part of Rtools42.

Best
Tomas

> -------- Urspr?ngliche Nachricht --------Von: Dirk Eddelbuettel <edd at debian.org> Datum: 04.04.22  20:47  (GMT+01:00) An: r-package-devel at r-project.org Betreff: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds Is anybody else looking into trying to come to terms with MXE forcross-compiling for UCRT for R 4.2.0 and its updated Windows toolchain?? Ihave been bugging Tomas in private email for a bit and figured it might beuseful to spread the load a little.Is anybody else looking into this?? Any interest in pooling resources aroundsome virtual meeting place? New mailing list? Or an ad-hoc slack (or channelon existing one)?DirkPS My current status:- MXE installed on Ubuntu as cross-compilation. Pretty straightforward.- One initial test build (using cmake) failed:???? fatal error: Windows.h: No such file or directory- Another of a known cmake-using library (nlopt) succeeded. Good. -- dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org______________________________________________R-package-devel@r-project.org mailing listhttps://stat.ethz.ch/mailman/listinfo/r-package-devel
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Tue Apr  5 18:00:22 2022
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 5 Apr 2022 12:00:22 -0400
Subject: [R-pkg-devel] rmarkdown vignette build failures?
Message-ID: <ddcff059-5672-eb28-0a71-93955e4ac859@gmail.com>

   I'm sure I'm doing something silly, but I've recently started having 
a problem building vignettes (with R Under development (unstable) 
(2022-04-05 r82094) -- "Unsuffered Consequences")

   Is anyone else seeing this?

$ R CMD build broom.mixed
* checking for file ?broom.mixed/DESCRIPTION? ... OK
* preparing ?broom.mixed?:
* checking DESCRIPTION meta-information ... OK
* installing the package to build vignettes
* creating vignettes ...Error in find_vignette_product(name, by = 
"weave", dir = docdir, engine = engine) :
   Failed to locate ?weave? output file ?broom_mixed_intro.pdf? or 
?broom_mixed_intro.html? for vignette with name ?broom_mixed_intro? and 
engine ?utils::Sweave?. The following files exist in working directory 
?/tmp/Rtmp7rjAe4/Rbuild3978f3146b8cd8/broom.mixed/vignettes?: 
?broom_mixed_intro.rmd? (6322 bytes)
Execution halted

   The weird thing here is that I don't see why R is trying to use 
utils::Sweave ?  The DESCRIPTION file has VignetteBuilder: knitr and the 
head of the vignette file has

vignette: >
   %\VignetteIndexEntry{introduction to broom.mixed}
   %\VignetteEngine{knitr::rmarkdown}
   \usepackage[utf8]{inputenc}

  ...

  I could swear this used to work ...

   cheers
   Ben Bolker


From bbo|ker @end|ng |rom gm@||@com  Tue Apr  5 20:10:57 2022
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 5 Apr 2022 14:10:57 -0400
Subject: [R-pkg-devel] rmarkdown vignette build failures?
In-Reply-To: <ddcff059-5672-eb28-0a71-93955e4ac859@gmail.com>
References: <ddcff059-5672-eb28-0a71-93955e4ac859@gmail.com>
Message-ID: <cf600942-f0e2-0f6e-b8d7-7abf87c1f2fe@gmail.com>

   Follow-up: the problem goes away if I revert from SVN r82094 to 
r81000.  Will try some more bisection ...

On 4/5/22 12:00 PM, Ben Bolker wrote:
>  ? I'm sure I'm doing something silly, but I've recently started having 
> a problem building vignettes (with R Under development (unstable) 
> (2022-04-05 r82094) -- "Unsuffered Consequences")
> 
>  ? Is anyone else seeing this?
> 
> $ R CMD build broom.mixed
> * checking for file ?broom.mixed/DESCRIPTION? ... OK
> * preparing ?broom.mixed?:
> * checking DESCRIPTION meta-information ... OK
> * installing the package to build vignettes
> * creating vignettes ...Error in find_vignette_product(name, by = 
> "weave", dir = docdir, engine = engine) :
>  ? Failed to locate ?weave? output file ?broom_mixed_intro.pdf? or 
> ?broom_mixed_intro.html? for vignette with name ?broom_mixed_intro? and 
> engine ?utils::Sweave?. The following files exist in working directory 
> ?/tmp/Rtmp7rjAe4/Rbuild3978f3146b8cd8/broom.mixed/vignettes?: 
> ?broom_mixed_intro.rmd? (6322 bytes)
> Execution halted
> 
>  ? The weird thing here is that I don't see why R is trying to use 
> utils::Sweave ?? The DESCRIPTION file has VignetteBuilder: knitr and the 
> head of the vignette file has
> 
> vignette: >
>  ? %\VignetteIndexEntry{introduction to broom.mixed}
>  ? %\VignetteEngine{knitr::rmarkdown}
>  ? \usepackage[utf8]{inputenc}
> 
>  ?...
> 
>  ?I could swear this used to work ...
> 
>  ? cheers
>  ? Ben Bolker
> 
> 
> 
> 

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Director, School of Computational Science and Engineering
(Acting) Graduate chair, Mathematics & Statistics


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Tue Apr  5 20:20:37 2022
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Tue, 5 Apr 2022 20:20:37 +0200
Subject: [R-pkg-devel] handling of byte-order-mark on
 r-devel-linux-x86_64-debian-clang machine
In-Reply-To: <20220328141610.0cd17f38@arachnoid>
References: <AF437760-5DD5-41D6-A8AF-4C0BA064570F@dal.ca>
 <20220326165842.3605c913@Tarkus>
 <20a2da52-6488-6fd2-e6a3-bfca617a87c7@gmail.com>
 <20220328141610.0cd17f38@arachnoid>
Message-ID: <ba71d463-d19f-35ba-20c8-0e65cb37e45e@gmail.com>


On 3/28/22 13:16, Ivan Krylov wrote:
> On Mon, 28 Mar 2022 09:54:57 +0200
> Tomas Kalibera <tomas.kalibera at gmail.com> wrote:
>
>> Could you please clarify which part you found somewhat confusing,
>> could that be improved?
> Perhaps "somewhat confusing" is an overstatement, sorry about that. All
> the information is already there in both ?file and ?readLines, it just
> requires a bit of thought to understand it.
>
>>> When reading from a text connection, the connections code, after
>>> re-encoding based on the ?encoding? argument, returns text that is
>>> assumed to be in native encoding; an encoding mark is only added by
>>> functions that read from the connection, so e.g.  ?readLines? can
>>> be instructed to mark the text as ?"UTF-8"? or ?"latin1"?, but
>>> ?readLines? does no further conversion.  To allow reading text in
>>> ?"UTF-8"? on a system that cannot represent all such characters in
>>> native encoding (currently only Windows), a connection can be
>>> internally configured to return the read text in UTF-8 even though
>>> it is not the native encoding; currently ?readLines? and ?scan? use
>>> this feature when given a connection that is not yet open and, when
>>> using the feature, they unconditionally mark the text as ?"UTF-8"?.
> The paragraph starts by telling the user that the text is decoded into
> the native encoding, then tells about marking the encoding (which is
> counter-productive when decoding arbitrarily-encoded text into native
> encoding) and only then presents the exception to the native encoding
> output rule (decoding into UTF-8). If I'm trying to read a
> CP1252-encoded file on a Windows 7 machine with CP1251 as the session
> encoding, I might get confused by the mention of encoding mark between
> the parts that are important to me.
>
> It could be an improvement to mention that exception closer to the
> first point of the paragraph and, perhaps, to split the "encoding mark"
> part from the "text connection decoding" part:
>
>>> Functions that read from the connection can add an encoding mark
>>> to the returned text. For example, ?readLines? can be instructed
>>> to mark the text as ?"UTF-8"? or ?"latin1"?, but does no further
>>> conversion.
>>>
>>> When given a connection that is not yet open and has a non-default
>>> ?encoding? argument, ?readLines? and ?scan? internally configure the
>>> connection to read text in UTF-8. Otherwise, the text after decoding
>>> is assumed to be in native encoding.
> (Maybe this is omitting too much and should be expanded.)
>
> It could also be helpful to mention the fact that the encoding argument
> to readLines() can be ignored right in the description of that
> argument, inviting the user to read the Details section for more
> information.

Thanks for the suggestions, I've rewritten the paragraphs, biasing 
towards users who have UTF-8 as the native encoding as this is going to 
be the majority. These users should not have to worry much about the 
encoding marks anymore, nor about the internal UTF-8 mode of the 
connections code. But the level of detail I think needs to remain as 
long as these features are supported - the level of detail is based on 
numerous questions and bug reports.

Best
Tomas


From @eb@meyer @end|ng |rom |@u@de  Tue Apr  5 22:57:46 2022
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Tue, 5 Apr 2022 22:57:46 +0200
Subject: [R-pkg-devel] rmarkdown vignette build failures?
In-Reply-To: <ddcff059-5672-eb28-0a71-93955e4ac859@gmail.com>
References: <ddcff059-5672-eb28-0a71-93955e4ac859@gmail.com>
Message-ID: <1f5678a5-0e70-7c37-ee3c-200c0f807ca0@fau.de>

Am 05.04.22 um 18:00 schrieb Ben Bolker:
>  ? I'm sure I'm doing something silly, but I've recently started having 
> a problem building vignettes (with R Under development (unstable) 
> (2022-04-05 r82094) -- "Unsuffered Consequences")
> 
>  ? Is anyone else seeing this?
> 
> $ R CMD build broom.mixed
> * checking for file ?broom.mixed/DESCRIPTION? ... OK
> * preparing ?broom.mixed?:
> * checking DESCRIPTION meta-information ... OK
> * installing the package to build vignettes
> * creating vignettes ...Error in find_vignette_product(name, by = 
> "weave", dir = docdir, engine = engine) :
>  ? Failed to locate ?weave? output file ?broom_mixed_intro.pdf? or 
> ?broom_mixed_intro.html? for vignette with name ?broom_mixed_intro? and 
> engine ?utils::Sweave?. The following files exist in working directory 
> ?/tmp/Rtmp7rjAe4/Rbuild3978f3146b8cd8/broom.mixed/vignettes?: 
> ?broom_mixed_intro.rmd? (6322 bytes)
> Execution halted
> 
>  ? The weird thing here is that I don't see why R is trying to use 
> utils::Sweave ?  

I wasn't able to reproduce the build failure, but the reported vignette 
engine seems to be wrong. Indeed, there was an old (2013) bug in 
tools::pkgVignettes() that caused the reported engine in that error 
message to *always* be 'utils::Sweave'. I have just fixed that in 
R-devel (c82097, also ported to R-alpha, to be rebuilt in a few hours) 
but that won't solve the build failure itself.

The build failure most likely comes from

     # Rescan for weave and tangle output files
     vigns <- pkgVignettes(dir = '.', output = TRUE, source = TRUE)

after "successful" (only in the sense of not throwing an error) 
'buildVignettes(dir = '.', tangle = TRUE)', where 'dir' is the package 
source directory. Running these commands (from library("tools")) 
interactively should help debugging the problem at your end. From the 
error message it seems that buildVignettes() did not produce any output 
files.

	Sebastian Meyer


> The DESCRIPTION file has VignetteBuilder: knitr and the 
> head of the vignette file has
> 
> vignette: >
>  ? %\VignetteIndexEntry{introduction to broom.mixed}
>  ? %\VignetteEngine{knitr::rmarkdown}
>  ? \usepackage[utf8]{inputenc}
> 
>  ?...
> 
>  ?I could swear this used to work ...
> 
>  ? cheers
>  ? Ben Bolker
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Apr  6 00:02:41 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 05 Apr 2022 15:02:41 -0700
Subject: [R-pkg-devel] handling of byte-order-mark on
 r-devel-linux-x86_64-debian-clang machine
In-Reply-To: <ba71d463-d19f-35ba-20c8-0e65cb37e45e@gmail.com>
References: <AF437760-5DD5-41D6-A8AF-4C0BA064570F@dal.ca>
 <20220326165842.3605c913@Tarkus>
 <20a2da52-6488-6fd2-e6a3-bfca617a87c7@gmail.com>
 <20220328141610.0cd17f38@arachnoid>
 <ba71d463-d19f-35ba-20c8-0e65cb37e45e@gmail.com>
Message-ID: <76224FE3-C4E9-4B67-94C3-F17CF1DAFBCB@dcn.davis.ca.us>

Thanks to the ubiquity of Excel and its misguided inclusion of BOM codes in its UTF-8 CSV format, this optimism about encoding being a corner case seems premature. There are actually multiple options in Excel for writing CSV files, and only one of them (not the first one fortunately) has this "feature", but I (and various beginners I end up helping) seem to encounter these silly files far more frequently than seems reasonable.

On April 5, 2022 11:20:37 AM PDT, Tomas Kalibera <tomas.kalibera at gmail.com> wrote:
>
>On 3/28/22 13:16, Ivan Krylov wrote:
>> On Mon, 28 Mar 2022 09:54:57 +0200
>> Tomas Kalibera <tomas.kalibera at gmail.com> wrote:
>>
>>> Could you please clarify which part you found somewhat confusing,
>>> could that be improved?
>> Perhaps "somewhat confusing" is an overstatement, sorry about that. All
>> the information is already there in both ?file and ?readLines, it just
>> requires a bit of thought to understand it.
>>
>>>> When reading from a text connection, the connections code, after
>>>> re-encoding based on the ?encoding? argument, returns text that is
>>>> assumed to be in native encoding; an encoding mark is only added by
>>>> functions that read from the connection, so e.g.  ?readLines? can
>>>> be instructed to mark the text as ?"UTF-8"? or ?"latin1"?, but
>>>> ?readLines? does no further conversion.  To allow reading text in
>>>> ?"UTF-8"? on a system that cannot represent all such characters in
>>>> native encoding (currently only Windows), a connection can be
>>>> internally configured to return the read text in UTF-8 even though
>>>> it is not the native encoding; currently ?readLines? and ?scan? use
>>>> this feature when given a connection that is not yet open and, when
>>>> using the feature, they unconditionally mark the text as ?"UTF-8"?.
>> The paragraph starts by telling the user that the text is decoded into
>> the native encoding, then tells about marking the encoding (which is
>> counter-productive when decoding arbitrarily-encoded text into native
>> encoding) and only then presents the exception to the native encoding
>> output rule (decoding into UTF-8). If I'm trying to read a
>> CP1252-encoded file on a Windows 7 machine with CP1251 as the session
>> encoding, I might get confused by the mention of encoding mark between
>> the parts that are important to me.
>>
>> It could be an improvement to mention that exception closer to the
>> first point of the paragraph and, perhaps, to split the "encoding mark"
>> part from the "text connection decoding" part:
>>
>>>> Functions that read from the connection can add an encoding mark
>>>> to the returned text. For example, ?readLines? can be instructed
>>>> to mark the text as ?"UTF-8"? or ?"latin1"?, but does no further
>>>> conversion.
>>>>
>>>> When given a connection that is not yet open and has a non-default
>>>> ?encoding? argument, ?readLines? and ?scan? internally configure the
>>>> connection to read text in UTF-8. Otherwise, the text after decoding
>>>> is assumed to be in native encoding.
>> (Maybe this is omitting too much and should be expanded.)
>>
>> It could also be helpful to mention the fact that the encoding argument
>> to readLines() can be ignored right in the description of that
>> argument, inviting the user to read the Details section for more
>> information.
>
>Thanks for the suggestions, I've rewritten the paragraphs, biasing 
>towards users who have UTF-8 as the native encoding as this is going to 
>be the majority. These users should not have to worry much about the 
>encoding marks anymore, nor about the internal UTF-8 mode of the 
>connections code. But the level of detail I think needs to remain as 
>long as these features are supported - the level of detail is based on 
>numerous questions and bug reports.
>
>Best
>Tomas
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Wed Apr  6 09:08:28 2022
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Wed, 6 Apr 2022 09:08:28 +0200
Subject: [R-pkg-devel] handling of byte-order-mark on
 r-devel-linux-x86_64-debian-clang machine
In-Reply-To: <76224FE3-C4E9-4B67-94C3-F17CF1DAFBCB@dcn.davis.ca.us>
References: <AF437760-5DD5-41D6-A8AF-4C0BA064570F@dal.ca>
 <20220326165842.3605c913@Tarkus>
 <20a2da52-6488-6fd2-e6a3-bfca617a87c7@gmail.com>
 <20220328141610.0cd17f38@arachnoid>
 <ba71d463-d19f-35ba-20c8-0e65cb37e45e@gmail.com>
 <76224FE3-C4E9-4B67-94C3-F17CF1DAFBCB@dcn.davis.ca.us>
Message-ID: <4ee89513-81cb-cefc-a482-811eef8acd30@gmail.com>

On 4/6/22 00:02, Jeff Newmiller wrote:
> Thanks to the ubiquity of Excel and its misguided inclusion of BOM codes in its UTF-8 CSV format, this optimism about encoding being a corner case seems premature. There are actually multiple options in Excel for writing CSV files, and only one of them (not the first one fortunately) has this "feature", but I (and various beginners I end up helping) seem to encounter these silly files far more frequently than seems reasonable.

I was rather referring to encoding marks in R which declare an encoding 
of an R string, that is what you see by Encoding(). And to other 
measures to avoid the problem when the native encoding in R cannot 
represent all characters users need to work with (when the native 
encoding cannot be UTF-8). From R 4.2, the native encoding will be UTF-8 
also on (recent) Windows systems; on most Unix systems, it has been 
UTF-8 for years. But this change will not impact the handling of BOMs in 
input.

Is the problem reading CSV files from Excel (even when Excel is at 
fault) reported anywhere? If not, please report, maybe there is 
something that could be done to help processing those files on the R 
side. R handles BOMs in the "connections" code, ?connections, and it 
uses iconv for input conversion.

Thanks
Tomas

>
> On April 5, 2022 11:20:37 AM PDT, Tomas Kalibera <tomas.kalibera at gmail.com> wrote:
>> On 3/28/22 13:16, Ivan Krylov wrote:
>>> On Mon, 28 Mar 2022 09:54:57 +0200
>>> Tomas Kalibera <tomas.kalibera at gmail.com> wrote:
>>>
>>>> Could you please clarify which part you found somewhat confusing,
>>>> could that be improved?
>>> Perhaps "somewhat confusing" is an overstatement, sorry about that. All
>>> the information is already there in both ?file and ?readLines, it just
>>> requires a bit of thought to understand it.
>>>
>>>>> When reading from a text connection, the connections code, after
>>>>> re-encoding based on the ?encoding? argument, returns text that is
>>>>> assumed to be in native encoding; an encoding mark is only added by
>>>>> functions that read from the connection, so e.g.  ?readLines? can
>>>>> be instructed to mark the text as ?"UTF-8"? or ?"latin1"?, but
>>>>> ?readLines? does no further conversion.  To allow reading text in
>>>>> ?"UTF-8"? on a system that cannot represent all such characters in
>>>>> native encoding (currently only Windows), a connection can be
>>>>> internally configured to return the read text in UTF-8 even though
>>>>> it is not the native encoding; currently ?readLines? and ?scan? use
>>>>> this feature when given a connection that is not yet open and, when
>>>>> using the feature, they unconditionally mark the text as ?"UTF-8"?.
>>> The paragraph starts by telling the user that the text is decoded into
>>> the native encoding, then tells about marking the encoding (which is
>>> counter-productive when decoding arbitrarily-encoded text into native
>>> encoding) and only then presents the exception to the native encoding
>>> output rule (decoding into UTF-8). If I'm trying to read a
>>> CP1252-encoded file on a Windows 7 machine with CP1251 as the session
>>> encoding, I might get confused by the mention of encoding mark between
>>> the parts that are important to me.
>>>
>>> It could be an improvement to mention that exception closer to the
>>> first point of the paragraph and, perhaps, to split the "encoding mark"
>>> part from the "text connection decoding" part:
>>>
>>>>> Functions that read from the connection can add an encoding mark
>>>>> to the returned text. For example, ?readLines? can be instructed
>>>>> to mark the text as ?"UTF-8"? or ?"latin1"?, but does no further
>>>>> conversion.
>>>>>
>>>>> When given a connection that is not yet open and has a non-default
>>>>> ?encoding? argument, ?readLines? and ?scan? internally configure the
>>>>> connection to read text in UTF-8. Otherwise, the text after decoding
>>>>> is assumed to be in native encoding.
>>> (Maybe this is omitting too much and should be expanded.)
>>>
>>> It could also be helpful to mention the fact that the encoding argument
>>> to readLines() can be ignored right in the description of that
>>> argument, inviting the user to read the Details section for more
>>> information.
>> Thanks for the suggestions, I've rewritten the paragraphs, biasing
>> towards users who have UTF-8 as the native encoding as this is going to
>> be the majority. These users should not have to worry much about the
>> encoding marks anymore, nor about the internal UTF-8 mode of the
>> connections code. But the level of detail I think needs to remain as
>> long as these features are supported - the level of detail is based on
>> numerous questions and bug reports.
>>
>> Best
>> Tomas
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Apr  6 10:23:52 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 6 Apr 2022 11:23:52 +0300
Subject: [R-pkg-devel] handling of byte-order-mark on
 r-devel-linux-x86_64-debian-clang machine
In-Reply-To: <ba71d463-d19f-35ba-20c8-0e65cb37e45e@gmail.com>
References: <AF437760-5DD5-41D6-A8AF-4C0BA064570F@dal.ca>
 <20220326165842.3605c913@Tarkus>
 <20a2da52-6488-6fd2-e6a3-bfca617a87c7@gmail.com>
 <20220328141610.0cd17f38@arachnoid>
 <ba71d463-d19f-35ba-20c8-0e65cb37e45e@gmail.com>
Message-ID: <20220406112352.6629711b@Tarkus>

On Tue, 5 Apr 2022 20:20:37 +0200
Tomas Kalibera <tomas.kalibera at gmail.com> wrote:

> I've rewritten the paragraphs, biasing towards users who have UTF-8
> as the native encoding as this is going to be the majority.

Thank you!

> But the level of detail I think needs to remain as long as these
> features are supported - the level of detail is based on numerous
> questions and bug reports.

Of course, all these features have their use cases and it's important
to stay backwards compatible, including the documentation.

I would also like to apologise to Dan for leading him on a wild goose
chase that didn't bring him passing read.csv-related tests in the end.

-- 
Best regards,
Ivan


From bbo|ker @end|ng |rom gm@||@com  Thu Apr  7 03:54:16 2022
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Wed, 6 Apr 2022 21:54:16 -0400
Subject: [R-pkg-devel] rmarkdown vignette build failures?
In-Reply-To: <cf600942-f0e2-0f6e-b8d7-7abf87c1f2fe@gmail.com>
References: <ddcff059-5672-eb28-0a71-93955e4ac859@gmail.com>
 <cf600942-f0e2-0f6e-b8d7-7abf87c1f2fe@gmail.com>
Message-ID: <49e3c4ae-c267-b770-0334-5cec278daf57@gmail.com>

   Follow-up.

* I was wrong about the reversion to an earlier SVN commit helping

* Sebastian Meyer provided **enormously** useful feedback in telling me 
that these are the steps required to replicate what "R CMD build" is 
doing internally when it fails

   tools::buildVignettes(dir = ".", tangle = TRUE)
   vigns <- tools::pkgVignettes(dir = '.', output = TRUE, source = TRUE)

* running this code interactively allowed me to see that my build was 
failing with these errors:

Error: processing vignette 'lmer.Rnw' failed with diagnostics:
Running 'texi2dvi' on 'lmer.tex' failed.
LaTeX errors:
! Package inputenc Error: Unicode character ? (U+250C)
(inputenc)                not set up for use with LaTeX.

* further digging showed that for some reason I **absolutely still do 
not understand**, a simple Rnw chunk that printed a data frame was for 
some reason finding a 'huxtable' package printing method and trying to 
print the table using weird Unicode outline characters (e.g. the U+250C 
complained about above was being used as a box-corner character)

* I still don't really understand what's going on, but I'm getting there ...

   cheers
    Ben Bolker





On 4/5/22 2:10 PM, Ben Bolker wrote:
>  ? Follow-up: the problem goes away if I revert from SVN r82094 to 
> r81000.? Will try some more bisection ...
> 
> On 4/5/22 12:00 PM, Ben Bolker wrote:
>> ?? I'm sure I'm doing something silly, but I've recently started 
>> having a problem building vignettes (with R Under development 
>> (unstable) (2022-04-05 r82094) -- "Unsuffered Consequences")
>>
>> ?? Is anyone else seeing this?
>>
>> $ R CMD build broom.mixed
>> * checking for file ?broom.mixed/DESCRIPTION? ... OK
>> * preparing ?broom.mixed?:
>> * checking DESCRIPTION meta-information ... OK
>> * installing the package to build vignettes
>> * creating vignettes ...Error in find_vignette_product(name, by = 
>> "weave", dir = docdir, engine = engine) :
>> ?? Failed to locate ?weave? output file ?broom_mixed_intro.pdf? or 
>> ?broom_mixed_intro.html? for vignette with name ?broom_mixed_intro? 
>> and engine ?utils::Sweave?. The following files exist in working 
>> directory 
>> ?/tmp/Rtmp7rjAe4/Rbuild3978f3146b8cd8/broom.mixed/vignettes?: 
>> ?broom_mixed_intro.rmd? (6322 bytes)
>> Execution halted
>>
>> ?? The weird thing here is that I don't see why R is trying to use 
>> utils::Sweave ?? The DESCRIPTION file has VignetteBuilder: knitr and 
>> the head of the vignette file has
>>
>> vignette: >
>> ?? %\VignetteIndexEntry{introduction to broom.mixed}
>> ?? %\VignetteEngine{knitr::rmarkdown}
>> ?? \usepackage[utf8]{inputenc}
>>
>> ??...
>>
>> ??I could swear this used to work ...
>>
>> ?? cheers
>> ?? Ben Bolker
>>
>>
>>
>>
> 

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Director, School of Computational Science and Engineering
(Acting) Graduate chair, Mathematics & Statistics


From m@tth|@@-gond@n @end|ng |rom gmx@de  Fri Apr  8 12:49:12 2022
From: m@tth|@@-gond@n @end|ng |rom gmx@de (matthias-gondan)
Date: Fri, 08 Apr 2022 12:49:12 +0200
Subject: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds
In-Reply-To: <e3b3316d-3778-0800-eaa5-39efcf9b1d8e@gmail.com>
Message-ID: <1MY68T-1nTFXB3kzN-00YV30@mail.gmx.net>

Dear Thomas,This is great news, thank you. I understand that I use the /usr/bin/cmake from Rtools42, not /ucrt64/bin/cmake, correct? Which generator should I select, "Unix Makefiles"? I ask because this requires a few more #defines for Swi-Prolog, but that should be feasible.Best wishes,?Matthias?
-------- Urspr?ngliche Nachricht --------Von: Tomas Kalibera <tomas.kalibera at gmail.com> Datum: 05.04.22  09:08  (GMT+01:00) An: matthias-gondan <matthias-gondan at gmx.de>, Dirk Eddelbuettel <edd at debian.org>, r-package-devel at r-project.org Betreff: Re: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds On 4/4/22 21:05, matthias-gondan wrote:> Still compiling... but when it is done, I might also need some advice. I don't mind if mxe help is given on this mailing list.Best wishesMatthiasI am happy to help if you run into specific issues. If you decided to build SWI Prolog in the end from source, please note I've recently added a host build of cmake to Rtools42. The Berkeley db is part of MXE and can trivially be added to Rtools42 if you need it (simply would be listed in settings.mk, running "make db" succeeds on my system, producing libdb.a). Libuuid is already part of Rtools42.BestTomas> -------- Urspr?ngliche Nachricht --------Von: Dirk Eddelbuettel <edd at debian.org> Datum: 04.04.22? 20:47? (GMT+01:00) An: r-package-devel at r-project.org Betreff: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds Is anybody else looking into trying to come to terms with MXE forcross-compiling for UCRT for R 4.2.0 and its updated Windows toolchain?? Ihave been bugging Tomas in private email for a bit and figured it might beuseful to spread the load a little.Is anybody else looking into this?? Any interest in pooling resources aroundsome virtual meeting place? New mailing list? Or an ad-hoc slack (or channelon existing one)?DirkPS My current status:- MXE installed on Ubuntu as cross-compilation. Pretty straightforward.- One initial test build (using cmake) failed:???? fatal error: Windows.h: No such file or directory- Another of a known cmake-using library (nlopt) succeeded. Good. -- dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org______________________________________________R-package-devel@r-project.org mailing listhttps://stat.ethz.ch/mailman/listinfo/r-package-devel> 	[[alternative HTML version deleted]]>> ______________________________________________> R-package-devel at r-project.org mailing list> https://stat.ethz.ch/mailman/listinfo/r-package-devel
	[[alternative HTML version deleted]]


From m@tth|@@-gond@n @end|ng |rom gmx@de  Fri Apr  8 12:51:38 2022
From: m@tth|@@-gond@n @end|ng |rom gmx@de (Matthias Gondan)
Date: Fri, 8 Apr 2022 12:51:38 +0200
Subject: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds
In-Reply-To: <1MY68T-1nTFXB3kzN-00YV30@mail.gmx.net>
References: <e3b3316d-3778-0800-eaa5-39efcf9b1d8e@gmail.com>
 <1MY68T-1nTFXB3kzN-00YV30@mail.gmx.net>
Message-ID: <1MqJqD-1oHLkP1W55-00nNAe@mail.gmx.net>

Sorry for the terrible formatting?



Von: matthias-gondan
Gesendet: Freitag, 8. April 2022 12:49
An: Tomas Kalibera; Dirk Eddelbuettel; r-package-devel at r-project.org
Betreff: Re: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds

Dear Thomas,This is great news, thank you. I understand that I use the /usr/bin/cmake from Rtools42, not /ucrt64/bin/cmake, correct? Which generator should I select, "Unix Makefiles"? I ask because this requires a few more #defines for Swi-Prolog, but that should be feasible.Best wishes,?Matthias?
-------- Urspr?ngliche Nachricht --------Von: Tomas Kalibera <tomas.kalibera at gmail.com> Datum: 05.04.22  09:08  (GMT+01:00) An: matthias-gondan <matthias-gondan at gmx.de>, Dirk Eddelbuettel <edd at debian.org>, r-package-devel at r-project.org Betreff: Re: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds On 4/4/22 21:05, matthias-gondan wrote:> Still compiling... but when it is done, I might also need some advice. I don't mind if mxe help is given on this mailing list.Best wishesMatthiasI am happy to help if you run into specific issues. If you decided to build SWI Prolog in the end from source, please note I've recently added a host build of cmake to Rtools42. The Berkeley db is part of MXE and can trivially be added to Rtools42 if you need it (simply would be listed in settings.mk, running "make db" succeeds on my system, producing libdb.a). Libuuid is already part of Rtools42.BestTomas> -------- Urspr?ngliche Nachricht --------Von: Dirk Eddelbuettel <edd at debian.org> Datum: 04.04.22? 20:47? (GMT+01:00) An: r-package-devel at r-project.org Betreff: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds Is anybody else looking into trying to come to terms with MXE forcross-compiling for UCRT for R 4.2.0 and its updated Windows toolchain?? Ihave been bugging Tomas in private email for a bit and figured it might beuseful to spread the load a little.Is anybody else looking into this?? Any interest in pooling resources aroundsome virtual meeting place? New mailing list? Or an ad-hoc slack (or channelon existing one)?DirkPS My current status:- MXE installed on Ubuntu as cross-compilation. Pretty straightforward.- One initial test build (using cmake) failed:???? fatal error: Windows.h: No such file or directory- Another of a known cmake-using library (nlopt) succeeded. Good. -- dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org______________________________________________R-package-devel@r-project.org mailing listhttps://stat.ethz.ch/mailman/listinfo/r-package-devel> 	[[alternative HTML version deleted]]>> ______________________________________________> R-package-devel at r-project.org mailing list> https://stat.ethz.ch/mailman/listinfo/r-package-devel
	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Fri Apr  8 13:01:45 2022
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Fri, 8 Apr 2022 13:01:45 +0200
Subject: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds
In-Reply-To: <1MY68T-1nTFXB3kzN-00YV30@mail.gmx.net>
References: <1MY68T-1nTFXB3kzN-00YV30@mail.gmx.net>
Message-ID: <0ba70122-e4b4-1019-477f-fb0cd319c212@gmail.com>


On 4/8/22 12:49, matthias-gondan wrote:
> Dear Thomas,
>
> This is great news, thank you. I understand that I use the 
> /usr/bin/cmake from Rtools42, not /ucrt64/bin/cmake, correct? Which 
> generator should I select, "Unix Makefiles"? I ask because this 
> requires a few more #defines for Swi-Prolog, but that should be feasible.

Hi Matthias,

please see https://cran.r-project.org/bin/windows/base/howto-R-4.2.html 
and look for cmake, there is now a simple example for native (and 
cross-) compilation. Though your case might be harder and if you run 
into problems, please let me know.

Please use "cmake" that is on PATH with Rtools42 (currently it is under 
x86_64-w64-mingw32.static.posix). It will use "Unix Makefiles" by 
default and you can assume it is available. It will find headers and 
libraries from Rtools42 as needed.

If your installation of Rtools42 doesn't have cmake, please upgrade it.

Best
Tomas

>
> Best wishes,
>
> Matthias
>
> -------- Urspr?ngliche Nachricht --------
> Von: Tomas Kalibera <tomas.kalibera at gmail.com>
> Datum: 05.04.22 09:08 (GMT+01:00)
> An: matthias-gondan <matthias-gondan at gmx.de>, Dirk Eddelbuettel 
> <edd at debian.org>, r-package-devel at r-project.org
> Betreff: Re: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds
>
> On 4/4/22 21:05, matthias-gondan wrote:
> > Still compiling... but when it is done, I might also need some 
> advice. I don't mind if mxe help is given on this mailing list.Best 
> wishesMatthias
>
> I am happy to help if you run into specific issues. If you decided to
> build SWI Prolog in the end from source, please note I've recently added
> a host build of cmake to Rtools42. The Berkeley db is part of MXE and
> can trivially be added to Rtools42 if you need it (simply would be
> listed in settings.mk, running "make db" succeeds on my system,
> producing libdb.a). Libuuid is already part of Rtools42.
>
> Best
> Tomas
>
> > -------- Urspr?ngliche Nachricht --------Von: Dirk Eddelbuettel 
> <edd at debian.org> Datum: 04.04.22? 20:47 (GMT+01:00) An: 
> r-package-devel at r-project.org Betreff: [R-pkg-devel] Preparing for R 
> 4.2.0 and UCRT via MXE builds Is anybody else looking into trying to 
> come to terms with MXE forcross-compiling for UCRT for R 4.2.0 and its 
> updated Windows toolchain?? Ihave been bugging Tomas in private email 
> for a bit and figured it might beuseful to spread the load a little.Is 
> anybody else looking into this?? Any interest in pooling resources 
> aroundsome virtual meeting place? New mailing list? Or an ad-hoc slack 
> (or channelon existing one)?DirkPS My current status:- MXE installed 
> on Ubuntu as cross-compilation. Pretty straightforward.- One initial 
> test build (using cmake) failed:???? fatal error: Windows.h: No such 
> file or directory- Another of a known cmake-using library (nlopt) 
> succeeded. Good. -- dirk.eddelbuettel.com | @eddelbuettel | 
> edd at debian.org______________________________________________R-package-devel@r-project.org 
> mailing listhttps://stat.ethz.ch/mailman/listinfo/r-package-devel
> > [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
	[[alternative HTML version deleted]]


From dr@go@p|ecko @end|ng |rom @t@t@m@th@ethz@ch  Fri Apr  8 15:48:39 2022
From: dr@go@p|ecko @end|ng |rom @t@t@m@th@ethz@ch (Drago Plecko)
Date: Fri, 8 Apr 2022 15:48:39 +0200
Subject: [R-pkg-devel] Possible Tinytex issue on CRAN Windows machines
Message-ID: <CAKmJU=7t01m3xoaVwuvaMuY=L-01Rvhse6mW3Q_RAXLK7LG9bg@mail.gmail.com>

Dear all,

I attempted to submit an update for a CRAN package fairadapt
<https://cran.rstudio.com/web/packages/fairadapt/index.html> (version
0.2.2). When running checks locally (OS X, R 4.1.0) and/or on Github CI
workflows, there are no errors or warnings appearing. Furthermore, when
running checks on win-builder provided by R-project, all the checks are
successful, both for R-devel (see log
<https://win-builder.r-project.org/0Y3mj5lAiSA9/00check.log>) and R-release
(see log <https://win-builder.r-project.org/9BmncrRlr17N/00check.log>).

However, when submitting to CRAN, an error in rebuilding the vignette pops
up on Windows (the log
<https://win-builder.r-project.org/incoming_pretest/fairadapt_0.2.2_20220408_111131/Windows/00check.log>
is
here). The source code in the vignette that causes the issue is here
<https://github.com/dplecko/fairadapt/blob/26a1ae735abfb018a696cb32430fc6ff85b7fca4/vignettes/jss.Rmd#L307-L354>.
On linux there are no issues (log
<https://win-builder.r-project.org/incoming_pretest/fairadapt_0.2.2_20220408_111131/Debian/00check.log>).
Also, in the previous CRAN release of the package, the same code did not
cause any issues on Windows.

The problem could be due to an outdated installation of Tinytex on the CRAN
machines (the issue <https://github.com/yihui/tinytex/issues/293> appeared
last year around 1st of April). However, without being able to reproduce
the problem, it is very difficult to solve it.

Would anyone have a suggestion on whether this is a "false positive" check?
Otherwise, any pointers on how to troubleshoot such a problem in general
would be really welcome.

Thank you in advance,
Drago

	[[alternative HTML version deleted]]


From jeroen @end|ng |rom berke|ey@edu  Sat Apr  9 17:04:58 2022
From: jeroen @end|ng |rom berke|ey@edu (Jeroen Ooms)
Date: Sat, 9 Apr 2022 17:04:58 +0200
Subject: [R-pkg-devel] Single page reference manual in html format
Message-ID: <CABFfbXtcZF8WfDu+qK30pUof01b9SFkEdTd5exw5=DjpiC49nQ@mail.gmail.com>

Is there a way to generate the package reference manual in a (one
page) html format? It would be nice to access reference manuals from
devices without a pdf reader.

We can use `R CMD Rd2pdf {pkgdir}` to generate the reference manual in
pdf format, but afaict `R CMD Rd2text` and `R CMD rdconv` only convert
single Rd files, and do not support generating a full package
reference manual.


From ge|bjeremy22 @end|ng |rom gm@||@com  Sun Apr 10 20:32:23 2022
From: ge|bjeremy22 @end|ng |rom gm@||@com (=?UTF-8?B?asOpcsOpbXkgR2VsYg==?=)
Date: Sun, 10 Apr 2022 14:32:23 -0400
Subject: [R-pkg-devel] CRAN check linux gcc12 Boost error
Message-ID: <CACSk529OUxo0ftfvhDaP6wyX==dVphWYBOovXCmSLW5q_ht7zA@mail.gmail.com>

Dear all,

A package I am developing is encountering an error on the platform
(r-devel-linux-x86_64-debian-gcc) since CRAN decided to force the use of
gcc12.

The error is caused by the use of the bh package and the c++ Boost geometry
library. Boost is not supposed to be compiled with gcc12 (
https://www.boost.org/users/history/version_1_78_0.html), but I really
would like to continue to use it in my package.

Is there a way to ensure that an "older" version (11 should be fine) is
available and used when the package is installed and display an error
message otherwise?

Thank you !
-- 

*J?r?my GELB*
Assistant de recherche ? l'*INRS*
Docteur en ?tudes Urbaines

514 658 6054
gelbjeremy22 at gmail.com
F-4221 Avenue Coloniale H2W2C3 Montr?al Quebec

	[[alternative HTML version deleted]]


From |uc@r @end|ng |rom |edor@project@org  Sun Apr 10 21:23:56 2022
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Sun, 10 Apr 2022 21:23:56 +0200
Subject: [R-pkg-devel] CRAN check linux gcc12 Boost error
In-Reply-To: <CACSk529OUxo0ftfvhDaP6wyX==dVphWYBOovXCmSLW5q_ht7zA@mail.gmail.com>
References: <CACSk529OUxo0ftfvhDaP6wyX==dVphWYBOovXCmSLW5q_ht7zA@mail.gmail.com>
Message-ID: <CALEXWq1+OMUNoc5haxrm_mnvNfY2Y2PF54-vdProkFqH5qSvyw@mail.gmail.com>

El dom., 10 abr. 2022 20:33, j?r?my Gelb <gelbjeremy22 at gmail.com> escribi?:

> Dear all,
>
> A package I am developing is encountering an error on the platform
> (r-devel-linux-x86_64-debian-gcc) since CRAN decided to force the use of
> gcc12.
>

What's the package and what's the error? A link to the report would be
useful.

The error is caused by the use of the bh package and the c++ Boost geometry
> library. Boost is not supposed to be compiled with gcc12 (
> https://www.boost.org/users/history/version_1_78_0.html), but I really
> would like to continue to use it in my package.
>

What does this mean? Is there any known issue? Fedora 36+ ships gcc12 and
Boost 1.76 and there's no issue AFAIK.

>
> Is there a way to ensure that an "older" version (11 should be fine) is
> available and used when the package is installed and display an error
> message otherwise?
>

I don't think so. But anyway that's rarely a good strategy. It could be a
regression, of course, but I tend to think that the problem is in my code,
rather than in gcc.

I?aki


> Thank you !
> --
>
> *J?r?my GELB*
> Assistant de recherche ? l'*INRS*
> Docteur en ?tudes Urbaines
>
> 514 658 6054
> gelbjeremy22 at gmail.com
> F-4221 Avenue Coloniale H2W2C3 Montr?al Quebec
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From m@tth|@@-gond@n @end|ng |rom gmx@de  Sun Apr 10 22:08:20 2022
From: m@tth|@@-gond@n @end|ng |rom gmx@de (matthias-gondan)
Date: Sun, 10 Apr 2022 22:08:20 +0200
Subject: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds
In-Reply-To: <0ba70122-e4b4-1019-477f-fb0cd319c212@gmail.com>
Message-ID: <1MrQEn-1oHbd31Xc7-00oVsO@mail.gmx.net>

Hi Tomas,Using your description below, and thanks to the availability of cmake under a recent Rtools, I got quite far: rolog now passes for R-devel on rhub, and so does it on winbuilder, thank you! The only thing is that I need to "depend" on R 4.2 in the package description, but I guess this will be R-release in a few weeks.Best regards,Matthias?
-------- Urspr?ngliche Nachricht --------Von: Tomas Kalibera <tomas.kalibera at gmail.com> Datum: 08.04.22  13:01  (GMT+01:00) An: matthias-gondan <matthias-gondan at gmx.de>, Dirk Eddelbuettel <edd at debian.org>, r-package-devel at r-project.org Betreff: Re: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds 
    
    
    On 4/8/22 12:49, matthias-gondan wrote:
    
    
      
      Dear Thomas,
      
      
      This is great news, thank you. I understand that I
        use the /usr/bin/cmake from Rtools42, not /ucrt64/bin/cmake,
        correct? Which generator should I select, "Unix Makefiles"? I
        ask because this requires a few more #defines for Swi-Prolog,
        but that should be feasible.
    
    Hi Matthias,
    please see
      https://cran.r-project.org/bin/windows/base/howto-R-4.2.html and
      look for cmake, there is now a simple example for native (and
      cross-) compilation. Though your case might be harder and if you
      run into problems, please let me know.
    
    Please use "cmake" that is on PATH with Rtools42 (currently it is
      under x86_64-w64-mingw32.static.posix). It will use "Unix
      Makefiles" by default and you can assume it is available. It will
      find headers and libraries from Rtools42 as needed.
    If your installation of Rtools42 doesn't have cmake, please
      upgrade it.
    
    Best
      Tomas
    
    
      
      
      Best wishes,?
      
      
      Matthias?
      
      
      
        -------- Urspr?ngliche Nachricht --------
        Von: Tomas Kalibera <tomas.kalibera at gmail.com> 
        Datum: 05.04.22 09:08 (GMT+01:00) 
        An: matthias-gondan <matthias-gondan at gmx.de>, Dirk
          Eddelbuettel <edd at debian.org>,
          r-package-devel at r-project.org 
        Betreff: Re: [R-pkg-devel] Preparing for R 4.2.0 and UCRT
          via MXE builds 
        
        
      
      On 4/4/22 21:05, matthias-gondan wrote:
      > Still compiling... but when it is done, I might also need
      some advice. I don't mind if mxe help is given on this mailing
      list.Best wishesMatthias
      
      I am happy to help if you run into specific issues. If you decided
      to 
      build SWI Prolog in the end from source, please note I've recently
      added 
      a host build of cmake to Rtools42. The Berkeley db is part of MXE
      and 
      can trivially be added to Rtools42 if you need it (simply would be
      
      listed in settings.mk, running "make db" succeeds on my system, 
      producing libdb.a). Libuuid is already part of Rtools42.
      
      Best
      Tomas
      
      > -------- Urspr?ngliche Nachricht --------Von: Dirk
      Eddelbuettel <edd at debian.org> Datum: 04.04.22? 20:47?
      (GMT+01:00) An: r-package-devel at r-project.org Betreff:
      [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds Is
      anybody else looking into trying to come to terms with MXE
      forcross-compiling for UCRT for R 4.2.0 and its updated Windows
      toolchain?? Ihave been bugging Tomas in private email for a bit
      and figured it might beuseful to spread the load a little.Is
      anybody else looking into this?? Any interest in pooling resources
      aroundsome virtual meeting place? New mailing list? Or an ad-hoc
      slack (or channelon existing one)?DirkPS My current status:- MXE
      installed on Ubuntu as cross-compilation. Pretty straightforward.-
      One initial test build (using cmake) failed:???? fatal error:
      Windows.h: No such file or directory- Another of a known
      cmake-using library (nlopt) succeeded. Good. --
      dirk.eddelbuettel.com | @eddelbuettel |
edd at debian.org______________________________________________R-package-devel@r-project.org
      mailing listhttps://stat.ethz.ch/mailman/listinfo/r-package-devel
      > [[alternative HTML version deleted]]
      >
      > ______________________________________________
      > R-package-devel at r-project.org mailing list
      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
    
  


	[[alternative HTML version deleted]]


From ||@t@ @end|ng |rom reve||e@net  Sun Apr 10 22:32:38 2022
From: ||@t@ @end|ng |rom reve||e@net (William Revelle)
Date: Sun, 10 Apr 2022 15:32:38 -0500
Subject: [R-pkg-devel] table lacks "summary" attribute
In-Reply-To: <20220307125933.3f989d11@Tarkus>
References: <a391d173-0f40-08ad-3ee6-63aab893d7b8@4dscape.com>
 <20220307125933.3f989d11@Tarkus>
Message-ID: <7C12F8E8-721B-45A1-97EA-679FAE386C3E@revelle.net>

As of R.4.2.0 (beta) 04-08)  R CMD check as-cran is still throwing that warning. 

Bill


> On Mar 7, 2022, at 3:59 AM, Ivan Krylov <krylov.r00t at gmail.com> wrote:
> 
> On Sat, 5 Mar 2022 16:54:08 -0800
> alexios galanos <alexios at 4dscape.com> wrote:
> 
>> * checking HTML version of manual ... NOTE
>> Found the following problems:
>> DCCfilter-class.Rd:7:1: Warning: <table> lacks "summary" attribute
>> 
>> Any pointers/documentation on this?
> 
> This seems to be the new check for HTML documentation validity as part
> of accessibility enhancements in R. As far as I'm aware, HTML5 doesn't
> _require_ tables to have summaries, nor does Rd provide a way to
> specify them. This could be a bug in Tidy-html5, except it's been
> apparently fixed in 2016: https://github.com/htacg/tidy-html5/issues/377
> 
> -- 
> Best regards,
> Ivan
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Mon Apr 11 10:26:41 2022
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Mon, 11 Apr 2022 10:26:41 +0200
Subject: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds
In-Reply-To: <1MrQEn-1oHbd31Xc7-00oVsO@mail.gmx.net>
References: <1MrQEn-1oHbd31Xc7-00oVsO@mail.gmx.net>
Message-ID: <d8d5ea22-86a8-f9c5-4b9e-342132de738b@gmail.com>


On 4/10/22 22:08, matthias-gondan wrote:
> Hi Tomas,
>
> Using your description below, and thanks to the availability of cmake 
> under a recent Rtools, I got quite far: rolog now passes for R-devel 
> on rhub, and so does it on winbuilder, thank you! The only thing is 
> that I need to "depend" on R 4.2 in the package description, but I 
> guess this will be R-release in a few weeks.

Hi Matthias,

I am glad it worked.
R 4.2 is to be released on the 22nd of April, see 
https://developer.r-project.org/

Friday 2022-04-15: CODE FREEZE (4.2.0 RC)
Tuesday 2022-04-19: PRERELEASE
Friday 2022-04-22: RELEASE (4.2.0)

Best
Tomas

>
> Best regards,
>
> Matthias
>
>
> -------- Urspr?ngliche Nachricht --------
> Von: Tomas Kalibera <tomas.kalibera at gmail.com>
> Datum: 08.04.22 13:01 (GMT+01:00)
> An: matthias-gondan <matthias-gondan at gmx.de>, Dirk Eddelbuettel 
> <edd at debian.org>, r-package-devel at r-project.org
> Betreff: Re: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds
>
>
> On 4/8/22 12:49, matthias-gondan wrote:
>> Dear Thomas,
>>
>> This is great news, thank you. I understand that I use the 
>> /usr/bin/cmake from Rtools42, not /ucrt64/bin/cmake, correct? Which 
>> generator should I select, "Unix Makefiles"? I ask because this 
>> requires a few more #defines for Swi-Prolog, but that should be feasible.
>
> Hi Matthias,
>
> please see 
> https://cran.r-project.org/bin/windows/base/howto-R-4.2.html and look 
> for cmake, there is now a simple example for native (and cross-) 
> compilation. Though your case might be harder and if you run into 
> problems, please let me know.
>
> Please use "cmake" that is on PATH with Rtools42 (currently it is 
> under x86_64-w64-mingw32.static.posix). It will use "Unix Makefiles" 
> by default and you can assume it is available. It will find headers 
> and libraries from Rtools42 as needed.
>
> If your installation of Rtools42 doesn't have cmake, please upgrade it.
>
> Best
> Tomas
>
>>
>> Best wishes,
>>
>> Matthias
>>
>> -------- Urspr?ngliche Nachricht --------
>> Von: Tomas Kalibera <tomas.kalibera at gmail.com>
>> Datum: 05.04.22 09:08 (GMT+01:00)
>> An: matthias-gondan <matthias-gondan at gmx.de>, Dirk Eddelbuettel 
>> <edd at debian.org>, r-package-devel at r-project.org
>> Betreff: Re: [R-pkg-devel] Preparing for R 4.2.0 and UCRT via MXE builds
>>
>> On 4/4/22 21:05, matthias-gondan wrote:
>> > Still compiling... but when it is done, I might also need some 
>> advice. I don't mind if mxe help is given on this mailing list.Best 
>> wishesMatthias
>>
>> I am happy to help if you run into specific issues. If you decided to
>> build SWI Prolog in the end from source, please note I've recently added
>> a host build of cmake to Rtools42. The Berkeley db is part of MXE and
>> can trivially be added to Rtools42 if you need it (simply would be
>> listed in settings.mk, running "make db" succeeds on my system,
>> producing libdb.a). Libuuid is already part of Rtools42.
>>
>> Best
>> Tomas
>>
>> > -------- Urspr?ngliche Nachricht --------Von: Dirk Eddelbuettel 
>> <edd at debian.org> Datum: 04.04.22? 20:47? (GMT+01:00) An: 
>> r-package-devel at r-project.org Betreff: [R-pkg-devel] Preparing for R 
>> 4.2.0 and UCRT via MXE builds Is anybody else looking into trying to 
>> come to terms with MXE forcross-compiling for UCRT for R 4.2.0 and 
>> its updated Windows toolchain?? Ihave been bugging Tomas in private 
>> email for a bit and figured it might beuseful to spread the load a 
>> little.Is anybody else looking into this?? Any interest in pooling 
>> resources aroundsome virtual meeting place? New mailing list? Or an 
>> ad-hoc slack (or channelon existing one)?DirkPS My current status:- 
>> MXE installed on Ubuntu as cross-compilation. Pretty 
>> straightforward.- One initial test build (using cmake) failed:???? 
>> fatal error: Windows.h: No such file or directory- Another of a known 
>> cmake-using library (nlopt) succeeded. Good. -- dirk.eddelbuettel.com 
>> | @eddelbuettel | 
>> edd at debian.org______________________________________________R-package-devel@r-project.org 
>> mailing listhttps://stat.ethz.ch/mailman/listinfo/r-package-devel
>> > [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
	[[alternative HTML version deleted]]


From ru@@e||@g@@|mond @end|ng |rom gm@||@com  Tue Apr 12 01:30:53 2022
From: ru@@e||@g@@|mond @end|ng |rom gm@||@com (Russell Almond)
Date: Mon, 11 Apr 2022 19:30:53 -0400
Subject: [R-pkg-devel] Build Environment for Mac OS Catalina
Message-ID: <9f465b29-0d9d-a692-b356-95fc22fed9d6@gmail.com>

I'm doing my development on an older version of Mac OS, running 
Catalina.  I'm a bit confused as to what the proper development 
environment is because the stuff on https://mac.r-project.org/tools 
seems to be for either more recent or older versions of MacOS.  I also 
seem to have screwed up something in my toolchain (the curious can see 
my question at 
https://stackoverflow.com/questions/71790401/otool-is-referencing-an-old-version-of-libffi 
).

I have a couple of related questions:

1) What is the right set of instructions for setting up the tool chain 
for Mac OS Catalina?

2) I'm currently using the R install from homebrew, but I thought I saw 
something about a different version of R that I should be using.  Is 
that still current advise?

Thanks, Googling the answers to these questions points me at some pages 
that are clearly out of date.


From @|mon@urb@nek @end|ng |rom R-project@org  Tue Apr 12 01:57:20 2022
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Tue, 12 Apr 2022 11:57:20 +1200
Subject: [R-pkg-devel] Build Environment for Mac OS Catalina
In-Reply-To: <9f465b29-0d9d-a692-b356-95fc22fed9d6@gmail.com>
References: <9f465b29-0d9d-a692-b356-95fc22fed9d6@gmail.com>
Message-ID: <0ABF6EE1-858D-47F5-A00E-15316C608100@R-project.org>

Russel,

this is Mac-specific hence more appropriate for R-SIG-Mac, so moving there.

If you are running Catalina then you have Intel Mac so for CRAN R you simply need XCode and that's it (on a clean Mac you can simply run sudo xcode-select --install). There is nothing special - the only exception is if your package contains Fortran code in which case you just install a Fortran compilers from https://mac.r-project.org/tools/gfortran-8.2-Mojave.dmg

However, since you are using Homebrew then things are a lot more complicated. Homebrew toolchains are not compatible with native Mac binaries and they create its own ecosystem which seems to be broken according to your post.

I would recommend deleting /opt/local then check if you have other incompatible libraries in /usr/local. For severe case of misconfiguration best way to remove (or move aside) everything from /usr/local and start from scratch.

Typically the easiest is to install CRAN R as that does not conflict with anything native and it does not require special tools. You can still use Homebrew to install 3rd party libraries that you may need, but make sure you do NOT install any compilers as they tend to wreak havoc on the system with the conflicting libraries. If your dependencies are supported by CRAN then you can fetch them from https://mac.r-project.org/bin/ or you can re-build them yourself using https://github.com/R-macos/recipes

Cheers,
Simon


> On 12/04/2022, at 11:30 AM, Russell Almond <russell.g.almond at gmail.com> wrote:
> 
> I'm doing my development on an older version of Mac OS, running Catalina.  I'm a bit confused as to what the proper development environment is because the stuff on https://mac.r-project.org/tools seems to be for either more recent or older versions of MacOS.  I also seem to have screwed up something in my toolchain (the curious can see my question at https://stackoverflow.com/questions/71790401/otool-is-referencing-an-old-version-of-libffi ).
> 
> I have a couple of related questions:
> 
> 1) What is the right set of instructions for setting up the tool chain for Mac OS Catalina?
> 
> 2) I'm currently using the R install from homebrew, but I thought I saw something about a different version of R that I should be using.  Is that still current advise?
> 
> Thanks, Googling the answers to these questions points me at some pages that are clearly out of date.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From bbo|ker @end|ng |rom gm@||@com  Tue Apr 12 02:33:22 2022
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Mon, 11 Apr 2022 20:33:22 -0400
Subject: [R-pkg-devel] help with BLAS/LAPACK version debugging
Message-ID: <5b19da9f-b413-e5ad-91dd-51a5eb88e27a@mcmaster.ca>

   Hi folks,

   Apologies for long post. (Part 1, overview; part 2, list of attempts 
so far; part 3, test code.)

OVERVIEW

   CRAN is reporting check errors with the latest release of lme4 
<https://cran.r-project.org/web/checks/check_results_lme4.html> that 
*may* (best guess) be caused by some linear algebra returning NA values 
rather than throwing an error as expected.

   Kurt Hornik says:

   > The failing check runs are using an external LAPACK 3.10.0. To be 
even more precise, Brian does not get this on Fedora with a system 
reference (netlib) 3.10 LAPACK, whereas I do on Debian with OpenBLAS.  Hth.

   The relevant test code is below.

   Further notes: 
https://github.com/lme4/lme4/blob/master/misc/R_lapackstuff.md ; 
https://github.com/lme4/lme4/issues/677

   I think I probably know how to fix/work around the problem, but I 
would dearly love to have a test system where I could (a) confirm that 
things are failing in the way/for the reason I expect; and (b) test that 
my proposed fix actually works.

   Any ideas (or reports that the test code fails on your system) would 
be greatly appreciated ...

   cheers
     Ben Bolker
=====

ATTEMPTS SO FAR (none reproduce the error)

* running on r-hub debian-gcc-devel, both remotely and in a local Docker 
container. AFAICT it is running

BLAS:   /opt/R-devel/lib/R/lib/libRblas.so
LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.10.0

   I was unsuccessful in using Debian's update-defaults command to mess 
around with the LAPACK version.

  * running on the `rocker/verse` image from the Rocker project.

The default is openblas-pthread/liblapack.so.3; I don't get any errors 
with this. I can use update-defaults to switch to liblapack.so.3.9.0 
(not 3.10.0, this is using Debian stable I think), also no errors that way.

* running on my own machine (PopOS!, r-devel)

This is using openblas-pthread/libopenblasp-r0.3.13.so, and I can't for 
the life of me figure out how to switch BLAS/LAPACK versions (have tried 
reinstalling both with (--with-lapack --with-blas) and without, using 
update-alternatives doesn't seem to make any difference?  Have read 
various online docs about how this is supposed to work ...


=======

TEST CODE

## 1. this succeeds for me, fails for CRAN

set.seed(101)
d <- data.frame(z=rnorm(200),
                 f=factor(sample(1:10,200, replace=TRUE)))
library(lme4)
library(testthat)
fm1 <- lmer(z~ as.numeric(f) + 1|f, d)
fm1 at optinfo$derivs$Hessian[2,2] <- NA
expect_warning(lme4:::checkConv(fm1 at optinfo\$derivs,
                                 coefs=c(1,1),
                                 ctrl=lmerControl()$checkConv,lbound=0),
                "Problem with Hessian check")

## 2. this throws 'system is computationally singular' for me, returns a 
vector containing NAs for CRAN (I think)

dd <- list(gradient = c(0.00132136676711525, 0.00898197413334856, 0
), Hessian = structure(c(195.253128051758, 962.483270645142,
0, 962.483270645142, NA, 0, 0, 0, 6542.44775390625), dim = c(3L,
3L)))
with(dd, solve(chol(Hessian),gradient))

## 3. report BLAS/LAPACK info

s <- sessionInfo()
cat(s$BLAS, s$LAPACK, sep = "\n")


From edd @end|ng |rom deb|@n@org  Tue Apr 12 03:18:29 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 11 Apr 2022 20:18:29 -0500
Subject: [R-pkg-devel] help with BLAS/LAPACK version debugging
In-Reply-To: <5b19da9f-b413-e5ad-91dd-51a5eb88e27a@mcmaster.ca>
References: <5b19da9f-b413-e5ad-91dd-51a5eb88e27a@mcmaster.ca>
Message-ID: <25172.54117.83291.878439@rob.eddelbuettel.com>


Ben,

I fear your post is too short on specifics on versions tested, and results
seen. We need more drill-down on what-version-where and the results it got.

So to bootstrap, "here" on my personal dev box I where I tend to keep an
installation of R-devel (using its embedded LAPACK/BLAS sources) as well as
the standard R package I stand behind for Debian/Ubuntu (which tends to use
external libraries for BLAS/LAPACK).


Now, here I seem to get a different error between reference BLAS/LAPACK and
external BLAS/LAPACK:


1) R-devel (as SVN r82134) 
   using libRblas.so + libRlapack.so (i.e. "reference BLAS") gets me
   
   Error in chol.default(Hessian) : 
     the leading minor of order 2 is not positive definite


2) R-devel as I upload to Debian, same SVN r82134
   using external blas: openblas-pthread/{libblas.so.3 + libopenblasp-r0.3.20.so}

   package version libopenblas0 0.3.20, liblapack 3.10.0
  
   Error in solve.default(chol(Hessian), gradient) : 
     system is computationally singular: reciprocal condition number = 0


3) For what it is worth every release R version I put into Debian and which
   is still available (easily, I find) via rocker/r-base or r-base images

   Using 4.0.4 here (again: openblas-pthread/{libblas.so.3 + libopenblasp-r0.3.13.so}
   (but possibly an older version -- libopenblas 0.3.13, liblapack 3.9.0-3)

   Error in solve.default(chol(Hessian), gradient) : 
     system is computationally singular: reciprocal condition number = 0


I don't claim that the above is complete; I am only pointing out that both
LAPACK 0.3.9 and 0.3.10 _get me the same error_.  Conrad and I recently did
dig up an issue for (Rcpp)Armadillo where 0.3.10 _was_ different from 0.3.9,
but that was for complex-value variables.

The bigger difference seems to be between using R's reference blas, and
external blas.  I have for a decade+ used external BLAS even when the
official word to prefer reference BLAS. Now, and very recently NEWS in R seem
to go the same way prefering 0.3.10 where available.

I hope this helps. I can give you pointers (off-list) if you want to dig some
more via Docker and different combinations.


Cheers, Dirk


-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @vr@h@m@@d|er @end|ng |rom gm@||@com  Tue Apr 12 06:29:56 2022
From: @vr@h@m@@d|er @end|ng |rom gm@||@com (Avraham Adler)
Date: Tue, 12 Apr 2022 04:29:56 +0000
Subject: [R-pkg-devel] help with BLAS/LAPACK version debugging
In-Reply-To: <25172.54117.83291.878439@rob.eddelbuettel.com>
References: <5b19da9f-b413-e5ad-91dd-51a5eb88e27a@mcmaster.ca>
 <25172.54117.83291.878439@rob.eddelbuettel.com>
Message-ID: <CAL6gwnJ=QwX-LWDGoQ2KtDtpZ8GzLiJVFQranrFY641zeRg6UQ@mail.gmail.com>

If it helps, this is on Windows 10 64bit, R 4.2.0alpha, OpenBLAS
0.3.17 (single threaded, custom compiled for i7-8700K Skylake which
functions as a Haswell), but default R LAPACK since I still have not
figured out how to link to a precompiled LAPACK when building natively
on Windows.

Thanks,

Avi

# 1
set.seed(101)
d <- data.frame(z=rnorm(200),
                  f=factor(sample(1:10,200, replace=TRUE)))
library(lme4)
library(testthat)
fm1 <- lmer(z~ as.numeric(f) + 1|f, d)

R throws--> "boundary (singular) fit: see help('isSingular')"

> fm1 at optinfo$derivs$Hessian[2,2] <- NA

> expect_warning(lme4:::checkConv(fm1 at optinfo$derivs,
                                  coefs=c(1,1),
                                  ctrl=lmerControl()$checkConv,lbound=0),
                 "Problem with Hessian check")

(No warning thrown)

# 2
dd <- list(gradient = c(0.00132136676711525, 0.00898197413334856, 0),
   Hessian = structure(c(195.253128051758, 962.483270645142,
                         0, 962.483270645142, NA, 0, 0, 0, 6542.44775390625),
                         dim = c(3L, 3L)))
with(dd, solve(chol(Hessian),gradient))

R throws--> Error in h(simpleError(msg, call)) :
  error in evaluating the argument 'a' in selecting a method for
function 'solve': the leading minor of order 2 is not positive
definite

# 3 (Windows returns empty strings for BLAS and LAPACK)

R version 4.2.0 alpha (2022-04-03 r82074 ucrt)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 19043)

Matrix products: default

locale:
[1] LC_COLLATE=English_United States.utf8  LC_CTYPE=English_United
States.utf8    LC_MONETARY=English_United States.utf8
[4] LC_NUMERIC=C                           LC_TIME=English_United
States.utf8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] testthat_3.1.3 lme4_1.1-29    Matrix_1.4-1

loaded via a namespace (and not attached):
 [1] Rcpp_1.0.8.3    lattice_0.20-45 rprojroot_2.0.3 withr_2.5.0
brio_1.1.3      MASS_7.3-56     grid_4.2.0
 [8] R6_2.5.1        nlme_3.1-157    magrittr_2.0.3  rlang_1.0.2
cli_3.2.0       minqa_1.2.4     nloptr_2.0.0
[15] boot_1.3-28     desc_1.4.1      splines_4.2.0   tools_4.2.0
pkgload_1.2.4   compiler_4.2.0

On Tue, Apr 12, 2022 at 1:18 AM Dirk Eddelbuettel <edd at debian.org> wrote:
>
>
> Ben,
>
> I fear your post is too short on specifics on versions tested, and results
> seen. We need more drill-down on what-version-where and the results it got.
>
> So to bootstrap, "here" on my personal dev box I where I tend to keep an
> installation of R-devel (using its embedded LAPACK/BLAS sources) as well as
> the standard R package I stand behind for Debian/Ubuntu (which tends to use
> external libraries for BLAS/LAPACK).
>
>
> Now, here I seem to get a different error between reference BLAS/LAPACK and
> external BLAS/LAPACK:
>
>
> 1) R-devel (as SVN r82134)
>    using libRblas.so + libRlapack.so (i.e. "reference BLAS") gets me
>
>    Error in chol.default(Hessian) :
>      the leading minor of order 2 is not positive definite
>
>
> 2) R-devel as I upload to Debian, same SVN r82134
>    using external blas: openblas-pthread/{libblas.so.3 + libopenblasp-r0.3.20.so}
>
>    package version libopenblas0 0.3.20, liblapack 3.10.0
>
>    Error in solve.default(chol(Hessian), gradient) :
>      system is computationally singular: reciprocal condition number = 0
>
>
> 3) For what it is worth every release R version I put into Debian and which
>    is still available (easily, I find) via rocker/r-base or r-base images
>
>    Using 4.0.4 here (again: openblas-pthread/{libblas.so.3 + libopenblasp-r0.3.13.so}
>    (but possibly an older version -- libopenblas 0.3.13, liblapack 3.9.0-3)
>
>    Error in solve.default(chol(Hessian), gradient) :
>      system is computationally singular: reciprocal condition number = 0
>
>
> I don't claim that the above is complete; I am only pointing out that both
> LAPACK 0.3.9 and 0.3.10 _get me the same error_.  Conrad and I recently did
> dig up an issue for (Rcpp)Armadillo where 0.3.10 _was_ different from 0.3.9,
> but that was for complex-value variables.
>
> The bigger difference seems to be between using R's reference blas, and
> external blas.  I have for a decade+ used external BLAS even when the
> official word to prefer reference BLAS. Now, and very recently NEWS in R seem
> to go the same way prefering 0.3.10 where available.
>
> I hope this helps. I can give you pointers (off-list) if you want to dig some
> more via Docker and different combinations.
>
>
> Cheers, Dirk
>
>
> --
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |uc@r @end|ng |rom |edor@project@org  Tue Apr 12 11:32:01 2022
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Tue, 12 Apr 2022 11:32:01 +0200
Subject: [R-pkg-devel] help with BLAS/LAPACK version debugging
In-Reply-To: <5b19da9f-b413-e5ad-91dd-51a5eb88e27a@mcmaster.ca>
References: <5b19da9f-b413-e5ad-91dd-51a5eb88e27a@mcmaster.ca>
Message-ID: <CALEXWq2yEx5K1WvS1dWoF+RBBu1tNEQXV-TBYH2tS1-T=bzSBw@mail.gmail.com>

Hi Ben,

I see:

$ FLEXIBLAS=openblas-serial Rscript test.R
Loading required package: Matrix
boundary (singular) fit: see help('isSingular')
Error in solve.default(chol(Hessian), gradient) :
 system is computationally singular: reciprocal condition number = 0
Calls: with ... with.default -> eval -> eval -> solve -> solve -> solve.default

$ FLEXIBLAS=netlib Rscript test.R
Loading required package: Matrix
boundary (singular) fit: see help('isSingular')
Error in h(simpleError(msg, call)) :
 error in evaluating the argument 'a' in selecting a method for
function 'solve': the leading minor of order 2 is not positive
definite
Calls: with ... chol -> chol -> chol.default -> .handleSimpleError -> h

This is for Fedora 35 with R 4.1.3 and FlexiBLAS 3.1.3, which allows
you to easily switch (as shown above) between several implementations
available, including NETLIB 3.10.0, OpenBLAS 0.3.19 (serial, openmp,
threads), BLIS 0.7.0 (serial, openmp, threads) and ATLAS 3.10.3, but
also other libraries you already have if you tell FlexiBLAS where they
are. If you want to play with those, more info at [1], [2], and of
course [3].

I?aki

[1] https://cran.r-project.org/bin/linux/fedora/#blaslapack-switching
[2] https://docs.fedoraproject.org/en-US/packaging-guidelines/BLAS_LAPACK/#_backend_selection
[3] https://github.com/mpimd-csc/flexiblas/#documentation

On Tue, 12 Apr 2022 at 02:34, Ben Bolker <bbolker at gmail.com> wrote:
>
>    Hi folks,
>
>    Apologies for long post. (Part 1, overview; part 2, list of attempts
> so far; part 3, test code.)
>
> OVERVIEW
>
>    CRAN is reporting check errors with the latest release of lme4
> <https://cran.r-project.org/web/checks/check_results_lme4.html> that
> *may* (best guess) be caused by some linear algebra returning NA values
> rather than throwing an error as expected.
>
>    Kurt Hornik says:
>
>    > The failing check runs are using an external LAPACK 3.10.0. To be
> even more precise, Brian does not get this on Fedora with a system
> reference (netlib) 3.10 LAPACK, whereas I do on Debian with OpenBLAS.  Hth.
>
>    The relevant test code is below.
>
>    Further notes:
> https://github.com/lme4/lme4/blob/master/misc/R_lapackstuff.md ;
> https://github.com/lme4/lme4/issues/677
>
>    I think I probably know how to fix/work around the problem, but I
> would dearly love to have a test system where I could (a) confirm that
> things are failing in the way/for the reason I expect; and (b) test that
> my proposed fix actually works.
>
>    Any ideas (or reports that the test code fails on your system) would
> be greatly appreciated ...
>
>    cheers
>      Ben Bolker
> =====
>
> ATTEMPTS SO FAR (none reproduce the error)
>
> * running on r-hub debian-gcc-devel, both remotely and in a local Docker
> container. AFAICT it is running
>
> BLAS:   /opt/R-devel/lib/R/lib/libRblas.so
> LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.10.0
>
>    I was unsuccessful in using Debian's update-defaults command to mess
> around with the LAPACK version.
>
>   * running on the `rocker/verse` image from the Rocker project.
>
> The default is openblas-pthread/liblapack.so.3; I don't get any errors
> with this. I can use update-defaults to switch to liblapack.so.3.9.0
> (not 3.10.0, this is using Debian stable I think), also no errors that way.
>
> * running on my own machine (PopOS!, r-devel)
>
> This is using openblas-pthread/libopenblasp-r0.3.13.so, and I can't for
> the life of me figure out how to switch BLAS/LAPACK versions (have tried
> reinstalling both with (--with-lapack --with-blas) and without, using
> update-alternatives doesn't seem to make any difference?  Have read
> various online docs about how this is supposed to work ...
>
>
> =======
>
> TEST CODE
>
> ## 1. this succeeds for me, fails for CRAN
>
> set.seed(101)
> d <- data.frame(z=rnorm(200),
>                  f=factor(sample(1:10,200, replace=TRUE)))
> library(lme4)
> library(testthat)
> fm1 <- lmer(z~ as.numeric(f) + 1|f, d)
> fm1 at optinfo$derivs$Hessian[2,2] <- NA
> expect_warning(lme4:::checkConv(fm1 at optinfo\$derivs,
>                                  coefs=c(1,1),
>                                  ctrl=lmerControl()$checkConv,lbound=0),
>                 "Problem with Hessian check")
>
> ## 2. this throws 'system is computationally singular' for me, returns a
> vector containing NAs for CRAN (I think)
>
> dd <- list(gradient = c(0.00132136676711525, 0.00898197413334856, 0
> ), Hessian = structure(c(195.253128051758, 962.483270645142,
> 0, 962.483270645142, NA, 0, 0, 0, 6542.44775390625), dim = c(3L,
> 3L)))
> with(dd, solve(chol(Hessian),gradient))
>
> ## 3. report BLAS/LAPACK info
>
> s <- sessionInfo()
> cat(s$BLAS, s$LAPACK, sep = "\n")
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
I?aki ?car


From ru@@e||@g@@|mond @end|ng |rom gm@||@com  Tue Apr 12 16:19:34 2022
From: ru@@e||@g@@|mond @end|ng |rom gm@||@com (Russell Almond)
Date: Tue, 12 Apr 2022 10:19:34 -0400
Subject: [R-pkg-devel] Build Environment for Mac OS Catalina
In-Reply-To: <0ABF6EE1-858D-47F5-A00E-15316C608100@R-project.org>
References: <9f465b29-0d9d-a692-b356-95fc22fed9d6@gmail.com>
 <0ABF6EE1-858D-47F5-A00E-15316C608100@R-project.org>
Message-ID: <EBB0FBAE-32ED-4BFC-B414-1A372A73822C@gmail.com>

Thanks for your help.  An older version of homebrew had installed a conflicting older version of `otool` in /opt/local/bin.  Updating was not cleaning the old version.  Once I cleaned manually cleaned that out, it seemed to work.  

I posted details on stack exchange for the curious.  https://stackoverflow.com/questions/71790401/otool-is-referencing-an-old-version-of-libffi/71844231#71844231 <https://stackoverflow.com/questions/71790401/otool-is-referencing-an-old-version-of-libffi/71844231#71844231>

So my R package is now compiling!

	?Russell
(I?m not subscribed to R-SIG-Mac, so if somebody who is could forward this answer, that would be good.)
 

> On Apr 11, 2022, at 19:57, Simon Urbanek <simon.urbanek at R-project.org> wrote:
> 
> Russel,
> 
> this is Mac-specific hence more appropriate for R-SIG-Mac, so moving there.
> 
> If you are running Catalina then you have Intel Mac so for CRAN R you simply need XCode and that's it (on a clean Mac you can simply run sudo xcode-select --install). There is nothing special - the only exception is if your package contains Fortran code in which case you just install a Fortran compilers from https://mac.r-project.org/tools/gfortran-8.2-Mojave.dmg
> 
> However, since you are using Homebrew then things are a lot more complicated. Homebrew toolchains are not compatible with native Mac binaries and they create its own ecosystem which seems to be broken according to your post.
> 
> I would recommend deleting /opt/local then check if you have other incompatible libraries in /usr/local. For severe case of misconfiguration best way to remove (or move aside) everything from /usr/local and start from scratch.
> 
> Typically the easiest is to install CRAN R as that does not conflict with anything native and it does not require special tools. You can still use Homebrew to install 3rd party libraries that you may need, but make sure you do NOT install any compilers as they tend to wreak havoc on the system with the conflicting libraries. If your dependencies are supported by CRAN then you can fetch them from https://mac.r-project.org/bin/ or you can re-build them yourself using https://github.com/R-macos/recipes
> 
> Cheers,
> Simon
> 
> 
>> On 12/04/2022, at 11:30 AM, Russell Almond <russell.g.almond at gmail.com> wrote:
>> 
>> I'm doing my development on an older version of Mac OS, running Catalina.  I'm a bit confused as to what the proper development environment is because the stuff on https://mac.r-project.org/tools seems to be for either more recent or older versions of MacOS.  I also seem to have screwed up something in my toolchain (the curious can see my question at https://stackoverflow.com/questions/71790401/otool-is-referencing-an-old-version-of-libffi ).
>> 
>> I have a couple of related questions:
>> 
>> 1) What is the right set of instructions for setting up the tool chain for Mac OS Catalina?
>> 
>> 2) I'm currently using the R install from homebrew, but I thought I saw something about a different version of R that I should be using.  Is that still current advise?
>> 
>> Thanks, Googling the answers to these questions points me at some pages that are clearly out of date.
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
> 


	[[alternative HTML version deleted]]


From kev|n@r@coombe@ @end|ng |rom gm@||@com  Tue Apr 12 19:29:58 2022
From: kev|n@r@coombe@ @end|ng |rom gm@||@com (Kevin R. Coombes)
Date: Tue, 12 Apr 2022 13:29:58 -0400
Subject: [R-pkg-devel] function name conflict
Message-ID: <bc6fda62-73d0-4a33-572c-5b310119d2b2@gmail.com>

Hi,

I am writing a package that Imports several other packages. One of my 
imported packages eventually imports (through a chain of dependencies) 
"lifecycle", and another eventually imports "rlang". Both "rlang" and 
"lifecycle" define and export functions called "last_warnings".? As a 
result, when I first execute "library(MYPACKAGE)" in a script, I get a 
warning of the form
 ? " replacing previous import 'lifecycle::last_warnings' by 
'rlang::last_warnings' when loading 'tibble' "

I don't want the users of MYPACKAGE to have to see this warning (since I 
know it will spook novices). Is there anything I can do with Imports, 
Depends, or something else to prevent this warning from occurring? (I 
know that I can suppress warnings in each script, but I also don't want 
to explain to my users that they have to do that.

Note that I have tried reversing the order of the two functions that I 
import in the Imports declaration in the DESCRIPTION file, to no effect. 
I also only use one function from each of the two imported pakages, and 
they are explicitly listed in importFrom directives in the NAMESPACE file.

Thank in advance,
 ? Kevin


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Apr 12 19:50:51 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 12 Apr 2022 20:50:51 +0300
Subject: [R-pkg-devel] function name conflict
In-Reply-To: <bc6fda62-73d0-4a33-572c-5b310119d2b2@gmail.com>
References: <bc6fda62-73d0-4a33-572c-5b310119d2b2@gmail.com>
Message-ID: <20220412205051.5b3cd910@Tarkus>

On Tue, 12 Apr 2022 13:29:58 -0400
"Kevin R. Coombes" <kevin.r.coombes at gmail.com> wrote:

> I also only use one function from each of the two imported pakages,
> and they are explicitly listed in importFrom directives in the
> NAMESPACE file.

This should be the right thing to do: list them in Imports and either
use importFrom() or qualify the names of the functions you use with
their namespaces; but don't list them in Depends.

Are you sure you're not importing some other package (or listing it in
Depends) that, in turn, Depends on rlang and/or lifecycle, bringing
them into your namespace too?

Can you show us the code?

-- 
Best regards,
Ivan


From kev|n@r@coombe@ @end|ng |rom gm@||@com  Tue Apr 12 20:14:33 2022
From: kev|n@r@coombe@ @end|ng |rom gm@||@com (Kevin R. Coombes)
Date: Tue, 12 Apr 2022 14:14:33 -0400
Subject: [R-pkg-devel] function name conflict
In-Reply-To: <20220412205051.5b3cd910@Tarkus>
References: <bc6fda62-73d0-4a33-572c-5b310119d2b2@gmail.com>
 <20220412205051.5b3cd910@Tarkus>
Message-ID: <d3f5d55f-b2c8-954b-0a29-91aeac8777b4@gmail.com>

Thanks for the answer. In the process of going back to try making a 
minimal example, I realized that the problem isn't my package; it 
already occurs in one of the packages I import. (I could have sworn I 
checked this previously, but apparently missed the true culprit.) In any 
event, I'll report a bug to them and suggest more careful use of 
importFrom to get around it.

Best,
 ? Kevin

On 4/12/2022 1:50 PM, Ivan Krylov wrote:
> On Tue, 12 Apr 2022 13:29:58 -0400
> "Kevin R. Coombes" <kevin.r.coombes at gmail.com> wrote:
>
>> I also only use one function from each of the two imported pakages,
>> and they are explicitly listed in importFrom directives in the
>> NAMESPACE file.
> This should be the right thing to do: list them in Imports and either
> use importFrom() or qualify the names of the functions you use with
> their namespaces; but don't list them in Depends.
>
> Are you sure you're not importing some other package (or listing it in
> Depends) that, in turn, Depends on rlang and/or lifecycle, bringing
> them into your namespace too?
>
> Can you show us the code?
>


From edd @end|ng |rom deb|@n@org  Thu Apr 14 19:42:02 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 14 Apr 2022 12:42:02 -0500
Subject: [R-pkg-devel] pandoc missing on r-release-macos-x86_64,
 r-oldrel-macos-x86_64
Message-ID: <25176.23786.509921.829975@rob.eddelbuettel.com>


Two (related) questions:

1. Could pandoc be installed on the macoOS machines CRAN uses? If not, could
   R Core devise a way to have a registered vignette builder fail gracefully?

2. Could CRAN define and publish a minimal set of external applications
   available on each build + test machine?

Happy to help with patches or tests if there is interest.

Thanks, as always, for everything CRAN does.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Apr 14 20:16:00 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 14 Apr 2022 14:16:00 -0400
Subject: [R-pkg-devel] pandoc missing on r-release-macos-x86_64,
 r-oldrel-macos-x86_64
In-Reply-To: <25176.23786.509921.829975@rob.eddelbuettel.com>
References: <25176.23786.509921.829975@rob.eddelbuettel.com>
Message-ID: <273629f6-034a-d19b-2e55-8be130255bb4@gmail.com>

On 14/04/2022 1:42 p.m., Dirk Eddelbuettel wrote:
> 
> Two (related) questions:
> 
> 1. Could pandoc be installed on the macoOS machines CRAN uses? If not, could
>     R Core devise a way to have a registered vignette builder fail gracefully?

Can't help with the first request, but the second is really something 
that's up to the vignette writer and builder.  For example, in rgl, the 
vignettes use knitr, and they all execute this at the start:

if (!requireNamespace("rmarkdown", quietly = TRUE) ||
     !rmarkdown::pandoc_available("1.14")) {
   warning(call. = FALSE, "These vignettes assume rmarkdown and pandoc 
version 1.14.  These were not found. Older versions will not work.")
   knitr::knit_exit()
}

The warning message doesn't cause a check failure, and the knit_exit() 
call just stops processing at that point.

When I wrote this, knitr would fall back to an earlier version of 
rmarkdown that didn't need Pandoc.  I had to quit the vignette because 
that earlier version couldn't handle rgl output.

I'm not sure knitr does fail gracefully nowadays, but the point is that 
it could make a graceful exit if it wanted to.  This doesn't require R 
Core to make changes.

Duncan Murdoch

> 2. Could CRAN define and publish a minimal set of external applications
>     available on each build + test machine?
> 
> Happy to help with patches or tests if there is interest.
> 
> Thanks, as always, for everything CRAN does.
> 
> Dirk
>


From edd @end|ng |rom deb|@n@org  Thu Apr 14 20:33:53 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 14 Apr 2022 13:33:53 -0500
Subject: [R-pkg-devel] pandoc missing on r-release-macos-x86_64,
 r-oldrel-macos-x86_64
In-Reply-To: <273629f6-034a-d19b-2e55-8be130255bb4@gmail.com>
References: <25176.23786.509921.829975@rob.eddelbuettel.com>
 <273629f6-034a-d19b-2e55-8be130255bb4@gmail.com>
Message-ID: <25176.26897.70940.908995@rob.eddelbuettel.com>


On 14 April 2022 at 14:16, Duncan Murdoch wrote:
| Can't help with the first request, but the second is really something 
| that's up to the vignette writer and builder.

I understand, and resolving to brute force in a configure (shell or R) script
may be my next out, but note the second point I made.

There *is* an implicit consensus on what we can or cannot use [1]. We we
would be better off by an *explicit* list that should contain pandoc.

Dirk


[1] Though it may get dicey on particular (La)TeX styles and fonts as we
know, which I now work around as live being short and all by re-rendering
most pdf vignettes and having Sweave just slurp the premade pdf in.

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @|mon@urb@nek @end|ng |rom R-project@org  Thu Apr 14 23:03:13 2022
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Fri, 15 Apr 2022 09:03:13 +1200
Subject: [R-pkg-devel] pandoc missing on r-release-macos-x86_64,
 r-oldrel-macos-x86_64
In-Reply-To: <25176.23786.509921.829975@rob.eddelbuettel.com>
References: <25176.23786.509921.829975@rob.eddelbuettel.com>
Message-ID: <D8769A18-150B-426C-B70A-2748A87E90A5@R-project.org>

Dirk,

thanks, pandoc was only temporarily unavailable due to 4.2.0 release preparations (update of the dependencies). It was rectified since. Unfortunately the full CRAN re-build takes more than a day so the time from the build, fixing issues to reporting on the CRAN website can take a few days until we are back to incremental builds. Long story short, should be fixed.

Cheers,
Simon


> On Apr 15, 2022, at 5:42 AM, Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> 
> Two (related) questions:
> 
> 1. Could pandoc be installed on the macoOS machines CRAN uses? If not, could
>   R Core devise a way to have a registered vignette builder fail gracefully?
> 
> 2. Could CRAN define and publish a minimal set of external applications
>   available on each build + test machine?
> 
> Happy to help with patches or tests if there is interest.
> 
> Thanks, as always, for everything CRAN does.
> 
> Dirk
> 
> -- 
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> 


From edd @end|ng |rom deb|@n@org  Thu Apr 14 23:16:18 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 14 Apr 2022 16:16:18 -0500
Subject: [R-pkg-devel] pandoc missing on r-release-macos-x86_64,
 r-oldrel-macos-x86_64
In-Reply-To: <D8769A18-150B-426C-B70A-2748A87E90A5@R-project.org>
References: <25176.23786.509921.829975@rob.eddelbuettel.com>
 <D8769A18-150B-426C-B70A-2748A87E90A5@R-project.org>
Message-ID: <25176.36642.236854.769649@rob.eddelbuettel.com>


Simon,

On 15 April 2022 at 09:03, Simon Urbanek wrote:
| thanks, pandoc was only temporarily unavailable due to 4.2.0 release preparations (update of the dependencies). It was rectified since. Unfortunately the full CRAN re-build takes more than a day so the time from the build, fixing issues to reporting on the CRAN website can take a few days until we are back to incremental builds. Long story short, should be fixed.

Thank you -- it came up for two packages with html-based and pandoc-generated
vignettes having issues, and was fairly sure they worked before.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ge|bjeremy22 @end|ng |rom gm@||@com  Fri Apr 15 15:05:21 2022
From: ge|bjeremy22 @end|ng |rom gm@||@com (=?UTF-8?B?asOpcsOpbXkgR2VsYg==?=)
Date: Fri, 15 Apr 2022 09:05:21 -0400
Subject: [R-pkg-devel] CRAN check linux gcc12 Boost error
In-Reply-To: <CACSk529OUxo0ftfvhDaP6wyX==dVphWYBOovXCmSLW5q_ht7zA@mail.gmail.com>
References: <CACSk529OUxo0ftfvhDaP6wyX==dVphWYBOovXCmSLW5q_ht7zA@mail.gmail.com>
Message-ID: <CACSk528NgNk=xM0WvL3RFmk6PfKdB3Z-8_pLJA2U8ZBsgHov2Q@mail.gmail.com>

Dear all,

I send this message after a good call from I?aki Ucar. The compilation
error with gcc12 I had for spNetwork was very likely caused by some
namespace pollution :

using namespace std;

After removing it and adding std:: were needed, I was able to compile the
package on a Docker with gcc12 (https://hub.docker.com/r/rocker/r-edge/tags)
thanks to the maintainer from the package BH.

Long story short, if you use BH in your package and have some weird
compilation error with gcc12, it could be caused by namespace pollution.

All the best


Le dim. 10 avr. 2022 ? 14:32, j?r?my Gelb <gelbjeremy22 at gmail.com> a ?crit :

> Dear all,
>
> A package I am developing is encountering an error on the platform
> (r-devel-linux-x86_64-debian-gcc) since CRAN decided to force the use of
> gcc12.
>
> The error is caused by the use of the bh package and the c++ Boost
> geometry library. Boost is not supposed to be compiled with gcc12 (
> https://www.boost.org/users/history/version_1_78_0.html), but I really
> would like to continue to use it in my package.
>
> Is there a way to ensure that an "older" version (11 should be fine) is
> available and used when the package is installed and display an error
> message otherwise?
>
> Thank you !
> --
>
> *J?r?my GELB*
> Assistant de recherche ? l'*INRS*
> Docteur en ?tudes Urbaines
>
> 514 658 6054
> gelbjeremy22 at gmail.com
> F-4221 Avenue Coloniale H2W2C3 Montr?al Quebec
>


-- 

*J?r?my GELB*
Assistant de recherche ? l'*INRS*
Docteur en ?tudes Urbaines

514 658 6054
gelbjeremy22 at gmail.com
F-4221 Avenue Coloniale H2W2C3 Montr?al Quebec

	[[alternative HTML version deleted]]


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Fri Apr 15 19:16:00 2022
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Fri, 15 Apr 2022 22:46:00 +0530
Subject: [R-pkg-devel] Single page reference manual in html format
In-Reply-To: <CABFfbXtcZF8WfDu+qK30pUof01b9SFkEdTd5exw5=DjpiC49nQ@mail.gmail.com>
References: <CABFfbXtcZF8WfDu+qK30pUof01b9SFkEdTd5exw5=DjpiC49nQ@mail.gmail.com>
Message-ID: <CADfFDC4rSrnqcWQraFjTYyvA-bF-fiH=QkHcQQiTviMq4-orww@mail.gmail.com>

On Sat, Apr 9, 2022 at 8:35 PM Jeroen Ooms <jeroen at berkeley.edu> wrote:
>
> Is there a way to generate the package reference manual in a (one
> page) html format? It would be nice to access reference manuals from
> devices without a pdf reader.

I don't think so, but it would certainly be a nice feature to have.

Most of the necessary code is already there, so it shouldn't be too
difficult. We'll work on it.

Best,
-Deepayan

> We can use `R CMD Rd2pdf {pkgdir}` to generate the reference manual in
> pdf format, but afaict `R CMD Rd2text` and `R CMD rdconv` only convert
> single Rd files, and do not support generating a full package
> reference manual.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Apr 15 20:18:05 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 15 Apr 2022 14:18:05 -0400
Subject: [R-pkg-devel] Single page reference manual in html format
In-Reply-To: <CADfFDC4rSrnqcWQraFjTYyvA-bF-fiH=QkHcQQiTviMq4-orww@mail.gmail.com>
References: <CABFfbXtcZF8WfDu+qK30pUof01b9SFkEdTd5exw5=DjpiC49nQ@mail.gmail.com>
 <CADfFDC4rSrnqcWQraFjTYyvA-bF-fiH=QkHcQQiTviMq4-orww@mail.gmail.com>
Message-ID: <2c7ec1d0-cdc5-7696-5203-cbbcd46e5c52@gmail.com>

On 15/04/2022 1:16 p.m., Deepayan Sarkar wrote:
> On Sat, Apr 9, 2022 at 8:35 PM Jeroen Ooms <jeroen at berkeley.edu> wrote:
>>
>> Is there a way to generate the package reference manual in a (one
>> page) html format? It would be nice to access reference manuals from
>> devices without a pdf reader.
> 
> I don't think so, but it would certainly be a nice feature to have.
> 
> Most of the necessary code is already there, so it shouldn't be too
> difficult. We'll work on it.

I think this would be better done in a contributed package rather than 
in core R, because there are lots of customizations that people would want:

- Some people would want to execute the example code, like pkgdown does.
- Some people would want each help page in a separate HTML page (like 
pkgdown), but with links to step through all the pages (I don't think 
pkgdown does this).
- People would want to customize the look of the page, possibly with 
syntax highlighting, or just different fonts and layouts.

Adding an "all in one page" option to pkgdown might be the easiest way 
to do this, because they already have a lot of customization 
possibilities.  But there are probably other "make a web page for this 
package" packages out there.

If you do include it in base R, please at least allow the CSS to be 
customized.

Duncan Murdoch


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Fri Apr 15 20:36:19 2022
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Sat, 16 Apr 2022 00:06:19 +0530
Subject: [R-pkg-devel] Single page reference manual in html format
In-Reply-To: <2c7ec1d0-cdc5-7696-5203-cbbcd46e5c52@gmail.com>
References: <CABFfbXtcZF8WfDu+qK30pUof01b9SFkEdTd5exw5=DjpiC49nQ@mail.gmail.com>
 <CADfFDC4rSrnqcWQraFjTYyvA-bF-fiH=QkHcQQiTviMq4-orww@mail.gmail.com>
 <2c7ec1d0-cdc5-7696-5203-cbbcd46e5c52@gmail.com>
Message-ID: <CADfFDC6Vx2VNafP4SxbH8chVDosDW+4p2kbpvkGpdY+5d2kXEA@mail.gmail.com>

On Fri, Apr 15, 2022 at 11:48 PM Duncan Murdoch
<murdoch.duncan at gmail.com> wrote:
>
> On 15/04/2022 1:16 p.m., Deepayan Sarkar wrote:
> > On Sat, Apr 9, 2022 at 8:35 PM Jeroen Ooms <jeroen at berkeley.edu> wrote:
> >>
> >> Is there a way to generate the package reference manual in a (one
> >> page) html format? It would be nice to access reference manuals from
> >> devices without a pdf reader.
> >
> > I don't think so, but it would certainly be a nice feature to have.
> >
> > Most of the necessary code is already there, so it shouldn't be too
> > difficult. We'll work on it.
>
> I think this would be better done in a contributed package rather than
> in core R, because there are lots of customizations that people would want:
>
> - Some people would want to execute the example code, like pkgdown does.
> - Some people would want each help page in a separate HTML page (like
> pkgdown), but with links to step through all the pages (I don't think
> pkgdown does this).
> - People would want to customize the look of the page, possibly with
> syntax highlighting, or just different fonts and layouts.
>
> Adding an "all in one page" option to pkgdown might be the easiest way
> to do this, because they already have a lot of customization
> possibilities.  But there are probably other "make a web page for this
> package" packages out there.

Yes, that might be a good alternative.

> If you do include it in base R, please at least allow the CSS to be
> customized.

Sure. So far I was only thinking of adding a couple of arguments to Rd2HTML()

- 'standalone=TRUE' (FALSE would skip the header and footer), and possibly

- 'Rhtml=FALSE' (TRUE would wrap the examples inside <!--begin.rcode
and end.rcode-->

This should make it easier to build up whatever is desired, regardless
of what base R implements. HTMLheader() already has an option to
specify the CSS file, so that could be used to create the header.

Best,
-Deepayan

> Duncan Murdoch


From A@J@God|rey @end|ng |rom m@@@ey@@c@nz  Sat Apr 16 08:49:20 2022
From: A@J@God|rey @end|ng |rom m@@@ey@@c@nz (Jonathan Godfrey)
Date: Sat, 16 Apr 2022 06:49:20 +0000
Subject: [R-pkg-devel] Single page reference manual in html format
Message-ID: <MEAPR01MB3829FA0AE3CDA0791485047293F19@MEAPR01MB3829.ausprd01.prod.outlook.com>


Hello all,

I rarely contribute to discussions on this list, but learn lots while I hang about. I saw the first post in this thread and hoped that it would lead to a strong positive response from people I've come to respect.

The idea of removing pdf manuals is hugely attractive to my community. The LaTeX driven pdf is as good for blind people today, as it was in the 20th century. It isn't, full stop, end of story. The ability to incorporate mathematical expressions in help pages has been awesome if done in HTML with MathJax, but has made the prospect of reliance on a pdf even less attractive than it was before.

I'd really like to see someone justify the use of the single pdf manual with a 2022 lens. What is its value to the community? And what is its cost? I'm sure there was a need for the single pdf way back, but what is its real value today?

I accept that there are other reasons why a package needs CRAN to do some pdf checking, including Sweave vignettes, but should every package have to play pdf games because some do? I loved LaTeX (and Sweave) in the day, but while those tools have stood still, R markdown and HTML have materially improved my life.

Surely it ought to be possible for a package maintainer to choose the pdf or an HTML pathway. (?) It must surely be possible to accomplish sufficient tests for quality of a package's documentation with an HTML destination as it is in the current pdf manual process. To meet the CRAN standards, a single HTML construct (one file or a collection of linked ones) is all that needs to be put on the table. After all, there's only one pdf option on the table at present and no one seems to have wanted to change that in the 15+ years I've been using R. I don't see a full bells and whistles solution as necessary for CRAN's needs; anyone who wants the fancy stuff can already do that with tools like pkgdown anyway.

As a package maintainer, I tire of the reminders that I don't have qpdf installed. I don't use the tool for anything else so I won't bother to install it. I know the pdf is not too big and don't need a tool to tell me. I'd love to see a reduction in the plethora of tools and tests needed to get a package thoroughly tested. I've been tempted to remove vignettes entirely because it takes too long to repeatedly process them, but I did cull the content dramatically and put most of it in an external location. If the intention of the designed process was to make me and others use external repositories instead of fully self-contained packages with all their associated documentation, then perhaps we have success.


I'm now going to present some ideas that might seem unnecessary, but I spend a lot of my time as an advocate for disabled people. This is not the first time I've seen good people, albeit unwittingly ableist people, make life harder for disabled people in their midst. I say "unwitting" not to suggest foolishness of any kind, but blissful lack of awareness. Whether it is intentional or not, and I honestly believe it isn't, the outcome is the same in that marginalised people get marginalised.

Asking package maintainers to go out and use another package is analogous to asking one architect to employ another architect to design the wheelchair ramps to the buildings they design, or worse, ask the wheelchair user to bring their own ramps.

The best tools that provide accessibility for disabled users are the ones that no one knows they are using. R markdown to HTML creates extremely readable content and most authors won't ever know that this is so. They don't need to know, but my community benefits hugely.

The HTML resulting from R markdown vignettes and other documentation and papers almost meets the Web Content Accessibility Guidelines (WCAG) put out by the WWW Consortium, whereas the LaTeX driven pdf always fails the international standard for pdf. I can help improve the HTML, but the LaTeX community has collectively failed to get their primary output files to an acceptable standard, and I therefore cannot help.

My advice to everyone involved in running CRAN, and I do solely from a disabled person's perspective, is to make it hard to do the wrong thing, and much easier to do the right things. I'm sure that we'll all find the results are an improvement for everyone. After all, I could ask when you last chose to use the ramp in preference to the steps to get into a building.

Please consider the HTML alternative to any pdf, in any context, but especially in anything relating to R.

All the best,
Jonathan


 


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Deepayan Sarkar
Sent: Saturday, 16 April 2022 6:36 am
To: Duncan Murdoch <murdoch.duncan at gmail.com>
Cc: Jeroen Ooms <jeroen at berkeley.edu>; R Package Development <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Single page reference manual in html format

On Fri, Apr 15, 2022 at 11:48 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 15/04/2022 1:16 p.m., Deepayan Sarkar wrote:
> > On Sat, Apr 9, 2022 at 8:35 PM Jeroen Ooms <jeroen at berkeley.edu> wrote:
> >>
> >> Is there a way to generate the package reference manual in a (one
> >> page) html format? It would be nice to access reference manuals 
> >> from devices without a pdf reader.
> >
> > I don't think so, but it would certainly be a nice feature to have.
> >
> > Most of the necessary code is already there, so it shouldn't be too 
> > difficult. We'll work on it.
>
> I think this would be better done in a contributed package rather than 
> in core R, because there are lots of customizations that people would want:
>
> - Some people would want to execute the example code, like pkgdown does.
> - Some people would want each help page in a separate HTML page (like 
> pkgdown), but with links to step through all the pages (I don't think 
> pkgdown does this).
> - People would want to customize the look of the page, possibly with 
> syntax highlighting, or just different fonts and layouts.
>
> Adding an "all in one page" option to pkgdown might be the easiest way 
> to do this, because they already have a lot of customization 
> possibilities.  But there are probably other "make a web page for this 
> package" packages out there.

Yes, that might be a good alternative.

> If you do include it in base R, please at least allow the CSS to be 
> customized.

Sure. So far I was only thinking of adding a couple of arguments to Rd2HTML()

- 'standalone=TRUE' (FALSE would skip the header and footer), and possibly

- 'Rhtml=FALSE' (TRUE would wrap the examples inside <!--begin.rcode and end.rcode-->

This should make it easier to build up whatever is desired, regardless of what base R implements. HTMLheader() already has an option to specify the CSS file, so that could be used to create the header.

Best,
-Deepayan

> Duncan Murdoch

______________________________________________
R-package-devel at r-project.org mailing list
https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Ca.j.godfrey%40massey.ac.nz%7Cff60d60fe13f4d00e28e08da1f0ef10b%7C388728e1bbd0437898dcf8682e644300%7C1%7C0%7C637856446305715235%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=6e8ipmcWsUoviATnNU0KpPDzkozRKUOPMfqy2CtAgPg%3D&amp;reserved=0


From p@u|@de@n@b@||ey @end|ng |rom gm@||@com  Sun Apr 17 05:44:37 2022
From: p@u|@de@n@b@||ey @end|ng |rom gm@||@com (Paul Bailey)
Date: Sat, 16 Apr 2022 22:44:37 -0500
Subject: [R-pkg-devel] Possible Tinytex issue on CRAN Windows machines
Message-ID: <66ADAF20-F0B5-4936-984C-6F29E642E251@gmail.com>

Hi Drago,

I?m having the same issue. Did you get any resolution?

The message CRAN sent me was:
* checking re-building of vignette outputs ... [23s] WARNING
Error(s) in re-building vignettes:
--- re-building 'MML.Rmd' using rmarkdown
A new version of TeX Live has been released. If you need to install or update any LaTeX packages, you have to upgrade TinyTeX with tinytex::reinstall_tinytex(). If it fails to upgrade, you might be using a default random CTAN mirror that has not been fully synced to the main CTAN repository, and you need to wait for a few more days or use a CTAN mirror that is known to be up-to-date (see the "repository" argument on the help page ?tinytex::install_tinytex).

tlmgr.pl: Local TeX Live (2021) is older than remote repository (2022).
Cross release updates are only supported with
  update-tlmgr-latest(.sh/.exe) --update
See https://tug.org/texlive/upgrade.html for details.
! LaTeX Error: File `hyphenat.sty' not found.

! Emergency stop.
<read *> 
For the package Dire https://github.com/American-Institutes-for-Research/Dire/ <https://github.com/American-Institutes-for-Research/Dire/> 

Similar to what you said, it was Windows only.

Best,
Paul
	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Sun Apr 17 18:03:34 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sun, 17 Apr 2022 11:03:34 -0500
Subject: [R-pkg-devel] CRAN check linux gcc12 Boost error
In-Reply-To: <CACSk528NgNk=xM0WvL3RFmk6PfKdB3Z-8_pLJA2U8ZBsgHov2Q@mail.gmail.com>
References: <CACSk529OUxo0ftfvhDaP6wyX==dVphWYBOovXCmSLW5q_ht7zA@mail.gmail.com>
 <CACSk528NgNk=xM0WvL3RFmk6PfKdB3Z-8_pLJA2U8ZBsgHov2Q@mail.gmail.com>
Message-ID: <25180.14934.142761.917746@rob.eddelbuettel.com>


On 15 April 2022 at 09:05, j?r?my Gelb wrote:
| Long story short, if you use [any package] in your package and have some weird
| compilation error with gcc12, it could be caused by namespace pollution.

That is a general rule and not specific to your package and its dependencies.

Once you have large(r) packages with large(r) dependencies you also have a
higher chance of being bitten.  But we always recommended to users of Rcpp to
not use 'using namespace ...' in their packages.  It's convenient and fine
for small packages, but asking for trouble in larger ones.

Same reason, really, why we switched to enforcing STRICT_R_HEADERS.

But long story short glad you're set now.

Regards, Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Apr 18 23:40:21 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 18 Apr 2022 17:40:21 -0400
Subject: [R-pkg-devel] Single page reference manual in html format
In-Reply-To: <MEAPR01MB3829FA0AE3CDA0791485047293F19@MEAPR01MB3829.ausprd01.prod.outlook.com>
References: <MEAPR01MB3829FA0AE3CDA0791485047293F19@MEAPR01MB3829.ausprd01.prod.outlook.com>
Message-ID: <baad9633-e2ea-d185-e053-4ac8fff4ed8f@gmail.com>

This seems like a strong argument to replace the PDF manual with an HTML 
version of the same document.

Duncan Murdoch

On 16/04/2022 2:49 a.m., Jonathan Godfrey wrote:
> 
> Hello all,
> 
> I rarely contribute to discussions on this list, but learn lots while I hang about. I saw the first post in this thread and hoped that it would lead to a strong positive response from people I've come to respect.
> 
> The idea of removing pdf manuals is hugely attractive to my community. The LaTeX driven pdf is as good for blind people today, as it was in the 20th century. It isn't, full stop, end of story. The ability to incorporate mathematical expressions in help pages has been awesome if done in HTML with MathJax, but has made the prospect of reliance on a pdf even less attractive than it was before.
> 
> I'd really like to see someone justify the use of the single pdf manual with a 2022 lens. What is its value to the community? And what is its cost? I'm sure there was a need for the single pdf way back, but what is its real value today?
> 
> I accept that there are other reasons why a package needs CRAN to do some pdf checking, including Sweave vignettes, but should every package have to play pdf games because some do? I loved LaTeX (and Sweave) in the day, but while those tools have stood still, R markdown and HTML have materially improved my life.
> 
> Surely it ought to be possible for a package maintainer to choose the pdf or an HTML pathway. (?) It must surely be possible to accomplish sufficient tests for quality of a package's documentation with an HTML destination as it is in the current pdf manual process. To meet the CRAN standards, a single HTML construct (one file or a collection of linked ones) is all that needs to be put on the table. After all, there's only one pdf option on the table at present and no one seems to have wanted to change that in the 15+ years I've been using R. I don't see a full bells and whistles solution as necessary for CRAN's needs; anyone who wants the fancy stuff can already do that with tools like pkgdown anyway.
> 
> As a package maintainer, I tire of the reminders that I don't have qpdf installed. I don't use the tool for anything else so I won't bother to install it. I know the pdf is not too big and don't need a tool to tell me. I'd love to see a reduction in the plethora of tools and tests needed to get a package thoroughly tested. I've been tempted to remove vignettes entirely because it takes too long to repeatedly process them, but I did cull the content dramatically and put most of it in an external location. If the intention of the designed process was to make me and others use external repositories instead of fully self-contained packages with all their associated documentation, then perhaps we have success.
> 
> 
> I'm now going to present some ideas that might seem unnecessary, but I spend a lot of my time as an advocate for disabled people. This is not the first time I've seen good people, albeit unwittingly ableist people, make life harder for disabled people in their midst. I say "unwitting" not to suggest foolishness of any kind, but blissful lack of awareness. Whether it is intentional or not, and I honestly believe it isn't, the outcome is the same in that marginalised people get marginalised.
> 
> Asking package maintainers to go out and use another package is analogous to asking one architect to employ another architect to design the wheelchair ramps to the buildings they design, or worse, ask the wheelchair user to bring their own ramps.
> 
> The best tools that provide accessibility for disabled users are the ones that no one knows they are using. R markdown to HTML creates extremely readable content and most authors won't ever know that this is so. They don't need to know, but my community benefits hugely.
> 
> The HTML resulting from R markdown vignettes and other documentation and papers almost meets the Web Content Accessibility Guidelines (WCAG) put out by the WWW Consortium, whereas the LaTeX driven pdf always fails the international standard for pdf. I can help improve the HTML, but the LaTeX community has collectively failed to get their primary output files to an acceptable standard, and I therefore cannot help.
> 
> My advice to everyone involved in running CRAN, and I do solely from a disabled person's perspective, is to make it hard to do the wrong thing, and much easier to do the right things. I'm sure that we'll all find the results are an improvement for everyone. After all, I could ask when you last chose to use the ramp in preference to the steps to get into a building.
> 
> Please consider the HTML alternative to any pdf, in any context, but especially in anything relating to R.
> 
> All the best,
> Jonathan
> 
> 
>   
> 
> 
> -----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Deepayan Sarkar
> Sent: Saturday, 16 April 2022 6:36 am
> To: Duncan Murdoch <murdoch.duncan at gmail.com>
> Cc: Jeroen Ooms <jeroen at berkeley.edu>; R Package Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] Single page reference manual in html format
> 
> On Fri, Apr 15, 2022 at 11:48 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> On 15/04/2022 1:16 p.m., Deepayan Sarkar wrote:
>>> On Sat, Apr 9, 2022 at 8:35 PM Jeroen Ooms <jeroen at berkeley.edu> wrote:
>>>>
>>>> Is there a way to generate the package reference manual in a (one
>>>> page) html format? It would be nice to access reference manuals
>>>> from devices without a pdf reader.
>>>
>>> I don't think so, but it would certainly be a nice feature to have.
>>>
>>> Most of the necessary code is already there, so it shouldn't be too
>>> difficult. We'll work on it.
>>
>> I think this would be better done in a contributed package rather than
>> in core R, because there are lots of customizations that people would want:
>>
>> - Some people would want to execute the example code, like pkgdown does.
>> - Some people would want each help page in a separate HTML page (like
>> pkgdown), but with links to step through all the pages (I don't think
>> pkgdown does this).
>> - People would want to customize the look of the page, possibly with
>> syntax highlighting, or just different fonts and layouts.
>>
>> Adding an "all in one page" option to pkgdown might be the easiest way
>> to do this, because they already have a lot of customization
>> possibilities.  But there are probably other "make a web page for this
>> package" packages out there.
> 
> Yes, that might be a good alternative.
> 
>> If you do include it in base R, please at least allow the CSS to be
>> customized.
> 
> Sure. So far I was only thinking of adding a couple of arguments to Rd2HTML()
> 
> - 'standalone=TRUE' (FALSE would skip the header and footer), and possibly
> 
> - 'Rhtml=FALSE' (TRUE would wrap the examples inside <!--begin.rcode and end.rcode-->
> 
> This should make it easier to build up whatever is desired, regardless of what base R implements. HTMLheader() already has an option to specify the CSS file, so that could be used to create the header.
> 
> Best,
> -Deepayan
> 
>> Duncan Murdoch
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Ca.j.godfrey%40massey.ac.nz%7Cff60d60fe13f4d00e28e08da1f0ef10b%7C388728e1bbd0437898dcf8682e644300%7C1%7C0%7C637856446305715235%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=6e8ipmcWsUoviATnNU0KpPDzkozRKUOPMfqy2CtAgPg%3D&amp;reserved=0
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From rmh @end|ng |rom temp|e@edu  Mon Apr 18 23:56:46 2022
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Mon, 18 Apr 2022 21:56:46 +0000
Subject: [R-pkg-devel] [External] Single page reference manual in html
 format
In-Reply-To: <baad9633-e2ea-d185-e053-4ac8fff4ed8f@gmail.com>
References: <MEAPR01MB3829FA0AE3CDA0791485047293F19@MEAPR01MB3829.ausprd01.prod.outlook.com>
 <baad9633-e2ea-d185-e053-4ac8fff4ed8f@gmail.com>
Message-ID: <C2A4ED5C-2A02-49A2-9838-A916ECD981A7@temple.edu>

I am pleased to have an html option for all the reasons that have been discussed.

I am opposed to dropping the pdf version.  I find it much more convenient to have a document where the
paragraphs and figures stay where you put them, and not wander around based on accidents of window size and magnification.  I like stable page numbers as well as section numbers.

Having both html and pdf would be consistent with the other documentation:

> system(paste("open", file.path(base::system.file(), "../../doc/manual/R-exts.pdf")))
> system(paste("open", file.path(base::system.file(), "../../doc/manual/R-exts.html")))
> 

Rich

> On Apr 18, 2022, at 17:40, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> This seems like a strong argument to replace the PDF manual with an HTML version of the same document.
> 
> Duncan Murdoch
> 
> On 16/04/2022 2:49 a.m., Jonathan Godfrey wrote:
>> Hello all,
>> I rarely contribute to discussions on this list, but learn lots while I hang about. I saw the first post in this thread and hoped that it would lead to a strong positive response from people I've come to respect.
>> The idea of removing pdf manuals is hugely attractive to my community. The LaTeX driven pdf is as good for blind people today, as it was in the 20th century. It isn't, full stop, end of story. The ability to incorporate mathematical expressions in help pages has been awesome if done in HTML with MathJax, but has made the prospect of reliance on a pdf even less attractive than it was before.
>> I'd really like to see someone justify the use of the single pdf manual with a 2022 lens. What is its value to the community? And what is its cost? I'm sure there was a need for the single pdf way back, but what is its real value today?
>> I accept that there are other reasons why a package needs CRAN to do some pdf checking, including Sweave vignettes, but should every package have to play pdf games because some do? I loved LaTeX (and Sweave) in the day, but while those tools have stood still, R markdown and HTML have materially improved my life.
>> Surely it ought to be possible for a package maintainer to choose the pdf or an HTML pathway. (?) It must surely be possible to accomplish sufficient tests for quality of a package's documentation with an HTML destination as it is in the current pdf manual process. To meet the CRAN standards, a single HTML construct (one file or a collection of linked ones) is all that needs to be put on the table. After all, there's only one pdf option on the table at present and no one seems to have wanted to change that in the 15+ years I've been using R. I don't see a full bells and whistles solution as necessary for CRAN's needs; anyone who wants the fancy stuff can already do that with tools like pkgdown anyway.
>> As a package maintainer, I tire of the reminders that I don't have qpdf installed. I don't use the tool for anything else so I won't bother to install it. I know the pdf is not too big and don't need a tool to tell me. I'd love to see a reduction in the plethora of tools and tests needed to get a package thoroughly tested. I've been tempted to remove vignettes entirely because it takes too long to repeatedly process them, but I did cull the content dramatically and put most of it in an external location. If the intention of the designed process was to make me and others use external repositories instead of fully self-contained packages with all their associated documentation, then perhaps we have success.
>> I'm now going to present some ideas that might seem unnecessary, but I spend a lot of my time as an advocate for disabled people. This is not the first time I've seen good people, albeit unwittingly ableist people, make life harder for disabled people in their midst. I say "unwitting" not to suggest foolishness of any kind, but blissful lack of awareness. Whether it is intentional or not, and I honestly believe it isn't, the outcome is the same in that marginalised people get marginalised.
>> Asking package maintainers to go out and use another package is analogous to asking one architect to employ another architect to design the wheelchair ramps to the buildings they design, or worse, ask the wheelchair user to bring their own ramps.
>> The best tools that provide accessibility for disabled users are the ones that no one knows they are using. R markdown to HTML creates extremely readable content and most authors won't ever know that this is so. They don't need to know, but my community benefits hugely.
>> The HTML resulting from R markdown vignettes and other documentation and papers almost meets the Web Content Accessibility Guidelines (WCAG) put out by the WWW Consortium, whereas the LaTeX driven pdf always fails the international standard for pdf. I can help improve the HTML, but the LaTeX community has collectively failed to get their primary output files to an acceptable standard, and I therefore cannot help.
>> My advice to everyone involved in running CRAN, and I do solely from a disabled person's perspective, is to make it hard to do the wrong thing, and much easier to do the right things. I'm sure that we'll all find the results are an improvement for everyone. After all, I could ask when you last chose to use the ramp in preference to the steps to get into a building.
>> Please consider the HTML alternative to any pdf, in any context, but especially in anything relating to R.
>> All the best,
>> Jonathan
>> -----Original Message-----
>> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Deepayan Sarkar
>> Sent: Saturday, 16 April 2022 6:36 am
>> To: Duncan Murdoch <murdoch.duncan at gmail.com>
>> Cc: Jeroen Ooms <jeroen at berkeley.edu>; R Package Development <r-package-devel at r-project.org>
>> Subject: Re: [R-pkg-devel] Single page reference manual in html format
>> On Fri, Apr 15, 2022 at 11:48 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>> 
>>> On 15/04/2022 1:16 p.m., Deepayan Sarkar wrote:
>>>> On Sat, Apr 9, 2022 at 8:35 PM Jeroen Ooms <jeroen at berkeley.edu> wrote:
>>>>> 
>>>>> Is there a way to generate the package reference manual in a (one
>>>>> page) html format? It would be nice to access reference manuals
>>>>> from devices without a pdf reader.
>>>> 
>>>> I don't think so, but it would certainly be a nice feature to have.
>>>> 
>>>> Most of the necessary code is already there, so it shouldn't be too
>>>> difficult. We'll work on it.
>>> 
>>> I think this would be better done in a contributed package rather than
>>> in core R, because there are lots of customizations that people would want:
>>> 
>>> - Some people would want to execute the example code, like pkgdown does.
>>> - Some people would want each help page in a separate HTML page (like
>>> pkgdown), but with links to step through all the pages (I don't think
>>> pkgdown does this).
>>> - People would want to customize the look of the page, possibly with
>>> syntax highlighting, or just different fonts and layouts.
>>> 
>>> Adding an "all in one page" option to pkgdown might be the easiest way
>>> to do this, because they already have a lot of customization
>>> possibilities. But there are probably other "make a web page for this
>>> package" packages out there.
>> Yes, that might be a good alternative.
>>> If you do include it in base R, please at least allow the CSS to be
>>> customized.
>> Sure. So far I was only thinking of adding a couple of arguments to Rd2HTML()
>> - 'standalone=TRUE' (FALSE would skip the header and footer), and possibly
>> - 'Rhtml=FALSE' (TRUE would wrap the examples inside <!--begin.rcode and end.rcode-->
>> This should make it easier to build up whatever is desired, regardless of what base R implements. HTMLheader() already has an option to specify the CSS file, so that could be used to create the header.
>> Best,
>> -Deepayan
>>> Duncan Murdoch
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Crmh%40temple.edu%7Cfddb832d0f6249df7a8308da218415f8%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637859148722862947%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=4Q3QGTxbnNCVA1fTednKsOL6iQ0KzR90xH%2BGrEIe2bM%3D&amp;reserved=0
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Crmh%40temple.edu%7Cfddb832d0f6249df7a8308da218415f8%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637859148722862947%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=4Q3QGTxbnNCVA1fTednKsOL6iQ0KzR90xH%2BGrEIe2bM%3D&amp;reserved=0
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=04%7C01%7Crmh%40temple.edu%7Cfddb832d0f6249df7a8308da218415f8%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637859148722862947%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=4Q3QGTxbnNCVA1fTednKsOL6iQ0KzR90xH%2BGrEIe2bM%3D&amp;reserved=0


From r@turner @end|ng |rom @uck|@nd@@c@nz  Tue Apr 19 01:19:09 2022
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Tue, 19 Apr 2022 11:19:09 +1200
Subject: [R-pkg-devel] [External] Single page reference manual in html
 format
In-Reply-To: <C2A4ED5C-2A02-49A2-9838-A916ECD981A7@temple.edu>
References: <MEAPR01MB3829FA0AE3CDA0791485047293F19@MEAPR01MB3829.ausprd01.prod.outlook.com>
 <baad9633-e2ea-d185-e053-4ac8fff4ed8f@gmail.com>
 <C2A4ED5C-2A02-49A2-9838-A916ECD981A7@temple.edu>
Message-ID: <20220419111909.18def3ea@rolf-Latitude-E7470>


On Mon, 18 Apr 2022 21:56:46 +0000
"Richard M. Heiberger" <rmh at temple.edu> wrote:

> I am pleased to have an html option for all the reasons that have
> been discussed.
> 
> I am opposed to dropping the pdf version.  I find it much more
> convenient to have a document where the paragraphs and figures stay
> where you put them, and not wander around based on accidents of
> window size and magnification.  I like stable page numbers as well as
> section numbers.
> 
> Having both html and pdf would be consistent with the other
> documentation.

<SNIP>

+1

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Apr 19 09:34:59 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 19 Apr 2022 10:34:59 +0300
Subject: [R-pkg-devel] Single page reference manual in html format
In-Reply-To: <MEAPR01MB3829FA0AE3CDA0791485047293F19@MEAPR01MB3829.ausprd01.prod.outlook.com>
References: <MEAPR01MB3829FA0AE3CDA0791485047293F19@MEAPR01MB3829.ausprd01.prod.outlook.com>
Message-ID: <20220419103459.1c012ef6@Tarkus>

Dear Jonathan,

I appreciate your struggle for better accessibility (and your advice to
choose HTML over PDF for accessibility reasons is well taken), but
re-reading your message now, I'm not sure whether it's about the manual
or the vignettes of a package.

It may be not publicised widely enough, but there is HTML documentation
hosted for every CRAN package, including (as of R-devel that is to
become R-4.2.0) KaTeX-rendered math (or MathJax, if you set a few
options on your computer). Would it help if
https://CRAN.R-project.org/package=Dodge had a link to
https://search.r-project.org/CRAN/refmans/Dodge/html/00Index.html, in
addition to the PDF manual? It's probably easier to argue in favour of
adding something than replacing or removing it.

By the way, is KaTeX-rendered mathematics accessible enough, or would
there be something you think should be changed? See
https://search.r-project.org/R/refmans/stats/html/nls.html for an
example.

On Sat, 16 Apr 2022 06:49:20 +0000
Jonathan Godfrey <A.J.Godfrey at massey.ac.nz> wrote:

> Surely it ought to be possible for a package maintainer to choose the
> pdf or an HTML pathway.

This is probably a reading comprehension problem on my part, but is this
about the manual (which is written in Rd and automatically translated
to HTML/PDF/plain text as needed by the user), or the vignettes (where
the package maintainer currently has to depend on a third-party package
to use HTML)? Sure, Rd is a crazy, hard to parse language, but it's
possible to author decent manuals without having to take all the edge
cases into account.

> It must surely be possible to accomplish sufficient tests for
> quality of a package's documentation with an HTML destination as it
> is in the current pdf manual process.

In R-4.2.0 (and in current R-devel already), there will be HTML Tidy
checks to ensure the quality of all manual pages rendered to HTML. They
don't produce any warnings if Tidy is not installed. Some other checks
(e.g. for URL validity) also don't warn if their dependencies (e.g.
"xml2" package) aren't installed, making it possible to miss a problem
before CRAN submission.

> To meet the CRAN standards, a single HTML construct (one file or a
> collection of linked ones) is all that needs to be put on the table.
> After all, there's only one pdf option on the table at present and no
> one seems to have wanted to change that in the 15+ years I've been
> using R. I don't see a full bells and whistles solution as necessary
> for CRAN's needs; anyone who wants the fancy stuff can already do
> that with tools like pkgdown anyway.

See https://github.com/rstats-gsod/gsod2022/issues/5 for a related
project. I'm not sure how it's progressing, but one of the ideas is to
bring an HTML vignette engine into core R. The new HTML manual
enhancements ("run examples in the browser") already depend on knitr.
Perhaps a few versions of R later, it'll become a Recommended package.

-- 
Best regards,
Ivan


From A@J@God|rey @end|ng |rom m@@@ey@@c@nz  Tue Apr 19 10:25:44 2022
From: A@J@God|rey @end|ng |rom m@@@ey@@c@nz (Jonathan Godfrey)
Date: Tue, 19 Apr 2022 08:25:44 +0000
Subject: [R-pkg-devel] FW:  Single page reference manual in html format
In-Reply-To: <MEAPR01MB38295159F83BFFED97C766DF93F29@MEAPR01MB3829.ausprd01.prod.outlook.com>
References: <MEAPR01MB3829FA0AE3CDA0791485047293F19@MEAPR01MB3829.ausprd01.prod.outlook.com>
 <20220419103459.1c012ef6@Tarkus>
 <MEAPR01MB38295159F83BFFED97C766DF93F29@MEAPR01MB3829.ausprd01.prod.outlook.com>
Message-ID: <MEAPR01MB38290FEC53DEA2F6CF79BE1093F29@MEAPR01MB3829.ausprd01.prod.outlook.com>



-----Original Message-----
From: Jonathan Godfrey 
Sent: Tuesday, 19 April 2022 8:24 pm
To: 'Ivan Krylov' <krylov.r00t at gmail.com>
Subject: RE: [R-pkg-devel] Single page reference manual in html format

Hello Ivan and all,


Thanks for the pointers. I love some of the little surprises I get when reading contributions to this list, and will now look forward to v4.2.0 albeit that it arrives in the middle of a southern hemisphere semester in which I work with less experienced R users, who always seem to share the love of a version upgrade with me. Let's not digress too far though...


My initial reason for commenting on anything pdf v HTML was for the help pages and single file manual historically generated, but the comments and preferences apply to vignettes and ultimately, to every other document.

Can I acknowledge the R Journal moving to HTML, primarily for reasons not relating to accessibility, but improving access nonetheless. Numerous other journals are now available in both HTML and pdf. Different publishers have included differing levels of quality in terms of full rendering of content in HTML, but we see a lot of progress being made, even with their back-catalogues.

WRT R documentation: I am well aware that the opportunities for having all documentation in both HTML and pdf is going to be impractical if the wrong starting point and processing is used. An Rmd file can go to pdf and to HTML, but an Rnw file won't always do so. I have tinkered with various processing of Rnw vignettes into HTML, but the outcomes are rather hit and miss. I'm continuing this work in order to support my community.


This sort of trouble automatically pushes users like me towards the packages and tools that present documentation in the consumers' format. For my community that is much more readily used if it is HTML, and the packages that do use pkgdown and authors that use bookdown really are making a difference for me and other blind users, and I bet most of them don't know that this is happening.  The explosion in the amount of readily available (accessible) and readable (accessible) content is life-changing for blind students and professionals alike. N.B. my intentional observation that "accessible" has a multitude of interpretations and I therefore try to avoid the term as much as possible nowadays. 

WRT packages using MathJax: your example has some simple mathematical elements, and one of them has a known irritation. My screen reading software and MathJax don't render the character created by \epsilon, only determined by a quick request of the closest sighted human. I'm not sure if that proves the accessibility of the specific method of creating and rendering such content or not.

BTW:  Using \varepsilon is preferred, but this is rendered in my ears as "epsilon" This is just something blind users have become accustomed to doing in our own documents, and while we have not been able to use the print-ready format, many blind users have resorted to reading the source files themselves. That does make for some trouble of course, but the options have been trouble or a vacuum.  This is why I said the HTML is almost meeting the WCAG.

There are other imperfections with MathJax rendering for screen readers, but none of them are as commonplace in statistics and data science documents.

I hope I've addressed your comments and questions without distracting myself and others, but if something else needs addressing, please do ask.
Jonathan


-----Original Message-----
From: Ivan Krylov <krylov.r00t at gmail.com> 
Sent: Tuesday, 19 April 2022 7:35 pm
To: Jonathan Godfrey <A.J.Godfrey at massey.ac.nz>
Cc: R-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Single page reference manual in html format

Dear Jonathan,

I appreciate your struggle for better accessibility (and your advice to choose HTML over PDF for accessibility reasons is well taken), but re-reading your message now, I'm not sure whether it's about the manual or the vignettes of a package.

It may be not publicised widely enough, but there is HTML documentation hosted for every CRAN package, including (as of R-devel that is to become R-4.2.0) KaTeX-rendered math (or MathJax, if you set a few options on your computer). Would it help if
https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fpackage%3DDodge&amp;data=04%7C01%7CA.J.Godfrey%40massey.ac.nz%7C526b5d381ea048ef59b008da21d71e4f%7C388728e1bbd0437898dcf8682e644300%7C1%7C0%7C637859505066354863%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=3FYFVAz9%2BUl7XDODDyrUyEi5lHk1X3xMS%2B3sn7Di5DE%3D&amp;reserved=0 had a link to https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fsearch.r-project.org%2FCRAN%2Frefmans%2FDodge%2Fhtml%2F00Index.html&amp;data=04%7C01%7CA.J.Godfrey%40massey.ac.nz%7C526b5d381ea048ef59b008da21d71e4f%7C388728e1bbd0437898dcf8682e644300%7C1%7C0%7C637859505066354863%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=6l%2Bh0ivWItyYOSkAjN%2BDG%2BYL2R%2F1KRk74zBQNZg%2FAB0%3D&amp;reserved=0, in addition to the PDF manual? It's probably easier to argue in favour of adding something than replacing or removing it.

By the way, is KaTeX-rendered mathematics accessible enough, or would there be something you think should be changed? See
https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fsearch.r-project.org%2FR%2Frefmans%2Fstats%2Fhtml%2Fnls.html&amp;data=04%7C01%7CA.J.Godfrey%40massey.ac.nz%7C526b5d381ea048ef59b008da21d71e4f%7C388728e1bbd0437898dcf8682e644300%7C1%7C0%7C637859505066354863%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=d5RQv3Zutpmid2hzDGBavJjGeqwegOVazkyJRk%2Fcejg%3D&amp;reserved=0 for an example.

On Sat, 16 Apr 2022 06:49:20 +0000
Jonathan Godfrey <A.J.Godfrey at massey.ac.nz> wrote:

> Surely it ought to be possible for a package maintainer to choose the 
> pdf or an HTML pathway.

This is probably a reading comprehension problem on my part, but is this about the manual (which is written in Rd and automatically translated to HTML/PDF/plain text as needed by the user), or the vignettes (where the package maintainer currently has to depend on a third-party package to use HTML)? Sure, Rd is a crazy, hard to parse language, but it's possible to author decent manuals without having to take all the edge cases into account.

> It must surely be possible to accomplish sufficient tests for quality 
> of a package's documentation with an HTML destination as it is in the 
> current pdf manual process.

In R-4.2.0 (and in current R-devel already), there will be HTML Tidy checks to ensure the quality of all manual pages rendered to HTML. They don't produce any warnings if Tidy is not installed. Some other checks (e.g. for URL validity) also don't warn if their dependencies (e.g.
"xml2" package) aren't installed, making it possible to miss a problem before CRAN submission.

> To meet the CRAN standards, a single HTML construct (one file or a 
> collection of linked ones) is all that needs to be put on the table.
> After all, there's only one pdf option on the table at present and no 
> one seems to have wanted to change that in the 15+ years I've been 
> using R. I don't see a full bells and whistles solution as necessary 
> for CRAN's needs; anyone who wants the fancy stuff can already do that 
> with tools like pkgdown anyway.

See https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Frstats-gsod%2Fgsod2022%2Fissues%2F5&amp;data=04%7C01%7CA.J.Godfrey%40massey.ac.nz%7C526b5d381ea048ef59b008da21d71e4f%7C388728e1bbd0437898dcf8682e644300%7C1%7C0%7C637859505066354863%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=sikKC2mU1D6Uw1gJz9deQl%2FRoz0pz%2B58nEsalcNxwB4%3D&amp;reserved=0 for a related project. I'm not sure how it's progressing, but one of the ideas is to bring an HTML vignette engine into core R. The new HTML manual enhancements ("run examples in the browser") already depend on knitr.
Perhaps a few versions of R later, it'll become a Recommended package.

--
Best regards,
Ivan


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Thu Apr 21 03:16:28 2022
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Wed, 20 Apr 2022 20:16:28 -0500
Subject: [R-pkg-devel] GitHub error
Message-ID: <2cc5326b-ec6f-1440-750b-398d6a65c8a6@effectivedefense.org>

Hello, All:


	  When I do "git pull", I get "error: Your local changes to the 
following files would be overwritten by merge: .DS_Store .gitignore 
inst/.DS_Store".


	  I've done "git rm --cached .DS_Store", etc., which some web page told 
me would remove ".DS_Store" from GitHub but not from my local copy. 
Then when I try, "git push", I get "! [rejected] // master -> master 
(non-fast-forward) // error: failed to push some refs to 
'github.com:JamesRamsay5/fda.git'".


	  What do you suggest?  Manually delete those files from the GitHub 
repository?


	  Thanks,
	  Spencer Graves


p.s.  This is with "https://github.com/JamesRamsay5/fda".


From @kw@|mmo @end|ng |rom gm@||@com  Thu Apr 21 03:22:59 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Wed, 20 Apr 2022 21:22:59 -0400
Subject: [R-pkg-devel] GitHub error
In-Reply-To: <2cc5326b-ec6f-1440-750b-398d6a65c8a6@effectivedefense.org>
References: <2cc5326b-ec6f-1440-750b-398d6a65c8a6@effectivedefense.org>
Message-ID: <CAPcHnpTo1KEyMXCDhC-k+AVBn=nDbFB_5cMqffQfPFoJU_eA-A@mail.gmail.com>

Not really the place for this type of thing, but here's what I'd do:

add .DS_Store to your .gitignore file, this should ignore both
.DS_Store and inst/.DS_Store
delete both .DS_Store files from your repository
then try to pull again. You can use --force in git push, that should
force them to combine, ignoring the overwrite warning

On Wed, Apr 20, 2022 at 9:17 PM Spencer Graves
<spencer.graves at effectivedefense.org> wrote:
>
> Hello, All:
>
>
>           When I do "git pull", I get "error: Your local changes to the
> following files would be overwritten by merge: .DS_Store .gitignore
> inst/.DS_Store".
>
>
>           I've done "git rm --cached .DS_Store", etc., which some web page told
> me would remove ".DS_Store" from GitHub but not from my local copy.
> Then when I try, "git push", I get "! [rejected] // master -> master
> (non-fast-forward) // error: failed to push some refs to
> 'github.com:JamesRamsay5/fda.git'".
>
>
>           What do you suggest?  Manually delete those files from the GitHub
> repository?
>
>
>           Thanks,
>           Spencer Graves
>
>
> p.s.  This is with "https://github.com/JamesRamsay5/fda".
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Thu Apr 21 03:33:14 2022
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Wed, 20 Apr 2022 20:33:14 -0500
Subject: [R-pkg-devel] GitHub error
In-Reply-To: <CAPcHnpTo1KEyMXCDhC-k+AVBn=nDbFB_5cMqffQfPFoJU_eA-A@mail.gmail.com>
References: <2cc5326b-ec6f-1440-750b-398d6a65c8a6@effectivedefense.org>
 <CAPcHnpTo1KEyMXCDhC-k+AVBn=nDbFB_5cMqffQfPFoJU_eA-A@mail.gmail.com>
Message-ID: <1d08d8fc-10a1-f5dc-fca5-924c53529034@effectivedefense.org>

Hi, Andrew:  Thanks.  I think that was exactly what I needed:  I was in 
particular unsure about "git push --force".  Spencer Graves


On 4/20/22 8:22 PM, Andrew Simmons wrote:
> Not really the place for this type of thing, but here's what I'd do:
> 
> add .DS_Store to your .gitignore file, this should ignore both
> .DS_Store and inst/.DS_Store
> delete both .DS_Store files from your repository
> then try to pull again. You can use --force in git push, that should
> force them to combine, ignoring the overwrite warning
> 
> On Wed, Apr 20, 2022 at 9:17 PM Spencer Graves
> <spencer.graves at effectivedefense.org> wrote:
>>
>> Hello, All:
>>
>>
>>            When I do "git pull", I get "error: Your local changes to the
>> following files would be overwritten by merge: .DS_Store .gitignore
>> inst/.DS_Store".
>>
>>
>>            I've done "git rm --cached .DS_Store", etc., which some web page told
>> me would remove ".DS_Store" from GitHub but not from my local copy.
>> Then when I try, "git push", I get "! [rejected] // master -> master
>> (non-fast-forward) // error: failed to push some refs to
>> 'github.com:JamesRamsay5/fda.git'".
>>
>>
>>            What do you suggest?  Manually delete those files from the GitHub
>> repository?
>>
>>
>>            Thanks,
>>            Spencer Graves
>>
>>
>> p.s.  This is with "https://github.com/JamesRamsay5/fda".
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Apr 21 08:42:44 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 21 Apr 2022 09:42:44 +0300
Subject: [R-pkg-devel] GitHub error
In-Reply-To: <2cc5326b-ec6f-1440-750b-398d6a65c8a6@effectivedefense.org>
References: <2cc5326b-ec6f-1440-750b-398d6a65c8a6@effectivedefense.org>
Message-ID: <20220421094244.3fe46f15@parabola>

? Wed, 20 Apr 2022 20:16:28 -0500
Spencer Graves <spencer.graves at effectivedefense.org> ?????:

> 	  When I do "git pull", I get "error: Your local changes to
> the following files would be overwritten by merge: .DS_Store
> .gitignore inst/.DS_Store".

Translating this back into human language, the histories tracked by
your local copy of the Git repo and by GitHub have diverged. Locally,
your macOS computer created a .DS_Store directory and performed some
changes there (it's much better to avoid tracking it in Git, as it's
useless to the consumers of the repository, and to list it in
.gitignore), and you also changed .gitignore, but haven't committed
those changes. On the GitHub side, you or some other contributor
performed some changes to the same files and committed them. They might
be the same changes, but Git refuses to overwrite local changes you
haven't committed.

> I've done "git rm --cached .DS_Store", etc., which some web page told
> me would remove ".DS_Store" from GitHub but not from my local copy.

You should probably (1) commit the changes you performed to the
local copy so that git pull would proceed; (2) resolve any merge
conflicts resulting from the inevitable merge; (3) git rm -r --cached
.DS_Store from your repo and list .DS_Store in .gitignore; (4) commit
your changes un-tracking .DS_Store and ignoring it from now on; (5) push
them to GitHub.

> Then when I try, "git push", I get "! [rejected] //
> master -> master (non-fast-forward) // error: failed to push some
> refs to 'github.com:JamesRamsay5/fda.git'".

Since your "master" branches have diverged, GitHub will refuse to accept
your commits that aren't created on top of GitHub's head of the
"master" branch. git push --force *will* make the error go away, but it
will also overwrite history and _lose the changes_ that GitHub had but
your local copy of the repository did not.

I can't give any links to good Git merging tutorials besides the Git
Book [*], but when working with Git, it's really necessary to learn
merging in order to avoid losing data to history rewrites by git push
--force and the like.

-- 
Best regards,
Ivan

[*]
https://git-scm.com/book/en/v2/Git-Branching-Basic-Branching-and-Merging
https://git-scm.com/book/en/v2/Git-Tools-Advanced-Merging


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Thu Apr 21 11:12:02 2022
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Thu, 21 Apr 2022 04:12:02 -0500
Subject: [R-pkg-devel] GitHub error
In-Reply-To: <20220421094244.3fe46f15@parabola>
References: <2cc5326b-ec6f-1440-750b-398d6a65c8a6@effectivedefense.org>
 <20220421094244.3fe46f15@parabola>
Message-ID: <8c362e87-1df9-46c8-1e4a-681ce0778c8c@effectivedefense.org>

Hi, Ivan:  Thanks for the reply.  I actually added .DS_Store and another 
file to .gitignore and ran "git rm -r --cached .DS_Store", etc., to 
remove them from git coverage.  When git wouldn't let me "git pull" and 
"git push" to fix the problem on GitHub, I found those files in the 
GitHub repository and manually removed them.  That seemed to work, but I 
found that those files were still listed as "Changes to be committed", 
so I committed them.  If I had done the commit earlier, I may not have 
had to remove the files manually, but I don't know that.  Thanks again. 
  Spencer


On 4/21/22 1:42 AM, Ivan Krylov wrote:
> ? Wed, 20 Apr 2022 20:16:28 -0500
> Spencer Graves <spencer.graves at effectivedefense.org> ?????:
> 
>> 	  When I do "git pull", I get "error: Your local changes to
>> the following files would be overwritten by merge: .DS_Store
>> .gitignore inst/.DS_Store".
> 
> Translating this back into human language, the histories tracked by
> your local copy of the Git repo and by GitHub have diverged. Locally,
> your macOS computer created a .DS_Store directory and performed some
> changes there (it's much better to avoid tracking it in Git, as it's
> useless to the consumers of the repository, and to list it in
> .gitignore), and you also changed .gitignore, but haven't committed
> those changes. On the GitHub side, you or some other contributor
> performed some changes to the same files and committed them. They might
> be the same changes, but Git refuses to overwrite local changes you
> haven't committed.
> 
>> I've done "git rm --cached .DS_Store", etc., which some web page told
>> me would remove ".DS_Store" from GitHub but not from my local copy.
> 
> You should probably (1) commit the changes you performed to the
> local copy so that git pull would proceed; (2) resolve any merge
> conflicts resulting from the inevitable merge; (3) git rm -r --cached
> .DS_Store from your repo and list .DS_Store in .gitignore; (4) commit
> your changes un-tracking .DS_Store and ignoring it from now on; (5) push
> them to GitHub.
> 
>> Then when I try, "git push", I get "! [rejected] //
>> master -> master (non-fast-forward) // error: failed to push some
>> refs to 'github.com:JamesRamsay5/fda.git'".
> 
> Since your "master" branches have diverged, GitHub will refuse to accept
> your commits that aren't created on top of GitHub's head of the
> "master" branch. git push --force *will* make the error go away, but it
> will also overwrite history and _lose the changes_ that GitHub had but
> your local copy of the repository did not.
> 
> I can't give any links to good Git merging tutorials besides the Git
> Book [*], but when working with Git, it's really necessary to learn
> merging in order to avoid losing data to history rewrites by git push
> --force and the like.
>


From kev|nu@hey @end|ng |rom gm@||@com  Thu Apr 21 20:52:09 2022
From: kev|nu@hey @end|ng |rom gm@||@com (Kevin Ushey)
Date: Thu, 21 Apr 2022 11:52:09 -0700
Subject: [R-pkg-devel] uuid 1.1-0 binary not available for Windows?
Message-ID: <CAJXgQP3RWJBjQiPBRDr0HSZfGQM-JqpeiEok3mxRtPDDuOPY-Q@mail.gmail.com>

Hi,

It looks like binaries for uuid 1.1-0 are not available for R 4.1 on
Windows. However, available.packages() reports that it is available:

> options(repos = c(CRAN = "https://cran.r-project.org"))
> db <- available.packages(type = "binary")
> str(as.list(db["uuid", ]))
List of 17
 $ Package              : chr "uuid"
 $ Version              : chr "1.1-0"
 $ Priority             : chr NA
 $ Depends              : chr "R (>= 2.9.0)"
 $ Imports              : chr NA
 $ LinkingTo            : chr NA
 $ Suggests             : chr NA
 $ Enhances             : chr NA
 $ License              : chr "MIT + file LICENSE"
 $ License_is_FOSS      : chr NA
 $ License_restricts_use: chr NA
 $ OS_type              : chr NA
 $ Archs                : chr "i386, x64"
 $ MD5sum               : chr NA
 $ NeedsCompilation     : chr NA
 $ File                 : chr NA
 $ Repository           : chr
"https://cran.r-project.org/bin/windows/contrib/4.1"
> install.packages("uuid", type = "both")

And so this implies that attempts to install 'uuid' will by default
fail, as type = "both" will attempt to select the non-existent binary:

> install.packages("uuid", type = "both")
Installing package into ?C:/Users/kevin/r/win-library/4.1?
(as ?lib? is unspecified)
trying URL 'https://cran.r-project.org/bin/windows/contrib/4.1/uuid_1.1-0.zip'
Warning in install.packages :
  cannot open URL
'https://cran.r-project.org/bin/windows/contrib/4.1/uuid_1.1-0.zip':
HTTP status was '404 Not Found'
Error in download.file(url, destfile, method, mode = "wb", ...) :
  cannot open URL
'https://cran.r-project.org/bin/windows/contrib/4.1/uuid_1.1-0.zip'
Warning in install.packages :
  download of package ?uuid? failed

Are there plans to publish a binary version of this version of uuid
for Windows, or does the PACKAGES database need to be updated on CRAN?

For what it's worth, https://cran.r-project.org/package=uuid does
indicate that the Windows binary for r-release is not available, but
the link points to a non-existent ReadMe file.

Thanks,
Kevin


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Apr 22 13:40:17 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 22 Apr 2022 13:40:17 +0200
Subject: [R-pkg-devel] uuid 1.1-0 binary not available for Windows?
In-Reply-To: <CAJXgQP3RWJBjQiPBRDr0HSZfGQM-JqpeiEok3mxRtPDDuOPY-Q@mail.gmail.com>
References: <CAJXgQP3RWJBjQiPBRDr0HSZfGQM-JqpeiEok3mxRtPDDuOPY-Q@mail.gmail.com>
Message-ID: <64c0baad-3c37-4627-fd34-1ffb5525f73a@statistik.tu-dortmund.de>



On 21.04.2022 20:52, Kevin Ushey wrote:
> Hi,
> 
> It looks like binaries for uuid 1.1-0 are not available for R 4.1 on
> Windows. However, available.packages() reports that it is available:
> 
>> options(repos = c(CRAN = "https://cran.r-project.org"))
>> db <- available.packages(type = "binary")
>> str(as.list(db["uuid", ]))
> List of 17
>   $ Package              : chr "uuid"
>   $ Version              : chr "1.1-0"
>   $ Priority             : chr NA
>   $ Depends              : chr "R (>= 2.9.0)"
>   $ Imports              : chr NA
>   $ LinkingTo            : chr NA
>   $ Suggests             : chr NA
>   $ Enhances             : chr NA
>   $ License              : chr "MIT + file LICENSE"
>   $ License_is_FOSS      : chr NA
>   $ License_restricts_use: chr NA
>   $ OS_type              : chr NA
>   $ Archs                : chr "i386, x64"
>   $ MD5sum               : chr NA
>   $ NeedsCompilation     : chr NA
>   $ File                 : chr NA
>   $ Repository           : chr
> "https://cran.r-project.org/bin/windows/contrib/4.1"
>> install.packages("uuid", type = "both")
> 
> And so this implies that attempts to install 'uuid' will by default
> fail, as type = "both" will attempt to select the non-existent binary:
> 
>> install.packages("uuid", type = "both")
> Installing package into ?C:/Users/kevin/r/win-library/4.1?
> (as ?lib? is unspecified)
> trying URL 'https://cran.r-project.org/bin/windows/contrib/4.1/uuid_1.1-0.zip'
> Warning in install.packages :
>    cannot open URL
> 'https://cran.r-project.org/bin/windows/contrib/4.1/uuid_1.1-0.zip':
> HTTP status was '404 Not Found'
> Error in download.file(url, destfile, method, mode = "wb", ...) :
>    cannot open URL
> 'https://cran.r-project.org/bin/windows/contrib/4.1/uuid_1.1-0.zip'
> Warning in install.packages :
>    download of package ?uuid? failed
> 
> Are there plans to publish a binary version of this version of uuid
> for Windows, or does the PACKAGES database need to be updated on CRAN?
> 
> For what it's worth, https://cran.r-project.org/package=uuid does
> indicate that the Windows binary for r-release is not available, but
> the link points to a non-existent ReadMe file.

Indeed, both the Readme and the binary vesion should be there and 
apparently a local automated rsync call on my side failed somehow.

Now everything is in order to be synced by the CRAN master again and 
should be there within less than 24 hours.

Best,
Uwe Ligges




> Thanks,
> Kevin
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From greg @end|ng |rom ||rm@n@y@h@com  Sat Apr 23 10:05:48 2022
From: greg @end|ng |rom ||rm@n@y@h@com (Greg Hunt)
Date: Sat, 23 Apr 2022 18:05:48 +1000
Subject: [R-pkg-devel] Should the LaTeX package pdfpages be available for
 use in vignettes?
Message-ID: <CAAS8PALtBzMQKm1B2r2Y4v-j6Z5kpQtoOn3FsAqsdA7n+f70Ag@mail.gmail.com>

I want to incorporate a static PDF (created from LaTeX source separately
from the R package) into an R package as a vignette.  One approach I found
was to use the LaTeX pdfpages package, which works fine locally and on some
but is not present in all RHub environments.  Is the use of pdfpages a
viable approach?  What is the set of LaTeX packages that can be assumed?

I tried using R.rsp as an alternative but it did not work for me and I
stopped trying it because I had an approach that appeared to work.

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Sat Apr 23 14:34:16 2022
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Sat, 23 Apr 2022 07:34:16 -0500
Subject: [R-pkg-devel] "pdflatex: not found" in GitHub Action
In-Reply-To: <JamesRamsay5/fda/check-suites/CS_kwDODrrrbM8AAAABcyw3gA/1650685204@github.com>
References: <JamesRamsay5/fda/check-suites/CS_kwDODrrrbM8AAAABcyw3gA/1650685204@github.com>
Message-ID: <3799e440-2839-4c0f-8327-f4665dfdf141@effectivedefense.org>

Hello, All:


	  Greg Hunt <greg at firmansyah.com> asked this list 4 hours ago, "Is the 
use of pdfpages a viable approach" for use in vignettes?


	  Three of four GitHub Action checks of "JamesRamsay5/fda" failed, 
because "pdflatex: not found".


	  What do you suggest I do about that problem, if anything?


	  Thanks,
	  Spencer Graves


-------- Forwarded Message --------
Subject: 	[JamesRamsay5/fda] Run failed: R-CMD-check - master (663569e)
Date: 	Fri, 22 Apr 2022 20:40:16 -0700
From: 	sbgraves237 <notifications at github.com>
Reply-To: 	JamesRamsay5/fda <noreply at github.com>
To: 	JamesRamsay5/fda <fda at noreply.github.com>
CC: 	Ci activity <ci_activity at noreply.github.com>



GitHub


     [JamesRamsay5/fda] R-CMD-check workflow run


       R-CMD-check: Some jobs were not successful

View workflow run 
<https://github.com/JamesRamsay5/fda/actions/runs/2210173324>

	windows-latest (release) 	

*R-CMD-check* / windows-latest (release)
Failed in 3 minutes and 5 seconds

	annotations for R-CMD-check / windows-latest (release) 6 
<https://github.com/JamesRamsay5/fda/actions/runs/2210173324>

	macOS-latest (release) 	

*R-CMD-check* / macOS-latest (release)
Cancelled

	annotations for R-CMD-check / macOS-latest (release) 2 
<https://github.com/JamesRamsay5/fda/actions/runs/2210173324>

	ubuntu-20.04 (release) 	

*R-CMD-check* / ubuntu-20.04 (release)
Failed in 15 minutes and 29 seconds

	annotations for R-CMD-check / ubuntu-20.04 (release) 12 
<https://github.com/JamesRamsay5/fda/actions/runs/2210173324>

	ubuntu-20.04 (devel) 	

*R-CMD-check* / ubuntu-20.04 (devel)
Failed in 2 minutes and 21 seconds

	annotations for R-CMD-check / ubuntu-20.04 (devel) 6 
<https://github.com/JamesRamsay5/fda/actions/runs/2210173324>

?
You are receiving this because this workflow ran on your branch.
Manage your GitHub Actions notifications 
<https://github.com/settings/notifications>

GitHub, Inc. ?88 Colin P Kelly Jr Street ?San Francisco, CA 94107


From c@@rd|@g@bor @end|ng |rom gm@||@com  Sat Apr 23 14:46:34 2022
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Sat, 23 Apr 2022 14:46:34 +0200
Subject: [R-pkg-devel] "pdflatex: not found" in GitHub Action
In-Reply-To: <3799e440-2839-4c0f-8327-f4665dfdf141@effectivedefense.org>
References: <JamesRamsay5/fda/check-suites/CS_kwDODrrrbM8AAAABcyw3gA/1650685204@github.com>
 <3799e440-2839-4c0f-8327-f4665dfdf141@effectivedefense.org>
Message-ID: <CABtg=KmJfMzGzQ2pegmNbRAnw8SxX_nk16hCgdqDdb4FhtQjeA@mail.gmail.com>

I suggest you install latex, e.g.:
https://github.com/r-lib/actions/tree/v2-branch/setup-tinytex#readme

Gabor

On Sat, Apr 23, 2022 at 2:34 PM Spencer Graves
<spencer.graves at effectivedefense.org> wrote:
>
> Hello, All:
>
>
>           Greg Hunt <greg at firmansyah.com> asked this list 4 hours ago, "Is the
> use of pdfpages a viable approach" for use in vignettes?
>
>
>           Three of four GitHub Action checks of "JamesRamsay5/fda" failed,
> because "pdflatex: not found".
>
>
>           What do you suggest I do about that problem, if anything?
>
>
>           Thanks,
>           Spencer Graves
>
>
> -------- Forwarded Message --------
> Subject:        [JamesRamsay5/fda] Run failed: R-CMD-check - master (663569e)
> Date:   Fri, 22 Apr 2022 20:40:16 -0700
> From:   sbgraves237 <notifications at github.com>
> Reply-To:       JamesRamsay5/fda <noreply at github.com>
> To:     JamesRamsay5/fda <fda at noreply.github.com>
> CC:     Ci activity <ci_activity at noreply.github.com>
>
>
>
> GitHub
>
>
>      [JamesRamsay5/fda] R-CMD-check workflow run
>
>
>        R-CMD-check: Some jobs were not successful
>
> View workflow run
> <https://github.com/JamesRamsay5/fda/actions/runs/2210173324>
>
>         windows-latest (release)
>
> *R-CMD-check* / windows-latest (release)
> Failed in 3 minutes and 5 seconds
>
>         annotations for R-CMD-check / windows-latest (release) 6
> <https://github.com/JamesRamsay5/fda/actions/runs/2210173324>
>
>         macOS-latest (release)
>
> *R-CMD-check* / macOS-latest (release)
> Cancelled
>
>         annotations for R-CMD-check / macOS-latest (release) 2
> <https://github.com/JamesRamsay5/fda/actions/runs/2210173324>
>
>         ubuntu-20.04 (release)
>
> *R-CMD-check* / ubuntu-20.04 (release)
> Failed in 15 minutes and 29 seconds
>
>         annotations for R-CMD-check / ubuntu-20.04 (release) 12
> <https://github.com/JamesRamsay5/fda/actions/runs/2210173324>
>
>         ubuntu-20.04 (devel)
>
> *R-CMD-check* / ubuntu-20.04 (devel)
> Failed in 2 minutes and 21 seconds
>
>         annotations for R-CMD-check / ubuntu-20.04 (devel) 6
> <https://github.com/JamesRamsay5/fda/actions/runs/2210173324>
>
> ?
> You are receiving this because this workflow ran on your branch.
> Manage your GitHub Actions notifications
> <https://github.com/settings/notifications>
>
> GitHub, Inc. ?88 Colin P Kelly Jr Street ?San Francisco, CA 94107
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Sat Apr 23 14:52:55 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 23 Apr 2022 07:52:55 -0500
Subject: [R-pkg-devel] 
 Should the LaTeX package pdfpages be available for use in vignettes?
In-Reply-To: <CAAS8PALtBzMQKm1B2r2Y4v-j6Z5kpQtoOn3FsAqsdA7n+f70Ag@mail.gmail.com>
References: <CAAS8PALtBzMQKm1B2r2Y4v-j6Z5kpQtoOn3FsAqsdA7n+f70Ag@mail.gmail.com>
Message-ID: <25187.63143.594635.851509@rob.eddelbuettel.com>


On 23 April 2022 at 18:05, Greg Hunt wrote:
| I want to incorporate a static PDF (created from LaTeX source separately
| from the R package) into an R package as a vignette.

I do that in several vignettes via a zero-depends approach described by Mark
in this blog post:

https://www.markvanderloo.eu/yaRb/2019/01/11/add-a-static-pdf-vignette-to-an-r-package/

Tastes tastes great and has zero calories!

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From greg @end|ng |rom ||rm@n@y@h@com  Sat Apr 23 14:53:02 2022
From: greg @end|ng |rom ||rm@n@y@h@com (Greg Hunt)
Date: Sat, 23 Apr 2022 22:53:02 +1000
Subject: [R-pkg-devel] "pdflatex: not found" in GitHub Action
In-Reply-To: <3799e440-2839-4c0f-8327-f4665dfdf141@effectivedefense.org>
References: <JamesRamsay5/fda/check-suites/CS_kwDODrrrbM8AAAABcyw3gA/1650685204@github.com>
 <3799e440-2839-4c0f-8327-f4665dfdf141@effectivedefense.org>
Message-ID: <CAAS8PAJiVTkQc0p4bQac9emGRx3of3ir9=OAqX8kUJsWaL93Xw@mail.gmail.com>

Spencer,
These are quite different issues.  pdflatex is an executable (for
processing LaTeX source, an executable which it appears is missing).
pdfpages is a LaTeX package and my question is about its being
inconsistently available on different RHub platforms and how that
inconsistency relates to the wisdom of using it in a package vignette.

Greg

On Sat, 23 Apr 2022 at 22:34, Spencer Graves <
spencer.graves at effectivedefense.org> wrote:

> Hello, All:
>
>
>           Greg Hunt <greg at firmansyah.com> asked this list 4 hours ago,
> "Is the
> use of pdfpages a viable approach" for use in vignettes?
>
>
>           Three of four GitHub Action checks of "JamesRamsay5/fda" failed,
> because "pdflatex: not found".
>
>
>           What do you suggest I do about that problem, if anything?
>
>
>           Thanks,
>           Spencer Graves
>
>
> -------- Forwarded Message --------
> Subject:        [JamesRamsay5/fda] Run failed: R-CMD-check - master
> (663569e)
> Date:   Fri, 22 Apr 2022 20:40:16 -0700
> From:   sbgraves237 <notifications at github.com>
> Reply-To:       JamesRamsay5/fda <noreply at github.com>
> To:     JamesRamsay5/fda <fda at noreply.github.com>
> CC:     Ci activity <ci_activity at noreply.github.com>
>
>
>
> GitHub
>
>
>      [JamesRamsay5/fda] R-CMD-check workflow run
>
>
>        R-CMD-check: Some jobs were not successful
>
> View workflow run
> <https://github.com/JamesRamsay5/fda/actions/runs/2210173324>
>
>         windows-latest (release)
>
> *R-CMD-check* / windows-latest (release)
> Failed in 3 minutes and 5 seconds
>
>         annotations for R-CMD-check / windows-latest (release) 6
> <https://github.com/JamesRamsay5/fda/actions/runs/2210173324>
>
>         macOS-latest (release)
>
> *R-CMD-check* / macOS-latest (release)
> Cancelled
>
>         annotations for R-CMD-check / macOS-latest (release) 2
> <https://github.com/JamesRamsay5/fda/actions/runs/2210173324>
>
>         ubuntu-20.04 (release)
>
> *R-CMD-check* / ubuntu-20.04 (release)
> Failed in 15 minutes and 29 seconds
>
>         annotations for R-CMD-check / ubuntu-20.04 (release) 12
> <https://github.com/JamesRamsay5/fda/actions/runs/2210173324>
>
>         ubuntu-20.04 (devel)
>
> *R-CMD-check* / ubuntu-20.04 (devel)
> Failed in 2 minutes and 21 seconds
>
>         annotations for R-CMD-check / ubuntu-20.04 (devel) 6
> <https://github.com/JamesRamsay5/fda/actions/runs/2210173324>
>
> ?
> You are receiving this because this workflow ran on your branch.
> Manage your GitHub Actions notifications
> <https://github.com/settings/notifications>
>
> GitHub, Inc. ?88 Colin P Kelly Jr Street ?San Francisco, CA 94107
>
>

	[[alternative HTML version deleted]]


From greg @end|ng |rom ||rm@n@y@h@com  Sat Apr 23 15:02:30 2022
From: greg @end|ng |rom ||rm@n@y@h@com (Greg Hunt)
Date: Sat, 23 Apr 2022 23:02:30 +1000
Subject: [R-pkg-devel] 
 Should the LaTeX package pdfpages be available for use in vignettes?
In-Reply-To: <25187.63143.594635.851509@rob.eddelbuettel.com>
References: <CAAS8PALtBzMQKm1B2r2Y4v-j6Z5kpQtoOn3FsAqsdA7n+f70Ag@mail.gmail.com>
 <25187.63143.594635.851509@rob.eddelbuettel.com>
Message-ID: <CAAS8PA+2KQR5He7kcUVw_YC0ZTfhoeD2J5aHzhYYw57R49adXw@mail.gmail.com>

Dirk,
I'd like to use that approach, its what I have coded already and minimal
dependencies are attractive, but it appears that the approach does not work
on all platforms.  I haven't finished checking, but so far using the RHub
API::

   - Solaris - vignette build skipped
   - check_on_linux: linux-x86_64-debian-gcc - succeeded
   - check_for_cran  - failed
   - fedora clang devel - failed
   - windows-x86_64-devel - succeeded
   - debian-gcc-devel - succeeded
   - fedora-gcc-devel - failed
   - Windows Server 2022, R-devel, 64 bit - succeeded

This inconsistency is where the question comes from and leads to the part
of the question that amounts to "what can I assume about Latex packages?"

Greg

On Sat, 23 Apr 2022 at 22:52, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 23 April 2022 at 18:05, Greg Hunt wrote:
> | I want to incorporate a static PDF (created from LaTeX source separately
> | from the R package) into an R package as a vignette.
>
> I do that in several vignettes via a zero-depends approach described by
> Mark
> in this blog post:
>
>
> https://www.markvanderloo.eu/yaRb/2019/01/11/add-a-static-pdf-vignette-to-an-r-package/
>
> Tastes tastes great and has zero calories!
>
> Dirk
>
> --
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Sat Apr 23 15:15:11 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 23 Apr 2022 08:15:11 -0500
Subject: [R-pkg-devel] 
 Should the LaTeX package pdfpages be available for use in vignettes?
In-Reply-To: <CAAS8PA+2KQR5He7kcUVw_YC0ZTfhoeD2J5aHzhYYw57R49adXw@mail.gmail.com>
References: <CAAS8PALtBzMQKm1B2r2Y4v-j6Z5kpQtoOn3FsAqsdA7n+f70Ag@mail.gmail.com>
 <25187.63143.594635.851509@rob.eddelbuettel.com>
 <CAAS8PA+2KQR5He7kcUVw_YC0ZTfhoeD2J5aHzhYYw57R49adXw@mail.gmail.com>
Message-ID: <25187.64479.902768.668753@rob.eddelbuettel.com>


On 23 April 2022 at 23:02, Greg Hunt wrote:
| I'd like to use that approach, its what I have coded already and minimal
| dependencies are attractive, but it appears that the approach does not work
| on all platforms.  I haven't finished checking, but so far using the RHub
| API::

I see. Well that is largely irrelevant (at least to me) as it *will* work at
CRAN where the build environment is consistent for packages as described in
Writing R Extensions. And I generally skip vignettes in package checks in CI.

For RHub bug reports you need to contact RHub admins. This mailing list
sort-of covers it lacking other obvious venues but it is otherwise about
getting package to CRAN standards.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Apr 23 15:32:27 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 23 Apr 2022 09:32:27 -0400
Subject: [R-pkg-devel] Github action setup for R 4.2.0 on Windows?
Message-ID: <9a68d64e-e16a-c580-f018-6902b07e752b@gmail.com>

Today a Github actions check of rgl failed on Windows with R 4.2.0 and 
this error:


g++  -std=gnu++11 -I"C:/R/include" -DNDEBUG -DHAVE_PNG_H -DHAVE_FREETYPE 
-Iext -Iext/ftgl 
-Ic:/rtools42/x86_64-w64-mingw32.static.posix/include/freetype2 
-DRGL_W32    -I"c:/rtools42/x86_64-w64-mingw32.static.posix/include" 
-O2 -Wall  -mfpmath=sse -msse2 -mstackrealign  -Wall -pedantic -c 
BBoxDeco.cpp -o BBoxDeco.o
In file included from glgui.h:10,
                  from BBoxDeco.cpp:6:
ext/ftgl/FTGL/ftgl.h:32:10: fatal error: ft2build.h: No such file or 
directory
    32 | #include <ft2build.h>
       |          ^~~~~~~~~~~~
compilation terminated.
make: *** [C:/R/etc/x64/Makeconf:259: BBoxDeco.o] Error 1
ERROR: compilation failed for package 'rgl'
* removing 
'C:/Users/RUNNER~1/AppData/Local/Temp/RtmpOc4X2w/Rinst105c7555452b/rgl'
       -----------------------------------
ERROR: package installation failed
Error: Error in proc$get_built_file() : Build process failed
Calls: <Anonymous> ... build_package -> with_envvar -> force -> <Anonymous>
Execution halted
Error: Process completed with exit code 1.


If I'm interpreting it correctly, the problem is that the Freetype 
includes are not installed.  I don't have a good local Windows build 
system running currently, but I believe Rtools42 includes Freetype, so 
this makes it look as though the Github build doesn't have a proper 
install of Rtools42.

The script I was using is here:

 
https://github.com/dmurdoch/rgl/blob/master/.github/workflows/R-CMD-check.yaml

Can anyone spot what I'm doing wrong, or is it just a matter of waiting 
until something else is updated on Github?

Duncan Murdoch


From yut@n|@|n| @end|ng |rom gm@||@com  Sat Apr 23 15:42:17 2022
From: yut@n|@|n| @end|ng |rom gm@||@com (Hiroaki Yutani)
Date: Sat, 23 Apr 2022 22:42:17 +0900
Subject: [R-pkg-devel] Github action setup for R 4.2.0 on Windows?
In-Reply-To: <9a68d64e-e16a-c580-f018-6902b07e752b@gmail.com>
References: <9a68d64e-e16a-c580-f018-6902b07e752b@gmail.com>
Message-ID: <CALyqOb_E+8OraWuf5XyW+iwKMwmEBBT-zVuMC=8+imB9CUe6Cg@mail.gmail.com>

Hi,

I asked about it, but they decided to keep using Rtools40's UCRT
toolchain by default for r-lib/actions/setup-r, until GitHub's default
is switched to Rtools42. To obtain the Rtools42, we need to specify
`rtools-version: '42'`.

c.f. https://github.com/r-lib/actions/issues/553

Best,
Yutani

2022?4?23?(?) 22:37 Duncan Murdoch <murdoch.duncan at gmail.com>:
>
> Today a Github actions check of rgl failed on Windows with R 4.2.0 and
> this error:
>
>
> g++  -std=gnu++11 -I"C:/R/include" -DNDEBUG -DHAVE_PNG_H -DHAVE_FREETYPE
> -Iext -Iext/ftgl
> -Ic:/rtools42/x86_64-w64-mingw32.static.posix/include/freetype2
> -DRGL_W32    -I"c:/rtools42/x86_64-w64-mingw32.static.posix/include"
> -O2 -Wall  -mfpmath=sse -msse2 -mstackrealign  -Wall -pedantic -c
> BBoxDeco.cpp -o BBoxDeco.o
> In file included from glgui.h:10,
>                   from BBoxDeco.cpp:6:
> ext/ftgl/FTGL/ftgl.h:32:10: fatal error: ft2build.h: No such file or
> directory
>     32 | #include <ft2build.h>
>        |          ^~~~~~~~~~~~
> compilation terminated.
> make: *** [C:/R/etc/x64/Makeconf:259: BBoxDeco.o] Error 1
> ERROR: compilation failed for package 'rgl'
> * removing
> 'C:/Users/RUNNER~1/AppData/Local/Temp/RtmpOc4X2w/Rinst105c7555452b/rgl'
>        -----------------------------------
> ERROR: package installation failed
> Error: Error in proc$get_built_file() : Build process failed
> Calls: <Anonymous> ... build_package -> with_envvar -> force -> <Anonymous>
> Execution halted
> Error: Process completed with exit code 1.
>
>
> If I'm interpreting it correctly, the problem is that the Freetype
> includes are not installed.  I don't have a good local Windows build
> system running currently, but I believe Rtools42 includes Freetype, so
> this makes it look as though the Github build doesn't have a proper
> install of Rtools42.
>
> The script I was using is here:
>
>
> https://github.com/dmurdoch/rgl/blob/master/.github/workflows/R-CMD-check.yaml
>
> Can anyone spot what I'm doing wrong, or is it just a matter of waiting
> until something else is updated on Github?
>
> Duncan Murdoch
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Apr 23 16:12:55 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 23 Apr 2022 10:12:55 -0400
Subject: [R-pkg-devel] Github action setup for R 4.2.0 on Windows?
In-Reply-To: <CALyqOb_E+8OraWuf5XyW+iwKMwmEBBT-zVuMC=8+imB9CUe6Cg@mail.gmail.com>
References: <9a68d64e-e16a-c580-f018-6902b07e752b@gmail.com>
 <CALyqOb_E+8OraWuf5XyW+iwKMwmEBBT-zVuMC=8+imB9CUe6Cg@mail.gmail.com>
Message-ID: <e1092e9a-f5d7-add2-9bd7-42065a5ef4b3@gmail.com>

On 23/04/2022 9:42 a.m., Hiroaki Yutani wrote:
> Hi,
> 
> I asked about it, but they decided to keep using Rtools40's UCRT
> toolchain by default for r-lib/actions/setup-r, until GitHub's default
> is switched to Rtools42. To obtain the Rtools42, we need to specify
> `rtools-version: '42'`.
> 
> c.f. https://github.com/r-lib/actions/issues/553

Thanks, that fixes it.  To be explicit, these are the changes to the 
workflow:

    strategy:
       fail-fast: false
       matrix:
         config:

               # New option on the next line:

           - {os: windows-latest, r: 'release', rtools-version: '42'}
           - {os: ubuntu-18.04,   r: 'devel', rspm: 
"https://packagemanager.rstudio.com/cran/__linux__/bionic/latest", 
http-user-agent: "R/4.1.0 (ubuntu-18.04) R (4.1.0 x86_64-pc-linux-gnu 
x86_64 linux-gnu) on GitHub Actions" }

     env:
       R_REMOTES_NO_ERRORS_FROM_WARNINGS: true
       _R_CHECK_FORCE_SUGGESTS_: false
       # _R_CHECK_RD_XREFS_: false
       # _R_CHECK_CRAN_INCOMING_: false
       # _R_CHECK_AUTOCONF_: false
       RSPM: ${{ matrix.config.rspm }}
       GITHUB_PAT: ${{ secrets.GITHUB_TOKEN }}
       RGL_USE_NULL: true

     steps:
       - uses: actions/checkout at v2

          # Change to @v2 on the next line:

       - uses: r-lib/actions/setup-r at v2
         with:
           r-version: ${{ matrix.config.r }}
           http-user-agent: ${{ matrix.config.http-user-agent }}

              # Add this line to make use of the option

           rtools-version: ${{ matrix.config.rtools-version }}


I also updated the setup-pandoc action to v2, but that's unrelated.

Duncan Murdoch

> 
> Best,
> Yutani
> 
> 2022?4?23?(?) 22:37 Duncan Murdoch <murdoch.duncan at gmail.com>:
>>
>> Today a Github actions check of rgl failed on Windows with R 4.2.0 and
>> this error:
>>
>>
>> g++  -std=gnu++11 -I"C:/R/include" -DNDEBUG -DHAVE_PNG_H -DHAVE_FREETYPE
>> -Iext -Iext/ftgl
>> -Ic:/rtools42/x86_64-w64-mingw32.static.posix/include/freetype2
>> -DRGL_W32    -I"c:/rtools42/x86_64-w64-mingw32.static.posix/include"
>> -O2 -Wall  -mfpmath=sse -msse2 -mstackrealign  -Wall -pedantic -c
>> BBoxDeco.cpp -o BBoxDeco.o
>> In file included from glgui.h:10,
>>                    from BBoxDeco.cpp:6:
>> ext/ftgl/FTGL/ftgl.h:32:10: fatal error: ft2build.h: No such file or
>> directory
>>      32 | #include <ft2build.h>
>>         |          ^~~~~~~~~~~~
>> compilation terminated.
>> make: *** [C:/R/etc/x64/Makeconf:259: BBoxDeco.o] Error 1
>> ERROR: compilation failed for package 'rgl'
>> * removing
>> 'C:/Users/RUNNER~1/AppData/Local/Temp/RtmpOc4X2w/Rinst105c7555452b/rgl'
>>         -----------------------------------
>> ERROR: package installation failed
>> Error: Error in proc$get_built_file() : Build process failed
>> Calls: <Anonymous> ... build_package -> with_envvar -> force -> <Anonymous>
>> Execution halted
>> Error: Process completed with exit code 1.
>>
>>
>> If I'm interpreting it correctly, the problem is that the Freetype
>> includes are not installed.  I don't have a good local Windows build
>> system running currently, but I believe Rtools42 includes Freetype, so
>> this makes it look as though the Github build doesn't have a proper
>> install of Rtools42.
>>
>> The script I was using is here:
>>
>>
>> https://github.com/dmurdoch/rgl/blob/master/.github/workflows/R-CMD-check.yaml
>>
>> Can anyone spot what I'm doing wrong, or is it just a matter of waiting
>> until something else is updated on Github?
>>
>> Duncan Murdoch
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From yut@n|@|n| @end|ng |rom gm@||@com  Sat Apr 23 16:21:20 2022
From: yut@n|@|n| @end|ng |rom gm@||@com (Hiroaki Yutani)
Date: Sat, 23 Apr 2022 23:21:20 +0900
Subject: [R-pkg-devel] Github action setup for R 4.2.0 on Windows?
In-Reply-To: <e1092e9a-f5d7-add2-9bd7-42065a5ef4b3@gmail.com>
References: <9a68d64e-e16a-c580-f018-6902b07e752b@gmail.com>
 <CALyqOb_E+8OraWuf5XyW+iwKMwmEBBT-zVuMC=8+imB9CUe6Cg@mail.gmail.com>
 <e1092e9a-f5d7-add2-9bd7-42065a5ef4b3@gmail.com>
Message-ID: <CALyqOb9FNX6uCEkBu42ajtkCcqjprPF6WWAC-Xro93_7o7pCgQ@mail.gmail.com>

Great. Thanks for sharing!

2022?4?23?(?) 23:12 Duncan Murdoch <murdoch.duncan at gmail.com>:
>
> On 23/04/2022 9:42 a.m., Hiroaki Yutani wrote:
> > Hi,
> >
> > I asked about it, but they decided to keep using Rtools40's UCRT
> > toolchain by default for r-lib/actions/setup-r, until GitHub's default
> > is switched to Rtools42. To obtain the Rtools42, we need to specify
> > `rtools-version: '42'`.
> >
> > c.f. https://github.com/r-lib/actions/issues/553
>
> Thanks, that fixes it.  To be explicit, these are the changes to the
> workflow:
>
>     strategy:
>        fail-fast: false
>        matrix:
>          config:
>
>                # New option on the next line:
>
>            - {os: windows-latest, r: 'release', rtools-version: '42'}
>            - {os: ubuntu-18.04,   r: 'devel', rspm:
> "https://packagemanager.rstudio.com/cran/__linux__/bionic/latest",
> http-user-agent: "R/4.1.0 (ubuntu-18.04) R (4.1.0 x86_64-pc-linux-gnu
> x86_64 linux-gnu) on GitHub Actions" }
>
>      env:
>        R_REMOTES_NO_ERRORS_FROM_WARNINGS: true
>        _R_CHECK_FORCE_SUGGESTS_: false
>        # _R_CHECK_RD_XREFS_: false
>        # _R_CHECK_CRAN_INCOMING_: false
>        # _R_CHECK_AUTOCONF_: false
>        RSPM: ${{ matrix.config.rspm }}
>        GITHUB_PAT: ${{ secrets.GITHUB_TOKEN }}
>        RGL_USE_NULL: true
>
>      steps:
>        - uses: actions/checkout at v2
>
>           # Change to @v2 on the next line:
>
>        - uses: r-lib/actions/setup-r at v2
>          with:
>            r-version: ${{ matrix.config.r }}
>            http-user-agent: ${{ matrix.config.http-user-agent }}
>
>               # Add this line to make use of the option
>
>            rtools-version: ${{ matrix.config.rtools-version }}
>
>
> I also updated the setup-pandoc action to v2, but that's unrelated.
>
> Duncan Murdoch
>
> >
> > Best,
> > Yutani
> >
> > 2022?4?23?(?) 22:37 Duncan Murdoch <murdoch.duncan at gmail.com>:
> >>
> >> Today a Github actions check of rgl failed on Windows with R 4.2.0 and
> >> this error:
> >>
> >>
> >> g++  -std=gnu++11 -I"C:/R/include" -DNDEBUG -DHAVE_PNG_H -DHAVE_FREETYPE
> >> -Iext -Iext/ftgl
> >> -Ic:/rtools42/x86_64-w64-mingw32.static.posix/include/freetype2
> >> -DRGL_W32    -I"c:/rtools42/x86_64-w64-mingw32.static.posix/include"
> >> -O2 -Wall  -mfpmath=sse -msse2 -mstackrealign  -Wall -pedantic -c
> >> BBoxDeco.cpp -o BBoxDeco.o
> >> In file included from glgui.h:10,
> >>                    from BBoxDeco.cpp:6:
> >> ext/ftgl/FTGL/ftgl.h:32:10: fatal error: ft2build.h: No such file or
> >> directory
> >>      32 | #include <ft2build.h>
> >>         |          ^~~~~~~~~~~~
> >> compilation terminated.
> >> make: *** [C:/R/etc/x64/Makeconf:259: BBoxDeco.o] Error 1
> >> ERROR: compilation failed for package 'rgl'
> >> * removing
> >> 'C:/Users/RUNNER~1/AppData/Local/Temp/RtmpOc4X2w/Rinst105c7555452b/rgl'
> >>         -----------------------------------
> >> ERROR: package installation failed
> >> Error: Error in proc$get_built_file() : Build process failed
> >> Calls: <Anonymous> ... build_package -> with_envvar -> force -> <Anonymous>
> >> Execution halted
> >> Error: Process completed with exit code 1.
> >>
> >>
> >> If I'm interpreting it correctly, the problem is that the Freetype
> >> includes are not installed.  I don't have a good local Windows build
> >> system running currently, but I believe Rtools42 includes Freetype, so
> >> this makes it look as though the Github build doesn't have a proper
> >> install of Rtools42.
> >>
> >> The script I was using is here:
> >>
> >>
> >> https://github.com/dmurdoch/rgl/blob/master/.github/workflows/R-CMD-check.yaml
> >>
> >> Can anyone spot what I'm doing wrong, or is it just a matter of waiting
> >> until something else is updated on Github?
> >>
> >> Duncan Murdoch
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @vr@h@m@@d|er @end|ng |rom gm@||@com  Sun Apr 24 16:30:46 2022
From: @vr@h@m@@d|er @end|ng |rom gm@||@com (Avraham Adler)
Date: Sun, 24 Apr 2022 14:30:46 +0000
Subject: [R-pkg-devel] Github action setup for R 4.2.0 on Windows?
In-Reply-To: <CALyqOb9FNX6uCEkBu42ajtkCcqjprPF6WWAC-Xro93_7o7pCgQ@mail.gmail.com>
References: <9a68d64e-e16a-c580-f018-6902b07e752b@gmail.com>
 <CALyqOb_E+8OraWuf5XyW+iwKMwmEBBT-zVuMC=8+imB9CUe6Cg@mail.gmail.com>
 <e1092e9a-f5d7-add2-9bd7-42065a5ef4b3@gmail.com>
 <CALyqOb9FNX6uCEkBu42ajtkCcqjprPF6WWAC-Xro93_7o7pCgQ@mail.gmail.com>
Message-ID: <CAL6gwnLDQsC-SpeQm+RTAnwutJbUBb32HU8E1rU5OB5xTFNx+w@mail.gmail.com>

Indeed, thank you, Dr. Murdoch, for sharing how to update the workflows!

Avi

On Sat, Apr 23, 2022 at 2:23 PM Hiroaki Yutani <yutani.ini at gmail.com> wrote:
>
> Great. Thanks for sharing!
>
> 2022?4?23?(?) 23:12 Duncan Murdoch <murdoch.duncan at gmail.com>:
> >
> > On 23/04/2022 9:42 a.m., Hiroaki Yutani wrote:
> > > Hi,
> > >
> > > I asked about it, but they decided to keep using Rtools40's UCRT
> > > toolchain by default for r-lib/actions/setup-r, until GitHub's default
> > > is switched to Rtools42. To obtain the Rtools42, we need to specify
> > > `rtools-version: '42'`.
> > >
> > > c.f. https://github.com/r-lib/actions/issues/553
> >
> > Thanks, that fixes it.  To be explicit, these are the changes to the
> > workflow:
> >
> >     strategy:
> >        fail-fast: false
> >        matrix:
> >          config:
> >
> >                # New option on the next line:
> >
> >            - {os: windows-latest, r: 'release', rtools-version: '42'}
> >            - {os: ubuntu-18.04,   r: 'devel', rspm:
> > "https://packagemanager.rstudio.com/cran/__linux__/bionic/latest",
> > http-user-agent: "R/4.1.0 (ubuntu-18.04) R (4.1.0 x86_64-pc-linux-gnu
> > x86_64 linux-gnu) on GitHub Actions" }
> >
> >      env:
> >        R_REMOTES_NO_ERRORS_FROM_WARNINGS: true
> >        _R_CHECK_FORCE_SUGGESTS_: false
> >        # _R_CHECK_RD_XREFS_: false
> >        # _R_CHECK_CRAN_INCOMING_: false
> >        # _R_CHECK_AUTOCONF_: false
> >        RSPM: ${{ matrix.config.rspm }}
> >        GITHUB_PAT: ${{ secrets.GITHUB_TOKEN }}
> >        RGL_USE_NULL: true
> >
> >      steps:
> >        - uses: actions/checkout at v2
> >
> >           # Change to @v2 on the next line:
> >
> >        - uses: r-lib/actions/setup-r at v2
> >          with:
> >            r-version: ${{ matrix.config.r }}
> >            http-user-agent: ${{ matrix.config.http-user-agent }}
> >
> >               # Add this line to make use of the option
> >
> >            rtools-version: ${{ matrix.config.rtools-version }}
> >
> >
> > I also updated the setup-pandoc action to v2, but that's unrelated.
> >
> > Duncan Murdoch
> >
> > >
> > > Best,
> > > Yutani
> > >
> > > 2022?4?23?(?) 22:37 Duncan Murdoch <murdoch.duncan at gmail.com>:
> > >>
> > >> Today a Github actions check of rgl failed on Windows with R 4.2.0 and
> > >> this error:
> > >>
> > >>
> > >> g++  -std=gnu++11 -I"C:/R/include" -DNDEBUG -DHAVE_PNG_H -DHAVE_FREETYPE
> > >> -Iext -Iext/ftgl
> > >> -Ic:/rtools42/x86_64-w64-mingw32.static.posix/include/freetype2
> > >> -DRGL_W32    -I"c:/rtools42/x86_64-w64-mingw32.static.posix/include"
> > >> -O2 -Wall  -mfpmath=sse -msse2 -mstackrealign  -Wall -pedantic -c
> > >> BBoxDeco.cpp -o BBoxDeco.o
> > >> In file included from glgui.h:10,
> > >>                    from BBoxDeco.cpp:6:
> > >> ext/ftgl/FTGL/ftgl.h:32:10: fatal error: ft2build.h: No such file or
> > >> directory
> > >>      32 | #include <ft2build.h>
> > >>         |          ^~~~~~~~~~~~
> > >> compilation terminated.
> > >> make: *** [C:/R/etc/x64/Makeconf:259: BBoxDeco.o] Error 1
> > >> ERROR: compilation failed for package 'rgl'
> > >> * removing
> > >> 'C:/Users/RUNNER~1/AppData/Local/Temp/RtmpOc4X2w/Rinst105c7555452b/rgl'
> > >>         -----------------------------------
> > >> ERROR: package installation failed
> > >> Error: Error in proc$get_built_file() : Build process failed
> > >> Calls: <Anonymous> ... build_package -> with_envvar -> force -> <Anonymous>
> > >> Execution halted
> > >> Error: Process completed with exit code 1.
> > >>
> > >>
> > >> If I'm interpreting it correctly, the problem is that the Freetype
> > >> includes are not installed.  I don't have a good local Windows build
> > >> system running currently, but I believe Rtools42 includes Freetype, so
> > >> this makes it look as though the Github build doesn't have a proper
> > >> install of Rtools42.
> > >>
> > >> The script I was using is here:
> > >>
> > >>
> > >> https://github.com/dmurdoch/rgl/blob/master/.github/workflows/R-CMD-check.yaml
> > >>
> > >> Can anyone spot what I'm doing wrong, or is it just a matter of waiting
> > >> until something else is updated on Github?
> > >>
> > >> Duncan Murdoch
> > >>
> > >> ______________________________________________
> > >> R-package-devel at r-project.org mailing list
> > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From j@me@@m@rt|nd@|e @end|ng |rom ce|@@@co@uk  Mon Apr 25 11:36:33 2022
From: j@me@@m@rt|nd@|e @end|ng |rom ce|@@@co@uk (James Martindale (Cefas))
Date: Mon, 25 Apr 2022 09:36:33 +0000
Subject: [R-pkg-devel] Warning with R Build tools during CRAN check but not
 with local installation
Message-ID: <PA4PR08MB6304479A1B099F2F607F5729C5F89@PA4PR08MB6304.eurprd08.prod.outlook.com>

Good morning,

I am trying to release an `R` package to CRAN that contains some compiled C++ code and Stan models. Since adding a new Stan file to the package, I now get the following issue whenever I run `devtools::check_rhub()` or `devtools::check_win_devel()`:


* checking whether package 'EcoEnsemble' can be installed ... WARNING
Found the following significant warnings:
  WARNING: The tools required to build C++ code for R were not found.

This warning does *not* appear when I install the package locally and did not appear in the `r_hub`/`win_devel` checks in a previous version of the package that did not include this additional Stan file. There is nothing unusual about this Stan model that would lead it to cause issues like this.

Searching for this error suggests that this is an issue with the installation of RTools, but since this is not created in the local installation I am very confused. What could be the culprit here / how would I go about debugging this issue?

Many thanks,

James Martindale
________________________________
This email and any attachments are intended for the name...{{dropped:15}}


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Apr 25 15:29:13 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 25 Apr 2022 09:29:13 -0400
Subject: [R-pkg-devel] 
 Warning with R Build tools during CRAN check but not
 with local installation
In-Reply-To: <PA4PR08MB6304479A1B099F2F607F5729C5F89@PA4PR08MB6304.eurprd08.prod.outlook.com>
References: <PA4PR08MB6304479A1B099F2F607F5729C5F89@PA4PR08MB6304.eurprd08.prod.outlook.com>
Message-ID: <75cb6267-a053-2ca8-6314-c3267f968c56@gmail.com>

On 25/04/2022 5:36 a.m., James Martindale (Cefas) via R-package-devel wrote:
> Good morning,
> 
> I am trying to release an `R` package to CRAN that contains some compiled C++ code and Stan models. Since adding a new Stan file to the package, I now get the following issue whenever I run `devtools::check_rhub()` or `devtools::check_win_devel()`:
> 
> 
> * checking whether package 'EcoEnsemble' can be installed ... WARNING
> Found the following significant warnings:
>    WARNING: The tools required to build C++ code for R were not found.
> 
> This warning does *not* appear when I install the package locally and did not appear in the `r_hub`/`win_devel` checks in a previous version of the package that did not include this additional Stan file. There is nothing unusual about this Stan model that would lead it to cause issues like this.
> 
> Searching for this error suggests that this is an issue with the installation of RTools, but since this is not created in the local installation I am very confused. What could be the culprit here / how would I go about debugging this issue?

Just to be clear:  if you remove that file, does the error go away? 
There was a change to the R version last week, so the issue might be the 
new version of R-devel, not the change you made to your package.

Duncan Murdoch


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Mon Apr 25 22:06:28 2022
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 25 Apr 2022 15:06:28 -0500
Subject: [R-pkg-devel] Two problems with fda
In-Reply-To: <480FFE80-30A0-42A0-86BC-684B352340F4@mcgill.ca>
References: <480FFE80-30A0-42A0-86BC-684B352340F4@mcgill.ca>
Message-ID: <f2014990-ad7e-dd00-6010-ffedf0b58988@effectivedefense.org>

Hello, All:


	  Jim Ramsay and I have two problems with 
"https://github.com/JamesRamsay5/fda/":


		    1. GitHub action reports, <<'"pdflatex"' not found>> with 
vignettes.  We have two problems with this:  (1.1) We don't know how to 
report them to the "GitHub action" maintainer(s).  (1.2) We don't know 
what in the vignettes require pdflatex, so we cannot easily remove that.


		    2.  A CRAN submission now triggers a "win-builder" pretest on 
Debian, which complains, "fRegress.Rd:325:22: Warning: nested emphasis 
<code>".[1]  We have three problems with this:  (2.1) We cannot find any 
"nested emphasis" to fix in this.  (2.2) We don't know what the numbers 
"325:22" mean.  (2.3) We don't know how to run this win-builder on 
Debian other than to submit a new version to CRAN.  If we could run this 
Debian win-builder without submitting a version to CRAN, we could do a 
binary search submitting "fRegress.Rd" that we would not want to share 
with users but would still pass "R CMD build / check" for us locally 
until we isolated the problem.


	  Suggestions?
	  Thanks,
	  Spencer Graves


[1]
https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Debian/00check.log


-------- Forwarded Message --------
Subject: 	Fwd: [CRAN-pretest-archived] CRAN Submission fda 6.0.2
Date: 	Fri, 22 Apr 2022 18:13:56 +0000
From: 	James Owen Ramsay, Dr. <james.ramsay at mcgill.ca>
To: 	Spencer Graves <spencer.graves at effectivedefense.org>



Rejection email:

Jim Ramsay
james.ramsay at mcgill.ca <mailto:james.ramsay at mcgill.ca>



> Begin forwarded message:
>
> *From: *ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>
> *Subject: **[CRAN-pretest-archived] CRAN Submission fda 6.0.2*
> *Date: *April 22, 2022 at 1:01:55 PM EDT
> *To: *ramsay at psych.mcgill.ca <mailto:ramsay at psych.mcgill.ca>
> *Cc: *CRAN-submissions at R-project.org 
> <mailto:CRAN-submissions at R-project.org>
> *Reply-To: *CRAN-submissions at R-project.org 
> <mailto:CRAN-submissions at R-project.org>
>
> Dear maintainer,
>
> package fda_6.0.2.tar.gz does not pass the incoming checks 
> automatically, please see the following pre-tests:
> Windows: 
> <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Windows/00check.log 
> <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Windows/00check.log>>
> Status: OK
> Debian: 
> <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Debian/00check.log 
> <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Debian/00check.log>>
> Status: 1 NOTE
>
> Last released version's CRAN status: OK: 12
> See: <https://CRAN.R-project.org/web/checks/check_results_fda.html 
> <https://CRAN.R-project.org/web/checks/check_results_fda.html>>
>
> CRAN Web: <https://cran.r-project.org/package=fda 
> <https://cran.r-project.org/package=fda>>
>
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help 
> on the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel 
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>>
> If you are fairly certain the rejection is a false positive, please 
> reply-all to this message and explain.
>
> More details are given in the directory:
> <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/ 
> <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/>>
> The files will be removed after roughly 7 days.
>
> *** Strong rev. depends ***: adass anacor BayesOrdDesign CausalKinetiX 
> CCA cfda clustEff CollocInfer Compack conformalInference.fd CSTE 
> ctmcmove cyphid dfrr dynr EBCHS Ecfun ExtremalDep FADPclust fda.usc 
> fdaACF fdaMocca fdANOVA fdatest FDRreg flars freqdom.fda ftsa 
> funcharts FuncNN funFEM funHDDC funLBM geofd GPFDA iWISA KFPCA LocKer 
> logitFD mar1s mixedClust MRmediation mxnorm NITPicker pcdpca pCODE 
> pencopulaCond pendensity penDvine PerFit pfica puls PupillometryR 
> quantreg.nonpar refund Rfssa robCompositions Rsfar sasfunclust SCCS 
> sde sft slasso SLFPCA srp stfit switchnpreg T4cluster TestGardener 
> trackeR vows warpMix
>
> Best regards,
> CRAN teams' auto-check service
> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-x86_64
> Check: CRAN incoming feasibility, Result: Note_to_CRAN_maintainers
> ?Maintainer: 'J. O. Ramsay <ramsay at psych.mcgill.ca 
> <mailto:ramsay at psych.mcgill.ca>>'
>
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: HTML version of manual, Result: NOTE
> ?Found the following problems:
> ?fRegress.Rd:325:22: Warning: nested emphasis <code>


From greg @end|ng |rom ||rm@n@y@h@com  Mon Apr 25 22:30:23 2022
From: greg @end|ng |rom ||rm@n@y@h@com (Greg Hunt)
Date: Tue, 26 Apr 2022 06:30:23 +1000
Subject: [R-pkg-devel] Two problems with fda
In-Reply-To: <f2014990-ad7e-dd00-6010-ffedf0b58988@effectivedefense.org>
References: <480FFE80-30A0-42A0-86BC-684B352340F4@mcgill.ca>
 <f2014990-ad7e-dd00-6010-ffedf0b58988@effectivedefense.org>
Message-ID: <CAAS8PA+-3M+e=RYO_DeWrZDFM5FCXxAma9vp9U2F2fih_D1sjg@mail.gmail.com>

Spencer,
For item 2: Could you have nested \code{}?

Greg

On Tue, 26 Apr 2022 at 06:06, Spencer Graves <
spencer.graves at effectivedefense.org> wrote:

> Hello, All:
>
>
>           Jim Ramsay and I have two problems with
> "https://github.com/JamesRamsay5/fda/":
>
>
>                     1. GitHub action reports, <<'"pdflatex"' not found>>
> with
> vignettes.  We have two problems with this:  (1.1) We don't know how to
> report them to the "GitHub action" maintainer(s).  (1.2) We don't know
> what in the vignettes require pdflatex, so we cannot easily remove that.
>
>
>                     2.  A CRAN submission now triggers a "win-builder"
> pretest on
> Debian, which complains, "fRegress.Rd:325:22: Warning: nested emphasis
> <code>".[1]  We have three problems with this:  (2.1) We cannot find any
> "nested emphasis" to fix in this.  (2.2) We don't know what the numbers
> "325:22" mean.  (2.3) We don't know how to run this win-builder on
> Debian other than to submit a new version to CRAN.  If we could run this
> Debian win-builder without submitting a version to CRAN, we could do a
> binary search submitting "fRegress.Rd" that we would not want to share
> with users but would still pass "R CMD build / check" for us locally
> until we isolated the problem.
>
>
>           Suggestions?
>           Thanks,
>           Spencer Graves
>
>
> [1]
>
> https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Debian/00check.log
>
>
> -------- Forwarded Message --------
> Subject:        Fwd: [CRAN-pretest-archived] CRAN Submission fda 6.0.2
> Date:   Fri, 22 Apr 2022 18:13:56 +0000
> From:   James Owen Ramsay, Dr. <james.ramsay at mcgill.ca>
> To:     Spencer Graves <spencer.graves at effectivedefense.org>
>
>
>
> Rejection email:
>
> Jim Ramsay
> james.ramsay at mcgill.ca <mailto:james.ramsay at mcgill.ca>
>
>
>
> > Begin forwarded message:
> >
> > *From: *ligges at statistik.tu-dortmund.de
> > <mailto:ligges at statistik.tu-dortmund.de>
> > *Subject: **[CRAN-pretest-archived] CRAN Submission fda 6.0.2*
> > *Date: *April 22, 2022 at 1:01:55 PM EDT
> > *To: *ramsay at psych.mcgill.ca <mailto:ramsay at psych.mcgill.ca>
> > *Cc: *CRAN-submissions at R-project.org
> > <mailto:CRAN-submissions at R-project.org>
> > *Reply-To: *CRAN-submissions at R-project.org
> > <mailto:CRAN-submissions at R-project.org>
> >
> > Dear maintainer,
> >
> > package fda_6.0.2.tar.gz does not pass the incoming checks
> > automatically, please see the following pre-tests:
> > Windows:
> > <
> https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Windows/00check.log
> > <
> https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Windows/00check.log
> >>
> > Status: OK
> > Debian:
> > <
> https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Debian/00check.log
> > <
> https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Debian/00check.log
> >>
> > Status: 1 NOTE
> >
> > Last released version's CRAN status: OK: 12
> > See: <https://CRAN.R-project.org/web/checks/check_results_fda.html
> > <https://CRAN.R-project.org/web/checks/check_results_fda.html>>
> >
> > CRAN Web: <https://cran.r-project.org/package=fda
> > <https://cran.r-project.org/package=fda>>
> >
> > Please fix all problems and resubmit a fixed version via the webform.
> > If you are not sure how to fix the problems shown, please ask for help
> > on the R-package-devel mailing list:
> > <https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > <https://stat.ethz.ch/mailman/listinfo/r-package-devel>>
> > If you are fairly certain the rejection is a false positive, please
> > reply-all to this message and explain.
> >
> > More details are given in the directory:
> > <
> https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/
> > <
> https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/
> >>
> > The files will be removed after roughly 7 days.
> >
> > *** Strong rev. depends ***: adass anacor BayesOrdDesign CausalKinetiX
> > CCA cfda clustEff CollocInfer Compack conformalInference.fd CSTE
> > ctmcmove cyphid dfrr dynr EBCHS Ecfun ExtremalDep FADPclust fda.usc
> > fdaACF fdaMocca fdANOVA fdatest FDRreg flars freqdom.fda ftsa
> > funcharts FuncNN funFEM funHDDC funLBM geofd GPFDA iWISA KFPCA LocKer
> > logitFD mar1s mixedClust MRmediation mxnorm NITPicker pcdpca pCODE
> > pencopulaCond pendensity penDvine PerFit pfica puls PupillometryR
> > quantreg.nonpar refund Rfssa robCompositions Rsfar sasfunclust SCCS
> > sde sft slasso SLFPCA srp stfit switchnpreg T4cluster TestGardener
> > trackeR vows warpMix
> >
> > Best regards,
> > CRAN teams' auto-check service
> > Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-x86_64
> > Check: CRAN incoming feasibility, Result: Note_to_CRAN_maintainers
> >  Maintainer: 'J. O. Ramsay <ramsay at psych.mcgill.ca
> > <mailto:ramsay at psych.mcgill.ca>>'
> >
> > Flavor: r-devel-linux-x86_64-debian-gcc
> > Check: HTML version of manual, Result: NOTE
> >  Found the following problems:
> >  fRegress.Rd:325:22: Warning: nested emphasis <code>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @vr@h@m@@d|er @end|ng |rom gm@||@com  Mon Apr 25 22:32:09 2022
From: @vr@h@m@@d|er @end|ng |rom gm@||@com (Avraham Adler)
Date: Mon, 25 Apr 2022 20:32:09 +0000
Subject: [R-pkg-devel] Two problems with fda
In-Reply-To: <f2014990-ad7e-dd00-6010-ffedf0b58988@effectivedefense.org>
References: <480FFE80-30A0-42A0-86BC-684B352340F4@mcgill.ca>
 <f2014990-ad7e-dd00-6010-ffedf0b58988@effectivedefense.org>
Message-ID: <CAL6gwnLBxmGoXbziZpg-gSTOLF=tLJk1mQCAc0rk0krv2yG8zA@mail.gmail.com>

Hello, Spencer.

What you may want to try is updating the R-CMD-Check workflow. Your
YAML is from the early days of github actions [1]. I just updated it
for the lamW package to ensure github is using Rtools42. There is a
version 2 of both setupR and pandoc; it may be buried there. Please
see [2] which I know successfully completes [3]. At worst, it
eliminates the outdated YAML from being a cause. As for the second
issue, I believe it means line 325 column 22 of the tex file created
by rhe Rd file, which may not conform to the Rd file itself, which may
have different line lengths. I didn't see any unclosed \code{}
elements; the only place where you wrap it is in lines 312-315.

Hope that helps,

Avi

[1] https://github.com/JamesRamsay5/fda/blob/master/.github/workflows/R-CMD-check.yaml
[2] https://github.com/aadler/lamW/blob/master/.github/workflows/R-CMD-check.yaml
[3] https://github.com/aadler/lamW/actions/runs/2216065520


On Mon, Apr 25, 2022 at 8:07 PM Spencer Graves
<spencer.graves at effectivedefense.org> wrote:
>
> Hello, All:
>
>
>           Jim Ramsay and I have two problems with
> "https://github.com/JamesRamsay5/fda/":
>
>
>                     1. GitHub action reports, <<'"pdflatex"' not found>> with
> vignettes.  We have two problems with this:  (1.1) We don't know how to
> report them to the "GitHub action" maintainer(s).  (1.2) We don't know
> what in the vignettes require pdflatex, so we cannot easily remove that.
>
>
>                     2.  A CRAN submission now triggers a "win-builder" pretest on
> Debian, which complains, "fRegress.Rd:325:22: Warning: nested emphasis
> <code>".[1]  We have three problems with this:  (2.1) We cannot find any
> "nested emphasis" to fix in this.  (2.2) We don't know what the numbers
> "325:22" mean.  (2.3) We don't know how to run this win-builder on
> Debian other than to submit a new version to CRAN.  If we could run this
> Debian win-builder without submitting a version to CRAN, we could do a
> binary search submitting "fRegress.Rd" that we would not want to share
> with users but would still pass "R CMD build / check" for us locally
> until we isolated the problem.
>
>
>           Suggestions?
>           Thanks,
>           Spencer Graves
>
>
> [1]
> https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Debian/00check.log
>
>
> -------- Forwarded Message --------
> Subject:        Fwd: [CRAN-pretest-archived] CRAN Submission fda 6.0.2
> Date:   Fri, 22 Apr 2022 18:13:56 +0000
> From:   James Owen Ramsay, Dr. <james.ramsay at mcgill.ca>
> To:     Spencer Graves <spencer.graves at effectivedefense.org>
>
>
>
> Rejection email:
>
> Jim Ramsay
> james.ramsay at mcgill.ca <mailto:james.ramsay at mcgill.ca>
>
>
>
> > Begin forwarded message:
> >
> > *From: *ligges at statistik.tu-dortmund.de
> > <mailto:ligges at statistik.tu-dortmund.de>
> > *Subject: **[CRAN-pretest-archived] CRAN Submission fda 6.0.2*
> > *Date: *April 22, 2022 at 1:01:55 PM EDT
> > *To: *ramsay at psych.mcgill.ca <mailto:ramsay at psych.mcgill.ca>
> > *Cc: *CRAN-submissions at R-project.org
> > <mailto:CRAN-submissions at R-project.org>
> > *Reply-To: *CRAN-submissions at R-project.org
> > <mailto:CRAN-submissions at R-project.org>
> >
> > Dear maintainer,
> >
> > package fda_6.0.2.tar.gz does not pass the incoming checks
> > automatically, please see the following pre-tests:
> > Windows:
> > <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Windows/00check.log
> > <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Windows/00check.log>>
> > Status: OK
> > Debian:
> > <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Debian/00check.log
> > <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Debian/00check.log>>
> > Status: 1 NOTE
> >
> > Last released version's CRAN status: OK: 12
> > See: <https://CRAN.R-project.org/web/checks/check_results_fda.html
> > <https://CRAN.R-project.org/web/checks/check_results_fda.html>>
> >
> > CRAN Web: <https://cran.r-project.org/package=fda
> > <https://cran.r-project.org/package=fda>>
> >
> > Please fix all problems and resubmit a fixed version via the webform.
> > If you are not sure how to fix the problems shown, please ask for help
> > on the R-package-devel mailing list:
> > <https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > <https://stat.ethz.ch/mailman/listinfo/r-package-devel>>
> > If you are fairly certain the rejection is a false positive, please
> > reply-all to this message and explain.
> >
> > More details are given in the directory:
> > <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/
> > <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/>>
> > The files will be removed after roughly 7 days.
> >
> > *** Strong rev. depends ***: adass anacor BayesOrdDesign CausalKinetiX
> > CCA cfda clustEff CollocInfer Compack conformalInference.fd CSTE
> > ctmcmove cyphid dfrr dynr EBCHS Ecfun ExtremalDep FADPclust fda.usc
> > fdaACF fdaMocca fdANOVA fdatest FDRreg flars freqdom.fda ftsa
> > funcharts FuncNN funFEM funHDDC funLBM geofd GPFDA iWISA KFPCA LocKer
> > logitFD mar1s mixedClust MRmediation mxnorm NITPicker pcdpca pCODE
> > pencopulaCond pendensity penDvine PerFit pfica puls PupillometryR
> > quantreg.nonpar refund Rfssa robCompositions Rsfar sasfunclust SCCS
> > sde sft slasso SLFPCA srp stfit switchnpreg T4cluster TestGardener
> > trackeR vows warpMix
> >
> > Best regards,
> > CRAN teams' auto-check service
> > Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-x86_64
> > Check: CRAN incoming feasibility, Result: Note_to_CRAN_maintainers
> >  Maintainer: 'J. O. Ramsay <ramsay at psych.mcgill.ca
> > <mailto:ramsay at psych.mcgill.ca>>'
> >
> > Flavor: r-devel-linux-x86_64-debian-gcc
> > Check: HTML version of manual, Result: NOTE
> >  Found the following problems:
> >  fRegress.Rd:325:22: Warning: nested emphasis <code>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Mon Apr 25 22:39:17 2022
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 25 Apr 2022 15:39:17 -0500
Subject: [R-pkg-devel] Two problems with fda
In-Reply-To: <CAAS8PA+-3M+e=RYO_DeWrZDFM5FCXxAma9vp9U2F2fih_D1sjg@mail.gmail.com>
References: <480FFE80-30A0-42A0-86BC-684B352340F4@mcgill.ca>
 <f2014990-ad7e-dd00-6010-ffedf0b58988@effectivedefense.org>
 <CAAS8PA+-3M+e=RYO_DeWrZDFM5FCXxAma9vp9U2F2fih_D1sjg@mail.gmail.com>
Message-ID: <0a59d300-bd1e-50b9-63bd-d27acc7f31cd@effectivedefense.org>

Hi, Greg:  I searched for "\emph{" and "\code{":  Every instance seemed 
to be followed by a matching "}" without another embeded "\emph{" or 
"\code{".  Other thoughts?  Thanks, Spencer


On 4/25/22 3:30 PM, Greg Hunt wrote:
> Spencer,
> For item 2: Could you have nested \code{}?
> 
> Greg
> 
> On Tue, 26 Apr 2022 at 06:06, Spencer Graves 
> <spencer.graves at effectivedefense.org 
> <mailto:spencer.graves at effectivedefense.org>> wrote:
> 
>     Hello, All:
> 
> 
>      ? ? ? ? ? Jim Ramsay and I have two problems with
>     "https://github.com/JamesRamsay5/fda/
>     <https://github.com/JamesRamsay5/fda/>":
> 
> 
>      ? ? ? ? ? ? ? ? ? ? 1. GitHub action reports, <<'"pdflatex"' not
>     found>> with
>     vignettes.? We have two problems with this:? (1.1) We don't know how to
>     report them to the "GitHub action" maintainer(s).? (1.2) We don't know
>     what in the vignettes require pdflatex, so we cannot easily remove that.
> 
> 
>      ? ? ? ? ? ? ? ? ? ? 2.? A CRAN submission now triggers a
>     "win-builder" pretest on
>     Debian, which complains, "fRegress.Rd:325:22: Warning: nested emphasis
>     <code>".[1]? We have three problems with this:? (2.1) We cannot find
>     any
>     "nested emphasis" to fix in this.? (2.2) We don't know what the numbers
>     "325:22" mean.? (2.3) We don't know how to run this win-builder on
>     Debian other than to submit a new version to CRAN.? If we could run
>     this
>     Debian win-builder without submitting a version to CRAN, we could do a
>     binary search submitting "fRegress.Rd" that we would not want to share
>     with users but would still pass "R CMD build / check" for us locally
>     until we isolated the problem.
> 
> 
>      ? ? ? ? ? Suggestions?
>      ? ? ? ? ? Thanks,
>      ? ? ? ? ? Spencer Graves
> 
> 
>     [1]
>     https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Debian/00check.log
>     <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Debian/00check.log>
> 
> 
>     -------- Forwarded Message --------
>     Subject:? ? ? ? Fwd: [CRAN-pretest-archived] CRAN Submission fda 6.0.2
>     Date:? ?Fri, 22 Apr 2022 18:13:56 +0000
>     From:? ?James Owen Ramsay, Dr. <james.ramsay at mcgill.ca
>     <mailto:james.ramsay at mcgill.ca>>
>     To:? ? ?Spencer Graves <spencer.graves at effectivedefense.org
>     <mailto:spencer.graves at effectivedefense.org>>
> 
> 
> 
>     Rejection email:
> 
>     Jim Ramsay
>     james.ramsay at mcgill.ca <mailto:james.ramsay at mcgill.ca>
>     <mailto:james.ramsay at mcgill.ca <mailto:james.ramsay at mcgill.ca>>
> 
> 
> 
>      > Begin forwarded message:
>      >
>      > *From: *ligges at statistik.tu-dortmund.de
>     <mailto:ligges at statistik.tu-dortmund.de>
>      > <mailto:ligges at statistik.tu-dortmund.de
>     <mailto:ligges at statistik.tu-dortmund.de>>
>      > *Subject: **[CRAN-pretest-archived] CRAN Submission fda 6.0.2*
>      > *Date: *April 22, 2022 at 1:01:55 PM EDT
>      > *To: *ramsay at psych.mcgill.ca <mailto:ramsay at psych.mcgill.ca>
>     <mailto:ramsay at psych.mcgill.ca <mailto:ramsay at psych.mcgill.ca>>
>      > *Cc: *CRAN-submissions at R-project.org
>      > <mailto:CRAN-submissions at R-project.org
>     <mailto:CRAN-submissions at R-project.org>>
>      > *Reply-To: *CRAN-submissions at R-project.org
>      > <mailto:CRAN-submissions at R-project.org
>     <mailto:CRAN-submissions at R-project.org>>
>      >
>      > Dear maintainer,
>      >
>      > package fda_6.0.2.tar.gz does not pass the incoming checks
>      > automatically, please see the following pre-tests:
>      > Windows:
>      >
>     <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Windows/00check.log
>     <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Windows/00check.log>
> 
>      >
>     <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Windows/00check.log
>     <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Windows/00check.log>>>
>      > Status: OK
>      > Debian:
>      >
>     <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Debian/00check.log
>     <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Debian/00check.log>
> 
>      >
>     <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Debian/00check.log
>     <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/Debian/00check.log>>>
>      > Status: 1 NOTE
>      >
>      > Last released version's CRAN status: OK: 12
>      > See:
>     <https://CRAN.R-project.org/web/checks/check_results_fda.html
>     <https://CRAN.R-project.org/web/checks/check_results_fda.html>
>      > <https://CRAN.R-project.org/web/checks/check_results_fda.html
>     <https://CRAN.R-project.org/web/checks/check_results_fda.html>>>
>      >
>      > CRAN Web: <https://cran.r-project.org/package=fda
>     <https://cran.r-project.org/package=fda>
>      > <https://cran.r-project.org/package=fda
>     <https://cran.r-project.org/package=fda>>>
>      >
>      > Please fix all problems and resubmit a fixed version via the webform.
>      > If you are not sure how to fix the problems shown, please ask for
>     help
>      > on the R-package-devel mailing list:
>      > <https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>      > <https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>>>
>      > If you are fairly certain the rejection is a false positive, please
>      > reply-all to this message and explain.
>      >
>      > More details are given in the directory:
>      >
>     <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/
>     <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/>
> 
>      >
>     <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/
>     <https://win-builder.r-project.org/incoming_pretest/fda_6.0.2_20220422_184836/>>>
>      > The files will be removed after roughly 7 days.
>      >
>      > *** Strong rev. depends ***: adass anacor BayesOrdDesign
>     CausalKinetiX
>      > CCA cfda clustEff CollocInfer Compack conformalInference.fd CSTE
>      > ctmcmove cyphid dfrr dynr EBCHS Ecfun ExtremalDep FADPclust fda.usc
>      > fdaACF fdaMocca fdANOVA fdatest FDRreg flars freqdom.fda ftsa
>      > funcharts FuncNN funFEM funHDDC funLBM geofd GPFDA iWISA KFPCA
>     LocKer
>      > logitFD mar1s mixedClust MRmediation mxnorm NITPicker pcdpca pCODE
>      > pencopulaCond pendensity penDvine PerFit pfica puls PupillometryR
>      > quantreg.nonpar refund Rfssa robCompositions Rsfar sasfunclust SCCS
>      > sde sft slasso SLFPCA srp stfit switchnpreg T4cluster TestGardener
>      > trackeR vows warpMix
>      >
>      > Best regards,
>      > CRAN teams' auto-check service
>      > Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-x86_64
>      > Check: CRAN incoming feasibility, Result: Note_to_CRAN_maintainers
>      > ?Maintainer: 'J. O. Ramsay <ramsay at psych.mcgill.ca
>     <mailto:ramsay at psych.mcgill.ca>
>      > <mailto:ramsay at psych.mcgill.ca <mailto:ramsay at psych.mcgill.ca>>>'
>      >
>      > Flavor: r-devel-linux-x86_64-debian-gcc
>      > Check: HTML version of manual, Result: NOTE
>      > ?Found the following problems:
>      > ?fRegress.Rd:325:22: Warning: nested emphasis <code>
> 
>     ______________________________________________
>     R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>     mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Apr 25 22:40:16 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 25 Apr 2022 23:40:16 +0300
Subject: [R-pkg-devel] Two problems with fda
In-Reply-To: <f2014990-ad7e-dd00-6010-ffedf0b58988@effectivedefense.org>
References: <480FFE80-30A0-42A0-86BC-684B352340F4@mcgill.ca>
 <f2014990-ad7e-dd00-6010-ffedf0b58988@effectivedefense.org>
Message-ID: <20220425234016.439173ab@Tarkus>

On Mon, 25 Apr 2022 15:06:28 -0500
Spencer Graves <spencer.graves at effectivedefense.org> wrote:

> GitHub action reports, <<'"pdflatex"' not found>> with 
> vignettes.

No personal experience with GitHub Actions, but have you tried
following the advice by G?bor Cs?rdi from a few days ago?

https://stat.ethz.ch/pipermail/r-package-devel/2022q2/007970.html

You probably need to declare that your workflow needs tinytex installed
(as described at
<https://github.com/r-lib/actions/tree/v2-branch/setup-tinytex#usage>),
but if you get different advice from more experienced people, follow
that first.

> (1.2) We don't  know what in the vignettes require pdflatex, so we
> cannot easily remove that.

This line sets the output format of the vignette to PDF:

https://github.com/JamesRamsay5/fda/blob/master/vignettes/monotoneFunctions.Rmd#L5

> "fRegress.Rd:325:22: Warning: nested emphasis <code>"

This is a new check, which runs HTML Tidy on the HTML version of the
manual. If you install HTML Tidy on your local machine and a recent
enough version of R (R-4.2 is good enough, and so was R-devel for a few
weeks), you'll get the same check on your local machine, too.

> (2.1) We cannot find any "nested emphasis" to fix in this.
> (2.2) We don't know what the numbers "325:22" mean.

Row and column number in the HTML file, I beleive. Use R CMD Rdconv to
produce an HTML file from man/fRegress.Rd, or use help(fRegress, help =
'html') to see it. If I check the HTML documentation on my machine, my
HTML file ends up slightly different, and the error is found on line
313 instead:

<tr valign="top"><td><code>The <code>fRegress</code> fit object
case:</code></td>

A code tag is apparently not allowed inside another code tag. I guess
this means that \code{} is not allowed inside \item{} any more, since
the original source line for that is:

\item{The \code{fRegress} fit object case:}

-- 
Best regards,
Ivan


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue Apr 26 01:01:41 2022
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 25 Apr 2022 18:01:41 -0500
Subject: [R-pkg-devel] Two problems with fda
In-Reply-To: <20220425234016.439173ab@Tarkus>
References: <480FFE80-30A0-42A0-86BC-684B352340F4@mcgill.ca>
 <f2014990-ad7e-dd00-6010-ffedf0b58988@effectivedefense.org>
 <20220425234016.439173ab@Tarkus>
Message-ID: <e16d1e71-bda2-8adf-6f12-5eaf3b18033a@effectivedefense.org>

Hi, G?bor & Ivan:


	  I'm trying to follow:


https://stat.ethz.ch/pipermail/r-package-devel/2022q2/007970.html


	  I get:


Error: .github#L1
the `uses' attribute must be a path, a Docker image, or owner/repo at ref


	  See:


https://github.com/JamesRamsay5/fda/actions/runs/2223323476


	  What am I missing?


	  Thanks,
	  Spencer Graves
	

On 4/25/22 3:40 PM, Ivan Krylov wrote:
> On Mon, 25 Apr 2022 15:06:28 -0500
> Spencer Graves <spencer.graves at effectivedefense.org> wrote:
> 
>> GitHub action reports, <<'"pdflatex"' not found>> with
>> vignettes.
> 
> No personal experience with GitHub Actions, but have you tried
> following the advice by G?bor Cs?rdi from a few days ago?
> 
> https://stat.ethz.ch/pipermail/r-package-devel/2022q2/007970.html
> 
> You probably need to declare that your workflow needs tinytex installed
> (as described at
> <https://github.com/r-lib/actions/tree/v2-branch/setup-tinytex#usage>),
> but if you get different advice from more experienced people, follow
> that first.
> 
>> (1.2) We don't  know what in the vignettes require pdflatex, so we
>> cannot easily remove that.
> 
> This line sets the output format of the vignette to PDF:
> 
> https://github.com/JamesRamsay5/fda/blob/master/vignettes/monotoneFunctions.Rmd#L5
> 
>> "fRegress.Rd:325:22: Warning: nested emphasis <code>"
> 
> This is a new check, which runs HTML Tidy on the HTML version of the
> manual. If you install HTML Tidy on your local machine and a recent
> enough version of R (R-4.2 is good enough, and so was R-devel for a few
> weeks), you'll get the same check on your local machine, too.
> 
>> (2.1) We cannot find any "nested emphasis" to fix in this.
>> (2.2) We don't know what the numbers "325:22" mean.
> 
> Row and column number in the HTML file, I beleive. Use R CMD Rdconv to
> produce an HTML file from man/fRegress.Rd, or use help(fRegress, help =
> 'html') to see it. If I check the HTML documentation on my machine, my
> HTML file ends up slightly different, and the error is found on line
> 313 instead:
> 
> <tr valign="top"><td><code>The <code>fRegress</code> fit object
> case:</code></td>
> 
> A code tag is apparently not allowed inside another code tag. I guess
> this means that \code{} is not allowed inside \item{} any more, since
> the original source line for that is:
> 
> \item{The \code{fRegress} fit object case:}
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Apr 26 02:24:07 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 25 Apr 2022 20:24:07 -0400
Subject: [R-pkg-devel] Two problems with fda
In-Reply-To: <20220425234016.439173ab@Tarkus>
References: <480FFE80-30A0-42A0-86BC-684B352340F4@mcgill.ca>
 <f2014990-ad7e-dd00-6010-ffedf0b58988@effectivedefense.org>
 <20220425234016.439173ab@Tarkus>
Message-ID: <2bb78528-297c-2d7b-92ee-3df36c41b392@gmail.com>

On 25/04/2022 4:40 p.m., Ivan Krylov wrote:
> On Mon, 25 Apr 2022 15:06:28 -0500
> Spencer Graves <spencer.graves at effectivedefense.org> wrote:
> 
>> GitHub action reports, <<'"pdflatex"' not found>> with
>> vignettes.
> 
> No personal experience with GitHub Actions, but have you tried
> following the advice by G?bor Cs?rdi from a few days ago?
> 
> https://stat.ethz.ch/pipermail/r-package-devel/2022q2/007970.html
> 
> You probably need to declare that your workflow needs tinytex installed
> (as described at
> <https://github.com/r-lib/actions/tree/v2-branch/setup-tinytex#usage>),
> but if you get different advice from more experienced people, follow
> that first.
> 
>> (1.2) We don't  know what in the vignettes require pdflatex, so we
>> cannot easily remove that.
> 
> This line sets the output format of the vignette to PDF:
> 
> https://github.com/JamesRamsay5/fda/blob/master/vignettes/monotoneFunctions.Rmd#L5
> 
>> "fRegress.Rd:325:22: Warning: nested emphasis <code>"
> 
> This is a new check, which runs HTML Tidy on the HTML version of the
> manual. If you install HTML Tidy on your local machine and a recent
> enough version of R (R-4.2 is good enough, and so was R-devel for a few
> weeks), you'll get the same check on your local machine, too.
> 
>> (2.1) We cannot find any "nested emphasis" to fix in this.
>> (2.2) We don't know what the numbers "325:22" mean.
> 
> Row and column number in the HTML file, I beleive. Use R CMD Rdconv to
> produce an HTML file from man/fRegress.Rd, or use help(fRegress, help =
> 'html') to see it. If I check the HTML documentation on my machine, my
> HTML file ends up slightly different, and the error is found on line
> 313 instead:
> 
> <tr valign="top"><td><code>The <code>fRegress</code> fit object
> case:</code></td>
> 
> A code tag is apparently not allowed inside another code tag. I guess
> this means that \code{} is not allowed inside \item{} any more, since
> the original source line for that is:
> 
> \item{The \code{fRegress} fit object case:}

That doesn't sound right:  items aren't necessarily code.  I just took a 
look at the file, which has:

\value{
   These functions return either a standard \code{fRegress} fit object or
   or a model specification:
   \item{The \code{fRegress} fit object case:}{


Aha, in a \value{} section, bare \items are supposed to mark components 
of the value, so they are automatically code.  I think the fix for this 
is to make it an explicit \describe list:

\value{
   These functions return either a standard \code{fRegress} fit object or
   or a model specification:
   \describe{
     \item{The \code{fRegress} fit object case:}{

   ... eventually ...

   }

Duncan Murdoch


From dom|n|c@comto|@ @end|ng |rom gm@||@com  Tue Apr 26 04:45:41 2022
From: dom|n|c@comto|@ @end|ng |rom gm@||@com (Dominic Comtois)
Date: Mon, 25 Apr 2022 22:45:41 -0400
Subject: [R-pkg-devel] How to fix Tcl/Tk Error on Mac OS build
Message-ID: <CAEfsz7rHsuKtyMyLpbzPYaPFqWE1SfguwypCEMgvyix9AHbtyQ@mail.gmail.com>

I was asked by CRAN to fix some problems appearing in my summarytools
<https://cran.r-project.org/web/checks/check_results_summarytools.html>'
package build checks. Trivial email problems aside, on the summary page
<https://www.r-project.org/nosvn/R.check/r-release-macos-arm64/summarytools-00check.html>
for the Mac OS build, I see:

[...]
checking whether package ?summarytools? can be installed ... [1s/1s] ERROR
Installation failed.
See
?/Volumes/Builds/packages/big-sur-arm64/results/4.2/summarytools.Rcheck/00install.out?
for details.
[...]

On the details page
<https://www.r-project.org/nosvn/R.check/r-release-macos-arm64/summarytools-00install.html>,
I see:

[...]
** byte-compile and prepare package for lazy loadingtcltk DLL is
linked to '/opt/R/arm64/lib/libtk8.6.dylib'
Error: .onLoad failed in loadNamespace() for 'tcltk', details:
  call: fun(libname, pkgname)
  error: Tcl/Tk libraries are missing: install the Tcl/Tk component
from the R installerExecution halted
ERROR: lazy loading failed for package ?summarytools?
[...]

Tcl/Tk is used by some functions to allow users to bring up an "open
file...", & "save file..." dialogs & message boxes, as well as the
tclvalue() function. In my NAMESPACE, I have:

importFrom(tcltk,tclvalue)
importFrom(tcltk,tk_messageBox)
importFrom(tcltk,tkgetOpenFile)
importFrom(tcltk,tkgetSaveFile)

Also, a prerequisite is to have XQuartz <https://www.xquartz.org/>
installed on Mac OS.

Summarytools has been around for a while, and I never had this problem
before. And since I don't have a Mac machine, I'm not sure how to go about
this. A Google search reveals that several other packages have the same
issue. But I wasn't able to find the root cause nor a proper solution. Any
tips / pointers would be greatly appreciated.

Thanks,

Dominic Comtois
summarytools
<https://cran.r-project.org/web/packages/summarytools/index.html> author &
maintainer

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Tue Apr 26 13:38:09 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 26 Apr 2022 06:38:09 -0500
Subject: [R-pkg-devel] How to fix Tcl/Tk Error on Mac OS build
In-Reply-To: <CAEfsz7rHsuKtyMyLpbzPYaPFqWE1SfguwypCEMgvyix9AHbtyQ@mail.gmail.com>
References: <CAEfsz7rHsuKtyMyLpbzPYaPFqWE1SfguwypCEMgvyix9AHbtyQ@mail.gmail.com>
Message-ID: <25191.55713.853018.141362@rob.eddelbuettel.com>


Dominic,

On 25 April 2022 at 22:45, Dominic Comtois wrote:
| ** byte-compile and prepare package for lazy loadingtcltk DLL is
| linked to '/opt/R/arm64/lib/libtk8.6.dylib'
| Error: .onLoad failed in loadNamespace() for 'tcltk', details:
|   call: fun(libname, pkgname)
|   error: Tcl/Tk libraries are missing: install the Tcl/Tk component
| from the R installerExecution halted
| ERROR: lazy loading failed for package ?summarytools?
| [...]

Doesn't this simply demonstrate that tcltk is missing on that platform?
Which is not your fault, or under your control.

There is no simple or singular way for us to communicate such setup issues to
CRAn so you could try to email the maintainer of that port here or privately.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Tue Apr 26 14:38:19 2022
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Tue, 26 Apr 2022 14:38:19 +0200
Subject: [R-pkg-devel] How to fix Tcl/Tk Error on Mac OS build
In-Reply-To: <25191.55713.853018.141362@rob.eddelbuettel.com>
References: <CAEfsz7rHsuKtyMyLpbzPYaPFqWE1SfguwypCEMgvyix9AHbtyQ@mail.gmail.com>
 <25191.55713.853018.141362@rob.eddelbuettel.com>
Message-ID: <2a4c9f61-f8f1-f093-d4ef-f2a2b2a979cc@gmail.com>


On 4/26/22 13:38, Dirk Eddelbuettel wrote:
> Dominic,
>
> On 25 April 2022 at 22:45, Dominic Comtois wrote:
> | ** byte-compile and prepare package for lazy loadingtcltk DLL is
> | linked to '/opt/R/arm64/lib/libtk8.6.dylib'
> | Error: .onLoad failed in loadNamespace() for 'tcltk', details:
> |   call: fun(libname, pkgname)
> |   error: Tcl/Tk libraries are missing: install the Tcl/Tk component
> | from the R installerExecution halted
> | ERROR: lazy loading failed for package ?summarytools?
> | [...]
>
> Doesn't this simply demonstrate that tcltk is missing on that platform?
> Which is not your fault, or under your control.

Yes, as can be seen by looking at other packages using tcltk (e.g. 
tcltk2 or tkrplot).

> There is no simple or singular way for us to communicate such setup issues to
> CRAn so you could try to email the maintainer of that port here or privately.

You can find the name and address of the maintainer here

https://cran.r-project.org/web/packages/external_libs.html

(linked from the CRAN Repository Policy, 
https://cran.r-project.org/web/packages/policies.html)

and report, but that is probably no longer necessary as Simon is reading 
this list as well.

Best
Tomas

>
> Dirk
>


From dw|n@em|u@ @end|ng |rom comc@@t@net  Tue Apr 26 17:07:30 2022
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Tue, 26 Apr 2022 09:07:30 -0600
Subject: [R-pkg-devel] How to fix Tcl/Tk Error on Mac OS build
In-Reply-To: <2a4c9f61-f8f1-f093-d4ef-f2a2b2a979cc@gmail.com>
References: <CAEfsz7rHsuKtyMyLpbzPYaPFqWE1SfguwypCEMgvyix9AHbtyQ@mail.gmail.com>
 <25191.55713.853018.141362@rob.eddelbuettel.com>
 <2a4c9f61-f8f1-f093-d4ef-f2a2b2a979cc@gmail.com>
Message-ID: <C304AEAC-9454-4F7B-A24B-93E4C15693F0@comcast.net>

Apologies if these items are know to be common knowledge. I have no experience with package development that uses TcL/Tk. My sketchy knowledge comes only from seeing it mentioned on the Mac-specific pages and on R-Mac-SIG mailing list.
 
This appears possibly the most on point since arm build is mentioned in the error log:

On 2021-09-18 2:20 a.m., Prof Brian Ripley wrote:
> On 09/09/2021 19:03, John Fox wrote:
>> Dear Simon, Philippe, and list members,
>> 
>> I've encountered some Tcl/Tk-related issues with the Apple silicon arm64 build of R 4.1.0 for macOS. These issues affect the Rcmdr package, although they don't prevent it from working:
>> 
>> (1) Some fonts that are available for the Intel build appear to be missing from the arm64 build. Compare the screen shots of the Rcmdr main window at <https://socialsciences.mcmaster.ca/jfox/.Pickup/x86_64-apple-darwin17.0.png> (Intel build) and <https://socialsciences.mcmaster.ca/jfox/.Pickup/aarch64-apple-darwin20.png> (arm64 build). This problem is purely aesthetic.
>> 
>> (2) The Tcl/Tk Tktable package is apparently absent from the arm64 build but still present in the Intel build. The Rcmdr detects its absence and suppresses some features (i.e., those requiring the Rcmdr data editor). I understand that the Tktable package is problematic and it may have been removed intentionally.
>> 
>> The Tcl/Tk Tablelist package would be a reasonable substitute, and were it available, I could use it to restore the missing features in the Rcmdr. I'm aware that Philippe Grosjean planned to incorporate Tablelist in his tcltk2 package, but as far as I know, that plan hasn't yet materialized. If I knew how to supply a Tcl/Tk package in an R package, I could put Tablelist directly in the Rcmdr.
>> 
>> Any help would be greatly appreciated.
>> 
>> John
>> 
> To close this circle, Simon has provided
> https://mac.r-project.org/libs-arm64/tcltk-8.6.11-xft-darwin20.4-arm64.pkg
> If you install that, it updates Tk and adds Tktable, solving both problems.  (As the Tcl/Tk installation is shared between R versions, this will fix 4.1.0 as well as 4.1.1.  It will be incorporated in future releases.)


-----

The R for MacOS page says:
-----------

R-4.2.0.pkg (notarized and signed)
SHA1-hash: 2a90fb8629e44f72f9d89d6a9bac9b71564587d7
(ca. 90MB) for Intel Macs	

R 4.2.0 binary for macOS 10.13 (High Sierra) and higher, Intel 64-bit build, signed and notarized package.
Contains R 4.2.0 framework, R.app GUI 1.78 in 64-bit for Intel Macs, Tcl/Tk 8.6.6 X11 libraries and Texinfo 6.7. The latter two components are optional and can be ommitted when choosing "custom install", they are only needed if you want to use the tcltk R package or build package documentation from sources.
---------------

And there is further information at the Mac R Tools page: https://cran.r-project.org/bin/macosx/tools/

------------------
-------------------
And there is discussion about how to avoid unnecessary efforts to load TkTcl in the R-Mac-SIG list

https://markmail.org/search/?q=list%3Aorg.r-project.r-help+tcl+tk+package#query:list%3Aorg.r-project.r-help%20tcl%20tk%20package%20order%3Adate-backward+page:1+mid:s4zpfqw6t3vbr4z6+state:results

--------------

HTH;
David.
--------------


> On Apr 26, 2022, at 6:38 AM, Tomas Kalibera <tomas.kalibera at gmail.com> wrote:
> 
> 
> On 4/26/22 13:38, Dirk Eddelbuettel wrote:
>> Dominic,
>> 
>> On 25 April 2022 at 22:45, Dominic Comtois wrote:
>> | ** byte-compile and prepare package for lazy loadingtcltk DLL is
>> | linked to '/opt/R/arm64/lib/libtk8.6.dylib'
>> | Error: .onLoad failed in loadNamespace() for 'tcltk', details:
>> |   call: fun(libname, pkgname)
>> |   error: Tcl/Tk libraries are missing: install the Tcl/Tk component
>> | from the R installerExecution halted
>> | ERROR: lazy loading failed for package ?summarytools?
>> | [...]
>> 
>> Doesn't this simply demonstrate that tcltk is missing on that platform?
>> Which is not your fault, or under your control.
> 
> Yes, as can be seen by looking at other packages using tcltk (e.g. tcltk2 or tkrplot).
> 
>> There is no simple or singular way for us to communicate such setup issues to
>> CRAn so you could try to email the maintainer of that port here or privately.
> 
> You can find the name and address of the maintainer here
> 
> https://cran.r-project.org/web/packages/external_libs.html
> 
> (linked from the CRAN Repository Policy, https://cran.r-project.org/web/packages/policies.html)
> 
> and report, but that is probably no longer necessary as Simon is reading this list as well.
> 
> Best
> Tomas
> 
>> 
>> Dirk
>> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From j|ox @end|ng |rom mcm@@ter@c@  Tue Apr 26 18:01:52 2022
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Tue, 26 Apr 2022 12:01:52 -0400
Subject: [R-pkg-devel] [R-SIG-Mac] R CMD check "HTML version of manual"
 NOTE/Warnings
In-Reply-To: <c5fc924b-8154-b541-41b1-0d10a3fe2475@stats.ox.ac.uk>
References: <8c7b94c4-b0de-0e32-da29-0d6701e503e7@mcmaster.ca>
 <e964b23d-0905-c7a4-4474-98032268d017@stats.ox.ac.uk>
 <e790b76b-e615-2fce-dcec-e09efabd59b5@mcmaster.ca>
 <F963B5EF-0F5F-4D18-87FF-1640E57D2E1A@gmail.com>
 <c5fc924b-8154-b541-41b1-0d10a3fe2475@stats.ox.ac.uk>
Message-ID: <503de2b2-3641-698d-bacb-8756aa480a35@mcmaster.ca>

Dear Brian and Peter,

As Brian mentioned, I still get warnings (though different ones) from 
the updated tidy. For example, for the car package:

------ snip -------

* checking HTML version of manual ... NOTE
Found the following problems:
Anova.Rd:4:1: Warning: <link> inserting "type" attribute
Anova.Rd:12:1: Warning: <script> proprietary attribute "onload"
Anova.Rd:12:1: Warning: <script> inserting "type" attribute
Anova.Rd:17:1: Warning: <table> lacks "summary" attribute
Anova.Rd:135:1: Warning: <table> lacks "summary" attribute
Anova.Rd:285:1: Warning: <table> lacks "summary" attribute

------ snip -------

As before, these warnings are generated for all of the .Rd files in the 
package.

I'm cc'ing the r-package-devel list (with apologies for cross-posting) 
so that there will be a record there.

Best,
  John

On 2022-04-26 11:22 a.m., Prof Brian Ripley wrote:
> On 26/04/2022 15:43, peter dalgaard wrote:
>> Yes, I think this should go to r-package-devel or maybe even file a 
>> bug report against "R CMD check". Looks like we "just" need to revise 
>> the logic at the start of check_Rd2HTML():
>>
>> ???? check_Rd2HTML <- function(pkgdir) {
>> ???????? if(!nzchar(Sys.which("tidy")) ||
>> ??????????? !startsWith(system2("tidy", "--version", stdout = TRUE),
>> ??????????????????????? "HTML Tidy"))
>> ???????????? return()
>>
>> to either
>>
>> - look for a version number (which the Apple builds don't have)
>> - explicitly reject the 2006 Apple builds
>> - somehow allow for an override using an environment variable
> 
> This is switched on by _R_CHECK_RD_VALIDATE_RD2HTML_=true or --as-cran. 
>  ?I plan to at least let _R_CHECK_RD_VALIDATE_RD2HTML_=false override 
> --as-cran.
> 
> There seems to have been a report on r-package-devel not mentioning macOS:
> 
> https://stat.ethz.ch/pipermail/r-package-devel/2022q1/007804.html
> https://stat.ethz.ch/pipermail/r-package-devel/2022q2/007932.html
> 
> but I don't think anyone had a clue that the macOS 'tidy' might be 
> insufficient.
> 
>>
>> or thereabouts...
>>
>> - pd
>>
>>> On 26 Apr 2022, at 16:25 , John Fox <jfox at mcmaster.ca> wrote:
>>>
>>> Dear Brian,
>>>
>>> Thank you very much for the explanation. Please see interline below:
>>>
>>> On 2022-04-25 4:51 p.m., Prof Brian Ripley wrote:
>>>> On 25/04/2022 20:04, John Fox wrote:
>>>>> Dear R-sig-mac list members,
>>>>>
>>>>> When checking packages --as-cran with R 4.2.0 (and R 4.2.0 
>>>>> patched), I'm seeing multiple warnings (and a NOTE) concerning the 
>>>>> HTML version of the package help-page manuals. The warning appears 
>>>>> for every .Rd file in all of the packages that I've checked. I 
>>>>> didn't see this problem before R 4.2.0.
>>>>>
>>>>> I'm writing to the r-sig-mac list rather than r-package-devel 
>>>>> because I
>>>> Unfortunately the authors of this are not on r-sig-mac.
>>>
>>> Should I mention this as well on r-package-devel?
>>>
>>>>> don't encounter the same problem under Windows. Nor does it appear 
>>>>> on the CRAN check pages for the packages.
>>>> This check is only done if you have 'tidy' on the path.? My Monterey 
>>>> M1 MBP has
>>>> auk2% tidy --version
>>>> HTML Tidy for Mac OS X released on 31 October 2006 - Apple Inc. 
>>>> build 2649
>>>
>>> That's exactly the version installed on my MacBook Pro. Is this 
>>> standard for Monterey? If not, would it be best simply to remove tidy 
>>> (and how did it get there?).
>>>
>>>> I think that is far too old.? The short answer is to ignore these, 
>>>> or update tidy (from http://binaries.html-tidy.org/) which (5.8.0) 
>>>> finds different issues for car that I do not see on Fedora (with 
>>>> 5.7.16).
>>>
>>> I saw these warnings for every .Rd file in all of the packages I 
>>> checked, not just for the car package. The HTML is presumably 
>>> generated from the .Rd files by the R installation process. If tidy 
>>> is general, or common, on Monterey Macs, I wonder why others aren't 
>>> reporting similar warnings on R CMD check --as-cran.
>>>
>>>> Probably your Windows machine does not have tidy installed.
>>>>> I know that there's been discussion of adding an HTML manual, which 
>>>>> seems a good idea, but I didn't realize that this has apparently 
>>>>> already been implemented.
>>>>>
>>>>> Has anyone else experienced this problem or does anyone understand 
>>>>> its source? AFAIK, there's nothing unusual about the R installation 
>>>>> on my Mac, but of course there may be some setting that 
>>>>> inadvertently turned on checking the HTML manual.
>>>> --as-cran turned it on ((f tidy is available).
>>>
>>> Again, thank you for the explanation.
>>>
>>> Best,
>>> John
>>>
>>>>>
>>>>> Here's an example (with many lines elided, . . .):
>>>>>
>>>>> ------ snip ------
>>>>>
>>>>> Johns-MacBook-Pro:car johnfox$ R CMD check --as-cran car_3.0-13.tar.gz
>>>>> * using log directory 
>>>>> '/Users/johnfox/Documents/R-package-sources/car/car.Rcheck'
>>>>> * using R version 4.2.0 Patched (2022-04-24 r82246)
>>>>> * using platform: aarch64-apple-darwin20 (64-bit)
>>>>> * using session charset: UTF-8
>>>>> * using option '--as-cran'
>>>>> * checking for file 'car/DESCRIPTION' ... OK
>>>>> * this is package 'car' version '3.0-13'
>>>>> * checking CRAN incoming feasibility ... Note_to_CRAN_maintainers
>>>>> Maintainer: 'John Fox <jfox at mcmaster.ca>'
>>>>> * checking package namespace information ... OK
>>>>>
>>>>> . . .
>>>>>
>>>>> * checking PDF version of manual ... OK
>>>>> * checking HTML version of manual ... NOTE
>>>>> Found the following problems:
>>>>> Anova.Rd:4:1: Warning: <link> inserting "type" attribute
>>>>> Anova.Rd:12:1: Warning: <script> proprietary attribute "onload"
>>>>> Anova.Rd:12:1: Warning: <script> inserting "type" attribute
>>>>> Anova.Rd:17:1: Warning: <table> lacks "summary" attribute
>>>>> Anova.Rd:135:1: Warning: <table> lacks "summary" attribute
>>>>> Anova.Rd:285:1: Warning: <table> lacks "summary" attribute
>>>>> Boot.Rd:4:1: Warning: <link> inserting "type" attribute
>>>>> Boot.Rd:12:1: Warning: <script> proprietary attribute "onload"
>>>>> Boot.Rd:12:1: Warning: <script> inserting "type" attribute
>>>>> Boot.Rd:17:1: Warning: <table> lacks "summary" attribute
>>>>> Boot.Rd:56:1: Warning: <table> lacks "summary" attribute
>>>>>
>>>>> . . .
>>>>>
>>>>> which.names.Rd:12:1: Warning: <script> proprietary attribute "onload"
>>>>> which.names.Rd:12:1: Warning: <script> inserting "type" attribute
>>>>> which.names.Rd:17:1: Warning: <table> lacks "summary" attribute
>>>>> which.names.Rd:44:1: Warning: <table> lacks "summary" attribute
>>>>> * checking for non-standard things in the check directory ... OK
>>>>> * checking for detritus in the temp directory ... OK
>>>>> * DONE
>>>>>
>>>>> Status: 1 NOTE
>>>>> See
>>>>>    
>>>>> '/Users/johnfox/Documents/R-package-sources/car/car.Rcheck/00check.log' 
>>>>>
>>>>> for details.
>>>>>
>>>>> ------ snip ------
>>>>>
>>>>> Any help would be appreciated.
>>>>>
>>>>> Thanks,
>>>>> ?? John
>>> -- 
>>> John Fox, Professor Emeritus
>>> McMaster University
>>> Hamilton, Ontario, Canada
>>> web: https://socialsciences.mcmaster.ca/jfox/
>>>
>>> _______________________________________________
>>> R-SIG-Mac mailing list
>>> R-SIG-Mac at r-project.org
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-mac
>>
> 
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Apr 26 18:46:17 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 26 Apr 2022 12:46:17 -0400
Subject: [R-pkg-devel] Two problems with fda
In-Reply-To: <2bb78528-297c-2d7b-92ee-3df36c41b392@gmail.com>
References: <480FFE80-30A0-42A0-86BC-684B352340F4@mcgill.ca>
 <f2014990-ad7e-dd00-6010-ffedf0b58988@effectivedefense.org>
 <20220425234016.439173ab@Tarkus>
 <2bb78528-297c-2d7b-92ee-3df36c41b392@gmail.com>
Message-ID: <54719f3b-4001-b611-0743-af927e5fa264@gmail.com>

On 25/04/2022 8:24 p.m., Duncan Murdoch wrote:
  ...
> 
> \value{
>     These functions return either a standard \code{fRegress} fit object or
>     or a model specification:
>     \item{The \code{fRegress} fit object case:}{
> 
> 
> Aha, in a \value{} section, bare \items are supposed to mark components
> of the value, so they are automatically code.  I think the fix for this
> is to make it an explicit \describe list:
> 
> \value{
>     These functions return either a standard \code{fRegress} fit object or
>     or a model specification:
>     \describe{
>       \item{The \code{fRegress} fit object case:}{
> 
>     ... eventually ...
> 
>     }

An even simpler fix:  don't mark the section title as an \item, i.e. 
write as

\value{
    These functions return either a standard \code{fRegress} fit object or
    or a model specification.

    The \code{fRegress} fit object case:


    \item{field}{description .... }


Duncan Murdoch


From @|mon@urb@nek @end|ng |rom R-project@org  Wed Apr 27 00:31:52 2022
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Wed, 27 Apr 2022 10:31:52 +1200
Subject: [R-pkg-devel] How to fix Tcl/Tk Error on Mac OS build
In-Reply-To: <CAEfsz7rHsuKtyMyLpbzPYaPFqWE1SfguwypCEMgvyix9AHbtyQ@mail.gmail.com>
References: <CAEfsz7rHsuKtyMyLpbzPYaPFqWE1SfguwypCEMgvyix9AHbtyQ@mail.gmail.com>
Message-ID: <9A1171CE-9478-408A-978B-F65DA847526F@R-project.org>

Thanks, indeed, as part of full re-install for R 4.2.0 package builds the Tcl/Tk libraries were missing. Now fixed and summarytools check with

* checking data for non-ASCII characters ... NOTE
  Note: found 78 marked UTF-8 strings
Status: 1 NOTE

I'll just repeat the important link that Tomas posted: https://cran.r-project.org/web/packages/external_libs.html

On a slightly orthogonal note (not related to the question other than it involves tcltk): I'd like to point out that Tcl/Tk is often not available on computing servers, so I would recommend packages that do not provide GUI tools to avoid dependence on tcltk if not strictly necessary as it prevents the use in headless HPC environments.

Cheers,
Simon


> On Apr 26, 2022, at 2:45 PM, Dominic Comtois <dominic.comtois at gmail.com> wrote:
> 
> I was asked by CRAN to fix some problems appearing in my summarytools
> <https://cran.r-project.org/web/checks/check_results_summarytools.html>'
> package build checks. Trivial email problems aside, on the summary page
> <https://www.r-project.org/nosvn/R.check/r-release-macos-arm64/summarytools-00check.html>
> for the Mac OS build, I see:
> 
> [...]
> checking whether package ?summarytools? can be installed ... [1s/1s] ERROR
> Installation failed.
> See
> ?/Volumes/Builds/packages/big-sur-arm64/results/4.2/summarytools.Rcheck/00install.out?
> for details.
> [...]
> 
> On the details page
> <https://www.r-project.org/nosvn/R.check/r-release-macos-arm64/summarytools-00install.html>,
> I see:
> 
> [...]
> ** byte-compile and prepare package for lazy loadingtcltk DLL is
> linked to '/opt/R/arm64/lib/libtk8.6.dylib'
> Error: .onLoad failed in loadNamespace() for 'tcltk', details:
>  call: fun(libname, pkgname)
>  error: Tcl/Tk libraries are missing: install the Tcl/Tk component
> from the R installerExecution halted
> ERROR: lazy loading failed for package ?summarytools?
> [...]
> 
> Tcl/Tk is used by some functions to allow users to bring up an "open
> file...", & "save file..." dialogs & message boxes, as well as the
> tclvalue() function. In my NAMESPACE, I have:
> 
> importFrom(tcltk,tclvalue)
> importFrom(tcltk,tk_messageBox)
> importFrom(tcltk,tkgetOpenFile)
> importFrom(tcltk,tkgetSaveFile)
> 
> Also, a prerequisite is to have XQuartz <https://www.xquartz.org/>
> installed on Mac OS.
> 
> Summarytools has been around for a while, and I never had this problem
> before. And since I don't have a Mac machine, I'm not sure how to go about
> this. A Google search reveals that several other packages have the same
> issue. But I wasn't able to find the root cause nor a proper solution. Any
> tips / pointers would be greatly appreciated.
> 
> Thanks,
> 
> Dominic Comtois
> summarytools
> <https://cran.r-project.org/web/packages/summarytools/index.html> author &
> maintainer
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From @rk@jyot|@@h@93 @end|ng |rom gm@||@com  Thu Apr 28 11:57:05 2022
From: @rk@jyot|@@h@93 @end|ng |rom gm@||@com (Arkajyoti Saha)
Date: Thu, 28 Apr 2022 02:57:05 -0700
Subject: [R-pkg-devel] Issue with HTML version of manual
Message-ID: <CADn4F6AtztRMy9ccc8Z9hiBpkZkD-ubf5EQ6AGA+k364gz2qqQ@mail.gmail.com>

Hi all,
I recently tried to submit an update of my package but ran into a Warning
about checking the HTML version of the manual in Windows pre-tests (The
Debian version was OK).
I got several warnings which said:

Warning: <table> attribute "width" not allowed for HTML5

Warning: <tr> attribute "valign" not allowed for HTML5

Since I didn't change the manuals from the existing version of the
package, I am at a loss regarding what triggered this problem and how
to bypass it.

I shall remain grateful to you if you could please help me with this issue!

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Apr 28 12:23:19 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 28 Apr 2022 13:23:19 +0300
Subject: [R-pkg-devel] Issue with HTML version of manual
In-Reply-To: <CADn4F6AtztRMy9ccc8Z9hiBpkZkD-ubf5EQ6AGA+k364gz2qqQ@mail.gmail.com>
References: <CADn4F6AtztRMy9ccc8Z9hiBpkZkD-ubf5EQ6AGA+k364gz2qqQ@mail.gmail.com>
Message-ID: <20220428132319.3faa5f8d@arachnoid>

? Thu, 28 Apr 2022 02:57:05 -0700
Arkajyoti Saha <arkajyotisaha93 at gmail.com> ?????:

> Warning: <table> attribute "width" not allowed for HTML5
> 
> Warning: <tr> attribute "valign" not allowed for HTML5

See this blog entry for more information on the new HTML documentation
checks:
https://developer.r-project.org/Blog/public/2022/04/08/enhancements-to-html-documentation/index.html

> Since I didn't change the manuals from the existing version of the
> package, I am at a loss regarding what triggered this problem and how
> to bypass it.

Please help us help you: we can't find a problem in an Rd document we
don't see.

-- 
Best regards,
Ivan


From @rk@jyot|@@h@93 @end|ng |rom gm@||@com  Thu Apr 28 12:59:01 2022
From: @rk@jyot|@@h@93 @end|ng |rom gm@||@com (Arkajyoti Saha)
Date: Thu, 28 Apr 2022 03:59:01 -0700
Subject: [R-pkg-devel] Issue with HTML version of manual
In-Reply-To: <20220428132319.3faa5f8d@arachnoid>
References: <CADn4F6AtztRMy9ccc8Z9hiBpkZkD-ubf5EQ6AGA+k364gz2qqQ@mail.gmail.com>
 <20220428132319.3faa5f8d@arachnoid>
Message-ID: <CADn4F6C6kxmfrx_3aSH-F=QHB_xVugOc7mLqTY9RdNpAaHnCOg@mail.gmail.com>

Thanks so much!
Attached is an example of Rd document and the corresponding warnings

  RFGLS_predict.Rd:17:1: Warning: <table> attribute "width" not allowed for
HTML5
  RFGLS_predict.Rd:40:1: Warning: <tr> attribute "valign" not allowed for
HTML5
  RFGLS_predict.Rd:45:1: Warning: <tr> attribute "valign" not allowed for
HTML5
  RFGLS_predict.Rd:51:1: Warning: <tr> attribute "valign" not allowed for
HTML5
  RFGLS_predict.Rd:56:1: Warning: <tr> attribute "valign" not allowed for
HTML5
  RFGLS_predict.Rd:69:1: Warning: <tr> attribute "valign" not allowed for
HTML5
  RFGLS_predict.Rd:74:1: Warning: <tr> attribute "valign" not allowed for
HTML5

Please let me know if this attachment works,

Thanks again!!
Arka

On Thu, Apr 28, 2022 at 3:23 AM Ivan Krylov <krylov.r00t at gmail.com> wrote:

> ? Thu, 28 Apr 2022 02:57:05 -0700
> Arkajyoti Saha <arkajyotisaha93 at gmail.com> ?????:
>
> > Warning: <table> attribute "width" not allowed for HTML5
> >
> > Warning: <tr> attribute "valign" not allowed for HTML5
>
> See this blog entry for more information on the new HTML documentation
> checks:
>
> https://developer.r-project.org/Blog/public/2022/04/08/enhancements-to-html-documentation/index.html
>
> > Since I didn't change the manuals from the existing version of the
> > package, I am at a loss regarding what triggered this problem and how
> > to bypass it.
>
> Please help us help you: we can't find a problem in an Rd document we
> don't see.
>
> --
> Best regards,
> Ivan
>

From kry|ov@r00t @end|ng |rom gm@||@com  Thu Apr 28 13:19:37 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 28 Apr 2022 14:19:37 +0300
Subject: [R-pkg-devel] Issue with HTML version of manual
In-Reply-To: <CADn4F6C6kxmfrx_3aSH-F=QHB_xVugOc7mLqTY9RdNpAaHnCOg@mail.gmail.com>
References: <CADn4F6AtztRMy9ccc8Z9hiBpkZkD-ubf5EQ6AGA+k364gz2qqQ@mail.gmail.com>
 <20220428132319.3faa5f8d@arachnoid>
 <CADn4F6C6kxmfrx_3aSH-F=QHB_xVugOc7mLqTY9RdNpAaHnCOg@mail.gmail.com>
Message-ID: <20220428141937.0881579c@arachnoid>

? Thu, 28 Apr 2022 03:59:01 -0700
Arkajyoti Saha <arkajyotisaha93 at gmail.com> ?????:

> Please let me know if this attachment works,

It worked for me, but didn't work for anyone else: R-package-devel
strips out most kinds of attachments. Is this the same file?
https://github.com/ArkajyotiSaha/RandomForestsGLS/blob/main/man/RFGLS_predict.Rd

It looks like Tidy-HTML5 disagrees with tools::toHTML/tools::Rd2HTML
about validity of some attributes: according to the HTML5 standard (e.g.
<https://developer.mozilla.org/en-US/docs/Web/HTML/Element/tr>), these
HTML element attributes must be replaced by CSS properties now.

I think that tools::toHTML/tools::Rd2HTML will have to be changed to
silence these warnings. Nothing you could fix on your end.

-- 
Best regards,
Ivan


From iv@ircu m@iii@g oii m@iibox@org  Thu Apr 28 15:08:31 2022
From: iv@ircu m@iii@g oii m@iibox@org (iv@ircu m@iii@g oii m@iibox@org)
Date: Thu, 28 Apr 2022 15:08:31 +0200
Subject: [R-pkg-devel] Strange CRAN WARN: useraccount - Alias wurde nicht
 gefunden.
Message-ID: <YmqRz6W65We/YC2c@h6.fooboz>

Dear All,
I get a strange warning in German (!?) here: https://cloud.r-project.org/web/checks/check_results_packager.html
It hints to sections
- 'Generic functions and methods',
- 'System and foreign language interfaces' and
- 'Writing R documentation files'
in 'Writing R Extensions'.
The error occurs on windows only (so far).
I can't reproduce the error (I don't have a windows machine), but I am sure that
I don't have or refer to any object called `useraccount` in that package.

Has anybody have any idea, hint or suggestion?
Thanks anyway,
Dominik


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Apr 28 15:27:35 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 28 Apr 2022 15:27:35 +0200
Subject: [R-pkg-devel] Issue with HTML version of manual
In-Reply-To: <20220428141937.0881579c@arachnoid>
References: <CADn4F6AtztRMy9ccc8Z9hiBpkZkD-ubf5EQ6AGA+k364gz2qqQ@mail.gmail.com>
 <20220428132319.3faa5f8d@arachnoid>
 <CADn4F6C6kxmfrx_3aSH-F=QHB_xVugOc7mLqTY9RdNpAaHnCOg@mail.gmail.com>
 <20220428141937.0881579c@arachnoid>
Message-ID: <649d00ac-ba07-9e51-3199-d9fac5a416c6@statistik.tu-dortmund.de>



On 28.04.2022 13:19, Ivan Krylov wrote:
> ? Thu, 28 Apr 2022 03:59:01 -0700
> Arkajyoti Saha <arkajyotisaha93 at gmail.com> ?????:
> 
>> Please let me know if this attachment works,
> 
> It worked for me, but didn't work for anyone else: R-package-devel
> strips out most kinds of attachments. Is this the same file?
> https://github.com/ArkajyotiSaha/RandomForestsGLS/blob/main/man/RFGLS_predict.Rd
> 
> It looks like Tidy-HTML5 disagrees with tools::toHTML/tools::Rd2HTML
> about validity of some attributes: according to the HTML5 standard (e.g.
> <https://developer.mozilla.org/en-US/docs/Web/HTML/Element/tr>), these
> HTML element attributes must be replaced by CSS properties now.
> 
> I think that tools::toHTML/tools::Rd2HTML will have to be changed to
> silence these warnings. Nothing you could fix on your end.


Indeed, I installed a new tidy version which complains more than former 
ones. We have to fix this in R. In the meantime, packages that got 
auto-rejected only for this reasons should have been processed. If yours 
not, please simply resubmit.

Best,
Uwe Ligges


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Thu Apr 28 15:55:52 2022
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Thu, 28 Apr 2022 15:55:52 +0200
Subject: [R-pkg-devel] 
 Strange CRAN WARN: useraccount - Alias wurde nicht gefunden.
In-Reply-To: <YmqRz6W65We/YC2c@h6.fooboz>
References: <YmqRz6W65We/YC2c@h6.fooboz>
Message-ID: <04bede2f-46df-fe08-5f8c-2f4df805e9c4@gmail.com>


On 4/28/22 15:08, Dominik Cullmann via R-package-devel wrote:
> Dear All,
> I get a strange warning in German (!?) here: https://cloud.r-project.org/web/checks/check_results_packager.html
> It hints to sections
> - 'Generic functions and methods',
> - 'System and foreign language interfaces' and
> - 'Writing R documentation files'
> in 'Writing R Extensions'.
> The error occurs on windows only (so far).
> I can't reproduce the error (I don't have a windows machine), but I am sure that
> I don't have or refer to any object called `useraccount` in that package.
>
> Has anybody have any idea, hint or suggestion?

In my checks running on another Windows 2022 server, in an English 
locale, the messages are "No Instance(s) Available." This also suggests 
it is not a configuration problem on the check server.

In principle you could also use a free Windows virtual machine for the 
debugging:

Windows 11 (currently limited until July 10)
https://developer.microsoft.com/en-us/windows/downloads/virtual-machines

Windows 10 (an old one, limited to 90 days)
https://developer.microsoft.com/en-us/microsoft-edge/tools/vms
https://blog.r-project.org/2021/03/18/virtual-windows-machine-for-checking-r-packages/index.html

Or you can also instrument your package and submit to say Winbuilder and 
debug that way.

Best
Tomas

> Thanks anyway,
> Dominik
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Thu Apr 28 16:17:22 2022
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Thu, 28 Apr 2022 09:17:22 -0500
Subject: [R-pkg-devel] Two problems with fda
In-Reply-To: <54719f3b-4001-b611-0743-af927e5fa264@gmail.com>
References: <480FFE80-30A0-42A0-86BC-684B352340F4@mcgill.ca>
 <f2014990-ad7e-dd00-6010-ffedf0b58988@effectivedefense.org>
 <20220425234016.439173ab@Tarkus>
 <2bb78528-297c-2d7b-92ee-3df36c41b392@gmail.com>
 <54719f3b-4001-b611-0743-af927e5fa264@gmail.com>
Message-ID: <3e514499-39fd-7305-cb08-8d1106839e5b@effectivedefense.org>

Hi, Duncan et al.:


	  I passed Duncan's suggestions to Jim Ramsay, who implemented 
something -- not sure what -- and "fda_6.0.3.tar.gz has been built for 
Windows and will be published within 24 hours in the corresponding CRAN 
directory"!  (Thanks, Duncan!)


	  My attempts to fix ".github/workflows/R-CMD-check.yaml" have so far 
been unsuccessful:


https://github.com/JamesRamsay5/fda/commit/3dd1938d95055ed798a8b6caebcfe0eb8a03668b


	  For me currently, yaml = "yet another misunderstood language" ;-) 
And I've misplaced Yihui Xie's recommendations on how to ask for help. 
I remember he suggested submitting a question first to Stack Exchange or 
Stack Overflow or ..., but I can't find those recommendations, so I 
thought I'd here thank Avraham Adler <avraham.adler at gmail.com> and 
everyone else who has considered replying to this question, hoping that 
someone can help me take the next step.


	  Thanks again,
	  Spencer Graves


On 4/26/22 11:46 AM, Duncan Murdoch wrote:
> On 25/04/2022 8:24 p.m., Duncan Murdoch wrote:
>  ?...
>>
>> \value{
>> ??? These functions return either a standard \code{fRegress} fit 
>> object or
>> ??? or a model specification:
>> ??? \item{The \code{fRegress} fit object case:}{
>>
>>
>> Aha, in a \value{} section, bare \items are supposed to mark components
>> of the value, so they are automatically code.? I think the fix for this
>> is to make it an explicit \describe list:
>>
>> \value{
>> ??? These functions return either a standard \code{fRegress} fit 
>> object or
>> ??? or a model specification:
>> ??? \describe{
>> ????? \item{The \code{fRegress} fit object case:}{
>>
>> ??? ... eventually ...
>>
>> ??? }
> 
> An even simpler fix:? don't mark the section title as an \item, i.e. 
> write as
> 
> \value{
>  ?? These functions return either a standard \code{fRegress} fit object or
>  ?? or a model specification.
> 
>  ?? The \code{fRegress} fit object case:
> 
> 
>  ?? \item{field}{description .... }
> 
> 
> Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Apr 28 16:22:51 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 28 Apr 2022 10:22:51 -0400
Subject: [R-pkg-devel] Two problems with fda
In-Reply-To: <3e514499-39fd-7305-cb08-8d1106839e5b@effectivedefense.org>
References: <480FFE80-30A0-42A0-86BC-684B352340F4@mcgill.ca>
 <f2014990-ad7e-dd00-6010-ffedf0b58988@effectivedefense.org>
 <20220425234016.439173ab@Tarkus>
 <2bb78528-297c-2d7b-92ee-3df36c41b392@gmail.com>
 <54719f3b-4001-b611-0743-af927e5fa264@gmail.com>
 <3e514499-39fd-7305-cb08-8d1106839e5b@effectivedefense.org>
Message-ID: <0fbf07fa-6e3d-2ae4-b048-906a381d92a8@gmail.com>

On 28/04/2022 10:17 a.m., Spencer Graves wrote:
> Hi, Duncan et al.:
> 
> 
> 	  I passed Duncan's suggestions to Jim Ramsay, who implemented
> something -- not sure what -- and "fda_6.0.3.tar.gz has been built for
> Windows and will be published within 24 hours in the corresponding CRAN
> directory"!  (Thanks, Duncan!)

You're welcome.

> 	  My attempts to fix ".github/workflows/R-CMD-check.yaml" have so far
> been unsuccessful:
> 
> 
> https://github.com/JamesRamsay5/fda/commit/3dd1938d95055ed798a8b6caebcfe0eb8a03668b

Line 50 in that update looks wrong.  It might make sense to have "tlmgr 
--version" just after line 53, indented like lines 54 and 55.

Duncan Murdoch

> 
> 	  For me currently, yaml = "yet another misunderstood language" ;-)
> And I've misplaced Yihui Xie's recommendations on how to ask for help.
> I remember he suggested submitting a question first to Stack Exchange or
> Stack Overflow or ..., but I can't find those recommendations, so I
> thought I'd here thank Avraham Adler <avraham.adler at gmail.com> and
> everyone else who has considered replying to this question, hoping that
> someone can help me take the next step.
> 
> 
> 	  Thanks again,
> 	  Spencer Graves
> 
> 
> On 4/26/22 11:46 AM, Duncan Murdoch wrote:
>> On 25/04/2022 8:24 p.m., Duncan Murdoch wrote:
>>   ?...
>>>
>>> \value{
>>>  ??? These functions return either a standard \code{fRegress} fit
>>> object or
>>>  ??? or a model specification:
>>>  ??? \item{The \code{fRegress} fit object case:}{
>>>
>>>
>>> Aha, in a \value{} section, bare \items are supposed to mark components
>>> of the value, so they are automatically code.? I think the fix for this
>>> is to make it an explicit \describe list:
>>>
>>> \value{
>>>  ??? These functions return either a standard \code{fRegress} fit
>>> object or
>>>  ??? or a model specification:
>>>  ??? \describe{
>>>  ????? \item{The \code{fRegress} fit object case:}{
>>>
>>>  ??? ... eventually ...
>>>
>>>  ??? }
>>
>> An even simpler fix:? don't mark the section title as an \item, i.e.
>> write as
>>
>> \value{
>>   ?? These functions return either a standard \code{fRegress} fit object or
>>   ?? or a model specification.
>>
>>   ?? The \code{fRegress} fit object case:
>>
>>
>>   ?? \item{field}{description .... }
>>
>>
>> Duncan Murdoch


From @vr@h@m@@d|er @end|ng |rom gm@||@com  Thu Apr 28 16:44:41 2022
From: @vr@h@m@@d|er @end|ng |rom gm@||@com (Avraham Adler)
Date: Thu, 28 Apr 2022 14:44:41 +0000
Subject: [R-pkg-devel] Two problems with fda
In-Reply-To: <0fbf07fa-6e3d-2ae4-b048-906a381d92a8@gmail.com>
References: <480FFE80-30A0-42A0-86BC-684B352340F4@mcgill.ca>
 <f2014990-ad7e-dd00-6010-ffedf0b58988@effectivedefense.org>
 <20220425234016.439173ab@Tarkus>
 <2bb78528-297c-2d7b-92ee-3df36c41b392@gmail.com>
 <54719f3b-4001-b611-0743-af927e5fa264@gmail.com>
 <3e514499-39fd-7305-cb08-8d1106839e5b@effectivedefense.org>
 <0fbf07fa-6e3d-2ae4-b048-906a381d92a8@gmail.com>
Message-ID: <CAL6gwnJbQQdPpnu56bZmOEqDRwo9Rfj4RBsRNHgq0182C+zhkA@mail.gmail.com>

Hello, Spencer.

I am solely on Windows, so I am not familiar with the workflow you
need, but I have found the following posts which discuss tlmgr in the
context of a Github action. Perhaps they can provide you with insight:
[1], [2].

Hope that helps!

Avi

[1] https://tex.stackexchange.com/questions/551383/cant-run-tex-lives-tlmgr-in-a-github-action
[2] https://github.com/xu-cheng/texlive-action

On Thu, Apr 28, 2022 at 2:28 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 28/04/2022 10:17 a.m., Spencer Graves wrote:
> > Hi, Duncan et al.:
> >
> >
> >         I passed Duncan's suggestions to Jim Ramsay, who implemented
> > something -- not sure what -- and "fda_6.0.3.tar.gz has been built for
> > Windows and will be published within 24 hours in the corresponding CRAN
> > directory"!  (Thanks, Duncan!)
>
> You're welcome.
>
> >         My attempts to fix ".github/workflows/R-CMD-check.yaml" have so far
> > been unsuccessful:
> >
> >
> > https://github.com/JamesRamsay5/fda/commit/3dd1938d95055ed798a8b6caebcfe0eb8a03668b
>
> Line 50 in that update looks wrong.  It might make sense to have "tlmgr
> --version" just after line 53, indented like lines 54 and 55.
>
> Duncan Murdoch
>
> >
> >         For me currently, yaml = "yet another misunderstood language" ;-)
> > And I've misplaced Yihui Xie's recommendations on how to ask for help.
> > I remember he suggested submitting a question first to Stack Exchange or
> > Stack Overflow or ..., but I can't find those recommendations, so I
> > thought I'd here thank Avraham Adler <avraham.adler at gmail.com> and
> > everyone else who has considered replying to this question, hoping that
> > someone can help me take the next step.
> >
> >
> >         Thanks again,
> >         Spencer Graves
> >
> >
> > On 4/26/22 11:46 AM, Duncan Murdoch wrote:
> >> On 25/04/2022 8:24 p.m., Duncan Murdoch wrote:
> >>    ...
> >>>
> >>> \value{
> >>>      These functions return either a standard \code{fRegress} fit
> >>> object or
> >>>      or a model specification:
> >>>      \item{The \code{fRegress} fit object case:}{
> >>>
> >>>
> >>> Aha, in a \value{} section, bare \items are supposed to mark components
> >>> of the value, so they are automatically code.  I think the fix for this
> >>> is to make it an explicit \describe list:
> >>>
> >>> \value{
> >>>      These functions return either a standard \code{fRegress} fit
> >>> object or
> >>>      or a model specification:
> >>>      \describe{
> >>>        \item{The \code{fRegress} fit object case:}{
> >>>
> >>>      ... eventually ...
> >>>
> >>>      }
> >>
> >> An even simpler fix:  don't mark the section title as an \item, i.e.
> >> write as
> >>
> >> \value{
> >>      These functions return either a standard \code{fRegress} fit object or
> >>      or a model specification.
> >>
> >>      The \code{fRegress} fit object case:
> >>
> >>
> >>      \item{field}{description .... }
> >>
> >>
> >> Duncan Murdoch
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @rk@jyot|@@h@93 @end|ng |rom gm@||@com  Thu Apr 28 20:32:30 2022
From: @rk@jyot|@@h@93 @end|ng |rom gm@||@com (Arkajyoti Saha)
Date: Thu, 28 Apr 2022 11:32:30 -0700
Subject: [R-pkg-devel] Issue with HTML version of manual
In-Reply-To: <649d00ac-ba07-9e51-3199-d9fac5a416c6@statistik.tu-dortmund.de>
References: <CADn4F6AtztRMy9ccc8Z9hiBpkZkD-ubf5EQ6AGA+k364gz2qqQ@mail.gmail.com>
 <20220428132319.3faa5f8d@arachnoid>
 <CADn4F6C6kxmfrx_3aSH-F=QHB_xVugOc7mLqTY9RdNpAaHnCOg@mail.gmail.com>
 <20220428141937.0881579c@arachnoid>
 <649d00ac-ba07-9e51-3199-d9fac5a416c6@statistik.tu-dortmund.de>
Message-ID: <CADn4F6Ag=DR2WxXdakUBte5cjeWjOpXL_V15PpJfakSrX_E07Q@mail.gmail.com>

Thanks so much for processing the pending submission!!
I have submitted an update of another package that showed similar warnings
in https://win-builder.r-project.org/
Hopefully, it will go through too!

Thanks again!
-Arka


On Thu, Apr 28, 2022 at 6:27 AM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

>
>
> On 28.04.2022 13:19, Ivan Krylov wrote:
> > ? Thu, 28 Apr 2022 03:59:01 -0700
> > Arkajyoti Saha <arkajyotisaha93 at gmail.com> ?????:
> >
> >> Please let me know if this attachment works,
> >
> > It worked for me, but didn't work for anyone else: R-package-devel
> > strips out most kinds of attachments. Is this the same file?
> >
> https://github.com/ArkajyotiSaha/RandomForestsGLS/blob/main/man/RFGLS_predict.Rd
> >
> > It looks like Tidy-HTML5 disagrees with tools::toHTML/tools::Rd2HTML
> > about validity of some attributes: according to the HTML5 standard (e.g.
> > <https://developer.mozilla.org/en-US/docs/Web/HTML/Element/tr>), these
> > HTML element attributes must be replaced by CSS properties now.
> >
> > I think that tools::toHTML/tools::Rd2HTML will have to be changed to
> > silence these warnings. Nothing you could fix on your end.
>
>
> Indeed, I installed a new tidy version which complains more than former
> ones. We have to fix this in R. In the meantime, packages that got
> auto-rejected only for this reasons should have been processed. If yours
> not, please simply resubmit.
>
> Best,
> Uwe Ligges
>
>
>
>
>

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Fri Apr 29 00:29:55 2022
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Thu, 28 Apr 2022 18:29:55 -0400
Subject: [R-pkg-devel] help with BLAS/LAPACK version debugging
In-Reply-To: <25194.58358.710041.862194@rob.eddelbuettel.com>
References: <5b19da9f-b413-e5ad-91dd-51a5eb88e27a@mcmaster.ca>
 <25172.54117.83291.878439@rob.eddelbuettel.com>
 <e38ae4a9-b44c-bcd0-456a-fc25b662a561@gmail.com>
 <25194.58358.710041.862194@rob.eddelbuettel.com>
Message-ID: <4aa31402-f71e-fb0a-8f2c-264f94007166@gmail.com>

   I have not sorted it out yet [cc'ing the list for the record]

Kurt Hornik said

"It seems one needs a current release version of OpenBLAS (0.3.20) plus 
a version of R-devel configured to use this for the system LAPACK"


   I finally got around to trying this on the rocker/r-devel image, 
which is built on Debian testing/unstable (I had previously been using 
rocker/verse for convenience in installing packages), so that we have a 
more recent BLAS:

BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3
LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so

   I still fail to reproduce CRAN's problem. I'm not sure whether the R 
version on rocker/r-devel satisfies KH's "a version of R-devel 
configured to use this for the system LAPACK" - it certainly *seems* 
that way but I may be missing something.

   In the meantime,

   * CRAN reverted their platform config so the problem has temporarily 
gone away
   * I added code that I think will avoid this problem to the devel 
version anyway (without having been able to diagnose it in detail)

   cheers
    Ben


On 4/28/22 2:59 PM, Dirk Eddelbuettel wrote:
> 
> Hi Ben,
> 
> On 11 April 2022 at 21:29, Ben Bolker wrote:
> |    Thanks v much for the quick reply, will ponder and get back to you
> | (and the list) probably-tomorrow.
> 
> Did you ever sort this out and report back to this list (which I may have
> missed) ?
> 
> Dirk
> 

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Director, School of Computational Science and Engineering
(Acting) Graduate chair, Mathematics & Statistics


From d@tr7320 @end|ng |rom un|@@ydney@edu@@u  Sat Apr 30 14:00:05 2022
From: d@tr7320 @end|ng |rom un|@@ydney@edu@@u (Dario Strbenac)
Date: Sat, 30 Apr 2022 12:00:05 +0000
Subject: [R-pkg-devel] Rlang and Code Evalutation Within Aesthetics
Message-ID: <SY2PR01MB3003DD190D342FB17A3ED260CDFF9@SY2PR01MB3003.ausprd01.prod.outlook.com>

Good day,

I am troubled understanding why the following example doesn't work:

> characteristicsList
$x
`Classifier Name`
> ggplot2::aes(fill = if(TRUE) NULL else !!rlang::sym(characteristicsList[["fillColour"]]))
Error in `rlang::sym()`:
! Can't convert NULL to a symbol.
> rlang::last_error()
10. rlang::sym(characteristicsList[["fillColour"]])

but the following does work without error:

> if(TRUE) NULL else !!rlang::sym(characteristicsList[["fillColour"]])
NULL # It is desirably avoiding the else part.

The first example seems to be evaluating the else part, even though the if condition is true.

The overall aim is to allow the end-user to specify a named list of appearance-modifying parameters, and for the function to create a ggplot with them, without being bamboozled if the end-user's list doesn't contain the specification for fill colour variable name or line colour variable name (like the list in the example above does not have). Thanks in advance for any suggested reading.

--------------------------------------
Dario Strbenac
University of Sydney
Camperdown NSW 2050
Australia

From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Apr 30 14:09:51 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 30 Apr 2022 08:09:51 -0400
Subject: [R-pkg-devel] Rlang and Code Evalutation Within Aesthetics
In-Reply-To: <SY2PR01MB3003DD190D342FB17A3ED260CDFF9@SY2PR01MB3003.ausprd01.prod.outlook.com>
References: <SY2PR01MB3003DD190D342FB17A3ED260CDFF9@SY2PR01MB3003.ausprd01.prod.outlook.com>
Message-ID: <fc7ed04e-97fb-bd5f-99ce-3e482a34cfd9@gmail.com>

On 30/04/2022 8:00 a.m., Dario Strbenac wrote:
> Good day,
> 
> I am troubled understanding why the following example doesn't work:
> 
>> characteristicsList
> $x
> `Classifier Name`
>> ggplot2::aes(fill = if(TRUE) NULL else !!rlang::sym(characteristicsList[["fillColour"]]))
> Error in `rlang::sym()`:
> ! Can't convert NULL to a symbol.
>> rlang::last_error()
> 10. rlang::sym(characteristicsList[["fillColour"]])
> 
> but the following does work without error:
> 
>> if(TRUE) NULL else !!rlang::sym(characteristicsList[["fillColour"]])
> NULL # It is desirably avoiding the else part.
> 
> The first example seems to be evaluating the else part, even though the if condition is true.
> 
> The overall aim is to allow the end-user to specify a named list of appearance-modifying parameters, and for the function to create a ggplot with them, without being bamboozled if the end-user's list doesn't contain the specification for fill colour variable name or line colour variable name (like the list in the example above does not have). Thanks in advance for any suggested reading.

I'm pretty sure this isn't the right place to ask about ggplot2, but 
that looks like a bug to me.

Duncan Murdoch


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Apr 30 16:53:19 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 30 Apr 2022 07:53:19 -0700
Subject: [R-pkg-devel] Rlang and Code Evalutation Within Aesthetics
In-Reply-To: <fc7ed04e-97fb-bd5f-99ce-3e482a34cfd9@gmail.com>
References: <SY2PR01MB3003DD190D342FB17A3ED260CDFF9@SY2PR01MB3003.ausprd01.prod.outlook.com>
 <fc7ed04e-97fb-bd5f-99ce-3e482a34cfd9@gmail.com>
Message-ID: <C04ED051-6433-4407-9309-BDE5D54E64A8@dcn.davis.ca.us>

Things like sensible legends are also impeded by using complex expressions in aesthetics mappings, so call it a workaround if you like but creating the data frame the way it should be _before_ giving it to ggplot has always been recommended.

On April 30, 2022 5:09:51 AM PDT, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>On 30/04/2022 8:00 a.m., Dario Strbenac wrote:
>> Good day,
>> 
>> I am troubled understanding why the following example doesn't work:
>> 
>>> characteristicsList
>> $x
>> `Classifier Name`
>>> ggplot2::aes(fill = if(TRUE) NULL else !!rlang::sym(characteristicsList[["fillColour"]]))
>> Error in `rlang::sym()`:
>> ! Can't convert NULL to a symbol.
>>> rlang::last_error()
>> 10. rlang::sym(characteristicsList[["fillColour"]])
>> 
>> but the following does work without error:
>> 
>>> if(TRUE) NULL else !!rlang::sym(characteristicsList[["fillColour"]])
>> NULL # It is desirably avoiding the else part.
>> 
>> The first example seems to be evaluating the else part, even though the if condition is true.
>> 
>> The overall aim is to allow the end-user to specify a named list of appearance-modifying parameters, and for the function to create a ggplot with them, without being bamboozled if the end-user's list doesn't contain the specification for fill colour variable name or line colour variable name (like the list in the example above does not have). Thanks in advance for any suggested reading.
>
>I'm pretty sure this isn't the right place to ask about ggplot2, but that looks like a bug to me.
>
>Duncan Murdoch
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From @rk@jyot|@@h@93 @end|ng |rom gm@||@com  Sat Apr 30 16:54:22 2022
From: @rk@jyot|@@h@93 @end|ng |rom gm@||@com (Arkajyoti Saha)
Date: Sat, 30 Apr 2022 07:54:22 -0700
Subject: [R-pkg-devel] Error in r-devel-windows-x86_64 check: package not
 found.
Message-ID: <CADn4F6CAFP4oVGw50iDYVvTbWDBWfEf9fVRqeYcO5aYzpsF4Qw@mail.gmail.com>

I recently updated a package in CRAN. Though it passed the
r-devel-linux-x86_64
<https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-debian-clang>
flavors, I saw an error with r-devel-windows-x86_64
<https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64/BRISC-00check.html>.

The error says "Error : package 'RANN' required by 'BRISC' could not be
found"
The detailed report can be found at
https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64/BRISC-00install.html

I was wondering if there is anything to be done on my behalf to circumvent
this problem,
Please let me know if I can provide you with any additional information,

thanks,
Arka

	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Sat Apr 30 17:09:20 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Sat, 30 Apr 2022 17:09:20 +0200
Subject: [R-pkg-devel] 
 Error in r-devel-windows-x86_64 check: package not found.
In-Reply-To: <CADn4F6CAFP4oVGw50iDYVvTbWDBWfEf9fVRqeYcO5aYzpsF4Qw@mail.gmail.com>
References: <CADn4F6CAFP4oVGw50iDYVvTbWDBWfEf9fVRqeYcO5aYzpsF4Qw@mail.gmail.com>
Message-ID: <25197.20768.187547.497140@stat.math.ethz.ch>

>>>>> Arkajyoti Saha 
>>>>>     on Sat, 30 Apr 2022 07:54:22 -0700 writes:

    > I recently updated a package in CRAN. Though it passed the
    > r-devel-linux-x86_64
    > <https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-debian-clang>
    > flavors, I saw an error with r-devel-windows-x86_64
    > <https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64/BRISC-00check.html>.

    > The error says "Error : package 'RANN' required by 'BRISC'
    > could not be found" The detailed report can be found at
    > https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64/BRISC-00install.html

    > I was wondering if there is anything to be done on my
    > behalf to circumvent this problem, Please let me know if I
    > can provide you with any additional information,

    > thanks, Arka

Fortunately, this has been a transitional bug in R-devel, and is
unrelated to the Windows / non-Windows differences:

It's been caused by fixing R bugzilla PR#18331  w/ NEWS entry

    * library() now passes its lib.loc argument when requiring Depends
      packages; reported (with fix) in PR#18331 by Mikael Jagan.

and the orginal change (svn rev 82284) inadvertantly "killed"
correct working of install.packages()  in some not too
unfrequent cases.

I've looked for you at
   https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64/BRISC-00check.txt
and see that indeed the BRISC installation had happened with
R-devel svn r88285 which contains this bug.

This newly introduced bug (yesterday) has now been fixed, 28h
later (with svn r88287). 
It's been my fault  (and fix).

Martin


From @rk@jyot|@@h@93 @end|ng |rom gm@||@com  Sat Apr 30 17:18:32 2022
From: @rk@jyot|@@h@93 @end|ng |rom gm@||@com (Arkajyoti Saha)
Date: Sat, 30 Apr 2022 08:18:32 -0700
Subject: [R-pkg-devel] 
 Error in r-devel-windows-x86_64 check: package not found.
In-Reply-To: <25197.20768.187547.497140@stat.math.ethz.ch>
References: <CADn4F6CAFP4oVGw50iDYVvTbWDBWfEf9fVRqeYcO5aYzpsF4Qw@mail.gmail.com>
 <25197.20768.187547.497140@stat.math.ethz.ch>
Message-ID: <CADn4F6DM7v6ttVnT+pcPjRbmNSwhm9vjKVWwe2ABAjFVce6vPQ@mail.gmail.com>

Thanks so much for the clarification!!

On Sat, Apr 30, 2022 at 8:09 AM Martin Maechler <maechler at stat.math.ethz.ch>
wrote:

> >>>>> Arkajyoti Saha
> >>>>>     on Sat, 30 Apr 2022 07:54:22 -0700 writes:
>
>     > I recently updated a package in CRAN. Though it passed the
>     > r-devel-linux-x86_64
>     > <
> https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-debian-clang
> >
>     > flavors, I saw an error with r-devel-windows-x86_64
>     > <
> https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64/BRISC-00check.html
> >.
>
>     > The error says "Error : package 'RANN' required by 'BRISC'
>     > could not be found" The detailed report can be found at
>     >
> https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64/BRISC-00install.html
>
>     > I was wondering if there is anything to be done on my
>     > behalf to circumvent this problem, Please let me know if I
>     > can provide you with any additional information,
>
>     > thanks, Arka
>
> Fortunately, this has been a transitional bug in R-devel, and is
> unrelated to the Windows / non-Windows differences:
>
> It's been caused by fixing R bugzilla PR#18331  w/ NEWS entry
>
>     * library() now passes its lib.loc argument when requiring Depends
>       packages; reported (with fix) in PR#18331 by Mikael Jagan.
>
> and the orginal change (svn rev 82284) inadvertantly "killed"
> correct working of install.packages()  in some not too
> unfrequent cases.
>
> I've looked for you at
>
> https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64/BRISC-00check.txt
> and see that indeed the BRISC installation had happened with
> R-devel svn r88285 which contains this bug.
>
> This newly introduced bug (yesterday) has now been fixed, 28h
> later (with svn r88287).
> It's been my fault  (and fix).
>
> Martin
>

	[[alternative HTML version deleted]]


From m@tth|@@-gond@n @end|ng |rom gmx@de  Sat Apr 30 18:57:46 2022
From: m@tth|@@-gond@n @end|ng |rom gmx@de (Matthias Gondan)
Date: Sat, 30 Apr 2022 18:57:46 +0200
Subject: [R-pkg-devel] Need advice CRAN package check results
Message-ID: <1N4Qwg-1nt88b04v8-011P3o@mail.gmx.net>

Dear developers,

I have recently submitted my first r package, and bear with me, I am still learning things. Most importantly, there is a page with the CRAN package checks,

https://cran.rstudio.com/web/checks/check_results_rolog.html

The package check for r-release-macos-arm64 fails, in two places. 

? The one in the table refers to Version 0.9, that one is less interesting because I have already fixed it. Well, minor question, will the version numbers for these tests increase automatically?
? More importantly, there are two links called M1mac below the table, ?Additional issues?. They refer to the current version of the package, 0.9.2. The left link points to https://www.stats.ox.ac.uk/pub/bdr/M1mac/rolog.log, and there is an error message at 69% that needs to be fixed somehow. Note that the message is not really helpful (clang: error: unable to execute command: Abort trap: 6, clang: error: clang frontend command failed due to signal)

To investigate this in more detail, I tried the mac-builder service, but the build doesn?t fail there: https://mac.r-project.org/macbuilder/results/1651148567-352c2175cfbba55d/. I think this will be deleted soon, so this one is more recent, with only little changes: https://mac.r-project.org/macbuilder/results/1651332515-22f4e1b1c9492557/ 

Does anyone have a good idea how to move on? I don?t have a Mac M1 at hand?

Best wishes,

Matthias

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Apr 30 19:58:57 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 30 Apr 2022 13:58:57 -0400
Subject: [R-pkg-devel] Need advice CRAN package check results
In-Reply-To: <1N4Qwg-1nt88b04v8-011P3o@mail.gmx.net>
References: <1N4Qwg-1nt88b04v8-011P3o@mail.gmx.net>
Message-ID: <10dbc864-aeec-4b03-e45c-ab1b46e85573@gmail.com>

On 30/04/2022 12:57 p.m., Matthias Gondan wrote:
> Dear developers,
> 
> I have recently submitted my first r package, and bear with me, I am still learning things. Most importantly, there is a page with the CRAN package checks,
> 
> https://cran.rstudio.com/web/checks/check_results_rolog.html
> 
> The package check for r-release-macos-arm64 fails, in two places.
> 
> ? The one in the table refers to Version 0.9, that one is less interesting because I have already fixed it. Well, minor question, will the version numbers for these tests increase automatically?

You manually change the version number of your package, and the version 
number in the check table shows which version was tested.  New 
submissions won't show up there until they are accepted.

Occasionally a new version could be accepted but fail to build on some 
platforms; in that case the version number for that platform won't be 
updated.  I think it's also possible for CRAN maintainers to manually 
skip checks if they want.

> ? More importantly, there are two links called M1mac below the table, ?Additional issues?. They refer to the current version of the package, 0.9.2. The left link points to https://www.stats.ox.ac.uk/pub/bdr/M1mac/rolog.log, and there is an error message at 69% that needs to be fixed somehow. Note that the message is not really helpful (clang: error: unable to execute command: Abort trap: 6, clang: error: clang frontend command failed due to signal)

That looks like clang crashed.  If you can't duplicate it locally, it 
will be hard to fix.

At the start of your log, there were these messages:

CMake Warning at cmake/port/Darwin.cmake:39 (message):
   Could not find Macport or Homebrew to provide dependencies 		 trying to
   configure with default search paths

I would try to test on a system that doesn't have Macport or Homebrew 
installed.

> To investigate this in more detail, I tried the mac-builder service, but the build doesn?t fail there: https://mac.r-project.org/macbuilder/results/1651148567-352c2175cfbba55d/. I think this will be deleted soon, so this one is more recent, with only little changes: https://mac.r-project.org/macbuilder/results/1651332515-22f4e1b1c9492557/
> 
> Does anyone have a good idea how to move on? I don?t have a Mac M1 at hand?

I think you'll need to find one to test on.  I'm not sure if Github 
offers that platform for running Github actions, but I imagine there's 
one somewhere or other.

Duncan Murdoch


From r|||ght79 @end|ng |rom gm@||@com  Sat Apr 30 20:33:23 2022
From: r|||ght79 @end|ng |rom gm@||@com (Robert M. Flight)
Date: Sat, 30 Apr 2022 14:33:23 -0400
Subject: [R-pkg-devel] Need advice CRAN package check results
In-Reply-To: <10dbc864-aeec-4b03-e45c-ab1b46e85573@gmail.com>
References: <1N4Qwg-1nt88b04v8-011P3o@mail.gmx.net>
 <10dbc864-aeec-4b03-e45c-ab1b46e85573@gmail.com>
Message-ID: <CAJLyBTVYQu5X7N8+RxbjEXt2v__cP976ywFGECJPyUjZ7c9bQA@mail.gmail.com>

Matthias and Duncan,

As far as testing on an M1 Mac, it looks like CRAN has an M1 builder
similar to win-builder, and r-hub also has one available for testing.

See this twitter thread.

https://twitter.com/bolkerb/status/1520060589875380231?t=hcFIPUMPXoByuBpyQ7eydA&s=19

And thanks to Dirk Eddelbuttel and Ben Bolker for pointing those out.

I hope those help you diagnose the issues you are experiencing.

Cheers,

Robert

On Sat, Apr 30, 2022, 1:59 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 30/04/2022 12:57 p.m., Matthias Gondan wrote:
> > Dear developers,
> >
> > I have recently submitted my first r package, and bear with me, I am
> still learning things. Most importantly, there is a page with the CRAN
> package checks,
> >
> > https://cran.rstudio.com/web/checks/check_results_rolog.html
> >
> > The package check for r-release-macos-arm64 fails, in two places.
> >
> > ? The one in the table refers to Version 0.9, that one is less
> interesting because I have already fixed it. Well, minor question, will the
> version numbers for these tests increase automatically?
>
> You manually change the version number of your package, and the version
> number in the check table shows which version was tested.  New
> submissions won't show up there until they are accepted.
>
> Occasionally a new version could be accepted but fail to build on some
> platforms; in that case the version number for that platform won't be
> updated.  I think it's also possible for CRAN maintainers to manually
> skip checks if they want.
>
> > ? More importantly, there are two links called M1mac below the table,
> ?Additional issues?. They refer to the current version of the package,
> 0.9.2. The left link points to
> https://www.stats.ox.ac.uk/pub/bdr/M1mac/rolog.log, and there is an error
> message at 69% that needs to be fixed somehow. Note that the message is not
> really helpful (clang: error: unable to execute command: Abort trap: 6,
> clang: error: clang frontend command failed due to signal)
>
> That looks like clang crashed.  If you can't duplicate it locally, it
> will be hard to fix.
>
> At the start of your log, there were these messages:
>
> CMake Warning at cmake/port/Darwin.cmake:39 (message):
>    Could not find Macport or Homebrew to provide dependencies
> trying to
>    configure with default search paths
>
> I would try to test on a system that doesn't have Macport or Homebrew
> installed.
>
> > To investigate this in more detail, I tried the mac-builder service, but
> the build doesn?t fail there:
> https://mac.r-project.org/macbuilder/results/1651148567-352c2175cfbba55d/.
> I think this will be deleted soon, so this one is more recent, with only
> little changes:
> https://mac.r-project.org/macbuilder/results/1651332515-22f4e1b1c9492557/
> >
> > Does anyone have a good idea how to move on? I don?t have a Mac M1 at
> hand?
>
> I think you'll need to find one to test on.  I'm not sure if Github
> offers that platform for running Github actions, but I imagine there's
> one somewhere or other.
>
> Duncan Murdoch
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Sat Apr 30 20:48:26 2022
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Sat, 30 Apr 2022 13:48:26 -0500
Subject: [R-pkg-devel] Need advice CRAN package check results
In-Reply-To: <10dbc864-aeec-4b03-e45c-ab1b46e85573@gmail.com>
References: <1N4Qwg-1nt88b04v8-011P3o@mail.gmx.net>
 <10dbc864-aeec-4b03-e45c-ab1b46e85573@gmail.com>
Message-ID: <02f222d4-72dc-2a71-326f-e415890ece76@effectivedefense.org>



On 4/30/22 12:58 PM, Duncan Murdoch wrote:
> On 30/04/2022 12:57 p.m., Matthias Gondan wrote:
>> Dear developers,
>>
>> I have recently submitted my first r package, and bear with me, I am 
>> still learning things. Most importantly, there is a page with the CRAN 
>> package checks,
>>
>> https://cran.rstudio.com/web/checks/check_results_rolog.html
>>
>> The package check for r-release-macos-arm64 fails, in two places.
>>
>> ? The one in the table refers to Version 0.9, that one is less 
>> interesting because I have already fixed it. Well, minor question, 
>> will the version numbers for these tests increase automatically?
> 
> You manually change the version number of your package, and the version 
> number in the check table shows which version was tested.? New 
> submissions won't show up there until they are accepted.
> 
> Occasionally a new version could be accepted but fail to build on some 
> platforms; in that case the version number for that platform won't be 
> updated.? I think it's also possible for CRAN maintainers to manually 
> skip checks if they want.
> 
>> ? More importantly, there are two links called M1mac below the table, 
>> ?Additional issues?. They refer to the current version of the package, 
>> 0.9.2. The left link points to 
>> https://www.stats.ox.ac.uk/pub/bdr/M1mac/rolog.log, and there is an 
>> error message at 69% that needs to be fixed somehow. Note that the 
>> message is not really helpful (clang: error: unable to execute 
>> command: Abort trap: 6, clang: error: clang frontend command failed 
>> due to signal)
> 
> That looks like clang crashed.? If you can't duplicate it locally, it 
> will be hard to fix.
> 
> At the start of your log, there were these messages:
> 
> CMake Warning at cmake/port/Darwin.cmake:39 (message):
>  ? Could not find Macport or Homebrew to provide dependencies          
> trying to
>  ? configure with default search paths
> 
> I would try to test on a system that doesn't have Macport or Homebrew 
> installed.
> 
>> To investigate this in more detail, I tried the mac-builder service, 
>> but the build doesn?t fail there: 
>> https://mac.r-project.org/macbuilder/results/1651148567-352c2175cfbba55d/. 
>> I think this will be deleted soon, so this one is more recent, with 
>> only little changes: 
>> https://mac.r-project.org/macbuilder/results/1651332515-22f4e1b1c9492557/
>>
>> Does anyone have a good idea how to move on? I don?t have a Mac M1 at 
>> hand?
> 
> I think you'll need to find one to test on.? I'm not sure if Github 
> offers that platform for running Github actions, but I imagine there's 
> one somewhere or other.


	  One of my "R-CMD-check.yaml" files includes the following:


{os: macOS-latest, r: 'release'}


	  If you have this and it does not replicate your error, I don't know 
what other Mac options are available or if they would help.


TWO OTHER THOUGHTS:


1.  HOW DID YOU SUBMIT TO CRAN?  I know two ways.  You can submit 
directly via:


https://cran.r-project.org/submit.html


	  Alternatively, you can use "devtools::release()" as described in 
Chapter 20 of Wickham and Bryan, R Packages, available at:


https://r-pkgs.org


	  IF YOU SUBMITTED ONLY ONE OF THESE TWO WAYS, try the other ;-)


2.  DOCUMENT THIS PROBLEM IN a "cran-comments.md" file, as described in 
Wickham and Bryan.  Explain you can NOT replicate this problem.  With 
luck, if the package fails, a CRAN maintainer may look at that file and 
provide a more helpful suggestion -- or even fix the problem, if it's 
actually a problem with their platform.


	  Hope this helps.


	  Spencer Graves


p.s.  Jim Ramsay and I just went through some of this with the "fda" 
package.  We fixed that problem with help from Duncan Murdoch (THANKS, 
DUNCAN!!!).  We still have other problems, but ...

> 
> Duncan Murdoch
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From d@tr7320 @end|ng |rom un|@@ydney@edu@@u  Mon May  2 03:00:04 2022
From: d@tr7320 @end|ng |rom un|@@ydney@edu@@u (Dario Strbenac)
Date: Mon, 2 May 2022 01:00:04 +0000
Subject: [R-pkg-devel] Rlang and Code Evalutation Within Aesthetics
In-Reply-To: <C04ED051-6433-4407-9309-BDE5D54E64A8@dcn.davis.ca.us>
References: <SY2PR01MB3003DD190D342FB17A3ED260CDFF9@SY2PR01MB3003.ausprd01.prod.outlook.com>
 <fc7ed04e-97fb-bd5f-99ce-3e482a34cfd9@gmail.com>
 <C04ED051-6433-4407-9309-BDE5D54E64A8@dcn.davis.ca.us>
Message-ID: <SY2PR01MB3003E22F2D5C5494ADEED267CDC19@SY2PR01MB3003.ausprd01.prod.outlook.com>

Good day,

Thanks for your input. The misunderstaing was on my part about the !! operator. It employs eager evaluation and is the first part of the code to be evaluated, changing how we are used to R code, such as if-else statements, being evaluated.

--------------------------------------
Dario Strbenac
University of Sydney
Camperdown NSW 2050
Australia

From d@v|d_j_z|mmerm@nn @end|ng |rom hotm@||@com  Sun May  1 11:05:16 2022
From: d@v|d_j_z|mmerm@nn @end|ng |rom hotm@||@com (David)
Date: Sun, 1 May 2022 11:05:16 +0200
Subject: [R-pkg-devel] Detritus in temp directory RTransferEntropy
Message-ID: <DB7PR04MB4553C5AC939C056436808123D3FE9@DB7PR04MB4553.eurprd04.prod.outlook.com>

Hi R-Package-devel,

I am the developer of the RTransferEntropy package (https://CRAN.R-project.org/package=RTransferEntropy  <https://CRAN.R-project.org/package=RTransferEntropy>).
Recently we released a small patch to CRAN (0.2.15) but got the following NOTE on Windows (full log can be found here:https://win-builder.r-project.org/incoming_pretest/RTransferEntropy_0.2.15_20220430_231227/Windows/00check.log)
Note that the error does not appear on other systems.

* checking for detritus in the temp directory ... NOTE
Found the following files/directories:
   'Rscript22838309c1d9a' 'Rscript2eb88309c1d8a'
* DONE
Status: 1 NOTE

I looked online but couldn't find anything applicable to this specific error and the package. The package does not open any browser URL (the only similar issue I could find).
Also it does not use tempdir() or tempfile(). There is some code that writes to a file in the examples section, but this is not run (\dontrun{}).
Do you have any ideas what this might be or how to fix it?

Thanks and best regards,
David

	[[alternative HTML version deleted]]


From v|ncentv@nhee@ @end|ng |rom gm@||@com  Tue May  3 11:50:09 2022
From: v|ncentv@nhee@ @end|ng |rom gm@||@com (Vincent van Hees)
Date: Tue, 3 May 2022 11:50:09 +0200
Subject: [R-pkg-devel] Load data inside .Rd documentation file inside the
 item-field?
Message-ID: <CALnEB14P6iWH8+fVLD8h0O1que2S2M87UeD1WSMQxt9mS3REUQ@mail.gmail.com>

Dear list,

Is it possible in .Rd documentation to load and use data inside an
item-field like we can integrate R data in text in R markdown files?

Something along the lines of:
\item{max}{
  Numeric, default value = `R max`, controls the upper limit of the plot.
}
where `R max` resolves into the actual default value.

I am guessing this is not possible, but it would be great if someone could
either confirm or point me to the actual way to do this.

Full story with clarification for why I am trying to do this:
The R package I maintain has a function that acts as a data processing
pipeline with over a hundred configuration arguments. Given that it is bad
practice to write a function with this number of input arguments, I use
parameter objects that hold sets of arguments. These objects are then
passed on to the pipeline function. The default values for the parameter
objects are stored in a separate function load_params() that aids in
loading the defaults. Although it makes the code a lot easier to navigate,
it also means that the user will no longer find default argument values in
the standard package documentation.

As a solution I can write a package vignette that loads and displays all
the default argument values. However, for those more oriented towards using
the ? command to get help about the function, it would be nice if the same
default arguments values are also shown in the package documentation, being
the .Rd files accessed via .pdf or with ? in R.

Thanks, Vincent

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue May  3 12:08:01 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 3 May 2022 06:08:01 -0400
Subject: [R-pkg-devel] Fwd: Load data inside .Rd documentation file inside
 the item-field?
In-Reply-To: <9cefb08d-36c2-a1db-a125-7888ef935185@gmail.com>
References: <9cefb08d-36c2-a1db-a125-7888ef935185@gmail.com>
Message-ID: <e0e69a1b-37a4-e9b9-fc0d-1cfb6e88d536@gmail.com>

Whoops, forgot to cc the list.


-------- Forwarded Message --------
Subject: Re: [R-pkg-devel] Load data inside .Rd documentation file 
inside the item-field?
Date: Tue, 3 May 2022 06:07:01 -0400
From: Duncan Murdoch <murdoch.duncan at gmail.com>
To: Vincent van Hees <vincentvanhees at gmail.com>

On 03/05/2022 5:50 a.m., Vincent van Hees wrote:
> Dear list,
> 
> Is it possible in .Rd documentation to load and use data inside an
> item-field like we can integrate R data in text in R markdown files?
> 
> Something along the lines of:
> \item{max}{
>    Numeric, default value = `R max`, controls the upper limit of the plot.
> }
> where `R max` resolves into the actual default value.
> 
> I am guessing this is not possible, but it would be great if someone could
> either confirm or point me to the actual way to do this.

It is possible to execute R code and display the results on the help 
page.  You'll need to be able to compute the value you want to display. 
   Supposing "max" is the name of a parameter to function "fn" in 
package "pkg", the default value is

      formals(pkg::fn)[["max"]]

You insert this into the help page using syntax

      \Sexpr{formals(pkg::fn)[["max"]]}

which will apply `as.character()` to it (I think, though maybe it's 
format() ...) and insert the text there.

This is executed when the package installs.  I believe you'll already 
have the code installed so this runs the new installation, but you 
should check:  it might show you the default from a previous install.

You can also run the code when you build the tarball, using

       \Sexpr[stage=build]{formals(pkg::fn)[["max"]]}

in which case it will use whatever version of pkg happens to be 
installed on your system at the time of the build, not necessarily the 
one you are building.

Or finally, you could use

       \Sexpr[stage=render]{formals(pkg::fn)[["max"]]}

which won't run the code until the user asks to display the help page.

For more details and options, see Writing R Extensions section 2.12, 
"Dynamic pages".

Duncan Murdoch


From kry|ov@r00t @end|ng |rom gm@||@com  Tue May  3 14:58:21 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 3 May 2022 15:58:21 +0300
Subject: [R-pkg-devel] 
 Fwd: Load data inside .Rd documentation file inside the item-field?
In-Reply-To: <e0e69a1b-37a4-e9b9-fc0d-1cfb6e88d536@gmail.com>
References: <9cefb08d-36c2-a1db-a125-7888ef935185@gmail.com>
 <e0e69a1b-37a4-e9b9-fc0d-1cfb6e88d536@gmail.com>
Message-ID: <20220503155821.7f060db8@Tarkus>

On Tue, 3 May 2022 06:08:01 -0400
Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> You can also run the code when you build the tarball, using
> 
>        \Sexpr[stage=build]{formals(pkg::fn)[["max"]]}
> 
> in which case it will use whatever version of pkg happens to be 
> installed on your system at the time of the build, not necessarily
> the one you are building.

Shouldn't [stage=build] still correspond to the current
version of the package being built, thanks to the extra step of 
"* installing the package to process help pages"?

-- 
Best regards,
Ivan


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue May  3 15:45:51 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 3 May 2022 09:45:51 -0400
Subject: [R-pkg-devel] 
 Fwd: Load data inside .Rd documentation file inside the item-field?
In-Reply-To: <20220503155821.7f060db8@Tarkus>
References: <9cefb08d-36c2-a1db-a125-7888ef935185@gmail.com>
 <e0e69a1b-37a4-e9b9-fc0d-1cfb6e88d536@gmail.com>
 <20220503155821.7f060db8@Tarkus>
Message-ID: <06c38505-f677-6727-aa21-d156dd154aa0@gmail.com>

On 03/05/2022 8:58 a.m., Ivan Krylov wrote:
> On Tue, 3 May 2022 06:08:01 -0400
> Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
>> You can also run the code when you build the tarball, using
>>
>>         \Sexpr[stage=build]{formals(pkg::fn)[["max"]]}
>>
>> in which case it will use whatever version of pkg happens to be
>> installed on your system at the time of the build, not necessarily
>> the one you are building.
> 
> Shouldn't [stage=build] still correspond to the current
> version of the package being built, thanks to the extra step of
> "* installing the package to process help pages"?
> 

Yes, you're right.  Sorry for the misinformation.

Duncan Murdoch


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue May  3 15:53:45 2022
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 3 May 2022 15:53:45 +0200
Subject: [R-pkg-devel] 
 Load data inside .Rd documentation file inside the item-field?
In-Reply-To: <CALnEB14P6iWH8+fVLD8h0O1que2S2M87UeD1WSMQxt9mS3REUQ@mail.gmail.com>
References: <CALnEB14P6iWH8+fVLD8h0O1que2S2M87UeD1WSMQxt9mS3REUQ@mail.gmail.com>
Message-ID: <CABtg=KnBBjs_jtrogD-c-wyTdxJSXgWq6cVVTGd4zL=vk_mf2w@mail.gmail.com>

You can also do this with roxygen2:
https://roxygen2.r-lib.org/articles/rd-formatting.html#inline-code

It runs when you are generating the manual pages, for better or worse.

Gabor

On Tue, May 3, 2022 at 11:51 AM Vincent van Hees
<vincentvanhees at gmail.com> wrote:
>
> Dear list,
>
> Is it possible in .Rd documentation to load and use data inside an
> item-field like we can integrate R data in text in R markdown files?
>
> Something along the lines of:
> \item{max}{
>   Numeric, default value = `R max`, controls the upper limit of the plot.
> }
> where `R max` resolves into the actual default value.
>
> I am guessing this is not possible, but it would be great if someone could
> either confirm or point me to the actual way to do this.
>
> Full story with clarification for why I am trying to do this:
> The R package I maintain has a function that acts as a data processing
> pipeline with over a hundred configuration arguments. Given that it is bad
> practice to write a function with this number of input arguments, I use
> parameter objects that hold sets of arguments. These objects are then
> passed on to the pipeline function. The default values for the parameter
> objects are stored in a separate function load_params() that aids in
> loading the defaults. Although it makes the code a lot easier to navigate,
> it also means that the user will no longer find default argument values in
> the standard package documentation.
>
> As a solution I can write a package vignette that loads and displays all
> the default argument values. However, for those more oriented towards using
> the ? command to get help about the function, it would be nice if the same
> default arguments values are also shown in the package documentation, being
> the .Rd files accessed via .pdf or with ? in R.
>
> Thanks, Vincent
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From pro|jcn@@h @end|ng |rom gm@||@com  Tue May  3 19:54:11 2022
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Tue, 3 May 2022 13:54:11 -0400
Subject: [R-pkg-devel] HTML5 errors in win-builder R-release check
Message-ID: <03c3ef03-8262-d727-1bde-a9e204e92aa9@gmail.com>

I've been asked to "fix" some NOTEs in two of my packages.

The local (Linux Mint) R CMD check --as-cran gives no errors. Nor does win-builder for R-devel,
but R-release gives many errors of the form

Found the following problems:
Rcgmin.Rd:17:1: Warning: <table> attribute "width" not allowed for HTML5

Rcgmin.Rd:46:1: Warning: <tr> attribute "valign" not allowed for HTML5

Rcgmin.Rd:50:1: Warning: <tr> attribute "valign" not allowed for HTML5

Rcgmin.Rd:56:1: Warning: <tr> attribute "valign" not allowed for HTML5


In some cases the lines pointed to are beyond the end of my Rd file.

Does anyone know the source, and hopefully the solution, to these?

It's really difficult to fix something that does not appear to be an error
in the systems I can dig into.

John Nash


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue May  3 20:50:52 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 3 May 2022 14:50:52 -0400
Subject: [R-pkg-devel] HTML5 errors in win-builder R-release check
In-Reply-To: <03c3ef03-8262-d727-1bde-a9e204e92aa9@gmail.com>
References: <03c3ef03-8262-d727-1bde-a9e204e92aa9@gmail.com>
Message-ID: <35dd9e1f-1db1-463b-8a5a-4d7789a28822@gmail.com>

On 03/05/2022 1:54 p.m., J C Nash wrote:
> I've been asked to "fix" some NOTEs in two of my packages.
> 
> The local (Linux Mint) R CMD check --as-cran gives no errors. Nor does win-builder for R-devel,
> but R-release gives many errors of the form
> 
> Found the following problems:
> Rcgmin.Rd:17:1: Warning: <table> attribute "width" not allowed for HTML5
> 
> Rcgmin.Rd:46:1: Warning: <tr> attribute "valign" not allowed for HTML5
> 
> Rcgmin.Rd:50:1: Warning: <tr> attribute "valign" not allowed for HTML5
> 
> Rcgmin.Rd:56:1: Warning: <tr> attribute "valign" not allowed for HTML5
> 
> 
> In some cases the lines pointed to are beyond the end of my Rd file.
> 
> Does anyone know the source, and hopefully the solution, to these?
> 
> It's really difficult to fix something that does not appear to be an error
> in the systems I can dig into.

This has been discussed on R-sig-mac.

The messages likely originate in the "tidy" utility.  Some systems have 
very old versions of tidy which complain about very valid things; others 
have very new versions which spot errors in the HTML generation that R 
uses when building HTML help pages.

I think the error locations are misleading, in that "Rcgmin.Rd:17:1" 
really should be "Rcgmin.html:17:1", i.e. column 1 of line 17 of the 
html version of the Rcgmin help page (and I'd guess the column number is 
wrong too).

There may be a few real errors mixed in with the spurious ones, but I 
think I'd ignore all such warnings for now, since there's nothing you 
can do about most of them.

Duncan Murdoch


From j|ox @end|ng |rom mcm@@ter@c@  Tue May  3 21:00:08 2022
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Tue, 3 May 2022 15:00:08 -0400
Subject: [R-pkg-devel] HTML5 errors in win-builder R-release check
In-Reply-To: <15266_1651603874_243IpEMN018771_35dd9e1f-1db1-463b-8a5a-4d7789a28822@gmail.com>
References: <03c3ef03-8262-d727-1bde-a9e204e92aa9@gmail.com>
 <15266_1651603874_243IpEMN018771_35dd9e1f-1db1-463b-8a5a-4d7789a28822@gmail.com>
Message-ID: <37fd4fbb-6061-21e8-aceb-6c471f737e50@mcmaster.ca>

Dear Duncan and John,

I also cross-posted some of the discussion on R-SIG-Mac to 
r-package-devel when it became clear that the problem wasn't necessarily 
specific to Macs. See 
<https://stat.ethz.ch/pipermail/r-package-devel/2022q2/007993.html>, and 
also most recently on R-SIG-Mac, Brian Ripley's resolution of the 
matter, at <https://stat.ethz.ch/pipermail/r-sig-mac/2022-May/014443.html>.

Best,
  John

On 2022-05-03 2:50 p.m., Duncan Murdoch wrote:
> On 03/05/2022 1:54 p.m., J C Nash wrote:
>> I've been asked to "fix" some NOTEs in two of my packages.
>>
>> The local (Linux Mint) R CMD check --as-cran gives no errors. Nor does 
>> win-builder for R-devel,
>> but R-release gives many errors of the form
>>
>> Found the following problems:
>> Rcgmin.Rd:17:1: Warning: <table> attribute "width" not allowed for HTML5
>>
>> Rcgmin.Rd:46:1: Warning: <tr> attribute "valign" not allowed for HTML5
>>
>> Rcgmin.Rd:50:1: Warning: <tr> attribute "valign" not allowed for HTML5
>>
>> Rcgmin.Rd:56:1: Warning: <tr> attribute "valign" not allowed for HTML5
>>
>>
>> In some cases the lines pointed to are beyond the end of my Rd file.
>>
>> Does anyone know the source, and hopefully the solution, to these?
>>
>> It's really difficult to fix something that does not appear to be an 
>> error
>> in the systems I can dig into.
> 
> This has been discussed on R-sig-mac.
> 
> The messages likely originate in the "tidy" utility.? Some systems have 
> very old versions of tidy which complain about very valid things; others 
> have very new versions which spot errors in the HTML generation that R 
> uses when building HTML help pages.
> 
> I think the error locations are misleading, in that "Rcgmin.Rd:17:1" 
> really should be "Rcgmin.html:17:1", i.e. column 1 of line 17 of the 
> html version of the Rcgmin help page (and I'd guess the column number is 
> wrong too).
> 
> There may be a few real errors mixed in with the spurious ones, but I 
> think I'd ignore all such warnings for now, since there's nothing you 
> can do about most of them.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
-- 
John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
web: https://socialsciences.mcmaster.ca/jfox/


From henr|k@bengt@@on @end|ng |rom gm@||@com  Tue May  3 21:09:00 2022
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Tue, 3 May 2022 12:09:00 -0700
Subject: [R-pkg-devel] HTML5 errors in win-builder R-release check
In-Reply-To: <03c3ef03-8262-d727-1bde-a9e204e92aa9@gmail.com>
References: <03c3ef03-8262-d727-1bde-a9e204e92aa9@gmail.com>
Message-ID: <CAFDcVCSWMfWMxm7SHM8zaeANaB4jM4MYHfBiHZYk=KcVAkF_WA@mail.gmail.com>

Looks like a mistake in R that was fixed in R-devel (rev 82308) less
than a day ago, cf.

https://github.com/wch/r-source/commit/60cc6ebd762d4199aa8e5addf08282e336138a4a

/Henrik

On Tue, May 3, 2022 at 10:54 AM J C Nash <profjcnash at gmail.com> wrote:
>
> I've been asked to "fix" some NOTEs in two of my packages.
>
> The local (Linux Mint) R CMD check --as-cran gives no errors. Nor does win-builder for R-devel,
> but R-release gives many errors of the form
>
> Found the following problems:
> Rcgmin.Rd:17:1: Warning: <table> attribute "width" not allowed for HTML5
>
> Rcgmin.Rd:46:1: Warning: <tr> attribute "valign" not allowed for HTML5
>
> Rcgmin.Rd:50:1: Warning: <tr> attribute "valign" not allowed for HTML5
>
> Rcgmin.Rd:56:1: Warning: <tr> attribute "valign" not allowed for HTML5
>
>
> In some cases the lines pointed to are beyond the end of my Rd file.
>
> Does anyone know the source, and hopefully the solution, to these?
>
> It's really difficult to fix something that does not appear to be an error
> in the systems I can dig into.
>
> John Nash
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

On Tue, May 3, 2022 at 10:54 AM J C Nash <profjcnash at gmail.com> wrote:
>
> I've been asked to "fix" some NOTEs in two of my packages.
>
> The local (Linux Mint) R CMD check --as-cran gives no errors. Nor does win-builder for R-devel,
> but R-release gives many errors of the form
>
> Found the following problems:
> Rcgmin.Rd:17:1: Warning: <table> attribute "width" not allowed for HTML5
>
> Rcgmin.Rd:46:1: Warning: <tr> attribute "valign" not allowed for HTML5
>
> Rcgmin.Rd:50:1: Warning: <tr> attribute "valign" not allowed for HTML5
>
> Rcgmin.Rd:56:1: Warning: <tr> attribute "valign" not allowed for HTML5
>
>
> In some cases the lines pointed to are beyond the end of my Rd file.
>
> Does anyone know the source, and hopefully the solution, to these?
>
> It's really difficult to fix something that does not appear to be an error
> in the systems I can dig into.
>
> John Nash
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From henr|k@bengt@@on @end|ng |rom gm@||@com  Tue May  3 21:10:17 2022
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Tue, 3 May 2022 12:10:17 -0700
Subject: [R-pkg-devel] HTML5 errors in win-builder R-release check
In-Reply-To: <CAFDcVCSWMfWMxm7SHM8zaeANaB4jM4MYHfBiHZYk=KcVAkF_WA@mail.gmail.com>
References: <03c3ef03-8262-d727-1bde-a9e204e92aa9@gmail.com>
 <CAFDcVCSWMfWMxm7SHM8zaeANaB4jM4MYHfBiHZYk=KcVAkF_WA@mail.gmail.com>
Message-ID: <CAFDcVCQDZiiafhqBEjdeps-dvPDy4xSwRHc=FzQg=bqgSb6ZMg@mail.gmail.com>

Maybe I spoke too soon; that doesn't look like a change in R code;
only in their regression tests. /Henrik

On Tue, May 3, 2022 at 12:09 PM Henrik Bengtsson
<henrik.bengtsson at gmail.com> wrote:
>
> Looks like a mistake in R that was fixed in R-devel (rev 82308) less
> than a day ago, cf.
>
> https://github.com/wch/r-source/commit/60cc6ebd762d4199aa8e5addf08282e336138a4a
>
> /Henrik
>
> On Tue, May 3, 2022 at 10:54 AM J C Nash <profjcnash at gmail.com> wrote:
> >
> > I've been asked to "fix" some NOTEs in two of my packages.
> >
> > The local (Linux Mint) R CMD check --as-cran gives no errors. Nor does win-builder for R-devel,
> > but R-release gives many errors of the form
> >
> > Found the following problems:
> > Rcgmin.Rd:17:1: Warning: <table> attribute "width" not allowed for HTML5
> >
> > Rcgmin.Rd:46:1: Warning: <tr> attribute "valign" not allowed for HTML5
> >
> > Rcgmin.Rd:50:1: Warning: <tr> attribute "valign" not allowed for HTML5
> >
> > Rcgmin.Rd:56:1: Warning: <tr> attribute "valign" not allowed for HTML5
> >
> >
> > In some cases the lines pointed to are beyond the end of my Rd file.
> >
> > Does anyone know the source, and hopefully the solution, to these?
> >
> > It's really difficult to fix something that does not appear to be an error
> > in the systems I can dig into.
> >
> > John Nash
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> On Tue, May 3, 2022 at 10:54 AM J C Nash <profjcnash at gmail.com> wrote:
> >
> > I've been asked to "fix" some NOTEs in two of my packages.
> >
> > The local (Linux Mint) R CMD check --as-cran gives no errors. Nor does win-builder for R-devel,
> > but R-release gives many errors of the form
> >
> > Found the following problems:
> > Rcgmin.Rd:17:1: Warning: <table> attribute "width" not allowed for HTML5
> >
> > Rcgmin.Rd:46:1: Warning: <tr> attribute "valign" not allowed for HTML5
> >
> > Rcgmin.Rd:50:1: Warning: <tr> attribute "valign" not allowed for HTML5
> >
> > Rcgmin.Rd:56:1: Warning: <tr> attribute "valign" not allowed for HTML5
> >
> >
> > In some cases the lines pointed to are beyond the end of my Rd file.
> >
> > Does anyone know the source, and hopefully the solution, to these?
> >
> > It's really difficult to fix something that does not appear to be an error
> > in the systems I can dig into.
> >
> > John Nash
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From kry|ov@r00t @end|ng |rom gm@||@com  Tue May  3 21:18:10 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 3 May 2022 22:18:10 +0300
Subject: [R-pkg-devel] HTML5 errors in win-builder R-release check
In-Reply-To: <CAFDcVCQDZiiafhqBEjdeps-dvPDy4xSwRHc=FzQg=bqgSb6ZMg@mail.gmail.com>
References: <03c3ef03-8262-d727-1bde-a9e204e92aa9@gmail.com>
 <CAFDcVCSWMfWMxm7SHM8zaeANaB4jM4MYHfBiHZYk=KcVAkF_WA@mail.gmail.com>
 <CAFDcVCQDZiiafhqBEjdeps-dvPDy4xSwRHc=FzQg=bqgSb6ZMg@mail.gmail.com>
Message-ID: <20220503221810.03430dd9@Tarkus>

On Tue, 3 May 2022 12:10:17 -0700
Henrik Bengtsson <henrik.bengtsson at gmail.com> wrote:

> Maybe I spoke too soon; that doesn't look like a change in R code;
> only in their regression tests. /Henrik

Here's the earlier commit (r82283) where the HTML generation code was
changed:
https://github.com/r-devel/r-svn/commit/5b2011ddbd7f9bad82e374904c9e3da21e760a9f

-- 
Best regards,
Ivan


From pro|jcn@@h @end|ng |rom gm@||@com  Tue May  3 22:56:05 2022
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Tue, 3 May 2022 16:56:05 -0400
Subject: [R-pkg-devel] HTML5 errors in win-builder R-release check
In-Reply-To: <20220503221810.03430dd9@Tarkus>
References: <03c3ef03-8262-d727-1bde-a9e204e92aa9@gmail.com>
 <CAFDcVCSWMfWMxm7SHM8zaeANaB4jM4MYHfBiHZYk=KcVAkF_WA@mail.gmail.com>
 <CAFDcVCQDZiiafhqBEjdeps-dvPDy4xSwRHc=FzQg=bqgSb6ZMg@mail.gmail.com>
 <20220503221810.03430dd9@Tarkus>
Message-ID: <6754a4f0-9824-4094-1548-22b1931936d7@gmail.com>

Thanks to all for quick responses.

While I'll check some of the links, esp. Brian Ripley's, it looks like
it may be a good idea to take a few days off this task to let code settle
down. Rhub couldn't find errors that win-builder complained of -- well, at
least at the time instance I tried it!

Best, JN


On 2022-05-03 15:18, Ivan Krylov wrote:
> On Tue, 3 May 2022 12:10:17 -0700
> Henrik Bengtsson <henrik.bengtsson at gmail.com> wrote:
> 
>> Maybe I spoke too soon; that doesn't look like a change in R code;
>> only in their regression tests. /Henrik
> 
> Here's the earlier commit (r82283) where the HTML generation code was
> changed:
> https://github.com/r-devel/r-svn/commit/5b2011ddbd7f9bad82e374904c9e3da21e760a9f
>


From j@me@@m@rt|nd@|e @end|ng |rom ce|@@@co@uk  Wed May  4 14:38:59 2022
From: j@me@@m@rt|nd@|e @end|ng |rom ce|@@@co@uk (James Martindale (Cefas))
Date: Wed, 4 May 2022 12:38:59 +0000
Subject: [R-pkg-devel] 
 Warning with R Build tools during CRAN check but not
 with local installation
In-Reply-To: <75cb6267-a053-2ca8-6314-c3267f968c56@gmail.com>
References: <PA4PR08MB6304479A1B099F2F607F5729C5F89@PA4PR08MB6304.eurprd08.prod.outlook.com>
 <75cb6267-a053-2ca8-6314-c3267f968c56@gmail.com>
Message-ID: <DBBPR08MB629964C51E016F270BFAFE20C5C39@DBBPR08MB6299.eurprd08.prod.outlook.com>

Thanks for this, the problem remains when I get rid of the new Stan file and rebuild, so it seems like that was a red herring. I've updated to the latest version of R, RStudio, RTools and am still getting the same error message. This is true for `check_win_devel()`, `check_win_release()`, `check_win_oldrelease()` and `check_rhub()`. Any further ideas how I might debug this?

-----Original Message-----
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: 25 April 2022 14:29
To: James Martindale (Cefas) <james.martindale at cefas.co.uk>; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Warning with R Build tools during CRAN check but not with local installation

WARNING - This email originated from outside of the organisation. Do not click links , forward or open attachments unless you recognise the sender and have established the content is safe.

On 25/04/2022 5:36 a.m., James Martindale (Cefas) via R-package-devel wrote:
> Good morning,
>
> I am trying to release an `R` package to CRAN that contains some compiled C++ code and Stan models. Since adding a new Stan file to the package, I now get the following issue whenever I run `devtools::check_rhub()` or `devtools::check_win_devel()`:
>
>
> * checking whether package 'EcoEnsemble' can be installed ... WARNING
> Found the following significant warnings:
>    WARNING: The tools required to build C++ code for R were not found.
>
> This warning does *not* appear when I install the package locally and did not appear in the `r_hub`/`win_devel` checks in a previous version of the package that did not include this additional Stan file. There is nothing unusual about this Stan model that would lead it to cause issues like this.
>
> Searching for this error suggests that this is an issue with the installation of RTools, but since this is not created in the local installation I am very confused. What could be the culprit here / how would I go about debugging this issue?

Just to be clear:  if you remove that file, does the error go away?
There was a change to the R version last week, so the issue might be the new version of R-devel, not the change you made to your package.

Duncan Murdoch
________________________________
 This email and any attachments are intended for the named recipient only. Its unauthorised use, distribution, disclosure, storage or copying is not permitted. If you have received it in error, please destroy all copies and notify the sender. In messages of a non-business nature, the views and opinions expressed are the author's own and do not necessarily reflect those of Cefas. Communications on Cefas? computer systems may be monitored and/or recorded to secure the effective operation of the system and for other lawful purposes. All messages sent and received by the Centre for Environment, Fisheries and Aquaculture Science may be monitored in line with relevant UK legislation . <https://www.gov.uk/government/organisations/centre-for-environment-fisheries-and-aquaculture-science/about/personal-information-charter>

From tom@@@k@||ber@ @end|ng |rom gm@||@com  Fri May  6 09:57:54 2022
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Fri, 6 May 2022 09:57:54 +0200
Subject: [R-pkg-devel] 
 Warning with R Build tools during CRAN check but not
 with local installation
In-Reply-To: <DBBPR08MB629964C51E016F270BFAFE20C5C39@DBBPR08MB6299.eurprd08.prod.outlook.com>
References: <PA4PR08MB6304479A1B099F2F607F5729C5F89@PA4PR08MB6304.eurprd08.prod.outlook.com>
 <75cb6267-a053-2ca8-6314-c3267f968c56@gmail.com>
 <DBBPR08MB629964C51E016F270BFAFE20C5C39@DBBPR08MB6299.eurprd08.prod.outlook.com>
Message-ID: <34aa5686-f3c6-725c-43fe-62d2152fafe0@gmail.com>


On 5/4/22 14:38, James Martindale (Cefas) via R-package-devel wrote:
> Thanks for this, the problem remains when I get rid of the new Stan file and rebuild, so it seems like that was a red herring. I've updated to the latest version of R, RStudio, RTools and am still getting the same error message. This is true for `check_win_devel()`, `check_win_release()`, `check_win_oldrelease()` and `check_rhub()`. Any further ideas how I might debug this?

Could you try uploading the package manually to Winbuilder, the R-devel 
queue? Does it work there?

https://win-builder.r-project.org/
https://win-builder.r-project.org/upload.aspx

If not, I would recommend first debugging it to work there. You might 
compare it to an existing CRAN package similar to yours. And if you need 
more help, you could share a link to your package and the output from 
winbuilder.

Best
Tomas

>
> -----Original Message-----
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: 25 April 2022 14:29
> To: James Martindale (Cefas) <james.martindale at cefas.co.uk>; r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Warning with R Build tools during CRAN check but not with local installation
>
> WARNING - This email originated from outside of the organisation. Do not click links , forward or open attachments unless you recognise the sender and have established the content is safe.
>
> On 25/04/2022 5:36 a.m., James Martindale (Cefas) via R-package-devel wrote:
>> Good morning,
>>
>> I am trying to release an `R` package to CRAN that contains some compiled C++ code and Stan models. Since adding a new Stan file to the package, I now get the following issue whenever I run `devtools::check_rhub()` or `devtools::check_win_devel()`:
>>
>>
>> * checking whether package 'EcoEnsemble' can be installed ... WARNING
>> Found the following significant warnings:
>>     WARNING: The tools required to build C++ code for R were not found.
>>
>> This warning does *not* appear when I install the package locally and did not appear in the `r_hub`/`win_devel` checks in a previous version of the package that did not include this additional Stan file. There is nothing unusual about this Stan model that would lead it to cause issues like this.
>>
>> Searching for this error suggests that this is an issue with the installation of RTools, but since this is not created in the local installation I am very confused. What could be the culprit here / how would I go about debugging this issue?
> Just to be clear:  if you remove that file, does the error go away?
> There was a change to the R version last week, so the issue might be the new version of R-devel, not the change you made to your package.
>
> Duncan Murdoch
> ________________________________
>   This email and any attachments are intended for the named recipient only. Its unauthorised use, distribution, disclosure, storage or copying is not permitted. If you have received it in error, please destroy all copies and notify the sender. In messages of a non-business nature, the views and opinions expressed are the author's own and do not necessarily reflect those of Cefas. Communications on Cefas? computer systems may be monitored and/or recorded to secure the effective operation of the system and for other lawful purposes. All messages sent and received by the Centre for Environment, Fisheries and Aquaculture Science may be monitored in line with relevant UK legislation . <https://www.gov.uk/government/organisations/centre-for-environment-fisheries-and-aquaculture-science/about/personal-information-charter>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From bbo|ker @end|ng |rom gm@||@com  Sat May  7 01:14:46 2022
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Fri, 6 May 2022 19:14:46 -0400
Subject: [R-pkg-devel] HTML5 errors in win-builder R-release check
Message-ID: <66f331c3-77f2-5b3a-3634-3807eee68bf6@gmail.com>


  (Can't get to the previous message, hoping not to break the thread.)

   I am getting similar errors to those reported by John Nash 
<https://stat.ethz.ch/pipermail/r-package-devel/2022q2/008031.html>, of 
the form

Warning: <table> attribute "width" not allowed for HTML5

(same platforms: win-builder r-release but not r-devel, not on r-hub's 
platform).

   I think the commit that Henrik noted (SVN 82283, 
https://github.com/r-devel/r-svn/commit/5b2011ddbd7f9bad82e374904c9e3da21e760a9f, 
April 29) was submitted to fix these problems - but it came a week after 
R 4.2.0 was released. Perhaps it would be a good candidate for including 
in a patch release, if anything slightly more important arises that 
makes it worth releasing one ...

    A little surprising that this hasn't bitten more people/that there's 
not more chatter about this? Maybe John and I are doing something unusual?

   cheers
     Ben Bolker


From Ben@Engber@ @end|ng |rom Be-Log|c@|@n|  Sat May  7 23:24:19 2022
From: Ben@Engber@ @end|ng |rom Be-Log|c@|@n| (Ben Engbers)
Date: Sat, 7 May 2022 23:24:19 +0200
Subject: [R-pkg-devel] Searching examples in source code
Message-ID: <a068ddb6-fee1-76ac-c180-c02f51effa7f@Be-Logical.nl>

Hi,

My package (RBaseX) is written entirely in R. The performance is not bad 
but to further improve the performance I want to investigate to what 
extent use of C++ makes sense. Problem is that I have little experience 
with C++ and none with Rcpp. So I am looking for examples.
On my (linux) system I installed several packages that needed to be 
compiled. So it is likely that I already have examples on my system.

My first question is if there is a useful linux command to search all 
the source code of installed packages on my system.
The second question is if there is a command to search all packages at 
https://cran.r-project.org/web/packages/available_packages_by_name.html?

This question is not only relevant to C++ examples. It would also be 
nice if you could search for occurrences of commands in R code.

Ben


From bbo|ker @end|ng |rom gm@||@com  Sun May  8 00:43:54 2022
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sat, 7 May 2022 18:43:54 -0400
Subject: [R-pkg-devel] nit-picking about CRAN repository policy
Message-ID: <1d04b066-4d72-16ae-6758-e8d5c81cb133@gmail.com>


   Folks,

   CRAN has recently set up an auxiliary 'noSuggests' test platform that 
tests that packages are using suggested packages conditionally, as 
recommended in Writing R Extensions, and as (sort of) specified in the 
CRAN repository policy.

   Specifically, the CRP (revision 5236) says:

 > A package listed in ?Suggests? or ?Enhances? should be used 
conditionally in examples or tests if it cannot straightforwardly be 
installed on the major R platforms. (?Writing R Extensions? recommends 
that they are always used conditionally.)

   One of my packages failed on the 'noSuggest' test platform 
<https://www.stats.ox.ac.uk/pub/bdr/noSuggests/bbmle.out> because two 
suggested packages were used unconditionally in the vignette. There are 
two reasons (IMO) that this should *not* have triggered a threat of 
archiving:

   (1) the unconditional package use was in a vignette, not in examples 
or tests
   (2) the relevant packages (AICcmodavg and MuMIn) are available on 
CRAN and install easily on Linux/Windows/MacOS (they are R-only, no 
compiled code or extra requirements, binaries are available on CRAN).

    Is it worth suggesting to CRAN maintainers that either they refine 
their 'noSuggests' test so that it conforms to the wording in the CRP, 
or that they change the CRP wording to something stricter like

 > Any package listed in ?Suggests? or ?Enhances? should be used 
conditionally in examples, tests, and vignettes.

  ?

   cheers
     Ben Bolker


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun May  8 00:47:36 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 07 May 2022 15:47:36 -0700
Subject: [R-pkg-devel] Searching examples in source code
In-Reply-To: <a068ddb6-fee1-76ac-c180-c02f51effa7f@Be-Logical.nl>
References: <a068ddb6-fee1-76ac-c180-c02f51effa7f@Be-Logical.nl>
Message-ID: <7A09F496-FA18-4303-BFAD-4DC20ACEC089@dcn.davis.ca.us>

I use grep, the old "general regular expression parser" at the bash command-line. It is also useful in conjunction with the "find" and "xargs".

You can also do these things with list.files and readLines and grep within R, but splatting it out onto a terminal screen with the "less" program is convenient.

On May 7, 2022 2:24:19 PM PDT, Ben Engbers <Ben.Engbers at Be-Logical.nl> wrote:
>Hi,
>
>My package (RBaseX) is written entirely in R. The performance is not bad but to further improve the performance I want to investigate to what extent use of C++ makes sense. Problem is that I have little experience with C++ and none with Rcpp. So I am looking for examples.
>On my (linux) system I installed several packages that needed to be compiled. So it is likely that I already have examples on my system.
>
>My first question is if there is a useful linux command to search all the source code of installed packages on my system.
>The second question is if there is a command to search all packages at https://cran.r-project.org/web/packages/available_packages_by_name.html?
>
>This question is not only relevant to C++ examples. It would also be nice if you could search for occurrences of commands in R code.
>
>Ben
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From edd @end|ng |rom deb|@n@org  Sun May  8 00:54:44 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sat, 7 May 2022 17:54:44 -0500
Subject: [R-pkg-devel] nit-picking about CRAN repository policy
In-Reply-To: <1d04b066-4d72-16ae-6758-e8d5c81cb133@gmail.com>
References: <1d04b066-4d72-16ae-6758-e8d5c81cb133@gmail.com>
Message-ID: <25206.63668.47319.880585@rob.eddelbuettel.com>


While I of course do not speak for CRAN, allow me (given I've harped on this
beat before [1]) to record a strong disagreement here: "unconditionally used"
is simply not reflecting the conditional nature of a Suggests, nomatter where
it happens in the package.  Vignettes are no different from examples.

So I say thanks to CRAN for having gradually sharpened the language in the
CRAN Repo Policu over the years and for now adding even more explicit tests.

Dirk

[1] One such post is "Suggests != Depends which is at
https://dirk.eddelbuettel.com/blog/2017/03/22/#suggests_is_not_depends

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun May  8 01:17:32 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 7 May 2022 19:17:32 -0400
Subject: [R-pkg-devel] nit-picking about CRAN repository policy
In-Reply-To: <1d04b066-4d72-16ae-6758-e8d5c81cb133@gmail.com>
References: <1d04b066-4d72-16ae-6758-e8d5c81cb133@gmail.com>
Message-ID: <50dbff31-6ef4-59c6-2c77-e26fe8c0095e@gmail.com>

On 07/05/2022 6:43 p.m., Ben Bolker wrote:
> 
>     Folks,
> 
>     CRAN has recently set up an auxiliary 'noSuggests' test platform that
> tests that packages are using suggested packages conditionally, as
> recommended in Writing R Extensions, and as (sort of) specified in the
> CRAN repository policy.
> 
>     Specifically, the CRP (revision 5236) says:
> 
>   > A package listed in ?Suggests? or ?Enhances? should be used
> conditionally in examples or tests if it cannot straightforwardly be
> installed on the major R platforms. (?Writing R Extensions? recommends
> that they are always used conditionally.)
> 
>     One of my packages failed on the 'noSuggest' test platform
> <https://www.stats.ox.ac.uk/pub/bdr/noSuggests/bbmle.out> because two
> suggested packages were used unconditionally in the vignette. There are
> two reasons (IMO) that this should *not* have triggered a threat of
> archiving:
> 
>     (1) the unconditional package use was in a vignette, not in examples
> or tests
>     (2) the relevant packages (AICcmodavg and MuMIn) are available on
> CRAN and install easily on Linux/Windows/MacOS (they are R-only, no
> compiled code or extra requirements, binaries are available on CRAN).
> 
>      Is it worth suggesting to CRAN maintainers that either they refine
> their 'noSuggests' test so that it conforms to the wording in the CRP,
> or that they change the CRP wording to something stricter like
> 
>   > Any package listed in ?Suggests? or ?Enhances? should be used
> conditionally in examples, tests, and vignettes.

I wouldn't think it's worth the time, but you could submit a suggested 
patch to them if you feel like it.

Personally I'd take a more extreme position than theirs:  your package 
should check without errors if any subset of the Suggests packages is 
installed.  This isn't practical to test, but "all" and "none" is at 
least something.

With vignette formats based on knitr, it's very easy to implement this. 
  Just add a code chunk at the beginning with code like this:

   if (!requireNamespace("sug1") ||
       !requireNamespace("sug2")) {
     warning(call. = FALSE, "This vignette requires sug1 and sug2 to be 
installed")
     knitr::knit_exit()
   }

I don't know if other vignette engines make it so easy to bail out, but 
they should.

Duncan Murdoch


From bbo|ker @end|ng |rom gm@||@com  Sun May  8 01:30:23 2022
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sat, 7 May 2022 19:30:23 -0400
Subject: [R-pkg-devel] nit-picking about CRAN repository policy
In-Reply-To: <50dbff31-6ef4-59c6-2c77-e26fe8c0095e@gmail.com>
References: <1d04b066-4d72-16ae-6758-e8d5c81cb133@gmail.com>
 <50dbff31-6ef4-59c6-2c77-e26fe8c0095e@gmail.com>
Message-ID: <9154338b-33eb-2c76-c907-65ba45dd8194@gmail.com>



On 2022-05-07 7:17 p.m., Duncan Murdoch wrote:
> On 07/05/2022 6:43 p.m., Ben Bolker wrote:
>>
>> ??? Folks,
>>
>> ??? CRAN has recently set up an auxiliary 'noSuggests' test platform that
>> tests that packages are using suggested packages conditionally, as
>> recommended in Writing R Extensions, and as (sort of) specified in the
>> CRAN repository policy.
>>
>> ??? Specifically, the CRP (revision 5236) says:
>>
>> ? > A package listed in ?Suggests? or ?Enhances? should be used
>> conditionally in examples or tests if it cannot straightforwardly be
>> installed on the major R platforms. (?Writing R Extensions? recommends
>> that they are always used conditionally.)
>>
>> ??? One of my packages failed on the 'noSuggest' test platform
>> <https://www.stats.ox.ac.uk/pub/bdr/noSuggests/bbmle.out> because two
>> suggested packages were used unconditionally in the vignette. There are
>> two reasons (IMO) that this should *not* have triggered a threat of
>> archiving:
>>
>> ??? (1) the unconditional package use was in a vignette, not in examples
>> or tests
>> ??? (2) the relevant packages (AICcmodavg and MuMIn) are available on
>> CRAN and install easily on Linux/Windows/MacOS (they are R-only, no
>> compiled code or extra requirements, binaries are available on CRAN).
>>
>> ???? Is it worth suggesting to CRAN maintainers that either they refine
>> their 'noSuggests' test so that it conforms to the wording in the CRP,
>> or that they change the CRP wording to something stricter like
>>
>> ? > Any package listed in ?Suggests? or ?Enhances? should be used
>> conditionally in examples, tests, and vignettes.
> 
> I wouldn't think it's worth the time, but you could submit a suggested 
> patch to them if you feel like it.
> 
> Personally I'd take a more extreme position than theirs:? your package 
> should check without errors if any subset of the Suggests packages is 
> installed.? This isn't practical to test, but "all" and "none" is at 
> least something.
> 
> With vignette formats based on knitr, it's very easy to implement this. 
>  ?Just add a code chunk at the beginning with code like this:
> 
>  ? if (!requireNamespace("sug1") ||
>  ????? !requireNamespace("sug2")) {
>  ??? warning(call. = FALSE, "This vignette requires sug1 and sug2 to be 
> installed")
>  ??? knitr::knit_exit()
>  ? }
> 
> I don't know if other vignette engines make it so easy to bail out, but 
> they should.
> 
> Duncan Murdoch


   Thanks.

   Fixing the problems isn't difficult or unreasonable (I will do it in 
a more subtle way, running chunks of code conditionally). I'm just 
feeling a little bit grumpy/defensive because:

  * CRAN  asked me to submit a patched version before May 7
  * I submitted a patched version to CRAN at 7:30 PM local time on May 6 
(which is admittedly May 7 in UK/European time)
* I woke up to an e-mail from CRAN to me and 50 downstream package 
maintainers saying that my package was scheduled for archiving, and a 
concerned message from a downstream package maintainer ...

   cheers
    Ben B.


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun May  8 01:38:19 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 7 May 2022 19:38:19 -0400
Subject: [R-pkg-devel] nit-picking about CRAN repository policy
In-Reply-To: <9154338b-33eb-2c76-c907-65ba45dd8194@gmail.com>
References: <1d04b066-4d72-16ae-6758-e8d5c81cb133@gmail.com>
 <50dbff31-6ef4-59c6-2c77-e26fe8c0095e@gmail.com>
 <9154338b-33eb-2c76-c907-65ba45dd8194@gmail.com>
Message-ID: <5c30797e-8ee1-78f4-4d3c-8fedb54cb15a@gmail.com>

On 07/05/2022 7:30 p.m., Ben Bolker wrote:
> 
> 
> On 2022-05-07 7:17 p.m., Duncan Murdoch wrote:
>> On 07/05/2022 6:43 p.m., Ben Bolker wrote:
>>>
>>>  ??? Folks,
>>>
>>>  ??? CRAN has recently set up an auxiliary 'noSuggests' test platform that
>>> tests that packages are using suggested packages conditionally, as
>>> recommended in Writing R Extensions, and as (sort of) specified in the
>>> CRAN repository policy.
>>>
>>>  ??? Specifically, the CRP (revision 5236) says:
>>>
>>>  ? > A package listed in ?Suggests? or ?Enhances? should be used
>>> conditionally in examples or tests if it cannot straightforwardly be
>>> installed on the major R platforms. (?Writing R Extensions? recommends
>>> that they are always used conditionally.)
>>>
>>>  ??? One of my packages failed on the 'noSuggest' test platform
>>> <https://www.stats.ox.ac.uk/pub/bdr/noSuggests/bbmle.out> because two
>>> suggested packages were used unconditionally in the vignette. There are
>>> two reasons (IMO) that this should *not* have triggered a threat of
>>> archiving:
>>>
>>>  ??? (1) the unconditional package use was in a vignette, not in examples
>>> or tests
>>>  ??? (2) the relevant packages (AICcmodavg and MuMIn) are available on
>>> CRAN and install easily on Linux/Windows/MacOS (they are R-only, no
>>> compiled code or extra requirements, binaries are available on CRAN).
>>>
>>>  ???? Is it worth suggesting to CRAN maintainers that either they refine
>>> their 'noSuggests' test so that it conforms to the wording in the CRP,
>>> or that they change the CRP wording to something stricter like
>>>
>>>  ? > Any package listed in ?Suggests? or ?Enhances? should be used
>>> conditionally in examples, tests, and vignettes.
>>
>> I wouldn't think it's worth the time, but you could submit a suggested
>> patch to them if you feel like it.
>>
>> Personally I'd take a more extreme position than theirs:? your package
>> should check without errors if any subset of the Suggests packages is
>> installed.? This isn't practical to test, but "all" and "none" is at
>> least something.
>>
>> With vignette formats based on knitr, it's very easy to implement this.
>>   ?Just add a code chunk at the beginning with code like this:
>>
>>   ? if (!requireNamespace("sug1") ||
>>   ????? !requireNamespace("sug2")) {
>>   ??? warning(call. = FALSE, "This vignette requires sug1 and sug2 to be
>> installed")
>>   ??? knitr::knit_exit()
>>   ? }
>>
>> I don't know if other vignette engines make it so easy to bail out, but
>> they should.
>>
>> Duncan Murdoch
> 
> 
>     Thanks.
> 
>     Fixing the problems isn't difficult or unreasonable (I will do it in
> a more subtle way, running chunks of code conditionally). I'm just
> feeling a little bit grumpy/defensive because:
> 
>    * CRAN  asked me to submit a patched version before May 7
>    * I submitted a patched version to CRAN at 7:30 PM local time on May 6
> (which is admittedly May 7 in UK/European time)
> * I woke up to an e-mail from CRAN to me and 50 downstream package
> maintainers saying that my package was scheduled for archiving, and a
> concerned message from a downstream package maintainer ...

As far as I know, the folks at CRAN are *always* grumpy.

Duncan


From murr@y@e||ord @end|ng |rom ot@go@@c@nz  Sun May  8 10:01:16 2022
From: murr@y@e||ord @end|ng |rom ot@go@@c@nz (Murray Efford)
Date: Sun, 8 May 2022 08:01:16 +0000
Subject: [R-pkg-devel] DOI in Description (possibly) invalid
Message-ID: <SY4PR01MB5658A1122354FF9D75FF594BACC79@SY4PR01MB5658.ausprd01.prod.outlook.com>

A CRAN reviewer requested I add a reference to the Description field, suggesting the format <doi:...>. This results in checks reporting "Found the following (possibly) invalid DOIs:... Service unavailable". I can't see anything wrong with <doi:10.1111/j.0030-1299.2004.13043.x> (see also https://github.com/MurrayEfford/ipsecr).

I dimly remember some recent discussion on this, but cannot now find it. Thanks for any help.



From kry|ov@r00t @end|ng |rom gm@||@com  Sun May  8 13:29:28 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sun, 8 May 2022 14:29:28 +0300
Subject: [R-pkg-devel] DOI in Description (possibly) invalid
In-Reply-To: <SY4PR01MB5658A1122354FF9D75FF594BACC79@SY4PR01MB5658.ausprd01.prod.outlook.com>
References: <SY4PR01MB5658A1122354FF9D75FF594BACC79@SY4PR01MB5658.ausprd01.prod.outlook.com>
Message-ID: <20220508142928.2b4f103c@trisector>

On Sun, 8 May 2022 08:01:16 +0000
Murray Efford <murray.efford at otago.ac.nz> wrote:

> This results in checks reporting "Found the following (possibly)
> invalid DOIs:... Service unavailable".

This happens because there's Cloudflare sitting between the world and
Wiley Online Library, and Cloudflare replies with the HTTP error code
503 to requests it doesn't like. When checking DOIs for validity, R CMD
check doesn't bother pretending to be a human operating a browser (it's
hard and keeps getting harder), so Cloudflare classifies this request
as automated and possibly malicious and refuses to serve it. On the
other hand, when you follow the link manually with a browser,
Cloudflare knows you're a human because it's been keeping track of your
browsing patterns across other websites under Cloudflare protection,
and they match typical human behaviour, so you get the content.

It's a known problem. For now, you just have to mention it in the
submission comment.

There has been a suggestion to change the DOI check so that it would
stop after one request to the https://doi.org/ server (which doesn't
discriminate against such automated requests for now) and doesn't try
to follow the link returned by doi.org (which might). Perhaps it would
get implemented when this problem gets worse.

-- 
Best regards,
Ivan


From |uc@r @end|ng |rom |edor@project@org  Sun May  8 17:55:32 2022
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Sun, 8 May 2022 17:55:32 +0200
Subject: [R-pkg-devel] Searching examples in source code
In-Reply-To: <a068ddb6-fee1-76ac-c180-c02f51effa7f@Be-Logical.nl>
References: <a068ddb6-fee1-76ac-c180-c02f51effa7f@Be-Logical.nl>
Message-ID: <CALEXWq0S=d3BXUAZCfcgbuh8SjCnyyk7QAzRuw0skGpKvbTCpQ@mail.gmail.com>

On Sat, 7 May 2022 at 23:25, Ben Engbers <Ben.Engbers at be-logical.nl> wrote:
>
> Hi,
>
> My package (RBaseX) is written entirely in R. The performance is not bad
> but to further improve the performance I want to investigate to what
> extent use of C++ makes sense. Problem is that I have little experience
> with C++ and none with Rcpp. So I am looking for examples.

The Rcpp Gallery is a good place to start: https://gallery.rcpp.org/

> On my (linux) system I installed several packages that needed to be
> compiled. So it is likely that I already have examples on my system.
>
> My first question is if there is a useful linux command to search all
> the source code of installed packages on my system.

Not sure what you mean here. The source code is not copied along with
your installed packages.

> The second question is if there is a command to search all packages at
> https://cran.r-project.org/web/packages/available_packages_by_name.html?
>
> This question is not only relevant to C++ examples. It would also be
> nice if you could search for occurrences of commands in R code.

There's a read-only mirror of CRAN on GitHub
(https://github.com/cran). Going there and using the search form
(i.e., specifying "org:cran <your_search_here>") is probably the best
bet to find what you're looking for.

I?aki

>
> Ben
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
I?aki ?car


From ben@engber@ @end|ng |rom gm@||@com  Sun May  8 21:02:18 2022
From: ben@engber@ @end|ng |rom gm@||@com (Ben Engbers)
Date: Sun, 8 May 2022 21:02:18 +0200
Subject: [R-pkg-devel] Searching examples in source code
In-Reply-To: <CALEXWq0S=d3BXUAZCfcgbuh8SjCnyyk7QAzRuw0skGpKvbTCpQ@mail.gmail.com>
References: <a068ddb6-fee1-76ac-c180-c02f51effa7f@Be-Logical.nl>
 <CALEXWq0S=d3BXUAZCfcgbuh8SjCnyyk7QAzRuw0skGpKvbTCpQ@mail.gmail.com>
Message-ID: <91b5c0af-bb3b-f111-8979-731d45e2a54a@Be-Logical.nl>



Op 08-05-2022 om 17:55 schreef I?aki Ucar:
> On Sat, 7 May 2022 at 23:25, Ben Engbers <Ben.Engbers at be-logical.nl> wrote:
>>
>> Hi,

>> My first question is if there is a useful linux command to search all
>> the source code of installed packages on my system.
> 
> Not sure what you mean here. The source code is not copied along with
> your installed packages.

Uh? I didn't know that. How does the compile process work? Does this 
mean that the (C or C++) sources only live in the repository and that 
the compile command accesses those files?

>> The second question is if there is a command to search all packages at
>> https://cran.r-project.org/web/packages/available_packages_by_name.html?
>>
>> This question is not only relevant to C++ examples. It would also be
>> nice if you could search for occurrences of commands in R code.
> 
> There's a read-only mirror of CRAN on GitHub
> (https://github.com/cran). Going there and using the search form
> (i.e., specifying "org:cran <your_search_here>") is probably the best
> bet to find what you're looking for.

If I go to that site and enter "org:cran asio" in  the search field, I 
am directed to https://github.com/cran/AsioHeaders. That's not what I am 
looking for; I am looking for C sources which make use of org:cran asio.

A R-example would be that I was looking for packages which make use of 
the "socketConnection" function. Entering socketConnection in the search 
form results in "We couldn?t find any repositories matching 'org:cran 
socketConnection'". This doesn't help me...

Ben
> 
> I?aki

From |uc@r @end|ng |rom |edor@project@org  Sun May  8 21:14:13 2022
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Sun, 8 May 2022 21:14:13 +0200
Subject: [R-pkg-devel] Searching examples in source code
In-Reply-To: <91b5c0af-bb3b-f111-8979-731d45e2a54a@Be-Logical.nl>
References: <a068ddb6-fee1-76ac-c180-c02f51effa7f@Be-Logical.nl>
 <CALEXWq0S=d3BXUAZCfcgbuh8SjCnyyk7QAzRuw0skGpKvbTCpQ@mail.gmail.com>
 <91b5c0af-bb3b-f111-8979-731d45e2a54a@Be-Logical.nl>
Message-ID: <CALEXWq3rwSzmkghfjuzciu4bwmch3Pg8W8RwNGjTAg1iO_pn0A@mail.gmail.com>

El dom., 8 may. 2022 21:03, Ben Engbers <ben.engbers at gmail.com> escribi?:

>
>
> Op 08-05-2022 om 17:55 schreef I?aki Ucar:
> > On Sat, 7 May 2022 at 23:25, Ben Engbers <Ben.Engbers at be-logical.nl>
> wrote:
> >>
> >> Hi,
>
> >> My first question is if there is a useful linux command to search all
> >> the source code of installed packages on my system.
> >
> > Not sure what you mean here. The source code is not copied along with
> > your installed packages.
>
> Uh? I didn't know that. How does the compile process work? Does this
> mean that the (C or C++) sources only live in the repository and that
> the compile command accesses those files?
>

The installer downloads the source code, compiles it, and installs the
resulting binary. The source code is not needed anymore.


> >> The second question is if there is a command to search all packages at
> >> https://cran.r-project.org/web/packages/available_packages_by_name.html
> ?
> >>
> >> This question is not only relevant to C++ examples. It would also be
> >> nice if you could search for occurrences of commands in R code.
> >
> > There's a read-only mirror of CRAN on GitHub
> > (https://github.com/cran). Going there and using the search form
> > (i.e., specifying "org:cran <your_search_here>") is probably the best
> > bet to find what you're looking for.
>
> If I go to that site and enter "org:cran asio" in  the search field, I
> am directed to https://github.com/cran/AsioHeaders. That's not what I am
> looking for; I am looking for C sources which make use of org:cran asio.
>
> A R-example would be that I was looking for packages which make use of
> the "socketConnection" function. Entering socketConnection in the search
> form results in "We couldn?t find any repositories matching 'org:cran
> socketConnection'". This doesn't help me...
>

Left menu, after you search for something. You have "code" there.

I?aki



> Ben
> >
> > I?aki
>

	[[alternative HTML version deleted]]


From jo@h@m@u|r|ch @end|ng |rom gm@||@com  Sun May  8 21:15:57 2022
From: jo@h@m@u|r|ch @end|ng |rom gm@||@com (Joshua Ulrich)
Date: Sun, 8 May 2022 14:15:57 -0500
Subject: [R-pkg-devel] Searching examples in source code
In-Reply-To: <a068ddb6-fee1-76ac-c180-c02f51effa7f@Be-Logical.nl>
References: <a068ddb6-fee1-76ac-c180-c02f51effa7f@Be-Logical.nl>
Message-ID: <CAPPM_gTQYDofak+exPuVa-MK2xmy+6cPfv3re+Qoa_jgChPG+g@mail.gmail.com>

Hi Ben,

On Sat, May 7, 2022 at 4:24 PM Ben Engbers <Ben.Engbers at be-logical.nl> wrote:
>
> Hi,
>
> My package (RBaseX) is written entirely in R. The performance is not bad
> but to further improve the performance I want to investigate to what
> extent use of C++ makes sense. Problem is that I have little experience
> with C++ and none with Rcpp. So I am looking for examples.
> On my (linux) system I installed several packages that needed to be
> compiled. So it is likely that I already have examples on my system.
>
I strongly recommend you profile your code to determine where there
are performance bottlenecks before writing any new code. Especially
before adding compiled code to your package.

The infamous Knuth quote:
"We should forget about small efficiencies, say about 97% of the time:
premature optimization is the root of all evil. Yet we should not pass
up our opportunities in that critical 3%. A good programmer will not
be lulled into complacency by such reasoning, he will be wise to look
carefully at the critical code; but only after that code has been
identified."

Best,
Josh

> My first question is if there is a useful linux command to search all
> the source code of installed packages on my system.
> The second question is if there is a command to search all packages at
> https://cran.r-project.org/web/packages/available_packages_by_name.html?
>
> This question is not only relevant to C++ examples. It would also be
> nice if you could search for occurrences of commands in R code.
>
> Ben
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From bbo|ker @end|ng |rom gm@||@com  Sun May  8 21:21:05 2022
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sun, 8 May 2022 15:21:05 -0400
Subject: [R-pkg-devel] Searching examples in source code
In-Reply-To: <91b5c0af-bb3b-f111-8979-731d45e2a54a@Be-Logical.nl>
References: <a068ddb6-fee1-76ac-c180-c02f51effa7f@Be-Logical.nl>
 <CALEXWq0S=d3BXUAZCfcgbuh8SjCnyyk7QAzRuw0skGpKvbTCpQ@mail.gmail.com>
 <91b5c0af-bb3b-f111-8979-731d45e2a54a@Be-Logical.nl>
Message-ID: <334b0a13-b476-c72a-fc76-ff315b4a9faf@gmail.com>

   Whenever you install a package from source you'll see a line at the 
end of the output something like

 > The downloaded source packages are in
	?/tmp/Rtmp6ZRMH0/downloaded_packages?


That is, the source tarball is downloaded to a *temporary file* (on most 
Linux systems, the /tmp directory is cleared when rebooting).

   You could do something like this (untested!)

i1 <- installed.packages()
for (i in seq(nrow(i1)) {
   m <- i1[i,]
 
download.file(sprintf("https://cran.r-project.org/src/contrib/"%s%s.tar.gz", 
m$Package, m$Version), dest = "tmp.tgz")
   system("tar zxvf tmp.tgz")
}

and then

find . -name "*.c*" -exec grep -iH foo {} \;

or

find . -name "*.R" -exec grep -iH foo {} \;

  would work.


On 2022-05-08 3:02 p.m., Ben Engbers wrote:
> 
> 
> Op 08-05-2022 om 17:55 schreef I?aki Ucar:
>> On Sat, 7 May 2022 at 23:25, Ben Engbers <Ben.Engbers at be-logical.nl> 
>> wrote:
>>>
>>> Hi,
> 
>>> My first question is if there is a useful linux command to search all
>>> the source code of installed packages on my system.
>>
>> Not sure what you mean here. The source code is not copied along with
>> your installed packages.
> 
> Uh? I didn't know that. How does the compile process work? Does this 
> mean that the (C or C++) sources only live in the repository and that 
> the compile command accesses those files?
> 
>>> The second question is if there is a command to search all packages at
>>> https://cran.r-project.org/web/packages/available_packages_by_name.html?
>>>
>>> This question is not only relevant to C++ examples. It would also be
>>> nice if you could search for occurrences of commands in R code.
>>
>> There's a read-only mirror of CRAN on GitHub
>> (https://github.com/cran). Going there and using the search form
>> (i.e., specifying "org:cran <your_search_here>") is probably the best
>> bet to find what you're looking for.
> 
> If I go to that site and enter "org:cran asio" in? the search field, I 
> am directed to https://github.com/cran/AsioHeaders. That's not what I am 
> looking for; I am looking for C sources which make use of org:cran asio.
> 
> A R-example would be that I was looking for packages which make use of 
> the "socketConnection" function. Entering socketConnection in the search 
> form results in "We couldn?t find any repositories matching 'org:cran 
> socketConnection'". This doesn't help me...
> 
> Ben
>>
>> I?aki
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Director, School of Computational Science and Engineering
(Acting) Graduate chair, Mathematics & Statistics


From murr@y@e||ord @end|ng |rom ot@go@@c@nz  Sun May  8 21:27:19 2022
From: murr@y@e||ord @end|ng |rom ot@go@@c@nz (Murray Efford)
Date: Sun, 8 May 2022 19:27:19 +0000
Subject: [R-pkg-devel] DOI in Description (possibly) invalid
In-Reply-To: <20220508142928.2b4f103c@trisector>
References: <SY4PR01MB5658A1122354FF9D75FF594BACC79@SY4PR01MB5658.ausprd01.prod.outlook.com>
 <20220508142928.2b4f103c@trisector>
Message-ID: <SY4PR01MB5658E91890AFC2D18895EE60ACC79@SY4PR01MB5658.ausprd01.prod.outlook.com>

Ivan
Thanks for your detailed explanation that I'm sure will be useful to others as well. We can hope unnecessary obstacles like this become rarer; the reverse seems true.
Murray

________________________________________
From: Ivan Krylov <krylov.r00t at gmail.com>
Sent: 08 May 2022 23:29
To: Murray Efford
Cc: R-package-devel at r-project.org
Subject: Re: [R-pkg-devel] DOI in Description (possibly) invalid

On Sun, 8 May 2022 08:01:16 +0000
Murray Efford <murray.efford at otago.ac.nz> wrote:

> This results in checks reporting "Found the following (possibly)
> invalid DOIs:... Service unavailable".

This happens because there's Cloudflare sitting between the world and
Wiley Online Library, and Cloudflare replies with the HTTP error code
503 to requests it doesn't like. When checking DOIs for validity, R CMD
check doesn't bother pretending to be a human operating a browser (it's
hard and keeps getting harder), so Cloudflare classifies this request
as automated and possibly malicious and refuses to serve it. On the
other hand, when you follow the link manually with a browser,
Cloudflare knows you're a human because it's been keeping track of your
browsing patterns across other websites under Cloudflare protection,
and they match typical human behaviour, so you get the content.

It's a known problem. For now, you just have to mention it in the
submission comment.

There has been a suggestion to change the DOI check so that it would
stop after one request to the https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fdoi.org%2F&amp;data=05%7C01%7Cmurray.efford%40otago.ac.nz%7C1e9f974f75ef4c6c952908da30e60702%7C0225efc578fe4928b1579ef24809e9ba%7C0%7C0%7C637876061769983877%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=2Y3FHbOqe0Hdz620FcT3oXmg5zBHHf7fZxJLgyu3XjE%3D&amp;reserved=0 server (which doesn't
discriminate against such automated requests for now) and doesn't try
to follow the link returned by doi.org (which might). Perhaps it would
get implemented when this problem gets worse.

--
Best regards,
Ivan


From bbo|ker @end|ng |rom gm@||@com  Sun May  8 21:43:39 2022
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sun, 8 May 2022 15:43:39 -0400
Subject: [R-pkg-devel] DOI in Description (possibly) invalid
In-Reply-To: <20220508142928.2b4f103c@trisector>
References: <SY4PR01MB5658A1122354FF9D75FF594BACC79@SY4PR01MB5658.ausprd01.prod.outlook.com>
 <20220508142928.2b4f103c@trisector>
Message-ID: <b2bfdc52-74bb-1211-b2fe-ec9dee22f7e3@gmail.com>

   I wonder if it would be possible for CRAN to use a DNS caching proxy 
(something like Squid) for DOI requests? It seems like that solve most 
of the problems (requests would only happen when a brand-new DOI was 
encountered, most requests would be for DOIs that had been looked up 
previously ...)

On 2022-05-08 7:29 a.m., Ivan Krylov wrote:
> On Sun, 8 May 2022 08:01:16 +0000
> Murray Efford <murray.efford at otago.ac.nz> wrote:
> 
>> This results in checks reporting "Found the following (possibly)
>> invalid DOIs:... Service unavailable".
> 
> This happens because there's Cloudflare sitting between the world and
> Wiley Online Library, and Cloudflare replies with the HTTP error code
> 503 to requests it doesn't like. When checking DOIs for validity, R CMD
> check doesn't bother pretending to be a human operating a browser (it's
> hard and keeps getting harder), so Cloudflare classifies this request
> as automated and possibly malicious and refuses to serve it. On the
> other hand, when you follow the link manually with a browser,
> Cloudflare knows you're a human because it's been keeping track of your
> browsing patterns across other websites under Cloudflare protection,
> and they match typical human behaviour, so you get the content.
> 
> It's a known problem. For now, you just have to mention it in the
> submission comment.
> 
> There has been a suggestion to change the DOI check so that it would
> stop after one request to the https://doi.org/ server (which doesn't
> discriminate against such automated requests for now) and doesn't try
> to follow the link returned by doi.org (which might). Perhaps it would
> get implemented when this problem gets worse.
> 

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Director, School of Computational Science and Engineering
(Acting) Graduate chair, Mathematics & Statistics


From ben@engber@ @end|ng |rom gm@||@com  Sun May  8 21:52:41 2022
From: ben@engber@ @end|ng |rom gm@||@com (Ben Engbers)
Date: Sun, 8 May 2022 21:52:41 +0200
Subject: [R-pkg-devel] Searching examples in source code
In-Reply-To: <CAPPM_gTQYDofak+exPuVa-MK2xmy+6cPfv3re+Qoa_jgChPG+g@mail.gmail.com>
References: <a068ddb6-fee1-76ac-c180-c02f51effa7f@Be-Logical.nl>
 <CAPPM_gTQYDofak+exPuVa-MK2xmy+6cPfv3re+Qoa_jgChPG+g@mail.gmail.com>
Message-ID: <9f7ca0f6-4c76-94f5-9753-85709037aea2@Be-Logical.nl>



Op 08-05-2022 om 21:15 schreef Joshua Ulrich:
> Hi Ben,
> 
> On Sat, May 7, 2022 at 4:24 PM Ben Engbers <Ben.Engbers at be-logical.nl> wrote:
>>
>> Hi,
>>

> I strongly recommend you profile your code to determine where there
> are performance bottlenecks before writing any new code. Especially
> before adding compiled code to your package.
> 
> The infamous Knuth quote:
> "We should forget about small efficiencies, say about 97% of the time:
> premature optimization is the root of all evil. Yet we should not pass
> up our opportunities in that critical 3%. A good programmer will not
> be lulled into complacency by such reasoning, he will be wise to look
> carefully at the critical code; but only after that code has been
> identified."

This reminds me of Occams's razor ;-) If you have the choice between 
good working simple code or more complex code which might perform 
slightly better, the simple code is to be preferred.

I don't remember if it was because the package is based on R6 object 
orientation or if it was because the client is based on a client-server 
architecture. I do know that profiling did not add much information.

And a quick search for "R R6 profiling" shows that R6 applications 
cannot yet be examined using a profiler ;-(.

Ben


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun May  8 22:29:10 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 8 May 2022 16:29:10 -0400
Subject: [R-pkg-devel] Searching examples in source code
In-Reply-To: <9f7ca0f6-4c76-94f5-9753-85709037aea2@Be-Logical.nl>
References: <a068ddb6-fee1-76ac-c180-c02f51effa7f@Be-Logical.nl>
 <CAPPM_gTQYDofak+exPuVa-MK2xmy+6cPfv3re+Qoa_jgChPG+g@mail.gmail.com>
 <9f7ca0f6-4c76-94f5-9753-85709037aea2@Be-Logical.nl>
Message-ID: <ece592ab-105a-49d7-80b0-076226f20057@gmail.com>

On 08/05/2022 3:52 p.m., Ben Engbers wrote:
> 
> 
> Op 08-05-2022 om 21:15 schreef Joshua Ulrich:
>> Hi Ben,
>>
>> On Sat, May 7, 2022 at 4:24 PM Ben Engbers <Ben.Engbers at be-logical.nl> wrote:
>>>
>>> Hi,
>>>
> 
>> I strongly recommend you profile your code to determine where there
>> are performance bottlenecks before writing any new code. Especially
>> before adding compiled code to your package.
>>
>> The infamous Knuth quote:
>> "We should forget about small efficiencies, say about 97% of the time:
>> premature optimization is the root of all evil. Yet we should not pass
>> up our opportunities in that critical 3%. A good programmer will not
>> be lulled into complacency by such reasoning, he will be wise to look
>> carefully at the critical code; but only after that code has been
>> identified."
> 
> This reminds me of Occams's razor ;-) If you have the choice between
> good working simple code or more complex code which might perform
> slightly better, the simple code is to be preferred.
> 
> I don't remember if it was because the package is based on R6 object
> orientation or if it was because the client is based on a client-server
> architecture. I do know that profiling did not add much information.
> 
> And a quick search for "R R6 profiling" shows that R6 applications
> cannot yet be examined using a profiler ;-(.

I think that isn't completely true.  One link I read said that by 
default the profiler code doesn't know function names, but it should 
still know line numbers if you kept them in your source and set 
`line.profiling` to TRUE when you run Rprof().  Setting that to TRUE 
makes the profiling output contain much more information.

I don't have a good example to demonstrate this, and I don't know if 
RStudio's post-processing of profiler output knows how to interpret this 
extra information, but the base summaryRprof() will show it if you ask 
for it, and a bad example I ran that isn't easily sharable shows that it 
does display line numbers in R6 source.


Duncan Murdoch


From ben@engber@ @end|ng |rom gm@||@com  Sun May  8 23:27:38 2022
From: ben@engber@ @end|ng |rom gm@||@com (Ben Engbers)
Date: Sun, 8 May 2022 23:27:38 +0200
Subject: [R-pkg-devel] Searching examples in source code
In-Reply-To: <ece592ab-105a-49d7-80b0-076226f20057@gmail.com>
References: <a068ddb6-fee1-76ac-c180-c02f51effa7f@Be-Logical.nl>
 <CAPPM_gTQYDofak+exPuVa-MK2xmy+6cPfv3re+Qoa_jgChPG+g@mail.gmail.com>
 <9f7ca0f6-4c76-94f5-9753-85709037aea2@Be-Logical.nl>
 <ece592ab-105a-49d7-80b0-076226f20057@gmail.com>
Message-ID: <27226416-f986-7854-031a-c5c8fd6b7f4d@Be-Logical.nl>



Op 08-05-2022 om 22:29 schreef Duncan Murdoch:
> On 08/05/2022 3:52 p.m., Ben Engbers wrote:
>>
>>
>> Op 08-05-2022 om 21:15 schreef Joshua Ulrich:
>>> Hi Ben,
>>>
>>> On Sat, May 7, 2022 at 4:24 PM Ben Engbers 
>>> <Ben.Engbers at be-logical.nl> wrote:
>>>>
>>>> Hi,
>>>>

>> I don't remember if it was because the package is based on R6 object
>> orientation or if it was because the client is based on a client-server
>> architecture. I do know that profiling did not add much information.
>>
>> And a quick search for "R R6 profiling" shows that R6 applications
>> cannot yet be examined using a profiler ;-(.
> 
> I think that isn't completely true.? One link I read said that by 
> default the profiler code doesn't know function names, but it should 
> still know line numbers if you kept them in your source and set 
> `line.profiling` to TRUE when you run Rprof().? Setting that to TRUE 
> makes the profiling output contain much more information.
> 
> I don't have a good example to demonstrate this, and I don't know if 
> RStudio's post-processing of profiler output knows how to interpret this 
> extra information, but the base summaryRprof() will show it if you ask 
> for it, and a bad example I ran that isn't easily sharable shows that it 
> does display line numbers in R6 source.

It will take a few days but I'll check in how far this is usefull.

Ben

From greg @end|ng |rom ||rm@n@y@h@com  Sun May  8 23:31:11 2022
From: greg @end|ng |rom ||rm@n@y@h@com (Greg Hunt)
Date: Mon, 9 May 2022 07:31:11 +1000
Subject: [R-pkg-devel] Searching examples in source code
In-Reply-To: <CAPPM_gTQYDofak+exPuVa-MK2xmy+6cPfv3re+Qoa_jgChPG+g@mail.gmail.com>
References: <a068ddb6-fee1-76ac-c180-c02f51effa7f@Be-Logical.nl>
 <CAPPM_gTQYDofak+exPuVa-MK2xmy+6cPfv3re+Qoa_jgChPG+g@mail.gmail.com>
Message-ID: <CAAS8PAJEoY0P=L2u0qsoFpQGoxZzNdMf_xJ_ewQOQ07oiSDstQ@mail.gmail.com>

Indeed, and since this is a database client, the question is not just the
elapsed time of the client code, but the optimisation opportunities need to
be viewed as a proportion of the overall request time: client time, network
time, typical and minimum database server time.

On Mon, 9 May 2022 at 05:24, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:

> Hi Ben,
>
> On Sat, May 7, 2022 at 4:24 PM Ben Engbers <Ben.Engbers at be-logical.nl>
> wrote:
> >
> > Hi,
> >
> > My package (RBaseX) is written entirely in R. The performance is not bad
> > but to further improve the performance I want to investigate to what
> > extent use of C++ makes sense. Problem is that I have little experience
> > with C++ and none with Rcpp. So I am looking for examples.
> > On my (linux) system I installed several packages that needed to be
> > compiled. So it is likely that I already have examples on my system.
> >
> I strongly recommend you profile your code to determine where there
> are performance bottlenecks before writing any new code. Especially
> before adding compiled code to your package.
>
> The infamous Knuth quote:
> "We should forget about small efficiencies, say about 97% of the time:
> premature optimization is the root of all evil. Yet we should not pass
> up our opportunities in that critical 3%. A good programmer will not
> be lulled into complacency by such reasoning, he will be wise to look
> carefully at the critical code; but only after that code has been
> identified."
>
> Best,
> Josh
>
> > My first question is if there is a useful linux command to search all
> > the source code of installed packages on my system.
> > The second question is if there is a command to search all packages at
> > https://cran.r-project.org/web/packages/available_packages_by_name.html?
> >
> > This question is not only relevant to C++ examples. It would also be
> > nice if you could search for occurrences of commands in R code.
> >
> > Ben
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>
> --
> Joshua Ulrich  |  about.me/joshuaulrich
> FOSS Trading  |  www.fosstrading.com
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @|mon@urb@nek @end|ng |rom R-project@org  Mon May  9 00:13:11 2022
From: @|mon@urb@nek @end|ng |rom R-project@org (Simon Urbanek)
Date: Mon, 9 May 2022 10:13:11 +1200
Subject: [R-pkg-devel] nit-picking about CRAN repository policy
In-Reply-To: <1d04b066-4d72-16ae-6758-e8d5c81cb133@gmail.com>
References: <1d04b066-4d72-16ae-6758-e8d5c81cb133@gmail.com>
Message-ID: <C8334AC3-CD92-42EC-805A-FD84A6B50908@R-project.org>

Ben,

I fully agree with Dirk - it would be good to make the CRP more clear.

The main problem with failing to the check conditional dependencies is in cases where there are circular dependencies: package A suggests B, and package B requires A. The correct resolution is to check A without B, then check B with A and then check A with B (that's what the macOS CRAN build system is doing). If A fails to check without B, the whole chain is doomed and none of the package will be available.

So at the very least the examples and tests should be clearly conditional. Currently, the vignettes also required since there is no specific check with --no-build-vignettes.

As for your package, the fact that it worked so far is due to the incremental nature of the builds: if your dependency is not circular then the build system will schedule dependencies for check before your package which is possible in that case, so the package is actually never checked without the suggests. In the macOS case we have no choice, because there are so many packages to build that checking every suggests-dependency twice would take too long. So from practical point of view, the suggests-must-be-conditional rule has been checked only for packages with circular dependencies since that is where it matters the most. However, the circular nature is not a function of the package itself, so it could make sense to make it global, since you don't know if the package you suggest may ever depend on your package and suddenly break your package that way. This is just my pragmatic view, I don't know any specific details on the noSuggests checks per se.

Cheers,
Simon



> On 8/05/2022, at 10:43 AM, Ben Bolker <bbolker at gmail.com> wrote:
> 
> 
>  Folks,
> 
>  CRAN has recently set up an auxiliary 'noSuggests' test platform that tests that packages are using suggested packages conditionally, as recommended in Writing R Extensions, and as (sort of) specified in the CRAN repository policy.
> 
>  Specifically, the CRP (revision 5236) says:
> 
> > A package listed in ?Suggests? or ?Enhances? should be used conditionally in examples or tests if it cannot straightforwardly be installed on the major R platforms. (?Writing R Extensions? recommends that they are always used conditionally.)
> 
>  One of my packages failed on the 'noSuggest' test platform <https://www.stats.ox.ac.uk/pub/bdr/noSuggests/bbmle.out> because two suggested packages were used unconditionally in the vignette. There are two reasons (IMO) that this should *not* have triggered a threat of archiving:
> 
>  (1) the unconditional package use was in a vignette, not in examples or tests
>  (2) the relevant packages (AICcmodavg and MuMIn) are available on CRAN and install easily on Linux/Windows/MacOS (they are R-only, no compiled code or extra requirements, binaries are available on CRAN).
> 
>   Is it worth suggesting to CRAN maintainers that either they refine their 'noSuggests' test so that it conforms to the wording in the CRP, or that they change the CRP wording to something stricter like
> 
> > Any package listed in ?Suggests? or ?Enhances? should be used conditionally in examples, tests, and vignettes.
> 
> ?
> 
>  cheers
>    Ben Bolker
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From bbo|ker @end|ng |rom gm@||@com  Mon May  9 00:39:58 2022
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sun, 8 May 2022 18:39:58 -0400
Subject: [R-pkg-devel] nit-picking about CRAN repository policy
In-Reply-To: <25206.63668.47319.880585@rob.eddelbuettel.com>
References: <1d04b066-4d72-16ae-6758-e8d5c81cb133@gmail.com>
 <25206.63668.47319.880585@rob.eddelbuettel.com>
Message-ID: <360b3e67-172d-c069-171e-344f8d294fe7@gmail.com>



On 2022-05-07 6:54 p.m., Dirk Eddelbuettel wrote:
> 
> While I of course do not speak for CRAN, allow me (given I've harped on this
> beat before [1]) to record a strong disagreement here: "unconditionally used"
> is simply not reflecting the conditional nature of a Suggests, nomatter where
> it happens in the package.  Vignettes are no different from examples.
> 
> So I say thanks to CRAN for having gradually sharpened the language in the
> CRAN Repo Policu over the years and for now adding even more explicit tests.
> 
> Dirk
> 
> [1] One such post is "Suggests != Depends which is at
> https://dirk.eddelbuettel.com/blog/2017/03/22/#suggests_is_not_depends
> 

   Dirk and Simon: to be clear, I'm not objecting to the new tests, just 
to the fact that they don't match the published repository policy.

(and conditioned on a mildly annoying CRAN interaction as described 
elsewhere in the thread 
<https://stat.ethz.ch/pipermail/r-package-devel/2022q2/008040.html>).

   cheers
    Ben


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon May  9 08:54:25 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 9 May 2022 08:54:25 +0200
Subject: [R-pkg-devel] Searching examples in source code
In-Reply-To: <334b0a13-b476-c72a-fc76-ff315b4a9faf@gmail.com>
References: <a068ddb6-fee1-76ac-c180-c02f51effa7f@Be-Logical.nl>
 <CALEXWq0S=d3BXUAZCfcgbuh8SjCnyyk7QAzRuw0skGpKvbTCpQ@mail.gmail.com>
 <91b5c0af-bb3b-f111-8979-731d45e2a54a@Be-Logical.nl>
 <334b0a13-b476-c72a-fc76-ff315b4a9faf@gmail.com>
Message-ID: <f0085c07-e6c3-702c-5247-f658dc3bbbf9@statistik.tu-dortmund.de>

... or simply download.packages("pkg", type="source")

Best,
Uwe Ligges

On 08.05.2022 21:21, Ben Bolker wrote:
>  ? Whenever you install a package from source you'll see a line at the 
> end of the output something like
> 
>  > The downloaded source packages are in
>  ?????/tmp/Rtmp6ZRMH0/downloaded_packages?
> 
> 
> That is, the source tarball is downloaded to a *temporary file* (on most 
> Linux systems, the /tmp directory is cleared when rebooting).
> 
>  ? You could do something like this (untested!)
> 
> i1 <- installed.packages()
> for (i in seq(nrow(i1)) {
>  ? m <- i1[i,]
> 
> download.file(sprintf("https://cran.r-project.org/src/contrib/"%s%s.tar.gz", 
> m$Package, m$Version), dest = "tmp.tgz")
>  ? system("tar zxvf tmp.tgz")
> }
> 
> and then
> 
> find . -name "*.c*" -exec grep -iH foo {} \;
> 
> or
> 
> find . -name "*.R" -exec grep -iH foo {} \;
> 
>  ?would work.
> 
> 
> On 2022-05-08 3:02 p.m., Ben Engbers wrote:
>>
>>
>> Op 08-05-2022 om 17:55 schreef I?aki Ucar:
>>> On Sat, 7 May 2022 at 23:25, Ben Engbers <Ben.Engbers at be-logical.nl> 
>>> wrote:
>>>>
>>>> Hi,
>>
>>>> My first question is if there is a useful linux command to search all
>>>> the source code of installed packages on my system.
>>>
>>> Not sure what you mean here. The source code is not copied along with
>>> your installed packages.
>>
>> Uh? I didn't know that. How does the compile process work? Does this 
>> mean that the (C or C++) sources only live in the repository and that 
>> the compile command accesses those files?
>>
>>>> The second question is if there is a command to search all packages at
>>>> https://cran.r-project.org/web/packages/available_packages_by_name.html? 
>>>>
>>>>
>>>> This question is not only relevant to C++ examples. It would also be
>>>> nice if you could search for occurrences of commands in R code.
>>>
>>> There's a read-only mirror of CRAN on GitHub
>>> (https://github.com/cran). Going there and using the search form
>>> (i.e., specifying "org:cran <your_search_here>") is probably the best
>>> bet to find what you're looking for.
>>
>> If I go to that site and enter "org:cran asio" in? the search field, I 
>> am directed to https://github.com/cran/AsioHeaders. That's not what I 
>> am looking for; I am looking for C sources which make use of org:cran 
>> asio.
>>
>> A R-example would be that I was looking for packages which make use of 
>> the "socketConnection" function. Entering socketConnection in the 
>> search form results in "We couldn?t find any repositories matching 
>> 'org:cran socketConnection'". This doesn't help me...
>>
>> Ben
>>>
>>> I?aki
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ben@engber@ @end|ng |rom gm@||@com  Mon May  9 10:17:08 2022
From: ben@engber@ @end|ng |rom gm@||@com (Ben Engbers)
Date: Mon, 9 May 2022 10:17:08 +0200
Subject: [R-pkg-devel] Searching examples in source code
In-Reply-To: <f0085c07-e6c3-702c-5247-f658dc3bbbf9@statistik.tu-dortmund.de>
References: <a068ddb6-fee1-76ac-c180-c02f51effa7f@Be-Logical.nl>
 <CALEXWq0S=d3BXUAZCfcgbuh8SjCnyyk7QAzRuw0skGpKvbTCpQ@mail.gmail.com>
 <91b5c0af-bb3b-f111-8979-731d45e2a54a@Be-Logical.nl>
 <334b0a13-b476-c72a-fc76-ff315b4a9faf@gmail.com>
 <f0085c07-e6c3-702c-5247-f658dc3bbbf9@statistik.tu-dortmund.de>
Message-ID: <cef70ec9-868f-25e1-79dc-f327fdcd4367@Be-Logical.nl>



Op 09-05-2022 om 08:54 schreef Uwe Ligges:
> ... or simply download.packages("pkg", type="source")
> 
> Best,
> Uwe Ligges

I have done that with some packages. But there is still the problem that 
I don't know in which packages the functionality I am looking for is 
used. And manually selecting candidates takes a lot of time...

Since my package is intended for use with an XML database, it would be a 
fun test to see if I could store the meta information for each package 
in that database. When I have time I will take a look at that.

Ben


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon May  9 11:22:30 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 9 May 2022 11:22:30 +0200
Subject: [R-pkg-devel] DOI in Description (possibly) invalid
In-Reply-To: <SY4PR01MB5658E91890AFC2D18895EE60ACC79@SY4PR01MB5658.ausprd01.prod.outlook.com>
References: <SY4PR01MB5658A1122354FF9D75FF594BACC79@SY4PR01MB5658.ausprd01.prod.outlook.com>
 <20220508142928.2b4f103c@trisector>
 <SY4PR01MB5658E91890AFC2D18895EE60ACC79@SY4PR01MB5658.ausprd01.prod.outlook.com>
Message-ID: <0fbb3c37-642e-51a5-3b03-aa19b53fddae@statistik.tu-dortmund.de>

CRAN always let packages pass that shows this issue.

Best,
Uwe Ligges



On 08.05.2022 21:27, Murray Efford wrote:
> Ivan
> Thanks for your detailed explanation that I'm sure will be useful to others as well. We can hope unnecessary obstacles like this become rarer; the reverse seems true.
> Murray
> 
> ________________________________________
> From: Ivan Krylov <krylov.r00t at gmail.com>
> Sent: 08 May 2022 23:29
> To: Murray Efford
> Cc: R-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] DOI in Description (possibly) invalid
> 
> On Sun, 8 May 2022 08:01:16 +0000
> Murray Efford <murray.efford at otago.ac.nz> wrote:
> 
>> This results in checks reporting "Found the following (possibly)
>> invalid DOIs:... Service unavailable".
> 
> This happens because there's Cloudflare sitting between the world and
> Wiley Online Library, and Cloudflare replies with the HTTP error code
> 503 to requests it doesn't like. When checking DOIs for validity, R CMD
> check doesn't bother pretending to be a human operating a browser (it's
> hard and keeps getting harder), so Cloudflare classifies this request
> as automated and possibly malicious and refuses to serve it. On the
> other hand, when you follow the link manually with a browser,
> Cloudflare knows you're a human because it's been keeping track of your
> browsing patterns across other websites under Cloudflare protection,
> and they match typical human behaviour, so you get the content.
> 
> It's a known problem. For now, you just have to mention it in the
> submission comment.
> 
> There has been a suggestion to change the DOI check so that it would
> stop after one request to the https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fdoi.org%2F&amp;data=05%7C01%7Cmurray.efford%40otago.ac.nz%7C1e9f974f75ef4c6c952908da30e60702%7C0225efc578fe4928b1579ef24809e9ba%7C0%7C0%7C637876061769983877%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=2Y3FHbOqe0Hdz620FcT3oXmg5zBHHf7fZxJLgyu3XjE%3D&amp;reserved=0 server (which doesn't
> discriminate against such automated requests for now) and doesn't try
> to follow the link returned by doi.org (which might). Perhaps it would
> get implemented when this problem gets worse.
> 
> --
> Best regards,
> Ivan
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon May  9 19:07:43 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 9 May 2022 13:07:43 -0400
Subject: [R-pkg-devel] vignette build failure on rhub macos-m1 platform
 (missing pandoc?)
In-Reply-To: <1938eefc-6efc-b508-6817-f1e8bad1e050@gmail.com>
References: <1938eefc-6efc-b508-6817-f1e8bad1e050@gmail.com>
Message-ID: <9ae7fbaf-e169-061b-d56a-0b8640ae389b@gmail.com>

On 29/03/2022 8:58 p.m., Ben Bolker wrote:
>       After a rather painful remote debugging process, I've figured out
> (I think) that the 'macos-m1-bigsur-release' platform on r-hub doesn't
> have pandoc, and doesn't have it in a way that breaks
> rmarkdown::pandoc_available(), so that trying to build an Rmarkdown
> vignette fails with a cryptic "subscript out of bounds" error.
> 
>     Is this something people have seen before?
>     Recommendations about whether it's better to raise it as an issue
> with (1) rmarkdown maintainers, (2) r-hub maintainers, or (3) both?

Hi Ben.

I'm seeing this now for rgl.  Did you find a resolution?

Duncan


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon May  9 21:10:07 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 9 May 2022 15:10:07 -0400
Subject: [R-pkg-devel] vignette build failure on rhub macos-m1 platform
 (missing pandoc?)
In-Reply-To: <9ae7fbaf-e169-061b-d56a-0b8640ae389b@gmail.com>
References: <1938eefc-6efc-b508-6817-f1e8bad1e050@gmail.com>
 <9ae7fbaf-e169-061b-d56a-0b8640ae389b@gmail.com>
Message-ID: <75500a9a-a4d3-a7d1-f874-ad650de5977d@gmail.com>

On 09/05/2022 1:07 p.m., Duncan Murdoch wrote:
> On 29/03/2022 8:58 p.m., Ben Bolker wrote:
>>        After a rather painful remote debugging process, I've figured out
>> (I think) that the 'macos-m1-bigsur-release' platform on r-hub doesn't
>> have pandoc, and doesn't have it in a way that breaks
>> rmarkdown::pandoc_available(), so that trying to build an Rmarkdown
>> vignette fails with a cryptic "subscript out of bounds" error.
>>
>>      Is this something people have seen before?
>>      Recommendations about whether it's better to raise it as an issue
>> with (1) rmarkdown maintainers, (2) r-hub maintainers, or (3) both?
> 
> Hi Ben.
> 
> I'm seeing this now for rgl.  Did you find a resolution?

I've localized the issue.  In the function 
rmarkdown:::get_pandoc_version (here: 
https://github.com/rstudio/rmarkdown/blob/84dfc6674083f355d4f8c87dca8d85f85ca53bad/R/pandoc.R#L676-L693), 
they think they know a path to pandoc, and run "pandoc --version" to get 
the version number.  It appears they get a zero length result, so line 
683 gets the subscript out of bounds error and everything dies.

To reproduce, create a test package which imports rmarkdown and has this 
single line of R code:

     available <- rmarkdown::pandoc_available()

then submit that package to rhub using

     rhub::check(platform="macos-m1-bigsur-release")

It will fail with a message like this:

  248#> * installing *source* package ?testpkg3? ...

  249#> ** using staged installation

  250#> ** R

  251#> ** byte-compile and prepare package for lazy loading

  252#> Error in strsplit(info, "\n")[[1]] : subscript out of bounds

  253#> Error: unable to load R code in package ?testpkg3?

  254#> Execution halted

  255#> ERROR: lazy loading failed for package ?testpkg3?

  256#> * removing 
?/Users/userDqIwNAjs/Rtemp/Rtmp6N8Dtr/Rinst146057d7e12c1/testpkg3?



I've attached such a package, but it is probably going to be stripped 
off when this is posted to R-package-devel.

Duncan Murdoch
-------------- next part --------------
A non-text attachment was scrubbed...
Name: testpkg3_0.0.0.9000.tar.gz
Type: application/x-gzip
Size: 4293 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20220509/5eb5483a/attachment.bin>

From bbo|ker @end|ng |rom gm@||@com  Mon May  9 21:16:33 2022
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Mon, 9 May 2022 15:16:33 -0400
Subject: [R-pkg-devel] vignette build failure on rhub macos-m1 platform
 (missing pandoc?)
In-Reply-To: <75500a9a-a4d3-a7d1-f874-ad650de5977d@gmail.com>
References: <1938eefc-6efc-b508-6817-f1e8bad1e050@gmail.com>
 <9ae7fbaf-e169-061b-d56a-0b8640ae389b@gmail.com>
 <75500a9a-a4d3-a7d1-f874-ad650de5977d@gmail.com>
Message-ID: <4f57031b-1df6-684b-89d6-4de22fc34a0b@gmail.com>


On 2022-05-09 3:10 p.m., Duncan Murdoch wrote:
> On 09/05/2022 1:07 p.m., Duncan Murdoch wrote:
>> On 29/03/2022 8:58 p.m., Ben Bolker wrote:
>>> ?????? After a rather painful remote debugging process, I've figured out
>>> (I think) that the 'macos-m1-bigsur-release' platform on r-hub doesn't
>>> have pandoc, and doesn't have it in a way that breaks
>>> rmarkdown::pandoc_available(), so that trying to build an Rmarkdown
>>> vignette fails with a cryptic "subscript out of bounds" error.
>>>
>>> ???? Is this something people have seen before?
>>> ???? Recommendations about whether it's better to raise it as an issue
>>> with (1) rmarkdown maintainers, (2) r-hub maintainers, or (3) both?
>>
>> Hi Ben.
>>
>> I'm seeing this now for rgl.? Did you find a resolution?
> 
> I've localized the issue.? In the function 
> rmarkdown:::get_pandoc_version (here: 
> https://github.com/rstudio/rmarkdown/blob/84dfc6674083f355d4f8c87dca8d85f85ca53bad/R/pandoc.R#L676-L693), 
> they think they know a path to pandoc, and run "pandoc --version" to get 
> the version number.? It appears they get a zero length result, so line 
> 683 gets the subscript out of bounds error and everything dies.
> 
> To reproduce, create a test package which imports rmarkdown and has this 
> single line of R code:
> 
>  ??? available <- rmarkdown::pandoc_available()
> 
> then submit that package to rhub using
> 
>  ??? rhub::check(platform="macos-m1-bigsur-release")
> 
> It will fail with a message like this:
> 
>  ?248#> * installing *source* package ?testpkg3? ...
> 
>  ?249#> ** using staged installation
> 
>  ?250#> ** R
> 
>  ?251#> ** byte-compile and prepare package for lazy loading
> 
>  ?252#> Error in strsplit(info, "\n")[[1]] : subscript out of bounds
> 
>  ?253#> Error: unable to load R code in package ?testpkg3?
> 
>  ?254#> Execution halted
> 
>  ?255#> ERROR: lazy loading failed for package ?testpkg3?
> 
>  ?256#> * removing 
> ?/Users/userDqIwNAjs/Rtemp/Rtmp6N8Dtr/Rinst146057d7e12c1/testpkg3?
> 
> 
> 
> I've attached such a package, but it is probably going to be stripped 
> off when this is posted to R-package-devel.
> 
> Duncan Murdoch

   I agree with the diagnosis. I never dug any deeper because some 
combination of (1) I decided I didn't really need to check the M1 build 
(I think the CRAN macbuilder is also on M1 now) and/or (2) I may have 
found it non-reproducible, i.e. the problem seemed to stop happening? 
TBH I don't remember.

   Ben Bolker


From @eb@meyer @end|ng |rom |@u@de  Tue May 10 00:57:57 2022
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Tue, 10 May 2022 00:57:57 +0200
Subject: [R-pkg-devel] nit-picking about CRAN repository policy
In-Reply-To: <C8334AC3-CD92-42EC-805A-FD84A6B50908@R-project.org>
References: <1d04b066-4d72-16ae-6758-e8d5c81cb133@gmail.com>
 <C8334AC3-CD92-42EC-805A-FD84A6B50908@R-project.org>
Message-ID: <bb916d73-6cc9-d7a4-49e0-88c3177add03@fau.de>

In my opinion, vignettes -- as opposed to examples and tests -- should 
be allowed to depend on suggested packages without having to 
conditionalize their use in the code (if they can straightforwardly be 
installed on the major R platforms). The vignette system is already 
prepared to handle \VignetteDepends metadata, which is checked to only 
list packages from the DESCRIPTION Depends/*Suggests*/Imports entries. R 
CMD check could skip vignette processing if the stated requirements are 
not fulfilled -- possibly with a note citing WRE that suggested packages 
are needed for a complete check, similar to the note that we'd already 
get from the "checking package dependencies" step: "Package suggested 
but not available for checking".

I think such a setup would highlight the importance of vignette 
reproducibility (whereas conditionalizing suggested packages would 
simply give OK without having executed all the code), but reduces the 
amount of failures on check servers when vignette dependencies become 
unavailable.

There is a related report in R's Bugzilla 
<https://bugs.r-project.org/show_bug.cgi?id=18318>.

Best regards,

	Sebastian Meyer


Am 09.05.22 um 00:13 schrieb Simon Urbanek:
> Ben,
> 
> I fully agree with Dirk - it would be good to make the CRP more clear.
> 
> The main problem with failing to the check conditional dependencies is in cases where there are circular dependencies: package A suggests B, and package B requires A. The correct resolution is to check A without B, then check B with A and then check A with B (that's what the macOS CRAN build system is doing). If A fails to check without B, the whole chain is doomed and none of the package will be available.
> 
> So at the very least the examples and tests should be clearly conditional. Currently, the vignettes also required since there is no specific check with --no-build-vignettes.
> 
> As for your package, the fact that it worked so far is due to the incremental nature of the builds: if your dependency is not circular then the build system will schedule dependencies for check before your package which is possible in that case, so the package is actually never checked without the suggests. In the macOS case we have no choice, because there are so many packages to build that checking every suggests-dependency twice would take too long. So from practical point of view, the suggests-must-be-conditional rule has been checked only for packages with circular dependencies since that is where it matters the most. However, the circular nature is not a function of the package itself, so it could make sense to make it global, since you don't know if the package you suggest may ever depend on your package and suddenly break your package that way. This is just my pragmatic view, I don't know any specific details on the noSuggests checks per se.
> 
> Cheers,
> Simon
> 
> 
> 
>> On 8/05/2022, at 10:43 AM, Ben Bolker <bbolker at gmail.com> wrote:
>>
>>
>>   Folks,
>>
>>   CRAN has recently set up an auxiliary 'noSuggests' test platform that tests that packages are using suggested packages conditionally, as recommended in Writing R Extensions, and as (sort of) specified in the CRAN repository policy.
>>
>>   Specifically, the CRP (revision 5236) says:
>>
>>> A package listed in ?Suggests? or ?Enhances? should be used conditionally in examples or tests if it cannot straightforwardly be installed on the major R platforms. (?Writing R Extensions? recommends that they are always used conditionally.)
>>
>>   One of my packages failed on the 'noSuggest' test platform <https://www.stats.ox.ac.uk/pub/bdr/noSuggests/bbmle.out> because two suggested packages were used unconditionally in the vignette. There are two reasons (IMO) that this should *not* have triggered a threat of archiving:
>>
>>   (1) the unconditional package use was in a vignette, not in examples or tests
>>   (2) the relevant packages (AICcmodavg and MuMIn) are available on CRAN and install easily on Linux/Windows/MacOS (they are R-only, no compiled code or extra requirements, binaries are available on CRAN).
>>
>>    Is it worth suggesting to CRAN maintainers that either they refine their 'noSuggests' test so that it conforms to the wording in the CRP, or that they change the CRP wording to something stricter like
>>
>>> Any package listed in ?Suggests? or ?Enhances? should be used conditionally in examples, tests, and vignettes.
>>
>> ?
>>
>>   cheers
>>     Ben Bolker
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From vw@|ter1 @end|ng |rom penn@t@tehe@|th@p@u@edu  Tue May 10 21:55:43 2022
From: vw@|ter1 @end|ng |rom penn@t@tehe@|th@p@u@edu (Walter, Vonn)
Date: Tue, 10 May 2022 19:55:43 +0000
Subject: [R-pkg-devel] check_rhub NOTEs
Message-ID: <MWHPR22MB0846404D49DE139BAE8D3990D8C99@MWHPR22MB0846.namprd22.prod.outlook.com>

Hi Everyone,

I got the NOTEs listed below from the Windows Server 2022, R-devel, 64 bit when I ran devtools::check_rhub() on an undated version of a package that I plan to submit to CRAN.  There were no problems on either Fedora Linux or Ubuntu Linux.  Any thoughts on a solution, or can I ignore these NOTEs and take the next steps towards submission?  Any help would be greatly appreciated.

Best,

Vonn Walter


* checking sizes of PDF files under 'inst/doc' ... NOTE

Unable to find GhostScript executable to run checks on size reduction

* checking for detritus in the temp directory ... NOTE

Found the following files/directories:
  'lastMiKTeXException'

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Tue May 10 22:00:57 2022
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 10 May 2022 16:00:57 -0400
Subject: [R-pkg-devel] check_rhub NOTEs
In-Reply-To: <MWHPR22MB0846404D49DE139BAE8D3990D8C99@MWHPR22MB0846.namprd22.prod.outlook.com>
References: <MWHPR22MB0846404D49DE139BAE8D3990D8C99@MWHPR22MB0846.namprd22.prod.outlook.com>
Message-ID: <77ea3113-40eb-fe4d-1e6d-c78ab84a1d2a@gmail.com>

   AFAIK these are harmless.

   * It seems unlikely that your vignette PDFs would be OK on Linux but 
too large under Windows.

   * the last thing is I think a known false positive, but I can't find 
the posts on this list ...



On 5/10/22 3:55 PM, Walter, Vonn wrote:
> Hi Everyone,
> 
> I got the NOTEs listed below from the Windows Server 2022, R-devel, 64 bit when I ran devtools::check_rhub() on an undated version of a package that I plan to submit to CRAN.  There were no problems on either Fedora Linux or Ubuntu Linux.  Any thoughts on a solution, or can I ignore these NOTEs and take the next steps towards submission?  Any help would be greatly appreciated.
> 
> Best,
> 
> Vonn Walter
> 
> 
> * checking sizes of PDF files under 'inst/doc' ... NOTE
> 
> Unable to find GhostScript executable to run checks on size reduction
> 
> * checking for detritus in the temp directory ... NOTE
> 
> Found the following files/directories:
>    'lastMiKTeXException'
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Director, School of Computational Science and Engineering
Graduate chair, Mathematics & Statistics


From Bernd@Gruber @end|ng |rom c@nberr@@edu@@u  Wed May 11 06:19:03 2022
From: Bernd@Gruber @end|ng |rom c@nberr@@edu@@u (Bernd.Gruber)
Date: Wed, 11 May 2022 04:19:03 +0000
Subject: [R-pkg-devel] Package from in imports bioconductor is not compiling
 on R-devel
Message-ID: <ME3PR01MB794401DFC06B71FA5796CFD2D4C89@ME3PR01MB7944.ausprd01.prod.outlook.com>

Hi,


I just got an email from Brian Ripley, which informed me that one of my dependencies in imports (SNPRelate) cannot be installed in R-devel and that I should check the check pages on CRAN or contact the maintainer.



AsS SNPRelate is actually a Bioconductor package (has been removed from CRAN in 2014) I do not know which check pages I am supposed to check.



I definitely will contact the maintainer, but to understand why it is not compiling is there a way to find out, so I can direct the maintainer to the problem more efficiently?



Thanks, Bernd







==============================================================================
Dr Bernd Gruber                                              )/_
                                                         _.--..---"-,--c_
Professor Ecological Modelling                      \|..'           ._O__)_
Tel: (02) 6206 3804                         ,=.    _.+   _ \..--( /
Fax: (02) 6201 2328                           \\.-''_.-' \ (     \_
Institute for Applied Ecology                  `'''       `\__   /\
Faculty of Science and Technology                          ')
University of Canberra   ACT 2601 AUSTRALIA
Email: bernd.gruber at canberra.edu.au<mailto:bernd.gruber at canberra.edu.au>
WWW: bernd-gruber<https://researchprofiles.canberra.edu.au/en/persons/bernd-gruber>

Australian Government Higher Education Provider Number CRICOS #00212K
NOTICE & DISCLAIMER: This email and any files transmitted with it may contain
confidential or copyright material and are for the attention of the addressee
only. If you have received this email in error please notify us by email
reply and delete it from your system. The University of Canberra accepts
no liability for any damage caused by any virus transmitted by this email.
==============================================================================

[UC Logo]<http://www.canberra.edu.au>

[It all starts with you]<https://www.canberra.edu.au/>



The Ngunnawal people are the Traditional Custodians of the ACT where UC's Bruce Campus is situated and are an integral and celebrated part of UC's culture. We also acknowledge other First Nations Peoples.

Australian Government Higher Education Registered Provider (CRICOS) #00212K  Email Disclaimer<https://www.canberra.edu.au/about-uc/disclaimer-copyright-privacy-accessibility>

[UC Facebook]<https://www.facebook.com/UniversityOfCanberra>    [UC Twitter] <https://twitter.com/UniCanberra>     [UC Instagram] <https://www.instagram.com/unicanberra/>     [UC Linkedin] <https://au.linkedin.com/school/university-of-canberra/>     [UC Youtube] <https://www.youtube.com/user/uniofcanberra>     [University of Canberra] <http://www.canberra.edu.au>

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Wed May 11 06:46:51 2022
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Tue, 10 May 2022 21:46:51 -0700
Subject: [R-pkg-devel] 
 Package from in imports bioconductor is not compiling on R-devel
In-Reply-To: <ME3PR01MB794401DFC06B71FA5796CFD2D4C89@ME3PR01MB7944.ausprd01.prod.outlook.com>
References: <ME3PR01MB794401DFC06B71FA5796CFD2D4C89@ME3PR01MB7944.ausprd01.prod.outlook.com>
Message-ID: <1CAA99EE-A0EB-44D3-8962-92D20F284526@comcast.net>

You can download the source from the package archives. It can then be installed from a terminal console and the logs should tell you the problem. 

? 
David. 

Sent from my iPhone

> On May 10, 2022, at 9:19 PM, Bernd.Gruber <Bernd.Gruber at canberra.edu.au> wrote:
> 
> ?Hi,
> 
> 
> I just got an email from Brian Ripley, which informed me that one of my dependencies in imports (SNPRelate) cannot be installed in R-devel and that I should check the check pages on CRAN or contact the maintainer.
> 
> 
> 
> AsS SNPRelate is actually a Bioconductor package (has been removed from CRAN in 2014) I do not know which check pages I am supposed to check.
> 
> 
> 
> I definitely will contact the maintainer, but to understand why it is not compiling is there a way to find out, so I can direct the maintainer to the problem more efficiently?
> 
> 
> 
> Thanks, Bernd
> 
> 
> 
> 
> 
> 
> 
> ==============================================================================
> Dr Bernd Gruber                                              )/_
>                                                         _.--..---"-,--c_
> Professor Ecological Modelling                      \|..'           ._O__)_
> Tel: (02) 6206 3804                         ,=.    _.+   _ \..--( /
> Fax: (02) 6201 2328                           \\.-''_.-' \ (     \_
> Institute for Applied Ecology                  `'''       `\__   /\
> Faculty of Science and Technology                          ')
> University of Canberra   ACT 2601 AUSTRALIA
> Email: bernd.gruber at canberra.edu.au<mailto:bernd.gruber at canberra.edu.au>
> WWW: bernd-gruber<https://researchprofiles.canberra.edu.au/en/persons/bernd-gruber>
> 
> Australian Government Higher Education Provider Number CRICOS #00212K
> NOTICE & DISCLAIMER: This email and any files transmitted with it may contain
> confidential or copyright material and are for the attention of the addressee
> only. If you have received this email in error please notify us by email
> reply and delete it from your system. The University of Canberra accepts
> no liability for any damage caused by any virus transmitted by this email.
> ==============================================================================
> 
> [UC Logo]<http://www.canberra.edu.au>
> 
> [It all starts with you]<https://www.canberra.edu.au/>
> 
> 
> 
> The Ngunnawal people are the Traditional Custodians of the ACT where UC's Bruce Campus is situated and are an integral and celebrated part of UC's culture. We also acknowledge other First Nations Peoples.
> 
> Australian Government Higher Education Registered Provider (CRICOS) #00212K  Email Disclaimer<https://www.canberra.edu.au/about-uc/disclaimer-copyright-privacy-accessibility>
> 
> [UC Facebook]<https://www.facebook.com/UniversityOfCanberra>    [UC Twitter] <https://twitter.com/UniCanberra>     [UC Instagram] <https://www.instagram.com/unicanberra/>     [UC Linkedin] <https://au.linkedin.com/school/university-of-canberra/>     [UC Youtube] <https://www.youtube.com/user/uniofcanberra>     [University of Canberra] <http://www.canberra.edu.au>
> 
>    [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From dw|n@em|u@ @end|ng |rom comc@@t@net  Wed May 11 07:04:04 2022
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Tue, 10 May 2022 22:04:04 -0700
Subject: [R-pkg-devel] 
 Package from in imports bioconductor is not compiling on R-devel
In-Reply-To: <1CAA99EE-A0EB-44D3-8962-92D20F284526@comcast.net>
References: <1CAA99EE-A0EB-44D3-8962-92D20F284526@comcast.net>
Message-ID: <AA4AC134-4BB2-4968-AF75-EF4EDBA48EE2@comcast.net>

This is the package DESCRIPTION after installing the current version from the Bioc repo:

> packageDescription("SNPRelate")
Package: SNPRelate
Type: Package
Title: Parallel Computing Toolset for Relatedness and Principal Component Analysis
        of SNP Data
Version: 1.28.0
Date: 2021-10-19
Depends: R (>= 2.15), gdsfmt (>= 1.8.3)
LinkingTo: gdsfmt
Imports: methods
Suggests: parallel, Matrix, RUnit, knitr, markdown, rmarkdown, MASS, BiocGenerics
Enhances: SeqArray (>= 1.12.0)
Authors at R: c(person("Xiuwen", "Zheng", role=c("aut", "cre", "cph"),
        email="zhengx at u.washington.edu", comment=c(ORCID="0000-0002-1390-0708")),
        person("Stephanie", "Gogarten", role="ctb", email="sdmorris at uw.edu"),
        person("Cathy", "Laurie", role="ctb", email="cclaurie at uw.edu"),
        person("Bruce", "Weir", role=c("ctb", "ths"), email="bsweir at uw.edu",
        comment=c(ORCID="0000-0002-4883-1247")))
Description: Genome-wide association studies (GWAS) are widely used to investigate
        the genetic basis of diseases and traits, but they pose many
        computational challenges. We developed an R package SNPRelate to provide
        a binary format for single-nucleotide polymorphism (SNP) data in GWAS
        utilizing CoreArray Genomic Data Structure (GDS) data files. The GDS
        format offers the efficient operations specifically designed for integers
        with two bits, since a SNP could occupy only two bits.  SNPRelate is also
        designed to accelerate two key computations on SNP data using parallel
        computing for multi-core symmetric multiprocessing computer
        architectures: Principal Component Analysis (PCA) and relatedness
        analysis using Identity-By-Descent measures. The SNP GDS format is also
        used by the GWASTools package with the support of S4 classes and generic
        functions. The extended GDS format is implemented in the SeqArray package
        to support the storage of single nucleotide variations (SNVs),
        insertion/deletion polymorphism (indel) and structural variation calls in
        whole-genome and whole-exome variant data.
License: GPL-3
VignetteBuilder: knitr
URL: http://github.com/zhengxwen/SNPRelate
BugReports: http://github.com/zhengxwen/SNPRelate/issues
biocViews: Infrastructure, Genetics, StatisticalMethod, PrincipalComponent
git_url: https://git.bioconductor.org/packages/SNPRelate
git_branch: RELEASE_3_14
git_last_commit: 8fcd837
git_last_commit_date: 2021-10-26
Date/Publication: 2021-10-26
NeedsCompilation: yes
Packaged: 2021-10-27 03:33:37 UTC; biocbuild
Author: Xiuwen Zheng [aut, cre, cph] (<https://orcid.org/0000-0002-1390-0708>),
        Stephanie Gogarten [ctb], Cathy Laurie [ctb], Bruce Weir [ctb, ths]
        (<https://orcid.org/0000-0002-4883-1247>)
Maintainer: Xiuwen Zheng <zhengx at u.washington.edu>
Built: R 4.1.1; x86_64-apple-darwin17.0; 2021-10-27 17:11:51 UTC; unix

-- File: /Library/Frameworks/R.framework/Versions/4.1/Resources/library/SNPRelate/Meta/package.rds
?
David. 

Sent from my iPhone

> On May 10, 2022, at 9:47 PM, David Winsemius <dwinsemius at comcast.net> wrote:
> 
> ?You can download the source from the package archives. It can then be installed from a terminal console and the logs should tell you the problem. 
> 
> ? 
> David. 
> 
> Sent from my iPhone
> 
>> On May 10, 2022, at 9:19 PM, Bernd.Gruber <Bernd.Gruber at canberra.edu.au> wrote:
>> 
>> ?Hi,
>> 
>> 
>> I just got an email from Brian Ripley, which informed me that one of my dependencies in imports (SNPRelate) cannot be installed in R-devel and that I should check the check pages on CRAN or contact the maintainer.
>> 
>> 
>> 
>> AsS SNPRelate is actually a Bioconductor package (has been removed from CRAN in 2014) I do not know which check pages I am supposed to check.
>> 
>> 
>> 
>> I definitely will contact the maintainer, but to understand why it is not compiling is there a way to find out, so I can direct the maintainer to the problem more efficiently?
>> 
>> 
>> 
>> Thanks, Bernd
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> ==============================================================================
>> Dr Bernd Gruber                                              )/_
>>                                                        _.--..---"-,--c_
>> Professor Ecological Modelling                      \|..'           ._O__)_
>> Tel: (02) 6206 3804                         ,=.    _.+   _ \..--( /
>> Fax: (02) 6201 2328                           \\.-''_.-' \ (     \_
>> Institute for Applied Ecology                  `'''       `\__   /\
>> Faculty of Science and Technology                          ')
>> University of Canberra   ACT 2601 AUSTRALIA
>> Email: bernd.gruber at canberra.edu.au<mailto:bernd.gruber at canberra.edu.au>
>> WWW: bernd-gruber<https://researchprofiles.canberra.edu.au/en/persons/bernd-gruber>
>> 
>> Australian Government Higher Education Provider Number CRICOS #00212K
>> NOTICE & DISCLAIMER: This email and any files transmitted with it may contain
>> confidential or copyright material and are for the attention of the addressee
>> only. If you have received this email in error please notify us by email
>> reply and delete it from your system. The University of Canberra accepts
>> no liability for any damage caused by any virus transmitted by this email.
>> ==============================================================================
>> 
>> [UC Logo]<http://www.canberra.edu.au>
>> 
>> [It all starts with you]<https://www.canberra.edu.au/>
>> 
>> 
>> 
>> The Ngunnawal people are the Traditional Custodians of the ACT where UC's Bruce Campus is situated and are an integral and celebrated part of UC's culture. We also acknowledge other First Nations Peoples.
>> 
>> Australian Government Higher Education Registered Provider (CRICOS) #00212K  Email Disclaimer<https://www.canberra.edu.au/about-uc/disclaimer-copyright-privacy-accessibility>
>> 
>> [UC Facebook]<https://www.facebook.com/UniversityOfCanberra>    [UC Twitter] <https://twitter.com/UniCanberra>     [UC Instagram] <https://www.instagram.com/unicanberra/>     [UC Linkedin] <https://au.linkedin.com/school/university-of-canberra/>     [UC Youtube] <https://www.youtube.com/user/uniofcanberra>     [University of Canberra] <http://www.canberra.edu.au>
>> 
>>   [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed May 11 09:50:00 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 11 May 2022 09:50:00 +0200
Subject: [R-pkg-devel] 
 Package from in imports bioconductor is not compiling on R-devel
In-Reply-To: <ME3PR01MB794401DFC06B71FA5796CFD2D4C89@ME3PR01MB7944.ausprd01.prod.outlook.com>
References: <ME3PR01MB794401DFC06B71FA5796CFD2D4C89@ME3PR01MB7944.ausprd01.prod.outlook.com>
Message-ID: <9d78b518-256d-5695-4f77-db372e4c2f8d@statistik.tu-dortmund.de>

BioC currently does not check under R-devel, hence simply ask the 
maintainer to make the package work for a recent version of R-devel.

Best,
Uwe Ligges


On 11.05.2022 06:19, Bernd.Gruber wrote:
> Hi,
> 
> 
> I just got an email from Brian Ripley, which informed me that one of my dependencies in imports (SNPRelate) cannot be installed in R-devel and that I should check the check pages on CRAN or contact the maintainer.
> 
> 
> 
> AsS SNPRelate is actually a Bioconductor package (has been removed from CRAN in 2014) I do not know which check pages I am supposed to check.
> 
> 
> 
> I definitely will contact the maintainer, but to understand why it is not compiling is there a way to find out, so I can direct the maintainer to the problem more efficiently?
> 
> 
> 
> Thanks, Bernd
> 
> 
> 
> 
> 
> 
> 
> ==============================================================================
> Dr Bernd Gruber                                              )/_
>                                                           _.--..---"-,--c_
> Professor Ecological Modelling                      \|..'           ._O__)_
> Tel: (02) 6206 3804                         ,=.    _.+   _ \..--( /
> Fax: (02) 6201 2328                           \\.-''_.-' \ (     \_
> Institute for Applied Ecology                  `'''       `\__   /\
> Faculty of Science and Technology                          ')
> University of Canberra   ACT 2601 AUSTRALIA
> Email: bernd.gruber at canberra.edu.au<mailto:bernd.gruber at canberra.edu.au>
> WWW: bernd-gruber<https://researchprofiles.canberra.edu.au/en/persons/bernd-gruber>
> 
> Australian Government Higher Education Provider Number CRICOS #00212K
> NOTICE & DISCLAIMER: This email and any files transmitted with it may contain
> confidential or copyright material and are for the attention of the addressee
> only. If you have received this email in error please notify us by email
> reply and delete it from your system. The University of Canberra accepts
> no liability for any damage caused by any virus transmitted by this email.
> ==============================================================================
> 
> [UC Logo]<http://www.canberra.edu.au>
> 
> [It all starts with you]<https://www.canberra.edu.au/>
> 
> 
> 
> The Ngunnawal people are the Traditional Custodians of the ACT where UC's Bruce Campus is situated and are an integral and celebrated part of UC's culture. We also acknowledge other First Nations Peoples.
> 
> Australian Government Higher Education Registered Provider (CRICOS) #00212K  Email Disclaimer<https://www.canberra.edu.au/about-uc/disclaimer-copyright-privacy-accessibility>
> 
> [UC Facebook]<https://www.facebook.com/UniversityOfCanberra>    [UC Twitter] <https://twitter.com/UniCanberra>     [UC Instagram] <https://www.instagram.com/unicanberra/>     [UC Linkedin] <https://au.linkedin.com/school/university-of-canberra/>     [UC Youtube] <https://www.youtube.com/user/uniofcanberra>     [University of Canberra] <http://www.canberra.edu.au>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Wed May 11 13:27:48 2022
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Wed, 11 May 2022 13:27:48 +0200
Subject: [R-pkg-devel] check_rhub NOTEs
In-Reply-To: <77ea3113-40eb-fe4d-1e6d-c78ab84a1d2a@gmail.com>
References: <MWHPR22MB0846404D49DE139BAE8D3990D8C99@MWHPR22MB0846.namprd22.prod.outlook.com>
 <77ea3113-40eb-fe4d-1e6d-c78ab84a1d2a@gmail.com>
Message-ID: <19c1f8ec-123b-4519-e199-e8f3ee566920@gmail.com>


On 5/10/22 22:00, Ben Bolker wrote:
> ? AFAIK these are harmless.
>
> ? * It seems unlikely that your vignette PDFs would be OK on Linux but 
> too large under Windows.
>
> ? * the last thing is I think a known false positive, but I can't find 
> the posts on this list ...
>
Also you can use winbuilder which is the same setup as CRAN uses for the 
checks.

Tomas

>
>
> On 5/10/22 3:55 PM, Walter, Vonn wrote:
>> Hi Everyone,
>>
>> I got the NOTEs listed below from the Windows Server 2022, R-devel, 
>> 64 bit when I ran devtools::check_rhub() on an undated version of a 
>> package that I plan to submit to CRAN.? There were no problems on 
>> either Fedora Linux or Ubuntu Linux.? Any thoughts on a solution, or 
>> can I ignore these NOTEs and take the next steps towards submission?? 
>> Any help would be greatly appreciated.
>>
>> Best,
>>
>> Vonn Walter
>>
>>
>> * checking sizes of PDF files under 'inst/doc' ... NOTE
>>
>> Unable to find GhostScript executable to run checks on size reduction
>>
>> * checking for detritus in the temp directory ... NOTE
>>
>> Found the following files/directories:
>> ?? 'lastMiKTeXException'
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From h@w|ckh@m @end|ng |rom gm@||@com  Wed May 11 20:28:03 2022
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Thu, 12 May 2022 06:28:03 +1200
Subject: [R-pkg-devel] check_rhub NOTEs
In-Reply-To: <19c1f8ec-123b-4519-e199-e8f3ee566920@gmail.com>
References: <MWHPR22MB0846404D49DE139BAE8D3990D8C99@MWHPR22MB0846.namprd22.prod.outlook.com>
 <77ea3113-40eb-fe4d-1e6d-c78ab84a1d2a@gmail.com>
 <19c1f8ec-123b-4519-e199-e8f3ee566920@gmail.com>
Message-ID: <CABdHhvHsdLU02J9yfPNHdja8q1ReESU-7pS4A4gqE0QC=UCbKg@mail.gmail.com>

On Wed, May 11, 2022 at 11:28 PM Tomas Kalibera
<tomas.kalibera at gmail.com> wrote:
>
>
> On 5/10/22 22:00, Ben Bolker wrote:
> >   AFAIK these are harmless.
> >
> >   * It seems unlikely that your vignette PDFs would be OK on Linux but
> > too large under Windows.
> >
> >   * the last thing is I think a known false positive, but I can't find
> > the posts on this list ...
> >
> Also you can use winbuilder which is the same setup as CRAN uses for the
> checks.

And devtools provides a helper for that too: devtools::check_win_devel()

Hadley

-- 
http://hadley.nz


From D@n@Ke||ey @end|ng |rom D@|@C@  Wed May 11 21:07:18 2022
From: D@n@Ke||ey @end|ng |rom D@|@C@ (Daniel Kelley)
Date: Wed, 11 May 2022 19:07:18 +0000
Subject: [R-pkg-devel] advice on a rejected package (I think,
 because time was 13min, in excess of 10min limit)
Message-ID: <70B31DC6-30D7-46DC-B7AA-44280CDFB191@dal.ca>

Today I tried to update the CRAN oce package to version 1.7-3, to address a problem with 1.7-2 on one of the CRAN build platforms.  I used devtools::release() to submit it.  I just received the text I've pasted at the bottom of this email.  I've checked all the links, and my impression is that the sole problem is that the build took 13 minutes, which is over a 10-minute limit.

Since oce is a big package, I am not sure that removing the tests and documentation examples would reduce the time by 30%. There is a lot of C, C++ and fortran code that takes a while to build. And a package lacking code examples and a test suite is not likely to please my users, many of whom are scientists without deep coding experience.

During the previous submission, this time limit flag was also raised, and I asked R-package-devel for advice on what to do.  Someone suggested that I wait a week, in case a CRAN member would notice and put the package through. That worked, but my concern is whether this is the approach that makes for less work on the CRAN side.

So, I wonder whether the advice on this list is again to leave it alone and wait, or to contact CRAN?

Dan Kelley / Dept. Oceanography / Dalhousie University / Halifax, Nova Scotia / Canada


- - - - - - - - -

Dear maintainer,

package oce_1.7-3.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
Windows: <https://win-builder.r-project.org/incoming_pretest/oce_1.7-3_20220511_192652/Windows/00check.log>
Status: OK
Debian: <https://win-builder.r-project.org/incoming_pretest/oce_1.7-3_20220511_192652/Debian/00check.log>
Status: OK

Last released version's CRAN status: OK: 4, NOTE: 8, ERROR: 1
See: <https://CRAN.R-project.org/web/checks/check_results_oce.html>

CRAN Web: <https://cran.r-project.org/package=oce>

Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.

More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/oce_1.7-3_20220511_192652/>
The files will be removed after roughly 7 days.

*** Strong rev. depends ***: argoFloats dendroTools morphomap seacarb skyscapeR soundecology SWMPr vprr

Best regards,
CRAN teams' auto-check service
Flavor: r-devel-windows-x86_64
Check: CRAN incoming feasibility, Result: NA
Maintainer: 'Dan Kelley <Dan.Kelley at Dal.Ca>'

Flavor: r-devel-windows-x86_64
Check: Overall checktime, Result: NOTE
Overall checktime 13 min > 10 min

Flavor: r-devel-linux-x86_64-debian-gcc
Check: CRAN incoming feasibility, Result: Note_to_CRAN_maintainers
Maintainer: 'Dan Kelley <Dan.Kelley at Dal.Ca>'

From edd @end|ng |rom deb|@n@org  Wed May 11 21:27:29 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 11 May 2022 14:27:29 -0500
Subject: [R-pkg-devel] advice on a rejected package (I think,
 because time was 13min, in excess of 10min limit)
In-Reply-To: <70B31DC6-30D7-46DC-B7AA-44280CDFB191@dal.ca>
References: <70B31DC6-30D7-46DC-B7AA-44280CDFB191@dal.ca>
Message-ID: <25212.3617.224872.419188@rob.eddelbuettel.com>


On 11 May 2022 at 19:07, Daniel Kelley wrote:
| Today I tried to update the CRAN oce package to version 1.7-3, to address a problem with 1.7-2 on one of the CRAN build platforms.  I used devtools::release() to submit it.  I just received the text I've pasted at the bottom of this email.  I've checked all the links, and my impression is that the sole problem is that the build took 13 minutes, which is over a 10-minute limit.
| 
| Since oce is a big package, I am not sure that removing the tests and documentation examples would reduce the time by 30%. There is a lot of C, C++ and fortran code that takes a while to build. And a package lacking code examples and a test suite is not likely to please my users, many of whom are scientists without deep coding experience.
| 
| During the previous submission, this time limit flag was also raised, and I asked R-package-devel for advice on what to do.  Someone suggested that I wait a week, in case a CRAN member would notice and put the package through. That worked, but my concern is whether this is the approach that makes for less work on the CRAN side.
| 
| So, I wonder whether the advice on this list is again to leave it alone and wait, or to contact CRAN?

The 'Overall checktime 13 min > 10 min' suggests to me that you should
condition some tests on an environment variable possibly present on your home
system, your CI setup, ... but not CRAN so that the default gets closer to
five minutes.

Of course it sucks that we have to reduce coverage but CRAN is also testing
18.5k packages, often recursively or in bulk when changes are considered to
time matters. So it is a defensible tradeoff.

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From D@n@Ke||ey @end|ng |rom D@|@C@  Wed May 11 22:26:58 2022
From: D@n@Ke||ey @end|ng |rom D@|@C@ (Daniel Kelley)
Date: Wed, 11 May 2022 20:26:58 +0000
Subject: [R-pkg-devel] advice on a rejected package (I think,
 because time was 13min, in excess of 10min limit)
In-Reply-To: <25212.3617.224872.419188@rob.eddelbuettel.com>
References: <70B31DC6-30D7-46DC-B7AA-44280CDFB191@dal.ca>
 <25212.3617.224872.419188@rob.eddelbuettel.com>
Message-ID: <E9DF1B2E-2089-4891-8D44-EBDA343ED0B1@dal.ca>

Thanks, Dirk.  On my machine, the test suite takes 85 seconds.  Assuming the CRAN machines are about half as fast, eliminating all the tests might get oce under the 10 minute limit.  I've gone ahead and made all the tests be local, by relying on the presence of a file that is in github, but not included in the R tarball.  Tomorrow I will also take a close look at code examples, to see what I can eliminate.  (I had already done some of that for the previous release, but I will cut closer to the bone this time.). 

Hopefully these reductions will get oce under the limit. On that assumption, I will try submitting a new version tomorrow, with fingers crossed.  If I really have to, I can eliminate all the examples from the documentation.  I'd rather have the package on CRAN even without tests and examples, because it requires compilation, and not all my users are set up for that.

Thanks again.  I appreciate your swift and clear response.

Dan.

> On May 11, 2022, at 4:27 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> CAUTION: The Sender of this email is not from within Dalhousie.
> 
> On 11 May 2022 at 19:07, Daniel Kelley wrote:
> | Today I tried to update the CRAN oce package to version 1.7-3, to address a problem with 1.7-2 on one of the CRAN build platforms.  I used devtools::release() to submit it.  I just received the text I've pasted at the bottom of this email.  I've checked all the links, and my impression is that the sole problem is that the build took 13 minutes, which is over a 10-minute limit.
> |
> | Since oce is a big package, I am not sure that removing the tests and documentation examples would reduce the time by 30%. There is a lot of C, C++ and fortran code that takes a while to build. And a package lacking code examples and a test suite is not likely to please my users, many of whom are scientists without deep coding experience.
> |
> | During the previous submission, this time limit flag was also raised, and I asked R-package-devel for advice on what to do.  Someone suggested that I wait a week, in case a CRAN member would notice and put the package through. That worked, but my concern is whether this is the approach that makes for less work on the CRAN side.
> |
> | So, I wonder whether the advice on this list is again to leave it alone and wait, or to contact CRAN?
> 
> The 'Overall checktime 13 min > 10 min' suggests to me that you should
> condition some tests on an environment variable possibly present on your home
> system, your CI setup, ... but not CRAN so that the default gets closer to
> five minutes.
> 
> Of course it sucks that we have to reduce coverage but CRAN is also testing
> 18.5k packages, often recursively or in bulk when changes are considered to
> time matters. So it is a defensible tradeoff.
> 
> Dirk
> 
> --
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed May 11 22:31:59 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 11 May 2022 16:31:59 -0400
Subject: [R-pkg-devel] advice on a rejected package (I think,
 because time was 13min, in excess of 10min limit)
In-Reply-To: <E9DF1B2E-2089-4891-8D44-EBDA343ED0B1@dal.ca>
References: <70B31DC6-30D7-46DC-B7AA-44280CDFB191@dal.ca>
 <25212.3617.224872.419188@rob.eddelbuettel.com>
 <E9DF1B2E-2089-4891-8D44-EBDA343ED0B1@dal.ca>
Message-ID: <1c4ef17e-b5fb-22f3-81f2-cf695ff951ef@gmail.com>

On 11/05/2022 4:26 p.m., Daniel Kelley wrote:
> Thanks, Dirk.  On my machine, the test suite takes 85 seconds.  Assuming the CRAN machines are about half as fast, eliminating all the tests might get oce under the 10 minute limit.  I've gone ahead and made all the tests be local, by relying on the presence of a file that is in github, but not included in the R tarball.  Tomorrow I will also take a close look at code examples, to see what I can eliminate.  (I had already done some of that for the previous release, but I will cut closer to the bone this time.).
> 
> Hopefully these reductions will get oce under the limit. On that assumption, I will try submitting a new version tomorrow, with fingers crossed.  If I really have to, I can eliminate all the examples from the documentation.  I'd rather have the package on CRAN even without tests and examples, because it requires compilation, and not all my users are set up for that.

CRAN will object if many of your help pages don't have examples.

Duncan Murdoch

> 
> Thanks again.  I appreciate your swift and clear response.
> 
> Dan.
> 
>> On May 11, 2022, at 4:27 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
>>
>> CAUTION: The Sender of this email is not from within Dalhousie.
>>
>> On 11 May 2022 at 19:07, Daniel Kelley wrote:
>> | Today I tried to update the CRAN oce package to version 1.7-3, to address a problem with 1.7-2 on one of the CRAN build platforms.  I used devtools::release() to submit it.  I just received the text I've pasted at the bottom of this email.  I've checked all the links, and my impression is that the sole problem is that the build took 13 minutes, which is over a 10-minute limit.
>> |
>> | Since oce is a big package, I am not sure that removing the tests and documentation examples would reduce the time by 30%. There is a lot of C, C++ and fortran code that takes a while to build. And a package lacking code examples and a test suite is not likely to please my users, many of whom are scientists without deep coding experience.
>> |
>> | During the previous submission, this time limit flag was also raised, and I asked R-package-devel for advice on what to do.  Someone suggested that I wait a week, in case a CRAN member would notice and put the package through. That worked, but my concern is whether this is the approach that makes for less work on the CRAN side.
>> |
>> | So, I wonder whether the advice on this list is again to leave it alone and wait, or to contact CRAN?
>>
>> The 'Overall checktime 13 min > 10 min' suggests to me that you should
>> condition some tests on an environment variable possibly present on your home
>> system, your CI setup, ... but not CRAN so that the default gets closer to
>> five minutes.
>>
>> Of course it sucks that we have to reduce coverage but CRAN is also testing
>> 18.5k packages, often recursively or in bulk when changes are considered to
>> time matters. So it is a defensible tradeoff.
>>
>> Dirk
>>
>> --
>> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m@tth|@@-gond@n @end|ng |rom gmx@de  Wed May 11 22:32:46 2022
From: m@tth|@@-gond@n @end|ng |rom gmx@de (matthias-gondan)
Date: Wed, 11 May 2022 22:32:46 +0200
Subject: [R-pkg-devel] advice on a rejected package (I think,
 because time was 13min, in excess of 10min limit)
In-Reply-To: <70B31DC6-30D7-46DC-B7AA-44280CDFB191@dal.ca>
Message-ID: <1M3DO3-1nlqbx0TZV-003flg@mail.gmx.net>

Hi Daniel,If the tests take considerable time, you might consider splitting the package into the "raw" package with only the functions, and a separate package with the tests. For the examples, I don't know.?Best wishes?Matthias?
-------- Urspr?ngliche Nachricht --------Von: Daniel Kelley <Dan.Kelley at Dal.Ca> Datum: 11.05.22  21:07  (GMT+01:00) An: R package devel <r-package-devel at r-project.org> Betreff: [R-pkg-devel] advice on a rejected package (I think,
  because time was 13min, in excess of 10min limit) Today I tried to update the CRAN oce package to version 1.7-3, to address a problem with 1.7-2 on one of the CRAN build platforms.? I used devtools::release() to submit it.? I just received the text I've pasted at the bottom of this email.? I've checked all the links, and my impression is that the sole problem is that the build took 13 minutes, which is over a 10-minute limit.Since oce is a big package, I am not sure that removing the tests and documentation examples would reduce the time by 30%. There is a lot of C, C++ and fortran code that takes a while to build. And a package lacking code examples and a test suite is not likely to please my users, many of whom are scientists without deep coding experience.During the previous submission, this time limit flag was also raised, and I asked R-package-devel for advice on what to do.? Someone suggested that I wait a week, in case a CRAN member would notice and put the package through. That worked, but my concern is whether this is the approach that makes for less work on the CRAN side.So, I wonder whether the advice on this list is again to leave it alone and wait, or to contact CRAN?Dan Kelley / Dept. Oceanography / Dalhousie University / Halifax, Nova Scotia / Canada- - - - - - - - -Dear maintainer,package oce_1.7-3.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:Windows: <https://win-builder.r-project.org/incoming_pretest/oce_1.7-3_20220511_192652/Windows/00check.log>Status: OKDebian: <https://win-builder.r-project.org/incoming_pretest/oce_1.7-3_20220511_192652/Debian/00check.log>Status: OKLast released version's CRAN status: OK: 4, NOTE: 8, ERROR: 1See: <https://CRAN.R-project.org/web/checks/check_results_oce.html>CRAN Web: <https://cran.r-project.org/package=oce>Please fix all problems and resubmit a fixed version via the webform.If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:<https://stat.ethz.ch/mailman/listinfo/r-package-devel>If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.More details are given in the directory:<https://win-builder.r-project.org/incoming_pretest/oce_1.7-3_20220511_192652/>The files will be removed after roughly 7 days.*** Strong rev. depends ***: argoFloats dendroTools morphomap seacarb skyscapeR soundecology SWMPr vprrBest regards,CRAN teams' auto-check serviceFlavor: r-devel-windows-x86_64Check: CRAN incoming feasibility, Result: NAMaintainer: 'Dan Kelley <Dan.Kelley at Dal.Ca>'Flavor: r-devel-windows-x86_64Check: Overall checktime, Result: NOTEOverall checktime 13 min > 10 minFlavor: r-devel-linux-x86_64-debian-gccCheck: CRAN incoming feasibility, Result: Note_to_CRAN_maintainersMaintainer: 'Dan Kelley <Dan.Kelley at Dal.Ca>'______________________________________________R-package-devel at r-project.org mailing listhttps://stat.ethz.ch/mailman/listinfo/r-package-devel
	[[alternative HTML version deleted]]


From n|u|tz @end|ng |rom gm@||@com  Wed May 11 22:37:56 2022
From: n|u|tz @end|ng |rom gm@||@com (Neal Fultz)
Date: Wed, 11 May 2022 13:37:56 -0700
Subject: [R-pkg-devel] nit-picking about CRAN repository policy
In-Reply-To: <bb916d73-6cc9-d7a4-49e0-88c3177add03@fau.de>
References: <1d04b066-4d72-16ae-6758-e8d5c81cb133@gmail.com>
 <C8334AC3-CD92-42EC-805A-FD84A6B50908@R-project.org>
 <bb916d73-6cc9-d7a4-49e0-88c3177add03@fau.de>
Message-ID: <CAL9B2vex2vqBUnPcc2OCAGfsXYgaTciCHiadp=N_1RtFFO1zVw@mail.gmail.com>

Is there a status code I could use to signal early-stopping due to
missing dependencies (eg in test scripts)?

I am thinking of writing something like:

    require(suggested_pkg) || quit(status=13)

I checked ?quit which says:

     Some error status values are used by R itself.  The default error
     handler for non-interactive use effectively calls 'q("no", 1,
     FALSE)' and returns error status 1.  Error status 2 is used for R
     'suicide', that is a catastrophic failure, and other small numbers
     are used by specific ports for initialization failures.  It is
     recommended that users choose statuses of 10 or more.

Probably there's already an error code for a missing dependency. I
would imagine the list of status codes exists somewhere, but I wasn't
able to find it easily with "man R" / google / SO / rseek.


On Mon, May 9, 2022 at 3:58 PM Sebastian Meyer <seb.meyer at fau.de> wrote:
>
> In my opinion, vignettes -- as opposed to examples and tests -- should
> be allowed to depend on suggested packages without having to
> conditionalize their use in the code (if they can straightforwardly be
> installed on the major R platforms). The vignette system is already
> prepared to handle \VignetteDepends metadata, which is checked to only
> list packages from the DESCRIPTION Depends/*Suggests*/Imports entries. R
> CMD check could skip vignette processing if the stated requirements are
> not fulfilled -- possibly with a note citing WRE that suggested packages
> are needed for a complete check, similar to the note that we'd already
> get from the "checking package dependencies" step: "Package suggested
> but not available for checking".
>
> I think such a setup would highlight the importance of vignette
> reproducibility (whereas conditionalizing suggested packages would
> simply give OK without having executed all the code), but reduces the
> amount of failures on check servers when vignette dependencies become
> unavailable.
>
> There is a related report in R's Bugzilla
> <https://bugs.r-project.org/show_bug.cgi?id=18318>.
>
> Best regards,
>
>         Sebastian Meyer
>
>
> Am 09.05.22 um 00:13 schrieb Simon Urbanek:
> > Ben,
> >
> > I fully agree with Dirk - it would be good to make the CRP more clear.
> >
> > The main problem with failing to the check conditional dependencies is in cases where there are circular dependencies: package A suggests B, and package B requires A. The correct resolution is to check A without B, then check B with A and then check A with B (that's what the macOS CRAN build system is doing). If A fails to check without B, the whole chain is doomed and none of the package will be available.
> >
> > So at the very least the examples and tests should be clearly conditional. Currently, the vignettes also required since there is no specific check with --no-build-vignettes.
> >
> > As for your package, the fact that it worked so far is due to the incremental nature of the builds: if your dependency is not circular then the build system will schedule dependencies for check before your package which is possible in that case, so the package is actually never checked without the suggests. In the macOS case we have no choice, because there are so many packages to build that checking every suggests-dependency twice would take too long. So from practical point of view, the suggests-must-be-conditional rule has been checked only for packages with circular dependencies since that is where it matters the most. However, the circular nature is not a function of the package itself, so it could make sense to make it global, since you don't know if the package you suggest may ever depend on your package and suddenly break your package that way. This is just my pragmatic view, I don't know any specific details on the noSuggests checks per se.
> >
> > Cheers,
> > Simon
> >
> >
> >
> >> On 8/05/2022, at 10:43 AM, Ben Bolker <bbolker at gmail.com> wrote:
> >>
> >>
> >>   Folks,
> >>
> >>   CRAN has recently set up an auxiliary 'noSuggests' test platform that tests that packages are using suggested packages conditionally, as recommended in Writing R Extensions, and as (sort of) specified in the CRAN repository policy.
> >>
> >>   Specifically, the CRP (revision 5236) says:
> >>
> >>> A package listed in ?Suggests? or ?Enhances? should be used conditionally in examples or tests if it cannot straightforwardly be installed on the major R platforms. (?Writing R Extensions? recommends that they are always used conditionally.)
> >>
> >>   One of my packages failed on the 'noSuggest' test platform <https://www.stats.ox.ac.uk/pub/bdr/noSuggests/bbmle.out> because two suggested packages were used unconditionally in the vignette. There are two reasons (IMO) that this should *not* have triggered a threat of archiving:
> >>
> >>   (1) the unconditional package use was in a vignette, not in examples or tests
> >>   (2) the relevant packages (AICcmodavg and MuMIn) are available on CRAN and install easily on Linux/Windows/MacOS (they are R-only, no compiled code or extra requirements, binaries are available on CRAN).
> >>
> >>    Is it worth suggesting to CRAN maintainers that either they refine their 'noSuggests' test so that it conforms to the wording in the CRP, or that they change the CRP wording to something stricter like
> >>
> >>> Any package listed in ?Suggests? or ?Enhances? should be used conditionally in examples, tests, and vignettes.
> >>
> >> ?
> >>
> >>   cheers
> >>     Ben Bolker
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Thu May 12 09:34:19 2022
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Thu, 12 May 2022 09:34:19 +0200
Subject: [R-pkg-devel] advice on a rejected package (I think,
 because time was 13min, in excess of 10min limit)
In-Reply-To: <E9DF1B2E-2089-4891-8D44-EBDA343ED0B1@dal.ca>
References: <70B31DC6-30D7-46DC-B7AA-44280CDFB191@dal.ca>
 <25212.3617.224872.419188@rob.eddelbuettel.com>
 <E9DF1B2E-2089-4891-8D44-EBDA343ED0B1@dal.ca>
Message-ID: <0cdb625e-d56c-75a7-660e-1ada15c027c5@gmail.com>


On 5/11/22 22:26, Daniel Kelley wrote:
> Thanks, Dirk.  On my machine, the test suite takes 85 seconds.  Assuming the CRAN machines are about half as fast, eliminating all the tests might get oce under the 10 minute limit.

Out of curiosity, how did you find out it is because of a time limit? In 
the outputs shown in your original post I only see a failed test on 
Linux. If it takes only 85 seconds on your machine, using reasonable 
amount of memory, but several times longer elsewhere, I would recommend 
first looking into the cause of the slowdown.

Best
Tomas

>    I've gone ahead and made all the tests be local, by relying on the presence of a file that is in github, but not included in the R tarball.  Tomorrow I will also take a close look at code examples, to see what I can eliminate.  (I had already done some of that for the previous release, but I will cut closer to the bone this time.).
>
> Hopefully these reductions will get oce under the limit. On that assumption, I will try submitting a new version tomorrow, with fingers crossed.  If I really have to, I can eliminate all the examples from the documentation.  I'd rather have the package on CRAN even without tests and examples, because it requires compilation, and not all my users are set up for that.
>
> Thanks again.  I appreciate your swift and clear response.
>
> Dan.
>
>> On May 11, 2022, at 4:27 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
>>
>> CAUTION: The Sender of this email is not from within Dalhousie.
>>
>> On 11 May 2022 at 19:07, Daniel Kelley wrote:
>> | Today I tried to update the CRAN oce package to version 1.7-3, to address a problem with 1.7-2 on one of the CRAN build platforms.  I used devtools::release() to submit it.  I just received the text I've pasted at the bottom of this email.  I've checked all the links, and my impression is that the sole problem is that the build took 13 minutes, which is over a 10-minute limit.
>> |
>> | Since oce is a big package, I am not sure that removing the tests and documentation examples would reduce the time by 30%. There is a lot of C, C++ and fortran code that takes a while to build. And a package lacking code examples and a test suite is not likely to please my users, many of whom are scientists without deep coding experience.
>> |
>> | During the previous submission, this time limit flag was also raised, and I asked R-package-devel for advice on what to do.  Someone suggested that I wait a week, in case a CRAN member would notice and put the package through. That worked, but my concern is whether this is the approach that makes for less work on the CRAN side.
>> |
>> | So, I wonder whether the advice on this list is again to leave it alone and wait, or to contact CRAN?
>>
>> The 'Overall checktime 13 min > 10 min' suggests to me that you should
>> condition some tests on an environment variable possibly present on your home
>> system, your CI setup, ... but not CRAN so that the default gets closer to
>> five minutes.
>>
>> Of course it sucks that we have to reduce coverage but CRAN is also testing
>> 18.5k packages, often recursively or in bulk when changes are considered to
>> time matters. So it is a defensible tradeoff.
>>
>> Dirk
>>
>> --
>> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From D@n@Ke||ey @end|ng |rom D@|@C@  Thu May 12 10:55:47 2022
From: D@n@Ke||ey @end|ng |rom D@|@C@ (Daniel Kelley)
Date: Thu, 12 May 2022 08:55:47 +0000
Subject: [R-pkg-devel] advice on a rejected package (I think,
 because time was 13min, in excess of 10min limit)
In-Reply-To: <0cdb625e-d56c-75a7-660e-1ada15c027c5@gmail.com>
References: <70B31DC6-30D7-46DC-B7AA-44280CDFB191@dal.ca>
 <25212.3617.224872.419188@rob.eddelbuettel.com>
 <E9DF1B2E-2089-4891-8D44-EBDA343ED0B1@dal.ca>
 <0cdb625e-d56c-75a7-660e-1ada15c027c5@gmail.com>
Message-ID: <A0A637B4-B8D7-4219-80F3-5C566FE9F81F@dal.ca>



On May 12, 2022, at 4:34 AM, Tomas Kalibera <tomas.kalibera at gmail.com<mailto:tomas.kalibera at gmail.com>> wrote:

CAUTION: The Sender of this email is not from within Dalhousie.

On 5/11/22 22:26, Daniel Kelley wrote:
Thanks, Dirk. On my machine, the test suite takes 85 seconds. Assuming the CRAN machines are about half as fast, eliminating all the tests might get oce under the 10 minute limit.

Out of curiosity, how did you find out it is because of a time limit? In
the outputs shown in your original post I only see a failed test on
Linux. If it takes only 85 seconds on your machine, using reasonable
amount of memory, but several times longer elsewhere, I would recommend
first looking into the cause of the slowdown.

Tomas, thanks for your comment.  Perhaps I ought to provide a bit more information.

I found out the time near the end of the email, where it said

Flavor: r-devel-windows-x86_64
Check: Overall checktime, Result: NOTE
Overall checktime 13 min > 10 min

The 85 seconds to which I refer is on my local machine (a laptop) and it is only for the tests part. I don't think I saw time broken-down in the links provided in the email I received (pasted below ... but note that none of these links works for me today, although they worked 15 hours ago).

Importantly, I am quite curious about your reference to a failed linux test.  I don't recall seeing any errors for my new version (1.7-3) on the following links (from the original email I received from CRAN).  I did, however, see errors for the previous version (1.7-2); indeed these were the reason why I was told to make a new CRAN release.

Windows: <https://win-builder.r-project.org/incoming_pretest/oce_1.7-3_20220511_192652/Windows/00check.log>
Status: OK

Debian: <https://win-builder.r-project.org/incoming_pretest/oce_1.7-3_20220511_192652/Debian/00check.log>
Status: OK

More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/oce_1.7-3_20220511_192652/>


	[[alternative HTML version deleted]]


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Thu May 12 11:34:59 2022
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Thu, 12 May 2022 11:34:59 +0200
Subject: [R-pkg-devel] advice on a rejected package (I think,
 because time was 13min, in excess of 10min limit)
In-Reply-To: <A0A637B4-B8D7-4219-80F3-5C566FE9F81F@dal.ca>
References: <70B31DC6-30D7-46DC-B7AA-44280CDFB191@dal.ca>
 <25212.3617.224872.419188@rob.eddelbuettel.com>
 <E9DF1B2E-2089-4891-8D44-EBDA343ED0B1@dal.ca>
 <0cdb625e-d56c-75a7-660e-1ada15c027c5@gmail.com>
 <A0A637B4-B8D7-4219-80F3-5C566FE9F81F@dal.ca>
Message-ID: <84422936-8fe0-e4c7-a9f2-6836ac2720a3@gmail.com>


On 5/12/22 10:55, Daniel Kelley wrote:
>
>
>> On May 12, 2022, at 4:34 AM, Tomas Kalibera 
>> <tomas.kalibera at gmail.com> wrote:
>>
>> CAUTION: The Sender of this email is not from within Dalhousie.
>>
>> On 5/11/22 22:26, Daniel Kelley wrote:
>>> Thanks, Dirk. On my machine, the test suite takes 85 seconds. 
>>> Assuming the CRAN machines are about half as fast, eliminating all 
>>> the tests might get oce under the 10 minute limit.
>>
>> Out of curiosity, how did you find out it is because of a time limit? In
>> the outputs shown in your original post I only see a failed test on
>> Linux. If it takes only 85 seconds on your machine, using reasonable
>> amount of memory, but several times longer elsewhere, I would recommend
>> first looking into the cause of the slowdown.
>
> Tomas, thanks for your comment. ?Perhaps I ought to provide a bit more 
> information.
>
> I found out the time near the end of the email, where it said
>
> Flavor: r-devel-windows-x86_64
> Check: Overall checktime, Result: NOTE
> Overall checktime 13 min > 10 min
>
> The 85 seconds to which I refer is on my local machine (a laptop) and 
> it is only for the tests part. I don't think I saw time broken-down in 
> the links provided in the email I received (pasted below ... but note 
> that none of these links works for me today, although they worked 15 
> hours ago).

I see. On my check server for ucrt3, 1.7-2 also took ~13 minutes to 
check, so I assume this is reproducible and you should be able to debug 
it elsewhere if you arrange to get some timings. Or maybe you could 
deduce something from my timestamps:

May 11 04:12 00_pkg_src
May 11 04:16 oce
May 11 04:16 00install.out
May 11 04:20 oce-Ex.R
May 11 04:21 oce-Ex.Rout
May 11 04:21 oce-Ex.pdf
May 11 04:21 tests
May 11 04:25 oce-manual.pdf
May 11 04:25 Rdlatex.log
May 11 04:25 oce-manual.log
May 11 04:25 00check.log

and for tests:

May 11 04:21 testthat.R
May 11 04:21 startup.Rs
May 11 04:23 testthat
May 11 04:23 testthat.Rout

>
> Importantly, I am quite curious about your reference to a failed linux 
> test. ?I don't recall seeing any errors for my new version (1.7-3) on 
> the following links (from the original email I received from CRAN). ?I 
> did, however, see errors for the previous version (1.7-2); indeed 
> these were the reason why I was told to make a new CRAN release.

Sorry, I read the log incorrectly, that was for 1.7-2.

Best
Tomas

>
> Windows: 
> <https://win-builder.r-project.org/incoming_pretest/oce_1.7-3_20220511_192652/Windows/00check.log>
> Status: OK
>
> Debian: 
> <https://win-builder.r-project.org/incoming_pretest/oce_1.7-3_20220511_192652/Debian/00check.log>
> Status: OK
>
> More details are given in the directory:
> <https://win-builder.r-project.org/incoming_pretest/oce_1.7-3_20220511_192652/>
>
	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri May 13 09:50:01 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 13 May 2022 09:50:01 +0200
Subject: [R-pkg-devel] advice on a rejected package (I think,
 because time was 13min, in excess of 10min limit)
In-Reply-To: <84422936-8fe0-e4c7-a9f2-6836ac2720a3@gmail.com>
References: <70B31DC6-30D7-46DC-B7AA-44280CDFB191@dal.ca>
 <25212.3617.224872.419188@rob.eddelbuettel.com>
 <E9DF1B2E-2089-4891-8D44-EBDA343ED0B1@dal.ca>
 <0cdb625e-d56c-75a7-660e-1ada15c027c5@gmail.com>
 <A0A637B4-B8D7-4219-80F3-5C566FE9F81F@dal.ca>
 <84422936-8fe0-e4c7-a9f2-6836ac2720a3@gmail.com>
Message-ID: <83508aef-4382-da66-ef75-b7ed2a35798f@statistik.tu-dortmund.de>

Actually, oce is one of the very few packages where you cannot do much 
to reduce this:

* checking R code for possible problems ... [177s] OK
* checking examples ... [128s] OK
* checking tests ... [70s] OK
* checking re-building of vignette outputs ... [52s] OK

This shows the runtime checks only consume 4 minutes, but the package is 
rather complex and needs a lot of time in the other parts of the checks.

Therefore reverse dependency checks have been triggered on CRAN.

Best,
Uwe Ligges




On 12.05.2022 11:34, Tomas Kalibera wrote:
> 
> On 5/12/22 10:55, Daniel Kelley wrote:
>>
>>
>>> On May 12, 2022, at 4:34 AM, Tomas Kalibera
>>> <tomas.kalibera at gmail.com> wrote:
>>>
>>> CAUTION: The Sender of this email is not from within Dalhousie.
>>>
>>> On 5/11/22 22:26, Daniel Kelley wrote:
>>>> Thanks, Dirk. On my machine, the test suite takes 85 seconds.
>>>> Assuming the CRAN machines are about half as fast, eliminating all
>>>> the tests might get oce under the 10 minute limit.
>>>
>>> Out of curiosity, how did you find out it is because of a time limit? In
>>> the outputs shown in your original post I only see a failed test on
>>> Linux. If it takes only 85 seconds on your machine, using reasonable
>>> amount of memory, but several times longer elsewhere, I would recommend
>>> first looking into the cause of the slowdown.
>>
>> Tomas, thanks for your comment. ?Perhaps I ought to provide a bit more
>> information.
>>
>> I found out the time near the end of the email, where it said
>>
>> Flavor: r-devel-windows-x86_64
>> Check: Overall checktime, Result: NOTE
>> Overall checktime 13 min > 10 min
>>
>> The 85 seconds to which I refer is on my local machine (a laptop) and
>> it is only for the tests part. I don't think I saw time broken-down in
>> the links provided in the email I received (pasted below ... but note
>> that none of these links works for me today, although they worked 15
>> hours ago).
> 
> I see. On my check server for ucrt3, 1.7-2 also took ~13 minutes to
> check, so I assume this is reproducible and you should be able to debug
> it elsewhere if you arrange to get some timings. Or maybe you could
> deduce something from my timestamps:
> 
> May 11 04:12 00_pkg_src
> May 11 04:16 oce
> May 11 04:16 00install.out
> May 11 04:20 oce-Ex.R
> May 11 04:21 oce-Ex.Rout
> May 11 04:21 oce-Ex.pdf
> May 11 04:21 tests
> May 11 04:25 oce-manual.pdf
> May 11 04:25 Rdlatex.log
> May 11 04:25 oce-manual.log
> May 11 04:25 00check.log
> 
> and for tests:
> 
> May 11 04:21 testthat.R
> May 11 04:21 startup.Rs
> May 11 04:23 testthat
> May 11 04:23 testthat.Rout
> 
>>
>> Importantly, I am quite curious about your reference to a failed linux
>> test. ?I don't recall seeing any errors for my new version (1.7-3) on
>> the following links (from the original email I received from CRAN). ?I
>> did, however, see errors for the previous version (1.7-2); indeed
>> these were the reason why I was told to make a new CRAN release.
> 
> Sorry, I read the log incorrectly, that was for 1.7-2.
> 
> Best
> Tomas
> 
>>
>> Windows:
>> <https://win-builder.r-project.org/incoming_pretest/oce_1.7-3_20220511_192652/Windows/00check.log>
>> Status: OK
>>
>> Debian:
>> <https://win-builder.r-project.org/incoming_pretest/oce_1.7-3_20220511_192652/Debian/00check.log>
>> Status: OK
>>
>> More details are given in the directory:
>> <https://win-builder.r-project.org/incoming_pretest/oce_1.7-3_20220511_192652/>
>>
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m|ke @end|ng |rom b|ke@ctu@ry@com  Fri May 13 16:30:25 2022
From: m|ke @end|ng |rom b|ke@ctu@ry@com (Michael Barr)
Date: Fri, 13 May 2022 14:30:25 +0000
Subject: [R-pkg-devel] Pending folder but no email
Message-ID: <19663BE8-D992-4A06-8CEE-1B9E7EA7CFB3@bikeactuary.com>

Hi - I see my ?new? (previously archived) package (repoRter.nih) in *pending* but received no email as this would indicate I should have. Who would I inquire with or alert to this? Maybe I can already accomplish that via this list.

Thanks
Mike

--
Michael Barr
www.bikeactuary.com

[https://docs.google.com/uc?export=download&id=11FiqE8XIqL365lBzJTLzJpFLPXoUanrw&revid=0Bz8uahbNFwpGZjFvZ1AvcFFSTkM3SFZKanhDdzFNOTJUb1ZZPQ]

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri May 13 16:53:52 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 13 May 2022 10:53:52 -0400
Subject: [R-pkg-devel] Pending folder but no email
In-Reply-To: <19663BE8-D992-4A06-8CEE-1B9E7EA7CFB3@bikeactuary.com>
References: <19663BE8-D992-4A06-8CEE-1B9E7EA7CFB3@bikeactuary.com>
Message-ID: <f3e49004-8828-27e2-75cb-f126b5ce8e6f@gmail.com>

On 13/05/2022 10:30 a.m., Michael Barr wrote:
> Hi - I see my ?new? (previously archived) package (repoRter.nih) in *pending* but received no email as this would indicate I should have. Who would I inquire with or alert to this? Maybe I can already accomplish that via this list.

You could enquire to CRAN at r-project.org, but there's no need to alert 
anyone:  they're the ones who have put it in the pending status.

I believe what that means is that it has been set aside for a manual 
review.  One possibility is that someone will check that you have 
addressed whatever concerns led to it being archived.

Duncan Murdoch


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri May 13 16:54:42 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 13 May 2022 16:54:42 +0200
Subject: [R-pkg-devel] Pending folder but no email
In-Reply-To: <19663BE8-D992-4A06-8CEE-1B9E7EA7CFB3@bikeactuary.com>
References: <19663BE8-D992-4A06-8CEE-1B9E7EA7CFB3@bikeactuary.com>
Message-ID: <c15687c3-80c7-fcf9-5a36-8d06eace345a@statistik.tu-dortmund.de>

It is pending a manual inspection by a CRAN team member.
So please be patient, you will receive a message once inspected.

Best,
Uwe Ligges

On 13.05.2022 16:30, Michael Barr wrote:
> Hi - I see my ?new? (previously archived) package (repoRter.nih) in *pending* but received no email as this would indicate I should have. Who would I inquire with or alert to this? Maybe I can already accomplish that via this list.
> 
> Thanks
> Mike
> 
> --
> Michael Barr
> www.bikeactuary.com
> 
> [https://docs.google.com/uc?export=download&id=11FiqE8XIqL365lBzJTLzJpFLPXoUanrw&revid=0Bz8uahbNFwpGZjFvZ1AvcFFSTkM3SFZKanhDdzFNOTJUb1ZZPQ]
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From bbo|ker @end|ng |rom gm@||@com  Fri May 13 17:18:23 2022
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Fri, 13 May 2022 11:18:23 -0400
Subject: [R-pkg-devel] Pending folder but no email
In-Reply-To: <c15687c3-80c7-fcf9-5a36-8d06eace345a@statistik.tu-dortmund.de>
References: <19663BE8-D992-4A06-8CEE-1B9E7EA7CFB3@bikeactuary.com>
 <c15687c3-80c7-fcf9-5a36-8d06eace345a@statistik.tu-dortmund.de>
Message-ID: <6197b921-77ff-e4d8-e6cf-65e50beb1ce9@gmail.com>

   I wasn't able to follow your link, but I think you might be referring to

https://r-hub.github.io/cransays/articles/dashboard.html#cran-review-workflow

   which, I think, is incorrect.  It says

 >  pending: the CRAN maintainers are waiting for an action on your 
side. You should check your emails!

   In contrast ?foghorn::cran_incoming says

 > pending: a CRAN team member has to do a closer inspection and needs 
more time

   This confusion has come up before.

https://stat.ethz.ch/pipermail/r-package-devel/2020q4/006151.html
https://github.com/fmichonneau/foghorn/issues/42

This difference was clarified by Uwe Ligges here:

https://stat.ethz.ch/pipermail/r-package-devel/2019q1/003631.html

   cheers
     Ben Bolker

On 2022-05-13 10:54 a.m., Uwe Ligges wrote:
> It is pending a manual inspection by a CRAN team member.
> So please be patient, you will receive a message once inspected.
> 
> Best,
> Uwe Ligges
> 
> On 13.05.2022 16:30, Michael Barr wrote:
>> Hi - I see my ?new? (previously archived) package (repoRter.nih) in 
>> *pending* but received no email as this would indicate I should have. 
>> Who would I inquire with or alert to this? Maybe I can already 
>> accomplish that via this list.
>>
>> Thanks
>> Mike
>>
>> -- 
>> Michael Barr
>> www.bikeactuary.com
>>
>> [https://docs.google.com/uc?export=download&id=11FiqE8XIqL365lBzJTLzJpFLPXoUanrw&revid=0Bz8uahbNFwpGZjFvZ1AvcFFSTkM3SFZKanhDdzFNOTJUb1ZZPQ] 
>>
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Director, School of Computational Science and Engineering
(Acting) Graduate chair, Mathematics & Statistics


From m|ke @end|ng |rom b|ke@ctu@ry@com  Fri May 13 17:22:03 2022
From: m|ke @end|ng |rom b|ke@ctu@ry@com (Michael Barr)
Date: Fri, 13 May 2022 15:22:03 +0000
Subject: [R-pkg-devel] Pending folder but no email
In-Reply-To: <6197b921-77ff-e4d8-e6cf-65e50beb1ce9@gmail.com>
References: <19663BE8-D992-4A06-8CEE-1B9E7EA7CFB3@bikeactuary.com>
 <c15687c3-80c7-fcf9-5a36-8d06eace345a@statistik.tu-dortmund.de>
 <6197b921-77ff-e4d8-e6cf-65e50beb1ce9@gmail.com>
Message-ID: <906ECAB9-1271-4D12-A27E-CCFBACA34C43@bikeactuary.com>

Agreed - thanks Ben. The first link indicates I need to do something as explained in an email I don?t have.

[https://docs.google.com/uc?export=download&id=11FiqE8XIqL365lBzJTLzJpFLPXoUanrw&revid=0Bz8uahbNFwpGZjFvZ1AvcFFSTkM3SFZKanhDdzFNOTJUb1ZZPQ]

On May 13, 2022, at 10:18 AM, Ben Bolker <bbolker at gmail.com> wrote:

?  I wasn't able to follow your link, but I think you might be referring to

https://r-hub.github.io/cransays/articles/dashboard.html#cran-review-workflow

 which, I think, is incorrect.  It says

>  pending: the CRAN maintainers are waiting for an action on your side. You should check your emails!

 In contrast ?foghorn::cran_incoming says

> pending: a CRAN team member has to do a closer inspection and needs more time

 This confusion has come up before.

https://stat.ethz.ch/pipermail/r-package-devel/2020q4/006151.html
https://github.com/fmichonneau/foghorn/issues/42

This difference was clarified by Uwe Ligges here:

https://stat.ethz.ch/pipermail/r-package-devel/2019q1/003631.html

 cheers
   Ben Bolker

On 2022-05-13 10:54 a.m., Uwe Ligges wrote:
It is pending a manual inspection by a CRAN team member.
So please be patient, you will receive a message once inspected.
Best,
Uwe Ligges
On 13.05.2022 16:30, Michael Barr wrote:
Hi - I see my ?new? (previously archived) package (repoRter.nih) in *pending* but received no email as this would indicate I should have. Who would I inquire with or alert to this? Maybe I can already accomplish that via this list.

Thanks
Mike

--
Michael Barr
www.bikeactuary.com

[https://docs.google.com/uc?export=download&id=11FiqE8XIqL365lBzJTLzJpFLPXoUanrw&revid=0Bz8uahbNFwpGZjFvZ1AvcFFSTkM3SFZKanhDdzFNOTJUb1ZZPQ]

    [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel
______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

--
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Director, School of Computational Science and Engineering
(Acting) Graduate chair, Mathematics & Statistics

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From vw@|ter1 @end|ng |rom penn@t@tehe@|th@p@u@edu  Mon May 16 19:53:45 2022
From: vw@|ter1 @end|ng |rom penn@t@tehe@|th@p@u@edu (Walter, Vonn)
Date: Mon, 16 May 2022 17:53:45 +0000
Subject: [R-pkg-devel] R package NOTE: \item in \describe must have
 non-empty label
Message-ID: <MWHPR22MB0846E431D42E4DDDF1E53F31D8CF9@MWHPR22MB0846.namprd22.prod.outlook.com>

Hi Everyone,

The /data directory of my R package includes three objects, each of which has its own documentation in the /R and /man directories.  Running R CMD check -as-cran produces the NOTE "\item in \describe must have non-empty label." I get this NOTE for each of these three objects.  The first two objects are numeric matrices (luadSubset and luscSubset).  The documentation for each matrix includes a \describe field (see below for luadSubset... luscSubset is essentially the same), but I do not have an \item inside \describe because the object is not a data frame.  This *seems* correct because distinct columns correspond to data from different subjects, not different variables.  However, I could be wrong.  Here's some of the documentation from luadSubset.R:

#' @format A numeric matrix of quantitative DNA copy number values with 3475 rows and 65 columns.
#'   \describe{
#'                            Rows are indexed by genes, and columns are indexed by samples.  The entries are on the log
#'            ratio scale and were produced by the GISTIC pipeline.
#'                            }
#'
#' @source \url{https://gdac.broadinstitute.org/}

The third object is a list (pD), and inside the \describe field I have \item fields for list item, as shown below.  Here's some of the documentation from pD.R:

#' @format A list containing three components for a common set of genes:
#' \describe{
#'   \item{X}{DNA copy number data for lung adenocarcinoma}
#'   \item{Y}{DNA copy number data for lung squamous cell carcinoma}
#'   \item{posDT}{Gene position data}
#' }

Any help would be greatly appreciated.

Best,

Vonn


	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Mon May 16 19:58:13 2022
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Mon, 16 May 2022 13:58:13 -0400
Subject: [R-pkg-devel] R package NOTE: \item in \describe must have
 non-empty label
In-Reply-To: <MWHPR22MB0846E431D42E4DDDF1E53F31D8CF9@MWHPR22MB0846.namprd22.prod.outlook.com>
References: <MWHPR22MB0846E431D42E4DDDF1E53F31D8CF9@MWHPR22MB0846.namprd22.prod.outlook.com>
Message-ID: <224c6855-024b-4f76-bf37-08aa8ce9497e@gmail.com>

\describe is not a general macro for describing the data set, it's a 
macro for a specific kind of list:

https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Lists-and-tables

The \describe command is similar to \itemize but allows initial labels 
to be specified. Each \item takes two arguments, the label and the body 
of the item, in exactly the same way as an argument or value \item. 
\describe commands are mapped to <DL> lists in HTML and \description 
lists in LaTeX.

   I *think* that if you don't want to give an itemized list of the rows 
and columns you should just delete the \describe{ (and the matching }) 
entirely.

   If you don't have a local r-devel you can test your changes on 
win-builder or one of the r-hub platforms ...



On 2022-05-16 1:53 p.m., Walter, Vonn wrote:
> Hi Everyone,
> 
> The /data directory of my R package includes three objects, each of which has its own documentation in the /R and /man directories.  Running R CMD check -as-cran produces the NOTE "\item in \describe must have non-empty label." I get this NOTE for each of these three objects.  The first two objects are numeric matrices (luadSubset and luscSubset).  The documentation for each matrix includes a \describe field (see below for luadSubset... luscSubset is essentially the same), but I do not have an \item inside \describe because the object is not a data frame.  This *seems* correct because distinct columns correspond to data from different subjects, not different variables.  However, I could be wrong.  Here's some of the documentation from luadSubset.R:
> 
> #' @format A numeric matrix of quantitative DNA copy number values with 3475 rows and 65 columns.
> #'   \describe{
> #'                            Rows are indexed by genes, and columns are indexed by samples.  The entries are on the log
> #'            ratio scale and were produced by the GISTIC pipeline.
> #'                            }
> #'
> #' @source \url{https://gdac.broadinstitute.org/}
> 
> The third object is a list (pD), and inside the \describe field I have \item fields for list item, as shown below.  Here's some of the documentation from pD.R:
> 
> #' @format A list containing three components for a common set of genes:
> #' \describe{
> #'   \item{X}{DNA copy number data for lung adenocarcinoma}
> #'   \item{Y}{DNA copy number data for lung squamous cell carcinoma}
> #'   \item{posDT}{Gene position data}
> #' }
> 
> Any help would be greatly appreciated.
> 
> Best,
> 
> Vonn
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Director, School of Computational Science and Engineering
(Acting) Graduate chair, Mathematics & Statistics


From jw||ey@p@ych @end|ng |rom gm@||@com  Wed May 18 04:06:03 2022
From: jw||ey@p@ych @end|ng |rom gm@||@com (Joshua Wiley)
Date: Wed, 18 May 2022 12:06:03 +1000
Subject: [R-pkg-devel] DOI / URL issues in package vignettes
Message-ID: <CANz9Z_JO=yVqm9dC1oO16232i6Hy05rd9WSP+Bdhd2dFLfuY5A@mail.gmail.com>

Hi All,

I've been stuck on how best to include DOIs in R package vignettes.
I write the vignettes as R markdown files with knitr as the vignette
builder, which all goes fine.

I want to include references to relevant literature and use DOI links to
make accessing the articles easier. For example:

https://doi.org/10.1037/met0000434

This is written as plain text in the .Rmd and ends up as a URL in the HTML
file generated.
It works fine for me across Chrome, Edge, and Safari.

However,

curl -I -L https://doi.org/10.1037/met0000434

gives the below on my system, which (I think?) means you get the expected
redirect for a DOI and then a 403 forbidden error.  On the
win-builder.r-project.org service (which is fantastic) I get a status 400
bad request.

For other DOIs, I am regularly getting a 503 service unavailable status
from both curl on my machine and winbuilder, but working fine in browser
(e.g., for:   https://doi.org/10.1002/sim.7171).

Is there a general recommendation for how to proceed?  I could just leave
out the DOIs / URLs and give the rest of the journal article citation?

Many thanks for any suggestions,

Josh


curl results on my system:

HTTP/2 302
date: Wed, 18 May 2022 01:53:47 GMT
content-type: text/html;charset=utf-8
content-length: 189
location: http://doi.apa.org/getdoi.cfm?doi=10.1037/met0000434
vary: Accept
expires: Wed, 18 May 2022 02:30:38 GMT
permissions-policy: interest-cohort=(),browsing-topics=()
cf-cache-status: DYNAMIC
expect-ct: max-age=604800, report-uri="
https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"
report-to: {"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com
\/report\/v3?s=AAEQKLp2NUIcaOqEhR0j05L49qqul40oBULIoJjX%2BE4DStgV6T7kO9IEw6Cvyi0YIpi00KhxEU6U4RVAmcL%2Bk99SSiUFi8C0zhbNVtMiP8fkAJ5hxjD45b0%3D"}],"group":"cf-nel","max_age":604800}
nel: {"success_fraction":0,"report_to":"cf-nel","max_age":604800}
strict-transport-security: max-age=31536000; includeSubDomains; preload
server: cloudflare
cf-ray: 70d0f611ed9117c8-MEL
alt-svc: h3=":443"; ma=86400, h3-29=":443"; ma=86400

HTTP/1.1 403 Forbidden
Content-Type: text/html
Cache-Control: no-cache, no-store
Connection: close
Content-Length: 831
X-Iinfo: 12-17360972-0 NNNN RT(1652838827325 8) q(0 -1 -1 -1) r(0 -1)
B15(14,0,0) U6
Set-Cookie:
visid_incap_2687304=x5XsfaekQlWXbrGsMojRaqtRhGIAAAAAQUIPAAAAAAAezC3HdC8AzCh9mM9hYUTR;
expires=Wed, 17 May 2023 13:30:24 GMT; HttpOnly; path=/; Domain=.apa.org
Set-Cookie:
incap_ses_321_2687304=9FtWe+A0czc6K/rZlGx0BKtRhGIAAAAAhdbt7joIFE3lh9nZHhJSjQ==;
path=/; Domain=.apa.org

win-builder result:

  URL: https://doi.org/10.1037/met0000434
    From: inst/doc/mixed-effects-marginaleffects.html
    Status: 400
    Message: Bad Request

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Wed May 18 12:56:34 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 18 May 2022 13:56:34 +0300
Subject: [R-pkg-devel] DOI / URL issues in package vignettes
In-Reply-To: <CANz9Z_JO=yVqm9dC1oO16232i6Hy05rd9WSP+Bdhd2dFLfuY5A@mail.gmail.com>
References: <CANz9Z_JO=yVqm9dC1oO16232i6Hy05rd9WSP+Bdhd2dFLfuY5A@mail.gmail.com>
Message-ID: <20220518135634.37738a36@arachnoid>

? Wed, 18 May 2022 12:06:03 +1000
Joshua Wiley <jwiley.psych at gmail.com> ?????:

> curl -I -L https://doi.org/10.1037/met0000434
> 
> gives the below on my system, which (I think?) means you get the
> expected redirect for a DOI and then a 403 forbidden error.  On the
> win-builder.r-project.org service (which is fantastic) I get a status
> 400 bad request.
> 
> For other DOIs, I am regularly getting a 503 service unavailable
> status from both curl on my machine and winbuilder, but working fine
> in browser (e.g., for:   https://doi.org/10.1002/sim.7171).

Many journals employ overzealous anti-robot protection systems that
discriminate against URL checks performed by R, but as long as the DOI
itself is correct, the package is likely to be accepted by CRAN despite
the NOTE resulting from the failing check. You can mention it in the
submission comment to be sure.

-- 
Best regards,
Ivan


From bbo|ker @end|ng |rom gm@||@com  Wed May 18 14:02:04 2022
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Wed, 18 May 2022 08:02:04 -0400
Subject: [R-pkg-devel] DOI / URL issues in package vignettes
In-Reply-To: <20220518135634.37738a36@arachnoid>
References: <CANz9Z_JO=yVqm9dC1oO16232i6Hy05rd9WSP+Bdhd2dFLfuY5A@mail.gmail.com>
 <20220518135634.37738a36@arachnoid>
Message-ID: <0d69de2d-d68e-e92a-7924-f4b2a1eef529@gmail.com>



On 2022-05-18 6:56 a.m., Ivan Krylov wrote:
> ? Wed, 18 May 2022 12:06:03 +1000
> Joshua Wiley <jwiley.psych at gmail.com> ?????:
> 
>> curl -I -L https://doi.org/10.1037/met0000434
>>
>> gives the below on my system, which (I think?) means you get the
>> expected redirect for a DOI and then a 403 forbidden error.  On the
>> win-builder.r-project.org service (which is fantastic) I get a status
>> 400 bad request.
>>
>> For other DOIs, I am regularly getting a 503 service unavailable
>> status from both curl on my machine and winbuilder, but working fine
>> in browser (e.g., for:   https://doi.org/10.1002/sim.7171).
> 
> Many journals employ overzealous anti-robot protection systems that
> discriminate against URL checks performed by R, but as long as the DOI
> itself is correct, the package is likely to be accepted by CRAN despite
> the NOTE resulting from the failing check. You can mention it in the
> submission comment to be sure.

   And there was a previous discussion on the list here:

https://hypatia.math.ethz.ch/pipermail/r-package-devel/2022q2/008042.html


From jw||ey@p@ych @end|ng |rom gm@||@com  Wed May 18 21:36:53 2022
From: jw||ey@p@ych @end|ng |rom gm@||@com (Joshua Wiley)
Date: Thu, 19 May 2022 05:36:53 +1000
Subject: [R-pkg-devel] DOI / URL issues in package vignettes
In-Reply-To: <0d69de2d-d68e-e92a-7924-f4b2a1eef529@gmail.com>
References: <CANz9Z_JO=yVqm9dC1oO16232i6Hy05rd9WSP+Bdhd2dFLfuY5A@mail.gmail.com>
 <20220518135634.37738a36@arachnoid>
 <0d69de2d-d68e-e92a-7924-f4b2a1eef529@gmail.com>
Message-ID: <CANz9Z_K=maKqX8r6pk29wyxzaDDNm23fUez6fZ77dneEM1YXmw@mail.gmail.com>

Thanks & my apologies for missing this. I got caught up reading how CRAN
checks URLs, HTTP status codes, etc. and forgot to search before asking.

On Wed, May 18, 2022 at 10:02 PM Ben Bolker <bbolker at gmail.com> wrote:

>
>
> On 2022-05-18 6:56 a.m., Ivan Krylov wrote:
> > ? Wed, 18 May 2022 12:06:03 +1000
> > Joshua Wiley <jwiley.psych at gmail.com> ?????:
> >
> >> curl -I -L https://doi.org/10.1037/met0000434
> >>
> >> gives the below on my system, which (I think?) means you get the
> >> expected redirect for a DOI and then a 403 forbidden error.  On the
> >> win-builder.r-project.org service (which is fantastic) I get a status
> >> 400 bad request.
> >>
> >> For other DOIs, I am regularly getting a 503 service unavailable
> >> status from both curl on my machine and winbuilder, but working fine
> >> in browser (e.g., for:   https://doi.org/10.1002/sim.7171).
> >
> > Many journals employ overzealous anti-robot protection systems that
> > discriminate against URL checks performed by R, but as long as the DOI
> > itself is correct, the package is likely to be accepted by CRAN despite
> > the NOTE resulting from the failing check. You can mention it in the
> > submission comment to be sure.
>
>    And there was a previous discussion on the list here:
>
> https://hypatia.math.ethz.ch/pipermail/r-package-devel/2022q2/008042.html
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From je@n-m@tth|eu@monnet @end|ng |rom |nr@e@|r  Mon May 23 10:48:48 2022
From: je@n-m@tth|eu@monnet @end|ng |rom |nr@e@|r (Jean-Matthieu Monnet)
Date: Mon, 23 May 2022 10:48:48 +0200
Subject: [R-pkg-devel] Excessive time of first example to be checked
Message-ID: <73665695-7fe7-c3b1-1822-77fc463862f7@inrae.fr>

I was asked by CRAN to fix NOTEs in the new version of the package lidaRtRee

On Debian 
(https://win-builder.r-project.org/incoming_pretest/lidaRtRee_4.0.0_20220520_163049/Debian/00check.log) 
I have one note related to the maintainer :

# -----
* checking CRAN incoming feasibility ... NOTE
Maintainer: ?Jean-Matthieu Monnet <jean-matthieu.monnet at inrae.fr>?
# ------

On Windows I also have another NOTE 
(https://win-builder.r-project.org/incoming_pretest/lidaRtRee_4.0.0_20220520_163049/Windows/00check.log) 
due to to the running time of the first example, which is my main concern.

# ------
* checking examples ... [78s] NOTE
Examples with CPU (user + system) or elapsed time > 10s
              user system elapsed
aba_metrics 11.79   0.27   12.05
# ------

I do not have access to a windows machine for testing. On my machine 
(Ubuntu 20.04) the example runs in ~ 4 sec after R startup, but in less 
than 2 sec on the following calls (see details below). I am not sure if 
  the excessive running of this example (which is the first to be 
tested) is due to library loading. If it is the case, how can I fix it:
- create a "virtual" example which purpose would be to just load 
libraries, hoping that its running time would be less that 10 sec.
- load libraries at start up using a different way.
- ... ?

Here is a link to the package tar.gz 
(https://filesender.renater.fr/?s=download&token=163ca058-13ba-4cf5-8f4f-3514abd03ff8) 
and below the code I run on my machine to estimate the example time.


# --------------
# install package
# install.packages(file.choose(), repos=NULL)
#
# --------------
# running time at first call
system.time(example(aba_metrics, package = "lidaRtRee"))
# Le chargement a n?cessit? le package : lidR (loading required)
# lidR 4.0.1 using 6 threads. Help on <gis.stackexchange.com>. Bug 
report on <github.com/r-lidar/lidR>.
#
# [...]
# utilisateur     syst?me      ?coul?
# 3.867       0.095       3.742
#
# --------------
# running time at next call
system.time(example(aba_metrics, package = "lidaRtRee"))
#
# [...]
# utilisateur     syst?me      ?coul?
# 0.182       0.000       0.082

Thank you very much for your answers.


-- 
Jean-Matthieu Monnet
UR LESSEM - INRAE Grenoble


From jw||ey@p@ych @end|ng |rom gm@||@com  Mon May 23 12:04:47 2022
From: jw||ey@p@ych @end|ng |rom gm@||@com (Joshua Wiley)
Date: Mon, 23 May 2022 20:04:47 +1000
Subject: [R-pkg-devel] Excessive time of first example to be checked
In-Reply-To: <73665695-7fe7-c3b1-1822-77fc463862f7@inrae.fr>
References: <73665695-7fe7-c3b1-1822-77fc463862f7@inrae.fr>
Message-ID: <CANz9Z_+uekChaWy8-gARwAX8DD9xC7qVOWYU+A05OVuM+L_Fhg@mail.gmail.com>

Hi Jean-Matthieu,

Have you timed how long it takes to load your package (or all the packages
loaded in the example)?  Most packages load quite rapidly, if yours is
taking more than 2-3 seconds, perhaps you could explore what is taking the
time?

Another thought: are there parts of the example(s) you could mark as
\dontrun{}?

Lastly, https://win-builder.r-project.org/
is a service that builds on Windows and will show notes etc. so if you
think you have it solved, you can send there and see if it passes without
notes.

Cheers,

Josh


On Mon, May 23, 2022 at 7:34 PM Jean-Matthieu Monnet <
jean-matthieu.monnet at inrae.fr> wrote:

> I was asked by CRAN to fix NOTEs in the new version of the package
> lidaRtRee
>
> On Debian
> (
> https://win-builder.r-project.org/incoming_pretest/lidaRtRee_4.0.0_20220520_163049/Debian/00check.log)
>
> I have one note related to the maintainer :
>
> # -----
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?Jean-Matthieu Monnet <jean-matthieu.monnet at inrae.fr>?
> # ------
>
> On Windows I also have another NOTE
> (
> https://win-builder.r-project.org/incoming_pretest/lidaRtRee_4.0.0_20220520_163049/Windows/00check.log)
>
> due to to the running time of the first example, which is my main concern.
>
> # ------
> * checking examples ... [78s] NOTE
> Examples with CPU (user + system) or elapsed time > 10s
>               user system elapsed
> aba_metrics 11.79   0.27   12.05
> # ------
>
> I do not have access to a windows machine for testing. On my machine
> (Ubuntu 20.04) the example runs in ~ 4 sec after R startup, but in less
> than 2 sec on the following calls (see details below). I am not sure if
>   the excessive running of this example (which is the first to be
> tested) is due to library loading. If it is the case, how can I fix it:
> - create a "virtual" example which purpose would be to just load
> libraries, hoping that its running time would be less that 10 sec.
> - load libraries at start up using a different way.
> - ... ?
>
> Here is a link to the package tar.gz
> (
> https://filesender.renater.fr/?s=download&token=163ca058-13ba-4cf5-8f4f-3514abd03ff8)
>
> and below the code I run on my machine to estimate the example time.
>
>
> # --------------
> # install package
> # install.packages(file.choose(), repos=NULL)
> #
> # --------------
> # running time at first call
> system.time(example(aba_metrics, package = "lidaRtRee"))
> # Le chargement a n?cessit? le package : lidR (loading required)
> # lidR 4.0.1 using 6 threads. Help on <gis.stackexchange.com>. Bug
> report on <github.com/r-lidar/lidR>.
> #
> # [...]
> # utilisateur     syst?me      ?coul?
> # 3.867       0.095       3.742
> #
> # --------------
> # running time at next call
> system.time(example(aba_metrics, package = "lidaRtRee"))
> #
> # [...]
> # utilisateur     syst?me      ?coul?
> # 0.182       0.000       0.082
>
> Thank you very much for your answers.
>
>
> --
> Jean-Matthieu Monnet
> UR LESSEM - INRAE Grenoble
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From gu|do@|ber @end|ng |rom gm@||@com  Mon May 23 11:56:57 2022
From: gu|do@|ber @end|ng |rom gm@||@com (Guido Moreira)
Date: Mon, 23 May 2022 10:56:57 +0100
Subject: [R-pkg-devel] Excessive time of first example to be checked
In-Reply-To: <73665695-7fe7-c3b1-1822-77fc463862f7@inrae.fr>
References: <73665695-7fe7-c3b1-1822-77fc463862f7@inrae.fr>
Message-ID: <CAG2v_MeGVWRS4=pxK9fGvWOHBHYGpoNn3kNkGUmMtR777Ws8Nw@mail.gmail.com>

There's an useful tool for testing in Windows.
Check out https://win-builder.r-project.org/ where you can upload your
tarball and have it built on Windows and give your R CMD check --as-cran
results. Also, you can use github actions to automatically run R CMD check
--as-cran when you push to your repo.

This may not help you directly root out your problem, but it should be
quicker to get check results than uploading to CRAN and using their
resources.

Cheers!

Jean-Matthieu Monnet <jean-matthieu.monnet at inrae.fr> escreveu no dia
segunda, 23/05/2022 ?(s) 10:34:

> I was asked by CRAN to fix NOTEs in the new version of the package
> lidaRtRee
>
> On Debian
> (
> https://win-builder.r-project.org/incoming_pretest/lidaRtRee_4.0.0_20220520_163049/Debian/00check.log)
>
> I have one note related to the maintainer :
>
> # -----
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?Jean-Matthieu Monnet <jean-matthieu.monnet at inrae.fr>?
> # ------
>
> On Windows I also have another NOTE
> (
> https://win-builder.r-project.org/incoming_pretest/lidaRtRee_4.0.0_20220520_163049/Windows/00check.log)
>
> due to to the running time of the first example, which is my main concern.
>
> # ------
> * checking examples ... [78s] NOTE
> Examples with CPU (user + system) or elapsed time > 10s
>               user system elapsed
> aba_metrics 11.79   0.27   12.05
> # ------
>
> I do not have access to a windows machine for testing. On my machine
> (Ubuntu 20.04) the example runs in ~ 4 sec after R startup, but in less
> than 2 sec on the following calls (see details below). I am not sure if
>   the excessive running of this example (which is the first to be
> tested) is due to library loading. If it is the case, how can I fix it:
> - create a "virtual" example which purpose would be to just load
> libraries, hoping that its running time would be less that 10 sec.
> - load libraries at start up using a different way.
> - ... ?
>
> Here is a link to the package tar.gz
> (
> https://filesender.renater.fr/?s=download&token=163ca058-13ba-4cf5-8f4f-3514abd03ff8)
>
> and below the code I run on my machine to estimate the example time.
>
>
> # --------------
> # install package
> # install.packages(file.choose(), repos=NULL)
> #
> # --------------
> # running time at first call
> system.time(example(aba_metrics, package = "lidaRtRee"))
> # Le chargement a n?cessit? le package : lidR (loading required)
> # lidR 4.0.1 using 6 threads. Help on <gis.stackexchange.com>. Bug
> report on <github.com/r-lidar/lidR>.
> #
> # [...]
> # utilisateur     syst?me      ?coul?
> # 3.867       0.095       3.742
> #
> # --------------
> # running time at next call
> system.time(example(aba_metrics, package = "lidaRtRee"))
> #
> # [...]
> # utilisateur     syst?me      ?coul?
> # 0.182       0.000       0.082
>
> Thank you very much for your answers.
>
>
> --
> Jean-Matthieu Monnet
> UR LESSEM - INRAE Grenoble
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From M@ty@@@MESZAROS @end|ng |rom ec@europ@@eu  Mon May 23 23:15:43 2022
From: M@ty@@@MESZAROS @end|ng |rom ec@europ@@eu (MESZAROS Matyas Tamas)
Date: Mon, 23 May 2022 21:15:43 +0000
Subject: [R-pkg-devel] CRAN check warning "MemoryChip - Alias wurde nicht
 gefunden."
Message-ID: <383632b433614feda9147e6b479605f2@ec.europa.eu>

Hello everyone,

Do anyone knows what this warning means?
https://win-builder.r-project.org/incoming_pretest/restatapi_0.13.2_20220523_223118/Windows/00check.log
In the code the word MemoryChip cannot be found, so I do not know where to start.
If I run the check locally with  devtools::check(args = c('--as-cran','--run-donttest')) on Ubuntu linux with R4.2.0 I have no warnings, and the check on the r-hub builder as well provide no such result.
https://builder.r-hub.io/status/restatapi_0.13.2.tar.gz-a4041877919d487897b14c4d8c1a3b7c

Any advice would be helpful.

Regards,

Matyas

	[[alternative HTML version deleted]]


From @teve@the@b@ye@|@n @end|ng |rom gm@||@com  Tue May 24 23:57:53 2022
From: @teve@the@b@ye@|@n @end|ng |rom gm@||@com (Steven Scott)
Date: Tue, 24 May 2022 14:57:53 -0700
Subject: [R-pkg-devel] How to structure LICENSE for multiple licenses?
Message-ID: <CAJqTW47tV10WyhjDL-UR=LoHg5tdJTgbNt6AUHRp=YWk6xUHPA@mail.gmail.com>

The current version of 'bsts' is released under the LGPL.  I want to add
the MIT license as an alternative.

Right now the DESCRIPTION file contains the line
               License: LGPL-2.1 | file LICENSE
and the file LICENSE contains a copy of the LGPL.

To add the MIT license I believe I need to modify it to be
         License: LGPL-2.1 | MIT + file LICENSE | file LICENSE

The syntax MIT + file LICENSE is because the MIT license is a template, and
I need to fill in the template parameters in the LICENSE file.

What's the right way to structure the LICENSE file to contain two
licenses?  Should I have two files (MIT.LICENSE, LGPL.LICENSE)?  Can I just
append the MIT license to the bottom of the LICENSE file?

Thank you for reading.

	[[alternative HTML version deleted]]


From proebuck1701 @end|ng |rom gm@||@com  Wed May 25 02:21:53 2022
From: proebuck1701 @end|ng |rom gm@||@com (P Roebuck)
Date: Tue, 24 May 2022 19:21:53 -0500
Subject: [R-pkg-devel] How to structure LICENSE for multiple licenses?
In-Reply-To: <CAJqTW47tV10WyhjDL-UR=LoHg5tdJTgbNt6AUHRp=YWk6xUHPA@mail.gmail.com>
References: <CAJqTW47tV10WyhjDL-UR=LoHg5tdJTgbNt6AUHRp=YWk6xUHPA@mail.gmail.com>
Message-ID: <CAKWNqfTNME6S0Z9J9pfvOt-vgZhU2oLKE5ykpp1kzo7L=zXxDw@mail.gmail.com>

You are the *author* of your code so it wouldn't be necessary for either
type.
Since you're not licensing someone else's code, the  license restrictions
are
not binding on you -- simply listing them for a FOSS license is likely
enough.

That being said, it could complicate the terms for a licensee. It should be
unnecessary to include the GPL license text since the license itself does
not
carry restrictions.

INAL but to ensure your license is preserved, *I* would add a copy of the
MIT license (which has restrictions) but not the LGPL (which does not) to
your source package as follows:

<pkg>

+- R/
+- data/
+- inst/
   +- tests/
   +- LICENSE.MIT
+- man/
+- src/
+- DESCRIPTION
+- NAMESPACE


and have the DESCRIPTION file simply read:

Package: <pkg>
License: LGPL-2.1 | MIT
...



On Tue, May 24, 2022 at 4:58 PM Steven Scott <steve.the.bayesian at gmail.com>
wrote:

> The current version of 'bsts' is released under the LGPL.  I want to add
> the MIT license as an alternative.
>
> Right now the DESCRIPTION file contains the line
>                License: LGPL-2.1 | file LICENSE
> and the file LICENSE contains a copy of the LGPL.
>
> To add the MIT license I believe I need to modify it to be
>          License: LGPL-2.1 | MIT + file LICENSE | file LICENSE
>
> The syntax MIT + file LICENSE is because the MIT license is a template, and
> I need to fill in the template parameters in the LICENSE file.
>
> What's the right way to structure the LICENSE file to contain two
> licenses?  Should I have two files (MIT.LICENSE, LGPL.LICENSE)?  Can I just
> append the MIT license to the bottom of the LICENSE file?
>
> Thank you for reading.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed May 25 17:22:34 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 25 May 2022 17:22:34 +0200
Subject: [R-pkg-devel] How to structure LICENSE for multiple licenses?
In-Reply-To: <CAJqTW47tV10WyhjDL-UR=LoHg5tdJTgbNt6AUHRp=YWk6xUHPA@mail.gmail.com>
References: <CAJqTW47tV10WyhjDL-UR=LoHg5tdJTgbNt6AUHRp=YWk6xUHPA@mail.gmail.com>
Message-ID: <a6049162-aa5d-a808-f7cc-f8a23ccfd851@statistik.tu-dortmund.de>



On 24.05.2022 23:57, Steven Scott wrote:
> The current version of 'bsts' is released under the LGPL.  I want to add
> the MIT license as an alternative.
> 
> Right now the DESCRIPTION file contains the line
>                 License: LGPL-2.1 | file LICENSE
> and the file LICENSE contains a copy of the LGPL.

The latter is not needed as the license file is part of R, so the 
declaration is sufficient.



> To add the MIT license I believe I need to modify it to be
>           License: LGPL-2.1 | MIT + file LICENSE | file LICENSE

You actually need

License: LGPL-2.1 | MIT + file LICENSE

where the LICENSE file contains the CRAN template for the MIT license only

Best,
Uwe Ligges



> The syntax MIT + file LICENSE is because the MIT license is a template, and
> I need to fill in the template parameters in the LICENSE file.
> 
> What's the right way to structure the LICENSE file to contain two
> licenses?  Should I have two files (MIT.LICENSE, LGPL.LICENSE)?  Can I just
> append the MIT license to the bottom of the LICENSE file?
> 
> Thank you for reading.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ph||||p@j@rrett1 @end|ng |rom gm@||@com  Wed May 25 19:01:12 2022
From: ph||||p@j@rrett1 @end|ng |rom gm@||@com (Jarrett Phillips)
Date: Wed, 25 May 2022 13:01:12 -0400
Subject: [R-pkg-devel] Minimizing package size containing Shiny app > 5 Mb
Message-ID: <CAMVrHdBgzEG15bMfCixdLfs7Qnu=sSJkZ-e1UHvcLr27d7io1g@mail.gmail.com>

Hi All,

I am preparing my package for a CRAN update.

This new version contains a Shiny app of 5.4 Mb in size. The total
package (including package functions and documentation) is 5.7 Mb in size.

Thus, there is an extra 0.4 Mb limiting successful submission to CRAN.
Actually, I haven't tried submitting, but I have a feeling it will fail.

The app contains a number of DNA FASTA files (.fas format) in the www
folder, taking up only 1.2 Mb of space. The rest of the content in this
folder is images.

I don't think I can compress the files (as per the Writing R Extensions
text) since they are needed by the app when a user selects a particular
file from a drop-doen menu.

I could ask for an exemption, but I've read from Hadley Wickham's R
Packages book that this hasn't been too successful in recent years.

Are there any other workarounds?

Thanks.

Cheers,

Jarrett

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Wed May 25 21:20:26 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 25 May 2022 22:20:26 +0300
Subject: [R-pkg-devel] 
 CRAN check warning "MemoryChip - Alias wurde nicht gefunden."
In-Reply-To: <383632b433614feda9147e6b479605f2@ec.europa.eu>
References: <383632b433614feda9147e6b479605f2@ec.europa.eu>
Message-ID: <20220525222026.063c9f21@Tarkus>

On Mon, 23 May 2022 21:15:43 +0000
MESZAROS Matyas Tamas <Matyas.MESZAROS at ec.europa.eu> wrote:

> Do anyone knows what this warning means?
> https://win-builder.r-project.org/incoming_pretest/restatapi_0.13.2_20220523_223118/Windows/00check.log

In my limited experience, these problem happen from time to time due to
configuration errors on Win-Builder. I don't know whether you have to
ask CRAN members to re-check your package or they notice it and run the
check again after the problem is fixed.

-- 
Best regards,
Ivan


From kry|ov@r00t @end|ng |rom gm@||@com  Wed May 25 21:31:13 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 25 May 2022 22:31:13 +0300
Subject: [R-pkg-devel] 
 Minimizing package size containing Shiny app > 5 Mb
In-Reply-To: <CAMVrHdBgzEG15bMfCixdLfs7Qnu=sSJkZ-e1UHvcLr27d7io1g@mail.gmail.com>
References: <CAMVrHdBgzEG15bMfCixdLfs7Qnu=sSJkZ-e1UHvcLr27d7io1g@mail.gmail.com>
Message-ID: <20220525223113.6bcf1363@Tarkus>

On Wed, 25 May 2022 13:01:12 -0400
Jarrett Phillips <phillipsjarrett1 at gmail.com> wrote:

> The app contains a number of DNA FASTA files (.fas format) in the www
> folder, taking up only 1.2 Mb of space. The rest of the content in
> this folder is images.
> 
> I don't think I can compress the files (as per the Writing R
> Extensions text) since they are needed by the app when a user selects
> a particular file from a drop-doen menu.

Perhaps you could use gzfile() or xzfile() instead of file() when
opening the FASTA files in your application code? Or is it the case that
you have to pass the path to the uncompressed file to some kind of
library code that requires seeking file access, not just streaming
access?

Are there any gains from re-compressing the images? Depending on what
you're starting with, it might be possible to do losslessly. See e.g.
http://optipng.sourceforge.net/ https://pmt.sourceforge.io/pngcrush/

> I could ask for an exemption, but I've read from Hadley Wickham's R
> Packages book that this hasn't been too successful in recent years.

When in doubt, consult the official source: the CRAN policy.
https://cran.r-project.org/web/packages/policies.html

It does place a limit on the data size (5 MB) (although packages with
bigger total installed size do exist on CRAN (e.g. oce, which is
admittedly painful to maintain for various reasons)), but it also
suggests a way out: you could place the extra data in a data-only
package which would live elsewhere, for example, in a drat
https://dirk.eddelbuettel.com/code/drat.html repository on GitHub.

-- 
Best regards,
Ivan


From proebuck1701 @end|ng |rom gm@||@com  Thu May 26 06:32:38 2022
From: proebuck1701 @end|ng |rom gm@||@com (P Roebuck)
Date: Wed, 25 May 2022 23:32:38 -0500
Subject: [R-pkg-devel] 
 Minimizing package size containing Shiny app > 5 Mb
In-Reply-To: <CAMVrHdBgzEG15bMfCixdLfs7Qnu=sSJkZ-e1UHvcLr27d7io1g@mail.gmail.com>
References: <CAMVrHdBgzEG15bMfCixdLfs7Qnu=sSJkZ-e1UHvcLr27d7io1g@mail.gmail.com>
Message-ID: <CAKWNqfTPatQB1Fo_JkZf4o1tw-CqpREq0mC6eq6pAgKODaxg9Q@mail.gmail.com>

As recommended elsewhere, create a data-only package (which works well for
Bioinformatics projects),
perhaps named "FooSampleData". But I would hesitate recommending CRAN,
which I would have
considered better suited for general appeal packages -- these type packages
are more related to
Bioconductor, or residing in your company/university bioinformatics website
(accessible via public URL).

See the link below for an example package containing RPPA data.
<
https://r-forge.r-project.org/scm/viewvc.php/pkg/SuperCurveSampleData/?root=supercurve
>

On Wed, May 25, 2022 at 12:01 PM Jarrett Phillips <
phillipsjarrett1 at gmail.com> wrote:

> Hi All,
>
> I am preparing my package for a CRAN update.
>
> This new version contains a Shiny app of 5.4 Mb in size. The total
> package (including package functions and documentation) is 5.7 Mb in size.
>
> Thus, there is an extra 0.4 Mb limiting successful submission to CRAN.
> Actually, I haven't tried submitting, but I have a feeling it will fail.
>
> The app contains a number of DNA FASTA files (.fas format) in the www
> folder, taking up only 1.2 Mb of space. The rest of the content in this
> folder is images.
>
> I don't think I can compress the files (as per the Writing R Extensions
> text) since they are needed by the app when a user selects a particular
> file from a drop-doen menu.
>
> I could ask for an exemption, but I've read from Hadley Wickham's R
> Packages book that this hasn't been too successful in recent years.
>
> Are there any other workarounds?
>
> Thanks.
>
> Cheers,
>
> Jarrett
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From henr|k@bengt@@on @end|ng |rom gm@||@com  Thu May 26 14:03:41 2022
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Thu, 26 May 2022 05:03:41 -0700
Subject: [R-pkg-devel] 
 Minimizing package size containing Shiny app > 5 Mb
In-Reply-To: <CAMVrHdBgzEG15bMfCixdLfs7Qnu=sSJkZ-e1UHvcLr27d7io1g@mail.gmail.com>
References: <CAMVrHdBgzEG15bMfCixdLfs7Qnu=sSJkZ-e1UHvcLr27d7io1g@mail.gmail.com>
Message-ID: <CAFDcVCRSVEhXvSPRs7SiyWQKsfBsJ41+VrFqpXqarL62Fqwb6w@mail.gmail.com>

FWIW, if you share your package code (e.g. link to an online repository
such as GitHub), someone here might be able to do some prototyping on their
own and give you specific suggestions how to fix this.

My $.02

Henrik

On Wed, May 25, 2022, 10:01 Jarrett Phillips <phillipsjarrett1 at gmail.com>
wrote:

> Hi All,
>
> I am preparing my package for a CRAN update.
>
> This new version contains a Shiny app of 5.4 Mb in size. The total
> package (including package functions and documentation) is 5.7 Mb in size.
>
> Thus, there is an extra 0.4 Mb limiting successful submission to CRAN.
> Actually, I haven't tried submitting, but I have a feeling it will fail.
>
> The app contains a number of DNA FASTA files (.fas format) in the www
> folder, taking up only 1.2 Mb of space. The rest of the content in this
> folder is images.
>
> I don't think I can compress the files (as per the Writing R Extensions
> text) since they are needed by the app when a user selects a particular
> file from a drop-doen menu.
>
> I could ask for an exemption, but I've read from Hadley Wickham's R
> Packages book that this hasn't been too successful in recent years.
>
> Are there any other workarounds?
>
> Thanks.
>
> Cheers,
>
> Jarrett
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Thu May 26 14:11:25 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 26 May 2022 07:11:25 -0500
Subject: [R-pkg-devel] 
 Minimizing package size containing Shiny app > 5 Mb
In-Reply-To: <20220525223113.6bcf1363@Tarkus>
References: <CAMVrHdBgzEG15bMfCixdLfs7Qnu=sSJkZ-e1UHvcLr27d7io1g@mail.gmail.com>
 <20220525223113.6bcf1363@Tarkus>
Message-ID: <25231.28269.195137.905524@rob.eddelbuettel.com>


On 25 May 2022 at 22:31, Ivan Krylov wrote:
| suggests a way out: you could place the extra data in a data-only
| package which would live elsewhere, for example, in a drat
| https://dirk.eddelbuettel.com/code/drat.html repository on GitHub.

Yes indeed and a 'how to' do that in a way that is fully CRAN compliant _and_
easy on both package maintainer and uder is described in detail here:

   https://journal.r-project.org/archive/2017/RJ-2017-026/index.html

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From proebuck1701 @end|ng |rom gm@||@com  Thu May 26 18:17:31 2022
From: proebuck1701 @end|ng |rom gm@||@com (P Roebuck)
Date: Thu, 26 May 2022 11:17:31 -0500
Subject: [R-pkg-devel] [Q] How To Replace Previous Archived Package(s)
Message-ID: <CAKWNqfQYyUXW_Jb4CW-DxCtV2DBUfD5ZzE9LQOatWv_P0sAS_w@mail.gmail.com>

Despite having notified ownership (a couple weeks ago) that Vincent & I
were working
on updating the "matlab" package due to an issue with R CMD check failure
with one of the
upcoming changes, both packages were pulled off CRAN and archived
2022-05-25 while
I
continue to wait for R-Forge to register them (matlab & rwt). As this
impacts multiple
other R packages, what is the process to fix this situation?

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu May 26 18:28:10 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 26 May 2022 18:28:10 +0200
Subject: [R-pkg-devel] [Q] How To Replace Previous Archived Package(s)
In-Reply-To: <CAKWNqfQYyUXW_Jb4CW-DxCtV2DBUfD5ZzE9LQOatWv_P0sAS_w@mail.gmail.com>
References: <CAKWNqfQYyUXW_Jb4CW-DxCtV2DBUfD5ZzE9LQOatWv_P0sAS_w@mail.gmail.com>
Message-ID: <2c610152-2b68-4315-ccc7-5abc53d42fcc@statistik.tu-dortmund.de>

Submit updates that pass the CRAN checks.

Best,
Uwe Ligges


On 26.05.2022 18:17, P Roebuck wrote:
> Despite having notified ownership (a couple weeks ago) that Vincent & I
> were working
> on updating the "matlab" package due to an issue with R CMD check failure
> with one of the
> upcoming changes, both packages were pulled off CRAN and archived
> 2022-05-25 while
> I
> continue to wait for R-Forge to register them (matlab & rwt). As this
> impacts multiple
> other R packages, what is the process to fix this situation?
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From c@chw@rz@t@t@|uc@ @end|ng |rom gm@||@com  Fri May 27 02:33:42 2022
From: c@chw@rz@t@t@|uc@ @end|ng |rom gm@||@com (Carl Schwarz)
Date: Thu, 26 May 2022 17:33:42 -0700
Subject: [R-pkg-devel] Sort order of vignette index?;
 adding purl'ed Rcode from asis vignette to vignette index?
In-Reply-To: <CADtpigZQL7f6sex2gbieFaVuQ_ywVPKz7VnYW7wpTHTrJpd-rA@mail.gmail.com>
References: <CADtpigb8i5fBcCOiJyMXD6hY6J4a4sofLMaf8XYoirM=5mDoXA@mail.gmail.com>
 <CADtpigZQL7f6sex2gbieFaVuQ_ywVPKz7VnYW7wpTHTrJpd-rA@mail.gmail.com>
Message-ID: <CADtpigYBMaXgFTJin6y1SD5z_4uF-eAD4i0h=sxpF+KdL9hc-w@mail.gmail.com>

(a) How is the sort order of vignettes in the vignette index determined?
Can I change it?

I have several types of vignettes - an old style .RNW file, a pdf file
externally created for which I've created an .pdf.asis; a regular Rmarkdown
(*.Rmd) file; and an Rmarkdown file that takes too long to compile
(bootstrapping involved) for which I've created a static html file and the
*.html.asis file.

I've named the vignettes as a-.., b-.. c-..., d-... to try and establish a
"sensible" (alphabetical) sort order, but the vignette index has some odd
ordering.

So.. what determines the sort order of entries in the vignette index. Can I
control this?

I've tried changing the order in the Meta/vignette.rds file manually, but
when you build a source package, that gets overwritten.

Have a look at the package index to the
    SightabilityModel
package (currently missing one of the vignettes but that is another issue).

--------------------------
(b) Related to the static *.html.asis vignette - i would like to also
include the purl()'d R code from the Rmd file. I can generate the purl()'d
R script, place it in the doc/ directory, but the vignette index builder
ignores this.

Is there a way to modify the vignette index to point to R code that wasn't
generated automatically?

Thanks

Carl Schwarz

	[[alternative HTML version deleted]]


From Bernd@Gruber @end|ng |rom c@nberr@@edu@@u  Tue May 31 01:56:07 2022
From: Bernd@Gruber @end|ng |rom c@nberr@@edu@@u (Bernd.Gruber)
Date: Mon, 30 May 2022 23:56:07 +0000
Subject: [R-pkg-devel] how to get an archived package back on CRAN (if
 archived due to another package?)
Message-ID: <ME3PR01MB79441A1DE5750E3FAC695290D4DD9@ME3PR01MB7944.ausprd01.prod.outlook.com>

Hi,
I have a quick question. One of my packages got archived because of a dependency to another package that was achieved. The dependent package has been updated and is now back on CRAN, but my package is not. Do I have to submit a new version (which might be the same as the current) to CRAN to get my package back on CRAN?

I looked around and could not find an answer.

Thanks and regards, Bernd


==============================================================================
Dr Bernd Gruber                                              )/_
                                                         _.--..---"-,--c_
Professor Ecological Modelling                      \|..'           ._O__)_
Tel: (02) 6206 3804                         ,=.    _.+   _ \..--( /
Fax: (02) 6201 2328                           \\.-''_.-' \ (     \_
Institute for Applied Ecology                  `'''       `\__   /\
Faculty of Science and Technology                          ')
University of Canberra   ACT 2601 AUSTRALIA
Email: bernd.gruber at canberra.edu.au<mailto:bernd.gruber at canberra.edu.au>
WWW: bernd-gruber<https://researchprofiles.canberra.edu.au/en/persons/bernd-gruber>

Australian Government Higher Education Provider Number CRICOS #00212K
NOTICE & DISCLAIMER: This email and any files transmitted with it may contain
confidential or copyright material and are for the attention of the addressee
only. If you have received this email in error please notify us by email
reply and delete it from your system. The University of Canberra accepts
no liability for any damage caused by any virus transmitted by this email.
==============================================================================

[UC Logo]<http://www.canberra.edu.au>

[It all starts with you]<https://www.canberra.edu.au/>



The Ngunnawal people are the Traditional Custodians of the ACT where UC's Bruce Campus is situated and are an integral and celebrated part of UC's culture. We also acknowledge other First Nations Peoples.

Australian Government Higher Education Registered Provider (CRICOS) #00212K  Email Disclaimer<https://www.canberra.edu.au/about-uc/disclaimer-copyright-privacy-accessibility>

[UC Facebook]<https://www.facebook.com/UniversityOfCanberra>    [UC Twitter] <https://twitter.com/UniCanberra>     [UC Instagram] <https://www.instagram.com/unicanberra/>     [UC Linkedin] <https://au.linkedin.com/school/university-of-canberra/>     [UC Youtube] <https://www.youtube.com/user/uniofcanberra>     [University of Canberra] <http://www.canberra.edu.au>

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Tue May 31 02:35:42 2022
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Mon, 30 May 2022 17:35:42 -0700
Subject: [R-pkg-devel] how to get an archived package back on CRAN (if
 archived due to another package?)
In-Reply-To: <ME3PR01MB79441A1DE5750E3FAC695290D4DD9@ME3PR01MB7944.ausprd01.prod.outlook.com>
References: <ME3PR01MB79441A1DE5750E3FAC695290D4DD9@ME3PR01MB7944.ausprd01.prod.outlook.com>
Message-ID: <F2B97E25-036F-4420-B0FD-E2954C00FE41@comcast.net>

I suspect that you will need to resubmit. Since you package now has a dependency with a particular version, you may need to update your DESCRIPTION file and increment your packages version. (Caveat: I?m not an authority.)

? 
David


Sent from my iPhone

> On May 30, 2022, at 4:56 PM, Bernd.Gruber <Bernd.Gruber at canberra.edu.au> wrote:
> 
> ?Hi,
> I have a quick question. One of my packages got archived because of a dependency to another package that was achieved. The dependent package has been updated and is now back on CRAN, but my package is not. Do I have to submit a new version (which might be the same as the current) to CRAN to get my package back on CRAN?
> 
> I looked around and could not find an answer.
> 
> Thanks and regards, Bernd
> 
> 
> ==============================================================================
> Dr Bernd Gruber                                              )/_
>                                                         _.--..---"-,--c_
> Professor Ecological Modelling                      \|..'           ._O__)_
> Tel: (02) 6206 3804                         ,=.    _.+   _ \..--( /
> Fax: (02) 6201 2328                           \\.-''_.-' \ (     \_
> Institute for Applied Ecology                  `'''       `\__   /\
> Faculty of Science and Technology                          ')
> University of Canberra   ACT 2601 AUSTRALIA
> Email: bernd.gruber at canberra.edu.au<mailto:bernd.gruber at canberra.edu.au>
> WWW: bernd-gruber<https://researchprofiles.canberra.edu.au/en/persons/bernd-gruber>
> 
> Australian Government Higher Education Provider Number CRICOS #00212K
> NOTICE & DISCLAIMER: This email and any files transmitted with it may contain
> confidential or copyright material and are for the attention of the addressee
> only. If you have received this email in error please notify us by email
> reply and delete it from your system. The University of Canberra accepts
> no liability for any damage caused by any virus transmitted by this email.
> ==============================================================================
> 
> [UC Logo]<http://www.canberra.edu.au>
> 
> [It all starts with you]<https://www.canberra.edu.au/>
> 
> 
> 
> The Ngunnawal people are the Traditional Custodians of the ACT where UC's Bruce Campus is situated and are an integral and celebrated part of UC's culture. We also acknowledge other First Nations Peoples.
> 
> Australian Government Higher Education Registered Provider (CRICOS) #00212K  Email Disclaimer<https://www.canberra.edu.au/about-uc/disclaimer-copyright-privacy-accessibility>
> 
> [UC Facebook]<https://www.facebook.com/UniversityOfCanberra>    [UC Twitter] <https://twitter.com/UniCanberra>     [UC Instagram] <https://www.instagram.com/unicanberra/>     [UC Linkedin] <https://au.linkedin.com/school/university-of-canberra/>     [UC Youtube] <https://www.youtube.com/user/uniofcanberra>     [University of Canberra] <http://www.canberra.edu.au>
> 
>    [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From c@chw@rz@t@t@|uc@ @end|ng |rom gm@||@com  Tue May 31 03:10:28 2022
From: c@chw@rz@t@t@|uc@ @end|ng |rom gm@||@com (Carl Schwarz)
Date: Mon, 30 May 2022 18:10:28 -0700
Subject: [R-pkg-devel] Sort order of vignette index?;
 adding purl'ed Rcode from asis vignette to vignette index?
In-Reply-To: <8d467b58-4268-b856-44ed-d1bdd7b243dc@gmail.com>
References: <CADtpigb8i5fBcCOiJyMXD6hY6J4a4sofLMaf8XYoirM=5mDoXA@mail.gmail.com>
 <CADtpigZQL7f6sex2gbieFaVuQ_ywVPKz7VnYW7wpTHTrJpd-rA@mail.gmail.com>
 <CADtpigYBMaXgFTJin6y1SD5z_4uF-eAD4i0h=sxpF+KdL9hc-w@mail.gmail.com>
 <8d467b58-4268-b856-44ed-d1bdd7b243dc@gmail.com>
Message-ID: <CADtpigYfhrdUhQtf4a_eEuXo+V_tns7kd9+UAxaGUfzFdWWfFw@mail.gmail.com>

Thanks DM...

I'm most interested in the HTML index from the help system.

Indeed the sort orders are different with the browseVignettes() sorting by
title.
But the sort order of the HTML system is neither the title nor the file
name. I found an old post from 2017 (
https://www.mail-archive.com/r-package-devel at r-project.org/msg01479.html)
with a similar query and it appears that the sort order for the html system
might be

1. file type (.Rmd, then .Rnw)
2. alphabetically by file name


If correct, this seems like an odd sort order for the HTML system. In my
case the order appears to be .asis, .Rmd, Rnw.

I'm willing to put some work on modifying the sort order if this is a
sensible solution but don't know where to start.
I'm hoping that a simple modification to devtool::build_vignettes()
might be the place to start, but don't know enough of the fine details of
package building on CRAN to know if this is the place.

For example, I could imaging an argument to build_vignetter() that controls
the sort order, e.g. sort_vignettes_by=c("filename","title") so the user
could choose, with argument to the R CMD build process that changes this as
needed.

Carl

On Mon, May 30, 2022 at 2:50 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 26/05/2022 8:33 p.m., Carl Schwarz wrote:
> > (a) How is the sort order of vignettes in the vignette index determined?
> > Can I change it?
>
> You should specify which vignette index you are looking at.  Is it the
> one linked from the HTML help system, or the one you see when you use
> browseVignettes()?  They might be the same, but I wouldn't bet on that.
>
> Duncan Murdoch
>
>
> >
> > I have several types of vignettes - an old style .RNW file, a pdf file
> > externally created for which I've created an .pdf.asis; a regular
> Rmarkdown
> > (*.Rmd) file; and an Rmarkdown file that takes too long to compile
> > (bootstrapping involved) for which I've created a static html file and
> the
> > *.html.asis file.
> >
> > I've named the vignettes as a-.., b-.. c-..., d-... to try and establish
> a
> > "sensible" (alphabetical) sort order, but the vignette index has some odd
> > ordering.
> >
> > So.. what determines the sort order of entries in the vignette index.
> Can I
> > control this?
> >
> > I've tried changing the order in the Meta/vignette.rds file manually, but
> > when you build a source package, that gets overwritten.
> >
> > Have a look at the package index to the
> >      SightabilityModel
> > package (currently missing one of the vignettes but that is another
> issue).
> >
> > --------------------------
> > (b) Related to the static *.html.asis vignette - i would like to also
> > include the purl()'d R code from the Rmd file. I can generate the
> purl()'d
> > R script, place it in the doc/ directory, but the vignette index builder
> > ignores this.
> >
> > Is there a way to modify the vignette index to point to R code that
> wasn't
> > generated automatically?
> >
> > Thanks
> >
> > Carl Schwarz
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Tue May 31 09:05:02 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 31 May 2022 10:05:02 +0300
Subject: [R-pkg-devel] Sort order of vignette index?;
 adding purl'ed Rcode from asis vignette to vignette index?
In-Reply-To: <CADtpigYfhrdUhQtf4a_eEuXo+V_tns7kd9+UAxaGUfzFdWWfFw@mail.gmail.com>
References: <CADtpigb8i5fBcCOiJyMXD6hY6J4a4sofLMaf8XYoirM=5mDoXA@mail.gmail.com>
 <CADtpigZQL7f6sex2gbieFaVuQ_ywVPKz7VnYW7wpTHTrJpd-rA@mail.gmail.com>
 <CADtpigYBMaXgFTJin6y1SD5z_4uF-eAD4i0h=sxpF+KdL9hc-w@mail.gmail.com>
 <8d467b58-4268-b856-44ed-d1bdd7b243dc@gmail.com>
 <CADtpigYfhrdUhQtf4a_eEuXo+V_tns7kd9+UAxaGUfzFdWWfFw@mail.gmail.com>
Message-ID: <20220531100502.6ad5354a@Tarkus>

On Mon, 30 May 2022 18:10:28 -0700
Carl Schwarz <cschwarzstatsfuca at gmail.com> wrote:

> I'm hoping that a simple modification to devtool::build_vignettes()
> might be the place to start, but don't know enough of the fine
> details of package building on CRAN to know if this is the place.

devtools is an unofficial package, separate from the package build
machinery.

The HTML vignette index for a package is contained in the
(library)/(package)/doc/index.html file and is generated during package
installation. The table itself is generated by
tools:::makeVignetteTable, with no sort criterion applied. According to
the comments in tools:::.install_package_vignettes3, R ? 3.0.2
generates the vignette index at package build time. The vignette index
is built by tools:::.build_vignette_index, again, with no sorting, from
the output of tools::pkgVignettes.

pkgVignettes() seems to loop over vignette engines, then over file name
patterns accepted by every vignette engine. A sorting step could be
added after the loop, but I'm not sure how to expose the sorting
criterion as an API. Time to ask about this on the R-devel mailing list?

As for locating the purl'ed scripts, you might be able to convince
pkgVignettes() to locate them for you if you rename and place them the
right way (you say doc/; shouldn't it be inst/doc?). Take a look at how
pkgVignettes calls tools:::find_vignette_product and what the latter
function does. But I might be wrong.

-- 
Best regards,
Ivan


From @zz@||n| @end|ng |rom @t@t@un|pd@|t  Tue May 31 16:05:11 2022
From: @zz@||n| @end|ng |rom @t@t@un|pd@|t (Adelchi Azzalini)
Date: Tue, 31 May 2022 16:05:11 +0200
Subject: [R-pkg-devel] problems with  HTML version of manual
Message-ID: <A6986BC1-8893-4EC0-A071-F8DC515335B8@stat.unipd.it>


Hi.

I am preparing a new version of package mnormt. The package installs OK locally, but

 R CMD check --as-cran --run-donttest mnormt_2.1.0.tar.gz 

runs fine only up to 

* checking PDF version of manual ? OK

and then it says 

* checking HTML version of manual ... NOTE
Found the following problems:
mnorm.Rd:4:1: Warning: <link> inserting "type" attribute
mnorm.Rd:12:1: Warning: <script> proprietary attribute "onload"
mnorm.Rd:12:1: Warning: <script> inserting "type" attribute
mnorm.Rd:17:1: Warning: <table> lacks "summary? attribute

?and so on for all other Rd files.

This is something I have never seen before, and it is particularly obscure to me since the PDF version is fine. Neither I could find documentation with an explanation.

In addition I get

mtruncnorm.Rd:105:43: Warning: replacing invalid character code 135
mtruncnorm.Rd:145:32: Warning: replacing invalid character code 135

but the quoted lines have length 11 and 23, respectively. Again, I am lost.

Any suggestions?


Adelchi Azzalini
http://azzalini.stat.unipd.it


From j|ox @end|ng |rom mcm@@ter@c@  Tue May 31 16:17:26 2022
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Tue, 31 May 2022 10:17:26 -0400
Subject: [R-pkg-devel] problems with HTML version of manual
In-Reply-To: <29013_1654005963_24VE62jn021586_A6986BC1-8893-4EC0-A071-F8DC515335B8@stat.unipd.it>
References: <29013_1654005963_24VE62jn021586_A6986BC1-8893-4EC0-A071-F8DC515335B8@stat.unipd.it>
Message-ID: <b0360a2e-8a84-f004-154f-229e18e86cd5@mcmaster.ca>

Dear Adelchi,

This problem has been reported before: see 
<https://stat.ethz.ch/pipermail/r-package-devel/2022q2/007993.html> and 
the thread that starts at 
<https://stat.ethz.ch/pipermail/r-package-devel/2022q2/007996.html>, in 
particular Uwe Ligges's message near the bottom of the thread.

Best,
  John

On 2022-05-31 10:05 a.m., Adelchi Azzalini wrote:
> 
> Hi.
> 
> I am preparing a new version of package mnormt. The package installs OK locally, but
> 
>   R CMD check --as-cran --run-donttest mnormt_2.1.0.tar.gz
> 
> runs fine only up to
> 
> * checking PDF version of manual ? OK
> 
> and then it says
> 
> * checking HTML version of manual ... NOTE
> Found the following problems:
> mnorm.Rd:4:1: Warning: <link> inserting "type" attribute
> mnorm.Rd:12:1: Warning: <script> proprietary attribute "onload"
> mnorm.Rd:12:1: Warning: <script> inserting "type" attribute
> mnorm.Rd:17:1: Warning: <table> lacks "summary? attribute
> 
> ?and so on for all other Rd files.
> 
> This is something I have never seen before, and it is particularly obscure to me since the PDF version is fine. Neither I could find documentation with an explanation.
> 
> In addition I get
> 
> mtruncnorm.Rd:105:43: Warning: replacing invalid character code 135
> mtruncnorm.Rd:145:32: Warning: replacing invalid character code 135
> 
> but the quoted lines have length 11 and 23, respectively. Again, I am lost.
> 
> Any suggestions?
> 
> 
> Adelchi Azzalini
> http://azzalini.stat.unipd.it
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
-- 
John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
web: https://socialsciences.mcmaster.ca/jfox/


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Tue May 31 16:50:24 2022
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Tue, 31 May 2022 14:50:24 +0000
Subject: [R-pkg-devel] Sort order of vignette index?;
 adding purl'ed Rcode from asis vignette to vignette index?
In-Reply-To: <20220531100502.6ad5354a@Tarkus>
References: <CADtpigb8i5fBcCOiJyMXD6hY6J4a4sofLMaf8XYoirM=5mDoXA@mail.gmail.com>
 <CADtpigZQL7f6sex2gbieFaVuQ_ywVPKz7VnYW7wpTHTrJpd-rA@mail.gmail.com>
 <CADtpigYBMaXgFTJin6y1SD5z_4uF-eAD4i0h=sxpF+KdL9hc-w@mail.gmail.com>
 <8d467b58-4268-b856-44ed-d1bdd7b243dc@gmail.com>
 <CADtpigYfhrdUhQtf4a_eEuXo+V_tns7kd9+UAxaGUfzFdWWfFw@mail.gmail.com>
 <20220531100502.6ad5354a@Tarkus>
Message-ID: <YQXPR01MB4579C84C4B40232949F569C89ADC9@YQXPR01MB4579.CANPRD01.PROD.OUTLOOK.COM>

Hi Carl and Ivan,

According to WRE Section 1.4, you may be able to override what tools:::.build_vignette_index creates:

"At install time an HTML index for all vignettes in the package is automatically created from the \VignetteIndexEntry statements unless a file index.html exists in directory inst/doc. This index is linked from the HTML help index for the package."

Unfortunately, I have no experience writing my own inst/doc/index.html. Maybe someone else on this list can provide some pointers.

Best,


Max Turgeon<https://www.name-coach.com/maxime-turgeon>
Assistant Professor

Department of Statistics
University of Manitoba

maxturgeon.ca<http://maxturgeon.ca/>

________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Ivan Krylov <krylov.r00t at gmail.com>
Sent: Tuesday, May 31, 2022 2:05 AM
To: Carl Schwarz <cschwarzstatsfuca at gmail.com>
Cc: r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] Sort order of vignette index?; adding purl'ed Rcode from asis vignette to vignette index?

********************************************************
Caution: This message was sent from outside the University of Manitoba.
********************************************************

On Mon, 30 May 2022 18:10:28 -0700
Carl Schwarz <cschwarzstatsfuca at gmail.com> wrote:

> I'm hoping that a simple modification to devtool::build_vignettes()
> might be the place to start, but don't know enough of the fine
> details of package building on CRAN to know if this is the place.

devtools is an unofficial package, separate from the package build
machinery.

The HTML vignette index for a package is contained in the
(library)/(package)/doc/index.html file and is generated during package
installation. The table itself is generated by
tools:::makeVignetteTable, with no sort criterion applied. According to
the comments in tools:::.install_package_vignettes3, R ? 3.0.2
generates the vignette index at package build time. The vignette index
is built by tools:::.build_vignette_index, again, with no sorting, from
the output of tools::pkgVignettes.

pkgVignettes() seems to loop over vignette engines, then over file name
patterns accepted by every vignette engine. A sorting step could be
added after the loop, but I'm not sure how to expose the sorting
criterion as an API. Time to ask about this on the R-devel mailing list?

As for locating the purl'ed scripts, you might be able to convince
pkgVignettes() to locate them for you if you rename and place them the
right way (you say doc/; shouldn't it be inst/doc?). Take a look at how
pkgVignettes calls tools:::find_vignette_product and what the latter
function does. But I might be wrong.

--
Best regards,
Ivan

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue May 31 18:27:35 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 31 May 2022 18:27:35 +0200
Subject: [R-pkg-devel] problems with HTML version of manual
In-Reply-To: <b0360a2e-8a84-f004-154f-229e18e86cd5@mcmaster.ca>
References: <29013_1654005963_24VE62jn021586_A6986BC1-8893-4EC0-A071-F8DC515335B8@stat.unipd.it>
 <b0360a2e-8a84-f004-154f-229e18e86cd5@mcmaster.ca>
Message-ID: <83639a43-026d-4ffc-d046-598b47610e2e@statistik.tu-dortmund.de>

My suggestion is to check with a recent version of R-devel which should 
produce god results, i.e. produces messages that need our attention.

Best,
Uwe Ligges

On 31.05.2022 16:17, John Fox wrote:
> Dear Adelchi,
> 
> This problem has been reported before: see 
> <https://stat.ethz.ch/pipermail/r-package-devel/2022q2/007993.html> and 
> the thread that starts at 
> <https://stat.ethz.ch/pipermail/r-package-devel/2022q2/007996.html>, in 
> particular Uwe Ligges's message near the bottom of the thread.
> 
> Best,
>  ?John
> 
> On 2022-05-31 10:05 a.m., Adelchi Azzalini wrote:
>>
>> Hi.
>>
>> I am preparing a new version of package mnormt. The package installs 
>> OK locally, but
>>
>> ? R CMD check --as-cran --run-donttest mnormt_2.1.0.tar.gz
>>
>> runs fine only up to
>>
>> * checking PDF version of manual ? OK
>>
>> and then it says
>>
>> * checking HTML version of manual ... NOTE
>> Found the following problems:
>> mnorm.Rd:4:1: Warning: <link> inserting "type" attribute
>> mnorm.Rd:12:1: Warning: <script> proprietary attribute "onload"
>> mnorm.Rd:12:1: Warning: <script> inserting "type" attribute
>> mnorm.Rd:17:1: Warning: <table> lacks "summary? attribute
>>
>> ?and so on for all other Rd files.
>>
>> This is something I have never seen before, and it is particularly 
>> obscure to me since the PDF version is fine. Neither I could find 
>> documentation with an explanation.
>>
>> In addition I get
>>
>> mtruncnorm.Rd:105:43: Warning: replacing invalid character code 135
>> mtruncnorm.Rd:145:32: Warning: replacing invalid character code 135
>>
>> but the quoted lines have length 11 and 23, respectively. Again, I am 
>> lost.
>>
>> Any suggestions?
>>
>>
>> Adelchi Azzalini
>> http://azzalini.stat.unipd.it
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @zz@||n| @end|ng |rom @t@t@un|pd@|t  Tue May 31 19:30:51 2022
From: @zz@||n| @end|ng |rom @t@t@un|pd@|t (Adelchi Azzalini)
Date: Tue, 31 May 2022 19:30:51 +0200
Subject: [R-pkg-devel] problems with HTML version of manual
In-Reply-To: <83639a43-026d-4ffc-d046-598b47610e2e@statistik.tu-dortmund.de>
References: <29013_1654005963_24VE62jn021586_A6986BC1-8893-4EC0-A071-F8DC515335B8@stat.unipd.it>
 <b0360a2e-8a84-f004-154f-229e18e86cd5@mcmaster.ca>
 <83639a43-026d-4ffc-d046-598b47610e2e@statistik.tu-dortmund.de>
Message-ID: <F6C870A9-4AD7-4E97-964F-5CECF2AB1700@stat.unipd.it>

Thanks for the useful information, Uwe and John.
 
Best regards,

Adelchi


> On 31 May 2022, at 18:27, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> My suggestion is to check with a recent version of R-devel which should produce god results, i.e. produces messages that need our attention.
> 
> Best,
> Uwe Ligges
> 
> On 31.05.2022 16:17, John Fox wrote:
>> Dear Adelchi,
>> This problem has been reported before: see <https://stat.ethz.ch/pipermail/r-package-devel/2022q2/007993.html> and the thread that starts at <https://stat.ethz.ch/pipermail/r-package-devel/2022q2/007996.html>, in particular Uwe Ligges's message near the bottom of the thread.
>> Best,
>>  John
>> On 2022-05-31 10:05 a.m., Adelchi Azzalini wrote:
>>> 
>>> Hi.
>>> 
>>> I am preparing a new version of package mnormt. The package installs OK locally, but
>>> 
>>>   R CMD check --as-cran --run-donttest mnormt_2.1.0.tar.gz
>>> 
>>> runs fine only up to
>>> 
>>> * checking PDF version of manual ? OK
>>> 
>>> and then it says
>>> 
>>> * checking HTML version of manual ... NOTE
>>> Found the following problems:
>>> mnorm.Rd:4:1: Warning: <link> inserting "type" attribute
>>> mnorm.Rd:12:1: Warning: <script> proprietary attribute "onload"
>>> mnorm.Rd:12:1: Warning: <script> inserting "type" attribute
>>> mnorm.Rd:17:1: Warning: <table> lacks "summary? attribute
>>> 
>>> ?and so on for all other Rd files.
>>> 
>>> This is something I have never seen before, and it is particularly obscure to me since the PDF version is fine. Neither I could find documentation with an explanation.
>>> 
>>> In addition I get
>>> 
>>> mtruncnorm.Rd:105:43: Warning: replacing invalid character code 135
>>> mtruncnorm.Rd:145:32: Warning: replacing invalid character code 135
>>> 
>>> but the quoted lines have length 11 and 23, respectively. Again, I am lost.
>>> 
>>> Any suggestions?
>>> 
>>> 
>>> Adelchi Azzalini
>>> http://azzalini.stat.unipd.it
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From pik@pp@@devei m@iii@g oii gm@ii@com  Tue May 31 23:10:50 2022
From: pik@pp@@devei m@iii@g oii gm@ii@com (pik@pp@@devei m@iii@g oii gm@ii@com)
Date: Tue, 31 May 2022 23:10:50 +0200
Subject: [R-pkg-devel] Package Deprecation Message
Message-ID: <00db01d87532$e866dea0$b9349be0$@gmail.com>

Dear all,

 

I am looking for a way to communicate the deprecation of a package as a
newer package supersedes it. 

 

1 ) My initial approach was to emit a warning message during the deprecated
package's loading, i.e., something like the following lines

 

.onLoad <- function(libname, pkgname) {

    message <- "Some deprecation message."

    rlang::warn(message)

}

 

This approach leads to the following warning during RCHECK

 

* checking whether package 'package_name' can be installed ... WARNING

Found the following significant warnings:

  Warning: Some deprecation message.

 

2) My subsequent approach was to use packageStartupMessage, i.e.

 

 

.onLoad <- function(libname, pkgname) {

    message <- "Some deprecation message."

    packageStartupMessage(message, appendLF = TRUE)

}

 

This approach leads to a note

 

* checking R code for possible problems ... NOTE

File 'package_name/R/zzz.R': .onLoad calls: packageStartupMessage(message,
appendLF = TRUE)

See section 'Good practice' in '?.onAttach'.

 

Unfortunately, the package fails to pass the CRAN's automated incoming
checks with this note.

 

I have checked the 'Good practice' section of the .onAttach help page. It
starts with:

 

"Loading a namespace should where possible be silent, with startup messages
given by '.onAttach'. 

These messages (and any essential ones from '.onLoad') should use
packageStartupMessage so they can be silenced where they would be a
distraction."

 

>From the above passage, I understand that essential messages can be
communicated from .onLoad. Should I consider the deprecation message as
essential and leave it in the body of .onLoad, or should I instead use
.onAttach in order to submit the package to CRAN? 

 

Is there maybe a better way to communicate that the package is deprecated?

 

Kind regards,

Pantelis

 

 


	[[alternative HTML version deleted]]


From c@chw@rz@t@t@|uc@ @end|ng |rom gm@||@com  Wed Jun  1 00:53:57 2022
From: c@chw@rz@t@t@|uc@ @end|ng |rom gm@||@com (Carl Schwarz)
Date: Tue, 31 May 2022 15:53:57 -0700
Subject: [R-pkg-devel] Sort order of vignette index?;
 adding purl'ed Rcode from asis vignette to vignette index?
In-Reply-To: <YQXPR01MB4579C84C4B40232949F569C89ADC9@YQXPR01MB4579.CANPRD01.PROD.OUTLOOK.COM>
References: <CADtpigb8i5fBcCOiJyMXD6hY6J4a4sofLMaf8XYoirM=5mDoXA@mail.gmail.com>
 <CADtpigZQL7f6sex2gbieFaVuQ_ywVPKz7VnYW7wpTHTrJpd-rA@mail.gmail.com>
 <CADtpigYBMaXgFTJin6y1SD5z_4uF-eAD4i0h=sxpF+KdL9hc-w@mail.gmail.com>
 <8d467b58-4268-b856-44ed-d1bdd7b243dc@gmail.com>
 <CADtpigYfhrdUhQtf4a_eEuXo+V_tns7kd9+UAxaGUfzFdWWfFw@mail.gmail.com>
 <20220531100502.6ad5354a@Tarkus>
 <YQXPR01MB4579C84C4B40232949F569C89ADC9@YQXPR01MB4579.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <CADtpigY-hp14wS=K8ob-STPDuZ1dwA8LWG5Nws08HkWz_0ysKg@mail.gmail.com>

Success!

Building on MT's note that if the inst/doc has an index.html file, R does
NOT build a new index.
At the end of Writing R Extensions Section 1.4, it states
"  When R CMD build builds the vignettes, it copies these and the vignette
sources from directory vignettes to inst/doc. To install any other files
from the vignettes directory, include a file vignettes/.install_extras which
specifies these as Perl-like regular expressions on one or more lines.."

So I copied the existing inst/doc/index.html file from the installed
SighatbilityModel with the wrong sort order to my vignettes/index.html,
edited this index.html file to get the right sort order. The index.html is
just vanilla html so it is easy to modify "manually".
Then I created a vignettes/.install_extras with a single entry "index.html"
and now vignettes/index.html appears to be copied to inst/doc and so stops
the building of the wrongly sorted index.

Then I did a Rstudio -> Build -> BuildSourcePackage to create a tar.gz
file; installed from the tar.gz file, and now my vignette index is sorted
properly on my Mac machine.
Also tried using devtools::check_win_release() to generate a windoze zip
file; installed that; and the vignette index is again sorted properly on
Windows machines.

I'm hoping I can use this for (b) from my original query as well.

This will mean that I have to "manually'" maintain the vignettes/index.html
file, but that is straightforward.

I hope this works when I submit to CRAN.

How do I suggest to the R maintainers that an explicit section be added to
the Writing R Extensions manual with the above steps so that future package
writers don't repeat history? I'm willing to write the paragraph explaining
the steps, but don't know who/how to proceed to get it added to Writing R
Extensions.

Carl Schwarz


On Tue, May 31, 2022 at 7:50 AM Max Turgeon <Max.Turgeon at umanitoba.ca>
wrote:

> Hi Carl and Ivan,
>
> According to WRE Section 1.4, you may be able to override what
> tools:::.build_vignette_index creates:
>
> "At install time an HTML index for all vignettes in the package is
> automatically created from the \VignetteIndexEntry statements unless a file
> index.html exists in directory inst/doc. This index is linked from the HTML
> help index for the package."
>
> Unfortunately, I have no experience writing my own inst/doc/index.html.
> Maybe someone else on this list can provide some pointers.
>
> Best,
>
> Max Turgeon <https://www.name-coach.com/maxime-turgeon>
> Assistant Professor
>
> Department of Statistics
> University of Manitoba
>
> maxturgeon.ca
> ------------------------------
> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on behalf
> of Ivan Krylov <krylov.r00t at gmail.com>
> *Sent:* Tuesday, May 31, 2022 2:05 AM
> *To:* Carl Schwarz <cschwarzstatsfuca at gmail.com>
> *Cc:* r-package-devel at r-project.org <r-package-devel at r-project.org>
> *Subject:* Re: [R-pkg-devel] Sort order of vignette index?; adding
> purl'ed Rcode from asis vignette to vignette index?
>
> ********************************************************
> Caution: This message was sent from outside the University of Manitoba.
> ********************************************************
>
> On Mon, 30 May 2022 18:10:28 -0700
> Carl Schwarz <cschwarzstatsfuca at gmail.com> wrote:
>
> > I'm hoping that a simple modification to devtool::build_vignettes()
> > might be the place to start, but don't know enough of the fine
> > details of package building on CRAN to know if this is the place.
>
> devtools is an unofficial package, separate from the package build
> machinery.
>
> The HTML vignette index for a package is contained in the
> (library)/(package)/doc/index.html file and is generated during package
> installation. The table itself is generated by
> tools:::makeVignetteTable, with no sort criterion applied. According to
> the comments in tools:::.install_package_vignettes3, R ? 3.0.2
> generates the vignette index at package build time. The vignette index
> is built by tools:::.build_vignette_index, again, with no sorting, from
> the output of tools::pkgVignettes.
>
> pkgVignettes() seems to loop over vignette engines, then over file name
> patterns accepted by every vignette engine. A sorting step could be
> added after the loop, but I'm not sure how to expose the sorting
> criterion as an API. Time to ask about this on the R-devel mailing list?
>
> As for locating the purl'ed scripts, you might be able to convince
> pkgVignettes() to locate them for you if you rename and place them the
> right way (you say doc/; shouldn't it be inst/doc?). Take a look at how
> pkgVignettes calls tools:::find_vignette_product and what the latter
> function does. But I might be wrong.
>
> --
> Best regards,
> Ivan
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jun  1 01:09:16 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 31 May 2022 16:09:16 -0700
Subject: [R-pkg-devel] Sort order of vignette index?;
 adding purl'ed Rcode from asis vignette to vignette index?
In-Reply-To: <CADtpigY-hp14wS=K8ob-STPDuZ1dwA8LWG5Nws08HkWz_0ysKg@mail.gmail.com>
References: <CADtpigb8i5fBcCOiJyMXD6hY6J4a4sofLMaf8XYoirM=5mDoXA@mail.gmail.com>
 <CADtpigZQL7f6sex2gbieFaVuQ_ywVPKz7VnYW7wpTHTrJpd-rA@mail.gmail.com>
 <CADtpigYBMaXgFTJin6y1SD5z_4uF-eAD4i0h=sxpF+KdL9hc-w@mail.gmail.com>
 <8d467b58-4268-b856-44ed-d1bdd7b243dc@gmail.com>
 <CADtpigYfhrdUhQtf4a_eEuXo+V_tns7kd9+UAxaGUfzFdWWfFw@mail.gmail.com>
 <20220531100502.6ad5354a@Tarkus>
 <YQXPR01MB4579C84C4B40232949F569C89ADC9@YQXPR01MB4579.CANPRD01.PROD.OUTLOOK.COM>
 <CADtpigY-hp14wS=K8ob-STPDuZ1dwA8LWG5Nws08HkWz_0ysKg@mail.gmail.com>
Message-ID: <D29F12E5-B3EB-440F-92D8-F1C8D88020D1@dcn.davis.ca.us>

FWIW the RStudio build is often not complete... it intentionally takes shortcuts that make test/run iteration faster... but you should make a habit of using the command line to build artifacts for sharing... it will help avoid gotchas.

On May 31, 2022 3:53:57 PM PDT, Carl Schwarz <cschwarzstatsfuca at gmail.com> wrote:
>Success!
>
>Building on MT's note that if the inst/doc has an index.html file, R does
>NOT build a new index.
>At the end of Writing R Extensions Section 1.4, it states
>"  When R CMD build builds the vignettes, it copies these and the vignette
>sources from directory vignettes to inst/doc. To install any other files
>from the vignettes directory, include a file vignettes/.install_extras which
>specifies these as Perl-like regular expressions on one or more lines.."
>
>So I copied the existing inst/doc/index.html file from the installed
>SighatbilityModel with the wrong sort order to my vignettes/index.html,
>edited this index.html file to get the right sort order. The index.html is
>just vanilla html so it is easy to modify "manually".
>Then I created a vignettes/.install_extras with a single entry "index.html"
>and now vignettes/index.html appears to be copied to inst/doc and so stops
>the building of the wrongly sorted index.
>
>Then I did a Rstudio -> Build -> BuildSourcePackage to create a tar.gz
>file; installed from the tar.gz file, and now my vignette index is sorted
>properly on my Mac machine.
>Also tried using devtools::check_win_release() to generate a windoze zip
>file; installed that; and the vignette index is again sorted properly on
>Windows machines.
>
>I'm hoping I can use this for (b) from my original query as well.
>
>This will mean that I have to "manually'" maintain the vignettes/index.html
>file, but that is straightforward.
>
>I hope this works when I submit to CRAN.
>
>How do I suggest to the R maintainers that an explicit section be added to
>the Writing R Extensions manual with the above steps so that future package
>writers don't repeat history? I'm willing to write the paragraph explaining
>the steps, but don't know who/how to proceed to get it added to Writing R
>Extensions.
>
>Carl Schwarz
>
>
>On Tue, May 31, 2022 at 7:50 AM Max Turgeon <Max.Turgeon at umanitoba.ca>
>wrote:
>
>> Hi Carl and Ivan,
>>
>> According to WRE Section 1.4, you may be able to override what
>> tools:::.build_vignette_index creates:
>>
>> "At install time an HTML index for all vignettes in the package is
>> automatically created from the \VignetteIndexEntry statements unless a file
>> index.html exists in directory inst/doc. This index is linked from the HTML
>> help index for the package."
>>
>> Unfortunately, I have no experience writing my own inst/doc/index.html.
>> Maybe someone else on this list can provide some pointers.
>>
>> Best,
>>
>> Max Turgeon <https://www.name-coach.com/maxime-turgeon>
>> Assistant Professor
>>
>> Department of Statistics
>> University of Manitoba
>>
>> maxturgeon.ca
>> ------------------------------
>> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on behalf
>> of Ivan Krylov <krylov.r00t at gmail.com>
>> *Sent:* Tuesday, May 31, 2022 2:05 AM
>> *To:* Carl Schwarz <cschwarzstatsfuca at gmail.com>
>> *Cc:* r-package-devel at r-project.org <r-package-devel at r-project.org>
>> *Subject:* Re: [R-pkg-devel] Sort order of vignette index?; adding
>> purl'ed Rcode from asis vignette to vignette index?
>>
>> ********************************************************
>> Caution: This message was sent from outside the University of Manitoba.
>> ********************************************************
>>
>> On Mon, 30 May 2022 18:10:28 -0700
>> Carl Schwarz <cschwarzstatsfuca at gmail.com> wrote:
>>
>> > I'm hoping that a simple modification to devtool::build_vignettes()
>> > might be the place to start, but don't know enough of the fine
>> > details of package building on CRAN to know if this is the place.
>>
>> devtools is an unofficial package, separate from the package build
>> machinery.
>>
>> The HTML vignette index for a package is contained in the
>> (library)/(package)/doc/index.html file and is generated during package
>> installation. The table itself is generated by
>> tools:::makeVignetteTable, with no sort criterion applied. According to
>> the comments in tools:::.install_package_vignettes3, R ? 3.0.2
>> generates the vignette index at package build time. The vignette index
>> is built by tools:::.build_vignette_index, again, with no sorting, from
>> the output of tools::pkgVignettes.
>>
>> pkgVignettes() seems to loop over vignette engines, then over file name
>> patterns accepted by every vignette engine. A sorting step could be
>> added after the loop, but I'm not sure how to expose the sorting
>> criterion as an API. Time to ask about this on the R-devel mailing list?
>>
>> As for locating the purl'ed scripts, you might be able to convince
>> pkgVignettes() to locate them for you if you rename and place them the
>> right way (you say doc/; shouldn't it be inst/doc?). Take a look at how
>> pkgVignettes calls tools:::find_vignette_product and what the latter
>> function does. But I might be wrong.
>>
>> --
>> Best regards,
>> Ivan
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Jun  1 09:37:00 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 1 Jun 2022 09:37:00 +0200
Subject: [R-pkg-devel] Package Deprecation Message
In-Reply-To: <00db01d87532$e866dea0$b9349be0$@gmail.com>
References: <00db01d87532$e866dea0$b9349be0$@gmail.com>
Message-ID: <69409488-6cd3-590c-03de-f9ae9b3824c4@statistik.tu-dortmund.de>

Please use .onAttach:
Users who directly use yourt package will see it as they will attach 
your package.
Users who use your package via another one (which may load yours) cannot 
do much, as the corresponding maintainer of the other package has to 
change the code. So the idea would be to contact maintainers of reverse 
dependencies explicitly via mail with the deprecation information and 
inform direct users of your package via .onAttach.

Best,
Uwe Ligges




On 31.05.2022 23:10, pikappa.devel at gmail.com wrote:
> Dear all,
> 
>   
> 
> I am looking for a way to communicate the deprecation of a package as a
> newer package supersedes it.
> 
>   
> 
> 1 ) My initial approach was to emit a warning message during the deprecated
> package's loading, i.e., something like the following lines
> 
>   
> 
> .onLoad <- function(libname, pkgname) {
> 
>      message <- "Some deprecation message."
> 
>      rlang::warn(message)
> 
> }
> 
>   
> 
> This approach leads to the following warning during RCHECK
> 
>   
> 
> * checking whether package 'package_name' can be installed ... WARNING
> 
> Found the following significant warnings:
> 
>    Warning: Some deprecation message.
> 
>   
> 
> 2) My subsequent approach was to use packageStartupMessage, i.e.
> 
>   
> 
>   
> 
> .onLoad <- function(libname, pkgname) {
> 
>      message <- "Some deprecation message."
> 
>      packageStartupMessage(message, appendLF = TRUE)
> 
> }
> 
>   
> 
> This approach leads to a note
> 
>   
> 
> * checking R code for possible problems ... NOTE
> 
> File 'package_name/R/zzz.R': .onLoad calls: packageStartupMessage(message,
> appendLF = TRUE)
> 
> See section 'Good practice' in '?.onAttach'.
> 
>   
> 
> Unfortunately, the package fails to pass the CRAN's automated incoming
> checks with this note.
> 
>   
> 
> I have checked the 'Good practice' section of the .onAttach help page. It
> starts with:
> 
>   
> 
> "Loading a namespace should where possible be silent, with startup messages
> given by '.onAttach'.
> 
> These messages (and any essential ones from '.onLoad') should use
> packageStartupMessage so they can be silenced where they would be a
> distraction."
> 
>   
> 
>  From the above passage, I understand that essential messages can be
> communicated from .onLoad. Should I consider the deprecation message as
> essential and leave it in the body of .onLoad, or should I instead use
> .onAttach in order to submit the package to CRAN?
> 
>   
> 
> Is there maybe a better way to communicate that the package is deprecated?
> 
>   
> 
> Kind regards,
> 
> Pantelis
> 
>   
> 
>   
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Wed Jun  1 10:04:43 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Wed, 1 Jun 2022 10:04:43 +0200
Subject: [R-pkg-devel] Sort order of vignette index?;
 adding purl'ed Rcode from asis vignette to vignette index?
In-Reply-To: <D29F12E5-B3EB-440F-92D8-F1C8D88020D1@dcn.davis.ca.us>
References: <CADtpigb8i5fBcCOiJyMXD6hY6J4a4sofLMaf8XYoirM=5mDoXA@mail.gmail.com>
 <CADtpigZQL7f6sex2gbieFaVuQ_ywVPKz7VnYW7wpTHTrJpd-rA@mail.gmail.com>
 <CADtpigYBMaXgFTJin6y1SD5z_4uF-eAD4i0h=sxpF+KdL9hc-w@mail.gmail.com>
 <8d467b58-4268-b856-44ed-d1bdd7b243dc@gmail.com>
 <CADtpigYfhrdUhQtf4a_eEuXo+V_tns7kd9+UAxaGUfzFdWWfFw@mail.gmail.com>
 <20220531100502.6ad5354a@Tarkus>
 <YQXPR01MB4579C84C4B40232949F569C89ADC9@YQXPR01MB4579.CANPRD01.PROD.OUTLOOK.COM>
 <CADtpigY-hp14wS=K8ob-STPDuZ1dwA8LWG5Nws08HkWz_0ysKg@mail.gmail.com>
 <D29F12E5-B3EB-440F-92D8-F1C8D88020D1@dcn.davis.ca.us>
Message-ID: <25239.7579.515401.430977@stat.math.ethz.ch>

>>>>> Jeff Newmiller 
>>>>>     on Tue, 31 May 2022 16:09:16 -0700 writes:

    > FWIW the RStudio build is often not complete... it intentionally takes shortcuts that make test/run iteration faster... but you should make a habit of using the command line to build artifacts for sharing... it will help avoid gotchas.

Yes, definitely.

Notably, e.g., reloading the package sources (often via
devtools) into a running R process instead of restarting R and
loading/attaching the newly built and installed package (that
you are developing) is much faster, but *NOT* equivalent and
sometimes misleading -- because it's not easily possible to
"revert" everything you did in your running R session {caches,
method tables, DLLs, internal pointers, ...}.

(read on, further down)

    > On May 31, 2022 3:53:57 PM PDT, Carl Schwarz <cschwarzstatsfuca at gmail.com> wrote:
    >> Success!
    >> 
    >> Building on MT's note that if the inst/doc has an index.html file, R does
    >> NOT build a new index.
    >> At the end of Writing R Extensions Section 1.4, it states
    >> "  When R CMD build builds the vignettes, it copies these and the vignette
    >> sources from directory vignettes to inst/doc. To install any other files
    >> from the vignettes directory, include a file vignettes/.install_extras which
    >> specifies these as Perl-like regular expressions on one or more lines.."
    >> 
    >> So I copied the existing inst/doc/index.html file from the installed
    >> SighatbilityModel with the wrong sort order to my vignettes/index.html,
    >> edited this index.html file to get the right sort order. The index.html is
    >> just vanilla html so it is easy to modify "manually".
    >> Then I created a vignettes/.install_extras with a single entry "index.html"
    >> and now vignettes/index.html appears to be copied to inst/doc and so stops
    >> the building of the wrongly sorted index.
    >> 
    >> Then I did a Rstudio -> Build -> BuildSourcePackage to create a tar.gz
    >> file; installed from the tar.gz file, and now my vignette index is sorted
    >> properly on my Mac machine.
    >> Also tried using devtools::check_win_release() to generate a windoze zip
    >> file; installed that; and the vignette index is again sorted properly on
    >> Windows machines.
    >> 
    >> I'm hoping I can use this for (b) from my original query as well.
    >> 
    >> This will mean that I have to "manually'" maintain the vignettes/index.html
    >> file, but that is straightforward.
    >> 
    >> I hope this works when I submit to CRAN.
    >> 
    >> How do I suggest to the R maintainers that an explicit section be added to
    >> the Writing R Extensions manual with the above steps so that future package
    >> writers don't repeat history? I'm willing to write the paragraph explaining
    >> the steps, but don't know who/how to proceed to get it added to Writing R
    >> Extensions.
    >> 
    >> Carl Schwarz

The WRE manual is part of the R sources, so formally you are
proposing to improve (the documentation part of) R.

You can propose a patch against the "R-devel" sources.
If the changes are quite small and compact (as here), even on by e-mail.
The source file  is  doc/manual/R-exts.texi
in R's SVN (source server)
  https://svn.r-project.org/R/trunk/doc/manual/R-exts.texi
or one of its mirrors (notably on github)


From Je@n@Th|ou|ou@e @end|ng |rom un|v-|yon1@|r  Wed Jun  1 11:03:48 2022
From: Je@n@Th|ou|ou@e @end|ng |rom un|v-|yon1@|r (THIOULOUSE JEAN)
Date: Wed, 1 Jun 2022 11:03:48 +0200
Subject: [R-pkg-devel] moving from C to C++ with Rcpp in R package
Message-ID: <B05915C3-F374-41C2-9F46-D29AF8F4124F@univ-lyon1.fr>

Hello

I need some help to add C++ functions using Rcpp to the ade4 package.

The ade4 package (on CRAN) already contains many C functions, mainly to perform randomization tests, and we would like to replace some of these functions by C++ ones using Rcpp, as well as add more new C++ functions, using also Rcpp.

To start with, I have only one C++ function and one R wrapper function, named respectively RV.randtest and RVrandtestCpp. Both functions work fine, using sourceCpp("RVrandtestCpp.cpp") and calling it with RV.randtest in R from the command line, and I also checked that the RcppExamples package compiles without problem with my configuration. Everything is available in https://github.com/thioulouse/RVrandtest

Now, I want to integrate these two functions in the ade4 package, so I have done the following things:

- added Rcpp and RcppArmadillo to the Imports field in the DESCRIPTION file
- added the LinkingTo field, with Rcpp and RcppArmadillo in the DESCRIPTION file
- added importFrom("Rcpp", "sourceCpp") in the NAMESPACE file
- added export("RV.randtest") and export("RVrandtestCpp") in the NAMESPACE file
- added RV.randtest.Rd in the man directory and \alias{RVrandtestCpp} in ade4-internal.Rd
- added RV.randtest.R in the R directory
- added RVrandtestCpp.cpp in the src directory

Then I used the Rcpp compileAttributes() function to add:

- RcppExports.cpp in the src directory
- RcppExports.R in the R directory

But when I check the modified ade4 package (with R CMD BUILD / R CMD CHECK), I get the following notes:

* checking R code for possible problems ... NOTE
RVrandtestCpp: no visible binding for global variable
  ?_ade4_RVrandtestCpp?
Undefined global functions or variables:
  _ade4_RVrandtestCpp

And when running the examples I get the following error:

> rv1 <- RV.randtest(pca1$tab, pca2$tab, 99)
Error in RVrandtestCpp(X, Y, nrepet) : 
  object '_ade4_RVrandtestCpp' not found
Calls: RV.randtest -> RVrandtestCpp
Execution halted

So I am probably missing something, and I have the following questions:

Do I have to modify the init.c file in the src directory ? It contains the reference to all the C functions called in the ade4 package, but not the C++ function from Rcpp. Should I add it here ? I tried to do it, with no luck.

The NAMESPACE file contains this first line: 
useDynLib(ade4, .registration = TRUE, .fixes = "C_")
The .fixes argument is related to C function calls. Can this raise a problem for calling C++ functions ?

Why is the _ade4_RVrandtestCpp function (defined by compileAttributes() in RcppExports.cpp) not visible in RVrandtestCpp and not found at runtime ?

Sorry for the long message.
Thank you for any help.

Jean

?-
Jean THIOULOUSE - https://lbbe-web.univ-lyon1.fr/en/annuaires-des-membres/thioulouse-jean
https://orcid.org/0000-0001-7664-0598 (ORCID page)
https://www.springer.com/fr/book/9781493988488 (ade4 Book)
https://pbil.univ-lyon1.fr/JTHome/Biblio/ThioulouseEB2021.pdf (Evol. Biol. paper)


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Jun  1 22:14:17 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 1 Jun 2022 23:14:17 +0300
Subject: [R-pkg-devel] moving from C to C++ with Rcpp in R package
In-Reply-To: <B05915C3-F374-41C2-9F46-D29AF8F4124F@univ-lyon1.fr>
References: <B05915C3-F374-41C2-9F46-D29AF8F4124F@univ-lyon1.fr>
Message-ID: <20220601231417.317a76f3@Tarkus>

On Wed, 1 Jun 2022 11:03:48 +0200
THIOULOUSE JEAN <Jean.Thioulouse at univ-lyon1.fr> wrote:

> Do I have to modify the init.c file in the src directory ? It
> contains the reference to all the C functions called in the ade4
> package, but not the C++ function from Rcpp. Should I add it here ? I
> tried to do it, with no luck.

Yes, this is likely the right thing to do. Can you commit your pending
modifications to ade4 in a separate branch to let everyone look at it?
What you describe sounds right. There's probably some small detail
you're missing.

> Why is the _ade4_RVrandtestCpp function (defined by
> compileAttributes() in RcppExports.cpp) not visible in RVrandtestCpp
> and not found at runtime ?

It has to be mentioned in a struct R_CallMethodDef entry, passed to the
third argument of R_registerRoutines() in your R_init_ade4 function in
src/init.c.

-- 
Best regards,
Ivan


From edd @end|ng |rom deb|@n@org  Wed Jun  1 22:18:47 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 1 Jun 2022 15:18:47 -0500
Subject: [R-pkg-devel] moving from C to C++ with Rcpp in R package
In-Reply-To: <B05915C3-F374-41C2-9F46-D29AF8F4124F@univ-lyon1.fr>
References: <B05915C3-F374-41C2-9F46-D29AF8F4124F@univ-lyon1.fr>
Message-ID: <25239.51623.251833.275516@rob.eddelbuettel.com>


On 1 June 2022 at 11:03, THIOULOUSE JEAN wrote:
| Hello
| 
| I need some help to add C++ functions using Rcpp to the ade4 package.
| 
| The ade4 package (on CRAN) already contains many C functions, mainly to perform randomization tests, and we would like to replace some of these functions by C++ ones using Rcpp, as well as add more new C++ functions, using also Rcpp.
| 
| To start with, I have only one C++ function and one R wrapper function, named respectively RV.randtest and RVrandtestCpp. Both functions work fine, using sourceCpp("RVrandtestCpp.cpp") and calling it with RV.randtest in R from the command line, and I also checked that the RcppExamples package compiles without problem with my configuration. Everything is available in https://github.com/thioulouse/RVrandtest
| 
| Now, I want to integrate these two functions in the ade4 package, so I have done the following things:
| 
| - added Rcpp and RcppArmadillo to the Imports field in the DESCRIPTION file
| - added the LinkingTo field, with Rcpp and RcppArmadillo in the DESCRIPTION file
| - added importFrom("Rcpp", "sourceCpp") in the NAMESPACE file
| - added export("RV.randtest") and export("RVrandtestCpp") in the NAMESPACE file
| - added RV.randtest.Rd in the man directory and \alias{RVrandtestCpp} in ade4-internal.Rd
| - added RV.randtest.R in the R directory
| - added RVrandtestCpp.cpp in the src directory
| 
| Then I used the Rcpp compileAttributes() function to add:
| 
| - RcppExports.cpp in the src directory
| - RcppExports.R in the R directory
| 
| But when I check the modified ade4 package (with R CMD BUILD / R CMD CHECK), I get the following notes:
| 
| * checking R code for possible problems ... NOTE
| RVrandtestCpp: no visible binding for global variable
|   ?_ade4_RVrandtestCpp?
| Undefined global functions or variables:
|   _ade4_RVrandtestCpp
| 
| And when running the examples I get the following error:
| 
| > rv1 <- RV.randtest(pca1$tab, pca2$tab, 99)
| Error in RVrandtestCpp(X, Y, nrepet) : 
|   object '_ade4_RVrandtestCpp' not found
| Calls: RV.randtest -> RVrandtestCpp
| Execution halted
| 
| So I am probably missing something, and I have the following questions:
| 
| Do I have to modify the init.c file in the src directory ? It contains the reference to all the C functions called in the ade4 package, but not the C++ function from Rcpp. Should I add it here ? I tried to do it, with no luck.
| 
| The NAMESPACE file contains this first line: 
| useDynLib(ade4, .registration = TRUE, .fixes = "C_")
| The .fixes argument is related to C function calls. Can this raise a problem for calling C++ functions ?
| 
| Why is the _ade4_RVrandtestCpp function (defined by compileAttributes() in RcppExports.cpp) not visible in RVrandtestCpp and not found at runtime ?

You most likely have an issue with the code commonly placed in src/init.c
which registers entry points.

Rcpp is rather good at autogenerating it for more standard packages
containing only C++ code.  Mixing C and C++ code is not something the package
is that well set up for.  I think I fought the same issue in the past on
packages that transitioned, or just added a C++ file or two. I don't think
there is a great solution.  I would suggest you
 - use the init.c you have from the existing package
 - create a new one-off package with the C++ functions you want to use 
 - manually carry this over to your existing init.c
 
I would generally recommend starting with Rcpp.package.skeleton("testpackage")
(or a similar name) and try to move your package to a similar structure. The
'all files in one directory' you have in https://github.com/thioulouse/RVrandtest
is not what R prefers.

Follow-up may be more suitable for the rcpp-devel list.  This list here is
general interest, your question is a bit more specific to ins and outs of
just one package.

Best, Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From c@chw@rz@t@t@|uc@ @end|ng |rom gm@||@com  Wed Jun  1 23:47:13 2022
From: c@chw@rz@t@t@|uc@ @end|ng |rom gm@||@com (Carl Schwarz)
Date: Wed, 1 Jun 2022 14:47:13 -0700
Subject: [R-pkg-devel] Sort order of vignette index?;
 adding purl'ed Rcode from asis vignette to vignette index?
In-Reply-To: <25239.7579.515401.430977@stat.math.ethz.ch>
References: <CADtpigb8i5fBcCOiJyMXD6hY6J4a4sofLMaf8XYoirM=5mDoXA@mail.gmail.com>
 <CADtpigZQL7f6sex2gbieFaVuQ_ywVPKz7VnYW7wpTHTrJpd-rA@mail.gmail.com>
 <CADtpigYBMaXgFTJin6y1SD5z_4uF-eAD4i0h=sxpF+KdL9hc-w@mail.gmail.com>
 <8d467b58-4268-b856-44ed-d1bdd7b243dc@gmail.com>
 <CADtpigYfhrdUhQtf4a_eEuXo+V_tns7kd9+UAxaGUfzFdWWfFw@mail.gmail.com>
 <20220531100502.6ad5354a@Tarkus>
 <YQXPR01MB4579C84C4B40232949F569C89ADC9@YQXPR01MB4579.CANPRD01.PROD.OUTLOOK.COM>
 <CADtpigY-hp14wS=K8ob-STPDuZ1dwA8LWG5Nws08HkWz_0ysKg@mail.gmail.com>
 <D29F12E5-B3EB-440F-92D8-F1C8D88020D1@dcn.davis.ca.us>
 <25239.7579.515401.430977@stat.math.ethz.ch>
Message-ID: <CADtpigYFiR=W_VDeDFmo=r95f-FfF4GGV=gDZCorL_020BQVKQ@mail.gmail.com>

Here is some suggested text to be added to the Writing R Extensions manual.
Any suggestions for changes?

1.4.3. Customizing the vignette help index

R provides two indices to the vignettes in a package  (a) the
browseVignettes() function and (b) the html index of vignettes and other
user documentation available when you use help(package=xxx). The latter is
built when the package is installed.



In some cases, customization of the html index is desirable. For example,
currently the entries in the index  are sorted by the vignette engine used
to build the vignette and then by the file name of the vignette and a
different sort order may be desired. Or additional documents may wish to be
included, e.g., the purl()?d code from an ?asis? vignette.



Previous sections of this guide indicate that if an ?index.html? file is
present in the inst/doc directory at the time of the build, then a new
?index.html? file will not be built. Previous sections also indicate how to
add additional files to the inst/doc directory. The following is then a
summary of the steps needed to customize the html index to the vignettes in
a package.



1. Create a revised ?index.html? file in the vignettes directory. It may be
easiest to copy an existing ?doc/index.html? file from an installed
package. The vignettes/index.html file should be in plain html and can be
modified to change the sort order or to add links to additional files to be
available to users. Note that files are referred to using relative path
names ? follow the pattern in the copied file.



2. Add any other additional files to the vignettes directory that are to be
available to the user via the vignette help index.



3. Add an ?.install_extras? file to the vignettes directory (don?t forget
the leading period in this file?s name). This is a text file with the names
of the files in the vignettes directory to be added to the inst/doc
directory. Each line can be coded as a regular expression. At a minimum,
include ?index.html? to copy the vignettes/index.html file to the inst/doc
directory.



4. Check/build the package in the regular way.



There is no evident way to modify the output of the browseVignettes()
function; however, this function currently sorts by the vignette file name
regardless of the vignette engine used.

On Wed, Jun 1, 2022 at 1:04 AM Martin Maechler <maechler at stat.math.ethz.ch>
wrote:

> >>>>> Jeff Newmiller
> >>>>>     on Tue, 31 May 2022 16:09:16 -0700 writes:
>
>     > FWIW the RStudio build is often not complete... it intentionally
> takes shortcuts that make test/run iteration faster... but you should make
> a habit of using the command line to build artifacts for sharing... it will
> help avoid gotchas.
>
> Yes, definitely.
>
> Notably, e.g., reloading the package sources (often via
> devtools) into a running R process instead of restarting R and
> loading/attaching the newly built and installed package (that
> you are developing) is much faster, but *NOT* equivalent and
> sometimes misleading -- because it's not easily possible to
> "revert" everything you did in your running R session {caches,
> method tables, DLLs, internal pointers, ...}.
>
> (read on, further down)
>
>     > On May 31, 2022 3:53:57 PM PDT, Carl Schwarz <
> cschwarzstatsfuca at gmail.com> wrote:
>     >> Success!
>     >>
>     >> Building on MT's note that if the inst/doc has an index.html file,
> R does
>     >> NOT build a new index.
>     >> At the end of Writing R Extensions Section 1.4, it states
>     >> "  When R CMD build builds the vignettes, it copies these and the
> vignette
>     >> sources from directory vignettes to inst/doc. To install any other
> files
>     >> from the vignettes directory, include a file
> vignettes/.install_extras which
>     >> specifies these as Perl-like regular expressions on one or more
> lines.."
>     >>
>     >> So I copied the existing inst/doc/index.html file from the installed
>     >> SighatbilityModel with the wrong sort order to my
> vignettes/index.html,
>     >> edited this index.html file to get the right sort order. The
> index.html is
>     >> just vanilla html so it is easy to modify "manually".
>     >> Then I created a vignettes/.install_extras with a single entry
> "index.html"
>     >> and now vignettes/index.html appears to be copied to inst/doc and
> so stops
>     >> the building of the wrongly sorted index.
>     >>
>     >> Then I did a Rstudio -> Build -> BuildSourcePackage to create a
> tar.gz
>     >> file; installed from the tar.gz file, and now my vignette index is
> sorted
>     >> properly on my Mac machine.
>     >> Also tried using devtools::check_win_release() to generate a
> windoze zip
>     >> file; installed that; and the vignette index is again sorted
> properly on
>     >> Windows machines.
>     >>
>     >> I'm hoping I can use this for (b) from my original query as well.
>     >>
>     >> This will mean that I have to "manually'" maintain the
> vignettes/index.html
>     >> file, but that is straightforward.
>     >>
>     >> I hope this works when I submit to CRAN.
>     >>
>     >> How do I suggest to the R maintainers that an explicit section be
> added to
>     >> the Writing R Extensions manual with the above steps so that future
> package
>     >> writers don't repeat history? I'm willing to write the paragraph
> explaining
>     >> the steps, but don't know who/how to proceed to get it added to
> Writing R
>     >> Extensions.
>     >>
>     >> Carl Schwarz
>
> The WRE manual is part of the R sources, so formally you are
> proposing to improve (the documentation part of) R.
>
> You can propose a patch against the "R-devel" sources.
> If the changes are quite small and compact (as here), even on by e-mail.
> The source file  is  doc/manual/R-exts.texi
> in R's SVN (source server)
>   https://svn.r-project.org/R/trunk/doc/manual/R-exts.texi
> or one of its mirrors (notably on github)
>

	[[alternative HTML version deleted]]


From @eb@meyer @end|ng |rom |@u@de  Thu Jun  2 10:22:49 2022
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Thu, 2 Jun 2022 10:22:49 +0200
Subject: [R-pkg-devel] Sort order of vignette index?;
 adding purl'ed Rcode from asis vignette to vignette index?
In-Reply-To: <CADtpigYFiR=W_VDeDFmo=r95f-FfF4GGV=gDZCorL_020BQVKQ@mail.gmail.com>
References: <CADtpigb8i5fBcCOiJyMXD6hY6J4a4sofLMaf8XYoirM=5mDoXA@mail.gmail.com>
 <CADtpigZQL7f6sex2gbieFaVuQ_ywVPKz7VnYW7wpTHTrJpd-rA@mail.gmail.com>
 <CADtpigYBMaXgFTJin6y1SD5z_4uF-eAD4i0h=sxpF+KdL9hc-w@mail.gmail.com>
 <8d467b58-4268-b856-44ed-d1bdd7b243dc@gmail.com>
 <CADtpigYfhrdUhQtf4a_eEuXo+V_tns7kd9+UAxaGUfzFdWWfFw@mail.gmail.com>
 <20220531100502.6ad5354a@Tarkus>
 <YQXPR01MB4579C84C4B40232949F569C89ADC9@YQXPR01MB4579.CANPRD01.PROD.OUTLOOK.COM>
 <CADtpigY-hp14wS=K8ob-STPDuZ1dwA8LWG5Nws08HkWz_0ysKg@mail.gmail.com>
 <D29F12E5-B3EB-440F-92D8-F1C8D88020D1@dcn.davis.ca.us>
 <25239.7579.515401.430977@stat.math.ethz.ch>
 <CADtpigYFiR=W_VDeDFmo=r95f-FfF4GGV=gDZCorL_020BQVKQ@mail.gmail.com>
Message-ID: <424d9afa-0e31-9254-e1e8-b3b3f570b87a@fau.de>

Some quick comments:

- You could place the index.html directly in the inst/doc folder of your 
package sources, avoiding the need for .install_extras from the 
vignettes folder. This approach is useful if there is additional 
non-vignette material in inst/doc.

- As you say, links in index.html need to be relative to the installed 
*doc* dir, where the index file is located. For example, the simple links
     <a href="template.R">template script</a>,
     <a href="vignetteA.Rnw">source of vignette A</a>
should work to reference a static Rscript inst/doc/template.R and a 
vignette built from vignettes/vignetteA.Rnw (copied to inst/doc by R CMD 
build), respectively.

- It seems you could even generate the index.html via a vignette, 
index.Rmd, say. The downside is that this index vignette will be listed 
as a vignette (by browseVignettes(), for example) although it isn't 
really a vignette.

- browseVignettes() sorts by vignette title, not by file name. 
Furthermore, its purpose is to browse *vignettes* also across packages, 
so is unrelated to the *doc* index for a given package, which may 
contain more than vignettes.

Best regards,

	Sebastian Meyer


Am 01.06.22 um 23:47 schrieb Carl Schwarz:
> Here is some suggested text to be added to the Writing R Extensions manual.
> Any suggestions for changes?
> 
> 1.4.3. Customizing the vignette help index
> 
> R provides two indices to the vignettes in a package  (a) the
> browseVignettes() function and (b) the html index of vignettes and other
> user documentation available when you use help(package=xxx). The latter is
> built when the package is installed.
> 
> 
> 
> In some cases, customization of the html index is desirable. For example,
> currently the entries in the index  are sorted by the vignette engine used
> to build the vignette and then by the file name of the vignette and a
> different sort order may be desired. Or additional documents may wish to be
> included, e.g., the purl()?d code from an ?asis? vignette.
> 
> 
> 
> Previous sections of this guide indicate that if an ?index.html? file is
> present in the inst/doc directory at the time of the build, then a new
> ?index.html? file will not be built. Previous sections also indicate how to
> add additional files to the inst/doc directory. The following is then a
> summary of the steps needed to customize the html index to the vignettes in
> a package.
> 
> 
> 
> 1. Create a revised ?index.html? file in the vignettes directory. It may be
> easiest to copy an existing ?doc/index.html? file from an installed
> package. The vignettes/index.html file should be in plain html and can be
> modified to change the sort order or to add links to additional files to be
> available to users. Note that files are referred to using relative path
> names ? follow the pattern in the copied file.
> 
> 
> 
> 2. Add any other additional files to the vignettes directory that are to be
> available to the user via the vignette help index.
> 
> 
> 
> 3. Add an ?.install_extras? file to the vignettes directory (don?t forget
> the leading period in this file?s name). This is a text file with the names
> of the files in the vignettes directory to be added to the inst/doc
> directory. Each line can be coded as a regular expression. At a minimum,
> include ?index.html? to copy the vignettes/index.html file to the inst/doc
> directory.
> 
> 
> 
> 4. Check/build the package in the regular way.
> 
> 
> 
> There is no evident way to modify the output of the browseVignettes()
> function; however, this function currently sorts by the vignette file name
> regardless of the vignette engine used.
> 
> On Wed, Jun 1, 2022 at 1:04 AM Martin Maechler <maechler at stat.math.ethz.ch>
> wrote:
> 
>>>>>>> Jeff Newmiller
>>>>>>>      on Tue, 31 May 2022 16:09:16 -0700 writes:
>>
>>      > FWIW the RStudio build is often not complete... it intentionally
>> takes shortcuts that make test/run iteration faster... but you should make
>> a habit of using the command line to build artifacts for sharing... it will
>> help avoid gotchas.
>>
>> Yes, definitely.
>>
>> Notably, e.g., reloading the package sources (often via
>> devtools) into a running R process instead of restarting R and
>> loading/attaching the newly built and installed package (that
>> you are developing) is much faster, but *NOT* equivalent and
>> sometimes misleading -- because it's not easily possible to
>> "revert" everything you did in your running R session {caches,
>> method tables, DLLs, internal pointers, ...}.
>>
>> (read on, further down)
>>
>>      > On May 31, 2022 3:53:57 PM PDT, Carl Schwarz <
>> cschwarzstatsfuca at gmail.com> wrote:
>>      >> Success!
>>      >>
>>      >> Building on MT's note that if the inst/doc has an index.html file,
>> R does
>>      >> NOT build a new index.
>>      >> At the end of Writing R Extensions Section 1.4, it states
>>      >> "  When R CMD build builds the vignettes, it copies these and the
>> vignette
>>      >> sources from directory vignettes to inst/doc. To install any other
>> files
>>      >> from the vignettes directory, include a file
>> vignettes/.install_extras which
>>      >> specifies these as Perl-like regular expressions on one or more
>> lines.."
>>      >>
>>      >> So I copied the existing inst/doc/index.html file from the installed
>>      >> SighatbilityModel with the wrong sort order to my
>> vignettes/index.html,
>>      >> edited this index.html file to get the right sort order. The
>> index.html is
>>      >> just vanilla html so it is easy to modify "manually".
>>      >> Then I created a vignettes/.install_extras with a single entry
>> "index.html"
>>      >> and now vignettes/index.html appears to be copied to inst/doc and
>> so stops
>>      >> the building of the wrongly sorted index.
>>      >>
>>      >> Then I did a Rstudio -> Build -> BuildSourcePackage to create a
>> tar.gz
>>      >> file; installed from the tar.gz file, and now my vignette index is
>> sorted
>>      >> properly on my Mac machine.
>>      >> Also tried using devtools::check_win_release() to generate a
>> windoze zip
>>      >> file; installed that; and the vignette index is again sorted
>> properly on
>>      >> Windows machines.
>>      >>
>>      >> I'm hoping I can use this for (b) from my original query as well.
>>      >>
>>      >> This will mean that I have to "manually'" maintain the
>> vignettes/index.html
>>      >> file, but that is straightforward.
>>      >>
>>      >> I hope this works when I submit to CRAN.
>>      >>
>>      >> How do I suggest to the R maintainers that an explicit section be
>> added to
>>      >> the Writing R Extensions manual with the above steps so that future
>> package
>>      >> writers don't repeat history? I'm willing to write the paragraph
>> explaining
>>      >> the steps, but don't know who/how to proceed to get it added to
>> Writing R
>>      >> Extensions.
>>      >>
>>      >> Carl Schwarz
>>
>> The WRE manual is part of the R sources, so formally you are
>> proposing to improve (the documentation part of) R.
>>
>> You can propose a patch against the "R-devel" sources.
>> If the changes are quite small and compact (as here), even on by e-mail.
>> The source file  is  doc/manual/R-exts.texi
>> in R's SVN (source server)
>>    https://svn.r-project.org/R/trunk/doc/manual/R-exts.texi
>> or one of its mirrors (notably on github)
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From Je@n@Th|ou|ou@e @end|ng |rom un|v-|yon1@|r  Thu Jun  2 15:06:44 2022
From: Je@n@Th|ou|ou@e @end|ng |rom un|v-|yon1@|r (THIOULOUSE JEAN)
Date: Thu, 2 Jun 2022 15:06:44 +0200
Subject: [R-pkg-devel] moving from C to C++ with Rcpp in R package
In-Reply-To: <25239.51623.251833.275516@rob.eddelbuettel.com>
References: <B05915C3-F374-41C2-9F46-D29AF8F4124F@univ-lyon1.fr>
 <25239.51623.251833.275516@rob.eddelbuettel.com>
Message-ID: <EB4BA05D-4EF0-43A3-ADE9-E524AAB8A74F@univ-lyon1.fr>


Thank you Ivan and Dirk for your messages. I tried to follow your advice (modifying the src/init.c file by hand to add the things from the C++ function), but the function R_init_ade4 cannot be defined in both init.c and RcppExports.cpp. So I still have the same problem ("object '_ade4_RVrandtestCpp' not found").

As suggested by Ivan Krylov, I have created a new branch of the ade4 package (called ade4-Rcpp on github: https://github.com/sdray/ade4/tree/ade4-Rcpp) with the modifications listed here.

I am also cc-ing this message to rcpp-devel that may be more suitable for followups.

Thank you again for your help,
Jean


> Le 1 juin 2022 ? 22:18, Dirk Eddelbuettel <edd at debian.org> a ?crit :
> 
> 
> On 1 June 2022 at 11:03, THIOULOUSE JEAN wrote:
> | Hello
> | 
> | I need some help to add C++ functions using Rcpp to the ade4 package.
> | 
> | The ade4 package (on CRAN) already contains many C functions, mainly to perform randomization tests, and we would like to replace some of these functions by C++ ones using Rcpp, as well as add more new C++ functions, using also Rcpp.
> | 
> | To start with, I have only one C++ function and one R wrapper function, named respectively RV.randtest and RVrandtestCpp. Both functions work fine, using sourceCpp("RVrandtestCpp.cpp") and calling it with RV.randtest in R from the command line, and I also checked that the RcppExamples package compiles without problem with my configuration. Everything is available in https://github.com/thioulouse/RVrandtest
> | 
> | Now, I want to integrate these two functions in the ade4 package, so I have done the following things:
> | 
> | - added Rcpp and RcppArmadillo to the Imports field in the DESCRIPTION file
> | - added the LinkingTo field, with Rcpp and RcppArmadillo in the DESCRIPTION file
> | - added importFrom("Rcpp", "sourceCpp") in the NAMESPACE file
> | - added export("RV.randtest") and export("RVrandtestCpp") in the NAMESPACE file
> | - added RV.randtest.Rd in the man directory and \alias{RVrandtestCpp} in ade4-internal.Rd
> | - added RV.randtest.R in the R directory
> | - added RVrandtestCpp.cpp in the src directory
> | 
> | Then I used the Rcpp compileAttributes() function to add:
> | 
> | - RcppExports.cpp in the src directory
> | - RcppExports.R in the R directory
> | 
> | But when I check the modified ade4 package (with R CMD BUILD / R CMD CHECK), I get the following notes:
> | 
> | * checking R code for possible problems ... NOTE
> | RVrandtestCpp: no visible binding for global variable
> |   ?_ade4_RVrandtestCpp?
> | Undefined global functions or variables:
> |   _ade4_RVrandtestCpp
> | 
> | And when running the examples I get the following error:
> | 
> | > rv1 <- RV.randtest(pca1$tab, pca2$tab, 99)
> | Error in RVrandtestCpp(X, Y, nrepet) : 
> |   object '_ade4_RVrandtestCpp' not found
> | Calls: RV.randtest -> RVrandtestCpp
> | Execution halted
> | 
> | So I am probably missing something, and I have the following questions:
> | 
> | Do I have to modify the init.c file in the src directory ? It contains the reference to all the C functions called in the ade4 package, but not the C++ function from Rcpp. Should I add it here ? I tried to do it, with no luck.
> | 
> | The NAMESPACE file contains this first line: 
> | useDynLib(ade4, .registration = TRUE, .fixes = "C_")
> | The .fixes argument is related to C function calls. Can this raise a problem for calling C++ functions ?
> | 
> | Why is the _ade4_RVrandtestCpp function (defined by compileAttributes() in RcppExports.cpp) not visible in RVrandtestCpp and not found at runtime ?
> 
> You most likely have an issue with the code commonly placed in src/init.c
> which registers entry points.
> 
> Rcpp is rather good at autogenerating it for more standard packages
> containing only C++ code.  Mixing C and C++ code is not something the package
> is that well set up for.  I think I fought the same issue in the past on
> packages that transitioned, or just added a C++ file or two. I don't think
> there is a great solution.  I would suggest you
> - use the init.c you have from the existing package
> - create a new one-off package with the C++ functions you want to use 
> - manually carry this over to your existing init.c
> 
> I would generally recommend starting with Rcpp.package.skeleton("testpackage")
> (or a similar name) and try to move your package to a similar structure. The
> 'all files in one directory' you have in https://github.com/thioulouse/RVrandtest
> is not what R prefers.
> 
> Follow-up may be more suitable for the rcpp-devel list.  This list here is
> general interest, your question is a bit more specific to ins and outs of
> just one package.
> 
> Best, Dirk
> 
> -- 
> dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Jun  2 15:24:20 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 2 Jun 2022 16:24:20 +0300
Subject: [R-pkg-devel] moving from C to C++ with Rcpp in R package
In-Reply-To: <EB4BA05D-4EF0-43A3-ADE9-E524AAB8A74F@univ-lyon1.fr>
References: <B05915C3-F374-41C2-9F46-D29AF8F4124F@univ-lyon1.fr>
 <25239.51623.251833.275516@rob.eddelbuettel.com>
 <EB4BA05D-4EF0-43A3-ADE9-E524AAB8A74F@univ-lyon1.fr>
Message-ID: <20220602162420.5ee5d711@arachnoid>

? Thu, 2 Jun 2022 15:06:44 +0200
THIOULOUSE JEAN <Jean.Thioulouse at univ-lyon1.fr> ?????:

> "object '_ade4_RVrandtestCpp' not found").

> static const R_CallMethodDef CallEntries[] = {
>     {"_ade4_RVrandtestCpp", (DL_FUNC) &_ade4_RVrandtestCpp, 3},
>     {NULL, NULL, 0}
> };

Almost there. Since you're using the fixes = 'C_' argument to
useDynLib, you need to .Call() the variable called C__ade4_RVrandtestCpp
in your R code, not _ade4_RVrandtestCpp.

You can verify the symbol name by installing the package and searching
for it in the package namespace:

grep(
 'rv.*randtest', ls(loadNamespace('ade4'), all = TRUE),
 ignore.case = TRUE, value = TRUE
)

Unfortunately, this means editing RcppExports.R, which (I think)
prevents you from enjoying the way Rcpp::compileAttributes() sets
everything up for you.

-- 
Best regards,
Ivan


From je@n@th|ou|ou@e @end|ng |rom un|v-|yon1@|r  Thu Jun  2 19:00:17 2022
From: je@n@th|ou|ou@e @end|ng |rom un|v-|yon1@|r (Jean Thioulouse)
Date: Thu, 2 Jun 2022 19:00:17 +0200
Subject: [R-pkg-devel] moving from C to C++ with Rcpp in R package
In-Reply-To: <20220602162420.5ee5d711@arachnoid>
References: <B05915C3-F374-41C2-9F46-D29AF8F4124F@univ-lyon1.fr>
 <25239.51623.251833.275516@rob.eddelbuettel.com>
 <EB4BA05D-4EF0-43A3-ADE9-E524AAB8A74F@univ-lyon1.fr>
 <20220602162420.5ee5d711@arachnoid>
Message-ID: <459230A2-6DBE-4782-B0E2-E10263691952@univ-lyon1.fr>


Thanks a lot ! Package compiles and runs fine now. I must keep the  .fixes = "C_" argument in the useDynLib function of the NAMESPACE file because there are still many C functions in the package. So adding C_ to Rcpp function names is a good workaround for now.

Thanks again
Jean


> Le 2 juin 2022 ? 15:24, Ivan Krylov <krylov.r00t at gmail.com> a ?crit :
> 
> ? Thu, 2 Jun 2022 15:06:44 +0200
> THIOULOUSE JEAN <Jean.Thioulouse at univ-lyon1.fr> ?????:
> 
>> "object '_ade4_RVrandtestCpp' not found").
> 
>> static const R_CallMethodDef CallEntries[] = {
>>    {"_ade4_RVrandtestCpp", (DL_FUNC) &_ade4_RVrandtestCpp, 3},
>>    {NULL, NULL, 0}
>> };
> 
> Almost there. Since you're using the fixes = 'C_' argument to
> useDynLib, you need to .Call() the variable called C__ade4_RVrandtestCpp
> in your R code, not _ade4_RVrandtestCpp.
> 
> You can verify the symbol name by installing the package and searching
> for it in the package namespace:
> 
> grep(
> 'rv.*randtest', ls(loadNamespace('ade4'), all = TRUE),
> ignore.case = TRUE, value = TRUE
> )
> 
> Unfortunately, this means editing RcppExports.R, which (I think)
> prevents you from enjoying the way Rcpp::compileAttributes() sets
> everything up for you.
> 
> -- 
> Best regards,
> Ivan


From c@chw@rz@t@t@|uc@ @end|ng |rom gm@||@com  Thu Jun  2 19:39:30 2022
From: c@chw@rz@t@t@|uc@ @end|ng |rom gm@||@com (Carl Schwarz)
Date: Thu, 2 Jun 2022 10:39:30 -0700
Subject: [R-pkg-devel] Sort order of vignette index?;
 adding purl'ed Rcode from asis vignette to vignette index?
In-Reply-To: <424d9afa-0e31-9254-e1e8-b3b3f570b87a@fau.de>
References: <CADtpigb8i5fBcCOiJyMXD6hY6J4a4sofLMaf8XYoirM=5mDoXA@mail.gmail.com>
 <CADtpigZQL7f6sex2gbieFaVuQ_ywVPKz7VnYW7wpTHTrJpd-rA@mail.gmail.com>
 <CADtpigYBMaXgFTJin6y1SD5z_4uF-eAD4i0h=sxpF+KdL9hc-w@mail.gmail.com>
 <8d467b58-4268-b856-44ed-d1bdd7b243dc@gmail.com>
 <CADtpigYfhrdUhQtf4a_eEuXo+V_tns7kd9+UAxaGUfzFdWWfFw@mail.gmail.com>
 <20220531100502.6ad5354a@Tarkus>
 <YQXPR01MB4579C84C4B40232949F569C89ADC9@YQXPR01MB4579.CANPRD01.PROD.OUTLOOK.COM>
 <CADtpigY-hp14wS=K8ob-STPDuZ1dwA8LWG5Nws08HkWz_0ysKg@mail.gmail.com>
 <D29F12E5-B3EB-440F-92D8-F1C8D88020D1@dcn.davis.ca.us>
 <25239.7579.515401.430977@stat.math.ethz.ch>
 <CADtpigYFiR=W_VDeDFmo=r95f-FfF4GGV=gDZCorL_020BQVKQ@mail.gmail.com>
 <424d9afa-0e31-9254-e1e8-b3b3f570b87a@fau.de>
Message-ID: <CADtpigaSyS_kZ-Sr3evT=6jaybsGiNGfxQVoVTLPZzE+zLPdHg@mail.gmail.com>

Thanks for the suggestions.

(a) Unfortunately, if you place the index.html directly into the inst/doc
directory, it is overwritten when the package source file (*tar.gz) is
created and then installed.
This is using RStudio on a Mac.... I did not try this on a Windows machine.

But other files that you place in the inst/doc file are left alone and are
listed under the vignette index when you follow the "User guides, package
vignettes and other documentation" link.

So strange that the index is overwritten but other files are left alone.

(b) The relative links that are generated are quite long, e.g. <a
href="../../../library/SightabilityModel/doc/c-MoosePopR-SightabilityPopR-Demo.html">HTML</a>
and I don't fully understand where the "current" directory is when you
follow the "User guides, package vignettes and other
documentation" requiring you to go back up the directory tree and then go
back down.
I copied and modified these odd links for my other files and it worked fine.

(c) I have not tried the index.Rmd approach...

Carl.

On Thu, Jun 2, 2022 at 1:22 AM Sebastian Meyer <seb.meyer at fau.de> wrote:

> Some quick comments:
>
> - You could place the index.html directly in the inst/doc folder of your
> package sources, avoiding the need for .install_extras from the
> vignettes folder. This approach is useful if there is additional
> non-vignette material in inst/doc.
>
> - As you say, links in index.html need to be relative to the installed
> *doc* dir, where the index file is located. For example, the simple links
>      <a href="template.R">template script</a>,
>      <a href="vignetteA.Rnw">source of vignette A</a>
> should work to reference a static Rscript inst/doc/template.R and a
> vignette built from vignettes/vignetteA.Rnw (copied to inst/doc by R CMD
> build), respectively.
>
> - It seems you could even generate the index.html via a vignette,
> index.Rmd, say. The downside is that this index vignette will be listed
> as a vignette (by browseVignettes(), for example) although it isn't
> really a vignette.
>
> - browseVignettes() sorts by vignette title, not by file name.
> Furthermore, its purpose is to browse *vignettes* also across packages,
> so is unrelated to the *doc* index for a given package, which may
> contain more than vignettes.
>
> Best regards,
>
>         Sebastian Meyer
>
>
> Am 01.06.22 um 23:47 schrieb Carl Schwarz:
> > Here is some suggested text to be added to the Writing R Extensions
> manual.
> > Any suggestions for changes?
> >
> > 1.4.3. Customizing the vignette help index
> >
> > R provides two indices to the vignettes in a package  (a) the
> > browseVignettes() function and (b) the html index of vignettes and other
> > user documentation available when you use help(package=xxx). The latter
> is
> > built when the package is installed.
> >
> >
> >
> > In some cases, customization of the html index is desirable. For example,
> > currently the entries in the index  are sorted by the vignette engine
> used
> > to build the vignette and then by the file name of the vignette and a
> > different sort order may be desired. Or additional documents may wish to
> be
> > included, e.g., the purl()?d code from an ?asis? vignette.
> >
> >
> >
> > Previous sections of this guide indicate that if an ?index.html? file is
> > present in the inst/doc directory at the time of the build, then a new
> > ?index.html? file will not be built. Previous sections also indicate how
> to
> > add additional files to the inst/doc directory. The following is then a
> > summary of the steps needed to customize the html index to the vignettes
> in
> > a package.
> >
> >
> >
> > 1. Create a revised ?index.html? file in the vignettes directory. It may
> be
> > easiest to copy an existing ?doc/index.html? file from an installed
> > package. The vignettes/index.html file should be in plain html and can be
> > modified to change the sort order or to add links to additional files to
> be
> > available to users. Note that files are referred to using relative path
> > names ? follow the pattern in the copied file.
> >
> >
> >
> > 2. Add any other additional files to the vignettes directory that are to
> be
> > available to the user via the vignette help index.
> >
> >
> >
> > 3. Add an ?.install_extras? file to the vignettes directory (don?t forget
> > the leading period in this file?s name). This is a text file with the
> names
> > of the files in the vignettes directory to be added to the inst/doc
> > directory. Each line can be coded as a regular expression. At a minimum,
> > include ?index.html? to copy the vignettes/index.html file to the
> inst/doc
> > directory.
> >
> >
> >
> > 4. Check/build the package in the regular way.
> >
> >
> >
> > There is no evident way to modify the output of the browseVignettes()
> > function; however, this function currently sorts by the vignette file
> name
> > regardless of the vignette engine used.
> >
> > On Wed, Jun 1, 2022 at 1:04 AM Martin Maechler <
> maechler at stat.math.ethz.ch>
> > wrote:
> >
> >>>>>>> Jeff Newmiller
> >>>>>>>      on Tue, 31 May 2022 16:09:16 -0700 writes:
> >>
> >>      > FWIW the RStudio build is often not complete... it intentionally
> >> takes shortcuts that make test/run iteration faster... but you should
> make
> >> a habit of using the command line to build artifacts for sharing... it
> will
> >> help avoid gotchas.
> >>
> >> Yes, definitely.
> >>
> >> Notably, e.g., reloading the package sources (often via
> >> devtools) into a running R process instead of restarting R and
> >> loading/attaching the newly built and installed package (that
> >> you are developing) is much faster, but *NOT* equivalent and
> >> sometimes misleading -- because it's not easily possible to
> >> "revert" everything you did in your running R session {caches,
> >> method tables, DLLs, internal pointers, ...}.
> >>
> >> (read on, further down)
> >>
> >>      > On May 31, 2022 3:53:57 PM PDT, Carl Schwarz <
> >> cschwarzstatsfuca at gmail.com> wrote:
> >>      >> Success!
> >>      >>
> >>      >> Building on MT's note that if the inst/doc has an index.html
> file,
> >> R does
> >>      >> NOT build a new index.
> >>      >> At the end of Writing R Extensions Section 1.4, it states
> >>      >> "  When R CMD build builds the vignettes, it copies these and
> the
> >> vignette
> >>      >> sources from directory vignettes to inst/doc. To install any
> other
> >> files
> >>      >> from the vignettes directory, include a file
> >> vignettes/.install_extras which
> >>      >> specifies these as Perl-like regular expressions on one or more
> >> lines.."
> >>      >>
> >>      >> So I copied the existing inst/doc/index.html file from the
> installed
> >>      >> SighatbilityModel with the wrong sort order to my
> >> vignettes/index.html,
> >>      >> edited this index.html file to get the right sort order. The
> >> index.html is
> >>      >> just vanilla html so it is easy to modify "manually".
> >>      >> Then I created a vignettes/.install_extras with a single entry
> >> "index.html"
> >>      >> and now vignettes/index.html appears to be copied to inst/doc
> and
> >> so stops
> >>      >> the building of the wrongly sorted index.
> >>      >>
> >>      >> Then I did a Rstudio -> Build -> BuildSourcePackage to create a
> >> tar.gz
> >>      >> file; installed from the tar.gz file, and now my vignette index
> is
> >> sorted
> >>      >> properly on my Mac machine.
> >>      >> Also tried using devtools::check_win_release() to generate a
> >> windoze zip
> >>      >> file; installed that; and the vignette index is again sorted
> >> properly on
> >>      >> Windows machines.
> >>      >>
> >>      >> I'm hoping I can use this for (b) from my original query as
> well.
> >>      >>
> >>      >> This will mean that I have to "manually'" maintain the
> >> vignettes/index.html
> >>      >> file, but that is straightforward.
> >>      >>
> >>      >> I hope this works when I submit to CRAN.
> >>      >>
> >>      >> How do I suggest to the R maintainers that an explicit section
> be
> >> added to
> >>      >> the Writing R Extensions manual with the above steps so that
> future
> >> package
> >>      >> writers don't repeat history? I'm willing to write the paragraph
> >> explaining
> >>      >> the steps, but don't know who/how to proceed to get it added to
> >> Writing R
> >>      >> Extensions.
> >>      >>
> >>      >> Carl Schwarz
> >>
> >> The WRE manual is part of the R sources, so formally you are
> >> proposing to improve (the documentation part of) R.
> >>
> >> You can propose a patch against the "R-devel" sources.
> >> If the changes are quite small and compact (as here), even on by e-mail.
> >> The source file  is  doc/manual/R-exts.texi
> >> in R's SVN (source server)
> >>    https://svn.r-project.org/R/trunk/doc/manual/R-exts.texi
> >> or one of its mirrors (notably on github)
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jun  2 21:53:58 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 2 Jun 2022 15:53:58 -0400
Subject: [R-pkg-devel] Sort order of vignette index?;
 adding purl'ed Rcode from asis vignette to vignette index?
In-Reply-To: <CADtpigaSyS_kZ-Sr3evT=6jaybsGiNGfxQVoVTLPZzE+zLPdHg@mail.gmail.com>
References: <CADtpigb8i5fBcCOiJyMXD6hY6J4a4sofLMaf8XYoirM=5mDoXA@mail.gmail.com>
 <CADtpigZQL7f6sex2gbieFaVuQ_ywVPKz7VnYW7wpTHTrJpd-rA@mail.gmail.com>
 <CADtpigYBMaXgFTJin6y1SD5z_4uF-eAD4i0h=sxpF+KdL9hc-w@mail.gmail.com>
 <8d467b58-4268-b856-44ed-d1bdd7b243dc@gmail.com>
 <CADtpigYfhrdUhQtf4a_eEuXo+V_tns7kd9+UAxaGUfzFdWWfFw@mail.gmail.com>
 <20220531100502.6ad5354a@Tarkus>
 <YQXPR01MB4579C84C4B40232949F569C89ADC9@YQXPR01MB4579.CANPRD01.PROD.OUTLOOK.COM>
 <CADtpigY-hp14wS=K8ob-STPDuZ1dwA8LWG5Nws08HkWz_0ysKg@mail.gmail.com>
 <D29F12E5-B3EB-440F-92D8-F1C8D88020D1@dcn.davis.ca.us>
 <25239.7579.515401.430977@stat.math.ethz.ch>
 <CADtpigYFiR=W_VDeDFmo=r95f-FfF4GGV=gDZCorL_020BQVKQ@mail.gmail.com>
 <424d9afa-0e31-9254-e1e8-b3b3f570b87a@fau.de>
 <CADtpigaSyS_kZ-Sr3evT=6jaybsGiNGfxQVoVTLPZzE+zLPdHg@mail.gmail.com>
Message-ID: <b80f569e-5edc-3352-d603-6e42cf15042e@gmail.com>

On 02/06/2022 1:39 p.m., Carl Schwarz wrote:
> Thanks for the suggestions.
> 
> (a) Unfortunately, if you place the index.html directly into the inst/doc
> directory, it is overwritten when the package source file (*tar.gz) is
> created and then installed.
> This is using RStudio on a Mac.... I did not try this on a Windows machine.
> 
> But other files that you place in the inst/doc file are left alone and are
> listed under the vignette index when you follow the "User guides, package
> vignettes and other documentation" link.
> 
> So strange that the index is overwritten but other files are left alone.

That does sound like a bug...

> (b) The relative links that are generated are quite long, e.g. <a
> href="../../../library/SightabilityModel/doc/c-MoosePopR-SightabilityPopR-Demo.html">HTML</a>
> and I don't fully understand where the "current" directory is when you
> follow the "User guides, package vignettes and other
> documentation" requiring you to go back up the directory tree and then go
> back down.
> I copied and modified these odd links for my other files and it worked fine.

To see the links the help system is using, you can run it in an external 
browser using "help.start()".  When I do that for rgl I see this link on 
the vignettes page:

   http://127.0.0.1:17854/library/rgl/doc/index.html

and the first vignette is at

   http://127.0.0.1:17854/library/rgl/doc/WebGL.html

generated from <a href="../../../library/rgl/doc/WebGL.html">.

I forget why the index doesn't just use <a href="WebGL.html"> which 
would appear to be equivalent in this case, but I vaguely recall that 
there's a good reason for that.  It might be because the links generated 
for static documentation are different.

Duncan Murdoch

> 
> (c) I have not tried the index.Rmd approach...
> 
> Carl.
> 
> On Thu, Jun 2, 2022 at 1:22 AM Sebastian Meyer <seb.meyer at fau.de> wrote:
> 
>> Some quick comments:
>>
>> - You could place the index.html directly in the inst/doc folder of your
>> package sources, avoiding the need for .install_extras from the
>> vignettes folder. This approach is useful if there is additional
>> non-vignette material in inst/doc.
>>
>> - As you say, links in index.html need to be relative to the installed
>> *doc* dir, where the index file is located. For example, the simple links
>>       <a href="template.R">template script</a>,
>>       <a href="vignetteA.Rnw">source of vignette A</a>
>> should work to reference a static Rscript inst/doc/template.R and a
>> vignette built from vignettes/vignetteA.Rnw (copied to inst/doc by R CMD
>> build), respectively.
>>
>> - It seems you could even generate the index.html via a vignette,
>> index.Rmd, say. The downside is that this index vignette will be listed
>> as a vignette (by browseVignettes(), for example) although it isn't
>> really a vignette.
>>
>> - browseVignettes() sorts by vignette title, not by file name.
>> Furthermore, its purpose is to browse *vignettes* also across packages,
>> so is unrelated to the *doc* index for a given package, which may
>> contain more than vignettes.
>>
>> Best regards,
>>
>>          Sebastian Meyer
>>
>>
>> Am 01.06.22 um 23:47 schrieb Carl Schwarz:
>>> Here is some suggested text to be added to the Writing R Extensions
>> manual.
>>> Any suggestions for changes?
>>>
>>> 1.4.3. Customizing the vignette help index
>>>
>>> R provides two indices to the vignettes in a package  (a) the
>>> browseVignettes() function and (b) the html index of vignettes and other
>>> user documentation available when you use help(package=xxx). The latter
>> is
>>> built when the package is installed.
>>>
>>>
>>>
>>> In some cases, customization of the html index is desirable. For example,
>>> currently the entries in the index  are sorted by the vignette engine
>> used
>>> to build the vignette and then by the file name of the vignette and a
>>> different sort order may be desired. Or additional documents may wish to
>> be
>>> included, e.g., the purl()?d code from an ?asis? vignette.
>>>
>>>
>>>
>>> Previous sections of this guide indicate that if an ?index.html? file is
>>> present in the inst/doc directory at the time of the build, then a new
>>> ?index.html? file will not be built. Previous sections also indicate how
>> to
>>> add additional files to the inst/doc directory. The following is then a
>>> summary of the steps needed to customize the html index to the vignettes
>> in
>>> a package.
>>>
>>>
>>>
>>> 1. Create a revised ?index.html? file in the vignettes directory. It may
>> be
>>> easiest to copy an existing ?doc/index.html? file from an installed
>>> package. The vignettes/index.html file should be in plain html and can be
>>> modified to change the sort order or to add links to additional files to
>> be
>>> available to users. Note that files are referred to using relative path
>>> names ? follow the pattern in the copied file.
>>>
>>>
>>>
>>> 2. Add any other additional files to the vignettes directory that are to
>> be
>>> available to the user via the vignette help index.
>>>
>>>
>>>
>>> 3. Add an ?.install_extras? file to the vignettes directory (don?t forget
>>> the leading period in this file?s name). This is a text file with the
>> names
>>> of the files in the vignettes directory to be added to the inst/doc
>>> directory. Each line can be coded as a regular expression. At a minimum,
>>> include ?index.html? to copy the vignettes/index.html file to the
>> inst/doc
>>> directory.
>>>
>>>
>>>
>>> 4. Check/build the package in the regular way.
>>>
>>>
>>>
>>> There is no evident way to modify the output of the browseVignettes()
>>> function; however, this function currently sorts by the vignette file
>> name
>>> regardless of the vignette engine used.
>>>
>>> On Wed, Jun 1, 2022 at 1:04 AM Martin Maechler <
>> maechler at stat.math.ethz.ch>
>>> wrote:
>>>
>>>>>>>>> Jeff Newmiller
>>>>>>>>>       on Tue, 31 May 2022 16:09:16 -0700 writes:
>>>>
>>>>       > FWIW the RStudio build is often not complete... it intentionally
>>>> takes shortcuts that make test/run iteration faster... but you should
>> make
>>>> a habit of using the command line to build artifacts for sharing... it
>> will
>>>> help avoid gotchas.
>>>>
>>>> Yes, definitely.
>>>>
>>>> Notably, e.g., reloading the package sources (often via
>>>> devtools) into a running R process instead of restarting R and
>>>> loading/attaching the newly built and installed package (that
>>>> you are developing) is much faster, but *NOT* equivalent and
>>>> sometimes misleading -- because it's not easily possible to
>>>> "revert" everything you did in your running R session {caches,
>>>> method tables, DLLs, internal pointers, ...}.
>>>>
>>>> (read on, further down)
>>>>
>>>>       > On May 31, 2022 3:53:57 PM PDT, Carl Schwarz <
>>>> cschwarzstatsfuca at gmail.com> wrote:
>>>>       >> Success!
>>>>       >>
>>>>       >> Building on MT's note that if the inst/doc has an index.html
>> file,
>>>> R does
>>>>       >> NOT build a new index.
>>>>       >> At the end of Writing R Extensions Section 1.4, it states
>>>>       >> "  When R CMD build builds the vignettes, it copies these and
>> the
>>>> vignette
>>>>       >> sources from directory vignettes to inst/doc. To install any
>> other
>>>> files
>>>>       >> from the vignettes directory, include a file
>>>> vignettes/.install_extras which
>>>>       >> specifies these as Perl-like regular expressions on one or more
>>>> lines.."
>>>>       >>
>>>>       >> So I copied the existing inst/doc/index.html file from the
>> installed
>>>>       >> SighatbilityModel with the wrong sort order to my
>>>> vignettes/index.html,
>>>>       >> edited this index.html file to get the right sort order. The
>>>> index.html is
>>>>       >> just vanilla html so it is easy to modify "manually".
>>>>       >> Then I created a vignettes/.install_extras with a single entry
>>>> "index.html"
>>>>       >> and now vignettes/index.html appears to be copied to inst/doc
>> and
>>>> so stops
>>>>       >> the building of the wrongly sorted index.
>>>>       >>
>>>>       >> Then I did a Rstudio -> Build -> BuildSourcePackage to create a
>>>> tar.gz
>>>>       >> file; installed from the tar.gz file, and now my vignette index
>> is
>>>> sorted
>>>>       >> properly on my Mac machine.
>>>>       >> Also tried using devtools::check_win_release() to generate a
>>>> windoze zip
>>>>       >> file; installed that; and the vignette index is again sorted
>>>> properly on
>>>>       >> Windows machines.
>>>>       >>
>>>>       >> I'm hoping I can use this for (b) from my original query as
>> well.
>>>>       >>
>>>>       >> This will mean that I have to "manually'" maintain the
>>>> vignettes/index.html
>>>>       >> file, but that is straightforward.
>>>>       >>
>>>>       >> I hope this works when I submit to CRAN.
>>>>       >>
>>>>       >> How do I suggest to the R maintainers that an explicit section
>> be
>>>> added to
>>>>       >> the Writing R Extensions manual with the above steps so that
>> future
>>>> package
>>>>       >> writers don't repeat history? I'm willing to write the paragraph
>>>> explaining
>>>>       >> the steps, but don't know who/how to proceed to get it added to
>>>> Writing R
>>>>       >> Extensions.
>>>>       >>
>>>>       >> Carl Schwarz
>>>>
>>>> The WRE manual is part of the R sources, so formally you are
>>>> proposing to improve (the documentation part of) R.
>>>>
>>>> You can propose a patch against the "R-devel" sources.
>>>> If the changes are quite small and compact (as here), even on by e-mail.
>>>> The source file  is  doc/manual/R-exts.texi
>>>> in R's SVN (source server)
>>>>     https://svn.r-project.org/R/trunk/doc/manual/R-exts.texi
>>>> or one of its mirrors (notably on github)
>>>>
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edwwe|2020 @end|ng |rom gm@||@com  Fri Jun  3 22:00:22 2022
From: edwwe|2020 @end|ng |rom gm@||@com (Edward Wei)
Date: Fri, 3 Jun 2022 13:00:22 -0700
Subject: [R-pkg-devel] If Your Function Require API Key Input,
 How to get around check errors as the key is not provided?
Message-ID: <CAEf_eRComD_USoVRHqg7MQBtWPDq2KOXvnztqDY2P0vd=oposw@mail.gmail.com>

When releasing a package, API Keys are not supposed to be available for
those who download it. However, the package I am building requires the API
key to be able to pull the data for the examples. Should I just comment out
the examples so the error doesn't come?

> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
> ### Name: crypto60
> ### Title: Get Cryptocurrency Data at the hourly level localized to current
> ###   time zone
> ### Aliases: crypto60
>
> ### ** Examples
>
> crypto60("BTC")
Error: Set API key using av_api_key(). If you do not have an API key,
please claim your free API key on
(https://www.alphavantage.co/support/#api-key). It should take less
than 20 seconds, and is free permanently.
Execution halted
* checking PDF version of manual ... OK
* checking for detritus in the temp directory ... OK
* DONE
Status: 1 ERROR, 3 NOTEs

To resolve errors, one would simply have to run
av_api_key("YOUR_AV_KEY_HERE")
before running any queries. Is there a way to provide a key for testing but
at the same time mask it from those who would potentially download your
package? Or is there a way to not have these functions (that require API
key to pull data) be subject to the test for spitting out errors.

Another "problem"  I am running into is the following.:It is a NOTE but I
am new at this and not sure whether or not I would need to resolve it for a
submission.

* checking R code for possible problems ... [8s] NOTE
addreturns: no visible binding for global variable 'returns'
addreturns: no visible binding for global variable 'idreturns'
addreturns: no visible binding for global variable 'tot_ret'
addreturns: no visible binding for global variable 'high'
addreturns: no visible binding for global variable 'low'
get60: no visible binding for global variable 'a'
project_price: no visible binding for global variable 'hs'
volatility_freq: no visible binding for global variable 'high'
volatility_freq: no visible binding for global variable 'low'
volatility_freq: no visible binding for global variable 'hilow'
volatilty_freq_cum: no visible binding for global variable 'high'
volatilty_freq_cum: no visible binding for global variable 'low'
volatilty_freq_cum: no visible binding for global variable 'hilow'
Undefined global functions or variables:
  a high hilow hs idreturns low returns tot_ret

All of the variables that have been named are defined within the functions
I am building. They do not and should not exist outside the function. I do
not think this is a problem I really need to resolve for a successful
submission. Is that correct?

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Fri Jun  3 22:18:57 2022
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Fri, 3 Jun 2022 16:18:57 -0400
Subject: [R-pkg-devel] If Your Function Require API Key Input,
 How to get around check errors as the key is not provided?
In-Reply-To: <CAEf_eRComD_USoVRHqg7MQBtWPDq2KOXvnztqDY2P0vd=oposw@mail.gmail.com>
References: <CAEf_eRComD_USoVRHqg7MQBtWPDq2KOXvnztqDY2P0vd=oposw@mail.gmail.com>
Message-ID: <745c79c0-f356-28c6-a9d2-69c73966d4ba@gmail.com>



On 2022-06-03 4:00 p.m., Edward Wei wrote:
> When releasing a package, API Keys are not supposed to be available for
> those who download it. However, the package I am building requires the API
> key to be able to pull the data for the examples. Should I just comment out
> the examples so the error doesn't come?
> 
>> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>> ### Name: crypto60
>> ### Title: Get Cryptocurrency Data at the hourly level localized to current
>> ###   time zone
>> ### Aliases: crypto60
>>
>> ### ** Examples
>>
>> crypto60("BTC")
> Error: Set API key using av_api_key(). If you do not have an API key,
> please claim your free API key on
> (https://www.alphavantage.co/support/#api-key). It should take less
> than 20 seconds, and is free permanently.
> Execution halted
> * checking PDF version of manual ... OK
> * checking for detritus in the temp directory ... OK
> * DONE
> Status: 1 ERROR, 3 NOTEs
> 
> To resolve errors, one would simply have to run
> av_api_key("YOUR_AV_KEY_HERE")
> before running any queries. Is there a way to provide a key for testing but
> at the same time mask it from those who would potentially download your
> package? Or is there a way to not have these functions (that require API
> key to pull data) be subject to the test for spitting out errors.
> 
> Another "problem"  I am running into is the following.:It is a NOTE but I
> am new at this and not sure whether or not I would need to resolve it for a
> submission.
> 
> * checking R code for possible problems ... [8s] NOTE
> addreturns: no visible binding for global variable 'returns'
> addreturns: no visible binding for global variable 'idreturns'
> addreturns: no visible binding for global variable 'tot_ret'
> addreturns: no visible binding for global variable 'high'
> addreturns: no visible binding for global variable 'low'
> get60: no visible binding for global variable 'a'
> project_price: no visible binding for global variable 'hs'
> volatility_freq: no visible binding for global variable 'high'
> volatility_freq: no visible binding for global variable 'low'
> volatility_freq: no visible binding for global variable 'hilow'
> volatilty_freq_cum: no visible binding for global variable 'high'
> volatilty_freq_cum: no visible binding for global variable 'low'
> volatilty_freq_cum: no visible binding for global variable 'hilow'
> Undefined global functions or variables:
>    a high hilow hs idreturns low returns tot_ret
> 
> All of the variables that have been named are defined within the functions
> I am building. They do not and should not exist outside the function. I do
> not think this is a problem I really need to resolve for a successful
> submission. Is that correct?

    Based on past experience you *will* need to address this note for a 
successful CRAN submission.  These notes are presumably caused by the 
use of non-standard-evaluation (these days typically tidyverse-based). 
You can either use `globalVariables` or assign the values to NULL near 
the top of your function ...

> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Director, School of Computational Science and Engineering
(Acting) Graduate chair, Mathematics & Statistics


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Wed Jun  8 12:57:14 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Wed, 8 Jun 2022 12:57:14 +0200
Subject: [R-pkg-devel] Sort order of vignette index?;
 adding purl'ed Rcode from asis vignette to vignette index?
In-Reply-To: <b80f569e-5edc-3352-d603-6e42cf15042e@gmail.com>
References: <CADtpigb8i5fBcCOiJyMXD6hY6J4a4sofLMaf8XYoirM=5mDoXA@mail.gmail.com>
 <CADtpigZQL7f6sex2gbieFaVuQ_ywVPKz7VnYW7wpTHTrJpd-rA@mail.gmail.com>
 <CADtpigYBMaXgFTJin6y1SD5z_4uF-eAD4i0h=sxpF+KdL9hc-w@mail.gmail.com>
 <8d467b58-4268-b856-44ed-d1bdd7b243dc@gmail.com>
 <CADtpigYfhrdUhQtf4a_eEuXo+V_tns7kd9+UAxaGUfzFdWWfFw@mail.gmail.com>
 <20220531100502.6ad5354a@Tarkus>
 <YQXPR01MB4579C84C4B40232949F569C89ADC9@YQXPR01MB4579.CANPRD01.PROD.OUTLOOK.COM>
 <CADtpigY-hp14wS=K8ob-STPDuZ1dwA8LWG5Nws08HkWz_0ysKg@mail.gmail.com>
 <D29F12E5-B3EB-440F-92D8-F1C8D88020D1@dcn.davis.ca.us>
 <25239.7579.515401.430977@stat.math.ethz.ch>
 <CADtpigYFiR=W_VDeDFmo=r95f-FfF4GGV=gDZCorL_020BQVKQ@mail.gmail.com>
 <424d9afa-0e31-9254-e1e8-b3b3f570b87a@fau.de>
 <CADtpigaSyS_kZ-Sr3evT=6jaybsGiNGfxQVoVTLPZzE+zLPdHg@mail.gmail.com>
 <b80f569e-5edc-3352-d603-6e42cf15042e@gmail.com>
Message-ID: <25248.32906.123103.35841@stat.math.ethz.ch>

>>>>> Duncan Murdoch 
>>>>>     on Thu, 2 Jun 2022 15:53:58 -0400 writes:

    > On 02/06/2022 1:39 p.m., Carl Schwarz wrote:
    >> Thanks for the suggestions.
    >> 
    >> (a) Unfortunately, if you place the index.html directly into the inst/doc
    >> directory, it is overwritten when the package source file (*tar.gz) is
    >> created and then installed.
    >> This is using RStudio on a Mac.... I did not try this on a Windows machine.
    >> 
    >> But other files that you place in the inst/doc file are left alone and are
    >> listed under the vignette index when you follow the "User guides, package
    >> vignettes and other documentation" link.
    >> 
    >> So strange that the index is overwritten but other files are left alone.

    > That does sound like a bug...

    >> (b) The relative links that are generated are quite long, e.g. <a
    >> href="../../../library/SightabilityModel/doc/c-MoosePopR-SightabilityPopR-Demo.html">HTML</a>
    >> and I don't fully understand where the "current" directory is when you
    >> follow the "User guides, package vignettes and other
    >> documentation" requiring you to go back up the directory tree and then go
    >> back down.
    >> I copied and modified these odd links for my other files and it worked fine.

    > To see the links the help system is using, you can run it in an external 
    > browser using "help.start()".  When I do that for rgl I see this link on 
    > the vignettes page:

    > http://127.0.0.1:17854/library/rgl/doc/index.html

    > and the first vignette is at

    > http://127.0.0.1:17854/library/rgl/doc/WebGL.html

    > generated from <a href="../../../library/rgl/doc/WebGL.html">.

    > I forget why the index doesn't just use <a href="WebGL.html"> which 
    > would appear to be equivalent in this case, but I vaguely recall that 
    > there's a good reason for that.  It might be because the links generated 
    > for static documentation are different.

    > Duncan Murdoch

Apropos  static documentation :

Some of you may remember that I (my institution's server) have been
providing static HTML help pages for 20 years or so at

 https://stat.ethz.ch/R-manual

(linked from  https://stat.ethz.ch/R/  or more importantly, the R-project.org
  sidebar [Documentation] -> [Other], i.e.,
  https://www.r-project.org/other-docs.html )

and there, e.g.,  
      https://stat.ethz.ch/R-manual/R-devel/library/grid/html/grid-package.html
or then
      https://stat.ethz.ch/R-manual/R-devel/library/grid/doc/index.html

you can see (via "view source" [right click] in your browser)
the links some of which possibly could be made much shorter indeed,
but then the current code does not have to distinguish links
within the same package and those to another package (still
assumed to be in the same library though..).

Notably on the 2nd page ( = ...../index.html ),
I see that we still seem to have a buglet in our  static html
construction, (and I see this also in R-patched), the first 28 lines being 

~~~~~~~~~~~~~~~~~~~~~~~~~~~snip~~~~~~~~snip~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
<!DOCTYPE html>
<html>
<head><title>R: Vignettes and other documentation</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link rel="stylesheet" type="text/css" href="/doc/html/R.css" />
</head><body><div class="container">
<h1> Vignettes and other documentation
<img class="toplogo" src="/doc/html/Rlogo.svg" alt="[R logo]" />
</h1>
<hr/>
<div style="text-align: center;">
<a href="/doc/html/index.html"><img class="arrow" src="/doc/html/up.jpg" alt="[Top]" /></a>
</div>
<h2>Vignettes from package 'grid'</h2>
<table style="width: 100%;">
<col style="width: 22%;" />
<col style="width:  2%;" />
<col style="width: 50%;" />
<col style="width:  8%;" />
<col style="width:  8%;" />
<col style="width:  8%;" />
<tr><td style="text-align: right; vertical-align: top;"><a href="../../../library/grid/doc/displaylist.pdf">grid::displaylist</a></td>
<td></td><td style="vertical-align: top;">Display Lists in grid</td>
<td style="vertical-align: top;"><a href="../../../library/grid/doc/displaylist.pdf">PDF</a></td>
<td style="vertical-align: top;"><a href="../../../library/grid/doc/displaylist.Rnw">source</a></td>
<td style="vertical-align: top; white-space: nowrap"><a href="../../../library/grid/doc/displaylist.R">R code</a></td></tr>
<tr><td style="text-align: right; vertical-align: top;"><a href="../../../library/grid/doc/frame.pdf">grid::frame</a></td>

~~~~~~~~~~~~~~~~~~~~~~~~~~~snip~~~~~~~~snip~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

and in the first few lines  *invalid* urls, already for the CSS (!) such as
  <img class="toplogo" src="/doc/html/Rlogo.svg" alt="[R logo]" />
and a bit later, (the same mistake), invalid 
  <a href="/doc/html/index.html"><img class="arrow" src="/doc/html/up.jpg" alt="[Top]" /></a>

.... I won't time to find and fix the cause of the bug, at the moment,
so I'm happy if any of you readers does so, or even just opens
an R bugzilla report about it.

Martin


    >> 
    >> (c) I have not tried the index.Rmd approach...
    >> 
    >> Carl.
    >> 
    >> On Thu, Jun 2, 2022 at 1:22 AM Sebastian Meyer <seb.meyer at fau.de> wrote:
    >> 
    >>> Some quick comments:
    >>> 
    >>> - You could place the index.html directly in the inst/doc folder of your
    >>> package sources, avoiding the need for .install_extras from the
    >>> vignettes folder. This approach is useful if there is additional
    >>> non-vignette material in inst/doc.
    >>> 
    >>> - As you say, links in index.html need to be relative to the installed
    >>> *doc* dir, where the index file is located. For example, the simple links
    >>> <a href="template.R">template script</a>,
    >>> <a href="vignetteA.Rnw">source of vignette A</a>
    >>> should work to reference a static Rscript inst/doc/template.R and a
    >>> vignette built from vignettes/vignetteA.Rnw (copied to inst/doc by R CMD
    >>> build), respectively.
    >>> 
    >>> - It seems you could even generate the index.html via a vignette,
    >>> index.Rmd, say. The downside is that this index vignette will be listed
    >>> as a vignette (by browseVignettes(), for example) although it isn't
    >>> really a vignette.
    >>> 
    >>> - browseVignettes() sorts by vignette title, not by file name.
    >>> Furthermore, its purpose is to browse *vignettes* also across packages,
    >>> so is unrelated to the *doc* index for a given package, which may
    >>> contain more than vignettes.
    >>> 
    >>> Best regards,
    >>> 
    >>> Sebastian Meyer
    >>> 
    >>> 
    >>> Am 01.06.22 um 23:47 schrieb Carl Schwarz:
    >>>> Here is some suggested text to be added to the Writing R Extensions
    >>> manual.
    >>>> Any suggestions for changes?
    >>>> 
    >>>> 1.4.3. Customizing the vignette help index
    >>>> 
    >>>> R provides two indices to the vignettes in a package  (a) the
    >>>> browseVignettes() function and (b) the html index of vignettes and other
    >>>> user documentation available when you use help(package=xxx). The latter
    >>> is
    >>>> built when the package is installed.
    >>>> 
    >>>> 
    >>>> 
    >>>> In some cases, customization of the html index is desirable. For example,
    >>>> currently the entries in the index  are sorted by the vignette engine
    >>> used
    >>>> to build the vignette and then by the file name of the vignette and a
    >>>> different sort order may be desired. Or additional documents may wish to
    >>> be
    >>>> included, e.g., the purl()?d code from an ?asis? vignette.
    >>>> 
    >>>> 
    >>>> 
    >>>> Previous sections of this guide indicate that if an ?index.html? file is
    >>>> present in the inst/doc directory at the time of the build, then a new
    >>>> ?index.html? file will not be built. Previous sections also indicate how
    >>> to
    >>>> add additional files to the inst/doc directory. The following is then a
    >>>> summary of the steps needed to customize the html index to the vignettes
    >>> in
    >>>> a package.
    >>>> 
    >>>> 
    >>>> 
    >>>> 1. Create a revised ?index.html? file in the vignettes directory. It may
    >>> be
    >>>> easiest to copy an existing ?doc/index.html? file from an installed
    >>>> package. The vignettes/index.html file should be in plain html and can be
    >>>> modified to change the sort order or to add links to additional files to
    >>> be
    >>>> available to users. Note that files are referred to using relative path
    >>>> names ? follow the pattern in the copied file.
    >>>> 
    >>>> 
    >>>> 
    >>>> 2. Add any other additional files to the vignettes directory that are to
    >>> be
    >>>> available to the user via the vignette help index.
    >>>> 
    >>>> 
    >>>> 
    >>>> 3. Add an ?.install_extras? file to the vignettes directory (don?t forget
    >>>> the leading period in this file?s name). This is a text file with the
    >>> names
    >>>> of the files in the vignettes directory to be added to the inst/doc
    >>>> directory. Each line can be coded as a regular expression. At a minimum,
    >>>> include ?index.html? to copy the vignettes/index.html file to the
    >>> inst/doc
    >>>> directory.
    >>>> 
    >>>> 
    >>>> 
    >>>> 4. Check/build the package in the regular way.
    >>>> 
    >>>> 
    >>>> 
    >>>> There is no evident way to modify the output of the browseVignettes()
    >>>> function; however, this function currently sorts by the vignette file
    >>> name
    >>>> regardless of the vignette engine used.
    >>>> 
    >>>> On Wed, Jun 1, 2022 at 1:04 AM Martin Maechler <
    >>> maechler at stat.math.ethz.ch>
    >>>> wrote:
    >>>> 
    >>>>>>>>>> Jeff Newmiller
    >>>>>>>>>> on Tue, 31 May 2022 16:09:16 -0700 writes:
    >>>>> 
    >>>>> > FWIW the RStudio build is often not complete... it intentionally
    >>>>> takes shortcuts that make test/run iteration faster... but you should
    >>> make
    >>>>> a habit of using the command line to build artifacts for sharing... it
    >>> will
    >>>>> help avoid gotchas.
    >>>>> 
    >>>>> Yes, definitely.
    >>>>> 
    >>>>> Notably, e.g., reloading the package sources (often via
    >>>>> devtools) into a running R process instead of restarting R and
    >>>>> loading/attaching the newly built and installed package (that
    >>>>> you are developing) is much faster, but *NOT* equivalent and
    >>>>> sometimes misleading -- because it's not easily possible to
    >>>>> "revert" everything you did in your running R session {caches,
    >>>>> method tables, DLLs, internal pointers, ...}.
    >>>>> 
    >>>>> (read on, further down)
    >>>>> 
    >>>>> > On May 31, 2022 3:53:57 PM PDT, Carl Schwarz <
    >>>>> cschwarzstatsfuca at gmail.com> wrote:
    >>>>> >> Success!
    >>>>> >>
    >>>>> >> Building on MT's note that if the inst/doc has an index.html
    >>> file,
    >>>>> R does
    >>>>> >> NOT build a new index.
    >>>>> >> At the end of Writing R Extensions Section 1.4, it states
    >>>>> >> "  When R CMD build builds the vignettes, it copies these and
    >>> the
    >>>>> vignette
    >>>>> >> sources from directory vignettes to inst/doc. To install any
    >>> other
    >>>>> files
    >>>>> >> from the vignettes directory, include a file
    >>>>> vignettes/.install_extras which
    >>>>> >> specifies these as Perl-like regular expressions on one or more
    >>>>> lines.."
    >>>>> >>
    >>>>> >> So I copied the existing inst/doc/index.html file from the
    >>> installed
    >>>>> >> SighatbilityModel with the wrong sort order to my
    >>>>> vignettes/index.html,
    >>>>> >> edited this index.html file to get the right sort order. The
    >>>>> index.html is
    >>>>> >> just vanilla html so it is easy to modify "manually".
    >>>>> >> Then I created a vignettes/.install_extras with a single entry
    >>>>> "index.html"
    >>>>> >> and now vignettes/index.html appears to be copied to inst/doc
    >>> and
    >>>>> so stops
    >>>>> >> the building of the wrongly sorted index.
    >>>>> >>
    >>>>> >> Then I did a Rstudio -> Build -> BuildSourcePackage to create a
    >>>>> tar.gz
    >>>>> >> file; installed from the tar.gz file, and now my vignette index
    >>> is
    >>>>> sorted
    >>>>> >> properly on my Mac machine.
    >>>>> >> Also tried using devtools::check_win_release() to generate a
    >>>>> windoze zip
    >>>>> >> file; installed that; and the vignette index is again sorted
    >>>>> properly on
    >>>>> >> Windows machines.
    >>>>> >>
    >>>>> >> I'm hoping I can use this for (b) from my original query as
    >>> well.
    >>>>> >>
    >>>>> >> This will mean that I have to "manually'" maintain the
    >>>>> vignettes/index.html
    >>>>> >> file, but that is straightforward.
    >>>>> >>
    >>>>> >> I hope this works when I submit to CRAN.
    >>>>> >>
    >>>>> >> How do I suggest to the R maintainers that an explicit section
    >>> be
    >>>>> added to
    >>>>> >> the Writing R Extensions manual with the above steps so that
    >>> future
    >>>>> package
    >>>>> >> writers don't repeat history? I'm willing to write the paragraph
    >>>>> explaining
    >>>>> >> the steps, but don't know who/how to proceed to get it added to
    >>>>> Writing R
    >>>>> >> Extensions.
    >>>>> >>
    >>>>> >> Carl Schwarz
    >>>>> 
    >>>>> The WRE manual is part of the R sources, so formally you are
    >>>>> proposing to improve (the documentation part of) R.
    >>>>> 
    >>>>> You can propose a patch against the "R-devel" sources.
    >>>>> If the changes are quite small and compact (as here), even on by e-mail.
    >>>>> The source file  is  doc/manual/R-exts.texi
    >>>>> in R's SVN (source server)
    >>>>> https://svn.r-project.org/R/trunk/doc/manual/R-exts.texi
    >>>>> or one of its mirrors (notably on github)


From m@tth|@@-gond@n @end|ng |rom gmx@de  Wed Jun  8 22:24:56 2022
From: m@tth|@@-gond@n @end|ng |rom gmx@de (matthias-gondan)
Date: Wed, 08 Jun 2022 22:24:56 +0200
Subject: [R-pkg-devel] Linking to a large external library
Message-ID: <1MKsj7-1oJjNZ1Ijd-00LHqa@mail.gmx.net>

Dear package developers,I think I found a good solution to this problem which may be relevant for some of you.?I have written an package ("rolog") that embeds Swi-Prolog so that R can send queries to a prolog interpreter. The thing is working, but very large, I think 15 MB, and CRAN "noted" it. Whenever I add a little feature I have to update the entire package, and so have its users (currently: 0, but that might change). Moreover, people who use the package would normally also have Swi-Prolog on their computer.Therefore, I have now written a second package ("rologlite") that just links to the Swi-Prolog dll, which is much smaller in size than embedding it). It searches for Swi-Prolog in the path, in the registry, in the environment, and if all this fails, it checks if rolog is installed and looks for the swipl dll in the rolog package. If all the above fails, a warning is printed, telling the user to install Swi-Prolog or the rolog package. In its DESCRIPTION it "suggests" rolog so that the latter is available on e.g. CRAN winbuilder when building the vignette or running the unit tests.I prefer this option over downloading and compiling an external library, e.g. in nloptr. Everything is done from within R, self-contained.In case I overlooked something, any hint to an even better way is appreciated.Best wishes?Matthias?
	[[alternative HTML version deleted]]


From @rne@henn|ng@en @end|ng |rom gm@||@com  Thu Jun  9 17:53:18 2022
From: @rne@henn|ng@en @end|ng |rom gm@||@com (Arne Henningsen)
Date: Thu, 9 Jun 2022 17:53:18 +0200
Subject: [R-pkg-devel] Vignettes & _R_CHECK_DEPENDS_ONLY_=true
Message-ID: <CAMTWbJgwwYqHE1_Ec86qJhbSnLup3C-mcZ-Zi5xi3u-BJR6=8A@mail.gmail.com>

Dear all

My R package "systemfit" has a 'vignette' that uses the R packages
"plm" and "sem", while the actual code of the "systemfit" package does
not depend on these two packages. Currently, the "systemfit" package
'Suggests' the "plm" package and the "sem" package. However, CRAN
started to check packages with '_R_CHECK_DEPENDS_ONLY_=true' so that
the checking of the "systemfit" package returns an error message
because the vignette cannot be created without the "plm" and "sem"
packages. I am considering changing the DESCRIPTION file so that the
"systemfit" package will 'Depend' on the "plm" and "sem" packages
(although only the vignette depends on these two packages). Is this
the recommended way to do or is there a better way to make the
"systemfit" package pass the tests at CRAN?

Best wishes,
Arne

-- 
Arne Henningsen
http://www.arne-henningsen.name


From henr|k@bengt@@on @end|ng |rom gm@||@com  Thu Jun  9 18:23:48 2022
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Thu, 9 Jun 2022 09:23:48 -0700
Subject: [R-pkg-devel] Vignettes & _R_CHECK_DEPENDS_ONLY_=true
In-Reply-To: <CAMTWbJgwwYqHE1_Ec86qJhbSnLup3C-mcZ-Zi5xi3u-BJR6=8A@mail.gmail.com>
References: <CAMTWbJgwwYqHE1_Ec86qJhbSnLup3C-mcZ-Zi5xi3u-BJR6=8A@mail.gmail.com>
Message-ID: <CAFDcVCS8ndaTWDOaShXovOX369m+BKJEPMMpLYRGgVyku0xYPQ@mail.gmail.com>

On Thu, Jun 9, 2022 at 8:53 AM Arne Henningsen
<arne.henningsen at gmail.com> wrote:
>
> Dear all
>
> My R package "systemfit" has a 'vignette' that uses the R packages
> "plm" and "sem", while the actual code of the "systemfit" package does
> not depend on these two packages. Currently, the "systemfit" package
> 'Suggests' the "plm" package and the "sem" package. However, CRAN
> started to check packages with '_R_CHECK_DEPENDS_ONLY_=true' so that
> the checking of the "systemfit" package returns an error message
> because the vignette cannot be created without the "plm" and "sem"
> packages.

Also, the case for one of your example, cf.
https://cran.r-project.org/web/checks/check_results_systemfit.html

> I am considering changing the DESCRIPTION file so that the
> "systemfit" package will 'Depend' on the "plm" and "sem" packages
> (although only the vignette depends on these two packages). Is this
> the recommended way to do or is there a better way to make the
> "systemfit" package pass the tests at CRAN?

To keep them as Suggests:ed packages, you need to run the code in your
examples and vignettes that rely on them conditionally on the being
installed, e.g.

if (requireNamespace("plm", quietly = TRUE)) {
  ...
}

FWIW, you're using Sweave, but if you'd used knitr, there are easy
ways to do this also for vignettes.  I forgot the details, but I saw a
simple solution the other week somewhere out there on the interwebs.

If you don't want to do this, then yes, you need to turn those
dependencies into hard dependencies, e.g. Depends or Imports.

/Henrik

>
> Best wishes,
> Arne
>I
> --
> Arne Henningsen
> http://www.arne-henningsen.name
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |r@nc|@co@c@t@|@n @end|ng |rom ug@uch||e@c|  Thu Jun  9 15:05:52 2022
From: |r@nc|@co@c@t@|@n @end|ng |rom ug@uch||e@c| (Francisco Antonio Catalan Meyer)
Date: Thu, 9 Jun 2022 09:05:52 -0400
Subject: [R-pkg-devel] How to rename a package
Message-ID: <CALFOrcLBs+ij9jzd7f4dHYAXqK8gkunrAnE8ziNqx3PevCOC-Q@mail.gmail.com>

Dear package developers,

I have a package published on CRAN and I want to rename it, something like
from "AtmChile" to "AtmoChile". I have read the CRAN policy, but did not
find any topic regarding this. So does anybody know whether there is any
CRAN policy for this?

 Thanks!


-- 
Francisco Antonio Catal?n Meyer
Qu?mico Ambiental de la Universidad de Chile

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Jun 10 00:07:13 2022
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 10 Jun 2022 00:07:13 +0200
Subject: [R-pkg-devel] How to rename a package
In-Reply-To: <CALFOrcLBs+ij9jzd7f4dHYAXqK8gkunrAnE8ziNqx3PevCOC-Q@mail.gmail.com>
References: <CALFOrcLBs+ij9jzd7f4dHYAXqK8gkunrAnE8ziNqx3PevCOC-Q@mail.gmail.com>
Message-ID: <9fac31a5-a8e3-8aca-9e78-9194572853cd@statistik.tu-dortmund.de>

CRAN package names are persistent. Please do not rename a package unless 
there is a very good reasons such as trademark issues.

Best,
Uwe Ligges


On 09.06.2022 15:05, Francisco Antonio Catalan Meyer wrote:
> Dear package developers,
> 
> I have a package published on CRAN and I want to rename it, something like
> from "AtmChile" to "AtmoChile". I have read the CRAN policy, but did not
> find any topic regarding this. So does anybody know whether there is any
> CRAN policy for this?
> 
>   Thanks!
> 
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jun 10 01:05:11 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 9 Jun 2022 19:05:11 -0400
Subject: [R-pkg-devel] Vignettes & _R_CHECK_DEPENDS_ONLY_=true
In-Reply-To: <CAFDcVCS8ndaTWDOaShXovOX369m+BKJEPMMpLYRGgVyku0xYPQ@mail.gmail.com>
References: <CAMTWbJgwwYqHE1_Ec86qJhbSnLup3C-mcZ-Zi5xi3u-BJR6=8A@mail.gmail.com>
 <CAFDcVCS8ndaTWDOaShXovOX369m+BKJEPMMpLYRGgVyku0xYPQ@mail.gmail.com>
Message-ID: <8b6e131e-93f3-e143-b1cd-3b5a9e8ac75a@gmail.com>

On 09/06/2022 12:23 p.m., Henrik Bengtsson wrote:
> On Thu, Jun 9, 2022 at 8:53 AM Arne Henningsen
> <arne.henningsen at gmail.com> wrote:
>>
>> Dear all
>>
>> My R package "systemfit" has a 'vignette' that uses the R packages
>> "plm" and "sem", while the actual code of the "systemfit" package does
>> not depend on these two packages. Currently, the "systemfit" package
>> 'Suggests' the "plm" package and the "sem" package. However, CRAN
>> started to check packages with '_R_CHECK_DEPENDS_ONLY_=true' so that
>> the checking of the "systemfit" package returns an error message
>> because the vignette cannot be created without the "plm" and "sem"
>> packages.
> 
> Also, the case for one of your example, cf.
> https://cran.r-project.org/web/checks/check_results_systemfit.html
> 
>> I am considering changing the DESCRIPTION file so that the
>> "systemfit" package will 'Depend' on the "plm" and "sem" packages
>> (although only the vignette depends on these two packages). Is this
>> the recommended way to do or is there a better way to make the
>> "systemfit" package pass the tests at CRAN?
> 
> To keep them as Suggests:ed packages, you need to run the code in your
> examples and vignettes that rely on them conditionally on the being
> installed, e.g.
> 
> if (requireNamespace("plm", quietly = TRUE)) {
>    ...
> }
> 
> FWIW, you're using Sweave, but if you'd used knitr, there are easy
> ways to do this also for vignettes.  I forgot the details, but I saw a
> simple solution the other week somewhere out there on the interwebs.
> 
> If you don't want to do this, then yes, you need to turn those
> dependencies into hard dependencies, e.g. Depends or Imports.

In knitr, you can use the chunk option `eval = requireNamespace("plm", 
quietly = TRUE)`.  I'd put a comment in the code chunk too, saying it 
won't be evaluated if plm is not available, but this is not a 
requirement, just being nice to the reader.

Duncan Murdoch


From ben@engber@ @end|ng |rom gm@||@com  Fri Jun 10 12:30:28 2022
From: ben@engber@ @end|ng |rom gm@||@com (Ben Engbers)
Date: Fri, 10 Jun 2022 12:30:28 +0200
Subject: [R-pkg-devel] Linking to a large external library
In-Reply-To: <1MKsj7-1oJjNZ1Ijd-00LHqa@mail.gmx.net>
References: <1MKsj7-1oJjNZ1Ijd-00LHqa@mail.gmx.net>
Message-ID: <cbe384bc-33ef-9d25-41ab-67a6222b155b@Be-Logical.nl>

"rologlite" verwijst naar een .dll file. Ik neem dus aan dat deze 
package bedoeld is voor Windows.
Mijn vraag is of "rologlite" ook gebruikt kan worden op Linux? Zo ja, 
dan ben ik zeer benieuwd en ga ik kijken hoe ik dat voor mijn 
ontwikkelwerkzaamheden kan gebruiken?

Ben Engbers

Op 08-06-2022 om 22:24 schreef matthias-gondan:
> Whenever I add a little feature I have to update the entire package, and so have its users (currently: 0, but that might change). 
Maybe I'll be the first ;-)

> Therefore, I have now written a second package ("rologlite") that just links to the Swi-Prolog dll, which is much smaller in size than embedding it). It searches for Swi-Prolog in the path, in the registry, in the environment, and if all this fails, it checks if rolog is installed and looks for the swipl dll in the rolog package. 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ben@engber@ @end|ng |rom gm@||@com  Fri Jun 10 12:46:18 2022
From: ben@engber@ @end|ng |rom gm@||@com (Ben Engbers)
Date: Fri, 10 Jun 2022 12:46:18 +0200
Subject: [R-pkg-devel] Linking to a large external library
In-Reply-To: <1MKsj7-1oJjNZ1Ijd-00LHqa@mail.gmx.net>
References: <1MKsj7-1oJjNZ1Ijd-00LHqa@mail.gmx.net>
Message-ID: <85608571-41bd-5b96-2f05-45b89f955c91@Be-Logical.nl>

Hi,

"rologlite" refers to a .dll file. So I assume that this package is 
intended for Windows.
My question is can "rologlite" also be used on Linux? If so, I am very 
curious and will I see how I can use it for my development work?

Ben Engbers

Op 08-06-2022 om 22:24 schreef matthias-gondan:
> Whenever I add a little feature I have to update the entire package, and so have its users (currently: 0, but that might change). 
Maybe I'll be the first one ;-)

> It searches for Swi-Prolog in the path, in the registry, in the environment, and if all this fails, it checks if rolog is installed and looks for the swipl dll in the rolog package. 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ben@engber@ @end|ng |rom gm@||@com  Fri Jun 10 14:24:15 2022
From: ben@engber@ @end|ng |rom gm@||@com (Ben Engbers)
Date: Fri, 10 Jun 2022 14:24:15 +0200
Subject: [R-pkg-devel] Linking to a large external library
In-Reply-To: <53ec5351-919b-436f-842f-565aa0cfa281@email.android.com>
References: <53ec5351-919b-436f-842f-565aa0cfa281@email.android.com>
Message-ID: <f7bd2d03-15d4-a68c-7fa3-8307951539d6@Be-Logical.nl>

Hi,

The official Fedora 36 repository still offers R 4.1.3. Since "rolog" 
requires at least R (? 4.2), this package cannot be installed yet.
I have no experience with removing the 'default' version and then 
manually replacing it with R version 4.2. For now I'm waiting for R 4.2 
to be released in Fedora 36 ;-(

Ben

P.S. I already send an update request to the Fedora team

Op 10-06-2022 om 13:15 schreef Matthias Gondan:
> Dear Ben,
> 
> Not restricted to Windows. rolog is on CRAN, you can install it 
> normally, there's also a nice Vignette with use cases.
> 
> rologlite is under development, but the API will be similar.
> 
> Best wishes
> 
> Matthias
> 
> Am 10.06.2022 12:30 schrieb Ben Engbers <ben.engbers at gmail.com>:
> 
>     "rologlite" verwijst naar een .dll file. Ik neem dus aan dat deze
>     package bedoeld is voor Windows.
>     Mijn vraag is of "rologlite" ook gebruikt kan worden op Linux? Zo ja,
>     dan ben ik zeer benieuwd en ga ik kijken hoe ik dat voor mijn
>     ontwikkelwerkzaamheden kan gebruiken?
> 
>     Ben Engbers
> 
>     Op 08-06-2022 om 22:24 schreef matthias-gondan:
>      > Whenever I add a little feature I have to update the entire
>     package, and so have its users (currently: 0, but that might change).
>     Maybe I'll be the first ;-)
> 
>      > Therefore, I have now written a second package ("rologlite") that
>     just links to the Swi-Prolog dll, which is much smaller in size than
>     embedding it). It searches for Swi-Prolog in the path, in the
>     registry, in the environment, and if all this fails, it checks if
>     rolog is installed and looks for the swipl dll in the rolog package.
>      >
>      > ______________________________________________
>      > R-package-devel at r-project.org mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 

From Ben@Engber@ @end|ng |rom Be-Log|c@|@n|  Fri Jun 10 14:25:50 2022
From: Ben@Engber@ @end|ng |rom Be-Log|c@|@n| (Ben Engbers)
Date: Fri, 10 Jun 2022 14:25:50 +0200
Subject: [R-pkg-devel] Linking to a large external library
In-Reply-To: <53ec5351-919b-436f-842f-565aa0cfa281@email.android.com>
References: <53ec5351-919b-436f-842f-565aa0cfa281@email.android.com>
Message-ID: <f371be4a-2588-6dec-6d38-7ae95dad8580@Be-Logical.nl>

Hi,

The official Fedora 36 repository still offers R 4.1.3. Since "rolog" 
requires at least R (? 4.2), this package cannot be installed yet.
I have no experience with removing the 'default' version and then 
manually replacing it with R version 4.2. For now I'm waiting for R 4.2 
to be released in Fedora 36 ;-(

Ben

P.S. I already send an update request to the Fedora team

Op 10-06-2022 om 13:15 schreef Matthias Gondan:
> Dear Ben,
> 
> Not restricted to Windows. rolog is on CRAN, you can install it 
> normally, there's also a nice Vignette with use cases.
> 
> rologlite is under development, but the API will be similar.
> 
> Best wishes
> 
> Matthias
> 
> Am 10.06.2022 12:30 schrieb Ben Engbers <ben.engbers at gmail.com>:
> 
>     "rologlite" verwijst naar een .dll file. Ik neem dus aan dat deze
>     package bedoeld is voor Windows.
>     Mijn vraag is of "rologlite" ook gebruikt kan worden op Linux? Zo ja,
>     dan ben ik zeer benieuwd en ga ik kijken hoe ik dat voor mijn
>     ontwikkelwerkzaamheden kan gebruiken?
> 
>     Ben Engbers
> 
>     Op 08-06-2022 om 22:24 schreef matthias-gondan:
>      > Whenever I add a little feature I have to update the entire
>     package, and so have its users (currently: 0, but that might change).
>     Maybe I'll be the first ;-)
> 
>      > Therefore, I have now written a second package ("rologlite") that
>     just links to the Swi-Prolog dll, which is much smaller in size than
>     embedding it). It searches for Swi-Prolog in the path, in the
>     registry, in the environment, and if all this fails, it checks if
>     rolog is installed and looks for the swipl dll in the rolog package.
>      >
>      > ______________________________________________
>      > R-package-devel at r-project.org mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 

-- 
Ben Engbers

From edd @end|ng |rom deb|@n@org  Fri Jun 10 14:31:02 2022
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 10 Jun 2022 07:31:02 -0500
Subject: [R-pkg-devel] Linking to a large external library
In-Reply-To: <f7bd2d03-15d4-a68c-7fa3-8307951539d6@Be-Logical.nl>
References: <53ec5351-919b-436f-842f-565aa0cfa281@email.android.com>
 <f7bd2d03-15d4-a68c-7fa3-8307951539d6@Be-Logical.nl>
Message-ID: <25251.14726.220801.330693@rob.eddelbuettel.com>


On 10 June 2022 at 14:24, Ben Engbers wrote:
| The official Fedora 36 repository still offers R 4.1.3. Since "rolog" 
| requires at least R (? 4.2), this package cannot be installed yet.
| I have no experience with removing the 'default' version and then 
| manually replacing it with R version 4.2. For now I'm waiting for R 4.2 
| to be released in Fedora 36 ;-(

See eg   https://cloud.r-project.org/bin/linux/fedora/   to learn how to 
easily get R 4.2.* onto a (current) Fedora system.

Dirk
-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From m@tth|@@-gond@n @end|ng |rom gmx@de  Fri Jun 10 14:37:38 2022
From: m@tth|@@-gond@n @end|ng |rom gmx@de (Matthias Gondan)
Date: Fri, 10 Jun 2022 14:37:38 +0200
Subject: [R-pkg-devel] WG:  Linking to a large external library
References: <53ec5351-919b-436f-842f-565aa0cfa281@email.android.com>
 <3f0668cb-b143-4497-f2ed-b5db329160d4@Be-Logical.nl>
Message-ID: <1Msq2E-1nkRSb317g-00t9oM@mail.gmx.net>

Ah, yes, very annoying (because R 4.2 is only needed for the Windows version of the package). Assuming that you have swi-prolog installed, you might wish to try this (< 5 minutes)

(Linux bash)$ R

R> install.packages("remotes")
R> install_github("mgondan/rologlite")

And then please tell me if it is working.


Von: Ben Engbers
Gesendet: Freitag, 10. Juni 2022 14:05
An: Matthias Gondan
Betreff: Re: [R-pkg-devel] Linking to a large external library

Hi,

The official Fedora 36 repository still offers R 4.1.3. Since "rolog" 
requires at least R (? 4.2), this package cannot be installed yet.
I have no experience with removing the 'default' version and then 
manually replacing it with R version 4.2. For now I'm waiting for R 4.2 
to be released in Fedora 36 ;-(

Ben

Op 10-06-2022 om 13:15 schreef Matthias Gondan:
> Dear Ben,
> 
> Not restricted to Windows. rolog is on CRAN, you can install it 
> normally, there's also a nice Vignette with use cases.
> 
> rologlite is under development, but the API will be similar.
> 
> Best wishes
> 
> Matthias
> 
> Am 10.06.2022 12:30 schrieb Ben Engbers <ben.engbers at gmail.com>:
> 
>???? "rologlite" verwijst naar een .dll file. Ik neem dus aan dat deze
>???? package bedoeld is voor Windows.
>???? Mijn vraag is of "rologlite" ook gebruikt kan worden op Linux? Zo ja,
>???? dan ben ik zeer benieuwd en ga ik kijken hoe ik dat voor mijn
>???? ontwikkelwerkzaamheden kan gebruiken?
> 
>???? Ben Engbers
> 
>???? Op 08-06-2022 om 22:24 schreef matthias-gondan:
>????? > Whenever I add a little feature I have to update the entire
>???? package, and so have its users (currently: 0, but that might change).
>???? Maybe I'll be the first ;-)
> 
>????? > Therefore, I have now written a second package ("rologlite") that
>???? just links to the Swi-Prolog dll, which is much smaller in size than
>???? embedding it). It searches for Swi-Prolog in the path, in the
>???? registry, in the environment, and if all this fails, it checks if
>???? rolog is installed and looks for the swipl dll in the rolog package.
>????? >
>????? > ______________________________________________
>????? > R-package-devel at r-project.org mailing list
>????? > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 



	[[alternative HTML version deleted]]


From Ben@Engber@ @end|ng |rom Be-Log|c@|@n|  Fri Jun 10 14:53:46 2022
From: Ben@Engber@ @end|ng |rom Be-Log|c@|@n| (Ben Engbers)
Date: Fri, 10 Jun 2022 14:53:46 +0200
Subject: [R-pkg-devel] Linking to a large external library
In-Reply-To: <25251.14726.220801.330693@rob.eddelbuettel.com>
References: <53ec5351-919b-436f-842f-565aa0cfa281@email.android.com>
 <f7bd2d03-15d4-a68c-7fa3-8307951539d6@Be-Logical.nl>
 <25251.14726.220801.330693@rob.eddelbuettel.com>
Message-ID: <756f7e09-1f2d-cad8-69ca-5c2e53aee8cd@Be-Logical.nl>

\Hi,

It's been several Fedora versions since I installed R with the command 
'sudo dnf install R'. And with every update of Fedora, R was 
automatically updated to the recent version. Fedora 36 was only recently 
released. So I would expect that for Fedora 4.1.3 would be the most 
recent. 'sudo dnf update R' confirms this.
The page in the link does not provide instructions for updates. Or am I 
missing something?

Op 10-06-2022 om 14:31 schreef Dirk Eddelbuettel:
> 
> See eg   https://cloud.r-project.org/bin/linux/fedora/   to learn how to
> easily get R 4.2.* onto a (current) Fedora system.
> 
> Dirk

-- 
Ben Engbers


From |uc@r @end|ng |rom |edor@project@org  Fri Jun 10 14:54:06 2022
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Fri, 10 Jun 2022 14:54:06 +0200
Subject: [R-pkg-devel] Linking to a large external library
In-Reply-To: <f7bd2d03-15d4-a68c-7fa3-8307951539d6@Be-Logical.nl>
References: <53ec5351-919b-436f-842f-565aa0cfa281@email.android.com>
 <f7bd2d03-15d4-a68c-7fa3-8307951539d6@Be-Logical.nl>
Message-ID: <CALEXWq0X_ovGmD7TTq_ycmqCCo8GM0X5CdsOjBEvuvE28Yd_ew@mail.gmail.com>

On Fri, 10 Jun 2022 at 14:25, Ben Engbers <ben.engbers at gmail.com> wrote:
>
> Hi,
>
> The official Fedora 36 repository still offers R 4.1.3. Since "rolog"
> requires at least R (? 4.2), this package cannot be installed yet.

Not sure why this version is declared. It seems that, if you download
the package and relax the condition to >= 4.1, it works successfully.

> I have no experience with removing the 'default' version and then
> manually replacing it with R version 4.2. For now I'm waiting for R 4.2
> to be released in Fedora 36 ;-(

cc'ing spot.

I?aki

>
> Ben
>
> P.S. I already send an update request to the Fedora team
>
> Op 10-06-2022 om 13:15 schreef Matthias Gondan:
> > Dear Ben,
> >
> > Not restricted to Windows. rolog is on CRAN, you can install it
> > normally, there's also a nice Vignette with use cases.
> >
> > rologlite is under development, but the API will be similar.
> >
> > Best wishes
> >
> > Matthias
> >
> > Am 10.06.2022 12:30 schrieb Ben Engbers <ben.engbers at gmail.com>:
> >
> >     "rologlite" verwijst naar een .dll file. Ik neem dus aan dat deze
> >     package bedoeld is voor Windows.
> >     Mijn vraag is of "rologlite" ook gebruikt kan worden op Linux? Zo ja,
> >     dan ben ik zeer benieuwd en ga ik kijken hoe ik dat voor mijn
> >     ontwikkelwerkzaamheden kan gebruiken?
> >
> >     Ben Engbers
> >
> >     Op 08-06-2022 om 22:24 schreef matthias-gondan:
> >      > Whenever I add a little feature I have to update the entire
> >     package, and so have its users (currently: 0, but that might change).
> >     Maybe I'll be the first ;-)
> >
> >      > Therefore, I have now written a second package ("rologlite") that
> >     just links to the Swi-Prolog dll, which is much smaller in size than
> >     embedding it). It searches for Swi-Prolog in the path, in the
> >     registry, in the environment, and if all this fails, it checks if
> >     rolog is installed and looks for the swipl dll in the rolog package.
> >      >
> >      > ______________________________________________
> >      > R-package-devel at r-project.org mailing list
> >      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
I?aki ?car


From |uc@r @end|ng |rom |edor@project@org  Fri Jun 10 15:04:08 2022
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Fri, 10 Jun 2022 15:04:08 +0200
Subject: [R-pkg-devel] Linking to a large external library
In-Reply-To: <756f7e09-1f2d-cad8-69ca-5c2e53aee8cd@Be-Logical.nl>
References: <53ec5351-919b-436f-842f-565aa0cfa281@email.android.com>
 <f7bd2d03-15d4-a68c-7fa3-8307951539d6@Be-Logical.nl>
 <25251.14726.220801.330693@rob.eddelbuettel.com>
 <756f7e09-1f2d-cad8-69ca-5c2e53aee8cd@Be-Logical.nl>
Message-ID: <CALEXWq3BHP4vGn6jN+OaU8Pwc-=M2xbmWOVw5U9TBC5WG5E=yQ@mail.gmail.com>

On Fri, 10 Jun 2022 at 14:54, Ben Engbers <Ben.Engbers at be-logical.nl> wrote:
>
> \Hi,
>
> It's been several Fedora versions since I installed R with the command
> 'sudo dnf install R'. And with every update of Fedora, R was
> automatically updated to the recent version. Fedora 36 was only recently
> released. So I would expect that for Fedora 4.1.3 would be the most
> recent. 'sudo dnf update R' confirms this.
> The page in the link does not provide instructions for updates. Or am I
> missing something?

There are instructions specifically in [1] to run a recent version of
R (or any other software) that is available in rawhide but not in the
current release. The problem is that R 4.2 is not available in rawhide
either yet, so it won't work. Probably spot (I've cc'ed him in my last
email) has been too busy these weeks.

[1] https://cloud.r-project.org/bin/linux/fedora/#toolbox-container-based-development

I?aki

> Op 10-06-2022 om 14:31 schreef Dirk Eddelbuettel:
> >
> > See eg   https://cloud.r-project.org/bin/linux/fedora/   to learn how to
> > easily get R 4.2.* onto a (current) Fedora system.
> >
> > Dirk
>
> --
> Ben Engbers
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
I?aki ?car


From jo@ephp@rk @end|ng |rom |eee@org  Sat Jun 11 11:02:23 2022
From: jo@ephp@rk @end|ng |rom |eee@org (Joseph Park)
Date: Sat, 11 Jun 2022 05:02:23 -0400
Subject: [R-pkg-devel] Windows R 4.2.0 package will not load with UTF-8
 encoding
Message-ID: <CALE8kTFaQE9CvbjBHdExQ+oY9SV_r_jCN5pQ8Crqoj2K6oLp+Q@mail.gmail.com>

Dear R package developers,

Starting with R 4.2.0 package rEDM (https://cran.r-project.org/package=rEDM)
will not load [library( rEDM )] on Windows with the default UTF-8 encoding.

When the locale is changed from UTF-8 to non UTF-8, the package loads and
runs. One can also change the locale to non-UTF-8, load the package, detach
and unload the package, change the locale back to UTF-8, then load and run
without issue.

Note that installation from source reports:
   ** testing if installed package can be loaded from temporary location
and completes (record below).

This package uses Rcpp to wrap a C++ API.

Having searched here and in general, I don't find that others experiencing
this issue.

I have tried
  Ensure all source files are UTF-8 encoded
  Removed non-ASCII characters from all source files
  Specify non-ASCII characters with \uXXXX
  Checked vignette encoding
  Added "Encoding : UTF-8" to DESCRIPTION

Please excuse my encoding and Windows naivety.

Here is a demonstration changing the encoding to load the package, along
with unloading & reloading under UTF-8:
--
> sessionInfo()
R version 4.2.0 (2022-04-22 ucrt)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 19044)

Matrix products: default

locale:
[1] LC_COLLATE=English_United States.utf8  LC_CTYPE=English_United
States.utf8
[3] LC_MONETARY=English_United States.utf8 LC_NUMERIC=C

[5] LC_TIME=English_United States.utf8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_4.2.0
>
> Sys.setlocale('LC_ALL','English')
[1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
States.1252;LC_MONETARY=English_United
States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
Warning message:
In Sys.setlocale("LC_ALL", "English") :
  using locale code page other than 65001 ("UTF-8") may cause problems
>
> sessionInfo()
R version 4.2.0 (2022-04-22 ucrt)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 19044)

Matrix products: default

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
States.1252
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C

[5] LC_TIME=English_United States.1252
system code page: 65001

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_4.2.0
>
> library( rEDM )
>
> sessionInfo()
R version 4.2.0 (2022-04-22 ucrt)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 19044)

Matrix products: default

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
States.1252
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C

[5] LC_TIME=English_United States.1252
system code page: 65001

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] rEDM_1.12.2.1.0

loaded via a namespace (and not attached):
[1] compiler_4.2.0 Rcpp_1.0.8.3
>

### All package tests pass....
### Now detach and unload, change to UTF-8, and load

> detach( 'package:rEDM', unload = TRUE )
>
> Simplex( dataFrame = Lorenz5D, columns = 'V1', target = 'V2', lib = "1
500", pred = "501 505", E = 5 )
Error in Simplex(dataFrame = Lorenz5D, columns = "V1", target = "V2",  :
  could not find function "Simplex"

> Sys.setlocale()
[1] "LC_COLLATE=English_United States.utf8;LC_CTYPE=English_United
States.utf8;LC_MONETARY=English_United
States.utf8;LC_NUMERIC=C;LC_TIME=English_United States.utf8"
>
> sessionInfo()
R version 4.2.0 (2022-04-22 ucrt)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 19044)

Matrix products: default

locale:
[1] LC_COLLATE=English_United States.utf8  LC_CTYPE=English_United
States.utf8
[3] LC_MONETARY=English_United States.utf8 LC_NUMERIC=C

[5] LC_TIME=English_United States.utf8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] devtools_2.4.3 usethis_2.1.6

loaded via a namespace (and not attached):
 [1] Rcpp_1.0.8.3      magrittr_2.0.3    pkgload_1.2.4     R6_2.5.1
 rlang_1.0.2       fastmap_1.1.0
 [7] fansi_1.0.3       tools_4.2.0       pkgbuild_1.3.1
 sessioninfo_1.2.2 utf8_1.2.2        cli_3.3.0
[13] withr_2.5.0       ellipsis_0.3.2    remotes_2.4.2     rprojroot_2.0.3
  tibble_3.1.7      lifecycle_1.0.1
[19] crayon_1.5.1      brio_1.1.3        processx_3.6.0    purrr_0.3.4
  callr_3.7.0       vctrs_0.4.1
[25] fs_1.5.2          ps_1.7.0          testthat_3.1.4    memoise_2.0.1
  glue_1.6.2        cachem_1.0.6
[31] pillar_1.7.0      compiler_4.2.0    desc_1.4.1
 prettyunits_1.1.1 pkgconfig_2.0.3
>
>
> library( rEDM )

### All tests pass


-- 
Installation log:
> devtools::install()
   checking for file 'C:\Users\\rEDM/DESCRIPTION' ...
   checking for file 'C:\Users\\rEDM/DESCRIPTION' ...
?  checking for file 'C:\Users\\rEDM/DESCRIPTION' (1.8s)
?  preparing 'rEDM': (853ms)
   checking DESCRIPTION meta-information ...
?  checking DESCRIPTION meta-information
?  cleaning src

?  building 'rEDM_1.12.2.1.0.tar.gz'

Running "C:/Apps/R/R-4.2.0/bin/x64/Rcmd.exe" INSTALL \
  "C:\Users\AppData\Local\Temp\RtmpcdP2Nx/rEDM_1.12.2.1.0.tar.gz"
--install-tests
* installing to library 'C:/Apps/R/R-4.2.0/library'
* installing *source* package 'rEDM' ...
** using staged installation
** libs

g++  -std=gnu++11 -I"C:/Apps/R/R-4.2.0/include" -DNDEBUG -I./cppEDM/src
-I../ -I'C:/Apps/R/R-4.2.0/library/Rcpp/include'
-I'C:/Apps/R/R-4.2.0/library/RcppThread/include'
-I"C:/Apps/rtools42/x86_64-w64-mingw32.static.posix/include"     -O2 -Wall
 -mfpmath=sse -msse2 -mstackrealign  -c CCM.cpp -o CCM.o
g++  -std=gnu++11 -I"C:/Apps/R/R-4.2.0/include" -DNDEBUG -I./cppEDM/src
-I../ -I'C:/Apps/R/R-4.2.0/library/Rcpp/include'
-I'C:/Apps/R/R-4.2.0/library/RcppThread/include'
-I"C:/Apps/rtools42/x86_64-w64-mingw32.static.posix/include"     -O2 -Wall
 -mfpmath=sse -msse2 -mstackrealign  -c ComputeError.cpp -o ComputeError.o
g++  -std=gnu++11 -I"C:/Apps/R/R-4.2.0/include" -DNDEBUG -I./cppEDM/src
-I../ -I'C:/Apps/R/R-4.2.0/library/Rcpp/include'
-I'C:/Apps/R/R-4.2.0/library/RcppThread/include'
-I"C:/Apps/rtools42/x86_64-w64-mingw32.static.posix/include"     -O2 -Wall
 -mfpmath=sse -msse2 -mstackrealign  -c DataFrame.cpp -o DataFrame.o
g++  -std=gnu++11 -I"C:/Apps/R/R-4.2.0/include" -DNDEBUG -I./cppEDM/src
-I../ -I'C:/Apps/R/R-4.2.0/library/Rcpp/include'
-I'C:/Apps/R/R-4.2.0/library/RcppThread/include'
-I"C:/Apps/rtools42/x86_64-w64-mingw32.static.posix/include"     -O2 -Wall
 -mfpmath=sse -msse2 -mstackrealign  -c Embed.cpp -o Embed.o
g++  -std=gnu++11 -I"C:/Apps/R/R-4.2.0/include" -DNDEBUG -I./cppEDM/src
-I../ -I'C:/Apps/R/R-4.2.0/library/Rcpp/include'
-I'C:/Apps/R/R-4.2.0/library/RcppThread/include'
-I"C:/Apps/rtools42/x86_64-w64-mingw32.static.posix/include"     -O2 -Wall
 -mfpmath=sse -msse2 -mstackrealign  -c EmbedDim.cpp -o EmbedDim.o
g++  -std=gnu++11 -I"C:/Apps/R/R-4.2.0/include" -DNDEBUG -I./cppEDM/src
-I../ -I'C:/Apps/R/R-4.2.0/library/Rcpp/include'
-I'C:/Apps/R/R-4.2.0/library/RcppThread/include'
-I"C:/Apps/rtools42/x86_64-w64-mingw32.static.posix/include"     -O2 -Wall
 -mfpmath=sse -msse2 -mstackrealign  -c Multiview.cpp -o Multiview.o
g++  -std=gnu++11 -I"C:/Apps/R/R-4.2.0/include" -DNDEBUG -I./cppEDM/src
-I../ -I'C:/Apps/R/R-4.2.0/library/Rcpp/include'
-I'C:/Apps/R/R-4.2.0/library/RcppThread/include'
-I"C:/Apps/rtools42/x86_64-w64-mingw32.static.posix/include"     -O2 -Wall
 -mfpmath=sse -msse2 -mstackrealign  -c ParameterList.cpp -o ParameterList.o
g++  -std=gnu++11 -I"C:/Apps/R/R-4.2.0/include" -DNDEBUG -I./cppEDM/src
-I../ -I'C:/Apps/R/R-4.2.0/library/Rcpp/include'
-I'C:/Apps/R/R-4.2.0/library/RcppThread/include'
-I"C:/Apps/rtools42/x86_64-w64-mingw32.static.posix/include"     -O2 -Wall
 -mfpmath=sse -msse2 -mstackrealign  -c PredictInterval.cpp -o
PredictInterval.o
g++  -std=gnu++11 -I"C:/Apps/R/R-4.2.0/include" -DNDEBUG -I./cppEDM/src
-I../ -I'C:/Apps/R/R-4.2.0/library/Rcpp/include'
-I'C:/Apps/R/R-4.2.0/library/RcppThread/include'
-I"C:/Apps/rtools42/x86_64-w64-mingw32.static.posix/include"     -O2 -Wall
 -mfpmath=sse -msse2 -mstackrealign  -c PredictNL.cpp -o PredictNL.o
g++  -std=gnu++11 -I"C:/Apps/R/R-4.2.0/include" -DNDEBUG -I./cppEDM/src
-I../ -I'C:/Apps/R/R-4.2.0/library/Rcpp/include'
-I'C:/Apps/R/R-4.2.0/library/RcppThread/include'
-I"C:/Apps/rtools42/x86_64-w64-mingw32.static.posix/include"     -O2 -Wall
 -mfpmath=sse -msse2 -mstackrealign  -c RcppEDMCommon.cpp -o RcppEDMCommon.o
g++  -std=gnu++11 -I"C:/Apps/R/R-4.2.0/include" -DNDEBUG -I./cppEDM/src
-I../ -I'C:/Apps/R/R-4.2.0/library/Rcpp/include'
-I'C:/Apps/R/R-4.2.0/library/RcppThread/include'
-I"C:/Apps/rtools42/x86_64-w64-mingw32.static.posix/include"     -O2 -Wall
 -mfpmath=sse -msse2 -mstackrealign  -c RcppExports.cpp -o RcppExports.o
g++  -std=gnu++11 -I"C:/Apps/R/R-4.2.0/include" -DNDEBUG -I./cppEDM/src
-I../ -I'C:/Apps/R/R-4.2.0/library/Rcpp/include'
-I'C:/Apps/R/R-4.2.0/library/RcppThread/include'
-I"C:/Apps/rtools42/x86_64-w64-mingw32.static.posix/include"     -O2 -Wall
 -mfpmath=sse -msse2 -mstackrealign  -c SMap.cpp -o SMap.o
g++  -std=gnu++11 -I"C:/Apps/R/R-4.2.0/include" -DNDEBUG -I./cppEDM/src
-I../ -I'C:/Apps/R/R-4.2.0/library/Rcpp/include'
-I'C:/Apps/R/R-4.2.0/library/RcppThread/include'
-I"C:/Apps/rtools42/x86_64-w64-mingw32.static.posix/include"     -O2 -Wall
 -mfpmath=sse -msse2 -mstackrealign  -c Simplex.cpp -o Simplex.o
make[1]: Entering directory
'/c/Users/jpark/AppData/Local/Temp/Rtmp0UDIkt/R.INSTALL2d3c6fa91a0b/rEDM/src/cppEDM/src'
gcc  -std=c++11 -DCCM_THREADED -DMULTIVIEW_VALUES_OVERLOAD -I../  -c API.cc
gcc  -std=c++11 -DCCM_THREADED -DMULTIVIEW_VALUES_OVERLOAD -I../  -c CCM.cc
gcc  -std=c++11 -DCCM_THREADED -DMULTIVIEW_VALUES_OVERLOAD -I../  -c
Common.cc
gcc  -std=c++11 -DCCM_THREADED -DMULTIVIEW_VALUES_OVERLOAD -I../  -c
DateTime.cc
gcc  -std=c++11 -DCCM_THREADED -DMULTIVIEW_VALUES_OVERLOAD -I../  -c EDM.cc
gcc  -std=c++11 -DCCM_THREADED -DMULTIVIEW_VALUES_OVERLOAD -I../  -c
EDM_Formatting.cc
gcc  -std=c++11 -DCCM_THREADED -DMULTIVIEW_VALUES_OVERLOAD -I../  -c
EDM_Neighbors.cc
gcc  -std=c++11 -DCCM_THREADED -DMULTIVIEW_VALUES_OVERLOAD -I../  -c Eval.cc
gcc  -std=c++11 -DCCM_THREADED -DMULTIVIEW_VALUES_OVERLOAD -I../  -c
Multiview.cc
gcc  -std=c++11 -DCCM_THREADED -DMULTIVIEW_VALUES_OVERLOAD -I../  -c
Parameter.cc
gcc  -std=c++11 -DCCM_THREADED -DMULTIVIEW_VALUES_OVERLOAD -I../  -c
Simplex.cc
gcc  -std=c++11 -DCCM_THREADED -DMULTIVIEW_VALUES_OVERLOAD -I../  -c SMap.cc
ar -rcs libEDM.a API.o CCM.o Common.o DateTime.o EDM.o EDM_Formatting.o
EDM_Neighbors.o Eval.o Multiview.o Parameter.o Simplex.o SMap.o
cp libEDM.a ../lib/
make[1]: Leaving directory
'/c/Users//AppData/Local/Temp/Rtmp0UDIkt/R.INSTALL2d3c6fa91a0b/rEDM/src/cppEDM/src'
g++ -shared -s -static-libgcc -o rEDM.dll tmp.def CCM.o ComputeError.o
DataFrame.o Embed.o EmbedDim.o Multiview.o ParameterList.o
PredictInterval.o PredictNL.o RcppEDMCommon.o RcppExports.o SMap.o
Simplex.o -L./cppEDM/src/ -lEDM -LC:/Apps/R/R-4.2.0/bin/x64 -lRlapack
-LC:/Apps/rtools42/x86_64-w64-mingw32.static.posix/lib/x64
-LC:/Apps/rtools42/x86_64-w64-mingw32.static.posix/lib
-LC:/Apps/R/R-4.2.0/bin/x64 -lR
installing to C:/Apps/R/R-4.2.0/library/00LOCK-rEDM/00new/rEDM/libs/x64

** R
** data
*** moving datasets to lazyload DB
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
*** copying figures
** building package indices
** installing vignettes
** testing if installed package can be loaded from temporary location
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation
path
* DONE (rEDM)

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Jun 11 12:16:38 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 11 Jun 2022 06:16:38 -0400
Subject: [R-pkg-devel] Windows R 4.2.0 package will not load with UTF-8
 encoding
In-Reply-To: <CALE8kTFaQE9CvbjBHdExQ+oY9SV_r_jCN5pQ8Crqoj2K6oLp+Q@mail.gmail.com>
References: <CALE8kTFaQE9CvbjBHdExQ+oY9SV_r_jCN5pQ8Crqoj2K6oLp+Q@mail.gmail.com>
Message-ID: <8abc1685-cb6b-78df-b3e0-b289e9f6cc8d@gmail.com>

On 11/06/2022 5:02 a.m., Joseph Park wrote:
> Dear R package developers,
> 
> Starting with R 4.2.0 package rEDM (https://cran.r-project.org/package=rEDM)
> will not load [library( rEDM )] on Windows with the default UTF-8 encoding.
> 
> When the locale is changed from UTF-8 to non UTF-8, the package loads and
> runs. One can also change the locale to non-UTF-8, load the package, detach
> and unload the package, change the locale back to UTF-8, then load and run
> without issue.
> 
> Note that installation from source reports:
>     ** testing if installed package can be loaded from temporary location
> and completes (record below).
> 
> This package uses Rcpp to wrap a C++ API.
> 
> Having searched here and in general, I don't find that others experiencing
> this issue.
> 
> I have tried
>    Ensure all source files are UTF-8 encoded
>    Removed non-ASCII characters from all source files
>    Specify non-ASCII characters with \uXXXX
>    Checked vignette encoding
>    Added "Encoding : UTF-8" to DESCRIPTION
> 
> Please excuse my encoding and Windows naivety.
> 
> Here is a demonstration changing the encoding to load the package, along
> with unloading & reloading under UTF-8:
> --
>> sessionInfo()
> R version 4.2.0 (2022-04-22 ucrt)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 10 x64 (build 19044)
> 
> Matrix products: default
> 
> locale:
> [1] LC_COLLATE=English_United States.utf8  LC_CTYPE=English_United
> States.utf8
> [3] LC_MONETARY=English_United States.utf8 LC_NUMERIC=C
> 
> [5] LC_TIME=English_United States.utf8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.2.0
>>
>> Sys.setlocale('LC_ALL','English')
> [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
> States.1252;LC_MONETARY=English_United
> States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
> Warning message:
> In Sys.setlocale("LC_ALL", "English") :
>    using locale code page other than 65001 ("UTF-8") may cause problems
>>
>> sessionInfo()
> R version 4.2.0 (2022-04-22 ucrt)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 10 x64 (build 19044)
> 
> Matrix products: default
> 
> locale:
> [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
> States.1252
> [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
> 
> [5] LC_TIME=English_United States.1252
> system code page: 65001
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.2.0
>>
>> library( rEDM )
>>
>> sessionInfo()
> R version 4.2.0 (2022-04-22 ucrt)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 10 x64 (build 19044)
> 
> Matrix products: default
> 
> locale:
> [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
> States.1252
> [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
> 
> [5] LC_TIME=English_United States.1252
> system code page: 65001
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> other attached packages:
> [1] rEDM_1.12.2.1.0
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.2.0 Rcpp_1.0.8.3
>>
> 
> ### All package tests pass....
> ### Now detach and unload, change to UTF-8, and load
> 
>> detach( 'package:rEDM', unload = TRUE )
>>
>> Simplex( dataFrame = Lorenz5D, columns = 'V1', target = 'V2', lib = "1
> 500", pred = "501 505", E = 5 )
> Error in Simplex(dataFrame = Lorenz5D, columns = "V1", target = "V2",  :
>    could not find function "Simplex"

I don't see any attempt to load the package.  You attempted to use the 
function Simplex and it was not found.  That indicates the package is 
not loaded, but not why.

What you should show are the messages you get when you start a clean 
copy of R and immediately attempt to load the package using library(). 
It's helpful that you posted sessionInfo(); I'd include that again with 
the new information, in case anything is different.

Duncan Murdoch


From kry|ov@r00t @end|ng |rom gm@||@com  Sat Jun 11 12:26:02 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sat, 11 Jun 2022 13:26:02 +0300
Subject: [R-pkg-devel] Windows R 4.2.0 package will not load with UTF-8
 encoding
In-Reply-To: <CALE8kTFaQE9CvbjBHdExQ+oY9SV_r_jCN5pQ8Crqoj2K6oLp+Q@mail.gmail.com>
References: <CALE8kTFaQE9CvbjBHdExQ+oY9SV_r_jCN5pQ8Crqoj2K6oLp+Q@mail.gmail.com>
Message-ID: <20220611132602.12b7437a@trisector>

On Sat, 11 Jun 2022 05:02:23 -0400
Joseph Park <josephpark at ieee.org> wrote:

> Starting with R 4.2.0 package rEDM
> (https://cran.r-project.org/package=rEDM) will not load [library(
> rEDM )] on Windows with the default UTF-8 encoding.

Could you please explain what happens instead of the expected behaviour?

Your examples seem to work without errors on CRAN machines running
Windows with R ? 4.2.0 and UTF-8 encoding:

https://www.r-project.org/nosvn/R.check/r-release-windows-x86_64/rEDM-00check.html
https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64/rEDM-00check.html

-- 
Best regards,
Ivan


From jo@ephp@rk @end|ng |rom |eee@org  Sat Jun 11 12:33:53 2022
From: jo@ephp@rk @end|ng |rom |eee@org (Joseph Park)
Date: Sat, 11 Jun 2022 06:33:53 -0400
Subject: [R-pkg-devel] Windows R 4.2.0 package will not load with UTF-8
 encoding
In-Reply-To: <8abc1685-cb6b-78df-b3e0-b289e9f6cc8d@gmail.com>
References: <CALE8kTFaQE9CvbjBHdExQ+oY9SV_r_jCN5pQ8Crqoj2K6oLp+Q@mail.gmail.com>
 <8abc1685-cb6b-78df-b3e0-b289e9f6cc8d@gmail.com>
Message-ID: <CALE8kTHGY0b7E4jq75fZu73w9=Uch4ZN86sqmHzuvRym8X3gzQ@mail.gmail.com>

Apologies for the pages of minutia.  I endeavored to post reproduceable
example. I'm unable to show the failure since it simply hangs at the prompt
with CPU spinning and memory cyclically ramping and declining.  One has to
kill R. The posted commands show the workaround, not the failure.

I since found that just changing the LC_COLLATE is enough to allow the
library to load :
> Sys.setlocale('LC_COLLATE','English')
[1] "English_United States.1252"
> Sys.getlocale()
[1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
States.utf8;LC_MONETARY=English_United
States.utf8;LC_NUMERIC=C;LC_TIME=English_United States.utf8"

Again, apologies for my naivety.

On Sat, Jun 11, 2022 at 6:16 AM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 11/06/2022 5:02 a.m., Joseph Park wrote:
> > Dear R package developers,
> >
> > Starting with R 4.2.0 package rEDM (
> https://cran.r-project.org/package=rEDM)
> > will not load [library( rEDM )] on Windows with the default UTF-8
> encoding.
> >
> > When the locale is changed from UTF-8 to non UTF-8, the package loads and
> > runs. One can also change the locale to non-UTF-8, load the package,
> detach
> > and unload the package, change the locale back to UTF-8, then load and
> run
> > without issue.
> >
> > Note that installation from source reports:
> >     ** testing if installed package can be loaded from temporary location
> > and completes (record below).
> >
> > This package uses Rcpp to wrap a C++ API.
> >
> > Having searched here and in general, I don't find that others
> experiencing
> > this issue.
> >
> > I have tried
> >    Ensure all source files are UTF-8 encoded
> >    Removed non-ASCII characters from all source files
> >    Specify non-ASCII characters with \uXXXX
> >    Checked vignette encoding
> >    Added "Encoding : UTF-8" to DESCRIPTION
> >
> > Please excuse my encoding and Windows naivety.
> >
> > Here is a demonstration changing the encoding to load the package, along
> > with unloading & reloading under UTF-8:
> > --
> >> sessionInfo()
> > R version 4.2.0 (2022-04-22 ucrt)
> > Platform: x86_64-w64-mingw32/x64 (64-bit)
> > Running under: Windows 10 x64 (build 19044)
> >
> > Matrix products: default
> >
> > locale:
> > [1] LC_COLLATE=English_United States.utf8  LC_CTYPE=English_United
> > States.utf8
> > [3] LC_MONETARY=English_United States.utf8 LC_NUMERIC=C
> >
> > [5] LC_TIME=English_United States.utf8
> >
> > attached base packages:
> > [1] stats     graphics  grDevices utils     datasets  methods   base
> >
> > loaded via a namespace (and not attached):
> > [1] compiler_4.2.0
> >>
> >> Sys.setlocale('LC_ALL','English')
> > [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
> > States.1252;LC_MONETARY=English_United
> > States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
> > Warning message:
> > In Sys.setlocale("LC_ALL", "English") :
> >    using locale code page other than 65001 ("UTF-8") may cause problems
> >>
> >> sessionInfo()
> > R version 4.2.0 (2022-04-22 ucrt)
> > Platform: x86_64-w64-mingw32/x64 (64-bit)
> > Running under: Windows 10 x64 (build 19044)
> >
> > Matrix products: default
> >
> > locale:
> > [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
> > States.1252
> > [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
> >
> > [5] LC_TIME=English_United States.1252
> > system code page: 65001
> >
> > attached base packages:
> > [1] stats     graphics  grDevices utils     datasets  methods   base
> >
> > loaded via a namespace (and not attached):
> > [1] compiler_4.2.0
> >>
> >> library( rEDM )
> >>
> >> sessionInfo()
> > R version 4.2.0 (2022-04-22 ucrt)
> > Platform: x86_64-w64-mingw32/x64 (64-bit)
> > Running under: Windows 10 x64 (build 19044)
> >
> > Matrix products: default
> >
> > locale:
> > [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
> > States.1252
> > [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
> >
> > [5] LC_TIME=English_United States.1252
> > system code page: 65001
> >
> > attached base packages:
> > [1] stats     graphics  grDevices utils     datasets  methods   base
> >
> > other attached packages:
> > [1] rEDM_1.12.2.1.0
> >
> > loaded via a namespace (and not attached):
> > [1] compiler_4.2.0 Rcpp_1.0.8.3
> >>
> >
> > ### All package tests pass....
> > ### Now detach and unload, change to UTF-8, and load
> >
> >> detach( 'package:rEDM', unload = TRUE )
> >>
> >> Simplex( dataFrame = Lorenz5D, columns = 'V1', target = 'V2', lib = "1
> > 500", pred = "501 505", E = 5 )
> > Error in Simplex(dataFrame = Lorenz5D, columns = "V1", target = "V2",  :
> >    could not find function "Simplex"
>
> I don't see any attempt to load the package.  You attempted to use the
> function Simplex and it was not found.  That indicates the package is
> not loaded, but not why.
>
> What you should show are the messages you get when you start a clean
> copy of R and immediately attempt to load the package using library().
> It's helpful that you posted sessionInfo(); I'd include that again with
> the new information, in case anything is different.
>
> Duncan Murdoch
>
>

	[[alternative HTML version deleted]]


From jo@ephp@rk @end|ng |rom |eee@org  Sat Jun 11 12:43:03 2022
From: jo@ephp@rk @end|ng |rom |eee@org (Joseph Park)
Date: Sat, 11 Jun 2022 06:43:03 -0400
Subject: [R-pkg-devel] Windows R 4.2.0 package will not load with UTF-8
 encoding
In-Reply-To: <CALE8kTHGY0b7E4jq75fZu73w9=Uch4ZN86sqmHzuvRym8X3gzQ@mail.gmail.com>
References: <CALE8kTFaQE9CvbjBHdExQ+oY9SV_r_jCN5pQ8Crqoj2K6oLp+Q@mail.gmail.com>
 <8abc1685-cb6b-78df-b3e0-b289e9f6cc8d@gmail.com>
 <CALE8kTHGY0b7E4jq75fZu73w9=Uch4ZN86sqmHzuvRym8X3gzQ@mail.gmail.com>
Message-ID: <CALE8kTFxthEET8fGoA7MdeM_-ZuJrG4D=8wT7J_C350+VJHRxQ@mail.gmail.com>

Thank you for the check of the CRAN builds.  I also checked that as a first
step.  Perhaps there is some difference between the CRAN setups, as I have
reproduced this on 3 Windows 10 machines with clean installs of R 4.2.0,
and it has been reported by other users.  I also noted in the post that
building and installing via devtools reports success (  ** testing if
installed package can be loaded from temporary location ), however, a
subsequent attempt to load hangs.

On Sat, Jun 11, 2022 at 6:33 AM Joseph Park <josephpark at ieee.org> wrote:

> Apologies for the pages of minutia.  I endeavored to post reproduceable
> example. I'm unable to show the failure since it simply hangs at the prompt
> with CPU spinning and memory cyclically ramping and declining.  One has to
> kill R. The posted commands show the workaround, not the failure.
>
> I since found that just changing the LC_COLLATE is enough to allow the
> library to load :
> > Sys.setlocale('LC_COLLATE','English')
> [1] "English_United States.1252"
> > Sys.getlocale()
> [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
> States.utf8;LC_MONETARY=English_United
> States.utf8;LC_NUMERIC=C;LC_TIME=English_United States.utf8"
>
> Again, apologies for my naivety.
>
> On Sat, Jun 11, 2022 at 6:16 AM Duncan Murdoch <murdoch.duncan at gmail.com>
> wrote:
>
>> On 11/06/2022 5:02 a.m., Joseph Park wrote:
>> > Dear R package developers,
>> >
>> > Starting with R 4.2.0 package rEDM (
>> https://cran.r-project.org/package=rEDM)
>> > will not load [library( rEDM )] on Windows with the default UTF-8
>> encoding.
>> >
>> > When the locale is changed from UTF-8 to non UTF-8, the package loads
>> and
>> > runs. One can also change the locale to non-UTF-8, load the package,
>> detach
>> > and unload the package, change the locale back to UTF-8, then load and
>> run
>> > without issue.
>> >
>> > Note that installation from source reports:
>> >     ** testing if installed package can be loaded from temporary
>> location
>> > and completes (record below).
>> >
>> > This package uses Rcpp to wrap a C++ API.
>> >
>> > Having searched here and in general, I don't find that others
>> experiencing
>> > this issue.
>> >
>> > I have tried
>> >    Ensure all source files are UTF-8 encoded
>> >    Removed non-ASCII characters from all source files
>> >    Specify non-ASCII characters with \uXXXX
>> >    Checked vignette encoding
>> >    Added "Encoding : UTF-8" to DESCRIPTION
>> >
>> > Please excuse my encoding and Windows naivety.
>> >
>> > Here is a demonstration changing the encoding to load the package, along
>> > with unloading & reloading under UTF-8:
>> > --
>> >> sessionInfo()
>> > R version 4.2.0 (2022-04-22 ucrt)
>> > Platform: x86_64-w64-mingw32/x64 (64-bit)
>> > Running under: Windows 10 x64 (build 19044)
>> >
>> > Matrix products: default
>> >
>> > locale:
>> > [1] LC_COLLATE=English_United States.utf8  LC_CTYPE=English_United
>> > States.utf8
>> > [3] LC_MONETARY=English_United States.utf8 LC_NUMERIC=C
>> >
>> > [5] LC_TIME=English_United States.utf8
>> >
>> > attached base packages:
>> > [1] stats     graphics  grDevices utils     datasets  methods   base
>> >
>> > loaded via a namespace (and not attached):
>> > [1] compiler_4.2.0
>> >>
>> >> Sys.setlocale('LC_ALL','English')
>> > [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
>> > States.1252;LC_MONETARY=English_United
>> > States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
>> > Warning message:
>> > In Sys.setlocale("LC_ALL", "English") :
>> >    using locale code page other than 65001 ("UTF-8") may cause problems
>> >>
>> >> sessionInfo()
>> > R version 4.2.0 (2022-04-22 ucrt)
>> > Platform: x86_64-w64-mingw32/x64 (64-bit)
>> > Running under: Windows 10 x64 (build 19044)
>> >
>> > Matrix products: default
>> >
>> > locale:
>> > [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
>> > States.1252
>> > [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
>> >
>> > [5] LC_TIME=English_United States.1252
>> > system code page: 65001
>> >
>> > attached base packages:
>> > [1] stats     graphics  grDevices utils     datasets  methods   base
>> >
>> > loaded via a namespace (and not attached):
>> > [1] compiler_4.2.0
>> >>
>> >> library( rEDM )
>> >>
>> >> sessionInfo()
>> > R version 4.2.0 (2022-04-22 ucrt)
>> > Platform: x86_64-w64-mingw32/x64 (64-bit)
>> > Running under: Windows 10 x64 (build 19044)
>> >
>> > Matrix products: default
>> >
>> > locale:
>> > [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
>> > States.1252
>> > [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
>> >
>> > [5] LC_TIME=English_United States.1252
>> > system code page: 65001
>> >
>> > attached base packages:
>> > [1] stats     graphics  grDevices utils     datasets  methods   base
>> >
>> > other attached packages:
>> > [1] rEDM_1.12.2.1.0
>> >
>> > loaded via a namespace (and not attached):
>> > [1] compiler_4.2.0 Rcpp_1.0.8.3
>> >>
>> >
>> > ### All package tests pass....
>> > ### Now detach and unload, change to UTF-8, and load
>> >
>> >> detach( 'package:rEDM', unload = TRUE )
>> >>
>> >> Simplex( dataFrame = Lorenz5D, columns = 'V1', target = 'V2', lib = "1
>> > 500", pred = "501 505", E = 5 )
>> > Error in Simplex(dataFrame = Lorenz5D, columns = "V1", target = "V2",  :
>> >    could not find function "Simplex"
>>
>> I don't see any attempt to load the package.  You attempted to use the
>> function Simplex and it was not found.  That indicates the package is
>> not loaded, but not why.
>>
>> What you should show are the messages you get when you start a clean
>> copy of R and immediately attempt to load the package using library().
>> It's helpful that you posted sessionInfo(); I'd include that again with
>> the new information, in case anything is different.
>>
>> Duncan Murdoch
>>
>>

	[[alternative HTML version deleted]]


From yut@n|@|n| @end|ng |rom gm@||@com  Sat Jun 11 13:13:55 2022
From: yut@n|@|n| @end|ng |rom gm@||@com (Hiroaki Yutani)
Date: Sat, 11 Jun 2022 20:13:55 +0900
Subject: [R-pkg-devel] Windows R 4.2.0 package will not load with UTF-8
 encoding
In-Reply-To: <CALE8kTFxthEET8fGoA7MdeM_-ZuJrG4D=8wT7J_C350+VJHRxQ@mail.gmail.com>
References: <CALE8kTFaQE9CvbjBHdExQ+oY9SV_r_jCN5pQ8Crqoj2K6oLp+Q@mail.gmail.com>
 <8abc1685-cb6b-78df-b3e0-b289e9f6cc8d@gmail.com>
 <CALE8kTHGY0b7E4jq75fZu73w9=Uch4ZN86sqmHzuvRym8X3gzQ@mail.gmail.com>
 <CALE8kTFxthEET8fGoA7MdeM_-ZuJrG4D=8wT7J_C350+VJHRxQ@mail.gmail.com>
Message-ID: <CALyqOb_vC9MvqVFpyNT48PgTKR=sz5h=e7V5V4mYP5U4=7oypw@mail.gmail.com>

Hi,

As your package seems to use std::regex [1], you might hit this bug in GCC.

https://gcc.gnu.org/bugzilla/show_bug.cgi?id=98723

This thread might also help:

https://github.com/tesseract-ocr/tesseract/issues/3830

Best,
Yutani

[1]: https://github.com/SugiharaLab/rEDM/blob/be6d81fb586ceac3dab59b061b5ed867e276dd83/src/cppEDM/src/DateTime.cc#L16

2022?6?11?(?) 19:48 Joseph Park <josephpark at ieee.org>:
>
> Thank you for the check of the CRAN builds.  I also checked that as a first
> step.  Perhaps there is some difference between the CRAN setups, as I have
> reproduced this on 3 Windows 10 machines with clean installs of R 4.2.0,
> and it has been reported by other users.  I also noted in the post that
> building and installing via devtools reports success (  ** testing if
> installed package can be loaded from temporary location ), however, a
> subsequent attempt to load hangs.
>
> On Sat, Jun 11, 2022 at 6:33 AM Joseph Park <josephpark at ieee.org> wrote:
>
> > Apologies for the pages of minutia.  I endeavored to post reproduceable
> > example. I'm unable to show the failure since it simply hangs at the prompt
> > with CPU spinning and memory cyclically ramping and declining.  One has to
> > kill R. The posted commands show the workaround, not the failure.
> >
> > I since found that just changing the LC_COLLATE is enough to allow the
> > library to load :
> > > Sys.setlocale('LC_COLLATE','English')
> > [1] "English_United States.1252"
> > > Sys.getlocale()
> > [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
> > States.utf8;LC_MONETARY=English_United
> > States.utf8;LC_NUMERIC=C;LC_TIME=English_United States.utf8"
> >
> > Again, apologies for my naivety.
> >
> > On Sat, Jun 11, 2022 at 6:16 AM Duncan Murdoch <murdoch.duncan at gmail.com>
> > wrote:
> >
> >> On 11/06/2022 5:02 a.m., Joseph Park wrote:
> >> > Dear R package developers,
> >> >
> >> > Starting with R 4.2.0 package rEDM (
> >> https://cran.r-project.org/package=rEDM)
> >> > will not load [library( rEDM )] on Windows with the default UTF-8
> >> encoding.
> >> >
> >> > When the locale is changed from UTF-8 to non UTF-8, the package loads
> >> and
> >> > runs. One can also change the locale to non-UTF-8, load the package,
> >> detach
> >> > and unload the package, change the locale back to UTF-8, then load and
> >> run
> >> > without issue.
> >> >
> >> > Note that installation from source reports:
> >> >     ** testing if installed package can be loaded from temporary
> >> location
> >> > and completes (record below).
> >> >
> >> > This package uses Rcpp to wrap a C++ API.
> >> >
> >> > Having searched here and in general, I don't find that others
> >> experiencing
> >> > this issue.
> >> >
> >> > I have tried
> >> >    Ensure all source files are UTF-8 encoded
> >> >    Removed non-ASCII characters from all source files
> >> >    Specify non-ASCII characters with \uXXXX
> >> >    Checked vignette encoding
> >> >    Added "Encoding : UTF-8" to DESCRIPTION
> >> >
> >> > Please excuse my encoding and Windows naivety.
> >> >
> >> > Here is a demonstration changing the encoding to load the package, along
> >> > with unloading & reloading under UTF-8:
> >> > --
> >> >> sessionInfo()
> >> > R version 4.2.0 (2022-04-22 ucrt)
> >> > Platform: x86_64-w64-mingw32/x64 (64-bit)
> >> > Running under: Windows 10 x64 (build 19044)
> >> >
> >> > Matrix products: default
> >> >
> >> > locale:
> >> > [1] LC_COLLATE=English_United States.utf8  LC_CTYPE=English_United
> >> > States.utf8
> >> > [3] LC_MONETARY=English_United States.utf8 LC_NUMERIC=C
> >> >
> >> > [5] LC_TIME=English_United States.utf8
> >> >
> >> > attached base packages:
> >> > [1] stats     graphics  grDevices utils     datasets  methods   base
> >> >
> >> > loaded via a namespace (and not attached):
> >> > [1] compiler_4.2.0
> >> >>
> >> >> Sys.setlocale('LC_ALL','English')
> >> > [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
> >> > States.1252;LC_MONETARY=English_United
> >> > States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
> >> > Warning message:
> >> > In Sys.setlocale("LC_ALL", "English") :
> >> >    using locale code page other than 65001 ("UTF-8") may cause problems
> >> >>
> >> >> sessionInfo()
> >> > R version 4.2.0 (2022-04-22 ucrt)
> >> > Platform: x86_64-w64-mingw32/x64 (64-bit)
> >> > Running under: Windows 10 x64 (build 19044)
> >> >
> >> > Matrix products: default
> >> >
> >> > locale:
> >> > [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
> >> > States.1252
> >> > [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
> >> >
> >> > [5] LC_TIME=English_United States.1252
> >> > system code page: 65001
> >> >
> >> > attached base packages:
> >> > [1] stats     graphics  grDevices utils     datasets  methods   base
> >> >
> >> > loaded via a namespace (and not attached):
> >> > [1] compiler_4.2.0
> >> >>
> >> >> library( rEDM )
> >> >>
> >> >> sessionInfo()
> >> > R version 4.2.0 (2022-04-22 ucrt)
> >> > Platform: x86_64-w64-mingw32/x64 (64-bit)
> >> > Running under: Windows 10 x64 (build 19044)
> >> >
> >> > Matrix products: default
> >> >
> >> > locale:
> >> > [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
> >> > States.1252
> >> > [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
> >> >
> >> > [5] LC_TIME=English_United States.1252
> >> > system code page: 65001
> >> >
> >> > attached base packages:
> >> > [1] stats     graphics  grDevices utils     datasets  methods   base
> >> >
> >> > other attached packages:
> >> > [1] rEDM_1.12.2.1.0
> >> >
> >> > loaded via a namespace (and not attached):
> >> > [1] compiler_4.2.0 Rcpp_1.0.8.3
> >> >>
> >> >
> >> > ### All package tests pass....
> >> > ### Now detach and unload, change to UTF-8, and load
> >> >
> >> >> detach( 'package:rEDM', unload = TRUE )
> >> >>
> >> >> Simplex( dataFrame = Lorenz5D, columns = 'V1', target = 'V2', lib = "1
> >> > 500", pred = "501 505", E = 5 )
> >> > Error in Simplex(dataFrame = Lorenz5D, columns = "V1", target = "V2",  :
> >> >    could not find function "Simplex"
> >>
> >> I don't see any attempt to load the package.  You attempted to use the
> >> function Simplex and it was not found.  That indicates the package is
> >> not loaded, but not why.
> >>
> >> What you should show are the messages you get when you start a clean
> >> copy of R and immediately attempt to load the package using library().
> >> It's helpful that you posted sessionInfo(); I'd include that again with
> >> the new information, in case anything is different.
> >>
> >> Duncan Murdoch
> >>
> >>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||y@oyong85 @end|ng |rom gm@||@com  Sat Jun 11 13:29:25 2022
From: ||y@oyong85 @end|ng |rom gm@||@com (Yaoyong Li)
Date: Sat, 11 Jun 2022 12:29:25 +0100
Subject: [R-pkg-devel] a problem with the underscore in a R function document
Message-ID: <CAMb-knn+o+sDtLsLGX9Q7xQN6LjvEVf90DAWo_n8kgereiMbPA@mail.gmail.com>

Hello,

I just got a problem in a function document in a package I developed.The
file containing the document is generatingCDSaaFile.Rd. The problem is
related to the underscore I used in the following sentence

      and the last part is ?\_AAseq.txt.gz?

I got a 'note' message when the package was checked in the CRAN:

checkRd: (-1) generatingCDSaaFile.Rd:72: Escaped LaTeX specials: \_

I don't think I saw this kind of message in the past (say six months
ago). A copy of the check result in CRAN is appended below. As you can
see, I also got the same problem in other places in the document. I
have been trying to fix the problem via searching Google. I have tried
to replace "\_" with "\textunderscore " as some internet post
suggested, but this did not solve the problem.

So I just wonder if anyone can help me with the problem. Please let me
know if any more information is needed.


Best regards,

Yaoyong

#####################################################

CRAN Package Check Results for Package geno2proteo
<https://cran.r-project.org/web/packages/geno2proteo/index.html>

Last updated on 2022-06-11 11:52:26 CEST.
FlavorVersionTinstallTcheckTtotalStatusFlags
r-devel-linux-x86_64-debian-clang
<https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-debian-clang>
0.0.5 17.31 170.54 187.85 NOTE
<https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-clang/geno2proteo-00check.html>
r-devel-linux-x86_64-debian-gcc
<https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-debian-gcc>
0.0.5 12.00 130.58 142.58 NOTE
<https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-gcc/geno2proteo-00check.html>
r-devel-linux-x86_64-fedora-clang
<https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-fedora-clang>
0.0.5 220.04 NOTE
<https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/geno2proteo-00check.html>
r-devel-linux-x86_64-fedora-gcc
<https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-fedora-gcc>
0.0.5 229.54 NOTE
<https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-gcc/geno2proteo-00check.html>
r-devel-windows-x86_64
<https://cran.r-project.org/web/checks/check_flavors.html#r-devel-windows-x86_64>
0.0.5 242.00 470.00 712.00 NOTE
<https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64/geno2proteo-00check.html>
r-patched-linux-x86_64
<https://cran.r-project.org/web/checks/check_flavors.html#r-patched-linux-x86_64>
0.0.5 12.58 164.99 177.57 OK
<https://www.r-project.org/nosvn/R.check/r-patched-linux-x86_64/geno2proteo-00check.html>
r-release-linux-x86_64
<https://cran.r-project.org/web/checks/check_flavors.html#r-release-linux-x86_64>
0.0.5 OK
<https://www.r-project.org/nosvn/R.check/r-release-linux-x86_64/geno2proteo-00check.html>
r-release-macos-arm64
<https://cran.r-project.org/web/checks/check_flavors.html#r-release-macos-arm64>
0.0.5 65.00 OK
<https://www.r-project.org/nosvn/R.check/r-release-macos-arm64/geno2proteo-00check.html>
r-release-macos-x86_64
<https://cran.r-project.org/web/checks/check_flavors.html#r-release-macos-x86_64>
0.0.5 89.00 OK
<https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/geno2proteo-00check.html>
r-release-windows-x86_64
<https://cran.r-project.org/web/checks/check_flavors.html#r-release-windows-x86_64>
0.0.5 195.00 363.00 558.00 OK
<https://www.r-project.org/nosvn/R.check/r-release-windows-x86_64/geno2proteo-00check.html>
r-oldrel-macos-arm64
<https://cran.r-project.org/web/checks/check_flavors.html#r-oldrel-macos-arm64>
0.0.5 57.00 OK
<https://www.r-project.org/nosvn/R.check/r-oldrel-macos-arm64/geno2proteo-00check.html>
r-oldrel-macos-x86_64
<https://cran.r-project.org/web/checks/check_flavors.html#r-oldrel-macos-x86_64>
0.0.5 84.00 OK
<https://www.r-project.org/nosvn/R.check/r-oldrel-macos-x86_64/geno2proteo-00check.html>
r-oldrel-windows-ix86+x86_64
<https://cran.r-project.org/web/checks/check_flavors.html#r-oldrel-windows-ix86_x86_64>
0.0.5 32.00 145.00 177.00 OK
<https://www.r-project.org/nosvn/R.check/r-oldrel-windows-ix86+x86_64/geno2proteo-00check.html>
Check
Details

Version: 0.0.5
Check: Rd files
Result: NOTE
    checkRd: (-1) generatingCDSaaFile.Rd:23: Escaped LaTeX specials: \_ \_
    checkRd: (-1) generatingCDSaaFile.Rd:72: Escaped LaTeX specials: \_

Flavors: r-devel-linux-x86_64-debian-clang
<https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-clang/geno2proteo-00check.html>,
r-devel-linux-x86_64-debian-gcc
<https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-gcc/geno2proteo-00check.html>,
r-devel-linux-x86_64-fedora-clang
<https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/geno2proteo-00check.html>,
r-devel-linux-x86_64-fedora-gcc
<https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-gcc/geno2proteo-00check.html>,
r-devel-windows-x86_64
<https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64/geno2proteo-00check.html>

##########################################################################

	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Sat Jun 11 14:29:47 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Sat, 11 Jun 2022 14:29:47 +0200
Subject: [R-pkg-devel] a problem with the underscore in a R function
 document
In-Reply-To: <CAMb-knn+o+sDtLsLGX9Q7xQN6LjvEVf90DAWo_n8kgereiMbPA@mail.gmail.com>
References: <CAMb-knn+o+sDtLsLGX9Q7xQN6LjvEVf90DAWo_n8kgereiMbPA@mail.gmail.com>
Message-ID: <25252.35515.375379.168772@stat.math.ethz.ch>

>>>>> Yaoyong Li 
>>>>>     on Sat, 11 Jun 2022 12:29:25 +0100 writes:

    > Hello,

    > I just got a problem in a function document in a package I developed.The
    > file containing the document is generatingCDSaaFile.Rd. The problem is
    > related to the underscore I used in the following sentence

    > and the last part is ?\_AAseq.txt.gz?

    > I got a 'note' message when the package was checked in the CRAN:

    > checkRd: (-1) generatingCDSaaFile.Rd:72: Escaped LaTeX specials: \_

    > I don't think I saw this kind of message in the past (say six months
    > ago). 

Yes, you are right.. this is quite new.  Some of my
<pkg>/man/*.Rd  files have been affected similarly.

AFAIK there is a history behind, where the   Rd -> LaTeX
translation code was partly buggy  for quite a long time, and hence
such  `\`-escapes where necessary in *.Rd such that the produced
*.tex was LaTeX-able.

However, these Rd2latex bugs/problems have been fixed and now
almost all such \-escapes are not only unneeded but actually the
`\` become visible, hence ugly looking
==> hence the NOTE.

    > A copy of the check result in CRAN is appended below. As you can
    > see, I also got the same problem in other places in the document. I
    > have been trying to fix the problem via searching Google. I have tried
    > to replace "\_" with "\textunderscore " as some internet post
    > suggested, but this did not solve the problem.

    > So I just wonder if anyone can help me with the problem. Please let me
    > know if any more information is needed.

In all cases in my packages,  just removing the `\` (or
sometimes `\\` ?)  was perfect, so I think you can and should do
just that.

Best,
Martin


    > Best regards,

    > Yaoyong

    > #####################################################

    > CRAN Package Check Results for Package geno2proteo
    > <https://cran.r-project.org/web/packages/geno2proteo/index.html>

    > Last updated on 2022-06-11 11:52:26 CEST.
    > FlavorVersionTinstallTcheckTtotalStatusFlags
    > r-devel-linux-x86_64-debian-clang
    > <https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-debian-clang>
    > 0.0.5 17.31 170.54 187.85 NOTE
    > <https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-clang/geno2proteo-00check.html>
    > r-devel-linux-x86_64-debian-gcc
    > <https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-debian-gcc>
    > 0.0.5 12.00 130.58 142.58 NOTE
    > <https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-gcc/geno2proteo-00check.html>
    > r-devel-linux-x86_64-fedora-clang
    > <https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-fedora-clang>
    > 0.0.5 220.04 NOTE
    > <https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/geno2proteo-00check.html>
    > r-devel-linux-x86_64-fedora-gcc
    > <https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-fedora-gcc>
    > 0.0.5 229.54 NOTE
    > <https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-gcc/geno2proteo-00check.html>
    > r-devel-windows-x86_64
    > <https://cran.r-project.org/web/checks/check_flavors.html#r-devel-windows-x86_64>
    > 0.0.5 242.00 470.00 712.00 NOTE
    > <https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64/geno2proteo-00check.html>
    > r-patched-linux-x86_64
    > <https://cran.r-project.org/web/checks/check_flavors.html#r-patched-linux-x86_64>
    > 0.0.5 12.58 164.99 177.57 OK
    > <https://www.r-project.org/nosvn/R.check/r-patched-linux-x86_64/geno2proteo-00check.html>
    > r-release-linux-x86_64
    > <https://cran.r-project.org/web/checks/check_flavors.html#r-release-linux-x86_64>
    > 0.0.5 OK
    > <https://www.r-project.org/nosvn/R.check/r-release-linux-x86_64/geno2proteo-00check.html>
    > r-release-macos-arm64
    > <https://cran.r-project.org/web/checks/check_flavors.html#r-release-macos-arm64>
    > 0.0.5 65.00 OK
    > <https://www.r-project.org/nosvn/R.check/r-release-macos-arm64/geno2proteo-00check.html>
    > r-release-macos-x86_64
    > <https://cran.r-project.org/web/checks/check_flavors.html#r-release-macos-x86_64>
    > 0.0.5 89.00 OK
    > <https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/geno2proteo-00check.html>
    > r-release-windows-x86_64
    > <https://cran.r-project.org/web/checks/check_flavors.html#r-release-windows-x86_64>
    > 0.0.5 195.00 363.00 558.00 OK
    > <https://www.r-project.org/nosvn/R.check/r-release-windows-x86_64/geno2proteo-00check.html>
    > r-oldrel-macos-arm64
    > <https://cran.r-project.org/web/checks/check_flavors.html#r-oldrel-macos-arm64>
    > 0.0.5 57.00 OK
    > <https://www.r-project.org/nosvn/R.check/r-oldrel-macos-arm64/geno2proteo-00check.html>
    > r-oldrel-macos-x86_64
    > <https://cran.r-project.org/web/checks/check_flavors.html#r-oldrel-macos-x86_64>
    > 0.0.5 84.00 OK
    > <https://www.r-project.org/nosvn/R.check/r-oldrel-macos-x86_64/geno2proteo-00check.html>
    > r-oldrel-windows-ix86+x86_64
    > <https://cran.r-project.org/web/checks/check_flavors.html#r-oldrel-windows-ix86_x86_64>
    > 0.0.5 32.00 145.00 177.00 OK
    > <https://www.r-project.org/nosvn/R.check/r-oldrel-windows-ix86+x86_64/geno2proteo-00check.html>
    > Check
    > Details

    > Version: 0.0.5
    > Check: Rd files
    > Result: NOTE
    > checkRd: (-1) generatingCDSaaFile.Rd:23: Escaped LaTeX specials: \_ \_
    > checkRd: (-1) generatingCDSaaFile.Rd:72: Escaped LaTeX specials: \_

    > Flavors: r-devel-linux-x86_64-debian-clang
    > <https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-clang/geno2proteo-00check.html>,
    > r-devel-linux-x86_64-debian-gcc
    > <https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-gcc/geno2proteo-00check.html>,
    > r-devel-linux-x86_64-fedora-clang
    > <https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/geno2proteo-00check.html>,
    > r-devel-linux-x86_64-fedora-gcc
    > <https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-gcc/geno2proteo-00check.html>,
    > r-devel-windows-x86_64
    > <https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64/geno2proteo-00check.html>

    > ##########################################################################

    > [[alternative HTML version deleted]]

    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Jun 11 14:38:29 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 11 Jun 2022 08:38:29 -0400
Subject: [R-pkg-devel] a problem with the underscore in a R function
 document
In-Reply-To: <25252.35515.375379.168772@stat.math.ethz.ch>
References: <CAMb-knn+o+sDtLsLGX9Q7xQN6LjvEVf90DAWo_n8kgereiMbPA@mail.gmail.com>
 <25252.35515.375379.168772@stat.math.ethz.ch>
Message-ID: <2a26a082-75c8-1a6c-43fe-497c551918aa@gmail.com>

As Martin said, just remove the \.

The other thing I'd do is use \sQuote{_AAseq.txt.gz} instead of entering 
the quotes yourself.  Then you don't need to worry about the difference 
between plain quotes and directional quotes, R will use whichever is 
appropriate.

Duncan Murdoch

On 11/06/2022 8:29 a.m., Martin Maechler wrote:
>>>>>> Yaoyong Li
>>>>>>      on Sat, 11 Jun 2022 12:29:25 +0100 writes:
> 
>      > Hello,
> 
>      > I just got a problem in a function document in a package I developed.The
>      > file containing the document is generatingCDSaaFile.Rd. The problem is
>      > related to the underscore I used in the following sentence
> 
>      > and the last part is ?\_AAseq.txt.gz?
> 
>      > I got a 'note' message when the package was checked in the CRAN:
> 
>      > checkRd: (-1) generatingCDSaaFile.Rd:72: Escaped LaTeX specials: \_
> 
>      > I don't think I saw this kind of message in the past (say six months
>      > ago).
> 
> Yes, you are right.. this is quite new.  Some of my
> <pkg>/man/*.Rd  files have been affected similarly.
> 
> AFAIK there is a history behind, where the   Rd -> LaTeX
> translation code was partly buggy  for quite a long time, and hence
> such  `\`-escapes where necessary in *.Rd such that the produced
> *.tex was LaTeX-able.
> 
> However, these Rd2latex bugs/problems have been fixed and now
> almost all such \-escapes are not only unneeded but actually the
> `\` become visible, hence ugly looking
> ==> hence the NOTE.
> 
>      > A copy of the check result in CRAN is appended below. As you can
>      > see, I also got the same problem in other places in the document. I
>      > have been trying to fix the problem via searching Google. I have tried
>      > to replace "\_" with "\textunderscore " as some internet post
>      > suggested, but this did not solve the problem.
> 
>      > So I just wonder if anyone can help me with the problem. Please let me
>      > know if any more information is needed.
> 
> In all cases in my packages,  just removing the `\` (or
> sometimes `\\` ?)  was perfect, so I think you can and should do
> just that.
> 
> Best,
> Martin
> 
> 
>      > Best regards,
> 
>      > Yaoyong
> 
>      > #####################################################
> 
>      > CRAN Package Check Results for Package geno2proteo
>      > <https://cran.r-project.org/web/packages/geno2proteo/index.html>
> 
>      > Last updated on 2022-06-11 11:52:26 CEST.
>      > FlavorVersionTinstallTcheckTtotalStatusFlags
>      > r-devel-linux-x86_64-debian-clang
>      > <https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-debian-clang>
>      > 0.0.5 17.31 170.54 187.85 NOTE
>      > <https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-clang/geno2proteo-00check.html>
>      > r-devel-linux-x86_64-debian-gcc
>      > <https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-debian-gcc>
>      > 0.0.5 12.00 130.58 142.58 NOTE
>      > <https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-gcc/geno2proteo-00check.html>
>      > r-devel-linux-x86_64-fedora-clang
>      > <https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-fedora-clang>
>      > 0.0.5 220.04 NOTE
>      > <https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/geno2proteo-00check.html>
>      > r-devel-linux-x86_64-fedora-gcc
>      > <https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-fedora-gcc>
>      > 0.0.5 229.54 NOTE
>      > <https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-gcc/geno2proteo-00check.html>
>      > r-devel-windows-x86_64
>      > <https://cran.r-project.org/web/checks/check_flavors.html#r-devel-windows-x86_64>
>      > 0.0.5 242.00 470.00 712.00 NOTE
>      > <https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64/geno2proteo-00check.html>
>      > r-patched-linux-x86_64
>      > <https://cran.r-project.org/web/checks/check_flavors.html#r-patched-linux-x86_64>
>      > 0.0.5 12.58 164.99 177.57 OK
>      > <https://www.r-project.org/nosvn/R.check/r-patched-linux-x86_64/geno2proteo-00check.html>
>      > r-release-linux-x86_64
>      > <https://cran.r-project.org/web/checks/check_flavors.html#r-release-linux-x86_64>
>      > 0.0.5 OK
>      > <https://www.r-project.org/nosvn/R.check/r-release-linux-x86_64/geno2proteo-00check.html>
>      > r-release-macos-arm64
>      > <https://cran.r-project.org/web/checks/check_flavors.html#r-release-macos-arm64>
>      > 0.0.5 65.00 OK
>      > <https://www.r-project.org/nosvn/R.check/r-release-macos-arm64/geno2proteo-00check.html>
>      > r-release-macos-x86_64
>      > <https://cran.r-project.org/web/checks/check_flavors.html#r-release-macos-x86_64>
>      > 0.0.5 89.00 OK
>      > <https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/geno2proteo-00check.html>
>      > r-release-windows-x86_64
>      > <https://cran.r-project.org/web/checks/check_flavors.html#r-release-windows-x86_64>
>      > 0.0.5 195.00 363.00 558.00 OK
>      > <https://www.r-project.org/nosvn/R.check/r-release-windows-x86_64/geno2proteo-00check.html>
>      > r-oldrel-macos-arm64
>      > <https://cran.r-project.org/web/checks/check_flavors.html#r-oldrel-macos-arm64>
>      > 0.0.5 57.00 OK
>      > <https://www.r-project.org/nosvn/R.check/r-oldrel-macos-arm64/geno2proteo-00check.html>
>      > r-oldrel-macos-x86_64
>      > <https://cran.r-project.org/web/checks/check_flavors.html#r-oldrel-macos-x86_64>
>      > 0.0.5 84.00 OK
>      > <https://www.r-project.org/nosvn/R.check/r-oldrel-macos-x86_64/geno2proteo-00check.html>
>      > r-oldrel-windows-ix86+x86_64
>      > <https://cran.r-project.org/web/checks/check_flavors.html#r-oldrel-windows-ix86_x86_64>
>      > 0.0.5 32.00 145.00 177.00 OK
>      > <https://www.r-project.org/nosvn/R.check/r-oldrel-windows-ix86+x86_64/geno2proteo-00check.html>
>      > Check
>      > Details
> 
>      > Version: 0.0.5
>      > Check: Rd files
>      > Result: NOTE
>      > checkRd: (-1) generatingCDSaaFile.Rd:23: Escaped LaTeX specials: \_ \_
>      > checkRd: (-1) generatingCDSaaFile.Rd:72: Escaped LaTeX specials: \_
> 
>      > Flavors: r-devel-linux-x86_64-debian-clang
>      > <https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-clang/geno2proteo-00check.html>,
>      > r-devel-linux-x86_64-debian-gcc
>      > <https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-gcc/geno2proteo-00check.html>,
>      > r-devel-linux-x86_64-fedora-clang
>      > <https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/geno2proteo-00check.html>,
>      > r-devel-linux-x86_64-fedora-gcc
>      > <https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-gcc/geno2proteo-00check.html>,
>      > r-devel-windows-x86_64
>      > <https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64/geno2proteo-00check.html>
> 
>      > ##########################################################################
> 
>      > [[alternative HTML version deleted]]
> 
>      > ______________________________________________
>      > R-package-devel at r-project.org mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Jun 11 14:49:40 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 11 Jun 2022 08:49:40 -0400
Subject: [R-pkg-devel] Windows R 4.2.0 package will not load with UTF-8
 encoding
In-Reply-To: <CALE8kTFxthEET8fGoA7MdeM_-ZuJrG4D=8wT7J_C350+VJHRxQ@mail.gmail.com>
References: <CALE8kTFaQE9CvbjBHdExQ+oY9SV_r_jCN5pQ8Crqoj2K6oLp+Q@mail.gmail.com>
 <8abc1685-cb6b-78df-b3e0-b289e9f6cc8d@gmail.com>
 <CALE8kTHGY0b7E4jq75fZu73w9=Uch4ZN86sqmHzuvRym8X3gzQ@mail.gmail.com>
 <CALE8kTFxthEET8fGoA7MdeM_-ZuJrG4D=8wT7J_C350+VJHRxQ@mail.gmail.com>
Message-ID: <13df2764-9f0f-8b7d-e81e-e801ad1b8fd1@gmail.com>

On 11/06/2022 6:43 a.m., Joseph Park wrote:
> Thank you for the check of the CRAN builds.  I also checked that as a first
> step.  Perhaps there is some difference between the CRAN setups, as I have
> reproduced this on 3 Windows 10 machines with clean installs of R 4.2.0,
> and it has been reported by other users.  I also noted in the post that
> building and installing via devtools reports success (  ** testing if
> installed package can be loaded from temporary location ), however, a
> subsequent attempt to load hangs.

One possible difference is the version of Windows 10.  The UTF8 handling 
was described in the NEWS file this way:

"R uses UTF-8 as the native encoding on recent Windows systems (at least 
Windows 10 version 1903, Windows Server 2022 or Windows Server 1903). As 
a part of this change, R uses UCRT as the C runtime. UCRT should be 
installed manually on systems older than Windows 10 or Windows Server 
2016 before installing R."

Conceivably the systems where this fails don't have the new UCRT 
runtime.  I believe running Windows Update should get it.

If it doesn't, or for users on an older Windows version, this page lets 
you download it: 
https://www.microsoft.com/en-us/download/details.aspx?id=48234 .


Duncan Murdoch

> 
> On Sat, Jun 11, 2022 at 6:33 AM Joseph Park <josephpark at ieee.org> wrote:
> 
>> Apologies for the pages of minutia.  I endeavored to post reproduceable
>> example. I'm unable to show the failure since it simply hangs at the prompt
>> with CPU spinning and memory cyclically ramping and declining.  One has to
>> kill R. The posted commands show the workaround, not the failure.
>>
>> I since found that just changing the LC_COLLATE is enough to allow the
>> library to load :
>>> Sys.setlocale('LC_COLLATE','English')
>> [1] "English_United States.1252"
>>> Sys.getlocale()
>> [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
>> States.utf8;LC_MONETARY=English_United
>> States.utf8;LC_NUMERIC=C;LC_TIME=English_United States.utf8"
>>
>> Again, apologies for my naivety.
>>
>> On Sat, Jun 11, 2022 at 6:16 AM Duncan Murdoch <murdoch.duncan at gmail.com>
>> wrote:
>>
>>> On 11/06/2022 5:02 a.m., Joseph Park wrote:
>>>> Dear R package developers,
>>>>
>>>> Starting with R 4.2.0 package rEDM (
>>> https://cran.r-project.org/package=rEDM)
>>>> will not load [library( rEDM )] on Windows with the default UTF-8
>>> encoding.
>>>>
>>>> When the locale is changed from UTF-8 to non UTF-8, the package loads
>>> and
>>>> runs. One can also change the locale to non-UTF-8, load the package,
>>> detach
>>>> and unload the package, change the locale back to UTF-8, then load and
>>> run
>>>> without issue.
>>>>
>>>> Note that installation from source reports:
>>>>      ** testing if installed package can be loaded from temporary
>>> location
>>>> and completes (record below).
>>>>
>>>> This package uses Rcpp to wrap a C++ API.
>>>>
>>>> Having searched here and in general, I don't find that others
>>> experiencing
>>>> this issue.
>>>>
>>>> I have tried
>>>>     Ensure all source files are UTF-8 encoded
>>>>     Removed non-ASCII characters from all source files
>>>>     Specify non-ASCII characters with \uXXXX
>>>>     Checked vignette encoding
>>>>     Added "Encoding : UTF-8" to DESCRIPTION
>>>>
>>>> Please excuse my encoding and Windows naivety.
>>>>
>>>> Here is a demonstration changing the encoding to load the package, along
>>>> with unloading & reloading under UTF-8:
>>>> --
>>>>> sessionInfo()
>>>> R version 4.2.0 (2022-04-22 ucrt)
>>>> Platform: x86_64-w64-mingw32/x64 (64-bit)
>>>> Running under: Windows 10 x64 (build 19044)
>>>>
>>>> Matrix products: default
>>>>
>>>> locale:
>>>> [1] LC_COLLATE=English_United States.utf8  LC_CTYPE=English_United
>>>> States.utf8
>>>> [3] LC_MONETARY=English_United States.utf8 LC_NUMERIC=C
>>>>
>>>> [5] LC_TIME=English_United States.utf8
>>>>
>>>> attached base packages:
>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>
>>>> loaded via a namespace (and not attached):
>>>> [1] compiler_4.2.0
>>>>>
>>>>> Sys.setlocale('LC_ALL','English')
>>>> [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
>>>> States.1252;LC_MONETARY=English_United
>>>> States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
>>>> Warning message:
>>>> In Sys.setlocale("LC_ALL", "English") :
>>>>     using locale code page other than 65001 ("UTF-8") may cause problems
>>>>>
>>>>> sessionInfo()
>>>> R version 4.2.0 (2022-04-22 ucrt)
>>>> Platform: x86_64-w64-mingw32/x64 (64-bit)
>>>> Running under: Windows 10 x64 (build 19044)
>>>>
>>>> Matrix products: default
>>>>
>>>> locale:
>>>> [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
>>>> States.1252
>>>> [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
>>>>
>>>> [5] LC_TIME=English_United States.1252
>>>> system code page: 65001
>>>>
>>>> attached base packages:
>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>
>>>> loaded via a namespace (and not attached):
>>>> [1] compiler_4.2.0
>>>>>
>>>>> library( rEDM )
>>>>>
>>>>> sessionInfo()
>>>> R version 4.2.0 (2022-04-22 ucrt)
>>>> Platform: x86_64-w64-mingw32/x64 (64-bit)
>>>> Running under: Windows 10 x64 (build 19044)
>>>>
>>>> Matrix products: default
>>>>
>>>> locale:
>>>> [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
>>>> States.1252
>>>> [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
>>>>
>>>> [5] LC_TIME=English_United States.1252
>>>> system code page: 65001
>>>>
>>>> attached base packages:
>>>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>>>
>>>> other attached packages:
>>>> [1] rEDM_1.12.2.1.0
>>>>
>>>> loaded via a namespace (and not attached):
>>>> [1] compiler_4.2.0 Rcpp_1.0.8.3
>>>>>
>>>>
>>>> ### All package tests pass....
>>>> ### Now detach and unload, change to UTF-8, and load
>>>>
>>>>> detach( 'package:rEDM', unload = TRUE )
>>>>>
>>>>> Simplex( dataFrame = Lorenz5D, columns = 'V1', target = 'V2', lib = "1
>>>> 500", pred = "501 505", E = 5 )
>>>> Error in Simplex(dataFrame = Lorenz5D, columns = "V1", target = "V2",  :
>>>>     could not find function "Simplex"
>>>
>>> I don't see any attempt to load the package.  You attempted to use the
>>> function Simplex and it was not found.  That indicates the package is
>>> not loaded, but not why.
>>>
>>> What you should show are the messages you get when you start a clean
>>> copy of R and immediately attempt to load the package using library().
>>> It's helpful that you posted sessionInfo(); I'd include that again with
>>> the new information, in case anything is different.
>>>
>>> Duncan Murdoch
>>>
>>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jepu@to @end|ng |rom gm@||@com  Sat Jun 11 17:10:01 2022
From: jepu@to @end|ng |rom gm@||@com (James Pustejovsky)
Date: Sat, 11 Jun 2022 10:10:01 -0500
Subject: [R-pkg-devel] Examples that require Suggested packages
Message-ID: <CAFUVuJyx0-P6+wrZK1VyVQ6bD=228OC3TRuktmZSKy2buDc6pg@mail.gmail.com>

Dear package developers,

I have a package (clubSandwich) that provides methods for a range of
different models implemented in other packages (nlme::lme, lme4::lmer,
metafor::rma.mv, etc.). These other packages are listed in SUGGESTS because
one need not have all of them in order to use the methods for any given
model. I'm working on re-writing examples for the function documentation
that a) run conditional on the presence of the suggested package and b) are
legible and aesthetically attractive to read.

The problem I'm encountering is examples that include more than one line
that prints to the console. If I follow the standard approach of wrapping
the entire example in a conditional that checks for the suggested package,
then only the last line prints to the console. For example:

library(clubSandwich)
if (requireNamespace("metafor", quietly = TRUE) &&
requireNamespace("metadat", quietly = TRUE)) {
library(metafor)
data(dat.assink2016, package = "metadat")
mfor_fit <- rma.uni(yi ~ year + deltype, vi = vi, data = dat.assink2016)
mfor_fit

mfor_CR2 <- vcovCR(mfor_fit, type = "CR2", cluster = dat.assink2016$study)
mfor_CR2
}

When run interactively, only mfor_CR2 is printed in the console.
Alternately, I could wrap each chunk of the code in a separate conditional,
as in:

pkgs_available <- requireNamespace("metafor", quietly = TRUE) &&
requireNamespace("metadat", quietly = TRUE)

if (pkgs_available) {
  library(metafor)
  data(dat.assink2016, package = "metadat")
  mfor_fit <- rma.uni(yi ~ year + deltype, vi = vi, data = dat.assink2016)
  mfor_fit
}

if (pkgs_available) {
  mfor_CR2 <- vcovCR(mfor_fit, type = "CR2", cluster = dat.assink2016$study)
  mfor_CR2
}

But this is awkward and distracts from the content of the example. A
further possibility is to wrap the entire example in withAutoprint(), as in:

if (requireNamespace("metafor", quietly = TRUE) &&
requireNamespace("metadat", quietly = TRUE)) withAutoprint({
library(metafor)
data(dat.assink2016, package = "metadat")
mfor_fit <- rma.uni(yi ~ year + deltype, vi = vi, data = dat.assink2016)
mfor_fit

mfor_CR2 <- vcovCR(mfor_fit, type = "CR2", cluster = dat.assink2016$study)
mfor_CR2
})

With this approach, we can see all of the output in the console, but the
code and output are not inter-woven as they would be if run outside of the
conditional. Instead, the entire example is printed in the console, then
each line of the example is re-printed with output inter-woven. I like this
solution better than the other approaches above, but it's still not great.

Does anyone have suggestions or pointers to examples of package
documentation that handles this issue in a more elegant way? Is there any
way to check whether suggested packages are loaded at the beginning of the
example script and stop execution of the remainder if they are not
available similar to testthat::skip_if_not_installed()?

James

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Jun 11 17:37:56 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 11 Jun 2022 11:37:56 -0400
Subject: [R-pkg-devel] Examples that require Suggested packages
In-Reply-To: <CAFUVuJyx0-P6+wrZK1VyVQ6bD=228OC3TRuktmZSKy2buDc6pg@mail.gmail.com>
References: <CAFUVuJyx0-P6+wrZK1VyVQ6bD=228OC3TRuktmZSKy2buDc6pg@mail.gmail.com>
Message-ID: <a27fbd83-03bc-11c1-6199-aab1f69c95da@gmail.com>

On 11/06/2022 11:10 a.m., James Pustejovsky wrote:
> Dear package developers,
> 
> I have a package (clubSandwich) that provides methods for a range of
> different models implemented in other packages (nlme::lme, lme4::lmer,
> metafor::rma.mv, etc.). These other packages are listed in SUGGESTS because
> one need not have all of them in order to use the methods for any given
> model. I'm working on re-writing examples for the function documentation
> that a) run conditional on the presence of the suggested package and b) are
> legible and aesthetically attractive to read.
> 
> The problem I'm encountering is examples that include more than one line
> that prints to the console. If I follow the standard approach of wrapping
> the entire example in a conditional that checks for the suggested package,
> then only the last line prints to the console. For example:
> 
> library(clubSandwich)
> if (requireNamespace("metafor", quietly = TRUE) &&
> requireNamespace("metadat", quietly = TRUE)) {
> library(metafor)
> data(dat.assink2016, package = "metadat")
> mfor_fit <- rma.uni(yi ~ year + deltype, vi = vi, data = dat.assink2016)
> mfor_fit
> 
> mfor_CR2 <- vcovCR(mfor_fit, type = "CR2", cluster = dat.assink2016$study)
> mfor_CR2
> }
> 
> When run interactively, only mfor_CR2 is printed in the console.
> Alternately, I could wrap each chunk of the code in a separate conditional,
> as in:
> 
> pkgs_available <- requireNamespace("metafor", quietly = TRUE) &&
> requireNamespace("metadat", quietly = TRUE)
> 
> if (pkgs_available) {
>    library(metafor)
>    data(dat.assink2016, package = "metadat")
>    mfor_fit <- rma.uni(yi ~ year + deltype, vi = vi, data = dat.assink2016)
>    mfor_fit
> }
> 
> if (pkgs_available) {
>    mfor_CR2 <- vcovCR(mfor_fit, type = "CR2", cluster = dat.assink2016$study)
>    mfor_CR2
> }
> 
> But this is awkward and distracts from the content of the example. A
> further possibility is to wrap the entire example in withAutoprint(), as in:
> 
> if (requireNamespace("metafor", quietly = TRUE) &&
> requireNamespace("metadat", quietly = TRUE)) withAutoprint({
> library(metafor)
> data(dat.assink2016, package = "metadat")
> mfor_fit <- rma.uni(yi ~ year + deltype, vi = vi, data = dat.assink2016)
> mfor_fit
> 
> mfor_CR2 <- vcovCR(mfor_fit, type = "CR2", cluster = dat.assink2016$study)
> mfor_CR2
> })
> 
> With this approach, we can see all of the output in the console, but the
> code and output are not inter-woven as they would be if run outside of the
> conditional. Instead, the entire example is printed in the console, then
> each line of the example is re-printed with output inter-woven. I like this
> solution better than the other approaches above, but it's still not great.
> 
> Does anyone have suggestions or pointers to examples of package
> documentation that handles this issue in a more elegant way? Is there any
> way to check whether suggested packages are loaded at the beginning of the
> example script and stop execution of the remainder if they are not
> available similar to testthat::skip_if_not_installed()?

You can call print() explicitly rather than relying on auto-printing, 
but I don't think there's a way to do this elegantly.  I posted a 
suggestion to add something to Bugzilla recently (see 
https://bugs.r-project.org/show_bug.cgi?id=18352), and haven't had any 
response to it.  (It is certainly not the first time this issue has been 
raised, but I couldn't spot a previous bug/enhancement request about it.)

Duncan Murdoch


From jo@ephp@rk @end|ng |rom |eee@org  Sat Jun 11 20:19:49 2022
From: jo@ephp@rk @end|ng |rom |eee@org (Joseph Park)
Date: Sat, 11 Jun 2022 14:19:49 -0400
Subject: [R-pkg-devel] Windows R 4.2.0 package will not load with UTF-8
 encoding
In-Reply-To: <13df2764-9f0f-8b7d-e81e-e801ad1b8fd1@gmail.com>
References: <CALE8kTFaQE9CvbjBHdExQ+oY9SV_r_jCN5pQ8Crqoj2K6oLp+Q@mail.gmail.com>
 <8abc1685-cb6b-78df-b3e0-b289e9f6cc8d@gmail.com>
 <CALE8kTHGY0b7E4jq75fZu73w9=Uch4ZN86sqmHzuvRym8X3gzQ@mail.gmail.com>
 <CALE8kTFxthEET8fGoA7MdeM_-ZuJrG4D=8wT7J_C350+VJHRxQ@mail.gmail.com>
 <13df2764-9f0f-8b7d-e81e-e801ad1b8fd1@gmail.com>
Message-ID: <CALE8kTHz=V_AbFbB-4H34V9mwqeigGvS3rzngd3xea5+pU-3AA@mail.gmail.com>

It looks like Hiroaki identified the issue.

When the C++ std::regex code is removed from the underlying API, the
problem seems solved. Thank you!

The symptoms observed match those described in the tesseract issue thread.
The solution outlined in the gcc bug report seems the most prudent course:
Don't use std::regex.  I'll work on that and see if it resolves the issue.

Comment #6 seems relevant:
https://gcc.gnu.org/bugzilla/show_bug.cgi?id=98723#c6

Again: Thank you!

On Sat, Jun 11, 2022 at 8:49 AM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 11/06/2022 6:43 a.m., Joseph Park wrote:
> > Thank you for the check of the CRAN builds.  I also checked that as a
> first
> > step.  Perhaps there is some difference between the CRAN setups, as I
> have
> > reproduced this on 3 Windows 10 machines with clean installs of R 4.2.0,
> > and it has been reported by other users.  I also noted in the post that
> > building and installing via devtools reports success (  ** testing if
> > installed package can be loaded from temporary location ), however, a
> > subsequent attempt to load hangs.
>
> One possible difference is the version of Windows 10.  The UTF8 handling
> was described in the NEWS file this way:
>
> "R uses UTF-8 as the native encoding on recent Windows systems (at least
> Windows 10 version 1903, Windows Server 2022 or Windows Server 1903). As
> a part of this change, R uses UCRT as the C runtime. UCRT should be
> installed manually on systems older than Windows 10 or Windows Server
> 2016 before installing R."
>
> Conceivably the systems where this fails don't have the new UCRT
> runtime.  I believe running Windows Update should get it.
>
> If it doesn't, or for users on an older Windows version, this page lets
> you download it:
> https://www.microsoft.com/en-us/download/details.aspx?id=48234 .
>
>
> Duncan Murdoch
>
> >
> > On Sat, Jun 11, 2022 at 6:33 AM Joseph Park <josephpark at ieee.org> wrote:
> >
> >> Apologies for the pages of minutia.  I endeavored to post reproduceable
> >> example. I'm unable to show the failure since it simply hangs at the
> prompt
> >> with CPU spinning and memory cyclically ramping and declining.  One has
> to
> >> kill R. The posted commands show the workaround, not the failure.
> >>
> >> I since found that just changing the LC_COLLATE is enough to allow the
> >> library to load :
> >>> Sys.setlocale('LC_COLLATE','English')
> >> [1] "English_United States.1252"
> >>> Sys.getlocale()
> >> [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
> >> States.utf8;LC_MONETARY=English_United
> >> States.utf8;LC_NUMERIC=C;LC_TIME=English_United States.utf8"
> >>
> >> Again, apologies for my naivety.
> >>
> >> On Sat, Jun 11, 2022 at 6:16 AM Duncan Murdoch <
> murdoch.duncan at gmail.com>
> >> wrote:
> >>
> >>> On 11/06/2022 5:02 a.m., Joseph Park wrote:
> >>>> Dear R package developers,
> >>>>
> >>>> Starting with R 4.2.0 package rEDM (
> >>> https://cran.r-project.org/package=rEDM)
> >>>> will not load [library( rEDM )] on Windows with the default UTF-8
> >>> encoding.
> >>>>
> >>>> When the locale is changed from UTF-8 to non UTF-8, the package loads
> >>> and
> >>>> runs. One can also change the locale to non-UTF-8, load the package,
> >>> detach
> >>>> and unload the package, change the locale back to UTF-8, then load and
> >>> run
> >>>> without issue.
> >>>>
> >>>> Note that installation from source reports:
> >>>>      ** testing if installed package can be loaded from temporary
> >>> location
> >>>> and completes (record below).
> >>>>
> >>>> This package uses Rcpp to wrap a C++ API.
> >>>>
> >>>> Having searched here and in general, I don't find that others
> >>> experiencing
> >>>> this issue.
> >>>>
> >>>> I have tried
> >>>>     Ensure all source files are UTF-8 encoded
> >>>>     Removed non-ASCII characters from all source files
> >>>>     Specify non-ASCII characters with \uXXXX
> >>>>     Checked vignette encoding
> >>>>     Added "Encoding : UTF-8" to DESCRIPTION
> >>>>
> >>>> Please excuse my encoding and Windows naivety.
> >>>>
> >>>> Here is a demonstration changing the encoding to load the package,
> along
> >>>> with unloading & reloading under UTF-8:
> >>>> --
> >>>>> sessionInfo()
> >>>> R version 4.2.0 (2022-04-22 ucrt)
> >>>> Platform: x86_64-w64-mingw32/x64 (64-bit)
> >>>> Running under: Windows 10 x64 (build 19044)
> >>>>
> >>>> Matrix products: default
> >>>>
> >>>> locale:
> >>>> [1] LC_COLLATE=English_United States.utf8  LC_CTYPE=English_United
> >>>> States.utf8
> >>>> [3] LC_MONETARY=English_United States.utf8 LC_NUMERIC=C
> >>>>
> >>>> [5] LC_TIME=English_United States.utf8
> >>>>
> >>>> attached base packages:
> >>>> [1] stats     graphics  grDevices utils     datasets  methods   base
> >>>>
> >>>> loaded via a namespace (and not attached):
> >>>> [1] compiler_4.2.0
> >>>>>
> >>>>> Sys.setlocale('LC_ALL','English')
> >>>> [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
> >>>> States.1252;LC_MONETARY=English_United
> >>>> States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
> >>>> Warning message:
> >>>> In Sys.setlocale("LC_ALL", "English") :
> >>>>     using locale code page other than 65001 ("UTF-8") may cause
> problems
> >>>>>
> >>>>> sessionInfo()
> >>>> R version 4.2.0 (2022-04-22 ucrt)
> >>>> Platform: x86_64-w64-mingw32/x64 (64-bit)
> >>>> Running under: Windows 10 x64 (build 19044)
> >>>>
> >>>> Matrix products: default
> >>>>
> >>>> locale:
> >>>> [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
> >>>> States.1252
> >>>> [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
> >>>>
> >>>> [5] LC_TIME=English_United States.1252
> >>>> system code page: 65001
> >>>>
> >>>> attached base packages:
> >>>> [1] stats     graphics  grDevices utils     datasets  methods   base
> >>>>
> >>>> loaded via a namespace (and not attached):
> >>>> [1] compiler_4.2.0
> >>>>>
> >>>>> library( rEDM )
> >>>>>
> >>>>> sessionInfo()
> >>>> R version 4.2.0 (2022-04-22 ucrt)
> >>>> Platform: x86_64-w64-mingw32/x64 (64-bit)
> >>>> Running under: Windows 10 x64 (build 19044)
> >>>>
> >>>> Matrix products: default
> >>>>
> >>>> locale:
> >>>> [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
> >>>> States.1252
> >>>> [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
> >>>>
> >>>> [5] LC_TIME=English_United States.1252
> >>>> system code page: 65001
> >>>>
> >>>> attached base packages:
> >>>> [1] stats     graphics  grDevices utils     datasets  methods   base
> >>>>
> >>>> other attached packages:
> >>>> [1] rEDM_1.12.2.1.0
> >>>>
> >>>> loaded via a namespace (and not attached):
> >>>> [1] compiler_4.2.0 Rcpp_1.0.8.3
> >>>>>
> >>>>
> >>>> ### All package tests pass....
> >>>> ### Now detach and unload, change to UTF-8, and load
> >>>>
> >>>>> detach( 'package:rEDM', unload = TRUE )
> >>>>>
> >>>>> Simplex( dataFrame = Lorenz5D, columns = 'V1', target = 'V2', lib =
> "1
> >>>> 500", pred = "501 505", E = 5 )
> >>>> Error in Simplex(dataFrame = Lorenz5D, columns = "V1", target =
> "V2",  :
> >>>>     could not find function "Simplex"
> >>>
> >>> I don't see any attempt to load the package.  You attempted to use the
> >>> function Simplex and it was not found.  That indicates the package is
> >>> not loaded, but not why.
> >>>
> >>> What you should show are the messages you get when you start a clean
> >>> copy of R and immediately attempt to load the package using library().
> >>> It's helpful that you posted sessionInfo(); I'd include that again with
> >>> the new information, in case anything is different.
> >>>
> >>> Duncan Murdoch
> >>>
> >>>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>

	[[alternative HTML version deleted]]


From ||y@oyong85 @end|ng |rom gm@||@com  Mon Jun 13 12:57:02 2022
From: ||y@oyong85 @end|ng |rom gm@||@com (Yaoyong Li)
Date: Mon, 13 Jun 2022 11:57:02 +0100
Subject: [R-pkg-devel] a problem with the underscore in a R function
 document
In-Reply-To: <2a26a082-75c8-1a6c-43fe-497c551918aa@gmail.com>
References: <CAMb-knn+o+sDtLsLGX9Q7xQN6LjvEVf90DAWo_n8kgereiMbPA@mail.gmail.com>
 <25252.35515.375379.168772@stat.math.ethz.ch>
 <2a26a082-75c8-1a6c-43fe-497c551918aa@gmail.com>
Message-ID: <CAMb-kn=z0ctL_LdTLmtqbXKa=xSqy9kjfBvWa9yMY3s9Dw-6zw@mail.gmail.com>

Dear Martin and Duncan,

Thank you very much indeed for the help. I have adopted both your
suggestions. Using Martin's suggestion has made the Notes concerning the
underscores disappear, and hopefully using Duncan's suggestion will result
in less trouble in the future.

I really appreciate the rapid responses to my question in the list.

Best regards,
Yaoyong

On Sat, Jun 11, 2022 at 1:38 PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> As Martin said, just remove the \.
>
> The other thing I'd do is use \sQuote{_AAseq.txt.gz} instead of entering
> the quotes yourself.  Then you don't need to worry about the difference
> between plain quotes and directional quotes, R will use whichever is
> appropriate.
>
> Duncan Murdoch
>
> On 11/06/2022 8:29 a.m., Martin Maechler wrote:
> >>>>>> Yaoyong Li
> >>>>>>      on Sat, 11 Jun 2022 12:29:25 +0100 writes:
> >
> >      > Hello,
> >
> >      > I just got a problem in a function document in a package I
> developed.The
> >      > file containing the document is generatingCDSaaFile.Rd. The
> problem is
> >      > related to the underscore I used in the following sentence
> >
> >      > and the last part is ?\_AAseq.txt.gz?
> >
> >      > I got a 'note' message when the package was checked in the CRAN:
> >
> >      > checkRd: (-1) generatingCDSaaFile.Rd:72: Escaped LaTeX specials:
> \_
> >
> >      > I don't think I saw this kind of message in the past (say six
> months
> >      > ago).
> >
> > Yes, you are right.. this is quite new.  Some of my
> > <pkg>/man/*.Rd  files have been affected similarly.
> >
> > AFAIK there is a history behind, where the   Rd -> LaTeX
> > translation code was partly buggy  for quite a long time, and hence
> > such  `\`-escapes where necessary in *.Rd such that the produced
> > *.tex was LaTeX-able.
> >
> > However, these Rd2latex bugs/problems have been fixed and now
> > almost all such \-escapes are not only unneeded but actually the
> > `\` become visible, hence ugly looking
> > ==> hence the NOTE.
> >
> >      > A copy of the check result in CRAN is appended below. As you can
> >      > see, I also got the same problem in other places in the document.
> I
> >      > have been trying to fix the problem via searching Google. I have
> tried
> >      > to replace "\_" with "\textunderscore " as some internet post
> >      > suggested, but this did not solve the problem.
> >
> >      > So I just wonder if anyone can help me with the problem. Please
> let me
> >      > know if any more information is needed.
> >
> > In all cases in my packages,  just removing the `\` (or
> > sometimes `\\` ?)  was perfect, so I think you can and should do
> > just that.
> >
> > Best,
> > Martin
> >
> >
> >      > Best regards,
> >
> >      > Yaoyong
> >
> >      > #####################################################
> >
> >      > CRAN Package Check Results for Package geno2proteo
> >      > <https://cran.r-project.org/web/packages/geno2proteo/index.html>
> >
> >      > Last updated on 2022-06-11 11:52:26 CEST.
> >      > FlavorVersionTinstallTcheckTtotalStatusFlags
> >      > r-devel-linux-x86_64-debian-clang
> >      > <
> https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-debian-clang
> >
> >      > 0.0.5 17.31 170.54 187.85 NOTE
> >      > <
> https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-clang/geno2proteo-00check.html
> >
> >      > r-devel-linux-x86_64-debian-gcc
> >      > <
> https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-debian-gcc
> >
> >      > 0.0.5 12.00 130.58 142.58 NOTE
> >      > <
> https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-gcc/geno2proteo-00check.html
> >
> >      > r-devel-linux-x86_64-fedora-clang
> >      > <
> https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-fedora-clang
> >
> >      > 0.0.5 220.04 NOTE
> >      > <
> https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/geno2proteo-00check.html
> >
> >      > r-devel-linux-x86_64-fedora-gcc
> >      > <
> https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-fedora-gcc
> >
> >      > 0.0.5 229.54 NOTE
> >      > <
> https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-gcc/geno2proteo-00check.html
> >
> >      > r-devel-windows-x86_64
> >      > <
> https://cran.r-project.org/web/checks/check_flavors.html#r-devel-windows-x86_64
> >
> >      > 0.0.5 242.00 470.00 712.00 NOTE
> >      > <
> https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64/geno2proteo-00check.html
> >
> >      > r-patched-linux-x86_64
> >      > <
> https://cran.r-project.org/web/checks/check_flavors.html#r-patched-linux-x86_64
> >
> >      > 0.0.5 12.58 164.99 177.57 OK
> >      > <
> https://www.r-project.org/nosvn/R.check/r-patched-linux-x86_64/geno2proteo-00check.html
> >
> >      > r-release-linux-x86_64
> >      > <
> https://cran.r-project.org/web/checks/check_flavors.html#r-release-linux-x86_64
> >
> >      > 0.0.5 OK
> >      > <
> https://www.r-project.org/nosvn/R.check/r-release-linux-x86_64/geno2proteo-00check.html
> >
> >      > r-release-macos-arm64
> >      > <
> https://cran.r-project.org/web/checks/check_flavors.html#r-release-macos-arm64
> >
> >      > 0.0.5 65.00 OK
> >      > <
> https://www.r-project.org/nosvn/R.check/r-release-macos-arm64/geno2proteo-00check.html
> >
> >      > r-release-macos-x86_64
> >      > <
> https://cran.r-project.org/web/checks/check_flavors.html#r-release-macos-x86_64
> >
> >      > 0.0.5 89.00 OK
> >      > <
> https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/geno2proteo-00check.html
> >
> >      > r-release-windows-x86_64
> >      > <
> https://cran.r-project.org/web/checks/check_flavors.html#r-release-windows-x86_64
> >
> >      > 0.0.5 195.00 363.00 558.00 OK
> >      > <
> https://www.r-project.org/nosvn/R.check/r-release-windows-x86_64/geno2proteo-00check.html
> >
> >      > r-oldrel-macos-arm64
> >      > <
> https://cran.r-project.org/web/checks/check_flavors.html#r-oldrel-macos-arm64
> >
> >      > 0.0.5 57.00 OK
> >      > <
> https://www.r-project.org/nosvn/R.check/r-oldrel-macos-arm64/geno2proteo-00check.html
> >
> >      > r-oldrel-macos-x86_64
> >      > <
> https://cran.r-project.org/web/checks/check_flavors.html#r-oldrel-macos-x86_64
> >
> >      > 0.0.5 84.00 OK
> >      > <
> https://www.r-project.org/nosvn/R.check/r-oldrel-macos-x86_64/geno2proteo-00check.html
> >
> >      > r-oldrel-windows-ix86+x86_64
> >      > <
> https://cran.r-project.org/web/checks/check_flavors.html#r-oldrel-windows-ix86_x86_64
> >
> >      > 0.0.5 32.00 145.00 177.00 OK
> >      > <
> https://www.r-project.org/nosvn/R.check/r-oldrel-windows-ix86+x86_64/geno2proteo-00check.html
> >
> >      > Check
> >      > Details
> >
> >      > Version: 0.0.5
> >      > Check: Rd files
> >      > Result: NOTE
> >      > checkRd: (-1) generatingCDSaaFile.Rd:23: Escaped LaTeX specials:
> \_ \_
> >      > checkRd: (-1) generatingCDSaaFile.Rd:72: Escaped LaTeX specials:
> \_
> >
> >      > Flavors: r-devel-linux-x86_64-debian-clang
> >      > <
> https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-clang/geno2proteo-00check.html
> >,
> >      > r-devel-linux-x86_64-debian-gcc
> >      > <
> https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-gcc/geno2proteo-00check.html
> >,
> >      > r-devel-linux-x86_64-fedora-clang
> >      > <
> https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/geno2proteo-00check.html
> >,
> >      > r-devel-linux-x86_64-fedora-gcc
> >      > <
> https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-gcc/geno2proteo-00check.html
> >,
> >      > r-devel-windows-x86_64
> >      > <
> https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64/geno2proteo-00check.html
> >
> >
> >      >
> ##########################################################################
> >
> >      > [[alternative HTML version deleted]]
> >
> >      > ______________________________________________
> >      > R-package-devel at r-project.org mailing list
> >      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>

	[[alternative HTML version deleted]]


From t|@goo||voto @end|ng |rom gm@||@com  Mon Jun 13 13:30:12 2022
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Mon, 13 Jun 2022 08:30:12 -0300
Subject: [R-pkg-devel] a problem with the underscore in a R function
 document
In-Reply-To: <CAMb-knn+o+sDtLsLGX9Q7xQN6LjvEVf90DAWo_n8kgereiMbPA@mail.gmail.com>
References: <CAMb-knn+o+sDtLsLGX9Q7xQN6LjvEVf90DAWo_n8kgereiMbPA@mail.gmail.com>
Message-ID: <CAMyz+tUyk6SK7VBOjJXu7QkwLFfu3NHRYXQ1r8RsbOOLK=CjsQ@mail.gmail.com>

I had a similar issue when submitting metan 1.17.0 to CRAN. (Escaped LaTeX
specials: \&)
I simply removed '\' and it got passed in the tests.
Best
Olivoto

Em s?b., 11 de jun. de 2022 ?s 09:23, Yaoyong Li <liyaoyong85 at gmail.com>
escreveu:

> Hello,
>
> I just got a problem in a function document in a package I developed.The
> file containing the document is generatingCDSaaFile.Rd. The problem is
> related to the underscore I used in the following sentence
>
>       and the last part is ?\_AAseq.txt.gz?
>
> I got a 'note' message when the package was checked in the CRAN:
>
> checkRd: (-1) generatingCDSaaFile.Rd:72: Escaped LaTeX specials: \_
>
> I don't think I saw this kind of message in the past (say six months
> ago). A copy of the check result in CRAN is appended below. As you can
> see, I also got the same problem in other places in the document. I
> have been trying to fix the problem via searching Google. I have tried
> to replace "\_" with "\textunderscore " as some internet post
> suggested, but this did not solve the problem.
>
> So I just wonder if anyone can help me with the problem. Please let me
> know if any more information is needed.
>
>
> Best regards,
>
> Yaoyong
>
> #####################################################
>
> CRAN Package Check Results for Package geno2proteo
> <https://cran.r-project.org/web/packages/geno2proteo/index.html>
>
> Last updated on 2022-06-11 11:52:26 CEST.
> FlavorVersionTinstallTcheckTtotalStatusFlags
> r-devel-linux-x86_64-debian-clang
> <
> https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-debian-clang
> >
> 0.0.5 17.31 170.54 187.85 NOTE
> <
> https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-clang/geno2proteo-00check.html
> >
> r-devel-linux-x86_64-debian-gcc
> <
> https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-debian-gcc
> >
> 0.0.5 12.00 130.58 142.58 NOTE
> <
> https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-gcc/geno2proteo-00check.html
> >
> r-devel-linux-x86_64-fedora-clang
> <
> https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-fedora-clang
> >
> 0.0.5 220.04 NOTE
> <
> https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/geno2proteo-00check.html
> >
> r-devel-linux-x86_64-fedora-gcc
> <
> https://cran.r-project.org/web/checks/check_flavors.html#r-devel-linux-x86_64-fedora-gcc
> >
> 0.0.5 229.54 NOTE
> <
> https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-gcc/geno2proteo-00check.html
> >
> r-devel-windows-x86_64
> <
> https://cran.r-project.org/web/checks/check_flavors.html#r-devel-windows-x86_64
> >
> 0.0.5 242.00 470.00 712.00 NOTE
> <
> https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64/geno2proteo-00check.html
> >
> r-patched-linux-x86_64
> <
> https://cran.r-project.org/web/checks/check_flavors.html#r-patched-linux-x86_64
> >
> 0.0.5 12.58 164.99 177.57 OK
> <
> https://www.r-project.org/nosvn/R.check/r-patched-linux-x86_64/geno2proteo-00check.html
> >
> r-release-linux-x86_64
> <
> https://cran.r-project.org/web/checks/check_flavors.html#r-release-linux-x86_64
> >
> 0.0.5 OK
> <
> https://www.r-project.org/nosvn/R.check/r-release-linux-x86_64/geno2proteo-00check.html
> >
> r-release-macos-arm64
> <
> https://cran.r-project.org/web/checks/check_flavors.html#r-release-macos-arm64
> >
> 0.0.5 65.00 OK
> <
> https://www.r-project.org/nosvn/R.check/r-release-macos-arm64/geno2proteo-00check.html
> >
> r-release-macos-x86_64
> <
> https://cran.r-project.org/web/checks/check_flavors.html#r-release-macos-x86_64
> >
> 0.0.5 89.00 OK
> <
> https://www.r-project.org/nosvn/R.check/r-release-macos-x86_64/geno2proteo-00check.html
> >
> r-release-windows-x86_64
> <
> https://cran.r-project.org/web/checks/check_flavors.html#r-release-windows-x86_64
> >
> 0.0.5 195.00 363.00 558.00 OK
> <
> https://www.r-project.org/nosvn/R.check/r-release-windows-x86_64/geno2proteo-00check.html
> >
> r-oldrel-macos-arm64
> <
> https://cran.r-project.org/web/checks/check_flavors.html#r-oldrel-macos-arm64
> >
> 0.0.5 57.00 OK
> <
> https://www.r-project.org/nosvn/R.check/r-oldrel-macos-arm64/geno2proteo-00check.html
> >
> r-oldrel-macos-x86_64
> <
> https://cran.r-project.org/web/checks/check_flavors.html#r-oldrel-macos-x86_64
> >
> 0.0.5 84.00 OK
> <
> https://www.r-project.org/nosvn/R.check/r-oldrel-macos-x86_64/geno2proteo-00check.html
> >
> r-oldrel-windows-ix86+x86_64
> <
> https://cran.r-project.org/web/checks/check_flavors.html#r-oldrel-windows-ix86_x86_64
> >
> 0.0.5 32.00 145.00 177.00 OK
> <
> https://www.r-project.org/nosvn/R.check/r-oldrel-windows-ix86+x86_64/geno2proteo-00check.html
> >
> Check
> Details
>
> Version: 0.0.5
> Check: Rd files
> Result: NOTE
>     checkRd: (-1) generatingCDSaaFile.Rd:23: Escaped LaTeX specials: \_ \_
>     checkRd: (-1) generatingCDSaaFile.Rd:72: Escaped LaTeX specials: \_
>
> Flavors: r-devel-linux-x86_64-debian-clang
> <
> https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-clang/geno2proteo-00check.html
> >,
> r-devel-linux-x86_64-debian-gcc
> <
> https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-gcc/geno2proteo-00check.html
> >,
> r-devel-linux-x86_64-fedora-clang
> <
> https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/geno2proteo-00check.html
> >,
> r-devel-linux-x86_64-fedora-gcc
> <
> https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-gcc/geno2proteo-00check.html
> >,
> r-devel-windows-x86_64
> <
> https://www.r-project.org/nosvn/R.check/r-devel-windows-x86_64/geno2proteo-00check.html
> >
>
> ##########################################################################
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Mon Jun 13 18:12:40 2022
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 13 Jun 2022 11:12:40 -0500
Subject: [R-pkg-devel] Rd cross-references ... NOTE,
 Undeclared packages ... in Rd xrefs
Message-ID: <e91e1b1d-c204-2b55-7c3e-bb40cc0ccffc@effectivedefense.org>

Hello, All:


	  How do I fix "Rd cross-references ... NOTE
Undeclared packages ?EnvStats?, ?drc?, ?zoo?, ?prodlim?, ?plyr?, 
?TRAMPR?, ?raster? in Rd xrefs"?


	  This occurs with 
"https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/Ecfun-00check.html" 
and with 
"https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/Ecdat-00check.html". 
  However, this error is not raised on other platforms.  My search for 
this note produced essentially the same message for other packages but 
no advice on how to fix it.


	  These are references to other packages that I do not use in my 
packages but that some users may wish to consider.  If needed, I will 
add them to "Suggests" for the packages.  However, that seems overkill, 
because I do not use them myself.  ???


	  Thanks,
	  Spencer Graves


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jun 13 20:26:29 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 13 Jun 2022 14:26:29 -0400
Subject: [R-pkg-devel] Rd cross-references ... NOTE,
 Undeclared packages ... in Rd xrefs
In-Reply-To: <e91e1b1d-c204-2b55-7c3e-bb40cc0ccffc@effectivedefense.org>
References: <e91e1b1d-c204-2b55-7c3e-bb40cc0ccffc@effectivedefense.org>
Message-ID: <9048b187-dac1-4afb-c3ca-0f683821213f@gmail.com>

On 13/06/2022 12:12 p.m., Spencer Graves wrote:
> Hello, All:
> 
> 
> 	  How do I fix "Rd cross-references ... NOTE
> Undeclared packages ?EnvStats?, ?drc?, ?zoo?, ?prodlim?, ?plyr?,
> ?TRAMPR?, ?raster? in Rd xrefs"?
> 
> 
> 	  This occurs with
> "https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/Ecfun-00check.html"
> and with
> "https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/Ecdat-00check.html".
>    However, this error is not raised on other platforms.  My search for
> this note produced essentially the same message for other packages but
> no advice on how to fix it.
> 
> 
> 	  These are references to other packages that I do not use in my
> packages but that some users may wish to consider.  If needed, I will
> add them to "Suggests" for the packages.  However, that seems overkill,
> because I do not use them myself.  ???

Section 2.5 of Writing R Extensions says "Packages referred to by these 
?other forms? should be declared in the DESCRIPTION file, in the 
?Depends?, ?Imports?, ?Suggests? or ?Enhances? fields."  Of those 
fields, Suggests looks like the best fit.  You'd use Enhances if your 
package provides "methods for classes from these packages, or ways to 
handle objects from these packages".

Duncan Murdoch


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Mon Jun 13 20:59:24 2022
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 13 Jun 2022 13:59:24 -0500
Subject: [R-pkg-devel] Rd cross-references ... NOTE,
 Undeclared packages ... in Rd xrefs
In-Reply-To: <9048b187-dac1-4afb-c3ca-0f683821213f@gmail.com>
References: <e91e1b1d-c204-2b55-7c3e-bb40cc0ccffc@effectivedefense.org>
 <9048b187-dac1-4afb-c3ca-0f683821213f@gmail.com>
Message-ID: <5fa28826-be16-1a90-769a-c6aa010849f1@effectivedefense.org>



On 6/13/22 1:26 PM, Duncan Murdoch wrote:
> On 13/06/2022 12:12 p.m., Spencer Graves wrote:
>> Hello, All:
>>
>>
>> ????? How do I fix "Rd cross-references ... NOTE
>> Undeclared packages ?EnvStats?, ?drc?, ?zoo?, ?prodlim?, ?plyr?,
>> ?TRAMPR?, ?raster? in Rd xrefs"?
>>
>>
>> ????? This occurs with
>> "https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/Ecfun-00check.html" 
>>
>> and with
>> "https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/Ecdat-00check.html". 
>>
>> ?? However, this error is not raised on other platforms.? My search for
>> this note produced essentially the same message for other packages but
>> no advice on how to fix it.
>>
>>
>> ????? These are references to other packages that I do not use in my
>> packages but that some users may wish to consider.? If needed, I will
>> add them to "Suggests" for the packages.? However, that seems overkill,
>> because I do not use them myself.? ???
> 
> Section 2.5 of Writing R Extensions says "Packages referred to by these 
> ?other forms? should be declared in the DESCRIPTION file, in the 
> ?Depends?, ?Imports?, ?Suggests? or ?Enhances? fields."? Of those 
> fields, Suggests looks like the best fit.? You'd use Enhances if your 
> package provides "methods for classes from these packages, or ways to 
> handle objects from these packages".


Thanks.  I looked at "Writing R Extensions" but could not find anything 
that seemed to fit.  I probably should have just used "Suggests" and not 
bothered this list with this issue.  Thanks again, Spencer Graves

> 
> Duncan Murdoch


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Jun 13 21:22:04 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 13 Jun 2022 22:22:04 +0300
Subject: [R-pkg-devel] Rd cross-references ... NOTE,
 Undeclared packages ... in Rd xrefs
In-Reply-To: <5fa28826-be16-1a90-769a-c6aa010849f1@effectivedefense.org>
References: <e91e1b1d-c204-2b55-7c3e-bb40cc0ccffc@effectivedefense.org>
 <9048b187-dac1-4afb-c3ca-0f683821213f@gmail.com>
 <5fa28826-be16-1a90-769a-c6aa010849f1@effectivedefense.org>
Message-ID: <20220613222204.0859500e@Tarkus>

On Mon, 13 Jun 2022 13:59:24 -0500
Spencer Graves <spencer.graves at effectivedefense.org> wrote:

> I probably should have just used "Suggests" and not 
> bothered this list with this issue.

Why not use the \link{foo} form and let the HTML help system resolve
the link at run time? Is it considered bad form to use unqualified
links to help pages in other packages?

-- 
Best regards,
Ivan


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Jun 13 21:26:22 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 13 Jun 2022 12:26:22 -0700
Subject: [R-pkg-devel] Rd cross-references ... NOTE,
 Undeclared packages ... in Rd xrefs
In-Reply-To: <20220613222204.0859500e@Tarkus>
References: <e91e1b1d-c204-2b55-7c3e-bb40cc0ccffc@effectivedefense.org>
 <9048b187-dac1-4afb-c3ca-0f683821213f@gmail.com>
 <5fa28826-be16-1a90-769a-c6aa010849f1@effectivedefense.org>
 <20220613222204.0859500e@Tarkus>
Message-ID: <1B98A570-7794-46BF-8D48-8774A50DA506@dcn.davis.ca.us>

I think the issue with dependencies arises because if this very usage.

Given how weak the relationship is with these packages, why not just omit links at all and just mention the packages by name?

On June 13, 2022 12:22:04 PM PDT, Ivan Krylov <krylov.r00t at gmail.com> wrote:
>On Mon, 13 Jun 2022 13:59:24 -0500
>Spencer Graves <spencer.graves at effectivedefense.org> wrote:
>
>> I probably should have just used "Suggests" and not 
>> bothered this list with this issue.
>
>Why not use the \link{foo} form and let the HTML help system resolve
>the link at run time? Is it considered bad form to use unqualified
>links to help pages in other packages?
>

-- 
Sent from my phone. Please excuse my brevity.


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Mon Jun 13 21:31:56 2022
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 13 Jun 2022 14:31:56 -0500
Subject: [R-pkg-devel] Rd cross-references ... NOTE,
 Undeclared packages ... in Rd xrefs
In-Reply-To: <20220613222204.0859500e@Tarkus>
References: <e91e1b1d-c204-2b55-7c3e-bb40cc0ccffc@effectivedefense.org>
 <9048b187-dac1-4afb-c3ca-0f683821213f@gmail.com>
 <5fa28826-be16-1a90-769a-c6aa010849f1@effectivedefense.org>
 <20220613222204.0859500e@Tarkus>
Message-ID: <9bd51852-7751-94cc-e895-7f8eab24f988@effectivedefense.org>



On 6/13/22 2:22 PM, Ivan Krylov wrote:
> On Mon, 13 Jun 2022 13:59:24 -0500
> Spencer Graves <spencer.graves at effectivedefense.org> wrote:
> 
>> I probably should have just used "Suggests" and not
>> bothered this list with this issue.
> 
> Why not use the \link{foo} form and let the HTML help system resolve
> the link at run time? Is it considered bad form to use unqualified
> links to help pages in other packages?
>


	  The problem is that \link{foo} cannot distinguish between 
\link[a]{foo} and \link[b]{foo}.  Using "Suggests" sounds to me more 
like how how the R Core and CRAN teams probably think the system should 
work.


	  But Duncan or someone else may think differently.


	  Thanks, Spencer


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Jun 13 22:36:30 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 13 Jun 2022 16:36:30 -0400
Subject: [R-pkg-devel] Rd cross-references ... NOTE,
 Undeclared packages ... in Rd xrefs
In-Reply-To: <20220613222204.0859500e@Tarkus>
References: <e91e1b1d-c204-2b55-7c3e-bb40cc0ccffc@effectivedefense.org>
 <9048b187-dac1-4afb-c3ca-0f683821213f@gmail.com>
 <5fa28826-be16-1a90-769a-c6aa010849f1@effectivedefense.org>
 <20220613222204.0859500e@Tarkus>
Message-ID: <82b63395-ab56-276e-079b-209aa655bd98@gmail.com>

On 13/06/2022 3:22 p.m., Ivan Krylov wrote:
> On Mon, 13 Jun 2022 13:59:24 -0500
> Spencer Graves <spencer.graves at effectivedefense.org> wrote:
> 
>> I probably should have just used "Suggests" and not
>> bothered this list with this issue.
> 
> Why not use the \link{foo} form and let the HTML help system resolve
> the link at run time? Is it considered bad form to use unqualified
> links to help pages in other packages?

That leads to a warning like this:

     * checking Rd cross-references ... WARNING
     Missing link or links in documentation object 'foo.Rd':
       ?bar?

     See section 'Cross-references' in the 'Writing R Extensions' manual.

and if the package isn't installed, the HTML page gives

     No help found for topic bar in any package.

I think the warning is enough to stop CRAN acceptance.

Duncan Murdoch


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Mon Jun 13 22:55:12 2022
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 13 Jun 2022 15:55:12 -0500
Subject: [R-pkg-devel] NOTE: Escaped LaTeX specials: \$
Message-ID: <8e582cbe-f41b-a96e-16c0-396bde71a875@effectivedefense.org>

Hello, All:


	  CRAN checks of "Ecdat" on several platforms includes multiple "NOTEs" 
complaining "Escaped LaTeX specials" highlighting use of "\$", "\_", and 
"\&".[1]


	  What do you suggest I do with these?


	  I could replace "\$1,000" with "1,000 US dollars", and "R\&D" could 
be replaced with "R and D".


	  However, a dataset "Benefits" includes a column that is "a factor 
with levels (slack\_work,position\_abolished,seasonal\_job\_ended,other)".


	  ???
	  Thanks,
	  Spencer Graves


[1] e.g.:


https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-clang/Ecdat-00check.html


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Mon Jun 13 23:11:19 2022
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 13 Jun 2022 16:11:19 -0500
Subject: [R-pkg-devel] Rd cross-references ... NOTE,
 Undeclared packages ... in Rd xrefs
In-Reply-To: <9048b187-dac1-4afb-c3ca-0f683821213f@gmail.com>
References: <e91e1b1d-c204-2b55-7c3e-bb40cc0ccffc@effectivedefense.org>
 <9048b187-dac1-4afb-c3ca-0f683821213f@gmail.com>
Message-ID: <60bafb53-fced-b855-611e-2893150d9611@effectivedefense.org>



On 6/13/22 1:26 PM, Duncan Murdoch wrote:
> On 13/06/2022 12:12 p.m., Spencer Graves wrote:
>> Hello, All:
>>
>>
>> ????? How do I fix "Rd cross-references ... NOTE
>> Undeclared packages ?EnvStats?, ?drc?, ?zoo?, ?prodlim?, ?plyr?,
>> ?TRAMPR?, ?raster? in Rd xrefs"?
>>
>>
>> ????? This occurs with
>> "https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/Ecfun-00check.html" 
>>
>> and with
>> "https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/Ecdat-00check.html". 
>>
>> ?? However, this error is not raised on other platforms.? My search for
>> this note produced essentially the same message for other packages but
>> no advice on how to fix it.
>>
>>
>> ????? These are references to other packages that I do not use in my
>> packages but that some users may wish to consider.? If needed, I will
>> add them to "Suggests" for the packages.? However, that seems overkill,
>> because I do not use them myself.? ???
> 
> Section 2.5 of Writing R Extensions says "Packages referred to by these 
> ?other forms? should be declared in the DESCRIPTION file, in the 
> ?Depends?, ?Imports?, ?Suggests? or ?Enhances? fields."? Of those 
> fields, Suggests looks like the best fit.? You'd use Enhances if your 
> package provides "methods for classes from these packages, or ways to 
> handle objects from these packages".


	  GitHub Actions failed after I added those packages to Suggests:


https://github.com/sbgraves237/Ecfun/runs/6869516417?check_suite_focus=true


	  Suggestions?
	  Thanks,
	  Spencer

> 
> Duncan Murdoch


From henr|k@bengt@@on @end|ng |rom gm@||@com  Mon Jun 13 23:19:38 2022
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Mon, 13 Jun 2022 14:19:38 -0700
Subject: [R-pkg-devel] NOTE: Escaped LaTeX specials: \$
In-Reply-To: <8e582cbe-f41b-a96e-16c0-396bde71a875@effectivedefense.org>
References: <8e582cbe-f41b-a96e-16c0-396bde71a875@effectivedefense.org>
Message-ID: <CAFDcVCRijCTD4JFBBb00HGXyf=NoP61XawHdrauer25xNJ+qbw@mail.gmail.com>

Have you tried removing the backslash, i.e. \$ -> $ ?  I think that
works now, but didn't in the (far?) past.  You can use win-builder
devel to check it.

/Henrik

On Mon, Jun 13, 2022 at 1:55 PM Spencer Graves
<spencer.graves at effectivedefense.org> wrote:
>
> Hello, All:
>
>
>           CRAN checks of "Ecdat" on several platforms includes multiple "NOTEs"
> complaining "Escaped LaTeX specials" highlighting use of "\$", "\_", and
> "\&".[1]
>
>
>           What do you suggest I do with these?
>
>
>           I could replace "\$1,000" with "1,000 US dollars", and "R\&D" could
> be replaced with "R and D".
>
>
>           However, a dataset "Benefits" includes a column that is "a factor
> with levels (slack\_work,position\_abolished,seasonal\_job\_ended,other)".
>
>
>           ???
>           Thanks,
>           Spencer Graves
>
>
> [1] e.g.:
>
>
> https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-clang/Ecdat-00check.html
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jun 14 00:05:04 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 13 Jun 2022 18:05:04 -0400
Subject: [R-pkg-devel] Rd cross-references ... NOTE,
 Undeclared packages ... in Rd xrefs
In-Reply-To: <60bafb53-fced-b855-611e-2893150d9611@effectivedefense.org>
References: <e91e1b1d-c204-2b55-7c3e-bb40cc0ccffc@effectivedefense.org>
 <9048b187-dac1-4afb-c3ca-0f683821213f@gmail.com>
 <60bafb53-fced-b855-611e-2893150d9611@effectivedefense.org>
Message-ID: <61f61137-1a9d-eae9-17ec-8f7b59791aa5@gmail.com>

On 13/06/2022 5:11 p.m., Spencer Graves wrote:
> 
> 
> On 6/13/22 1:26 PM, Duncan Murdoch wrote:
>> On 13/06/2022 12:12 p.m., Spencer Graves wrote:
>>> Hello, All:
>>>
>>>
>>>  ????? How do I fix "Rd cross-references ... NOTE
>>> Undeclared packages ?EnvStats?, ?drc?, ?zoo?, ?prodlim?, ?plyr?,
>>> ?TRAMPR?, ?raster? in Rd xrefs"?
>>>
>>>
>>>  ????? This occurs with
>>> "https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/Ecfun-00check.html"
>>>
>>> and with
>>> "https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/Ecdat-00check.html".
>>>
>>>  ?? However, this error is not raised on other platforms.? My search for
>>> this note produced essentially the same message for other packages but
>>> no advice on how to fix it.
>>>
>>>
>>>  ????? These are references to other packages that I do not use in my
>>> packages but that some users may wish to consider.? If needed, I will
>>> add them to "Suggests" for the packages.? However, that seems overkill,
>>> because I do not use them myself.? ???
>>
>> Section 2.5 of Writing R Extensions says "Packages referred to by these
>> ?other forms? should be declared in the DESCRIPTION file, in the
>> ?Depends?, ?Imports?, ?Suggests? or ?Enhances? fields."? Of those
>> fields, Suggests looks like the best fit.? You'd use Enhances if your
>> package provides "methods for classes from these packages, or ways to
>> handle objects from these packages".
> 
> 
> 	  GitHub Actions failed after I added those packages to Suggests:
> 
> 
> https://github.com/sbgraves237/Ecfun/runs/6869516417?check_suite_focus=true

That log doesn't really give much info about what went wrong.  Maybe 
some of the packages in the Suggests list weren't available?

Duncan Murdoch


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue Jun 14 01:01:33 2022
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 13 Jun 2022 18:01:33 -0500
Subject: [R-pkg-devel] Rd cross-references ... NOTE,
 Undeclared packages ... in Rd xrefs
In-Reply-To: <61f61137-1a9d-eae9-17ec-8f7b59791aa5@gmail.com>
References: <e91e1b1d-c204-2b55-7c3e-bb40cc0ccffc@effectivedefense.org>
 <9048b187-dac1-4afb-c3ca-0f683821213f@gmail.com>
 <60bafb53-fced-b855-611e-2893150d9611@effectivedefense.org>
 <61f61137-1a9d-eae9-17ec-8f7b59791aa5@gmail.com>
Message-ID: <45ecf418-708a-8d6d-a793-0879e940b4bd@effectivedefense.org>



On 6/13/22 5:05 PM, Duncan Murdoch wrote:
> On 13/06/2022 5:11 p.m., Spencer Graves wrote:
>>
>>
>> On 6/13/22 1:26 PM, Duncan Murdoch wrote:
>>> On 13/06/2022 12:12 p.m., Spencer Graves wrote:
>>>> Hello, All:
>>>>
>>>>
>>>> ?????? How do I fix "Rd cross-references ... NOTE
>>>> Undeclared packages ?EnvStats?, ?drc?, ?zoo?, ?prodlim?, ?plyr?,
>>>> ?TRAMPR?, ?raster? in Rd xrefs"?
>>>>
>>>>
>>>> ?????? This occurs with
>>>> "https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/Ecfun-00check.html" 
>>>>
>>>>
>>>> and with
>>>> "https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/Ecdat-00check.html". 
>>>>
>>>>
>>>> ??? However, this error is not raised on other platforms.? My search 
>>>> for
>>>> this note produced essentially the same message for other packages but
>>>> no advice on how to fix it.
>>>>
>>>>
>>>> ?????? These are references to other packages that I do not use in my
>>>> packages but that some users may wish to consider.? If needed, I will
>>>> add them to "Suggests" for the packages.? However, that seems overkill,
>>>> because I do not use them myself.? ???
>>>
>>> Section 2.5 of Writing R Extensions says "Packages referred to by these
>>> ?other forms? should be declared in the DESCRIPTION file, in the
>>> ?Depends?, ?Imports?, ?Suggests? or ?Enhances? fields."? Of those
>>> fields, Suggests looks like the best fit.? You'd use Enhances if your
>>> package provides "methods for classes from these packages, or ways to
>>> handle objects from these packages".
>>
>>
>> ????? GitHub Actions failed after I added those packages to Suggests:
>>
>>
>> https://github.com/sbgraves237/Ecfun/runs/6869516417?check_suite_focus=true 
>>
> 
> That log doesn't really give much info about what went wrong.? Maybe 
> some of the packages in the Suggests list weren't available?


	  Is there a way in GitHub Action to NOT fail when a package is not 
available -- or at least to give a more useful diagnostic?


	  There probably is, but I don't know how to find the right manual to 
read nor any better place to ask for help with that than here.


	  Thanks, sg

> 
> Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jun 14 01:09:09 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 13 Jun 2022 19:09:09 -0400
Subject: [R-pkg-devel] Rd cross-references ... NOTE,
 Undeclared packages ... in Rd xrefs
In-Reply-To: <45ecf418-708a-8d6d-a793-0879e940b4bd@effectivedefense.org>
References: <e91e1b1d-c204-2b55-7c3e-bb40cc0ccffc@effectivedefense.org>
 <9048b187-dac1-4afb-c3ca-0f683821213f@gmail.com>
 <60bafb53-fced-b855-611e-2893150d9611@effectivedefense.org>
 <61f61137-1a9d-eae9-17ec-8f7b59791aa5@gmail.com>
 <45ecf418-708a-8d6d-a793-0879e940b4bd@effectivedefense.org>
Message-ID: <b3b45ba6-99a4-1632-708d-4963dbce087c@gmail.com>

On 13/06/2022 7:01 p.m., Spencer Graves wrote:
> 
> 
> On 6/13/22 5:05 PM, Duncan Murdoch wrote:
>> On 13/06/2022 5:11 p.m., Spencer Graves wrote:
>>>
>>>
>>> On 6/13/22 1:26 PM, Duncan Murdoch wrote:
>>>> On 13/06/2022 12:12 p.m., Spencer Graves wrote:
>>>>> Hello, All:
>>>>>
>>>>>
>>>>>  ?????? How do I fix "Rd cross-references ... NOTE
>>>>> Undeclared packages ?EnvStats?, ?drc?, ?zoo?, ?prodlim?, ?plyr?,
>>>>> ?TRAMPR?, ?raster? in Rd xrefs"?
>>>>>
>>>>>
>>>>>  ?????? This occurs with
>>>>> "https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/Ecfun-00check.html"
>>>>>
>>>>>
>>>>> and with
>>>>> "https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/Ecdat-00check.html".
>>>>>
>>>>>
>>>>>  ??? However, this error is not raised on other platforms.? My search
>>>>> for
>>>>> this note produced essentially the same message for other packages but
>>>>> no advice on how to fix it.
>>>>>
>>>>>
>>>>>  ?????? These are references to other packages that I do not use in my
>>>>> packages but that some users may wish to consider.? If needed, I will
>>>>> add them to "Suggests" for the packages.? However, that seems overkill,
>>>>> because I do not use them myself.? ???
>>>>
>>>> Section 2.5 of Writing R Extensions says "Packages referred to by these
>>>> ?other forms? should be declared in the DESCRIPTION file, in the
>>>> ?Depends?, ?Imports?, ?Suggests? or ?Enhances? fields."? Of those
>>>> fields, Suggests looks like the best fit.? You'd use Enhances if your
>>>> package provides "methods for classes from these packages, or ways to
>>>> handle objects from these packages".
>>>
>>>
>>>  ????? GitHub Actions failed after I added those packages to Suggests:
>>>
>>>
>>> https://github.com/sbgraves237/Ecfun/runs/6869516417?check_suite_focus=true
>>>
>>
>> That log doesn't really give much info about what went wrong.? Maybe
>> some of the packages in the Suggests list weren't available?
> 
> 
> 	  Is there a way in GitHub Action to NOT fail when a package is not
> available -- or at least to give a more useful diagnostic?
> 
> 
> 	  There probably is, but I don't know how to find the right manual to
> read nor any better place to ask for help with that than here.

Your DESCRIPTION file has a blank line after the list of Suggests 
packages, and that caused dev_package_deps() to die with the error you saw.

I think the blank line is illegal in a DESCRIPTION file:  in the DCF 
format, that separates blocks, and everything is supposed to be in one 
block.  But remotes::dev_package_deps() could perhaps give a more 
informative message, as R CMD INSTALL does.

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jun 14 01:24:40 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 13 Jun 2022 19:24:40 -0400
Subject: [R-pkg-devel] Rd cross-references ... NOTE,
 Undeclared packages ... in Rd xrefs
In-Reply-To: <45ecf418-708a-8d6d-a793-0879e940b4bd@effectivedefense.org>
References: <e91e1b1d-c204-2b55-7c3e-bb40cc0ccffc@effectivedefense.org>
 <9048b187-dac1-4afb-c3ca-0f683821213f@gmail.com>
 <60bafb53-fced-b855-611e-2893150d9611@effectivedefense.org>
 <61f61137-1a9d-eae9-17ec-8f7b59791aa5@gmail.com>
 <45ecf418-708a-8d6d-a793-0879e940b4bd@effectivedefense.org>
Message-ID: <1ef711a2-7511-d0b4-c24e-467588fa1d5d@gmail.com>

On 13/06/2022 7:01 p.m., Spencer Graves wrote:
[ lots deleted ]
> 
> 	  Is there a way in GitHub Action to NOT fail when a package is not
> available -- or at least to give a more useful diagnostic?
> 

I don't know the answer to that, but in this case, I'm pretty sure 
Github Actions couldn't be more helpful, because the error message was 
coming from R in these lines in your Github script:

           install.packages('remotes')
           saveRDS(remotes::dev_package_deps(dependencies = TRUE), 
".github/depends.Rds", version = 2)
           writeLines(sprintf("R-%i.%i", getRversion()$major, 
getRversion()$minor), ".github/R-version")

I have the same lines in my script, so I suspect you copied these from 
another package, as I did.

To diagnose that kind of error, just start a clean R session, set the 
working directory to your package directory, and try to execute them. 
You'll see the same error message as your Github action got.  Then you 
can debug that the way you debug any other R error message:

- Break it up into separate pieces, and discover it happens in 
remotes::dev_package_deps(dependencies = TRUE)

- Run debug(remotes::dev_package_deps), and run just that one command, 
tracing through until you can isolate the issue.

> 
> 	  There probably is, but I don't know how to find the right manual to
> read nor any better place to ask for help with that than here.

Duncan Murdoch


