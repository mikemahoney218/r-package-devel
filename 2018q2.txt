From DOgle at northland.edu  Wed Apr  4 15:41:03 2018
From: DOgle at northland.edu (Derek Ogle)
Date: Wed, 4 Apr 2018 13:41:03 +0000
Subject: [R-pkg-devel] CRAN Pre-Test Problems -- FSA Package
Message-ID: <5C759AAB3680854DA1CFD152DD5CCE5A013D228D31@NC-MAIL2010.northland.edu>

I recently submitted a new version (v0.8.19) of my FSA package to CRAN. It was rejected at the pre-test level because of problems with automatic checks. There were three links for me to see what these problems were.

The first link from CRAN was to a win-builder check log (https://win-builder.r-project.org/incoming_pretest/FSA_0.8.19_20180403_023758/Windows/00check.log) that contained the single following warning:

* checking Rd cross-references ... WARNING
package 'DescTools' exists but was not installed under R >= 2.10.0 so xrefs cannot be checked

This is related to a cross-reference link in my documentation. Should I just remove this link (this link did not cause problems when I had submitted my package previously)?

The second link from CRAN was to my current (v0.8.17) package on CRAN (https://cran.r-project.org/web/checks/check_results_FSA.html). This shows several warnings related to a function in a dependent package (car) being deprecated. The new version of my package (the one I am trying to submit to CRAN) is meant to address these issues. As far as I can tell, through checks on my local machine, on win-builder, appVeyor, and Travis-Ci, these issues have been addressed. I don't know how to address this pre-test issue, except to submit the new version of my package. [Note there is another warning on this page related to the RMark package. That warning has existed for many versions of my package and has been ignored by CRAN in the past.]

The third link from CRAN (https://win-builder.r-project.org/incoming_pretest/FSA_0.8.19_20180403_023758/Windows/) was to the same set of win-builder results which only shows the same warning as the first link above.

I did reply to the CRAN submission with this same set of questions but have not yet received a reply. [This is not a critique, just pointing out what I have done.]

Any suggestions for how to handle these issues to satisfy the pre-test (and other tests) of CRAN?

Thank you for any advice.

	[[alternative HTML version deleted]]


From steve.the.bayesian at gmail.com  Wed Apr  4 23:15:16 2018
From: steve.the.bayesian at gmail.com (Steven Scott)
Date: Wed, 4 Apr 2018 14:15:16 -0700
Subject: [R-pkg-devel] Fwd: [CRAN-pretest-archived] CRAN submission Boom 0.8
In-Reply-To: <01d3cc52$Blat.v3.2.16$92c75782$5ad8132a@mail.statistik.tu-dortmund.de>
References: <20180404172901.96B4B1641AC@xmpalantir.wu.ac.at>
 <01d3cc52$Blat.v3.2.16$92c75782$5ad8132a@mail.statistik.tu-dortmund.de>
Message-ID: <CAJqTW47rYJy93WybfV0WVLgiwMqLJKEni6oH6tDSrQsmVwXGbA@mail.gmail.com>

I've been trying to update the Boom package to the next version, and it
hasn't been going so well.  Hoping someone can help me figure out what next
steps I should take.

I got the attached mail from auto-check.  From what I can tell the new
version of Boom (0.8.0) has two issues.  Some long path names, and a large
install size.  Both are pre-existing issues shared with previous Boom
versions.  Nothing can be done about the long path names (but they have
never caused a problem in the past), and the large install size has to do
with the -g flag passed by R CMD INSTALL, which I don't control.  In past
versions of Boom we've let both these issues go.

The auto-check script also flags an ERROR which seems to be related to
version 0.7.0 (the current version).  Clicking through to the compiler
errors (
https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-debian-clang/Boom-00install.html)
gives:

* installing to library
?/home/hornik/tmp/R.check/r-devel-clang/Work/build/Packages?
* installing *source* package ?Boom? ...
** package ?Boom? successfully unpacked and MD5 sums checked
** libs
make[1]: Entering directory '/tmp/Rtmpnqufqi/R.INSTALL4d314a0b9495/Boom/src'
clang++-6.0  -I"/home/hornik/tmp/R.check/r-devel-clang/Work/build/include"
-DNDEBUG -I. -I../inst/include -IBmath -Imath/cephes
-DNO_BOOST_THREADS -DNO_BOOST_FILESYSTEM -DADD_ -DRLANGUAGE
-I"/home/hornik/tmp/R.check/r-devel-clang/Work/build/Packages/BH/include"
-I/usr/local/include   -fpic  -g -O3 -Wall -pedantic -mtune=native -c
Models/Bart/PoissonBartModel.cpp -o Models/Bart/PoissonBartModel.o
In file included from Models/Bart/PoissonBartModel.cpp:19:
In file included from ../inst/include/Models/Bart/PoissonBartModel.hpp:24:
In file included from ../inst/include/Models/Bart/Bart.hpp:22:
In file included from
/usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/c++/8.0.1/set:60:
In file included from
/usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/c++/8.0.1/bits/stl_tree.h:65:
/usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/c++/8.0.1/bits/stl_function.h:545:9:
error: redefinition of '__not_overloaded<_Tp, _Up>'
        struct __not_overloaded<_Tp, _Up> : __not_overloaded2<_Tp, _Up> { };
               ^~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/c++/8.0.1/bits/stl_function.h:531:9:
note: previous definition is here
        struct __not_overloaded<_Tp, _Up, __void_t<
               ^
/usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/c++/8.0.1/bits/stl_function.h:608:9:
error: redefinition of '__not_overloaded<_Tp, _Up>'
        struct __not_overloaded<_Tp, _Up> : __not_overloaded2<_Tp, _Up> { };
               ^~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/c++/8.0.1/bits/stl_function.h:594:9:
note: previous definition is here
        struct __not_overloaded<_Tp, _Up, __void_t<
               ^
/usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/c++/8.0.1/bits/stl_function.h:671:9:
error: redefinition of '__not_overloaded<_Tp, _Up>'
        struct __not_overloaded<_Tp, _Up> : __not_overloaded2<_Tp, _Up> { };
               ^~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/c++/8.0.1/bits/stl_function.h:657:9:
note: previous definition is here
        struct __not_overloaded<_Tp, _Up, __void_t<
               ^
/usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/c++/8.0.1/bits/stl_function.h:734:9:
error: redefinition of '__not_overloaded<_Tp, _Up>'
        struct __not_overloaded<_Tp, _Up> : __not_overloaded2<_Tp, _Up> { };
               ^~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/bin/../lib/gcc/x86_64-linux-gnu/8.0.1/../../../../include/c++/8.0.1/bits/stl_function.h:720:9:
note: previous definition is here
        struct __not_overloaded<_Tp, _Up, __void_t<
               ^
4 errors generated.
/home/hornik/tmp/R.check/r-devel-clang/Work/build/etc/Makeconf:166:
recipe for target 'Models/Bart/PoissonBartModel.o' failed
make[1]: *** [Models/Bart/PoissonBartModel.o] Error 1
make[1]: Leaving directory '/tmp/Rtmpnqufqi/R.INSTALL4d314a0b9495/Boom/src'
ERROR: compilation failed for package ?Boom?
* removing ?/home/hornik/tmp/R.check/r-devel-clang/Work/build/Packages/Boom?

These appear to be caused by an ill formed std::set or std::function in the
STL implementation of the host machine.  If I'm reading that wrong someone
please let me know.

Thanks!
S

---------- Forwarded message ----------
From: <Uwe.Ligges at r-project.org>
Date: Wed, Apr 4, 2018 at 1:21 PM
Subject: [CRAN-pretest-archived] CRAN submission Boom 0.8
To: steve.the.bayesian at gmail.com
Cc: CRAN-submissions at r-project.org


Dear maintainer,

package Boom_0.8.tar.gz does not pass the incoming checks automatically,
please see the following pre-tests:
Windows: <https://win-builder.r-project.org/incoming_pretest/
Boom_0.8_20180404_192911/Windows/00check.log>
Status: 4 NOTEs
Debian: <https://win-builder.r-project.org/incoming_pretest/
Boom_0.8_20180404_192911/Debian/00check.log>
Status: 3 NOTEs

Last released version's CRAN status: ERROR: 2, NOTE: 9
See: <https://CRAN.R-project.org/web/checks/check_results_Boom.html>


CRAN Web: <https://cran.r-project.org/package=Boom>

Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on
the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please
reply-all to this message and explain.

More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/
Boom_0.8_20180404_192911/>
The files will be removed after roughly 7 days.

Strong rev. depends: BoomSpikeSlab bsts CausalImpact cbar

Best regards,
CRAN teams' auto-check service

	[[alternative HTML version deleted]]


From edd at debian.org  Wed Apr  4 23:53:08 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 4 Apr 2018 16:53:08 -0500
Subject: [R-pkg-devel] 
 Fwd: [CRAN-pretest-archived] CRAN submission Boom 0.8
In-Reply-To: <CAJqTW47rYJy93WybfV0WVLgiwMqLJKEni6oH6tDSrQsmVwXGbA@mail.gmail.com>
References: <20180404172901.96B4B1641AC@xmpalantir.wu.ac.at>
 <01d3cc52$Blat.v3.2.16$92c75782$5ad8132a@mail.statistik.tu-dortmund.de>
 <CAJqTW47rYJy93WybfV0WVLgiwMqLJKEni6oH6tDSrQsmVwXGbA@mail.gmail.com>
Message-ID: <23237.18756.671152.652922@rob.eddelbuettel.com>


On 4 April 2018 at 14:15, Steven Scott wrote:
| These appear to be caused by an ill formed std::set or std::function in the
| STL implementation of the host machine.  If I'm reading that wrong someone
| please let me know.

AFAICT it needs C++11 explicitly set which that machine (with a new clang-6.0
installation) did not provide by default.  This has bitten a few other
compilations lately as well but should get sorted out in due course.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From steve.the.bayesian at gmail.com  Thu Apr  5 00:01:08 2018
From: steve.the.bayesian at gmail.com (Steven Scott)
Date: Wed, 4 Apr 2018 15:01:08 -0700
Subject: [R-pkg-devel] 
 Fwd: [CRAN-pretest-archived] CRAN submission Boom 0.8
In-Reply-To: <23237.18756.671152.652922@rob.eddelbuettel.com>
References: <20180404172901.96B4B1641AC@xmpalantir.wu.ac.at>
 <01d3cc52$Blat.v3.2.16$92c75782$5ad8132a@mail.statistik.tu-dortmund.de>
 <CAJqTW47rYJy93WybfV0WVLgiwMqLJKEni6oH6tDSrQsmVwXGbA@mail.gmail.com>
 <23237.18756.671152.652922@rob.eddelbuettel.com>
Message-ID: <CAJqTW44DBMjmeDMYzPUbpLMCaEGe-n0LTDPwUWuvtpnSaYNw6A@mail.gmail.com>

Thanks Dirk.  IMO the package is in good shape otherwise.  I'll wait hear
from the CRAN maintainers.
S

On Wed, Apr 4, 2018 at 2:53 PM, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 4 April 2018 at 14:15, Steven Scott wrote:
> | These appear to be caused by an ill formed std::set or std::function in
> the
> | STL implementation of the host machine.  If I'm reading that wrong
> someone
> | please let me know.
>
> AFAICT it needs C++11 explicitly set which that machine (with a new
> clang-6.0
> installation) did not provide by default.  This has bitten a few other
> compilations lately as well but should get sorted out in due course.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From Andrzej.Dudek at ue.wroc.pl  Thu Apr  5 21:13:58 2018
From: Andrzej.Dudek at ue.wroc.pl (Dudek Andrzej)
Date: Thu, 5 Apr 2018 19:13:58 +0000
Subject: [R-pkg-devel] Cannot submit package due to misspell note
In-Reply-To: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
References: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
Message-ID: <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>

Hello,

I've stuck in submitting new version of package(mdsOpt), due to the following note,

Possibly mis-spelled words in DESCRIPTION:
  De (13:2)
  Diday (14:48)
  Groenen (12:13, 14:2)
  Leeuw (13:5)
  Mair (12:30, 13:16)
  Walesiak (15:2, 16:2)
  Winsberg (14:19)

which cause the rejection at submission process.

The description file / section looks like this:

Description: Selecting the optimal multidimensional scaling (MDS) procedure for metric data via metric MDS (ratio, interval, mspline) and nonmetric MDS (ordinal). Selecting the optimal multidimensional scaling (MDS) procedure for interval-valued symbolic data via metric MDS (ratio, interval, mspline). Selecting the optimal MDS procedure for statistical data referring to the evaluation of tourist attractiveness of Lower Silesian counties.
(Borg, I., Groenen, P.J.F., Mair, P. (2013) <doi:10.1007/978-3-642-31848-1>,
 De Leeuw, J., Mair, P. (2015) <doi:10.1002/9781118445112.stat06268.pub2>,
 Groenen, P.J.F., Winsberg, S., Rodriguez, O., Diday, E. (2006) <doi:10.1016/j.csda.2006.04.003>,
Walesiak, M. (2016) <doi:10.15611/ekt.2016.2.01>,
 Walesiak, M. (2017) <doi:10.15611/ekt.2017.3.01>).

I've tried to check  the documentation but found nothing about including references in description files (which AFAIK is now required).

Thank in advance for any help!

Andrzej

-----------------------------------------------------------------
Andrzej Dudek
Professor of Wroclaw University of Economics
Department of Econometrics and Computer Science,
Nowowiejska 3, 58-506 Jelenia G?ra, Poland
mail: andrzej.dudek at ue.wroc.pl<mailto:andrzej.dudek at ue.wroc.pl>



	[[alternative HTML version deleted]]


From bbolker at gmail.com  Thu Apr  5 21:51:16 2018
From: bbolker at gmail.com (Ben Bolker)
Date: Thu, 5 Apr 2018 15:51:16 -0400
Subject: [R-pkg-devel] Cannot submit package due to misspell note
In-Reply-To: <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
References: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
Message-ID: <CABghstSLQ44dOa2a-O-u5S+mt4nbLxeLbJ_V83cxtOdqXNoUvQ@mail.gmail.com>

Can you clarify what "which cause the rejection at submission process"
means, i.e. have the CRAN maintainers already rejected your package
because of this note, or are you afraid they will?

Looking at https://cran.r-project.org/doc/manuals/R-exts.html#The-DESCRIPTION-file
, I agree that there's not much useful guidance. The entry on the
Description field is:

> The mandatory ?Description? field should give a comprehensive description of what the package does. One can use several (complete) sentences, but only one paragraph. It should be intelligible to all the intended readership (e.g. for a CRAN package to all CRAN users). It is good practice not to start with the package name, ?This package? or similar. As with the ?Title? field, double quotes should be used for quotations (including titles of books and articles), and single quotes for non-English usage, including names of other packages and external software. This field should also be used for explaining the package name if necessary. URLs should be enclosed in angle brackets, e.g. ?<https://www.r-project.org>?: see also Specifying URLs.

  You could protect the names in single quotation marks, but that seems awkward.

  My best guess (I don't know if the CRAN maintainers would go for
this or not) would be to add a References: field, put your references
therein, and refer to that field within your Description: field (from
TFM, "There is no restriction on the use of other fields not mentioned
here ...")  (I don't know if additional fields are spell-checked or
not ...)



On Thu, Apr 5, 2018 at 3:13 PM, Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl> wrote:
> Hello,
>
> I've stuck in submitting new version of package(mdsOpt), due to the following note,
>
> Possibly mis-spelled words in DESCRIPTION:
>   De (13:2)
>   Diday (14:48)
>   Groenen (12:13, 14:2)
>   Leeuw (13:5)
>   Mair (12:30, 13:16)
>   Walesiak (15:2, 16:2)
>   Winsberg (14:19)
>
> which cause the rejection at submission process.
>
> The description file / section looks like this:
>
> Description: Selecting the optimal multidimensional scaling (MDS) procedure for metric data via metric MDS (ratio, interval, mspline) and nonmetric MDS (ordinal). Selecting the optimal multidimensional scaling (MDS) procedure for interval-valued symbolic data via metric MDS (ratio, interval, mspline). Selecting the optimal MDS procedure for statistical data referring to the evaluation of tourist attractiveness of Lower Silesian counties.
> (Borg, I., Groenen, P.J.F., Mair, P. (2013) <doi:10.1007/978-3-642-31848-1>,
>  De Leeuw, J., Mair, P. (2015) <doi:10.1002/9781118445112.stat06268.pub2>,
>  Groenen, P.J.F., Winsberg, S., Rodriguez, O., Diday, E. (2006) <doi:10.1016/j.csda.2006.04.003>,
> Walesiak, M. (2016) <doi:10.15611/ekt.2016.2.01>,
>  Walesiak, M. (2017) <doi:10.15611/ekt.2017.3.01>).
>
> I've tried to check  the documentation but found nothing about including references in description files (which AFAIK is now required).
>
> Thank in advance for any help!
>
> Andrzej
>
> -----------------------------------------------------------------
> Andrzej Dudek
> Professor of Wroclaw University of Economics
> Department of Econometrics and Computer Science,
> Nowowiejska 3, 58-506 Jelenia G?ra, Poland
> mail: andrzej.dudek at ue.wroc.pl<mailto:andrzej.dudek at ue.wroc.pl>
>
>
>
>         [[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From davidhughjones at gmail.com  Thu Apr  5 22:05:26 2018
From: davidhughjones at gmail.com (David Hugh-Jones)
Date: Thu, 05 Apr 2018 20:05:26 +0000
Subject: [R-pkg-devel] Cannot submit package due to misspell note
In-Reply-To: <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
References: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
Message-ID: <CAARY7kioOPjcWL_b2DWjBMKXW3i89HZYhcxqXcbQaH4CYfviJw@mail.gmail.com>

 Why not remove the references and instead put them in the package citation
info?

On Thu, 5 Apr 2018 at 20:35, Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl> wrote:

> Hello,
>
> I've stuck in submitting new version of package(mdsOpt), due to the
> following note,
>
> Possibly mis-spelled words in DESCRIPTION:
>   De (13:2)
>   Diday (14:48)
>   Groenen (12:13, 14:2)
>   Leeuw (13:5)
>   Mair (12:30, 13:16)
>   Walesiak (15:2, 16:2)
>   Winsberg (14:19)
>
> which cause the rejection at submission process.
>
> The description file / section looks like this:
>
> Description: Selecting the optimal multidimensional scaling (MDS)
> procedure for metric data via metric MDS (ratio, interval, mspline) and
> nonmetric MDS (ordinal). Selecting the optimal multidimensional scaling
> (MDS) procedure for interval-valued symbolic data via metric MDS (ratio,
> interval, mspline). Selecting the optimal MDS procedure for statistical
> data referring to the evaluation of tourist attractiveness of Lower
> Silesian counties.
> (Borg, I., Groenen, P.J.F., Mair, P. (2013)
> <doi:10.1007/978-3-642-31848-1>,
>  De Leeuw, J., Mair, P. (2015) <doi:10.1002/9781118445112.stat06268.pub2>,
>  Groenen, P.J.F., Winsberg, S., Rodriguez, O., Diday, E. (2006)
> <doi:10.1016/j.csda.2006.04.003>,
> Walesiak, M. (2016) <doi:10.15611/ekt.2016.2.01>,
>  Walesiak, M. (2017) <doi:10.15611/ekt.2017.3.01>).
>
> I've tried to check  the documentation but found nothing about including
> references in description files (which AFAIK is now required).
>
> Thank in advance for any help!
>
> Andrzej
>
> -----------------------------------------------------------------
> Andrzej Dudek
> Professor of Wroclaw University of Economics
> Department of Econometrics and Computer Science,
> Nowowiejska 3, 58-506 Jelenia G?ra, Poland
> mail: andrzej.dudek at ue.wroc.pl<mailto:andrzej.dudek at ue.wroc.pl>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
-- 
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From roy.mendelssohn at noaa.gov  Thu Apr  5 22:15:14 2018
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Thu, 5 Apr 2018 13:15:14 -0700
Subject: [R-pkg-devel] Cannot submit package due to misspell note
In-Reply-To: <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
References: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
Message-ID: <CE7F12DF-0EB7-47A7-8F84-7F5133B10186@noaa.gov>

I may be wrong,  but I have "mis-spelled" words in my submissions.  When you submit to CRAN,  I am pretty certain the spell-check is automated by a spell-checker,  adn if those words aren't recognized they will throw the note.

Try creating a cran-comments.md file, and put into that everything you have done to check your submission,  and  every note that you receive.  If those words correctly spelled correctly,  put that in the file.  See http://r-pkgs.had.co.nz/release.html  for more information on making a good submission.  

Even with that,  likely on the automatic check you will get the same response, respond to that that  the information is contained in the cran-comments.md file,  and then give the maintainers a few days to respond.  I have found the amount of time till I get a response is highly variable,  as I am certain the maintainers are very busy,  mainly just saying don't panic if you don't hear back right away.

HTH,

-Roy


> On Apr 5, 2018, at 12:13 PM, Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl> wrote:
> 
> Hello,
> 
> I've stuck in submitting new version of package(mdsOpt), due to the following note,
> 
> Possibly mis-spelled words in DESCRIPTION:
>  De (13:2)
>  Diday (14:48)
>  Groenen (12:13, 14:2)
>  Leeuw (13:5)
>  Mair (12:30, 13:16)
>  Walesiak (15:2, 16:2)
>  Winsberg (14:19)
> 
> which cause the rejection at submission process.
> 
> The description file / section looks like this:
> 
> Description: Selecting the optimal multidimensional scaling (MDS) procedure for metric data via metric MDS (ratio, interval, mspline) and nonmetric MDS (ordinal). Selecting the optimal multidimensional scaling (MDS) procedure for interval-valued symbolic data via metric MDS (ratio, interval, mspline). Selecting the optimal MDS procedure for statistical data referring to the evaluation of tourist attractiveness of Lower Silesian counties.
> (Borg, I., Groenen, P.J.F., Mair, P. (2013) <doi:10.1007/978-3-642-31848-1>,
> De Leeuw, J., Mair, P. (2015) <doi:10.1002/9781118445112.stat06268.pub2>,
> Groenen, P.J.F., Winsberg, S., Rodriguez, O., Diday, E. (2006) <doi:10.1016/j.csda.2006.04.003>,
> Walesiak, M. (2016) <doi:10.15611/ekt.2016.2.01>,
> Walesiak, M. (2017) <doi:10.15611/ekt.2017.3.01>).
> 
> I've tried to check  the documentation but found nothing about including references in description files (which AFAIK is now required).
> 
> Thank in advance for any help!
> 
> Andrzej
> 
> -----------------------------------------------------------------
> Andrzej Dudek
> Professor of Wroclaw University of Economics
> Department of Econometrics and Computer Science,
> Nowowiejska 3, 58-506 Jelenia G?ra, Poland
> mail: andrzej.dudek at ue.wroc.pl<mailto:andrzej.dudek at ue.wroc.pl>
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From Andrzej.Dudek at ue.wroc.pl  Thu Apr  5 22:17:13 2018
From: Andrzej.Dudek at ue.wroc.pl (Dudek Andrzej)
Date: Thu, 5 Apr 2018 20:17:13 +0000
Subject: [R-pkg-devel] Cannot submit package due to misspell note
In-Reply-To: <CABghstSLQ44dOa2a-O-u5S+mt4nbLxeLbJ_V83cxtOdqXNoUvQ@mail.gmail.com>
References: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <CABghstSLQ44dOa2a-O-u5S+mt4nbLxeLbJ_V83cxtOdqXNoUvQ@mail.gmail.com>
Message-ID: <DB7P192MB033144DD9D4B3425D25C695BC6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>

CRAN maintainers rejected the package two times already due to this note 

But for previous version I've been asked to add the references in description field:

> Package Information:
> Package: mdsOpt
> Version: 0.1-4
> Title: Searching for Optimal MDS Procedure for Metric Data
> Author(s): Marek Walesiak <marek.walesiak at ue.wroc.pl>  Andrzej Dudek
>    <andrzej.dudek at ue.wroc.pl>
> Maintainer: Andrzej Dudek <andrzej.dudek at ue.wroc.pl>
> Depends: smacof, clusterSim
> Suggests: testthat
> Description: Searching for optimal multidimensional scaling procedure for
>    metric data.

Thanks, can you please extend your description text.

Can you provide some references in the form authors (year) <doi:...> or <arXiv:...> (no space after 'doi:' and 'arXiv:')?

Best,
Swetlana Herbrandt

--------------------

So at this point is some kind of vicious circle for me :-)  Maybe adding quotation mark is best idea (?)

Best ,- 

Andrzej

-----Original Message-----
From: Ben Bolker [mailto:bbolker at gmail.com] 
Sent: Thursday, April 5, 2018 9:51 PM
To: Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl>
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Cannot submit package due to misspell note

Can you clarify what "which cause the rejection at submission process"
means, i.e. have the CRAN maintainers already rejected your package because of this note, or are you afraid they will?

Looking at https://cran.r-project.org/doc/manuals/R-exts.html#The-DESCRIPTION-file
, I agree that there's not much useful guidance. The entry on the Description field is:

> The mandatory ?Description? field should give a comprehensive description of what the package does. One can use several (complete) sentences, but only one paragraph. It should be intelligible to all the intended readership (e.g. for a CRAN package to all CRAN users). It is good practice not to start with the package name, ?This package? or similar. As with the ?Title? field, double quotes should be used for quotations (including titles of books and articles), and single quotes for non-English usage, including names of other packages and external software. This field should also be used for explaining the package name if necessary. URLs should be enclosed in angle brackets, e.g. ?<https://www.r-project.org>?: see also Specifying URLs.

  You could protect the names in single quotation marks, but that seems awkward.

  My best guess (I don't know if the CRAN maintainers would go for this or not) would be to add a References: field, put your references therein, and refer to that field within your Description: field (from TFM, "There is no restriction on the use of other fields not mentioned here ...")  (I don't know if additional fields are spell-checked or not ...)



On Thu, Apr 5, 2018 at 3:13 PM, Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl> wrote:
> Hello,
>
> I've stuck in submitting new version of package(mdsOpt), due to the 
> following note,
>
> Possibly mis-spelled words in DESCRIPTION:
>   De (13:2)
>   Diday (14:48)
>   Groenen (12:13, 14:2)
>   Leeuw (13:5)
>   Mair (12:30, 13:16)
>   Walesiak (15:2, 16:2)
>   Winsberg (14:19)
>
> which cause the rejection at submission process.
>
> The description file / section looks like this:
>
> Description: Selecting the optimal multidimensional scaling (MDS) procedure for metric data via metric MDS (ratio, interval, mspline) and nonmetric MDS (ordinal). Selecting the optimal multidimensional scaling (MDS) procedure for interval-valued symbolic data via metric MDS (ratio, interval, mspline). Selecting the optimal MDS procedure for statistical data referring to the evaluation of tourist attractiveness of Lower Silesian counties.
> (Borg, I., Groenen, P.J.F., Mair, P. (2013) 
> <doi:10.1007/978-3-642-31848-1>,  De Leeuw, J., Mair, P. (2015) 
> <doi:10.1002/9781118445112.stat06268.pub2>,
>  Groenen, P.J.F., Winsberg, S., Rodriguez, O., Diday, E. (2006) 
> <doi:10.1016/j.csda.2006.04.003>, Walesiak, M. (2016) 
> <doi:10.15611/ekt.2016.2.01>,  Walesiak, M. (2017) <doi:10.15611/ekt.2017.3.01>).
>
> I've tried to check  the documentation but found nothing about including references in description files (which AFAIK is now required).
>
> Thank in advance for any help!
>
> Andrzej
>
> -----------------------------------------------------------------
> Andrzej Dudek
> Professor of Wroclaw University of Economics Department of 
> Econometrics and Computer Science, Nowowiejska 3, 58-506 Jelenia G?ra, 
> Poland
> mail: andrzej.dudek at ue.wroc.pl<mailto:andrzej.dudek at ue.wroc.pl>
>
>
>
>         [[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

From roy.mendelssohn at noaa.gov  Thu Apr  5 22:22:45 2018
From: roy.mendelssohn at noaa.gov (Roy Mendelssohn - NOAA Federal)
Date: Thu, 5 Apr 2018 13:22:45 -0700
Subject: [R-pkg-devel] Cannot submit package due to misspell note
In-Reply-To: <DB7P192MB033144DD9D4B3425D25C695BC6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
References: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <CABghstSLQ44dOa2a-O-u5S+mt4nbLxeLbJ_V83cxtOdqXNoUvQ@mail.gmail.com>
 <DB7P192MB033144DD9D4B3425D25C695BC6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
Message-ID: <CFA8D05E-583B-46FF-B2EF-A7996061A42F@noaa.gov>

I don't think your DESCRIPTION file is properly formed.  See http://r-pkgs.had.co.nz/description.html for more information.  Author fields in particular are done in a particular way.

HTH,

-Roy




> On Apr 5, 2018, at 1:17 PM, Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl> wrote:
> 
> CRAN maintainers rejected the package two times already due to this note 
> 
> But for previous version I've been asked to add the references in description field:
> 
>> Package Information:
>> Package: mdsOpt
>> Version: 0.1-4
>> Title: Searching for Optimal MDS Procedure for Metric Data
>> Author(s): Marek Walesiak <marek.walesiak at ue.wroc.pl>  Andrzej Dudek
>>   <andrzej.dudek at ue.wroc.pl>
>> Maintainer: Andrzej Dudek <andrzej.dudek at ue.wroc.pl>
>> Depends: smacof, clusterSim
>> Suggests: testthat
>> Description: Searching for optimal multidimensional scaling procedure for
>>   metric data.
> 
> Thanks, can you please extend your description text.
> 
> Can you provide some references in the form authors (year) <doi:...> or <arXiv:...> (no space after 'doi:' and 'arXiv:')?
> 
> Best,
> Swetlana Herbrandt
> 
> --------------------
> 
> So at this point is some kind of vicious circle for me :-)  Maybe adding quotation mark is best idea (?)
> 
> Best ,- 
> 
> Andrzej
> 
> -----Original Message-----
> From: Ben Bolker [mailto:bbolker at gmail.com] 
> Sent: Thursday, April 5, 2018 9:51 PM
> To: Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl>
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Cannot submit package due to misspell note
> 
> Can you clarify what "which cause the rejection at submission process"
> means, i.e. have the CRAN maintainers already rejected your package because of this note, or are you afraid they will?
> 
> Looking at https://cran.r-project.org/doc/manuals/R-exts.html#The-DESCRIPTION-file
> , I agree that there's not much useful guidance. The entry on the Description field is:
> 
>> The mandatory ?Description? field should give a comprehensive description of what the package does. One can use several (complete) sentences, but only one paragraph. It should be intelligible to all the intended readership (e.g. for a CRAN package to all CRAN users). It is good practice not to start with the package name, ?This package? or similar. As with the ?Title? field, double quotes should be used for quotations (including titles of books and articles), and single quotes for non-English usage, including names of other packages and external software. This field should also be used for explaining the package name if necessary. URLs should be enclosed in angle brackets, e.g. ?<https://www.r-project.org>?: see also Specifying URLs.
> 
>  You could protect the names in single quotation marks, but that seems awkward.
> 
>  My best guess (I don't know if the CRAN maintainers would go for this or not) would be to add a References: field, put your references therein, and refer to that field within your Description: field (from TFM, "There is no restriction on the use of other fields not mentioned here ...")  (I don't know if additional fields are spell-checked or not ...)
> 
> 
> 
> On Thu, Apr 5, 2018 at 3:13 PM, Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl> wrote:
>> Hello,
>> 
>> I've stuck in submitting new version of package(mdsOpt), due to the 
>> following note,
>> 
>> Possibly mis-spelled words in DESCRIPTION:
>>  De (13:2)
>>  Diday (14:48)
>>  Groenen (12:13, 14:2)
>>  Leeuw (13:5)
>>  Mair (12:30, 13:16)
>>  Walesiak (15:2, 16:2)
>>  Winsberg (14:19)
>> 
>> which cause the rejection at submission process.
>> 
>> The description file / section looks like this:
>> 
>> Description: Selecting the optimal multidimensional scaling (MDS) procedure for metric data via metric MDS (ratio, interval, mspline) and nonmetric MDS (ordinal). Selecting the optimal multidimensional scaling (MDS) procedure for interval-valued symbolic data via metric MDS (ratio, interval, mspline). Selecting the optimal MDS procedure for statistical data referring to the evaluation of tourist attractiveness of Lower Silesian counties.
>> (Borg, I., Groenen, P.J.F., Mair, P. (2013) 
>> <doi:10.1007/978-3-642-31848-1>,  De Leeuw, J., Mair, P. (2015) 
>> <doi:10.1002/9781118445112.stat06268.pub2>,
>> Groenen, P.J.F., Winsberg, S., Rodriguez, O., Diday, E. (2006) 
>> <doi:10.1016/j.csda.2006.04.003>, Walesiak, M. (2016) 
>> <doi:10.15611/ekt.2016.2.01>,  Walesiak, M. (2017) <doi:10.15611/ekt.2017.3.01>).
>> 
>> I've tried to check  the documentation but found nothing about including references in description files (which AFAIK is now required).
>> 
>> Thank in advance for any help!
>> 
>> Andrzej
>> 
>> -----------------------------------------------------------------
>> Andrzej Dudek
>> Professor of Wroclaw University of Economics Department of 
>> Econometrics and Computer Science, Nowowiejska 3, 58-506 Jelenia G?ra, 
>> Poland
>> mail: andrzej.dudek at ue.wroc.pl<mailto:andrzej.dudek at ue.wroc.pl>
>> 
>> 
>> 
>>        [[alternative HTML version deleted]]
>> 
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list 
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From Andrzej.Dudek at ue.wroc.pl  Thu Apr  5 22:27:15 2018
From: Andrzej.Dudek at ue.wroc.pl (Dudek Andrzej)
Date: Thu, 5 Apr 2018 20:27:15 +0000
Subject: [R-pkg-devel] Cannot submit package due to misspell note
In-Reply-To: <CAARY7kioOPjcWL_b2DWjBMKXW3i89HZYhcxqXcbQaH4CYfviJw@mail.gmail.com>
References: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <CAARY7kioOPjcWL_b2DWjBMKXW3i89HZYhcxqXcbQaH4CYfviJw@mail.gmail.com>
Message-ID: <DB7P192MB03311E395384AE0990CF9EE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>

IMHO citation info is something completely different. I?ve been asked to add references in description field by CRAN maintainers


> Package Information:

> Package: mdsOpt

> Version: 0.1-4

> Title: Searching for Optimal MDS Procedure for Metric Data

> Author(s): Marek Walesiak <marek.walesiak at ue.wroc.pl>  Andrzej Dudek

>    <andrzej.dudek at ue.wroc.pl>

> Maintainer: Andrzej Dudek <andrzej.dudek at ue.wroc.pl>

> Depends: smacof, clusterSim

> Suggests: testthat

> Description: Searching for optimal multidimensional scaling procedure for

>    metric data.



Thanks, can you please extend your description text.



Can you provide some references in the form authors (year) <doi:...> or <arXiv:...> (no space after 'doi:' and 'arXiv:')?



Best,

Swetlana Herbrandt



So it is not about citation info for the package but references to methods implemented ?.

Thanks anyway for your help.

Andrzej


From: David Hugh-Jones [mailto:davidhughjones at gmail.com]
Sent: Thursday, April 5, 2018 10:05 PM
To: Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl>
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Cannot submit package due to misspell note

 Why not remove the references and instead put them in the package citation info?

On Thu, 5 Apr 2018 at 20:35, Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl<mailto:Andrzej.Dudek at ue.wroc.pl>> wrote:
Hello,

I've stuck in submitting new version of package(mdsOpt), due to the following note,

Possibly mis-spelled words in DESCRIPTION:
  De (13:2)
  Diday (14:48)
  Groenen (12:13, 14:2)
  Leeuw (13:5)
  Mair (12:30, 13:16)
  Walesiak (15:2, 16:2)
  Winsberg (14:19)

which cause the rejection at submission process.

The description file / section looks like this:

Description: Selecting the optimal multidimensional scaling (MDS) procedure for metric data via metric MDS (ratio, interval, mspline) and nonmetric MDS (ordinal). Selecting the optimal multidimensional scaling (MDS) procedure for interval-valued symbolic data via metric MDS (ratio, interval, mspline). Selecting the optimal MDS procedure for statistical data referring to the evaluation of tourist attractiveness of Lower Silesian counties.
(Borg, I., Groenen, P.J.F., Mair, P. (2013) <doi:10.1007/978-3-642-31848-1>,
 De Leeuw, J., Mair, P. (2015) <doi:10.1002/9781118445112.stat06268.pub2>,
 Groenen, P.J.F., Winsberg, S., Rodriguez, O., Diday, E. (2006) <doi:10.1016/j.csda.2006.04.003>,
Walesiak, M. (2016) <doi:10.15611/ekt.2016.2.01>,
 Walesiak, M. (2017) <doi:10.15611/ekt.2017.3.01>).

I've tried to check  the documentation but found nothing about including references in description files (which AFAIK is now required).

Thank in advance for any help!

Andrzej

-----------------------------------------------------------------
Andrzej Dudek
Professor of Wroclaw University of Economics
Department of Econometrics and Computer Science,
Nowowiejska 3, 58-506 Jelenia G?ra, Poland
mail: andrzej.dudek at ue.wroc.pl<mailto:andrzej.dudek at ue.wroc.pl><mailto:andrzej.dudek at ue.wroc.pl<mailto:andrzej.dudek at ue.wroc.pl>>



        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel
--
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Thu Apr  5 22:30:57 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 5 Apr 2018 16:30:57 -0400
Subject: [R-pkg-devel] Cannot submit package due to misspell note
In-Reply-To: <DB7P192MB033144DD9D4B3425D25C695BC6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
References: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <CABghstSLQ44dOa2a-O-u5S+mt4nbLxeLbJ_V83cxtOdqXNoUvQ@mail.gmail.com>
 <DB7P192MB033144DD9D4B3425D25C695BC6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
Message-ID: <1ac04243-dc1b-a8b5-86eb-9b3ffa598276@gmail.com>

On 05/04/2018 4:17 PM, Dudek Andrzej wrote:
> CRAN maintainers rejected the package two times already due to this note
> 
> But for previous version I've been asked to add the references in description field:
> 
>> Package Information:
>> Package: mdsOpt
>> Version: 0.1-4
>> Title: Searching for Optimal MDS Procedure for Metric Data
>> Author(s): Marek Walesiak <marek.walesiak at ue.wroc.pl>  Andrzej Dudek
>>     <andrzej.dudek at ue.wroc.pl>
>> Maintainer: Andrzej Dudek <andrzej.dudek at ue.wroc.pl>
>> Depends: smacof, clusterSim
>> Suggests: testthat
>> Description: Searching for optimal multidimensional scaling procedure for
>>     metric data.
> 
> Thanks, can you please extend your description text.
> 
> Can you provide some references in the form authors (year) <doi:...> or <arXiv:...> (no space after 'doi:' and 'arXiv:')?
> 
> Best,
> Swetlana Herbrandt
> 
> --------------------
> 
> So at this point is some kind of vicious circle for me :-)  Maybe adding quotation mark is best idea (?)
> 

You didn't post the message for the current submission.  In my 
experience, they won't reject a package due to false positives from the 
spell checker, so I would guess that you have misinterpreted their 
rejection message.

When I was checking incoming packages, I would generally ask submitters 
to respect the requirement to use complete sentences; none of your 
"sentences", e.g.

Selecting the optimal multidimensional scaling (MDS) procedure for 
metric data via metric MDS (ratio, interval, mspline) and nonmetric MDS 
(ordinal).

and your reference list

(Borg, I., Groenen, P.J.F., Mair, P. (2013) <doi:10.1007/978-3-642-31848-1>,
  De Leeuw, J., Mair, P. (2015) <doi:10.1002/9781118445112.stat06268.pub2>,
  Groenen, P.J.F., Winsberg, S., Rodriguez, O., Diday, E. (2006) 
<doi:10.1016/j.csda.2006.04.003>,
Walesiak, M. (2016) <doi:10.15611/ekt.2016.2.01>,
  Walesiak, M. (2017) <doi:10.15611/ekt.2017.3.01>).

are grammatically complete sentences, so I probably would have asked you 
to reword things.

Duncan Murdoch


From georgi.boshnakov at manchester.ac.uk  Thu Apr  5 22:40:15 2018
From: georgi.boshnakov at manchester.ac.uk (Georgi Boshnakov)
Date: Thu, 5 Apr 2018 20:40:15 +0000
Subject: [R-pkg-devel] Cannot submit package due to misspell note
In-Reply-To: <DB7P192MB03311E395384AE0990CF9EE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
References: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <CAARY7kioOPjcWL_b2DWjBMKXW3i89HZYhcxqXcbQaH4CYfviJw@mail.gmail.com>,
 <DB7P192MB03311E395384AE0990CF9EE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F655E7F@MBXP01.ds.man.ac.uk>


My understanding is that CRAN asks for references in the description field when they feel that it would not be very clear what the package is about. 
As to the possibly mis-spelled words, jus mention in the submission that you think they are ok, surely there is no need to put author names inquires.

--
Dr Georgi Boshnakov               tel: (+44) (0)161 306 3684
School of Mathematics             fax: (+44) (0)161 306 3669
Alan Turing Building 1.125
The University of Manchester      email: Georgi.Boshnakov at manchester.ac.uk
Oxford Road
Manchester M13 9PL
UK


________________________________________
From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf of Dudek Andrzej [Andrzej.Dudek at ue.wroc.pl]
Sent: 05 April 2018 21:27
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Cannot submit package due to misspell note

IMHO citation info is something completely different. I?ve been asked to add references in description field by CRAN maintainers


> Package Information:

> Package: mdsOpt

> Version: 0.1-4

> Title: Searching for Optimal MDS Procedure for Metric Data

> Author(s): Marek Walesiak <marek.walesiak at ue.wroc.pl>  Andrzej Dudek

>    <andrzej.dudek at ue.wroc.pl>

> Maintainer: Andrzej Dudek <andrzej.dudek at ue.wroc.pl>

> Depends: smacof, clusterSim

> Suggests: testthat

> Description: Searching for optimal multidimensional scaling procedure for

>    metric data.



Thanks, can you please extend your description text.



Can you provide some references in the form authors (year) <doi:...> or <arXiv:...> (no space after 'doi:' and 'arXiv:')?



Best,

Swetlana Herbrandt



So it is not about citation info for the package but references to methods implemented ?.

Thanks anyway for your help.

Andrzej


From: David Hugh-Jones [mailto:davidhughjones at gmail.com]
Sent: Thursday, April 5, 2018 10:05 PM
To: Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl>
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Cannot submit package due to misspell note

 Why not remove the references and instead put them in the package citation info?

On Thu, 5 Apr 2018 at 20:35, Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl<mailto:Andrzej.Dudek at ue.wroc.pl>> wrote:
Hello,

I've stuck in submitting new version of package(mdsOpt), due to the following note,

Possibly mis-spelled words in DESCRIPTION:
  De (13:2)
  Diday (14:48)
  Groenen (12:13, 14:2)
  Leeuw (13:5)
  Mair (12:30, 13:16)
  Walesiak (15:2, 16:2)
  Winsberg (14:19)

which cause the rejection at submission process.

The description file / section looks like this:

Description: Selecting the optimal multidimensional scaling (MDS) procedure for metric data via metric MDS (ratio, interval, mspline) and nonmetric MDS (ordinal). Selecting the optimal multidimensional scaling (MDS) procedure for interval-valued symbolic data via metric MDS (ratio, interval, mspline). Selecting the optimal MDS procedure for statistical data referring to the evaluation of tourist attractiveness of Lower Silesian counties.
(Borg, I., Groenen, P.J.F., Mair, P. (2013) <doi:10.1007/978-3-642-31848-1>,
 De Leeuw, J., Mair, P. (2015) <doi:10.1002/9781118445112.stat06268.pub2>,
 Groenen, P.J.F., Winsberg, S., Rodriguez, O., Diday, E. (2006) <doi:10.1016/j.csda.2006.04.003>,
Walesiak, M. (2016) <doi:10.15611/ekt.2016.2.01>,
 Walesiak, M. (2017) <doi:10.15611/ekt.2017.3.01>).

I've tried to check  the documentation but found nothing about including references in description files (which AFAIK is now required).

Thank in advance for any help!

Andrzej

-----------------------------------------------------------------
Andrzej Dudek
Professor of Wroclaw University of Economics
Department of Econometrics and Computer Science,
Nowowiejska 3, 58-506 Jelenia G?ra, Poland
mail: andrzej.dudek at ue.wroc.pl<mailto:andrzej.dudek at ue.wroc.pl><mailto:andrzej.dudek at ue.wroc.pl<mailto:andrzej.dudek at ue.wroc.pl>>



        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel
--
Sent from Gmail Mobile

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

From bbolker at gmail.com  Thu Apr  5 22:41:15 2018
From: bbolker at gmail.com (Ben Bolker)
Date: Thu, 5 Apr 2018 16:41:15 -0400
Subject: [R-pkg-devel] Cannot submit package due to misspell note
In-Reply-To: <1ac04243-dc1b-a8b5-86eb-9b3ffa598276@gmail.com>
References: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <CABghstSLQ44dOa2a-O-u5S+mt4nbLxeLbJ_V83cxtOdqXNoUvQ@mail.gmail.com>
 <DB7P192MB033144DD9D4B3425D25C695BC6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <1ac04243-dc1b-a8b5-86eb-9b3ffa598276@gmail.com>
Message-ID: <CABghstQB18H9=1PuXKAugr2ZtqRc57ykyxMPTx5QoHinHqtjfg@mail.gmail.com>

I think it was reasonable to post this to the list for discussion --
it's good not to bother the CRAN maintainers unnecessarily. At this
point it might be more productive to e-mail them (CRAN maintainers)
for clarification:  e.g., explain your interpretation of what they're
asking you to do and give them some options about how you might
propose to meet their requirements. Otherwise you're asking a bunch of
strangers on the internet to guess what the CRAN maintainers want you
to do ...

On Thu, Apr 5, 2018 at 4:30 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> On 05/04/2018 4:17 PM, Dudek Andrzej wrote:
>>
>> CRAN maintainers rejected the package two times already due to this note
>>
>> But for previous version I've been asked to add the references in
>> description field:
>>
>>> Package Information:
>>> Package: mdsOpt
>>> Version: 0.1-4
>>> Title: Searching for Optimal MDS Procedure for Metric Data
>>> Author(s): Marek Walesiak <marek.walesiak at ue.wroc.pl>  Andrzej Dudek
>>>     <andrzej.dudek at ue.wroc.pl>
>>> Maintainer: Andrzej Dudek <andrzej.dudek at ue.wroc.pl>
>>> Depends: smacof, clusterSim
>>> Suggests: testthat
>>> Description: Searching for optimal multidimensional scaling procedure for
>>>     metric data.
>>
>>
>> Thanks, can you please extend your description text.
>>
>> Can you provide some references in the form authors (year) <doi:...> or
>> <arXiv:...> (no space after 'doi:' and 'arXiv:')?
>>
>> Best,
>> Swetlana Herbrandt
>>
>> --------------------
>>
>> So at this point is some kind of vicious circle for me :-)  Maybe adding
>> quotation mark is best idea (?)
>>
>
> You didn't post the message for the current submission.  In my experience,
> they won't reject a package due to false positives from the spell checker,
> so I would guess that you have misinterpreted their rejection message.
>
> When I was checking incoming packages, I would generally ask submitters to
> respect the requirement to use complete sentences; none of your "sentences",
> e.g.
>
> Selecting the optimal multidimensional scaling (MDS) procedure for metric
> data via metric MDS (ratio, interval, mspline) and nonmetric MDS (ordinal).
>
> and your reference list
>
> (Borg, I., Groenen, P.J.F., Mair, P. (2013) <doi:10.1007/978-3-642-31848-1>,
>  De Leeuw, J., Mair, P. (2015) <doi:10.1002/9781118445112.stat06268.pub2>,
>  Groenen, P.J.F., Winsberg, S., Rodriguez, O., Diday, E. (2006)
> <doi:10.1016/j.csda.2006.04.003>,
> Walesiak, M. (2016) <doi:10.15611/ekt.2016.2.01>,
>  Walesiak, M. (2017) <doi:10.15611/ekt.2017.3.01>).
>
> are grammatically complete sentences, so I probably would have asked you to
> reword things.
>
> Duncan Murdoch
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch.duncan at gmail.com  Thu Apr  5 22:47:35 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 5 Apr 2018 16:47:35 -0400
Subject: [R-pkg-devel] Cannot submit package due to misspell note
In-Reply-To: <CABghstQB18H9=1PuXKAugr2ZtqRc57ykyxMPTx5QoHinHqtjfg@mail.gmail.com>
References: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <CABghstSLQ44dOa2a-O-u5S+mt4nbLxeLbJ_V83cxtOdqXNoUvQ@mail.gmail.com>
 <DB7P192MB033144DD9D4B3425D25C695BC6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <1ac04243-dc1b-a8b5-86eb-9b3ffa598276@gmail.com>
 <CABghstQB18H9=1PuXKAugr2ZtqRc57ykyxMPTx5QoHinHqtjfg@mail.gmail.com>
Message-ID: <6e503f1b-733e-af97-17dd-860aaab7fb52@gmail.com>

On 05/04/2018 4:41 PM, Ben Bolker wrote:
> I think it was reasonable to post this to the list for discussion --
> it's good not to bother the CRAN maintainers unnecessarily. At this
> point it might be more productive to e-mail them (CRAN maintainers)
> for clarification:  e.g., explain your interpretation of what they're
> asking you to do and give them some options about how you might
> propose to meet their requirements. Otherwise you're asking a bunch of
> strangers on the internet to guess what the CRAN maintainers want you
> to do ...
> 

... without showing us what they asked you to do.

Duncan Murdoch

> On Thu, Apr 5, 2018 at 4:30 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>> On 05/04/2018 4:17 PM, Dudek Andrzej wrote:
>>>
>>> CRAN maintainers rejected the package two times already due to this note
>>>
>>> But for previous version I've been asked to add the references in
>>> description field:
>>>
>>>> Package Information:
>>>> Package: mdsOpt
>>>> Version: 0.1-4
>>>> Title: Searching for Optimal MDS Procedure for Metric Data
>>>> Author(s): Marek Walesiak <marek.walesiak at ue.wroc.pl>  Andrzej Dudek
>>>>      <andrzej.dudek at ue.wroc.pl>
>>>> Maintainer: Andrzej Dudek <andrzej.dudek at ue.wroc.pl>
>>>> Depends: smacof, clusterSim
>>>> Suggests: testthat
>>>> Description: Searching for optimal multidimensional scaling procedure for
>>>>      metric data.
>>>
>>>
>>> Thanks, can you please extend your description text.
>>>
>>> Can you provide some references in the form authors (year) <doi:...> or
>>> <arXiv:...> (no space after 'doi:' and 'arXiv:')?
>>>
>>> Best,
>>> Swetlana Herbrandt
>>>
>>> --------------------
>>>
>>> So at this point is some kind of vicious circle for me :-)  Maybe adding
>>> quotation mark is best idea (?)
>>>
>>
>> You didn't post the message for the current submission.  In my experience,
>> they won't reject a package due to false positives from the spell checker,
>> so I would guess that you have misinterpreted their rejection message.
>>
>> When I was checking incoming packages, I would generally ask submitters to
>> respect the requirement to use complete sentences; none of your "sentences",
>> e.g.
>>
>> Selecting the optimal multidimensional scaling (MDS) procedure for metric
>> data via metric MDS (ratio, interval, mspline) and nonmetric MDS (ordinal).
>>
>> and your reference list
>>
>> (Borg, I., Groenen, P.J.F., Mair, P. (2013) <doi:10.1007/978-3-642-31848-1>,
>>   De Leeuw, J., Mair, P. (2015) <doi:10.1002/9781118445112.stat06268.pub2>,
>>   Groenen, P.J.F., Winsberg, S., Rodriguez, O., Diday, E. (2006)
>> <doi:10.1016/j.csda.2006.04.003>,
>> Walesiak, M. (2016) <doi:10.15611/ekt.2016.2.01>,
>>   Walesiak, M. (2017) <doi:10.15611/ekt.2017.3.01>).
>>
>> are grammatically complete sentences, so I probably would have asked you to
>> reword things.
>>
>> Duncan Murdoch
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From Andrzej.Dudek at ue.wroc.pl  Fri Apr  6 08:12:43 2018
From: Andrzej.Dudek at ue.wroc.pl (Dudek Andrzej)
Date: Fri, 6 Apr 2018 06:12:43 +0000
Subject: [R-pkg-devel] Cannot submit package due to misspell note
In-Reply-To: <6e503f1b-733e-af97-17dd-860aaab7fb52@gmail.com>
References: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <CABghstSLQ44dOa2a-O-u5S+mt4nbLxeLbJ_V83cxtOdqXNoUvQ@mail.gmail.com>
 <DB7P192MB033144DD9D4B3425D25C695BC6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <1ac04243-dc1b-a8b5-86eb-9b3ffa598276@gmail.com>
 <CABghstQB18H9=1PuXKAugr2ZtqRc57ykyxMPTx5QoHinHqtjfg@mail.gmail.com>
 <6e503f1b-733e-af97-17dd-860aaab7fb52@gmail.com>
Message-ID: <DB7P192MB0331C4BD96E30309F58D62DEC6BA0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>

Ok, my fault sorry:

This is the original message for current submission from prof. Ligges  

-----------------------------------------------------------------------------------------------------------------------------------

Dear maintainer,
 
package mdsOpt_0.3-1.tar.gz does not pass the incoming checks automatically, please see the pre-test at:
<https://win-builder.r-project.org/incoming_pretest/mdsOpt_0.3-1_20180404_090906/Windows/00check.log>
Status: 1 NOTE
 
Current CRAN status: ERROR: 1, OK: 11
See: <https://CRAN.R-project.org/web/checks/check_results_mdsOpt.html>
 
Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
 
More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/mdsOpt_0.3-1_20180404_090906/>
The files will be removed after roughly 7 days.
 
 
Best regards,
CRAN teams' auto-check service

-----------------------------------------------------------------------------------------------------------------------------------

And following the first link:


* using log directory 'd:/RCompile/CRANincoming/R-devel/mdsOpt.Rcheck'
* using R version 3.5.0 alpha (2018-03-30 r74499)
* using platform: x86_64-w64-mingw32 (64-bit)
* using session charset: ISO8859-1
* checking for file 'mdsOpt/DESCRIPTION' ... OK
* this is package 'mdsOpt' version '0.3-1'
* package encoding: UTF-8
* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Andrzej Dudek <andrzej.dudek at ue.wroc.pl>'

Possibly mis-spelled words in DESCRIPTION:
  De (13:2)
  Diday (14:47)
  Groenen (12:13, 14:2)
  Leeuw (13:5)
  Mair (12:30, 13:16)
  Walesiak (15:2, 16:2)
  Winsberg (14:18)

The Title field should be in title case, current version then in title case:
'Searching for Optimal MDS Procedure for Metric and Interval-valued Symbolic Data'
'Searching for Optimal MDS Procedure for Metric and Interval-Valued Symbolic Data'
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking serialization versions ... OK
* checking whether package 'mdsOpt' can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* loading checks for arch 'i386'
** checking whether the package can be loaded ... OK
** checking whether the package can be loaded with stated dependencies ... OK
** checking whether the package can be unloaded cleanly ... OK
** checking whether the namespace can be loaded with stated dependencies ... OK
** checking whether the namespace can be unloaded cleanly ... OK
** checking loading without being on the library search path ... OK
** checking use of S3 registration ... OK
* loading checks for arch 'x64'
** checking whether the package can be loaded ... OK
** checking whether the package can be loaded with stated dependencies ... OK
** checking whether the package can be unloaded cleanly ... OK
** checking whether the namespace can be loaded with stated dependencies ... OK
** checking whether the namespace can be unloaded cleanly ... OK
** checking loading without being on the library search path ... OK
** checking use of S3 registration ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... [12s] OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd line widths ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking contents of 'data' directory ... OK
* checking data for non-ASCII characters ... OK
* checking data for ASCII and uncompressed saves ... OK
* checking examples ...
** running examples for arch 'i386' ... [15s] OK
** running examples for arch 'x64' ... [16s] OK
* checking for unstated dependencies in 'tests' ... OK
* checking tests ...
** running tests for arch 'i386' ... [4s] OK
  Running 'testthat.R' [4s]
** running tests for arch 'x64' ... [5s] OK
  Running 'testthat.R' [5s]
* checking PDF version of manual ... OK
* DONE
Status: 1 NOTE


So I assume the rejection is due to misspelling note (or maybe I cannot read this message properly :-))

Still appreciate any help 

Best regards 

Andrzej 

-----Original Message-----
From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com] 
Sent: Thursday, April 5, 2018 10:48 PM
To: Ben Bolker <bbolker at gmail.com>
Cc: Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl>; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Cannot submit package due to misspell note

On 05/04/2018 4:41 PM, Ben Bolker wrote:
> I think it was reasonable to post this to the list for discussion -- 
> it's good not to bother the CRAN maintainers unnecessarily. At this 
> point it might be more productive to e-mail them (CRAN maintainers) 
> for clarification:  e.g., explain your interpretation of what they're 
> asking you to do and give them some options about how you might 
> propose to meet their requirements. Otherwise you're asking a bunch of 
> strangers on the internet to guess what the CRAN maintainers want you 
> to do ...
> 

... without showing us what they asked you to do.

Duncan Murdoch

> On Thu, Apr 5, 2018 at 4:30 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>> On 05/04/2018 4:17 PM, Dudek Andrzej wrote:
>>>
>>> CRAN maintainers rejected the package two times already due to this 
>>> note
>>>
>>> But for previous version I've been asked to add the references in 
>>> description field:
>>>
>>>> Package Information:
>>>> Package: mdsOpt
>>>> Version: 0.1-4
>>>> Title: Searching for Optimal MDS Procedure for Metric Data
>>>> Author(s): Marek Walesiak <marek.walesiak at ue.wroc.pl>  Andrzej Dudek
>>>>      <andrzej.dudek at ue.wroc.pl>
>>>> Maintainer: Andrzej Dudek <andrzej.dudek at ue.wroc.pl>
>>>> Depends: smacof, clusterSim
>>>> Suggests: testthat
>>>> Description: Searching for optimal multidimensional scaling procedure for
>>>>      metric data.
>>>
>>>
>>> Thanks, can you please extend your description text.
>>>
>>> Can you provide some references in the form authors (year) <doi:...> 
>>> or <arXiv:...> (no space after 'doi:' and 'arXiv:')?
>>>
>>> Best,
>>> Swetlana Herbrandt
>>>
>>> --------------------
>>>
>>> So at this point is some kind of vicious circle for me :-)  Maybe 
>>> adding quotation mark is best idea (?)
>>>
>>
>> You didn't post the message for the current submission.  In my 
>> experience, they won't reject a package due to false positives from 
>> the spell checker, so I would guess that you have misinterpreted their rejection message.
>>
>> When I was checking incoming packages, I would generally ask 
>> submitters to respect the requirement to use complete sentences; none 
>> of your "sentences", e.g.
>>
>> Selecting the optimal multidimensional scaling (MDS) procedure for 
>> metric data via metric MDS (ratio, interval, mspline) and nonmetric MDS (ordinal).
>>
>> and your reference list
>>
>> (Borg, I., Groenen, P.J.F., Mair, P. (2013) <doi:10.1007/978-3-642-31848-1>,
>>   De Leeuw, J., Mair, P. (2015) <doi:10.1002/9781118445112.stat06268.pub2>,
>>   Groenen, P.J.F., Winsberg, S., Rodriguez, O., Diday, E. (2006) 
>> <doi:10.1016/j.csda.2006.04.003>, Walesiak, M. (2016) 
>> <doi:10.15611/ekt.2016.2.01>,
>>   Walesiak, M. (2017) <doi:10.15611/ekt.2017.3.01>).
>>
>> are grammatically complete sentences, so I probably would have asked 
>> you to reword things.
>>
>> Duncan Murdoch
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list 
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From georgi.boshnakov at manchester.ac.uk  Fri Apr  6 08:32:07 2018
From: georgi.boshnakov at manchester.ac.uk (Georgi Boshnakov)
Date: Fri, 6 Apr 2018 06:32:07 +0000
Subject: [R-pkg-devel] Cannot submit package due to misspell note
In-Reply-To: <DB7P192MB0331C4BD96E30309F58D62DEC6BA0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
References: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <CABghstSLQ44dOa2a-O-u5S+mt4nbLxeLbJ_V83cxtOdqXNoUvQ@mail.gmail.com>
 <DB7P192MB033144DD9D4B3425D25C695BC6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <1ac04243-dc1b-a8b5-86eb-9b3ffa598276@gmail.com>
 <CABghstQB18H9=1PuXKAugr2ZtqRc57ykyxMPTx5QoHinHqtjfg@mail.gmail.com>
 <6e503f1b-733e-af97-17dd-860aaab7fb52@gmail.com>
 <DB7P192MB0331C4BD96E30309F58D62DEC6BA0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F655ED6@MBXP01.ds.man.ac.uk>

In fact, the reason for rejection is just after the 'misspelled' words:

>The Title field should be in title case, current version then in title case:
'>Searching for Optimal MDS Procedure for Metric and Interval-valued Symbolic Data'
>'Searching for Optimal MDS Procedure for Metric and Interval-Valued Symbolic Data'

Just copy the second line, which is the suggested title in 'title case'.  
(and write in the Note field on the submission page that the misspelled words are actually names, which you have checked)

Georgi Boshnakov




-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Dudek Andrzej
Sent: 06 April 2018 07:13
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Cannot submit package due to misspell note

Ok, my fault sorry:

This is the original message for current submission from prof. Ligges  

-----------------------------------------------------------------------------------------------------------------------------------

Dear maintainer,

package mdsOpt_0.3-1.tar.gz does not pass the incoming checks automatically, please see the pre-test at:
<https://win-builder.r-project.org/incoming_pretest/mdsOpt_0.3-1_20180404_090906/Windows/00check.log>
Status: 1 NOTE

Current CRAN status: ERROR: 1, OK: 11
See: <https://CRAN.R-project.org/web/checks/check_results_mdsOpt.html>

Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.

More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/mdsOpt_0.3-1_20180404_090906/>
The files will be removed after roughly 7 days.


Best regards,
CRAN teams' auto-check service

-----------------------------------------------------------------------------------------------------------------------------------

And following the first link:


* using log directory 'd:/RCompile/CRANincoming/R-devel/mdsOpt.Rcheck'
* using R version 3.5.0 alpha (2018-03-30 r74499)
* using platform: x86_64-w64-mingw32 (64-bit)
* using session charset: ISO8859-1
* checking for file 'mdsOpt/DESCRIPTION' ... OK
* this is package 'mdsOpt' version '0.3-1'
* package encoding: UTF-8
* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Andrzej Dudek <andrzej.dudek at ue.wroc.pl>'

Possibly mis-spelled words in DESCRIPTION:
  De (13:2)
  Diday (14:47)
  Groenen (12:13, 14:2)
  Leeuw (13:5)
  Mair (12:30, 13:16)
  Walesiak (15:2, 16:2)
  Winsberg (14:18)

The Title field should be in title case, current version then in title case:
'Searching for Optimal MDS Procedure for Metric and Interval-valued Symbolic Data'
'Searching for Optimal MDS Procedure for Metric and Interval-Valued Symbolic Data'
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking serialization versions ... OK
* checking whether package 'mdsOpt' can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* loading checks for arch 'i386'
** checking whether the package can be loaded ... OK
** checking whether the package can be loaded with stated dependencies ... OK
** checking whether the package can be unloaded cleanly ... OK
** checking whether the namespace can be loaded with stated dependencies ... OK
** checking whether the namespace can be unloaded cleanly ... OK
** checking loading without being on the library search path ... OK
** checking use of S3 registration ... OK
* loading checks for arch 'x64'
** checking whether the package can be loaded ... OK
** checking whether the package can be loaded with stated dependencies ... OK
** checking whether the package can be unloaded cleanly ... OK
** checking whether the namespace can be loaded with stated dependencies ... OK
** checking whether the namespace can be unloaded cleanly ... OK
** checking loading without being on the library search path ... OK
** checking use of S3 registration ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... [12s] OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd line widths ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking contents of 'data' directory ... OK
* checking data for non-ASCII characters ... OK
* checking data for ASCII and uncompressed saves ... OK
* checking examples ...
** running examples for arch 'i386' ... [15s] OK
** running examples for arch 'x64' ... [16s] OK
* checking for unstated dependencies in 'tests' ... OK
* checking tests ...
** running tests for arch 'i386' ... [4s] OK
  Running 'testthat.R' [4s]
** running tests for arch 'x64' ... [5s] OK
  Running 'testthat.R' [5s]
* checking PDF version of manual ... OK
* DONE
Status: 1 NOTE


So I assume the rejection is due to misspelling note (or maybe I cannot read this message properly :-))

Still appreciate any help 

Best regards 

Andrzej 

-----Original Message-----
From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com]
Sent: Thursday, April 5, 2018 10:48 PM
To: Ben Bolker <bbolker at gmail.com>
Cc: Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl>; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Cannot submit package due to misspell note

On 05/04/2018 4:41 PM, Ben Bolker wrote:
> I think it was reasonable to post this to the list for discussion -- 
> it's good not to bother the CRAN maintainers unnecessarily. At this 
> point it might be more productive to e-mail them (CRAN maintainers) 
> for clarification:  e.g., explain your interpretation of what they're 
> asking you to do and give them some options about how you might 
> propose to meet their requirements. Otherwise you're asking a bunch of 
> strangers on the internet to guess what the CRAN maintainers want you 
> to do ...
> 

... without showing us what they asked you to do.

Duncan Murdoch

> On Thu, Apr 5, 2018 at 4:30 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>> On 05/04/2018 4:17 PM, Dudek Andrzej wrote:
>>>
>>> CRAN maintainers rejected the package two times already due to this 
>>> note
>>>
>>> But for previous version I've been asked to add the references in 
>>> description field:
>>>
>>>> Package Information:
>>>> Package: mdsOpt
>>>> Version: 0.1-4
>>>> Title: Searching for Optimal MDS Procedure for Metric Data
>>>> Author(s): Marek Walesiak <marek.walesiak at ue.wroc.pl>  Andrzej Dudek
>>>>      <andrzej.dudek at ue.wroc.pl>
>>>> Maintainer: Andrzej Dudek <andrzej.dudek at ue.wroc.pl>
>>>> Depends: smacof, clusterSim
>>>> Suggests: testthat
>>>> Description: Searching for optimal multidimensional scaling procedure for
>>>>      metric data.
>>>
>>>
>>> Thanks, can you please extend your description text.
>>>
>>> Can you provide some references in the form authors (year) <doi:...> 
>>> or <arXiv:...> (no space after 'doi:' and 'arXiv:')?
>>>
>>> Best,
>>> Swetlana Herbrandt
>>>
>>> --------------------
>>>
>>> So at this point is some kind of vicious circle for me :-)  Maybe 
>>> adding quotation mark is best idea (?)
>>>
>>
>> You didn't post the message for the current submission.  In my 
>> experience, they won't reject a package due to false positives from 
>> the spell checker, so I would guess that you have misinterpreted their rejection message.
>>
>> When I was checking incoming packages, I would generally ask 
>> submitters to respect the requirement to use complete sentences; none 
>> of your "sentences", e.g.
>>
>> Selecting the optimal multidimensional scaling (MDS) procedure for 
>> metric data via metric MDS (ratio, interval, mspline) and nonmetric MDS (ordinal).
>>
>> and your reference list
>>
>> (Borg, I., Groenen, P.J.F., Mair, P. (2013) <doi:10.1007/978-3-642-31848-1>,
>>   De Leeuw, J., Mair, P. (2015) <doi:10.1002/9781118445112.stat06268.pub2>,
>>   Groenen, P.J.F., Winsberg, S., Rodriguez, O., Diday, E. (2006) 
>> <doi:10.1016/j.csda.2006.04.003>, Walesiak, M. (2016) 
>> <doi:10.15611/ekt.2016.2.01>,
>>   Walesiak, M. (2017) <doi:10.15611/ekt.2017.3.01>).
>>
>> are grammatically complete sentences, so I probably would have asked 
>> you to reword things.
>>
>> Duncan Murdoch
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list 
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From Andrzej.Dudek at ue.wroc.pl  Fri Apr  6 21:10:13 2018
From: Andrzej.Dudek at ue.wroc.pl (Dudek Andrzej)
Date: Fri, 6 Apr 2018 19:10:13 +0000
Subject: [R-pkg-devel] Cannot submit package due to misspell note
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F655ED6@MBXP01.ds.man.ac.uk>
References: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <CABghstSLQ44dOa2a-O-u5S+mt4nbLxeLbJ_V83cxtOdqXNoUvQ@mail.gmail.com>
 <DB7P192MB033144DD9D4B3425D25C695BC6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <1ac04243-dc1b-a8b5-86eb-9b3ffa598276@gmail.com>
 <CABghstQB18H9=1PuXKAugr2ZtqRc57ykyxMPTx5QoHinHqtjfg@mail.gmail.com>
 <6e503f1b-733e-af97-17dd-860aaab7fb52@gmail.com>
 <DB7P192MB0331C4BD96E30309F58D62DEC6BA0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <438D2EC9EAFE5946B2D5864670EA468E018F655ED6@MBXP01.ds.man.ac.uk>
Message-ID: <DB7P192MB0331C6A2B7C215FC27765FEDC6BA0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>

Thanks a lot !!!

I've been blind, I've read this message about twenty times and haven't noticed that letter v after - sign  is not capitalized so my thoughts went to spelling issues.  In fact after capitalizing this letter package has passed pre-tests. (Even without Bervin's solution which I plan to implement in next version)

Thanks Everyone for Help !

Andrzej

-----Original Message-----
From: Georgi Boshnakov [mailto:georgi.boshnakov at manchester.ac.uk] 
Sent: Friday, April 6, 2018 8:32 AM
To: Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl>
Cc: r-package-devel at r-project.org
Subject: RE: [R-pkg-devel] Cannot submit package due to misspell note

In fact, the reason for rejection is just after the 'misspelled' words:

>The Title field should be in title case, current version then in title case:
'>Searching for Optimal MDS Procedure for Metric and Interval-valued Symbolic Data'
>'Searching for Optimal MDS Procedure for Metric and Interval-Valued Symbolic Data'

Just copy the second line, which is the suggested title in 'title case'.  
(and write in the Note field on the submission page that the misspelled words are actually names, which you have checked)

Georgi Boshnakov




-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Dudek Andrzej
Sent: 06 April 2018 07:13
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Cannot submit package due to misspell note

Ok, my fault sorry:

This is the original message for current submission from prof. Ligges  

-----------------------------------------------------------------------------------------------------------------------------------

Dear maintainer,

package mdsOpt_0.3-1.tar.gz does not pass the incoming checks automatically, please see the pre-test at:
<https://win-builder.r-project.org/incoming_pretest/mdsOpt_0.3-1_20180404_090906/Windows/00check.log>
Status: 1 NOTE

Current CRAN status: ERROR: 1, OK: 11
See: <https://CRAN.R-project.org/web/checks/check_results_mdsOpt.html>

Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.

More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/mdsOpt_0.3-1_20180404_090906/>
The files will be removed after roughly 7 days.


Best regards,
CRAN teams' auto-check service

-----------------------------------------------------------------------------------------------------------------------------------

And following the first link:


* using log directory 'd:/RCompile/CRANincoming/R-devel/mdsOpt.Rcheck'
* using R version 3.5.0 alpha (2018-03-30 r74499)
* using platform: x86_64-w64-mingw32 (64-bit)
* using session charset: ISO8859-1
* checking for file 'mdsOpt/DESCRIPTION' ... OK
* this is package 'mdsOpt' version '0.3-1'
* package encoding: UTF-8
* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Andrzej Dudek <andrzej.dudek at ue.wroc.pl>'

Possibly mis-spelled words in DESCRIPTION:
  De (13:2)
  Diday (14:47)
  Groenen (12:13, 14:2)
  Leeuw (13:5)
  Mair (12:30, 13:16)
  Walesiak (15:2, 16:2)
  Winsberg (14:18)

The Title field should be in title case, current version then in title case:
'Searching for Optimal MDS Procedure for Metric and Interval-valued Symbolic Data'
'Searching for Optimal MDS Procedure for Metric and Interval-Valued Symbolic Data'
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking serialization versions ... OK
* checking whether package 'mdsOpt' can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* loading checks for arch 'i386'
** checking whether the package can be loaded ... OK
** checking whether the package can be loaded with stated dependencies ... OK
** checking whether the package can be unloaded cleanly ... OK
** checking whether the namespace can be loaded with stated dependencies ... OK
** checking whether the namespace can be unloaded cleanly ... OK
** checking loading without being on the library search path ... OK
** checking use of S3 registration ... OK
* loading checks for arch 'x64'
** checking whether the package can be loaded ... OK
** checking whether the package can be loaded with stated dependencies ... OK
** checking whether the package can be unloaded cleanly ... OK
** checking whether the namespace can be loaded with stated dependencies ... OK
** checking whether the namespace can be unloaded cleanly ... OK
** checking loading without being on the library search path ... OK
** checking use of S3 registration ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... [12s] OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd line widths ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking contents of 'data' directory ... OK
* checking data for non-ASCII characters ... OK
* checking data for ASCII and uncompressed saves ... OK
* checking examples ...
** running examples for arch 'i386' ... [15s] OK
** running examples for arch 'x64' ... [16s] OK
* checking for unstated dependencies in 'tests' ... OK
* checking tests ...
** running tests for arch 'i386' ... [4s] OK
  Running 'testthat.R' [4s]
** running tests for arch 'x64' ... [5s] OK
  Running 'testthat.R' [5s]
* checking PDF version of manual ... OK
* DONE
Status: 1 NOTE


So I assume the rejection is due to misspelling note (or maybe I cannot read this message properly :-))

Still appreciate any help 

Best regards 

Andrzej 

-----Original Message-----
From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com]
Sent: Thursday, April 5, 2018 10:48 PM
To: Ben Bolker <bbolker at gmail.com>
Cc: Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl>; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Cannot submit package due to misspell note

On 05/04/2018 4:41 PM, Ben Bolker wrote:
> I think it was reasonable to post this to the list for discussion -- 
> it's good not to bother the CRAN maintainers unnecessarily. At this 
> point it might be more productive to e-mail them (CRAN maintainers) 
> for clarification:  e.g., explain your interpretation of what they're 
> asking you to do and give them some options about how you might 
> propose to meet their requirements. Otherwise you're asking a bunch of 
> strangers on the internet to guess what the CRAN maintainers want you 
> to do ...
> 

... without showing us what they asked you to do.

Duncan Murdoch

> On Thu, Apr 5, 2018 at 4:30 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>> On 05/04/2018 4:17 PM, Dudek Andrzej wrote:
>>>
>>> CRAN maintainers rejected the package two times already due to this 
>>> note
>>>
>>> But for previous version I've been asked to add the references in 
>>> description field:
>>>
>>>> Package Information:
>>>> Package: mdsOpt
>>>> Version: 0.1-4
>>>> Title: Searching for Optimal MDS Procedure for Metric Data
>>>> Author(s): Marek Walesiak <marek.walesiak at ue.wroc.pl>  Andrzej Dudek
>>>>      <andrzej.dudek at ue.wroc.pl>
>>>> Maintainer: Andrzej Dudek <andrzej.dudek at ue.wroc.pl>
>>>> Depends: smacof, clusterSim
>>>> Suggests: testthat
>>>> Description: Searching for optimal multidimensional scaling procedure for
>>>>      metric data.
>>>
>>>
>>> Thanks, can you please extend your description text.
>>>
>>> Can you provide some references in the form authors (year) <doi:...> 
>>> or <arXiv:...> (no space after 'doi:' and 'arXiv:')?
>>>
>>> Best,
>>> Swetlana Herbrandt
>>>
>>> --------------------
>>>
>>> So at this point is some kind of vicious circle for me :-)  Maybe 
>>> adding quotation mark is best idea (?)
>>>
>>
>> You didn't post the message for the current submission.  In my 
>> experience, they won't reject a package due to false positives from 
>> the spell checker, so I would guess that you have misinterpreted their rejection message.
>>
>> When I was checking incoming packages, I would generally ask 
>> submitters to respect the requirement to use complete sentences; none 
>> of your "sentences", e.g.
>>
>> Selecting the optimal multidimensional scaling (MDS) procedure for 
>> metric data via metric MDS (ratio, interval, mspline) and nonmetric MDS (ordinal).
>>
>> and your reference list
>>
>> (Borg, I., Groenen, P.J.F., Mair, P. (2013) <doi:10.1007/978-3-642-31848-1>,
>>   De Leeuw, J., Mair, P. (2015) <doi:10.1002/9781118445112.stat06268.pub2>,
>>   Groenen, P.J.F., Winsberg, S., Rodriguez, O., Diday, E. (2006) 
>> <doi:10.1016/j.csda.2006.04.003>, Walesiak, M. (2016) 
>> <doi:10.15611/ekt.2016.2.01>,
>>   Walesiak, M. (2017) <doi:10.15611/ekt.2017.3.01>).
>>
>> are grammatically complete sentences, so I probably would have asked 
>> you to reword things.
>>
>> Duncan Murdoch
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list 
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From david.c.sterratt at ed.ac.uk  Fri Apr  6 20:44:00 2018
From: david.c.sterratt at ed.ac.uk (David C Sterratt)
Date: Fri, 06 Apr 2018 19:44:00 +0100
Subject: [R-pkg-devel] GPL + other licence
Message-ID: <eyuk1tkup2j.fsf@bonnington.inf.ed.ac.uk>

Dear all,

I'd appreciate help with a licence conundrum I have with the geometry
package (https://davidcsterratt.github.io/geometry/) that I maintain.

The geometry package contains some functions (e.g. convhulln(),
delaunayn()) that wrap the Qhull library (http://www.qhull.org), which
has its own, non-GPL, licence. The geometry package includes this source
code, and wraps it in C files that have GPL licence headers.

The geometry package also has functions that are not derived from Qhull
code and which are licensed under GPL, including a number of functions
that are ports of the Matlab distmesh package, and some other useful
functions to do with triangulation and coordinate systems (e.g.
tsearch() and cart2bary()).

I inherited this situation when I took over maintaining the package 8
years ago, though I have added functions to both Qhull-derived and GPL
categories.

In October last year I submitted the latest version of the geometry
package, which adds quite a bit of useful functionality:
https://github.com/davidcsterratt/geometry/blob/master/pkg/NEWS

I received the following response from the CRAN maintainers:

  For the license. It is CRAN policy that a package has to have a single
  license. Can you manage to convince all copyright hoders (e.g. of
  Qhull) to relicense under GPL?

I tried persuading the author of Qhull. He replied:

  There's only one license and that's the one included with the code
  (COPYING.txt). Several years ago, I tried to clarify the license with
  the Univ. of Minn. but had no success. So I think the best approach is
  to keep the original license as is. It has not been an issue so far.

At the same time as I wrote to the Qhull maintainer, I wrote to the CRAN
maintainers:

  I have written to the Qhull maintainer, but I doubt he will want to
  change the license, since Qhull is used in proprietary software such
  as MATLAB. Assuming this is the case, we'll have to create a new
  package - I would need help with managing the change for dependent
  packages.

The CRAN maintainers replied:

  Please try to find out how this can work.

In principle I could create a package containing only the functions
derived from Qhull (but still with GPL headers in the wrapper C files,
see e.g.,
https://github.com/davidcsterratt/geometry/blob/master/pkg/src/Rconvhulln.c
But wouldn't this package still have to have two licenses, due to the
GPL headers?

I don't want to start on any package splitting without having a plan
agreed that I know will be OK for CRAN. It would be quite a bit of work,
as there are a number of packages that depend on geometry, so I would
have to check all the revdeps for functions that they call in the
geometry package. I would have to then perhaps write wrapper functions
in the geometry package to make sure any functions moved to a new
package still worked when called from revdeps.

I know the CRAN maintainers are busy, so any help from the list would be
much appreciated.

Best wishes,

David.

--
David C Sterratt, Senior Research Associate
Institute for Adaptive and Neural Computation, School of Informatics
University of Edinburgh, 10 Crichton Street, Edinburgh EH8 9AB, Scotland, UK
http://homepages.inf.ed.ac.uk/sterratt - tel: +44 131 651 1739

-- 
The University of Edinburgh is a charitable body, registered in
Scotland, with registration number SC005336.


From bbolker at gmail.com  Fri Apr  6 21:14:02 2018
From: bbolker at gmail.com (Ben Bolker)
Date: Fri, 6 Apr 2018 15:14:02 -0400
Subject: [R-pkg-devel] Cannot submit package due to misspell note
In-Reply-To: <DB7P192MB0331C6A2B7C215FC27765FEDC6BA0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
References: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <CABghstSLQ44dOa2a-O-u5S+mt4nbLxeLbJ_V83cxtOdqXNoUvQ@mail.gmail.com>
 <DB7P192MB033144DD9D4B3425D25C695BC6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <1ac04243-dc1b-a8b5-86eb-9b3ffa598276@gmail.com>
 <CABghstQB18H9=1PuXKAugr2ZtqRc57ykyxMPTx5QoHinHqtjfg@mail.gmail.com>
 <6e503f1b-733e-af97-17dd-860aaab7fb52@gmail.com>
 <DB7P192MB0331C4BD96E30309F58D62DEC6BA0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <438D2EC9EAFE5946B2D5864670EA468E018F655ED6@MBXP01.ds.man.ac.uk>
 <DB7P192MB0331C6A2B7C215FC27765FEDC6BA0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
Message-ID: <1757c4e2-4c46-9881-d532-781f4c9eaa81@gmail.com>


  FWIW, the first (many) times I read the warning

"The Title field should be in title case, current version then in title
case:"

  I couldn't parse it at all. Brevity is wonderful, but I might submit a
patch/wish for this warning to be changed to (something like): "The
Title field should be in title case; the next line shows the current
version, while the following line shows the recommended format" (or even
"The Title field should be in title case! The next line ...")



On 18-04-06 03:10 PM, Dudek Andrzej wrote:
> Thanks a lot !!!
> 
> I've been blind, I've read this message about twenty times and haven't noticed that letter v after - sign  is not capitalized so my thoughts went to spelling issues.  In fact after capitalizing this letter package has passed pre-tests. (Even without Bervin's solution which I plan to implement in next version)
> 
> Thanks Everyone for Help !
> 
> Andrzej
> 
> -----Original Message-----
> From: Georgi Boshnakov [mailto:georgi.boshnakov at manchester.ac.uk] 
> Sent: Friday, April 6, 2018 8:32 AM
> To: Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl>
> Cc: r-package-devel at r-project.org
> Subject: RE: [R-pkg-devel] Cannot submit package due to misspell note
> 
> In fact, the reason for rejection is just after the 'misspelled' words:
> 
>> The Title field should be in title case, current version then in title case:
> '>Searching for Optimal MDS Procedure for Metric and Interval-valued Symbolic Data'
>> 'Searching for Optimal MDS Procedure for Metric and Interval-Valued Symbolic Data'
> 
> Just copy the second line, which is the suggested title in 'title case'.  
> (and write in the Note field on the submission page that the misspelled words are actually names, which you have checked)
> 
> Georgi Boshnakov
> 
> 
> 
> 
> -----Original Message-----
> From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Dudek Andrzej
> Sent: 06 April 2018 07:13
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Cannot submit package due to misspell note
> 
> Ok, my fault sorry:
> 
> This is the original message for current submission from prof. Ligges  
> 
> -----------------------------------------------------------------------------------------------------------------------------------
> 
> Dear maintainer,
> 
> package mdsOpt_0.3-1.tar.gz does not pass the incoming checks automatically, please see the pre-test at:
> <https://win-builder.r-project.org/incoming_pretest/mdsOpt_0.3-1_20180404_090906/Windows/00check.log>
> Status: 1 NOTE
> 
> Current CRAN status: ERROR: 1, OK: 11
> See: <https://CRAN.R-project.org/web/checks/check_results_mdsOpt.html>
> 
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
> 
> More details are given in the directory:
> <https://win-builder.r-project.org/incoming_pretest/mdsOpt_0.3-1_20180404_090906/>
> The files will be removed after roughly 7 days.
> 
> 
> Best regards,
> CRAN teams' auto-check service
> 
> -----------------------------------------------------------------------------------------------------------------------------------
> 
> And following the first link:
> 
> 
> * using log directory 'd:/RCompile/CRANincoming/R-devel/mdsOpt.Rcheck'
> * using R version 3.5.0 alpha (2018-03-30 r74499)
> * using platform: x86_64-w64-mingw32 (64-bit)
> * using session charset: ISO8859-1
> * checking for file 'mdsOpt/DESCRIPTION' ... OK
> * this is package 'mdsOpt' version '0.3-1'
> * package encoding: UTF-8
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: 'Andrzej Dudek <andrzej.dudek at ue.wroc.pl>'
> 
> Possibly mis-spelled words in DESCRIPTION:
>   De (13:2)
>   Diday (14:47)
>   Groenen (12:13, 14:2)
>   Leeuw (13:5)
>   Mair (12:30, 13:16)
>   Walesiak (15:2, 16:2)
>   Winsberg (14:18)
> 
> The Title field should be in title case, current version then in title case:
> 'Searching for Optimal MDS Procedure for Metric and Interval-valued Symbolic Data'
> 'Searching for Optimal MDS Procedure for Metric and Interval-Valued Symbolic Data'
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking serialization versions ... OK
> * checking whether package 'mdsOpt' can be installed ... OK
> * checking installed package size ... OK
> * checking package directory ... OK
> * checking DESCRIPTION meta-information ... OK
> * checking top-level files ... OK
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * loading checks for arch 'i386'
> ** checking whether the package can be loaded ... OK
> ** checking whether the package can be loaded with stated dependencies ... OK
> ** checking whether the package can be unloaded cleanly ... OK
> ** checking whether the namespace can be loaded with stated dependencies ... OK
> ** checking whether the namespace can be unloaded cleanly ... OK
> ** checking loading without being on the library search path ... OK
> ** checking use of S3 registration ... OK
> * loading checks for arch 'x64'
> ** checking whether the package can be loaded ... OK
> ** checking whether the package can be loaded with stated dependencies ... OK
> ** checking whether the package can be unloaded cleanly ... OK
> ** checking whether the namespace can be loaded with stated dependencies ... OK
> ** checking whether the namespace can be unloaded cleanly ... OK
> ** checking loading without being on the library search path ... OK
> ** checking use of S3 registration ... OK
> * checking dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... [12s] OK
> * checking Rd files ... OK
> * checking Rd metadata ... OK
> * checking Rd line widths ... OK
> * checking Rd cross-references ... OK
> * checking for missing documentation entries ... OK
> * checking for code/documentation mismatches ... OK
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking contents of 'data' directory ... OK
> * checking data for non-ASCII characters ... OK
> * checking data for ASCII and uncompressed saves ... OK
> * checking examples ...
> ** running examples for arch 'i386' ... [15s] OK
> ** running examples for arch 'x64' ... [16s] OK
> * checking for unstated dependencies in 'tests' ... OK
> * checking tests ...
> ** running tests for arch 'i386' ... [4s] OK
>   Running 'testthat.R' [4s]
> ** running tests for arch 'x64' ... [5s] OK
>   Running 'testthat.R' [5s]
> * checking PDF version of manual ... OK
> * DONE
> Status: 1 NOTE
> 
> 
> So I assume the rejection is due to misspelling note (or maybe I cannot read this message properly :-))
> 
> Still appreciate any help 
> 
> Best regards 
> 
> Andrzej 
> 
> -----Original Message-----
> From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com]
> Sent: Thursday, April 5, 2018 10:48 PM
> To: Ben Bolker <bbolker at gmail.com>
> Cc: Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl>; r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Cannot submit package due to misspell note
> 
> On 05/04/2018 4:41 PM, Ben Bolker wrote:
>> I think it was reasonable to post this to the list for discussion -- 
>> it's good not to bother the CRAN maintainers unnecessarily. At this 
>> point it might be more productive to e-mail them (CRAN maintainers) 
>> for clarification:  e.g., explain your interpretation of what they're 
>> asking you to do and give them some options about how you might 
>> propose to meet their requirements. Otherwise you're asking a bunch of 
>> strangers on the internet to guess what the CRAN maintainers want you 
>> to do ...
>>
> 
> ... without showing us what they asked you to do.
> 
> Duncan Murdoch
> 
>> On Thu, Apr 5, 2018 at 4:30 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>> On 05/04/2018 4:17 PM, Dudek Andrzej wrote:
>>>>
>>>> CRAN maintainers rejected the package two times already due to this 
>>>> note
>>>>
>>>> But for previous version I've been asked to add the references in 
>>>> description field:
>>>>
>>>>> Package Information:
>>>>> Package: mdsOpt
>>>>> Version: 0.1-4
>>>>> Title: Searching for Optimal MDS Procedure for Metric Data
>>>>> Author(s): Marek Walesiak <marek.walesiak at ue.wroc.pl>  Andrzej Dudek
>>>>>      <andrzej.dudek at ue.wroc.pl>
>>>>> Maintainer: Andrzej Dudek <andrzej.dudek at ue.wroc.pl>
>>>>> Depends: smacof, clusterSim
>>>>> Suggests: testthat
>>>>> Description: Searching for optimal multidimensional scaling procedure for
>>>>>      metric data.
>>>>
>>>>
>>>> Thanks, can you please extend your description text.
>>>>
>>>> Can you provide some references in the form authors (year) <doi:...> 
>>>> or <arXiv:...> (no space after 'doi:' and 'arXiv:')?
>>>>
>>>> Best,
>>>> Swetlana Herbrandt
>>>>
>>>> --------------------
>>>>
>>>> So at this point is some kind of vicious circle for me :-)  Maybe 
>>>> adding quotation mark is best idea (?)
>>>>
>>>
>>> You didn't post the message for the current submission.  In my 
>>> experience, they won't reject a package due to false positives from 
>>> the spell checker, so I would guess that you have misinterpreted their rejection message.
>>>
>>> When I was checking incoming packages, I would generally ask 
>>> submitters to respect the requirement to use complete sentences; none 
>>> of your "sentences", e.g.
>>>
>>> Selecting the optimal multidimensional scaling (MDS) procedure for 
>>> metric data via metric MDS (ratio, interval, mspline) and nonmetric MDS (ordinal).
>>>
>>> and your reference list
>>>
>>> (Borg, I., Groenen, P.J.F., Mair, P. (2013) <doi:10.1007/978-3-642-31848-1>,
>>>   De Leeuw, J., Mair, P. (2015) <doi:10.1002/9781118445112.stat06268.pub2>,
>>>   Groenen, P.J.F., Winsberg, S., Rodriguez, O., Diday, E. (2006) 
>>> <doi:10.1016/j.csda.2006.04.003>, Walesiak, M. (2016) 
>>> <doi:10.15611/ekt.2016.2.01>,
>>>   Walesiak, M. (2017) <doi:10.15611/ekt.2017.3.01>).
>>>
>>> are grammatically complete sentences, so I probably would have asked 
>>> you to reword things.
>>>
>>> Duncan Murdoch
>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list 
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From murdoch.duncan at gmail.com  Sat Apr  7 01:06:59 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 6 Apr 2018 19:06:59 -0400
Subject: [R-pkg-devel] Cannot submit package due to misspell note
In-Reply-To: <1757c4e2-4c46-9881-d532-781f4c9eaa81@gmail.com>
References: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <CABghstSLQ44dOa2a-O-u5S+mt4nbLxeLbJ_V83cxtOdqXNoUvQ@mail.gmail.com>
 <DB7P192MB033144DD9D4B3425D25C695BC6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <1ac04243-dc1b-a8b5-86eb-9b3ffa598276@gmail.com>
 <CABghstQB18H9=1PuXKAugr2ZtqRc57ykyxMPTx5QoHinHqtjfg@mail.gmail.com>
 <6e503f1b-733e-af97-17dd-860aaab7fb52@gmail.com>
 <DB7P192MB0331C4BD96E30309F58D62DEC6BA0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <438D2EC9EAFE5946B2D5864670EA468E018F655ED6@MBXP01.ds.man.ac.uk>
 <DB7P192MB0331C6A2B7C215FC27765FEDC6BA0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <1757c4e2-4c46-9881-d532-781f4c9eaa81@gmail.com>
Message-ID: <82dca56d-6619-7e9c-d69d-349ac28a1aa0@gmail.com>

On 06/04/2018 3:14 PM, Ben Bolker wrote:
> 
>    FWIW, the first (many) times I read the warning
> 
> "The Title field should be in title case, current version then in title
> case:"
> 
>    I couldn't parse it at all. Brevity is wonderful, but I might submit a
> patch/wish for this warning to be changed to (something like): "The
> Title field should be in title case; the next line shows the current
> version, while the following line shows the recommended format" (or even
> "The Title field should be in title case! The next line ...")

I don't like the current wording either.  So I'd suggest putting 
together something that people here agree is clear, then actually 
submitting it as a patch.

What I don't like about your first one is that it is too complicated. 
I'd rather have something like your second one, specifically

"The Title field should be in title case!  Your submission has

    blah blah blah

This is not in title case, which would be

    Blah, Blah, Blah"




> 
> 
> 
> On 18-04-06 03:10 PM, Dudek Andrzej wrote:
>> Thanks a lot !!!
>>
>> I've been blind, I've read this message about twenty times and haven't noticed that letter v after - sign  is not capitalized so my thoughts went to spelling issues.  In fact after capitalizing this letter package has passed pre-tests. (Even without Bervin's solution which I plan to implement in next version)
>>
>> Thanks Everyone for Help !
>>
>> Andrzej
>>
>> -----Original Message-----
>> From: Georgi Boshnakov [mailto:georgi.boshnakov at manchester.ac.uk]
>> Sent: Friday, April 6, 2018 8:32 AM
>> To: Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl>
>> Cc: r-package-devel at r-project.org
>> Subject: RE: [R-pkg-devel] Cannot submit package due to misspell note
>>
>> In fact, the reason for rejection is just after the 'misspelled' words:
>>
>>> The Title field should be in title case, current version then in title case:
>> '>Searching for Optimal MDS Procedure for Metric and Interval-valued Symbolic Data'
>>> 'Searching for Optimal MDS Procedure for Metric and Interval-Valued Symbolic Data'
>>
>> Just copy the second line, which is the suggested title in 'title case'.
>> (and write in the Note field on the submission page that the misspelled words are actually names, which you have checked)
>>
>> Georgi Boshnakov
>>
>>
>>
>>
>> -----Original Message-----
>> From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Dudek Andrzej
>> Sent: 06 April 2018 07:13
>> Cc: r-package-devel at r-project.org
>> Subject: Re: [R-pkg-devel] Cannot submit package due to misspell note
>>
>> Ok, my fault sorry:
>>
>> This is the original message for current submission from prof. Ligges
>>
>> -----------------------------------------------------------------------------------------------------------------------------------
>>
>> Dear maintainer,
>>
>> package mdsOpt_0.3-1.tar.gz does not pass the incoming checks automatically, please see the pre-test at:
>> <https://win-builder.r-project.org/incoming_pretest/mdsOpt_0.3-1_20180404_090906/Windows/00check.log>
>> Status: 1 NOTE
>>
>> Current CRAN status: ERROR: 1, OK: 11
>> See: <https://CRAN.R-project.org/web/checks/check_results_mdsOpt.html>
>>
>> Please fix all problems and resubmit a fixed version via the webform.
>> If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>> If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
>>
>> More details are given in the directory:
>> <https://win-builder.r-project.org/incoming_pretest/mdsOpt_0.3-1_20180404_090906/>
>> The files will be removed after roughly 7 days.
>>
>>
>> Best regards,
>> CRAN teams' auto-check service
>>
>> -----------------------------------------------------------------------------------------------------------------------------------
>>
>> And following the first link:
>>
>>
>> * using log directory 'd:/RCompile/CRANincoming/R-devel/mdsOpt.Rcheck'
>> * using R version 3.5.0 alpha (2018-03-30 r74499)
>> * using platform: x86_64-w64-mingw32 (64-bit)
>> * using session charset: ISO8859-1
>> * checking for file 'mdsOpt/DESCRIPTION' ... OK
>> * this is package 'mdsOpt' version '0.3-1'
>> * package encoding: UTF-8
>> * checking CRAN incoming feasibility ... NOTE
>> Maintainer: 'Andrzej Dudek <andrzej.dudek at ue.wroc.pl>'
>>
>> Possibly mis-spelled words in DESCRIPTION:
>>    De (13:2)
>>    Diday (14:47)
>>    Groenen (12:13, 14:2)
>>    Leeuw (13:5)
>>    Mair (12:30, 13:16)
>>    Walesiak (15:2, 16:2)
>>    Winsberg (14:18)
>>
>> The Title field should be in title case, current version then in title case:
>> 'Searching for Optimal MDS Procedure for Metric and Interval-valued Symbolic Data'
>> 'Searching for Optimal MDS Procedure for Metric and Interval-Valued Symbolic Data'
>> * checking package namespace information ... OK
>> * checking package dependencies ... OK
>> * checking if this is a source package ... OK
>> * checking if there is a namespace ... OK
>> * checking for hidden files and directories ... OK
>> * checking for portable file names ... OK
>> * checking serialization versions ... OK
>> * checking whether package 'mdsOpt' can be installed ... OK
>> * checking installed package size ... OK
>> * checking package directory ... OK
>> * checking DESCRIPTION meta-information ... OK
>> * checking top-level files ... OK
>> * checking for left-over files ... OK
>> * checking index information ... OK
>> * checking package subdirectories ... OK
>> * checking R files for non-ASCII characters ... OK
>> * checking R files for syntax errors ... OK
>> * loading checks for arch 'i386'
>> ** checking whether the package can be loaded ... OK
>> ** checking whether the package can be loaded with stated dependencies ... OK
>> ** checking whether the package can be unloaded cleanly ... OK
>> ** checking whether the namespace can be loaded with stated dependencies ... OK
>> ** checking whether the namespace can be unloaded cleanly ... OK
>> ** checking loading without being on the library search path ... OK
>> ** checking use of S3 registration ... OK
>> * loading checks for arch 'x64'
>> ** checking whether the package can be loaded ... OK
>> ** checking whether the package can be loaded with stated dependencies ... OK
>> ** checking whether the package can be unloaded cleanly ... OK
>> ** checking whether the namespace can be loaded with stated dependencies ... OK
>> ** checking whether the namespace can be unloaded cleanly ... OK
>> ** checking loading without being on the library search path ... OK
>> ** checking use of S3 registration ... OK
>> * checking dependencies in R code ... OK
>> * checking S3 generic/method consistency ... OK
>> * checking replacement functions ... OK
>> * checking foreign function calls ... OK
>> * checking R code for possible problems ... [12s] OK
>> * checking Rd files ... OK
>> * checking Rd metadata ... OK
>> * checking Rd line widths ... OK
>> * checking Rd cross-references ... OK
>> * checking for missing documentation entries ... OK
>> * checking for code/documentation mismatches ... OK
>> * checking Rd \usage sections ... OK
>> * checking Rd contents ... OK
>> * checking for unstated dependencies in examples ... OK
>> * checking contents of 'data' directory ... OK
>> * checking data for non-ASCII characters ... OK
>> * checking data for ASCII and uncompressed saves ... OK
>> * checking examples ...
>> ** running examples for arch 'i386' ... [15s] OK
>> ** running examples for arch 'x64' ... [16s] OK
>> * checking for unstated dependencies in 'tests' ... OK
>> * checking tests ...
>> ** running tests for arch 'i386' ... [4s] OK
>>    Running 'testthat.R' [4s]
>> ** running tests for arch 'x64' ... [5s] OK
>>    Running 'testthat.R' [5s]
>> * checking PDF version of manual ... OK
>> * DONE
>> Status: 1 NOTE
>>
>>
>> So I assume the rejection is due to misspelling note (or maybe I cannot read this message properly :-))
>>
>> Still appreciate any help
>>
>> Best regards
>>
>> Andrzej
>>
>> -----Original Message-----
>> From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com]
>> Sent: Thursday, April 5, 2018 10:48 PM
>> To: Ben Bolker <bbolker at gmail.com>
>> Cc: Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl>; r-package-devel at r-project.org
>> Subject: Re: [R-pkg-devel] Cannot submit package due to misspell note
>>
>> On 05/04/2018 4:41 PM, Ben Bolker wrote:
>>> I think it was reasonable to post this to the list for discussion --
>>> it's good not to bother the CRAN maintainers unnecessarily. At this
>>> point it might be more productive to e-mail them (CRAN maintainers)
>>> for clarification:  e.g., explain your interpretation of what they're
>>> asking you to do and give them some options about how you might
>>> propose to meet their requirements. Otherwise you're asking a bunch of
>>> strangers on the internet to guess what the CRAN maintainers want you
>>> to do ...
>>>
>>
>> ... without showing us what they asked you to do.
>>
>> Duncan Murdoch
>>
>>> On Thu, Apr 5, 2018 at 4:30 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>>> On 05/04/2018 4:17 PM, Dudek Andrzej wrote:
>>>>>
>>>>> CRAN maintainers rejected the package two times already due to this
>>>>> note
>>>>>
>>>>> But for previous version I've been asked to add the references in
>>>>> description field:
>>>>>
>>>>>> Package Information:
>>>>>> Package: mdsOpt
>>>>>> Version: 0.1-4
>>>>>> Title: Searching for Optimal MDS Procedure for Metric Data
>>>>>> Author(s): Marek Walesiak <marek.walesiak at ue.wroc.pl>  Andrzej Dudek
>>>>>>       <andrzej.dudek at ue.wroc.pl>
>>>>>> Maintainer: Andrzej Dudek <andrzej.dudek at ue.wroc.pl>
>>>>>> Depends: smacof, clusterSim
>>>>>> Suggests: testthat
>>>>>> Description: Searching for optimal multidimensional scaling procedure for
>>>>>>       metric data.
>>>>>
>>>>>
>>>>> Thanks, can you please extend your description text.
>>>>>
>>>>> Can you provide some references in the form authors (year) <doi:...>
>>>>> or <arXiv:...> (no space after 'doi:' and 'arXiv:')?
>>>>>
>>>>> Best,
>>>>> Swetlana Herbrandt
>>>>>
>>>>> --------------------
>>>>>
>>>>> So at this point is some kind of vicious circle for me :-)  Maybe
>>>>> adding quotation mark is best idea (?)
>>>>>
>>>>
>>>> You didn't post the message for the current submission.  In my
>>>> experience, they won't reject a package due to false positives from
>>>> the spell checker, so I would guess that you have misinterpreted their rejection message.
>>>>
>>>> When I was checking incoming packages, I would generally ask
>>>> submitters to respect the requirement to use complete sentences; none
>>>> of your "sentences", e.g.
>>>>
>>>> Selecting the optimal multidimensional scaling (MDS) procedure for
>>>> metric data via metric MDS (ratio, interval, mspline) and nonmetric MDS (ordinal).
>>>>
>>>> and your reference list
>>>>
>>>> (Borg, I., Groenen, P.J.F., Mair, P. (2013) <doi:10.1007/978-3-642-31848-1>,
>>>>    De Leeuw, J., Mair, P. (2015) <doi:10.1002/9781118445112.stat06268.pub2>,
>>>>    Groenen, P.J.F., Winsberg, S., Rodriguez, O., Diday, E. (2006)
>>>> <doi:10.1016/j.csda.2006.04.003>, Walesiak, M. (2016)
>>>> <doi:10.15611/ekt.2016.2.01>,
>>>>    Walesiak, M. (2017) <doi:10.15611/ekt.2017.3.01>).
>>>>
>>>> are grammatically complete sentences, so I probably would have asked
>>>> you to reword things.
>>>>
>>>> Duncan Murdoch
>>>>
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From georgi.boshnakov at manchester.ac.uk  Sat Apr  7 01:29:10 2018
From: georgi.boshnakov at manchester.ac.uk (Georgi Boshnakov)
Date: Fri, 6 Apr 2018 23:29:10 +0000
Subject: [R-pkg-devel] Cannot submit package due to misspell note
In-Reply-To: <82dca56d-6619-7e9c-d69d-349ac28a1aa0@gmail.com>
References: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <CABghstSLQ44dOa2a-O-u5S+mt4nbLxeLbJ_V83cxtOdqXNoUvQ@mail.gmail.com>
 <DB7P192MB033144DD9D4B3425D25C695BC6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <1ac04243-dc1b-a8b5-86eb-9b3ffa598276@gmail.com>
 <CABghstQB18H9=1PuXKAugr2ZtqRc57ykyxMPTx5QoHinHqtjfg@mail.gmail.com>
 <6e503f1b-733e-af97-17dd-860aaab7fb52@gmail.com>
 <DB7P192MB0331C4BD96E30309F58D62DEC6BA0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <438D2EC9EAFE5946B2D5864670EA468E018F655ED6@MBXP01.ds.man.ac.uk>
 <DB7P192MB0331C6A2B7C215FC27765FEDC6BA0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <1757c4e2-4c46-9881-d532-781f4c9eaa81@gmail.com>,
 <82dca56d-6619-7e9c-d69d-349ac28a1aa0@gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F656065@MBXP01.ds.man.ac.uk>


Since this message appears also in R CMD check locally, maybe change in Duncan's text 'submission' to something like

The Title field should be in title case!  Your title is

    blah blah blah

This is not in title case, which would be

    Blah, Blah, Blah"

-
Georgi Boshnakov      


________________________________________
From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf of Duncan Murdoch [murdoch.duncan at gmail.com]
Sent: 07 April 2018 00:06
To: Ben Bolker; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Cannot submit package due to misspell note

On 06/04/2018 3:14 PM, Ben Bolker wrote:
>
>    FWIW, the first (many) times I read the warning
>
> "The Title field should be in title case, current version then in title
> case:"
>
>    I couldn't parse it at all. Brevity is wonderful, but I might submit a
> patch/wish for this warning to be changed to (something like): "The
> Title field should be in title case; the next line shows the current
> version, while the following line shows the recommended format" (or even
> "The Title field should be in title case! The next line ...")

I don't like the current wording either.  So I'd suggest putting
together something that people here agree is clear, then actually
submitting it as a patch.

What I don't like about your first one is that it is too complicated.
I'd rather have something like your second one, specifically

"The Title field should be in title case!  Your submission has

    blah blah blah

This is not in title case, which would be

    Blah, Blah, Blah"




>
>
>
> On 18-04-06 03:10 PM, Dudek Andrzej wrote:
>> Thanks a lot !!!
>>
>> I've been blind, I've read this message about twenty times and haven't noticed that letter v after - sign  is not capitalized so my thoughts went to spelling issues.  In fact after capitalizing this letter package has passed pre-tests. (Even without Bervin's solution which I plan to implement in next version)
>>
>> Thanks Everyone for Help !
>>
>> Andrzej
>>
>> -----Original Message-----
>> From: Georgi Boshnakov [mailto:georgi.boshnakov at manchester.ac.uk]
>> Sent: Friday, April 6, 2018 8:32 AM
>> To: Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl>
>> Cc: r-package-devel at r-project.org
>> Subject: RE: [R-pkg-devel] Cannot submit package due to misspell note
>>
>> In fact, the reason for rejection is just after the 'misspelled' words:
>>
>>> The Title field should be in title case, current version then in title case:
>> '>Searching for Optimal MDS Procedure for Metric and Interval-valued Symbolic Data'
>>> 'Searching for Optimal MDS Procedure for Metric and Interval-Valued Symbolic Data'
>>
>> Just copy the second line, which is the suggested title in 'title case'.
>> (and write in the Note field on the submission page that the misspelled words are actually names, which you have checked)
>>
>> Georgi Boshnakov
>>
>>
>>
>>
>> -----Original Message-----
>> From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Dudek Andrzej
>> Sent: 06 April 2018 07:13
>> Cc: r-package-devel at r-project.org
>> Subject: Re: [R-pkg-devel] Cannot submit package due to misspell note
>>
>> Ok, my fault sorry:
>>
>> This is the original message for current submission from prof. Ligges
>>
>> -----------------------------------------------------------------------------------------------------------------------------------
>>
>> Dear maintainer,
>>
>> package mdsOpt_0.3-1.tar.gz does not pass the incoming checks automatically, please see the pre-test at:
>> <https://win-builder.r-project.org/incoming_pretest/mdsOpt_0.3-1_20180404_090906/Windows/00check.log>
>> Status: 1 NOTE
>>
>> Current CRAN status: ERROR: 1, OK: 11
>> See: <https://CRAN.R-project.org/web/checks/check_results_mdsOpt.html>
>>
>> Please fix all problems and resubmit a fixed version via the webform.
>> If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>> If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
>>
>> More details are given in the directory:
>> <https://win-builder.r-project.org/incoming_pretest/mdsOpt_0.3-1_20180404_090906/>
>> The files will be removed after roughly 7 days.
>>
>>
>> Best regards,
>> CRAN teams' auto-check service
>>
>> -----------------------------------------------------------------------------------------------------------------------------------
>>
>> And following the first link:
>>
>>
>> * using log directory 'd:/RCompile/CRANincoming/R-devel/mdsOpt.Rcheck'
>> * using R version 3.5.0 alpha (2018-03-30 r74499)
>> * using platform: x86_64-w64-mingw32 (64-bit)
>> * using session charset: ISO8859-1
>> * checking for file 'mdsOpt/DESCRIPTION' ... OK
>> * this is package 'mdsOpt' version '0.3-1'
>> * package encoding: UTF-8
>> * checking CRAN incoming feasibility ... NOTE
>> Maintainer: 'Andrzej Dudek <andrzej.dudek at ue.wroc.pl>'
>>
>> Possibly mis-spelled words in DESCRIPTION:
>>    De (13:2)
>>    Diday (14:47)
>>    Groenen (12:13, 14:2)
>>    Leeuw (13:5)
>>    Mair (12:30, 13:16)
>>    Walesiak (15:2, 16:2)
>>    Winsberg (14:18)
>>
>> The Title field should be in title case, current version then in title case:
>> 'Searching for Optimal MDS Procedure for Metric and Interval-valued Symbolic Data'
>> 'Searching for Optimal MDS Procedure for Metric and Interval-Valued Symbolic Data'
>> * checking package namespace information ... OK
>> * checking package dependencies ... OK
>> * checking if this is a source package ... OK
>> * checking if there is a namespace ... OK
>> * checking for hidden files and directories ... OK
>> * checking for portable file names ... OK
>> * checking serialization versions ... OK
>> * checking whether package 'mdsOpt' can be installed ... OK
>> * checking installed package size ... OK
>> * checking package directory ... OK
>> * checking DESCRIPTION meta-information ... OK
>> * checking top-level files ... OK
>> * checking for left-over files ... OK
>> * checking index information ... OK
>> * checking package subdirectories ... OK
>> * checking R files for non-ASCII characters ... OK
>> * checking R files for syntax errors ... OK
>> * loading checks for arch 'i386'
>> ** checking whether the package can be loaded ... OK
>> ** checking whether the package can be loaded with stated dependencies ... OK
>> ** checking whether the package can be unloaded cleanly ... OK
>> ** checking whether the namespace can be loaded with stated dependencies ... OK
>> ** checking whether the namespace can be unloaded cleanly ... OK
>> ** checking loading without being on the library search path ... OK
>> ** checking use of S3 registration ... OK
>> * loading checks for arch 'x64'
>> ** checking whether the package can be loaded ... OK
>> ** checking whether the package can be loaded with stated dependencies ... OK
>> ** checking whether the package can be unloaded cleanly ... OK
>> ** checking whether the namespace can be loaded with stated dependencies ... OK
>> ** checking whether the namespace can be unloaded cleanly ... OK
>> ** checking loading without being on the library search path ... OK
>> ** checking use of S3 registration ... OK
>> * checking dependencies in R code ... OK
>> * checking S3 generic/method consistency ... OK
>> * checking replacement functions ... OK
>> * checking foreign function calls ... OK
>> * checking R code for possible problems ... [12s] OK
>> * checking Rd files ... OK
>> * checking Rd metadata ... OK
>> * checking Rd line widths ... OK
>> * checking Rd cross-references ... OK
>> * checking for missing documentation entries ... OK
>> * checking for code/documentation mismatches ... OK
>> * checking Rd \usage sections ... OK
>> * checking Rd contents ... OK
>> * checking for unstated dependencies in examples ... OK
>> * checking contents of 'data' directory ... OK
>> * checking data for non-ASCII characters ... OK
>> * checking data for ASCII and uncompressed saves ... OK
>> * checking examples ...
>> ** running examples for arch 'i386' ... [15s] OK
>> ** running examples for arch 'x64' ... [16s] OK
>> * checking for unstated dependencies in 'tests' ... OK
>> * checking tests ...
>> ** running tests for arch 'i386' ... [4s] OK
>>    Running 'testthat.R' [4s]
>> ** running tests for arch 'x64' ... [5s] OK
>>    Running 'testthat.R' [5s]
>> * checking PDF version of manual ... OK
>> * DONE
>> Status: 1 NOTE
>>
>>
>> So I assume the rejection is due to misspelling note (or maybe I cannot read this message properly :-))
>>
>> Still appreciate any help
>>
>> Best regards
>>
>> Andrzej
>>
>> -----Original Message-----
>> From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com]
>> Sent: Thursday, April 5, 2018 10:48 PM
>> To: Ben Bolker <bbolker at gmail.com>
>> Cc: Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl>; r-package-devel at r-project.org
>> Subject: Re: [R-pkg-devel] Cannot submit package due to misspell note
>>
>> On 05/04/2018 4:41 PM, Ben Bolker wrote:
>>> I think it was reasonable to post this to the list for discussion --
>>> it's good not to bother the CRAN maintainers unnecessarily. At this
>>> point it might be more productive to e-mail them (CRAN maintainers)
>>> for clarification:  e.g., explain your interpretation of what they're
>>> asking you to do and give them some options about how you might
>>> propose to meet their requirements. Otherwise you're asking a bunch of
>>> strangers on the internet to guess what the CRAN maintainers want you
>>> to do ...
>>>
>>
>> ... without showing us what they asked you to do.
>>
>> Duncan Murdoch
>>
>>> On Thu, Apr 5, 2018 at 4:30 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>>> On 05/04/2018 4:17 PM, Dudek Andrzej wrote:
>>>>>
>>>>> CRAN maintainers rejected the package two times already due to this
>>>>> note
>>>>>
>>>>> But for previous version I've been asked to add the references in
>>>>> description field:
>>>>>
>>>>>> Package Information:
>>>>>> Package: mdsOpt
>>>>>> Version: 0.1-4
>>>>>> Title: Searching for Optimal MDS Procedure for Metric Data
>>>>>> Author(s): Marek Walesiak <marek.walesiak at ue.wroc.pl>  Andrzej Dudek
>>>>>>       <andrzej.dudek at ue.wroc.pl>
>>>>>> Maintainer: Andrzej Dudek <andrzej.dudek at ue.wroc.pl>
>>>>>> Depends: smacof, clusterSim
>>>>>> Suggests: testthat
>>>>>> Description: Searching for optimal multidimensional scaling procedure for
>>>>>>       metric data.
>>>>>
>>>>>
>>>>> Thanks, can you please extend your description text.
>>>>>
>>>>> Can you provide some references in the form authors (year) <doi:...>
>>>>> or <arXiv:...> (no space after 'doi:' and 'arXiv:')?
>>>>>
>>>>> Best,
>>>>> Swetlana Herbrandt
>>>>>
>>>>> --------------------
>>>>>
>>>>> So at this point is some kind of vicious circle for me :-)  Maybe
>>>>> adding quotation mark is best idea (?)
>>>>>
>>>>
>>>> You didn't post the message for the current submission.  In my
>>>> experience, they won't reject a package due to false positives from
>>>> the spell checker, so I would guess that you have misinterpreted their rejection message.
>>>>
>>>> When I was checking incoming packages, I would generally ask
>>>> submitters to respect the requirement to use complete sentences; none
>>>> of your "sentences", e.g.
>>>>
>>>> Selecting the optimal multidimensional scaling (MDS) procedure for
>>>> metric data via metric MDS (ratio, interval, mspline) and nonmetric MDS (ordinal).
>>>>
>>>> and your reference list
>>>>
>>>> (Borg, I., Groenen, P.J.F., Mair, P. (2013) <doi:10.1007/978-3-642-31848-1>,
>>>>    De Leeuw, J., Mair, P. (2015) <doi:10.1002/9781118445112.stat06268.pub2>,
>>>>    Groenen, P.J.F., Winsberg, S., Rodriguez, O., Diday, E. (2006)
>>>> <doi:10.1016/j.csda.2006.04.003>, Walesiak, M. (2016)
>>>> <doi:10.15611/ekt.2016.2.01>,
>>>>    Walesiak, M. (2017) <doi:10.15611/ekt.2017.3.01>).
>>>>
>>>> are grammatically complete sentences, so I probably would have asked
>>>> you to reword things.
>>>>
>>>> Duncan Murdoch
>>>>
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch.duncan at gmail.com  Sat Apr  7 02:06:05 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Fri, 6 Apr 2018 20:06:05 -0400
Subject: [R-pkg-devel] Cannot submit package due to misspell note
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F656065@MBXP01.ds.man.ac.uk>
References: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <CABghstSLQ44dOa2a-O-u5S+mt4nbLxeLbJ_V83cxtOdqXNoUvQ@mail.gmail.com>
 <DB7P192MB033144DD9D4B3425D25C695BC6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <1ac04243-dc1b-a8b5-86eb-9b3ffa598276@gmail.com>
 <CABghstQB18H9=1PuXKAugr2ZtqRc57ykyxMPTx5QoHinHqtjfg@mail.gmail.com>
 <6e503f1b-733e-af97-17dd-860aaab7fb52@gmail.com>
 <DB7P192MB0331C4BD96E30309F58D62DEC6BA0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <438D2EC9EAFE5946B2D5864670EA468E018F655ED6@MBXP01.ds.man.ac.uk>
 <DB7P192MB0331C6A2B7C215FC27765FEDC6BA0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <1757c4e2-4c46-9881-d532-781f4c9eaa81@gmail.com>
 <82dca56d-6619-7e9c-d69d-349ac28a1aa0@gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F656065@MBXP01.ds.man.ac.uk>
Message-ID: <165beaf6-a9f4-42fd-3a71-40af42770d15@gmail.com>

On 06/04/2018 7:29 PM, Georgi Boshnakov wrote:
> 
> Since this message appears also in R CMD check locally, maybe change in Duncan's text 'submission' to something like
> 
> The Title field should be in title case!  Your title is
> 
>      blah blah blah
> 
> This is not in title case, which would be
> 
>      Blah, Blah, Blah"

Good point, I agree.

Duncan Murdoch
> 
> -
> Georgi Boshnakov
> 
> 
> ________________________________________
> From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf of Duncan Murdoch [murdoch.duncan at gmail.com]
> Sent: 07 April 2018 00:06
> To: Ben Bolker; r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Cannot submit package due to misspell note
> 
> On 06/04/2018 3:14 PM, Ben Bolker wrote:
>>
>>     FWIW, the first (many) times I read the warning
>>
>> "The Title field should be in title case, current version then in title
>> case:"
>>
>>     I couldn't parse it at all. Brevity is wonderful, but I might submit a
>> patch/wish for this warning to be changed to (something like): "The
>> Title field should be in title case; the next line shows the current
>> version, while the following line shows the recommended format" (or even
>> "The Title field should be in title case! The next line ...")
> 
> I don't like the current wording either.  So I'd suggest putting
> together something that people here agree is clear, then actually
> submitting it as a patch.
> 
> What I don't like about your first one is that it is too complicated.
> I'd rather have something like your second one, specifically
> 
> "The Title field should be in title case!  Your submission has
> 
>      blah blah blah
> 
> This is not in title case, which would be
> 
>      Blah, Blah, Blah"
> 
> 
> 
> 
>>
>>
>>
>> On 18-04-06 03:10 PM, Dudek Andrzej wrote:
>>> Thanks a lot !!!
>>>
>>> I've been blind, I've read this message about twenty times and haven't noticed that letter v after - sign  is not capitalized so my thoughts went to spelling issues.  In fact after capitalizing this letter package has passed pre-tests. (Even without Bervin's solution which I plan to implement in next version)
>>>
>>> Thanks Everyone for Help !
>>>
>>> Andrzej
>>>
>>> -----Original Message-----
>>> From: Georgi Boshnakov [mailto:georgi.boshnakov at manchester.ac.uk]
>>> Sent: Friday, April 6, 2018 8:32 AM
>>> To: Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl>
>>> Cc: r-package-devel at r-project.org
>>> Subject: RE: [R-pkg-devel] Cannot submit package due to misspell note
>>>
>>> In fact, the reason for rejection is just after the 'misspelled' words:
>>>
>>>> The Title field should be in title case, current version then in title case:
>>> '>Searching for Optimal MDS Procedure for Metric and Interval-valued Symbolic Data'
>>>> 'Searching for Optimal MDS Procedure for Metric and Interval-Valued Symbolic Data'
>>>
>>> Just copy the second line, which is the suggested title in 'title case'.
>>> (and write in the Note field on the submission page that the misspelled words are actually names, which you have checked)
>>>
>>> Georgi Boshnakov
>>>
>>>
>>>
>>>
>>> -----Original Message-----
>>> From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Dudek Andrzej
>>> Sent: 06 April 2018 07:13
>>> Cc: r-package-devel at r-project.org
>>> Subject: Re: [R-pkg-devel] Cannot submit package due to misspell note
>>>
>>> Ok, my fault sorry:
>>>
>>> This is the original message for current submission from prof. Ligges
>>>
>>> -----------------------------------------------------------------------------------------------------------------------------------
>>>
>>> Dear maintainer,
>>>
>>> package mdsOpt_0.3-1.tar.gz does not pass the incoming checks automatically, please see the pre-test at:
>>> <https://win-builder.r-project.org/incoming_pretest/mdsOpt_0.3-1_20180404_090906/Windows/00check.log>
>>> Status: 1 NOTE
>>>
>>> Current CRAN status: ERROR: 1, OK: 11
>>> See: <https://CRAN.R-project.org/web/checks/check_results_mdsOpt.html>
>>>
>>> Please fix all problems and resubmit a fixed version via the webform.
>>> If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
>>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>> If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
>>>
>>> More details are given in the directory:
>>> <https://win-builder.r-project.org/incoming_pretest/mdsOpt_0.3-1_20180404_090906/>
>>> The files will be removed after roughly 7 days.
>>>
>>>
>>> Best regards,
>>> CRAN teams' auto-check service
>>>
>>> -----------------------------------------------------------------------------------------------------------------------------------
>>>
>>> And following the first link:
>>>
>>>
>>> * using log directory 'd:/RCompile/CRANincoming/R-devel/mdsOpt.Rcheck'
>>> * using R version 3.5.0 alpha (2018-03-30 r74499)
>>> * using platform: x86_64-w64-mingw32 (64-bit)
>>> * using session charset: ISO8859-1
>>> * checking for file 'mdsOpt/DESCRIPTION' ... OK
>>> * this is package 'mdsOpt' version '0.3-1'
>>> * package encoding: UTF-8
>>> * checking CRAN incoming feasibility ... NOTE
>>> Maintainer: 'Andrzej Dudek <andrzej.dudek at ue.wroc.pl>'
>>>
>>> Possibly mis-spelled words in DESCRIPTION:
>>>     De (13:2)
>>>     Diday (14:47)
>>>     Groenen (12:13, 14:2)
>>>     Leeuw (13:5)
>>>     Mair (12:30, 13:16)
>>>     Walesiak (15:2, 16:2)
>>>     Winsberg (14:18)
>>>
>>> The Title field should be in title case, current version then in title case:
>>> 'Searching for Optimal MDS Procedure for Metric and Interval-valued Symbolic Data'
>>> 'Searching for Optimal MDS Procedure for Metric and Interval-Valued Symbolic Data'
>>> * checking package namespace information ... OK
>>> * checking package dependencies ... OK
>>> * checking if this is a source package ... OK
>>> * checking if there is a namespace ... OK
>>> * checking for hidden files and directories ... OK
>>> * checking for portable file names ... OK
>>> * checking serialization versions ... OK
>>> * checking whether package 'mdsOpt' can be installed ... OK
>>> * checking installed package size ... OK
>>> * checking package directory ... OK
>>> * checking DESCRIPTION meta-information ... OK
>>> * checking top-level files ... OK
>>> * checking for left-over files ... OK
>>> * checking index information ... OK
>>> * checking package subdirectories ... OK
>>> * checking R files for non-ASCII characters ... OK
>>> * checking R files for syntax errors ... OK
>>> * loading checks for arch 'i386'
>>> ** checking whether the package can be loaded ... OK
>>> ** checking whether the package can be loaded with stated dependencies ... OK
>>> ** checking whether the package can be unloaded cleanly ... OK
>>> ** checking whether the namespace can be loaded with stated dependencies ... OK
>>> ** checking whether the namespace can be unloaded cleanly ... OK
>>> ** checking loading without being on the library search path ... OK
>>> ** checking use of S3 registration ... OK
>>> * loading checks for arch 'x64'
>>> ** checking whether the package can be loaded ... OK
>>> ** checking whether the package can be loaded with stated dependencies ... OK
>>> ** checking whether the package can be unloaded cleanly ... OK
>>> ** checking whether the namespace can be loaded with stated dependencies ... OK
>>> ** checking whether the namespace can be unloaded cleanly ... OK
>>> ** checking loading without being on the library search path ... OK
>>> ** checking use of S3 registration ... OK
>>> * checking dependencies in R code ... OK
>>> * checking S3 generic/method consistency ... OK
>>> * checking replacement functions ... OK
>>> * checking foreign function calls ... OK
>>> * checking R code for possible problems ... [12s] OK
>>> * checking Rd files ... OK
>>> * checking Rd metadata ... OK
>>> * checking Rd line widths ... OK
>>> * checking Rd cross-references ... OK
>>> * checking for missing documentation entries ... OK
>>> * checking for code/documentation mismatches ... OK
>>> * checking Rd \usage sections ... OK
>>> * checking Rd contents ... OK
>>> * checking for unstated dependencies in examples ... OK
>>> * checking contents of 'data' directory ... OK
>>> * checking data for non-ASCII characters ... OK
>>> * checking data for ASCII and uncompressed saves ... OK
>>> * checking examples ...
>>> ** running examples for arch 'i386' ... [15s] OK
>>> ** running examples for arch 'x64' ... [16s] OK
>>> * checking for unstated dependencies in 'tests' ... OK
>>> * checking tests ...
>>> ** running tests for arch 'i386' ... [4s] OK
>>>     Running 'testthat.R' [4s]
>>> ** running tests for arch 'x64' ... [5s] OK
>>>     Running 'testthat.R' [5s]
>>> * checking PDF version of manual ... OK
>>> * DONE
>>> Status: 1 NOTE
>>>
>>>
>>> So I assume the rejection is due to misspelling note (or maybe I cannot read this message properly :-))
>>>
>>> Still appreciate any help
>>>
>>> Best regards
>>>
>>> Andrzej
>>>
>>> -----Original Message-----
>>> From: Duncan Murdoch [mailto:murdoch.duncan at gmail.com]
>>> Sent: Thursday, April 5, 2018 10:48 PM
>>> To: Ben Bolker <bbolker at gmail.com>
>>> Cc: Dudek Andrzej <Andrzej.Dudek at ue.wroc.pl>; r-package-devel at r-project.org
>>> Subject: Re: [R-pkg-devel] Cannot submit package due to misspell note
>>>
>>> On 05/04/2018 4:41 PM, Ben Bolker wrote:
>>>> I think it was reasonable to post this to the list for discussion --
>>>> it's good not to bother the CRAN maintainers unnecessarily. At this
>>>> point it might be more productive to e-mail them (CRAN maintainers)
>>>> for clarification:  e.g., explain your interpretation of what they're
>>>> asking you to do and give them some options about how you might
>>>> propose to meet their requirements. Otherwise you're asking a bunch of
>>>> strangers on the internet to guess what the CRAN maintainers want you
>>>> to do ...
>>>>
>>>
>>> ... without showing us what they asked you to do.
>>>
>>> Duncan Murdoch
>>>
>>>> On Thu, Apr 5, 2018 at 4:30 PM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>>>> On 05/04/2018 4:17 PM, Dudek Andrzej wrote:
>>>>>>
>>>>>> CRAN maintainers rejected the package two times already due to this
>>>>>> note
>>>>>>
>>>>>> But for previous version I've been asked to add the references in
>>>>>> description field:
>>>>>>
>>>>>>> Package Information:
>>>>>>> Package: mdsOpt
>>>>>>> Version: 0.1-4
>>>>>>> Title: Searching for Optimal MDS Procedure for Metric Data
>>>>>>> Author(s): Marek Walesiak <marek.walesiak at ue.wroc.pl>  Andrzej Dudek
>>>>>>>        <andrzej.dudek at ue.wroc.pl>
>>>>>>> Maintainer: Andrzej Dudek <andrzej.dudek at ue.wroc.pl>
>>>>>>> Depends: smacof, clusterSim
>>>>>>> Suggests: testthat
>>>>>>> Description: Searching for optimal multidimensional scaling procedure for
>>>>>>>        metric data.
>>>>>>
>>>>>>
>>>>>> Thanks, can you please extend your description text.
>>>>>>
>>>>>> Can you provide some references in the form authors (year) <doi:...>
>>>>>> or <arXiv:...> (no space after 'doi:' and 'arXiv:')?
>>>>>>
>>>>>> Best,
>>>>>> Swetlana Herbrandt
>>>>>>
>>>>>> --------------------
>>>>>>
>>>>>> So at this point is some kind of vicious circle for me :-)  Maybe
>>>>>> adding quotation mark is best idea (?)
>>>>>>
>>>>>
>>>>> You didn't post the message for the current submission.  In my
>>>>> experience, they won't reject a package due to false positives from
>>>>> the spell checker, so I would guess that you have misinterpreted their rejection message.
>>>>>
>>>>> When I was checking incoming packages, I would generally ask
>>>>> submitters to respect the requirement to use complete sentences; none
>>>>> of your "sentences", e.g.
>>>>>
>>>>> Selecting the optimal multidimensional scaling (MDS) procedure for
>>>>> metric data via metric MDS (ratio, interval, mspline) and nonmetric MDS (ordinal).
>>>>>
>>>>> and your reference list
>>>>>
>>>>> (Borg, I., Groenen, P.J.F., Mair, P. (2013) <doi:10.1007/978-3-642-31848-1>,
>>>>>     De Leeuw, J., Mair, P. (2015) <doi:10.1002/9781118445112.stat06268.pub2>,
>>>>>     Groenen, P.J.F., Winsberg, S., Rodriguez, O., Diday, E. (2006)
>>>>> <doi:10.1016/j.csda.2006.04.003>, Walesiak, M. (2016)
>>>>> <doi:10.15611/ekt.2016.2.01>,
>>>>>     Walesiak, M. (2017) <doi:10.15611/ekt.2017.3.01>).
>>>>>
>>>>> are grammatically complete sentences, so I probably would have asked
>>>>> you to reword things.
>>>>>
>>>>> Duncan Murdoch
>>>>>
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From david.c.sterratt at ed.ac.uk  Sat Apr  7 11:00:36 2018
From: david.c.sterratt at ed.ac.uk (David Sterratt)
Date: Sat, 7 Apr 2018 10:00:36 +0100
Subject: [R-pkg-devel] Cannot submit package due to misspell note
In-Reply-To: <165beaf6-a9f4-42fd-3a71-40af42770d15@gmail.com>
References: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <CABghstSLQ44dOa2a-O-u5S+mt4nbLxeLbJ_V83cxtOdqXNoUvQ@mail.gmail.com>
 <DB7P192MB033144DD9D4B3425D25C695BC6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <1ac04243-dc1b-a8b5-86eb-9b3ffa598276@gmail.com>
 <CABghstQB18H9=1PuXKAugr2ZtqRc57ykyxMPTx5QoHinHqtjfg@mail.gmail.com>
 <6e503f1b-733e-af97-17dd-860aaab7fb52@gmail.com>
 <DB7P192MB0331C4BD96E30309F58D62DEC6BA0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <438D2EC9EAFE5946B2D5864670EA468E018F655ED6@MBXP01.ds.man.ac.uk>
 <DB7P192MB0331C6A2B7C215FC27765FEDC6BA0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <1757c4e2-4c46-9881-d532-781f4c9eaa81@gmail.com>
 <82dca56d-6619-7e9c-d69d-349ac28a1aa0@gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F656065@MBXP01.ds.man.ac.uk>
 <165beaf6-a9f4-42fd-3a71-40af42770d15@gmail.com>
Message-ID: <66dd0b17-fd15-6857-10b5-edbf0390c74c@ed.ac.uk>

|On the subject of spell-checking, to avoid false positives when I'm 
checking the package, in the directory above the package directory I 
create a file called .spell_ignore with one word per line, and then run|:
|||devtools::spell_check("pkg/", dict="en_GB", 
ignore=read.table(".spell_ignore", stringsAsFactors=FALSE)$V1)
All the false positives still come through in the CRAN check, but it 
makes checking easier for me.

David.
|

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20180407/ab478349/attachment.ksh>

From kasperdanielhansen at gmail.com  Tue Apr 10 11:45:11 2018
From: kasperdanielhansen at gmail.com (Kasper Daniel Hansen)
Date: Tue, 10 Apr 2018 11:45:11 +0200
Subject: [R-pkg-devel] GPL + other licence
In-Reply-To: <eyuk1tkup2j.fsf@bonnington.inf.ed.ac.uk>
References: <eyuk1tkup2j.fsf@bonnington.inf.ed.ac.uk>
Message-ID: <CAC2h7uuV6ghoiQ=YLLL_nR3GN6ty4YYJics_avrq85oa_+u8_g@mail.gmail.com>

There are 3 solutions.  (1) You (get permission) to change the library to
GPL.  (2) You get permission to change the license of the R code to
whatever license the library is released under.  (3) you split the package.

You have investigated (1) and it does not work.  I would suggest thinking
about (2) provided the license of the library is decent.  This is what we
did with Rgraphviz some years ago; Graphviz itself is licensed under the
Eclipse public license and there was no way I could get a company to change
the license of that code.

I would do whatever I can to avoid splitting the package.

Best,
Kasper

On Fri, Apr 6, 2018 at 8:44 PM, David C Sterratt <david.c.sterratt at ed.ac.uk>
wrote:

> Dear all,
>
> I'd appreciate help with a licence conundrum I have with the geometry
> package (https://davidcsterratt.github.io/geometry/) that I maintain.
>
> The geometry package contains some functions (e.g. convhulln(),
> delaunayn()) that wrap the Qhull library (http://www.qhull.org), which
> has its own, non-GPL, licence. The geometry package includes this source
> code, and wraps it in C files that have GPL licence headers.
>
> The geometry package also has functions that are not derived from Qhull
> code and which are licensed under GPL, including a number of functions
> that are ports of the Matlab distmesh package, and some other useful
> functions to do with triangulation and coordinate systems (e.g.
> tsearch() and cart2bary()).
>
> I inherited this situation when I took over maintaining the package 8
> years ago, though I have added functions to both Qhull-derived and GPL
> categories.
>
> In October last year I submitted the latest version of the geometry
> package, which adds quite a bit of useful functionality:
> https://github.com/davidcsterratt/geometry/blob/master/pkg/NEWS
>
> I received the following response from the CRAN maintainers:
>
>   For the license. It is CRAN policy that a package has to have a single
>   license. Can you manage to convince all copyright hoders (e.g. of
>   Qhull) to relicense under GPL?
>
> I tried persuading the author of Qhull. He replied:
>
>   There's only one license and that's the one included with the code
>   (COPYING.txt). Several years ago, I tried to clarify the license with
>   the Univ. of Minn. but had no success. So I think the best approach is
>   to keep the original license as is. It has not been an issue so far.
>
> At the same time as I wrote to the Qhull maintainer, I wrote to the CRAN
> maintainers:
>
>   I have written to the Qhull maintainer, but I doubt he will want to
>   change the license, since Qhull is used in proprietary software such
>   as MATLAB. Assuming this is the case, we'll have to create a new
>   package - I would need help with managing the change for dependent
>   packages.
>
> The CRAN maintainers replied:
>
>   Please try to find out how this can work.
>
> In principle I could create a package containing only the functions
> derived from Qhull (but still with GPL headers in the wrapper C files,
> see e.g.,
> https://github.com/davidcsterratt/geometry/blob/
> master/pkg/src/Rconvhulln.c
> But wouldn't this package still have to have two licenses, due to the
> GPL headers?
>
> I don't want to start on any package splitting without having a plan
> agreed that I know will be OK for CRAN. It would be quite a bit of work,
> as there are a number of packages that depend on geometry, so I would
> have to check all the revdeps for functions that they call in the
> geometry package. I would have to then perhaps write wrapper functions
> in the geometry package to make sure any functions moved to a new
> package still worked when called from revdeps.
>
> I know the CRAN maintainers are busy, so any help from the list would be
> much appreciated.
>
> Best wishes,
>
> David.
>
> --
> David C Sterratt, Senior Research Associate
> Institute for Adaptive and Neural Computation, School of Informatics
> University of Edinburgh, 10 Crichton Street, Edinburgh EH8 9AB, Scotland,
> UK
> http://homepages.inf.ed.ac.uk/sterratt - tel: +44 131 651 1739
>
> --
> The University of Edinburgh is a charitable body, registered in
> Scotland, with registration number SC005336.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From rampaletienne at gmail.com  Tue Apr 10 13:19:06 2018
From: rampaletienne at gmail.com (Rampal S. Etienne)
Date: Tue, 10 Apr 2018 13:19:06 +0200
Subject: [R-pkg-devel] registering native routines
Message-ID: <01d017ac-8e2b-4d76-9f64-19592d9e9218@gmail.com>

Dear all,

I am using Fortran code with the deSolve package in my package called
"DDD". When checking my package I get the message:

checking compiled code ... NOTE
File 'DDD/libs/x64/DDD.dll':
  Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'

It is good practice to register native routines and to disable symbol search.


Although it is "just" a note, I would like to solve this, but after
quite some googling, I cannot find a solution.

I have tried

tools::package_native_routine_registration_skeleton('.')
but this produces nothing, or only an empty file when I specify the
argument con. I put the following R-init_DDD.c in the src folder and
useDynLib("DDD",.registration = TRUE) in the namespace file. #include
<R.h> #include <Rinternals.h> #include <stdlib.h> // for NULL #include
<R_ext/Rdynload.h> /* .Fortran calls */ extern void
F77_NAME(fill1d)(double *vec, int *DIMP, double *parms, int *II); extern
void F77_NAME(initmod)(void (*steadyparms)(int *, double *)); extern
void F77_NAME(runmod)(int *neq, double *t, double *Conc, double *dConc,
double *yout, int *ip); static const R_FortranMethodDef FortranEntries[]
= { {"fill1d", (DL_FUNC) &F77_NAME(fill1d), 4}, {"initmod", (DL_FUNC)
&F77_NAME(initmod), 1}, {"runmod", (DL_FUNC) &F77_NAME(runmod), 6},
{NULL, NULL, 0} }; void R_init_DDD(DllInfo *dll) {
R_registerRoutines(dll, NULL, NULL, FortranEntries, NULL);
R_useDynamicSymbols(dll, FALSE); }

Note that I only get the message for x64, but I don't get it for i386,
which I did before. So somehow, this is only an issue on 64-bit? How do
I fix this?

Regards,

Rampal

	[[alternative HTML version deleted]]


From thomas.petzoldt at tu-dresden.de  Tue Apr 10 14:17:53 2018
From: thomas.petzoldt at tu-dresden.de (Thomas Petzoldt)
Date: Tue, 10 Apr 2018 14:17:53 +0200
Subject: [R-pkg-devel] registering native routines
In-Reply-To: <01d017ac-8e2b-4d76-9f64-19592d9e9218@gmail.com>
References: <01d017ac-8e2b-4d76-9f64-19592d9e9218@gmail.com>
Message-ID: <bd2465f2-ea39-d1f6-dfe7-6895edc6066e@tu-dresden.de>

Hi,

I assume you followed "Writing R Extension" and the examples given in 
package deSolve (and maybe some other packages).

Am I right that this fixed the i386 notes, but not for x64?

Here I conclude that you tested it on Windows. This is relevant, because 
I remember a recent discussion (maybe on this mailing list), that the 
"register native routines" check can sometimes produce false positives 
on Windows.

Would it be possible for you, to check your package on a recent Linux 
system?


Thomas Petzoldt


Am 10.04.2018 um 13:19 schrieb Rampal S. Etienne:
> Dear all,
> 
> I am using Fortran code with the deSolve package in my package called
> "DDD". When checking my package I get the message:
> 
> checking compiled code ... NOTE
> File 'DDD/libs/x64/DDD.dll':
>    Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
> 
> It is good practice to register native routines and to disable symbol search.
> 
> 
> Although it is "just" a note, I would like to solve this, but after
> quite some googling, I cannot find a solution.
> 
> I have tried
> 
> tools::package_native_routine_registration_skeleton('.')
> but this produces nothing, or only an empty file when I specify the
> argument con. I put the following R-init_DDD.c in the src folder and
> useDynLib("DDD",.registration = TRUE) in the namespace file. #include
> <R.h> #include <Rinternals.h> #include <stdlib.h> // for NULL #include
> <R_ext/Rdynload.h> /* .Fortran calls */ extern void
> F77_NAME(fill1d)(double *vec, int *DIMP, double *parms, int *II); extern
> void F77_NAME(initmod)(void (*steadyparms)(int *, double *)); extern
> void F77_NAME(runmod)(int *neq, double *t, double *Conc, double *dConc,
> double *yout, int *ip); static const R_FortranMethodDef FortranEntries[]
> = { {"fill1d", (DL_FUNC) &F77_NAME(fill1d), 4}, {"initmod", (DL_FUNC)
> &F77_NAME(initmod), 1}, {"runmod", (DL_FUNC) &F77_NAME(runmod), 6},
> {NULL, NULL, 0} }; void R_init_DDD(DllInfo *dll) {
> R_registerRoutines(dll, NULL, NULL, FortranEntries, NULL);
> R_useDynamicSymbols(dll, FALSE); }
> 
> Note that I only get the message for x64, but I don't get it for i386,
> which I did before. So somehow, this is only an issue on 64-bit? How do
> I fix this?
> 
> Regards,
> 
> Rampal


From brian at braverock.com  Tue Apr 10 15:14:29 2018
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 10 Apr 2018 08:14:29 -0500
Subject: [R-pkg-devel] GPL + other licence
In-Reply-To: <CAC2h7uuV6ghoiQ=YLLL_nR3GN6ty4YYJics_avrq85oa_+u8_g@mail.gmail.com>
References: <eyuk1tkup2j.fsf@bonnington.inf.ed.ac.uk>
 <CAC2h7uuV6ghoiQ=YLLL_nR3GN6ty4YYJics_avrq85oa_+u8_g@mail.gmail.com>
Message-ID: <1523366069.17100.287.camel@braverock.com>

I'm not a lawyer, but I don't see why the entire package can't be
released under GPL, while also respecting the QHull license for the
QHull code and the derived QHull portions.

Many existing R packages released under GPL, and R itself, include BSD
and MIT licensed code.

The QHull license is a very permissive license, basically BSD or MIT-
like in its permissions.

BSD and MIT code may be included in GPL'd code, as long as its license
(inclusion of the copyright notice, etc.) is also included where
required.

GPL applies to the entire work, in this case the R package.  I think
you should discuss this with the CRAN maintainers and release the
package under GPL.

Regards,

Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock

On Tue, 2018-04-10 at 11:45 +0200, Kasper Daniel Hansen wrote:
> There are 3 solutions.  (1) You (get permission) to change the
> library to
> GPL.  (2) You get permission to change the license of the R code to
> whatever license the library is released under.  (3) you split the
> package.
> 
> You have investigated (1) and it does not work.  I would suggest
> thinking
> about (2) provided the license of the library is decent.  This is
> what we
> did with Rgraphviz some years ago; Graphviz itself is licensed under
> the
> Eclipse public license and there was no way I could get a company to
> change
> the license of that code.
> 
> I would do whatever I can to avoid splitting the package.
> 
> Best,
> Kasper
> 
> On Fri, Apr 6, 2018 at 8:44 PM, David C Sterratt <david.c.sterratt at ed
> .ac.uk>
> wrote:
> 
> > Dear all,
> > 
> > I'd appreciate help with a licence conundrum I have with the
> > geometry
> > package (https://davidcsterratt.github.io/geometry/) that I
> > maintain.
> > 
> > The geometry package contains some functions (e.g. convhulln(),
> > delaunayn()) that wrap the Qhull library (http://www.qhull.org),
> > which
> > has its own, non-GPL, licence. The geometry package includes this
> > source
> > code, and wraps it in C files that have GPL licence headers.
> > 
> > The geometry package also has functions that are not derived from
> > Qhull
> > code and which are licensed under GPL, including a number of
> > functions
> > that are ports of the Matlab distmesh package, and some other
> > useful
> > functions to do with triangulation and coordinate systems (e.g.
> > tsearch() and cart2bary()).
> > 
> > I inherited this situation when I took over maintaining the package
> > 8
> > years ago, though I have added functions to both Qhull-derived and
> > GPL
> > categories.
> > 
> > In October last year I submitted the latest version of the geometry
> > package, which adds quite a bit of useful functionality:
> > https://github.com/davidcsterratt/geometry/blob/master/pkg/NEWS
> > 
> > I received the following response from the CRAN maintainers:
> > 
> >   For the license. It is CRAN policy that a package has to have a
> > single
> >   license. Can you manage to convince all copyright hoders (e.g. of
> >   Qhull) to relicense under GPL?
> > 
> > I tried persuading the author of Qhull. He replied:
> > 
> >   There's only one license and that's the one included with the
> > code
> >   (COPYING.txt). Several years ago, I tried to clarify the license
> > with
> >   the Univ. of Minn. but had no success. So I think the best
> > approach is
> >   to keep the original license as is. It has not been an issue so
> > far.
> > 
> > At the same time as I wrote to the Qhull maintainer, I wrote to the
> > CRAN
> > maintainers:
> > 
> >   I have written to the Qhull maintainer, but I doubt he will want
> > to
> >   change the license, since Qhull is used in proprietary software
> > such
> >   as MATLAB. Assuming this is the case, we'll have to create a new
> >   package - I would need help with managing the change for
> > dependent
> >   packages.
> > 
> > The CRAN maintainers replied:
> > 
> >   Please try to find out how this can work.
> > 
> > In principle I could create a package containing only the functions
> > derived from Qhull (but still with GPL headers in the wrapper C
> > files,
> > see e.g.,
> > https://github.com/davidcsterratt/geometry/blob/
> > master/pkg/src/Rconvhulln.c
> > But wouldn't this package still have to have two licenses, due to
> > the
> > GPL headers?
> > 
> > I don't want to start on any package splitting without having a
> > plan
> > agreed that I know will be OK for CRAN. It would be quite a bit of
> > work,
> > as there are a number of packages that depend on geometry, so I
> > would
> > have to check all the revdeps for functions that they call in the
> > geometry package. I would have to then perhaps write wrapper
> > functions
> > in the geometry package to make sure any functions moved to a new
> > package still worked when called from revdeps.
> > 
> > I know the CRAN maintainers are busy, so any help from the list
> > would be
> > much appreciated.
> > 
> > Best wishes,
> > 
> > David.
> > 
> > --
> > David C Sterratt, Senior Research Associate
> > Institute for Adaptive and Neural Computation, School of
> > Informatics
> > University of Edinburgh, 10 Crichton Street, Edinburgh EH8 9AB,
> > Scotland,
> > UK
> > http://homepages.inf.ed.ac.uk/sterratt - tel: +44 131 651 1739
> > 
> > --
> > The University of Edinburgh is a charitable body, registered in
> > Scotland, with registration number SC005336.
> > 
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From h.wickham at gmail.com  Tue Apr 10 15:57:52 2018
From: h.wickham at gmail.com (Hadley Wickham)
Date: Tue, 10 Apr 2018 06:57:52 -0700
Subject: [R-pkg-devel] GPL + other licence
In-Reply-To: <CAC2h7uuV6ghoiQ=YLLL_nR3GN6ty4YYJics_avrq85oa_+u8_g@mail.gmail.com>
References: <eyuk1tkup2j.fsf@bonnington.inf.ed.ac.uk>
 <CAC2h7uuV6ghoiQ=YLLL_nR3GN6ty4YYJics_avrq85oa_+u8_g@mail.gmail.com>
Message-ID: <CABdHhvHPoghyiAedwt=miPrxoT9wrMyQwoVQM9Hr5SPjSjj7hw@mail.gmail.com>

On Tue, Apr 10, 2018 at 2:45 AM, Kasper Daniel Hansen
<kasperdanielhansen at gmail.com> wrote:
> There are 3 solutions.  (1) You (get permission) to change the library to
> GPL.  (2) You get permission to change the license of the R code to
> whatever license the library is released under.  (3) you split the package.

For completeness: (4) you find a license that is compatible with both
the license of QHull and the license of the existing R package.

> You have investigated (1) and it does not work.  I would suggest thinking
> about (2) provided the license of the library is decent.  This is what we
> did with Rgraphviz some years ago; Graphviz itself is licensed under the
> Eclipse public license and there was no way I could get a company to change
> the license of that code.
>
> I would do whatever I can to avoid splitting the package.
>
> Best,
> Kasper
>
> On Fri, Apr 6, 2018 at 8:44 PM, David C Sterratt <david.c.sterratt at ed.ac.uk>
> wrote:
>
>> Dear all,
>>
>> I'd appreciate help with a licence conundrum I have with the geometry
>> package (https://davidcsterratt.github.io/geometry/) that I maintain.
>>
>> The geometry package contains some functions (e.g. convhulln(),
>> delaunayn()) that wrap the Qhull library (http://www.qhull.org), which
>> has its own, non-GPL, licence. The geometry package includes this source
>> code, and wraps it in C files that have GPL licence headers.
>>
>> The geometry package also has functions that are not derived from Qhull
>> code and which are licensed under GPL, including a number of functions
>> that are ports of the Matlab distmesh package, and some other useful
>> functions to do with triangulation and coordinate systems (e.g.
>> tsearch() and cart2bary()).
>>
>> I inherited this situation when I took over maintaining the package 8
>> years ago, though I have added functions to both Qhull-derived and GPL
>> categories.
>>
>> In October last year I submitted the latest version of the geometry
>> package, which adds quite a bit of useful functionality:
>> https://github.com/davidcsterratt/geometry/blob/master/pkg/NEWS
>>
>> I received the following response from the CRAN maintainers:
>>
>>   For the license. It is CRAN policy that a package has to have a single
>>   license. Can you manage to convince all copyright hoders (e.g. of
>>   Qhull) to relicense under GPL?
>>
>> I tried persuading the author of Qhull. He replied:
>>
>>   There's only one license and that's the one included with the code
>>   (COPYING.txt). Several years ago, I tried to clarify the license with
>>   the Univ. of Minn. but had no success. So I think the best approach is
>>   to keep the original license as is. It has not been an issue so far.
>>
>> At the same time as I wrote to the Qhull maintainer, I wrote to the CRAN
>> maintainers:
>>
>>   I have written to the Qhull maintainer, but I doubt he will want to
>>   change the license, since Qhull is used in proprietary software such
>>   as MATLAB. Assuming this is the case, we'll have to create a new
>>   package - I would need help with managing the change for dependent
>>   packages.
>>
>> The CRAN maintainers replied:
>>
>>   Please try to find out how this can work.
>>
>> In principle I could create a package containing only the functions
>> derived from Qhull (but still with GPL headers in the wrapper C files,
>> see e.g.,
>> https://github.com/davidcsterratt/geometry/blob/
>> master/pkg/src/Rconvhulln.c
>> But wouldn't this package still have to have two licenses, due to the
>> GPL headers?
>>
>> I don't want to start on any package splitting without having a plan
>> agreed that I know will be OK for CRAN. It would be quite a bit of work,
>> as there are a number of packages that depend on geometry, so I would
>> have to check all the revdeps for functions that they call in the
>> geometry package. I would have to then perhaps write wrapper functions
>> in the geometry package to make sure any functions moved to a new
>> package still worked when called from revdeps.
>>
>> I know the CRAN maintainers are busy, so any help from the list would be
>> much appreciated.
>>
>> Best wishes,
>>
>> David.
>>
>> --
>> David C Sterratt, Senior Research Associate
>> Institute for Adaptive and Neural Computation, School of Informatics
>> University of Edinburgh, 10 Crichton Street, Edinburgh EH8 9AB, Scotland,
>> UK
>> http://homepages.inf.ed.ac.uk/sterratt - tel: +44 131 651 1739
>>
>> --
>> The University of Edinburgh is a charitable body, registered in
>> Scotland, with registration number SC005336.
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
http://hadley.nz


From rampaletienne at gmail.com  Tue Apr 10 23:30:34 2018
From: rampaletienne at gmail.com (Rampal Etienne)
Date: Tue, 10 Apr 2018 23:30:34 +0200
Subject: [R-pkg-devel] registering native routines
In-Reply-To: <bd2465f2-ea39-d1f6-dfe7-6895edc6066e@tu-dresden.de>
References: <01d017ac-8e2b-4d76-9f64-19592d9e9218@gmail.com>
 <bd2465f2-ea39-d1f6-dfe7-6895edc6066e@tu-dresden.de>
Message-ID: <4bdd69f2-3e66-9a07-858a-7957c11a48a5@gmail.com>

Dear Thomas,

Yes, I followed all those suggestions but it did not fix the x64 notes. 
Indeed I am using Windows. I am going to try this on a Linux system.

Cheers, Rampal


On 10-Apr-18 14:17, Thomas Petzoldt wrote:
> Hi,
>
> I assume you followed "Writing R Extension" and the examples given in 
> package deSolve (and maybe some other packages).
>
> Am I right that this fixed the i386 notes, but not for x64?
>
> Here I conclude that you tested it on Windows. This is relevant, 
> because I remember a recent discussion (maybe on this mailing list), 
> that the "register native routines" check can sometimes produce false 
> positives on Windows.
>
> Would it be possible for you, to check your package on a recent Linux 
> system?
>
>
> Thomas Petzoldt
>
>
> Am 10.04.2018 um 13:19 schrieb Rampal S. Etienne:
>> Dear all,
>>
>> I am using Fortran code with the deSolve package in my package called
>> "DDD". When checking my package I get the message:
>>
>> checking compiled code ... NOTE
>> File 'DDD/libs/x64/DDD.dll':
>>    Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
>>
>> It is good practice to register native routines and to disable symbol 
>> search.
>>
>>
>> Although it is "just" a note, I would like to solve this, but after
>> quite some googling, I cannot find a solution.
>>
>> I have tried
>>
>> tools::package_native_routine_registration_skeleton('.')
>> but this produces nothing, or only an empty file when I specify the
>> argument con. I put the following R-init_DDD.c in the src folder and
>> useDynLib("DDD",.registration = TRUE) in the namespace file. #include
>> <R.h> #include <Rinternals.h> #include <stdlib.h> // for NULL #include
>> <R_ext/Rdynload.h> /* .Fortran calls */ extern void
>> F77_NAME(fill1d)(double *vec, int *DIMP, double *parms, int *II); extern
>> void F77_NAME(initmod)(void (*steadyparms)(int *, double *)); extern
>> void F77_NAME(runmod)(int *neq, double *t, double *Conc, double *dConc,
>> double *yout, int *ip); static const R_FortranMethodDef FortranEntries[]
>> = { {"fill1d", (DL_FUNC) &F77_NAME(fill1d), 4}, {"initmod", (DL_FUNC)
>> &F77_NAME(initmod), 1}, {"runmod", (DL_FUNC) &F77_NAME(runmod), 6},
>> {NULL, NULL, 0} }; void R_init_DDD(DllInfo *dll) {
>> R_registerRoutines(dll, NULL, NULL, FortranEntries, NULL);
>> R_useDynamicSymbols(dll, FALSE); }
>>
>> Note that I only get the message for x64, but I don't get it for i386,
>> which I did before. So somehow, this is only an issue on 64-bit? How do
>> I fix this?
>>
>> Regards,
>>
>> Rampal
>


From nilsson.henric at gmail.com  Wed Apr 11 11:56:38 2018
From: nilsson.henric at gmail.com (Henric Winell)
Date: Wed, 11 Apr 2018 11:56:38 +0200
Subject: [R-pkg-devel] registering native routines
In-Reply-To: <4bdd69f2-3e66-9a07-858a-7957c11a48a5@gmail.com>
References: <01d017ac-8e2b-4d76-9f64-19592d9e9218@gmail.com>
 <bd2465f2-ea39-d1f6-dfe7-6895edc6066e@tu-dresden.de>
 <4bdd69f2-3e66-9a07-858a-7957c11a48a5@gmail.com>
Message-ID: <a6c11662-d21d-e6f4-05b6-956793b7cdf9@gmail.com>

Den 2018-04-10 kl. 23:30, skrev Rampal Etienne:

> Dear Thomas,
> 
> Yes, I followed all those suggestions but it did not fix the x64 notes. 
> Indeed I am using Windows. I am going to try this on a Linux system.

On a 64-bit system you need to have 64-bit versions of the necessary 
tools on the path, but the Rtools installer defaults to 32-bit versions. 
  The issue was brought up on the R-devel list about a year ago:

https://stat.ethz.ch/pipermail/r-devel/2017-February/073785.html


Henric Winell



> 
> Cheers, Rampal
> 
> 
> On 10-Apr-18 14:17, Thomas Petzoldt wrote:
>> Hi,
>>
>> I assume you followed "Writing R Extension" and the examples given in 
>> package deSolve (and maybe some other packages).
>>
>> Am I right that this fixed the i386 notes, but not for x64?
>>
>> Here I conclude that you tested it on Windows. This is relevant, 
>> because I remember a recent discussion (maybe on this mailing list), 
>> that the "register native routines" check can sometimes produce false 
>> positives on Windows.
>>
>> Would it be possible for you, to check your package on a recent Linux 
>> system?
>>
>>
>> Thomas Petzoldt
>>
>>
>> Am 10.04.2018 um 13:19 schrieb Rampal S. Etienne:
>>> Dear all,
>>>
>>> I am using Fortran code with the deSolve package in my package called
>>> "DDD". When checking my package I get the message:
>>>
>>> checking compiled code ... NOTE
>>> File 'DDD/libs/x64/DDD.dll':
>>> ?? Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
>>>
>>> It is good practice to register native routines and to disable symbol 
>>> search.
>>>
>>>
>>> Although it is "just" a note, I would like to solve this, but after
>>> quite some googling, I cannot find a solution.
>>>
>>> I have tried
>>>
>>> tools::package_native_routine_registration_skeleton('.')
>>> but this produces nothing, or only an empty file when I specify the
>>> argument con. I put the following R-init_DDD.c in the src folder and
>>> useDynLib("DDD",.registration = TRUE) in the namespace file. #include
>>> <R.h> #include <Rinternals.h> #include <stdlib.h> // for NULL #include
>>> <R_ext/Rdynload.h> /* .Fortran calls */ extern void
>>> F77_NAME(fill1d)(double *vec, int *DIMP, double *parms, int *II); extern
>>> void F77_NAME(initmod)(void (*steadyparms)(int *, double *)); extern
>>> void F77_NAME(runmod)(int *neq, double *t, double *Conc, double *dConc,
>>> double *yout, int *ip); static const R_FortranMethodDef FortranEntries[]
>>> = { {"fill1d", (DL_FUNC) &F77_NAME(fill1d), 4}, {"initmod", (DL_FUNC)
>>> &F77_NAME(initmod), 1}, {"runmod", (DL_FUNC) &F77_NAME(runmod), 6},
>>> {NULL, NULL, 0} }; void R_init_DDD(DllInfo *dll) {
>>> R_registerRoutines(dll, NULL, NULL, FortranEntries, NULL);
>>> R_useDynamicSymbols(dll, FALSE); }
>>>
>>> Note that I only get the message for x64, but I don't get it for i386,
>>> which I did before. So somehow, this is only an issue on 64-bit? How do
>>> I fix this?
>>>
>>> Regards,
>>>
>>> Rampal
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From edd at debian.org  Wed Apr 11 13:49:04 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 11 Apr 2018 06:49:04 -0500
Subject: [R-pkg-devel] registering native routines
In-Reply-To: <4bdd69f2-3e66-9a07-858a-7957c11a48a5@gmail.com>
References: <01d017ac-8e2b-4d76-9f64-19592d9e9218@gmail.com>
 <bd2465f2-ea39-d1f6-dfe7-6895edc6066e@tu-dresden.de>
 <4bdd69f2-3e66-9a07-858a-7957c11a48a5@gmail.com>
Message-ID: <23245.63024.716878.620006@rob.eddelbuettel.com>


On 10 April 2018 at 23:30, Rampal Etienne wrote:
| Yes, I followed all those suggestions but it did not fix the x64 notes. 
| Indeed I am using Windows. I am going to try this on a Linux system.

You could consider the R Hub service at

    https://builder.r-hub.io/

and/or via the CRAN package rhub.

It gives you access to over a dozen different configuration, including of
course several plain vanilla Linux setups.

I use it all the time, and call 'check_for_cran()' which submits to a set of
systems suggested for a CRAN submission (ie Windows and Linux and r-release
and r-devel) as much of a regular check as submitting to win-builder.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From marcelino.delacruz at urjc.es  Wed Apr 11 14:24:01 2018
From: marcelino.delacruz at urjc.es (Marcelino de la Cruz Rot)
Date: Wed, 11 Apr 2018 14:24:01 +0200
Subject: [R-pkg-devel] registering native routines
In-Reply-To: <a6c11662-d21d-e6f4-05b6-956793b7cdf9@gmail.com>
References: <01d017ac-8e2b-4d76-9f64-19592d9e9218@gmail.com>
 <bd2465f2-ea39-d1f6-dfe7-6895edc6066e@tu-dresden.de>
 <4bdd69f2-3e66-9a07-858a-7957c11a48a5@gmail.com>
 <a6c11662-d21d-e6f4-05b6-956793b7cdf9@gmail.com>
Message-ID: <b8501930-aa36-6588-28bf-8c033fa5c599@urjc.es>

Thank you? for the hint, Henric.
I was also having the same NOTE.
Changing the path from \Rtools\mingw_32\bin to \Rtools\mingw_64\bin 
solved it completely. Cheers, Marcelino

El 11/04/2018 a las 11:56, Henric Winell escribi?:
> Den 2018-04-10 kl. 23:30, skrev Rampal Etienne:
>
>> Dear Thomas,
>>
>> Yes, I followed all those suggestions but it did not fix the x64 
>> notes. Indeed I am using Windows. I am going to try this on a Linux 
>> system.
>
> On a 64-bit system you need to have 64-bit versions of the necessary 
> tools on the path, but the Rtools installer defaults to 32-bit 
> versions. ?The issue was brought up on the R-devel list about a year ago:
>
> https://stat.ethz.ch/pipermail/r-devel/2017-February/073785.html
>
>
> Henric Winell
>
>
>
>>
>> Cheers, Rampal
>>
>>
>> On 10-Apr-18 14:17, Thomas Petzoldt wrote:
>>> Hi,
>>>
>>> I assume you followed "Writing R Extension" and the examples given 
>>> in package deSolve (and maybe some other packages).
>>>
>>> Am I right that this fixed the i386 notes, but not for x64?
>>>
>>> Here I conclude that you tested it on Windows. This is relevant, 
>>> because I remember a recent discussion (maybe on this mailing list), 
>>> that the "register native routines" check can sometimes produce 
>>> false positives on Windows.
>>>
>>> Would it be possible for you, to check your package on a recent 
>>> Linux system?
>>>
>>>
>>> Thomas Petzoldt
>>>
>>>
>>> Am 10.04.2018 um 13:19 schrieb Rampal S. Etienne:
>>>> Dear all,
>>>>
>>>> I am using Fortran code with the deSolve package in my package called
>>>> "DDD". When checking my package I get the message:
>>>>
>>>> checking compiled code ... NOTE
>>>> File 'DDD/libs/x64/DDD.dll':
>>>> ?? Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
>>>>
>>>> It is good practice to register native routines and to disable 
>>>> symbol search.
>>>>
>>>>
>>>> Although it is "just" a note, I would like to solve this, but after
>>>> quite some googling, I cannot find a solution.
>>>>
>>>> I have tried
>>>>
>>>> tools::package_native_routine_registration_skeleton('.')
>>>> but this produces nothing, or only an empty file when I specify the
>>>> argument con. I put the following R-init_DDD.c in the src folder and
>>>> useDynLib("DDD",.registration = TRUE) in the namespace file. #include
>>>> <R.h> #include <Rinternals.h> #include <stdlib.h> // for NULL #include
>>>> <R_ext/Rdynload.h> /* .Fortran calls */ extern void
>>>> F77_NAME(fill1d)(double *vec, int *DIMP, double *parms, int *II); 
>>>> extern
>>>> void F77_NAME(initmod)(void (*steadyparms)(int *, double *)); extern
>>>> void F77_NAME(runmod)(int *neq, double *t, double *Conc, double 
>>>> *dConc,
>>>> double *yout, int *ip); static const R_FortranMethodDef 
>>>> FortranEntries[]
>>>> = { {"fill1d", (DL_FUNC) &F77_NAME(fill1d), 4}, {"initmod", (DL_FUNC)
>>>> &F77_NAME(initmod), 1}, {"runmod", (DL_FUNC) &F77_NAME(runmod), 6},
>>>> {NULL, NULL, 0} }; void R_init_DDD(DllInfo *dll) {
>>>> R_registerRoutines(dll, NULL, NULL, FortranEntries, NULL);
>>>> R_useDynamicSymbols(dll, FALSE); }
>>>>
>>>> Note that I only get the message for x64, but I don't get it for i386,
>>>> which I did before. So somehow, this is only an issue on 64-bit? 
>>>> How do
>>>> I fix this?
>>>>
>>>> Regards,
>>>>
>>>> Rampal
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> .
>

-- 
Marcelino de la Cruz Rot
Depto. de Biolog?a y Geolog?a
F?sica y Qu?mica Inorg?nica
Universidad Rey Juan Carlos
M?stoles Espa?a


From rampaletienne at gmail.com  Wed Apr 11 15:21:53 2018
From: rampaletienne at gmail.com (Rampal Etienne)
Date: Wed, 11 Apr 2018 15:21:53 +0200
Subject: [R-pkg-devel] registering native routines
In-Reply-To: <b8501930-aa36-6588-28bf-8c033fa5c599@urjc.es>
References: <01d017ac-8e2b-4d76-9f64-19592d9e9218@gmail.com>
 <bd2465f2-ea39-d1f6-dfe7-6895edc6066e@tu-dresden.de>
 <4bdd69f2-3e66-9a07-858a-7957c11a48a5@gmail.com>
 <a6c11662-d21d-e6f4-05b6-956793b7cdf9@gmail.com>
 <b8501930-aa36-6588-28bf-8c033fa5c599@urjc.es>
Message-ID: <0ad64619-d526-e894-b904-1503eab23128@gmail.com>

Changing the path solved the problem. Thanks everyone!

Rampal


On 11-Apr-18 14:24, Marcelino de la Cruz Rot wrote:
> Thank you  for the hint, Henric.
> I was also having the same NOTE.
> Changing the path from \Rtools\mingw_32\bin to \Rtools\mingw_64\bin 
> solved it completely. Cheers, Marcelino
>
> El 11/04/2018 a las 11:56, Henric Winell escribi?:
>> Den 2018-04-10 kl. 23:30, skrev Rampal Etienne:
>>
>>> Dear Thomas,
>>>
>>> Yes, I followed all those suggestions but it did not fix the x64 
>>> notes. Indeed I am using Windows. I am going to try this on a Linux 
>>> system.
>>
>> On a 64-bit system you need to have 64-bit versions of the necessary 
>> tools on the path, but the Rtools installer defaults to 32-bit 
>> versions.  The issue was brought up on the R-devel list about a year 
>> ago:
>>
>> https://stat.ethz.ch/pipermail/r-devel/2017-February/073785.html
>>
>>
>> Henric Winell
>>
>>
>>
>>>
>>> Cheers, Rampal
>>>
>>>
>>> On 10-Apr-18 14:17, Thomas Petzoldt wrote:
>>>> Hi,
>>>>
>>>> I assume you followed "Writing R Extension" and the examples given 
>>>> in package deSolve (and maybe some other packages).
>>>>
>>>> Am I right that this fixed the i386 notes, but not for x64?
>>>>
>>>> Here I conclude that you tested it on Windows. This is relevant, 
>>>> because I remember a recent discussion (maybe on this mailing 
>>>> list), that the "register native routines" check can sometimes 
>>>> produce false positives on Windows.
>>>>
>>>> Would it be possible for you, to check your package on a recent 
>>>> Linux system?
>>>>
>>>>
>>>> Thomas Petzoldt
>>>>
>>>>
>>>> Am 10.04.2018 um 13:19 schrieb Rampal S. Etienne:
>>>>> Dear all,
>>>>>
>>>>> I am using Fortran code with the deSolve package in my package called
>>>>> "DDD". When checking my package I get the message:
>>>>>
>>>>> checking compiled code ... NOTE
>>>>> File 'DDD/libs/x64/DDD.dll':
>>>>>    Found no calls to: 'R_registerRoutines', 'R_useDynamicSymbols'
>>>>>
>>>>> It is good practice to register native routines and to disable 
>>>>> symbol search.
>>>>>
>>>>>
>>>>> Although it is "just" a note, I would like to solve this, but after
>>>>> quite some googling, I cannot find a solution.
>>>>>
>>>>> I have tried
>>>>>
>>>>> tools::package_native_routine_registration_skeleton('.')
>>>>> but this produces nothing, or only an empty file when I specify the
>>>>> argument con. I put the following R-init_DDD.c in the src folder and
>>>>> useDynLib("DDD",.registration = TRUE) in the namespace file. #include
>>>>> <R.h> #include <Rinternals.h> #include <stdlib.h> // for NULL 
>>>>> #include
>>>>> <R_ext/Rdynload.h> /* .Fortran calls */ extern void
>>>>> F77_NAME(fill1d)(double *vec, int *DIMP, double *parms, int *II); 
>>>>> extern
>>>>> void F77_NAME(initmod)(void (*steadyparms)(int *, double *)); extern
>>>>> void F77_NAME(runmod)(int *neq, double *t, double *Conc, double 
>>>>> *dConc,
>>>>> double *yout, int *ip); static const R_FortranMethodDef 
>>>>> FortranEntries[]
>>>>> = { {"fill1d", (DL_FUNC) &F77_NAME(fill1d), 4}, {"initmod", (DL_FUNC)
>>>>> &F77_NAME(initmod), 1}, {"runmod", (DL_FUNC) &F77_NAME(runmod), 6},
>>>>> {NULL, NULL, 0} }; void R_init_DDD(DllInfo *dll) {
>>>>> R_registerRoutines(dll, NULL, NULL, FortranEntries, NULL);
>>>>> R_useDynamicSymbols(dll, FALSE); }
>>>>>
>>>>> Note that I only get the message for x64, but I don't get it for 
>>>>> i386,
>>>>> which I did before. So somehow, this is only an issue on 64-bit? 
>>>>> How do
>>>>> I fix this?
>>>>>
>>>>> Regards,
>>>>>
>>>>> Rampal
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> .
>>
>


From plummerm at iarc.fr  Wed Apr 11 17:58:14 2018
From: plummerm at iarc.fr (Martyn Plummer)
Date: Wed, 11 Apr 2018 15:58:14 +0000
Subject: [R-pkg-devel] GPL + other licence
In-Reply-To: <1523366069.17100.287.camel@braverock.com>
References: <eyuk1tkup2j.fsf@bonnington.inf.ed.ac.uk>
 <CAC2h7uuV6ghoiQ=YLLL_nR3GN6ty4YYJics_avrq85oa_+u8_g@mail.gmail.com>
 <1523366069.17100.287.camel@braverock.com>
Message-ID: <1523462292.3450.106.camel@iarc.fr>

I agree with Brian. This type of license is classified by the Free
Software Foundation as "lax" or "permissive" because it does not
prevent incorporation of the code into proprietary software.

Here is what Richard Stallman has to say: https://www.gnu.org/licenses/
license-compatibility.en.html

"[L]ax licenses are usually compatible with any copyleft license. In
the combined program, the parts that came in under lax licenses still
carry them, and the combined program as a whole carries the copyleft
license." 

Hence you can license your package under the GPL.

Martyn

On Tue, 2018-04-10 at 08:14 -0500, Brian G. Peterson wrote:
> I'm not a lawyer, but I don't see why the entire package can't be
> released under GPL, while also respecting the QHull license for the
> QHull code and the derived QHull portions.
> 
> Many existing R packages released under GPL, and R itself, include BSD
> and MIT licensed code.
> 
> The QHull license is a very permissive license, basically BSD or MIT-
> like in its permissions.
> 
> BSD and MIT code may be included in GPL'd code, as long as its license
> (inclusion of the copyright notice, etc.) is also included where
> required.
> 
> GPL applies to the entire work, in this case the R package.  I think
> you should discuss this with the CRAN maintainers and release the
> package under GPL.
> 
> Regards,
> 
> Brian
> 

From profjcnash at gmail.com  Wed Apr 11 20:05:38 2018
From: profjcnash at gmail.com (J C Nash)
Date: Wed, 11 Apr 2018 14:05:38 -0400
Subject: [R-pkg-devel] Saving output of check()
Message-ID: <511f6839-64b6-a2fd-4bdd-33ebd5c54c14@gmail.com>

Hi,

In trying to test that an upgrade to my optimx package does not break other
packages, I wanted to loop over a list of all such packages in alldep, with
nall the length of this list.

cat("Check the dependent packages\n")
for (ii in 1:nall){
  cpkg <- alldep[ii]
  dd <- "/home/john/temp/wrkopt/dlpkg"
  dlname <- download.packages(cpkg, destdir=dd )[[2]]
  cat("Downloaded ", dlname,"\n")
  cpkg.chk <- devtools::check_built(dlname)
  cat("Results package:",cpkg,"\n")
  print(cpkg.chk)
}

Before running this, I did

sink("dpkgcheck.txt", split=TRUE)

and afterwards, I did sink().

But ... none of the check output, nor the result of the final print, show
up in the output file dpkgcheck.txt.

Have I totally misunderstood sink(), or is there a nasty bug?

I've tried running in Rstudio and in the terminal. I'm running Linux Mint
18.3 Sylvia.

Linux john-j6-18 4.10.0-38-generic #42~16.04.1-Ubuntu SMP Tue Oct 10 16:32:20 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux
john at john-j6-18 ~ $ R

R version 3.4.4 (2018-03-15) -- "Someone to Lean On"


J C Nash


From georgi.boshnakov at manchester.ac.uk  Wed Apr 11 21:10:18 2018
From: georgi.boshnakov at manchester.ac.uk (Georgi Boshnakov)
Date: Wed, 11 Apr 2018 19:10:18 +0000
Subject: [R-pkg-devel] Saving output of check()
In-Reply-To: <511f6839-64b6-a2fd-4bdd-33ebd5c54c14@gmail.com>
References: <511f6839-64b6-a2fd-4bdd-33ebd5c54c14@gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F6566CB@MBXP01.ds.man.ac.uk>


Hi, 

Not really an answer but I only recently discovered  devtools::revdep(), which automates checking reverse dependencies. 

Georgi Boshnakov




________________________________________
From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf of J C Nash [profjcnash at gmail.com]
Sent: 11 April 2018 19:05
To: List r-package-devel
Subject: [R-pkg-devel] Saving output of check()

Hi,

In trying to test that an upgrade to my optimx package does not break other
packages, I wanted to loop over a list of all such packages in alldep, with
nall the length of this list.

cat("Check the dependent packages\n")
for (ii in 1:nall){
  cpkg <- alldep[ii]
  dd <- "/home/john/temp/wrkopt/dlpkg"
  dlname <- download.packages(cpkg, destdir=dd )[[2]]
  cat("Downloaded ", dlname,"\n")
  cpkg.chk <- devtools::check_built(dlname)
  cat("Results package:",cpkg,"\n")
  print(cpkg.chk)
}

Before running this, I did

sink("dpkgcheck.txt", split=TRUE)

and afterwards, I did sink().

But ... none of the check output, nor the result of the final print, show
up in the output file dpkgcheck.txt.

Have I totally misunderstood sink(), or is there a nasty bug?

I've tried running in Rstudio and in the terminal. I'm running Linux Mint
18.3 Sylvia.

Linux john-j6-18 4.10.0-38-generic #42~16.04.1-Ubuntu SMP Tue Oct 10 16:32:20 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux
john at john-j6-18 ~ $ R

R version 3.4.4 (2018-03-15) -- "Someone to Lean On"


J C Nash

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From henrik.bengtsson at gmail.com  Wed Apr 11 21:24:32 2018
From: henrik.bengtsson at gmail.com (Henrik Bengtsson)
Date: Wed, 11 Apr 2018 12:24:32 -0700
Subject: [R-pkg-devel] Saving output of check()
In-Reply-To: <511f6839-64b6-a2fd-4bdd-33ebd5c54c14@gmail.com>
References: <511f6839-64b6-a2fd-4bdd-33ebd5c54c14@gmail.com>
Message-ID: <CAFDcVCSXPZ1yxeZg-Y=6hZXSppLycxNNZ_Xjc868+aDsiOHC1A@mail.gmail.com>

R CMD check, which is used internally runs checks in standalone
background R processes.  Output from these is not capturable/sinkable
by the master R process.  The gist of what's happening is:

> sink("output.log")
> system("echo hello")  ## not sinked/captured
hello
> sink()
> readLines("output.log")
character(0)

/Henrik

On Wed, Apr 11, 2018 at 11:05 AM, J C Nash <profjcnash at gmail.com> wrote:
> Hi,
>
> In trying to test that an upgrade to my optimx package does not break other
> packages, I wanted to loop over a list of all such packages in alldep, with
> nall the length of this list.
>
> cat("Check the dependent packages\n")
> for (ii in 1:nall){
>   cpkg <- alldep[ii]
>   dd <- "/home/john/temp/wrkopt/dlpkg"
>   dlname <- download.packages(cpkg, destdir=dd )[[2]]
>   cat("Downloaded ", dlname,"\n")
>   cpkg.chk <- devtools::check_built(dlname)
>   cat("Results package:",cpkg,"\n")
>   print(cpkg.chk)
> }
>
> Before running this, I did
>
> sink("dpkgcheck.txt", split=TRUE)
>
> and afterwards, I did sink().
>
> But ... none of the check output, nor the result of the final print, show
> up in the output file dpkgcheck.txt.
>
> Have I totally misunderstood sink(), or is there a nasty bug?
>
> I've tried running in Rstudio and in the terminal. I'm running Linux Mint
> 18.3 Sylvia.
>
> Linux john-j6-18 4.10.0-38-generic #42~16.04.1-Ubuntu SMP Tue Oct 10 16:32:20 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux
> john at john-j6-18 ~ $ R
>
> R version 3.4.4 (2018-03-15) -- "Someone to Lean On"
>
>
> J C Nash
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From profjcnash at gmail.com  Wed Apr 11 23:03:53 2018
From: profjcnash at gmail.com (J C Nash)
Date: Wed, 11 Apr 2018 17:03:53 -0400
Subject: [R-pkg-devel] Saving output of check()
In-Reply-To: <CAFDcVCSXPZ1yxeZg-Y=6hZXSppLycxNNZ_Xjc868+aDsiOHC1A@mail.gmail.com>
References: <511f6839-64b6-a2fd-4bdd-33ebd5c54c14@gmail.com>
 <CAFDcVCSXPZ1yxeZg-Y=6hZXSppLycxNNZ_Xjc868+aDsiOHC1A@mail.gmail.com>
Message-ID: <94dd6ada-da46-da92-baab-44213b8fd177@gmail.com>

I got several responses to my query. Henrik's does suggest "why", but I
am rather unhappy that R has this weakness. (See below for a sort of
workaround for Linux users.)

In particular, note that the check_built() function DOES return an object,
but it does NOT print().

In fact, putting alldep <- "embryogrowth" gives a result file

> Check the dependent packages
> Downloaded  /home/john/temp/wrkopt/dlpkg/embryogrowth_7.4.tar.gz 
> Results package: embryogrowth 
> 

while the bottom of the terminal file gives

> * checking data for non-ASCII characters ... OK
> * checking data for ASCII and uncompressed saves ... OK
> * checking examples ... OK
> * DONE
> 
> Status: OK
> 
> Results package: embryogrowth 
> R CMD check results
> 0 errors | 0 warnings | 0 notes
> 
>> 
>> sink()
>> 

Now the object cpkg.chk is still present, so I continued the exercise (terminal
copy here)

> 
>> ls()
> [1] "alldep"   "cpkg"     "cpkg.chk" "dd"       "dlname"   "ii"       "nall"    
>> sink("sinktest2.txt", split=TRUE)
>> cpkg.chk
> R CMD check results
> 0 errors | 0 warnings | 0 notes
> 
>> print(cpkg.chk)
> R CMD check results
> 0 errors | 0 warnings | 0 notes
> 
>> cat("note the above use just the object name as well as print()\n")
> note the above use just the object name as well as print()
>> sink()
>> 

but the file sinktest2.txt is just

> 
> note the above use just the object name as well as print()

Perhaps this isn't a bug, but it rather smells like one, especially the
failure to show the cpkg.chk.

Workaround for Linux: Run things via

R |& tee -a myteeoutput.txt

This will keep all the output (sink not needed). But it isn't quite as nice
for keeping the data.

I've also not managed to find a way to get the information out of the cpkg.chk
object. If someone knows how to do that, it would help.

Best, JN








On 2018-04-11 03:24 PM, Henrik Bengtsson wrote:
> R CMD check, which is used internally runs checks in standalone
> background R processes.  Output from these is not capturable/sinkable
> by the master R process.  The gist of what's happening is:
> 
>> sink("output.log")
>> system("echo hello")  ## not sinked/captured
> hello
>> sink()
>> readLines("output.log")
> character(0)
> 
> /Henrik
> 
> On Wed, Apr 11, 2018 at 11:05 AM, J C Nash <profjcnash at gmail.com> wrote:
>> Hi,
>>
>> In trying to test that an upgrade to my optimx package does not break other
>> packages, I wanted to loop over a list of all such packages in alldep, with
>> nall the length of this list.
>>
>> cat("Check the dependent packages\n")
>> for (ii in 1:nall){
>>   cpkg <- alldep[ii]
>>   dd <- "/home/john/temp/wrkopt/dlpkg"
>>   dlname <- download.packages(cpkg, destdir=dd )[[2]]
>>   cat("Downloaded ", dlname,"\n")
>>   cpkg.chk <- devtools::check_built(dlname)
>>   cat("Results package:",cpkg,"\n")
>>   print(cpkg.chk)
>> }
>>
>> Before running this, I did
>>
>> sink("dpkgcheck.txt", split=TRUE)
>>
>> and afterwards, I did sink().
>>
>> But ... none of the check output, nor the result of the final print, show
>> up in the output file dpkgcheck.txt.
>>
>> Have I totally misunderstood sink(), or is there a nasty bug?
>>
>> I've tried running in Rstudio and in the terminal. I'm running Linux Mint
>> 18.3 Sylvia.
>>
>> Linux john-j6-18 4.10.0-38-generic #42~16.04.1-Ubuntu SMP Tue Oct 10 16:32:20 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux
>> john at john-j6-18 ~ $ R
>>
>> R version 3.4.4 (2018-03-15) -- "Someone to Lean On"
>>
>>
>> J C Nash
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From profjcnash at gmail.com  Wed Apr 11 23:14:39 2018
From: profjcnash at gmail.com (J C Nash)
Date: Wed, 11 Apr 2018 17:14:39 -0400
Subject: [R-pkg-devel] Saving output of check()
In-Reply-To: <CAFDcVCSXPZ1yxeZg-Y=6hZXSppLycxNNZ_Xjc868+aDsiOHC1A@mail.gmail.com>
References: <511f6839-64b6-a2fd-4bdd-33ebd5c54c14@gmail.com>
 <CAFDcVCSXPZ1yxeZg-Y=6hZXSppLycxNNZ_Xjc868+aDsiOHC1A@mail.gmail.com>
Message-ID: <8fb8f1fa-e93a-ab01-b77e-035d4f2af053@gmail.com>

Another workaround is to use

tlogl <- readLines(attr(cpkg.chk, "path"))

Possibly this may suggest a way to improve functionality.

JN

On 2018-04-11 03:24 PM, Henrik Bengtsson wrote:
> R CMD check, which is used internally runs checks in standalone
> background R processes.  Output from these is not capturable/sinkable
> by the master R process.  The gist of what's happening is:
> 
>> sink("output.log")
>> system("echo hello")  ## not sinked/captured
> hello
>> sink()
>> readLines("output.log")
> character(0)
> 
> /Henrik
> 
> On Wed, Apr 11, 2018 at 11:05 AM, J C Nash <profjcnash at gmail.com> wrote:
>> Hi,
>>
>> In trying to test that an upgrade to my optimx package does not break other
>> packages, I wanted to loop over a list of all such packages in alldep, with
>> nall the length of this list.
>>
>> cat("Check the dependent packages\n")
>> for (ii in 1:nall){
>>   cpkg <- alldep[ii]
>>   dd <- "/home/john/temp/wrkopt/dlpkg"
>>   dlname <- download.packages(cpkg, destdir=dd )[[2]]
>>   cat("Downloaded ", dlname,"\n")
>>   cpkg.chk <- devtools::check_built(dlname)
>>   cat("Results package:",cpkg,"\n")
>>   print(cpkg.chk)
>> }
>>
>> Before running this, I did
>>
>> sink("dpkgcheck.txt", split=TRUE)
>>
>> and afterwards, I did sink().
>>
>> But ... none of the check output, nor the result of the final print, show
>> up in the output file dpkgcheck.txt.
>>
>> Have I totally misunderstood sink(), or is there a nasty bug?
>>
>> I've tried running in Rstudio and in the terminal. I'm running Linux Mint
>> 18.3 Sylvia.
>>
>> Linux john-j6-18 4.10.0-38-generic #42~16.04.1-Ubuntu SMP Tue Oct 10 16:32:20 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux
>> john at john-j6-18 ~ $ R
>>
>> R version 3.4.4 (2018-03-15) -- "Someone to Lean On"
>>
>>
>> J C Nash
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From profjcnash at gmail.com  Wed Apr 11 23:27:23 2018
From: profjcnash at gmail.com (J C Nash)
Date: Wed, 11 Apr 2018 17:27:23 -0400
Subject: [R-pkg-devel] Saving output of check()
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F6566CB@MBXP01.ds.man.ac.uk>
References: <511f6839-64b6-a2fd-4bdd-33ebd5c54c14@gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F6566CB@MBXP01.ds.man.ac.uk>
Message-ID: <5641813e-ac91-0862-5614-cc8d665f2ccd@gmail.com>

Indeed these are useful for one of my present tasks. Thanks. JN

On 2018-04-11 03:10 PM, Georgi Boshnakov wrote:
> 
> Hi, 
> 
> Not really an answer but I only recently discovered  devtools::revdep(), which automates checking reverse dependencies. 
> 
> Georgi Boshnakov
> 
> 
> 
> 
> ________________________________________
> From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf of J C Nash [profjcnash at gmail.com]
> Sent: 11 April 2018 19:05
> To: List r-package-devel
> Subject: [R-pkg-devel] Saving output of check()
> 
> Hi,
> 
> In trying to test that an upgrade to my optimx package does not break other
> packages, I wanted to loop over a list of all such packages in alldep, with
> nall the length of this list.
> 
> cat("Check the dependent packages\n")
> for (ii in 1:nall){
>   cpkg <- alldep[ii]
>   dd <- "/home/john/temp/wrkopt/dlpkg"
>   dlname <- download.packages(cpkg, destdir=dd )[[2]]
>   cat("Downloaded ", dlname,"\n")
>   cpkg.chk <- devtools::check_built(dlname)
>   cat("Results package:",cpkg,"\n")
>   print(cpkg.chk)
> }
> 
> Before running this, I did
> 
> sink("dpkgcheck.txt", split=TRUE)
> 
> and afterwards, I did sink().
> 
> But ... none of the check output, nor the result of the final print, show
> up in the output file dpkgcheck.txt.
> 
> Have I totally misunderstood sink(), or is there a nasty bug?
> 
> I've tried running in Rstudio and in the terminal. I'm running Linux Mint
> 18.3 Sylvia.
> 
> Linux john-j6-18 4.10.0-38-generic #42~16.04.1-Ubuntu SMP Tue Oct 10 16:32:20 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux
> john at john-j6-18 ~ $ R
> 
> R version 3.4.4 (2018-03-15) -- "Someone to Lean On"
> 
> 
> J C Nash
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ligges at statistik.tu-dortmund.de  Thu Apr 12 00:03:23 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Thu, 12 Apr 2018 00:03:23 +0200
Subject: [R-pkg-devel] Saving output of check()
In-Reply-To: <8fb8f1fa-e93a-ab01-b77e-035d4f2af053@gmail.com>
References: <511f6839-64b6-a2fd-4bdd-33ebd5c54c14@gmail.com>
 <CAFDcVCSXPZ1yxeZg-Y=6hZXSppLycxNNZ_Xjc868+aDsiOHC1A@mail.gmail.com>
 <8fb8f1fa-e93a-ab01-b77e-035d4f2af053@gmail.com>
Message-ID: <a8b91133-62af-9b33-cd59-4d84d4107bc2@statistik.tu-dortmund.de>

Not sure why nobody dicusses the R internal check functionality, also 
for reverse dependencies, from the tools package?
That is what CRAN uses for the reverse dependency checks.

Best,
Uwe Ligges




On 11.04.2018 23:14, J C Nash wrote:
> Another workaround is to use
> 
> tlogl <- readLines(attr(cpkg.chk, "path"))
> 
> Possibly this may suggest a way to improve functionality.
> 
> JN
> 
> On 2018-04-11 03:24 PM, Henrik Bengtsson wrote:
>> R CMD check, which is used internally runs checks in standalone
>> background R processes.  Output from these is not capturable/sinkable
>> by the master R process.  The gist of what's happening is:
>>
>>> sink("output.log")
>>> system("echo hello")  ## not sinked/captured
>> hello
>>> sink()
>>> readLines("output.log")
>> character(0)
>>
>> /Henrik
>>
>> On Wed, Apr 11, 2018 at 11:05 AM, J C Nash <profjcnash at gmail.com> wrote:
>>> Hi,
>>>
>>> In trying to test that an upgrade to my optimx package does not break other
>>> packages, I wanted to loop over a list of all such packages in alldep, with
>>> nall the length of this list.
>>>
>>> cat("Check the dependent packages\n")
>>> for (ii in 1:nall){
>>>    cpkg <- alldep[ii]
>>>    dd <- "/home/john/temp/wrkopt/dlpkg"
>>>    dlname <- download.packages(cpkg, destdir=dd )[[2]]
>>>    cat("Downloaded ", dlname,"\n")
>>>    cpkg.chk <- devtools::check_built(dlname)
>>>    cat("Results package:",cpkg,"\n")
>>>    print(cpkg.chk)
>>> }
>>>
>>> Before running this, I did
>>>
>>> sink("dpkgcheck.txt", split=TRUE)
>>>
>>> and afterwards, I did sink().
>>>
>>> But ... none of the check output, nor the result of the final print, show
>>> up in the output file dpkgcheck.txt.
>>>
>>> Have I totally misunderstood sink(), or is there a nasty bug?
>>>
>>> I've tried running in Rstudio and in the terminal. I'm running Linux Mint
>>> 18.3 Sylvia.
>>>
>>> Linux john-j6-18 4.10.0-38-generic #42~16.04.1-Ubuntu SMP Tue Oct 10 16:32:20 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux
>>> john at john-j6-18 ~ $ R
>>>
>>> R version 3.4.4 (2018-03-15) -- "Someone to Lean On"
>>>
>>>
>>> J C Nash
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From bbolker at gmail.com  Thu Apr 12 00:49:02 2018
From: bbolker at gmail.com (Ben Bolker)
Date: Wed, 11 Apr 2018 18:49:02 -0400
Subject: [R-pkg-devel] Saving output of check()
In-Reply-To: <a8b91133-62af-9b33-cd59-4d84d4107bc2@statistik.tu-dortmund.de>
References: <511f6839-64b6-a2fd-4bdd-33ebd5c54c14@gmail.com>
 <CAFDcVCSXPZ1yxeZg-Y=6hZXSppLycxNNZ_Xjc868+aDsiOHC1A@mail.gmail.com>
 <8fb8f1fa-e93a-ab01-b77e-035d4f2af053@gmail.com>
 <a8b91133-62af-9b33-cd59-4d84d4107bc2@statistik.tu-dortmund.de>
Message-ID: <1ae2251a-9f98-52c5-5850-6987eeddbae3@gmail.com>


  I have at various times tried the built-in (tools package) solution;
fairly complex hand-rolled stuff I did myself; and revdepcheck.  I found
that revdepcheck handled installation of needed dependencies, including
caching packages where necessary, more easily.  It felt like the 'tools'
machinery worked better if I already had all or most of the CRAN
packages installed ... (My experimentation has been done
non-systematically and over a long period of time, so I may well have
mistaken/missed something.)

On 2018-04-11 06:03 PM, Uwe Ligges wrote:
> Not sure why nobody dicusses the R internal check functionality, also
> for reverse dependencies, from the tools package?
> That is what CRAN uses for the reverse dependency checks.
> 
> Best,
> Uwe Ligges
> 
> 
> 
> 
> On 11.04.2018 23:14, J C Nash wrote:
>> Another workaround is to use
>>
>> tlogl <- readLines(attr(cpkg.chk, "path"))
>>
>> Possibly this may suggest a way to improve functionality.
>>
>> JN
>>
>> On 2018-04-11 03:24 PM, Henrik Bengtsson wrote:
>>> R CMD check, which is used internally runs checks in standalone
>>> background R processes.? Output from these is not capturable/sinkable
>>> by the master R process.? The gist of what's happening is:
>>>
>>>> sink("output.log")
>>>> system("echo hello")? ## not sinked/captured
>>> hello
>>>> sink()
>>>> readLines("output.log")
>>> character(0)
>>>
>>> /Henrik
>>>
>>> On Wed, Apr 11, 2018 at 11:05 AM, J C Nash <profjcnash at gmail.com> wrote:
>>>> Hi,
>>>>
>>>> In trying to test that an upgrade to my optimx package does not
>>>> break other
>>>> packages, I wanted to loop over a list of all such packages in
>>>> alldep, with
>>>> nall the length of this list.
>>>>
>>>> cat("Check the dependent packages\n")
>>>> for (ii in 1:nall){
>>>> ?? cpkg <- alldep[ii]
>>>> ?? dd <- "/home/john/temp/wrkopt/dlpkg"
>>>> ?? dlname <- download.packages(cpkg, destdir=dd )[[2]]
>>>> ?? cat("Downloaded ", dlname,"\n")
>>>> ?? cpkg.chk <- devtools::check_built(dlname)
>>>> ?? cat("Results package:",cpkg,"\n")
>>>> ?? print(cpkg.chk)
>>>> }
>>>>
>>>> Before running this, I did
>>>>
>>>> sink("dpkgcheck.txt", split=TRUE)
>>>>
>>>> and afterwards, I did sink().
>>>>
>>>> But ... none of the check output, nor the result of the final print,
>>>> show
>>>> up in the output file dpkgcheck.txt.
>>>>
>>>> Have I totally misunderstood sink(), or is there a nasty bug?
>>>>
>>>> I've tried running in Rstudio and in the terminal. I'm running Linux
>>>> Mint
>>>> 18.3 Sylvia.
>>>>
>>>> Linux john-j6-18 4.10.0-38-generic #42~16.04.1-Ubuntu SMP Tue Oct 10
>>>> 16:32:20 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux
>>>> john at john-j6-18 ~ $ R
>>>>
>>>> R version 3.4.4 (2018-03-15) -- "Someone to Lean On"
>>>>
>>>>
>>>> J C Nash
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From david.c.sterratt at ed.ac.uk  Thu Apr 12 12:32:07 2018
From: david.c.sterratt at ed.ac.uk (David C Sterratt)
Date: Thu, 12 Apr 2018 11:32:07 +0100
Subject: [R-pkg-devel] GPL + other licence
In-Reply-To: <1523462292.3450.106.camel@iarc.fr>
References: <eyuk1tkup2j.fsf@bonnington.inf.ed.ac.uk>
 <CAC2h7uuV6ghoiQ=YLLL_nR3GN6ty4YYJics_avrq85oa_+u8_g@mail.gmail.com>
 <1523366069.17100.287.camel@braverock.com>
 <1523462292.3450.106.camel@iarc.fr>
Message-ID: <eyutvsg4sqf.fsf@bonnington.inf.ed.ac.uk>

Thanks to all for your helpful replies.

It seems reasonable to consider that the whole package is indeed
licensed under GPL >= 3, and I can therefore remove the LICENSE file.
The Qhull COPYING.txt notice is included in the inst/doc directory, as
required by the Qhull licence, so I think all should be OK.

If the CRAN maintainers are happy with this proposal, that will resolve
a major R-packaging headache, so thanks again.

Best wishes,

David.


On Wed 11 Apr 2018 at 16:58 BST, Martyn Plummer <plummerm at iarc.fr> wrote:

> I agree with Brian. This type of license is classified by the Free
> Software Foundation as "lax" or "permissive" because it does not
> prevent incorporation of the code into proprietary software.
>
> Here is what Richard Stallman has to say: https://www.gnu.org/licenses/
> license-compatibility.en.html
>
> "[L]ax licenses are usually compatible with any copyleft license. In
> the combined program, the parts that came in under lax licenses still
> carry them, and the combined program as a whole carries the copyleft
> license."
>
> Hence you can license your package under the GPL.
>
> Martyn
>
> On Tue, 2018-04-10 at 08:14 -0500, Brian G. Peterson wrote:
>> I'm not a lawyer, but I don't see why the entire package can't be
>> released under GPL, while also respecting the QHull license for the
>> QHull code and the derived QHull portions.
>>
>> Many existing R packages released under GPL, and R itself, include BSD
>> and MIT licensed code.
>>
>> The QHull license is a very permissive license, basically BSD or MIT-
>> like in its permissions.
>>
>> BSD and MIT code may be included in GPL'd code, as long as its license
>> (inclusion of the copyright notice, etc.) is also included where
>> required.
>>
>> GPL applies to the entire work, in this case the R package.  I think
>> you should discuss this with the CRAN maintainers and release the
>> package under GPL.
>>
>> Regards,
>>
>> Brian
>>


--
David C Sterratt, Senior Research Associate
Institute for Adaptive and Neural Computation, School of Informatics
University of Edinburgh, 10 Crichton Street, Edinburgh EH8 9AB, Scotland, UK
http://homepages.inf.ed.ac.uk/sterratt - tel: +44 131 651 1739

-- 
The University of Edinburgh is a charitable body, registered in
Scotland, with registration number SC005336.


From joe at poissonconsulting.ca  Thu Apr 12 17:01:01 2018
From: joe at poissonconsulting.ca (Joe Thorley)
Date: Thu, 12 Apr 2018 08:01:01 -0700
Subject: [R-pkg-devel] extending as.mcmc.list
Message-ID: <183C3760-529E-440E-A423-8013FFF4D15D@poissonconsulting.ca>

The S3 generic function coda::as.mcmc.list has a check exclusion in R-devel/src/library/tools/R/utils.R.

I am trying to extend it to objects of various classes

https://github.com/poissonconsulting/mcmcr/blob/master/R/as.mcmc.list.R <https://github.com/poissonconsulting/mcmcr/blob/master/R/as.mcmc.list.R>

However I get the note 

Found the following apparent S3 methods exported but not registered:
  as.mcmc.list
See section ?Registering S3 methods? in the ?Writing R Extensions?
manual.

Although this note is discussed on r-package-devel

https://stat.ethz.ch/pipermail/r-package-devel/2017q2/001531.html <https://stat.ethz.ch/pipermail/r-package-devel/2017q2/001531.html>

I am unclear about how I should resolve the issue.

Currently I am considering renaming the function to as.mcmc_list although this feels somewhat unsatisfactory.

Any advice is appreciated

Joe

Joe Thorley PhD, RPBio
Computational Biologist
Poisson Consulting Ltd.
4216 Shasheen Road
Nelson, BC
V1L 6X1, Canada
Tel: +1 250 551 2194
Email: joe at poissonconsulting.ca
Web: www.poissonconsulting.ca
Skype: joethorley




	[[alternative HTML version deleted]]


From georgi.boshnakov at manchester.ac.uk  Thu Apr 12 17:27:19 2018
From: georgi.boshnakov at manchester.ac.uk (Georgi Boshnakov)
Date: Thu, 12 Apr 2018 15:27:19 +0000
Subject: [R-pkg-devel] extending as.mcmc.list
In-Reply-To: <183C3760-529E-440E-A423-8013FFF4D15D@poissonconsulting.ca>
References: <183C3760-529E-440E-A423-8013FFF4D15D@poissonconsulting.ca>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F656A4A@MBXP01.ds.man.ac.uk>

The following is in your NAMESPACE:

export(as.mcmc.list)

Don't export as.mcmc.list, presumably this is the one from 'coda ' it is rarely your responsibility.


Georgi Boshnakov

-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Joe Thorley
Sent: 12 April 2018 16:01
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] extending as.mcmc.list

The S3 generic function coda::as.mcmc.list has a check exclusion in R-devel/src/library/tools/R/utils.R.

I am trying to extend it to objects of various classes

https://github.com/poissonconsulting/mcmcr/blob/master/R/as.mcmc.list.R <https://github.com/poissonconsulting/mcmcr/blob/master/R/as.mcmc.list.R>

However I get the note 

Found the following apparent S3 methods exported but not registered:
  as.mcmc.list
See section ?Registering S3 methods? in the ?Writing R Extensions?
manual.

Although this note is discussed on r-package-devel

https://stat.ethz.ch/pipermail/r-package-devel/2017q2/001531.html <https://stat.ethz.ch/pipermail/r-package-devel/2017q2/001531.html>

I am unclear about how I should resolve the issue.

Currently I am considering renaming the function to as.mcmc_list although this feels somewhat unsatisfactory.

Any advice is appreciated

Joe

Joe Thorley PhD, RPBio
Computational Biologist
Poisson Consulting Ltd.
4216 Shasheen Road
Nelson, BC
V1L 6X1, Canada
Tel: +1 250 551 2194
Email: joe at poissonconsulting.ca
Web: www.poissonconsulting.ca
Skype: joethorley




	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel

From joe at poissonconsulting.ca  Thu Apr 12 18:05:20 2018
From: joe at poissonconsulting.ca (Joe Thorley)
Date: Thu, 12 Apr 2018 09:05:20 -0700
Subject: [R-pkg-devel] extending as.mcmc.list
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F656A4A@MBXP01.ds.man.ac.uk>
References: <183C3760-529E-440E-A423-8013FFF4D15D@poissonconsulting.ca>
 <438D2EC9EAFE5946B2D5864670EA468E018F656A4A@MBXP01.ds.man.ac.uk>
Message-ID: <C5085180-1F0F-4CC0-ABC9-3953D2C35B30@poissonconsulting.ca>

Hi Georgi

That fixed it

Thanks

Joe

> On Apr 12, 2018, at 08:27, Georgi Boshnakov <georgi.boshnakov at manchester.ac.uk> wrote:
> 
> The following is in your NAMESPACE:
> 
> export(as.mcmc.list)
> 
> Don't export as.mcmc.list, presumably this is the one from 'coda ' it is rarely your responsibility.
> 
> 
> Georgi Boshnakov
> 
> -----Original Message-----
> From: R-package-devel [mailto:r-package-devel-bounces at r-project.org <mailto:r-package-devel-bounces at r-project.org>] On Behalf Of Joe Thorley
> Sent: 12 April 2018 16:01
> To: r-package-devel at r-project.org <mailto:r-package-devel at r-project.org>
> Subject: [R-pkg-devel] extending as.mcmc.list
> 
> The S3 generic function coda::as.mcmc.list has a check exclusion in R-devel/src/library/tools/R/utils.R.
> 
> I am trying to extend it to objects of various classes
> 
> https://github.com/poissonconsulting/mcmcr/blob/master/R/as.mcmc.list.R <https://github.com/poissonconsulting/mcmcr/blob/master/R/as.mcmc.list.R><https://github.com/poissonconsulting/mcmcr/blob/master/R/as.mcmc.list.R <https://github.com/poissonconsulting/mcmcr/blob/master/R/as.mcmc.list.R>>
> 
> However I get the note 
> 
> Found the following apparent S3 methods exported but not registered:
>  as.mcmc.list
> See section ?Registering S3 methods? in the ?Writing R Extensions?
> manual.
> 
> Although this note is discussed on r-package-devel
> 
> https://stat.ethz.ch/pipermail/r-package-devel/2017q2/001531.html <https://stat.ethz.ch/pipermail/r-package-devel/2017q2/001531.html><https://stat.ethz.ch/pipermail/r-package-devel/2017q2/001531.html <https://stat.ethz.ch/pipermail/r-package-devel/2017q2/001531.html>>
> 
> I am unclear about how I should resolve the issue.
> 
> Currently I am considering renaming the function to as.mcmc_list although this feels somewhat unsatisfactory.
> 
> Any advice is appreciated
> 
> Joe
> 
> Joe Thorley PhD, RPBio
> Computational Biologist
> Poisson Consulting Ltd.
> 4216 Shasheen Road
> Nelson, BC
> V1L 6X1, Canada
> Tel: +1 250 551 2194
> Email: joe at poissonconsulting.ca
> Web: www.poissonconsulting.ca
> Skype: joethorley
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
Joe Thorley PhD, RPBio
Computational Biologist
Poisson Consulting Ltd.
4216 Shasheen Road
Nelson, BC
V1L 6X1, Canada
Tel: +1 250 551 2194
Email: joe at poissonconsulting.ca
Web: www.poissonconsulting.ca
Skype: joethorley




	[[alternative HTML version deleted]]


From berwin.turlach at gmail.com  Sat Apr 14 19:27:30 2018
From: berwin.turlach at gmail.com (Berwin A Turlach)
Date: Sun, 15 Apr 2018 01:27:30 +0800
Subject: [R-pkg-devel] Cannot submit package due to misspell note
In-Reply-To: <66dd0b17-fd15-6857-10b5-edbf0390c74c@ed.ac.uk>
References: <DB7P192MB0331B7036F82EE8019423FE2C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <DB7P192MB03315334640D6274971BD730C6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <CABghstSLQ44dOa2a-O-u5S+mt4nbLxeLbJ_V83cxtOdqXNoUvQ@mail.gmail.com>
 <DB7P192MB033144DD9D4B3425D25C695BC6BB0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <1ac04243-dc1b-a8b5-86eb-9b3ffa598276@gmail.com>
 <CABghstQB18H9=1PuXKAugr2ZtqRc57ykyxMPTx5QoHinHqtjfg@mail.gmail.com>
 <6e503f1b-733e-af97-17dd-860aaab7fb52@gmail.com>
 <DB7P192MB0331C4BD96E30309F58D62DEC6BA0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <438D2EC9EAFE5946B2D5864670EA468E018F655ED6@MBXP01.ds.man.ac.uk>
 <DB7P192MB0331C6A2B7C215FC27765FEDC6BA0@DB7P192MB0331.EURP192.PROD.OUTLOOK.COM>
 <1757c4e2-4c46-9881-d532-781f4c9eaa81@gmail.com>
 <82dca56d-6619-7e9c-d69d-349ac28a1aa0@gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F656065@MBXP01.ds.man.ac.uk>
 <165beaf6-a9f4-42fd-3a71-40af42770d15@gmail.com>
 <66dd0b17-fd15-6857-10b5-edbf0390c74c@ed.ac.uk>
Message-ID: <20180415012730.676962dc@ECM-DTC-716.uniwa.uwa.edu.au>

G'day all,

On Sat, 7 Apr 2018 10:00:36 +0100
David Sterratt <david.c.sterratt at ed.ac.uk> wrote:

> On the subject of spell-checking, to avoid false positives when I'm 
> checking the package, in the directory above the package directory I 
> create a file called .spell_ignore with one word per line, [...]
> All the false positives still come through in the CRAN check, but it 
> makes checking easier for me.

I mentioned to David that 
	http://dirk.eddelbuettel.com/blog/2017/08/10/ 
could prove enlightening regarding false positives when spell checking
R packages, but apparently forgot to CC that e-mail to the list.....

Best wishes,

	Berwin


From jtelleria.rproject at gmail.com  Sat Apr 14 21:41:21 2018
From: jtelleria.rproject at gmail.com (Juan Telleria Ruiz de Aguirre)
Date: Sat, 14 Apr 2018 21:41:21 +0200
Subject: [R-pkg-devel] 
 Fwd: Collaboration Request: h2o R Package Function Cheatsheet
In-Reply-To: <CAJXDcw1PerKuQveFfkpj8gLnOv1vY5oaWVHbvXNDcy3VQhFQ_A@mail.gmail.com>
References: <CAJXDcw3ybr7byDCms8=dCZaq2S6zpJh1KRuWNj9L7E4D5wzQ3w@mail.gmail.com>
 <CAJXDcw2mM2gQnLmO=4veGCrKOFMQfknGLLm=7TQ6q_PF2ScVFg@mail.gmail.com>
 <CAPtbhHxnZB6=Ns=ycdLo-kUj2gtBaygESD=yoKmTzcXADD+CrQ@mail.gmail.com>
 <CAJXDcw1PerKuQveFfkpj8gLnOv1vY5oaWVHbvXNDcy3VQhFQ_A@mail.gmail.com>
Message-ID: <CAJXDcw0k3T-t1VGUE+ohuRFifVPzVpKqVus70w+3O5KxsZ=gMg@mail.gmail.com>

The cheatsheet is almost finished, just in case anyone wants to polish
final details:

PDF:
https://github.com/jtelleria/H2O-Cheatsheet/blob/master/H2O%20Cheatsheet%20v2.000.pdf

POWER POINT:
https://github.com/jtelleria/H2O-Cheatsheet/blob/master/H2O%20Cheatsheet%20v2.000.pptx

Will do a pull request on RStudio Cheatsheet Github page during next week.

Juan


From alexandre.courtiol at gmail.com  Mon Apr 16 15:40:14 2018
From: alexandre.courtiol at gmail.com (Alexandre Courtiol)
Date: Mon, 16 Apr 2018 15:40:14 +0200
Subject: [R-pkg-devel] vignette via devtools: sometimes found,
 sometimes not (same package)
Message-ID: <CAERMt4c6TsD_fJCJiyGQJyYDfE6X6rww0W2SkSRjaJUbtgmipA@mail.gmail.com>

Dear all,
I am teaching a class and for that I created a R package that mostly
contains vignettes (the slides of the course).
I host the package on GitHub because I want the students to download every
day the latest version of the package.
Building the vignettes takes a couple of hours so I pre-build the vignettes
using devtools::build_vignettes before pushing my updates to GitHub.
The student install the package using
devtools::install_github("courtiol/LM2GLMM").
Then, they do library(LM2GLMM) and browseVignettes(package = "LM2GLMM")...

... and that works on 2/3 of the computers, for the others it says
vignettes not found.

Any idea why and what can I do to make it 100% success?
Of course on my laptop it works, so I cannot investigate.
Also, since they all use different versions of R, devtools or OS... I would
like to know the one thing that must be changed if it comes from that (but
I am not sure it does).

I have added a back up function that works for the 1/3 of unfortunate
students:

get_vignettes <- function() {
  utils::browseURL(paste0(find.package("LM2GLMM"), "/doc/")) ## for
installed
  utils::browseURL(paste0(find.package("LM2GLMM"), "/inst/doc/")) ## for
development
  return(invisible(NULL))
}

This functions opens de vignette folder and that shows that all the
students actually have the html files installed correctly. But it is ugly
because then they have to find the good html file and so forth, so I would
rather have a better solution.

Many thanks,

Alex

-- 
Alexandre Courtiol

http://sites.google.com/site/alexandrecourtiol/home

*"Science is the belief in the ignorance of experts"*, R. Feynman

	[[alternative HTML version deleted]]


From bbolker at gmail.com  Mon Apr 16 16:17:06 2018
From: bbolker at gmail.com (Ben Bolker)
Date: Mon, 16 Apr 2018 10:17:06 -0400
Subject: [R-pkg-devel] vignette via devtools: sometimes found,
 sometimes not (same package)
In-Reply-To: <CAERMt4c6TsD_fJCJiyGQJyYDfE6X6rww0W2SkSRjaJUbtgmipA@mail.gmail.com>
References: <CAERMt4c6TsD_fJCJiyGQJyYDfE6X6rww0W2SkSRjaJUbtgmipA@mail.gmail.com>
Message-ID: <CABghstT_6+J-b=fJO48GE4rbPA7WUD33eZO1ZdYh1oEYV4dtyg@mail.gmail.com>

I don't have a good solution but wonder if you could narrow down the
problem by getting them to send you sessionInfo() (or
devtools::session_info()) from a clean R session with just devtools
loaded.

  system.file() might be an alternative to paste0 + find.package()
(won't help much with the fundamental problem)



On Mon, Apr 16, 2018 at 9:40 AM, Alexandre Courtiol
<alexandre.courtiol at gmail.com> wrote:
> Dear all,
> I am teaching a class and for that I created a R package that mostly
> contains vignettes (the slides of the course).
> I host the package on GitHub because I want the students to download every
> day the latest version of the package.
> Building the vignettes takes a couple of hours so I pre-build the vignettes
> using devtools::build_vignettes before pushing my updates to GitHub.
> The student install the package using
> devtools::install_github("courtiol/LM2GLMM").
> Then, they do library(LM2GLMM) and browseVignettes(package = "LM2GLMM")...
>
> ... and that works on 2/3 of the computers, for the others it says
> vignettes not found.
>
> Any idea why and what can I do to make it 100% success?
> Of course on my laptop it works, so I cannot investigate.
> Also, since they all use different versions of R, devtools or OS... I would
> like to know the one thing that must be changed if it comes from that (but
> I am not sure it does).
>
> I have added a back up function that works for the 1/3 of unfortunate
> students:
>
> get_vignettes <- function() {
>   utils::browseURL(paste0(find.package("LM2GLMM"), "/doc/")) ## for
> installed
>   utils::browseURL(paste0(find.package("LM2GLMM"), "/inst/doc/")) ## for
> development
>   return(invisible(NULL))
> }
>
> This functions opens de vignette folder and that shows that all the
> students actually have the html files installed correctly. But it is ugly
> because then they have to find the good html file and so forth, so I would
> rather have a better solution.
>
> Many thanks,
>
> Alex
>
> --
> Alexandre Courtiol
>
> http://sites.google.com/site/alexandrecourtiol/home
>
> *"Science is the belief in the ignorance of experts"*, R. Feynman
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From georgi.boshnakov at manchester.ac.uk  Mon Apr 16 17:35:48 2018
From: georgi.boshnakov at manchester.ac.uk (Georgi Boshnakov)
Date: Mon, 16 Apr 2018 15:35:48 +0000
Subject: [R-pkg-devel] vignette via devtools: sometimes found,
 sometimes not (same package)
In-Reply-To: <CAERMt4c6TsD_fJCJiyGQJyYDfE6X6rww0W2SkSRjaJUbtgmipA@mail.gmail.com>
References: <CAERMt4c6TsD_fJCJiyGQJyYDfE6X6rww0W2SkSRjaJUbtgmipA@mail.gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F656E4A@MBXP01.ds.man.ac.uk>

Hi,

The problem is indeed difficult to debug but there are things that can be done to narrow it down.

1. Are there 1/3 unlucky computers fixed? (I.e does the problem occur always on the same computers) Also, do you really mean computer or user?

2. Are the students working under R studio? If so, does the same problem appear if the same procedure is run outside R studio.

3. Further to 2.,  You mention development mode - do (some) students also have a copy of your repository? This may be aproblem if they don't update it too.

4. What happens if R is restarted? 

5. It may be worth checking .Rprofle and similar for the concerned computers (or users, see 1.)

Hope this is of some help.


 Georgi Boshnakov         


________________________________________
From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf of Alexandre Courtiol [alexandre.courtiol at gmail.com]
Sent: 16 April 2018 14:40
To: List r-package-devel
Subject: [R-pkg-devel] vignette via devtools: sometimes found, sometimes not (same package)

Dear all,
I am teaching a class and for that I created a R package that mostly
contains vignettes (the slides of the course).
I host the package on GitHub because I want the students to download every
day the latest version of the package.
Building the vignettes takes a couple of hours so I pre-build the vignettes
using devtools::build_vignettes before pushing my updates to GitHub.
The student install the package using
devtools::install_github("courtiol/LM2GLMM").
Then, they do library(LM2GLMM) and browseVignettes(package = "LM2GLMM")...

... and that works on 2/3 of the computers, for the others it says
vignettes not found.

Any idea why and what can I do to make it 100% success?
Of course on my laptop it works, so I cannot investigate.
Also, since they all use different versions of R, devtools or OS... I would
like to know the one thing that must be changed if it comes from that (but
I am not sure it does).

I have added a back up function that works for the 1/3 of unfortunate
students:

get_vignettes <- function() {
  utils::browseURL(paste0(find.package("LM2GLMM"), "/doc/")) ## for
installed
  utils::browseURL(paste0(find.package("LM2GLMM"), "/inst/doc/")) ## for
development
  return(invisible(NULL))
}

This functions opens de vignette folder and that shows that all the
students actually have the html files installed correctly. But it is ugly
because then they have to find the good html file and so forth, so I would
rather have a better solution.

Many thanks,

Alex

--
Alexandre Courtiol

http://sites.google.com/site/alexandrecourtiol/home

*"Science is the belief in the ignorance of experts"*, R. Feynman

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From rdiaz02 at gmail.com  Mon Apr 16 17:35:51 2018
From: rdiaz02 at gmail.com (Ramon Diaz-Uriarte)
Date: Mon, 16 Apr 2018 17:35:51 +0200
Subject: [R-pkg-devel] Rd files: using \link[pkg]{foo} when file names
 differ between OSs
Message-ID: <874lkbrwo8.fsf@gmail.com>

Dear All,

Two recent threads in the bioconductor devel mailing list
(https://stat.ethz.ch/pipermail/bioc-devel/2018-April/013156.html and
https://stat.ethz.ch/pipermail/bioc-devel/2018-April/013259.html) are
related to packages that have different names of html files in different
operating systems.

For example, parallel has a file called mclapply in Linux. So using, from
the Rd file of another package, \link[parallel]{mclapply} works fine under
Linux, but does not under Windows, because there is no mclapply.html file
in Windows (there is a mcdummies file).


Is there any recommended way to proceed in these cases?


Yes, section 2.5 of Writing R Extensions indicates that \link[pkg]{foo}
and \link[pkg:bar]{foo} are rarely needed; so the simplest way to proceed
would be to avoid \link[pkg]{foo} and \link[pkg:bar]{foo}. I am asking for
the cases where, as noted in 2.5, "more than one package offers help on a
topic".


Thanks,


R.

--
Ramon Diaz-Uriarte
Department of Biochemistry, Lab B-25
Facultad de Medicina
Universidad Aut?noma de Madrid
Arzobispo Morcillo, 4
28029 Madrid
Spain

Phone: +34-91-497-2412

Email: rdiaz02 at gmail.com
       ramon.diaz at iib.uam.es

http://ligarto.org/rdiaz


From murdoch.duncan at gmail.com  Mon Apr 16 17:52:10 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Mon, 16 Apr 2018 11:52:10 -0400
Subject: [R-pkg-devel] Rd files: using \link[pkg]{foo} when file names
 differ between OSs
In-Reply-To: <874lkbrwo8.fsf@gmail.com>
References: <874lkbrwo8.fsf@gmail.com>
Message-ID: <3296d83f-1859-14f2-418e-55457913e4cf@gmail.com>

On 16/04/2018 11:35 AM, Ramon Diaz-Uriarte wrote:
> Dear All,
> 
> Two recent threads in the bioconductor devel mailing list
> (https://stat.ethz.ch/pipermail/bioc-devel/2018-April/013156.html and
> https://stat.ethz.ch/pipermail/bioc-devel/2018-April/013259.html) are
> related to packages that have different names of html files in different
> operating systems.
> 
> For example, parallel has a file called mclapply in Linux. So using, from
> the Rd file of another package, \link[parallel]{mclapply} works fine under
> Linux, but does not under Windows, because there is no mclapply.html file
> in Windows (there is a mcdummies file).
> 
> 
> Is there any recommended way to proceed in these cases?
> 
> 
> Yes, section 2.5 of Writing R Extensions indicates that \link[pkg]{foo}
> and \link[pkg:bar]{foo} are rarely needed; so the simplest way to proceed
> would be to avoid \link[pkg]{foo} and \link[pkg:bar]{foo}. I am asking for
> the cases where, as noted in 2.5, "more than one package offers help on a
> topic".

You could make the links conditional on the OS.  For example,

#ifdef windows
See \link[parallel]{mcdummies}.
#endif
#ifdef unix
See \link[parallel]{mclapply}.
#endif

The other possibility (useful if there are major differences between the 
platforms) is to have two copies of the help file, one in man/unix, one 
in man/windows, but that doesn't seem appropriate from your description.

Duncan Murdoch
> 
> 
> Thanks,
> 
> 
> R.
> 
> --
> Ramon Diaz-Uriarte
> Department of Biochemistry, Lab B-25
> Facultad de Medicina
> Universidad Aut?noma de Madrid
> Arzobispo Morcillo, 4
> 28029 Madrid
> Spain
> 
> Phone: +34-91-497-2412
> 
> Email: rdiaz02 at gmail.com
>         ramon.diaz at iib.uam.es
> 
> http://ligarto.org/rdiaz
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From maechler at stat.math.ethz.ch  Mon Apr 16 18:06:00 2018
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 16 Apr 2018 18:06:00 +0200
Subject: [R-pkg-devel] Rd files: using \link[pkg]{foo} when file names
 differ between OSs
In-Reply-To: <3296d83f-1859-14f2-418e-55457913e4cf@gmail.com>
References: <874lkbrwo8.fsf@gmail.com>
 <3296d83f-1859-14f2-418e-55457913e4cf@gmail.com>
Message-ID: <23252.51688.963398.399891@stat.math.ethz.ch>

>>>>> Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>>     on Mon, 16 Apr 2018 11:52:10 -0400 writes:

    > On 16/04/2018 11:35 AM, Ramon Diaz-Uriarte wrote:
    >> Dear All,
    >> 
    >> Two recent threads in the bioconductor devel mailing list
    >> (https://stat.ethz.ch/pipermail/bioc-devel/2018-April/013156.html
    >> and
    >> https://stat.ethz.ch/pipermail/bioc-devel/2018-April/013259.html)
    >> are related to packages that have different names of html
    >> files in different operating systems.
    >> 
    >> For example, parallel has a file called mclapply in
    >> Linux. So using, from the Rd file of another package,
    >> \link[parallel]{mclapply} works fine under Linux, but
    >> does not under Windows, because there is no mclapply.html
    >> file in Windows (there is a mcdummies file).
    >> 
    >> 
    >> Is there any recommended way to proceed in these cases?
    >> 
    >> 
    >> Yes, section 2.5 of Writing R Extensions indicates that
    >> \link[pkg]{foo} and \link[pkg:bar]{foo} are rarely
    >> needed; so the simplest way to proceed would be to avoid
    >> \link[pkg]{foo} and \link[pkg:bar]{foo}. I am asking for
    >> the cases where, as noted in 2.5, "more than one package
    >> offers help on a topic".

    > You could make the links conditional on the OS.  For example,

    > #ifdef windows
    > See \link[parallel]{mcdummies}.
    > #endif
    > #ifdef unix
    > See \link[parallel]{mclapply}.
    > #endif

    > The other possibility (useful if there are major differences between the 
    > platforms) is to have two copies of the help file, one in man/unix, one 
    > in man/windows, but that doesn't seem appropriate from your description.

    > Duncan Murdoch

and mid-term, I really think R and (CRAN, Bioc, ...) packages
should not do what we (R core) did here.
Rather,  \alias{mclapply}  should exist both for windows and
non-windows, and hence \link{mclapply}  would just work.

Martin Maechler


    >> Thanks,
    >> R.

    >> --
    >> Ramon Diaz-Uriarte
    >> Department of Biochemistry, Lab B-25
    >> Facultad de Medicina
    >> Universidad Aut?noma de Madrid
    >> Arzobispo Morcillo, 4
    >> 28029 Madrid
    >> Spain


From murdoch.duncan at gmail.com  Mon Apr 16 18:31:27 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Mon, 16 Apr 2018 12:31:27 -0400
Subject: [R-pkg-devel] Rd files: using \link[pkg]{foo} when file names
 differ between OSs
In-Reply-To: <23252.51688.963398.399891@stat.math.ethz.ch>
References: <874lkbrwo8.fsf@gmail.com>
 <3296d83f-1859-14f2-418e-55457913e4cf@gmail.com>
 <23252.51688.963398.399891@stat.math.ethz.ch>
Message-ID: <9c9c6452-8266-6642-4e7f-c284e18cbb04@gmail.com>

On 16/04/2018 12:06 PM, Martin Maechler wrote:
>>>>>> Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>>>      on Mon, 16 Apr 2018 11:52:10 -0400 writes:
> 
>      > On 16/04/2018 11:35 AM, Ramon Diaz-Uriarte wrote:
>      >> Dear All,
>      >>
>      >> Two recent threads in the bioconductor devel mailing list
>      >> (https://stat.ethz.ch/pipermail/bioc-devel/2018-April/013156.html
>      >> and
>      >> https://stat.ethz.ch/pipermail/bioc-devel/2018-April/013259.html)
>      >> are related to packages that have different names of html
>      >> files in different operating systems.
>      >>
>      >> For example, parallel has a file called mclapply in
>      >> Linux. So using, from the Rd file of another package,
>      >> \link[parallel]{mclapply} works fine under Linux, but
>      >> does not under Windows, because there is no mclapply.html
>      >> file in Windows (there is a mcdummies file).
>      >>
>      >>
>      >> Is there any recommended way to proceed in these cases?
>      >>
>      >>
>      >> Yes, section 2.5 of Writing R Extensions indicates that
>      >> \link[pkg]{foo} and \link[pkg:bar]{foo} are rarely
>      >> needed; so the simplest way to proceed would be to avoid
>      >> \link[pkg]{foo} and \link[pkg:bar]{foo}. I am asking for
>      >> the cases where, as noted in 2.5, "more than one package
>      >> offers help on a topic".
> 
>      > You could make the links conditional on the OS.  For example,
> 
>      > #ifdef windows
>      > See \link[parallel]{mcdummies}.
>      > #endif
>      > #ifdef unix
>      > See \link[parallel]{mclapply}.
>      > #endif
> 
>      > The other possibility (useful if there are major differences between the
>      > platforms) is to have two copies of the help file, one in man/unix, one
>      > in man/windows, but that doesn't seem appropriate from your description.
> 
>      > Duncan Murdoch
> 
> and mid-term, I really think R and (CRAN, Bioc, ...) packages
> should not do what we (R core) did here.
> Rather,  \alias{mclapply}  should exist both for windows and
> non-windows, and hence \link{mclapply}  would just work.

I forget whether that would work here:  parallel being a base package 
(used by the package in question?) might mean it would be found without 
the [parallel] in the link.  But in general, links to other packages 
using [pkg] go to the *filename*, not to the alias.  This oddity happens 
because we want the links to work even if the referenced package is 
installed later than the Rd file is processed.

The reason the file was named "mclapply" in man/unix but "mcdummies" in 
man/windows was likely to save some time:  there are several aliases 
documented in that one file on Windows, but they are in separate files 
on Unix.

Duncan Murdoch

> 
> Martin Maechler
> 
> 
>      >> Thanks,
>      >> R.
> 
>      >> --
>      >> Ramon Diaz-Uriarte
>      >> Department of Biochemistry, Lab B-25
>      >> Facultad de Medicina
>      >> Universidad Aut?noma de Madrid
>      >> Arzobispo Morcillo, 4
>      >> 28029 Madrid
>      >> Spain
>


From alexandre.courtiol at gmail.com  Mon Apr 16 19:38:39 2018
From: alexandre.courtiol at gmail.com (Alexandre Courtiol)
Date: Mon, 16 Apr 2018 19:38:39 +0200
Subject: [R-pkg-devel] vignette via devtools: sometimes found,
 sometimes not (same package)
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F656E4A@MBXP01.ds.man.ac.uk>
References: <CAERMt4c6TsD_fJCJiyGQJyYDfE6X6rww0W2SkSRjaJUbtgmipA@mail.gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F656E4A@MBXP01.ds.man.ac.uk>
Message-ID: <CAERMt4dRzhhvqqYLJFgCFPwKAxkW0i7CV-tKwvsYz=tcEjBeRg@mail.gmail.com>

Re,

On 16 April 2018 at 17:35, Georgi Boshnakov <
georgi.boshnakov at manchester.ac.uk> wrote:

> Hi,
>
> The problem is indeed difficult to debug but there are things that can be
> done to narrow it down.
>
> 1. Are there 1/3 unlucky computers fixed? (I.e does the problem occur
> always on the same computers) Also, do you really mean computer or user?
>

Yes, I mean computer, not user.

>
> 2. Are the students working under R studio? If so, does the same problem
> appear if the same procedure is run outside R studio.
>

I will try tomorrow (but from memory I think the answer will be yes).

>
> 3. Further to 2.,  You mention development mode - do (some) students also
> have a copy of your repository? This may be aproblem if they don't update
> it too.
>

No, only me has the devel version.

>
> 4. What happens if R is restarted?


I will try tomorrow (but I think the answer will be nothing).


> 5. It may be worth checking .Rprofle and similar for the concerned
> computers (or users, see 1.)
>

I will try as well but most had a fresh install and did not mess with
settings.

>
> Hope this is of some help.
>

I will look at all this and also gather the session infos as Ben suggested.
I think I know how to proceed to get to the bottom of that, but I was just
hoping that the problem was already well known and the answer as well...
If it is for anyone, please reply. Otherwise, I will investigate.
Thanks to everyone.
Alex


>
>
>  Georgi Boshnakov
>
>
> ________________________________________
> From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf
> of Alexandre Courtiol [alexandre.courtiol at gmail.com]
> Sent: 16 April 2018 14:40
> To: List r-package-devel
> Subject: [R-pkg-devel] vignette via devtools: sometimes found, sometimes
> not (same package)
>
> Dear all,
> I am teaching a class and for that I created a R package that mostly
> contains vignettes (the slides of the course).
> I host the package on GitHub because I want the students to download every
> day the latest version of the package.
> Building the vignettes takes a couple of hours so I pre-build the vignettes
> using devtools::build_vignettes before pushing my updates to GitHub.
> The student install the package using
> devtools::install_github("courtiol/LM2GLMM").
> Then, they do library(LM2GLMM) and browseVignettes(package = "LM2GLMM")...
>
> ... and that works on 2/3 of the computers, for the others it says
> vignettes not found.
>
> Any idea why and what can I do to make it 100% success?
> Of course on my laptop it works, so I cannot investigate.
> Also, since they all use different versions of R, devtools or OS... I would
> like to know the one thing that must be changed if it comes from that (but
> I am not sure it does).
>
> I have added a back up function that works for the 1/3 of unfortunate
> students:
>
> get_vignettes <- function() {
>   utils::browseURL(paste0(find.package("LM2GLMM"), "/doc/")) ## for
> installed
>   utils::browseURL(paste0(find.package("LM2GLMM"), "/inst/doc/")) ## for
> development
>   return(invisible(NULL))
> }
>
> This functions opens de vignette folder and that shows that all the
> students actually have the html files installed correctly. But it is ugly
> because then they have to find the good html file and so forth, so I would
> rather have a better solution.
>
> Many thanks,
>
> Alex
>
> --
> Alexandre Courtiol
>
> http://sites.google.com/site/alexandrecourtiol/home
>
> *"Science is the belief in the ignorance of experts"*, R. Feynman
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Alexandre Courtiol

http://sites.google.com/site/alexandrecourtiol/home

*"Science is the belief in the ignorance of experts"*, R. Feynman

	[[alternative HTML version deleted]]


From martin.morgan at roswellpark.org  Mon Apr 16 19:06:20 2018
From: martin.morgan at roswellpark.org (Martin Morgan)
Date: Mon, 16 Apr 2018 13:06:20 -0400
Subject: [R-pkg-devel] Rd files: using \link[pkg]{foo} when file names
 differ between OSs
In-Reply-To: <9c9c6452-8266-6642-4e7f-c284e18cbb04@gmail.com>
References: <874lkbrwo8.fsf@gmail.com>
 <3296d83f-1859-14f2-418e-55457913e4cf@gmail.com>
 <23252.51688.963398.399891@stat.math.ethz.ch>
 <9c9c6452-8266-6642-4e7f-c284e18cbb04@gmail.com>
Message-ID: <e345d153-5b17-3ba9-9cf0-0612bc64ba6a@roswellpark.org>



On 04/16/2018 12:31 PM, Duncan Murdoch wrote:
> On 16/04/2018 12:06 PM, Martin Maechler wrote:
>>>>>>> Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>>>> ???? on Mon, 16 Apr 2018 11:52:10 -0400 writes:
>>
>> ???? > On 16/04/2018 11:35 AM, Ramon Diaz-Uriarte wrote:
>> ???? >> Dear All,
>> ???? >>
>> ???? >> Two recent threads in the bioconductor devel mailing list
>> ???? >> (https://stat.ethz.ch/pipermail/bioc-devel/2018-April/013156.html
>> ???? >> and
>> ???? >> https://stat.ethz.ch/pipermail/bioc-devel/2018-April/013259.html)
>> ???? >> are related to packages that have different names of html
>> ???? >> files in different operating systems.
>> ???? >>
>> ???? >> For example, parallel has a file called mclapply in
>> ???? >> Linux. So using, from the Rd file of another package,
>> ???? >> \link[parallel]{mclapply} works fine under Linux, but
>> ???? >> does not under Windows, because there is no mclapply.html
>> ???? >> file in Windows (there is a mcdummies file).
>> ???? >>
>> ???? >>
>> ???? >> Is there any recommended way to proceed in these cases?
>> ???? >>
>> ???? >>
>> ???? >> Yes, section 2.5 of Writing R Extensions indicates that
>> ???? >> \link[pkg]{foo} and \link[pkg:bar]{foo} are rarely
>> ???? >> needed; so the simplest way to proceed would be to avoid
>> ???? >> \link[pkg]{foo} and \link[pkg:bar]{foo}. I am asking for
>> ???? >> the cases where, as noted in 2.5, "more than one package
>> ???? >> offers help on a topic".
>>
>> ???? > You could make the links conditional on the OS.? For example,
>>
>> ???? > #ifdef windows
>> ???? > See \link[parallel]{mcdummies}.
>> ???? > #endif
>> ???? > #ifdef unix
>> ???? > See \link[parallel]{mclapply}.
>> ???? > #endif
>>
>> ???? > The other possibility (useful if there are major differences 
>> between the
>> ???? > platforms) is to have two copies of the help file, one in 
>> man/unix, one
>> ???? > in man/windows, but that doesn't seem appropriate from your 
>> description.
>>
>> ???? > Duncan Murdoch
>>
>> and mid-term, I really think R and (CRAN, Bioc, ...) packages
>> should not do what we (R core) did here.
>> Rather,? \alias{mclapply}? should exist both for windows and
>> non-windows, and hence \link{mclapply}? would just work.

\alias{mclapply} does exist...

> 
> I forget whether that would work here:? parallel being a base package 
> (used by the package in question?) might mean it would be found without 
> the [parallel] in the link.? But in general, links to other packages 
> using [pkg] go to the *filename*, not to the alias.? This oddity happens 
> because we want the links to work even if the referenced package is 
> installed later than the Rd file is processed.

People are quite concerned about fixing the 'WARNING' this generates. 
However from the text

   file link 'mclapply' in package 'parallel' does not exist and so has 
been  treated as a topic

the help pages are actually constructed correctly, finding the page on 
which the topic (aka alias) 'mclapply' is defined. This contrasts with a 
completely incorrect link (e.g., \link[stats]{mclapply}) generating a 
warning

   missing file link

and unable to link to the mclapply topic.

Perhaps the WARNING from \link[parallel]{mclapply} should be a NOTE?

There are other oddities in the threads that Ramon indicates

   - WARNINGs from \link[foo]{bar} that should really be 
\link[foo:baz]{bar} often only appear on Windows (parallel's use of 
mcdummies is a special case here). Shouldn't they be 
platform-independent? An example is

 
http://bioconductor.org/checkResults/3.7/bioc-LATEST/ADaCGH2/tokay2-checksrc.html

where as.MAList is defined in a file called asmalist.Rd so 
\link[limma]{as.MAList} is incorrect. It generates a warning only on our 
Windows machine (tokay2) not Linux or Mac. I had some recollection of 
Windows-specific help system behavior, but I think this dates back to 
the .chm days...

   - There were a spate of independent posts about this, suggesting that 
this is relatively new phenomenon (though it could also be that 
maintainers have been busy preparing their packages for the next 
release, so are now noticing the problem...)

   - It doesn't seem like good practice to link to the file name, which 
seems an internal aspect of a package, rather than to the alias, which 
seems at least for symbols to be a user-facing public aspect of the package.

   - And finally I did make an svn commit related to this, so am 
sensitive to blundering here

R-devel/src/library/tools/R$ svn log -c74129
------------------------------------------------------------------------
r74129 | morgan | 2018-01-17 16:52:53 -0500 (Wed, 17 Jan 2018) | 10 lines

correct warning when \link[base]{foo} is incorrect

- now "missing file link" rather than "file link 'foo' in package 'base'
   does not exist and will be treated as a topic" (foo is _not_ a topic
   in base; the link to foo.html is missing)
- vice-versa for \link[base]{rbind} (rbind _is_ a topic in base, 
documented in
   cbind.html, and will be resolved by the help system)
- see https://stat.ethz.ch/pipermail/r-devel/2009-October/055287.html and
   c50198

------------------------------------------------------------------------

   - There is a possibility that some of the oddities are Bioc 
build-system specific, and I really have not had a chance to dig to the 
bottom of this to my satisfaction.

Martin


> 
> The reason the file was named "mclapply" in man/unix but "mcdummies" in 
> man/windows was likely to save some time:? there are several aliases 
> documented in that one file on Windows, but they are in separate files 
> on Unix.
> 
> Duncan Murdoch
> 
>>
>> Martin Maechler
>>
>>
>> ???? >> Thanks,
>> ???? >> R.
>>
>> ???? >> --
>> ???? >> Ramon Diaz-Uriarte
>> ???? >> Department of Biochemistry, Lab B-25
>> ???? >> Facultad de Medicina
>> ???? >> Universidad Aut?noma de Madrid
>> ???? >> Arzobispo Morcillo, 4
>> ???? >> 28029 Madrid
>> ???? >> Spain
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


This email message may contain legally privileged and/or...{{dropped:2}}


From murdoch.duncan at gmail.com  Mon Apr 16 19:57:35 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Mon, 16 Apr 2018 13:57:35 -0400
Subject: [R-pkg-devel] Rd files: using \link[pkg]{foo} when file names
 differ between OSs
In-Reply-To: <e345d153-5b17-3ba9-9cf0-0612bc64ba6a@roswellpark.org>
References: <874lkbrwo8.fsf@gmail.com>
 <3296d83f-1859-14f2-418e-55457913e4cf@gmail.com>
 <23252.51688.963398.399891@stat.math.ethz.ch>
 <9c9c6452-8266-6642-4e7f-c284e18cbb04@gmail.com>
 <e345d153-5b17-3ba9-9cf0-0612bc64ba6a@roswellpark.org>
Message-ID: <2801a23f-6802-aad1-effd-b537e259000c@gmail.com>

On 16/04/2018 1:06 PM, Martin Morgan wrote:
> 
> 
> On 04/16/2018 12:31 PM, Duncan Murdoch wrote:
>> On 16/04/2018 12:06 PM, Martin Maechler wrote:
>>>>>>>> Duncan Murdoch <murdoch.duncan at gmail.com>
>>>>>>>>  ???? on Mon, 16 Apr 2018 11:52:10 -0400 writes:
>>>
>>>  ???? > On 16/04/2018 11:35 AM, Ramon Diaz-Uriarte wrote:
>>>  ???? >> Dear All,
>>>  ???? >>
>>>  ???? >> Two recent threads in the bioconductor devel mailing list
>>>  ???? >> (https://stat.ethz.ch/pipermail/bioc-devel/2018-April/013156.html
>>>  ???? >> and
>>>  ???? >> https://stat.ethz.ch/pipermail/bioc-devel/2018-April/013259.html)
>>>  ???? >> are related to packages that have different names of html
>>>  ???? >> files in different operating systems.
>>>  ???? >>
>>>  ???? >> For example, parallel has a file called mclapply in
>>>  ???? >> Linux. So using, from the Rd file of another package,
>>>  ???? >> \link[parallel]{mclapply} works fine under Linux, but
>>>  ???? >> does not under Windows, because there is no mclapply.html
>>>  ???? >> file in Windows (there is a mcdummies file).
>>>  ???? >>
>>>  ???? >>
>>>  ???? >> Is there any recommended way to proceed in these cases?
>>>  ???? >>
>>>  ???? >>
>>>  ???? >> Yes, section 2.5 of Writing R Extensions indicates that
>>>  ???? >> \link[pkg]{foo} and \link[pkg:bar]{foo} are rarely
>>>  ???? >> needed; so the simplest way to proceed would be to avoid
>>>  ???? >> \link[pkg]{foo} and \link[pkg:bar]{foo}. I am asking for
>>>  ???? >> the cases where, as noted in 2.5, "more than one package
>>>  ???? >> offers help on a topic".
>>>
>>>  ???? > You could make the links conditional on the OS.? For example,
>>>
>>>  ???? > #ifdef windows
>>>  ???? > See \link[parallel]{mcdummies}.
>>>  ???? > #endif
>>>  ???? > #ifdef unix
>>>  ???? > See \link[parallel]{mclapply}.
>>>  ???? > #endif
>>>
>>>  ???? > The other possibility (useful if there are major differences
>>> between the
>>>  ???? > platforms) is to have two copies of the help file, one in
>>> man/unix, one
>>>  ???? > in man/windows, but that doesn't seem appropriate from your
>>> description.
>>>
>>>  ???? > Duncan Murdoch
>>>
>>> and mid-term, I really think R and (CRAN, Bioc, ...) packages
>>> should not do what we (R core) did here.
>>> Rather,? \alias{mclapply}? should exist both for windows and
>>> non-windows, and hence \link{mclapply}? would just work.
> 
> \alias{mclapply} does exist...
> 
>>
>> I forget whether that would work here:? parallel being a base package
>> (used by the package in question?) might mean it would be found without
>> the [parallel] in the link.? But in general, links to other packages
>> using [pkg] go to the *filename*, not to the alias.? This oddity happens
>> because we want the links to work even if the referenced package is
>> installed later than the Rd file is processed.
> 
> People are quite concerned about fixing the 'WARNING' this generates.
> However from the text
> 
>     file link 'mclapply' in package 'parallel' does not exist and so has
> been  treated as a topic
> 
> the help pages are actually constructed correctly, finding the page on
> which the topic (aka alias) 'mclapply' is defined. This contrasts with a
> completely incorrect link (e.g., \link[stats]{mclapply}) generating a
> warning
> 
>     missing file link
> 
> and unable to link to the mclapply topic.
> 
> Perhaps the WARNING from \link[parallel]{mclapply} should be a NOTE?
> 
> There are other oddities in the threads that Ramon indicates
> 
>     - WARNINGs from \link[foo]{bar} that should really be
> \link[foo:baz]{bar} often only appear on Windows (parallel's use of
> mcdummies is a special case here). Shouldn't they be
> platform-independent? An example is
> 
>   
> http://bioconductor.org/checkResults/3.7/bioc-LATEST/ADaCGH2/tokay2-checksrc.html
> 
> where as.MAList is defined in a file called asmalist.Rd so
> \link[limma]{as.MAList} is incorrect. It generates a warning only on our
> Windows machine (tokay2) not Linux or Mac. I had some recollection of
> Windows-specific help system behavior, but I think this dates back to
> the .chm days...

Yes, that looks like an issue in the Linux checks.

> 
>     - There were a spate of independent posts about this, suggesting that
> this is relatively new phenomenon (though it could also be that
> maintainers have been busy preparing their packages for the next
> release, so are now noticing the problem...)

The fact that cross-package links go to files rather than aliases is 
very old, but the checks may be newer.

> 
>     - It doesn't seem like good practice to link to the file name, which
> seems an internal aspect of a package, rather than to the alias, which
> seems at least for symbols to be a user-facing public aspect of the package.

I agree, but as I said, this is very old.  It was old when I wrote the 
Rd parser.  I vaguely recall that the possibility of a change was 
considered and rejected, but I'm not sure about that.

Changing it to use only topics would likely cause problems for people 
who are not getting warnings now.  Perhaps it would be sensible to 
switch from filename to topic without a warning if the referenced 
package is available for checking, only issuing the warning if the check 
machine can't verify that the link is good.

Duncan Murdoch

> 
>     - And finally I did make an svn commit related to this, so am
> sensitive to blundering here
> 
> R-devel/src/library/tools/R$ svn log -c74129
> ------------------------------------------------------------------------
> r74129 | morgan | 2018-01-17 16:52:53 -0500 (Wed, 17 Jan 2018) | 10 lines
> 
> correct warning when \link[base]{foo} is incorrect
> 
> - now "missing file link" rather than "file link 'foo' in package 'base'
>     does not exist and will be treated as a topic" (foo is _not_ a topic
>     in base; the link to foo.html is missing)
> - vice-versa for \link[base]{rbind} (rbind _is_ a topic in base,
> documented in
>     cbind.html, and will be resolved by the help system)
> - see https://stat.ethz.ch/pipermail/r-devel/2009-October/055287.html and
>     c50198
> 
> ------------------------------------------------------------------------
> 
>     - There is a possibility that some of the oddities are Bioc
> build-system specific, and I really have not had a chance to dig to the
> bottom of this to my satisfaction.
> 
> Martin
> 
> 
>>
>> The reason the file was named "mclapply" in man/unix but "mcdummies" in
>> man/windows was likely to save some time:? there are several aliases
>> documented in that one file on Windows, but they are in separate files
>> on Unix.
>>
>> Duncan Murdoch
>>
>>>
>>> Martin Maechler
>>>
>>>
>>>  ???? >> Thanks,
>>>  ???? >> R.
>>>
>>>  ???? >> --
>>>  ???? >> Ramon Diaz-Uriarte
>>>  ???? >> Department of Biochemistry, Lab B-25
>>>  ???? >> Facultad de Medicina
>>>  ???? >> Universidad Aut?noma de Madrid
>>>  ???? >> Arzobispo Morcillo, 4
>>>  ???? >> 28029 Madrid
>>>  ???? >> Spain
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> This email message may contain legally privileged and/or confidential information.  If you are not the intended recipient(s), or the employee or agent responsible for the delivery of this message to the intended recipient(s), you are hereby notified that any disclosure, copying, distribution, or use of this email message is prohibited.  If you have received this message in error, please notify the sender immediately by e-mail and delete this email message from your computer. Thank you.
>


From thierry.onkelinx at inbo.be  Tue Apr 17 10:42:48 2018
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Tue, 17 Apr 2018 10:42:48 +0200
Subject: [R-pkg-devel] vignette via devtools: sometimes found,
 sometimes not (same package)
In-Reply-To: <CAERMt4dRzhhvqqYLJFgCFPwKAxkW0i7CV-tKwvsYz=tcEjBeRg@mail.gmail.com>
References: <CAERMt4c6TsD_fJCJiyGQJyYDfE6X6rww0W2SkSRjaJUbtgmipA@mail.gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F656E4A@MBXP01.ds.man.ac.uk>
 <CAERMt4dRzhhvqqYLJFgCFPwKAxkW0i7CV-tKwvsYz=tcEjBeRg@mail.gmail.com>
Message-ID: <CAJuCY5w_cfc0FDRfkYE7yr9G7HDDvam3iPNMDenCqTS2RZxjoA@mail.gmail.com>

Dear Alex,

Have a look at drat
(http://eddelbuettel.github.io/drat/DratForPackageAuthors.html). This
makes it easier to distribute prepackaged R packages (including When
you uploaded a new version, then the student would only have to do
drat::addRepo("your_repo") and then install.pakages("LM2GLMM") or
update.packages()

Best regards,

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
AND FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no
more than asking him to perform a post-mortem examination: he may be
able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does
not ensure that a reasonable answer can be extracted from a given body
of data. ~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////




2018-04-16 19:38 GMT+02:00 Alexandre Courtiol <alexandre.courtiol at gmail.com>:
> Re,
>
> On 16 April 2018 at 17:35, Georgi Boshnakov <
> georgi.boshnakov at manchester.ac.uk> wrote:
>
>> Hi,
>>
>> The problem is indeed difficult to debug but there are things that can be
>> done to narrow it down.
>>
>> 1. Are there 1/3 unlucky computers fixed? (I.e does the problem occur
>> always on the same computers) Also, do you really mean computer or user?
>>
>
> Yes, I mean computer, not user.
>
>>
>> 2. Are the students working under R studio? If so, does the same problem
>> appear if the same procedure is run outside R studio.
>>
>
> I will try tomorrow (but from memory I think the answer will be yes).
>
>>
>> 3. Further to 2.,  You mention development mode - do (some) students also
>> have a copy of your repository? This may be aproblem if they don't update
>> it too.
>>
>
> No, only me has the devel version.
>
>>
>> 4. What happens if R is restarted?
>
>
> I will try tomorrow (but I think the answer will be nothing).
>
>
>> 5. It may be worth checking .Rprofle and similar for the concerned
>> computers (or users, see 1.)
>>
>
> I will try as well but most had a fresh install and did not mess with
> settings.
>
>>
>> Hope this is of some help.
>>
>
> I will look at all this and also gather the session infos as Ben suggested.
> I think I know how to proceed to get to the bottom of that, but I was just
> hoping that the problem was already well known and the answer as well...
> If it is for anyone, please reply. Otherwise, I will investigate.
> Thanks to everyone.
> Alex
>
>
>>
>>
>>  Georgi Boshnakov
>>
>>
>> ________________________________________
>> From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf
>> of Alexandre Courtiol [alexandre.courtiol at gmail.com]
>> Sent: 16 April 2018 14:40
>> To: List r-package-devel
>> Subject: [R-pkg-devel] vignette via devtools: sometimes found, sometimes
>> not (same package)
>>
>> Dear all,
>> I am teaching a class and for that I created a R package that mostly
>> contains vignettes (the slides of the course).
>> I host the package on GitHub because I want the students to download every
>> day the latest version of the package.
>> Building the vignettes takes a couple of hours so I pre-build the vignettes
>> using devtools::build_vignettes before pushing my updates to GitHub.
>> The student install the package using
>> devtools::install_github("courtiol/LM2GLMM").
>> Then, they do library(LM2GLMM) and browseVignettes(package = "LM2GLMM")...
>>
>> ... and that works on 2/3 of the computers, for the others it says
>> vignettes not found.
>>
>> Any idea why and what can I do to make it 100% success?
>> Of course on my laptop it works, so I cannot investigate.
>> Also, since they all use different versions of R, devtools or OS... I would
>> like to know the one thing that must be changed if it comes from that (but
>> I am not sure it does).
>>
>> I have added a back up function that works for the 1/3 of unfortunate
>> students:
>>
>> get_vignettes <- function() {
>>   utils::browseURL(paste0(find.package("LM2GLMM"), "/doc/")) ## for
>> installed
>>   utils::browseURL(paste0(find.package("LM2GLMM"), "/inst/doc/")) ## for
>> development
>>   return(invisible(NULL))
>> }
>>
>> This functions opens de vignette folder and that shows that all the
>> students actually have the html files installed correctly. But it is ugly
>> because then they have to find the good html file and so forth, so I would
>> rather have a better solution.
>>
>> Many thanks,
>>
>> Alex
>>
>> --
>> Alexandre Courtiol
>>
>> http://sites.google.com/site/alexandrecourtiol/home
>>
>> *"Science is the belief in the ignorance of experts"*, R. Feynman
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>
>
> --
> Alexandre Courtiol
>
> http://sites.google.com/site/alexandrecourtiol/home
>
> *"Science is the belief in the ignorance of experts"*, R. Feynman
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From gertjanvandenburg at gmail.com  Mon Apr 16 20:02:58 2018
From: gertjanvandenburg at gmail.com (Gertjan van den Burg)
Date: Mon, 16 Apr 2018 19:02:58 +0100
Subject: [R-pkg-devel] CRAN pretest archived because of 2 NOTEs
Message-ID: <CAAwZAT0vQ_O2-oNtOPnLa-GoE65u=wD1nfE-rNHfLUpcditYYA@mail.gmail.com>

Dear all,

My CRAN submission doesn't pass the pre-tests and gets archived. I've
emailed cran-submissions at r-project.org explaining that these are false
positives, but since I haven't heard back in 10 days I don't think anyone
read that. Same thing for the submission comments (which also explained it).

The first note is:

* checking CRAN incoming feasibility ... NOTE
Maintainer: ?Gertjan van den Burg <gertjanvandenburg at gmail.com>?

New submission

Possibly mis-spelled words in DESCRIPTION:
  GenSVM (8:18, 10:61, 15:2, 16:26, 19:11)
  Multiclass (4:22)
  SVMs (14:25, 15:42)
  misclassifications (11:49)
  multiclass (8:53, 14:14, 15:31)


These words are not mis-spelled, so this is a false positive.

The second note is:

* checking compiled code ... NOTE
File ?gensvm/libs/gensvm_wrapper.so?:
  Found ?rand?, possibly from ?rand? (C)
    Objects: ?gensvm/src/gensvm_cv_util.o?, ?gensvm/src/gensvm_init.o?,
      ?gensvm/lib/libgensvm.a?
  Found ?srand?, possibly from ?srand? (C)
    Objects: ?gensvm/src/gensvm_train.o?, ?gensvm/lib/libgensvm.a?

Compiled code should not call entry points which might terminate R nor
write to stdout/stderr instead of to the console, nor use Fortran I/O
nor system RNGs.

See ?Writing portable packages? in the ?Writing R Extensions? manual.


This is probably why the package is rejected. I have a valid use case for
using rand() and srand(): I'm trying to maintain compatibility of this
package with the corresponding Python package. By using rand en srand users
can reproduce models in both languages.

Does anyone have any ideas on how I can get the package excepted to CRAN?

Thanks,

Gertjan van den Burg

	[[alternative HTML version deleted]]


From gertjanvandenburg at gmail.com  Wed Apr 18 12:36:18 2018
From: gertjanvandenburg at gmail.com (Gertjan van den Burg)
Date: Wed, 18 Apr 2018 11:36:18 +0100
Subject: [R-pkg-devel] CRAN pretest archived because of 2 NOTEs
In-Reply-To: <mailman.2627.9.1524045602.54835.r-package-devel@r-project.org>
References: <mailman.2627.9.1524045602.54835.r-package-devel@r-project.org>
Message-ID: <203fb027-c08b-367e-57fa-ce420351917e@gmail.com>

While waiting to get this message posted to the list, I've solved the 
problem by copying the stdlib rand() and srand() functions into my 
package under a different name. This makes the check pass and ensures my 
RNG does not interfere with R's RNG.

I do think that if this NOTE causes immediate dismissal of a package, it 
shouldn't be a NOTE but an ERROR. Otherwise it just leads to a lot of 
wasted time waiting for a reply from the maintainers to respond to the note.

> Dear all,
>
> My CRAN submission doesn't pass the pre-tests and gets archived. I've
> emailed cran-submissions at r-project.org explaining that these are false
> positives, but since I haven't heard back in 10 days I don't think anyone
> read that. Same thing for the submission comments (which also explained it).
>
> The first note is:
>
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?Gertjan van den Burg <gertjanvandenburg at gmail.com>?
>
> New submission
>
> Possibly mis-spelled words in DESCRIPTION:
>    GenSVM (8:18, 10:61, 15:2, 16:26, 19:11)
>    Multiclass (4:22)
>    SVMs (14:25, 15:42)
>    misclassifications (11:49)
>    multiclass (8:53, 14:14, 15:31)
>
>
> These words are not mis-spelled, so this is a false positive.
>
> The second note is:
>
> * checking compiled code ... NOTE
> File ?gensvm/libs/gensvm_wrapper.so?:
>    Found ?rand?, possibly from ?rand? (C)
>      Objects: ?gensvm/src/gensvm_cv_util.o?, ?gensvm/src/gensvm_init.o?,
>        ?gensvm/lib/libgensvm.a?
>    Found ?srand?, possibly from ?srand? (C)
>      Objects: ?gensvm/src/gensvm_train.o?, ?gensvm/lib/libgensvm.a?
>
> Compiled code should not call entry points which might terminate R nor
> write to stdout/stderr instead of to the console, nor use Fortran I/O
> nor system RNGs.
>
> See ?Writing portable packages? in the ?Writing R Extensions? manual.
>
>
> This is probably why the package is rejected. I have a valid use case for
> using rand() and srand(): I'm trying to maintain compatibility of this
> package with the corresponding Python package. By using rand en srand users
> can reproduce models in both languages.
>
> Does anyone have any ideas on how I can get the package excepted to CRAN?
>
> Thanks,
>
> Gertjan van den Burg
>


From rdiaz02 at gmail.com  Wed Apr 18 14:10:29 2018
From: rdiaz02 at gmail.com (Ramon Diaz-Uriarte)
Date: Wed, 18 Apr 2018 14:10:29 +0200
Subject: [R-pkg-devel] Rd files: using \link[pkg]{foo} when file names
 differ between OSs
In-Reply-To: <3296d83f-1859-14f2-418e-55457913e4cf@gmail.com>
References: <874lkbrwo8.fsf@gmail.com>
 <3296d83f-1859-14f2-418e-55457913e4cf@gmail.com>
Message-ID: <87wox4pvey.fsf@gmail.com>


Dear Duncan,

On Mon, 16-April-2018, at 17:52:10, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> On 16/04/2018 11:35 AM, Ramon Diaz-Uriarte wrote:
>> Dear All,
>> 
>> Two recent threads in the bioconductor devel mailing list
>> (https://stat.ethz.ch/pipermail/bioc-devel/2018-April/013156.html and
>> https://stat.ethz.ch/pipermail/bioc-devel/2018-April/013259.html) are
>> related to packages that have different names of html files in different
>> operating systems.
>> 
>> For example, parallel has a file called mclapply in Linux. So using, from
>> the Rd file of another package, \link[parallel]{mclapply} works fine under
>> Linux, but does not under Windows, because there is no mclapply.html file
>> in Windows (there is a mcdummies file).
>> 
>> 
>> Is there any recommended way to proceed in these cases?
>> 
>> 
>> Yes, section 2.5 of Writing R Extensions indicates that \link[pkg]{foo}
>> and \link[pkg:bar]{foo} are rarely needed; so the simplest way to proceed
>> would be to avoid \link[pkg]{foo} and \link[pkg:bar]{foo}. I am asking for
>> the cases where, as noted in 2.5, "more than one package offers help on a
>> topic".
>
> You could make the links conditional on the OS.  For example,
>
> #ifdef windows
> See \link[parallel]{mcdummies}.
> #endif
> #ifdef unix
> See \link[parallel]{mclapply}.
> #endif

Thanks. I wasn't aware that was possible.



>
> The other possibility (useful if there are major differences between the 
> platforms) is to have two copies of the help file, one in man/unix, one 
> in man/windows, but that doesn't seem appropriate from your description.

I think the previous one is better (actually, for my specific cases right
now, I was able to solve the problem using \link{foo} since only one
packages offers help on the topic I link to).



Best,

R.


>
> Duncan Murdoch
>> 
>> 
>> Thanks,
>> 
>> 
>> R.
>> 
>> --
>> Ramon Diaz-Uriarte
>> Department of Biochemistry, Lab B-25
>> Facultad de Medicina
>> Universidad Aut?noma de Madrid
>> Arzobispo Morcillo, 4
>> 28029 Madrid
>> Spain
>> 
>> Phone: +34-91-497-2412
>> 
>> Email: rdiaz02 at gmail.com
>>         ramon.diaz at iib.uam.es
>> 
>> http://ligarto.org/rdiaz
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 


-- 
Ramon Diaz-Uriarte
Department of Biochemistry, Lab B-25
Facultad de Medicina
Universidad Aut?noma de Madrid 
Arzobispo Morcillo, 4
28029 Madrid
Spain

Phone: +34-91-497-2412

Email: rdiaz02 at gmail.com
       ramon.diaz at iib.uam.es

http://ligarto.org/rdiaz


From h.wickham at gmail.com  Wed Apr 18 19:40:47 2018
From: h.wickham at gmail.com (Hadley Wickham)
Date: Wed, 18 Apr 2018 10:40:47 -0700
Subject: [R-pkg-devel] CRAN pretest archived because of 2 NOTEs
In-Reply-To: <203fb027-c08b-367e-57fa-ce420351917e@gmail.com>
References: <mailman.2627.9.1524045602.54835.r-package-devel@r-project.org>
 <203fb027-c08b-367e-57fa-ce420351917e@gmail.com>
Message-ID: <CABdHhvHdHnrZtRM2ZADtrt1NvPz=VBQnUH1GN3oxcRYDufSMjg@mail.gmail.com>

For the purposes of CRAN submission, you should basically treat every
NOTE as an ERROR.

Hadley

On Wed, Apr 18, 2018 at 3:36 AM, Gertjan van den Burg
<gertjanvandenburg at gmail.com> wrote:
> While waiting to get this message posted to the list, I've solved the
> problem by copying the stdlib rand() and srand() functions into my package
> under a different name. This makes the check pass and ensures my RNG does
> not interfere with R's RNG.
>
> I do think that if this NOTE causes immediate dismissal of a package, it
> shouldn't be a NOTE but an ERROR. Otherwise it just leads to a lot of wasted
> time waiting for a reply from the maintainers to respond to the note.
>
>> Dear all,
>>
>> My CRAN submission doesn't pass the pre-tests and gets archived. I've
>> emailed cran-submissions at r-project.org explaining that these are false
>> positives, but since I haven't heard back in 10 days I don't think anyone
>> read that. Same thing for the submission comments (which also explained
>> it).
>>
>> The first note is:
>>
>> * checking CRAN incoming feasibility ... NOTE
>> Maintainer: ?Gertjan van den Burg <gertjanvandenburg at gmail.com>?
>>
>> New submission
>>
>> Possibly mis-spelled words in DESCRIPTION:
>>    GenSVM (8:18, 10:61, 15:2, 16:26, 19:11)
>>    Multiclass (4:22)
>>    SVMs (14:25, 15:42)
>>    misclassifications (11:49)
>>    multiclass (8:53, 14:14, 15:31)
>>
>>
>> These words are not mis-spelled, so this is a false positive.
>>
>> The second note is:
>>
>> * checking compiled code ... NOTE
>> File ?gensvm/libs/gensvm_wrapper.so?:
>>    Found ?rand?, possibly from ?rand? (C)
>>      Objects: ?gensvm/src/gensvm_cv_util.o?, ?gensvm/src/gensvm_init.o?,
>>        ?gensvm/lib/libgensvm.a?
>>    Found ?srand?, possibly from ?srand? (C)
>>      Objects: ?gensvm/src/gensvm_train.o?, ?gensvm/lib/libgensvm.a?
>>
>> Compiled code should not call entry points which might terminate R nor
>> write to stdout/stderr instead of to the console, nor use Fortran I/O
>> nor system RNGs.
>>
>> See ?Writing portable packages? in the ?Writing R Extensions? manual.
>>
>>
>> This is probably why the package is rejected. I have a valid use case for
>> using rand() and srand(): I'm trying to maintain compatibility of this
>> package with the corresponding Python package. By using rand en srand
>> users
>> can reproduce models in both languages.
>>
>> Does anyone have any ideas on how I can get the package excepted to CRAN?
>>
>> Thanks,
>>
>> Gertjan van den Burg
>>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
http://hadley.nz


From profjcnash at gmail.com  Wed Apr 18 20:13:10 2018
From: profjcnash at gmail.com (J C Nash)
Date: Wed, 18 Apr 2018 14:13:10 -0400
Subject: [R-pkg-devel] CRAN pretest archived because of 2 NOTEs
In-Reply-To: <CABdHhvHdHnrZtRM2ZADtrt1NvPz=VBQnUH1GN3oxcRYDufSMjg@mail.gmail.com>
References: <mailman.2627.9.1524045602.54835.r-package-devel@r-project.org>
 <203fb027-c08b-367e-57fa-ce420351917e@gmail.com>
 <CABdHhvHdHnrZtRM2ZADtrt1NvPz=VBQnUH1GN3oxcRYDufSMjg@mail.gmail.com>
Message-ID: <e09ae2c3-c75b-8cf1-fee9-59f476943130@gmail.com>

If NOTEs are going to be treated as errors, then a lot of infrastructure (all my
packages for optimization and nonlinear modelling, which are dependencies of
a few dozen other packages etc.) will disappear. This is because they have version
numbering I've been using in some form that pre-dates R and uses YYYY-M(M).D(D).
e.g., NOTE "Version contains large components (2018-3.28)"

I believe changing it to a "smaller" value will mean the submission is refused
on an ERROR since the numbering will be out of order.

So perhaps it is time either to revisit NOTEs to drop some unnecessary ones,
and also to make some careful decisions and change critical ones to WARNINGs or
ERRORs.

One of the major concerns I have is that it is desirable that CRAN be the
true repository for R packages, and that increased restrictions -- especially
if unnecessary -- will surely increase the movement to informal distribution
on other platforms like Github. Such fragmentation of the package universe
weakens R as a resource, and we see quite a lot of this recently.

I'm strongly in favour of having fairly strict standards, but also of ensuring
that only necessary restrictions are enforced. Even more, I believe we must
keep working to make satisfying the standards as easy as possible. R has done
a good job of this, but there is always room to improve.

JN




On 2018-04-18 01:40 PM, Hadley Wickham wrote:
> For the purposes of CRAN submission, you should basically treat every
> NOTE as an ERROR.
> 
> Hadley
> 
> On Wed, Apr 18, 2018 at 3:36 AM, Gertjan van den Burg
> <gertjanvandenburg at gmail.com> wrote:
>> While waiting to get this message posted to the list, I've solved the
>> problem by copying the stdlib rand() and srand() functions into my package
>> under a different name. This makes the check pass and ensures my RNG does
>> not interfere with R's RNG.
>>
>> I do think that if this NOTE causes immediate dismissal of a package, it
>> shouldn't be a NOTE but an ERROR. Otherwise it just leads to a lot of wasted
>> time waiting for a reply from the maintainers to respond to the note.
>>
>>> Dear all,
>>>
>>> My CRAN submission doesn't pass the pre-tests and gets archived. I've
>>> emailed cran-submissions at r-project.org explaining that these are false
>>> positives, but since I haven't heard back in 10 days I don't think anyone
>>> read that. Same thing for the submission comments (which also explained
>>> it).
>>>
>>> The first note is:
>>>
>>> * checking CRAN incoming feasibility ... NOTE
>>> Maintainer: ?Gertjan van den Burg <gertjanvandenburg at gmail.com>?
>>>
>>> New submission
>>>
>>> Possibly mis-spelled words in DESCRIPTION:
>>>    GenSVM (8:18, 10:61, 15:2, 16:26, 19:11)
>>>    Multiclass (4:22)
>>>    SVMs (14:25, 15:42)
>>>    misclassifications (11:49)
>>>    multiclass (8:53, 14:14, 15:31)
>>>
>>>
>>> These words are not mis-spelled, so this is a false positive.
>>>
>>> The second note is:
>>>
>>> * checking compiled code ... NOTE
>>> File ?gensvm/libs/gensvm_wrapper.so?:
>>>    Found ?rand?, possibly from ?rand? (C)
>>>      Objects: ?gensvm/src/gensvm_cv_util.o?, ?gensvm/src/gensvm_init.o?,
>>>        ?gensvm/lib/libgensvm.a?
>>>    Found ?srand?, possibly from ?srand? (C)
>>>      Objects: ?gensvm/src/gensvm_train.o?, ?gensvm/lib/libgensvm.a?
>>>
>>> Compiled code should not call entry points which might terminate R nor
>>> write to stdout/stderr instead of to the console, nor use Fortran I/O
>>> nor system RNGs.
>>>
>>> See ?Writing portable packages? in the ?Writing R Extensions? manual.
>>>
>>>
>>> This is probably why the package is rejected. I have a valid use case for
>>> using rand() and srand(): I'm trying to maintain compatibility of this
>>> package with the corresponding Python package. By using rand en srand
>>> users
>>> can reproduce models in both languages.
>>>
>>> Does anyone have any ideas on how I can get the package excepted to CRAN?
>>>
>>> Thanks,
>>>
>>> Gertjan van den Burg
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
>


From edd at debian.org  Wed Apr 18 21:00:14 2018
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 18 Apr 2018 14:00:14 -0500
Subject: [R-pkg-devel] CRAN pretest archived because of 2 NOTEs
In-Reply-To: <203fb027-c08b-367e-57fa-ce420351917e@gmail.com>
References: <mailman.2627.9.1524045602.54835.r-package-devel@r-project.org>
 <203fb027-c08b-367e-57fa-ce420351917e@gmail.com>
Message-ID: <23255.38334.148547.593857@rob.eddelbuettel.com>


On 18 April 2018 at 11:36, Gertjan van den Burg wrote:
| While waiting to get this message posted to the list, I've solved the 
| problem by copying the stdlib rand() and srand() functions into my 
| package under a different name. This makes the check pass and ensures my 
| RNG does not interfere with R's RNG.

I recommend against that. The check, while dated, is valid because many (old)
implementations of rand and srand were of (now known) poor quality.

You have R, you should use its RNGs. Your users may expect that. Accessing eg
runif is easy and documented, and we can trust the RNG behind it.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch.duncan at gmail.com  Wed Apr 18 21:29:52 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 18 Apr 2018 15:29:52 -0400
Subject: [R-pkg-devel] CRAN pretest archived because of 2 NOTEs
In-Reply-To: <e09ae2c3-c75b-8cf1-fee9-59f476943130@gmail.com>
References: <mailman.2627.9.1524045602.54835.r-package-devel@r-project.org>
 <203fb027-c08b-367e-57fa-ce420351917e@gmail.com>
 <CABdHhvHdHnrZtRM2ZADtrt1NvPz=VBQnUH1GN3oxcRYDufSMjg@mail.gmail.com>
 <e09ae2c3-c75b-8cf1-fee9-59f476943130@gmail.com>
Message-ID: <38db6df1-a2a3-5e47-c978-0beb7c970c81@gmail.com>

On 18/04/2018 2:13 PM, J C Nash wrote:
> If NOTEs are going to be treated as errors, then a lot of infrastructure (all my
> packages for optimization and nonlinear modelling, which are dependencies of
> a few dozen other packages etc.) will disappear. This is because they have version
> numbering I've been using in some form that pre-dates R and uses YYYY-M(M).D(D).
> e.g., NOTE "Version contains large components (2018-3.28)"

Hadley was expressing some general advice, not a policy change.  I think 
it's good advice:  get rid of NOTEs if you can.  You can't, so don't.

Duncan Murdoch

> 
> I believe changing it to a "smaller" value will mean the submission is refused
> on an ERROR since the numbering will be out of order.
> 
> So perhaps it is time either to revisit NOTEs to drop some unnecessary ones,
> and also to make some careful decisions and change critical ones to WARNINGs or
> ERRORs. >
> One of the major concerns I have is that it is desirable that CRAN be the
> true repository for R packages, and that increased restrictions -- especially
> if unnecessary -- will surely increase the movement to informal distribution
> on other platforms like Github. Such fragmentation of the package universe
> weakens R as a resource, and we see quite a lot of this recently.
> 
> I'm strongly in favour of having fairly strict standards, but also of ensuring
> that only necessary restrictions are enforced. Even more, I believe we must
> keep working to make satisfying the standards as easy as possible. R has done
> a good job of this, but there is always room to improve.
> 
> JN
> 
> 
> 
> 
> On 2018-04-18 01:40 PM, Hadley Wickham wrote:
>> For the purposes of CRAN submission, you should basically treat every
>> NOTE as an ERROR.
>>
>> Hadley
>>
>> On Wed, Apr 18, 2018 at 3:36 AM, Gertjan van den Burg
>> <gertjanvandenburg at gmail.com> wrote:
>>> While waiting to get this message posted to the list, I've solved the
>>> problem by copying the stdlib rand() and srand() functions into my package
>>> under a different name. This makes the check pass and ensures my RNG does
>>> not interfere with R's RNG.
>>>
>>> I do think that if this NOTE causes immediate dismissal of a package, it
>>> shouldn't be a NOTE but an ERROR. Otherwise it just leads to a lot of wasted
>>> time waiting for a reply from the maintainers to respond to the note.
>>>
>>>> Dear all,
>>>>
>>>> My CRAN submission doesn't pass the pre-tests and gets archived. I've
>>>> emailed cran-submissions at r-project.org explaining that these are false
>>>> positives, but since I haven't heard back in 10 days I don't think anyone
>>>> read that. Same thing for the submission comments (which also explained
>>>> it).
>>>>
>>>> The first note is:
>>>>
>>>> * checking CRAN incoming feasibility ... NOTE
>>>> Maintainer: ?Gertjan van den Burg <gertjanvandenburg at gmail.com>?
>>>>
>>>> New submission
>>>>
>>>> Possibly mis-spelled words in DESCRIPTION:
>>>>     GenSVM (8:18, 10:61, 15:2, 16:26, 19:11)
>>>>     Multiclass (4:22)
>>>>     SVMs (14:25, 15:42)
>>>>     misclassifications (11:49)
>>>>     multiclass (8:53, 14:14, 15:31)
>>>>
>>>>
>>>> These words are not mis-spelled, so this is a false positive.
>>>>
>>>> The second note is:
>>>>
>>>> * checking compiled code ... NOTE
>>>> File ?gensvm/libs/gensvm_wrapper.so?:
>>>>     Found ?rand?, possibly from ?rand? (C)
>>>>       Objects: ?gensvm/src/gensvm_cv_util.o?, ?gensvm/src/gensvm_init.o?,
>>>>         ?gensvm/lib/libgensvm.a?
>>>>     Found ?srand?, possibly from ?srand? (C)
>>>>       Objects: ?gensvm/src/gensvm_train.o?, ?gensvm/lib/libgensvm.a?
>>>>
>>>> Compiled code should not call entry points which might terminate R nor
>>>> write to stdout/stderr instead of to the console, nor use Fortran I/O
>>>> nor system RNGs.
>>>>
>>>> See ?Writing portable packages? in the ?Writing R Extensions? manual.
>>>>
>>>>
>>>> This is probably why the package is rejected. I have a valid use case for
>>>> using rand() and srand(): I'm trying to maintain compatibility of this
>>>> package with the corresponding Python package. By using rand en srand
>>>> users
>>>> can reproduce models in both languages.
>>>>
>>>> Does anyone have any ideas on how I can get the package excepted to CRAN?
>>>>
>>>> Thanks,
>>>>
>>>> Gertjan van den Burg
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From bbolker at gmail.com  Wed Apr 18 22:00:30 2018
From: bbolker at gmail.com (Ben Bolker)
Date: Wed, 18 Apr 2018 16:00:30 -0400
Subject: [R-pkg-devel] CRAN pretest archived because of 2 NOTEs
In-Reply-To: <e09ae2c3-c75b-8cf1-fee9-59f476943130@gmail.com>
References: <mailman.2627.9.1524045602.54835.r-package-devel@r-project.org>
 <203fb027-c08b-367e-57fa-ce420351917e@gmail.com>
 <CABdHhvHdHnrZtRM2ZADtrt1NvPz=VBQnUH1GN3oxcRYDufSMjg@mail.gmail.com>
 <e09ae2c3-c75b-8cf1-fee9-59f476943130@gmail.com>
Message-ID: <94b02b5b-c0a2-0453-9e03-4c937426d931@gmail.com>


  Your points are well taken, but it's also necessary (IMO) for the CRAN
maintainers to have some flexibility, while still being able to hold
package maintainers to account.

   Long-time package maintainers (like you) have some issues that new
submitters don't; the large-component check was "only" instituted three
years ago
<https://github.com/wch/r-source/commit/1923067f0d8fd691158548f58ba2e9a19e4b52f5>.
 As Duncan suggested,
CRAN maintainers are more likely to make allowances for long-time
maintainers ...

  In the spirit of your suggestion, I would say I'd like to see the
information provided by Dirk at
<http://dirk.eddelbuettel.com/blog/2017/08/10/> about providing
defaults/exceptions for the spell-checker made public/official --
several recent posts have shown package maintainers getting distracted
by spell-check false positives and missing potentially more serious
NOTEs.  (This information may exist elsewhere, but I couldn't find it
either in "Writing R Extensions" or the CRAN Repository Policy ...)


On 2018-04-18 02:13 PM, J C Nash wrote:
> If NOTEs are going to be treated as errors, then a lot of infrastructure (all my
> packages for optimization and nonlinear modelling, which are dependencies of
> a few dozen other packages etc.) will disappear. This is because they have version
> numbering I've been using in some form that pre-dates R and uses YYYY-M(M).D(D).
> e.g., NOTE "Version contains large components (2018-3.28)"
> 
> I believe changing it to a "smaller" value will mean the submission is refused
> on an ERROR since the numbering will be out of order.
> 
> So perhaps it is time either to revisit NOTEs to drop some unnecessary ones,
> and also to make some careful decisions and change critical ones to WARNINGs or
> ERRORs.
> 
> One of the major concerns I have is that it is desirable that CRAN be the
> true repository for R packages, and that increased restrictions -- especially
> if unnecessary -- will surely increase the movement to informal distribution
> on other platforms like Github. Such fragmentation of the package universe
> weakens R as a resource, and we see quite a lot of this recently.
> 
> I'm strongly in favour of having fairly strict standards, but also of ensuring
> that only necessary restrictions are enforced. Even more, I believe we must
> keep working to make satisfying the standards as easy as possible. R has done
> a good job of this, but there is always room to improve.
> 
> JN
> 
> 
> 
> 
> On 2018-04-18 01:40 PM, Hadley Wickham wrote:
>> For the purposes of CRAN submission, you should basically treat every
>> NOTE as an ERROR.
>>
>> Hadley
>>
>> On Wed, Apr 18, 2018 at 3:36 AM, Gertjan van den Burg
>> <gertjanvandenburg at gmail.com> wrote:
>>> While waiting to get this message posted to the list, I've solved the
>>> problem by copying the stdlib rand() and srand() functions into my package
>>> under a different name. This makes the check pass and ensures my RNG does
>>> not interfere with R's RNG.
>>>
>>> I do think that if this NOTE causes immediate dismissal of a package, it
>>> shouldn't be a NOTE but an ERROR. Otherwise it just leads to a lot of wasted
>>> time waiting for a reply from the maintainers to respond to the note.
>>>
>>>> Dear all,
>>>>
>>>> My CRAN submission doesn't pass the pre-tests and gets archived. I've
>>>> emailed cran-submissions at r-project.org explaining that these are false
>>>> positives, but since I haven't heard back in 10 days I don't think anyone
>>>> read that. Same thing for the submission comments (which also explained
>>>> it).
>>>>
>>>> The first note is:
>>>>
>>>> * checking CRAN incoming feasibility ... NOTE
>>>> Maintainer: ?Gertjan van den Burg <gertjanvandenburg at gmail.com>?
>>>>
>>>> New submission
>>>>
>>>> Possibly mis-spelled words in DESCRIPTION:
>>>>    GenSVM (8:18, 10:61, 15:2, 16:26, 19:11)
>>>>    Multiclass (4:22)
>>>>    SVMs (14:25, 15:42)
>>>>    misclassifications (11:49)
>>>>    multiclass (8:53, 14:14, 15:31)
>>>>
>>>>
>>>> These words are not mis-spelled, so this is a false positive.
>>>>
>>>> The second note is:
>>>>
>>>> * checking compiled code ... NOTE
>>>> File ?gensvm/libs/gensvm_wrapper.so?:
>>>>    Found ?rand?, possibly from ?rand? (C)
>>>>      Objects: ?gensvm/src/gensvm_cv_util.o?, ?gensvm/src/gensvm_init.o?,
>>>>        ?gensvm/lib/libgensvm.a?
>>>>    Found ?srand?, possibly from ?srand? (C)
>>>>      Objects: ?gensvm/src/gensvm_train.o?, ?gensvm/lib/libgensvm.a?
>>>>
>>>> Compiled code should not call entry points which might terminate R nor
>>>> write to stdout/stderr instead of to the console, nor use Fortran I/O
>>>> nor system RNGs.
>>>>
>>>> See ?Writing portable packages? in the ?Writing R Extensions? manual.
>>>>
>>>>
>>>> This is probably why the package is rejected. I have a valid use case for
>>>> using rand() and srand(): I'm trying to maintain compatibility of this
>>>> package with the corresponding Python package. By using rand en srand
>>>> users
>>>> can reproduce models in both languages.
>>>>
>>>> Does anyone have any ideas on how I can get the package excepted to CRAN?
>>>>
>>>> Thanks,
>>>>
>>>> Gertjan van den Burg
>>>>
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From gertjanvandenburg at gmail.com  Wed Apr 18 22:49:58 2018
From: gertjanvandenburg at gmail.com (Gertjan van den Burg)
Date: Wed, 18 Apr 2018 21:49:58 +0100
Subject: [R-pkg-devel] CRAN pretest archived because of 2 NOTEs
In-Reply-To: <23255.38334.148547.593857@rob.eddelbuettel.com>
References: <mailman.2627.9.1524045602.54835.r-package-devel@r-project.org>
 <203fb027-c08b-367e-57fa-ce420351917e@gmail.com>
 <23255.38334.148547.593857@rob.eddelbuettel.com>
Message-ID: <a37aace4-3f10-0993-76d6-4773bf66e946@gmail.com>

Thanks for your comment. Your suggestion wouldn't solve my original 
problem unfortunately, because then I'd have to reverse engineer R's RNG 
for my Python package. Besides, the quality of the random numbers 
doesn't really matter here, it only matters that they're the same across 
my packages.

Gertjan

On 04/18/2018 08:00 PM, Dirk Eddelbuettel wrote:
> On 18 April 2018 at 11:36, Gertjan van den Burg wrote:
> | While waiting to get this message posted to the list, I've solved the
> | problem by copying the stdlib rand() and srand() functions into my
> | package under a different name. This makes the check pass and ensures my
> | RNG does not interfere with R's RNG.
>
> I recommend against that. The check, while dated, is valid because many (old)
> implementations of rand and srand were of (now known) poor quality.
>
> You have R, you should use its RNGs. Your users may expect that. Accessing eg
> runif is easy and documented, and we can trust the RNG behind it.
>
> Dirk
>


From i.ucar86 at gmail.com  Wed Apr 18 23:01:05 2018
From: i.ucar86 at gmail.com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Wed, 18 Apr 2018 23:01:05 +0200
Subject: [R-pkg-devel] CRAN pretest archived because of 2 NOTEs
In-Reply-To: <a37aace4-3f10-0993-76d6-4773bf66e946@gmail.com>
References: <mailman.2627.9.1524045602.54835.r-package-devel@r-project.org>
 <203fb027-c08b-367e-57fa-ce420351917e@gmail.com>
 <23255.38334.148547.593857@rob.eddelbuettel.com>
 <a37aace4-3f10-0993-76d6-4773bf66e946@gmail.com>
Message-ID: <CALEXWq3oTou2hO-ko+M54OZP8FC1v7BPNfjGKi1=FHdsPMThfA@mail.gmail.com>

2018-04-18 22:49 GMT+02:00 Gertjan van den Burg <gertjanvandenburg at gmail.com>:
> Thanks for your comment. Your suggestion wouldn't solve my original problem
> unfortunately, because then I'd have to reverse engineer R's RNG for my
> Python package. Besides, the quality of the random numbers doesn't really
> matter here, it only matters that they're the same across my packages.

You could instead write a vignette instructing the user on how to
replace the default RNG with your SyncRNG. Wouldn't this solve the
problem?

I?aki

>
> Gertjan
>
> On 04/18/2018 08:00 PM, Dirk Eddelbuettel wrote:
>>
>> On 18 April 2018 at 11:36, Gertjan van den Burg wrote:
>> | While waiting to get this message posted to the list, I've solved the
>> | problem by copying the stdlib rand() and srand() functions into my
>> | package under a different name. This makes the check pass and ensures my
>> | RNG does not interfere with R's RNG.
>>
>> I recommend against that. The check, while dated, is valid because many
>> (old)
>> implementations of rand and srand were of (now known) poor quality.
>>
>> You have R, you should use its RNGs. Your users may expect that. Accessing
>> eg
>> runif is easy and documented, and we can trust the RNG behind it.
>>
>> Dirk
>>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From gertjanvandenburg at gmail.com  Wed Apr 18 23:47:51 2018
From: gertjanvandenburg at gmail.com (Gertjan van den Burg)
Date: Wed, 18 Apr 2018 22:47:51 +0100
Subject: [R-pkg-devel] CRAN pretest archived because of 2 NOTEs
In-Reply-To: <CALEXWq3oTou2hO-ko+M54OZP8FC1v7BPNfjGKi1=FHdsPMThfA@mail.gmail.com>
References: <mailman.2627.9.1524045602.54835.r-package-devel@r-project.org>
 <203fb027-c08b-367e-57fa-ce420351917e@gmail.com>
 <23255.38334.148547.593857@rob.eddelbuettel.com>
 <a37aace4-3f10-0993-76d6-4773bf66e946@gmail.com>
 <CALEXWq3oTou2hO-ko+M54OZP8FC1v7BPNfjGKi1=FHdsPMThfA@mail.gmail.com>
Message-ID: <8bf154f7-6e42-67e5-e6dc-6ac1d408695e@gmail.com>

Unless I'm missing something, I don't think this would work. The random 
numbers are generated in the C library and while I could replace the RNG 
I use now with the RNG from SyncRNG, requiring the users to take action 
for this seems to place an unnecessary burden on them.

Gertjan

On 04/18/2018 10:01 PM, I?aki ?car wrote:
> 2018-04-18 22:49 GMT+02:00 Gertjan van den Burg <gertjanvandenburg at gmail.com>:
>> Thanks for your comment. Your suggestion wouldn't solve my original problem
>> unfortunately, because then I'd have to reverse engineer R's RNG for my
>> Python package. Besides, the quality of the random numbers doesn't really
>> matter here, it only matters that they're the same across my packages.
> You could instead write a vignette instructing the user on how to
> replace the default RNG with your SyncRNG. Wouldn't this solve the
> problem?
>
> I?aki


From alexandre.courtiol at gmail.com  Thu Apr 19 18:33:28 2018
From: alexandre.courtiol at gmail.com (Alexandre Courtiol)
Date: Thu, 19 Apr 2018 18:33:28 +0200
Subject: [R-pkg-devel] vignette via devtools: sometimes found,
 sometimes not (same package)
In-Reply-To: <CAJuCY5w_cfc0FDRfkYE7yr9G7HDDvam3iPNMDenCqTS2RZxjoA@mail.gmail.com>
References: <CAERMt4c6TsD_fJCJiyGQJyYDfE6X6rww0W2SkSRjaJUbtgmipA@mail.gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F656E4A@MBXP01.ds.man.ac.uk>
 <CAERMt4dRzhhvqqYLJFgCFPwKAxkW0i7CV-tKwvsYz=tcEjBeRg@mail.gmail.com>
 <CAJuCY5w_cfc0FDRfkYE7yr9G7HDDvam3iPNMDenCqTS2RZxjoA@mail.gmail.com>
Message-ID: <CAERMt4d=-LRSsYKRT1BHxsj8J8GwW28aE8VQTt5wL27LUFwhQw@mail.gmail.com>

Thanks a lot Thierry, I was happy to discover and implement a "drat"
installation workflow.
Unfortunately it did not solve the issue (but I will stick to drat).
Also, I checked the sessionInfo() and could not find any package version
discriminating accurately between computers that shows vignettes from those
who do not.
Only Windows computer have the issue but this proves nothing (and other
computers with the same OS version are fine).
Goergi, I did not yet retried outside RStudio (I am trying not to waste too
much time at the beginning of each course...
I wish I could hijack a problematic laptop but they don't let me do it as
they need them).
++
Alex


On 17 April 2018 at 10:42, Thierry Onkelinx <thierry.onkelinx at inbo.be>
wrote:

> Dear Alex,
>
> Have a look at drat
> (http://eddelbuettel.github.io/drat/DratForPackageAuthors.html). This
> makes it easier to distribute prepackaged R packages (including When
> you uploaded a new version, then the student would only have to do
> drat::addRepo("your_repo") and then install.pakages("LM2GLMM") or
> update.packages()
>
> Best regards,
>
> ir. Thierry Onkelinx
> Statisticus / Statistician
>
> Vlaamse Overheid / Government of Flanders
> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
> AND FOREST
> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
> thierry.onkelinx at inbo.be
> Havenlaan 88 bus 73, 1000 Brussel
> www.inbo.be
>
> ////////////////////////////////////////////////////////////
> ///////////////////////////////
> To call in the statistician after the experiment is done may be no
> more than asking him to perform a post-mortem examination: he may be
> able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
> The plural of anecdote is not data. ~ Roger Brinner
> The combination of some data and an aching desire for an answer does
> not ensure that a reasonable answer can be extracted from a given body
> of data. ~ John Tukey
> ////////////////////////////////////////////////////////////
> ///////////////////////////////
>
>
>
>
> 2018-04-16 19:38 GMT+02:00 Alexandre Courtiol <
> alexandre.courtiol at gmail.com>:
> > Re,
> >
> > On 16 April 2018 at 17:35, Georgi Boshnakov <
> > georgi.boshnakov at manchester.ac.uk> wrote:
> >
> >> Hi,
> >>
> >> The problem is indeed difficult to debug but there are things that can
> be
> >> done to narrow it down.
> >>
> >> 1. Are there 1/3 unlucky computers fixed? (I.e does the problem occur
> >> always on the same computers) Also, do you really mean computer or user?
> >>
> >
> > Yes, I mean computer, not user.
> >
> >>
> >> 2. Are the students working under R studio? If so, does the same problem
> >> appear if the same procedure is run outside R studio.
> >>
> >
> > I will try tomorrow (but from memory I think the answer will be yes).
> >
> >>
> >> 3. Further to 2.,  You mention development mode - do (some) students
> also
> >> have a copy of your repository? This may be aproblem if they don't
> update
> >> it too.
> >>
> >
> > No, only me has the devel version.
> >
> >>
> >> 4. What happens if R is restarted?
> >
> >
> > I will try tomorrow (but I think the answer will be nothing).
> >
> >
> >> 5. It may be worth checking .Rprofle and similar for the concerned
> >> computers (or users, see 1.)
> >>
> >
> > I will try as well but most had a fresh install and did not mess with
> > settings.
> >
> >>
> >> Hope this is of some help.
> >>
> >
> > I will look at all this and also gather the session infos as Ben
> suggested.
> > I think I know how to proceed to get to the bottom of that, but I was
> just
> > hoping that the problem was already well known and the answer as well...
> > If it is for anyone, please reply. Otherwise, I will investigate.
> > Thanks to everyone.
> > Alex
> >
> >
> >>
> >>
> >>  Georgi Boshnakov
> >>
> >>
> >> ________________________________________
> >> From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf
> >> of Alexandre Courtiol [alexandre.courtiol at gmail.com]
> >> Sent: 16 April 2018 14:40
> >> To: List r-package-devel
> >> Subject: [R-pkg-devel] vignette via devtools: sometimes found, sometimes
> >> not (same package)
> >>
> >> Dear all,
> >> I am teaching a class and for that I created a R package that mostly
> >> contains vignettes (the slides of the course).
> >> I host the package on GitHub because I want the students to download
> every
> >> day the latest version of the package.
> >> Building the vignettes takes a couple of hours so I pre-build the
> vignettes
> >> using devtools::build_vignettes before pushing my updates to GitHub.
> >> The student install the package using
> >> devtools::install_github("courtiol/LM2GLMM").
> >> Then, they do library(LM2GLMM) and browseVignettes(package =
> "LM2GLMM")...
> >>
> >> ... and that works on 2/3 of the computers, for the others it says
> >> vignettes not found.
> >>
> >> Any idea why and what can I do to make it 100% success?
> >> Of course on my laptop it works, so I cannot investigate.
> >> Also, since they all use different versions of R, devtools or OS... I
> would
> >> like to know the one thing that must be changed if it comes from that
> (but
> >> I am not sure it does).
> >>
> >> I have added a back up function that works for the 1/3 of unfortunate
> >> students:
> >>
> >> get_vignettes <- function() {
> >>   utils::browseURL(paste0(find.package("LM2GLMM"), "/doc/")) ## for
> >> installed
> >>   utils::browseURL(paste0(find.package("LM2GLMM"), "/inst/doc/")) ##
> for
> >> development
> >>   return(invisible(NULL))
> >> }
> >>
> >> This functions opens de vignette folder and that shows that all the
> >> students actually have the html files installed correctly. But it is
> ugly
> >> because then they have to find the good html file and so forth, so I
> would
> >> rather have a better solution.
> >>
> >> Many thanks,
> >>
> >> Alex
> >>
> >> --
> >> Alexandre Courtiol
> >>
> >> http://sites.google.com/site/alexandrecourtiol/home
> >>
> >> *"Science is the belief in the ignorance of experts"*, R. Feynman
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> >
> >
> > --
> > Alexandre Courtiol
> >
> > http://sites.google.com/site/alexandrecourtiol/home
> >
> > *"Science is the belief in the ignorance of experts"*, R. Feynman
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Alexandre Courtiol

http://sites.google.com/site/alexandrecourtiol/home

*"Science is the belief in the ignorance of experts"*, R. Feynman

	[[alternative HTML version deleted]]


From thierry.onkelinx at inbo.be  Fri Apr 20 09:14:44 2018
From: thierry.onkelinx at inbo.be (Thierry Onkelinx)
Date: Fri, 20 Apr 2018 09:14:44 +0200
Subject: [R-pkg-devel] vignette via devtools: sometimes found,
 sometimes not (same package)
In-Reply-To: <CAERMt4d=-LRSsYKRT1BHxsj8J8GwW28aE8VQTt5wL27LUFwhQw@mail.gmail.com>
References: <CAERMt4c6TsD_fJCJiyGQJyYDfE6X6rww0W2SkSRjaJUbtgmipA@mail.gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F656E4A@MBXP01.ds.man.ac.uk>
 <CAERMt4dRzhhvqqYLJFgCFPwKAxkW0i7CV-tKwvsYz=tcEjBeRg@mail.gmail.com>
 <CAJuCY5w_cfc0FDRfkYE7yr9G7HDDvam3iPNMDenCqTS2RZxjoA@mail.gmail.com>
 <CAERMt4d=-LRSsYKRT1BHxsj8J8GwW28aE8VQTt5wL27LUFwhQw@mail.gmail.com>
Message-ID: <CAJuCY5zp0PP9y0qHceg-+UAO6R8c_oUBrZHgjfEo_wCq-3xP9w@mail.gmail.com>

Dear Alex,

Another idea is to use pkgdown (http://pkgdown.r-lib.org) to convert
all the documentation of your package (include the vignettes) into a
website. Then you make that available to your students, e.g. through
github pages.

Best regards,

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
AND FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no
more than asking him to perform a post-mortem examination: he may be
able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does
not ensure that a reasonable answer can be extracted from a given body
of data. ~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////




2018-04-19 18:33 GMT+02:00 Alexandre Courtiol <alexandre.courtiol at gmail.com>:
> Thanks a lot Thierry, I was happy to discover and implement a "drat"
> installation workflow.
> Unfortunately it did not solve the issue (but I will stick to drat).
> Also, I checked the sessionInfo() and could not find any package version
> discriminating accurately between computers that shows vignettes from those
> who do not.
> Only Windows computer have the issue but this proves nothing (and other
> computers with the same OS version are fine).
> Goergi, I did not yet retried outside RStudio (I am trying not to waste too
> much time at the beginning of each course...
> I wish I could hijack a problematic laptop but they don't let me do it as
> they need them).
> ++
> Alex
>
>
> On 17 April 2018 at 10:42, Thierry Onkelinx <thierry.onkelinx at inbo.be>
> wrote:
>>
>> Dear Alex,
>>
>> Have a look at drat
>> (http://eddelbuettel.github.io/drat/DratForPackageAuthors.html). This
>> makes it easier to distribute prepackaged R packages (including When
>> you uploaded a new version, then the student would only have to do
>> drat::addRepo("your_repo") and then install.pakages("LM2GLMM") or
>> update.packages()
>>
>> Best regards,
>>
>> ir. Thierry Onkelinx
>> Statisticus / Statistician
>>
>> Vlaamse Overheid / Government of Flanders
>> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
>> AND FOREST
>> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
>> thierry.onkelinx at inbo.be
>> Havenlaan 88 bus 73, 1000 Brussel
>> www.inbo.be
>>
>>
>> ///////////////////////////////////////////////////////////////////////////////////////////
>> To call in the statistician after the experiment is done may be no
>> more than asking him to perform a post-mortem examination: he may be
>> able to say what the experiment died of. ~ Sir Ronald Aylmer Fisher
>> The plural of anecdote is not data. ~ Roger Brinner
>> The combination of some data and an aching desire for an answer does
>> not ensure that a reasonable answer can be extracted from a given body
>> of data. ~ John Tukey
>>
>> ///////////////////////////////////////////////////////////////////////////////////////////
>>
>>
>>
>>
>> 2018-04-16 19:38 GMT+02:00 Alexandre Courtiol
>> <alexandre.courtiol at gmail.com>:
>> > Re,
>> >
>> > On 16 April 2018 at 17:35, Georgi Boshnakov <
>> > georgi.boshnakov at manchester.ac.uk> wrote:
>> >
>> >> Hi,
>> >>
>> >> The problem is indeed difficult to debug but there are things that can
>> >> be
>> >> done to narrow it down.
>> >>
>> >> 1. Are there 1/3 unlucky computers fixed? (I.e does the problem occur
>> >> always on the same computers) Also, do you really mean computer or
>> >> user?
>> >>
>> >
>> > Yes, I mean computer, not user.
>> >
>> >>
>> >> 2. Are the students working under R studio? If so, does the same
>> >> problem
>> >> appear if the same procedure is run outside R studio.
>> >>
>> >
>> > I will try tomorrow (but from memory I think the answer will be yes).
>> >
>> >>
>> >> 3. Further to 2.,  You mention development mode - do (some) students
>> >> also
>> >> have a copy of your repository? This may be aproblem if they don't
>> >> update
>> >> it too.
>> >>
>> >
>> > No, only me has the devel version.
>> >
>> >>
>> >> 4. What happens if R is restarted?
>> >
>> >
>> > I will try tomorrow (but I think the answer will be nothing).
>> >
>> >
>> >> 5. It may be worth checking .Rprofle and similar for the concerned
>> >> computers (or users, see 1.)
>> >>
>> >
>> > I will try as well but most had a fresh install and did not mess with
>> > settings.
>> >
>> >>
>> >> Hope this is of some help.
>> >>
>> >
>> > I will look at all this and also gather the session infos as Ben
>> > suggested.
>> > I think I know how to proceed to get to the bottom of that, but I was
>> > just
>> > hoping that the problem was already well known and the answer as well...
>> > If it is for anyone, please reply. Otherwise, I will investigate.
>> > Thanks to everyone.
>> > Alex
>> >
>> >
>> >>
>> >>
>> >>  Georgi Boshnakov
>> >>
>> >>
>> >> ________________________________________
>> >> From: R-package-devel [r-package-devel-bounces at r-project.org] on behalf
>> >> of Alexandre Courtiol [alexandre.courtiol at gmail.com]
>> >> Sent: 16 April 2018 14:40
>> >> To: List r-package-devel
>> >> Subject: [R-pkg-devel] vignette via devtools: sometimes found,
>> >> sometimes
>> >> not (same package)
>> >>
>> >> Dear all,
>> >> I am teaching a class and for that I created a R package that mostly
>> >> contains vignettes (the slides of the course).
>> >> I host the package on GitHub because I want the students to download
>> >> every
>> >> day the latest version of the package.
>> >> Building the vignettes takes a couple of hours so I pre-build the
>> >> vignettes
>> >> using devtools::build_vignettes before pushing my updates to GitHub.
>> >> The student install the package using
>> >> devtools::install_github("courtiol/LM2GLMM").
>> >> Then, they do library(LM2GLMM) and browseVignettes(package =
>> >> "LM2GLMM")...
>> >>
>> >> ... and that works on 2/3 of the computers, for the others it says
>> >> vignettes not found.
>> >>
>> >> Any idea why and what can I do to make it 100% success?
>> >> Of course on my laptop it works, so I cannot investigate.
>> >> Also, since they all use different versions of R, devtools or OS... I
>> >> would
>> >> like to know the one thing that must be changed if it comes from that
>> >> (but
>> >> I am not sure it does).
>> >>
>> >> I have added a back up function that works for the 1/3 of unfortunate
>> >> students:
>> >>
>> >> get_vignettes <- function() {
>> >>   utils::browseURL(paste0(find.package("LM2GLMM"), "/doc/")) ## for
>> >> installed
>> >>   utils::browseURL(paste0(find.package("LM2GLMM"), "/inst/doc/")) ##
>> >> for
>> >> development
>> >>   return(invisible(NULL))
>> >> }
>> >>
>> >> This functions opens de vignette folder and that shows that all the
>> >> students actually have the html files installed correctly. But it is
>> >> ugly
>> >> because then they have to find the good html file and so forth, so I
>> >> would
>> >> rather have a better solution.
>> >>
>> >> Many thanks,
>> >>
>> >> Alex
>> >>
>> >> --
>> >> Alexandre Courtiol
>> >>
>> >> http://sites.google.com/site/alexandrecourtiol/home
>> >>
>> >> *"Science is the belief in the ignorance of experts"*, R. Feynman
>> >>
>> >>         [[alternative HTML version deleted]]
>> >>
>> >> ______________________________________________
>> >> R-package-devel at r-project.org mailing list
>> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >>
>> >
>> >
>> >
>> > --
>> > Alexandre Courtiol
>> >
>> > http://sites.google.com/site/alexandrecourtiol/home
>> >
>> > *"Science is the belief in the ignorance of experts"*, R. Feynman
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>
>
> --
> Alexandre Courtiol
>
> http://sites.google.com/site/alexandrecourtiol/home
>
> "Science is the belief in the ignorance of experts", R. Feynman


From maechler at stat.math.ethz.ch  Fri Apr 20 09:59:56 2018
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri, 20 Apr 2018 09:59:56 +0200
Subject: [R-pkg-devel] vignette via devtools: sometimes found,
 sometimes not (same package)
In-Reply-To: <CAJuCY5zp0PP9y0qHceg-+UAO6R8c_oUBrZHgjfEo_wCq-3xP9w@mail.gmail.com>
References: <CAERMt4c6TsD_fJCJiyGQJyYDfE6X6rww0W2SkSRjaJUbtgmipA@mail.gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F656E4A@MBXP01.ds.man.ac.uk>
 <CAERMt4dRzhhvqqYLJFgCFPwKAxkW0i7CV-tKwvsYz=tcEjBeRg@mail.gmail.com>
 <CAJuCY5w_cfc0FDRfkYE7yr9G7HDDvam3iPNMDenCqTS2RZxjoA@mail.gmail.com>
 <CAERMt4d=-LRSsYKRT1BHxsj8J8GwW28aE8VQTt5wL27LUFwhQw@mail.gmail.com>
 <CAJuCY5zp0PP9y0qHceg-+UAO6R8c_oUBrZHgjfEo_wCq-3xP9w@mail.gmail.com>
Message-ID: <23257.40444.77697.800074@stat.math.ethz.ch>

>>>>> Thierry Onkelinx <thierry.onkelinx at inbo.be>
>>>>>     on Fri, 20 Apr 2018 09:14:44 +0200 writes:

    > Dear Alex, Another idea is to use pkgdown
    > (http://pkgdown.r-lib.org) to convert all the
    > documentation of your package (include the vignettes) into
    > a website. Then you make that available to your students,
    > e.g. through github pages.

Hmm, sounds nice .. at first:  In teaching (and research!) I particularly
emphasize people use CRAN (or Bioconductor) packages.

Why on earth is pkgdown not on CRAN ?

Martin Maechler
ETH Zurich

    > Best regards,

    > ir. Thierry Onkelinx Statisticus / Statistician

    > Vlaamse Overheid / Government of Flanders INSTITUUT VOOR
    > NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
    > AND FOREST Team Biometrie & Kwaliteitszorg / Team
    > Biometrics & Quality Assurance thierry.onkelinx at inbo.be
    > Havenlaan 88 bus 73, 1000 Brussel www.inbo.be

    > ///////////////////////////////////////////////////////////////////////////////////////////
    > To call in the statistician after the experiment is done
    > may be no more than asking him to perform a post-mortem
    > examination: he may be able to say what the experiment
    > died of. ~ Sir Ronald Aylmer Fisher The plural of anecdote
    > is not data. ~ Roger Brinner The combination of some data
    > and an aching desire for an answer does not ensure that a
    > reasonable answer can be extracted from a given body of
    > data. ~ John Tukey
    > ///////////////////////////////////////////////////////////////////////////////////////////




    > 2018-04-19 18:33 GMT+02:00 Alexandre Courtiol
    > <alexandre.courtiol at gmail.com>:
    >> Thanks a lot Thierry, I was happy to discover and
    >> implement a "drat" installation workflow.  Unfortunately
    >> it did not solve the issue (but I will stick to drat).
    >> Also, I checked the sessionInfo() and could not find any
    >> package version discriminating accurately between
    >> computers that shows vignettes from those who do not.
    >> Only Windows computer have the issue but this proves
    >> nothing (and other computers with the same OS version are
    >> fine).  Goergi, I did not yet retried outside RStudio (I
    >> am trying not to waste too much time at the beginning of
    >> each course...  I wish I could hijack a problematic
    >> laptop but they don't let me do it as they need them).
    >> ++ Alex
    >> 
    >> 
    >> On 17 April 2018 at 10:42, Thierry Onkelinx
    >> <thierry.onkelinx at inbo.be> wrote:
    >>> 
    >>> Dear Alex,
    >>> 
    >>> Have a look at drat
    >>> (http://eddelbuettel.github.io/drat/DratForPackageAuthors.html). This
    >>> makes it easier to distribute prepackaged R packages
    >>> (including When you uploaded a new version, then the
    >>> student would only have to do drat::addRepo("your_repo")
    >>> and then install.pakages("LM2GLMM") or update.packages()
    >>> 
    >>> Best regards,
    >>> 
    >>> ir. Thierry Onkelinx Statisticus / Statistician
    >>> 
    >>> Vlaamse Overheid / Government of Flanders INSTITUUT VOOR
    >>> NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
    >>> AND FOREST Team Biometrie & Kwaliteitszorg / Team
    >>> Biometrics & Quality Assurance thierry.onkelinx at inbo.be
    >>> Havenlaan 88 bus 73, 1000 Brussel www.inbo.be
    >>> 
    >>> 
    >>> ///////////////////////////////////////////////////////////////////////////////////////////
    >>> To call in the statistician after the experiment is done
    >>> may be no more than asking him to perform a post-mortem
    >>> examination: he may be able to say what the experiment
    >>> died of. ~ Sir Ronald Aylmer Fisher The plural of
    >>> anecdote is not data. ~ Roger Brinner The combination of
    >>> some data and an aching desire for an answer does not
    >>> ensure that a reasonable answer can be extracted from a
    >>> given body of data. ~ John Tukey
    >>> 
    >>> ///////////////////////////////////////////////////////////////////////////////////////////
    >>> 
    >>> 
    >>> 
    >>> 
    >>> 2018-04-16 19:38 GMT+02:00 Alexandre Courtiol
    >>> <alexandre.courtiol at gmail.com>: > Re,
    >>> >
    >>> > On 16 April 2018 at 17:35, Georgi Boshnakov < >
    >>> georgi.boshnakov at manchester.ac.uk> wrote:
    >>> >
    >>> >> Hi,
    >>> >>
    >>> >> The problem is indeed difficult to debug but there
    >>> are things that can >> be >> done to narrow it down.
    >>> >>
    >>> >> 1. Are there 1/3 unlucky computers fixed? (I.e does
    >>> the problem occur >> always on the same computers) Also,
    >>> do you really mean computer or >> user?
    >>> >>
    >>> >
    >>> > Yes, I mean computer, not user.
    >>> >
    >>> >>
    >>> >> 2. Are the students working under R studio? If so,
    >>> does the same >> problem >> appear if the same procedure
    >>> is run outside R studio.
    >>> >>
    >>> >
    >>> > I will try tomorrow (but from memory I think the
    >>> answer will be yes).
    >>> >
    >>> >>
    >>> >> 3. Further to 2., You mention development mode - do
    >>> (some) students >> also >> have a copy of your
    >>> repository? This may be aproblem if they don't >> update
    >>> >> it too.
    >>> >>
    >>> >
    >>> > No, only me has the devel version.
    >>> >
    >>> >>
    >>> >> 4. What happens if R is restarted?
    >>> >
    >>> >
    >>> > I will try tomorrow (but I think the answer will be
    >>> nothing).
    >>> >
    >>> >
    >>> >> 5. It may be worth checking .Rprofle and similar for
    >>> the concerned >> computers (or users, see 1.)
    >>> >>
    >>> >
    >>> > I will try as well but most had a fresh install and
    >>> did not mess with > settings.
    >>> >
    >>> >>
    >>> >> Hope this is of some help.
    >>> >>
    >>> >
    >>> > I will look at all this and also gather the session
    >>> infos as Ben > suggested.  > I think I know how to
    >>> proceed to get to the bottom of that, but I was > just >
    >>> hoping that the problem was already well known and the
    >>> answer as well...  > If it is for anyone, please
    >>> reply. Otherwise, I will investigate.  > Thanks to
    >>> everyone.  > Alex
    >>> >
    >>> >
    >>> >>
    >>> >>
    >>> >> Georgi Boshnakov
    >>> >>
    >>> >>
    >>> >> ________________________________________ >> From:
    >>> R-package-devel [r-package-devel-bounces at r-project.org]
    >>> on behalf >> of Alexandre Courtiol
    >>> [alexandre.courtiol at gmail.com] >> Sent: 16 April 2018
    >>> 14:40 >> To: List r-package-devel >> Subject:
    >>> [R-pkg-devel] vignette via devtools: sometimes found, >>
    >>> sometimes >> not (same package)
    >>> >>
    >>> >> Dear all, >> I am teaching a class and for that I
    >>> created a R package that mostly >> contains vignettes
    >>> (the slides of the course).  >> I host the package on
    >>> GitHub because I want the students to download >> every
    >>> >> day the latest version of the package.  >> Building
    >>> the vignettes takes a couple of hours so I pre-build the
    >>> >> vignettes >> using devtools::build_vignettes before
    >>> pushing my updates to GitHub.  >> The student install
    >>> the package using >>
    >>> devtools::install_github("courtiol/LM2GLMM").  >> Then,
    >>> they do library(LM2GLMM) and browseVignettes(package =
    >>> >> "LM2GLMM")...
    >>> >>
    >>> >> ... and that works on 2/3 of the computers, for the
    >>> others it says >> vignettes not found.
    >>> >>
    >>> >> Any idea why and what can I do to make it 100%
    >>> success?  >> Of course on my laptop it works, so I
    >>> cannot investigate.  >> Also, since they all use
    >>> different versions of R, devtools or OS... I >> would >>
    >>> like to know the one thing that must be changed if it
    >>> comes from that >> (but >> I am not sure it does).
    >>> >>
    >>> >> I have added a back up function that works for the
    >>> 1/3 of unfortunate >> students:
    >>> >>
    >>> >> get_vignettes <- function() { >>
    >>> utils::browseURL(paste0(find.package("LM2GLMM"),
    >>> "/doc/")) ## for >> installed >>
    >>> utils::browseURL(paste0(find.package("LM2GLMM"),
    >>> "/inst/doc/")) ## >> for >> development >>
    >>> return(invisible(NULL)) >> }
    >>> >>
    >>> >> This functions opens de vignette folder and that
    >>> shows that all the >> students actually have the html
    >>> files installed correctly. But it is >> ugly >> because
    >>> then they have to find the good html file and so forth,
    >>> so I >> would >> rather have a better solution.
    >>> >>
    >>> >> Many thanks,
    >>> >>
    >>> >> Alex
    >>> >>
    >>> >> --
    >>> >> Alexandre Courtiol
    >>> >>
    >>> >> http://sites.google.com/site/alexandrecourtiol/home
    >>> >>
    >>> >> *"Science is the belief in the ignorance of
    >>> experts"*, R. Feynman
    >>> >>
    >>> >> [[alternative HTML version deleted]]
    >>> >>
    >>> >> ______________________________________________ >>
    >>> R-package-devel at r-project.org mailing list >>
    >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
    >>> >>
    >>> >
    >>> >
    >>> >
    >>> > --
    >>> > Alexandre Courtiol
    >>> >
    >>> > http://sites.google.com/site/alexandrecourtiol/home
    >>> >
    >>> > *"Science is the belief in the ignorance of experts"*,
    >>> R. Feynman
    >>> >
    >>> > [[alternative HTML version deleted]]
    >>> >
    >>> > ______________________________________________ >
    >>> R-package-devel at r-project.org mailing list >
    >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
    >> 
    >> 
    >> 
    >> 
    >> --
    >> Alexandre Courtiol
    >> 
    >> http://sites.google.com/site/alexandrecourtiol/home
    >> 
    >> "Science is the belief in the ignorance of experts",
    >> R. Feynman

    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ddhervas at yahoo.es  Fri Apr 20 21:53:50 2018
From: ddhervas at yahoo.es (=?UTF-8?Q?David_Herv=C3=A1s?=)
Date: Fri, 20 Apr 2018 19:53:50 +0000 (UTC)
Subject: NOTE regarding dependencies in R code: Missing or unexported object
References: <1887366047.4361654.1524254030638.ref@mail.yahoo.com>
Message-ID: <1887366047.4361654.1524254030638@mail.yahoo.com>

Hi,
I have sent my package "clickR" to CRAN and was asked to fix the following NOTE:
* checking dependencies in R code ... NOTE
Missing or unexported object: 'lmerTest::summary'
I'm not sure what's going on, here is the Imports section of my DESCRIPTION file:
Imports: beeswarm, boot, lme4, lmerTest, methods, ReporteRs, xtable



Here are the first lines of the function causing this NOTE:
report.merModLmerTest<-function(x, file=NULL, type="word", digits=3, digitspvals=3,? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? font=ifelse(Sys.info()["sysname"] == "Windows", "Arial",? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "Helvetica")[[1]], pointsize=11, info=TRUE, ...){? sx <- lmerTest::summary(x)? cor <- as.data.frame(lme4::VarCorr(x))? ...

And here is the output from?getNamespaceExports("lmerTest")?where "summary" is listed at position [23]

 [1] "lmer"? ? ? ? ? ? ? ? ? ?"lsmeansLT"? ? ? ? ? ? ? ".__T__is.infinite:base"?[4] ".__T__as.integer:base"? ".__T__as.numeric:base"? ".__T__%*%:base"? ? ? ???[7] ".__T__dim:base"? ? ? ? ?".__T__summary:base"? ? ?".__T__$<-:base"? ? ? ??[10] ".__T__^:base"? ? ? ? ? ?".__T__sum:base"? ? ? ? ?".__T__rep:base"? ? ? ??[13] ".__T__*:base"? ? ? ? ? ?".__T__[<-:base"? ? ? ? ?".__T__as.logical:base"?[16] ".__T__dimnames:base"? ? ".__T__%/%:base"? ? ? ? ?".__T__prod:base"? ? ? ?[19] ".__T__[[<-:base"? ? ? ? ".__T__/:base"? ? ? ? ? ?"step"? ? ? ? ? ? ? ? ??[22] "calcSatterth"? ? ? ? ? ?"summary"? ? ? ? ? ? ? ? ".__T__anova:stats"? ? ?[25] ".__T__is.finite:base"? ?".__T__anyNA:base"? ? ? ?".__T__!:base"? ? ? ? ??[28] ".__T__all:base"? ? ? ? ?".__T__+:base"? ? ? ? ? ?".__T__any:base"? ? ? ??[31] ".__T__dim<-:base"? ? ? ?".__T__-:base"? ? ? ? ? ?".__T__[:base"? ? ? ? ??[34] "anova"? ? ? ? ? ? ? ? ? "difflsmeans"? ? ? ? ? ? "lsmeans"? ? ? ? ? ? ? ?[37] "rand"? ? ? ? ? ? ? ? ? ?".__C__merModLmerTest"? ?".__T__length:base"? ? ?[40] ".__T__is.na:base"? ? ? ?".__T__dimnames<-:base"? ".__T__&:base"? ? ? ? ??[43] ".__T__%%:base"? ? ? ? ? ".__T__$:base"? ?


I have tried to reproduce this problem in my computer with different versions of R (3.4.4, 3.5 RC and R-devel) and only get the NOTE when performing the check with R-devel.
What should I do to fix this?
	[[alternative HTML version deleted]]


From rune.haubo at gmail.com  Sat Apr 21 16:27:43 2018
From: rune.haubo at gmail.com (Rune Haubo)
Date: Sat, 21 Apr 2018 16:27:43 +0200
Subject: [R-pkg-devel] NOTE regarding dependencies in R code: Missing or
 unexported object
In-Reply-To: <mailman.2641.1484.1524310155.1209.r-package-devel@r-project.org>
References: <1887366047.4361654.1524254030638.ref@mail.yahoo.com>
 <mailman.2641.1484.1524310155.1209.r-package-devel@r-project.org>
Message-ID: <CAG_uk932rU7joKTt_Y5qf5krGb+SMRf4j8KaFNstJoRSuOB1RQ@mail.gmail.com>

I don't think 'summary' is actually exported by lmerTest (version >=  3.0-0):

library(lmerTest)
fm <- lmer(Informed.liking ~ Gender + Information * Product + (1 | Consumer) +
             (1 | Consumer:Product), data=ham)
lmerTest::summary(fm) # gives: Error: 'summary' is not an exported
object from 'namespace:lmerTest'

On the other hand

summary(fm)

works just fine. lmerTest defines the S3 method 'summary' for
'lmerModLmerTest' objects, so if you change  sx <-
lmerTest::summary(x)  to  sx <- summary(x) you should be fine assuming
that x is of class 'lmerModLmerTest'.

For more details see
https://stat.ethz.ch/pipermail/r-sig-mixed-models/2018q1/026596.html
and perhaps https://github.com/runehaubo/lmerTestR/blob/master/pkg_notes/new_lmerTest.pdf
(which you were also pointed to previously).

Best regards
Rune


On 20 April 2018 at 21:53, David Herv?s via R-package-devel
<r-package-devel at r-project.org> wrote:
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
> ---------- Forwarded message ----------
> From: "David Herv?s" <ddhervas at yahoo.es>
> To: "r-package-devel at r-project.org" <r-package-devel at r-project.org>
> Cc:
> Bcc:
> Date: Fri, 20 Apr 2018 19:53:50 +0000 (UTC)
> Subject: NOTE regarding dependencies in R code: Missing or unexported object
> Hi,
> I have sent my package "clickR" to CRAN and was asked to fix the following NOTE:
> * checking dependencies in R code ... NOTE
> Missing or unexported object: 'lmerTest::summary'
> I'm not sure what's going on, here is the Imports section of my DESCRIPTION file:
> Imports: beeswarm, boot, lme4, lmerTest, methods, ReporteRs, xtable
>
>
>
> Here are the first lines of the function causing this NOTE:
> report.merModLmerTest<-function(x, file=NULL, type="word", digits=3, digitspvals=3,                                font=ifelse(Sys.info()["sysname"] == "Windows", "Arial",                                            "Helvetica")[[1]], pointsize=11, info=TRUE, ...){  sx <- lmerTest::summary(x)  cor <- as.data.frame(lme4::VarCorr(x))  ...
>
> And here is the output from getNamespaceExports("lmerTest") where "summary" is listed at position [23]
>
>  [1] "lmer"                   "lsmeansLT"              ".__T__is.infinite:base" [4] ".__T__as.integer:base"  ".__T__as.numeric:base"  ".__T__%*%:base"         [7] ".__T__dim:base"         ".__T__summary:base"     ".__T__$<-:base"        [10] ".__T__^:base"           ".__T__sum:base"         ".__T__rep:base"        [13] ".__T__*:base"           ".__T__[<-:base"         ".__T__as.logical:base" [16] ".__T__dimnames:base"    ".__T__%/%:base"         ".__T__prod:base"       [19] ".__T__[[<-:base"        ".__T__/:base"           "step"                  [22] "calcSatterth"           "summary"                ".__T__anova:stats"     [25] ".__T__is.finite:base"   ".__T__anyNA:base"       ".__T__!:base"          [28] ".__T__all:base"         ".__T__+:base"           ".__T__any:base"        [31] ".__T__dim<-:base"       ".__T__-:base"           ".__T__[:base"          [34] "anova"                  "difflsmeans"            "lsmeans"               [37] "rand"                   ".__C__merModLmerTest"   ".__T__length:base"     [40] ".__T__is.na:base"       ".__T__dimnames<-:base"  ".__T__&:base"          [43] ".__T__%%:base"          ".__T__$:base"

This seems to be from an older version of lmerTest.
>
>
> I have tried to reproduce this problem in my computer with different versions of R (3.4.4, 3.5 RC and R-devel) and only get the NOTE when performing the check with R-devel.

Have you checked that you are using a recent version of lmerTest with
3.4.4 and 3.5 RC? I think that might explain the diff.

> What should I do to fix this?
>         [[alternative HTML version deleted]]
>
>


From murdoch.duncan at gmail.com  Sat Apr 21 16:44:56 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Sat, 21 Apr 2018 10:44:56 -0400
Subject: [R-pkg-devel] NOTE regarding dependencies in R code: Missing or
 unexported object
In-Reply-To: <mailman.2641.1484.1524310155.1209.r-package-devel@r-project.org>
References: <1887366047.4361654.1524254030638.ref@mail.yahoo.com>
 <mailman.2641.1484.1524310155.1209.r-package-devel@r-project.org>
Message-ID: <ee3bcece-e365-97d2-4954-32ad75674c62@gmail.com>

On 20/04/2018 3:53 PM, David Herv?s via R-package-devel wrote:
> Hi,
> I have sent my package "clickR" to CRAN and was asked to fix the following NOTE:
> * checking dependencies in R code ... NOTE
> Missing or unexported object: 'lmerTest::summary'
> I'm not sure what's going on, here is the Imports section of my DESCRIPTION file:
> Imports: beeswarm, boot, lme4, lmerTest, methods, ReporteRs, xtable
> 
> 
> 
> Here are the first lines of the function causing this NOTE:
> report.merModLmerTest<-function(x, file=NULL, type="word", digits=3, digitspvals=3,? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? font=ifelse(Sys.info()["sysname"] == "Windows", "Arial",? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "Helvetica")[[1]], pointsize=11, info=TRUE, ...){? sx <- lmerTest::summary(x)? cor <- as.data.frame(lme4::VarCorr(x))? ...
> 
> And here is the output from?getNamespaceExports("lmerTest")?where "summary" is listed at position [23]
> 
>   [1] "lmer"? ? ? ? ? ? ? ? ? ?"lsmeansLT"? ? ? ? ? ? ? ".__T__is.infinite:base"?[4] ".__T__as.integer:base"? ".__T__as.numeric:base"? ".__T__%*%:base"? ? ? ???[7] ".__T__dim:base"? ? ? ? ?".__T__summary:base"? ? ?".__T__$<-:base"? ? ? ??[10] ".__T__^:base"? ? ? ? ? ?".__T__sum:base"? ? ? ? ?".__T__rep:base"? ? ? ??[13] ".__T__*:base"? ? ? ? ? ?".__T__[<-:base"? ? ? ? ?".__T__as.logical:base"?[16] ".__T__dimnames:base"? ? ".__T__%/%:base"? ? ? ? ?".__T__prod:base"? ? ? ?[19] ".__T__[[<-:base"? ? ? ? ".__T__/:base"? ? ? ? ? ?"step"? ? ? ? ? ? ? ? ??[22] "calcSatterth"? ? ? ? ? ?"summary"? ? ? ? ? ? ? ? ".__T__anova:stats"? ? ?[25] ".__T__is.finite:base"? ?".__T__anyNA:base"? ? ? ?".__T__!:base"? ? ? ? ??[28] ".__T__all:base"? ? ? ? ?".__T__+:base"? ? ? ? ? ?".__T__any:base"? ? ? ??[31] ".__T__dim<-:base"? ? ? ?".__T__-:base"? ? ? ? ? ?".__T__[:base"? ? ? ? ??[34] "anova"? ? ? ? ? ? ? ? ? "difflsmeans"? ? ? ? ? ? "lsmeans"? ? ? ? ? ? ? ?[37] "rand"? ? ? ? ? ? ? ? ? ?".__C__merModLmerTest"? ?".__T__length:base"? ? ?[40] ".__T__is.na:base"? ? ? ?".__T__dimnames<-:base"? ".__T__&:base"? ? ? ? ??[43] ".__T__%%:base"? ? ? ? ? ".__T__$:base"
> 
> 
> I have tried to reproduce this problem in my computer with different versions of R (3.4.4, 3.5 RC and R-devel) and only get the NOTE when performing the check with R-devel.
> What should I do to fix this?

getNamespaceExports() is described on its help page as an internal 
function, not intended for users.  If you want to see the exports of a 
package, look at its NAMESPACE file.  For example,

file.show(system.file("NAMESPACE", package="lmerTest"))

which lists these lines as exports:

export(as_lmerModLmerTest)
export(calcSatterth)
export(contest)
export(contest1D)
export(contestMD)
export(difflsmeans)
export(get_model)
export(lmer)
export(ls_means)
export(lsmeansLT)
export(ranova)
export(show_tests)
export(step)

The summary() function isn't listed there, as Rune demonstrated.

Duncan Murdoch

From ddhervas at yahoo.es  Sat Apr 21 17:08:05 2018
From: ddhervas at yahoo.es (=?UTF-8?Q?David_Herv=C3=A1s?=)
Date: Sat, 21 Apr 2018 15:08:05 +0000 (UTC)
Subject: [R-pkg-devel] NOTE regarding dependencies in R code: Missing or
 unexported object
In-Reply-To: <CAG_uk932rU7joKTt_Y5qf5krGb+SMRf4j8KaFNstJoRSuOB1RQ@mail.gmail.com>
References: <1887366047.4361654.1524254030638.ref@mail.yahoo.com>
 <mailman.2641.1484.1524310155.1209.r-package-devel@r-project.org>
 <CAG_uk932rU7joKTt_Y5qf5krGb+SMRf4j8KaFNstJoRSuOB1RQ@mail.gmail.com>
Message-ID: <1966336503.4628766.1524323285101@mail.yahoo.com>

 My fault, just noticed I had downloaded the wrong version of lmerTest from github (lmerTest instead of lmerTestR). Fixed now. Thank you

Regards,
David
    En s?bado, 21 de abril de 2018 16:27:45 CEST, Rune Haubo <rune.haubo at gmail.com> escribi?:  
 
 I don't think 'summary' is actually exported by lmerTest (version >=? 3.0-0):

library(lmerTest)
fm <- lmer(Informed.liking ~ Gender + Information * Product + (1 | Consumer) +
? ? ? ? ? ? (1 | Consumer:Product), data=ham)
lmerTest::summary(fm) # gives: Error: 'summary' is not an exported
object from 'namespace:lmerTest'

On the other hand

summary(fm)

works just fine. lmerTest defines the S3 method 'summary' for
'lmerModLmerTest' objects, so if you change? sx <-
lmerTest::summary(x)? to? sx <- summary(x) you should be fine assuming
that x is of class 'lmerModLmerTest'.

For more details see
https://stat.ethz.ch/pipermail/r-sig-mixed-models/2018q1/026596.html
and perhaps https://github.com/runehaubo/lmerTestR/blob/master/pkg_notes/new_lmerTest.pdf
(which you were also pointed to previously).

Best regards
Rune


On 20 April 2018 at 21:53, David Herv?s via R-package-devel
<r-package-devel at r-project.org> wrote:
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
> ---------- Forwarded message ----------
> From: "David Herv?s" <ddhervas at yahoo.es>
> To: "r-package-devel at r-project.org" <r-package-devel at r-project.org>
> Cc:
> Bcc:
> Date: Fri, 20 Apr 2018 19:53:50 +0000 (UTC)
> Subject: NOTE regarding dependencies in R code: Missing or unexported object
> Hi,
> I have sent my package "clickR" to CRAN and was asked to fix the following NOTE:
> * checking dependencies in R code ... NOTE
> Missing or unexported object: 'lmerTest::summary'
> I'm not sure what's going on, here is the Imports section of my DESCRIPTION file:
> Imports: beeswarm, boot, lme4, lmerTest, methods, ReporteRs, xtable
>
>
>
> Here are the first lines of the function causing this NOTE:
> report.merModLmerTest<-function(x, file=NULL, type="word", digits=3, digitspvals=3,? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? font=ifelse(Sys.info()["sysname"] == "Windows", "Arial",? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? "Helvetica")[[1]], pointsize=11, info=TRUE, ...){? sx <- lmerTest::summary(x)? cor <- as.data.frame(lme4::VarCorr(x))? ...
>
> And here is the output from getNamespaceExports("lmerTest") where "summary" is listed at position [23]
>
>? [1] "lmer"? ? ? ? ? ? ? ? ? "lsmeansLT"? ? ? ? ? ? ? ".__T__is.infinite:base" [4] ".__T__as.integer:base"? ".__T__as.numeric:base"? ".__T__%*%:base"? ? ? ? [7] ".__T__dim:base"? ? ? ? ".__T__summary:base"? ? ".__T__$<-:base"? ? ? ? [10] ".__T__^:base"? ? ? ? ? ".__T__sum:base"? ? ? ? ".__T__rep:base"? ? ? ? [13] ".__T__*:base"? ? ? ? ? ".__T__[<-:base"? ? ? ? ".__T__as.logical:base" [16] ".__T__dimnames:base"? ? ".__T__%/%:base"? ? ? ? ".__T__prod:base"? ? ? [19] ".__T__[[<-:base"? ? ? ? ".__T__/:base"? ? ? ? ? "step"? ? ? ? ? ? ? ? ? [22] "calcSatterth"? ? ? ? ? "summary"? ? ? ? ? ? ? ? ".__T__anova:stats"? ? [25] ".__T__is.finite:base"? ".__T__anyNA:base"? ? ? ".__T__!:base"? ? ? ? ? [28] ".__T__all:base"? ? ? ? ".__T__+:base"? ? ? ? ? ".__T__any:base"? ? ? ? [31] ".__T__dim<-:base"? ? ? ".__T__-:base"? ? ? ? ? ".__T__[:base"? ? ? ? ? [34] "anova"? ? ? ? ? ? ? ? ? "difflsmeans"? ? ? ? ? ? "lsmeans"? ? ? ? ? ? ? [37] "rand"? ? ? ? ? ? ? ? ? ".__C__merModLmerTest"? ".__T__length:base"? ? [40] ".__T__is.na:base"? ? ? ".__T__dimnames<-:base"? ".__T__&:base"? ? ? ? ? [43] ".__T__%%:base"? ? ? ? ? ".__T__$:base"

This seems to be from an older version of lmerTest.
>
>
> I have tried to reproduce this problem in my computer with different versions of R (3.4.4, 3.5 RC and R-devel) and only get the NOTE when performing the check with R-devel.

Have you checked that you are using a recent version of lmerTest with
3.4.4 and 3.5 RC? I think that might explain the diff.

> What should I do to fix this?
>? ? ? ? [[alternative HTML version deleted]]
>
>  
	[[alternative HTML version deleted]]


From steve.the.bayesian at gmail.com  Sat Apr 21 20:06:17 2018
From: steve.the.bayesian at gmail.com (Steven Scott)
Date: Sat, 21 Apr 2018 11:06:17 -0700
Subject: [R-pkg-devel] 
 Fwd: [CRAN-pretest-archived] CRAN submission Boom 0.8
In-Reply-To: <CAJqTW44DBMjmeDMYzPUbpLMCaEGe-n0LTDPwUWuvtpnSaYNw6A@mail.gmail.com>
References: <20180404172901.96B4B1641AC@xmpalantir.wu.ac.at>
 <01d3cc52$Blat.v3.2.16$92c75782$5ad8132a@mail.statistik.tu-dortmund.de>
 <CAJqTW47rYJy93WybfV0WVLgiwMqLJKEni6oH6tDSrQsmVwXGbA@mail.gmail.com>
 <23237.18756.671152.652922@rob.eddelbuettel.com>
 <CAJqTW44DBMjmeDMYzPUbpLMCaEGe-n0LTDPwUWuvtpnSaYNw6A@mail.gmail.com>
Message-ID: <CAJqTW47D56ugBeOfNuBPgnP6Wh2gdCGL0B7U7BAMccOGo=6uDw@mail.gmail.com>

No word from the maintainers.  I submitted a revised version of the package
just now (with an updated date in DESCRIPTION).
If someone could look at it in the next few days I'd appreciate it.  Thanks.

On Wed, Apr 4, 2018 at 3:01 PM, Steven Scott <steve.the.bayesian at gmail.com>
wrote:

> Thanks Dirk.  IMO the package is in good shape otherwise.  I'll wait hear
> from the CRAN maintainers.
> S
>
> On Wed, Apr 4, 2018 at 2:53 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
>
>>
>> On 4 April 2018 at 14:15, Steven Scott wrote:
>> | These appear to be caused by an ill formed std::set or std::function in
>> the
>> | STL implementation of the host machine.  If I'm reading that wrong
>> someone
>> | please let me know.
>>
>> AFAICT it needs C++11 explicitly set which that machine (with a new
>> clang-6.0
>> installation) did not provide by default.  This has bitten a few other
>> compilations lately as well but should get sorted out in due course.
>>
>> Dirk
>>
>> --
>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>
>
>

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Sun Apr 22 00:02:59 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Sun, 22 Apr 2018 00:02:59 +0200
Subject: [R-pkg-devel] 
 Fwd: [CRAN-pretest-archived] CRAN submission Boom 0.8
In-Reply-To: <CAJqTW47D56ugBeOfNuBPgnP6Wh2gdCGL0B7U7BAMccOGo=6uDw@mail.gmail.com>
References: <20180404172901.96B4B1641AC@xmpalantir.wu.ac.at>
 <01d3cc52$Blat.v3.2.16$92c75782$5ad8132a@mail.statistik.tu-dortmund.de>
 <CAJqTW47rYJy93WybfV0WVLgiwMqLJKEni6oH6tDSrQsmVwXGbA@mail.gmail.com>
 <23237.18756.671152.652922@rob.eddelbuettel.com>
 <CAJqTW44DBMjmeDMYzPUbpLMCaEGe-n0LTDPwUWuvtpnSaYNw6A@mail.gmail.com>
 <CAJqTW47D56ugBeOfNuBPgnP6Wh2gdCGL0B7U7BAMccOGo=6uDw@mail.gmail.com>
Message-ID: <c45f1939-1dc1-c8b9-5f1a-446072f9862f@statistik.tu-dortmund.de>



On 21.04.2018 20:06, Steven Scott wrote:
> No word from the maintainers. 

Only one maintainer is reading this list.


> I submitted a revised version of the package
> just now (with an updated date in DESCRIPTION).

Thanks.

> If someone could look at it in the next few days I'd appreciate it.  Thanks.

We will do.

Best,
Uwe Ligges
> On Wed, Apr 4, 2018 at 3:01 PM, Steven Scott <steve.the.bayesian at gmail.com>
> wrote:
> 
>> Thanks Dirk.  IMO the package is in good shape otherwise.  I'll wait hear
>> from the CRAN maintainers.
>> S
>>
>> On Wed, Apr 4, 2018 at 2:53 PM, Dirk Eddelbuettel <edd at debian.org> wrote:
>>
>>>
>>> On 4 April 2018 at 14:15, Steven Scott wrote:
>>> | These appear to be caused by an ill formed std::set or std::function in
>>> the
>>> | STL implementation of the host machine.  If I'm reading that wrong
>>> someone
>>> | please let me know.
>>>
>>> AFAICT it needs C++11 explicitly set which that machine (with a new
>>> clang-6.0
>>> installation) did not provide by default.  This has bitten a few other
>>> compilations lately as well but should get sorted out in due course.
>>>
>>> Dirk
>>>
>>> --
>>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>>
>>
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From steve.the.bayesian at gmail.com  Sun Apr 22 02:19:58 2018
From: steve.the.bayesian at gmail.com (Steven Scott)
Date: Sat, 21 Apr 2018 17:19:58 -0700
Subject: [R-pkg-devel] 
 Fwd: [CRAN-pretest-archived] CRAN submission Boom 0.8
In-Reply-To: <c45f1939-1dc1-c8b9-5f1a-446072f9862f@statistik.tu-dortmund.de>
References: <20180404172901.96B4B1641AC@xmpalantir.wu.ac.at>
 <01d3cc52$Blat.v3.2.16$92c75782$5ad8132a@mail.statistik.tu-dortmund.de>
 <CAJqTW47rYJy93WybfV0WVLgiwMqLJKEni6oH6tDSrQsmVwXGbA@mail.gmail.com>
 <23237.18756.671152.652922@rob.eddelbuettel.com>
 <CAJqTW44DBMjmeDMYzPUbpLMCaEGe-n0LTDPwUWuvtpnSaYNw6A@mail.gmail.com>
 <CAJqTW47D56ugBeOfNuBPgnP6Wh2gdCGL0B7U7BAMccOGo=6uDw@mail.gmail.com>
 <c45f1939-1dc1-c8b9-5f1a-446072f9862f@statistik.tu-dortmund.de>
Message-ID: <CAJqTW471tLL1R2mqs53_Z2zEch+3T-5A4he52SzRf63w5WM4PA@mail.gmail.com>

Thanks Uwe.

On Sat, Apr 21, 2018 at 3:02 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de
> wrote:

>
>
> On 21.04.2018 20:06, Steven Scott wrote:
>
>> No word from the maintainers.
>>
>
> Only one maintainer is reading this list.
>
>
> I submitted a revised version of the package
>> just now (with an updated date in DESCRIPTION).
>>
>
> Thanks.
>
> If someone could look at it in the next few days I'd appreciate it.
>> Thanks.
>>
>
> We will do.
>
> Best,
> Uwe Ligges
>
>> On Wed, Apr 4, 2018 at 3:01 PM, Steven Scott <
>> steve.the.bayesian at gmail.com>
>> wrote:
>>
>> Thanks Dirk.  IMO the package is in good shape otherwise.  I'll wait hear
>>> from the CRAN maintainers.
>>> S
>>>
>>> On Wed, Apr 4, 2018 at 2:53 PM, Dirk Eddelbuettel <edd at debian.org>
>>> wrote:
>>>
>>>
>>>> On 4 April 2018 at 14:15, Steven Scott wrote:
>>>> | These appear to be caused by an ill formed std::set or std::function
>>>> in
>>>> the
>>>> | STL implementation of the host machine.  If I'm reading that wrong
>>>> someone
>>>> | please let me know.
>>>>
>>>> AFAICT it needs C++11 explicitly set which that machine (with a new
>>>> clang-6.0
>>>> installation) did not provide by default.  This has bitten a few other
>>>> compilations lately as well but should get sorted out in due course.
>>>>
>>>> Dirk
>>>>
>>>> --
>>>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>>>
>>>>
>>>
>>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>

	[[alternative HTML version deleted]]


From russell-lenth at uiowa.edu  Tue Apr 24 03:53:56 2018
From: russell-lenth at uiowa.edu (Lenth, Russell V)
Date: Tue, 24 Apr 2018 01:53:56 +0000
Subject: [R-pkg-devel] Indexing HTML vignette topics
Message-ID: <DM6PR04MB438045814245EA4874DAC682F1880@DM6PR04MB4380.namprd04.prod.outlook.com>

Developers,

I have a package that has a number of vignettes with examples and such; so I see an increasing need to provide easier ways to navigate among them and to find a particular topic. All the vignettes are written using R Markdown, subsequently converted to HTML. 

I did some searching but did not find software that would help (though I'm sure if it exists, I'm about to hear about it). So, in case anybody is interested, I threw together a small R package named vigindex for this purpose, and it is available on github at https://github.com/rvlenth/vigindex.

It works by inserting HTML comments in the vignette .Rmd files of the form:

<!-- @index  entry1;   entry2!subentry   -->

and then running vigindex::vigindex(). This compiles all the index entries in the files in the vignette directory, and creates a new .Rmd file with the index. Each index entry is linked to the nearest section preceding each embedded entry. There are various refinements to allow for formatting and sorting.

There is an example vignette in the package, and the latest commit of https://github.com/rvlenth/emmeans has a topical index of all of its vignettes.

I'm interested in any comments or suggestions, and if anybody finds this useful.

Russ
--
Russell V. Lenth? -? Professor Emeritus
Department of Statistics and Actuarial Science?? 
The University of Iowa ?-? Iowa City, IA 52242? USA?? 
Voice (319)335-0712 (Dept. office)? -? FAX (319)335-3017


From maxyxb at umich.edu  Tue Apr 24 06:01:05 2018
From: maxyxb at umich.edu (Xubo Yue)
Date: Tue, 24 Apr 2018 00:01:05 -0400
Subject: [R-pkg-devel] inconsistent between windows and debian
Message-ID: <CAHpfP__DDq7DOAWtg6u8Rt19YOGEUNt9ENhNuXANKAwKdf-aWA@mail.gmail.com>

  Hey

I just got feedback from CRAN auto-checking and find a wired thing

package brainKCCA_0.1.0.tar.gz does not pass the incoming checks
automatically, please see the following pre-tests:
Windows: <https://win-builder.r-project.org/incoming_pretest/
brainKCCA_0.1.0_20180424_040017/Windows/00check.log>
Status: 3 NOTEs
Debian: <https://win-builder.r-project.org/incoming_pretest/
brainKCCA_0.1.0_20180424_040017/Debian/00check.log>
Status: 1 ERROR, 1 NOTE

Why Windows and Debian have inconsistent result?

PS. The error in debian is

Error in oro.nifti::readNIfTI(fname = file.path(imgPath,
paste(niiFile1[i],  :
  File(s) not found!
Calls: nii2RData -> <Anonymous>
Execution halted
* checking PDF version of manual ... OK
* DONE
Status: 1 ERROR, 1 NOTE

While in windows, there is no error

* checking examples ...
** running examples for arch 'i386' ... [250s] NOTE
Examples with CPU or elapsed time > 10s
                          user system elapsed
multipleRegion_plot     190.35   1.92  205.61
summary_kcca              1.40   0.17   14.79
permkCCA_multipleRegion   1.19   0.11   14.51
nii2RData                 0.40   0.20   13.84
** running examples for arch 'x64' ... [79s] NOTE
Examples with CPU or elapsed time > 10s
                         user system elapsed
multipleRegion_plot     18.36   2.06   33.66
permkCCA_multipleRegion  1.47   0.20   14.88
summary_kcca             1.48   0.16   14.85
nii2RData                0.62   0.23   14.09
* checking PDF version of manual ... OK
* DONE
Status: 3 NOTEs

Anyone can provide some suggestions?

Thanks!


-- 
*Xubo (Max) YUE, *PhD Student,
*The Industrial and Operation Engineering Department,*
*College of Engineering,*
*The University of Michigan, Ann Arbor, MI, USA*

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Tue Apr 24 12:11:57 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 24 Apr 2018 12:11:57 +0200
Subject: [R-pkg-devel] inconsistent between windows and debian
In-Reply-To: <CAHpfP__DDq7DOAWtg6u8Rt19YOGEUNt9ENhNuXANKAwKdf-aWA@mail.gmail.com>
References: <CAHpfP__DDq7DOAWtg6u8Rt19YOGEUNt9ENhNuXANKAwKdf-aWA@mail.gmail.com>
Message-ID: <1ca8f28b-5134-5899-cdb8-efa4f3a3b385@statistik.tu-dortmund.de>



On 24.04.2018 06:01, Xubo Yue wrote:
>    Hey
> 
> I just got feedback from CRAN auto-checking and find a wired thing
> 
> package brainKCCA_0.1.0.tar.gz does not pass the incoming checks
> automatically, please see the following pre-tests:
> Windows: <https://win-builder.r-project.org/incoming_pretest/
> brainKCCA_0.1.0_20180424_040017/Windows/00check.log>
> Status: 3 NOTEs
> Debian: <https://win-builder.r-project.org/incoming_pretest/
> brainKCCA_0.1.0_20180424_040017/Debian/00check.log>
> Status: 1 ERROR, 1 NOTE
> 
> Why Windows and Debian have inconsistent result?

Well, you write to

paste(filePath, "\\",  "temp", sep=""))

and shoudl rather use file.path as the "\" will be part of the filename 
in Linux and a directory separator in Windows?

Best,
Uwe Ligges


> 
> PS. The error in debian is
> 
> Error in oro.nifti::readNIfTI(fname = file.path(imgPath,
> paste(niiFile1[i],  :
>    File(s) not found!
> Calls: nii2RData -> <Anonymous>
> Execution halted
> * checking PDF version of manual ... OK
> * DONE
> Status: 1 ERROR, 1 NOTE
> 
> While in windows, there is no error
> 
> * checking examples ...
> ** running examples for arch 'i386' ... [250s] NOTE
> Examples with CPU or elapsed time > 10s
>                            user system elapsed
> multipleRegion_plot     190.35   1.92  205.61
> summary_kcca              1.40   0.17   14.79
> permkCCA_multipleRegion   1.19   0.11   14.51
> nii2RData                 0.40   0.20   13.84
> ** running examples for arch 'x64' ... [79s] NOTE
> Examples with CPU or elapsed time > 10s
>                           user system elapsed
> multipleRegion_plot     18.36   2.06   33.66
> permkCCA_multipleRegion  1.47   0.20   14.88
> summary_kcca             1.48   0.16   14.85
> nii2RData                0.62   0.23   14.09
> * checking PDF version of manual ... OK
> * DONE
> Status: 3 NOTEs
> 
> Anyone can provide some suggestions?
> 
> Thanks!
> 
>


From maxyxb at umich.edu  Tue Apr 24 16:29:39 2018
From: maxyxb at umich.edu (Xubo Yue)
Date: Tue, 24 Apr 2018 10:29:39 -0400
Subject: [R-pkg-devel] some notes
Message-ID: <CAHpfP__oXYBbGwGm7fEapDHPB++zpH9EV48G=2E2vNR-Lyg8dQ@mail.gmail.com>

Hey

I just got feedback from CRAN auto-checking and here are some notes I
cannot resolve:

* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Jian Kang <jiankang at umich.edu>'

New submission

Possibly mis-spelled words in DESCRIPTION:
  Kang (7:196)

I am not sure how to solve this.

Also, here are some running time notes:

** running examples for arch 'i386' ... [250s] NOTE
Examples with CPU or elapsed time > 10s
                          user system elapsed
multipleRegion_plot     190.35   1.92  205.61
summary_kcca              1.40   0.17   14.79
permkCCA_multipleRegion   1.19   0.11   14.51
nii2RData                 0.40   0.20   13.84
** running examples for arch 'x64' ... [79s] NOTE
Examples with CPU or elapsed time > 10s
                         user system elapsed
multipleRegion_plot     18.36   2.06   33.66
permkCCA_multipleRegion  1.47   0.20   14.88
summary_kcca             1.48   0.16   14.85
nii2RData                0.62   0.23   14.09
* checking PDF version of manual ... OK
* DONE
Status: 3 NOTEs

My total running time is less than 10 minutes. I am wondering is it ok to
ignore these two NOTEs?

Thank you!




-- 
*Xubo (Max) YUE, *PhD Student,
*The Industrial and Operation Engineering Department,*
*College of Engineering,*
*The University of Michigan, Ann Arbor, MI, USA*

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Tue Apr 24 16:50:22 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 24 Apr 2018 10:50:22 -0400
Subject: [R-pkg-devel] some notes
In-Reply-To: <CAHpfP__oXYBbGwGm7fEapDHPB++zpH9EV48G=2E2vNR-Lyg8dQ@mail.gmail.com>
References: <CAHpfP__oXYBbGwGm7fEapDHPB++zpH9EV48G=2E2vNR-Lyg8dQ@mail.gmail.com>
Message-ID: <09535582-8f8f-4005-addc-b90d867be6a7@gmail.com>

On 24/04/2018 10:29 AM, Xubo Yue wrote:
> Hey
> 
> I just got feedback from CRAN auto-checking and here are some notes I
> cannot resolve:
> 
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: 'Jian Kang <jiankang at umich.edu>'
> 
> New submission
> 
> Possibly mis-spelled words in DESCRIPTION:
>    Kang (7:196)
> 
> I am not sure how to solve this.
> 

You can ignore those.

> Also, here are some running time notes:
> 
> ** running examples for arch 'i386' ... [250s] NOTE
> Examples with CPU or elapsed time > 10s
>                            user system elapsed
> multipleRegion_plot     190.35   1.92  205.61
> summary_kcca              1.40   0.17   14.79
> permkCCA_multipleRegion   1.19   0.11   14.51
> nii2RData                 0.40   0.20   13.84
> ** running examples for arch 'x64' ... [79s] NOTE
> Examples with CPU or elapsed time > 10s
>                           user system elapsed
> multipleRegion_plot     18.36   2.06   33.66
> permkCCA_multipleRegion  1.47   0.20   14.88
> summary_kcca             1.48   0.16   14.85
> nii2RData                0.62   0.23   14.09
> * checking PDF version of manual ... OK
> * DONE
> Status: 3 NOTEs
> 
> My total running time is less than 10 minutes. I am wondering is it ok to
> ignore these two NOTEs?

You shouldn't ignore those.  Your package will be tested many, many 
times, and it will take more than 3 minutes for just one example.  (It 
will be tested whenever any package you depend on is changed, to make 
sure the change doesn't break yours.)

Use a smaller dataset, do less, or whatever you can to get the 
multipleRegion_plot example down to a time similar to the other ones, 
i.e. well below 10s in user+system time.

You don't have a lot of control of elapsed time because it will depend 
on what else is happening on the test machine, but if the other times 
are short, usually elapsed time will also be short.

Duncan Murdoch


From alexandre.courtiol at gmail.com  Tue Apr 24 17:52:38 2018
From: alexandre.courtiol at gmail.com (Alexandre Courtiol)
Date: Tue, 24 Apr 2018 17:52:38 +0200
Subject: [R-pkg-devel] vignette via devtools: sometimes found,
 sometimes not (same package)
Message-ID: <CAERMt4ez4bNqMPzW5LLuUZg2jtE2DQcWWiFoR-wTzdSnLf-_zA@mail.gmail.com>

Dear all,

I have finally understood why my package installed from GitHub (via
devtools or drat) would display pre-built vignettes after a call to
browseVignettes() on most but not all computers (despite the vignettes
being physically present in all): if the package is installed on a computer
that has knitr installed, then it works; otherwise it fails.

I can thus fix this by adding knitr in the Imports instead of Suggests, or
by asking people to install with the option dependencies = TRUE.

I am still wondering why knitr is needed (the vignettes are pre-built), but
the workaround seems to work with a 100% success rate.

Thanks for all that tried to fix my issue...

I should have thought about knitr head on but I did not, and neither
sessionInfo() nor devtools::session_info() allows one to know if knitr is
installed or not, and I did not think of checking all installed packages
before.

Best,
Alex

On 20 April 2018 at 09:59, Martin Maechler <maechler at stat.math.ethz.ch>
wrote:

> >>>>> Thierry Onkelinx <thierry.onkelinx at inbo.be>
> >>>>>     on Fri, 20 Apr 2018 09:14:44 +0200 writes:
>
>     > Dear Alex, Another idea is to use pkgdown
>     > (http://pkgdown.r-lib.org) to convert all the
>     > documentation of your package (include the vignettes) into
>     > a website. Then you make that available to your students,
>     > e.g. through github pages.
>
> Hmm, sounds nice .. at first:  In teaching (and research!) I particularly
> emphasize people use CRAN (or Bioconductor) packages.
>
> Why on earth is pkgdown not on CRAN ?
>
> Martin Maechler
> ETH Zurich
>
>     > Best regards,
>
>     > ir. Thierry Onkelinx Statisticus / Statistician
>
>     > Vlaamse Overheid / Government of Flanders INSTITUUT VOOR
>     > NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
>     > AND FOREST Team Biometrie & Kwaliteitszorg / Team
>     > Biometrics & Quality Assurance thierry.onkelinx at inbo.be
>     > Havenlaan 88 bus 73, 1000 Brussel www.inbo.be
>
>     > ////////////////////////////////////////////////////////////
> ///////////////////////////////
>     > To call in the statistician after the experiment is done
>     > may be no more than asking him to perform a post-mortem
>     > examination: he may be able to say what the experiment
>     > died of. ~ Sir Ronald Aylmer Fisher The plural of anecdote
>     > is not data. ~ Roger Brinner The combination of some data
>     > and an aching desire for an answer does not ensure that a
>     > reasonable answer can be extracted from a given body of
>     > data. ~ John Tukey
>     > ////////////////////////////////////////////////////////////
> ///////////////////////////////
>
>
>
>
>     > 2018-04-19 18:33 GMT+02:00 Alexandre Courtiol
>     > <alexandre.courtiol at gmail.com>:
>     >> Thanks a lot Thierry, I was happy to discover and
>     >> implement a "drat" installation workflow.  Unfortunately
>     >> it did not solve the issue (but I will stick to drat).
>     >> Also, I checked the sessionInfo() and could not find any
>     >> package version discriminating accurately between
>     >> computers that shows vignettes from those who do not.
>     >> Only Windows computer have the issue but this proves
>     >> nothing (and other computers with the same OS version are
>     >> fine).  Goergi, I did not yet retried outside RStudio (I
>     >> am trying not to waste too much time at the beginning of
>     >> each course...  I wish I could hijack a problematic
>     >> laptop but they don't let me do it as they need them).
>     >> ++ Alex
>     >>
>     >>
>     >> On 17 April 2018 at 10:42, Thierry Onkelinx
>     >> <thierry.onkelinx at inbo.be> wrote:
>     >>>
>     >>> Dear Alex,
>     >>>
>     >>> Have a look at drat
>     >>> (http://eddelbuettel.github.io/drat/DratForPackageAuthors.html).
> This
>     >>> makes it easier to distribute prepackaged R packages
>     >>> (including When you uploaded a new version, then the
>     >>> student would only have to do drat::addRepo("your_repo")
>     >>> and then install.pakages("LM2GLMM") or update.packages()
>     >>>
>     >>> Best regards,
>     >>>
>     >>> ir. Thierry Onkelinx Statisticus / Statistician
>     >>>
>     >>> Vlaamse Overheid / Government of Flanders INSTITUUT VOOR
>     >>> NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE
>     >>> AND FOREST Team Biometrie & Kwaliteitszorg / Team
>     >>> Biometrics & Quality Assurance thierry.onkelinx at inbo.be
>     >>> Havenlaan 88 bus 73, 1000 Brussel www.inbo.be
>     >>>
>     >>>
>     >>> ////////////////////////////////////////////////////////////
> ///////////////////////////////
>     >>> To call in the statistician after the experiment is done
>     >>> may be no more than asking him to perform a post-mortem
>     >>> examination: he may be able to say what the experiment
>     >>> died of. ~ Sir Ronald Aylmer Fisher The plural of
>     >>> anecdote is not data. ~ Roger Brinner The combination of
>     >>> some data and an aching desire for an answer does not
>     >>> ensure that a reasonable answer can be extracted from a
>     >>> given body of data. ~ John Tukey
>     >>>
>     >>> ////////////////////////////////////////////////////////////
> ///////////////////////////////
>     >>>
>     >>>
>     >>>
>     >>>
>     >>> 2018-04-16 19:38 GMT+02:00 Alexandre Courtiol
>     >>> <alexandre.courtiol at gmail.com>: > Re,
>     >>> >
>     >>> > On 16 April 2018 at 17:35, Georgi Boshnakov < >
>     >>> georgi.boshnakov at manchester.ac.uk> wrote:
>     >>> >
>     >>> >> Hi,
>     >>> >>
>     >>> >> The problem is indeed difficult to debug but there
>     >>> are things that can >> be >> done to narrow it down.
>     >>> >>
>     >>> >> 1. Are there 1/3 unlucky computers fixed? (I.e does
>     >>> the problem occur >> always on the same computers) Also,
>     >>> do you really mean computer or >> user?
>     >>> >>
>     >>> >
>     >>> > Yes, I mean computer, not user.
>     >>> >
>     >>> >>
>     >>> >> 2. Are the students working under R studio? If so,
>     >>> does the same >> problem >> appear if the same procedure
>     >>> is run outside R studio.
>     >>> >>
>     >>> >
>     >>> > I will try tomorrow (but from memory I think the
>     >>> answer will be yes).
>     >>> >
>     >>> >>
>     >>> >> 3. Further to 2., You mention development mode - do
>     >>> (some) students >> also >> have a copy of your
>     >>> repository? This may be aproblem if they don't >> update
>     >>> >> it too.
>     >>> >>
>     >>> >
>     >>> > No, only me has the devel version.
>     >>> >
>     >>> >>
>     >>> >> 4. What happens if R is restarted?
>     >>> >
>     >>> >
>     >>> > I will try tomorrow (but I think the answer will be
>     >>> nothing).
>     >>> >
>     >>> >
>     >>> >> 5. It may be worth checking .Rprofle and similar for
>     >>> the concerned >> computers (or users, see 1.)
>     >>> >>
>     >>> >
>     >>> > I will try as well but most had a fresh install and
>     >>> did not mess with > settings.
>     >>> >
>     >>> >>
>     >>> >> Hope this is of some help.
>     >>> >>
>     >>> >
>     >>> > I will look at all this and also gather the session
>     >>> infos as Ben > suggested.  > I think I know how to
>     >>> proceed to get to the bottom of that, but I was > just >
>     >>> hoping that the problem was already well known and the
>     >>> answer as well...  > If it is for anyone, please
>     >>> reply. Otherwise, I will investigate.  > Thanks to
>     >>> everyone.  > Alex
>     >>> >
>     >>> >
>     >>> >>
>     >>> >>
>     >>> >> Georgi Boshnakov
>     >>> >>
>     >>> >>
>     >>> >> ________________________________________ >> From:
>     >>> R-package-devel [r-package-devel-bounces at r-project.org]
>     >>> on behalf >> of Alexandre Courtiol
>     >>> [alexandre.courtiol at gmail.com] >> Sent: 16 April 2018
>     >>> 14:40 >> To: List r-package-devel >> Subject:
>     >>> [R-pkg-devel] vignette via devtools: sometimes found, >>
>     >>> sometimes >> not (same package)
>     >>> >>
>     >>> >> Dear all, >> I am teaching a class and for that I
>     >>> created a R package that mostly >> contains vignettes
>     >>> (the slides of the course).  >> I host the package on
>     >>> GitHub because I want the students to download >> every
>     >>> >> day the latest version of the package.  >> Building
>     >>> the vignettes takes a couple of hours so I pre-build the
>     >>> >> vignettes >> using devtools::build_vignettes before
>     >>> pushing my updates to GitHub.  >> The student install
>     >>> the package using >>
>     >>> devtools::install_github("courtiol/LM2GLMM").  >> Then,
>     >>> they do library(LM2GLMM) and browseVignettes(package =
>     >>> >> "LM2GLMM")...
>     >>> >>
>     >>> >> ... and that works on 2/3 of the computers, for the
>     >>> others it says >> vignettes not found.
>     >>> >>
>     >>> >> Any idea why and what can I do to make it 100%
>     >>> success?  >> Of course on my laptop it works, so I
>     >>> cannot investigate.  >> Also, since they all use
>     >>> different versions of R, devtools or OS... I >> would >>
>     >>> like to know the one thing that must be changed if it
>     >>> comes from that >> (but >> I am not sure it does).
>     >>> >>
>     >>> >> I have added a back up function that works for the
>     >>> 1/3 of unfortunate >> students:
>     >>> >>
>     >>> >> get_vignettes <- function() { >>
>     >>> utils::browseURL(paste0(find.package("LM2GLMM"),
>     >>> "/doc/")) ## for >> installed >>
>     >>> utils::browseURL(paste0(find.package("LM2GLMM"),
>     >>> "/inst/doc/")) ## >> for >> development >>
>     >>> return(invisible(NULL)) >> }
>     >>> >>
>     >>> >> This functions opens de vignette folder and that
>     >>> shows that all the >> students actually have the html
>     >>> files installed correctly. But it is >> ugly >> because
>     >>> then they have to find the good html file and so forth,
>     >>> so I >> would >> rather have a better solution.
>     >>> >>
>     >>> >> Many thanks,
>     >>> >>
>     >>> >> Alex
>     >>> >>
>     >>> >> --
>     >>> >> Alexandre Courtiol
>     >>> >>
>     >>> >> http://sites.google.com/site/alexandrecourtiol/home
>     >>> >>
>     >>> >> *"Science is the belief in the ignorance of
>     >>> experts"*, R. Feynman
>     >>> >>
>     >>> >> [[alternative HTML version deleted]]
>     >>> >>
>     >>> >> ______________________________________________ >>
>     >>> R-package-devel at r-project.org mailing list >>
>     >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     >>> >>
>     >>> >
>     >>> >
>     >>> >
>     >>> > --
>     >>> > Alexandre Courtiol
>     >>> >
>     >>> > http://sites.google.com/site/alexandrecourtiol/home
>     >>> >
>     >>> > *"Science is the belief in the ignorance of experts"*,
>     >>> R. Feynman
>     >>> >
>     >>> > [[alternative HTML version deleted]]
>     >>> >
>     >>> > ______________________________________________ >
>     >>> R-package-devel at r-project.org mailing list >
>     >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     >>
>     >>
>     >>
>     >>
>     >> --
>     >> Alexandre Courtiol
>     >>
>     >> http://sites.google.com/site/alexandrecourtiol/home
>     >>
>     >> "Science is the belief in the ignorance of experts",
>     >> R. Feynman
>
>     > ______________________________________________
>     > R-package-devel at r-project.org mailing list
>     > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Alexandre Courtiol

http://sites.google.com/site/alexandrecourtiol/home

*"Science is the belief in the ignorance of experts"*, R. Feynman

	[[alternative HTML version deleted]]


From spencer.graves at effectivedefense.org  Tue Apr 24 18:45:07 2018
From: spencer.graves at effectivedefense.org (Spencer Graves)
Date: Tue, 24 Apr 2018 11:45:07 -0500
Subject: [R-pkg-devel] some notes
In-Reply-To: <09535582-8f8f-4005-addc-b90d867be6a7@gmail.com>
References: <CAHpfP__oXYBbGwGm7fEapDHPB++zpH9EV48G=2E2vNR-Lyg8dQ@mail.gmail.com>
 <09535582-8f8f-4005-addc-b90d867be6a7@gmail.com>
Message-ID: <7c2d08a4-8fcd-b644-ccf6-79b60b48be37@effectivedefense.org>



On 2018-04-24 09:50, Duncan Murdoch wrote:
> On 24/04/2018 10:29 AM, Xubo Yue wrote:
>> Hey
>>
>> I just got feedback from CRAN auto-checking and here are some notes I
>> cannot resolve:
>>
>> * checking CRAN incoming feasibility ... NOTE
>> Maintainer: 'Jian Kang <jiankang at umich.edu>'
>>
>> New submission
>>
>> Possibly mis-spelled words in DESCRIPTION:
>> ?? Kang (7:196)
>>
>> I am not sure how to solve this.
>>
>
> You can ignore those.
>
>> Also, here are some running time notes:
>>
>> ** running examples for arch 'i386' ... [250s] NOTE
>> Examples with CPU or elapsed time > 10s
>> ?????????????????????????? user system elapsed
>> multipleRegion_plot???? 190.35?? 1.92? 205.61
>> summary_kcca????????????? 1.40?? 0.17?? 14.79
>> permkCCA_multipleRegion?? 1.19?? 0.11?? 14.51
>> nii2RData???????????????? 0.40?? 0.20?? 13.84
>> ** running examples for arch 'x64' ... [79s] NOTE
>> Examples with CPU or elapsed time > 10s
>> ????????????????????????? user system elapsed
>> multipleRegion_plot???? 18.36?? 2.06?? 33.66
>> permkCCA_multipleRegion? 1.47?? 0.20?? 14.88
>> summary_kcca???????????? 1.48?? 0.16?? 14.85
>> nii2RData??????????????? 0.62?? 0.23?? 14.09
>> * checking PDF version of manual ... OK
>> * DONE
>> Status: 3 NOTEs
>>
>> My total running time is less than 10 minutes. I am wondering is it 
>> ok to
>> ignore these two NOTEs?
>
> You shouldn't ignore those.? Your package will be tested many, many 
> times, and it will take more than 3 minutes for just one example.? (It 
> will be tested whenever any package you depend on is changed, to make 
> sure the change doesn't break yours.)
>
> Use a smaller dataset, do less, or whatever you can to get the 
> multipleRegion_plot example down to a time similar to the other ones, 
> i.e. well below 10s in user+system time.


 ????? If it becomes infeasible to find smaller datasets, etc., you can 
cut out certain tests with a construct like the following:


if(!fda::CRAN()){
# ... tests to run on other computers but to skip on CRAN.? ...
}


 ????? Obviously, you'll need fda::CRAN.? I found it infeasible to meet 
that requirement and so disabled the tests that violated CRAN's rule on 
this.


 ????? I've been told that this is a suboptimal solution and should be 
avoided.? I agree.


 ????? Hope this helps.
 ????? Spencer Graves

>
> You don't have a lot of control of elapsed time because it will depend 
> on what else is happening on the test machine, but if the other times 
> are short, usually elapsed time will also be short.
>
> Duncan Murdoch
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ligges at statistik.tu-dortmund.de  Tue Apr 24 18:48:08 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 24 Apr 2018 18:48:08 +0200
Subject: [R-pkg-devel] some notes
In-Reply-To: <7c2d08a4-8fcd-b644-ccf6-79b60b48be37@effectivedefense.org>
References: <CAHpfP__oXYBbGwGm7fEapDHPB++zpH9EV48G=2E2vNR-Lyg8dQ@mail.gmail.com>
 <09535582-8f8f-4005-addc-b90d867be6a7@gmail.com>
 <7c2d08a4-8fcd-b644-ccf6-79b60b48be37@effectivedefense.org>
Message-ID: <30fbd143-9301-28c8-90bc-d7328691ec7c@statistik.tu-dortmund.de>



On 24.04.2018 18:45, Spencer Graves wrote:
> 
> 
> On 2018-04-24 09:50, Duncan Murdoch wrote:
>> On 24/04/2018 10:29 AM, Xubo Yue wrote:
>>> Hey
>>>
>>> I just got feedback from CRAN auto-checking and here are some notes I
>>> cannot resolve:
>>>
>>> * checking CRAN incoming feasibility ... NOTE
>>> Maintainer: 'Jian Kang <jiankang at umich.edu>'
>>>
>>> New submission
>>>
>>> Possibly mis-spelled words in DESCRIPTION:
>>> ?? Kang (7:196)
>>>
>>> I am not sure how to solve this.
>>>
>>
>> You can ignore those.
>>
>>> Also, here are some running time notes:
>>>
>>> ** running examples for arch 'i386' ... [250s] NOTE
>>> Examples with CPU or elapsed time > 10s
>>> ?????????????????????????? user system elapsed
>>> multipleRegion_plot???? 190.35?? 1.92? 205.61
>>> summary_kcca????????????? 1.40?? 0.17?? 14.79
>>> permkCCA_multipleRegion?? 1.19?? 0.11?? 14.51
>>> nii2RData???????????????? 0.40?? 0.20?? 13.84
>>> ** running examples for arch 'x64' ... [79s] NOTE
>>> Examples with CPU or elapsed time > 10s
>>> ????????????????????????? user system elapsed
>>> multipleRegion_plot???? 18.36?? 2.06?? 33.66
>>> permkCCA_multipleRegion? 1.47?? 0.20?? 14.88
>>> summary_kcca???????????? 1.48?? 0.16?? 14.85
>>> nii2RData??????????????? 0.62?? 0.23?? 14.09
>>> * checking PDF version of manual ... OK
>>> * DONE
>>> Status: 3 NOTEs
>>>
>>> My total running time is less than 10 minutes. I am wondering is it 
>>> ok to
>>> ignore these two NOTEs?
>>
>> You shouldn't ignore those.? Your package will be tested many, many 
>> times, and it will take more than 3 minutes for just one example.? (It 
>> will be tested whenever any package you depend on is changed, to make 
>> sure the change doesn't break yours.)
>>
>> Use a smaller dataset, do less, or whatever you can to get the 
>> multipleRegion_plot example down to a time similar to the other ones, 
>> i.e. well below 10s in user+system time.
> 
> 
>  ????? If it becomes infeasible to find smaller datasets, etc., you can 
> cut out certain tests with a construct like the following:
> 
> 
> if(!fda::CRAN()){
> # ... tests to run on other computers but to skip on CRAN.? ...
> }

Ummm, how should fda::CRAN() now that it runs on CRAN?

CRAN prefers to ship a set of examples/tests etc. that meet our 
requirements. If you want to ru addtional tests and/or examples, then 
run them conditionally on something that is true for your local machine, 
e.g. some defined environment variable.

Best,
Uwe Ligges


> 
> 
>  ????? Obviously, you'll need fda::CRAN.? I found it infeasible to meet 
> that requirement and so disabled the tests that violated CRAN's rule on 
> this.
> 
> 
>  ????? I've been told that this is a suboptimal solution and should be 
> avoided.? I agree.
> 
> 
>  ????? Hope this helps.
>  ????? Spencer Graves
> 
>>
>> You don't have a lot of control of elapsed time because it will depend 
>> on what else is happening on the test machine, but if the other times 
>> are short, usually elapsed time will also be short.
>>
>> Duncan Murdoch
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch.duncan at gmail.com  Tue Apr 24 19:01:23 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 24 Apr 2018 13:01:23 -0400
Subject: [R-pkg-devel] some notes
In-Reply-To: <30fbd143-9301-28c8-90bc-d7328691ec7c@statistik.tu-dortmund.de>
References: <CAHpfP__oXYBbGwGm7fEapDHPB++zpH9EV48G=2E2vNR-Lyg8dQ@mail.gmail.com>
 <09535582-8f8f-4005-addc-b90d867be6a7@gmail.com>
 <7c2d08a4-8fcd-b644-ccf6-79b60b48be37@effectivedefense.org>
 <30fbd143-9301-28c8-90bc-d7328691ec7c@statistik.tu-dortmund.de>
Message-ID: <c9882ade-b563-8421-3d51-1c07029428b8@gmail.com>

On 24/04/2018 12:48 PM, Uwe Ligges wrote:
> 
> 
> On 24.04.2018 18:45, Spencer Graves wrote:
[... deleting irrelevant stuff...]
>>
>>
>>   ????? If it becomes infeasible to find smaller datasets, etc., you can
>> cut out certain tests with a construct like the following:
>>
>>
>> if(!fda::CRAN()){
>> # ... tests to run on other computers but to skip on CRAN.? ...
>> }
> 
> Ummm, how should fda::CRAN() now that it runs on CRAN?
> 
> CRAN prefers to ship a set of examples/tests etc. that meet our
> requirements. If you want to ru addtional tests and/or examples, then
> run them conditionally on something that is true for your local machine,
> e.g. some defined environment variable.

For Xubo Yue, who may not be aware of all of the players:

Uwe Ligges is one of the individuals who runs CRAN.  When you submit a 
package to CRAN, you are asking Uwe and others to distribute your work. 
You should listen to what he says.

Spencer Graves and I are not involved in running CRAN.  We will give you 
advice that we think is good advice, but if it conflicts with Uwe's, 
follow his.

Duncan Murdoch


From maxyxb at umich.edu  Tue Apr 24 19:07:37 2018
From: maxyxb at umich.edu (Xubo Yue)
Date: Tue, 24 Apr 2018 13:07:37 -0400
Subject: [R-pkg-devel] some notes
In-Reply-To: <c9882ade-b563-8421-3d51-1c07029428b8@gmail.com>
References: <CAHpfP__oXYBbGwGm7fEapDHPB++zpH9EV48G=2E2vNR-Lyg8dQ@mail.gmail.com>
 <09535582-8f8f-4005-addc-b90d867be6a7@gmail.com>
 <7c2d08a4-8fcd-b644-ccf6-79b60b48be37@effectivedefense.org>
 <30fbd143-9301-28c8-90bc-d7328691ec7c@statistik.tu-dortmund.de>
 <c9882ade-b563-8421-3d51-1c07029428b8@gmail.com>
Message-ID: <CAHpfP_9xm0PGAOZeyDT+OUusqESOmRm34FcQ-OMkC_P=X-hL2A@mail.gmail.com>

Everyone, I appreciate for your help!

Hey Uwe Ligges:

There are four examples in my package: read data, calculate correlation,
plot, and summarize connection network. The plot is the slowest one and I
have to use donttest{} to avoid testing it on CRAN. All other examples are
fast and take less than 10s, so I can let CRAN test it.

Also Swetlana suggest me to write a vignette to demonstrate plot. However,
my plot is in rgl device (an rgl window separated from default R plot
window) and cannot be integrated into rmarkdown.

So in a nutshell: can I just use donttest{} to my plot example and comment
that it takes a long time to run?

It is my first time to submit r package, sorry for any inconvenience!

Thank you very much for your help!

On Tue, Apr 24, 2018 at 1:01 PM, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 24/04/2018 12:48 PM, Uwe Ligges wrote:
>
>>
>>
>> On 24.04.2018 18:45, Spencer Graves wrote:
>>
> [... deleting irrelevant stuff...]
>
>>
>>>
>>>         If it becomes infeasible to find smaller datasets, etc., you can
>>> cut out certain tests with a construct like the following:
>>>
>>>
>>> if(!fda::CRAN()){
>>> # ... tests to run on other computers but to skip on CRAN.  ...
>>> }
>>>
>>
>> Ummm, how should fda::CRAN() now that it runs on CRAN?
>>
>> CRAN prefers to ship a set of examples/tests etc. that meet our
>> requirements. If you want to ru addtional tests and/or examples, then
>> run them conditionally on something that is true for your local machine,
>> e.g. some defined environment variable.
>>
>
> For Xubo Yue, who may not be aware of all of the players:
>
> Uwe Ligges is one of the individuals who runs CRAN.  When you submit a
> package to CRAN, you are asking Uwe and others to distribute your work. You
> should listen to what he says.
>
> Spencer Graves and I are not involved in running CRAN.  We will give you
> advice that we think is good advice, but if it conflicts with Uwe's, follow
> his.
>
> Duncan Murdoch
>



-- 
*Xubo (Max) YUE, *PhD Student,
*The Industrial and Operation Engineering Department,*
*College of Engineering,*
*The University of Michigan, Ann Arbor, MI, USA*

	[[alternative HTML version deleted]]


From spencer.graves at effectivedefense.org  Tue Apr 24 19:15:48 2018
From: spencer.graves at effectivedefense.org (Spencer Graves)
Date: Tue, 24 Apr 2018 12:15:48 -0500
Subject: [R-pkg-devel] some notes
In-Reply-To: <c9882ade-b563-8421-3d51-1c07029428b8@gmail.com>
References: <CAHpfP__oXYBbGwGm7fEapDHPB++zpH9EV48G=2E2vNR-Lyg8dQ@mail.gmail.com>
 <09535582-8f8f-4005-addc-b90d867be6a7@gmail.com>
 <7c2d08a4-8fcd-b644-ccf6-79b60b48be37@effectivedefense.org>
 <30fbd143-9301-28c8-90bc-d7328691ec7c@statistik.tu-dortmund.de>
 <c9882ade-b563-8421-3d51-1c07029428b8@gmail.com>
Message-ID: <6544bfca-fd9a-5cf3-5f08-1f66bd830813@effectivedefense.org>



On 2018-04-24 12:01, Duncan Murdoch wrote:
> On 24/04/2018 12:48 PM, Uwe Ligges wrote:
>>
>>
>> On 24.04.2018 18:45, Spencer Graves wrote:
> [... deleting irrelevant stuff...]
>>>
>>>
>>> ? ????? If it becomes infeasible to find smaller datasets, etc., you 
>>> can
>>> cut out certain tests with a construct like the following:
>>>
>>>
>>> if(!fda::CRAN()){
>>> # ... tests to run on other computers but to skip on CRAN. ...
>>> }
>>
>> Ummm, how should fda::CRAN() now that it runs on CRAN?
>>
>> CRAN prefers to ship a set of examples/tests etc. that meet our
>> requirements. If you want to ru addtional tests and/or examples, then
>> run them conditionally on something that is true for your local machine,
>> e.g. some defined environment variable.


 ????? The fda::CRAN() function tests a "defined environmental 
variable", as you suggest:? It is TRUE with "R CMD check ?as-cran" and 
FALSE if "-as-cran" (or something like that) is not set.? It has been 
several years since I wrote that code, and I'm not prepared at the 
moment to defend exactly how it works.? It was how I resolved a conflict 
between Jim Ramsay, the maintainer and lead author of "fda", CRAN 
maintainers like Uwe, and other contributors to "fda", especially Giles 
Hooker and me:? It allowed us to keep examples in "fda" help files 
without excessive work trying to find examples that would illustrate the 
same points with less compute time.

>
> For Xubo Yue, who may not be aware of all of the players:
>
> Uwe Ligges is one of the individuals who runs CRAN.? When you submit a 
> package to CRAN, you are asking Uwe and others to distribute your 
> work. You should listen to what he says.
>
> Spencer Graves and I are not involved in running CRAN.? We will give 
> you advice that we think is good advice, but if it conflicts with 
> Uwe's, follow his.
>
> Duncan Murdoch


 ????? Moreover, Duncan's contributions to the R Project vastly exceed 
mine.? If any of my suggestions seem to conflict with Duncan's comments, 
follow his (unless they conflict with someone like Uwe, as Duncan noted).


 ????? Spencer Graves


From ligges at statistik.tu-dortmund.de  Tue Apr 24 19:23:01 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 24 Apr 2018 19:23:01 +0200
Subject: [R-pkg-devel] some notes
In-Reply-To: <6544bfca-fd9a-5cf3-5f08-1f66bd830813@effectivedefense.org>
References: <CAHpfP__oXYBbGwGm7fEapDHPB++zpH9EV48G=2E2vNR-Lyg8dQ@mail.gmail.com>
 <09535582-8f8f-4005-addc-b90d867be6a7@gmail.com>
 <7c2d08a4-8fcd-b644-ccf6-79b60b48be37@effectivedefense.org>
 <30fbd143-9301-28c8-90bc-d7328691ec7c@statistik.tu-dortmund.de>
 <c9882ade-b563-8421-3d51-1c07029428b8@gmail.com>
 <6544bfca-fd9a-5cf3-5f08-1f66bd830813@effectivedefense.org>
Message-ID: <fd8caf04-fc30-b827-e2f5-5969ffd88137@statistik.tu-dortmund.de>



On 24.04.2018 19:15, Spencer Graves wrote:
> 
> 
> On 2018-04-24 12:01, Duncan Murdoch wrote:
>> On 24/04/2018 12:48 PM, Uwe Ligges wrote:
>>>
>>>
>>> On 24.04.2018 18:45, Spencer Graves wrote:
>> [... deleting irrelevant stuff...]
>>>>
>>>>
>>>> ? ????? If it becomes infeasible to find smaller datasets, etc., you 
>>>> can
>>>> cut out certain tests with a construct like the following:
>>>>
>>>>
>>>> if(!fda::CRAN()){
>>>> # ... tests to run on other computers but to skip on CRAN. ...
>>>> }
>>>
>>> Ummm, how should fda::CRAN() now that it runs on CRAN?
>>>
>>> CRAN prefers to ship a set of examples/tests etc. that meet our
>>> requirements. If you want to ru addtional tests and/or examples, then
>>> run them conditionally on something that is true for your local machine,
>>> e.g. some defined environment variable.
> 
> 
>  ????? The fda::CRAN() function tests a "defined environmental 
> variable", as you suggest:? It is TRUE with "R CMD check ?as-cran" and 
> FALSE if "-as-cran" (or something like that)


The something like that is rather relevant. For example, I never use 
--as-cran on my machine, and most CRAN machines do only on incoming 
check but not the regular daily checks ...

Best,
Uwe
  is not set.? It has been
> several years since I wrote that code, and I'm not prepared at the 
> moment to defend exactly how it works.? It was how I resolved a conflict 
> between Jim Ramsay, the maintainer and lead author of "fda", CRAN 
> maintainers like Uwe, and other contributors to "fda", especially Giles 
> Hooker and me:? It allowed us to keep examples in "fda" help files 
> without excessive work trying to find examples that would illustrate the 
> same points with less compute time.
> 
>>
>> For Xubo Yue, who may not be aware of all of the players:
>>
>> Uwe Ligges is one of the individuals who runs CRAN.? When you submit a 
>> package to CRAN, you are asking Uwe and others to distribute your 
>> work. You should listen to what he says.
>>
>> Spencer Graves and I are not involved in running CRAN.? We will give 
>> you advice that we think is good advice, but if it conflicts with 
>> Uwe's, follow his.
>>
>> Duncan Murdoch
> 
> 
>  ????? Moreover, Duncan's contributions to the R Project vastly exceed 
> mine.? If any of my suggestions seem to conflict with Duncan's comments, 
> follow his (unless they conflict with someone like Uwe, as Duncan noted).
> 
> 
>  ????? Spencer Graves
> 
>


From ligges at statistik.tu-dortmund.de  Tue Apr 24 19:24:06 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 24 Apr 2018 19:24:06 +0200
Subject: [R-pkg-devel] some notes
In-Reply-To: <CAHpfP_9xm0PGAOZeyDT+OUusqESOmRm34FcQ-OMkC_P=X-hL2A@mail.gmail.com>
References: <CAHpfP__oXYBbGwGm7fEapDHPB++zpH9EV48G=2E2vNR-Lyg8dQ@mail.gmail.com>
 <09535582-8f8f-4005-addc-b90d867be6a7@gmail.com>
 <7c2d08a4-8fcd-b644-ccf6-79b60b48be37@effectivedefense.org>
 <30fbd143-9301-28c8-90bc-d7328691ec7c@statistik.tu-dortmund.de>
 <c9882ade-b563-8421-3d51-1c07029428b8@gmail.com>
 <CAHpfP_9xm0PGAOZeyDT+OUusqESOmRm34FcQ-OMkC_P=X-hL2A@mail.gmail.com>
Message-ID: <2241252b-7e7a-81b8-0252-96f034562dff@statistik.tu-dortmund.de>



On 24.04.2018 19:07, Xubo Yue wrote:
> Everyone, I appreciate for your help!
> 
> Hey Uwe Ligges:
> 
> There are four examples in my package: read data, calculate correlation, 
> plot, and summarize connection network. The plot is the slowest one and 
> I have to use donttest{} to avoid testing it on CRAN. All other examples 
> are fast and take less than 10s, so I can let CRAN test it.
> 
> Also Swetlana suggest me to write a vignette to demonstrate plot. 
> However, my plot is in rgl device (an rgl window separated from default 
> R plot window) and cannot be integrated into rmarkdown.
> 
> So in a nutshell: can I just use donttest{} to my plot example and 
> comment that it takes a long time to run?

Yes, perfect.

Best,
Uwe Ligges

> 
> It is my first time to submit r package, sorry for any inconvenience!
> 
> Thank you very much for your help!
> 
> On Tue, Apr 24, 2018 at 1:01 PM, Duncan Murdoch 
> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
> 
>     On 24/04/2018 12:48 PM, Uwe Ligges wrote:
> 
> 
> 
>         On 24.04.2018 18:45, Spencer Graves wrote:
> 
>     [... deleting irrelevant stuff...]
> 
> 
> 
>              ? ????? If it becomes infeasible to find smaller datasets,
>             etc., you can
>             cut out certain tests with a construct like the following:
> 
> 
>             if(!fda::CRAN()){
>             # ... tests to run on other computers but to skip on CRAN.? ...
>             }
> 
> 
>         Ummm, how should fda::CRAN() now that it runs on CRAN?
> 
>         CRAN prefers to ship a set of examples/tests etc. that meet our
>         requirements. If you want to ru addtional tests and/or examples,
>         then
>         run them conditionally on something that is true for your local
>         machine,
>         e.g. some defined environment variable.
> 
> 
>     For Xubo Yue, who may not be aware of all of the players:
> 
>     Uwe Ligges is one of the individuals who runs CRAN.? When you submit
>     a package to CRAN, you are asking Uwe and others to distribute your
>     work. You should listen to what he says.
> 
>     Spencer Graves and I are not involved in running CRAN.? We will give
>     you advice that we think is good advice, but if it conflicts with
>     Uwe's, follow his.
> 
>     Duncan Murdoch
> 
> 
> 
> 
> -- 
> *Xubo (Max) YUE, *PhD Student,
> /The Industrial and Operation Engineering Department,/
> /College of Engineering,/
> /The University of Michigan, Ann Arbor, MI, USA/
> 
>


From maxyxb at umich.edu  Tue Apr 24 19:24:37 2018
From: maxyxb at umich.edu (Xubo Yue)
Date: Tue, 24 Apr 2018 13:24:37 -0400
Subject: [R-pkg-devel] some notes
In-Reply-To: <2241252b-7e7a-81b8-0252-96f034562dff@statistik.tu-dortmund.de>
References: <CAHpfP__oXYBbGwGm7fEapDHPB++zpH9EV48G=2E2vNR-Lyg8dQ@mail.gmail.com>
 <09535582-8f8f-4005-addc-b90d867be6a7@gmail.com>
 <7c2d08a4-8fcd-b644-ccf6-79b60b48be37@effectivedefense.org>
 <30fbd143-9301-28c8-90bc-d7328691ec7c@statistik.tu-dortmund.de>
 <c9882ade-b563-8421-3d51-1c07029428b8@gmail.com>
 <CAHpfP_9xm0PGAOZeyDT+OUusqESOmRm34FcQ-OMkC_P=X-hL2A@mail.gmail.com>
 <2241252b-7e7a-81b8-0252-96f034562dff@statistik.tu-dortmund.de>
Message-ID: <CAHpfP_9EvRewaUX3VQ6VwF6yTEMXNHa+F7OWb_V9HhtOqi+C3g@mail.gmail.com>

Yes! Thank you very much!!!!!

On Tue, Apr 24, 2018 at 1:24 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de
> wrote:

>
>
> On 24.04.2018 19:07, Xubo Yue wrote:
>
>> Everyone, I appreciate for your help!
>>
>> Hey Uwe Ligges:
>>
>> There are four examples in my package: read data, calculate correlation,
>> plot, and summarize connection network. The plot is the slowest one and I
>> have to use donttest{} to avoid testing it on CRAN. All other examples are
>> fast and take less than 10s, so I can let CRAN test it.
>>
>> Also Swetlana suggest me to write a vignette to demonstrate plot.
>> However, my plot is in rgl device (an rgl window separated from default R
>> plot window) and cannot be integrated into rmarkdown.
>>
>> So in a nutshell: can I just use donttest{} to my plot example and
>> comment that it takes a long time to run?
>>
>
> Yes, perfect.
>
> Best,
> Uwe Ligges
>
>
>> It is my first time to submit r package, sorry for any inconvenience!
>>
>> Thank you very much for your help!
>>
>> On Tue, Apr 24, 2018 at 1:01 PM, Duncan Murdoch <murdoch.duncan at gmail.com
>> <mailto:murdoch.duncan at gmail.com>> wrote:
>>
>>     On 24/04/2018 12:48 PM, Uwe Ligges wrote:
>>
>>
>>
>>         On 24.04.2018 18:45, Spencer Graves wrote:
>>
>>     [... deleting irrelevant stuff...]
>>
>>
>>
>>                      If it becomes infeasible to find smaller datasets,
>>             etc., you can
>>             cut out certain tests with a construct like the following:
>>
>>
>>             if(!fda::CRAN()){
>>             # ... tests to run on other computers but to skip on CRAN.
>> ...
>>             }
>>
>>
>>         Ummm, how should fda::CRAN() now that it runs on CRAN?
>>
>>         CRAN prefers to ship a set of examples/tests etc. that meet our
>>         requirements. If you want to ru addtional tests and/or examples,
>>         then
>>         run them conditionally on something that is true for your local
>>         machine,
>>         e.g. some defined environment variable.
>>
>>
>>     For Xubo Yue, who may not be aware of all of the players:
>>
>>     Uwe Ligges is one of the individuals who runs CRAN.  When you submit
>>     a package to CRAN, you are asking Uwe and others to distribute your
>>     work. You should listen to what he says.
>>
>>     Spencer Graves and I are not involved in running CRAN.  We will give
>>     you advice that we think is good advice, but if it conflicts with
>>     Uwe's, follow his.
>>
>>     Duncan Murdoch
>>
>>
>>
>>
>> --
>> *Xubo (Max) YUE, *PhD Student,
>> /The Industrial and Operation Engineering Department,/
>> /College of Engineering,/
>> /The University of Michigan, Ann Arbor, MI, USA/
>>
>>
>>


-- 
*Xubo (Max) YUE, *PhD Student,
*The Industrial and Operation Engineering Department,*
*College of Engineering,*
*The University of Michigan, Ann Arbor, MI, USA*

	[[alternative HTML version deleted]]


From murdoch.duncan at gmail.com  Tue Apr 24 19:40:51 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Tue, 24 Apr 2018 13:40:51 -0400
Subject: [R-pkg-devel] some notes
In-Reply-To: <CAHpfP_9xm0PGAOZeyDT+OUusqESOmRm34FcQ-OMkC_P=X-hL2A@mail.gmail.com>
References: <CAHpfP__oXYBbGwGm7fEapDHPB++zpH9EV48G=2E2vNR-Lyg8dQ@mail.gmail.com>
 <09535582-8f8f-4005-addc-b90d867be6a7@gmail.com>
 <7c2d08a4-8fcd-b644-ccf6-79b60b48be37@effectivedefense.org>
 <30fbd143-9301-28c8-90bc-d7328691ec7c@statistik.tu-dortmund.de>
 <c9882ade-b563-8421-3d51-1c07029428b8@gmail.com>
 <CAHpfP_9xm0PGAOZeyDT+OUusqESOmRm34FcQ-OMkC_P=X-hL2A@mail.gmail.com>
Message-ID: <0b36398e-4151-8be4-2753-2f1524093b78@gmail.com>

On 24/04/2018 1:07 PM, Xubo Yue wrote:
> Everyone, I appreciate for your help!
> 
> Hey Uwe Ligges:
> 
> There are four examples in my package: read data, calculate correlation, 
> plot, and summarize connection network. The plot is the slowest one and 
> I have to use donttest{} to avoid testing it on CRAN. All other examples 
> are fast and take less than 10s, so I can let CRAN test it.
> 
> Also Swetlana suggest me to write a vignette to demonstrate plot. 
> However, my plot is in rgl device (an rgl window separated from default 
> R plot window) and cannot be integrated into rmarkdown.

That's not true -- see the rgl vignettes, and the rglwidget() function. 
The main limitation is that the output needs to be HTML rather than 
LaTeX/PDF.  (There are ways to incorporate interactive rgl graphics into 
PDF documents, but they are limited and fragile, so I don't recommend them.)

Duncan Murdoch

> 
> So in a nutshell: can I just use donttest{} to my plot example and 
> comment that it takes a long time to run?
> 
> It is my first time to submit r package, sorry for any inconvenience!
> 
> Thank you very much for your help!
> 
> On Tue, Apr 24, 2018 at 1:01 PM, Duncan Murdoch 
> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
> 
>     On 24/04/2018 12:48 PM, Uwe Ligges wrote:
> 
> 
> 
>         On 24.04.2018 18:45, Spencer Graves wrote:
> 
>     [... deleting irrelevant stuff...]
> 
> 
> 
>              ? ????? If it becomes infeasible to find smaller datasets,
>             etc., you can
>             cut out certain tests with a construct like the following:
> 
> 
>             if(!fda::CRAN()){
>             # ... tests to run on other computers but to skip on CRAN.? ...
>             }
> 
> 
>         Ummm, how should fda::CRAN() now that it runs on CRAN?
> 
>         CRAN prefers to ship a set of examples/tests etc. that meet our
>         requirements. If you want to ru addtional tests and/or examples,
>         then
>         run them conditionally on something that is true for your local
>         machine,
>         e.g. some defined environment variable.
> 
> 
>     For Xubo Yue, who may not be aware of all of the players:
> 
>     Uwe Ligges is one of the individuals who runs CRAN.? When you submit
>     a package to CRAN, you are asking Uwe and others to distribute your
>     work. You should listen to what he says.
> 
>     Spencer Graves and I are not involved in running CRAN.? We will give
>     you advice that we think is good advice, but if it conflicts with
>     Uwe's, follow his.
> 
>     Duncan Murdoch
> 
> 
> 
> 
> -- 
> *Xubo (Max) YUE, *PhD Student,
> /The Industrial and Operation Engineering Department,/
> /College of Engineering,/
> /The University of Michigan, Ann Arbor, MI, USA/
> 
>


From ligges at statistik.tu-dortmund.de  Tue Apr 24 19:44:45 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 24 Apr 2018 19:44:45 +0200
Subject: [R-pkg-devel] some notes
In-Reply-To: <0b36398e-4151-8be4-2753-2f1524093b78@gmail.com>
References: <CAHpfP__oXYBbGwGm7fEapDHPB++zpH9EV48G=2E2vNR-Lyg8dQ@mail.gmail.com>
 <09535582-8f8f-4005-addc-b90d867be6a7@gmail.com>
 <7c2d08a4-8fcd-b644-ccf6-79b60b48be37@effectivedefense.org>
 <30fbd143-9301-28c8-90bc-d7328691ec7c@statistik.tu-dortmund.de>
 <c9882ade-b563-8421-3d51-1c07029428b8@gmail.com>
 <CAHpfP_9xm0PGAOZeyDT+OUusqESOmRm34FcQ-OMkC_P=X-hL2A@mail.gmail.com>
 <0b36398e-4151-8be4-2753-2f1524093b78@gmail.com>
Message-ID: <42b5db6e-8568-d780-f574-43db90c77792@statistik.tu-dortmund.de>



On 24.04.2018 19:40, Duncan Murdoch wrote:
> On 24/04/2018 1:07 PM, Xubo Yue wrote:
>> Everyone, I appreciate for your help!
>>
>> Hey Uwe Ligges:
>>
>> There are four examples in my package: read data, calculate 
>> correlation, plot, and summarize connection network. The plot is the 
>> slowest one and I have to use donttest{} to avoid testing it on CRAN. 
>> All other examples are fast and take less than 10s, so I can let CRAN 
>> test it.
>>
>> Also Swetlana suggest me to write a vignette to demonstrate plot. 
>> However, my plot is in rgl device (an rgl window separated from 
>> default R plot window) and cannot be integrated into rmarkdown.
> 
> That's not true -- see the rgl vignettes, and the rglwidget() function. 
> The main limitation is that the output needs to be HTML rather than 
> LaTeX/PDF.? (There are ways to incorporate interactive rgl graphics into 
> PDF documents, but they are limited and fragile, so I don't recommend 
> them.)

Same from here, note that Swetlana generally suggested to move things 
that are slightly longer than the 5sec threshhold for examples to tests 
*or* perhaps in vignettes, this was not intended as a specific advice 
for this particular example.

Best,
Uwe

> Duncan Murdoch
> 
>>
>> So in a nutshell: can I just use donttest{} to my plot example and 
>> comment that it takes a long time to run?
>>
>> It is my first time to submit r package, sorry for any inconvenience!
>>
>> Thank you very much for your help!
>>
>> On Tue, Apr 24, 2018 at 1:01 PM, Duncan Murdoch 
>> <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
>>
>> ??? On 24/04/2018 12:48 PM, Uwe Ligges wrote:
>>
>>
>>
>> ??????? On 24.04.2018 18:45, Spencer Graves wrote:
>>
>> ??? [... deleting irrelevant stuff...]
>>
>>
>>
>> ???????????? ? ????? If it becomes infeasible to find smaller datasets,
>> ??????????? etc., you can
>> ??????????? cut out certain tests with a construct like the following:
>>
>>
>> ??????????? if(!fda::CRAN()){
>> ??????????? # ... tests to run on other computers but to skip on 
>> CRAN.? ...
>> ??????????? }
>>
>>
>> ??????? Ummm, how should fda::CRAN() now that it runs on CRAN?
>>
>> ??????? CRAN prefers to ship a set of examples/tests etc. that meet our
>> ??????? requirements. If you want to ru addtional tests and/or examples,
>> ??????? then
>> ??????? run them conditionally on something that is true for your local
>> ??????? machine,
>> ??????? e.g. some defined environment variable.
>>
>>
>> ??? For Xubo Yue, who may not be aware of all of the players:
>>
>> ??? Uwe Ligges is one of the individuals who runs CRAN.? When you submit
>> ??? a package to CRAN, you are asking Uwe and others to distribute your
>> ??? work. You should listen to what he says.
>>
>> ??? Spencer Graves and I are not involved in running CRAN.? We will give
>> ??? you advice that we think is good advice, but if it conflicts with
>> ??? Uwe's, follow his.
>>
>> ??? Duncan Murdoch
>>
>>
>>
>>
>> -- 
>> *Xubo (Max) YUE, *PhD Student,
>> /The Industrial and Operation Engineering Department,/
>> /College of Engineering,/
>> /The University of Michigan, Ann Arbor, MI, USA/
>>
>>
>


From maxyxb at umich.edu  Tue Apr 24 19:50:00 2018
From: maxyxb at umich.edu (Xubo Yue)
Date: Tue, 24 Apr 2018 13:50:00 -0400
Subject: [R-pkg-devel] some notes
In-Reply-To: <42b5db6e-8568-d780-f574-43db90c77792@statistik.tu-dortmund.de>
References: <CAHpfP__oXYBbGwGm7fEapDHPB++zpH9EV48G=2E2vNR-Lyg8dQ@mail.gmail.com>
 <09535582-8f8f-4005-addc-b90d867be6a7@gmail.com>
 <7c2d08a4-8fcd-b644-ccf6-79b60b48be37@effectivedefense.org>
 <30fbd143-9301-28c8-90bc-d7328691ec7c@statistik.tu-dortmund.de>
 <c9882ade-b563-8421-3d51-1c07029428b8@gmail.com>
 <CAHpfP_9xm0PGAOZeyDT+OUusqESOmRm34FcQ-OMkC_P=X-hL2A@mail.gmail.com>
 <0b36398e-4151-8be4-2753-2f1524093b78@gmail.com>
 <42b5db6e-8568-d780-f574-43db90c77792@statistik.tu-dortmund.de>
Message-ID: <CAHpfP__0SzubxA2Lw2n_+=u66qmXyXom02Qe6pUCim01HRyXqA@mail.gmail.com>

Hey

I am a little bit confused. Must I use vignette to show example of plot? Or
I can simple ignore vignette?

Thank you!

On Tue, Apr 24, 2018 at 1:44 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de
> wrote:

>
>
> On 24.04.2018 19:40, Duncan Murdoch wrote:
>
>> On 24/04/2018 1:07 PM, Xubo Yue wrote:
>>
>>> Everyone, I appreciate for your help!
>>>
>>> Hey Uwe Ligges:
>>>
>>> There are four examples in my package: read data, calculate correlation,
>>> plot, and summarize connection network. The plot is the slowest one and I
>>> have to use donttest{} to avoid testing it on CRAN. All other examples are
>>> fast and take less than 10s, so I can let CRAN test it.
>>>
>>> Also Swetlana suggest me to write a vignette to demonstrate plot.
>>> However, my plot is in rgl device (an rgl window separated from default R
>>> plot window) and cannot be integrated into rmarkdown.
>>>
>>
>> That's not true -- see the rgl vignettes, and the rglwidget() function.
>> The main limitation is that the output needs to be HTML rather than
>> LaTeX/PDF.  (There are ways to incorporate interactive rgl graphics into
>> PDF documents, but they are limited and fragile, so I don't recommend them.)
>>
>
> Same from here, note that Swetlana generally suggested to move things that
> are slightly longer than the 5sec threshhold for examples to tests *or*
> perhaps in vignettes, this was not intended as a specific advice for this
> particular example.
>
> Best,
> Uwe
>
>
> Duncan Murdoch
>>
>>
>>> So in a nutshell: can I just use donttest{} to my plot example and
>>> comment that it takes a long time to run?
>>>
>>> It is my first time to submit r package, sorry for any inconvenience!
>>>
>>> Thank you very much for your help!
>>>
>>> On Tue, Apr 24, 2018 at 1:01 PM, Duncan Murdoch <
>>> murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
>>>
>>>     On 24/04/2018 12:48 PM, Uwe Ligges wrote:
>>>
>>>
>>>
>>>         On 24.04.2018 18:45, Spencer Graves wrote:
>>>
>>>     [... deleting irrelevant stuff...]
>>>
>>>
>>>
>>>                      If it becomes infeasible to find smaller datasets,
>>>             etc., you can
>>>             cut out certain tests with a construct like the following:
>>>
>>>
>>>             if(!fda::CRAN()){
>>>             # ... tests to run on other computers but to skip on CRAN.
>>> ...
>>>             }
>>>
>>>
>>>         Ummm, how should fda::CRAN() now that it runs on CRAN?
>>>
>>>         CRAN prefers to ship a set of examples/tests etc. that meet our
>>>         requirements. If you want to ru addtional tests and/or examples,
>>>         then
>>>         run them conditionally on something that is true for your local
>>>         machine,
>>>         e.g. some defined environment variable.
>>>
>>>
>>>     For Xubo Yue, who may not be aware of all of the players:
>>>
>>>     Uwe Ligges is one of the individuals who runs CRAN.  When you submit
>>>     a package to CRAN, you are asking Uwe and others to distribute your
>>>     work. You should listen to what he says.
>>>
>>>     Spencer Graves and I are not involved in running CRAN.  We will give
>>>     you advice that we think is good advice, but if it conflicts with
>>>     Uwe's, follow his.
>>>
>>>     Duncan Murdoch
>>>
>>>
>>>
>>>
>>> --
>>> *Xubo (Max) YUE, *PhD Student,
>>> /The Industrial and Operation Engineering Department,/
>>> /College of Engineering,/
>>> /The University of Michigan, Ann Arbor, MI, USA/
>>>
>>>
>>>
>>


-- 
*Xubo (Max) YUE, *PhD Student,
*The Industrial and Operation Engineering Department,*
*College of Engineering,*
*The University of Michigan, Ann Arbor, MI, USA*

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Tue Apr 24 19:53:02 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 24 Apr 2018 19:53:02 +0200
Subject: [R-pkg-devel] some notes
In-Reply-To: <CAHpfP__0SzubxA2Lw2n_+=u66qmXyXom02Qe6pUCim01HRyXqA@mail.gmail.com>
References: <CAHpfP__oXYBbGwGm7fEapDHPB++zpH9EV48G=2E2vNR-Lyg8dQ@mail.gmail.com>
 <09535582-8f8f-4005-addc-b90d867be6a7@gmail.com>
 <7c2d08a4-8fcd-b644-ccf6-79b60b48be37@effectivedefense.org>
 <30fbd143-9301-28c8-90bc-d7328691ec7c@statistik.tu-dortmund.de>
 <c9882ade-b563-8421-3d51-1c07029428b8@gmail.com>
 <CAHpfP_9xm0PGAOZeyDT+OUusqESOmRm34FcQ-OMkC_P=X-hL2A@mail.gmail.com>
 <0b36398e-4151-8be4-2753-2f1524093b78@gmail.com>
 <42b5db6e-8568-d780-f574-43db90c77792@statistik.tu-dortmund.de>
 <CAHpfP__0SzubxA2Lw2n_+=u66qmXyXom02Qe6pUCim01HRyXqA@mail.gmail.com>
Message-ID: <dd6f1c20-5bdf-98f7-f5fb-f90e130804f6@statistik.tu-dortmund.de>



On 24.04.2018 19:50, Xubo Yue wrote:
> Hey
> 
> I am a little bit confused. Must I use vignette to show example of plot? 
> Or I can simple ignore vignette?

You can ignore the vignette suggestion, it was just a proposal to 
present longer runing stuff more elaborated as in your examples.

Best,
Uwe Ligges



> Thank you!
> 
> On Tue, Apr 24, 2018 at 1:44 PM, Uwe Ligges 
> <ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>> wrote:
> 
> 
> 
>     On 24.04.2018 19:40, Duncan Murdoch wrote:
> 
>         On 24/04/2018 1:07 PM, Xubo Yue wrote:
> 
>             Everyone, I appreciate for your help!
> 
>             Hey Uwe Ligges:
> 
>             There are four examples in my package: read data, calculate
>             correlation, plot, and summarize connection network. The
>             plot is the slowest one and I have to use donttest{} to
>             avoid testing it on CRAN. All other examples are fast and
>             take less than 10s, so I can let CRAN test it.
> 
>             Also Swetlana suggest me to write a vignette to demonstrate
>             plot. However, my plot is in rgl device (an rgl window
>             separated from default R plot window) and cannot be
>             integrated into rmarkdown.
> 
> 
>         That's not true -- see the rgl vignettes, and the rglwidget()
>         function. The main limitation is that the output needs to be
>         HTML rather than LaTeX/PDF.? (There are ways to incorporate
>         interactive rgl graphics into PDF documents, but they are
>         limited and fragile, so I don't recommend them.)
> 
> 
>     Same from here, note that Swetlana generally suggested to move
>     things that are slightly longer than the 5sec threshhold for
>     examples to tests *or* perhaps in vignettes, this was not intended
>     as a specific advice for this particular example.
> 
>     Best,
>     Uwe
> 
> 
>         Duncan Murdoch
> 
> 
>             So in a nutshell: can I just use donttest{} to my plot
>             example and comment that it takes a long time to run?
> 
>             It is my first time to submit r package, sorry for any
>             inconvenience!
> 
>             Thank you very much for your help!
> 
>             On Tue, Apr 24, 2018 at 1:01 PM, Duncan Murdoch
>             <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>
>             <mailto:murdoch.duncan at gmail.com
>             <mailto:murdoch.duncan at gmail.com>>> wrote:
> 
>              ??? On 24/04/2018 12:48 PM, Uwe Ligges wrote:
> 
> 
> 
>              ??????? On 24.04.2018 18:45, Spencer Graves wrote:
> 
>              ??? [... deleting irrelevant stuff...]
> 
> 
> 
>              ???????????? ? ????? If it becomes infeasible to find
>             smaller datasets,
>              ??????????? etc., you can
>              ??????????? cut out certain tests with a construct like the
>             following:
> 
> 
>              ??????????? if(!fda::CRAN()){
>              ??????????? # ... tests to run on other computers but to
>             skip on CRAN.? ...
>              ??????????? }
> 
> 
>              ??????? Ummm, how should fda::CRAN() now that it runs on CRAN?
> 
>              ??????? CRAN prefers to ship a set of examples/tests etc.
>             that meet our
>              ??????? requirements. If you want to ru addtional tests
>             and/or examples,
>              ??????? then
>              ??????? run them conditionally on something that is true
>             for your local
>              ??????? machine,
>              ??????? e.g. some defined environment variable.
> 
> 
>              ??? For Xubo Yue, who may not be aware of all of the players:
> 
>              ??? Uwe Ligges is one of the individuals who runs CRAN. 
>             When you submit
>              ??? a package to CRAN, you are asking Uwe and others to
>             distribute your
>              ??? work. You should listen to what he says.
> 
>              ??? Spencer Graves and I are not involved in running CRAN. 
>             We will give
>              ??? you advice that we think is good advice, but if it
>             conflicts with
>              ??? Uwe's, follow his.
> 
>              ??? Duncan Murdoch
> 
> 
> 
> 
>             -- 
>             *Xubo (Max) YUE, *PhD Student,
>             /The Industrial and Operation Engineering Department,/
>             /College of Engineering,/
>             /The University of Michigan, Ann Arbor, MI, USA/
> 
> 
> 
> 
> 
> 
> -- 
> *Xubo (Max) YUE, *PhD Student,
> /The Industrial and Operation Engineering Department,/
> /College of Engineering,/
> /The University of Michigan, Ann Arbor, MI, USA/
> 
>


From maxyxb at umich.edu  Tue Apr 24 19:54:43 2018
From: maxyxb at umich.edu (Xubo Yue)
Date: Tue, 24 Apr 2018 13:54:43 -0400
Subject: [R-pkg-devel] some notes
In-Reply-To: <dd6f1c20-5bdf-98f7-f5fb-f90e130804f6@statistik.tu-dortmund.de>
References: <CAHpfP__oXYBbGwGm7fEapDHPB++zpH9EV48G=2E2vNR-Lyg8dQ@mail.gmail.com>
 <09535582-8f8f-4005-addc-b90d867be6a7@gmail.com>
 <7c2d08a4-8fcd-b644-ccf6-79b60b48be37@effectivedefense.org>
 <30fbd143-9301-28c8-90bc-d7328691ec7c@statistik.tu-dortmund.de>
 <c9882ade-b563-8421-3d51-1c07029428b8@gmail.com>
 <CAHpfP_9xm0PGAOZeyDT+OUusqESOmRm34FcQ-OMkC_P=X-hL2A@mail.gmail.com>
 <0b36398e-4151-8be4-2753-2f1524093b78@gmail.com>
 <42b5db6e-8568-d780-f574-43db90c77792@statistik.tu-dortmund.de>
 <CAHpfP__0SzubxA2Lw2n_+=u66qmXyXom02Qe6pUCim01HRyXqA@mail.gmail.com>
 <dd6f1c20-5bdf-98f7-f5fb-f90e130804f6@statistik.tu-dortmund.de>
Message-ID: <CAHpfP_83aoaEUAkRWVaiaVm-JnOZyzNa3Un1RyAb5zSPT03sUA@mail.gmail.com>

Oh thanks for clarification. You are so nice!

On Tue, Apr 24, 2018 at 1:53 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de
> wrote:

>
>
> On 24.04.2018 19:50, Xubo Yue wrote:
>
>> Hey
>>
>> I am a little bit confused. Must I use vignette to show example of plot?
>> Or I can simple ignore vignette?
>>
>
> You can ignore the vignette suggestion, it was just a proposal to present
> longer runing stuff more elaborated as in your examples.
>
> Best,
> Uwe Ligges
>
>
>
> Thank you!
>>
>>
>> On Tue, Apr 24, 2018 at 1:44 PM, Uwe Ligges <
>> ligges at statistik.tu-dortmund.de <mailto:ligges at statistik.tu-dortmund.de>>
>> wrote:
>>
>>
>>
>>     On 24.04.2018 19:40, Duncan Murdoch wrote:
>>
>>         On 24/04/2018 1:07 PM, Xubo Yue wrote:
>>
>>             Everyone, I appreciate for your help!
>>
>>             Hey Uwe Ligges:
>>
>>             There are four examples in my package: read data, calculate
>>             correlation, plot, and summarize connection network. The
>>             plot is the slowest one and I have to use donttest{} to
>>             avoid testing it on CRAN. All other examples are fast and
>>             take less than 10s, so I can let CRAN test it.
>>
>>             Also Swetlana suggest me to write a vignette to demonstrate
>>             plot. However, my plot is in rgl device (an rgl window
>>             separated from default R plot window) and cannot be
>>             integrated into rmarkdown.
>>
>>
>>         That's not true -- see the rgl vignettes, and the rglwidget()
>>         function. The main limitation is that the output needs to be
>>         HTML rather than LaTeX/PDF.  (There are ways to incorporate
>>         interactive rgl graphics into PDF documents, but they are
>>         limited and fragile, so I don't recommend them.)
>>
>>
>>     Same from here, note that Swetlana generally suggested to move
>>     things that are slightly longer than the 5sec threshhold for
>>     examples to tests *or* perhaps in vignettes, this was not intended
>>     as a specific advice for this particular example.
>>
>>     Best,
>>     Uwe
>>
>>
>>         Duncan Murdoch
>>
>>
>>             So in a nutshell: can I just use donttest{} to my plot
>>             example and comment that it takes a long time to run?
>>
>>             It is my first time to submit r package, sorry for any
>>             inconvenience!
>>
>>             Thank you very much for your help!
>>
>>             On Tue, Apr 24, 2018 at 1:01 PM, Duncan Murdoch
>>             <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>
>>             <mailto:murdoch.duncan at gmail.com
>>
>>             <mailto:murdoch.duncan at gmail.com>>> wrote:
>>
>>                  On 24/04/2018 12:48 PM, Uwe Ligges wrote:
>>
>>
>>
>>                      On 24.04.2018 18:45, Spencer Graves wrote:
>>
>>                  [... deleting irrelevant stuff...]
>>
>>
>>
>>                                   If it becomes infeasible to find
>>             smaller datasets,
>>                          etc., you can
>>                          cut out certain tests with a construct like the
>>             following:
>>
>>
>>                          if(!fda::CRAN()){
>>                          # ... tests to run on other computers but to
>>             skip on CRAN.  ...
>>                          }
>>
>>
>>                      Ummm, how should fda::CRAN() now that it runs on
>> CRAN?
>>
>>                      CRAN prefers to ship a set of examples/tests etc.
>>             that meet our
>>                      requirements. If you want to ru addtional tests
>>             and/or examples,
>>                      then
>>                      run them conditionally on something that is true
>>             for your local
>>                      machine,
>>                      e.g. some defined environment variable.
>>
>>
>>                  For Xubo Yue, who may not be aware of all of the players:
>>
>>                  Uwe Ligges is one of the individuals who runs CRAN.
>>        When you submit
>>                  a package to CRAN, you are asking Uwe and others to
>>             distribute your
>>                  work. You should listen to what he says.
>>
>>                  Spencer Graves and I are not involved in running CRAN.
>>            We will give
>>                  you advice that we think is good advice, but if it
>>             conflicts with
>>                  Uwe's, follow his.
>>
>>                  Duncan Murdoch
>>
>>
>>
>>
>>             --             *Xubo (Max) YUE, *PhD Student,
>>             /The Industrial and Operation Engineering Department,/
>>             /College of Engineering,/
>>             /The University of Michigan, Ann Arbor, MI, USA/
>>
>>
>>
>>
>>
>>
>> --
>> *Xubo (Max) YUE, *PhD Student,
>> /The Industrial and Operation Engineering Department,/
>> /College of Engineering,/
>> /The University of Michigan, Ann Arbor, MI, USA/
>>
>>
>>


-- 
*Xubo (Max) YUE, *PhD Student,
*The Industrial and Operation Engineering Department,*
*College of Engineering,*
*The University of Michigan, Ann Arbor, MI, USA*

	[[alternative HTML version deleted]]


From spencer.graves at effectivedefense.org  Tue Apr 24 22:49:06 2018
From: spencer.graves at effectivedefense.org (Spencer Graves)
Date: Tue, 24 Apr 2018 15:49:06 -0500
Subject: [R-pkg-devel] some notes
In-Reply-To: <fd8caf04-fc30-b827-e2f5-5969ffd88137@statistik.tu-dortmund.de>
References: <CAHpfP__oXYBbGwGm7fEapDHPB++zpH9EV48G=2E2vNR-Lyg8dQ@mail.gmail.com>
 <09535582-8f8f-4005-addc-b90d867be6a7@gmail.com>
 <7c2d08a4-8fcd-b644-ccf6-79b60b48be37@effectivedefense.org>
 <30fbd143-9301-28c8-90bc-d7328691ec7c@statistik.tu-dortmund.de>
 <c9882ade-b563-8421-3d51-1c07029428b8@gmail.com>
 <6544bfca-fd9a-5cf3-5f08-1f66bd830813@effectivedefense.org>
 <fd8caf04-fc30-b827-e2f5-5969ffd88137@statistik.tu-dortmund.de>
Message-ID: <a641a3a5-b81b-9fd4-172b-190637826d6e@effectivedefense.org>



On 2018-04-24 12:23, Uwe Ligges wrote:
>
>
> On 24.04.2018 19:15, Spencer Graves wrote:
>>
>>
>> On 2018-04-24 12:01, Duncan Murdoch wrote:
>>> On 24/04/2018 12:48 PM, Uwe Ligges wrote:
>>>>
>>>>
>>>> On 24.04.2018 18:45, Spencer Graves wrote:
>>> [... deleting irrelevant stuff...]
>>>>>
>>>>>
>>>>> ? ????? If it becomes infeasible to find smaller datasets, etc., 
>>>>> you can
>>>>> cut out certain tests with a construct like the following:
>>>>>
>>>>>
>>>>> if(!fda::CRAN()){
>>>>> # ... tests to run on other computers but to skip on CRAN. ...
>>>>> }
>>>>
>>>> Ummm, how should fda::CRAN() now that it runs on CRAN?
>>>>
>>>> CRAN prefers to ship a set of examples/tests etc. that meet our
>>>> requirements. If you want to ru addtional tests and/or examples, then
>>>> run them conditionally on something that is true for your local 
>>>> machine,
>>>> e.g. some defined environment variable.
>>
>>
>> ?????? The fda::CRAN() function tests a "defined environmental 
>> variable", as you suggest:? It is TRUE with "R CMD check ?as-cran" 
>> and FALSE if "-as-cran" (or something like that)
>
>
> The something like that is rather relevant. For example, I never use 
> --as-cran on my machine, and most CRAN machines do only on incoming 
> check but not the regular daily checks ...


 ????? I very much appreciate your time and effort in maintaining CRAN.? 
The precise code used is as follows:


CRAN <- function (CRAN_pattern, n_R_CHECK4CRAN){
 ??? gete <- Sys.getenv()
 ??? ngete <- names(gete)
 ??? i <- seq(along = gete)
 ??? if (missing(CRAN_pattern)) {
 ??????? if ("_CRAN_pattern_" %in% ngete) {
 ??????????? CRAN_pattern <- gete["_CRAN_pattern_"]
 ??????? }
 ??????? else CRAN_pattern <- "^_R_"
 ??? }
 ??? if (missing(n_R_CHECK4CRAN)) {
 ??????? if ("_n_R_CHECK4CRAN_" %in% ngete) {
 ??????????? n_R_CHECK4CRAN <- as.numeric(gete["_n_R_CHECK4CRAN_"])
 ??????? }
 ??????? else n_R_CHECK4CRAN <- 5
 ??? }
 ??? for (pati in CRAN_pattern) i <- i[grep(pati, ngete[i])]
 ??? cran. <- (length(i) >= n_R_CHECK4CRAN)
 ??? attr(cran., "Sys.getenv") <- gete
 ??? attr(cran., "matches") <- i
 ??? cran.
}


 ????? This seems to do what I think we both wanted:? not run the longer 
examples on CRAN but still allow them to be run elsewhere. If you want 
something different here, Uwe, please tell me what you want.? If it's 
reasonably easy to implement, I will.


 ????? FYI, I just checked the "CRAN Package Check Results for Package 
fda":? It returned "OK" on 8 of the 12 "flavors", but returned "ERROR" 
on the other four.? NONE of those errors were for excess time.? Instead, 
they were for <<no applicable method for 'knots' applied to an object of 
class "fd">>. ? The NAMESPACE file for "fda" includes both 
"export(knots.fd)" and "S3method(knots, fd)".


 ????? What should I do about this intermittent error?


 ????? Thanks,
 ????? Spencer

>
> Best,
> Uwe
> ?is not set.? It has been
>> several years since I wrote that code, and I'm not prepared at the 
>> moment to defend exactly how it works. It was how I resolved a 
>> conflict between Jim Ramsay, the maintainer and lead author of "fda", 
>> CRAN maintainers like Uwe, and other contributors to "fda", 
>> especially Giles Hooker and me:? It allowed us to keep examples in 
>> "fda" help files without excessive work trying to find examples that 
>> would illustrate the same points with less compute time.
>>
>>>
>>> For Xubo Yue, who may not be aware of all of the players:
>>>
>>> Uwe Ligges is one of the individuals who runs CRAN.? When you submit 
>>> a package to CRAN, you are asking Uwe and others to distribute your 
>>> work. You should listen to what he says.
>>>
>>> Spencer Graves and I are not involved in running CRAN.? We will give 
>>> you advice that we think is good advice, but if it conflicts with 
>>> Uwe's, follow his.
>>>
>>> Duncan Murdoch
>>
>>
>> ?????? Moreover, Duncan's contributions to the R Project vastly 
>> exceed mine.? If any of my suggestions seem to conflict with Duncan's 
>> comments, follow his (unless they conflict with someone like Uwe, as 
>> Duncan noted).
>>
>>
>> ?????? Spencer Graves
>>
>>


	[[alternative HTML version deleted]]


From h.wickham at gmail.com  Wed Apr 25 00:16:01 2018
From: h.wickham at gmail.com (Hadley Wickham)
Date: Tue, 24 Apr 2018 15:16:01 -0700
Subject: [R-pkg-devel] vignette via devtools: sometimes found,
 sometimes not (same package)
In-Reply-To: <23257.40444.77697.800074@stat.math.ethz.ch>
References: <CAERMt4c6TsD_fJCJiyGQJyYDfE6X6rww0W2SkSRjaJUbtgmipA@mail.gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F656E4A@MBXP01.ds.man.ac.uk>
 <CAERMt4dRzhhvqqYLJFgCFPwKAxkW0i7CV-tKwvsYz=tcEjBeRg@mail.gmail.com>
 <CAJuCY5w_cfc0FDRfkYE7yr9G7HDDvam3iPNMDenCqTS2RZxjoA@mail.gmail.com>
 <CAERMt4d=-LRSsYKRT1BHxsj8J8GwW28aE8VQTt5wL27LUFwhQw@mail.gmail.com>
 <CAJuCY5zp0PP9y0qHceg-+UAO6R8c_oUBrZHgjfEo_wCq-3xP9w@mail.gmail.com>
 <23257.40444.77697.800074@stat.math.ethz.ch>
Message-ID: <CABdHhvGJQT2uT3xaAbrsR7=U15-nvz3oaMzxUMPz2xc3UmN7Ww@mail.gmail.com>

On Fri, Apr 20, 2018 at 12:59 AM, Martin Maechler
<maechler at stat.math.ethz.ch> wrote:
>>>>>> Thierry Onkelinx <thierry.onkelinx at inbo.be>
>>>>>>     on Fri, 20 Apr 2018 09:14:44 +0200 writes:
>
>     > Dear Alex, Another idea is to use pkgdown
>     > (http://pkgdown.r-lib.org) to convert all the
>     > documentation of your package (include the vignettes) into
>     > a website. Then you make that available to your students,
>     > e.g. through github pages.
>
> Hmm, sounds nice .. at first:  In teaching (and research!) I particularly
> emphasize people use CRAN (or Bioconductor) packages.
>
> Why on earth is pkgdown not on CRAN ?

It's on its way!

Hadley

-- 
http://hadley.nz


From jguijarrop at aemet.es  Wed Apr 25 18:30:52 2018
From: jguijarrop at aemet.es (Jose A Guijarro)
Date: Wed, 25 Apr 2018 18:30:52 +0200
Subject: [R-pkg-devel] How to write example results to a tempdir()?
Message-ID: <46c13616-7671-f386-830c-b641a0749362@aemet.es>

Dear all,

I am struggling to update my package climatol from version 3.0 to 3.1. 
The old version had all examples under a "dontrun" section because they 
needed files created by other examples that the user had to run first.

As this is not acceptable anymore, I made the examples runnable and 
prepared small ad-hoc datasets, but then writing files to the user space 
is against the CRAN policy rules, and I was suggested to run them on a 
temporal directory. Therefore I changed all my examples to read/write 
files to a tempdir(), as in:

\examples{
#Set a temporal working directory and write input files:
wd <- tempdir()
setwd(wd)
data(Ttest) #(This loads matrix 'dat' and data.frame 'est.c')
write(dat,'Ttest_1981-2000.dat')
write.table(est.c,'Ttest_1981-2000.est',row.names=FALSE,col.names=FALSE)
rm(dat,est.c) #remove loaded data from memory space
#Now run the example:
dd2m('Ttest',1981,2000)
#Input and output files can be found in directory:
print(wd)
}

But now CRAN checks return this warning ten times (one for every example 
in the package):

Warning: working directory was changed to ?/tmp/RtmpWSRK2F?, resetting

Any hint on how to solve the problem will be highly appreciated...

Jose

	[[alternative HTML version deleted]]


From sarah.goslee at gmail.com  Wed Apr 25 19:32:24 2018
From: sarah.goslee at gmail.com (Sarah Goslee)
Date: Wed, 25 Apr 2018 13:32:24 -0400
Subject: [R-pkg-devel] How to write example results to a tempdir()?
In-Reply-To: <46c13616-7671-f386-830c-b641a0749362@aemet.es>
References: <46c13616-7671-f386-830c-b641a0749362@aemet.es>
Message-ID: <CAM_vjumKnYj9_hfuB5VsyLNFMDusNT_rY2-NC4osajx7raYGLw@mail.gmail.com>

Don't change the working directory! That has all kinds of unpleasant
side effects for the unsuspecting user, possibly even more so than
writing to a file.

Instead, write the file to the temp directory, and read it from there, with e.g.

wd <- tempdir()
write(dat, file.path(wd, 'Ttest_1981-2000.dat'))

Using file.path() means that the appropriate path delimiter for that
OS will be used.

Sarah


On Wed, Apr 25, 2018 at 12:30 PM, Jose A Guijarro <jguijarrop at aemet.es> wrote:
> Dear all,
>
> I am struggling to update my package climatol from version 3.0 to 3.1.
> The old version had all examples under a "dontrun" section because they
> needed files created by other examples that the user had to run first.
>
> As this is not acceptable anymore, I made the examples runnable and
> prepared small ad-hoc datasets, but then writing files to the user space
> is against the CRAN policy rules, and I was suggested to run them on a
> temporal directory. Therefore I changed all my examples to read/write
> files to a tempdir(), as in:
>
> \examples{
> #Set a temporal working directory and write input files:
> wd <- tempdir()
> setwd(wd)
> data(Ttest) #(This loads matrix 'dat' and data.frame 'est.c')
> write(dat,'Ttest_1981-2000.dat')
> write.table(est.c,'Ttest_1981-2000.est',row.names=FALSE,col.names=FALSE)
> rm(dat,est.c) #remove loaded data from memory space
> #Now run the example:
> dd2m('Ttest',1981,2000)
> #Input and output files can be found in directory:
> print(wd)
> }
>
> But now CRAN checks return this warning ten times (one for every example
> in the package):
>
> Warning: working directory was changed to ?/tmp/RtmpWSRK2F?, resetting
>
> Any hint on how to solve the problem will be highly appreciated...
>
> Jose
>


-- 
Sarah Goslee
http://www.functionaldiversity.org


From jguijarrop at aemet.es  Wed Apr 25 19:45:37 2018
From: jguijarrop at aemet.es (Jose A Guijarro)
Date: Wed, 25 Apr 2018 19:45:37 +0200
Subject: [R-pkg-devel] How to write example results to a tempdir()?
In-Reply-To: <CAM_vjumKnYj9_hfuB5VsyLNFMDusNT_rY2-NC4osajx7raYGLw@mail.gmail.com>
References: <46c13616-7671-f386-830c-b641a0749362@aemet.es>
 <CAM_vjumKnYj9_hfuB5VsyLNFMDusNT_rY2-NC4osajx7raYGLw@mail.gmail.com>
Message-ID: <b1f1fdac-f17e-4937-b834-3c05c116b28d@aemet.es>

Many thanks for your advise, Sarah!

I will try to implement it. (Now I will have to change all my reading and
writing sentences of all my functions, because they read/write from/to
the users working directory...)

Best regards,

 ??? Jose

El 25/04/18 a las 19:32, Sarah Goslee escribi?:
> Don't change the working directory! That has all kinds of unpleasant
> side effects for the unsuspecting user, possibly even more so than
> writing to a file.
>
> Instead, write the file to the temp directory, and read it from there, with e.g.
>
> wd <- tempdir()
> write(dat, file.path(wd, 'Ttest_1981-2000.dat'))
>
> Using file.path() means that the appropriate path delimiter for that
> OS will be used.
>
> Sarah
>
>
> On Wed, Apr 25, 2018 at 12:30 PM, Jose A Guijarro <jguijarrop at aemet.es> wrote:
>> Dear all,
>>
>> I am struggling to update my package climatol from version 3.0 to 3.1.
>> The old version had all examples under a "dontrun" section because they
>> needed files created by other examples that the user had to run first.
>>
>> As this is not acceptable anymore, I made the examples runnable and
>> prepared small ad-hoc datasets, but then writing files to the user space
>> is against the CRAN policy rules, and I was suggested to run them on a
>> temporal directory. Therefore I changed all my examples to read/write
>> files to a tempdir(), as in:
>>
>> \examples{
>> #Set a temporal working directory and write input files:
>> wd <- tempdir()
>> setwd(wd)
>> data(Ttest) #(This loads matrix 'dat' and data.frame 'est.c')
>> write(dat,'Ttest_1981-2000.dat')
>> write.table(est.c,'Ttest_1981-2000.est',row.names=FALSE,col.names=FALSE)
>> rm(dat,est.c) #remove loaded data from memory space
>> #Now run the example:
>> dd2m('Ttest',1981,2000)
>> #Input and output files can be found in directory:
>> print(wd)
>> }
>>
>> But now CRAN checks return this warning ten times (one for every example
>> in the package):
>>
>> Warning: working directory was changed to ?/tmp/RtmpWSRK2F?, resetting
>>
>> Any hint on how to solve the problem will be highly appreciated...
>>
>> Jose
>>
>

-- 
Firma
Dr. Jos? A. Guijarro
Logotipo de Aemet
Delegaci?n Territorial en Illes Balears
Jefe de la Unidad de Estudios Meteorol?gicos del Mediterr?neo
Tel. (+34) 971145409 ????? (Tno. interno: 50790)
www.aemet.es <http://www.aemet.es>
<https://www.facebook.com/AgenciaEstatalMeteorologia/> 
<https://twitter.com/AEMET_Baleares/> 
<https://www.youtube.com/channel/UCd-ceYPisAtCmmoZa26I-5g> 
<https://aemetblog.es/>


From ligges at statistik.tu-dortmund.de  Wed Apr 25 20:02:26 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Wed, 25 Apr 2018 20:02:26 +0200
Subject: [R-pkg-devel] How to write example results to a tempdir()?
In-Reply-To: <b1f1fdac-f17e-4937-b834-3c05c116b28d@aemet.es>
References: <46c13616-7671-f386-830c-b641a0749362@aemet.es>
 <CAM_vjumKnYj9_hfuB5VsyLNFMDusNT_rY2-NC4osajx7raYGLw@mail.gmail.com>
 <b1f1fdac-f17e-4937-b834-3c05c116b28d@aemet.es>
Message-ID: <c3f70056-1d16-3d21-9966-3fe0f94ba83b@statistik.tu-dortmund.de>



On 25.04.2018 19:45, Jose A Guijarro wrote:
> Many thanks for your advise, Sarah!
> 
> I will try to implement it. (Now I will have to change all my reading and
> writing sentences of all my functions, because they read/write from/to
> the users working directory...)

Whcih is OK if the user specifies some filename.

Best,
Uwe Ligges


> 
> Best regards,
> 
>  ??? Jose
> 
> El 25/04/18 a las 19:32, Sarah Goslee escribi?:
>> Don't change the working directory! That has all kinds of unpleasant
>> side effects for the unsuspecting user, possibly even more so than
>> writing to a file.
>>
>> Instead, write the file to the temp directory, and read it from there, 
>> with e.g.
>>
>> wd <- tempdir()
>> write(dat, file.path(wd, 'Ttest_1981-2000.dat'))
>>
>> Using file.path() means that the appropriate path delimiter for that
>> OS will be used.
>>
>> Sarah
>>
>>
>> On Wed, Apr 25, 2018 at 12:30 PM, Jose A Guijarro 
>> <jguijarrop at aemet.es> wrote:
>>> Dear all,
>>>
>>> I am struggling to update my package climatol from version 3.0 to 3.1.
>>> The old version had all examples under a "dontrun" section because they
>>> needed files created by other examples that the user had to run first.
>>>
>>> As this is not acceptable anymore, I made the examples runnable and
>>> prepared small ad-hoc datasets, but then writing files to the user space
>>> is against the CRAN policy rules, and I was suggested to run them on a
>>> temporal directory. Therefore I changed all my examples to read/write
>>> files to a tempdir(), as in:
>>>
>>> \examples{
>>> #Set a temporal working directory and write input files:
>>> wd <- tempdir()
>>> setwd(wd)
>>> data(Ttest) #(This loads matrix 'dat' and data.frame 'est.c')
>>> write(dat,'Ttest_1981-2000.dat')
>>> write.table(est.c,'Ttest_1981-2000.est',row.names=FALSE,col.names=FALSE)
>>> rm(dat,est.c) #remove loaded data from memory space
>>> #Now run the example:
>>> dd2m('Ttest',1981,2000)
>>> #Input and output files can be found in directory:
>>> print(wd)
>>> }
>>>
>>> But now CRAN checks return this warning ten times (one for every example
>>> in the package):
>>>
>>> Warning: working directory was changed to ?/tmp/RtmpWSRK2F?, resetting
>>>
>>> Any hint on how to solve the problem will be highly appreciated...
>>>
>>> Jose
>>>
>>
>


From murdoch.duncan at gmail.com  Wed Apr 25 20:21:28 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Wed, 25 Apr 2018 14:21:28 -0400
Subject: [R-pkg-devel] How to write example results to a tempdir()?
In-Reply-To: <CAM_vjumKnYj9_hfuB5VsyLNFMDusNT_rY2-NC4osajx7raYGLw@mail.gmail.com>
References: <46c13616-7671-f386-830c-b641a0749362@aemet.es>
 <CAM_vjumKnYj9_hfuB5VsyLNFMDusNT_rY2-NC4osajx7raYGLw@mail.gmail.com>
Message-ID: <afc1093b-75dd-ac67-c766-19e016cec0f0@gmail.com>

On 25/04/2018 1:32 PM, Sarah Goslee wrote:
> Don't change the working directory! That has all kinds of unpleasant
> side effects for the unsuspecting user, possibly even more so than
> writing to a file.
> 
> Instead, write the file to the temp directory, and read it from there, with e.g.
> 
> wd <- tempdir()
> write(dat, file.path(wd, 'Ttest_1981-2000.dat'))
> 
> Using file.path() means that the appropriate path delimiter for that
> OS will be used.

That's one good way to do it.  But it is possible to change directory 
and change back at the end of the example.  For example,

wd <- tempdir()
savedir <- setwd(wd)

... # the original code that writes and reads in the current dir

setwd(savedir)

There's a worry that an error in the middle of the code will leave the 
user in the wrong place.  If that's really unlikely to happen, then this 
code is a little simpler than Sarah's suggestion.

If it is likely, you can use tryCatch(..., finally = setwd(savedir)), 
but I think Sarah's solution would be preferable in most cases:  many 
users will not understand what tryCatch() does.

Duncan Murdoch

> 
> Sarah
> 
> 
> On Wed, Apr 25, 2018 at 12:30 PM, Jose A Guijarro <jguijarrop at aemet.es> wrote:
>> Dear all,
>>
>> I am struggling to update my package climatol from version 3.0 to 3.1.
>> The old version had all examples under a "dontrun" section because they
>> needed files created by other examples that the user had to run first.
>>
>> As this is not acceptable anymore, I made the examples runnable and
>> prepared small ad-hoc datasets, but then writing files to the user space
>> is against the CRAN policy rules, and I was suggested to run them on a
>> temporal directory. Therefore I changed all my examples to read/write
>> files to a tempdir(), as in:
>>
>> \examples{
>> #Set a temporal working directory and write input files:
>> wd <- tempdir()
>> setwd(wd)
>> data(Ttest) #(This loads matrix 'dat' and data.frame 'est.c')
>> write(dat,'Ttest_1981-2000.dat')
>> write.table(est.c,'Ttest_1981-2000.est',row.names=FALSE,col.names=FALSE)
>> rm(dat,est.c) #remove loaded data from memory space
>> #Now run the example:
>> dd2m('Ttest',1981,2000)
>> #Input and output files can be found in directory:
>> print(wd)
>> }
>>
>> But now CRAN checks return this warning ten times (one for every example
>> in the package):
>>
>> Warning: working directory was changed to ?/tmp/RtmpWSRK2F?, resetting
>>
>> Any hint on how to solve the problem will be highly appreciated...
>>
>> Jose
>>
> 
>


From jguijarrop at aemet.es  Thu Apr 26 14:11:18 2018
From: jguijarrop at aemet.es (Jose A Guijarro)
Date: Thu, 26 Apr 2018 14:11:18 +0200
Subject: [R-pkg-devel] How to write example results to a tempdir()?
In-Reply-To: <afc1093b-75dd-ac67-c766-19e016cec0f0@gmail.com>
References: <46c13616-7671-f386-830c-b641a0749362@aemet.es>
 <CAM_vjumKnYj9_hfuB5VsyLNFMDusNT_rY2-NC4osajx7raYGLw@mail.gmail.com>
 <afc1093b-75dd-ac67-c766-19e016cec0f0@gmail.com>
Message-ID: <19998b46-b010-1a38-98d2-44067b7e395c@aemet.es>

El 25/04/18 a las 20:21, Duncan Murdoch escribi?:
> On 25/04/2018 1:32 PM, Sarah Goslee wrote:
>> Don't change the working directory! That has all kinds of unpleasant
>> side effects for the unsuspecting user, possibly even more so than
>> writing to a file.
>>
>> Instead, write the file to the temp directory, and read it from 
>> there, with e.g.
>>
>> wd <- tempdir()
>> write(dat, file.path(wd, 'Ttest_1981-2000.dat'))
>>
>> Using file.path() means that the appropriate path delimiter for that
>> OS will be used.
>
> That's one good way to do it.? But it is possible to change directory 
> and change back at the end of the example.? For example,
>
> wd <- tempdir()
> savedir <- setwd(wd)
>
> ... # the original code that writes and reads in the current dir
>
> setwd(savedir)
>
> There's a worry that an error in the middle of the code will leave the 
> user in the wrong place.? If that's really unlikely to happen, then 
> this code is a little simpler than Sarah's suggestion.
>
> If it is likely, you can use tryCatch(..., finally = setwd(savedir)), 
> but I think Sarah's solution would be preferable in most cases:? many 
> users will not understand what tryCatch() does.
>
> Duncan Murdoch

Many thanks for the suggestion! In this way I only need to apply slight 
changes in the examples and can avoid modifying all read/writes along 
the package. I will try this approach and see if it passes the CRAN checks.

Jose

>
>>
>> Sarah
>>
>>
>> On Wed, Apr 25, 2018 at 12:30 PM, Jose A Guijarro 
>> <jguijarrop at aemet.es> wrote:
>>> Dear all,
>>>
>>> I am struggling to update my package climatol from version 3.0 to 3.1.
>>> The old version had all examples under a "dontrun" section because they
>>> needed files created by other examples that the user had to run first.
>>>
>>> As this is not acceptable anymore, I made the examples runnable and
>>> prepared small ad-hoc datasets, but then writing files to the user 
>>> space
>>> is against the CRAN policy rules, and I was suggested to run them on a
>>> temporal directory. Therefore I changed all my examples to read/write
>>> files to a tempdir(), as in:
>>>
>>> \examples{
>>> #Set a temporal working directory and write input files:
>>> wd <- tempdir()
>>> setwd(wd)
>>> data(Ttest) #(This loads matrix 'dat' and data.frame 'est.c')
>>> write(dat,'Ttest_1981-2000.dat')
>>> write.table(est.c,'Ttest_1981-2000.est',row.names=FALSE,col.names=FALSE) 
>>>
>>> rm(dat,est.c) #remove loaded data from memory space
>>> #Now run the example:
>>> dd2m('Ttest',1981,2000)
>>> #Input and output files can be found in directory:
>>> print(wd)
>>> }
>>>
>>> But now CRAN checks return this warning ten times (one for every 
>>> example
>>> in the package):
>>>
>>> Warning: working directory was changed to ?/tmp/RtmpWSRK2F?, resetting
>>>
>>> Any hint on how to solve the problem will be highly appreciated...
>>>
>>> Jose
>>>
>>
>>
>


From spencer.graves at effectivedefense.org  Thu Apr 26 15:28:30 2018
From: spencer.graves at effectivedefense.org (Spencer Graves)
Date: Thu, 26 Apr 2018 08:28:30 -0500
Subject: [R-pkg-devel] How to write example results to a tempdir()?
In-Reply-To: <19998b46-b010-1a38-98d2-44067b7e395c@aemet.es>
References: <46c13616-7671-f386-830c-b641a0749362@aemet.es>
 <CAM_vjumKnYj9_hfuB5VsyLNFMDusNT_rY2-NC4osajx7raYGLw@mail.gmail.com>
 <afc1093b-75dd-ac67-c766-19e016cec0f0@gmail.com>
 <19998b46-b010-1a38-98d2-44067b7e395c@aemet.es>
Message-ID: <c1b395a6-2702-1d64-a2e8-4bbd1863826f@effectivedefense.org>



On 2018-04-26 07:11, Jose A Guijarro wrote:
> El 25/04/18 a las 20:21, Duncan Murdoch escribi?:
>> On 25/04/2018 1:32 PM, Sarah Goslee wrote:
>>> Don't change the working directory! That has all kinds of unpleasant
>>> side effects for the unsuspecting user, possibly even more so than
>>> writing to a file.
>>>
>>> Instead, write the file to the temp directory, and read it from 
>>> there, with e.g.
>>>
>>> wd <- tempdir()
>>> write(dat, file.path(wd, 'Ttest_1981-2000.dat'))
>>>
>>> Using file.path() means that the appropriate path delimiter for that
>>> OS will be used.
>>
>> That's one good way to do it.? But it is possible to change directory 
>> and change back at the end of the example.? For example,
>>
>> wd <- tempdir()
>> savedir <- setwd(wd)
>>
>> ... # the original code that writes and reads in the current dir
>>
>> setwd(savedir)
>>
>> There's a worry that an error in the middle of the code will leave 
>> the user in the wrong place.? If that's really unlikely to happen, 
>> then this code is a little simpler than Sarah's suggestion.
>>
>> If it is likely, you can use tryCatch(..., finally = setwd(savedir)), 
>> but I think Sarah's solution would be preferable in most cases:? many 
>> users will not understand what tryCatch() does.


Hi, Duncan, et al.:


 ????? Under what circumstances should one also use "on.exit":


wd <- tempdir()
savedir <- setwd(wd)
on.exit(setwd(savedir))?


 ????? Even senior R programmers may miss a failure mode.? In a 
function, this works well:? I don't need to remember to "setwd(savedir)" 
later in the code, which could be a problem if I have multiple exit 
points.? I don't know how it would work in a vignette or the examples 
section of a *.Rd file.? tryCatch(..., finally = setwd(savedir)) 
condenses this into one line ... and is too terse for me in many cases.


 ????? Spencer Graves

>>
>> Duncan Murdoch
>
> Many thanks for the suggestion! In this way I only need to apply 
> slight changes in the examples and can avoid modifying all read/writes 
> along the package. I will try this approach and see if it passes the 
> CRAN checks.
>
> Jose
>
>>
>>>
>>> Sarah
>>>
>>>
>>> On Wed, Apr 25, 2018 at 12:30 PM, Jose A Guijarro 
>>> <jguijarrop at aemet.es> wrote:
>>>> Dear all,
>>>>
>>>> I am struggling to update my package climatol from version 3.0 to 3.1.
>>>> The old version had all examples under a "dontrun" section because 
>>>> they
>>>> needed files created by other examples that the user had to run first.
>>>>
>>>> As this is not acceptable anymore, I made the examples runnable and
>>>> prepared small ad-hoc datasets, but then writing files to the user 
>>>> space
>>>> is against the CRAN policy rules, and I was suggested to run them on a
>>>> temporal directory. Therefore I changed all my examples to read/write
>>>> files to a tempdir(), as in:
>>>>
>>>> \examples{
>>>> #Set a temporal working directory and write input files:
>>>> wd <- tempdir()
>>>> setwd(wd)
>>>> data(Ttest) #(This loads matrix 'dat' and data.frame 'est.c')
>>>> write(dat,'Ttest_1981-2000.dat')
>>>> write.table(est.c,'Ttest_1981-2000.est',row.names=FALSE,col.names=FALSE) 
>>>>
>>>> rm(dat,est.c) #remove loaded data from memory space
>>>> #Now run the example:
>>>> dd2m('Ttest',1981,2000)
>>>> #Input and output files can be found in directory:
>>>> print(wd)
>>>> }
>>>>
>>>> But now CRAN checks return this warning ten times (one for every 
>>>> example
>>>> in the package):
>>>>
>>>> Warning: working directory was changed to ?/tmp/RtmpWSRK2F?, resetting
>>>>
>>>> Any hint on how to solve the problem will be highly appreciated...
>>>>
>>>> Jose
>>>>
>>>
>>>
>>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch.duncan at gmail.com  Thu Apr 26 18:27:37 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 26 Apr 2018 12:27:37 -0400
Subject: [R-pkg-devel] How to write example results to a tempdir()?
In-Reply-To: <c1b395a6-2702-1d64-a2e8-4bbd1863826f@effectivedefense.org>
References: <46c13616-7671-f386-830c-b641a0749362@aemet.es>
 <CAM_vjumKnYj9_hfuB5VsyLNFMDusNT_rY2-NC4osajx7raYGLw@mail.gmail.com>
 <afc1093b-75dd-ac67-c766-19e016cec0f0@gmail.com>
 <19998b46-b010-1a38-98d2-44067b7e395c@aemet.es>
 <c1b395a6-2702-1d64-a2e8-4bbd1863826f@effectivedefense.org>
Message-ID: <d1f244af-ebf4-70a2-e7b0-96477818ad00@gmail.com>

On 26/04/2018 9:28 AM, Spencer Graves wrote:
> 
> 
> On 2018-04-26 07:11, Jose A Guijarro wrote:
>> El 25/04/18 a las 20:21, Duncan Murdoch escribi?:
>>> On 25/04/2018 1:32 PM, Sarah Goslee wrote:
>>>> Don't change the working directory! That has all kinds of unpleasant
>>>> side effects for the unsuspecting user, possibly even more so than
>>>> writing to a file.
>>>>
>>>> Instead, write the file to the temp directory, and read it from
>>>> there, with e.g.
>>>>
>>>> wd <- tempdir()
>>>> write(dat, file.path(wd, 'Ttest_1981-2000.dat'))
>>>>
>>>> Using file.path() means that the appropriate path delimiter for that
>>>> OS will be used.
>>>
>>> That's one good way to do it.? But it is possible to change directory
>>> and change back at the end of the example.? For example,
>>>
>>> wd <- tempdir()
>>> savedir <- setwd(wd)
>>>
>>> ... # the original code that writes and reads in the current dir
>>>
>>> setwd(savedir)
>>>
>>> There's a worry that an error in the middle of the code will leave
>>> the user in the wrong place.? If that's really unlikely to happen,
>>> then this code is a little simpler than Sarah's suggestion.
>>>
>>> If it is likely, you can use tryCatch(..., finally = setwd(savedir)),
>>> but I think Sarah's solution would be preferable in most cases:? many
>>> users will not understand what tryCatch() does.
> 
> 
> Hi, Duncan, et al.:
> 
> 
>   ????? Under what circumstances should one also use "on.exit":
> 
> 
> wd <- tempdir()
> savedir <- setwd(wd)
> on.exit(setwd(savedir))?
> 
> 
>   ????? Even senior R programmers may miss a failure mode.? In a
> function, this works well:? I don't need to remember to "setwd(savedir)"
> later in the code, which could be a problem if I have multiple exit
> points.? I don't know how it would work in a vignette or the examples
> section of a *.Rd file.? tryCatch(..., finally = setwd(savedir))
> condenses this into one line ... and is too terse for me in many cases.
> 

As you say, on.exit() is appropriate in a function.  It is not 
appropriate in example code.

It's not really defined when it should execute in example code.  If I 
run example(foo), the on.exit() appears to run right away, not waiting 
for the end.  I'd guess it gets installed in the function that runs the 
example code, possibly messing it up.

If I cut and paste from the help page, the on.exit() expression doesn't 
seem to run at all.

I'd expect that a vignette would be similar to example(foo), but I 
haven't tried.

Duncan Murdoch

> 
>   ????? Spencer Graves
> 
>>>
>>> Duncan Murdoch
>>
>> Many thanks for the suggestion! In this way I only need to apply
>> slight changes in the examples and can avoid modifying all read/writes
>> along the package. I will try this approach and see if it passes the
>> CRAN checks.
>>
>> Jose
>>
>>>
>>>>
>>>> Sarah
>>>>
>>>>
>>>> On Wed, Apr 25, 2018 at 12:30 PM, Jose A Guijarro
>>>> <jguijarrop at aemet.es> wrote:
>>>>> Dear all,
>>>>>
>>>>> I am struggling to update my package climatol from version 3.0 to 3.1.
>>>>> The old version had all examples under a "dontrun" section because
>>>>> they
>>>>> needed files created by other examples that the user had to run first.
>>>>>
>>>>> As this is not acceptable anymore, I made the examples runnable and
>>>>> prepared small ad-hoc datasets, but then writing files to the user
>>>>> space
>>>>> is against the CRAN policy rules, and I was suggested to run them on a
>>>>> temporal directory. Therefore I changed all my examples to read/write
>>>>> files to a tempdir(), as in:
>>>>>
>>>>> \examples{
>>>>> #Set a temporal working directory and write input files:
>>>>> wd <- tempdir()
>>>>> setwd(wd)
>>>>> data(Ttest) #(This loads matrix 'dat' and data.frame 'est.c')
>>>>> write(dat,'Ttest_1981-2000.dat')
>>>>> write.table(est.c,'Ttest_1981-2000.est',row.names=FALSE,col.names=FALSE)
>>>>>
>>>>> rm(dat,est.c) #remove loaded data from memory space
>>>>> #Now run the example:
>>>>> dd2m('Ttest',1981,2000)
>>>>> #Input and output files can be found in directory:
>>>>> print(wd)
>>>>> }
>>>>>
>>>>> But now CRAN checks return this warning ten times (one for every
>>>>> example
>>>>> in the package):
>>>>>
>>>>> Warning: working directory was changed to ?/tmp/RtmpWSRK2F?, resetting
>>>>>
>>>>> Any hint on how to solve the problem will be highly appreciated...
>>>>>
>>>>> Jose
>>>>>
>>>>
>>>>
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From henrik.bengtsson at gmail.com  Thu Apr 26 19:04:40 2018
From: henrik.bengtsson at gmail.com (Henrik Bengtsson)
Date: Thu, 26 Apr 2018 10:04:40 -0700
Subject: [R-pkg-devel] How to write example results to a tempdir()?
In-Reply-To: <c1b395a6-2702-1d64-a2e8-4bbd1863826f@effectivedefense.org>
References: <46c13616-7671-f386-830c-b641a0749362@aemet.es>
 <CAM_vjumKnYj9_hfuB5VsyLNFMDusNT_rY2-NC4osajx7raYGLw@mail.gmail.com>
 <afc1093b-75dd-ac67-c766-19e016cec0f0@gmail.com>
 <19998b46-b010-1a38-98d2-44067b7e395c@aemet.es>
 <c1b395a6-2702-1d64-a2e8-4bbd1863826f@effectivedefense.org>
Message-ID: <CAFDcVCQLFV7xq5UpySgb9SwLkEPhzayQXQzM2v+NkFVu_q5F7Q@mail.gmail.com>

On Thu, Apr 26, 2018 at 6:28 AM, Spencer Graves
<spencer.graves at effectivedefense.org> wrote:
>
>
> On 2018-04-26 07:11, Jose A Guijarro wrote:
>>
>> El 25/04/18 a las 20:21, Duncan Murdoch escribi?:
>>>
>>> On 25/04/2018 1:32 PM, Sarah Goslee wrote:
>>>>
>>>> Don't change the working directory! That has all kinds of unpleasant
>>>> side effects for the unsuspecting user, possibly even more so than
>>>> writing to a file.
>>>>
>>>> Instead, write the file to the temp directory, and read it from there,
>>>> with e.g.
>>>>
>>>> wd <- tempdir()
>>>> write(dat, file.path(wd, 'Ttest_1981-2000.dat'))
>>>>
>>>> Using file.path() means that the appropriate path delimiter for that
>>>> OS will be used.
>>>
>>>
>>> That's one good way to do it.  But it is possible to change directory and
>>> change back at the end of the example.  For example,
>>>
>>> wd <- tempdir()
>>> savedir <- setwd(wd)
>>>
>>> ... # the original code that writes and reads in the current dir
>>>
>>> setwd(savedir)
>>>
>>> There's a worry that an error in the middle of the code will leave the
>>> user in the wrong place.  If that's really unlikely to happen, then this
>>> code is a little simpler than Sarah's suggestion.
>>>
>>> If it is likely, you can use tryCatch(..., finally = setwd(savedir)), but
>>> I think Sarah's solution would be preferable in most cases:  many users will
>>> not understand what tryCatch() does.
>
>
>
> Hi, Duncan, et al.:
>
>
>       Under what circumstances should one also use "on.exit":
>
>
> wd <- tempdir()
> savedir <- setwd(wd)
> on.exit(setwd(savedir))?
>
>
>       Even senior R programmers may miss a failure mode.  In a function,
> this works well:  I don't need to remember to "setwd(savedir)" later in the
> code, which could be a problem if I have multiple exit points.  I don't know
> how it would work in a vignette or the examples section of a *.Rd file.
> tryCatch(..., finally = setwd(savedir)) condenses this into one line ... and
> is too terse for me in many cases.

FWIW, it can also be used in a local() call, e.g.

local({
  wd <- tempdir()
  savedir <- setwd(wd)
  on.exit(setwd(savedir))
  [...]
})

/Henrik

>
>
>       Spencer Graves
>
>
>>>
>>> Duncan Murdoch
>>
>>
>> Many thanks for the suggestion! In this way I only need to apply slight
>> changes in the examples and can avoid modifying all read/writes along the
>> package. I will try this approach and see if it passes the CRAN checks.
>>
>> Jose
>>
>>>
>>>>
>>>> Sarah
>>>>
>>>>
>>>> On Wed, Apr 25, 2018 at 12:30 PM, Jose A Guijarro <jguijarrop at aemet.es>
>>>> wrote:
>>>>>
>>>>> Dear all,
>>>>>
>>>>> I am struggling to update my package climatol from version 3.0 to 3.1.
>>>>> The old version had all examples under a "dontrun" section because they
>>>>> needed files created by other examples that the user had to run first.
>>>>>
>>>>> As this is not acceptable anymore, I made the examples runnable and
>>>>> prepared small ad-hoc datasets, but then writing files to the user
>>>>> space
>>>>> is against the CRAN policy rules, and I was suggested to run them on a
>>>>> temporal directory. Therefore I changed all my examples to read/write
>>>>> files to a tempdir(), as in:
>>>>>
>>>>> \examples{
>>>>> #Set a temporal working directory and write input files:
>>>>> wd <- tempdir()
>>>>> setwd(wd)
>>>>> data(Ttest) #(This loads matrix 'dat' and data.frame 'est.c')
>>>>> write(dat,'Ttest_1981-2000.dat')
>>>>>
>>>>> write.table(est.c,'Ttest_1981-2000.est',row.names=FALSE,col.names=FALSE)
>>>>> rm(dat,est.c) #remove loaded data from memory space
>>>>> #Now run the example:
>>>>> dd2m('Ttest',1981,2000)
>>>>> #Input and output files can be found in directory:
>>>>> print(wd)
>>>>> }
>>>>>
>>>>> But now CRAN checks return this warning ten times (one for every
>>>>> example
>>>>> in the package):
>>>>>
>>>>> Warning: working directory was changed to ?/tmp/RtmpWSRK2F?, resetting
>>>>>
>>>>> Any hint on how to solve the problem will be highly appreciated...
>>>>>
>>>>> Jose
>>>>>
>>>>
>>>>
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch.duncan at gmail.com  Thu Apr 26 19:20:03 2018
From: murdoch.duncan at gmail.com (Duncan Murdoch)
Date: Thu, 26 Apr 2018 13:20:03 -0400
Subject: [R-pkg-devel] How to write example results to a tempdir()?
In-Reply-To: <CAFDcVCQLFV7xq5UpySgb9SwLkEPhzayQXQzM2v+NkFVu_q5F7Q@mail.gmail.com>
References: <46c13616-7671-f386-830c-b641a0749362@aemet.es>
 <CAM_vjumKnYj9_hfuB5VsyLNFMDusNT_rY2-NC4osajx7raYGLw@mail.gmail.com>
 <afc1093b-75dd-ac67-c766-19e016cec0f0@gmail.com>
 <19998b46-b010-1a38-98d2-44067b7e395c@aemet.es>
 <c1b395a6-2702-1d64-a2e8-4bbd1863826f@effectivedefense.org>
 <CAFDcVCQLFV7xq5UpySgb9SwLkEPhzayQXQzM2v+NkFVu_q5F7Q@mail.gmail.com>
Message-ID: <f887cb29-fae6-1ed0-a586-a716773a7f32@gmail.com>

On 26/04/2018 1:04 PM, Henrik Bengtsson wrote:
> On Thu, Apr 26, 2018 at 6:28 AM, Spencer Graves
> <spencer.graves at effectivedefense.org> wrote:
>>
>>
>> On 2018-04-26 07:11, Jose A Guijarro wrote:
>>>
>>> El 25/04/18 a las 20:21, Duncan Murdoch escribi?:
>>>>
>>>> On 25/04/2018 1:32 PM, Sarah Goslee wrote:
>>>>>
>>>>> Don't change the working directory! That has all kinds of unpleasant
>>>>> side effects for the unsuspecting user, possibly even more so than
>>>>> writing to a file.
>>>>>
>>>>> Instead, write the file to the temp directory, and read it from there,
>>>>> with e.g.
>>>>>
>>>>> wd <- tempdir()
>>>>> write(dat, file.path(wd, 'Ttest_1981-2000.dat'))
>>>>>
>>>>> Using file.path() means that the appropriate path delimiter for that
>>>>> OS will be used.
>>>>
>>>>
>>>> That's one good way to do it.  But it is possible to change directory and
>>>> change back at the end of the example.  For example,
>>>>
>>>> wd <- tempdir()
>>>> savedir <- setwd(wd)
>>>>
>>>> ... # the original code that writes and reads in the current dir
>>>>
>>>> setwd(savedir)
>>>>
>>>> There's a worry that an error in the middle of the code will leave the
>>>> user in the wrong place.  If that's really unlikely to happen, then this
>>>> code is a little simpler than Sarah's suggestion.
>>>>
>>>> If it is likely, you can use tryCatch(..., finally = setwd(savedir)), but
>>>> I think Sarah's solution would be preferable in most cases:  many users will
>>>> not understand what tryCatch() does.
>>
>>
>>
>> Hi, Duncan, et al.:
>>
>>
>>        Under what circumstances should one also use "on.exit":
>>
>>
>> wd <- tempdir()
>> savedir <- setwd(wd)
>> on.exit(setwd(savedir))?
>>
>>
>>        Even senior R programmers may miss a failure mode.  In a function,
>> this works well:  I don't need to remember to "setwd(savedir)" later in the
>> code, which could be a problem if I have multiple exit points.  I don't know
>> how it would work in a vignette or the examples section of a *.Rd file.
>> tryCatch(..., finally = setwd(savedir)) condenses this into one line ... and
>> is too terse for me in many cases.
> 
> FWIW, it can also be used in a local() call, e.g.
> 
> local({
>    wd <- tempdir()
>    savedir <- setwd(wd)
>    on.exit(setwd(savedir))
>    [...]
> })

Thanks for pointing that out.  That also has the advantage that it 
doesn't wipe out variables named "wd" and "savedir".

On the other hand, it has the disadvantage that it doesn't leave wd and 
savedir behind for the user to examine, and cut and paste of the central 
executable lines won't work, you need to cut the whole local() call.

Duncan Murdoch


From wdunlap at tibco.com  Thu Apr 26 19:25:17 2018
From: wdunlap at tibco.com (William Dunlap)
Date: Thu, 26 Apr 2018 10:25:17 -0700
Subject: [R-pkg-devel] How to write example results to a tempdir()?
In-Reply-To: <f887cb29-fae6-1ed0-a586-a716773a7f32@gmail.com>
References: <46c13616-7671-f386-830c-b641a0749362@aemet.es>
 <CAM_vjumKnYj9_hfuB5VsyLNFMDusNT_rY2-NC4osajx7raYGLw@mail.gmail.com>
 <afc1093b-75dd-ac67-c766-19e016cec0f0@gmail.com>
 <19998b46-b010-1a38-98d2-44067b7e395c@aemet.es>
 <c1b395a6-2702-1d64-a2e8-4bbd1863826f@effectivedefense.org>
 <CAFDcVCQLFV7xq5UpySgb9SwLkEPhzayQXQzM2v+NkFVu_q5F7Q@mail.gmail.com>
 <f887cb29-fae6-1ed0-a586-a716773a7f32@gmail.com>
Message-ID: <CAF8bMcYo76dNwV1gxXxkgKZRaqbpxk9pi5tKjJh9MxLmFm+FiA@mail.gmail.com>

The withr package has a bunch of simple functions executing code in various
contexts, e.g., in a given directory or with given options() settings:

> withr::with_dir
function (new, code)
{
    old <- setwd(dir = new)
    on.exit(setwd(old))
    force(code)
}
<environment: namespace:withr>
> withr::with_dir(tempdir(), getwd())
[1] "/tmp/RtmpvClVBM"

Perhaps some could be moved into core R since they are good for running
examples
and tests.



Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Thu, Apr 26, 2018 at 10:20 AM, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 26/04/2018 1:04 PM, Henrik Bengtsson wrote:
>
>> On Thu, Apr 26, 2018 at 6:28 AM, Spencer Graves
>> <spencer.graves at effectivedefense.org> wrote:
>>
>>>
>>>
>>> On 2018-04-26 07:11, Jose A Guijarro wrote:
>>>
>>>>
>>>> El 25/04/18 a las 20:21, Duncan Murdoch escribi?:
>>>>
>>>>>
>>>>> On 25/04/2018 1:32 PM, Sarah Goslee wrote:
>>>>>
>>>>>>
>>>>>> Don't change the working directory! That has all kinds of unpleasant
>>>>>> side effects for the unsuspecting user, possibly even more so than
>>>>>> writing to a file.
>>>>>>
>>>>>> Instead, write the file to the temp directory, and read it from there,
>>>>>> with e.g.
>>>>>>
>>>>>> wd <- tempdir()
>>>>>> write(dat, file.path(wd, 'Ttest_1981-2000.dat'))
>>>>>>
>>>>>> Using file.path() means that the appropriate path delimiter for that
>>>>>> OS will be used.
>>>>>>
>>>>>
>>>>>
>>>>> That's one good way to do it.  But it is possible to change directory
>>>>> and
>>>>> change back at the end of the example.  For example,
>>>>>
>>>>> wd <- tempdir()
>>>>> savedir <- setwd(wd)
>>>>>
>>>>> ... # the original code that writes and reads in the current dir
>>>>>
>>>>> setwd(savedir)
>>>>>
>>>>> There's a worry that an error in the middle of the code will leave the
>>>>> user in the wrong place.  If that's really unlikely to happen, then
>>>>> this
>>>>> code is a little simpler than Sarah's suggestion.
>>>>>
>>>>> If it is likely, you can use tryCatch(..., finally = setwd(savedir)),
>>>>> but
>>>>> I think Sarah's solution would be preferable in most cases:  many
>>>>> users will
>>>>> not understand what tryCatch() does.
>>>>>
>>>>
>>>
>>>
>>> Hi, Duncan, et al.:
>>>
>>>
>>>        Under what circumstances should one also use "on.exit":
>>>
>>>
>>> wd <- tempdir()
>>> savedir <- setwd(wd)
>>> on.exit(setwd(savedir))?
>>>
>>>
>>>        Even senior R programmers may miss a failure mode.  In a function,
>>> this works well:  I don't need to remember to "setwd(savedir)" later in
>>> the
>>> code, which could be a problem if I have multiple exit points.  I don't
>>> know
>>> how it would work in a vignette or the examples section of a *.Rd file.
>>> tryCatch(..., finally = setwd(savedir)) condenses this into one line ...
>>> and
>>> is too terse for me in many cases.
>>>
>>
>> FWIW, it can also be used in a local() call, e.g.
>>
>> local({
>>    wd <- tempdir()
>>    savedir <- setwd(wd)
>>    on.exit(setwd(savedir))
>>    [...]
>> })
>>
>
> Thanks for pointing that out.  That also has the advantage that it doesn't
> wipe out variables named "wd" and "savedir".
>
> On the other hand, it has the disadvantage that it doesn't leave wd and
> savedir behind for the user to examine, and cut and paste of the central
> executable lines won't work, you need to cut the whole local() call.
>
> Duncan Murdoch
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From jenny.f.bryan at gmail.com  Thu Apr 26 19:31:40 2018
From: jenny.f.bryan at gmail.com (Jennifer Bryan)
Date: Thu, 26 Apr 2018 10:31:40 -0700
Subject: [R-pkg-devel] How to write example results to a tempdir()?
In-Reply-To: <CAFDcVCQLFV7xq5UpySgb9SwLkEPhzayQXQzM2v+NkFVu_q5F7Q@mail.gmail.com>
References: <46c13616-7671-f386-830c-b641a0749362@aemet.es>
 <CAM_vjumKnYj9_hfuB5VsyLNFMDusNT_rY2-NC4osajx7raYGLw@mail.gmail.com>
 <afc1093b-75dd-ac67-c766-19e016cec0f0@gmail.com>
 <19998b46-b010-1a38-98d2-44067b7e395c@aemet.es>
 <c1b395a6-2702-1d64-a2e8-4bbd1863826f@effectivedefense.org>
 <CAFDcVCQLFV7xq5UpySgb9SwLkEPhzayQXQzM2v+NkFVu_q5F7Q@mail.gmail.com>
Message-ID: <CANe9BHGmz+pfq2CgFCE=RournUGHTxX319U+=X0h5wD5D6MEEg@mail.gmail.com>

One downside of all of this is that examples become increasingly dominated
by code re: tempdir setup and the like.

It may not discourage the people on this list, but I suspect too much extra
machinery makes the typical user less likely to engage with examples.

On Thu, Apr 26, 2018 at 10:04 AM, Henrik Bengtsson <
henrik.bengtsson at gmail.com> wrote:

> On Thu, Apr 26, 2018 at 6:28 AM, Spencer Graves
> <spencer.graves at effectivedefense.org> wrote:
> >
> >
> > On 2018-04-26 07:11, Jose A Guijarro wrote:
> >>
> >> El 25/04/18 a las 20:21, Duncan Murdoch escribi?:
> >>>
> >>> On 25/04/2018 1:32 PM, Sarah Goslee wrote:
> >>>>
> >>>> Don't change the working directory! That has all kinds of unpleasant
> >>>> side effects for the unsuspecting user, possibly even more so than
> >>>> writing to a file.
> >>>>
> >>>> Instead, write the file to the temp directory, and read it from there,
> >>>> with e.g.
> >>>>
> >>>> wd <- tempdir()
> >>>> write(dat, file.path(wd, 'Ttest_1981-2000.dat'))
> >>>>
> >>>> Using file.path() means that the appropriate path delimiter for that
> >>>> OS will be used.
> >>>
> >>>
> >>> That's one good way to do it.  But it is possible to change directory
> and
> >>> change back at the end of the example.  For example,
> >>>
> >>> wd <- tempdir()
> >>> savedir <- setwd(wd)
> >>>
> >>> ... # the original code that writes and reads in the current dir
> >>>
> >>> setwd(savedir)
> >>>
> >>> There's a worry that an error in the middle of the code will leave the
> >>> user in the wrong place.  If that's really unlikely to happen, then
> this
> >>> code is a little simpler than Sarah's suggestion.
> >>>
> >>> If it is likely, you can use tryCatch(..., finally = setwd(savedir)),
> but
> >>> I think Sarah's solution would be preferable in most cases:  many
> users will
> >>> not understand what tryCatch() does.
> >
> >
> >
> > Hi, Duncan, et al.:
> >
> >
> >       Under what circumstances should one also use "on.exit":
> >
> >
> > wd <- tempdir()
> > savedir <- setwd(wd)
> > on.exit(setwd(savedir))?
> >
> >
> >       Even senior R programmers may miss a failure mode.  In a function,
> > this works well:  I don't need to remember to "setwd(savedir)" later in
> the
> > code, which could be a problem if I have multiple exit points.  I don't
> know
> > how it would work in a vignette or the examples section of a *.Rd file.
> > tryCatch(..., finally = setwd(savedir)) condenses this into one line ...
> and
> > is too terse for me in many cases.
>
> FWIW, it can also be used in a local() call, e.g.
>
> local({
>   wd <- tempdir()
>   savedir <- setwd(wd)
>   on.exit(setwd(savedir))
>   [...]
> })
>
> /Henrik
>
> >
> >
> >       Spencer Graves
> >
> >
> >>>
> >>> Duncan Murdoch
> >>
> >>
> >> Many thanks for the suggestion! In this way I only need to apply slight
> >> changes in the examples and can avoid modifying all read/writes along
> the
> >> package. I will try this approach and see if it passes the CRAN checks.
> >>
> >> Jose
> >>
> >>>
> >>>>
> >>>> Sarah
> >>>>
> >>>>
> >>>> On Wed, Apr 25, 2018 at 12:30 PM, Jose A Guijarro <
> jguijarrop at aemet.es>
> >>>> wrote:
> >>>>>
> >>>>> Dear all,
> >>>>>
> >>>>> I am struggling to update my package climatol from version 3.0 to
> 3.1.
> >>>>> The old version had all examples under a "dontrun" section because
> they
> >>>>> needed files created by other examples that the user had to run
> first.
> >>>>>
> >>>>> As this is not acceptable anymore, I made the examples runnable and
> >>>>> prepared small ad-hoc datasets, but then writing files to the user
> >>>>> space
> >>>>> is against the CRAN policy rules, and I was suggested to run them on
> a
> >>>>> temporal directory. Therefore I changed all my examples to read/write
> >>>>> files to a tempdir(), as in:
> >>>>>
> >>>>> \examples{
> >>>>> #Set a temporal working directory and write input files:
> >>>>> wd <- tempdir()
> >>>>> setwd(wd)
> >>>>> data(Ttest) #(This loads matrix 'dat' and data.frame 'est.c')
> >>>>> write(dat,'Ttest_1981-2000.dat')
> >>>>>
> >>>>> write.table(est.c,'Ttest_1981-2000.est',row.names=FALSE,col.
> names=FALSE)
> >>>>> rm(dat,est.c) #remove loaded data from memory space
> >>>>> #Now run the example:
> >>>>> dd2m('Ttest',1981,2000)
> >>>>> #Input and output files can be found in directory:
> >>>>> print(wd)
> >>>>> }
> >>>>>
> >>>>> But now CRAN checks return this warning ten times (one for every
> >>>>> example
> >>>>> in the package):
> >>>>>
> >>>>> Warning: working directory was changed to ?/tmp/RtmpWSRK2F?,
> resetting
> >>>>>
> >>>>> Any hint on how to solve the problem will be highly appreciated...
> >>>>>
> >>>>> Jose
> >>>>>
> >>>>
> >>>>
> >>>
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From henrik.bengtsson at gmail.com  Thu Apr 26 20:25:15 2018
From: henrik.bengtsson at gmail.com (Henrik Bengtsson)
Date: Thu, 26 Apr 2018 11:25:15 -0700
Subject: [R-pkg-devel] How to write example results to a tempdir()?
In-Reply-To: <CANe9BHGmz+pfq2CgFCE=RournUGHTxX319U+=X0h5wD5D6MEEg@mail.gmail.com>
References: <46c13616-7671-f386-830c-b641a0749362@aemet.es>
 <CAM_vjumKnYj9_hfuB5VsyLNFMDusNT_rY2-NC4osajx7raYGLw@mail.gmail.com>
 <afc1093b-75dd-ac67-c766-19e016cec0f0@gmail.com>
 <19998b46-b010-1a38-98d2-44067b7e395c@aemet.es>
 <c1b395a6-2702-1d64-a2e8-4bbd1863826f@effectivedefense.org>
 <CAFDcVCQLFV7xq5UpySgb9SwLkEPhzayQXQzM2v+NkFVu_q5F7Q@mail.gmail.com>
 <CANe9BHGmz+pfq2CgFCE=RournUGHTxX319U+=X0h5wD5D6MEEg@mail.gmail.com>
Message-ID: <CAFDcVCReSVmNTN6mbq98SJmmupw5HhvWzB_2mKonPewFA+9naw@mail.gmail.com>

For the information: there were various ideas discussed around this in
R-devel thread 'Base R examples that write to current working
directory' started on 2018-03-29
(https://stat.ethz.ch/pipermail/r-devel/2018-March/075779.html).

On Thu, Apr 26, 2018 at 10:31 AM, Jennifer Bryan
<jenny.f.bryan at gmail.com> wrote:
> One downside of all of this is that examples become increasingly dominated
> by code re: tempdir setup and the like.
>
> It may not discourage the people on this list, but I suspect too much extra
> machinery makes the typical user less likely to engage with examples.
>
> On Thu, Apr 26, 2018 at 10:04 AM, Henrik Bengtsson
> <henrik.bengtsson at gmail.com> wrote:
>>
>> On Thu, Apr 26, 2018 at 6:28 AM, Spencer Graves
>> <spencer.graves at effectivedefense.org> wrote:
>> >
>> >
>> > On 2018-04-26 07:11, Jose A Guijarro wrote:
>> >>
>> >> El 25/04/18 a las 20:21, Duncan Murdoch escribi?:
>> >>>
>> >>> On 25/04/2018 1:32 PM, Sarah Goslee wrote:
>> >>>>
>> >>>> Don't change the working directory! That has all kinds of unpleasant
>> >>>> side effects for the unsuspecting user, possibly even more so than
>> >>>> writing to a file.
>> >>>>
>> >>>> Instead, write the file to the temp directory, and read it from
>> >>>> there,
>> >>>> with e.g.
>> >>>>
>> >>>> wd <- tempdir()
>> >>>> write(dat, file.path(wd, 'Ttest_1981-2000.dat'))
>> >>>>
>> >>>> Using file.path() means that the appropriate path delimiter for that
>> >>>> OS will be used.
>> >>>
>> >>>
>> >>> That's one good way to do it.  But it is possible to change directory
>> >>> and
>> >>> change back at the end of the example.  For example,
>> >>>
>> >>> wd <- tempdir()
>> >>> savedir <- setwd(wd)
>> >>>
>> >>> ... # the original code that writes and reads in the current dir
>> >>>
>> >>> setwd(savedir)
>> >>>
>> >>> There's a worry that an error in the middle of the code will leave the
>> >>> user in the wrong place.  If that's really unlikely to happen, then
>> >>> this
>> >>> code is a little simpler than Sarah's suggestion.
>> >>>
>> >>> If it is likely, you can use tryCatch(..., finally = setwd(savedir)),
>> >>> but
>> >>> I think Sarah's solution would be preferable in most cases:  many
>> >>> users will
>> >>> not understand what tryCatch() does.
>> >
>> >
>> >
>> > Hi, Duncan, et al.:
>> >
>> >
>> >       Under what circumstances should one also use "on.exit":
>> >
>> >
>> > wd <- tempdir()
>> > savedir <- setwd(wd)
>> > on.exit(setwd(savedir))?
>> >
>> >
>> >       Even senior R programmers may miss a failure mode.  In a function,
>> > this works well:  I don't need to remember to "setwd(savedir)" later in
>> > the
>> > code, which could be a problem if I have multiple exit points.  I don't
>> > know
>> > how it would work in a vignette or the examples section of a *.Rd file.
>> > tryCatch(..., finally = setwd(savedir)) condenses this into one line ...
>> > and
>> > is too terse for me in many cases.
>>
>> FWIW, it can also be used in a local() call, e.g.
>>
>> local({
>>   wd <- tempdir()
>>   savedir <- setwd(wd)
>>   on.exit(setwd(savedir))
>>   [...]
>> })
>>
>> /Henrik
>>
>> >
>> >
>> >       Spencer Graves
>> >
>> >
>> >>>
>> >>> Duncan Murdoch
>> >>
>> >>
>> >> Many thanks for the suggestion! In this way I only need to apply slight
>> >> changes in the examples and can avoid modifying all read/writes along
>> >> the
>> >> package. I will try this approach and see if it passes the CRAN checks.
>> >>
>> >> Jose
>> >>
>> >>>
>> >>>>
>> >>>> Sarah
>> >>>>
>> >>>>
>> >>>> On Wed, Apr 25, 2018 at 12:30 PM, Jose A Guijarro
>> >>>> <jguijarrop at aemet.es>
>> >>>> wrote:
>> >>>>>
>> >>>>> Dear all,
>> >>>>>
>> >>>>> I am struggling to update my package climatol from version 3.0 to
>> >>>>> 3.1.
>> >>>>> The old version had all examples under a "dontrun" section because
>> >>>>> they
>> >>>>> needed files created by other examples that the user had to run
>> >>>>> first.
>> >>>>>
>> >>>>> As this is not acceptable anymore, I made the examples runnable and
>> >>>>> prepared small ad-hoc datasets, but then writing files to the user
>> >>>>> space
>> >>>>> is against the CRAN policy rules, and I was suggested to run them on
>> >>>>> a
>> >>>>> temporal directory. Therefore I changed all my examples to
>> >>>>> read/write
>> >>>>> files to a tempdir(), as in:
>> >>>>>
>> >>>>> \examples{
>> >>>>> #Set a temporal working directory and write input files:
>> >>>>> wd <- tempdir()
>> >>>>> setwd(wd)
>> >>>>> data(Ttest) #(This loads matrix 'dat' and data.frame 'est.c')
>> >>>>> write(dat,'Ttest_1981-2000.dat')
>> >>>>>
>> >>>>>
>> >>>>> write.table(est.c,'Ttest_1981-2000.est',row.names=FALSE,col.names=FALSE)
>> >>>>> rm(dat,est.c) #remove loaded data from memory space
>> >>>>> #Now run the example:
>> >>>>> dd2m('Ttest',1981,2000)
>> >>>>> #Input and output files can be found in directory:
>> >>>>> print(wd)
>> >>>>> }
>> >>>>>
>> >>>>> But now CRAN checks return this warning ten times (one for every
>> >>>>> example
>> >>>>> in the package):
>> >>>>>
>> >>>>> Warning: working directory was changed to ?/tmp/RtmpWSRK2F?,
>> >>>>> resetting
>> >>>>>
>> >>>>> Any hint on how to solve the problem will be highly appreciated...
>> >>>>>
>> >>>>> Jose
>> >>>>>
>> >>>>
>> >>>>
>> >>>
>> >>
>> >> ______________________________________________
>> >> R-package-devel at r-project.org mailing list
>> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>


From pavlo.mozharovskyi at ensai.fr  Mon Apr 30 02:32:40 2018
From: pavlo.mozharovskyi at ensai.fr (MOZHAROVSKYI Pavlo)
Date: Mon, 30 Apr 2018 00:32:40 +0000
Subject: [R-pkg-devel] Byte-compilation problem for R-package ddalpha after
 update to R 3.5.0
Message-ID: <2558bca0-b53d-fa16-be72-72884bd5838f@ensai.fr>


After the R-update to version 3.5.0 there seems to be a problem with our 
R-package ddalpha. As it seems that the problem is connected to the 
newly introduced byte-compilation on installation, we feel unable to 
locate its root cause and ask for your help.

During the byte-compilation of the package ddalpha (latest (CRAN) 
version 1.3.2), an immense amount of memory (more than 4Gb) is consumed. 
Further, byte-compilation takes at least several minutes to complete on 
Windows and MacOS, while it throws an error on the Linux system where it 
does not install at all:

Error message:
Error in system2(file.path(R.home("bin"), "R"), c(if (nzchar(arch)) 
paste0("--arch=",? :
 ? cannot popen ' '/usr/lib64/R/bin/R' --no-save --slave 2>&1 < 
'/tmp/RtmpU4dXOt/file3fb5b89c507'', probable reason 'Cannot allocate memory'

We suspect a mistake in the design of our package and would appreciate 
your advice. From our side, we are ready to undertake necessary actions 
as soon as possible.

Here are the existing discussions on this topic:

- SO: 
https://stackoverflow.com/questions/50028566/cannot-allocate-memory-while-re-installing-r-package-ddalpha-under-arch-linu
- Arch Linux: https://bbs.archlinux.org/viewtopic.php?id=236517
- RStudio Community: 
https://community.rstudio.com/t/memory-allocation-problem-while-re-installing-ddalpha-package-after-upgrade-to-r-3-5-0/7663/3

Thank you a lot for your help!

Best regards,
Pavlo


-- 
------------------------------------------------------------
Pavlo Mozharovskyi
ENSAI - Campus de Ker-Lann
Rue Blaise Pascal - BP 37203
35172 Bruz cedex
FRANCE

Tel: +33 (0)2 99 05 32 55
Fax: +33 (0)2 99 05 32 05
Email: pavlo.mozharovskyi at ensai.fr

http://www.ensai.fr/enseignant/alias/pavlo-mozharovskyi.html

From Joris.Meys at ugent.be  Mon Apr 30 11:45:56 2018
From: Joris.Meys at ugent.be (Joris Meys)
Date: Mon, 30 Apr 2018 11:45:56 +0200
Subject: [R-pkg-devel] 
 Byte-compilation problem for R-package ddalpha after
 update to R 3.5.0
In-Reply-To: <2558bca0-b53d-fa16-be72-72884bd5838f@ensai.fr>
References: <2558bca0-b53d-fa16-be72-72884bd5838f@ensai.fr>
Message-ID: <CAO1zAVYw76utMri90mK2NkNZnSGoVEK8Tjm7FRoD9cxDYmpGKQ@mail.gmail.com>

Dear pavlo,

fwiw, the binary of ddalpha 1.3.2 installs just fine on Windows 10. When
building from source, I get a whole lot of warnings about uninitialized
variables, comparisons between signed and unsigned integers. The
compilation of the source code doesn't have a large impact on the memory. I
can confirm that the last step of the installation process (the byte
compiling of the actual package) requires at least 8 Gb. I have 8Gb DDR3 of
which 2.5 Gb is used by other processes. During the build process it fills
up and at one point  I have another 3 Gb in swap. That works on Windows 10
(the installation process exits successfully) but might well be the reason
why on other systems you get the errors you see.

One thing I noticed, is humongously huge code files (eg dataf.tecator.R is
a whopping 624 Kb). I would start with storing the data structures you
include as a .RDS file in a data folder (eg a file tefactor.rda containing
a data structure tefactor) , and rewrite the functions as

dataf.tefactor <- function() {return(tefactor) }

That will save in total several Mb of code files that need to be processed
by the byte compiler. Not sure this will solve the problem, but it's a low
hanging fruit ready to pick. If you're not sure what I'm talking about, you
can link me to the github repo (if you have one) and I'll take a look.

Cheers
Joris

On Mon, Apr 30, 2018 at 2:32 AM, MOZHAROVSKYI Pavlo <
pavlo.mozharovskyi at ensai.fr> wrote:

>
> After the R-update to version 3.5.0 there seems to be a problem with our
> R-package ddalpha. As it seems that the problem is connected to the
> newly introduced byte-compilation on installation, we feel unable to
> locate its root cause and ask for your help.
>
> During the byte-compilation of the package ddalpha (latest (CRAN)
> version 1.3.2), an immense amount of memory (more than 4Gb) is consumed.
> Further, byte-compilation takes at least several minutes to complete on
> Windows and MacOS, while it throws an error on the Linux system where it
> does not install at all:
>
> Error message:
> Error in system2(file.path(R.home("bin"), "R"), c(if (nzchar(arch))
> paste0("--arch=",  :
>    cannot popen ' '/usr/lib64/R/bin/R' --no-save --slave 2>&1 <
> '/tmp/RtmpU4dXOt/file3fb5b89c507'', probable reason 'Cannot allocate
> memory'
>
> We suspect a mistake in the design of our package and would appreciate
> your advice. From our side, we are ready to undertake necessary actions
> as soon as possible.
>
> Here are the existing discussions on this topic:
>
> - SO:
> https://stackoverflow.com/questions/50028566/cannot-
> allocate-memory-while-re-installing-r-package-ddalpha-under-arch-linu
> - Arch Linux: https://bbs.archlinux.org/viewtopic.php?id=236517
> - RStudio Community:
> https://community.rstudio.com/t/memory-allocation-problem-
> while-re-installing-ddalpha-package-after-upgrade-to-r-3-5-0/7663/3
>
> Thank you a lot for your help!
>
> Best regards,
> Pavlo
>
>
> --
> ------------------------------------------------------------
> Pavlo Mozharovskyi
> ENSAI - Campus de Ker-Lann
> Rue Blaise Pascal - BP 37203
> 35172 Bruz cedex
> FRANCE
>
> Tel: +33 (0)2 99 05 32 55
> Fax: +33 (0)2 99 05 32 05
> Email: pavlo.mozharovskyi at ensai.fr
>
> http://www.ensai.fr/enseignant/alias/pavlo-mozharovskyi.html
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From Joris.Meys at ugent.be  Mon Apr 30 18:03:55 2018
From: Joris.Meys at ugent.be (Joris Meys)
Date: Mon, 30 Apr 2018 18:03:55 +0200
Subject: [R-pkg-devel] checksums change after publication on CRAN?
Message-ID: <CAO1zAVaj-sHFJ_=OVBNsOTVcomXjTBfcXqUvEQZy2YGvvKhBKA@mail.gmail.com>

In a discussion of twitter it was pointed out that the checksums of
packages change after publication on CRAN. One example is the Matrix
package version 1.2-12, which was available on CRAN already on nov 17, 2017
but got a different checksum on nov 20, 2017. This caused issues in eg
easybuilders.

(see reference here :
https://github.com/easybuilders/easybuild-easyconfigs/pull/6118 )

I went through the Matrix SVN repo, and there is no commit whatsoever that
adds the last line in the DESCRIPTION file. This line reads:

Date/Publication: 2017-11-20 18:57:47 UTC

I wondered how this happens, and it looks like CRAN adds this automatically
days after the source is available for download.

This is suboptimal imho as it would technically mean that you can have two
files of the same package version with different checksums. It leads people
to believe packages on CRAN can be changed without bumping the version
number, and technically that's what it boils down to.

Anyone who knows what's going on there?

Reference to twitter discussion with Kenneth Hoste about this :
https://twitter.com/kehoste/status/990484417721389056

Kind regards
Joris

-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From Joris.Meys at ugent.be  Mon Apr 30 18:09:27 2018
From: Joris.Meys at ugent.be (Joris Meys)
Date: Mon, 30 Apr 2018 18:09:27 +0200
Subject: [R-pkg-devel] checksums change after publication on CRAN?
In-Reply-To: <CAO1zAVaj-sHFJ_=OVBNsOTVcomXjTBfcXqUvEQZy2YGvvKhBKA@mail.gmail.com>
References: <CAO1zAVaj-sHFJ_=OVBNsOTVcomXjTBfcXqUvEQZy2YGvvKhBKA@mail.gmail.com>
Message-ID: <CAO1zAVb59a3to6BLh=4CGJDaG=Ai1XQonb59vvOq2UXhmr3A5A@mail.gmail.com>

I wrongfully stated that CRAN added a line. The line was not added but
changed (and not in the SVN repo). A diff between both downloads is
available here:

https://gist.github.com/boegel/2ea28647f00ddd9b18f9b1a0ac6dd2b4

Cheers
Joris

On Mon, Apr 30, 2018 at 6:03 PM, Joris Meys <Joris.Meys at ugent.be> wrote:

> In a discussion of twitter it was pointed out that the checksums of
> packages change after publication on CRAN. One example is the Matrix
> package version 1.2-12, which was available on CRAN already on nov 17, 2017
> but got a different checksum on nov 20, 2017. This caused issues in eg
> easybuilders.
>
> (see reference here : https://github.com/easybuilders/easybuild-
> easyconfigs/pull/6118 )
>
> I went through the Matrix SVN repo, and there is no commit whatsoever that
> adds the last line in the DESCRIPTION file. This line reads:
>
> Date/Publication: 2017-11-20 18:57:47 UTC
>
> I wondered how this happens, and it looks like CRAN adds this
> automatically days after the source is available for download.
>
> This is suboptimal imho as it would technically mean that you can have two
> files of the same package version with different checksums. It leads people
> to believe packages on CRAN can be changed without bumping the version
> number, and technically that's what it boils down to.
>
> Anyone who knows what's going on there?
>
> Reference to twitter discussion with Kenneth Hoste about this :
> https://twitter.com/kehoste/status/990484417721389056
>
> Kind regards
> Joris
>
> --
> Joris Meys
> Statistical consultant
>
> Department of Data Analysis and Mathematical Modelling
> Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
>
> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
>
> tel: +32 (0)9 264 61 79
> -----------
> Biowiskundedagen 2017-2018
> http://www.biowiskundedagen.ugent.be/
>
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>



-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From Keith.Goldfeld at nyumc.org  Mon Apr 30 19:30:02 2018
From: Keith.Goldfeld at nyumc.org (Goldfeld, Keith)
Date: Mon, 30 Apr 2018 17:30:02 +0000
Subject: [R-pkg-devel] SSL error during devtools::release()
In-Reply-To: <5FF7F1FA-671F-4D02-B714-779B43A94DE0@nyumc.org>
References: <5FF7F1FA-671F-4D02-B714-779B43A94DE0@nyumc.org>
Message-ID: <CFE70B57-8E89-487F-97FE-654777E62D36@nyumc.org>

I am trying to (re)submit my package to CRAN using devtools::release(), which I have been doing for a couple of years without any serious glitches. I just updated to R 3.5.0 and am using RStudio 1.1.447. I am wondering if this new error I am getting is known to others:  ERROR: Error in 'git2r_remote_fetch': SSL error: error:1407742E:SSL routines:SSL23_GET_SERVER_HELLO:tlsv1 alert protocol version.

I get a similar error from a Mac and PC. I can Push just fine to github. Is this something I can resolve or is it a problem more generally that requires a fix of some sort?

Here is the full output:

Running Git checks for simstudy
Checking uncommitted files... OK
Checking if synched with remote branch...
ERROR: Error in 'git2r_remote_fetch': SSL error: error:1407742E:SSL routines:SSL23_GET_SERVER_HELLO:tlsv1 alert protocol version


------------------------------------------------------------
This email message, including any attachments, is for the sole use of the intended recipient(s) and may contain information that is proprietary, confidential, and exempt from disclosure under applicable law. Any unauthorized review, use, disclosure, or distribution is prohibited. If you have received this email in error please notify the sender by return email and delete the original message. Please note, the recipient should check this email and any attachments for the presence of viruses. The organization accepts no liability for any damage caused by any virus transmitted by this email.
=================================

	[[alternative HTML version deleted]]


From jenny.f.bryan at gmail.com  Tue May  1 06:46:49 2018
From: jenny.f.bryan at gmail.com (Jennifer Bryan)
Date: Mon, 30 Apr 2018 21:46:49 -0700
Subject: [R-pkg-devel] SSL error during devtools::release()
In-Reply-To: <CFE70B57-8E89-487F-97FE-654777E62D36@nyumc.org>
References: <5FF7F1FA-671F-4D02-B714-779B43A94DE0@nyumc.org>
 <CFE70B57-8E89-487F-97FE-654777E62D36@nyumc.org>
Message-ID: <CANe9BHEshUFMNL6S6E3P71AP08xy=jJrkpSusEKT=b0_84VPwg@mail.gmail.com>

If you are in a position to install the development version of git2r, that
is worth a shot.

devtools is calling git2r, which uses libgit2 (among other things), not the
system Git you are probably using when you "push to GitHub".

Your difficulty has a lot in common with this issue:
https://github.com/ropensci/git2r/issues/331

-- Jenny


On Mon, Apr 30, 2018 at 10:30 AM, Goldfeld, Keith <Keith.Goldfeld at nyumc.org>
wrote:

> I am trying to (re)submit my package to CRAN using devtools::release(),
> which I have been doing for a couple of years without any serious glitches.
> I just updated to R 3.5.0 and am using RStudio 1.1.447. I am wondering if
> this new error I am getting is known to others:  ERROR: Error in
> 'git2r_remote_fetch': SSL error: error:1407742E:SSL
> routines:SSL23_GET_SERVER_HELLO:tlsv1 alert protocol version.
>
> I get a similar error from a Mac and PC. I can Push just fine to github.
> Is this something I can resolve or is it a problem more generally that
> requires a fix of some sort?
>
> Here is the full output:
>
> Running Git checks for simstudy
> Checking uncommitted files... OK
> Checking if synched with remote branch...
> ERROR: Error in 'git2r_remote_fetch': SSL error: error:1407742E:SSL
> routines:SSL23_GET_SERVER_HELLO:tlsv1 alert protocol version
>
>
> ------------------------------------------------------------
> This email message, including any attachments, is for ...{{dropped:21}}


From pavlo.mozharovskyi at ensai.fr  Tue May  1 08:31:09 2018
From: pavlo.mozharovskyi at ensai.fr (MOZHAROVSKYI Pavlo)
Date: Tue, 1 May 2018 06:31:09 +0000
Subject: [R-pkg-devel] 
 Byte-compilation problem for R-package ddalpha after
 update to R 3.5.0
In-Reply-To: <CAO1zAVYw76utMri90mK2NkNZnSGoVEK8Tjm7FRoD9cxDYmpGKQ@mail.gmail.com>
References: <2558bca0-b53d-fa16-be72-72884bd5838f@ensai.fr>
 <CAO1zAVYw76utMri90mK2NkNZnSGoVEK8Tjm7FRoD9cxDYmpGKQ@mail.gmail.com>
Message-ID: <1e673990-b9b2-f721-1d2a-c5cf4c20a9cd@ensai.fr>

Dear Joris,

indeed, the the data sets saved as R-files constituted the issue. As suggested by you, saving them as *.rda helped.

Enormous thanks for your prompt and useful advice. The new version of the R-package ddalpha (1.3.3, on CRAN now) causes no problems during the byte-compilation phase.

Best regards,
Pavlo


On 30/04/2018 11:45, Joris Meys wrote:
Dear pavlo,

fwiw, the binary of ddalpha 1.3.2 installs just fine on Windows 10. When building from source, I get a whole lot of warnings about uninitialized variables, comparisons between signed and unsigned integers. The compilation of the source code doesn't have a large impact on the memory. I can confirm that the last step of the installation process (the byte compiling of the actual package) requires at least 8 Gb. I have 8Gb DDR3 of which 2.5 Gb is used by other processes. During the build process it fills up and at one point  I have another 3 Gb in swap. That works on Windows 10 (the installation process exits successfully) but might well be the reason why on other systems you get the errors you see.

One thing I noticed, is humongously huge code files (eg dataf.tecator.R is a whopping 624 Kb). I would start with storing the data structures you include as a .RDS file in a data folder (eg a file tefactor.rda containing a data structure tefactor) , and rewrite the functions as

dataf.tefactor <- function() {return(tefactor) }

That will save in total several Mb of code files that need to be processed by the byte compiler. Not sure this will solve the problem, but it's a low hanging fruit ready to pick. If you're not sure what I'm talking about, you can link me to the github repo (if you have one) and I'll take a look.

Cheers
Joris

On Mon, Apr 30, 2018 at 2:32 AM, MOZHAROVSKYI Pavlo <pavlo.mozharovskyi at ensai.fr<mailto:pavlo.mozharovskyi at ensai.fr>> wrote:

After the R-update to version 3.5.0 there seems to be a problem with our
R-package ddalpha. As it seems that the problem is connected to the
newly introduced byte-compilation on installation, we feel unable to
locate its root cause and ask for your help.

During the byte-compilation of the package ddalpha (latest (CRAN)
version 1.3.2), an immense amount of memory (more than 4Gb) is consumed.
Further, byte-compilation takes at least several minutes to complete on
Windows and MacOS, while it throws an error on the Linux system where it
does not install at all:

Error message:
Error in system2(file.path(R.home("bin"), "R"), c(if (nzchar(arch))
paste0("--arch=",  :
   cannot popen ' '/usr/lib64/R/bin/R' --no-save --slave 2>&1 <
'/tmp/RtmpU4dXOt/file3fb5b89c507'', probable reason 'Cannot allocate memory'

We suspect a mistake in the design of our package and would appreciate
your advice. From our side, we are ready to undertake necessary actions
as soon as possible.

Here are the existing discussions on this topic:

- SO:
https://stackoverflow.com/questions/50028566/cannot-allocate-memory-while-re-installing-r-package-ddalpha-under-arch-linu
- Arch Linux: https://bbs.archlinux.org/viewtopic.php?id=236517
- RStudio Community:
https://community.rstudio.com/t/memory-allocation-problem-while-re-installing-ddalpha-package-after-upgrade-to-r-3-5-0/7663/3

Thank you a lot for your help!

Best regards,
Pavlo


--
------------------------------------------------------------
Pavlo Mozharovskyi
ENSAI - Campus de Ker-Lann
Rue Blaise Pascal - BP 37203
35172 Bruz cedex
FRANCE

Tel: +33 (0)2 99 05 32 55
Fax: +33 (0)2 99 05 32 05
Email: pavlo.mozharovskyi at ensai.fr<mailto:pavlo.mozharovskyi at ensai.fr>

http://www.ensai.fr/enseignant/alias/pavlo-mozharovskyi.html
______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel



--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


--
------------------------------------------------------------
Pavlo Mozharovskyi
ENSAI - Campus de Ker-Lann
Rue Blaise Pascal - BP 37203
35172 Bruz cedex
FRANCE

Tel: +33 (0)2 99 05 32 55
Fax: +33 (0)2 99 05 32 05
Email: pavlo.mozharovskyi at ensai.fr<mailto:pavlo.mozharovskyi at ensai.fr>

http://www.ensai.fr/enseignant/alias/pavlo-mozharovskyi.html

	[[alternative HTML version deleted]]


From ligges at statistik.tu-dortmund.de  Tue May  1 18:24:04 2018
From: ligges at statistik.tu-dortmund.de (Uwe Ligges)
Date: Tue, 1 May 2018 18:24:04 +0200
Subject: [R-pkg-devel] checksums change after publication on CRAN?
In-Reply-To: <CAO1zAVb59a3to6BLh=4CGJDaG=Ai1XQonb59vvOq2UXhmr3A5A@mail.gmail.com>
References: <CAO1zAVaj-sHFJ_=OVBNsOTVcomXjTBfcXqUvEQZy2YGvvKhBKA@mail.gmail.com>
 <CAO1zAVb59a3to6BLh=4CGJDaG=Ai1XQonb59vvOq2UXhmr3A5A@mail.gmail.com>
Message-ID: <a09dd3ac-767d-7f99-ff01-ab8e9fd27f64@statistik.tu-dortmund.de>

Dear all,

1. CRAN indeed adds the checksum, as CRAN re-packages a package as it 
changes at least the DESCRIPTION file and maybe cleans up some line 
endings and permissions etc.

2. For recommdended packages, we publish in the contrib repository, but 
also for the release tarballs in subdirs on different days, then the 
package gets a different checksum, as the punlication day may be 
different then.

3. In this case we had a quick same version update that added a space in 
a Makevars file that should not change functionality at all, but makes 
compilation work on some OS where it would not work without the added 
space. This was some hotfix during the R-3.5.0 release cycle and 
carefully reviewed by the CRAN team.

CRAN generally does not accept new submissions without increased version 
number.

Best,
Uwe Ligges




On 30.04.2018 18:09, Joris Meys wrote:
> I wrongfully stated that CRAN added a line. The line was not added but
> changed (and not in the SVN repo). A diff between both downloads is
> available here:
> 
> https://gist.github.com/boegel/2ea28647f00ddd9b18f9b1a0ac6dd2b4
> 
> Cheers
> Joris
> 
> On Mon, Apr 30, 2018 at 6:03 PM, Joris Meys <Joris.Meys at ugent.be> wrote:
> 
>> In a discussion of twitter it was pointed out that the checksums of
>> packages change after publication on CRAN. One example is the Matrix
>> package version 1.2-12, which was available on CRAN already on nov 17, 2017
>> but got a different checksum on nov 20, 2017. This caused issues in eg
>> easybuilders.
>>
>> (see reference here : https://github.com/easybuilders/easybuild-
>> easyconfigs/pull/6118 )
>>
>> I went through the Matrix SVN repo, and there is no commit whatsoever that
>> adds the last line in the DESCRIPTION file. This line reads:
>>
>> Date/Publication: 2017-11-20 18:57:47 UTC
>>
>> I wondered how this happens, and it looks like CRAN adds this
>> automatically days after the source is available for download.
>>
>> This is suboptimal imho as it would technically mean that you can have two
>> files of the same package version with different checksums. It leads people
>> to believe packages on CRAN can be changed without bumping the version
>> number, and technically that's what it boils down to.
>>
>> Anyone who knows what's going on there?
>>
>> Reference to twitter discussion with Kenneth Hoste about this :
>> https://twitter.com/kehoste/status/990484417721389056
>>
>> Kind regards
>> Joris
>>
>> --
>> Joris Meys
>> Statistical consultant
>>
>> Department of Data Analysis and Mathematical Modelling
>> Ghent University
>> Coupure Links 653, B-9000 Gent (Belgium)
>>
>> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
>>
>> tel: +32 (0)9 264 61 79
>> -----------
>> Biowiskundedagen 2017-2018
>> http://www.biowiskundedagen.ugent.be/
>>
>> -------------------------------
>> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>>
> 
> 
>


From John.Lawrence at fda.hhs.gov  Fri May  4 19:38:49 2018
From: John.Lawrence at fda.hhs.gov (Lawrence, John P)
Date: Fri, 4 May 2018 17:38:49 +0000
Subject: [R-pkg-devel] updating my package to fix if () condition has length
 > 1
In-Reply-To: <BN7PR09MB27544712AF013C004F66715DBC860@BN7PR09MB2754.namprd09.prod.outlook.com>
References: <BN7PR09MB27544712AF013C004F66715DBC860@BN7PR09MB2754.namprd09.prod.outlook.com>
Message-ID: <BN7PR09MB275413041A17EFB8C49553A3BC860@BN7PR09MB2754.namprd09.prod.outlook.com>


I received the following message from CRAN team autocheck service after updating my package:

"

package SurvDisc_0.1.0.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:

Windows: <https://win-builder.r-project.org/incoming_pretest/SurvDisc_0.1.0_20180504_172206/Windows/00check.log>

Status: 1 WARNING

Debian: <https://win-builder.r-project.org/incoming_pretest/SurvDisc_0.1.0_20180504_172206/Debian/00check.log>

Status: 1 WARNING



Last released version's CRAN status: ERROR: 4, OK: 8

See: <https://CRAN.R-project.org/web/checks/check_results_SurvDisc.html>
"

In the check results, it has this message:
"
  Error in if (!is.element(substr(method, 1, 1), c("b", "P"))) { :
    the condition has length > 1
  Calls: AsympDiscSurv
  Execution halted
"

But, I had already changed that line to this:

if (!is.element(substr(method[1], 1, 1), c("b", "P"))) {


I know the variable "method" is a single character string, but to handle the error checking, I now explicitly tell it to use "method[1]".
Since I already fixed it before re-submitting the package, I don't understand why I am getting this error message or even why it still thinks it is using "method" instead of "method[1]" in that line.

Thanks,
John




	[[alternative HTML version deleted]]


From maxime.turgeon at mail.mcgill.ca  Fri May  4 21:32:50 2018
From: maxime.turgeon at mail.mcgill.ca (Maxime Turgeon)
Date: Fri, 4 May 2018 19:32:50 +0000
Subject: [R-pkg-devel] 
 updating my package to fix if () condition has length > 1
In-Reply-To: <BN7PR09MB275413041A17EFB8C49553A3BC860@BN7PR09MB2754.namprd09.prod.outlook.com>
References: <BN7PR09MB27544712AF013C004F66715DBC860@BN7PR09MB2754.namprd09.prod.outlook.com>,
 <BN7PR09MB275413041A17EFB8C49553A3BC860@BN7PR09MB2754.namprd09.prod.outlook.com>
Message-ID: <YTOPR01MB04253A0FE3E84D6DD6A38E7EBA860@YTOPR01MB0425.CANPRD01.PROD.OUTLOOK.COM>

Hi John,


I think you misread the check output. You got a WARNING because you didn't change the package version (the current 0.1.0 is the same as the incoming 0.1.0). At the end of the output, you also get the results of R CMD check on the current version (i.e. the one on CRAN). Of course, the version on CRAN hasn't been updated yet, and this is why you get the ERROR.


Regards,

Max Turgeon

________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Lawrence, John P <John.Lawrence at fda.hhs.gov>
Sent: May 4, 2018 1:38:49 PM
To: 'r-package-devel at r-project.org'
Subject: [R-pkg-devel] updating my package to fix if () condition has length > 1


I received the following message from CRAN team autocheck service after updating my package:

"

package SurvDisc_0.1.0.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:

Windows: <https://win-builder.r-project.org/incoming_pretest/SurvDisc_0.1.0_20180504_172206/Windows/00check.log>

Status: 1 WARNING

Debian: <https://win-builder.r-project.org/incoming_pretest/SurvDisc_0.1.0_20180504_172206/Debian/00check.log>

Status: 1 WARNING



Last released version's CRAN status: ERROR: 4, OK: 8

See: <https://CRAN.R-project.org/web/checks/check_results_SurvDisc.html>
"

In the check results, it has this message:
"
  Error in if (!is.element(substr(method, 1, 1), c("b", "P"))) { :
    the condition has length > 1
  Calls: AsympDiscSurv
  Execution halted
"

But, I had already changed that line to this:

if (!is.element(substr(method[1], 1, 1), c("b", "P"))) {


I know the variable "method" is a single character string, but to handle the error checking, I now explicitly tell it to use "method[1]".
Since I already fixed it before re-submitting the package, I don't understand why I am getting this error message or even why it still thinks it is using "method" instead of "method[1]" in that line.

Thanks,
John




        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From pdalgd at gmail.com  Sat May  5 01:19:26 2018
From: pdalgd at gmail.com (peter dalgaard)
Date: Sat, 5 May 2018 01:19:26 +0200
Subject: [R-pkg-devel] 
 updating my package to fix if () condition has length > 1
In-Reply-To: <BN7PR09MB275413041A17EFB8C49553A3BC860@BN7PR09MB2754.namprd09.prod.outlook.com>
References: <BN7PR09MB27544712AF013C004F66715DBC860@BN7PR09MB2754.namprd09.prod.outlook.com>
 <BN7PR09MB275413041A17EFB8C49553A3BC860@BN7PR09MB2754.namprd09.prod.outlook.com>
Message-ID: <851D2B4B-89D1-4189-9B5F-58CF527DAB83@gmail.com>

Um, what are you saying here? You are (AFAIK) not going to get that Error unless "method" has length > 1. It is not a synthetic check inserted by the CRAN nitpickers... Rather than "break the thermometer" by doing method[1], perhaps you should diagnose the problem, say by inserting something like

if (length(method) >= 1) {
 warning("'method' has length > 1:")
 print(method)
}

just before the "if (!is.element..." stuff.

-pd 

> On 4 May 2018, at 19:38 , Lawrence, John P <John.Lawrence at fda.hhs.gov> wrote:
> 
> In the check results, it has this message:
> "
>  Error in if (!is.element(substr(method, 1, 1), c("b", "P"))) { :
>    the condition has length > 1
>  Calls: AsympDiscSurv
>  Execution halted
> "
> 
> But, I had already changed that line to this:
> 
> if (!is.element(substr(method[1], 1, 1), c("b", "P"))) {
> 
> 
> I know the variable "method" is a single character string, but to handle the error checking, I now explicitly tell it to use "method[1]".

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From m@thrun @ending from gmx@net  Sun May  6 11:42:45 2018
From: m@thrun @ending from gmx@net (Dr. rer. nat. Michael Thrun)
Date: Sun, 6 May 2018 11:42:45 +0200
Subject: [R-pkg-devel] Explicitly Calling a Method of a specific Class in a
 Function
Message-ID: <F417B9AE-CE56-4A6F-AAFC-C55F4E5C1F91@gmx.net>

Dear Developers,
I have currently one note in one of my packages I am unable to solve at my own:
?
checking dependencies in R code ... NOTE
Unexported object imported by a ':::' call: ?sp:::plot.SpatialPolygons?
  See the note in ?`:::` about the use of this operator.
?
The goal is to explicitly call the plot function of the 'SpatialPolygons-class' in the function ?plotWorldmap'.
In The CRAN checks the examples work. Manual calling 
of the function ?plotWorldmap' also works in an clean environment yielding the expected plot.
Thus, I assume the call
 sp:::plot.SpatialPolygons(world_country_polygons,col =cols,?)
is in principle correct. 

Could someone please help me?
What do I have to do or to change in order to disable this note?

Best Regards
M. Thrun

From edd @ending from debi@n@org  Mon May  7 13:44:28 2018
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Mon, 7 May 2018 06:44:28 -0500
Subject: [R-pkg-devel] 
 Explicitly Calling a Method of a specific Class in a Function
In-Reply-To: <F417B9AE-CE56-4A6F-AAFC-C55F4E5C1F91@gmx.net>
References: <F417B9AE-CE56-4A6F-AAFC-C55F4E5C1F91@gmx.net>
Message-ID: <23280.15388.497447.30231@rob.eddelbuettel.com>


On 6 May 2018 at 11:42, Dr. rer. nat. Michael Thrun wrote:
| Dear Developers,
| I have currently one note in one of my packages I am unable to solve at my own:
| ?
| checking dependencies in R code ... NOTE
| Unexported object imported by a ':::' call: ?sp:::plot.SpatialPolygons?
|   See the note in ?`:::` about the use of this operator.
| ?
| The goal is to explicitly call the plot function of the 'SpatialPolygons-class' in the function ?plotWorldmap'.
| In The CRAN checks the examples work. Manual calling 
| of the function ?plotWorldmap' also works in an clean environment yielding the expected plot.
| Thus, I assume the call
|  sp:::plot.SpatialPolygons(world_country_polygons,col =cols,?)
| is in principle correct. 
| 
| Could someone please help me?
| What do I have to do or to change in order to disable this note?

You are not supposed to 'silently' call code from other package without
declaring the dependency on that package.

So add an 'imports(sp)', or maybe 'importFrom(sp, plot.SpatialPolygons)' to
you NAMESPACE file, and add Imports: sp to your DESCRIPTION.

Also, either sp exports plot.SpatialPolygons() already so that you can just
two dots as you should for exported functions, or maybe just use method based
dispatch via plot() -- or sp does not export the function in which case you
should not call it.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From georgi@bo@hn@kov @ending from m@nche@ter@@c@uk  Mon May  7 14:38:47 2018
From: georgi@bo@hn@kov @ending from m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Mon, 7 May 2018 12:38:47 +0000
Subject: [R-pkg-devel] 
 Explicitly Calling a Method of a specific Class in a Function
In-Reply-To: <F417B9AE-CE56-4A6F-AAFC-C55F4E5C1F91@gmx.net>
References: <F417B9AE-CE56-4A6F-AAFC-C55F4E5C1F91@gmx.net>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F659178@MBXP01.ds.man.ac.uk>

>checking dependencies in R code ... NOTE Unexported object imported by  ?sp:::plot.SpatialPolygons? ...

The above message already shows that plot.SpatialPolygons is not exported. 
But are you sure that you really wish to call the method and not simply call plot() and let it choose the appropriate method?

You need to import 'sp' or something from it, in order to make the plot method for 'SpatialPolygons' available.
You can do this by putting  import(sp) in NAMESPACE or importFrom(sp, something), where 'something' is some object exported by 'sp'. 

Georgi Boshnakov




-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Dr. rer. nat. Michael Thrun
Sent: 06 May 2018 10:43
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Explicitly Calling a Method of a specific Class in a Function

Dear Developers,
I have currently one note in one of my packages I am unable to solve at my own:
?
checking dependencies in R code ... NOTE
Unexported object imported by a ':::' call: ?sp:::plot.SpatialPolygons?
  See the note in ?`:::` about the use of this operator.
?
The goal is to explicitly call the plot function of the 'SpatialPolygons-class' in the function ?plotWorldmap'.
In The CRAN checks the examples work. Manual calling 
of the function ?plotWorldmap' also works in an clean environment yielding the expected plot.
Thus, I assume the call
 sp:::plot.SpatialPolygons(world_country_polygons,col =cols,?)
is in principle correct. 

Could someone please help me?
What do I have to do or to change in order to disable this note?

Best Regards
M. Thrun
______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

From Roger@Biv@nd @ending from nhh@no  Wed May  9 12:36:23 2018
From: Roger@Biv@nd @ending from nhh@no (Roger Bivand)
Date: Wed, 9 May 2018 12:36:23 +0200
Subject: [R-pkg-devel] 
 Explicitly Calling a Method of a specific Class in a Function
Message-ID: <alpine.LFD.2.21.1805091233150.6572@reclus.nhh.no>

(apologies for out-of-thread response)

Both plot() and SpatialPolygons are S4, so see:

https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Namespaces-with-S4-classes-and-methods

for guidance, probably

importClassesFrom(sp, SpatialPolygons)
importMethodsFrom(sp, plot)

(untried), and list sp in Imports in DESCRIPTION.

Roger

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
http://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From d@tr7320 @ending from uni@@ydney@edu@@u  Sun May 13 04:00:12 2018
From: d@tr7320 @ending from uni@@ydney@edu@@u (Dario Strbenac)
Date: Sun, 13 May 2018 02:00:12 +0000
Subject: [R-pkg-devel] Documentation Cross-reference Unexpected Warning
Message-ID: <SYAPR01MB2558829211A091D4A6258F6ACD9D0@SYAPR01MB2558.ausprd01.prod.outlook.com>

Good day,

If limma has already been installed, such as by

source("https://bioconductor.org/biocLite.R")
biocLite("limma")

and the attached minimalist R package is built and checked, a warning is emitted about the cross-reference in the documentation file. The Writing R Extensions manual states that the [packageName] specifier would only be needed to "... refer to not-yet-installed packages ..." but in this case, limma is already installed and is in the library path. Is the warning a false positive? I am using the latest release of R.

* using R version 3.5.0 (2018-04-23)
* using platform: x86_64-pc-linux-gnu (64-bit)
* using session charset: UTF-8

--------------------------------------
Dario Strbenac
University of Sydney
Camperdown NSW 2050
Australia

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Tester.tar.gz
Type: application/x-gzip
Size: 2984 bytes
Desc: Tester.tar.gz
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20180513/65fb3f07/attachment.bin>

From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Sun May 13 08:53:34 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Sun, 13 May 2018 08:53:34 +0200
Subject: [R-pkg-devel] Documentation Cross-reference Unexpected Warning
In-Reply-To: <SYAPR01MB2558829211A091D4A6258F6ACD9D0@SYAPR01MB2558.ausprd01.prod.outlook.com>
References: <SYAPR01MB2558829211A091D4A6258F6ACD9D0@SYAPR01MB2558.ausprd01.prod.outlook.com>
Message-ID: <4459fd83-fec0-ea10-4c6b-69b6f7201deb@statistik.tu-dortmund.de>

You need

\link[limma]{limFit}

see Writing R Extensions.

Best,
Uwe Ligges


On 13.05.2018 04:00, Dario Strbenac wrote:
> Good day,
> 
> If limma has already been installed, such as by
> 
> source("https://bioconductor.org/biocLite.R")
> biocLite("limma")
> 
> and the attached minimalist R package is built and checked, a warning is emitted about the cross-reference in the documentation file. The Writing R Extensions manual states that the [packageName] specifier would only be needed to "... refer to not-yet-installed packages ..." but in this case, limma is already installed and is in the library path. Is the warning a false positive? I am using the latest release of R.
> 
> * using R version 3.5.0 (2018-04-23)
> * using platform: x86_64-pc-linux-gnu (64-bit)
> * using session charset: UTF-8
> 
> --------------------------------------
> Dario Strbenac
> University of Sydney
> Camperdown NSW 2050
> Australia
> 
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From d@tr7320 @ending from uni@@ydney@edu@@u  Sun May 13 10:00:22 2018
From: d@tr7320 @ending from uni@@ydney@edu@@u (Dario Strbenac)
Date: Sun, 13 May 2018 08:00:22 +0000
Subject: [R-pkg-devel] Documentation Cross-reference Unexpected Warning
In-Reply-To: <4459fd83-fec0-ea10-4c6b-69b6f7201deb@statistik.tu-dortmund.de>
References: <SYAPR01MB2558829211A091D4A6258F6ACD9D0@SYAPR01MB2558.ausprd01.prod.outlook.com>,
 <4459fd83-fec0-ea10-4c6b-69b6f7201deb@statistik.tu-dortmund.de>
Message-ID: <SYAPR01MB2558ED01BD9B967EF965739ACD9D0@SYAPR01MB2558.ausprd01.prod.outlook.com>

Good day,

That form solves it, but there's nothing in the Cross-references secion of the manual which suggests that it is necessary.

--------------------------------------
Dario Strbenac
University of Sydney
Camperdown NSW 2050
Australia


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Sun May 13 15:57:00 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Sun, 13 May 2018 15:57:00 +0200
Subject: [R-pkg-devel] Documentation Cross-reference Unexpected Warning
In-Reply-To: <SYAPR01MB2558ED01BD9B967EF965739ACD9D0@SYAPR01MB2558.ausprd01.prod.outlook.com>
References: <SYAPR01MB2558829211A091D4A6258F6ACD9D0@SYAPR01MB2558.ausprd01.prod.outlook.com>
 <4459fd83-fec0-ea10-4c6b-69b6f7201deb@statistik.tu-dortmund.de>
 <SYAPR01MB2558ED01BD9B967EF965739ACD9D0@SYAPR01MB2558.ausprd01.prod.outlook.com>
Message-ID: <0f2229f8-ee7f-aff5-2638-8040fbc1eb81@statistik.tu-dortmund.de>



On 13.05.2018 10:00, Dario Strbenac wrote:
> Good day,
> 
> That form solves it, but there's nothing in the Cross-references secion of the manual which suggests that it is necessary.


Indeed, that part of the manual seems outdated, will discuss internally.

Best,
Uwe Ligges



> --------------------------------------
> Dario Strbenac
> University of Sydney
> Camperdown NSW 2050
> Australia
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From polychroni@@ko@toul@@ @ending from gm@il@com  Mon May 14 09:16:06 2018
From: polychroni@@ko@toul@@ @ending from gm@il@com (Polychronis Kostoulas)
Date: Mon, 14 May 2018 10:16:06 +0300
Subject: [R-pkg-devel] Unable to build pdf manuals
Message-ID: <CAFAkCyVHMZxzhmBmN+bP41vdkXOezwQ1t6w9knjp+XWHg4tL3A@mail.gmail.com>

Dear colleagues,
apologies if this is easy to solve but I am a rookie. I have developed an R
package with three R functions. Everything works fine and the "check" is ok
but I cannot find the pdf manual that is supposed to be generated from the
Rd files. I am using Rstudio. What am I  missing?

And just to make sure: package dependencies need to be listed under
"Depends" in the description file to be automatically installed or I need
to list them somewhere else as well?

Thanks,
Polychronis

	[[alternative HTML version deleted]]


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Mon May 14 20:31:36 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Mon, 14 May 2018 20:31:36 +0200
Subject: [R-pkg-devel] Unable to build pdf manuals
In-Reply-To: <CAFAkCyVHMZxzhmBmN+bP41vdkXOezwQ1t6w9knjp+XWHg4tL3A@mail.gmail.com>
References: <CAFAkCyVHMZxzhmBmN+bP41vdkXOezwQ1t6w9knjp+XWHg4tL3A@mail.gmail.com>
Message-ID: <6cf70a23-0be6-8cf9-e49a-d5b8dc787407@statistik.tu-dortmund.de>



On 14.05.2018 09:16, Polychronis Kostoulas wrote:
> Dear colleagues,
> apologies if this is easy to solve but I am a rookie. I have developed an R
> package with three R functions. Everything works fine and the "check" is ok
> but I cannot find the pdf manual that is supposed to be generated from the
> Rd files. I am using Rstudio. What am I  missing?

On the command line, you can simply use R CMD Rd2pdf on the package 
directory to build the pdf manual.


> And just to make sure: package dependencies need to be listed under
> "Depends" in the description file to be automatically installed or I need
> to list them somewhere else as well?

Better use namespace directives to import from them and list them under 
Imports. But yes, that is sufficient.

Best,
Uwe Ligges

> Thanks,
> Polychronis
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From pb@iley @ending from @ir@org  Mon May 14 23:51:28 2018
From: pb@iley @ending from @ir@org (Bailey, Paul)
Date: Mon, 14 May 2018 21:51:28 +0000
Subject: [R-pkg-devel] memory exhausted (limit reached?) and R3.6.0 memory
 leak in data.table
Message-ID: <SN6PR05MB4048E39276000E0CA335E739BE9C0@SN6PR05MB4048.namprd05.prod.outlook.com>

A package I'm submitting depends on data.table, which currently has a memory leak on Windows and so I'm getting rejected because of "memory exhausted (limit reached?)". I'm unsure how to proceed. It seems the issue is with R3.6.0 and data.table, so I don't think users would have an immediate issue if my package were updated. I could limit the tests that use data.table to keep under a memory size, but how much memory does CRAN allocate on Windows, and how do I enforce that?

You can see the memory leak issue on GitHub at https://github.com/Rdatatable/data.table/issues/2866

Best,
Paul


From luke-tier@ey m@ili@g off uiow@@edu  Tue May 15 06:50:44 2018
From: luke-tier@ey m@ili@g off uiow@@edu (luke-tier@ey m@ili@g off uiow@@edu)
Date: Mon, 14 May 2018 23:50:44 -0500 (CDT)
Subject: [R-pkg-devel] 
 memory exhausted (limit reached?) and R3.6.0 memory
 leak in data.table
In-Reply-To: <SN6PR05MB4048E39276000E0CA335E739BE9C0@SN6PR05MB4048.namprd05.prod.outlook.com>
References: <SN6PR05MB4048E39276000E0CA335E739BE9C0@SN6PR05MB4048.namprd05.prod.outlook.com>
Message-ID: <alpine.DEB.2.20.1805142342070.6923@luke-Latitude-7480>

The issue with data.table in R 3.5 and R 3.6 is a race condition in
data.table's use of multiple threads via OpenMP. Running with the
environment variable OMP_NUM_THREADS=1 makes the memory problem go
away.

Calling DATAPTR for ALTREP objects, like compact arithmetic sequences,
temporarily disables the GC. Calling DATAPTR from multiple threads
without synchronization creates a race condition that can leave the GC
disabled, so memory use grows. It's not a leak: signaling a user
interrupt, or anything that triggers a jump to top level, re-enables
the GC.

The issue exists in R 3.5 as well but is a little less apparent since,
due to an oversight, byte compiled code often does not produce compact
arithmetic sequences. This will hopefully be addressed in R 3.5.1.

Best,

luke

On Mon, 14 May 2018, Bailey, Paul wrote:

> A package I'm submitting depends on data.table, which currently has a memory leak on Windows and so I'm getting rejected because of "memory exhausted (limit reached?)". I'm unsure how to proceed. It seems the issue is with R3.6.0 and data.table, so I don't think users would have an immediate issue if my package were updated. I could limit the tests that use data.table to keep under a memory size, but how much memory does CRAN allocate on Windows, and how do I enforce that?
>
> You can see the memory leak issue on GitHub at https://github.com/Rdatatable/data.table/issues/2866
>
> Best,
> Paul
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu


From R@iner @ending from krug@@de  Tue May 15 13:22:16 2018
From: R@iner @ending from krug@@de (Rainer Krug)
Date: Tue, 15 May 2018 13:22:16 +0200
Subject: [R-pkg-devel] plot graph (png, svg, eps, pdf, vdx,
 ok tikz) to device
Message-ID: <9717DC88-20E8-45A0-B068-5BC2F818E58D@krugs.de>

Hi

I asked the question at stack exchange yesterday ( https://stackoverflow.com/q/50325139/632423 ) and did not get a response so far, so I repost it here:

####

I have the following situation: I use an external command (plantuml - http://plantuml.com/ ) to create a graph. This is done via R by using a (my) package ( https://github.com/rkrug/plantuml ). The resulting graph can be a file (png, svg, eps, pdf, vdx or LaTeX/Tikz with or without preamble) or I can send the image to stdout, using the same formats.

Now I want to plot this graph as R-like as possible, i.e. in a graphic device. At the moment I am using a temporary file, which I display using readPNG() and grid::grid.raster() which works, but I am not that happy with this approach as

	? I have to use a temporary file which I would like to avoid, and
	? it is a raster format and I would prefer a vector format.

My question is therefore:

	? Is there a way to display any of the vector formats in a graphics device in R?
	? Can I pipe stdout (the result from the call to plantuml) directly into the device (or through any function) without having to create an intermediate file?

####

Thanks for any [pointers,

Rainer


--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

University of Z?rich

Cell:       +41 (0)78 630 66 57
email:      Rainer at krugs.de
Skype:      RMkrug

PGP: 0x0F52F982




-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 488 bytes
Desc: Message signed with OpenPGP
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20180515/26f80b1f/attachment.sig>

From @me @ending from iy@ik@com  Tue May 15 13:31:37 2018
From: @me @ending from iy@ik@com (=?UTF-8?Q?Stefan_McKinnon_H=C3=B8j=2DEdwards?=)
Date: Tue, 15 May 2018 13:31:37 +0200
Subject: [R-pkg-devel] plot graph (png, svg, eps, pdf, vdx,
 ok tikz) to device
In-Reply-To: <9717DC88-20E8-45A0-B068-5BC2F818E58D@krugs.de>
References: <9717DC88-20E8-45A0-B068-5BC2F818E58D@krugs.de>
Message-ID: <CAHJFP8RWu=z9kxWjuM9VHyYKdadPE0A+JE9PowHB28MzMDakMA@mail.gmail.com>

Hi Rainer,

You are currently using a java library to create the plot. Your package is
basically a wrapper around the java file.
The only way to make it more "R-like" would be to re-implement the
rendering in R (or Rcpp or using the grid package).

To get a vector based image, your code suggests you can use the SVG format.
But again, that does not have anything to do with R.

Kindly,
Stefan McKinnon H?j-Edwards

Stefan McKinnon H?j-Edwards
ph.d. Genetics
+44 (0)776 231 2464
+45 2888 6598
Skype: stefan_edwards

2018-05-15 13:22 GMT+02:00 Rainer Krug <Rainer at krugs.de>:

> Hi
>
> I asked the question at stack exchange yesterday (
> https://stackoverflow.com/q/50325139/632423 ) and did not get a response
> so far, so I repost it here:
>
> ####
>
> I have the following situation: I use an external command (plantuml -
> http://plantuml.com/ ) to create a graph. This is done via R by using a
> (my) package ( https://github.com/rkrug/plantuml ). The resulting graph
> can be a file (png, svg, eps, pdf, vdx or LaTeX/Tikz with or without
> preamble) or I can send the image to stdout, using the same formats.
>
> Now I want to plot this graph as R-like as possible, i.e. in a graphic
> device. At the moment I am using a temporary file, which I display using
> readPNG() and grid::grid.raster() which works, but I am not that happy with
> this approach as
>
>         ? I have to use a temporary file which I would like to avoid, and
>         ? it is a raster format and I would prefer a vector format.
>
> My question is therefore:
>
>         ? Is there a way to display any of the vector formats in a
> graphics device in R?
>         ? Can I pipe stdout (the result from the call to plantuml)
> directly into the device (or through any function) without having to create
> an intermediate file?
>
> ####
>
> Thanks for any [pointers,
>
> Rainer
>
>
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
> Biology, UCT), Dipl. Phys. (Germany)
>
> University of Z?rich
>
> Cell:       +41 (0)78 630 66 57
> email:      Rainer at krugs.de
> Skype:      RMkrug
>
> PGP: 0x0F52F982
>
>
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>

	[[alternative HTML version deleted]]


From R@iner @ending from krug@@de  Tue May 15 13:43:09 2018
From: R@iner @ending from krug@@de (Rainer M Krug)
Date: Tue, 15 May 2018 13:43:09 +0200
Subject: [R-pkg-devel] plot graph (png, svg, eps, pdf, vdx,
 ok tikz) to device
In-Reply-To: <CAHJFP8RWu=z9kxWjuM9VHyYKdadPE0A+JE9PowHB28MzMDakMA@mail.gmail.com>
References: <9717DC88-20E8-45A0-B068-5BC2F818E58D@krugs.de>
 <CAHJFP8RWu=z9kxWjuM9VHyYKdadPE0A+JE9PowHB28MzMDakMA@mail.gmail.com>
Message-ID: <94EE9DE5-F16E-4FBC-868E-AF14EE6452FA@krugs.de>

Hi Stefan,

> On 15 May 2018, at 13:31, Stefan McKinnon H?j-Edwards <sme at iysik.com> wrote:
> 
> Hi Rainer,
> 
> You are currently using a java library to create the plot. Your package is basically a wrapper around the java file.

Correct - that why I am limited to using the specified output formats.

> The only way to make it more "R-like" would be to re-implement the rendering in R (or Rcpp or using the grid package).

Yes - I want to render the generated graphs in a graphics device in R, as if I would use a plot(1,1) command.

> 
> To get a vector based image, your code suggests you can use the SVG format. But again, that does not have anything to do with R.

As vector I have sag, eps, and tikz formats - and the R part is: can I render these in an R device. I am not interested in R-like coded in the package, I am simply looking for a way to display this in an R device.

Cheers,

Rainer


> 
> Kindly,
> Stefan McKinnon H?j-Edwards
> 
> Stefan McKinnon H?j-Edwards
> ph.d. Genetics
> +44 (0)776 231 2464
> +45 2888 6598
> Skype: stefan_edwards
> 
> 2018-05-15 13:22 GMT+02:00 Rainer Krug <Rainer at krugs.de <mailto:Rainer at krugs.de>>:
> Hi
> 
> I asked the question at stack exchange yesterday ( https://stackoverflow.com/q/50325139/632423 <https://stackoverflow.com/q/50325139/632423> ) and did not get a response so far, so I repost it here:
> 
> ####
> 
> I have the following situation: I use an external command (plantuml - http://plantuml.com/ <http://plantuml.com/> ) to create a graph. This is done via R by using a (my) package ( https://github.com/rkrug/plantuml <https://github.com/rkrug/plantuml> ). The resulting graph can be a file (png, svg, eps, pdf, vdx or LaTeX/Tikz with or without preamble) or I can send the image to stdout, using the same formats.
> 
> Now I want to plot this graph as R-like as possible, i.e. in a graphic device. At the moment I am using a temporary file, which I display using readPNG() and grid::grid.raster() which works, but I am not that happy with this approach as
> 
>         ? I have to use a temporary file which I would like to avoid, and
>         ? it is a raster format and I would prefer a vector format.
> 
> My question is therefore:
> 
>         ? Is there a way to display any of the vector formats in a graphics device in R?
>         ? Can I pipe stdout (the result from the call to plantuml) directly into the device (or through any function) without having to create an intermediate file?
> 
> ####
> 
> Thanks for any [pointers,
> 
> Rainer
> 
> 
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> 
> University of Z?rich
> 
> Cell:       +41 (0)78 630 66 57
> email:      Rainer at krugs.de <mailto:Rainer at krugs.de>
> Skype:      RMkrug
> 
> PGP: 0x0F52F982
> 
> 
> 
> 
> ______________________________________________
> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> 
> 

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

University of Z?rich

Cell:       +41 (0)78 630 66 57
email:      Rainer at krugs.de
Skype:      RMkrug

PGP: 0x0F52F982




-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 488 bytes
Desc: Message signed with OpenPGP
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20180515/8ecaff0d/attachment.sig>

From R@iner @ending from krug@@de  Tue May 15 14:00:43 2018
From: R@iner @ending from krug@@de (Rainer M. Krug)
Date: Tue, 15 May 2018 14:00:43 +0200
Subject: [R-pkg-devel] plot graph (png, svg, eps, pdf, vdx,
 ok tikz) to device
In-Reply-To: <19831277.5WCJ4o2pA0@ryz>
References: <9717DC88-20E8-45A0-B068-5BC2F818E58D@krugs.de>
 <19831277.5WCJ4o2pA0@ryz>
Message-ID: <94710478-B33C-4C07-AB59-DFC9722041E7@krugs.de>



Von meinem iPhone gesendet

> Am 15.05.2018 um 13:54 schrieb Johannes Ranke <johannes.ranke at jrwb.de>:
> 
> Hi,
> 
> have a look at the grImport package. It can import eps, so at least you get a 
> vector based graph. 

Sounds interesting- I?ll check it out tomorrow and report back if it works well. 

> 
> Alternatively, you may want to check grImport2 which imports svg.
> 
> Kind regards,
> 
> Johannes
> 
> Am Dienstag, 15. Mai 2018, 13:22:16 CEST schrieb Rainer Krug:
>> Hi
>> 
>> I asked the question at stack exchange yesterday (
>> https://stackoverflow.com/q/50325139/632423 ) and did not get a response so
>> far, so I repost it here:
>> 
>> ####
>> 
>> I have the following situation: I use an external command (plantuml -
>> http://plantuml.com/ ) to create a graph. This is done via R by using a
>> (my) package ( https://github.com/rkrug/plantuml ). The resulting graph can
>> be a file (png, svg, eps, pdf, vdx or LaTeX/Tikz with or without preamble)
>> or I can send the image to stdout, using the same formats.
>> 
>> Now I want to plot this graph as R-like as possible, i.e. in a graphic
>> device. At the moment I am using a temporary file, which I display using
>> readPNG() and grid::grid.raster() which works, but I am not that happy with
>> this approach as
>> 
>>    ? I have to use a temporary file which I would like to avoid, and
>>    ? it is a raster format and I would prefer a vector format.
>> 
>> My question is therefore:
>> 
>>    ? Is there a way to display any of the vector formats in a graphics device
>> in R? ? Can I pipe stdout (the result from the call to plantuml) directly
>> into the device (or through any function) without having to create an
>> intermediate file?
>> 
>> ####
>> 
>> Thanks for any [pointers,
>> 
>> Rainer
>> 
>> 
>> --
>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology,
>> UCT), Dipl. Phys. (Germany)
>> 
>> University of Z?rich
>> 
>> Cell:       +41 (0)78 630 66 57
>> email:      Rainer at krugs.de
>> Skype:      RMkrug
>> 
>> PGP: 0x0F52F982
> 
> 
> -- 
> Johannes Ranke
> Wissenschaftlicher Berater
> https://jrwb.de/contact


From pb@iley @ending from @ir@org  Tue May 15 16:01:02 2018
From: pb@iley @ending from @ir@org (Bailey, Paul)
Date: Tue, 15 May 2018 14:01:02 +0000
Subject: [R-pkg-devel] 
 memory exhausted (limit reached?) and R3.6.0 memory
 leak in data.table
In-Reply-To: <alpine.DEB.2.20.1805142342070.6923@luke-Latitude-7480>
References: <SN6PR05MB4048E39276000E0CA335E739BE9C0@SN6PR05MB4048.namprd05.prod.outlook.com>
 <alpine.DEB.2.20.1805142342070.6923@luke-Latitude-7480>
Message-ID: <SN6PR05MB40489FF9E09B12A52CDB8437BE930@SN6PR05MB4048.namprd05.prod.outlook.com>

Hi Luke,

Thanks for the explanation of the situation. I hope I'm wrong, but I believe that setting OMP_NUM_THREADS=1 is not something I can do inside my package, or does this help me for CRAN submission? You mention a user interrupt to reset the gc, but I can't do that either, right?

I'm at a bit of a loss as to what to do right now.

Best,
Paul


From luke-tier@ey m@ili@g off uiow@@edu  Tue May 15 16:18:29 2018
From: luke-tier@ey m@ili@g off uiow@@edu (luke-tier@ey m@ili@g off uiow@@edu)
Date: Tue, 15 May 2018 09:18:29 -0500 (CDT)
Subject: [R-pkg-devel] 
 memory exhausted (limit reached?) and R3.6.0 memory
 leak in data.table
In-Reply-To: <SN6PR05MB40489FF9E09B12A52CDB8437BE930@SN6PR05MB4048.namprd05.prod.outlook.com>
References: <SN6PR05MB4048E39276000E0CA335E739BE9C0@SN6PR05MB4048.namprd05.prod.outlook.com>
 <alpine.DEB.2.20.1805142342070.6923@luke-Latitude-7480>
 <SN6PR05MB40489FF9E09B12A52CDB8437BE930@SN6PR05MB4048.namprd05.prod.outlook.com>
Message-ID: <alpine.DEB.2.20.1805150914540.6923@luke-Latitude-7480>

Until there is a new data.table version available that fixes the race
condition you can use setDTthreads(1) to turn off use of multiple
threads.

Best,

luke

On Tue, 15 May 2018, Bailey, Paul wrote:

> Hi Luke,
>
> Thanks for the explanation of the situation. I hope I'm wrong, but I believe that setting OMP_NUM_THREADS=1 is not something I can do inside my package, or does this help me for CRAN submission? You mention a user interrupt to reset the gc, but I can't do that either, right?
>
> I'm at a bit of a loss as to what to do right now.
>
> Best,
> Paul
>
>

-- 
Luke Tierney
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:   luke-tierney at uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu


From kevin@r@coombe@ @ending from gm@il@com  Thu May 17 17:21:23 2018
From: kevin@r@coombe@ @ending from gm@il@com (Kevin Coombes)
Date: Thu, 17 May 2018 11:21:23 -0400
Subject: [R-pkg-devel] mvrnorm, eigen, tests, and R CMD check
Message-ID: <CAHJ+2V+VyRoU-mV=BsQAm3A+z22bXC9za7kPPn3h_OZZm6BS2Q@mail.gmail.com>

Hi,

I wrote and maintain the Thresher package. It includes code to do
simulations. In the "tests" directory of the package, I do some simple
simulations and run the main algorithm, then write out summaries of the
results

The initial submission of the package to CRAN was delayed because the
"Rout.save" files matched the "Rout" files on 64-bit R but *not*  on 32-bit
R on Windows. After investigating, I realized that when my simulation code
called "MASS::mvrnorm", I got different results from 64-bit and 32-bit
versions of R on the same machine.  Pushing further, I determined that this
was happening because mvrnorm used "eigen" to compute the eigenvalues and
eigenvectors, and "eigen" itself gave different answers in the two R
versions..

The underlying issue (mathematically) is that the correlation/covariance
matrix I was using had repeated eigenvalues, and so there is no unique
choice of basis for the associated eigenspace. This observation suggests
that the issue is potentially more general than 32-bit versus 64-bit; the
results will depend on the implementation of the eigen-decomposition in
whatever linear algebra module is compiled along with R, so it can change
from machine to machine.

I "solved" (well, worked around) the immediate problem with package
submission by changing the test code to not write out anything that might
differ between versions.

With all of that as background, here are my main questions:

[1] Is there any way to put something into the "tests" directory that would
allow me to use these simulations for what computer scientists call
regression testing? (That is, to make sure my changes to the code haven't
changed results in an unexpected way.)

[2] Should there be a flag or instruction to R CMD check that says to only
run or interpret this particular test on a specific version or machine? (Or
is there already such a flag that I don't know about?)

[3] Should the documentation (man page) for "eigen" or "mvrnorm" include a
warning that the results can change from machine to machine (or between
things like 32-bit and 64-bit R on the same machine) because of difference
in linear algebra modules? (Possibly including the statement that
"set.seed" won't save you.)

You can reproduce my example by running this code in different R
versions/machines:

sig <- matrix(0, 16, 16)
sig[1:10, 1:10] <- 0.5
sig[11:16,11:16] <- 0.5
diag(sig) <- 1
eigen(sig)

Best,
  Kevin

	[[alternative HTML version deleted]]


From bri@n @ending from br@verock@com  Thu May 17 17:51:17 2018
From: bri@n @ending from br@verock@com (Brian G. Peterson)
Date: Thu, 17 May 2018 10:51:17 -0500
Subject: [R-pkg-devel] why can't we importFrom 'methods' ?
Message-ID: <1526572277.30655.212.camel@braverock.com>

newer versions of R require importFrom for functions from 'stats',
'graphics' and many other packages that used to be assumed to be on the
search path and thus available.

'methods' continues to have seemingly different treatment.

If you try to use importFrom to import a single function (in this case
'hasArg') from methods, you receive an ERROR from R CMD check

    Namespace dependency not required : 'methods'

but without the importFrom, you see a number of NOTE's

    no visible global function definition for 'hasArg'

I don't want to import all of 'methods', as I only need one function.

What am I doing wrong?

Regards,

Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From m@echler @ending from @t@t@m@th@ethz@ch  Thu May 17 17:53:16 2018
From: m@echler @ending from @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 17 May 2018 17:53:16 +0200
Subject: [R-pkg-devel] mvrnorm, eigen, tests, and R CMD check
In-Reply-To: <CAHJ+2V+VyRoU-mV=BsQAm3A+z22bXC9za7kPPn3h_OZZm6BS2Q@mail.gmail.com>
References: <CAHJ+2V+VyRoU-mV=BsQAm3A+z22bXC9za7kPPn3h_OZZm6BS2Q@mail.gmail.com>
Message-ID: <23293.42348.701851.577848@stat.math.ethz.ch>

>>>>> Kevin Coombes <kevin.r.coombes at gmail.com>
>>>>>     on Thu, 17 May 2018 11:21:23 -0400 writes:

    > Hi, I wrote and maintain the Thresher package. It includes
    > code to do simulations. In the "tests" directory of the
    > package, I do some simple simulations and run the main
    > algorithm, then write out summaries of the results

    > The initial submission of the package to CRAN was delayed
    > because the "Rout.save" files matched the "Rout" files on
    > 64-bit R but *not* on 32-bit R on Windows. After
    > investigating, I realized that when my simulation code
    > called "MASS::mvrnorm", I got different results from
    > 64-bit and 32-bit versions of R on the same machine.
    > Pushing further, I determined that this was happening
    > because mvrnorm used "eigen" to compute the eigenvalues
    > and eigenvectors, and "eigen" itself gave different
    > answers in the two R versions..

    > The underlying issue (mathematically) is that the
    > correlation/covariance matrix I was using had repeated
    > eigenvalues, and so there is no unique choice of basis for
    > the associated eigenspace. This observation suggests that
    > the issue is potentially more general than 32-bit versus
    > 64-bit; the results will depend on the implementation of
    > the eigen-decomposition in whatever linear algebra module
    > is compiled along with R, so it can change from machine to
    > machine.

    > I "solved" (well, worked around) the immediate problem
    > with package submission by changing the test code to not
    > write out anything that might differ between versions.

    > With all of that as background, here are my main
    > questions:

    > [1] Is there any way to put something into the "tests"
    > directory that would allow me to use these simulations for
    > what computer scientists call regression testing? (That
    > is, to make sure my changes to the code haven't changed
    > results in an unexpected way.)

    > [2] Should there be a flag or instruction to R CMD check
    > that says to only run or interpret this particular test on
    > a specific version or machine? (Or is there already such a
    > flag that I don't know about?)

    > [3] Should the documentation (man page) for "eigen" or
    > "mvrnorm" include a warning that the results can change
    > from machine to machine (or between things like 32-bit and
    > 64-bit R on the same machine) because of difference in
    > linear algebra modules? (Possibly including the statement
    > that "set.seed" won't save you.)

The problem is that most (young?) people do not read help pages
anymore.

help(eigen) has contained the following text for years, and in
spite of your good analysis of the problem you seem to not have
noticed the last semi-paragraph:

> Value:
> 
>      The spectral decomposition of ?x? is returned as a list with
>      components
> 
>   values: a vector containing the p eigenvalues of ?x?, sorted in
>           _decreasing_ order, according to ?Mod(values)? in the
>           asymmetric case when they might be complex (even for real
>           matrices).  For real asymmetric matrices the vector will be
>           complex only if complex conjugate pairs of eigenvalues are
>           detected.
> 
>  vectors: either a p * p matrix whose columns contain the eigenvectors
>           of ?x?, or ?NULL? if ?only.values? is ?TRUE?.  The vectors
>           are normalized to unit length.
> 
>           Recall that the eigenvectors are only defined up to a
>           constant: even when the length is specified they are still
>           only defined up to a scalar of modulus one (the sign for real
>           matrices).

It's not a warning but a "recall that" .. maybe because the
author already assumed that only thorough users would read that
and for them it would be a recall of something they'd have
learned *and* not entirely forgotten since ;-)

Martin Maechler
ETH Zurich


From m@echler @ending from @t@t@m@th@ethz@ch  Thu May 17 17:57:39 2018
From: m@echler @ending from @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 17 May 2018 17:57:39 +0200
Subject: [R-pkg-devel] why can't we importFrom 'methods' ?
In-Reply-To: <1526572277.30655.212.camel@braverock.com>
References: <1526572277.30655.212.camel@braverock.com>
Message-ID: <23293.42611.867694.696003@stat.math.ethz.ch>

>>>>> Brian G Peterson <brian at braverock.com>
>>>>>     on Thu, 17 May 2018 10:51:17 -0500 writes:

    > newer versions of R require importFrom for functions from
    > 'stats', 'graphics' and many other packages that used to
    > be assumed to be on the search path and thus available.

    > 'methods' continues to have seemingly different treatment.

    > If you try to use importFrom to import a single function
    > (in this case 'hasArg') from methods, you receive an ERROR
    > from R CMD check

    >     Namespace dependency not required : 'methods'

    > but without the importFrom, you see a number of NOTE's

    >     no visible global function definition for 'hasArg'

    > I don't want to import all of 'methods', as I only need
    > one function.

Many many good(*) packages import from methods, from R base, it
is "of course" only 'stats4';
from packages I maintain:  Matrix, Rmpfr, copula (at least)
then many hundreds of high quality bioconductor packages.


    > What am I doing wrong?

Did you add it to the DESCRIPTION to the 'Imports:' ?

    > Regards,

    > Brian

    > -- 
    > Brian G. Peterson http://braverock.com/brian/ Ph:
    > 773-459-4973 IM: bgpbraverock

    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @ending from gm@il@com  Thu May 17 17:59:01 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Thu, 17 May 2018 11:59:01 -0400
Subject: [R-pkg-devel] why can't we importFrom 'methods' ?
In-Reply-To: <1526572277.30655.212.camel@braverock.com>
References: <1526572277.30655.212.camel@braverock.com>
Message-ID: <5c36e575-76ba-21eb-1080-85bc95c5e3e2@gmail.com>

On 17/05/2018 11:51 AM, Brian G. Peterson wrote:
> newer versions of R require importFrom for functions from 'stats',
> 'graphics' and many other packages that used to be assumed to be on the
> search path and thus available.
> 
> 'methods' continues to have seemingly different treatment.
> 
> If you try to use importFrom to import a single function (in this case
> 'hasArg') from methods, you receive an ERROR from R CMD check
> 
>      Namespace dependency not required : 'methods'

That message usually means that you didn't list 'methods' in the Imports 
clause in DESCRIPTION.

Duncan Murdoch

> 
> but without the importFrom, you see a number of NOTE's
> 
>      no visible global function definition for 'hasArg'
> 
> I don't want to import all of 'methods', as I only need one function.
> 
> What am I doing wrong?
> 
> Regards,
> 
> Brian
>


From georgi@bo@hn@kov @ending from m@nche@ter@@c@uk  Thu May 17 18:06:00 2018
From: georgi@bo@hn@kov @ending from m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Thu, 17 May 2018 16:06:00 +0000
Subject: [R-pkg-devel] why can't we importFrom 'methods' ?
In-Reply-To: <5c36e575-76ba-21eb-1080-85bc95c5e3e2@gmail.com>
References: <1526572277.30655.212.camel@braverock.com>
 <5c36e575-76ba-21eb-1080-85bc95c5e3e2@gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F65A44A@MBXP01.ds.man.ac.uk>

The confusion may stem from (the probably inadvertent) feature that the quality control tools
do not raise alarm if there are imports from "stats" and "graphics" even if they are not in "Imports:'.

Georgi Boshnakov

-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Duncan Murdoch
Sent: 17 May 2018 16:59
To: Brian G. Peterson; R Package Development
Subject: Re: [R-pkg-devel] why can't we importFrom 'methods' ?

On 17/05/2018 11:51 AM, Brian G. Peterson wrote:
> newer versions of R require importFrom for functions from 'stats',
> 'graphics' and many other packages that used to be assumed to be on the
> search path and thus available.
> 
> 'methods' continues to have seemingly different treatment.
> 
> If you try to use importFrom to import a single function (in this case
> 'hasArg') from methods, you receive an ERROR from R CMD check
> 
>      Namespace dependency not required : 'methods'

That message usually means that you didn't list 'methods' in the Imports 
clause in DESCRIPTION.

Duncan Murdoch

> 
> but without the importFrom, you see a number of NOTE's
> 
>      no visible global function definition for 'hasArg'
> 
> I don't want to import all of 'methods', as I only need one function.
> 
> What am I doing wrong?
> 
> Regards,
> 
> Brian
>

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From bbolker @ending from gm@il@com  Thu May 17 18:07:23 2018
From: bbolker @ending from gm@il@com (Ben Bolker)
Date: Thu, 17 May 2018 12:07:23 -0400
Subject: [R-pkg-devel] mvrnorm, eigen, tests, and R CMD check
In-Reply-To: <23293.42348.701851.577848@stat.math.ethz.ch>
References: <CAHJ+2V+VyRoU-mV=BsQAm3A+z22bXC9za7kPPn3h_OZZm6BS2Q@mail.gmail.com>
 <23293.42348.701851.577848@stat.math.ethz.ch>
Message-ID: <CABghstRn7hNQiGr-kxNsFzVXmX7iYqxZrhaWxscJd2=nYqq2iw@mail.gmail.com>

As far as questions #1 and #2 go: you can probably use the components
of R.Version() (e.g. $arch, maybe some substring of $os) to compare
your test output only for "sufficiently similar" platforms. Depending
on how obsessive you are you could generate different test output for
a bunch of platforms and include them all.  Might be cleaner to store
the results in a separate file.  For example, say that
inst/testdata/eigentests.RData contains a list of results - then
something like

eigen_results <- list(
   x86_64_darwin= ...,
   x86_64_linux = ...,
   x86_64_windows= ...,
   x86_32_darwin=...,
  etc.)

load(system.file("testdata","eigentests.RData",package="mypkg"))
rv <- R.Version()
platformname <- paste(rv$arch,gsub(rv$os,"^([[:alpha:]]+)","\\1"),sep="_")
expected <- eigen_results[[platformname]]

should extract the correct version for the platform currently being tested.



On Thu, May 17, 2018 at 11:53 AM, Martin Maechler
<maechler at stat.math.ethz.ch> wrote:
>>>>>> Kevin Coombes <kevin.r.coombes at gmail.com>
>>>>>>     on Thu, 17 May 2018 11:21:23 -0400 writes:
>
>     > Hi, I wrote and maintain the Thresher package. It includes
>     > code to do simulations. In the "tests" directory of the
>     > package, I do some simple simulations and run the main
>     > algorithm, then write out summaries of the results
>
>     > The initial submission of the package to CRAN was delayed
>     > because the "Rout.save" files matched the "Rout" files on
>     > 64-bit R but *not* on 32-bit R on Windows. After
>     > investigating, I realized that when my simulation code
>     > called "MASS::mvrnorm", I got different results from
>     > 64-bit and 32-bit versions of R on the same machine.
>     > Pushing further, I determined that this was happening
>     > because mvrnorm used "eigen" to compute the eigenvalues
>     > and eigenvectors, and "eigen" itself gave different
>     > answers in the two R versions..
>
>     > The underlying issue (mathematically) is that the
>     > correlation/covariance matrix I was using had repeated
>     > eigenvalues, and so there is no unique choice of basis for
>     > the associated eigenspace. This observation suggests that
>     > the issue is potentially more general than 32-bit versus
>     > 64-bit; the results will depend on the implementation of
>     > the eigen-decomposition in whatever linear algebra module
>     > is compiled along with R, so it can change from machine to
>     > machine.
>
>     > I "solved" (well, worked around) the immediate problem
>     > with package submission by changing the test code to not
>     > write out anything that might differ between versions.
>
>     > With all of that as background, here are my main
>     > questions:
>
>     > [1] Is there any way to put something into the "tests"
>     > directory that would allow me to use these simulations for
>     > what computer scientists call regression testing? (That
>     > is, to make sure my changes to the code haven't changed
>     > results in an unexpected way.)
>
>     > [2] Should there be a flag or instruction to R CMD check
>     > that says to only run or interpret this particular test on
>     > a specific version or machine? (Or is there already such a
>     > flag that I don't know about?)
>
>     > [3] Should the documentation (man page) for "eigen" or
>     > "mvrnorm" include a warning that the results can change
>     > from machine to machine (or between things like 32-bit and
>     > 64-bit R on the same machine) because of difference in
>     > linear algebra modules? (Possibly including the statement
>     > that "set.seed" won't save you.)
>
> The problem is that most (young?) people do not read help pages
> anymore.
>
> help(eigen) has contained the following text for years, and in
> spite of your good analysis of the problem you seem to not have
> noticed the last semi-paragraph:
>
>> Value:
>>
>>      The spectral decomposition of ?x? is returned as a list with
>>      components
>>
>>   values: a vector containing the p eigenvalues of ?x?, sorted in
>>           _decreasing_ order, according to ?Mod(values)? in the
>>           asymmetric case when they might be complex (even for real
>>           matrices).  For real asymmetric matrices the vector will be
>>           complex only if complex conjugate pairs of eigenvalues are
>>           detected.
>>
>>  vectors: either a p * p matrix whose columns contain the eigenvectors
>>           of ?x?, or ?NULL? if ?only.values? is ?TRUE?.  The vectors
>>           are normalized to unit length.
>>
>>           Recall that the eigenvectors are only defined up to a
>>           constant: even when the length is specified they are still
>>           only defined up to a scalar of modulus one (the sign for real
>>           matrices).
>
> It's not a warning but a "recall that" .. maybe because the
> author already assumed that only thorough users would read that
> and for them it would be a recall of something they'd have
> learned *and* not entirely forgotten since ;-)
>
> Martin Maechler
> ETH Zurich
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @ending from gm@il@com  Thu May 17 18:13:01 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Thu, 17 May 2018 12:13:01 -0400
Subject: [R-pkg-devel] mvrnorm, eigen, tests, and R CMD check
In-Reply-To: <23293.42348.701851.577848@stat.math.ethz.ch>
References: <CAHJ+2V+VyRoU-mV=BsQAm3A+z22bXC9za7kPPn3h_OZZm6BS2Q@mail.gmail.com>
 <23293.42348.701851.577848@stat.math.ethz.ch>
Message-ID: <3fd7d8b3-79f4-dbdf-bb76-47ea4189ba40@gmail.com>

On 17/05/2018 11:53 AM, Martin Maechler wrote:
>>>>>> Kevin Coombes <kevin.r.coombes at gmail.com>
>>>>>>      on Thu, 17 May 2018 11:21:23 -0400 writes:
> 
>      > Hi, I wrote and maintain the Thresher package. It includes
>      > code to do simulations. In the "tests" directory of the
>      > package, I do some simple simulations and run the main
>      > algorithm, then write out summaries of the results
> 
>      > The initial submission of the package to CRAN was delayed
>      > because the "Rout.save" files matched the "Rout" files on
>      > 64-bit R but *not* on 32-bit R on Windows. After
>      > investigating, I realized that when my simulation code
>      > called "MASS::mvrnorm", I got different results from
>      > 64-bit and 32-bit versions of R on the same machine.
>      > Pushing further, I determined that this was happening
>      > because mvrnorm used "eigen" to compute the eigenvalues
>      > and eigenvectors, and "eigen" itself gave different
>      > answers in the two R versions..
> 
>      > The underlying issue (mathematically) is that the
>      > correlation/covariance matrix I was using had repeated
>      > eigenvalues, and so there is no unique choice of basis for
>      > the associated eigenspace. This observation suggests that
>      > the issue is potentially more general than 32-bit versus
>      > 64-bit; the results will depend on the implementation of
>      > the eigen-decomposition in whatever linear algebra module
>      > is compiled along with R, so it can change from machine to
>      > machine.
> 
>      > I "solved" (well, worked around) the immediate problem
>      > with package submission by changing the test code to not
>      > write out anything that might differ between versions.
> 
>      > With all of that as background, here are my main
>      > questions:
> 
>      > [1] Is there any way to put something into the "tests"
>      > directory that would allow me to use these simulations for
>      > what computer scientists call regression testing? (That
>      > is, to make sure my changes to the code haven't changed
>      > results in an unexpected way.)
> 
>      > [2] Should there be a flag or instruction to R CMD check
>      > that says to only run or interpret this particular test on
>      > a specific version or machine? (Or is there already such a
>      > flag that I don't know about?)
> 
>      > [3] Should the documentation (man page) for "eigen" or
>      > "mvrnorm" include a warning that the results can change
>      > from machine to machine (or between things like 32-bit and
>      > 64-bit R on the same machine) because of difference in
>      > linear algebra modules? (Possibly including the statement
>      > that "set.seed" won't save you.)
> 
> The problem is that most (young?) people do not read help pages
> anymore.
> 
> help(eigen) has contained the following text for years, and in
> spite of your good analysis of the problem you seem to not have
> noticed the last semi-paragraph:
> 
>> Value:
>>
>>       The spectral decomposition of ?x? is returned as a list with
>>       components
>>
>>    values: a vector containing the p eigenvalues of ?x?, sorted in
>>            _decreasing_ order, according to ?Mod(values)? in the
>>            asymmetric case when they might be complex (even for real
>>            matrices).  For real asymmetric matrices the vector will be
>>            complex only if complex conjugate pairs of eigenvalues are
>>            detected.
>>
>>   vectors: either a p * p matrix whose columns contain the eigenvectors
>>            of ?x?, or ?NULL? if ?only.values? is ?TRUE?.  The vectors
>>            are normalized to unit length.
>>
>>            Recall that the eigenvectors are only defined up to a
>>            constant: even when the length is specified they are still
>>            only defined up to a scalar of modulus one (the sign for real
>>            matrices).
> 
> It's not a warning but a "recall that" .. maybe because the
> author already assumed that only thorough users would read that
> and for them it would be a recall of something they'd have
> learned *and* not entirely forgotten since ;-)
> 

I don't think you're really being fair here:  the text in ?eigen doesn't 
make clear that eigenvector values are not reproducible even within the 
same version of R, and there's nothing in ?mvrnorm to suggest it doesn't 
give reproducible results.

As to the other questions:

[1] You can add additional test directories and only test them under 
your own controlled conditions:  see the --test-dir argument to R CMD 
check.  You could also make tests in the standard directory conditional 
on environment variables.

[2] You can find out details of the current machine using the .Platform 
and version variables, and make tests conditional on particular values 
of those.  I'd recommend limiting such tests to your own personal runs 
(using [1]) or not including saved output, because CRAN will run the 
tests on multiple platforms.

Duncan Murdoch


From m@rtin@morg@n @ending from ro@wellp@rk@org  Thu May 17 18:45:29 2018
From: m@rtin@morg@n @ending from ro@wellp@rk@org (Martin Morgan)
Date: Thu, 17 May 2018 12:45:29 -0400
Subject: [R-pkg-devel] why can't we importFrom 'methods' ?
In-Reply-To: <5c36e575-76ba-21eb-1080-85bc95c5e3e2@gmail.com>
References: <1526572277.30655.212.camel@braverock.com>
 <5c36e575-76ba-21eb-1080-85bc95c5e3e2@gmail.com>
Message-ID: <d94f0d9a-dc90-5a84-0508-3fe6ed333659@roswellpark.org>



On 05/17/2018 11:59 AM, Duncan Murdoch wrote:
> On 17/05/2018 11:51 AM, Brian G. Peterson wrote:
>> newer versions of R require importFrom for functions from 'stats',
>> 'graphics' and many other packages that used to be assumed to be on the
>> search path and thus available.
>>
>> 'methods' continues to have seemingly different treatment.
>>
>> If you try to use importFrom to import a single function (in this case
>> 'hasArg') from methods, you receive an ERROR from R CMD check
>>
>> ???? Namespace dependency not required : 'methods'
> 
> That message usually means that you didn't list 'methods' in the Imports 
> clause in DESCRIPTION.

Is there a better way of formulating the message?

   Packages used in the NAMESPACE file must also be in the Imports: or 
Depends: field of the DESCRIPTION file; missing packages : 'methods'

   Package(s) not present in Imports: or Depends: of DESCRIPTION :
       'methods'

    ... ?

Martin Morgan

> 
> Duncan Murdoch
> 
>>
>> but without the importFrom, you see a number of NOTE's
>>
>> ???? no visible global function definition for 'hasArg'
>>
>> I don't want to import all of 'methods', as I only need one function.
>>
>> What am I doing wrong?
>>
>> Regards,
>>
>> Brian
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


This email message may contain legally privileged and/or...{{dropped:2}}


From m@echler @ending from @t@t@m@th@ethz@ch  Thu May 17 19:14:32 2018
From: m@echler @ending from @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 17 May 2018 19:14:32 +0200
Subject: [R-pkg-devel] mvrnorm, eigen, tests, and R CMD check
In-Reply-To: <3fd7d8b3-79f4-dbdf-bb76-47ea4189ba40@gmail.com>
References: <CAHJ+2V+VyRoU-mV=BsQAm3A+z22bXC9za7kPPn3h_OZZm6BS2Q@mail.gmail.com>
 <23293.42348.701851.577848@stat.math.ethz.ch>
 <3fd7d8b3-79f4-dbdf-bb76-47ea4189ba40@gmail.com>
Message-ID: <23293.47224.695109.1340@stat.math.ethz.ch>

>>>>> Duncan Murdoch ....
>>>>>     on Thu, 17 May 2018 12:13:01 -0400 writes:

    > On 17/05/2018 11:53 AM, Martin Maechler wrote:
    >>>>>>> Kevin Coombes ... on Thu, 17
    >>>>>>> May 2018 11:21:23 -0400 writes:

    >>    [..................]

    >> > [3] Should the documentation (man page) for "eigen" or
    >> > "mvrnorm" include a warning that the results can change
    >> > from machine to machine (or between things like 32-bit and
    >> > 64-bit R on the same machine) because of difference in
    >> > linear algebra modules? (Possibly including the statement 
    >> > that "set.seed" won't save you.)

    >> The problem is that most (young?) people do not read help
    >> pages anymore.
    >> 
    >> help(eigen) has contained the following text for years,
    >> and in spite of your good analysis of the problem you
    >> seem to not have noticed the last semi-paragraph:
    >> 
    >>> Value:
    >>> 
    >>> The spectral decomposition of ?x? is returned as a list
    >>> with components
    >>> 
    >>> values: a vector containing the p eigenvalues of ?x?,
    >>> sorted in _decreasing_ order, according to ?Mod(values)?
    >>> in the asymmetric case when they might be complex (even
    >>> for real matrices).  For real asymmetric matrices the
    >>> vector will be complex only if complex conjugate pairs
    >>> of eigenvalues are detected.
    >>> 
    >>> vectors: either a p * p matrix whose columns contain the
    >>> eigenvectors of ?x?, or ?NULL? if ?only.values? is
    >>> ?TRUE?.  The vectors are normalized to unit length.
    >>> 
    >>> Recall that the eigenvectors are only defined up to a
    >>> constant: even when the length is specified they are
    >>> still only defined up to a scalar of modulus one (the
    >>> sign for real matrices).
    >> 
    >> It's not a warning but a "recall that" .. maybe because
    >> the author already assumed that only thorough users would
    >> read that and for them it would be a recall of something
    >> they'd have learned *and* not entirely forgotten since
    >> ;-)
    >> 

    > I don't think you're really being fair here: the text in
    > ?eigen doesn't make clear that eigenvector values are not
    > reproducible even within the same version of R, and
    > there's nothing in ?mvrnorm to suggest it doesn't give
    > reproducible results.

Ok, I'm sorry ... I definitely did not want to be unfair.

I've always thought the remark in eigen was sufficient,  but I'm
probably wrong and we should add text explaining that it
practically means that eigenvectors are only defined up to sign
switches (in the real case) and hence results depend on the
underlying {Lapack + BLAS} libraries and therefore are platform
dependent.

Even further, we could consider (optionally, by default FALSE)
using defining a deterministic scheme for postprocessing the current
output of eigen such that at least for the good cases where all
eigenspaces are 1-dimensional, the postprocessing would result
in reproducible signs, by e.g., ensuring the first non-zero
entry of each eigenvector to be positive.

MASS::mvrnorm()  and  mvtnorm::rmvnorm() both use "eigen",
whereas mvtnorm::rmvnorm()  *does* have  method = "chol" which
AFAIK does not suffer from such problems.

OTOH, the help page of MASS::mvrnorm() mentions the Cholesky
alternative but prefers eigen for better stability (without
saying more).

In spite of that, my personal recommendation would be to use

  mvtnorm::rmvnorm(.., method = "chol")

{ or the 2-3 lines of R code to the same thing without an extra package,
  just using rnorm(), chol() and simple matrix operations }

because in simulations I'd expect the var-cov matrix  Sigma to
be far enough away from singular for chol() to be stable.

Martin


From Ro@@@Boyl@n @ending from uc@f@edu  Thu May 17 20:13:37 2018
From: Ro@@@Boyl@n @ending from uc@f@edu (Ross Boylan)
Date: Thu, 17 May 2018 11:13:37 -0700
Subject: [R-pkg-devel] how to document method arguments that aren't in the
 signature
Message-ID: <20180517181337.GA29221@ross-node1.boylan.psg.net>

What's the best way to document an S4 method that takes arguments
beyond those in the signature?

Consider
setGeneric("sim", function(simP, dataP, ...) standardGeneric("sim"))

setMethod("sim", signature="SimParameters", function(simP, dataP) {
    lapply(seq(simP at NIter), function(i) do.one(simP, dataP, i))
 }
)

For which promptClass generates
\section{Methods}{
  \describe{
    \item{sim}{\code{signature(simP = "SimParameters")}: ... }
	 }
}

I turned that into
    \item{sim}{\code{signature(simP = "SimParameters", datap)}: ... }

which seems a little funny since the real signature only mentions one
argument. R CMD check does not complain about it, however. Since omitted
arguments are effectively class "ANY", one alternative is 
    \item{sim}{\code{signature(simP = "SimParameters", datap = "ANY")}: ... }

I also considered adding the non-signature arguments in the text.

Finally, although datap is formally untyped, there are requirements on
what kind of object it can be.  In practice it is only likely to be
from one of two classes, but I want to allow the users to make their own.

Thanks for your thoughts.

Ross Boylan

P.S. And what would I do if a particular method actually used an
argument in ..., e.g.,
setMethod("sim", signature="SimParameters", function(simP, dataP, bar,
...)
?
How would one document the bar argument?


From wdunl@p @ending from tibco@com  Thu May 17 20:28:50 2018
From: wdunl@p @ending from tibco@com (William Dunlap)
Date: Thu, 17 May 2018 11:28:50 -0700
Subject: [R-pkg-devel] mvrnorm, eigen, tests, and R CMD check
In-Reply-To: <23293.47224.695109.1340@stat.math.ethz.ch>
References: <CAHJ+2V+VyRoU-mV=BsQAm3A+z22bXC9za7kPPn3h_OZZm6BS2Q@mail.gmail.com>
 <23293.42348.701851.577848@stat.math.ethz.ch>
 <3fd7d8b3-79f4-dbdf-bb76-47ea4189ba40@gmail.com>
 <23293.47224.695109.1340@stat.math.ethz.ch>
Message-ID: <CAF8bMcb1LMrk3b0djs+hjemSyeSFYcmM8u70K2kbkmMmCCe6=A@mail.gmail.com>

Your explanation needs to be a bit more general in the case of identical
eigenvalues - each distinct eigenvalue has an associated subspace, whose
dimension is the number repeats of that eigenvalue and the eigenvectors for
that eigenvalue are an orthonormal basis for that subspace.  (With no
repeated eigenvalues this gives your 'unique up to sign'.)

E.g., for the following 5x5 matrix with two eigenvalues of 1 and two of 0

  > x <- tcrossprod( cbind(c(1,0,0,0,1),c(0,1,0,0,1),c(0,0,1,0,1)) )
  > x
       [,1] [,2] [,3] [,4] [,5]
  [1,]    1    0    0    0    1
  [2,]    0    1    0    0    1
  [3,]    0    0    1    0    1
  [4,]    0    0    0    0    0
  [5,]    1    1    1    0    3
the following give valid but different (by more than sign) eigen vectors

e1 <- structure(list(values = c(4, 1, 0.999999999999999, 0,
-2.22044607159862e-16
), vectors = structure(c(-0.288675134594813, -0.288675134594813,
-0.288675134594813, 0, -0.866025403784439, 0, 0.707106781186547,
-0.707106781186547, 0, 0, 0.816496580927726, -0.408248290463863,
-0.408248290463863, 0, -6.10622663543836e-16, 0, 0, 0, -1, 0,
-0.5, -0.5, -0.5, 0, 0.5), .Dim = c(5L, 5L))), .Names = c("values",
"vectors"), class = "eigen")
e2 <- structure(list(values = c(4, 1, 1, 0, -2.29037708937563e-16),
    vectors = structure(c(0.288675134594813, 0.288675134594813,
    0.288675134594813, 0, 0.866025403784438, -0.784437556312061,
    0.588415847923579, 0.196021708388481, 0, 4.46410900710223e-17,
    0.22654886208902, 0.566068420404321, -0.79261728249334, 0,
    -1.11244069540181e-16, 0, 0, 0, -1, 0, -0.5, -0.5, -0.5,
    0, 0.5), .Dim = c(5L, 5L))), .Names = c("values", "vectors"
), class = "eigen")

I.e.,
> all.equal(crossprod(e1$vectors), diag(5), tol=0)
[1] "Mean relative difference: 1.407255e-15"
> all.equal(crossprod(e2$vectors), diag(5), tol=0)
[1] "Mean relative difference: 3.856478e-15"
> all.equal(e1$vectors %*% diag(e1$values) %*% t(e1$vectors), x, tol=0)
[1] "Mean relative difference: 1.110223e-15"
> all.equal(e2$vectors %*% diag(e2$values) %*% t(e2$vectors), x, tol=0)
[1] "Mean relative difference: 9.069735e-16"

> e1$vectors
           [,1]       [,2]          [,3] [,4] [,5]
[1,] -0.2886751  0.0000000  8.164966e-01    0 -0.5
[2,] -0.2886751  0.7071068 -4.082483e-01    0 -0.5
[3,] -0.2886751 -0.7071068 -4.082483e-01    0 -0.5
[4,]  0.0000000  0.0000000  0.000000e+00   -1  0.0
[5,] -0.8660254  0.0000000 -6.106227e-16    0  0.5
> e2$vectors
          [,1]          [,2]          [,3] [,4] [,5]
[1,] 0.2886751 -7.844376e-01  2.265489e-01    0 -0.5
[2,] 0.2886751  5.884158e-01  5.660684e-01    0 -0.5
[3,] 0.2886751  1.960217e-01 -7.926173e-01    0 -0.5
[4,] 0.0000000  0.000000e+00  0.000000e+00   -1  0.0
[5,] 0.8660254  4.464109e-17 -1.112441e-16    0  0.5





Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Thu, May 17, 2018 at 10:14 AM, Martin Maechler <
maechler at stat.math.ethz.ch> wrote:

> >>>>> Duncan Murdoch ....
> >>>>>     on Thu, 17 May 2018 12:13:01 -0400 writes:
>
>     > On 17/05/2018 11:53 AM, Martin Maechler wrote:
>     >>>>>>> Kevin Coombes ... on Thu, 17
>     >>>>>>> May 2018 11:21:23 -0400 writes:
>
>     >>    [..................]
>
>     >> > [3] Should the documentation (man page) for "eigen" or
>     >> > "mvrnorm" include a warning that the results can change
>     >> > from machine to machine (or between things like 32-bit and
>     >> > 64-bit R on the same machine) because of difference in
>     >> > linear algebra modules? (Possibly including the statement
>     >> > that "set.seed" won't save you.)
>
>     >> The problem is that most (young?) people do not read help
>     >> pages anymore.
>     >>
>     >> help(eigen) has contained the following text for years,
>     >> and in spite of your good analysis of the problem you
>     >> seem to not have noticed the last semi-paragraph:
>     >>
>     >>> Value:
>     >>>
>     >>> The spectral decomposition of ?x? is returned as a list
>     >>> with components
>     >>>
>     >>> values: a vector containing the p eigenvalues of ?x?,
>     >>> sorted in _decreasing_ order, according to ?Mod(values)?
>     >>> in the asymmetric case when they might be complex (even
>     >>> for real matrices).  For real asymmetric matrices the
>     >>> vector will be complex only if complex conjugate pairs
>     >>> of eigenvalues are detected.
>     >>>
>     >>> vectors: either a p * p matrix whose columns contain the
>     >>> eigenvectors of ?x?, or ?NULL? if ?only.values? is
>     >>> ?TRUE?.  The vectors are normalized to unit length.
>     >>>
>     >>> Recall that the eigenvectors are only defined up to a
>     >>> constant: even when the length is specified they are
>     >>> still only defined up to a scalar of modulus one (the
>     >>> sign for real matrices).
>     >>
>     >> It's not a warning but a "recall that" .. maybe because
>     >> the author already assumed that only thorough users would
>     >> read that and for them it would be a recall of something
>     >> they'd have learned *and* not entirely forgotten since
>     >> ;-)
>     >>
>
>     > I don't think you're really being fair here: the text in
>     > ?eigen doesn't make clear that eigenvector values are not
>     > reproducible even within the same version of R, and
>     > there's nothing in ?mvrnorm to suggest it doesn't give
>     > reproducible results.
>
> Ok, I'm sorry ... I definitely did not want to be unfair.
>
> I've always thought the remark in eigen was sufficient,  but I'm
> probably wrong and we should add text explaining that it
> practically means that eigenvectors are only defined up to sign
> switches (in the real case) and hence results depend on the
> underlying {Lapack + BLAS} libraries and therefore are platform
> dependent.
>
> Even further, we could consider (optionally, by default FALSE)
> using defining a deterministic scheme for postprocessing the current
> output of eigen such that at least for the good cases where all
> eigenspaces are 1-dimensional, the postprocessing would result
> in reproducible signs, by e.g., ensuring the first non-zero
> entry of each eigenvector to be positive.
>
> MASS::mvrnorm()  and  mvtnorm::rmvnorm() both use "eigen",
> whereas mvtnorm::rmvnorm()  *does* have  method = "chol" which
> AFAIK does not suffer from such problems.
>
> OTOH, the help page of MASS::mvrnorm() mentions the Cholesky
> alternative but prefers eigen for better stability (without
> saying more).
>
> In spite of that, my personal recommendation would be to use
>
>   mvtnorm::rmvnorm(.., method = "chol")
>
> { or the 2-3 lines of R code to the same thing without an extra package,
>   just using rnorm(), chol() and simple matrix operations }
>
> because in simulations I'd expect the var-cov matrix  Sigma to
> be far enough away from singular for chol() to be stable.
>
> Martin
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From kevin@r@coombe@ @ending from gm@il@com  Thu May 17 21:30:19 2018
From: kevin@r@coombe@ @ending from gm@il@com (Kevin Coombes)
Date: Thu, 17 May 2018 15:30:19 -0400
Subject: [R-pkg-devel] mvrnorm, eigen, tests, and R CMD check
In-Reply-To: <CAF8bMcb1LMrk3b0djs+hjemSyeSFYcmM8u70K2kbkmMmCCe6=A@mail.gmail.com>
References: <CAHJ+2V+VyRoU-mV=BsQAm3A+z22bXC9za7kPPn3h_OZZm6BS2Q@mail.gmail.com>
 <23293.42348.701851.577848@stat.math.ethz.ch>
 <3fd7d8b3-79f4-dbdf-bb76-47ea4189ba40@gmail.com>
 <23293.47224.695109.1340@stat.math.ethz.ch>
 <CAF8bMcb1LMrk3b0djs+hjemSyeSFYcmM8u70K2kbkmMmCCe6=A@mail.gmail.com>
Message-ID: <CAHJ+2VJEkn8EP937kStHMwDVespU3R8T9WN18FUbgJP0EW3j+w@mail.gmail.com>

Yes; I'm pretty sure that it is exactly the repeated eigenvalues that are
the issue. The matrices I am using are all nonsingular, and the various
algorithms have no problem computing the eigenvalues correctly (up to
numerical errors that I can bound and thus account for on tests by rounding
appropriately). But an eigenvalue of multiplicity M has an M-dimensional
eigenspace with no preferred basis. So, any M-dimensional  (unitary) change
of basis is permitted. That's what give rise to the lack of reproducibility
across architectures. The choice of basis appears to use different
heuristics on 32-bit windows than on 64-bit Windows or Linux machines. As a
result, I can't include the tests I'd like as part of a CRAN submission.

On Thu, May 17, 2018, 2:29 PM William Dunlap <wdunlap at tibco.com> wrote:

> Your explanation needs to be a bit more general in the case of identical
> eigenvalues - each distinct eigenvalue has an associated subspace, whose
> dimension is the number repeats of that eigenvalue and the eigenvectors for
> that eigenvalue are an orthonormal basis for that subspace.  (With no
> repeated eigenvalues this gives your 'unique up to sign'.)
>
> E.g., for the following 5x5 matrix with two eigenvalues of 1 and two of 0
>
>   > x <- tcrossprod( cbind(c(1,0,0,0,1),c(0,1,0,0,1),c(0,0,1,0,1)) )
>   > x
>        [,1] [,2] [,3] [,4] [,5]
>   [1,]    1    0    0    0    1
>   [2,]    0    1    0    0    1
>   [3,]    0    0    1    0    1
>   [4,]    0    0    0    0    0
>   [5,]    1    1    1    0    3
> the following give valid but different (by more than sign) eigen vectors
>
> e1 <- structure(list(values = c(4, 1, 0.999999999999999, 0,
> -2.22044607159862e-16
> ), vectors = structure(c(-0.288675134594813, -0.288675134594813,
> -0.288675134594813, 0, -0.866025403784439, 0, 0.707106781186547,
> -0.707106781186547, 0, 0, 0.816496580927726, -0.408248290463863,
> -0.408248290463863, 0, -6.10622663543836e-16, 0, 0, 0, -1, 0,
> -0.5, -0.5, -0.5, 0, 0.5), .Dim = c(5L, 5L))), .Names = c("values",
> "vectors"), class = "eigen")
> e2 <- structure(list(values = c(4, 1, 1, 0, -2.29037708937563e-16),
>     vectors = structure(c(0.288675134594813, 0.288675134594813,
>     0.288675134594813, 0, 0.866025403784438, -0.784437556312061,
>     0.588415847923579, 0.196021708388481, 0, 4.46410900710223e-17,
>     0.22654886208902, 0.566068420404321, -0.79261728249334, 0,
>     -1.11244069540181e-16, 0, 0, 0, -1, 0, -0.5, -0.5, -0.5,
>     0, 0.5), .Dim = c(5L, 5L))), .Names = c("values", "vectors"
> ), class = "eigen")
>
> I.e.,
> > all.equal(crossprod(e1$vectors), diag(5), tol=0)
> [1] "Mean relative difference: 1.407255e-15"
> > all.equal(crossprod(e2$vectors), diag(5), tol=0)
> [1] "Mean relative difference: 3.856478e-15"
> > all.equal(e1$vectors %*% diag(e1$values) %*% t(e1$vectors), x, tol=0)
> [1] "Mean relative difference: 1.110223e-15"
> > all.equal(e2$vectors %*% diag(e2$values) %*% t(e2$vectors), x, tol=0)
> [1] "Mean relative difference: 9.069735e-16"
>
> > e1$vectors
>            [,1]       [,2]          [,3] [,4] [,5]
> [1,] -0.2886751  0.0000000  8.164966e-01    0 -0.5
> [2,] -0.2886751  0.7071068 -4.082483e-01    0 -0.5
> [3,] -0.2886751 -0.7071068 -4.082483e-01    0 -0.5
> [4,]  0.0000000  0.0000000  0.000000e+00   -1  0.0
> [5,] -0.8660254  0.0000000 -6.106227e-16    0  0.5
> > e2$vectors
>           [,1]          [,2]          [,3] [,4] [,5]
> [1,] 0.2886751 -7.844376e-01  2.265489e-01    0 -0.5
> [2,] 0.2886751  5.884158e-01  5.660684e-01    0 -0.5
> [3,] 0.2886751  1.960217e-01 -7.926173e-01    0 -0.5
> [4,] 0.0000000  0.000000e+00  0.000000e+00   -1  0.0
> [5,] 0.8660254  4.464109e-17 -1.112441e-16    0  0.5
>
>
>
>
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
> On Thu, May 17, 2018 at 10:14 AM, Martin Maechler <
> maechler at stat.math.ethz.ch> wrote:
>
>> >>>>> Duncan Murdoch ....
>> >>>>>     on Thu, 17 May 2018 12:13:01 -0400 writes:
>>
>>     > On 17/05/2018 11:53 AM, Martin Maechler wrote:
>>     >>>>>>> Kevin Coombes ... on Thu, 17
>>     >>>>>>> May 2018 11:21:23 -0400 writes:
>>
>>     >>    [..................]
>>
>>     >> > [3] Should the documentation (man page) for "eigen" or
>>     >> > "mvrnorm" include a warning that the results can change
>>     >> > from machine to machine (or between things like 32-bit and
>>     >> > 64-bit R on the same machine) because of difference in
>>     >> > linear algebra modules? (Possibly including the statement
>>     >> > that "set.seed" won't save you.)
>>
>>     >> The problem is that most (young?) people do not read help
>>     >> pages anymore.
>>     >>
>>     >> help(eigen) has contained the following text for years,
>>     >> and in spite of your good analysis of the problem you
>>     >> seem to not have noticed the last semi-paragraph:
>>     >>
>>     >>> Value:
>>     >>>
>>     >>> The spectral decomposition of ?x? is returned as a list
>>     >>> with components
>>     >>>
>>     >>> values: a vector containing the p eigenvalues of ?x?,
>>     >>> sorted in _decreasing_ order, according to ?Mod(values)?
>>     >>> in the asymmetric case when they might be complex (even
>>     >>> for real matrices).  For real asymmetric matrices the
>>     >>> vector will be complex only if complex conjugate pairs
>>     >>> of eigenvalues are detected.
>>     >>>
>>     >>> vectors: either a p * p matrix whose columns contain the
>>     >>> eigenvectors of ?x?, or ?NULL? if ?only.values? is
>>     >>> ?TRUE?.  The vectors are normalized to unit length.
>>     >>>
>>     >>> Recall that the eigenvectors are only defined up to a
>>     >>> constant: even when the length is specified they are
>>     >>> still only defined up to a scalar of modulus one (the
>>     >>> sign for real matrices).
>>     >>
>>     >> It's not a warning but a "recall that" .. maybe because
>>     >> the author already assumed that only thorough users would
>>     >> read that and for them it would be a recall of something
>>     >> they'd have learned *and* not entirely forgotten since
>>     >> ;-)
>>     >>
>>
>>     > I don't think you're really being fair here: the text in
>>     > ?eigen doesn't make clear that eigenvector values are not
>>     > reproducible even within the same version of R, and
>>     > there's nothing in ?mvrnorm to suggest it doesn't give
>>     > reproducible results.
>>
>> Ok, I'm sorry ... I definitely did not want to be unfair.
>>
>> I've always thought the remark in eigen was sufficient,  but I'm
>> probably wrong and we should add text explaining that it
>> practically means that eigenvectors are only defined up to sign
>> switches (in the real case) and hence results depend on the
>> underlying {Lapack + BLAS} libraries and therefore are platform
>> dependent.
>>
>> Even further, we could consider (optionally, by default FALSE)
>> using defining a deterministic scheme for postprocessing the current
>> output of eigen such that at least for the good cases where all
>> eigenspaces are 1-dimensional, the postprocessing would result
>> in reproducible signs, by e.g., ensuring the first non-zero
>> entry of each eigenvector to be positive.
>>
>> MASS::mvrnorm()  and  mvtnorm::rmvnorm() both use "eigen",
>> whereas mvtnorm::rmvnorm()  *does* have  method = "chol" which
>> AFAIK does not suffer from such problems.
>>
>> OTOH, the help page of MASS::mvrnorm() mentions the Cholesky
>> alternative but prefers eigen for better stability (without
>> saying more).
>>
>> In spite of that, my personal recommendation would be to use
>>
>>   mvtnorm::rmvnorm(.., method = "chol")
>>
>> { or the 2-3 lines of R code to the same thing without an extra package,
>>   just using rnorm(), chol() and simple matrix operations }
>>
>> because in simulations I'd expect the var-cov matrix  Sigma to
>> be far enough away from singular for chol() to be stable.
>>
>> Martin
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>

	[[alternative HTML version deleted]]


From bbolker @ending from gm@il@com  Thu May 17 21:55:27 2018
From: bbolker @ending from gm@il@com (Ben Bolker)
Date: Thu, 17 May 2018 15:55:27 -0400
Subject: [R-pkg-devel] mvrnorm, eigen, tests, and R CMD check
In-Reply-To: <CAHJ+2VJEkn8EP937kStHMwDVespU3R8T9WN18FUbgJP0EW3j+w@mail.gmail.com>
References: <CAHJ+2V+VyRoU-mV=BsQAm3A+z22bXC9za7kPPn3h_OZZm6BS2Q@mail.gmail.com>
 <23293.42348.701851.577848@stat.math.ethz.ch>
 <3fd7d8b3-79f4-dbdf-bb76-47ea4189ba40@gmail.com>
 <23293.47224.695109.1340@stat.math.ethz.ch>
 <CAF8bMcb1LMrk3b0djs+hjemSyeSFYcmM8u70K2kbkmMmCCe6=A@mail.gmail.com>
 <CAHJ+2VJEkn8EP937kStHMwDVespU3R8T9WN18FUbgJP0EW3j+w@mail.gmail.com>
Message-ID: <CABghstSuDWnYMvzg1DiDKthik6ag1HMGqt5fujOfoEZoS9y_ZA@mail.gmail.com>

There have been various comments in this thread (by me, and I think
Duncan Murdoch) about how you can identify the platform you're running
on (some combination of .Platform and/or R.Version()) and use it to
write conditional statements so that your tests will only be compared
with reference values that were generated on the same platform ... did
those get through?  Did they make sense?

On Thu, May 17, 2018 at 3:30 PM, Kevin Coombes
<kevin.r.coombes at gmail.com> wrote:
> Yes; I'm pretty sure that it is exactly the repeated eigenvalues that are
> the issue. The matrices I am using are all nonsingular, and the various
> algorithms have no problem computing the eigenvalues correctly (up to
> numerical errors that I can bound and thus account for on tests by rounding
> appropriately). But an eigenvalue of multiplicity M has an M-dimensional
> eigenspace with no preferred basis. So, any M-dimensional  (unitary) change
> of basis is permitted. That's what give rise to the lack of reproducibility
> across architectures. The choice of basis appears to use different
> heuristics on 32-bit windows than on 64-bit Windows or Linux machines. As a
> result, I can't include the tests I'd like as part of a CRAN submission.
>
> On Thu, May 17, 2018, 2:29 PM William Dunlap <wdunlap at tibco.com> wrote:
>
>> Your explanation needs to be a bit more general in the case of identical
>> eigenvalues - each distinct eigenvalue has an associated subspace, whose
>> dimension is the number repeats of that eigenvalue and the eigenvectors for
>> that eigenvalue are an orthonormal basis for that subspace.  (With no
>> repeated eigenvalues this gives your 'unique up to sign'.)
>>
>> E.g., for the following 5x5 matrix with two eigenvalues of 1 and two of 0
>>
>>   > x <- tcrossprod( cbind(c(1,0,0,0,1),c(0,1,0,0,1),c(0,0,1,0,1)) )
>>   > x
>>        [,1] [,2] [,3] [,4] [,5]
>>   [1,]    1    0    0    0    1
>>   [2,]    0    1    0    0    1
>>   [3,]    0    0    1    0    1
>>   [4,]    0    0    0    0    0
>>   [5,]    1    1    1    0    3
>> the following give valid but different (by more than sign) eigen vectors
>>
>> e1 <- structure(list(values = c(4, 1, 0.999999999999999, 0,
>> -2.22044607159862e-16
>> ), vectors = structure(c(-0.288675134594813, -0.288675134594813,
>> -0.288675134594813, 0, -0.866025403784439, 0, 0.707106781186547,
>> -0.707106781186547, 0, 0, 0.816496580927726, -0.408248290463863,
>> -0.408248290463863, 0, -6.10622663543836e-16, 0, 0, 0, -1, 0,
>> -0.5, -0.5, -0.5, 0, 0.5), .Dim = c(5L, 5L))), .Names = c("values",
>> "vectors"), class = "eigen")
>> e2 <- structure(list(values = c(4, 1, 1, 0, -2.29037708937563e-16),
>>     vectors = structure(c(0.288675134594813, 0.288675134594813,
>>     0.288675134594813, 0, 0.866025403784438, -0.784437556312061,
>>     0.588415847923579, 0.196021708388481, 0, 4.46410900710223e-17,
>>     0.22654886208902, 0.566068420404321, -0.79261728249334, 0,
>>     -1.11244069540181e-16, 0, 0, 0, -1, 0, -0.5, -0.5, -0.5,
>>     0, 0.5), .Dim = c(5L, 5L))), .Names = c("values", "vectors"
>> ), class = "eigen")
>>
>> I.e.,
>> > all.equal(crossprod(e1$vectors), diag(5), tol=0)
>> [1] "Mean relative difference: 1.407255e-15"
>> > all.equal(crossprod(e2$vectors), diag(5), tol=0)
>> [1] "Mean relative difference: 3.856478e-15"
>> > all.equal(e1$vectors %*% diag(e1$values) %*% t(e1$vectors), x, tol=0)
>> [1] "Mean relative difference: 1.110223e-15"
>> > all.equal(e2$vectors %*% diag(e2$values) %*% t(e2$vectors), x, tol=0)
>> [1] "Mean relative difference: 9.069735e-16"
>>
>> > e1$vectors
>>            [,1]       [,2]          [,3] [,4] [,5]
>> [1,] -0.2886751  0.0000000  8.164966e-01    0 -0.5
>> [2,] -0.2886751  0.7071068 -4.082483e-01    0 -0.5
>> [3,] -0.2886751 -0.7071068 -4.082483e-01    0 -0.5
>> [4,]  0.0000000  0.0000000  0.000000e+00   -1  0.0
>> [5,] -0.8660254  0.0000000 -6.106227e-16    0  0.5
>> > e2$vectors
>>           [,1]          [,2]          [,3] [,4] [,5]
>> [1,] 0.2886751 -7.844376e-01  2.265489e-01    0 -0.5
>> [2,] 0.2886751  5.884158e-01  5.660684e-01    0 -0.5
>> [3,] 0.2886751  1.960217e-01 -7.926173e-01    0 -0.5
>> [4,] 0.0000000  0.000000e+00  0.000000e+00   -1  0.0
>> [5,] 0.8660254  4.464109e-17 -1.112441e-16    0  0.5
>>
>>
>>
>>
>>
>> Bill Dunlap
>> TIBCO Software
>> wdunlap tibco.com
>>
>> On Thu, May 17, 2018 at 10:14 AM, Martin Maechler <
>> maechler at stat.math.ethz.ch> wrote:
>>
>>> >>>>> Duncan Murdoch ....
>>> >>>>>     on Thu, 17 May 2018 12:13:01 -0400 writes:
>>>
>>>     > On 17/05/2018 11:53 AM, Martin Maechler wrote:
>>>     >>>>>>> Kevin Coombes ... on Thu, 17
>>>     >>>>>>> May 2018 11:21:23 -0400 writes:
>>>
>>>     >>    [..................]
>>>
>>>     >> > [3] Should the documentation (man page) for "eigen" or
>>>     >> > "mvrnorm" include a warning that the results can change
>>>     >> > from machine to machine (or between things like 32-bit and
>>>     >> > 64-bit R on the same machine) because of difference in
>>>     >> > linear algebra modules? (Possibly including the statement
>>>     >> > that "set.seed" won't save you.)
>>>
>>>     >> The problem is that most (young?) people do not read help
>>>     >> pages anymore.
>>>     >>
>>>     >> help(eigen) has contained the following text for years,
>>>     >> and in spite of your good analysis of the problem you
>>>     >> seem to not have noticed the last semi-paragraph:
>>>     >>
>>>     >>> Value:
>>>     >>>
>>>     >>> The spectral decomposition of ?x? is returned as a list
>>>     >>> with components
>>>     >>>
>>>     >>> values: a vector containing the p eigenvalues of ?x?,
>>>     >>> sorted in _decreasing_ order, according to ?Mod(values)?
>>>     >>> in the asymmetric case when they might be complex (even
>>>     >>> for real matrices).  For real asymmetric matrices the
>>>     >>> vector will be complex only if complex conjugate pairs
>>>     >>> of eigenvalues are detected.
>>>     >>>
>>>     >>> vectors: either a p * p matrix whose columns contain the
>>>     >>> eigenvectors of ?x?, or ?NULL? if ?only.values? is
>>>     >>> ?TRUE?.  The vectors are normalized to unit length.
>>>     >>>
>>>     >>> Recall that the eigenvectors are only defined up to a
>>>     >>> constant: even when the length is specified they are
>>>     >>> still only defined up to a scalar of modulus one (the
>>>     >>> sign for real matrices).
>>>     >>
>>>     >> It's not a warning but a "recall that" .. maybe because
>>>     >> the author already assumed that only thorough users would
>>>     >> read that and for them it would be a recall of something
>>>     >> they'd have learned *and* not entirely forgotten since
>>>     >> ;-)
>>>     >>
>>>
>>>     > I don't think you're really being fair here: the text in
>>>     > ?eigen doesn't make clear that eigenvector values are not
>>>     > reproducible even within the same version of R, and
>>>     > there's nothing in ?mvrnorm to suggest it doesn't give
>>>     > reproducible results.
>>>
>>> Ok, I'm sorry ... I definitely did not want to be unfair.
>>>
>>> I've always thought the remark in eigen was sufficient,  but I'm
>>> probably wrong and we should add text explaining that it
>>> practically means that eigenvectors are only defined up to sign
>>> switches (in the real case) and hence results depend on the
>>> underlying {Lapack + BLAS} libraries and therefore are platform
>>> dependent.
>>>
>>> Even further, we could consider (optionally, by default FALSE)
>>> using defining a deterministic scheme for postprocessing the current
>>> output of eigen such that at least for the good cases where all
>>> eigenspaces are 1-dimensional, the postprocessing would result
>>> in reproducible signs, by e.g., ensuring the first non-zero
>>> entry of each eigenvector to be positive.
>>>
>>> MASS::mvrnorm()  and  mvtnorm::rmvnorm() both use "eigen",
>>> whereas mvtnorm::rmvnorm()  *does* have  method = "chol" which
>>> AFAIK does not suffer from such problems.
>>>
>>> OTOH, the help page of MASS::mvrnorm() mentions the Cholesky
>>> alternative but prefers eigen for better stability (without
>>> saying more).
>>>
>>> In spite of that, my personal recommendation would be to use
>>>
>>>   mvtnorm::rmvnorm(.., method = "chol")
>>>
>>> { or the 2-3 lines of R code to the same thing without an extra package,
>>>   just using rnorm(), chol() and simple matrix operations }
>>>
>>> because in simulations I'd expect the var-cov matrix  Sigma to
>>> be far enough away from singular for chol() to be stable.
>>>
>>> Martin
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From kevin@r@coombe@ @ending from gm@il@com  Thu May 17 23:06:19 2018
From: kevin@r@coombe@ @ending from gm@il@com (Kevin Coombes)
Date: Thu, 17 May 2018 17:06:19 -0400
Subject: [R-pkg-devel] mvrnorm, eigen, tests, and R CMD check
In-Reply-To: <CABghstSuDWnYMvzg1DiDKthik6ag1HMGqt5fujOfoEZoS9y_ZA@mail.gmail.com>
References: <CAHJ+2V+VyRoU-mV=BsQAm3A+z22bXC9za7kPPn3h_OZZm6BS2Q@mail.gmail.com>
 <23293.42348.701851.577848@stat.math.ethz.ch>
 <3fd7d8b3-79f4-dbdf-bb76-47ea4189ba40@gmail.com>
 <23293.47224.695109.1340@stat.math.ethz.ch>
 <CAF8bMcb1LMrk3b0djs+hjemSyeSFYcmM8u70K2kbkmMmCCe6=A@mail.gmail.com>
 <CAHJ+2VJEkn8EP937kStHMwDVespU3R8T9WN18FUbgJP0EW3j+w@mail.gmail.com>
 <CABghstSuDWnYMvzg1DiDKthik6ag1HMGqt5fujOfoEZoS9y_ZA@mail.gmail.com>
Message-ID: <CAHJ+2V+mmmhzuQmkMDVJiSPhsVvY1SV-wYxYiWqG4EYYidv2yA@mail.gmail.com>

Yes; but I have been running around all day without time to sit down and
try them. The suggestions make sense, and I'm looking forward to
implementing them.

On Thu, May 17, 2018, 3:55 PM Ben Bolker <bbolker at gmail.com> wrote:

> There have been various comments in this thread (by me, and I think
> Duncan Murdoch) about how you can identify the platform you're running
> on (some combination of .Platform and/or R.Version()) and use it to
> write conditional statements so that your tests will only be compared
> with reference values that were generated on the same platform ... did
> those get through?  Did they make sense?
>
> On Thu, May 17, 2018 at 3:30 PM, Kevin Coombes
> <kevin.r.coombes at gmail.com> wrote:
> > Yes; I'm pretty sure that it is exactly the repeated eigenvalues that are
> > the issue. The matrices I am using are all nonsingular, and the various
> > algorithms have no problem computing the eigenvalues correctly (up to
> > numerical errors that I can bound and thus account for on tests by
> rounding
> > appropriately). But an eigenvalue of multiplicity M has an M-dimensional
> > eigenspace with no preferred basis. So, any M-dimensional  (unitary)
> change
> > of basis is permitted. That's what give rise to the lack of
> reproducibility
> > across architectures. The choice of basis appears to use different
> > heuristics on 32-bit windows than on 64-bit Windows or Linux machines.
> As a
> > result, I can't include the tests I'd like as part of a CRAN submission.
> >
> > On Thu, May 17, 2018, 2:29 PM William Dunlap <wdunlap at tibco.com> wrote:
> >
> >> Your explanation needs to be a bit more general in the case of identical
> >> eigenvalues - each distinct eigenvalue has an associated subspace, whose
> >> dimension is the number repeats of that eigenvalue and the eigenvectors
> for
> >> that eigenvalue are an orthonormal basis for that subspace.  (With no
> >> repeated eigenvalues this gives your 'unique up to sign'.)
> >>
> >> E.g., for the following 5x5 matrix with two eigenvalues of 1 and two of
> 0
> >>
> >>   > x <- tcrossprod( cbind(c(1,0,0,0,1),c(0,1,0,0,1),c(0,0,1,0,1)) )
> >>   > x
> >>        [,1] [,2] [,3] [,4] [,5]
> >>   [1,]    1    0    0    0    1
> >>   [2,]    0    1    0    0    1
> >>   [3,]    0    0    1    0    1
> >>   [4,]    0    0    0    0    0
> >>   [5,]    1    1    1    0    3
> >> the following give valid but different (by more than sign) eigen vectors
> >>
> >> e1 <- structure(list(values = c(4, 1, 0.999999999999999, 0,
> >> -2.22044607159862e-16
> >> ), vectors = structure(c(-0.288675134594813, -0.288675134594813,
> >> -0.288675134594813, 0, -0.866025403784439, 0, 0.707106781186547,
> >> -0.707106781186547, 0, 0, 0.816496580927726, -0.408248290463863,
> >> -0.408248290463863, 0, -6.10622663543836e-16, 0, 0, 0, -1, 0,
> >> -0.5, -0.5, -0.5, 0, 0.5), .Dim = c(5L, 5L))), .Names = c("values",
> >> "vectors"), class = "eigen")
> >> e2 <- structure(list(values = c(4, 1, 1, 0, -2.29037708937563e-16),
> >>     vectors = structure(c(0.288675134594813, 0.288675134594813,
> >>     0.288675134594813, 0, 0.866025403784438, -0.784437556312061,
> >>     0.588415847923579, 0.196021708388481, 0, 4.46410900710223e-17,
> >>     0.22654886208902, 0.566068420404321, -0.79261728249334, 0,
> >>     -1.11244069540181e-16, 0, 0, 0, -1, 0, -0.5, -0.5, -0.5,
> >>     0, 0.5), .Dim = c(5L, 5L))), .Names = c("values", "vectors"
> >> ), class = "eigen")
> >>
> >> I.e.,
> >> > all.equal(crossprod(e1$vectors), diag(5), tol=0)
> >> [1] "Mean relative difference: 1.407255e-15"
> >> > all.equal(crossprod(e2$vectors), diag(5), tol=0)
> >> [1] "Mean relative difference: 3.856478e-15"
> >> > all.equal(e1$vectors %*% diag(e1$values) %*% t(e1$vectors), x, tol=0)
> >> [1] "Mean relative difference: 1.110223e-15"
> >> > all.equal(e2$vectors %*% diag(e2$values) %*% t(e2$vectors), x, tol=0)
> >> [1] "Mean relative difference: 9.069735e-16"
> >>
> >> > e1$vectors
> >>            [,1]       [,2]          [,3] [,4] [,5]
> >> [1,] -0.2886751  0.0000000  8.164966e-01    0 -0.5
> >> [2,] -0.2886751  0.7071068 -4.082483e-01    0 -0.5
> >> [3,] -0.2886751 -0.7071068 -4.082483e-01    0 -0.5
> >> [4,]  0.0000000  0.0000000  0.000000e+00   -1  0.0
> >> [5,] -0.8660254  0.0000000 -6.106227e-16    0  0.5
> >> > e2$vectors
> >>           [,1]          [,2]          [,3] [,4] [,5]
> >> [1,] 0.2886751 -7.844376e-01  2.265489e-01    0 -0.5
> >> [2,] 0.2886751  5.884158e-01  5.660684e-01    0 -0.5
> >> [3,] 0.2886751  1.960217e-01 -7.926173e-01    0 -0.5
> >> [4,] 0.0000000  0.000000e+00  0.000000e+00   -1  0.0
> >> [5,] 0.8660254  4.464109e-17 -1.112441e-16    0  0.5
> >>
> >>
> >>
> >>
> >>
> >> Bill Dunlap
> >> TIBCO Software
> >> wdunlap tibco.com
> >>
> >> On Thu, May 17, 2018 at 10:14 AM, Martin Maechler <
> >> maechler at stat.math.ethz.ch> wrote:
> >>
> >>> >>>>> Duncan Murdoch ....
> >>> >>>>>     on Thu, 17 May 2018 12:13:01 -0400 writes:
> >>>
> >>>     > On 17/05/2018 11:53 AM, Martin Maechler wrote:
> >>>     >>>>>>> Kevin Coombes ... on Thu, 17
> >>>     >>>>>>> May 2018 11:21:23 -0400 writes:
> >>>
> >>>     >>    [..................]
> >>>
> >>>     >> > [3] Should the documentation (man page) for "eigen" or
> >>>     >> > "mvrnorm" include a warning that the results can change
> >>>     >> > from machine to machine (or between things like 32-bit and
> >>>     >> > 64-bit R on the same machine) because of difference in
> >>>     >> > linear algebra modules? (Possibly including the statement
> >>>     >> > that "set.seed" won't save you.)
> >>>
> >>>     >> The problem is that most (young?) people do not read help
> >>>     >> pages anymore.
> >>>     >>
> >>>     >> help(eigen) has contained the following text for years,
> >>>     >> and in spite of your good analysis of the problem you
> >>>     >> seem to not have noticed the last semi-paragraph:
> >>>     >>
> >>>     >>> Value:
> >>>     >>>
> >>>     >>> The spectral decomposition of ?x? is returned as a list
> >>>     >>> with components
> >>>     >>>
> >>>     >>> values: a vector containing the p eigenvalues of ?x?,
> >>>     >>> sorted in _decreasing_ order, according to ?Mod(values)?
> >>>     >>> in the asymmetric case when they might be complex (even
> >>>     >>> for real matrices).  For real asymmetric matrices the
> >>>     >>> vector will be complex only if complex conjugate pairs
> >>>     >>> of eigenvalues are detected.
> >>>     >>>
> >>>     >>> vectors: either a p * p matrix whose columns contain the
> >>>     >>> eigenvectors of ?x?, or ?NULL? if ?only.values? is
> >>>     >>> ?TRUE?.  The vectors are normalized to unit length.
> >>>     >>>
> >>>     >>> Recall that the eigenvectors are only defined up to a
> >>>     >>> constant: even when the length is specified they are
> >>>     >>> still only defined up to a scalar of modulus one (the
> >>>     >>> sign for real matrices).
> >>>     >>
> >>>     >> It's not a warning but a "recall that" .. maybe because
> >>>     >> the author already assumed that only thorough users would
> >>>     >> read that and for them it would be a recall of something
> >>>     >> they'd have learned *and* not entirely forgotten since
> >>>     >> ;-)
> >>>     >>
> >>>
> >>>     > I don't think you're really being fair here: the text in
> >>>     > ?eigen doesn't make clear that eigenvector values are not
> >>>     > reproducible even within the same version of R, and
> >>>     > there's nothing in ?mvrnorm to suggest it doesn't give
> >>>     > reproducible results.
> >>>
> >>> Ok, I'm sorry ... I definitely did not want to be unfair.
> >>>
> >>> I've always thought the remark in eigen was sufficient,  but I'm
> >>> probably wrong and we should add text explaining that it
> >>> practically means that eigenvectors are only defined up to sign
> >>> switches (in the real case) and hence results depend on the
> >>> underlying {Lapack + BLAS} libraries and therefore are platform
> >>> dependent.
> >>>
> >>> Even further, we could consider (optionally, by default FALSE)
> >>> using defining a deterministic scheme for postprocessing the current
> >>> output of eigen such that at least for the good cases where all
> >>> eigenspaces are 1-dimensional, the postprocessing would result
> >>> in reproducible signs, by e.g., ensuring the first non-zero
> >>> entry of each eigenvector to be positive.
> >>>
> >>> MASS::mvrnorm()  and  mvtnorm::rmvnorm() both use "eigen",
> >>> whereas mvtnorm::rmvnorm()  *does* have  method = "chol" which
> >>> AFAIK does not suffer from such problems.
> >>>
> >>> OTOH, the help page of MASS::mvrnorm() mentions the Cholesky
> >>> alternative but prefers eigen for better stability (without
> >>> saying more).
> >>>
> >>> In spite of that, my personal recommendation would be to use
> >>>
> >>>   mvtnorm::rmvnorm(.., method = "chol")
> >>>
> >>> { or the 2-3 lines of R code to the same thing without an extra
> package,
> >>>   just using rnorm(), chol() and simple matrix operations }
> >>>
> >>> because in simulations I'd expect the var-cov matrix  Sigma to
> >>> be far enough away from singular for chol() to be stable.
> >>>
> >>> Martin
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>
> >>
> >>
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From wdunl@p @ending from tibco@com  Thu May 17 23:28:50 2018
From: wdunl@p @ending from tibco@com (William Dunlap)
Date: Thu, 17 May 2018 14:28:50 -0700
Subject: [R-pkg-devel] mvrnorm, eigen, tests, and R CMD check
In-Reply-To: <CABghstSuDWnYMvzg1DiDKthik6ag1HMGqt5fujOfoEZoS9y_ZA@mail.gmail.com>
References: <CAHJ+2V+VyRoU-mV=BsQAm3A+z22bXC9za7kPPn3h_OZZm6BS2Q@mail.gmail.com>
 <23293.42348.701851.577848@stat.math.ethz.ch>
 <3fd7d8b3-79f4-dbdf-bb76-47ea4189ba40@gmail.com>
 <23293.47224.695109.1340@stat.math.ethz.ch>
 <CAF8bMcb1LMrk3b0djs+hjemSyeSFYcmM8u70K2kbkmMmCCe6=A@mail.gmail.com>
 <CAHJ+2VJEkn8EP937kStHMwDVespU3R8T9WN18FUbgJP0EW3j+w@mail.gmail.com>
 <CABghstSuDWnYMvzg1DiDKthik6ag1HMGqt5fujOfoEZoS9y_ZA@mail.gmail.com>
Message-ID: <CAF8bMcavdQdT6HVurzK3_4thzZ8ThEh=Dv9_pFKEwW1a0eHh9A@mail.gmail.com>

But why would you want to tie your tests to specific platforms, if
mathematically all those results are equivalent?  You could compare the
orthogonal complements from a full rank matrix (say the identity) to each
expected eigenspace.  E.g., for the example I gave above, where e2 and e1
gave different basis for 2 eigenspaces:

> all.equal(tol=0,
+   residuals(lm.fit(y=diag(5), e1$vectors[,1,drop=FALSE])),
+   residuals(lm.fit(y=diag(5), e2$vectors[,1,drop=FALSE])))
[1] "Mean relative difference: 4.791489e-16"
> all.equal(tol=0,
+   residuals(lm.fit(y=diag(5), e1$vectors[,2:3,drop=FALSE])),
+   residuals(lm.fit(y=diag(5), e2$vectors[,2:3,drop=FALSE])))
[1] "Mean relative difference: 1.469377e-15"
> all.equal(tol=0,
+   residuals(lm.fit(y=diag(5), e1$vectors[,4:5,drop=FALSE])),
+   residuals(lm.fit(y=diag(5), e2$vectors[,4:5,drop=FALSE])))
[1] TRUE


Bill Dunlap
TIBCO Software
wdunlap tibco.com

On Thu, May 17, 2018 at 12:55 PM, Ben Bolker <bbolker at gmail.com> wrote:

> There have been various comments in this thread (by me, and I think
> Duncan Murdoch) about how you can identify the platform you're running
> on (some combination of .Platform and/or R.Version()) and use it to
> write conditional statements so that your tests will only be compared
> with reference values that were generated on the same platform ... did
> those get through?  Did they make sense?
>
> On Thu, May 17, 2018 at 3:30 PM, Kevin Coombes
> <kevin.r.coombes at gmail.com> wrote:
> > Yes; I'm pretty sure that it is exactly the repeated eigenvalues that are
> > the issue. The matrices I am using are all nonsingular, and the various
> > algorithms have no problem computing the eigenvalues correctly (up to
> > numerical errors that I can bound and thus account for on tests by
> rounding
> > appropriately). But an eigenvalue of multiplicity M has an M-dimensional
> > eigenspace with no preferred basis. So, any M-dimensional  (unitary)
> change
> > of basis is permitted. That's what give rise to the lack of
> reproducibility
> > across architectures. The choice of basis appears to use different
> > heuristics on 32-bit windows than on 64-bit Windows or Linux machines.
> As a
> > result, I can't include the tests I'd like as part of a CRAN submission.
> >
> > On Thu, May 17, 2018, 2:29 PM William Dunlap <wdunlap at tibco.com> wrote:
> >
> >> Your explanation needs to be a bit more general in the case of identical
> >> eigenvalues - each distinct eigenvalue has an associated subspace, whose
> >> dimension is the number repeats of that eigenvalue and the eigenvectors
> for
> >> that eigenvalue are an orthonormal basis for that subspace.  (With no
> >> repeated eigenvalues this gives your 'unique up to sign'.)
> >>
> >> E.g., for the following 5x5 matrix with two eigenvalues of 1 and two of
> 0
> >>
> >>   > x <- tcrossprod( cbind(c(1,0,0,0,1),c(0,1,0,0,1),c(0,0,1,0,1)) )
> >>   > x
> >>        [,1] [,2] [,3] [,4] [,5]
> >>   [1,]    1    0    0    0    1
> >>   [2,]    0    1    0    0    1
> >>   [3,]    0    0    1    0    1
> >>   [4,]    0    0    0    0    0
> >>   [5,]    1    1    1    0    3
> >> the following give valid but different (by more than sign) eigen vectors
> >>
> >> e1 <- structure(list(values = c(4, 1, 0.999999999999999, 0,
> >> -2.22044607159862e-16
> >> ), vectors = structure(c(-0.288675134594813, -0.288675134594813,
> >> -0.288675134594813, 0, -0.866025403784439, 0, 0.707106781186547,
> >> -0.707106781186547, 0, 0, 0.816496580927726, -0.408248290463863,
> >> -0.408248290463863, 0, -6.10622663543836e-16, 0, 0, 0, -1, 0,
> >> -0.5, -0.5, -0.5, 0, 0.5), .Dim = c(5L, 5L))), .Names = c("values",
> >> "vectors"), class = "eigen")
> >> e2 <- structure(list(values = c(4, 1, 1, 0, -2.29037708937563e-16),
> >>     vectors = structure(c(0.288675134594813, 0.288675134594813,
> >>     0.288675134594813, 0, 0.866025403784438, -0.784437556312061,
> >>     0.588415847923579, 0.196021708388481, 0, 4.46410900710223e-17,
> >>     0.22654886208902, 0.566068420404321, -0.79261728249334, 0,
> >>     -1.11244069540181e-16, 0, 0, 0, -1, 0, -0.5, -0.5, -0.5,
> >>     0, 0.5), .Dim = c(5L, 5L))), .Names = c("values", "vectors"
> >> ), class = "eigen")
> >>
> >> I.e.,
> >> > all.equal(crossprod(e1$vectors), diag(5), tol=0)
> >> [1] "Mean relative difference: 1.407255e-15"
> >> > all.equal(crossprod(e2$vectors), diag(5), tol=0)
> >> [1] "Mean relative difference: 3.856478e-15"
> >> > all.equal(e1$vectors %*% diag(e1$values) %*% t(e1$vectors), x, tol=0)
> >> [1] "Mean relative difference: 1.110223e-15"
> >> > all.equal(e2$vectors %*% diag(e2$values) %*% t(e2$vectors), x, tol=0)
> >> [1] "Mean relative difference: 9.069735e-16"
> >>
> >> > e1$vectors
> >>            [,1]       [,2]          [,3] [,4] [,5]
> >> [1,] -0.2886751  0.0000000  8.164966e-01    0 -0.5
> >> [2,] -0.2886751  0.7071068 -4.082483e-01    0 -0.5
> >> [3,] -0.2886751 -0.7071068 -4.082483e-01    0 -0.5
> >> [4,]  0.0000000  0.0000000  0.000000e+00   -1  0.0
> >> [5,] -0.8660254  0.0000000 -6.106227e-16    0  0.5
> >> > e2$vectors
> >>           [,1]          [,2]          [,3] [,4] [,5]
> >> [1,] 0.2886751 -7.844376e-01  2.265489e-01    0 -0.5
> >> [2,] 0.2886751  5.884158e-01  5.660684e-01    0 -0.5
> >> [3,] 0.2886751  1.960217e-01 -7.926173e-01    0 -0.5
> >> [4,] 0.0000000  0.000000e+00  0.000000e+00   -1  0.0
> >> [5,] 0.8660254  4.464109e-17 -1.112441e-16    0  0.5
> >>
> >>
> >>
> >>
> >>
> >> Bill Dunlap
> >> TIBCO Software
> >> wdunlap tibco.com
> >>
> >> On Thu, May 17, 2018 at 10:14 AM, Martin Maechler <
> >> maechler at stat.math.ethz.ch> wrote:
> >>
> >>> >>>>> Duncan Murdoch ....
> >>> >>>>>     on Thu, 17 May 2018 12:13:01 -0400 writes:
> >>>
> >>>     > On 17/05/2018 11:53 AM, Martin Maechler wrote:
> >>>     >>>>>>> Kevin Coombes ... on Thu, 17
> >>>     >>>>>>> May 2018 11:21:23 -0400 writes:
> >>>
> >>>     >>    [..................]
> >>>
> >>>     >> > [3] Should the documentation (man page) for "eigen" or
> >>>     >> > "mvrnorm" include a warning that the results can change
> >>>     >> > from machine to machine (or between things like 32-bit and
> >>>     >> > 64-bit R on the same machine) because of difference in
> >>>     >> > linear algebra modules? (Possibly including the statement
> >>>     >> > that "set.seed" won't save you.)
> >>>
> >>>     >> The problem is that most (young?) people do not read help
> >>>     >> pages anymore.
> >>>     >>
> >>>     >> help(eigen) has contained the following text for years,
> >>>     >> and in spite of your good analysis of the problem you
> >>>     >> seem to not have noticed the last semi-paragraph:
> >>>     >>
> >>>     >>> Value:
> >>>     >>>
> >>>     >>> The spectral decomposition of ?x? is returned as a list
> >>>     >>> with components
> >>>     >>>
> >>>     >>> values: a vector containing the p eigenvalues of ?x?,
> >>>     >>> sorted in _decreasing_ order, according to ?Mod(values)?
> >>>     >>> in the asymmetric case when they might be complex (even
> >>>     >>> for real matrices).  For real asymmetric matrices the
> >>>     >>> vector will be complex only if complex conjugate pairs
> >>>     >>> of eigenvalues are detected.
> >>>     >>>
> >>>     >>> vectors: either a p * p matrix whose columns contain the
> >>>     >>> eigenvectors of ?x?, or ?NULL? if ?only.values? is
> >>>     >>> ?TRUE?.  The vectors are normalized to unit length.
> >>>     >>>
> >>>     >>> Recall that the eigenvectors are only defined up to a
> >>>     >>> constant: even when the length is specified they are
> >>>     >>> still only defined up to a scalar of modulus one (the
> >>>     >>> sign for real matrices).
> >>>     >>
> >>>     >> It's not a warning but a "recall that" .. maybe because
> >>>     >> the author already assumed that only thorough users would
> >>>     >> read that and for them it would be a recall of something
> >>>     >> they'd have learned *and* not entirely forgotten since
> >>>     >> ;-)
> >>>     >>
> >>>
> >>>     > I don't think you're really being fair here: the text in
> >>>     > ?eigen doesn't make clear that eigenvector values are not
> >>>     > reproducible even within the same version of R, and
> >>>     > there's nothing in ?mvrnorm to suggest it doesn't give
> >>>     > reproducible results.
> >>>
> >>> Ok, I'm sorry ... I definitely did not want to be unfair.
> >>>
> >>> I've always thought the remark in eigen was sufficient,  but I'm
> >>> probably wrong and we should add text explaining that it
> >>> practically means that eigenvectors are only defined up to sign
> >>> switches (in the real case) and hence results depend on the
> >>> underlying {Lapack + BLAS} libraries and therefore are platform
> >>> dependent.
> >>>
> >>> Even further, we could consider (optionally, by default FALSE)
> >>> using defining a deterministic scheme for postprocessing the current
> >>> output of eigen such that at least for the good cases where all
> >>> eigenspaces are 1-dimensional, the postprocessing would result
> >>> in reproducible signs, by e.g., ensuring the first non-zero
> >>> entry of each eigenvector to be positive.
> >>>
> >>> MASS::mvrnorm()  and  mvtnorm::rmvnorm() both use "eigen",
> >>> whereas mvtnorm::rmvnorm()  *does* have  method = "chol" which
> >>> AFAIK does not suffer from such problems.
> >>>
> >>> OTOH, the help page of MASS::mvrnorm() mentions the Cholesky
> >>> alternative but prefers eigen for better stability (without
> >>> saying more).
> >>>
> >>> In spite of that, my personal recommendation would be to use
> >>>
> >>>   mvtnorm::rmvnorm(.., method = "chol")
> >>>
> >>> { or the 2-3 lines of R code to the same thing without an extra
> package,
> >>>   just using rnorm(), chol() and simple matrix operations }
> >>>
> >>> because in simulations I'd expect the var-cov matrix  Sigma to
> >>> be far enough away from singular for chol() to be stable.
> >>>
> >>> Martin
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>
> >>
> >>
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From m@echler @ending from @t@t@m@th@ethz@ch  Fri May 18 10:20:04 2018
From: m@echler @ending from @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 18 May 2018 10:20:04 +0200
Subject: [R-pkg-devel] mvrnorm, eigen, tests, and R CMD check
In-Reply-To: <CAF8bMcb1LMrk3b0djs+hjemSyeSFYcmM8u70K2kbkmMmCCe6=A@mail.gmail.com>
References: <CAHJ+2V+VyRoU-mV=BsQAm3A+z22bXC9za7kPPn3h_OZZm6BS2Q@mail.gmail.com>
 <23293.42348.701851.577848@stat.math.ethz.ch>
 <3fd7d8b3-79f4-dbdf-bb76-47ea4189ba40@gmail.com>
 <23293.47224.695109.1340@stat.math.ethz.ch>
 <CAF8bMcb1LMrk3b0djs+hjemSyeSFYcmM8u70K2kbkmMmCCe6=A@mail.gmail.com>
Message-ID: <23294.36020.142442.43143@stat.math.ethz.ch>

>>>>> William Dunlap 
>>>>>     on Thu, 17 May 2018 11:28:50 -0700 writes:

    > Your explanation needs to be a bit more general in the
    > case of identical eigenvalues - each distinct eigenvalue
    > has an associated subspace, whose dimension is the number
    > repeats of that eigenvalue and the eigenvectors for that
    > eigenvalue are an orthonormal basis for that subspace.
    > (With no repeated eigenvalues this gives your 'unique up
    > to sign'.)

Thank you, Bill, notably for the concrete example of non-trivial
eigenspaces (per eigenvector). 
Note I did say

  "... such that at least for the good cases where all eigenspaces
   are 1-dimensional, ..."

knowing well that only in that case it "is easy".
I have a gut feeling but may be wrong that such simplistic post
processing may also help (to get cross-platform reproducibility)
in the case of MASS::mvrnorm() where repeated eigenvalues will
be common in practice.

Martin


From f@muvie @ending from gm@il@com  Fri May 18 10:50:18 2018
From: f@muvie @ending from gm@il@com (=?UTF-8?Q?Facundo_Mu=c3=b1oz?=)
Date: Fri, 18 May 2018 10:50:18 +0200
Subject: [R-pkg-devel] mvrnorm, eigen, tests, and R CMD check
In-Reply-To: <CAHJ+2VJEkn8EP937kStHMwDVespU3R8T9WN18FUbgJP0EW3j+w@mail.gmail.com>
References: <CAHJ+2V+VyRoU-mV=BsQAm3A+z22bXC9za7kPPn3h_OZZm6BS2Q@mail.gmail.com>
 <23293.42348.701851.577848@stat.math.ethz.ch>
 <3fd7d8b3-79f4-dbdf-bb76-47ea4189ba40@gmail.com>
 <23293.47224.695109.1340@stat.math.ethz.ch>
 <CAF8bMcb1LMrk3b0djs+hjemSyeSFYcmM8u70K2kbkmMmCCe6=A@mail.gmail.com>
 <CAHJ+2VJEkn8EP937kStHMwDVespU3R8T9WN18FUbgJP0EW3j+w@mail.gmail.com>
Message-ID: <18da00df-209e-633f-86a3-3db3b8c95c53@gmail.com>

In my opinion, the underlying problem is that you are checking whether
the test reproduces exactly your pre-computed solution, while there
actually exist other valid answers.

I believe you want to check whether the sub-spaces are the same, not
whether the bases are identical (which can depend on platform, linear
algebra library, etc.)

?acu.-



On 05/17/2018 09:30 PM, Kevin Coombes wrote:
> Yes; I'm pretty sure that it is exactly the repeated eigenvalues that are
> the issue. The matrices I am using are all nonsingular, and the various
> algorithms have no problem computing the eigenvalues correctly (up to
> numerical errors that I can bound and thus account for on tests by rounding
> appropriately). But an eigenvalue of multiplicity M has an M-dimensional
> eigenspace with no preferred basis. So, any M-dimensional  (unitary) change
> of basis is permitted. That's what give rise to the lack of reproducibility
> across architectures. The choice of basis appears to use different
> heuristics on 32-bit windows than on 64-bit Windows or Linux machines. As a
> result, I can't include the tests I'd like as part of a CRAN submission.
>
> On Thu, May 17, 2018, 2:29 PM William Dunlap <wdunlap at tibco.com> wrote:
>
>> Your explanation needs to be a bit more general in the case of identical
>> eigenvalues - each distinct eigenvalue has an associated subspace, whose
>> dimension is the number repeats of that eigenvalue and the eigenvectors for
>> that eigenvalue are an orthonormal basis for that subspace.  (With no
>> repeated eigenvalues this gives your 'unique up to sign'.)
>>
>> E.g., for the following 5x5 matrix with two eigenvalues of 1 and two of 0
>>
>>   > x <- tcrossprod( cbind(c(1,0,0,0,1),c(0,1,0,0,1),c(0,0,1,0,1)) )
>>   > x
>>        [,1] [,2] [,3] [,4] [,5]
>>   [1,]    1    0    0    0    1
>>   [2,]    0    1    0    0    1
>>   [3,]    0    0    1    0    1
>>   [4,]    0    0    0    0    0
>>   [5,]    1    1    1    0    3
>> the following give valid but different (by more than sign) eigen vectors
>>
>> e1 <- structure(list(values = c(4, 1, 0.999999999999999, 0,
>> -2.22044607159862e-16
>> ), vectors = structure(c(-0.288675134594813, -0.288675134594813,
>> -0.288675134594813, 0, -0.866025403784439, 0, 0.707106781186547,
>> -0.707106781186547, 0, 0, 0.816496580927726, -0.408248290463863,
>> -0.408248290463863, 0, -6.10622663543836e-16, 0, 0, 0, -1, 0,
>> -0.5, -0.5, -0.5, 0, 0.5), .Dim = c(5L, 5L))), .Names = c("values",
>> "vectors"), class = "eigen")
>> e2 <- structure(list(values = c(4, 1, 1, 0, -2.29037708937563e-16),
>>     vectors = structure(c(0.288675134594813, 0.288675134594813,
>>     0.288675134594813, 0, 0.866025403784438, -0.784437556312061,
>>     0.588415847923579, 0.196021708388481, 0, 4.46410900710223e-17,
>>     0.22654886208902, 0.566068420404321, -0.79261728249334, 0,
>>     -1.11244069540181e-16, 0, 0, 0, -1, 0, -0.5, -0.5, -0.5,
>>     0, 0.5), .Dim = c(5L, 5L))), .Names = c("values", "vectors"
>> ), class = "eigen")
>>
>> I.e.,
>>> all.equal(crossprod(e1$vectors), diag(5), tol=0)
>> [1] "Mean relative difference: 1.407255e-15"
>>> all.equal(crossprod(e2$vectors), diag(5), tol=0)
>> [1] "Mean relative difference: 3.856478e-15"
>>> all.equal(e1$vectors %*% diag(e1$values) %*% t(e1$vectors), x, tol=0)
>> [1] "Mean relative difference: 1.110223e-15"
>>> all.equal(e2$vectors %*% diag(e2$values) %*% t(e2$vectors), x, tol=0)
>> [1] "Mean relative difference: 9.069735e-16"
>>
>>> e1$vectors
>>            [,1]       [,2]          [,3] [,4] [,5]
>> [1,] -0.2886751  0.0000000  8.164966e-01    0 -0.5
>> [2,] -0.2886751  0.7071068 -4.082483e-01    0 -0.5
>> [3,] -0.2886751 -0.7071068 -4.082483e-01    0 -0.5
>> [4,]  0.0000000  0.0000000  0.000000e+00   -1  0.0
>> [5,] -0.8660254  0.0000000 -6.106227e-16    0  0.5
>>> e2$vectors
>>           [,1]          [,2]          [,3] [,4] [,5]
>> [1,] 0.2886751 -7.844376e-01  2.265489e-01    0 -0.5
>> [2,] 0.2886751  5.884158e-01  5.660684e-01    0 -0.5
>> [3,] 0.2886751  1.960217e-01 -7.926173e-01    0 -0.5
>> [4,] 0.0000000  0.000000e+00  0.000000e+00   -1  0.0
>> [5,] 0.8660254  4.464109e-17 -1.112441e-16    0  0.5
>>
>>
>>
>>
>>
>> Bill Dunlap
>> TIBCO Software
>> wdunlap tibco.com
>>
>> On Thu, May 17, 2018 at 10:14 AM, Martin Maechler <
>> maechler at stat.math.ethz.ch> wrote:
>>
>>>>>>>> Duncan Murdoch ....
>>>>>>>>     on Thu, 17 May 2018 12:13:01 -0400 writes:
>>>     > On 17/05/2018 11:53 AM, Martin Maechler wrote:
>>>     >>>>>>> Kevin Coombes ... on Thu, 17
>>>     >>>>>>> May 2018 11:21:23 -0400 writes:
>>>
>>>     >>    [..................]
>>>
>>>     >> > [3] Should the documentation (man page) for "eigen" or
>>>     >> > "mvrnorm" include a warning that the results can change
>>>     >> > from machine to machine (or between things like 32-bit and
>>>     >> > 64-bit R on the same machine) because of difference in
>>>     >> > linear algebra modules? (Possibly including the statement
>>>     >> > that "set.seed" won't save you.)
>>>
>>>     >> The problem is that most (young?) people do not read help
>>>     >> pages anymore.
>>>     >>
>>>     >> help(eigen) has contained the following text for years,
>>>     >> and in spite of your good analysis of the problem you
>>>     >> seem to not have noticed the last semi-paragraph:
>>>     >>
>>>     >>> Value:
>>>     >>>
>>>     >>> The spectral decomposition of ?x? is returned as a list
>>>     >>> with components
>>>     >>>
>>>     >>> values: a vector containing the p eigenvalues of ?x?,
>>>     >>> sorted in _decreasing_ order, according to ?Mod(values)?
>>>     >>> in the asymmetric case when they might be complex (even
>>>     >>> for real matrices).  For real asymmetric matrices the
>>>     >>> vector will be complex only if complex conjugate pairs
>>>     >>> of eigenvalues are detected.
>>>     >>>
>>>     >>> vectors: either a p * p matrix whose columns contain the
>>>     >>> eigenvectors of ?x?, or ?NULL? if ?only.values? is
>>>     >>> ?TRUE?.  The vectors are normalized to unit length.
>>>     >>>
>>>     >>> Recall that the eigenvectors are only defined up to a
>>>     >>> constant: even when the length is specified they are
>>>     >>> still only defined up to a scalar of modulus one (the
>>>     >>> sign for real matrices).
>>>     >>
>>>     >> It's not a warning but a "recall that" .. maybe because
>>>     >> the author already assumed that only thorough users would
>>>     >> read that and for them it would be a recall of something
>>>     >> they'd have learned *and* not entirely forgotten since
>>>     >> ;-)
>>>     >>
>>>
>>>     > I don't think you're really being fair here: the text in
>>>     > ?eigen doesn't make clear that eigenvector values are not
>>>     > reproducible even within the same version of R, and
>>>     > there's nothing in ?mvrnorm to suggest it doesn't give
>>>     > reproducible results.
>>>
>>> Ok, I'm sorry ... I definitely did not want to be unfair.
>>>
>>> I've always thought the remark in eigen was sufficient,  but I'm
>>> probably wrong and we should add text explaining that it
>>> practically means that eigenvectors are only defined up to sign
>>> switches (in the real case) and hence results depend on the
>>> underlying {Lapack + BLAS} libraries and therefore are platform
>>> dependent.
>>>
>>> Even further, we could consider (optionally, by default FALSE)
>>> using defining a deterministic scheme for postprocessing the current
>>> output of eigen such that at least for the good cases where all
>>> eigenspaces are 1-dimensional, the postprocessing would result
>>> in reproducible signs, by e.g., ensuring the first non-zero
>>> entry of each eigenvector to be positive.
>>>
>>> MASS::mvrnorm()  and  mvtnorm::rmvnorm() both use "eigen",
>>> whereas mvtnorm::rmvnorm()  *does* have  method = "chol" which
>>> AFAIK does not suffer from such problems.
>>>
>>> OTOH, the help page of MASS::mvrnorm() mentions the Cholesky
>>> alternative but prefers eigen for better stability (without
>>> saying more).
>>>
>>> In spite of that, my personal recommendation would be to use
>>>
>>>   mvtnorm::rmvnorm(.., method = "chol")
>>>
>>> { or the 2-3 lines of R code to the same thing without an extra package,
>>>   just using rnorm(), chol() and simple matrix operations }
>>>
>>> because in simulations I'd expect the var-cov matrix  Sigma to
>>> be far enough away from singular for chol() to be stable.
>>>
>>> Martin
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From j@ri@ok@@nen @ending from oulu@fi  Fri May 18 08:48:35 2018
From: j@ri@ok@@nen @ending from oulu@fi (Jari Oksanen)
Date: Fri, 18 May 2018 06:48:35 +0000
Subject: [R-pkg-devel] mvrnorm, eigen, tests, and R CMD check
In-Reply-To: <CAHJ+2V+mmmhzuQmkMDVJiSPhsVvY1SV-wYxYiWqG4EYYidv2yA@mail.gmail.com>
References: <CAHJ+2V+VyRoU-mV=BsQAm3A+z22bXC9za7kPPn3h_OZZm6BS2Q@mail.gmail.com>
 <23293.42348.701851.577848@stat.math.ethz.ch>
 <3fd7d8b3-79f4-dbdf-bb76-47ea4189ba40@gmail.com>
 <23293.47224.695109.1340@stat.math.ethz.ch>
 <CAF8bMcb1LMrk3b0djs+hjemSyeSFYcmM8u70K2kbkmMmCCe6=A@mail.gmail.com>
 <CAHJ+2VJEkn8EP937kStHMwDVespU3R8T9WN18FUbgJP0EW3j+w@mail.gmail.com>
 <CABghstSuDWnYMvzg1DiDKthik6ag1HMGqt5fujOfoEZoS9y_ZA@mail.gmail.com>
 <CAHJ+2V+mmmhzuQmkMDVJiSPhsVvY1SV-wYxYiWqG4EYYidv2yA@mail.gmail.com>
Message-ID: <FEA79044-EF39-49CC-9AF2-32C7228B5820@oulu.fi>

I am afraid that these suggestions may not work. There are more choices than Win32 and Win64, including several flavours of BLAS/Lapack which probably are involved if you evaluate eigenvalues, and also differences in hardware, compilers and phase of the moon.  If there are several equal eigenvalues, any solution of axes is arbitrary and it can be made stable for testing only by chance. If you have M equal eigenvalues, you should try to find a test that the M-dimensional (sub)space is approximately correct irrespective of random orientation of axes in this subspace.

Cheers, Jari Oksanen

On 18 May 2018, at 00:06 am, Kevin Coombes <kevin.r.coombes at gmail.com<mailto:kevin.r.coombes at gmail.com>> wrote:

Yes; but I have been running around all day without time to sit down and
try them. The suggestions make sense, and I'm looking forward to
implementing them.

On Thu, May 17, 2018, 3:55 PM Ben Bolker <bbolker at gmail.com<mailto:bbolker at gmail.com>> wrote:

There have been various comments in this thread (by me, and I think
Duncan Murdoch) about how you can identify the platform you're running
on (some combination of .Platform and/or R.Version()) and use it to
write conditional statements so that your tests will only be compared
with reference values that were generated on the same platform ... did
those get through?  Did they make sense?

On Thu, May 17, 2018 at 3:30 PM, Kevin Coombes
<kevin.r.coombes at gmail.com<mailto:kevin.r.coombes at gmail.com>> wrote:
Yes; I'm pretty sure that it is exactly the repeated eigenvalues that are
the issue. The matrices I am using are all nonsingular, and the various
algorithms have no problem computing the eigenvalues correctly (up to
numerical errors that I can bound and thus account for on tests by
rounding
appropriately). But an eigenvalue of multiplicity M has an M-dimensional
eigenspace with no preferred basis. So, any M-dimensional  (unitary)
change
of basis is permitted. That's what give rise to the lack of
reproducibility
across architectures. The choice of basis appears to use different
heuristics on 32-bit windows than on 64-bit Windows or Linux machines.
As a
result, I can't include the tests I'd like as part of a CRAN submission.

On Thu, May 17, 2018, 2:29 PM William Dunlap <wdunlap at tibco.com<mailto:wdunlap at tibco.com>> wrote:

Your explanation needs to be a bit more general in the case of identical
eigenvalues - each distinct eigenvalue has an associated subspace, whose
dimension is the number repeats of that eigenvalue and the eigenvectors
for
that eigenvalue are an orthonormal basis for that subspace.  (With no
repeated eigenvalues this gives your 'unique up to sign'.)

E.g., for the following 5x5 matrix with two eigenvalues of 1 and two of
0

x <- tcrossprod( cbind(c(1,0,0,0,1),c(0,1,0,0,1),c(0,0,1,0,1)) )
x
      [,1] [,2] [,3] [,4] [,5]
 [1,]    1    0    0    0    1
 [2,]    0    1    0    0    1
 [3,]    0    0    1    0    1
 [4,]    0    0    0    0    0
 [5,]    1    1    1    0    3
the following give valid but different (by more than sign) eigen vectors

e1 <- structure(list(values = c(4, 1, 0.999999999999999, 0,
-2.22044607159862e-16
), vectors = structure(c(-0.288675134594813, -0.288675134594813,
-0.288675134594813, 0, -0.866025403784439, 0, 0.707106781186547,
-0.707106781186547, 0, 0, 0.816496580927726, -0.408248290463863,
-0.408248290463863, 0, -6.10622663543836e-16, 0, 0, 0, -1, 0,
-0.5, -0.5, -0.5, 0, 0.5), .Dim = c(5L, 5L))), .Names = c("values",
"vectors"), class = "eigen")
e2 <- structure(list(values = c(4, 1, 1, 0, -2.29037708937563e-16),
   vectors = structure(c(0.288675134594813, 0.288675134594813,
   0.288675134594813, 0, 0.866025403784438, -0.784437556312061,
   0.588415847923579, 0.196021708388481, 0, 4.46410900710223e-17,
   0.22654886208902, 0.566068420404321, -0.79261728249334, 0,
   -1.11244069540181e-16, 0, 0, 0, -1, 0, -0.5, -0.5, -0.5,
   0, 0.5), .Dim = c(5L, 5L))), .Names = c("values", "vectors"
), class = "eigen")

I.e.,
all.equal(crossprod(e1$vectors), diag(5), tol=0)
[1] "Mean relative difference: 1.407255e-15"
all.equal(crossprod(e2$vectors), diag(5), tol=0)
[1] "Mean relative difference: 3.856478e-15"
all.equal(e1$vectors %*% diag(e1$values) %*% t(e1$vectors), x, tol=0)
[1] "Mean relative difference: 1.110223e-15"
all.equal(e2$vectors %*% diag(e2$values) %*% t(e2$vectors), x, tol=0)
[1] "Mean relative difference: 9.069735e-16"

e1$vectors
          [,1]       [,2]          [,3] [,4] [,5]
[1,] -0.2886751  0.0000000  8.164966e-01    0 -0.5
[2,] -0.2886751  0.7071068 -4.082483e-01    0 -0.5
[3,] -0.2886751 -0.7071068 -4.082483e-01    0 -0.5
[4,]  0.0000000  0.0000000  0.000000e+00   -1  0.0
[5,] -0.8660254  0.0000000 -6.106227e-16    0  0.5
e2$vectors
         [,1]          [,2]          [,3] [,4] [,5]
[1,] 0.2886751 -7.844376e-01  2.265489e-01    0 -0.5
[2,] 0.2886751  5.884158e-01  5.660684e-01    0 -0.5
[3,] 0.2886751  1.960217e-01 -7.926173e-01    0 -0.5
[4,] 0.0000000  0.000000e+00  0.000000e+00   -1  0.0
[5,] 0.8660254  4.464109e-17 -1.112441e-16    0  0.5





Bill Dunlap
TIBCO Software
wdunlap tibco.com<http://tibco.com>

On Thu, May 17, 2018 at 10:14 AM, Martin Maechler <
maechler at stat.math.ethz.ch<mailto:maechler at stat.math.ethz.ch>> wrote:

Duncan Murdoch ....
   on Thu, 17 May 2018 12:13:01 -0400 writes:

On 17/05/2018 11:53 AM, Martin Maechler wrote:
Kevin Coombes ... on Thu, 17
May 2018 11:21:23 -0400 writes:

  [..................]

[3] Should the documentation (man page) for "eigen" or
"mvrnorm" include a warning that the results can change
from machine to machine (or between things like 32-bit and
64-bit R on the same machine) because of difference in
linear algebra modules? (Possibly including the statement
that "set.seed" won't save you.)

The problem is that most (young?) people do not read help
pages anymore.

help(eigen) has contained the following text for years,
and in spite of your good analysis of the problem you
seem to not have noticed the last semi-paragraph:

Value:

The spectral decomposition of ?x? is returned as a list
with components

values: a vector containing the p eigenvalues of ?x?,
sorted in _decreasing_ order, according to ?Mod(values)?
in the asymmetric case when they might be complex (even
for real matrices).  For real asymmetric matrices the
vector will be complex only if complex conjugate pairs
of eigenvalues are detected.

vectors: either a p * p matrix whose columns contain the
eigenvectors of ?x?, or ?NULL? if ?only.values? is
?TRUE?.  The vectors are normalized to unit length.

Recall that the eigenvectors are only defined up to a
constant: even when the length is specified they are
still only defined up to a scalar of modulus one (the
sign for real matrices).

It's not a warning but a "recall that" .. maybe because
the author already assumed that only thorough users would
read that and for them it would be a recall of something
they'd have learned *and* not entirely forgotten since
;-)


I don't think you're really being fair here: the text in
?eigen doesn't make clear that eigenvector values are not
reproducible even within the same version of R, and
there's nothing in ?mvrnorm to suggest it doesn't give
reproducible results.

Ok, I'm sorry ... I definitely did not want to be unfair.

I've always thought the remark in eigen was sufficient,  but I'm
probably wrong and we should add text explaining that it
practically means that eigenvectors are only defined up to sign
switches (in the real case) and hence results depend on the
underlying {Lapack + BLAS} libraries and therefore are platform
dependent.

Even further, we could consider (optionally, by default FALSE)
using defining a deterministic scheme for postprocessing the current
output of eigen such that at least for the good cases where all
eigenspaces are 1-dimensional, the postprocessing would result
in reproducible signs, by e.g., ensuring the first non-zero
entry of each eigenvector to be positive.

MASS::mvrnorm()  and  mvtnorm::rmvnorm() both use "eigen",
whereas mvtnorm::rmvnorm()  *does* have  method = "chol" which
AFAIK does not suffer from such problems.

OTOH, the help page of MASS::mvrnorm() mentions the Cholesky
alternative but prefers eigen for better stability (without
saying more).

In spite of that, my personal recommendation would be to use

 mvtnorm::rmvnorm(.., method = "chol")

{ or the 2-3 lines of R code to the same thing without an extra
package,
 just using rnorm(), chol() and simple matrix operations }

because in simulations I'd expect the var-cov matrix  Sigma to
be far enough away from singular for chol() to be stable.

Martin

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel




       [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From Jori@@Mey@ @ending from ugent@be  Fri May 18 17:06:24 2018
From: Jori@@Mey@ @ending from ugent@be (Joris Meys)
Date: Fri, 18 May 2018 17:06:24 +0200
Subject: [R-pkg-devel] File link does not exist : how to get the correct one?
Message-ID: <CAO1zAVZ7UET5hVVXLff7OHCUV4fS2_tXkE5LLHfH=kR7KkWkMA@mail.gmail.com>

Hi all,

The latest changes in R cause a lot of Rd warnings about file links that
don't exist and are treated as a topic. One example is

\code{\link[stats]{fitted}}

Now if I look at ?fitted , the name of the page (top left corner) is given
as "fitted". So I would expect that the code above should just work fine,
but it generates the warning.

How can one get these names without having to browse through the directory
with html files?
Cheers
Joris

-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Fri May 18 17:29:05 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Fri, 18 May 2018 11:29:05 -0400
Subject: [R-pkg-devel] File link does not exist : how to get the correct
 one?
In-Reply-To: <CAO1zAVZ7UET5hVVXLff7OHCUV4fS2_tXkE5LLHfH=kR7KkWkMA@mail.gmail.com>
References: <CAO1zAVZ7UET5hVVXLff7OHCUV4fS2_tXkE5LLHfH=kR7KkWkMA@mail.gmail.com>
Message-ID: <04d2576b-c37b-ce82-f55c-ad4d5c7ebdfb@gmail.com>

On 18/05/2018 11:06 AM, Joris Meys wrote:
> Hi all,
> 
> The latest changes in R cause a lot of Rd warnings about file links that
> don't exist and are treated as a topic. One example is
> 
> \code{\link[stats]{fitted}}
> 
> Now if I look at ?fitted , the name of the page (top left corner) is given
> as "fitted". So I would expect that the code above should just work fine,
> but it generates the warning.
> 
> How can one get these names without having to browse through the directory
> with html files?

You could ask for HTML help on fitted, but don't use the class print method:

 > unclass(?fitted)
[1] 
"/Library/Frameworks/R.framework/Versions/3.4/Resources/library/stats/help/fitted.values"
attr(,"call")
help(topic = "fitted", package = NULL)
attr(,"topic")
[1] "fitted"
attr(,"tried_all_packages")
[1] FALSE
attr(,"type")
[1] "html"

The first line says that the name should be "fitted.values".

Duncan Murdoch


From murdoch@dunc@n @ending from gm@il@com  Fri May 18 17:37:08 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Fri, 18 May 2018 11:37:08 -0400
Subject: [R-pkg-devel] File link does not exist : how to get the correct
 one?
In-Reply-To: <04d2576b-c37b-ce82-f55c-ad4d5c7ebdfb@gmail.com>
References: <CAO1zAVZ7UET5hVVXLff7OHCUV4fS2_tXkE5LLHfH=kR7KkWkMA@mail.gmail.com>
 <04d2576b-c37b-ce82-f55c-ad4d5c7ebdfb@gmail.com>
Message-ID: <cdd0ca86-613f-d64f-f140-a2353926f718@gmail.com>

On 18/05/2018 11:29 AM, Duncan Murdoch wrote:
> On 18/05/2018 11:06 AM, Joris Meys wrote:
>> Hi all,
>>
>> The latest changes in R cause a lot of Rd warnings about file links that
>> don't exist and are treated as a topic. One example is
>>
>> \code{\link[stats]{fitted}}
>>
>> Now if I look at ?fitted , the name of the page (top left corner) is given
>> as "fitted". So I would expect that the code above should just work fine,
>> but it generates the warning.
>>
>> How can one get these names without having to browse through the directory
>> with html files?
> 
> You could ask for HTML help on fitted, but don't use the class print method:

Sorry, forgot to edit that out:  it doesn't need to be HTML help, any 
format would do.

Duncan Murdoch

> 
>   > unclass(?fitted)
> [1]
> "/Library/Frameworks/R.framework/Versions/3.4/Resources/library/stats/help/fitted.values"
> attr(,"call")
> help(topic = "fitted", package = NULL)
> attr(,"topic")
> [1] "fitted"
> attr(,"tried_all_packages")
> [1] FALSE
> attr(,"type")
> [1] "html"
> 
> The first line says that the name should be "fitted.values".
> 
> Duncan Murdoch
> 
> 
> 
>


From murdoch@dunc@n @ending from gm@il@com  Fri May 18 17:42:53 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Fri, 18 May 2018 11:42:53 -0400
Subject: [R-pkg-devel] File link does not exist : how to get the correct
 one?
In-Reply-To: <cdd0ca86-613f-d64f-f140-a2353926f718@gmail.com>
References: <CAO1zAVZ7UET5hVVXLff7OHCUV4fS2_tXkE5LLHfH=kR7KkWkMA@mail.gmail.com>
 <04d2576b-c37b-ce82-f55c-ad4d5c7ebdfb@gmail.com>
 <cdd0ca86-613f-d64f-f140-a2353926f718@gmail.com>
Message-ID: <24977b9b-8c58-2695-75c7-a1002c8501d5@gmail.com>

On 18/05/2018 11:37 AM, Duncan Murdoch wrote:
> On 18/05/2018 11:29 AM, Duncan Murdoch wrote:
>> On 18/05/2018 11:06 AM, Joris Meys wrote:
>>> Hi all,
>>>
>>> The latest changes in R cause a lot of Rd warnings about file links that
>>> don't exist and are treated as a topic. One example is
>>>
>>> \code{\link[stats]{fitted}}
>>>
>>> Now if I look at ?fitted , the name of the page (top left corner) is given
>>> as "fitted". So I would expect that the code above should just work fine,
>>> but it generates the warning.
>>>
>>> How can one get these names without having to browse through the directory
>>> with html files?
>>
>> You could ask for HTML help on fitted, but don't use the class print method:
> 
> Sorry, forgot to edit that out:  it doesn't need to be HTML help, any
> format would do.

And this should be my last message on the topic:  a nicer solution is 
simply to use basename():

 > basename(?fitted)
[1] "fitted.values"

Duncan Murdoch

>>
>>    > unclass(?fitted)
>> [1]
>> "/Library/Frameworks/R.framework/Versions/3.4/Resources/library/stats/help/fitted.values"
>> attr(,"call")
>> help(topic = "fitted", package = NULL)
>> attr(,"topic")
>> [1] "fitted"
>> attr(,"tried_all_packages")
>> [1] FALSE
>> attr(,"type")
>> [1] "html"
>>
>> The first line says that the name should be "fitted.values".
>>
>> Duncan Murdoch
>>
>>
>>
>>
>


From profjcn@@h @ending from gm@il@com  Fri May 18 19:13:18 2018
From: profjcn@@h @ending from gm@il@com (J C Nash)
Date: Fri, 18 May 2018 13:13:18 -0400
Subject: [R-pkg-devel] SIAM Wilkinson prize
Message-ID: <e02f8cd7-4879-f2dc-8340-602f63a2c5f1@gmail.com>

It occurs to me that there could be packages developed by early career R developers that might fit
this prize which is considered quite prestigious (not to mention the cash) in the numerical methods community.
It is also likely that people may not be aware of the award in the R community.

Cheers, JN



-------- Forwarded Message --------
Subject: 	[SIAM-OPT] June 1 Entry Deadline - James H. Wilkinson Prize for Numerical Software
Date: 	Thu, 17 May 2018 14:22:41 +0000
From: 	SIAM Prize Program <prizeadmin at siam.org>
CC: 	Optimization SIAG mailing list <siam-opt at siam.org>



James H. Wilkinson Prize for Numerical Software

*cid:image001.png at 01D29F3D.6ECC9B50* <https://siam2019.secure-platform.com/a/solicitations/home/5>

The deadline is June 1 for entries for the James H. Wilkinson Prize for Numerical Software
<http://www.siam.org/prizes/nominations/nom_wilkinson_ns.php>. We are looking for submissions of high-quality numerical
software from early career teams. If you or your team are developing numerical software for scientific computing, act as
a nominator and enter your software for the prize. To submit an entry, you first need to create an account at the SIAM
Prize Portal. Click on the ?Submit? button above to start the process.

The James H. Wilkinson Prize for Numerical Software is awarded every four years to the authors of an outstanding piece
of numerical software. The prize is awarded for an entry that best addresses all phases of the preparation of
high-quality numerical software. It is intended to recognize innovative software in scientific computing and to
encourage researchers in the earlier stages of their career.

SIAM will award the Wilkinson Prize for Numerical Software at the SIAM Conference on Computational Science and
Engineering (CSE19). The award will consist of $3,000 and a plaque. As part of the award, the recipient(s) will be
expected to present a lecture at the conference.



------------------------------------------------------------------------------------------------------------------------

*Eligibility Criteria:*

Selection will be based on: clarity of the software implementation and documentation, importance of the application(s)
addressed by the software; portability, reliability, efficiency, and usability of the software implementation; clarity
and depth of analysis of the algorithms and the software in the accompanying paper; and quality of the test software.

Candidates must have worked in mathematics or science for at most 12 years (full time equivalent) after receiving their
PhD as of January 1 of the award year, allowing for breaks in continuity. The prize committee can make exceptions, if in
their opinion the candidate is at an equivalent stage in their career.

For the 2019 award, a candidate must have received their PhD no earlier than January 1, 2007.

------------------------------------------------------------------------------------------------------------------------

*Entry Deadline:*

*June 1, 2018*

------------------------------------------------------------------------------------------------------------------------

*Required Materials:*

?         CVs of the authors of the software, at most two pages per author (PDF)

?         A two-page summary of the main features of the algorithm and software implementation (PDF)

?         A paper describing the algorithm and the software implementation (PDF)

?         Open source software written in a widely available high-level programming language. The software should be
submitted in a gzipped .tar archive with a README file describing the contents of the archive. Each submission should
include documentation, examples of the use of the software, a test program, and scripts for executing the test programs.

------------------------------------------------------------------------------------------------------------------------



*Previous recipients:*



Previous recipients of the James H. Wilkinson Prize for Numerical Software are:



*2015*Patrick Farrell, Simon Funke, David Ham, and Marie Rognes for dolfin-adjoint
*2011 *Andreas Waechter and Carl Laird for IPOPT

*2007 *Wolfgang Bangerth, Guido Kanschat, and Ralf Hartmann for deal.II

*2003 *Jonathan Shewchuk for Triangle

*1999 *Matteo Frigo and Steven Johnson for FFTW
*1995 *Chris Bischof and Alan Carle for ADIFOR 2.0
*1991 *Linda Petzold for DASSL



------------------------------------------------------------------------------------------------------------------------

*Selection Committee:*

Jorge Mor? (Chair), Argonne National Laboratory
Sven Hammarling, Numerical Algorithms Group Ltd and University of Manchester
Michael Heroux, Sandia National Laboratories
Randall J. LeVeque, University of Washington
Katherine Yelick, Lawrence Berkeley National Laboratory

------------------------------------------------------------------------------------------------------------------------

Learn more <http://www.siam.org/prizes/>about our prize program and view all prizes with open calls
<http://www.siam.org/prizes/nominations.php>. Contact prizeadmin at siam.org <mailto:prizeadmin at siam.org>with questions
regarding nomination procedure.





cid:image002.jpg at 01D29E7E.C4F2A570

*Prize Program*

3600 Market Street - 6th Floor
Philadelphia, PA 19104

prizeadmin at siam.org <mailto:prizeadmin at siam.org>/ http://www.siam.org/prizes/






Attached Message Part

_______________________________________________
SIAM-OPT mailing list
SIAM-OPT at siam.org
http://lists.siam.org/mailman/listinfo/siam-opt


From @vr@h@m@@dler @ending from gm@il@com  Fri May 18 19:27:41 2018
From: @vr@h@m@@dler @ending from gm@il@com (Avraham Adler)
Date: Fri, 18 May 2018 13:27:41 -0400
Subject: [R-pkg-devel] SIAM Wilkinson prize
In-Reply-To: <e02f8cd7-4879-f2dc-8340-602f63a2c5f1@gmail.com>
References: <e02f8cd7-4879-f2dc-8340-602f63a2c5f1@gmail.com>
Message-ID: <CAL6gwnL0idjbvoq=6PpXZe1=UJgzxXxh4YJyvo7Q2_jWU--Rpg@mail.gmail.com>

Seems as if it is restricted to people with PhDs.

Avi

On Fri, May 18, 2018 at 1:13 PM J C Nash <profjcnash at gmail.com> wrote:

> It occurs to me that there could be packages developed by early career R
> developers that might fit
> this prize which is considered quite prestigious (not to mention the cash)
> in the numerical methods community.
> It is also likely that people may not be aware of the award in the R
> community.
>
> Cheers, JN
>
>
>
> -------- Forwarded Message --------
> Subject:        [SIAM-OPT] June 1 Entry Deadline - James H. Wilkinson
> Prize for Numerical Software
> Date:   Thu, 17 May 2018 14:22:41 +0000
> From:   SIAM Prize Program <prizeadmin at siam.org>
> CC:     Optimization SIAG mailing list <siam-opt at siam.org>
>
>
>
> James H. Wilkinson Prize for Numerical Software
>
> *cid:image001.png at 01D29F3D.6ECC9B50* <
> https://siam2019.secure-platform.com/a/solicitations/home/5>
>
> The deadline is June 1 for entries for the James H. Wilkinson Prize for
> Numerical Software
> <http://www.siam.org/prizes/nominations/nom_wilkinson_ns.php>. We are
> looking for submissions of high-quality numerical
> software from early career teams. If you or your team are developing
> numerical software for scientific computing, act as
> a nominator and enter your software for the prize. To submit an entry, you
> first need to create an account at the SIAM
> Prize Portal. Click on the ?Submit? button above to start the process.
>
> The James H. Wilkinson Prize for Numerical Software is awarded every four
> years to the authors of an outstanding piece
> of numerical software. The prize is awarded for an entry that best
> addresses all phases of the preparation of
> high-quality numerical software. It is intended to recognize innovative
> software in scientific computing and to
> encourage researchers in the earlier stages of their career.
>
> SIAM will award the Wilkinson Prize for Numerical Software at the SIAM
> Conference on Computational Science and
> Engineering (CSE19). The award will consist of $3,000 and a plaque. As
> part of the award, the recipient(s) will be
> expected to present a lecture at the conference.
>
>
>
>
> ------------------------------------------------------------------------------------------------------------------------
>
> *Eligibility Criteria:*
>
> Selection will be based on: clarity of the software implementation and
> documentation, importance of the application(s)
> addressed by the software; portability, reliability, efficiency, and
> usability of the software implementation; clarity
> and depth of analysis of the algorithms and the software in the
> accompanying paper; and quality of the test software.
>
> Candidates must have worked in mathematics or science for at most 12 years
> (full time equivalent) after receiving their
> PhD as of January 1 of the award year, allowing for breaks in continuity.
> The prize committee can make exceptions, if in
> their opinion the candidate is at an equivalent stage in their career.
>
> For the 2019 award, a candidate must have received their PhD no earlier
> than January 1, 2007.
>
>
> ------------------------------------------------------------------------------------------------------------------------
>
> *Entry Deadline:*
>
> *June 1, 2018*
>
>
> ------------------------------------------------------------------------------------------------------------------------
>
> *Required Materials:*
>
> ?         CVs of the authors of the software, at most two pages per author
> (PDF)
>
> ?         A two-page summary of the main features of the algorithm and
> software implementation (PDF)
>
> ?         A paper describing the algorithm and the software implementation
> (PDF)
>
> ?         Open source software written in a widely available high-level
> programming language. The software should be
> submitted in a gzipped .tar archive with a README file describing the
> contents of the archive. Each submission should
> include documentation, examples of the use of the software, a test
> program, and scripts for executing the test programs.
>
>
> ------------------------------------------------------------------------------------------------------------------------
>
>
>
> *Previous recipients:*
>
>
>
> Previous recipients of the James H. Wilkinson Prize for Numerical Software
> are:
>
>
>
> *2015*Patrick Farrell, Simon Funke, David Ham, and Marie Rognes for
> dolfin-adjoint
> *2011 *Andreas Waechter and Carl Laird for IPOPT
>
> *2007 *Wolfgang Bangerth, Guido Kanschat, and Ralf Hartmann for deal.II
>
> *2003 *Jonathan Shewchuk for Triangle
>
> *1999 *Matteo Frigo and Steven Johnson for FFTW
> *1995 *Chris Bischof and Alan Carle for ADIFOR 2.0
> *1991 *Linda Petzold for DASSL
>
>
>
>
> ------------------------------------------------------------------------------------------------------------------------
>
> *Selection Committee:*
>
> Jorge Mor? (Chair), Argonne National Laboratory
> Sven Hammarling, Numerical Algorithms Group Ltd and University of
> Manchester
> Michael Heroux, Sandia National Laboratories
> Randall J. LeVeque, University of Washington
> Katherine Yelick, Lawrence Berkeley National Laboratory
>
>
> ------------------------------------------------------------------------------------------------------------------------
>
> Learn more <http://www.siam.org/prizes/>about our prize program and view
> all prizes with open calls
> <http://www.siam.org/prizes/nominations.php>. Contact prizeadmin at siam.org
> <mailto:prizeadmin at siam.org>with questions
> regarding nomination procedure.
>
>
>
>
>
> cid:image002.jpg at 01D29E7E.C4F2A570
>
> *Prize Program*
>
> 3600 Market Street - 6th Floor
> Philadelphia, PA 19104
>
> prizeadmin at siam.org <mailto:prizeadmin at siam.org>/
> http://www.siam.org/prizes/
>
>
>
>
>
>
> Attached Message Part
>
> _______________________________________________
> SIAM-OPT mailing list
> SIAM-OPT at siam.org
> http://lists.siam.org/mailman/listinfo/siam-opt
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
-- 
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From m@echler @ending from @t@t@m@th@ethz@ch  Fri May 18 20:01:50 2018
From: m@echler @ending from @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 18 May 2018 20:01:50 +0200
Subject: [R-pkg-devel] File link does not exist : how to get the correct
 one?
In-Reply-To: <24977b9b-8c58-2695-75c7-a1002c8501d5@gmail.com>
References: <CAO1zAVZ7UET5hVVXLff7OHCUV4fS2_tXkE5LLHfH=kR7KkWkMA@mail.gmail.com>
 <04d2576b-c37b-ce82-f55c-ad4d5c7ebdfb@gmail.com>
 <cdd0ca86-613f-d64f-f140-a2353926f718@gmail.com>
 <24977b9b-8c58-2695-75c7-a1002c8501d5@gmail.com>
Message-ID: <23295.5390.894233.617595@stat.math.ethz.ch>

>>>>> Duncan Murdoch 
>>>>>     on Fri, 18 May 2018 11:42:53 -0400 writes:

    > On 18/05/2018 11:37 AM, Duncan Murdoch wrote:
    >> On 18/05/2018 11:29 AM, Duncan Murdoch wrote:
    >>> On 18/05/2018 11:06 AM, Joris Meys wrote:
    >>>> Hi all,
    >>>> 
    >>>> The latest changes in R cause a lot of Rd warnings about file links that
    >>>> don't exist and are treated as a topic. One example is
    >>>> 
    >>>> \code{\link[stats]{fitted}}
    >>>> 
    >>>> Now if I look at ?fitted , the name of the page (top left corner) is given
    >>>> as "fitted". So I would expect that the code above should just work fine,
    >>>> but it generates the warning.
    >>>> 
    >>>> How can one get these names without having to browse through the directory
    >>>> with html files?
    >>> 
    >>> You could ask for HTML help on fitted, but don't use the class print method:
    >> 
    >> Sorry, forgot to edit that out:  it doesn't need to be HTML help, any
    >> format would do.

    > And this should be my last message on the topic:  a nicer solution is 
    > simply to use basename():

    >> basename(?fitted)
    > [1] "fitted.values"

    > Duncan Murdoch

Wow ... Awesome!

I had no idea about such an elegant a solution to this
problem...

Martin


From bbolker @ending from gm@il@com  Fri May 18 21:38:20 2018
From: bbolker @ending from gm@il@com (Ben Bolker)
Date: Fri, 18 May 2018 15:38:20 -0400
Subject: [R-pkg-devel] questions about promptPackage(); <pkg>-package.Rd;
 help(package="<pkg>")
Message-ID: <89f7347c-d4ed-49c6-a2a6-476110884215@gmail.com>


   I was advised to update the metadata in the "*-package.Rd" man page
of an old CRAN package (emdbook), which had gotten out of date.  As
suggested I used promptPackage() to build a new emdbook-package.Rd file.
I did that, but I was surprised/confused that it essentially dumped all
of the DESCRIPTION meta-data (using macros, not raw data) into the .Rd
file. The default information specified seems to replicate the results
of help(package="<pkg>"). If I hadn't double-checked I might
accidentally ending up pushing a <pkg>-package.Rd file that had a lot of
what I'd consider junk in it ...  Except for providing twice as many
places to find information [help(package="<pkg>") and
help("<pkg>-package")], which might help users who only knew about one
of these routes, I don't understand the benefit of these defaults.

  (Excerpts of *Writing R Extensions* section 2.1.4 "Documenting
packages" appended below, for reference.)

- Is it just that it's hard to prescribe/automatically write a "short
overview" statement for the package author?
- Is all this information intended as a reminder to the package author
of what's in the package, and they're expected to throw most of it out
when editing the file?  (When the information appears in the .Rd file as
e.g. \packageIndices{emdbook}, it's not actually that helpful as a
reminder ...)
- Or is the expectation that much of the DESCRIPTION metadata will also
be presented in <pkg>-package.Rd ?

    When I look at mature packages that have "<pkg>-package" pages (e.g.
mgcv, vegan, lattice) they seem to incorporate almost *none* of the
DESCRIPTION meta-information -- perhaps just \packageDescription{} and
\packageAuthor{}.

  Part of my confusion may stem from the package in question being very
small, so there's not very much one could say in <pkg>-package.Rd that's
not already said by the Title: and Description: fields in DESCRIPTION ...

  I ended up making a minimal emdbook-package.Rd file, but I wonder if
that's what's intended/what other developers would suggest here.

  cheers
    Ben Bolker

-----
> Packages may have an overview help page with an \alias
pkgname-package, e.g. ?utils-package? for the utils package, when
package?pkgname will open that help page.  ...

> ... Otherwise [if final=FALSE] (the default) comments will be inserted
giving suggestions for content.

> Apart from the mandatory \name and \title and the pkgname-package
alias, the only requirement for the package overview page is that it
include a \docType{package} statement. All other content is optional. We
suggest that it should be a short overview, to give a reader unfamiliar
with the package enough information to get started.


From bbolker @ending from gm@il@com  Fri May 18 21:44:13 2018
From: bbolker @ending from gm@il@com (Ben Bolker)
Date: Fri, 18 May 2018 15:44:13 -0400
Subject: [R-pkg-devel] separate Functions: and Datasets: indices?
Message-ID: <27fa59fc-b0df-374c-0ee8-18912185ccf7@gmail.com>


  I notice that when I say  help(package="MASS") I get separate indices
for functions and data sets.  AFAICT this doesn't seem to occur in other
packages that have both functions and data sets (e.g. mgcv, lattice,
lme4), despite the tags \docType{data} and \keywords{datasets} being
used in the relevant .Rd files; I don't see any other obvious magic in
the .Rd files for MASS (in fact, they don't use the \docType{} tag at
all ...

  Before I go spelunking, does anyone have any guesses/ideas/information
about why MASS is special (or if it is)?

  cheers
    Ben Bolker


From edd @ending from debi@n@org  Fri May 18 23:05:03 2018
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Fri, 18 May 2018 16:05:03 -0500
Subject: [R-pkg-devel] 
 questions about promptPackage(); <pkg>-package.Rd;
 help(package="<pkg>")
In-Reply-To: <89f7347c-d4ed-49c6-a2a6-476110884215@gmail.com>
References: <89f7347c-d4ed-49c6-a2a6-476110884215@gmail.com>
Message-ID: <23295.16383.228396.170067@rob.eddelbuettel.com>


Ben,

Been meaning to write a short blog post about it as it also affects two (old)
packages of mine.  My favourite is to just rely on the Rd macros to the
fullest, and I generally just hand-edit it -- no promptPackage() use.

See eg this side-by-side diff of the first of the two I need to update; the
other may follow tomorrow.

https://github.com/eddelbuettel/inline/commit/51d1ed2fbb5493b0cbc76d9bdf22beec7fe42ec9?diff=split#diff-c6be7fcd65260038f24d97252a80fef7

This should give you the old one on the left, and the new one -- which is
essentially just references to DESCRIPTION on the right.  As it is short, I
include the new one (indented by three spaces):

   \name{inline-package}
   \alias{inline-package}
   \alias{inline}
   \docType{package}
   \title{\packageTitle{inline}}
   \description{\packageDescription{inline}}
   \seealso{\code{\link{cfunction}}, \code{\link{cxxfunction}}}
   \author{\packageAuthor{inline}}
   \section{Maintainer}{\packageMaintainer{inline}}
   \keyword{package}

Hth,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From r@turner @ending from @uckl@nd@@c@nz  Sat May 19 00:12:47 2018
From: r@turner @ending from @uckl@nd@@c@nz (Rolf Turner)
Date: Sat, 19 May 2018 10:12:47 +1200
Subject: [R-pkg-devel] 
 [FORGED]  separate Functions: and Datasets: indices?
In-Reply-To: <27fa59fc-b0df-374c-0ee8-18912185ccf7@gmail.com>
References: <27fa59fc-b0df-374c-0ee8-18912185ccf7@gmail.com>
Message-ID: <4cad73a4-e498-94cb-cafa-3459677fb0c4@auckland.ac.nz>


On 19/05/18 07:44, Ben Bolker wrote:

> 
>    I notice that when I say  help(package="MASS") I get separate indices
> for functions and data sets.  AFAICT this doesn't seem to occur in other
> packages that have both functions and data sets (e.g. mgcv, lattice,
> lme4), despite the tags \docType{data} and \keywords{datasets} being
> used in the relevant .Rd files; I don't see any other obvious magic in
> the .Rd files for MASS (in fact, they don't use the \docType{} tag at
> all ...
> 
>    Before I go spelunking, does anyone have any guesses/ideas/information
> about why MASS is special (or if it is)?

Doesn't happen to me.  (I am still using R 3.4.  Is this an R 3.5 
phenomenon?) I get single alphabetical listing, of functions and data 
sets, intermingled.  E.g.:

>                                           -- A -- > abbey 	  Determinations of Nickel Content
> accdeaths 	  Accidental Deaths in the US 1973-1978
> addterm 	  Try All One-Term Additions to a Model
> addterm.default Try All One-Term Additions to a Model
> addterm.glm 	  Try All One-Term Additions to a Model
> addterm.lm 	  Try All One-Term Additions to a Model
> Aids2 	  Australian AIDS Survival Data
> Animals 	  Brain and Body Weights for 28 Species
...
...

My session info:

>  > sessionInfo()
> R version 3.4.4 (2018-03-15)
> Platform: x86_64-pc-linux-gnu (64-bit)
> Running under: Ubuntu 16.04.4 LTS
> 
> Matrix products: default
> BLAS: /usr/local/lib64/R/lib/libRblas.so
> LAPACK: /usr/local/lib64/R/lib/libRlapack.so
> 
> locale:
>  [1] LC_CTYPE=en_NZ.UTF-8       LC_NUMERIC=C              
>  [3] LC_TIME=en_NZ.UTF-8        LC_COLLATE=en_NZ.UTF-8    
>  [5] LC_MONETARY=en_NZ.UTF-8    LC_MESSAGES=en_NZ.UTF-8   
>  [7] LC_PAPER=en_NZ.UTF-8       LC_NAME=C                 
>  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
> [11] LC_MEASUREMENT=en_NZ.UTF-8 LC_IDENTIFICATION=C       
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base     
> 
> other attached packages:
> [1] misc_0.0-16
> 
> loaded via a namespace (and not attached):
>  [1] Brobdingnag_1.2-4    splines_3.4.4        gtools_3.5.0        
>  [4] StanHeaders_2.16.0-1 threejs_0.3.1        shiny_1.0.3         
>  [7] assertthat_0.2.0     stats4_3.4.4         pillar_1.0.1       

<SNIP>

cheers,

Rolf

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From bbolker @ending from gm@il@com  Sat May 19 05:16:08 2018
From: bbolker @ending from gm@il@com (Ben Bolker)
Date: Fri, 18 May 2018 23:16:08 -0400
Subject: [R-pkg-devel] separate Functions: and Datasets: indices?
In-Reply-To: <27fa59fc-b0df-374c-0ee8-18912185ccf7@gmail.com>
References: <27fa59fc-b0df-374c-0ee8-18912185ccf7@gmail.com>
Message-ID: <9aa26bf0-8f76-60c7-1335-22dfe22ef303@gmail.com>


  Figured it out.  MASS has a custom INDEX file ...

------
1.1.4 The INDEX file

The optional file INDEX contains a line for each sufficiently
interesting object in the package, giving its name and a description
(functions such as print methods not usually called explicitly might not
be included). Normally this file is missing and the corresponding
information is automatically generated from the documentation sources
(using tools::Rdindex()) when installing from source.

The file is part of the information given by library(help = pkgname).

Rather than editing this file, it is preferable to put customized
information about the package into an overview help page (see
Documenting packages) and/or a vignette (see Writing package vignettes).
---


On 2018-05-18 03:44 PM, Ben Bolker wrote:
> 
>   I notice that when I say  help(package="MASS") I get separate indices
> for functions and data sets.  AFAICT this doesn't seem to occur in other
> packages that have both functions and data sets (e.g. mgcv, lattice,
> lme4), despite the tags \docType{data} and \keywords{datasets} being
> used in the relevant .Rd files; I don't see any other obvious magic in
> the .Rd files for MASS (in fact, they don't use the \docType{} tag at
> all ...
> 
>   Before I go spelunking, does anyone have any guesses/ideas/information
> about why MASS is special (or if it is)?
> 
>   cheers
>     Ben Bolker
>


From chri@@njugun@ @ending from gm@il@com  Mon May 21 09:07:21 2018
From: chri@@njugun@ @ending from gm@il@com (Chris Njuguna)
Date: Mon, 21 May 2018 10:07:21 +0300
Subject: [R-pkg-devel] CRAN pretest: Overall checktime 14 min > 10 min
Message-ID: <CAMaQ9nsUgW+UQr0c99eCgymx7wGCuH3puJMAf0dOsxxr1bRjaQ@mail.gmail.com>

Hi,

I am trying to submit an update to the Rnightlights package that I maintain
(on CRAN at https://cran.r-project.org/package=Rnightlights and source code
on Github at https://github.com/chrisvwn/Rnightlights).

I am getting a checktime note specifically for checks on the
r-devel-windows-ix86+x86_64 platform.

Flavor: r-devel-windows-ix86+x86_64
Check: Overall checktime, Result: Note
Overall checktime 14 min > 10 min

This is the first time this is happening even though I have not made any
substantial updates that would cause such a jump in timing - (previous
tests were approx 5 mins).

Is there a way to find out exactly what part of the checks are causing this
and that I need to look at?

I have copy-pasted the full message from CRAN below containing the links to
the check results and timings for the package's previous version results.
(Please ignore the other note about using superseded doSNOW. This is
resolved for now.)

Thanks,

Chris
==== START CRAN EMAIL ===
Dear maintainer,

package Rnightlights_0.2.1.tar.gz does not pass the incoming checks
automatically, please see the following pre-tests:
Windows: <https://win-builder.r-project.org/incoming_pretest/
Rnightlights_0.2.1_20180520_230128/Windows/00check.log>
Status: 1 NOTE
Debian: <https://win-builder.r-project.org/incoming_pretest/
Rnightlights_0.2.1_20180520_230128/Debian/00check.log>
Status: 1 NOTE

Last released version's CRAN status: OK: 12
See: <https://CRAN.R-project.org/web/checks/check_results_Rnightlights.html>

CRAN Web: <https://cran.r-project.org/package=Rnightlights>

Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on
the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please
reply-all to this message and explain.

More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/
Rnightlights_0.2.1_20180520_230128/>
The files will be removed after roughly 7 days.

No strong reverse dependencies to be checked.

Best regards,
CRAN teams' auto-check service

Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
Check: CRAN incoming feasibility, Result: NOTE
  Maintainer: 'Christopher Njuguna <chris.njuguna at gmail.com>'

  Uses the superseded package: 'doSNOW'

Flavor: r-devel-windows-ix86+x86_64
Check: Overall checktime, Result: Note
  Overall checktime 14 min > 10 min
=== END CRAN EMAIL ===

	[[alternative HTML version deleted]]


From edd @ending from debi@n@org  Mon May 21 14:06:52 2018
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Mon, 21 May 2018 07:06:52 -0500
Subject: [R-pkg-devel] CRAN pretest: Overall checktime 14 min > 10 min
In-Reply-To: <CAMaQ9nsUgW+UQr0c99eCgymx7wGCuH3puJMAf0dOsxxr1bRjaQ@mail.gmail.com>
References: <CAMaQ9nsUgW+UQr0c99eCgymx7wGCuH3puJMAf0dOsxxr1bRjaQ@mail.gmail.com>
Message-ID: <23298.46684.250487.218249@rob.eddelbuettel.com>


I can't speak to the recent increase on Windows. It may be load; it may be
related to R 3.5.0 --- but I'd even whittle things down from 5+ minutes.  At
one point in the past we were told to aim for 1 minute, give or take.

So e.g. Rcpp has been using a scheme for _many_ years where I take a cue from
the DESCRIPTION file. The rule I like (for my packages) is that versions like

  1.2.3.1

are "development" so I do a full test.  Whereas versions like

  1.2.4

are "release" -- so when I only see three components, I set a variable. And
the unit tests file can then use that variable to skip tests.  This gives me
fine-grained control: lighter-weight tests can still run in both cases. Hence
shorter test time for release uploads at CRAN; yet I still get full tests at
win-builder when I send a development version.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From chri@@njugun@ @ending from gm@il@com  Mon May 21 17:41:29 2018
From: chri@@njugun@ @ending from gm@il@com (Chris Njuguna)
Date: Mon, 21 May 2018 18:41:29 +0300
Subject: [R-pkg-devel] CRAN pretest: Overall checktime 14 min > 10 min
In-Reply-To: <23298.46684.250487.218249@rob.eddelbuettel.com>
References: <CAMaQ9nsUgW+UQr0c99eCgymx7wGCuH3puJMAf0dOsxxr1bRjaQ@mail.gmail.com>
 <23298.46684.250487.218249@rob.eddelbuettel.com>
Message-ID: <CAMaQ9nsF-2GNd-hzE8e08KpESuMkG2dMyS=zNzTwKgYJsntocg@mail.gmail.com>

Thank you for this! It makes a lot of sense. I will adopt this version
naming and testing scheme.

I do have some internet-based tests including a small download. These could
be adding some variability so will move them out of the regular tests.





Christopher Njuguna
cell: +254 717 916 343
cell: +254 739 956 510
gchat: chris.njuguna
skype: christopher.njuguna
twitter: @chrisnjuguna

On Mon, May 21, 2018 at 3:06 PM, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> I can't speak to the recent increase on Windows. It may be load; it may be
> related to R 3.5.0 --- but I'd even whittle things down from 5+ minutes.
> At
> one point in the past we were told to aim for 1 minute, give or take.
>
> So e.g. Rcpp has been using a scheme for _many_ years where I take a cue
> from
> the DESCRIPTION file. The rule I like (for my packages) is that versions
> like
>
>   1.2.3.1
>
> are "development" so I do a full test.  Whereas versions like
>
>   1.2.4
>
> are "release" -- so when I only see three components, I set a variable. And
> the unit tests file can then use that variable to skip tests.  This gives
> me
> fine-grained control: lighter-weight tests can still run in both cases.
> Hence
> shorter test time for release uploads at CRAN; yet I still get full tests
> at
> win-builder when I send a development version.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Mon May 21 17:46:36 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Mon, 21 May 2018 17:46:36 +0200
Subject: [R-pkg-devel] CRAN pretest: Overall checktime 14 min > 10 min
In-Reply-To: <23298.46684.250487.218249@rob.eddelbuettel.com>
References: <CAMaQ9nsUgW+UQr0c99eCgymx7wGCuH3puJMAf0dOsxxr1bRjaQ@mail.gmail.com>
 <23298.46684.250487.218249@rob.eddelbuettel.com>
Message-ID: <8a582252-e461-3fba-adc3-0dd79d88126e@statistik.tu-dortmund.de>

In addition to what Dirk said, I just added this experimental test for 
CRAN incoming checks few days ago and it should not reject but lead to 
manual inspection, this will be fixed on CRAN side shortly.

Nevertheless: The idea is that we have timeouts for checking a package 
and we want to be alerted of future timeout problems in advance when a 
package is submitted.

Best,
Uwe Ligges



On 21.05.2018 14:06, Dirk Eddelbuettel wrote:
> 
> I can't speak to the recent increase on Windows. It may be load; it may be
> related to R 3.5.0 --- but I'd even whittle things down from 5+ minutes.  At
> one point in the past we were told to aim for 1 minute, give or take.
> 
> So e.g. Rcpp has been using a scheme for _many_ years where I take a cue from
> the DESCRIPTION file. The rule I like (for my packages) is that versions like
> 
>    1.2.3.1
> 
> are "development" so I do a full test.  Whereas versions like
> 
>    1.2.4
> 
> are "release" -- so when I only see three components, I set a variable. And
> the unit tests file can then use that variable to skip tests.  This gives me
> fine-grained control: lighter-weight tests can still run in both cases. Hence
> shorter test time for release uploads at CRAN; yet I still get full tests at
> win-builder when I send a development version.
> 
> Dirk
>


From edd @ending from debi@n@org  Mon May 21 18:04:18 2018
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Mon, 21 May 2018 11:04:18 -0500
Subject: [R-pkg-devel] CRAN pretest: Overall checktime 14 min > 10 min
In-Reply-To: <8a582252-e461-3fba-adc3-0dd79d88126e@statistik.tu-dortmund.de>
References: <CAMaQ9nsUgW+UQr0c99eCgymx7wGCuH3puJMAf0dOsxxr1bRjaQ@mail.gmail.com>
 <23298.46684.250487.218249@rob.eddelbuettel.com>
 <8a582252-e461-3fba-adc3-0dd79d88126e@statistik.tu-dortmund.de>
Message-ID: <23298.60930.791904.925483@rob.eddelbuettel.com>


On 21 May 2018 at 17:46, Uwe Ligges wrote:
| In addition to what Dirk said, I just added this experimental test for 
| CRAN incoming checks few days ago and it should not reject but lead to 
| manual inspection, this will be fixed on CRAN side shortly.
| 
| Nevertheless: The idea is that we have timeouts for checking a package 
| and we want to be alerted of future timeout problems in advance when a 
| package is submitted.

Which is totally understandable given the limits we have on (human, chiefly)
resources here -- but it is also worth reminding ourselves from time to time
that this of course reduces actual test coverage ... which is generally not
we want with these tests.  This whole topic needs some more discussion.

On 21 May 2018 at 18:41, Chris Njuguna wrote:
| Thank you for this! It makes a lot of sense. I will adopt this version
| naming and testing scheme.

Nice. I didn't give to much detail but if glance eg at
  https://github.com/RcppCore/Rcpp/blob/master/tests/doRUnit.R#L45-L52
for the detection (including an environment variable override) and eg at
  https://github.com/RcppCore/Rcpp/blob/master/inst/unitTests/runit.DataFrame.R#L21-L23
for one use case you should be able to get started. Ping me off-list with any
questions.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Mon May 21 18:11:26 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Mon, 21 May 2018 18:11:26 +0200
Subject: [R-pkg-devel] CRAN pretest: Overall checktime 14 min > 10 min
In-Reply-To: <23298.60930.791904.925483@rob.eddelbuettel.com>
References: <CAMaQ9nsUgW+UQr0c99eCgymx7wGCuH3puJMAf0dOsxxr1bRjaQ@mail.gmail.com>
 <23298.46684.250487.218249@rob.eddelbuettel.com>
 <8a582252-e461-3fba-adc3-0dd79d88126e@statistik.tu-dortmund.de>
 <23298.60930.791904.925483@rob.eddelbuettel.com>
Message-ID: <7d24c12a-905a-8cff-498f-cf1a2f15ee7d@statistik.tu-dortmund.de>



On 21.05.2018 18:04, Dirk Eddelbuettel wrote:
> 
> On 21 May 2018 at 17:46, Uwe Ligges wrote:
> | In addition to what Dirk said, I just added this experimental test for
> | CRAN incoming checks few days ago and it should not reject but lead to
> | manual inspection, this will be fixed on CRAN side shortly.
> |
> | Nevertheless: The idea is that we have timeouts for checking a package
> | and we want to be alerted of future timeout problems in advance when a
> | package is submitted.
> 
> Which is totally understandable given the limits we have on (human, chiefly)
> resources here -- but it is also worth reminding ourselves from time to time
> that this of course reduces actual test coverage ... which is generally not
> we want with these tests.  This whole topic needs some more discussion.


A very difficult topic, while some authors do not supply any sensible 
checks nor evben examples and we have to force them to add even simplest 
code for some runtime checks, there are other who try too much. We are 
frequently bitten by cases where maintainers try to increase code 
coverage in the tests, but actually do test features of other packages 
(such as warning or error messages another package or R generates). One 
of the issues to be discussed would be that sensible testing is 
required, but not everythuing that leads to a larger coverage percentage 
makes sense ...
Another frequent thing we see is thast people run MCMC simulations in 
the tests with thousands of iterations that are actually not needed for 
testing.

Best,
Uwe




> On 21 May 2018 at 18:41, Chris Njuguna wrote:
> | Thank you for this! It makes a lot of sense. I will adopt this version
> | naming and testing scheme.
> 
> Nice. I didn't give to much detail but if glance eg at
>    https://github.com/RcppCore/Rcpp/blob/master/tests/doRUnit.R#L45-L52
> for the detection (including an environment variable override) and eg at
>    https://github.com/RcppCore/Rcpp/blob/master/inst/unitTests/runit.DataFrame.R#L21-L23
> for one use case you should be able to get started. Ping me off-list with any
> questions.
> 
> Dirk
>


From chri@@njugun@ @ending from gm@il@com  Mon May 21 18:16:16 2018
From: chri@@njugun@ @ending from gm@il@com (Chris Njuguna)
Date: Mon, 21 May 2018 19:16:16 +0300
Subject: [R-pkg-devel] CRAN pretest: Overall checktime 14 min > 10 min
In-Reply-To: <8a582252-e461-3fba-adc3-0dd79d88126e@statistik.tu-dortmund.de>
References: <CAMaQ9nsUgW+UQr0c99eCgymx7wGCuH3puJMAf0dOsxxr1bRjaQ@mail.gmail.com>
 <23298.46684.250487.218249@rob.eddelbuettel.com>
 <8a582252-e461-3fba-adc3-0dd79d88126e@statistik.tu-dortmund.de>
Message-ID: <CAMaQ9nt6fPmf5y=4G+WjmroGYOJ50m6-4h=iEkH9Aqb6UjfS6g@mail.gmail.com>

Thanks Uwe,

I think the timeouts are helpful also in encouraging better coding
practices. I will try to limit my tests as described by Dirk especially
since I am planning to increase my code test coverage. Is it possible to
get the test timing breakdowns for each flavor?

Christopher Njuguna
cell: +254 717 916 343
cell: +254 739 956 510
gchat: chris.njuguna
skype: christopher.njuguna
twitter: @chrisnjuguna

On Mon, May 21, 2018 at 6:46 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de
> wrote:

> In addition to what Dirk said, I just added this experimental test for
> CRAN incoming checks few days ago and it should not reject but lead to
> manual inspection, this will be fixed on CRAN side shortly.
>
> Nevertheless: The idea is that we have timeouts for checking a package and
> we want to be alerted of future timeout problems in advance when a package
> is submitted.
>
> Best,
> Uwe Ligges
>
>
>
> On 21.05.2018 14:06, Dirk Eddelbuettel wrote:
>
>>
>> I can't speak to the recent increase on Windows. It may be load; it may be
>> related to R 3.5.0 --- but I'd even whittle things down from 5+ minutes.
>> At
>> one point in the past we were told to aim for 1 minute, give or take.
>>
>> So e.g. Rcpp has been using a scheme for _many_ years where I take a cue
>> from
>> the DESCRIPTION file. The rule I like (for my packages) is that versions
>> like
>>
>>    1.2.3.1
>>
>> are "development" so I do a full test.  Whereas versions like
>>
>>    1.2.4
>>
>> are "release" -- so when I only see three components, I set a variable.
>> And
>> the unit tests file can then use that variable to skip tests.  This gives
>> me
>> fine-grained control: lighter-weight tests can still run in both cases.
>> Hence
>> shorter test time for release uploads at CRAN; yet I still get full tests
>> at
>> win-builder when I send a development version.
>>
>> Dirk
>>
>>

	[[alternative HTML version deleted]]


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Mon May 21 18:20:56 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Mon, 21 May 2018 18:20:56 +0200
Subject: [R-pkg-devel] CRAN pretest: Overall checktime 14 min > 10 min
In-Reply-To: <CAMaQ9nt6fPmf5y=4G+WjmroGYOJ50m6-4h=iEkH9Aqb6UjfS6g@mail.gmail.com>
References: <CAMaQ9nsUgW+UQr0c99eCgymx7wGCuH3puJMAf0dOsxxr1bRjaQ@mail.gmail.com>
 <23298.46684.250487.218249@rob.eddelbuettel.com>
 <8a582252-e461-3fba-adc3-0dd79d88126e@statistik.tu-dortmund.de>
 <CAMaQ9nt6fPmf5y=4G+WjmroGYOJ50m6-4h=iEkH9Aqb6UjfS6g@mail.gmail.com>
Message-ID: <a510e2dd-e05d-3848-3d0a-c5e98abb85fd@statistik.tu-dortmund.de>

Well, on incoming, we only check on two systems and the Windows timings 
will be reported in the message you receive, you can also see them when 
using the winbuilder service.

For some of the other OS/ R flavors, you can see them after they are 
published on CRAN on the check summary pagesa on CRAN, e.g. for 
Rnightlights:

https://cran.r-project.org/web/checks/check_results_Rnightlights.html

Noet that Windows typically takes much longer as some parts of the 
checks are performed for 32-bit and 64-bit.

Best,
Uwe Ligges


On 21.05.2018 18:16, Chris Njuguna wrote:
> Thanks Uwe,
> 
> I think the timeouts are helpful also in encouraging better coding 
> practices. I will try to limit my tests as described by Dirk especially 
> since I am planning to increase my code test coverage. Is it possible to 
> get the test timing breakdowns for each flavor?
> 
> Christopher Njuguna
> cell: +254 717 916 343
> cell: +254 739 956 510
> gchat: chris.njuguna
> skype: christopher.njuguna
> twitter: @chrisnjuguna
> 
> On Mon, May 21, 2018 at 6:46 PM, Uwe Ligges 
> <ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>> wrote:
> 
>     In addition to what Dirk said, I just added this experimental test
>     for CRAN incoming checks few days ago and it should not reject but
>     lead to manual inspection, this will be fixed on CRAN side shortly.
> 
>     Nevertheless: The idea is that we have timeouts for checking a
>     package and we want to be alerted of future timeout problems in
>     advance when a package is submitted.
> 
>     Best,
>     Uwe Ligges
> 
> 
> 
>     On 21.05.2018 14:06, Dirk Eddelbuettel wrote:
> 
> 
>         I can't speak to the recent increase on Windows. It may be load;
>         it may be
>         related to R 3.5.0 --- but I'd even whittle things down from 5+
>         minutes.? At
>         one point in the past we were told to aim for 1 minute, give or
>         take.
> 
>         So e.g. Rcpp has been using a scheme for _many_ years where I
>         take a cue from
>         the DESCRIPTION file. The rule I like (for my packages) is that
>         versions like
> 
>          ? ?1.2.3.1
> 
>         are "development" so I do a full test.? Whereas versions like
> 
>          ? ?1.2.4
> 
>         are "release" -- so when I only see three components, I set a
>         variable. And
>         the unit tests file can then use that variable to skip tests. 
>         This gives me
>         fine-grained control: lighter-weight tests can still run in both
>         cases. Hence
>         shorter test time for release uploads at CRAN; yet I still get
>         full tests at
>         win-builder when I send a development version.
> 
>         Dirk
> 
>


From chri@@njugun@ @ending from gm@il@com  Mon May 21 18:31:08 2018
From: chri@@njugun@ @ending from gm@il@com (Chris Njuguna)
Date: Mon, 21 May 2018 19:31:08 +0300
Subject: [R-pkg-devel] CRAN pretest: Overall checktime 14 min > 10 min
In-Reply-To: <a510e2dd-e05d-3848-3d0a-c5e98abb85fd@statistik.tu-dortmund.de>
References: <CAMaQ9nsUgW+UQr0c99eCgymx7wGCuH3puJMAf0dOsxxr1bRjaQ@mail.gmail.com>
 <23298.46684.250487.218249@rob.eddelbuettel.com>
 <8a582252-e461-3fba-adc3-0dd79d88126e@statistik.tu-dortmund.de>
 <CAMaQ9nt6fPmf5y=4G+WjmroGYOJ50m6-4h=iEkH9Aqb6UjfS6g@mail.gmail.com>
 <a510e2dd-e05d-3848-3d0a-c5e98abb85fd@statistik.tu-dortmund.de>
Message-ID: <CAMaQ9nsyqoftmvxL1AzgVDi6mrD_rOxF88sWP7=vs9URic06Qg@mail.gmail.com>

Okay, thanks.

And thank you all for putting in your time and effort!

Christopher Njuguna
cell: +254 717 916 343
cell: +254 739 956 510
gchat: chris.njuguna
skype: christopher.njuguna
twitter: @chrisnjuguna

On Mon, May 21, 2018 at 7:20 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de
> wrote:

> Well, on incoming, we only check on two systems and the Windows timings
> will be reported in the message you receive, you can also see them when
> using the winbuilder service.
>
> For some of the other OS/ R flavors, you can see them after they are
> published on CRAN on the check summary pagesa on CRAN, e.g. for
> Rnightlights:
>
> https://cran.r-project.org/web/checks/check_results_Rnightlights.html
>
> Noet that Windows typically takes much longer as some parts of the checks
> are performed for 32-bit and 64-bit.
>
> Best,
> Uwe Ligges
>
>
> On 21.05.2018 18:16, Chris Njuguna wrote:
>
>> Thanks Uwe,
>>
>> I think the timeouts are helpful also in encouraging better coding
>> practices. I will try to limit my tests as described by Dirk especially
>> since I am planning to increase my code test coverage. Is it possible to
>> get the test timing breakdowns for each flavor?
>>
>> Christopher Njuguna
>> cell: +254 717 916 343
>> cell: +254 739 956 510
>> gchat: chris.njuguna
>> skype: christopher.njuguna
>> twitter: @chrisnjuguna
>>
>> On Mon, May 21, 2018 at 6:46 PM, Uwe Ligges <
>> ligges at statistik.tu-dortmund.de <mailto:ligges at statistik.tu-dortmund.de>>
>> wrote:
>>
>>     In addition to what Dirk said, I just added this experimental test
>>     for CRAN incoming checks few days ago and it should not reject but
>>     lead to manual inspection, this will be fixed on CRAN side shortly.
>>
>>     Nevertheless: The idea is that we have timeouts for checking a
>>     package and we want to be alerted of future timeout problems in
>>     advance when a package is submitted.
>>
>>     Best,
>>     Uwe Ligges
>>
>>
>>
>>     On 21.05.2018 14:06, Dirk Eddelbuettel wrote:
>>
>>
>>         I can't speak to the recent increase on Windows. It may be load;
>>         it may be
>>         related to R 3.5.0 --- but I'd even whittle things down from 5+
>>         minutes.  At
>>         one point in the past we were told to aim for 1 minute, give or
>>         take.
>>
>>         So e.g. Rcpp has been using a scheme for _many_ years where I
>>         take a cue from
>>         the DESCRIPTION file. The rule I like (for my packages) is that
>>         versions like
>>
>>             1.2.3.1
>>
>>         are "development" so I do a full test.  Whereas versions like
>>
>>             1.2.4
>>
>>         are "release" -- so when I only see three components, I set a
>>         variable. And
>>         the unit tests file can then use that variable to skip tests.
>>      This gives me
>>         fine-grained control: lighter-weight tests can still run in both
>>         cases. Hence
>>         shorter test time for release uploads at CRAN; yet I still get
>>         full tests at
>>         win-builder when I send a development version.
>>
>>         Dirk
>>
>>
>>

	[[alternative HTML version deleted]]


From dwin@emiu@ @ending from comc@@t@net  Tue May 22 13:20:04 2018
From: dwin@emiu@ @ending from comc@@t@net (David Winsemius)
Date: Tue, 22 May 2018 07:20:04 -0400
Subject: [R-pkg-devel] Puzzled by delay in getting version update on CRAN
Message-ID: <8BCCC784-378C-448C-BCA6-E786CFFDA167@comcast.net>


I'm wondering if I should have gotten an error report for a new version submission. I submitted the update in an effort to have some of the Notes corrected. (The Note regarding registering certain compiled routines was not address. I was testing on a Mac where that issue was not appearing.)  I've waited a week, thinking that there would be an increased workload around the release of R 3.5.0.  This was the message I got 7 days ago:
#-----------------------------------------------------
[This was generated from CRAN.R-project.org/submit.html]

The following package was uploaded to CRAN:
===========================================

Package Information:
Package: muhaz 
Version: 1.2.7 
Title: Hazard Function Estimation in Survival Analysis 
Author(s): S original by Kenneth Hess, <khess at odin.mdacc.tmc.edu> R port 
by R. Gentleman 
Maintainer: David Winsemius <dwinsemius at comcast.net> 
Depends: R(>= 2.3) 
Description: Produces a smooth estimate of the hazard function for 
censored data. 
License: GPL 
Imports: survival 

If this is just caught in a logjam of package revisions, then I'm in no particular hurry, but if I caused difficulties in my process of submission, I apologize and will try to submit again.

Best;
David Winsemius

From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Tue May 22 14:12:45 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Tue, 22 May 2018 14:12:45 +0200
Subject: [R-pkg-devel] 
 Puzzled by delay in getting version update on CRAN
In-Reply-To: <8BCCC784-378C-448C-BCA6-E786CFFDA167@comcast.net>
References: <8BCCC784-378C-448C-BCA6-E786CFFDA167@comcast.net>
Message-ID: <371acf99-49a4-2bba-3140-2d135808a4ff@statistik.tu-dortmund.de>

Strange, I see the packages apparead in the queue and was processed 
automatically, but neither you nor we got a message from the system. 
Perhaps network problems?
Can you please submit that version again?

Best,
Uwe


On 22.05.2018 13:20, David Winsemius wrote:
> 
> I'm wondering if I should have gotten an error report for a new version submission. I submitted the update in an effort to have some of the Notes corrected. (The Note regarding registering certain compiled routines was not address. I was testing on a Mac where that issue was not appearing.)  I've waited a week, thinking that there would be an increased workload around the release of R 3.5.0.  This was the message I got 7 days ago:
> #-----------------------------------------------------
> [This was generated from CRAN.R-project.org/submit.html]
> 
> The following package was uploaded to CRAN:
> ===========================================
> 
> Package Information:
> Package: muhaz
> Version: 1.2.7
> Title: Hazard Function Estimation in Survival Analysis
> Author(s): S original by Kenneth Hess, <khess at odin.mdacc.tmc.edu> R port
> by R. Gentleman
> Maintainer: David Winsemius <dwinsemius at comcast.net>
> Depends: R(>= 2.3)
> Description: Produces a smooth estimate of the hazard function for
> censored data.
> License: GPL
> Imports: survival
> 
> If this is just caught in a logjam of package revisions, then I'm in no particular hurry, but if I caused difficulties in my process of submission, I apologize and will try to submit again.
> 
> Best;
> David Winsemius
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From dwin@emiu@ @ending from comc@@t@net  Tue May 22 14:32:48 2018
From: dwin@emiu@ @ending from comc@@t@net (David Winsemius)
Date: Tue, 22 May 2018 08:32:48 -0400
Subject: [R-pkg-devel] 
 Puzzled by delay in getting version update on CRAN
In-Reply-To: <371acf99-49a4-2bba-3140-2d135808a4ff@statistik.tu-dortmund.de>
References: <8BCCC784-378C-448C-BCA6-E786CFFDA167@comcast.net>
 <371acf99-49a4-2bba-3140-2d135808a4ff@statistik.tu-dortmund.de>
Message-ID: <50268109-F3CF-4D8C-B9A1-60DC590B7E7D@comcast.net>



> On May 22, 2018, at 8:12 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> Strange, I see the packages apparead in the queue and was processed automatically, but neither you nor we got a message from the system. Perhaps network problems?
> Can you please submit that version again?
> 

Thanks for the reply. I will do so in a couple of days when I get back to my development box.

Best;
David.

> Best,
> Uwe
> 
> 
> On 22.05.2018 13:20, David Winsemius wrote:
>> I'm wondering if I should have gotten an error report for a new version submission. I submitted the update in an effort to have some of the Notes corrected. (The Note regarding registering certain compiled routines was not address. I was testing on a Mac where that issue was not appearing.)  I've waited a week, thinking that there would be an increased workload around the release of R 3.5.0.  This was the message I got 7 days ago:
>> #-----------------------------------------------------
>> [This was generated from CRAN.R-project.org/submit.html]
>> The following package was uploaded to CRAN:
>> ===========================================
>> Package Information:
>> Package: muhaz
>> Version: 1.2.7
>> Title: Hazard Function Estimation in Survival Analysis
>> Author(s): S original by Kenneth Hess, <khess at odin.mdacc.tmc.edu> R port
>> by R. Gentleman
>> Maintainer: David Winsemius <dwinsemius at comcast.net>
>> Depends: R(>= 2.3)
>> Description: Produces a smooth estimate of the hazard function for
>> censored data.
>> License: GPL
>> Imports: survival
>> If this is just caught in a logjam of package revisions, then I'm in no particular hurry, but if I caused difficulties in my process of submission, I apologize and will try to submit again.
>> Best;
>> David Winsemius
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From i@uc@r86 @ending from gm@il@com  Wed May 23 17:22:24 2018
From: i@uc@r86 @ending from gm@il@com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Wed, 23 May 2018 17:22:24 +0200
Subject: [R-pkg-devel] Compiled code checks raise a WARNING in Fedora 28
Message-ID: <CALEXWq0ioYgsYU=x-R5cT5oCzvTReVr=J6=o_FRfe-N4OmLuSQ@mail.gmail.com>

Hi,

For other Fedora users that may be struggling with this too...

Fedora 28 introduced new hardening flags for compiled code (see [1]).
Particularly, -D_GLIBCXX_ASSERTIONS is added to the default CXXFLAGS
(verify the output of 'R CMD config CXXFLAGS'), which enables range
checks for C++ arrays, vectors and strings. As a consequence, you may
see the following after running 'R CMD check' on your package with C++
code:

checking compiled code ... WARNING
Found ?abort?, possibly from ?abort? (C)
Found ?printf?, possibly from ?printf? (C)

I'm not sure whether this is a false positive or not. Anyway, a quick
workaround is to disable this flag by including -U_GLIBCXX_ASSERTIONS
in your local Makevars.

Regards,
I?aki

[1] https://fedoraproject.org/wiki/Changes/HardeningFlags28


From edd @ending from debi@n@org  Wed May 23 17:40:09 2018
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Wed, 23 May 2018 10:40:09 -0500
Subject: [R-pkg-devel] Compiled code checks raise a WARNING in Fedora 28
In-Reply-To: <CALEXWq0ioYgsYU=x-R5cT5oCzvTReVr=J6=o_FRfe-N4OmLuSQ@mail.gmail.com>
References: <CALEXWq0ioYgsYU=x-R5cT5oCzvTReVr=J6=o_FRfe-N4OmLuSQ@mail.gmail.com>
Message-ID: <23301.35673.587623.336776@rob.eddelbuettel.com>


On 23 May 2018 at 17:22, I?aki ?car wrote:
| Hi,
| 
| For other Fedora users that may be struggling with this too...
| 
| Fedora 28 introduced new hardening flags for compiled code (see [1]).
| Particularly, -D_GLIBCXX_ASSERTIONS is added to the default CXXFLAGS
| (verify the output of 'R CMD config CXXFLAGS'), which enables range
| checks for C++ arrays, vectors and strings. As a consequence, you may
| see the following after running 'R CMD check' on your package with C++
| code:
| 
| checking compiled code ... WARNING
| Found ?abort?, possibly from ?abort? (C)
| Found ?printf?, possibly from ?printf? (C)
| 
| I'm not sure whether this is a false positive or not. Anyway, a quick
| workaround is to disable this flag by including -U_GLIBCXX_ASSERTIONS
| in your local Makevars.

AFAICT that has little do with Fedora, it is just R being picky. Writing R
Extensions told you about abort() et al for years:

  Under no circumstances should your compiled code ever call @code{abort}
  or @code{exit}@footnote{or where supported the variants @code{_Exit} and
  @code{_exit}.}: these terminate the user's @R{} process, quite possibly
  including all his unsaved work.  One usage that could call @code{abort}
  is the @code{assert} macro in C or C++ functions, which should never be
  active in production code.  The normal way to ensure that is to define
  the macro @code{NDEBUG}, and @command{R CMD INSTALL} does so as part of
  the compilation flags.  If you wish to use @code{assert} during
  development. you can include @code{-UNDEBUG} in @code{PKG_CPPFLAGS}.
  Note that your own @file{src/Makefile} or makefiles in sub-directories
  may also need to define @code{NDEBUG}.

(Quoted from R-release's manual source)

Also:

edd at rob:~/deb/r-base$ ag "Found " src/library/tools/R/sotools.R
481:                 c(strwrap(gettextf("Found %s, possibly from %s",
702:              strwrap(paste("Found non-API calls to R:",
705:          } else paste("  Found non-API call to R:", sQuote(x))
716:              strwrap(paste("Found no calls to:",
719:          } else paste("  Found no call to:", sQuote(x))
edd at rob:~/deb/r-base$

I am kinda surprised you had not seen these before :)

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From i@uc@r86 @ending from gm@il@com  Wed May 23 18:09:49 2018
From: i@uc@r86 @ending from gm@il@com (=?UTF-8?B?ScOxYWtpIMOaY2Fy?=)
Date: Wed, 23 May 2018 18:09:49 +0200
Subject: [R-pkg-devel] Compiled code checks raise a WARNING in Fedora 28
In-Reply-To: <23301.35673.587623.336776@rob.eddelbuettel.com>
References: <CALEXWq0ioYgsYU=x-R5cT5oCzvTReVr=J6=o_FRfe-N4OmLuSQ@mail.gmail.com>
 <23301.35673.587623.336776@rob.eddelbuettel.com>
Message-ID: <CALEXWq3jypVr5r3BHf37i-nDi-Xo9UPTvvL=vM-hCqN1Rao+5Q@mail.gmail.com>

2018-05-23 17:40 GMT+02:00 Dirk Eddelbuettel <edd at debian.org>:
>
> On 23 May 2018 at 17:22, I?aki ?car wrote:
> | Hi,
> |
> | For other Fedora users that may be struggling with this too...
> |
> | Fedora 28 introduced new hardening flags for compiled code (see [1]).
> | Particularly, -D_GLIBCXX_ASSERTIONS is added to the default CXXFLAGS
> | (verify the output of 'R CMD config CXXFLAGS'), which enables range
> | checks for C++ arrays, vectors and strings. As a consequence, you may
> | see the following after running 'R CMD check' on your package with C++
> | code:
> |
> | checking compiled code ... WARNING
> | Found ?abort?, possibly from ?abort? (C)
> | Found ?printf?, possibly from ?printf? (C)
> |
> | I'm not sure whether this is a false positive or not. Anyway, a quick
> | workaround is to disable this flag by including -U_GLIBCXX_ASSERTIONS
> | in your local Makevars.
>
> AFAICT that has little do with Fedora, it is just R being picky. Writing R
> Extensions told you about abort() et al for years:
>
>   Under no circumstances should your compiled code ever call @code{abort}
>   or @code{exit}@footnote{or where supported the variants @code{_Exit} and
>   @code{_exit}.}: these terminate the user's @R{} process, quite possibly
>   including all his unsaved work.  One usage that could call @code{abort}
>   is the @code{assert} macro in C or C++ functions, which should never be
>   active in production code.  The normal way to ensure that is to define
>   the macro @code{NDEBUG}, and @command{R CMD INSTALL} does so as part of
>   the compilation flags.  If you wish to use @code{assert} during
>   development. you can include @code{-UNDEBUG} in @code{PKG_CPPFLAGS}.
>   Note that your own @file{src/Makefile} or makefiles in sub-directories
>   may also need to define @code{NDEBUG}.
>
> (Quoted from R-release's manual source)

Yes, I know. The thing is that, with -D_GLIBCXX_ASSERTIONS, I see

$ strings src/*.o | grep abort | sort | uniq
abort
__builtin_abort
__cxa_guard_abort

and without it, the first two lines go away. So it seems that those
assertions may result in a call to 'abort'. I don't know whether R is
right or not in its *pickiness* for this particular case.

I?aki

>
> Also:
>
> edd at rob:~/deb/r-base$ ag "Found " src/library/tools/R/sotools.R
> 481:                 c(strwrap(gettextf("Found %s, possibly from %s",
> 702:              strwrap(paste("Found non-API calls to R:",
> 705:          } else paste("  Found non-API call to R:", sQuote(x))
> 716:              strwrap(paste("Found no calls to:",
> 719:          } else paste("  Found no call to:", sQuote(x))
> edd at rob:~/deb/r-base$
>
> I am kinda surprised you had not seen these before :)
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd @ending from debi@n@org  Wed May 23 19:44:14 2018
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Wed, 23 May 2018 12:44:14 -0500
Subject: [R-pkg-devel] Compiled code checks raise a WARNING in Fedora 28
In-Reply-To: <CALEXWq3jypVr5r3BHf37i-nDi-Xo9UPTvvL=vM-hCqN1Rao+5Q@mail.gmail.com>
References: <CALEXWq0ioYgsYU=x-R5cT5oCzvTReVr=J6=o_FRfe-N4OmLuSQ@mail.gmail.com>
 <23301.35673.587623.336776@rob.eddelbuettel.com>
 <CALEXWq3jypVr5r3BHf37i-nDi-Xo9UPTvvL=vM-hCqN1Rao+5Q@mail.gmail.com>
Message-ID: <23301.43118.988390.851059@rob.eddelbuettel.com>


On 23 May 2018 at 18:09, I?aki ?car wrote:
| 2018-05-23 17:40 GMT+02:00 Dirk Eddelbuettel <edd at debian.org>:
| >
| > On 23 May 2018 at 17:22, I?aki ?car wrote:
| > | Hi,
| > |
| > | For other Fedora users that may be struggling with this too...
| > |
| > | Fedora 28 introduced new hardening flags for compiled code (see [1]).
| > | Particularly, -D_GLIBCXX_ASSERTIONS is added to the default CXXFLAGS
| > | (verify the output of 'R CMD config CXXFLAGS'), which enables range
| > | checks for C++ arrays, vectors and strings. As a consequence, you may
| > | see the following after running 'R CMD check' on your package with C++
| > | code:
| > |
| > | checking compiled code ... WARNING
| > | Found ?abort?, possibly from ?abort? (C)
| > | Found ?printf?, possibly from ?printf? (C)
| > |
| > | I'm not sure whether this is a false positive or not. Anyway, a quick
| > | workaround is to disable this flag by including -U_GLIBCXX_ASSERTIONS
| > | in your local Makevars.
| >
| > AFAICT that has little do with Fedora, it is just R being picky. Writing R
| > Extensions told you about abort() et al for years:
| >
| >   Under no circumstances should your compiled code ever call @code{abort}
| >   or @code{exit}@footnote{or where supported the variants @code{_Exit} and
| >   @code{_exit}.}: these terminate the user's @R{} process, quite possibly
| >   including all his unsaved work.  One usage that could call @code{abort}
| >   is the @code{assert} macro in C or C++ functions, which should never be
| >   active in production code.  The normal way to ensure that is to define
| >   the macro @code{NDEBUG}, and @command{R CMD INSTALL} does so as part of
| >   the compilation flags.  If you wish to use @code{assert} during
| >   development. you can include @code{-UNDEBUG} in @code{PKG_CPPFLAGS}.
| >   Note that your own @file{src/Makefile} or makefiles in sub-directories
| >   may also need to define @code{NDEBUG}.
| >
| > (Quoted from R-release's manual source)
| 
| Yes, I know. The thing is that, with -D_GLIBCXX_ASSERTIONS, I see
| 
| $ strings src/*.o | grep abort | sort | uniq
| abort
| __builtin_abort
| __cxa_guard_abort
| 
| and without it, the first two lines go away. So it seems that those
| assertions may result in a call to 'abort'. I don't know whether R is
| right or not in its *pickiness* for this particular case.

Doh. I was dense. You are quite right, it seems -- the new instrumentation
'unmasks' more uses of abort which R's shared library symbol grep analysis
stumbles over.  I should have stayed under my rock it seems -- sorry about
the noise.

Dirk
 
| I?aki
| 
| >
| > Also:
| >
| > edd at rob:~/deb/r-base$ ag "Found " src/library/tools/R/sotools.R
| > 481:                 c(strwrap(gettextf("Found %s, possibly from %s",
| > 702:              strwrap(paste("Found non-API calls to R:",
| > 705:          } else paste("  Found non-API call to R:", sQuote(x))
| > 716:              strwrap(paste("Found no calls to:",
| > 719:          } else paste("  Found no call to:", sQuote(x))
| > edd at rob:~/deb/r-base$
| >
| > I am kinda surprised you had not seen these before :)
| >
| > Dirk
| >
| > --
| > http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From R@iner @ending from krug@@de  Thu May 24 08:45:59 2018
From: R@iner @ending from krug@@de (Rainer Krug)
Date: Thu, 24 May 2018 08:45:59 +0200
Subject: [R-pkg-devel] plot graph (png, svg, eps, pdf, vdx,
 ok tikz) to device
In-Reply-To: <94710478-B33C-4C07-AB59-DFC9722041E7@krugs.de>
References: <9717DC88-20E8-45A0-B068-5BC2F818E58D@krugs.de>
 <19831277.5WCJ4o2pA0@ryz> <94710478-B33C-4C07-AB59-DFC9722041E7@krugs.de>
Message-ID: <E22871F9-F00B-458A-ADE9-A0B9FB7660C5@krugs.de>

Yes - I a now using grImport and eps (after trying svg and grImport2). I still need a temporary file, but I can live with that for the moment.

Thanks,

Rainer


> On 15 May 2018, at 14:00, Rainer M. Krug <Rainer at krugs.de> wrote:
> 
> 
> 
> Von meinem iPhone gesendet
> 
>> Am 15.05.2018 um 13:54 schrieb Johannes Ranke <johannes.ranke at jrwb.de <mailto:johannes.ranke at jrwb.de>>:
>> 
>> Hi,
>> 
>> have a look at the grImport package. It can import eps, so at least you get a
>> vector based graph.
> 
> Sounds interesting- I?ll check it out tomorrow and report back if it works well.
> 
>> 
>> Alternatively, you may want to check grImport2 which imports svg.
>> 
>> Kind regards,
>> 
>> Johannes
>> 
>> Am Dienstag, 15. Mai 2018, 13:22:16 CEST schrieb Rainer Krug:
>>> Hi
>>> 
>>> I asked the question at stack exchange yesterday (
>>> https://stackoverflow.com/q/50325139/632423 ) and did not get a response so
>>> far, so I repost it here:
>>> 
>>> ####
>>> 
>>> I have the following situation: I use an external command (plantuml -
>>> http://plantuml.com/ ) to create a graph. This is done via R by using a
>>> (my) package ( https://github.com/rkrug/plantuml ). The resulting graph can
>>> be a file (png, svg, eps, pdf, vdx or LaTeX/Tikz with or without preamble)
>>> or I can send the image to stdout, using the same formats.
>>> 
>>> Now I want to plot this graph as R-like as possible, i.e. in a graphic
>>> device. At the moment I am using a temporary file, which I display using
>>> readPNG() and grid::grid.raster() which works, but I am not that happy with
>>> this approach as
>>> 
>>>   ? I have to use a temporary file which I would like to avoid, and
>>>   ? it is a raster format and I would prefer a vector format.
>>> 
>>> My question is therefore:
>>> 
>>>   ? Is there a way to display any of the vector formats in a graphics device
>>> in R? ? Can I pipe stdout (the result from the call to plantuml) directly
>>> into the device (or through any function) without having to create an
>>> intermediate file?
>>> 
>>> ####
>>> 
>>> Thanks for any [pointers,
>>> 
>>> Rainer
>>> 
>>> 
>>> --
>>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology,
>>> UCT), Dipl. Phys. (Germany)
>>> 
>>> University of Z?rich
>>> 
>>> Cell:       +41 (0)78 630 66 57
>>> email:      Rainer at krugs.de
>>> Skype:      RMkrug
>>> 
>>> PGP: 0x0F52F982
>> 
>> 
>> --
>> Johannes Ranke
>> Wissenschaftlicher Berater
>> https://jrwb.de/contact
> 
> ______________________________________________
> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

University of Z?rich

Cell:       +41 (0)78 630 66 57
email:      Rainer at krugs.de
Skype:      RMkrug

PGP: 0x0F52F982




-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 488 bytes
Desc: Message signed with OpenPGP
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20180524/f3cf3870/attachment.sig>

From Jori@@Mey@ @ending from ugent@be  Thu May 24 14:17:07 2018
From: Jori@@Mey@ @ending from ugent@be (Joris Meys)
Date: Thu, 24 May 2018 14:17:07 +0200
Subject: [R-pkg-devel] Creating S3 methods for S4 classes
Message-ID: <CAO1zAVYTFs15MNLddoJ1DF4Jq4vz12zc1bm6+4kgsFtwv86XcQ@mail.gmail.com>

Dear all,

per the manual, one should create and register both the S3 and a S4 method
if one needs a method for an S4 class for a function using S3 dispatching.
This is cumbersome, and not very optimal.

I was wondering if there's a better way to do this. Currently I recreate a
generic in my package and create a default method that sends all the other
classes to the S3 generic, eg:

setGeneric("predict")
setMethod("predict", "ANY", stats::predict)

I'm not sure if this hasn't any adverse consequences, as it is not the
recommended approach

It would be great if these generics could be made available through stats4.
If this would be the prefered route, I volunteer to create the patch for
that.

Any thoughts?
Cheers
Joris

-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From m@echler @ending from @t@t@m@th@ethz@ch  Thu May 24 15:31:55 2018
From: m@echler @ending from @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 24 May 2018 15:31:55 +0200
Subject: [R-pkg-devel] Creating S3 methods for S4 classes
In-Reply-To: <CAO1zAVYTFs15MNLddoJ1DF4Jq4vz12zc1bm6+4kgsFtwv86XcQ@mail.gmail.com>
References: <CAO1zAVYTFs15MNLddoJ1DF4Jq4vz12zc1bm6+4kgsFtwv86XcQ@mail.gmail.com>
Message-ID: <23302.48843.696227.714403@stat.math.ethz.ch>

Dear Joris,

in my eyes, this is clearly a Q that should be asked on R-devel,
not R-package-devel ...

>>>>> Joris Meys 
>>>>>     on Thu, 24 May 2018 14:17:07 +0200 writes:

    > Dear all, per the manual, one should create and register
    > both the S3 and a S4 method if one needs a method for an
    > S4 class for a function using S3 dispatching.  This is
    > cumbersome, and not very optimal.

    > I was wondering if there's a better way to do
    > this. Currently I recreate a generic in my package and
    > create a default method that sends all the other classes
    > to the S3 generic, eg:

    > setGeneric("predict") setMethod("predict", "ANY",
    > stats::predict)

    > I'm not sure if this hasn't any adverse consequences, as
    > it is not the recommended approach

    > It would be great if these generics could be made
    > available through stats4.  If this would be the prefered
    > route, I volunteer to create the patch for that.

    > Any thoughts?  Cheers Joris

    > -- 
    > Joris Meys Statistical consultant

    > Department of Data Analysis and Mathematical Modelling
    > Ghent University Coupure Links 653, B-9000 Gent (Belgium)
    > <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

    > tel: +32 (0)9 264 61 79
    > -----------
    > Biowiskundedagen 2017-2018
    > http://www.biowiskundedagen.ugent.be/

    > -------------------------------
    > Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

    > 	[[alternative HTML version deleted]]

    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From georgi@bo@hn@kov @ending from m@nche@ter@@c@uk  Thu May 24 16:37:37 2018
From: georgi@bo@hn@kov @ending from m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Thu, 24 May 2018 14:37:37 +0000
Subject: [R-pkg-devel] Creating S3 methods for S4 classes
In-Reply-To: <CAO1zAVYTFs15MNLddoJ1DF4Jq4vz12zc1bm6+4kgsFtwv86XcQ@mail.gmail.com>
References: <CAO1zAVYTFs15MNLddoJ1DF4Jq4vz12zc1bm6+4kgsFtwv86XcQ@mail.gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F65AD20@MBXP01.ds.man.ac.uk>

My understanding is that the  S3 methods guard against situations where only S3 dispatch is done,
e.g. by some internal generics. It may well be that for 'predict' this is not theoretical possibility.

I second your suggestion about predict and stats4. I have wondered in the past why 'predict' has been left out of stats4. 

Georgi Boshnakov




-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Joris Meys
Sent: 24 May 2018 13:17
To: R Package Development
Subject: [R-pkg-devel] Creating S3 methods for S4 classes

Dear all,

per the manual, one should create and register both the S3 and a S4 method
if one needs a method for an S4 class for a function using S3 dispatching.
This is cumbersome, and not very optimal.

I was wondering if there's a better way to do this. Currently I recreate a
generic in my package and create a default method that sends all the other
classes to the S3 generic, eg:

setGeneric("predict")
setMethod("predict", "ANY", stats::predict)

I'm not sure if this hasn't any adverse consequences, as it is not the
recommended approach

It would be great if these generics could be made available through stats4.
If this would be the prefered route, I volunteer to create the patch for
that.

Any thoughts?
Cheers
Joris

-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From georgi@bo@hn@kov @ending from m@nche@ter@@c@uk  Thu May 24 18:07:43 2018
From: georgi@bo@hn@kov @ending from m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Thu, 24 May 2018 16:07:43 +0000
Subject: [R-pkg-devel] Creating S3 methods for S4 classes
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F65AD20@MBXP01.ds.man.ac.uk>
References: <CAO1zAVYTFs15MNLddoJ1DF4Jq4vz12zc1bm6+4kgsFtwv86XcQ@mail.gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F65AD20@MBXP01.ds.man.ac.uk>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F65AD8A@MBXP01.ds.man.ac.uk>

Hi Joris,

At least some aspects of this topic are of interest on this list, given its complexity.

I think that your example:

setGeneric("predict")
setMethod("predict", "ANY", stats::predict)

creates a new function 'predict' in your namespace, it doesn't make stats::predict S4 generic. This is fine when your 'predict' is visible
but  when it is not, stats::predict will be called. 

So, for classes for which you define methods for predict, what happens may depend on whether or not your package is attached. 
On the other hand, S3 methods defined for predict, will be used (if exported) as long as  the package is attached. 

I may be wrong but for this or similar reasons I believe that 'stats4' needs to be in "Depends" to ensure that it shadows the base functions it redefines. 

Georgi Boshnakov


====================================

> coef
function (object, ...) 
UseMethod("coef")
<bytecode: 0x000000000a844730>
<environment: namespace:stats>

> library(stats4)
> coef
standardGeneric for "coef" defined from package "stats"

function (object, ...) 
standardGeneric("coef")
<environment: 0x000000000b5ddcb8>
Methods may be defined for arguments: object
Use  showMethods("coef")  for currently available ones.

===================================



-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Georgi Boshnakov
Sent: 24 May 2018 15:38
To: Joris.Meys at ugent.be; R Package Development
Subject: Re: [R-pkg-devel] Creating S3 methods for S4 classes

My understanding is that the  S3 methods guard against situations where only S3 dispatch is done,
e.g. by some internal generics. It may well be that for 'predict' this is not theoretical possibility.

I second your suggestion about predict and stats4. I have wondered in the past why 'predict' has been left out of stats4. 

Georgi Boshnakov




-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Joris Meys
Sent: 24 May 2018 13:17
To: R Package Development
Subject: [R-pkg-devel] Creating S3 methods for S4 classes

Dear all,

per the manual, one should create and register both the S3 and a S4 method
if one needs a method for an S4 class for a function using S3 dispatching.
This is cumbersome, and not very optimal.

I was wondering if there's a better way to do this. Currently I recreate a
generic in my package and create a default method that sends all the other
classes to the S3 generic, eg:

setGeneric("predict")
setMethod("predict", "ANY", stats::predict)

I'm not sure if this hasn't any adverse consequences, as it is not the
recommended approach

It would be great if these generics could be made available through stats4.
If this would be the prefered route, I volunteer to create the patch for
that.

Any thoughts?
Cheers
Joris

-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From puzzle@teven @ending from gm@il@com  Thu May 24 22:11:29 2018
From: puzzle@teven @ending from gm@il@com (Steven Spiriti)
Date: Thu, 24 May 2018 13:11:29 -0700
Subject: [R-pkg-devel] Errors in my package
Message-ID: <CAGVr+e_zEgKM5BmS+RmdbuUn7j8t+3U-O43vibfBXx9=fP+Z4g@mail.gmail.com>

To Whom It May Concern:

    I have created a package called "freeknotsplines" in R, and I need to
make a few updates to it.  I resubmitted the package, and received the
following error message:

checking examples ... ERROR
Running examples in ?freeknotsplines-Ex.R? failed
The error most likely occurred in:

> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
> ### Name: coef.freekt
> ### Title: Compute Coefficients of B-Splines For Free-Knot Splines
> ### Aliases: coef.freekt
> ### Keywords: nonparametric regression smooth
>
> ### ** Examples
>
> x <- 0:30/30
> truey <- x*sin(10*x)
> set.seed(10556)
> y <- truey + rnorm(31, 0, 0.2)
> xy.freekt <- freelsgen(x, y, degree = 2, numknot = 2, 555)
> coef(xy.freekt)
Error: $ operator not defined for this S4 class
Execution halted

     This error occurs in one of the examples in the documentation.   It is
platform dependent, and does not occur on the machine I am using to create
the package.  freekt is a new class, which is intended to be a S3 class,
not a S4 class.

 Here is the code for coef.freekt:

coef.freekt <- function(object, ...)
{
  xdat <- object at x
  ydat <- object at y
  optknot <- object at optknot
  ord <- object at degree + 1
  lambda <- object at lambda
  fulloptknot <- c(rep(min(xdat), ord), optknot, rep(max(xdat), ord))  #
includes endpoints
  Xmat <- splineDesign(fulloptknot, xdat, ord)
  if ((lambda == 0) | (length(optknot) == 0))
    coef <- solve(t(Xmat)%*%Xmat, t(Xmat)%*%ydat)
  else
    {
      numknots <- length(optknot)
      Amat <- chgbasismat(fulloptknot, ord)
      Istar <- diag(c(rep(0, times = ord), rep(1, times = numknots)))
      coef <- solve(t(Xmat)%*%Xmat + lambda*t(Amat)%*%Istar%*%Amat,
                    t(Xmat)%*%ydat)
    }
  return(coef)
}

Can someone please help me figure out what I am doing that is causing this
error?

Sincerely,

Steven Spiriti

	[[alternative HTML version deleted]]


From georgi@bo@hn@kov @ending from m@nche@ter@@c@uk  Thu May 24 22:28:00 2018
From: georgi@bo@hn@kov @ending from m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Thu, 24 May 2018 20:28:00 +0000
Subject: [R-pkg-devel] Errors in my package
In-Reply-To: <CAGVr+e_zEgKM5BmS+RmdbuUn7j8t+3U-O43vibfBXx9=fP+Z4g@mail.gmail.com>
References: <CAGVr+e_zEgKM5BmS+RmdbuUn7j8t+3U-O43vibfBXx9=fP+Z4g@mail.gmail.com>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F65ADCE@MBXP01.ds.man.ac.uk>

Well, the computer is very good at doing what we ask it to, not what we intend to.

In your case coef.freekt() clearly expects an S4 object (clue: object@) and apparently that's what you feed it with.
A simple way to see where the problem actually comes from is

> options(error=recover)
> coef(xy.freekt)


Then explore what is going on.

Georgi Boshnakov 

-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Steven Spiriti
Sent: 24 May 2018 21:11
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Errors in my package

To Whom It May Concern:

    I have created a package called "freeknotsplines" in R, and I need to
make a few updates to it.  I resubmitted the package, and received the
following error message:

checking examples ... ERROR
Running examples in ?freeknotsplines-Ex.R? failed
The error most likely occurred in:

> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
> ### Name: coef.freekt
> ### Title: Compute Coefficients of B-Splines For Free-Knot Splines
> ### Aliases: coef.freekt
> ### Keywords: nonparametric regression smooth
>
> ### ** Examples
>
> x <- 0:30/30
> truey <- x*sin(10*x)
> set.seed(10556)
> y <- truey + rnorm(31, 0, 0.2)
> xy.freekt <- freelsgen(x, y, degree = 2, numknot = 2, 555)
> coef(xy.freekt)
Error: $ operator not defined for this S4 class
Execution halted

     This error occurs in one of the examples in the documentation.   It is
platform dependent, and does not occur on the machine I am using to create
the package.  freekt is a new class, which is intended to be a S3 class,
not a S4 class.

 Here is the code for coef.freekt:

coef.freekt <- function(object, ...)
{
  xdat <- object at x
  ydat <- object at y
  optknot <- object at optknot
  ord <- object at degree + 1
  lambda <- object at lambda
  fulloptknot <- c(rep(min(xdat), ord), optknot, rep(max(xdat), ord))  #
includes endpoints
  Xmat <- splineDesign(fulloptknot, xdat, ord)
  if ((lambda == 0) | (length(optknot) == 0))
    coef <- solve(t(Xmat)%*%Xmat, t(Xmat)%*%ydat)
  else
    {
      numknots <- length(optknot)
      Amat <- chgbasismat(fulloptknot, ord)
      Istar <- diag(c(rep(0, times = ord), rep(1, times = numknots)))
      coef <- solve(t(Xmat)%*%Xmat + lambda*t(Amat)%*%Istar%*%Amat,
                    t(Xmat)%*%ydat)
    }
  return(coef)
}

Can someone please help me figure out what I am doing that is causing this
error?

Sincerely,

Steven Spiriti

	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

From murdoch@dunc@n @ending from gm@il@com  Thu May 24 23:40:27 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Thu, 24 May 2018 17:40:27 -0400
Subject: [R-pkg-devel] Errors in my package
In-Reply-To: <CAGVr+e_zEgKM5BmS+RmdbuUn7j8t+3U-O43vibfBXx9=fP+Z4g@mail.gmail.com>
References: <CAGVr+e_zEgKM5BmS+RmdbuUn7j8t+3U-O43vibfBXx9=fP+Z4g@mail.gmail.com>
Message-ID: <31935855-7071-548f-4e7b-5473685aea37@gmail.com>

On 24/05/2018 4:11 PM, Steven Spiriti wrote:
> To Whom It May Concern:
> 
>      I have created a package called "freeknotsplines" in R, and I need to
> make a few updates to it.  I resubmitted the package, and received the
> following error message:
> 
> checking examples ... ERROR
> Running examples in ?freeknotsplines-Ex.R? failed
> The error most likely occurred in:
> 
>> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>> ### Name: coef.freekt
>> ### Title: Compute Coefficients of B-Splines For Free-Knot Splines
>> ### Aliases: coef.freekt
>> ### Keywords: nonparametric regression smooth
>>
>> ### ** Examples
>>
>> x <- 0:30/30
>> truey <- x*sin(10*x)
>> set.seed(10556)
>> y <- truey + rnorm(31, 0, 0.2)
>> xy.freekt <- freelsgen(x, y, degree = 2, numknot = 2, 555)
>> coef(xy.freekt)
> Error: $ operator not defined for this S4 class
> Execution halted
> 
>       This error occurs in one of the examples in the documentation.   It is
> platform dependent, and does not occur on the machine I am using to create
> the package.  freekt is a new class, which is intended to be a S3 class,
> not a S4 class.

But you are using the @ operator on it:

> 
>   Here is the code for coef.freekt:
> 
> coef.freekt <- function(object, ...)
> {
>    xdat <- object at x
>    ydat <- object at y

That's normally something that you would do with an S4 object.  We can't 
tell from your posting what xy.freekt really is; maybe it would help if 
you posted the result of str(xy.freekt) after creating it.

Duncan Murdoch


>    optknot <- object at optknot
>    ord <- object at degree + 1
>    lambda <- object at lambda
>    fulloptknot <- c(rep(min(xdat), ord), optknot, rep(max(xdat), ord))  #
> includes endpoints
>    Xmat <- splineDesign(fulloptknot, xdat, ord)
>    if ((lambda == 0) | (length(optknot) == 0))
>      coef <- solve(t(Xmat)%*%Xmat, t(Xmat)%*%ydat)
>    else
>      {
>        numknots <- length(optknot)
>        Amat <- chgbasismat(fulloptknot, ord)
>        Istar <- diag(c(rep(0, times = ord), rep(1, times = numknots)))
>        coef <- solve(t(Xmat)%*%Xmat + lambda*t(Amat)%*%Istar%*%Amat,
>                      t(Xmat)%*%ydat)
>      }
>    return(coef)
> }
> 
> Can someone please help me figure out what I am doing that is causing this
> error?
> 
> Sincerely,
> 
> Steven Spiriti
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ru@@ell-lenth @ending from uiow@@edu  Fri May 25 01:14:42 2018
From: ru@@ell-lenth @ending from uiow@@edu (Lenth, Russell V)
Date: Thu, 24 May 2018 23:14:42 +0000
Subject: [R-pkg-devel] Courtesy methods and explosive dependencies
Message-ID: <DM6PR04MB43804E67FD10D2564E580C50F16A0@DM6PR04MB4380.namprd04.prod.outlook.com>

Package developers,

I am trying to severely cut down on the number of dependencies of my package emmeans. It is now 48, which is quite a few (but that is down from over 100 in the preceding version, where I made the unwise choice of including a particularly greedy package in Imports). I hate to force users to install dozens of packages that they don't really need or want, but it seems very hard to avoid.

Case in point: emmeans provides additional methods for 'cld' and 'glht' from the multcomp package. Accordingly, I import their generics, and register my additional methods. But because I import the generics, I must list multcomp in Imports, and that results in the addition of 16 required packages, some of which I never use. More important, I believe that NONE of those 16 packages are required for the correct functioning of my courtesy methods. The only things I really need are the generics.

On the flip side, emmeans defines some generics of its own that I invite other package developers to extend so that emmeans supports their models. If those packages import emmeans, there is an overhead of 48 dependencies; again, most of these are packages that are not needed at all for those packages' methods to work. I don't like being responsible for that.

I believe this is a very common problem, not just with my own packages. It's one thing to extend a base method like 'print'; but extending methods in contributed packages creates these dependency explosions. I have hundreds of packages installed on my system - a couple dozen I care about, another few dozen that seem fairly desirable, and a couple hundred that I don't even know what they're for, other than that things will break if I uninstall them.

I do know of a couple ways to reduce these dependencies in the case of my multcomp dependencies:

1. I could simply export my S3 methods for cld and glht as functions, rather than registering them as S3 methods. 
    Then I could move multcomp to Suggests. The downside is that it clutters the namespace for emmeans.

2. I could define the generics for cld and glht in my own package, and export them; and move multcomp to Suggests.
    Again, it clutters the namespace, and creates warning messages about (if not real issues with) masking.

Probably (1) is better than (2), but is it better than what I do now? Is there something else that I (and probably a whole lot of other people) don't know?

I wish there were an ImportGenerics or an ImportWithoutDependencies or some such field possible in DESCRIPTION.

I appreciate any suggestions. Thanks

Russ

--
Russell V. Lenth ?- ?Professor Emeritus
Department of Statistics and Actuarial Science ??
The University of Iowa ?- ?Iowa City, IA 52242 ?USA ??
Voice (319)335-0712 ?- ?FAX (319)335-3017
russell-lenth at uiowa.edu??- ?http://www.stat.uiowa.edu/~rlenth/?


From m@echler @ending from @t@t@m@th@ethz@ch  Fri May 25 09:13:13 2018
From: m@echler @ending from @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 25 May 2018 09:13:13 +0200
Subject: [R-pkg-devel] Courtesy methods and explosive dependencies
In-Reply-To: <DM6PR04MB43804E67FD10D2564E580C50F16A0@DM6PR04MB4380.namprd04.prod.outlook.com>
References: <DM6PR04MB43804E67FD10D2564E580C50F16A0@DM6PR04MB4380.namprd04.prod.outlook.com>
Message-ID: <23303.46985.171884.449574@stat.math.ethz.ch>

>>>>> Lenth, Russell V 
>>>>>     on Thu, 24 May 2018 23:14:42 +0000 writes:

    > Package developers, I am trying to severely cut down on
    > the number of dependencies of my package emmeans. It is
    > now 48, which is quite a few (but that is down from over
    > 100 in the preceding version, where I made the unwise
    > choice of including a particularly greedy package in
    > Imports). I hate to force users to install dozens of
    > packages that they don't really need or want, but it seems
    > very hard to avoid.

    > Case in point: emmeans provides additional methods for
    > 'cld' and 'glht' from the multcomp package. Accordingly, I
    > import their generics, and register my additional
    > methods. But because I import the generics, I must list
    > multcomp in Imports, and that results in the addition of
    > 16 required packages, some of which I never use. More
    > important, I believe that NONE of those 16 packages are
    > required for the correct functioning of my courtesy
    > methods. The only things I really need are the generics.

There must be a mistake here -- I think in your perception:

'multcomp' does *not* have excessive dependencies (though I'd
say one too much):

> tools::package_dependencies("multcomp")
$multcomp
[1] "stats"     "graphics"  "mvtnorm"   "survival"  "TH.data"   "sandwich" 
[7] "codetools"

> tools::package_dependencies("multcomp", recursive=TRUE)
$multcomp
 [1] "stats"     "graphics"  "mvtnorm"   "survival"  "TH.data"   "sandwich" 
 [7] "codetools" "methods"   "utils"     "zoo"       "Matrix"    "splines"  
[13] "MASS"      "grDevices" "grid"      "lattice"  

> 

Apart from "base + recommended" packages (which *everyone* has installed),
these are just 4 packages:

     mvtnorm
     TH.data
     sandwich
     zoo     

where  mvtnorm, sandwich, and zoo  really are among the
(formally undefined) recommended-level-2 R packages... so I do
wonder if you really had needed to install.

The 'TH.data' { TH <==>  maintainer("multcomp") } package I
think should not be in the strict dependencies of 'multcomp' but
rather in its "Suggests".... something I'd say must be true for
all data packages: 
The whole idea of data packages is that they should be needed
for interesting help page examples, vignettes, maybe even tests,
but not for package functionality.

In sum: I'd strongly advise to not change from keeping multcomp
among your imports.

Martin Maechler
ETH Zurich

    > On the flip side, emmeans defines some generics of its own
    > that I invite other package developers to extend so that
    > emmeans supports their models. If those packages import
    > emmeans, there is an overhead of 48 dependencies; again,
    > most of these are packages that are not needed at all for
    > those packages' methods to work. I don't like being
    > responsible for that.

    > I believe this is a very common problem, not just with my
    > own packages. It's one thing to extend a base method like
    > 'print'; but extending methods in contributed packages
    > creates these dependency explosions. I have hundreds of
    > packages installed on my system - a couple dozen I care
    > about, another few dozen that seem fairly desirable, and a
    > couple hundred that I don't even know what they're for,
    > other than that things will break if I uninstall them.

    > I do know of a couple ways to reduce these dependencies in
    > the case of my multcomp dependencies:

    > 1. I could simply export my S3 methods for cld and glht as
    > functions, rather than registering them as S3 methods.
    > Then I could move multcomp to Suggests. The downside is
    > that it clutters the namespace for emmeans.

    > 2. I could define the generics for cld and glht in my own
    > package, and export them; and move multcomp to Suggests.
    > Again, it clutters the namespace, and creates warning
    > messages about (if not real issues with) masking.

    > Probably (1) is better than (2), but is it better than
    > what I do now? Is there something else that I (and
    > probably a whole lot of other people) don't know?

    > I wish there were an ImportGenerics or an
    > ImportWithoutDependencies or some such field possible in
    > DESCRIPTION.

    > I appreciate any suggestions. Thanks

    > Russ

    > --
    > Russell V. Lenth ?- ?Professor Emeritus Department of
    > Statistics and Actuarial Science ?? The University of Iowa
    > ?- ?Iowa City, IA 52242 ?USA ?? Voice (319)335-0712 ?-
    > ?FAX (319)335-3017 russell-lenth at uiowa.edu??-
    > ?http://www.stat.uiowa.edu/~rlenth/?

    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m@echler @ending from @t@t@m@th@ethz@ch  Fri May 25 10:11:12 2018
From: m@echler @ending from @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 25 May 2018 10:11:12 +0200
Subject: [R-pkg-devel] Creating S3 methods for S4 classes
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E018F65AD8A@MBXP01.ds.man.ac.uk>
References: <CAO1zAVYTFs15MNLddoJ1DF4Jq4vz12zc1bm6+4kgsFtwv86XcQ@mail.gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F65AD20@MBXP01.ds.man.ac.uk>
 <438D2EC9EAFE5946B2D5864670EA468E018F65AD8A@MBXP01.ds.man.ac.uk>
Message-ID: <23303.50464.738957.506602@stat.math.ethz.ch>

>>>>> Georgi Boshnakov 
>>>>>     on Thu, 24 May 2018 16:07:43 +0000 writes:

    > Hi Joris, At least some aspects of this topic are of
    > interest on this list, given its complexity.

I'm sorry, Georgi, but "of interest" (to some readers) still
does not make this the correct mailing list for the topic,
rather really *does* belong to R-devel instead :

This has been about 

- if an S4 generic for "predict" and similar
  generics should be instantiated in the (base R) 'stats4' package
  (==> change of R, not of a developer's package)

- and about good strategies to define S3 and S4 methods and generics
  (==> general advanced R programming, not directly related get a
       package accepted by CRAN standards)

Followups please on R-devel
((Unfortunately, because of severe spamming of people posting to
  the list, we have delayed archiving the official archives considerably for now;
  to still see the current thread on R-devel, you can use one of
  the *other* archives: ==> https://marc.info/?t=152716935600002&r=1&w=2 ))


Best,
Martin Maechler


From georgi@bo@hn@kov @ending from m@nche@ter@@c@uk  Fri May 25 10:41:02 2018
From: georgi@bo@hn@kov @ending from m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Fri, 25 May 2018 08:41:02 +0000
Subject: [R-pkg-devel] Creating S3 methods for S4 classes
In-Reply-To: <23303.50464.738957.506602@stat.math.ethz.ch>
References: <CAO1zAVYTFs15MNLddoJ1DF4Jq4vz12zc1bm6+4kgsFtwv86XcQ@mail.gmail.com>
 <438D2EC9EAFE5946B2D5864670EA468E018F65AD20@MBXP01.ds.man.ac.uk>
 <438D2EC9EAFE5946B2D5864670EA468E018F65AD8A@MBXP01.ds.man.ac.uk>
 <23303.50464.738957.506602@stat.math.ethz.ch>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F65AEA7@MBXP01.ds.man.ac.uk>

Dear Martin,

Thanks for the clarification and sorry for the noise.

Georgi


-----Original Message-----
From: Martin Maechler [mailto:maechler at stat.math.ethz.ch] 
Sent: 25 May 2018 09:11
To: Georgi Boshnakov
Cc: Joris.Meys at ugent.be; R Package Development
Subject: Re: [R-pkg-devel] Creating S3 methods for S4 classes

>>>>> Georgi Boshnakov 
>>>>>     on Thu, 24 May 2018 16:07:43 +0000 writes:

    > Hi Joris, At least some aspects of this topic are of
    > interest on this list, given its complexity.

I'm sorry, Georgi, but "of interest" (to some readers) still
does not make this the correct mailing list for the topic,
rather really *does* belong to R-devel instead :

This has been about 

- if an S4 generic for "predict" and similar
  generics should be instantiated in the (base R) 'stats4' package
  (==> change of R, not of a developer's package)

- and about good strategies to define S3 and S4 methods and generics
  (==> general advanced R programming, not directly related get a
       package accepted by CRAN standards)

Followups please on R-devel
((Unfortunately, because of severe spamming of people posting to
  the list, we have delayed archiving the official archives considerably for now;
  to still see the current thread on R-devel, you can use one of
  the *other* archives: ==> https://marc.info/?t=152716935600002&r=1&w=2 ))


Best,
Martin Maechler


From Jori@@Mey@ @ending from ugent@be  Fri May 25 11:03:16 2018
From: Jori@@Mey@ @ending from ugent@be (Joris Meys)
Date: Fri, 25 May 2018 11:03:16 +0200
Subject: [R-pkg-devel] Errors in my package
In-Reply-To: <CAGVr+e_zEgKM5BmS+RmdbuUn7j8t+3U-O43vibfBXx9=fP+Z4g@mail.gmail.com>
References: <CAGVr+e_zEgKM5BmS+RmdbuUn7j8t+3U-O43vibfBXx9=fP+Z4g@mail.gmail.com>
Message-ID: <CAO1zAVZW1EyVD52em1w25FJoj-JXojEyU7PO-PmS3ESD1JW7Fw@mail.gmail.com>

On Thu, May 24, 2018 at 10:11 PM, Steven Spiriti <puzzlesteven at gmail.com>
wrote:

>
> > x <- 0:30/30
> > truey <- x*sin(10*x)
> > set.seed(10556)
> > y <- truey + rnorm(31, 0, 0.2)
> > xy.freekt <- freelsgen(x, y, degree = 2, numknot = 2, 555)
> > coef(xy.freekt)
> Error: $ operator not defined for this S4 class
> Execution halted
>

The error and the code of the function tell me there is a problem with
dispatching. You treat xy.freekt as an S4 class and R thinks so too. The
coef generic is S3. The default method for this generic extracts
object$coefficients, and that can't work on an S4 class. This would explain
the error you see: instead of using the appropriate method, the dispatching
apparently uses the default S3 method.

Can you link us to a github repo or so where we can see the code? I suspect
either a problem with the NAMESPACE or with the class definitions. Are you
sure freelsgen returns the class you expect it to return?

Cheers
Joris

-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From bbolker @ending from gm@il@com  Fri May 25 16:27:19 2018
From: bbolker @ending from gm@il@com (Ben Bolker)
Date: Fri, 25 May 2018 10:27:19 -0400
Subject: [R-pkg-devel] Courtesy methods and explosive dependencies
In-Reply-To: <23303.46985.171884.449574@stat.math.ethz.ch>
References: <DM6PR04MB43804E67FD10D2564E580C50F16A0@DM6PR04MB4380.namprd04.prod.outlook.com>
 <23303.46985.171884.449574@stat.math.ethz.ch>
Message-ID: <CABghstRNeFmjezq9=JB7Dd_N+_vyonQMetMYUwoC8wpAZnVryA@mail.gmail.com>

Russ Lenth may have picked a suboptimal example (we could search
through the dependencies of emmeans for an example with more
non-(base+recommended) recursive dependencies, but the general point
definitely holds.

"(formally undefined) recommended-level-2 R packages" seems like a can
of worms (I know what would be on my list, but I wonder how much it
would overlap everyone else's)

FWIW I don't know of a better solution than #1 from the original post.

  cheers
    Ben Bolker


On Fri, May 25, 2018 at 3:13 AM, Martin Maechler
<maechler at stat.math.ethz.ch> wrote:
>>>>>> Lenth, Russell V
>>>>>>     on Thu, 24 May 2018 23:14:42 +0000 writes:
>
>     > Package developers, I am trying to severely cut down on
>     > the number of dependencies of my package emmeans. It is
>     > now 48, which is quite a few (but that is down from over
>     > 100 in the preceding version, where I made the unwise
>     > choice of including a particularly greedy package in
>     > Imports). I hate to force users to install dozens of
>     > packages that they don't really need or want, but it seems
>     > very hard to avoid.
>
>     > Case in point: emmeans provides additional methods for
>     > 'cld' and 'glht' from the multcomp package. Accordingly, I
>     > import their generics, and register my additional
>     > methods. But because I import the generics, I must list
>     > multcomp in Imports, and that results in the addition of
>     > 16 required packages, some of which I never use. More
>     > important, I believe that NONE of those 16 packages are
>     > required for the correct functioning of my courtesy
>     > methods. The only things I really need are the generics.
>
> There must be a mistake here -- I think in your perception:
>
> 'multcomp' does *not* have excessive dependencies (though I'd
> say one too much):
>
>> tools::package_dependencies("multcomp")
> $multcomp
> [1] "stats"     "graphics"  "mvtnorm"   "survival"  "TH.data"   "sandwich"
> [7] "codetools"
>
>> tools::package_dependencies("multcomp", recursive=TRUE)
> $multcomp
>  [1] "stats"     "graphics"  "mvtnorm"   "survival"  "TH.data"   "sandwich"
>  [7] "codetools" "methods"   "utils"     "zoo"       "Matrix"    "splines"
> [13] "MASS"      "grDevices" "grid"      "lattice"
>
>>
>
> Apart from "base + recommended" packages (which *everyone* has installed),
> these are just 4 packages:
>
>      mvtnorm
>      TH.data
>      sandwich
>      zoo
>
> where  mvtnorm, sandwich, and zoo  really are among the
> (formally undefined) recommended-level-2 R packages... so I do
> wonder if you really had needed to install.
>
> The 'TH.data' { TH <==>  maintainer("multcomp") } package I
> think should not be in the strict dependencies of 'multcomp' but
> rather in its "Suggests".... something I'd say must be true for
> all data packages:
> The whole idea of data packages is that they should be needed
> for interesting help page examples, vignettes, maybe even tests,
> but not for package functionality.
>
> In sum: I'd strongly advise to not change from keeping multcomp
> among your imports.
>
> Martin Maechler
> ETH Zurich
>
>     > On the flip side, emmeans defines some generics of its own
>     > that I invite other package developers to extend so that
>     > emmeans supports their models. If those packages import
>     > emmeans, there is an overhead of 48 dependencies; again,
>     > most of these are packages that are not needed at all for
>     > those packages' methods to work. I don't like being
>     > responsible for that.
>
>     > I believe this is a very common problem, not just with my
>     > own packages. It's one thing to extend a base method like
>     > 'print'; but extending methods in contributed packages
>     > creates these dependency explosions. I have hundreds of
>     > packages installed on my system - a couple dozen I care
>     > about, another few dozen that seem fairly desirable, and a
>     > couple hundred that I don't even know what they're for,
>     > other than that things will break if I uninstall them.
>
>     > I do know of a couple ways to reduce these dependencies in
>     > the case of my multcomp dependencies:
>
>     > 1. I could simply export my S3 methods for cld and glht as
>     > functions, rather than registering them as S3 methods.
>     > Then I could move multcomp to Suggests. The downside is
>     > that it clutters the namespace for emmeans.
>
>     > 2. I could define the generics for cld and glht in my own
>     > package, and export them; and move multcomp to Suggests.
>     > Again, it clutters the namespace, and creates warning
>     > messages about (if not real issues with) masking.
>
>     > Probably (1) is better than (2), but is it better than
>     > what I do now? Is there something else that I (and
>     > probably a whole lot of other people) don't know?
>
>     > I wish there were an ImportGenerics or an
>     > ImportWithoutDependencies or some such field possible in
>     > DESCRIPTION.
>
>     > I appreciate any suggestions. Thanks
>
>     > Russ
>
>     > --
>     > Russell V. Lenth  -  Professor Emeritus Department of
>     > Statistics and Actuarial Science    The University of Iowa
>     >  -  Iowa City, IA 52242  USA    Voice (319)335-0712  -
>     >  FAX (319)335-3017 russell-lenth at uiowa.edu  -
>     >  http://www.stat.uiowa.edu/~rlenth/
>
>     > ______________________________________________
>     > R-package-devel at r-project.org mailing list
>     > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ru@@ell-lenth @ending from uiow@@edu  Fri May 25 17:38:40 2018
From: ru@@ell-lenth @ending from uiow@@edu (Lenth, Russell V)
Date: Fri, 25 May 2018 15:38:40 +0000
Subject: [R-pkg-devel] Courtesy methods and explosive dependencies
In-Reply-To: <23303.46985.171884.449574@stat.math.ethz.ch>
References: <DM6PR04MB43804E67FD10D2564E580C50F16A0@DM6PR04MB4380.namprd04.prod.outlook.com>
 <23303.46985.171884.449574@stat.math.ethz.ch>
Message-ID: <DM6PR04MB4380066A42B65532BAD7C72CF1690@DM6PR04MB4380.namprd04.prod.outlook.com>

I agree that most of the package dependencies in multcomp are worth having, but that is not the point. The point is that if a developer wants to write a method for a generic function offered in another non-base package, that creates false dependencies: packages that users are required to have, but that aren't actually used by the method. I certainly wasn't trying to diss multcomp; that was just a concrete illustration. 

Russ

-----Original Message-----
From: Martin Maechler [mailto:maechler at stat.math.ethz.ch] 
Sent: Friday, May 25, 2018 2:13 AM
To: Lenth, Russell V <russell-lenth at uiowa.edu>
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Courtesy methods and explosive dependencies

>>>>> Lenth, Russell V 
>>>>>     on Thu, 24 May 2018 23:14:42 +0000 writes:

    > Package developers, I am trying to severely cut down on
    > the number of dependencies of my package emmeans. It is
    > now 48, which is quite a few (but that is down from over
    > 100 in the preceding version, where I made the unwise
    > choice of including a particularly greedy package in
    > Imports). I hate to force users to install dozens of
    > packages that they don't really need or want, but it seems
    > very hard to avoid.

    > Case in point: emmeans provides additional methods for
    > 'cld' and 'glht' from the multcomp package. Accordingly, I
    > import their generics, and register my additional
    > methods. But because I import the generics, I must list
    > multcomp in Imports, and that results in the addition of
    > 16 required packages, some of which I never use. More
    > important, I believe that NONE of those 16 packages are
    > required for the correct functioning of my courtesy
    > methods. The only things I really need are the generics.

There must be a mistake here -- I think in your perception:

'multcomp' does *not* have excessive dependencies (though I'd say one too much):

> tools::package_dependencies("multcomp")
$multcomp
[1] "stats"     "graphics"  "mvtnorm"   "survival"  "TH.data"   "sandwich" 
[7] "codetools"

> tools::package_dependencies("multcomp", recursive=TRUE)
$multcomp
 [1] "stats"     "graphics"  "mvtnorm"   "survival"  "TH.data"   "sandwich" 
 [7] "codetools" "methods"   "utils"     "zoo"       "Matrix"    "splines"  
[13] "MASS"      "grDevices" "grid"      "lattice"  

> 

Apart from "base + recommended" packages (which *everyone* has installed), these are just 4 packages:

     mvtnorm
     TH.data
     sandwich
     zoo     

where  mvtnorm, sandwich, and zoo  really are among the (formally undefined) recommended-level-2 R packages... so I do wonder if you really had needed to install.

The 'TH.data' { TH <==>  maintainer("multcomp") } package I think should not be in the strict dependencies of 'multcomp' but rather in its "Suggests".... something I'd say must be true for all data packages: 
The whole idea of data packages is that they should be needed for interesting help page examples, vignettes, maybe even tests, but not for package functionality.

In sum: I'd strongly advise to not change from keeping multcomp among your imports.

Martin Maechler
ETH Zurich

    > On the flip side, emmeans defines some generics of its own
    > that I invite other package developers to extend so that
    > emmeans supports their models. If those packages import
    > emmeans, there is an overhead of 48 dependencies; again,
    > most of these are packages that are not needed at all for
    > those packages' methods to work. I don't like being
    > responsible for that.

    > I believe this is a very common problem, not just with my
    > own packages. It's one thing to extend a base method like
    > 'print'; but extending methods in contributed packages
    > creates these dependency explosions. I have hundreds of
    > packages installed on my system - a couple dozen I care
    > about, another few dozen that seem fairly desirable, and a
    > couple hundred that I don't even know what they're for,
    > other than that things will break if I uninstall them.

    > I do know of a couple ways to reduce these dependencies in
    > the case of my multcomp dependencies:

    > 1. I could simply export my S3 methods for cld and glht as
    > functions, rather than registering them as S3 methods.
    > Then I could move multcomp to Suggests. The downside is
    > that it clutters the namespace for emmeans.

    > 2. I could define the generics for cld and glht in my own
    > package, and export them; and move multcomp to Suggests.
    > Again, it clutters the namespace, and creates warning
    > messages about (if not real issues with) masking.

    > Probably (1) is better than (2), but is it better than
    > what I do now? Is there something else that I (and
    > probably a whole lot of other people) don't know?

    > I wish there were an ImportGenerics or an
    > ImportWithoutDependencies or some such field possible in
    > DESCRIPTION.

    > I appreciate any suggestions. Thanks

    > Russ

    > --
    > Russell V. Lenth ?- ?Professor Emeritus Department of
    > Statistics and Actuarial Science ?? The University of Iowa
    > ?- ?Iowa City, IA 52242 ?USA ?? Voice (319)335-0712 ?-
    > ?FAX (319)335-3017 russell-lenth at uiowa.edu??-
    > ?http://www.stat.uiowa.edu/~rlenth/?

    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From nfultz @ending from gm@il@com  Fri May 25 18:00:16 2018
From: nfultz @ending from gm@il@com (Neal Fultz)
Date: Fri, 25 May 2018 09:00:16 -0700
Subject: [R-pkg-devel] Courtesy methods and explosive dependencies
In-Reply-To: <DM6PR04MB4380066A42B65532BAD7C72CF1690@DM6PR04MB4380.namprd04.prod.outlook.com>
References: <DM6PR04MB43804E67FD10D2564E580C50F16A0@DM6PR04MB4380.namprd04.prod.outlook.com>
 <23303.46985.171884.449574@stat.math.ethz.ch>
 <DM6PR04MB4380066A42B65532BAD7C72CF1690@DM6PR04MB4380.namprd04.prod.outlook.com>
Message-ID: <CAL9B2vcuecAjkAvnZS0bE39ADbDP5_pbDXKrd2B-xdqbOX50Vg@mail.gmail.com>

In the estimatr package, we provided a shim to support broom without
transitively depending on the tidyverse:


tidy <- function(object, ...) {
  if (requireNamespace("broom", quietly = TRUE)) broom::tidy(object, ...)
else UseMethod("tidy")
}

https://github.com/DeclareDesign/estimatr/blob/master/R/S3_tidy.R

It's not ideal but it seems to make our functions work whether or not the
end user has broom.


S4 methods (eg texreg) were more difficult, and we ended up registering the
generics in .onLoad:


.onLoad <- function(libname, pkgname) {
  if (suppressWarnings(requireNamespace("texreg", quietly = TRUE))) {
    setGeneric("extract", function(model, ...) standardGeneric("extract"),
      package = "texreg"
    )
    setMethod("extract",
      signature = className("lm_robust", pkgname),
      definition = extract.lm_robust
    )
  }
  invisible()
}

https://github.com/DeclareDesign/estimatr/blob/master/R/zzz.R


Since this is in .onLoad, it's a little buggy if the user has estimatr and
then installs texreg, but again seems to mostly work.

We would appreciate any feedback the list may have on these design patterns.


-Neal




On Fri, May 25, 2018 at 8:38 AM, Lenth, Russell V <russell-lenth at uiowa.edu>
wrote:

> I agree that most of the package dependencies in multcomp are worth
> having, but that is not the point. The point is that if a developer wants
> to write a method for a generic function offered in another non-base
> package, that creates false dependencies: packages that users are required
> to have, but that aren't actually used by the method. I certainly wasn't
> trying to diss multcomp; that was just a concrete illustration.
>
> Russ
>
> -----Original Message-----
> From: Martin Maechler [mailto:maechler at stat.math.ethz.ch]
> Sent: Friday, May 25, 2018 2:13 AM
> To: Lenth, Russell V <russell-lenth at uiowa.edu>
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Courtesy methods and explosive dependencies
>
> >>>>> Lenth, Russell V
> >>>>>     on Thu, 24 May 2018 23:14:42 +0000 writes:
>
>     > Package developers, I am trying to severely cut down on
>     > the number of dependencies of my package emmeans. It is
>     > now 48, which is quite a few (but that is down from over
>     > 100 in the preceding version, where I made the unwise
>     > choice of including a particularly greedy package in
>     > Imports). I hate to force users to install dozens of
>     > packages that they don't really need or want, but it seems
>     > very hard to avoid.
>
>     > Case in point: emmeans provides additional methods for
>     > 'cld' and 'glht' from the multcomp package. Accordingly, I
>     > import their generics, and register my additional
>     > methods. But because I import the generics, I must list
>     > multcomp in Imports, and that results in the addition of
>     > 16 required packages, some of which I never use. More
>     > important, I believe that NONE of those 16 packages are
>     > required for the correct functioning of my courtesy
>     > methods. The only things I really need are the generics.
>
> There must be a mistake here -- I think in your perception:
>
> 'multcomp' does *not* have excessive dependencies (though I'd say one too
> much):
>
> > tools::package_dependencies("multcomp")
> $multcomp
> [1] "stats"     "graphics"  "mvtnorm"   "survival"  "TH.data"   "sandwich"
> [7] "codetools"
>
> > tools::package_dependencies("multcomp", recursive=TRUE)
> $multcomp
>  [1] "stats"     "graphics"  "mvtnorm"   "survival"  "TH.data"
>  "sandwich"
>  [7] "codetools" "methods"   "utils"     "zoo"       "Matrix"
> "splines"
> [13] "MASS"      "grDevices" "grid"      "lattice"
>
> >
>
> Apart from "base + recommended" packages (which *everyone* has installed),
> these are just 4 packages:
>
>      mvtnorm
>      TH.data
>      sandwich
>      zoo
>
> where  mvtnorm, sandwich, and zoo  really are among the (formally
> undefined) recommended-level-2 R packages... so I do wonder if you really
> had needed to install.
>
> The 'TH.data' { TH <==>  maintainer("multcomp") } package I think should
> not be in the strict dependencies of 'multcomp' but rather in its
> "Suggests".... something I'd say must be true for all data packages:
> The whole idea of data packages is that they should be needed for
> interesting help page examples, vignettes, maybe even tests, but not for
> package functionality.
>
> In sum: I'd strongly advise to not change from keeping multcomp among your
> imports.
>
> Martin Maechler
> ETH Zurich
>
>     > On the flip side, emmeans defines some generics of its own
>     > that I invite other package developers to extend so that
>     > emmeans supports their models. If those packages import
>     > emmeans, there is an overhead of 48 dependencies; again,
>     > most of these are packages that are not needed at all for
>     > those packages' methods to work. I don't like being
>     > responsible for that.
>
>     > I believe this is a very common problem, not just with my
>     > own packages. It's one thing to extend a base method like
>     > 'print'; but extending methods in contributed packages
>     > creates these dependency explosions. I have hundreds of
>     > packages installed on my system - a couple dozen I care
>     > about, another few dozen that seem fairly desirable, and a
>     > couple hundred that I don't even know what they're for,
>     > other than that things will break if I uninstall them.
>
>     > I do know of a couple ways to reduce these dependencies in
>     > the case of my multcomp dependencies:
>
>     > 1. I could simply export my S3 methods for cld and glht as
>     > functions, rather than registering them as S3 methods.
>     > Then I could move multcomp to Suggests. The downside is
>     > that it clutters the namespace for emmeans.
>
>     > 2. I could define the generics for cld and glht in my own
>     > package, and export them; and move multcomp to Suggests.
>     > Again, it clutters the namespace, and creates warning
>     > messages about (if not real issues with) masking.
>
>     > Probably (1) is better than (2), but is it better than
>     > what I do now? Is there something else that I (and
>     > probably a whole lot of other people) don't know?
>
>     > I wish there were an ImportGenerics or an
>     > ImportWithoutDependencies or some such field possible in
>     > DESCRIPTION.
>
>     > I appreciate any suggestions. Thanks
>
>     > Russ
>
>     > --
>     > Russell V. Lenth  -  Professor Emeritus Department of
>     > Statistics and Actuarial Science    The University of Iowa
>     >  -  Iowa City, IA 52242  USA    Voice (319)335-0712  -
>     >  FAX (319)335-3017 russell-lenth at uiowa.edu  -
>     >  http://www.stat.uiowa.edu/~rlenth/
>
>     > ______________________________________________
>     > R-package-devel at r-project.org mailing list
>     > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Fri May 25 19:59:27 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Fri, 25 May 2018 13:59:27 -0400
Subject: [R-pkg-devel] Courtesy methods and explosive dependencies
In-Reply-To: <DM6PR04MB4380066A42B65532BAD7C72CF1690@DM6PR04MB4380.namprd04.prod.outlook.com>
References: <DM6PR04MB43804E67FD10D2564E580C50F16A0@DM6PR04MB4380.namprd04.prod.outlook.com>
 <23303.46985.171884.449574@stat.math.ethz.ch>
 <DM6PR04MB4380066A42B65532BAD7C72CF1690@DM6PR04MB4380.namprd04.prod.outlook.com>
Message-ID: <b56670c4-ad3d-afd5-d05b-ffe6ca6153db@gmail.com>

On 25/05/2018 11:38 AM, Lenth, Russell V wrote:
> I agree that most of the package dependencies in multcomp are worth having, but that is not the point. The point is that if a developer wants to write a method for a generic function offered in another non-base package, that creates false dependencies: packages that users are required to have, but that aren't actually used by the method. I certainly wasn't trying to diss multcomp; that was just a concrete illustration.

There can't really be an "ImportGenerics", because S3 is so informal.  A 
generic function is a function that calls UseMethod, but it can do 
anything else as well.  So R would need some fancy code analysis to know 
whether it was safe to import the generic but not all the dependencies 
of that package, and that could change when the package holding the 
generic was updated.

Examples of generics that do more than simply call UseMethod are rare, 
but they exist:  as.data.frame() and sort() are a couple.

Duncan Murdoch

> 
> Russ
> 
> -----Original Message-----
> From: Martin Maechler [mailto:maechler at stat.math.ethz.ch]
> Sent: Friday, May 25, 2018 2:13 AM
> To: Lenth, Russell V <russell-lenth at uiowa.edu>
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Courtesy methods and explosive dependencies
> 
>>>>>> Lenth, Russell V
>>>>>>      on Thu, 24 May 2018 23:14:42 +0000 writes:
> 
>      > Package developers, I am trying to severely cut down on
>      > the number of dependencies of my package emmeans. It is
>      > now 48, which is quite a few (but that is down from over
>      > 100 in the preceding version, where I made the unwise
>      > choice of including a particularly greedy package in
>      > Imports). I hate to force users to install dozens of
>      > packages that they don't really need or want, but it seems
>      > very hard to avoid.
> 
>      > Case in point: emmeans provides additional methods for
>      > 'cld' and 'glht' from the multcomp package. Accordingly, I
>      > import their generics, and register my additional
>      > methods. But because I import the generics, I must list
>      > multcomp in Imports, and that results in the addition of
>      > 16 required packages, some of which I never use. More
>      > important, I believe that NONE of those 16 packages are
>      > required for the correct functioning of my courtesy
>      > methods. The only things I really need are the generics.
> 
> There must be a mistake here -- I think in your perception:
> 
> 'multcomp' does *not* have excessive dependencies (though I'd say one too much):
> 
>> tools::package_dependencies("multcomp")
> $multcomp
> [1] "stats"     "graphics"  "mvtnorm"   "survival"  "TH.data"   "sandwich"
> [7] "codetools"
> 
>> tools::package_dependencies("multcomp", recursive=TRUE)
> $multcomp
>   [1] "stats"     "graphics"  "mvtnorm"   "survival"  "TH.data"   "sandwich"
>   [7] "codetools" "methods"   "utils"     "zoo"       "Matrix"    "splines"
> [13] "MASS"      "grDevices" "grid"      "lattice"
> 
>>
> 
> Apart from "base + recommended" packages (which *everyone* has installed), these are just 4 packages:
> 
>       mvtnorm
>       TH.data
>       sandwich
>       zoo
> 
> where  mvtnorm, sandwich, and zoo  really are among the (formally undefined) recommended-level-2 R packages... so I do wonder if you really had needed to install.
> 
> The 'TH.data' { TH <==>  maintainer("multcomp") } package I think should not be in the strict dependencies of 'multcomp' but rather in its "Suggests".... something I'd say must be true for all data packages:
> The whole idea of data packages is that they should be needed for interesting help page examples, vignettes, maybe even tests, but not for package functionality.
> 
> In sum: I'd strongly advise to not change from keeping multcomp among your imports.
> 
> Martin Maechler
> ETH Zurich
> 
>      > On the flip side, emmeans defines some generics of its own
>      > that I invite other package developers to extend so that
>      > emmeans supports their models. If those packages import
>      > emmeans, there is an overhead of 48 dependencies; again,
>      > most of these are packages that are not needed at all for
>      > those packages' methods to work. I don't like being
>      > responsible for that.
> 
>      > I believe this is a very common problem, not just with my
>      > own packages. It's one thing to extend a base method like
>      > 'print'; but extending methods in contributed packages
>      > creates these dependency explosions. I have hundreds of
>      > packages installed on my system - a couple dozen I care
>      > about, another few dozen that seem fairly desirable, and a
>      > couple hundred that I don't even know what they're for,
>      > other than that things will break if I uninstall them.
> 
>      > I do know of a couple ways to reduce these dependencies in
>      > the case of my multcomp dependencies:
> 
>      > 1. I could simply export my S3 methods for cld and glht as
>      > functions, rather than registering them as S3 methods.
>      > Then I could move multcomp to Suggests. The downside is
>      > that it clutters the namespace for emmeans.
> 
>      > 2. I could define the generics for cld and glht in my own
>      > package, and export them; and move multcomp to Suggests.
>      > Again, it clutters the namespace, and creates warning
>      > messages about (if not real issues with) masking.
> 
>      > Probably (1) is better than (2), but is it better than
>      > what I do now? Is there something else that I (and
>      > probably a whole lot of other people) don't know?
> 
>      > I wish there were an ImportGenerics or an
>      > ImportWithoutDependencies or some such field possible in
>      > DESCRIPTION.
> 
>      > I appreciate any suggestions. Thanks
> 
>      > Russ
> 
>      > --
>      > Russell V. Lenth ?- ?Professor Emeritus Department of
>      > Statistics and Actuarial Science ?? The University of Iowa
>      > ?- ?Iowa City, IA 52242 ?USA ?? Voice (319)335-0712 ?-
>      > ?FAX (319)335-3017 russell-lenth at uiowa.edu??-
>      > ?http://www.stat.uiowa.edu/~rlenth/
> 
>      > ______________________________________________
>      > R-package-devel at r-project.org mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ru@@ell-lenth @ending from uiow@@edu  Fri May 25 21:22:45 2018
From: ru@@ell-lenth @ending from uiow@@edu (Lenth, Russell V)
Date: Fri, 25 May 2018 19:22:45 +0000
Subject: [R-pkg-devel] Courtesy methods and explosive dependencies
In-Reply-To: <b56670c4-ad3d-afd5-d05b-ffe6ca6153db@gmail.com>
References: <DM6PR04MB43804E67FD10D2564E580C50F16A0@DM6PR04MB4380.namprd04.prod.outlook.com>
 <23303.46985.171884.449574@stat.math.ethz.ch>
 <DM6PR04MB4380066A42B65532BAD7C72CF1690@DM6PR04MB4380.namprd04.prod.outlook.com>
 <b56670c4-ad3d-afd5-d05b-ffe6ca6153db@gmail.com>
Message-ID: <DM6PR04MB4380692A57B147749FC2492FF1690@DM6PR04MB4380.namprd04.prod.outlook.com>

> There can't really be an "ImportGenerics", because S3 is so informal.  A generic function is a function that calls UseMethod, but it can do anything else as well.  So R would need some fancy code analysis to know whether it was safe to import the generic but not all the dependencies of that package, and that could change when the package holding the generic was updated.
> 
> Examples of generics that do more than simply call UseMethod are rare, but they exist:  as.data.frame() and sort() are a couple.
> 
> Duncan Murdoch

Right -- ImportGenerics was a dumb idea. However, Something like ImportNoDeps makes sense as an additional category in the DESCRIPTION file. In my example, if such existed, I could put in the DESCRIPTION file:

    ImportNoDeps: multcomp

This would signal that multcomp -- but not necessarily any of its dependencies -- is required to install emmeans.  And in the NAMESPACE file:

    importFrom(multcomp, cld)
    S3method(cld, emmGrid)

... would import the needed generic and register my new S3 method.

I think this kind of construct could significantly reduce dependencies for packages that extend other packages' methods.

Russ

From puzzle@teven @ending from gm@il@com  Fri May 25 21:25:20 2018
From: puzzle@teven @ending from gm@il@com (Steven Spiriti)
Date: Fri, 25 May 2018 12:25:20 -0700
Subject: [R-pkg-devel] Errors in R package - Updated
Message-ID: <CAGVr+e8ScECVqUY1wa67rYV5B-CjQ_LWocO1toCzU738ycpHmg@mail.gmail.com>

 To Whom It May Concern:

    I have created a package called "freeknotsplines" in R, and I need to
make a few updates to it.  I resubmitted the package, and received the
following error message:

checking examples ... ERROR
Running examples in ?freeknotsplines-Ex.R? failed
The error most likely occurred in:

> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
> ### Name: coef.freekt
> ### Title: Compute Coefficients of B-Splines For Free-Knot Splines
> ### Aliases: coef.freekt
> ### Keywords: nonparametric regression smooth
>
> ### ** Examples
>
> x <- 0:30/30
> truey <- x*sin(10*x)
> set.seed(10556)
> y <- truey + rnorm(31, 0, 0.2)
> xy.freekt <- freelsgen(x, y, degree = 2, numknot = 2, 555)
> coef(xy.freekt)
Error: $ operator not defined for this S4 class
Execution halted

     This error occurs in one of the examples in the documentation.   It is
platform dependent, and does not occur on the machine I am using to create
the package.  freekt is a new class, which is apparently an S4 class.

Here is the R code for my package:

#' @export coef freekt
#' @export fitted freekt
#' @export residuals freekt
#' @export plot freekt
#' @export summary freekt
#' @export AIC freekt
#' @export AICc freekt
#' @export BIC freekt
#' @export adjGCV freekt
#' @export adjAIC freekt

library(splines)

setClass("freekt", slots = c(x = "numeric", y = "numeric", degree =
"integer",
    seed = "integer", stream = "integer", lambda = "numeric",
    optknot = "numeric", tracehat = "numeric", GCV = "numeric",
    GSJS = "numeric", call = "call"))

freelsgen <- function(x, y, degree, numknot, seed = 5, stream = 0)
{
  n <- length(x)
  ord <- degree + 1
  optknot <- rep(0, times = numknot)
  tracehat <- 0
  GCV <- 0
  GSJS <- 0
  result <- .C("freelsgen", as.integer(n), as.double(x), as.double(y),
               as.integer(ord), as.integer(numknot), as.integer(seed),
               as.integer(stream), as.double(optknot),
               as.double(tracehat), as.double(GCV), as.double(GSJS))
  answer <- new("freekt", x = x, y = y, degree = as.integer(degree),
                seed = as.integer(seed), stream = as.integer(stream),
                lambda = 0, optknot = result[[8]],
                tracehat = result[[9]], GCV = result[[10]],
                GSJS = result[[11]], call = match.call())
  return(answer)
}

freelsgold <- function(x, y, degree, numknot, seed = 5, stream = 0)
{
  n <- length(x)
  ord <- degree + 1
  optknot <- rep(0, times = numknot)
  tracehat <- 0
  GCV <- 0
  GSJS <- 0
  result <- .C("freelsgold", as.integer(n), as.double(x), as.double(y),
               as.integer(ord), as.integer(numknot), as.integer(seed),
               as.integer(stream), as.double(optknot),
               as.double(tracehat), as.double(GCV), as.double(GSJS))
  answer <- new("freekt", x = x, y = y, degree = as.integer(degree),
                seed = as.integer(seed), stream = as.integer(stream),
                lambda = 0, optknot = result[[8]],
                tracehat = result[[9]], GCV = result[[10]],
                GSJS = result[[11]], call = match.call())
  return(answer)
}

freepsgen <- function(x, y, degree, numknot, seed = 5, stream = 0)
{
  n <- length(x)
  ord <- degree + 1
  optknot <- rep(0, times = numknot)
  lambda <- 0
  tracehat <- 0
  GCV <- 0
  GSJS <- 0
  result <- .C("freepsgen", as.integer(n), as.double(x), as.double(y),
               as.integer(ord), as.integer(numknot), as.integer(seed),
               as.integer(stream), as.double(lambda),
               as.double(optknot), as.double(tracehat),
               as.double(GCV), as.double(GSJS))
  answer <- new("freekt", x = x, y = y, degree = as.integer(degree),
               seed = as.integer(seed), stream = as.integer(stream),
               lambda = result[[8]], optknot = result[[9]],
               tracehat = result[[10]], GCV = result[[11]],
               GSJS = result[[12]], call = match.call())
  return(answer)
}

freepsgold <- function(x, y, degree, numknot, seed = 5, stream = 0)
{
  n <- length(x)
  ord <- degree + 1
  optknot <- rep(0, times = numknot)
  lambda <- 0
  tracehat <- 0
  GCV <- 0
  GSJS <- 0
  result <- .C("freepsgold", as.integer(n), as.double(x), as.double(y),
               as.integer(ord), as.integer(numknot), as.integer(seed),
               as.integer(stream), as.double(lambda),
               as.double(optknot), as.double(tracehat),
               as.double(GCV), as.double(GSJS))
  answer <- new("freekt", x = x, y = y,  degree = as.integer(degree),
               seed = as.integer(seed), stream = as.integer(stream),
               lambda = result[[8]], optknot = result[[9]],
               tracehat = result[[10]], GCV = result[[11]],
               GSJS = result[[12]], call = match.call())
  return(answer)
}

chgbasismat <- function(knot, ord)
{
  dimmat <- length(knot) - ord
  answer <- matrix(0, nrow = dimmat, ncol = dimmat)
  for (j in 0:(ord-1))
  {
      brow <- splineDesign(knot, knot[1], ord, j)
      brow <- as.vector(brow/factorial(j))
      answer[j + 1, ] <- brow
  }
  nknot <- sort(-1*knot)
  for (j in 1:(dimmat - ord))
  {
      brow <- splineDesign(knot, knot[ord + j], ord, ord - 1)
      brow2 <- splineDesign(nknot, nknot[length(knot) - ord - (j - 1)],
               ord, ord - 1)
      brow2 <- brow2[dimmat:1]
      brow <- brow + (-1)^ord * brow2
      brow <- as.vector(brow/factorial(ord - 1))
      answer[ord + j, ] <- brow
  }
  return(answer)
}

coef.freekt <- function(object, ...)
{
  xdat <- object at x
  ydat <- object at y
  optknot <- object at optknot
  ord <- object at degree + 1
  lambda <- object at lambda
  fulloptknot <- c(rep(min(xdat), ord), optknot, rep(max(xdat), ord))  #
includes endpoints
  Xmat <- splineDesign(fulloptknot, xdat, ord)
  if ((lambda == 0) | (length(optknot) == 0))
    coef <- solve(t(Xmat)%*%Xmat, t(Xmat)%*%ydat)
  else
    {
      numknots <- length(optknot)
      Amat <- chgbasismat(fulloptknot, ord)
      Istar <- diag(c(rep(0, times = ord), rep(1, times = numknots)))
      coef <- solve(t(Xmat)%*%Xmat + lambda*t(Amat)%*%Istar%*%Amat,
                    t(Xmat)%*%ydat)
    }
  return(coef)
}

fitted.freekt <- function(object, xfit = object at x, ...)
{
  xdat <- object at x
  ydat <- object at y
  optknot <- object at optknot
  ord <- object at degree + 1
  fulloptknot <- c(rep(min(xdat), ord), optknot, rep(max(xdat), ord))  #
includes endpoints
  coef <- coef.freekt(object)
  yfit <- splineDesign(fulloptknot, xfit, ord) %*%coef
  return(yfit)
}

residuals.freekt <- function(object, ...)
{
  fit <- fitted.freekt(object)
  return(object at y - fit)
}

plot.freekt <- function(x, xfit = x at x, linecolor="blue", lwd = 1, lty = 1,
...)
{
  xfit <- as.vector(xfit)
  yfit <- fitted.freekt(x, xfit)
  plot(x at x, x at y, ...)
  lines(xfit[order(xfit)], yfit[order(xfit)], col=linecolor,
        lwd = lwd, lty = lty)
}

summary.freekt <- function(object, ...)
{
  answer <- NULL
  if (object at lambda != 0)
  {
     currline <- c(object at lambda,
        rep(NA, times = length(object at optknot)-1))
     answer <- rbind(answer, currline)
  }
  currline <- object at optknot
  answer <- rbind(answer, currline)
  currline <- c(object at GCV,
        rep(NA, times = length(object at optknot)-1))
  answer <- rbind(answer, currline)
  RSS <- sum((residuals(object))^2)
  currline <- c(RSS, rep(NA, times = length(object at optknot)-1))
  answer <- rbind(answer, currline)
  if (object at lambda != 0)
       rownames(answer) <-
           c("Optimal lambda", "Optimal knots", "GCV", "RSS")
  else
       rownames(answer) <- c("Optimal knots", "GCV", "RSS")
  colnames(answer) <- rep("", times = length(object at optknot))
  class(answer) <- "table"
  print(answer)
}

AIC.freekt <- function(object, ..., k = 2)
{
  answer <- 0
  RSS <- sum((residuals(object))^2)
  n <- length(object at x)
  npar <- object at tracehat
  answer <- n * log(RSS/n) + k * npar
  return(answer)
}

AICc.freekt <- function(object)
{
  answer <- 0
  RSS <- sum((residuals(object))^2)
  n <- length(object at x)
  npar <- object at tracehat
  answer <- n * log(RSS/n) + 2 * npar +
            2 * npar * (npar + 1) /(n - npar - 1)
  return(answer)
}

BIC.freekt <- function(object, ...)
{
  answer <- 0
  RSS <- sum((residuals(object))^2)
  n <- length(object at x)
  npar <- object at tracehat
  answer <- n * log(RSS/n) + log(n) * npar
  return(answer)
}

adjGCV.freekt <- function(object, d = 3)
{
  RSS <- sum((residuals(object))^2)
  n <- length(object at x)
  adjtrace <- object at tracehat + d * length(object at optknot)
  answer <- (RSS/n) / (1 - adjtrace / n)^2
  return(answer)
}

adjAIC.freekt <- function(object)
{
  answer <- 0
  RSS <- sum((residuals(object))^2)
  n <- length(object at x)
  npar <- object at tracehat
  effdim <- 2 * npar - object at degree - 1
  answer <- n * log(RSS/n) +  2 * effdim
  return(answer)
}

fit.search.numknots <- function(x, y, degree, minknot = 1, maxknot = 5,
                                alg = "LS", search = "genetic",
                                knotnumcrit = "adjGCV", k = 2,
                                d = 3, seed = 5, stream = 0)
{
  bestcrit <- Inf
  funcname <- ""
  answer <- NULL
  if ((alg == "LS") && (search == "genetic"))
    funcname <- "freelsgen"
  if ((alg == "LS") && (search == "golden"))
    funcname <- "freelsgold"
  if ((alg == "PS") && (search == "genetic"))
    funcname <- "freepsgen"
  if ((alg == "PS") && (search == "golden"))
    funcname <- "freepsgold"
  for (numknot in seq(from = minknot, to = maxknot))
  {
      currcall <- call(funcname, x, y, degree, numknot, seed, stream)
      currfit <- eval(currcall)
      currcrit <- switch(knotnumcrit, GCV = currfit at GCV,
          AIC = AIC(currfit, k = k), adjAIC = adjAIC.freekt(currfit),
          AICc = AICc.freekt(currfit), BIC = BIC(currfit),
          adjGCV = adjGCV.freekt(currfit, d))
      print(paste("Number of knots = ", numknot, ", ", knotnumcrit,
          " = ", currcrit, sep = ""), quote = FALSE)
      if (currcrit < bestcrit)
      {
          bestcrit <- currcrit
          answer <- currfit
      }
  }
  return(answer)
}

     I am still not clear on what is causing this error.

Sincerely,

Steven Spiriti

	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Sat May 26 02:25:43 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Fri, 25 May 2018 20:25:43 -0400
Subject: [R-pkg-devel] Courtesy methods and explosive dependencies
In-Reply-To: <DM6PR04MB4380692A57B147749FC2492FF1690@DM6PR04MB4380.namprd04.prod.outlook.com>
References: <DM6PR04MB43804E67FD10D2564E580C50F16A0@DM6PR04MB4380.namprd04.prod.outlook.com>
 <23303.46985.171884.449574@stat.math.ethz.ch>
 <DM6PR04MB4380066A42B65532BAD7C72CF1690@DM6PR04MB4380.namprd04.prod.outlook.com>
 <b56670c4-ad3d-afd5-d05b-ffe6ca6153db@gmail.com>
 <DM6PR04MB4380692A57B147749FC2492FF1690@DM6PR04MB4380.namprd04.prod.outlook.com>
Message-ID: <1db7b0aa-7ac4-8a0f-5003-89020b3c1864@gmail.com>

On 25/05/2018 3:22 PM, Lenth, Russell V wrote:
>> There can't really be an "ImportGenerics", because S3 is so informal.  A generic function is a function that calls UseMethod, but it can do anything else as well.  So R would need some fancy code analysis to know whether it was safe to import the generic but not all the dependencies of that package, and that could change when the package holding the generic was updated.
>>
>> Examples of generics that do more than simply call UseMethod are rare, but they exist:  as.data.frame() and sort() are a couple.
>>
>> Duncan Murdoch
> 
> Right -- ImportGenerics was a dumb idea. However, Something like ImportNoDeps makes sense as an additional category in the DESCRIPTION file. In my example, if such existed, I could put in the DESCRIPTION file:
> 
>      ImportNoDeps: multcomp
> 
> This would signal that multcomp -- but not necessarily any of its dependencies -- is required to install emmeans.  And in the NAMESPACE file:
> 
>      importFrom(multcomp, cld)
>      S3method(cld, emmGrid)
> 
> ... would import the needed generic and register my new S3 method.
> 
> I think this kind of construct could significantly reduce dependencies for packages that extend other packages' methods.

But what happens if the multcomp maintainer modifies cld() next week 
(and makes no other change), so that it makes use of multcomp 
dependencies?  Your package would be claiming that it didn't need them, 
while multcomp would not have changed any of its declarations, just the 
code for that one function.  How would R know to generate an error in 
your package (because its claim about multcomp was now false)?  If it 
didn't, you'd end up in a situation where calls to cld() failed because 
the cld() generic no longer worked.

This is just too complicated.  If multcomp says that it needs 8 
packages, you shouldn't be able to install it without all of them.

On the other hand, I think you can do what you want as follows:

1.  Put multcomp into your Suggests list.  Users can choose to install 
it or not.

2.  Put a conditional define of the generic into one of your .R source 
files to define it for users who don't have multcomp:

if (!requireNamespace("multcomp"))
   cld <- function(object, ...) UseMethod("cld")

3.  In your NAMESPACE file, export cld, and conditionally import it for 
users who do have it:

export(cld)

if (requireNamespace("multcomp"))
   importFrom(multcomp, cld)


I haven't tested this much at all, but it appears to work on a very 
superficial test.

Duncan Murdoch


From murdoch@dunc@n @ending from gm@il@com  Sat May 26 02:31:22 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Fri, 25 May 2018 20:31:22 -0400
Subject: [R-pkg-devel] Errors in R package - Updated
In-Reply-To: <CAGVr+e8ScECVqUY1wa67rYV5B-CjQ_LWocO1toCzU738ycpHmg@mail.gmail.com>
References: <CAGVr+e8ScECVqUY1wa67rYV5B-CjQ_LWocO1toCzU738ycpHmg@mail.gmail.com>
Message-ID: <0cc0e20b-3fe5-5b56-0002-b4159ce9a4d1@gmail.com>

On 25/05/2018 3:25 PM, Steven Spiriti wrote:
>   To Whom It May Concern:
> 
>      I have created a package called "freeknotsplines" in R, and I need to
> make a few updates to it.  I resubmitted the package, and received the
> following error message:

The problem is that you are mixing up S3 and S4 stuff.  You have an S4 
class "freekt", but you are defining functions like coef.freekt and 
expecting them to act as methods for that class.  That's not how to 
define methods in S4.  You use the methods::setMethod() function to do 
that.  Using the naming convention generic.class() is the way to do it 
in S3.

Since your S4 class has no "coef" methods, you'll get the old S3 generic 
handling your coef(xy.freekt) call, and it doesn't know what to do with 
it.  It will pass the object to stats:::coef.default, which tries to 
extract the coefficients using object$coefficients, and that fails when 
object is xy.freekt.

Duncan Murdoch

> 
> checking examples ... ERROR
> Running examples in ?freeknotsplines-Ex.R? failed
> The error most likely occurred in:
> 
>> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>> ### Name: coef.freekt
>> ### Title: Compute Coefficients of B-Splines For Free-Knot Splines
>> ### Aliases: coef.freekt
>> ### Keywords: nonparametric regression smooth
>>
>> ### ** Examples
>>
>> x <- 0:30/30
>> truey <- x*sin(10*x)
>> set.seed(10556)
>> y <- truey + rnorm(31, 0, 0.2)
>> xy.freekt <- freelsgen(x, y, degree = 2, numknot = 2, 555)
>> coef(xy.freekt)
> Error: $ operator not defined for this S4 class
> Execution halted
> 
>       This error occurs in one of the examples in the documentation.   It is
> platform dependent, and does not occur on the machine I am using to create
> the package.  freekt is a new class, which is apparently an S4 class.
> 
> Here is the R code for my package:
> 
> #' @export coef freekt
> #' @export fitted freekt
> #' @export residuals freekt
> #' @export plot freekt
> #' @export summary freekt
> #' @export AIC freekt
> #' @export AICc freekt
> #' @export BIC freekt
> #' @export adjGCV freekt
> #' @export adjAIC freekt
> 
> library(splines)
> 
> setClass("freekt", slots = c(x = "numeric", y = "numeric", degree =
> "integer",
>      seed = "integer", stream = "integer", lambda = "numeric",
>      optknot = "numeric", tracehat = "numeric", GCV = "numeric",
>      GSJS = "numeric", call = "call"))
> 
> freelsgen <- function(x, y, degree, numknot, seed = 5, stream = 0)
> {
>    n <- length(x)
>    ord <- degree + 1
>    optknot <- rep(0, times = numknot)
>    tracehat <- 0
>    GCV <- 0
>    GSJS <- 0
>    result <- .C("freelsgen", as.integer(n), as.double(x), as.double(y),
>                 as.integer(ord), as.integer(numknot), as.integer(seed),
>                 as.integer(stream), as.double(optknot),
>                 as.double(tracehat), as.double(GCV), as.double(GSJS))
>    answer <- new("freekt", x = x, y = y, degree = as.integer(degree),
>                  seed = as.integer(seed), stream = as.integer(stream),
>                  lambda = 0, optknot = result[[8]],
>                  tracehat = result[[9]], GCV = result[[10]],
>                  GSJS = result[[11]], call = match.call())
>    return(answer)
> }
> 
> freelsgold <- function(x, y, degree, numknot, seed = 5, stream = 0)
> {
>    n <- length(x)
>    ord <- degree + 1
>    optknot <- rep(0, times = numknot)
>    tracehat <- 0
>    GCV <- 0
>    GSJS <- 0
>    result <- .C("freelsgold", as.integer(n), as.double(x), as.double(y),
>                 as.integer(ord), as.integer(numknot), as.integer(seed),
>                 as.integer(stream), as.double(optknot),
>                 as.double(tracehat), as.double(GCV), as.double(GSJS))
>    answer <- new("freekt", x = x, y = y, degree = as.integer(degree),
>                  seed = as.integer(seed), stream = as.integer(stream),
>                  lambda = 0, optknot = result[[8]],
>                  tracehat = result[[9]], GCV = result[[10]],
>                  GSJS = result[[11]], call = match.call())
>    return(answer)
> }
> 
> freepsgen <- function(x, y, degree, numknot, seed = 5, stream = 0)
> {
>    n <- length(x)
>    ord <- degree + 1
>    optknot <- rep(0, times = numknot)
>    lambda <- 0
>    tracehat <- 0
>    GCV <- 0
>    GSJS <- 0
>    result <- .C("freepsgen", as.integer(n), as.double(x), as.double(y),
>                 as.integer(ord), as.integer(numknot), as.integer(seed),
>                 as.integer(stream), as.double(lambda),
>                 as.double(optknot), as.double(tracehat),
>                 as.double(GCV), as.double(GSJS))
>    answer <- new("freekt", x = x, y = y, degree = as.integer(degree),
>                 seed = as.integer(seed), stream = as.integer(stream),
>                 lambda = result[[8]], optknot = result[[9]],
>                 tracehat = result[[10]], GCV = result[[11]],
>                 GSJS = result[[12]], call = match.call())
>    return(answer)
> }
> 
> freepsgold <- function(x, y, degree, numknot, seed = 5, stream = 0)
> {
>    n <- length(x)
>    ord <- degree + 1
>    optknot <- rep(0, times = numknot)
>    lambda <- 0
>    tracehat <- 0
>    GCV <- 0
>    GSJS <- 0
>    result <- .C("freepsgold", as.integer(n), as.double(x), as.double(y),
>                 as.integer(ord), as.integer(numknot), as.integer(seed),
>                 as.integer(stream), as.double(lambda),
>                 as.double(optknot), as.double(tracehat),
>                 as.double(GCV), as.double(GSJS))
>    answer <- new("freekt", x = x, y = y,  degree = as.integer(degree),
>                 seed = as.integer(seed), stream = as.integer(stream),
>                 lambda = result[[8]], optknot = result[[9]],
>                 tracehat = result[[10]], GCV = result[[11]],
>                 GSJS = result[[12]], call = match.call())
>    return(answer)
> }
> 
> chgbasismat <- function(knot, ord)
> {
>    dimmat <- length(knot) - ord
>    answer <- matrix(0, nrow = dimmat, ncol = dimmat)
>    for (j in 0:(ord-1))
>    {
>        brow <- splineDesign(knot, knot[1], ord, j)
>        brow <- as.vector(brow/factorial(j))
>        answer[j + 1, ] <- brow
>    }
>    nknot <- sort(-1*knot)
>    for (j in 1:(dimmat - ord))
>    {
>        brow <- splineDesign(knot, knot[ord + j], ord, ord - 1)
>        brow2 <- splineDesign(nknot, nknot[length(knot) - ord - (j - 1)],
>                 ord, ord - 1)
>        brow2 <- brow2[dimmat:1]
>        brow <- brow + (-1)^ord * brow2
>        brow <- as.vector(brow/factorial(ord - 1))
>        answer[ord + j, ] <- brow
>    }
>    return(answer)
> }
> 
> coef.freekt <- function(object, ...)
> {
>    xdat <- object at x
>    ydat <- object at y
>    optknot <- object at optknot
>    ord <- object at degree + 1
>    lambda <- object at lambda
>    fulloptknot <- c(rep(min(xdat), ord), optknot, rep(max(xdat), ord))  #
> includes endpoints
>    Xmat <- splineDesign(fulloptknot, xdat, ord)
>    if ((lambda == 0) | (length(optknot) == 0))
>      coef <- solve(t(Xmat)%*%Xmat, t(Xmat)%*%ydat)
>    else
>      {
>        numknots <- length(optknot)
>        Amat <- chgbasismat(fulloptknot, ord)
>        Istar <- diag(c(rep(0, times = ord), rep(1, times = numknots)))
>        coef <- solve(t(Xmat)%*%Xmat + lambda*t(Amat)%*%Istar%*%Amat,
>                      t(Xmat)%*%ydat)
>      }
>    return(coef)
> }
> 
> fitted.freekt <- function(object, xfit = object at x, ...)
> {
>    xdat <- object at x
>    ydat <- object at y
>    optknot <- object at optknot
>    ord <- object at degree + 1
>    fulloptknot <- c(rep(min(xdat), ord), optknot, rep(max(xdat), ord))  #
> includes endpoints
>    coef <- coef.freekt(object)
>    yfit <- splineDesign(fulloptknot, xfit, ord) %*%coef
>    return(yfit)
> }
> 
> residuals.freekt <- function(object, ...)
> {
>    fit <- fitted.freekt(object)
>    return(object at y - fit)
> }
> 
> plot.freekt <- function(x, xfit = x at x, linecolor="blue", lwd = 1, lty = 1,
> ...)
> {
>    xfit <- as.vector(xfit)
>    yfit <- fitted.freekt(x, xfit)
>    plot(x at x, x at y, ...)
>    lines(xfit[order(xfit)], yfit[order(xfit)], col=linecolor,
>          lwd = lwd, lty = lty)
> }
> 
> summary.freekt <- function(object, ...)
> {
>    answer <- NULL
>    if (object at lambda != 0)
>    {
>       currline <- c(object at lambda,
>          rep(NA, times = length(object at optknot)-1))
>       answer <- rbind(answer, currline)
>    }
>    currline <- object at optknot
>    answer <- rbind(answer, currline)
>    currline <- c(object at GCV,
>          rep(NA, times = length(object at optknot)-1))
>    answer <- rbind(answer, currline)
>    RSS <- sum((residuals(object))^2)
>    currline <- c(RSS, rep(NA, times = length(object at optknot)-1))
>    answer <- rbind(answer, currline)
>    if (object at lambda != 0)
>         rownames(answer) <-
>             c("Optimal lambda", "Optimal knots", "GCV", "RSS")
>    else
>         rownames(answer) <- c("Optimal knots", "GCV", "RSS")
>    colnames(answer) <- rep("", times = length(object at optknot))
>    class(answer) <- "table"
>    print(answer)
> }
> 
> AIC.freekt <- function(object, ..., k = 2)
> {
>    answer <- 0
>    RSS <- sum((residuals(object))^2)
>    n <- length(object at x)
>    npar <- object at tracehat
>    answer <- n * log(RSS/n) + k * npar
>    return(answer)
> }
> 
> AICc.freekt <- function(object)
> {
>    answer <- 0
>    RSS <- sum((residuals(object))^2)
>    n <- length(object at x)
>    npar <- object at tracehat
>    answer <- n * log(RSS/n) + 2 * npar +
>              2 * npar * (npar + 1) /(n - npar - 1)
>    return(answer)
> }
> 
> BIC.freekt <- function(object, ...)
> {
>    answer <- 0
>    RSS <- sum((residuals(object))^2)
>    n <- length(object at x)
>    npar <- object at tracehat
>    answer <- n * log(RSS/n) + log(n) * npar
>    return(answer)
> }
> 
> adjGCV.freekt <- function(object, d = 3)
> {
>    RSS <- sum((residuals(object))^2)
>    n <- length(object at x)
>    adjtrace <- object at tracehat + d * length(object at optknot)
>    answer <- (RSS/n) / (1 - adjtrace / n)^2
>    return(answer)
> }
> 
> adjAIC.freekt <- function(object)
> {
>    answer <- 0
>    RSS <- sum((residuals(object))^2)
>    n <- length(object at x)
>    npar <- object at tracehat
>    effdim <- 2 * npar - object at degree - 1
>    answer <- n * log(RSS/n) +  2 * effdim
>    return(answer)
> }
> 
> fit.search.numknots <- function(x, y, degree, minknot = 1, maxknot = 5,
>                                  alg = "LS", search = "genetic",
>                                  knotnumcrit = "adjGCV", k = 2,
>                                  d = 3, seed = 5, stream = 0)
> {
>    bestcrit <- Inf
>    funcname <- ""
>    answer <- NULL
>    if ((alg == "LS") && (search == "genetic"))
>      funcname <- "freelsgen"
>    if ((alg == "LS") && (search == "golden"))
>      funcname <- "freelsgold"
>    if ((alg == "PS") && (search == "genetic"))
>      funcname <- "freepsgen"
>    if ((alg == "PS") && (search == "golden"))
>      funcname <- "freepsgold"
>    for (numknot in seq(from = minknot, to = maxknot))
>    {
>        currcall <- call(funcname, x, y, degree, numknot, seed, stream)
>        currfit <- eval(currcall)
>        currcrit <- switch(knotnumcrit, GCV = currfit at GCV,
>            AIC = AIC(currfit, k = k), adjAIC = adjAIC.freekt(currfit),
>            AICc = AICc.freekt(currfit), BIC = BIC(currfit),
>            adjGCV = adjGCV.freekt(currfit, d))
>        print(paste("Number of knots = ", numknot, ", ", knotnumcrit,
>            " = ", currcrit, sep = ""), quote = FALSE)
>        if (currcrit < bestcrit)
>        {
>            bestcrit <- currcrit
>            answer <- currfit
>        }
>    }
>    return(answer)
> }
> 
>       I am still not clear on what is causing this error.
> 
> Sincerely,
> 
> Steven Spiriti
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From jpilow@ky @ending from he@lth@@du@dk  Mon May 28 18:33:09 2018
From: jpilow@ky @ending from he@lth@@du@dk (Julia A. Pilowsky)
Date: Mon, 28 May 2018 16:33:09 +0000
Subject: [R-pkg-devel] RcppArmadillo-based package works in every tested OS
 except Debian
Message-ID: <cbda7b6b7a9446bdb889d0b28251c006@health.sdu.dk>

Hello R developers,


I am the maintainer of the colorednoise<https://github.com/japilo/colorednoise> package, which employs RcppArmadillo. The package passes all checks on my local OS X install, on win_builder, and on Travis CI's Ubuntu distribution<https://travis-ci.org/japilo/colorednoise/builds/384377138>.


However, when I submitted the package to CRAN, I got an error message<https://win-builder.r-project.org/incoming_pretest/colorednoise_1.0.2_20180527_174354/Debian/> for Debian and only Debian ? all the other systems appear to run it fine. The error is for the unit test the package has for a RcppArmadillo-based function ? all the other unit tests are for R or Rcpp functions.


I am really scratching my head over why this RcppArmadillo function is working on every OS except Debian, and I'm at a loss as to how to fix it, since I don't have a Debian install on my computer, and Travis CI only tests in Ubuntu. Any advice would be greatly appreciated.


Many thanks,

Julia Pilowsky

	[[alternative HTML version deleted]]


From edd @ending from debi@n@org  Mon May 28 18:55:25 2018
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Mon, 28 May 2018 11:55:25 -0500
Subject: [R-pkg-devel] 
 RcppArmadillo-based package works in every tested OS except Debian
In-Reply-To: <cbda7b6b7a9446bdb889d0b28251c006@health.sdu.dk>
References: <cbda7b6b7a9446bdb889d0b28251c006@health.sdu.dk>
Message-ID: <23308.13437.337440.160261@rob.eddelbuettel.com>


Hi Julia,

On 28 May 2018 at 16:33, Julia A. Pilowsky wrote:
| I am the maintainer of the colorednoise<https://github.com/japilo/colorednoise> package, which employs RcppArmadillo. The package passes all checks on my local OS X install, on win_builder, and on Travis CI's Ubuntu distribution<https://travis-ci.org/japilo/colorednoise/builds/384377138>.
| 
| However, when I submitted the package to CRAN, I got an error message<https://win-builder.r-project.org/incoming_pretest/colorednoise_1.0.2_20180527_174354/Debian/> for Debian and only Debian ? all the other systems appear to run it fine. The error is for the unit test the package has for a RcppArmadillo-based function ? all the other unit tests are for R or Rcpp functions.
| 
| I am really scratching my head over why this RcppArmadillo function is working on every OS except Debian, and I'm at a loss as to how to fix it, since I don't have a Debian install on my computer, and Travis CI only tests in Ubuntu. Any advice would be greatly appreciated.

1) You get easy access to Debian systems via RHub, either using the web
   interface at https://builder.r-hub.io or via the CRAN package rhub.
   A highly recommended service.

2) Another possibility is Docker. It is pretty easy to set up, and I often
   use Docker instances to test things I do not want more permanently on my
   system(s). Also, our Rocker images happen to already use Debian and give
   you R. Maybe start with our recent intro paper to learn more:
   https://journal.r-project.org/archive/2017/RJ-2017-065/index.html
   
3) As Rcpp maintainer, I happen to run a lot of reverse dependency checks for
   Rcpp, RcppArmadillo, ... and yes, colorednoise also failed for me on the
   last three Rcpp reverse depends checks. I log these in a GitHub repo at
   https://github.com/RcppCore/rcpp-logs -- that won't give you details
   but it simply re-affirms the CRAN failures.

Hth, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From li@t@ @ending from @igg-iten@ch  Wed May 30 11:08:38 2018
From: li@t@ @ending from @igg-iten@ch (Christian Sigg)
Date: Wed, 30 May 2018 11:08:38 +0200
Subject: [R-pkg-devel] Conditional use of suggested package in example code
Message-ID: <C1794454-853E-4834-B83F-E59C41FDE82C@sigg-iten.ch>

I am updating the ?nsprcomp? package to follow the recommendations of Section 1.1.3.1 of the Writing R Extensions manual.

Before the update, the example code for the `nsprcomp` function looked like this:

> library(MASS)
> set.seed(1)
> 
> # Regular PCA, with the tolerance set to return five PCs
> prcomp(Boston, tol = 0.36, scale. = TRUE)
> 
> # Sparse PCA with different cardinalities per component. The number of components
> # is derived from the length of vector k.
> nsprcomp(Boston, k = c(13, 7, 5, 5, 5), scale. = TRUE)  
> 
> (?)

The unconditional use of the suggested package ?MASS? produces an error on systems where ?MASS? is not installed. 

I personally think that this is fine in an interactive session. The error makes it obvious what the user has to do to run the example - install the missing package. But I understand that it would increase the complexity of automated checking of examples, where one would have to distinguish between this kind of error and an actual bug in the example code.

In any case, the WRE manual recommends conditional use of suggested packages via `requireNamespace`. A straightforward way to follow the recommendation is to wrap the whole example in a conditional statement:

> if (requireNamespace("MASS", quietly = TRUE)) {
>  set.seed(1)
> 
>  # Regular PCA, with the tolerance set to return five PCs
>  prcomp(MASS::Boston, tol = 0.36, scale. = TRUE)
> 
>  # Sparse PCA with different cardinalities per component. The number of components
>  # is derived from the length of vector k.
>  nsprcomp(MASS::Boston, k = c(13, 7, 5, 5, 5), scale. = TRUE)  
> 
>  (?)
> }

I don?t like this for two reasons:

1. The if statement and the indentation add clutter to the example code, making the help page harder to read.

2. The if statement breaks the output of `example(?nsprcomp?, ?nsprcomp?)`. Now only the statement before the closing curly brace has its output printed to the console. I would have to add explicit print statements that further clutter up the example.

Is there a coding pattern that satisfies the WRE recommendations, but avoids these two problems?

Regards
Christian

?
Christian Sigg
https://sigg-iten.ch/research


From m@echler @ending from @t@t@m@th@ethz@ch  Wed May 30 12:03:23 2018
From: m@echler @ending from @t@t@m@th@ethz@ch (Martin Maechler)
Date: Wed, 30 May 2018 12:03:23 +0200
Subject: [R-pkg-devel] 
 Conditional use of suggested package in example code
In-Reply-To: <C1794454-853E-4834-B83F-E59C41FDE82C@sigg-iten.ch>
References: <C1794454-853E-4834-B83F-E59C41FDE82C@sigg-iten.ch>
Message-ID: <23310.30443.391482.556057@stat.math.ethz.ch>

>>>>> Christian Sigg 
>>>>>     on Wed, 30 May 2018 11:08:38 +0200 writes:

    > I am updating the ?nsprcomp? package to follow the recommendations of Section 1.1.3.1 of the Writing R Extensions manual.
    > Before the update, the example code for the `nsprcomp` function looked like this:

    >> library(MASS)
    >> set.seed(1)
    >> 
    >> # Regular PCA, with the tolerance set to return five PCs
    >> prcomp(Boston, tol = 0.36, scale. = TRUE)
    >> 
    >> # Sparse PCA with different cardinalities per component. The number of components
    >> # is derived from the length of vector k.
    >> nsprcomp(Boston, k = c(13, 7, 5, 5, 5), scale. = TRUE)  
    >> 
    >> (?)

First, a only a "stylistic" remark to you (and many others):
If you only need a dataset from a package, you typically should not attach the
package [to the search() path] via library()/require(), but typically use

   data(Boston, package="MASS")

which only loads MASS' namespace *and* is self-describing that
indeed you only use MASS for getting that data set.

... but see below for your real question

    > The unconditional use of the suggested package ?MASS? produces an error on systems where ?MASS? is not installed. 

    > I personally think that this is fine in an interactive session. The error makes it obvious what the user has to do to run the example - install the missing package. But I understand that it would increase the complexity of automated checking of examples, where one would have to distinguish between this kind of error and an actual bug in the example code.

    > In any case, the WRE manual recommends conditional use of suggested packages via `requireNamespace`. A straightforward way to follow the recommendation is to wrap the whole example in a conditional statement:

    >> if (requireNamespace("MASS", quietly = TRUE)) {
    >> set.seed(1)
    >> 
    >> # Regular PCA, with the tolerance set to return five PCs
    >> prcomp(MASS::Boston, tol = 0.36, scale. = TRUE)
    >> 
    >> # Sparse PCA with different cardinalities per component. The number of components
    >> # is derived from the length of vector k.
    >> nsprcomp(MASS::Boston, k = c(13, 7, 5, 5, 5), scale. = TRUE)  
    >> 
    >> (?)
    >> }

    > I don?t like this for two reasons:

    > 1. The if statement and the indentation add clutter to the example code, making the help page harder to read.

    > 2. The if statement breaks the output of `example(?nsprcomp?, ?nsprcomp?)`. Now only the statement before the closing curly brace has its output printed to the console. I would have to add explicit print statements that further clutter up the example.

    > Is there a coding pattern that satisfies the WRE recommendations, but avoids these two problems?

A very good question:

I have introduced the function   withAutoprint( . )  into R 3.4.0  
to address your '2.'  -- not perfectly but at least
transparently,
so the if would going to be

  if (requireNamespace("MASS", quietly = TRUE)) withAutoprint({


  })

{and you'd have to add  'Depends: R (>= 3.4.0)'}

To address '1.'  you could wrap  \dontshow{ * } around the two
if()-related lines in your example code which makes the code
*look* better to the help page readers. 

These two "techniques" together get you quite far, though I
agree it's a bit of fiddling..

Last but not least - of course you know that, I'm just stating
the obvious here:  The small 'datasets' that comes with R
does not need any conditionals (nor does simple random-generated
data that you could use).

Best,
Martin


    > Regards
    > Christian

    > ?
    > Christian Sigg
    > https://sigg-iten.ch/research

    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From li@t@ @ending from @igg-iten@ch  Wed May 30 14:19:04 2018
From: li@t@ @ending from @igg-iten@ch (Christian Sigg)
Date: Wed, 30 May 2018 14:19:04 +0200
Subject: [R-pkg-devel] 
 Conditional use of suggested package in example code
In-Reply-To: <23310.30443.391482.556057@stat.math.ethz.ch>
References: <C1794454-853E-4834-B83F-E59C41FDE82C@sigg-iten.ch>
 <23310.30443.391482.556057@stat.math.ethz.ch>
Message-ID: <B97F3503-01A6-4B5E-899F-5351450009F5@sigg-iten.ch>

Hi Martin

Thank you for your reply.

> On 30 May 2018, at 12:03, Martin Maechler <maechler at stat.math.ethz.ch> wrote:
> 
>>>>>> Christian Sigg 
>>>>>>    on Wed, 30 May 2018 11:08:38 +0200 writes:
> 
>> I am updating the ?nsprcomp? package to follow the recommendations of Section 1.1.3.1 of the Writing R Extensions manual.
>> Before the update, the example code for the `nsprcomp` function looked like this:
> 
>>> library(MASS)
>>> set.seed(1)
>>> 
>>> # Regular PCA, with the tolerance set to return five PCs
>>> prcomp(Boston, tol = 0.36, scale. = TRUE)
>>> 
>>> # Sparse PCA with different cardinalities per component. The number of components
>>> # is derived from the length of vector k.
>>> nsprcomp(Boston, k = c(13, 7, 5, 5, 5), scale. = TRUE)  
>>> 
>>> (?)
> 
> First, a only a "stylistic" remark to you (and many others):
> If you only need a dataset from a package, you typically should not attach the
> package [to the search() path] via library()/require(), but typically use
> 
>   data(Boston, package="MASS")
> 
> which only loads MASS' namespace *and* is self-describing that
> indeed you only use MASS for getting that data set.

I agree with you. In my specific example, I later also use MASS::ginv(), but unfortunately that was not visible in the excerpt.

> ... but see below for your real question
> 
>> The unconditional use of the suggested package ?MASS? produces an error on systems where ?MASS? is not installed. 
> 
>> I personally think that this is fine in an interactive session. The error makes it obvious what the user has to do to run the example - install the missing package. But I understand that it would increase the complexity of automated checking of examples, where one would have to distinguish between this kind of error and an actual bug in the example code.
> 
>> In any case, the WRE manual recommends conditional use of suggested packages via `requireNamespace`. A straightforward way to follow the recommendation is to wrap the whole example in a conditional statement:
> 
>>> if (requireNamespace("MASS", quietly = TRUE)) {
>>> set.seed(1)
>>> 
>>> # Regular PCA, with the tolerance set to return five PCs
>>> prcomp(MASS::Boston, tol = 0.36, scale. = TRUE)
>>> 
>>> # Sparse PCA with different cardinalities per component. The number of components
>>> # is derived from the length of vector k.
>>> nsprcomp(MASS::Boston, k = c(13, 7, 5, 5, 5), scale. = TRUE)  
>>> 
>>> (?)
>>> }
> 
>> I don?t like this for two reasons:
> 
>> 1. The if statement and the indentation add clutter to the example code, making the help page harder to read.
> 
>> 2. The if statement breaks the output of `example(?nsprcomp?, ?nsprcomp?)`. Now only the statement before the closing curly brace has its output printed to the console. I would have to add explicit print statements that further clutter up the example.
> 
>> Is there a coding pattern that satisfies the WRE recommendations, but avoids these two problems?
> 
> A very good question:
> 
> I have introduced the function   withAutoprint( . )  into R 3.4.0  
> to address your '2.'  -- not perfectly but at least
> transparently,
> so the if would going to be
> 
>  if (requireNamespace("MASS", quietly = TRUE)) withAutoprint({
> 
> 
>  })
> 
> {and you'd have to add  'Depends: R (>= 3.4.0)?}

Thank you for that!

> 
> To address '1.'  you could wrap  \dontshow{ * } around the two
> if()-related lines in your example code which makes the code
> *look* better to the help page readers. 

But how do I only hide the if statement and its closing curly brace? The following doesn?t work:

> \examples{
>   \dontshow{
>     if (TRUE) {
>   }
>   test(1)
>   \dontshow{
>     }
>   }
> }


The example section on the help page is empty, because the curly braces of the if statement and the \dontshow get mixed up. 

Ordering the statements this way:

> \examples{
>   \dontshow{
>     if (TRUE) 
>   }
>   {
>     test(1)
>   }
> }

is better, but the opening and closing curly brace of the if statement remain on the help page. 

Furthermore, I keep the examples in standalone files that I include in the documentation using roxygen2?s @example. Adding the \dontshow markup means I can?t source them anymore.

> 
> These two "techniques" together get you quite far, though I
> agree it's a bit of fiddling..
> 
> Last but not least - of course you know that, I'm just stating
> the obvious here:  The small 'datasets' that comes with R
> does not need any conditionals (nor does simple random-generated
> data that you could use).

Quoting from the WRE manual:

> Some people have assumed that a ?recommended? package in ?Suggests? can safely be used unconditionally, but this is not so. (R can be installed without recommended packages, and which packages are ?recommended? may change.) 


So according to the manual, even MASS needs a conditional.

I do use random data in my tests, but I think that the examples profit from using a real dataset.

Regards
Christian

> 
> Best,
> Martin
> 
> 
>> Regards
>> Christian
> 
>> ?
>> Christian Sigg
>> https://sigg-iten.ch/research
> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From khoongweih@o @ending from hotm@il@com  Wed May 30 16:03:45 2018
From: khoongweih@o @ending from hotm@il@com (khoong Wei Hao)
Date: Wed, 30 May 2018 14:03:45 +0000
Subject: [R-pkg-devel] FW: [CRAN-pretest-archived] CRAN submission bwt 1.1.0
In-Reply-To: <HK2PR03MB0609FFF9577DF9AA5F2FFB05D86C0@HK2PR03MB0609.apcprd03.prod.outlook.com>
References: <20180529081440.2DEAD1641AF@xmpalantir.wu.ac.at>
 <01d3f767$Blat.v3.2.16$a420ed35$1d1884ea1@mail.statistik.tu-dortmund.de>
 <HK2PR03MB060978784B50668C9CBE4DFED86C0@HK2PR03MB0609.apcprd03.prod.outlook.com>
 <HK2PR03MB0609FFF9577DF9AA5F2FFB05D86C0@HK2PR03MB0609.apcprd03.prod.outlook.com>
Message-ID: <HK2PR03MB0609B835ABD988918718B95DD86C0@HK2PR03MB0609.apcprd03.prod.outlook.com>

Hi Everyone,

I encountered an issue during my submission of my package (see original message below).

I ran checks and tests with testthat::test_dir("tests/") and devtoos::check(), and all seemed fine except some issues with undocumented objects which I did note in the .Rd file, and the documentation appeared in the console as I ran the package. The following is my R console output:

> devtools::check()
Updating bwt documentation
Loading bwt
First time using roxygen2. Upgrading automatically...
Warning: The existing 'NAMESPACE' file was not generated by roxygen2, and will not be overwritten.
Setting env vars ----------------------------------------------------------------------------------------------------
CFLAGS  : -Wall -pedantic
CXXFLAGS: -Wall -pedantic
Building bwt --------------------------------------------------------------------------------------------------------
"C:/PROGRA~1/R/R-33~1.2/bin/x64/R" --no-site-file --no-environ --no-save --no-restore --quiet CMD build  \
  "C:\Users\khoongwh\Documents\bwt" --no-resave-data --no-manual 

* checking for file 'C:\Users\khoongwh\Documents\bwt/DESCRIPTION' ... OK
* preparing 'bwt':
* checking DESCRIPTION meta-information ... OK
* checking for LF line-endings in source and make files
* checking for empty or unneeded directories Removed empty directory 'bwt/man'
Removed empty directory 'bwt/tests/testthat'
* building 'bwt_1.1.0.tar.gz'

Setting env vars ----------------------------------------------------------------------------------------------------
_R_CHECK_CRAN_INCOMING_ : FALSE
_R_CHECK_FORCE_SUGGESTS_: FALSE
Checking bwt --------------------------------------------------------------------------------------------------------
"C:/PROGRA~1/R/R-33~1.2/bin/x64/R" --no-site-file --no-environ --no-save --no-restore --quiet CMD check  \
  "C:\Users\khoongwh\AppData\Local\Temp\RtmpKmUMRO/bwt_1.1.0.tar.gz" --as-cran --timings --no-manual 

* using log directory 'C:/Users/khoongwh/AppData/Local/Temp/RtmpKmUMRO/bwt.Rcheck'
* using R version 3.3.2 (2016-10-31)
* using platform: x86_64-w64-mingw32 (64-bit)
* using session charset: ISO8859-1
* using options '--no-manual --as-cran'
* checking for file 'bwt/DESCRIPTION' ... OK
* checking extension type ... Package
* this is package 'bwt' version '1.1.0'
* package encoding: UTF-8
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for .dll and .exe files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking whether package 'bwt' can be installed ... OK
* checking package directory ... OK
* checking DESCRIPTION meta-information ... WARNING Non-standard license specification:
  GNU General Public License v3.0
Standardizable: FALSE
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ... OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking loading without being on the library search path ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... OK
* checking for missing documentation entries ... WARNING Undocumented code objects:
  'bwt' 'ibwt'
All user-level objects in a package should have documentation entries.
See chapter 'Writing R documentation files' in the 'Writing R Extensions' manual.
* checking examples ... NONE
* checking for unstated dependencies in 'tests' ... OK
* checking tests ...
  Running 'testthat.R'
Warning message:
running command '"C:/PROGRA~1/R/R-33~1.2/bin/x64/R" CMD BATCH --vanilla  "testthat.R" "testthat.Rout"' had status 1  ERROR Running the tests in 'tests/testthat.R' failed.
Last 13 lines of output:
  
  Type 'demo()' for some demos, 'help()' for on-line help, or
  'help.start()' for an HTML browser interface to help.
  Type 'q()' to quit R.
  
  > library(testthat)
  Warning message:
  package 'testthat' was built under R version 3.3.3
  > library(bwt)
  >
  > test_check("bwt")
  Error: No tests found for bwt
  Execution halted
* DONE

Status: 1 ERROR, 2 WARNINGs
See
  'C:/Users/khoongwh/AppData/Local/Temp/RtmpKmUMRO/bwt.Rcheck/00check.log'
for details.

R CMD check results
1 error  | 2 warnings | 0 notes
checking tests ... ERROR
Running the tests in 'tests/testthat.R' failed.
Last 13 lines of output:
  
  Type 'demo()' for some demos, 'help()' for on-line help, or
  'help.start()' for an HTML browser interface to help.
  Type 'q()' to quit R.
  
  > library(testthat)
  Warning message:
  package 'testthat' was built under R version 3.3.3
  > library(bwt)
  >
  > test_check("bwt")
  Error: No tests found for bwt
  Execution halted

checking DESCRIPTION meta-information ... WARNING Non-standard license specification:
  GNU General Public License v3.0
Standardizable: FALSE

checking for missing documentation entries ... WARNING Undocumented code objects:
  'bwt' 'ibwt'
All user-level objects in a package should have documentation entries.
See chapter 'Writing R documentation files' in the 'Writing R Extensions' manual.

May I know how can I proceed? I am kind of lost a this pint in time, even after looking up CRAN's documentations.. If it helps, attached in this email is my .tar.gz file which I have submitted earlier.

Thank you and I apologize for any inconvenience that I may have caused..

Warmest Regards,

Wei Hao Khoong (Mr)

-----Original Message-----
From: Uwe.Ligges at R-Project.org <Uwe.Ligges at R-Project.org>
Sent: Wednesday, 30 May 2018 12:11 AM
To: khoongweihao at hotmail.com
Cc: CRAN-submissions at R-project.org
Subject: [CRAN-pretest-archived] CRAN submission bwt 1.1.0

Dear maintainer,

package bwt_1.1.0.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:


Status: 3 WARNINGs, 3 NOTEs
Debian: <https://win-builder.r-project.org/incoming_pretest/bwt_1.1.0_20180529_101440/Debian/00check.log>
Status: 3 WARNINGs, 3 NOTEs



Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.

More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/bwt_1.1.0_20180529_101440/>
The files will be removed after roughly 7 days.

No strong reverse dependencies to be checked.

Best regards,
CRAN teams' auto-check service

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: 00details.log
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20180530/8f5098e9/attachment.log>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: bwt_1.1.0.tar.gz
Type: application/x-gzip
Size: 1794 bytes
Desc: bwt_1.1.0.tar.gz
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20180530/8f5098e9/attachment.bin>

From jpilow@ky @ending from he@lth@@du@dk  Wed May 30 16:35:28 2018
From: jpilow@ky @ending from he@lth@@du@dk (Julia A. Pilowsky)
Date: Wed, 30 May 2018 14:35:28 +0000
Subject: [R-pkg-devel] 
 RcppArmadillo-based package works in every tested OS except Debian
In-Reply-To: <23308.13437.337440.160261@rob.eddelbuettel.com>
References: <cbda7b6b7a9446bdb889d0b28251c006@health.sdu.dk>,
 <23308.13437.337440.160261@rob.eddelbuettel.com>
Message-ID: <5799f8bb4bf747259990018522b3ea26@health.sdu.dk>

Hello Dirk,


Thank you for the advice. Currently I get a bug whenever I try to use R Builder on my computer, no matter which browser I launch it from, but I will try the Rocker images, as I have worked with Docker before and have some familiarity.


Gratefully,

Julia

________________________________
From: Dirk Eddelbuettel <dirk.eddelbuettel at gmail.com> on behalf of Dirk Eddelbuettel <edd at debian.org>
Sent: Monday, May 28, 2018 6:55:25 PM
To: Julia A. Pilowsky
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] RcppArmadillo-based package works in every tested OS except Debian


Hi Julia,

On 28 May 2018 at 16:33, Julia A. Pilowsky wrote:
| I am the maintainer of the colorednoise<https://github.com/japilo/colorednoise> package, which employs RcppArmadillo. The package passes all checks on my local OS X install, on win_builder, and on Travis CI's Ubuntu distribution<https://travis-ci.org/japilo/colorednoise/builds/384377138>.
|
| However, when I submitted the package to CRAN, I got an error message<https://win-builder.r-project.org/incoming_pretest/colorednoise_1.0.2_20180527_174354/Debian/> for Debian and only Debian ? all the other systems appear to run it fine. The error is for the unit test the package has for a RcppArmadillo-based function ? all the other unit tests are for R or Rcpp functions.
|
| I am really scratching my head over why this RcppArmadillo function is working on every OS except Debian, and I'm at a loss as to how to fix it, since I don't have a Debian install on my computer, and Travis CI only tests in Ubuntu. Any advice would be greatly appreciated.

1) You get easy access to Debian systems via RHub, either using the web
   interface at https://builder.r-hub.io or via the CRAN package rhub.
   A highly recommended service.

2) Another possibility is Docker. It is pretty easy to set up, and I often
   use Docker instances to test things I do not want more permanently on my
   system(s). Also, our Rocker images happen to already use Debian and give
   you R. Maybe start with our recent intro paper to learn more:
   https://journal.r-project.org/archive/2017/RJ-2017-065/index.html

3) As Rcpp maintainer, I happen to run a lot of reverse dependency checks for
   Rcpp, RcppArmadillo, ... and yes, colorednoise also failed for me on the
   last three Rcpp reverse depends checks. I log these in a GitHub repo at
   https://github.com/RcppCore/rcpp-logs -- that won't give you details
   but it simply re-affirms the CRAN failures.

Hth, Dirk

--
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

	[[alternative HTML version deleted]]


From hugh@p@r@on@ge @ending from gm@il@com  Wed May 30 16:52:57 2018
From: hugh@p@r@on@ge @ending from gm@il@com (Hugh Parsonage)
Date: Thu, 31 May 2018 00:52:57 +1000
Subject: [R-pkg-devel] 
 FW: [CRAN-pretest-archived] CRAN submission bwt 1.1.0
In-Reply-To: <HK2PR03MB0609B835ABD988918718B95DD86C0@HK2PR03MB0609.apcprd03.prod.outlook.com>
References: <20180529081440.2DEAD1641AF@xmpalantir.wu.ac.at>
 <01d3f767$Blat.v3.2.16$a420ed35$1d1884ea1@mail.statistik.tu-dortmund.de>
 <HK2PR03MB060978784B50668C9CBE4DFED86C0@HK2PR03MB0609.apcprd03.prod.outlook.com>
 <HK2PR03MB0609FFF9577DF9AA5F2FFB05D86C0@HK2PR03MB0609.apcprd03.prod.outlook.com>
 <HK2PR03MB0609B835ABD988918718B95DD86C0@HK2PR03MB0609.apcprd03.prod.outlook.com>
Message-ID: <CAJmOi+N3Um40z-ff86HWoBcPswCy2BUaton8PmYCTFHY1EHMxg@mail.gmail.com>

Hi,

There are a few problems with the submission. Probably more than can
be resolved by people on the mailing list. Speaking generally, a
WARNING in a CRAN check is something that *must* be fixed, rather than
something which you can just acknowledge. The two warnings that you
mentioned are that you probably have (in your DESCRIPTION file)

License: GNU General Public License v3.0

when you should have

License: GPL-3

The second warning is about undocumented code objects. You can choose
not to export them, but if you do export them as you currently are,
you will need to document them.

I notice that there are other problems too: consult the links in the
auto-generated email from CRAN, see the 00check file. You should fix
every problem until there are no ERRORS, WARNINGS, or NOTEs.


Best.

On 31 May 2018 at 00:03, khoong Wei Hao <khoongweihao at hotmail.com> wrote:
> Hi Everyone,
>
> I encountered an issue during my submission of my package (see original message below).
>
> I ran checks and tests with testthat::test_dir("tests/") and devtoos::check(), and all seemed fine except some issues with undocumented objects which I did note in the .Rd file, and the documentation appeared in the console as I ran the package. The following is my R console output:
>
>> devtools::check()
> Updating bwt documentation
> Loading bwt
> First time using roxygen2. Upgrading automatically...
> Warning: The existing 'NAMESPACE' file was not generated by roxygen2, and will not be overwritten.
> Setting env vars ----------------------------------------------------------------------------------------------------
> CFLAGS  : -Wall -pedantic
> CXXFLAGS: -Wall -pedantic
> Building bwt --------------------------------------------------------------------------------------------------------
> "C:/PROGRA~1/R/R-33~1.2/bin/x64/R" --no-site-file --no-environ --no-save --no-restore --quiet CMD build  \
>   "C:\Users\khoongwh\Documents\bwt" --no-resave-data --no-manual
>
> * checking for file 'C:\Users\khoongwh\Documents\bwt/DESCRIPTION' ... OK
> * preparing 'bwt':
> * checking DESCRIPTION meta-information ... OK
> * checking for LF line-endings in source and make files
> * checking for empty or unneeded directories Removed empty directory 'bwt/man'
> Removed empty directory 'bwt/tests/testthat'
> * building 'bwt_1.1.0.tar.gz'
>
> Setting env vars ----------------------------------------------------------------------------------------------------
> _R_CHECK_CRAN_INCOMING_ : FALSE
> _R_CHECK_FORCE_SUGGESTS_: FALSE
> Checking bwt --------------------------------------------------------------------------------------------------------
> "C:/PROGRA~1/R/R-33~1.2/bin/x64/R" --no-site-file --no-environ --no-save --no-restore --quiet CMD check  \
>   "C:\Users\khoongwh\AppData\Local\Temp\RtmpKmUMRO/bwt_1.1.0.tar.gz" --as-cran --timings --no-manual
>
> * using log directory 'C:/Users/khoongwh/AppData/Local/Temp/RtmpKmUMRO/bwt.Rcheck'
> * using R version 3.3.2 (2016-10-31)
> * using platform: x86_64-w64-mingw32 (64-bit)
> * using session charset: ISO8859-1
> * using options '--no-manual --as-cran'
> * checking for file 'bwt/DESCRIPTION' ... OK
> * checking extension type ... Package
> * this is package 'bwt' version '1.1.0'
> * package encoding: UTF-8
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for .dll and .exe files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking whether package 'bwt' can be installed ... OK
> * checking package directory ... OK
> * checking DESCRIPTION meta-information ... WARNING Non-standard license specification:
>   GNU General Public License v3.0
> Standardizable: FALSE
> * checking top-level files ... OK
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * checking whether the package can be loaded ... OK
> * checking whether the package can be loaded with stated dependencies ... OK
> * checking whether the package can be unloaded cleanly ... OK
> * checking whether the namespace can be loaded with stated dependencies ... OK
> * checking whether the namespace can be unloaded cleanly ... OK
> * checking loading without being on the library search path ... OK
> * checking dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... OK
> * checking for missing documentation entries ... WARNING Undocumented code objects:
>   'bwt' 'ibwt'
> All user-level objects in a package should have documentation entries.
> See chapter 'Writing R documentation files' in the 'Writing R Extensions' manual.
> * checking examples ... NONE
> * checking for unstated dependencies in 'tests' ... OK
> * checking tests ...
>   Running 'testthat.R'
> Warning message:
> running command '"C:/PROGRA~1/R/R-33~1.2/bin/x64/R" CMD BATCH --vanilla  "testthat.R" "testthat.Rout"' had status 1  ERROR Running the tests in 'tests/testthat.R' failed.
> Last 13 lines of output:
>
>   Type 'demo()' for some demos, 'help()' for on-line help, or
>   'help.start()' for an HTML browser interface to help.
>   Type 'q()' to quit R.
>
>   > library(testthat)
>   Warning message:
>   package 'testthat' was built under R version 3.3.3
>   > library(bwt)
>   >
>   > test_check("bwt")
>   Error: No tests found for bwt
>   Execution halted
> * DONE
>
> Status: 1 ERROR, 2 WARNINGs
> See
>   'C:/Users/khoongwh/AppData/Local/Temp/RtmpKmUMRO/bwt.Rcheck/00check.log'
> for details.
>
> R CMD check results
> 1 error  | 2 warnings | 0 notes
> checking tests ... ERROR
> Running the tests in 'tests/testthat.R' failed.
> Last 13 lines of output:
>
>   Type 'demo()' for some demos, 'help()' for on-line help, or
>   'help.start()' for an HTML browser interface to help.
>   Type 'q()' to quit R.
>
>   > library(testthat)
>   Warning message:
>   package 'testthat' was built under R version 3.3.3
>   > library(bwt)
>   >
>   > test_check("bwt")
>   Error: No tests found for bwt
>   Execution halted
>
> checking DESCRIPTION meta-information ... WARNING Non-standard license specification:
>   GNU General Public License v3.0
> Standardizable: FALSE
>
> checking for missing documentation entries ... WARNING Undocumented code objects:
>   'bwt' 'ibwt'
> All user-level objects in a package should have documentation entries.
> See chapter 'Writing R documentation files' in the 'Writing R Extensions' manual.
>
> May I know how can I proceed? I am kind of lost a this pint in time, even after looking up CRAN's documentations.. If it helps, attached in this email is my .tar.gz file which I have submitted earlier.
>
> Thank you and I apologize for any inconvenience that I may have caused..
>
> Warmest Regards,
>
> Wei Hao Khoong (Mr)
>
> -----Original Message-----
> From: Uwe.Ligges at R-Project.org <Uwe.Ligges at R-Project.org>
> Sent: Wednesday, 30 May 2018 12:11 AM
> To: khoongweihao at hotmail.com
> Cc: CRAN-submissions at R-project.org
> Subject: [CRAN-pretest-archived] CRAN submission bwt 1.1.0
>
> Dear maintainer,
>
> package bwt_1.1.0.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
>
>
> Status: 3 WARNINGs, 3 NOTEs
> Debian: <https://win-builder.r-project.org/incoming_pretest/bwt_1.1.0_20180529_101440/Debian/00check.log>
> Status: 3 WARNINGs, 3 NOTEs
>
>
>
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
>
> More details are given in the directory:
> <https://win-builder.r-project.org/incoming_pretest/bwt_1.1.0_20180529_101440/>
> The files will be removed after roughly 7 days.
>
> No strong reverse dependencies to be checked.
>
> Best regards,
> CRAN teams' auto-check service
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From Jori@@Mey@ @ending from ugent@be  Wed May 30 17:17:04 2018
From: Jori@@Mey@ @ending from ugent@be (Joris Meys)
Date: Wed, 30 May 2018 17:17:04 +0200
Subject: [R-pkg-devel] 
 FW: [CRAN-pretest-archived] CRAN submission bwt 1.1.0
In-Reply-To: <CAJmOi+N3Um40z-ff86HWoBcPswCy2BUaton8PmYCTFHY1EHMxg@mail.gmail.com>
References: <20180529081440.2DEAD1641AF@xmpalantir.wu.ac.at>
 <01d3f767$Blat.v3.2.16$a420ed35$1d1884ea1@mail.statistik.tu-dortmund.de>
 <HK2PR03MB060978784B50668C9CBE4DFED86C0@HK2PR03MB0609.apcprd03.prod.outlook.com>
 <HK2PR03MB0609FFF9577DF9AA5F2FFB05D86C0@HK2PR03MB0609.apcprd03.prod.outlook.com>
 <HK2PR03MB0609B835ABD988918718B95DD86C0@HK2PR03MB0609.apcprd03.prod.outlook.com>
 <CAJmOi+N3Um40z-ff86HWoBcPswCy2BUaton8PmYCTFHY1EHMxg@mail.gmail.com>
Message-ID: <CAO1zAVaGmCPZfj5awtfNRqJMq_WcQNZ0wZgwBd5ETStpgLHq=g@mail.gmail.com>

Hi Khoong,

I'm going to address the elephant in the room: your package is not ready
for CRAN, and I'm not even sure CRAN is the right place for that code.

There's two large issues with your package, next to the license problem
Hugh pointed out already:

1. R code needs to be in subdirectory R, the Rd file needs to be in a
subdirectory called man. In the tar.gz file, both are in the main folder.
That's never going to work.

2. Your Rd file is seriously messed up. The name and alias contain what
should be the title, the title isn't filled in. I suggest you take a look
at roxygen2 to help you write the documentation, or go through Writing R
extensions again to check the details on the man pages.

\name{bwt}
\alias{ibwt}

will at least get the one warning about undocumented objects away.

3. The package in its entirity is 2 rather short functions. I'm not from
CRAN, but I don't know if that would pass the "non-trivial contribution"
test. You might want to think about a package that could import your code
rather than submitting a separate package. Not saying the code is not
valuable or the package has no place on CRAN, but you might get questions
on that and then it's better to be prepared with a good answer as to why
this really should be on CRAN.

Your error otoh looks like something that is not your fault. As far as I
know, having a test suite using testthat is not obligatory for a CRAN
package. Yet, CRAN did try to run the tests and errored because it couldn't
find any. I'll raise that at R-devel and see what's going on there.
Nevertheless, adding a few tests would be a good idea. testthat lets you do
that rather easily, and you can find more information in the vignettes of
that package and Hadley's book on writing packages.

Hope this helps
Cheers
Joris



On Wed, May 30, 2018 at 4:52 PM, Hugh Parsonage <hugh.parsonage at gmail.com>
wrote:

> Hi,
>
> There are a few problems with the submission. Probably more than can
> be resolved by people on the mailing list. Speaking generally, a
> WARNING in a CRAN check is something that *must* be fixed, rather than
> something which you can just acknowledge. The two warnings that you
> mentioned are that you probably have (in your DESCRIPTION file)
>
> License: GNU General Public License v3.0
>
> when you should have
>
> License: GPL-3
>
> The second warning is about undocumented code objects. You can choose
> not to export them, but if you do export them as you currently are,
> you will need to document them.
>
> I notice that there are other problems too: consult the links in the
> auto-generated email from CRAN, see the 00check file. You should fix
> every problem until there are no ERRORS, WARNINGS, or NOTEs.
>
>
> Best.
>
> On 31 May 2018 at 00:03, khoong Wei Hao <khoongweihao at hotmail.com> wrote:
> > Hi Everyone,
> >
> > I encountered an issue during my submission of my package (see original
> message below).
> >
> > I ran checks and tests with testthat::test_dir("tests/") and
> devtoos::check(), and all seemed fine except some issues with undocumented
> objects which I did note in the .Rd file, and the documentation appeared in
> the console as I ran the package. The following is my R console output:
> >
> >> devtools::check()
> > Updating bwt documentation
> > Loading bwt
> > First time using roxygen2. Upgrading automatically...
> > Warning: The existing 'NAMESPACE' file was not generated by roxygen2,
> and will not be overwritten.
> > Setting env vars ------------------------------
> ----------------------------------------------------------------------
> > CFLAGS  : -Wall -pedantic
> > CXXFLAGS: -Wall -pedantic
> > Building bwt ------------------------------
> --------------------------------------------------------------------------
> > "C:/PROGRA~1/R/R-33~1.2/bin/x64/R" --no-site-file --no-environ
> --no-save --no-restore --quiet CMD build  \
> >   "C:\Users\khoongwh\Documents\bwt" --no-resave-data --no-manual
> >
> > * checking for file 'C:\Users\khoongwh\Documents\bwt/DESCRIPTION' ... OK
> > * preparing 'bwt':
> > * checking DESCRIPTION meta-information ... OK
> > * checking for LF line-endings in source and make files
> > * checking for empty or unneeded directories Removed empty directory
> 'bwt/man'
> > Removed empty directory 'bwt/tests/testthat'
> > * building 'bwt_1.1.0.tar.gz'
> >
> > Setting env vars ------------------------------
> ----------------------------------------------------------------------
> > _R_CHECK_CRAN_INCOMING_ : FALSE
> > _R_CHECK_FORCE_SUGGESTS_: FALSE
> > Checking bwt ------------------------------
> --------------------------------------------------------------------------
> > "C:/PROGRA~1/R/R-33~1.2/bin/x64/R" --no-site-file --no-environ
> --no-save --no-restore --quiet CMD check  \
> >   "C:\Users\khoongwh\AppData\Local\Temp\RtmpKmUMRO/bwt_1.1.0.tar.gz"
> --as-cran --timings --no-manual
> >
> > * using log directory 'C:/Users/khoongwh/AppData/
> Local/Temp/RtmpKmUMRO/bwt.Rcheck'
> > * using R version 3.3.2 (2016-10-31)
> > * using platform: x86_64-w64-mingw32 (64-bit)
> > * using session charset: ISO8859-1
> > * using options '--no-manual --as-cran'
> > * checking for file 'bwt/DESCRIPTION' ... OK
> > * checking extension type ... Package
> > * this is package 'bwt' version '1.1.0'
> > * package encoding: UTF-8
> > * checking package namespace information ... OK
> > * checking package dependencies ... OK
> > * checking if this is a source package ... OK
> > * checking if there is a namespace ... OK
> > * checking for .dll and .exe files ... OK
> > * checking for hidden files and directories ... OK
> > * checking for portable file names ... OK
> > * checking whether package 'bwt' can be installed ... OK
> > * checking package directory ... OK
> > * checking DESCRIPTION meta-information ... WARNING Non-standard license
> specification:
> >   GNU General Public License v3.0
> > Standardizable: FALSE
> > * checking top-level files ... OK
> > * checking for left-over files ... OK
> > * checking index information ... OK
> > * checking package subdirectories ... OK
> > * checking R files for non-ASCII characters ... OK
> > * checking R files for syntax errors ... OK
> > * checking whether the package can be loaded ... OK
> > * checking whether the package can be loaded with stated dependencies
> ... OK
> > * checking whether the package can be unloaded cleanly ... OK
> > * checking whether the namespace can be loaded with stated dependencies
> ... OK
> > * checking whether the namespace can be unloaded cleanly ... OK
> > * checking loading without being on the library search path ... OK
> > * checking dependencies in R code ... OK
> > * checking S3 generic/method consistency ... OK
> > * checking replacement functions ... OK
> > * checking foreign function calls ... OK
> > * checking R code for possible problems ... OK
> > * checking for missing documentation entries ... WARNING Undocumented
> code objects:
> >   'bwt' 'ibwt'
> > All user-level objects in a package should have documentation entries.
> > See chapter 'Writing R documentation files' in the 'Writing R
> Extensions' manual.
> > * checking examples ... NONE
> > * checking for unstated dependencies in 'tests' ... OK
> > * checking tests ...
> >   Running 'testthat.R'
> > Warning message:
> > running command '"C:/PROGRA~1/R/R-33~1.2/bin/x64/R" CMD BATCH
> --vanilla  "testthat.R" "testthat.Rout"' had status 1  ERROR Running the
> tests in 'tests/testthat.R' failed.
> > Last 13 lines of output:
> >
> >   Type 'demo()' for some demos, 'help()' for on-line help, or
> >   'help.start()' for an HTML browser interface to help.
> >   Type 'q()' to quit R.
> >
> >   > library(testthat)
> >   Warning message:
> >   package 'testthat' was built under R version 3.3.3
> >   > library(bwt)
> >   >
> >   > test_check("bwt")
> >   Error: No tests found for bwt
> >   Execution halted
> > * DONE
> >
> > Status: 1 ERROR, 2 WARNINGs
> > See
> >   'C:/Users/khoongwh/AppData/Local/Temp/RtmpKmUMRO/bwt.
> Rcheck/00check.log'
> > for details.
> >
> > R CMD check results
> > 1 error  | 2 warnings | 0 notes
> > checking tests ... ERROR
> > Running the tests in 'tests/testthat.R' failed.
> > Last 13 lines of output:
> >
> >   Type 'demo()' for some demos, 'help()' for on-line help, or
> >   'help.start()' for an HTML browser interface to help.
> >   Type 'q()' to quit R.
> >
> >   > library(testthat)
> >   Warning message:
> >   package 'testthat' was built under R version 3.3.3
> >   > library(bwt)
> >   >
> >   > test_check("bwt")
> >   Error: No tests found for bwt
> >   Execution halted
> >
> > checking DESCRIPTION meta-information ... WARNING Non-standard license
> specification:
> >   GNU General Public License v3.0
> > Standardizable: FALSE
> >
> > checking for missing documentation entries ... WARNING Undocumented code
> objects:
> >   'bwt' 'ibwt'
> > All user-level objects in a package should have documentation entries.
> > See chapter 'Writing R documentation files' in the 'Writing R
> Extensions' manual.
> >
> > May I know how can I proceed? I am kind of lost a this pint in time,
> even after looking up CRAN's documentations.. If it helps, attached in this
> email is my .tar.gz file which I have submitted earlier.
> >
> > Thank you and I apologize for any inconvenience that I may have caused..
> >
> > Warmest Regards,
> >
> > Wei Hao Khoong (Mr)
> >
> > -----Original Message-----
> > From: Uwe.Ligges at R-Project.org <Uwe.Ligges at R-Project.org>
> > Sent: Wednesday, 30 May 2018 12:11 AM
> > To: khoongweihao at hotmail.com
> > Cc: CRAN-submissions at R-project.org
> > Subject: [CRAN-pretest-archived] CRAN submission bwt 1.1.0
> >
> > Dear maintainer,
> >
> > package bwt_1.1.0.tar.gz does not pass the incoming checks
> automatically, please see the following pre-tests:
> >
> >
> > Status: 3 WARNINGs, 3 NOTEs
> > Debian: <https://win-builder.r-project.org/incoming_pretest/
> bwt_1.1.0_20180529_101440/Debian/00check.log>
> > Status: 3 WARNINGs, 3 NOTEs
> >
> >
> >
> > Please fix all problems and resubmit a fixed version via the webform.
> > If you are not sure how to fix the problems shown, please ask for help
> on the R-package-devel mailing list:
> > <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> > If you are fairly certain the rejection is a false positive, please
> reply-all to this message and explain.
> >
> > More details are given in the directory:
> > <https://win-builder.r-project.org/incoming_pretest/
> bwt_1.1.0_20180529_101440/>
> > The files will be removed after roughly 7 days.
> >
> > No strong reverse dependencies to be checked.
> >
> > Best regards,
> > CRAN teams' auto-check service
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From Jori@@Mey@ @ending from ugent@be  Wed May 30 18:19:56 2018
From: Jori@@Mey@ @ending from ugent@be (Joris Meys)
Date: Wed, 30 May 2018 18:19:56 +0200
Subject: [R-pkg-devel] 
 FW: [CRAN-pretest-archived] CRAN submission bwt 1.1.0
In-Reply-To: <CAO1zAVaGmCPZfj5awtfNRqJMq_WcQNZ0wZgwBd5ETStpgLHq=g@mail.gmail.com>
References: <20180529081440.2DEAD1641AF@xmpalantir.wu.ac.at>
 <01d3f767$Blat.v3.2.16$a420ed35$1d1884ea1@mail.statistik.tu-dortmund.de>
 <HK2PR03MB060978784B50668C9CBE4DFED86C0@HK2PR03MB0609.apcprd03.prod.outlook.com>
 <HK2PR03MB0609FFF9577DF9AA5F2FFB05D86C0@HK2PR03MB0609.apcprd03.prod.outlook.com>
 <HK2PR03MB0609B835ABD988918718B95DD86C0@HK2PR03MB0609.apcprd03.prod.outlook.com>
 <CAJmOi+N3Um40z-ff86HWoBcPswCy2BUaton8PmYCTFHY1EHMxg@mail.gmail.com>
 <CAO1zAVaGmCPZfj5awtfNRqJMq_WcQNZ0wZgwBd5ETStpgLHq=g@mail.gmail.com>
Message-ID: <CAO1zAVbEhCsnXw0pWX5rKUxviYY7v5kBdLHeqZEp_asRc-Bj4g@mail.gmail.com>

Hi Khoong,

About your error: I now realized that's the output at your local console.
To test your package, you should run R CMD check --as-cran bwt_1.1.0.tar.gz
from the command line. So the error has nothing to do with CRAN but with
you testing your development directory structure as opposed to the file you
sent to CRAN.

Cheers
Joris

On Wed, May 30, 2018 at 5:17 PM, Joris Meys <Joris.Meys at ugent.be> wrote:

> Hi Khoong,
>
> I'm going to address the elephant in the room: your package is not ready
> for CRAN, and I'm not even sure CRAN is the right place for that code.
>
> There's two large issues with your package, next to the license problem
> Hugh pointed out already:
>
> 1. R code needs to be in subdirectory R, the Rd file needs to be in a
> subdirectory called man. In the tar.gz file, both are in the main folder.
> That's never going to work.
>
> 2. Your Rd file is seriously messed up. The name and alias contain what
> should be the title, the title isn't filled in. I suggest you take a look
> at roxygen2 to help you write the documentation, or go through Writing R
> extensions again to check the details on the man pages.
>
> \name{bwt}
> \alias{ibwt}
>
> will at least get the one warning about undocumented objects away.
>
> 3. The package in its entirity is 2 rather short functions. I'm not from
> CRAN, but I don't know if that would pass the "non-trivial contribution"
> test. You might want to think about a package that could import your code
> rather than submitting a separate package. Not saying the code is not
> valuable or the package has no place on CRAN, but you might get questions
> on that and then it's better to be prepared with a good answer as to why
> this really should be on CRAN.
>
> Your error otoh looks like something that is not your fault. As far as I
> know, having a test suite using testthat is not obligatory for a CRAN
> package. Yet, CRAN did try to run the tests and errored because it couldn't
> find any. I'll raise that at R-devel and see what's going on there.
> Nevertheless, adding a few tests would be a good idea. testthat lets you do
> that rather easily, and you can find more information in the vignettes of
> that package and Hadley's book on writing packages.
>
> Hope this helps
> Cheers
> Joris
>
>
>
> On Wed, May 30, 2018 at 4:52 PM, Hugh Parsonage <hugh.parsonage at gmail.com>
> wrote:
>
>> Hi,
>>
>> There are a few problems with the submission. Probably more than can
>> be resolved by people on the mailing list. Speaking generally, a
>> WARNING in a CRAN check is something that *must* be fixed, rather than
>> something which you can just acknowledge. The two warnings that you
>> mentioned are that you probably have (in your DESCRIPTION file)
>>
>> License: GNU General Public License v3.0
>>
>> when you should have
>>
>> License: GPL-3
>>
>> The second warning is about undocumented code objects. You can choose
>> not to export them, but if you do export them as you currently are,
>> you will need to document them.
>>
>> I notice that there are other problems too: consult the links in the
>> auto-generated email from CRAN, see the 00check file. You should fix
>> every problem until there are no ERRORS, WARNINGS, or NOTEs.
>>
>>
>> Best.
>>
>> On 31 May 2018 at 00:03, khoong Wei Hao <khoongweihao at hotmail.com> wrote:
>> > Hi Everyone,
>> >
>> > I encountered an issue during my submission of my package (see original
>> message below).
>> >
>> > I ran checks and tests with testthat::test_dir("tests/") and
>> devtoos::check(), and all seemed fine except some issues with undocumented
>> objects which I did note in the .Rd file, and the documentation appeared in
>> the console as I ran the package. The following is my R console output:
>> >
>> >> devtools::check()
>> > Updating bwt documentation
>> > Loading bwt
>> > First time using roxygen2. Upgrading automatically...
>> > Warning: The existing 'NAMESPACE' file was not generated by roxygen2,
>> and will not be overwritten.
>> > Setting env vars ------------------------------
>> ----------------------------------------------------------------------
>> > CFLAGS  : -Wall -pedantic
>> > CXXFLAGS: -Wall -pedantic
>> > Building bwt ------------------------------
>> ------------------------------------------------------------
>> --------------
>> > "C:/PROGRA~1/R/R-33~1.2/bin/x64/R" --no-site-file --no-environ
>> --no-save --no-restore --quiet CMD build  \
>> >   "C:\Users\khoongwh\Documents\bwt" --no-resave-data --no-manual
>> >
>> > * checking for file 'C:\Users\khoongwh\Documents\bwt/DESCRIPTION' ...
>> OK
>> > * preparing 'bwt':
>> > * checking DESCRIPTION meta-information ... OK
>> > * checking for LF line-endings in source and make files
>> > * checking for empty or unneeded directories Removed empty directory
>> 'bwt/man'
>> > Removed empty directory 'bwt/tests/testthat'
>> > * building 'bwt_1.1.0.tar.gz'
>> >
>> > Setting env vars ------------------------------
>> ----------------------------------------------------------------------
>> > _R_CHECK_CRAN_INCOMING_ : FALSE
>> > _R_CHECK_FORCE_SUGGESTS_: FALSE
>> > Checking bwt ------------------------------
>> ------------------------------------------------------------
>> --------------
>> > "C:/PROGRA~1/R/R-33~1.2/bin/x64/R" --no-site-file --no-environ
>> --no-save --no-restore --quiet CMD check  \
>> >   "C:\Users\khoongwh\AppData\Local\Temp\RtmpKmUMRO/bwt_1.1.0.tar.gz"
>> --as-cran --timings --no-manual
>> >
>> > * using log directory 'C:/Users/khoongwh/AppData/Loc
>> al/Temp/RtmpKmUMRO/bwt.Rcheck'
>> > * using R version 3.3.2 (2016-10-31)
>> > * using platform: x86_64-w64-mingw32 (64-bit)
>> > * using session charset: ISO8859-1
>> > * using options '--no-manual --as-cran'
>> > * checking for file 'bwt/DESCRIPTION' ... OK
>> > * checking extension type ... Package
>> > * this is package 'bwt' version '1.1.0'
>> > * package encoding: UTF-8
>> > * checking package namespace information ... OK
>> > * checking package dependencies ... OK
>> > * checking if this is a source package ... OK
>> > * checking if there is a namespace ... OK
>> > * checking for .dll and .exe files ... OK
>> > * checking for hidden files and directories ... OK
>> > * checking for portable file names ... OK
>> > * checking whether package 'bwt' can be installed ... OK
>> > * checking package directory ... OK
>> > * checking DESCRIPTION meta-information ... WARNING Non-standard
>> license specification:
>> >   GNU General Public License v3.0
>> > Standardizable: FALSE
>> > * checking top-level files ... OK
>> > * checking for left-over files ... OK
>> > * checking index information ... OK
>> > * checking package subdirectories ... OK
>> > * checking R files for non-ASCII characters ... OK
>> > * checking R files for syntax errors ... OK
>> > * checking whether the package can be loaded ... OK
>> > * checking whether the package can be loaded with stated dependencies
>> ... OK
>> > * checking whether the package can be unloaded cleanly ... OK
>> > * checking whether the namespace can be loaded with stated dependencies
>> ... OK
>> > * checking whether the namespace can be unloaded cleanly ... OK
>> > * checking loading without being on the library search path ... OK
>> > * checking dependencies in R code ... OK
>> > * checking S3 generic/method consistency ... OK
>> > * checking replacement functions ... OK
>> > * checking foreign function calls ... OK
>> > * checking R code for possible problems ... OK
>> > * checking for missing documentation entries ... WARNING Undocumented
>> code objects:
>> >   'bwt' 'ibwt'
>> > All user-level objects in a package should have documentation entries.
>> > See chapter 'Writing R documentation files' in the 'Writing R
>> Extensions' manual.
>> > * checking examples ... NONE
>> > * checking for unstated dependencies in 'tests' ... OK
>> > * checking tests ...
>> >   Running 'testthat.R'
>> > Warning message:
>> > running command '"C:/PROGRA~1/R/R-33~1.2/bin/x64/R" CMD BATCH
>> --vanilla  "testthat.R" "testthat.Rout"' had status 1  ERROR Running the
>> tests in 'tests/testthat.R' failed.
>> > Last 13 lines of output:
>> >
>> >   Type 'demo()' for some demos, 'help()' for on-line help, or
>> >   'help.start()' for an HTML browser interface to help.
>> >   Type 'q()' to quit R.
>> >
>> >   > library(testthat)
>> >   Warning message:
>> >   package 'testthat' was built under R version 3.3.3
>> >   > library(bwt)
>> >   >
>> >   > test_check("bwt")
>> >   Error: No tests found for bwt
>> >   Execution halted
>> > * DONE
>> >
>> > Status: 1 ERROR, 2 WARNINGs
>> > See
>> >   'C:/Users/khoongwh/AppData/Local/Temp/RtmpKmUMRO/bwt.Rcheck
>> /00check.log'
>> > for details.
>> >
>> > R CMD check results
>> > 1 error  | 2 warnings | 0 notes
>> > checking tests ... ERROR
>> > Running the tests in 'tests/testthat.R' failed.
>> > Last 13 lines of output:
>> >
>> >   Type 'demo()' for some demos, 'help()' for on-line help, or
>> >   'help.start()' for an HTML browser interface to help.
>> >   Type 'q()' to quit R.
>> >
>> >   > library(testthat)
>> >   Warning message:
>> >   package 'testthat' was built under R version 3.3.3
>> >   > library(bwt)
>> >   >
>> >   > test_check("bwt")
>> >   Error: No tests found for bwt
>> >   Execution halted
>> >
>> > checking DESCRIPTION meta-information ... WARNING Non-standard license
>> specification:
>> >   GNU General Public License v3.0
>> > Standardizable: FALSE
>> >
>> > checking for missing documentation entries ... WARNING Undocumented
>> code objects:
>> >   'bwt' 'ibwt'
>> > All user-level objects in a package should have documentation entries.
>> > See chapter 'Writing R documentation files' in the 'Writing R
>> Extensions' manual.
>> >
>> > May I know how can I proceed? I am kind of lost a this pint in time,
>> even after looking up CRAN's documentations.. If it helps, attached in this
>> email is my .tar.gz file which I have submitted earlier.
>> >
>> > Thank you and I apologize for any inconvenience that I may have caused..
>> >
>> > Warmest Regards,
>> >
>> > Wei Hao Khoong (Mr)
>> >
>> > -----Original Message-----
>> > From: Uwe.Ligges at R-Project.org <Uwe.Ligges at R-Project.org>
>> > Sent: Wednesday, 30 May 2018 12:11 AM
>> > To: khoongweihao at hotmail.com
>> > Cc: CRAN-submissions at R-project.org
>> > Subject: [CRAN-pretest-archived] CRAN submission bwt 1.1.0
>> >
>> > Dear maintainer,
>> >
>> > package bwt_1.1.0.tar.gz does not pass the incoming checks
>> automatically, please see the following pre-tests:
>> >
>> >
>> > Status: 3 WARNINGs, 3 NOTEs
>> > Debian: <https://win-builder.r-project.org/incoming_pretest/bwt_1.1.
>> 0_20180529_101440/Debian/00check.log>
>> > Status: 3 WARNINGs, 3 NOTEs
>> >
>> >
>> >
>> > Please fix all problems and resubmit a fixed version via the webform.
>> > If you are not sure how to fix the problems shown, please ask for help
>> on the R-package-devel mailing list:
>> > <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>> > If you are fairly certain the rejection is a false positive, please
>> reply-all to this message and explain.
>> >
>> > More details are given in the directory:
>> > <https://win-builder.r-project.org/incoming_pretest/bwt_1.1.
>> 0_20180529_101440/>
>> > The files will be removed after roughly 7 days.
>> >
>> > No strong reverse dependencies to be checked.
>> >
>> > Best regards,
>> > CRAN teams' auto-check service
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>
>
> --
> Joris Meys
> Statistical consultant
>
> Department of Data Analysis and Mathematical Modelling
> Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
>
> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
>
> tel: +32 (0)9 264 61 79
> -----------
> Biowiskundedagen 2017-2018
> http://www.biowiskundedagen.ugent.be/
>
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>



-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From erinm@hodge@@ @ending from gm@il@com  Thu May 31 14:35:56 2018
From: erinm@hodge@@ @ending from gm@il@com (Erin Hodgess)
Date: Thu, 31 May 2018 07:35:56 -0500
Subject: [R-pkg-devel] trouble with R check
Message-ID: <CACxE24m3JcuPFJwyyS6ED7S+=6fekOx8e9a4MvUj=zVkJ80ZDA@mail.gmail.com>

Hello!


I'm working with R-3.4.3 and when I run R CMD check
rmpiFort_0.0.0.9000.tar.gz, here is the output file.


* installing *source* package ?rmpiFort? ...

** libs

** arch -

make: Nothing to be done for `all'.

installing to /home/hodgess/R-3.4.3/bin/rmpiFort.Rcheck/rmpiFort/libs

** R

** preparing package for lazy loading

Error : package or namespace load failed for ?rmpiFort? in
loadNamespace(packag\

e, lib.loc):

 cyclic namespace dependency detected when loading ?rmpiFort?, already
loading \

?rmpiFort?

Error : unable to load R code in package ?rmpiFort?

ERROR: lazy loading failed for package ?rmpiFort?

* removing ?/home/hodgess/R-3.4.3/bin/rmpiFort.Rcheck/rmpiFort?


This is done on the Bridges Supercomputer at the Pittsburgh Supercomputing
Center.

Thanks,
Erin
PS.  OS is Centos 6.


-- 
Erin Hodgess
Associate Professor
Department of Mathematical and Statistics
University of Houston - Downtown
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Thu May 31 14:50:42 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Thu, 31 May 2018 08:50:42 -0400
Subject: [R-pkg-devel] trouble with R check
In-Reply-To: <CACxE24m3JcuPFJwyyS6ED7S+=6fekOx8e9a4MvUj=zVkJ80ZDA@mail.gmail.com>
References: <CACxE24m3JcuPFJwyyS6ED7S+=6fekOx8e9a4MvUj=zVkJ80ZDA@mail.gmail.com>
Message-ID: <e034daa5-43ca-4cef-9f18-d32974b64fdd@gmail.com>

On 31/05/2018 8:35 AM, Erin Hodgess wrote:
> Hello!
> 
> 
> I'm working with R-3.4.3 and when I run R CMD check
> rmpiFort_0.0.0.9000.tar.gz, here is the output file.
> 
> 
> * installing *source* package ?rmpiFort? ...
> 
> ** libs
> 
> ** arch -
> 
> make: Nothing to be done for `all'.
> 
> installing to /home/hodgess/R-3.4.3/bin/rmpiFort.Rcheck/rmpiFort/libs
> 
> ** R
> 
> ** preparing package for lazy loading
> 
> Error : package or namespace load failed for ?rmpiFort? in
> loadNamespace(packag\
> 
> e, lib.loc):
> 
>   cyclic namespace dependency detected when loading ?rmpiFort?, already
> loading \
> 
> ?rmpiFort?
> 
> Error : unable to load R code in package ?rmpiFort?
> 
> ERROR: lazy loading failed for package ?rmpiFort?
> 
> * removing ?/home/hodgess/R-3.4.3/bin/rmpiFort.Rcheck/rmpiFort?

Sounds as though something in the package says it depends on itself. 
Possibilities off the top of my head:

You have Depends: rmpiFort or Imports: rmpiFort (or even Suggests: 
rmpiFort, or LinkingTo: rmpiFort) in your DESCRIPTION file.

You have importFrom(rmpiFort, ...) or import(rmpiFort) in your NAMESPACE 
file.

You have requireNamespace("rmpiFort") (or require("rmpiFort"), or 
library("rmpiFort")) in your R source.

Duncan Murdoch


From erinm@hodge@@ @ending from gm@il@com  Thu May 31 14:59:39 2018
From: erinm@hodge@@ @ending from gm@il@com (Erin Hodgess)
Date: Thu, 31 May 2018 07:59:39 -0500
Subject: [R-pkg-devel] trouble with R check
In-Reply-To: <e034daa5-43ca-4cef-9f18-d32974b64fdd@gmail.com>
References: <CACxE24m3JcuPFJwyyS6ED7S+=6fekOx8e9a4MvUj=zVkJ80ZDA@mail.gmail.com>
 <e034daa5-43ca-4cef-9f18-d32974b64fdd@gmail.com>
Message-ID: <CACxE24ndDCsVQLUoOPMcj8g58pbQUYDiT9_Bw8mtkmXLQGf9WQ@mail.gmail.com>

Hi Duncan

That was exactly it.  Thank you very much

Erin

On Thu, May 31, 2018 at 7:50 AM, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 31/05/2018 8:35 AM, Erin Hodgess wrote:
>
>> Hello!
>>
>>
>> I'm working with R-3.4.3 and when I run R CMD check
>> rmpiFort_0.0.0.9000.tar.gz, here is the output file.
>>
>>
>> * installing *source* package ?rmpiFort? ...
>>
>> ** libs
>>
>> ** arch -
>>
>> make: Nothing to be done for `all'.
>>
>> installing to /home/hodgess/R-3.4.3/bin/rmpiFort.Rcheck/rmpiFort/libs
>>
>> ** R
>>
>> ** preparing package for lazy loading
>>
>> Error : package or namespace load failed for ?rmpiFort? in
>> loadNamespace(packag\
>>
>> e, lib.loc):
>>
>>   cyclic namespace dependency detected when loading ?rmpiFort?, already
>> loading \
>>
>> ?rmpiFort?
>>
>> Error : unable to load R code in package ?rmpiFort?
>>
>> ERROR: lazy loading failed for package ?rmpiFort?
>>
>> * removing ?/home/hodgess/R-3.4.3/bin/rmpiFort.Rcheck/rmpiFort?
>>
>
> Sounds as though something in the package says it depends on itself.
> Possibilities off the top of my head:
>
> You have Depends: rmpiFort or Imports: rmpiFort (or even Suggests:
> rmpiFort, or LinkingTo: rmpiFort) in your DESCRIPTION file.
>
> You have importFrom(rmpiFort, ...) or import(rmpiFort) in your NAMESPACE
> file.
>
> You have requireNamespace("rmpiFort") (or require("rmpiFort"), or
> library("rmpiFort")) in your R source.
>
> Duncan Murdoch
>



-- 
Erin Hodgess
Associate Professor
Department of Mathematical and Statistics
University of Houston - Downtown
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From boxu@ncui @ending from gm@il@com  Thu May 31 18:29:38 2018
From: boxu@ncui @ending from gm@il@com (Boxuan Cui)
Date: Thu, 31 May 2018 12:29:38 -0400
Subject: [R-pkg-devel] Release Frequency
Message-ID: <CAC-fbYbzTy_iK=v2ZTsCa7sRNCXdV3AWQFjjDF_KDGgx6EzC8g@mail.gmail.com>

Hi,

During my recent CRAN submissions, I noticed a more streamlined/automatic
process. I am wondering if the submission still requires a manual approval,
or does it go to CRAN automatically after all checks?

I am asking because I accidentally shipped a showstopper bug for a new
feature for DataExplorer v0.6
<https://CRAN.R-project.org/package=DataExplorer> yesterday. The fix is one
line of code change.

However, I am certainly aware of the CRAN Repository Policy
<https://cran.r-project.org/web/packages/policies.html#Submission> and
definitely respect that:

*Submitting updates should be done responsibly and with respect for the
volunteers? time. Once a package is established (which may take several
rounds), ?no more than every 1?2 months? seems appropriate.*


If this is the case, I will wait for another month or two to push a fix to
CRAN, and push the fixed version to GitHub for now.

Thank you!


Best,
Boxuan (Bo)

	[[alternative HTML version deleted]]


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Thu May 31 22:29:23 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Thu, 31 May 2018 22:29:23 +0200
Subject: [R-pkg-devel] Release Frequency
In-Reply-To: <CAC-fbYbzTy_iK=v2ZTsCa7sRNCXdV3AWQFjjDF_KDGgx6EzC8g@mail.gmail.com>
References: <CAC-fbYbzTy_iK=v2ZTsCa7sRNCXdV3AWQFjjDF_KDGgx6EzC8g@mail.gmail.com>
Message-ID: <527bf9af-eba2-11c2-3e96-f134d678f3b1@statistik.tu-dortmund.de>

A lot is automated, but another lot has to be checked manually. It 
depends on the package and its notes.

Then policies you are quoting have two reasons:

1. we take a look what is going on if a submission comes in too quickly 
as this is typically suspicious. Hence a quick submission creates manual 
work in any case,

2. each version of a package is archived, so when people submit 
frequently, CRAN is growing quickly.

As CRAN is a repository for releases software, we expect that releases 
are well tested and hence do not happen too frequently.

In case you nevertheless found a serious bug, please submit a fixed 
version and explain why this was needed in the submission comments.

Best,
Uwe Ligges








On 31.05.2018 18:29, Boxuan Cui wrote:
> Hi,
> 
> During my recent CRAN submissions, I noticed a more streamlined/automatic
> process. I am wondering if the submission still requires a manual approval,
> or does it go to CRAN automatically after all checks?
> 
> I am asking because I accidentally shipped a showstopper bug for a new
> feature for DataExplorer v0.6
> <https://CRAN.R-project.org/package=DataExplorer> yesterday. The fix is one
> line of code change.
> 
> However, I am certainly aware of the CRAN Repository Policy
> <https://cran.r-project.org/web/packages/policies.html#Submission> and
> definitely respect that:
> 
> *Submitting updates should be done responsibly and with respect for the
> volunteers? time. Once a package is established (which may take several
> rounds), ?no more than every 1?2 months? seems appropriate.*
> 
> 
> If this is the case, I will wait for another month or two to push a fix to
> CRAN, and push the fixed version to GitHub for now.
> 
> Thank you!
> 
> 
> Best,
> Boxuan (Bo)
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @teve@the@b@ye@i@n @ending from gm@il@com  Thu May 31 22:49:31 2018
From: @teve@the@b@ye@i@n @ending from gm@il@com (Steven Scott)
Date: Thu, 31 May 2018 13:49:31 -0700
Subject: [R-pkg-devel] trying to understand an error
Message-ID: <CAJqTW46n_6L6JKcqk8+tTsj8HpJgZ-6_JuNNwb67BMEOtTLmug@mail.gmail.com>

Looking at the Boom package results page, I see that it has errors on OSX
and two flavors of Linux.

The OSX install page is here:
https://www.r-project.org/nosvn/R.check/r-release-osx-x86_64/Boom-00install.html
.

I'm trying to understand the nature of the error.  The last lines say:

clang++ -std=gnu++11
-I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I.
-I../inst/include -IBmath -Imath/cephes
-I"/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.5/BH/include"
-I"/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.5/RcppEigen/include"
-I/usr/local/include   -fPIC  -Wall -g -O2 -c
Models/TimeSeries/ArModel.cpp -o Models/TimeSeries/ArModel.o
clang++ -std=gnu++11
-I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I.
-I../inst/include -IBmath -Imath/cephes
-I"/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.5/BH/include"
-I"/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.5/RcppEigen/include"
-I/usr/local/include   -fPIC  -Wall -g -O2 -c
Models/TimeSeries/ArmaModel.cpp -o Models/TimeSeries/ArmaModel.o
make: *** [Models/TimeSeries/ArmaModel.o] Interrupt: 2
ERROR: compilation failed for package ?Boom?
* removing ?/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/results/3.5/Boom.Rcheck/Boom?


As I read this, it looks like there was no compiler error, but the build
was interrupted for some reason.  Do others read it differently?  If I'm
reading it right, what needs to happen to re-run the check to clear the OSX
error status?

Thanks,

Steve

	[[alternative HTML version deleted]]


From boxu@ncui @ending from gm@il@com  Thu May 31 22:52:41 2018
From: boxu@ncui @ending from gm@il@com (Boxuan Cui)
Date: Thu, 31 May 2018 16:52:41 -0400
Subject: [R-pkg-devel] Release Frequency
In-Reply-To: <527bf9af-eba2-11c2-3e96-f134d678f3b1@statistik.tu-dortmund.de>
References: <CAC-fbYbzTy_iK=v2ZTsCa7sRNCXdV3AWQFjjDF_KDGgx6EzC8g@mail.gmail.com>
 <527bf9af-eba2-11c2-3e96-f134d678f3b1@statistik.tu-dortmund.de>
Message-ID: <CAC-fbYaJgQFP6M2x99UScxA38KFkrJAmRA8P1iQKLijCWKU5vA@mail.gmail.com>

Thanks for the detailed explanation!


Best,
Boxuan (Bo)

On Thu, May 31, 2018 at 4:29 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de
> wrote:

> A lot is automated, but another lot has to be checked manually. It depends
> on the package and its notes.
>
> Then policies you are quoting have two reasons:
>
> 1. we take a look what is going on if a submission comes in too quickly as
> this is typically suspicious. Hence a quick submission creates manual work
> in any case,
>
> 2. each version of a package is archived, so when people submit
> frequently, CRAN is growing quickly.
>
> As CRAN is a repository for releases software, we expect that releases are
> well tested and hence do not happen too frequently.
>
> In case you nevertheless found a serious bug, please submit a fixed
> version and explain why this was needed in the submission comments.
>
> Best,
> Uwe Ligges
>
>
>
>
>
>
>
>
> On 31.05.2018 18:29, Boxuan Cui wrote:
>
>> Hi,
>>
>> During my recent CRAN submissions, I noticed a more streamlined/automatic
>> process. I am wondering if the submission still requires a manual
>> approval,
>> or does it go to CRAN automatically after all checks?
>>
>> I am asking because I accidentally shipped a showstopper bug for a new
>> feature for DataExplorer v0.6
>> <https://CRAN.R-project.org/package=DataExplorer> yesterday. The fix is
>> one
>> line of code change.
>>
>> However, I am certainly aware of the CRAN Repository Policy
>> <https://cran.r-project.org/web/packages/policies.html#Submission> and
>> definitely respect that:
>>
>> *Submitting updates should be done responsibly and with respect for the
>> volunteers? time. Once a package is established (which may take several
>> rounds), ?no more than every 1?2 months? seems appropriate.*
>>
>>
>> If this is the case, I will wait for another month or two to push a fix to
>> CRAN, and push the fixed version to GitHub for now.
>>
>> Thank you!
>>
>>
>> Best,
>> Boxuan (Bo)
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>

	[[alternative HTML version deleted]]


From Jen@@Oehl@chl@egel @ending from trueclu@ter@com  Sun Jun  3 20:29:23 2018
From: Jen@@Oehl@chl@egel @ending from trueclu@ter@com (=?UTF-8?Q?Jens_Oehlschl=c3=a4gel?=)
Date: Sun, 3 Jun 2018 20:29:23 +0200
Subject: [R-pkg-devel] cannot change value of locked binding for '*tmp*'
Message-ID: <c77c01f2-6929-b993-9834-6a41abb8511a@truecluster.com>

Hello R language experts,

I get an error I don't understand in an assigment function
of the form

deref(z[i]) <- v

Error in deref(z[1:5]) <- -deref(z[1:5]) :
   cannot change value of locked binding for '*tmp*'

*after* the assignment did what it should. I can workaround
using a standard function achieving the desired side-effects

refset(z[i], value=v)

Any explanation or idea how to make the standard notation working?

Context and replication code follows below.

Best

Jens


# I am trying to modernize package 'ref'
# which stems from the time of S+ and early R.
# Old package 'ref' (version 0.99) allows passing arguments by reference
# but has lost the ability to change parts of a vector
# without copying the complete vector since R version 1.8.

# I think we can restore performance if
# a new reference is not longer "an object name plus an environment"
# but is "an expression such as 'z' or 'z[i]' plus an environment"
# such that the ref-functions just become convenience wrappers to
# 'eval', 'substitute' and friends
ref <- function(expr, envir = parent.frame()){
   ret <- list(expr=substitute(expr), envir=envir)
   class(ret) <- "ref"
   ret
}

# get data at referenced expression
deref <- refget <- function(x, ...){
   # ensure that $ does the usual job once we define $.ref
   oldClass(x) <- NULL
   eval(x$expr, envir=x$envir)
}

# modify data at referenced expression
"deref<-" <- refset <- function(x, value){
   oldClass(x) <- NULL
   newexpr <- substitute(a <- b, list(a=x$expr, b=value))
   eval(newexpr, envir=x$envir)
   newexpr
}

# subscript referenced expression (without evaluating it)
"[.ref" <- function(x, ...){
   cl <- oldClass(x)
   oldClass(x) <- NULL
   newexpr <- sys.call()
   newexpr[[1]] <- call("[")[[1]]
   newexpr[[2]] <- x$expr
   x$expr <- newexpr
   oldClass(x) <- cl
   x
}

# some example data
n <- 1e1
x <- 1:n
# create a reference to it
z <- ref(x)

# using refget(z[i]) and refset(z[i], v)
# efficiently assignes to a referenced subset as desired
v <- refget(z[1:5])
refset(z[1:5], -v)
# so my code works
x[1:10]

# but doing it R-style
# with deref(z[i]) and deref(z[i]) <- v
# gives this error:
# Error in deref(z[1:5]) <- -deref(z[1:5]) :
#   cannot change value of locked binding for '*tmp*'
v <- deref(z[1:5])
deref(z[1:5]) <- -v
# anyhow the referenced vector has been changed !?
x[1:10]


From d@vidhughjone@ @ending from gm@il@com  Mon Jun  4 13:34:20 2018
From: d@vidhughjone@ @ending from gm@il@com (David Hugh-Jones)
Date: Mon, 4 Jun 2018 12:34:20 +0100
Subject: [R-pkg-devel] r-patched error
Message-ID: <CAARY7kgoLch3eN90wy1e6Z8oe+J2vafbPZTV6HMPpbeGVej_zg@mail.gmail.com>

Hi all,

Latest release of my package has an error when checked on r-patched-linux
and r-devel-linux. Relevant output is shown below (from
https://cran.r-project.org/web/checks/check_results_huxtable.html). It
suggests that there's no method for `align<-` and `bold` for huxtable
objects. In fact the package defines and exports such methods. Selected
lines from the NAMESPACE file:

S3method("align<-",huxtable)
S3method(bold,huxtable)
export("align<-")
export("align<-.huxtable")
export(bold)
export(bold.huxtable)

Checks are passing fine on other platforms. Is this just a weirdness to do
with the changes in R 3.5.0 on Linux? Or does it indicate a real problem?

Cheers,
David

    > ### ** Examples
    >
    >
    > ht <- huxtable(a = 1:3, b = 1:3)
    > align(ht) <- 'right'
    Error in UseMethod("align<-") :
     no applicable method for 'align<-' applied to an object of class
"c('huxtable', 'data.frame')"
    Calls: align<-
    Execution halted
Flavor: r-patched-linux-x86_64
<https://www.r-project.org/nosvn/R.check/r-patched-linux-x86_64/huxtable-00check.html>

Version: 4.0.0
Check: re-building of vignette outputs
Result: WARN
    Error in re-building vignettes:
     ...
    Quitting from lines 52-104 (design-principles.Rmd)
    Error: processing vignette ?design-principles.Rmd? failed with
diagnostics:
    no applicable method for ?bold? applied to an object of class
"c('huxtable', 'data.frame')"
    Execution halted
Flavor: r-patched-linux-x86_64
<https://www.r-project.org/nosvn/R.check/r-patched-linux-x86_64/huxtable-00check.html>
David

	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Mon Jun  4 14:26:09 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Mon, 4 Jun 2018 08:26:09 -0400
Subject: [R-pkg-devel] r-patched error
In-Reply-To: <CAARY7kgoLch3eN90wy1e6Z8oe+J2vafbPZTV6HMPpbeGVej_zg@mail.gmail.com>
References: <CAARY7kgoLch3eN90wy1e6Z8oe+J2vafbPZTV6HMPpbeGVej_zg@mail.gmail.com>
Message-ID: <e16ae2ce-3876-142d-f8a8-a73fe291f206@gmail.com>

On 04/06/2018 7:34 AM, David Hugh-Jones wrote:
> Hi all,
> 
> Latest release of my package has an error when checked on r-patched-linux
> and r-devel-linux. Relevant output is shown below (from
> https://cran.r-project.org/web/checks/check_results_huxtable.html). It
> suggests that there's no method for `align<-` and `bold` for huxtable
> objects. In fact the package defines and exports such methods. Selected
> lines from the NAMESPACE file:
> 
> S3method("align<-",huxtable)
> S3method(bold,huxtable)
> export("align<-")
> export("align<-.huxtable")
> export(bold)
> export(bold.huxtable)
> 

I'd worry a little bit about your "make_getter_setters" function:  it 
saves the result using

   lapply(names(funs), function (x) {
     assign(x, funs[[x]], envir = parent.frame(3)) # 3: 1 for 
function(x), 2 for lapply, 3 for the caller!
   })

That count of 3 looks like an implementation detail that could 
conceivably vary, for instance if the compiler decided to optimize out a 
call or two, or lapply's implementation changed.  (I suspect this isn't 
the cause of the error you saw, or you would have seen it a lot more: 
but I'd still fix it.)

I think a safer way to find the huxtable namespace is something like

huxtableNamespace <- .getNamespace("huxtable")

though this is advised against; a documented but less obvious way to do 
it would be

huxtableNamespace <- environment(huxtable)

The "huxtable" on the right is the function; most other functions in 
your package would also be fine, as long as you haven't done anything 
tricky to change their environments.

With one of those definitions, you could change your lapply() to

   lapply(names(funs), function (x) {
     assign(x, funs[[x]], envir = huxtableNamespace)
   })

 > Checks are passing fine on other platforms. Is this just a weirdness 
to do
 > with the changes in R 3.5.0 on Linux? Or does it indicate a real problem?

A possibility is memory corruption at the C level.  Since you don't have 
any C code in huxtable that couldn't be caused by what you did, but you 
might still be a victim of it.

Duncan Murdoch


> 
> Cheers,
> David
> 
>      > ### ** Examples
>      >
>      >
>      > ht <- huxtable(a = 1:3, b = 1:3)
>      > align(ht) <- 'right'
>      Error in UseMethod("align<-") :
>       no applicable method for 'align<-' applied to an object of class
> "c('huxtable', 'data.frame')"
>      Calls: align<-
>      Execution halted
> Flavor: r-patched-linux-x86_64
> <https://www.r-project.org/nosvn/R.check/r-patched-linux-x86_64/huxtable-00check.html>
> 
> Version: 4.0.0
> Check: re-building of vignette outputs
> Result: WARN
>      Error in re-building vignettes:
>       ...
>      Quitting from lines 52-104 (design-principles.Rmd)
>      Error: processing vignette ?design-principles.Rmd? failed with
> diagnostics:
>      no applicable method for ?bold? applied to an object of class
> "c('huxtable', 'data.frame')"
>      Execution halted
> Flavor: r-patched-linux-x86_64
> <https://www.r-project.org/nosvn/R.check/r-patched-linux-x86_64/huxtable-00check.html>
> David
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From d@vidhughjone@ @ending from gm@il@com  Mon Jun  4 14:56:58 2018
From: d@vidhughjone@ @ending from gm@il@com (David Hugh-Jones)
Date: Mon, 4 Jun 2018 13:56:58 +0100
Subject: [R-pkg-devel] r-patched error
In-Reply-To: <e16ae2ce-3876-142d-f8a8-a73fe291f206@gmail.com>
References: <CAARY7kgoLch3eN90wy1e6Z8oe+J2vafbPZTV6HMPpbeGVej_zg@mail.gmail.com>
 <e16ae2ce-3876-142d-f8a8-a73fe291f206@gmail.com>
Message-ID: <CAARY7khcqTzR2wd_Ah0aRLi-OfVPde6be31i+Q4YZViOvqswQQ@mail.gmail.com>

Thank you very much for this thoughtful advice! I am guessing that
getNamespace("huxtable") would be another more self-documenting way to do
this. I will make the change.

David


On Mon, 4 Jun 2018 at 13:26, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

>
> I'd worry a little bit about your "make_getter_setters" function:  it
> saves the result using
>
>    lapply(names(funs), function (x) {
>      assign(x, funs[[x]], envir = parent.frame(3)) # 3: 1 for
> function(x), 2 for lapply, 3 for the caller!
>    })
>
> That count of 3 looks like an implementation detail that could
> conceivably vary, for instance if the compiler decided to optimize out a
> call or two, or lapply's implementation changed.  (I suspect this isn't
> the cause of the error you saw, or you would have seen it a lot more:
> but I'd still fix it.)
>
> I think a safer way to find the huxtable namespace is something like
>
> huxtableNamespace <- .getNamespace("huxtable")
>
> though this is advised against; a documented but less obvious way to do
> it would be
>
> huxtableNamespace <- environment(huxtable)
>
> The "huxtable" on the right is the function; most other functions in
> your package would also be fine, as long as you haven't done anything
> tricky to change their environments.
>
> With one of those definitions, you could change your lapply() to
>
>    lapply(names(funs), function (x) {
>      assign(x, funs[[x]], envir = huxtableNamespace)
>    })
>
>  > Checks are passing fine on other platforms. Is this just a weirdness
> to do
>  > with the changes in R 3.5.0 on Linux? Or does it indicate a real
> problem?
>
> A possibility is memory corruption at the C level.  Since you don't have
> any C code in huxtable that couldn't be caused by what you did, but you
> might still be a victim of it.
>
> Duncan Murdoch
>
>
> >
> > Cheers,
> > David
> >
> >      > ### ** Examples
> >      >
> >      >
> >      > ht <- huxtable(a = 1:3, b = 1:3)
> >      > align(ht) <- 'right'
> >      Error in UseMethod("align<-") :
> >       no applicable method for 'align<-' applied to an object of class
> > "c('huxtable', 'data.frame')"
> >      Calls: align<-
> >      Execution halted
> > Flavor: r-patched-linux-x86_64
> > <
> https://www.r-project.org/nosvn/R.check/r-patched-linux-x86_64/huxtable-00check.html
> >
> >
> > Version: 4.0.0
> > Check: re-building of vignette outputs
> > Result: WARN
> >      Error in re-building vignettes:
> >       ...
> >      Quitting from lines 52-104 (design-principles.Rmd)
> >      Error: processing vignette ?design-principles.Rmd? failed with
> > diagnostics:
> >      no applicable method for ?bold? applied to an object of class
> > "c('huxtable', 'data.frame')"
> >      Execution halted
> > Flavor: r-patched-linux-x86_64
> > <
> https://www.r-project.org/nosvn/R.check/r-patched-linux-x86_64/huxtable-00check.html
> >
> > David
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Mon Jun  4 16:59:33 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Mon, 4 Jun 2018 10:59:33 -0400
Subject: [R-pkg-devel] r-patched error
In-Reply-To: <CAARY7khcqTzR2wd_Ah0aRLi-OfVPde6be31i+Q4YZViOvqswQQ@mail.gmail.com>
References: <CAARY7kgoLch3eN90wy1e6Z8oe+J2vafbPZTV6HMPpbeGVej_zg@mail.gmail.com>
 <e16ae2ce-3876-142d-f8a8-a73fe291f206@gmail.com>
 <CAARY7khcqTzR2wd_Ah0aRLi-OfVPde6be31i+Q4YZViOvqswQQ@mail.gmail.com>
Message-ID: <d752ecb1-d961-521d-dfdb-3374c8ab2b34@gmail.com>

On 04/06/2018 8:56 AM, David Hugh-Jones wrote:
> 
> Thank you very much for this thoughtful advice! I am guessing that 
> getNamespace("huxtable") would be another more self-documenting way to 
> do this. I will make the change.

Yes!  I didn't see that one.

Duncan Murdoch


From @teve@the@b@ye@i@n @ending from gm@il@com  Tue Jun  5 18:45:59 2018
From: @teve@the@b@ye@i@n @ending from gm@il@com (Steven Scott)
Date: Tue, 5 Jun 2018 09:45:59 -0700
Subject: [R-pkg-devel] trying to understand an error
In-Reply-To: <CAJqTW46n_6L6JKcqk8+tTsj8HpJgZ-6_JuNNwb67BMEOtTLmug@mail.gmail.com>
References: <CAJqTW46n_6L6JKcqk8+tTsj8HpJgZ-6_JuNNwb67BMEOtTLmug@mail.gmail.com>
Message-ID: <CAJqTW45EeL1_xb=wr4e-Ybj8JaBYGfrpF-JLfwBrsBasukqn4w@mail.gmail.com>

If there's anyone willing to take a look at the build errors I would
appreciate it.  I'm trying to work a bug report from a downstream user, and
I think the OSX build has an issue that I don't understand.
Thanks.

On Thu, May 31, 2018 at 1:49 PM, Steven Scott <steve.the.bayesian at gmail.com>
wrote:

> Looking at the Boom package results page, I see that it has errors on OSX
> and two flavors of Linux.
>
> The OSX install page is here:  https://www.r-project.
> org/nosvn/R.check/r-release-osx-x86_64/Boom-00install.html .
>
> I'm trying to understand the nature of the error.  The last lines say:
>
> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I. -I../inst/include -IBmath -Imath/cephes  -I"/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.5/BH/include" -I"/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.5/RcppEigen/include" -I/usr/local/include   -fPIC  -Wall -g -O2 -c Models/TimeSeries/ArModel.cpp -o Models/TimeSeries/ArModel.o
> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I. -I../inst/include -IBmath -Imath/cephes  -I"/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.5/BH/include" -I"/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.5/RcppEigen/include" -I/usr/local/include   -fPIC  -Wall -g -O2 -c Models/TimeSeries/ArmaModel.cpp -o Models/TimeSeries/ArmaModel.o
> make: *** [Models/TimeSeries/ArmaModel.o] Interrupt: 2
> ERROR: compilation failed for package ?Boom?
> * removing ?/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/results/3.5/Boom.Rcheck/Boom?
>
>
> As I read this, it looks like there was no compiler error, but the build
> was interrupted for some reason.  Do others read it differently?  If I'm
> reading it right, what needs to happen to re-run the check to clear the OSX
> error status?
>
> Thanks,
>
> Steve
>

	[[alternative HTML version deleted]]


From bbolker @ending from gm@il@com  Tue Jun  5 20:46:30 2018
From: bbolker @ending from gm@il@com (Ben Bolker)
Date: Tue, 5 Jun 2018 14:46:30 -0400
Subject: [R-pkg-devel] Courtesy methods and explosive dependencies
In-Reply-To: <CAL9B2vcuecAjkAvnZS0bE39ADbDP5_pbDXKrd2B-xdqbOX50Vg@mail.gmail.com>
References: <DM6PR04MB43804E67FD10D2564E580C50F16A0@DM6PR04MB4380.namprd04.prod.outlook.com>
 <23303.46985.171884.449574@stat.math.ethz.ch>
 <DM6PR04MB4380066A42B65532BAD7C72CF1690@DM6PR04MB4380.namprd04.prod.outlook.com>
 <CAL9B2vcuecAjkAvnZS0bE39ADbDP5_pbDXKrd2B-xdqbOX50Vg@mail.gmail.com>
Message-ID: <82417adc-9bfd-980a-1367-0faff074e254@gmail.com>


  This seems like a nice solution -- the only disadvantages I can think
of are (1) extra hassle (2) it might generate messages about function
masking when the upstream package (e.g. broom) is loaded?

On 2018-05-25 12:00 PM, Neal Fultz wrote:
> In the estimatr package, we provided a shim to support broom without
> transitively depending on the tidyverse:
> 
> 
> tidy <- function(object, ...) {
>   if (requireNamespace("broom", quietly = TRUE)) broom::tidy(object, ...)
> else UseMethod("tidy")
> }
> 
> https://github.com/DeclareDesign/estimatr/blob/master/R/S3_tidy.R
> 
> It's not ideal but it seems to make our functions work whether or not the
> end user has broom.
> 
> 
> S4 methods (eg texreg) were more difficult, and we ended up registering the
> generics in .onLoad:
> 
> 
> .onLoad <- function(libname, pkgname) {
>   if (suppressWarnings(requireNamespace("texreg", quietly = TRUE))) {
>     setGeneric("extract", function(model, ...) standardGeneric("extract"),
>       package = "texreg"
>     )
>     setMethod("extract",
>       signature = className("lm_robust", pkgname),
>       definition = extract.lm_robust
>     )
>   }
>   invisible()
> }
> 
> https://github.com/DeclareDesign/estimatr/blob/master/R/zzz.R
> 
> 
> Since this is in .onLoad, it's a little buggy if the user has estimatr and
> then installs texreg, but again seems to mostly work.
> 
> We would appreciate any feedback the list may have on these design patterns.
> 
> 
> -Neal
> 
> 
> 
> 
> On Fri, May 25, 2018 at 8:38 AM, Lenth, Russell V <russell-lenth at uiowa.edu>
> wrote:
> 
>> I agree that most of the package dependencies in multcomp are worth
>> having, but that is not the point. The point is that if a developer wants
>> to write a method for a generic function offered in another non-base
>> package, that creates false dependencies: packages that users are required
>> to have, but that aren't actually used by the method. I certainly wasn't
>> trying to diss multcomp; that was just a concrete illustration.
>>
>> Russ
>>
>> -----Original Message-----
>> From: Martin Maechler [mailto:maechler at stat.math.ethz.ch]
>> Sent: Friday, May 25, 2018 2:13 AM
>> To: Lenth, Russell V <russell-lenth at uiowa.edu>
>> Cc: r-package-devel at r-project.org
>> Subject: Re: [R-pkg-devel] Courtesy methods and explosive dependencies
>>
>>>>>>> Lenth, Russell V
>>>>>>>     on Thu, 24 May 2018 23:14:42 +0000 writes:
>>
>>     > Package developers, I am trying to severely cut down on
>>     > the number of dependencies of my package emmeans. It is
>>     > now 48, which is quite a few (but that is down from over
>>     > 100 in the preceding version, where I made the unwise
>>     > choice of including a particularly greedy package in
>>     > Imports). I hate to force users to install dozens of
>>     > packages that they don't really need or want, but it seems
>>     > very hard to avoid.
>>
>>     > Case in point: emmeans provides additional methods for
>>     > 'cld' and 'glht' from the multcomp package. Accordingly, I
>>     > import their generics, and register my additional
>>     > methods. But because I import the generics, I must list
>>     > multcomp in Imports, and that results in the addition of
>>     > 16 required packages, some of which I never use. More
>>     > important, I believe that NONE of those 16 packages are
>>     > required for the correct functioning of my courtesy
>>     > methods. The only things I really need are the generics.
>>
>> There must be a mistake here -- I think in your perception:
>>
>> 'multcomp' does *not* have excessive dependencies (though I'd say one too
>> much):
>>
>>> tools::package_dependencies("multcomp")
>> $multcomp
>> [1] "stats"     "graphics"  "mvtnorm"   "survival"  "TH.data"   "sandwich"
>> [7] "codetools"
>>
>>> tools::package_dependencies("multcomp", recursive=TRUE)
>> $multcomp
>>  [1] "stats"     "graphics"  "mvtnorm"   "survival"  "TH.data"
>>  "sandwich"
>>  [7] "codetools" "methods"   "utils"     "zoo"       "Matrix"
>> "splines"
>> [13] "MASS"      "grDevices" "grid"      "lattice"
>>
>>>
>>
>> Apart from "base + recommended" packages (which *everyone* has installed),
>> these are just 4 packages:
>>
>>      mvtnorm
>>      TH.data
>>      sandwich
>>      zoo
>>
>> where  mvtnorm, sandwich, and zoo  really are among the (formally
>> undefined) recommended-level-2 R packages... so I do wonder if you really
>> had needed to install.
>>
>> The 'TH.data' { TH <==>  maintainer("multcomp") } package I think should
>> not be in the strict dependencies of 'multcomp' but rather in its
>> "Suggests".... something I'd say must be true for all data packages:
>> The whole idea of data packages is that they should be needed for
>> interesting help page examples, vignettes, maybe even tests, but not for
>> package functionality.
>>
>> In sum: I'd strongly advise to not change from keeping multcomp among your
>> imports.
>>
>> Martin Maechler
>> ETH Zurich
>>
>>     > On the flip side, emmeans defines some generics of its own
>>     > that I invite other package developers to extend so that
>>     > emmeans supports their models. If those packages import
>>     > emmeans, there is an overhead of 48 dependencies; again,
>>     > most of these are packages that are not needed at all for
>>     > those packages' methods to work. I don't like being
>>     > responsible for that.
>>
>>     > I believe this is a very common problem, not just with my
>>     > own packages. It's one thing to extend a base method like
>>     > 'print'; but extending methods in contributed packages
>>     > creates these dependency explosions. I have hundreds of
>>     > packages installed on my system - a couple dozen I care
>>     > about, another few dozen that seem fairly desirable, and a
>>     > couple hundred that I don't even know what they're for,
>>     > other than that things will break if I uninstall them.
>>
>>     > I do know of a couple ways to reduce these dependencies in
>>     > the case of my multcomp dependencies:
>>
>>     > 1. I could simply export my S3 methods for cld and glht as
>>     > functions, rather than registering them as S3 methods.
>>     > Then I could move multcomp to Suggests. The downside is
>>     > that it clutters the namespace for emmeans.
>>
>>     > 2. I could define the generics for cld and glht in my own
>>     > package, and export them; and move multcomp to Suggests.
>>     > Again, it clutters the namespace, and creates warning
>>     > messages about (if not real issues with) masking.
>>
>>     > Probably (1) is better than (2), but is it better than
>>     > what I do now? Is there something else that I (and
>>     > probably a whole lot of other people) don't know?
>>
>>     > I wish there were an ImportGenerics or an
>>     > ImportWithoutDependencies or some such field possible in
>>     > DESCRIPTION.
>>
>>     > I appreciate any suggestions. Thanks
>>
>>     > Russ
>>
>>     > --
>>     > Russell V. Lenth  -  Professor Emeritus Department of
>>     > Statistics and Actuarial Science    The University of Iowa
>>     >  -  Iowa City, IA 52242  USA    Voice (319)335-0712  -
>>     >  FAX (319)335-3017 russell-lenth at uiowa.edu  -
>>     >  http://www.stat.uiowa.edu/~rlenth/
>>
>>     > ______________________________________________
>>     > R-package-devel at r-project.org mailing list
>>     > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Tue Jun  5 22:55:35 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Tue, 5 Jun 2018 22:55:35 +0200
Subject: [R-pkg-devel] trying to understand an error
In-Reply-To: <CAJqTW45EeL1_xb=wr4e-Ybj8JaBYGfrpF-JLfwBrsBasukqn4w@mail.gmail.com>
References: <CAJqTW46n_6L6JKcqk8+tTsj8HpJgZ-6_JuNNwb67BMEOtTLmug@mail.gmail.com>
 <CAJqTW45EeL1_xb=wr4e-Ybj8JaBYGfrpF-JLfwBrsBasukqn4w@mail.gmail.com>
Message-ID: <43ee2ca6-8735-5fb1-4af5-7052ac1a89ea@statistik.tu-dortmund.de>

Please ask the Mac maintainer, Simon Urbanek, in such a case where it is 
not obvious what is going on.

Best,
Uwe Ligges




On 05.06.2018 18:45, Steven Scott wrote:
> If there's anyone willing to take a look at the build errors I would
> appreciate it.  I'm trying to work a bug report from a downstream user, and
> I think the OSX build has an issue that I don't understand.
> Thanks.
> 
> On Thu, May 31, 2018 at 1:49 PM, Steven Scott <steve.the.bayesian at gmail.com>
> wrote:
> 
>> Looking at the Boom package results page, I see that it has errors on OSX
>> and two flavors of Linux.
>>
>> The OSX install page is here:  https://www.r-project.
>> org/nosvn/R.check/r-release-osx-x86_64/Boom-00install.html .
>>
>> I'm trying to understand the nature of the error.  The last lines say:
>>
>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I. -I../inst/include -IBmath -Imath/cephes  -I"/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.5/BH/include" -I"/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.5/RcppEigen/include" -I/usr/local/include   -fPIC  -Wall -g -O2 -c Models/TimeSeries/ArModel.cpp -o Models/TimeSeries/ArModel.o
>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include" -DNDEBUG -I. -I../inst/include -IBmath -Imath/cephes  -I"/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.5/BH/include" -I"/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.5/RcppEigen/include" -I/usr/local/include   -fPIC  -Wall -g -O2 -c Models/TimeSeries/ArmaModel.cpp -o Models/TimeSeries/ArmaModel.o
>> make: *** [Models/TimeSeries/ArmaModel.o] Interrupt: 2
>> ERROR: compilation failed for package ?Boom?
>> * removing ?/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/results/3.5/Boom.Rcheck/Boom?
>>
>>
>> As I read this, it looks like there was no compiler error, but the build
>> was interrupted for some reason.  Do others read it differently?  If I'm
>> reading it right, what needs to happen to re-run the check to clear the OSX
>> error status?
>>
>> Thanks,
>>
>> Steve
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @teve@the@b@ye@i@n @ending from gm@il@com  Tue Jun  5 23:22:08 2018
From: @teve@the@b@ye@i@n @ending from gm@il@com (Steven Scott)
Date: Tue, 5 Jun 2018 14:22:08 -0700
Subject: [R-pkg-devel] trying to understand an error
In-Reply-To: <43ee2ca6-8735-5fb1-4af5-7052ac1a89ea@statistik.tu-dortmund.de>
References: <CAJqTW46n_6L6JKcqk8+tTsj8HpJgZ-6_JuNNwb67BMEOtTLmug@mail.gmail.com>
 <CAJqTW45EeL1_xb=wr4e-Ybj8JaBYGfrpF-JLfwBrsBasukqn4w@mail.gmail.com>
 <43ee2ca6-8735-5fb1-4af5-7052ac1a89ea@statistik.tu-dortmund.de>
Message-ID: <CAJqTW46FLTtWYLkhQLCTm5_KvE+MVDJKQR-yeUqWJcjqehsYRA@mail.gmail.com>

Thanks Uwe.   Will do.

On Tue, Jun 5, 2018 at 1:55 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

> Please ask the Mac maintainer, Simon Urbanek, in such a case where it is
> not obvious what is going on.
>
> Best,
> Uwe Ligges
>
>
>
>
>
> On 05.06.2018 18:45, Steven Scott wrote:
>
>> If there's anyone willing to take a look at the build errors I would
>> appreciate it.  I'm trying to work a bug report from a downstream user,
>> and
>> I think the OSX build has an issue that I don't understand.
>> Thanks.
>>
>> On Thu, May 31, 2018 at 1:49 PM, Steven Scott <
>> steve.the.bayesian at gmail.com>
>> wrote:
>>
>> Looking at the Boom package results page, I see that it has errors on OSX
>>> and two flavors of Linux.
>>>
>>> The OSX install page is here:  https://www.r-project.
>>> org/nosvn/R.check/r-release-osx-x86_64/Boom-00install.html .
>>>
>>> I'm trying to understand the nature of the error.  The last lines say:
>>>
>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include"
>>> -DNDEBUG -I. -I../inst/include -IBmath -Imath/cephes
>>> -I"/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-c
>>> apitan-x86_64/Rlib/3.5/BH/include" -I"/Volumes/SSD-Data/Builds/R-
>>> dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.5/RcppEigen/include"
>>> -I/usr/local/include   -fPIC  -Wall -g -O2 -c Models/TimeSeries/ArModel.cpp
>>> -o Models/TimeSeries/ArModel.o
>>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.framework/Resources/include"
>>> -DNDEBUG -I. -I../inst/include -IBmath -Imath/cephes
>>> -I"/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-c
>>> apitan-x86_64/Rlib/3.5/BH/include" -I"/Volumes/SSD-Data/Builds/R-
>>> dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.5/RcppEigen/include"
>>> -I/usr/local/include   -fPIC  -Wall -g -O2 -c Models/TimeSeries/ArmaModel.cpp
>>> -o Models/TimeSeries/ArmaModel.o
>>> make: *** [Models/TimeSeries/ArmaModel.o] Interrupt: 2
>>> ERROR: compilation failed for package ?Boom?
>>> * removing ?/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-cap
>>> itan-x86_64/results/3.5/Boom.Rcheck/Boom?
>>>
>>>
>>> As I read this, it looks like there was no compiler error, but the build
>>> was interrupted for some reason.  Do others read it differently?  If I'm
>>> reading it right, what needs to happen to re-run the check to clear the
>>> OSX
>>> error status?
>>>
>>> Thanks,
>>>
>>> Steve
>>>
>>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>>

	[[alternative HTML version deleted]]


From kevinu@hey @ending from gm@il@com  Tue Jun  5 23:53:16 2018
From: kevinu@hey @ending from gm@il@com (Kevin Ushey)
Date: Tue, 5 Jun 2018 14:53:16 -0700
Subject: [R-pkg-devel] trying to understand an error
In-Reply-To: <CAJqTW46FLTtWYLkhQLCTm5_KvE+MVDJKQR-yeUqWJcjqehsYRA@mail.gmail.com>
References: <CAJqTW46n_6L6JKcqk8+tTsj8HpJgZ-6_JuNNwb67BMEOtTLmug@mail.gmail.com>
 <CAJqTW45EeL1_xb=wr4e-Ybj8JaBYGfrpF-JLfwBrsBasukqn4w@mail.gmail.com>
 <43ee2ca6-8735-5fb1-4af5-7052ac1a89ea@statistik.tu-dortmund.de>
 <CAJqTW46FLTtWYLkhQLCTm5_KvE+MVDJKQR-yeUqWJcjqehsYRA@mail.gmail.com>
Message-ID: <CAJXgQP0R5H+oVRUSDo2+vy-62vO+oCPOkyQhse+HQ1Qbp3M0tA@mail.gmail.com>

For what it's worth, the package compiles successfully on my own macOS
machine but it takes a long time to build just because of how large it is.
Perhaps the CRAN build machine is set to interrupt long-running
installations, under the assumption that they're hanging / frozen?

Given how many C++ source files your package has, it may be prudent to
combine some of them into single C++ translation units, so they can be
built faster (avoid re-parsing the heavy BH and RcppEigen headers so many
times during compilation).

A simple way to accomplish this -- suppose you have files A.cpp, B.cpp,
C.cpp and wanted to compile them together. You could create a file:

    #include <src/A.cpp>
    #include <src/B.cpp>
    #include <src/C.cpp>

and then compile that single file to effectively build those three files
all at once. This does of course require that your source files don't have
any accidental symbol collisions, but I think it would be worth
investigating.

Best,
Kevin

On Tue, Jun 5, 2018 at 2:22 PM, Steven Scott <steve.the.bayesian at gmail.com>
wrote:

> Thanks Uwe.   Will do.
>
> On Tue, Jun 5, 2018 at 1:55 PM, Uwe Ligges <ligges at statistik.tu-dortmund.
> de>
> wrote:
>
> > Please ask the Mac maintainer, Simon Urbanek, in such a case where it is
> > not obvious what is going on.
> >
> > Best,
> > Uwe Ligges
> >
> >
> >
> >
> >
> > On 05.06.2018 18:45, Steven Scott wrote:
> >
> >> If there's anyone willing to take a look at the build errors I would
> >> appreciate it.  I'm trying to work a bug report from a downstream user,
> >> and
> >> I think the OSX build has an issue that I don't understand.
> >> Thanks.
> >>
> >> On Thu, May 31, 2018 at 1:49 PM, Steven Scott <
> >> steve.the.bayesian at gmail.com>
> >> wrote:
> >>
> >> Looking at the Boom package results page, I see that it has errors on
> OSX
> >>> and two flavors of Linux.
> >>>
> >>> The OSX install page is here:  https://www.r-project.
> >>> org/nosvn/R.check/r-release-osx-x86_64/Boom-00install.html .
> >>>
> >>> I'm trying to understand the nature of the error.  The last lines say:
> >>>
> >>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.
> framework/Resources/include"
> >>> -DNDEBUG -I. -I../inst/include -IBmath -Imath/cephes
> >>> -I"/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-c
> >>> apitan-x86_64/Rlib/3.5/BH/include" -I"/Volumes/SSD-Data/Builds/R-
> >>> dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.5/
> RcppEigen/include"
> >>> -I/usr/local/include   -fPIC  -Wall -g -O2 -c
> Models/TimeSeries/ArModel.cpp
> >>> -o Models/TimeSeries/ArModel.o
> >>> clang++ -std=gnu++11 -I"/Library/Frameworks/R.
> framework/Resources/include"
> >>> -DNDEBUG -I. -I../inst/include -IBmath -Imath/cephes
> >>> -I"/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-c
> >>> apitan-x86_64/Rlib/3.5/BH/include" -I"/Volumes/SSD-Data/Builds/R-
> >>> dev-web/QA/Simon/packages/el-capitan-x86_64/Rlib/3.5/
> RcppEigen/include"
> >>> -I/usr/local/include   -fPIC  -Wall -g -O2 -c
> Models/TimeSeries/ArmaModel.cpp
> >>> -o Models/TimeSeries/ArmaModel.o
> >>> make: *** [Models/TimeSeries/ArmaModel.o] Interrupt: 2
> >>> ERROR: compilation failed for package ?Boom?
> >>> * removing ?/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-
> cap
> >>> itan-x86_64/results/3.5/Boom.Rcheck/Boom?
> >>>
> >>>
> >>> As I read this, it looks like there was no compiler error, but the
> build
> >>> was interrupted for some reason.  Do others read it differently?  If
> I'm
> >>> reading it right, what needs to happen to re-run the check to clear the
> >>> OSX
> >>> error status?
> >>>
> >>> Thanks,
> >>>
> >>> Steve
> >>>
> >>>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From c@c@voeten @ending from hum@leidenuniv@nl  Thu Jun  7 12:23:01 2018
From: c@c@voeten @ending from hum@leidenuniv@nl (Voeten, C.C.)
Date: Thu, 7 Jun 2018 10:23:01 +0000
Subject: [R-pkg-devel] How do I know if/when my package is fit for CRAN?
Message-ID: <D14049CE02C4F54D95360EEC06CE45C50F8A5663@SPMXM08.VUW.leidenuniv.nl>

Dear list,

I have been working on an R package for the past two years. It started as a programming exercise for me to get acquainted with R, and because I had some issues with lmerTest::step (the aim of my package was to automate the protocol I use for performing model comparisons using LRT, also when one of the models does not converge or is not an lme4 model; these three things of LRT, nonconvergence, and non-lme4 models are not handled by lmerTest::step). Over the past two years, I have completely refactored the package multiple times as I realized there were better/cleaner ways to do things, and it has now grown into something that I use in my day-to-day statistical life.

Now, it occurs to me that my code may be of use to other people. However, at the same time, I also feel that the package is nowhere near 'done', in the sense of polished code that is free of my personal quirks; here I do not mean little things like coding style, but rather more generally my overall approach to things. (I also know of a few bugs that need fixing, but that is easy - just need to find the time to do it.)
My question is: how do I know (1) if my package belongs on CRAN (it did start out as a personal project, after all); and (2) when the code is in good enough shape to be submitted without me wasting the time of the people reviewing the submissions?  The code is currently at [1], but my question is explicitly not for other people to review my code - instead, I am asking how I can do that myself!

Thank you for any advice,
Cesko

[1] https://github.com/cvoeten/buildmer 


From li@t@ @ending from dewey@myzen@co@uk  Thu Jun  7 13:00:09 2018
From: li@t@ @ending from dewey@myzen@co@uk (Michael Dewey)
Date: Thu, 7 Jun 2018 12:00:09 +0100
Subject: [R-pkg-devel] How do I know if/when my package is fit for CRAN?
In-Reply-To: <D14049CE02C4F54D95360EEC06CE45C50F8A5663@SPMXM08.VUW.leidenuniv.nl>
References: <D14049CE02C4F54D95360EEC06CE45C50F8A5663@SPMXM08.VUW.leidenuniv.nl>
Message-ID: <63e7d9db-6906-c0a2-3e0d-2fcd828f79d8@dewey.myzen.co.uk>

Comments in-line

On 07/06/2018 11:23, Voeten, C.C. wrote:
> Dear list,
> 
> I have been working on an R package for the past two years. It started as a programming exercise for me to get acquainted with R, and because I had some issues with lmerTest::step (the aim of my package was to automate the protocol I use for performing model comparisons using LRT, also when one of the models does not converge or is not an lme4 model; these three things of LRT, nonconvergence, and non-lme4 models are not handled by lmerTest::step). Over the past two years, I have completely refactored the package multiple times as I realized there were better/cleaner ways to do things, and it has now grown into something that I use in my day-to-day statistical life.
> 
> Now, it occurs to me that my code may be of use to other people. However, at the same time, I also feel that the package is nowhere near 'done', in the sense of polished code that is free of my personal quirks; here I do not mean little things like coding style, but rather more generally my overall approach to things. (I also know of a few bugs that need fixing, but that is easy - just need to find the time to do it.)
> My question is: how do I know (1) if my package belongs on CRAN (it did start out as a personal project, after all)

There are quite a few packages on CRAN which are collections of things 
which people personally found useful so I would have thought your 
package might well be of benefit.

; and (2) when the code is in good enough shape to be submitted without 
me wasting the time of the people reviewing the submissions?  The code 
is currently at [1], but my question is explicitly not for other people 
to review my code - instead, I am asking how I can do that myself!

If it passes the standard checks it should be accepted. There are 
packages which contain stylistic features which I would not write myself 
but that would not matter. If people start using it they will probably 
give you feedback anyway.

One thing which occurs to me though is whether the maintaner of lmerTest 
would accept it into the package? If it has a different philosophy 
probably not but perhaps worth asking?

Michael

> 
> Thank you for any advice,
> Cesko
> 
> [1] https://github.com/cvoeten/buildmer
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From rune@h@ubo @ending from gm@il@com  Thu Jun  7 13:49:06 2018
From: rune@h@ubo @ending from gm@il@com (Rune Haubo)
Date: Thu, 7 Jun 2018 13:49:06 +0200
Subject: [R-pkg-devel] How do I know if/when my package is fit for CRAN?
In-Reply-To: <63e7d9db-6906-c0a2-3e0d-2fcd828f79d8@dewey.myzen.co.uk>
References: <D14049CE02C4F54D95360EEC06CE45C50F8A5663@SPMXM08.VUW.leidenuniv.nl>
 <63e7d9db-6906-c0a2-3e0d-2fcd828f79d8@dewey.myzen.co.uk>
Message-ID: <CAG_uk90-1Psn7QbGMe1Z3qPXE_k=BQKipoY_Nd=DHv3o-V88Ng@mail.gmail.com>

On 7 June 2018 at 13:00, Michael Dewey <lists at dewey.myzen.co.uk> wrote:
>
> One thing which occurs to me though is whether the maintaner of lmerTest
> would accept it into the package? If it has a different philosophy probably
> not but perhaps worth asking?

In the lmerTest-team we are always open to collaborations. A quick
look at buildmer indicates that it takes a different approach than
lmerTest and has a different scope (lmerTest is for LMMs but buildmer
seems to cover GLMs, GLMMs, and GAMMs as well) so perhaps buildmer is
most appropriately kept in a separate package.

@Cesko, you may have noticed that a new almost completely re-written
version of lmerTest (>= 3.0.0) has been out for a couple of months
now? It has a new improved version of step() which should be better
behaved when it comes to convergence failures. If you still encounter
problems please let us know by posting an issue at
https://github.com/runehaubo/lmerTestR. In any case you are always
welcome to reach out privately.

Cheers

Rune
(for the lmerTest authors)


From c@c@voeten @ending from hum@leidenuniv@nl  Thu Jun  7 14:36:28 2018
From: c@c@voeten @ending from hum@leidenuniv@nl (Voeten, C.C.)
Date: Thu, 7 Jun 2018 12:36:28 +0000
Subject: [R-pkg-devel] How do I know if/when my package is fit for CRAN?
In-Reply-To: <CAG_uk90-1Psn7QbGMe1Z3qPXE_k=BQKipoY_Nd=DHv3o-V88Ng@mail.gmail.com>
References: <D14049CE02C4F54D95360EEC06CE45C50F8A5663@SPMXM08.VUW.leidenuniv.nl>
 <63e7d9db-6906-c0a2-3e0d-2fcd828f79d8@dewey.myzen.co.uk>
 <CAG_uk90-1Psn7QbGMe1Z3qPXE_k=BQKipoY_Nd=DHv3o-V88Ng@mail.gmail.com>
Message-ID: <D14049CE02C4F54D95360EEC06CE45C50F8A56FA@SPMXM08.VUW.leidenuniv.nl>

Dear Michael and Rune,

Yes, when I started I was hoping that my tinkering might eventually be absorbed into lmerTest. Unfortunately, at the time, my knowledge of R and lmerTest was not sufficient for me to hack at lmerTest, and once I had achieved what I needed for LMMs in my own way (as a small script for personal use), I realized that I could easily extend my approach to GLMs and GAMs, at the obvious cost of breaking any possibility for upstreaming my code to lmerTest. I think that of the code I have now, not much is useful to lmerTest, but when I find the time I will certainly take a look if some things could be detached from buildmer into lmerTest.

I was aware of the new version of lmerTest (still have to update buildmer to work with the new interfaces though), but I have not used its step function in a long time. I'm glad to hear that it has gotten better at handling convergence failures. Yes, in case of future problems I will definitely get in touch, as I should perhaps have done two years ago -- I can only guess that at the time, I figured that the problem must have been with my model specification itself; my road to learning mixed models has been somewhat rocky!

In any case, I am encouraged by your replies. I will see if I can fix some more bugs and get the code to pass the CRAN checks, and maybe eventually I'll actually submit the package. Of course, I'll also see if there are things that could be of use to lmerTest, since I don't want to needlessly step onto their turf. Thank you for your kind feedback!

Best,
Cesko

> -----Oorspronkelijk bericht-----
> Van: Rune Haubo [mailto:rune.haubo at gmail.com]
> Verzonden: donderdag 7 juni 2018 13:49
> Aan: Michael Dewey <lists at dewey.myzen.co.uk>
> CC: Voeten, C.C. <c.c.voeten at hum.leidenuniv.nl>; r-package-devel at r-
> project.org
> Onderwerp: Re: [R-pkg-devel] How do I know if/when my package is fit for
> CRAN?
> 
> On 7 June 2018 at 13:00, Michael Dewey <lists at dewey.myzen.co.uk> wrote:
> >
> > One thing which occurs to me though is whether the maintaner of
> > lmerTest would accept it into the package? If it has a different
> > philosophy probably not but perhaps worth asking?
> 
> In the lmerTest-team we are always open to collaborations. A quick look at
> buildmer indicates that it takes a different approach than lmerTest and has a
> different scope (lmerTest is for LMMs but buildmer seems to cover GLMs,
> GLMMs, and GAMMs as well) so perhaps buildmer is most appropriately
> kept in a separate package.
> 
> @Cesko, you may have noticed that a new almost completely re-written
> version of lmerTest (>= 3.0.0) has been out for a couple of months now? It
> has a new improved version of step() which should be better behaved when
> it comes to convergence failures. If you still encounter problems please let us
> know by posting an issue at https://github.com/runehaubo/lmerTestR. In
> any case you are always welcome to reach out privately.
> 
> Cheers
> 
> Rune
> (for the lmerTest authors)

From murdoch@dunc@n @ending from gm@il@com  Thu Jun  7 20:16:43 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Thu, 7 Jun 2018 14:16:43 -0400
Subject: [R-pkg-devel] How do I know if/when my package is fit for CRAN?
In-Reply-To: <D14049CE02C4F54D95360EEC06CE45C50F8A5663@SPMXM08.VUW.leidenuniv.nl>
References: <D14049CE02C4F54D95360EEC06CE45C50F8A5663@SPMXM08.VUW.leidenuniv.nl>
Message-ID: <d10d8704-b48c-6343-b522-e774cc356899@gmail.com>

On 07/06/2018 6:23 AM, Voeten, C.C. wrote:
> Dear list,
> 
> I have been working on an R package for the past two years. It started as a programming exercise for me to get acquainted with R, and because I had some issues with lmerTest::step (the aim of my package was to automate the protocol I use for performing model comparisons using LRT, also when one of the models does not converge or is not an lme4 model; these three things of LRT, nonconvergence, and non-lme4 models are not handled by lmerTest::step). Over the past two years, I have completely refactored the package multiple times as I realized there were better/cleaner ways to do things, and it has now grown into something that I use in my day-to-day statistical life.
> 
> Now, it occurs to me that my code may be of use to other people. However, at the same time, I also feel that the package is nowhere near 'done', in the sense of polished code that is free of my personal quirks; here I do not mean little things like coding style, but rather more generally my overall approach to things. (I also know of a few bugs that need fixing, but that is easy - just need to find the time to do it.)
> My question is: how do I know (1) if my package belongs on CRAN (it did start out as a personal project, after all); and (2) when the code is in good enough shape to be submitted without me wasting the time of the people reviewing the submissions?  The code is currently at [1], but my question is explicitly not for other people to review my code - instead, I am asking how I can do that myself!
> 


As others have said, if it passes the CRAN checks, it will probably be 
accepted.

But whether you should submit it requires some thought on your end.  Do 
you want people using it and sending you bug reports and requests for 
additional functionality?  I'll assume yes.  Then you need to get people 
using it, and that requires that they can find it and figure out how to 
use it.  Think carefully about putting together your DESCRIPTION file; 
that's what people will find first.  Write good documentation for each 
of the functions, including examples.  Write a vignette giving an overview.

And if you do submit it to CRAN, be prepared to support it for several 
years.  R changes over time, and you need to be ready to make the 
necessary changes to your package so that it still works.  If it breaks 
and you don't fix it, that will cause lots of extra work for others.

Duncan Murdoch


From rom@n@flury @ending from m@th@uzh@ch  Fri Jun  8 11:12:31 2018
From: rom@n@flury @ending from m@th@uzh@ch (Roman Flury)
Date: Fri, 8 Jun 2018 11:12:31 +0200 (CEST)
Subject: [R-pkg-devel] pkg built with static vignette introduces dependency
 on R > = 3.5.0
Message-ID: <486906992.307181.1528449150993.JavaMail.zimbra@math.uzh.ch>

Dear all,

I'm working on a package which contains a static vignette. If the pkg is built with R version 3.3.3 everything works fine, but if built with the current R-devel version I get the warning:

>     NB: this package now depends on R (>= 3.5.0)
>     WARNING: Added dependency on R >= 3.5.0 because serialized objects in  serialize/load version 3 cannot be read in older versions of R.  File(s) containing such objects:  'staticvignettepkg/build/vignette.rds'

and as described the dependency on R >= 3.5.0 is added to the DESCRIPTION file.

I found possible context for this behaviour in the R-devel NEWS https://cran.r-project.org/doc/manuals/r-devel/NEWS.html:

''R has new serialization format (version 3) which supports custom serialization of ALTREP framework objects. These objects can still be serialized in format 2, but less efficiently. Serialization format 3 also records the current native encoding of unflagged strings and converts them when de-serialized in R running under different native encoding. Format 3 comes with new serialization magic numbers (RDA3, RDB3, RDX3). Format 3 can be selected by version = 3 in save(), serialize() and saveRDS(), but format 2 remains the default for all serialization and saving of the workspace. Serialized data in format 3 cannot be read by versions of R prior to version 3.5.0.''

but I can not see why or how this should have an influence on a static vignette?

To illustrate and reproduce my issue I created a git repository https://github.com/romanflury/staticvignette with a minimal package, containing an arbitrary pdf document as a static vignette. The git repository includes the respective session infos also.

I hope to avoid this dependency, since I do not want to force users to update their R version.

Many thanks,

Roman


From murdoch@dunc@n @ending from gm@il@com  Fri Jun  8 13:02:46 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Fri, 8 Jun 2018 07:02:46 -0400
Subject: [R-pkg-devel] 
 pkg built with static vignette introduces dependency on R > = 3.5.0
In-Reply-To: <486906992.307181.1528449150993.JavaMail.zimbra@math.uzh.ch>
References: <486906992.307181.1528449150993.JavaMail.zimbra@math.uzh.ch>
Message-ID: <2ba3fed5-15f8-9fb1-39ac-7d74a62bb946@gmail.com>

On 08/06/2018 5:12 AM, Roman Flury wrote:
> Dear all,
> 
> I'm working on a package which contains a static vignette. If the pkg is built with R version 3.3.3 everything works fine, but if built with the current R-devel version I get the warning:
> 
>>      NB: this package now depends on R (>= 3.5.0)
>>      WARNING: Added dependency on R >= 3.5.0 because serialized objects in  serialize/load version 3 cannot be read in older versions of R.  File(s) containing such objects:  'staticvignettepkg/build/vignette.rds'
> 
> and as described the dependency on R >= 3.5.0 is added to the DESCRIPTION file.
> 
> I found possible context for this behaviour in the R-devel NEWS https://cran.r-project.org/doc/manuals/r-devel/NEWS.html:
> 
> ''R has new serialization format (version 3) which supports custom serialization of ALTREP framework objects. These objects can still be serialized in format 2, but less efficiently. Serialization format 3 also records the current native encoding of unflagged strings and converts them when de-serialized in R running under different native encoding. Format 3 comes with new serialization magic numbers (RDA3, RDB3, RDX3). Format 3 can be selected by version = 3 in save(), serialize() and saveRDS(), but format 2 remains the default for all serialization and saving of the workspace. Serialized data in format 3 cannot be read by versions of R prior to version 3.5.0.''
> 
> but I can not see why or how this should have an influence on a static vignette?
> 
> To illustrate and reproduce my issue I created a git repository https://github.com/romanflury/staticvignette with a minimal package, containing an arbitrary pdf document as a static vignette. The git repository includes the respective session infos also.
> 
> I hope to avoid this dependency, since I do not want to force users to update their R version.

When R builds a package with vignettes, it adds a file 
build/vignette.rds to the tarball that contains information about the 
vignettes.  Since R-devel is switching the format of .rds files, this 
file is in the new format, which can't be read by R versions prior to 3.5.0.

Generally speaking there is no guarantee that R x.y.z can handle a 
package built in a later version, and this is an example of that 
problem:  R x.y.z can't handle a package built in x.(y+2).z.

So the solution is to build your tarball in R 3.5.x or earlier, not in 
R-devel, or to add the dependency mentioned in the warning message.

Duncan Murdoch


From Jori@@Mey@ @ending from ugent@be  Mon Jun 11 14:22:17 2018
From: Jori@@Mey@ @ending from ugent@be (Joris Meys)
Date: Mon, 11 Jun 2018 14:22:17 +0200
Subject: [R-pkg-devel] Differences between documentation and CRAN
 requirements: an update needed?
Message-ID: <CAO1zAVbdV7w9_8LrM1Eg1zqUJsOcxOxYzmpyHEPJEX9FrZUjcg@mail.gmail.com>

 Dear all,

Two recent tweets pointed out that apparently there were some changes to
the CRAN requirements for packages. Yet, not all requirements are
consistent with documentation or previous communication. These issues also
come up more often lately, partly because people start to be more vocal
about them on different social media. Let me illustrate:

One is about DOI requirements and the apparent rule against using
\dontrun{}. I do get the strict requirements for DOI citations, but I was
baffled to find out that using \dontrun{} is now frowned upon.

https://twitter.com/thosjleeper/status/1005850352997019649?s=19

I've tried to find the information that says \dontrun{} shouldn't be used
but couldn't find it. In contrary, it is still documented in writing R
extensions as a valid option:

https://cran.r-project.org/doc/manuals/R-exts.html#index-_005cdontrun

The second one is more worrisome. It deals with the use of
R_GetConnection() and R CMD check apparently now complains with a NOTE that
this function and the function R_WriteConnection() are not part of the
public API.

https://github.com/tidyverse/readr/issues/856#issuecomment-391787058

The note in R CMD check Yet, in the NEWS file for R 3.3.0 the following is
found:

The connections interface now includes a function R_GetConnection() which
allows packages implementing connections to convert R connection objects to
Rconnection handles.  Code which previously used the low-level R-internal
getConnection() entry point should switch.

So at least that function has been part of the API at one point. I've tried
to find the point where this function was removed from the public API, but
again I turned up a blank.

Hence my question:

Without meaning any disrespect towards the huge effort done daily by the
CRAN maintainers, I would like to ask if it is possible to communicate an
update on the requirements or adjust the documentation that is refered to
accordingly. Specifically the note of R CMD check points to the part about
portable code in writing R extensions, I couldn't locate anything remotely
helpful there.

I do not want to contest the decisions made, but it's hard to train/help
people correctly if we can't rely on the official documentation any longer
to know what is and what is not accepted. And for the moment that seems to
be the case.

Cheers
Joris


-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Tue Jun 12 17:20:29 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Tue, 12 Jun 2018 17:20:29 +0200
Subject: [R-pkg-devel] Differences between documentation and CRAN
 requirements: an update needed?
In-Reply-To: <CAO1zAVbdV7w9_8LrM1Eg1zqUJsOcxOxYzmpyHEPJEX9FrZUjcg@mail.gmail.com>
References: <CAO1zAVbdV7w9_8LrM1Eg1zqUJsOcxOxYzmpyHEPJEX9FrZUjcg@mail.gmail.com>
Message-ID: <b2544bc4-60d1-ddd1-d809-683f36e52095@statistik.tu-dortmund.de>



On 11.06.2018 14:22, Joris Meys wrote:
>   Dear all,
> 
> Two recent tweets pointed out that apparently there were some changes to
> the CRAN requirements for packages. Yet, not all requirements are
> consistent with documentation or previous communication. These issues also
> come up more often lately, partly because people start to be more vocal
> about them on different social media. Let me illustrate:
> 
> One is about DOI requirements and the apparent rule against using
> \dontrun{}. I do get the strict requirements for DOI citations,

There is no strict requirement.


CRAN asks to add appropriate references to the Description field, if 
available, and to add a DOI, if available, there never was / is any 
strict requirement here.


> but I was
> baffled to find out that using \dontrun{} is now frowned upon.
> 
> https://twitter.com/thosjleeper/status/1005850352997019649?s=19
> 
> I've tried to find the information that says \dontrun{} shouldn't be used
> but couldn't find it. In contrary, it is still documented in writing R
> extensions as a valid option:
> 
> https://cran.r-project.org/doc/manuals/R-exts.html#index-_005cdontrun


Sure, \dontrun{} markup is intended for cases where neither automated 
chercks nor users can expect that the given code work out of the box 
and, e.g., changes are needed to make it work, e.g. isertion of otehr 
useranmes ... while \donttest{} is expected to work out of the box 
(perhaps code that only work interactively or excluded in order to omit 
ling running examples from the checks). Nothing new here.





> The second one is more worrisome. It deals with the use of
> R_GetConnection() and R CMD check apparently now complains with a NOTE that
> this function and the function R_WriteConnection() are not part of the
> public API.
> 
> https://github.com/tidyverse/readr/issues/856#issuecomment-391787058
> 
> The note in R CMD check Yet, in the NEWS file for R 3.3.0 the following is
> found:
> 
> The connections interface now includes a function R_GetConnection() which
> allows packages implementing connections to convert R connection objects to
> Rconnection handles.  Code which previously used the low-level R-internal
> getConnection() entry point should switch.
> 
> So at least that function has been part of the API at one point. I've tried
> to find the point where this function was removed from the public API, but
> again I turned up a blank.

This is an R-core matter, not a CRAN one, as the API of R is nothing 
that CRAN defines. We can only check whether people use non API calls 
which they should not by definition. If you like to get these things 
into the API, please ask R-core.

Best,
Uwe Ligges




> 
> Hence my question:
> 
> Without meaning any disrespect towards the huge effort done daily by the
> CRAN maintainers, I would like to ask if it is possible to communicate an
> update on the requirements or adjust the documentation that is refered to
> accordingly. Specifically the note of R CMD check points to the part about
> portable code in writing R extensions, I couldn't locate anything remotely
> helpful there.
> 
> I do not want to contest the decisions made, but it's hard to train/help
> people correctly if we can't rely on the official documentation any longer
> to know what is and what is not accepted. And for the moment that seems to
> be the case.
> 
> Cheers
> Joris
> 
>


From Jori@@Mey@ @ending from ugent@be  Wed Jun 13 12:45:30 2018
From: Jori@@Mey@ @ending from ugent@be (Joris Meys)
Date: Wed, 13 Jun 2018 12:45:30 +0200
Subject: [R-pkg-devel] Checksums changed on CRAN without any visible
 modifications to files.
Message-ID: <CAO1zAVamKmQtaPSgetWY3WVxVa_Ucg1irxaxUen_a0UfohpBwQ@mail.gmail.com>

Dear all,

I have another report of checksums for CRAN packages that changed without
any visible change to the package itself.

https://github.com/easybuilders/easybuild-easyconfigs/pull/6446

At the time of the release of R3.5, pkgmaker was at version 0.22. A bit
after the release, this version was archived and replaced by the new one
(0.27). Somewhere in that process the checksum for the tarball of version
0.22 changed.

The only explanation I can come up with, is that either because of the
release of R3.5 or because of the archiving the tarball was recreated and
has a different timestamp. That's the only way I know a MD5 checksum of a
tarball can change without any change to the files in there.

Anyone knows what is going on here, and how this can be circumvented at the
client side?

Cheers
Joris


-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Wed Jun 13 15:16:46 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Wed, 13 Jun 2018 15:16:46 +0200
Subject: [R-pkg-devel] Checksums changed on CRAN without any visible
 modifications to files.
In-Reply-To: <CAO1zAVamKmQtaPSgetWY3WVxVa_Ucg1irxaxUen_a0UfohpBwQ@mail.gmail.com>
References: <CAO1zAVamKmQtaPSgetWY3WVxVa_Ucg1irxaxUen_a0UfohpBwQ@mail.gmail.com>
Message-ID: <743b6a26-7632-45d2-57a4-20b5ceb475b1@statistik.tu-dortmund.de>



On 13.06.2018 12:45, Joris Meys wrote:
> Dear all,
> 
> I have another report of checksums for CRAN packages that changed without
> any visible change to the package itself.
> 
> https://github.com/easybuilders/easybuild-easyconfigs/pull/6446
> 
> At the time of the release of R3.5, pkgmaker was at version 0.22. A bit
> after the release, this version was archived and replaced by the new one
> (0.27). Somewhere in that process the checksum for the tarball of version
> 0.22 changed.
> 
> The only explanation I can come up with, is that either because of the
> release of R3.5 or because of the archiving the tarball was recreated and
> has a different timestamp. That's the only way I know a MD5 checksum of a
> tarball can change without any change to the files in there.
> 
> Anyone knows what is going on here, and how this can be circumvented at the
> client side?

When CRAN repacks and changes the DESCRIPTION file, the checksums 
change, of course.

Best,
Uwe Ligges







> Cheers
> Joris
> 
>


From Jori@@Mey@ @ending from ugent@be  Wed Jun 13 15:40:20 2018
From: Jori@@Mey@ @ending from ugent@be (Joris Meys)
Date: Wed, 13 Jun 2018 15:40:20 +0200
Subject: [R-pkg-devel] Checksums changed on CRAN without any visible
 modifications to files.
In-Reply-To: <743b6a26-7632-45d2-57a4-20b5ceb475b1@statistik.tu-dortmund.de>
References: <CAO1zAVamKmQtaPSgetWY3WVxVa_Ucg1irxaxUen_a0UfohpBwQ@mail.gmail.com>
 <743b6a26-7632-45d2-57a4-20b5ceb475b1@statistik.tu-dortmund.de>
Message-ID: <CAO1zAVaH_m6jB=6J+zSdRSbcYxFZ+ta4y1rDPTyA6E71dJDKHQ@mail.gmail.com>

On Wed, Jun 13, 2018 at 3:16 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de
> wrote:

>
> When CRAN repacks and changes the DESCRIPTION file, the checksums change,
> of course.
>
> Best,
> Uwe Ligges
>
>
Dear Uwe,

I understood that from the previous issue. In this case however, none of
the files -including the DESCRIPTION file- were changed. Am I right in
suspecting that a package is repacked when moved to the archive? I suspect
that the tool used to repack the package is using gzip, and it is possible
to repack without adding a timestamp as explained here :

https://serverfault.com/questions/110208/different-md5sums-for-same-tar-contents

I can explain the different checksums when some things are changed to our
HPC sysadmins, but they have -understandibly- difficulties with checksums
changing for released source tarballs. Is it possible to adapt the
archiving so that at least for identical tarballs the md5 sums remain the
same? Or if you have other suggestions to deal with this without having to
change hardcoded checksums in the easybuild repos, that would be very
welcome too.

Cheers
Joris

-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From Sh@keel@Sulem@n @ending from phe@gov@uk  Wed Jun 13 16:31:16 2018
From: Sh@keel@Sulem@n @ending from phe@gov@uk (Shakeel Suleman)
Date: Wed, 13 Jun 2018 14:31:16 +0000
Subject: [R-pkg-devel] R Markdown and tables in Word
Message-ID: <87596AC185AC7044835858C43B6A83DC01C9951744@MAILMBXCOL03.phe.gov.uk>

I am relatively new to R and was wondering if someone could advise me on presenting tables in R Markdown for Word. I would like to present a simple table of counts, with column 1 representing name of an organisation (and last row called "All organisations") and another four columns representing the most recent four week period (e.g. week 21, 22, 23, 24) and a final total column, as illustrated below. The actual data is just counts (e.g. 4, 5, 8, widgets produced, number of people off sick etc).

My question is: can this be done to a publication quality standard. I have tried Pander, but that adds "Sum" instead of All Organisations and 4 Week Total and doesn't look particularly good.



Week



20

21

22

23

4 week total

Organisation

6

6

1

1

14

ABC

2

4

1

5

12

DCE

0

5

1

5

11

EFG

3

6

3

5

17

HIJ

1

8

3

2

14

All Organizations

12

29

9

18

68




Kind regards,

Shakeel


**************************************************************************
The information contained in the EMail and any attachments is confidential and intended solely and for the attention and use of the named addressee(s). It may not be disclosed to any other person without the express authority of Public Health England, or the intended recipient, or both. If you are not the intended recipient, you must not disclose, copy, distribute or retain this message or any part of it. This footnote also confirms that this EMail has been swept for computer viruses by Symantec.Cloud, but please re-sweep any attachments before opening or saving. http://www.gov.uk/PHE
**************************************************************************
	[[alternative HTML version deleted]]


From j@@on@@ervi@@ @ending from ki@@e  Wed Jun 13 16:52:14 2018
From: j@@on@@ervi@@ @ending from ki@@e (Jason Serviss)
Date: Wed, 13 Jun 2018 14:52:14 +0000
Subject: [R-pkg-devel] R Markdown and tables in Word
In-Reply-To: <87596AC185AC7044835858C43B6A83DC01C9951744@MAILMBXCOL03.phe.gov.uk>
References: <87596AC185AC7044835858C43B6A83DC01C9951744@MAILMBXCOL03.phe.gov.uk>
Message-ID: <C31BB630-C2A5-446A-8AA8-076E38BBCED4@ki.se>

Hi Shakell,

You have sent your enquiry to the R package development mailing list. You will most likely get more help and relevant answers if you send to the R-help mailing list since here we are mostly (totally) focused on package development.

You can find the mailing lists and their descriptions here: https://www.r-project.org/mail.html

Regards,
Jason


On 13 Jun 2018, at 16:31, Shakeel Suleman <Shakeel.Suleman at phe.gov.uk<mailto:Shakeel.Suleman at phe.gov.uk>> wrote:

I am relatively new to R and was wondering if someone could advise me on presenting tables in R Markdown for Word. I would like to present a simple table of counts, with column 1 representing name of an organisation (and last row called "All organisations") and another four columns representing the most recent four week period (e.g. week 21, 22, 23, 24) and a final total column, as illustrated below. The actual data is just counts (e.g. 4, 5, 8, widgets produced, number of people off sick etc).

My question is: can this be done to a publication quality standard. I have tried Pander, but that adds "Sum" instead of All Organisations and 4 Week Total and doesn't look particularly good.



Week



20

21

22

23

4 week total

Organisation

6

6

1

1

14

ABC

2

4

1

5

12

DCE

0

5

1

5

11

EFG

3

6

3

5

17

HIJ

1

8

3

2

14

All Organizations

12

29

9

18

68




Kind regards,

Shakeel


**************************************************************************
The information contained in the EMail and any attachments is confidential and intended solely and for the attention and use of the named addressee(s). It may not be disclosed to any other person without the express authority of Public Health England, or the intended recipient, or both. If you are not the intended recipient, you must not disclose, copy, distribute or retain this message or any part of it. This footnote also confirms that this EMail has been swept for computer viruses by Symantec.Cloud, but please re-sweep any attachments before opening or saving. http://www.gov.uk/PHE
**************************************************************************
[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Wed Jun 13 17:24:59 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Wed, 13 Jun 2018 11:24:59 -0400
Subject: [R-pkg-devel] R Markdown and tables in Word
In-Reply-To: <C31BB630-C2A5-446A-8AA8-076E38BBCED4@ki.se>
References: <87596AC185AC7044835858C43B6A83DC01C9951744@MAILMBXCOL03.phe.gov.uk>
 <C31BB630-C2A5-446A-8AA8-076E38BBCED4@ki.se>
Message-ID: <9c176762-7756-26ce-9234-66a39c16e020@gmail.com>

On 13/06/2018 10:52 AM, Jason Serviss wrote:
> Hi Shakell,
> 
> You have sent your enquiry to the R package development mailing list. You will most likely get more help and relevant answers if you send to the R-help mailing list since here we are mostly (totally) focused on package development.
> 
> You can find the mailing lists and their descriptions here: https://www.r-project.org/mail.html

Shakeel was (incorrectly) sent here from there.  Since then other advice 
has appeared:  probably an RStudio forum or Stack Overflow is his best bet.

Duncan Murdoch

> 
> Regards,
> Jason
> 
> 
> On 13 Jun 2018, at 16:31, Shakeel Suleman <Shakeel.Suleman at phe.gov.uk<mailto:Shakeel.Suleman at phe.gov.uk>> wrote:
> 
> I am relatively new to R and was wondering if someone could advise me on presenting tables in R Markdown for Word. I would like to present a simple table of counts, with column 1 representing name of an organisation (and last row called "All organisations") and another four columns representing the most recent four week period (e.g. week 21, 22, 23, 24) and a final total column, as illustrated below. The actual data is just counts (e.g. 4, 5, 8, widgets produced, number of people off sick etc).
> 
> My question is: can this be done to a publication quality standard. I have tried Pander, but that adds "Sum" instead of All Organisations and 4 Week Total and doesn't look particularly good.
> 
> 
> 
> Week
> 
> 
> 
> 20
> 
> 21
> 
> 22
> 
> 23
> 
> 4 week total
> 
> Organisation
> 
> 6
> 
> 6
> 
> 1
> 
> 1
> 
> 14
> 
> ABC
> 
> 2
> 
> 4
> 
> 1
> 
> 5
> 
> 12
> 
> DCE
> 
> 0
> 
> 5
> 
> 1
> 
> 5
> 
> 11
> 
> EFG
> 
> 3
> 
> 6
> 
> 3
> 
> 5
> 
> 17
> 
> HIJ
> 
> 1
> 
> 8
> 
> 3
> 
> 2
> 
> 14
> 
> All Organizations
> 
> 12
> 
> 29
> 
> 9
> 
> 18
> 
> 68
> 
> 
> 
> 
> Kind regards,
> 
> Shakeel
> 
> 
> **************************************************************************
> The information contained in the EMail and any attachments is confidential and intended solely and for the attention and use of the named addressee(s). It may not be disclosed to any other person without the express authority of Public Health England, or the intended recipient, or both. If you are not the intended recipient, you must not disclose, copy, distribute or retain this message or any part of it. This footnote also confirms that this EMail has been swept for computer viruses by Symantec.Cloud, but please re-sweep any attachments before opening or saving. http://www.gov.uk/PHE
> **************************************************************************
> [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Thu Jun 14 17:46:03 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Thu, 14 Jun 2018 17:46:03 +0200
Subject: [R-pkg-devel] Checksums changed on CRAN without any visible
 modifications to files.
In-Reply-To: <CAO1zAVaH_m6jB=6J+zSdRSbcYxFZ+ta4y1rDPTyA6E71dJDKHQ@mail.gmail.com>
References: <CAO1zAVamKmQtaPSgetWY3WVxVa_Ucg1irxaxUen_a0UfohpBwQ@mail.gmail.com>
 <743b6a26-7632-45d2-57a4-20b5ceb475b1@statistik.tu-dortmund.de>
 <CAO1zAVaH_m6jB=6J+zSdRSbcYxFZ+ta4y1rDPTyA6E71dJDKHQ@mail.gmail.com>
Message-ID: <4d74b04e-c350-5c5b-e270-310965972675@statistik.tu-dortmund.de>



On 13.06.2018 15:40, Joris Meys wrote:
> 
> 
> On Wed, Jun 13, 2018 at 3:16 PM, Uwe Ligges 
> <ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>> wrote:
> 
> 
>     When CRAN repacks and changes the DESCRIPTION file, the checksums
>     change, of course.
> 
>     Best,
>     Uwe Ligges
> 
> 
> Dear Uwe,
> 
> I understood that from the previous issue. In this case however, none of 
> the files -including the DESCRIPTION file- were changed. Am I right in 
> suspecting that a package is repacked when moved to the archive?

No, we do not repack generally then. Perhaps the package got orphaned?


Which package / tarball were you talking about? I can take a look why 
that one was changed and inspect why the checksum changed.

Best,
Uwe Ligges



  I
> suspect that the tool used to repack the package is using gzip, and it 
> is possible to repack without adding a timestamp as explained here :
> 
> https://serverfault.com/questions/110208/different-md5sums-for-same-tar-contents
> 
> I can explain the different checksums when some things are changed to 
> our HPC sysadmins, but they have -understandibly- difficulties with 
> checksums changing for released source tarballs. Is it possible to adapt 
> the archiving so that at least for identical tarballs the md5 sums 
> remain the same? Or if you have other suggestions to deal with this 
> without having to change hardcoded checksums in the easybuild repos, 
> that would be very welcome too.
> 
> Cheers
> Joris
> 
> -- 
> Joris Meys
> Statistical consultant
> 
> Department of Data Analysis and Mathematical Modelling
> Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
> 
> tel: +32 (0)9 264 61 79
> -----------
> Biowiskundedagen 2017-2018
> http://www.biowiskundedagen.ugent.be/
> 
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


From Jori@@Mey@ @ending from ugent@be  Thu Jun 14 18:55:16 2018
From: Jori@@Mey@ @ending from ugent@be (Joris Meys)
Date: Thu, 14 Jun 2018 18:55:16 +0200
Subject: [R-pkg-devel] Checksums changed on CRAN without any visible
 modifications to files.
In-Reply-To: <4d74b04e-c350-5c5b-e270-310965972675@statistik.tu-dortmund.de>
References: <CAO1zAVamKmQtaPSgetWY3WVxVa_Ucg1irxaxUen_a0UfohpBwQ@mail.gmail.com>
 <743b6a26-7632-45d2-57a4-20b5ceb475b1@statistik.tu-dortmund.de>
 <CAO1zAVaH_m6jB=6J+zSdRSbcYxFZ+ta4y1rDPTyA6E71dJDKHQ@mail.gmail.com>
 <4d74b04e-c350-5c5b-e270-310965972675@statistik.tu-dortmund.de>
Message-ID: <CAO1zAVZsiZFSA+qNv=4c8jXbjEZ_LDXKm0wkUpUUYUdJZFFdDA@mail.gmail.com>

Dear Uwe,

Thank you for willing to take a look. In the report it was about the
following tarballs :

pkgmaker_0.22.tar.gz
rngtools_1.2.4.tar.gz
RcppProgress_0.4.tar.gz

Our sysadmin tried diff -ru, but couldn't find any difference in the text
files.

Cheers
Joris

On Thu, Jun 14, 2018 at 5:46 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de
> wrote:

>
>
> On 13.06.2018 15:40, Joris Meys wrote:
>
>>
>>
>> On Wed, Jun 13, 2018 at 3:16 PM, Uwe Ligges <
>> ligges at statistik.tu-dortmund.de <mailto:ligges at statistik.tu-dortmund.de>>
>> wrote:
>>
>>
>>     When CRAN repacks and changes the DESCRIPTION file, the checksums
>>     change, of course.
>>
>>     Best,
>>     Uwe Ligges
>>
>>
>> Dear Uwe,
>>
>> I understood that from the previous issue. In this case however, none of
>> the files -including the DESCRIPTION file- were changed. Am I right in
>> suspecting that a package is repacked when moved to the archive?
>>
>
> No, we do not repack generally then. Perhaps the package got orphaned?
>
>
> Which package / tarball were you talking about? I can take a look why that
> one was changed and inspect why the checksum changed.
>
> Best,
> Uwe Ligges
>
>
>
>  I
>
>> suspect that the tool used to repack the package is using gzip, and it is
>> possible to repack without adding a timestamp as explained here :
>>
>> https://serverfault.com/questions/110208/different-md5sums-
>> for-same-tar-contents
>>
>> I can explain the different checksums when some things are changed to our
>> HPC sysadmins, but they have -understandibly- difficulties with checksums
>> changing for released source tarballs. Is it possible to adapt the
>> archiving so that at least for identical tarballs the md5 sums remain the
>> same? Or if you have other suggestions to deal with this without having to
>> change hardcoded checksums in the easybuild repos, that would be very
>> welcome too.
>>
>> Cheers
>> Joris
>>
>> --
>> Joris Meys
>> Statistical consultant
>>
>> Department of Data Analysis and Mathematical Modelling
>> Ghent University
>> Coupure Links 653, B-9000 Gent (Belgium)
>> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+
>> Gent,%C2%A0Belgium&entry=gmail&source=g>
>>
>> tel: +32 (0)9 264 61 79
>> -----------
>> Biowiskundedagen 2017-2018
>> http://www.biowiskundedagen.ugent.be/
>>
>> -------------------------------
>> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>>
>


-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From @n248 @ending from cornell@edu  Fri Jun 15 07:46:46 2018
From: @n248 @ending from cornell@edu (SN248)
Date: Fri, 15 Jun 2018 01:46:46 -0400
Subject: [R-pkg-devel] R package example fail for 32 bit Windows only
Message-ID: <CAP6q79HyhUHTsZKcX9TDXjHDnUjn7uko=ioeLFC5Wbm2bMLyCQ@mail.gmail.com>

Dear all

I am trying to develop a package which provides an interface to the
SUNDIALS ODE solving C library in R. I am using Rcpp to provide this
interface.

The package compiles and runs example on my platform (macOS), Debian Linux
(checked via r-hub) and it compiles on Windows (checked via win-builder).

Earlier, the examples did not run on Windows at all and they crashed the R
session. For some reason, the code was not able to run macros defined in
SUNDIALS code. I have fixed that problem now and the package compiles and
runs the example on 64-bit platform.

However, even though it compiles on 32-bit platform, it fails to run the
example on it (checked via win-builder). Can anyone help me in
understanding the issue and how to resolve it?

Also, is it absolutely necessary for the example to run on 32-bit platform
for CRAN submission?

The package source code can be found at - https://github.com/sn248/sundialr

Thank you
SN

	[[alternative HTML version deleted]]


From lbu@ett @ending from gm@il@com  Fri Jun 15 08:24:20 2018
From: lbu@ett @ending from gm@il@com (Lorenzo Busetto)
Date: Fri, 15 Jun 2018 08:24:20 +0200
Subject: [R-pkg-devel] Corrections on build errors: do I need to bump
 version?
Message-ID: <CAM1G4ST9T22qZj3NyqTJV4KA=9A5TzeD1aRD+0kvH4gMpDSLHQ@mail.gmail.com>

Hi all,

   I received a message from CRAN asking to solve some build problems on
Debian introduced in a recent package submission (MODIStsp 1.3.4) due to a
test writing in the user's filespace (ops...).

 After making the required changes, do I need to resubmit  with the same
version number, or submit a new version?

Thanks in advance,

Lorenzo

	[[alternative HTML version deleted]]


From r@turner @ending from @uckl@nd@@c@nz  Fri Jun 15 08:58:37 2018
From: r@turner @ending from @uckl@nd@@c@nz (Rolf Turner)
Date: Fri, 15 Jun 2018 18:58:37 +1200
Subject: [R-pkg-devel] 
 [FORGED] Corrections on build errors: do I need to bump version?
In-Reply-To: <CAM1G4ST9T22qZj3NyqTJV4KA=9A5TzeD1aRD+0kvH4gMpDSLHQ@mail.gmail.com>
References: <CAM1G4ST9T22qZj3NyqTJV4KA=9A5TzeD1aRD+0kvH4gMpDSLHQ@mail.gmail.com>
Message-ID: <0101aa9f-a3a0-474e-a70a-6bdaa439cf3f@auckland.ac.nz>


On 15/06/18 18:24, Lorenzo Busetto wrote:

> Hi all,
> 
>     I received a message from CRAN asking to solve some build problems on
> Debian introduced in a recent package submission (MODIStsp 1.3.4) due to a
> test writing in the user's filespace (ops...).
> 
>   After making the required changes, do I need to resubmit  with the same
> version number, or submit a new version?
> 
> Thanks in advance,

I am in no sense an expert, but IMHO it never *hurts* to bump the 
version number.  (And it is *probably* necessary to do so in your 
circumstances.)  It is probably prudent to make a note in the Changelog 
(and it is also prudent to keep a Changelog!) to the effect "Version 
i.j-k never installed on CRAN".

But as I said, I am no expert.  Younger and wiser heads may chip in with 
advice that is more sound.

cheers,

Rolf Turner

-- 
Technical Editor ANZJS
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From bbolker @ending from gm@il@com  Fri Jun 15 14:59:07 2018
From: bbolker @ending from gm@il@com (Ben Bolker)
Date: Fri, 15 Jun 2018 08:59:07 -0400
Subject: [R-pkg-devel] 
 [FORGED] Corrections on build errors: do I need to bump version?
In-Reply-To: <0101aa9f-a3a0-474e-a70a-6bdaa439cf3f@auckland.ac.nz>
References: <CAM1G4ST9T22qZj3NyqTJV4KA=9A5TzeD1aRD+0kvH4gMpDSLHQ@mail.gmail.com>
 <0101aa9f-a3a0-474e-a70a-6bdaa439cf3f@auckland.ac.nz>
Message-ID: <CABghstSRjJxDShodifR+MW3ZR_4UNix8oq7JP2iDpaCKih1z5A@mail.gmail.com>

I don't know about "younger and wiser", but I agree; I've always
bumped the version number in this situation.

On Fri, Jun 15, 2018 at 2:58 AM, Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
> On 15/06/18 18:24, Lorenzo Busetto wrote:
>
>> Hi all,
>>
>>     I received a message from CRAN asking to solve some build problems on
>> Debian introduced in a recent package submission (MODIStsp 1.3.4) due to a
>> test writing in the user's filespace (ops...).
>>
>>   After making the required changes, do I need to resubmit  with the same
>> version number, or submit a new version?
>>
>> Thanks in advance,
>
>
> I am in no sense an expert, but IMHO it never *hurts* to bump the version
> number.  (And it is *probably* necessary to do so in your circumstances.)
> It is probably prudent to make a note in the Changelog (and it is also
> prudent to keep a Changelog!) to the effect "Version i.j-k never installed
> on CRAN".
>
> But as I said, I am no expert.  Younger and wiser heads may chip in with
> advice that is more sound.
>
> cheers,
>
> Rolf Turner
>
> --
> Technical Editor ANZJS
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Fri Jun 15 15:07:28 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Fri, 15 Jun 2018 15:07:28 +0200
Subject: [R-pkg-devel] 
 [FORGED] Corrections on build errors: do I need to bump version?
In-Reply-To: <CABghstSRjJxDShodifR+MW3ZR_4UNix8oq7JP2iDpaCKih1z5A@mail.gmail.com>
References: <CAM1G4ST9T22qZj3NyqTJV4KA=9A5TzeD1aRD+0kvH4gMpDSLHQ@mail.gmail.com>
 <0101aa9f-a3a0-474e-a70a-6bdaa439cf3f@auckland.ac.nz>
 <CABghstSRjJxDShodifR+MW3ZR_4UNix8oq7JP2iDpaCKih1z5A@mail.gmail.com>
Message-ID: <23517f69-c790-870f-2b5b-3cd9298c62e4@statistik.tu-dortmund.de>

You alsways have to increase the version number once you change content.

Best,
Uwe Ligges




On 15.06.2018 14:59, Ben Bolker wrote:
> I don't know about "younger and wiser", but I agree; I've always
> bumped the version number in this situation.
> 
> On Fri, Jun 15, 2018 at 2:58 AM, Rolf Turner <r.turner at auckland.ac.nz> wrote:
>>
>> On 15/06/18 18:24, Lorenzo Busetto wrote:
>>
>>> Hi all,
>>>
>>>      I received a message from CRAN asking to solve some build problems on
>>> Debian introduced in a recent package submission (MODIStsp 1.3.4) due to a
>>> test writing in the user's filespace (ops...).
>>>
>>>    After making the required changes, do I need to resubmit  with the same
>>> version number, or submit a new version?
>>>
>>> Thanks in advance,
>>
>>
>> I am in no sense an expert, but IMHO it never *hurts* to bump the version
>> number.  (And it is *probably* necessary to do so in your circumstances.)
>> It is probably prudent to make a note in the Changelog (and it is also
>> prudent to keep a Changelog!) to the effect "Version i.j-k never installed
>> on CRAN".
>>
>> But as I said, I am no expert.  Younger and wiser heads may chip in with
>> advice that is more sound.
>>
>> cheers,
>>
>> Rolf Turner
>>
>> --
>> Technical Editor ANZJS
>> Department of Statistics
>> University of Auckland
>> Phone: +64-9-373-7599 ext. 88276
>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From m@riu@@hofert @ending from uw@terloo@c@  Sat Jun 16 21:46:13 2018
From: m@riu@@hofert @ending from uw@terloo@c@ (Marius Hofert)
Date: Sat, 16 Jun 2018 15:46:13 -0400
Subject: [R-pkg-devel] Recommended procedure for solving "Additional issues"?
Message-ID: <CAM3-KjYFpKY+sd_aGfk69uKe1tGmVFnOskDQdDcG4BevMmmxLw@mail.gmail.com>

Dear DevelopeRs,

Is there a recommended procedure for addressing "Additional issues" if
they appear on CRAN checks?

Say you have some C code in a package which checks fine (Status OK for
all flavors) but shows "Additional issues" due to a potential memory
problems. One can compile an R version configured with valgrind
support and run a corresponding check on the package, but that
a) ... sometimes shows false positives (on Mac, for example, as some
have reported, see
https://stackoverflow.com/questions/29312335/valgrind-on-os-x-yosemite-giving-bogus-errors)
b) ... sometimes doesn't provide useful information (at least not in a
case I recently ran into).
c) Also, one can virtually not always check for all the "Additional
issues" that might appear *before* submitting a package to CRAN -- or
can one?

Concerning c), it would be great if there was a way to 'see' the
"Additional issues" *before* submitting to CRAN (like a winbuilder or
so). Is there? (I couldn't find anything in WRE). Otherwise, one can
do the usual (like --as-cran), hope everything is fine, wait until the
CRAN checks are reported, and then, if there are problems, carefully
look at the code again, try and find the problem and resubmit in the
hope that the problem is fixed => but that's not a good 'procedure' as
it creates more work for CRAN etc.

Am I missing anything?

Thanks & cheers,
Marius


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Sun Jun 17 08:13:34 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Sun, 17 Jun 2018 08:13:34 +0200
Subject: [R-pkg-devel] Recommended procedure for solving "Additional
 issues"?
In-Reply-To: <CAM3-KjYFpKY+sd_aGfk69uKe1tGmVFnOskDQdDcG4BevMmmxLw@mail.gmail.com>
References: <CAM3-KjYFpKY+sd_aGfk69uKe1tGmVFnOskDQdDcG4BevMmmxLw@mail.gmail.com>
Message-ID: <5bfa0705-2745-b6c2-92e6-918ccc07d170@statistik.tu-dortmund.de>



On 16.06.2018 21:46, Marius Hofert wrote:
> Dear DevelopeRs,
> 
> Is there a recommended procedure for addressing "Additional issues" if
> they appear on CRAN checks?
> 
> Say you have some C code in a package which checks fine (Status OK for
> all flavors) but shows "Additional issues" due to a potential memory
> problems. One can compile an R version configured with valgrind
> support and run a corresponding check on the package, but that
> a) ... sometimes shows false positives (on Mac, for example, as some
> have reported, see
> https://stackoverflow.com/questions/29312335/valgrind-on-os-x-yosemite-giving-bogus-errors)
> b) ... sometimes doesn't provide useful information (at least not in a
> case I recently ran into).
> c) Also, one can virtually not always check for all the "Additional
> issues" that might appear *before* submitting a package to CRAN -- or
> can one?
> 
> Concerning c), it would be great if there was a way to 'see' the
> "Additional issues" *before* submitting to CRAN (like a winbuilder or
> so). Is there? (I couldn't find anything in WRE). Otherwise, one can
> do the usual (like --as-cran), hope everything is fine, wait until the
> CRAN checks are reported, and then, if there are problems, carefully
> look at the code again, try and find the problem and resubmit in the
> hope that the problem is fixed => but that's not a good 'procedure' as
> it creates more work for CRAN etc.


Well, you can try to run with valgrind and the sanitizers before you 
submit to CRAN yourself. Or use R-hub which offers to use  builds with 
enabled sanitizers.

But you are right, running with valgrind + sanitizers + rchk (protection 
stack imbalance checks) + different BLAS installations is not feasible 
in case you do not suspect problems.

That is also the reason why CRAN does not always detect these issues in 
the incoming checks, as these checks run only on different specific 
machines in batches.

Best,
Uwe Ligges



> 
> Am I missing anything?
> 
> Thanks & cheers,
> Marius
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From c@rmen@livi @ending from ifom@eu  Mon Jun 18 11:33:32 2018
From: c@rmen@livi @ending from ifom@eu (Carmen M. Livi)
Date: Mon, 18 Jun 2018 11:33:32 +0200
Subject: [R-pkg-devel] =?utf-8?q?spp_package_error_=22Package_required_bu?=
 =?utf-8?b?dCBub3QgYXZhaWxhYmxlOiDigJhSc2FtdG9vbHPigJki?=
Message-ID: <c32c51da-1890-edef-b8ee-28921ee15e67@ifom.eu>

Hi all,

I have a question regarding the CRAN checks for package spp:

https://cran.r-project.org/web/checks/check_results_spp.html

We didn't update or change anything in the package, but since a few 
weeks the CRAN check for OSX gives an error saying that a dependency is 
not available:

 ?Package required but not available: ?Rsamtools?

Rsamtools is available on Bioconductor and the error shows up only on 
MAC. Is Rsamtools missing in the repository of the architecture?

Thanks,
Carmen

	[[alternative HTML version deleted]]


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Mon Jun 18 11:38:51 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Mon, 18 Jun 2018 11:38:51 +0200
Subject: [R-pkg-devel] 
 =?utf-8?q?spp_package_error_=22Package_required_bu?=
 =?utf-8?b?dCBub3QgYXZhaWxhYmxlOiDigJhSc2FtdG9vbHPigJki?=
In-Reply-To: <c32c51da-1890-edef-b8ee-28921ee15e67@ifom.eu>
References: <c32c51da-1890-edef-b8ee-28921ee15e67@ifom.eu>
Message-ID: <f5ad2dc9-b8ac-8990-7fa9-0f0807969854@statistik.tu-dortmund.de>

Perhaps ask Simon Urbanek, the CRAN Mac maintainer, what is going on here.

Best,
Uwe Ligges




On 18.06.2018 11:33, Carmen M. Livi wrote:
> Hi all,
> 
> I have a question regarding the CRAN checks for package spp:
> 
> https://cran.r-project.org/web/checks/check_results_spp.html
> 
> We didn't update or change anything in the package, but since a few
> weeks the CRAN check for OSX gives an error saying that a dependency is
> not available:
> 
>   ?Package required but not available: ?Rsamtools?
> 
> Rsamtools is available on Bioconductor and the error shows up only on
> MAC. Is Rsamtools missing in the repository of the architecture?
> 
> Thanks,
> Carmen
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From c@rmen@livi @ending from ifom@eu  Mon Jun 18 14:11:59 2018
From: c@rmen@livi @ending from ifom@eu (Carmen Livi)
Date: Mon, 18 Jun 2018 12:11:59 +0000
Subject: [R-pkg-devel] 
 =?utf-8?q?spp_package_error_=22Package_required_b_?=
 =?utf-8?b?dXQgbm90IGF2YWlsYWJsZTog4oCYUnNhbXRvb2xz4oCZIg==?=
In-Reply-To: <f5ad2dc9-b8ac-8990-7fa9-0f0807969854@statistik.tu-dortmund.de>
Message-ID: <1c5231239c74cd0a6ae298849939a149@ifom.eu>

Dear Simon Urbanek,

Since a few weeks I am getting a CRAN-check error under OSX for the package
"spp" (https://cran.r-project.org/web/checks/check_results_spp.html):

"Package required but not available: ?Rsamtools?

Rsamtools is available on Bioconductor and the error shows up only on MAC. Is
it possible that Rsamtools is missing in the repository of the architecture?

Thank you very much,
Carmen



 Uwe Ligges (ligges at statistik.tu-dortmund.de) wrote:
 >
 > Perhaps ask Simon Urbanek, the CRAN Mac maintainer, what is going on here.
 >
 > Best,
 > Uwe Ligges
 >
 >
 >
 >
 > On 18.06.2018 11:33, Carmen M. Livi wrote:
 > > Hi all,
 > >
 > > I have a question regarding the CRAN checks for package spp:
 > >
 > > https://cran.r-project.org/web/checks/check_results_spp.html
 > >
 > > We didn't update or change anything in the package, but since a few
 > > weeks the CRAN check for OSX gives an error saying that a dependency is
 > > not available:
 > >
 > > ?Package required but not available: ?Rsamtools?
 > >
 > > Rsamtools is available on Bioconductor and the error shows up only on
 > > MAC. Is Rsamtools missing in the repository of the architecture?
 > >
 > > Thanks,
 > > Carmen
 > >
 > > [[alternative HTML version deleted]]
 > >
 > > ______________________________________________
 > > R-package-devel at r-project.org mailing list
 > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
 > >
 >

-- 
Carmen Maria Livi
Post Doctoral Researcher
Ferrari Lab
IFOM - Fondazione Istituto firc Oncologia Molecolare
Via Adamello 16
20139 Milano, Italy


From m@riu@@hofert @ending from uw@terloo@c@  Mon Jun 18 16:38:22 2018
From: m@riu@@hofert @ending from uw@terloo@c@ (Marius Hofert)
Date: Mon, 18 Jun 2018 10:38:22 -0400
Subject: [R-pkg-devel] Recommended procedure for solving "Additional
 issues"?
In-Reply-To: <33d49fe3eff34d0f8122e550785c65e2@connhm02.connect.uwaterloo.ca>
References: <CAM3-KjYFpKY+sd_aGfk69uKe1tGmVFnOskDQdDcG4BevMmmxLw@mail.gmail.com>
 <33d49fe3eff34d0f8122e550785c65e2@connhm02.connect.uwaterloo.ca>
Message-ID: <CAM3-KjYV=DxR15jsWm20foJziQzyAi0X4DFeX_Ag_dWJQwVL0Q@mail.gmail.com>

On Sun, Jun 17, 2018 at 2:13 AM Uwe Ligges
<ligges at statistik.tu-dortmund.de> wrote:
>
>
>
> On 16.06.2018 21:46, Marius Hofert wrote:
> > Dear DevelopeRs,
> >
> > Is there a recommended procedure for addressing "Additional issues" if
> > they appear on CRAN checks?
> >
> > Say you have some C code in a package which checks fine (Status OK for
> > all flavors) but shows "Additional issues" due to a potential memory
> > problems. One can compile an R version configured with valgrind
> > support and run a corresponding check on the package, but that
> > a) ... sometimes shows false positives (on Mac, for example, as some
> > have reported, see
> > https://stackoverflow.com/questions/29312335/valgrind-on-os-x-yosemite-giving-bogus-errors)
> > b) ... sometimes doesn't provide useful information (at least not in a
> > case I recently ran into).
> > c) Also, one can virtually not always check for all the "Additional
> > issues" that might appear *before* submitting a package to CRAN -- or
> > can one?
> >
> > Concerning c), it would be great if there was a way to 'see' the
> > "Additional issues" *before* submitting to CRAN (like a winbuilder or
> > so). Is there? (I couldn't find anything in WRE). Otherwise, one can
> > do the usual (like --as-cran), hope everything is fine, wait until the
> > CRAN checks are reported, and then, if there are problems, carefully
> > look at the code again, try and find the problem and resubmit in the
> > hope that the problem is fixed => but that's not a good 'procedure' as
> > it creates more work for CRAN etc.
>
>
> Well, you can try to run with valgrind and the sanitizers before you
> submit to CRAN yourself.

Hi Uwe,

thanks for helping.

valgrind reported false positives, and 'ASAN' I still struggle with
(setting the flags in ~/.R/Makevars as in WRE led me to some
'Interceptors not working' errors -- might post a question on this
one, not sure if I understood that part correctly).

> Or use R-hub which offers to use  builds with
> enabled sanitizers.

I tried that, thanks for this hint. I got some weird bioconductor
errors (which seem to have nothing to do with my package). I contacted
admin at r-hub.io but didn't get a response yet (don't think that's the
right way to contact them, but found no other way...).

>
> But you are right, running with valgrind + sanitizers + rchk (protection
> stack imbalance checks) + different BLAS installations is not feasible
> in case you do not suspect problems.
>
> That is also the reason why CRAN does not always detect these issues in
> the incoming checks, as these checks run only on different specific
> machines in batches.

Would of course be great if we could use exactly the same machines, so
uploading the .tar.gz would reproduce the 'Additional issues' and one
could try that until all issues are resolved (without the need for
local tinkering) before officially submitting a package to CRAN.

Cheers,
M

>
> Best,
> Uwe Ligges
>
>
>
> >
> > Am I missing anything?
> >
> > Thanks & cheers,
> > Marius
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >


From m@riu@@hofert @ending from uw@terloo@c@  Mon Jun 18 17:53:33 2018
From: m@riu@@hofert @ending from uw@terloo@c@ (Marius Hofert)
Date: Mon, 18 Jun 2018 11:53:33 -0400
Subject: [R-pkg-devel] How to check memory access (understanding Section 4.3
 WRE)
Message-ID: <CAM3-Kjb6pFpEYdzGRD7PiRPr+_hxp+k2tmpEFgquNP4FXs2Aow@mail.gmail.com>

Hi,

I tried to understand how to check memory access of an R package with
C code; see https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Checking-memory-access

I'm about 90% sure I understood WRE Section 4.3.2 about valgrind. In essence:
1) When configuring R before make, use the configure flags '-C
--with-valgrind-instrumentation=2 --with-system-valgrind-headers'
   to get a memory-profiling-enabled version of R. This I found on
https://www.stats.ox.ac.uk/pub/bdr/memtests/README.txt
   and it's also described at the bottom of
https://cran.r-project.org/doc/manuals/r-release/R-admin.html#Configuration-options
2) Then use 'R CMD check --use-valgrind' or directly check examples via
   'R -d "valgrind --tool=memcheck --leak-check=full" --vanilla < mypkg-Ex.R'
I also seems to work (but reports false positives for Mac as others
have reported).

I'm still struggling with 4.3.3, see
https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Using-Address-Sanitizer.
It says "The simplest way to make use of this is to build a version of
R with something like..." and
CC="gcc -std=gnu99 -fsanitize=address"
CFLAGS="-fno-omit-frame-pointer -g -O2 -Wall -pedantic -mtune=native"
I set these flags via 'configure CC="gcc -std=gnu99
-fsanitize=address" CFLAGS="-fno-omit-frame-pointer -g -O2 -Wall
-pedantic -mtune=native"' before 'make'. I used R-devel for it and the
installation was fine. Is there any option 'R CMD check' would need to
obtain (like the '--use-valgrind' above)? 'R CMD check mypkg.tar.gz'
doesn't seem to do any memory access checking. Would I also need to
set "MAIN_LDFLAGS=-fsanitize=address" for configure? (it's a bit
unclear from WRE whether this applies to both of the approaches
mentioned or just to the one based on Makevars)

I also tried the second approach based on "~/.R/Makevars" and put the
following in "~/.R/Makevars" as suggested in WRE:
CC = gcc -std=gnu99 -fsanitize=address -fno-omit-frame-pointer
CXX = g++ -fsanitize=address -fno-omit-frame-pointer
F77 = gfortran -fsanitize=address
FC = gfortran -fsanitize=address
'R CMD check mypkg.tar.gz' then fails and 00install.out shows (on
macOS 10.13.5, R-3.5.0 here):

* installing *source* package ?mypkg? ...
** libs
...
* R
** demo
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded
sh: line 1: 14016 Abort trap: 6
'/usr/local/R/R-3.5.0_build/bin/R' --no-save --slave 2>&1 <
'/var/folders/cb/drz6kv896317dzbg52flzn_r0000gn/T//RtmpTha0EH/file369f755a95ad'
==14016==ERROR: Interceptors are not working. This may be because
AddressSanitizer is loaded too late (e.g. via dlopen). Please launch
the executable with:
DYLD_INSERT_LIBRARIES=/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/9.1.0/lib/darwin/libclang_rt.asan_osx_dynamic.dylib
"interceptors not installed" && 0
ERROR: loading failed
* removing ?/Users/mhofert/pro/mypkg/mypkg.Rcheck/mypkg?
Any ideas where the 'DYLD_INSERT_LIBRARIES' should go?

Thanks & cheers,
Marius


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Mon Jun 18 20:16:30 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Mon, 18 Jun 2018 20:16:30 +0200
Subject: [R-pkg-devel] Recommended procedure for solving "Additional
 issues"?
In-Reply-To: <CAM3-KjYV=DxR15jsWm20foJziQzyAi0X4DFeX_Ag_dWJQwVL0Q@mail.gmail.com>
References: <CAM3-KjYFpKY+sd_aGfk69uKe1tGmVFnOskDQdDcG4BevMmmxLw@mail.gmail.com>
 <33d49fe3eff34d0f8122e550785c65e2@connhm02.connect.uwaterloo.ca>
 <CAM3-KjYV=DxR15jsWm20foJziQzyAi0X4DFeX_Ag_dWJQwVL0Q@mail.gmail.com>
Message-ID: <c6715f43-781e-ed13-7bdf-5af4d0e4fbb9@statistik.tu-dortmund.de>



On 18.06.2018 16:38, Marius Hofert wrote:
> On Sun, Jun 17, 2018 at 2:13 AM Uwe Ligges
> <ligges at statistik.tu-dortmund.de> wrote:
>>
>>
>>
>> On 16.06.2018 21:46, Marius Hofert wrote:
>>> Dear DevelopeRs,
>>>
>>> Is there a recommended procedure for addressing "Additional issues" if
>>> they appear on CRAN checks?
>>>
>>> Say you have some C code in a package which checks fine (Status OK for
>>> all flavors) but shows "Additional issues" due to a potential memory
>>> problems. One can compile an R version configured with valgrind
>>> support and run a corresponding check on the package, but that
>>> a) ... sometimes shows false positives (on Mac, for example, as some
>>> have reported, see
>>> https://stackoverflow.com/questions/29312335/valgrind-on-os-x-yosemite-giving-bogus-errors)
>>> b) ... sometimes doesn't provide useful information (at least not in a
>>> case I recently ran into).
>>> c) Also, one can virtually not always check for all the "Additional
>>> issues" that might appear *before* submitting a package to CRAN -- or
>>> can one?
>>>
>>> Concerning c), it would be great if there was a way to 'see' the
>>> "Additional issues" *before* submitting to CRAN (like a winbuilder or
>>> so). Is there? (I couldn't find anything in WRE). Otherwise, one can
>>> do the usual (like --as-cran), hope everything is fine, wait until the
>>> CRAN checks are reported, and then, if there are problems, carefully
>>> look at the code again, try and find the problem and resubmit in the
>>> hope that the problem is fixed => but that's not a good 'procedure' as
>>> it creates more work for CRAN etc.
>>
>>
>> Well, you can try to run with valgrind and the sanitizers before you
>> submit to CRAN yourself.
> 
> Hi Uwe,
> 
> thanks for helping.
> 
> valgrind reported false positives, and 'ASAN' I still struggle with
> (setting the flags in ~/.R/Makevars as in WRE led me to some
> 'Interceptors not working' errors -- might post a question on this
> one, not sure if I understood that part correctly).
> 
>> Or use R-hub which offers to use  builds with
>> enabled sanitizers.
> 
> I tried that, thanks for this hint. I got some weird bioconductor
> errors (which seem to have nothing to do with my package). I contacted
> admin at r-hub.io but didn't get a response yet (don't think that's the
> right way to contact them, but found no other way...).

Not sure, Gabor Czardi is a main maintainer of that service, I am sure 
he will respond quickly.




>>
>> But you are right, running with valgrind + sanitizers + rchk (protection
>> stack imbalance checks) + different BLAS installations is not feasible
>> in case you do not suspect problems.
>>
>> That is also the reason why CRAN does not always detect these issues in
>> the incoming checks, as these checks run only on different specific
>> machines in batches.
> 
> Would of course be great if we could use exactly the same machines, so
> uploading the .tar.gz would reproduce the 'Additional issues' and one
> could try that until all issues are resolved (without the need for
> local tinkering) before officially submitting a package to CRAN.

Yes, but unfortunately that is not possible for the machines we are 
talking about.

Best,
Uwe


> 
> Cheers,
> M
> 
>>
>> Best,
>> Uwe Ligges
>>
>>
>>
>>>
>>> Am I missing anything?
>>>
>>> Thanks & cheers,
>>> Marius
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>


From profjcn@@h @ending from gm@il@com  Wed Jun 20 20:56:10 2018
From: profjcn@@h @ending from gm@il@com (J C Nash)
Date: Wed, 20 Jun 2018 14:56:10 -0400
Subject: [R-pkg-devel] Concern that reverse dependency checking currently
 unreliable
Message-ID: <b17e39cc-47d6-9eda-df2a-1d616f37bf4b@gmail.com>

For the past few weeks I've been struggling to check a new version of optimx that gives
a major upgrade to the 2013 version currently on CRAN and subsumes several other packages.

It seems to work fine, and pass Win-builder, R CMD check etc.

However, both devtools and cran reverse dependency checks give multiple errors when
run through their respective special commands. Mostly the packages using optimx are
failing to install or otherwise stop (wrong testthat version etc.). When I check
manually (if package installs) that package XXX passes R CMD check with new
optimx installed, it invariably does. The automated checks -- given that optimx
is widely used -- take several hours per try.

Since it "fails" the cran reverse check, I'm not getting by the pre-test for cran
submission. CRAN maintainers have not responded, likely because they are swamped.

So I'm wondering if there is something amiss with either the checking tools or,
more likely, that the upgrade to R 3.5 has put some wrinkles in the package collection,
and, in particular, what I should do to provide the new package. I am rather
reluctant to join the growing crowd on github, but may have to if CRAN cannot
be updated.

Ideas welcome.

John Nash


From vincentv@nhee@ @ending from gm@il@com  Mon Jun 25 21:21:54 2018
From: vincentv@nhee@ @ending from gm@il@com (Vincent van Hees)
Date: Mon, 25 Jun 2018 21:21:54 +0200
Subject: [R-pkg-devel] How to handle deprecated package dependency? 2
 suggestions 1 question
Message-ID: <CALnEB17eGh=+0eQqSAQbh3F3KyGGXwMwVvx-T5uAhM2BpG4w4A@mail.gmail.com>

Dear all,

One of my package dependencies was taken from CRAN a month ago, with
the CRAN message: "...check problems were not corrected despite
reminders" as displayed on the deprecated CRAN package page. I
immediately got in touch with the deprecated package maintainer and
learnt that he is trying to resolve the issue(s).

My suggestions/questions:

1 - Would it be an idea for CRAN to inform reverse dependency package
maintainers when a package is at risk of being taken from CRAN? For
example, by cc-ing them in the warning message? I think such a
heads-up could have helped to prevent the situation.

2 - At the moment the CRAN page for the deprecated package does not
tell me what I can do to help fix the issue:

"Package ?GENEAread? was removed from the CRAN repository.
Formerly available versions can be obtained from the archive.
Archived on 2018-05-25 as check problems were not corrected despite reminders".

Would it be an idea to display what those problems were to make it
easier for others, like me, to help fix the issue(s)?

3 - Can you advise on how I can help address the situation, such that
I can upload a much needed update to my own CRAN package GGIR? The
approaches I can think of are: (A) Help the deprecated package
maintainer to fix their issues, which may not be easy, (B) copy the
old code of the deprecated package and create an entirely new but
fixed CRAN package from it myself stripped to only the functionality I
need, which is not ideal of course, or (C) Kindly ask CRAN to put the
deprecated package back online for a couple of months while we look
out for a better solution?

Thanks,
Vincent


From murdoch@dunc@n @ending from gm@il@com  Mon Jun 25 22:12:56 2018
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Mon, 25 Jun 2018 16:12:56 -0400
Subject: [R-pkg-devel] How to handle deprecated package dependency? 2
 suggestions 1 question
In-Reply-To: <CALnEB17eGh=+0eQqSAQbh3F3KyGGXwMwVvx-T5uAhM2BpG4w4A@mail.gmail.com>
References: <CALnEB17eGh=+0eQqSAQbh3F3KyGGXwMwVvx-T5uAhM2BpG4w4A@mail.gmail.com>
Message-ID: <798979b9-d3d8-2638-c37c-3ffca55d440e@gmail.com>

On 25/06/2018 3:21 PM, Vincent van Hees wrote:
> Dear all,
> 
> One of my package dependencies was taken from CRAN a month ago, with
> the CRAN message: "...check problems were not corrected despite
> reminders" as displayed on the deprecated CRAN package page. I
> immediately got in touch with the deprecated package maintainer and
> learnt that he is trying to resolve the issue(s).
> 
> My suggestions/questions:
> 
> 1 - Would it be an idea for CRAN to inform reverse dependency package
> maintainers when a package is at risk of being taken from CRAN? For
> example, by cc-ing them in the warning message? I think such a
> heads-up could have helped to prevent the situation.
> 
> 2 - At the moment the CRAN page for the deprecated package does not
> tell me what I can do to help fix the issue:
> 
> "Package ?GENEAread? was removed from the CRAN repository.
> Formerly available versions can be obtained from the archive.
> Archived on 2018-05-25 as check problems were not corrected despite reminders >
> Would it be an idea to display what those problems were to make it
> easier for others, like me, to help fix the issue(s)?

I don't know if it will remain indefinitely, but the CRAN check page for 
that package is still available, containing MacOS results:

https://cran.r-project.org/web/checks/check_results_GENEAread.html

It looks as though the required changes are quite trivial:  using 
requireNamespace instead of require() or library(), and declaring 
imports from base packages.

> 
> 3 - Can you advise on how I can help address the situation, such that
> I can upload a much needed update to my own CRAN package GGIR? The
> approaches I can think of are: (A) Help the deprecated package
> maintainer to fix their issues, which may not be easy, (B) copy the
> old code of the deprecated package and create an entirely new but
> fixed CRAN package from it myself stripped to only the functionality I
> need, which is not ideal of course, or (C) Kindly ask CRAN to put the
> deprecated package back online for a couple of months while we look
> out for a better solution?

Given how easy the fixes are, I'd go with (A).

Duncan Murdoch
> 
> Thanks,
> Vincent
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From m@rk@v@nderloo @ending from gm@il@com  Tue Jun 26 08:52:25 2018
From: m@rk@v@nderloo @ending from gm@il@com (Mark van der Loo)
Date: Tue, 26 Jun 2018 08:52:25 +0200
Subject: [R-pkg-devel] How to handle deprecated package dependency? 2
 suggestions 1 question
In-Reply-To: <798979b9-d3d8-2638-c37c-3ffca55d440e@gmail.com>
References: <CALnEB17eGh=+0eQqSAQbh3F3KyGGXwMwVvx-T5uAhM2BpG4w4A@mail.gmail.com>
 <798979b9-d3d8-2638-c37c-3ffca55d440e@gmail.com>
Message-ID: <CAOKDuOiTZ2z3RgTXLXa-SoVU=XjLQAwfkasG+gba+VJvXc=Sjw@mail.gmail.com>

Dear Vincent,

I think this is little known, but you can get the CRAN result status of any
package from R, see tools::CRAN_check_results().

Best,
Mark


Op ma 25 jun. 2018 om 22:13 schreef Duncan Murdoch <murdoch.duncan at gmail.com
>:

> On 25/06/2018 3:21 PM, Vincent van Hees wrote:
> > Dear all,
> >
> > One of my package dependencies was taken from CRAN a month ago, with
> > the CRAN message: "...check problems were not corrected despite
> > reminders" as displayed on the deprecated CRAN package page. I
> > immediately got in touch with the deprecated package maintainer and
> > learnt that he is trying to resolve the issue(s).
> >
> > My suggestions/questions:
> >
> > 1 - Would it be an idea for CRAN to inform reverse dependency package
> > maintainers when a package is at risk of being taken from CRAN? For
> > example, by cc-ing them in the warning message? I think such a
> > heads-up could have helped to prevent the situation.
> >
> > 2 - At the moment the CRAN page for the deprecated package does not
> > tell me what I can do to help fix the issue:
> >
> > "Package ?GENEAread? was removed from the CRAN repository.
> > Formerly available versions can be obtained from the archive.
> > Archived on 2018-05-25 as check problems were not corrected despite
> reminders >
> > Would it be an idea to display what those problems were to make it
> > easier for others, like me, to help fix the issue(s)?
>
> I don't know if it will remain indefinitely, but the CRAN check page for
> that package is still available, containing MacOS results:
>
> https://cran.r-project.org/web/checks/check_results_GENEAread.html
>
> It looks as though the required changes are quite trivial:  using
> requireNamespace instead of require() or library(), and declaring
> imports from base packages.
>
> >
> > 3 - Can you advise on how I can help address the situation, such that
> > I can upload a much needed update to my own CRAN package GGIR? The
> > approaches I can think of are: (A) Help the deprecated package
> > maintainer to fix their issues, which may not be easy, (B) copy the
> > old code of the deprecated package and create an entirely new but
> > fixed CRAN package from it myself stripped to only the functionality I
> > need, which is not ideal of course, or (C) Kindly ask CRAN to put the
> > deprecated package back online for a couple of months while we look
> > out for a better solution?
>
> Given how easy the fixes are, I'd go with (A).
>
> Duncan Murdoch
> >
> > Thanks,
> > Vincent
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From Jori@@Mey@ @ending from ugent@be  Wed Jun 27 15:30:17 2018
From: Jori@@Mey@ @ending from ugent@be (Joris Meys)
Date: Wed, 27 Jun 2018 15:30:17 +0200
Subject: [R-pkg-devel] Checksums changed on CRAN without any visible
 modifications to files.
In-Reply-To: <CAO1zAVZsiZFSA+qNv=4c8jXbjEZ_LDXKm0wkUpUUYUdJZFFdDA@mail.gmail.com>
References: <CAO1zAVamKmQtaPSgetWY3WVxVa_Ucg1irxaxUen_a0UfohpBwQ@mail.gmail.com>
 <743b6a26-7632-45d2-57a4-20b5ceb475b1@statistik.tu-dortmund.de>
 <CAO1zAVaH_m6jB=6J+zSdRSbcYxFZ+ta4y1rDPTyA6E71dJDKHQ@mail.gmail.com>
 <4d74b04e-c350-5c5b-e270-310965972675@statistik.tu-dortmund.de>
 <CAO1zAVZsiZFSA+qNv=4c8jXbjEZ_LDXKm0wkUpUUYUdJZFFdDA@mail.gmail.com>
Message-ID: <CAO1zAVY5du_g9tsvuW6f6qLc0g2hwFaNaHcXnHDokeC-jg=2-w@mail.gmail.com>

Dear Uwe,

sorry to bother you again with it, but I was wondering if you had some more
idea about what happened. I just received another one, this time about
mgcv_1.8-23.tar.gz. It goes beyond my understanding as to why the MD5 sums
would change without any change to the package. Is there anything I can
check at this side to make it easier for you?

Cheers
Joris

On Thu, Jun 14, 2018 at 6:55 PM, Joris Meys <Joris.Meys at ugent.be> wrote:

> Dear Uwe,
>
> Thank you for willing to take a look. In the report it was about the
> following tarballs :
>
> pkgmaker_0.22.tar.gz
> rngtools_1.2.4.tar.gz
> RcppProgress_0.4.tar.gz
>
> Our sysadmin tried diff -ru, but couldn't find any difference in the text
> files.
>
> Cheers
> Joris
>
> On Thu, Jun 14, 2018 at 5:46 PM, Uwe Ligges <ligges at statistik.tu-dortmund.
> de> wrote:
>
>>
>>
>> On 13.06.2018 15:40, Joris Meys wrote:
>>
>>>
>>>
>>> On Wed, Jun 13, 2018 at 3:16 PM, Uwe Ligges <
>>> ligges at statistik.tu-dortmund.de <mailto:ligges at statistik.tu-dortmund.de>>
>>> wrote:
>>>
>>>
>>>     When CRAN repacks and changes the DESCRIPTION file, the checksums
>>>     change, of course.
>>>
>>>     Best,
>>>     Uwe Ligges
>>>
>>>
>>> Dear Uwe,
>>>
>>> I understood that from the previous issue. In this case however, none of
>>> the files -including the DESCRIPTION file- were changed. Am I right in
>>> suspecting that a package is repacked when moved to the archive?
>>>
>>
>> No, we do not repack generally then. Perhaps the package got orphaned?
>>
>>
>> Which package / tarball were you talking about? I can take a look why
>> that one was changed and inspect why the checksum changed.
>>
>> Best,
>> Uwe Ligges
>>
>>
>>
>>  I
>>
>>> suspect that the tool used to repack the package is using gzip, and it
>>> is possible to repack without adding a timestamp as explained here :
>>>
>>> https://serverfault.com/questions/110208/different-md5sums-f
>>> or-same-tar-contents
>>>
>>> I can explain the different checksums when some things are changed to
>>> our HPC sysadmins, but they have -understandibly- difficulties with
>>> checksums changing for released source tarballs. Is it possible to adapt
>>> the archiving so that at least for identical tarballs the md5 sums remain
>>> the same? Or if you have other suggestions to deal with this without having
>>> to change hardcoded checksums in the easybuild repos, that would be very
>>> welcome too.
>>>
>>> Cheers
>>> Joris
>>>
>>> --
>>> Joris Meys
>>> Statistical consultant
>>>
>>> Department of Data Analysis and Mathematical Modelling
>>> Ghent University
>>> Coupure Links 653, B-9000 Gent (Belgium)
>>> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+G
>>> ent,%C2%A0Belgium&entry=gmail&source=g>
>>>
>>> tel: +32 (0)9 264 61 79
>>> -----------
>>> Biowiskundedagen 2017-2018
>>> http://www.biowiskundedagen.ugent.be/
>>>
>>> -------------------------------
>>> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>>>
>>
>
>
> --
> Joris Meys
> Statistical consultant
>
> Department of Data Analysis and Mathematical Modelling
> Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
>
> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
>
> tel: +32 (0)9 264 61 79
> -----------
> Biowiskundedagen 2017-2018
> http://www.biowiskundedagen.ugent.be/
>
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>



-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From Jori@@Mey@ @ending from ugent@be  Wed Jun 27 15:53:43 2018
From: Jori@@Mey@ @ending from ugent@be (Joris Meys)
Date: Wed, 27 Jun 2018 15:53:43 +0200
Subject: [R-pkg-devel] Checksums changed on CRAN without any visible
 modifications to files.
In-Reply-To: <CAO1zAVY5du_g9tsvuW6f6qLc0g2hwFaNaHcXnHDokeC-jg=2-w@mail.gmail.com>
References: <CAO1zAVamKmQtaPSgetWY3WVxVa_Ucg1irxaxUen_a0UfohpBwQ@mail.gmail.com>
 <743b6a26-7632-45d2-57a4-20b5ceb475b1@statistik.tu-dortmund.de>
 <CAO1zAVaH_m6jB=6J+zSdRSbcYxFZ+ta4y1rDPTyA6E71dJDKHQ@mail.gmail.com>
 <4d74b04e-c350-5c5b-e270-310965972675@statistik.tu-dortmund.de>
 <CAO1zAVZsiZFSA+qNv=4c8jXbjEZ_LDXKm0wkUpUUYUdJZFFdDA@mail.gmail.com>
 <CAO1zAVY5du_g9tsvuW6f6qLc0g2hwFaNaHcXnHDokeC-jg=2-w@mail.gmail.com>
Message-ID: <CAO1zAVav=HKkc7AVGG5VgE8N1=EFSC=69qjhdOqcV+Zh75wXsg@mail.gmail.com>

Correction: In the case of mgcv it was the publication date that changed
for some reason. Our sysadmins keep reaching out to me in the hope to
resolve this. Is there a way they can reach out so this can be clarified?

For reference, the latest issue on mgcv :
https://github.com/easybuilders/easybuild-easyconfigs/issues/6501

Cheers
Joris

On Wed, Jun 27, 2018 at 3:30 PM, Joris Meys <Joris.Meys at ugent.be> wrote:

> Dear Uwe,
>
> sorry to bother you again with it, but I was wondering if you had some
> more idea about what happened. I just received another one, this time about
> mgcv_1.8-23.tar.gz. It goes beyond my understanding as to why the MD5 sums
> would change without any change to the package. Is there anything I can
> check at this side to make it easier for you?
>
> Cheers
> Joris
>
> On Thu, Jun 14, 2018 at 6:55 PM, Joris Meys <Joris.Meys at ugent.be> wrote:
>
>> Dear Uwe,
>>
>> Thank you for willing to take a look. In the report it was about the
>> following tarballs :
>>
>> pkgmaker_0.22.tar.gz
>> rngtools_1.2.4.tar.gz
>> RcppProgress_0.4.tar.gz
>>
>> Our sysadmin tried diff -ru, but couldn't find any difference in the text
>> files.
>>
>> Cheers
>> Joris
>>
>> On Thu, Jun 14, 2018 at 5:46 PM, Uwe Ligges <
>> ligges at statistik.tu-dortmund.de> wrote:
>>
>>>
>>>
>>> On 13.06.2018 15:40, Joris Meys wrote:
>>>
>>>>
>>>>
>>>> On Wed, Jun 13, 2018 at 3:16 PM, Uwe Ligges <
>>>> ligges at statistik.tu-dortmund.de <mailto:ligges at statistik.tu-dortmund.de>>
>>>> wrote:
>>>>
>>>>
>>>>     When CRAN repacks and changes the DESCRIPTION file, the checksums
>>>>     change, of course.
>>>>
>>>>     Best,
>>>>     Uwe Ligges
>>>>
>>>>
>>>> Dear Uwe,
>>>>
>>>> I understood that from the previous issue. In this case however, none
>>>> of the files -including the DESCRIPTION file- were changed. Am I right in
>>>> suspecting that a package is repacked when moved to the archive?
>>>>
>>>
>>> No, we do not repack generally then. Perhaps the package got orphaned?
>>>
>>>
>>> Which package / tarball were you talking about? I can take a look why
>>> that one was changed and inspect why the checksum changed.
>>>
>>> Best,
>>> Uwe Ligges
>>>
>>>
>>>
>>>  I
>>>
>>>> suspect that the tool used to repack the package is using gzip, and it
>>>> is possible to repack without adding a timestamp as explained here :
>>>>
>>>> https://serverfault.com/questions/110208/different-md5sums-f
>>>> or-same-tar-contents
>>>>
>>>> I can explain the different checksums when some things are changed to
>>>> our HPC sysadmins, but they have -understandibly- difficulties with
>>>> checksums changing for released source tarballs. Is it possible to adapt
>>>> the archiving so that at least for identical tarballs the md5 sums remain
>>>> the same? Or if you have other suggestions to deal with this without having
>>>> to change hardcoded checksums in the easybuild repos, that would be very
>>>> welcome too.
>>>>
>>>> Cheers
>>>> Joris
>>>>
>>>> --
>>>> Joris Meys
>>>> Statistical consultant
>>>>
>>>> Department of Data Analysis and Mathematical Modelling
>>>> Ghent University
>>>> Coupure Links 653, B-9000 Gent (Belgium)
>>>> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+G
>>>> ent,%C2%A0Belgium&entry=gmail&source=g>
>>>>
>>>> tel: +32 (0)9 264 61 79
>>>> -----------
>>>> Biowiskundedagen 2017-2018
>>>> http://www.biowiskundedagen.ugent.be/
>>>>
>>>> -------------------------------
>>>> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>>>>
>>>
>>
>>
>> --
>> Joris Meys
>> Statistical consultant
>>
>> Department of Data Analysis and Mathematical Modelling
>> Ghent University
>> Coupure Links 653, B-9000 Gent (Belgium)
>>
>> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
>>
>> tel: +32 (0)9 264 61 79
>> -----------
>> Biowiskundedagen 2017-2018
>> http://www.biowiskundedagen.ugent.be/
>>
>> -------------------------------
>> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>>
>
>
>
> --
> Joris Meys
> Statistical consultant
>
> Department of Data Analysis and Mathematical Modelling
> Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
>
> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
>
> tel: +32 (0)9 264 61 79
> -----------
> Biowiskundedagen 2017-2018
> http://www.biowiskundedagen.ugent.be/
>
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>



-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From @lej@ndrob@r@nek @ending from gm@il@com  Wed Jun 27 22:22:09 2018
From: @lej@ndrob@r@nek @ending from gm@il@com (alejandro baranek)
Date: Wed, 27 Jun 2018 17:22:09 -0300
Subject: [R-pkg-devel] Questions about making a database package
 (Rpolyhedra)
In-Reply-To: <AM5PR0401MB2452E02083E4712DD2F9D83FD5A20@AM5PR0401MB2452.eurprd04.prod.outlook.com>
References: <CADJoD_Y7hAFhd+9F-Fo-mc2EOxyfitOeLy1rdj2jYP3-a33myQ@mail.gmail.com>
 <AM5PR0401MB2452E02083E4712DD2F9D83FD5A20@AM5PR0401MB2452.eurprd04.prod.outlook.com>
Message-ID: <CADJoD_aXb3cnkoyqyt1j9tjEjMow6s9NrhjPJKGtKTrOSSDyxg@mail.gmail.com>

By now, we are on that situation: +- 150 polyhedra published.
But +800 able to publish and because of package size cannot publish all of
them.

It is not a problem on github, it's a problem on CRAN, with building (fixed
testing timing with simple sample techniques) timing. I would like to hear
more from experienced package developers about this issues, but we seemed
to found a solution.

We decided to make another github repo RpolyhedraDB. When you install the
package, it downloads the database from the correct tag marked in the data
folder of the package in a home directory of the user. So package will be
minimal for CRAN, will be RR and will install database on first use (In
case of TRAVIS or other qa/continuous integration, it will install it of
course). It will be possible to setup different DB size using the TAGS, in
case we find it preferable to the users.


Best, Ale.


2018-03-29 4:43 GMT-03:00 Berry Boessenkool <berryboessenkool at hotmail.com>:

>
> I assume you cannot simply reduce the 150 to a few for demonstration
> purposes?
>
>
> I have seen people using DRAT packages on github for data, but gh is
> limited in size restrictions as well...
>
>
> No expert in this, but maybe this helps a little bit...
>
> Berry
>
>
>
> -
>
>
>
>
>
> ------------------------------
> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on behalf
> of alejandro baranek <alejandrobaranek at gmail.com>
> *Sent:* Tuesday, March 27, 2018 19:26
> *To:* r-package-devel at r-project.org
> *Subject:* [R-pkg-devel] Questions about making a database package
> (Rpolyhedra)
>
> Hello group:
>
> We released Rpolyhedra V0.2 last month. It is able to scrape +800 polyhedra
> definitions from public sources. At V0.2.4 we are publishing only 150
> because the time needed for scrape all the polyhedra, testing and the
> resulting size of the package. The difference is a configuration in zzz.R,
> very simple to change (Who wants to try it, can build the package for
> themeselves)
> Only the source files of polyhedra definitions are +12MB of size (We are
> including it in the data folder for package self suficience).
>
> But we have doubts about good practices for publishing a database package.
>
> We think the solution is to split the package in an internal
> Rpolyhedra-lib, opensource but not in CRAN, and Rpolyhedra with a catalog
> sewhich enables to connect with that repo for downloading scraped polyhedra
> on-demand.
>
> We have to think further the way of connecting both repositories, but
> before touching any code, want to listen to experienced package developers
> and the community in general, about to do this.
> Do you know any package with analog behavior than this package? We didn't
> find it.
>
> Best, Ale.
> --
>  alejandro baranek
> @ken4rab <https://twitter.com/ken4rab>
> qbotics <http://qbotics.tumblr.com/> | surferinvaders
> <http://surferinvaders.tumblr.com> | algebraic-soundscapes
> <http://imaginary.org/content/algebraic-soundscapes> | surfer-shuffle
> <http://imaginary.org/program/surfer-shuffle>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
 alejandro baranek
@ken4rab <https://twitter.com/ken4rab>
qbotics <http://qbotics.tumblr.com/> | surferinvaders
<http://surferinvaders.tumblr.com> | algebraic-soundscapes
<http://imaginary.org/content/algebraic-soundscapes> | surfer-shuffle
<http://imaginary.org/program/surfer-shuffle>

	[[alternative HTML version deleted]]


From Jori@@Mey@ @ending from ugent@be  Thu Jun 28 10:23:35 2018
From: Jori@@Mey@ @ending from ugent@be (Joris Meys)
Date: Thu, 28 Jun 2018 10:23:35 +0200
Subject: [R-pkg-devel] Questions about making a database package
 (Rpolyhedra)
In-Reply-To: <CADJoD_aXb3cnkoyqyt1j9tjEjMow6s9NrhjPJKGtKTrOSSDyxg@mail.gmail.com>
References: <CADJoD_Y7hAFhd+9F-Fo-mc2EOxyfitOeLy1rdj2jYP3-a33myQ@mail.gmail.com>
 <AM5PR0401MB2452E02083E4712DD2F9D83FD5A20@AM5PR0401MB2452.eurprd04.prod.outlook.com>
 <CADJoD_aXb3cnkoyqyt1j9tjEjMow6s9NrhjPJKGtKTrOSSDyxg@mail.gmail.com>
Message-ID: <CAO1zAVZN4o2FyoYKS_AJO0v_QuUS7RkhsmkXNCQ7qgdVQcD9jg@mail.gmail.com>

Hi Ale,

I'd personally use a more specific solution like github LFS (large file
storage) for a versioned database. You should also check with CRAN itself,
as they keep high standards for everything that's not a standard install.
More specifically (from CRAN policies) :

Downloads of additional software or data as part of package installation or
startup should only use secure download mechanisms (e.g., ?https? or
?ftps?).

Personally I would store that information in a public database somewhere
with a (minimal) API. This can then be extended without inflating the
download and would allow people to install only a subset of what they need.
That would also allow people to also port your work to other language by
simply writing a wrapper around the DB API. It's not a necessity, but I
thought it was worth mentioning as an option.

Cheers
Joris

On Wed, Jun 27, 2018 at 10:22 PM, alejandro baranek <
alejandrobaranek at gmail.com> wrote:

> By now, we are on that situation: +- 150 polyhedra published.
> But +800 able to publish and because of package size cannot publish all of
> them.
>
> It is not a problem on github, it's a problem on CRAN, with building (fixed
> testing timing with simple sample techniques) timing. I would like to hear
> more from experienced package developers about this issues, but we seemed
> to found a solution.
>
> We decided to make another github repo RpolyhedraDB. When you install the
> package, it downloads the database from the correct tag marked in the data
> folder of the package in a home directory of the user. So package will be
> minimal for CRAN, will be RR and will install database on first use (In
> case of TRAVIS or other qa/continuous integration, it will install it of
> course). It will be possible to setup different DB size using the TAGS, in
> case we find it preferable to the users.
>
>
> Best, Ale.
>
>
> 2018-03-29 4:43 GMT-03:00 Berry Boessenkool <berryboessenkool at hotmail.com>
> :
>
> >
> > I assume you cannot simply reduce the 150 to a few for demonstration
> > purposes?
> >
> >
> > I have seen people using DRAT packages on github for data, but gh is
> > limited in size restrictions as well...
> >
> >
> > No expert in this, but maybe this helps a little bit...
> >
> > Berry
> >
> >
> >
> > -
> >
> >
> >
> >
> >
> > ------------------------------
> > *From:* R-package-devel <r-package-devel-bounces at r-project.org> on
> behalf
> > of alejandro baranek <alejandrobaranek at gmail.com>
> > *Sent:* Tuesday, March 27, 2018 19:26
> > *To:* r-package-devel at r-project.org
> > *Subject:* [R-pkg-devel] Questions about making a database package
> > (Rpolyhedra)
> >
> > Hello group:
> >
> > We released Rpolyhedra V0.2 last month. It is able to scrape +800
> polyhedra
> > definitions from public sources. At V0.2.4 we are publishing only 150
> > because the time needed for scrape all the polyhedra, testing and the
> > resulting size of the package. The difference is a configuration in
> zzz.R,
> > very simple to change (Who wants to try it, can build the package for
> > themeselves)
> > Only the source files of polyhedra definitions are +12MB of size (We are
> > including it in the data folder for package self suficience).
> >
> > But we have doubts about good practices for publishing a database
> package.
> >
> > We think the solution is to split the package in an internal
> > Rpolyhedra-lib, opensource but not in CRAN, and Rpolyhedra with a catalog
> > sewhich enables to connect with that repo for downloading scraped
> polyhedra
> > on-demand.
> >
> > We have to think further the way of connecting both repositories, but
> > before touching any code, want to listen to experienced package
> developers
> > and the community in general, about to do this.
> > Do you know any package with analog behavior than this package? We didn't
> > find it.
> >
> > Best, Ale.
> > --
> >  alejandro baranek
> > @ken4rab <https://twitter.com/ken4rab>
> > qbotics <http://qbotics.tumblr.com/> | surferinvaders
> > <http://surferinvaders.tumblr.com> | algebraic-soundscapes
> > <http://imaginary.org/content/algebraic-soundscapes> | surfer-shuffle
> > <http://imaginary.org/program/surfer-shuffle>
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>
>
> --
>  alejandro baranek
> @ken4rab <https://twitter.com/ken4rab>
> qbotics <http://qbotics.tumblr.com/> | surferinvaders
> <http://surferinvaders.tumblr.com> | algebraic-soundscapes
> <http://imaginary.org/content/algebraic-soundscapes> | surfer-shuffle
> <http://imaginary.org/program/surfer-shuffle>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From @lej@ndrob@r@nek @ending from gm@il@com  Thu Jun 28 13:56:15 2018
From: @lej@ndrob@r@nek @ending from gm@il@com (alejandro baranek)
Date: Thu, 28 Jun 2018 08:56:15 -0300
Subject: [R-pkg-devel] Questions about making a database package
 (Rpolyhedra)
In-Reply-To: <CAO1zAVZN4o2FyoYKS_AJO0v_QuUS7RkhsmkXNCQ7qgdVQcD9jg@mail.gmail.com>
References: <CADJoD_Y7hAFhd+9F-Fo-mc2EOxyfitOeLy1rdj2jYP3-a33myQ@mail.gmail.com>
 <AM5PR0401MB2452E02083E4712DD2F9D83FD5A20@AM5PR0401MB2452.eurprd04.prod.outlook.com>
 <CADJoD_aXb3cnkoyqyt1j9tjEjMow6s9NrhjPJKGtKTrOSSDyxg@mail.gmail.com>
 <CAO1zAVZN4o2FyoYKS_AJO0v_QuUS7RkhsmkXNCQ7qgdVQcD9jg@mail.gmail.com>
Message-ID: <CADJoD_ajDpcTEGdSc7M1mGGywHUL-uq_BB8hEgb3vJO_S97mTA@mail.gmail.com>

Hi Joris:

Thank you for your comments.
Of course, we are using https for aditional downloads.

For the moment it is not needed to use github LFS, but is an alternative we
can explore after this short step: our immediate goal is to make the
package lighter in CRAN. Now it's 35kb so I think we made it well.

We are defining an XSD for exporting polyhedra in XML. After that, it will
be possible to make an API with the polyhedra database and make the
improvement you are saying. But with time, we have no funding yet for this
project and want to implement some functionalities to make it more valuable
first. But is in our roadmap to make it easy to port it to other languages.
The interface we are using is really simple, probably it will be the API
interface too.

Best, Ale.


2018-06-28 5:23 GMT-03:00 Joris Meys <Joris.Meys at ugent.be>:

> Hi Ale,
>
> I'd personally use a more specific solution like github LFS (large file
> storage) for a versioned database. You should also check with CRAN itself,
> as they keep high standards for everything that's not a standard install.
> More specifically (from CRAN policies) :
>
> Downloads of additional software or data as part of package installation
> or startup should only use secure download mechanisms (e.g., ?https? or
> ?ftps?).
>
> Personally I would store that information in a public database somewhere
> with a (minimal) API. This can then be extended without inflating the
> download and would allow people to install only a subset of what they need.
> That would also allow people to also port your work to other language by
> simply writing a wrapper around the DB API. It's not a necessity, but I
> thought it was worth mentioning as an option.
>
> Cheers
> Joris
>
> On Wed, Jun 27, 2018 at 10:22 PM, alejandro baranek <
> alejandrobaranek at gmail.com> wrote:
>
>> By now, we are on that situation: +- 150 polyhedra published.
>> But +800 able to publish and because of package size cannot publish all of
>> them.
>>
>> It is not a problem on github, it's a problem on CRAN, with building
>> (fixed
>> testing timing with simple sample techniques) timing. I would like to hear
>> more from experienced package developers about this issues, but we seemed
>> to found a solution.
>>
>> We decided to make another github repo RpolyhedraDB. When you install the
>> package, it downloads the database from the correct tag marked in the data
>> folder of the package in a home directory of the user. So package will be
>> minimal for CRAN, will be RR and will install database on first use (In
>> case of TRAVIS or other qa/continuous integration, it will install it of
>> course). It will be possible to setup different DB size using the TAGS, in
>> case we find it preferable to the users.
>>
>>
>> Best, Ale.
>>
>>
>> 2018-03-29 4:43 GMT-03:00 Berry Boessenkool <berryboessenkool at hotmail.com
>> >:
>>
>> >
>> > I assume you cannot simply reduce the 150 to a few for demonstration
>> > purposes?
>> >
>> >
>> > I have seen people using DRAT packages on github for data, but gh is
>> > limited in size restrictions as well...
>> >
>> >
>> > No expert in this, but maybe this helps a little bit...
>> >
>> > Berry
>> >
>> >
>> >
>> > -
>> >
>> >
>> >
>> >
>> >
>> > ------------------------------
>> > *From:* R-package-devel <r-package-devel-bounces at r-project.org> on
>> behalf
>> > of alejandro baranek <alejandrobaranek at gmail.com>
>> > *Sent:* Tuesday, March 27, 2018 19:26
>> > *To:* r-package-devel at r-project.org
>> > *Subject:* [R-pkg-devel] Questions about making a database package
>>
>> > (Rpolyhedra)
>> >
>> > Hello group:
>> >
>> > We released Rpolyhedra V0.2 last month. It is able to scrape +800
>> polyhedra
>> > definitions from public sources. At V0.2.4 we are publishing only 150
>> > because the time needed for scrape all the polyhedra, testing and the
>> > resulting size of the package. The difference is a configuration in
>> zzz.R,
>> > very simple to change (Who wants to try it, can build the package for
>> > themeselves)
>> > Only the source files of polyhedra definitions are +12MB of size (We are
>> > including it in the data folder for package self suficience).
>> >
>> > But we have doubts about good practices for publishing a database
>> package.
>> >
>> > We think the solution is to split the package in an internal
>> > Rpolyhedra-lib, opensource but not in CRAN, and Rpolyhedra with a
>> catalog
>> > sewhich enables to connect with that repo for downloading scraped
>> polyhedra
>> > on-demand.
>> >
>> > We have to think further the way of connecting both repositories, but
>> > before touching any code, want to listen to experienced package
>> developers
>> > and the community in general, about to do this.
>> > Do you know any package with analog behavior than this package? We
>> didn't
>> > find it.
>> >
>> > Best, Ale.
>> > --
>> >  alejandro baranek
>> > @ken4rab <https://twitter.com/ken4rab>
>> > qbotics <http://qbotics.tumblr.com/> | surferinvaders
>> > <http://surferinvaders.tumblr.com> | algebraic-soundscapes
>> > <http://imaginary.org/content/algebraic-soundscapes> | surfer-shuffle
>> > <http://imaginary.org/program/surfer-shuffle>
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >
>>
>>
>>
>> --
>>  alejandro baranek
>> @ken4rab <https://twitter.com/ken4rab>
>> qbotics <http://qbotics.tumblr.com/> | surferinvaders
>> <http://surferinvaders.tumblr.com> | algebraic-soundscapes
>> <http://imaginary.org/content/algebraic-soundscapes> | surfer-shuffle
>> <http://imaginary.org/program/surfer-shuffle>
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>
>
> --
> Joris Meys
> Statistical consultant
>
> Department of Data Analysis and Mathematical Modelling
> Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
>
> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
>
> tel: +32 (0)9 264 61 79
> -----------
> Biowiskundedagen 2017-2018
> http://www.biowiskundedagen.ugent.be/
>
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>



-- 
 alejandro baranek
@ken4rab <https://twitter.com/ken4rab>
qbotics <http://qbotics.tumblr.com/> | surferinvaders
<http://surferinvaders.tumblr.com> | algebraic-soundscapes
<http://imaginary.org/content/algebraic-soundscapes> | surfer-shuffle
<http://imaginary.org/program/surfer-shuffle>

	[[alternative HTML version deleted]]


From henrik@bengt@@on @ending from gm@il@com  Thu Jun 28 18:50:42 2018
From: henrik@bengt@@on @ending from gm@il@com (Henrik Bengtsson)
Date: Thu, 28 Jun 2018 09:50:42 -0700
Subject: [R-pkg-devel] Checksums changed on CRAN without any visible
 modifications to files.
In-Reply-To: <CAO1zAVav=HKkc7AVGG5VgE8N1=EFSC=69qjhdOqcV+Zh75wXsg@mail.gmail.com>
References: <CAO1zAVamKmQtaPSgetWY3WVxVa_Ucg1irxaxUen_a0UfohpBwQ@mail.gmail.com>
 <743b6a26-7632-45d2-57a4-20b5ceb475b1@statistik.tu-dortmund.de>
 <CAO1zAVaH_m6jB=6J+zSdRSbcYxFZ+ta4y1rDPTyA6E71dJDKHQ@mail.gmail.com>
 <4d74b04e-c350-5c5b-e270-310965972675@statistik.tu-dortmund.de>
 <CAO1zAVZsiZFSA+qNv=4c8jXbjEZ_LDXKm0wkUpUUYUdJZFFdDA@mail.gmail.com>
 <CAO1zAVY5du_g9tsvuW6f6qLc0g2hwFaNaHcXnHDokeC-jg=2-w@mail.gmail.com>
 <CAO1zAVav=HKkc7AVGG5VgE8N1=EFSC=69qjhdOqcV+Zh75wXsg@mail.gmail.com>
Message-ID: <CAFDcVCS4+3KQ8QfTiujoyodMEvOY9jea91JjSp_U5Uwx+Ph5Ew@mail.gmail.com>

Below are more details on/examples of changes due to ORCID URLs being
added to the DESCRIPTION file (from
https://github.com/easybuilders/easybuild-easyconfigs/pull/6446#issuecomment-396574744):

$ diff -ru RWeka.orig RWeka
diff -ru RWeka.orig/DESCRIPTION RWeka/DESCRIPTION
--- RWeka.orig/DESCRIPTION 2018-01-07 16:27:10.000000000 +0100
+++ RWeka/DESCRIPTION 2018-05-23 11:45:56.000000000 +0200
@@ -26,12 +26,12 @@
 License: GPL-2
 NeedsCompilation: no
 Packaged: 2018-01-07 15:04:47 UTC; hornik
-Author: Kurt Hornik [aut, cre] (0000-0003-4198-9911),
+Author: Kurt Hornik [aut, cre] (<https://orcid.org/0000-0003-4198-9911>),
   Christian Buchta [ctb],
   Torsten Hothorn [ctb],
   Alexandros Karatzoglou [ctb],
   David Meyer [ctb],
-  Achim Zeileis [ctb] (0000-0003-0918-3766)
+  Achim Zeileis [ctb] (<https://orcid.org/0000-0003-0918-3766>)
 Maintainer: Kurt Hornik <Kurt.Hornik at R-project.org>
 Repository: CRAN
 Date/Publication: 2018-01-07 16:17:29
diff -ru RWeka.orig/MD5 RWeka/MD5
--- RWeka.orig/MD5 2018-01-07 16:27:10.000000000 +0100
+++ RWeka/MD5 2018-05-23 11:45:56.000000000 +0200
@@ -1,5 +1,5 @@
 5ee28414fe580928907527d9e4217845 *CHANGELOG
-4aae74779d3a1de0fdc64beec22078ee *DESCRIPTION
+fe0f10b7f193e91112c978228acaa5ae *DESCRIPTION
 41b1dde3a37014e3c2c5fa208fc47167 *NAMESPACE
 f9a81f720aebf5398a94efa32a2047a5 *R/AAA.R
 e8b6adbe6a0b2cf61f433762e1fd16dd *R/arff.R

It looks like such updates to existing tarballs cause troubles
downstream (e.g. EasyBuild).  Although these updates are minor (in a
functional sense), it does mean that we cannot guarantee that everyone
gets identical installs.

/Henrik
On Wed, Jun 27, 2018 at 7:03 AM Joris Meys <Joris.Meys at ugent.be> wrote:
>
> Correction: In the case of mgcv it was the publication date that changed
> for some reason. Our sysadmins keep reaching out to me in the hope to
> resolve this. Is there a way they can reach out so this can be clarified?
>
> For reference, the latest issue on mgcv :
> https://github.com/easybuilders/easybuild-easyconfigs/issues/6501
>
> Cheers
> Joris
>
> On Wed, Jun 27, 2018 at 3:30 PM, Joris Meys <Joris.Meys at ugent.be> wrote:
>
> > Dear Uwe,
> >
> > sorry to bother you again with it, but I was wondering if you had some
> > more idea about what happened. I just received another one, this time about
> > mgcv_1.8-23.tar.gz. It goes beyond my understanding as to why the MD5 sums
> > would change without any change to the package. Is there anything I can
> > check at this side to make it easier for you?
> >
> > Cheers
> > Joris
> >
> > On Thu, Jun 14, 2018 at 6:55 PM, Joris Meys <Joris.Meys at ugent.be> wrote:
> >
> >> Dear Uwe,
> >>
> >> Thank you for willing to take a look. In the report it was about the
> >> following tarballs :
> >>
> >> pkgmaker_0.22.tar.gz
> >> rngtools_1.2.4.tar.gz
> >> RcppProgress_0.4.tar.gz
> >>
> >> Our sysadmin tried diff -ru, but couldn't find any difference in the text
> >> files.
> >>
> >> Cheers
> >> Joris
> >>
> >> On Thu, Jun 14, 2018 at 5:46 PM, Uwe Ligges <
> >> ligges at statistik.tu-dortmund.de> wrote:
> >>
> >>>
> >>>
> >>> On 13.06.2018 15:40, Joris Meys wrote:
> >>>
> >>>>
> >>>>
> >>>> On Wed, Jun 13, 2018 at 3:16 PM, Uwe Ligges <
> >>>> ligges at statistik.tu-dortmund.de <mailto:ligges at statistik.tu-dortmund.de>>
> >>>> wrote:
> >>>>
> >>>>
> >>>>     When CRAN repacks and changes the DESCRIPTION file, the checksums
> >>>>     change, of course.
> >>>>
> >>>>     Best,
> >>>>     Uwe Ligges
> >>>>
> >>>>
> >>>> Dear Uwe,
> >>>>
> >>>> I understood that from the previous issue. In this case however, none
> >>>> of the files -including the DESCRIPTION file- were changed. Am I right in
> >>>> suspecting that a package is repacked when moved to the archive?
> >>>>
> >>>
> >>> No, we do not repack generally then. Perhaps the package got orphaned?
> >>>
> >>>
> >>> Which package / tarball were you talking about? I can take a look why
> >>> that one was changed and inspect why the checksum changed.
> >>>
> >>> Best,
> >>> Uwe Ligges
> >>>
> >>>
> >>>
> >>>  I
> >>>
> >>>> suspect that the tool used to repack the package is using gzip, and it
> >>>> is possible to repack without adding a timestamp as explained here :
> >>>>
> >>>> https://serverfault.com/questions/110208/different-md5sums-f
> >>>> or-same-tar-contents
> >>>>
> >>>> I can explain the different checksums when some things are changed to
> >>>> our HPC sysadmins, but they have -understandibly- difficulties with
> >>>> checksums changing for released source tarballs. Is it possible to adapt
> >>>> the archiving so that at least for identical tarballs the md5 sums remain
> >>>> the same? Or if you have other suggestions to deal with this without having
> >>>> to change hardcoded checksums in the easybuild repos, that would be very
> >>>> welcome too.
> >>>>
> >>>> Cheers
> >>>> Joris
> >>>>
> >>>> --
> >>>> Joris Meys
> >>>> Statistical consultant
> >>>>
> >>>> Department of Data Analysis and Mathematical Modelling
> >>>> Ghent University
> >>>> Coupure Links 653, B-9000 Gent (Belgium)
> >>>> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+G
> >>>> ent,%C2%A0Belgium&entry=gmail&source=g>
> >>>>
> >>>> tel: +32 (0)9 264 61 79
> >>>> -----------
> >>>> Biowiskundedagen 2017-2018
> >>>> http://www.biowiskundedagen.ugent.be/
> >>>>
> >>>> -------------------------------
> >>>> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
> >>>>
> >>>
> >>
> >>
> >> --
> >> Joris Meys
> >> Statistical consultant
> >>
> >> Department of Data Analysis and Mathematical Modelling
> >> Ghent University
> >> Coupure Links 653, B-9000 Gent (Belgium)
> >>
> >> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
> >>
> >> tel: +32 (0)9 264 61 79
> >> -----------
> >> Biowiskundedagen 2017-2018
> >> http://www.biowiskundedagen.ugent.be/
> >>
> >> -------------------------------
> >> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
> >>
> >
> >
> >
> > --
> > Joris Meys
> > Statistical consultant
> >
> > Department of Data Analysis and Mathematical Modelling
> > Ghent University
> > Coupure Links 653, B-9000 Gent (Belgium)
> >
> > <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
> >
> > tel: +32 (0)9 264 61 79
> > -----------
> > Biowiskundedagen 2017-2018
> > http://www.biowiskundedagen.ugent.be/
> >
> > -------------------------------
> > Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
> >
>
>
>
> --
> Joris Meys
> Statistical consultant
>
> Department of Data Analysis and Mathematical Modelling
> Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
>
> tel: +32 (0)9 264 61 79
> -----------
> Biowiskundedagen 2017-2018
> http://www.biowiskundedagen.ugent.be/
>
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m@rk@v@nderloo @ending from gm@il@com  Fri Jun 29 09:15:11 2018
From: m@rk@v@nderloo @ending from gm@il@com (Mark van der Loo)
Date: Fri, 29 Jun 2018 09:15:11 +0200
Subject: [R-pkg-devel] Questions about making a database package
 (Rpolyhedra)
In-Reply-To: <CADJoD_ajDpcTEGdSc7M1mGGywHUL-uq_BB8hEgb3vJO_S97mTA@mail.gmail.com>
References: <CADJoD_Y7hAFhd+9F-Fo-mc2EOxyfitOeLy1rdj2jYP3-a33myQ@mail.gmail.com>
 <AM5PR0401MB2452E02083E4712DD2F9D83FD5A20@AM5PR0401MB2452.eurprd04.prod.outlook.com>
 <CADJoD_aXb3cnkoyqyt1j9tjEjMow6s9NrhjPJKGtKTrOSSDyxg@mail.gmail.com>
 <CAO1zAVZN4o2FyoYKS_AJO0v_QuUS7RkhsmkXNCQ7qgdVQcD9jg@mail.gmail.com>
 <CADJoD_ajDpcTEGdSc7M1mGGywHUL-uq_BB8hEgb3vJO_S97mTA@mail.gmail.com>
Message-ID: <CAOKDuOh0Ex0pf-bT7w=b7DnsdVbce0aPPAnxC+rONfg_R9a5=g@mail.gmail.com>

Hi Alejandro,

Brooke Anderson gave a nice talk at useR!2017 addressing this exact issue.
See
https://schd.ws/hosted_files/user2017/19/anderson-eddelbuettel-use_r_talk.pdf
for
the slides. The basic idea is to use an external CRAN-like repository for
the data back-end. Brooke used 'drat' to set up such a repo.

-Mark



Op do 28 jun. 2018 om 13:56 schreef alejandro baranek <
alejandrobaranek at gmail.com>:

> Hi Joris:
>
> Thank you for your comments.
> Of course, we are using https for aditional downloads.
>
> For the moment it is not needed to use github LFS, but is an alternative we
> can explore after this short step: our immediate goal is to make the
> package lighter in CRAN. Now it's 35kb so I think we made it well.
>
> We are defining an XSD for exporting polyhedra in XML. After that, it will
> be possible to make an API with the polyhedra database and make the
> improvement you are saying. But with time, we have no funding yet for this
> project and want to implement some functionalities to make it more valuable
> first. But is in our roadmap to make it easy to port it to other languages.
> The interface we are using is really simple, probably it will be the API
> interface too.
>
> Best, Ale.
>
>
> 2018-06-28 5:23 GMT-03:00 Joris Meys <Joris.Meys at ugent.be>:
>
> > Hi Ale,
> >
> > I'd personally use a more specific solution like github LFS (large file
> > storage) for a versioned database. You should also check with CRAN
> itself,
> > as they keep high standards for everything that's not a standard install.
> > More specifically (from CRAN policies) :
> >
> > Downloads of additional software or data as part of package installation
> > or startup should only use secure download mechanisms (e.g., ?https? or
> > ?ftps?).
> >
> > Personally I would store that information in a public database somewhere
> > with a (minimal) API. This can then be extended without inflating the
> > download and would allow people to install only a subset of what they
> need.
> > That would also allow people to also port your work to other language by
> > simply writing a wrapper around the DB API. It's not a necessity, but I
> > thought it was worth mentioning as an option.
> >
> > Cheers
> > Joris
> >
> > On Wed, Jun 27, 2018 at 10:22 PM, alejandro baranek <
> > alejandrobaranek at gmail.com> wrote:
> >
> >> By now, we are on that situation: +- 150 polyhedra published.
> >> But +800 able to publish and because of package size cannot publish all
> of
> >> them.
> >>
> >> It is not a problem on github, it's a problem on CRAN, with building
> >> (fixed
> >> testing timing with simple sample techniques) timing. I would like to
> hear
> >> more from experienced package developers about this issues, but we
> seemed
> >> to found a solution.
> >>
> >> We decided to make another github repo RpolyhedraDB. When you install
> the
> >> package, it downloads the database from the correct tag marked in the
> data
> >> folder of the package in a home directory of the user. So package will
> be
> >> minimal for CRAN, will be RR and will install database on first use (In
> >> case of TRAVIS or other qa/continuous integration, it will install it of
> >> course). It will be possible to setup different DB size using the TAGS,
> in
> >> case we find it preferable to the users.
> >>
> >>
> >> Best, Ale.
> >>
> >>
> >> 2018-03-29 4:43 GMT-03:00 Berry Boessenkool <
> berryboessenkool at hotmail.com
> >> >:
> >>
> >> >
> >> > I assume you cannot simply reduce the 150 to a few for demonstration
> >> > purposes?
> >> >
> >> >
> >> > I have seen people using DRAT packages on github for data, but gh is
> >> > limited in size restrictions as well...
> >> >
> >> >
> >> > No expert in this, but maybe this helps a little bit...
> >> >
> >> > Berry
> >> >
> >> >
> >> >
> >> > -
> >> >
> >> >
> >> >
> >> >
> >> >
> >> > ------------------------------
> >> > *From:* R-package-devel <r-package-devel-bounces at r-project.org> on
> >> behalf
> >> > of alejandro baranek <alejandrobaranek at gmail.com>
> >> > *Sent:* Tuesday, March 27, 2018 19:26
> >> > *To:* r-package-devel at r-project.org
> >> > *Subject:* [R-pkg-devel] Questions about making a database package
> >>
> >> > (Rpolyhedra)
> >> >
> >> > Hello group:
> >> >
> >> > We released Rpolyhedra V0.2 last month. It is able to scrape +800
> >> polyhedra
> >> > definitions from public sources. At V0.2.4 we are publishing only 150
> >> > because the time needed for scrape all the polyhedra, testing and the
> >> > resulting size of the package. The difference is a configuration in
> >> zzz.R,
> >> > very simple to change (Who wants to try it, can build the package for
> >> > themeselves)
> >> > Only the source files of polyhedra definitions are +12MB of size (We
> are
> >> > including it in the data folder for package self suficience).
> >> >
> >> > But we have doubts about good practices for publishing a database
> >> package.
> >> >
> >> > We think the solution is to split the package in an internal
> >> > Rpolyhedra-lib, opensource but not in CRAN, and Rpolyhedra with a
> >> catalog
> >> > sewhich enables to connect with that repo for downloading scraped
> >> polyhedra
> >> > on-demand.
> >> >
> >> > We have to think further the way of connecting both repositories, but
> >> > before touching any code, want to listen to experienced package
> >> developers
> >> > and the community in general, about to do this.
> >> > Do you know any package with analog behavior than this package? We
> >> didn't
> >> > find it.
> >> >
> >> > Best, Ale.
> >> > --
> >> >  alejandro baranek
> >> > @ken4rab <https://twitter.com/ken4rab>
> >> > qbotics <http://qbotics.tumblr.com/> | surferinvaders
> >> > <http://surferinvaders.tumblr.com> | algebraic-soundscapes
> >> > <http://imaginary.org/content/algebraic-soundscapes> | surfer-shuffle
> >> > <http://imaginary.org/program/surfer-shuffle>
> >> >
> >> >         [[alternative HTML version deleted]]
> >> >
> >> > ______________________________________________
> >> > R-package-devel at r-project.org mailing list
> >> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >> >
> >>
> >>
> >>
> >> --
> >>  alejandro baranek
> >> @ken4rab <https://twitter.com/ken4rab>
> >> qbotics <http://qbotics.tumblr.com/> | surferinvaders
> >> <http://surferinvaders.tumblr.com> | algebraic-soundscapes
> >> <http://imaginary.org/content/algebraic-soundscapes> | surfer-shuffle
> >> <http://imaginary.org/program/surfer-shuffle>
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> >
> >
> > --
> > Joris Meys
> > Statistical consultant
> >
> > Department of Data Analysis and Mathematical Modelling
> > Ghent University
> > Coupure Links 653, B-9000 Gent (Belgium)
> >
> > <
> https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g
> >
> >
> > tel: +32 (0)9 264 61 79 <+32%209%20264%2061%2079>
> > -----------
> > Biowiskundedagen 2017-2018
> > http://www.biowiskundedagen.ugent.be/
> >
> > -------------------------------
> > Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
> >
>
>
>
> --
>  alejandro baranek
> @ken4rab <https://twitter.com/ken4rab>
> qbotics <http://qbotics.tumblr.com/> | surferinvaders
> <http://surferinvaders.tumblr.com> | algebraic-soundscapes
> <http://imaginary.org/content/algebraic-soundscapes> | surfer-shuffle
> <http://imaginary.org/program/surfer-shuffle>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From Jori@@Mey@ @ending from ugent@be  Fri Jun 29 10:52:51 2018
From: Jori@@Mey@ @ending from ugent@be (Joris Meys)
Date: Fri, 29 Jun 2018 10:52:51 +0200
Subject: [R-pkg-devel] Checksums changed on CRAN without any visible
 modifications to files.
In-Reply-To: <CAFDcVCS4+3KQ8QfTiujoyodMEvOY9jea91JjSp_U5Uwx+Ph5Ew@mail.gmail.com>
References: <CAO1zAVamKmQtaPSgetWY3WVxVa_Ucg1irxaxUen_a0UfohpBwQ@mail.gmail.com>
 <743b6a26-7632-45d2-57a4-20b5ceb475b1@statistik.tu-dortmund.de>
 <CAO1zAVaH_m6jB=6J+zSdRSbcYxFZ+ta4y1rDPTyA6E71dJDKHQ@mail.gmail.com>
 <4d74b04e-c350-5c5b-e270-310965972675@statistik.tu-dortmund.de>
 <CAO1zAVZsiZFSA+qNv=4c8jXbjEZ_LDXKm0wkUpUUYUdJZFFdDA@mail.gmail.com>
 <CAO1zAVY5du_g9tsvuW6f6qLc0g2hwFaNaHcXnHDokeC-jg=2-w@mail.gmail.com>
 <CAO1zAVav=HKkc7AVGG5VgE8N1=EFSC=69qjhdOqcV+Zh75wXsg@mail.gmail.com>
 <CAFDcVCS4+3KQ8QfTiujoyodMEvOY9jea91JjSp_U5Uwx+Ph5Ew@mail.gmail.com>
Message-ID: <CAO1zAVYcugaCWA60iJPFf8COF9NgyLdo540Syab-5=L0mLJ-zQ@mail.gmail.com>

Thx Henrik.

That's indeed one of the issues: right now these minor and defendable
changes are not reflected in the version or filename. Hence there's really
no way to know the tarball (and hence the checksums) changed other than a
build suddenly failing. Our sysadmin proposed to add eg _1 or _patched to
the updated tarball, but I also realize this would require a lot of changes
in other places. I wish I knew a way this could be avoided without causing
trouble elsewhere, but I'm not inventive enough alas.

The other three packages mentioned in that issue, don't even show a visible
change. So in those cases, all (text) files in the tarball are identical
and yet the checksum somehow changed as well. There it's even more
baffling, but I'm more confident that this should be solvable on CRAN
without interfering with other things.

Cheers
Joris



On Thu, Jun 28, 2018 at 6:50 PM, Henrik Bengtsson <
henrik.bengtsson at gmail.com> wrote:

> Below are more details on/examples of changes due to ORCID URLs being
> added to the DESCRIPTION file (from
> https://github.com/easybuilders/easybuild-easyconfigs/pull/6446#
> issuecomment-396574744):
>
> $ diff -ru RWeka.orig RWeka
> diff -ru RWeka.orig/DESCRIPTION RWeka/DESCRIPTION
> --- RWeka.orig/DESCRIPTION 2018-01-07 16:27:10.000000000 +0100
> +++ RWeka/DESCRIPTION 2018-05-23 11:45:56.000000000 +0200
> @@ -26,12 +26,12 @@
>  License: GPL-2
>  NeedsCompilation: no
>  Packaged: 2018-01-07 15:04:47 UTC; hornik
> -Author: Kurt Hornik [aut, cre] (0000-0003-4198-9911),
> +Author: Kurt Hornik [aut, cre] (<https://orcid.org/0000-0003-4198-9911>),
>    Christian Buchta [ctb],
>    Torsten Hothorn [ctb],
>    Alexandros Karatzoglou [ctb],
>    David Meyer [ctb],
> -  Achim Zeileis [ctb] (0000-0003-0918-3766)
> +  Achim Zeileis [ctb] (<https://orcid.org/0000-0003-0918-3766>)
>  Maintainer: Kurt Hornik <Kurt.Hornik at R-project.org>
>  Repository: CRAN
>  Date/Publication: 2018-01-07 16:17:29
> diff -ru RWeka.orig/MD5 RWeka/MD5
> --- RWeka.orig/MD5 2018-01-07 16:27:10.000000000 +0100
> +++ RWeka/MD5 2018-05-23 11:45:56.000000000 +0200
> @@ -1,5 +1,5 @@
>  5ee28414fe580928907527d9e4217845 *CHANGELOG
> -4aae74779d3a1de0fdc64beec22078ee *DESCRIPTION
> +fe0f10b7f193e91112c978228acaa5ae *DESCRIPTION
>  41b1dde3a37014e3c2c5fa208fc47167 *NAMESPACE
>  f9a81f720aebf5398a94efa32a2047a5 *R/AAA.R
>  e8b6adbe6a0b2cf61f433762e1fd16dd *R/arff.R
>
> It looks like such updates to existing tarballs cause troubles
> downstream (e.g. EasyBuild).  Although these updates are minor (in a
> functional sense), it does mean that we cannot guarantee that everyone
> gets identical installs.
>
> /Henrik
> On Wed, Jun 27, 2018 at 7:03 AM Joris Meys <Joris.Meys at ugent.be> wrote:
> >
> > Correction: In the case of mgcv it was the publication date that changed
> > for some reason. Our sysadmins keep reaching out to me in the hope to
> > resolve this. Is there a way they can reach out so this can be clarified?
> >
> > For reference, the latest issue on mgcv :
> > https://github.com/easybuilders/easybuild-easyconfigs/issues/6501
> >
> > Cheers
> > Joris
> >
> > On Wed, Jun 27, 2018 at 3:30 PM, Joris Meys <Joris.Meys at ugent.be> wrote:
> >
> > > Dear Uwe,
> > >
> > > sorry to bother you again with it, but I was wondering if you had some
> > > more idea about what happened. I just received another one, this time
> about
> > > mgcv_1.8-23.tar.gz. It goes beyond my understanding as to why the MD5
> sums
> > > would change without any change to the package. Is there anything I can
> > > check at this side to make it easier for you?
> > >
> > > Cheers
> > > Joris
> > >
> > > On Thu, Jun 14, 2018 at 6:55 PM, Joris Meys <Joris.Meys at ugent.be>
> wrote:
> > >
> > >> Dear Uwe,
> > >>
> > >> Thank you for willing to take a look. In the report it was about the
> > >> following tarballs :
> > >>
> > >> pkgmaker_0.22.tar.gz
> > >> rngtools_1.2.4.tar.gz
> > >> RcppProgress_0.4.tar.gz
> > >>
> > >> Our sysadmin tried diff -ru, but couldn't find any difference in the
> text
> > >> files.
> > >>
> > >> Cheers
> > >> Joris
> > >>
> > >> On Thu, Jun 14, 2018 at 5:46 PM, Uwe Ligges <
> > >> ligges at statistik.tu-dortmund.de> wrote:
> > >>
> > >>>
> > >>>
> > >>> On 13.06.2018 15:40, Joris Meys wrote:
> > >>>
> > >>>>
> > >>>>
> > >>>> On Wed, Jun 13, 2018 at 3:16 PM, Uwe Ligges <
> > >>>> ligges at statistik.tu-dortmund.de <mailto:ligges at statistik.tu-
> dortmund.de>>
> > >>>> wrote:
> > >>>>
> > >>>>
> > >>>>     When CRAN repacks and changes the DESCRIPTION file, the
> checksums
> > >>>>     change, of course.
> > >>>>
> > >>>>     Best,
> > >>>>     Uwe Ligges
> > >>>>
> > >>>>
> > >>>> Dear Uwe,
> > >>>>
> > >>>> I understood that from the previous issue. In this case however,
> none
> > >>>> of the files -including the DESCRIPTION file- were changed. Am I
> right in
> > >>>> suspecting that a package is repacked when moved to the archive?
> > >>>>
> > >>>
> > >>> No, we do not repack generally then. Perhaps the package got
> orphaned?
> > >>>
> > >>>
> > >>> Which package / tarball were you talking about? I can take a look why
> > >>> that one was changed and inspect why the checksum changed.
> > >>>
> > >>> Best,
> > >>> Uwe Ligges
> > >>>
> > >>>
> > >>>
> > >>>  I
> > >>>
> > >>>> suspect that the tool used to repack the package is using gzip, and
> it
> > >>>> is possible to repack without adding a timestamp as explained here :
> > >>>>
> > >>>> https://serverfault.com/questions/110208/different-md5sums-f
> > >>>> or-same-tar-contents
> > >>>>
> > >>>> I can explain the different checksums when some things are changed
> to
> > >>>> our HPC sysadmins, but they have -understandibly- difficulties with
> > >>>> checksums changing for released source tarballs. Is it possible to
> adapt
> > >>>> the archiving so that at least for identical tarballs the md5 sums
> remain
> > >>>> the same? Or if you have other suggestions to deal with this
> without having
> > >>>> to change hardcoded checksums in the easybuild repos, that would be
> very
> > >>>> welcome too.
> > >>>>
> > >>>> Cheers
> > >>>> Joris
> > >>>>
> > >>>> --
> > >>>> Joris Meys
> > >>>> Statistical consultant
> > >>>>
> > >>>> Department of Data Analysis and Mathematical Modelling
> > >>>> Ghent University
> > >>>> Coupure Links 653, B-9000 Gent (Belgium)
> > >>>> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+G
> > >>>> ent,%C2%A0Belgium&entry=gmail&source=g>
> > >>>>
> > >>>> tel: +32 (0)9 264 61 79
> > >>>> -----------
> > >>>> Biowiskundedagen 2017-2018
> > >>>> http://www.biowiskundedagen.ugent.be/
> > >>>>
> > >>>> -------------------------------
> > >>>> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
> > >>>>
> > >>>
> > >>
> > >>
> > >> --
> > >> Joris Meys
> > >> Statistical consultant
> > >>
> > >> Department of Data Analysis and Mathematical Modelling
> > >> Ghent University
> > >> Coupure Links 653, B-9000 Gent (Belgium)
> > >>
> > >> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-
> 9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
> > >>
> > >> tel: +32 (0)9 264 61 79
> > >> -----------
> > >> Biowiskundedagen 2017-2018
> > >> http://www.biowiskundedagen.ugent.be/
> > >>
> > >> -------------------------------
> > >> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
> > >>
> > >
> > >
> > >
> > > --
> > > Joris Meys
> > > Statistical consultant
> > >
> > > Department of Data Analysis and Mathematical Modelling
> > > Ghent University
> > > Coupure Links 653, B-9000 Gent (Belgium)
> > >
> > > <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-
> 9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
> > >
> > > tel: +32 (0)9 264 61 79
> > > -----------
> > > Biowiskundedagen 2017-2018
> > > http://www.biowiskundedagen.ugent.be/
> > >
> > > -------------------------------
> > > Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
> > >
> >
> >
> >
> > --
> > Joris Meys
> > Statistical consultant
> >
> > Department of Data Analysis and Mathematical Modelling
> > Ghent University
> > Coupure Links 653, B-9000 Gent (Belgium)
> > <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-
> 9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
> >
> > tel: +32 (0)9 264 61 79
> > -----------
> > Biowiskundedagen 2017-2018
> > http://www.biowiskundedagen.ugent.be/
> >
> > -------------------------------
> > Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>



-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From edd @ending from debi@n@org  Fri Jun 29 13:36:27 2018
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Fri, 29 Jun 2018 06:36:27 -0500
Subject: [R-pkg-devel] Questions about making a database package
 (Rpolyhedra)
In-Reply-To: <CAOKDuOh0Ex0pf-bT7w=b7DnsdVbce0aPPAnxC+rONfg_R9a5=g@mail.gmail.com>
References: <CADJoD_Y7hAFhd+9F-Fo-mc2EOxyfitOeLy1rdj2jYP3-a33myQ@mail.gmail.com>
 <AM5PR0401MB2452E02083E4712DD2F9D83FD5A20@AM5PR0401MB2452.eurprd04.prod.outlook.com>
 <CADJoD_aXb3cnkoyqyt1j9tjEjMow6s9NrhjPJKGtKTrOSSDyxg@mail.gmail.com>
 <CAO1zAVZN4o2FyoYKS_AJO0v_QuUS7RkhsmkXNCQ7qgdVQcD9jg@mail.gmail.com>
 <CADJoD_ajDpcTEGdSc7M1mGGywHUL-uq_BB8hEgb3vJO_S97mTA@mail.gmail.com>
 <CAOKDuOh0Ex0pf-bT7w=b7DnsdVbce0aPPAnxC+rONfg_R9a5=g@mail.gmail.com>
Message-ID: <23350.6587.923489.551019@rob.eddelbuettel.com>


On 29 June 2018 at 09:15, Mark van der Loo wrote:
| Hi Alejandro,
| 
| Brooke Anderson gave a nice talk at useR!2017 addressing this exact issue.
| See
| https://schd.ws/hosted_files/user2017/19/anderson-eddelbuettel-use_r_talk.pdf
| for
| the slides. The basic idea is to use an external CRAN-like repository for
| the data back-end. Brooke used 'drat' to set up such a repo.

Thanks for the kind wordds. We also turned this fun project into an R Journal
paper with more background and details:

  https://journal.r-project.org/archive/2017/RJ-2017-026/index.html

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @lej@ndrob@r@nek @ending from gm@il@com  Fri Jun 29 22:34:16 2018
From: @lej@ndrob@r@nek @ending from gm@il@com (alejandro baranek)
Date: Fri, 29 Jun 2018 17:34:16 -0300
Subject: [R-pkg-devel] Questions about making a database package
 (Rpolyhedra)
In-Reply-To: <23350.6587.923489.551019@rob.eddelbuettel.com>
References: <CADJoD_Y7hAFhd+9F-Fo-mc2EOxyfitOeLy1rdj2jYP3-a33myQ@mail.gmail.com>
 <AM5PR0401MB2452E02083E4712DD2F9D83FD5A20@AM5PR0401MB2452.eurprd04.prod.outlook.com>
 <CADJoD_aXb3cnkoyqyt1j9tjEjMow6s9NrhjPJKGtKTrOSSDyxg@mail.gmail.com>
 <CAO1zAVZN4o2FyoYKS_AJO0v_QuUS7RkhsmkXNCQ7qgdVQcD9jg@mail.gmail.com>
 <CADJoD_ajDpcTEGdSc7M1mGGywHUL-uq_BB8hEgb3vJO_S97mTA@mail.gmail.com>
 <CAOKDuOh0Ex0pf-bT7w=b7DnsdVbce0aPPAnxC+rONfg_R9a5=g@mail.gmail.com>
 <23350.6587.923489.551019@rob.eddelbuettel.com>
Message-ID: <CADJoD_a=hoqiPStwJoWfozQxqcCAF-=FAEU1cDTwn4GZp9jMAA@mail.gmail.com>

Hello Mark, Dirk:

We will study your suggestions and write back in some days with our decided
approach.

Thanks!
Ale

2018-06-29 8:36 GMT-03:00 Dirk Eddelbuettel <edd at debian.org>:

>
> On 29 June 2018 at 09:15, Mark van der Loo wrote:
> | Hi Alejandro,
> |
> | Brooke Anderson gave a nice talk at useR!2017 addressing this exact
> issue.
> | See
> | https://schd.ws/hosted_files/user2017/19/anderson-
> eddelbuettel-use_r_talk.pdf
> | for
> | the slides. The basic idea is to use an external CRAN-like repository for
> | the data back-end. Brooke used 'drat' to set up such a repo.
>
> Thanks for the kind wordds. We also turned this fun project into an R
> Journal
> paper with more background and details:
>
>   https://journal.r-project.org/archive/2017/RJ-2017-026/index.html
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>



-- 
 alejandro baranek
@ken4rab <https://twitter.com/ken4rab>
qbotics <http://qbotics.tumblr.com/> | surferinvaders
<http://surferinvaders.tumblr.com> | algebraic-soundscapes
<http://imaginary.org/content/algebraic-soundscapes> | surfer-shuffle
<http://imaginary.org/program/surfer-shuffle>

	[[alternative HTML version deleted]]


From mlevy79 @ending from gm@il@com  Sat Jun 30 20:36:10 2018
From: mlevy79 @ending from gm@il@com (Michael Levy)
Date: Sat, 30 Jun 2018 12:36:10 -0600
Subject: [R-pkg-devel] Tests hang only on win-builder x64
Message-ID: <CAENSEbWhkprACZZjHm200AzPaRjp29tPo2ouhSzAh29EPU3NKg@mail.gmail.com>

Hi all,



My package's tests seem to be hanging on win-builder's x64 build for all
three R releases, but they complete okay on win-builder i386 and on
AppVeyor x64 (and on other platforms). The tests take a while to complete,
so I've split them into multiple files so that some output comes back every
few minutes. Any idea how I might fix this? Thanks.



** running tests for arch 'i386' ... [17m] OK

  Running 'testthat-1.R' [103s]

  Running 'testthat-2.R' [477s]

  Running 'testthat-3.R' [425s]

  Running 'testthat-4.R' [7s]

** running tests for arch 'x64' ... ERROR

Check process probably crashed or hung up for 20 minutes ... killed

Most likely this happened in the example checks (?),

if not, ignore the following last lines of example output:



======== End of example output (where/before crash/hang up occured ?)
========




?

	[[alternative HTML version deleted]]


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Sat Jun 30 22:59:12 2018
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Sat, 30 Jun 2018 22:59:12 +0200
Subject: [R-pkg-devel] Tests hang only on win-builder x64
In-Reply-To: <CAENSEbWhkprACZZjHm200AzPaRjp29tPo2ouhSzAh29EPU3NKg@mail.gmail.com>
References: <CAENSEbWhkprACZZjHm200AzPaRjp29tPo2ouhSzAh29EPU3NKg@mail.gmail.com>
Message-ID: <5fd75373-7b98-d1a5-8f14-005da21f1fe0@statistik.tu-dortmund.de>

Wekk, after 20 min the process is killed. If you spend 17 min in i386, 
and some time in the previous part of the checks, there is not much time 
left for the 64-bit checks ....


If you aim to submit the package to CRAN, note that the overall check 
time (including both architectures) should not exceed 10 minutes.

Best,
Uwe Ligges




On 30.06.2018 20:36, Michael Levy wrote:
> Hi all,
> 
> 
> 
> My package's tests seem to be hanging on win-builder's x64 build for all
> three R releases, but they complete okay on win-builder i386 and on
> AppVeyor x64 (and on other platforms). The tests take a while to complete,
> so I've split them into multiple files so that some output comes back every
> few minutes. Any idea how I might fix this? Thanks.
> 
> 
> 
> ** running tests for arch 'i386' ... [17m] OK
> 
>    Running 'testthat-1.R' [103s]
> 
>    Running 'testthat-2.R' [477s]
> 
>    Running 'testthat-3.R' [425s]
> 
>    Running 'testthat-4.R' [7s]
> 
> ** running tests for arch 'x64' ... ERROR
> 
> Check process probably crashed or hung up for 20 minutes ... killed
> 
> Most likely this happened in the example checks (?),
> 
> if not, ignore the following last lines of example output:
> 
> 
> 
> ======== End of example output (where/before crash/hang up occured ?)
> ========
> 
> 
> 
> 
> ?
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


