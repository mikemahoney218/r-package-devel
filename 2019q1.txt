From @ouvique @ending from gm@il@com  Tue Jan  1 11:39:38 2019
From: @ouvique @ending from gm@il@com (SOUVIK NATH)
Date: Tue, 1 Jan 2019 16:09:38 +0530
Subject: [R-pkg-devel] R package development
Message-ID: <CAJh+4sa6+t2MkPygNUX06e9QkTcGdCRZvfQPERCqAei4_X6DjA@mail.gmail.com>

Dear CRAN maintainers and R package developers,

Respected Sirs,



I am interested in submitting a package which I created in RStudio,  that
contains functions to compute the PDF,CDF and critical region of the
distribution of sample correlation coeffecient :r. While running a R CMD
check , it shows a warning() as follows :



Bad \usage lines found in documentation object 'Rcor':

    Spdf(r,rho,n),Fpdf(r,rho,n),Hpdf(r,rho,n),Fcdf(a,rho,n),Hcdf(r,rho,n)



Functions with \usage entries need to have the appropriate \alias

  entries, and all their arguments documented.

  The \usage entries must correspond to syntactically valid R code.



 Where the documentation for one of the R functions is given as follows :-



#' PDF using Simulation

#'

#' @description used for computing the probability density functional value
for the bivariate normal sample correlation coeffecient

#' @usage Spdf(r,rho,n)

#' @param r  sample correlation coeffecient of the bivariate normal
distribution sample

#' @param rho  population correlation coefficient of the bivariate normal
distribution

#' @param n  sample size of the required Bivariate Normal Distribution

#' @details uses Simulation to compute the PDF

#' @return PDF of the sample correlation coeffecient distribution

#' @author  Souvik Nath <souvique at gmail.com> ,Rituparna Sen

#' @references Anderson,T.W.,(2003) An Introduction to Multivariate
Statistical Analysis.Third Edition ,Chapter 4, Page No 125. A JOHN WILEY
AND SONS,INC.,PUBLICATION

#' @references DAVID,F.N.,(1954) TABLES OF THE ORDINATES AND THE
PROBABILITY INTEGRAL OF THE CORRELATION COEFFECIENT IN SMALL SAMPLES.
ISSUED BY THE BIOMETRIKA OFFICE,UNIVERSITY COLLEGE,LONDON

#' @seealso Fpdf,Hpdf,Fcdf,Hcdf,FQcdf,HQcdf,Scdf,cconfint

#' @examples ## If we want to calculate the pdf for "r=0.1,rho=0.1,n=3"

#' @examples ## Spdf(0.1,0.1,3) # 0.306

#' @import mvtnorm

#' @export



Please let me know what can be done in this case, regarding the
documentation. I have once submitted a copy of this package in CRAN few
weeks ago. I realize that the files may have been removed and I need to
resubmit them if required.



Kind Regards,

Souvik

	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Tue Jan  1 15:10:07 2019
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Tue, 1 Jan 2019 09:10:07 -0500
Subject: [R-pkg-devel] R package development
In-Reply-To: <CAJh+4sa6+t2MkPygNUX06e9QkTcGdCRZvfQPERCqAei4_X6DjA@mail.gmail.com>
References: <CAJh+4sa6+t2MkPygNUX06e9QkTcGdCRZvfQPERCqAei4_X6DjA@mail.gmail.com>
Message-ID: <08dbfcdc-b010-8da3-80a9-abb4848b3b3c@gmail.com>

On 01/01/2019 5:39 a.m., SOUVIK NATH wrote:
> Dear CRAN maintainers and R package developers,
> 
> Respected Sirs,
> 
> 
> 
> I am interested in submitting a package which I created in RStudio,  that
> contains functions to compute the PDF,CDF and critical region of the
> distribution of sample correlation coeffecient :r. While running a R CMD
> check , it shows a warning() as follows :
> 
> 
> 
> Bad \usage lines found in documentation object 'Rcor':
> 
>      Spdf(r,rho,n),Fpdf(r,rho,n),Hpdf(r,rho,n),Fcdf(a,rho,n),Hcdf(r,rho,n)
> 
> 
> 
> Functions with \usage entries need to have the appropriate \alias
> 
>    entries, and all their arguments documented.
> 
>    The \usage entries must correspond to syntactically valid R code.
> 
> 
> 
>   Where the documentation for one of the R functions is given as follows :-
> 
> 
> 
> #' PDF using Simulation
> 
> #'
> 
> #' @description used for computing the probability density functional value
> for the bivariate normal sample correlation coeffecient
> 
> #' @usage Spdf(r,rho,n)
> 
> #' @param r  sample correlation coeffecient of the bivariate normal
> distribution sample
> 
> #' @param rho  population correlation coefficient of the bivariate normal
> distribution
> 
> #' @param n  sample size of the required Bivariate Normal Distribution
> 
> #' @details uses Simulation to compute the PDF
> 
> #' @return PDF of the sample correlation coeffecient distribution
> 
> #' @author  Souvik Nath <souvique at gmail.com> ,Rituparna Sen
> 
> #' @references Anderson,T.W.,(2003) An Introduction to Multivariate
> Statistical Analysis.Third Edition ,Chapter 4, Page No 125. A JOHN WILEY
> AND SONS,INC.,PUBLICATION
> 
> #' @references DAVID,F.N.,(1954) TABLES OF THE ORDINATES AND THE
> PROBABILITY INTEGRAL OF THE CORRELATION COEFFECIENT IN SMALL SAMPLES.
> ISSUED BY THE BIOMETRIKA OFFICE,UNIVERSITY COLLEGE,LONDON
> 
> #' @seealso Fpdf,Hpdf,Fcdf,Hcdf,FQcdf,HQcdf,Scdf,cconfint
> 
> #' @examples ## If we want to calculate the pdf for "r=0.1,rho=0.1,n=3"
> 
> #' @examples ## Spdf(0.1,0.1,3) # 0.306
> 
> #' @import mvtnorm
> 
> #' @export
> 
> 
> 
> Please let me know what can be done in this case, regarding the
> documentation. I have once submitted a copy of this package in CRAN few
> weeks ago. I realize that the files may have been removed and I need to
> resubmit them if required.
> 

CRAN doesn't look at the Roxygen inputs, it looks at the .Rd files in 
the man directory.  From what you've posted, it is probably man/Rcor.Rd 
that you need to look at.  It will be up to you to make sure it follows 
the specification in Writing R Extensions to be a valid Rd file.  From 
the message, it appears you have a line


Spdf(r,rho,n),Fpdf(r,rho,n),Hpdf(r,rho,n),Fcdf(a,rho,n),Hcdf(r,rho,n)


in the file, and that is not valid in an Rd file.  It should perhaps be 
five lines,

Spdf(r,rho,n)
Fpdf(r,rho,n)
Hpdf(r,rho,n)
Fcdf(a,rho,n)
Hcdf(r,rho,n)

but without seeing the whole file we can't say for sure.

Duncan Murdoch


From @teve@the@b@ye@i@n @ending from gm@il@com  Tue Jan  1 18:37:28 2019
From: @teve@the@b@ye@i@n @ending from gm@il@com (Steven Scott)
Date: Tue, 1 Jan 2019 11:37:28 -0600
Subject: [R-pkg-devel] R package development
In-Reply-To: <08dbfcdc-b010-8da3-80a9-abb4848b3b3c@gmail.com>
References: <CAJh+4sa6+t2MkPygNUX06e9QkTcGdCRZvfQPERCqAei4_X6DjA@mail.gmail.com>
 <08dbfcdc-b010-8da3-80a9-abb4848b3b3c@gmail.com>
Message-ID: <CAJqTW44rTOTav3uyF4u9Qzp9Mc0z-5FaATJMefW8TaOHfYFtjA@mail.gmail.com>

Also, consider different names.  The convention in R is for a probability
distribution foo to have dfoo, pfoo, qfoo, and rfoo.  I'm not sure what S,
F and H stand for in your notation, so maybe consider giving them more
descriptive names?  If F is for Fisher then dFisherCor or something like
that.

On Tue, Jan 1, 2019 at 8:10 AM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 01/01/2019 5:39 a.m., SOUVIK NATH wrote:
> > Dear CRAN maintainers and R package developers,
> >
> > Respected Sirs,
> >
> >
> >
> > I am interested in submitting a package which I created in RStudio,  that
> > contains functions to compute the PDF,CDF and critical region of the
> > distribution of sample correlation coeffecient :r. While running a R CMD
> > check , it shows a warning() as follows :
> >
> >
> >
> > Bad \usage lines found in documentation object 'Rcor':
> >
> >
> Spdf(r,rho,n),Fpdf(r,rho,n),Hpdf(r,rho,n),Fcdf(a,rho,n),Hcdf(r,rho,n)
> >
> >
> >
> > Functions with \usage entries need to have the appropriate \alias
> >
> >    entries, and all their arguments documented.
> >
> >    The \usage entries must correspond to syntactically valid R code.
> >
> >
> >
> >   Where the documentation for one of the R functions is given as follows
> :-
> >
> >
> >
> > #' PDF using Simulation
> >
> > #'
> >
> > #' @description used for computing the probability density functional
> value
> > for the bivariate normal sample correlation coeffecient
> >
> > #' @usage Spdf(r,rho,n)
> >
> > #' @param r  sample correlation coeffecient of the bivariate normal
> > distribution sample
> >
> > #' @param rho  population correlation coefficient of the bivariate normal
> > distribution
> >
> > #' @param n  sample size of the required Bivariate Normal Distribution
> >
> > #' @details uses Simulation to compute the PDF
> >
> > #' @return PDF of the sample correlation coeffecient distribution
> >
> > #' @author  Souvik Nath <souvique at gmail.com> ,Rituparna Sen
> >
> > #' @references Anderson,T.W.,(2003) An Introduction to Multivariate
> > Statistical Analysis.Third Edition ,Chapter 4, Page No 125. A JOHN WILEY
> > AND SONS,INC.,PUBLICATION
> >
> > #' @references DAVID,F.N.,(1954) TABLES OF THE ORDINATES AND THE
> > PROBABILITY INTEGRAL OF THE CORRELATION COEFFECIENT IN SMALL SAMPLES.
> > ISSUED BY THE BIOMETRIKA OFFICE,UNIVERSITY COLLEGE,LONDON
> >
> > #' @seealso Fpdf,Hpdf,Fcdf,Hcdf,FQcdf,HQcdf,Scdf,cconfint
> >
> > #' @examples ## If we want to calculate the pdf for "r=0.1,rho=0.1,n=3"
> >
> > #' @examples ## Spdf(0.1,0.1,3) # 0.306
> >
> > #' @import mvtnorm
> >
> > #' @export
> >
> >
> >
> > Please let me know what can be done in this case, regarding the
> > documentation. I have once submitted a copy of this package in CRAN few
> > weeks ago. I realize that the files may have been removed and I need to
> > resubmit them if required.
> >
>
> CRAN doesn't look at the Roxygen inputs, it looks at the .Rd files in
> the man directory.  From what you've posted, it is probably man/Rcor.Rd
> that you need to look at.  It will be up to you to make sure it follows
> the specification in Writing R Extensions to be a valid Rd file.  From
> the message, it appears you have a line
>
>
> Spdf(r,rho,n),Fpdf(r,rho,n),Hpdf(r,rho,n),Fcdf(a,rho,n),Hcdf(r,rho,n)
>
>
> in the file, and that is not valid in an Rd file.  It should perhaps be
> five lines,
>
> Spdf(r,rho,n)
> Fpdf(r,rho,n)
> Hpdf(r,rho,n)
> Fcdf(a,rho,n)
> Hcdf(r,rho,n)
>
> but without seeing the whole file we can't say for sure.
>
> Duncan Murdoch
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From bri@n @ending from br@verock@com  Wed Jan  2 12:25:20 2019
From: bri@n @ending from br@verock@com (Brian G. Peterson)
Date: Wed, 2 Jan 2019 05:25:20 -0600
Subject: [R-pkg-devel] R package development
In-Reply-To: <CAJh+4sa6+t2MkPygNUX06e9QkTcGdCRZvfQPERCqAei4_X6DjA@mail.gmail.com>
References: <CAJh+4sa6+t2MkPygNUX06e9QkTcGdCRZvfQPERCqAei4_X6DjA@mail.gmail.com>
Message-ID: <d077cb62-88a6-77e6-283b-afedf76c7659@braverock.com>

Normally you do not need to specify @usage in roxygen source files.

As Duncan noted, without seeing everything, we are only guessing, but I 
suspect that you have tried to combine manual @usage directives with 
@alias or @Rdfile directives in the roxygen for the other functions.

If my guesses are correct, I would put all of your descriptive text in 
one place, and simply use @Rdfile for the other functions.  Roxygen can 
generate the usage automatically.

If either Duncan's hints or mine leave you still wondering what to do, 
please post a link to the source repository, and I will take a look.

Regards,

Brian

On 01/01/2019 04:39 AM, SOUVIK NATH wrote:
> Dear CRAN maintainers and R package developers,
> 
> Respected Sirs,
> 
> I am interested in submitting a package which I created in RStudio,  that
> contains functions to compute the PDF,CDF and critical region of the
> distribution of sample correlation coeffecient :r. While running a R CMD
> check , it shows a warning() as follows :
> 
> Bad \usage lines found in documentation object 'Rcor':
> 
>      Spdf(r,rho,n),Fpdf(r,rho,n),Hpdf(r,rho,n),Fcdf(a,rho,n),Hcdf(r,rho,n)
> 
> Functions with \usage entries need to have the appropriate \alias
> 
>    entries, and all their arguments documented.
> 
>    The \usage entries must correspond to syntactically valid R code.
> 
>   Where the documentation for one of the R functions is given as follows :-
> 
> #' PDF using Simulation
> #'
> #' @description used for computing the probability density functional value
> for the bivariate normal sample correlation coeffecient
> #' @usage Spdf(r,rho,n)
> #' @param r  sample correlation coeffecient of the bivariate normal
> distribution sample
> #' @param rho  population correlation coefficient of the bivariate normal
> distribution
> #' @param n  sample size of the required Bivariate Normal Distribution
> #' @details uses Simulation to compute the PDF
> #' @return PDF of the sample correlation coeffecient distribution
> #' @author  Souvik Nath <souvique at gmail.com> ,Rituparna Sen
> #' @references Anderson,T.W.,(2003) An Introduction to Multivariate
> Statistical Analysis.Third Edition ,Chapter 4, Page No 125. A JOHN WILEY
> AND SONS,INC.,PUBLICATION
> #' @references DAVID,F.N.,(1954) TABLES OF THE ORDINATES AND THE
> PROBABILITY INTEGRAL OF THE CORRELATION COEFFECIENT IN SMALL SAMPLES.
> ISSUED BY THE BIOMETRIKA OFFICE,UNIVERSITY COLLEGE,LONDON
> #' @seealso Fpdf,Hpdf,Fcdf,Hcdf,FQcdf,HQcdf,Scdf,cconfint
> #' @examples ## If we want to calculate the pdf for "r=0.1,rho=0.1,n=3"
> #' @examples ## Spdf(0.1,0.1,3) # 0.306
> #' @import mvtnorm
> #' @export
> 
> Please let me know what can be done in this case, regarding the
> documentation. I have once submitted a copy of this package in CRAN few
> weeks ago. I realize that the files may have been removed and I need to
> resubmit them if required.
> 
> Kind Regards,
> 
> Souvik


From m@ximili@n@leodolter @ending from gm@il@com  Wed Jan  2 16:17:03 2019
From: m@ximili@n@leodolter @ending from gm@il@com (Maximilian Leodolter)
Date: Wed, 2 Jan 2019 16:17:03 +0100
Subject: [R-pkg-devel] UBSAN Problems with Memory Sanitizer
Message-ID: <CAMi3rCB3grPVMX5wYxx0b0A601CXBrvSLZqrB7bkEA0PP9CBuA@mail.gmail.com>

Hi,
I just wanted to upload a new version of my package (IncDTW) but got the
message that my old version causes the following error, even though it
works perfectly fine.

The error message says:

runtime error: member call on address 0x7f4c77dcb200 which does not
point to an object of type 'scheduler'
0x7f4c77dcb200: note: object is of type
'tbb::internal::custom_scheduler<tbb::internal::IntelSchedulerTraits>'


The error messages are given here in detail
https://www.stats.ox.ac.uk/pub/bdr/memtests/clang-UBSAN/IncDTW/tests/testthat.Rout
and here

https://www.stats.ox.ac.uk/pub/bdr/memtests/gcc-UBSAN/IncDTW/tests/testthat.Rout


And this is the cran-github mirror of my package
https://github.com/cran/IncDTW

I have no idea where the error messages point to and what causes the error,
even less how to solve it.

 I'm new to C++ and RcppParallel and don't really know what to do. Can
someone please help?

Thanks, Cheers Max

	[[alternative HTML version deleted]]


From edd @ending from debi@n@org  Wed Jan  2 17:02:28 2019
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Wed, 2 Jan 2019 10:02:28 -0600
Subject: [R-pkg-devel] UBSAN Problems with Memory Sanitizer
In-Reply-To: <CAMi3rCB3grPVMX5wYxx0b0A601CXBrvSLZqrB7bkEA0PP9CBuA@mail.gmail.com>
References: <CAMi3rCB3grPVMX5wYxx0b0A601CXBrvSLZqrB7bkEA0PP9CBuA@mail.gmail.com>
Message-ID: <23596.57492.529318.106412@rob.eddelbuettel.com>


On 2 January 2019 at 16:17, Maximilian Leodolter wrote:
| I just wanted to upload a new version of my package (IncDTW) but got the
| message that my old version causes the following error, even though it
| works perfectly fine.
| 
| The error message says:
| 
| runtime error: member call on address 0x7f4c77dcb200 which does not
| point to an object of type 'scheduler'
| 0x7f4c77dcb200: note: object is of type
| 'tbb::internal::custom_scheduler<tbb::internal::IntelSchedulerTraits>'
| 
| 
| The error messages are given here in detail
| https://www.stats.ox.ac.uk/pub/bdr/memtests/clang-UBSAN/IncDTW/tests/testthat.Rout
| and here
| 
| https://www.stats.ox.ac.uk/pub/bdr/memtests/gcc-UBSAN/IncDTW/tests/testthat.Rout
| 
| 
| And this is the cran-github mirror of my package
| https://github.com/cran/IncDTW
| 
| I have no idea where the error messages point to and what causes the error,
| even less how to solve it.
| 
|  I'm new to C++ and RcppParallel and don't really know what to do. Can
| someone please help?

Rock, meet hard place. It seems you are getting an UBSAN error from an
external library. That can happen, and sometimes you get to explain it to
CRAN so that the package gets admitted.

Having glanced at the output below the page at
  https://cloud.r-project.org/web/checks/check_results_IncDTW.html
I think there is little you can do on your end about the UBSAN issues.

I presume you did your part to make the NOTE from the vignette disappear?

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From m@ximili@n@leodolter @ending from gm@il@com  Wed Jan  2 22:31:04 2019
From: m@ximili@n@leodolter @ending from gm@il@com (Maximilian Leodolter)
Date: Wed, 2 Jan 2019 22:31:04 +0100
Subject: [R-pkg-devel] UBSAN Problems with Memory Sanitizer
In-Reply-To: <23596.57492.529318.106412@rob.eddelbuettel.com>
References: <CAMi3rCB3grPVMX5wYxx0b0A601CXBrvSLZqrB7bkEA0PP9CBuA@mail.gmail.com>
 <23596.57492.529318.106412@rob.eddelbuettel.com>
Message-ID: <CAMi3rCCXLaXAjS_7HMJ0xzq3oR3E6PsWKNsLFWC2z4ZEO1SS6g@mail.gmail.com>

Ok thanks Dirk! I'll try to explain to the CRAN team.
Yes the vignette-issue because of duplicated file titles is solved.

Best, Max

On Wed, Jan 2, 2019 at 5:02 PM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 2 January 2019 at 16:17, Maximilian Leodolter wrote:
> | I just wanted to upload a new version of my package (IncDTW) but got the
> | message that my old version causes the following error, even though it
> | works perfectly fine.
> |
> | The error message says:
> |
> | runtime error: member call on address 0x7f4c77dcb200 which does not
> | point to an object of type 'scheduler'
> | 0x7f4c77dcb200: note: object is of type
> | 'tbb::internal::custom_scheduler<tbb::internal::IntelSchedulerTraits>'
> |
> |
> | The error messages are given here in detail
> |
> https://www.stats.ox.ac.uk/pub/bdr/memtests/clang-UBSAN/IncDTW/tests/testthat.Rout
> | and here
> |
> |
> https://www.stats.ox.ac.uk/pub/bdr/memtests/gcc-UBSAN/IncDTW/tests/testthat.Rout
> |
> |
> | And this is the cran-github mirror of my package
> | https://github.com/cran/IncDTW
> |
> | I have no idea where the error messages point to and what causes the
> error,
> | even less how to solve it.
> |
> |  I'm new to C++ and RcppParallel and don't really know what to do. Can
> | someone please help?
>
> Rock, meet hard place. It seems you are getting an UBSAN error from an
> external library. That can happen, and sometimes you get to explain it to
> CRAN so that the package gets admitted.
>
> Having glanced at the output below the page at
>   https://cloud.r-project.org/web/checks/check_results_IncDTW.html
> I think there is little you can do on your end about the UBSAN issues.
>
> I presume you did your part to make the NOTE from the vignette disappear?
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From edd @ending from debi@n@org  Fri Jan  4 16:43:29 2019
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Fri, 4 Jan 2019 09:43:29 -0600
Subject: [R-pkg-devel] About a need for hooks from R CMD ... commands,
 and a question
Message-ID: <23599.32545.434848.885970@rob.eddelbuettel.com>


For a few years now I had mused about how nice it would be to have other
scripts triggered like `cleanup`.  For Rcpp, it would be nice to run
compileAttributes(). For roxygen2, it would be nice to run roxygenize() 
(especially if that continued to work the way it did, but I digress).
That was mostly a "wouldn't it be nice" question and not that urgent as I
wrote myself littler scripts for most tasks anyway.

But I now have a related problem at work. We are authoring C++ libraries and
R packages 'mono-repo' style. And I need to reference builds of the R
packages back to the repo branches / repo directories used where R CMD build
ran in a branch -- in order to at R CMD INSTALL time access the matching
header files and libraries from that branch.  I do not see an obvious way of
encoding this in the .tar.gz created by the R CMD build step. The best I can
think of is creating binaries via R CMD INSTALL --build instead of creating
source tarballs.

Is there something better I am missing? Any hacks, hints, or ideas?

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From iuc@r @ending from fedor@project@org  Fri Jan  4 19:24:08 2019
From: iuc@r @ending from fedor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Fri, 4 Jan 2019 19:24:08 +0100
Subject: [R-pkg-devel] About a need for hooks from R CMD ... commands,
 and a question
In-Reply-To: <23599.32545.434848.885970@rob.eddelbuettel.com>
References: <23599.32545.434848.885970@rob.eddelbuettel.com>
Message-ID: <CALEXWq0p6HW_Fr7zPM4fGO+TqYFGd5oZz=pGZqMydqnLqDqxPw@mail.gmail.com>

On Fri, 4 Jan 2019 at 16:43, Dirk Eddelbuettel <edd at debian.org> wrote:
>
>
> For a few years now I had mused about how nice it would be to have other
> scripts triggered like `cleanup`.  For Rcpp, it would be nice to run
> compileAttributes(). For roxygen2, it would be nice to run roxygenize()
> (especially if that continued to work the way it did, but I digress).
> That was mostly a "wouldn't it be nice" question and not that urgent as I
> wrote myself littler scripts for most tasks anyway.
>
> But I now have a related problem at work. We are authoring C++ libraries and
> R packages 'mono-repo' style. And I need to reference builds of the R
> packages back to the repo branches / repo directories used where R CMD build
> ran in a branch -- in order to at R CMD INSTALL time access the matching
> header files and libraries from that branch.  I do not see an obvious way of
> encoding this in the .tar.gz created by the R CMD build step. The best I can
> think of is creating binaries via R CMD INSTALL --build instead of creating
> source tarballs.
>
> Is there something better I am missing? Any hacks, hints, or ideas?

I'm not sure whether I understand correctly what you are trying to
achieve. Isn't generating a custom configure script enough for your
needs?

I?aki


From edd @ending from debi@n@org  Fri Jan  4 19:42:06 2019
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Fri, 4 Jan 2019 12:42:06 -0600
Subject: [R-pkg-devel] About a need for hooks from R CMD ... commands,
 and a question
In-Reply-To: <CALEXWq0p6HW_Fr7zPM4fGO+TqYFGd5oZz=pGZqMydqnLqDqxPw@mail.gmail.com>
References: <23599.32545.434848.885970@rob.eddelbuettel.com>
 <CALEXWq0p6HW_Fr7zPM4fGO+TqYFGd5oZz=pGZqMydqnLqDqxPw@mail.gmail.com>
Message-ID: <23599.43262.195638.370774@rob.eddelbuettel.com>


On 4 January 2019 at 19:24, I?aki Ucar wrote:
| On Fri, 4 Jan 2019 at 16:43, Dirk Eddelbuettel <edd at debian.org> wrote:
| >
| >
| > For a few years now I had mused about how nice it would be to have other
| > scripts triggered like `cleanup`.  For Rcpp, it would be nice to run
| > compileAttributes(). For roxygen2, it would be nice to run roxygenize()
| > (especially if that continued to work the way it did, but I digress).
| > That was mostly a "wouldn't it be nice" question and not that urgent as I
| > wrote myself littler scripts for most tasks anyway.
| >
| > But I now have a related problem at work. We are authoring C++ libraries and
| > R packages 'mono-repo' style. And I need to reference builds of the R
| > packages back to the repo branches / repo directories used where R CMD build
| > ran in a branch -- in order to at R CMD INSTALL time access the matching
| > header files and libraries from that branch.  I do not see an obvious way of
| > encoding this in the .tar.gz created by the R CMD build step. The best I can
| > think of is creating binaries via R CMD INSTALL --build instead of creating
| > source tarballs.
| >
| > Is there something better I am missing? Any hacks, hints, or ideas?
| 
| I'm not sure whether I understand correctly what you are trying to
| achieve. Isn't generating a custom configure script enough for your
| needs?

That is what I thought yesterday when I wrote / updated and tested those.
They work great when you install from source as they have access to shell's
${PWD} and R's getwd().

But when you run R CMD build, (essentially) just cleanup and a tar are
running. No other code. Hence my Subject: here -- a need for a hook.

Once you have built a .tar.gz and run R CMD INSTALL on it, R goes off to
_another temporary directory_ and while configure may be running ... you are
no longer in the directory you called it from. So I have now lost the
connection to the particular variant of headers and libraries I may have had
in that branch.

Doing R CMD INSTALL --build ... is a workaround.  But it still would be nice
to have an explicit hook.

Hope this explains it better, and thanks for the follow-up.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From iuc@r @ending from fedor@project@org  Fri Jan  4 20:10:35 2019
From: iuc@r @ending from fedor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Fri, 4 Jan 2019 20:10:35 +0100
Subject: [R-pkg-devel] About a need for hooks from R CMD ... commands,
 and a question
In-Reply-To: <23599.43262.195638.370774@rob.eddelbuettel.com>
References: <23599.32545.434848.885970@rob.eddelbuettel.com>
 <CALEXWq0p6HW_Fr7zPM4fGO+TqYFGd5oZz=pGZqMydqnLqDqxPw@mail.gmail.com>
 <23599.43262.195638.370774@rob.eddelbuettel.com>
Message-ID: <CALEXWq2ntbGns43u_EcL=G2TCCTfYPB2kUKVXY_vNiUmYOrbMQ@mail.gmail.com>

On Fri, 4 Jan 2019 at 19:42, Dirk Eddelbuettel <edd at debian.org> wrote:
>
>
> On 4 January 2019 at 19:24, I?aki Ucar wrote:
> | On Fri, 4 Jan 2019 at 16:43, Dirk Eddelbuettel <edd at debian.org> wrote:
> | >
> | >
> | > For a few years now I had mused about how nice it would be to have other
> | > scripts triggered like `cleanup`.  For Rcpp, it would be nice to run
> | > compileAttributes(). For roxygen2, it would be nice to run roxygenize()
> | > (especially if that continued to work the way it did, but I digress).
> | > That was mostly a "wouldn't it be nice" question and not that urgent as I
> | > wrote myself littler scripts for most tasks anyway.
> | >
> | > But I now have a related problem at work. We are authoring C++ libraries and
> | > R packages 'mono-repo' style. And I need to reference builds of the R
> | > packages back to the repo branches / repo directories used where R CMD build
> | > ran in a branch -- in order to at R CMD INSTALL time access the matching
> | > header files and libraries from that branch.  I do not see an obvious way of
> | > encoding this in the .tar.gz created by the R CMD build step. The best I can
> | > think of is creating binaries via R CMD INSTALL --build instead of creating
> | > source tarballs.
> | >
> | > Is there something better I am missing? Any hacks, hints, or ideas?
> |
> | I'm not sure whether I understand correctly what you are trying to
> | achieve. Isn't generating a custom configure script enough for your
> | needs?
>
> That is what I thought yesterday when I wrote / updated and tested those.
> They work great when you install from source as they have access to shell's
> ${PWD} and R's getwd().
>
> But when you run R CMD build, (essentially) just cleanup and a tar are
> running. No other code. Hence my Subject: here -- a need for a hook.
>
> Once you have built a .tar.gz and run R CMD INSTALL on it, R goes off to
> _another temporary directory_ and while configure may be running ... you are
> no longer in the directory you called it from. So I have now lost the
> connection to the particular variant of headers and libraries I may have had
> in that branch.
>
> Doing R CMD INSTALL --build ... is a workaround.  But it still would be nice
> to have an explicit hook.
>
> Hope this explains it better, and thanks for the follow-up.

I see. Then I suggest the following hack (not tested). If the package
has a vignette, put there a hidden chunk that generates a file with
info about the branch and the path. This file will be available for
your configure script, which runs at INSTALL time. There you can,
e.g., retrieve that branch from a remote repo.

I?aki


From murdoch@dunc@n @ending from gm@il@com  Fri Jan  4 20:13:52 2019
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Fri, 4 Jan 2019 14:13:52 -0500
Subject: [R-pkg-devel] About a need for hooks from R CMD ... commands,
 and a question
In-Reply-To: <23599.43262.195638.370774@rob.eddelbuettel.com>
References: <23599.32545.434848.885970@rob.eddelbuettel.com>
 <CALEXWq0p6HW_Fr7zPM4fGO+TqYFGd5oZz=pGZqMydqnLqDqxPw@mail.gmail.com>
 <23599.43262.195638.370774@rob.eddelbuettel.com>
Message-ID: <86b3c5ce-5152-b03d-b6c0-dccd46f7571a@gmail.com>

On 04/01/2019 1:42 p.m., Dirk Eddelbuettel wrote:
> 
> On 4 January 2019 at 19:24, I?aki Ucar wrote:
> | On Fri, 4 Jan 2019 at 16:43, Dirk Eddelbuettel <edd at debian.org> wrote:
> | >
> | >
> | > For a few years now I had mused about how nice it would be to have other
> | > scripts triggered like `cleanup`.  For Rcpp, it would be nice to run
> | > compileAttributes(). For roxygen2, it would be nice to run roxygenize()
> | > (especially if that continued to work the way it did, but I digress).
> | > That was mostly a "wouldn't it be nice" question and not that urgent as I
> | > wrote myself littler scripts for most tasks anyway.
> | >
> | > But I now have a related problem at work. We are authoring C++ libraries and
> | > R packages 'mono-repo' style. And I need to reference builds of the R
> | > packages back to the repo branches / repo directories used where R CMD build
> | > ran in a branch -- in order to at R CMD INSTALL time access the matching
> | > header files and libraries from that branch.  I do not see an obvious way of
> | > encoding this in the .tar.gz created by the R CMD build step. The best I can
> | > think of is creating binaries via R CMD INSTALL --build instead of creating
> | > source tarballs.
> | >
> | > Is there something better I am missing? Any hacks, hints, or ideas?
> |
> | I'm not sure whether I understand correctly what you are trying to
> | achieve. Isn't generating a custom configure script enough for your
> | needs?
> 
> That is what I thought yesterday when I wrote / updated and tested those.
> They work great when you install from source as they have access to shell's
> ${PWD} and R's getwd().
> 
> But when you run R CMD build, (essentially) just cleanup and a tar are
> running. No other code. Hence my Subject: here -- a need for a hook.
> 
> Once you have built a .tar.gz and run R CMD INSTALL on it, R goes off to
> _another temporary directory_ and while configure may be running ... you are
> no longer in the directory you called it from. So I have now lost the
> connection to the particular variant of headers and libraries I may have had
> in that branch.
> 
> Doing R CMD INSTALL --build ... is a workaround.  But it still would be nice
> to have an explicit hook.
> 
> Hope this explains it better, and thanks for the follow-up.

If you want a total hack, the help system can run R code during a build, 
e.g. \Sexpr[stage=build]{paste("Built at", Sys.time())}.  Certainly it 
could embed some information in a help page; perhaps it could do more. 
Similarly, vignettes are typically built during R CMD build, so they 
might be able to have useful side effects.

But it seems likely that something less of a kludge would be desirable.

Duncan Murdoch


From edd @ending from debi@n@org  Fri Jan  4 20:35:43 2019
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Fri, 4 Jan 2019 13:35:43 -0600
Subject: [R-pkg-devel] About a need for hooks from R CMD ... commands,
 and a question
In-Reply-To: <86b3c5ce-5152-b03d-b6c0-dccd46f7571a@gmail.com>
References: <23599.32545.434848.885970@rob.eddelbuettel.com>
 <CALEXWq0p6HW_Fr7zPM4fGO+TqYFGd5oZz=pGZqMydqnLqDqxPw@mail.gmail.com>
 <23599.43262.195638.370774@rob.eddelbuettel.com>
 <86b3c5ce-5152-b03d-b6c0-dccd46f7571a@gmail.com>
Message-ID: <23599.46479.680692.770302@rob.eddelbuettel.com>


I?aki, Duncan,

Fabulous -- that is just the type of 'hack' I was hoping for in the short
term.

Longer term, it would indeed be nice to do something about this and create
something better.  I had looked once or twice at packages utils and tools but
didn't quite find the right spot to connect it to. Pointers appreciated.

Best, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From mtmorg@n@bioc @ending from gm@il@com  Fri Jan  4 20:37:15 2019
From: mtmorg@n@bioc @ending from gm@il@com (Martin Morgan)
Date: Fri, 4 Jan 2019 19:37:15 +0000
Subject: [R-pkg-devel] About a need for hooks from R CMD ... commands,
 and a question
In-Reply-To: <23599.43262.195638.370774@rob.eddelbuettel.com>
References: <23599.32545.434848.885970@rob.eddelbuettel.com>
 <CALEXWq0p6HW_Fr7zPM4fGO+TqYFGd5oZz=pGZqMydqnLqDqxPw@mail.gmail.com>
 <23599.43262.195638.370774@rob.eddelbuettel.com>
Message-ID: <MWHPR05MB35826A9B938B4F59D63A0F29F98E0@MWHPR05MB3582.namprd05.prod.outlook.com>

Add a tag to the DESCRIPTION file or configure.ac-like indicating the git (presumably) revision, perhaps like https://stackoverflow.com/a/11535358/547331 ?

?On 1/4/19, 1:42 PM, "R-package-devel on behalf of Dirk Eddelbuettel" <r-package-devel-bounces at r-project.org on behalf of edd at debian.org> wrote:

    
    On 4 January 2019 at 19:24, I?aki Ucar wrote:
    | On Fri, 4 Jan 2019 at 16:43, Dirk Eddelbuettel <edd at debian.org> wrote:
    | >
    | >
    | > For a few years now I had mused about how nice it would be to have other
    | > scripts triggered like `cleanup`.  For Rcpp, it would be nice to run
    | > compileAttributes(). For roxygen2, it would be nice to run roxygenize()
    | > (especially if that continued to work the way it did, but I digress).
    | > That was mostly a "wouldn't it be nice" question and not that urgent as I
    | > wrote myself littler scripts for most tasks anyway.
    | >
    | > But I now have a related problem at work. We are authoring C++ libraries and
    | > R packages 'mono-repo' style. And I need to reference builds of the R
    | > packages back to the repo branches / repo directories used where R CMD build
    | > ran in a branch -- in order to at R CMD INSTALL time access the matching
    | > header files and libraries from that branch.  I do not see an obvious way of
    | > encoding this in the .tar.gz created by the R CMD build step. The best I can
    | > think of is creating binaries via R CMD INSTALL --build instead of creating
    | > source tarballs.
    | >
    | > Is there something better I am missing? Any hacks, hints, or ideas?
    | 
    | I'm not sure whether I understand correctly what you are trying to
    | achieve. Isn't generating a custom configure script enough for your
    | needs?
    
    That is what I thought yesterday when I wrote / updated and tested those.
    They work great when you install from source as they have access to shell's
    ${PWD} and R's getwd().
    
    But when you run R CMD build, (essentially) just cleanup and a tar are
    running. No other code. Hence my Subject: here -- a need for a hook.
    
    Once you have built a .tar.gz and run R CMD INSTALL on it, R goes off to
    _another temporary directory_ and while configure may be running ... you are
    no longer in the directory you called it from. So I have now lost the
    connection to the particular variant of headers and libraries I may have had
    in that branch.
    
    Doing R CMD INSTALL --build ... is a workaround.  But it still would be nice
    to have an explicit hook.
    
    Hope this explains it better, and thanks for the follow-up.
    
    Dirk
    
    -- 
    http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
    
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel
    

From edd @ending from debi@n@org  Fri Jan  4 21:26:37 2019
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Fri, 4 Jan 2019 14:26:37 -0600
Subject: [R-pkg-devel] About a need for hooks from R CMD ... commands,
 and a question
In-Reply-To: <MWHPR05MB35826A9B938B4F59D63A0F29F98E0@MWHPR05MB3582.namprd05.prod.outlook.com>
References: <23599.32545.434848.885970@rob.eddelbuettel.com>
 <CALEXWq0p6HW_Fr7zPM4fGO+TqYFGd5oZz=pGZqMydqnLqDqxPw@mail.gmail.com>
 <23599.43262.195638.370774@rob.eddelbuettel.com>
 <MWHPR05MB35826A9B938B4F59D63A0F29F98E0@MWHPR05MB3582.namprd05.prod.outlook.com>
Message-ID: <23599.49533.326099.746149@rob.eddelbuettel.com>


On 4 January 2019 at 19:37, Martin Morgan wrote:
| Add a tag to the DESCRIPTION file or configure.ac-like indicating the git (presumably) revision, perhaps like https://stackoverflow.com/a/11535358/547331 ?

I need the path. I need to find the particular build / checkout of headers
and libaries.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From iuc@r @ending from fedor@project@org  Sat Jan  5 00:00:20 2019
From: iuc@r @ending from fedor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Sat, 5 Jan 2019 00:00:20 +0100
Subject: [R-pkg-devel] About a need for hooks from R CMD ... commands,
 and a question
In-Reply-To: <CALEXWq2ntbGns43u_EcL=G2TCCTfYPB2kUKVXY_vNiUmYOrbMQ@mail.gmail.com>
References: <23599.32545.434848.885970@rob.eddelbuettel.com>
 <CALEXWq0p6HW_Fr7zPM4fGO+TqYFGd5oZz=pGZqMydqnLqDqxPw@mail.gmail.com>
 <23599.43262.195638.370774@rob.eddelbuettel.com>
 <CALEXWq2ntbGns43u_EcL=G2TCCTfYPB2kUKVXY_vNiUmYOrbMQ@mail.gmail.com>
Message-ID: <CALEXWq1hTCydUAvQxrsE=ef=8Ud92uzMAM7_SMypm4M1BcgrDg@mail.gmail.com>

On Fri, 4 Jan 2019 at 20:10, I?aki Ucar <iucar at fedoraproject.org> wrote:
>
> I see. Then I suggest the following hack (not tested). If the package
> has a vignette, put there a hidden chunk that generates a file with
> info about the branch and the path. This file will be available for
> your configure script, which runs at INSTALL time. There you can,
> e.g., retrieve that branch from a remote repo.

Actually, if there is any vignette, the configure script is executed
during the build process, because R needs to install the package to
build the vignettes. There, you can rely on $OLDPWD to retrieve the
path to the package.

I?aki


From edd @ending from debi@n@org  Sat Jan  5 00:29:25 2019
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Fri, 4 Jan 2019 17:29:25 -0600
Subject: [R-pkg-devel] About a need for hooks from R CMD ... commands,
 and a question
In-Reply-To: <CALEXWq1hTCydUAvQxrsE=ef=8Ud92uzMAM7_SMypm4M1BcgrDg@mail.gmail.com>
References: <23599.32545.434848.885970@rob.eddelbuettel.com>
 <CALEXWq0p6HW_Fr7zPM4fGO+TqYFGd5oZz=pGZqMydqnLqDqxPw@mail.gmail.com>
 <23599.43262.195638.370774@rob.eddelbuettel.com>
 <CALEXWq2ntbGns43u_EcL=G2TCCTfYPB2kUKVXY_vNiUmYOrbMQ@mail.gmail.com>
 <CALEXWq1hTCydUAvQxrsE=ef=8Ud92uzMAM7_SMypm4M1BcgrDg@mail.gmail.com>
Message-ID: <23599.60501.570656.351153@rob.eddelbuettel.com>


On 5 January 2019 at 00:00, I?aki Ucar wrote:
| On Fri, 4 Jan 2019 at 20:10, I?aki Ucar <iucar at fedoraproject.org> wrote:
| >
| > I see. Then I suggest the following hack (not tested). If the package
| > has a vignette, put there a hidden chunk that generates a file with
| > info about the branch and the path. This file will be available for
| > your configure script, which runs at INSTALL time. There you can,
| > e.g., retrieve that branch from a remote repo.
| 
| Actually, if there is any vignette, the configure script is executed
| during the build process, because R needs to install the package to
| build the vignettes. There, you can rely on $OLDPWD to retrieve the
| path to the package.

Not really. Consider

  ~/git/repo/proj-brnchA
  ~/git/repo/proj-brnchB
  ~/git/repo/proj-brnchC

where each branch may have a in-repo build with static libraries and
header. And I build Rpkg_0.1.0.tar.gz in each with R CMD build. I need inside
of Rpkg_0.1.0.tar.gz a reference to whether we need headers from A, B or C.

$OLDPWD does not (generally) give me that.  Only if I invoked R CMD INSTALL
in the path.  My preference would be to do some "not unlink configure" which
write down the path in src/Makevars.  I think the vignette trick will let me
do that but I have not had time to try.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From bbolker @ending from gm@il@com  Tue Jan  8 04:56:51 2019
From: bbolker @ending from gm@il@com (Ben Bolker)
Date: Mon, 7 Jan 2019 22:56:51 -0500
Subject: [R-pkg-devel] troubleshooting hard-to-reproduce errors
Message-ID: <fba93f8c-6a63-6f1c-26b9-e782e8476e90@gmail.com>


 My colleagues and I are preparing a new submission of a package for
CRAN (https://github.com/glmmTMB/glmmTMB/tree/master/glmmTMB).  We've
tested it on all the platforms we have access to: Travis/Linux (devel
and release), MacOS (release), Ubuntu 16.04 (release), win-builder
(devel and release), without any serious problems.

 On CRAN's Debian test machine, we get an ERROR and a WARNING.

1. Can anyone suggest the best way to test/find a platform where we can
figure out what's going on? I haven't used R-hub: should I try that?

2.  The specific problem is in the "downstream_methods" example:
<https://github.com/glmmTMB/glmmTMB/blob/master/glmmTMB/man/downstream_methods.Rd#L65-L67>

warp.lm <- glmmTMB(breaks ~ wool * tension, data = warpbreaks)
if (require(emmeans)) {
     emmeans (warp.lm, poly ~ tension | wool)
}

 the error is:

 Loading required package: emmeans
 Error in ref_grid(object, ...) :
   Can't handle an object of class  'glmmTMB'
  Use help("models", package = "emmeans") for information on supported
models.
 Calls: emmeans -> ref_grid
 Execution halted


 I can imagine that this has something to do with environment/method
loading.  If I run

example("downstream_methods", package="glmmTMB")

in an R console it works fine (even if glmmTMB isn't loaded).

I can reproduce the error if *without loading the glmmTMB package* I run

warp.lm <- glmmTMB::glmmTMB(breaks ~ wool * tension, data = warpbreaks)
if (require(emmeans)) {
     emmeans (warp.lm, poly ~ tension | wool)
}

... but I don't see why the methods from a package wouldn't be loaded
when running its own examples ??

3. The other problem is in vignette building (see below).  Any
suggestions for debugging since it doesn't seem to fail locally?
The lines indicated suggest some similar kind of method-access problem
<https://github.com/glmmTMB/glmmTMB/blob/master/glmmTMB/vignettes/model_evaluation.rmd#L94-L95>:


Anova(owls_nb1)  ## default type II
Anova(owls_nb1,type="III")

  Any suggestions welcome ...

 cheers
   Ben Bolker

---
* checking re-building of vignette outputs ... [80s/81s] WARNING
Error(s) in re-building vignettes:
  ...
--- re-building ?covstruct.rmd? using rmarkdown

Attaching package: 'TMB'

The following object is masked from 'package:glmmTMB':

    tmbroot

--- finished re-building ?covstruct.rmd?

--- re-building ?mcmc.rmd? using rmarkdown
--- finished re-building ?mcmc.rmd?

--- re-building ?miscEx.rmd? using rmarkdown
--- finished re-building ?miscEx.rmd?

--- re-building ?model_evaluation.rmd? using rmarkdown
Loading required package: carData
lattice theme set by effectsTheme()
See ?effectsTheme for details.
Loading required package: mvtnorm
Loading required package: survival
Loading required package: TH.data
Loading required package: MASS

Attaching package: 'TH.data'

The following object is masked from 'package:MASS':

    geyser


Attaching package: 'multcomp'

The following object is masked from 'package:emmeans':

    cld

Note that, since v0.1.6.2, DHARMa includes support for glmmTMB, but
there are still a few minor limitations associatd with this package.
Please see https://github.com/florianhartig/DHARMa/issues/16 for
details, in particular if you use this for production.
Loading required package: ggplot2
Quitting from lines 94-96 (model_evaluation.rmd)
Error: processing vignette 'model_evaluation.rmd' failed with diagnostics:
subscript out of bounds
--- failed re-building ?model_evaluation.rmd?

--- re-building ?sim.rmd? using rmarkdown
--- finished re-building ?sim.rmd?

--- re-building ?troubleshooting.rmd? using rmarkdown
--- finished re-building ?troubleshooting.rmd?

--- re-building ?glmmTMB.Rnw? using knitr
Loading required package: stats4
Warning in qt((1 - level)/2, df) : NaNs produced
--- finished re-building ?glmmTMB.Rnw?

SUMMARY: processing the following file failed:
  ?model_evaluation.rmd?

Error: Vignette re-building failed.
Execution halted


From @eb@meyer @ending from f@u@de  Tue Jan  8 08:39:23 2019
From: @eb@meyer @ending from f@u@de (Sebastian Meyer)
Date: Tue, 8 Jan 2019 08:39:23 +0100
Subject: [R-pkg-devel] troubleshooting hard-to-reproduce errors
In-Reply-To: <fba93f8c-6a63-6f1c-26b9-e782e8476e90@gmail.com>
References: <fba93f8c-6a63-6f1c-26b9-e782e8476e90@gmail.com>
Message-ID: <a10bf766-ce2a-136c-55cb-fa37444a70bf@fau.de>

These issues originate in a change in how R looks for S3 methods, at
least on some of the CRAN machines. To reproduce locally, you currently
need to set the environnment variable

_R_S3_METHOD_LOOKUP_BASEENV_AFTER_GLOBALENV_=TRUE

See the source code at
https://svn.r-project.org/R/trunk/src/main/objects.c

To fix method lookup for R >= 3.6.0, you can use delayed S3 method
registration along the lines of:

if (getRversion() >= "3.6.0") {
  S3method(pkg::gen, cls)
}

See the manual at
https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Registering-S3-methods

Hope this helps!
Cheers,

	Sebastian


Am 08.01.19 um 04:56 schrieb Ben Bolker:
> 
>  My colleagues and I are preparing a new submission of a package for
> CRAN (https://github.com/glmmTMB/glmmTMB/tree/master/glmmTMB).  We've
> tested it on all the platforms we have access to: Travis/Linux (devel
> and release), MacOS (release), Ubuntu 16.04 (release), win-builder
> (devel and release), without any serious problems.
> 
>  On CRAN's Debian test machine, we get an ERROR and a WARNING.
> 
> 1. Can anyone suggest the best way to test/find a platform where we can
> figure out what's going on? I haven't used R-hub: should I try that?
> 
> 2.  The specific problem is in the "downstream_methods" example:
> <https://github.com/glmmTMB/glmmTMB/blob/master/glmmTMB/man/downstream_methods.Rd#L65-L67>
> 
> warp.lm <- glmmTMB(breaks ~ wool * tension, data = warpbreaks)
> if (require(emmeans)) {
>      emmeans (warp.lm, poly ~ tension | wool)
> }
> 
>  the error is:
> 
>  Loading required package: emmeans
>  Error in ref_grid(object, ...) :
>    Can't handle an object of class  'glmmTMB'
>   Use help("models", package = "emmeans") for information on supported
> models.
>  Calls: emmeans -> ref_grid
>  Execution halted
> 
> 
>  I can imagine that this has something to do with environment/method
> loading.  If I run
> 
> example("downstream_methods", package="glmmTMB")
> 
> in an R console it works fine (even if glmmTMB isn't loaded).
> 
> I can reproduce the error if *without loading the glmmTMB package* I run
> 
> warp.lm <- glmmTMB::glmmTMB(breaks ~ wool * tension, data = warpbreaks)
> if (require(emmeans)) {
>      emmeans (warp.lm, poly ~ tension | wool)
> }
> 
> ... but I don't see why the methods from a package wouldn't be loaded
> when running its own examples ??
> 
> 3. The other problem is in vignette building (see below).  Any
> suggestions for debugging since it doesn't seem to fail locally?
> The lines indicated suggest some similar kind of method-access problem
> <https://github.com/glmmTMB/glmmTMB/blob/master/glmmTMB/vignettes/model_evaluation.rmd#L94-L95>:
> 
> 
> Anova(owls_nb1)  ## default type II
> Anova(owls_nb1,type="III")
> 
>   Any suggestions welcome ...
> 
>  cheers
>    Ben Bolker
> 
> ---
> * checking re-building of vignette outputs ... [80s/81s] WARNING
> Error(s) in re-building vignettes:
>   ...
> --- re-building ?covstruct.rmd? using rmarkdown
> 
> Attaching package: 'TMB'
> 
> The following object is masked from 'package:glmmTMB':
> 
>     tmbroot
> 
> --- finished re-building ?covstruct.rmd?
> 
> --- re-building ?mcmc.rmd? using rmarkdown
> --- finished re-building ?mcmc.rmd?
> 
> --- re-building ?miscEx.rmd? using rmarkdown
> --- finished re-building ?miscEx.rmd?
> 
> --- re-building ?model_evaluation.rmd? using rmarkdown
> Loading required package: carData
> lattice theme set by effectsTheme()
> See ?effectsTheme for details.
> Loading required package: mvtnorm
> Loading required package: survival
> Loading required package: TH.data
> Loading required package: MASS
> 
> Attaching package: 'TH.data'
> 
> The following object is masked from 'package:MASS':
> 
>     geyser
> 
> 
> Attaching package: 'multcomp'
> 
> The following object is masked from 'package:emmeans':
> 
>     cld
> 
> Note that, since v0.1.6.2, DHARMa includes support for glmmTMB, but
> there are still a few minor limitations associatd with this package.
> Please see https://github.com/florianhartig/DHARMa/issues/16 for
> details, in particular if you use this for production.
> Loading required package: ggplot2
> Quitting from lines 94-96 (model_evaluation.rmd)
> Error: processing vignette 'model_evaluation.rmd' failed with diagnostics:
> subscript out of bounds
> --- failed re-building ?model_evaluation.rmd?
> 
> --- re-building ?sim.rmd? using rmarkdown
> --- finished re-building ?sim.rmd?
> 
> --- re-building ?troubleshooting.rmd? using rmarkdown
> --- finished re-building ?troubleshooting.rmd?
> 
> --- re-building ?glmmTMB.Rnw? using knitr
> Loading required package: stats4
> Warning in qt((1 - level)/2, df) : NaNs produced
> --- finished re-building ?glmmTMB.Rnw?
> 
> SUMMARY: processing the following file failed:
>   ?model_evaluation.rmd?
> 
> Error: Vignette re-building failed.
> Execution halted
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From iuc@r @ending from fedor@project@org  Tue Jan  8 09:36:35 2019
From: iuc@r @ending from fedor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Tue, 8 Jan 2019 09:36:35 +0100
Subject: [R-pkg-devel] troubleshooting hard-to-reproduce errors
In-Reply-To: <a10bf766-ce2a-136c-55cb-fa37444a70bf@fau.de>
References: <fba93f8c-6a63-6f1c-26b9-e782e8476e90@gmail.com>
 <a10bf766-ce2a-136c-55cb-fa37444a70bf@fau.de>
Message-ID: <CALEXWq0yPa9FKrQGk1bgQz+AFvBWgbnLrikZvQUjbccD54Qv0w@mail.gmail.com>

On Tue, 8 Jan 2019 at 08:39, Sebastian Meyer <seb.meyer at fau.de> wrote:
>
> To fix method lookup for R >= 3.6.0, you can use delayed S3 method
> registration along the lines of:
>
> if (getRversion() >= "3.6.0") {
>   S3method(pkg::gen, cls)
> }

And to add this automatically to your NAMESPACE with roxygen2, you may
use the following:

#' @rawNamespace if(getRversion() >= "3.6.0") {
#'   S3method(pkg::gen, cls)
#' } else {
#'   export(gen.cls)
#' }

See, e.g., https://github.com/r-quantities/errors/blob/master/R/misc.R#L243

I?aki


From edd @ending from debi@n@org  Wed Jan  9 17:39:40 2019
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Wed, 9 Jan 2019 10:39:40 -0600
Subject: [R-pkg-devel] About a need for hooks from R CMD ... commands,
 and a question
In-Reply-To: <86b3c5ce-5152-b03d-b6c0-dccd46f7571a@gmail.com>
References: <23599.32545.434848.885970@rob.eddelbuettel.com>
 <CALEXWq0p6HW_Fr7zPM4fGO+TqYFGd5oZz=pGZqMydqnLqDqxPw@mail.gmail.com>
 <23599.43262.195638.370774@rob.eddelbuettel.com>
 <86b3c5ce-5152-b03d-b6c0-dccd46f7571a@gmail.com>
Message-ID: <23606.9164.139022.665929@rob.eddelbuettel.com>


Hi Duncan and I?aki,

On 4 January 2019 at 14:13, Duncan Murdoch wrote:
| If you want a total hack, the help system can run R code during a build, 
| e.g. \Sexpr[stage=build]{paste("Built at", Sys.time())}.  Certainly it 
| could embed some information in a help page; perhaps it could do more. 
| Similarly, vignettes are typically built during R CMD build, so they 
| might be able to have useful side effects.
| 
| But it seems likely that something less of a kludge would be desirable.

A first simple

  [...]
  
  <<preliminaries,echo=FALSE,results=hide>>=
  user <- Sys.getenv("USER")
  dir <- getwd()
  @

  [...]

  Built by '\Sexpr{user}' in directory '\Sexpr{dir}'.

did not work. By the time that chunk is evaluate, I am already in TEMPDIR.

Any clever ideas about I could inject code into the part that creates the tarball?

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From iuc@r @ending from fedor@project@org  Wed Jan  9 17:57:12 2019
From: iuc@r @ending from fedor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Wed, 9 Jan 2019 17:57:12 +0100
Subject: [R-pkg-devel] About a need for hooks from R CMD ... commands,
 and a question
In-Reply-To: <23606.9164.139022.665929@rob.eddelbuettel.com>
References: <23599.32545.434848.885970@rob.eddelbuettel.com>
 <CALEXWq0p6HW_Fr7zPM4fGO+TqYFGd5oZz=pGZqMydqnLqDqxPw@mail.gmail.com>
 <23599.43262.195638.370774@rob.eddelbuettel.com>
 <86b3c5ce-5152-b03d-b6c0-dccd46f7571a@gmail.com>
 <23606.9164.139022.665929@rob.eddelbuettel.com>
Message-ID: <CALEXWq3inmf2gZ+BboHV_b9jziWUka+S7=2GfZPd++ay6ZkH6Q@mail.gmail.com>

On Wed, 9 Jan 2019 at 17:39, Dirk Eddelbuettel <edd at debian.org> wrote:
>
>
> Hi Duncan and I?aki,
>
> On 4 January 2019 at 14:13, Duncan Murdoch wrote:
> | If you want a total hack, the help system can run R code during a build,
> | e.g. \Sexpr[stage=build]{paste("Built at", Sys.time())}.  Certainly it
> | could embed some information in a help page; perhaps it could do more.
> | Similarly, vignettes are typically built during R CMD build, so they
> | might be able to have useful side effects.
> |
> | But it seems likely that something less of a kludge would be desirable.
>
> A first simple
>
>   [...]
>
>   <<preliminaries,echo=FALSE,results=hide>>=
>   user <- Sys.getenv("USER")
>   dir <- getwd()
>   @
>
>   [...]
>
>   Built by '\Sexpr{user}' in directory '\Sexpr{dir}'.
>
> did not work. By the time that chunk is evaluate, I am already in TEMPDIR.
>
> Any clever ideas about I could inject code into the part that creates the tarball?

Did you check Sys.getenv("OLDPWD")? I checked with a knitr vignette
and the correct path was there.

I?aki


From tr@ver@c @ending from gm@il@com  Wed Jan  9 20:18:06 2019
From: tr@ver@c @ending from gm@il@com (Travers Ching)
Date: Wed, 9 Jan 2019 11:18:06 -0800
Subject: [R-pkg-devel] Incorporating external library licensces (zstd
 license) within package
Message-ID: <CAPLMX9GTKr7L9EhYgHR7fhgbHD0spFUpW17qpe15SFGNPY-SiQ@mail.gmail.com>

Hi all,

I'm submitting a package that uses the ZSTD compression library, but
the submission was rejected because licensing issues in incorporating
zstd.

I'm looking towards the `fst` and `zstdr` packages as guidance on how
to handle it.  Here's what I gather:

* Use of the AGPL-3 license which seems to be able to cover the ZSTD
BSD licensce.
* Attach APGL-3 notice to all my source code files (excluding
auto-generated Rcpp source code).
* Add Facebook as author/contributor and add copyright notice for the
ZSTD library -- should I add the main ZSTD contributor/author (Yann
Collet)?  (Attached at the bottom is my DESCRIPTION file).

Are there any other issues I need to be aware of and fix before re-submitting?

Thanks!
Travers

Package: qs
Type: Package
Title: Quick Serialization of R Objects
Version: 0.11
Date: 2019-1-2
Authors at R: c(
    person("Travers", "Ching", email = "********@gmail.com", role =
c("aut", "cre", "cph")),
    person("Facebook, Inc.", role = c("aut","cph"), comment = "Bundled
ZSTD code"))
Maintainer: Travers Ching <********@gmail.com>
Description: Quickly write and read any R object to and from disk
using the 'Rcpp' interface and the 'zstd' compression library.
License: AGPL-3 | file LICENSE
Imports:
    Rcpp, RApiSerialize
LinkingTo: Rcpp, RApiSerialize
RoxygenNote: 6.1.1
Suggests: knitr, rmarkdown
VignetteBuilder: knitr
Copyright: This package includes code from the ZSTD library owned by
Facebook, Inc.
URL: https://github.com/traversc/qs
BugReports: https://github.com/traversc/qs/issues


From murdoch@dunc@n @ending from gm@il@com  Wed Jan  9 20:33:07 2019
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Wed, 9 Jan 2019 14:33:07 -0500
Subject: [R-pkg-devel] About a need for hooks from R CMD ... commands,
 and a question
In-Reply-To: <23606.9164.139022.665929@rob.eddelbuettel.com>
References: <23599.32545.434848.885970@rob.eddelbuettel.com>
 <CALEXWq0p6HW_Fr7zPM4fGO+TqYFGd5oZz=pGZqMydqnLqDqxPw@mail.gmail.com>
 <23599.43262.195638.370774@rob.eddelbuettel.com>
 <86b3c5ce-5152-b03d-b6c0-dccd46f7571a@gmail.com>
 <23606.9164.139022.665929@rob.eddelbuettel.com>
Message-ID: <e6ecea79-5b57-a772-f94e-a62b21c220d5@gmail.com>

On 09/01/2019 11:39 a.m., Dirk Eddelbuettel wrote:
> 
> Hi Duncan and I?aki,
> 
> On 4 January 2019 at 14:13, Duncan Murdoch wrote:
> | If you want a total hack, the help system can run R code during a build,
> | e.g. \Sexpr[stage=build]{paste("Built at", Sys.time())}.  Certainly it
> | could embed some information in a help page; perhaps it could do more.
> | Similarly, vignettes are typically built during R CMD build, so they
> | might be able to have useful side effects.
> |
> | But it seems likely that something less of a kludge would be desirable.
> 
> A first simple
> 
>    [...]
>    
>    <<preliminaries,echo=FALSE,results=hide>>=
>    user <- Sys.getenv("USER")
>    dir <- getwd()
>    @
> 
>    [...]
> 
>    Built by '\Sexpr{user}' in directory '\Sexpr{dir}'.
> 
> did not work. By the time that chunk is evaluate, I am already in TEMPDIR.
> 
> Any clever ideas about I could inject code into the part that creates the tarball?

Same seems to be true for macros in help pages.

Duncan


From r@lf@@tubner @ending from d@q@n@@com  Thu Jan 10 09:40:46 2019
From: r@lf@@tubner @ending from d@q@n@@com (Ralf Stubner)
Date: Thu, 10 Jan 2019 09:40:46 +0100
Subject: [R-pkg-devel] Incorporating external library licensces (zstd
 license) within package
In-Reply-To: <CAPLMX9GTKr7L9EhYgHR7fhgbHD0spFUpW17qpe15SFGNPY-SiQ@mail.gmail.com>
References: <CAPLMX9GTKr7L9EhYgHR7fhgbHD0spFUpW17qpe15SFGNPY-SiQ@mail.gmail.com>
Message-ID: <042dc401-bab1-4328-a48d-ad2b85fd2d6c@daqana.com>

On 09.01.19 20:18, Travers Ching wrote:
> * Use of the AGPL-3 license which seems to be able to cover the ZSTD
> BSD licensce.

ZSTD is dual license BSD and GPL-2. So AGPL-3 is fine, as would be GPL-2
or GPL-3.

> * Attach APGL-3 notice to all my source code files (excluding
> auto-generated Rcpp source code).

Ok.

> * Add Facebook as author/contributor and add copyright notice for the
> ZSTD library -- should I add the main ZSTD contributor/author (Yann
> Collet)?  (Attached at the bottom is my DESCRIPTION file).

I would use Yann Collet as author/contributor and Facebook only as
copyright holder.

> License: AGPL-3 | file LICENSE

What is the content of the LICENSE file? My suggestion would be
something like this:

Files: src/ZSTD/*
Copyright: <as in the ZSTD files>
License: BSD or GPL-2
URL: ...

Files: *
Copyright: 2019 Travers Ching
License: <your license>

(c.f. https://github.com/daqana/dqrng/blob/master/LICENSE)

Greetings
Ralf

-- 
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190110/259f2689/attachment.sig>

From iuc@r @ending from fedor@project@org  Thu Jan 10 12:33:28 2019
From: iuc@r @ending from fedor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Thu, 10 Jan 2019 12:33:28 +0100
Subject: [R-pkg-devel] About a need for hooks from R CMD ... commands,
 and a question
In-Reply-To: <e6ecea79-5b57-a772-f94e-a62b21c220d5@gmail.com>
References: <23599.32545.434848.885970@rob.eddelbuettel.com>
 <CALEXWq0p6HW_Fr7zPM4fGO+TqYFGd5oZz=pGZqMydqnLqDqxPw@mail.gmail.com>
 <23599.43262.195638.370774@rob.eddelbuettel.com>
 <86b3c5ce-5152-b03d-b6c0-dccd46f7571a@gmail.com>
 <23606.9164.139022.665929@rob.eddelbuettel.com>
 <e6ecea79-5b57-a772-f94e-a62b21c220d5@gmail.com>
Message-ID: <CALEXWq1o0TiS375gRaGwSfiBkq2P-bpyPySZr+3bwyXMqLcBjQ@mail.gmail.com>

It just ocurred to me the following. Instead of

R CMD build pkg

I've tried this:

cd pkg; R CMD build --log `pwd`

and voil?: the tarball includes a log file, and inside there's the
complete path to the DESCRIPTION.

I?aki

On Wed, 9 Jan 2019 at 20:33, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 09/01/2019 11:39 a.m., Dirk Eddelbuettel wrote:
> >
> > Hi Duncan and I?aki,
> >
> > On 4 January 2019 at 14:13, Duncan Murdoch wrote:
> > | If you want a total hack, the help system can run R code during a build,
> > | e.g. \Sexpr[stage=build]{paste("Built at", Sys.time())}.  Certainly it
> > | could embed some information in a help page; perhaps it could do more.
> > | Similarly, vignettes are typically built during R CMD build, so they
> > | might be able to have useful side effects.
> > |
> > | But it seems likely that something less of a kludge would be desirable.
> >
> > A first simple
> >
> >    [...]
> >
> >    <<preliminaries,echo=FALSE,results=hide>>=
> >    user <- Sys.getenv("USER")
> >    dir <- getwd()
> >    @
> >
> >    [...]
> >
> >    Built by '\Sexpr{user}' in directory '\Sexpr{dir}'.
> >
> > did not work. By the time that chunk is evaluate, I am already in TEMPDIR.
> >
> > Any clever ideas about I could inject code into the part that creates the tarball?
>
> Same seems to be true for macros in help pages.
>
> Duncan



-- 
I?aki ?car


From edd @ending from debi@n@org  Thu Jan 10 21:54:55 2019
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Thu, 10 Jan 2019 14:54:55 -0600
Subject: [R-pkg-devel] About a need for hooks from R CMD ... commands,
 and a question
In-Reply-To: <CALEXWq3inmf2gZ+BboHV_b9jziWUka+S7=2GfZPd++ay6ZkH6Q@mail.gmail.com>
References: <23599.32545.434848.885970@rob.eddelbuettel.com>
 <CALEXWq0p6HW_Fr7zPM4fGO+TqYFGd5oZz=pGZqMydqnLqDqxPw@mail.gmail.com>
 <23599.43262.195638.370774@rob.eddelbuettel.com>
 <86b3c5ce-5152-b03d-b6c0-dccd46f7571a@gmail.com>
 <23606.9164.139022.665929@rob.eddelbuettel.com>
 <CALEXWq3inmf2gZ+BboHV_b9jziWUka+S7=2GfZPd++ay6ZkH6Q@mail.gmail.com>
Message-ID: <23607.45343.161454.699908@rob.eddelbuettel.com>


On 9 January 2019 at 17:57, I?aki Ucar wrote:
| Did you check Sys.getenv("OLDPWD")? I checked with a knitr vignette
| and the correct path was there.

Code:

[...]

  <<preliminaries,echo=FALSE,results=hide>>=
  prettyVersion <- packageVersion("someNameHere")
  prettyDate <- format(Sys.Date(), "%B %e, %Y")
  user <- Sys.getenv("USER")
  dir <- getwd()
  olddir <- Sys.getenv("OLDPWD")
  @

  [...]

  \date{Built on \Sexpr{prettyDate} using version \Sexpr{prettyVersion}}

  \maketitle

  Built by '\Sexpr{user}' in directory '\Sexpr{dir}' coming from directory
  '\Sexpr{olddir}'.

Comes up with an empty / unset olddir when I do

  R CMD build someNameHere; R CMD INSTALL someNameHere_1.2.3.tar.gz

No mas :-/

Your idea about the logfile is fair, but I would *much* prefer to have
something unconditional.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From iuc@r @ending from fedor@project@org  Thu Jan 10 22:33:29 2019
From: iuc@r @ending from fedor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Thu, 10 Jan 2019 22:33:29 +0100
Subject: [R-pkg-devel] About a need for hooks from R CMD ... commands,
 and a question
In-Reply-To: <23607.45343.161454.699908@rob.eddelbuettel.com>
References: <23599.32545.434848.885970@rob.eddelbuettel.com>
 <CALEXWq0p6HW_Fr7zPM4fGO+TqYFGd5oZz=pGZqMydqnLqDqxPw@mail.gmail.com>
 <23599.43262.195638.370774@rob.eddelbuettel.com>
 <86b3c5ce-5152-b03d-b6c0-dccd46f7571a@gmail.com>
 <23606.9164.139022.665929@rob.eddelbuettel.com>
 <CALEXWq3inmf2gZ+BboHV_b9jziWUka+S7=2GfZPd++ay6ZkH6Q@mail.gmail.com>
 <23607.45343.161454.699908@rob.eddelbuettel.com>
Message-ID: <CALEXWq3Q6U5GsmiE2GA-PaEHhQoP=ptcJCwhxkp7ko5VMmTcFA@mail.gmail.com>

On Thu, 10 Jan 2019 at 21:55, Dirk Eddelbuettel <edd at debian.org> wrote:
>
>
> On 9 January 2019 at 17:57, I?aki Ucar wrote:
> | Did you check Sys.getenv("OLDPWD")? I checked with a knitr vignette
> | and the correct path was there.
>
> Code:
>
> [...]
>
>   <<preliminaries,echo=FALSE,results=hide>>=
>   prettyVersion <- packageVersion("someNameHere")
>   prettyDate <- format(Sys.Date(), "%B %e, %Y")
>   user <- Sys.getenv("USER")
>   dir <- getwd()
>   olddir <- Sys.getenv("OLDPWD")
>   @
>
>   [...]
>
>   \date{Built on \Sexpr{prettyDate} using version \Sexpr{prettyVersion}}
>
>   \maketitle
>
>   Built by '\Sexpr{user}' in directory '\Sexpr{dir}' coming from directory
>   '\Sexpr{olddir}'.
>
> Comes up with an empty / unset olddir when I do
>
>   R CMD build someNameHere; R CMD INSTALL someNameHere_1.2.3.tar.gz

This is quite interesting. Because if you run

R CMD build someNameHere/; R CMD INSTALL someNameHere_1.2.3.tar.gz

(note the "/" after the package name) then the olddir is there.

I?aki


From edd @ending from debi@n@org  Thu Jan 10 22:51:22 2019
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Thu, 10 Jan 2019 15:51:22 -0600
Subject: [R-pkg-devel] About a need for hooks from R CMD ... commands,
 and a question
In-Reply-To: <CALEXWq3Q6U5GsmiE2GA-PaEHhQoP=ptcJCwhxkp7ko5VMmTcFA@mail.gmail.com>
References: <23599.32545.434848.885970@rob.eddelbuettel.com>
 <CALEXWq0p6HW_Fr7zPM4fGO+TqYFGd5oZz=pGZqMydqnLqDqxPw@mail.gmail.com>
 <23599.43262.195638.370774@rob.eddelbuettel.com>
 <86b3c5ce-5152-b03d-b6c0-dccd46f7571a@gmail.com>
 <23606.9164.139022.665929@rob.eddelbuettel.com>
 <CALEXWq3inmf2gZ+BboHV_b9jziWUka+S7=2GfZPd++ay6ZkH6Q@mail.gmail.com>
 <23607.45343.161454.699908@rob.eddelbuettel.com>
 <CALEXWq3Q6U5GsmiE2GA-PaEHhQoP=ptcJCwhxkp7ko5VMmTcFA@mail.gmail.com>
Message-ID: <23607.48730.161634.924050@rob.eddelbuettel.com>


On 10 January 2019 at 22:33, I?aki Ucar wrote:
| On Thu, 10 Jan 2019 at 21:55, Dirk Eddelbuettel <edd at debian.org> wrote:
| > Comes up with an empty / unset olddir when I do
| >
| >   R CMD build someNameHere; R CMD INSTALL someNameHere_1.2.3.tar.gz
| 
| This is quite interesting. Because if you run
| 
| R CMD build someNameHere/; R CMD INSTALL someNameHere_1.2.3.tar.gz
| 
| (note the "/" after the package name) then the olddir is there.

Not for me. Same result as before.  (That is as work on CentOS 7.5 with R 3.5.1).

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @n248 @ending from cornell@edu  Thu Jan 10 22:54:22 2019
From: @n248 @ending from cornell@edu (Satyaprakash Nayak)
Date: Thu, 10 Jan 2019 16:54:22 -0500
Subject: [R-pkg-devel] package fails with parallel make - would forcing a
 serial version work?
In-Reply-To: <CAM3CqvLsxRmTk=+St1m-4yXN-kuayW9eUVWRbJQzfQza2XbOGA@mail.gmail.com>
References: <CAM3CqvLsxRmTk=+St1m-4yXN-kuayW9eUVWRbJQzfQza2XbOGA@mail.gmail.com>
Message-ID: <CAM3CqvKL4U6aK2T2udCstQ7AEhVw0LBF9AEAb-x45fv70_h58Q@mail.gmail.com>

Dear R package developers

I published a package on CRAN last year (sundialr) which is now failing
with as it is not make to compile a static library with parallel make.

In this package, I compile a static library (libsundials_all.a) from source
files of a third party. The specifics of compiling the static library can
be found at - https://github.com/sn248/sundialr/blob/master/src/Makevars

Now, I got the following error message from CRAN (actually, I was informed
of this before, but had neglected to fix it). Here is the message from one
of the CRAN maintainers ..

***************************************************************************************************************************************
This have just failed to install for me with a parallel make:

g++ -std=gnu++98 -std=gnu++98 -shared
-L/data/blackswan/ripley/extras/lib64 -L/usrlocal/lib64 -o sundialr.so
cvode.o RcppExports.o -L/data/blackswan/ripley/R/R-patched/lib -lRlapack
-L/data/blackswan/ripley/R/R-patched/lib -lRblas -lgfortran -lm
-lquadmath -L../inst/ ../inst/libsundials_all.a
g++: error: ../inst/libsundials_all.a: No such file or directory
make[1]: *** [/data/blackswan/ripley/R/R-patched/share/make/shlib.mk:6:
sundialr.so] Error 1
*****************************************************************************************************************************************

It seems the package fails to generate the static library with the parallel
make. The easiest solution I could think of for this problem was to force a
serial version of make using the .NOTPARALLEL phony command in Makevars and
Makevars.win(https://github.com/sn248/sundialr/blob/master/src/Makevars). I
have made this change and it seems to work on my machine and on testing
with TravisCI and Appveyor(https://github.com/sn248/sundialr).

However, before I re-submit to CRAN, I wanted to get an opinion as to will
this be enough to get rid of the error with parallel make?

Any suggestions would be very much appreciated, thank you!
Satyaprakash

	[[alternative HTML version deleted]]


From tring @ending from gvdnet@dk  Wed Jan  9 08:16:19 2019
From: tring @ending from gvdnet@dk (Troels Ring)
Date: Wed, 9 Jan 2019 08:16:19 +0100
Subject: [R-pkg-devel] objects are masked _by_ '.GlobalEnv'
Message-ID: <1b5d01d4a7eb$37ce3100$a76a9300$@gvdnet.dk>

Dear friends - this is really a question I'm sorry about since it doesn't
follow the requirements. I have made a R package via RStudio and it causes
problems when I try to load some data from within the package. I'm on
windows, R version 3.5.1 (2018-07-02). 

When I am in the directory with the package project (also with plain R)

> data(Schell)

> library(chaRBAL)

Attaches package: 'chaRBAL'    my translation from Danish

The following objects are masked _by_ '.GlobalEnv':

    Na, TOTAL, WA

#  BUT: the  values are correct from data(Schell):

> Na

[1] 0.008 0.024 0.044 0.064 0.082 0.098 0.114 0.128 0.142 0.154 0.166 0.176
0.188 0.198 0.206 0.214 0.224 0.232

[19] 0.242 0.252 0.264 0.278 0.292 0.310 0.330 0.348 0.364 0.374 0.384 0.390

> TOTAL

       [,1]  [,2]

[1,] 0.004 0.098

[2,] 0.012 0.094

[3,] 0.022 0.089

[4,] 0.032 0.084

[5,] 0.041 0.079

----25 more so

> WA

$`buffs`

$`buffs`[[1]]

[1] "Phos"

$`buffs`[[2]]

[1] "Cit"

$KA

$KA[[1]]

[1] 6.918310e-03 6.165950e-08 4.786301e-13

$KA[[2]]

[1] 7.413102e-04 1.737801e-05 3.981072e-07

 

# Which is all OK

# But when now I make the same call again

> data(Schell)

ls()

# [1] "Alb"   "Ca"    "Cl"    "K"     "Lact"  "Mg"    "Na"    "PCO2"  "S1"


#[10] "TOTAL" "WA"   

TOTAL

#      [,1]   [,2]   [,3]

#   [1,] 0.0267 0.0267 0.0267

#   [2,] 0.0200 0.0200 0.0200

# which is wrong and belongs to another included dataset. How did that
happen to be caught in globalenvironment, how can I avoid that and get rid
# of it?

I can see I need to know more about environments. What do you think happens?

 

All best wishes

Troels Ring, MD

Aalborg

 


	[[alternative HTML version deleted]]


From kyleb @ending from metrumrg@com  Thu Jan 10 23:44:42 2019
From: kyleb @ending from metrumrg@com (Kyle Baron)
Date: Thu, 10 Jan 2019 16:44:42 -0600
Subject: [R-pkg-devel] About a need for hooks from R CMD ... commands,
 and a question
In-Reply-To: <23607.48730.161634.924050@rob.eddelbuettel.com>
References: <23599.32545.434848.885970@rob.eddelbuettel.com>
 <CALEXWq0p6HW_Fr7zPM4fGO+TqYFGd5oZz=pGZqMydqnLqDqxPw@mail.gmail.com>
 <23599.43262.195638.370774@rob.eddelbuettel.com>
 <86b3c5ce-5152-b03d-b6c0-dccd46f7571a@gmail.com>
 <23606.9164.139022.665929@rob.eddelbuettel.com>
 <CALEXWq3inmf2gZ+BboHV_b9jziWUka+S7=2GfZPd++ay6ZkH6Q@mail.gmail.com>
 <23607.45343.161454.699908@rob.eddelbuettel.com>
 <CALEXWq3Q6U5GsmiE2GA-PaEHhQoP=ptcJCwhxkp7ko5VMmTcFA@mail.gmail.com>
 <23607.48730.161634.924050@rob.eddelbuettel.com>
Message-ID: <CAJ2Cw8TuNahYHy+wq6X=D0pVK-gLcfPBJksLyv5ZdPu2fGnMtQ@mail.gmail.com>

Will this work for you?

I had to stash the working directory (when R CMD build is run) in an
environment variable via ~/.R/build.Renviron`

$ cat ~/.R/build.Renviron
OLDWD=${PWD}

But a Makefile tucked in vignettes directory will run and the two
files will be there in the built package.  For me, I couldn't get
OLDPWD so I saved it as OLDWD instead

$ tree vignettes/
vignettes/
??? Makefile
??? Untitled.Rmd

$ more vignettes/Makefile

all:
        echo ${OLDWD} > ../inst/old.txt
        echo ${PWD} > ../inst/current.txt

Kyle


On Thu, Jan 10, 2019 at 3:51 PM Dirk Eddelbuettel <edd at debian.org> wrote:
>
>
> On 10 January 2019 at 22:33, I?aki Ucar wrote:
> | On Thu, 10 Jan 2019 at 21:55, Dirk Eddelbuettel <edd at debian.org> wrote:
> | > Comes up with an empty / unset olddir when I do
> | >
> | >   R CMD build someNameHere; R CMD INSTALL someNameHere_1.2.3.tar.gz
> |
> | This is quite interesting. Because if you run
> |
> | R CMD build someNameHere/; R CMD INSTALL someNameHere_1.2.3.tar.gz
> |
> | (note the "/" after the package name) then the olddir is there.
>
> Not for me. Same result as before.  (That is as work on CentOS 7.5 with R 3.5.1).
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 

Kyle Baron | Principal Scientist I

Metrum Research Group


From iuc@r @ending from fedor@project@org  Fri Jan 11 00:08:55 2019
From: iuc@r @ending from fedor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Fri, 11 Jan 2019 00:08:55 +0100
Subject: [R-pkg-devel] About a need for hooks from R CMD ... commands,
 and a question
In-Reply-To: <23607.48730.161634.924050@rob.eddelbuettel.com>
References: <23599.32545.434848.885970@rob.eddelbuettel.com>
 <CALEXWq0p6HW_Fr7zPM4fGO+TqYFGd5oZz=pGZqMydqnLqDqxPw@mail.gmail.com>
 <23599.43262.195638.370774@rob.eddelbuettel.com>
 <86b3c5ce-5152-b03d-b6c0-dccd46f7571a@gmail.com>
 <23606.9164.139022.665929@rob.eddelbuettel.com>
 <CALEXWq3inmf2gZ+BboHV_b9jziWUka+S7=2GfZPd++ay6ZkH6Q@mail.gmail.com>
 <23607.45343.161454.699908@rob.eddelbuettel.com>
 <CALEXWq3Q6U5GsmiE2GA-PaEHhQoP=ptcJCwhxkp7ko5VMmTcFA@mail.gmail.com>
 <23607.48730.161634.924050@rob.eddelbuettel.com>
Message-ID: <CALEXWq2hFXzJwQtwrHj0mfg1kPG1ypf9zCwC3y3aZH4R8f8h1Q@mail.gmail.com>

On Thu, 10 Jan 2019 at 23:27, Dirk Eddelbuettel <edd at debian.org> wrote:
>
>
> On 10 January 2019 at 22:33, I?aki Ucar wrote:
> | On Thu, 10 Jan 2019 at 21:55, Dirk Eddelbuettel <edd at debian.org> wrote:
> | > Comes up with an empty / unset olddir when I do
> | >
> | >   R CMD build someNameHere; R CMD INSTALL someNameHere_1.2.3.tar.gz
> |
> | This is quite interesting. Because if you run
> |
> | R CMD build someNameHere/; R CMD INSTALL someNameHere_1.2.3.tar.gz
> |
> | (note the "/" after the package name) then the olddir is there.
>
> Not for me. Same result as before.  (That is as work on CentOS 7.5 with R 3.5.1).

Silly me... It was showing my last cd! Of course! So what about the
very hacky...

cd ./anRpackage; cd ..; R CMD build anRpackage; R CMD INSTALL anRpackage_*.gz

I?aki


From edd @ending from debi@n@org  Fri Jan 11 00:27:26 2019
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Thu, 10 Jan 2019 17:27:26 -0600
Subject: [R-pkg-devel] About a need for hooks from R CMD ... commands,
 and a question
In-Reply-To: <CAJ2Cw8TuNahYHy+wq6X=D0pVK-gLcfPBJksLyv5ZdPu2fGnMtQ@mail.gmail.com>
References: <23599.32545.434848.885970@rob.eddelbuettel.com>
 <CALEXWq0p6HW_Fr7zPM4fGO+TqYFGd5oZz=pGZqMydqnLqDqxPw@mail.gmail.com>
 <23599.43262.195638.370774@rob.eddelbuettel.com>
 <86b3c5ce-5152-b03d-b6c0-dccd46f7571a@gmail.com>
 <23606.9164.139022.665929@rob.eddelbuettel.com>
 <CALEXWq3inmf2gZ+BboHV_b9jziWUka+S7=2GfZPd++ay6ZkH6Q@mail.gmail.com>
 <23607.45343.161454.699908@rob.eddelbuettel.com>
 <CALEXWq3Q6U5GsmiE2GA-PaEHhQoP=ptcJCwhxkp7ko5VMmTcFA@mail.gmail.com>
 <23607.48730.161634.924050@rob.eddelbuettel.com>
 <CAJ2Cw8TuNahYHy+wq6X=D0pVK-gLcfPBJksLyv5ZdPu2fGnMtQ@mail.gmail.com>
Message-ID: <23607.54494.314800.33@rob.eddelbuettel.com>


We have a winner! (By bending the rules.)

On 10 January 2019 at 16:44, Kyle Baron wrote:
| Will this work for you?
| 
| I had to stash the working directory (when R CMD build is run) in an
| environment variable via ~/.R/build.Renviron`
| 
| $ cat ~/.R/build.Renviron
| OLDWD=${PWD}
 
That is less unconditional that I desired, but it works.  

| But a Makefile tucked in vignettes directory will run and the two
| files will be there in the built package.  For me, I couldn't get
| OLDPWD so I saved it as OLDWD instead
| 
| $ tree vignettes/
| vignettes/
| ??? Makefile
| ??? Untitled.Rmd
| 
| $ more vignettes/Makefile
| 
| all:
|         echo ${OLDWD} > ../inst/old.txt
|         echo ${PWD} > ../inst/current.txt
 
Then 'current.txt' is as before a temporary directory per R's build
conventions, but old.txt does indeed contain the source directory.

Close enought :)

Thanks very much for passing that creative hack along!

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch@dunc@n @ending from gm@il@com  Fri Jan 11 01:41:16 2019
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Thu, 10 Jan 2019 19:41:16 -0500
Subject: [R-pkg-devel] objects are masked _by_ '.GlobalEnv'
In-Reply-To: <1b5d01d4a7eb$37ce3100$a76a9300$@gvdnet.dk>
References: <1b5d01d4a7eb$37ce3100$a76a9300$@gvdnet.dk>
Message-ID: <fcebf145-cd1a-b1d6-8561-640a172bccca@gmail.com>

On 09/01/2019 2:16 a.m., Troels Ring wrote:
> Dear friends - this is really a question I'm sorry about since it doesn't
> follow the requirements. I have made a R package via RStudio and it causes
> problems when I try to load some data from within the package. I'm on
> windows, R version 3.5.1 (2018-07-02).
> 
> When I am in the directory with the package project (also with plain R)
> 
>> data(Schell)
> 
>> library(chaRBAL)
> 
> Attaches package: 'chaRBAL'    my translation from Danish
> 
> The following objects are masked _by_ '.GlobalEnv':
> 
>      Na, TOTAL, WA

You have those objects in your workspace.  If you refer to them by name 
(e.g. typing Na, TOTAL, or WA), you'll see the ones in the workspace, 
not in your package.  To avoid this message, clean up your workspace, so 
there's nothing there.

> 
> #  BUT: the  values are correct from data(Schell):
> 
>> Na
> 
> [1] 0.008 0.024 0.044 0.064 0.082 0.098 0.114 0.128 0.142 0.154 0.166 0.176
> 0.188 0.198 0.206 0.214 0.224 0.232
> 
> [19] 0.242 0.252 0.264 0.278 0.292 0.310 0.330 0.348 0.364 0.374 0.384 0.390

That likely means that they are the same in both places.


> 
>> TOTAL
> 
>         [,1]  [,2]
> 
> [1,] 0.004 0.098
> 
> [2,] 0.012 0.094
> 
> [3,] 0.022 0.089
> 
> [4,] 0.032 0.084
> 
> [5,] 0.041 0.079
> 
> ----25 more so
> 
>> WA
> 
> $`buffs`
> 
> $`buffs`[[1]]
> 
> [1] "Phos"
> 
> $`buffs`[[2]]
> 
> [1] "Cit"
> 
> $KA
> 
> $KA[[1]]
> 
> [1] 6.918310e-03 6.165950e-08 4.786301e-13
> 
> $KA[[2]]
> 
> [1] 7.413102e-04 1.737801e-05 3.981072e-07
> 
>   
> 
> # Which is all OK
> 
> # But when now I make the same call again
> 
>> data(Schell)
> 
> ls()
> 
> # [1] "Alb"   "Ca"    "Cl"    "K"     "Lact"  "Mg"    "Na"    "PCO2"  "S1"
> 
> 
> #[10] "TOTAL" "WA"
> 
> TOTAL
> 
> #      [,1]   [,2]   [,3]
> 
> #   [1,] 0.0267 0.0267 0.0267
> 
> #   [2,] 0.0200 0.0200 0.0200
> 
> # which is wrong and belongs to another included dataset. How did that
> happen to be caught in globalenvironment, how can I avoid that and get rid
> # of it?
> 
> I can see I need to know more about environments. What do you think happens?

Something changed them.

Duncan Murdoch

> 
>   
> 
> All best wishes
> 
> Troels Ring, MD
> 
> Aalborg
> 
>   
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From tring @ending from gvdnet@dk  Fri Jan 11 17:30:22 2019
From: tring @ending from gvdnet@dk (Troels Ring)
Date: Fri, 11 Jan 2019 17:30:22 +0100
Subject: [R-pkg-devel] NAMESPACE importFrom("stats", "uniroot")
Message-ID: <4a3c01d4a9ca$f3426650$d9c732f0$@gvdnet.dk>

Dear friends - I'm slowly learning to make packages in RStudio and it seems
impressive. I managed now to have my acidbase package pass the check-package
test with this result

 

> checking R code for possible problems ... NOTE

  pH_general: no visible global function definition for 'uniroot'

  Undefined global functions or variables:

    uniroot

  Consider adding

    importFrom("stats", "uniroot")

  to your NAMESPACE file.

 

0 errors v | 0 warnings v | 1 note x

 

R CMD check succeeded

 

So I have much use of uniroot in the package but get this "note" above and a
suggestion to augment the NAMESPACE file - so even though it was issuing : #
Generated by roxygen2: do not edit by hand

I of course tried adding by hand - and in the next run the NAMESPACE file
was quite empty and without any exports and the added import while before it
exported a number of functions. So I deleted this unwelcome NAMESPACE and
got the old one back. 

I also tried adding importFrom("stats", "uniroot") as #'
@importFrom("stats", "uniroot") to the r file with the routine using uniroot
but that didn't change the NAMESPACE or remove the note when checking. It
may be no big problem - but I'd like to see no notes or warnings 

 

Best wishes

Troels - on Windows version 3.5.1 (2018-07-02) 

 

 


	[[alternative HTML version deleted]]


From iuc@r @ending from fedor@project@org  Fri Jan 11 17:40:24 2019
From: iuc@r @ending from fedor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Fri, 11 Jan 2019 17:40:24 +0100
Subject: [R-pkg-devel] NAMESPACE importFrom("stats", "uniroot")
In-Reply-To: <4a3c01d4a9ca$f3426650$d9c732f0$@gvdnet.dk>
References: <4a3c01d4a9ca$f3426650$d9c732f0$@gvdnet.dk>
Message-ID: <CALEXWq1_ehECgx-=0dOJ5xkAL2xm+Wo-PemoVwvcD0TDg_BiwQ@mail.gmail.com>

On Fri, 11 Jan 2019 at 17:31, Troels Ring <tring at gvdnet.dk> wrote:
>
> Dear friends - I'm slowly learning to make packages in RStudio and it seems
> impressive. I managed now to have my acidbase package pass the check-package
> test with this result
>
>
>
> > checking R code for possible problems ... NOTE
>
>   pH_general: no visible global function definition for 'uniroot'
>
>   Undefined global functions or variables:
>
>     uniroot
>
>   Consider adding
>
>     importFrom("stats", "uniroot")
>
>   to your NAMESPACE file.
>
>
>
> 0 errors v | 0 warnings v | 1 note x
>
>
>
> R CMD check succeeded
>
>
>
> So I have much use of uniroot in the package but get this "note" above and a
> suggestion to augment the NAMESPACE file - so even though it was issuing : #
> Generated by roxygen2: do not edit by hand
>
> I of course tried adding by hand - and in the next run the NAMESPACE file
> was quite empty and without any exports and the added import while before it
> exported a number of functions. So I deleted this unwelcome NAMESPACE and
> got the old one back.
>
> I also tried adding importFrom("stats", "uniroot") as #'
> @importFrom("stats", "uniroot") to the r file with the routine using uniroot
> but that didn't change the NAMESPACE or remove the note when checking. It
> may be no big problem - but I'd like to see no notes or warnings

The syntax is "@importFrom stats uniroot". See roxygen2's docs:

https://cran.r-project.org/web/packages/roxygen2/vignettes/namespace.html#imports

If you don't use this function many many times, it is even better to
use stats::uniroot instead.

I?aki


From tring @ending from gvdnet@dk  Fri Jan 11 19:34:13 2019
From: tring @ending from gvdnet@dk (Troels Ring)
Date: Fri, 11 Jan 2019 19:34:13 +0100
Subject: [R-pkg-devel] NAMESPACE importFrom("stats", "uniroot")
In-Reply-To: i0kHgMCcctXDii0kIgKrqZ
References: <4a3c01d4a9ca$f3426650$d9c732f0$@gvdnet.dk>
 <570e01d4a9d3$499c2330$dcd46990$@gvdnet.dk> i0kHgMCcctXDii0kIgKrqZ
Message-ID: <610f01d4a9dc$40d5f510$c281df30$@gvdnet.dk>

Thanks a lot for your help - now it is fine!
BW
Troels

-----Oprindelig meddelelse-----
Fra: I?aki Ucar <iucar at fedoraproject.org> 
Sendt: 11. januar 2019 18:37
Til: Troels Ring <tring at gvdnet.dk>
Emne: Re: [R-pkg-devel] NAMESPACE importFrom("stats", "uniroot")

See an example of usage here:

https://github.com/r-simmer/simmer/blob/f75e52fe1e71c7eda594f6cd41adbbed95b05c23/R/monitor-class.R#L124

And how this is processed by roxygen2 and added to the NAMESPACE automatically:

https://github.com/r-simmer/simmer/blob/956bb03ac355052c60e5341c0d16b0dc81ee736c/NAMESPACE#L181

I?aki

On Fri, 11 Jan 2019 at 18:30, Troels Ring <tring at gvdnet.dk> wrote:
>
> Thanks a lot - I have added
> @importFrom stats uniroot
> And #' @importFrom stats uniroot in the NAMESPACE otherwise generated 
> by roxygen - I can't make it work - the first is not processed and the 
> next makes no difference apart from deleting the former NAMESPACE 
> file. I have tried adding the lines to the r file running uniroot - I 
> seem to be misunderstanding what goes on
>
> Best wishes
> Troels
>
> -----Oprindelig meddelelse-----
> Fra: I?aki Ucar <iucar at fedoraproject.org>
> Sendt: 11. januar 2019 17:40
> Til: Troels Ring <tring at gvdnet.dk>
> Cc: package-develop <r-package-devel at r-project.org>
> Emne: Re: [R-pkg-devel] NAMESPACE importFrom("stats", "uniroot")
>
> On Fri, 11 Jan 2019 at 17:31, Troels Ring <tring at gvdnet.dk> wrote:
> >
> > Dear friends - I'm slowly learning to make packages in RStudio and 
> > it seems impressive. I managed now to have my acidbase package pass 
> > the check-package test with this result
> >
> >
> >
> > > checking R code for possible problems ... NOTE
> >
> >   pH_general: no visible global function definition for 'uniroot'
> >
> >   Undefined global functions or variables:
> >
> >     uniroot
> >
> >   Consider adding
> >
> >     importFrom("stats", "uniroot")
> >
> >   to your NAMESPACE file.
> >
> >
> >
> > 0 errors v | 0 warnings v | 1 note x
> >
> >
> >
> > R CMD check succeeded
> >
> >
> >
> > So I have much use of uniroot in the package but get this "note" 
> > above and a suggestion to augment the NAMESPACE file - so even 
> > though it was issuing : # Generated by roxygen2: do not edit by hand
> >
> > I of course tried adding by hand - and in the next run the NAMESPACE 
> > file was quite empty and without any exports and the added import 
> > while before it exported a number of functions. So I deleted this 
> > unwelcome NAMESPACE and got the old one back.
> >
> > I also tried adding importFrom("stats", "uniroot") as #'
> > @importFrom("stats", "uniroot") to the r file with the routine using 
> > uniroot but that didn't change the NAMESPACE or remove the note when 
> > checking. It may be no big problem - but I'd like to see no notes or 
> > warnings
>
> The syntax is "@importFrom stats uniroot". See roxygen2's docs:
>
> https://cran.r-project.org/web/packages/roxygen2/vignettes/namespace.h
> tml#imports
>
> If you don't use this function many many times, it is even better to use stats::uniroot instead.
>
> I?aki
>


--
I?aki ?car


From tonight@thenight @ending from gm@il@com  Fri Jan 11 04:07:04 2019
From: tonight@thenight @ending from gm@il@com (Sam Albers)
Date: Thu, 10 Jan 2019 19:07:04 -0800
Subject: [R-pkg-devel] R CMD INSTALL succeeds while R CMD BUILD fails
Message-ID: <CADkXsV1QetHg6RfKK4+FLm-t0YVqh2dV2wpF710dTzJVWfNgOQ@mail.gmail.com>

Hello all,

I am experiencing some issues with building a package that we are
hosting on GitHub. The package itself is quite large.  It is a data
package with a bunch of spatial files stored as .rds files.

The repo is located here: https://github.com/bcgov/bcmaps.rdata

If we clone that package to local machine via:
git clone https://github.com/bcgov/bcmaps.rdata

The first oddity is that the package installs successfully using this:

$ R CMD INSTALL "./bcmaps.rdata"

But fails when I try to build the package:

$ R CMD BUILD "./bcmaps.rdata"
* checking for file './bcmaps.rdata/DESCRIPTION' ... OK
* preparing 'bcmaps.rdata':
* checking DESCRIPTION meta-information ... OK
* checking for LF line-endings in source and make files and shell scripts
* checking for empty or unneeded directories
* looking to see if a 'data/datalist' file should be added
Warning in gzfile(file, "rb") :
  cannot open compressed file 'bcmaps.rdata', probable reason
'Permission denied'
Error in gzfile(file, "rb") : cannot open the connection
Execution halted


The second oddity is that if I remove the . from the Package name in
the DESCRIPTION file, the build proceeds smoothly:

$ R CMD build "./bcmaps.rdata"
* checking for file './bcmaps.rdata/DESCRIPTION' ... OK
* preparing 'bcmapsrdata':
* checking DESCRIPTION meta-information ... OK
* checking for LF line-endings in source and make files and shell scripts
* checking for empty or unneeded directories
* looking to see if a 'data/datalist' file should be added
* building 'bcmapsrdata_0.2.0.tar.gz'

I am assuming that R CMD install builds the package internally so I
find it confusing that I am not able to build it myself. Similarly
confusing is the lack of a . in the package name indicative of
anything?

Does anyone have any idea what's going on here? Am I missing something obvious?

Thanks in advance,

Sam


From hongooi @ending from micro@oft@com  Fri Jan 11 21:00:22 2019
From: hongooi @ending from micro@oft@com (Hong Ooi)
Date: Fri, 11 Jan 2019 20:00:22 +0000
Subject: [R-pkg-devel] R CMD INSTALL succeeds while R CMD BUILD fails
In-Reply-To: <CADkXsV1QetHg6RfKK4+FLm-t0YVqh2dV2wpF710dTzJVWfNgOQ@mail.gmail.com>
References: <CADkXsV1QetHg6RfKK4+FLm-t0YVqh2dV2wpF710dTzJVWfNgOQ@mail.gmail.com>
Message-ID: <KL1P15301MB0023D5D600DA6671C4CD9EB8A6850@KL1P15301MB0023.APCP153.PROD.OUTLOOK.COM>

It looks like the ".rdata" in your package name is confusing R CMD BUILD into thinking there is a .rdata file involved. Consider renaming it to "bcmaps.data" or something similar.


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Sam Albers
Sent: Friday, 11 January, 2019 2:07 PM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] R CMD INSTALL succeeds while R CMD BUILD fails

Hello all,

I am experiencing some issues with building a package that we are hosting on GitHub. The package itself is quite large.  It is a data package with a bunch of spatial files stored as .rds files.

The repo is located here: https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fbcgov%2Fbcmaps.rdata&amp;data=02%7C01%7Chongooi%40microsoft.com%7C6ac8c309c7b84a8de4d208d677fef252%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C1%7C636828334223679364&amp;sdata=GosuFnTADrpxapDMNQSMxKoI9B4aPtIw7LwPwoCmYxU%3D&amp;reserved=0

If we clone that package to local machine via:
git clone https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fbcgov%2Fbcmaps.rdata&amp;data=02%7C01%7Chongooi%40microsoft.com%7C6ac8c309c7b84a8de4d208d677fef252%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C1%7C636828334223679364&amp;sdata=GosuFnTADrpxapDMNQSMxKoI9B4aPtIw7LwPwoCmYxU%3D&amp;reserved=0

The first oddity is that the package installs successfully using this:

$ R CMD INSTALL "./bcmaps.rdata"

But fails when I try to build the package:

$ R CMD BUILD "./bcmaps.rdata"
* checking for file './bcmaps.rdata/DESCRIPTION' ... OK
* preparing 'bcmaps.rdata':
* checking DESCRIPTION meta-information ... OK
* checking for LF line-endings in source and make files and shell scripts
* checking for empty or unneeded directories
* looking to see if a 'data/datalist' file should be added Warning in gzfile(file, "rb") :
  cannot open compressed file 'bcmaps.rdata', probable reason 'Permission denied'
Error in gzfile(file, "rb") : cannot open the connection Execution halted


The second oddity is that if I remove the . from the Package name in the DESCRIPTION file, the build proceeds smoothly:

$ R CMD build "./bcmaps.rdata"
* checking for file './bcmaps.rdata/DESCRIPTION' ... OK
* preparing 'bcmapsrdata':
* checking DESCRIPTION meta-information ... OK
* checking for LF line-endings in source and make files and shell scripts
* checking for empty or unneeded directories
* looking to see if a 'data/datalist' file should be added
* building 'bcmapsrdata_0.2.0.tar.gz'

I am assuming that R CMD install builds the package internally so I find it confusing that I am not able to build it myself. Similarly confusing is the lack of a . in the package name indicative of anything?

Does anyone have any idea what's going on here? Am I missing something obvious?

Thanks in advance,

Sam

______________________________________________
R-package-devel at r-project.org mailing list
https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7C6ac8c309c7b84a8de4d208d677fef252%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C1%7C636828334223679364&amp;sdata=0r%2FFfRH6eYqRPLAAFLprWAttPip02VKV0GIqBOtVhI8%3D&amp;reserved=0


From qx@cur m@ili@g off use@st@rtm@il@com  Fri Jan 11 21:59:27 2019
From: qx@cur m@ili@g off use@st@rtm@il@com (qx@cur m@ili@g off use@st@rtm@il@com)
Date: Fri, 11 Jan 2019 15:59:27 -0500
Subject: [R-pkg-devel] shadowing a method from the stats package
Message-ID: <e97472a8-873c-f496-6d45-bafc337d03ba@use.startmail.com>

Hello,

    I created a package for working with a new probability
distribution called unifed. The source code can be found at
https://gitlab.com/oquijano/unifed .

    This distribution is suitable for GLMs. I have included a a
function called unifed in the package that returns a family that can
be used with the glm function.

    For a unifed glm, it is necessary for the dispersion parameter to
be equal to one. The summary method of the glm class does this
automatically for the poisson and binomial distributions and I would
like the same for the unifed. In order to achieve this, I am
including a summary.glm function in the package so it shadows
stats::summary.glm when the package is attached. This function is
actually just a wrapper around stats::summary.glm.  It simply checks
if the family is unifed; If this is the case it calls
stats::summary.glm with dispersion=1 and otherwise it simply calls
stats::summary.glm with the same parameters.  Therefore introducing
this in the namespace does not break or change the behavior of any
existing code that uses summary.glm
 
     According to the CRAN policies I need permission from the
maintainer of the package for doing this. The maintainer of the package
is the R core team. To whom should I write to ask for this permission?
Otherwise is there a different way in which I could achieve the right
default behavior and respect the CRAN policies?


Thank you for your time.


From tonight@thenight @ending from gm@il@com  Fri Jan 11 22:15:36 2019
From: tonight@thenight @ending from gm@il@com (Sam Albers)
Date: Fri, 11 Jan 2019 13:15:36 -0800
Subject: [R-pkg-devel] R CMD INSTALL succeeds while R CMD BUILD fails
In-Reply-To: <KL1P15301MB0023D5D600DA6671C4CD9EB8A6850@KL1P15301MB0023.APCP153.PROD.OUTLOOK.COM>
References: <CADkXsV1QetHg6RfKK4+FLm-t0YVqh2dV2wpF710dTzJVWfNgOQ@mail.gmail.com>
 <KL1P15301MB0023D5D600DA6671C4CD9EB8A6850@KL1P15301MB0023.APCP153.PROD.OUTLOOK.COM>
Message-ID: <CADkXsV3HbpOeK38DCy3V71SY6h235_x0KUq1SgUM3Rwz4L1r3A@mail.gmail.com>

Oh you are totally right. And similarly, an .rds file bonks with R CMD build:

$ R CMD build foo.rds
* checking for file 'foo.rds/DESCRIPTION' ... OK
* preparing 'foo.rds':
* checking DESCRIPTION meta-information ... OK
* checking for LF line-endings in source and make files and shell scripts
* checking for empty or unneeded directories
Warning in gzfile(file, "rb") :
  cannot open compressed file 'foo.rds', probable reason 'Permission denied'
Error in gzfile(file, "rb") : cannot open the connection
Execution halted

However this seems like a bug doesn't it? I am able to install a *.rds
or *.rdata package but unable to build it. Seems like a) I should be
able to install and b) these could be added to the list of unavailable
package names. Asking in the context of whether this is worth
reporting as a bug.

Sam

On Fri, Jan 11, 2019 at 12:00 PM Hong Ooi <hongooi at microsoft.com> wrote:
>
> It looks like the ".rdata" in your package name is confusing R CMD BUILD into thinking there is a .rdata file involved. Consider renaming it to "bcmaps.data" or something similar.
>
>
> -----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Sam Albers
> Sent: Friday, 11 January, 2019 2:07 PM
> To: r-package-devel at r-project.org
> Subject: [R-pkg-devel] R CMD INSTALL succeeds while R CMD BUILD fails
>
> Hello all,
>
> I am experiencing some issues with building a package that we are hosting on GitHub. The package itself is quite large.  It is a data package with a bunch of spatial files stored as .rds files.
>
> The repo is located here: https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fbcgov%2Fbcmaps.rdata&amp;data=02%7C01%7Chongooi%40microsoft.com%7C6ac8c309c7b84a8de4d208d677fef252%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C1%7C636828334223679364&amp;sdata=GosuFnTADrpxapDMNQSMxKoI9B4aPtIw7LwPwoCmYxU%3D&amp;reserved=0
>
> If we clone that package to local machine via:
> git clone https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fbcgov%2Fbcmaps.rdata&amp;data=02%7C01%7Chongooi%40microsoft.com%7C6ac8c309c7b84a8de4d208d677fef252%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C1%7C636828334223679364&amp;sdata=GosuFnTADrpxapDMNQSMxKoI9B4aPtIw7LwPwoCmYxU%3D&amp;reserved=0
>
> The first oddity is that the package installs successfully using this:
>
> $ R CMD INSTALL "./bcmaps.rdata"
>
> But fails when I try to build the package:
>
> $ R CMD BUILD "./bcmaps.rdata"
> * checking for file './bcmaps.rdata/DESCRIPTION' ... OK
> * preparing 'bcmaps.rdata':
> * checking DESCRIPTION meta-information ... OK
> * checking for LF line-endings in source and make files and shell scripts
> * checking for empty or unneeded directories
> * looking to see if a 'data/datalist' file should be added Warning in gzfile(file, "rb") :
>   cannot open compressed file 'bcmaps.rdata', probable reason 'Permission denied'
> Error in gzfile(file, "rb") : cannot open the connection Execution halted
>
>
> The second oddity is that if I remove the . from the Package name in the DESCRIPTION file, the build proceeds smoothly:
>
> $ R CMD build "./bcmaps.rdata"
> * checking for file './bcmaps.rdata/DESCRIPTION' ... OK
> * preparing 'bcmapsrdata':
> * checking DESCRIPTION meta-information ... OK
> * checking for LF line-endings in source and make files and shell scripts
> * checking for empty or unneeded directories
> * looking to see if a 'data/datalist' file should be added
> * building 'bcmapsrdata_0.2.0.tar.gz'
>
> I am assuming that R CMD install builds the package internally so I find it confusing that I am not able to build it myself. Similarly confusing is the lack of a . in the package name indicative of anything?
>
> Does anyone have any idea what's going on here? Am I missing something obvious?
>
> Thanks in advance,
>
> Sam
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7C6ac8c309c7b84a8de4d208d677fef252%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C1%7C636828334223679364&amp;sdata=0r%2FFfRH6eYqRPLAAFLprWAttPip02VKV0GIqBOtVhI8%3D&amp;reserved=0


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Fri Jan 11 22:48:11 2019
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Fri, 11 Jan 2019 22:48:11 +0100
Subject: [R-pkg-devel] R CMD INSTALL succeeds while R CMD BUILD fails
In-Reply-To: <CADkXsV3HbpOeK38DCy3V71SY6h235_x0KUq1SgUM3Rwz4L1r3A@mail.gmail.com>
References: <CADkXsV1QetHg6RfKK4+FLm-t0YVqh2dV2wpF710dTzJVWfNgOQ@mail.gmail.com>
 <KL1P15301MB0023D5D600DA6671C4CD9EB8A6850@KL1P15301MB0023.APCP153.PROD.OUTLOOK.COM>
 <CADkXsV3HbpOeK38DCy3V71SY6h235_x0KUq1SgUM3Rwz4L1r3A@mail.gmail.com>
Message-ID: <8c8106bd-3f5e-cdaf-fdc6-ec408c07f851@statistik.tu-dortmund.de>

Please report.

Best,
Uwe Ligges

On 11.01.2019 22:15, Sam Albers wrote:
> Oh you are totally right. And similarly, an .rds file bonks with R CMD build:
> 
> $ R CMD build foo.rds
> * checking for file 'foo.rds/DESCRIPTION' ... OK
> * preparing 'foo.rds':
> * checking DESCRIPTION meta-information ... OK
> * checking for LF line-endings in source and make files and shell scripts
> * checking for empty or unneeded directories
> Warning in gzfile(file, "rb") :
>    cannot open compressed file 'foo.rds', probable reason 'Permission denied'
> Error in gzfile(file, "rb") : cannot open the connection
> Execution halted
> 
> However this seems like a bug doesn't it? I am able to install a *.rds
> or *.rdata package but unable to build it. Seems like a) I should be
> able to install and b) these could be added to the list of unavailable
> package names. Asking in the context of whether this is worth
> reporting as a bug.
> 
> Sam
> 
> On Fri, Jan 11, 2019 at 12:00 PM Hong Ooi <hongooi at microsoft.com> wrote:
>>
>> It looks like the ".rdata" in your package name is confusing R CMD BUILD into thinking there is a .rdata file involved. Consider renaming it to "bcmaps.data" or something similar.
>>
>>
>> -----Original Message-----
>> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Sam Albers
>> Sent: Friday, 11 January, 2019 2:07 PM
>> To: r-package-devel at r-project.org
>> Subject: [R-pkg-devel] R CMD INSTALL succeeds while R CMD BUILD fails
>>
>> Hello all,
>>
>> I am experiencing some issues with building a package that we are hosting on GitHub. The package itself is quite large.  It is a data package with a bunch of spatial files stored as .rds files.
>>
>> The repo is located here: https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fbcgov%2Fbcmaps.rdata&amp;data=02%7C01%7Chongooi%40microsoft.com%7C6ac8c309c7b84a8de4d208d677fef252%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C1%7C636828334223679364&amp;sdata=GosuFnTADrpxapDMNQSMxKoI9B4aPtIw7LwPwoCmYxU%3D&amp;reserved=0
>>
>> If we clone that package to local machine via:
>> git clone https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fbcgov%2Fbcmaps.rdata&amp;data=02%7C01%7Chongooi%40microsoft.com%7C6ac8c309c7b84a8de4d208d677fef252%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C1%7C636828334223679364&amp;sdata=GosuFnTADrpxapDMNQSMxKoI9B4aPtIw7LwPwoCmYxU%3D&amp;reserved=0
>>
>> The first oddity is that the package installs successfully using this:
>>
>> $ R CMD INSTALL "./bcmaps.rdata"
>>
>> But fails when I try to build the package:
>>
>> $ R CMD BUILD "./bcmaps.rdata"
>> * checking for file './bcmaps.rdata/DESCRIPTION' ... OK
>> * preparing 'bcmaps.rdata':
>> * checking DESCRIPTION meta-information ... OK
>> * checking for LF line-endings in source and make files and shell scripts
>> * checking for empty or unneeded directories
>> * looking to see if a 'data/datalist' file should be added Warning in gzfile(file, "rb") :
>>    cannot open compressed file 'bcmaps.rdata', probable reason 'Permission denied'
>> Error in gzfile(file, "rb") : cannot open the connection Execution halted
>>
>>
>> The second oddity is that if I remove the . from the Package name in the DESCRIPTION file, the build proceeds smoothly:
>>
>> $ R CMD build "./bcmaps.rdata"
>> * checking for file './bcmaps.rdata/DESCRIPTION' ... OK
>> * preparing 'bcmapsrdata':
>> * checking DESCRIPTION meta-information ... OK
>> * checking for LF line-endings in source and make files and shell scripts
>> * checking for empty or unneeded directories
>> * looking to see if a 'data/datalist' file should be added
>> * building 'bcmapsrdata_0.2.0.tar.gz'
>>
>> I am assuming that R CMD install builds the package internally so I find it confusing that I am not able to build it myself. Similarly confusing is the lack of a . in the package name indicative of anything?
>>
>> Does anyone have any idea what's going on here? Am I missing something obvious?
>>
>> Thanks in advance,
>>
>> Sam
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7C6ac8c309c7b84a8de4d208d677fef252%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C1%7C636828334223679364&amp;sdata=0r%2FFfRH6eYqRPLAAFLprWAttPip02VKV0GIqBOtVhI8%3D&amp;reserved=0
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From tring @ending from gvdnet@dk  Sat Jan 12 08:46:37 2019
From: tring @ending from gvdnet@dk (Troels Ring)
Date: Sat, 12 Jan 2019 08:46:37 +0100
Subject: [R-pkg-devel] using @inheritParams in documenting data
Message-ID: <11f401d4aa4a$f2b1d6f0$d81584d0$@gvdnet.dk>

Dearfriends , with your help I'm rapidly improving package development. When
documenting data, I seem to be helped mpst by making the rda directly from
RStudio via file, new file, R documentation then choosing data. However, my
data files have a lot of params, so I thought I might use @inheritParams
since these params are already documented elsewhere in the package. Hence,
in the rda file created directly from RStudio I tried to add @inheritParams
CMB (since the params are already documented in CMB) but I cannot find
exactly how to put it in the rda file.

The skeleton has

\describe{

                           \item{\code(x)}{vector}

And if I put some the params in a comma separated row instead of x they are
acknowledged in the final rda file -

BUT where and how to put the @inheritParams CMB I cannot find documented.
Otherwise it seems to run OK

 

All best wishes

Troels


	[[alternative HTML version deleted]]


From edd @ending from debi@n@org  Sat Jan 12 13:44:52 2019
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Sat, 12 Jan 2019 06:44:52 -0600
Subject: [R-pkg-devel] using @inheritParams in documenting data
In-Reply-To: <11f401d4aa4a$f2b1d6f0$d81584d0$@gvdnet.dk>
References: <11f401d4aa4a$f2b1d6f0$d81584d0$@gvdnet.dk>
Message-ID: <23609.57668.919885.885005@rob.eddelbuettel.com>


Hi Troels,

Always good to see someone work on packaging with so much energy.

On 12 January 2019 at 08:46, Troels Ring wrote:
| BUT where and how to put the @inheritParams CMB I cannot find documented.
| Otherwise it seems to run OK

I fear you are getting confused between 'roxygen2' and base R.

'roxygen2' is a very handy and powerful add-on package extending R. But none
of its variables, (which conveniently all start with a @) will be documented
in the proper manual, Writing R Extension.

You question about \describe, however, is about Rd which is base R. And that
very command is 'shadowed' by roxygen2 which generates that section. That is
not unlike your previous question about exporting / registration.

Personally, I see value in working old-school here, and continue to argue
that one should be familiar with the _basic_ and _portable_ commands in
Writing R Extensions before putting another layer on top.  Just how I find it
helps to explain what Rcpp does if one has a mental image of the underlying
'SEXP .Call(funcname, SEXP, SEXP)' it is working with.  So I do use roxygen
to create Rd files but I also spent a decade or so writing Rd files -- and
quite a few people (hi, Duncan) still recommend doing it by hand.  I think it
helps. And you can mix and match.

Also, a decent trick is to search on GitHub with 'user:cran' to restrict your
search to the mirror (thanks, Gabor!) of CRAN packages. For just about any
question, it quite likely that there will be someone who has been there
before among the now (almost) 13,700 packages out there.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From Jori@@Mey@ @ending from ugent@be  Sat Jan 12 14:27:36 2019
From: Jori@@Mey@ @ending from ugent@be (Joris Meys)
Date: Sat, 12 Jan 2019 14:27:36 +0100
Subject: [R-pkg-devel] shadowing a method from the stats package
In-Reply-To: <e97472a8-873c-f496-6d45-bafc337d03ba@use.startmail.com>
References: <e97472a8-873c-f496-6d45-bafc337d03ba@use.startmail.com>
Message-ID: <CAO1zAVZ3cxgweVvago5_eDNJvv2Vk9YiTwS=6FJMsaWPMUDQ6A@mail.gmail.com>

Hi,

technically you don't need permission for this. You only need permission if
you tamper with the namespace of the stats package, which you don't. You
just hide a function from another package, which is rather common actually
(eg dplyr::lag() and stats::lag() ).

Then again, I'm not sure this will always work, as you rely heavily on the
search path for your function to be found before the one in stats. I would
be interested as well in hearing how this can be solved in a more robust
way, but I can't really come up with something myself. Interesting problem!

Cheers
Joris

On Fri, Jan 11, 2019 at 10:14 PM <qxacur at use.startmail.com> wrote:

> Hello,
>
>     I created a package for working with a new probability
> distribution called unifed. The source code can be found at
> https://gitlab.com/oquijano/unifed .
>
>     This distribution is suitable for GLMs. I have included a a
> function called unifed in the package that returns a family that can
> be used with the glm function.
>
>     For a unifed glm, it is necessary for the dispersion parameter to
> be equal to one. The summary method of the glm class does this
> automatically for the poisson and binomial distributions and I would
> like the same for the unifed. In order to achieve this, I am
> including a summary.glm function in the package so it shadows
> stats::summary.glm when the package is attached. This function is
> actually just a wrapper around stats::summary.glm.  It simply checks
> if the family is unifed; If this is the case it calls
> stats::summary.glm with dispersion=1 and otherwise it simply calls
> stats::summary.glm with the same parameters.  Therefore introducing
> this in the namespace does not break or change the behavior of any
> existing code that uses summary.glm
>
>      According to the CRAN policies I need permission from the
> maintainer of the package for doing this. The maintainer of the package
> is the R core team. To whom should I write to ask for this permission?
> Otherwise is there a different way in which I could achieve the right
> default behavior and respect the CRAN policies?
>
>
> Thank you for your time.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From @lex@ndre@courtiol @ending from gm@il@com  Sat Jan 12 14:27:50 2019
From: @lex@ndre@courtiol @ending from gm@il@com (Alexandre Courtiol)
Date: Sat, 12 Jan 2019 14:27:50 +0100
Subject: [R-pkg-devel] using @inheritParams in documenting data
In-Reply-To: <11f401d4aa4a$f2b1d6f0$d81584d0$@gvdnet.dk>
References: <11f401d4aa4a$f2b1d6f0$d81584d0$@gvdnet.dk>
Message-ID: <CAERMt4fARCRzji0=oJ=Kqaqh7FEythpapXCoNBfeaDK7Y4WgVQ@mail.gmail.com>

Hi Troels,
If you want to create a R package (using roxygen2), I would highly
recommend you to read Hadley Wickham's book on the topic.
The book is easy, short, practical and legally free (here:
http://r-pkgs.had.co.nz/).
If you follow it step by step, everything should work fine.
For anything not covered by the book, as Dirk said, look for examples of
packages you know in GitHub.
++
Alex


On Sat, 12 Jan 2019 at 08:46, Troels Ring <tring at gvdnet.dk> wrote:

> Dearfriends , with your help I'm rapidly improving package development.
> When
> documenting data, I seem to be helped mpst by making the rda directly from
> RStudio via file, new file, R documentation then choosing data. However, my
> data files have a lot of params, so I thought I might use @inheritParams
> since these params are already documented elsewhere in the package. Hence,
> in the rda file created directly from RStudio I tried to add @inheritParams
> CMB (since the params are already documented in CMB) but I cannot find
> exactly how to put it in the rda file.
>
> The skeleton has
>
> \describe{
>
>                            \item{\code(x)}{vector}
>
> And if I put some the params in a comma separated row instead of x they are
> acknowledged in the final rda file -
>
> BUT where and how to put the @inheritParams CMB I cannot find documented.
> Otherwise it seems to run OK
>
>
>
> All best wishes
>
> Troels
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Alexandre Courtiol

http://sites.google.com/site/alexandrecourtiol/home

*"Science is the belief in the ignorance of experts"*, R. Feynman

	[[alternative HTML version deleted]]


From tring @ending from gvdnet@dk  Sat Jan 12 14:52:31 2019
From: tring @ending from gvdnet@dk (Troels Ring)
Date: Sat, 12 Jan 2019 14:52:31 +0100
Subject: [R-pkg-devel] using @inheritParams in documenting data
In-Reply-To: iIeogPYcntXDiiIeqgM8wl
References: <11f401d4aa4a$f2b1d6f0$d81584d0$@gvdnet.dk> iIeogPYcntXDiiIeqgM8wl
Message-ID: <547201d4aa7e$106e43d0$314acb70$@gvdnet.dk>

Hi Dirk - thank you for your kind mail - I can see I better follow the basic
ways! Also since I seem by my shortcuts to have accomplished a major
problem: I had two *.RData files with similar variables of same names in
/data - if I included both and had no rda files to document data, I had this
previously mentioned problem of "following objects are masked by "glovalEnv"
- but if I used the rda files on data directly from RStudio the data were
kept to be from only one of the RData files, I think the first one -
load("*.RData") of course was still correct. 
Thanks a lot for your patience 
Troels

-----Oprindelig meddelelse-----
Fra: Dirk Eddelbuettel <dirk.eddelbuettel at gmail.com> P? vegne af Dirk
Eddelbuettel
Sendt: 12. januar 2019 13:45
Til: Troels Ring <tring at gvdnet.dk>
Cc: package-develop <r-package-devel at r-project.org>
Emne: Re: [R-pkg-devel] using @inheritParams in documenting data


Hi Troels,

Always good to see someone work on packaging with so much energy.

On 12 January 2019 at 08:46, Troels Ring wrote:
| BUT where and how to put the @inheritParams CMB I cannot find documented.
| Otherwise it seems to run OK

I fear you are getting confused between 'roxygen2' and base R.

'roxygen2' is a very handy and powerful add-on package extending R. But none
of its variables, (which conveniently all start with a @) will be documented
in the proper manual, Writing R Extension.

You question about \describe, however, is about Rd which is base R. And that
very command is 'shadowed' by roxygen2 which generates that section. That is
not unlike your previous question about exporting / registration.

Personally, I see value in working old-school here, and continue to argue
that one should be familiar with the _basic_ and _portable_ commands in
Writing R Extensions before putting another layer on top.  Just how I find
it helps to explain what Rcpp does if one has a mental image of the
underlying 'SEXP .Call(funcname, SEXP, SEXP)' it is working with.  So I do
use roxygen to create Rd files but I also spent a decade or so writing Rd
files -- and quite a few people (hi, Duncan) still recommend doing it by
hand.  I think it helps. And you can mix and match.

Also, a decent trick is to search on GitHub with 'user:cran' to restrict
your search to the mirror (thanks, Gabor!) of CRAN packages. For just about
any question, it quite likely that there will be someone who has been there
before among the now (almost) 13,700 packages out there.

Dirk

--
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From tring @ending from gvdnet@dk  Sat Jan 12 14:52:31 2019
From: tring @ending from gvdnet@dk (Troels Ring)
Date: Sat, 12 Jan 2019 14:52:31 +0100
Subject: [R-pkg-devel] using @inheritParams in documenting data
In-Reply-To: iJKTgP91zwUhziJKVg2by7
References: <11f401d4aa4a$f2b1d6f0$d81584d0$@gvdnet.dk> iJKTgP91zwUhziJKVg2by7
Message-ID: <547301d4aa7e$108c2c10$31a48430$@gvdnet.dk>

Thanks a lot! I stumbled over the RStudio way of producing *.rda files for data sets individually instead of making a *.R file as Hadley writes in the book if I understand it correctly. 

It certainly is fun to find out about !!

All best wishes

Troels

 

Fra: Alexandre Courtiol <alexandre.courtiol at gmail.com> 
Sendt: 12. januar 2019 14:28
Til: Troels Ring <tring at gvdnet.dk>
Cc: package-develop <r-package-devel at r-project.org>
Emne: Re: [R-pkg-devel] using @inheritParams in documenting data

 

Hi Troels,

If you want to create a R package (using roxygen2), I would highly recommend you to read Hadley Wickham's book on the topic.

The book is easy, short, practical and legally free (here: http://r-pkgs.had.co.nz/).

If you follow it step by step, everything should work fine.

For anything not covered by the book, as Dirk said, look for examples of packages you know in GitHub.

++

Alex

 

 

On Sat, 12 Jan 2019 at 08:46, Troels Ring <tring at gvdnet.dk <mailto:tring at gvdnet.dk> > wrote:

Dearfriends , with your help I'm rapidly improving package development. When
documenting data, I seem to be helped mpst by making the rda directly from
RStudio via file, new file, R documentation then choosing data. However, my
data files have a lot of params, so I thought I might use @inheritParams
since these params are already documented elsewhere in the package. Hence,
in the rda file created directly from RStudio I tried to add @inheritParams
CMB (since the params are already documented in CMB) but I cannot find
exactly how to put it in the rda file.

The skeleton has

\describe{

                           \item{\code(x)}{vector}

And if I put some the params in a comma separated row instead of x they are
acknowledged in the final rda file -

BUT where and how to put the @inheritParams CMB I cannot find documented.
Otherwise it seems to run OK



All best wishes

Troels


        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>  mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel






-- 

Alexandre Courtiol

http://sites.google.com/site/alexandrecourtiol/home

"Science is the belief in the ignorance of experts", R. Feynman


	[[alternative HTML version deleted]]


From qx@cur m@ili@g off use@st@rtm@il@com  Sat Jan 12 23:01:40 2019
From: qx@cur m@ili@g off use@st@rtm@il@com (qx@cur m@ili@g off use@st@rtm@il@com)
Date: Sat, 12 Jan 2019 17:01:40 -0500
Subject: [R-pkg-devel] shadowing a method from the stats package
In-Reply-To: <CAO1zAVZ3cxgweVvago5_eDNJvv2Vk9YiTwS=6FJMsaWPMUDQ6A@mail.gmail.com>
References: <e97472a8-873c-f496-6d45-bafc337d03ba@use.startmail.com>
 <CAO1zAVZ3cxgweVvago5_eDNJvv2Vk9YiTwS=6FJMsaWPMUDQ6A@mail.gmail.com>
Message-ID: <16acf54d-2b12-ebc7-679a-420d7d464a71@use.startmail.com>

Hi Joris,

??? thank you for your reply.

??? I re-read the CRAN policy after I saw your reply and you are right,
I do not need permission for this.

??? About the search PATH. unifed will always be attached after stats,
so I think the unifed function would always be found before the one in
stats (please correct me if you think I am wrong).

??? Still, I found a different way to solve the problem in order to
avoid NOTEs when I run 'R CMD check --as-cran', that can be considered
more robust:

??? I first changed the name of my wrapper function to something
different (this is in order to avoid a note in registering S3 methods).

??? then, in the zzz.R file inside of the .onLoad function I used
setMethod with where=.GlobalEnv to rewrite the summary method of the glm
class and in there I call the wrapper function.

?? This gives the behavior that I wanted and it does not depend on the
search path.

Cheers,

?? Oscar.

>
> Then again, I'm not sure this will always work, as you rely heavily on
> the search path for your function to be found before the one in stats.
> I would be interested as well in hearing how this can be solved in a
> more robust way, but I can't really come up with something myself.
> Interesting problem!
>
> Cheers
> Joris
>
> On Fri, Jan 11, 2019 at 10:14 PM <qxacur at use.startmail.com
> <mailto:qxacur at use.startmail.com>> wrote:
>
>     Hello,
>
>     ? ? I created a package for working with a new probability
>     distribution called unifed. The source code can be found at
>     https://gitlab.com/oquijano/unifed .
>
>     ? ? This distribution is suitable for GLMs. I have included a a
>     function called unifed in the package that returns a family that can
>     be used with the glm function.
>
>     ? ? For a unifed glm, it is necessary for the dispersion parameter to
>     be equal to one. The summary method of the glm class does this
>     automatically for the poisson and binomial distributions and I would
>     like the same for the unifed. In order to achieve this, I am
>     including a summary.glm function in the package so it shadows
>     stats::summary.glm when the package is attached. This function is
>     actually just a wrapper around stats::summary.glm.? It simply checks
>     if the family is unifed; If this is the case it calls
>     stats::summary.glm with dispersion=1 and otherwise it simply calls
>     stats::summary.glm with the same parameters.? Therefore introducing
>     this in the namespace does not break or change the behavior of any
>     existing code that uses summary.glm
>
>     ? ? ?According to the CRAN policies I need permission from the
>     maintainer of the package for doing this. The maintainer of the
>     package
>     is the R core team. To whom should I write to ask for this permission?
>     Otherwise is there a different way in which I could achieve the right
>     default behavior and respect the CRAN policies?
>
>
>     Thank you for your time.
>
>     ______________________________________________
>     R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>
> -- 
> Joris Meys
> Statistical consultant
>
> Department of Data Analysis and Mathematical Modelling
> Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
>
> tel: +32 (0)9 264 61 79
> -----------
> Biowiskundedagen 2017-2018
> http://www.biowiskundedagen.ugent.be/
>
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From w@ngz1 @ending from uth@c@@@edu  Fri Jan 11 23:51:50 2019
From: w@ngz1 @ending from uth@c@@@edu (Wang, Zhu)
Date: Fri, 11 Jan 2019 22:51:50 +0000
Subject: [R-pkg-devel] R CMD check --as-cran problem
Message-ID: <1547247107724.95300@uthscsa.edu>

I am trying to update an R package but there was some problem illustrated below.


The current version of the package appears to be fine on CRAN:

https://cran.r-project.org/web/checks/check_results_bujar.html


When R checked the package on a Linux system with R 3.5.2, I had no problem, but the following problem occurred with --as-cran option:


R CMD check --as-cran bujar_0.2-3.tar.gz


** testing if installed package can be loaded
Error: package or namespace load failed for 'bujar' in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]):
 there is no package called 'Matrix'
Error: loading failed
Execution halted
ERROR: loading failed


I will appreciate advice on the matter.


Thanks,


Zhu Wang

	[[alternative HTML version deleted]]


From robert@e@mcculloch @ending from gm@il@com  Sat Jan 12 23:40:54 2019
From: robert@e@mcculloch @ending from gm@il@com (Robert McCulloch)
Date: Sat, 12 Jan 2019 15:40:54 -0700
Subject: [R-pkg-devel] check works in ubuntu linux,
 but get debian-CRAN C++ error
Message-ID: <CAHXS5Qa06qOcDQFD_EPQxvFHQwYhHxH6K=joDxx+2Twn+UsEng@mail.gmail.com>

Folks,

############################
I am running Ubuntu:
$ lsb_release -a
LSB Version:
core-9.20170808ubuntu1-noarch:printing-9.20170808ubuntu1-noarch:security-9.20170808ubuntu1-noarch
Distributor ID: Ubuntu
Description:    Ubuntu 18.04.1 LTS
Release:        18.04
Codename:       bionic

############################
my gcc is:
$ g++ --version
g++ (Ubuntu 7.3.0-27ubuntu1~18.04) 7.3.0
Copyright (C) 2017 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

############################
$ R CMD build rbart  --resave-data
$ R CMD check --as-cran rbart_1.0.tar.gz

gives:
Status: 1 NOTE

00check.log has:
* checking CRAN incoming feasibility ... NOTE
Maintainer: ?Robert McCulloch <robert.e.mcculloch at gmail.com>?

$ sudo R CMD INSTALL rbart_1.0.tar.gz
  works fine

############################
But I get a debian error when I submit to CRAN:

Dear maintainer,

package rbart_1.0.tar.gz does not pass the incoming checks automatically,
please see the following pre-tests:
Windows: <
https://win-builder.r-project.org/incoming_pretest/rbart_1.0_20190112_195732/Windows/00check.log
>
Status: 1 NOTE
Debian: <
https://win-builder.r-project.org/incoming_pretest/rbart_1.0_20190112_195732/Debian/00check.log
>
Status: 1 ERROR, 1 NOTE

2.01.2019    20:07          367 00install.out:
* installing *source* package ?rbart? ...
checking whether the C++ compiler works... no
configure: error: in `/srv/hornik/tmp/CRAN/rbart.Rcheck/00_pkg_src/rbart':
configure: error: C++ compiler cannot create executables
See `config.log' for more details
ERROR: configuration failed for package ?rbart?
* removing ?/srv/hornik/tmp/CRAN/rbart.Rcheck/rbart?

############################
So, I don't know why there is some kind of C++ error in CRAN-debian when it
works fine on
my Ubuntu system.
And I don't know how to get more information on the problem.

rbart_1.0.tar.gz  is at
www.rob-mcculloch.org/rbart_1.0.tar.gz

This is my first time emailing this list, hope I did it in a reasonable way.
thanks,
Rob McCulloch

	[[alternative HTML version deleted]]


From edd @ending from debi@n@org  Sun Jan 13 00:17:19 2019
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Sat, 12 Jan 2019 17:17:19 -0600
Subject: [R-pkg-devel] check works in ubuntu linux,
 but get debian-CRAN C++ error
In-Reply-To: <CAHXS5Qa06qOcDQFD_EPQxvFHQwYhHxH6K=joDxx+2Twn+UsEng@mail.gmail.com>
References: <CAHXS5Qa06qOcDQFD_EPQxvFHQwYhHxH6K=joDxx+2Twn+UsEng@mail.gmail.com>
Message-ID: <23610.30079.697157.793092@rob.eddelbuettel.com>


Hi Rob,

On 12 January 2019 at 15:40, Robert McCulloch wrote:
| checking whether the C++ compiler works... no

That line is weird.

It is difficult to debug from afar, and I bemoan that Kurt's system has no
equivalent Docker container (or alike) to make it more reproducible.

But _something_ is up with the compiler. That may, or may not, be an issue at
his end.  Did you try emailing Kurt Hornik?

Best, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd @ending from debi@n@org  Sun Jan 13 00:18:30 2019
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Sat, 12 Jan 2019 17:18:30 -0600
Subject: [R-pkg-devel] R CMD check --as-cran problem
In-Reply-To: <1547247107724.95300@uthscsa.edu>
References: <1547247107724.95300@uthscsa.edu>
Message-ID: <23610.30150.48872.226440@rob.eddelbuettel.com>


On 11 January 2019 at 22:51, Wang, Zhu wrote:
| ** testing if installed package can be loaded
| Error: package or namespace load failed for 'bujar' in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]):
|  there is no package called 'Matrix'
| Error: loading failed
| Execution halted
| ERROR: loading failed
| 
| 
| I will appreciate advice on the matter.

Something tries to use package Matrix but it is not installed. You may need
it in Imports: (and then in NAMESPACE) or in Suggests: (and then test via if
(requireNamepace(...) and load).

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From tring @ending from gvdnet@dk  Sun Jan 13 09:38:17 2019
From: tring @ending from gvdnet@dk (Troels Ring)
Date: Sun, 13 Jan 2019 09:38:17 +0100
Subject: [R-pkg-devel] RData files with identical objects in package
Message-ID: <1ace01d4ab1b$554b1e40$ffe15ac0$@gvdnet.dk>

Dear friends - I have a package under creation making heavy calculations on
chemical/clinical data and I plan to include as "examples" the use of some
literature data used in my papers. To illustrate what then occurs, I made
two RData files consisting only of x and y with different values for x and y
like 

X <- 100

Y <- 1000

save(x,y,file="first.RData")

and then a new x and y in "second" with x <- 45 and y <- 32

When I put these in a "data" directory of a new package without further ado
in RStudio

Ctrl-shift-L

Ctrl-shift-B

 

.there is a warning

* installing *source* package 'try' ...

** R

** data

*** moving datasets to lazyload DB

warning: objects 'x', 'y' are created by more than one data call

** byte-compile and prepare package for lazy loading

** help

  converting help for package 'try'

*** installing help indices

    finding HTML links ...    hello                                   html  

 done

 

Now, when I clear the workspace:

> ls()
character(0)
> devtools::load_all(".")
Loading try
 
Restarting R session...
 
> library(try)
> ls()
character(0)
> x   #-- so even if workspace Is empty x is still kept
[1] 45
> data(first) # and "first" is not seen
> x
[1] 45

 

x is still present - and y 

 

I have been reading and searching in "Writing R extensions" but so far
didn't find the clue.

Seemingly it is the file with the last name that is assessed - when I rename
first.RData to "xfile.RData" we get 100 and 1000.

Now and then when running ctrl-shift-L and - B we see

 

Attaches package: 'try'
 
The following objects are masked _by_ '.GlobalEnv':
x, y

 

Sorry for these problems - 

BW
Troels


	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Sun Jan 13 12:45:56 2019
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Sun, 13 Jan 2019 06:45:56 -0500
Subject: [R-pkg-devel] RData files with identical objects in package
In-Reply-To: <1ace01d4ab1b$554b1e40$ffe15ac0$@gvdnet.dk>
References: <1ace01d4ab1b$554b1e40$ffe15ac0$@gvdnet.dk>
Message-ID: <6385b947-bf0c-d4f8-8f94-4c3da8d77a7b@gmail.com>

On 13/01/2019 3:38 a.m., Troels Ring wrote:
> Dear friends - I have a package under creation making heavy calculations on
> chemical/clinical data and I plan to include as "examples" the use of some
> literature data used in my papers. To illustrate what then occurs, I made
> two RData files consisting only of x and y with different values for x and y
> like
> 
> X <- 100
> 
> Y <- 1000
> 
> save(x,y,file="first.RData")
> 
> and then a new x and y in "second" with x <- 45 and y <- 32
> 
> When I put these in a "data" directory of a new package without further ado
> in RStudio
> 
> Ctrl-shift-L
> 
> Ctrl-shift-B
> 
>   
> 
> .there is a warning
> 
> * installing *source* package 'try' ...
> 
> ** R
> 
> ** data
> 
> *** moving datasets to lazyload DB
> 
> warning: objects 'x', 'y' are created by more than one data call
> 
> ** byte-compile and prepare package for lazy loading
> 
> ** help
> 
>    converting help for package 'try'
> 
> *** installing help indices
> 
>      finding HTML links ...    hello                                   html
> 
>   done
> 
>   
> 
> Now, when I clear the workspace:
> 
>> ls()
> character(0)
>> devtools::load_all(".")
> Loading try
>   
> Restarting R session...
>   
>> library(try)
>> ls()
> character(0)
>> x   #-- so even if workspace Is empty x is still kept
> [1] 45
>> data(first) # and "first" is not seen
>> x
> [1] 45
> 
>   
> 
> x is still present - and y
> 
>   
> 
> I have been reading and searching in "Writing R extensions" but so far
> didn't find the clue.
> 
> Seemingly it is the file with the last name that is assessed - when I rename
> first.RData to "xfile.RData" we get 100 and 1000.
> 
> Now and then when running ctrl-shift-L and - B we see
> 
>   
> 
> Attaches package: 'try'
>   
> The following objects are masked _by_ '.GlobalEnv':
> x, y
> 

Does that every happen when ls() returns character(0)?  It seems likely 
that you have copies of them in the global workspace, and the message is 
correct.

In the earlier situation (ls() *does* return character(0), but x is 
still found), you can find where it was found using

getAnywhere("x")

For example,

 > x <- 2
 > getAnywhere("x")
A single object matching ?x? was found
It was found in the following places
   .GlobalEnv
with value

[1] 2

Duncan Murdoch


From li@t@ @ending from dewey@myzen@co@uk  Sun Jan 13 12:56:22 2019
From: li@t@ @ending from dewey@myzen@co@uk (Michael Dewey)
Date: Sun, 13 Jan 2019 11:56:22 +0000
Subject: [R-pkg-devel] RData files with identical objects in package
In-Reply-To: <1ace01d4ab1b$554b1e40$ffe15ac0$@gvdnet.dk>
References: <1ace01d4ab1b$554b1e40$ffe15ac0$@gvdnet.dk>
Message-ID: <6087cc36-b097-08a3-1597-959915ef9889@dewey.myzen.co.uk>

Dear Troels

Perhaps I misunderstand what you are trying to do but would it be 
possible to put each x and y into a list or a dataframe with different 
names and then modify your usgae to pull them from there? Then there 
would be no danger of users getting the wrong x and y

Michael

On 13/01/2019 08:38, Troels Ring wrote:
> Dear friends - I have a package under creation making heavy calculations on
> chemical/clinical data and I plan to include as "examples" the use of some
> literature data used in my papers. To illustrate what then occurs, I made
> two RData files consisting only of x and y with different values for x and y
> like
> 
> X <- 100
> 
> Y <- 1000
> 
> save(x,y,file="first.RData")
> 
> and then a new x and y in "second" with x <- 45 and y <- 32
> 
> When I put these in a "data" directory of a new package without further ado
> in RStudio
> 
> Ctrl-shift-L
> 
> Ctrl-shift-B
> 
>   
> 
> .there is a warning
> 
> * installing *source* package 'try' ...
> 
> ** R
> 
> ** data
> 
> *** moving datasets to lazyload DB
> 
> warning: objects 'x', 'y' are created by more than one data call
> 
> ** byte-compile and prepare package for lazy loading
> 
> ** help
> 
>    converting help for package 'try'
> 
> *** installing help indices
> 
>      finding HTML links ...    hello                                   html
> 
>   done
> 
>   
> 
> Now, when I clear the workspace:
> 
>> ls()
> character(0)
>> devtools::load_all(".")
> Loading try
>   
> Restarting R session...
>   
>> library(try)
>> ls()
> character(0)
>> x   #-- so even if workspace Is empty x is still kept
> [1] 45
>> data(first) # and "first" is not seen
>> x
> [1] 45
> 
>   
> 
> x is still present - and y
> 
>   
> 
> I have been reading and searching in "Writing R extensions" but so far
> didn't find the clue.
> 
> Seemingly it is the file with the last name that is assessed - when I rename
> first.RData to "xfile.RData" we get 100 and 1000.
> 
> Now and then when running ctrl-shift-L and - B we see
> 
>   
> 
> Attaches package: 'try'
>   
> The following objects are masked _by_ '.GlobalEnv':
> x, y
> 
>   
> 
> Sorry for these problems -
> 
> BW
> Troels
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From tring @ending from gvdnet@dk  Sun Jan 13 14:13:24 2019
From: tring @ending from gvdnet@dk (Troels Ring)
Date: Sun, 13 Jan 2019 14:13:24 +0100
Subject: [R-pkg-devel] RData files with identical objects in package
In-Reply-To: ieDHgTNCWtXDiieDJgNm2j
References: <1ace01d4ab1b$554b1e40$ffe15ac0$@gvdnet.dk> ieDHgTNCWtXDiieDJgNm2j
Message-ID: <2f6201d4ab41$c43a0e30$4cae2a90$@gvdnet.dk>

Thanks a lot - here's is what I get:

A single object matching ?x? was found
It was found in the following places
  package:try
with value

[1] 100

Now put in the last "xfile.RData" - and
"afile.RData" is still muted

Restarting R session...

> library(try)
> x
[1] 100
> getAnywhere("x")
A single object matching ?x? was found
It was found in the following places
  package:try
with value

[1] 100
> data(afile)
> x
[1] 100

Whereas we know x in afile.RData is 45

So something is very wrong
Sorry to be so helpless
BW
Troels

-----Oprindelig meddelelse-----
Fra: Duncan Murdoch <murdoch.duncan at gmail.com> 
Sendt: 13. januar 2019 12:46
Til: Troels Ring <tring at gvdnet.dk>; package-develop <r-package-devel at r-project.org>
Emne: Re: [R-pkg-devel] RData files with identical objects in package

On 13/01/2019 3:38 a.m., Troels Ring wrote:
> Dear friends - I have a package under creation making heavy 
> calculations on chemical/clinical data and I plan to include as 
> "examples" the use of some literature data used in my papers. To 
> illustrate what then occurs, I made two RData files consisting only of 
> x and y with different values for x and y like
> 
> X <- 100
> 
> Y <- 1000
> 
> save(x,y,file="first.RData")
> 
> and then a new x and y in "second" with x <- 45 and y <- 32
> 
> When I put these in a "data" directory of a new package without 
> further ado in RStudio
> 
> Ctrl-shift-L
> 
> Ctrl-shift-B
> 
>   
> 
> .there is a warning
> 
> * installing *source* package 'try' ...
> 
> ** R
> 
> ** data
> 
> *** moving datasets to lazyload DB
> 
> warning: objects 'x', 'y' are created by more than one data call
> 
> ** byte-compile and prepare package for lazy loading
> 
> ** help
> 
>    converting help for package 'try'
> 
> *** installing help indices
> 
>      finding HTML links ...    hello                                   html
> 
>   done
> 
>   
> 
> Now, when I clear the workspace:
> 
>> ls()
> character(0)
>> devtools::load_all(".")
> Loading try
>   
> Restarting R session...
>   
>> library(try)
>> ls()
> character(0)
>> x   #-- so even if workspace Is empty x is still kept
> [1] 45
>> data(first) # and "first" is not seen x
> [1] 45
> 
>   
> 
> x is still present - and y
> 
>   
> 
> I have been reading and searching in "Writing R extensions" but so far
> didn't find the clue.
> 
> Seemingly it is the file with the last name that is assessed - when I rename
> first.RData to "xfile.RData" we get 100 and 1000.
> 
> Now and then when running ctrl-shift-L and - B we see
> 
>   
> 
> Attaches package: 'try'
>   
> The following objects are masked _by_ '.GlobalEnv':
> x, y
> 

Does that every happen when ls() returns character(0)?  It seems likely 
that you have copies of them in the global workspace, and the message is 
correct.

In the earlier situation (ls() *does* return character(0), but x is 
still found), you can find where it was found using

getAnywhere("x")

For example,

 > x <- 2
 > getAnywhere("x")
A single object matching ?x? was found
It was found in the following places
   .GlobalEnv
with value

[1] 2

Duncan Murdoch


From tring @ending from gvdnet@dk  Sun Jan 13 14:13:24 2019
From: tring @ending from gvdnet@dk (Troels Ring)
Date: Sun, 13 Jan 2019 14:13:24 +0100
Subject: [R-pkg-devel] RData files with identical objects in package
In-Reply-To: ieNRgTPMTtXDiieNTgNnFy
References: <1ace01d4ab1b$554b1e40$ffe15ac0$@gvdnet.dk> ieNRgTPMTtXDiieNTgNnFy
Message-ID: <2f6101d4ab41$c40c9590$4c25c0b0$@gvdnet.dk>

Thanks a lot - I'm sure you are right that I could just use different names but I cannot understand why it could cause problem to have two different well formated .RData files in the /data directory both with an "x" - is that really illegal? I cannot see it stated in the official munual - but it is long (wrting r extensions)
-BW
Troels

-----Oprindelig meddelelse-----
Fra: Michael Dewey <lists at dewey.myzen.co.uk> 
Sendt: 13. januar 2019 12:56
Til: Troels Ring <tring at gvdnet.dk>; package-develop <r-package-devel at r-project.org>
Emne: Re: [R-pkg-devel] RData files with identical objects in package

Dear Troels

Perhaps I misunderstand what you are trying to do but would it be possible to put each x and y into a list or a dataframe with different names and then modify your usgae to pull them from there? Then there would be no danger of users getting the wrong x and y

Michael

On 13/01/2019 08:38, Troels Ring wrote:
> Dear friends - I have a package under creation making heavy 
> calculations on chemical/clinical data and I plan to include as 
> "examples" the use of some literature data used in my papers. To 
> illustrate what then occurs, I made two RData files consisting only of 
> x and y with different values for x and y like
> 
> X <- 100
> 
> Y <- 1000
> 
> save(x,y,file="first.RData")
> 
> and then a new x and y in "second" with x <- 45 and y <- 32
> 
> When I put these in a "data" directory of a new package without 
> further ado in RStudio
> 
> Ctrl-shift-L
> 
> Ctrl-shift-B
> 
>   
> 
> .there is a warning
> 
> * installing *source* package 'try' ...
> 
> ** R
> 
> ** data
> 
> *** moving datasets to lazyload DB
> 
> warning: objects 'x', 'y' are created by more than one data call
> 
> ** byte-compile and prepare package for lazy loading
> 
> ** help
> 
>    converting help for package 'try'
> 
> *** installing help indices
> 
>      finding HTML links ...    hello                                   html
> 
>   done
> 
>   
> 
> Now, when I clear the workspace:
> 
>> ls()
> character(0)
>> devtools::load_all(".")
> Loading try
>   
> Restarting R session...
>   
>> library(try)
>> ls()
> character(0)
>> x   #-- so even if workspace Is empty x is still kept
> [1] 45
>> data(first) # and "first" is not seen x
> [1] 45
> 
>   
> 
> x is still present - and y
> 
>   
> 
> I have been reading and searching in "Writing R extensions" but so far
> didn't find the clue.
> 
> Seemingly it is the file with the last name that is assessed - when I rename
> first.RData to "xfile.RData" we get 100 and 1000.
> 
> Now and then when running ctrl-shift-L and - B we see
> 
>   
> 
> Attaches package: 'try'
>   
> The following objects are masked _by_ '.GlobalEnv':
> x, y
> 
>   
> 
> Sorry for these problems -
> 
> BW
> Troels
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From pd@lgd @ending from gm@il@com  Sun Jan 13 22:00:02 2019
From: pd@lgd @ending from gm@il@com (peter dalgaard)
Date: Sun, 13 Jan 2019 22:00:02 +0100
Subject: [R-pkg-devel] RData files with identical objects in package
In-Reply-To: <2f6101d4ab41$c40c9590$4c25c0b0$@gvdnet.dk>
References: <1ace01d4ab1b$554b1e40$ffe15ac0$@gvdnet.dk>
 <2f6101d4ab41$c40c9590$4c25c0b0$@gvdnet.dk>
Message-ID: <25104064-D5FB-4813-A402-1C748109498C@gmail.com>

I think it is illegal if you use the lazyload database, because that is indexed by name and contains every object that would be created by data(). This creates an obvious issue if two objects share a name. 

Once you use the lazyload database, loading the package creates an environment which is initially full of promises, one for each object. Evaluating one of these makes the actual object appear in the environment. 

Using data() causes the corresponding promise(s) to be created in the global environment. IIRC, there is a registry that says which objects are created by which arguments to data(), but as they are still taken from the lazydata database, the last one created with a given name still wins.

-ps 

> On 13 Jan 2019, at 14:13 , Troels Ring <tring at gvdnet.dk> wrote:
> 
> Thanks a lot - I'm sure you are right that I could just use different names but I cannot understand why it could cause problem to have two different well formated .RData files in the /data directory both with an "x" - is that really illegal? I cannot see it stated in the official munual - but it is long (wrting r extensions)
> -BW
> Troels
> 
> -----Oprindelig meddelelse-----
> Fra: Michael Dewey <lists at dewey.myzen.co.uk> 
> Sendt: 13. januar 2019 12:56
> Til: Troels Ring <tring at gvdnet.dk>; package-develop <r-package-devel at r-project.org>
> Emne: Re: [R-pkg-devel] RData files with identical objects in package
> 
> Dear Troels
> 
> Perhaps I misunderstand what you are trying to do but would it be possible to put each x and y into a list or a dataframe with different names and then modify your usgae to pull them from there? Then there would be no danger of users getting the wrong x and y
> 
> Michael
> 
> On 13/01/2019 08:38, Troels Ring wrote:
>> Dear friends - I have a package under creation making heavy 
>> calculations on chemical/clinical data and I plan to include as 
>> "examples" the use of some literature data used in my papers. To 
>> illustrate what then occurs, I made two RData files consisting only of 
>> x and y with different values for x and y like
>> 
>> X <- 100
>> 
>> Y <- 1000
>> 
>> save(x,y,file="first.RData")
>> 
>> and then a new x and y in "second" with x <- 45 and y <- 32
>> 
>> When I put these in a "data" directory of a new package without 
>> further ado in RStudio
>> 
>> Ctrl-shift-L
>> 
>> Ctrl-shift-B
>> 
>> 
>> 
>> .there is a warning
>> 
>> * installing *source* package 'try' ...
>> 
>> ** R
>> 
>> ** data
>> 
>> *** moving datasets to lazyload DB
>> 
>> warning: objects 'x', 'y' are created by more than one data call
>> 
>> ** byte-compile and prepare package for lazy loading
>> 
>> ** help
>> 
>>   converting help for package 'try'
>> 
>> *** installing help indices
>> 
>>     finding HTML links ...    hello                                   html
>> 
>>  done
>> 
>> 
>> 
>> Now, when I clear the workspace:
>> 
>>> ls()
>> character(0)
>>> devtools::load_all(".")
>> Loading try
>> 
>> Restarting R session...
>> 
>>> library(try)
>>> ls()
>> character(0)
>>> x   #-- so even if workspace Is empty x is still kept
>> [1] 45
>>> data(first) # and "first" is not seen x
>> [1] 45
>> 
>> 
>> 
>> x is still present - and y
>> 
>> 
>> 
>> I have been reading and searching in "Writing R extensions" but so far
>> didn't find the clue.
>> 
>> Seemingly it is the file with the last name that is assessed - when I rename
>> first.RData to "xfile.RData" we get 100 and 1000.
>> 
>> Now and then when running ctrl-shift-L and - B we see
>> 
>> 
>> 
>> Attaches package: 'try'
>> 
>> The following objects are masked _by_ '.GlobalEnv':
>> x, y
>> 
>> 
>> 
>> Sorry for these problems -
>> 
>> BW
>> Troels
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
> 
> -- 
> Michael
> http://www.dewey.myzen.co.uk/home.html
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From mich@elchirico4 @ending from gm@il@com  Mon Jan 14 02:48:20 2019
From: mich@elchirico4 @ending from gm@il@com (Michael Chirico)
Date: Mon, 14 Jan 2019 09:48:20 +0800
Subject: [R-pkg-devel] Getting started with memory debugging
Message-ID: <CAPRVBcwgkgpxbGBA3k7T-CcP6SwSHFyL5vVhXj4zajFCL11uCw@mail.gmail.com>

Hello all,

I'm getting started doing some debugging of memory errors and got stuck
trying to reproduce the errors found during my CRAN submission process:

https://cran.r-project.org/web/checks/check_results_geohashTools.html

Starting with the clang-ASAN issues, my approach was to try and use the
rocker/r-devel-san image.

Launching with the package directory mounted via:

docker run --rm -it -v
/Users/michael.chirico/github/geohashTools/:/home/docker/geohashTools
rocker/r-devel-san /bin/bash

Building required libraries:

apt-get update
apt-get install libgdal-dev libudunits2-dev

Then installing my Imports/Suggests:

Rscript -e "install.packages(c('Rcpp', 'sp', 'sf', 'testthat', 'mockery'))"

Now attempting to reproduce the memory errors:

cd /home/docker/geohashTools
RD CMD build .
RD CMD check geohashTools_0.2.0.tar.gz

But this is check is successful (I was hoping it'd fail)... I assume the
problem is from the last few steps. The manual says:

>
> It requires code to have been compiled and linked with -fsanitize=address


But I'm not sure how to enforce this (I assumed it was being handled by how
RD binary is built but I didn't notice any compilation output from R CMD
build .

Any help on getting started here would be appreciated :)
Michael Chirico

PS the source can be found at https://github.com/MichaelChirico/geohashTools

	[[alternative HTML version deleted]]


From edd @ending from debi@n@org  Mon Jan 14 03:59:14 2019
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Sun, 13 Jan 2019 20:59:14 -0600
Subject: [R-pkg-devel] Getting started with memory debugging
In-Reply-To: <CAPRVBcwgkgpxbGBA3k7T-CcP6SwSHFyL5vVhXj4zajFCL11uCw@mail.gmail.com>
References: <CAPRVBcwgkgpxbGBA3k7T-CcP6SwSHFyL5vVhXj4zajFCL11uCw@mail.gmail.com>
Message-ID: <23611.64258.237686.395169@rob.eddelbuettel.com>


On 14 January 2019 at 09:48, Michael Chirico wrote:
| Hello all,
| 
| I'm getting started doing some debugging of memory errors and got stuck
| trying to reproduce the errors found during my CRAN submission process:
| 
| https://cran.r-project.org/web/checks/check_results_geohashTools.html
| 
| Starting with the clang-ASAN issues, my approach was to try and use the
| rocker/r-devel-san image.

Good idea! I once set this up for a similar need, and then created the
'sanitiziers' package to have a few "known to fail" test cases to make sure
the container was still valid and identifying faults it was supposed to find.

But being busy with a number of other things meant I did not keep up with
this container. So there is no promise it currently reflects what CRAN tests
for.

Winston built another (comprehensive !!) set of images over at this repo:
https://github.com/wch/r-debug

These are more current -- but fundamentally they have the same exact flaw:
CRAN does their thing, and someone has to catch up.  Deep down, that really
is a silly game.  We'd be (much) better off if the CRAN testbeds were truly
reproducible, and I had meant to write something up suggestion something
around that idea. It hasn't happened.

So here you are.
 
| Launching with the package directory mounted via:
| 
| docker run --rm -it -v
| /Users/michael.chirico/github/geohashTools/:/home/docker/geohashTools
| rocker/r-devel-san /bin/bash
| 
| Building required libraries:
| 
| apt-get update
| apt-get install libgdal-dev libudunits2-dev
| 
| Then installing my Imports/Suggests:
| 
| Rscript -e "install.packages(c('Rcpp', 'sp', 'sf', 'testthat', 'mockery'))"
| 
| Now attempting to reproduce the memory errors:
| 
| cd /home/docker/geohashTools
| RD CMD build .
| RD CMD check geohashTools_0.2.0.tar.gz
| 
| But this is check is successful (I was hoping it'd fail)... I assume the
| problem is from the last few steps. The manual says:
| 
| >
| > It requires code to have been compiled and linked with -fsanitize=address
| 
| But I'm not sure how to enforce this (I assumed it was being handled by how
| RD binary is built but I didn't notice any compilation output from R CMD
| build .

I am a little out of sync with your package here. Maybe it "merely" requires
that the library you reinstalled also rebuilds with -fsanitize=address which
you could ensure, I'd hope, via PKG_CPPFLAGS and/or editing of its src/Makevars.

Because that is essentially it: you do need *all* of

 - R itself
 - the package you wanted
 - and its dependencies

to be built consistently for SAN/ASAN with the very settings CRAN uses.

Which are "documented" in a README somewhere on some site.  I think it is
worthwhile having a conversation about how we can do one step better than
that. I would be happy to help, but a little constrained on free time and
cannot lead this. Can you, or someone else?

Dirk

| 
| Any help on getting started here would be appreciated :)
| Michael Chirico
| 
| PS the source can be found at https://github.com/MichaelChirico/geohashTools
| 
| 	[[alternative HTML version deleted]]
| 
| ______________________________________________
| R-package-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From tring @ending from gvdnet@dk  Mon Jan 14 07:10:45 2019
From: tring @ending from gvdnet@dk (Troels Ring)
Date: Mon, 14 Jan 2019 07:10:45 +0100
Subject: [R-pkg-devel] RData files with identical objects in package
In-Reply-To: imrXgV0lbtXDiimrYgONtB
References: <1ace01d4ab1b$554b1e40$ffe15ac0$@gvdnet.dk>
 <2f6101d4ab41$c40c9590$4c25c0b0$@gvdnet.dk> imrXgV0lbtXDiimrYgONtB
Message-ID: <0d5601d4abcf$e333a6a0$a99af3e0$@gvdnet.dk>

Thank you so much! Perhaps it could be mentioned in the official
documentation on writing R extensions - even if - if I can read English -
the 
default is to avoid "lazyData" loading - and "laxyData" loading is in some
opposition to loading using data() - whereas - if we use RStudio, and make
an R documentation file for data, we have it ending with:
\examples{
data(ddd)
## maybe str(ddd) ; plot(ddd) ...
}
\keyword{datasets}

At the same time as "lazyData" is used default in DESCRIPTION ?

1.1.6 Data in packages
The data subdirectory is for data files, either to be made available via
lazy-loading or for loading using data(). (The choice is made by the
'LazyData' field in the DESCRIPTION file: the default is not to do so.) It
should not be used for other data files needed by the package, and the
convention has grown up to use directory inst/extdata for such files.

All best wishes
Troels


-----Oprindelig meddelelse-----
Fra: peter dalgaard <pdalgd at gmail.com> 
Sendt: 13. januar 2019 22:00
Til: Troels Ring <tring at gvdnet.dk>
Cc: Michael Dewey <lists at dewey.myzen.co.uk>; package-develop
<r-package-devel at r-project.org>
Emne: Re: [R-pkg-devel] RData files with identical objects in package

I think it is illegal if you use the lazyload database, because that is
indexed by name and contains every object that would be created by data().
This creates an obvious issue if two objects share a name. 

Once you use the lazyload database, loading the package creates an
environment which is initially full of promises, one for each object.
Evaluating one of these makes the actual object appear in the environment. 

Using data() causes the corresponding promise(s) to be created in the global
environment. IIRC, there is a registry that says which objects are created
by which arguments to data(), but as they are still taken from the lazydata
database, the last one created with a given name still wins.

-ps 

> On 13 Jan 2019, at 14:13 , Troels Ring <tring at gvdnet.dk> wrote:
> 
> Thanks a lot - I'm sure you are right that I could just use different 
> names but I cannot understand why it could cause problem to have two 
> different well formated .RData files in the /data directory both with 
> an "x" - is that really illegal? I cannot see it stated in the 
> official munual - but it is long (wrting r extensions) -BW Troels
> 
> -----Oprindelig meddelelse-----
> Fra: Michael Dewey <lists at dewey.myzen.co.uk>
> Sendt: 13. januar 2019 12:56
> Til: Troels Ring <tring at gvdnet.dk>; package-develop 
> <r-package-devel at r-project.org>
> Emne: Re: [R-pkg-devel] RData files with identical objects in package
> 
> Dear Troels
> 
> Perhaps I misunderstand what you are trying to do but would it be 
> possible to put each x and y into a list or a dataframe with different 
> names and then modify your usgae to pull them from there? Then there 
> would be no danger of users getting the wrong x and y
> 
> Michael
> 
> On 13/01/2019 08:38, Troels Ring wrote:
>> Dear friends - I have a package under creation making heavy 
>> calculations on chemical/clinical data and I plan to include as 
>> "examples" the use of some literature data used in my papers. To 
>> illustrate what then occurs, I made two RData files consisting only 
>> of x and y with different values for x and y like
>> 
>> X <- 100
>> 
>> Y <- 1000
>> 
>> save(x,y,file="first.RData")
>> 
>> and then a new x and y in "second" with x <- 45 and y <- 32
>> 
>> When I put these in a "data" directory of a new package without 
>> further ado in RStudio
>> 
>> Ctrl-shift-L
>> 
>> Ctrl-shift-B
>> 
>> 
>> 
>> .there is a warning
>> 
>> * installing *source* package 'try' ...
>> 
>> ** R
>> 
>> ** data
>> 
>> *** moving datasets to lazyload DB
>> 
>> warning: objects 'x', 'y' are created by more than one data call
>> 
>> ** byte-compile and prepare package for lazy loading
>> 
>> ** help
>> 
>>   converting help for package 'try'
>> 
>> *** installing help indices
>> 
>>     finding HTML links ...    hello
html
>> 
>>  done
>> 
>> 
>> 
>> Now, when I clear the workspace:
>> 
>>> ls()
>> character(0)
>>> devtools::load_all(".")
>> Loading try
>> 
>> Restarting R session...
>> 
>>> library(try)
>>> ls()
>> character(0)
>>> x   #-- so even if workspace Is empty x is still kept
>> [1] 45
>>> data(first) # and "first" is not seen x
>> [1] 45
>> 
>> 
>> 
>> x is still present - and y
>> 
>> 
>> 
>> I have been reading and searching in "Writing R extensions" but so 
>> far didn't find the clue.
>> 
>> Seemingly it is the file with the last name that is assessed - when I 
>> rename first.RData to "xfile.RData" we get 100 and 1000.
>> 
>> Now and then when running ctrl-shift-L and - B we see
>> 
>> 
>> 
>> Attaches package: 'try'
>> 
>> The following objects are masked _by_ '.GlobalEnv':
>> x, y
>> 
>> 
>> 
>> Sorry for these problems -
>> 
>> BW
>> Troels
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list 
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
> 
> --
> Michael
> http://www.dewey.myzen.co.uk/home.html
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

--
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School Solbjerg Plads 3, 2000
Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From pd@lgd @ending from gm@il@com  Mon Jan 14 15:16:57 2019
From: pd@lgd @ending from gm@il@com (peter dalgaard)
Date: Mon, 14 Jan 2019 15:16:57 +0100
Subject: [R-pkg-devel] RData files with identical objects in package
In-Reply-To: <0d5601d4abcf$e333a6a0$a99af3e0$@gvdnet.dk>
References: <1ace01d4ab1b$554b1e40$ffe15ac0$@gvdnet.dk>
 <2f6101d4ab41$c40c9590$4c25c0b0$@gvdnet.dk>
 <0d5601d4abcf$e333a6a0$a99af3e0$@gvdnet.dk>
Message-ID: <8DB9D704-3629-4E4F-A5D5-D3DEC3E38FC5@gmail.com>

There is (of course) a difference between what is the default for a (missing) field in DESCRIPTION and what shells like RStudio put into the field by default... 

I don't think there is a discrepancy between what is in the official documentation and what R and R CMD * actually does.

-pd

> On 14 Jan 2019, at 07:10 , Troels Ring <tring at gvdnet.dk> wrote:
> 
> Thank you so much! Perhaps it could be mentioned in the official
> documentation on writing R extensions - even if - if I can read English -
> the 
> default is to avoid "lazyData" loading - and "laxyData" loading is in some
> opposition to loading using data() - whereas - if we use RStudio, and make
> an R documentation file for data, we have it ending with:
> \examples{
> data(ddd)
> ## maybe str(ddd) ; plot(ddd) ...
> }
> \keyword{datasets}
> 
> At the same time as "lazyData" is used default in DESCRIPTION ?
> 
> 1.1.6 Data in packages
> The data subdirectory is for data files, either to be made available via
> lazy-loading or for loading using data(). (The choice is made by the
> 'LazyData' field in the DESCRIPTION file: the default is not to do so.) It
> should not be used for other data files needed by the package, and the
> convention has grown up to use directory inst/extdata for such files.
> 
> All best wishes
> Troels
> 
> 
> -----Oprindelig meddelelse-----
> Fra: peter dalgaard <pdalgd at gmail.com> 
> Sendt: 13. januar 2019 22:00
> Til: Troels Ring <tring at gvdnet.dk>
> Cc: Michael Dewey <lists at dewey.myzen.co.uk>; package-develop
> <r-package-devel at r-project.org>
> Emne: Re: [R-pkg-devel] RData files with identical objects in package
> 
> I think it is illegal if you use the lazyload database, because that is
> indexed by name and contains every object that would be created by data().
> This creates an obvious issue if two objects share a name. 
> 
> Once you use the lazyload database, loading the package creates an
> environment which is initially full of promises, one for each object.
> Evaluating one of these makes the actual object appear in the environment. 
> 
> Using data() causes the corresponding promise(s) to be created in the global
> environment. IIRC, there is a registry that says which objects are created
> by which arguments to data(), but as they are still taken from the lazydata
> database, the last one created with a given name still wins.
> 
> -ps 
> 
>> On 13 Jan 2019, at 14:13 , Troels Ring <tring at gvdnet.dk> wrote:
>> 
>> Thanks a lot - I'm sure you are right that I could just use different 
>> names but I cannot understand why it could cause problem to have two 
>> different well formated .RData files in the /data directory both with 
>> an "x" - is that really illegal? I cannot see it stated in the 
>> official munual - but it is long (wrting r extensions) -BW Troels
>> 
>> -----Oprindelig meddelelse-----
>> Fra: Michael Dewey <lists at dewey.myzen.co.uk>
>> Sendt: 13. januar 2019 12:56
>> Til: Troels Ring <tring at gvdnet.dk>; package-develop 
>> <r-package-devel at r-project.org>
>> Emne: Re: [R-pkg-devel] RData files with identical objects in package
>> 
>> Dear Troels
>> 
>> Perhaps I misunderstand what you are trying to do but would it be 
>> possible to put each x and y into a list or a dataframe with different 
>> names and then modify your usgae to pull them from there? Then there 
>> would be no danger of users getting the wrong x and y
>> 
>> Michael
>> 
>> On 13/01/2019 08:38, Troels Ring wrote:
>>> Dear friends - I have a package under creation making heavy 
>>> calculations on chemical/clinical data and I plan to include as 
>>> "examples" the use of some literature data used in my papers. To 
>>> illustrate what then occurs, I made two RData files consisting only 
>>> of x and y with different values for x and y like
>>> 
>>> X <- 100
>>> 
>>> Y <- 1000
>>> 
>>> save(x,y,file="first.RData")
>>> 
>>> and then a new x and y in "second" with x <- 45 and y <- 32
>>> 
>>> When I put these in a "data" directory of a new package without 
>>> further ado in RStudio
>>> 
>>> Ctrl-shift-L
>>> 
>>> Ctrl-shift-B
>>> 
>>> 
>>> 
>>> .there is a warning
>>> 
>>> * installing *source* package 'try' ...
>>> 
>>> ** R
>>> 
>>> ** data
>>> 
>>> *** moving datasets to lazyload DB
>>> 
>>> warning: objects 'x', 'y' are created by more than one data call
>>> 
>>> ** byte-compile and prepare package for lazy loading
>>> 
>>> ** help
>>> 
>>>  converting help for package 'try'
>>> 
>>> *** installing help indices
>>> 
>>>    finding HTML links ...    hello
> html
>>> 
>>> done
>>> 
>>> 
>>> 
>>> Now, when I clear the workspace:
>>> 
>>>> ls()
>>> character(0)
>>>> devtools::load_all(".")
>>> Loading try
>>> 
>>> Restarting R session...
>>> 
>>>> library(try)
>>>> ls()
>>> character(0)
>>>> x   #-- so even if workspace Is empty x is still kept
>>> [1] 45
>>>> data(first) # and "first" is not seen x
>>> [1] 45
>>> 
>>> 
>>> 
>>> x is still present - and y
>>> 
>>> 
>>> 
>>> I have been reading and searching in "Writing R extensions" but so 
>>> far didn't find the clue.
>>> 
>>> Seemingly it is the file with the last name that is assessed - when I 
>>> rename first.RData to "xfile.RData" we get 100 and 1000.
>>> 
>>> Now and then when running ctrl-shift-L and - B we see
>>> 
>>> 
>>> 
>>> Attaches package: 'try'
>>> 
>>> The following objects are masked _by_ '.GlobalEnv':
>>> x, y
>>> 
>>> 
>>> 
>>> Sorry for these problems -
>>> 
>>> BW
>>> Troels
>>> 
>>> 
>>> 	[[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list 
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> 
>> 
>> --
>> Michael
>> http://www.dewey.myzen.co.uk/home.html
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list 
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School Solbjerg Plads 3, 2000
> Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From tring @ending from gvdnet@dk  Mon Jan 14 15:44:48 2019
From: tring @ending from gvdnet@dk (Troels Ring)
Date: Mon, 14 Jan 2019 15:44:48 +0100
Subject: [R-pkg-devel] undocumented data sets
Message-ID: <7ec501d4ac17$b3689d70$1a39d850$@gvdnet.dk>

Dear friends - with your help I'm almost through developing a package and
Ctrl-shit-E now only has a single warning

> checking for missing documentation entries ... WARNING

  Undocumented data sets:

    'Cl' 'K' 'Na' 'TOTAL' 'WA' 'INPUT' 'Alb' 'Ca' 'Lact' 'Mg' 'PCO2' 'S1'

    'Brom' 'pHOBS'

  All user-level objects in a package should have documentation entries.

  See chapter 'Writing R documentation files' in the 'Writing R

  Extensions' manual.

 

But in 2.1.2.Documenting data sets in Writing R extensions it is said that
\arguments is not needed and in the template on p 72 in the manual I see no
entry directly making for this documentation. Everything runs just well -
but I must have it clean now! 

I also tried the RStudio option of generating a Rd file on data, and there
was an entry I filled out like this

 

\describe{

    \item{\code{Brom}}{Dataframe of Table S4 in Glaser et al}

 

But t didn't cure the warning (Brom entry) above?

 

All best wishes

Troels


	[[alternative HTML version deleted]]


From iuc@r @ending from fedor@project@org  Mon Jan 14 15:49:51 2019
From: iuc@r @ending from fedor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Mon, 14 Jan 2019 15:49:51 +0100
Subject: [R-pkg-devel] undocumented data sets
In-Reply-To: <7ec501d4ac17$b3689d70$1a39d850$@gvdnet.dk>
References: <7ec501d4ac17$b3689d70$1a39d850$@gvdnet.dk>
Message-ID: <CALEXWq3XZ54sO7pYeW-NAbbma6z2NdHoMHxfVsbCWAp=kC48vQ@mail.gmail.com>

See an example with roxygen2:

https://github.com/r-quantities/errors/blob/master/R/data.R

And how this is translated if you prefer to write the Rd yourself:

https://github.com/r-quantities/errors/blob/master/man/datasets.Rd

I?aki

On Mon, 14 Jan 2019 at 15:45, Troels Ring <tring at gvdnet.dk> wrote:
>
> Dear friends - with your help I'm almost through developing a package and
> Ctrl-shit-E now only has a single warning
>
> > checking for missing documentation entries ... WARNING
>
>   Undocumented data sets:
>
>     'Cl' 'K' 'Na' 'TOTAL' 'WA' 'INPUT' 'Alb' 'Ca' 'Lact' 'Mg' 'PCO2' 'S1'
>
>     'Brom' 'pHOBS'
>
>   All user-level objects in a package should have documentation entries.
>
>   See chapter 'Writing R documentation files' in the 'Writing R
>
>   Extensions' manual.
>
>
>
> But in 2.1.2.Documenting data sets in Writing R extensions it is said that
> \arguments is not needed and in the template on p 72 in the manual I see no
> entry directly making for this documentation. Everything runs just well -
> but I must have it clean now!
>
> I also tried the RStudio option of generating a Rd file on data, and there
> was an entry I filled out like this
>
>
>
> \describe{
>
>     \item{\code{Brom}}{Dataframe of Table S4 in Glaser et al}
>
>
>
> But t didn't cure the warning (Brom entry) above?
>
>
>
> All best wishes
>
> Troels
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
I?aki ?car


From tring @ending from gvdnet@dk  Mon Jan 14 17:24:46 2019
From: tring @ending from gvdnet@dk (Troels Ring)
Date: Mon, 14 Jan 2019 17:24:46 +0100
Subject: [R-pkg-devel] RData files with identical objects in package
In-Reply-To: j32ygYgc6tXDij32zgPkCT
References: <1ace01d4ab1b$554b1e40$ffe15ac0$@gvdnet.dk>
 <2f6101d4ab41$c40c9590$4c25c0b0$@gvdnet.dk>
 <0d5601d4abcf$e333a6a0$a99af3e0$@gvdnet.dk> j32ygYgc6tXDij32zgPkCT
Message-ID: <9fe001d4ac25$aa7ec870$ff7c5950$@gvdnet.dk>

Thanks a lot - for my purpose right now I seem to prosper from not loading
lazy
All best
Troels

-----Oprindelig meddelelse-----
Fra: peter dalgaard <pdalgd at gmail.com> 
Sendt: 14. januar 2019 15:17
Til: Troels Ring <tring at gvdnet.dk>
Cc: Michael Dewey <lists at dewey.myzen.co.uk>; package-develop
<r-package-devel at r-project.org>
Emne: Re: [R-pkg-devel] RData files with identical objects in package

There is (of course) a difference between what is the default for a
(missing) field in DESCRIPTION and what shells like RStudio put into the
field by default... 

I don't think there is a discrepancy between what is in the official
documentation and what R and R CMD * actually does.

-pd

> On 14 Jan 2019, at 07:10 , Troels Ring <tring at gvdnet.dk> wrote:
> 
> Thank you so much! Perhaps it could be mentioned in the official 
> documentation on writing R extensions - even if - if I can read 
> English - the default is to avoid "lazyData" loading - and "laxyData" 
> loading is in some opposition to loading using data() - whereas - if 
> we use RStudio, and make an R documentation file for data, we have it 
> ending with:
> \examples{
> data(ddd)
> ## maybe str(ddd) ; plot(ddd) ...
> }
> \keyword{datasets}
> 
> At the same time as "lazyData" is used default in DESCRIPTION ?
> 
> 1.1.6 Data in packages
> The data subdirectory is for data files, either to be made available 
> via lazy-loading or for loading using data(). (The choice is made by 
> the 'LazyData' field in the DESCRIPTION file: the default is not to do 
> so.) It should not be used for other data files needed by the package, 
> and the convention has grown up to use directory inst/extdata for such
files.
> 
> All best wishes
> Troels
> 
> 
> -----Oprindelig meddelelse-----
> Fra: peter dalgaard <pdalgd at gmail.com>
> Sendt: 13. januar 2019 22:00
> Til: Troels Ring <tring at gvdnet.dk>
> Cc: Michael Dewey <lists at dewey.myzen.co.uk>; package-develop 
> <r-package-devel at r-project.org>
> Emne: Re: [R-pkg-devel] RData files with identical objects in package
> 
> I think it is illegal if you use the lazyload database, because that 
> is indexed by name and contains every object that would be created by
data().
> This creates an obvious issue if two objects share a name. 
> 
> Once you use the lazyload database, loading the package creates an 
> environment which is initially full of promises, one for each object.
> Evaluating one of these makes the actual object appear in the environment.

> 
> Using data() causes the corresponding promise(s) to be created in the 
> global environment. IIRC, there is a registry that says which objects 
> are created by which arguments to data(), but as they are still taken 
> from the lazydata database, the last one created with a given name still
wins.
> 
> -ps
> 
>> On 13 Jan 2019, at 14:13 , Troels Ring <tring at gvdnet.dk> wrote:
>> 
>> Thanks a lot - I'm sure you are right that I could just use different 
>> names but I cannot understand why it could cause problem to have two 
>> different well formated .RData files in the /data directory both with 
>> an "x" - is that really illegal? I cannot see it stated in the 
>> official munual - but it is long (wrting r extensions) -BW Troels
>> 
>> -----Oprindelig meddelelse-----
>> Fra: Michael Dewey <lists at dewey.myzen.co.uk>
>> Sendt: 13. januar 2019 12:56
>> Til: Troels Ring <tring at gvdnet.dk>; package-develop 
>> <r-package-devel at r-project.org>
>> Emne: Re: [R-pkg-devel] RData files with identical objects in package
>> 
>> Dear Troels
>> 
>> Perhaps I misunderstand what you are trying to do but would it be 
>> possible to put each x and y into a list or a dataframe with 
>> different names and then modify your usgae to pull them from there? 
>> Then there would be no danger of users getting the wrong x and y
>> 
>> Michael
>> 
>> On 13/01/2019 08:38, Troels Ring wrote:
>>> Dear friends - I have a package under creation making heavy 
>>> calculations on chemical/clinical data and I plan to include as 
>>> "examples" the use of some literature data used in my papers. To 
>>> illustrate what then occurs, I made two RData files consisting only 
>>> of x and y with different values for x and y like
>>> 
>>> X <- 100
>>> 
>>> Y <- 1000
>>> 
>>> save(x,y,file="first.RData")
>>> 
>>> and then a new x and y in "second" with x <- 45 and y <- 32
>>> 
>>> When I put these in a "data" directory of a new package without 
>>> further ado in RStudio
>>> 
>>> Ctrl-shift-L
>>> 
>>> Ctrl-shift-B
>>> 
>>> 
>>> 
>>> .there is a warning
>>> 
>>> * installing *source* package 'try' ...
>>> 
>>> ** R
>>> 
>>> ** data
>>> 
>>> *** moving datasets to lazyload DB
>>> 
>>> warning: objects 'x', 'y' are created by more than one data call
>>> 
>>> ** byte-compile and prepare package for lazy loading
>>> 
>>> ** help
>>> 
>>>  converting help for package 'try'
>>> 
>>> *** installing help indices
>>> 
>>>    finding HTML links ...    hello
> html
>>> 
>>> done
>>> 
>>> 
>>> 
>>> Now, when I clear the workspace:
>>> 
>>>> ls()
>>> character(0)
>>>> devtools::load_all(".")
>>> Loading try
>>> 
>>> Restarting R session...
>>> 
>>>> library(try)
>>>> ls()
>>> character(0)
>>>> x   #-- so even if workspace Is empty x is still kept
>>> [1] 45
>>>> data(first) # and "first" is not seen x
>>> [1] 45
>>> 
>>> 
>>> 
>>> x is still present - and y
>>> 
>>> 
>>> 
>>> I have been reading and searching in "Writing R extensions" but so 
>>> far didn't find the clue.
>>> 
>>> Seemingly it is the file with the last name that is assessed - when 
>>> I rename first.RData to "xfile.RData" we get 100 and 1000.
>>> 
>>> Now and then when running ctrl-shift-L and - B we see
>>> 
>>> 
>>> 
>>> Attaches package: 'try'
>>> 
>>> The following objects are masked _by_ '.GlobalEnv':
>>> x, y
>>> 
>>> 
>>> 
>>> Sorry for these problems -
>>> 
>>> BW
>>> Troels
>>> 
>>> 
>>> 	[[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list 
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> 
>> 
>> --
>> Michael
>> http://www.dewey.myzen.co.uk/home.html
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list 
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School Solbjerg Plads 3, 
> 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 

--
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School Solbjerg Plads 3, 2000
Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From w@ngz1 @ending from uth@c@@@edu  Mon Jan 14 17:52:56 2019
From: w@ngz1 @ending from uth@c@@@edu (Wang, Zhu)
Date: Mon, 14 Jan 2019 16:52:56 +0000
Subject: [R-pkg-devel] R CMD check --as-cran problem
In-Reply-To: <23610.30150.48872.226440@rob.eddelbuettel.com>
References: <1547247107724.95300@uthscsa.edu>
 <23610.30150.48872.226440@rob.eddelbuettel.com>
Message-ID: <20f0a5dd128e482e8f4c8300d947b8fe@EX-MCD-1.win.uthscsa.edu>

Thanks Dirk and Klaus. The package Matrix is not used directly but it is used by package survival, which was called in Suggests.  So I am not sure what is the problem. But why CRAN has no such error https://cran.r-project.org/web/checks/check_results_bujar.html. I assumed the CRAN check uses the same R version 3.5.2 as I have. The problem only occurred when I used --as-cran option.

Zhu

-----Original Message-----
From: Dirk Eddelbuettel [mailto:dirk.eddelbuettel at gmail.com] On Behalf Of Dirk Eddelbuettel
Sent: Saturday, January 12, 2019 5:19 PM
To: Wang, Zhu
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] R CMD check --as-cran problem


On 11 January 2019 at 22:51, Wang, Zhu wrote:
| ** testing if installed package can be loaded
| Error: package or namespace load failed for 'bujar' in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]):
|  there is no package called 'Matrix'
| Error: loading failed
| Execution halted
| ERROR: loading failed
| 
| 
| I will appreciate advice on the matter.

Something tries to use package Matrix but it is not installed. You may need
it in Imports: (and then in NAMESPACE) or in Suggests: (and then test via if
(requireNamepace(...) and load).

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From li@t@ @ending from revelle@net  Mon Jan 14 17:55:59 2019
From: li@t@ @ending from revelle@net (William Revelle)
Date: Mon, 14 Jan 2019 10:55:59 -0600
Subject: [R-pkg-devel] size of package and splitting into 2
Message-ID: <2D82782E-3BB0-4332-AAEB-18F7EEEA5D68@revelle.net>

Dear friends,

For the last several iterations of psych I have received the Note that the installed size is 6.7 MB with two subdirectories greater than 1 MB.

In the most recent submission to CRAN this led to an automatic rejection which then Uwe kindly overrode to allow the installation on CRAN.

In order to make life easier for the CRAN folk, I would like to try to avoid this problem in the future.

The only  way I can see to get around this note is to split the package into 2:  psych and psychTools where psych would require psychTools but psychTools would not require psych.   The presumption is that with appropriate splitting, both packages would meet the 1 MB suggestion.

However, this implies that loading psych still takes up just as much space as before (since it would also load psychTools) and so it is not clear if this is a benefit. It might even be detrimental to the naive user who doesn?t load them both.  It would be useful, perhaps, for those who use psych for the extra features rather than core psychometric ones.  They would just need to load psychTools.

I am not sure how well the splitting would work in terms of solving the problem and before embarking on this exercise,  I would appreciate suggestions as to whether it is necessary (or at least useful).

Thanks,

Bill


William Revelle		   personality-project.org/revelle.html
Professor			          personality-project.org
Department of Psychology www.wcas.northwestern.edu/psych/
Northwestern University	   www.northwestern.edu/
Use R for psychology         personality-project.org/r
It is 2   minutes to midnight   www.thebulletin.org


From tring @ending from gvdnet@dk  Mon Jan 14 18:30:08 2019
From: tring @ending from gvdnet@dk (Troels Ring)
Date: Mon, 14 Jan 2019 18:30:08 +0100
Subject: [R-pkg-devel] undocumented data sets
In-Reply-To: j3YwgY1ImwUhzj3Yyg7Ado
References: <7ec501d4ac17$b3689d70$1a39d850$@gvdnet.dk> j3YwgY1ImwUhzj3Yyg7Ado
Message-ID: <ab8501d4ac2e$cbe320c0$63a96240$@gvdnet.dk>

Thanks a lot
T

-----Oprindelig meddelelse-----
Fra: I?aki Ucar <iucar at fedoraproject.org> 
Sendt: 14. januar 2019 15:50
Til: Troels Ring <tring at gvdnet.dk>
Cc: package-develop <r-package-devel at r-project.org>
Emne: Re: [R-pkg-devel] undocumented data sets

See an example with roxygen2:

https://github.com/r-quantities/errors/blob/master/R/data.R

And how this is translated if you prefer to write the Rd yourself:

https://github.com/r-quantities/errors/blob/master/man/datasets.Rd

I?aki

On Mon, 14 Jan 2019 at 15:45, Troels Ring <tring at gvdnet.dk> wrote:
>
> Dear friends - with your help I'm almost through developing a package 
> and Ctrl-shit-E now only has a single warning
>
> > checking for missing documentation entries ... WARNING
>
>   Undocumented data sets:
>
>     'Cl' 'K' 'Na' 'TOTAL' 'WA' 'INPUT' 'Alb' 'Ca' 'Lact' 'Mg' 'PCO2' 'S1'
>
>     'Brom' 'pHOBS'
>
>   All user-level objects in a package should have documentation entries.
>
>   See chapter 'Writing R documentation files' in the 'Writing R
>
>   Extensions' manual.
>
>
>
> But in 2.1.2.Documenting data sets in Writing R extensions it is said 
> that \arguments is not needed and in the template on p 72 in the 
> manual I see no entry directly making for this documentation. 
> Everything runs just well - but I must have it clean now!
>
> I also tried the RStudio option of generating a Rd file on data, and 
> there was an entry I filled out like this
>
>
>
> \describe{
>
>     \item{\code{Brom}}{Dataframe of Table S4 in Glaser et al}
>
>
>
> But t didn't cure the warning (Brom entry) above?
>
>
>
> All best wishes
>
> Troels
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



--
I?aki ?car


From edd @ending from debi@n@org  Mon Jan 14 18:37:54 2019
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Mon, 14 Jan 2019 11:37:54 -0600
Subject: [R-pkg-devel] R CMD check --as-cran problem
In-Reply-To: <20f0a5dd128e482e8f4c8300d947b8fe@EX-MCD-1.win.uthscsa.edu>
References: <1547247107724.95300@uthscsa.edu>
 <23610.30150.48872.226440@rob.eddelbuettel.com>
 <20f0a5dd128e482e8f4c8300d947b8fe@EX-MCD-1.win.uthscsa.edu>
Message-ID: <23612.51442.909488.622146@rob.eddelbuettel.com>


On 14 January 2019 at 16:52, Wang, Zhu wrote:
| Thanks Dirk and Klaus. The package Matrix is not used directly but it is used by package survival, which was called in Suggests.  So I am not sure what is the problem. But why CRAN has no such error https://cran.r-project.org/web/checks/check_results_bujar.html. I assumed the CRAN check uses the same R version 3.5.2 as I have. The problem only occurred when I used --as-cran option.

Doesn't this mean that you may to ensure Matrix is present when survival
might be used -- so if your package suggests survival it should also suggest
Matrix?

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From w@ngz1 @ending from uth@c@@@edu  Mon Jan 14 18:47:21 2019
From: w@ngz1 @ending from uth@c@@@edu (Wang, Zhu)
Date: Mon, 14 Jan 2019 17:47:21 +0000
Subject: [R-pkg-devel] R CMD check --as-cran problem
In-Reply-To: <23612.51442.909488.622146@rob.eddelbuettel.com>
References: <1547247107724.95300@uthscsa.edu>
 <23610.30150.48872.226440@rob.eddelbuettel.com>
 <20f0a5dd128e482e8f4c8300d947b8fe@EX-MCD-1.win.uthscsa.edu>
 <23612.51442.909488.622146@rob.eddelbuettel.com>
Message-ID: <c9c9ddb0eac34b9ea88e85b511a9edaf@EX-MCD-1.win.uthscsa.edu>

I added Matrix in Suggests (I am not sure that is the way to go), but the same error occurred with --as-cran: there is no package called 'Matrix.' Again, there is no problem without --as-cran.

Zhu

-----Original Message-----
From: Dirk Eddelbuettel [mailto:dirk.eddelbuettel at gmail.com] On Behalf Of Dirk Eddelbuettel
Sent: Monday, January 14, 2019 11:38 AM
To: Wang, Zhu
Cc: Dirk Eddelbuettel; Klaus Schliep; r-package-devel at r-project.org
Subject: RE: [R-pkg-devel] R CMD check --as-cran problem


On 14 January 2019 at 16:52, Wang, Zhu wrote:
| Thanks Dirk and Klaus. The package Matrix is not used directly but it is used by package survival, which was called in Suggests.  So I am not sure what is the problem. But why CRAN has no such error https://cran.r-project.org/web/checks/check_results_bujar.html. I assumed the CRAN check uses the same R version 3.5.2 as I have. The problem only occurred when I used --as-cran option.

Doesn't this mean that you may to ensure Matrix is present when survival
might be used -- so if your package suggests survival it should also suggest
Matrix?

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From nfultz @ending from gm@il@com  Mon Jan 14 18:47:11 2019
From: nfultz @ending from gm@il@com (Neal Fultz)
Date: Mon, 14 Jan 2019 09:47:11 -0800
Subject: [R-pkg-devel] size of package and splitting into 2
In-Reply-To: <2D82782E-3BB0-4332-AAEB-18F7EEEA5D68@revelle.net>
References: <2D82782E-3BB0-4332-AAEB-18F7EEEA5D68@revelle.net>
Message-ID: <CAL9B2vdZa8s7=FVVpMaxzFQnRO7gGE7zHh8huQOP1XKC6JXVog@mail.gmail.com>

If you re-exported all the psychTools functions from psych, I doubt a
typical user would notice or care. For example, this is how dplyr split out
some of it's functions in to another package:
https://github.com/tidyverse/dplyr/blob/master/R/reexport-tidyselect.R

On Mon, Jan 14, 2019 at 9:03 AM William Revelle <lists at revelle.net> wrote:

> Dear friends,
>
> For the last several iterations of psych I have received the Note that the
> installed size is 6.7 MB with two subdirectories greater than 1 MB.
>
> In the most recent submission to CRAN this led to an automatic rejection
> which then Uwe kindly overrode to allow the installation on CRAN.
>
> In order to make life easier for the CRAN folk, I would like to try to
> avoid this problem in the future.
>
> The only  way I can see to get around this note is to split the package
> into 2:  psych and psychTools where psych would require psychTools but
> psychTools would not require psych.   The presumption is that with
> appropriate splitting, both packages would meet the 1 MB suggestion.
>
> However, this implies that loading psych still takes up just as much space
> as before (since it would also load psychTools) and so it is not clear if
> this is a benefit. It might even be detrimental to the naive user who
> doesn?t load them both.  It would be useful, perhaps, for those who use
> psych for the extra features rather than core psychometric ones.  They
> would just need to load psychTools.
>
> I am not sure how well the splitting would work in terms of solving the
> problem and before embarking on this exercise,  I would appreciate
> suggestions as to whether it is necessary (or at least useful).
>
> Thanks,
>
> Bill
>
>
> William Revelle            personality-project.org/revelle.html
> Professor                                 personality-project.org
> Department of Psychology www.wcas.northwestern.edu/psych/
> Northwestern University    www.northwestern.edu/
> Use R for psychology         personality-project.org/r
> It is 2   minutes to midnight   www.thebulletin.org
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @ending from gm@il@com  Mon Jan 14 19:19:23 2019
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Mon, 14 Jan 2019 13:19:23 -0500
Subject: [R-pkg-devel] R CMD check --as-cran problem
In-Reply-To: <23612.51442.909488.622146@rob.eddelbuettel.com>
References: <1547247107724.95300@uthscsa.edu>
 <23610.30150.48872.226440@rob.eddelbuettel.com>
 <20f0a5dd128e482e8f4c8300d947b8fe@EX-MCD-1.win.uthscsa.edu>
 <23612.51442.909488.622146@rob.eddelbuettel.com>
Message-ID: <379acbdb-2ac5-338e-0613-cc382bc51d8f@gmail.com>

On 14/01/2019 12:37 p.m., Dirk Eddelbuettel wrote:
> 
> On 14 January 2019 at 16:52, Wang, Zhu wrote:
> | Thanks Dirk and Klaus. The package Matrix is not used directly but it is used by package survival, which was called in Suggests.  So I am not sure what is the problem. But why CRAN has no such error https://cran.r-project.org/web/checks/check_results_bujar.html. I assumed the CRAN check uses the same R version 3.5.2 as I have. The problem only occurred when I used --as-cran option.
> 
> Doesn't this mean that you may to ensure Matrix is present when survival
> might be used -- so if your package suggests survival it should also suggest
> Matrix?

That shouldn't be necessary.  Since survival imports Matrix, you 
shouldn't be able to load survival unless Matrix is available. 
requireNamespace("survival") should fail.

I think the problem in bujar is that it never checks 
requireNamespace("survival"), it just calls 
getFromNamespace('survfitKM','survival').  That will usually work (just 
about everyone has survival installed, since it's recommended), but is 
unsafe.  Zhu should use survival::survfitKM, but only after checking 
that requireNamespace("survival") is successful.

Duncan Murdoch


From pgilbert902 @ending from gm@il@com  Mon Jan 14 19:29:42 2019
From: pgilbert902 @ending from gm@il@com (Paul Gilbert)
Date: Mon, 14 Jan 2019 13:29:42 -0500
Subject: [R-pkg-devel] 
 package fails with parallel make - would forcing a
 serial version work?
In-Reply-To: <CAM3CqvKL4U6aK2T2udCstQ7AEhVw0LBF9AEAb-x45fv70_h58Q@mail.gmail.com>
References: <CAM3CqvLsxRmTk=+St1m-4yXN-kuayW9eUVWRbJQzfQza2XbOGA@mail.gmail.com>
 <CAM3CqvKL4U6aK2T2udCstQ7AEhVw0LBF9AEAb-x45fv70_h58Q@mail.gmail.com>
Message-ID: <d9997479-7cdf-2925-a04d-f2b382633694@gmail.com>

(I didn't see an answer to this, so ...)

I think using .NOTPARALLEL will usually get rid of the error but, in my 
experience, this problem is usually caused by an incorrect or incomplete 
Makefile. When not done in parallel this missing target is usually 
getting done first as a side-affect of something that happens before and 
usually finishes before it is needed. Your luck does not hold in 
parallel. The better fix is to correct your Makefile.

Paul

On 1/10/19 4:54 PM, Satyaprakash Nayak wrote:
> Dear R package developers
> 
> I published a package on CRAN last year (sundialr) which is now failing
> with as it is not make to compile a static library with parallel make.
> 
> In this package, I compile a static library (libsundials_all.a) from source
> files of a third party. The specifics of compiling the static library can
> be found at - https://github.com/sn248/sundialr/blob/master/src/Makevars
> 
> Now, I got the following error message from CRAN (actually, I was informed
> of this before, but had neglected to fix it). Here is the message from one
> of the CRAN maintainers ..
> 
> ***************************************************************************************************************************************
> This have just failed to install for me with a parallel make:
> 
> g++ -std=gnu++98 -std=gnu++98 -shared
> -L/data/blackswan/ripley/extras/lib64 -L/usrlocal/lib64 -o sundialr.so
> cvode.o RcppExports.o -L/data/blackswan/ripley/R/R-patched/lib -lRlapack
> -L/data/blackswan/ripley/R/R-patched/lib -lRblas -lgfortran -lm
> -lquadmath -L../inst/ ../inst/libsundials_all.a
> g++: error: ../inst/libsundials_all.a: No such file or directory
> make[1]: *** [/data/blackswan/ripley/R/R-patched/share/make/shlib.mk:6:
> sundialr.so] Error 1
> *****************************************************************************************************************************************
> 
> It seems the package fails to generate the static library with the parallel
> make. The easiest solution I could think of for this problem was to force a
> serial version of make using the .NOTPARALLEL phony command in Makevars and
> Makevars.win(https://github.com/sn248/sundialr/blob/master/src/Makevars). I
> have made this change and it seems to work on my machine and on testing
> with TravisCI and Appveyor(https://github.com/sn248/sundialr).
> 
> However, before I re-submit to CRAN, I wanted to get an opinion as to will
> this be enough to get rid of the error with parallel make?
> 
> Any suggestions would be very much appreciated, thank you!
> Satyaprakash
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From edd @ending from debi@n@org  Mon Jan 14 19:44:36 2019
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Mon, 14 Jan 2019 12:44:36 -0600
Subject: [R-pkg-devel] R CMD check --as-cran problem
In-Reply-To: <379acbdb-2ac5-338e-0613-cc382bc51d8f@gmail.com>
References: <1547247107724.95300@uthscsa.edu>
 <23610.30150.48872.226440@rob.eddelbuettel.com>
 <20f0a5dd128e482e8f4c8300d947b8fe@EX-MCD-1.win.uthscsa.edu>
 <23612.51442.909488.622146@rob.eddelbuettel.com>
 <379acbdb-2ac5-338e-0613-cc382bc51d8f@gmail.com>
Message-ID: <23612.55444.355093.627427@rob.eddelbuettel.com>


On 14 January 2019 at 13:19, Duncan Murdoch wrote:
| On 14/01/2019 12:37 p.m., Dirk Eddelbuettel wrote:
| > 
| > On 14 January 2019 at 16:52, Wang, Zhu wrote:
| > | Thanks Dirk and Klaus. The package Matrix is not used directly but it is used by package survival, which was called in Suggests.  So I am not sure what is the problem. But why CRAN has no such error https://cran.r-project.org/web/checks/check_results_bujar.html. I assumed the CRAN check uses the same R version 3.5.2 as I have. The problem only occurred when I used --as-cran option.
| > 
| > Doesn't this mean that you may to ensure Matrix is present when survival
| > might be used -- so if your package suggests survival it should also suggest
| > Matrix?
| 
| That shouldn't be necessary.  Since survival imports Matrix, you 
| shouldn't be able to load survival unless Matrix is available. 
| requireNamespace("survival") should fail.
| 
| I think the problem in bujar is that it never checks 
| requireNamespace("survival"), it just calls 
| getFromNamespace('survfitKM','survival').  That will usually work (just 
| about everyone has survival installed, since it's recommended), but is 
| unsafe.  Zhu should use survival::survfitKM, but only after checking 
| that requireNamespace("survival") is successful.

Yes, I agree. I mostly tried to be helpful but my email wasn't all that
effective in that.

Zhu: the behaviour when --as-cran is not set is irrelevant as CRAN asks you
to test with --as-cran set, so there really is only one relevant choice.

And Duncan now kindly detailed the appropriate use case: test for a suggested
package. Or if your use is not conditional, import from it.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @vr@h@m@@dler @ending from gm@il@com  Mon Jan 14 20:00:47 2019
From: @vr@h@m@@dler @ending from gm@il@com (Avraham Adler)
Date: Mon, 14 Jan 2019 14:00:47 -0500
Subject: [R-pkg-devel] 
 package fails with parallel make - would forcing a
 serial version work?
In-Reply-To: <d9997479-7cdf-2925-a04d-f2b382633694@gmail.com>
References: <CAM3CqvLsxRmTk=+St1m-4yXN-kuayW9eUVWRbJQzfQza2XbOGA@mail.gmail.com>
 <CAM3CqvKL4U6aK2T2udCstQ7AEhVw0LBF9AEAb-x45fv70_h58Q@mail.gmail.com>
 <d9997479-7cdf-2925-a04d-f2b382633694@gmail.com>
Message-ID: <CAL6gwn+PL9sOx2i4rwJ=gFWj7zQd21VN0Y=9-Ecu5yShgAVb9A@mail.gmail.com>

If you want to use .NOTPARRALLEL, that?s considered non-portable as it?s
GNU-make specific, (I got an email from Dr. Ripley this week) so you have
to add Gnu Make to the system requirements in the DESCRIPTION or find the
right sequence of targets to ensure order is maintained even in parallel
make.

Avi

On Mon, Jan 14, 2019 at 1:29 PM Paul Gilbert <pgilbert902 at gmail.com> wrote:

> (I didn't see an answer to this, so ...)
>
> I think using .NOTPARALLEL will usually get rid of the error but, in my
> experience, this problem is usually caused by an incorrect or incomplete
> Makefile. When not done in parallel this missing target is usually
> getting done first as a side-affect of something that happens before and
> usually finishes before it is needed. Your luck does not hold in
> parallel. The better fix is to correct your Makefile.
>
> Paul
>
> On 1/10/19 4:54 PM, Satyaprakash Nayak wrote:
> > Dear R package developers
> >
> > I published a package on CRAN last year (sundialr) which is now failing
> > with as it is not make to compile a static library with parallel make.
> >
> > In this package, I compile a static library (libsundials_all.a) from
> source
> > files of a third party. The specifics of compiling the static library can
> > be found at - https://github.com/sn248/sundialr/blob/master/src/Makevars
> >
> > Now, I got the following error message from CRAN (actually, I was
> informed
> > of this before, but had neglected to fix it). Here is the message from
> one
> > of the CRAN maintainers ..
> >
> >
> ***************************************************************************************************************************************
> > This have just failed to install for me with a parallel make:
> >
> > g++ -std=gnu++98 -std=gnu++98 -shared
> > -L/data/blackswan/ripley/extras/lib64 -L/usrlocal/lib64 -o sundialr.so
> > cvode.o RcppExports.o -L/data/blackswan/ripley/R/R-patched/lib -lRlapack
> > -L/data/blackswan/ripley/R/R-patched/lib -lRblas -lgfortran -lm
> > -lquadmath -L../inst/ ../inst/libsundials_all.a
> > g++: error: ../inst/libsundials_all.a: No such file or directory
> > make[1]: *** [/data/blackswan/ripley/R/R-patched/share/make/shlib.mk:6:
> > sundialr.so] Error 1
> >
> *****************************************************************************************************************************************
> >
> > It seems the package fails to generate the static library with the
> parallel
> > make. The easiest solution I could think of for this problem was to
> force a
> > serial version of make using the .NOTPARALLEL phony command in Makevars
> and
> > Makevars.win(https://github.com/sn248/sundialr/blob/master/src/Makevars).
> I
> > have made this change and it seems to work on my machine and on testing
> > with TravisCI and Appveyor(https://github.com/sn248/sundialr).
> >
> > However, before I re-submit to CRAN, I wanted to get an opinion as to
> will
> > this be enough to get rid of the error with parallel make?
> >
> > Any suggestions would be very much appreciated, thank you!
> > Satyaprakash
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
-- 
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From w@ngz1 @ending from uth@c@@@edu  Mon Jan 14 20:30:15 2019
From: w@ngz1 @ending from uth@c@@@edu (Wang, Zhu)
Date: Mon, 14 Jan 2019 19:30:15 +0000
Subject: [R-pkg-devel] R CMD check --as-cran problem
In-Reply-To: <23612.55444.355093.627427@rob.eddelbuettel.com>
References: <1547247107724.95300@uthscsa.edu>
 <23610.30150.48872.226440@rob.eddelbuettel.com>
 <20f0a5dd128e482e8f4c8300d947b8fe@EX-MCD-1.win.uthscsa.edu>
 <23612.51442.909488.622146@rob.eddelbuettel.com>
 <379acbdb-2ac5-338e-0613-cc382bc51d8f@gmail.com>
 <23612.55444.355093.627427@rob.eddelbuettel.com>
Message-ID: <8e53891939ce4ceeba27fc46129ff6b5@EX-MCD-1.win.uthscsa.edu>

First, I removed the Rnw file in vignettes to make simple. 

Then I followed Duncan's suggestions below, but I had the same error.

Next, in the DESCRIPTION, I added survival in Imports, and  importFrom("survival", "survfitKM") in NAMESPACE. But I still had the same error: there is no package called 'Matrix'. 

Thanks,

Zhu

-----Original Message-----
From: Dirk Eddelbuettel [mailto:dirk.eddelbuettel at gmail.com] On Behalf Of Dirk Eddelbuettel
Sent: Monday, January 14, 2019 12:45 PM
To: Duncan Murdoch
Cc: Dirk Eddelbuettel; Wang, Zhu; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] R CMD check --as-cran problem


On 14 January 2019 at 13:19, Duncan Murdoch wrote:
| On 14/01/2019 12:37 p.m., Dirk Eddelbuettel wrote:
| > 
| > On 14 January 2019 at 16:52, Wang, Zhu wrote:
| > | Thanks Dirk and Klaus. The package Matrix is not used directly but it is used by package survival, which was called in Suggests.  So I am not sure what is the problem. But why CRAN has no such error https://cran.r-project.org/web/checks/check_results_bujar.html. I assumed the CRAN check uses the same R version 3.5.2 as I have. The problem only occurred when I used --as-cran option.
| > 
| > Doesn't this mean that you may to ensure Matrix is present when survival
| > might be used -- so if your package suggests survival it should also suggest
| > Matrix?
| 
| That shouldn't be necessary.  Since survival imports Matrix, you 
| shouldn't be able to load survival unless Matrix is available. 
| requireNamespace("survival") should fail.
| 
| I think the problem in bujar is that it never checks 
| requireNamespace("survival"), it just calls 
| getFromNamespace('survfitKM','survival').  That will usually work (just 
| about everyone has survival installed, since it's recommended), but is 
| unsafe.  Zhu should use survival::survfitKM, but only after checking 
| that requireNamespace("survival") is successful.

Yes, I agree. I mostly tried to be helpful but my email wasn't all that
effective in that.

Zhu: the behaviour when --as-cran is not set is irrelevant as CRAN asks you
to test with --as-cran set, so there really is only one relevant choice.

And Duncan now kindly detailed the appropriate use case: test for a suggested
package. Or if your use is not conditional, import from it.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @n248 @ending from cornell@edu  Mon Jan 14 20:36:42 2019
From: @n248 @ending from cornell@edu (Satyaprakash Nayak)
Date: Mon, 14 Jan 2019 14:36:42 -0500
Subject: [R-pkg-devel] 
 package fails with parallel make - would forcing a
 serial version work?
In-Reply-To: <CAL6gwn+PL9sOx2i4rwJ=gFWj7zQd21VN0Y=9-Ecu5yShgAVb9A@mail.gmail.com>
References: <CAM3CqvLsxRmTk=+St1m-4yXN-kuayW9eUVWRbJQzfQza2XbOGA@mail.gmail.com>
 <CAM3CqvKL4U6aK2T2udCstQ7AEhVw0LBF9AEAb-x45fv70_h58Q@mail.gmail.com>
 <d9997479-7cdf-2925-a04d-f2b382633694@gmail.com>
 <CAL6gwn+PL9sOx2i4rwJ=gFWj7zQd21VN0Y=9-Ecu5yShgAVb9A@mail.gmail.com>
Message-ID: <CAM3Cqv+nAb0ScUTaU8deaG1=bpwUm-r5jeHtTgJAmMPpNMOUBg@mail.gmail.com>

Thank you Paul and Avi for your response. Indeed, there was an error in
Makefile which could have been contributing to the issues with parallel
make. I have re-submitted after correcting for the mistakes in Makefile,
hopefully it will not throw errors with parallel make now.

Thank you for your advice.
Satyaprakash


On Mon, Jan 14, 2019 at 2:01 PM Avraham Adler <avraham.adler at gmail.com>
wrote:

> If you want to use .NOTPARRALLEL, that?s considered non-portable as it?s
> GNU-make specific, (I got an email from Dr. Ripley this week) so you have
> to add Gnu Make to the system requirements in the DESCRIPTION or find the
> right sequence of targets to ensure order is maintained even in parallel
> make.
>
> Avi
>
> On Mon, Jan 14, 2019 at 1:29 PM Paul Gilbert <pgilbert902 at gmail.com>
> wrote:
>
>> (I didn't see an answer to this, so ...)
>>
>> I think using .NOTPARALLEL will usually get rid of the error but, in my
>> experience, this problem is usually caused by an incorrect or incomplete
>> Makefile. When not done in parallel this missing target is usually
>> getting done first as a side-affect of something that happens before and
>> usually finishes before it is needed. Your luck does not hold in
>> parallel. The better fix is to correct your Makefile.
>>
>> Paul
>>
>> On 1/10/19 4:54 PM, Satyaprakash Nayak wrote:
>> > Dear R package developers
>> >
>> > I published a package on CRAN last year (sundialr) which is now failing
>> > with as it is not make to compile a static library with parallel make.
>> >
>> > In this package, I compile a static library (libsundials_all.a) from
>> source
>> > files of a third party. The specifics of compiling the static library
>> can
>> > be found at -
>> https://github.com/sn248/sundialr/blob/master/src/Makevars
>> >
>> > Now, I got the following error message from CRAN (actually, I was
>> informed
>> > of this before, but had neglected to fix it). Here is the message from
>> one
>> > of the CRAN maintainers ..
>> >
>> >
>> ***************************************************************************************************************************************
>> > This have just failed to install for me with a parallel make:
>> >
>> > g++ -std=gnu++98 -std=gnu++98 -shared
>> > -L/data/blackswan/ripley/extras/lib64 -L/usrlocal/lib64 -o sundialr.so
>> > cvode.o RcppExports.o -L/data/blackswan/ripley/R/R-patched/lib -lRlapack
>> > -L/data/blackswan/ripley/R/R-patched/lib -lRblas -lgfortran -lm
>> > -lquadmath -L../inst/ ../inst/libsundials_all.a
>> > g++: error: ../inst/libsundials_all.a: No such file or directory
>> > make[1]: *** [/data/blackswan/ripley/R/R-patched/share/make/shlib.mk:6:
>> > sundialr.so] Error 1
>> >
>> *****************************************************************************************************************************************
>> >
>> > It seems the package fails to generate the static library with the
>> parallel
>> > make. The easiest solution I could think of for this problem was to
>> force a
>> > serial version of make using the .NOTPARALLEL phony command in Makevars
>> and
>> > Makevars.win(https://github.com/sn248/sundialr/blob/master/src/Makevars).
>> I
>> > have made this change and it seems to work on my machine and on testing
>> > with TravisCI and Appveyor(https://github.com/sn248/sundialr).
>> >
>> > However, before I re-submit to CRAN, I wanted to get an opinion as to
>> will
>> > this be enough to get rid of the error with parallel make?
>> >
>> > Any suggestions would be very much appreciated, thank you!
>> > Satyaprakash
>> >
>> >       [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> --
> Sent from Gmail Mobile
>

	[[alternative HTML version deleted]]


From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Mon Jan 14 20:52:07 2019
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Mon, 14 Jan 2019 20:52:07 +0100
Subject: [R-pkg-devel] R CMD check --as-cran problem
In-Reply-To: <8e53891939ce4ceeba27fc46129ff6b5@EX-MCD-1.win.uthscsa.edu>
References: <1547247107724.95300@uthscsa.edu>
 <23610.30150.48872.226440@rob.eddelbuettel.com>
 <20f0a5dd128e482e8f4c8300d947b8fe@EX-MCD-1.win.uthscsa.edu>
 <23612.51442.909488.622146@rob.eddelbuettel.com>
 <379acbdb-2ac5-338e-0613-cc382bc51d8f@gmail.com>
 <23612.55444.355093.627427@rob.eddelbuettel.com>
 <8e53891939ce4ceeba27fc46129ff6b5@EX-MCD-1.win.uthscsa.edu>
Message-ID: <581f4366-0536-fccf-5323-009f45778b3e@statistik.tu-dortmund.de>

What happens if you submit to winbuilder?

If that gives the same error, make the source version of your package 
available that you are checking.


Best,
Uwe Ligges


On 14.01.2019 20:30, Wang, Zhu wrote:
> First, I removed the Rnw file in vignettes to make simple.
> 
> Then I followed Duncan's suggestions below, but I had the same error.
> 
> Next, in the DESCRIPTION, I added survival in Imports, and  importFrom("survival", "survfitKM") in NAMESPACE. But I still had the same error: there is no package called 'Matrix'.
> 
> Thanks,
> 
> Zhu
> 
> -----Original Message-----
> From: Dirk Eddelbuettel [mailto:dirk.eddelbuettel at gmail.com] On Behalf Of Dirk Eddelbuettel
> Sent: Monday, January 14, 2019 12:45 PM
> To: Duncan Murdoch
> Cc: Dirk Eddelbuettel; Wang, Zhu; r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] R CMD check --as-cran problem
> 
> 
> On 14 January 2019 at 13:19, Duncan Murdoch wrote:
> | On 14/01/2019 12:37 p.m., Dirk Eddelbuettel wrote:
> | >
> | > On 14 January 2019 at 16:52, Wang, Zhu wrote:
> | > | Thanks Dirk and Klaus. The package Matrix is not used directly but it is used by package survival, which was called in Suggests.  So I am not sure what is the problem. But why CRAN has no such error https://cran.r-project.org/web/checks/check_results_bujar.html. I assumed the CRAN check uses the same R version 3.5.2 as I have. The problem only occurred when I used --as-cran option.
> | >
> | > Doesn't this mean that you may to ensure Matrix is present when survival
> | > might be used -- so if your package suggests survival it should also suggest
> | > Matrix?
> |
> | That shouldn't be necessary.  Since survival imports Matrix, you
> | shouldn't be able to load survival unless Matrix is available.
> | requireNamespace("survival") should fail.
> |
> | I think the problem in bujar is that it never checks
> | requireNamespace("survival"), it just calls
> | getFromNamespace('survfitKM','survival').  That will usually work (just
> | about everyone has survival installed, since it's recommended), but is
> | unsafe.  Zhu should use survival::survfitKM, but only after checking
> | that requireNamespace("survival") is successful.
> 
> Yes, I agree. I mostly tried to be helpful but my email wasn't all that
> effective in that.
> 
> Zhu: the behaviour when --as-cran is not set is irrelevant as CRAN asks you
> to test with --as-cran set, so there really is only one relevant choice.
> 
> And Duncan now kindly detailed the appropriate use case: test for a suggested
> package. Or if your use is not conditional, import from it.
> 
> Dirk
>


From murdoch@dunc@n @ending from gm@il@com  Mon Jan 14 21:01:55 2019
From: murdoch@dunc@n @ending from gm@il@com (Duncan Murdoch)
Date: Mon, 14 Jan 2019 15:01:55 -0500
Subject: [R-pkg-devel] R CMD check --as-cran problem
In-Reply-To: <8e53891939ce4ceeba27fc46129ff6b5@EX-MCD-1.win.uthscsa.edu>
References: <1547247107724.95300@uthscsa.edu>
 <23610.30150.48872.226440@rob.eddelbuettel.com>
 <20f0a5dd128e482e8f4c8300d947b8fe@EX-MCD-1.win.uthscsa.edu>
 <23612.51442.909488.622146@rob.eddelbuettel.com>
 <379acbdb-2ac5-338e-0613-cc382bc51d8f@gmail.com>
 <23612.55444.355093.627427@rob.eddelbuettel.com>
 <8e53891939ce4ceeba27fc46129ff6b5@EX-MCD-1.win.uthscsa.edu>
Message-ID: <b12881c8-6002-31c7-390e-84c59cf489fb@gmail.com>

On 14/01/2019 2:30 p.m., Wang, Zhu wrote:
> First, I removed the Rnw file in vignettes to make simple.
> 
> Then I followed Duncan's suggestions below, but I had the same error.
> 
> Next, in the DESCRIPTION, I added survival in Imports, and  importFrom("survival", "survfitKM") in NAMESPACE. But I still had the same error: there is no package called 'Matrix'.

I think we'd need to see at least the check log, and likely the whole 
package, to diagnose this.

Duncan Murdoch

> 
> Thanks,
> 
> Zhu
> 
> -----Original Message-----
> From: Dirk Eddelbuettel [mailto:dirk.eddelbuettel at gmail.com] On Behalf Of Dirk Eddelbuettel
> Sent: Monday, January 14, 2019 12:45 PM
> To: Duncan Murdoch
> Cc: Dirk Eddelbuettel; Wang, Zhu; r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] R CMD check --as-cran problem
> 
> 
> On 14 January 2019 at 13:19, Duncan Murdoch wrote:
> | On 14/01/2019 12:37 p.m., Dirk Eddelbuettel wrote:
> | >
> | > On 14 January 2019 at 16:52, Wang, Zhu wrote:
> | > | Thanks Dirk and Klaus. The package Matrix is not used directly but it is used by package survival, which was called in Suggests.  So I am not sure what is the problem. But why CRAN has no such error https://cran.r-project.org/web/checks/check_results_bujar.html. I assumed the CRAN check uses the same R version 3.5.2 as I have. The problem only occurred when I used --as-cran option.
> | >
> | > Doesn't this mean that you may to ensure Matrix is present when survival
> | > might be used -- so if your package suggests survival it should also suggest
> | > Matrix?
> |
> | That shouldn't be necessary.  Since survival imports Matrix, you
> | shouldn't be able to load survival unless Matrix is available.
> | requireNamespace("survival") should fail.
> |
> | I think the problem in bujar is that it never checks
> | requireNamespace("survival"), it just calls
> | getFromNamespace('survfitKM','survival').  That will usually work (just
> | about everyone has survival installed, since it's recommended), but is
> | unsafe.  Zhu should use survival::survfitKM, but only after checking
> | that requireNamespace("survival") is successful.
> 
> Yes, I agree. I mostly tried to be helpful but my email wasn't all that
> effective in that.
> 
> Zhu: the behaviour when --as-cran is not set is irrelevant as CRAN asks you
> to test with --as-cran set, so there really is only one relevant choice.
> 
> And Duncan now kindly detailed the appropriate use case: test for a suggested
> package. Or if your use is not conditional, import from it.
> 
> Dirk
>


From w@ngz1 @ending from uth@c@@@edu  Mon Jan 14 22:05:55 2019
From: w@ngz1 @ending from uth@c@@@edu (Wang, Zhu)
Date: Mon, 14 Jan 2019 21:05:55 +0000
Subject: [R-pkg-devel] R CMD check --as-cran problem
In-Reply-To: <581f4366-0536-fccf-5323-009f45778b3e@statistik.tu-dortmund.de>
References: <1547247107724.95300@uthscsa.edu>
 <23610.30150.48872.226440@rob.eddelbuettel.com>
 <20f0a5dd128e482e8f4c8300d947b8fe@EX-MCD-1.win.uthscsa.edu>
 <23612.51442.909488.622146@rob.eddelbuettel.com>
 <379acbdb-2ac5-338e-0613-cc382bc51d8f@gmail.com>
 <23612.55444.355093.627427@rob.eddelbuettel.com>
 <8e53891939ce4ceeba27fc46129ff6b5@EX-MCD-1.win.uthscsa.edu>
 <581f4366-0536-fccf-5323-009f45778b3e@statistik.tu-dortmund.de>
Message-ID: <d9086a0727b44036b4523f1182643e5b@EX-MCD-1.win.uthscsa.edu>

Apologize for multiple emails but my another email with source version of the package was hold waiting for moderator approval.

No error when submitted to winbuilder. 
https://win-builder.r-project.org/37M4Uw7RvkCv

Thanks,

Zhu

-----Original Message-----
From: Uwe Ligges [mailto:ligges at statistik.tu-dortmund.de] 
Sent: Monday, January 14, 2019 1:52 PM
To: Wang, Zhu; Dirk Eddelbuettel; Duncan Murdoch
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] R CMD check --as-cran problem

What happens if you submit to winbuilder?

If that gives the same error, make the source version of your package 
available that you are checking.


Best,
Uwe Ligges


On 14.01.2019 20:30, Wang, Zhu wrote:
> First, I removed the Rnw file in vignettes to make simple.
> 
> Then I followed Duncan's suggestions below, but I had the same error.
> 
> Next, in the DESCRIPTION, I added survival in Imports, and  importFrom("survival", "survfitKM") in NAMESPACE. But I still had the same error: there is no package called 'Matrix'.
> 
> Thanks,
> 
> Zhu
> 
> -----Original Message-----
> From: Dirk Eddelbuettel [mailto:dirk.eddelbuettel at gmail.com] On Behalf Of Dirk Eddelbuettel
> Sent: Monday, January 14, 2019 12:45 PM
> To: Duncan Murdoch
> Cc: Dirk Eddelbuettel; Wang, Zhu; r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] R CMD check --as-cran problem
> 
> 
> On 14 January 2019 at 13:19, Duncan Murdoch wrote:
> | On 14/01/2019 12:37 p.m., Dirk Eddelbuettel wrote:
> | >
> | > On 14 January 2019 at 16:52, Wang, Zhu wrote:
> | > | Thanks Dirk and Klaus. The package Matrix is not used directly but it is used by package survival, which was called in Suggests.  So I am not sure what is the problem. But why CRAN has no such error https://cran.r-project.org/web/checks/check_results_bujar.html. I assumed the CRAN check uses the same R version 3.5.2 as I have. The problem only occurred when I used --as-cran option.
> | >
> | > Doesn't this mean that you may to ensure Matrix is present when survival
> | > might be used -- so if your package suggests survival it should also suggest
> | > Matrix?
> |
> | That shouldn't be necessary.  Since survival imports Matrix, you
> | shouldn't be able to load survival unless Matrix is available.
> | requireNamespace("survival") should fail.
> |
> | I think the problem in bujar is that it never checks
> | requireNamespace("survival"), it just calls
> | getFromNamespace('survfitKM','survival').  That will usually work (just
> | about everyone has survival installed, since it's recommended), but is
> | unsafe.  Zhu should use survival::survfitKM, but only after checking
> | that requireNamespace("survival") is successful.
> 
> Yes, I agree. I mostly tried to be helpful but my email wasn't all that
> effective in that.
> 
> Zhu: the behaviour when --as-cran is not set is irrelevant as CRAN asks you
> to test with --as-cran set, so there really is only one relevant choice.
> 
> And Duncan now kindly detailed the appropriate use case: test for a suggested
> package. Or if your use is not conditional, import from it.
> 
> Dirk
> 

From julien@chiquet @ending from gm@il@com  Mon Jan 14 22:22:01 2019
From: julien@chiquet @ending from gm@il@com (julien chiquet)
Date: Mon, 14 Jan 2019 22:22:01 +0100
Subject: [R-pkg-devel] System Requirements and CRAN check
Message-ID: <CACeAVJnVugY3YS8us7SQ_NuDsyjsShihJhtde3LAm1jO3yJ3Tw@mail.gmail.com>

Hi,

I am trying to submit a version of a package whose dev version is on
github: https://github.com/jchiquet/PLNmodels

My package requires a system version of nlopt (that can be installed
on Debian via apt-get install libnlopt-dev, and similarly on other
systems). And I'd rather not use the nloptr package since the version
available on CRAN does not link to the CCSAQ optimization method which
I need. Besides, I like to directly include the nlopt.hpp header in
the C++ code of my package.

I manage to get everything working with travis CI for Linux and Mac OS
(by specifying the field apt and brew_packages), and now I would like
to submit my package to the CRAN. However, the install process failed
on the pretest step on Debian, since it lakes a system version of
nlopt (that would be availble via sudo apt-get install libnlopt-dev).

I though specifying the field SystemRequirements in the package
DESCRIPTION file would allow me to submit properly on CRAN, but
apparently the automatic install process does not recognize this
field.

I will be happy to try to fix the problem if someone point me in the
right direction. I know that some packages on CRAN requires system
libraries such as
https://cran.r-project.org/web/packages/V8/index.html and I tried my
best to follow the same steps, without success apparently.

Thanks for your time,

jc

Julien Chiquet
http://julien.cremeriefamily.info
mel: julien.chiquet at inra.fr
tel: +33(0)1 44 08 16 73


From edd @ending from debi@n@org  Mon Jan 14 23:19:53 2019
From: edd @ending from debi@n@org (Dirk Eddelbuettel)
Date: Mon, 14 Jan 2019 16:19:53 -0600
Subject: [R-pkg-devel] R CMD check --as-cran problem
In-Reply-To: <d9086a0727b44036b4523f1182643e5b@EX-MCD-1.win.uthscsa.edu>
References: <1547247107724.95300@uthscsa.edu>
 <23610.30150.48872.226440@rob.eddelbuettel.com>
 <20f0a5dd128e482e8f4c8300d947b8fe@EX-MCD-1.win.uthscsa.edu>
 <23612.51442.909488.622146@rob.eddelbuettel.com>
 <379acbdb-2ac5-338e-0613-cc382bc51d8f@gmail.com>
 <23612.55444.355093.627427@rob.eddelbuettel.com>
 <8e53891939ce4ceeba27fc46129ff6b5@EX-MCD-1.win.uthscsa.edu>
 <581f4366-0536-fccf-5323-009f45778b3e@statistik.tu-dortmund.de>
 <d9086a0727b44036b4523f1182643e5b@EX-MCD-1.win.uthscsa.edu>
Message-ID: <23613.2825.166059.784769@rob.eddelbuettel.com>


On 14 January 2019 at 21:05, Wang, Zhu wrote:
| Apologize for multiple emails but my another email with source version of the package was hold waiting for moderator approval.

I now formally rejected the post.

Why? There is a reason there is a size limit there.  You were not asked to
send your sources, the comment approach is email a link to the repo.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From w@ngz1 @ending from uth@c@@@edu  Mon Jan 14 23:36:37 2019
From: w@ngz1 @ending from uth@c@@@edu (Wang, Zhu)
Date: Mon, 14 Jan 2019 22:36:37 +0000
Subject: [R-pkg-devel] R CMD check --as-cran problem
In-Reply-To: <23613.2825.166059.784769@rob.eddelbuettel.com>
References: <1547247107724.95300@uthscsa.edu>
 <23610.30150.48872.226440@rob.eddelbuettel.com>
 <20f0a5dd128e482e8f4c8300d947b8fe@EX-MCD-1.win.uthscsa.edu>
 <23612.51442.909488.622146@rob.eddelbuettel.com>
 <379acbdb-2ac5-338e-0613-cc382bc51d8f@gmail.com>
 <23612.55444.355093.627427@rob.eddelbuettel.com>
 <8e53891939ce4ceeba27fc46129ff6b5@EX-MCD-1.win.uthscsa.edu>
 <581f4366-0536-fccf-5323-009f45778b3e@statistik.tu-dortmund.de>
 <d9086a0727b44036b4523f1182643e5b@EX-MCD-1.win.uthscsa.edu>,
 <23613.2825.166059.784769@rob.eddelbuettel.com>
Message-ID: <1547505398662.44199@uthscsa.edu>

The source file is on a local computer, so I would not be able to send a link.

Nevertheless, I downloaded a stable version at https://cran.r-project.org/src/contrib/bujar_0.2-3.tar.gz, and attached results from

R CMD check --as-cran

Thanks,

Zhu
________________________________________
From: Dirk Eddelbuettel <dirk.eddelbuettel at gmail.com> on behalf of Dirk Eddelbuettel <edd at debian.org>
Sent: Monday, January 14, 2019 4:19 PM
To: Wang, Zhu
Cc: Uwe Ligges; Dirk Eddelbuettel; Duncan Murdoch; r-package-devel at r-project.org
Subject: RE: [R-pkg-devel] R CMD check --as-cran problem

On 14 January 2019 at 21:05, Wang, Zhu wrote:
| Apologize for multiple emails but my another email with source version of the package was hold waiting for moderator approval.

I now formally rejected the post.

Why? There is a reason there is a size limit there.  You were not asked to
send your sources, the comment approach is email a link to the repo.

Dirk

--
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

From ligge@ @ending from @t@ti@tik@tu-dortmund@de  Tue Jan 15 09:59:21 2019
From: ligge@ @ending from @t@ti@tik@tu-dortmund@de (Uwe Ligges)
Date: Tue, 15 Jan 2019 09:59:21 +0100
Subject: [R-pkg-devel] R CMD check --as-cran problem
In-Reply-To: <1547505398662.44199@uthscsa.edu>
References: <1547247107724.95300@uthscsa.edu>
 <23610.30150.48872.226440@rob.eddelbuettel.com>
 <20f0a5dd128e482e8f4c8300d947b8fe@EX-MCD-1.win.uthscsa.edu>
 <23612.51442.909488.622146@rob.eddelbuettel.com>
 <379acbdb-2ac5-338e-0613-cc382bc51d8f@gmail.com>
 <23612.55444.355093.627427@rob.eddelbuettel.com>
 <8e53891939ce4ceeba27fc46129ff6b5@EX-MCD-1.win.uthscsa.edu>
 <581f4366-0536-fccf-5323-009f45778b3e@statistik.tu-dortmund.de>
 <d9086a0727b44036b4523f1182643e5b@EX-MCD-1.win.uthscsa.edu>
 <23613.2825.166059.784769@rob.eddelbuettel.com>
 <1547505398662.44199@uthscsa.edu>
Message-ID: <66bf168e-1eb9-67ce-6a0e-a76e9ddbe746@statistik.tu-dortmund.de>

If this happens with the CRAN version of the package, you likely have a 
corrupted installtion of Matrix on your machine, please reinstall Matrix 
and try again. We all assumed your Matrix installation is fine.

Best,
Uwe Ligges


On 14.01.2019 23:36, Wang, Zhu wrote:
> The source file is on a local computer, so I would not be able to send a link.
> 
> Nevertheless, I downloaded a stable version at https://cran.r-project.org/src/contrib/bujar_0.2-3.tar.gz, and attached results from
> 
> R CMD check --as-cran
> 
> Thanks,
> 
> Zhu
> ________________________________________
> From: Dirk Eddelbuettel <dirk.eddelbuettel at gmail.com> on behalf of Dirk Eddelbuettel <edd at debian.org>
> Sent: Monday, January 14, 2019 4:19 PM
> To: Wang, Zhu
> Cc: Uwe Ligges; Dirk Eddelbuettel; Duncan Murdoch; r-package-devel at r-project.org
> Subject: RE: [R-pkg-devel] R CMD check --as-cran problem
> 
> On 14 January 2019 at 21:05, Wang, Zhu wrote:
> | Apologize for multiple emails but my another email with source version of the package was hold waiting for moderator approval.
> 
> I now formally rejected the post.
> 
> Why? There is a reason there is a size limit there.  You were not asked to
> send your sources, the comment approach is email a link to the repo.
> 
> Dirk
> 
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> 
> 
> 00check.log
> 
> * using log directory ???/media/zhu/easystore/backupdir/cygwin/home/Zwang/Rpkg/bujar.Rcheck???
> * using R version 3.5.2 (2018-12-20)
> * using platform: x86_64-pc-linux-gnu (64-bit)
> * using session charset: UTF-8
> * using option ???--as-cran???
> * checking for file ???bujar/DESCRIPTION??? ... OK
> * checking extension type ... Package
> * this is package ???bujar??? version ???0.2-3???
> * checking CRAN incoming feasibility ... WARNING
> Maintainer: ???Zhu Wang <zwang at connecticutchildrens.org>???
> 
> Insufficient package version (submitted: 0.2.3, existing: 0.2.3)
> 
> The Date field is over a month old.
> 
> This build time stamp is over a month old.
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking serialization versions ... OK
> * checking whether package ???bujar??? can be installed ... ERROR
> Installation failed.
> See ???/media/zhu/easystore/backupdir/cygwin/home/Zwang/Rpkg/bujar.Rcheck/00install.out??? for details.
> * DONE
> Status: 1 ERROR, 1 WARNING
>


From w@ngz1 @end|ng |rom uth@c@@@edu  Tue Jan 15 17:06:16 2019
From: w@ngz1 @end|ng |rom uth@c@@@edu (Wang, Zhu)
Date: Tue, 15 Jan 2019 16:06:16 +0000
Subject: [R-pkg-devel] R CMD check --as-cran problem
In-Reply-To: <66bf168e-1eb9-67ce-6a0e-a76e9ddbe746@statistik.tu-dortmund.de>
References: <1547247107724.95300@uthscsa.edu>
 <23610.30150.48872.226440@rob.eddelbuettel.com>
 <20f0a5dd128e482e8f4c8300d947b8fe@EX-MCD-1.win.uthscsa.edu>
 <23612.51442.909488.622146@rob.eddelbuettel.com>
 <379acbdb-2ac5-338e-0613-cc382bc51d8f@gmail.com>
 <23612.55444.355093.627427@rob.eddelbuettel.com>
 <8e53891939ce4ceeba27fc46129ff6b5@EX-MCD-1.win.uthscsa.edu>
 <581f4366-0536-fccf-5323-009f45778b3e@statistik.tu-dortmund.de>
 <d9086a0727b44036b4523f1182643e5b@EX-MCD-1.win.uthscsa.edu>
 <23613.2825.166059.784769@rob.eddelbuettel.com>
 <1547505398662.44199@uthscsa.edu>
 <66bf168e-1eb9-67ce-6a0e-a76e9ddbe746@statistik.tu-dortmund.de>
Message-ID: <6e27b5aaff894db3a4fe30c6e22219ee@EX-MCD-1.win.uthscsa.edu>

I reinstalled Matrix and the installation was fine. But the same problem occurred, again only with --as-cran option. I propose to submit the package to CRAN and see how it goes. Please advise if you have different suggestions. 

Thanks,

Zhu 

-----Original Message-----
From: Uwe Ligges [mailto:ligges at statistik.tu-dortmund.de] 
Sent: Tuesday, January 15, 2019 2:59 AM
To: Wang, Zhu; Dirk Eddelbuettel
Cc: Duncan Murdoch; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] R CMD check --as-cran problem

If this happens with the CRAN version of the package, you likely have a 
corrupted installtion of Matrix on your machine, please reinstall Matrix 
and try again. We all assumed your Matrix installation is fine.

Best,
Uwe Ligges


On 14.01.2019 23:36, Wang, Zhu wrote:
> The source file is on a local computer, so I would not be able to send a link.
> 
> Nevertheless, I downloaded a stable version at https://cran.r-project.org/src/contrib/bujar_0.2-3.tar.gz, and attached results from
> 
> R CMD check --as-cran
> 
> Thanks,
> 
> Zhu
> ________________________________________
> From: Dirk Eddelbuettel <dirk.eddelbuettel at gmail.com> on behalf of Dirk Eddelbuettel <edd at debian.org>
> Sent: Monday, January 14, 2019 4:19 PM
> To: Wang, Zhu
> Cc: Uwe Ligges; Dirk Eddelbuettel; Duncan Murdoch; r-package-devel at r-project.org
> Subject: RE: [R-pkg-devel] R CMD check --as-cran problem
> 
> On 14 January 2019 at 21:05, Wang, Zhu wrote:
> | Apologize for multiple emails but my another email with source version of the package was hold waiting for moderator approval.
> 
> I now formally rejected the post.
> 
> Why? There is a reason there is a size limit there.  You were not asked to
> send your sources, the comment approach is email a link to the repo.
> 
> Dirk
> 
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> 
> 
> 00check.log
> 
> * using log directory ???/media/zhu/easystore/backupdir/cygwin/home/Zwang/Rpkg/bujar.Rcheck???
> * using R version 3.5.2 (2018-12-20)
> * using platform: x86_64-pc-linux-gnu (64-bit)
> * using session charset: UTF-8
> * using option ???--as-cran???
> * checking for file ???bujar/DESCRIPTION??? ... OK
> * checking extension type ... Package
> * this is package ???bujar??? version ???0.2-3???
> * checking CRAN incoming feasibility ... WARNING
> Maintainer: ???Zhu Wang <zwang at connecticutchildrens.org>???
> 
> Insufficient package version (submitted: 0.2.3, existing: 0.2.3)
> 
> The Date field is over a month old.
> 
> This build time stamp is over a month old.
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking serialization versions ... OK
> * checking whether package ???bujar??? can be installed ... ERROR
> Installation failed.
> See ???/media/zhu/easystore/backupdir/cygwin/home/Zwang/Rpkg/bujar.Rcheck/00install.out??? for details.
> * DONE
> Status: 1 ERROR, 1 WARNING
> 

From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Jan 15 17:09:21 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 15 Jan 2019 17:09:21 +0100
Subject: [R-pkg-devel] R CMD check --as-cran problem
In-Reply-To: <6e27b5aaff894db3a4fe30c6e22219ee@EX-MCD-1.win.uthscsa.edu>
References: <1547247107724.95300@uthscsa.edu>
 <23610.30150.48872.226440@rob.eddelbuettel.com>
 <20f0a5dd128e482e8f4c8300d947b8fe@EX-MCD-1.win.uthscsa.edu>
 <23612.51442.909488.622146@rob.eddelbuettel.com>
 <379acbdb-2ac5-338e-0613-cc382bc51d8f@gmail.com>
 <23612.55444.355093.627427@rob.eddelbuettel.com>
 <8e53891939ce4ceeba27fc46129ff6b5@EX-MCD-1.win.uthscsa.edu>
 <581f4366-0536-fccf-5323-009f45778b3e@statistik.tu-dortmund.de>
 <d9086a0727b44036b4523f1182643e5b@EX-MCD-1.win.uthscsa.edu>
 <23613.2825.166059.784769@rob.eddelbuettel.com>
 <1547505398662.44199@uthscsa.edu>
 <66bf168e-1eb9-67ce-6a0e-a76e9ddbe746@statistik.tu-dortmund.de>
 <6e27b5aaff894db3a4fe30c6e22219ee@EX-MCD-1.win.uthscsa.edu>
Message-ID: <ae115daf-eea0-2cad-4b82-c329828ad17b@statistik.tu-dortmund.de>



On 15.01.2019 17:06, Wang, Zhu wrote:
> I reinstalled Matrix and the installation was fine. But the same problem occurred, again only with --as-cran option. I propose to submit the package to CRAN and see how it goes. Please advise if you have different suggestions.


Please submit, I can only gues you have some strange env vars set...

Best,
Uwe Ligges


> Thanks,
> 
> Zhu
> 
> -----Original Message-----
> From: Uwe Ligges [mailto:ligges at statistik.tu-dortmund.de]
> Sent: Tuesday, January 15, 2019 2:59 AM
> To: Wang, Zhu; Dirk Eddelbuettel
> Cc: Duncan Murdoch; r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] R CMD check --as-cran problem
> 
> If this happens with the CRAN version of the package, you likely have a
> corrupted installtion of Matrix on your machine, please reinstall Matrix
> and try again. We all assumed your Matrix installation is fine.
> 
> Best,
> Uwe Ligges
> 
> 
> On 14.01.2019 23:36, Wang, Zhu wrote:
>> The source file is on a local computer, so I would not be able to send a link.
>>
>> Nevertheless, I downloaded a stable version at https://cran.r-project.org/src/contrib/bujar_0.2-3.tar.gz, and attached results from
>>
>> R CMD check --as-cran
>>
>> Thanks,
>>
>> Zhu
>> ________________________________________
>> From: Dirk Eddelbuettel <dirk.eddelbuettel at gmail.com> on behalf of Dirk Eddelbuettel <edd at debian.org>
>> Sent: Monday, January 14, 2019 4:19 PM
>> To: Wang, Zhu
>> Cc: Uwe Ligges; Dirk Eddelbuettel; Duncan Murdoch; r-package-devel at r-project.org
>> Subject: RE: [R-pkg-devel] R CMD check --as-cran problem
>>
>> On 14 January 2019 at 21:05, Wang, Zhu wrote:
>> | Apologize for multiple emails but my another email with source version of the package was hold waiting for moderator approval.
>>
>> I now formally rejected the post.
>>
>> Why? There is a reason there is a size limit there.  You were not asked to
>> send your sources, the comment approach is email a link to the repo.
>>
>> Dirk
>>
>> --
>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>
>>
>> 00check.log
>>
>> * using log directory ???/media/zhu/easystore/backupdir/cygwin/home/Zwang/Rpkg/bujar.Rcheck???
>> * using R version 3.5.2 (2018-12-20)
>> * using platform: x86_64-pc-linux-gnu (64-bit)
>> * using session charset: UTF-8
>> * using option ???--as-cran???
>> * checking for file ???bujar/DESCRIPTION??? ... OK
>> * checking extension type ... Package
>> * this is package ???bujar??? version ???0.2-3???
>> * checking CRAN incoming feasibility ... WARNING
>> Maintainer: ???Zhu Wang <zwang at connecticutchildrens.org>???
>>
>> Insufficient package version (submitted: 0.2.3, existing: 0.2.3)
>>
>> The Date field is over a month old.
>>
>> This build time stamp is over a month old.
>> * checking package namespace information ... OK
>> * checking package dependencies ... OK
>> * checking if this is a source package ... OK
>> * checking if there is a namespace ... OK
>> * checking for executable files ... OK
>> * checking for hidden files and directories ... OK
>> * checking for portable file names ... OK
>> * checking for sufficient/correct file permissions ... OK
>> * checking serialization versions ... OK
>> * checking whether package ???bujar??? can be installed ... ERROR
>> Installation failed.
>> See ???/media/zhu/easystore/backupdir/cygwin/home/Zwang/Rpkg/bujar.Rcheck/00install.out??? for details.
>> * DONE
>> Status: 1 ERROR, 1 WARNING
>>


From th|erry@onke||nx @end|ng |rom |nbo@be  Wed Jan 16 17:00:34 2019
From: th|erry@onke||nx @end|ng |rom |nbo@be (Thierry Onkelinx)
Date: Wed, 16 Jan 2019 17:00:34 +0100
Subject: [R-pkg-devel] txt data is undefined global variable
Message-ID: <CAJuCY5wTm6tLAO1hwaL6Jhk7j9vH2PuYS7eQcrP45h67zLn8=A@mail.gmail.com>

Dear all,

I'm working on a package "foo" which has a dataframe stored in
"data/foo.txt". The DESCRIPTION has "LazyData: true".  Functions can use
the object "foo". e.g.

bar <- function() {
summary(foo)
}

However, R CMD check throws the "undefined global variable" error.

What is the proper way to use txt data in a package?

Best regards,

Thierry

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Jan 16 19:26:37 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 16 Jan 2019 19:26:37 +0100
Subject: [R-pkg-devel] txt data is undefined global variable
In-Reply-To: <CAJuCY5wTm6tLAO1hwaL6Jhk7j9vH2PuYS7eQcrP45h67zLn8=A@mail.gmail.com>
References: <CAJuCY5wTm6tLAO1hwaL6Jhk7j9vH2PuYS7eQcrP45h67zLn8=A@mail.gmail.com>
Message-ID: <d5b1c51f-305d-cf97-550a-8f5f434c5ab1@statistik.tu-dortmund.de>



On 16.01.2019 17:00, Thierry Onkelinx wrote:
> Dear all,
> 
> I'm working on a package "foo" which has a dataframe stored in
> "data/foo.txt". The DESCRIPTION has "LazyData: true".  Functions can use
> the object "foo". e.g.

foo is not regisrered in the namespace and you are relying on search 
path order now.

If you want to have data objects you want to use in functions but which 
are not necesarily available via data() calls, use the sysdata 
mechanism. From WRE:

"if the R subdirectory contains a file sysdata.rda (a
saved image of one or more R objects: please use suitable compression as 
suggested by tools::resaveRdaFiles, and see also the 
?SysDataCompression? DESCRIPTION field.) this will be lazy-loaded into 
the namespace environment ? this is intended for system datasets that 
are not intended to be user-accessible via data"

Best,
Uwe Ligges

> bar <- function() {
> summary(foo)
> }
> 
> However, R CMD check throws the "undefined global variable" error.
> 
> What is the proper way to use txt data in a package?
> 
> Best regards,
> 
> Thierry
> 
> ir. Thierry Onkelinx
> Statisticus / Statistician
> 
> Vlaamse Overheid / Government of Flanders
> INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
> FOREST
> Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
> thierry.onkelinx at inbo.be
> Havenlaan 88 bus 73, 1000 Brussel
> www.inbo.be
> 
> ///////////////////////////////////////////////////////////////////////////////////////////
> To call in the statistician after the experiment is done may be no more
> than asking him to perform a post-mortem examination: he may be able to say
> what the experiment died of. ~ Sir Ronald Aylmer Fisher
> The plural of anecdote is not data. ~ Roger Brinner
> The combination of some data and an aching desire for an answer does not
> ensure that a reasonable answer can be extracted from a given body of data.
> ~ John Tukey
> ///////////////////////////////////////////////////////////////////////////////////////////
> 
> <https://www.inbo.be>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ht @end|ng |rom he@therturner@net  Wed Jan 16 22:16:52 2019
From: ht @end|ng |rom he@therturner@net (Heather Turner)
Date: Wed, 16 Jan 2019 16:16:52 -0500
Subject: [R-pkg-devel] shadowing a method from the stats package
In-Reply-To: <16acf54d-2b12-ebc7-679a-420d7d464a71@use.startmail.com>
References: <e97472a8-873c-f496-6d45-bafc337d03ba@use.startmail.com>
 <CAO1zAVZ3cxgweVvago5_eDNJvv2Vk9YiTwS=6FJMsaWPMUDQ6A@mail.gmail.com>
 <16acf54d-2b12-ebc7-679a-420d7d464a71@use.startmail.com>
Message-ID: <bbe9939b-7094-4804-9b33-1f5b8b812914@www.fastmail.com>

Hi Oscar,

I don't think this is such a good idea, for a few reasons.

First, `setMethod` defines an S4 method, so both an S3 method (from stats) and an S4 method (from your package) will be defined. This seems to work, but could give unexpected results and is confusing for anyone trying to understand what code is actually called. You could use `R.methodsS3::setMethodS3` to replace the summary.glm registered by the stats package, but then you're back to square 1.

Second, it's not enough to replace `summary.glm`; you also need to replace `vcov.glm`, since this calls summary.glm internally and even if you have defined your own S3/S4 summary method for glms, the one from stats will be used in that case, since it is in the same namespace.

Third, if you can over-ride `summary.glm`, then another person could, potentially meaning your unifed family gets used to fit a glm, but then another summary method is called when summarising the fit. 

So I think the safest solution would be to write a wrapper around glm, `unifed_glm` say, that fits a glm with the unifed family and returns an object of class c("unifed", "glm", "lm"). Then you can write summary.unifed, vcov.unifed and any other required methods, passing on to the "glm" methods when you have set dispersion to 1. This also makes it easier to document the methods.

Alternatively you could try emailing the R-devel mailing list to propose that family objects should have an `est.disp` element that is FALSE for binomial, poisson and any other families that should have dispersion fixed to 1, and is TRUE otherwise. This would require minimal change to the stats package, while accommodating your unifed family.

Best wishes,

Heather

On Sat, Jan 12, 2019, at 10:02 PM, qxacur at use.startmail.com wrote:
> Hi Joris,
> 
> ??? thank you for your reply.
> 
> ??? I re-read the CRAN policy after I saw your reply and you are right,
> I do not need permission for this.
> 
> ??? About the search PATH. unifed will always be attached after stats,
> so I think the unifed function would always be found before the one in
> stats (please correct me if you think I am wrong).
> 
> ??? Still, I found a different way to solve the problem in order to
> avoid NOTEs when I run 'R CMD check --as-cran', that can be considered
> more robust:
> 
> ??? I first changed the name of my wrapper function to something
> different (this is in order to avoid a note in registering S3 methods).
> 
> ??? then, in the zzz.R file inside of the .onLoad function I used
> setMethod with where=.GlobalEnv to rewrite the summary method of the glm
> class and in there I call the wrapper function.
> 
> ?? This gives the behavior that I wanted and it does not depend on the
> search path.
> 
> Cheers,
> 
> ?? Oscar.
> 
> >
> > Then again, I'm not sure this will always work, as you rely heavily on
> > the search path for your function to be found before the one in stats.
> > I would be interested as well in hearing how this can be solved in a
> > more robust way, but I can't really come up with something myself.
> > Interesting problem!
> >
> > Cheers
> > Joris
> >
> > On Fri, Jan 11, 2019 at 10:14 PM <qxacur at use.startmail.com
> > <mailto:qxacur at use.startmail.com>> wrote:
> >
> >     Hello,
> >
> >     ? ? I created a package for working with a new probability
> >     distribution called unifed. The source code can be found at
> >     https://gitlab.com/oquijano/unifed .
> >
> >     ? ? This distribution is suitable for GLMs. I have included a a
> >     function called unifed in the package that returns a family that can
> >     be used with the glm function.
> >
> >     ? ? For a unifed glm, it is necessary for the dispersion parameter to
> >     be equal to one. The summary method of the glm class does this
> >     automatically for the poisson and binomial distributions and I would
> >     like the same for the unifed. In order to achieve this, I am
> >     including a summary.glm function in the package so it shadows
> >     stats::summary.glm when the package is attached. This function is
> >     actually just a wrapper around stats::summary.glm.? It simply checks
> >     if the family is unifed; If this is the case it calls
> >     stats::summary.glm with dispersion=1 and otherwise it simply calls
> >     stats::summary.glm with the same parameters.? Therefore introducing
> >     this in the namespace does not break or change the behavior of any
> >     existing code that uses summary.glm
> >
> >     ? ? ?According to the CRAN policies I need permission from the
> >     maintainer of the package for doing this. The maintainer of the
> >     package
> >     is the R core team. To whom should I write to ask for this permission?
> >     Otherwise is there a different way in which I could achieve the right
> >     default behavior and respect the CRAN policies?
> >
> >
> >     Thank you for your time.
> >
> >     ______________________________________________
> >     R-package-devel at r-project.org
> >     <mailto:R-package-devel at r-project.org> mailing list
> >     https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >
> >
> > -- 
> > Joris Meys
> > Statistical consultant
> >
> > Department of Data Analysis and Mathematical Modelling
> > Ghent University
> > Coupure Links 653, B-9000 Gent (Belgium)
> > <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
> >
> > tel: +32 (0)9 264 61 79
> > -----------
> > Biowiskundedagen 2017-2018
> > http://www.biowiskundedagen.ugent.be/
> >
> > -------------------------------
> > Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From uc|@g|@ @end|ng |rom gm@||@com  Thu Jan 17 00:41:28 2019
From: uc|@g|@ @end|ng |rom gm@||@com (Gavin Simpson)
Date: Wed, 16 Jan 2019 17:41:28 -0600
Subject: [R-pkg-devel] Avoiding differences between Examples output on
 Windows due to tibble
Message-ID: <CAAHES9znEMKgS53vwchcgfPXm+Hs+sqqmbd_L1bV9Suf6DDeMQ@mail.gmail.com>

Dear List,

The latest version of tibble 2.0.1 is printing output (on Linux at
least) that contains a UTF-8 ellipsis ? instead of the previous three
periods ...

This is causing some differences between the reference materials for
my pkg examples that I generate locally on Linux and the output
generated on the Winbuilder system under Windows. In the latter, the
ellipsis is not being printed and three periods are being used
instead. As such I am seeing the following differences in Windows only
un R CMD check:

** checking differences from 'gratia-Ex_i386.Rout' to
'gratia-Ex.Rout.save' ... OK

239c239
< # ... with 790 more rows
---
> # ? with 790 more rows
** running examples for arch 'x64' ... [24s] OK
** checking differences from 'gratia-Ex_x64.Rout' to
'gratia-Ex.Rout.save' ... OK

239c239
< # ... with 790 more rows
---
> # ? with 790 more rows

I'm assuming this is going to be an issue for CRAN. If so, what can i
do about this? Is there some flag or trick I can use to generate the
same output on Windows as I produce on Linux?

The full sources for package in question are on github:
https://github.com/gavinsimpson/gratia should anyone want to check
something there.

Thanks in advance

Gavin

--
Gavin Simpson, PhD


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Jan 17 12:15:55 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 17 Jan 2019 12:15:55 +0100
Subject: [R-pkg-devel] Avoiding differences between Examples output on
 Windows due to tibble
In-Reply-To: <CAAHES9znEMKgS53vwchcgfPXm+Hs+sqqmbd_L1bV9Suf6DDeMQ@mail.gmail.com>
References: <CAAHES9znEMKgS53vwchcgfPXm+Hs+sqqmbd_L1bV9Suf6DDeMQ@mail.gmail.com>
Message-ID: <c9ae64d9-dcd4-007d-a743-d84f9ef44e7a@statistik.tu-dortmund.de>



On 17.01.2019 00:41, Gavin Simpson wrote:
> Dear List,
> 
> The latest version of tibble 2.0.1 is printing output (on Linux at
> least) that contains a UTF-8 ellipsis ? instead of the previous three
> periods ...

Please ask the tibble maintainer what this is about.
In my opinion this should be changed back.

Best,
Uwe Ligges

> This is causing some differences between the reference materials for
> my pkg examples that I generate locally on Linux and the output
> generated on the Winbuilder system under Windows. In the latter, the
> ellipsis is not being printed and three periods are being used
> instead. As such I am seeing the following differences in Windows only
> un R CMD check:
> 
> ** checking differences from 'gratia-Ex_i386.Rout' to
> 'gratia-Ex.Rout.save' ... OK
> 
> 239c239
> < # ... with 790 more rows
> ---
>> # ? with 790 more rows
> ** running examples for arch 'x64' ... [24s] OK
> ** checking differences from 'gratia-Ex_x64.Rout' to
> 'gratia-Ex.Rout.save' ... OK
> 
> 239c239
> < # ... with 790 more rows
> ---
>> # ? with 790 more rows
> 
> I'm assuming this is going to be an issue for CRAN. If so, what can i
> do about this? Is there some flag or trick I can use to generate the
> same output on Windows as I produce on Linux?
> 
> The full sources for package in question are on github:
> https://github.com/gavinsimpson/gratia should anyone want to check
> something there.
> 
> Thanks in advance
> 
> Gavin
> 
> --
> Gavin Simpson, PhD
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From uc|@g|@ @end|ng |rom gm@||@com  Thu Jan 17 15:36:49 2019
From: uc|@g|@ @end|ng |rom gm@||@com (Gavin Simpson)
Date: Thu, 17 Jan 2019 08:36:49 -0600
Subject: [R-pkg-devel] Avoiding differences between Examples output on
 Windows due to tibble
In-Reply-To: <c9ae64d9-dcd4-007d-a743-d84f9ef44e7a@statistik.tu-dortmund.de>
References: <CAAHES9znEMKgS53vwchcgfPXm+Hs+sqqmbd_L1bV9Suf6DDeMQ@mail.gmail.com>
 <c9ae64d9-dcd4-007d-a743-d84f9ef44e7a@statistik.tu-dortmund.de>
Message-ID: <CAAHES9zxQWgj3S_KhJDx0XTJPx1JK2kMeT1dYPQtyaY4=tEUXA@mail.gmail.com>

Thank Uwe, I also had some discussions on Twitter with various people
about this.

Thanks to Brodie Gaslam (@BrodieG) via Twitter, a solution seems to be
to set the global option `cli.unicode` to `FALSE` for checking, as
this is coming from the cli pkg.

Hence for my purposes in examples I am using

\dontshow{op <- options(cli.unicode = FALSE)}
....
\dontshow{options(op)}

around sections of examples that print tibble-based output.

This is a bit of a pain, but as it is already common to reduce
precision on example output, setting this option is just one more
thing to configure if you want to continue using reference Example
output with R CMD check and tibbles.

All the best

Gavin

On Thu, 17 Jan 2019 at 05:15, Uwe Ligges
<ligges at statistik.tu-dortmund.de> wrote:
>
>
>
> On 17.01.2019 00:41, Gavin Simpson wrote:
> > Dear List,
> >
> > The latest version of tibble 2.0.1 is printing output (on Linux at
> > least) that contains a UTF-8 ellipsis ? instead of the previous three
> > periods ...
>
> Please ask the tibble maintainer what this is about.
> In my opinion this should be changed back.
>
> Best,
> Uwe Ligges
>
> > This is causing some differences between the reference materials for
> > my pkg examples that I generate locally on Linux and the output
> > generated on the Winbuilder system under Windows. In the latter, the
> > ellipsis is not being printed and three periods are being used
> > instead. As such I am seeing the following differences in Windows only
> > un R CMD check:
> >
> > ** checking differences from 'gratia-Ex_i386.Rout' to
> > 'gratia-Ex.Rout.save' ... OK
> >
> > 239c239
> > < # ... with 790 more rows
> > ---
> >> # ? with 790 more rows
> > ** running examples for arch 'x64' ... [24s] OK
> > ** checking differences from 'gratia-Ex_x64.Rout' to
> > 'gratia-Ex.Rout.save' ... OK
> >
> > 239c239
> > < # ... with 790 more rows
> > ---
> >> # ? with 790 more rows
> >
> > I'm assuming this is going to be an issue for CRAN. If so, what can i
> > do about this? Is there some flag or trick I can use to generate the
> > same output on Windows as I produce on Linux?
> >
> > The full sources for package in question are on github:
> > https://github.com/gavinsimpson/gratia should anyone want to check
> > something there.
> >
> > Thanks in advance
> >
> > Gavin
> >
> > --
> > Gavin Simpson, PhD
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >



-- 
Gavin Simpson, PhD


From @ndre@@@b|@ette @end|ng |rom un|-due@de  Thu Jan 17 22:14:09 2019
From: @ndre@@@b|@ette @end|ng |rom un|-due@de (=?utf-8?B?QmzDpHR0ZSwgQW5kcmVhcw==?=)
Date: Thu, 17 Jan 2019 21:14:09 +0000
Subject: [R-pkg-devel] Solaris build of package with Rcpp dependency
Message-ID: <A758CD75-3962-4471-82E6-E71C340EF5C7@uni-due.de>

Dear colleagues,

I maintain the package called ?RcppCWB? that depends on ?Rcpp?. Using C++/Rcpp, it exposes the functionality of the ?Corpus Workbench? (CWB), a set of tools written in C to create and query large, linguistically annotated corpora.

So far, the package can be built on all major platforms (Linux, macOS, Windows), but there is a recurring ERROR for Solaris. Even though I do not anybody who actually works with Solaris, I started to work on Solaris portability. The state of affairs is a branch ?solaris? of the package at GitHub: https://github.com/PolMine/RcppCWB/tree/solaris

I manage to compile the package without errors using the VMWare Solaris image prepared by Jeroen Ooms. However, it is necessary to switch to the GNU toolchain (gmake, gcc, g++). Using Solaris make, and the compilers included in Oracle Developer Studio does not work. It does not seem to be a flaw of my code. I gather, it is a well-known fact that packages using Rcpp require the GNU toolchain, see the Details for r-patched-solaris-86: https://www.stats.ox.ac.uk/pub/bdr/Rconfig/r-patched-solaris-x86

So there are certain known modifications of config.site / Makeconf that trigger using the GNU toolchain. However, I do not know, how to require using this when I submit the next Release of RcppCWB to CRAN:

  *   Will it be enough to state SystemRequirements: GNU make?
  *   Will it be enough to have Rcpp in the dependencies?
  *   Or will the CRAN team react on what I write in cran-comments.md?

To avoid a trial-and-error process, I tried to check the package on r-hub. But here I get an error, because Rcpp is not present on the r-hub Solaris server. This will not be the error I encounter on CRAN servers.

So my question is, how do I require usage of the GNU toolchain for the Solaris build/check of a package at CRAN.  Thanks for your advice!

Kind regards
Andreas (Bl?tte)

--
Prof. Dr. Andreas Blaette
Professor of Public Policy
University of Duisburg-Essen
www.polmine.de<http://www.polmine.de>
www.github.com/PolMine<http://www.github.com/PolMine>



	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Jan 17 23:59:24 2019
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Fri, 18 Jan 2019 11:59:24 +1300
Subject: [R-pkg-devel] Imported function cannot be found.
Message-ID: <b72970ad-03ce-4ed2-f9dd-7b1749f25e0b@auckland.ac.nz>


I am build a package in which there is a function which calls upon the 
function brm() from the brms package.

In my DESCRIPTION file I have the line

> Imports: lme4, brms, glmmTMB, MASS, lattice, Rcpp, rmutil

In my NAMESPACE file I have the line

> importFrom("Rcpp","cpp_object_initializer")

Yet when I call the function from my package which calls brm() I get the 
error message:

> Error in cpp_object_initializer(.self, .refClassDef, ...) : 
>   could not find function "cpp_object_initializer"

Clearly I am doing something wrong.  Can someone please point me in the 
direction of correctness?

Note that there is indeed a function cpp_object_initializer() in the 
Rcpp package.

If more detail is required in order for guidance to be provided I am of 
course more than happy to supply such detail.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From jmount @end|ng |rom w|n-vector@com  Thu Jan 17 23:56:58 2019
From: jmount @end|ng |rom w|n-vector@com (John Mount)
Date: Thu, 17 Jan 2019 14:56:58 -0800
Subject: [R-pkg-devel] Strange issue checking packages on MacOS
Message-ID: <FD13B96F-348E-42C7-8C7A-785A43DE56A4@win-vector.com>

When checking a package on MacOS High Sierra the XQuartz server starts up at the "checking S3 generic/method consistency" step. This is easy to reproduce:

Start RStudio
Select New->Project->NewDirectory->R Package (I checked "use .git")
BuildPane->More->BuildSourcePackage
At the bas command line run: R CMD check --as-cran empty_0.1.0.tar.gz
At the "checking S3 generic/method consistency" step XQuartz will start up.  I can work around it.  But I think it may be a possible symptom of a bad dependency that may cause trouble on Windows and Mac systems without an X-server. It seems to require the --as-cran flag to trigger.



---------------
John Mount
http://www.win-vector.com/ <http://www.win-vector.com/> 
Our book: Practical Data Science with R http://www.manning.com/zumel/ <http://www.manning.com/zumel/>




	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Fri Jan 18 02:50:38 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 17 Jan 2019 19:50:38 -0600
Subject: [R-pkg-devel] Imported function cannot be found.
In-Reply-To: <b72970ad-03ce-4ed2-f9dd-7b1749f25e0b@auckland.ac.nz>
References: <b72970ad-03ce-4ed2-f9dd-7b1749f25e0b@auckland.ac.nz>
Message-ID: <23617.12526.287358.308403@rob.eddelbuettel.com>


On 18 January 2019 at 11:59, Rolf Turner wrote:
| 
| I am build a package in which there is a function which calls upon the 
| function brm() from the brms package.
| 
| In my DESCRIPTION file I have the line
| 
| > Imports: lme4, brms, glmmTMB, MASS, lattice, Rcpp, rmutil
| 
| In my NAMESPACE file I have the line
| 
| > importFrom("Rcpp","cpp_object_initializer")
| 
| Yet when I call the function from my package which calls brm() I get the 
| error message:
| 
| > Error in cpp_object_initializer(.self, .refClassDef, ...) : 
| >   could not find function "cpp_object_initializer"
| 
| Clearly I am doing something wrong.  Can someone please point me in the 
| direction of correctness?
| 
| Note that there is indeed a function cpp_object_initializer() in the 
| Rcpp package.
| 
| If more detail is required in order for guidance to be provided I am of 
| course more than happy to supply such detail.

Which of these packages uses Rcpp Modules?  Yours?  brms::brm()

It may be more prudent replace

   importFrom("Rcpp","cpp_object_initializer")

with

   import(Rcpp)

which tickles a different initialization for Rcpp. I just checked two Rcpp
Modules using packages of mine, and they use that latter approach.

Hth, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From r@turner @end|ng |rom @uck|@nd@@c@nz  Fri Jan 18 03:13:03 2019
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Fri, 18 Jan 2019 15:13:03 +1300
Subject: [R-pkg-devel] Imported function cannot be found. (Solved.)
In-Reply-To: <23617.12526.287358.308403@rob.eddelbuettel.com>
References: <b72970ad-03ce-4ed2-f9dd-7b1749f25e0b@auckland.ac.nz>
 <23617.12526.287358.308403@rob.eddelbuettel.com>
Message-ID: <832a5381-ee12-f419-0f5b-454f883173a1@auckland.ac.nz>


Thanks Dirk.  Your suggestion worked perfectly.  (See inline below.)

On 1/18/19 2:50 PM, Dirk Eddelbuettel wrote:
> 
> On 18 January 2019 at 11:59, Rolf Turner wrote:
> |
> | I am build a package in which there is a function which calls upon the
> | function brm() from the brms package.
> |
> | In my DESCRIPTION file I have the line
> |
> | > Imports: lme4, brms, glmmTMB, MASS, lattice, Rcpp, rmutil
> |
> | In my NAMESPACE file I have the line
> |
> | > importFrom("Rcpp","cpp_object_initializer")
> |
> | Yet when I call the function from my package which calls brm() I get the
> | error message:
> |
> | > Error in cpp_object_initializer(.self, .refClassDef, ...) :
> | >   could not find function "cpp_object_initializer"
> |
> | Clearly I am doing something wrong.  Can someone please point me in the
> | direction of correctness?
> |
> | Note that there is indeed a function cpp_object_initializer() in the
> | Rcpp package.
> |
> | If more detail is required in order for guidance to be provided I am of
> | course more than happy to supply such detail.
> 
> Which of these packages uses Rcpp Modules?  Yours?  brms::brm()

Definitely brms:brm()!!!  Using Rcpp is far beyond my limited capabilities.

> It may be more prudent replace
> 
>     importFrom("Rcpp","cpp_object_initializer")
> 
> with
> 
>     import(Rcpp)
> 
> which tickles a different initialization for Rcpp. I just checked two Rcpp
> Modules using packages of mine, and they use that latter approach.

Yep.  Tried that, and it works.  It all seems like sorcery to me, but I 
guess if I (or somebody more clever than I, e.g. your very good self) 
can get it to work, then that's all that matters.

Thanks again.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From edd @end|ng |rom deb|@n@org  Fri Jan 18 04:08:05 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 17 Jan 2019 21:08:05 -0600
Subject: [R-pkg-devel] Imported function cannot be found. (Solved.)
In-Reply-To: <832a5381-ee12-f419-0f5b-454f883173a1@auckland.ac.nz>
References: <b72970ad-03ce-4ed2-f9dd-7b1749f25e0b@auckland.ac.nz>
 <23617.12526.287358.308403@rob.eddelbuettel.com>
 <832a5381-ee12-f419-0f5b-454f883173a1@auckland.ac.nz>
Message-ID: <23617.17173.201062.94042@rob.eddelbuettel.com>


On 18 January 2019 at 15:13, Rolf Turner wrote:
| 
| Thanks Dirk.  Your suggestion worked perfectly.  (See inline below.)

Glad to hear.

| On 1/18/19 2:50 PM, Dirk Eddelbuettel wrote:
| > 
| > On 18 January 2019 at 11:59, Rolf Turner wrote:

[...]

| > Which of these packages uses Rcpp Modules?  Yours?  brms::brm()
| 
| Definitely brms:brm()!!!  Using Rcpp is far beyond my limited capabilities.
| 
| > It may be more prudent replace
| > 
| >     importFrom("Rcpp","cpp_object_initializer")
| > 
| > with
| > 
| >     import(Rcpp)
| > 
| > which tickles a different initialization for Rcpp. I just checked two Rcpp
| > Modules using packages of mine, and they use that latter approach.
| 
| Yep.  Tried that, and it works.  It all seems like sorcery to me, but I 
| guess if I (or somebody more clever than I, e.g. your very good self) 
| can get it to work, then that's all that matters.

Something is off the rocker here as you should not have to do anything here
besides importing brms::brm.  That another package uses Rcpp should not force
you to do something so I suspect something else is amiss.  But based on the
information given I can not think of a suggestion. As they say: Oh well ...

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From r@turner @end|ng |rom @uck|@nd@@c@nz  Fri Jan 18 09:04:36 2019
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Fri, 18 Jan 2019 21:04:36 +1300
Subject: [R-pkg-devel] Imported function cannot be found. (Solved.)
In-Reply-To: <23617.17173.201062.94042@rob.eddelbuettel.com>
References: <b72970ad-03ce-4ed2-f9dd-7b1749f25e0b@auckland.ac.nz>
 <23617.12526.287358.308403@rob.eddelbuettel.com>
 <832a5381-ee12-f419-0f5b-454f883173a1@auckland.ac.nz>
 <23617.17173.201062.94042@rob.eddelbuettel.com>
Message-ID: <d82c3c4a-30fb-c083-daaa-5d15859dc120@auckland.ac.nz>

On 1/18/19 4:08 PM, Dirk Eddelbuettel wrote:
> 
> On 18 January 2019 at 15:13, Rolf Turner wrote:
> |
> | Thanks Dirk.  Your suggestion worked perfectly.  (See inline below.)
> 
> Glad to hear.

<SNIP>

> 
> Something is off the rocker here as you should not have to do anything here
> besides importing brms::brm.  That another package uses Rcpp should not force
> you to do something so I suspect something else is amiss.  But based on the
> information given I can not think of a suggestion. As they say: Oh well ...

Yeah, I thought it a bit odd when what I tried initially didn't work. 
But as I indicated earlier, all this business about Depend, Suggests, 
Imports etc. and the distinctions between them seems like sorcery to me.
And since what I have now tried, on the basis of your suggestion, *does* 
work, I think that "Oh well ..." is the right answer to the conundrum.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From @|ex@ndre@court|o| @end|ng |rom gm@||@com  Fri Jan 18 09:46:03 2019
From: @|ex@ndre@court|o| @end|ng |rom gm@||@com (Alexandre Courtiol)
Date: Fri, 18 Jan 2019 09:46:03 +0100
Subject: [R-pkg-devel] Strange issue checking packages on MacOS
In-Reply-To: <FD13B96F-348E-42C7-8C7A-785A43DE56A4@win-vector.com>
References: <FD13B96F-348E-42C7-8C7A-785A43DE56A4@win-vector.com>
Message-ID: <CAERMt4eVifkixn4-1NGgb19V1fm8QyLLN0xLrePhVr08NJ5+iQ@mail.gmail.com>

Hi John,
I cannot replicate the problem on my machine, which version of R and
RStudio are you using?
I don't think I can solve the issue but it could help others to have a
finer idea about your system.
Also I used a terminal running bash outside RStudio, what did you do?

I did your test using RStudio Version 1.1.456 in the following R environment

> sessionInfo()
R version 3.5.1 (2018-07-02)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS  10.14.2

Matrix products: default
BLAS:
/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
LAPACK:
/Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods
[7] base

loaded via a namespace (and not attached):
[1] compiler_3.5.1 tools_3.5.1    yaml_2.2.0

> devtools::session_info()
? Session info ??????????????????????????????????????????????????????
 setting  value
 version  R version 3.5.1 (2018-07-02)
 os       macOS  10.14.2
 system   x86_64, darwin15.6.0
 ui       RStudio
 language (EN)
 collate  en_US.UTF-8
 ctype    en_US.UTF-8
 tz       Europe/Berlin
 date     2019-01-18

Best,
Alex



On Fri, 18 Jan 2019 at 02:45, John Mount <jmount at win-vector.com> wrote:

> When checking a package on MacOS High Sierra the XQuartz server starts up
> at the "checking S3 generic/method consistency" step. This is easy to
> reproduce:
>
> Start RStudio
> Select New->Project->NewDirectory->R Package (I checked "use .git")
> BuildPane->More->BuildSourcePackage
> At the bas command line run: R CMD check --as-cran empty_0.1.0.tar.gz
> At the "checking S3 generic/method consistency" step XQuartz will start
> up.  I can work around it.  But I think it may be a possible symptom of a
> bad dependency that may cause trouble on Windows and Mac systems without an
> X-server. It seems to require the --as-cran flag to trigger.
>
>
>
> ---------------
> John Mount
> http://www.win-vector.com/ <http://www.win-vector.com/>
> Our book: Practical Data Science with R http://www.manning.com/zumel/ <
> http://www.manning.com/zumel/>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Alexandre Courtiol

http://sites.google.com/site/alexandrecourtiol/home

*"Science is the belief in the ignorance of experts"*, R. Feynman

	[[alternative HTML version deleted]]


From pr|ce0416 @end|ng |rom gm@||@com  Fri Jan 18 16:42:06 2019
From: pr|ce0416 @end|ng |rom gm@||@com (Adam Price)
Date: Fri, 18 Jan 2019 10:42:06 -0500
Subject: [R-pkg-devel] LaTeX warnings on debian builds only
Message-ID: <CAO49RG6-Hsogp4qVtHbYNgONpQVrv58i00NiBPEo55xA-UG0VA@mail.gmail.com>

Hi,

I am currently having an issue getting past a warning that's occurring on
linux based builds for my vignette.  The warning is: "! LaTeX Error: Option
clash for package xcolor."

The check results are here:
*https://win-builder.r-project.org/incoming_pretest/DEVis_1.0.1_20181220_164555/Debian/00check.log
<https://win-builder.r-project.org/incoming_pretest/DEVis_1.0.1_20181220_164555/Debian/00check.log>*

Windows and OS X builds work fine, but I don't have access to a debian
machine that I can reproduce this on.  I currently cannot reproduce this
issue on my side, and travis-ci checks do not seem to produce this warning
for linux on ubuntu.  I can only see it currently when submitting an update
to my package and failing the CRAN auto-checks.

I have recently changed from PDF vignette to html-based, and am not sure
why LaTeX packages would even be loading in this case.  I have attempted to
correct for it based on this post (
https://github.com/haozhu233/kableExtra/issues/274
) which claims the issue is a conflict between kableExtra and xcolor.

Some relevant sections of code from the vignette might include:
"
vignette: |
  %\VignetteIndexEntry{DEVis}
  %\usepackage[utf8]{inputenc}
  %\usepackage[table]{xcolor}
  %\VignetteEngine{knitr::knitr}
---

```{r loadData, echo = F, eval = TRUE}
#load("../data/exampleData.Rda")
knitr::opts_knit$set(root.dir = '../vignettes/')
knitr::opts_chunk$set(fig.path='figure/graphics-',
                 cache.path='cache/graphics-',
                 fig.align='center',
                 external=TRUE,
                 echo=TRUE,
                 warning=FALSE,
                 fig.pos='H'
                )
  a4width<- 8.3
  a4height<- 11.7
library(kableExtra)
library(rmarkdown)
library(knitr)
options(knitr.table.format = "html")
options(kableExtra.latex.load_packages = FALSE)
"


The full package code can be found here: https://github.com/price0416/DEvis

I would appreciate any insight anyone can offer into this issue, as I
cannot update my package until I get to the bottom of this!  Thanks very
much in advance!

Best,
-Adam

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Fri Jan 18 17:06:56 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 18 Jan 2019 10:06:56 -0600
Subject: [R-pkg-devel] LaTeX warnings on debian builds only
In-Reply-To: <CAO49RG6-Hsogp4qVtHbYNgONpQVrv58i00NiBPEo55xA-UG0VA@mail.gmail.com>
References: <CAO49RG6-Hsogp4qVtHbYNgONpQVrv58i00NiBPEo55xA-UG0VA@mail.gmail.com>
Message-ID: <23617.63904.780356.895354@rob.eddelbuettel.com>


On 18 January 2019 at 10:42, Adam Price wrote:
| Windows and OS X builds work fine, but I don't have access to a debian
| machine that I can reproduce this on.  I currently cannot reproduce this

You do -- RHub, ie https://builder.r-hub.io.. It's so worth it. Please explore it.

As a community we could do / should do one better and ensure that the
testable resources actually correspond to the testbeds used but that is
something where I can only plead to the galactic overloards.  I do try on
occassion though...

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From tr|ng @end|ng |rom gvdnet@dk  Sat Jan 19 11:46:11 2019
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Sat, 19 Jan 2019 11:46:11 +0100
Subject: [R-pkg-devel] problems documenting data sets
Message-ID: <691701d4afe4$31d2cd50$957867f0$@gvdnet.dk>

Dear friends ? I still get some warning although the package runs just fine.

checking for missing documentation entries ... WARNING

  Undocumented data sets:

    'Cl' 'K' 'Na' 'TOTAL' 'WA' 'INPUT' 'Alb' 'Ca' 'Lact' 'Mg' 'PCO2' 'S1'

    'Brom' 'pHOBS'

  All user-level objects in a package should have documentation entries.

  See chapter 'Writing R documentation files' in the 'Writing R

  Extensions' manual.

 

0 errors v | 1 warning x | 0 notes v

Fejl: R CMD check found WARNINGs

K?rsel stoppet (run stopped)

 

But the only place I have  any mentions of brom is here below and in no place I have capital Brom. So what should I make of this?

 

\name{brom}

\alias{brom}

\docType{data}

\title{

Bromic acid data from Glaser et al 2014

}

\description{

  Data to find optimal pK for bromic acid

}

\usage{data("brom")}

\format{

A workspace.

  \describe{

    \item{brom}{Dataframe of Table S4 in Glaser et al.}

    \item{WA}{List of buffers with list of dissociation constants.}

  }

}

\source{

Glaser RE et al. Dynamical approach to multiequilibriia problems for mixtures of

acids and their conjugate bases. J Chem Educ 2014; 91: 1009-1016

}

\examples{

data(brom)

## maybe str(brom) ; plot(brom) ...

}

\keyword{datasets}

 

 


	[[alternative HTML version deleted]]


From ht @end|ng |rom he@therturner@net  Sat Jan 19 17:05:06 2019
From: ht @end|ng |rom he@therturner@net (Heather Turner)
Date: Sat, 19 Jan 2019 11:05:06 -0500
Subject: [R-pkg-devel] LaTeX warnings on debian builds only
In-Reply-To: <CAO49RG6-Hsogp4qVtHbYNgONpQVrv58i00NiBPEo55xA-UG0VA@mail.gmail.com>
References: <CAO49RG6-Hsogp4qVtHbYNgONpQVrv58i00NiBPEo55xA-UG0VA@mail.gmail.com>
Message-ID: <c1057c27-0b1e-475a-8357-60d59c7964b3@www.fastmail.com>

Hi Adam,

I suspect these two lines in your YAML header are causing trouble

>   %\usepackage[utf8]{inputenc}
>   %\usepackage[table]{xcolor}

- this is LaTeX code, which you shouldn't need if you're producing an HTML vignette.

Also, with more recent versions of R markdown you should use knitr::rmarkdown rather than knitr::knitr as the vignette engine. For an HTML vignette, I'd expect your vignette field to look like this:

vignette: >
  %\VignetteIndexEntry{DEVis}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}

so try updating that block and see if that fixes it.

Best wishes,

Heather


On Fri, Jan 18, 2019, at 3:42 PM, Adam Price wrote:
> Hi,
> 
> I am currently having an issue getting past a warning that's occurring on
> linux based builds for my vignette.  The warning is: "! LaTeX Error: Option
> clash for package xcolor."
> 
> The check results are here:
> *https://win-builder.r-project.org/incoming_pretest/DEVis_1.0.1_20181220_164555/Debian/00check.log
> <https://win-builder.r-project.org/incoming_pretest/DEVis_1.0.1_20181220_164555/Debian/00check.log>*
> 
> Windows and OS X builds work fine, but I don't have access to a debian
> machine that I can reproduce this on.  I currently cannot reproduce this
> issue on my side, and travis-ci checks do not seem to produce this warning
> for linux on ubuntu.  I can only see it currently when submitting an update
> to my package and failing the CRAN auto-checks.
> 
> I have recently changed from PDF vignette to html-based, and am not sure
> why LaTeX packages would even be loading in this case.  I have attempted to
> correct for it based on this post (
> https://github.com/haozhu233/kableExtra/issues/274
> ) which claims the issue is a conflict between kableExtra and xcolor.
> 
> Some relevant sections of code from the vignette might include:
> "
> vignette: |
>   %\VignetteIndexEntry{DEVis}
>   %\usepackage[utf8]{inputenc}
>   %\usepackage[table]{xcolor}
>   %\VignetteEngine{knitr::knitr}
> ---
> 
> ```{r loadData, echo = F, eval = TRUE}
> #load("../data/exampleData.Rda")
> knitr::opts_knit$set(root.dir = '../vignettes/')
> knitr::opts_chunk$set(fig.path='figure/graphics-',
>                  cache.path='cache/graphics-',
>                  fig.align='center',
>                  external=TRUE,
>                  echo=TRUE,
>                  warning=FALSE,
>                  fig.pos='H'
>                 )
>   a4width<- 8.3
>   a4height<- 11.7
> library(kableExtra)
> library(rmarkdown)
> library(knitr)
> options(knitr.table.format = "html")
> options(kableExtra.latex.load_packages = FALSE)
> "
> 
> 
> The full package code can be found here: https://github.com/price0416/DEvis
> 
> I would appreciate any insight anyone can offer into this issue, as I
> cannot update my package until I get to the bottom of this!  Thanks very
> much in advance!
> 
> Best,
> -Adam
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sat Jan 19 23:11:39 2019
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sun, 20 Jan 2019 11:11:39 +1300
Subject: [R-pkg-devel] problems documenting data sets
In-Reply-To: <691701d4afe4$31d2cd50$957867f0$@gvdnet.dk>
References: <691701d4afe4$31d2cd50$957867f0$@gvdnet.dk>
Message-ID: <a1399646-8c26-1d22-643c-870e864b0312@auckland.ac.nz>


It's hard to be sure without seeing your package, but it *sounds* as 
though you have a data set "Brom" (in <package>/data ?) but you have 
*documented* a data set named "brom".  So you should either change the 
name of the data set to "brom" or change your help file to document "Brom".

It is of course entirely possible that I am misunderstanding what is 
going on, in which case I apologise for the noise.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276

On 1/19/19 11:46 PM, Troels Ring wrote:
> Dear friends ? I still get some warning although the package runs just fine.
> 
> checking for missing documentation entries ... WARNING
> 
>    Undocumented data sets:
> 
>      'Cl' 'K' 'Na' 'TOTAL' 'WA' 'INPUT' 'Alb' 'Ca' 'Lact' 'Mg' 'PCO2' 'S1'
> 
>      'Brom' 'pHOBS'
> 
>    All user-level objects in a package should have documentation entries.
> 
>    See chapter 'Writing R documentation files' in the 'Writing R
> 
>    Extensions' manual.
> 
>   
> 
> 0 errors v | 1 warning x | 0 notes v
> 
> Fejl: R CMD check found WARNINGs
> 
> K?rsel stoppet (run stopped)
> 
>   
> 
> But the only place I have  any mentions of brom is here below and in no place I have capital Brom. So what should I make of this?
> 
>   
> 
> \name{brom}
> 
> \alias{brom}
> 
> \docType{data}
> 
> \title{
> 
> Bromic acid data from Glaser et al 2014
> 
> }
> 
> \description{
> 
>    Data to find optimal pK for bromic acid
> 
> }
> 
> \usage{data("brom")}
> 
> \format{
> 
> A workspace.
> 
>    \describe{
> 
>      \item{brom}{Dataframe of Table S4 in Glaser et al.}
> 
>      \item{WA}{List of buffers with list of dissociation constants.}
> 
>    }
> 
> }
> 
> \source{
> 
> Glaser RE et al. Dynamical approach to multiequilibriia problems for mixtures of
> 
> acids and their conjugate bases. J Chem Educ 2014; 91: 1009-1016
> 
> }
> 
> \examples{
> 
> data(brom)
> 
> ## maybe str(brom) ; plot(brom) ...
> 
> }
> 
> \keyword{datasets}


From berryboe@@enkoo| @end|ng |rom hotm@||@com  Sat Jan 19 23:46:42 2019
From: berryboe@@enkoo| @end|ng |rom hotm@||@com (Berry Boessenkool)
Date: Sat, 19 Jan 2019 22:46:42 +0000
Subject: [R-pkg-devel] problems documenting data sets
In-Reply-To: <691701d4afe4$31d2cd50$957867f0$@gvdnet.dk>
References: <691701d4afe4$31d2cd50$957867f0$@gvdnet.dk>
Message-ID: <AM0PR04MB6097C9E20B6F660E116392EDD59D0@AM0PR04MB6097.eurprd04.prod.outlook.com>


I was first thinking there could be an occurence of Brom with a capital B in the package somewhere.
In which case you could run from the current package main directory:

cat("All files in R folder\n", file="AllFiles.R")
for(f in dir("R",full=T)) cat(readLines(f), file="AllFiles.R", sep="\n", append=TRUE)

and search for Brom in that file...
But Rolf is likely right. I was thinking the wrong way around...

Berry

________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Troels Ring <tring at gvdnet.dk>
Sent: Saturday, January 19, 2019 11:46
To: package-develop
Subject: [R-pkg-devel] problems documenting data sets

Dear friends ? I still get some warning although the package runs just fine.

checking for missing documentation entries ... WARNING

  Undocumented data sets:

    'Cl' 'K' 'Na' 'TOTAL' 'WA' 'INPUT' 'Alb' 'Ca' 'Lact' 'Mg' 'PCO2' 'S1'

    'Brom' 'pHOBS'

  All user-level objects in a package should have documentation entries.
[SNIP]



	[[alternative HTML version deleted]]


From tr|ng @end|ng |rom gvdnet@dk  Sun Jan 20 18:45:26 2019
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Sun, 20 Jan 2019 18:45:26 +0100
Subject: [R-pkg-devel] problems documenting data sets
In-Reply-To: kzNyg1BXtwUhzkzO0gM1HP
References: <691701d4afe4$31d2cd50$957867f0$@gvdnet.dk> kzNyg1BXtwUhzkzO0gM1HP
Message-ID: <622701d4b0e7$ed2f48e0$c78ddaa0$@gvdnet.dk>

Thanks a lot - I tried your script but it didn't turn up anything like Brom
but  in one place I had Bromic acid - which I changed to bromic acid to no
avail.

So I continue trying to find out what goes on

BW

Troels

 

Fra: Berry Boessenkool <berryboessenkool at hotmail.com> 
Sendt: 19. januar 2019 23:47
Til: Troels Ring <tring at gvdnet.dk>; R package devel
<r-package-devel at r-project.org>
Emne: Re: [R-pkg-devel] problems documenting data sets

 

 

I was first thinking there could be an occurence of Brom with a capital B in
the package somewhere.

In which case you could run from the current package main directory:

 

cat("All files in R folder\n", file="AllFiles.R")

for(f in dir("R",full=T)) cat(readLines(f), file="AllFiles.R", sep="\n",
append=TRUE)

 

and search for Brom in that file...

But Rolf is likely right. I was thinking the wrong way around...

 

Berry

 

  _____  

From: R-package-devel <r-package-devel-bounces at r-project.org
<mailto:r-package-devel-bounces at r-project.org> > on behalf of Troels Ring
<tring at gvdnet.dk <mailto:tring at gvdnet.dk> >
Sent: Saturday, January 19, 2019 11:46
To: package-develop
Subject: [R-pkg-devel] problems documenting data sets 

 

Dear friends - I still get some warning although the package runs just fine.

checking for missing documentation entries ... WARNING

  Undocumented data sets:

    'Cl' 'K' 'Na' 'TOTAL' 'WA' 'INPUT' 'Alb' 'Ca' 'Lact' 'Mg' 'PCO2' 'S1'

    'Brom' 'pHOBS'

  All user-level objects in a package should have documentation entries.
[SNIP]

  


	[[alternative HTML version deleted]]


From tr|ng @end|ng |rom gvdnet@dk  Sun Jan 20 18:45:26 2019
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Sun, 20 Jan 2019 18:45:26 +0100
Subject: [R-pkg-devel] problems documenting data sets
In-Reply-To: kyq9g17BNwUhzkyqDgM0Kc
References: <691701d4afe4$31d2cd50$957867f0$@gvdnet.dk> kyq9g17BNwUhzkyqDgM0Kc
Message-ID: <622c01d4b0e7$edbfa200$c93ee600$@gvdnet.dk>

Thank you so much - I used the search in files function in RStudio and also looked everywhere as well as I could - but seemingly: no - everywhere only "brom". So since the functions runs as expected and I can make a workable binary package I guess I will just continue improving the functionalities and see if I eventually get a hunch

All best wishes
Troels 

-----Oprindelig meddelelse-----
Fra: Rolf Turner <r.turner at auckland.ac.nz> 
Sendt: 19. januar 2019 23:12
Til: Troels Ring <tring at gvdnet.dk>
Cc: package-develop <r-package-devel at r-project.org>
Emne: Re: [R-pkg-devel] problems documenting data sets


It's hard to be sure without seeing your package, but it *sounds* as though you have a data set "Brom" (in <package>/data ?) but you have
*documented* a data set named "brom".  So you should either change the name of the data set to "brom" or change your help file to document "Brom".

It is of course entirely possible that I am misunderstanding what is going on, in which case I apologise for the noise.

cheers,

Rolf

--
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276

On 1/19/19 11:46 PM, Troels Ring wrote:
> Dear friends ? I still get some warning although the package runs just fine.
> 
> checking for missing documentation entries ... WARNING
> 
>    Undocumented data sets:
> 
>      'Cl' 'K' 'Na' 'TOTAL' 'WA' 'INPUT' 'Alb' 'Ca' 'Lact' 'Mg' 'PCO2' 'S1'
> 
>      'Brom' 'pHOBS'
> 
>    All user-level objects in a package should have documentation entries.
> 
>    See chapter 'Writing R documentation files' in the 'Writing R
> 
>    Extensions' manual.
> 
>   
> 
> 0 errors v | 1 warning x | 0 notes v
> 
> Fejl: R CMD check found WARNINGs
> 
> K rsel stoppet (run stopped)
> 
>   
> 
> But the only place I have  any mentions of brom is here below and in no place I have capital Brom. So what should I make of this?
> 
>   
> 
> \name{brom}
> 
> \alias{brom}
> 
> \docType{data}
> 
> \title{
> 
> Bromic acid data from Glaser et al 2014
> 
> }
> 
> \description{
> 
>    Data to find optimal pK for bromic acid
> 
> }
> 
> \usage{data("brom")}
> 
> \format{
> 
> A workspace.
> 
>    \describe{
> 
>      \item{brom}{Dataframe of Table S4 in Glaser et al.}
> 
>      \item{WA}{List of buffers with list of dissociation constants.}
> 
>    }
> 
> }
> 
> \source{
> 
> Glaser RE et al. Dynamical approach to multiequilibriia problems for 
> mixtures of
> 
> acids and their conjugate bases. J Chem Educ 2014; 91: 1009-1016
> 
> }
> 
> \examples{
> 
> data(brom)
> 
> ## maybe str(brom) ; plot(brom) ...
> 
> }
> 
> \keyword{datasets}


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Sun Jan 20 19:13:42 2019
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Sun, 20 Jan 2019 18:13:42 +0000
Subject: [R-pkg-devel] problems documenting data sets
In-Reply-To: <622c01d4b0e7$edbfa200$c93ee600$@gvdnet.dk>
References: <691701d4afe4$31d2cd50$957867f0$@gvdnet.dk>
 <622c01d4b0e7$edbfa200$c93ee600$@gvdnet.dk>
Message-ID: <DM6PR05MB5212B22A623F988D0F5FB38FF99E0@DM6PR05MB5212.namprd05.prod.outlook.com>

Did you mention where your package source can be downloaded from, e.g., github? Because obviously it is then much easier for people to help.

Martin Morgan

?On 1/20/19, 12:55 PM, "R-package-devel on behalf of Troels Ring" <r-package-devel-bounces at r-project.org on behalf of tring at gvdnet.dk> wrote:

    Thank you so much - I used the search in files function in RStudio and also looked everywhere as well as I could - but seemingly: no - everywhere only "brom". So since the functions runs as expected and I can make a workable binary package I guess I will just continue improving the functionalities and see if I eventually get a hunch
    
    All best wishes
    Troels 
    
    -----Oprindelig meddelelse-----
    Fra: Rolf Turner <r.turner at auckland.ac.nz> 
    Sendt: 19. januar 2019 23:12
    Til: Troels Ring <tring at gvdnet.dk>
    Cc: package-develop <r-package-devel at r-project.org>
    Emne: Re: [R-pkg-devel] problems documenting data sets
    
    
    It's hard to be sure without seeing your package, but it *sounds* as though you have a data set "Brom" (in <package>/data ?) but you have
    *documented* a data set named "brom".  So you should either change the name of the data set to "brom" or change your help file to document "Brom".
    
    It is of course entirely possible that I am misunderstanding what is going on, in which case I apologise for the noise.
    
    cheers,
    
    Rolf
    
    --
    Honorary Research Fellow
    Department of Statistics
    University of Auckland
    Phone: +64-9-373-7599 ext. 88276
    
    On 1/19/19 11:46 PM, Troels Ring wrote:
    > Dear friends ? I still get some warning although the package runs just fine.
    > 
    > checking for missing documentation entries ... WARNING
    > 
    >    Undocumented data sets:
    > 
    >      'Cl' 'K' 'Na' 'TOTAL' 'WA' 'INPUT' 'Alb' 'Ca' 'Lact' 'Mg' 'PCO2' 'S1'
    > 
    >      'Brom' 'pHOBS'
    > 
    >    All user-level objects in a package should have documentation entries.
    > 
    >    See chapter 'Writing R documentation files' in the 'Writing R
    > 
    >    Extensions' manual.
    > 
    >   
    > 
    > 0 errors v | 1 warning x | 0 notes v
    > 
    > Fejl: R CMD check found WARNINGs
    > 
    > K rsel stoppet (run stopped)
    > 
    >   
    > 
    > But the only place I have  any mentions of brom is here below and in no place I have capital Brom. So what should I make of this?
    > 
    >   
    > 
    > \name{brom}
    > 
    > \alias{brom}
    > 
    > \docType{data}
    > 
    > \title{
    > 
    > Bromic acid data from Glaser et al 2014
    > 
    > }
    > 
    > \description{
    > 
    >    Data to find optimal pK for bromic acid
    > 
    > }
    > 
    > \usage{data("brom")}
    > 
    > \format{
    > 
    > A workspace.
    > 
    >    \describe{
    > 
    >      \item{brom}{Dataframe of Table S4 in Glaser et al.}
    > 
    >      \item{WA}{List of buffers with list of dissociation constants.}
    > 
    >    }
    > 
    > }
    > 
    > \source{
    > 
    > Glaser RE et al. Dynamical approach to multiequilibriia problems for 
    > mixtures of
    > 
    > acids and their conjugate bases. J Chem Educ 2014; 91: 1009-1016
    > 
    > }
    > 
    > \examples{
    > 
    > data(brom)
    > 
    > ## maybe str(brom) ; plot(brom) ...
    > 
    > }
    > 
    > \keyword{datasets}
    
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel
    

From tr|ng @end|ng |rom gvdnet@dk  Sun Jan 20 21:58:01 2019
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Sun, 20 Jan 2019 21:58:01 +0100
Subject: [R-pkg-devel] problems documenting data sets
In-Reply-To: lHbNg4KqNwUhzlHbPgNjPY
References: <691701d4afe4$31d2cd50$957867f0$@gvdnet.dk>
 <622c01d4b0e7$edbfa200$c93ee600$@gvdnet.dk> lHbNg4KqNwUhzlHbPgNjPY
Message-ID: <a08f01d4b102$d5afdbb0$810f9310$@gvdnet.dk>

Thank you so much -  this is just the first package I've made so I didn't put it  out yet. Will follow your suggestion next time
BW
Troels

-----Oprindelig meddelelse-----
Fra: Martin Morgan <mtmorgan.bioc at gmail.com> 
Sendt: 20. januar 2019 19:14
Til: Troels Ring <tring at gvdnet.dk>; 'Rolf Turner' <r.turner at auckland.ac.nz>
Cc: 'package-develop' <r-package-devel at r-project.org>
Emne: Re: [R-pkg-devel] problems documenting data sets

Did you mention where your package source can be downloaded from, e.g., github? Because obviously it is then much easier for people to help.

Martin Morgan

?On 1/20/19, 12:55 PM, "R-package-devel on behalf of Troels Ring" <r-package-devel-bounces at r-project.org on behalf of tring at gvdnet.dk> wrote:

    Thank you so much - I used the search in files function in RStudio and also looked everywhere as well as I could - but seemingly: no - everywhere only "brom". So since the functions runs as expected and I can make a workable binary package I guess I will just continue improving the functionalities and see if I eventually get a hunch
    
    All best wishes
    Troels 
    
    -----Oprindelig meddelelse-----
    Fra: Rolf Turner <r.turner at auckland.ac.nz> 
    Sendt: 19. januar 2019 23:12
    Til: Troels Ring <tring at gvdnet.dk>
    Cc: package-develop <r-package-devel at r-project.org>
    Emne: Re: [R-pkg-devel] problems documenting data sets
    
    
    It's hard to be sure without seeing your package, but it *sounds* as though you have a data set "Brom" (in <package>/data ?) but you have
    *documented* a data set named "brom".  So you should either change the name of the data set to "brom" or change your help file to document "Brom".
    
    It is of course entirely possible that I am misunderstanding what is going on, in which case I apologise for the noise.
    
    cheers,
    
    Rolf
    
    --
    Honorary Research Fellow
    Department of Statistics
    University of Auckland
    Phone: +64-9-373-7599 ext. 88276
    
    On 1/19/19 11:46 PM, Troels Ring wrote:
    > Dear friends ? I still get some warning although the package runs just fine.
    > 
    > checking for missing documentation entries ... WARNING
    > 
    >    Undocumented data sets:
    > 
    >      'Cl' 'K' 'Na' 'TOTAL' 'WA' 'INPUT' 'Alb' 'Ca' 'Lact' 'Mg' 'PCO2' 'S1'
    > 
    >      'Brom' 'pHOBS'
    > 
    >    All user-level objects in a package should have documentation entries.
    > 
    >    See chapter 'Writing R documentation files' in the 'Writing R
    > 
    >    Extensions' manual.
    > 
    >   
    > 
    > 0 errors v | 1 warning x | 0 notes v
    > 
    > Fejl: R CMD check found WARNINGs
    > 
    > K rsel stoppet (run stopped)
    > 
    >   
    > 
    > But the only place I have  any mentions of brom is here below and in no place I have capital Brom. So what should I make of this?
    > 
    >   
    > 
    > \name{brom}
    > 
    > \alias{brom}
    > 
    > \docType{data}
    > 
    > \title{
    > 
    > Bromic acid data from Glaser et al 2014
    > 
    > }
    > 
    > \description{
    > 
    >    Data to find optimal pK for bromic acid
    > 
    > }
    > 
    > \usage{data("brom")}
    > 
    > \format{
    > 
    > A workspace.
    > 
    >    \describe{
    > 
    >      \item{brom}{Dataframe of Table S4 in Glaser et al.}
    > 
    >      \item{WA}{List of buffers with list of dissociation constants.}
    > 
    >    }
    > 
    > }
    > 
    > \source{
    > 
    > Glaser RE et al. Dynamical approach to multiequilibriia problems for 
    > mixtures of
    > 
    > acids and their conjugate bases. J Chem Educ 2014; 91: 1009-1016
    > 
    > }
    > 
    > \examples{
    > 
    > data(brom)
    > 
    > ## maybe str(brom) ; plot(brom) ...
    > 
    > }
    > 
    > \keyword{datasets}
    
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel
    


From ju||en@ch|quet @end|ng |rom gm@||@com  Mon Jan 21 07:52:09 2019
From: ju||en@ch|quet @end|ng |rom gm@||@com (julien chiquet)
Date: Mon, 21 Jan 2019 07:52:09 +0100
Subject: [R-pkg-devel] Failure at pretest stage on Debian CRAN server due to
 system requirements (nlopt)
Message-ID: <CACeAVJkuajRdjh+jJX+F=fuOB+zGMnBaRFWdp_BPd6kL0Hd=6w@mail.gmail.com>

Hi,

I am trying to submit a package to CRAN that fails during the pretest
process on Debian.

I use the some C++ code that interfaces to the nlopt optimization
library with Rcpp/RcppArmadillo. Thus, my package requires a system
version of nlopt that can be installed via the deb package
libnlopt-dev (I added this to the SystemRequirements field).

I use a configure script and pkg-config to retrieve the (hopefully)
appropriate compiler flags which I then send to src/Makevars
NLOPT_LIBS=`pkg-config --libs ${PKG_CONFIG_NAME}`
NLOPT_FLAG=`pkg-config --cflags ${PKG_CONFIG_NAME}`

This approach works on my system (Ubuntu 18.04, R 3.5.2) and on Travis
(linux and mac OS), but fails on the Debian CRAN server :
https://win-builder.r-project.org/incoming_pretest/PLNmodels_0.7_20190119_161032/Debian/00install.out

I added some verbosity to check that the flags were correctly exported
on CRAN servers, and they seems alright to me: at least, a version of
nlopt is found on the system (see below, NLOPT_LIBS=-lnlopt -lm).
However, the <nlopt.hpp> is not found latter on...

Any help would be greatly appreciated. Thank for taking the time to read this.

* installing *source* package ?PLNmodels? ...
Using NLOPT_LIBS=-lnlopt -lm
Using NLOPT_FLAG=
** libs
g++-8  -std=gnu++11 -I"/home/hornik/tmp/R/include" -DNDEBUG -fopenmp
-I"/home/hornik/lib/R/Library/3.6/x86_64-linux-gnu/Rcpp/include"
-I"/home/hornik/lib/R/Library/3.6/x86_64-linux-gnu/RcppArmadillo/include"
-I/usr/local/include -fopenmp  -fpic  -g -O2 -Wall -pedantic
-mtune=native -c RcppExports.cpp -o RcppExports.o
g++-8  -std=gnu++11 -I"/home/hornik/tmp/R/include" -DNDEBUG -fopenmp
-I"/home/hornik/lib/R/Library/3.6/x86_64-linux-gnu/Rcpp/include"
-I"/home/hornik/lib/R/Library/3.6/x86_64-linux-gnu/RcppArmadillo/include"
-I/usr/local/include -fopenmp  -fpic  -g -O2 -Wall -pedantic
-mtune=native -c call_nlopt_PLN_VE.cpp -o call_nlopt_PLN_VE.o
In file included from call_nlopt_PLN_VE.cpp:6:
utils.h:5:10: fatal error: nlopt.hpp: No such file or directory
 #include <nlopt.hpp>
          ^~~~~~~~~~~
compilation terminated.
make: *** [/home/hornik/tmp/R/etc/Makeconf:173: call_nlopt_PLN_VE.o] Error 1
ERROR: compilation failed for package ?PLNmodels?
* removing ?/srv/hornik/tmp/CRAN/PLNmodels.Rcheck/PLNmodels?

Regards,

Julien Chiquet
http://julien.cremeriefamily.info
mel: julien.chiquet at inra.fr
tel: +33(0)1 44 08 16 73


From tr|ng @end|ng |rom gvdnet@dk  Tue Jan 22 15:58:47 2019
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Tue, 22 Jan 2019 15:58:47 +0100
Subject: [R-pkg-devel] how is RData in /data understood
Message-ID: <78a701d4b262$fa933ec0$efb9bc40$@gvdnet.dk>

Dear friends - I noticed in Hadley Wickham's comprehensive book on packages
under "exported data" that the .RData file in data directory is "containing
a single object (with the same name as the file)". However, in the "Writing
R extensions" 1.1.6 - when discussing images created by save there is no
statement I can see that the RData should only contain a single object? Is
that common knowledge?

I got a  problem when adding the code below to an otherwise well working
datasets.R in R directory - wonder if it is connected to the above since
Baaeza.RData contains multiple objects.

 

#' routine for multiequilibrium problems

#'

#' @description Data from Baeza-Baeza et al.

#'

#' @format A worksheet.

#' \describe{

#'  \item{Na}{Strong ions}

#' }

#'

#' @examples

#' data(Baeza)

#'

"Baeza"

 

And even though I have Baeza.RData in the /data directory ctrl-shift-B
stopped immediately with

Updating acidcharge documentation

Loading acidcharge

error: 'baeza' is not exported object from 'namespace:acidcharge'

run stopped

 

Exited with status 1

Best wishes

Troels


	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Jan 22 17:59:43 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 22 Jan 2019 17:59:43 +0100
Subject: [R-pkg-devel] how is RData in /data understood
In-Reply-To: <78a701d4b262$fa933ec0$efb9bc40$@gvdnet.dk>
References: <78a701d4b262$fa933ec0$efb9bc40$@gvdnet.dk>
Message-ID: <3e49c171-158e-b4d0-fe29-4227eacb01d7@statistik.tu-dortmund.de>

You have to document each data object, but there can be multiple objects 
in an .RData file.

So for foo.RData the call data(foo) could make several objects 
available, each of which has to be docuemnted.

Not sure about Hadley's book, nor roxygen, nor RSTudio, as I'd do all 
this in plain R.

Best,
Uwe Ligges


On 22.01.2019 15:58, Troels Ring wrote:
> Dear friends - I noticed in Hadley Wickham's comprehensive book on packages
> under "exported data" that the .RData file in data directory is "containing
> a single object (with the same name as the file)". However, in the "Writing
> R extensions" 1.1.6 - when discussing images created by save there is no
> statement I can see that the RData should only contain a single object? Is
> that common knowledge?
> 
> I got a  problem when adding the code below to an otherwise well working
> datasets.R in R directory - wonder if it is connected to the above since
> Baaeza.RData contains multiple objects.
> 
>   
> 
> #' routine for multiequilibrium problems
> 
> #'
> 
> #' @description Data from Baeza-Baeza et al.
> 
> #'
> 
> #' @format A worksheet.
> 
> #' \describe{
> 
> #'  \item{Na}{Strong ions}
> 
> #' }
> 
> #'
> 
> #' @examples
> 
> #' data(Baeza)
> 
> #'
> 
> "Baeza"
> 
>   
> 
> And even though I have Baeza.RData in the /data directory ctrl-shift-B
> stopped immediately with
> 
> Updating acidcharge documentation
> 
> Loading acidcharge
> 
> error: 'baeza' is not exported object from 'namespace:acidcharge'
> 
> run stopped
> 
>   
> 
> Exited with status 1
> 
> Best wishes
> 
> Troels
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @|v@rtnotr@b @end|ng |rom gm@||@com  Wed Jan 23 09:05:01 2019
From: @|v@rtnotr@b @end|ng |rom gm@||@com (travis barton)
Date: Wed, 23 Jan 2019 00:05:01 -0800
Subject: [R-pkg-devel] Keras not working with R
Message-ID: <BFCBB2E5-D9AD-48E8-8F64-16C8BDE84BA8@gmail.com>

> I am submitting a package to CRAN and recently got the email rejection saying that while it passed the mac check, it failed the Windows and Debian check. It seems to be a problem with finding keras (Debian) and having the wrong architecture (windows). Do I need to tell CRAN to install a different keras? Or a different python? Or something else?
> Attached are the error files.
> 
> 
Windows: https://win-builder.r-project.org/incoming_pretest/LilRhino_0.1.0_20190123_075933/Windows/00check.log <https://win-builder.r-project.org/incoming_pretest/LilRhino_0.1.0_20190123_075933/Windows/00check.log>
Debian: https://win-builder.r-project.org/incoming_pretest/LilRhino_0.1.0_20190123_075933/Debian/00check.log <https://win-builder.r-project.org/incoming_pretest/LilRhino_0.1.0_20190123_075933/Debian/00check.log>
	[[alternative HTML version deleted]]


From jw|j||e|@ @end|ng |rom bno@@c@be  Thu Jan 24 14:57:36 2019
From: jw|j||e|@ @end|ng |rom bno@@c@be (Jan Wijffels)
Date: Thu, 24 Jan 2019 14:57:36 +0100
Subject: [R-pkg-devel] use g++ instead of clang++ on Mac OS
Message-ID: <CAJ9GNak=iid2t7EbS6J66Cs4j2tj3Y_sc4ODbvEtiB9JYy6vqQ@mail.gmail.com>

 Hi,

I'm trying to fix an issue with the ruimtehol R package
https://github.com/bnosac/ruimtehol on Mac OS. The package contains C++
code following the C++11 standard. The package is built on Mac OS with
clang++ but I would like to compile it with g++ instead.

The manual on R extensions at
https://cran.r-project.org/doc/manuals/R-exts.html#Using-C_002b_002b11-code
mentions that

> It is possible to specify ?CXX11? to be a distinct compiler just for
> C++11?using packages, e.g. g++ on Solaris.

I tried to set such a directive in my src/Makevars file but appartently
failed to set it correctly. How do I set in the src/Makevars such that the
compilation is done using g++ instead of clang++
My src/Makevars looks like this. I appreciate any help on this matter.

CXX_STD = CXX11
PKG_LIBS = -pthread
PKG_CPPFLAGS = -DSTRICT_R_HEADERS -DBOOST_NO_AUTO_PTR -include
compliance.h $(SHLIB_PTHREAD_FLAGS) -I./Starspace/src

SOURCES = Starspace/src/utils/args.cpp
Starspace/src/utils/normalize.cpp Starspace/src/utils/utils.cpp
SOURCES += Starspace/src/data.cpp Starspace/src/dict.cpp
Starspace/src/doc_data.cpp Starspace/src/doc_parser.cpp
Starspace/src/model.cpp Starspace/src/parser.cpp
Starspace/src/proj.cpp Starspace/src/starspace.cpp
SOURCES += rcpp_textspace.cpp
SOURCES += compliance.cpp
SOURCES += RcppExports.cpp

OBJECTS = $(SOURCES:.cpp=.o)

.PHONY: all

all: $(SHLIB); rm -f $(OBJECTS)

thank you,
Jan

Jan Wijffels
Statistician
www.bnosac.be  | +32 486 611708

	[[alternative HTML version deleted]]


From r@||@@tubner @end|ng |rom d@q@n@@com  Thu Jan 24 16:02:31 2019
From: r@||@@tubner @end|ng |rom d@q@n@@com (Ralf Stubner)
Date: Thu, 24 Jan 2019 16:02:31 +0100
Subject: [R-pkg-devel] use g++ instead of clang++ on Mac OS
In-Reply-To: <CAJ9GNak=iid2t7EbS6J66Cs4j2tj3Y_sc4ODbvEtiB9JYy6vqQ@mail.gmail.com>
References: <CAJ9GNak=iid2t7EbS6J66Cs4j2tj3Y_sc4ODbvEtiB9JYy6vqQ@mail.gmail.com>
Message-ID: <2073c8aa-600f-2a34-1201-5b20dcbccf1d@daqana.com>

> The manual on R extensions at
> https://cran.r-project.org/doc/manuals/R-exts.html#Using-C_002b_002b11-code
> mentions that
> 
>> It is possible to specify ?CXX11? to be a distinct compiler just for
>> C++11?using packages, e.g. g++ on Solaris.
> 
> I tried to set such a directive in my src/Makevars file but appartently
> failed to set it correctly. How do I set in the src/Makevars such that the
> compilation is done using g++ instead of clang++

It is not possible to alter the compiler via src/Makevars, c.f.
https://stat.ethz.ch/pipermail/r-package-devel/2017q4/002087.html. You
have to use $HOME/.R/Makevars or $R_HOME/etc/Makeconf for that.

Greetings
Ralf

-- 
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190124/be780333/attachment.sig>

From jw|j||e|@ @end|ng |rom bno@@c@be  Thu Jan 24 16:50:51 2019
From: jw|j||e|@ @end|ng |rom bno@@c@be (Jan Wijffels)
Date: Thu, 24 Jan 2019 16:50:51 +0100
Subject: [R-pkg-devel] use g++ instead of clang++ on Mac OS
In-Reply-To: <2073c8aa-600f-2a34-1201-5b20dcbccf1d@daqana.com>
References: <CAJ9GNak=iid2t7EbS6J66Cs4j2tj3Y_sc4ODbvEtiB9JYy6vqQ@mail.gmail.com>
 <2073c8aa-600f-2a34-1201-5b20dcbccf1d@daqana.com>
Message-ID: <CAJ9GNa=NGc7gP1ev2J_DjE-23UHe-4OEXGJ+_gmA9LwN-gBd_Q@mail.gmail.com>

Ralf,

Thank you for the input. Does that mean also using a configure script would
not work to make it use g++ instead of clang++ on Mac OS?

Jan

Jan Wijffels
Statistician
www.bnosac.be  | +32 486 611708


On Thu, 24 Jan 2019 at 16:02, Ralf Stubner <ralf.stubner at daqana.com> wrote:

> > The manual on R extensions at
> >
> https://cran.r-project.org/doc/manuals/R-exts.html#Using-C_002b_002b11-code
> > mentions that
> >
> >> It is possible to specify ?CXX11? to be a distinct compiler just for
> >> C++11?using packages, e.g. g++ on Solaris.
> >
> > I tried to set such a directive in my src/Makevars file but appartently
> > failed to set it correctly. How do I set in the src/Makevars such that
> the
> > compilation is done using g++ instead of clang++
>
> It is not possible to alter the compiler via src/Makevars, c.f.
> https://stat.ethz.ch/pipermail/r-package-devel/2017q4/002087.html. You
> have to use $HOME/.R/Makevars or $R_HOME/etc/Makeconf for that.
>
> Greetings
> Ralf
>
> --
> Ralf Stubner
> Senior Software Engineer / Trainer
>
> daqana GmbH
> Dortustra?e 48
> 14467 Potsdam
>
> T: +49 331 23 61 93 11
> F: +49 331 23 61 93 90
> M: +49 162 20 91 196
> Mail: ralf.stubner at daqana.com
>
> Sitz: Potsdam
> Register: AG Potsdam HRB 27966
> Ust.-IdNr.: DE300072622
> Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From r@||@@tubner @end|ng |rom d@q@n@@com  Thu Jan 24 18:57:16 2019
From: r@||@@tubner @end|ng |rom d@q@n@@com (Ralf Stubner)
Date: Thu, 24 Jan 2019 18:57:16 +0100
Subject: [R-pkg-devel] use g++ instead of clang++ on Mac OS
In-Reply-To: <CAJ9GNa=NGc7gP1ev2J_DjE-23UHe-4OEXGJ+_gmA9LwN-gBd_Q@mail.gmail.com>
References: <CAJ9GNak=iid2t7EbS6J66Cs4j2tj3Y_sc4ODbvEtiB9JYy6vqQ@mail.gmail.com>
 <2073c8aa-600f-2a34-1201-5b20dcbccf1d@daqana.com>
 <CAJ9GNa=NGc7gP1ev2J_DjE-23UHe-4OEXGJ+_gmA9LwN-gBd_Q@mail.gmail.com>
Message-ID: <4dfc4bbb-71f5-b3ab-d3e3-7318567ef69b@daqana.com>

On 24.01.19 16:50, Jan Wijffels wrote:
> Thank you for the input. Does that mean also using a configure script
> would not work to make it use g++ instead of clang++ on Mac OS?
Yes, that also affects configure scripts. You might achieve this
compiler switch by using src/Makefile, since that fie is included after
R_HOME/etc/Makeconf. But I have never tried that and it is strongly
discouraged in WRE. I would expect that a package doing something like
that will not pass the CRAN checks.

Greetings
Ralf

-- 
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190124/9b5c6f61/attachment.sig>

From bbo|ker @end|ng |rom gm@||@com  Thu Jan 24 22:24:44 2019
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Thu, 24 Jan 2019 16:24:44 -0500
Subject: [R-pkg-devel] r-hub failing?
Message-ID: <be92eb4f-10fc-37fa-af47-f54515dc7f95@math.mcmaster.ca>

Should I expect r-hub to Just Work at this point?  Trying to check my
package leads to failures on all platforms tried, either

*  due to missing packages (pretty mainstream stuff: Packages required
but not available: 'minqa', 'nloptr', 'Rcpp', 'RcppEigen'; Packages
suggested but not available: 'knitr', 'PKPDmodels', 'MEMSS', 'testthat',
'ggplot2', 'mlmRev', 'optimx', 'gamm4', 'pbkrtest', 'HSAUR2',
'numDeriv', 'car', 'dfoptim'...)

* or to some infrastructure-looking thing I don't understand

  3#> java.io.IOException: remote file operation failed:
/home/ubuntu/workspace/lme4_1.1-20.tar.gz-638a824bdab4414ba900100e213f521a
at hudson.remoting.Channel at 5db12a22:10.2.0.6-3a182429:
hudson.remoting.ChannelClosedException: channel is already closed

  I've looked all the sensible places I can think of to see if these are
known issues.

https://github.com/r-hub/rhub
https://r-hub.github.io/rhub/https://r-hub.github.io/rhub/
https://github.com/r-hub/rhub/issues

  I'm happy to post an issue, but I'm not really sure whether I should
expect transient glitches like this/try again tomorrow ... happy to hear
from others with experience and/or inside knowledge.

    cheers
     Ben Bolker


===
Status pages (I don't know if these are publicly viewable and/or ephemeral):

 http://builder.r-hub.io/status/lme4_1.1-20.tar.gz-c34690938fa14769926eb2a29388e9b9

http://builder.r-hub.io/status/lme4_1.1-20.tar.gz-af3ff280c88d459ab47782f63bddf3dc

http://builder.r-hub.io/status/lme4_1.1-20.tar.gz-638a824bdab4414ba900100e213f521a

http://builder.r-hub.io/status/lme4_1.1-20.tar.gz-af370758896a4b5b85b3dc51944e3419


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu Jan 24 23:09:38 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 24 Jan 2019 22:09:38 +0000
Subject: [R-pkg-devel] r-hub failing?
In-Reply-To: <be92eb4f-10fc-37fa-af47-f54515dc7f95@math.mcmaster.ca>
References: <be92eb4f-10fc-37fa-af47-f54515dc7f95@math.mcmaster.ca>
Message-ID: <CABtg=KkbQdxKUVhrNY5JU9ue-Lrb=MMkBRjNYTiw1P62gwi5YQ@mail.gmail.com>

Hi Ben,

the first error is because of GitHub rate limiting, I'll fix it soon, please see
https://github.com/r-hub/rhub/issues/193

The second should be temporary, some hiccup in the internal scheduler,
please let me know if it comes up again.

Gabor

On Thu, Jan 24, 2019 at 9:41 PM Ben Bolker <bbolker at gmail.com> wrote:
>
> Should I expect r-hub to Just Work at this point?  Trying to check my
> package leads to failures on all platforms tried, either
>
> *  due to missing packages (pretty mainstream stuff: Packages required
> but not available: 'minqa', 'nloptr', 'Rcpp', 'RcppEigen'; Packages
> suggested but not available: 'knitr', 'PKPDmodels', 'MEMSS', 'testthat',
> 'ggplot2', 'mlmRev', 'optimx', 'gamm4', 'pbkrtest', 'HSAUR2',
> 'numDeriv', 'car', 'dfoptim'...)
>
> * or to some infrastructure-looking thing I don't understand
>
>   3#> java.io.IOException: remote file operation failed:
> /home/ubuntu/workspace/lme4_1.1-20.tar.gz-638a824bdab4414ba900100e213f521a
> at hudson.remoting.Channel at 5db12a22:10.2.0.6-3a182429:
> hudson.remoting.ChannelClosedException: channel is already closed
>
>   I've looked all the sensible places I can think of to see if these are
> known issues.
>
> https://github.com/r-hub/rhub
> https://r-hub.github.io/rhub/https://r-hub.github.io/rhub/
> https://github.com/r-hub/rhub/issues
>
>   I'm happy to post an issue, but I'm not really sure whether I should
> expect transient glitches like this/try again tomorrow ... happy to hear
> from others with experience and/or inside knowledge.
>
>     cheers
>      Ben Bolker
>
>
> ===
> Status pages (I don't know if these are publicly viewable and/or ephemeral):
>
>  http://builder.r-hub.io/status/lme4_1.1-20.tar.gz-c34690938fa14769926eb2a29388e9b9
>
> http://builder.r-hub.io/status/lme4_1.1-20.tar.gz-af3ff280c88d459ab47782f63bddf3dc
>
> http://builder.r-hub.io/status/lme4_1.1-20.tar.gz-638a824bdab4414ba900100e213f521a
>
> http://builder.r-hub.io/status/lme4_1.1-20.tar.gz-af370758896a4b5b85b3dc51944e3419
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From tr|ng @end|ng |rom gvdnet@dk  Fri Jan 25 09:50:54 2019
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Fri, 25 Jan 2019 09:50:54 +0100
Subject: [R-pkg-devel] submitting to github
Message-ID: <7e8501d4b48b$14f4d330$3ede7990$@gvdnet.dk>

Dear friends - I'm sorry to bother but seem to be unable to interact
constructively with github. 

 

I try to follow the instructions from Hadley (thanks!!!!) - i.e. I have a
small trial-project which functions well. Since I have tried many times I
start from shell with

rm -rf .git

and then select version control using git (tools, project options,git/svn) -
and origin is still marked as "none" after restarting RStudio. 

Then from shell again: git init

Yielding

Initialized empty Git repository in
C:/Users/Troels/Dropbox/Rown/ABCharge/.git/

Rstudio restarted, package reopened: origin still "none"

Git panel appears OK.

 

Now from github: add new repository (non present after prior deletions!)

Named as package name - repeated in description - repository created

 

Shell opened from RStudio

git remote add origin https://github.com/troelsring/ABCharge.git  - works
without problems - an origin seems correctly accepted in RStudio - but then:

git push -u origin master  - results in:

 

error: src refspec master does not match any.

error: failed to push some refs to
'https://github.com/troelsring/ABCharge.git' below in red

 

I seem (also!) to have problems with the SSH keys - Rstudio marks that I
have a key in c:/Users/Troels/.ssh/id_rsa - 

but when I run file.exists("~/.ssh/id_rsa.pub")
[1] FALSE -  Is returned - but that is not the issue I guess? I have anyway
made a public key as suggested.
 
I have spent hours seeking on the many pages for explanation for this
probably simple problem.
All best
Troels

 

 


	[[alternative HTML version deleted]]


From @me @end|ng |rom |y@|k@com  Fri Jan 25 09:59:20 2019
From: @me @end|ng |rom |y@|k@com (=?UTF-8?Q?Stefan_McKinnon_H=C3=B8j=2DEdwards?=)
Date: Fri, 25 Jan 2019 09:59:20 +0100
Subject: [R-pkg-devel] submitting to github
In-Reply-To: <7e8501d4b48b$14f4d330$3ede7990$@gvdnet.dk>
References: <7e8501d4b48b$14f4d330$3ede7990$@gvdnet.dk>
Message-ID: <CAHJFP8Q6evbZ2M9mmEKmyn5a+qbEqD5yVCT7GDpE9zsAr5gxCA@mail.gmail.com>

Hej Troels,

What exactly are you trying to acheive here? I.e., are you trying to 1) put
a new project onto github, or 2) copy a repository on github to your local
computer, or 3) do as 2) and then update it your current modifications?

Stefan McKinnon H?j-Edwards
Mobile: (+45) 2888 6598


Den fre. 25. jan. 2019 kl. 09.51 skrev Troels Ring <tring at gvdnet.dk>:

> Dear friends - I'm sorry to bother but seem to be unable to interact
> constructively with github.
>
>
>
> I try to follow the instructions from Hadley (thanks!!!!) - i.e. I have a
> small trial-project which functions well. Since I have tried many times I
> start from shell with
>
> rm -rf .git
>
> and then select version control using git (tools, project options,git/svn)
> -
> and origin is still marked as "none" after restarting RStudio.
>
> Then from shell again: git init
>
> Yielding
>
> Initialized empty Git repository in
> C:/Users/Troels/Dropbox/Rown/ABCharge/.git/
>
> Rstudio restarted, package reopened: origin still "none"
>
> Git panel appears OK.
>
>
>
> Now from github: add new repository (non present after prior deletions!)
>
> Named as package name - repeated in description - repository created
>
>
>
> Shell opened from RStudio
>
> git remote add origin https://github.com/troelsring/ABCharge.git  - works
> without problems - an origin seems correctly accepted in RStudio - but
> then:
>
> git push -u origin master  - results in:
>
>
>
> error: src refspec master does not match any.
>
> error: failed to push some refs to
> 'https://github.com/troelsring/ABCharge.git' below in red
>
>
>
> I seem (also!) to have problems with the SSH keys - Rstudio marks that I
> have a key in c:/Users/Troels/.ssh/id_rsa -
>
> but when I run file.exists("~/.ssh/id_rsa.pub")
> [1] FALSE -  Is returned - but that is not the issue I guess? I have anyway
> made a public key as suggested.
>
> I have spent hours seeking on the many pages for explanation for this
> probably simple problem.
> All best
> Troels
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From tr|ng @end|ng |rom gvdnet@dk  Fri Jan 25 10:19:03 2019
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Fri, 25 Jan 2019 10:19:03 +0100
Subject: [R-pkg-devel] submitting to github
In-Reply-To: mxKmgTHNWtXDimxKogt3kF
References: <7e8501d4b48b$14f4d330$3ede7990$@gvdnet.dk> mxKmgTHNWtXDimxKogt3kF
Message-ID: <b7ef01d4b48f$03852f10$0a8f8d30$@gvdnet.dk>

Hi Stefan ? thanks for the question: I have a newly developed package which I need to have on github for a publication. So, while there still a minor problems in the package as it is, I started to trying to interact with github so really I am trying to put a working package onto github. 

All best

Troels

 

Fra: Stefan McKinnon H?j-Edwards <sme at iysik.com> 
Sendt: 25. januar 2019 09:59
Til: Troels Ring <tring at gvdnet.dk>; package-develop <r-package-devel at r-project.org>
Emne: Re: [R-pkg-devel] submitting to github

 

Hej Troels,

 

What exactly are you trying to acheive here? I.e., are you trying to 1) put a new project onto github, or 2) copy a repository on github to your local computer, or 3) do as 2) and then update it your current modifications?




Stefan McKinnon H?j-Edwards

Mobile: (+45) 2888 6598

 

 

Den fre. 25. jan. 2019 kl. 09.51 skrev Troels Ring <tring at gvdnet.dk <mailto:tring at gvdnet.dk> >:

Dear friends - I'm sorry to bother but seem to be unable to interact
constructively with github. 



I try to follow the instructions from Hadley (thanks!!!!) - i.e. I have a
small trial-project which functions well. Since I have tried many times I
start from shell with

rm -rf .git

and then select version control using git (tools, project options,git/svn) -
and origin is still marked as "none" after restarting RStudio. 

Then from shell again: git init

Yielding

Initialized empty Git repository in
C:/Users/Troels/Dropbox/Rown/ABCharge/.git/

Rstudio restarted, package reopened: origin still "none"

Git panel appears OK.



Now from github: add new repository (non present after prior deletions!)

Named as package name - repeated in description - repository created



Shell opened from RStudio

git remote add origin https://github.com/troelsring/ABCharge.git  - works
without problems - an origin seems correctly accepted in RStudio - but then:

git push -u origin master  - results in:



error: src refspec master does not match any.

error: failed to push some refs to
'https://github.com/troelsring/ABCharge.git' below in red



I seem (also!) to have problems with the SSH keys - Rstudio marks that I
have a key in c:/Users/Troels/.ssh/id_rsa - 

but when I run file.exists("~/.ssh/id_rsa.pub")
[1] FALSE -  Is returned - but that is not the issue I guess? I have anyway
made a public key as suggested.

I have spent hours seeking on the many pages for explanation for this
probably simple problem.
All best
Troels






        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>  mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From Jor|@@Mey@ @end|ng |rom ugent@be  Fri Jan 25 11:17:49 2019
From: Jor|@@Mey@ @end|ng |rom ugent@be (Joris Meys)
Date: Fri, 25 Jan 2019 11:17:49 +0100
Subject: [R-pkg-devel] submitting to github
In-Reply-To: <b7ef01d4b48f$03852f10$0a8f8d30$@gvdnet.dk>
References: <7e8501d4b48b$14f4d330$3ede7990$@gvdnet.dk>
 <b7ef01d4b48f$03852f10$0a8f8d30$@gvdnet.dk>
Message-ID: <CAO1zAVa+0TzhcX1qKMAvC_qmRvhQ2DUo3se1L8Doz+RWV65ziQ@mail.gmail.com>

Hi Troels,

origin: none means that git created a local repository but didn't link it
to a github account yet. If you're not that familiar with git, I suggest
you take a look at Github Desktop. We use that with our students, and even
I still use it sometimes. Github Desktop allows you to publish a local
repository to github with one click. You just have to set your credentials
after installing.

More info on adding a remote through shell :
https://help.github.com/articles/adding-an-existing-project-to-github-using-the-command-line/
More info on Github Desktop : https://desktop.github.com/

Hope this helps
Cheers
Joris

On Fri, Jan 25, 2019 at 10:22 AM Troels Ring <tring at gvdnet.dk> wrote:

> Hi Stefan ? thanks for the question: I have a newly developed package
> which I need to have on github for a publication. So, while there still a
> minor problems in the package as it is, I started to trying to interact
> with github so really I am trying to put a working package onto github.
>
> All best
>
> Troels
>
>
>
> Fra: Stefan McKinnon H?j-Edwards <sme at iysik.com>
> Sendt: 25. januar 2019 09:59
> Til: Troels Ring <tring at gvdnet.dk>; package-develop <
> r-package-devel at r-project.org>
> Emne: Re: [R-pkg-devel] submitting to github
>
>
>
> Hej Troels,
>
>
>
> What exactly are you trying to acheive here? I.e., are you trying to 1)
> put a new project onto github, or 2) copy a repository on github to your
> local computer, or 3) do as 2) and then update it your current
> modifications?
>
>
>
>
> Stefan McKinnon H?j-Edwards
>
> Mobile: (+45) 2888 6598
>
>
>
>
>
> Den fre. 25. jan. 2019 kl. 09.51 skrev Troels Ring <tring at gvdnet.dk
> <mailto:tring at gvdnet.dk> >:
>
> Dear friends - I'm sorry to bother but seem to be unable to interact
> constructively with github.
>
>
>
> I try to follow the instructions from Hadley (thanks!!!!) - i.e. I have a
> small trial-project which functions well. Since I have tried many times I
> start from shell with
>
> rm -rf .git
>
> and then select version control using git (tools, project options,git/svn)
> -
> and origin is still marked as "none" after restarting RStudio.
>
> Then from shell again: git init
>
> Yielding
>
> Initialized empty Git repository in
> C:/Users/Troels/Dropbox/Rown/ABCharge/.git/
>
> Rstudio restarted, package reopened: origin still "none"
>
> Git panel appears OK.
>
>
>
> Now from github: add new repository (non present after prior deletions!)
>
> Named as package name - repeated in description - repository created
>
>
>
> Shell opened from RStudio
>
> git remote add origin https://github.com/troelsring/ABCharge.git  - works
> without problems - an origin seems correctly accepted in RStudio - but
> then:
>
> git push -u origin master  - results in:
>
>
>
> error: src refspec master does not match any.
>
> error: failed to push some refs to
> 'https://github.com/troelsring/ABCharge.git' below in red
>
>
>
> I seem (also!) to have problems with the SSH keys - Rstudio marks that I
> have a key in c:/Users/Troels/.ssh/id_rsa -
>
> but when I run file.exists("~/.ssh/id_rsa.pub")
> [1] FALSE -  Is returned - but that is not the issue I guess? I have anyway
> made a public key as suggested.
>
> I have spent hours seeking on the many pages for explanation for this
> probably simple problem.
> All best
> Troels
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From m@rt|n@@m|th @end|ng |rom durh@m@@c@uk  Fri Jan 25 11:45:04 2019
From: m@rt|n@@m|th @end|ng |rom durh@m@@c@uk (SMITH, MARTIN R.)
Date: Fri, 25 Jan 2019 10:45:04 +0000
Subject: [R-pkg-devel] submitting to github
In-Reply-To: <CAO1zAVa+0TzhcX1qKMAvC_qmRvhQ2DUo3se1L8Doz+RWV65ziQ@mail.gmail.com>
References: <7e8501d4b48b$14f4d330$3ede7990$@gvdnet.dk>
 <b7ef01d4b48f$03852f10$0a8f8d30$@gvdnet.dk>
 <CAO1zAVa+0TzhcX1qKMAvC_qmRvhQ2DUo3se1L8Doz+RWV65ziQ@mail.gmail.com>
Message-ID: <CANotEPuPUQGLjQCK96YFjMAZxhGw4FrnLqmrismf2wSPEmQCBA@mail.gmail.com>

Hi Troels,

This probably doesn't score points for best practice, but if you only need to post the files to GitHub, you could always set up a new repository on github.com<http://github.com> and simply drag and drop the relevant files from your computer into the browser window.

- Martin

--

Martin R. Smith
Assistant Professor in Palaeontology
Department of Earth Sciences
Durham University
Mountjoy Site, South Road
Durham DH1 3LE

T: +44 191 334 2320
M: +44 774 353 7510
E: martin.smith at durham.ac.uk<mailto:martin.smith at durham.ac.uk>
Skype: martin--smith

durham.ac.uk/earth.sciences/staff/academic/?id=14260<http://durham.ac.uk/earth.sciences/staff/academic/?id=14260>
twitter.com/PalaeoSmith<http://twitter.com/PalaeoSmith>

The information in this e-mail and any attachments is confidential. It is intended solely for the addressee or addressees. If you are not the intended recipient please delete the message and any attachments and notify the sender of mis-delivery. Any use or disclosure of the contents of either is unauthorised and may be unlawful.
Although steps have been taken to ensure that this e-mail and any attachments are free from any virus, we advise the recipient to ensure they are indeed virus free. All liability for viruses is excluded to the fullest extent permitted by law.


On Fri, 25 Jan 2019 at 10:17, Joris Meys <Joris.Meys at ugent.be<mailto:Joris.Meys at ugent.be>> wrote:
Hi Troels,

origin: none means that git created a local repository but didn't link it
to a github account yet. If you're not that familiar with git, I suggest
you take a look at Github Desktop. We use that with our students, and even
I still use it sometimes. Github Desktop allows you to publish a local
repository to github with one click. You just have to set your credentials
after installing.

More info on adding a remote through shell :
https://help.github.com/articles/adding-an-existing-project-to-github-using-the-command-line/
More info on Github Desktop : https://desktop.github.com/

Hope this helps
Cheers
Joris

On Fri, Jan 25, 2019 at 10:22 AM Troels Ring <tring at gvdnet.dk<mailto:tring at gvdnet.dk>> wrote:

> Hi Stefan ? thanks for the question: I have a newly developed package
> which I need to have on github for a publication. So, while there still a
> minor problems in the package as it is, I started to trying to interact
> with github so really I am trying to put a working package onto github.
>
> All best
>
> Troels
>
>
>
> Fra: Stefan McKinnon H?j-Edwards <sme at iysik.com<mailto:sme at iysik.com>>
> Sendt: 25. januar 2019 09:59
> Til: Troels Ring <tring at gvdnet.dk<mailto:tring at gvdnet.dk>>; package-develop <
> r-package-devel at r-project.org<mailto:r-package-devel at r-project.org>>
> Emne: Re: [R-pkg-devel] submitting to github
>
>
>
> Hej Troels,
>
>
>
> What exactly are you trying to acheive here? I.e., are you trying to 1)
> put a new project onto github, or 2) copy a repository on github to your
> local computer, or 3) do as 2) and then update it your current
> modifications?
>
>
>
>
> Stefan McKinnon H?j-Edwards
>
> Mobile: (+45) 2888 6598
>
>
>
>
>
> Den fre. 25. jan. 2019 kl. 09.51 skrev Troels Ring <tring at gvdnet.dk<mailto:tring at gvdnet.dk>
> <mailto:tring at gvdnet.dk<mailto:tring at gvdnet.dk>> >:
>
> Dear friends - I'm sorry to bother but seem to be unable to interact
> constructively with github.
>
>
>
> I try to follow the instructions from Hadley (thanks!!!!) - i.e. I have a
> small trial-project which functions well. Since I have tried many times I
> start from shell with
>
> rm -rf .git
>
> and then select version control using git (tools, project options,git/svn)
> -
> and origin is still marked as "none" after restarting RStudio.
>
> Then from shell again: git init
>
> Yielding
>
> Initialized empty Git repository in
> C:/Users/Troels/Dropbox/Rown/ABCharge/.git/
>
> Rstudio restarted, package reopened: origin still "none"
>
> Git panel appears OK.
>
>
>
> Now from github: add new repository (non present after prior deletions!)
>
> Named as package name - repeated in description - repository created
>
>
>
> Shell opened from RStudio
>
> git remote add origin https://github.com/troelsring/ABCharge.git  - works
> without problems - an origin seems correctly accepted in RStudio - but
> then:
>
> git push -u origin master  - results in:
>
>
>
> error: src refspec master does not match any.
>
> error: failed to push some refs to
> 'https://github.com/troelsring/ABCharge.git' below in red
>
>
>
> I seem (also!) to have problems with the SSH keys - Rstudio marks that I
> have a key in c:/Users/Troels/.ssh/id_rsa -
>
> but when I run file.exists("~/.ssh/id_rsa.pub")
> [1] FALSE -  Is returned - but that is not the issue I guess? I have anyway
> made a public key as suggested.
>
> I have spent hours seeking on the many pages for explanation for this
> probably simple problem.
> All best
> Troels
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> <mailto:R-package-devel at r-project.org<mailto:R-package-devel at r-project.org>>
> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Fri Jan 25 14:24:14 2019
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Fri, 25 Jan 2019 08:24:14 -0500
Subject: [R-pkg-devel] submitting to github
In-Reply-To: <CANotEPuPUQGLjQCK96YFjMAZxhGw4FrnLqmrismf2wSPEmQCBA@mail.gmail.com>
References: <7e8501d4b48b$14f4d330$3ede7990$@gvdnet.dk>
 <b7ef01d4b48f$03852f10$0a8f8d30$@gvdnet.dk>
 <CAO1zAVa+0TzhcX1qKMAvC_qmRvhQ2DUo3se1L8Doz+RWV65ziQ@mail.gmail.com>
 <CANotEPuPUQGLjQCK96YFjMAZxhGw4FrnLqmrismf2wSPEmQCBA@mail.gmail.com>
Message-ID: <CABghstSOMwnuFv6_XXS0pP6youd2azF4jvwJH1QfRDk1a5LPxw@mail.gmail.com>

  It's not something I've experienced myself, but I've heard that
Dropbox and Git don't always play nicely together. Maybe try working
outside your dropbox folder?

https://www.anishathalye.com/2015/08/19/git-remote-dropbox/

On Fri, Jan 25, 2019 at 6:45 AM SMITH, MARTIN R.
<martin.smith at durham.ac.uk> wrote:
>
> Hi Troels,
>
> This probably doesn't score points for best practice, but if you only need to post the files to GitHub, you could always set up a new repository on github.com<http://github.com> and simply drag and drop the relevant files from your computer into the browser window.
>
> - Martin
>
> --
>
> Martin R. Smith
> Assistant Professor in Palaeontology
> Department of Earth Sciences
> Durham University
> Mountjoy Site, South Road
> Durham DH1 3LE
>
> T: +44 191 334 2320
> M: +44 774 353 7510
> E: martin.smith at durham.ac.uk<mailto:martin.smith at durham.ac.uk>
> Skype: martin--smith
>
> durham.ac.uk/earth.sciences/staff/academic/?id=14260<http://durham.ac.uk/earth.sciences/staff/academic/?id=14260>
> twitter.com/PalaeoSmith<http://twitter.com/PalaeoSmith>
>
> The information in this e-mail and any attachments is confidential. It is intended solely for the addressee or addressees. If you are not the intended recipient please delete the message and any attachments and notify the sender of mis-delivery. Any use or disclosure of the contents of either is unauthorised and may be unlawful.
> Although steps have been taken to ensure that this e-mail and any attachments are free from any virus, we advise the recipient to ensure they are indeed virus free. All liability for viruses is excluded to the fullest extent permitted by law.
>
>
> On Fri, 25 Jan 2019 at 10:17, Joris Meys <Joris.Meys at ugent.be<mailto:Joris.Meys at ugent.be>> wrote:
> Hi Troels,
>
> origin: none means that git created a local repository but didn't link it
> to a github account yet. If you're not that familiar with git, I suggest
> you take a look at Github Desktop. We use that with our students, and even
> I still use it sometimes. Github Desktop allows you to publish a local
> repository to github with one click. You just have to set your credentials
> after installing.
>
> More info on adding a remote through shell :
> https://help.github.com/articles/adding-an-existing-project-to-github-using-the-command-line/
> More info on Github Desktop : https://desktop.github.com/
>
> Hope this helps
> Cheers
> Joris
>
> On Fri, Jan 25, 2019 at 10:22 AM Troels Ring <tring at gvdnet.dk<mailto:tring at gvdnet.dk>> wrote:
>
> > Hi Stefan ? thanks for the question: I have a newly developed package
> > which I need to have on github for a publication. So, while there still a
> > minor problems in the package as it is, I started to trying to interact
> > with github so really I am trying to put a working package onto github.
> >
> > All best
> >
> > Troels
> >
> >
> >
> > Fra: Stefan McKinnon H?j-Edwards <sme at iysik.com<mailto:sme at iysik.com>>
> > Sendt: 25. januar 2019 09:59
> > Til: Troels Ring <tring at gvdnet.dk<mailto:tring at gvdnet.dk>>; package-develop <
> > r-package-devel at r-project.org<mailto:r-package-devel at r-project.org>>
> > Emne: Re: [R-pkg-devel] submitting to github
> >
> >
> >
> > Hej Troels,
> >
> >
> >
> > What exactly are you trying to acheive here? I.e., are you trying to 1)
> > put a new project onto github, or 2) copy a repository on github to your
> > local computer, or 3) do as 2) and then update it your current
> > modifications?
> >
> >
> >
> >
> > Stefan McKinnon H?j-Edwards
> >
> > Mobile: (+45) 2888 6598
> >
> >
> >
> >
> >
> > Den fre. 25. jan. 2019 kl. 09.51 skrev Troels Ring <tring at gvdnet.dk<mailto:tring at gvdnet.dk>
> > <mailto:tring at gvdnet.dk<mailto:tring at gvdnet.dk>> >:
> >
> > Dear friends - I'm sorry to bother but seem to be unable to interact
> > constructively with github.
> >
> >
> >
> > I try to follow the instructions from Hadley (thanks!!!!) - i.e. I have a
> > small trial-project which functions well. Since I have tried many times I
> > start from shell with
> >
> > rm -rf .git
> >
> > and then select version control using git (tools, project options,git/svn)
> > -
> > and origin is still marked as "none" after restarting RStudio.
> >
> > Then from shell again: git init
> >
> > Yielding
> >
> > Initialized empty Git repository in
> > C:/Users/Troels/Dropbox/Rown/ABCharge/.git/
> >
> > Rstudio restarted, package reopened: origin still "none"
> >
> > Git panel appears OK.
> >
> >
> >
> > Now from github: add new repository (non present after prior deletions!)
> >
> > Named as package name - repeated in description - repository created
> >
> >
> >
> > Shell opened from RStudio
> >
> > git remote add origin https://github.com/troelsring/ABCharge.git  - works
> > without problems - an origin seems correctly accepted in RStudio - but
> > then:
> >
> > git push -u origin master  - results in:
> >
> >
> >
> > error: src refspec master does not match any.
> >
> > error: failed to push some refs to
> > 'https://github.com/troelsring/ABCharge.git' below in red
> >
> >
> >
> > I seem (also!) to have problems with the SSH keys - Rstudio marks that I
> > have a key in c:/Users/Troels/.ssh/id_rsa -
> >
> > but when I run file.exists("~/.ssh/id_rsa.pub")
> > [1] FALSE -  Is returned - but that is not the issue I guess? I have anyway
> > made a public key as suggested.
> >
> > I have spent hours seeking on the many pages for explanation for this
> > probably simple problem.
> > All best
> > Troels
> >
> >
> >
> >
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> <mailto:R-package-devel at r-project.org<mailto:R-package-devel at r-project.org>>
> > mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>
> --
> Joris Meys
> Statistical consultant
>
> Department of Data Analysis and Mathematical Modelling
> Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
>
> tel: +32 (0)9 264 61 79
> -----------
> Biowiskundedagen 2017-2018
> http://www.biowiskundedagen.ugent.be/
>
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From tr|ng @end|ng |rom gvdnet@dk  Fri Jan 25 15:09:30 2019
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Fri, 25 Jan 2019 15:09:30 +0100
Subject: [R-pkg-devel] submitting to github
In-Reply-To: n1TSgUWPctXDin1TUguWJh
References: <7e8501d4b48b$14f4d330$3ede7990$@gvdnet.dk>
 <b7ef01d4b48f$03852f10$0a8f8d30$@gvdnet.dk>
 <CAO1zAVa+0TzhcX1qKMAvC_qmRvhQ2DUo3se1L8Doz+RWV65ziQ@mail.gmail.com>
 <CANotEPuPUQGLjQCK96YFjMAZxhGw4FrnLqmrismf2wSPEmQCBA@mail.gmail.com>
 n1TSgUWPctXDin1TUguWJh
Message-ID: <1e0d501d4b4b7$96e6f400$c4b4dc00$@gvdnet.dk>

Thanks a lot - since this is primarily a practical problem of making an actually working package available through github I used the drag and drop approach suggested by Martin Smith simply taking all project files from the RStudio project into the repository and it worked. Eventually I'll find out about how to integrate better with git, if necessary. 
But now the package draft is in place and I can go on extending and improving it.
Best wishes
Troels

-----Oprindelig meddelelse-----
Fra: R-package-devel <r-package-devel-bounces at r-project.org> P? vegne af Ben Bolker
Sendt: 25. januar 2019 14:24
Til: List r-package-devel <r-package-devel at r-project.org>
Emne: Re: [R-pkg-devel] submitting to github

  It's not something I've experienced myself, but I've heard that Dropbox and Git don't always play nicely together. Maybe try working outside your dropbox folder?

https://www.anishathalye.com/2015/08/19/git-remote-dropbox/

On Fri, Jan 25, 2019 at 6:45 AM SMITH, MARTIN R.
<martin.smith at durham.ac.uk> wrote:
>
> Hi Troels,
>
> This probably doesn't score points for best practice, but if you only need to post the files to GitHub, you could always set up a new repository on github.com<http://github.com> and simply drag and drop the relevant files from your computer into the browser window.
>
> - Martin
>
> --
>
> Martin R. Smith
> Assistant Professor in Palaeontology
> Department of Earth Sciences
> Durham University
> Mountjoy Site, South Road
> Durham DH1 3LE
>
> T: +44 191 334 2320
> M: +44 774 353 7510
> E: martin.smith at durham.ac.uk<mailto:martin.smith at durham.ac.uk>
> Skype: martin--smith
>
> durham.ac.uk/earth.sciences/staff/academic/?id=14260<http://durham.ac.
> uk/earth.sciences/staff/academic/?id=14260>
> twitter.com/PalaeoSmith<http://twitter.com/PalaeoSmith>
>
> The information in this e-mail and any attachments is confidential. It is intended solely for the addressee or addressees. If you are not the intended recipient please delete the message and any attachments and notify the sender of mis-delivery. Any use or disclosure of the contents of either is unauthorised and may be unlawful.
> Although steps have been taken to ensure that this e-mail and any attachments are free from any virus, we advise the recipient to ensure they are indeed virus free. All liability for viruses is excluded to the fullest extent permitted by law.
>
>
> On Fri, 25 Jan 2019 at 10:17, Joris Meys <Joris.Meys at ugent.be<mailto:Joris.Meys at ugent.be>> wrote:
> Hi Troels,
>
> origin: none means that git created a local repository but didn't link 
> it to a github account yet. If you're not that familiar with git, I 
> suggest you take a look at Github Desktop. We use that with our 
> students, and even I still use it sometimes. Github Desktop allows you 
> to publish a local repository to github with one click. You just have 
> to set your credentials after installing.
>
> More info on adding a remote through shell :
> https://help.github.com/articles/adding-an-existing-project-to-github-
> using-the-command-line/ More info on Github Desktop : 
> https://desktop.github.com/
>
> Hope this helps
> Cheers
> Joris
>
> On Fri, Jan 25, 2019 at 10:22 AM Troels Ring <tring at gvdnet.dk<mailto:tring at gvdnet.dk>> wrote:
>
> > Hi Stefan ? thanks for the question: I have a newly developed 
> > package which I need to have on github for a publication. So, while 
> > there still a minor problems in the package as it is, I started to 
> > trying to interact with github so really I am trying to put a working package onto github.
> >
> > All best
> >
> > Troels
> >
> >
> >
> > Fra: Stefan McKinnon H?j-Edwards 
> > <sme at iysik.com<mailto:sme at iysik.com>>
> > Sendt: 25. januar 2019 09:59
> > Til: Troels Ring <tring at gvdnet.dk<mailto:tring at gvdnet.dk>>; 
> > package-develop < 
> > r-package-devel at r-project.org<mailto:r-package-devel at r-project.org>>
> > Emne: Re: [R-pkg-devel] submitting to github
> >
> >
> >
> > Hej Troels,
> >
> >
> >
> > What exactly are you trying to acheive here? I.e., are you trying to 
> > 1) put a new project onto github, or 2) copy a repository on github 
> > to your local computer, or 3) do as 2) and then update it your 
> > current modifications?
> >
> >
> >
> >
> > Stefan McKinnon H?j-Edwards
> >
> > Mobile: (+45) 2888 6598
> >
> >
> >
> >
> >
> > Den fre. 25. jan. 2019 kl. 09.51 skrev Troels Ring 
> > <tring at gvdnet.dk<mailto:tring at gvdnet.dk>
> > <mailto:tring at gvdnet.dk<mailto:tring at gvdnet.dk>> >:
> >
> > Dear friends - I'm sorry to bother but seem to be unable to interact 
> > constructively with github.
> >
> >
> >
> > I try to follow the instructions from Hadley (thanks!!!!) - i.e. I 
> > have a small trial-project which functions well. Since I have tried 
> > many times I start from shell with
> >
> > rm -rf .git
> >
> > and then select version control using git (tools, project 
> > options,git/svn)
> > -
> > and origin is still marked as "none" after restarting RStudio.
> >
> > Then from shell again: git init
> >
> > Yielding
> >
> > Initialized empty Git repository in
> > C:/Users/Troels/Dropbox/Rown/ABCharge/.git/
> >
> > Rstudio restarted, package reopened: origin still "none"
> >
> > Git panel appears OK.
> >
> >
> >
> > Now from github: add new repository (non present after prior 
> > deletions!)
> >
> > Named as package name - repeated in description - repository created
> >
> >
> >
> > Shell opened from RStudio
> >
> > git remote add origin https://github.com/troelsring/ABCharge.git  - 
> > works without problems - an origin seems correctly accepted in 
> > RStudio - but
> > then:
> >
> > git push -u origin master  - results in:
> >
> >
> >
> > error: src refspec master does not match any.
> >
> > error: failed to push some refs to
> > 'https://github.com/troelsring/ABCharge.git' below in red
> >
> >
> >
> > I seem (also!) to have problems with the SSH keys - Rstudio marks 
> > that I have a key in c:/Users/Troels/.ssh/id_rsa -
> >
> > but when I run file.exists("~/.ssh/id_rsa.pub") [1] FALSE -  Is 
> > returned - but that is not the issue I guess? I have anyway made a 
> > public key as suggested.
> >
> > I have spent hours seeking on the many pages for explanation for 
> > this probably simple problem.
> > All best
> > Troels
> >
> >
> >
> >
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> 
> > <mailto:R-package-devel at r-project.org<mailto:R-package-devel at r-proje
> > ct.org>>
> > mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> 
> > mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>
> --
> Joris Meys
> Statistical consultant
>
> Department of Data Analysis and Mathematical Modelling Ghent 
> University Coupure Links 653, B-9000 Gent (Belgium) 
> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0
> Belgium&entry=gmail&source=g>
>
> tel: +32 (0)9 264 61 79
> -----------
> Biowiskundedagen 2017-2018
> http://www.biowiskundedagen.ugent.be/
>
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> 
> mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From h@w|ckh@m @end|ng |rom gm@||@com  Fri Jan 25 16:23:19 2019
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Fri, 25 Jan 2019 09:23:19 -0600
Subject: [R-pkg-devel] submitting to github
In-Reply-To: <7e8501d4b48b$14f4d330$3ede7990$@gvdnet.dk>
References: <7e8501d4b48b$14f4d330$3ede7990$@gvdnet.dk>
Message-ID: <CABdHhvGit=yyraasP9ZHeHJbMpJ-1e988nc6LodTqtstk5VUKw@mail.gmail.com>

No one else has mentioned it on the thread, so I'd highly recommend
https://happygitwithr.com ? it's a guide to git + github specifically
written for R users, and covers many of the common problems people
have when getting set up.

Hadley

On Fri, Jan 25, 2019 at 2:51 AM Troels Ring <tring at gvdnet.dk> wrote:
>
> Dear friends - I'm sorry to bother but seem to be unable to interact
> constructively with github.
>
>
>
> I try to follow the instructions from Hadley (thanks!!!!) - i.e. I have a
> small trial-project which functions well. Since I have tried many times I
> start from shell with
>
> rm -rf .git
>
> and then select version control using git (tools, project options,git/svn) -
> and origin is still marked as "none" after restarting RStudio.
>
> Then from shell again: git init
>
> Yielding
>
> Initialized empty Git repository in
> C:/Users/Troels/Dropbox/Rown/ABCharge/.git/
>
> Rstudio restarted, package reopened: origin still "none"
>
> Git panel appears OK.
>
>
>
> Now from github: add new repository (non present after prior deletions!)
>
> Named as package name - repeated in description - repository created
>
>
>
> Shell opened from RStudio
>
> git remote add origin https://github.com/troelsring/ABCharge.git  - works
> without problems - an origin seems correctly accepted in RStudio - but then:
>
> git push -u origin master  - results in:
>
>
>
> error: src refspec master does not match any.
>
> error: failed to push some refs to
> 'https://github.com/troelsring/ABCharge.git' below in red
>
>
>
> I seem (also!) to have problems with the SSH keys - Rstudio marks that I
> have a key in c:/Users/Troels/.ssh/id_rsa -
>
> but when I run file.exists("~/.ssh/id_rsa.pub")
> [1] FALSE -  Is returned - but that is not the issue I guess? I have anyway
> made a public key as suggested.
>
> I have spent hours seeking on the many pages for explanation for this
> probably simple problem.
> All best
> Troels
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
http://hadley.nz


From tr|ng @end|ng |rom gvdnet@dk  Sat Jan 26 09:15:41 2019
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Sat, 26 Jan 2019 09:15:41 +0100
Subject: [R-pkg-devel] package docu
Message-ID: <000001d4b54f$567f1580$037d4080$@gvdnet.dk>

Dear friends - I'm struggling to get the documentation of my package
correct. The working package is now (with your help!) at

devtools::install_github("troelsring/ABCharge")

and in its proto version includes only a single dataset "brom.RData" which
has two components, a data.frame "brom" and a matrix TOTAL. These are
documented in the brom.RD file shown below. 

 

 

\name{brom}

\alias{brom}

\docType{data}

\title{

bromic acid data from Glaser et al 2014

}

\description{

  Data to find optimal pK for bromic acid

}

\usage{data("brom")}

\format{

A workspace.

  \describe{

    \item{brom}{Dataframe of Table S4 in Glaser et al.}

    \item{TOTAL}{Matrix of buffer concentrations.}

  }

}

\source{

Glaser RE et al. Dynamical approach to multiequilibria problems for mixtures
of

acids and their conjugate bases. J Chem Educ 2014; 91: 1009-1016

}

\examples{

data(brom)

----- a long example - works well 

 

Now when running ctrl-shift-E, I get

 

> checking for missing documentation entries ... WARNING

  Undocumented code objects:

    'K3' 'Kc' 'kw'

  Undocumented data sets:

    'TOTAL'

  All user-level objects in a package should have documentation entries.

  See chapter 'Writing R documentation files' in the 'Writing R

  Extensions' manual.

 

0 errors v | 1 warning x | 0 notes v

Fejl: R CMD check found WARNINGs

run stoppet

 

Exited with status 1.

 

I wonder why the specification of TOTAL in the RD file is ignored?

 

Also the three constants kw, Kc, and K3 are not properly documented. They
are declared and exported in the utility_acid.r file and I have tried to
document them as  @params in that file but it seems to be ignored and cause
other problems so I have them at present undocumented since I don't know
where to put the documentation.


	[[alternative HTML version deleted]]


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Sat Jan 26 13:16:43 2019
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Sat, 26 Jan 2019 12:16:43 +0000
Subject: [R-pkg-devel] package docu
In-Reply-To: <000001d4b54f$567f1580$037d4080$@gvdnet.dk>
References: <000001d4b54f$567f1580$037d4080$@gvdnet.dk>
Message-ID: <712d63f1-076a-b07b-5ab8-311d09add961@dewey.myzen.co.uk>

Dear Troels

What happens if you add \alias{TOTAL}

Michael

On 26/01/2019 08:15, Troels Ring wrote:
> Dear friends - I'm struggling to get the documentation of my package
> correct. The working package is now (with your help!) at
> 
> devtools::install_github("troelsring/ABCharge")
> 
> and in its proto version includes only a single dataset "brom.RData" which
> has two components, a data.frame "brom" and a matrix TOTAL. These are
> documented in the brom.RD file shown below.
> 
>   
> 
>   
> 
> \name{brom}
> 
> \alias{brom}
> 
> \docType{data}
> 
> \title{
> 
> bromic acid data from Glaser et al 2014
> 
> }
> 
> \description{
> 
>    Data to find optimal pK for bromic acid
> 
> }
> 
> \usage{data("brom")}
> 
> \format{
> 
> A workspace.
> 
>    \describe{
> 
>      \item{brom}{Dataframe of Table S4 in Glaser et al.}
> 
>      \item{TOTAL}{Matrix of buffer concentrations.}
> 
>    }
> 
> }
> 
> \source{
> 
> Glaser RE et al. Dynamical approach to multiequilibria problems for mixtures
> of
> 
> acids and their conjugate bases. J Chem Educ 2014; 91: 1009-1016
> 
> }
> 
> \examples{
> 
> data(brom)
> 
> ----- a long example - works well
> 
>   
> 
> Now when running ctrl-shift-E, I get
> 
>   
> 
>> checking for missing documentation entries ... WARNING
> 
>    Undocumented code objects:
> 
>      'K3' 'Kc' 'kw'
> 
>    Undocumented data sets:
> 
>      'TOTAL'
> 
>    All user-level objects in a package should have documentation entries.
> 
>    See chapter 'Writing R documentation files' in the 'Writing R
> 
>    Extensions' manual.
> 
>   
> 
> 0 errors v | 1 warning x | 0 notes v
> 
> Fejl: R CMD check found WARNINGs
> 
> run stoppet
> 
>   
> 
> Exited with status 1.
> 
>   
> 
> I wonder why the specification of TOTAL in the RD file is ignored?
> 
>   
> 
> Also the three constants kw, Kc, and K3 are not properly documented. They
> are declared and exported in the utility_acid.r file and I have tried to
> document them as  @params in that file but it seems to be ignored and cause
> other problems so I have them at present undocumented since I don't know
> where to put the documentation.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From tr|ng @end|ng |rom gvdnet@dk  Sat Jan 26 14:31:06 2019
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Sat, 26 Jan 2019 14:31:06 +0100
Subject: [R-pkg-devel] package docu
In-Reply-To: nMszgZJw7tXDinMt0gwNdO
References: <000001d4b54f$567f1580$037d4080$@gvdnet.dk> nMszgZJw7tXDinMt0gwNdO
Message-ID: <0a2001d4b57b$64768200$2d638600$@gvdnet.dk>

Dear Michael - fantastic: TOTAL is now acknowledged -- so I only need the constants kw, K3, and Kc from the utility_acid.r file - how for format their documentation - they are available as required inside and outside the package.

All best wishes
Troels

-----Oprindelig meddelelse-----
Fra: Michael Dewey <lists at dewey.myzen.co.uk> 
Sendt: 26. januar 2019 13:17
Til: Troels Ring <tring at gvdnet.dk>; package-develop <r-package-devel at r-project.org>
Emne: Re: [R-pkg-devel] package docu

Dear Troels

What happens if you add \alias{TOTAL}

Michael

On 26/01/2019 08:15, Troels Ring wrote:
> Dear friends - I'm struggling to get the documentation of my package 
> correct. The working package is now (with your help!) at
> 
> devtools::install_github("troelsring/ABCharge")
> 
> and in its proto version includes only a single dataset "brom.RData" 
> which has two components, a data.frame "brom" and a matrix TOTAL. 
> These are documented in the brom.RD file shown below.
> 
>   
> 
>   
> 
> \name{brom}
> 
> \alias{brom}
> 
> \docType{data}
> 
> \title{
> 
> bromic acid data from Glaser et al 2014
> 
> }
> 
> \description{
> 
>    Data to find optimal pK for bromic acid
> 
> }
> 
> \usage{data("brom")}
> 
> \format{
> 
> A workspace.
> 
>    \describe{
> 
>      \item{brom}{Dataframe of Table S4 in Glaser et al.}
> 
>      \item{TOTAL}{Matrix of buffer concentrations.}
> 
>    }
> 
> }
> 
> \source{
> 
> Glaser RE et al. Dynamical approach to multiequilibria problems for 
> mixtures of
> 
> acids and their conjugate bases. J Chem Educ 2014; 91: 1009-1016
> 
> }
> 
> \examples{
> 
> data(brom)
> 
> ----- a long example - works well
> 
>   
> 
> Now when running ctrl-shift-E, I get
> 
>   
> 
>> checking for missing documentation entries ... WARNING
> 
>    Undocumented code objects:
> 
>      'K3' 'Kc' 'kw'
> 
>    Undocumented data sets:
> 
>      'TOTAL'
> 
>    All user-level objects in a package should have documentation entries.
> 
>    See chapter 'Writing R documentation files' in the 'Writing R
> 
>    Extensions' manual.
> 
>   
> 
> 0 errors v | 1 warning x | 0 notes v
> 
> Fejl: R CMD check found WARNINGs
> 
> run stoppet
> 
>   
> 
> Exited with status 1.
> 
>   
> 
> I wonder why the specification of TOTAL in the RD file is ignored?
> 
>   
> 
> Also the three constants kw, Kc, and K3 are not properly documented. 
> They are declared and exported in the utility_acid.r file and I have 
> tried to document them as  @params in that file but it seems to be 
> ignored and cause other problems so I have them at present 
> undocumented since I don't know where to put the documentation.
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

--
Michael
http://www.dewey.myzen.co.uk/home.html


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Jan 26 14:45:17 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 26 Jan 2019 08:45:17 -0500
Subject: [R-pkg-devel] package docu
In-Reply-To: <0a2001d4b57b$64768200$2d638600$@gvdnet.dk>
References: <000001d4b54f$567f1580$037d4080$@gvdnet.dk>
 <0a2001d4b57b$64768200$2d638600$@gvdnet.dk>
Message-ID: <4efff8e6-85d4-1ba2-db48-741dd3b5a4ed@gmail.com>

On 26/01/2019 8:31 a.m., Troels Ring wrote:
> Dear Michael - fantastic: TOTAL is now acknowledged -- so I only need the constants kw, K3, and Kc from the utility_acid.r file - how for format their documentation - they are available as required inside and outside the package.

Within R, set your working directory to the man directory for your 
package, then run

   prompt(kw)

and it will create kw.Rd in the right format.  You just need to edit it 
to fill in the details.  There will be comments in the file explaining 
what to do.  Don't put quotes on the name; prompt("kw") is wrong.

Duncan Murdoch


> 
> All best wishes
> Troels
> 
> -----Oprindelig meddelelse-----
> Fra: Michael Dewey <lists at dewey.myzen.co.uk>
> Sendt: 26. januar 2019 13:17
> Til: Troels Ring <tring at gvdnet.dk>; package-develop <r-package-devel at r-project.org>
> Emne: Re: [R-pkg-devel] package docu
> 
> Dear Troels
> 
> What happens if you add \alias{TOTAL}
> 
> Michael
> 
> On 26/01/2019 08:15, Troels Ring wrote:
>> Dear friends - I'm struggling to get the documentation of my package
>> correct. The working package is now (with your help!) at
>>
>> devtools::install_github("troelsring/ABCharge")
>>
>> and in its proto version includes only a single dataset "brom.RData"
>> which has two components, a data.frame "brom" and a matrix TOTAL.
>> These are documented in the brom.RD file shown below.
>>
>>    
>>
>>    
>>
>> \name{brom}
>>
>> \alias{brom}
>>
>> \docType{data}
>>
>> \title{
>>
>> bromic acid data from Glaser et al 2014
>>
>> }
>>
>> \description{
>>
>>     Data to find optimal pK for bromic acid
>>
>> }
>>
>> \usage{data("brom")}
>>
>> \format{
>>
>> A workspace.
>>
>>     \describe{
>>
>>       \item{brom}{Dataframe of Table S4 in Glaser et al.}
>>
>>       \item{TOTAL}{Matrix of buffer concentrations.}
>>
>>     }
>>
>> }
>>
>> \source{
>>
>> Glaser RE et al. Dynamical approach to multiequilibria problems for
>> mixtures of
>>
>> acids and their conjugate bases. J Chem Educ 2014; 91: 1009-1016
>>
>> }
>>
>> \examples{
>>
>> data(brom)
>>
>> ----- a long example - works well
>>
>>    
>>
>> Now when running ctrl-shift-E, I get
>>
>>    
>>
>>> checking for missing documentation entries ... WARNING
>>
>>     Undocumented code objects:
>>
>>       'K3' 'Kc' 'kw'
>>
>>     Undocumented data sets:
>>
>>       'TOTAL'
>>
>>     All user-level objects in a package should have documentation entries.
>>
>>     See chapter 'Writing R documentation files' in the 'Writing R
>>
>>     Extensions' manual.
>>
>>    
>>
>> 0 errors v | 1 warning x | 0 notes v
>>
>> Fejl: R CMD check found WARNINGs
>>
>> run stoppet
>>
>>    
>>
>> Exited with status 1.
>>
>>    
>>
>> I wonder why the specification of TOTAL in the RD file is ignored?
>>
>>    
>>
>> Also the three constants kw, Kc, and K3 are not properly documented.
>> They are declared and exported in the utility_acid.r file and I have
>> tried to document them as  @params in that file but it seems to be
>> ignored and cause other problems so I have them at present
>> undocumented since I don't know where to put the documentation.
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> --
> Michael
> http://www.dewey.myzen.co.uk/home.html
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From tr|ng @end|ng |rom gvdnet@dk  Sat Jan 26 15:04:01 2019
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Sat, 26 Jan 2019 15:04:01 +0100
Subject: [R-pkg-devel] package docu
In-Reply-To: nOGugZbuEtXDinOGvgwTkU
References: <000001d4b54f$567f1580$037d4080$@gvdnet.dk>
 <0a2001d4b57b$64768200$2d638600$@gvdnet.dk> nOGugZbuEtXDinOGvgwTkU
Message-ID: <553b01d4b57f$fd32dcb0$f7989610$@gvdnet.dk>

Thanks a lot - I tried with prompt(kw) and that warning disappeared but instead I got another
> checking for code/documentation mismatches ... WARNING
  Data with usage in documentation object 'kw' but not in code:
    Kw

And the code is really full og kw - 

I'm so sorry to bother
BW
Troels

-----Oprindelig meddelelse-----
Fra: Duncan Murdoch <murdoch.duncan at gmail.com> 
Sendt: 26. januar 2019 14:45
Til: Troels Ring <tring at gvdnet.dk>; 'Michael Dewey' <lists at dewey.myzen.co.uk>; 'package-develop' <r-package-devel at r-project.org>
Emne: Re: [R-pkg-devel] package docu

On 26/01/2019 8:31 a.m., Troels Ring wrote:
> Dear Michael - fantastic: TOTAL is now acknowledged -- so I only need the constants kw, K3, and Kc from the utility_acid.r file - how for format their documentation - they are available as required inside and outside the package.

Within R, set your working directory to the man directory for your package, then run

   prompt(kw)

and it will create kw.Rd in the right format.  You just need to edit it to fill in the details.  There will be comments in the file explaining what to do.  Don't put quotes on the name; prompt("kw") is wrong.

Duncan Murdoch


> 
> All best wishes
> Troels
> 
> -----Oprindelig meddelelse-----
> Fra: Michael Dewey <lists at dewey.myzen.co.uk>
> Sendt: 26. januar 2019 13:17
> Til: Troels Ring <tring at gvdnet.dk>; package-develop 
> <r-package-devel at r-project.org>
> Emne: Re: [R-pkg-devel] package docu
> 
> Dear Troels
> 
> What happens if you add \alias{TOTAL}
> 
> Michael
> 
> On 26/01/2019 08:15, Troels Ring wrote:
>> Dear friends - I'm struggling to get the documentation of my package 
>> correct. The working package is now (with your help!) at
>>
>> devtools::install_github("troelsring/ABCharge")
>>
>> and in its proto version includes only a single dataset "brom.RData"
>> which has two components, a data.frame "brom" and a matrix TOTAL.
>> These are documented in the brom.RD file shown below.
>>
>>    
>>
>>    
>>
>> \name{brom}
>>
>> \alias{brom}
>>
>> \docType{data}
>>
>> \title{
>>
>> bromic acid data from Glaser et al 2014
>>
>> }
>>
>> \description{
>>
>>     Data to find optimal pK for bromic acid
>>
>> }
>>
>> \usage{data("brom")}
>>
>> \format{
>>
>> A workspace.
>>
>>     \describe{
>>
>>       \item{brom}{Dataframe of Table S4 in Glaser et al.}
>>
>>       \item{TOTAL}{Matrix of buffer concentrations.}
>>
>>     }
>>
>> }
>>
>> \source{
>>
>> Glaser RE et al. Dynamical approach to multiequilibria problems for 
>> mixtures of
>>
>> acids and their conjugate bases. J Chem Educ 2014; 91: 1009-1016
>>
>> }
>>
>> \examples{
>>
>> data(brom)
>>
>> ----- a long example - works well
>>
>>    
>>
>> Now when running ctrl-shift-E, I get
>>
>>    
>>
>>> checking for missing documentation entries ... WARNING
>>
>>     Undocumented code objects:
>>
>>       'K3' 'Kc' 'kw'
>>
>>     Undocumented data sets:
>>
>>       'TOTAL'
>>
>>     All user-level objects in a package should have documentation entries.
>>
>>     See chapter 'Writing R documentation files' in the 'Writing R
>>
>>     Extensions' manual.
>>
>>    
>>
>> 0 errors v | 1 warning x | 0 notes v
>>
>> Fejl: R CMD check found WARNINGs
>>
>> run stoppet
>>
>>    
>>
>> Exited with status 1.
>>
>>    
>>
>> I wonder why the specification of TOTAL in the RD file is ignored?
>>
>>    
>>
>> Also the three constants kw, Kc, and K3 are not properly documented.
>> They are declared and exported in the utility_acid.r file and I have 
>> tried to document them as  @params in that file but it seems to be 
>> ignored and cause other problems so I have them at present 
>> undocumented since I don't know where to put the documentation.
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list 
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> --
> Michael
> http://www.dewey.myzen.co.uk/home.html
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Sat Jan 26 15:48:14 2019
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Sat, 26 Jan 2019 14:48:14 +0000
Subject: [R-pkg-devel] package docu
In-Reply-To: <553b01d4b57f$fd32dcb0$f7989610$@gvdnet.dk>
References: <000001d4b54f$567f1580$037d4080$@gvdnet.dk>
 <0a2001d4b57b$64768200$2d638600$@gvdnet.dk>
 <553b01d4b57f$fd32dcb0$f7989610$@gvdnet.dk>
Message-ID: <5ee80920-ce1e-7a67-4163-4b0def9689ee@dewey.myzen.co.uk>

Well in the usage section it says Kw but elsewhere kw so you need to 
make them match. Probably some "helpful" part of your system is 
capitalising things without you noticing.

Michael

On 26/01/2019 14:04, Troels Ring wrote:
> Thanks a lot - I tried with prompt(kw) and that warning disappeared but instead I got another
>> checking for code/documentation mismatches ... WARNING
>    Data with usage in documentation object 'kw' but not in code:
>      Kw
> 
> And the code is really full og kw -
> 
> I'm so sorry to bother
> BW
> Troels
> 
> -----Oprindelig meddelelse-----
> Fra: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sendt: 26. januar 2019 14:45
> Til: Troels Ring <tring at gvdnet.dk>; 'Michael Dewey' <lists at dewey.myzen.co.uk>; 'package-develop' <r-package-devel at r-project.org>
> Emne: Re: [R-pkg-devel] package docu
> 
> On 26/01/2019 8:31 a.m., Troels Ring wrote:
>> Dear Michael - fantastic: TOTAL is now acknowledged -- so I only need the constants kw, K3, and Kc from the utility_acid.r file - how for format their documentation - they are available as required inside and outside the package.
> 
> Within R, set your working directory to the man directory for your package, then run
> 
>     prompt(kw)
> 
> and it will create kw.Rd in the right format.  You just need to edit it to fill in the details.  There will be comments in the file explaining what to do.  Don't put quotes on the name; prompt("kw") is wrong.
> 
> Duncan Murdoch
> 
> 
>>
>> All best wishes
>> Troels
>>
>> -----Oprindelig meddelelse-----
>> Fra: Michael Dewey <lists at dewey.myzen.co.uk>
>> Sendt: 26. januar 2019 13:17
>> Til: Troels Ring <tring at gvdnet.dk>; package-develop
>> <r-package-devel at r-project.org>
>> Emne: Re: [R-pkg-devel] package docu
>>
>> Dear Troels
>>
>> What happens if you add \alias{TOTAL}
>>
>> Michael
>>
>> On 26/01/2019 08:15, Troels Ring wrote:
>>> Dear friends - I'm struggling to get the documentation of my package
>>> correct. The working package is now (with your help!) at
>>>
>>> devtools::install_github("troelsring/ABCharge")
>>>
>>> and in its proto version includes only a single dataset "brom.RData"
>>> which has two components, a data.frame "brom" and a matrix TOTAL.
>>> These are documented in the brom.RD file shown below.
>>>
>>>     
>>>
>>>     
>>>
>>> \name{brom}
>>>
>>> \alias{brom}
>>>
>>> \docType{data}
>>>
>>> \title{
>>>
>>> bromic acid data from Glaser et al 2014
>>>
>>> }
>>>
>>> \description{
>>>
>>>      Data to find optimal pK for bromic acid
>>>
>>> }
>>>
>>> \usage{data("brom")}
>>>
>>> \format{
>>>
>>> A workspace.
>>>
>>>      \describe{
>>>
>>>        \item{brom}{Dataframe of Table S4 in Glaser et al.}
>>>
>>>        \item{TOTAL}{Matrix of buffer concentrations.}
>>>
>>>      }
>>>
>>> }
>>>
>>> \source{
>>>
>>> Glaser RE et al. Dynamical approach to multiequilibria problems for
>>> mixtures of
>>>
>>> acids and their conjugate bases. J Chem Educ 2014; 91: 1009-1016
>>>
>>> }
>>>
>>> \examples{
>>>
>>> data(brom)
>>>
>>> ----- a long example - works well
>>>
>>>     
>>>
>>> Now when running ctrl-shift-E, I get
>>>
>>>     
>>>
>>>> checking for missing documentation entries ... WARNING
>>>
>>>      Undocumented code objects:
>>>
>>>        'K3' 'Kc' 'kw'
>>>
>>>      Undocumented data sets:
>>>
>>>        'TOTAL'
>>>
>>>      All user-level objects in a package should have documentation entries.
>>>
>>>      See chapter 'Writing R documentation files' in the 'Writing R
>>>
>>>      Extensions' manual.
>>>
>>>     
>>>
>>> 0 errors v | 1 warning x | 0 notes v
>>>
>>> Fejl: R CMD check found WARNINGs
>>>
>>> run stoppet
>>>
>>>     
>>>
>>> Exited with status 1.
>>>
>>>     
>>>
>>> I wonder why the specification of TOTAL in the RD file is ignored?
>>>
>>>     
>>>
>>> Also the three constants kw, Kc, and K3 are not properly documented.
>>> They are declared and exported in the utility_acid.r file and I have
>>> tried to document them as  @params in that file but it seems to be
>>> ignored and cause other problems so I have them at present
>>> undocumented since I don't know where to put the documentation.
>>>
>>>
>>> 	[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> --
>> Michael
>> http://www.dewey.myzen.co.uk/home.html
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From tr|ng @end|ng |rom gvdnet@dk  Sat Jan 26 16:22:09 2019
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Sat, 26 Jan 2019 16:22:09 +0100
Subject: [R-pkg-devel] package docu
In-Reply-To: nPFZgWoiZwUhznPFagcH5F
References: <000001d4b54f$567f1580$037d4080$@gvdnet.dk>
 <0a2001d4b57b$64768200$2d638600$@gvdnet.dk>
 <553b01d4b57f$fd32dcb0$f7989610$@gvdnet.dk> nPFZgWoiZwUhznPFagcH5F
Message-ID: <af9301d4b58a$e7c86010$b7592030$@gvdnet.dk>

Thanks a lot - but it is really kw and not Kw everywhere - according to "find in files" etc - thanks a lot for your patience and interest!
BW
Troels

-----Oprindelig meddelelse-----
Fra: Michael Dewey <lists at dewey.myzen.co.uk> 
Sendt: 26. januar 2019 15:48
Til: Troels Ring <tring at gvdnet.dk>; 'Duncan Murdoch' <murdoch.duncan at gmail.com>; 'package-develop' <r-package-devel at r-project.org>
Emne: Re: SV: [R-pkg-devel] package docu

Well in the usage section it says Kw but elsewhere kw so you need to make them match. Probably some "helpful" part of your system is capitalising things without you noticing.

Michael

On 26/01/2019 14:04, Troels Ring wrote:
> Thanks a lot - I tried with prompt(kw) and that warning disappeared 
> but instead I got another
>> checking for code/documentation mismatches ... WARNING
>    Data with usage in documentation object 'kw' but not in code:
>      Kw
> 
> And the code is really full og kw -
> 
> I'm so sorry to bother
> BW
> Troels
> 
> -----Oprindelig meddelelse-----
> Fra: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sendt: 26. januar 2019 14:45
> Til: Troels Ring <tring at gvdnet.dk>; 'Michael Dewey' 
> <lists at dewey.myzen.co.uk>; 'package-develop' 
> <r-package-devel at r-project.org>
> Emne: Re: [R-pkg-devel] package docu
> 
> On 26/01/2019 8:31 a.m., Troels Ring wrote:
>> Dear Michael - fantastic: TOTAL is now acknowledged -- so I only need the constants kw, K3, and Kc from the utility_acid.r file - how for format their documentation - they are available as required inside and outside the package.
> 
> Within R, set your working directory to the man directory for your 
> package, then run
> 
>     prompt(kw)
> 
> and it will create kw.Rd in the right format.  You just need to edit it to fill in the details.  There will be comments in the file explaining what to do.  Don't put quotes on the name; prompt("kw") is wrong.
> 
> Duncan Murdoch
> 
> 
>>
>> All best wishes
>> Troels
>>
>> -----Oprindelig meddelelse-----
>> Fra: Michael Dewey <lists at dewey.myzen.co.uk>
>> Sendt: 26. januar 2019 13:17
>> Til: Troels Ring <tring at gvdnet.dk>; package-develop 
>> <r-package-devel at r-project.org>
>> Emne: Re: [R-pkg-devel] package docu
>>
>> Dear Troels
>>
>> What happens if you add \alias{TOTAL}
>>
>> Michael
>>
>> On 26/01/2019 08:15, Troels Ring wrote:
>>> Dear friends - I'm struggling to get the documentation of my package 
>>> correct. The working package is now (with your help!) at
>>>
>>> devtools::install_github("troelsring/ABCharge")
>>>
>>> and in its proto version includes only a single dataset "brom.RData"
>>> which has two components, a data.frame "brom" and a matrix TOTAL.
>>> These are documented in the brom.RD file shown below.
>>>
>>>     
>>>
>>>     
>>>
>>> \name{brom}
>>>
>>> \alias{brom}
>>>
>>> \docType{data}
>>>
>>> \title{
>>>
>>> bromic acid data from Glaser et al 2014
>>>
>>> }
>>>
>>> \description{
>>>
>>>      Data to find optimal pK for bromic acid
>>>
>>> }
>>>
>>> \usage{data("brom")}
>>>
>>> \format{
>>>
>>> A workspace.
>>>
>>>      \describe{
>>>
>>>        \item{brom}{Dataframe of Table S4 in Glaser et al.}
>>>
>>>        \item{TOTAL}{Matrix of buffer concentrations.}
>>>
>>>      }
>>>
>>> }
>>>
>>> \source{
>>>
>>> Glaser RE et al. Dynamical approach to multiequilibria problems for 
>>> mixtures of
>>>
>>> acids and their conjugate bases. J Chem Educ 2014; 91: 1009-1016
>>>
>>> }
>>>
>>> \examples{
>>>
>>> data(brom)
>>>
>>> ----- a long example - works well
>>>
>>>     
>>>
>>> Now when running ctrl-shift-E, I get
>>>
>>>     
>>>
>>>> checking for missing documentation entries ... WARNING
>>>
>>>      Undocumented code objects:
>>>
>>>        'K3' 'Kc' 'kw'
>>>
>>>      Undocumented data sets:
>>>
>>>        'TOTAL'
>>>
>>>      All user-level objects in a package should have documentation entries.
>>>
>>>      See chapter 'Writing R documentation files' in the 'Writing R
>>>
>>>      Extensions' manual.
>>>
>>>     
>>>
>>> 0 errors v | 1 warning x | 0 notes v
>>>
>>> Fejl: R CMD check found WARNINGs
>>>
>>> run stoppet
>>>
>>>     
>>>
>>> Exited with status 1.
>>>
>>>     
>>>
>>> I wonder why the specification of TOTAL in the RD file is ignored?
>>>
>>>     
>>>
>>> Also the three constants kw, Kc, and K3 are not properly documented.
>>> They are declared and exported in the utility_acid.r file and I have 
>>> tried to document them as  @params in that file but it seems to be 
>>> ignored and cause other problems so I have them at present 
>>> undocumented since I don't know where to put the documentation.
>>>
>>>
>>> 	[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list 
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> --
>> Michael
>> http://www.dewey.myzen.co.uk/home.html
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list 
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 
> 

--
Michael
http://www.dewey.myzen.co.uk/home.html


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Jan 26 22:08:02 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 26 Jan 2019 16:08:02 -0500
Subject: [R-pkg-devel] package docu
In-Reply-To: <553b01d4b57f$fd32dcb0$f7989610$@gvdnet.dk>
References: <000001d4b54f$567f1580$037d4080$@gvdnet.dk>
 <0a2001d4b57b$64768200$2d638600$@gvdnet.dk>
 <553b01d4b57f$fd32dcb0$f7989610$@gvdnet.dk>
Message-ID: <2914a0b7-8583-aa63-9e3c-53cc5c70fecd@gmail.com>

On 26/01/2019 9:04 a.m., Troels Ring wrote:
> Thanks a lot - I tried with prompt(kw) and that warning disappeared but instead I got another
>> checking for code/documentation mismatches ... WARNING
>    Data with usage in documentation object 'kw' but not in code:
>      Kw
> 
> And the code is really full og kw -

That message is about the Rd file, not the code.  Look for Kw in the 
\usage section.

You haven't pushed this file to Github, so I can't offer any more advice.

Duncan Murdoch

> 
> I'm so sorry to bother
> BW
> Troels
> 
> -----Oprindelig meddelelse-----
> Fra: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sendt: 26. januar 2019 14:45
> Til: Troels Ring <tring at gvdnet.dk>; 'Michael Dewey' <lists at dewey.myzen.co.uk>; 'package-develop' <r-package-devel at r-project.org>
> Emne: Re: [R-pkg-devel] package docu
> 
> On 26/01/2019 8:31 a.m., Troels Ring wrote:
>> Dear Michael - fantastic: TOTAL is now acknowledged -- so I only need the constants kw, K3, and Kc from the utility_acid.r file - how for format their documentation - they are available as required inside and outside the package.
> 
> Within R, set your working directory to the man directory for your package, then run
> 
>     prompt(kw)
> 
> and it will create kw.Rd in the right format.  You just need to edit it to fill in the details.  There will be comments in the file explaining what to do.  Don't put quotes on the name; prompt("kw") is wrong.
> 
> Duncan Murdoch
> 
> 
>>
>> All best wishes
>> Troels
>>
>> -----Oprindelig meddelelse-----
>> Fra: Michael Dewey <lists at dewey.myzen.co.uk>
>> Sendt: 26. januar 2019 13:17
>> Til: Troels Ring <tring at gvdnet.dk>; package-develop
>> <r-package-devel at r-project.org>
>> Emne: Re: [R-pkg-devel] package docu
>>
>> Dear Troels
>>
>> What happens if you add \alias{TOTAL}
>>
>> Michael
>>
>> On 26/01/2019 08:15, Troels Ring wrote:
>>> Dear friends - I'm struggling to get the documentation of my package
>>> correct. The working package is now (with your help!) at
>>>
>>> devtools::install_github("troelsring/ABCharge")
>>>
>>> and in its proto version includes only a single dataset "brom.RData"
>>> which has two components, a data.frame "brom" and a matrix TOTAL.
>>> These are documented in the brom.RD file shown below.
>>>
>>>     
>>>
>>>     
>>>
>>> \name{brom}
>>>
>>> \alias{brom}
>>>
>>> \docType{data}
>>>
>>> \title{
>>>
>>> bromic acid data from Glaser et al 2014
>>>
>>> }
>>>
>>> \description{
>>>
>>>      Data to find optimal pK for bromic acid
>>>
>>> }
>>>
>>> \usage{data("brom")}
>>>
>>> \format{
>>>
>>> A workspace.
>>>
>>>      \describe{
>>>
>>>        \item{brom}{Dataframe of Table S4 in Glaser et al.}
>>>
>>>        \item{TOTAL}{Matrix of buffer concentrations.}
>>>
>>>      }
>>>
>>> }
>>>
>>> \source{
>>>
>>> Glaser RE et al. Dynamical approach to multiequilibria problems for
>>> mixtures of
>>>
>>> acids and their conjugate bases. J Chem Educ 2014; 91: 1009-1016
>>>
>>> }
>>>
>>> \examples{
>>>
>>> data(brom)
>>>
>>> ----- a long example - works well
>>>
>>>     
>>>
>>> Now when running ctrl-shift-E, I get
>>>
>>>     
>>>
>>>> checking for missing documentation entries ... WARNING
>>>
>>>      Undocumented code objects:
>>>
>>>        'K3' 'Kc' 'kw'
>>>
>>>      Undocumented data sets:
>>>
>>>        'TOTAL'
>>>
>>>      All user-level objects in a package should have documentation entries.
>>>
>>>      See chapter 'Writing R documentation files' in the 'Writing R
>>>
>>>      Extensions' manual.
>>>
>>>     
>>>
>>> 0 errors v | 1 warning x | 0 notes v
>>>
>>> Fejl: R CMD check found WARNINGs
>>>
>>> run stoppet
>>>
>>>     
>>>
>>> Exited with status 1.
>>>
>>>     
>>>
>>> I wonder why the specification of TOTAL in the RD file is ignored?
>>>
>>>     
>>>
>>> Also the three constants kw, Kc, and K3 are not properly documented.
>>> They are declared and exported in the utility_acid.r file and I have
>>> tried to document them as  @params in that file but it seems to be
>>> ignored and cause other problems so I have them at present
>>> undocumented since I don't know where to put the documentation.
>>>
>>>
>>> 	[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> --
>> Michael
>> http://www.dewey.myzen.co.uk/home.html
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
>


From tr|ng @end|ng |rom gvdnet@dk  Sun Jan 27 08:49:54 2019
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Sun, 27 Jan 2019 08:49:54 +0100
Subject: [R-pkg-devel] package docu
In-Reply-To: nVBMgXwPjwUhznVBOgcXHB
References: <000001d4b54f$567f1580$037d4080$@gvdnet.dk>
 <0a2001d4b57b$64768200$2d638600$@gvdnet.dk>
 <553b01d4b57f$fd32dcb0$f7989610$@gvdnet.dk> nVBMgXwPjwUhznVBOgcXHB
Message-ID: <001d01d4b614$e7977150$b6c653f0$@gvdnet.dk>

Thanks a lot - I followed your suggestion, and prompt generated under usage: data(kw) - which is not working as kw is just a single number. So I just removed the usage section and no complaints are left. Thanks for all help!
BW
Troels

-----Oprindelig meddelelse-----
Fra: Duncan Murdoch <murdoch.duncan at gmail.com> 
Sendt: 26. januar 2019 22:08
Til: Troels Ring <tring at gvdnet.dk>; 'Michael Dewey' <lists at dewey.myzen.co.uk>; 'package-develop' <r-package-devel at r-project.org>
Emne: Re: SV: [R-pkg-devel] package docu

On 26/01/2019 9:04 a.m., Troels Ring wrote:
> Thanks a lot - I tried with prompt(kw) and that warning disappeared 
> but instead I got another
>> checking for code/documentation mismatches ... WARNING
>    Data with usage in documentation object 'kw' but not in code:
>      Kw
> 
> And the code is really full og kw -

That message is about the Rd file, not the code.  Look for Kw in the \usage section.

You haven't pushed this file to Github, so I can't offer any more advice.

Duncan Murdoch

> 
> I'm so sorry to bother
> BW
> Troels
> 
> -----Oprindelig meddelelse-----
> Fra: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sendt: 26. januar 2019 14:45
> Til: Troels Ring <tring at gvdnet.dk>; 'Michael Dewey' 
> <lists at dewey.myzen.co.uk>; 'package-develop' 
> <r-package-devel at r-project.org>
> Emne: Re: [R-pkg-devel] package docu
> 
> On 26/01/2019 8:31 a.m., Troels Ring wrote:
>> Dear Michael - fantastic: TOTAL is now acknowledged -- so I only need the constants kw, K3, and Kc from the utility_acid.r file - how for format their documentation - they are available as required inside and outside the package.
> 
> Within R, set your working directory to the man directory for your 
> package, then run
> 
>     prompt(kw)
> 
> and it will create kw.Rd in the right format.  You just need to edit it to fill in the details.  There will be comments in the file explaining what to do.  Don't put quotes on the name; prompt("kw") is wrong.
> 
> Duncan Murdoch
> 
> 
>>
>> All best wishes
>> Troels
>>
>> -----Oprindelig meddelelse-----
>> Fra: Michael Dewey <lists at dewey.myzen.co.uk>
>> Sendt: 26. januar 2019 13:17
>> Til: Troels Ring <tring at gvdnet.dk>; package-develop 
>> <r-package-devel at r-project.org>
>> Emne: Re: [R-pkg-devel] package docu
>>
>> Dear Troels
>>
>> What happens if you add \alias{TOTAL}
>>
>> Michael
>>
>> On 26/01/2019 08:15, Troels Ring wrote:
>>> Dear friends - I'm struggling to get the documentation of my package 
>>> correct. The working package is now (with your help!) at
>>>
>>> devtools::install_github("troelsring/ABCharge")
>>>
>>> and in its proto version includes only a single dataset "brom.RData"
>>> which has two components, a data.frame "brom" and a matrix TOTAL.
>>> These are documented in the brom.RD file shown below.
>>>
>>>     
>>>
>>>     
>>>
>>> \name{brom}
>>>
>>> \alias{brom}
>>>
>>> \docType{data}
>>>
>>> \title{
>>>
>>> bromic acid data from Glaser et al 2014
>>>
>>> }
>>>
>>> \description{
>>>
>>>      Data to find optimal pK for bromic acid
>>>
>>> }
>>>
>>> \usage{data("brom")}
>>>
>>> \format{
>>>
>>> A workspace.
>>>
>>>      \describe{
>>>
>>>        \item{brom}{Dataframe of Table S4 in Glaser et al.}
>>>
>>>        \item{TOTAL}{Matrix of buffer concentrations.}
>>>
>>>      }
>>>
>>> }
>>>
>>> \source{
>>>
>>> Glaser RE et al. Dynamical approach to multiequilibria problems for 
>>> mixtures of
>>>
>>> acids and their conjugate bases. J Chem Educ 2014; 91: 1009-1016
>>>
>>> }
>>>
>>> \examples{
>>>
>>> data(brom)
>>>
>>> ----- a long example - works well
>>>
>>>     
>>>
>>> Now when running ctrl-shift-E, I get
>>>
>>>     
>>>
>>>> checking for missing documentation entries ... WARNING
>>>
>>>      Undocumented code objects:
>>>
>>>        'K3' 'Kc' 'kw'
>>>
>>>      Undocumented data sets:
>>>
>>>        'TOTAL'
>>>
>>>      All user-level objects in a package should have documentation entries.
>>>
>>>      See chapter 'Writing R documentation files' in the 'Writing R
>>>
>>>      Extensions' manual.
>>>
>>>     
>>>
>>> 0 errors v | 1 warning x | 0 notes v
>>>
>>> Fejl: R CMD check found WARNINGs
>>>
>>> run stoppet
>>>
>>>     
>>>
>>> Exited with status 1.
>>>
>>>     
>>>
>>> I wonder why the specification of TOTAL in the RD file is ignored?
>>>
>>>     
>>>
>>> Also the three constants kw, Kc, and K3 are not properly documented.
>>> They are declared and exported in the utility_acid.r file and I have 
>>> tried to document them as  @params in that file but it seems to be 
>>> ignored and cause other problems so I have them at present 
>>> undocumented since I don't know where to put the documentation.
>>>
>>>
>>> 	[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list 
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> --
>> Michael
>> http://www.dewey.myzen.co.uk/home.html
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list 
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jan 27 12:59:51 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 27 Jan 2019 06:59:51 -0500
Subject: [R-pkg-devel] package docu
In-Reply-To: <001d01d4b614$e7977150$b6c653f0$@gvdnet.dk>
References: <000001d4b54f$567f1580$037d4080$@gvdnet.dk>
 <0a2001d4b57b$64768200$2d638600$@gvdnet.dk>
 <553b01d4b57f$fd32dcb0$f7989610$@gvdnet.dk>
 <001d01d4b614$e7977150$b6c653f0$@gvdnet.dk>
Message-ID: <48cb3719-bfde-cc9c-d881-f2bdacc89696@gmail.com>

On 27/01/2019 2:49 a.m., Troels Ring wrote:
> Thanks a lot - I followed your suggestion, and prompt generated under usage: data(kw) - which is not working as kw is just a single number. So I just removed the usage section and no complaints are left. Thanks for all help!

Sorry, I misread an earlier message and thought that kw was a function, 
not data.  If it is data, use promptData() instead of prompt.

Duncan Murdoch

> BW
> Troels
> 
> -----Oprindelig meddelelse-----
> Fra: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sendt: 26. januar 2019 22:08
> Til: Troels Ring <tring at gvdnet.dk>; 'Michael Dewey' <lists at dewey.myzen.co.uk>; 'package-develop' <r-package-devel at r-project.org>
> Emne: Re: SV: [R-pkg-devel] package docu
> 
> On 26/01/2019 9:04 a.m., Troels Ring wrote:
>> Thanks a lot - I tried with prompt(kw) and that warning disappeared
>> but instead I got another
>>> checking for code/documentation mismatches ... WARNING
>>     Data with usage in documentation object 'kw' but not in code:
>>       Kw
>>
>> And the code is really full og kw -
> 
> That message is about the Rd file, not the code.  Look for Kw in the \usage section.
> 
> You haven't pushed this file to Github, so I can't offer any more advice.
> 
> Duncan Murdoch
> 
>>
>> I'm so sorry to bother
>> BW
>> Troels
>>
>> -----Oprindelig meddelelse-----
>> Fra: Duncan Murdoch <murdoch.duncan at gmail.com>
>> Sendt: 26. januar 2019 14:45
>> Til: Troels Ring <tring at gvdnet.dk>; 'Michael Dewey'
>> <lists at dewey.myzen.co.uk>; 'package-develop'
>> <r-package-devel at r-project.org>
>> Emne: Re: [R-pkg-devel] package docu
>>
>> On 26/01/2019 8:31 a.m., Troels Ring wrote:
>>> Dear Michael - fantastic: TOTAL is now acknowledged -- so I only need the constants kw, K3, and Kc from the utility_acid.r file - how for format their documentation - they are available as required inside and outside the package.
>>
>> Within R, set your working directory to the man directory for your
>> package, then run
>>
>>      prompt(kw)
>>
>> and it will create kw.Rd in the right format.  You just need to edit it to fill in the details.  There will be comments in the file explaining what to do.  Don't put quotes on the name; prompt("kw") is wrong.
>>
>> Duncan Murdoch
>>
>>
>>>
>>> All best wishes
>>> Troels
>>>
>>> -----Oprindelig meddelelse-----
>>> Fra: Michael Dewey <lists at dewey.myzen.co.uk>
>>> Sendt: 26. januar 2019 13:17
>>> Til: Troels Ring <tring at gvdnet.dk>; package-develop
>>> <r-package-devel at r-project.org>
>>> Emne: Re: [R-pkg-devel] package docu
>>>
>>> Dear Troels
>>>
>>> What happens if you add \alias{TOTAL}
>>>
>>> Michael
>>>
>>> On 26/01/2019 08:15, Troels Ring wrote:
>>>> Dear friends - I'm struggling to get the documentation of my package
>>>> correct. The working package is now (with your help!) at
>>>>
>>>> devtools::install_github("troelsring/ABCharge")
>>>>
>>>> and in its proto version includes only a single dataset "brom.RData"
>>>> which has two components, a data.frame "brom" and a matrix TOTAL.
>>>> These are documented in the brom.RD file shown below.
>>>>
>>>>      
>>>>
>>>>      
>>>>
>>>> \name{brom}
>>>>
>>>> \alias{brom}
>>>>
>>>> \docType{data}
>>>>
>>>> \title{
>>>>
>>>> bromic acid data from Glaser et al 2014
>>>>
>>>> }
>>>>
>>>> \description{
>>>>
>>>>       Data to find optimal pK for bromic acid
>>>>
>>>> }
>>>>
>>>> \usage{data("brom")}
>>>>
>>>> \format{
>>>>
>>>> A workspace.
>>>>
>>>>       \describe{
>>>>
>>>>         \item{brom}{Dataframe of Table S4 in Glaser et al.}
>>>>
>>>>         \item{TOTAL}{Matrix of buffer concentrations.}
>>>>
>>>>       }
>>>>
>>>> }
>>>>
>>>> \source{
>>>>
>>>> Glaser RE et al. Dynamical approach to multiequilibria problems for
>>>> mixtures of
>>>>
>>>> acids and their conjugate bases. J Chem Educ 2014; 91: 1009-1016
>>>>
>>>> }
>>>>
>>>> \examples{
>>>>
>>>> data(brom)
>>>>
>>>> ----- a long example - works well
>>>>
>>>>      
>>>>
>>>> Now when running ctrl-shift-E, I get
>>>>
>>>>      
>>>>
>>>>> checking for missing documentation entries ... WARNING
>>>>
>>>>       Undocumented code objects:
>>>>
>>>>         'K3' 'Kc' 'kw'
>>>>
>>>>       Undocumented data sets:
>>>>
>>>>         'TOTAL'
>>>>
>>>>       All user-level objects in a package should have documentation entries.
>>>>
>>>>       See chapter 'Writing R documentation files' in the 'Writing R
>>>>
>>>>       Extensions' manual.
>>>>
>>>>      
>>>>
>>>> 0 errors v | 1 warning x | 0 notes v
>>>>
>>>> Fejl: R CMD check found WARNINGs
>>>>
>>>> run stoppet
>>>>
>>>>      
>>>>
>>>> Exited with status 1.
>>>>
>>>>      
>>>>
>>>> I wonder why the specification of TOTAL in the RD file is ignored?
>>>>
>>>>      
>>>>
>>>> Also the three constants kw, Kc, and K3 are not properly documented.
>>>> They are declared and exported in the utility_acid.r file and I have
>>>> tried to document them as  @params in that file but it seems to be
>>>> ignored and cause other problems so I have them at present
>>>> undocumented since I don't know where to put the documentation.
>>>>
>>>>
>>>> 	[[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
>>> --
>>> Michael
>>> http://www.dewey.myzen.co.uk/home.html
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>>
> 
>


From @vr@h@m@@d|er @end|ng |rom gm@||@com  Sun Jan 27 18:28:33 2019
From: @vr@h@m@@d|er @end|ng |rom gm@||@com (Avraham Adler)
Date: Sun, 27 Jan 2019 12:28:33 -0500
Subject: [R-pkg-devel] OpenMP & Fortran: Seemingly contradictory responses
 from CRAN
Message-ID: <CAL6gwn+rnhsYy+F9UharHhRz=R1XtsLbqhZugixxR8vqNM0sUQ@mail.gmail.com>

Hello.

I am at my wits end as to how to comply with CRAN regarding my
Delaporte package which uses Fortran and OpenMP [1].

Recently, it was announced [2] that going forward, OpenMP should be
linked with SHLIB_OPENMP_CFLAGS.

Moreover, I received an email from Professor Ripley, stating:

-------START Prof. Ripley------
There are two issues

- Linking in R-devel is done by C or C++ even for F95 code, so PKG_LIBS
needs to contain the appropriate macro, SHLIB_OPENMP_CFLAGS for all
these packages.

- SHLIB_OPENMP_FFLAGS is preferred to SHLIB_OPENMP_FCFLAGS

There are two possibilities to correct this:

A) Make a version of the package depending on R(>=3.6.0) and submit
stating it is intended for the 3.6.0/Others area.

B) With both points changed the package should still work under R 3.5.x
as for current platforms SHLIB_OPENMP_FFLAGS, SHLIB_OPENMP_FCFLAGS and
SHLIB_OPENMP_CFLAGS have the same value.  So it could be submitted for
the main CRAN area.
-------STOP Prof. Riple------

My first attempt had the following Makevars submitted the to CRAN:

PKG_FFLAGS = $(SHLIB_OPENMP_CFLAGS)
PKG_LIBS = $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS) $(SHLIB_OPENMP_CFLAGS)

Granted, this would not have had OpenMP for other reasons (FFLAGS will
only be recognized for free-form Fortran in R 3.6+) but the submission
was denied with the following note:

-----START CRAN-----

Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
Check: use of SHLIB_OPENMP_*FLAGS in Makefiles, Result: NOTE
    src/Makevars: incorrect macro SHLIB_OPENMP_CFLAGS included in PKG_FFLAGS
    src/Makevars: SHLIB_OPENMP_CFLAGS is included in PKG_LIBS but not
in PKG_CFLAGS
-----STOP CRAN-----

Uwe Ligges was kind enough to clarify:

-----START Prof. Ligges-----
Sun, Jan 13, 12:16 PM (8 days ago)

to me, CRAN-submissions
Pls re-read Brian's comment and note that we already check with R-devel.
He daid:

" PKG_LIBS needs to contain the appropriate macro, SHLIB_OPENMP_CFLAGS "

but you have it in PKG_FFLAGS now?
(first) and then
" SHLIB_OPENMP_CFLAGS is included in PKG_LIBS but not in PKG_CFLAGS", si
please declare it there, too.
-----STOP Prof. Ligges-----

So, I declared CFLAGS too. However, When I passed (substituting
FCFLAGS so that OpenMP will work in R-release):

PKG_CFLAGS = $(SHLIB_OPENMP_CFLAGS)
PKG_FCFLAGS = $(SHLIB_OPENMP_CFLAGS)
PKG_LIBS = $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS) $(SHLIB_OPENMP_CFLAGS)

I got:

-----START CRAN-----
Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
Check: use of SHLIB_OPENMP_*FLAGS in Makefiles, Result: NOTE
    src/Makevars: incorrect macro SHLIB_OPENMP_CFLAGS included in PKG_FCFLAGS
-----STOP CRAN-----

If I give up and focus just on R-release by passing:

PKG_FCFLAGS = $(SHLIB_OPENMP_FCFLAGS)
PKG_LIBS = $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS) $(SHLIB_OPENMP_FCFLAGS)

I get:

-----START CRAN-----
Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
Check: use of SHLIB_OPENMP_*FLAGS in Makefiles, Result: NOTE
    src/Makevars: SHLIB_OPENMP_FFLAGS is preferred to
SHLIB_OPENMP_FCFLAGS in PKG_FCFLAGS
    src/Makevars: SHLIB_OPENMP_FCFLAGS is included in PKG_FCFLAGS but
not SHLIB_OPENMP_CFLAGS in PKG_LIBS
    src/Makevars: SHLIB_OPENMP_FCFLAGS is included in PKG_LIBS but
linking is by C
-----STOP CRAN-----

If I really give up and pass Depend: R <= 3.5.2 in the DESCRIPTION,
*noting in the comments that I will submit a new R 3.6+ only version
when it is released* I still get a failure:

-----START CRAN-----
Flavor: r-devel-windows-ix86+x86_64
Check: whether package can be installed, Result: ERROR
  Installation failed.
  See 'd:/RCompile/CRANincoming/R-devel/Delaporte.Rcheck/00install.out'
for details.

Flavor: r-devel-linux-x86_64-debian-gcc
Check: whether package can be installed, Result: ERROR
  Installation failed.
  See '/srv/hornik/tmp/CRAN/Delaporte.Rcheck/00install.out' for details

-----STOP CRAN-----

Which actually was the point, to be honest. It wasn't supposed to pass R-devel.

I cannot pass JUST:

PKG_CFLAGS = $(SHLIB_OPENMP_CFLAGS)
PKG_LIBS = $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS) $(SHLIB_OPENMP_CFLAGS)

AS OpenMP would not be compiled into the Fortran.

I really would like to have oe version of the package that is CRAN
compliant, but at this point, I cannot see how to do that based on the
various rejection messages I got. Maybe I'm missing something simple,
in which case, please explain. Any guidance would be much appreciated.

Thank you,

Avi

[1] https://cran.r-project.org/package=Delaporte
[2] https://developer.r-project.org/blosxom.cgi/R-devel/NEWS/2018/12/04#n2018-12-04


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Jan 29 12:47:38 2019
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 29 Jan 2019 14:47:38 +0300
Subject: [R-pkg-devel] Robj: reading proprietary format - first time
 packaging
Message-ID: <20190129144738.4595373c@trisector>

Hi!

Not being able to find an R package that would let me import an
Origin(R)[0] OPJ file, I found liborigin[1] and used Rcpp (thanks,
Dirk Eddelbuettel!) to create the package which I titled Ropj[2]. Right
now it only understands the absolute minimum of what I needed to
import, but I intend to translate more object types in the future.

I have bundled liborigin as a subdirectory under src, which seems to be
an acceptable practice for small (3 *.cpp files) libraries whose
license (GPL >= 3) matches the package. I'm passing R CMD check
--as-cran, both on my PC and at win-builder (thanks, Uwe Ligges!) [3],
except with a small NOTE that the word OPJ might be misspelled.

Is there anything I might have overlooked that would prevent this
package from being accepted to CRAN? For example, could the presence of
the words Origin(R) or OPJ or OPJ-decoding code itself be a problem
from trademark or licensing point of view?

Should I submit the first version right away or implement all the
features I can in advance?

-- 
Best regards,
Ivan

[0] https://www.originlab.com/viewer/

[1] https://sourceforge.net/projects/liborigin/

[2] https://github.com/aitap/Ropj

[3] https://win-builder.r-project.org/21Zq5r95d3j8/


From p@@c@|t|t|e @end|ng |rom gm@||@com  Tue Jan 29 22:40:23 2019
From: p@@c@|t|t|e @end|ng |rom gm@||@com (Pascal Title)
Date: Tue, 29 Jan 2019 16:40:23 -0500
Subject: [R-pkg-devel] define an environment in .onLoad
Message-ID: <CAPSA=yfGQMEcntT_k3c-TsR7axA0KBhrU=nKiSyWG-m5vc7o=A@mail.gmail.com>

Hi,

I am developing an R package where I would like to have a set of names
defined once, and which could then be queried from within the various
functions of the package. The way I have currently set this up is to define
a new environment that contains these names.

So, what I currently have is:

.var <- new.env()

.var$bio <- "bio_"

.var$tmin <- "tmin_"

.var$tmax <- "tmax_"

What I would like is that this environment be created when the R package is
loaded. That way, default values are automatically in place, and if the
user would like to change the naming that they use for tmin, for example,
they would just need to do (for example):


.var$tmin <- ?minTemp_'


And then these names can be accessed from within any of the functions, and
this is unlikely to conflict with any R objects the user is defining.


Where I am stuck is how/where to define this new environment such that it
is made available when the package is loaded. I tried including the
following in R/zzz.R:


.onLoad <- function(libname, pkgname) {


  # define a custom environment for defining the naming of variables

.var <- new.env()

# default

.var$bio <- "bio_"

.var$tmin <- "tmin_"

.var$tmax <- "tmax_"

invisible()

}


But if I build/install the package, the .var environment is not already
created. Any suggestions?


Thanks!

-Pascal

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Jan 29 22:47:08 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 29 Jan 2019 21:47:08 +0000
Subject: [R-pkg-devel] define an environment in .onLoad
In-Reply-To: <CAPSA=yfGQMEcntT_k3c-TsR7axA0KBhrU=nKiSyWG-m5vc7o=A@mail.gmail.com>
References: <CAPSA=yfGQMEcntT_k3c-TsR7axA0KBhrU=nKiSyWG-m5vc7o=A@mail.gmail.com>
Message-ID: <CABtg=KkFtaW=M+KMU9eJiLNjV3kRW5xk5-A_9Nn1FbdUnkcwUA@mail.gmail.com>

You don't need .onLoad for this, just put the environment into the
package environment. E.g. simply add

pkg_data <- new.env(parent = emptyenv())

to your package code. Then you can refer to pkg_data from the
functions in the package.

Best,
Gabor

On Tue, Jan 29, 2019 at 9:40 PM Pascal Title <pascaltitle at gmail.com> wrote:
>
> Hi,
>
> I am developing an R package where I would like to have a set of names
> defined once, and which could then be queried from within the various
> functions of the package. The way I have currently set this up is to define
> a new environment that contains these names.
>
> So, what I currently have is:
>
> .var <- new.env()
>
> .var$bio <- "bio_"
>
> .var$tmin <- "tmin_"
>
> .var$tmax <- "tmax_"
>
> What I would like is that this environment be created when the R package is
> loaded. That way, default values are automatically in place, and if the
> user would like to change the naming that they use for tmin, for example,
> they would just need to do (for example):
>
>
> .var$tmin <- ?minTemp_'
>
>
> And then these names can be accessed from within any of the functions, and
> this is unlikely to conflict with any R objects the user is defining.
>
>
> Where I am stuck is how/where to define this new environment such that it
> is made available when the package is loaded. I tried including the
> following in R/zzz.R:
>
>
> .onLoad <- function(libname, pkgname) {
>
>
>   # define a custom environment for defining the naming of variables
>
> .var <- new.env()
>
> # default
>
> .var$bio <- "bio_"
>
> .var$tmin <- "tmin_"
>
> .var$tmax <- "tmax_"
>
> invisible()
>
> }
>
>
> But if I build/install the package, the .var environment is not already
> created. Any suggestions?
>
>
> Thanks!
>
> -Pascal
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From p@@c@|t|t|e @end|ng |rom gm@||@com  Tue Jan 29 22:53:05 2019
From: p@@c@|t|t|e @end|ng |rom gm@||@com (Pascal Title)
Date: Tue, 29 Jan 2019 16:53:05 -0500
Subject: [R-pkg-devel] define an environment in .onLoad
In-Reply-To: <CABtg=KkFtaW=M+KMU9eJiLNjV3kRW5xk5-A_9Nn1FbdUnkcwUA@mail.gmail.com>
References: <CAPSA=yfGQMEcntT_k3c-TsR7axA0KBhrU=nKiSyWG-m5vc7o=A@mail.gmail.com>
 <CABtg=KkFtaW=M+KMU9eJiLNjV3kRW5xk5-A_9Nn1FbdUnkcwUA@mail.gmail.com>
Message-ID: <CAPSA=yeW4T9JiTreQ-XnWcNA1Y219GAEyTZ_MGn073KjnidC5Q@mail.gmail.com>

Thank you!
I had actually tried that, but forgot to export that additional R script.
This makes sense.


On January 29, 2019 at 16:47:20, G?bor Cs?rdi (csardi.gabor at gmail.com)
wrote:

You don't need .onLoad for this, just put the environment into the
package environment. E.g. simply add

pkg_data <- new.env(parent = emptyenv())

to your package code. Then you can refer to pkg_data from the
functions in the package.

Best,
Gabor

On Tue, Jan 29, 2019 at 9:40 PM Pascal Title <pascaltitle at gmail.com> wrote:
>
> Hi,
>
> I am developing an R package where I would like to have a set of names
> defined once, and which could then be queried from within the various
> functions of the package. The way I have currently set this up is to
define
> a new environment that contains these names.
>
> So, what I currently have is:
>
> .var <- new.env()
>
> .var$bio <- "bio_"
>
> .var$tmin <- "tmin_"
>
> .var$tmax <- "tmax_"
>
> What I would like is that this environment be created when the R package
is
> loaded. That way, default values are automatically in place, and if the
> user would like to change the naming that they use for tmin, for example,
> they would just need to do (for example):
>
>
> .var$tmin <- ?minTemp_'
>
>
> And then these names can be accessed from within any of the functions,
and
> this is unlikely to conflict with any R objects the user is defining.
>
>
> Where I am stuck is how/where to define this new environment such that it
> is made available when the package is loaded. I tried including the
> following in R/zzz.R:
>
>
> .onLoad <- function(libname, pkgname) {
>
>
> # define a custom environment for defining the naming of variables
>
> .var <- new.env()
>
> # default
>
> .var$bio <- "bio_"
>
> .var$tmin <- "tmin_"
>
> .var$tmax <- "tmax_"
>
> invisible()
>
> }
>
>
> But if I build/install the package, the .var environment is not already
> created. Any suggestions?
>
>
> Thanks!
>
> -Pascal
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Tue Jan 29 23:16:31 2019
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Tue, 29 Jan 2019 22:16:31 +0000
Subject: [R-pkg-devel] define an environment in .onLoad
In-Reply-To: <CABtg=KkFtaW=M+KMU9eJiLNjV3kRW5xk5-A_9Nn1FbdUnkcwUA@mail.gmail.com>
References: <CAPSA=yfGQMEcntT_k3c-TsR7axA0KBhrU=nKiSyWG-m5vc7o=A@mail.gmail.com>
 <CABtg=KkFtaW=M+KMU9eJiLNjV3kRW5xk5-A_9Nn1FbdUnkcwUA@mail.gmail.com>
Message-ID: <MN2PR05MB6496AD30595F7DA2B5E10C83F9970@MN2PR05MB6496.namprd05.prod.outlook.com>

A variant (not quite as good because parent = emptyenv() is not an argument) is

pkg_data <- local({ a = 1; b =2; environment() })

If information at load time is also important, one might add

.onLoad <- function(libname, pkgname) {
    pkg_data[["last_update"]] <- Sys.time()
}

which is actually a fun test of one's understanding of R's assignment and symbol look-up rules.

Martin Morgan

?On 1/29/19, 4:50 PM, "R-package-devel on behalf of G?bor Cs?rdi" <r-package-devel-bounces at r-project.org on behalf of csardi.gabor at gmail.com> wrote:

    You don't need .onLoad for this, just put the environment into the
    package environment. E.g. simply add
    
    pkg_data <- new.env(parent = emptyenv())
    
    to your package code. Then you can refer to pkg_data from the
    functions in the package.
    
    Best,
    Gabor
    
    On Tue, Jan 29, 2019 at 9:40 PM Pascal Title <pascaltitle at gmail.com> wrote:
    >
    > Hi,
    >
    > I am developing an R package where I would like to have a set of names
    > defined once, and which could then be queried from within the various
    > functions of the package. The way I have currently set this up is to define
    > a new environment that contains these names.
    >
    > So, what I currently have is:
    >
    > .var <- new.env()
    >
    > .var$bio <- "bio_"
    >
    > .var$tmin <- "tmin_"
    >
    > .var$tmax <- "tmax_"
    >
    > What I would like is that this environment be created when the R package is
    > loaded. That way, default values are automatically in place, and if the
    > user would like to change the naming that they use for tmin, for example,
    > they would just need to do (for example):
    >
    >
    > .var$tmin <- ?minTemp_'
    >
    >
    > And then these names can be accessed from within any of the functions, and
    > this is unlikely to conflict with any R objects the user is defining.
    >
    >
    > Where I am stuck is how/where to define this new environment such that it
    > is made available when the package is loaded. I tried including the
    > following in R/zzz.R:
    >
    >
    > .onLoad <- function(libname, pkgname) {
    >
    >
    >   # define a custom environment for defining the naming of variables
    >
    > .var <- new.env()
    >
    > # default
    >
    > .var$bio <- "bio_"
    >
    > .var$tmin <- "tmin_"
    >
    > .var$tmax <- "tmax_"
    >
    > invisible()
    >
    > }
    >
    >
    > But if I build/install the package, the .var environment is not already
    > created. Any suggestions?
    >
    >
    > Thanks!
    >
    > -Pascal
    >
    >         [[alternative HTML version deleted]]
    >
    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel
    
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel
    

From jw|j||e|@ @end|ng |rom bno@@c@be  Thu Jan 31 09:43:41 2019
From: jw|j||e|@ @end|ng |rom bno@@c@be (Jan Wijffels)
Date: Thu, 31 Jan 2019 09:43:41 +0100
Subject: [R-pkg-devel] what is difference between Mac setup of rhub and CRAN
Message-ID: <CAJ9GNanaSnz1kSnOZ=7FuAOJpqhjewy0KH7DyLYQ40xviatXZg@mail.gmail.com>

Hello,

I'm trying to find out what is different between the rhub and CRAN software
for Mac OS to fix the FAIL statement on a package I maintain called
ruimtehol (https://CRAN.R-project.org/package=ruimtehol).
The package builds and checks fine on all CRAN platforms except Mac
OS r-release-osx-x86_64.

>From what I see, the Mac setups on CRAN are currently:

1/ CRAN running R 3.4.4: r-oldrel-osx-x86_64  : OS X 10.11.6: Xcode 8.2.1,
clang 4.0.0, GNU Fortran 6.1
2/ CRAN running R 3.5.2: r-release-osx-x86_64 : OS X 10.11.6: Xcode 8.2.1,
clang 4.0.0, GNU Fortran 6.1
3/ rhub running R 3.5.2: unknown setup


The ruimtehol R package builds and checks fine on both CRAN running R 3.4.4
and rhub running R 3.5.2 but apparently FAILS on CRAN running R 3.5.2.

*Question 1*: Can someone indicate what is the difference between the 3
platforms regarding Mac setup (which possibly might give an indication on
what this check problem on the ruimtehol package)
*Question 2*: What can be a reason why a package fails on r-release-osx-x86_64
but checked fine on r-oldrel-osx-x86_64?

FYI. Rhub build on Mac OS with R 3.5.2. is available at
https://artifacts.r-hub.io/ruimtehol_0.1.2.tar.gz-147a4e1367b49538e6134bf0fdf76a32
       CRAN check restuls of the package are at
https://cran.r-project.org/web/checks/check_results_ruimtehol.html

thank you,
Jan

Jan Wijffels
Statistician
www.bnosac.be  | +32 486 611708

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu Jan 31 10:50:33 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 31 Jan 2019 09:50:33 +0000
Subject: [R-pkg-devel] 
 what is difference between Mac setup of rhub and CRAN
In-Reply-To: <CAJ9GNanaSnz1kSnOZ=7FuAOJpqhjewy0KH7DyLYQ40xviatXZg@mail.gmail.com>
References: <CAJ9GNanaSnz1kSnOZ=7FuAOJpqhjewy0KH7DyLYQ40xviatXZg@mail.gmail.com>
Message-ID: <CABtg=Kk9GQnxH81PjiCDPEkwee3xXF5jWmPLEcp7MhJ6+oDDvw@mail.gmail.com>

The R-hub macOS machine is also 10.11.6, and has XCode 8.2.1, but does
not use the CRAN clang 4.0.0 compiler currently. Seems like your
package has compiled code, so this _might_ matter. Sometimes there are
issues when linking C++ libs produced by different compilers, because
the ABIs can be slightly different. E.g. exceptions are sometimes lost
between compilation units. So if you are linking to a system library
that was compiled with the standard macOS compiler, then this can come
up. I suggest you download the clang compiler from CRAN and try to
reproduce it locally.

Best,
Gabor



On Thu, Jan 31, 2019 at 9:03 AM Jan Wijffels <jwijffels at bnosac.be> wrote:
>
> Hello,
>
> I'm trying to find out what is different between the rhub and CRAN software
> for Mac OS to fix the FAIL statement on a package I maintain called
> ruimtehol (https://CRAN.R-project.org/package=ruimtehol).
> The package builds and checks fine on all CRAN platforms except Mac
> OS r-release-osx-x86_64.
>
> From what I see, the Mac setups on CRAN are currently:
>
> 1/ CRAN running R 3.4.4: r-oldrel-osx-x86_64  : OS X 10.11.6: Xcode 8.2.1,
> clang 4.0.0, GNU Fortran 6.1
> 2/ CRAN running R 3.5.2: r-release-osx-x86_64 : OS X 10.11.6: Xcode 8.2.1,
> clang 4.0.0, GNU Fortran 6.1
> 3/ rhub running R 3.5.2: unknown setup
>
>
> The ruimtehol R package builds and checks fine on both CRAN running R 3.4.4
> and rhub running R 3.5.2 but apparently FAILS on CRAN running R 3.5.2.
>
> *Question 1*: Can someone indicate what is the difference between the 3
> platforms regarding Mac setup (which possibly might give an indication on
> what this check problem on the ruimtehol package)
> *Question 2*: What can be a reason why a package fails on r-release-osx-x86_64
> but checked fine on r-oldrel-osx-x86_64?
>
> FYI. Rhub build on Mac OS with R 3.5.2. is available at
> https://artifacts.r-hub.io/ruimtehol_0.1.2.tar.gz-147a4e1367b49538e6134bf0fdf76a32
>        CRAN check restuls of the package are at
> https://cran.r-project.org/web/checks/check_results_ruimtehol.html
>
> thank you,
> Jan
>
> Jan Wijffels
> Statistician
> www.bnosac.be  | +32 486 611708
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jw|j||e|@ @end|ng |rom bno@@c@be  Thu Jan 31 11:16:42 2019
From: jw|j||e|@ @end|ng |rom bno@@c@be (Jan Wijffels)
Date: Thu, 31 Jan 2019 11:16:42 +0100
Subject: [R-pkg-devel] 
 what is difference between Mac setup of rhub and CRAN
In-Reply-To: <CABtg=Kk9GQnxH81PjiCDPEkwee3xXF5jWmPLEcp7MhJ6+oDDvw@mail.gmail.com>
References: <CAJ9GNanaSnz1kSnOZ=7FuAOJpqhjewy0KH7DyLYQ40xviatXZg@mail.gmail.com>
 <CABtg=Kk9GQnxH81PjiCDPEkwee3xXF5jWmPLEcp7MhJ6+oDDvw@mail.gmail.com>
Message-ID: <CAJ9GNa=Hb3O3W1QOsB3CV9AAwPhaZTNeezuVX-eN9i6FRMHXXg@mail.gmail.com>

Gabor.

Thanks for the input.
I don't have a Mac machine at my disposal but another user of the package
tried helping out debugging here:
https://github.com/bnosac/ruimtehol/issues/10

The package has C++ code which relies on clang-3.3 or newer and relies on
-pthread. It has in it's src/Makevars (
https://github.com/bnosac/ruimtehol/blob/master/src/Makevars)

PKG_LIBS = -pthread
PKG_CPPFLAGS = -pthread

Is that what you mean with linking to a system library?
What version of the compiler is running on rhub and how is it different
from CRAN r-release-osx-x86_64 or even CRAN r-oldrel-osx-x86_64
About CRAN (Question 2): What can be a reason why a package fails on
r-release-osx-x86_64 but checked fine on r-oldrel-osx-x86_64

Jan

Jan Wijffels
Statistician
www.bnosac.be  | +32 486 611708


On Thu, 31 Jan 2019 at 10:50, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:

> The R-hub macOS machine is also 10.11.6, and has XCode 8.2.1, but does
> not use the CRAN clang 4.0.0 compiler currently. Seems like your
> package has compiled code, so this _might_ matter. Sometimes there are
> issues when linking C++ libs produced by different compilers, because
> the ABIs can be slightly different. E.g. exceptions are sometimes lost
> between compilation units. So if you are linking to a system library
> that was compiled with the standard macOS compiler, then this can come
> up. I suggest you download the clang compiler from CRAN and try to
> reproduce it locally.
>
> Best,
> Gabor
>
>
>
> On Thu, Jan 31, 2019 at 9:03 AM Jan Wijffels <jwijffels at bnosac.be> wrote:
> >
> > Hello,
> >
> > I'm trying to find out what is different between the rhub and CRAN
> software
> > for Mac OS to fix the FAIL statement on a package I maintain called
> > ruimtehol (https://CRAN.R-project.org/package=ruimtehol).
> > The package builds and checks fine on all CRAN platforms except Mac
> > OS r-release-osx-x86_64.
> >
> > From what I see, the Mac setups on CRAN are currently:
> >
> > 1/ CRAN running R 3.4.4: r-oldrel-osx-x86_64  : OS X 10.11.6: Xcode
> 8.2.1,
> > clang 4.0.0, GNU Fortran 6.1
> > 2/ CRAN running R 3.5.2: r-release-osx-x86_64 : OS X 10.11.6: Xcode
> 8.2.1,
> > clang 4.0.0, GNU Fortran 6.1
> > 3/ rhub running R 3.5.2: unknown setup
> >
> >
> > The ruimtehol R package builds and checks fine on both CRAN running R
> 3.4.4
> > and rhub running R 3.5.2 but apparently FAILS on CRAN running R 3.5.2.
> >
> > *Question 1*: Can someone indicate what is the difference between the 3
> > platforms regarding Mac setup (which possibly might give an indication on
> > what this check problem on the ruimtehol package)
> > *Question 2*: What can be a reason why a package fails on
> r-release-osx-x86_64
> > but checked fine on r-oldrel-osx-x86_64?
> >
> > FYI. Rhub build on Mac OS with R 3.5.2. is available at
> >
> https://artifacts.r-hub.io/ruimtehol_0.1.2.tar.gz-147a4e1367b49538e6134bf0fdf76a32
> >        CRAN check restuls of the package are at
> > https://cran.r-project.org/web/checks/check_results_ruimtehol.html
> >
> > thank you,
> > Jan
> >
> > Jan Wijffels
> > Statistician
> > www.bnosac.be  | +32 486 611708
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu Jan 31 11:25:55 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 31 Jan 2019 10:25:55 +0000
Subject: [R-pkg-devel] 
 what is difference between Mac setup of rhub and CRAN
In-Reply-To: <CAJ9GNa=Hb3O3W1QOsB3CV9AAwPhaZTNeezuVX-eN9i6FRMHXXg@mail.gmail.com>
References: <CAJ9GNanaSnz1kSnOZ=7FuAOJpqhjewy0KH7DyLYQ40xviatXZg@mail.gmail.com>
 <CABtg=Kk9GQnxH81PjiCDPEkwee3xXF5jWmPLEcp7MhJ6+oDDvw@mail.gmail.com>
 <CAJ9GNa=Hb3O3W1QOsB3CV9AAwPhaZTNeezuVX-eN9i6FRMHXXg@mail.gmail.com>
Message-ID: <CABtg=KmiP_ygxEAETQrvMckwewmL4S0O=qX=C9Mo2ZtbXE6WnQ@mail.gmail.com>

See answers inline.

On Thu, Jan 31, 2019 at 10:16 AM Jan Wijffels <jwijffels at bnosac.be> wrote:
[...]
> The package has C++ code which relies on clang-3.3 or newer and relies on -pthread. It has in it's src/Makevars (https://github.com/bnosac/ruimtehol/blob/master/src/Makevars)
>
> PKG_LIBS = -pthread
> PKG_CPPFLAGS = -pthread
>
> Is that what you mean with linking to a system library?

Possibly, yes.

> What version of the compiler is running on rhub and how is it different from CRAN r-release-osx-x86_64 or even CRAN r-oldrel-osx-x86_64

R-hub uses the standard system compiler in Xcode. CRAN checks use
their custom built clang compiler. This is usually compatible with the
system compiler, except for some rare ABI issues. You can download it
at https://cran.r-project.org/bin/macosx/tools/  The check flavors
page at https://cran.r-project.org/web/checks/check_flavors.html might
be outdated, as it still shows clang 4.0.0. I don't know, I cannot
speak for CRAN.

> About CRAN (Question 2): What can be a reason why a package fails on r-release-osx-x86_64 but checked fine on r-oldrel-osx-x86_64

Hard to say. I think you only have a real chance to fix this if you
can reproduce it on your machine.

Gabor

[...]


From jw|j||e|@ @end|ng |rom bno@@c@be  Thu Jan 31 11:33:52 2019
From: jw|j||e|@ @end|ng |rom bno@@c@be (Jan Wijffels)
Date: Thu, 31 Jan 2019 11:33:52 +0100
Subject: [R-pkg-devel] 
 what is difference between Mac setup of rhub and CRAN
In-Reply-To: <CABtg=KmiP_ygxEAETQrvMckwewmL4S0O=qX=C9Mo2ZtbXE6WnQ@mail.gmail.com>
References: <CAJ9GNanaSnz1kSnOZ=7FuAOJpqhjewy0KH7DyLYQ40xviatXZg@mail.gmail.com>
 <CABtg=Kk9GQnxH81PjiCDPEkwee3xXF5jWmPLEcp7MhJ6+oDDvw@mail.gmail.com>
 <CAJ9GNa=Hb3O3W1QOsB3CV9AAwPhaZTNeezuVX-eN9i6FRMHXXg@mail.gmail.com>
 <CABtg=KmiP_ygxEAETQrvMckwewmL4S0O=qX=C9Mo2ZtbXE6WnQ@mail.gmail.com>
Message-ID: <CAJ9GNakmBOZa1jO_9KdhFn3TXN72OMfbj6bT4GNvMFE2_sEGiQ@mail.gmail.com>

Gabor. Thanks for the input. I unfortunately do not have a Mac at my
disposal to check this at that would be indeed the most optimal solution to
find out differences in the setups.

Is there someone on this mailing list which can comment on the CRAN
machines about MacOS to answer

What can be a reason why a package fails on r-release-osx-x86_64 but
checked fine on r-oldrel-osx-x86_64 as  the
https://cran.r-project.org/web/checks/check_flavors.html seem to indicate
they have the same setup? My package is using C++ code which relies on
clang-3.3 or newer and relies on -pthread. The src/Makevars are at
https://github.com/bnosac/ruimtehol/blob/master/src/Makevars

Jan

Jan Wijffels
Statistician
www.bnosac.be  | +32 486 611708


On Thu, 31 Jan 2019 at 11:26, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:

> See answers inline.
>
> On Thu, Jan 31, 2019 at 10:16 AM Jan Wijffels <jwijffels at bnosac.be> wrote:
> [...]
> > The package has C++ code which relies on clang-3.3 or newer and relies
> on -pthread. It has in it's src/Makevars (
> https://github.com/bnosac/ruimtehol/blob/master/src/Makevars)
> >
> > PKG_LIBS = -pthread
> > PKG_CPPFLAGS = -pthread
> >
> > Is that what you mean with linking to a system library?
>
> Possibly, yes.
>
> > What version of the compiler is running on rhub and how is it different
> from CRAN r-release-osx-x86_64 or even CRAN r-oldrel-osx-x86_64
>
> R-hub uses the standard system compiler in Xcode. CRAN checks use
> their custom built clang compiler. This is usually compatible with the
> system compiler, except for some rare ABI issues. You can download it
> at https://cran.r-project.org/bin/macosx/tools/  The check flavors
> page at https://cran.r-project.org/web/checks/check_flavors.html might
> be outdated, as it still shows clang 4.0.0. I don't know, I cannot
> speak for CRAN.
>
> > About CRAN (Question 2): What can be a reason why a package fails on
> r-release-osx-x86_64 but checked fine on r-oldrel-osx-x86_64
>
> Hard to say. I think you only have a real chance to fix this if you
> can reproduce it on your machine.
>
> Gabor
>
> [...]
>

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu Jan 31 11:58:49 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 31 Jan 2019 10:58:49 +0000
Subject: [R-pkg-devel] 
 what is difference between Mac setup of rhub and CRAN
In-Reply-To: <CAJ9GNakmBOZa1jO_9KdhFn3TXN72OMfbj6bT4GNvMFE2_sEGiQ@mail.gmail.com>
References: <CAJ9GNanaSnz1kSnOZ=7FuAOJpqhjewy0KH7DyLYQ40xviatXZg@mail.gmail.com>
 <CABtg=Kk9GQnxH81PjiCDPEkwee3xXF5jWmPLEcp7MhJ6+oDDvw@mail.gmail.com>
 <CAJ9GNa=Hb3O3W1QOsB3CV9AAwPhaZTNeezuVX-eN9i6FRMHXXg@mail.gmail.com>
 <CABtg=KmiP_ygxEAETQrvMckwewmL4S0O=qX=C9Mo2ZtbXE6WnQ@mail.gmail.com>
 <CAJ9GNakmBOZa1jO_9KdhFn3TXN72OMfbj6bT4GNvMFE2_sEGiQ@mail.gmail.com>
Message-ID: <CABtg=KmuwCiryGxc1NozN9jwr0uqBHnf3hz0ete6T+sFFHvMaA@mail.gmail.com>

I can reproduce your problem, and indeed it seems that it is a
compiler ABI incompatibility issue. I am not sure how it could be
fixed, though.

With the CRAN compiler it gets stuck here:

### Name: embed_articlespace
### Title: Build a Starspace model for learning the mapping between
###   sentences and articles (articlespace)
### Aliases: embed_articlespace

### ** Examples

library(udpipe)
data(brussels_reviews_anno, package = "udpipe")
x <- subset(brussels_reviews_anno, language == "nl")
x$token <- x$lemma
x <- x[, c("doc_id", "sentence_id", "token")]
set.seed(123456789)
model <- embed_articlespace(x, early_stopping = 1,
                            dim = 25, epoch = 25, minCount = 2,
                            negSearchLimit = 1, maxNegSamples = 2)
#> Start to initialize starspace model.
#> Build dict from input file :
/var/folders/59/0gkmw1yj2w7bf2dfc3jznv5w0000gn/T//RtmpL18Wso/textspace_1200026295f3c.txt
#> Read 0M words
#> Number of words in dictionary:  1274
#> Number of labels in dictionary: 0
#> Loading data from file :
/var/folders/59/0gkmw1yj2w7bf2dfc3jznv5w0000gn/T//RtmpL18Wso/textspace_1200026295f3c.txt
#> Total number of examples loaded : 470
#> 2019-01-31 10:50:04 Start training epoch 1 with learning rate 0.01

Gabor

On Thu, Jan 31, 2019 at 10:34 AM Jan Wijffels <jwijffels at bnosac.be> wrote:
>
> Gabor. Thanks for the input. I unfortunately do not have a Mac at my disposal to check this at that would be indeed the most optimal solution to find out differences in the setups.
>
> Is there someone on this mailing list which can comment on the CRAN machines about MacOS to answer
>
> What can be a reason why a package fails on r-release-osx-x86_64 but checked fine on r-oldrel-osx-x86_64 as  the https://cran.r-project.org/web/checks/check_flavors.html seem to indicate they have the same setup? My package is using C++ code which relies on clang-3.3 or newer and relies on -pthread. The src/Makevars are at https://github.com/bnosac/ruimtehol/blob/master/src/Makevars
>
> Jan
>
> Jan Wijffels
> Statistician
> www.bnosac.be  | +32 486 611708
>
>
> On Thu, 31 Jan 2019 at 11:26, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>>
>> See answers inline.
>>
>> On Thu, Jan 31, 2019 at 10:16 AM Jan Wijffels <jwijffels at bnosac.be> wrote:
>> [...]
>> > The package has C++ code which relies on clang-3.3 or newer and relies on -pthread. It has in it's src/Makevars (https://github.com/bnosac/ruimtehol/blob/master/src/Makevars)
>> >
>> > PKG_LIBS = -pthread
>> > PKG_CPPFLAGS = -pthread
>> >
>> > Is that what you mean with linking to a system library?
>>
>> Possibly, yes.
>>
>> > What version of the compiler is running on rhub and how is it different from CRAN r-release-osx-x86_64 or even CRAN r-oldrel-osx-x86_64
>>
>> R-hub uses the standard system compiler in Xcode. CRAN checks use
>> their custom built clang compiler. This is usually compatible with the
>> system compiler, except for some rare ABI issues. You can download it
>> at https://cran.r-project.org/bin/macosx/tools/  The check flavors
>> page at https://cran.r-project.org/web/checks/check_flavors.html might
>> be outdated, as it still shows clang 4.0.0. I don't know, I cannot
>> speak for CRAN.
>>
>> > About CRAN (Question 2): What can be a reason why a package fails on r-release-osx-x86_64 but checked fine on r-oldrel-osx-x86_64
>>
>> Hard to say. I think you only have a real chance to fix this if you
>> can reproduce it on your machine.
>>
>> Gabor
>>
>> [...]


From jw|j||e|@ @end|ng |rom bno@@c@be  Thu Jan 31 12:10:13 2019
From: jw|j||e|@ @end|ng |rom bno@@c@be (Jan Wijffels)
Date: Thu, 31 Jan 2019 12:10:13 +0100
Subject: [R-pkg-devel] 
 what is difference between Mac setup of rhub and CRAN
In-Reply-To: <CABtg=KmuwCiryGxc1NozN9jwr0uqBHnf3hz0ete6T+sFFHvMaA@mail.gmail.com>
References: <CAJ9GNanaSnz1kSnOZ=7FuAOJpqhjewy0KH7DyLYQ40xviatXZg@mail.gmail.com>
 <CABtg=Kk9GQnxH81PjiCDPEkwee3xXF5jWmPLEcp7MhJ6+oDDvw@mail.gmail.com>
 <CAJ9GNa=Hb3O3W1QOsB3CV9AAwPhaZTNeezuVX-eN9i6FRMHXXg@mail.gmail.com>
 <CABtg=KmiP_ygxEAETQrvMckwewmL4S0O=qX=C9Mo2ZtbXE6WnQ@mail.gmail.com>
 <CAJ9GNakmBOZa1jO_9KdhFn3TXN72OMfbj6bT4GNvMFE2_sEGiQ@mail.gmail.com>
 <CABtg=KmuwCiryGxc1NozN9jwr0uqBHnf3hz0ete6T+sFFHvMaA@mail.gmail.com>
Message-ID: <CAJ9GNa=P+meaHxk37xvT2433vJ+cSppmrGKDaVQChGFDifdXJg@mail.gmail.com>

Yes, that is exactly the problem I'm facing with that R package.
Anyone knows how do I find out which ABI issue it is & who should I contact
to try to find a solution?

Jan Wijffels
Statistician
www.bnosac.be  | +32 486 611708


On Thu, 31 Jan 2019 at 11:59, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:

> I can reproduce your problem, and indeed it seems that it is a
> compiler ABI incompatibility issue. I am not sure how it could be
> fixed, though.
>
> With the CRAN compiler it gets stuck here:
>
> ### Name: embed_articlespace
> ### Title: Build a Starspace model for learning the mapping between
> ###   sentences and articles (articlespace)
> ### Aliases: embed_articlespace
>
> ### ** Examples
>
> library(udpipe)
> data(brussels_reviews_anno, package = "udpipe")
> x <- subset(brussels_reviews_anno, language == "nl")
> x$token <- x$lemma
> x <- x[, c("doc_id", "sentence_id", "token")]
> set.seed(123456789)
> model <- embed_articlespace(x, early_stopping = 1,
>                             dim = 25, epoch = 25, minCount = 2,
>                             negSearchLimit = 1, maxNegSamples = 2)
> #> Start to initialize starspace model.
> #> Build dict from input file :
>
> /var/folders/59/0gkmw1yj2w7bf2dfc3jznv5w0000gn/T//RtmpL18Wso/textspace_1200026295f3c.txt
> #> Read 0M words
> #> Number of words in dictionary:  1274
> #> Number of labels in dictionary: 0
> #> Loading data from file :
>
> /var/folders/59/0gkmw1yj2w7bf2dfc3jznv5w0000gn/T//RtmpL18Wso/textspace_1200026295f3c.txt
> #> Total number of examples loaded : 470
> #> 2019-01-31 10:50:04 Start training epoch 1 with learning rate 0.01
>
> Gabor
>
> On Thu, Jan 31, 2019 at 10:34 AM Jan Wijffels <jwijffels at bnosac.be> wrote:
> >
> > Gabor. Thanks for the input. I unfortunately do not have a Mac at my
> disposal to check this at that would be indeed the most optimal solution to
> find out differences in the setups.
> >
> > Is there someone on this mailing list which can comment on the CRAN
> machines about MacOS to answer
> >
> > What can be a reason why a package fails on r-release-osx-x86_64 but
> checked fine on r-oldrel-osx-x86_64 as  the
> https://cran.r-project.org/web/checks/check_flavors.html seem to indicate
> they have the same setup? My package is using C++ code which relies on
> clang-3.3 or newer and relies on -pthread. The src/Makevars are at
> https://github.com/bnosac/ruimtehol/blob/master/src/Makevars
> >
> > Jan
> >
> > Jan Wijffels
> > Statistician
> > www.bnosac.be  | +32 486 611708
> >
> >
> > On Thu, 31 Jan 2019 at 11:26, G?bor Cs?rdi <csardi.gabor at gmail.com>
> wrote:
> >>
> >> See answers inline.
> >>
> >> On Thu, Jan 31, 2019 at 10:16 AM Jan Wijffels <jwijffels at bnosac.be>
> wrote:
> >> [...]
> >> > The package has C++ code which relies on clang-3.3 or newer and
> relies on -pthread. It has in it's src/Makevars (
> https://github.com/bnosac/ruimtehol/blob/master/src/Makevars)
> >> >
> >> > PKG_LIBS = -pthread
> >> > PKG_CPPFLAGS = -pthread
> >> >
> >> > Is that what you mean with linking to a system library?
> >>
> >> Possibly, yes.
> >>
> >> > What version of the compiler is running on rhub and how is it
> different from CRAN r-release-osx-x86_64 or even CRAN r-oldrel-osx-x86_64
> >>
> >> R-hub uses the standard system compiler in Xcode. CRAN checks use
> >> their custom built clang compiler. This is usually compatible with the
> >> system compiler, except for some rare ABI issues. You can download it
> >> at https://cran.r-project.org/bin/macosx/tools/  The check flavors
> >> page at https://cran.r-project.org/web/checks/check_flavors.html might
> >> be outdated, as it still shows clang 4.0.0. I don't know, I cannot
> >> speak for CRAN.
> >>
> >> > About CRAN (Question 2): What can be a reason why a package fails on
> r-release-osx-x86_64 but checked fine on r-oldrel-osx-x86_64
> >>
> >> Hard to say. I think you only have a real chance to fix this if you
> >> can reproduce it on your machine.
> >>
> >> Gabor
> >>
> >> [...]
>

	[[alternative HTML version deleted]]


From tr|ng @end|ng |rom gvdnet@dk  Fri Feb  1 12:14:42 2019
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Fri, 1 Feb 2019 12:14:42 +0100
Subject: [R-pkg-devel] vignette problems: invisible
Message-ID: <ed2901d4ba1f$54ece1f0$fec6a5d0$@gvdnet.dk>

Dear friends - I'm closing in on finalizing the package and its current
version is on github/troelsring/ABCharge and it passes ctrl shift E without
errors and now also has a vignette. I can see the vignette OK in its
directory but issuing after installing from github by devtools, it cannot be
called from help(package="ABCharge") or : vignette(package="ABCharge").

 

> devtools::install_github("troelsring/ABCharge",force=TRUE)

Downloading GitHub repo troelsring/ABCharge at master

  

  

   checking for file
'C:\Users\Troels\AppData\Local\Temp\RtmpSa60vS\remotes2b4452b72409\troelsrin
g-ABCharge-4b62da6/DESCRIPTION' ...

  

   checking for file
'C:\Users\Troels\AppData\Local\Temp\RtmpSa60vS\remotes2b4452b72409\troelsrin
g-ABCharge-4b62da6/DESCRIPTION' ... 

  

v  checking for file
'C:\Users\Troels\AppData\Local\Temp\RtmpSa60vS\remotes2b4452b72409\troelsrin
g-ABCharge-4b62da6/DESCRIPTION'

 

  

-  preparing 'ABCharge':

   checking DESCRIPTION meta-information ...

  

   checking DESCRIPTION meta-information ... 

  

v  checking DESCRIPTION meta-information

  

  

-  checking for LF line-endings in source and make files and shell scripts

 

   

  

-  checking for empty or unneeded directories

 

    

  

-  looking to see if a 'data/datalist' file should be added

 

   

  

-  building 'ABCharge_0.1.0.tar.gz'

   

 

Installing package into 'C:/Users/Troels/Documents/R/win-library/3.5'

(as 'lib' is unspecified)

* installing *source* package 'ABCharge' ...

** R

** data

** byte-compile and prepare package for lazy loading

** help

*** installing help indices

  converting help for package 'ABCharge'

    finding HTML links ... done

    BCharge                                 html  

    Baeza                                   html  

    Bspecif                                 html  

    CMB                                     html  

    CO2specif                               html  

    GET_CH                                  html  

    K3                                      html  

    Kc                                      html  

    Pittsburgh                              html  

    Schell                                  html  

    Tessman                                 html  

    brom                                    html  

    getI                                    html  

    getfs                                   html  

    kw                                      html  

    malate                                  html  

    pH_general                              html  

** building package indices

** installing vignettes

** testing if installed package can be loaded

*** arch - i386

*** arch - x64

* DONE (ABCharge)

In R CMD INSTALL

> help(package=ABCharge)

starting httpd help server ... done

> vignette(package="ABCharge")

no vignettes found

 

I believe I have been through the list in Hadley's "Vignettes: long-form
documentation" without finding the explanation.

 

Wonder what error I did make:

All best wishes

Troels Ring, MD


	[[alternative HTML version deleted]]


From hongoo| @end|ng |rom m|cro@o|t@com  Fri Feb  1 12:16:59 2019
From: hongoo| @end|ng |rom m|cro@o|t@com (Hong Ooi)
Date: Fri, 1 Feb 2019 11:16:59 +0000
Subject: [R-pkg-devel] vignette problems: invisible
In-Reply-To: <ed2901d4ba1f$54ece1f0$fec6a5d0$@gvdnet.dk>
References: <ed2901d4ba1f$54ece1f0$fec6a5d0$@gvdnet.dk>
Message-ID: <KL1P15301MB00238F2AD5C40FF262F76E24A6920@KL1P15301MB0023.APCP153.PROD.OUTLOOK.COM>

The various devtools::install_* functions don't install vignettes by default; to do so, add the build_vignettes=TRUE argument.

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Troels Ring
Sent: Friday, 1 February, 2019 10:15 PM
To: package-develop <r-package-devel at r-project.org>
Subject: [R-pkg-devel] vignette problems: invisible

Dear friends - I'm closing in on finalizing the package and its current version is on github/troelsring/ABCharge and it passes ctrl shift E without errors and now also has a vignette. I can see the vignette OK in its directory but issuing after installing from github by devtools, it cannot be called from help(package="ABCharge") or : vignette(package="ABCharge").

 

> devtools::install_github("troelsring/ABCharge",force=TRUE)

Downloading GitHub repo troelsring/ABCharge at master

  

  

   checking for file
'C:\Users\Troels\AppData\Local\Temp\RtmpSa60vS\remotes2b4452b72409\troelsrin
g-ABCharge-4b62da6/DESCRIPTION' ...

  

   checking for file
'C:\Users\Troels\AppData\Local\Temp\RtmpSa60vS\remotes2b4452b72409\troelsrin
g-ABCharge-4b62da6/DESCRIPTION' ... 

  

v  checking for file
'C:\Users\Troels\AppData\Local\Temp\RtmpSa60vS\remotes2b4452b72409\troelsrin
g-ABCharge-4b62da6/DESCRIPTION'

 

  

-  preparing 'ABCharge':

   checking DESCRIPTION meta-information ...

  

   checking DESCRIPTION meta-information ... 

  

v  checking DESCRIPTION meta-information

  

  

-  checking for LF line-endings in source and make files and shell scripts

 

   

  

-  checking for empty or unneeded directories

 

    

  

-  looking to see if a 'data/datalist' file should be added

 

   

  

-  building 'ABCharge_0.1.0.tar.gz'

   

 

Installing package into 'C:/Users/Troels/Documents/R/win-library/3.5'

(as 'lib' is unspecified)

* installing *source* package 'ABCharge' ...

** R

** data

** byte-compile and prepare package for lazy loading

** help

*** installing help indices

  converting help for package 'ABCharge'

    finding HTML links ... done

    BCharge                                 html  

    Baeza                                   html  

    Bspecif                                 html  

    CMB                                     html  

    CO2specif                               html  

    GET_CH                                  html  

    K3                                      html  

    Kc                                      html  

    Pittsburgh                              html  

    Schell                                  html  

    Tessman                                 html  

    brom                                    html  

    getI                                    html  

    getfs                                   html  

    kw                                      html  

    malate                                  html  

    pH_general                              html  

** building package indices

** installing vignettes

** testing if installed package can be loaded

*** arch - i386

*** arch - x64

* DONE (ABCharge)

In R CMD INSTALL

> help(package=ABCharge)

starting httpd help server ... done

> vignette(package="ABCharge")

no vignettes found

 

I believe I have been through the list in Hadley's "Vignettes: long-form documentation" without finding the explanation.

 

Wonder what error I did make:

All best wishes

Troels Ring, MD


	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7Ce265aaf98a98483539d308d6883681a5%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636846165026041774&amp;sdata=HscUwUke5%2Bwd26xQY0FmwdE7zeOy%2FAuhmNYQfTvsvS4%3D&amp;reserved=0


From tr|ng @end|ng |rom gvdnet@dk  Fri Feb  1 14:22:10 2019
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Fri, 1 Feb 2019 14:22:10 +0100
Subject: [R-pkg-devel] vignette problems: invisible
Message-ID: <000001d4ba31$2366a3c0$6a33eb40$@gvdnet.dk>

By the way:

devtools::install_github("troelsring/ABCharge",force=TRUE,build_vignettes =
TRUE)

didn't help

BW
Troels

 

Fra: Troels Ring <tring at gvdnet.dk> 
Sendt: 1. februar 2019 12:15
Til: package-develop (r-package-devel at r-project.org)
<r-package-devel at r-project.org>
Emne: vignette problems: invisible

 

Dear friends - I'm closing in on finalizing the package and its current
version is on github/troelsring/ABCharge and it passes ctrl shift E without
errors and now also has a vignette. I can see the vignette OK in its
directory but issuing after installing from github by devtools, it cannot be
called from help(package="ABCharge") or : vignette(package="ABCharge").

 

> devtools::install_github("troelsring/ABCharge",force=TRUE)

Downloading GitHub repo troelsring/ABCharge at master

  

  

   checking for file
'C:\Users\Troels\AppData\Local\Temp\RtmpSa60vS\remotes2b4452b72409\troelsrin
g-ABCharge-4b62da6/DESCRIPTION' ...

  

   checking for file
'C:\Users\Troels\AppData\Local\Temp\RtmpSa60vS\remotes2b4452b72409\troelsrin
g-ABCharge-4b62da6/DESCRIPTION' ... 

  

v  checking for file
'C:\Users\Troels\AppData\Local\Temp\RtmpSa60vS\remotes2b4452b72409\troelsrin
g-ABCharge-4b62da6/DESCRIPTION'

 

 

  

-  preparing 'ABCharge':

   checking DESCRIPTION meta-information ...

  

   checking DESCRIPTION meta-information ... 

  

v  checking DESCRIPTION meta-information

 

  

  

-  checking for LF line-endings in source and make files and shell scripts

 

   

  

-  checking for empty or unneeded directories

 

    

  

-  looking to see if a 'data/datalist' file should be added

 

   

  

-  building 'ABCharge_0.1.0.tar.gz'

 

   

 

Installing package into 'C:/Users/Troels/Documents/R/win-library/3.5'

(as 'lib' is unspecified)

* installing *source* package 'ABCharge' ...

** R

** data

** byte-compile and prepare package for lazy loading

** help

*** installing help indices

  converting help for package 'ABCharge'

    finding HTML links ... done

    BCharge                                 html  

    Baeza                                   html  

    Bspecif                                 html  

    CMB                                     html  

    CO2specif                               html  

    GET_CH                                  html  

    K3                                      html  

    Kc                                      html  

    Pittsburgh                              html  

    Schell                                  html  

    Tessman                                 html  

    brom                                    html  

    getI                                    html  

    getfs                                   html  

    kw                                      html  

    malate                                  html  

    pH_general                              html  

** building package indices

** installing vignettes

** testing if installed package can be loaded

*** arch - i386

*** arch - x64

* DONE (ABCharge)

In R CMD INSTALL

> help(package=ABCharge)

starting httpd help server ... done

> vignette(package="ABCharge")

no vignettes found

 

I believe I have been through the list in Hadley's "Vignettes: long-form
documentation" without finding the explanation.

 

Wonder what error I did make:

All best wishes

Troels Ring, MD


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Feb  1 15:23:44 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 1 Feb 2019 09:23:44 -0500
Subject: [R-pkg-devel] vignette problems: invisible
In-Reply-To: <000001d4ba31$2366a3c0$6a33eb40$@gvdnet.dk>
References: <000001d4ba31$2366a3c0$6a33eb40$@gvdnet.dk>
Message-ID: <efb71d95-e926-0139-c60b-96d1a5aeeaac@gmail.com>

On 01/02/2019 8:22 a.m., Troels Ring wrote:
> devtools::install_github("troelsring/ABCharge",force=TRUE,build_vignettes =
> TRUE)

That looks like an issue with install_github.  The normal way to install 
a package is to build the tarball, then install from that.  When I do 
that with your package, I get the vignette.

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Feb  1 15:41:32 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 1 Feb 2019 09:41:32 -0500
Subject: [R-pkg-devel] vignette problems: invisible
In-Reply-To: <efb71d95-e926-0139-c60b-96d1a5aeeaac@gmail.com>
References: <000001d4ba31$2366a3c0$6a33eb40$@gvdnet.dk>
 <efb71d95-e926-0139-c60b-96d1a5aeeaac@gmail.com>
Message-ID: <68b6e368-6343-13e2-0ba4-c1a6a5ba5a66@gmail.com>

On 01/02/2019 9:23 a.m., Duncan Murdoch wrote:
> On 01/02/2019 8:22 a.m., Troels Ring wrote:
>> devtools::install_github("troelsring/ABCharge",force=TRUE,build_vignettes =
>> TRUE)
> 
> That looks like an issue with install_github.  The normal way to install
> a package is to build the tarball, then install from that.  When I do
> that with your package, I get the vignette.

The issue is that by default, install_github() passes the 
"--no-build-vignettes" option to R CMD build.  Using this command line 
does a full install:

devtools::install_github("troelsring/ABCharge",force=TRUE,
                          build=TRUE, build_opts=NULL)

Duncan Murdoch


From tr|ng @end|ng |rom gvdnet@dk  Fri Feb  1 19:48:35 2019
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Fri, 1 Feb 2019 19:48:35 +0100
Subject: [R-pkg-devel] vignette problems: invisible
In-Reply-To: pa0bg2TZktXDipa0dgBtnH
References: <000001d4ba31$2366a3c0$6a33eb40$@gvdnet.dk>
 <efb71d95-e926-0139-c60b-96d1a5aeeaac@gmail.com> pa0bg2TZktXDipa0dgBtnH
Message-ID: <1398f01d4ba5e$bd6c98d0$3845ca70$@gvdnet.dk>

Thanks a lot - that solved the issue!
Best wishes
Troels

-----Oprindelig meddelelse-----
Fra: Duncan Murdoch <murdoch.duncan at gmail.com> 
Sendt: 1. februar 2019 15:42
Til: Troels Ring <tring at gvdnet.dk>; package-develop <r-package-devel at r-project.org>
Emne: Re: [R-pkg-devel] vignette problems: invisible

On 01/02/2019 9:23 a.m., Duncan Murdoch wrote:
> On 01/02/2019 8:22 a.m., Troels Ring wrote:
>> devtools::install_github("troelsring/ABCharge",force=TRUE,build_vigne
>> ttes =
>> TRUE)
> 
> That looks like an issue with install_github.  The normal way to 
> install a package is to build the tarball, then install from that.  
> When I do that with your package, I get the vignette.

The issue is that by default, install_github() passes the "--no-build-vignettes" option to R CMD build.  Using this command line does a full install:

devtools::install_github("troelsring/ABCharge",force=TRUE,
                          build=TRUE, build_opts=NULL)

Duncan Murdoch


From Chr|@@Br|en @end|ng |rom un|@@@edu@@u  Sun Feb  3 08:32:40 2019
From: Chr|@@Br|en @end|ng |rom un|@@@edu@@u (Chris Brien)
Date: Sun, 3 Feb 2019 07:32:40 +0000
Subject: [R-pkg-devel] Problem installing built vignettes
Message-ID: <62ad12fa7aa041d2b3eaec578cc1dee3@ITUPW-EXMBOX3B.UniNet.unisa.edu.au>

Hi list members,

I am having a problem installing vignettes for my asremlPlus package (https://github.com/briencj/asremlPlus - see VIgnettes branch) and have run into a brick wall in my efforts to solve it.  So any help would be greatly appreciated. 

The basic problem is that the R.rsp package cannot be found by loadVignetteBuilder when checking or building the package. Here are the details.

I am running R 3.5.1 under Windows 10.

I have compiled the Rmd sources to pdf files and I need to incorporate the pdfs without rebuilding them. The reasons are that they rely on having a package that is not available from a public R repo, namely asreml, and the R code take too much time to run on the CRAN servers.

To deal with this I have tried to use the package R.rsp. Following the instructions, for example for WheatVignette.pdf, I have included the WheatVignette.pdf.asis with contents

%\VignetteIndexEntry{Wheat data: a spatial analysis example}
%\VignetteEngine{R.rsp::asis}
%\VignetteAuthor{Chris Brien}
%\VignetteKeyword{asremlPlus}

I have the following lines in the DESCRIPTION file:

Suggests: testthat, lattice, emmeans, lmerTest, pbkrtest, R.rsp
Enhances: asreml
VignetteBuilder: R.rsp

When I run the following devtools::check call on the package

devtools::check("asremlPlus", manual=TRUE, check_dir="D:/Analyses/R", document=FALSE, 
                args="--as-cran")

I get the following error message

-  saving partial Rd database (7.6s)
   Error in loadVignetteBuilder(pkgdir, TRUE) : 
     vignette builder 'R.rsp' not found
   Execution halted
Error in run(bin, args = real_cmdargs, stdout_line_callback = real_callback(stdout),  : 
  System command error

To check the availability of R.rsp I did the following:

> .libPaths();find.package("R.rsp")
[1] "D:/Analyses/R library"                       "D:/Analyses/R oldpkg"                       
[3] "C:/Program Files/StatSoft/R/R-3.5.1/library"
[1] "D:/Analyses/R library/R.rsp"

I also note that in my HOME directory I have an .Renviron file with the following line:

R_LIBS_USER="D:\\Analyses\\R library"

Cheers, 

 Chris

 Chris Brien | Adjunct Associate Professor in Statistics
-----
School of Information Technology &  Mathematical Sciences
University of South Australia
GPO Box 2471
ADELAIDE  5001  South Australia
Phone:  +61 8 8302 5535   Fax:  +61 8 8302 5785
Email:   Chris.Brien at unisa.edu.au 
WEB page:  <http://people.unisa.edu.au/Chris.Brien> 
CRICOS No 00121B 


From @|ex@ndre@court|o| @end|ng |rom gm@||@com  Sun Feb  3 14:10:04 2019
From: @|ex@ndre@court|o| @end|ng |rom gm@||@com (Alexandre Courtiol)
Date: Sun, 3 Feb 2019 14:10:04 +0100
Subject: [R-pkg-devel] Problem installing built vignettes
In-Reply-To: <62ad12fa7aa041d2b3eaec578cc1dee3@ITUPW-EXMBOX3B.UniNet.unisa.edu.au>
References: <62ad12fa7aa041d2b3eaec578cc1dee3@ITUPW-EXMBOX3B.UniNet.unisa.edu.au>
Message-ID: <CAERMt4fP=tXZpvk4MLLb5J9VgmafsuMg6g0-sT6yhPjc3A9CZQ@mail.gmail.com>

Hi Chris,
I solved the issue directly in the code after forking your repos and send
you a pull request.
The folder vignette was at the wrong place and I added the .asis files as
well as updated the description file.
I hope it will work on your system.
++

On Sun, 3 Feb 2019 at 08:33, Chris Brien <Chris.Brien at unisa.edu.au> wrote:

> Hi list members,
>
> I am having a problem installing vignettes for my asremlPlus package (
> https://github.com/briencj/asremlPlus - see VIgnettes branch) and have
> run into a brick wall in my efforts to solve it.  So any help would be
> greatly appreciated.
>
> The basic problem is that the R.rsp package cannot be found by
> loadVignetteBuilder when checking or building the package. Here are the
> details.
>
> I am running R 3.5.1 under Windows 10.
>
> I have compiled the Rmd sources to pdf files and I need to incorporate the
> pdfs without rebuilding them. The reasons are that they rely on having a
> package that is not available from a public R repo, namely asreml, and the
> R code take too much time to run on the CRAN servers.
>
> To deal with this I have tried to use the package R.rsp. Following the
> instructions, for example for WheatVignette.pdf, I have included the
> WheatVignette.pdf.asis with contents
>
> %\VignetteIndexEntry{Wheat data: a spatial analysis example}
> %\VignetteEngine{R.rsp::asis}
> %\VignetteAuthor{Chris Brien}
> %\VignetteKeyword{asremlPlus}
>
> I have the following lines in the DESCRIPTION file:
>
> Suggests: testthat, lattice, emmeans, lmerTest, pbkrtest, R.rsp
> Enhances: asreml
> VignetteBuilder: R.rsp
>
> When I run the following devtools::check call on the package
>
> devtools::check("asremlPlus", manual=TRUE, check_dir="D:/Analyses/R",
> document=FALSE,
>                 args="--as-cran")
>
> I get the following error message
>
> -  saving partial Rd database (7.6s)
>    Error in loadVignetteBuilder(pkgdir, TRUE) :
>      vignette builder 'R.rsp' not found
>    Execution halted
> Error in run(bin, args = real_cmdargs, stdout_line_callback =
> real_callback(stdout),  :
>   System command error
>
> To check the availability of R.rsp I did the following:
>
> > .libPaths();find.package("R.rsp")
> [1] "D:/Analyses/R library"                       "D:/Analyses/R oldpkg"
>
> [3] "C:/Program Files/StatSoft/R/R-3.5.1/library"
> [1] "D:/Analyses/R library/R.rsp"
>
> I also note that in my HOME directory I have an .Renviron file with the
> following line:
>
> R_LIBS_USER="D:\\Analyses\\R library"
>
> Cheers,
>
>  Chris
>
>  Chris Brien | Adjunct Associate Professor in Statistics
> -----
> School of Information Technology &  Mathematical Sciences
> University of South Australia
> GPO Box 2471
> ADELAIDE  5001  South Australia
> Phone:  +61 8 8302 5535   Fax:  +61 8 8302 5785
> Email:   Chris.Brien at unisa.edu.au
> WEB page:  <http://people.unisa.edu.au/Chris.Brien>
> CRICOS No 00121B
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Alexandre Courtiol

http://sites.google.com/site/alexandrecourtiol/home

*"Science is the belief in the ignorance of experts"*, R. Feynman

	[[alternative HTML version deleted]]


From berryboe@@enkoo| @end|ng |rom hotm@||@com  Sun Feb  3 21:02:31 2019
From: berryboe@@enkoo| @end|ng |rom hotm@||@com (Berry Boessenkool)
Date: Sun, 3 Feb 2019 20:02:31 +0000
Subject: [R-pkg-devel] sf subsetting with square bracket
Message-ID: <DBBPR04MB6106A78AE3C43F2981D81F62D56C0@DBBPR04MB6106.eurprd04.prod.outlook.com>


Hi,

if sf is not loaded, subsetting an sf object with square brackets loses the sf class in the geometry column:
sfobj[somerows,]
For usage in a package, I do not want to call library(sf) first.

[ is an S3 method in sf:
https://github.com/r-spatial/sf/blob/master/NAMESPACE#L6
https://github.com/r-spatial/sf/blob/master/R/sf.R#L299

In my package (with an sf object from osmplotr), using
sf:::"[.sf"(obj, somerows, allcolumns)
works fine, but of course Rcmd check complains about the Unexported object imported by a ':::' call.

How can I use the sf [ method without completely loading sf?
(and also without depending on dplyr::select)

I guess I'm missing some really clever method import.
Can someone point me in the right direction?

Thanks ahead,
Berry


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Feb  3 21:41:39 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 3 Feb 2019 15:41:39 -0500
Subject: [R-pkg-devel] sf subsetting with square bracket
In-Reply-To: <DBBPR04MB6106A78AE3C43F2981D81F62D56C0@DBBPR04MB6106.eurprd04.prod.outlook.com>
References: <DBBPR04MB6106A78AE3C43F2981D81F62D56C0@DBBPR04MB6106.eurprd04.prod.outlook.com>
Message-ID: <f72141a6-1d29-5914-746e-ba69e16c194e@gmail.com>

On 03/02/2019 3:02 p.m., Berry Boessenkool wrote:
> 
> Hi,
> 
> if sf is not loaded, subsetting an sf object with square brackets loses the sf class in the geometry column:
> sfobj[somerows,]
> For usage in a package, I do not want to call library(sf) first.
> 
> [ is an S3 method in sf:
> https://github.com/r-spatial/sf/blob/master/NAMESPACE#L6
> https://github.com/r-spatial/sf/blob/master/R/sf.R#L299
> 
> In my package (with an sf object from osmplotr), using
> sf:::"[.sf"(obj, somerows, allcolumns)
> works fine, but of course Rcmd check complains about the Unexported object imported by a ':::' call.
> 
> How can I use the sf [ method without completely loading sf?
> (and also without depending on dplyr::select)
> 
> I guess I'm missing some really clever method import.
> Can someone point me in the right direction?

You need to show us something reproducible if you want help.  Is your 
package on Github or some other public repository?

Duncan Murdoch


From berryboe@@enkoo| @end|ng |rom hotm@||@com  Sun Feb  3 23:21:03 2019
From: berryboe@@enkoo| @end|ng |rom hotm@||@com (Berry Boessenkool)
Date: Sun, 3 Feb 2019 22:21:03 +0000
Subject: [R-pkg-devel] sf subsetting with square bracket
In-Reply-To: <f72141a6-1d29-5914-746e-ba69e16c194e@gmail.com>
References: <DBBPR04MB6106A78AE3C43F2981D81F62D56C0@DBBPR04MB6106.eurprd04.prod.outlook.com>,
 <f72141a6-1d29-5914-746e-ba69e16c194e@gmail.com>
Message-ID: <DBBPR04MB610616C356BEF5D9DDB4D50FD56C0@DBBPR04MB6106.eurprd04.prod.outlook.com>


Hi,
my package in question can only be online next week, but here's a script for a MWE:
https://gist.github.com/brry/7728b9b2d35afad7f1fc5978c3315009
The script uses devtools and osmplotr to
- create a package with a bare minimum dummy function
- run the code showing the problem
- create a solution using the ::: import
- clean up, removing the package and the folder for it

btw:  sf 0.7.2,   R 3.4.3,   x86_64-w64-mingw32/x64 (64-bit)

Kind regards,
Berry


________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Sunday, February 3, 2019 21:41
To: Berry Boessenkool; R package devel
Subject: Re: [R-pkg-devel] sf subsetting with square bracket

On 03/02/2019 3:02 p.m., Berry Boessenkool wrote:
>
> Hi,
>
> if sf is not loaded, subsetting an sf object with square brackets loses the sf class in the geometry column:
> sfobj[somerows,]
> For usage in a package, I do not want to call library(sf) first.
>
> [ is an S3 method in sf:
> https://github.com/r-spatial/sf/blob/master/NAMESPACE#L6
> https://github.com/r-spatial/sf/blob/master/R/sf.R#L299
>
> In my package (with an sf object from osmplotr), using
> sf:::"[.sf"(obj, somerows, allcolumns)
> works fine, but of course Rcmd check complains about the Unexported object imported by a ':::' call.
>
> How can I use the sf [ method without completely loading sf?
> (and also without depending on dplyr::select)
>
> I guess I'm missing some really clever method import.
> Can someone point me in the right direction?

You need to show us something reproducible if you want help.  Is your
package on Github or some other public repository?

Duncan Murdoch

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Feb  4 02:26:55 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 3 Feb 2019 20:26:55 -0500
Subject: [R-pkg-devel] sf subsetting with square bracket
In-Reply-To: <DBBPR04MB610616C356BEF5D9DDB4D50FD56C0@DBBPR04MB6106.eurprd04.prod.outlook.com>
References: <DBBPR04MB6106A78AE3C43F2981D81F62D56C0@DBBPR04MB6106.eurprd04.prod.outlook.com>
 <f72141a6-1d29-5914-746e-ba69e16c194e@gmail.com>
 <DBBPR04MB610616C356BEF5D9DDB4D50FD56C0@DBBPR04MB6106.eurprd04.prod.outlook.com>
Message-ID: <6c7b1f12-0c2b-5f9e-2ac4-bc030ade3e69@gmail.com>

On 03/02/2019 5:21 p.m., Berry Boessenkool wrote:
> 
> Hi,
> my package in question can only be online next week, but here's a script 
> for a MWE:
> https://gist.github.com/brry/7728b9b2d35afad7f1fc5978c3315009
> The script uses devtools and osmplotr to
> - create a package with a bare minimum dummy function
> - run the code showing the problem
> - create a solution using the ::: import
> - clean up, removing the package and the folder for it

Thanks.  I can confirm the issue.  I think the problem is that neither 
your sample package nor osmplotr declares a dependency on sf, and it is 
not loaded.  I don't know if it makes sense for your package to do so, 
but osmplotr probably should, since it is creating "sf" objects.

If I force sf to be loaded by changing your dummy function to

dummy <- function(map,obj)
{
   requireNamespace("sf")
   add_osm_objects(map, obj[1:10,], col='green')
}

then things are fine.  In your real package, you'll want to be prepared 
to handle the case where "sf" is not installed.

sf is a big package, so maybe it's intentional to not require it.  I 
don't know these packages at all, but it seems to me that if osmplotr is 
returning objects of class "sf", then it should probably make sure that 
the "sf" package is loaded so that methods can be found.

Duncan Murdoch


> 
> btw:? sf 0.7.2, ? R 3.4.3,?? x86_64-w64-mingw32/x64 (64-bit)
> *
> *
> Kind regards,
> Berry
> 
> 
> ------------------------------------------------------------------------
> *From:* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Sent:* Sunday, February 3, 2019 21:41
> *To:* Berry Boessenkool; R package devel
> *Subject:* Re: [R-pkg-devel] sf subsetting with square bracket
> On 03/02/2019 3:02 p.m., Berry Boessenkool wrote:
>> 
>> Hi,
>> 
>> if sf is not loaded, subsetting an sf object with square brackets loses the sf class in the geometry column:
>> sfobj[somerows,]
>> For usage in a package, I do not want to call library(sf) first.
>> 
>> [ is an S3 method in sf:
>> https://github.com/r-spatial/sf/blob/master/NAMESPACE#L6
>> https://github.com/r-spatial/sf/blob/master/R/sf.R#L299
>> 
>> In my package (with an sf object from osmplotr), using
>> sf:::"[.sf"(obj, somerows, allcolumns)
>> works fine, but of course Rcmd check complains about the Unexported object imported by a ':::' call.
>> 
>> How can I use the sf [ method without completely loading sf?
>> (and also without depending on dplyr::select)
>> 
>> I guess I'm missing some really clever method import.
>> Can someone point me in the right direction?
> 
> You need to show us something reproducible if you want help.? Is your
> package on Github or some other public repository?
> 
> Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Feb  4 15:11:32 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 4 Feb 2019 09:11:32 -0500
Subject: [R-pkg-devel] sf subsetting with square bracket
In-Reply-To: <6c7b1f12-0c2b-5f9e-2ac4-bc030ade3e69@gmail.com>
References: <DBBPR04MB6106A78AE3C43F2981D81F62D56C0@DBBPR04MB6106.eurprd04.prod.outlook.com>
 <f72141a6-1d29-5914-746e-ba69e16c194e@gmail.com>
 <DBBPR04MB610616C356BEF5D9DDB4D50FD56C0@DBBPR04MB6106.eurprd04.prod.outlook.com>
 <6c7b1f12-0c2b-5f9e-2ac4-bc030ade3e69@gmail.com>
Message-ID: <6c9543aa-2f52-da5f-ee27-fc168ffcd3b5@gmail.com>

On 03/02/2019 8:26 p.m., Duncan Murdoch wrote:
> On 03/02/2019 5:21 p.m., Berry Boessenkool wrote:
>>
>> Hi,
>> my package in question can only be online next week, but here's a script
>> for a MWE:
>> https://gist.github.com/brry/7728b9b2d35afad7f1fc5978c3315009
>> The script uses devtools and osmplotr to
>> - create a package with a bare minimum dummy function
>> - run the code showing the problem
>> - create a solution using the ::: import
>> - clean up, removing the package and the folder for it
> 
> Thanks.  I can confirm the issue.  I think the problem is that neither
> your sample package nor osmplotr declares a dependency on sf, and it is
> not loaded.  I don't know if it makes sense for your package to do so,
> but osmplotr probably should, since it is creating "sf" objects.
> 
> If I force sf to be loaded by changing your dummy function to
> 
> dummy <- function(map,obj)
> {
>     requireNamespace("sf")
>     add_osm_objects(map, obj[1:10,], col='green')
> }
> 
> then things are fine.  In your real package, you'll want to be prepared
> to handle the case where "sf" is not installed.
> 
> sf is a big package, so maybe it's intentional to not require it.  I
> don't know these packages at all, but it seems to me that if osmplotr is
> returning objects of class "sf", then it should probably make sure that
> the "sf" package is loaded so that methods can be found.

I've reported this on the osmplotr Github page: 
https://github.com/ropensci/osmplotr/issues/46.  It appears that osmdata 
has the same issue, but the maintainers know about it and are working on it.

In the meantime I'd add the requireNamespace("sf") call to your package 
just to be defensive.

Duncan Murdoch


From berryboe@@enkoo| @end|ng |rom hotm@||@com  Tue Feb  5 09:57:32 2019
From: berryboe@@enkoo| @end|ng |rom hotm@||@com (Berry Boessenkool)
Date: Tue, 5 Feb 2019 08:57:32 +0000
Subject: [R-pkg-devel] sf subsetting with square bracket
In-Reply-To: <6c9543aa-2f52-da5f-ee27-fc168ffcd3b5@gmail.com>
References: <DBBPR04MB6106A78AE3C43F2981D81F62D56C0@DBBPR04MB6106.eurprd04.prod.outlook.com>
 <f72141a6-1d29-5914-746e-ba69e16c194e@gmail.com>
 <DBBPR04MB610616C356BEF5D9DDB4D50FD56C0@DBBPR04MB6106.eurprd04.prod.outlook.com>
 <6c7b1f12-0c2b-5f9e-2ac4-bc030ade3e69@gmail.com>,
 <6c9543aa-2f52-da5f-ee27-fc168ffcd3b5@gmail.com>
Message-ID: <AM0PR04MB609786E60EAC028BC2A60BE6D56E0@AM0PR04MB6097.eurprd04.prod.outlook.com>


I was pointed to a similar problem in data.table:
https://github.com/Rdatatable/data.table/issues/2341
It turns out it is sufficient to import (any random) single function from sf.
The "[" method will then be available as well.
E.g. with the following line included, the sf methods are available without the package being attached first:
#' @importFrom sf st_sf

Is this cleaner than requireNamespace("sf") because it only loads a single function?

Both approaches work fine. Thanks, Duncan, for digging into this!

Btw: sf people are aware: https://github.com/r-spatial/sf/issues/970


Kind regards,
Berry


________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Monday, February 4, 2019 15:11
To: Berry Boessenkool; R package devel
Subject: Re: [R-pkg-devel] sf subsetting with square bracket

On 03/02/2019 8:26 p.m., Duncan Murdoch wrote:
> On 03/02/2019 5:21 p.m., Berry Boessenkool wrote:
>>
>> Hi,

>> for a MWE:
>> https://gist.github.com/brry/7728b9b2d35afad7f1fc5978c3315009
>> The script uses devtools and osmplotr to
>> - create a package with a bare minimum dummy function
>> - run the code showing the problem
>> - create a solution using the ::: import
>> - clean up, removing the package and the folder for it
>
> Thanks.  I can confirm the issue.  I think the problem is that neither
> your sample package nor osmplotr declares a dependency on sf, and it is
> not loaded.  I don't know if it makes sense for your package to do so,
> but osmplotr probably should, since it is creating "sf" objects.
>
> If I force sf to be loaded by changing your dummy function to
>
> dummy <- function(map,obj)
> {
>     requireNamespace("sf")
>     add_osm_objects(map, obj[1:10,], col='green')
> }
>
> then things are fine.  In your real package, you'll want to be prepared
> to handle the case where "sf" is not installed.
>
> sf is a big package, so maybe it's intentional to not require it.  I
> don't know these packages at all, but it seems to me that if osmplotr is
> returning objects of class "sf", then it should probably make sure that
> the "sf" package is loaded so that methods can be found.

I've reported this on the osmplotr Github page:
https://github.com/ropensci/osmplotr/issues/46.  It appears that osmdata
has the same issue, but the maintainers know about it and are working on it.

In the meantime I'd add the requireNamespace("sf") call to your package
just to be defensive.

Duncan Murdoch

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Feb  5 11:13:50 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 5 Feb 2019 05:13:50 -0500
Subject: [R-pkg-devel] sf subsetting with square bracket
In-Reply-To: <AM0PR04MB609786E60EAC028BC2A60BE6D56E0@AM0PR04MB6097.eurprd04.prod.outlook.com>
References: <DBBPR04MB6106A78AE3C43F2981D81F62D56C0@DBBPR04MB6106.eurprd04.prod.outlook.com>
 <f72141a6-1d29-5914-746e-ba69e16c194e@gmail.com>
 <DBBPR04MB610616C356BEF5D9DDB4D50FD56C0@DBBPR04MB6106.eurprd04.prod.outlook.com>
 <6c7b1f12-0c2b-5f9e-2ac4-bc030ade3e69@gmail.com>
 <6c9543aa-2f52-da5f-ee27-fc168ffcd3b5@gmail.com>
 <AM0PR04MB609786E60EAC028BC2A60BE6D56E0@AM0PR04MB6097.eurprd04.prod.outlook.com>
Message-ID: <a7b3deac-48d3-8004-6085-e6fef74621fd@gmail.com>

On 05/02/2019 3:57 a.m., Berry Boessenkool wrote:
> 
> I was pointed to a similar problem in data.table:
> https://github.com/Rdatatable/data.table/issues/2341
> It turns out it is sufficient to import (any random) single function 
> from sf.
> The "[" method will then be available as well.
> E.g. with the following line included, the sf methods are available 
> without the package being attached first:
> #' @importFrom sf st_sf
> 
> Is this cleaner than requireNamespace("sf") because it only loads a 
> single function?

It loads the entire package, and it does it unconditionally.  (You can't 
*load* just one function; you get the whole namespace loaded if you ask 
for one function.  However, you will have access to just that one 
function from your own functions.)  You would need to list "sf" in the 
Imports: section, and every user of your package would have to have "sf" 
installed.

That would be appropriate if your package can't function without working 
with "sf" objects.  I don't think it's the appropriate solution for 
"osmplotr", because they want to remain small, and the "sf" package is 
big.  They want to be able to operate even if the user chooses not to 
install "sf", and apparently all but one of their functions can do so.

Duncan Murdoch

> 
> Both approaches work fine. Thanks, Duncan, for digging into this!
> 
> Btw: sf people are aware: https://github.com/r-spatial/sf/issues/970
> 
> 
> Kind regards,
> Berry
> 
> 
> ------------------------------------------------------------------------
> *From:* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Sent:* Monday, February 4, 2019 15:11
> *To:* Berry Boessenkool; R package devel
> *Subject:* Re: [R-pkg-devel] sf subsetting with square bracket
> On 03/02/2019 8:26 p.m., Duncan Murdoch wrote:
>> On 03/02/2019 5:21 p.m., Berry Boessenkool wrote:
>>>
>>> Hi,
>>> my package in question can only be online next week, but here's a script
>>> for a MWE:
>>> https://gist.github.com/brry/7728b9b2d35afad7f1fc5978c3315009
>>> The script uses devtools and osmplotr to
>>> - create a package with a bare minimum dummy function
>>> - run the code showing the problem
>>> - create a solution using the ::: import
>>> - clean up, removing the package and the folder for it
>> 
>> Thanks.? I can confirm the issue.? I think the problem is that neither
>> your sample package nor osmplotr declares a dependency on sf, and it is
>> not loaded.? I don't know if it makes sense for your package to do so,
>> but osmplotr probably should, since it is creating "sf" objects.
>> 
>> If I force sf to be loaded by changing your dummy function to
>> 
>> dummy <- function(map,obj)
>> {
>>???? requireNamespace("sf")
>>???? add_osm_objects(map, obj[1:10,], col='green')
>> }
>> 
>> then things are fine.? In your real package, you'll want to be prepared
>> to handle the case where "sf" is not installed.
>> 
>> sf is a big package, so maybe it's intentional to not require it.? I
>> don't know these packages at all, but it seems to me that if osmplotr is
>> returning objects of class "sf", then it should probably make sure that
>> the "sf" package is loaded so that methods can be found.
> 
> I've reported this on the osmplotr Github page:
> https://github.com/ropensci/osmplotr/issues/46.? It appears that osmdata
> has the same issue, but the maintainers know about it and are working on it.
> 
> In the meantime I'd add the requireNamespace("sf") call to your package
> just to be defensive.
> 
> Duncan Murdoch


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Feb  6 13:26:53 2019
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 6 Feb 2019 15:26:53 +0300
Subject: [R-pkg-devel] Win-builder: Author field differs from that derived
 from Authors@R
Message-ID: <20190206152653.099b1235@trisector>

Hi!

I'm relying on Authors at R to generate the Author: and Maintainer:
headers. When checking my package at win-builder using R-unstable, I
got a NOTE that Author field differs from that derived from Authors at R:

>> Author: 'Miquel Garriga [aut, cph], Stefan Gerlach [aut, cph],
>> Ion Vasilief [aut, cph], Alex Kargovsky [aut, cph], Knut Franke
>> [cph], Alexander Semke [cph], Tilman Benkert [cph], Kasper Peeters
>> [cph], Russell Standish [cph], Ivan Krylov [cre, cph]'

>> Authors at R: 'Miquel Garriga [aut, cph], Stefan Gerlach [aut, cph],
>> Ion Vasilief [aut, cph], Alex Kargovsky [aut, cph], Knut Franke
>> [con, cph], Alexander Semke [con, cph], Tilman Benkert [con, cph],
>> Kasper Peeters [con, cph], Russell Standish [con, cph], Ivan Krylov
>> [cre, cph]'

Link to full check output:
https://win-builder.r-project.org/EWz9zWS0niO3/

The actual field from DESCRIPTION now looks like this:

>> Authors at R: c(person('Miquel', 'Garriga', email =
>> 'gbmiquel at gmail.com', role = c('aut', 'cph')), person('Stefan',
>> 'Gerlach', email = 'stefan.gerlach at uni-konstanz.de', role = c('aut',
>> 'cph')), person('Ion', 'Vasilief', email = 'ion_vasilief at yahoo.fr',
>> role = c('aut', 'cph')), person('Alex', 'Kargovsky', email =
>> 'kargovsky at yumr.phys.msu.su', role = c('aut', 'cph')),
>> person('Knut', 'Franke', email = 'Knut.Franke at gmx.de', role =
>> c('con', 'cph')), person('Alexander', 'Semke', email =
>> 'alexander.semke at web.de', role = c('con', 'cph')), person('Tilman',
>> 'Benkert', email = 'thzs at gmx.net', role = c('con', 'cph')),
>> person('Kasper', 'Peeters', email = 'kasper.peeters at aei.mpg.de',
>> role = c('con', 'cph')), person('Russell', 'Standish', role =
>> c('con', 'cph')), person('Ivan', 'Krylov', email =
>> 'krylov.r00t at gmail.com', role = c('cre', 'cph')))

The version of R I'm currently using is 3.3.3 (2017-03-06) from Debian
stable, which might explain the differences in utils:::format.person.

What should I do to avoid the NOTE?

-- 
Best regards,
Ivan


From edd @end|ng |rom deb|@n@org  Wed Feb  6 14:52:32 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 6 Feb 2019 07:52:32 -0600
Subject: [R-pkg-devel] 
 Win-builder: Author field differs from that derived from Authors@R
In-Reply-To: <20190206152653.099b1235@trisector>
References: <20190206152653.099b1235@trisector>
Message-ID: <23642.59040.412224.35806@rob.eddelbuettel.com>


On 6 February 2019 at 15:26, Ivan Krylov wrote:
| The version of R I'm currently using is 3.3.3 (2017-03-06) from Debian
| stable, which might explain the differences in utils:::format.person.

In case you were unaware you _can_ get current R versions, now R 3.5.2, for
Debian stable thanks to the backports administered by Johannes Ranke -- see
http://cloud.r-project.org/bin/linux/debian/

I see no real reason for a package developer aiming for CRAN to use a
twice-outdated R version.

| What should I do to avoid the NOTE?

I suspect locale and sorting settings but I don't know for sure. In any case,
I would not start by debugging on an outdated R version.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From pd@|gd @end|ng |rom gm@||@com  Wed Feb  6 15:11:50 2019
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Wed, 6 Feb 2019 15:11:50 +0100
Subject: [R-pkg-devel] 
 Win-builder: Author field differs from that derived from Authors@R
In-Reply-To: <20190206152653.099b1235@trisector>
References: <20190206152653.099b1235@trisector>
Message-ID: <DE44C3FD-ABC0-4523-AC0C-FD83F10205F1@gmail.com>

The difference is obviously in the "con" men. The definition of role="con" in the MARC code list is

Conservator [con]
A person or organization responsible for documenting, preserving, or treating printed or manuscript material, works of art, artifacts, or other media
UF Preservationist

Is this as intended?

-pd

> On 6 Feb 2019, at 13:26 , Ivan Krylov <krylov.r00t at gmail.com> wrote:
> 
> Hi!
> 
> I'm relying on Authors at R to generate the Author: and Maintainer:
> headers. When checking my package at win-builder using R-unstable, I
> got a NOTE that Author field differs from that derived from Authors at R:
> 
>>> Author: 'Miquel Garriga [aut, cph], Stefan Gerlach [aut, cph],
>>> Ion Vasilief [aut, cph], Alex Kargovsky [aut, cph], Knut Franke
>>> [cph], Alexander Semke [cph], Tilman Benkert [cph], Kasper Peeters
>>> [cph], Russell Standish [cph], Ivan Krylov [cre, cph]'
> 
>>> Authors at R: 'Miquel Garriga [aut, cph], Stefan Gerlach [aut, cph],
>>> Ion Vasilief [aut, cph], Alex Kargovsky [aut, cph], Knut Franke
>>> [con, cph], Alexander Semke [con, cph], Tilman Benkert [con, cph],
>>> Kasper Peeters [con, cph], Russell Standish [con, cph], Ivan Krylov
>>> [cre, cph]'
> 
> Link to full check output:
> https://win-builder.r-project.org/EWz9zWS0niO3/
> 
> The actual field from DESCRIPTION now looks like this:
> 
>>> Authors at R: c(person('Miquel', 'Garriga', email =
>>> 'gbmiquel at gmail.com', role = c('aut', 'cph')), person('Stefan',
>>> 'Gerlach', email = 'stefan.gerlach at uni-konstanz.de', role = c('aut',
>>> 'cph')), person('Ion', 'Vasilief', email = 'ion_vasilief at yahoo.fr',
>>> role = c('aut', 'cph')), person('Alex', 'Kargovsky', email =
>>> 'kargovsky at yumr.phys.msu.su', role = c('aut', 'cph')),
>>> person('Knut', 'Franke', email = 'Knut.Franke at gmx.de', role =
>>> c('con', 'cph')), person('Alexander', 'Semke', email =
>>> 'alexander.semke at web.de', role = c('con', 'cph')), person('Tilman',
>>> 'Benkert', email = 'thzs at gmx.net', role = c('con', 'cph')),
>>> person('Kasper', 'Peeters', email = 'kasper.peeters at aei.mpg.de',
>>> role = c('con', 'cph')), person('Russell', 'Standish', role =
>>> c('con', 'cph')), person('Ivan', 'Krylov', email =
>>> 'krylov.r00t at gmail.com', role = c('cre', 'cph')))
> 
> The version of R I'm currently using is 3.3.3 (2017-03-06) from Debian
> stable, which might explain the differences in utils:::format.person.
> 
> What should I do to avoid the NOTE?
> 
> -- 
> Best regards,
> Ivan
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From @eb@meyer @end|ng |rom |@u@de  Wed Feb  6 15:23:00 2019
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Wed, 6 Feb 2019 15:23:00 +0100
Subject: [R-pkg-devel] 
 Win-builder: Author field differs from that derived from Authors@R
In-Reply-To: <20190206152653.099b1235@trisector>
References: <20190206152653.099b1235@trisector>
Message-ID: <36837468-55a7-9375-4d51-b623bf430c3c@fau.de>

The DESCRIPTION's Author field is auto-generated from Authors at R during R
CMD build. You are right, the format has slightly changed since R 3.3.3
(e.g., support for ORCID ID).

The CRAN repository policy says:

> Uploads must be source tarballs created by R CMD build and following
> the PACKAGE_VERSION.tar.gz naming scheme. This should be done with
> current R-patched or the current release of R.

-> https://cran.r-project.org/web/packages/policies.html

Further to that, note that you are using a non-standard role ("con").
See the details in help("person") for the roles used in the context of R
packages: aut, com, ctr, ctb, cph, cre, dtc, fnd, ths, trl.

Cheers,

	Sebastian


Am 06.02.19 um 13:26 schrieb Ivan Krylov:
> Hi!
> 
> I'm relying on Authors at R to generate the Author: and Maintainer:
> headers. When checking my package at win-builder using R-unstable, I
> got a NOTE that Author field differs from that derived from Authors at R:
> 
>>> Author: 'Miquel Garriga [aut, cph], Stefan Gerlach [aut, cph],
>>> Ion Vasilief [aut, cph], Alex Kargovsky [aut, cph], Knut Franke
>>> [cph], Alexander Semke [cph], Tilman Benkert [cph], Kasper Peeters
>>> [cph], Russell Standish [cph], Ivan Krylov [cre, cph]'
> 
>>> Authors at R: 'Miquel Garriga [aut, cph], Stefan Gerlach [aut, cph],
>>> Ion Vasilief [aut, cph], Alex Kargovsky [aut, cph], Knut Franke
>>> [con, cph], Alexander Semke [con, cph], Tilman Benkert [con, cph],
>>> Kasper Peeters [con, cph], Russell Standish [con, cph], Ivan Krylov
>>> [cre, cph]'
> 
> Link to full check output:
> https://win-builder.r-project.org/EWz9zWS0niO3/
> 
> The actual field from DESCRIPTION now looks like this:
> 
>>> Authors at R: c(person('Miquel', 'Garriga', email =
>>> 'gbmiquel at gmail.com', role = c('aut', 'cph')), person('Stefan',
>>> 'Gerlach', email = 'stefan.gerlach at uni-konstanz.de', role = c('aut',
>>> 'cph')), person('Ion', 'Vasilief', email = 'ion_vasilief at yahoo.fr',
>>> role = c('aut', 'cph')), person('Alex', 'Kargovsky', email =
>>> 'kargovsky at yumr.phys.msu.su', role = c('aut', 'cph')),
>>> person('Knut', 'Franke', email = 'Knut.Franke at gmx.de', role =
>>> c('con', 'cph')), person('Alexander', 'Semke', email =
>>> 'alexander.semke at web.de', role = c('con', 'cph')), person('Tilman',
>>> 'Benkert', email = 'thzs at gmx.net', role = c('con', 'cph')),
>>> person('Kasper', 'Peeters', email = 'kasper.peeters at aei.mpg.de',
>>> role = c('con', 'cph')), person('Russell', 'Standish', role =
>>> c('con', 'cph')), person('Ivan', 'Krylov', email =
>>> 'krylov.r00t at gmail.com', role = c('cre', 'cph')))
> 
> The version of R I'm currently using is 3.3.3 (2017-03-06) from Debian
> stable, which might explain the differences in utils:::format.person.
> 
> What should I do to avoid the NOTE?
>


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Feb  6 15:50:18 2019
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 6 Feb 2019 17:50:18 +0300
Subject: [R-pkg-devel] 
 Win-builder: Author field differs from that derived from Authors@R
In-Reply-To: <36837468-55a7-9375-4d51-b623bf430c3c@fau.de>
References: <20190206152653.099b1235@trisector>
 <36837468-55a7-9375-4d51-b623bf430c3c@fau.de>
Message-ID: <20190206175018.3e3ea59c@trisector>

On Wed, 6 Feb 2019 15:23:00 +0100
Sebastian Meyer <seb.meyer at fau.de> wrote:

> The CRAN repository policy says:
> 
> > <...> This should be done with current R-patched or the current
> > release of R.  

Right. Time for me to update to R-3.5.2 to comply with the policy and
prevent other silly mistakes.

> Further to that, note that you are using a non-standard role ("con").
> See the details in help("person") for the roles used in the context
> of R packages: aut, com, ctr, ctb, cph, cre, dtc, fnd, ths, trl.

Ouch! My reading comprehension could have been better when I read that
part of help("person"). Indeed, I should have used "ctb" instead of
"con".

Additional thanks to Peter Dalgaard for spotting the same mistake and
to Dirk Eddelbuettel for the link to Debian packages of current release
of R.

-- 
Best regards,
Ivan


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Thu Feb  7 10:58:45 2019
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Thu, 7 Feb 2019 20:58:45 +1100
Subject: [R-pkg-devel] Use of assignInNamespace in package
Message-ID: <CAJmOi+P=DU5mTksmkU1znE89a9Uo0NKtGV0MV-6TTPZ5WDQj0Q@mail.gmail.com>

Hello,

I'm considering a package submission. I have used assignInNamespace,
which is hideous but seems better than the alternatives. I see that it
returns a NOTE on R CMD check, suggesting that it is not absolutely
prohibited, but would require justification.

The justification I would make is that it fixes a spurious warning
emitted by the namespace and that the assignInNamespace call would
require user intervention or the presence of an (unset) package option
or environment variable before being run. The alternatives would be to
use `suppressWarnings` (but this risks suppressing other, valid
warnings), to fork the package and submit the patched version as a
standalone package to CRAN first (which seems excessive or without
merit given the patch would be just one line), or to write a message
on package startup with the intended `assignInNamespace` call,
together with a recommendation to copy and run it before continuing
(which seems worse than assigning it within the package, considering
the message may be copied wrongly, and would have to be done on every
load).

I note the CRAN policy on 'malicious or anti-social' behaviour. My
read of 'Limited exceptions may be allowed in interactive sessions if
the package obtains confirmation from the user.' is that the usage
I've described may be allowed.  Agreement with the namespace owner
seems to offer another justification, though I haven't heard back from
the maintainer. (The patch is fairly inconsequential so the lack of
response is understandable.)

I also note the Warning in ?getFromNamespace regarding this function,
but as I said, it seems the least worst option.


Best,

Hugh.


From rub@k @end|ng |rom m@th@@@u@dk  Thu Feb  7 11:33:30 2019
From: rub@k @end|ng |rom m@th@@@u@dk (Ege Rubak)
Date: Thu, 7 Feb 2019 11:33:30 +0100
Subject: [R-pkg-devel] Use of assignInNamespace in package
In-Reply-To: <CAJmOi+P=DU5mTksmkU1znE89a9Uo0NKtGV0MV-6TTPZ5WDQj0Q@mail.gmail.com>
References: <CAJmOi+P=DU5mTksmkU1znE89a9Uo0NKtGV0MV-6TTPZ5WDQj0Q@mail.gmail.com>
Message-ID: <8cb9fa6e-a10d-0620-d3b8-73715a59c16c@math.aau.dk>

This in not well thought through, but what about using `sink` to capture 
any messages from the call? Then you might be able to remove the 
expected warning and output any remaining warnings if they are there...

However, note this part of `help(sink)`:

Sink-ing the messages stream should be done only with great care. For 
that stream file must be an already open connection, and there is no 
stack of connections.

Probably some of the real experts on the list can give you better advice :-)

f <- tempfile(fileext = ".Rout")
zz <- file(f, open = "wt")
sink(zz, type = "message")
warning("Expeced warning.")
warning("Another warning.")
sink(type = "message")
mesg <- readLines(f)
mesg

/Ege

On 07/02/2019 10.58, Hugh Parsonage wrote:
> Hello,
> 
> I'm considering a package submission. I have used assignInNamespace,
> which is hideous but seems better than the alternatives. I see that it
> returns a NOTE on R CMD check, suggesting that it is not absolutely
> prohibited, but would require justification.
> 
> The justification I would make is that it fixes a spurious warning
> emitted by the namespace and that the assignInNamespace call would
> require user intervention or the presence of an (unset) package option
> or environment variable before being run. The alternatives would be to
> use `suppressWarnings` (but this risks suppressing other, valid
> warnings), to fork the package and submit the patched version as a
> standalone package to CRAN first (which seems excessive or without
> merit given the patch would be just one line), or to write a message
> on package startup with the intended `assignInNamespace` call,
> together with a recommendation to copy and run it before continuing
> (which seems worse than assigning it within the package, considering
> the message may be copied wrongly, and would have to be done on every
> load).
> 
> I note the CRAN policy on 'malicious or anti-social' behaviour. My
> read of 'Limited exceptions may be allowed in interactive sessions if
> the package obtains confirmation from the user.' is that the usage
> I've described may be allowed.  Agreement with the namespace owner
> seems to offer another justification, though I haven't heard back from
> the maintainer. (The patch is fairly inconsequential so the lack of
> response is understandable.)
> 
> I also note the Warning in ?getFromNamespace regarding this function,
> but as I said, it seems the least worst option.
> 
> 
> Best,
> 
> Hugh.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Thu Feb  7 15:44:22 2019
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Thu, 7 Feb 2019 14:44:22 +0000
Subject: [R-pkg-devel] Use of assignInNamespace in package
In-Reply-To: <8cb9fa6e-a10d-0620-d3b8-73715a59c16c@math.aau.dk>
References: <CAJmOi+P=DU5mTksmkU1znE89a9Uo0NKtGV0MV-6TTPZ5WDQj0Q@mail.gmail.com>
 <8cb9fa6e-a10d-0620-d3b8-73715a59c16c@math.aau.dk>
Message-ID: <MN2PR05MB64962AFCCAB7A03B038C84C6F9680@MN2PR05MB6496.namprd05.prod.outlook.com>

The obvious solution is to contact the maintainer of the package generating the spurious warning and have it addressed 'at source'.

Probably it helps to be specific about the package generating the warning, the nature of the warning, and a link to your package.

I would view assignInNamespace as very poor practice -- it changes the behavior of the package conditional on whether your package is in use or not in a way that will be mysterious to most users.

Rather than using sink, one could use 'calling handlers' together with pattern matching

withCallingHandlers({
    warning("foo")
    warning("bar")
    1
}, warning = function(w) {
    if (identical(conditionMessage(w), "foo"))
        invokeRestart("muffleWarning")
})

but a significant challenge is that the text of warnings, especially from base functions, may be translated into other languages so pattern matching is not robust. In one's own code one could signal and handle specific classes of objects

withCallingHandlers({
    cond <- simpleWarning("foo")
    class(cond) <- c("my_warning", class(cond))
    warning(cond)
    warning("bar")
}, my_warning = function(...) invokeRestart("muffleWarning"))

Martin Morgan

?On 2/7/19, 5:33 AM, "R-package-devel on behalf of Ege Rubak" <r-package-devel-bounces at r-project.org on behalf of rubak at math.aau.dk> wrote:

    This in not well thought through, but what about using `sink` to capture 
    any messages from the call? Then you might be able to remove the 
    expected warning and output any remaining warnings if they are there...
    
    However, note this part of `help(sink)`:
    
    Sink-ing the messages stream should be done only with great care. For 
    that stream file must be an already open connection, and there is no 
    stack of connections.
    
    Probably some of the real experts on the list can give you better advice :-)
    
    f <- tempfile(fileext = ".Rout")
    zz <- file(f, open = "wt")
    sink(zz, type = "message")
    warning("Expeced warning.")
    warning("Another warning.")
    sink(type = "message")
    mesg <- readLines(f)
    mesg
    
    /Ege
    
    On 07/02/2019 10.58, Hugh Parsonage wrote:
    > Hello,
    > 
    > I'm considering a package submission. I have used assignInNamespace,
    > which is hideous but seems better than the alternatives. I see that it
    > returns a NOTE on R CMD check, suggesting that it is not absolutely
    > prohibited, but would require justification.
    > 
    > The justification I would make is that it fixes a spurious warning
    > emitted by the namespace and that the assignInNamespace call would
    > require user intervention or the presence of an (unset) package option
    > or environment variable before being run. The alternatives would be to
    > use `suppressWarnings` (but this risks suppressing other, valid
    > warnings), to fork the package and submit the patched version as a
    > standalone package to CRAN first (which seems excessive or without
    > merit given the patch would be just one line), or to write a message
    > on package startup with the intended `assignInNamespace` call,
    > together with a recommendation to copy and run it before continuing
    > (which seems worse than assigning it within the package, considering
    > the message may be copied wrongly, and would have to be done on every
    > load).
    > 
    > I note the CRAN policy on 'malicious or anti-social' behaviour. My
    > read of 'Limited exceptions may be allowed in interactive sessions if
    > the package obtains confirmation from the user.' is that the usage
    > I've described may be allowed.  Agreement with the namespace owner
    > seems to offer another justification, though I haven't heard back from
    > the maintainer. (The patch is fairly inconsequential so the lack of
    > response is understandable.)
    > 
    > I also note the Warning in ?getFromNamespace regarding this function,
    > but as I said, it seems the least worst option.
    > 
    > 
    > Best,
    > 
    > Hugh.
    > 
    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel
    >
    
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel
    

From Ke|th@Go|d|e|d @end|ng |rom nyu|@ngone@org  Thu Feb  7 17:43:37 2019
From: Ke|th@Go|d|e|d @end|ng |rom nyu|@ngone@org (Goldfeld, Keith)
Date: Thu, 7 Feb 2019 16:43:37 +0000
Subject: [R-pkg-devel] Ubuntu Linux: Package suggested but not available
Message-ID: <D034F58E-68E3-47F0-8793-D7E7855D2C25@nyumc.org>

I am using devtools::check_rhub() before submitting a new version of my package simstudy to CRAN. I am getting an error message about a package I use in the vignette from the Ubuntu Linux platform:

* checking package dependencies ... ERROR
Package suggested but not available: ?ordinal?

The suggested packages are required for a complete check.
Checking can be attempted without them by setting the environment
variable _R_CHECK_FORCE_SUGGESTS_ to a false value.


This is not an issue for any of the other platforms. Any thoughts about how I can address this?

Thanks - Keith



------------------------------------------------------------
This email message, including any attachments, is for the sole use of the intended recipient(s) and may contain information that is proprietary, confidential, and exempt from disclosure under applicable law. Any unauthorized review, use, disclosure, or distribution is prohibited. If you have received this email in error please notify the sender by return email and delete the original message. Please note, the recipient should check this email and any attachments for the presence of viruses. The organization accepts no liability for any damage caused by any virus transmitted by this email.
=================================

From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu Feb  7 17:56:21 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 7 Feb 2019 16:56:21 +0000
Subject: [R-pkg-devel] Ubuntu Linux: Package suggested but not available
In-Reply-To: <D034F58E-68E3-47F0-8793-D7E7855D2C25@nyumc.org>
References: <D034F58E-68E3-47F0-8793-D7E7855D2C25@nyumc.org>
Message-ID: <CABtg=K=ZVckaN+AQeiLoDfUT4dLcqHgrmaXv+PrMhqH8Dy2a0Q@mail.gmail.com>

You probably have an error earlier in the R-hub build log that
explains why ordinal failed to install.

Gabor

On Thu, Feb 7, 2019 at 4:44 PM Goldfeld, Keith
<Keith.Goldfeld at nyulangone.org> wrote:
>
> I am using devtools::check_rhub() before submitting a new version of my package simstudy to CRAN. I am getting an error message about a package I use in the vignette from the Ubuntu Linux platform:
>
> * checking package dependencies ... ERROR
> Package suggested but not available: ?ordinal?
>
> The suggested packages are required for a complete check.
> Checking can be attempted without them by setting the environment
> variable _R_CHECK_FORCE_SUGGESTS_ to a false value.
>
>
> This is not an issue for any of the other platforms. Any thoughts about how I can address this?
>
> Thanks - Keith
>
>
>
> ------------------------------------------------------------
> This email message, including any attachments, is for ...{{dropped:14}}


From Ke|th@Go|d|e|d @end|ng |rom nyu|@ngone@org  Thu Feb  7 18:15:55 2019
From: Ke|th@Go|d|e|d @end|ng |rom nyu|@ngone@org (Goldfeld, Keith)
Date: Thu, 7 Feb 2019 17:15:55 +0000
Subject: [R-pkg-devel] Ubuntu Linux: Package suggested but not available
In-Reply-To: <CABtg=K=ZVckaN+AQeiLoDfUT4dLcqHgrmaXv+PrMhqH8Dy2a0Q@mail.gmail.com>
References: <D034F58E-68E3-47F0-8793-D7E7855D2C25@nyumc.org>
 <CABtg=K=ZVckaN+AQeiLoDfUT4dLcqHgrmaXv+PrMhqH8Dy2a0Q@mail.gmail.com>
Message-ID: <79F046A7-A1A1-4386-A7B3-0B7D94F0D25F@nyumc.org>

I did just take a look at the log, which may provide some insight, though not to me.

This is the key part of the message where things go awry:

#> Error in dyn.load(file, DLLpath = DLLpath, ...) :
#> unable to load shared object '/home/docker/R/ucminf/libs/ucminf.so':
#> 	: cannot open shared object file: No such file or directory
#> ERROR: lazy loading failed for package ?ordinal?

Does this pinpoint the problem? If so, what can I do about it?



And here is the full log from the attempt to install ordinal.

#> * installing *source* package ?ordinal? ...
#> ** package ?ordinal? successfully unpacked and MD5 sums checked
#> ** libs
#> gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG -fpic -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g -c get_fitted.c -o get_fitted.o
#> gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG -fpic -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g -c init.c -o init.o
#> gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG -fpic -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g -c links.c -o links.o
#> gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG -fpic -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g -c utilityFuns.c -o utilityFuns.o
#> g++ -shared -L/usr/lib/R/lib -Wl,-Bsymbolic-functions -Wl,-z,relro -o ordinal.so get_fitted.o init.o links.o utilityFuns.o -L/usr/lib/R/lib -lR
#> installing to /home/docker/R/ordinal/libs
#> ** R
#> ** data
#> *** moving datasets to lazyload DB
#> ** inst
#> ** byte-compile and prepare package for lazy loading
#> Error in dyn.load(file, DLLpath = DLLpath, ...) :
#> unable to load shared object '/home/docker/R/ucminf/libs/ucminf.so':
#> libRblas.so: cannot open shared object file: No such file or directory
#> ERROR: lazy loading failed for package ?ordinal?
#> * removing ?/home/docker/R/ordinal?

?On 2/7/19, 11:56 AM, "G?bor Cs?rdi" <csardi.gabor at gmail.com> wrote:

    You probably have an error earlier in the R-hub build log that
    explains why ordinal failed to install.
    
    Gabor
    
    On Thu, Feb 7, 2019 at 4:44 PM Goldfeld, Keith
    <Keith.Goldfeld at nyulangone.org> wrote:
    >
    > I am using devtools::check_rhub() before submitting a new version of my package simstudy to CRAN. I am getting an error message about a package I use in the vignette from the Ubuntu Linux platform:
    >
    > * checking package dependencies ... ERROR
    > Package suggested but not available: ?ordinal?
    >
    > The suggested packages are required for a complete check.
    > Checking can be attempted without them by setting the environment
    > variable _R_CHECK_FORCE_SUGGESTS_ to a false value.
    >
    >
    > This is not an issue for any of the other platforms. Any thoughts about how I can address this?
    >
    > Thanks - Keith
    >
    >
    >
    > ------------------------------------------------------------
    > This email message, including any attachments, is for the sole use of the intended recipient(s) and may contain information that is proprietary, confidential, and exempt from disclosure under applicable law. Any unauthorized review, use, disclosure, or distribution is prohibited. If you have received this email in error please notify the sender by return email and delete the original message. Please note, the recipient should check this email and any attachments for the presence of viruses. The organization accepts no liability for any damage caused by any virus transmitted by this email.
    > =================================
    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwIFaQ&c=j5oPpO0eBH1iio48DtsedeElZfc04rx3ExJHeIIZuCs&r=fPRk5fx5iys38LPukC4wc6PALfhKJF_KlHbdD5hrfGc&m=TJIRieFLuZSc6FIxS6zn8biWM-gmvy8nObawIGeNrFE&s=E-Gpu00AFdmfrbGcWmaBghYZS6WKwAyuCLksWq4xRDI&e=
    


------------------------------------------------------------
This email message, including any attachments, is for the sole use of the intended recipient(s) and may contain information that is proprietary, confidential, and exempt from disclosure under applicable law. Any unauthorized review, use, disclosure, or distribution is prohibited. If you have received this email in error please notify the sender by return email and delete the original message. Please note, the recipient should check this email and any attachments for the presence of viruses. The organization accepts no liability for any damage caused by any virus transmitted by this email.
=================================

From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu Feb  7 18:18:11 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 7 Feb 2019 17:18:11 +0000
Subject: [R-pkg-devel] Ubuntu Linux: Package suggested but not available
In-Reply-To: <79F046A7-A1A1-4386-A7B3-0B7D94F0D25F@nyumc.org>
References: <D034F58E-68E3-47F0-8793-D7E7855D2C25@nyumc.org>
 <CABtg=K=ZVckaN+AQeiLoDfUT4dLcqHgrmaXv+PrMhqH8Dy2a0Q@mail.gmail.com>
 <79F046A7-A1A1-4386-A7B3-0B7D94F0D25F@nyumc.org>
Message-ID: <CABtg=KkSpCuOkK=WAKZJ2KYfhrb-gDbrsX-6E46xkRay_t3BCg@mail.gmail.com>

I think this means that the ucminf package was not installed properly.
There is probably something about it in the log....

G.

On Thu, Feb 7, 2019 at 5:15 PM Goldfeld, Keith
<Keith.Goldfeld at nyulangone.org> wrote:
>
> I did just take a look at the log, which may provide some insight, though not to me.
>
> This is the key part of the message where things go awry:
>
> #> Error in dyn.load(file, DLLpath = DLLpath, ...) :
> #> unable to load shared object '/home/docker/R/ucminf/libs/ucminf.so':
> #>      : cannot open shared object file: No such file or directory
> #> ERROR: lazy loading failed for package ?ordinal?
>
> Does this pinpoint the problem? If so, what can I do about it?
>
>
>
> And here is the full log from the attempt to install ordinal.
>
> #> * installing *source* package ?ordinal? ...
> #> ** package ?ordinal? successfully unpacked and MD5 sums checked
> #> ** libs
> #> gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG -fpic -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g -c get_fitted.c -o get_fitted.o
> #> gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG -fpic -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g -c init.c -o init.o
> #> gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG -fpic -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g -c links.c -o links.o
> #> gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG -fpic -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g -c utilityFuns.c -o utilityFuns.o
> #> g++ -shared -L/usr/lib/R/lib -Wl,-Bsymbolic-functions -Wl,-z,relro -o ordinal.so get_fitted.o init.o links.o utilityFuns.o -L/usr/lib/R/lib -lR
> #> installing to /home/docker/R/ordinal/libs
> #> ** R
> #> ** data
> #> *** moving datasets to lazyload DB
> #> ** inst
> #> ** byte-compile and prepare package for lazy loading
> #> Error in dyn.load(file, DLLpath = DLLpath, ...) :
> #> unable to load shared object '/home/docker/R/ucminf/libs/ucminf.so':
> #> libRblas.so: cannot open shared object file: No such file or directory
> #> ERROR: lazy loading failed for package ?ordinal?
> #> * removing ?/home/docker/R/ordinal?
>
> ?On 2/7/19, 11:56 AM, "G?bor Cs?rdi" <csardi.gabor at gmail.com> wrote:
>
>     You probably have an error earlier in the R-hub build log that
>     explains why ordinal failed to install.
>
>     Gabor
>
>     On Thu, Feb 7, 2019 at 4:44 PM Goldfeld, Keith
>     <Keith.Goldfeld at nyulangone.org> wrote:
>     >
>     > I am using devtools::check_rhub() before submitting a new version of my package simstudy to CRAN. I am getting an error message about a package I use in the vignette from the Ubuntu Linux platform:
>     >
>     > * checking package dependencies ... ERROR
>     > Package suggested but not available: ?ordinal?
>     >
>     > The suggested packages are required for a complete check.
>     > Checking can be attempted without them by setting the environment
>     > variable _R_CHECK_FORCE_SUGGESTS_ to a false value.
>     >
>     >
>     > This is not an issue for any of the other platforms. Any thoughts about how I can address this?
>     >
>     > Thanks - Keith
>     >
>     >
>     >
>     > ------------------------------------------------------------
>     > This email message, including any attachments, is for the sole use of the intended recipient(s) and may contain information that is proprietary, confidential, and exempt from disclosure under applicable law. Any unauthorized review, use, disclosure, or distribution is prohibited. If you have received this email in error please notify the sender by return email and delete the original message. Please note, the recipient should check this email and any attachments for the presence of viruses. The organization accepts no liability for any damage caused by any virus transmitted by this email.
>     > =================================
>     > ______________________________________________
>     > R-package-devel at r-project.org mailing list
>     > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwIFaQ&c=j5oPpO0eBH1iio48DtsedeElZfc04rx3ExJHeIIZuCs&r=fPRk5fx5iys38LPukC4wc6PALfhKJF_KlHbdD5hrfGc&m=TJIRieFLuZSc6FIxS6zn8biWM-gmvy8nObawIGeNrFE&s=E-Gpu00AFdmfrbGcWmaBghYZS6WKwAyuCLksWq4xRDI&e=
>
>
>
> ------------------------------------------------------------
> This email message, including any attachments, is for ...{{dropped:11}}


From Ke|th@Go|d|e|d @end|ng |rom nyu|@ngone@org  Thu Feb  7 18:27:01 2019
From: Ke|th@Go|d|e|d @end|ng |rom nyu|@ngone@org (Goldfeld, Keith)
Date: Thu, 7 Feb 2019 17:27:01 +0000
Subject: [R-pkg-devel] Ubuntu Linux: Package suggested but not available
In-Reply-To: <CABtg=KkSpCuOkK=WAKZJ2KYfhrb-gDbrsX-6E46xkRay_t3BCg@mail.gmail.com>
References: <D034F58E-68E3-47F0-8793-D7E7855D2C25@nyumc.org>
 <CABtg=K=ZVckaN+AQeiLoDfUT4dLcqHgrmaXv+PrMhqH8Dy2a0Q@mail.gmail.com>
 <79F046A7-A1A1-4386-A7B3-0B7D94F0D25F@nyumc.org>
 <CABtg=KkSpCuOkK=WAKZJ2KYfhrb-gDbrsX-6E46xkRay_t3BCg@mail.gmail.com>
Message-ID: <BC9328A5-EEB8-4034-BEAB-AB011AD159B8@nyumc.org>

It appears that the ucminf package was installed properly:

#> * installing *binary* package ?ucminf? ...
#> * ?ucminf? was already a binary package and will not be rebuilt
#> * creating tarball
#> packaged installation of ?ucminf? as ?ucminf_1.1-4_R_x86_64-pc-linux-gnu.tar.gz?
#> * DONE (ucminf)

?On 2/7/19, 12:18 PM, "G?bor Cs?rdi" <csardi.gabor at gmail.com> wrote:

    I think this means that the ucminf package was not installed properly.
    There is probably something about it in the log....
    
    G.
    
    On Thu, Feb 7, 2019 at 5:15 PM Goldfeld, Keith
    <Keith.Goldfeld at nyulangone.org> wrote:
    >
    > I did just take a look at the log, which may provide some insight, though not to me.
    >
    > This is the key part of the message where things go awry:
    >
    > #> Error in dyn.load(file, DLLpath = DLLpath, ...) :
    > #> unable to load shared object '/home/docker/R/ucminf/libs/ucminf.so':
    > #>      : cannot open shared object file: No such file or directory
    > #> ERROR: lazy loading failed for package ?ordinal?
    >
    > Does this pinpoint the problem? If so, what can I do about it?
    >
    >
    >
    > And here is the full log from the attempt to install ordinal.
    >
    > #> * installing *source* package ?ordinal? ...
    > #> ** package ?ordinal? successfully unpacked and MD5 sums checked
    > #> ** libs
    > #> gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG -fpic -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g -c get_fitted.c -o get_fitted.o
    > #> gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG -fpic -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g -c init.c -o init.o
    > #> gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG -fpic -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g -c links.c -o links.o
    > #> gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG -fpic -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g -c utilityFuns.c -o utilityFuns.o
    > #> g++ -shared -L/usr/lib/R/lib -Wl,-Bsymbolic-functions -Wl,-z,relro -o ordinal.so get_fitted.o init.o links.o utilityFuns.o -L/usr/lib/R/lib -lR
    > #> installing to /home/docker/R/ordinal/libs
    > #> ** R
    > #> ** data
    > #> *** moving datasets to lazyload DB
    > #> ** inst
    > #> ** byte-compile and prepare package for lazy loading
    > #> Error in dyn.load(file, DLLpath = DLLpath, ...) :
    > #> unable to load shared object '/home/docker/R/ucminf/libs/ucminf.so':
    > #> libRblas.so: cannot open shared object file: No such file or directory
    > #> ERROR: lazy loading failed for package ?ordinal?
    > #> * removing ?/home/docker/R/ordinal?
    >
    > On 2/7/19, 11:56 AM, "G?bor Cs?rdi" <csardi.gabor at gmail.com> wrote:
    >
    >     You probably have an error earlier in the R-hub build log that
    >     explains why ordinal failed to install.
    >
    >     Gabor
    >
    >     On Thu, Feb 7, 2019 at 4:44 PM Goldfeld, Keith
    >     <Keith.Goldfeld at nyulangone.org> wrote:
    >     >
    >     > I am using devtools::check_rhub() before submitting a new version of my package simstudy to CRAN. I am getting an error message about a package I use in the vignette from the Ubuntu Linux platform:
    >     >
    >     > * checking package dependencies ... ERROR
    >     > Package suggested but not available: ?ordinal?
    >     >
    >     > The suggested packages are required for a complete check.
    >     > Checking can be attempted without them by setting the environment
    >     > variable _R_CHECK_FORCE_SUGGESTS_ to a false value.
    >     >
    >     >
    >     > This is not an issue for any of the other platforms. Any thoughts about how I can address this?
    >     >
    >     > Thanks - Keith
    >     >
    >     >
    >     >
    >     > ------------------------------------------------------------
    >     > This email message, including any attachments, is for the sole use of the intended recipient(s) and may contain information that is proprietary, confidential, and exempt from disclosure under applicable law. Any unauthorized review, use, disclosure, or distribution is prohibited. If you have received this email in error please notify the sender by return email and delete the original message. Please note, the recipient should check this email and any attachments for the presence of viruses. The organization accepts no liability for any damage caused by any virus transmitted by this email.
    >     > =================================
    >     > ______________________________________________
    >     > R-package-devel at r-project.org mailing list
    >     > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwIFaQ&c=j5oPpO0eBH1iio48DtsedeElZfc04rx3ExJHeIIZuCs&r=fPRk5fx5iys38LPukC4wc6PALfhKJF_KlHbdD5hrfGc&m=TJIRieFLuZSc6FIxS6zn8biWM-gmvy8nObawIGeNrFE&s=E-Gpu00AFdmfrbGcWmaBghYZS6WKwAyuCLksWq4xRDI&e=
    >
    >
    >
    > ------------------------------------------------------------
    > This email message, including any attachments, is for the sole use of the intended recipient(s) and may contain information that is proprietary, confidential, and exempt from disclosure under applicable law. Any unauthorized review, use, disclosure, or distribution is prohibited. If you have received this email in error please notify the sender by return email and delete the original message. Please note, the recipient should check this email and any attachments for the presence of viruses. The organization accepts no liability for any damage caused by any virus transmitted by this email.
    > =================================
    


------------------------------------------------------------
This email message, including any attachments, is for the sole use of the intended recipient(s) and may contain information that is proprietary, confidential, and exempt from disclosure under applicable law. Any unauthorized review, use, disclosure, or distribution is prohibited. If you have received this email in error please notify the sender by return email and delete the original message. Please note, the recipient should check this email and any attachments for the presence of viruses. The organization accepts no liability for any damage caused by any virus transmitted by this email.
=================================

From Ke|th@Go|d|e|d @end|ng |rom nyu|@ngone@org  Thu Feb  7 21:38:25 2019
From: Ke|th@Go|d|e|d @end|ng |rom nyu|@ngone@org (Goldfeld, Keith)
Date: Thu, 7 Feb 2019 20:38:25 +0000
Subject: [R-pkg-devel] Ubuntu Linux: Package suggested but not available
In-Reply-To: <BC9328A5-EEB8-4034-BEAB-AB011AD159B8@nyumc.org>
References: <D034F58E-68E3-47F0-8793-D7E7855D2C25@nyumc.org>
 <CABtg=K=ZVckaN+AQeiLoDfUT4dLcqHgrmaXv+PrMhqH8Dy2a0Q@mail.gmail.com>
 <79F046A7-A1A1-4386-A7B3-0B7D94F0D25F@nyumc.org>
 <CABtg=KkSpCuOkK=WAKZJ2KYfhrb-gDbrsX-6E46xkRay_t3BCg@mail.gmail.com>
 <BC9328A5-EEB8-4034-BEAB-AB011AD159B8@nyumc.org>
Message-ID: <4A08FA7B-79A2-4C66-85AB-24FBF2EA7BA2@nyumc.org>

Interestingly, when I removed the code related to package ordinal (and hence package ucminf), I got the same error from another package (gee) that I suggested in the description file. So, the issue is not with package ucfminf and probably not package gee, but something else.

My solution for now is to pare down my vignette so that I am not referencing this or any other extraneous packages for illustrative purposes. G?bor - thanks for your help.

- Keith

?On 2/7/19, 12:34 PM, "R-package-devel on behalf of Goldfeld, Keith" <r-package-devel-bounces at r-project.org on behalf of Keith.Goldfeld at nyulangone.org> wrote:

    It appears that the ucminf package was installed properly:
    
    #> * installing *binary* package ?ucminf? ...
    #> * ?ucminf? was already a binary package and will not be rebuilt
    #> * creating tarball
    #> packaged installation of ?ucminf? as ?ucminf_1.1-4_R_x86_64-pc-linux-gnu.tar.gz?
    #> * DONE (ucminf)
    
    On 2/7/19, 12:18 PM, "G?bor Cs?rdi" <csardi.gabor at gmail.com> wrote:
    
        I think this means that the ucminf package was not installed properly.
        There is probably something about it in the log....
        
        G.
        
        On Thu, Feb 7, 2019 at 5:15 PM Goldfeld, Keith
        <Keith.Goldfeld at nyulangone.org> wrote:
        >
        > I did just take a look at the log, which may provide some insight, though not to me.
        >
        > This is the key part of the message where things go awry:
        >
        > #> Error in dyn.load(file, DLLpath = DLLpath, ...) :
        > #> unable to load shared object '/home/docker/R/ucminf/libs/ucminf.so':
        > #>      : cannot open shared object file: No such file or directory
        > #> ERROR: lazy loading failed for package ?ordinal?
        >
        > Does this pinpoint the problem? If so, what can I do about it?
        >
        >
        >
        > And here is the full log from the attempt to install ordinal.
        >
        > #> * installing *source* package ?ordinal? ...
        > #> ** package ?ordinal? successfully unpacked and MD5 sums checked
        > #> ** libs
        > #> gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG -fpic -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g -c get_fitted.c -o get_fitted.o
        > #> gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG -fpic -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g -c init.c -o init.o
        > #> gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG -fpic -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g -c links.c -o links.o
        > #> gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG -fpic -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g -c utilityFuns.c -o utilityFuns.o
        > #> g++ -shared -L/usr/lib/R/lib -Wl,-Bsymbolic-functions -Wl,-z,relro -o ordinal.so get_fitted.o init.o links.o utilityFuns.o -L/usr/lib/R/lib -lR
        > #> installing to /home/docker/R/ordinal/libs
        > #> ** R
        > #> ** data
        > #> *** moving datasets to lazyload DB
        > #> ** inst
        > #> ** byte-compile and prepare package for lazy loading
        > #> Error in dyn.load(file, DLLpath = DLLpath, ...) :
        > #> unable to load shared object '/home/docker/R/ucminf/libs/ucminf.so':
        > #> libRblas.so: cannot open shared object file: No such file or directory
        > #> ERROR: lazy loading failed for package ?ordinal?
        > #> * removing ?/home/docker/R/ordinal?
        >
        > On 2/7/19, 11:56 AM, "G?bor Cs?rdi" <csardi.gabor at gmail.com> wrote:
        >
        >     You probably have an error earlier in the R-hub build log that
        >     explains why ordinal failed to install.
        >
        >     Gabor
        >
        >     On Thu, Feb 7, 2019 at 4:44 PM Goldfeld, Keith
        >     <Keith.Goldfeld at nyulangone.org> wrote:
        >     >
        >     > I am using devtools::check_rhub() before submitting a new version of my package simstudy to CRAN. I am getting an error message about a package I use in the vignette from the Ubuntu Linux platform:
        >     >
        >     > * checking package dependencies ... ERROR
        >     > Package suggested but not available: ?ordinal?
        >     >
        >     > The suggested packages are required for a complete check.
        >     > Checking can be attempted without them by setting the environment
        >     > variable _R_CHECK_FORCE_SUGGESTS_ to a false value.
        >     >
        >     >
        >     > This is not an issue for any of the other platforms. Any thoughts about how I can address this?
        >     >
        >     > Thanks - Keith
        >     >
        >     >
        >     >
        >     > ------------------------------------------------------------
        >     > This email message, including any attachments, is for the sole use of the intended recipient(s) and may contain information that is proprietary, confidential, and exempt from disclosure under applicable law. Any unauthorized review, use, disclosure, or distribution is prohibited. If you have received this email in error please notify the sender by return email and delete the original message. Please note, the recipient should check this email and any attachments for the presence of viruses. The organization accepts no liability for any damage caused by any virus transmitted by this email.
        >     > =================================
        >     > ______________________________________________
        >     > R-package-devel at r-project.org mailing list
        >     > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwIFaQ&c=j5oPpO0eBH1iio48DtsedeElZfc04rx3ExJHeIIZuCs&r=fPRk5fx5iys38LPukC4wc6PALfhKJF_KlHbdD5hrfGc&m=TJIRieFLuZSc6FIxS6zn8biWM-gmvy8nObawIGeNrFE&s=E-Gpu00AFdmfrbGcWmaBghYZS6WKwAyuCLksWq4xRDI&e=
        >
        >
        >
        > ------------------------------------------------------------
        > This email message, including any attachments, is for the sole use of the intended recipient(s) and may contain information that is proprietary, confidential, and exempt from disclosure under applicable law. Any unauthorized review, use, disclosure, or distribution is prohibited. If you have received this email in error please notify the sender by return email and delete the original message. Please note, the recipient should check this email and any attachments for the presence of viruses. The organization accepts no liability for any damage caused by any virus transmitted by this email.
        > =================================
        
    
    
    ------------------------------------------------------------
    This email message, including any attachments, is for the sole use of the intended recipient(s) and may contain information that is proprietary, confidential, and exempt from disclosure under applicable law. Any unauthorized review, use, disclosure, or distribution is prohibited. If you have received this email in error please notify the sender by return email and delete the original message. Please note, the recipient should check this email and any attachments for the presence of viruses. The organization accepts no liability for any damage caused by any virus transmitted by this email.
    =================================
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwIGaQ&c=j5oPpO0eBH1iio48DtsedeElZfc04rx3ExJHeIIZuCs&r=fPRk5fx5iys38LPukC4wc6PALfhKJF_KlHbdD5hrfGc&m=5eIAj3qMAMbBF7p09_wZrHEwobM9z8sXKAZUFbE_rwU&s=Yv-sWZVnhi82a57gka2lrsLcL-feZ-nc7B_WHNbpcRc&e=
    


------------------------------------------------------------
This email message, including any attachments, is for the sole use of the intended recipient(s) and may contain information that is proprietary, confidential, and exempt from disclosure under applicable law. Any unauthorized review, use, disclosure, or distribution is prohibited. If you have received this email in error please notify the sender by return email and delete the original message. Please note, the recipient should check this email and any attachments for the presence of viruses. The organization accepts no liability for any damage caused by any virus transmitted by this email.
=================================

From wdun|@p @end|ng |rom t|bco@com  Fri Feb  8 02:19:19 2019
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Thu, 7 Feb 2019 17:19:19 -0800
Subject: [R-pkg-devel] COMPILED_BY vs. R_COMPILED_BY
Message-ID: <CAF8bMcY4V6c-4w86yXNds4Qj3iZwU7DwgJGuLzYXfhyGuLbO+A@mail.gmail.com>

Is there rational for COMPILED_BY (a make variable on Windows) and
R_COMPILED_BY (an environment variable on Windows) differing?

> system(intern=TRUE, paste(file.path(R.home("bin"), "R"), "CMD config
COMPILED_BY"))
[1] "gcc-4.9.3"
> Sys.getenv("R_COMPILED_BY")
[1] "gcc 4.9.3"

The NEWS file for R-3.3.0 says that R_COMPILED_BY is intended to be for
transition purposes but a fair number of packages use it.  Will it go away
soon?

  ? (Windows) R is now built using gcc 4.9.3. This build will require
recompilation of at least those packages that include C++ code, and
possibly others. A build of R-devel using the older toolchain will be
temporarily available for comparison purposes. During the transition, the
environment variable R_COMPILED_BY has been defined to indicate which
toolchain was used to compile R (and hence, which should be used to compile
code in packages). The COMPILED_BY variable described below will be a
permanent replacement for this.
? (Windows) A make and R CMD config variable named COMPILED_BY has been
added. This indicates which toolchain was used to compile R (and hence,
which should be used to compile code in packages).

Bill Dunlap
TIBCO Software
wdunlap tibco.com

	[[alternative HTML version deleted]]


From tr@ver@c @end|ng |rom gm@||@com  Wed Feb 13 18:45:35 2019
From: tr@ver@c @end|ng |rom gm@||@com (Travers Ching)
Date: Wed, 13 Feb 2019 09:45:35 -0800
Subject: [R-pkg-devel] Configure dot win file preventing compilation for
 i386 on windows
Message-ID: <CAPLMX9GBj0KRH2+C8dmg1ztkWbD8tpMsD+KEUyTxbwAmnfLqfw@mail.gmail.com>

I have a package in which I thought would be helpful to have a
configure.win file.  However, when compiling (locally as well as
through win-builder) I get the following message:

"Warning: this package has a non-empty 'configure.win' file, so
building only the main architecture"

And then win builder CRAN check fails with an error.  When I take out
the configure.win file everything works (the configure.win file just
had an echo statement in it for testing).

I don't understand why i386 compilation does not proceed with the
configure file?  What is the issue or mistake I'm making?

Travers


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Feb 13 18:53:31 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 13 Feb 2019 12:53:31 -0500
Subject: [R-pkg-devel] Configure dot win file preventing compilation for
 i386 on windows
In-Reply-To: <CAPLMX9GBj0KRH2+C8dmg1ztkWbD8tpMsD+KEUyTxbwAmnfLqfw@mail.gmail.com>
References: <CAPLMX9GBj0KRH2+C8dmg1ztkWbD8tpMsD+KEUyTxbwAmnfLqfw@mail.gmail.com>
Message-ID: <eac0646c-7a03-8c30-6441-cab97cca84d4@gmail.com>

On 13/02/2019 12:45 p.m., Travers Ching wrote:
> I have a package in which I thought would be helpful to have a
> configure.win file.  However, when compiling (locally as well as
> through win-builder) I get the following message:
> 
> "Warning: this package has a non-empty 'configure.win' file, so
> building only the main architecture"
> 
> And then win builder CRAN check fails with an error.  When I take out
> the configure.win file everything works (the configure.win file just
> had an echo statement in it for testing).
> 
> I don't understand why i386 compilation does not proceed with the
> configure file?  What is the issue or mistake I'm making?

It sounds as though you (and WinBuilder) are skipping the 
"--force-biarch" command line option in "R CMD install".

I suspect the reason it isn't the default is that it's hard to get right 
for both architectures.  I don't know how you would ask WinBuilder to 
use it for you.

Duncan Murdoch


From tr@ver@c @end|ng |rom gm@||@com  Wed Feb 13 18:56:21 2019
From: tr@ver@c @end|ng |rom gm@||@com (Travers Ching)
Date: Wed, 13 Feb 2019 09:56:21 -0800
Subject: [R-pkg-devel] Configure dot win file preventing compilation for
 i386 on windows
In-Reply-To: <eac0646c-7a03-8c30-6441-cab97cca84d4@gmail.com>
References: <CAPLMX9GBj0KRH2+C8dmg1ztkWbD8tpMsD+KEUyTxbwAmnfLqfw@mail.gmail.com>
 <eac0646c-7a03-8c30-6441-cab97cca84d4@gmail.com>
Message-ID: <CAPLMX9H_XxKt4yA=QYeRvrM+D+NGEw5B96PiNcEhrhFaFLbT2Q@mail.gmail.com>

Thanks Gabor and Duncan, that seems to be the issue.

On Wed, Feb 13, 2019 at 9:53 AM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 13/02/2019 12:45 p.m., Travers Ching wrote:
> > I have a package in which I thought would be helpful to have a
> > configure.win file.  However, when compiling (locally as well as
> > through win-builder) I get the following message:
> >
> > "Warning: this package has a non-empty 'configure.win' file, so
> > building only the main architecture"
> >
> > And then win builder CRAN check fails with an error.  When I take out
> > the configure.win file everything works (the configure.win file just
> > had an echo statement in it for testing).
> >
> > I don't understand why i386 compilation does not proceed with the
> > configure file?  What is the issue or mistake I'm making?
>
> It sounds as though you (and WinBuilder) are skipping the
> "--force-biarch" command line option in "R CMD install".
>
> I suspect the reason it isn't the default is that it's hard to get right
> for both architectures.  I don't know how you would ask WinBuilder to
> use it for you.
>
> Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Feb 13 19:21:02 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 13 Feb 2019 13:21:02 -0500
Subject: [R-pkg-devel] Configure dot win file preventing compilation for
 i386 on windows
In-Reply-To: <CAPLMX9H_XxKt4yA=QYeRvrM+D+NGEw5B96PiNcEhrhFaFLbT2Q@mail.gmail.com>
References: <CAPLMX9GBj0KRH2+C8dmg1ztkWbD8tpMsD+KEUyTxbwAmnfLqfw@mail.gmail.com>
 <eac0646c-7a03-8c30-6441-cab97cca84d4@gmail.com>
 <CAPLMX9H_XxKt4yA=QYeRvrM+D+NGEw5B96PiNcEhrhFaFLbT2Q@mail.gmail.com>
Message-ID: <86c12eee-f565-7066-0dce-36a3398f82c9@gmail.com>

On 13/02/2019 12:56 p.m., Travers Ching wrote:
> Thanks Gabor and Duncan, that seems to be the issue.
> 
> On Wed, Feb 13, 2019 at 9:53 AM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> On 13/02/2019 12:45 p.m., Travers Ching wrote:
>>> I have a package in which I thought would be helpful to have a
>>> configure.win file.  However, when compiling (locally as well as
>>> through win-builder) I get the following message:
>>>
>>> "Warning: this package has a non-empty 'configure.win' file, so
>>> building only the main architecture"
>>>
>>> And then win builder CRAN check fails with an error.  When I take out
>>> the configure.win file everything works (the configure.win file just
>>> had an echo statement in it for testing).
>>>
>>> I don't understand why i386 compilation does not proceed with the
>>> configure file?  What is the issue or mistake I'm making?
>>
>> It sounds as though you (and WinBuilder) are skipping the
>> "--force-biarch" command line option in "R CMD install".
>>
>> I suspect the reason it isn't the default is that it's hard to get right
>> for both architectures.  I don't know how you would ask WinBuilder to
>> use it for you.
>>

To answer the final part of my answer:  you put "Biarch: yes" in the 
DESCRIPTION file.  See the "foreign" package for example.

Duncan Murdoch


From ch@r||e @end|ng |rom @t@t@umn@edu  Sat Feb 16 20:45:22 2019
From: ch@r||e @end|ng |rom @t@t@umn@edu (Charles Geyer)
Date: Sat, 16 Feb 2019 13:45:22 -0600
Subject: [R-pkg-devel] registering native routines
Message-ID: <CAKctRd2yff6Cs=yxw4kJo9CNFF6iVeorx6V1DwcCx1p0S=h=5g@mail.gmail.com>

I just noticed that R package foo in the github repo
https://github.com/cjgeyer/foo no longer passes R CMD check --as-cran.  The
problem seems to be that it does not register native routines and thus the
C routines cannot be found.  It does pass R CMD check (without --as-cran).
The version of the package that does register native routines (package
fooRegister) in the same repo passes with or without --as-cran.  So did I
miss the announcement?  Is registration of native routines now mandatory
for CRAN?

Just asking because I am currently teaching about R packages in PhD level
statistical confusing and don't want to provide erroneous info.

These packages are toy packages to introduce the class to R packages.  I
don't actually want to put them on CRAN.

-- 
Charles Geyer
Professor, School of Statistics
Resident Fellow, Minnesota Center for Philosophy of Science
University of Minnesota
charlie at stat.umn.edu

	[[alternative HTML version deleted]]


From @teve@the@b@ye@|@n @end|ng |rom gm@||@com  Sun Feb 17 00:22:53 2019
From: @teve@the@b@ye@|@n @end|ng |rom gm@||@com (Steven Scott)
Date: Sat, 16 Feb 2019 18:22:53 -0500
Subject: [R-pkg-devel] bazel rules for testthat
Message-ID: <CAJqTW464P8WBRuS3BA-us8t+Pz8brAvei5qB4dp4AzeT=sahiQ@mail.gmail.com>

Is anyone on this list using bazel as a build system, and if so have you
found a good BUILD rule for unit tests based on testthat?  Thanks.

	[[alternative HTML version deleted]]


From @vr@h@m@@d|er @end|ng |rom gm@||@com  Sun Feb 17 04:40:55 2019
From: @vr@h@m@@d|er @end|ng |rom gm@||@com (Avraham Adler)
Date: Sat, 16 Feb 2019 22:40:55 -0500
Subject: [R-pkg-devel] registering native routines
In-Reply-To: <CAKctRd2yff6Cs=yxw4kJo9CNFF6iVeorx6V1DwcCx1p0S=h=5g@mail.gmail.com>
References: <CAKctRd2yff6Cs=yxw4kJo9CNFF6iVeorx6V1DwcCx1p0S=h=5g@mail.gmail.com>
Message-ID: <CAL6gwnKTOnNN8_Ki-v03oicG6_2_taFn4UV53T_eA9tU2MyTFQ@mail.gmail.com>

https://stat.ethz.ch/pipermail/r-devel/2017-February/073755.html

On Sat, Feb 16, 2019 at 3:22 PM Charles Geyer <charlie at stat.umn.edu> wrote:
>
> I just noticed that R package foo in the github repo
> https://github.com/cjgeyer/foo no longer passes R CMD check --as-cran.  The
> problem seems to be that it does not register native routines and thus the
> C routines cannot be found.  It does pass R CMD check (without --as-cran).
> The version of the package that does register native routines (package
> fooRegister) in the same repo passes with or without --as-cran.  So did I
> miss the announcement?  Is registration of native routines now mandatory
> for CRAN?
>
> Just asking because I am currently teaching about R packages in PhD level
> statistical confusing and don't want to provide erroneous info.
>
> These packages are toy packages to introduce the class to R packages.  I
> don't actually want to put them on CRAN.
>
> --
> Charles Geyer
> Professor, School of Statistics
> Resident Fellow, Minnesota Center for Philosophy of Science
> University of Minnesota
> charlie at stat.umn.edu
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ch@r||e @end|ng |rom @t@t@umn@edu  Sun Feb 17 12:47:33 2019
From: ch@r||e @end|ng |rom @t@t@umn@edu (Charles Geyer)
Date: Sun, 17 Feb 2019 05:47:33 -0600
Subject: [R-pkg-devel] registering native routines
In-Reply-To: <CAL6gwnKTOnNN8_Ki-v03oicG6_2_taFn4UV53T_eA9tU2MyTFQ@mail.gmail.com>
References: <CAKctRd2yff6Cs=yxw4kJo9CNFF6iVeorx6V1DwcCx1p0S=h=5g@mail.gmail.com>
 <CAL6gwnKTOnNN8_Ki-v03oicG6_2_taFn4UV53T_eA9tU2MyTFQ@mail.gmail.com>
Message-ID: <CAKctRd26bBxVP8B2_qxNEFzYR=R+WhArS8qMNX0jK_THnOXSTg@mail.gmail.com>

Sorry.  I am a moron.  It was an illusion.  I was checking R package
foo with the Makevars for R package fooRegister via the
R_MAKEVARS_USER mechanism and got confused.  In fact R package foo,
when checked with --as-cran only gives warnings not errors about
registering native routines.

So AFAICS, CRAN warns against not using registration of native
routines but that is not yet an ERROR.  So that is what I am going to
tell the students.

All of my CRAN packages properly register native routines, and I teach
this to my advisees and students.  But my github packages I use as
teaching examples don't (except for the aforementioned fooRegister)
and I was suddenly worried about them.


On Sat, Feb 16, 2019 at 9:41 PM Avraham Adler <avraham.adler at gmail.com> wrote:
>
> https://stat.ethz.ch/pipermail/r-devel/2017-February/073755.html
>
> On Sat, Feb 16, 2019 at 3:22 PM Charles Geyer <charlie at stat.umn.edu> wrote:
> >
> > I just noticed that R package foo in the github repo
> > https://github.com/cjgeyer/foo no longer passes R CMD check --as-cran.  The
> > problem seems to be that it does not register native routines and thus the
> > C routines cannot be found.  It does pass R CMD check (without --as-cran).
> > The version of the package that does register native routines (package
> > fooRegister) in the same repo passes with or without --as-cran.  So did I
> > miss the announcement?  Is registration of native routines now mandatory
> > for CRAN?
> >
> > Just asking because I am currently teaching about R packages in PhD level
> > statistical confusing and don't want to provide erroneous info.
> >
> > These packages are toy packages to introduce the class to R packages.  I
> > don't actually want to put them on CRAN.
> >
> > --
> > Charles Geyer
> > Professor, School of Statistics
> > Resident Fellow, Minnesota Center for Philosophy of Science
> > University of Minnesota
> > charlie at stat.umn.edu
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
Charles Geyer
Professor, School of Statistics
Resident Fellow, Minnesota Center for Philosophy of Science
University of Minnesota
charlie at stat.umn.edu


From |vo@we|ch @end|ng |rom gm@||@com  Mon Feb 18 01:57:42 2019
From: |vo@we|ch @end|ng |rom gm@||@com (ivo welch)
Date: Sun, 17 Feb 2019 16:57:42 -0800
Subject: [R-pkg-devel] Starter Help
Message-ID: <CAPr7RtV6M90bYpJwzUf_smyEmsbOBJyT8GzmFpHZ_dHSLmuE1Q@mail.gmail.com>

Apologies for the Intrusion.  I am trying to learn package development with
roxygen.  The ecosystem has been moving so fast that much of what I learned
by googling and reading on the web (including old posts) seems to be at
least mildly outdated.

* does the r-package-devel mailing list have a search engine?  (or generic
google?)  a FAQ?

* could someone please point me to a good current example that follows
appropriate style and other guidelines, using the '@' roxygen documentation
format?  (The '@' example In Hadley's book does not include a @name, which
my `document()`  does not like.)

I also have a few specific questions, but I may be able to figure it out
given the above.

* is it possible to import a set of *.Rd man documentation files into my R
session?

* is it still good practice to place my functions into their own
environments (aka `me$myfun <- cmpfun(function() message("my fun")`).  I am
thinking that this complicates matters unnecessarily in a package, given
that packages have namespaces, and environment prefixes makes documentation
access more complex (not ?me$myfun but ?'me$myfun' now).  and should I lose
the `cmpfun` in a package?

basic pointers appreciated.

/iaw

	[[alternative HTML version deleted]]


From @me @end|ng |rom |y@|k@com  Mon Feb 18 09:13:06 2019
From: @me @end|ng |rom |y@|k@com (=?UTF-8?Q?Stefan_McKinnon_H=C3=B8j=2DEdwards?=)
Date: Mon, 18 Feb 2019 09:13:06 +0100
Subject: [R-pkg-devel] Starter Help
In-Reply-To: <CAPr7RtV6M90bYpJwzUf_smyEmsbOBJyT8GzmFpHZ_dHSLmuE1Q@mail.gmail.com>
References: <CAPr7RtV6M90bYpJwzUf_smyEmsbOBJyT8GzmFpHZ_dHSLmuE1Q@mail.gmail.com>
Message-ID: <CAHJFP8R6JUQRjZBs_4GHR7vAaXeYAEZPgxLyXGMsCQbn4W8O5Q@mail.gmail.com>

Hi Iaw,

Hadley's book is generally a good starting point. For an overview of the
roxygen2, I have a summary on http://www.iysik.com/r/roxygen2, which is but
a small addition to the current sphere of knowledge.

Re. your questions:
> * is it possible to import a set of *.Rd man documentation files into my
R session?
It is not clear what you are trying here. Rd documentation is not code
(except the examples), so importing it into an R session seems to me
nonsense. If you want to import existing Rd documention into a roxygen2
documentation, you will have to copy-paste the text and give it the
necessary tags.


> * is it still good practice to place my functions into their own
environments
Yes, this complicates everything. Stop doing it.

I do not have answers to your other questions.

/Stefan


Den man. 18. feb. 2019 kl. 02.02 skrev ivo welch <ivo.welch at gmail.com>:

> Apologies for the Intrusion.  I am trying to learn package development with
> roxygen.  The ecosystem has been moving so fast that much of what I learned
> by googling and reading on the web (including old posts) seems to be at
> least mildly outdated.
>
> * does the r-package-devel mailing list have a search engine?  (or generic
> google?)  a FAQ?
>
> * could someone please point me to a good current example that follows
> appropriate style and other guidelines, using the '@' roxygen documentation
> format?  (The '@' example In Hadley's book does not include a @name, which
> my `document()`  does not like.)
>
> I also have a few specific questions, but I may be able to figure it out
> given the above.
>
> * is it possible to import a set of *.Rd man documentation files into my R
> session?
>
> * is it still good practice to place my functions into their own
> environments (aka `me$myfun <- cmpfun(function() message("my fun")`).  I am
> thinking that this complicates matters unnecessarily in a package, given
> that packages have namespaces, and environment prefixes makes documentation
> access more complex (not ?me$myfun but ?'me$myfun' now).  and should I lose
> the `cmpfun` in a package?
>
> basic pointers appreciated.
>
> /iaw
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From je||er|@ @end|ng |rom mrc-|mb@c@m@@c@uk  Mon Feb 18 09:18:23 2019
From: je||er|@ @end|ng |rom mrc-|mb@c@m@@c@uk (Dr Gregory Jefferis)
Date: Mon, 18 Feb 2019 08:18:23 +0000
Subject: [R-pkg-devel] Starter Help
In-Reply-To: <CAHJFP8R6JUQRjZBs_4GHR7vAaXeYAEZPgxLyXGMsCQbn4W8O5Q@mail.gmail.com>
References: <CAPr7RtV6M90bYpJwzUf_smyEmsbOBJyT8GzmFpHZ_dHSLmuE1Q@mail.gmail.com>
 <CAHJFP8R6JUQRjZBs_4GHR7vAaXeYAEZPgxLyXGMsCQbn4W8O5Q@mail.gmail.com>
Message-ID: <28776A38-3140-49A3-840C-930FB52A0A7A@mrc-lmb.cam.ac.uk>

On 18 Feb 2019, at 8:13, Stefan McKinnon H?j-Edwards wrote:

> * is it possible to import a set of *.Rd man documentation files into 
> my
>
> R session?

This may be what you want:

https://cran.r-project.org/web/packages/Rd2roxygen/index.html

Although my experience a while back was that some manual work was still 
required.

Best wishes,

Greg.

--
Gregory Jefferis, PhD
Division of Neurobiology
MRC Laboratory of Molecular Biology
Francis Crick Avenue
Cambridge Biomedical Campus
Cambridge, CB2 OQH, UK

http://www2.mrc-lmb.cam.ac.uk/group-leaders/h-to-m/g-jefferis
http://jefferislab.org
http://flybrain.stanford.edu


From to||@@ch@| @end|ng |rom gm@||@com  Mon Feb 18 12:08:25 2019
From: to||@@ch@| @end|ng |rom gm@||@com (=?UTF-8?B?zqTPjM67zrfPgiDOp86xzrvOus6uz4I=?=)
Date: Mon, 18 Feb 2019 13:08:25 +0200
Subject: [R-pkg-devel] Documentation of Rcpp modules
Message-ID: <CAMfvGJM4TP2WgxpA=DEmois2TSudJRQcwqiQHqgkJaHsGwaV_g@mail.gmail.com>

I am developing a Rcpp package in order to make a submission to CRAN. I use
modules for 4 C++ classes. I have used the prompt function (`prompt(yada,
"yada-module.Rd")`) using the names of my modules, in order to document the
exposed classes. But I still get a warning when I perform the check using
devtools library  (devtools::check(cran=TRUE) ). The check returns that
there is not a documentation for the exposed classes:

checking for missing documentation entries ... WARNING
Undocumented S4 classes:
  ?Rcpp_Hpolytope? ?Rcpp_Zonotope? ?Rcpp_Vpolytope? ?Rcpp_IntVP?
All user-level objects in a package (including S4 classes and methods)
should have documentation entries.
See chapter ?Writing R documentation files? in the ?Writing R
Extensions? manual.


Do you know a proper way to document a module without getting a warning?

Thanks in advance,
-Tolis

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Feb 18 14:41:06 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 18 Feb 2019 08:41:06 -0500
Subject: [R-pkg-devel] Documentation of Rcpp modules
In-Reply-To: <CAMfvGJM4TP2WgxpA=DEmois2TSudJRQcwqiQHqgkJaHsGwaV_g@mail.gmail.com>
References: <CAMfvGJM4TP2WgxpA=DEmois2TSudJRQcwqiQHqgkJaHsGwaV_g@mail.gmail.com>
Message-ID: <537f4245-6f44-5123-5928-5e167cc030c6@gmail.com>

On 18/02/2019 6:08 a.m., ????? ?????? wrote:
> I am developing a Rcpp package in order to make a submission to CRAN. I use
> modules for 4 C++ classes. I have used the prompt function (`prompt(yada,
> "yada-module.Rd")`) using the names of my modules, in order to document the
> exposed classes. But I still get a warning when I perform the check using
> devtools library  (devtools::check(cran=TRUE) ). The check returns that
> there is not a documentation for the exposed classes:
> 
> checking for missing documentation entries ... WARNING
> Undocumented S4 classes:
>    ?Rcpp_Hpolytope? ?Rcpp_Zonotope? ?Rcpp_Vpolytope? ?Rcpp_IntVP?
> All user-level objects in a package (including S4 classes and methods)
> should have documentation entries.
> See chapter ?Writing R documentation files? in the ?Writing R
> Extensions? manual.
> 
> 
> Do you know a proper way to document a module without getting a warning?

You should be using promptClass() or promptMethods() instead of prompt() 
for classes and methods respectively.  Don't throw away what you've 
done:  just use promptClass() into a different location, and copy your 
text into the appropriate places in it. In particular, you'll likely 
need a \docType{class} line, a long list of aliases, and maybe some 
special sections documenting the slots, inheritance, etc.

Duncan Murdoch


From to||@@ch@| @end|ng |rom gm@||@com  Mon Feb 18 15:06:21 2019
From: to||@@ch@| @end|ng |rom gm@||@com (=?UTF-8?B?zqTPjM67zrfPgiDOp86xzrvOus6uz4I=?=)
Date: Mon, 18 Feb 2019 16:06:21 +0200
Subject: [R-pkg-devel] Documentation of Rcpp modules
In-Reply-To: <537f4245-6f44-5123-5928-5e167cc030c6@gmail.com>
References: <CAMfvGJM4TP2WgxpA=DEmois2TSudJRQcwqiQHqgkJaHsGwaV_g@mail.gmail.com>
 <537f4245-6f44-5123-5928-5e167cc030c6@gmail.com>
Message-ID: <CAMfvGJM=6-iSimbQCsQvZwrWzrJ+xKMybQ4wshuoiGpx=MW-2w@mail.gmail.com>

Dear Duncan,

Thank you very much for your email. That worked fine!

-Tolis.

On Mon, 18 Feb 2019 at 15:41, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 18/02/2019 6:08 a.m., ????? ?????? wrote:
> > I am developing a Rcpp package in order to make a submission to CRAN. I
> use
> > modules for 4 C++ classes. I have used the prompt function (`prompt(yada,
> > "yada-module.Rd")`) using the names of my modules, in order to document
> the
> > exposed classes. But I still get a warning when I perform the check using
> > devtools library  (devtools::check(cran=TRUE) ). The check returns that
> > there is not a documentation for the exposed classes:
> >
> > checking for missing documentation entries ... WARNING
> > Undocumented S4 classes:
> >    ?Rcpp_Hpolytope? ?Rcpp_Zonotope? ?Rcpp_Vpolytope? ?Rcpp_IntVP?
> > All user-level objects in a package (including S4 classes and methods)
> > should have documentation entries.
> > See chapter ?Writing R documentation files? in the ?Writing R
> > Extensions? manual.
> >
> >
> > Do you know a proper way to document a module without getting a warning?
>
> You should be using promptClass() or promptMethods() instead of prompt()
> for classes and methods respectively.  Don't throw away what you've
> done:  just use promptClass() into a different location, and copy your
> text into the appropriate places in it. In particular, you'll likely
> need a \docType{class} line, a long list of aliases, and maybe some
> special sections documenting the slots, inheritance, etc.
>
> Duncan Murdoch
>
>
>

	[[alternative HTML version deleted]]


From bob @end|ng |rom rud@|@  Mon Feb 18 18:59:39 2019
From: bob @end|ng |rom rud@|@ (Bob Rudis)
Date: Mon, 18 Feb 2019 12:59:39 -0500
Subject: [R-pkg-devel] registering native routines
In-Reply-To: <CAKctRd2yff6Cs=yxw4kJo9CNFF6iVeorx6V1DwcCx1p0S=h=5g@mail.gmail.com>
References: <CAKctRd2yff6Cs=yxw4kJo9CNFF6iVeorx6V1DwcCx1p0S=h=5g@mail.gmail.com>
Message-ID: <ED134347-60A1-4EB3-A1B9-B0308F48C3FB@rud.is>

I believe you've got _some_ time. As of the changes in 3.4.0 the verbiage is:

   R CMD check --as-cran now NOTEs if the package does not register 
   its native routines or does not declare its intentions on (native) 
   symbol search. (This will become a WARNING in due course.)

And I think it's still a NOTE vs a full-on WARNING (I register all mine but can test this later).

Rcpp makes this super simple and the tools::package_native_routine_registration_skeleton() is also pretty painless as does Kevin Ushey's souretools::register_routines() (https://github.com/kevinushey/sourcetools/blob/master/R/register.R).

-boB

> On Feb 16, 2019, at 2:45 PM, Charles Geyer <charlie at stat.umn.edu> wrote:
> 
> I just noticed that R package foo in the github repo
> https://github.com/cjgeyer/foo no longer passes R CMD check --as-cran.  The
> problem seems to be that it does not register native routines and thus the
> C routines cannot be found.  It does pass R CMD check (without --as-cran).
> The version of the package that does register native routines (package
> fooRegister) in the same repo passes with or without --as-cran.  So did I
> miss the announcement?  Is registration of native routines now mandatory
> for CRAN?
> 
> Just asking because I am currently teaching about R packages in PhD level
> statistical confusing and don't want to provide erroneous info.
> 
> These packages are toy packages to introduce the class to R packages.  I
> don't actually want to put them on CRAN.
> 
> -- 
> Charles Geyer
> Professor, School of Statistics
> Resident Fellow, Minnesota Center for Philosophy of Science
> University of Minnesota
> charlie at stat.umn.edu
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From dh@mm@p@|b @end|ng |rom uohyd@@c@|n  Tue Feb 19 17:47:14 2019
From: dh@mm@p@|b @end|ng |rom uohyd@@c@|n (dhamma pal)
Date: Tue, 19 Feb 2019 22:17:14 +0530
Subject: [R-pkg-devel] Regarding maGUI package error
Message-ID: <CACApb-Fy0pLVv0B8teHJL2L1fVduNJCJCJHo9eP4tEsS0kMxrQ@mail.gmail.com>

Dear all.
The current version of the maGUI package is 2.2 which got errors after the
upgradation of R version.

Therefore I was trying to submit new version 2.3 of the package but getting
warnings of the previous version of 2.2 at the CRAN incoming Precheck
server.

To resolve this, Do I need to upload the corrected package with the 2.2
version?
or How to rectify the errors of the previous version the packages at the
CRAN repository?

Note: The error message is that "BiocInstaller and biocLite packages are
depreciated. Use BiocManager instead." Therefore I have replaced these
packages with BiocManager package. But now It couldn't upload at CRAN
because of the errors in the previous version.



-- 
Best,

*DHAMMAPAL BHARNE,*
PhD Research Scholar,

*University of Hyderabad,*
Mobile: 91 9492274285

	[[alternative HTML version deleted]]


From yonghu|@dong @end|ng |rom gm@||@com  Tue Feb 19 19:41:51 2019
From: yonghu|@dong @end|ng |rom gm@||@com (Yonghui Dong)
Date: Tue, 19 Feb 2019 20:41:51 +0200
Subject: [R-pkg-devel] Regarding maGUI package error
In-Reply-To: <CACApb-Fy0pLVv0B8teHJL2L1fVduNJCJCJHo9eP4tEsS0kMxrQ@mail.gmail.com>
References: <CACApb-Fy0pLVv0B8teHJL2L1fVduNJCJCJHo9eP4tEsS0kMxrQ@mail.gmail.com>
Message-ID: <6C99B472-F012-49FB-BD8C-7481327FE622@gmail.com>

Hi DHAMMAPAL,

I have asked the same question in Bioconductor support forum. 

Here is the link and the answers https://support.bioconductor.org/p/117793/#117796 <https://support.bioconductor.org/p/117793/#117796>

If your package is dependent on packages from Bioconductor, it is quite possible that you will encounter this warning. 
Unfortunately, until now I haven?t found a way to eliminate this warning. 

Hope people here could help.

Dong

> On 19 Feb 2019, at 18:47, dhamma pal <dhammapalb at uohyd.ac.in> wrote:
> 
> Dear all.
> The current version of the maGUI package is 2.2 which got errors after the
> upgradation of R version.
> 
> Therefore I was trying to submit new version 2.3 of the package but getting
> warnings of the previous version of 2.2 at the CRAN incoming Precheck
> server.
> 
> To resolve this, Do I need to upload the corrected package with the 2.2
> version?
> or How to rectify the errors of the previous version the packages at the
> CRAN repository?
> 
> Note: The error message is that "BiocInstaller and biocLite packages are
> depreciated. Use BiocManager instead." Therefore I have replaced these
> packages with BiocManager package. But now It couldn't upload at CRAN
> because of the errors in the previous version.
> 
> 
> 
> -- 
> Best,
> 
> *DHAMMAPAL BHARNE,*
> PhD Research Scholar,
> 
> *University of Hyderabad,*
> Mobile: 91 9492274285
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Feb 19 22:06:38 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 19 Feb 2019 16:06:38 -0500
Subject: [R-pkg-devel] Regarding maGUI package error
In-Reply-To: <CACApb-Fy0pLVv0B8teHJL2L1fVduNJCJCJHo9eP4tEsS0kMxrQ@mail.gmail.com>
References: <CACApb-Fy0pLVv0B8teHJL2L1fVduNJCJCJHo9eP4tEsS0kMxrQ@mail.gmail.com>
Message-ID: <13455e3d-a24a-0cf2-04e9-1b1aa989f764@gmail.com>

On 19/02/2019 11:47 a.m., dhamma pal wrote:
> Dear all.
> The current version of the maGUI package is 2.2 which got errors after the
> upgradation of R version.
> 
> Therefore I was trying to submit new version 2.3 of the package but getting
> warnings of the previous version of 2.2 at the CRAN incoming Precheck
> server.
> 
> To resolve this, Do I need to upload the corrected package with the 2.2
> version?
> or How to rectify the errors of the previous version the packages at the
> CRAN repository?
> 
> Note: The error message is that "BiocInstaller and biocLite packages are
> depreciated. Use BiocManager instead." Therefore I have replaced these
> packages with BiocManager package. But now It couldn't upload at CRAN
> because of the errors in the previous version.

I suspect your interpretation of the messages you've received could be 
incorrect.  Could you post a copy of it if it came by email, or a link 
if it's on a web page?

One reason you may have trouble uploading a revision is that you were 
unresponsive to requests for fixes in the previous one, and your package 
has been archived:  see

https://cran.r-project.org/web/packages/maGUI/index.html

and

https://cran-archive.r-project.org/web/checks/2018-11-01_check_results_maGUI.html

The stuff about the Bioconductor packages is shown as warnings, but you 
also have errors.  Did you fix everything?

Duncan Murdoch


From dh@mm@p@|b @end|ng |rom uohyd@@c@|n  Wed Feb 20 08:06:05 2019
From: dh@mm@p@|b @end|ng |rom uohyd@@c@|n (dhamma pal)
Date: Wed, 20 Feb 2019 12:36:05 +0530
Subject: [R-pkg-devel] Regarding maGUI package error
In-Reply-To: <13455e3d-a24a-0cf2-04e9-1b1aa989f764@gmail.com>
References: <CACApb-Fy0pLVv0B8teHJL2L1fVduNJCJCJHo9eP4tEsS0kMxrQ@mail.gmail.com>
 <13455e3d-a24a-0cf2-04e9-1b1aa989f764@gmail.com>
Message-ID: <CACApb-EYnpJ4bDKY8DMMyiReLAyhcqkBON85q5RX50UrKZN+HA@mail.gmail.com>

Hi.
Following is the check results from CRAN server, though I didn't get any
warning on my PC.

package maGUI_2.3.tar.gz does not pass the incoming checks automatically,
please see the following pre-tests:
Windows: <
https://win-builder.r-project.org/incoming_pretest/maGUI_2.3_20190217_181340/Windows/00check.log
>
Status: 1 WARNING, 1 NOTE
Debian: <
https://win-builder.r-project.org/incoming_pretest/maGUI_2.3_20190217_181340/Debian/00check.log
>
Status: 1 NOTE

Last released version's CRAN status: ERROR: 2
See: <https://CRAN.R-project.org/web/checks/check_results_maGUI.html
<https://cran.r-project.org/web/checks/check_results_maGUI.html>>

CRAN Web: <https://cran.r-project.org/package=maGUI>

Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on
the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please
reply-all to this message and explain.

More details are given in the directory:
<
https://win-builder.r-project.org/incoming_pretest/maGUI_2.3_20190217_181340/
>
The files will be removed after roughly 7 days.

No strong reverse dependencies to be checked.

Best regards,
CRAN teams' auto-check service
Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
Check: CRAN incoming feasibility, Result: NOTE
  Maintainer: 'Dhammapal Bharne <dhammapalb at uohyd.ac.in>'

  New submission

  Package was archived on CRAN

  CRAN repository db overrides:
    X-CRAN-Comment: Archived on 2018-11-01 as check warnings were not
      corrected despite a month's notice.

    Needed change for BioC 3.8

Flavor: r-devel-windows-ix86+x86_64
Check: whether package can be installed, Result: WARNING
  Found the following significant warnings:
    Warning: 'BiocInstaller' and 'biocLite()' are deprecated, use the
'BiocManager' CRAN
  See 'd:/RCompile/CRANincoming/R-devel/maGUI.Rcheck/00install.out' for
details.

Flavor: r-devel-windows-ix86+x86_64
Check: Overall checktime, Result: NOTE
  Overall checktime 11 min > 10 min


On Wed, 20 Feb 2019, 2:36 am Duncan Murdoch <murdoch.duncan at gmail.com wrote:

> On 19/02/2019 11:47 a.m., dhamma pal wrote:
> > Dear all.
> > The current version of the maGUI package is 2.2 which got errors after
> the
> > upgradation of R version.
> >
> > Therefore I was trying to submit new version 2.3 of the package but
> getting
> > warnings of the previous version of 2.2 at the CRAN incoming Precheck
> > server.
> >
> > To resolve this, Do I need to upload the corrected package with the 2.2
> > version?
> > or How to rectify the errors of the previous version the packages at the
> > CRAN repository?
> >
> > Note: The error message is that "BiocInstaller and biocLite packages are
> > depreciated. Use BiocManager instead." Therefore I have replaced these
> > packages with BiocManager package. But now It couldn't upload at CRAN
> > because of the errors in the previous version.
>
> I suspect your interpretation of the messages you've received could be
> incorrect.  Could you post a copy of it if it came by email, or a link
> if it's on a web page?
>
> One reason you may have trouble uploading a revision is that you were
> unresponsive to requests for fixes in the previous one, and your package
> has been archived:  see
>
> https://cran.r-project.org/web/packages/maGUI/index.html
>
> and
>
>
> https://cran-archive.r-project.org/web/checks/2018-11-01_check_results_maGUI.html
>
> The stuff about the Bioconductor packages is shown as warnings, but you
> also have errors.  Did you fix everything?
>
> Duncan Murdoch
>

	[[alternative HTML version deleted]]


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Wed Feb 20 13:28:47 2019
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Wed, 20 Feb 2019 12:28:47 +0000
Subject: [R-pkg-devel] Regarding maGUI package error
In-Reply-To: <CACApb-EYnpJ4bDKY8DMMyiReLAyhcqkBON85q5RX50UrKZN+HA@mail.gmail.com>
References: <CACApb-Fy0pLVv0B8teHJL2L1fVduNJCJCJHo9eP4tEsS0kMxrQ@mail.gmail.com>
 <13455e3d-a24a-0cf2-04e9-1b1aa989f764@gmail.com>
 <CACApb-EYnpJ4bDKY8DMMyiReLAyhcqkBON85q5RX50UrKZN+HA@mail.gmail.com>
Message-ID: <MN2PR05MB6496FE9A76BE1C63CF92DC40F97D0@MN2PR05MB6496.namprd05.prod.outlook.com>

On Windows, likely the warning about BiocInstaller comes from a package dependency, rather than your package.

Somehow this seems like a CRAN misconfiguration or perhaps workaround to accommodate packages that need to be fixed. The warning message comes when loading BiocInstaller (BiocInstaller has been replaced by BiocManager, which is a standard CRAN package). The development version of R should be using the development version of Bioconductor. BiocInstaller was removed from the development version of Bioconductor, so the warning message should not appear -- any package trying to load BiocInstaller should simply fail.

Martin Morgan

?On 2/20/19, 2:06 AM, "R-package-devel on behalf of dhamma pal" <r-package-devel-bounces at r-project.org on behalf of dhammapalb at uohyd.ac.in> wrote:

    Hi.
    Following is the check results from CRAN server, though I didn't get any
    warning on my PC.
    
    package maGUI_2.3.tar.gz does not pass the incoming checks automatically,
    please see the following pre-tests:
    Windows: <
    https://win-builder.r-project.org/incoming_pretest/maGUI_2.3_20190217_181340/Windows/00check.log
    >
    Status: 1 WARNING, 1 NOTE
    Debian: <
    https://win-builder.r-project.org/incoming_pretest/maGUI_2.3_20190217_181340/Debian/00check.log
    >
    Status: 1 NOTE
    
    Last released version's CRAN status: ERROR: 2
    See: <https://CRAN.R-project.org/web/checks/check_results_maGUI.html
    <https://cran.r-project.org/web/checks/check_results_maGUI.html>>
    
    CRAN Web: <https://cran.r-project.org/package=maGUI>
    
    Please fix all problems and resubmit a fixed version via the webform.
    If you are not sure how to fix the problems shown, please ask for help on
    the R-package-devel mailing list:
    <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
    If you are fairly certain the rejection is a false positive, please
    reply-all to this message and explain.
    
    More details are given in the directory:
    <
    https://win-builder.r-project.org/incoming_pretest/maGUI_2.3_20190217_181340/
    >
    The files will be removed after roughly 7 days.
    
    No strong reverse dependencies to be checked.
    
    Best regards,
    CRAN teams' auto-check service
    Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
    Check: CRAN incoming feasibility, Result: NOTE
      Maintainer: 'Dhammapal Bharne <dhammapalb at uohyd.ac.in>'
    
      New submission
    
      Package was archived on CRAN
    
      CRAN repository db overrides:
        X-CRAN-Comment: Archived on 2018-11-01 as check warnings were not
          corrected despite a month's notice.
    
        Needed change for BioC 3.8
    
    Flavor: r-devel-windows-ix86+x86_64
    Check: whether package can be installed, Result: WARNING
      Found the following significant warnings:
        Warning: 'BiocInstaller' and 'biocLite()' are deprecated, use the
    'BiocManager' CRAN
      See 'd:/RCompile/CRANincoming/R-devel/maGUI.Rcheck/00install.out' for
    details.
    
    Flavor: r-devel-windows-ix86+x86_64
    Check: Overall checktime, Result: NOTE
      Overall checktime 11 min > 10 min
    
    
    On Wed, 20 Feb 2019, 2:36 am Duncan Murdoch <murdoch.duncan at gmail.com wrote:
    
    > On 19/02/2019 11:47 a.m., dhamma pal wrote:
    > > Dear all.
    > > The current version of the maGUI package is 2.2 which got errors after
    > the
    > > upgradation of R version.
    > >
    > > Therefore I was trying to submit new version 2.3 of the package but
    > getting
    > > warnings of the previous version of 2.2 at the CRAN incoming Precheck
    > > server.
    > >
    > > To resolve this, Do I need to upload the corrected package with the 2.2
    > > version?
    > > or How to rectify the errors of the previous version the packages at the
    > > CRAN repository?
    > >
    > > Note: The error message is that "BiocInstaller and biocLite packages are
    > > depreciated. Use BiocManager instead." Therefore I have replaced these
    > > packages with BiocManager package. But now It couldn't upload at CRAN
    > > because of the errors in the previous version.
    >
    > I suspect your interpretation of the messages you've received could be
    > incorrect.  Could you post a copy of it if it came by email, or a link
    > if it's on a web page?
    >
    > One reason you may have trouble uploading a revision is that you were
    > unresponsive to requests for fixes in the previous one, and your package
    > has been archived:  see
    >
    > https://cran.r-project.org/web/packages/maGUI/index.html
    >
    > and
    >
    >
    > https://cran-archive.r-project.org/web/checks/2018-11-01_check_results_maGUI.html
    >
    > The stuff about the Bioconductor packages is shown as warnings, but you
    > also have errors.  Did you fix everything?
    >
    > Duncan Murdoch
    >
    
    	[[alternative HTML version deleted]]
    
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel
    

From chu|@nk@o @end|ng |rom gm@||@com  Thu Feb 21 07:52:58 2019
From: chu|@nk@o @end|ng |rom gm@||@com (Chu-Lan Kao)
Date: Thu, 21 Feb 2019 14:52:58 +0800
Subject: [R-pkg-devel] Problem on rand() in packaging
Message-ID: <CAGAt5k8EbMLVDkO8cL-kwMwTqJadS33tSyvJV83fo8SiPX9sYQ@mail.gmail.com>

Dear Sir,

I've got a Rcpp code in the form like the following in my uploaded package:

inline double runiforminline(){
  std::default_random_engine generator(rand());
  std::uniform_real_distribution<double> distribution (0.0, 1.0);
  return (distribution(generator));
}

But as I uploaded, the system ask me to remove rand(). Various attempt has
been tried, but all of them result in no randomness at all. Not sure how to
fix it. Kindly appreciate all helps.

Sincerely,

Chu-Lan Kao ( ??? Michael )
*http://chulankao.blogspot.com / <http://chulankao.blogspot.com/>*
ChuLanKao at gmail.com
<http://chulankao.blogspot.com%20/%20ChuLanKao at gmail.com> / 0956242509

Assist. Prof. in Statistics, National Chiao-Tung University
Music Director for dramAcappella Theater
<https://www.facebook.com/dramAcappella>
Composer, Taipei Philaharmonic Chorus <http://www.tpf.org.tw/index.php>
Gamer Consultant and Designer

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Feb 21 09:16:38 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 21 Feb 2019 09:16:38 +0100
Subject: [R-pkg-devel] Problem on rand() in packaging
In-Reply-To: <CAGAt5k8EbMLVDkO8cL-kwMwTqJadS33tSyvJV83fo8SiPX9sYQ@mail.gmail.com>
References: <CAGAt5k8EbMLVDkO8cL-kwMwTqJadS33tSyvJV83fo8SiPX9sYQ@mail.gmail.com>
Message-ID: <b099fd79-d2c6-9f54-edbf-e3083f0ebc1c@statistik.tu-dortmund.de>

Use R's RNG, see Writing R Extensions.

Best,
Uwe Ligges


On 21.02.2019 07:52, Chu-Lan Kao wrote:
> Dear Sir,
> 
> I've got a Rcpp code in the form like the following in my uploaded package:
> 
> inline double runiforminline(){
>    std::default_random_engine generator(rand());
>    std::uniform_real_distribution<double> distribution (0.0, 1.0);
>    return (distribution(generator));
> }
> 
> But as I uploaded, the system ask me to remove rand(). Various attempt has
> been tried, but all of them result in no randomness at all. Not sure how to
> fix it. Kindly appreciate all helps.
> 
> Sincerely,
> 
> Chu-Lan Kao ( ??? Michael )
> *http://chulankao.blogspot.com / <http://chulankao.blogspot.com/>*
> ChuLanKao at gmail.com
> <http://chulankao.blogspot.com%20/%20ChuLanKao at gmail.com> / 0956242509
> 
> Assist. Prof. in Statistics, National Chiao-Tung University
> Music Director for dramAcappella Theater
> <https://www.facebook.com/dramAcappella>
> Composer, Taipei Philaharmonic Chorus <http://www.tpf.org.tw/index.php>
> Gamer Consultant and Designer
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From r@||@@tubner @end|ng |rom d@q@n@@com  Thu Feb 21 09:46:03 2019
From: r@||@@tubner @end|ng |rom d@q@n@@com (Ralf Stubner)
Date: Thu, 21 Feb 2019 09:46:03 +0100
Subject: [R-pkg-devel] Problem on rand() in packaging
In-Reply-To: <b099fd79-d2c6-9f54-edbf-e3083f0ebc1c@statistik.tu-dortmund.de>
References: <CAGAt5k8EbMLVDkO8cL-kwMwTqJadS33tSyvJV83fo8SiPX9sYQ@mail.gmail.com>
 <b099fd79-d2c6-9f54-edbf-e3083f0ebc1c@statistik.tu-dortmund.de>
Message-ID: <b2ed972b-d26f-5383-d5b2-3c8a5995955f@daqana.com>

On 21.02.19 09:16, Uwe Ligges wrote:
> Use R's RNG, see Writing R Extensions.

Which can be conveniently used with R::runif and Rcpp::runif etc. when
using Rcpp.

cheerio
ralf

> Best,
> Uwe Ligges
> 
> 
> On 21.02.2019 07:52, Chu-Lan Kao wrote:
>> Dear Sir,
>>
>> I've got a Rcpp code in the form like the following in my uploaded
>> package:
>>
>> inline double runiforminline(){
>> ?? std::default_random_engine generator(rand());
>> ?? std::uniform_real_distribution<double> distribution (0.0, 1.0);
>> ?? return (distribution(generator));
>> }
>>
>> But as I uploaded, the system ask me to remove rand(). Various attempt
>> has
>> been tried, but all of them result in no randomness at all. Not sure
>> how to
>> fix it. Kindly appreciate all helps.
>>
>> Sincerely,
>>
>> Chu-Lan Kao ( ??? Michael )
>> *http://chulankao.blogspot.com / <http://chulankao.blogspot.com/>*
>> ChuLanKao at gmail.com
>> <http://chulankao.blogspot.com%20/%20ChuLanKao at gmail.com> / 0956242509
>>
>> Assist. Prof. in Statistics, National Chiao-Tung University
>> Music Director for dramAcappella Theater
>> <https://www.facebook.com/dramAcappella>
>> Composer, Taipei Philaharmonic Chorus <http://www.tpf.org.tw/index.php>
>> Gamer Consultant and Designer
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190221/3a3f9d5f/attachment.sig>

From @nto|ne|uc@@ @end|ng |rom gm@||@com  Fri Feb 22 14:02:15 2019
From: @nto|ne|uc@@ @end|ng |rom gm@||@com (Antoine Lucas)
Date: Fri, 22 Feb 2019 14:02:15 +0100
Subject: [R-pkg-devel] Cran submission - warning with windows (cpp build
 library gmp)
Message-ID: <CAM98rvQRpR+sU8VQg57OnA9c6ADihU21-gswXgS==VPtZYjQEQ@mail.gmail.com>

Dear all

I would like to update gmp package - this package link to a c++ library gmp.

But windows c++ compilation warns at:
 d:/Compiler/gcc-4.9.3/local330/include/gmp-x64.h:140:23: warning: ISO
C++ 1998 does not support 'long long' [-Wlong-long]

I have not this warning on linux.
On my computer I build latest version on gmplib, and header is a
little different and should not define a long long. I wonder if the
warning could be fixed by an update of external c++ library gmp.

How could I fix my package in order to pass the cran submission ?

Regards,

Antoine Lucas

gmp.h at line 140:
#ifdef __GMP_SHORT_LIMB
typedef unsigned int            mp_limb_t;
typedef int                     mp_limb_signed_t;
#else
#ifdef _LONG_LONG_LIMB
typedef unsigned long long int  mp_limb_t;
typedef long long int           mp_limb_signed_t;
#else
typedef unsigned long int       mp_limb_t;
typedef long int                mp_limb_signed_t;
#endif
#endif


From p@u|h|bb|ng @end|ng |rom gm@||@com  Fri Feb 22 15:05:07 2019
From: p@u|h|bb|ng @end|ng |rom gm@||@com (Paul Hibbing)
Date: Fri, 22 Feb 2019 09:05:07 -0500
Subject: [R-pkg-devel] Best practice for releasing heavy internal data
In-Reply-To: <CANA-rNN=yvAGvL92HRpsLMnaqN-dEZWEF7bEDHWBgCT5SXoDiA@mail.gmail.com>
References: <CANA-rNN=yvAGvL92HRpsLMnaqN-dEZWEF7bEDHWBgCT5SXoDiA@mail.gmail.com>
Message-ID: <CANA-rNOBDKnPjYFDvNKo5FRdd3z4NPmFQtSu0Jnc56K_THtp4w@mail.gmail.com>

Hi all,

I am revisiting this and wondering if it would be a case in which I should
submit as-is, and include justification for ignoring the NOTE about
excessive directory size.

Best,
Paul Hibbing

On Mon, Feb 18, 2019 at 3:20 PM Paul Hibbing <paulhibbing at gmail.com> wrote:

> Hi all,
>
> I am preparing a package that makes use of several neural networks,
> which are quite large. They aren't
> intended for public use, so they're currently stored in sysdata.R, but
> they make the R directory too heavy
> (close to 5MB).
>
> What is best practice in this case? I'm aware the general
> recommendation is to set up a separate data
> package that updates infrequently, but that seems undesirable since
> these objects weren't going to be
> exported in the first place.
>
> Thanks for your help.
> -Paul Hibbing
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Feb 22 15:14:43 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 22 Feb 2019 15:14:43 +0100
Subject: [R-pkg-devel] downtime for CRAN auto checks and winbuilder
Message-ID: <08945978-668a-b583-8f8e-71116220ffa7@statistik.tu-dortmund.de>

Dear developers,

CRAN auto checks and winbuilder will be down from Feb 22, 3.30 pm CET to 
Feb 24, 4pm CET. Submission to CRAN will still be possible.

This will be caused by scheduled network maintainance work in our 
building in Dortmund.

Best,
Uwe Ligges


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Fri Feb 22 17:17:43 2019
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Fri, 22 Feb 2019 16:17:43 +0000
Subject: [R-pkg-devel] Best practice for releasing heavy internal data
In-Reply-To: <CANA-rNOBDKnPjYFDvNKo5FRdd3z4NPmFQtSu0Jnc56K_THtp4w@mail.gmail.com>
References: <CANA-rNN=yvAGvL92HRpsLMnaqN-dEZWEF7bEDHWBgCT5SXoDiA@mail.gmail.com>
 <CANA-rNOBDKnPjYFDvNKo5FRdd3z4NPmFQtSu0Jnc56K_THtp4w@mail.gmail.com>
Message-ID: <78ac7365-c5cb-3579-c9d8-17d6972151d8@dewey.myzen.co.uk>

Dear Paul

The advantage of a data-only supplementary package is that users who 
live in countries where they have either a very slow connection or where 
they have to pay per byte to download will be spared 5MB every time you 
update your main package. I do not think the fact that you never expect 
them to explicitly access the data is a worry.

Michael

On 22/02/2019 14:05, Paul Hibbing wrote:
> Hi all,
> 
> I am revisiting this and wondering if it would be a case in which I should
> submit as-is, and include justification for ignoring the NOTE about
> excessive directory size.
> 
> Best,
> Paul Hibbing
> 
> On Mon, Feb 18, 2019 at 3:20 PM Paul Hibbing <paulhibbing at gmail.com> wrote:
> 
>> Hi all,
>>
>> I am preparing a package that makes use of several neural networks,
>> which are quite large. They aren't
>> intended for public use, so they're currently stored in sysdata.R, but
>> they make the R directory too heavy
>> (close to 5MB).
>>
>> What is best practice in this case? I'm aware the general
>> recommendation is to set up a separate data
>> package that updates infrequently, but that seems undesirable since
>> these objects weren't going to be
>> exported in the first place.
>>
>> Thanks for your help.
>> -Paul Hibbing
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From kev|nu@hey @end|ng |rom gm@||@com  Fri Feb 22 19:09:15 2019
From: kev|nu@hey @end|ng |rom gm@||@com (Kevin Ushey)
Date: Fri, 22 Feb 2019 10:09:15 -0800
Subject: [R-pkg-devel] Cran submission - warning with windows (cpp build
 library gmp)
In-Reply-To: <CAM98rvQRpR+sU8VQg57OnA9c6ADihU21-gswXgS==VPtZYjQEQ@mail.gmail.com>
References: <CAM98rvQRpR+sU8VQg57OnA9c6ADihU21-gswXgS==VPtZYjQEQ@mail.gmail.com>
Message-ID: <CAJXgQP1xd5db5xV8nyfYkzmOwJCLj2-HGXYs5uaZ8U-B9xGiLg@mail.gmail.com>

The 'long long' type does not exist in the C++98 standard, so you need to
explicitly request C++11 or C++14 (the former which is now fairly broadly
supported across compilers on different systems).

For more detail, see in the R extensions manual:

https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Using-C_002b_002b11-code

Best,
Kevin

On Fri, Feb 22, 2019 at 5:08 AM Antoine Lucas <antoinelucas at gmail.com>
wrote:

> Dear all
>
> I would like to update gmp package - this package link to a c++ library
> gmp.
>
> But windows c++ compilation warns at:
>  d:/Compiler/gcc-4.9.3/local330/include/gmp-x64.h:140:23: warning: ISO
> C++ 1998 does not support 'long long' [-Wlong-long]
>
> I have not this warning on linux.
> On my computer I build latest version on gmplib, and header is a
> little different and should not define a long long. I wonder if the
> warning could be fixed by an update of external c++ library gmp.
>
> How could I fix my package in order to pass the cran submission ?
>
> Regards,
>
> Antoine Lucas
>
> gmp.h at line 140:
> #ifdef __GMP_SHORT_LIMB
> typedef unsigned int            mp_limb_t;
> typedef int                     mp_limb_signed_t;
> #else
> #ifdef _LONG_LONG_LIMB
> typedef unsigned long long int  mp_limb_t;
> typedef long long int           mp_limb_signed_t;
> #else
> typedef unsigned long int       mp_limb_t;
> typedef long int                mp_limb_signed_t;
> #endif
> #endif
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Sat Feb 23 11:39:50 2019
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Sat, 23 Feb 2019 11:39:50 +0100
Subject: [R-pkg-devel] Cran submission - warning with windows (cpp build
 library gmp)
In-Reply-To: <CAJXgQP1xd5db5xV8nyfYkzmOwJCLj2-HGXYs5uaZ8U-B9xGiLg@mail.gmail.com>
References: <CAM98rvQRpR+sU8VQg57OnA9c6ADihU21-gswXgS==VPtZYjQEQ@mail.gmail.com>
 <CAJXgQP1xd5db5xV8nyfYkzmOwJCLj2-HGXYs5uaZ8U-B9xGiLg@mail.gmail.com>
Message-ID: <23665.8950.411407.114378@stat.math.ethz.ch>

>>>>> Kevin Ushey 
>>>>>     on Fri, 22 Feb 2019 10:09:15 -0800 writes:

    > The 'long long' type does not exist in the C++98
    > standard, so you need to explicitly request C++11 or
    > C++14 (the former which is now fairly broadly supported
    > across compilers on different systems).

    > For more detail, see in the R extensions manual:

    > https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Using-C_002b_002b11-code

    > Best, Kevin

Indeed, thank you, Kevin.

In this case, it simply needs an extra line
   CXX_STD = CXX11
added to gmp/src/Makevars.in
(already done now).

Martin

    > On Fri, Feb 22, 2019 at 5:08 AM Antoine Lucas
    > <antoinelucas at gmail.com> wrote:

    >> Dear all
    >> 
    >> I would like to update gmp package - this package link to
    >> a c++ library gmp.
    >> 
    >> But windows c++ compilation warns at:
    >> d:/Compiler/gcc-4.9.3/local330/include/gmp-x64.h:140:23:
    >> warning: ISO C++ 1998 does not support 'long long'
    >> [-Wlong-long]
    >> 
    >> I have not this warning on linux.  On my computer I build
    >> latest version on gmplib, and header is a little
    >> different and should not define a long long. I wonder if
    >> the warning could be fixed by an update of external c++
    >> library gmp.
    >> 
    >> How could I fix my package in order to pass the cran
    >> submission ?
    >> 
    >> Regards,
    >> 
    >> Antoine Lucas
    >> 
    >> gmp.h at line 140: #ifdef __GMP_SHORT_LIMB typedef
    >> unsigned int mp_limb_t; typedef int mp_limb_signed_t;
    >> #else #ifdef _LONG_LONG_LIMB typedef unsigned long long
    >> int mp_limb_t; typedef long long int mp_limb_signed_t;
    >> #else typedef unsigned long int mp_limb_t; typedef long
    >> int mp_limb_signed_t; #endif #endif


From m@@@n|||oroo@h@n @end|ng |rom gm@||@com  Sun Feb 24 00:43:15 2019
From: m@@@n|||oroo@h@n @end|ng |rom gm@||@com (Mohammad Ali Nilforooshan)
Date: Sun, 24 Feb 2019 12:43:15 +1300
Subject: [R-pkg-devel] NOTE for a suggested package
Message-ID: <CANoJKNhJ7bpvzb54hdjxH8teKLnWqLMib2=T90z662GPe8rgUA@mail.gmail.com>

I'm struggling to stop receiving a NOTE about a suggested package, and it
seems to be the problem for many people. Your help is really appreciated.

In the function, I have:

if(requireNamespace("doParallel", quietly=TRUE))
{
   library("doParallel")
   cl = parallel::makeCluster(ncl)
   doParallel::registerDoParallel(cl)
   Q = foreach(i=ggID, .combine='cbind') %dopar% ## do something
} else {
   ## do something else
}

In DESCRIPTION, I have:

Suggests:
   doParallel (>= 1.0.14)

This is the NOTE that I receive:

'library' or 'require' call to 'doParallel' in package code.
Please use :: or requireNamespace() instead.
See section 'Suggested packages' in the 'Writing R Extensions' manual.

	[[alternative HTML version deleted]]


From jo@h@m@u|r|ch @end|ng |rom gm@||@com  Sun Feb 24 01:31:39 2019
From: jo@h@m@u|r|ch @end|ng |rom gm@||@com (Joshua Ulrich)
Date: Sat, 23 Feb 2019 18:31:39 -0600
Subject: [R-pkg-devel] NOTE for a suggested package
In-Reply-To: <CANoJKNhJ7bpvzb54hdjxH8teKLnWqLMib2=T90z662GPe8rgUA@mail.gmail.com>
References: <CANoJKNhJ7bpvzb54hdjxH8teKLnWqLMib2=T90z662GPe8rgUA@mail.gmail.com>
Message-ID: <CAPPM_gRsgii0rTMkTtgPMrdJu7ouUJ4S1jY9Fuh1hQXz-zXJVQ@mail.gmail.com>

You can remove the `library("doParallel")`.  Your call to
requireNamespace() plus calling all doParallel functions with `::` is
sufficient.  That should resolve the NOTE.

On Sat, Feb 23, 2019 at 5:49 PM Mohammad Ali Nilforooshan
<m.a.nilforooshan at gmail.com> wrote:
>
> I'm struggling to stop receiving a NOTE about a suggested package, and it
> seems to be the problem for many people. Your help is really appreciated.
>
> In the function, I have:
>
> if(requireNamespace("doParallel", quietly=TRUE))
> {
>    library("doParallel")
>    cl = parallel::makeCluster(ncl)
>    doParallel::registerDoParallel(cl)
>    Q = foreach(i=ggID, .combine='cbind') %dopar% ## do something
> } else {
>    ## do something else
> }
>
> In DESCRIPTION, I have:
>
> Suggests:
>    doParallel (>= 1.0.14)
>
> This is the NOTE that I receive:
>
> 'library' or 'require' call to 'doParallel' in package code.
> Please use :: or requireNamespace() instead.
> See section 'Suggested packages' in the 'Writing R Extensions' manual.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com
R/Finance 2018 | www.rinfinance.com


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Feb 24 01:14:51 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 23 Feb 2019 16:14:51 -0800
Subject: [R-pkg-devel] NOTE for a suggested package
In-Reply-To: <CANoJKNhJ7bpvzb54hdjxH8teKLnWqLMib2=T90z662GPe8rgUA@mail.gmail.com>
References: <CANoJKNhJ7bpvzb54hdjxH8teKLnWqLMib2=T90z662GPe8rgUA@mail.gmail.com>
Message-ID: <4CC8CF8F-89B0-4EB0-88A0-AF64CC81F13C@dcn.davis.ca.us>

Remove the library function call...

On February 23, 2019 3:43:15 PM PST, Mohammad Ali Nilforooshan <m.a.nilforooshan at gmail.com> wrote:
>I'm struggling to stop receiving a NOTE about a suggested package, and
>it
>seems to be the problem for many people. Your help is really
>appreciated.
>
>In the function, I have:
>
>if(requireNamespace("doParallel", quietly=TRUE))
>{
>   library("doParallel")
>   cl = parallel::makeCluster(ncl)
>   doParallel::registerDoParallel(cl)
>   Q = foreach(i=ggID, .combine='cbind') %dopar% ## do something
>} else {
>   ## do something else
>}
>
>In DESCRIPTION, I have:
>
>Suggests:
>   doParallel (>= 1.0.14)
>
>This is the NOTE that I receive:
>
>'library' or 'require' call to 'doParallel' in package code.
>Please use :: or requireNamespace() instead.
>See section 'Suggested packages' in the 'Writing R Extensions' manual.
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sun Feb 24 16:52:49 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sun, 24 Feb 2019 16:52:49 +0100
Subject: [R-pkg-devel] NOTE for a suggested package
In-Reply-To: <CANoJKNhJ7bpvzb54hdjxH8teKLnWqLMib2=T90z662GPe8rgUA@mail.gmail.com>
References: <CANoJKNhJ7bpvzb54hdjxH8teKLnWqLMib2=T90z662GPe8rgUA@mail.gmail.com>
Message-ID: <2da35b3e-f2ce-353f-601f-e5092edcdac8@statistik.tu-dortmund.de>



On 24.02.2019 00:43, Mohammad Ali Nilforooshan wrote:
> I'm struggling to stop receiving a NOTE about a suggested package, and it
> seems to be the problem for many people. Your help is really appreciated.
> 
> In the function, I have:
> 
> if(requireNamespace("doParallel", quietly=TRUE))
> {
>     library("doParallel")

Do you really need both, the namespace loaded *and* the package oin the 
search oath?

If the former is suficient, the library(call) should be omitted.

Best,
Uwe Ligges

>     cl = parallel::makeCluster(ncl)
>     doParallel::registerDoParallel(cl)
>     Q = foreach(i=ggID, .combine='cbind') %dopar% ## do something
> } else {
>     ## do something else
> }
> 
> In DESCRIPTION, I have:
> 
> Suggests:
>     doParallel (>= 1.0.14)
> 
> This is the NOTE that I receive:
> 
> 'library' or 'require' call to 'doParallel' in package code.
> Please use :: or requireNamespace() instead.
> See section 'Suggested packages' in the 'Writing R Extensions' manual.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From m@@@n|||oroo@h@n @end|ng |rom gm@||@com  Mon Feb 25 02:41:58 2019
From: m@@@n|||oroo@h@n @end|ng |rom gm@||@com (Mohammad Ali Nilforooshan)
Date: Mon, 25 Feb 2019 14:41:58 +1300
Subject: [R-pkg-devel] could not find function "%dopar%"
Message-ID: <CANoJKNjWX_sZii2nOQhZwN_D2PSJWAwGimCEnbV6vT05QK5E8w@mail.gmail.com>

One of my functions does parallel processing with "doParallel" and
"foreach". "foreach" is a dependency to "doParallel". My R package keeps
failing, because %dopar% is not recognized as a function. I tried
%foreach::dopar%, %parallel::dopar% , %doParallel::dopar%, and
%iterators::dopar%. It didn't help!

In DESCRIPTION, I have:

Suggests:
   dpParallel (>= 1.0.14)

I want it to be "suggested" rather than a dependency.
Following is the example function. To make sure that it is working, try
library("doParallel").

myfunc = function(n) {
   if(requireNamespace("doParallel", quietly=TRUE))
   {
      cl = parallel::makeCluster(2)
      doParallel::registerDoParallel(cl)
      Q = foreach::foreach(i=1:n, .combine='cbind') %dopar% rep(i, 5)
      parallel::stopCluster(cl)
      return(Q)
   } else {
      print("Package doParallel is required.")
   }
}

Your help is really appreciated!

	[[alternative HTML version deleted]]


From m@@@n|||oroo@h@n @end|ng |rom gm@||@com  Mon Feb 25 03:26:55 2019
From: m@@@n|||oroo@h@n @end|ng |rom gm@||@com (Mohammad Ali Nilforooshan)
Date: Mon, 25 Feb 2019 15:26:55 +1300
Subject: [R-pkg-devel] could not find function "%dopar%"
In-Reply-To: <CANoJKNjWX_sZii2nOQhZwN_D2PSJWAwGimCEnbV6vT05QK5E8w@mail.gmail.com>
References: <CANoJKNjWX_sZii2nOQhZwN_D2PSJWAwGimCEnbV6vT05QK5E8w@mail.gmail.com>
Message-ID: <CANoJKNg27OhNK9v1u4rGBLVtFd87JkcPbP6hboJUtd00HoBkpw@mail.gmail.com>

Problem solved!
`%dopar%` <- foreach::`%dopar%`


One of my functions does parallel processing with "doParallel" and
> "foreach". "foreach" is a dependency to "doParallel". My R package keeps
> failing, because %dopar% is not recognized as a function. I tried
> %foreach::dopar%, %parallel::dopar% , %doParallel::dopar%, and
> %iterators::dopar%. It didn't help!
>
> In DESCRIPTION, I have:
>
> Suggests:
>    dpParallel (>= 1.0.14)
>
> I want it to be "suggested" rather than a dependency.
> Following is the example function. To make sure that it is working, try
> library("doParallel").
>
> myfunc = function(n) {
>    if(requireNamespace("doParallel", quietly=TRUE))
>    {
>       cl = parallel::makeCluster(2)
>       doParallel::registerDoParallel(cl)
>       Q = foreach::foreach(i=1:n, .combine='cbind') %dopar% rep(i, 5)
>       parallel::stopCluster(cl)
>       return(Q)
>    } else {
>       print("Package doParallel is required.")
>    }
> }
>
> Your help is really appreciated!
>

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Mon Feb 25 09:54:57 2019
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 25 Feb 2019 02:54:57 -0600
Subject: [R-pkg-devel] DLL 'Matrix' not found: maybe not installed for this
 architecture?
In-Reply-To: <01d4ccb7$Blat.v3.2.16$5da6a012$2c5c1fde@mail.statistik.tu-dortmund.de>
References: <01d4ccb7$Blat.v3.2.16$5da6a012$2c5c1fde@mail.statistik.tu-dortmund.de>
Message-ID: <a42a8ceb-3696-6d64-d6c2-da552bad4f15@effectivedefense.org>

Hello:


 ????? "00check.log" produced by R-devel winbuilder (link below) 
includes the following:


** checking whether the package can be loaded ... ERROR
Loading this package had a fatal error status code 1
Loading log:
Error: package or namespace load failed for 'Ecfun' in 
library.dynam(lib, package, package.lib):
 ?DLL 'Matrix' not found: maybe not installed for this architecture?
In addition: Warning message:
S3 methods 'print.sparseSummary', 'print.diagSummary', 'c.abIndex', 
'c.sparseVector', 'as.array.Matrix', 'as.array.sparseVector', 
'as.matrix.Matrix', 'as.matrix.sparseVector', 'as.vector.Matrix', 
'as.vector.sparseVector' were declared in NAMESPACE but not found
Execution halted


 ????? Is this problem with R-devel winbuilder or me?


 ????? This is for Ecfun on R-Forge that passed their standard tests 
plus on R 3.5.2 on macOS Mojave 10.14.3.


 ????? Thanks,
 ????? Spencer Graves


-------- Forwarded Message --------
Subject: 	winbuilder: Package Ecfun_0.2-0.tar.gz has been checked and built
Date: 	Mon, 25 Feb 2019 04:08:22 +0100
From: 	ligges at statistik.tu-dortmund.de
To: 	spencer.graves at effectivedefense.org
CC: 	ligges at statistik.tu-dortmund.de



Dear package maintainer,
this notification has been generated automatically.
Your package Ecfun_0.2-0.tar.gz has been built (if working) and checked 
for Windows.
Please check the log files and (if working) the binary package at:
https://win-builder.r-project.org/a5a1hg7XRQIO
The files will be removed after roughly 72 hours.
Installation time in seconds: 23
Check time in seconds: 56
Status: 1 ERROR
R Under development (unstable) (2019-02-24 r76155)
All the best,
Uwe Ligges
(CRAN maintainer of binary packages for Windows)



	[[alternative HTML version deleted]]


From hor|@@yeb @end|ng |rom gm@||@com  Mon Feb 25 15:57:37 2019
From: hor|@@yeb @end|ng |rom gm@||@com (Horia Yeb)
Date: Mon, 25 Feb 2019 15:57:37 +0100
Subject: [R-pkg-devel] Possible Rtools path problem
Message-ID: <CANiCS6Vi9SwX7sjME21OdVHvQxoCBJSx011rPU+CKpAqz0HR5w@mail.gmail.com>

*Hi there, I am creating a R (using R3.5.2)package with Rcpp through R
studio(1.1.456) and using RTools35.*
*I've replaced my name in the paths with " USER "*

*On build I get no error messages or warnings, but on R CMD check I get :*

$ R CMD check DataViz_1.0.tar.gz
* using log directory 'C:/Users/ USER/Documents/RThrowChart/DataViz.Rcheck'
* using R version 3.5.2 (2018-12-20)
* using platform: i386-w64-mingw32 (32-bit)
* using session charset: ISO8859-1
*[....]*
* checking whether package 'DataViz' can be installed ... ERROR
Installation failed.
See 'C:/Users/ USER/Documents/RThrowChart/DataViz.Rcheck/00install.out' for
details.
* DONE

Status: 1 ERROR
See
'C:/Users/USER/Documents/RThrowChart/DataViz.Rcheck/00check.log'
for details.



___
*My 00check file : *


* checking whether package 'DataViz' can be installed ... ERROR
Installation failed.
See 'C:/Users/USER/Documents/RThrowChart/DataViz.Rcheck/00install.out' for
details.
* DONE
Status: 1 ERROR



___
*My 00install file :*

* installing *source* package 'DataViz' ...
** libs
C:/Users/ USER  /DOCUME~1/R/R-35~1.2/etc/i386/Makeconf:230: warning:
overriding commands for target `.m.o'
C:/Users/ USER  /DOCUME~1/R/R-35~1.2/etc/i386/Makeconf:223: warning:
ignoring old commands for target `.m.o'
c:/Rtools/mingw_32/bin/g++  -I"C:/Users/ USER
/DOCUME~1/R/R-35~1.2/include" -DNDEBUG  -I"C:/Users/ USER
/Documents/R/win-library/3.5/Rcpp/include"        -O2 -Wall  -mtune=generic
-c RcppExports.cpp -o RcppExports.o
c:/Rtools/mingw_32/bin/g++  -I"C:/Users/ USER
/DOCUME~1/R/R-35~1.2/include" -DNDEBUG  -I"C:/Users/ USER
/Documents/R/win-library/3.5/Rcpp/include"        -O2 -Wall  -mtune=generic
-c rcpp_ThrowChart.cpp -o rcpp_ThrowChart.o
c:/Rtools/mingw_32/bin/g++  -shared -s -static-libgcc -o DataViz.dll
tmp.def RcppExports.o rcpp_ThrowChart.o -LC:/Users/ USER
/DOCUME~1/R/R-35~1.2/bin/i386 -lR
/Rtools/bin/sh: line 8: c:/Rtools/mingw_32/bin/g++ : No such file or
directory
C:/Users/ USER  /DOCUME~1/R/R-35~1.2/etc/i386/Makeconf:230: warning:
overriding commands for target `.m.o'
C:/Users/ USER  /DOCUME~1/R/R-35~1.2/etc/i386/Makeconf:223: warning:
ignoring old commands for target `.m.o'
Warning messages:
1: In FUN(X[[i]], ...) : this requires 'nm' to be on the PATH
2: In FUN(X[[i]], ...) : this requires 'nm' to be on the PATH
no DLL was created
ERROR: compilation failed for package 'DataViz'
* removing 'C:/Users/ USER  /Documents/RThrowChart/DataViz.Rcheck/DataViz'
In R CMD INSTALL

__________________
*My path.getenv is : *


 [1] "C:\\Users\\ USER    \\Documents\\R\\R-3.5.2\\bin\\i386"

 [2] "C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine
Components\\iCLS\\"
 [3] "C:\\Program Files\\Intel\\Intel(R) Management Engine
Components\\iCLS\\"
 [4] "C:\\WINDOWS\\system32"

 [5] "C:\\WINDOWS"

 [6] "C:\\WINDOWS\\System32\\Wbem"

 [7] "C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\"

 [8] "C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine
Components\\DAL"
 [9] "C:\\Program Files\\Intel\\Intel(R) Management Engine
Components\\DAL"
[10] "C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine
Components\\IPT"
[11] "C:\\Program Files\\Intel\\Intel(R) Management Engine
Components\\IPT"
[12] "C:\\Program Files\\CMake\\bin"

[13] "C:\\Program Files\\R\\R-3.5.0\\bin"

[14] "C:\\WINDOWS\\System32\\OpenSSH\\"

[15] "C:\\HashiCorp\\Vagrant\\bin"

[16] "C:\\ProgramData\\chocolatey\\bin"

[17] "C:\\Program Files\\Microsoft SQL Server\\130\\Tools\\Binn\\"

[18] "C:\\Program Files\\Java\\jdk1.8.0_181\\bin"

[19] "C:\\Qt\\Tools\\QtCreator\\bin"

[20] "C:\\Qt\\5.11.1\\msvc2017_64\\bin"

[21] "C:\\Windows\\System32"

[22] "C:\\Program Files (x86)\\GnuWin32\\bin"

[23] "C:\\Program Files\\Git\\cmd"

[24] "C:\\Rtools\\bin"

[25] "C:\\Rtools\\MinGW\\bin"

[26] "C:\\Users\\ USER    \\AppData\\Local\\Microsoft\\WindowsApps"

[27] "C:\\Users\\ USER    \\AppData\\Local\\atom\\bin"

[28] "C:\\Users\\ USER    \\AppData\\Local\\Programs\\MiKTeX
2.9\\miktex\\bin\\x64\\"

_________________________

*The error seems to come from "/Rtools/bin/sh: line 8:
c:/Rtools/mingw_32/bin/g++ : No such file or directory" but it clearly
exists and the path has the speicific path to mingw. Does anyone have an
idea or can redirect me to a relevant thread? I might be completely wrong
as to where the error actually is maybe someone recognizes the problem
better?*

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Mon Feb 25 17:01:48 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 25 Feb 2019 10:01:48 -0600
Subject: [R-pkg-devel] Possible Rtools path problem
In-Reply-To: <CANiCS6Vi9SwX7sjME21OdVHvQxoCBJSx011rPU+CKpAqz0HR5w@mail.gmail.com>
References: <CANiCS6Vi9SwX7sjME21OdVHvQxoCBJSx011rPU+CKpAqz0HR5w@mail.gmail.com>
Message-ID: <23668.4460.854424.600573@rob.eddelbuettel.com>


The R-on-Windows FAQ has recommends to NOT install in a path with spaces.

The R Installer on Windows defaults to a path with spaces.

I cannot reconcile it either. Such is life, sometimes.

But when I had to work on that platform in the past I put my open source
stuff into c:/opt/ -- so maybe try reinstalling?

Rtools also had (has ?) a gotcha requiring c:/ placement.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From r@mp@|et|enne @end|ng |rom gm@||@com  Mon Feb 25 17:13:51 2019
From: r@mp@|et|enne @end|ng |rom gm@||@com (Rampal S. Etienne)
Date: Mon, 25 Feb 2019 17:13:51 +0100
Subject: [R-pkg-devel] problems with .mod files
Message-ID: <e959fb29-f71d-d5d3-3800-b2ecaf963758@gmail.com>

Hello,

I have been trying for weeks to get a package on CRAN, but keep
receiving warnings and notes, and errors using R-hub. The problems
started when I used FORTRAN code to speed up some functions. This
FORTRAN code introduces .mod files which are not accepted in the src
folder. I followed suggestions by Avraham Adler to clean the src folder
from this file by introducing a makefile with a clean command in it, but
then I get other errors, and above all, recently this solution did not
seem to remove the .mod file on some systems, as I still got the warning
that this file was found in the src folder (but not on my machine!).

So my question is: how do I prevent the creation of .mod files during
compilation of the FORTRAN code, or how do I tell R that these files are
OK in the src folder?

Regards,

Rampal Etienne


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Feb 25 19:06:45 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 25 Feb 2019 13:06:45 -0500
Subject: [R-pkg-devel] Possible Rtools path problem
In-Reply-To: <23668.4460.854424.600573@rob.eddelbuettel.com>
References: <CANiCS6Vi9SwX7sjME21OdVHvQxoCBJSx011rPU+CKpAqz0HR5w@mail.gmail.com>
 <23668.4460.854424.600573@rob.eddelbuettel.com>
Message-ID: <c2c5bc17-8f23-93fb-eac8-2a46bd24c917@gmail.com>

On 25/02/2019 11:01 a.m., Dirk Eddelbuettel wrote:
> 
> The R-on-Windows FAQ has recommends to NOT install in a path with spaces.
> 
> The R Installer on Windows defaults to a path with spaces.
> 
> I cannot reconcile it either. Such is life, sometimes.
> 
> But when I had to work on that platform in the past I put my open source
> stuff into c:/opt/ -- so maybe try reinstalling?
> 
> Rtools also had (has ?) a gotcha requiring c:/ placement.
> 

Those might be the problem, but to me it looks more like a path order 
problem:

> *My path.getenv is : *
> 
> 
>  [1] "C:\\Users\\ USER    \\Documents\\R\\R-3.5.2\\bin\\i386"
> 
>  [2] "C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine
> Components\\iCLS\\"
>  [3] "C:\\Program Files\\Intel\\Intel(R) Management Engine
> Components\\iCLS\\"
>  [4] "C:\\WINDOWS\\system32"
> 
>  [5] "C:\\WINDOWS"
> 
>  [6] "C:\\WINDOWS\\System32\\Wbem"
> 
>  [7] "C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\"
> 
>  [8] "C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine
> Components\\DAL"
>  [9] "C:\\Program Files\\Intel\\Intel(R) Management Engine
> Components\\DAL"
> [10] "C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine
> Components\\IPT"
> [11] "C:\\Program Files\\Intel\\Intel(R) Management Engine
> Components\\IPT"
> [12] "C:\\Program Files\\CMake\\bin"
> 
> [13] "C:\\Program Files\\R\\R-3.5.0\\bin"
> 
> [14] "C:\\WINDOWS\\System32\\OpenSSH\\"
> 
> [15] "C:\\HashiCorp\\Vagrant\\bin"
> 
> [16] "C:\\ProgramData\\chocolatey\\bin"
> 
> [17] "C:\\Program Files\\Microsoft SQL Server\\130\\Tools\\Binn\\"
> 
> [18] "C:\\Program Files\\Java\\jdk1.8.0_181\\bin"
> 
> [19] "C:\\Qt\\Tools\\QtCreator\\bin"
> 
> [20] "C:\\Qt\\5.11.1\\msvc2017_64\\bin"
> 
> [21] "C:\\Windows\\System32"
> 
> [22] "C:\\Program Files (x86)\\GnuWin32\\bin"
> 
> [23] "C:\\Program Files\\Git\\cmd"
> 
> [24] "C:\\Rtools\\bin"
> 
> [25] "C:\\Rtools\\MinGW\\bin"
> 
> [26] "C:\\Users\\ USER    \\AppData\\Local\\Microsoft\\WindowsApps"
> 
> [27] "C:\\Users\\ USER    \\AppData\\Local\\atom\\bin"
> 
> [28] "C:\\Users\\ USER    \\AppData\\Local\\Programs\\MiKTeX
> 2.9\\miktex\\bin\\x64\\"

The OP has 23 directories in the path ahead of the Rtools directories; 
I'd guess one of them contains a like-named command that is messing 
things up.  From the message

> 1: In FUN(X[[i]], ...) : this requires 'nm' to be on the PATH

my guess would be that there's a bad 'nm.exe' somewhere in there.  The 
real one is likely in directory 25 (I haven't got current Rtools 
installed, so can't tell), but if there's another one earlier, things 
won't work.

I'd recommend putting the Rtools directories first.  That might mess up 
one of the other programs that also wants to be first, so I wouldn't do 
it globally, just set up a batch or cmd file to modify the path when you 
want to use Rtools.

Duncan Murdoch


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Feb 25 19:10:06 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 25 Feb 2019 19:10:06 +0100
Subject: [R-pkg-devel] Possible Rtools path problem
In-Reply-To: <c2c5bc17-8f23-93fb-eac8-2a46bd24c917@gmail.com>
References: <CANiCS6Vi9SwX7sjME21OdVHvQxoCBJSx011rPU+CKpAqz0HR5w@mail.gmail.com>
 <23668.4460.854424.600573@rob.eddelbuettel.com>
 <c2c5bc17-8f23-93fb-eac8-2a46bd24c917@gmail.com>
Message-ID: <47b65160-61a6-5828-f028-968ffe3aa540@statistik.tu-dortmund.de>

One of the programs that don't work is find from R tools if it is behind 
C:\Windows\system32 where the ompletely different windows find is found.

Best,
Uwe Ligges


On 25.02.2019 19:06, Duncan Murdoch wrote:
> On 25/02/2019 11:01 a.m., Dirk Eddelbuettel wrote:
>>
>> The R-on-Windows FAQ has recommends to NOT install in a path with spaces.
>>
>> The R Installer on Windows defaults to a path with spaces.
>>
>> I cannot reconcile it either. Such is life, sometimes.
>>
>> But when I had to work on that platform in the past I put my open source
>> stuff into c:/opt/ -- so maybe try reinstalling?
>>
>> Rtools also had (has ?) a gotcha requiring c:/ placement.
>>
> 
> Those might be the problem, but to me it looks more like a path order 
> problem:
> 
>> *My path.getenv is : *
>>
>>
>> ?[1] "C:\\Users\\ USER??? \\Documents\\R\\R-3.5.2\\bin\\i386"
>>
>> ?[2] "C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine
>> Components\\iCLS\\"
>> ?[3] "C:\\Program Files\\Intel\\Intel(R) Management Engine
>> Components\\iCLS\\"
>> ?[4] "C:\\WINDOWS\\system32"
>>
>> ?[5] "C:\\WINDOWS"
>>
>> ?[6] "C:\\WINDOWS\\System32\\Wbem"
>>
>> ?[7] "C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\"
>>
>> ?[8] "C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine
>> Components\\DAL"
>> ?[9] "C:\\Program Files\\Intel\\Intel(R) Management Engine
>> Components\\DAL"
>> [10] "C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine
>> Components\\IPT"
>> [11] "C:\\Program Files\\Intel\\Intel(R) Management Engine
>> Components\\IPT"
>> [12] "C:\\Program Files\\CMake\\bin"
>>
>> [13] "C:\\Program Files\\R\\R-3.5.0\\bin"
>>
>> [14] "C:\\WINDOWS\\System32\\OpenSSH\\"
>>
>> [15] "C:\\HashiCorp\\Vagrant\\bin"
>>
>> [16] "C:\\ProgramData\\chocolatey\\bin"
>>
>> [17] "C:\\Program Files\\Microsoft SQL Server\\130\\Tools\\Binn\\"
>>
>> [18] "C:\\Program Files\\Java\\jdk1.8.0_181\\bin"
>>
>> [19] "C:\\Qt\\Tools\\QtCreator\\bin"
>>
>> [20] "C:\\Qt\\5.11.1\\msvc2017_64\\bin"
>>
>> [21] "C:\\Windows\\System32"
>>
>> [22] "C:\\Program Files (x86)\\GnuWin32\\bin"
>>
>> [23] "C:\\Program Files\\Git\\cmd"
>>
>> [24] "C:\\Rtools\\bin"
>>
>> [25] "C:\\Rtools\\MinGW\\bin"
>>
>> [26] "C:\\Users\\ USER??? \\AppData\\Local\\Microsoft\\WindowsApps"
>>
>> [27] "C:\\Users\\ USER??? \\AppData\\Local\\atom\\bin"
>>
>> [28] "C:\\Users\\ USER??? \\AppData\\Local\\Programs\\MiKTeX
>> 2.9\\miktex\\bin\\x64\\"
> 
> The OP has 23 directories in the path ahead of the Rtools directories; 
> I'd guess one of them contains a like-named command that is messing 
> things up.? From the message
> 
>> 1: In FUN(X[[i]], ...) : this requires 'nm' to be on the PATH
> 
> my guess would be that there's a bad 'nm.exe' somewhere in there.? The 
> real one is likely in directory 25 (I haven't got current Rtools 
> installed, so can't tell), but if there's another one earlier, things 
> won't work.
> 
> I'd recommend putting the Rtools directories first.? That might mess up 
> one of the other programs that also wants to be first, so I wouldn't do 
> it globally, just set up a batch or cmd file to modify the path when you 
> want to use Rtools.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From peter@c@rbonetto @end|ng |rom gm@||@com  Tue Feb 26 05:28:47 2019
From: peter@c@rbonetto @end|ng |rom gm@||@com (Peter Carbonetto)
Date: Mon, 25 Feb 2019 22:28:47 -0600
Subject: [R-pkg-devel] List of reverse dependencies,
 including archived packages
Message-ID: <CAPvCojJrhNfDJw8F8hx580OuY_T4iNVgcyXFJBsOhh6ztOSyKQ@mail.gmail.com>

I'm wondering if there is a way to get a list of reverse dependencies on
CRAN that includes archived packages.

I am asking because "ashr", an R package I maintain, was recently removed
from CRAN, and now it is back after I fixed the critical problem. However,
some of the downstream packages that were affected by this removal are no
longer listed as a reverse dependency.

For example, the CorShrink package (
https://cran.r-project.org/package=CorShrink) imports ashr, and was
therefore removed when ashr was removed. But as you can see from the ashr
page (https://cran.r-project.org/package=ashr), CorShrink is no longer
listed as a reverse dependency.

I would like to notify all the maintainers of the packages that depend on
ashr---including maintainers of the packages that were removed---so that
they can take appropriate action.

I suspect that I am not the first one to confront this situation, but I
couldn't find anything in the R-pkg-devel archives that was relevant.

Thank you,

Peter Carbonetto
Computational Scientist, Statistics & Genetics,
Research Computing Center & Dept. of Human Genetics
University of Chicago

	[[alternative HTML version deleted]]


From |uc@r @end|ng |rom |edor@project@org  Tue Feb 26 08:44:58 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Tue, 26 Feb 2019 08:44:58 +0100
Subject: [R-pkg-devel] List of reverse dependencies,
 including archived packages
In-Reply-To: <CAPvCojJrhNfDJw8F8hx580OuY_T4iNVgcyXFJBsOhh6ztOSyKQ@mail.gmail.com>
References: <CAPvCojJrhNfDJw8F8hx580OuY_T4iNVgcyXFJBsOhh6ztOSyKQ@mail.gmail.com>
Message-ID: <CALEXWq0yWoYtX+MzNgWrkc2fzgUoB+Vhd6zHks2Um53f4XOURA@mail.gmail.com>

On Tue, 26 Feb 2019 at 05:29, Peter Carbonetto
<peter.carbonetto at gmail.com> wrote:
>
> I'm wondering if there is a way to get a list of reverse dependencies on
> CRAN that includes archived packages.
>
> I am asking because "ashr", an R package I maintain, was recently removed
> from CRAN, and now it is back after I fixed the critical problem. However,
> some of the downstream packages that were affected by this removal are no
> longer listed as a reverse dependency.

I think that the easiest way is to use Microsoft's CRAN time machine
[1]. Simply set the session's repo to the day before the archiving
date, and then you can get the complete list using regular procedures.

[1] https://mran.microsoft.com/timemachine

I?aki


From peter@c@rbonetto @end|ng |rom gm@||@com  Tue Feb 26 14:05:08 2019
From: peter@c@rbonetto @end|ng |rom gm@||@com (Peter Carbonetto)
Date: Tue, 26 Feb 2019 07:05:08 -0600
Subject: [R-pkg-devel] List of reverse dependencies,
 including archived packages
In-Reply-To: <CALEXWq0yWoYtX+MzNgWrkc2fzgUoB+Vhd6zHks2Um53f4XOURA@mail.gmail.com>
References: <CAPvCojJrhNfDJw8F8hx580OuY_T4iNVgcyXFJBsOhh6ztOSyKQ@mail.gmail.com>
 <CALEXWq0yWoYtX+MzNgWrkc2fzgUoB+Vhd6zHks2Um53f4XOURA@mail.gmail.com>
Message-ID: <CAPvCoj+QwYw5YVYDRMvctTnnC+uBfV9wLngFBN8+ARhYBa4RAw@mail.gmail.com>

That works quite well! Thank you for the suggestion.

Peter

On Tue, Feb 26, 2019 at 1:45 AM I?aki Ucar <iucar at fedoraproject.org> wrote:

> On Tue, 26 Feb 2019 at 05:29, Peter Carbonetto
> <peter.carbonetto at gmail.com> wrote:
> >
> > I'm wondering if there is a way to get a list of reverse dependencies on
> > CRAN that includes archived packages.
> >
> > I am asking because "ashr", an R package I maintain, was recently removed
> > from CRAN, and now it is back after I fixed the critical problem.
> However,
> > some of the downstream packages that were affected by this removal are no
> > longer listed as a reverse dependency.
>
> I think that the easiest way is to use Microsoft's CRAN time machine
> [1]. Simply set the session's repo to the day before the archiving
> date, and then you can get the complete list using regular procedures.
>
> [1] https://mran.microsoft.com/timemachine
>
> I?aki
>

	[[alternative HTML version deleted]]


From hor|@@yeb @end|ng |rom gm@||@com  Tue Feb 26 16:48:55 2019
From: hor|@@yeb @end|ng |rom gm@||@com (Horia Yeb)
Date: Tue, 26 Feb 2019 16:48:55 +0100
Subject: [R-pkg-devel] Possible Rtools path problem
In-Reply-To: <47b65160-61a6-5828-f028-968ffe3aa540@statistik.tu-dortmund.de>
References: <CANiCS6Vi9SwX7sjME21OdVHvQxoCBJSx011rPU+CKpAqz0HR5w@mail.gmail.com>
 <23668.4460.854424.600573@rob.eddelbuettel.com>
 <c2c5bc17-8f23-93fb-eac8-2a46bd24c917@gmail.com>
 <47b65160-61a6-5828-f028-968ffe3aa540@statistik.tu-dortmund.de>
Message-ID: <CANiCS6UFKSG-4hHYN2jDNpRjm6MGJD5Cf=7ZcGZiD7RoWqT0MQ@mail.gmail.com>

Hey all and thank you for helping me,
In the end, I re-installed R, and R tools and the check gives me no error
?on this computer. I tried all of the above, didn't solve the problem.

Thanks again anyway!
Horia.

On Mon, 25 Feb 2019 at 19:09, Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

> One of the programs that don't work is find from R tools if it is behind
> C:\Windows\system32 where the ompletely different windows find is found.
>
> Best,
> Uwe Ligges
>
>
> On 25.02.2019 19:06, Duncan Murdoch wrote:
> > On 25/02/2019 11:01 a.m., Dirk Eddelbuettel wrote:
> >>
> >> The R-on-Windows FAQ has recommends to NOT install in a path with
> spaces.
> >>
> >> The R Installer on Windows defaults to a path with spaces.
> >>
> >> I cannot reconcile it either. Such is life, sometimes.
> >>
> >> But when I had to work on that platform in the past I put my open source
> >> stuff into c:/opt/ -- so maybe try reinstalling?
> >>
> >> Rtools also had (has ?) a gotcha requiring c:/ placement.
> >>
> >
> > Those might be the problem, but to me it looks more like a path order
> > problem:
> >
> >> *My path.getenv is : *
> >>
> >>
> >>  [1] "C:\\Users\\ USER    \\Documents\\R\\R-3.5.2\\bin\\i386"
> >>
> >>  [2] "C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine
> >> Components\\iCLS\\"
> >>  [3] "C:\\Program Files\\Intel\\Intel(R) Management Engine
> >> Components\\iCLS\\"
> >>  [4] "C:\\WINDOWS\\system32"
> >>
> >>  [5] "C:\\WINDOWS"
> >>
> >>  [6] "C:\\WINDOWS\\System32\\Wbem"
> >>
> >>  [7] "C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\"
> >>
> >>  [8] "C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine
> >> Components\\DAL"
> >>  [9] "C:\\Program Files\\Intel\\Intel(R) Management Engine
> >> Components\\DAL"
> >> [10] "C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine
> >> Components\\IPT"
> >> [11] "C:\\Program Files\\Intel\\Intel(R) Management Engine
> >> Components\\IPT"
> >> [12] "C:\\Program Files\\CMake\\bin"
> >>
> >> [13] "C:\\Program Files\\R\\R-3.5.0\\bin"
> >>
> >> [14] "C:\\WINDOWS\\System32\\OpenSSH\\"
> >>
> >> [15] "C:\\HashiCorp\\Vagrant\\bin"
> >>
> >> [16] "C:\\ProgramData\\chocolatey\\bin"
> >>
> >> [17] "C:\\Program Files\\Microsoft SQL Server\\130\\Tools\\Binn\\"
> >>
> >> [18] "C:\\Program Files\\Java\\jdk1.8.0_181\\bin"
> >>
> >> [19] "C:\\Qt\\Tools\\QtCreator\\bin"
> >>
> >> [20] "C:\\Qt\\5.11.1\\msvc2017_64\\bin"
> >>
> >> [21] "C:\\Windows\\System32"
> >>
> >> [22] "C:\\Program Files (x86)\\GnuWin32\\bin"
> >>
> >> [23] "C:\\Program Files\\Git\\cmd"
> >>
> >> [24] "C:\\Rtools\\bin"
> >>
> >> [25] "C:\\Rtools\\MinGW\\bin"
> >>
> >> [26] "C:\\Users\\ USER    \\AppData\\Local\\Microsoft\\WindowsApps"
> >>
> >> [27] "C:\\Users\\ USER    \\AppData\\Local\\atom\\bin"
> >>
> >> [28] "C:\\Users\\ USER    \\AppData\\Local\\Programs\\MiKTeX
> >> 2.9\\miktex\\bin\\x64\\"
> >
> > The OP has 23 directories in the path ahead of the Rtools directories;
> > I'd guess one of them contains a like-named command that is messing
> > things up.  From the message
> >
> >> 1: In FUN(X[[i]], ...) : this requires 'nm' to be on the PATH
> >
> > my guess would be that there's a bad 'nm.exe' somewhere in there.  The
> > real one is likely in directory 25 (I haven't got current Rtools
> > installed, so can't tell), but if there's another one earlier, things
> > won't work.
> >
> > I'd recommend putting the Rtools directories first.  That might mess up
> > one of the other programs that also wants to be first, so I wouldn't do
> > it globally, just set up a batch or cmd file to modify the path when you
> > want to use Rtools.
> >
> > Duncan Murdoch
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From dech@nt @end|ng |rom d@|@c@  Tue Feb 26 18:24:44 2019
From: dech@nt @end|ng |rom d@|@c@ (Oliver Dechant)
Date: Tue, 26 Feb 2019 17:24:44 +0000
Subject: [R-pkg-devel] List of reverse dependencies,
 including archived packages
In-Reply-To: <CAPvCoj+QwYw5YVYDRMvctTnnC+uBfV9wLngFBN8+ARhYBa4RAw@mail.gmail.com>
References: <CAPvCoj+QwYw5YVYDRMvctTnnC+uBfV9wLngFBN8+ARhYBa4RAw@mail.gmail.com>
Message-ID: <ecab5c63-2d3b-27fe-a493-ff264b1aee8c@dal.ca>

Somewhat relatedly is there a way to monitor when a package has new
reverse depends or imports added?

-- 
Oliver Dechant

From |uc@r @end|ng |rom |edor@project@org  Tue Feb 26 18:59:19 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Tue, 26 Feb 2019 18:59:19 +0100
Subject: [R-pkg-devel] List of reverse dependencies,
 including archived packages
In-Reply-To: <ecab5c63-2d3b-27fe-a493-ff264b1aee8c@dal.ca>
References: <CAPvCoj+QwYw5YVYDRMvctTnnC+uBfV9wLngFBN8+ARhYBa4RAw@mail.gmail.com>
 <ecab5c63-2d3b-27fe-a493-ff264b1aee8c@dal.ca>
Message-ID: <CALEXWq2omrSq959bBAg6qcHSi4Vt0a9xAn1-0x5Mfgoacd5stg@mail.gmail.com>

On Tue, 26 Feb 2019 at 18:38, Oliver Dechant <dechant at dal.ca> wrote:
>
> Somewhat relatedly is there a way to monitor when a package has new
> reverse depends or imports added?

I don't know of any service currently providing this, if that's what
you're asking. But it's pretty straightforward to set up a cron job to
monitor the DESCRIPTION file of interest.

I?aki


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Feb 26 20:38:55 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 26 Feb 2019 20:38:55 +0100
Subject: [R-pkg-devel] List of reverse dependencies,
 including archived packages
In-Reply-To: <CALEXWq2omrSq959bBAg6qcHSi4Vt0a9xAn1-0x5Mfgoacd5stg@mail.gmail.com>
References: <CAPvCoj+QwYw5YVYDRMvctTnnC+uBfV9wLngFBN8+ARhYBa4RAw@mail.gmail.com>
 <ecab5c63-2d3b-27fe-a493-ff264b1aee8c@dal.ca>
 <CALEXWq2omrSq959bBAg6qcHSi4Vt0a9xAn1-0x5Mfgoacd5stg@mail.gmail.com>
Message-ID: <ef017b66-da1d-afd9-580c-903cf8e01a2d@statistik.tu-dortmund.de>



On 26.02.2019 18:59, I?aki Ucar wrote:
> On Tue, 26 Feb 2019 at 18:38, Oliver Dechant <dechant at dal.ca> wrote:
>>
>> Somewhat relatedly is there a way to monitor when a package has new
>> reverse depends or imports added?
> 
> I don't know of any service currently providing this, if that's what
> you're asking. But it's pretty straightforward to set up a cron job to
> monitor the DESCRIPTION file of interest.

Well, if *reverse* dependencies are of interest, rather monitor he 
package's CRAN webpage which lists reverse dependencis.

Best,
Uwe Ligges


> 
> I?aki
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From edd @end|ng |rom deb|@n@org  Tue Feb 26 21:21:55 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 26 Feb 2019 14:21:55 -0600
Subject: [R-pkg-devel] List of reverse dependencies,
 including archived packages
In-Reply-To: <ef017b66-da1d-afd9-580c-903cf8e01a2d@statistik.tu-dortmund.de>
References: <CAPvCoj+QwYw5YVYDRMvctTnnC+uBfV9wLngFBN8+ARhYBa4RAw@mail.gmail.com>
 <ecab5c63-2d3b-27fe-a493-ff264b1aee8c@dal.ca>
 <CALEXWq2omrSq959bBAg6qcHSi4Vt0a9xAn1-0x5Mfgoacd5stg@mail.gmail.com>
 <ef017b66-da1d-afd9-580c-903cf8e01a2d@statistik.tu-dortmund.de>
Message-ID: <23669.40931.884197.517590@rob.eddelbuettel.com>


On 26 February 2019 at 20:38, Uwe Ligges wrote:
| 
| 
| On 26.02.2019 18:59, I?aki Ucar wrote:
| > On Tue, 26 Feb 2019 at 18:38, Oliver Dechant <dechant at dal.ca> wrote:
| >>
| >> Somewhat relatedly is there a way to monitor when a package has new
| >> reverse depends or imports added?
| > 
| > I don't know of any service currently providing this, if that's what
| > you're asking. But it's pretty straightforward to set up a cron job to
| > monitor the DESCRIPTION file of interest.
| 
| Well, if *reverse* dependencies are of interest, rather monitor he 
| package's CRAN webpage which lists reverse dependencis.

Or access the already-parsed-and-ready-to-use info:

R> crandb <- tools::CRAN_package_db()
R> colnames(crandb)
 [1] "Package"                 "Version"                 "Priority"               
 [4] "Depends"                 "Imports"                 "LinkingTo"              
 [7] "Suggests"                "Enhances"                "License"                
[10] "License_is_FOSS"         "License_restricts_use"   "OS_type"                
[13] "Archs"                   "MD5sum"                  "NeedsCompilation"       
[16] "Additional_repositories" "Author"                  "Authors at R"              
[19] "Biarch"                  "BugReports"              "BuildKeepEmpty"         
[22] "BuildManual"             "BuildResaveData"         "BuildVignettes"         
[25] "Built"                   "ByteCompile"             "Classification/ACM"     
[28] "Classification/ACM-2012" "Classification/JEL"      "Classification/MSC"     
[31] "Classification/MSC-2010" "Collate"                 "Collate.unix"           
[34] "Collate.windows"         "Contact"                 "Copyright"              
[37] "Date"                    "Description"             "Encoding"               
[40] "KeepSource"              "Language"                "LazyData"               
[43] "LazyDataCompression"     "LazyLoad"                "MailingList"            
[46] "Maintainer"              "Note"                    "Packaged"               
[49] "RdMacros"                "SysDataCompression"      "SystemRequirements"     
[52] "Title"                   "Type"                    "URL"                    
[55] "VignetteBuilder"         "ZipData"                 "Published"              
[58] "Path"                    "X-CRAN-Comment"          "Reverse depends"        
[61] "Reverse imports"         "Reverse linking to"      "Reverse suggests"       
[64] "Reverse enhances"        "MD5sum"                 
R> 
R> dim(crandb)
[1] 13776    65
R>

Now, if Oliver wants this _through time_ he will have snapshot it. The
information provided is always 'as is' for 'right now'.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From hor|@@yeb @end|ng |rom gm@||@com  Wed Feb 27 14:17:59 2019
From: hor|@@yeb @end|ng |rom gm@||@com (Horia Yeb)
Date: Wed, 27 Feb 2019 14:17:59 +0100
Subject: [R-pkg-devel] Debian check string include
Message-ID: <CANiCS6WeFVLJT7oqOQnSdT_r_Nc4ZExRzp6MJkUnPeXNrA0AWg@mail.gmail.com>

Hi all,

I submitted my package today on CRAN and from the automatic check I get a
note in both Windows and Debian, but from what I heard it is perfectly ok
and to be ignored.

"Check: CRAN incoming feasibility, Result: NOTE
  Maintainer: 'John Doe<johnDoe at fake-email.com <horia.yeb at gmail.com>>'  "

But I also get an ERROR in the Debian check :

* installing *source* package ?DataViz? ...
** libs
g++-8  -std=gnu++11 -I"/home/hornik/tmp/R/include" -DNDEBUG
-I"/home/hornik/lib/R/Library/3.6/x86_64-linux-gnu/Rcpp/include"
-I/usr/local/include  -fpic  -g -O2 -Wall -pedantic -mtune=native -c
RcppExports.cpp -o RcppExports.o
g++-8  -std=gnu++11 -I"/home/hornik/tmp/R/include" -DNDEBUG
-I"/home/hornik/lib/R/Library/3.6/x86_64-linux-gnu/Rcpp/include"
-I/usr/local/include  -fpic  -g -O2 -Wall -pedantic -mtune=native -c
rcpp_throwchart.cpp -o rcpp_throwchart.o
rcpp_throwchart.cpp:6:10: fatal error: String.h: No such file or directory
 #include <String.h>
          ^~~~~~~~~~
compilation terminated.
make: *** [/home/hornik/tmp/R/etc/Makeconf:173: rcpp_throwchart.o] Error 1
ERROR: compilation failed for package ?DataViz?
* removing ?/srv/hornik/tmp/CRAN/DataViz.Rcheck/DataViz?



This is my first package submission and I am pretty new to R, my guess
is the rcpp compiler doesn't link the libraries properly but I'm not
sure.

Also would it be possible to submit a Windows only package or is that
not OK for CRAN?


Thank you,

Timothy

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Feb 27 14:35:31 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 27 Feb 2019 08:35:31 -0500
Subject: [R-pkg-devel] Debian check string include
In-Reply-To: <CANiCS6WeFVLJT7oqOQnSdT_r_Nc4ZExRzp6MJkUnPeXNrA0AWg@mail.gmail.com>
References: <CANiCS6WeFVLJT7oqOQnSdT_r_Nc4ZExRzp6MJkUnPeXNrA0AWg@mail.gmail.com>
Message-ID: <87904245-41bb-5760-f7ab-1f43034060f7@gmail.com>

On 27/02/2019 8:17 a.m., Horia Yeb wrote:
> Hi all,
> 
> I submitted my package today on CRAN and from the automatic check I get a
> note in both Windows and Debian, but from what I heard it is perfectly ok
> and to be ignored.
> 
> "Check: CRAN incoming feasibility, Result: NOTE
>    Maintainer: 'John Doe<johnDoe at fake-email.com <horia.yeb at gmail.com>>'  "
> 
> But I also get an ERROR in the Debian check :
> 
> * installing *source* package ?DataViz? ...
> ** libs
> g++-8  -std=gnu++11 -I"/home/hornik/tmp/R/include" -DNDEBUG
> -I"/home/hornik/lib/R/Library/3.6/x86_64-linux-gnu/Rcpp/include"
> -I/usr/local/include  -fpic  -g -O2 -Wall -pedantic -mtune=native -c
> RcppExports.cpp -o RcppExports.o
> g++-8  -std=gnu++11 -I"/home/hornik/tmp/R/include" -DNDEBUG
> -I"/home/hornik/lib/R/Library/3.6/x86_64-linux-gnu/Rcpp/include"
> -I/usr/local/include  -fpic  -g -O2 -Wall -pedantic -mtune=native -c
> rcpp_throwchart.cpp -o rcpp_throwchart.o
> rcpp_throwchart.cpp:6:10: fatal error: String.h: No such file or directory
>   #include <String.h>
>            ^~~~~~~~~~
> compilation terminated.
> make: *** [/home/hornik/tmp/R/etc/Makeconf:173: rcpp_throwchart.o] Error 1
> ERROR: compilation failed for package ?DataViz?
> * removing ?/srv/hornik/tmp/CRAN/DataViz.Rcheck/DataViz?

I think the proper name is "string.h".
> 
> 
> 
> This is my first package submission and I am pretty new to R, my guess
> is the rcpp compiler doesn't link the libraries properly but I'm not
> sure.
> 
> Also would it be possible to submit a Windows only package or is that
> not OK for CRAN?

This is covered in the CRAN policy document 
https://cran.r-project.org/web/packages/policies.html, which you should 
read before submitting a package.

Duncan Murdoch


> 
> 
> Thank you,
> 
> Timothy
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From edd @end|ng |rom deb|@n@org  Wed Feb 27 14:44:30 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 27 Feb 2019 07:44:30 -0600
Subject: [R-pkg-devel] Debian check string include
In-Reply-To: <CANiCS6WeFVLJT7oqOQnSdT_r_Nc4ZExRzp6MJkUnPeXNrA0AWg@mail.gmail.com>
References: <CANiCS6WeFVLJT7oqOQnSdT_r_Nc4ZExRzp6MJkUnPeXNrA0AWg@mail.gmail.com>
Message-ID: <23670.37950.207127.654129@rob.eddelbuettel.com>


On 27 February 2019 at 14:17, Horia Yeb wrote:
| rcpp_throwchart.cpp:6:10: fatal error: String.h: No such file or directory

Did you mean the standard C header string.h?

Or did you mean Rcpp's own Rcpp/String.h ?  It is included for you by Rcpp.h.

| Also would it be possible to submit a Windows only package or is that
| not OK for CRAN?

The CRAN Repository Policy you are supposed to read says it is *not* ok.

It is perfectly fine to have packages only on GitHub, or in non-CRAN
repositories.  My drat packages makes it easy to host one -- on GitHub.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From m@tthew@h@|| @end|ng |rom bd|@ox@@c@uk  Wed Feb 27 15:13:47 2019
From: m@tthew@h@|| @end|ng |rom bd|@ox@@c@uk (Matthew Hall)
Date: Wed, 27 Feb 2019 14:13:47 +0000
Subject: [R-pkg-devel] Bioconductor dependencies => Windows checks failed
Message-ID: <etPan.5c769b1c.3cd1058e.1295e@bdi.ox.ac.uk>

Hello,

I?ve just tried to submit a package to CRAN which has a Bioconductor dependency (ggtree, specifically). It passes checks on MacOS and Debian, but fails on Windows with the error:

Error: object 'as_data_frame' is not exported by 'namespace:tidytree'

The official ggtree developer solution to this known issue is to upgrade to Bioconductor 3.8, so I?m guessing the version used in the check is earlier? Is there anything I can do?

Thanks, Matthew

	[[alternative HTML version deleted]]


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Wed Feb 27 15:42:16 2019
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Wed, 27 Feb 2019 14:42:16 +0000
Subject: [R-pkg-devel] 
 Bioconductor dependencies => Windows checks failed
In-Reply-To: <etPan.5c769b1c.3cd1058e.1295e@bdi.ox.ac.uk>
References: <etPan.5c769b1c.3cd1058e.1295e@bdi.ox.ac.uk>
Message-ID: <MN2PR05MB6496AA5234A4A401AC6F48E3F9740@MN2PR05MB6496.namprd05.prod.outlook.com>

Bioconductor 3.8 is the current release version of Bioconductor, and should be used by CRAN for current release versions of R. This seems perhaps like a stale installation on the Windows machine.

A link to the actual check report would be helpful.

Martin

?On 2/27/19, 9:25 AM, "R-package-devel on behalf of Matthew Hall" <r-package-devel-bounces at r-project.org on behalf of matthew.hall at bdi.ox.ac.uk> wrote:

    Hello,
    
    I?ve just tried to submit a package to CRAN which has a Bioconductor dependency (ggtree, specifically). It passes checks on MacOS and Debian, but fails on Windows with the error:
    
    Error: object 'as_data_frame' is not exported by 'namespace:tidytree'
    
    The official ggtree developer solution to this known issue is to upgrade to Bioconductor 3.8, so I?m guessing the version used in the check is earlier? Is there anything I can do?
    
    Thanks, Matthew
    
    	[[alternative HTML version deleted]]
    
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel
    

From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Feb 27 16:09:21 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 27 Feb 2019 10:09:21 -0500
Subject: [R-pkg-devel] 
 Bioconductor dependencies => Windows checks failed
In-Reply-To: <etPan.5c769b1c.3cd1058e.1295e@bdi.ox.ac.uk>
References: <etPan.5c769b1c.3cd1058e.1295e@bdi.ox.ac.uk>
Message-ID: <70786001-7030-b08e-4a8f-be581c74f44d@gmail.com>

On 27/02/2019 9:13 a.m., Matthew Hall wrote:
> Hello,
> 
> I?ve just tried to submit a package to CRAN which has a Bioconductor dependency (ggtree, specifically). It passes checks on MacOS and Debian, but fails on Windows with the error:
> 
> Error: object 'as_data_frame' is not exported by 'namespace:tidytree'
> 
> The official ggtree developer solution to this known issue is to upgrade to Bioconductor 3.8, so I?m guessing the version used in the check is earlier? Is there anything I can do?

You can specify package versions in your DESCRIPTION file.  If the 
ggtree version that requires tidytree::as_data_frame is numbered higher 
than one that doesn't, you should specify that, e.g.

Imports:  ggtree (>= 1.14.6), ...

Duncan Murdoch


From m@tthew@h@|| @end|ng |rom bd|@ox@@c@uk  Wed Feb 27 17:00:26 2019
From: m@tthew@h@|| @end|ng |rom bd|@ox@@c@uk (Matthew Hall)
Date: Wed, 27 Feb 2019 16:00:26 +0000
Subject: [R-pkg-devel] 
 Bioconductor dependencies => Windows checks failed
In-Reply-To: <MN2PR05MB6496AA5234A4A401AC6F48E3F9740@MN2PR05MB6496.namprd05.prod.outlook.com>
References: <etPan.5c769b1c.3cd1058e.1295e@bdi.ox.ac.uk>
 <MN2PR05MB6496AA5234A4A401AC6F48E3F9740@MN2PR05MB6496.namprd05.prod.outlook.com>
Message-ID: <etPan.5c76b41a.5bcf8b48.1295e@bdi.ox.ac.uk>

Sure, sorry.

http://win-builder.r-project.org/incoming_pretest/STraTUS_1.1_20190227_144139/Windows/00check.log
http://win-builder.r-project.org/incoming_pretest/STraTUS_1.1_20190227_144139/Windows/00install.out

(the typo in the title is obviously gone)



On 27 February 2019 at 14:42:23, Martin Morgan (mtmorgan.bioc at gmail.com<mailto:mtmorgan.bioc at gmail.com>) wrote:

Bioconductor 3.8 is the current release version of Bioconductor, and should be used by CRAN for current release versions of R. This seems perhaps like a stale installation on the Windows machine.

A link to the actual check report would be helpful.

Martin

?On 2/27/19, 9:25 AM, "R-package-devel on behalf of Matthew Hall" <r-package-devel-bounces at r-project.org on behalf of matthew.hall at bdi.ox.ac.uk> wrote:

Hello,

I?ve just tried to submit a package to CRAN which has a Bioconductor dependency (ggtree, specifically). It passes checks on MacOS and Debian, but fails on Windows with the error:

Error: object 'as_data_frame' is not exported by 'namespace:tidytree'

The official ggtree developer solution to this known issue is to upgrade to Bioconductor 3.8, so I?m guessing the version used in the check is earlier? Is there anything I can do?

Thanks, Matthew

[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From rem|@p|@tek @end|ng |rom econ@ku@dk  Thu Feb 28 00:02:08 2019
From: rem|@p|@tek @end|ng |rom econ@ku@dk (=?UTF-8?Q?R=c3=a9mi_Piatek?=)
Date: Thu, 28 Feb 2019 10:02:08 +1100
Subject: [R-pkg-devel] problems with .mod files
In-Reply-To: <mailman.3539.7.1551178802.22102.r-package-devel@r-project.org>
References: <mailman.3539.7.1551178802.22102.r-package-devel@r-project.org>
Message-ID: <a3dbf88e-66b9-f18f-5fac-441f626e5fd0@econ.ku.dk>

These *.mod files are automatically created during compilation whenever 
there is a module in the corresponding source file. They should not be 
in the src folder of your package when you submit it to CRAN, but they 
should not be a problem when they get created in this folder during 
compilation.

Try to add the following line in .Rbuildignore (if this file does not 
exist, create it in the main directory of your package):

^.*\.mod

This will prevent R from including any *.mod files when building your 
package.

I hope this is helpful.

Best,

Remi


On 2/26/19 10:00 PM, r-package-devel-request at r-project.org wrote:
> Date: Mon, 25 Feb 2019 17:13:51 +0100
> From: "Rampal S. Etienne"<rampaletienne at gmail.com>
> To:R-package-devel at r-project.org
> Subject: [R-pkg-devel] problems with .mod files
> Message-ID:<e959fb29-f71d-d5d3-3800-b2ecaf963758 at gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Hello,
>
> I have been trying for weeks to get a package on CRAN, but keep
> receiving warnings and notes, and errors using R-hub. The problems
> started when I used FORTRAN code to speed up some functions. This
> FORTRAN code introduces .mod files which are not accepted in the src
> folder. I followed suggestions by Avraham Adler to clean the src folder
> from this file by introducing a makefile with a clean command in it, but
> then I get other errors, and above all, recently this solution did not
> seem to remove the .mod file on some systems, as I still got the warning
> that this file was found in the src folder (but not on my machine!).
>
> So my question is: how do I prevent the creation of .mod files during
> compilation of the FORTRAN code, or how do I tell R that these files are
> OK in the src folder?
>
> Regards,
>
> Rampal Etienne
>
>


	[[alternative HTML version deleted]]


From r@mp@|et|enne @end|ng |rom gm@||@com  Thu Feb 28 13:50:18 2019
From: r@mp@|et|enne @end|ng |rom gm@||@com (Rampal S. Etienne)
Date: Thu, 28 Feb 2019 13:50:18 +0100
Subject: [R-pkg-devel] problems with .mod files
In-Reply-To: <a3dbf88e-66b9-f18f-5fac-441f626e5fd0@econ.ku.dk>
References: <mailman.3539.7.1551178802.22102.r-package-devel@r-project.org>
 <a3dbf88e-66b9-f18f-5fac-441f626e5fd0@econ.ku.dk>
Message-ID: <6066bd50-b492-5402-d7f7-5f39873e7d41@gmail.com>

Dear Remi,

The mod files are not in the src folder or in the tarball I submit to
CRAN, but I still get warnings that there are created. I have tried to
clean them by specifying this in the makefile, but then I get other issues.

Rampal


On 28-2-2019 0:02, R?mi Piatek wrote:
> These *.mod files are automatically created during compilation whenever 
> there is a module in the corresponding source file. They should not be 
> in the src folder of your package when you submit it to CRAN, but they 
> should not be a problem when they get created in this folder during 
> compilation.
>
> Try to add the following line in .Rbuildignore (if this file does not 
> exist, create it in the main directory of your package):
>
> ^.*\.mod
>
> This will prevent R from including any *.mod files when building your 
> package.
>
> I hope this is helpful.
>
> Best,
>
> Remi
>
>
> On 2/26/19 10:00 PM, r-package-devel-request at r-project.org wrote:
>> Date: Mon, 25 Feb 2019 17:13:51 +0100
>> From: "Rampal S. Etienne"<rampaletienne at gmail.com>
>> To:R-package-devel at r-project.org
>> Subject: [R-pkg-devel] problems with .mod files
>> Message-ID:<e959fb29-f71d-d5d3-3800-b2ecaf963758 at gmail.com>
>> Content-Type: text/plain; charset="utf-8"
>>
>> Hello,
>>
>> I have been trying for weeks to get a package on CRAN, but keep
>> receiving warnings and notes, and errors using R-hub. The problems
>> started when I used FORTRAN code to speed up some functions. This
>> FORTRAN code introduces .mod files which are not accepted in the src
>> folder. I followed suggestions by Avraham Adler to clean the src folder
>> from this file by introducing a makefile with a clean command in it, but
>> then I get other errors, and above all, recently this solution did not
>> seem to remove the .mod file on some systems, as I still got the warning
>> that this file was found in the src folder (but not on my machine!).
>>
>> So my question is: how do I prevent the creation of .mod files during
>> compilation of the FORTRAN code, or how do I tell R that these files are
>> OK in the src folder?
>>
>> Regards,
>>
>> Rampal Etienne
>>
>>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Feb 28 15:36:13 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 28 Feb 2019 06:36:13 -0800
Subject: [R-pkg-devel] problems with .mod files
In-Reply-To: <6066bd50-b492-5402-d7f7-5f39873e7d41@gmail.com>
References: <mailman.3539.7.1551178802.22102.r-package-devel@r-project.org>
 <a3dbf88e-66b9-f18f-5fac-441f626e5fd0@econ.ku.dk>
 <6066bd50-b492-5402-d7f7-5f39873e7d41@gmail.com>
Message-ID: <357BF3C8-157B-449B-8648-E09EB359CE8D@dcn.davis.ca.us>

Don't run R CMD check against your working directory... only run it against your tar.gz source file. The devtools package will do this for you automatically from within R for convenience.

On February 28, 2019 4:50:18 AM PST, "Rampal S. Etienne" <rampaletienne at gmail.com> wrote:
>Dear Remi,
>
>The mod files are not in the src folder or in the tarball I submit to
>CRAN, but I still get warnings that there are created. I have tried to
>clean them by specifying this in the makefile, but then I get other
>issues.
>
>Rampal
>
>
>On 28-2-2019 0:02, R?mi Piatek wrote:
>> These *.mod files are automatically created during compilation
>whenever 
>> there is a module in the corresponding source file. They should not
>be 
>> in the src folder of your package when you submit it to CRAN, but
>they 
>> should not be a problem when they get created in this folder during 
>> compilation.
>>
>> Try to add the following line in .Rbuildignore (if this file does not
>
>> exist, create it in the main directory of your package):
>>
>> ^.*\.mod
>>
>> This will prevent R from including any *.mod files when building your
>
>> package.
>>
>> I hope this is helpful.
>>
>> Best,
>>
>> Remi
>>
>>
>> On 2/26/19 10:00 PM, r-package-devel-request at r-project.org wrote:
>>> Date: Mon, 25 Feb 2019 17:13:51 +0100
>>> From: "Rampal S. Etienne"<rampaletienne at gmail.com>
>>> To:R-package-devel at r-project.org
>>> Subject: [R-pkg-devel] problems with .mod files
>>> Message-ID:<e959fb29-f71d-d5d3-3800-b2ecaf963758 at gmail.com>
>>> Content-Type: text/plain; charset="utf-8"
>>>
>>> Hello,
>>>
>>> I have been trying for weeks to get a package on CRAN, but keep
>>> receiving warnings and notes, and errors using R-hub. The problems
>>> started when I used FORTRAN code to speed up some functions. This
>>> FORTRAN code introduces .mod files which are not accepted in the src
>>> folder. I followed suggestions by Avraham Adler to clean the src
>folder
>>> from this file by introducing a makefile with a clean command in it,
>but
>>> then I get other errors, and above all, recently this solution did
>not
>>> seem to remove the .mod file on some systems, as I still got the
>warning
>>> that this file was found in the src folder (but not on my machine!).
>>>
>>> So my question is: how do I prevent the creation of .mod files
>during
>>> compilation of the FORTRAN code, or how do I tell R that these files
>are
>>> OK in the src folder?
>>>
>>> Regards,
>>>
>>> Rampal Etienne
>>>
>>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From Chr|@@Br|en @end|ng |rom un|@@@edu@@u  Fri Mar  1 11:54:46 2019
From: Chr|@@Br|en @end|ng |rom un|@@@edu@@u (Chris Brien)
Date: Fri, 1 Mar 2019 10:54:46 +0000
Subject: [R-pkg-devel] Specifying YEAR in a MIT license
Message-ID: <cf30b78c317247f7a7c74af00753c5cd@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>

Dear list member,

I have become confused about the YEAR that should be specified for a MIT license. In the current version on CRAN (4.1-10) the YEAR is specified as 2018, this being the year that I applied a MIT license to the package.

I changed the YEAR to 2018-2019 before submitting version 4.1-21 of the package to CRAN and this generated the following NOTE:

* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Chris Brien <Chris.Brien at unisa.edu.au>'

License components with restrictions and base license permitting such:
  MIT + file LICENSE
File 'LICENSE':
  YEAR: 2018-2019
  
  COPYRIGHT HOLDER: CHRIS BRIEN

I had submitted this version of the package with the YEAR as 2018 to rhub and received a similar message. So it seemed that I needed to revise the YEAR.

I had read on the web that the YEAR should cover those years in which a version had been released and that a range of years is fine, hence the change to 2018-2019.

Can anyone tell me what I need to do to have a valid YEAR specification that also fits with what CRAN requires?

My best guess is that CRAN cannot deal with a range of values for YEARS and that I should specify 2019, because the version that I am submitting was generated in 2019. However, I want to be sure before resubmitting.

Thanks in advance for any help,

Cheers, 

  Chris 


From r@||@@tubner @end|ng |rom d@q@n@@com  Fri Mar  1 16:59:22 2019
From: r@||@@tubner @end|ng |rom d@q@n@@com (Ralf Stubner)
Date: Fri, 1 Mar 2019 16:59:22 +0100
Subject: [R-pkg-devel] How to handle UBSAN false positives
Message-ID: <b5054b89-449a-4710-0b1a-27ae499c26bc@daqana.com>

Dear List,

in the last CRAN upload of my dqrng package I have enabled unit tests
for the C++ interface. Since then clang-UBSAN is listed under
"additional issues" on the CRAN check page [1]. I am fairly certain this
is a false positive, c.f. https://github.com/RcppCore/Rcpp/issues/832.

What would be best practice for handling this in the next upload?

1. Mention it in the upload comments as a false positive?
2. Disable the tests on CRAN?
3. Something else?

Thanks
Ralf

[1] https://cran.r-project.org/web/checks/check_results_dqrng.html
-- 
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190301/d6e4cd4f/attachment.sig>

From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Mar  1 22:58:37 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 1 Mar 2019 22:58:37 +0100
Subject: [R-pkg-devel] How to handle UBSAN false positives
In-Reply-To: <b5054b89-449a-4710-0b1a-27ae499c26bc@daqana.com>
References: <b5054b89-449a-4710-0b1a-27ae499c26bc@daqana.com>
Message-ID: <b73f4d7e-4ada-03fe-c679-65879f0945c9@statistik.tu-dortmund.de>



On 01.03.2019 16:59, Ralf Stubner wrote:
> Dear List,
> 
> in the last CRAN upload of my dqrng package I have enabled unit tests
> for the C++ interface. Since then clang-UBSAN is listed under
> "additional issues" on the CRAN check page [1]. I am fairly certain this
> is a false positive, c.f. https://github.com/RcppCore/Rcpp/issues/832.
> 
> What would be best practice for handling this in the next upload?
> 
> 1. Mention it in the upload comments as a false positive?

Yes, 1.

Best,
Uwe Ligges
> 2. Disable the tests on CRAN?
> 3. Something else?
> 
> Thanks
> Ralf
> 
> [1] https://cran.r-project.org/web/checks/check_results_dqrng.html
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From kr|@h@ng @end|ng |rom |||td@@c@|n  Sun Mar  3 22:11:45 2019
From: kr|@h@ng @end|ng |rom |||td@@c@|n (Krishan Gupta)
Date: Mon, 4 Mar 2019 02:41:45 +0530
Subject: [R-pkg-devel] regarding solution of these warning and note
Message-ID: <CAEW5xfTTTXZBWTvwahhQjnSVCP7dnXCnCxKO_Sze6SeOKRikAA@mail.gmail.com>

Original: no visible binding for global variable
  ?filter_normalized_data?
Seurat: no visible binding for global variable ?filter_normalized_data?
genes_filter: no visible binding for global variable
  ?filter_normalized_data?
Undefined global functions or variables:
  filter_normalized_data


checking installed package size ... NOTE
  installed size is  6.4Mb
  sub-directories of 1Mb or more:
    data   5.5Mb

*Thanks and Regards*


*Krishan GuptaPhD Scholar*

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Mar  3 22:39:55 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 3 Mar 2019 16:39:55 -0500
Subject: [R-pkg-devel] regarding solution of these warning and note
In-Reply-To: <CAEW5xfTTTXZBWTvwahhQjnSVCP7dnXCnCxKO_Sze6SeOKRikAA@mail.gmail.com>
References: <CAEW5xfTTTXZBWTvwahhQjnSVCP7dnXCnCxKO_Sze6SeOKRikAA@mail.gmail.com>
Message-ID: <65bbea28-7aa8-ffc4-6cd9-947b8824e058@gmail.com>

On 03/03/2019 4:11 p.m., Krishan Gupta wrote:
> Original: no visible binding for global variable
>    ?filter_normalized_data?
> Seurat: no visible binding for global variable ?filter_normalized_data?
> genes_filter: no visible binding for global variable
>    ?filter_normalized_data?
> Undefined global functions or variables:
>    filter_normalized_data

Those functions contain a reference to filter_normalized_data, but the 
code analysis couldn't find it defined anywhere.

Sometimes these are false positives, the code analysis isn't perfect. 
You should check them, and if they really are false positives, you can use

globalVariables("filter_normalized_data")

to suppress the warning.

> 
> 
> checking installed package size ... NOTE
>    installed size is  6.4Mb
>    sub-directories of 1Mb or more:
>      data   5.5Mb
> 

You need to decide if that large data directory is really necessary, and 
if so, justify its use to the CRAN maintainers when you make your 
submission.

Duncan Murdoch


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Mar  3 22:57:18 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 03 Mar 2019 13:57:18 -0800
Subject: [R-pkg-devel] regarding solution of these warning and note
In-Reply-To: <CAEW5xfTTTXZBWTvwahhQjnSVCP7dnXCnCxKO_Sze6SeOKRikAA@mail.gmail.com>
References: <CAEW5xfTTTXZBWTvwahhQjnSVCP7dnXCnCxKO_Sze6SeOKRikAA@mail.gmail.com>
Message-ID: <B6112A20-3292-4C69-B5D5-611D9128B503@dcn.davis.ca.us>

Do you have a question? If so, please read the Posting Guide and follow its recommendations. (e.g. What did you do to trigger these errors in enough detail that we could trigger them? What is your desired outcome?)

On March 3, 2019 1:11:45 PM PST, Krishan Gupta <krishang at iiitd.ac.in> wrote:
>Original: no visible binding for global variable
>  ?filter_normalized_data?
>Seurat: no visible binding for global variable ?filter_normalized_data?
>genes_filter: no visible binding for global variable
>  ?filter_normalized_data?
>Undefined global functions or variables:
>  filter_normalized_data
>
>
>checking installed package size ... NOTE
>  installed size is  6.4Mb
>  sub-directories of 1Mb or more:
>    data   5.5Mb
>
>*Thanks and Regards*
>
>
>*Krishan GuptaPhD Scholar*
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From Chr|@@Br|en @end|ng |rom un|@@@edu@@u  Mon Mar  4 05:34:47 2019
From: Chr|@@Br|en @end|ng |rom un|@@@edu@@u (Chris Brien)
Date: Mon, 4 Mar 2019 04:34:47 +0000
Subject: [R-pkg-devel] License note on CRAN submission
Message-ID: <23bbf92c0f554e5585b607960fbc9d92@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>

I recently submitted an updated version of my package asremlPlus to CRAN and it did not pass incoming checks automatically because there were 3 Notes.

One Note was straightforward to fix and using rhub::check_for_cran I having verified that it is fixed. The rhub response from Windows server 2008 r-devel and Fedora linux, r-devel,  clang was  as follows:

-----
License components with restrictions and base license permitting such:
  MIT + file LICENSE
File 'LICENSE':
  YEAR: 2019
  
  COPYRIGHT HOLDER: CHRIS BRIEN

Suggests or Enhances not in mainstream repositories:
  asreml
* checking package dependencies ... NOTE
Package which this enhances but not available for checking: 'asreml'
---

The second note (concerning asreml) is expected and means that asremlPlus will never pass the incoming check automatically. 

However, the first note concerning the license is not one that I had received on previous submissions, the most recent prior submission being 9/01/2019. The only change that has been made to the LICENSE file since then is the YEAR. 

The thing is that I do not know what is giving rise to the message and I need help to work out how to proceed. I do not want to resubmit to CRAN if there is some modification that I should make that will remove the License note.

So, is the message 
(1) one that I should now expect, given the MIT license, and I can resubmit to CRAN,  
(2) an indication of a problem with the license that is now being detected and needs to be fixed, or 
(3) an indication of some other problem that needs attention?

Any help is much appreciated,

Cheers, 

  Chris 

PS The package is at https://github.com/briencj/asremlPlus. 

---------


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Mar  4 09:46:15 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 4 Mar 2019 09:46:15 +0100
Subject: [R-pkg-devel] License note on CRAN submission
In-Reply-To: <23bbf92c0f554e5585b607960fbc9d92@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
References: <23bbf92c0f554e5585b607960fbc9d92@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
Message-ID: <34d1ad7d-3e34-4d8a-b7c7-4531949f37d3@statistik.tu-dortmund.de>



On 04.03.2019 05:34, Chris Brien wrote:
> I recently submitted an updated version of my package asremlPlus to CRAN and it did not pass incoming checks automatically because there were 3 Notes.
> 
> One Note was straightforward to fix and using rhub::check_for_cran I having verified that it is fixed. The rhub response from Windows server 2008 r-devel and Fedora linux, r-devel,  clang was  as follows:
> 
> -----
> License components with restrictions and base license permitting such:
>    MIT + file LICENSE
> File 'LICENSE':
>    YEAR: 2019
>    
>    COPYRIGHT HOLDER: CHRIS BRIEN


Looks like you have an extra line between  YEAR and COPYRIGHT HOLDER?
Simply omitting that should solve the issue.

Nevertheless, I do not believe you had a lot trouble getting this to 
CRAN in the past.

Best,
Uwe Ligges





> 
> Suggests or Enhances not in mainstream repositories:
>    asreml
> * checking package dependencies ... NOTE
> Package which this enhances but not available for checking: 'asreml'
> ---
> 
> The second note (concerning asreml) is expected and means that asremlPlus will never pass the incoming check automatically.
> 
> However, the first note concerning the license is not one that I had received on previous submissions, the most recent prior submission being 9/01/2019. The only change that has been made to the LICENSE file since then is the YEAR.
> 
> The thing is that I do not know what is giving rise to the message and I need help to work out how to proceed. I do not want to resubmit to CRAN if there is some modification that I should make that will remove the License note.
> 
> So, is the message
> (1) one that I should now expect, given the MIT license, and I can resubmit to CRAN,
> (2) an indication of a problem with the license that is now being detected and needs to be fixed, or
> (3) an indication of some other problem that needs attention?
> 
> Any help is much appreciated,
> 
> Cheers,
> 
>    Chris
> 
> PS The package is at https://github.com/briencj/asremlPlus.
> 
> ---------
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From hor|@@yeb @end|ng |rom gm@||@com  Mon Mar  4 10:26:02 2019
From: hor|@@yeb @end|ng |rom gm@||@com (Horia Yeb)
Date: Mon, 4 Mar 2019 10:26:02 +0100
Subject: [R-pkg-devel] Debian check string include
In-Reply-To: <23670.37950.207127.654129@rob.eddelbuettel.com>
References: <CANiCS6WeFVLJT7oqOQnSdT_r_Nc4ZExRzp6MJkUnPeXNrA0AWg@mail.gmail.com>
 <23670.37950.207127.654129@rob.eddelbuettel.com>
Message-ID: <CANiCS6W4v1yK5cHa7a4OTgxSUXpsm42Qqx+8hTNUrUaxyiNHAg@mail.gmail.com>

Thanks for the answer Dirk Eddelbuettel. I feel dumb not noticing that!


On Wed, 27 Feb 2019 at 14:44, Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 27 February 2019 at 14:17, Horia Yeb wrote:
> | rcpp_throwchart.cpp:6:10: fatal error: String.h: No such file or
> directory
>
> Did you mean the standard C header string.h?
>
> Or did you mean Rcpp's own Rcpp/String.h ?  It is included for you by
> Rcpp.h.
>
> | Also would it be possible to submit a Windows only package or is that
> | not OK for CRAN?
>
> The CRAN Repository Policy you are supposed to read says it is *not* ok.
>
> It is perfectly fine to have packages only on GitHub, or in non-CRAN
> repositories.  My drat packages makes it easy to host one -- on GitHub.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From Chr|@@Br|en @end|ng |rom un|@@@edu@@u  Mon Mar  4 11:09:30 2019
From: Chr|@@Br|en @end|ng |rom un|@@@edu@@u (Chris Brien)
Date: Mon, 4 Mar 2019 10:09:30 +0000
Subject: [R-pkg-devel] License note on CRAN submission
In-Reply-To: <34d1ad7d-3e34-4d8a-b7c7-4531949f37d3@statistik.tu-dortmund.de>
References: <23bbf92c0f554e5585b607960fbc9d92@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
 <34d1ad7d-3e34-4d8a-b7c7-4531949f37d3@statistik.tu-dortmund.de>
Message-ID: <3877471b5a40463abd2f019e0d218dda@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>

Hi Uwe,

Deleting the blank line and resubmitting to rhub indicates that the problem has been fixed.

You are right that the extra blank line did not cause a problem before, specifically on 2019-01-09. Mystifying!

However, hopefully all good now.

Cheers,

  Chris



From: Uwe Ligges [mailto:ligges at statistik.tu-dortmund.de]
Sent: Monday, 4 March 2019 7:16 PM
To: Chris Brien; 'r-package-devel at r-project.org'
Subject: Re: [R-pkg-devel] License note on CRAN submission



On 04.03.2019 05:34, Chris Brien wrote:
> I recently submitted an updated version of my package asremlPlus to CRAN and it did not pass incoming checks automatically because there were 3 Notes.
>
> One Note was straightforward to fix and using rhub::check_for_cran I having verified that it is fixed. The rhub response from Windows server 2008 r-devel and Fedora linux, r-devel, clang was as follows:
>
> -----
> License components with restrictions and base license permitting such:
> MIT + file LICENSE
> File 'LICENSE':
> YEAR: 2019
>
> COPYRIGHT HOLDER: CHRIS BRIEN


Looks like you have an extra line between YEAR and COPYRIGHT HOLDER?
Simply omitting that should solve the issue.

Nevertheless, I do not believe you had a lot trouble getting this to
CRAN in the past.

Best,
Uwe Ligges





>
> Suggests or Enhances not in mainstream repositories:
> asreml
> * checking package dependencies ... NOTE
> Package which this enhances but not available for checking: 'asreml'
> ---
>
> The second note (concerning asreml) is expected and means that asremlPlus will never pass the incoming check automatically.
>
> However, the first note concerning the license is not one that I had received on previous submissions, the most recent prior submission being 9/01/2019. The only change that has been made to the LICENSE file since then is the YEAR.
>
> The thing is that I do not know what is giving rise to the message and I need help to work out how to proceed. I do not want to resubmit to CRAN if there is some modification that I should make that will remove the License note.
>
> So, is the message
> (1) one that I should now expect, given the MIT license, and I can resubmit to CRAN,
> (2) an indication of a problem with the license that is now being detected and needs to be fixed, or
> (3) an indication of some other problem that needs attention?
>
> Any help is much appreciated,
>
> Cheers,
>
> Chris
>
> PS The package is at https://github.com/briencj/asremlPlus<https://github.com/briencj/asremlPlus>.
>
> ---------
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>

	[[alternative HTML version deleted]]


From hor|@@yeb @end|ng |rom gm@||@com  Tue Mar  5 11:10:48 2019
From: hor|@@yeb @end|ng |rom gm@||@com (Horia Yeb)
Date: Tue, 5 Mar 2019 11:10:48 +0100
Subject: [R-pkg-devel] CRAN submission examples don't run
Message-ID: <CANiCS6U5yZANv4sdPhhYFN59T6ubQ9D4KZtX3W4-rQ1cWA6g_Q@mail.gmail.com>

Hi all,
I am still trying to submit my first package, I've corrected a few bibs and
bobs and submitted with running examples. On my computer running check
--as-cran, the examples run perfectly, but on submission they don't seem to
run for some reason.
Here is the return from submission, 3 NOTEs ( the first one is checking
CRAN incoming feasibility ...) .

----
[snipet]

* checking compiled code ... OK
* checking examples ...
** running examples for arch 'i386' ... [53m] NOTE
Examples with CPU or elapsed time > 10s
                user system elapsed
DataViz-package 0.05   0.02 1844.87
throwchart      0.03   0.00 1319.79
** running examples for arch 'x64' ... [49m] NOTE
Examples with CPU or elapsed time > 10s
                user system elapsed
DataViz-package 0.03   0.00 1319.66
throwchart      0.02   0.01 1619.35
* checking PDF version of manual ... OK
* DONE
Status: 3 NOTEs
----




So I think that the examples aren't running at all rather than taking 50m
to run. The examples run an R function calling C++ function that
systematically opens an .html file in a browser. I could see this as a
problem maybe?

When looking at the pdfs in the package.check in examples the pdf file
"Package-Ex" is   empty/not working , could this be a reason for the
malfunction? Or is it normal?
Here is the report :
https://win-builder.r-project.org/incoming_pretest/DataViz_0.2_20190228_113204/Windows/00check.log



Any help would be appreciated!
Regards,

Timothy

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Mar  5 11:35:41 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 5 Mar 2019 11:35:41 +0100
Subject: [R-pkg-devel] CRAN submission examples don't run
In-Reply-To: <CANiCS6U5yZANv4sdPhhYFN59T6ubQ9D4KZtX3W4-rQ1cWA6g_Q@mail.gmail.com>
References: <CANiCS6U5yZANv4sdPhhYFN59T6ubQ9D4KZtX3W4-rQ1cWA6g_Q@mail.gmail.com>
Message-ID: <2fae9adf-412e-8416-1824-9e5a45ba4ac2@statistik.tu-dortmund.de>

Apparently your checks wait for the brower beeing closed.

Do not expect interactions in the examples. Please only run non 
interactive functionality in the examples and enclose ingteractice parts 
within

if(interactive()){

...}

Best,
Uwe Ligges



On 05.03.2019 11:10, Horia Yeb wrote:
> Hi all,
> I am still trying to submit my first package, I've corrected a few bibs and
> bobs and submitted with running examples. On my computer running check
> --as-cran, the examples run perfectly, but on submission they don't seem to
> run for some reason.
> Here is the return from submission, 3 NOTEs ( the first one is checking
> CRAN incoming feasibility ...) .
> 
> ----
> [snipet]
> 
> * checking compiled code ... OK
> * checking examples ...
> ** running examples for arch 'i386' ... [53m] NOTE
> Examples with CPU or elapsed time > 10s
>                  user system elapsed
> DataViz-package 0.05   0.02 1844.87
> throwchart      0.03   0.00 1319.79
> ** running examples for arch 'x64' ... [49m] NOTE
> Examples with CPU or elapsed time > 10s
>                  user system elapsed
> DataViz-package 0.03   0.00 1319.66
> throwchart      0.02   0.01 1619.35
> * checking PDF version of manual ... OK
> * DONE
> Status: 3 NOTEs
> ----
> 
> 
> 
> 
> So I think that the examples aren't running at all rather than taking 50m
> to run. The examples run an R function calling C++ function that
> systematically opens an .html file in a browser. I could see this as a
> problem maybe?
> 
> When looking at the pdfs in the package.check in examples the pdf file
> "Package-Ex" is   empty/not working , could this be a reason for the
> malfunction? Or is it normal?
> Here is the report :
> https://win-builder.r-project.org/incoming_pretest/DataViz_0.2_20190228_113204/Windows/00check.log
> 
> 
> 
> Any help would be appreciated!
> Regards,
> 
> Timothy
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From hor|@@yeb @end|ng |rom gm@||@com  Tue Mar  5 11:55:33 2019
From: hor|@@yeb @end|ng |rom gm@||@com (Horia Yeb)
Date: Tue, 5 Mar 2019 11:55:33 +0100
Subject: [R-pkg-devel] CRAN submission examples don't run
In-Reply-To: <2fae9adf-412e-8416-1824-9e5a45ba4ac2@statistik.tu-dortmund.de>
References: <CANiCS6U5yZANv4sdPhhYFN59T6ubQ9D4KZtX3W4-rQ1cWA6g_Q@mail.gmail.com>
 <2fae9adf-412e-8416-1824-9e5a45ba4ac2@statistik.tu-dortmund.de>
Message-ID: <CANiCS6X4ht=Gn6Ass5azAHuYhq-rcP97JcNgsXgLaJnmNm15HQ@mail.gmail.com>

Thank Uwe for the answer,
But the purpose of the package is ?when the input data is dealt with? open
a .html page. Does that mean in my R code I should write :
[....]
if(interactive())
{
    .Call(C++ code)
}
In my c++ code the interactive part is a    *system(html_path);*    is
there an equivalent C++ condition to check if interactive?

So either I protect the whole C++ function with the interactive check,
either I protect the system() call?

Thanks, Uwe for the interactive() function I'm new to R and don't know all
the functions.

Regards,
Timothy

On Tue, 5 Mar 2019 at 11:35, Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

> Apparently your checks wait for the brower beeing closed.
>
> Do not expect interactions in the examples. Please only run non
> interactive functionality in the examples and enclose ingteractice parts
> within
>
> if(interactive()){
>
> ...}
>
> Best,
> Uwe Ligges
>
>
>
> On 05.03.2019 11:10, Horia Yeb wrote:
> > Hi all,
> > I am still trying to submit my first package, I've corrected a few bibs
> and
> > bobs and submitted with running examples. On my computer running check
> > --as-cran, the examples run perfectly, but on submission they don't seem
> to
> > run for some reason.
> > Here is the return from submission, 3 NOTEs ( the first one is checking
> > CRAN incoming feasibility ...) .
> >
> > ----
> > [snipet]
> >
> > * checking compiled code ... OK
> > * checking examples ...
> > ** running examples for arch 'i386' ... [53m] NOTE
> > Examples with CPU or elapsed time > 10s
> >                  user system elapsed
> > DataViz-package 0.05   0.02 1844.87
> > throwchart      0.03   0.00 1319.79
> > ** running examples for arch 'x64' ... [49m] NOTE
> > Examples with CPU or elapsed time > 10s
> >                  user system elapsed
> > DataViz-package 0.03   0.00 1319.66
> > throwchart      0.02   0.01 1619.35
> > * checking PDF version of manual ... OK
> > * DONE
> > Status: 3 NOTEs
> > ----
> >
> >
> >
> >
> > So I think that the examples aren't running at all rather than taking 50m
> > to run. The examples run an R function calling C++ function that
> > systematically opens an .html file in a browser. I could see this as a
> > problem maybe?
> >
> > When looking at the pdfs in the package.check in examples the pdf file
> > "Package-Ex" is   empty/not working , could this be a reason for the
> > malfunction? Or is it normal?
> > Here is the report :
> >
> https://win-builder.r-project.org/incoming_pretest/DataViz_0.2_20190228_113204/Windows/00check.log
> >
> >
> >
> > Any help would be appreciated!
> > Regards,
> >
> > Timothy
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>

	[[alternative HTML version deleted]]


From Jor|@@Mey@ @end|ng |rom ugent@be  Tue Mar  5 12:56:08 2019
From: Jor|@@Mey@ @end|ng |rom ugent@be (Joris Meys)
Date: Tue, 5 Mar 2019 12:56:08 +0100
Subject: [R-pkg-devel] CRAN submission examples don't run
In-Reply-To: <CANiCS6X4ht=Gn6Ass5azAHuYhq-rcP97JcNgsXgLaJnmNm15HQ@mail.gmail.com>
References: <CANiCS6U5yZANv4sdPhhYFN59T6ubQ9D4KZtX3W4-rQ1cWA6g_Q@mail.gmail.com>
 <2fae9adf-412e-8416-1824-9e5a45ba4ac2@statistik.tu-dortmund.de>
 <CANiCS6X4ht=Gn6Ass5azAHuYhq-rcP97JcNgsXgLaJnmNm15HQ@mail.gmail.com>
Message-ID: <CAO1zAVZuikTCDjTLA_aEarMqpzBfRicNQai1AYzV8LF+R+Qj9A@mail.gmail.com>

Dear Timothy,

Uwe meant to include that code in the _examples_, not in your actual
functions. Whenever an example is expected to open a web page, use
if(interactive()) to avoid it from being run by the test infrastructure.

On a sidenote: It would make sense to add this as a first check to
functions which can only work when called interactively. That's up to you.
However, beware of errors created when the function is not run
interactively, as this would also cause your examples to give errors.

Cheers
Joris

On Tue, Mar 5, 2019 at 11:56 AM Horia Yeb <horia.yeb at gmail.com> wrote:

> Thank Uwe for the answer,
> But the purpose of the package is ?when the input data is dealt with? open
> a .html page. Does that mean in my R code I should write :
> [....]
> if(interactive())
> {
>     .Call(C++ code)
> }
> In my c++ code the interactive part is a    *system(html_path);*    is
> there an equivalent C++ condition to check if interactive?
>
> So either I protect the whole C++ function with the interactive check,
> either I protect the system() call?
>
> Thanks, Uwe for the interactive() function I'm new to R and don't know all
> the functions.
>
> Regards,
> Timothy
>
> On Tue, 5 Mar 2019 at 11:35, Uwe Ligges <ligges at statistik.tu-dortmund.de>
> wrote:
>
> > Apparently your checks wait for the brower beeing closed.
> >
> > Do not expect interactions in the examples. Please only run non
> > interactive functionality in the examples and enclose ingteractice parts
> > within
> >
> > if(interactive()){
> >
> > ...}
> >
> > Best,
> > Uwe Ligges
> >
> >
> >
> > On 05.03.2019 11:10, Horia Yeb wrote:
> > > Hi all,
> > > I am still trying to submit my first package, I've corrected a few bibs
> > and
> > > bobs and submitted with running examples. On my computer running check
> > > --as-cran, the examples run perfectly, but on submission they don't
> seem
> > to
> > > run for some reason.
> > > Here is the return from submission, 3 NOTEs ( the first one is checking
> > > CRAN incoming feasibility ...) .
> > >
> > > ----
> > > [snipet]
> > >
> > > * checking compiled code ... OK
> > > * checking examples ...
> > > ** running examples for arch 'i386' ... [53m] NOTE
> > > Examples with CPU or elapsed time > 10s
> > >                  user system elapsed
> > > DataViz-package 0.05   0.02 1844.87
> > > throwchart      0.03   0.00 1319.79
> > > ** running examples for arch 'x64' ... [49m] NOTE
> > > Examples with CPU or elapsed time > 10s
> > >                  user system elapsed
> > > DataViz-package 0.03   0.00 1319.66
> > > throwchart      0.02   0.01 1619.35
> > > * checking PDF version of manual ... OK
> > > * DONE
> > > Status: 3 NOTEs
> > > ----
> > >
> > >
> > >
> > >
> > > So I think that the examples aren't running at all rather than taking
> 50m
> > > to run. The examples run an R function calling C++ function that
> > > systematically opens an .html file in a browser. I could see this as a
> > > problem maybe?
> > >
> > > When looking at the pdfs in the package.check in examples the pdf file
> > > "Package-Ex" is   empty/not working , could this be a reason for the
> > > malfunction? Or is it normal?
> > > Here is the report :
> > >
> >
> https://win-builder.r-project.org/incoming_pretest/DataViz_0.2_20190228_113204/Windows/00check.log
> > >
> > >
> > >
> > > Any help would be appreciated!
> > > Regards,
> > >
> > > Timothy
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
<https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>

tel: +32 (0)9 264 61 79
-----------
Biowiskundedagen 2017-2018
http://www.biowiskundedagen.ugent.be/

-------------------------------
Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php

	[[alternative HTML version deleted]]


From hor|@@yeb @end|ng |rom gm@||@com  Tue Mar  5 12:59:26 2019
From: hor|@@yeb @end|ng |rom gm@||@com (Horia Yeb)
Date: Tue, 5 Mar 2019 12:59:26 +0100
Subject: [R-pkg-devel] CRAN submission examples don't run
In-Reply-To: <CAO1zAVZuikTCDjTLA_aEarMqpzBfRicNQai1AYzV8LF+R+Qj9A@mail.gmail.com>
References: <CANiCS6U5yZANv4sdPhhYFN59T6ubQ9D4KZtX3W4-rQ1cWA6g_Q@mail.gmail.com>
 <2fae9adf-412e-8416-1824-9e5a45ba4ac2@statistik.tu-dortmund.de>
 <CANiCS6X4ht=Gn6Ass5azAHuYhq-rcP97JcNgsXgLaJnmNm15HQ@mail.gmail.com>
 <CAO1zAVZuikTCDjTLA_aEarMqpzBfRicNQai1AYzV8LF+R+Qj9A@mail.gmail.com>
Message-ID: <CANiCS6VcUKAA1TQiXTiVsiQmm8-TcYqTBEz9q+SNGPcn7Mq9zg@mail.gmail.com>

Hi and thank you Joris for the response,

Seeing as my functions are interactive, wouldn't the CRAN check (on
submission) return errors seins that it won't run any of the examples
because they are interactive?

Sorry if the questions sound dumb!

Regards,
Timothy

On Tue, 5 Mar 2019 at 12:56, Joris Meys <Joris.Meys at ugent.be> wrote:

> Dear Timothy,
>
> Uwe meant to include that code in the _examples_, not in your actual
> functions. Whenever an example is expected to open a web page, use
> if(interactive()) to avoid it from being run by the test infrastructure.
>
> On a sidenote: It would make sense to add this as a first check to
> functions which can only work when called interactively. That's up to you.
> However, beware of errors created when the function is not run
> interactively, as this would also cause your examples to give errors.
>
> Cheers
> Joris
>
> On Tue, Mar 5, 2019 at 11:56 AM Horia Yeb <horia.yeb at gmail.com> wrote:
>
>> Thank Uwe for the answer,
>> But the purpose of the package is ?when the input data is dealt with? open
>> a .html page. Does that mean in my R code I should write :
>> [....]
>> if(interactive())
>> {
>>     .Call(C++ code)
>> }
>> In my c++ code the interactive part is a    *system(html_path);*    is
>> there an equivalent C++ condition to check if interactive?
>>
>> So either I protect the whole C++ function with the interactive check,
>> either I protect the system() call?
>>
>> Thanks, Uwe for the interactive() function I'm new to R and don't know all
>> the functions.
>>
>> Regards,
>> Timothy
>>
>> On Tue, 5 Mar 2019 at 11:35, Uwe Ligges <ligges at statistik.tu-dortmund.de>
>> wrote:
>>
>> > Apparently your checks wait for the brower beeing closed.
>> >
>> > Do not expect interactions in the examples. Please only run non
>> > interactive functionality in the examples and enclose ingteractice parts
>> > within
>> >
>> > if(interactive()){
>> >
>> > ...}
>> >
>> > Best,
>> > Uwe Ligges
>> >
>> >
>> >
>> > On 05.03.2019 11:10, Horia Yeb wrote:
>> > > Hi all,
>> > > I am still trying to submit my first package, I've corrected a few
>> bibs
>> > and
>> > > bobs and submitted with running examples. On my computer running check
>> > > --as-cran, the examples run perfectly, but on submission they don't
>> seem
>> > to
>> > > run for some reason.
>> > > Here is the return from submission, 3 NOTEs ( the first one is
>> checking
>> > > CRAN incoming feasibility ...) .
>> > >
>> > > ----
>> > > [snipet]
>> > >
>> > > * checking compiled code ... OK
>> > > * checking examples ...
>> > > ** running examples for arch 'i386' ... [53m] NOTE
>> > > Examples with CPU or elapsed time > 10s
>> > >                  user system elapsed
>> > > DataViz-package 0.05   0.02 1844.87
>> > > throwchart      0.03   0.00 1319.79
>> > > ** running examples for arch 'x64' ... [49m] NOTE
>> > > Examples with CPU or elapsed time > 10s
>> > >                  user system elapsed
>> > > DataViz-package 0.03   0.00 1319.66
>> > > throwchart      0.02   0.01 1619.35
>> > > * checking PDF version of manual ... OK
>> > > * DONE
>> > > Status: 3 NOTEs
>> > > ----
>> > >
>> > >
>> > >
>> > >
>> > > So I think that the examples aren't running at all rather than taking
>> 50m
>> > > to run. The examples run an R function calling C++ function that
>> > > systematically opens an .html file in a browser. I could see this as a
>> > > problem maybe?
>> > >
>> > > When looking at the pdfs in the package.check in examples the pdf file
>> > > "Package-Ex" is   empty/not working , could this be a reason for the
>> > > malfunction? Or is it normal?
>> > > Here is the report :
>> > >
>> >
>> https://win-builder.r-project.org/incoming_pretest/DataViz_0.2_20190228_113204/Windows/00check.log
>> > >
>> > >
>> > >
>> > > Any help would be appreciated!
>> > > Regards,
>> > >
>> > > Timothy
>> > >
>> > >       [[alternative HTML version deleted]]
>> > >
>> > > ______________________________________________
>> > > R-package-devel at r-project.org mailing list
>> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> > >
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>
> --
> Joris Meys
> Statistical consultant
>
> Department of Data Analysis and Mathematical Modelling
> Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
>
> <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
>
> tel: +32 (0)9 264 61 79
> -----------
> Biowiskundedagen 2017-2018
> http://www.biowiskundedagen.ugent.be/
>
> -------------------------------
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Mar  5 13:38:06 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 5 Mar 2019 13:38:06 +0100
Subject: [R-pkg-devel] CRAN submission examples don't run
In-Reply-To: <CANiCS6VcUKAA1TQiXTiVsiQmm8-TcYqTBEz9q+SNGPcn7Mq9zg@mail.gmail.com>
References: <CANiCS6U5yZANv4sdPhhYFN59T6ubQ9D4KZtX3W4-rQ1cWA6g_Q@mail.gmail.com>
 <2fae9adf-412e-8416-1824-9e5a45ba4ac2@statistik.tu-dortmund.de>
 <CANiCS6X4ht=Gn6Ass5azAHuYhq-rcP97JcNgsXgLaJnmNm15HQ@mail.gmail.com>
 <CAO1zAVZuikTCDjTLA_aEarMqpzBfRicNQai1AYzV8LF+R+Qj9A@mail.gmail.com>
 <CANiCS6VcUKAA1TQiXTiVsiQmm8-TcYqTBEz9q+SNGPcn7Mq9zg@mail.gmail.com>
Message-ID: <ca720041-c464-cb05-48c2-e80bcdf03e05@statistik.tu-dortmund.de>



On 05.03.2019 12:59, Horia Yeb wrote:
> Hi and thank you Joris for the response,
> 
> Seeing as my functions are interactive, wouldn't the CRAN check (on 
> submission) return errors seins that it won't run any of the examples 
> because they are interactive?

Well it did in a way as the check was not finished and only retunred 
after a very lng time when the web broweser job got killed.

Best,
Uwe Ligges



> Sorry if the questions sound dumb!
> 
> Regards,
> Timothy
> 
> On Tue, 5 Mar 2019 at 12:56, Joris Meys <Joris.Meys at ugent.be 
> <mailto:Joris.Meys at ugent.be>> wrote:
> 
>     Dear Timothy,
> 
>     Uwe meant to include that code in the _examples_, not in your actual
>     functions. Whenever an example is expected to open a web page, use
>     if(interactive()) to avoid it from being run by the test
>     infrastructure.
> 
>     On a sidenote: It would make sense to add this as a first check to
>     functions which can only work when called interactively. That's up
>     to you. However, beware of errors created when the function is not
>     run interactively, as this would also cause your examples to give
>     errors.
> 
>     Cheers
>     Joris
> 
>     On Tue, Mar 5, 2019 at 11:56 AM Horia Yeb <horia.yeb at gmail.com
>     <mailto:horia.yeb at gmail.com>> wrote:
> 
>         Thank Uwe for the answer,
>         But the purpose of the package is ?when the input data is dealt
>         with? open
>         a .html page. Does that mean in my R code I should write :
>         [....]
>         if(interactive())
>         {
>          ? ? .Call(C++ code)
>         }
>         In my c++ code the interactive part is a   
>         *system(html_path);*? ? is
>         there an equivalent C++ condition to check if interactive?
> 
>         So either I protect the whole C++ function with the interactive
>         check,
>         either I protect the system() call?
> 
>         Thanks, Uwe for the interactive() function I'm new to R and
>         don't know all
>         the functions.
> 
>         Regards,
>         Timothy
> 
>         On Tue, 5 Mar 2019 at 11:35, Uwe Ligges
>         <ligges at statistik.tu-dortmund.de
>         <mailto:ligges at statistik.tu-dortmund.de>>
>         wrote:
> 
>          > Apparently your checks wait for the brower beeing closed.
>          >
>          > Do not expect interactions in the examples. Please only run non
>          > interactive functionality in the examples and enclose
>         ingteractice parts
>          > within
>          >
>          > if(interactive()){
>          >
>          > ...}
>          >
>          > Best,
>          > Uwe Ligges
>          >
>          >
>          >
>          > On 05.03.2019 11:10, Horia Yeb wrote:
>          > > Hi all,
>          > > I am still trying to submit my first package, I've
>         corrected a few bibs
>          > and
>          > > bobs and submitted with running examples. On my computer
>         running check
>          > > --as-cran, the examples run perfectly, but on submission
>         they don't seem
>          > to
>          > > run for some reason.
>          > > Here is the return from submission, 3 NOTEs ( the first one
>         is checking
>          > > CRAN incoming feasibility ...) .
>          > >
>          > > ----
>          > > [snipet]
>          > >
>          > > * checking compiled code ... OK
>          > > * checking examples ...
>          > > ** running examples for arch 'i386' ... [53m] NOTE
>          > > Examples with CPU or elapsed time > 10s
>          > >? ? ? ? ? ? ? ? ? user system elapsed
>          > > DataViz-package 0.05? ?0.02 1844.87
>          > > throwchart? ? ? 0.03? ?0.00 1319.79
>          > > ** running examples for arch 'x64' ... [49m] NOTE
>          > > Examples with CPU or elapsed time > 10s
>          > >? ? ? ? ? ? ? ? ? user system elapsed
>          > > DataViz-package 0.03? ?0.00 1319.66
>          > > throwchart? ? ? 0.02? ?0.01 1619.35
>          > > * checking PDF version of manual ... OK
>          > > * DONE
>          > > Status: 3 NOTEs
>          > > ----
>          > >
>          > >
>          > >
>          > >
>          > > So I think that the examples aren't running at all rather
>         than taking 50m
>          > > to run. The examples run an R function calling C++ function
>         that
>          > > systematically opens an .html file in a browser. I could
>         see this as a
>          > > problem maybe?
>          > >
>          > > When looking at the pdfs in the package.check in examples
>         the pdf file
>          > > "Package-Ex" is? ?empty/not working , could this be a
>         reason for the
>          > > malfunction? Or is it normal?
>          > > Here is the report :
>          > >
>          >
>         https://win-builder.r-project.org/incoming_pretest/DataViz_0.2_20190228_113204/Windows/00check.log
>          > >
>          > >
>          > >
>          > > Any help would be appreciated!
>          > > Regards,
>          > >
>          > > Timothy
>          > >
>          > >? ? ? ?[[alternative HTML version deleted]]
>          > >
>          > > ______________________________________________
>          > > R-package-devel at r-project.org
>         <mailto:R-package-devel at r-project.org> mailing list
>          > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>          > >
>          >
> 
>          ? ? ? ? [[alternative HTML version deleted]]
> 
>         ______________________________________________
>         R-package-devel at r-project.org
>         <mailto:R-package-devel at r-project.org> mailing list
>         https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> 
>     -- 
>     Joris Meys
>     Statistical consultant
> 
>     Department of Data Analysis and Mathematical Modelling
>     Ghent University
>     Coupure Links 653, B-9000 Gent (Belgium)
>     <https://maps.google.com/?q=Coupure+links+653,%C2%A0B-9000+Gent,%C2%A0Belgium&entry=gmail&source=g>
> 
>     tel: +32 (0)9 264 61 79
>     -----------
>     Biowiskundedagen 2017-2018
>     http://www.biowiskundedagen.ugent.be/
> 
>     -------------------------------
>     Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
>


From bbo|ker @end|ng |rom gm@||@com  Tue Mar  5 20:46:14 2019
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 5 Mar 2019 14:46:14 -0500
Subject: [R-pkg-devel] ORCID disappearing in auto-generated Authors: field?
Message-ID: <f097f40a-06e5-4e00-a239-c97df23f2900@gmail.com>



 I'm getting this NOTE on r-hub's linux-x86_64-ubuntu-gcc platform. It
seems weird because the Author field was automatically derived from
Authors at R (there is no Author: field in the DESCRIPTION file ...)

  I think I'm going to write this off as a glitch (I haven't seen it on
my own Linux or MacOS systems, or travis, or win-builder ...), but has
anyone seen it before?  Am I doing something silly?

====
* checking DESCRIPTION meta-information ... NOTE

3815#> Author field differs from that derived from Authors at R

3816#> Author: ?Douglas Bates [aut] (), Martin Maechler [aut] (), Ben
Bolker [aut, cre] (), Steven Walker [aut] (), Rune Haubo Bojesen
Christensen [ctb] (), Henrik Singmann [ctb] (), Bin Dai [ctb], Fabian
Scheipl [ctb] (), Gabor Grothendieck [ctb], Peter Green [ctb] (), John
Fox [ctb]?

3817#> Authors at R: ?Douglas Bates [aut] (0000-0001-8316-9503), Martin
Maechler [aut] (0000-0002-8685-9910), Ben Bolker [aut, cre]
(0000-0002-2127-0443), Steven Walker [aut] (0000-0002-4394-9078), Rune
Haubo Bojesen Christensen [ctb] (0000-0002-4494-3399), Henrik Singmann
[ctb] (0000-0002-4842-3657), Bin Dai [ctb], Fabian Scheipl [ctb]
(0000-0001-8172-3603), Gabor Grothendieck [ctb], Peter Green [ctb]
(0000-0002-0238-9852), John Fox [ctb]?

The original field in the DESCRIPTION file is:

Authors at R: c(
    person("Douglas","Bates", role="aut",
	comment=c(ORCID="0000-0001-8316-9503")),
    person("Martin","Maechler", role="aut",
	comment=c(ORCID="0000-0002-8685-9910")),
    person("Ben","Bolker",email="bbolker+lme4 at gmail.com",
role=c("aut","cre"),
	comment=c(ORCID="0000-0002-2127-0443")),
    person("Steven","Walker",role="aut",
	comment=c(ORCID="0000-0002-4394-9078")),
    person("Rune Haubo Bojesen","Christensen", role="ctb",
	comment=c(ORCID="0000-0002-4494-3399")),
    person("Henrik","Singmann", role="ctb",
	comment=c(ORCID="0000-0002-4842-3657")),
    person("Bin", "Dai", role="ctb"),
    person("Fabian", "Scheipl", role="ctb",
	comment=c(ORCID="0000-0001-8172-3603")),
    person("Gabor", "Grothendieck", role="ctb"),
    person("Peter", "Green", role="ctb",
	comment=c(ORCID="0000-0002-0238-9852")),
    person("John", "Fox", role="ctb")
    )


From bbo|ker @end|ng |rom gm@||@com  Tue Mar  5 20:56:57 2019
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 5 Mar 2019 14:56:57 -0500
Subject: [R-pkg-devel] 
 ORCID disappearing in auto-generated Authors: field?
In-Reply-To: <f097f40a-06e5-4e00-a239-c97df23f2900@gmail.com>
References: <f097f40a-06e5-4e00-a239-c97df23f2900@gmail.com>
Message-ID: <ce10ec3a-6d54-ed87-a1ca-5fc94135885e@gmail.com>


  PS. This was for R 3.4.4: maybe that's relevant?  (OTOH the CRAN
oldrel checks aren't triggering this NOTE, and I can't find anything at
all recent in R's NEWS file ...

  I may invoke Clarke's third law ("any sufficiently advanced technology
is indistinguishable from magic"
<https://en.wikipedia.org/wiki/Clarke%27s_three_laws>) and take my
chances with submitting to CRAN ...

   cheers
    Ben Bolker


On 2019-03-05 2:46 p.m., Ben Bolker wrote:
> 
> 
>  I'm getting this NOTE on r-hub's linux-x86_64-ubuntu-gcc platform. It
> seems weird because the Author field was automatically derived from
> Authors at R (there is no Author: field in the DESCRIPTION file ...)
> 
>   I think I'm going to write this off as a glitch (I haven't seen it on
> my own Linux or MacOS systems, or travis, or win-builder ...), but has
> anyone seen it before?  Am I doing something silly?
> 
> ====
> * checking DESCRIPTION meta-information ... NOTE
> 
> 3815#> Author field differs from that derived from Authors at R
> 
> 3816#> Author: ?Douglas Bates [aut] (), Martin Maechler [aut] (), Ben
> Bolker [aut, cre] (), Steven Walker [aut] (), Rune Haubo Bojesen
> Christensen [ctb] (), Henrik Singmann [ctb] (), Bin Dai [ctb], Fabian
> Scheipl [ctb] (), Gabor Grothendieck [ctb], Peter Green [ctb] (), John
> Fox [ctb]?
> 
> 3817#> Authors at R: ?Douglas Bates [aut] (0000-0001-8316-9503), Martin
> Maechler [aut] (0000-0002-8685-9910), Ben Bolker [aut, cre]
> (0000-0002-2127-0443), Steven Walker [aut] (0000-0002-4394-9078), Rune
> Haubo Bojesen Christensen [ctb] (0000-0002-4494-3399), Henrik Singmann
> [ctb] (0000-0002-4842-3657), Bin Dai [ctb], Fabian Scheipl [ctb]
> (0000-0001-8172-3603), Gabor Grothendieck [ctb], Peter Green [ctb]
> (0000-0002-0238-9852), John Fox [ctb]?
> 
> The original field in the DESCRIPTION file is:
> 
> Authors at R: c(
>     person("Douglas","Bates", role="aut",
> 	comment=c(ORCID="0000-0001-8316-9503")),
>     person("Martin","Maechler", role="aut",
> 	comment=c(ORCID="0000-0002-8685-9910")),
>     person("Ben","Bolker",email="bbolker+lme4 at gmail.com",
> role=c("aut","cre"),
> 	comment=c(ORCID="0000-0002-2127-0443")),
>     person("Steven","Walker",role="aut",
> 	comment=c(ORCID="0000-0002-4394-9078")),
>     person("Rune Haubo Bojesen","Christensen", role="ctb",
> 	comment=c(ORCID="0000-0002-4494-3399")),
>     person("Henrik","Singmann", role="ctb",
> 	comment=c(ORCID="0000-0002-4842-3657")),
>     person("Bin", "Dai", role="ctb"),
>     person("Fabian", "Scheipl", role="ctb",
> 	comment=c(ORCID="0000-0001-8172-3603")),
>     person("Gabor", "Grothendieck", role="ctb"),
>     person("Peter", "Green", role="ctb",
> 	comment=c(ORCID="0000-0002-0238-9852")),
>     person("John", "Fox", role="ctb")
>     )
>


From r@||@@tubner @end|ng |rom d@q@n@@com  Tue Mar  5 22:28:21 2019
From: r@||@@tubner @end|ng |rom d@q@n@@com (Ralf Stubner)
Date: Tue, 5 Mar 2019 22:28:21 +0100
Subject: [R-pkg-devel] Handling ERROR on Solaris
Message-ID: <94f3ed36-526a-86e5-3b19-db9d2b3a1576@daqana.com>

Dear List,

my recent upload of dqrng v0.1.0 has triggered an ERROR on Solaris:? One
of the new tests results in a segmentation fault. During this test some
C++ code is compiled using Rcpp::sourceCpp and the resulting functions
are being called for different input.

Unfortunately I cannot reproduce the error on rhub's Solaris machine.? I
find it interesting that on both platforms a (IMO false positive)
warning is emitted by the compiler, but the wording is quite different.
Does this mean that the C++ compiler from Oracle Developer Studio is
used on CRAN? From
https://www.stats.ox.ac.uk/pub/bdr/Rconfig/r-patched-solaris-x86 I had
gathered that g++ would be used for building packages that link with
Rcpp. But maybe that does not apply to code being compiled during tests
of such packages?

Anyway, I do not want to risk the package getting archived for failure
of fixing this cross-platform issue. Does anybody have suggestions for
reproducing such issues? Any other suggestions how to proceed?

Thanks
Ralf

[1] https://cran.r-project.org/web/checks/check_results_dqrng.html
[2]
https://artifacts.r-hub.io/dqrng_0.1.0.tar.gz-c6fb11ef8cef4098ba367bc6053a6e4d/dqrng.Rcheck/tests/testthat.Rout

-- 
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190305/ee6f01e6/attachment.sig>

From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Mar  5 22:43:49 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 5 Mar 2019 22:43:49 +0100
Subject: [R-pkg-devel] 
 ORCID disappearing in auto-generated Authors: field?
In-Reply-To: <ce10ec3a-6d54-ed87-a1ca-5fc94135885e@gmail.com>
References: <f097f40a-06e5-4e00-a239-c97df23f2900@gmail.com>
 <ce10ec3a-6d54-ed87-a1ca-5fc94135885e@gmail.com>
Message-ID: <e010745f-9f08-5a62-51b7-068c6ef87cca@statistik.tu-dortmund.de>

Yes, older versions of R do not know about ORCID, hence do not get the 
comparison correct.

Best,
Uwe Ligges

On 05.03.2019 20:56, Ben Bolker wrote:
> 
>    PS. This was for R 3.4.4: maybe that's relevant?  (OTOH the CRAN
> oldrel checks aren't triggering this NOTE, and I can't find anything at
> all recent in R's NEWS file ...
> 
>    I may invoke Clarke's third law ("any sufficiently advanced technology
> is indistinguishable from magic"
> <https://en.wikipedia.org/wiki/Clarke%27s_three_laws>) and take my
> chances with submitting to CRAN ...
> 
>     cheers
>      Ben Bolker
> 
> 
> On 2019-03-05 2:46 p.m., Ben Bolker wrote:
>>
>>
>>   I'm getting this NOTE on r-hub's linux-x86_64-ubuntu-gcc platform. It
>> seems weird because the Author field was automatically derived from
>> Authors at R (there is no Author: field in the DESCRIPTION file ...)
>>
>>    I think I'm going to write this off as a glitch (I haven't seen it on
>> my own Linux or MacOS systems, or travis, or win-builder ...), but has
>> anyone seen it before?  Am I doing something silly?
>>
>> ====
>> * checking DESCRIPTION meta-information ... NOTE
>>
>> 3815#> Author field differs from that derived from Authors at R
>>
>> 3816#> Author: ?Douglas Bates [aut] (), Martin Maechler [aut] (), Ben
>> Bolker [aut, cre] (), Steven Walker [aut] (), Rune Haubo Bojesen
>> Christensen [ctb] (), Henrik Singmann [ctb] (), Bin Dai [ctb], Fabian
>> Scheipl [ctb] (), Gabor Grothendieck [ctb], Peter Green [ctb] (), John
>> Fox [ctb]?
>>
>> 3817#> Authors at R: ?Douglas Bates [aut] (0000-0001-8316-9503), Martin
>> Maechler [aut] (0000-0002-8685-9910), Ben Bolker [aut, cre]
>> (0000-0002-2127-0443), Steven Walker [aut] (0000-0002-4394-9078), Rune
>> Haubo Bojesen Christensen [ctb] (0000-0002-4494-3399), Henrik Singmann
>> [ctb] (0000-0002-4842-3657), Bin Dai [ctb], Fabian Scheipl [ctb]
>> (0000-0001-8172-3603), Gabor Grothendieck [ctb], Peter Green [ctb]
>> (0000-0002-0238-9852), John Fox [ctb]?
>>
>> The original field in the DESCRIPTION file is:
>>
>> Authors at R: c(
>>      person("Douglas","Bates", role="aut",
>> 	comment=c(ORCID="0000-0001-8316-9503")),
>>      person("Martin","Maechler", role="aut",
>> 	comment=c(ORCID="0000-0002-8685-9910")),
>>      person("Ben","Bolker",email="bbolker+lme4 at gmail.com",
>> role=c("aut","cre"),
>> 	comment=c(ORCID="0000-0002-2127-0443")),
>>      person("Steven","Walker",role="aut",
>> 	comment=c(ORCID="0000-0002-4394-9078")),
>>      person("Rune Haubo Bojesen","Christensen", role="ctb",
>> 	comment=c(ORCID="0000-0002-4494-3399")),
>>      person("Henrik","Singmann", role="ctb",
>> 	comment=c(ORCID="0000-0002-4842-3657")),
>>      person("Bin", "Dai", role="ctb"),
>>      person("Fabian", "Scheipl", role="ctb",
>> 	comment=c(ORCID="0000-0001-8172-3603")),
>>      person("Gabor", "Grothendieck", role="ctb"),
>>      person("Peter", "Green", role="ctb",
>> 	comment=c(ORCID="0000-0002-0238-9852")),
>>      person("John", "Fox", role="ctb")
>>      )
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From yonghu|@dong @end|ng |rom gm@||@com  Wed Mar  6 16:00:10 2019
From: yonghu|@dong @end|ng |rom gm@||@com (Yonghui Dong)
Date: Wed, 6 Mar 2019 17:00:10 +0200
Subject: [R-pkg-devel] Help with the warning : 'BiocInstaller' and
 'biocLite()' are deprecated, use the 'BiocManager' CRAN
Message-ID: <760A1035-7DE2-42CC-BBBC-28A6D85DBB98@gmail.com>

Dear all,

I remember somebody has asked a similar question days ago, but the problem has not been solved. I am sorry that I ask this question again.

My package can pass the CMD check in my local PC, while when I submit my package to CRAN, there is one warning:

>Found the following significant warnings:
Warning: 'BiocInstaller' and 'biocLite()' are deprecated, use the 'BiocManager' CRAN

One of my R package dependencies is a bioconductor package xcms. It seems that packages from Bioconducor cannot be installed now.

More details are given in the directory:

https://win-builder.r-project.org/incoming_pretest/Miso_0.2.1_20190304_095427/Windows/ <https://win-builder.r-project.org/incoming_pretest/Miso_0.2.1_20190304_095427/Windows/>

Thanks a lot for your help.

Dong
	[[alternative HTML version deleted]]


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Wed Mar  6 16:33:19 2019
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Wed, 6 Mar 2019 15:33:19 +0000
Subject: [R-pkg-devel] Help with the warning : 'BiocInstaller' and
 'biocLite()' are deprecated, use the 'BiocManager' CRAN
In-Reply-To: <760A1035-7DE2-42CC-BBBC-28A6D85DBB98@gmail.com>
References: <760A1035-7DE2-42CC-BBBC-28A6D85DBB98@gmail.com>
Message-ID: <MN2PR05MB6496D8C6782945664DA23E95F9730@MN2PR05MB6496.namprd05.prod.outlook.com>

From Bioconductor's perspective, this warning is safe to ignore. But only CRAN knows whether they do or not.

Note the unusual situation that the check is on the 'devel' branch of R, but that the package that signals the warning comes from the branch of Bioconductor meant for R-3.5.* -- CRAN apparently uses 3.5.* package binaries (for both CRAN & Bioconductor) in R-devel.

Martin Morgan

?On 3/6/19, 10:00 AM, "R-package-devel on behalf of Yonghui Dong" <r-package-devel-bounces at r-project.org on behalf of yonghui.dong at gmail.com> wrote:

    Dear all,
    
    I remember somebody has asked a similar question days ago, but the problem has not been solved. I am sorry that I ask this question again.
    
    My package can pass the CMD check in my local PC, while when I submit my package to CRAN, there is one warning:
    
    >Found the following significant warnings:
    Warning: 'BiocInstaller' and 'biocLite()' are deprecated, use the 'BiocManager' CRAN
    
    One of my R package dependencies is a bioconductor package xcms. It seems that packages from Bioconducor cannot be installed now.
    
    More details are given in the directory:
    
    https://win-builder.r-project.org/incoming_pretest/Miso_0.2.1_20190304_095427/Windows/ <https://win-builder.r-project.org/incoming_pretest/Miso_0.2.1_20190304_095427/Windows/>
    
    Thanks a lot for your help.
    
    Dong
    	[[alternative HTML version deleted]]
    
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel
    

From jmount @end|ng |rom w|n-vector@com  Thu Mar  7 00:51:09 2019
From: jmount @end|ng |rom w|n-vector@com (John Mount)
Date: Wed, 6 Mar 2019 15:51:09 -0800
Subject: [R-pkg-devel] CRAN "unable to re-encode" .R file warning
In-Reply-To: <BF04CDE4-2463-429A-B3B9-AA65535D90CB@win-vector.com>
References: <BF04CDE4-2463-429A-B3B9-AA65535D90CB@win-vector.com>
Message-ID: <1A571441-340E-43B1-8E90-83BC27598C7D@win-vector.com>

Brodie Gaslam pointed out that tools::showNonASCIIfile() does the job very nicely.

> On Mar 6, 2019, at 11:14 AM, John Mount <jmount at win-vector.com> wrote:
> 
> I am getting this warning on the `rquery` package: https://cran.r-project.org/web/checks/check_results_rquery.html <https://cran.r-project.org/web/checks/check_results_rquery.html>
> 
> >     Found the following significant warnings:
> >     Warning: unable to re-encode 'db_info.R' lines 93, 217
> 
> Looking into the code I see it is because I had weird formatted quote characters in a comment ( https://github.com/WinVector/rquery/blob/ce6ad3733876d9d731933b8d85850adc10304564/R/db_info.R#L93 <https://github.com/WinVector/rquery/blob/ce6ad3733876d9d731933b8d85850adc10304564/R/db_info.R#L93> ).
> 
> So I went and excised them.  Is there any Unix tool (or even R tool) that will tell me which other source files have this kind of problem?  Some sort of "isascii" function?  I'd like to fix any others while I am at it.
> 
> ---------------
> John Mount
> http://www.win-vector.com/ <http://www.win-vector.com/> 
> Our book: Practical Data Science with R http://www.manning.com/zumel/ <http://www.manning.com/zumel/>
> 
> 
> 

---------------
John Mount
http://www.win-vector.com/ <http://www.win-vector.com/> 
Our book: Practical Data Science with R http://www.manning.com/zumel/ <http://www.manning.com/zumel/>




	[[alternative HTML version deleted]]


From r@||@hero|d @end|ng |rom m@||box@org  Thu Mar  7 12:48:20 2019
From: r@||@hero|d @end|ng |rom m@||box@org (Ralf Herold)
Date: Thu, 7 Mar 2019 12:48:20 +0100
Subject: [R-pkg-devel] Checking for future file timestamps - warning with
 worldclockapi HTTP status 403 Site Disabled
Message-ID: <C1C13933-05A9-465B-AB76-8C0E637CC069@mailbox.org>

Dear All, 

Checking a new package under development produces a warning in a local R-devel MS Windows environment (output below). 

Building it with R-devel on Travis fails (because warnings are changed to errors), but is successful when setting environment variable _R_CHECK_SYSTEM_CLOCK_ to zero. 

No issue occurs when checking and building with R-stable and R-oldrel on Travis, or with any R version on win-builder.r-project.org. 

The warning concerns using http://worldclockapi.com/, which however seems out of service ("The web app you have attempted to reach is currently stopped and does not accept any requests."). This is referenced in the main function for R CMD check (https://svn.r-project.org/R/trunk/src/library/tools/R/check.R) and may concern more R-devel than R-package-devel. I am posting here to check if the issue was noticed by other package developers and to check the impact. 

Thanks for any suggestions. 
Best regards,
Ralf


PS C:\Users\username> & 'C:\Program Files\R\R-devel\bin\R.exe' CMD check E:\mypackage_0.1.2.3.tar.gz --as-cran
* using log directory 'C:/Users/username/ctrdata.Rcheck'
* using R Under development (unstable) (2019-03-05 r76200)
* using platform: x86_64-w64-mingw32 (64-bit)
* using session charset: ISO8859-1
* using option '--as-cran'
[...]
* checking package directory ... OK
* checking for future file timestamps ...Warning in file(con, "r") :
  cannot open URL 'http://worldclockapi.com/api/json/utc/now': HTTP status was '403 Site Disabled'
 WARNING
unable to verify current time
* checking 'build' directory ? OK
[...]



 ## Ralf Herold 
 ## mailto: ralf.herold at mailbox.org [S/MIME]
 ## https://paediatricdata.eu/


From R@|ner @end|ng |rom krug@@de  Thu Mar  7 13:54:40 2019
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Thu, 7 Mar 2019 13:54:40 +0100
Subject: [R-pkg-devel] 
 Checking for future file timestamps - warning with
 worldclockapi HTTP status 403 Site Disabled
In-Reply-To: <C1C13933-05A9-465B-AB76-8C0E637CC069@mailbox.org>
References: <C1C13933-05A9-465B-AB76-8C0E637CC069@mailbox.org>
Message-ID: <5422D390-AAC5-43B4-9EFE-01EE9A3DEB53@krugs.de>

I can confirm the same when checking on travis with r-devel.

And thanks for the tip with 

env:
  - _R_CHECK_SYSTEM_CLOCK_=0

In .travis.yml

Seems to be working now

Rainer



> On 7 Mar 2019, at 12:48, Ralf Herold <ralf.herold at mailbox.org> wrote:
> 
> Dear All, 
> 
> Checking a new package under development produces a warning in a local R-devel MS Windows environment (output below). 
> 
> Building it with R-devel on Travis fails (because warnings are changed to errors), but is successful when setting environment variable _R_CHECK_SYSTEM_CLOCK_ to zero. 
> 
> No issue occurs when checking and building with R-stable and R-oldrel on Travis, or with any R version on win-builder.r-project.org. 
> 
> The warning concerns using http://worldclockapi.com/, which however seems out of service ("The web app you have attempted to reach is currently stopped and does not accept any requests."). This is referenced in the main function for R CMD check (https://svn.r-project.org/R/trunk/src/library/tools/R/check.R) and may concern more R-devel than R-package-devel. I am posting here to check if the issue was noticed by other package developers and to check the impact. 
> 
> Thanks for any suggestions. 
> Best regards,
> Ralf
> 
> 
> PS C:\Users\username> & 'C:\Program Files\R\R-devel\bin\R.exe' CMD check E:\mypackage_0.1.2.3.tar.gz --as-cran
> * using log directory 'C:/Users/username/ctrdata.Rcheck'
> * using R Under development (unstable) (2019-03-05 r76200)
> * using platform: x86_64-w64-mingw32 (64-bit)
> * using session charset: ISO8859-1
> * using option '--as-cran'
> [...]
> * checking package directory ... OK
> * checking for future file timestamps ...Warning in file(con, "r") :
>  cannot open URL 'http://worldclockapi.com/api/json/utc/now': HTTP status was '403 Site Disabled'
> WARNING
> unable to verify current time
> * checking 'build' directory ? OK
> [...]
> 
> 
> 
> ## Ralf Herold 
> ## mailto: ralf.herold at mailbox.org [S/MIME]
> ## https://paediatricdata.eu/
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel




--
Rainer M. Krug
email: Rainer<at>krugs<dot>de
PGP: 0x0F52F982


	[[alternative HTML version deleted]]


From bob @end|ng |rom rud@|@  Thu Mar  7 14:38:06 2019
From: bob @end|ng |rom rud@|@ (Bob Rudis)
Date: Thu, 7 Mar 2019 08:38:06 -0500
Subject: [R-pkg-devel] 
 Checking for future file timestamps - warning with
 worldclockapi HTTP status 403 Site Disabled
In-Reply-To: <5422D390-AAC5-43B4-9EFE-01EE9A3DEB53@krugs.de>
References: <C1C13933-05A9-465B-AB76-8C0E637CC069@mailbox.org>
 <5422D390-AAC5-43B4-9EFE-01EE9A3DEB53@krugs.de>
Message-ID: <4847AF76-FD39-4376-B943-FDB09D0EE539@rud.is>

It's fixed in the RC that's GA on the 11th.

I think perhaps "stealth fixed" may be more appropro since it's not in SVN logs, Bugzilla nor noted prominently in any of the various NEWS* files.

Then there's the "why was the core R installation using a third party, non-HTTPS site for this to begin with".

And, in other news, there are tests in the R source that rely on a check of `foo.bar` for connectivity. `.bar` is a valid domain and `foo.bar` is registered. Thankfully there's no current IP address associated with it. Anything under `*.invalid` (https://en.wikipedia.org/wiki/.invalid) might be a better choice as well since that won't break the reason for the connectivity checks and won't arbitrarily send telemetry pings to third parties in the even anyone outside of R Core decides to run the tests (say, when patching something in R).

-boB

> On Mar 7, 2019, at 07:54, Rainer M Krug <Rainer at krugs.de> wrote:
> 
> I can confirm the same when checking on travis with r-devel.
> 
> And thanks for the tip with
> 
> env:
>  - _R_CHECK_SYSTEM_CLOCK_=0
> 
> In .travis.yml
> 
> Seems to be working now
> 
> Rainer
> 
> 
> 
>> On 7 Mar 2019, at 12:48, Ralf Herold <ralf.herold at mailbox.org> wrote:
>> 
>> Dear All,
>> 
>> Checking a new package under development produces a warning in a local R-devel MS Windows environment (output below).
>> 
>> Building it with R-devel on Travis fails (because warnings are changed to errors), but is successful when setting environment variable _R_CHECK_SYSTEM_CLOCK_ to zero.
>> 
>> No issue occurs when checking and building with R-stable and R-oldrel on Travis, or with any R version on win-builder.r-project.org.
>> 
>> The warning concerns using http://worldclockapi.com/, which however seems out of service ("The web app you have attempted to reach is currently stopped and does not accept any requests."). This is referenced in the main function for R CMD check (https://svn.r-project.org/R/trunk/src/library/tools/R/check.R) and may concern more R-devel than R-package-devel. I am posting here to check if the issue was noticed by other package developers and to check the impact.
>> 
>> Thanks for any suggestions.
>> Best regards,
>> Ralf
>> 
>> 
>> PS C:\Users\username> & 'C:\Program Files\R\R-devel\bin\R.exe' CMD check E:\mypackage_0.1.2.3.tar.gz --as-cran
>> * using log directory 'C:/Users/username/ctrdata.Rcheck'
>> * using R Under development (unstable) (2019-03-05 r76200)
>> * using platform: x86_64-w64-mingw32 (64-bit)
>> * using session charset: ISO8859-1
>> * using option '--as-cran'
>> [...]
>> * checking package directory ... OK
>> * checking for future file timestamps ...Warning in file(con, "r") :
>> cannot open URL 'http://worldclockapi.com/api/json/utc/now': HTTP status was '403 Site Disabled'
>> WARNING
>> unable to verify current time
>> * checking 'build' directory ? OK
>> [...]
>> 
>> 
>> 
>> ## Ralf Herold
>> ## mailto: ralf.herold at mailbox.org [S/MIME]
>> ## https://paediatricdata.eu/
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> 
> 
> --
> Rainer M. Krug
> email: Rainer<at>krugs<dot>de
> PGP: 0x0F52F982
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: Message signed with OpenPGP
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190307/5ccc4d2a/attachment.sig>

From r@||@hero|d @end|ng |rom m@||box@org  Thu Mar  7 14:53:39 2019
From: r@||@hero|d @end|ng |rom m@||box@org (Ralf Herold)
Date: Thu, 7 Mar 2019 14:53:39 +0100
Subject: [R-pkg-devel] 
 Checking for future file timestamps - warning with
 worldclockapi HTTP status 403 Site Disabled
In-Reply-To: <4847AF76-FD39-4376-B943-FDB09D0EE539@rud.is>
References: <C1C13933-05A9-465B-AB76-8C0E637CC069@mailbox.org>
 <5422D390-AAC5-43B4-9EFE-01EE9A3DEB53@krugs.de>
 <4847AF76-FD39-4376-B943-FDB09D0EE539@rud.is>
Message-ID: <30720F39-726D-48BB-B4FF-51AD7CB3B632@mailbox.org>

Many thanks for clear words, boB! This closes the issue for me. 
(I hope CRAN submissions are not impacted by the issue.)
Will remove the environment variable once the new version is available. 
Best, 
Ralf 

> Am 07.03.2019 um 14:38 schrieb Bob Rudis <bob at rud.is>:
> 
> It's fixed in the RC that's GA on the 11th.
> 
> I think perhaps "stealth fixed" may be more appropro since it's not in SVN logs, Bugzilla nor noted prominently in any of the various NEWS* files.
> 
> Then there's the "why was the core R installation using a third party, non-HTTPS site for this to begin with".
> 
> And, in other news, there are tests in the R source that rely on a check of `foo.bar` for connectivity. `.bar` is a valid domain and `foo.bar` is registered. Thankfully there's no current IP address associated with it. Anything under `*.invalid` (https://en.wikipedia.org/wiki/.invalid) might be a better choice as well since that won't break the reason for the connectivity checks and won't arbitrarily send telemetry pings to third parties in the even anyone outside of R Core decides to run the tests (say, when patching something in R).
> 
> -boB
> 
>> On Mar 7, 2019, at 07:54, Rainer M Krug <Rainer at krugs.de> wrote:
>> 
>> I can confirm the same when checking on travis with r-devel.
>> 
>> And thanks for the tip with
>> 
>> env:
>> - _R_CHECK_SYSTEM_CLOCK_=0
>> 
>> In .travis.yml
>> 
>> Seems to be working now
>> 
>> Rainer
>> 
>> 
>> 
>>> On 7 Mar 2019, at 12:48, Ralf Herold <ralf.herold at mailbox.org> wrote:
>>> 
>>> Dear All,
>>> 
>>> Checking a new package under development produces a warning in a local R-devel MS Windows environment (output below).
>>> 
>>> Building it with R-devel on Travis fails (because warnings are changed to errors), but is successful when setting environment variable _R_CHECK_SYSTEM_CLOCK_ to zero.
>>> 
>>> No issue occurs when checking and building with R-stable and R-oldrel on Travis, or with any R version on win-builder.r-project.org.
>>> 
>>> The warning concerns using http://worldclockapi.com/, which however seems out of service ("The web app you have attempted to reach is currently stopped and does not accept any requests."). This is referenced in the main function for R CMD check (https://svn.r-project.org/R/trunk/src/library/tools/R/check.R) and may concern more R-devel than R-package-devel. I am posting here to check if the issue was noticed by other package developers and to check the impact.
>>> 
>>> Thanks for any suggestions.
>>> Best regards,
>>> Ralf
>>> 
>>> 
>>> PS C:\Users\username> & 'C:\Program Files\R\R-devel\bin\R.exe' CMD check E:\mypackage_0.1.2.3.tar.gz --as-cran
>>> * using log directory 'C:/Users/username/ctrdata.Rcheck'
>>> * using R Under development (unstable) (2019-03-05 r76200)
>>> * using platform: x86_64-w64-mingw32 (64-bit)
>>> * using session charset: ISO8859-1
>>> * using option '--as-cran'
>>> [...]
>>> * checking package directory ... OK
>>> * checking for future file timestamps ...Warning in file(con, "r") :
>>> cannot open URL 'http://worldclockapi.com/api/json/utc/now': HTTP status was '403 Site Disabled'
>>> WARNING
>>> unable to verify current time
>>> * checking 'build' directory ? OK
>>> [...]
>>> 
>>> 
>>> 
>>> ## Ralf Herold
>>> ## mailto: ralf.herold at mailbox.org [S/MIME]
>>> ## https://paediatricdata.eu/
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
>> 
>> 
>> 
>> --
>> Rainer M. Krug
>> email: Rainer<at>krugs<dot>de
>> PGP: 0x0F52F982
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From pd@|gd @end|ng |rom gm@||@com  Thu Mar  7 15:32:37 2019
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Thu, 7 Mar 2019 15:32:37 +0100
Subject: [R-pkg-devel] 
 Checking for future file timestamps - warning with
 worldclockapi HTTP status 403 Site Disabled
In-Reply-To: <4847AF76-FD39-4376-B943-FDB09D0EE539@rud.is>
References: <C1C13933-05A9-465B-AB76-8C0E637CC069@mailbox.org>
 <5422D390-AAC5-43B4-9EFE-01EE9A3DEB53@krugs.de>
 <4847AF76-FD39-4376-B943-FDB09D0EE539@rud.is>
Message-ID: <2A749434-4EFA-4F92-B95C-4E1F9308C3AD@gmail.com>

It's not "stealth fixed"! It was never there... (on the release branch)

The timestamp checking code is still present in R-devel. I presume something needs to be done about the breakage.

- pd

> On 7 Mar 2019, at 14:38 , Bob Rudis <bob at rud.is> wrote:
> 
> It's fixed in the RC that's GA on the 11th.
> 
> I think perhaps "stealth fixed" may be more appropro since it's not in SVN logs, Bugzilla nor noted prominently in any of the various NEWS* files.
> 
> Then there's the "why was the core R installation using a third party, non-HTTPS site for this to begin with".
> 
> And, in other news, there are tests in the R source that rely on a check of `foo.bar` for connectivity. `.bar` is a valid domain and `foo.bar` is registered. Thankfully there's no current IP address associated with it. Anything under `*.invalid` (https://en.wikipedia.org/wiki/.invalid) might be a better choice as well since that won't break the reason for the connectivity checks and won't arbitrarily send telemetry pings to third parties in the even anyone outside of R Core decides to run the tests (say, when patching something in R).
> 
> -boB
> 
>> On Mar 7, 2019, at 07:54, Rainer M Krug <Rainer at krugs.de> wrote:
>> 
>> I can confirm the same when checking on travis with r-devel.
>> 
>> And thanks for the tip with
>> 
>> env:
>> - _R_CHECK_SYSTEM_CLOCK_=0
>> 
>> In .travis.yml
>> 
>> Seems to be working now
>> 
>> Rainer
>> 
>> 
>> 
>>> On 7 Mar 2019, at 12:48, Ralf Herold <ralf.herold at mailbox.org> wrote:
>>> 
>>> Dear All,
>>> 
>>> Checking a new package under development produces a warning in a local R-devel MS Windows environment (output below).
>>> 
>>> Building it with R-devel on Travis fails (because warnings are changed to errors), but is successful when setting environment variable _R_CHECK_SYSTEM_CLOCK_ to zero.
>>> 
>>> No issue occurs when checking and building with R-stable and R-oldrel on Travis, or with any R version on win-builder.r-project.org.
>>> 
>>> The warning concerns using http://worldclockapi.com/, which however seems out of service ("The web app you have attempted to reach is currently stopped and does not accept any requests."). This is referenced in the main function for R CMD check (https://svn.r-project.org/R/trunk/src/library/tools/R/check.R) and may concern more R-devel than R-package-devel. I am posting here to check if the issue was noticed by other package developers and to check the impact.
>>> 
>>> Thanks for any suggestions.
>>> Best regards,
>>> Ralf
>>> 
>>> 
>>> PS C:\Users\username> & 'C:\Program Files\R\R-devel\bin\R.exe' CMD check E:\mypackage_0.1.2.3.tar.gz --as-cran
>>> * using log directory 'C:/Users/username/ctrdata.Rcheck'
>>> * using R Under development (unstable) (2019-03-05 r76200)
>>> * using platform: x86_64-w64-mingw32 (64-bit)
>>> * using session charset: ISO8859-1
>>> * using option '--as-cran'
>>> [...]
>>> * checking package directory ... OK
>>> * checking for future file timestamps ...Warning in file(con, "r") :
>>> cannot open URL 'http://worldclockapi.com/api/json/utc/now': HTTP status was '403 Site Disabled'
>>> WARNING
>>> unable to verify current time
>>> * checking 'build' directory ? OK
>>> [...]
>>> 
>>> 
>>> 
>>> ## Ralf Herold
>>> ## mailto: ralf.herold at mailbox.org [S/MIME]
>>> ## https://paediatricdata.eu/
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
>> 
>> 
>> 
>> --
>> Rainer M. Krug
>> email: Rainer<at>krugs<dot>de
>> PGP: 0x0F52F982
>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From bob @end|ng |rom rud@|@  Thu Mar  7 16:31:48 2019
From: bob @end|ng |rom rud@|@ (Bob Rudis)
Date: Thu, 7 Mar 2019 10:31:48 -0500
Subject: [R-pkg-devel] 
 Checking for future file timestamps - warning with
 worldclockapi HTTP status 403 Site Disabled
In-Reply-To: <2A749434-4EFA-4F92-B95C-4E1F9308C3AD@gmail.com>
References: <C1C13933-05A9-465B-AB76-8C0E637CC069@mailbox.org>
 <5422D390-AAC5-43B4-9EFE-01EE9A3DEB53@krugs.de>
 <4847AF76-FD39-4376-B943-FDB09D0EE539@rud.is>
 <2A749434-4EFA-4F92-B95C-4E1F9308C3AD@gmail.com>
Message-ID: <8B1CCC41-567A-4FB3-A686-3E1EA37F3EB7@rud.is>

(a) that's gd news (#ty)
(b) genuine apologies for my confusion
(c) why was the introduction of reliance on a third-party site even under consideration?

> On Mar 7, 2019, at 09:32, peter dalgaard <pdalgd at gmail.com> wrote:
> 
> It's not "stealth fixed"! It was never there... (on the release branch)
> 
> The timestamp checking code is still present in R-devel. I presume something needs to be done about the breakage.
> 
> - pd
> 
>> On 7 Mar 2019, at 14:38 , Bob Rudis <bob at rud.is> wrote:
>> 
>> It's fixed in the RC that's GA on the 11th.
>> 
>> I think perhaps "stealth fixed" may be more appropro since it's not in SVN logs, Bugzilla nor noted prominently in any of the various NEWS* files.
>> 
>> Then there's the "why was the core R installation using a third party, non-HTTPS site for this to begin with".
>> 
>> And, in other news, there are tests in the R source that rely on a check of `foo.bar` for connectivity. `.bar` is a valid domain and `foo.bar` is registered. Thankfully there's no current IP address associated with it. Anything under `*.invalid` (https://en.wikipedia.org/wiki/.invalid) might be a better choice as well since that won't break the reason for the connectivity checks and won't arbitrarily send telemetry pings to third parties in the even anyone outside of R Core decides to run the tests (say, when patching something in R).
>> 
>> -boB
>> 
>>> On Mar 7, 2019, at 07:54, Rainer M Krug <Rainer at krugs.de> wrote:
>>> 
>>> I can confirm the same when checking on travis with r-devel.
>>> 
>>> And thanks for the tip with
>>> 
>>> env:
>>> - _R_CHECK_SYSTEM_CLOCK_=0
>>> 
>>> In .travis.yml
>>> 
>>> Seems to be working now
>>> 
>>> Rainer
>>> 
>>> 
>>> 
>>>> On 7 Mar 2019, at 12:48, Ralf Herold <ralf.herold at mailbox.org> wrote:
>>>> 
>>>> Dear All,
>>>> 
>>>> Checking a new package under development produces a warning in a local R-devel MS Windows environment (output below).
>>>> 
>>>> Building it with R-devel on Travis fails (because warnings are changed to errors), but is successful when setting environment variable _R_CHECK_SYSTEM_CLOCK_ to zero.
>>>> 
>>>> No issue occurs when checking and building with R-stable and R-oldrel on Travis, or with any R version on win-builder.r-project.org.
>>>> 
>>>> The warning concerns using http://worldclockapi.com/, which however seems out of service ("The web app you have attempted to reach is currently stopped and does not accept any requests."). This is referenced in the main function for R CMD check (https://svn.r-project.org/R/trunk/src/library/tools/R/check.R) and may concern more R-devel than R-package-devel. I am posting here to check if the issue was noticed by other package developers and to check the impact.
>>>> 
>>>> Thanks for any suggestions.
>>>> Best regards,
>>>> Ralf
>>>> 
>>>> 
>>>> PS C:\Users\username> & 'C:\Program Files\R\R-devel\bin\R.exe' CMD check E:\mypackage_0.1.2.3.tar.gz --as-cran
>>>> * using log directory 'C:/Users/username/ctrdata.Rcheck'
>>>> * using R Under development (unstable) (2019-03-05 r76200)
>>>> * using platform: x86_64-w64-mingw32 (64-bit)
>>>> * using session charset: ISO8859-1
>>>> * using option '--as-cran'
>>>> [...]
>>>> * checking package directory ... OK
>>>> * checking for future file timestamps ...Warning in file(con, "r") :
>>>> cannot open URL 'http://worldclockapi.com/api/json/utc/now': HTTP status was '403 Site Disabled'
>>>> WARNING
>>>> unable to verify current time
>>>> * checking 'build' directory ? OK
>>>> [...]
>>>> 
>>>> 
>>>> 
>>>> ## Ralf Herold
>>>> ## mailto: ralf.herold at mailbox.org [S/MIME]
>>>> ## https://paediatricdata.eu/
>>>> 
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> 
>>> 
>>> 
>>> 
>>> --
>>> Rainer M. Krug
>>> email: Rainer<at>krugs<dot>de
>>> PGP: 0x0F52F982
>>> 
>>> 
>>> 	[[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> --
> Peter Dalgaard, Professor,
> Center for Statistics, Copenhagen Business School
> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> Phone: (+45)38153501
> Office: A 4.23
> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> 
> 
> 
> 
> 
> 
> 
> 
> 


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: Message signed with OpenPGP
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190307/fd38c4c1/attachment.sig>

From h@w|ckh@m @end|ng |rom gm@||@com  Thu Mar  7 18:03:04 2019
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Thu, 7 Mar 2019 11:03:04 -0600
Subject: [R-pkg-devel] 
 Checking for future file timestamps - warning with
 worldclockapi HTTP status 403 Site Disabled
In-Reply-To: <8B1CCC41-567A-4FB3-A686-3E1EA37F3EB7@rud.is>
References: <C1C13933-05A9-465B-AB76-8C0E637CC069@mailbox.org>
 <5422D390-AAC5-43B4-9EFE-01EE9A3DEB53@krugs.de>
 <4847AF76-FD39-4376-B943-FDB09D0EE539@rud.is>
 <2A749434-4EFA-4F92-B95C-4E1F9308C3AD@gmail.com>
 <8B1CCC41-567A-4FB3-A686-3E1EA37F3EB7@rud.is>
Message-ID: <CABdHhvGK8oj9AyMZrheumJ7vshgUCF+PEbF8dfia-pv_8FxWHg@mail.gmail.com>

It appears that the code was added by BDR on 2 Sep 2018:
https://github.com/wch/r-source/commit/d839b1e04e173f90b51ad809ef0bdb18095abe6f

I assume we are seeing failing R CMD check results because
http://worldclockapi.com/api/json/utc/now has recently died.

It would be appreciated if someone from R-core could look into this as
it's currently causing all R-devel builds on travis to fail.

Hadley

On Thu, Mar 7, 2019 at 9:32 AM Bob Rudis <bob at rud.is> wrote:
>
> (a) that's gd news (#ty)
> (b) genuine apologies for my confusion
> (c) why was the introduction of reliance on a third-party site even under consideration?
>
> > On Mar 7, 2019, at 09:32, peter dalgaard <pdalgd at gmail.com> wrote:
> >
> > It's not "stealth fixed"! It was never there... (on the release branch)
> >
> > The timestamp checking code is still present in R-devel. I presume something needs to be done about the breakage.
> >
> > - pd
> >
> >> On 7 Mar 2019, at 14:38 , Bob Rudis <bob at rud.is> wrote:
> >>
> >> It's fixed in the RC that's GA on the 11th.
> >>
> >> I think perhaps "stealth fixed" may be more appropro since it's not in SVN logs, Bugzilla nor noted prominently in any of the various NEWS* files.
> >>
> >> Then there's the "why was the core R installation using a third party, non-HTTPS site for this to begin with".
> >>
> >> And, in other news, there are tests in the R source that rely on a check of `foo.bar` for connectivity. `.bar` is a valid domain and `foo.bar` is registered. Thankfully there's no current IP address associated with it. Anything under `*.invalid` (https://en.wikipedia.org/wiki/.invalid) might be a better choice as well since that won't break the reason for the connectivity checks and won't arbitrarily send telemetry pings to third parties in the even anyone outside of R Core decides to run the tests (say, when patching something in R).
> >>
> >> -boB
> >>
> >>> On Mar 7, 2019, at 07:54, Rainer M Krug <Rainer at krugs.de> wrote:
> >>>
> >>> I can confirm the same when checking on travis with r-devel.
> >>>
> >>> And thanks for the tip with
> >>>
> >>> env:
> >>> - _R_CHECK_SYSTEM_CLOCK_=0
> >>>
> >>> In .travis.yml
> >>>
> >>> Seems to be working now
> >>>
> >>> Rainer
> >>>
> >>>
> >>>
> >>>> On 7 Mar 2019, at 12:48, Ralf Herold <ralf.herold at mailbox.org> wrote:
> >>>>
> >>>> Dear All,
> >>>>
> >>>> Checking a new package under development produces a warning in a local R-devel MS Windows environment (output below).
> >>>>
> >>>> Building it with R-devel on Travis fails (because warnings are changed to errors), but is successful when setting environment variable _R_CHECK_SYSTEM_CLOCK_ to zero.
> >>>>
> >>>> No issue occurs when checking and building with R-stable and R-oldrel on Travis, or with any R version on win-builder.r-project.org.
> >>>>
> >>>> The warning concerns using http://worldclockapi.com/, which however seems out of service ("The web app you have attempted to reach is currently stopped and does not accept any requests."). This is referenced in the main function for R CMD check (https://svn.r-project.org/R/trunk/src/library/tools/R/check.R) and may concern more R-devel than R-package-devel. I am posting here to check if the issue was noticed by other package developers and to check the impact.
> >>>>
> >>>> Thanks for any suggestions.
> >>>> Best regards,
> >>>> Ralf
> >>>>
> >>>>
> >>>> PS C:\Users\username> & 'C:\Program Files\R\R-devel\bin\R.exe' CMD check E:\mypackage_0.1.2.3.tar.gz --as-cran
> >>>> * using log directory 'C:/Users/username/ctrdata.Rcheck'
> >>>> * using R Under development (unstable) (2019-03-05 r76200)
> >>>> * using platform: x86_64-w64-mingw32 (64-bit)
> >>>> * using session charset: ISO8859-1
> >>>> * using option '--as-cran'
> >>>> [...]
> >>>> * checking package directory ... OK
> >>>> * checking for future file timestamps ...Warning in file(con, "r") :
> >>>> cannot open URL 'http://worldclockapi.com/api/json/utc/now': HTTP status was '403 Site Disabled'
> >>>> WARNING
> >>>> unable to verify current time
> >>>> * checking 'build' directory ? OK
> >>>> [...]
> >>>>
> >>>>
> >>>>
> >>>> ## Ralf Herold
> >>>> ## mailto: ralf.herold at mailbox.org [S/MIME]
> >>>> ## https://paediatricdata.eu/
> >>>>
> >>>> ______________________________________________
> >>>> R-package-devel at r-project.org mailing list
> >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>
> >>>
> >>>
> >>>
> >>> --
> >>> Rainer M. Krug
> >>> email: Rainer<at>krugs<dot>de
> >>> PGP: 0x0F52F982
> >>>
> >>>
> >>>     [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > --
> > Peter Dalgaard, Professor,
> > Center for Statistics, Copenhagen Business School
> > Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> > Phone: (+45)38153501
> > Office: A 4.23
> > Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> >
> >
> >
> >
> >
> >
> >
> >
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
http://hadley.nz


From h@w|ckh@m @end|ng |rom gm@||@com  Thu Mar  7 20:52:37 2019
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Thu, 7 Mar 2019 13:52:37 -0600
Subject: [R-pkg-devel] 
 Checking for future file timestamps - warning with
 worldclockapi HTTP status 403 Site Disabled
In-Reply-To: <CABdHhvGK8oj9AyMZrheumJ7vshgUCF+PEbF8dfia-pv_8FxWHg@mail.gmail.com>
References: <C1C13933-05A9-465B-AB76-8C0E637CC069@mailbox.org>
 <5422D390-AAC5-43B4-9EFE-01EE9A3DEB53@krugs.de>
 <4847AF76-FD39-4376-B943-FDB09D0EE539@rud.is>
 <2A749434-4EFA-4F92-B95C-4E1F9308C3AD@gmail.com>
 <8B1CCC41-567A-4FB3-A686-3E1EA37F3EB7@rud.is>
 <CABdHhvGK8oj9AyMZrheumJ7vshgUCF+PEbF8dfia-pv_8FxWHg@mail.gmail.com>
Message-ID: <CABdHhvH+Zc_FZ1gAjOPgwyJ2eS-vgNSgAfamjYBaQdPTnLFXhw@mail.gmail.com>

As of ~7 hours ago, the warning is suppressed:
https://github.com/wch/r-source/commit/31ee14c620eb1b939acd322f3b5617f998aab8e8

(But the service still doesn't work)

Hadley

On Thu, Mar 7, 2019 at 11:03 AM Hadley Wickham <h.wickham at gmail.com> wrote:
>
> It appears that the code was added by BDR on 2 Sep 2018:
> https://github.com/wch/r-source/commit/d839b1e04e173f90b51ad809ef0bdb18095abe6f
>
> I assume we are seeing failing R CMD check results because
> http://worldclockapi.com/api/json/utc/now has recently died.
>
> It would be appreciated if someone from R-core could look into this as
> it's currently causing all R-devel builds on travis to fail.
>
> Hadley
>
> On Thu, Mar 7, 2019 at 9:32 AM Bob Rudis <bob at rud.is> wrote:
> >
> > (a) that's gd news (#ty)
> > (b) genuine apologies for my confusion
> > (c) why was the introduction of reliance on a third-party site even under consideration?
> >
> > > On Mar 7, 2019, at 09:32, peter dalgaard <pdalgd at gmail.com> wrote:
> > >
> > > It's not "stealth fixed"! It was never there... (on the release branch)
> > >
> > > The timestamp checking code is still present in R-devel. I presume something needs to be done about the breakage.
> > >
> > > - pd
> > >
> > >> On 7 Mar 2019, at 14:38 , Bob Rudis <bob at rud.is> wrote:
> > >>
> > >> It's fixed in the RC that's GA on the 11th.
> > >>
> > >> I think perhaps "stealth fixed" may be more appropro since it's not in SVN logs, Bugzilla nor noted prominently in any of the various NEWS* files.
> > >>
> > >> Then there's the "why was the core R installation using a third party, non-HTTPS site for this to begin with".
> > >>
> > >> And, in other news, there are tests in the R source that rely on a check of `foo.bar` for connectivity. `.bar` is a valid domain and `foo.bar` is registered. Thankfully there's no current IP address associated with it. Anything under `*.invalid` (https://en.wikipedia.org/wiki/.invalid) might be a better choice as well since that won't break the reason for the connectivity checks and won't arbitrarily send telemetry pings to third parties in the even anyone outside of R Core decides to run the tests (say, when patching something in R).
> > >>
> > >> -boB
> > >>
> > >>> On Mar 7, 2019, at 07:54, Rainer M Krug <Rainer at krugs.de> wrote:
> > >>>
> > >>> I can confirm the same when checking on travis with r-devel.
> > >>>
> > >>> And thanks for the tip with
> > >>>
> > >>> env:
> > >>> - _R_CHECK_SYSTEM_CLOCK_=0
> > >>>
> > >>> In .travis.yml
> > >>>
> > >>> Seems to be working now
> > >>>
> > >>> Rainer
> > >>>
> > >>>
> > >>>
> > >>>> On 7 Mar 2019, at 12:48, Ralf Herold <ralf.herold at mailbox.org> wrote:
> > >>>>
> > >>>> Dear All,
> > >>>>
> > >>>> Checking a new package under development produces a warning in a local R-devel MS Windows environment (output below).
> > >>>>
> > >>>> Building it with R-devel on Travis fails (because warnings are changed to errors), but is successful when setting environment variable _R_CHECK_SYSTEM_CLOCK_ to zero.
> > >>>>
> > >>>> No issue occurs when checking and building with R-stable and R-oldrel on Travis, or with any R version on win-builder.r-project.org.
> > >>>>
> > >>>> The warning concerns using http://worldclockapi.com/, which however seems out of service ("The web app you have attempted to reach is currently stopped and does not accept any requests."). This is referenced in the main function for R CMD check (https://svn.r-project.org/R/trunk/src/library/tools/R/check.R) and may concern more R-devel than R-package-devel. I am posting here to check if the issue was noticed by other package developers and to check the impact.
> > >>>>
> > >>>> Thanks for any suggestions.
> > >>>> Best regards,
> > >>>> Ralf
> > >>>>
> > >>>>
> > >>>> PS C:\Users\username> & 'C:\Program Files\R\R-devel\bin\R.exe' CMD check E:\mypackage_0.1.2.3.tar.gz --as-cran
> > >>>> * using log directory 'C:/Users/username/ctrdata.Rcheck'
> > >>>> * using R Under development (unstable) (2019-03-05 r76200)
> > >>>> * using platform: x86_64-w64-mingw32 (64-bit)
> > >>>> * using session charset: ISO8859-1
> > >>>> * using option '--as-cran'
> > >>>> [...]
> > >>>> * checking package directory ... OK
> > >>>> * checking for future file timestamps ...Warning in file(con, "r") :
> > >>>> cannot open URL 'http://worldclockapi.com/api/json/utc/now': HTTP status was '403 Site Disabled'
> > >>>> WARNING
> > >>>> unable to verify current time
> > >>>> * checking 'build' directory ? OK
> > >>>> [...]
> > >>>>
> > >>>>
> > >>>>
> > >>>> ## Ralf Herold
> > >>>> ## mailto: ralf.herold at mailbox.org [S/MIME]
> > >>>> ## https://paediatricdata.eu/
> > >>>>
> > >>>> ______________________________________________
> > >>>> R-package-devel at r-project.org mailing list
> > >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >>>
> > >>>
> > >>>
> > >>>
> > >>> --
> > >>> Rainer M. Krug
> > >>> email: Rainer<at>krugs<dot>de
> > >>> PGP: 0x0F52F982
> > >>>
> > >>>
> > >>>     [[alternative HTML version deleted]]
> > >>>
> > >>> ______________________________________________
> > >>> R-package-devel at r-project.org mailing list
> > >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >>
> > >> ______________________________________________
> > >> R-package-devel at r-project.org mailing list
> > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> > > --
> > > Peter Dalgaard, Professor,
> > > Center for Statistics, Copenhagen Business School
> > > Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> > > Phone: (+45)38153501
> > > Office: A 4.23
> > > Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>
> --
> http://hadley.nz



-- 
http://hadley.nz


From m@rt@@k@r@@@ @end|ng |rom gm@||@com  Fri Mar  8 06:15:07 2019
From: m@rt@@k@r@@@ @end|ng |rom gm@||@com (=?UTF-8?B?TWFydGEgS2FyYcWb?=)
Date: Fri, 8 Mar 2019 00:15:07 -0500
Subject: [R-pkg-devel] 
 Checking for future file timestamps - warning with
 worldclockapi HTTP status 403 Site Disabled
In-Reply-To: <CABdHhvH+Zc_FZ1gAjOPgwyJ2eS-vgNSgAfamjYBaQdPTnLFXhw@mail.gmail.com>
References: <C1C13933-05A9-465B-AB76-8C0E637CC069@mailbox.org>
 <5422D390-AAC5-43B4-9EFE-01EE9A3DEB53@krugs.de>
 <4847AF76-FD39-4376-B943-FDB09D0EE539@rud.is>
 <2A749434-4EFA-4F92-B95C-4E1F9308C3AD@gmail.com>
 <8B1CCC41-567A-4FB3-A686-3E1EA37F3EB7@rud.is>
 <CABdHhvGK8oj9AyMZrheumJ7vshgUCF+PEbF8dfia-pv_8FxWHg@mail.gmail.com>
 <CABdHhvH+Zc_FZ1gAjOPgwyJ2eS-vgNSgAfamjYBaQdPTnLFXhw@mail.gmail.com>
Message-ID: <CADVZz_rv0KQp-Hz5rLrNvKnfvCuuzH2R3Ly1mek20b3b2W4ubQ@mail.gmail.com>

I have faced the same problem with using http://worldclockapi.com/. I dealt
with Travis fail (because warnings are changed to errors) after setting
environment variable _R_CHECK_SYSTEM_CLOCK_ to zero, as adviced above.

How I deal with appveyor fail for the same reason? It may be seen in my
built output here (link)
<https://ci.appveyor.com/project/martakarass/adept/build/job/vq4ncvg6qbh526u4>.
I googled but was unable to find the equivalent of

env:
  - _R_CHECK_SYSTEM_CLOCK_=0


for appveyor. Would appreciate any hint a lot - thank you!
Marta

On Thu, Mar 7, 2019 at 2:53 PM Hadley Wickham <h.wickham at gmail.com> wrote:

> As of ~7 hours ago, the warning is suppressed:
>
> https://github.com/wch/r-source/commit/31ee14c620eb1b939acd322f3b5617f998aab8e8
>
> (But the service still doesn't work)
>
> Hadley
>
> On Thu, Mar 7, 2019 at 11:03 AM Hadley Wickham <h.wickham at gmail.com>
> wrote:
> >
> > It appears that the code was added by BDR on 2 Sep 2018:
> >
> https://github.com/wch/r-source/commit/d839b1e04e173f90b51ad809ef0bdb18095abe6f
> >
> > I assume we are seeing failing R CMD check results because
> > http://worldclockapi.com/api/json/utc/now has recently died.
> >
> > It would be appreciated if someone from R-core could look into this as
> > it's currently causing all R-devel builds on travis to fail.
> >
> > Hadley
> >
> > On Thu, Mar 7, 2019 at 9:32 AM Bob Rudis <bob at rud.is> wrote:
> > >
> > > (a) that's gd news (#ty)
> > > (b) genuine apologies for my confusion
> > > (c) why was the introduction of reliance on a third-party site even
> under consideration?
> > >
> > > > On Mar 7, 2019, at 09:32, peter dalgaard <pdalgd at gmail.com> wrote:
> > > >
> > > > It's not "stealth fixed"! It was never there... (on the release
> branch)
> > > >
> > > > The timestamp checking code is still present in R-devel. I presume
> something needs to be done about the breakage.
> > > >
> > > > - pd
> > > >
> > > >> On 7 Mar 2019, at 14:38 , Bob Rudis <bob at rud.is> wrote:
> > > >>
> > > >> It's fixed in the RC that's GA on the 11th.
> > > >>
> > > >> I think perhaps "stealth fixed" may be more appropro since it's not
> in SVN logs, Bugzilla nor noted prominently in any of the various NEWS*
> files.
> > > >>
> > > >> Then there's the "why was the core R installation using a third
> party, non-HTTPS site for this to begin with".
> > > >>
> > > >> And, in other news, there are tests in the R source that rely on a
> check of `foo.bar` for connectivity. `.bar` is a valid domain and `foo.bar`
> is registered. Thankfully there's no current IP address associated with it.
> Anything under `*.invalid` (https://en.wikipedia.org/wiki/.invalid) might
> be a better choice as well since that won't break the reason for the
> connectivity checks and won't arbitrarily send telemetry pings to third
> parties in the even anyone outside of R Core decides to run the tests (say,
> when patching something in R).
> > > >>
> > > >> -boB
> > > >>
> > > >>> On Mar 7, 2019, at 07:54, Rainer M Krug <Rainer at krugs.de> wrote:
> > > >>>
> > > >>> I can confirm the same when checking on travis with r-devel.
> > > >>>
> > > >>> And thanks for the tip with
> > > >>>
> > > >>> env:
> > > >>> - _R_CHECK_SYSTEM_CLOCK_=0
> > > >>>
> > > >>> In .travis.yml
> > > >>>
> > > >>> Seems to be working now
> > > >>>
> > > >>> Rainer
> > > >>>
> > > >>>
> > > >>>
> > > >>>> On 7 Mar 2019, at 12:48, Ralf Herold <ralf.herold at mailbox.org>
> wrote:
> > > >>>>
> > > >>>> Dear All,
> > > >>>>
> > > >>>> Checking a new package under development produces a warning in a
> local R-devel MS Windows environment (output below).
> > > >>>>
> > > >>>> Building it with R-devel on Travis fails (because warnings are
> changed to errors), but is successful when setting environment variable
> _R_CHECK_SYSTEM_CLOCK_ to zero.
> > > >>>>
> > > >>>> No issue occurs when checking and building with R-stable and
> R-oldrel on Travis, or with any R version on win-builder.r-project.org.
> > > >>>>
> > > >>>> The warning concerns using http://worldclockapi.com/, which
> however seems out of service ("The web app you have attempted to reach is
> currently stopped and does not accept any requests."). This is referenced
> in the main function for R CMD check (
> https://svn.r-project.org/R/trunk/src/library/tools/R/check.R) and may
> concern more R-devel than R-package-devel. I am posting here to check if
> the issue was noticed by other package developers and to check the impact.
> > > >>>>
> > > >>>> Thanks for any suggestions.
> > > >>>> Best regards,
> > > >>>> Ralf
> > > >>>>
> > > >>>>
> > > >>>> PS C:\Users\username> & 'C:\Program Files\R\R-devel\bin\R.exe'
> CMD check E:\mypackage_0.1.2.3.tar.gz --as-cran
> > > >>>> * using log directory 'C:/Users/username/ctrdata.Rcheck'
> > > >>>> * using R Under development (unstable) (2019-03-05 r76200)
> > > >>>> * using platform: x86_64-w64-mingw32 (64-bit)
> > > >>>> * using session charset: ISO8859-1
> > > >>>> * using option '--as-cran'
> > > >>>> [...]
> > > >>>> * checking package directory ... OK
> > > >>>> * checking for future file timestamps ...Warning in file(con,
> "r") :
> > > >>>> cannot open URL 'http://worldclockapi.com/api/json/utc/now':
> HTTP status was '403 Site Disabled'
> > > >>>> WARNING
> > > >>>> unable to verify current time
> > > >>>> * checking 'build' directory ? OK
> > > >>>> [...]
> > > >>>>
> > > >>>>
> > > >>>>
> > > >>>> ## Ralf Herold
> > > >>>> ## mailto: ralf.herold at mailbox.org [S/MIME]
> > > >>>> ## https://paediatricdata.eu/
> > > >>>>
> > > >>>> ______________________________________________
> > > >>>> R-package-devel at r-project.org mailing list
> > > >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > > >>>
> > > >>>
> > > >>>
> > > >>>
> > > >>> --
> > > >>> Rainer M. Krug
> > > >>> email: Rainer<at>krugs<dot>de
> > > >>> PGP: 0x0F52F982
> > > >>>
> > > >>>
> > > >>>     [[alternative HTML version deleted]]
> > > >>>
> > > >>> ______________________________________________
> > > >>> R-package-devel at r-project.org mailing list
> > > >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > > >>
> > > >> ______________________________________________
> > > >> R-package-devel at r-project.org mailing list
> > > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > > >
> > > > --
> > > > Peter Dalgaard, Professor,
> > > > Center for Statistics, Copenhagen Business School
> > > > Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> > > > Phone: (+45)38153501
> > > > Office: A 4.23
> > > > Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >
> >
> > --
> > http://hadley.nz
>
>
>
> --
> http://hadley.nz
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Fri Mar  8 10:03:06 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Fri, 8 Mar 2019 09:03:06 +0000
Subject: [R-pkg-devel] 
 Checking for future file timestamps - warning with
 worldclockapi HTTP status 403 Site Disabled
In-Reply-To: <CADVZz_rv0KQp-Hz5rLrNvKnfvCuuzH2R3Ly1mek20b3b2W4ubQ@mail.gmail.com>
References: <C1C13933-05A9-465B-AB76-8C0E637CC069@mailbox.org>
 <5422D390-AAC5-43B4-9EFE-01EE9A3DEB53@krugs.de>
 <4847AF76-FD39-4376-B943-FDB09D0EE539@rud.is>
 <2A749434-4EFA-4F92-B95C-4E1F9308C3AD@gmail.com>
 <8B1CCC41-567A-4FB3-A686-3E1EA37F3EB7@rud.is>
 <CABdHhvGK8oj9AyMZrheumJ7vshgUCF+PEbF8dfia-pv_8FxWHg@mail.gmail.com>
 <CABdHhvH+Zc_FZ1gAjOPgwyJ2eS-vgNSgAfamjYBaQdPTnLFXhw@mail.gmail.com>
 <CADVZz_rv0KQp-Hz5rLrNvKnfvCuuzH2R3Ly1mek20b3b2W4ubQ@mail.gmail.com>
Message-ID: <CABtg=KkCqvw=yB+bsMUMX8mkp0BxGzUB=ufdFgjOE5-_aGf7Eg@mail.gmail.com>

I think you can put this in appveyor.yml:

environment:
   _R_CHECK_SYSTEM_CLOCK_: 0

before the "build_script" section.

Gabor

On Fri, Mar 8, 2019 at 5:15 AM Marta Kara? <marta.karass at gmail.com> wrote:
>
> I have faced the same problem with using http://worldclockapi.com/. I dealt
> with Travis fail (because warnings are changed to errors) after setting
> environment variable _R_CHECK_SYSTEM_CLOCK_ to zero, as adviced above.
>
> How I deal with appveyor fail for the same reason? It may be seen in my
> built output here (link)
> <https://ci.appveyor.com/project/martakarass/adept/build/job/vq4ncvg6qbh526u4>.
> I googled but was unable to find the equivalent of
>
> env:
>   - _R_CHECK_SYSTEM_CLOCK_=0
>
>
> for appveyor. Would appreciate any hint a lot - thank you!
> Marta
>
> On Thu, Mar 7, 2019 at 2:53 PM Hadley Wickham <h.wickham at gmail.com> wrote:
>
> > As of ~7 hours ago, the warning is suppressed:
> >
> > https://github.com/wch/r-source/commit/31ee14c620eb1b939acd322f3b5617f998aab8e8
> >
> > (But the service still doesn't work)
> >
> > Hadley
> >
> > On Thu, Mar 7, 2019 at 11:03 AM Hadley Wickham <h.wickham at gmail.com>
> > wrote:
> > >
> > > It appears that the code was added by BDR on 2 Sep 2018:
> > >
> > https://github.com/wch/r-source/commit/d839b1e04e173f90b51ad809ef0bdb18095abe6f
> > >
> > > I assume we are seeing failing R CMD check results because
> > > http://worldclockapi.com/api/json/utc/now has recently died.
> > >
> > > It would be appreciated if someone from R-core could look into this as
> > > it's currently causing all R-devel builds on travis to fail.
> > >
> > > Hadley
> > >
> > > On Thu, Mar 7, 2019 at 9:32 AM Bob Rudis <bob at rud.is> wrote:
> > > >
> > > > (a) that's gd news (#ty)
> > > > (b) genuine apologies for my confusion
> > > > (c) why was the introduction of reliance on a third-party site even
> > under consideration?
> > > >
> > > > > On Mar 7, 2019, at 09:32, peter dalgaard <pdalgd at gmail.com> wrote:
> > > > >
> > > > > It's not "stealth fixed"! It was never there... (on the release
> > branch)
> > > > >
> > > > > The timestamp checking code is still present in R-devel. I presume
> > something needs to be done about the breakage.
> > > > >
> > > > > - pd
> > > > >
> > > > >> On 7 Mar 2019, at 14:38 , Bob Rudis <bob at rud.is> wrote:
> > > > >>
> > > > >> It's fixed in the RC that's GA on the 11th.
> > > > >>
> > > > >> I think perhaps "stealth fixed" may be more appropro since it's not
> > in SVN logs, Bugzilla nor noted prominently in any of the various NEWS*
> > files.
> > > > >>
> > > > >> Then there's the "why was the core R installation using a third
> > party, non-HTTPS site for this to begin with".
> > > > >>
> > > > >> And, in other news, there are tests in the R source that rely on a
> > check of `foo.bar` for connectivity. `.bar` is a valid domain and `foo.bar`
> > is registered. Thankfully there's no current IP address associated with it.
> > Anything under `*.invalid` (https://en.wikipedia.org/wiki/.invalid) might
> > be a better choice as well since that won't break the reason for the
> > connectivity checks and won't arbitrarily send telemetry pings to third
> > parties in the even anyone outside of R Core decides to run the tests (say,
> > when patching something in R).
> > > > >>
> > > > >> -boB
> > > > >>
> > > > >>> On Mar 7, 2019, at 07:54, Rainer M Krug <Rainer at krugs.de> wrote:
> > > > >>>
> > > > >>> I can confirm the same when checking on travis with r-devel.
> > > > >>>
> > > > >>> And thanks for the tip with
> > > > >>>
> > > > >>> env:
> > > > >>> - _R_CHECK_SYSTEM_CLOCK_=0
> > > > >>>
> > > > >>> In .travis.yml
> > > > >>>
> > > > >>> Seems to be working now
> > > > >>>
> > > > >>> Rainer
> > > > >>>
> > > > >>>
> > > > >>>
> > > > >>>> On 7 Mar 2019, at 12:48, Ralf Herold <ralf.herold at mailbox.org>
> > wrote:
> > > > >>>>
> > > > >>>> Dear All,
> > > > >>>>
> > > > >>>> Checking a new package under development produces a warning in a
> > local R-devel MS Windows environment (output below).
> > > > >>>>
> > > > >>>> Building it with R-devel on Travis fails (because warnings are
> > changed to errors), but is successful when setting environment variable
> > _R_CHECK_SYSTEM_CLOCK_ to zero.
> > > > >>>>
> > > > >>>> No issue occurs when checking and building with R-stable and
> > R-oldrel on Travis, or with any R version on win-builder.r-project.org.
> > > > >>>>
> > > > >>>> The warning concerns using http://worldclockapi.com/, which
> > however seems out of service ("The web app you have attempted to reach is
> > currently stopped and does not accept any requests."). This is referenced
> > in the main function for R CMD check (
> > https://svn.r-project.org/R/trunk/src/library/tools/R/check.R) and may
> > concern more R-devel than R-package-devel. I am posting here to check if
> > the issue was noticed by other package developers and to check the impact.
> > > > >>>>
> > > > >>>> Thanks for any suggestions.
> > > > >>>> Best regards,
> > > > >>>> Ralf
> > > > >>>>
> > > > >>>>
> > > > >>>> PS C:\Users\username> & 'C:\Program Files\R\R-devel\bin\R.exe'
> > CMD check E:\mypackage_0.1.2.3.tar.gz --as-cran
> > > > >>>> * using log directory 'C:/Users/username/ctrdata.Rcheck'
> > > > >>>> * using R Under development (unstable) (2019-03-05 r76200)
> > > > >>>> * using platform: x86_64-w64-mingw32 (64-bit)
> > > > >>>> * using session charset: ISO8859-1
> > > > >>>> * using option '--as-cran'
> > > > >>>> [...]
> > > > >>>> * checking package directory ... OK
> > > > >>>> * checking for future file timestamps ...Warning in file(con,
> > "r") :
> > > > >>>> cannot open URL 'http://worldclockapi.com/api/json/utc/now':
> > HTTP status was '403 Site Disabled'
> > > > >>>> WARNING
> > > > >>>> unable to verify current time
> > > > >>>> * checking 'build' directory ? OK
> > > > >>>> [...]
> > > > >>>>
> > > > >>>>
> > > > >>>>
> > > > >>>> ## Ralf Herold
> > > > >>>> ## mailto: ralf.herold at mailbox.org [S/MIME]
> > > > >>>> ## https://paediatricdata.eu/
> > > > >>>>
> > > > >>>> ______________________________________________
> > > > >>>> R-package-devel at r-project.org mailing list
> > > > >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > > > >>>
> > > > >>>
> > > > >>>
> > > > >>>
> > > > >>> --
> > > > >>> Rainer M. Krug
> > > > >>> email: Rainer<at>krugs<dot>de
> > > > >>> PGP: 0x0F52F982
> > > > >>>
> > > > >>>
> > > > >>>     [[alternative HTML version deleted]]
> > > > >>>
> > > > >>> ______________________________________________
> > > > >>> R-package-devel at r-project.org mailing list
> > > > >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > > > >>
> > > > >> ______________________________________________
> > > > >> R-package-devel at r-project.org mailing list
> > > > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > > > >
> > > > > --
> > > > > Peter Dalgaard, Professor,
> > > > > Center for Statistics, Copenhagen Business School
> > > > > Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> > > > > Phone: (+45)38153501
> > > > > Office: A 4.23
> > > > > Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > >
> > > > ______________________________________________
> > > > R-package-devel at r-project.org mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> > >
> > >
> > > --
> > > http://hadley.nz
> >
> >
> >
> > --
> > http://hadley.nz
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From w@ngz1 @end|ng |rom uth@c@@@edu  Fri Mar  8 18:55:59 2019
From: w@ngz1 @end|ng |rom uth@c@@@edu (Wang, Zhu)
Date: Fri, 8 Mar 2019 17:55:59 +0000
Subject: [R-pkg-devel] compute pnorm in Fortran subroutine in R package
Message-ID: <0f40a5c3bb71450cb3886a7ac272cc1e@EX-MCD-1.win.uthscsa.edu>

Hello,

In my R package I would like a Fortran subroutine to compute the same value as pnorm does in R. I didn't find out an existing Fortran pnorm subroutine. Perhaps a Fortran subroutine can somehow call R function pnorm, but I would like advice on how to do this correctly.

Many thanks!

Zhu Wang

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Mar  8 20:31:57 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 8 Mar 2019 14:31:57 -0500
Subject: [R-pkg-devel] compute pnorm in Fortran subroutine in R package
In-Reply-To: <0f40a5c3bb71450cb3886a7ac272cc1e@EX-MCD-1.win.uthscsa.edu>
References: <0f40a5c3bb71450cb3886a7ac272cc1e@EX-MCD-1.win.uthscsa.edu>
Message-ID: <472ae42b-ebc8-dbd4-8656-cc6ec52149b9@gmail.com>

On 08/03/2019 12:55 p.m., Wang, Zhu wrote:
> Hello,
> 
> In my R package I would like a Fortran subroutine to compute the same value as pnorm does in R. I didn't find out an existing Fortran pnorm subroutine. Perhaps a Fortran subroutine can somehow call R function pnorm, but I would like advice on how to do this correctly.

This is described in the Writing R Extensions manual, Ch 6, The R API: 
entry points for C code.  As the title suggests, it's mainly written for 
calling things like pnorm() from C, but section 6.6 talks about calling 
C functions from Fortran.

You probably also have the erf() function available in Fortran; it's a 
linear transformation of pnorm().  That is,

   erf(x) = 2*pnorm(x*sqrt(2)) - 1

Duncan Murdoch


From w@ngz1 @end|ng |rom uth@c@@@edu  Fri Mar  8 21:01:01 2019
From: w@ngz1 @end|ng |rom uth@c@@@edu (Wang, Zhu)
Date: Fri, 8 Mar 2019 20:01:01 +0000
Subject: [R-pkg-devel] compute pnorm in Fortran subroutine in R package
In-Reply-To: <472ae42b-ebc8-dbd4-8656-cc6ec52149b9@gmail.com>
References: <0f40a5c3bb71450cb3886a7ac272cc1e@EX-MCD-1.win.uthscsa.edu>
 <472ae42b-ebc8-dbd4-8656-cc6ec52149b9@gmail.com>
Message-ID: <225c39f475db422994a797cfe1fc39c2@EX-MCD-1.win.uthscsa.edu>

Thanks for the useful tips!

-----Original Message-----
From: Duncan Murdoch <murdoch.duncan at gmail.com> 
Sent: Friday, March 8, 2019 1:32 PM
To: Wang, Zhu <wangz1 at uthscsa.edu>; R-package-devel at r-project.org
Subject: Re: [R-pkg-devel] compute pnorm in Fortran subroutine in R package

On 08/03/2019 12:55 p.m., Wang, Zhu wrote:
> Hello,
> 
> In my R package I would like a Fortran subroutine to compute the same value as pnorm does in R. I didn't find out an existing Fortran pnorm subroutine. Perhaps a Fortran subroutine can somehow call R function pnorm, but I would like advice on how to do this correctly.

This is described in the Writing R Extensions manual, Ch 6, The R API: 
entry points for C code.  As the title suggests, it's mainly written for calling things like pnorm() from C, but section 6.6 talks about calling C functions from Fortran.

You probably also have the erf() function available in Fortran; it's a linear transformation of pnorm().  That is,

   erf(x) = 2*pnorm(x*sqrt(2)) - 1

Duncan Murdoch

From Roger@B|v@nd @end|ng |rom nhh@no  Sat Mar  9 15:06:23 2019
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Sat, 9 Mar 2019 15:06:23 +0100
Subject: [R-pkg-devel] Analysing namespace reverse dependencies
Message-ID: <alpine.LFD.2.21.1903091455510.15126@reclus.nhh.no>

Hi,

Is anyone aware of tools permitting the listing of functions in the 
namespace of package A used by package B when package B declares that it 
depends on A, suggests A, or imports(A) without specifying the functions 
from A that B is using? If B imports functions from A, and uses 
importsFrom() in its NAMESPACE, the information can be recovered by 
inspecting its NAMESPACE file (assuming that the entries are correct), but 
not otherwise.

Grateful for any pointers,

Roger

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From |uc@r @end|ng |rom |edor@project@org  Sat Mar  9 17:26:40 2019
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Sat, 9 Mar 2019 17:26:40 +0100
Subject: [R-pkg-devel] Analysing namespace reverse dependencies
In-Reply-To: <alpine.LFD.2.21.1903091455510.15126@reclus.nhh.no>
References: <alpine.LFD.2.21.1903091455510.15126@reclus.nhh.no>
Message-ID: <CALEXWq3PQZJAZvswXixNB2b3AbvEJMdUTpg=UF2Y6=W6ijbnFA@mail.gmail.com>

On Sat, 9 Mar 2019 at 15:07, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>
> Hi,
>
> Is anyone aware of tools permitting the listing of functions in the
> namespace of package A used by package B when package B declares that it
> depends on A, suggests A, or imports(A) without specifying the functions
> from A that B is using? If B imports functions from A, and uses
> importsFrom() in its NAMESPACE, the information can be recovered by
> inspecting its NAMESPACE file (assuming that the entries are correct), but
> not otherwise.

I don't know of any specific tool, but the following function may help:

inspect_functions <- function(pkg, from) {
  regex <- paste0("(", paste(from, collapse="|"), ")::[[:alnum:]._]*")
  ns <- getNamespace(pkg)
  x <- sapply(ls(ns, all.names=TRUE), function(x) {
    f <- get(x, envir=ns)
    if (!is.function(f))
      return(NULL)
    b <- unlist(strsplit(as.character(body(f)), "\n"))
    unique(regmatches(b, regexpr(regex, b)))
  })
  x[sapply(x, Negate(length))] <- NULL
  x
}

Example:

inspect_functions("units", c("pillar", "xml2"))
#> $.read_ud_db
#> [1] "xml2::read_xml"
#>
#> $.read_ud_db_symbols
#> [1] "xml2::read_xml"     "xml2::xml_find_all" "xml2::xml_contents"
#>
#> $.ud_db_xml_list_as_dataframe
#> [1] "xml2::xml_children" "xml2::xml_length"   "xml2::xml_find_all"
#> [4] "xml2::xml_text"
#>
#> $format_type_sum.type_sum_units
#> [1] "pillar::style_subtle"
#>
#> $pillar_shaft.mixed_units
#> [1] "pillar::new_pillar_shaft_simple"
#>
#> $pillar_shaft.units
#> [1] "pillar::new_pillar_shaft_simple"
#>
#> $valid_udunits_prefixes
#> [1] "xml2::xml_children" "xml2::xml_find_all" "xml2::xml_text"
#> [4] "xml2::xml_double"

I?aki


From c@@rd|@g@bor @end|ng |rom gm@||@com  Sat Mar  9 18:30:59 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Sat, 9 Mar 2019 17:30:59 +0000
Subject: [R-pkg-devel] Analysing namespace reverse dependencies
In-Reply-To: <alpine.LFD.2.21.1903091455510.15126@reclus.nhh.no>
References: <alpine.LFD.2.21.1903091455510.15126@reclus.nhh.no>
Message-ID: <CABtg=KkSi2bcahzA1g3W91uLKnk6XHfs+7KbFALNrSsMDJGhRg@mail.gmail.com>

https://github.com/r-lib/pkgapi has map_package() which will list all
the functions of a package, where they were defined, and also all
function calls, internal ones and calls to external packages as well:

map <- pkgapi::map_package("~/works/processx")
names(map)
#> [1] "name"    "exports" "defs"    "calls"

head(map$calls, 3)
#>               file        from                 to type
#> 1 R/aaassertthat.R assert_that base::parent.frame call
#> 2 R/aaassertthat.R assert_that   processx::see_if call
#> 3 R/aaassertthat.R assert_that       base::return call
#>   line1 line2 col1 col2          str
#> 1     2     2   36   47 parent.frame
#> 2     3     3   10   15       see_if
#> 3     4     4   12   17       return

Because of the dynamic nature of the language, some false negatives,
and maybe even false positives might happen.

Gabor

On Sat, Mar 9, 2019 at 2:06 PM Roger Bivand <Roger.Bivand at nhh.no> wrote:
>
> Hi,
>
> Is anyone aware of tools permitting the listing of functions in the
> namespace of package A used by package B when package B declares that it
> depends on A, suggests A, or imports(A) without specifying the functions
> from A that B is using? If B imports functions from A, and uses
> importsFrom() in its NAMESPACE, the information can be recovered by
> inspecting its NAMESPACE file (assuming that the entries are correct), but
> not otherwise.
>
> Grateful for any pointers,
>
> Roger
>
> --
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> https://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From Roger@B|v@nd @end|ng |rom nhh@no  Sun Mar 10 20:33:12 2019
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Sun, 10 Mar 2019 20:33:12 +0100
Subject: [R-pkg-devel] Analysing namespace reverse dependencies
In-Reply-To: <CALEXWq3PQZJAZvswXixNB2b3AbvEJMdUTpg=UF2Y6=W6ijbnFA@mail.gmail.com>
References: <alpine.LFD.2.21.1903091455510.15126@reclus.nhh.no>
 <CALEXWq3PQZJAZvswXixNB2b3AbvEJMdUTpg=UF2Y6=W6ijbnFA@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1903102025370.28458@reclus.nhh.no>

On Sat, 9 Mar 2019, I?aki Ucar wrote:

> On Sat, 9 Mar 2019 at 15:07, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>>
>> Hi,
>>
>> Is anyone aware of tools permitting the listing of functions in the
>> namespace of package A used by package B when package B declares that it
>> depends on A, suggests A, or imports(A) without specifying the functions
>> from A that B is using? If B imports functions from A, and uses
>> importsFrom() in its NAMESPACE, the information can be recovered by
>> inspecting its NAMESPACE file (assuming that the entries are correct), but
>> not otherwise.
>
> I don't know of any specific tool, but the following function may help:
>
> inspect_functions <- function(pkg, from) {
>  regex <- paste0("(", paste(from, collapse="|"), ")::[[:alnum:]._]*")
>  ns <- getNamespace(pkg)
>  x <- sapply(ls(ns, all.names=TRUE), function(x) {
>    f <- get(x, envir=ns)
>    if (!is.function(f))
>      return(NULL)
>    b <- unlist(strsplit(as.character(body(f)), "\n"))
>    unique(regmatches(b, regexpr(regex, b)))
>  })
>  x[sapply(x, Negate(length))] <- NULL
>  x
> }

Thanks! This gives function calls directly using inspect_functions("B", 
"A"), but as of now does not catch methods, which are reported by 
pkgapi::map_package(). Very useful to compare insights!

Roger

>
> Example:
>
> inspect_functions("units", c("pillar", "xml2"))
> #> $.read_ud_db
> #> [1] "xml2::read_xml"
> #>
> #> $.read_ud_db_symbols
> #> [1] "xml2::read_xml"     "xml2::xml_find_all" "xml2::xml_contents"
> #>
> #> $.ud_db_xml_list_as_dataframe
> #> [1] "xml2::xml_children" "xml2::xml_length"   "xml2::xml_find_all"
> #> [4] "xml2::xml_text"
> #>
> #> $format_type_sum.type_sum_units
> #> [1] "pillar::style_subtle"
> #>
> #> $pillar_shaft.mixed_units
> #> [1] "pillar::new_pillar_shaft_simple"
> #>
> #> $pillar_shaft.units
> #> [1] "pillar::new_pillar_shaft_simple"
> #>
> #> $valid_udunits_prefixes
> #> [1] "xml2::xml_children" "xml2::xml_find_all" "xml2::xml_text"
> #> [4] "xml2::xml_double"
>
> I?aki
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From Roger@B|v@nd @end|ng |rom nhh@no  Sun Mar 10 20:45:30 2019
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Sun, 10 Mar 2019 20:45:30 +0100
Subject: [R-pkg-devel] Analysing namespace reverse dependencies
In-Reply-To: <CABtg=KkSi2bcahzA1g3W91uLKnk6XHfs+7KbFALNrSsMDJGhRg@mail.gmail.com>
References: <alpine.LFD.2.21.1903091455510.15126@reclus.nhh.no>
 <CABtg=KkSi2bcahzA1g3W91uLKnk6XHfs+7KbFALNrSsMDJGhRg@mail.gmail.com>
Message-ID: <alpine.LFD.2.21.1903102014420.28458@reclus.nhh.no>

On Sat, 9 Mar 2019, G?bor Cs?rdi wrote:

> https://github.com/r-lib/pkgapi has map_package() which will list all
> the functions of a package, where they were defined, and also all
> function calls, internal ones and calls to external packages as well:
>
> map <- pkgapi::map_package("~/works/processx")
> names(map)
> #> [1] "name"    "exports" "defs"    "calls"
>
> head(map$calls, 3)
> #>               file        from                 to type
> #> 1 R/aaassertthat.R assert_that base::parent.frame call
> #> 2 R/aaassertthat.R assert_that   processx::see_if call
> #> 3 R/aaassertthat.R assert_that       base::return call
> #>   line1 line2 col1 col2          str
> #> 1     2     2   36   47 parent.frame
> #> 2     3     3   10   15       see_if
> #> 3     4     4   12   17       return

Thanks, this gives a grepable character vector in map$calls$to from which 
I can search for "A::" among the namespaces listed. The function returns 
S3 methods (I think - some are written in full in the "B" code). I'm not 
sure about S4 methods or class definitions. However, I'm much further 
forward, again, thanks!

Roger



>
> Because of the dynamic nature of the language, some false negatives,
> and maybe even false positives might happen.
>
> Gabor
>
> On Sat, Mar 9, 2019 at 2:06 PM Roger Bivand <Roger.Bivand at nhh.no> wrote:
>>
>> Hi,
>>
>> Is anyone aware of tools permitting the listing of functions in the
>> namespace of package A used by package B when package B declares that it
>> depends on A, suggests A, or imports(A) without specifying the functions
>> from A that B is using? If B imports functions from A, and uses
>> importsFrom() in its NAMESPACE, the information can be recovered by
>> inspecting its NAMESPACE file (assuming that the entries are correct), but
>> not otherwise.
>>
>> Grateful for any pointers,
>>
>> Roger
>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>> https://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From ec@c@rv@ @end|ng |rom gm@||@com  Mon Mar 11 14:53:21 2019
From: ec@c@rv@ @end|ng |rom gm@||@com (Elias Carvalho)
Date: Mon, 11 Mar 2019 10:53:21 -0300
Subject: [R-pkg-devel] Calls not declared
Message-ID: <CAH8E6UvUj94cf+4rRxktGpUbgYYRnKo8But6QJ3WKaseKG+LqQ@mail.gmail.com>

I am developing my first package and found these errors when checking it.

Any help?


* checking dependencies in R code ... WARNING
'library' or 'require' calls not declared from:
  ?qgraph? ?semPlot? ?sna? ?xlsx?


-- 


*In Jesu et Maria*
*Obrigado*
*Prof. Elias Carvalho*

*"Felix, qui potuit rerum cognoscere causas" (Virgil 29 BC)"Blessed is he
who has been able to understand the cause of things"*

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Mar 11 16:19:33 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 11 Mar 2019 11:19:33 -0400
Subject: [R-pkg-devel] Calls not declared
In-Reply-To: <CAH8E6UvUj94cf+4rRxktGpUbgYYRnKo8But6QJ3WKaseKG+LqQ@mail.gmail.com>
References: <CAH8E6UvUj94cf+4rRxktGpUbgYYRnKo8But6QJ3WKaseKG+LqQ@mail.gmail.com>
Message-ID: <3d34fe1b-954b-a642-9a59-c5409965bc8b@gmail.com>

On 11/03/2019 9:53 a.m., Elias Carvalho wrote:
> I am developing my first package and found these errors when checking it.
> 
> Any help?
> 
> 
> * checking dependencies in R code ... WARNING
> 'library' or 'require' calls not declared from:
>    ?qgraph? ?semPlot? ?sna? ?xlsx?

Without seeing your package I might be wrong, but I believe this says 
that you have something like

library(qgraph)

somewhere in your R code, without listing

Depends: qgraph

in your DESCRIPTION file.

HOWEVER, fixing this warning will lead to a different one, because 
that's not the recommended way to do things now.  There are two 
possibilities:

1.  Your package is useless without the dependency.

In this case, you should put

Imports:  qgraph, ...

in the DESCRIPTION file (where ... lists the other packages with the 
same status), and list the functions in those packages in your NAMESPACE 
file, using

importFrom(qgraph, ...)

etc.  (If you use Roxygen, you use comments in the source to get it to 
put this into your NAMESPACE file.)

2.  Your package works without the dependency, but you may want to issue 
errors or warnings if it is missing.

Then you should put

Suggests:  qgraph, ...

in the DESCRIPTION file, and to use a function from it, use something like

if (requireNamespace("qgraph")) {
   qgraph::foo(...)
} else
   warning("qgraph is not available.")

Duncan Murdoch


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Mar 11 16:32:52 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 11 Mar 2019 08:32:52 -0700
Subject: [R-pkg-devel] Calls not declared
In-Reply-To: <3d34fe1b-954b-a642-9a59-c5409965bc8b@gmail.com>
References: <CAH8E6UvUj94cf+4rRxktGpUbgYYRnKo8But6QJ3WKaseKG+LqQ@mail.gmail.com>
 <3d34fe1b-954b-a642-9a59-c5409965bc8b@gmail.com>
Message-ID: <D174E77C-6143-4F73-A5E1-5B76C7259E8D@dcn.davis.ca.us>

I did not see any mention of the distinction between Depends and Imports in the DESCRIPTION file... which is always a risk when duplicating existing documentation in an email. Imports is preferred because the user does not have to put definitions only needed inside your package into their public search path (easier to make under-the-hood changes to the package implementation), but Depends is better when they cannot make use of your package without those definitions (e.g. you return a ggplot object from one of your functions).

So do keep reading the documentation... email is just a kickstart.

On March 11, 2019 8:19:33 AM PDT, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>On 11/03/2019 9:53 a.m., Elias Carvalho wrote:
>> I am developing my first package and found these errors when checking
>it.
>> 
>> Any help?
>> 
>> 
>> * checking dependencies in R code ... WARNING
>> 'library' or 'require' calls not declared from:
>>    ?qgraph? ?semPlot? ?sna? ?xlsx?
>
>Without seeing your package I might be wrong, but I believe this says 
>that you have something like
>
>library(qgraph)
>
>somewhere in your R code, without listing
>
>Depends: qgraph
>
>in your DESCRIPTION file.
>
>HOWEVER, fixing this warning will lead to a different one, because 
>that's not the recommended way to do things now.  There are two 
>possibilities:
>
>1.  Your package is useless without the dependency.
>
>In this case, you should put
>
>Imports:  qgraph, ...
>
>in the DESCRIPTION file (where ... lists the other packages with the 
>same status), and list the functions in those packages in your
>NAMESPACE 
>file, using
>
>importFrom(qgraph, ...)
>
>etc.  (If you use Roxygen, you use comments in the source to get it to 
>put this into your NAMESPACE file.)
>
>2.  Your package works without the dependency, but you may want to
>issue 
>errors or warnings if it is missing.
>
>Then you should put
>
>Suggests:  qgraph, ...
>
>in the DESCRIPTION file, and to use a function from it, use something
>like
>
>if (requireNamespace("qgraph")) {
>   qgraph::foo(...)
>} else
>   warning("qgraph is not available.")
>
>Duncan Murdoch
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Mar 11 18:07:12 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 11 Mar 2019 13:07:12 -0400
Subject: [R-pkg-devel] Calls not declared
In-Reply-To: <D174E77C-6143-4F73-A5E1-5B76C7259E8D@dcn.davis.ca.us>
References: <CAH8E6UvUj94cf+4rRxktGpUbgYYRnKo8But6QJ3WKaseKG+LqQ@mail.gmail.com>
 <3d34fe1b-954b-a642-9a59-c5409965bc8b@gmail.com>
 <D174E77C-6143-4F73-A5E1-5B76C7259E8D@dcn.davis.ca.us>
Message-ID: <bc77727c-4871-fc31-0847-323ac459849b@gmail.com>

On 11/03/2019 11:32 a.m., Jeff Newmiller wrote:
> I did not see any mention of the distinction between Depends and Imports in the DESCRIPTION file... which is always a risk when duplicating existing documentation in an email. Imports is preferred because the user does not have to put definitions only needed inside your package into their public search path (easier to make under-the-hood changes to the package implementation), but Depends is better when they cannot make use of your package without those definitions (e.g. you return a ggplot object from one of your functions).
> 

You don't need Depends to be able to handle ggplot2 objects. You'll get 
the methods when the package is loaded, so they'll print fine without 
having ggplot2 on the search list.

There are very few cases nowadays where it makes sense to use Depends.

Duncan Murdoch

> So do keep reading the documentation... email is just a kickstart.
> 
> On March 11, 2019 8:19:33 AM PDT, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>> On 11/03/2019 9:53 a.m., Elias Carvalho wrote:
>>> I am developing my first package and found these errors when checking
>> it.
>>>
>>> Any help?
>>>
>>>
>>> * checking dependencies in R code ... WARNING
>>> 'library' or 'require' calls not declared from:
>>>     ?qgraph? ?semPlot? ?sna? ?xlsx?
>>
>> Without seeing your package I might be wrong, but I believe this says
>> that you have something like
>>
>> library(qgraph)
>>
>> somewhere in your R code, without listing
>>
>> Depends: qgraph
>>
>> in your DESCRIPTION file.
>>
>> HOWEVER, fixing this warning will lead to a different one, because
>> that's not the recommended way to do things now.  There are two
>> possibilities:
>>
>> 1.  Your package is useless without the dependency.
>>
>> In this case, you should put
>>
>> Imports:  qgraph, ...
>>
>> in the DESCRIPTION file (where ... lists the other packages with the
>> same status), and list the functions in those packages in your
>> NAMESPACE
>> file, using
>>
>> importFrom(qgraph, ...)
>>
>> etc.  (If you use Roxygen, you use comments in the source to get it to
>> put this into your NAMESPACE file.)
>>
>> 2.  Your package works without the dependency, but you may want to
>> issue
>> errors or warnings if it is missing.
>>
>> Then you should put
>>
>> Suggests:  qgraph, ...
>>
>> in the DESCRIPTION file, and to use a function from it, use something
>> like
>>
>> if (requireNamespace("qgraph")) {
>>    qgraph::foo(...)
>> } else
>>    warning("qgraph is not available.")
>>
>> Duncan Murdoch
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Mar 11 19:12:58 2019
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 11 Mar 2019 11:12:58 -0700
Subject: [R-pkg-devel] Calls not declared
In-Reply-To: <bc77727c-4871-fc31-0847-323ac459849b@gmail.com>
References: <CAH8E6UvUj94cf+4rRxktGpUbgYYRnKo8But6QJ3WKaseKG+LqQ@mail.gmail.com>
 <3d34fe1b-954b-a642-9a59-c5409965bc8b@gmail.com>
 <D174E77C-6143-4F73-A5E1-5B76C7259E8D@dcn.davis.ca.us>
 <bc77727c-4871-fc31-0847-323ac459849b@gmail.com>
Message-ID: <8D0FB289-0DD3-4F5D-B8AE-9059237252DB@dcn.davis.ca.us>

Ah, so as long as you don't need to call a normal function to make use of the returned object you don't need Depends. But in this example, the user would then need to call library(ggplot2) in order to, say, change an axis title.

A bit more subtle than I thought.

On March 11, 2019 10:07:12 AM PDT, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>On 11/03/2019 11:32 a.m., Jeff Newmiller wrote:
>> I did not see any mention of the distinction between Depends and
>Imports in the DESCRIPTION file... which is always a risk when
>duplicating existing documentation in an email. Imports is preferred
>because the user does not have to put definitions only needed inside
>your package into their public search path (easier to make
>under-the-hood changes to the package implementation), but Depends is
>better when they cannot make use of your package without those
>definitions (e.g. you return a ggplot object from one of your
>functions).
>> 
>
>You don't need Depends to be able to handle ggplot2 objects. You'll get
>
>the methods when the package is loaded, so they'll print fine without 
>having ggplot2 on the search list.
>
>There are very few cases nowadays where it makes sense to use Depends.
>
>Duncan Murdoch
>
>> So do keep reading the documentation... email is just a kickstart.
>> 
>> On March 11, 2019 8:19:33 AM PDT, Duncan Murdoch
><murdoch.duncan at gmail.com> wrote:
>>> On 11/03/2019 9:53 a.m., Elias Carvalho wrote:
>>>> I am developing my first package and found these errors when
>checking
>>> it.
>>>>
>>>> Any help?
>>>>
>>>>
>>>> * checking dependencies in R code ... WARNING
>>>> 'library' or 'require' calls not declared from:
>>>>     ?qgraph? ?semPlot? ?sna? ?xlsx?
>>>
>>> Without seeing your package I might be wrong, but I believe this
>says
>>> that you have something like
>>>
>>> library(qgraph)
>>>
>>> somewhere in your R code, without listing
>>>
>>> Depends: qgraph
>>>
>>> in your DESCRIPTION file.
>>>
>>> HOWEVER, fixing this warning will lead to a different one, because
>>> that's not the recommended way to do things now.  There are two
>>> possibilities:
>>>
>>> 1.  Your package is useless without the dependency.
>>>
>>> In this case, you should put
>>>
>>> Imports:  qgraph, ...
>>>
>>> in the DESCRIPTION file (where ... lists the other packages with the
>>> same status), and list the functions in those packages in your
>>> NAMESPACE
>>> file, using
>>>
>>> importFrom(qgraph, ...)
>>>
>>> etc.  (If you use Roxygen, you use comments in the source to get it
>to
>>> put this into your NAMESPACE file.)
>>>
>>> 2.  Your package works without the dependency, but you may want to
>>> issue
>>> errors or warnings if it is missing.
>>>
>>> Then you should put
>>>
>>> Suggests:  qgraph, ...
>>>
>>> in the DESCRIPTION file, and to use a function from it, use
>something
>>> like
>>>
>>> if (requireNamespace("qgraph")) {
>>>    qgraph::foo(...)
>>> } else
>>>    warning("qgraph is not available.")
>>>
>>> Duncan Murdoch
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 

-- 
Sent from my phone. Please excuse my brevity.


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Mar 11 20:18:28 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 11 Mar 2019 15:18:28 -0400
Subject: [R-pkg-devel] Calls not declared
In-Reply-To: <8D0FB289-0DD3-4F5D-B8AE-9059237252DB@dcn.davis.ca.us>
References: <CAH8E6UvUj94cf+4rRxktGpUbgYYRnKo8But6QJ3WKaseKG+LqQ@mail.gmail.com>
 <3d34fe1b-954b-a642-9a59-c5409965bc8b@gmail.com>
 <D174E77C-6143-4F73-A5E1-5B76C7259E8D@dcn.davis.ca.us>
 <bc77727c-4871-fc31-0847-323ac459849b@gmail.com>
 <8D0FB289-0DD3-4F5D-B8AE-9059237252DB@dcn.davis.ca.us>
Message-ID: <28f31196-56ff-65db-9242-38687a28df54@gmail.com>

On 11/03/2019 2:12 p.m., Jeff Newmiller wrote:
> Ah, so as long as you don't need to call a normal function to make use of the returned object you don't need Depends. But in this example, the user would then need to call library(ggplot2) in order to, say, change an axis title.

I think the current philosophy is that if a user wants to be able to use 
ggplot2 functions, the user should ask for them, they shouldn't be 
automagically added to the search list.  If a user wants to change the 
axis title and doesn't want to have ggplot2 on their search list, that 
is definitely possible:

ggplot2::qplot(1:10, 1:10) + ggplot2::xlab("new x label")

Duncan Murdoch


> A bit more subtle than I thought.
> 
> On March 11, 2019 10:07:12 AM PDT, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>> On 11/03/2019 11:32 a.m., Jeff Newmiller wrote:
>>> I did not see any mention of the distinction between Depends and
>> Imports in the DESCRIPTION file... which is always a risk when
>> duplicating existing documentation in an email. Imports is preferred
>> because the user does not have to put definitions only needed inside
>> your package into their public search path (easier to make
>> under-the-hood changes to the package implementation), but Depends is
>> better when they cannot make use of your package without those
>> definitions (e.g. you return a ggplot object from one of your
>> functions).
>>>
>>
>> You don't need Depends to be able to handle ggplot2 objects. You'll get
>>
>> the methods when the package is loaded, so they'll print fine without
>> having ggplot2 on the search list.
>>
>> There are very few cases nowadays where it makes sense to use Depends.
>>
>> Duncan Murdoch
>>
>>> So do keep reading the documentation... email is just a kickstart.
>>>
>>> On March 11, 2019 8:19:33 AM PDT, Duncan Murdoch
>> <murdoch.duncan at gmail.com> wrote:
>>>> On 11/03/2019 9:53 a.m., Elias Carvalho wrote:
>>>>> I am developing my first package and found these errors when
>> checking
>>>> it.
>>>>>
>>>>> Any help?
>>>>>
>>>>>
>>>>> * checking dependencies in R code ... WARNING
>>>>> 'library' or 'require' calls not declared from:
>>>>>      ?qgraph? ?semPlot? ?sna? ?xlsx?
>>>>
>>>> Without seeing your package I might be wrong, but I believe this
>> says
>>>> that you have something like
>>>>
>>>> library(qgraph)
>>>>
>>>> somewhere in your R code, without listing
>>>>
>>>> Depends: qgraph
>>>>
>>>> in your DESCRIPTION file.
>>>>
>>>> HOWEVER, fixing this warning will lead to a different one, because
>>>> that's not the recommended way to do things now.  There are two
>>>> possibilities:
>>>>
>>>> 1.  Your package is useless without the dependency.
>>>>
>>>> In this case, you should put
>>>>
>>>> Imports:  qgraph, ...
>>>>
>>>> in the DESCRIPTION file (where ... lists the other packages with the
>>>> same status), and list the functions in those packages in your
>>>> NAMESPACE
>>>> file, using
>>>>
>>>> importFrom(qgraph, ...)
>>>>
>>>> etc.  (If you use Roxygen, you use comments in the source to get it
>> to
>>>> put this into your NAMESPACE file.)
>>>>
>>>> 2.  Your package works without the dependency, but you may want to
>>>> issue
>>>> errors or warnings if it is missing.
>>>>
>>>> Then you should put
>>>>
>>>> Suggests:  qgraph, ...
>>>>
>>>> in the DESCRIPTION file, and to use a function from it, use
>> something
>>>> like
>>>>
>>>> if (requireNamespace("qgraph")) {
>>>>     qgraph::foo(...)
>>>> } else
>>>>     warning("qgraph is not available.")
>>>>
>>>> Duncan Murdoch
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>


From ec@c@rv@ @end|ng |rom gm@||@com  Mon Mar 11 20:40:06 2019
From: ec@c@rv@ @end|ng |rom gm@||@com (Elias Carvalho)
Date: Mon, 11 Mar 2019 16:40:06 -0300
Subject: [R-pkg-devel] Calls not declared
In-Reply-To: <28f31196-56ff-65db-9242-38687a28df54@gmail.com>
References: <CAH8E6UvUj94cf+4rRxktGpUbgYYRnKo8But6QJ3WKaseKG+LqQ@mail.gmail.com>
 <3d34fe1b-954b-a642-9a59-c5409965bc8b@gmail.com>
 <D174E77C-6143-4F73-A5E1-5B76C7259E8D@dcn.davis.ca.us>
 <bc77727c-4871-fc31-0847-323ac459849b@gmail.com>
 <8D0FB289-0DD3-4F5D-B8AE-9059237252DB@dcn.davis.ca.us>
 <28f31196-56ff-65db-9242-38687a28df54@gmail.com>
Message-ID: <CAH8E6Uta_jytVS=di2azngkd7iGWAE3yzcv1JnR5A-YrFCh0LA@mail.gmail.com>

Thank you all !
I used import and works perfectly.

Em seg, 11 de mar de 2019 ?s 16:18, Duncan Murdoch <murdoch.duncan at gmail.com>
escreveu:

> On 11/03/2019 2:12 p.m., Jeff Newmiller wrote:
> > Ah, so as long as you don't need to call a normal function to make use
> of the returned object you don't need Depends. But in this example, the
> user would then need to call library(ggplot2) in order to, say, change an
> axis title.
>
> I think the current philosophy is that if a user wants to be able to use
> ggplot2 functions, the user should ask for them, they shouldn't be
> automagically added to the search list.  If a user wants to change the
> axis title and doesn't want to have ggplot2 on their search list, that
> is definitely possible:
>
> ggplot2::qplot(1:10, 1:10) + ggplot2::xlab("new x label")
>
> Duncan Murdoch
>
>
> > A bit more subtle than I thought.
> >
> > On March 11, 2019 10:07:12 AM PDT, Duncan Murdoch <
> murdoch.duncan at gmail.com> wrote:
> >> On 11/03/2019 11:32 a.m., Jeff Newmiller wrote:
> >>> I did not see any mention of the distinction between Depends and
> >> Imports in the DESCRIPTION file... which is always a risk when
> >> duplicating existing documentation in an email. Imports is preferred
> >> because the user does not have to put definitions only needed inside
> >> your package into their public search path (easier to make
> >> under-the-hood changes to the package implementation), but Depends is
> >> better when they cannot make use of your package without those
> >> definitions (e.g. you return a ggplot object from one of your
> >> functions).
> >>>
> >>
> >> You don't need Depends to be able to handle ggplot2 objects. You'll get
> >>
> >> the methods when the package is loaded, so they'll print fine without
> >> having ggplot2 on the search list.
> >>
> >> There are very few cases nowadays where it makes sense to use Depends.
> >>
> >> Duncan Murdoch
> >>
> >>> So do keep reading the documentation... email is just a kickstart.
> >>>
> >>> On March 11, 2019 8:19:33 AM PDT, Duncan Murdoch
> >> <murdoch.duncan at gmail.com> wrote:
> >>>> On 11/03/2019 9:53 a.m., Elias Carvalho wrote:
> >>>>> I am developing my first package and found these errors when
> >> checking
> >>>> it.
> >>>>>
> >>>>> Any help?
> >>>>>
> >>>>>
> >>>>> * checking dependencies in R code ... WARNING
> >>>>> 'library' or 'require' calls not declared from:
> >>>>>      ?qgraph? ?semPlot? ?sna? ?xlsx?
> >>>>
> >>>> Without seeing your package I might be wrong, but I believe this
> >> says
> >>>> that you have something like
> >>>>
> >>>> library(qgraph)
> >>>>
> >>>> somewhere in your R code, without listing
> >>>>
> >>>> Depends: qgraph
> >>>>
> >>>> in your DESCRIPTION file.
> >>>>
> >>>> HOWEVER, fixing this warning will lead to a different one, because
> >>>> that's not the recommended way to do things now.  There are two
> >>>> possibilities:
> >>>>
> >>>> 1.  Your package is useless without the dependency.
> >>>>
> >>>> In this case, you should put
> >>>>
> >>>> Imports:  qgraph, ...
> >>>>
> >>>> in the DESCRIPTION file (where ... lists the other packages with the
> >>>> same status), and list the functions in those packages in your
> >>>> NAMESPACE
> >>>> file, using
> >>>>
> >>>> importFrom(qgraph, ...)
> >>>>
> >>>> etc.  (If you use Roxygen, you use comments in the source to get it
> >> to
> >>>> put this into your NAMESPACE file.)
> >>>>
> >>>> 2.  Your package works without the dependency, but you may want to
> >>>> issue
> >>>> errors or warnings if it is missing.
> >>>>
> >>>> Then you should put
> >>>>
> >>>> Suggests:  qgraph, ...
> >>>>
> >>>> in the DESCRIPTION file, and to use a function from it, use
> >> something
> >>>> like
> >>>>
> >>>> if (requireNamespace("qgraph")) {
> >>>>     qgraph::foo(...)
> >>>> } else
> >>>>     warning("qgraph is not available.")
> >>>>
> >>>> Duncan Murdoch
> >>>>
> >>>> ______________________________________________
> >>>> R-package-devel at r-project.org mailing list
> >>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>
> >
>
>

-- 


*In Jesu et Maria*
*Obrigado*
*Prof. Elias Carvalho*

*"Felix, qui potuit rerum cognoscere causas" (Virgil 29 BC)"Blessed is he
who has been able to understand the cause of things"*

	[[alternative HTML version deleted]]


From to||@@ch@| @end|ng |rom gm@||@com  Tue Mar 12 19:57:12 2019
From: to||@@ch@| @end|ng |rom gm@||@com (=?UTF-8?B?zqTPjM67zrfPgiDOp86xzrvOus6uz4I=?=)
Date: Tue, 12 Mar 2019 20:57:12 +0200
Subject: [R-pkg-devel] CRAN review
Message-ID: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>

Dear all,

We have submitted a package to CRAN in 25th of February and we have not got
a
positive or a negative answer for the submission since then. Is this
normal? Is
there any way to get informed for the review process?

Best regards,
-Chalkis Apostolos

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Tue Mar 12 20:20:19 2019
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 12 Mar 2019 15:20:19 -0400
Subject: [R-pkg-devel] CRAN review
In-Reply-To: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
References: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
Message-ID: <5dd2331f-74e6-15d5-bca3-07aa59274764@gmail.com>


  Sounds like it fell through the cracks somewhere.

  The foghorn package <https://github.com/fmichonneau/foghorn/>  is a
convenient way to check on CRAN status.

On 2019-03-12 2:57 p.m., ????? ?????? wrote:
> Dear all,
> 
> We have submitted a package to CRAN in 25th of February and we have not got
> a
> positive or a negative answer for the submission since then. Is this
> normal? Is
> there any way to get informed for the review process?
> 
> Best regards,
> -Chalkis Apostolos
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Mar 12 21:26:27 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 12 Mar 2019 16:26:27 -0400
Subject: [R-pkg-devel] CRAN review
In-Reply-To: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
References: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
Message-ID: <6c203422-db18-f11b-7e01-4006ec39adff@gmail.com>

On 12/03/2019 2:57 p.m., ????? ?????? wrote:
> Dear all,
> 
> We have submitted a package to CRAN in 25th of February and we have not got
> a
> positive or a negative answer for the submission since then. Is this
> normal? Is
> there any way to get informed for the review process?

Did you get the two messages after submission (one to confirm that you 
are the maintainer, the second to let you know the review has started)? 
They'll both have subject lines like

CRAN submission ....


The first one will start out saying something like
> 
> Dear Duncan Murdoch
> Someone has submitted the package rgl to CRAN.
> You are receiving this email to confirm the submission as the maintainer of
> this package.

and then ask you to confirm submission.

The second one will start like

> [This was generated from CRAN.R-project.org/submit.html]
> 
> The following package was uploaded to CRAN:
> ===========================================
> 
> Package Information:
> Package: rgl 

A while later you should get a third message about the automatic checks.

Duncan Murdoch


From henr|k@bengt@@on @end|ng |rom gm@||@com  Tue Mar 12 21:30:57 2019
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Tue, 12 Mar 2019 13:30:57 -0700
Subject: [R-pkg-devel] CRAN review
In-Reply-To: <6c203422-db18-f11b-7e01-4006ec39adff@gmail.com>
References: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
 <6c203422-db18-f11b-7e01-4006ec39adff@gmail.com>
Message-ID: <CAFDcVCQ2wgSTYJu_ZMdpJ1PRcvPcSZMOD4epE+zHp307w33xBg@mail.gmail.com>

You can also "follow" your package submission on the CRAN FTP server:

   ftp://cran.r-project.org/incoming/

/Henrik

On Tue, Mar 12, 2019 at 1:26 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 12/03/2019 2:57 p.m., ????? ?????? wrote:
> > Dear all,
> >
> > We have submitted a package to CRAN in 25th of February and we have not got
> > a
> > positive or a negative answer for the submission since then. Is this
> > normal? Is
> > there any way to get informed for the review process?
>
> Did you get the two messages after submission (one to confirm that you
> are the maintainer, the second to let you know the review has started)?
> They'll both have subject lines like
>
> CRAN submission ....
>
>
> The first one will start out saying something like
> >
> > Dear Duncan Murdoch
> > Someone has submitted the package rgl to CRAN.
> > You are receiving this email to confirm the submission as the maintainer of
> > this package.
>
> and then ask you to confirm submission.
>
> The second one will start like
>
> > [This was generated from CRAN.R-project.org/submit.html]
> >
> > The following package was uploaded to CRAN:
> > ===========================================
> >
> > Package Information:
> > Package: rgl
>
> A while later you should get a third message about the automatic checks.
>
> Duncan Murdoch
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Mar 12 23:26:36 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 12 Mar 2019 23:26:36 +0100
Subject: [R-pkg-devel] CRAN review
In-Reply-To: <CAFDcVCQ2wgSTYJu_ZMdpJ1PRcvPcSZMOD4epE+zHp307w33xBg@mail.gmail.com>
References: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
 <6c203422-db18-f11b-7e01-4006ec39adff@gmail.com>
 <CAFDcVCQ2wgSTYJu_ZMdpJ1PRcvPcSZMOD4epE+zHp307w33xBg@mail.gmail.com>
Message-ID: <26027497-ffbd-cc86-614b-631027f12e5b@statistik.tu-dortmund.de>

Not normal, if you tell us which package you are talking about, the CRAN 
team can check what happened in case you did not simply forget to 
confirm your submission.

Best,
Uwe Ligges

On 12.03.2019 21:30, Henrik Bengtsson wrote:
> You can also "follow" your package submission on the CRAN FTP server:
> 
>     ftp://cran.r-project.org/incoming/
> 
> /Henrik
> 
> On Tue, Mar 12, 2019 at 1:26 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> On 12/03/2019 2:57 p.m., ????? ?????? wrote:
>>> Dear all,
>>>
>>> We have submitted a package to CRAN in 25th of February and we have not got
>>> a
>>> positive or a negative answer for the submission since then. Is this
>>> normal? Is
>>> there any way to get informed for the review process?
>>
>> Did you get the two messages after submission (one to confirm that you
>> are the maintainer, the second to let you know the review has started)?
>> They'll both have subject lines like
>>
>> CRAN submission ....
>>
>>
>> The first one will start out saying something like
>>>
>>> Dear Duncan Murdoch
>>> Someone has submitted the package rgl to CRAN.
>>> You are receiving this email to confirm the submission as the maintainer of
>>> this package.
>>
>> and then ask you to confirm submission.
>>
>> The second one will start like
>>
>>> [This was generated from CRAN.R-project.org/submit.html]
>>>
>>> The following package was uploaded to CRAN:
>>> ===========================================
>>>
>>> Package Information:
>>> Package: rgl
>>
>> A while later you should get a third message about the automatic checks.
>>
>> Duncan Murdoch
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From to||@@ch@| @end|ng |rom gm@||@com  Wed Mar 13 00:10:34 2019
From: to||@@ch@| @end|ng |rom gm@||@com (=?UTF-8?B?zqTPjM67zrfPgiDOp86xzrvOus6uz4I=?=)
Date: Wed, 13 Mar 2019 01:10:34 +0200
Subject: [R-pkg-devel] CRAN review
In-Reply-To: <26027497-ffbd-cc86-614b-631027f12e5b@statistik.tu-dortmund.de>
References: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
 <6c203422-db18-f11b-7e01-4006ec39adff@gmail.com>
 <CAFDcVCQ2wgSTYJu_ZMdpJ1PRcvPcSZMOD4epE+zHp307w33xBg@mail.gmail.com>
 <26027497-ffbd-cc86-614b-631027f12e5b@statistik.tu-dortmund.de>
Message-ID: <CAMfvGJM1sUVi9vhy6RZ9qW9gYFziBaWMocUK-wHHMjCVhSzZ7g@mail.gmail.com>

The name of the package is "volesti". Both checks returned two Notes and we
"replied to all" to the e-mail
 in order to explain why we believe it were both false positives.

Best,
Chalkis Apostolos

On Wed, 13 Mar 2019 at 00:27, Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

> Not normal, if you tell us which package you are talking about, the CRAN
> team can check what happened in case you did not simply forget to
> confirm your submission.
>
> Best,
> Uwe Ligges
>
> On 12.03.2019 21:30, Henrik Bengtsson wrote:
> > You can also "follow" your package submission on the CRAN FTP server:
> >
> >     ftp://cran.r-project.org/incoming/
> >
> > /Henrik
> >
> > On Tue, Mar 12, 2019 at 1:26 PM Duncan Murdoch <murdoch.duncan at gmail.com>
> wrote:
> >>
> >> On 12/03/2019 2:57 p.m., ????? ?????? wrote:
> >>> Dear all,
> >>>
> >>> We have submitted a package to CRAN in 25th of February and we have
> not got
> >>> a
> >>> positive or a negative answer for the submission since then. Is this
> >>> normal? Is
> >>> there any way to get informed for the review process?
> >>
> >> Did you get the two messages after submission (one to confirm that you
> >> are the maintainer, the second to let you know the review has started)?
> >> They'll both have subject lines like
> >>
> >> CRAN submission ....
> >>
> >>
> >> The first one will start out saying something like
> >>>
> >>> Dear Duncan Murdoch
> >>> Someone has submitted the package rgl to CRAN.
> >>> You are receiving this email to confirm the submission as the
> maintainer of
> >>> this package.
> >>
> >> and then ask you to confirm submission.
> >>
> >> The second one will start like
> >>
> >>> [This was generated from CRAN.R-project.org/submit.html]
> >>>
> >>> The following package was uploaded to CRAN:
> >>> ===========================================
> >>>
> >>> Package Information:
> >>> Package: rgl
> >>
> >> A while later you should get a third message about the automatic checks.
> >>
> >> Duncan Murdoch
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Mar 13 00:23:22 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 13 Mar 2019 00:23:22 +0100
Subject: [R-pkg-devel] CRAN review
In-Reply-To: <CAMfvGJM1sUVi9vhy6RZ9qW9gYFziBaWMocUK-wHHMjCVhSzZ7g@mail.gmail.com>
References: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
 <6c203422-db18-f11b-7e01-4006ec39adff@gmail.com>
 <CAFDcVCQ2wgSTYJu_ZMdpJ1PRcvPcSZMOD4epE+zHp307w33xBg@mail.gmail.com>
 <26027497-ffbd-cc86-614b-631027f12e5b@statistik.tu-dortmund.de>
 <CAMfvGJM1sUVi9vhy6RZ9qW9gYFziBaWMocUK-wHHMjCVhSzZ7g@mail.gmail.com>
Message-ID: <c8ac7ae3-61d3-26a9-6513-66013128dee2@statistik.tu-dortmund.de>

My fault as I habe not spotted that. Can you pls resubmit as we do no 
longer have your original submission yet?

Best,
Uwe Ligges

On 13.03.2019 00:10, ????? ?????? wrote:
> The name of the package is "volesti". Both checks returned two Notes and 
> we "replied to all" to the e-mail
>  ?in order to explain why we believe it were both false positives.
> 
> Best,
> Chalkis Apostolos
> 
> On Wed, 13 Mar 2019 at 00:27, Uwe Ligges 
> <ligges at statistik.tu-dortmund.de 
> <mailto:ligges at statistik.tu-dortmund.de>> wrote:
> 
>     Not normal, if you tell us which package you are talking about, the
>     CRAN
>     team can check what happened in case you did not simply forget to
>     confirm your submission.
> 
>     Best,
>     Uwe Ligges
> 
>     On 12.03.2019 21:30, Henrik Bengtsson wrote:
>      > You can also "follow" your package submission on the CRAN FTP server:
>      >
>      > ftp://cran.r-project.org/incoming/
>      >
>      > /Henrik
>      >
>      > On Tue, Mar 12, 2019 at 1:26 PM Duncan Murdoch
>     <murdoch.duncan at gmail.com <mailto:murdoch.duncan at gmail.com>> wrote:
>      >>
>      >> On 12/03/2019 2:57 p.m., ????? ?????? wrote:
>      >>> Dear all,
>      >>>
>      >>> We have submitted a package to CRAN in 25th of February and we
>     have not got
>      >>> a
>      >>> positive or a negative answer for the submission since then. Is
>     this
>      >>> normal? Is
>      >>> there any way to get informed for the review process?
>      >>
>      >> Did you get the two messages after submission (one to confirm
>     that you
>      >> are the maintainer, the second to let you know the review has
>     started)?
>      >> They'll both have subject lines like
>      >>
>      >> CRAN submission ....
>      >>
>      >>
>      >> The first one will start out saying something like
>      >>>
>      >>> Dear Duncan Murdoch
>      >>> Someone has submitted the package rgl to CRAN.
>      >>> You are receiving this email to confirm the submission as the
>     maintainer of
>      >>> this package.
>      >>
>      >> and then ask you to confirm submission.
>      >>
>      >> The second one will start like
>      >>
>      >>> [This was generated from CRAN.R-project.org/submit.html
>     <http://CRAN.R-project.org/submit.html>]
>      >>>
>      >>> The following package was uploaded to CRAN:
>      >>> ===========================================
>      >>>
>      >>> Package Information:
>      >>> Package: rgl
>      >>
>      >> A while later you should get a third message about the automatic
>     checks.
>      >>
>      >> Duncan Murdoch
>      >>
>      >> ______________________________________________
>      >> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >
>      > ______________________________________________
>      > R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >
> 
>     ______________________________________________
>     R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>     mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From m@e||e@@@|mon @end|ng |rom y@hoo@@e  Wed Mar 13 08:03:13 2019
From: m@e||e@@@|mon @end|ng |rom y@hoo@@e (=?UTF-8?Q?Ma=C3=ABlle_SALMON?=)
Date: Wed, 13 Mar 2019 07:03:13 +0000 (UTC)
Subject: [R-pkg-devel] CRAN review
In-Reply-To: <CAFDcVCQ2wgSTYJu_ZMdpJ1PRcvPcSZMOD4epE+zHp307w33xBg@mail.gmail.com>
References: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
 <6c203422-db18-f11b-7e01-4006ec39adff@gmail.com>
 <CAFDcVCQ2wgSTYJu_ZMdpJ1PRcvPcSZMOD4epE+zHp307w33xBg@mail.gmail.com>
Message-ID: <1724553197.6507906.1552460593324@mail.yahoo.com>

 We at Locke Data have made an hourly updated dashboard based on the FTP server
CRAN incoming dashboard ? cransays

| 
| 
|  | 
CRAN incoming dashboard ? cransays


 |

 |

 |



We hope it makes data more accessible whilst reducing load on the FTP server.
Ma?lle.

    Den tisdag 12 mars 2019 21:37:12 CET, Henrik Bengtsson <henrik.bengtsson at gmail.com> skrev:  
 
 You can also "follow" your package submission on the CRAN FTP server:

? ftp://cran.r-project.org/incoming/

/Henrik

On Tue, Mar 12, 2019 at 1:26 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 12/03/2019 2:57 p.m., ????? ?????? wrote:
> > Dear all,
> >
> > We have submitted a package to CRAN in 25th of February and we have not got
> > a
> > positive or a negative answer for the submission since then. Is this
> > normal? Is
> > there any way to get informed for the review process?
>
> Did you get the two messages after submission (one to confirm that you
> are the maintainer, the second to let you know the review has started)?
> They'll both have subject lines like
>
> CRAN submission ....
>
>
> The first one will start out saying something like
> >
> > Dear Duncan Murdoch
> > Someone has submitted the package rgl to CRAN.
> > You are receiving this email to confirm the submission as the maintainer of
> > this package.
>
> and then ask you to confirm submission.
>
> The second one will start like
>
> > [This was generated from CRAN.R-project.org/submit.html]
> >
> > The following package was uploaded to CRAN:
> > ===========================================
> >
> > Package Information:
> > Package: rgl
>
> A while later you should get a third message about the automatic checks.
>
> Duncan Murdoch
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel  
	[[alternative HTML version deleted]]


From m@e||e@@@|mon @end|ng |rom y@hoo@@e  Wed Mar 13 08:56:45 2019
From: m@e||e@@@|mon @end|ng |rom y@hoo@@e (=?UTF-8?Q?Ma=C3=ABlle_SALMON?=)
Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
Subject: [R-pkg-devel] CRAN review
In-Reply-To: <mailman.3611.3047.1552463633.8486.r-package-devel@r-project.org>
References: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
 <6c203422-db18-f11b-7e01-4006ec39adff@gmail.com>
 <CAFDcVCQ2wgSTYJu_ZMdpJ1PRcvPcSZMOD4epE+zHp307w33xBg@mail.gmail.com>
 <mailman.3611.3047.1552463633.8486.r-package-devel@r-project.org>
Message-ID: <816632325.6527064.1552463805921@mail.yahoo.com>

 Sorry, the link was removed (by my copy-pasting it wrongly): https://itsalocke.com/cransays/articles/dashboard

    Den onsdag 13 mars 2019 08:54:00 CET, Ma?lle SALMON via R-package-devel <r-package-devel at r-project.org> skrev:  
 
  We at Locke Data have made an hourly updated dashboard based on the FTP server
CRAN incoming dashboard ? cransays

| 
| 
|? | 
CRAN incoming dashboard ? cransays


 |

 |

 |



We hope it makes data more accessible whilst reducing load on the FTP server.
Ma?lle.

? ? Den tisdag 12 mars 2019 21:37:12 CET, Henrik Bengtsson <henrik.bengtsson at gmail.com> skrev:? 
 
 You can also "follow" your package submission on the CRAN FTP server:

? ftp://cran.r-project.org/incoming/

/Henrik

On Tue, Mar 12, 2019 at 1:26 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 12/03/2019 2:57 p.m., ????? ?????? wrote:
> > Dear all,
> >
> > We have submitted a package to CRAN in 25th of February and we have not got
> > a
> > positive or a negative answer for the submission since then. Is this
> > normal? Is
> > there any way to get informed for the review process?
>
> Did you get the two messages after submission (one to confirm that you
> are the maintainer, the second to let you know the review has started)?
> They'll both have subject lines like
>
> CRAN submission ....
>
>
> The first one will start out saying something like
> >
> > Dear Duncan Murdoch
> > Someone has submitted the package rgl to CRAN.
> > You are receiving this email to confirm the submission as the maintainer of
> > this package.
>
> and then ask you to confirm submission.
>
> The second one will start like
>
> > [This was generated from CRAN.R-project.org/submit.html]
> >
> > The following package was uploaded to CRAN:
> > ===========================================
> >
> > Package Information:
> > Package: rgl
>
> A while later you should get a third message about the automatic checks.
>
> Duncan Murdoch
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel  
??? [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel
  
	[[alternative HTML version deleted]]


From to||@@ch@| @end|ng |rom gm@||@com  Wed Mar 13 09:15:11 2019
From: to||@@ch@| @end|ng |rom gm@||@com (=?UTF-8?B?zqTPjM67zrfPgiDOp86xzrvOus6uz4I=?=)
Date: Wed, 13 Mar 2019 10:15:11 +0200
Subject: [R-pkg-devel] CRAN review
In-Reply-To: <mailman.3612.3048.1552464318.8486.r-package-devel@r-project.org>
References: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
 <6c203422-db18-f11b-7e01-4006ec39adff@gmail.com>
 <CAFDcVCQ2wgSTYJu_ZMdpJ1PRcvPcSZMOD4epE+zHp307w33xBg@mail.gmail.com>
 <mailman.3611.3047.1552463633.8486.r-package-devel@r-project.org>
 <mailman.3612.3048.1552464318.8486.r-package-devel@r-project.org>
Message-ID: <CAMfvGJMSv-KGFcKyUHfPc5XYoHTuKYwvY3mp4R4APEoB0bYSvw@mail.gmail.com>

Of course we will resubmit. Thank you all for the info.

Chalkis Apostolos

On Wed, 13 Mar 2019 at 10:05, Ma?lle SALMON via R-package-devel <
r-package-devel at r-project.org> wrote:

>
>
>
> ---------- Forwarded message ----------
> From: "Ma?lle SALMON" <maelle.salmon at yahoo.se>
> To: Duncan Murdoch <murdoch.duncan at gmail.com>, Henrik Bengtsson <
> henrik.bengtsson at gmail.com>
> Cc: r-package-devel at r-project.org
> Bcc:
> Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
> Subject: Re: [R-pkg-devel] CRAN review
>  Sorry, the link was removed (by my copy-pasting it wrongly):
> https://itsalocke.com/cransays/articles/dashboard
>
>     Den onsdag 13 mars 2019 08:54:00 CET, Ma?lle SALMON via
> R-package-devel <r-package-devel at r-project.org> skrev:
>
>   We at Locke Data have made an hourly updated dashboard based on the FTP
> server
> CRAN incoming dashboard ? cransays
>
> |
> |
> |  |
> CRAN incoming dashboard ? cransays
>
>
>  |
>
>  |
>
>  |
>
>
>
> We hope it makes data more accessible whilst reducing load on the FTP
> server.
> Ma?lle.
>
>     Den tisdag 12 mars 2019 21:37:12 CET, Henrik Bengtsson <
> henrik.bengtsson at gmail.com> skrev:
>
>  You can also "follow" your package submission on the CRAN FTP server:
>
>   ftp://cran.r-project.org/incoming/
>
> /Henrik
>
> On Tue, Mar 12, 2019 at 1:26 PM Duncan Murdoch <murdoch.duncan at gmail.com>
> wrote:
> >
> > On 12/03/2019 2:57 p.m., ????? ?????? wrote:
> > > Dear all,
> > >
> > > We have submitted a package to CRAN in 25th of February and we have
> not got
> > > a
> > > positive or a negative answer for the submission since then. Is this
> > > normal? Is
> > > there any way to get informed for the review process?
> >
> > Did you get the two messages after submission (one to confirm that you
> > are the maintainer, the second to let you know the review has started)?
> > They'll both have subject lines like
> >
> > CRAN submission ....
> >
> >
> > The first one will start out saying something like
> > >
> > > Dear Duncan Murdoch
> > > Someone has submitted the package rgl to CRAN.
> > > You are receiving this email to confirm the submission as the
> maintainer of
> > > this package.
> >
> > and then ask you to confirm submission.
> >
> > The second one will start like
> >
> > > [This was generated from CRAN.R-project.org/submit.html]
> > >
> > > The following package was uploaded to CRAN:
> > > ===========================================
> > >
> > > Package Information:
> > > Package: rgl
> >
> > A while later you should get a third message about the automatic checks.
> >
> > Duncan Murdoch
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>     [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
>
>
>
> ---------- Forwarded message ----------
> From: "Ma?lle SALMON via R-package-devel" <r-package-devel at r-project.org>
> To: Duncan Murdoch <murdoch.duncan at gmail.com>, Henrik Bengtsson <
> henrik.bengtsson at gmail.com>
> Cc: r-package-devel at r-project.org
> Bcc:
> Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
> Subject: Re: [R-pkg-devel] CRAN review
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From tob|@@@weber @end|ng |rom un|-hohenhe|m@de  Wed Mar 13 10:50:18 2019
From: tob|@@@weber @end|ng |rom un|-hohenhe|m@de (Tobias KD Weber)
Date: Wed, 13 Mar 2019 10:50:18 +0100
Subject: [R-pkg-devel] Help request on Rd2pdf | Fwd: [CRAN-pretest-archived]
 CRAN submission spsh 1.0.190311
In-Reply-To: <01d4d903$Blat.v3.2.16$79f34954$31e684005@mail.statistik.tu-dortmund.de>
References: <01d4d903$Blat.v3.2.16$79f34954$31e684005@mail.statistik.tu-dortmund.de>
Message-ID: <80d2ea1d-0a92-e7a6-9744-6f6630a3ccda@uni-hohenheim.de>

Dear people,

I submitted a package to CRAN and got an error on the pdf manual 
creation (solved other minor issues, full response from 
CRAN-submissions at R-project.org please see email below).

The response to an error and warnings detailed:

* using log directory 'd:/RCompile/CRANincoming/R-devel/spsh.Rcheck'

* using R Under development (unstable) (2019-03-09 r76216) * using 
platform: x86_64-w64-mingw32 (64-bit) * using session charset: ISO8859-1 
* checking for file 'spsh/DESCRIPTION' ... OK * checking extension type 
... Package * this is package 'spsh' version '1.0.190311' * package 
encoding: UTF-8 * checking CRAN incoming feasibility ... WARNING [... 
deleted .... all OK ...] * checking PDF version of manual ... WARNING 
LaTeX errors when creating PDF version. This typically indicates Rd 
problems. LaTeX errors found: ! LaTeX Error: There's no line here to 
end. See the LaTeX manual or LaTeX Companion for explanation. Type H 
<return> for immediate help. ... ! Paragraph ended before \Rd at code was 
complete. <to be read again> \par l.1340 * checking PDF version of 
manual without hyperrefs or index ... ERROR * DONE Status: 1 ERROR, 2 
WARNINGs, 1 NOTE


Turning to the R-Terminal executing /R CMD Rd2pdf/
Leads to:

Converting Rd files to LaTeX ...

 ? spsh_1.0.1.tar.gz

Warning in readLines(f) : line 1 appears to contain an embedded nul

Warning in readLines(f) : line 19 appears to contain an embedded nul

[... deleted many more lines ... ]

Warning in readLines(f) : line 3058 appears to contain an embedded nul

Warning in readLines(f) : line 3117 appears to contain an embedded nul

Warning in readLines(f) :

 ? incomplete final line found on 'spsh_1.0.1.tar.gz'

Error in iconv(lines, encoding, "UTF-8", sub = "byte") :

 ? embedded nul in string: 
'\001\f\023aIeK\021\030\023U\\,%\035\002\003\n\v\\}s\021heyt\036m\037 
PaK\032\027Z,C %2u@\031w\021('\017}gcn\004L\006\0267#!|E\017\

177\\1w\032|Gf\005JS*a\177F\\\aa_Yr]\033sVA<bf>~~\\,\026Sa_QnXMF\017B?O,<\003~\toMZ\023i\006\177\0\006\005qKvB_~\t\a\a5l\001\177=MWu\030]\t>JF\nDx\004T\t\023

`[\025?n)g^\004oMhW{%l\aO\fo>\033>\016{_<bf>n?]d|\v>V'


I have truely searched most of the morning for a solution, but none to 
be found.
Any ideas how to solve this would be very much appreciated.

Kind Regards,
Tobias



-------- Weitergeleitete Nachricht --------
Betreff: 	[CRAN-pretest-archived] CRAN submission spsh 1.0.190311
Datum: 	Tue, 12 Mar 2019 19:43:25 +0100
Von: 	ligges at statistik.tu-dortmund.de
Antwort an: 	CRAN-submissions at R-project.org
An: 	tobias.weber at uni-hohenheim.de
Kopie (CC): 	CRAN-submissions at R-project.org



Dear maintainer,
package spsh_1.0.190311.tar.gz does not pass the incoming checks 
automatically, please see the following pre-tests:
Windows: 
<https://win-builder.r-project.org/incoming_pretest/spsh_1.0.190311_20190312_152345/Windows/00check.log>
Status: 1 ERROR, 2 WARNINGs, 1 NOTE
Debian: 
<https://win-builder.r-project.org/incoming_pretest/spsh_1.0.190311_20190312_152345/Debian/00check.log>
Status: 1 ERROR, 2 WARNINGs, 1 NOTE

Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help 
on the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please 
reply-all to this message and explain.
More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/spsh_1.0.190311_20190312_152345/>
The files will be removed after roughly 7 days.
No strong reverse dependencies to be checked.
Best regards,
CRAN teams' auto-check service


-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Nachrichtenteil als Anhang
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190313/ade951b2/attachment.ksh>

From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Wed Mar 13 13:11:44 2019
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Wed, 13 Mar 2019 12:11:44 +0000
Subject: [R-pkg-devel] 
 Help request on Rd2pdf | Fwd: [CRAN-pretest-archived]
 CRAN submission spsh 1.0.190311
In-Reply-To: <80d2ea1d-0a92-e7a6-9744-6f6630a3ccda@uni-hohenheim.de>
References: <01d4d903$Blat.v3.2.16$79f34954$31e684005@mail.statistik.tu-dortmund.de>
 <80d2ea1d-0a92-e7a6-9744-6f6630a3ccda@uni-hohenheim.de>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E018F6FAF86@MBXP02.ds.man.ac.uk>

Hi,

> Turning to the R-Terminal executing /R CMD Rd2pdf/ Leads to:
> 
> Converting Rd files to LaTeX ...
> 
>   spsh_1.0.1.tar.gz
>
> Warning in readLines(f) : line 1 appears to contain an embedded nul

You really need to give the exact command you run, it is not just 'R CMD Rd2pdf'.
The error message indicates that probably you run  'R CMD Rd2pdf spsh_1.0.1.tar.gz ',
which is incorrect - you need to run Rd2pdf on the directory were your source package is, not on the tar ball,  eg. 'R CMD Rd2pdf spsh '.

The LaTeX error indicates that you probably used something like \code{some code} but omitted the closing curly parenthesis. 

Georgi Boshnakov


-----Original Message-----
From: R-package-devel [mailto:r-package-devel-bounces at r-project.org] On Behalf Of Tobias KD Weber
Sent: 13 March 2019 09:50
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Help request on Rd2pdf | Fwd: [CRAN-pretest-archived] CRAN submission spsh 1.0.190311

Dear people,

I submitted a package to CRAN and got an error on the pdf manual creation (solved other minor issues, full response from CRAN-submissions at R-project.org please see email below).

The response to an error and warnings detailed:

* using log directory 'd:/RCompile/CRANincoming/R-devel/spsh.Rcheck'

* using R Under development (unstable) (2019-03-09 r76216) * using
platform: x86_64-w64-mingw32 (64-bit) * using session charset: ISO8859-1
* checking for file 'spsh/DESCRIPTION' ... OK * checking extension type ... Package * this is package 'spsh' version '1.0.190311' * package
encoding: UTF-8 * checking CRAN incoming feasibility ... WARNING [... 
deleted .... all OK ...] * checking PDF version of manual ... WARNING LaTeX errors when creating PDF version. This typically indicates Rd problems. LaTeX errors found: ! LaTeX Error: There's no line here to end. See the LaTeX manual or LaTeX Companion for explanation. Type H <return> for immediate help. ... ! Paragraph ended before \Rd at code was complete. <to be read again> \par l.1340 * checking PDF version of manual without hyperrefs or index ... ERROR * DONE Status: 1 ERROR, 2 WARNINGs, 1 NOTE


Turning to the R-Terminal executing /R CMD Rd2pdf/ Leads to:

Converting Rd files to LaTeX ...

 ? spsh_1.0.1.tar.gz

Warning in readLines(f) : line 1 appears to contain an embedded nul

Warning in readLines(f) : line 19 appears to contain an embedded nul

[... deleted many more lines ... ]

Warning in readLines(f) : line 3058 appears to contain an embedded nul

Warning in readLines(f) : line 3117 appears to contain an embedded nul

Warning in readLines(f) :

 ? incomplete final line found on 'spsh_1.0.1.tar.gz'

Error in iconv(lines, encoding, "UTF-8", sub = "byte") :

 ? embedded nul in string: 
'\001\f\023aIeK\021\030\023U\\,%\035\002\003\n\v\\}s\021heyt\036m\037
PaK\032\027Z,C %2u@\031w\021('\017}gcn\004L\006\0267#!|E\017\

177\\1w\032|Gf\005JS*a\177F\\\aa_Yr]\033sVA<bf>~~\\,\026Sa_QnXMF\017B?O,<\003~\toMZ\023i\006\177\0\006\005qKvB_~\t\a\a5l\001\177=MWu\030]\t>JF\nDx\004T\t\023

`[\025?n)g^\004oMhW{%l\aO\fo>\033>\016{_<bf>n?]d|\v>V'


I have truely searched most of the morning for a solution, but none to be found.
Any ideas how to solve this would be very much appreciated.

Kind Regards,
Tobias



-------- Weitergeleitete Nachricht --------
Betreff: 	[CRAN-pretest-archived] CRAN submission spsh 1.0.190311
Datum: 	Tue, 12 Mar 2019 19:43:25 +0100
Von: 	ligges at statistik.tu-dortmund.de
Antwort an: 	CRAN-submissions at R-project.org
An: 	tobias.weber at uni-hohenheim.de
Kopie (CC): 	CRAN-submissions at R-project.org



Dear maintainer,
package spsh_1.0.190311.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
Windows: 
<https://win-builder.r-project.org/incoming_pretest/spsh_1.0.190311_20190312_152345/Windows/00check.log>
Status: 1 ERROR, 2 WARNINGs, 1 NOTE
Debian: 
<https://win-builder.r-project.org/incoming_pretest/spsh_1.0.190311_20190312_152345/Debian/00check.log>
Status: 1 ERROR, 2 WARNINGs, 1 NOTE

Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/spsh_1.0.190311_20190312_152345/>
The files will be removed after roughly 7 days.
No strong reverse dependencies to be checked.
Best regards,
CRAN teams' auto-check service


From d@v|dhughjone@ @end|ng |rom gm@||@com  Wed Mar 13 16:50:25 2019
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Wed, 13 Mar 2019 15:50:25 +0000
Subject: [R-pkg-devel] How to debug CRAN errors?
Message-ID: <CAARY7kgz5XUEa5t4BC46f0woiVfkTt40dXYDovERkmya44-eiA@mail.gmail.com>

Hi all,

My package has errors on CRAN's Linux and Solaris:

https://cran.r-project.org/web/checks/check_results_huxtable.html

which I can't reproduce on my local OSX Machine, nor on Linux on Travis.

Does anyone have any general hints on how to reproduce and/or debug such
errors?

Specifically the error relates to a call to openxlsx::saveWorkbook
producing a message. openxlsx hasn't changed recently, though.

Cheers,
David

	[[alternative HTML version deleted]]


From wdun|@p @end|ng |rom t|bco@com  Wed Mar 13 17:59:48 2019
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Wed, 13 Mar 2019 09:59:48 -0700
Subject: [R-pkg-devel] How to debug CRAN errors?
In-Reply-To: <CAARY7kgz5XUEa5t4BC46f0woiVfkTt40dXYDovERkmya44-eiA@mail.gmail.com>
References: <CAARY7kgz5XUEa5t4BC46f0woiVfkTt40dXYDovERkmya44-eiA@mail.gmail.com>
Message-ID: <CAF8bMcYwAt2xtX=duGwPsK3vEGUY-Q4o4rJmukj-hzscAA8Owg@mail.gmail.com>

The complaint

> test_check("huxtable")
     -- 1. Failure: Data written in appropriate format
(@test-openxlsx.R#101) ------
     `openxlsx::saveWorkbook(wb, file = "test-xlsx.xlsx", overwrite =
TRUE)` produced messages.

comes from your call to testthat::expect_silent()

test_that("Data written in appropriate format", {
  hx <- huxtable(a = 1:2 + 0.5, b = -1:-2 + 0.5, d = letters[1:2],
add_colnames = TRUE)
  wb <- as_Workbook(hx)
  expect_silent(openxlsx::saveWorkbook(wb, file = "test-xlsx.xlsx",
overwrite = TRUE))


Perhaps you should suggest to the authors of testthat that it would be nice
if expect_silent() showed some of the text of the messages, etc., instead
of just saying that messages were produced.

By the way, I think your test test should write to a file in [a
subdirectory of]] tempdir(), not to a file in the current directory.

comes from
Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Wed, Mar 13, 2019 at 8:50 AM David Hugh-Jones <davidhughjones at gmail.com>
wrote:
>
> Hi all,
>
> My package has errors on CRAN's Linux and Solaris:
>
> https://cran.r-project.org/web/checks/check_results_huxtable.html
>
> which I can't reproduce on my local OSX Machine, nor on Linux on Travis.
>
> Does anyone have any general hints on how to reproduce and/or debug such
> errors?
>
> Specifically the error relates to a call to openxlsx::saveWorkbook
> producing a message. openxlsx hasn't changed recently, though.
>
> Cheers,
> David
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From d@v|dhughjone@ @end|ng |rom gm@||@com  Wed Mar 13 18:13:05 2019
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Wed, 13 Mar 2019 17:13:05 +0000
Subject: [R-pkg-devel] How to debug CRAN errors?
In-Reply-To: <CAF8bMcYwAt2xtX=duGwPsK3vEGUY-Q4o4rJmukj-hzscAA8Owg@mail.gmail.com>
References: <CAARY7kgz5XUEa5t4BC46f0woiVfkTt40dXYDovERkmya44-eiA@mail.gmail.com>
 <CAF8bMcYwAt2xtX=duGwPsK3vEGUY-Q4o4rJmukj-hzscAA8Owg@mail.gmail.com>
Message-ID: <CAARY7kj_Ba8tqmadRubGEdA2JLWDcHrk_TEv0zLNRMU0_Fqsyw@mail.gmail.com>

Hi Bill,

I take your point. Meanwhile, though, is there any way to debug the
problem? I?ll assume that making repeated uploads to CRAN is not a viable
approach.... it would be great if there were a Docker image of their setup
available, for example.

On Wed, 13 Mar 2019 at 17:00, William Dunlap <wdunlap at tibco.com> wrote:

> The complaint
>
> > test_check("huxtable")
>      -- 1. Failure: Data written in appropriate format
> (@test-openxlsx.R#101) ------
>      `openxlsx::saveWorkbook(wb, file = "test-xlsx.xlsx", overwrite =
> TRUE)` produced messages.
>
> comes from your call to testthat::expect_silent()
>
> test_that("Data written in appropriate format", {
>   hx <- huxtable(a = 1:2 + 0.5, b = -1:-2 + 0.5, d = letters[1:2],
> add_colnames = TRUE)
>   wb <- as_Workbook(hx)
>   expect_silent(openxlsx::saveWorkbook(wb, file = "test-xlsx.xlsx",
> overwrite = TRUE))
>
>
> Perhaps you should suggest to the authors of testthat that it would be
> nice if expect_silent() showed some of the text of the messages, etc.,
> instead of just saying that messages were produced.
>
> By the way, I think your test test should write to a file in [a
> subdirectory of]] tempdir(), not to a file in the current directory.
>
> comes from
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
>
>
> On Wed, Mar 13, 2019 at 8:50 AM David Hugh-Jones <davidhughjones at gmail.com>
> wrote:
> >
> > Hi all,
> >
> > My package has errors on CRAN's Linux and Solaris:
> >
> > https://cran.r-project.org/web/checks/check_results_huxtable.html
> >
> > which I can't reproduce on my local OSX Machine, nor on Linux on Travis.
> >
> > Does anyone have any general hints on how to reproduce and/or debug such
> > errors?
> >
> > Specifically the error relates to a call to openxlsx::saveWorkbook
> > producing a message. openxlsx hasn't changed recently, though.
> >
> > Cheers,
> > David
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
-- 
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From wdun|@p @end|ng |rom t|bco@com  Wed Mar 13 18:52:00 2019
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Wed, 13 Mar 2019 10:52:00 -0700
Subject: [R-pkg-devel] How to debug CRAN errors?
In-Reply-To: <CAARY7kj_Ba8tqmadRubGEdA2JLWDcHrk_TEv0zLNRMU0_Fqsyw@mail.gmail.com>
References: <CAARY7kgz5XUEa5t4BC46f0woiVfkTt40dXYDovERkmya44-eiA@mail.gmail.com>
 <CAF8bMcYwAt2xtX=duGwPsK3vEGUY-Q4o4rJmukj-hzscAA8Owg@mail.gmail.com>
 <CAARY7kj_Ba8tqmadRubGEdA2JLWDcHrk_TEv0zLNRMU0_Fqsyw@mail.gmail.com>
Message-ID: <CAF8bMcYo3pdmESTDdZ9LH5jXzvDVXd_pSeEBHxyBKspNPH=2nQ@mail.gmail.com>

You can stick your own version of expect_silent into the test file.  Have
it print
the messages, output, and warnings that it finds.

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Wed, Mar 13, 2019 at 10:13 AM David Hugh-Jones <davidhughjones at gmail.com>
wrote:

> Hi Bill,
>
> I take your point. Meanwhile, though, is there any way to debug the
> problem? I?ll assume that making repeated uploads to CRAN is not a viable
> approach.... it would be great if there were a Docker image of their setup
> available, for example.
>
> On Wed, 13 Mar 2019 at 17:00, William Dunlap <wdunlap at tibco.com> wrote:
>
>> The complaint
>>
>> > test_check("huxtable")
>>      -- 1. Failure: Data written in appropriate format
>> (@test-openxlsx.R#101) ------
>>      `openxlsx::saveWorkbook(wb, file = "test-xlsx.xlsx", overwrite =
>> TRUE)` produced messages.
>>
>> comes from your call to testthat::expect_silent()
>>
>> test_that("Data written in appropriate format", {
>>   hx <- huxtable(a = 1:2 + 0.5, b = -1:-2 + 0.5, d = letters[1:2],
>> add_colnames = TRUE)
>>   wb <- as_Workbook(hx)
>>   expect_silent(openxlsx::saveWorkbook(wb, file = "test-xlsx.xlsx",
>> overwrite = TRUE))
>>
>>
>> Perhaps you should suggest to the authors of testthat that it would be
>> nice if expect_silent() showed some of the text of the messages, etc.,
>> instead of just saying that messages were produced.
>>
>> By the way, I think your test test should write to a file in [a
>> subdirectory of]] tempdir(), not to a file in the current directory.
>>
>> comes from
>> Bill Dunlap
>> TIBCO Software
>> wdunlap tibco.com
>>
>>
>>
>> On Wed, Mar 13, 2019 at 8:50 AM David Hugh-Jones <
>> davidhughjones at gmail.com> wrote:
>> >
>> > Hi all,
>> >
>> > My package has errors on CRAN's Linux and Solaris:
>> >
>> > https://cran.r-project.org/web/checks/check_results_huxtable.html
>> >
>> > which I can't reproduce on my local OSX Machine, nor on Linux on Travis.
>> >
>> > Does anyone have any general hints on how to reproduce and/or debug such
>> > errors?
>> >
>> > Specifically the error relates to a call to openxlsx::saveWorkbook
>> > producing a message. openxlsx hasn't changed recently, though.
>> >
>> > Cheers,
>> > David
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> --
> Sent from Gmail Mobile
>

	[[alternative HTML version deleted]]


From k|@u@@@ch||ep @end|ng |rom gm@||@com  Wed Mar 13 18:31:07 2019
From: k|@u@@@ch||ep @end|ng |rom gm@||@com (Klaus Schliep)
Date: Wed, 13 Mar 2019 13:31:07 -0400
Subject: [R-pkg-devel] How to debug CRAN errors?
In-Reply-To: <CAARY7kj_Ba8tqmadRubGEdA2JLWDcHrk_TEv0zLNRMU0_Fqsyw@mail.gmail.com>
References: <CAARY7kgz5XUEa5t4BC46f0woiVfkTt40dXYDovERkmya44-eiA@mail.gmail.com>
 <CAF8bMcYwAt2xtX=duGwPsK3vEGUY-Q4o4rJmukj-hzscAA8Owg@mail.gmail.com>
 <CAARY7kj_Ba8tqmadRubGEdA2JLWDcHrk_TEv0zLNRMU0_Fqsyw@mail.gmail.com>
Message-ID: <CAKB+p3XdOgmAY0aeESL1NYyuKyFMeKTQ9FK32hUyLJN=9w6xxg@mail.gmail.com>

On Wed, Mar 13, 2019, 1:13 PM David Hugh-Jones <davidhughjones at gmail.com>
wrote:

> Hi Bill,
>
> I take your point. Meanwhile, though, is there any way to debug the
> problem? I?ll assume that making repeated uploads to CRAN is not a viable
> approach.... it would be great if there were a Docker image of their setup
> available, for example.
>


Have you tested your package on https://builder.r-hub.io/ or
https://win-builder.r-project.org/ ?

>
> On Wed, 13 Mar 2019 at 17:00, William Dunlap <wdunlap at tibco.com> wrote:
>
> > The complaint
> >
> > > test_check("huxtable")
> >      -- 1. Failure: Data written in appropriate format
> > (@test-openxlsx.R#101) ------
> >      `openxlsx::saveWorkbook(wb, file = "test-xlsx.xlsx", overwrite =
> > TRUE)` produced messages.
> >
> > comes from your call to testthat::expect_silent()
> >
> > test_that("Data written in appropriate format", {
> >   hx <- huxtable(a = 1:2 + 0.5, b = -1:-2 + 0.5, d = letters[1:2],
> > add_colnames = TRUE)
> >   wb <- as_Workbook(hx)
> >   expect_silent(openxlsx::saveWorkbook(wb, file = "test-xlsx.xlsx",
> > overwrite = TRUE))
> >
> >
> > Perhaps you should suggest to the authors of testthat that it would be
> > nice if expect_silent() showed some of the text of the messages, etc.,
> > instead of just saying that messages were produced.
> >
> > By the way, I think your test test should write to a file in [a
> > subdirectory of]] tempdir(), not to a file in the current directory.
> >
> > comes from
> > Bill Dunlap
> > TIBCO Software
> > wdunlap tibco.com
> >
> >
> >
> > On Wed, Mar 13, 2019 at 8:50 AM David Hugh-Jones <
> davidhughjones at gmail.com>
> > wrote:
> > >
> > > Hi all,
> > >
> > > My package has errors on CRAN's Linux and Solaris:
> > >
> > > https://cran.r-project.org/web/checks/check_results_huxtable.html
> > >
> > > which I can't reproduce on my local OSX Machine, nor on Linux on
> Travis.
> > >
> > > Does anyone have any general hints on how to reproduce and/or debug
> such
> > > errors?
> > >
> > > Specifically the error relates to a call to openxlsx::saveWorkbook
> > > producing a message. openxlsx hasn't changed recently, though.
> > >
> > > Cheers,
> > > David
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> --
> Sent from Gmail Mobile
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From d@v|d@kepp||nger @end|ng |rom gm@||@com  Wed Mar 13 20:39:54 2019
From: d@v|d@kepp||nger @end|ng |rom gm@||@com (David Kepplinger)
Date: Wed, 13 Mar 2019 12:39:54 -0700
Subject: [R-pkg-devel] CRAN incoming checks fail due to non-staged
 installation
Message-ID: <CAGmyFCHt4iRN53Xn6pmc-cOEQNvmYLXc2WMWEhWNaPrVoG3jPw@mail.gmail.com>

Dear Community,

I am trying to update the pense package on CRAN to fix `autoreconf`
problems, but the incoming checks fail for Windows (r-devel) with 2 NOTEs.

The first NOTE is a HTTP 403 for a http://doi.org URL which I already know
about and can not change, but the other NOTE is more obscure to me. It says

* checking whether package 'pense' can be installed ... NOTE
Found the following notes/warnings:
  Non-staged installation was used


and when I check the install log, it says

install for i386
* installing *source* package 'pense' ...
** using staged installation
[....]
install for x64
* installing *source* package 'pense' ...
** using non-staged installation
[...]


Is this a false positive or is there something I can do to force using a
staged installation for both architectures on Windows?

Best,
David

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Mar 13 20:53:13 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 13 Mar 2019 15:53:13 -0400
Subject: [R-pkg-devel] How to debug CRAN errors?
In-Reply-To: <CAF8bMcYwAt2xtX=duGwPsK3vEGUY-Q4o4rJmukj-hzscAA8Owg@mail.gmail.com>
References: <CAARY7kgz5XUEa5t4BC46f0woiVfkTt40dXYDovERkmya44-eiA@mail.gmail.com>
 <CAF8bMcYwAt2xtX=duGwPsK3vEGUY-Q4o4rJmukj-hzscAA8Owg@mail.gmail.com>
Message-ID: <47320346-16e8-b1d7-93fd-a987bde01576@gmail.com>

On 13/03/2019 12:59 p.m., William Dunlap wrote:
> The complaint
> 
>> test_check("huxtable")
>       -- 1. Failure: Data written in appropriate format
> (@test-openxlsx.R#101) ------
>       `openxlsx::saveWorkbook(wb, file = "test-xlsx.xlsx", overwrite =
> TRUE)` produced messages.
> 
> comes from your call to testthat::expect_silent()
> 
> test_that("Data written in appropriate format", {
>    hx <- huxtable(a = 1:2 + 0.5, b = -1:-2 + 0.5, d = letters[1:2],
> add_colnames = TRUE)
>    wb <- as_Workbook(hx)
>    expect_silent(openxlsx::saveWorkbook(wb, file = "test-xlsx.xlsx",
> overwrite = TRUE))
> 
> 
> Perhaps you should suggest to the authors of testthat that it would be nice
> if expect_silent() showed some of the text of the messages, etc., instead
> of just saying that messages were produced.

Yes.

> By the way, I think your test test should write to a file in [a
> subdirectory of]] tempdir(), not to a file in the current directory.

That could be the source of the error:  it's a violation of CRAN policy 
to write to the current directory.  An obvious way to test this would be 
to make it unwriteable.

Duncan Murdoch

> 
> comes from
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
> 
> 
> On Wed, Mar 13, 2019 at 8:50 AM David Hugh-Jones <davidhughjones at gmail.com>
> wrote:
>>
>> Hi all,
>>
>> My package has errors on CRAN's Linux and Solaris:
>>
>> https://cran.r-project.org/web/checks/check_results_huxtable.html
>>
>> which I can't reproduce on my local OSX Machine, nor on Linux on Travis.
>>
>> Does anyone have any general hints on how to reproduce and/or debug such
>> errors?
>>
>> Specifically the error relates to a call to openxlsx::saveWorkbook
>> producing a message. openxlsx hasn't changed recently, though.
>>
>> Cheers,
>> David
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From m@x|me@turgeon @end|ng |rom m@||@mcg|||@c@  Wed Mar 13 21:21:46 2019
From: m@x|me@turgeon @end|ng |rom m@||@mcg|||@c@ (Maxime Turgeon)
Date: Wed, 13 Mar 2019 20:21:46 +0000
Subject: [R-pkg-devel] CRAN incoming checks fail due to non-staged
 installation
In-Reply-To: <CAGmyFCHt4iRN53Xn6pmc-cOEQNvmYLXc2WMWEhWNaPrVoG3jPw@mail.gmail.com>
References: <CAGmyFCHt4iRN53Xn6pmc-cOEQNvmYLXc2WMWEhWNaPrVoG3jPw@mail.gmail.com>
Message-ID: <QB1PR01MB35371DE754800DD3B482840FBA4A0@QB1PR01MB3537.CANPRD01.PROD.OUTLOOK.COM>

Hi David,

Non-staged installation is something new in R-devel: https://developer.r-project.org/Blog/public/2019/02/14/staged-install/index.html

Package maintainers can opt out of it (through DESCRIPTION), and I'm assuming CRAN wants a quick way to know if that was the case when diagnosing a submission.

To resolutely opt *in* (which will eventually be the default), you could try adding "StagedInstall: yes" to your DESCRIPTION file.

Of course, one question still remains: why was the behaviour different for the two architectures.

Max
________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of David Kepplinger <david.kepplinger at gmail.com>
Sent: March 13, 2019 3:39 PM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] CRAN incoming checks fail due to non-staged installation

Dear Community,

I am trying to update the pense package on CRAN to fix `autoreconf`
problems, but the incoming checks fail for Windows (r-devel) with 2 NOTEs.

The first NOTE is a HTTP 403 for a http://doi.org URL which I already know
about and can not change, but the other NOTE is more obscure to me. It says

* checking whether package 'pense' can be installed ... NOTE
Found the following notes/warnings:
  Non-staged installation was used


and when I check the install log, it says

install for i386
* installing *source* package 'pense' ...
** using staged installation
[....]
install for x64
* installing *source* package 'pense' ...
** using non-staged installation
[...]


Is this a false positive or is there something I can do to force using a
staged installation for both architectures on Windows?

Best,
David

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Wed Mar 13 22:44:38 2019
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Wed, 13 Mar 2019 17:44:38 -0400
Subject: [R-pkg-devel] staged install fails on Linux VM?
Message-ID: <4b0fec84-3ab4-ba59-36b1-2c8ca21054bb@math.mcmaster.ca>

  When I try to "R CMD check" a local copy of the lme4 package with
recent R-devel it consistently fails as follows *unless* I  first
"export R_INSTALL_STAGED=0".

** checking absolute paths in shared objects and dynamic libraries
mv: cannot move
'/media/sf_Documents/Rpkgs/lme4git/lme4.Rcheck/00LOCK-lme4/00new/lme4'
to '/media/sf_Documents/Rpkgs/lme4git/lme4.Rcheck/lme4': File exists
** testing if installed package can be loaded from final location
Warning in library(pkg_name, lib.loc = lib, character.only = TRUE,
logical.return = TRUE) :
  there is no package called ?lme4?

  This may be a consequence of my weird setup (Linux VM with shared
folders imported from on a 'real' MacOS HFS file system) [race
condition?], and I can use the workaround above, but I'm but I'm curious
if anyone else has encountered this (and if it indicates some problem
that's likely to bite me again in the future).
					
  cheers
    Ben Bolker


From d@v|d@kepp||nger @end|ng |rom gm@||@com  Wed Mar 13 23:34:43 2019
From: d@v|d@kepp||nger @end|ng |rom gm@||@com (David Kepplinger)
Date: Wed, 13 Mar 2019 15:34:43 -0700
Subject: [R-pkg-devel] CRAN incoming checks fail due to non-staged
 installation
In-Reply-To: <QB1PR01MB35371DE754800DD3B482840FBA4A0@QB1PR01MB3537.CANPRD01.PROD.OUTLOOK.COM>
References: <CAGmyFCHt4iRN53Xn6pmc-cOEQNvmYLXc2WMWEhWNaPrVoG3jPw@mail.gmail.com>
 <QB1PR01MB35371DE754800DD3B482840FBA4A0@QB1PR01MB3537.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <CAGmyFCHv7wnXCZBb7JS7=F8A-m=n_2o8VOn8gX+eJanv0n2fJw@mail.gmail.com>

Thank you, Max, for the clarification.
I have added the option "StagedInstall: yes" to the DESCRIPTION file, but
it doesn't seem to be forcing a staged installation for x64 on Windows. I
get the same NOTE now from winbuilder, but with more explanation which
could help isolate the problem:

install for i386
* installing *source* package 'pense' ...
** using staged installation
[...]
install for x64
* installing *source* package 'pense' ...
not using staged install with --libs-only
** using non-staged installation
[...]


Best,
David

On Wed, Mar 13, 2019 at 1:21 PM Maxime Turgeon <
maxime.turgeon at mail.mcgill.ca> wrote:

> Hi David,
>
> Non-staged installation is something new in R-devel:
> https://developer.r-project.org/Blog/public/2019/02/14/staged-install/index.html
>
>
> Package maintainers can opt out of it (through DESCRIPTION), and I'm
> assuming CRAN wants a quick way to know if that was the case when
> diagnosing a submission.
>
> To resolutely opt *in* (which will eventually be the default), you could
> try adding "StagedInstall: yes" to your DESCRIPTION file.
>
> Of course, one question still remains: why was the behaviour different for
> the two architectures.
>
> Max
> ------------------------------
> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on behalf
> of David Kepplinger <david.kepplinger at gmail.com>
> *Sent:* March 13, 2019 3:39 PM
> *To:* r-package-devel at r-project.org
> *Subject:* [R-pkg-devel] CRAN incoming checks fail due to non-staged
> installation
>
> Dear Community,
>
> I am trying to update the pense package on CRAN to fix `autoreconf`
> problems, but the incoming checks fail for Windows (r-devel) with 2 NOTEs.
>
> The first NOTE is a HTTP 403 for a http://doi.org URL which I already know
> about and can not change, but the other NOTE is more obscure to me. It says
>
> * checking whether package 'pense' can be installed ... NOTE
> Found the following notes/warnings:
>   Non-staged installation was used
>
>
> and when I check the install log, it says
>
> install for i386
> * installing *source* package 'pense' ...
> ** using staged installation
> [....]
> install for x64
> * installing *source* package 'pense' ...
> ** using non-staged installation
> [...]
>
>
> Is this a false positive or is there something I can do to force using a
> staged installation for both architectures on Windows?
>
> Best,
> David
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From d@v|dhughjone@ @end|ng |rom gm@||@com  Thu Mar 14 01:34:43 2019
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Thu, 14 Mar 2019 00:34:43 +0000
Subject: [R-pkg-devel] How to debug CRAN errors?
In-Reply-To: <47320346-16e8-b1d7-93fd-a987bde01576@gmail.com>
References: <CAARY7kgz5XUEa5t4BC46f0woiVfkTt40dXYDovERkmya44-eiA@mail.gmail.com>
 <CAF8bMcYwAt2xtX=duGwPsK3vEGUY-Q4o4rJmukj-hzscAA8Owg@mail.gmail.com>
 <47320346-16e8-b1d7-93fd-a987bde01576@gmail.com>
Message-ID: <CAARY7ki2FE1Opg7cqLdt1Gpk2Z95pSYvnQXP=Zj4FBgnKk1A+Q@mail.gmail.com>

Hi guys

That might be it. But there was no error until the latest release - whereas
that test has been there for 9 months. The file is written within
testthat... is there a new check for this in CRAN?

Meanwhile, I am still figuring out how to debug this problem. I uploaded to
r-hub... does anyone know how I can access the artifacts created after the
build? The URL build was

https://builder.r-hub.io/status/huxtable_4.4.0.tar.gz-b91485ad24b7a2f9c73bad2d51ebdb9d

David


>
> > By the way, I think your test test should write to a file in [a
> > subdirectory of]] tempdir(), not to a file in the current directory.
>
> That could be the source of the error:  it's a violation of CRAN policy
> to write to the current directory.  An obvious way to test this would be
> to make it unwriteable.
>
> Duncan Murdoch
>
> >
> > comes from
> > Bill Dunlap
> > TIBCO Software
> > wdunlap tibco.com
> >
> >
> > On Wed, Mar 13, 2019 at 8:50 AM David Hugh-Jones <
> davidhughjones at gmail.com>
> > wrote:
> >>
> >> Hi all,
> >>
> >> My package has errors on CRAN's Linux and Solaris:
> >>
> >> https://cran.r-project.org/web/checks/check_results_huxtable.html
> >>
> >> which I can't reproduce on my local OSX Machine, nor on Linux on Travis.
> >>
> >> Does anyone have any general hints on how to reproduce and/or debug such
> >> errors?
> >>
> >> Specifically the error relates to a call to openxlsx::saveWorkbook
> >> producing a message. openxlsx hasn't changed recently, though.
> >>
> >> Cheers,
> >> David
> >>
> >>          [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Mar 14 01:40:22 2019
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 13 Mar 2019 20:40:22 -0400
Subject: [R-pkg-devel] How to debug CRAN errors?
In-Reply-To: <CAARY7ki2FE1Opg7cqLdt1Gpk2Z95pSYvnQXP=Zj4FBgnKk1A+Q@mail.gmail.com>
References: <CAARY7kgz5XUEa5t4BC46f0woiVfkTt40dXYDovERkmya44-eiA@mail.gmail.com>
 <CAF8bMcYwAt2xtX=duGwPsK3vEGUY-Q4o4rJmukj-hzscAA8Owg@mail.gmail.com>
 <47320346-16e8-b1d7-93fd-a987bde01576@gmail.com>
 <CAARY7ki2FE1Opg7cqLdt1Gpk2Z95pSYvnQXP=Zj4FBgnKk1A+Q@mail.gmail.com>
Message-ID: <6258ce74-a812-438c-6a19-a61da6c01e1c@gmail.com>

On 13/03/2019 8:34 p.m., David Hugh-Jones wrote:
> 
> Hi guys
> 
> That might be it. But there was no error until the latest release - 
> whereas that test has been there for 9 months. The file is written 
> within testthat... is there a new check for this in CRAN?
> 
> Meanwhile, I am still figuring out how to debug this problem. I uploaded 
> to r-hub... does anyone know how I can access the artifacts created 
> after the build? The URL build was
> 
> https://builder.r-hub.io/status/huxtable_4.4.0.tar.gz-b91485ad24b7a2f9c73bad2d51ebdb9d

You should have got an email giving the link.  In the ones I've seen, 
you replace the prefix

https://builder.r-hub.io/status/

with

https://artifacts.r-hub.io/

and you'll see them.  It works for yours.

Duncan Murdoch

> 
> David
> 
> 
> 
>      > By the way, I think your test test should write to a file in [a
>      > subdirectory of]] tempdir(), not to a file in the current directory.
> 
>     That could be the source of the error:? it's a violation of CRAN policy
>     to write to the current directory.? An obvious way to test this
>     would be
>     to make it unwriteable.
> 
>     Duncan Murdoch
> 
>      >
>      > comes from
>      > Bill Dunlap
>      > TIBCO Software
>      > wdunlap tibco.com <http://tibco.com>
>      >
>      >
>      > On Wed, Mar 13, 2019 at 8:50 AM David Hugh-Jones
>     <davidhughjones at gmail.com <mailto:davidhughjones at gmail.com>>
>      > wrote:
>      >>
>      >> Hi all,
>      >>
>      >> My package has errors on CRAN's Linux and Solaris:
>      >>
>      >> https://cran.r-project.org/web/checks/check_results_huxtable.html
>      >>
>      >> which I can't reproduce on my local OSX Machine, nor on Linux on
>     Travis.
>      >>
>      >> Does anyone have any general hints on how to reproduce and/or
>     debug such
>      >> errors?
>      >>
>      >> Specifically the error relates to a call to openxlsx::saveWorkbook
>      >> producing a message. openxlsx hasn't changed recently, though.
>      >>
>      >> Cheers,
>      >> David
>      >>
>      >>? ? ? ? ? [[alternative HTML version deleted]]
>      >>
>      >> ______________________________________________
>      >> R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >
>      >? ? ? ?[[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >
>


From d@v|dhughjone@ @end|ng |rom gm@||@com  Thu Mar 14 08:48:01 2019
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Thu, 14 Mar 2019 07:48:01 +0000
Subject: [R-pkg-devel] How to debug CRAN errors?
In-Reply-To: <6258ce74-a812-438c-6a19-a61da6c01e1c@gmail.com>
References: <CAARY7kgz5XUEa5t4BC46f0woiVfkTt40dXYDovERkmya44-eiA@mail.gmail.com>
 <CAF8bMcYwAt2xtX=duGwPsK3vEGUY-Q4o4rJmukj-hzscAA8Owg@mail.gmail.com>
 <47320346-16e8-b1d7-93fd-a987bde01576@gmail.com>
 <CAARY7ki2FE1Opg7cqLdt1Gpk2Z95pSYvnQXP=Zj4FBgnKk1A+Q@mail.gmail.com>
 <6258ce74-a812-438c-6a19-a61da6c01e1c@gmail.com>
Message-ID: <CAARY7khr02wapKSgz_eXiOApYVdRNqS-gsQc2Tk9PORuCJ_Aig@mail.gmail.com>

Thank you! Got it. This should be close enough to CRAN, and there?s a
Docker image available too.

On Thu, 14 Mar 2019 at 00:40, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 13/03/2019 8:34 p.m., David Hugh-Jones wrote:
> >
> > Hi guys
> >
> > That might be it. But there was no error until the latest release -
> > whereas that test has been there for 9 months. The file is written
> > within testthat... is there a new check for this in CRAN?
> >
> > Meanwhile, I am still figuring out how to debug this problem. I uploaded
> > to r-hub... does anyone know how I can access the artifacts created
> > after the build? The URL build was
> >
> >
> https://builder.r-hub.io/status/huxtable_4.4.0.tar.gz-b91485ad24b7a2f9c73bad2d51ebdb9d
>
> You should have got an email giving the link.  In the ones I've seen,
> you replace the prefix
>
> https://builder.r-hub.io/status/
>
> with
>
> https://artifacts.r-hub.io/
>
> and you'll see them.  It works for yours.
>
> Duncan Murdoch
>
> >
> > David
> >
> >
> >
> >      > By the way, I think your test test should write to a file in [a
> >      > subdirectory of]] tempdir(), not to a file in the current
> directory.
> >
> >     That could be the source of the error:  it's a violation of CRAN
> policy
> >     to write to the current directory.  An obvious way to test this
> >     would be
> >     to make it unwriteable.
> >
> >     Duncan Murdoch
> >
> >      >
> >      > comes from
> >      > Bill Dunlap
> >      > TIBCO Software
> >      > wdunlap tibco.com <http://tibco.com>
> >      >
> >      >
> >      > On Wed, Mar 13, 2019 at 8:50 AM David Hugh-Jones
> >     <davidhughjones at gmail.com <mailto:davidhughjones at gmail.com>>
> >      > wrote:
> >      >>
> >      >> Hi all,
> >      >>
> >      >> My package has errors on CRAN's Linux and Solaris:
> >      >>
> >      >>
> https://cran.r-project.org/web/checks/check_results_huxtable.html
> >      >>
> >      >> which I can't reproduce on my local OSX Machine, nor on Linux on
> >     Travis.
> >      >>
> >      >> Does anyone have any general hints on how to reproduce and/or
> >     debug such
> >      >> errors?
> >      >>
> >      >> Specifically the error relates to a call to
> openxlsx::saveWorkbook
> >      >> producing a message. openxlsx hasn't changed recently, though.
> >      >>
> >      >> Cheers,
> >      >> David
> >      >>
> >      >>          [[alternative HTML version deleted]]
> >      >>
> >      >> ______________________________________________
> >      >> R-package-devel at r-project.org
> >     <mailto:R-package-devel at r-project.org> mailing list
> >      >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >      >
> >      >       [[alternative HTML version deleted]]
> >      >
> >      > ______________________________________________
> >      > R-package-devel at r-project.org
> >     <mailto:R-package-devel at r-project.org> mailing list
> >      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >      >
> >
>
> --
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From m@e||e@@@|mon @end|ng |rom y@hoo@@e  Thu Mar 14 13:50:10 2019
From: m@e||e@@@|mon @end|ng |rom y@hoo@@e (=?UTF-8?Q?Ma=C3=ABlle_SALMON?=)
Date: Thu, 14 Mar 2019 12:50:10 +0000 (UTC)
Subject: [R-pkg-devel] How to debug CRAN errors?
In-Reply-To: <CAARY7khr02wapKSgz_eXiOApYVdRNqS-gsQc2Tk9PORuCJ_Aig@mail.gmail.com>
References: <CAARY7kgz5XUEa5t4BC46f0woiVfkTt40dXYDovERkmya44-eiA@mail.gmail.com>
 <CAF8bMcYwAt2xtX=duGwPsK3vEGUY-Q4o4rJmukj-hzscAA8Owg@mail.gmail.com>
 <47320346-16e8-b1d7-93fd-a987bde01576@gmail.com>
 <CAARY7ki2FE1Opg7cqLdt1Gpk2Z95pSYvnQXP=Zj4FBgnKk1A+Q@mail.gmail.com>
 <6258ce74-a812-438c-6a19-a61da6c01e1c@gmail.com>
 <CAARY7khr02wapKSgz_eXiOApYVdRNqS-gsQc2Tk9PORuCJ_Aig@mail.gmail.com>
Message-ID: <431843875.8010958.1552567810181@mail.yahoo.com>

 To follow up on the great answers regarding R-hub,- to use R-hub Linux Docker images you can use this brand-new rhub function?https://r-hub.github.io/rhub/reference/local_check_linux.html (untested on Windows)- here's WIP R-hub docs entry about choosing a platform to reproduce an error?https://docs.r-hub.io/#rhub-cran-platforms
Ma?lle.




    Den torsdag 14 mars 2019 08:48:34 CET, David Hugh-Jones <davidhughjones at gmail.com> skrev:  
 
 Thank you! Got it. This should be close enough to CRAN, and there?s a
Docker image available too.

On Thu, 14 Mar 2019 at 00:40, Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 13/03/2019 8:34 p.m., David Hugh-Jones wrote:
> >
> > Hi guys
> >
> > That might be it. But there was no error until the latest release -
> > whereas that test has been there for 9 months. The file is written
> > within testthat... is there a new check for this in CRAN?
> >
> > Meanwhile, I am still figuring out how to debug this problem. I uploaded
> > to r-hub... does anyone know how I can access the artifacts created
> > after the build? The URL build was
> >
> >
> https://builder.r-hub.io/status/huxtable_4.4.0.tar.gz-b91485ad24b7a2f9c73bad2d51ebdb9d
>
> You should have got an email giving the link.? In the ones I've seen,
> you replace the prefix
>
> https://builder.r-hub.io/status/
>
> with
>
> https://artifacts.r-hub.io/
>
> and you'll see them.? It works for yours.
>
> Duncan Murdoch
>
> >
> > David
> >
> >
> >
> >? ? ? > By the way, I think your test test should write to a file in [a
> >? ? ? > subdirectory of]] tempdir(), not to a file in the current
> directory.
> >
> >? ? That could be the source of the error:? it's a violation of CRAN
> policy
> >? ? to write to the current directory.? An obvious way to test this
> >? ? would be
> >? ? to make it unwriteable.
> >
> >? ? Duncan Murdoch
> >
> >? ? ? >
> >? ? ? > comes from
> >? ? ? > Bill Dunlap
> >? ? ? > TIBCO Software
> >? ? ? > wdunlap tibco.com <http://tibco.com>
> >? ? ? >
> >? ? ? >
> >? ? ? > On Wed, Mar 13, 2019 at 8:50 AM David Hugh-Jones
> >? ? <davidhughjones at gmail.com <mailto:davidhughjones at gmail.com>>
> >? ? ? > wrote:
> >? ? ? >>
> >? ? ? >> Hi all,
> >? ? ? >>
> >? ? ? >> My package has errors on CRAN's Linux and Solaris:
> >? ? ? >>
> >? ? ? >>
> https://cran.r-project.org/web/checks/check_results_huxtable.html
> >? ? ? >>
> >? ? ? >> which I can't reproduce on my local OSX Machine, nor on Linux on
> >? ? Travis.
> >? ? ? >>
> >? ? ? >> Does anyone have any general hints on how to reproduce and/or
> >? ? debug such
> >? ? ? >> errors?
> >? ? ? >>
> >? ? ? >> Specifically the error relates to a call to
> openxlsx::saveWorkbook
> >? ? ? >> producing a message. openxlsx hasn't changed recently, though.
> >? ? ? >>
> >? ? ? >> Cheers,
> >? ? ? >> David
> >? ? ? >>
> >? ? ? >>? ? ? ? ? [[alternative HTML version deleted]]
> >? ? ? >>
> >? ? ? >> ______________________________________________
> >? ? ? >> R-package-devel at r-project.org
> >? ? <mailto:R-package-devel at r-project.org> mailing list
> >? ? ? >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >? ? ? >
> >? ? ? >? ? ? [[alternative HTML version deleted]]
> >? ? ? >
> >? ? ? > ______________________________________________
> >? ? ? > R-package-devel at r-project.org
> >? ? <mailto:R-package-devel at r-project.org> mailing list
> >? ? ? > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >? ? ? >
> >
>
> --
Sent from Gmail Mobile

??? [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel  
	[[alternative HTML version deleted]]


From jochen@@t@ud@cher @end|ng |rom h@-kempten@de  Fri Mar 15 18:51:01 2019
From: jochen@@t@ud@cher @end|ng |rom h@-kempten@de (Staudacher, Jochen, Prof. Dr.)
Date: Fri, 15 Mar 2019 17:51:01 +0000
Subject: [R-pkg-devel] Meaning and consequences of action pending in the
 submission pipeline
Message-ID: <1552672260303.42018@hs-kempten.de>

Dear colleagues,

I submitted a new package on Saturday, 9 March 2019.

Approx. 48 hours ago, i.e. on Wednesday, 13 March 2019, my package was moved to the subfolder "pending".

I am worried, because I did not receive any email from CRAN concerning why my package was "pending" and what I needed to do.

According to

https://journal.r-project.org/archive/2018-1/cran.pdf

the action "pending" in the submission pipeline means that a decision is pending a response from the package maintainer and implies the action includes an informative email message to the package maintainer.

Do I misunderstand the meaning and consequences of the action "pending"?

Any advice will be gratefully received.

Cheers,

Jochen


Prof. Dr. Jochen Staudacher
Fakult?t Informatik
Hochschule Kempten
Bahnhofstr. 61
87435 Kempten
Tel.: +49 (0)831 2523-513
Email: jochen.staudacher at hs-kempten.de

	[[alternative HTML version deleted]]


From d@v|dhughjone@ @end|ng |rom gm@||@com  Sat Mar 16 11:38:11 2019
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Sat, 16 Mar 2019 10:38:11 +0000
Subject: [R-pkg-devel] How to debug CRAN errors?
In-Reply-To: <431843875.8010958.1552567810181@mail.yahoo.com>
References: <CAARY7kgz5XUEa5t4BC46f0woiVfkTt40dXYDovERkmya44-eiA@mail.gmail.com>
 <CAF8bMcYwAt2xtX=duGwPsK3vEGUY-Q4o4rJmukj-hzscAA8Owg@mail.gmail.com>
 <47320346-16e8-b1d7-93fd-a987bde01576@gmail.com>
 <CAARY7ki2FE1Opg7cqLdt1Gpk2Z95pSYvnQXP=Zj4FBgnKk1A+Q@mail.gmail.com>
 <6258ce74-a812-438c-6a19-a61da6c01e1c@gmail.com>
 <CAARY7khr02wapKSgz_eXiOApYVdRNqS-gsQc2Tk9PORuCJ_Aig@mail.gmail.com>
 <431843875.8010958.1552567810181@mail.yahoo.com>
Message-ID: <CAARY7kjy85ADDVKJm+=wZSgmWWrVfrvG9ZD=G-CzmcL4ftOCYg@mail.gmail.com>

Thanks to Ma?lle for getting me fixed up with r-hub, which is looking quite
slick.

I debugged the problem and it comes down to the R tinytex package not
playing nicely with Debian?s texlive installation.

I  think the answer is just to turn off all relevant tests on CRAN. It?s
reasonable for them to use texlive, and reasonable for Yihui to not want to
support it; meanwhile Travis etc still run the tests.

Thanks for your help, everyone!

David


On Thu, 14 Mar 2019 at 12:50, Ma?lle SALMON <maelle.salmon at yahoo.se> wrote:

> To follow up on the great answers regarding R-hub,
> - to use R-hub Linux Docker images you can use this brand-new rhub
> function https://r-hub.github.io/rhub/reference/local_check_linux.html
> (untested on Windows)
> - here's WIP R-hub docs entry about choosing a platform to reproduce an
> error https://docs.r-hub.io/#rhub-cran-platforms
>
> Ma?lle.
>
>
>
>
> Den torsdag 14 mars 2019 08:48:34 CET, David Hugh-Jones <
> davidhughjones at gmail.com> skrev:
>
>
> Thank you! Got it. This should be close enough to CRAN, and there?s a
> Docker image available too.
>
> On Thu, 14 Mar 2019 at 00:40, Duncan Murdoch <murdoch.duncan at gmail.com>
> wrote:
>
> > On 13/03/2019 8:34 p.m., David Hugh-Jones wrote:
> > >
> > > Hi guys
> > >
> > > That might be it. But there was no error until the latest release -
> > > whereas that test has been there for 9 months. The file is written
> > > within testthat... is there a new check for this in CRAN?
> > >
> > > Meanwhile, I am still figuring out how to debug this problem. I
> uploaded
> > > to r-hub... does anyone know how I can access the artifacts created
> > > after the build? The URL build was
> > >
> > >
> >
> https://builder.r-hub.io/status/huxtable_4.4.0.tar.gz-b91485ad24b7a2f9c73bad2d51ebdb9d
> >
> > You should have got an email giving the link.  In the ones I've seen,
> > you replace the prefix
> >
> > https://builder.r-hub.io/status/
> >
> > with
> >
> > https://artifacts.r-hub.io/
> >
> > and you'll see them.  It works for yours.
> >
> > Duncan Murdoch
> >
> > >
> > > David
> > >
> > >
> > >
> > >      > By the way, I think your test test should write to a file in [a
> > >      > subdirectory of]] tempdir(), not to a file in the current
> > directory.
> > >
> > >    That could be the source of the error:  it's a violation of CRAN
> > policy
> > >    to write to the current directory.  An obvious way to test this
> > >    would be
> > >    to make it unwriteable.
> > >
> > >    Duncan Murdoch
> > >
> > >      >
> > >      > comes from
> > >      > Bill Dunlap
> > >      > TIBCO Software
> > >      > wdunlap tibco.com <http://tibco.com>
> > >      >
> > >      >
> > >      > On Wed, Mar 13, 2019 at 8:50 AM David Hugh-Jones
> > >    <davidhughjones at gmail.com <mailto:davidhughjones at gmail.com>>
> > >      > wrote:
> > >      >>
> > >      >> Hi all,
> > >      >>
> > >      >> My package has errors on CRAN's Linux and Solaris:
> > >      >>
> > >      >>
> > https://cran.r-project.org/web/checks/check_results_huxtable.html
> > >      >>
> > >      >> which I can't reproduce on my local OSX Machine, nor on Linux
> on
> > >    Travis.
> > >      >>
> > >      >> Does anyone have any general hints on how to reproduce and/or
> > >    debug such
> > >      >> errors?
> > >      >>
> > >      >> Specifically the error relates to a call to
> > openxlsx::saveWorkbook
> > >      >> producing a message. openxlsx hasn't changed recently, though.
> > >      >>
> > >      >> Cheers,
> > >      >> David
> > >      >>
> > >      >>          [[alternative HTML version deleted]]
> > >      >>
> > >      >> ______________________________________________
> > >      >> R-package-devel at r-project.org
> > >    <mailto:R-package-devel at r-project.org> mailing list
> > >      >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >      >
> > >      >      [[alternative HTML version deleted]]
> > >      >
> > >      > ______________________________________________
> > >      > R-package-devel at r-project.org
> > >    <mailto:R-package-devel at r-project.org> mailing list
> > >      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >      >
> > >
> >
> > --
> Sent from Gmail Mobile
>
>
>     [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
-- 
Sent from Gmail Mobile

	[[alternative HTML version deleted]]


From brod|e@g@@|@m @end|ng |rom y@hoo@com  Mon Mar 18 16:03:16 2019
From: brod|e@g@@|@m @end|ng |rom y@hoo@com (brodie gaslam)
Date: Mon, 18 Mar 2019 15:03:16 +0000 (UTC)
Subject: Installing Additional "Packages" During Tests
References: <751905254.7277586.1552921396648.ref@mail.yahoo.com>
Message-ID: <751905254.7277586.1552921396648@mail.yahoo.com>

My package unitizer has recently gained a new set of errors that look like:

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Mar 18 16:31:03 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 18 Mar 2019 16:31:03 +0100
Subject: [R-pkg-devel] Meaning and consequences of action pending in the
 submission pipeline
In-Reply-To: <1552672260303.42018@hs-kempten.de>
References: <1552672260303.42018@hs-kempten.de>
Message-ID: <1df458f8-ae95-0d25-8d81-21e8b80370f9@statistik.tu-dortmund.de>

pending means a team member has to do a closer inspection and needs more 
time while waiting means user reactions, this is a recent change since 
we wrote the publication you cited.

Best,
Uwe Ligges



On 15.03.2019 18:51, Staudacher, Jochen, Prof. Dr. wrote:
> Dear colleagues,
> 
> I submitted a new package on Saturday, 9 March 2019.
> 
> Approx. 48 hours ago, i.e. on Wednesday, 13 March 2019, my package was moved to the subfolder "pending".
> 
> I am worried, because I did not receive any email from CRAN concerning why my package was "pending" and what I needed to do.
> 
> According to
> 
> https://journal.r-project.org/archive/2018-1/cran.pdf
> 
> the action "pending" in the submission pipeline means that a decision is pending a response from the package maintainer and implies the action includes an informative email message to the package maintainer.
> 
> Do I misunderstand the meaning and consequences of the action "pending"?
> 
> Any advice will be gratefully received.
> 
> Cheers,
> 
> Jochen
> 
> 
> Prof. Dr. Jochen Staudacher
> Fakult?t Informatik
> Hochschule Kempten
> Bahnhofstr. 61
> 87435 Kempten
> Tel.: +49 (0)831 2523-513
> Email: jochen.staudacher at hs-kempten.de
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From brod|e@g@@|@m @end|ng |rom y@hoo@com  Mon Mar 18 16:48:32 2019
From: brod|e@g@@|@m @end|ng |rom y@hoo@com (brodie gaslam)
Date: Mon, 18 Mar 2019 15:48:32 +0000 (UTC)
Subject: Installing "Additional" Packages During Tests
References: <951055875.7281709.1552924112838.ref@mail.yahoo.com>
Message-ID: <951055875.7281709.1552924112838@mail.yahoo.com>

Sorry, previous e-mail got pre-maturely sent due to fat finger...
My package unitizer[1] has recently gained the following type of error:
???? Warning in install.packages(pkg, repos = NULL, type = "src") :???? 'lib = "/home/hornik/tmp/R.check/r-devel-clang/Work/build/Packages"' is not writable
???? Error in install.packages(pkg, repos = NULL, type = "src") : 
???? unable to install packages

While I did recently update the package to resolve the RNGversion issue, this problem seems unrelated as some of the CRAN machines produce it, and some don't, on the same package version.
The tests install some dummy packages with `install.packages`, and this has worked for a long time, but no longer, presumably due to changes in permissions of the test running daemon.? The packages are removed on.exit.? The packages are used for integration tests as unitizer is a package-testing-package and it is useful to be able to test functionality that includes use on actual packages that change.

Should I expect this to be the new normal, where I will be henceforth disallowed from installing packages temporarily?? Will there be an acceptable workaround (e.g. setting up a temporary library in a tempdir and try to `install.packages` into that; I admit I have no familiarity with this other than the vague awareness maybe this could be done)?
FWIW, perhaps an indication that this is something I shouldn't be doing came up earlier in the year when I had to resort to temporarily unsetting "R_TESTS" as per [2].
Thanks in advance for any input.
Best,
Brodie.


[1]: https://cran.r-project.org/web/checks/check_results_unitizer.html[2]: https://github.com/r-lib/testthat/issues/144
	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Mar 18 16:57:03 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 18 Mar 2019 16:57:03 +0100
Subject: [R-pkg-devel] Installing "Additional" Packages During Tests
In-Reply-To: <mailman.3634.3337.1552924123.8486.r-package-devel@r-project.org>
References: <951055875.7281709.1552924112838.ref@mail.yahoo.com>
 <mailman.3634.3337.1552924123.8486.r-package-devel@r-project.org>
Message-ID: <056ced73-cd8d-1696-e3b7-fb3296c1f506@statistik.tu-dortmund.de>

1. You should never install packages without asking the user.

2. a package should never write to the user file space or default 
libraries unless the user akss for it explicitly.
In tests, use tempdir().

3. You cannot expect that the library is writeable. It is not in many 
network installations.

Best,
Uwe Ligges



On 18.03.2019 16:48, brodie gaslam via R-package-devel wrote:
> 
> Subject:
> Installing "Additional" Packages During Tests
> From:
> brodie gaslam <brodie.gaslam at yahoo.com>
> Date:
> 18.03.2019, 16:48
> To:
> List R-package-devel <r-package-devel at r-project.org>
> 
> To:
> List R-package-devel <r-package-devel at r-project.org>
> 
> 
> Sorry, previous e-mail got pre-maturely sent due to fat finger...
> My package unitizer[1] has recently gained the following type of error:
>  ???? Warning in install.packages(pkg, repos = NULL, type = "src") :???? 'lib = "/home/hornik/tmp/R.check/r-devel-clang/Work/build/Packages"' is not writable
>  ???? Error in install.packages(pkg, repos = NULL, type = "src") :
>  ???? unable to install packages
> 
> While I did recently update the package to resolve the RNGversion issue, this problem seems unrelated as some of the CRAN machines produce it, and some don't, on the same package version.
> The tests install some dummy packages with `install.packages`, and this has worked for a long time, but no longer, presumably due to changes in permissions of the test running daemon.? The packages are removed on.exit.? The packages are used for integration tests as unitizer is a package-testing-package and it is useful to be able to test functionality that includes use on actual packages that change.
> 
> Should I expect this to be the new normal, where I will be henceforth disallowed from installing packages temporarily?? Will there be an acceptable workaround (e.g. setting up a temporary library in a tempdir and try to `install.packages` into that; I admit I have no familiarity with this other than the vague awareness maybe this could be done)?
> FWIW, perhaps an indication that this is something I shouldn't be doing came up earlier in the year when I had to resort to temporarily unsetting "R_TESTS" as per [2].
> Thanks in advance for any input.
> Best,
> Brodie.
> 
> 
> [1]: https://cran.r-project.org/web/checks/check_results_unitizer.html[2]: https://github.com/r-lib/testthat/issues/144
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From brod|e@g@@|@m @end|ng |rom y@hoo@com  Mon Mar 18 17:28:43 2019
From: brod|e@g@@|@m @end|ng |rom y@hoo@com (brodie gaslam)
Date: Mon, 18 Mar 2019 16:28:43 +0000 (UTC)
Subject: [R-pkg-devel] Installing "Additional" Packages During Tests
In-Reply-To: <056ced73-cd8d-1696-e3b7-fb3296c1f506@statistik.tu-dortmund.de>
References: <951055875.7281709.1552924112838.ref@mail.yahoo.com>
 <mailman.3634.3337.1552924123.8486.r-package-devel@r-project.org>
 <056ced73-cd8d-1696-e3b7-fb3296c1f506@statistik.tu-dortmund.de>
Message-ID: <1349647745.7292601.1552926523749@mail.yahoo.com>

 I believe your first point makes the alternate workflow below illegal, but the subsequent ones add just enough ambiguity that I'd like to makes sure.? How about:
0. Only during the running of tests
1. Create a temporary directory tmplib using tempfile()/dircreate().
2. Install dummy package to that temporary directory using `lib=tmplib`: install.packages(srcdir, type='src', repos=NULL, lib=tmplib).
3. In the tests, use library(testpkg, lib.loc=tmplib)4. unload / remove / unlink temp directory on.exit
This is only in the test running.? None of the code in the package proper that the user would invoke in normal use installs packages.? It only happens if the user installs and runs the tests, and with the above modification, it would only be into a temporary library directory.
Thank you for your patience and attention.
Best,
Brodie.


    On Monday, March 18, 2019, 11:56:55 AM EDT, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:  
 
 1. You should never install packages without asking the user.

2. a package should never write to the user file space or default 
libraries unless the user akss for it explicitly.
In tests, use tempdir().

3. You cannot expect that the library is writeable. It is not in many 
network installations.

Best,
Uwe Ligges



On 18.03.2019 16:48, brodie gaslam via R-package-devel wrote:
> 
> Subject:
> Installing "Additional" Packages During Tests
> From:
> brodie gaslam <brodie.gaslam at yahoo.com>
> Date:
> 18.03.2019, 16:48
> To:
> List R-package-devel <r-package-devel at r-project.org>
> 
> To:
> List R-package-devel <r-package-devel at r-project.org>
> 
> 
> Sorry, previous e-mail got pre-maturely sent due to fat finger...
> My package unitizer[1] has recently gained the following type of error:
>? ???? Warning in install.packages(pkg, repos = NULL, type = "src") :???? 'lib = "/home/hornik/tmp/R.check/r-devel-clang/Work/build/Packages"' is not writable
>? ???? Error in install.packages(pkg, repos = NULL, type = "src") :
>? ???? unable to install packages
> 
> While I did recently update the package to resolve the RNGversion issue, this problem seems unrelated as some of the CRAN machines produce it, and some don't, on the same package version.
> The tests install some dummy packages with `install.packages`, and this has worked for a long time, but no longer, presumably due to changes in permissions of the test running daemon.? The packages are removed on.exit.? The packages are used for integration tests as unitizer is a package-testing-package and it is useful to be able to test functionality that includes use on actual packages that change.
> 
> Should I expect this to be the new normal, where I will be henceforth disallowed from installing packages temporarily?? Will there be an acceptable workaround (e.g. setting up a temporary library in a tempdir and try to `install.packages` into that; I admit I have no familiarity with this other than the vague awareness maybe this could be done)?
> FWIW, perhaps an indication that this is something I shouldn't be doing came up earlier in the year when I had to resort to temporarily unsetting "R_TESTS" as per [2].
> Thanks in advance for any input.
> Best,
> Brodie.
> 
> 
> [1]: https://cran.r-project.org/web/checks/check_results_unitizer.html[2]: https://github.com/r-lib/testthat/issues/144
> ??? [[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
  
	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Mar 18 17:36:42 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 18 Mar 2019 17:36:42 +0100
Subject: [R-pkg-devel] Installing "Additional" Packages During Tests
In-Reply-To: <1349647745.7292601.1552926523749@mail.yahoo.com>
References: <951055875.7281709.1552924112838.ref@mail.yahoo.com>
 <mailman.3634.3337.1552924123.8486.r-package-devel@r-project.org>
 <056ced73-cd8d-1696-e3b7-fb3296c1f506@statistik.tu-dortmund.de>
 <1349647745.7292601.1552926523749@mail.yahoo.com>
Message-ID: <8abee552-c86c-8ba2-4a78-3a8b8131c6e4@statistik.tu-dortmund.de>



On 18.03.2019 17:28, brodie gaslam wrote:
> I believe your first point makes the alternate workflow below illegal, 
> but the subsequent ones add just enough ambiguity that I'd like to makes 
> sure.? How about:
> 
> 0. Only during the running of tests
> 1. Create a temporary directory tmplib using tempfile()/dircreate().
> 2. Install dummy package to that temporary directory using `lib=tmplib`: 
> install.packages(srcdir, type='src', repos=NULL, lib=tmplib).
> 3. In the tests, use library(testpkg, lib.loc=tmplib)
> 4. unload / remove / unlink temp directory on.exit
> 
> This is only in the test running.? None of the code in the package 
> proper that the user would invoke in normal use installs packages.? It 
> only happens if the user installs and runs the tests, and with the above 
> modification, it would only be into a temporary library directory.
> 
> Thank you for your patience and attention.

Please submit following these suggestions and the CRAN team will look 
into the details and decide.

Best,
Uwe



> Best,
> 
> Brodie.
> 
> 
> On Monday, March 18, 2019, 11:56:55 AM EDT, Uwe Ligges 
> <ligges at statistik.tu-dortmund.de> wrote:
> 
> 
> 1. You should never install packages without asking the user.
> 
> 2. a package should never write to the user file space or default
> libraries unless the user akss for it explicitly.
> In tests, use tempdir().
> 
> 3. You cannot expect that the library is writeable. It is not in many
> network installations.
> 
> Best,
> Uwe Ligges
> 
> 
> 
> On 18.03.2019 16:48, brodie gaslam via R-package-devel wrote:
>  >
>  > Subject:
>  > Installing "Additional" Packages During Tests
>  > From:
>  > brodie gaslam <brodie.gaslam at yahoo.com <mailto:brodie.gaslam at yahoo.com>>
>  > Date:
>  > 18.03.2019, 16:48
>  > To:
>  > List R-package-devel <r-package-devel at r-project.org 
> <mailto:r-package-devel at r-project.org>>
>  >
>  > To:
>  > List R-package-devel <r-package-devel at r-project.org 
> <mailto:r-package-devel at r-project.org>>
>  >
>  >
>  > Sorry, previous e-mail got pre-maturely sent due to fat finger...
>  > My package unitizer[1] has recently gained the following type of error:
>  >? ???? Warning in install.packages(pkg, repos = NULL, type = "src") 
> :???? 'lib = 
> "/home/hornik/tmp/R.check/r-devel-clang/Work/build/Packages"' is not 
> writable
>  >? ???? Error in install.packages(pkg, repos = NULL, type = "src") :
>  >? ???? unable to install packages
>  >
>  > While I did recently update the package to resolve the RNGversion 
> issue, this problem seems unrelated as some of the CRAN machines produce 
> it, and some don't, on the same package version.
>  > The tests install some dummy packages with `install.packages`, and 
> this has worked for a long time, but no longer, presumably due to 
> changes in permissions of the test running daemon.? The packages are 
> removed on.exit.? The packages are used for integration tests as 
> unitizer is a package-testing-package and it is useful to be able to 
> test functionality that includes use on actual packages that change.
>  >
>  > Should I expect this to be the new normal, where I will be henceforth 
> disallowed from installing packages temporarily?? Will there be an 
> acceptable workaround (e.g. setting up a temporary library in a tempdir 
> and try to `install.packages` into that; I admit I have no familiarity 
> with this other than the vague awareness maybe this could be done)?
>  > FWIW, perhaps an indication that this is something I shouldn't be 
> doing came up earlier in the year when I had to resort to temporarily 
> unsetting "R_TESTS" as per [2].
>  > Thanks in advance for any input.
>  > Best,
>  > Brodie.
>  >
>  >
>  > [1]: 
> https://cran.r-project.org/web/checks/check_results_unitizer.html[2]: 
> https://github.com/r-lib/testthat/issues/144
>  > ??? [[alternative HTML version deleted]]
>  >
>  >
>  > ______________________________________________
>  > R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> 
> mailing list
>  > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>  >


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Mar 18 17:34:53 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 18 Mar 2019 17:34:53 +0100
Subject: [R-pkg-devel] Installing "Additional" Packages During Tests
In-Reply-To: <1349647745.7292601.1552926523749@mail.yahoo.com>
References: <951055875.7281709.1552924112838.ref@mail.yahoo.com>
 <mailman.3634.3337.1552924123.8486.r-package-devel@r-project.org>
 <056ced73-cd8d-1696-e3b7-fb3296c1f506@statistik.tu-dortmund.de>
 <1349647745.7292601.1552926523749@mail.yahoo.com>
Message-ID: <fa5d4f79-2660-bd8d-c717-55d40ab047e9@statistik.tu-dortmund.de>

Simply resubmit such a package, we will lookninto the details and the 
team will decide.

Best,
Uwe  Ligges

On 18.03.2019 17:28, brodie gaslam wrote:
> I believe your first point makes the alternate workflow below illegal, 
> but the subsequent ones add just enough ambiguity that I'd like to makes 
> sure.? How about:
> 
> 0. Only during the running of tests
> 1. Create a temporary directory tmplib using tempfile()/dircreate().
> 2. Install dummy package to that temporary directory using `lib=tmplib`: 
> install.packages(srcdir, type='src', repos=NULL, lib=tmplib).
> 3. In the tests, use library(testpkg, lib.loc=tmplib)
> 4. unload / remove / unlink temp directory on.exit
> 
> This is only in the test running.? None of the code in the package 
> proper that the user would invoke in normal use installs packages.? It 
> only happens if the user installs and runs the tests, and with the above 
> modification, it would only be into a temporary library directory.
> 
> Thank you for your patience and attention.
> 
> Best,
> 
> Brodie.
> 
> 
> On Monday, March 18, 2019, 11:56:55 AM EDT, Uwe Ligges 
> <ligges at statistik.tu-dortmund.de> wrote:
> 
> 
> 1. You should never install packages without asking the user.
> 
> 2. a package should never write to the user file space or default
> libraries unless the user akss for it explicitly.
> In tests, use tempdir().
> 
> 3. You cannot expect that the library is writeable. It is not in many
> network installations.
> 
> Best,
> Uwe Ligges
> 
> 
> 
> On 18.03.2019 16:48, brodie gaslam via R-package-devel wrote:
>  >
>  > Subject:
>  > Installing "Additional" Packages During Tests
>  > From:
>  > brodie gaslam <brodie.gaslam at yahoo.com <mailto:brodie.gaslam at yahoo.com>>
>  > Date:
>  > 18.03.2019, 16:48
>  > To:
>  > List R-package-devel <r-package-devel at r-project.org 
> <mailto:r-package-devel at r-project.org>>
>  >
>  > To:
>  > List R-package-devel <r-package-devel at r-project.org 
> <mailto:r-package-devel at r-project.org>>
>  >
>  >
>  > Sorry, previous e-mail got pre-maturely sent due to fat finger...
>  > My package unitizer[1] has recently gained the following type of error:
>  >? ???? Warning in install.packages(pkg, repos = NULL, type = "src") 
> :???? 'lib = 
> "/home/hornik/tmp/R.check/r-devel-clang/Work/build/Packages"' is not 
> writable
>  >? ???? Error in install.packages(pkg, repos = NULL, type = "src") :
>  >? ???? unable to install packages
>  >
>  > While I did recently update the package to resolve the RNGversion 
> issue, this problem seems unrelated as some of the CRAN machines produce 
> it, and some don't, on the same package version.
>  > The tests install some dummy packages with `install.packages`, and 
> this has worked for a long time, but no longer, presumably due to 
> changes in permissions of the test running daemon.? The packages are 
> removed on.exit.? The packages are used for integration tests as 
> unitizer is a package-testing-package and it is useful to be able to 
> test functionality that includes use on actual packages that change.
>  >
>  > Should I expect this to be the new normal, where I will be henceforth 
> disallowed from installing packages temporarily?? Will there be an 
> acceptable workaround (e.g. setting up a temporary library in a tempdir 
> and try to `install.packages` into that; I admit I have no familiarity 
> with this other than the vague awareness maybe this could be done)?
>  > FWIW, perhaps an indication that this is something I shouldn't be 
> doing came up earlier in the year when I had to resort to temporarily 
> unsetting "R_TESTS" as per [2].
>  > Thanks in advance for any input.
>  > Best,
>  > Brodie.
>  >
>  >
>  > [1]: 
> https://cran.r-project.org/web/checks/check_results_unitizer.html[2]: 
> https://github.com/r-lib/testthat/issues/144
>  > ??? [[alternative HTML version deleted]]
>  >
>  >
>  > ______________________________________________
>  > R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> 
> mailing list
>  > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>  >


From R@|ner @end|ng |rom krug@@de  Tue Mar 19 12:11:17 2019
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Tue, 19 Mar 2019 12:11:17 +0100
Subject: [R-pkg-devel] 
 Checking for future file timestamps - warning with
 worldclockapi HTTP status 403 Site Disabled
In-Reply-To: <CABtg=KkCqvw=yB+bsMUMX8mkp0BxGzUB=ufdFgjOE5-_aGf7Eg@mail.gmail.com>
References: <C1C13933-05A9-465B-AB76-8C0E637CC069@mailbox.org>
 <5422D390-AAC5-43B4-9EFE-01EE9A3DEB53@krugs.de>
 <4847AF76-FD39-4376-B943-FDB09D0EE539@rud.is>
 <2A749434-4EFA-4F92-B95C-4E1F9308C3AD@gmail.com>
 <8B1CCC41-567A-4FB3-A686-3E1EA37F3EB7@rud.is>
 <CABdHhvGK8oj9AyMZrheumJ7vshgUCF+PEbF8dfia-pv_8FxWHg@mail.gmail.com>
 <CABdHhvH+Zc_FZ1gAjOPgwyJ2eS-vgNSgAfamjYBaQdPTnLFXhw@mail.gmail.com>
 <CADVZz_rv0KQp-Hz5rLrNvKnfvCuuzH2R3Ly1mek20b3b2W4ubQ@mail.gmail.com>
 <CABtg=KkCqvw=yB+bsMUMX8mkp0BxGzUB=ufdFgjOE5-_aGf7Eg@mail.gmail.com>
Message-ID: <FCBE4919-D8E9-4171-813E-3DC7899F9A46@krugs.de>

Can anyone confirm if this has been fixed? I would like to remove the _R_CHECK_SYSTEM_CLOCK_=0 but would like to know in advance.

Thanks

Rainer


> On 8 Mar 2019, at 10:03, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> 
> I think you can put this in appveyor.yml:
> 
> environment:
>   _R_CHECK_SYSTEM_CLOCK_: 0
> 
> before the "build_script" section.
> 
> Gabor
> 
> On Fri, Mar 8, 2019 at 5:15 AM Marta Kara? <marta.karass at gmail.com> wrote:
>> 
>> I have faced the same problem with using http://worldclockapi.com/. I dealt
>> with Travis fail (because warnings are changed to errors) after setting
>> environment variable _R_CHECK_SYSTEM_CLOCK_ to zero, as adviced above.
>> 
>> How I deal with appveyor fail for the same reason? It may be seen in my
>> built output here (link)
>> <https://ci.appveyor.com/project/martakarass/adept/build/job/vq4ncvg6qbh526u4>.
>> I googled but was unable to find the equivalent of
>> 
>> env:
>>  - _R_CHECK_SYSTEM_CLOCK_=0
>> 
>> 
>> for appveyor. Would appreciate any hint a lot - thank you!
>> Marta
>> 
>> On Thu, Mar 7, 2019 at 2:53 PM Hadley Wickham <h.wickham at gmail.com> wrote:
>> 
>>> As of ~7 hours ago, the warning is suppressed:
>>> 
>>> https://github.com/wch/r-source/commit/31ee14c620eb1b939acd322f3b5617f998aab8e8
>>> 
>>> (But the service still doesn't work)
>>> 
>>> Hadley
>>> 
>>> On Thu, Mar 7, 2019 at 11:03 AM Hadley Wickham <h.wickham at gmail.com>
>>> wrote:
>>>> 
>>>> It appears that the code was added by BDR on 2 Sep 2018:
>>>> 
>>> https://github.com/wch/r-source/commit/d839b1e04e173f90b51ad809ef0bdb18095abe6f
>>>> 
>>>> I assume we are seeing failing R CMD check results because
>>>> http://worldclockapi.com/api/json/utc/now has recently died.
>>>> 
>>>> It would be appreciated if someone from R-core could look into this as
>>>> it's currently causing all R-devel builds on travis to fail.
>>>> 
>>>> Hadley
>>>> 
>>>> On Thu, Mar 7, 2019 at 9:32 AM Bob Rudis <bob at rud.is> wrote:
>>>>> 
>>>>> (a) that's gd news (#ty)
>>>>> (b) genuine apologies for my confusion
>>>>> (c) why was the introduction of reliance on a third-party site even
>>> under consideration?
>>>>> 
>>>>>> On Mar 7, 2019, at 09:32, peter dalgaard <pdalgd at gmail.com> wrote:
>>>>>> 
>>>>>> It's not "stealth fixed"! It was never there... (on the release
>>> branch)
>>>>>> 
>>>>>> The timestamp checking code is still present in R-devel. I presume
>>> something needs to be done about the breakage.
>>>>>> 
>>>>>> - pd
>>>>>> 
>>>>>>> On 7 Mar 2019, at 14:38 , Bob Rudis <bob at rud.is> wrote:
>>>>>>> 
>>>>>>> It's fixed in the RC that's GA on the 11th.
>>>>>>> 
>>>>>>> I think perhaps "stealth fixed" may be more appropro since it's not
>>> in SVN logs, Bugzilla nor noted prominently in any of the various NEWS*
>>> files.
>>>>>>> 
>>>>>>> Then there's the "why was the core R installation using a third
>>> party, non-HTTPS site for this to begin with".
>>>>>>> 
>>>>>>> And, in other news, there are tests in the R source that rely on a
>>> check of `foo.bar` for connectivity. `.bar` is a valid domain and `foo.bar`
>>> is registered. Thankfully there's no current IP address associated with it.
>>> Anything under `*.invalid` (https://en.wikipedia.org/wiki/.invalid) might
>>> be a better choice as well since that won't break the reason for the
>>> connectivity checks and won't arbitrarily send telemetry pings to third
>>> parties in the even anyone outside of R Core decides to run the tests (say,
>>> when patching something in R).
>>>>>>> 
>>>>>>> -boB
>>>>>>> 
>>>>>>>> On Mar 7, 2019, at 07:54, Rainer M Krug <Rainer at krugs.de> wrote:
>>>>>>>> 
>>>>>>>> I can confirm the same when checking on travis with r-devel.
>>>>>>>> 
>>>>>>>> And thanks for the tip with
>>>>>>>> 
>>>>>>>> env:
>>>>>>>> - _R_CHECK_SYSTEM_CLOCK_=0
>>>>>>>> 
>>>>>>>> In .travis.yml
>>>>>>>> 
>>>>>>>> Seems to be working now
>>>>>>>> 
>>>>>>>> Rainer
>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>>>> On 7 Mar 2019, at 12:48, Ralf Herold <ralf.herold at mailbox.org>
>>> wrote:
>>>>>>>>> 
>>>>>>>>> Dear All,
>>>>>>>>> 
>>>>>>>>> Checking a new package under development produces a warning in a
>>> local R-devel MS Windows environment (output below).
>>>>>>>>> 
>>>>>>>>> Building it with R-devel on Travis fails (because warnings are
>>> changed to errors), but is successful when setting environment variable
>>> _R_CHECK_SYSTEM_CLOCK_ to zero.
>>>>>>>>> 
>>>>>>>>> No issue occurs when checking and building with R-stable and
>>> R-oldrel on Travis, or with any R version on win-builder.r-project.org.
>>>>>>>>> 
>>>>>>>>> The warning concerns using http://worldclockapi.com/, which
>>> however seems out of service ("The web app you have attempted to reach is
>>> currently stopped and does not accept any requests."). This is referenced
>>> in the main function for R CMD check (
>>> https://svn.r-project.org/R/trunk/src/library/tools/R/check.R) and may
>>> concern more R-devel than R-package-devel. I am posting here to check if
>>> the issue was noticed by other package developers and to check the impact.
>>>>>>>>> 
>>>>>>>>> Thanks for any suggestions.
>>>>>>>>> Best regards,
>>>>>>>>> Ralf
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> PS C:\Users\username> & 'C:\Program Files\R\R-devel\bin\R.exe'
>>> CMD check E:\mypackage_0.1.2.3.tar.gz --as-cran
>>>>>>>>> * using log directory 'C:/Users/username/ctrdata.Rcheck'
>>>>>>>>> * using R Under development (unstable) (2019-03-05 r76200)
>>>>>>>>> * using platform: x86_64-w64-mingw32 (64-bit)
>>>>>>>>> * using session charset: ISO8859-1
>>>>>>>>> * using option '--as-cran'
>>>>>>>>> [...]
>>>>>>>>> * checking package directory ... OK
>>>>>>>>> * checking for future file timestamps ...Warning in file(con,
>>> "r") :
>>>>>>>>> cannot open URL 'http://worldclockapi.com/api/json/utc/now':
>>> HTTP status was '403 Site Disabled'
>>>>>>>>> WARNING
>>>>>>>>> unable to verify current time
>>>>>>>>> * checking 'build' directory ? OK
>>>>>>>>> [...]
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> 
>>>>>>>>> ## Ralf Herold
>>>>>>>>> ## mailto: ralf.herold at mailbox.org [S/MIME]
>>>>>>>>> ## https://paediatricdata.eu/
>>>>>>>>> 
>>>>>>>>> ______________________________________________
>>>>>>>>> R-package-devel at r-project.org mailing list
>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>>> --
>>>>>>>> Rainer M. Krug
>>>>>>>> email: Rainer<at>krugs<dot>de
>>>>>>>> PGP: 0x0F52F982
>>>>>>>> 
>>>>>>>> 
>>>>>>>>    [[alternative HTML version deleted]]
>>>>>>>> 
>>>>>>>> ______________________________________________
>>>>>>>> R-package-devel at r-project.org mailing list
>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>> 
>>>>>>> ______________________________________________
>>>>>>> R-package-devel at r-project.org mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>> 
>>>>>> --
>>>>>> Peter Dalgaard, Professor,
>>>>>> Center for Statistics, Copenhagen Business School
>>>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>>>> Phone: (+45)38153501
>>>>>> Office: A 4.23
>>>>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>> 
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>> 
>>>> 
>>>> 
>>>> --
>>>> http://hadley.nz
>>> 
>>> 
>>> 
>>> --
>>> http://hadley.nz
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> 
>> 
>>        [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Mar 19 12:14:35 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 19 Mar 2019 11:14:35 +0000
Subject: [R-pkg-devel] 
 Checking for future file timestamps - warning with
 worldclockapi HTTP status 403 Site Disabled
In-Reply-To: <FCBE4919-D8E9-4171-813E-3DC7899F9A46@krugs.de>
References: <C1C13933-05A9-465B-AB76-8C0E637CC069@mailbox.org>
 <5422D390-AAC5-43B4-9EFE-01EE9A3DEB53@krugs.de>
 <4847AF76-FD39-4376-B943-FDB09D0EE539@rud.is>
 <2A749434-4EFA-4F92-B95C-4E1F9308C3AD@gmail.com>
 <8B1CCC41-567A-4FB3-A686-3E1EA37F3EB7@rud.is>
 <CABdHhvGK8oj9AyMZrheumJ7vshgUCF+PEbF8dfia-pv_8FxWHg@mail.gmail.com>
 <CABdHhvH+Zc_FZ1gAjOPgwyJ2eS-vgNSgAfamjYBaQdPTnLFXhw@mail.gmail.com>
 <CADVZz_rv0KQp-Hz5rLrNvKnfvCuuzH2R3Ly1mek20b3b2W4ubQ@mail.gmail.com>
 <CABtg=KkCqvw=yB+bsMUMX8mkp0BxGzUB=ufdFgjOE5-_aGf7Eg@mail.gmail.com>
 <FCBE4919-D8E9-4171-813E-3DC7899F9A46@krugs.de>
Message-ID: <CABtg=K=KP10dzPvSFAn8Do2Sk09z6OQRdG8x7Brz+8hfKjLOMA@mail.gmail.com>

AFAICT you can still get a NOTE about it, so I would just leave the
workaround in place:
https://github.com/wch/r-source/blob/87110b6b9e20c324c44766cc8f5816580f681a2a/src/library/tools/R/check.R#L457

G.

On Tue, Mar 19, 2019 at 11:11 AM Rainer M Krug <Rainer at krugs.de> wrote:
>
> Can anyone confirm if this has been fixed? I would like to remove the _R_CHECK_SYSTEM_CLOCK_=0 but would like to know in advance.
>
> Thanks
>
> Rainer
>
>
> > On 8 Mar 2019, at 10:03, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> >
> > I think you can put this in appveyor.yml:
> >
> > environment:
> >   _R_CHECK_SYSTEM_CLOCK_: 0
> >
> > before the "build_script" section.
> >
> > Gabor
> >
> > On Fri, Mar 8, 2019 at 5:15 AM Marta Kara? <marta.karass at gmail.com> wrote:
> >>
> >> I have faced the same problem with using http://worldclockapi.com/. I dealt
> >> with Travis fail (because warnings are changed to errors) after setting
> >> environment variable _R_CHECK_SYSTEM_CLOCK_ to zero, as adviced above.
> >>
> >> How I deal with appveyor fail for the same reason? It may be seen in my
> >> built output here (link)
> >> <https://ci.appveyor.com/project/martakarass/adept/build/job/vq4ncvg6qbh526u4>.
> >> I googled but was unable to find the equivalent of
> >>
> >> env:
> >>  - _R_CHECK_SYSTEM_CLOCK_=0
> >>
> >>
> >> for appveyor. Would appreciate any hint a lot - thank you!
> >> Marta
> >>
> >> On Thu, Mar 7, 2019 at 2:53 PM Hadley Wickham <h.wickham at gmail.com> wrote:
> >>
> >>> As of ~7 hours ago, the warning is suppressed:
> >>>
> >>> https://github.com/wch/r-source/commit/31ee14c620eb1b939acd322f3b5617f998aab8e8
> >>>
> >>> (But the service still doesn't work)
> >>>
> >>> Hadley
> >>>
> >>> On Thu, Mar 7, 2019 at 11:03 AM Hadley Wickham <h.wickham at gmail.com>
> >>> wrote:
> >>>>
> >>>> It appears that the code was added by BDR on 2 Sep 2018:
> >>>>
> >>> https://github.com/wch/r-source/commit/d839b1e04e173f90b51ad809ef0bdb18095abe6f
> >>>>
> >>>> I assume we are seeing failing R CMD check results because
> >>>> http://worldclockapi.com/api/json/utc/now has recently died.
> >>>>
> >>>> It would be appreciated if someone from R-core could look into this as
> >>>> it's currently causing all R-devel builds on travis to fail.
> >>>>
> >>>> Hadley
> >>>>
> >>>> On Thu, Mar 7, 2019 at 9:32 AM Bob Rudis <bob at rud.is> wrote:
> >>>>>
> >>>>> (a) that's gd news (#ty)
> >>>>> (b) genuine apologies for my confusion
> >>>>> (c) why was the introduction of reliance on a third-party site even
> >>> under consideration?
> >>>>>
> >>>>>> On Mar 7, 2019, at 09:32, peter dalgaard <pdalgd at gmail.com> wrote:
> >>>>>>
> >>>>>> It's not "stealth fixed"! It was never there... (on the release
> >>> branch)
> >>>>>>
> >>>>>> The timestamp checking code is still present in R-devel. I presume
> >>> something needs to be done about the breakage.
> >>>>>>
> >>>>>> - pd
> >>>>>>
> >>>>>>> On 7 Mar 2019, at 14:38 , Bob Rudis <bob at rud.is> wrote:
> >>>>>>>
> >>>>>>> It's fixed in the RC that's GA on the 11th.
> >>>>>>>
> >>>>>>> I think perhaps "stealth fixed" may be more appropro since it's not
> >>> in SVN logs, Bugzilla nor noted prominently in any of the various NEWS*
> >>> files.
> >>>>>>>
> >>>>>>> Then there's the "why was the core R installation using a third
> >>> party, non-HTTPS site for this to begin with".
> >>>>>>>
> >>>>>>> And, in other news, there are tests in the R source that rely on a
> >>> check of `foo.bar` for connectivity. `.bar` is a valid domain and `foo.bar`
> >>> is registered. Thankfully there's no current IP address associated with it.
> >>> Anything under `*.invalid` (https://en.wikipedia.org/wiki/.invalid) might
> >>> be a better choice as well since that won't break the reason for the
> >>> connectivity checks and won't arbitrarily send telemetry pings to third
> >>> parties in the even anyone outside of R Core decides to run the tests (say,
> >>> when patching something in R).
> >>>>>>>
> >>>>>>> -boB
> >>>>>>>
> >>>>>>>> On Mar 7, 2019, at 07:54, Rainer M Krug <Rainer at krugs.de> wrote:
> >>>>>>>>
> >>>>>>>> I can confirm the same when checking on travis with r-devel.
> >>>>>>>>
> >>>>>>>> And thanks for the tip with
> >>>>>>>>
> >>>>>>>> env:
> >>>>>>>> - _R_CHECK_SYSTEM_CLOCK_=0
> >>>>>>>>
> >>>>>>>> In .travis.yml
> >>>>>>>>
> >>>>>>>> Seems to be working now
> >>>>>>>>
> >>>>>>>> Rainer
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>> On 7 Mar 2019, at 12:48, Ralf Herold <ralf.herold at mailbox.org>
> >>> wrote:
> >>>>>>>>>
> >>>>>>>>> Dear All,
> >>>>>>>>>
> >>>>>>>>> Checking a new package under development produces a warning in a
> >>> local R-devel MS Windows environment (output below).
> >>>>>>>>>
> >>>>>>>>> Building it with R-devel on Travis fails (because warnings are
> >>> changed to errors), but is successful when setting environment variable
> >>> _R_CHECK_SYSTEM_CLOCK_ to zero.
> >>>>>>>>>
> >>>>>>>>> No issue occurs when checking and building with R-stable and
> >>> R-oldrel on Travis, or with any R version on win-builder.r-project.org.
> >>>>>>>>>
> >>>>>>>>> The warning concerns using http://worldclockapi.com/, which
> >>> however seems out of service ("The web app you have attempted to reach is
> >>> currently stopped and does not accept any requests."). This is referenced
> >>> in the main function for R CMD check (
> >>> https://svn.r-project.org/R/trunk/src/library/tools/R/check.R) and may
> >>> concern more R-devel than R-package-devel. I am posting here to check if
> >>> the issue was noticed by other package developers and to check the impact.
> >>>>>>>>>
> >>>>>>>>> Thanks for any suggestions.
> >>>>>>>>> Best regards,
> >>>>>>>>> Ralf
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>> PS C:\Users\username> & 'C:\Program Files\R\R-devel\bin\R.exe'
> >>> CMD check E:\mypackage_0.1.2.3.tar.gz --as-cran
> >>>>>>>>> * using log directory 'C:/Users/username/ctrdata.Rcheck'
> >>>>>>>>> * using R Under development (unstable) (2019-03-05 r76200)
> >>>>>>>>> * using platform: x86_64-w64-mingw32 (64-bit)
> >>>>>>>>> * using session charset: ISO8859-1
> >>>>>>>>> * using option '--as-cran'
> >>>>>>>>> [...]
> >>>>>>>>> * checking package directory ... OK
> >>>>>>>>> * checking for future file timestamps ...Warning in file(con,
> >>> "r") :
> >>>>>>>>> cannot open URL 'http://worldclockapi.com/api/json/utc/now':
> >>> HTTP status was '403 Site Disabled'
> >>>>>>>>> WARNING
> >>>>>>>>> unable to verify current time
> >>>>>>>>> * checking 'build' directory ? OK
> >>>>>>>>> [...]
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>> ## Ralf Herold
> >>>>>>>>> ## mailto: ralf.herold at mailbox.org [S/MIME]
> >>>>>>>>> ## https://paediatricdata.eu/
> >>>>>>>>>
> >>>>>>>>> ______________________________________________
> >>>>>>>>> R-package-devel at r-project.org mailing list
> >>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>> --
> >>>>>>>> Rainer M. Krug
> >>>>>>>> email: Rainer<at>krugs<dot>de
> >>>>>>>> PGP: 0x0F52F982
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>    [[alternative HTML version deleted]]
> >>>>>>>>
> >>>>>>>> ______________________________________________
> >>>>>>>> R-package-devel at r-project.org mailing list
> >>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>>>>>
> >>>>>>> ______________________________________________
> >>>>>>> R-package-devel at r-project.org mailing list
> >>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>>>>
> >>>>>> --
> >>>>>> Peter Dalgaard, Professor,
> >>>>>> Center for Statistics, Copenhagen Business School
> >>>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
> >>>>>> Phone: (+45)38153501
> >>>>>> Office: A 4.23
> >>>>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>
> >>>>> ______________________________________________
> >>>>> R-package-devel at r-project.org mailing list
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>>
> >>>>
> >>>>
> >>>> --
> >>>> http://hadley.nz
> >>>
> >>>
> >>>
> >>> --
> >>> http://hadley.nz
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>>
> >>
> >>        [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>


From R@|ner @end|ng |rom krug@@de  Tue Mar 19 12:17:29 2019
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Tue, 19 Mar 2019 12:17:29 +0100
Subject: [R-pkg-devel] 
 Checking for future file timestamps - warning with
 worldclockapi HTTP status 403 Site Disabled
In-Reply-To: <CABtg=K=KP10dzPvSFAn8Do2Sk09z6OQRdG8x7Brz+8hfKjLOMA@mail.gmail.com>
References: <C1C13933-05A9-465B-AB76-8C0E637CC069@mailbox.org>
 <5422D390-AAC5-43B4-9EFE-01EE9A3DEB53@krugs.de>
 <4847AF76-FD39-4376-B943-FDB09D0EE539@rud.is>
 <2A749434-4EFA-4F92-B95C-4E1F9308C3AD@gmail.com>
 <8B1CCC41-567A-4FB3-A686-3E1EA37F3EB7@rud.is>
 <CABdHhvGK8oj9AyMZrheumJ7vshgUCF+PEbF8dfia-pv_8FxWHg@mail.gmail.com>
 <CABdHhvH+Zc_FZ1gAjOPgwyJ2eS-vgNSgAfamjYBaQdPTnLFXhw@mail.gmail.com>
 <CADVZz_rv0KQp-Hz5rLrNvKnfvCuuzH2R3Ly1mek20b3b2W4ubQ@mail.gmail.com>
 <CABtg=KkCqvw=yB+bsMUMX8mkp0BxGzUB=ufdFgjOE5-_aGf7Eg@mail.gmail.com>
 <FCBE4919-D8E9-4171-813E-3DC7899F9A46@krugs.de>
 <CABtg=K=KP10dzPvSFAn8Do2Sk09z6OQRdG8x7Brz+8hfKjLOMA@mail.gmail.com>
Message-ID: <F7FE989F-23DA-407D-9939-6BA53248731E@krugs.de>

Thanks - will do so.

Rainer

> On 19 Mar 2019, at 12:14, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> 
> AFAICT you can still get a NOTE about it, so I would just leave the
> workaround in place:
> https://github.com/wch/r-source/blob/87110b6b9e20c324c44766cc8f5816580f681a2a/src/library/tools/R/check.R#L457
> 
> G.
> 
> On Tue, Mar 19, 2019 at 11:11 AM Rainer M Krug <Rainer at krugs.de> wrote:
>> 
>> Can anyone confirm if this has been fixed? I would like to remove the _R_CHECK_SYSTEM_CLOCK_=0 but would like to know in advance.
>> 
>> Thanks
>> 
>> Rainer
>> 
>> 
>>> On 8 Mar 2019, at 10:03, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>>> 
>>> I think you can put this in appveyor.yml:
>>> 
>>> environment:
>>>  _R_CHECK_SYSTEM_CLOCK_: 0
>>> 
>>> before the "build_script" section.
>>> 
>>> Gabor
>>> 
>>> On Fri, Mar 8, 2019 at 5:15 AM Marta Kara? <marta.karass at gmail.com> wrote:
>>>> 
>>>> I have faced the same problem with using http://worldclockapi.com/. I dealt
>>>> with Travis fail (because warnings are changed to errors) after setting
>>>> environment variable _R_CHECK_SYSTEM_CLOCK_ to zero, as adviced above.
>>>> 
>>>> How I deal with appveyor fail for the same reason? It may be seen in my
>>>> built output here (link)
>>>> <https://ci.appveyor.com/project/martakarass/adept/build/job/vq4ncvg6qbh526u4>.
>>>> I googled but was unable to find the equivalent of
>>>> 
>>>> env:
>>>> - _R_CHECK_SYSTEM_CLOCK_=0
>>>> 
>>>> 
>>>> for appveyor. Would appreciate any hint a lot - thank you!
>>>> Marta
>>>> 
>>>> On Thu, Mar 7, 2019 at 2:53 PM Hadley Wickham <h.wickham at gmail.com> wrote:
>>>> 
>>>>> As of ~7 hours ago, the warning is suppressed:
>>>>> 
>>>>> https://github.com/wch/r-source/commit/31ee14c620eb1b939acd322f3b5617f998aab8e8
>>>>> 
>>>>> (But the service still doesn't work)
>>>>> 
>>>>> Hadley
>>>>> 
>>>>> On Thu, Mar 7, 2019 at 11:03 AM Hadley Wickham <h.wickham at gmail.com>
>>>>> wrote:
>>>>>> 
>>>>>> It appears that the code was added by BDR on 2 Sep 2018:
>>>>>> 
>>>>> https://github.com/wch/r-source/commit/d839b1e04e173f90b51ad809ef0bdb18095abe6f
>>>>>> 
>>>>>> I assume we are seeing failing R CMD check results because
>>>>>> http://worldclockapi.com/api/json/utc/now has recently died.
>>>>>> 
>>>>>> It would be appreciated if someone from R-core could look into this as
>>>>>> it's currently causing all R-devel builds on travis to fail.
>>>>>> 
>>>>>> Hadley
>>>>>> 
>>>>>> On Thu, Mar 7, 2019 at 9:32 AM Bob Rudis <bob at rud.is> wrote:
>>>>>>> 
>>>>>>> (a) that's gd news (#ty)
>>>>>>> (b) genuine apologies for my confusion
>>>>>>> (c) why was the introduction of reliance on a third-party site even
>>>>> under consideration?
>>>>>>> 
>>>>>>>> On Mar 7, 2019, at 09:32, peter dalgaard <pdalgd at gmail.com> wrote:
>>>>>>>> 
>>>>>>>> It's not "stealth fixed"! It was never there... (on the release
>>>>> branch)
>>>>>>>> 
>>>>>>>> The timestamp checking code is still present in R-devel. I presume
>>>>> something needs to be done about the breakage.
>>>>>>>> 
>>>>>>>> - pd
>>>>>>>> 
>>>>>>>>> On 7 Mar 2019, at 14:38 , Bob Rudis <bob at rud.is> wrote:
>>>>>>>>> 
>>>>>>>>> It's fixed in the RC that's GA on the 11th.
>>>>>>>>> 
>>>>>>>>> I think perhaps "stealth fixed" may be more appropro since it's not
>>>>> in SVN logs, Bugzilla nor noted prominently in any of the various NEWS*
>>>>> files.
>>>>>>>>> 
>>>>>>>>> Then there's the "why was the core R installation using a third
>>>>> party, non-HTTPS site for this to begin with".
>>>>>>>>> 
>>>>>>>>> And, in other news, there are tests in the R source that rely on a
>>>>> check of `foo.bar` for connectivity. `.bar` is a valid domain and `foo.bar`
>>>>> is registered. Thankfully there's no current IP address associated with it.
>>>>> Anything under `*.invalid` (https://en.wikipedia.org/wiki/.invalid) might
>>>>> be a better choice as well since that won't break the reason for the
>>>>> connectivity checks and won't arbitrarily send telemetry pings to third
>>>>> parties in the even anyone outside of R Core decides to run the tests (say,
>>>>> when patching something in R).
>>>>>>>>> 
>>>>>>>>> -boB
>>>>>>>>> 
>>>>>>>>>> On Mar 7, 2019, at 07:54, Rainer M Krug <Rainer at krugs.de> wrote:
>>>>>>>>>> 
>>>>>>>>>> I can confirm the same when checking on travis with r-devel.
>>>>>>>>>> 
>>>>>>>>>> And thanks for the tip with
>>>>>>>>>> 
>>>>>>>>>> env:
>>>>>>>>>> - _R_CHECK_SYSTEM_CLOCK_=0
>>>>>>>>>> 
>>>>>>>>>> In .travis.yml
>>>>>>>>>> 
>>>>>>>>>> Seems to be working now
>>>>>>>>>> 
>>>>>>>>>> Rainer
>>>>>>>>>> 
>>>>>>>>>> 
>>>>>>>>>> 
>>>>>>>>>>> On 7 Mar 2019, at 12:48, Ralf Herold <ralf.herold at mailbox.org>
>>>>> wrote:
>>>>>>>>>>> 
>>>>>>>>>>> Dear All,
>>>>>>>>>>> 
>>>>>>>>>>> Checking a new package under development produces a warning in a
>>>>> local R-devel MS Windows environment (output below).
>>>>>>>>>>> 
>>>>>>>>>>> Building it with R-devel on Travis fails (because warnings are
>>>>> changed to errors), but is successful when setting environment variable
>>>>> _R_CHECK_SYSTEM_CLOCK_ to zero.
>>>>>>>>>>> 
>>>>>>>>>>> No issue occurs when checking and building with R-stable and
>>>>> R-oldrel on Travis, or with any R version on win-builder.r-project.org.
>>>>>>>>>>> 
>>>>>>>>>>> The warning concerns using http://worldclockapi.com/, which
>>>>> however seems out of service ("The web app you have attempted to reach is
>>>>> currently stopped and does not accept any requests."). This is referenced
>>>>> in the main function for R CMD check (
>>>>> https://svn.r-project.org/R/trunk/src/library/tools/R/check.R) and may
>>>>> concern more R-devel than R-package-devel. I am posting here to check if
>>>>> the issue was noticed by other package developers and to check the impact.
>>>>>>>>>>> 
>>>>>>>>>>> Thanks for any suggestions.
>>>>>>>>>>> Best regards,
>>>>>>>>>>> Ralf
>>>>>>>>>>> 
>>>>>>>>>>> 
>>>>>>>>>>> PS C:\Users\username> & 'C:\Program Files\R\R-devel\bin\R.exe'
>>>>> CMD check E:\mypackage_0.1.2.3.tar.gz --as-cran
>>>>>>>>>>> * using log directory 'C:/Users/username/ctrdata.Rcheck'
>>>>>>>>>>> * using R Under development (unstable) (2019-03-05 r76200)
>>>>>>>>>>> * using platform: x86_64-w64-mingw32 (64-bit)
>>>>>>>>>>> * using session charset: ISO8859-1
>>>>>>>>>>> * using option '--as-cran'
>>>>>>>>>>> [...]
>>>>>>>>>>> * checking package directory ... OK
>>>>>>>>>>> * checking for future file timestamps ...Warning in file(con,
>>>>> "r") :
>>>>>>>>>>> cannot open URL 'http://worldclockapi.com/api/json/utc/now':
>>>>> HTTP status was '403 Site Disabled'
>>>>>>>>>>> WARNING
>>>>>>>>>>> unable to verify current time
>>>>>>>>>>> * checking 'build' directory ? OK
>>>>>>>>>>> [...]
>>>>>>>>>>> 
>>>>>>>>>>> 
>>>>>>>>>>> 
>>>>>>>>>>> ## Ralf Herold
>>>>>>>>>>> ## mailto: ralf.herold at mailbox.org [S/MIME]
>>>>>>>>>>> ## https://paediatricdata.eu/
>>>>>>>>>>> 
>>>>>>>>>>> ______________________________________________
>>>>>>>>>>> R-package-devel at r-project.org mailing list
>>>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>>>>> 
>>>>>>>>>> 
>>>>>>>>>> 
>>>>>>>>>> 
>>>>>>>>>> --
>>>>>>>>>> Rainer M. Krug
>>>>>>>>>> email: Rainer<at>krugs<dot>de
>>>>>>>>>> PGP: 0x0F52F982
>>>>>>>>>> 
>>>>>>>>>> 
>>>>>>>>>>   [[alternative HTML version deleted]]
>>>>>>>>>> 
>>>>>>>>>> ______________________________________________
>>>>>>>>>> R-package-devel at r-project.org mailing list
>>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>>>> 
>>>>>>>>> ______________________________________________
>>>>>>>>> R-package-devel at r-project.org mailing list
>>>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>>>> 
>>>>>>>> --
>>>>>>>> Peter Dalgaard, Professor,
>>>>>>>> Center for Statistics, Copenhagen Business School
>>>>>>>> Solbjerg Plads 3, 2000 Frederiksberg, Denmark
>>>>>>>> Phone: (+45)38153501
>>>>>>>> Office: A 4.23
>>>>>>>> Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com
>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>> 
>>>>>>> ______________________________________________
>>>>>>> R-package-devel at r-project.org mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> --
>>>>>> http://hadley.nz
>>>>> 
>>>>> 
>>>>> 
>>>>> --
>>>>> http://hadley.nz
>>>>> 
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>> 
>>>> 
>>>>       [[alternative HTML version deleted]]
>>>> 
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
>> 


From roy@mende|@@ohn @end|ng |rom no@@@gov  Tue Mar 19 19:03:43 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 19 Mar 2019 11:03:43 -0700
Subject: Graphics in examples
Message-ID: <6A3DFE5B-51DA-4DD0-AA7F-7B21D27CE1ED@noaa.gov>

Hi All:

I am working on preparing a package for submission.  All the package does is makes it easy to map data that were downloaded using a different package. Can graphics be in examples?  Or should I assign the graphics to an object and leave it at that. Or any other advice.

Basically, if graphics can't be handled in some form,  it wouldn't be possible to create examples that test the program.  In reading over the different sources for guidelines for submission,  I don't see this possibility discussed anywhere.

Thanks,

-Roy

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Mar 19 19:14:48 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 19 Mar 2019 19:14:48 +0100
Subject: [R-pkg-devel] Graphics in examples
In-Reply-To: <mailman.3642.3417.1553018644.8486.r-package-devel@r-project.org>
References: <mailman.3642.3417.1553018644.8486.r-package-devel@r-project.org>
Message-ID: <537ff73c-f338-ef75-5e6e-81f960b3093c@statistik.tu-dortmund.de>

Yes, graphics goes top the default device, e.g. X11() in an interactve 
Linux session or pdf() in non interactive usage, e.g. for running 
examples during an 'R CMD check' run.

Best,
Uwe Ligges

On 19.03.2019 19:03, Roy Mendelssohn - NOAA Federal via R-package-devel 
wrote:
> 
> Subject:
> Graphics in examples
> From:
> Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov>
> Date:
> 19.03.2019, 19:03
> To:
> R Package Development <r-package-devel at r-project.org>
> 
> To:
> R Package Development <r-package-devel at r-project.org>
> 
> 
> Hi All:
> 
> I am working on preparing a package for submission.  All the package does is makes it easy to map data that were downloaded using a different package. Can graphics be in examples?  Or should I assign the graphics to an object and leave it at that. Or any other advice.
> 
> Basically, if graphics can't be handled in some form,  it wouldn't be possible to create examples that test the program.  In reading over the different sources for guidelines for submission,  I don't see this possibility discussed anywhere.
> 
> Thanks,
> 
> -Roy
> 
> **********************
> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
> 
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From roy@mende|@@ohn @end|ng |rom no@@@gov  Tue Mar 19 19:34:36 2019
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 19 Mar 2019 11:34:36 -0700
Subject: [R-pkg-devel] Graphics in examples
In-Reply-To: <537ff73c-f338-ef75-5e6e-81f960b3093c@statistik.tu-dortmund.de>
References: <mailman.3642.3417.1553018644.8486.r-package-devel@r-project.org>
 <537ff73c-f338-ef75-5e6e-81f960b3093c@statistik.tu-dortmund.de>
Message-ID: <919C8BA5-74A3-4203-B424-9F24E76DECB9@noaa.gov>

Thanks muchly.  I wanted to check on that to be certain.

-Roy


> On Mar 19, 2019, at 11:14 AM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> Yes, graphics goes top the default device, e.g. X11() in an interactve Linux session or pdf() in non interactive usage, e.g. for running examples during an 'R CMD check' run.
> 
> Best,
> Uwe Ligges
> 
> On 19.03.2019 19:03, Roy Mendelssohn - NOAA Federal via R-package-devel wrote:
>> Subject:
>> Graphics in examples
>> From:
>> Roy Mendelssohn - NOAA Federal <roy.mendelssohn at noaa.gov>
>> Date:
>> 19.03.2019, 19:03
>> To:
>> R Package Development <r-package-devel at r-project.org>
>> To:
>> R Package Development <r-package-devel at r-project.org>
>> Hi All:
>> I am working on preparing a package for submission.  All the package does is makes it easy to map data that were downloaded using a different package. Can graphics be in examples?  Or should I assign the graphics to an object and leave it at that. Or any other advice.
>> Basically, if graphics can't be handled in some form,  it wouldn't be possible to create examples that test the program.  In reading over the different sources for guidelines for submission,  I don't see this possibility discussed anywhere.
>> Thanks,
>> -Roy
>> **********************
>> "The contents of this message do not reflect any position of the U.S. Government or NOAA."
>> **********************
>> Roy Mendelssohn
>> Supervisory Operations Research Analyst
>> NOAA/NMFS
>> Environmental Research Division
>> Southwest Fisheries Science Center
>> ***Note new street address***
>> 110 McAllister Way
>> Santa Cruz, CA 95060
>> Phone: (831)-420-3666
>> Fax: (831) 420-3980
>> e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/
>> "Old age and treachery will overcome youth and skill."
>> "From those who have been given much, much will be expected"
>> "the arc of the moral universe is long, but it bends toward justice" -MLK Jr.
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: http://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From em@nue|e@cord@no @end|ng |rom gm@||@com  Wed Mar 20 10:11:44 2019
From: em@nue|e@cord@no @end|ng |rom gm@||@com (Emanuele Cordano)
Date: Wed, 20 Mar 2019 10:11:44 +0100
Subject: [R-pkg-devel] HTTP status was '403 Forbidden' on function examples
Message-ID: <CAKw81f_cC5v=iRkRnBCf0d76fRuabxhw8NfgDYwtkuiMrSt-TA@mail.gmail.com>

Dear R-package-devel list,

I just submitted an update of 'geotopbricks' on CRAN checks returns the
following error (only Debian-dev).

The example dataset files are available on line through an external URL
that Debian-server cannot access and returns HTTP status 403 Forbidden
(attached below the error message)
I do not know the cause of this error and I kindly ask if this may depend
on the server where the check is launched.
The same check with other distributions (local Ubuntu 16.04 LTS
distribution included) works successfully, downloading correctly example
files from
https://www.rendena100.eu/public/geotopbricks/simulations/panola13_run2xC_test3/geotop.inpts
.
I thank you for any help or suggestion.
Best
Emanuele



* checking examples ... ERROR
Running examples in ?geotopbricks-Ex.R? failed
The error most likely occurred in:

> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
> ### Name: create.geotop.inpts.keyword
> ### Title: Creates an 'geotop.inpts' files the keyword and their values of
> ###   a date.frame like the one returned by
> ###   'declared.geotop.inpts.keywords'
> ### Aliases: create.geotop.inpts.keyword
>
> ### ** Examples
>
>
> library(geotopbricks)
>
> #Simulation working path
> wpath <- 'https://www.rendena100.eu/public/geotopbricks/simulations/panola13_run2xC_test3'
> df <- declared.geotop.inpts.keywords(wpath=wpath)
Warning in file(con, "r") :
  cannot open URL
'https://www.rendena100.eu/public/geotopbricks/simulations/panola13_run2xC_test3/geotop.inpts':
HTTP status was '403 Forbidden'
Error in file(con, "r") :
  cannot open the connection to
'https://www.rendena100.eu/public/geotopbricks/simulations/panola13_run2xC_test3/geotop.inpts'
Calls: declared.geotop.inpts.keywords -> <Anonymous> -> file
Execution halted



-- 
Emanuele Cordano, PhD
Environmental Engineer / Ingegnere per l' Ambiente e il territorio nr.
3587 (Albo A - Provincia di Trento)
cell: +39 3282818564
email: emanuele.cordano at gmail.com,emanuele.cordano at rendena100.eu,
emanuele.cordano at eurac.edu
PEC: emanuele.cordano at ingpec.eu
URL: www.rendena100.eu
LinkedIn: https://www.linkedin.com/in/emanuele-cordano-31995333
GitHub: https://github.com/ecor

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Mar 20 13:58:06 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 20 Mar 2019 13:58:06 +0100
Subject: [R-pkg-devel] 
 HTTP status was '403 Forbidden' on function examples
In-Reply-To: <CAKw81f_cC5v=iRkRnBCf0d76fRuabxhw8NfgDYwtkuiMrSt-TA@mail.gmail.com>
References: <CAKw81f_cC5v=iRkRnBCf0d76fRuabxhw8NfgDYwtkuiMrSt-TA@mail.gmail.com>
Message-ID: <b618b237-c163-f80f-5076-f32dcdce5ef6@statistik.tu-dortmund.de>

It could be the server is blocked, either due to nationality or due to 
too many requests to the service.

Anyyway, pls try to implement examples in a way they fail gracefully in 
case the websevice is not reliable.

Best,
Uwe Ligges





On 20.03.2019 10:11, Emanuele Cordano wrote:
> Dear R-package-devel list,
> 
> I just submitted an update of 'geotopbricks' on CRAN checks returns the
> following error (only Debian-dev).
> 
> The example dataset files are available on line through an external URL
> that Debian-server cannot access and returns HTTP status 403 Forbidden
> (attached below the error message)
> I do not know the cause of this error and I kindly ask if this may depend
> on the server where the check is launched.
> The same check with other distributions (local Ubuntu 16.04 LTS
> distribution included) works successfully, downloading correctly example
> files from
> https://www.rendena100.eu/public/geotopbricks/simulations/panola13_run2xC_test3/geotop.inpts
> .
> I thank you for any help or suggestion.
> Best
> Emanuele
> 
> 
> 
> * checking examples ... ERROR
> Running examples in ?geotopbricks-Ex.R? failed
> The error most likely occurred in:
> 
>> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>> ### Name: create.geotop.inpts.keyword
>> ### Title: Creates an 'geotop.inpts' files the keyword and their values of
>> ###   a date.frame like the one returned by
>> ###   'declared.geotop.inpts.keywords'
>> ### Aliases: create.geotop.inpts.keyword
>>
>> ### ** Examples
>>
>>
>> library(geotopbricks)
>>
>> #Simulation working path
>> wpath <- 'https://www.rendena100.eu/public/geotopbricks/simulations/panola13_run2xC_test3'
>> df <- declared.geotop.inpts.keywords(wpath=wpath)
> Warning in file(con, "r") :
>    cannot open URL
> 'https://www.rendena100.eu/public/geotopbricks/simulations/panola13_run2xC_test3/geotop.inpts':
> HTTP status was '403 Forbidden'
> Error in file(con, "r") :
>    cannot open the connection to
> 'https://www.rendena100.eu/public/geotopbricks/simulations/panola13_run2xC_test3/geotop.inpts'
> Calls: declared.geotop.inpts.keywords -> <Anonymous> -> file
> Execution halted
> 
> 
>


From drj|m|emon @end|ng |rom gm@||@com  Fri Mar 22 11:18:04 2019
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 22 Mar 2019 21:18:04 +1100
Subject: [R-pkg-devel] obscure syntax error
Message-ID: <CA+8X3fU+g2LfxSk4LQcxvk5-NAtyKW2zwQy1WdPNvnZetxxTgw@mail.gmail.com>

Hi,
I have been attempting to check a new version of the prettyR package,
and have struck a difficult problem. The check fails at the
installation, and when I track the error, it is "Unexpected end of
input" in the xtab function. I have tried a number of things as I
thought that it was a non-printing character (I have had that happen
before). I can paste the entire function into an R session and there
is no error. Has anyone struck an error like this before?

xtab<-function(formula,data,varnames=NULL,or=TRUE,chisq=FALSE,phi=FALSE,
 html=FALSE,bgcol="lightgray") {

 if(missing(formula))
  stop("Usage: xtab(formula,data,varnames=NULL,or=TRUE,chisq=FALSE,phi=FALSE\n")
 ft<-as.character(attr(terms(formula),"variables")[-1])
 nft<-length(ft)
 if(nft>2) {
  xt<-list()
  by.factor<-as.factor(data[[ft[nft]]])
  factor.levels<-levels(by.factor)
  factor.labels<-attr(data[,ft[nft]],"value.labels")
  if(!is.null(names(factor.labels))) factor.labels<-names(factor.levels)
  if(is.null(factor.labels)) factor.labels<-factor.levels
  nlevels<-length(factor.levels)
  for(i in 1:nlevels) {
   currentdata<-subset(data,by.factor==factor.levels[i])
   for(j in 1:dim(currentdata)[2])
    attr(currentdata[,j],"value.labels")<-attr(data[,j],"value.labels")
   currentcount<-length(currentdata[[nft]])
   totalcount<-length(data[[nft]])
   cat("\nCount for",ft[nft],"=",factor.labels[i],"is",currentcount,
    "(",round(100*currentcount/totalcount,1),"%)\n\n")
   rightside<-ifelse(nft>3,paste(ft[2:(nft-1)],sep="",collapse="+"),ft[2])
   next.formula<-as.formula(paste(ft[1],rightside,sep="-",collapse=""))
   xt[[i]]<-xtab(next.formula,data=currentdata,varnames=varnames,chisq=chisq,
    phi=phi,html=html,bgcol=bgcol)
  }
 }
 else {
  if(missing(data)) xt<-calculate.xtab(get(ft[1]),get(ft[2]),varnames=varnames)
  else xt<-calculate.xtab(data[,ft[1]],data[,ft[2]],varnames=varnames)
 }
 attr(xt,"class")<-"xtab"
 return(xt)
}
 Thanks for any pointers.

Jim


From pd@|gd @end|ng |rom gm@||@com  Fri Mar 22 11:42:41 2019
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Fri, 22 Mar 2019 11:42:41 +0100
Subject: [R-pkg-devel] obscure syntax error
In-Reply-To: <CA+8X3fU+g2LfxSk4LQcxvk5-NAtyKW2zwQy1WdPNvnZetxxTgw@mail.gmail.com>
References: <CA+8X3fU+g2LfxSk4LQcxvk5-NAtyKW2zwQy1WdPNvnZetxxTgw@mail.gmail.com>
Message-ID: <19BDDAA2-F9E3-4D08-9EFB-2A269376AE77@gmail.com>

It could use a little whitespace, but I (and the Rstudio script editor) can't spot anything wrong, like mismatching braces or parens, and all else-at-beginning-of-line is inside the function. 

Could it be an incomplete last line?

-pd

> On 22 Mar 2019, at 11:18 , Jim Lemon <drjimlemon at gmail.com> wrote:
> 
> Hi,
> I have been attempting to check a new version of the prettyR package,
> and have struck a difficult problem. The check fails at the
> installation, and when I track the error, it is "Unexpected end of
> input" in the xtab function. I have tried a number of things as I
> thought that it was a non-printing character (I have had that happen
> before). I can paste the entire function into an R session and there
> is no error. Has anyone struck an error like this before?
> 
> xtab<-function(formula,data,varnames=NULL,or=TRUE,chisq=FALSE,phi=FALSE,
> html=FALSE,bgcol="lightgray") {
> 
> if(missing(formula))
>  stop("Usage: xtab(formula,data,varnames=NULL,or=TRUE,chisq=FALSE,phi=FALSE\n")
> ft<-as.character(attr(terms(formula),"variables")[-1])
> nft<-length(ft)
> if(nft>2) {
>  xt<-list()
>  by.factor<-as.factor(data[[ft[nft]]])
>  factor.levels<-levels(by.factor)
>  factor.labels<-attr(data[,ft[nft]],"value.labels")
>  if(!is.null(names(factor.labels))) factor.labels<-names(factor.levels)
>  if(is.null(factor.labels)) factor.labels<-factor.levels
>  nlevels<-length(factor.levels)
>  for(i in 1:nlevels) {
>   currentdata<-subset(data,by.factor==factor.levels[i])
>   for(j in 1:dim(currentdata)[2])
>    attr(currentdata[,j],"value.labels")<-attr(data[,j],"value.labels")
>   currentcount<-length(currentdata[[nft]])
>   totalcount<-length(data[[nft]])
>   cat("\nCount for",ft[nft],"=",factor.labels[i],"is",currentcount,
>    "(",round(100*currentcount/totalcount,1),"%)\n\n")
>   rightside<-ifelse(nft>3,paste(ft[2:(nft-1)],sep="",collapse="+"),ft[2])
>   next.formula<-as.formula(paste(ft[1],rightside,sep="-",collapse=""))
>   xt[[i]]<-xtab(next.formula,data=currentdata,varnames=varnames,chisq=chisq,
>    phi=phi,html=html,bgcol=bgcol)
>  }
> }
> else {
>  if(missing(data)) xt<-calculate.xtab(get(ft[1]),get(ft[2]),varnames=varnames)
>  else xt<-calculate.xtab(data[,ft[1]],data[,ft[2]],varnames=varnames)
> }
> attr(xt,"class")<-"xtab"
> return(xt)
> }
> Thanks for any pointers.
> 
> Jim
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From r@turner @end|ng |rom @uck|@nd@@c@nz  Fri Mar 22 11:49:51 2019
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Fri, 22 Mar 2019 23:49:51 +1300
Subject: [R-pkg-devel] [FORGED]  obscure syntax error
In-Reply-To: <CA+8X3fU+g2LfxSk4LQcxvk5-NAtyKW2zwQy1WdPNvnZetxxTgw@mail.gmail.com>
References: <CA+8X3fU+g2LfxSk4LQcxvk5-NAtyKW2zwQy1WdPNvnZetxxTgw@mail.gmail.com>
Message-ID: <3e5a021b-7858-f9aa-9a0e-b93ebc95a8db@auckland.ac.nz>


On 22/03/19 11:18 PM, Jim Lemon wrote:

> Hi,
> I have been attempting to check a new version of the prettyR package,
> and have struck a difficult problem. The check fails at the
> installation, and when I track the error, it is "Unexpected end of
> input" in the xtab function. I have tried a number of things as I
> thought that it was a non-printing character (I have had that happen
> before). I can paste the entire function into an R session and there
> is no error. Has anyone struck an error like this before?
> 
> xtab<-function(formula,data,varnames=NULL,or=TRUE,chisq=FALSE,phi=FALSE,
>   html=FALSE,bgcol="lightgray") {
> 
>   if(missing(formula))
>    stop("Usage: xtab(formula,data,varnames=NULL,or=TRUE,chisq=FALSE,phi=FALSE\n")
>   ft<-as.character(attr(terms(formula),"variables")[-1])
>   nft<-length(ft)
>   if(nft>2) {
>    xt<-list()
>    by.factor<-as.factor(data[[ft[nft]]])
>    factor.levels<-levels(by.factor)
>    factor.labels<-attr(data[,ft[nft]],"value.labels")
>    if(!is.null(names(factor.labels))) factor.labels<-names(factor.levels)
>    if(is.null(factor.labels)) factor.labels<-factor.levels
>    nlevels<-length(factor.levels)
>    for(i in 1:nlevels) {
>     currentdata<-subset(data,by.factor==factor.levels[i])
>     for(j in 1:dim(currentdata)[2])
>      attr(currentdata[,j],"value.labels")<-attr(data[,j],"value.labels")
>     currentcount<-length(currentdata[[nft]])
>     totalcount<-length(data[[nft]])
>     cat("\nCount for",ft[nft],"=",factor.labels[i],"is",currentcount,
>      "(",round(100*currentcount/totalcount,1),"%)\n\n")
>     rightside<-ifelse(nft>3,paste(ft[2:(nft-1)],sep="",collapse="+"),ft[2])
>     next.formula<-as.formula(paste(ft[1],rightside,sep="-",collapse=""))
>     xt[[i]]<-xtab(next.formula,data=currentdata,varnames=varnames,chisq=chisq,
>      phi=phi,html=html,bgcol=bgcol)
>    }
>   }
>   else {
>    if(missing(data)) xt<-calculate.xtab(get(ft[1]),get(ft[2]),varnames=varnames)
>    else xt<-calculate.xtab(data[,ft[1]],data[,ft[2]],varnames=varnames)
>   }
>   attr(xt,"class")<-"xtab"
>   return(xt)
> }
>   Thanks for any pointers.

I believe I have encountered phenomena like this where the error was 
actually in the *"previous"* function in the sequence of package 
functions stored in the *.rdb or *.rdx files in the "R" directory of the 
package.

To track down where the error is actually occurring I cd to the R
directory of the *source* package, start R, and do something like:

phials <- list.files(pattern=".R$")
for(phial in phials) {
     cat(phial,"\n")
     source(phial)
}

That should allow you to spot the loony pretty quickly.

HTH

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From ||@|kop @end|ng |rom gm@||@com  Fri Mar 22 10:11:53 2019
From: ||@|kop @end|ng |rom gm@||@com (Vissarion Fisikopoulos)
Date: Fri, 22 Mar 2019 11:11:53 +0200
Subject: [R-pkg-devel] CRAN review
In-Reply-To: <CAMfvGJMSv-KGFcKyUHfPc5XYoHTuKYwvY3mp4R4APEoB0bYSvw@mail.gmail.com>
References: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
 <6c203422-db18-f11b-7e01-4006ec39adff@gmail.com>
 <CAFDcVCQ2wgSTYJu_ZMdpJ1PRcvPcSZMOD4epE+zHp307w33xBg@mail.gmail.com>
 <mailman.3611.3047.1552463633.8486.r-package-devel@r-project.org>
 <mailman.3612.3048.1552464318.8486.r-package-devel@r-project.org>
 <CAMfvGJMSv-KGFcKyUHfPc5XYoHTuKYwvY3mp4R4APEoB0bYSvw@mail.gmail.com>
Message-ID: <CAKa7CYMhBnsgLbQcLe3SRxVh-z4V=5CjeCCmKXQtw12nTgokgA@mail.gmail.com>

Hello,

we have resubmitted the package 'volesti'. I got the email and
confirmed submission. Later I got the confirmation email starting:
"The following package was uploaded to CRAN:..." and then the email on
automated check complaining about the same 2 notes as in the previous
submission. I answered (reply to all) explaining why those notes are
false positives. Then no news for 9 days. Could you please update us
on this.

Best regards,
Vissarion


On Wed, 13 Mar 2019 at 10:15, ????? ?????? <tolis.chal at gmail.com> wrote:
>
> Of course we will resubmit. Thank you all for the info.
>
> Chalkis Apostolos
>
> On Wed, 13 Mar 2019 at 10:05, Ma?lle SALMON via R-package-devel <
> r-package-devel at r-project.org> wrote:
>
> >
> >
> >
> > ---------- Forwarded message ----------
> > From: "Ma?lle SALMON" <maelle.salmon at yahoo.se>
> > To: Duncan Murdoch <murdoch.duncan at gmail.com>, Henrik Bengtsson <
> > henrik.bengtsson at gmail.com>
> > Cc: r-package-devel at r-project.org
> > Bcc:
> > Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
> > Subject: Re: [R-pkg-devel] CRAN review
> >  Sorry, the link was removed (by my copy-pasting it wrongly):
> > https://itsalocke.com/cransays/articles/dashboard
> >
> >     Den onsdag 13 mars 2019 08:54:00 CET, Ma?lle SALMON via
> > R-package-devel <r-package-devel at r-project.org> skrev:
> >
> >   We at Locke Data have made an hourly updated dashboard based on the FTP
> > server
> > CRAN incoming dashboard ? cransays
> >
> > |
> > |
> > |  |
> > CRAN incoming dashboard ? cransays
> >
> >
> >  |
> >
> >  |
> >
> >  |
> >
> >
> >
> > We hope it makes data more accessible whilst reducing load on the FTP
> > server.
> > Ma?lle.
> >
> >     Den tisdag 12 mars 2019 21:37:12 CET, Henrik Bengtsson <
> > henrik.bengtsson at gmail.com> skrev:
> >
> >  You can also "follow" your package submission on the CRAN FTP server:
> >
> >   ftp://cran.r-project.org/incoming/
> >
> > /Henrik
> >
> > On Tue, Mar 12, 2019 at 1:26 PM Duncan Murdoch <murdoch.duncan at gmail.com>
> > wrote:
> > >
> > > On 12/03/2019 2:57 p.m., ????? ?????? wrote:
> > > > Dear all,
> > > >
> > > > We have submitted a package to CRAN in 25th of February and we have
> > not got
> > > > a
> > > > positive or a negative answer for the submission since then. Is this
> > > > normal? Is
> > > > there any way to get informed for the review process?
> > >
> > > Did you get the two messages after submission (one to confirm that you
> > > are the maintainer, the second to let you know the review has started)?
> > > They'll both have subject lines like
> > >
> > > CRAN submission ....
> > >
> > >
> > > The first one will start out saying something like
> > > >
> > > > Dear Duncan Murdoch
> > > > Someone has submitted the package rgl to CRAN.
> > > > You are receiving this email to confirm the submission as the
> > maintainer of
> > > > this package.
> > >
> > > and then ask you to confirm submission.
> > >
> > > The second one will start like
> > >
> > > > [This was generated from CRAN.R-project.org/submit.html]
> > > >
> > > > The following package was uploaded to CRAN:
> > > > ===========================================
> > > >
> > > > Package Information:
> > > > Package: rgl
> > >
> > > A while later you should get a third message about the automatic checks.
> > >
> > > Duncan Murdoch
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >     [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >         [[alternative HTML version deleted]]
> >
> >
> >
> >
> > ---------- Forwarded message ----------
> > From: "Ma?lle SALMON via R-package-devel" <r-package-devel at r-project.org>
> > To: Duncan Murdoch <murdoch.duncan at gmail.com>, Henrik Bengtsson <
> > henrik.bengtsson at gmail.com>
> > Cc: r-package-devel at r-project.org
> > Bcc:
> > Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
> > Subject: Re: [R-pkg-devel] CRAN review
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From henr|k@bengt@@on @end|ng |rom gm@||@com  Fri Mar 22 21:03:42 2019
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Fri, 22 Mar 2019 13:03:42 -0700
Subject: [R-pkg-devel] CRAN review
In-Reply-To: <CAKa7CYMhBnsgLbQcLe3SRxVh-z4V=5CjeCCmKXQtw12nTgokgA@mail.gmail.com>
References: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
 <6c203422-db18-f11b-7e01-4006ec39adff@gmail.com>
 <CAFDcVCQ2wgSTYJu_ZMdpJ1PRcvPcSZMOD4epE+zHp307w33xBg@mail.gmail.com>
 <mailman.3611.3047.1552463633.8486.r-package-devel@r-project.org>
 <mailman.3612.3048.1552464318.8486.r-package-devel@r-project.org>
 <CAMfvGJMSv-KGFcKyUHfPc5XYoHTuKYwvY3mp4R4APEoB0bYSvw@mail.gmail.com>
 <CAKa7CYMhBnsgLbQcLe3SRxVh-z4V=5CjeCCmKXQtw12nTgokgA@mail.gmail.com>
Message-ID: <CAFDcVCTivRagC1eVYooyEU418web9b58QihSPju_6VmyDaeNmA@mail.gmail.com>

Not a CRAN maintainer, but from my experience, it sounds like you're
hitting some very unusual hiccup here - that's unfortunate.  I just
had a look around at ftp://cran.r-project.org/incoming/ and your
package is not there anymore. Just a wild guess but I wonder if your
email reply back to CRAN ends up in their spam folders?

BTW, what are the two NOTEs you're getting?  Maybe they're avoidable.
Since packages with all OKs can go straight through the CRAN incoming
checks and be published automatically (at least if the package is
already on CRAN), I try to walk an extra mile just avoid NOTEs in my
packages even if I know they're false positives.

My $.02

/Henrik

On Fri, Mar 22, 2019 at 6:28 AM Vissarion Fisikopoulos
<fisikop at gmail.com> wrote:
>
> Hello,
>
> we have resubmitted the package 'volesti'. I got the email and
> confirmed submission. Later I got the confirmation email starting:
> "The following package was uploaded to CRAN:..." and then the email on
> automated check complaining about the same 2 notes as in the previous
> submission. I answered (reply to all) explaining why those notes are
> false positives. Then no news for 9 days. Could you please update us
> on this.
>
> Best regards,
> Vissarion
>
>
> On Wed, 13 Mar 2019 at 10:15, ????? ?????? <tolis.chal at gmail.com> wrote:
> >
> > Of course we will resubmit. Thank you all for the info.
> >
> > Chalkis Apostolos
> >
> > On Wed, 13 Mar 2019 at 10:05, Ma?lle SALMON via R-package-devel <
> > r-package-devel at r-project.org> wrote:
> >
> > >
> > >
> > >
> > > ---------- Forwarded message ----------
> > > From: "Ma?lle SALMON" <maelle.salmon at yahoo.se>
> > > To: Duncan Murdoch <murdoch.duncan at gmail.com>, Henrik Bengtsson <
> > > henrik.bengtsson at gmail.com>
> > > Cc: r-package-devel at r-project.org
> > > Bcc:
> > > Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
> > > Subject: Re: [R-pkg-devel] CRAN review
> > >  Sorry, the link was removed (by my copy-pasting it wrongly):
> > > https://itsalocke.com/cransays/articles/dashboard
> > >
> > >     Den onsdag 13 mars 2019 08:54:00 CET, Ma?lle SALMON via
> > > R-package-devel <r-package-devel at r-project.org> skrev:
> > >
> > >   We at Locke Data have made an hourly updated dashboard based on the FTP
> > > server
> > > CRAN incoming dashboard ? cransays
> > >
> > > |
> > > |
> > > |  |
> > > CRAN incoming dashboard ? cransays
> > >
> > >
> > >  |
> > >
> > >  |
> > >
> > >  |
> > >
> > >
> > >
> > > We hope it makes data more accessible whilst reducing load on the FTP
> > > server.
> > > Ma?lle.
> > >
> > >     Den tisdag 12 mars 2019 21:37:12 CET, Henrik Bengtsson <
> > > henrik.bengtsson at gmail.com> skrev:
> > >
> > >  You can also "follow" your package submission on the CRAN FTP server:
> > >
> > >   ftp://cran.r-project.org/incoming/
> > >
> > > /Henrik
> > >
> > > On Tue, Mar 12, 2019 at 1:26 PM Duncan Murdoch <murdoch.duncan at gmail.com>
> > > wrote:
> > > >
> > > > On 12/03/2019 2:57 p.m., ????? ?????? wrote:
> > > > > Dear all,
> > > > >
> > > > > We have submitted a package to CRAN in 25th of February and we have
> > > not got
> > > > > a
> > > > > positive or a negative answer for the submission since then. Is this
> > > > > normal? Is
> > > > > there any way to get informed for the review process?
> > > >
> > > > Did you get the two messages after submission (one to confirm that you
> > > > are the maintainer, the second to let you know the review has started)?
> > > > They'll both have subject lines like
> > > >
> > > > CRAN submission ....
> > > >
> > > >
> > > > The first one will start out saying something like
> > > > >
> > > > > Dear Duncan Murdoch
> > > > > Someone has submitted the package rgl to CRAN.
> > > > > You are receiving this email to confirm the submission as the
> > > maintainer of
> > > > > this package.
> > > >
> > > > and then ask you to confirm submission.
> > > >
> > > > The second one will start like
> > > >
> > > > > [This was generated from CRAN.R-project.org/submit.html]
> > > > >
> > > > > The following package was uploaded to CRAN:
> > > > > ===========================================
> > > > >
> > > > > Package Information:
> > > > > Package: rgl
> > > >
> > > > A while later you should get a third message about the automatic checks.
> > > >
> > > > Duncan Murdoch
> > > >
> > > > ______________________________________________
> > > > R-package-devel at r-project.org mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >     [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > >
> > >
> > >
> > > ---------- Forwarded message ----------
> > > From: "Ma?lle SALMON via R-package-devel" <r-package-devel at r-project.org>
> > > To: Duncan Murdoch <murdoch.duncan at gmail.com>, Henrik Bengtsson <
> > > henrik.bengtsson at gmail.com>
> > > Cc: r-package-devel at r-project.org
> > > Bcc:
> > > Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
> > > Subject: Re: [R-pkg-devel] CRAN review
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From drj|m|emon @end|ng |rom gm@||@com  Fri Mar 22 21:12:29 2019
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sat, 23 Mar 2019 07:12:29 +1100
Subject: [R-pkg-devel] [FORGED]  obscure syntax error
In-Reply-To: <3e5a021b-7858-f9aa-9a0e-b93ebc95a8db@auckland.ac.nz>
References: <CA+8X3fU+g2LfxSk4LQcxvk5-NAtyKW2zwQy1WdPNvnZetxxTgw@mail.gmail.com>
 <3e5a021b-7858-f9aa-9a0e-b93ebc95a8db@auckland.ac.nz>
Message-ID: <CA+8X3fUP1a1ggy48t2ha4bwWs2L9ddbj84vOOP8Y4+viXg5qpA@mail.gmail.com>

Hi Peter and Rolf,
In fact there was a missing EOL at the end, but I had already fixed
that. It was an error in a previous function (delim.table) and Rolf's
little function spotted it. Thanks to both of you for quick and
helpful answers.

Jim

On Fri, Mar 22, 2019 at 9:49 PM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>
> On 22/03/19 11:18 PM, Jim Lemon wrote:
>
> > Hi,
> > I have been attempting to check a new version of the prettyR package,
> > and have struck a difficult problem. The check fails at the
> > installation, and when I track the error, it is "Unexpected end of
> > input" in the xtab function. I have tried a number of things as I
> > thought that it was a non-printing character (I have had that happen
> > before). I can paste the entire function into an R session and there
> > is no error. Has anyone struck an error like this before?
> >
> > xtab<-function(formula,data,varnames=NULL,or=TRUE,chisq=FALSE,phi=FALSE,
> >   html=FALSE,bgcol="lightgray") {
> >
> >   if(missing(formula))
> >    stop("Usage: xtab(formula,data,varnames=NULL,or=TRUE,chisq=FALSE,phi=FALSE\n")
> >   ft<-as.character(attr(terms(formula),"variables")[-1])
> >   nft<-length(ft)
> >   if(nft>2) {
> >    xt<-list()
> >    by.factor<-as.factor(data[[ft[nft]]])
> >    factor.levels<-levels(by.factor)
> >    factor.labels<-attr(data[,ft[nft]],"value.labels")
> >    if(!is.null(names(factor.labels))) factor.labels<-names(factor.levels)
> >    if(is.null(factor.labels)) factor.labels<-factor.levels
> >    nlevels<-length(factor.levels)
> >    for(i in 1:nlevels) {
> >     currentdata<-subset(data,by.factor==factor.levels[i])
> >     for(j in 1:dim(currentdata)[2])
> >      attr(currentdata[,j],"value.labels")<-attr(data[,j],"value.labels")
> >     currentcount<-length(currentdata[[nft]])
> >     totalcount<-length(data[[nft]])
> >     cat("\nCount for",ft[nft],"=",factor.labels[i],"is",currentcount,
> >      "(",round(100*currentcount/totalcount,1),"%)\n\n")
> >     rightside<-ifelse(nft>3,paste(ft[2:(nft-1)],sep="",collapse="+"),ft[2])
> >     next.formula<-as.formula(paste(ft[1],rightside,sep="-",collapse=""))
> >     xt[[i]]<-xtab(next.formula,data=currentdata,varnames=varnames,chisq=chisq,
> >      phi=phi,html=html,bgcol=bgcol)
> >    }
> >   }
> >   else {
> >    if(missing(data)) xt<-calculate.xtab(get(ft[1]),get(ft[2]),varnames=varnames)
> >    else xt<-calculate.xtab(data[,ft[1]],data[,ft[2]],varnames=varnames)
> >   }
> >   attr(xt,"class")<-"xtab"
> >   return(xt)
> > }
> >   Thanks for any pointers.
>
> I believe I have encountered phenomena like this where the error was
> actually in the *"previous"* function in the sequence of package
> functions stored in the *.rdb or *.rdx files in the "R" directory of the
> package.
>
> To track down where the error is actually occurring I cd to the R
> directory of the *source* package, start R, and do something like:
>
> phials <- list.files(pattern=".R$")
> for(phial in phials) {
>      cat(phial,"\n")
>      source(phial)
> }
>
> That should allow you to spot the loony pretty quickly.
>
> HTH
>
> cheers,
>
> Rolf
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276


From j@ck @end|ng |rom j@ckw@@ey@com  Sat Mar 23 16:50:34 2019
From: j@ck @end|ng |rom j@ckw@@ey@com (Jack O. Wasey)
Date: Sat, 23 Mar 2019 11:50:34 -0400
Subject: [R-pkg-devel] active bindings in package namespace
Message-ID: <0293f167-1beb-41a8-b831-00de82c769a2@jackwasey.com>

Dear all,

I am developing a package which is a front for various online data 
(icd.data https://github.com/jackwasey/icd.data/ ). The current CRAN 
version just has lazy-loaded data, but now the package encompasses far 
more current and historic ICD codes from different countries, these 
can't be included in the CRAN package even with maximal compression.

Other authors have solved this using functions to get the data, with or 
without a local cache of the retrieved data. No CRAN or other packages I 
have found after extensive searching use the attractive active binding 
feature of R.

The goal is simple: for the user to refer to the data by its symbol, 
e.g., 'icd10fr2019', or 'icd.data::icd10fr2019', and it will be 
downloaded and parsed transparently (if the user has already granted 
permission, or after prompt if they haven't).

The bindings are set using commands alongside the function definitions 
in R/*.R .E.g.

makeActiveBinding("icd10cm_latest", .icd10cm_latest_binding, environment())
lockBinding("icd10cm_latest", environment())

For non-interactive use, CI and CRAN tests, no data should be 
downloaded, and no cache directory set up without user consent. For 
interactive use, I ask permission to create a local data cache before 
downloading data.

This works fine... until R CMD check. The following steps seems to 'get' 
or 'source' everything from the package namespace, which results in 
triggering the active bindings, and this fails if I am unable to get 
consent to download data, and want to 'stop' on this error condition.
  - checking dependencies in R code
  - checking S3 generic/method consistency
  - checking foreign function calls
  - checking R code for possible problems

Debugging CI-specific binding bugs is a nightmare because these occur in 
different R sessions initiated by R CMD check.

There may be legitimate reasons to evaluate everything in the namespace, 
but I've no idea what they are. Incidentally, Rstudio also does 'mget' 
on the whole package namespace and triggers bindings during 
autocomplete. https://github.com/rstudio/rstudio/issues/4414

Is this something I should raise as an issue with R? Or does anyone have 
any idea of a sensible approach to this. Currently I have a set of 
workarounds, but this complicates the code, and has taken an awful lot 
of time. Does anyone know of any CRAN package which has active bindings 
in the package namespace?

Any ideas appreciated.

Jack Wasey


From c@@rd|@g@bor @end|ng |rom gm@||@com  Sat Mar 23 20:14:40 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Sat, 23 Mar 2019 19:14:40 +0000
Subject: [R-pkg-devel] active bindings in package namespace
In-Reply-To: <0293f167-1beb-41a8-b831-00de82c769a2@jackwasey.com>
References: <0293f167-1beb-41a8-b831-00de82c769a2@jackwasey.com>
Message-ID: <CABtg=K=SandCaWG77p0xp2qh7a-WwQB=wpKVKQuwB9x+5LJ9qA@mail.gmail.com>

Hi, yet another workaround is to create the active binding in the
.onLoad() function. Here is an example from the cli package:
https://github.com/r-lib/cli/blob/d4756c483f69c2382c27b0b983d0ce7cc7e63763/R/onload.R#L8

Gabor

On Sat, Mar 23, 2019 at 3:50 PM Jack O. Wasey <jack at jackwasey.com> wrote:
>
> Dear all,
>
> I am developing a package which is a front for various online data
> (icd.data https://github.com/jackwasey/icd.data/ ). The current CRAN
> version just has lazy-loaded data, but now the package encompasses far
> more current and historic ICD codes from different countries, these
> can't be included in the CRAN package even with maximal compression.
>
> Other authors have solved this using functions to get the data, with or
> without a local cache of the retrieved data. No CRAN or other packages I
> have found after extensive searching use the attractive active binding
> feature of R.
>
> The goal is simple: for the user to refer to the data by its symbol,
> e.g., 'icd10fr2019', or 'icd.data::icd10fr2019', and it will be
> downloaded and parsed transparently (if the user has already granted
> permission, or after prompt if they haven't).
>
> The bindings are set using commands alongside the function definitions
> in R/*.R .E.g.
>
> makeActiveBinding("icd10cm_latest", .icd10cm_latest_binding, environment())
> lockBinding("icd10cm_latest", environment())
>
> For non-interactive use, CI and CRAN tests, no data should be
> downloaded, and no cache directory set up without user consent. For
> interactive use, I ask permission to create a local data cache before
> downloading data.
>
> This works fine... until R CMD check. The following steps seems to 'get'
> or 'source' everything from the package namespace, which results in
> triggering the active bindings, and this fails if I am unable to get
> consent to download data, and want to 'stop' on this error condition.
>   - checking dependencies in R code
>   - checking S3 generic/method consistency
>   - checking foreign function calls
>   - checking R code for possible problems
>
> Debugging CI-specific binding bugs is a nightmare because these occur in
> different R sessions initiated by R CMD check.
>
> There may be legitimate reasons to evaluate everything in the namespace,
> but I've no idea what they are. Incidentally, Rstudio also does 'mget'
> on the whole package namespace and triggers bindings during
> autocomplete. https://github.com/rstudio/rstudio/issues/4414
>
> Is this something I should raise as an issue with R? Or does anyone have
> any idea of a sensible approach to this. Currently I have a set of
> workarounds, but this complicates the code, and has taken an awful lot
> of time. Does anyone know of any CRAN package which has active bindings
> in the package namespace?
>
> Any ideas appreciated.
>
> Jack Wasey
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From j@ck @end|ng |rom j@ckw@@ey@com  Sat Mar 23 22:46:08 2019
From: j@ck @end|ng |rom j@ckw@@ey@com (Jack Wasey)
Date: Sat, 23 Mar 2019 17:46:08 -0400
Subject: [R-pkg-devel] active bindings in package namespace
In-Reply-To: <CABtg=K=SandCaWG77p0xp2qh7a-WwQB=wpKVKQuwB9x+5LJ9qA@mail.gmail.com>
References: <0293f167-1beb-41a8-b831-00de82c769a2@jackwasey.com>
 <CABtg=K=SandCaWG77p0xp2qh7a-WwQB=wpKVKQuwB9x+5LJ9qA@mail.gmail.com>
Message-ID: <e023beee-725e-10ac-aaf6-c43a8df0e75f@jackwasey.com>

Thanks for that thought. I do also do this in that package, and the same problem exists, since the code in those particular steps of R CMD check also calls .onLoad. These steps might even attach the package: the R CMD check code in tools is too convoluted for me to unravel, but the result is the same: active bindings defined directly in the namespace, or inserted into it from .onLoad, get run. .onAttach isn't possible because the namespace is sealed already.

In the example you offer from CLI, the binding is inserted into the "dummy" function's immediately enclosing environment, which is AFAIK not the same as the package namespace.

Jack

On 3/23/19 2:14 PM, G?bor Cs?rdi wrote:
> Hi, yet another workaround is to create the active binding in the
> .onLoad() function. Here is an example from the cli package:
> https://github.com/r-lib/cli/blob/d4756c483f69c2382c27b0b983d0ce7cc7e63763/R/onload.R#L8
> 
> Gabor
> 
> On Sat, Mar 23, 2019 at 3:50 PM Jack O. Wasey <jack at jackwasey.com> wrote:
>>
>> Dear all,
>>
>> I am developing a package which is a front for various online data
>> (icd.data https://github.com/jackwasey/icd.data/ ). The current CRAN
>> version just has lazy-loaded data, but now the package encompasses far
>> more current and historic ICD codes from different countries, these
>> can't be included in the CRAN package even with maximal compression.
>>
>> Other authors have solved this using functions to get the data, with or
>> without a local cache of the retrieved data. No CRAN or other packages I
>> have found after extensive searching use the attractive active binding
>> feature of R.
>>
>> The goal is simple: for the user to refer to the data by its symbol,
>> e.g., 'icd10fr2019', or 'icd.data::icd10fr2019', and it will be
>> downloaded and parsed transparently (if the user has already granted
>> permission, or after prompt if they haven't).
>>
>> The bindings are set using commands alongside the function definitions
>> in R/*.R .E.g.
>>
>> makeActiveBinding("icd10cm_latest", .icd10cm_latest_binding, environment())
>> lockBinding("icd10cm_latest", environment())
>>
>> For non-interactive use, CI and CRAN tests, no data should be
>> downloaded, and no cache directory set up without user consent. For
>> interactive use, I ask permission to create a local data cache before
>> downloading data.
>>
>> This works fine... until R CMD check. The following steps seems to 'get'
>> or 'source' everything from the package namespace, which results in
>> triggering the active bindings, and this fails if I am unable to get
>> consent to download data, and want to 'stop' on this error condition.
>>   - checking dependencies in R code
>>   - checking S3 generic/method consistency
>>   - checking foreign function calls
>>   - checking R code for possible problems
>>
>> Debugging CI-specific binding bugs is a nightmare because these occur in
>> different R sessions initiated by R CMD check.
>>
>> There may be legitimate reasons to evaluate everything in the namespace,
>> but I've no idea what they are. Incidentally, Rstudio also does 'mget'
>> on the whole package namespace and triggers bindings during
>> autocomplete. https://github.com/rstudio/rstudio/issues/4414
>>
>> Is this something I should raise as an issue with R? Or does anyone have
>> any idea of a sensible approach to this. Currently I have a set of
>> workarounds, but this complicates the code, and has taken an awful lot
>> of time. Does anyone know of any CRAN package which has active bindings
>> in the package namespace?
>>
>> Any ideas appreciated.
>>
>> Jack Wasey
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From c@@rd|@g@bor @end|ng |rom gm@||@com  Sat Mar 23 23:05:13 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Sat, 23 Mar 2019 22:05:13 +0000
Subject: [R-pkg-devel] active bindings in package namespace
In-Reply-To: <e023beee-725e-10ac-aaf6-c43a8df0e75f@jackwasey.com>
References: <0293f167-1beb-41a8-b831-00de82c769a2@jackwasey.com>
 <CABtg=K=SandCaWG77p0xp2qh7a-WwQB=wpKVKQuwB9x+5LJ9qA@mail.gmail.com>
 <e023beee-725e-10ac-aaf6-c43a8df0e75f@jackwasey.com>
Message-ID: <CABtg=Kk29_58tZG5C-Oy=9bG159VETwWZj--n2thpFuPjMe70A@mail.gmail.com>

On Sat, Mar 23, 2019 at 9:46 PM Jack Wasey <jack at jackwasey.com> wrote:
>
> Thanks for that thought. I do also do this in that package, and the same problem exists, since the code in those particular steps of R CMD check also calls .onLoad. These steps might even attach the package: the R CMD check code in tools is too convoluted for me to unravel, but the result is the same: active bindings defined directly in the namespace, or inserted into it from .onLoad, get run. .onAttach isn't possible because the namespace is sealed already.

cli is on CRAN and checks OK with R CMD check.

> In the example you offer from CLI, the binding is inserted into the "dummy" function's immediately enclosing environment, which is AFAIK not the same as the package namespace.

It seems to me that it is the same, no?

? environment(cli:::dummy)
<environment: namespace:cli>

? "symbol" %in% ls(environment(cli:::dummy))
[1] TRUE

G.

> Jack
>
> On 3/23/19 2:14 PM, G?bor Cs?rdi wrote:
> > Hi, yet another workaround is to create the active binding in the
> > .onLoad() function. Here is an example from the cli package:
> > https://github.com/r-lib/cli/blob/d4756c483f69c2382c27b0b983d0ce7cc7e63763/R/onload.R#L8
> >
> > Gabor
> >
> > On Sat, Mar 23, 2019 at 3:50 PM Jack O. Wasey <jack at jackwasey.com> wrote:
> >>
> >> Dear all,
> >>
> >> I am developing a package which is a front for various online data
> >> (icd.data https://github.com/jackwasey/icd.data/ ). The current CRAN
> >> version just has lazy-loaded data, but now the package encompasses far
> >> more current and historic ICD codes from different countries, these
> >> can't be included in the CRAN package even with maximal compression.
> >>
> >> Other authors have solved this using functions to get the data, with or
> >> without a local cache of the retrieved data. No CRAN or other packages I
> >> have found after extensive searching use the attractive active binding
> >> feature of R.
> >>
> >> The goal is simple: for the user to refer to the data by its symbol,
> >> e.g., 'icd10fr2019', or 'icd.data::icd10fr2019', and it will be
> >> downloaded and parsed transparently (if the user has already granted
> >> permission, or after prompt if they haven't).
> >>
> >> The bindings are set using commands alongside the function definitions
> >> in R/*.R .E.g.
> >>
> >> makeActiveBinding("icd10cm_latest", .icd10cm_latest_binding, environment())
> >> lockBinding("icd10cm_latest", environment())
> >>
> >> For non-interactive use, CI and CRAN tests, no data should be
> >> downloaded, and no cache directory set up without user consent. For
> >> interactive use, I ask permission to create a local data cache before
> >> downloading data.
> >>
> >> This works fine... until R CMD check. The following steps seems to 'get'
> >> or 'source' everything from the package namespace, which results in
> >> triggering the active bindings, and this fails if I am unable to get
> >> consent to download data, and want to 'stop' on this error condition.
> >>   - checking dependencies in R code
> >>   - checking S3 generic/method consistency
> >>   - checking foreign function calls
> >>   - checking R code for possible problems
> >>
> >> Debugging CI-specific binding bugs is a nightmare because these occur in
> >> different R sessions initiated by R CMD check.
> >>
> >> There may be legitimate reasons to evaluate everything in the namespace,
> >> but I've no idea what they are. Incidentally, Rstudio also does 'mget'
> >> on the whole package namespace and triggers bindings during
> >> autocomplete. https://github.com/rstudio/rstudio/issues/4414
> >>
> >> Is this something I should raise as an issue with R? Or does anyone have
> >> any idea of a sensible approach to this. Currently I have a set of
> >> workarounds, but this complicates the code, and has taken an awful lot
> >> of time. Does anyone know of any CRAN package which has active bindings
> >> in the package namespace?
> >>
> >> Any ideas appreciated.
> >>
> >> Jack Wasey
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From kr|m|r+m| @end|ng |rom m@||box@org  Sat Mar 23 23:14:53 2019
From: kr|m|r+m| @end|ng |rom m@||box@org (=?UTF-8?Q?Kirill_M=c3=bcller?=)
Date: Sat, 23 Mar 2019 23:14:53 +0100
Subject: [R-pkg-devel] active bindings in package namespace
In-Reply-To: <0293f167-1beb-41a8-b831-00de82c769a2@jackwasey.com>
References: <0293f167-1beb-41a8-b831-00de82c769a2@jackwasey.com>
Message-ID: <f6341220-4bc8-2971-dd30-3516a39b0d44@mailbox.org>

Dear Jack


This doesn't answer your question, but I would advise against this design.

- Users do not expect side effects (such as network access) from 
accessing a symbol.

- A function gives you much more flexibility to change the interface 
later on. (Arguments for fetching the data, tokens for API access, ...)

- You already encountered a few quirks that make this an "interesting" 
problem.

A function call only needs a pair of parentheses.


Best regards

Kirill


On 23.03.19 16:50, Jack O. Wasey wrote:
> Dear all,
>
> I am developing a package which is a front for various online data 
> (icd.data https://github.com/jackwasey/icd.data/ ). The current CRAN 
> version just has lazy-loaded data, but now the package encompasses far 
> more current and historic ICD codes from different countries, these 
> can't be included in the CRAN package even with maximal compression.
>
> Other authors have solved this using functions to get the data, with 
> or without a local cache of the retrieved data. No CRAN or other 
> packages I have found after extensive searching use the attractive 
> active binding feature of R.
>
> The goal is simple: for the user to refer to the data by its symbol, 
> e.g., 'icd10fr2019', or 'icd.data::icd10fr2019', and it will be 
> downloaded and parsed transparently (if the user has already granted 
> permission, or after prompt if they haven't).
>
> The bindings are set using commands alongside the function definitions 
> in R/*.R .E.g.
>
> makeActiveBinding("icd10cm_latest", .icd10cm_latest_binding, 
> environment())
> lockBinding("icd10cm_latest", environment())
>
> For non-interactive use, CI and CRAN tests, no data should be 
> downloaded, and no cache directory set up without user consent. For 
> interactive use, I ask permission to create a local data cache before 
> downloading data.
>
> This works fine... until R CMD check. The following steps seems to 
> 'get' or 'source' everything from the package namespace, which results 
> in triggering the active bindings, and this fails if I am unable to 
> get consent to download data, and want to 'stop' on this error condition.
> ?- checking dependencies in R code
> ?- checking S3 generic/method consistency
> ?- checking foreign function calls
> ?- checking R code for possible problems
>
> Debugging CI-specific binding bugs is a nightmare because these occur 
> in different R sessions initiated by R CMD check.
>
> There may be legitimate reasons to evaluate everything in the 
> namespace, but I've no idea what they are. Incidentally, Rstudio also 
> does 'mget' on the whole package namespace and triggers bindings 
> during autocomplete. https://github.com/rstudio/rstudio/issues/4414
>
> Is this something I should raise as an issue with R? Or does anyone 
> have any idea of a sensible approach to this. Currently I have a set 
> of workarounds, but this complicates the code, and has taken an awful 
> lot of time. Does anyone know of any CRAN package which has active 
> bindings in the package namespace?
>
> Any ideas appreciated.
>
> Jack Wasey
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From j@ck @end|ng |rom j@ckw@@ey@com  Sat Mar 23 23:57:08 2019
From: j@ck @end|ng |rom j@ckw@@ey@com (Jack Wasey)
Date: Sat, 23 Mar 2019 18:57:08 -0400
Subject: [R-pkg-devel] active bindings in package namespace
In-Reply-To: <f6341220-4bc8-2971-dd30-3516a39b0d44@mailbox.org>
References: <0293f167-1beb-41a8-b831-00de82c769a2@jackwasey.com>
 <f6341220-4bc8-2971-dd30-3516a39b0d44@mailbox.org>
Message-ID: <ab20b584-7242-15d5-3abe-930f2ba657e5@jackwasey.com>

Thanks both, this is helpful advice.

On 3/23/19 5:14 PM, Kirill M?ller wrote:
> Dear Jack
> 
> 
> This doesn't answer your question, but I would advise against this design.
> 
> - Users do not expect side effects (such as network access) from accessing a symbol.
> 
> - A function gives you much more flexibility to change the interface later on. (Arguments for fetching the data, tokens for API access, ...)
> 
> - You already encountered a few quirks that make this an "interesting" problem.
> 
> A function call only needs a pair of parentheses.
> 
> 
> Best regards
> 
> Kirill
> 
> 
> On 23.03.19 16:50, Jack O. Wasey wrote:
>> Dear all,
>>
>> I am developing a package which is a front for various online data (icd.data https://github.com/jackwasey/icd.data/ ). The current CRAN version just has lazy-loaded data, but now the package encompasses far more current and historic ICD codes from different countries, these can't be included in the CRAN package even with maximal compression.
>>
>> Other authors have solved this using functions to get the data, with or without a local cache of the retrieved data. No CRAN or other packages I have found after extensive searching use the attractive active binding feature of R.
>>
>> The goal is simple: for the user to refer to the data by its symbol, e.g., 'icd10fr2019', or 'icd.data::icd10fr2019', and it will be downloaded and parsed transparently (if the user has already granted permission, or after prompt if they haven't).
>>
>> The bindings are set using commands alongside the function definitions in R/*.R .E.g.
>>
>> makeActiveBinding("icd10cm_latest", .icd10cm_latest_binding, environment())
>> lockBinding("icd10cm_latest", environment())
>>
>> For non-interactive use, CI and CRAN tests, no data should be downloaded, and no cache directory set up without user consent. For interactive use, I ask permission to create a local data cache before downloading data.
>>
>> This works fine... until R CMD check. The following steps seems to 'get' or 'source' everything from the package namespace, which results in triggering the active bindings, and this fails if I am unable to get consent to download data, and want to 'stop' on this error condition.
>> ?- checking dependencies in R code
>> ?- checking S3 generic/method consistency
>> ?- checking foreign function calls
>> ?- checking R code for possible problems
>>
>> Debugging CI-specific binding bugs is a nightmare because these occur in different R sessions initiated by R CMD check.
>>
>> There may be legitimate reasons to evaluate everything in the namespace, but I've no idea what they are. Incidentally, Rstudio also does 'mget' on the whole package namespace and triggers bindings during autocomplete. https://github.com/rstudio/rstudio/issues/4414
>>
>> Is this something I should raise as an issue with R? Or does anyone have any idea of a sensible approach to this. Currently I have a set of workarounds, but this complicates the code, and has taken an awful lot of time. Does anyone know of any CRAN package which has active bindings in the package namespace?
>>
>> Any ideas appreciated.
>>
>> Jack Wasey
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From hongoo| @end|ng |rom m|cro@o|t@com  Sun Mar 24 16:21:20 2019
From: hongoo| @end|ng |rom m|cro@o|t@com (Hong Ooi)
Date: Sun, 24 Mar 2019 15:21:20 +0000
Subject: [R-pkg-devel] active bindings in package namespace
In-Reply-To: <ab20b584-7242-15d5-3abe-930f2ba657e5@jackwasey.com>
References: <0293f167-1beb-41a8-b831-00de82c769a2@jackwasey.com>
 <f6341220-4bc8-2971-dd30-3516a39b0d44@mailbox.org>
 <ab20b584-7242-15d5-3abe-930f2ba657e5@jackwasey.com>
Message-ID: <SG2P15301MB0094F2FEDFE124D096FD132CA65D0@SG2P15301MB0094.APCP153.PROD.OUTLOOK.COM>

Don't want to turn this into a pile-on, but I also think this isn't a very good idea. As I understand it, accessing the symbol "foo" will pull the latest version of foo from the remote site. This has consequences for reproducibility, because now your code could be exactly the same, and your local environment exactly the same, and yet running the code at different times can yield different results because the remote data has been updated.


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Jack Wasey
Sent: Sunday, 24 March 2019 9:57 AM
To: Kirill M?ller <krlmlr+ml at mailbox.org>; R Development <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] active bindings in package namespace

Thanks both, this is helpful advice.

On 3/23/19 5:14 PM, Kirill M?ller wrote:
> Dear Jack
> 
> 
> This doesn't answer your question, but I would advise against this design.
> 
> - Users do not expect side effects (such as network access) from accessing a symbol.
> 
> - A function gives you much more flexibility to change the interface 
> later on. (Arguments for fetching the data, tokens for API access, 
> ...)
> 
> - You already encountered a few quirks that make this an "interesting" problem.
> 
> A function call only needs a pair of parentheses.
> 
> 
> Best regards
> 
> Kirill
> 
> 
> On 23.03.19 16:50, Jack O. Wasey wrote:
>> Dear all,
>>
>> I am developing a package which is a front for various online data (icd.data https://github.com/jackwasey/icd.data/ ). The current CRAN version just has lazy-loaded data, but now the package encompasses far more current and historic ICD codes from different countries, these can't be included in the CRAN package even with maximal compression.
>>
>> Other authors have solved this using functions to get the data, with or without a local cache of the retrieved data. No CRAN or other packages I have found after extensive searching use the attractive active binding feature of R.
>>
>> The goal is simple: for the user to refer to the data by its symbol, e.g., 'icd10fr2019', or 'icd.data::icd10fr2019', and it will be downloaded and parsed transparently (if the user has already granted permission, or after prompt if they haven't).
>>
>> The bindings are set using commands alongside the function definitions in R/*.R .E.g.
>>
>> makeActiveBinding("icd10cm_latest", .icd10cm_latest_binding, 
>> environment()) lockBinding("icd10cm_latest", environment())
>>
>> For non-interactive use, CI and CRAN tests, no data should be downloaded, and no cache directory set up without user consent. For interactive use, I ask permission to create a local data cache before downloading data.
>>
>> This works fine... until R CMD check. The following steps seems to 'get' or 'source' everything from the package namespace, which results in triggering the active bindings, and this fails if I am unable to get consent to download data, and want to 'stop' on this error condition.
>> ?- checking dependencies in R code
>> ?- checking S3 generic/method consistency
>> ?- checking foreign function calls
>> ?- checking R code for possible problems
>>
>> Debugging CI-specific binding bugs is a nightmare because these occur in different R sessions initiated by R CMD check.
>>
>> There may be legitimate reasons to evaluate everything in the 
>> namespace, but I've no idea what they are. Incidentally, Rstudio also 
>> does 'mget' on the whole package namespace and triggers bindings 
>> during autocomplete. https://github.com/rstudio/rstudio/issues/4414
>>
>> Is this something I should raise as an issue with R? Or does anyone have any idea of a sensible approach to this. Currently I have a set of workarounds, but this complicates the code, and has taken an awful lot of time. Does anyone know of any CRAN package which has active bindings in the package namespace?
>>
>> Any ideas appreciated.
>>
>> Jack Wasey
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list 
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel

From j@ck @end|ng |rom j@ckw@@ey@com  Sun Mar 24 18:27:43 2019
From: j@ck @end|ng |rom j@ckw@@ey@com (Jack O. Wasey)
Date: Sun, 24 Mar 2019 13:27:43 -0400
Subject: [R-pkg-devel] active bindings in package namespace
In-Reply-To: <SG2P15301MB0094F2FEDFE124D096FD132CA65D0@SG2P15301MB0094.APCP153.PROD.OUTLOOK.COM>
References: <0293f167-1beb-41a8-b831-00de82c769a2@jackwasey.com>
 <f6341220-4bc8-2971-dd30-3516a39b0d44@mailbox.org>
 <ab20b584-7242-15d5-3abe-930f2ba657e5@jackwasey.com>
 <SG2P15301MB0094F2FEDFE124D096FD132CA65D0@SG2P15301MB0094.APCP153.PROD.OUTLOOK.COM>
Message-ID: <6511414a-cef8-f7c9-61e6-e9ad74b425b5@jackwasey.com>

This is a good point. I would prefer to include all the data in the 
package, but CRAN has strict limitations on package and subdirectory 
size, which the potential data would easily exceed. Whether it is an 
active binding or a get function, dynamically downloaded data will 
always suffer this problem. Also, there are potential copyright issues 
which may prevent including all the relevant data in a package, no 
matter how the package is distributed.

For this particular package of ICD data, the biggest risk is not the 
data changing, but the data not being made available in the future, or 
not being provided in a useful format.

I do allow the user to set the cache directory, which eventually 
includes all the raw and processed data, and this could be archived by 
the user for reproducibilty. In addition, the test suite covers 
potential changes to the source data.

On 3/24/19 11:21 AM, Hong Ooi wrote:
> Don't want to turn this into a pile-on, but I also think this isn't a very good idea. As I understand it, accessing the symbol "foo" will pull the latest version of foo from the remote site. This has consequences for reproducibility, because now your code could be exactly the same, and your local environment exactly the same, and yet running the code at different times can yield different results because the remote data has been updated.
> 
> 
> -----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Jack Wasey
> Sent: Sunday, 24 March 2019 9:57 AM
> To: Kirill M?ller <krlmlr+ml at mailbox.org>; R Development <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] active bindings in package namespace
> 
> Thanks both, this is helpful advice.
> 
> On 3/23/19 5:14 PM, Kirill M?ller wrote:
>> Dear Jack
>>
>>
>> This doesn't answer your question, but I would advise against this design.
>>
>> - Users do not expect side effects (such as network access) from accessing a symbol.
>>
>> - A function gives you much more flexibility to change the interface
>> later on. (Arguments for fetching the data, tokens for API access,
>> ...)
>>
>> - You already encountered a few quirks that make this an "interesting" problem.
>>
>> A function call only needs a pair of parentheses.
>>
>>
>> Best regards
>>
>> Kirill
>>
>>
>> On 23.03.19 16:50, Jack O. Wasey wrote:
>>> Dear all,
>>>
>>> I am developing a package which is a front for various online data (icd.data https://github.com/jackwasey/icd.data/ ). The current CRAN version just has lazy-loaded data, but now the package encompasses far more current and historic ICD codes from different countries, these can't be included in the CRAN package even with maximal compression.
>>>
>>> Other authors have solved this using functions to get the data, with or without a local cache of the retrieved data. No CRAN or other packages I have found after extensive searching use the attractive active binding feature of R.
>>>
>>> The goal is simple: for the user to refer to the data by its symbol, e.g., 'icd10fr2019', or 'icd.data::icd10fr2019', and it will be downloaded and parsed transparently (if the user has already granted permission, or after prompt if they haven't).
>>>
>>> The bindings are set using commands alongside the function definitions in R/*.R .E.g.
>>>
>>> makeActiveBinding("icd10cm_latest", .icd10cm_latest_binding,
>>> environment()) lockBinding("icd10cm_latest", environment())
>>>
>>> For non-interactive use, CI and CRAN tests, no data should be downloaded, and no cache directory set up without user consent. For interactive use, I ask permission to create a local data cache before downloading data.
>>>
>>> This works fine... until R CMD check. The following steps seems to 'get' or 'source' everything from the package namespace, which results in triggering the active bindings, and this fails if I am unable to get consent to download data, and want to 'stop' on this error condition.
>>>  ?- checking dependencies in R code
>>>  ?- checking S3 generic/method consistency
>>>  ?- checking foreign function calls
>>>  ?- checking R code for possible problems
>>>
>>> Debugging CI-specific binding bugs is a nightmare because these occur in different R sessions initiated by R CMD check.
>>>
>>> There may be legitimate reasons to evaluate everything in the
>>> namespace, but I've no idea what they are. Incidentally, Rstudio also
>>> does 'mget' on the whole package namespace and triggers bindings
>>> during autocomplete. https://github.com/rstudio/rstudio/issues/4414
>>>
>>> Is this something I should raise as an issue with R? Or does anyone have any idea of a sensible approach to this. Currently I have a set of workarounds, but this complicates the code, and has taken an awful lot of time. Does anyone know of any CRAN package which has active bindings in the package namespace?
>>>
>>> Any ideas appreciated.
>>>
>>> Jack Wasey
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From n|u|tz @end|ng |rom gm@||@com  Sun Mar 24 21:00:33 2019
From: n|u|tz @end|ng |rom gm@||@com (Neal Fultz)
Date: Sun, 24 Mar 2019 13:00:33 -0700
Subject: [R-pkg-devel] What to do when a dependency falls off CRAN
Message-ID: <CAL9B2vf1rZszpaxKrKYKfrTS10kQg3L-s=hVcXCM--2RtWeYZw@mail.gmail.com>

One of my clients has a shiny app which depends on RTextTools, which was
dropped from CRAN for lack of maintenance.

What would you all recommend in this situation? Here's a couple options I
could think of:

1) Vendor the orphaned package - we are doing this for now. I'm not a fan
of this, because then there's a mix of GPL-2, GPL-3, Apache 2.0 and
proprietary code all in one repo, and because it might encourage other
developers to write monolithic, non-modular code. At least when we find
bugs  we can fix them.

2) Install from CRAN archive instead of CRAN -  good for not having to
carry around third party code in our repo, but I'd expect this to break
with R 3.6, as the package hasn't rolled forward? Also no good way to fix
bugs.

3) Adopt package, push fixed one to CRAN - not sure what the exact process
is for un-orphaning, or if I would want to commit to maintaining it without
knowing more about why it was dropped and how much work it is to get it
passing. Eg if it were pathological solaris memory errors, I might have to
pass. Are there ways to see old automated CRAN checks on a package that was
abandoned? This approach obviously would benefit the community, but this is
probably not billable work.

4) Rewrite - I could do this, but it's probably tedious, weeks of work, and
my client may not want to pay for it; they also may not be interested in
sharing it back if they did.

5) Find another package - then I have to rewrite the "application" code
instead of the "library" code - also sounds tedious, days instead of weeks,
but more likely to be billable.

This topic has come up a few times in the past, but I would like to hear
your current opinions given that CRAN is much more rigorous and automated
now.

v/r

Neal Fultz

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Sun Mar 24 22:00:04 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sun, 24 Mar 2019 16:00:04 -0500
Subject: [R-pkg-devel] What to do when a dependency falls off CRAN
In-Reply-To: <CAL9B2vf1rZszpaxKrKYKfrTS10kQg3L-s=hVcXCM--2RtWeYZw@mail.gmail.com>
References: <CAL9B2vf1rZszpaxKrKYKfrTS10kQg3L-s=hVcXCM--2RtWeYZw@mail.gmail.com>
Message-ID: <23703.61396.119559.383801@rob.eddelbuettel.com>


Neal,

"It's complicated".  To a first appromimation, a dependency is a risk.

As an illustration, I taught CRANberries a few years in its run to also
consider disappearing packages.  Right now, it knows about 3685 packages
which are (or were at some point) "archived". This is an imprecise count as
some are "reborn", while some are special and have multiple archive /
readmitted / archive/ ... phases.  But right now, we have 3685/13957 or
26.4% which are / were archived.  Which is quite a lot.  Hence "a risk".

And just like other things in life you need to balance which risks are worth
taking and which are not.  Different people use different heuristics:
 - some trust certain packages more than others
 - some trust certain authors more than others
 - some trust certain communities more than others
There are no hard or fast rules.  Packages disappearing are a bit of pain,
but "we all" buy into CRAN maintaining quality standard for ... actually
enforcing them.

But as it is somewhat related, I now show for some/most of packages what
their count of dependecies is.  Count is another very imperfect measure, but
it provides a little bit on information at a glance. See [1] for more.

As for the package at hand: maybe importing the functionality you need would
work in the narrow sense. In the broader sense, adopting and maintaining the
package would surely be best for the community as a whole.

Dirk

[1] http://dirk.eddelbuettel.com/blog/2019/03/14#020_dependency_badges

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From dw|n@em|u@ @end|ng |rom comc@@t@net  Mon Mar 25 09:34:22 2019
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Mon, 25 Mar 2019 01:34:22 -0700
Subject: [R-pkg-devel] What to do when a dependency falls off CRAN
In-Reply-To: <CAL9B2vf1rZszpaxKrKYKfrTS10kQg3L-s=hVcXCM--2RtWeYZw@mail.gmail.com>
References: <CAL9B2vf1rZszpaxKrKYKfrTS10kQg3L-s=hVcXCM--2RtWeYZw@mail.gmail.com>
Message-ID: <f8551a09-40c0-900f-36e6-cd432ab45a59@comcast.net>

When I attempt to install it the error indicates that the maxent package 
is not available. Attempts to install that package fail with more errors 
than can fit on an Rstudio console, so I cannot even scroll to see the 
first error.

You could simply remove the dependency on that package if your 
application doesn't require the maxent algorithm. Most of the RTextTools 
package is R code.


-- 

David Winsemius



On 3/24/19 1:00 PM, Neal Fultz wrote:
> One of my clients has a shiny app which depends on RTextTools, which was
> dropped from CRAN for lack of maintenance.
>
> What would you all recommend in this situation? Here's a couple options I
> could think of:
>
> 1) Vendor the orphaned package - we are doing this for now. I'm not a fan
> of this, because then there's a mix of GPL-2, GPL-3, Apache 2.0 and
> proprietary code all in one repo, and because it might encourage other
> developers to write monolithic, non-modular code. At least when we find
> bugs  we can fix them.
>
> 2) Install from CRAN archive instead of CRAN -  good for not having to
> carry around third party code in our repo, but I'd expect this to break
> with R 3.6, as the package hasn't rolled forward? Also no good way to fix
> bugs.
>
> 3) Adopt package, push fixed one to CRAN - not sure what the exact process
> is for un-orphaning, or if I would want to commit to maintaining it without
> knowing more about why it was dropped and how much work it is to get it
> passing. Eg if it were pathological solaris memory errors, I might have to
> pass. Are there ways to see old automated CRAN checks on a package that was
> abandoned? This approach obviously would benefit the community, but this is
> probably not billable work.
>
> 4) Rewrite - I could do this, but it's probably tedious, weeks of work, and
> my client may not want to pay for it; they also may not be interested in
> sharing it back if they did.
>
> 5) Find another package - then I have to rewrite the "application" code
> instead of the "library" code - also sounds tedious, days instead of weeks,
> but more likely to be billable.
>
> This topic has come up a few times in the past, but I would like to hear
> your current opinions given that CRAN is much more rigorous and automated
> now.
>
> v/r
>
> Neal Fultz
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@||@@tubner @end|ng |rom d@q@n@@com  Mon Mar 25 10:39:59 2019
From: r@||@@tubner @end|ng |rom d@q@n@@com (Ralf Stubner)
Date: Mon, 25 Mar 2019 10:39:59 +0100
Subject: [R-pkg-devel] active bindings in package namespace
In-Reply-To: <6511414a-cef8-f7c9-61e6-e9ad74b425b5@jackwasey.com>
References: <0293f167-1beb-41a8-b831-00de82c769a2@jackwasey.com>
 <f6341220-4bc8-2971-dd30-3516a39b0d44@mailbox.org>
 <ab20b584-7242-15d5-3abe-930f2ba657e5@jackwasey.com>
 <SG2P15301MB0094F2FEDFE124D096FD132CA65D0@SG2P15301MB0094.APCP153.PROD.OUTLOOK.COM>
 <6511414a-cef8-f7c9-61e6-e9ad74b425b5@jackwasey.com>
Message-ID: <2053e65e-047c-2d1e-22e2-1a7c1b940db2@daqana.com>

On 24.03.19 18:27, Jack O. Wasey wrote:
> This is a good point. I would prefer to include all the data in the
> package, but CRAN has strict limitations on package and subdirectory
> size, which the potential data would easily exceed.

You could use a separate data package distributed via drat, c.f.
https://journal.r-project.org/archive/2017/RJ-2017-026/RJ-2017-026.pdf.
The original 'hurricaneexposure' package has meanwhile been archived.
However, I have successfully used this method in
https://cran.r-project.org/package=swephR.

Greetings
Ralf

-- 
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190325/178b571c/attachment.sig>

From r@||@@tubner @end|ng |rom d@q@n@@com  Mon Mar 25 11:12:33 2019
From: r@||@@tubner @end|ng |rom d@q@n@@com (Ralf Stubner)
Date: Mon, 25 Mar 2019 11:12:33 +0100
Subject: [R-pkg-devel] What to do when a dependency falls off CRAN
In-Reply-To: <CAL9B2vf1rZszpaxKrKYKfrTS10kQg3L-s=hVcXCM--2RtWeYZw@mail.gmail.com>
References: <CAL9B2vf1rZszpaxKrKYKfrTS10kQg3L-s=hVcXCM--2RtWeYZw@mail.gmail.com>
Message-ID: <21b83a27-e9c0-6da8-6b75-02be45719dcb@daqana.com>

On 24.03.19 21:00, Neal Fultz wrote:
> 3) Adopt package, push fixed one to CRAN - not sure what the exact process
> is for un-orphaning, or if I would want to commit to maintaining it without
> knowing more about why it was dropped and how much work it is to get it
> passing. Eg if it were pathological solaris memory errors, I might have to
> pass. Are there ways to see old automated CRAN checks on a package that was
> abandoned? This approach obviously would benefit the community, but this is
> probably not billable work.

How about asking your client if they are willing to (partially) fund
somebody (does not have to be you) for getting the package back on CRAN?
They could be added to the DESCRIPTION in turn. And it might be cheaper
for them than rewriting the library or the application.

As for process: I think you basically upload a new version with higher
version number and updated "Maintainer" field. I have done this once for
tikzDevice, but that was only orphaned and not archived.

As for assessing the risks: Often the old checks are available for some
time after archiving, but I cannot find them in this case. Running "R
CMD check" on the two latest tarballs reveals only some NOTEs, though,
the most serious one from my point of view is usage of 'rand()' via
'random_shuffle()'
https://github.com/cran/maxent/blob/master/src/sgd.cpp#L77.

Greetings
Ralf

-- 
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190325/695ad1b8/attachment.sig>

From je@n-|oup-thom@@@g@u@@en @end|ng |rom |nr@@|r  Mon Mar 25 11:27:45 2019
From: je@n-|oup-thom@@@g@u@@en @end|ng |rom |nr@@|r (Jean-Loup Gaussen)
Date: Mon, 25 Mar 2019 11:27:45 +0100
Subject: [R-pkg-devel] GDAL which version on CRAN ?
Message-ID: <7b0a5eec-9cf4-4115-bf0b-b6b16f56b60e@inra.fr>

Hi everyone !

I'm looking for the library GDAL >= 2.0.0 on windows and Mac OS to pass 
CRAN check and compilation.

Do you know which version is installed on the CRAN for windows and Mac OS ?
So far, I found 1.8.1 for windows and 2.1.3 for Mac OS ...

Using rwinlib project for windows is not a solution as rgdal and sf 
packages.

Downgrade our c++ code is not a solution too.

Any ideas ?

Thanks,

JLG.

	[[alternative HTML version deleted]]


From m@rt@@k@r@@@ @end|ng |rom gm@||@com  Mon Mar 25 16:13:51 2019
From: m@rt@@k@r@@@ @end|ng |rom gm@||@com (=?UTF-8?B?TWFydGEgS2FyYcWb?=)
Date: Mon, 25 Mar 2019 11:13:51 -0400
Subject: [R-pkg-devel] Should R be in single quotes in package Description
 filed in DESCRIPTION file?
Message-ID: <CADVZz_oZbJi8oWSfG+n01wNv7k3QgceE7gn7fehL6duQOsbKAg@mail.gmail.com>

Should R be in single quotes in package Description filed in DESCRIPTION
file? E.g. which of the following versions of Description file is correct?

   1. Description: Created to host raw accelerometry data sets and their
   derivatives which are used in the corresponding 'adept' 'R' package.
   2. Description: Created to host raw accelerometry data sets and their
   derivatives which are used in the corresponding 'adept' R package.

Thank you,
Marta

	[[alternative HTML version deleted]]


From m@x|me@turgeon @end|ng |rom m@||@mcg|||@c@  Mon Mar 25 16:26:30 2019
From: m@x|me@turgeon @end|ng |rom m@||@mcg|||@c@ (Maxime Turgeon)
Date: Mon, 25 Mar 2019 15:26:30 +0000
Subject: [R-pkg-devel] 
 Should R be in single quotes in package Description
 filed in DESCRIPTION file?
In-Reply-To: <CADVZz_oZbJi8oWSfG+n01wNv7k3QgceE7gn7fehL6duQOsbKAg@mail.gmail.com>
References: <CADVZz_oZbJi8oWSfG+n01wNv7k3QgceE7gn7fehL6duQOsbKAg@mail.gmail.com>
Message-ID: <QB1PR01MB3537D73CD805AA24CDCB6E42BA5E0@QB1PR01MB3537.CANPRD01.PROD.OUTLOOK.COM>

Looking at `tools::CRAN_package_db()`, I can see 1433 packages that mention R in the Description field, and only 77 use single quotes around it. So I would say that the consensus seems to be to *not* use single quotes.

On the other hand, I am not convinced you need to mention R at all in your Description field. So maybe a third option would be:
Description: Created to host raw accelerometry data sets and their
   derivatives which are used in the corresponding 'adept' package.

Max
________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Marta Kara? <marta.karass at gmail.com>
Sent: March 25, 2019 11:13 AM
To: package-develop
Subject: [R-pkg-devel] Should R be in single quotes in package Description filed in DESCRIPTION file?

Should R be in single quotes in package Description filed in DESCRIPTION
file? E.g. which of the following versions of Description file is correct?

   1. Description: Created to host raw accelerometry data sets and their
   derivatives which are used in the corresponding 'adept' 'R' package.
   2. Description: Created to host raw accelerometry data sets and their
   derivatives which are used in the corresponding 'adept' R package.

Thank you,
Marta

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From m@rt@@k@r@@@ @end|ng |rom gm@||@com  Mon Mar 25 16:29:54 2019
From: m@rt@@k@r@@@ @end|ng |rom gm@||@com (=?UTF-8?B?TWFydGEgS2FyYcWb?=)
Date: Mon, 25 Mar 2019 11:29:54 -0400
Subject: [R-pkg-devel] 
 Should R be in single quotes in package Description
 filed in DESCRIPTION file?
In-Reply-To: <QB1PR01MB3537D73CD805AA24CDCB6E42BA5E0@QB1PR01MB3537.CANPRD01.PROD.OUTLOOK.COM>
References: <CADVZz_oZbJi8oWSfG+n01wNv7k3QgceE7gn7fehL6duQOsbKAg@mail.gmail.com>
 <QB1PR01MB3537D73CD805AA24CDCB6E42BA5E0@QB1PR01MB3537.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <CADVZz_qoe=xHdZPMARsD19o3ZqGqgv7yC1jheCkrZ74X8GMe8A@mail.gmail.com>

Hi Max,
Thank you for this excellent answer! I am going to go for what you
suggested and skip R in Description field at all.

All the best,
Marta

On Mon, Mar 25, 2019 at 11:26 AM Maxime Turgeon <
maxime.turgeon at mail.mcgill.ca> wrote:

> Looking at `tools::CRAN_package_db()`, I can see 1433 packages that
> mention R in the Description field, and only 77 use single quotes around
> it. So I would say that the consensus seems to be to *not* use single
> quotes.
>
> On the other hand, I am not convinced you need to mention R at all in your
> Description field. So maybe a third option would be:
>
> Description: Created to host raw accelerometry data sets and their
>    derivatives which are used in the corresponding 'adept' package.
>
>
> Max
> ------------------------------
> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on behalf
> of Marta Kara? <marta.karass at gmail.com>
> *Sent:* March 25, 2019 11:13 AM
> *To:* package-develop
> *Subject:* [R-pkg-devel] Should R be in single quotes in package
> Description filed in DESCRIPTION file?
>
> Should R be in single quotes in package Description filed in DESCRIPTION
> file? E.g. which of the following versions of Description file is correct?
>
>    1. Description: Created to host raw accelerometry data sets and their
>    derivatives which are used in the corresponding 'adept' 'R' package.
>    2. Description: Created to host raw accelerometry data sets and their
>    derivatives which are used in the corresponding 'adept' R package.
>
> Thank you,
> Marta
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From c@rtogr@iiow m@iii@g oii gm@ii@com  Mon Mar 25 23:12:49 2019
From: c@rtogr@iiow m@iii@g oii gm@ii@com (c@rtogr@iiow m@iii@g oii gm@ii@com)
Date: Mon, 25 Mar 2019 22:12:49 +0000 (UTC)
Subject: [R-pkg-devel] package cartograflow_0.0.0.9000.tar.gz
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
Message-ID: <1441050500.17952887.1553551969403@mail.yahoo.com>

Hello, 
I've submitted my package cartograflow and I received an email from your teeam that it does not pass the incoming checks automatically.Debian: <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
Status: 1 ERROR, 2 WARNINGs, 1 NOTE

So, I've made the new check on my plateform (linux ubuntu) and the check is OK.I used : ==> devtools::check(args = c('--no-manual','--as-cran'))Status is : 
?? R CMD check results ???????????????????????????? cartograflow 0.0.0.9000 ????
Duration: 54.6s
0 errors ? | 0 warnings ? | 0 notes ?
R CMD check succeeded
Can you? help me to fix the problem? 
Thanks in advance to your replySylvain
	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Mar 25 23:38:20 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 25 Mar 2019 23:38:20 +0100
Subject: [R-pkg-devel] package cartograflow_0.0.0.9000.tar.gz
In-Reply-To: <1441050500.17952887.1553551969403@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
Message-ID: <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>

I cannot beloeve it. But this is certainly not R-devel?

Not sure about devtools which we do not use on CRAN, but simply

R CMD check --as-cran

with a recent R-devel  version on the package tarball should reproduce 
the findings.

Best,
Uwe Ligges


On 25.03.2019 23:12, cartograflow at gmail.com wrote:
> Hello,
> I've submitted my package cartograflow and I received an email from your teeam that it does not pass the incoming checks automatically.Debian: <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
> 
> So, I've made the new check on my plateform (linux ubuntu) and the check is OK.I used : ==> devtools::check(args = c('--no-manual','--as-cran'))Status is :
> ?? R CMD check results ???????????????????????????? cartograflow 0.0.0.9000 ????
> Duration: 54.6s
> 0 errors ? | 0 warnings ? | 0 notes ?
> R CMD check succeeded
> Can you? help me to fix the problem?
> Thanks in advance to your replySylvain
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From edd @end|ng |rom deb|@n@org  Mon Mar 25 23:41:32 2019
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 25 Mar 2019 17:41:32 -0500
Subject: [R-pkg-devel] package cartograflow_0.0.0.9000.tar.gz
In-Reply-To: <1441050500.17952887.1553551969403@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
Message-ID: <23705.22812.65464.583304@rob.eddelbuettel.com>


On 25 March 2019 at 22:12, cartograflow at gmail.com wrote:
| Hello, 
| I've submitted my package cartograflow and I received an email from your teeam that it does not pass the incoming checks automatically.Debian: <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
| Status: 1 ERROR, 2 WARNINGs, 1 NOTE

Note that the ERROR clearly states

  * checking PDF version of manual without hyperrefs or index ... ERROR

yet you said '--no-manual':
 
| So, I've made the new check on my plateform (linux ubuntu) and the check is OK.I used : ==> devtools::check(args = c('--no-manual','--as-cran'))Status is : 

So sure: if you exclude the manual, the error goes away. As CRAN builds with
the manual you probably need to fix that.

Dirk


| ?? R CMD check results ???????????????????????????? cartograflow 0.0.0.9000 ????
| Duration: 54.6s
| 0 errors ? | 0 warnings ? | 0 notes ?
| R CMD check succeeded
| Can you? help me to fix the problem? 
| Thanks in advance to your replySylvain
| 	[[alternative HTML version deleted]]
| 
| ______________________________________________
| R-package-devel at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From d@v|d@kepp||nger @end|ng |rom gm@||@com  Tue Mar 26 01:12:48 2019
From: d@v|d@kepp||nger @end|ng |rom gm@||@com (David Kepplinger)
Date: Mon, 25 Mar 2019 17:12:48 -0700
Subject: [R-pkg-devel] CRAN incoming checks fail due to non-staged
 installation
In-Reply-To: <CAGmyFCHv7wnXCZBb7JS7=F8A-m=n_2o8VOn8gX+eJanv0n2fJw@mail.gmail.com>
References: <CAGmyFCHt4iRN53Xn6pmc-cOEQNvmYLXc2WMWEhWNaPrVoG3jPw@mail.gmail.com>
 <QB1PR01MB35371DE754800DD3B482840FBA4A0@QB1PR01MB3537.CANPRD01.PROD.OUTLOOK.COM>
 <CAGmyFCHv7wnXCZBb7JS7=F8A-m=n_2o8VOn8gX+eJanv0n2fJw@mail.gmail.com>
Message-ID: <CAGmyFCFwA3=jMw9Uw6m31G7s8OtRLLKACiP312shfWHrmsdXaw@mail.gmail.com>

Dear Community,

The issue persists and I don't know if it is something I can fix or if it's
a false positive from the CRAN incoming checks. As a result, the package is
archived as the old version has other issues with the new R version.

Does someone have an idea how I can fix the issue? I have asked the CRAN
team last week to flag the issue as a false positive, but I haven't heard
back so I assume it's something I have to fix.

Thanks,
David

On Wed, Mar 13, 2019 at 3:34 PM David Kepplinger <david.kepplinger at gmail.com>
wrote:

> Thank you, Max, for the clarification.
> I have added the option "StagedInstall: yes" to the DESCRIPTION file, but
> it doesn't seem to be forcing a staged installation for x64 on Windows. I
> get the same NOTE now from winbuilder, but with more explanation which
> could help isolate the problem:
>
> install for i386
> * installing *source* package 'pense' ...
> ** using staged installation
> [...]
> install for x64
> * installing *source* package 'pense' ...
> not using staged install with --libs-only
> ** using non-staged installation
> [...]
>
>
> Best,
> David
>
> On Wed, Mar 13, 2019 at 1:21 PM Maxime Turgeon <
> maxime.turgeon at mail.mcgill.ca> wrote:
>
>> Hi David,
>>
>> Non-staged installation is something new in R-devel:
>> https://developer.r-project.org/Blog/public/2019/02/14/staged-install/index.html
>>
>>
>> Package maintainers can opt out of it (through DESCRIPTION), and I'm
>> assuming CRAN wants a quick way to know if that was the case when
>> diagnosing a submission.
>>
>> To resolutely opt *in* (which will eventually be the default), you could
>> try adding "StagedInstall: yes" to your DESCRIPTION file.
>>
>> Of course, one question still remains: why was the behaviour different
>> for the two architectures.
>>
>> Max
>> ------------------------------
>> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on
>> behalf of David Kepplinger <david.kepplinger at gmail.com>
>> *Sent:* March 13, 2019 3:39 PM
>> *To:* r-package-devel at r-project.org
>> *Subject:* [R-pkg-devel] CRAN incoming checks fail due to non-staged
>> installation
>>
>> Dear Community,
>>
>> I am trying to update the pense package on CRAN to fix `autoreconf`
>> problems, but the incoming checks fail for Windows (r-devel) with 2 NOTEs.
>>
>> The first NOTE is a HTTP 403 for a http://doi.org URL which I already
>> know
>> about and can not change, but the other NOTE is more obscure to me. It
>> says
>>
>> * checking whether package 'pense' can be installed ... NOTE
>> Found the following notes/warnings:
>>   Non-staged installation was used
>>
>>
>> and when I check the install log, it says
>>
>> install for i386
>> * installing *source* package 'pense' ...
>> ** using staged installation
>> [....]
>> install for x64
>> * installing *source* package 'pense' ...
>> ** using non-staged installation
>> [...]
>>
>>
>> Is this a false positive or is there something I can do to force using a
>> staged installation for both architectures on Windows?
>>
>> Best,
>> David
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Mar 26 11:27:53 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 26 Mar 2019 10:27:53 +0000
Subject: [R-pkg-devel] CRAN incoming checks fail due to non-staged
 installation
In-Reply-To: <CAGmyFCFwA3=jMw9Uw6m31G7s8OtRLLKACiP312shfWHrmsdXaw@mail.gmail.com>
References: <CAGmyFCHt4iRN53Xn6pmc-cOEQNvmYLXc2WMWEhWNaPrVoG3jPw@mail.gmail.com>
 <QB1PR01MB35371DE754800DD3B482840FBA4A0@QB1PR01MB3537.CANPRD01.PROD.OUTLOOK.COM>
 <CAGmyFCHv7wnXCZBb7JS7=F8A-m=n_2o8VOn8gX+eJanv0n2fJw@mail.gmail.com>
 <CAGmyFCFwA3=jMw9Uw6m31G7s8OtRLLKACiP312shfWHrmsdXaw@mail.gmail.com>
Message-ID: <CABtg=K=Dy2pQ1ENEwLa=p5Td8SZ7yr=FR0J0JGUhTuU1-buE-A@mail.gmail.com>

Hi David,

if you only see

install for i386
* installing *source* package 'pense' ...
** using staged installation
[....]
install for x64
* installing *source* package 'pense' ...
** using non-staged installation
[...]

then everything is fine, there is no NOTE here, AFAICT.

If you see a NOTE about this, please post 1) a link to your package,
and 2) a link to the win-builder output.

Thanks,
Gabor

On Tue, Mar 26, 2019 at 12:13 AM David Kepplinger
<david.kepplinger at gmail.com> wrote:
>
> Dear Community,
>
> The issue persists and I don't know if it is something I can fix or if it's
> a false positive from the CRAN incoming checks. As a result, the package is
> archived as the old version has other issues with the new R version.
>
> Does someone have an idea how I can fix the issue? I have asked the CRAN
> team last week to flag the issue as a false positive, but I haven't heard
> back so I assume it's something I have to fix.
>
> Thanks,
> David
>
> On Wed, Mar 13, 2019 at 3:34 PM David Kepplinger <david.kepplinger at gmail.com>
> wrote:
>
> > Thank you, Max, for the clarification.
> > I have added the option "StagedInstall: yes" to the DESCRIPTION file, but
> > it doesn't seem to be forcing a staged installation for x64 on Windows. I
> > get the same NOTE now from winbuilder, but with more explanation which
> > could help isolate the problem:
> >
> > install for i386
> > * installing *source* package 'pense' ...
> > ** using staged installation
> > [...]
> > install for x64
> > * installing *source* package 'pense' ...
> > not using staged install with --libs-only
> > ** using non-staged installation
> > [...]
> >
> >
> > Best,
> > David
> >
> > On Wed, Mar 13, 2019 at 1:21 PM Maxime Turgeon <
> > maxime.turgeon at mail.mcgill.ca> wrote:
> >
> >> Hi David,
> >>
> >> Non-staged installation is something new in R-devel:
> >> https://developer.r-project.org/Blog/public/2019/02/14/staged-install/index.html
> >>
> >>
> >> Package maintainers can opt out of it (through DESCRIPTION), and I'm
> >> assuming CRAN wants a quick way to know if that was the case when
> >> diagnosing a submission.
> >>
> >> To resolutely opt *in* (which will eventually be the default), you could
> >> try adding "StagedInstall: yes" to your DESCRIPTION file.
> >>
> >> Of course, one question still remains: why was the behaviour different
> >> for the two architectures.
> >>
> >> Max
> >> ------------------------------
> >> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on
> >> behalf of David Kepplinger <david.kepplinger at gmail.com>
> >> *Sent:* March 13, 2019 3:39 PM
> >> *To:* r-package-devel at r-project.org
> >> *Subject:* [R-pkg-devel] CRAN incoming checks fail due to non-staged
> >> installation
> >>
> >> Dear Community,
> >>
> >> I am trying to update the pense package on CRAN to fix `autoreconf`
> >> problems, but the incoming checks fail for Windows (r-devel) with 2 NOTEs.
> >>
> >> The first NOTE is a HTTP 403 for a http://doi.org URL which I already
> >> know
> >> about and can not change, but the other NOTE is more obscure to me. It
> >> says
> >>
> >> * checking whether package 'pense' can be installed ... NOTE
> >> Found the following notes/warnings:
> >>   Non-staged installation was used
> >>
> >>
> >> and when I check the install log, it says
> >>
> >> install for i386
> >> * installing *source* package 'pense' ...
> >> ** using staged installation
> >> [....]
> >> install for x64
> >> * installing *source* package 'pense' ...
> >> ** using non-staged installation
> >> [...]
> >>
> >>
> >> Is this a false positive or is there something I can do to force using a
> >> staged installation for both architectures on Windows?
> >>
> >> Best,
> >> David
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From oxbr|dgec@m|ord @end|ng |rom gm@||@com  Tue Mar 26 10:12:08 2019
From: oxbr|dgec@m|ord @end|ng |rom gm@||@com (Camford Oxbridge)
Date: Tue, 26 Mar 2019 18:12:08 +0900
Subject: [R-pkg-devel] base::assign(".ptime", proc.time(),
 pos = "CheckExEnv")
Message-ID: <CAA7Vcxs96m8AjsroBzVbohYnnhq8=JqEbu23VM4Je8o9hdC32w@mail.gmail.com>

In my package, the error `base::assign(".ptime", proc.time(), pos =
"CheckExEnv")`  occurred.

I cannot understand or fix it.

What should I do ?

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Mar 26 12:12:03 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 26 Mar 2019 12:12:03 +0100
Subject: [R-pkg-devel] base::assign(".ptime", proc.time(),
 pos = "CheckExEnv")
In-Reply-To: <CAA7Vcxs96m8AjsroBzVbohYnnhq8=JqEbu23VM4Je8o9hdC32w@mail.gmail.com>
References: <CAA7Vcxs96m8AjsroBzVbohYnnhq8=JqEbu23VM4Je8o9hdC32w@mail.gmail.com>
Message-ID: <85b9119f-1f1c-3cea-ce0a-6247607bd033@statistik.tu-dortmund.de>



On 26.03.2019 10:12, Camford Oxbridge wrote:
> In my package, the error `base::assign(".ptime", proc.time(), pos =
> "CheckExEnv")`  occurred.

Not an error, this is part of the check scripts.

Please report  the full output of the check.

Best,
Uwe Ligges



> I cannot understand or fix it.
> 
> What should I do ?
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From Roger@B|v@nd @end|ng |rom nhh@no  Tue Mar 26 12:30:47 2019
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Tue, 26 Mar 2019 12:30:47 +0100
Subject: [R-pkg-devel] GDAL which version on CRAN ?
Message-ID: <alpine.LFD.2.21.1903261225190.4138@reclus.nhh.no>

Apologies for out-of-thread reply.

The only feasible solutions are to maintain an off-CRAN (say drat) 
repository with binary packages you have built yourself, or use the 
existing CRAN infrastructure (rwinlib for Windows, etc., for which the 
rgdal, sf, gdalUtils, and other package maintainers are very grateful). 
Please do provide links to your source repo - it is possible that you are 
wrong about the changes needed to your code - you need to motivate your 
assertions.

Hope this clarifies,

Roger

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en


From d@v|d@kepp||nger @end|ng |rom gm@||@com  Tue Mar 26 16:18:36 2019
From: d@v|d@kepp||nger @end|ng |rom gm@||@com (David Kepplinger)
Date: Tue, 26 Mar 2019 08:18:36 -0700
Subject: [R-pkg-devel] CRAN incoming checks fail due to non-staged
 installation
In-Reply-To: <CABtg=K=Dy2pQ1ENEwLa=p5Td8SZ7yr=FR0J0JGUhTuU1-buE-A@mail.gmail.com>
References: <CAGmyFCHt4iRN53Xn6pmc-cOEQNvmYLXc2WMWEhWNaPrVoG3jPw@mail.gmail.com>
 <QB1PR01MB35371DE754800DD3B482840FBA4A0@QB1PR01MB3537.CANPRD01.PROD.OUTLOOK.COM>
 <CAGmyFCHv7wnXCZBb7JS7=F8A-m=n_2o8VOn8gX+eJanv0n2fJw@mail.gmail.com>
 <CAGmyFCFwA3=jMw9Uw6m31G7s8OtRLLKACiP312shfWHrmsdXaw@mail.gmail.com>
 <CABtg=K=Dy2pQ1ENEwLa=p5Td8SZ7yr=FR0J0JGUhTuU1-buE-A@mail.gmail.com>
Message-ID: <CAGmyFCFhLhhrVDPQMYp=Gq0dLhFg0S8A9PN3SKLtzwrwr2S5rw@mail.gmail.com>

Dear G?bor,

Oddly, it does emit a NOTE due to the non-staged install, as can be seen at
https://win-builder.r-project.org/86i67mqTD9YY

The package source can be found at
https://github.com/dakep/pense-rpkg/tree/release/1.2.2

Thanks for your help,
David


On Tue, Mar 26, 2019, 3:28 AM G?bor Cs?rdi, <csardi.gabor at gmail.com> wrote:

> Hi David,
>
> if you only see
>
> install for i386
> * installing *source* package 'pense' ...
> ** using staged installation
> [....]
> install for x64
> * installing *source* package 'pense' ...
> ** using non-staged installation
> [...]
>
> then everything is fine, there is no NOTE here, AFAICT.
>
> If you see a NOTE about this, please post 1) a link to your package,
> and 2) a link to the win-builder output.
>
> Thanks,
> Gabor
>
> On Tue, Mar 26, 2019 at 12:13 AM David Kepplinger
> <david.kepplinger at gmail.com> wrote:
> >
> > Dear Community,
> >
> > The issue persists and I don't know if it is something I can fix or if
> it's
> > a false positive from the CRAN incoming checks. As a result, the package
> is
> > archived as the old version has other issues with the new R version.
> >
> > Does someone have an idea how I can fix the issue? I have asked the CRAN
> > team last week to flag the issue as a false positive, but I haven't heard
> > back so I assume it's something I have to fix.
> >
> > Thanks,
> > David
> >
> > On Wed, Mar 13, 2019 at 3:34 PM David Kepplinger <
> david.kepplinger at gmail.com>
> > wrote:
> >
> > > Thank you, Max, for the clarification.
> > > I have added the option "StagedInstall: yes" to the DESCRIPTION file,
> but
> > > it doesn't seem to be forcing a staged installation for x64 on
> Windows. I
> > > get the same NOTE now from winbuilder, but with more explanation which
> > > could help isolate the problem:
> > >
> > > install for i386
> > > * installing *source* package 'pense' ...
> > > ** using staged installation
> > > [...]
> > > install for x64
> > > * installing *source* package 'pense' ...
> > > not using staged install with --libs-only
> > > ** using non-staged installation
> > > [...]
> > >
> > >
> > > Best,
> > > David
> > >
> > > On Wed, Mar 13, 2019 at 1:21 PM Maxime Turgeon <
> > > maxime.turgeon at mail.mcgill.ca> wrote:
> > >
> > >> Hi David,
> > >>
> > >> Non-staged installation is something new in R-devel:
> > >>
> https://developer.r-project.org/Blog/public/2019/02/14/staged-install/index.html
> > >>
> > >>
> > >> Package maintainers can opt out of it (through DESCRIPTION), and I'm
> > >> assuming CRAN wants a quick way to know if that was the case when
> > >> diagnosing a submission.
> > >>
> > >> To resolutely opt *in* (which will eventually be the default), you
> could
> > >> try adding "StagedInstall: yes" to your DESCRIPTION file.
> > >>
> > >> Of course, one question still remains: why was the behaviour different
> > >> for the two architectures.
> > >>
> > >> Max
> > >> ------------------------------
> > >> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on
> > >> behalf of David Kepplinger <david.kepplinger at gmail.com>
> > >> *Sent:* March 13, 2019 3:39 PM
> > >> *To:* r-package-devel at r-project.org
> > >> *Subject:* [R-pkg-devel] CRAN incoming checks fail due to non-staged
> > >> installation
> > >>
> > >> Dear Community,
> > >>
> > >> I am trying to update the pense package on CRAN to fix `autoreconf`
> > >> problems, but the incoming checks fail for Windows (r-devel) with 2
> NOTEs.
> > >>
> > >> The first NOTE is a HTTP 403 for a http://doi.org URL which I already
> > >> know
> > >> about and can not change, but the other NOTE is more obscure to me. It
> > >> says
> > >>
> > >> * checking whether package 'pense' can be installed ... NOTE
> > >> Found the following notes/warnings:
> > >>   Non-staged installation was used
> > >>
> > >>
> > >> and when I check the install log, it says
> > >>
> > >> install for i386
> > >> * installing *source* package 'pense' ...
> > >> ** using staged installation
> > >> [....]
> > >> install for x64
> > >> * installing *source* package 'pense' ...
> > >> ** using non-staged installation
> > >> [...]
> > >>
> > >>
> > >> Is this a false positive or is there something I can do to force
> using a
> > >> staged installation for both architectures on Windows?
> > >>
> > >> Best,
> > >> David
> > >>
> > >>         [[alternative HTML version deleted]]
> > >>
> > >> ______________________________________________
> > >> R-package-devel at r-project.org mailing list
> > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >>
> > >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From w|n@tonch@ng1 @end|ng |rom gm@||@com  Tue Mar 26 20:33:44 2019
From: w|n@tonch@ng1 @end|ng |rom gm@||@com (Winston Chang)
Date: Tue, 26 Mar 2019 14:33:44 -0500
Subject: [R-pkg-devel] Version of make on CRAN Windows build machines
Message-ID: <CAFOpNVHGjF87bE_zHjxR4gX3kPRr8EFT_qT7-2G0RWJ+Ut550w@mail.gmail.com>

On Windows I have a package that builds just fine with any recent version
of Rtools. But on win-builder it fails because the version of GNU make on
that machine does not support if-else syntax. Support for this syntax was
added in GNU make 3.81, which was released in 2006. The version of Rtools
on my computer comes with GNU Make 4.2.1.

I resubmitted the package to win-builder with `make --version` and found
that it is using version 3.79.1. I'm curious -- why does it use such an old
version of make, and one that does not come with Rtools? I've tried to
follow the documentation at
https://cran.r-project.org/doc/manuals/R-admin.html#The-Windows-toolset to
get a build environment as close as possible to what is prescribed. But
since this environment differs from what CRAN actually uses, it makes for a
long and error-prone process when submitting a package to CRAN.

-Winston

	[[alternative HTML version deleted]]


From c@rtogr@iiow m@iii@g oii gm@ii@com  Tue Mar 26 22:29:20 2019
From: c@rtogr@iiow m@iii@g oii gm@ii@com (c@rtogr@iiow m@iii@g oii gm@ii@com)
Date: Tue, 26 Mar 2019 21:29:20 +0000 (UTC)
Subject: [R-pkg-devel] =?utf-8?q?Re=C2=A0=3ARe=3A__package_cartograflow?=
 =?utf-8?b?XzAuMC4wLjkwMDAudGFyLmd6?=
In-Reply-To: <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
Message-ID: <544273232.19032969.1553635760932@mail.yahoo.com>

Hi,? l've made?R CMD check --as-cran on rstudio 3.5.2Why I have to use r-devel?
I confirm that I didn't received ? error message when I've made dev_tool::check.?
How can I solve my problem ?
Thanks in advance?Sylvain?


nvoy? depuis Yahoo?Mail pour Android 
 
  Le lun., mars 25, 2019 ? 23:38, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :   I cannot beloeve it. But this is certainly not R-devel?

Not sure about devtools which we do not use on CRAN, but simply

R CMD check --as-cran

with a recent R-devel? version on the package tarball should reproduce 
the findings.

Best,
Uwe Ligges


On 25.03.2019 23:12, cartograflow at gmail.com wrote:
> Hello,
> I've submitted my package cartograflow and I received an email from your teeam that it does not pass the incoming checks automatically.Debian: <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
> Status: 1 ERROR, 2 WARNINGs, 1 NOTE
> 
> So, I've made the new check on my plateform (linux ubuntu) and the check is OK.I used : ==> devtools::check(args = c('--no-manual','--as-cran'))Status is :
> ?? R CMD check results ???????????????????????????? cartograflow 0.0.0.9000 ????
> Duration: 54.6s
> 0 errors ? | 0 warnings ? | 0 notes ?
> R CMD check succeeded
> Can you? help me to fix the problem?
> Thanks in advance to your replySylvain
> ??? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
  

	[[alternative HTML version deleted]]


From henr|k@bengt@@on @end|ng |rom gm@||@com  Tue Mar 26 22:42:08 2019
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Tue, 26 Mar 2019 14:42:08 -0700
Subject: [R-pkg-devel] package cartograflow_0.0.0.9000.tar.gz
In-Reply-To: <544273232.19032969.1553635760932@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
Message-ID: <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>

FWIW, you should be able to reproduce at least the following NOTEs
with your current R 3.5.2 and R CMD check --as-cran:

* checking CRAN incoming feasibility ... NOTE
Maintainer: ?cartogRaflow <cartograflow at gmail.com>?

New submission

Version contains large components (0.0.0.9000)

Possibly mis-spelled words in DESCRIPTION:
  flowmapping (7:41)

Author field should be Authors at R.  Current value is:
  c(person("Fran?oise", "Bahoken", email =
"francoise.bahoken at ifsttar.fr", role = c("cre","aut")),
             person("Sylvain", "Blondeau", email =
"blondeau.sylvain at yahoo.fr", role = c("aut"))

The Title field should be in title case. Current version is:
?thematic cartography of flows and movements?
In title case that is:
?Thematic Cartography of Flows and Movements?

Those are all classical mistakes ("we've all been there").  The
vignette errors may or may not be specific to R devel.

/Henrik

On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
<cartograflow at gmail.com> wrote:
>
> Hi,  l've made R CMD check --as-cran on rstudio 3.5.2Why I have to use r-devel?
> I confirm that I didn't received ? error message when I've made dev_tool::check.
> How can I solve my problem ?
> Thanks in advance Sylvain
>
>
> nvoy? depuis Yahoo Mail pour Android
>
>   Le lun., mars 25, 2019 ? 23:38, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :   I cannot beloeve it. But this is certainly not R-devel?
>
> Not sure about devtools which we do not use on CRAN, but simply
>
> R CMD check --as-cran
>
> with a recent R-devel  version on the package tarball should reproduce
> the findings.
>
> Best,
> Uwe Ligges
>
>
> On 25.03.2019 23:12, cartograflow at gmail.com wrote:
> > Hello,
> > I've submitted my package cartograflow and I received an email from your teeam that it does not pass the incoming checks automatically.Debian: <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
> > Status: 1 ERROR, 2 WARNINGs, 1 NOTE
> >
> > So, I've made the new check on my plateform (linux ubuntu) and the check is OK.I used : ==> devtools::check(args = c('--no-manual','--as-cran'))Status is :
> > ?? R CMD check results ???????????????????????????? cartograflow 0.0.0.9000 ????
> > Duration: 54.6s
> > 0 errors ? | 0 warnings ? | 0 notes ?
> > R CMD check succeeded
> > Can you  help me to fix the problem?
> > Thanks in advance to your replySylvain
> >     [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Mar 26 22:55:14 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 26 Mar 2019 21:55:14 +0000
Subject: [R-pkg-devel] CRAN incoming checks fail due to non-staged
 installation
In-Reply-To: <CAGmyFCFhLhhrVDPQMYp=Gq0dLhFg0S8A9PN3SKLtzwrwr2S5rw@mail.gmail.com>
References: <CAGmyFCHt4iRN53Xn6pmc-cOEQNvmYLXc2WMWEhWNaPrVoG3jPw@mail.gmail.com>
 <QB1PR01MB35371DE754800DD3B482840FBA4A0@QB1PR01MB3537.CANPRD01.PROD.OUTLOOK.COM>
 <CAGmyFCHv7wnXCZBb7JS7=F8A-m=n_2o8VOn8gX+eJanv0n2fJw@mail.gmail.com>
 <CAGmyFCFwA3=jMw9Uw6m31G7s8OtRLLKACiP312shfWHrmsdXaw@mail.gmail.com>
 <CABtg=K=Dy2pQ1ENEwLa=p5Td8SZ7yr=FR0J0JGUhTuU1-buE-A@mail.gmail.com>
 <CAGmyFCFhLhhrVDPQMYp=Gq0dLhFg0S8A9PN3SKLtzwrwr2S5rw@mail.gmail.com>
Message-ID: <CABtg=KkqxxAnK1pZ7mpzzxgNjStqpJd87uAdM9r84kjmb5xwLg@mail.gmail.com>

OK, here is what I think is going on.

There is a bug in the check code, that creates a false positive when
the package installation is performed with `--merge-multiarch`. In
this case the x64 architecture uses a non-staged install,
deliberately, but the check code still picks this up and reports it as
a NOTE.

Reproducing it is not easy, because of several reasons:
- win-builder uses package-specific configuration, in this case your
package is listed in
https://svn.r-project.org/R-dev-web/trunk/CRAN/QA/Uwe/make/config/MergeMultiarch,
so `--merge-multiarch` is added automatically.
- R CMD check cannot pass --merge-multiarch to R CMD INSTALL because
--merge-multiarch only works on tarballs, and R CMD check runs INSTALL
on a directory.
- However, R CMD check has an undocumented --install=... option, which
can be used to pick up the installation output from a certain file. I
am pretty sure that win-builder uses this. I.e. it calls R CMD INSTALL
first, putting the output to a file, and then calls R CMD check with
the --install= option pointing to that file as the install output.

In summary, I think this an R CMD check bug, added in this commit:
https://github.com/wch/r-source/commit/44e8faeb1ed30a7603e79988639da7e4e358d497

It can be fixed easily by using a slightly different message for the
--merge-multiarch case, or maybe even by not specifying
--no-staged-install here:
https://github.com/wch/r-source/blob/be469e86046389a0213f22e8b5c7b3227558bb01/src/library/tools/R/install.R#L1913
and here:
https://github.com/wch/r-source/blob/be469e86046389a0213f22e8b5c7b3227558bb01/src/library/tools/R/install.R#L1938
because --libs-only implies --no-staged-install anyway. I am not
entirely certain, but Tomas and/or Prof Ripley will know for sure.

If you want submit your package before the bug is fixed, I suggest you
explain this directly to CRAN when you submit your package.

Best,
Gabor

On Tue, Mar 26, 2019 at 3:18 PM David Kepplinger
<david.kepplinger at gmail.com> wrote:
>
> Dear G?bor,
>
> Oddly, it does emit a NOTE due to the non-staged install, as can be seen at https://win-builder.r-project.org/86i67mqTD9YY
>
> The package source can be found at https://github.com/dakep/pense-rpkg/tree/release/1.2.2
>
> Thanks for your help,
> David
>
>
> On Tue, Mar 26, 2019, 3:28 AM G?bor Cs?rdi, <csardi.gabor at gmail.com> wrote:
>>
>> Hi David,
>>
>> if you only see
>>
>> install for i386
>> * installing *source* package 'pense' ...
>> ** using staged installation
>> [....]
>> install for x64
>> * installing *source* package 'pense' ...
>> ** using non-staged installation
>> [...]
>>
>> then everything is fine, there is no NOTE here, AFAICT.
>>
>> If you see a NOTE about this, please post 1) a link to your package,
>> and 2) a link to the win-builder output.
>>
>> Thanks,
>> Gabor
>>
>> On Tue, Mar 26, 2019 at 12:13 AM David Kepplinger
>> <david.kepplinger at gmail.com> wrote:
>> >
>> > Dear Community,
>> >
>> > The issue persists and I don't know if it is something I can fix or if it's
>> > a false positive from the CRAN incoming checks. As a result, the package is
>> > archived as the old version has other issues with the new R version.
>> >
>> > Does someone have an idea how I can fix the issue? I have asked the CRAN
>> > team last week to flag the issue as a false positive, but I haven't heard
>> > back so I assume it's something I have to fix.
>> >
>> > Thanks,
>> > David
>> >
>> > On Wed, Mar 13, 2019 at 3:34 PM David Kepplinger <david.kepplinger at gmail.com>
>> > wrote:
>> >
>> > > Thank you, Max, for the clarification.
>> > > I have added the option "StagedInstall: yes" to the DESCRIPTION file, but
>> > > it doesn't seem to be forcing a staged installation for x64 on Windows. I
>> > > get the same NOTE now from winbuilder, but with more explanation which
>> > > could help isolate the problem:
>> > >
>> > > install for i386
>> > > * installing *source* package 'pense' ...
>> > > ** using staged installation
>> > > [...]
>> > > install for x64
>> > > * installing *source* package 'pense' ...
>> > > not using staged install with --libs-only
>> > > ** using non-staged installation
>> > > [...]
>> > >
>> > >
>> > > Best,
>> > > David
>> > >
>> > > On Wed, Mar 13, 2019 at 1:21 PM Maxime Turgeon <
>> > > maxime.turgeon at mail.mcgill.ca> wrote:
>> > >
>> > >> Hi David,
>> > >>
>> > >> Non-staged installation is something new in R-devel:
>> > >> https://developer.r-project.org/Blog/public/2019/02/14/staged-install/index.html
>> > >>
>> > >>
>> > >> Package maintainers can opt out of it (through DESCRIPTION), and I'm
>> > >> assuming CRAN wants a quick way to know if that was the case when
>> > >> diagnosing a submission.
>> > >>
>> > >> To resolutely opt *in* (which will eventually be the default), you could
>> > >> try adding "StagedInstall: yes" to your DESCRIPTION file.
>> > >>
>> > >> Of course, one question still remains: why was the behaviour different
>> > >> for the two architectures.
>> > >>
>> > >> Max
>> > >> ------------------------------
>> > >> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on
>> > >> behalf of David Kepplinger <david.kepplinger at gmail.com>
>> > >> *Sent:* March 13, 2019 3:39 PM
>> > >> *To:* r-package-devel at r-project.org
>> > >> *Subject:* [R-pkg-devel] CRAN incoming checks fail due to non-staged
>> > >> installation
>> > >>
>> > >> Dear Community,
>> > >>
>> > >> I am trying to update the pense package on CRAN to fix `autoreconf`
>> > >> problems, but the incoming checks fail for Windows (r-devel) with 2 NOTEs.
>> > >>
>> > >> The first NOTE is a HTTP 403 for a http://doi.org URL which I already
>> > >> know
>> > >> about and can not change, but the other NOTE is more obscure to me. It
>> > >> says
>> > >>
>> > >> * checking whether package 'pense' can be installed ... NOTE
>> > >> Found the following notes/warnings:
>> > >>   Non-staged installation was used
>> > >>
>> > >>
>> > >> and when I check the install log, it says
>> > >>
>> > >> install for i386
>> > >> * installing *source* package 'pense' ...
>> > >> ** using staged installation
>> > >> [....]
>> > >> install for x64
>> > >> * installing *source* package 'pense' ...
>> > >> ** using non-staged installation
>> > >> [...]
>> > >>
>> > >>
>> > >> Is this a false positive or is there something I can do to force using a
>> > >> staged installation for both architectures on Windows?
>> > >>
>> > >> Best,
>> > >> David
>> > >>
>> > >>         [[alternative HTML version deleted]]
>> > >>
>> > >> ______________________________________________
>> > >> R-package-devel at r-project.org mailing list
>> > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> > >>
>> > >
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From d@v|d@kepp||nger @end|ng |rom gm@||@com  Wed Mar 27 00:38:41 2019
From: d@v|d@kepp||nger @end|ng |rom gm@||@com (David Kepplinger)
Date: Tue, 26 Mar 2019 16:38:41 -0700
Subject: [R-pkg-devel] CRAN incoming checks fail due to non-staged
 installation
In-Reply-To: <CABtg=KkqxxAnK1pZ7mpzzxgNjStqpJd87uAdM9r84kjmb5xwLg@mail.gmail.com>
References: <CAGmyFCHt4iRN53Xn6pmc-cOEQNvmYLXc2WMWEhWNaPrVoG3jPw@mail.gmail.com>
 <QB1PR01MB35371DE754800DD3B482840FBA4A0@QB1PR01MB3537.CANPRD01.PROD.OUTLOOK.COM>
 <CAGmyFCHv7wnXCZBb7JS7=F8A-m=n_2o8VOn8gX+eJanv0n2fJw@mail.gmail.com>
 <CAGmyFCFwA3=jMw9Uw6m31G7s8OtRLLKACiP312shfWHrmsdXaw@mail.gmail.com>
 <CABtg=K=Dy2pQ1ENEwLa=p5Td8SZ7yr=FR0J0JGUhTuU1-buE-A@mail.gmail.com>
 <CAGmyFCFhLhhrVDPQMYp=Gq0dLhFg0S8A9PN3SKLtzwrwr2S5rw@mail.gmail.com>
 <CABtg=KkqxxAnK1pZ7mpzzxgNjStqpJd87uAdM9r84kjmb5xwLg@mail.gmail.com>
Message-ID: <CAGmyFCEwG0z9eYvDnB070R9FSC82J8Dya1OQEh=kD4ghDLS6Ag@mail.gmail.com>

Thanks, G?bor, for taking the time to investigate the issue and the
detailed elaboration!
I resubmitted to CRAN with a brief explanation and a link to this thread.

Thanks,
David

On Tue, Mar 26, 2019 at 2:55 PM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:

> OK, here is what I think is going on.
>
> There is a bug in the check code, that creates a false positive when
> the package installation is performed with `--merge-multiarch`. In
> this case the x64 architecture uses a non-staged install,
> deliberately, but the check code still picks this up and reports it as
> a NOTE.
>
> Reproducing it is not easy, because of several reasons:
> - win-builder uses package-specific configuration, in this case your
> package is listed in
>
> https://svn.r-project.org/R-dev-web/trunk/CRAN/QA/Uwe/make/config/MergeMultiarch
> ,
> so `--merge-multiarch` is added automatically.
> - R CMD check cannot pass --merge-multiarch to R CMD INSTALL because
> --merge-multiarch only works on tarballs, and R CMD check runs INSTALL
> on a directory.
> - However, R CMD check has an undocumented --install=... option, which
> can be used to pick up the installation output from a certain file. I
> am pretty sure that win-builder uses this. I.e. it calls R CMD INSTALL
> first, putting the output to a file, and then calls R CMD check with
> the --install= option pointing to that file as the install output.
>
> In summary, I think this an R CMD check bug, added in this commit:
>
> https://github.com/wch/r-source/commit/44e8faeb1ed30a7603e79988639da7e4e358d497
>
> It can be fixed easily by using a slightly different message for the
> --merge-multiarch case, or maybe even by not specifying
> --no-staged-install here:
>
> https://github.com/wch/r-source/blob/be469e86046389a0213f22e8b5c7b3227558bb01/src/library/tools/R/install.R#L1913
> and here:
>
> https://github.com/wch/r-source/blob/be469e86046389a0213f22e8b5c7b3227558bb01/src/library/tools/R/install.R#L1938
> because --libs-only implies --no-staged-install anyway. I am not
> entirely certain, but Tomas and/or Prof Ripley will know for sure.
>
> If you want submit your package before the bug is fixed, I suggest you
> explain this directly to CRAN when you submit your package.
>
> Best,
> Gabor
>
> On Tue, Mar 26, 2019 at 3:18 PM David Kepplinger
> <david.kepplinger at gmail.com> wrote:
> >
> > Dear G?bor,
> >
> > Oddly, it does emit a NOTE due to the non-staged install, as can be seen
> at https://win-builder.r-project.org/86i67mqTD9YY
> >
> > The package source can be found at
> https://github.com/dakep/pense-rpkg/tree/release/1.2.2
> >
> > Thanks for your help,
> > David
> >
> >
> > On Tue, Mar 26, 2019, 3:28 AM G?bor Cs?rdi, <csardi.gabor at gmail.com>
> wrote:
> >>
> >> Hi David,
> >>
> >> if you only see
> >>
> >> install for i386
> >> * installing *source* package 'pense' ...
> >> ** using staged installation
> >> [....]
> >> install for x64
> >> * installing *source* package 'pense' ...
> >> ** using non-staged installation
> >> [...]
> >>
> >> then everything is fine, there is no NOTE here, AFAICT.
> >>
> >> If you see a NOTE about this, please post 1) a link to your package,
> >> and 2) a link to the win-builder output.
> >>
> >> Thanks,
> >> Gabor
> >>
> >> On Tue, Mar 26, 2019 at 12:13 AM David Kepplinger
> >> <david.kepplinger at gmail.com> wrote:
> >> >
> >> > Dear Community,
> >> >
> >> > The issue persists and I don't know if it is something I can fix or
> if it's
> >> > a false positive from the CRAN incoming checks. As a result, the
> package is
> >> > archived as the old version has other issues with the new R version.
> >> >
> >> > Does someone have an idea how I can fix the issue? I have asked the
> CRAN
> >> > team last week to flag the issue as a false positive, but I haven't
> heard
> >> > back so I assume it's something I have to fix.
> >> >
> >> > Thanks,
> >> > David
> >> >
> >> > On Wed, Mar 13, 2019 at 3:34 PM David Kepplinger <
> david.kepplinger at gmail.com>
> >> > wrote:
> >> >
> >> > > Thank you, Max, for the clarification.
> >> > > I have added the option "StagedInstall: yes" to the DESCRIPTION
> file, but
> >> > > it doesn't seem to be forcing a staged installation for x64 on
> Windows. I
> >> > > get the same NOTE now from winbuilder, but with more explanation
> which
> >> > > could help isolate the problem:
> >> > >
> >> > > install for i386
> >> > > * installing *source* package 'pense' ...
> >> > > ** using staged installation
> >> > > [...]
> >> > > install for x64
> >> > > * installing *source* package 'pense' ...
> >> > > not using staged install with --libs-only
> >> > > ** using non-staged installation
> >> > > [...]
> >> > >
> >> > >
> >> > > Best,
> >> > > David
> >> > >
> >> > > On Wed, Mar 13, 2019 at 1:21 PM Maxime Turgeon <
> >> > > maxime.turgeon at mail.mcgill.ca> wrote:
> >> > >
> >> > >> Hi David,
> >> > >>
> >> > >> Non-staged installation is something new in R-devel:
> >> > >>
> https://developer.r-project.org/Blog/public/2019/02/14/staged-install/index.html
> >> > >>
> >> > >>
> >> > >> Package maintainers can opt out of it (through DESCRIPTION), and
> I'm
> >> > >> assuming CRAN wants a quick way to know if that was the case when
> >> > >> diagnosing a submission.
> >> > >>
> >> > >> To resolutely opt *in* (which will eventually be the default), you
> could
> >> > >> try adding "StagedInstall: yes" to your DESCRIPTION file.
> >> > >>
> >> > >> Of course, one question still remains: why was the behaviour
> different
> >> > >> for the two architectures.
> >> > >>
> >> > >> Max
> >> > >> ------------------------------
> >> > >> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on
> >> > >> behalf of David Kepplinger <david.kepplinger at gmail.com>
> >> > >> *Sent:* March 13, 2019 3:39 PM
> >> > >> *To:* r-package-devel at r-project.org
> >> > >> *Subject:* [R-pkg-devel] CRAN incoming checks fail due to
> non-staged
> >> > >> installation
> >> > >>
> >> > >> Dear Community,
> >> > >>
> >> > >> I am trying to update the pense package on CRAN to fix `autoreconf`
> >> > >> problems, but the incoming checks fail for Windows (r-devel) with
> 2 NOTEs.
> >> > >>
> >> > >> The first NOTE is a HTTP 403 for a http://doi.org URL which I
> already
> >> > >> know
> >> > >> about and can not change, but the other NOTE is more obscure to
> me. It
> >> > >> says
> >> > >>
> >> > >> * checking whether package 'pense' can be installed ... NOTE
> >> > >> Found the following notes/warnings:
> >> > >>   Non-staged installation was used
> >> > >>
> >> > >>
> >> > >> and when I check the install log, it says
> >> > >>
> >> > >> install for i386
> >> > >> * installing *source* package 'pense' ...
> >> > >> ** using staged installation
> >> > >> [....]
> >> > >> install for x64
> >> > >> * installing *source* package 'pense' ...
> >> > >> ** using non-staged installation
> >> > >> [...]
> >> > >>
> >> > >>
> >> > >> Is this a false positive or is there something I can do to force
> using a
> >> > >> staged installation for both architectures on Windows?
> >> > >>
> >> > >> Best,
> >> > >> David
> >> > >>
> >> > >>         [[alternative HTML version deleted]]
> >> > >>
> >> > >> ______________________________________________
> >> > >> R-package-devel at r-project.org mailing list
> >> > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >> > >>
> >> > >
> >> >
> >> >         [[alternative HTML version deleted]]
> >> >
> >> > ______________________________________________
> >> > R-package-devel at r-project.org mailing list
> >> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From c@rtogr@iiow m@iii@g oii gm@ii@com  Wed Mar 27 12:56:28 2019
From: c@rtogr@iiow m@iii@g oii gm@ii@com (c@rtogr@iiow m@iii@g oii gm@ii@com)
Date: Wed, 27 Mar 2019 11:56:28 +0000 (UTC)
Subject: [R-pkg-devel] =?utf-8?b?UmXCoDpSZTogIFJlIDpSZTogcGFja2FnZSBjYXJ0?=
 =?utf-8?b?b2dyYWZsb3dfMC4wLjAuOTAwMC50YXIuZ3o=?=
In-Reply-To: <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
Message-ID: <1175369784.19515168.1553687788585@mail.yahoo.com>

Hi, thanks to your propositions and I will take into account.I make dev_tools::check directly in rstudio.
I would like to know if I can do R CMD directly in R interface with the command :?#bash R-devel CMD check --as-cran cartograflow.tar.gzIt will be better?
Thanks?Sylvain?

Envoy? depuis Yahoo?Mail pour Android 
 
  Le mar., mars 26, 2019 ? 22:42, Henrik Bengtsson<henrik.bengtsson at gmail.com> a ?crit :   FWIW, you should be able to reproduce at least the following NOTEs
with your current R 3.5.2 and R CMD check --as-cran:

* checking CRAN incoming feasibility ... NOTE
Maintainer: ?cartogRaflow <cartograflow at gmail.com>?

New submission

Version contains large components (0.0.0.9000)

Possibly mis-spelled words in DESCRIPTION:
? flowmapping (7:41)

Author field should be Authors at R.? Current value is:
? c(person("Fran?oise", "Bahoken", email =
"francoise.bahoken at ifsttar.fr", role = c("cre","aut")),
? ? ? ? ? ? person("Sylvain", "Blondeau", email =
"blondeau.sylvain at yahoo.fr", role = c("aut"))

The Title field should be in title case. Current version is:
?thematic cartography of flows and movements?
In title case that is:
?Thematic Cartography of Flows and Movements?

Those are all classical mistakes ("we've all been there").? The
vignette errors may or may not be specific to R devel.

/Henrik

On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
<cartograflow at gmail.com> wrote:
>
> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to use r-devel?
> I confirm that I didn't received ? error message when I've made dev_tool::check.
> How can I solve my problem ?
> Thanks in advance Sylvain
>
>
> nvoy? depuis Yahoo Mail pour Android
>
>? Le lun., mars 25, 2019 ? 23:38, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :? I cannot beloeve it. But this is certainly not R-devel?
>
> Not sure about devtools which we do not use on CRAN, but simply
>
> R CMD check --as-cran
>
> with a recent R-devel? version on the package tarball should reproduce
> the findings.
>
> Best,
> Uwe Ligges
>
>
> On 25.03.2019 23:12, cartograflow at gmail.com wrote:
> > Hello,
> > I've submitted my package cartograflow and I received an email from your teeam that it does not pass the incoming checks automatically.Debian: <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
> > Status: 1 ERROR, 2 WARNINGs, 1 NOTE
> >
> > So, I've made the new check on my plateform (linux ubuntu) and the check is OK.I used : ==> devtools::check(args = c('--no-manual','--as-cran'))Status is :
> > ?? R CMD check results ???????????????????????????? cartograflow 0.0.0.9000 ????
> > Duration: 54.6s
> > 0 errors ? | 0 warnings ? | 0 notes ?
> > R CMD check succeeded
> > Can you? help me to fix the problem?
> > Thanks in advance to your replySylvain
> >? ? [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>
>? ? ? ? [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel  

	[[alternative HTML version deleted]]


From m@e||e@@@|mon @end|ng |rom y@hoo@@e  Wed Mar 27 13:14:13 2019
From: m@e||e@@@|mon @end|ng |rom y@hoo@@e (=?UTF-8?Q?Ma=C3=ABlle_SALMON?=)
Date: Wed, 27 Mar 2019 12:14:13 +0000 (UTC)
Subject: =?UTF-8?Q?Re:_[R-pkg-devel]_Re=C2=A0:Re:__Re_:Re:_p?=
 =?UTF-8?Q?ackage_cartograflow=5F0.0.0.9000.tar.gz?=
In-Reply-To: <1175369784.19515168.1553687788585@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <1175369784.19515168.1553687788585@mail.yahoo.com>
Message-ID: <391952055.19542283.1553688853591@mail.yahoo.com>

 Hi,
To be able to run R CMD check on R devel, on top of your local checks, you might want to have a a look at the R-hub package builder that allows you to run R CMD check on several platforms (R versions, OS) for free. You can use the rhub package for that, https://r-hub.github.io/rhub/

In particular,- To get "--as-cran" for R CMD check you can set it as value of the check_args argument of rhub check functions. You can e.g. use rhub::check_with_rdevel(<path-to-your-package>, check_args = "--as-cran")
- See also the shortcut check_for_cran() that'll send your package to a few platforms close to CRAN submission platforms, including one with R devel, with the "--as-cran" argument set by default. https://r-hub.github.io/rhub/articles/rhub.html#prepare-a-cran-submission
 

Ma?lle.
   Den onsdag 27 mars 2019 12:56:53 CET, cartograflow at gmail.com <cartograflow at gmail.com> skrev:  
 
 Hi, thanks to your propositions and I will take into account.I make dev_tools::check directly in rstudio.
I would like to know if I can do R CMD directly in R interface with the command :?#bash R-devel CMD check --as-cran cartograflow.tar.gzIt will be better?
Thanks?Sylvain?

Envoy? depuis Yahoo?Mail pour Android 
 
? Le mar., mars 26, 2019 ? 22:42, Henrik Bengtsson<henrik.bengtsson at gmail.com> a ?crit :? FWIW, you should be able to reproduce at least the following NOTEs
with your current R 3.5.2 and R CMD check --as-cran:

* checking CRAN incoming feasibility ... NOTE
Maintainer: ?cartogRaflow <cartograflow at gmail.com>?

New submission

Version contains large components (0.0.0.9000)

Possibly mis-spelled words in DESCRIPTION:
? flowmapping (7:41)

Author field should be Authors at R.? Current value is:
? c(person("Fran?oise", "Bahoken", email =
"francoise.bahoken at ifsttar.fr", role = c("cre","aut")),
? ? ? ? ? ? person("Sylvain", "Blondeau", email =
"blondeau.sylvain at yahoo.fr", role = c("aut"))

The Title field should be in title case. Current version is:
?thematic cartography of flows and movements?
In title case that is:
?Thematic Cartography of Flows and Movements?

Those are all classical mistakes ("we've all been there").? The
vignette errors may or may not be specific to R devel.

/Henrik

On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
<cartograflow at gmail.com> wrote:
>
> Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have to use r-devel?
> I confirm that I didn't received ? error message when I've made dev_tool::check.
> How can I solve my problem ?
> Thanks in advance Sylvain
>
>
> nvoy? depuis Yahoo Mail pour Android
>
>? Le lun., mars 25, 2019 ? 23:38, Uwe Ligges<ligges at statistik.tu-dortmund.de> a ?crit :? I cannot beloeve it. But this is certainly not R-devel?
>
> Not sure about devtools which we do not use on CRAN, but simply
>
> R CMD check --as-cran
>
> with a recent R-devel? version on the package tarball should reproduce
> the findings.
>
> Best,
> Uwe Ligges
>
>
> On 25.03.2019 23:12, cartograflow at gmail.com wrote:
> > Hello,
> > I've submitted my package cartograflow and I received an email from your teeam that it does not pass the incoming checks automatically.Debian: <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
> > Status: 1 ERROR, 2 WARNINGs, 1 NOTE
> >
> > So, I've made the new check on my plateform (linux ubuntu) and the check is OK.I used : ==> devtools::check(args = c('--no-manual','--as-cran'))Status is :
> > ?? R CMD check results ???????????????????????????? cartograflow 0.0.0.9000 ????
> > Duration: 54.6s
> > 0 errors ? | 0 warnings ? | 0 notes ?
> > R CMD check succeeded
> > Can you? help me to fix the problem?
> > Thanks in advance to your replySylvain
> >? ? [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>
>? ? ? ? [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel  

??? [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel  
	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Mar 27 13:36:05 2019
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 27 Mar 2019 13:36:05 +0100
Subject: [R-pkg-devel] 
 =?utf-8?b?UmXCoDpSZTogIFJlIDpSZTogcGFja2FnZSBjYXJ0?=
 =?utf-8?b?b2dyYWZsb3dfMC4wLjAuOTAwMC50YXIuZ3o=?=
In-Reply-To: <1175369784.19515168.1553687788585@mail.yahoo.com>
References: <1441050500.17952887.1553551969403.ref@mail.yahoo.com>
 <1441050500.17952887.1553551969403@mail.yahoo.com>
 <1527b657-0280-b268-d2ca-67198870fc7c@statistik.tu-dortmund.de>
 <544273232.19032969.1553635760932@mail.yahoo.com>
 <CAFDcVCQEgctEzzMy1w+A1wnB0SP1yvuAVRuRnyJyA93gkxJh7g@mail.gmail.com>
 <1175369784.19515168.1553687788585@mail.yahoo.com>
Message-ID: <24e8f192-88c9-700a-2a3e-3f33ed49f40d@statistik.tu-dortmund.de>



On 27.03.2019 12:56, cartograflow at gmail.com wrote:
> Hi, thanks to your propositions and I will take into account.
> I make dev_tools::check directly in rstudio.
> 
> I would like to know if I can do R CMD directly in R interface with the 
> command :
>  ?#bash R-devel CMD check --as-cran cartograflow.tar.gz
> It will be better

Yes, from the OS shell

R CMD check --as-cran

on the tarball prodiced by R CMD build.

Best,
Uwe Ligges


> Thanks
> Sylvain
> 
> Envoy? depuis Yahoo?Mail pour Android 
> <https://go.onelink.me/107872968?pid=InProduct&c=Global_Internal_YGrowth_AndroidEmailSig__AndroidUsers&af_wl=ym&af_sub1=Internal&af_sub2=Global_YGrowth&af_sub3=EmailSignature>
> 
>     Le mar., mars 26, 2019 ? 22:42, Henrik Bengtsson
>     <henrik.bengtsson at gmail.com> a ?crit :
>     FWIW, you should be able to reproduce at least the following NOTEs
>     with your current R 3.5.2 and R CMD check --as-cran:
> 
>     * checking CRAN incoming feasibility ... NOTE
>     Maintainer: ?cartogRaflow <cartograflow at gmail.com
>     <mailto:cartograflow at gmail.com>>?
> 
>     New submission
> 
>     Version contains large components (0.0.0.9000)
> 
>     Possibly mis-spelled words in DESCRIPTION:
>      ? flowmapping (7:41)
> 
>     Author field should be Authors at R. <mailto:Authors at R.>? Current value is:
>      ? c(person("Fran?oise", "Bahoken", email =
>     "francoise.bahoken at ifsttar.fr
>     <mailto:francoise.bahoken at ifsttar.fr>", role = c("cre","aut")),
>      ? ? ? ? ? ? person("Sylvain", "Blondeau", email =
>     "blondeau.sylvain at yahoo.fr <mailto:blondeau.sylvain at yahoo.fr>", role
>     = c("aut"))
> 
>     The Title field should be in title case. Current version is:
>     ?thematic cartography of flows and movements?
>     In title case that is:
>     ?Thematic Cartography of Flows and Movements?
> 
>     Those are all classical mistakes ("we've all been there").? The
>     vignette errors may or may not be specific to R devel.
> 
>     /Henrik
> 
>     On Tue, Mar 26, 2019 at 2:29 PM cartograflow at gmail.com
>     <mailto:cartograflow at gmail.com>
>     <cartograflow at gmail.com <mailto:cartograflow at gmail.com>> wrote:
>      >
>      > Hi,? l've made R CMD check --as-cran on rstudio 3.5.2Why I have
>     to use r-devel?
>      > I confirm that I didn't received ? error message when I've made
>     dev_tool::check.
>      > How can I solve my problem ?
>      > Thanks in advance Sylvain
>      >
>      >
>      > nvoy? depuis Yahoo Mail pour Android
>      >
>      >? Le lun., mars 25, 2019 ? 23:38, Uwe
>     Ligges<ligges at statistik.tu-dortmund.de
>     <mailto:ligges at statistik.tu-dortmund.de>> a ?crit :? I cannot
>     beloeve it. But this is certainly not R-devel?
>      >
>      > Not sure about devtools which we do not use on CRAN, but simply
>      >
>      > R CMD check --as-cran
>      >
>      > with a recent R-devel? version on the package tarball should
>     reproduce
>      > the findings.
>      >
>      > Best,
>      > Uwe Ligges
>      >
>      >
>      > On 25.03.2019 23:12, cartograflow at gmail.com
>     <mailto:cartograflow at gmail.com> wrote:
>      > > Hello,
>      > > I've submitted my package cartograflow and I received an email
>     from your teeam that it does not pass the incoming checks
>     automatically.Debian:
>     <https://win-builder.r-project.org/incoming_pretest/cartograflow_0.0.0.9000_20190324_230822/Debian/00check.log>
>      > > Status: 1 ERROR, 2 WARNINGs, 1 NOTE
>      > >
>      > > So, I've made the new check on my plateform (linux ubuntu) and
>     the check is OK.I used : ==> devtools::check(args =
>     c('--no-manual','--as-cran'))Status is :
>      > > ?? R CMD check results ????????????????????????????
>     cartograflow 0.0.0.9000 ????
>      > > Duration: 54.6s
>      > > 0 errors ? | 0 warnings ? | 0 notes ?
>      > > R CMD check succeeded
>      > > Can you? help me to fix the problem?
>      > > Thanks in advance to your replySylvain
>      > >? ? [[alternative HTML version deleted]]
>      > >
>      > > ______________________________________________
>      > > R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
>      > >
>      >
>      >
>      >? ? ? ? [[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||@|kop @end|ng |rom gm@||@com  Fri Mar 29 10:11:41 2019
From: ||@|kop @end|ng |rom gm@||@com (Vissarion Fisikopoulos)
Date: Fri, 29 Mar 2019 11:11:41 +0200
Subject: [R-pkg-devel] CRAN review
In-Reply-To: <CAFDcVCTivRagC1eVYooyEU418web9b58QihSPju_6VmyDaeNmA@mail.gmail.com>
References: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
 <6c203422-db18-f11b-7e01-4006ec39adff@gmail.com>
 <CAFDcVCQ2wgSTYJu_ZMdpJ1PRcvPcSZMOD4epE+zHp307w33xBg@mail.gmail.com>
 <mailman.3611.3047.1552463633.8486.r-package-devel@r-project.org>
 <mailman.3612.3048.1552464318.8486.r-package-devel@r-project.org>
 <CAMfvGJMSv-KGFcKyUHfPc5XYoHTuKYwvY3mp4R4APEoB0bYSvw@mail.gmail.com>
 <CAKa7CYMhBnsgLbQcLe3SRxVh-z4V=5CjeCCmKXQtw12nTgokgA@mail.gmail.com>
 <CAFDcVCTivRagC1eVYooyEU418web9b58QihSPju_6VmyDaeNmA@mail.gmail.com>
Message-ID: <CAKa7CYM_0bDD7LEBko2+OdqfS2ROdb-3FaqThCn23Pw=RA=wgA@mail.gmail.com>

Dear all,

@Henrik: thanks a lot for your reply.

I did one more submission (the third) and I am posting below my answer
to the automatic cran email with 2 NOTES.

Looking forward to your feedback.

Best regards,
Vissarion.

On Fri, 29 Mar 2019 at 11:04, Vissarion Fisikopoulos <fisikop at gmail.com> wrote:
>
> Dear all,
>
> We got the results from the automated check for our package. There are
> two NOTEs in both checks in Windows and Debian. We are sure that the
> rejections are false positive, so with this e-mail we try to explain
> why. Please find our explanations below.
>
> On Thu, 28 Mar 2019 at 16:40, <ligges at statistik.tu-dortmund.de> wrote:
> >
> > Dear maintainer,
> >
> > package volesti_0.0.0.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
> > Windows: <https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/Windows/00check.log>
> > Status: 2 NOTEs
> > Debian: <https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/Debian/00check.log>
> > Status: 2 NOTEs
> >
> >
> >
> > Please fix all problems and resubmit a fixed version via the webform.
> > If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
> > <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> > If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
> >
> > More details are given in the directory:
> > <https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/>
> > The files will be removed after roughly 7 days.
> >
> > No strong reverse dependencies to be checked.
> >
> > Best regards,
> > CRAN teams' auto-check service
> > Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
> > Check: CRAN incoming feasibility, Result: NOTE
> >   Maintainer: 'Vissarion Fisikopoulos <vissarion.fisikopoulos at gmail.com>'
> >
> >   New submission
> >
> >   Possibly mis-spelled words in DESCRIPTION:
> >     Minkowski (9:17)
> >     Polytopes (4:49)
> >     Volesti (7:71)
> >     polytopes (8:39, 10:83)
> >     volesti (7:50)
> >     zonotopes (9:44)
> These words, except of 'volesti' (which is the name of our package),
> describe geometrical concepts.
>
> > Flavor: r-devel-windows-ix86+x86_64
> > Check: compiled code, Result: NOTE
> >   File 'volesti/libs/i386/volesti.dll':
> >     Found 'rand', possibly from 'rand' (C)
> >       Object: 'rotating.o'
> >   File 'volesti/libs/x64/volesti.dll':
> >     Found 'rand', possibly from 'rand' (C)
> >       Object: 'rotating.o'
> >
> >   Compiled code should not call entry points which might terminate R nor
> >   write to stdout/stderr instead of to the console, nor use Fortran I/O
> >   nor system RNGs.
> >
> >   See 'Writing portable packages' in the 'Writing R Extensions' manual.
> >
> > Flavor: r-devel-linux-x86_64-debian-gcc
> > Check: compiled code, Result: NOTE
> >   File 'volesti/libs/volesti.so':
> >     Found 'rand', possibly from 'rand' (C)
> >       Object: 'rotating.o'
> >
> >   Compiled code should not call entry points which might terminate R nor
> >   write to stdout/stderr instead of to the console, nor use Fortran I/O
> >   nor system RNGs.
>
> Library lpSolveAPI uses rand() and srand() in lp_utils.c. We replace
> both functions with GetRNGstate(); PutRNGstate(); unif_rand(); from
> R?s internal random number generation routines as it is proposed in
> `Writing R Extensions`. Moreover if you run in folder `/src`:
> $ grep -r 'rand()'
> You just get:
> `utils.c:  range *= (LPSREAL) unif_rand();`
> which is our replacement. If you replace `rand()` with `srand` in grep
> search you get a null result.
> This NOTE appears because of our functions in `/src/include/samplers`
> where word `rand` appears a lot of times, for example
> `rand_point_generator()`.
>
> Best regards,
> Vissarion Fisikopoulos

On Fri, 22 Mar 2019 at 22:03, Henrik Bengtsson
<henrik.bengtsson at gmail.com> wrote:
>
> Not a CRAN maintainer, but from my experience, it sounds like you're
> hitting some very unusual hiccup here - that's unfortunate.  I just
> had a look around at ftp://cran.r-project.org/incoming/ and your
> package is not there anymore. Just a wild guess but I wonder if your
> email reply back to CRAN ends up in their spam folders?
>
> BTW, what are the two NOTEs you're getting?  Maybe they're avoidable.
> Since packages with all OKs can go straight through the CRAN incoming
> checks and be published automatically (at least if the package is
> already on CRAN), I try to walk an extra mile just avoid NOTEs in my
> packages even if I know they're false positives.
>
> My $.02
>
> /Henrik
>
> On Fri, Mar 22, 2019 at 6:28 AM Vissarion Fisikopoulos
> <fisikop at gmail.com> wrote:
> >
> > Hello,
> >
> > we have resubmitted the package 'volesti'. I got the email and
> > confirmed submission. Later I got the confirmation email starting:
> > "The following package was uploaded to CRAN:..." and then the email on
> > automated check complaining about the same 2 notes as in the previous
> > submission. I answered (reply to all) explaining why those notes are
> > false positives. Then no news for 9 days. Could you please update us
> > on this.
> >
> > Best regards,
> > Vissarion
> >
> >
> > On Wed, 13 Mar 2019 at 10:15, ????? ?????? <tolis.chal at gmail.com> wrote:
> > >
> > > Of course we will resubmit. Thank you all for the info.
> > >
> > > Chalkis Apostolos
> > >
> > > On Wed, 13 Mar 2019 at 10:05, Ma?lle SALMON via R-package-devel <
> > > r-package-devel at r-project.org> wrote:
> > >
> > > >
> > > >
> > > >
> > > > ---------- Forwarded message ----------
> > > > From: "Ma?lle SALMON" <maelle.salmon at yahoo.se>
> > > > To: Duncan Murdoch <murdoch.duncan at gmail.com>, Henrik Bengtsson <
> > > > henrik.bengtsson at gmail.com>
> > > > Cc: r-package-devel at r-project.org
> > > > Bcc:
> > > > Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
> > > > Subject: Re: [R-pkg-devel] CRAN review
> > > >  Sorry, the link was removed (by my copy-pasting it wrongly):
> > > > https://itsalocke.com/cransays/articles/dashboard
> > > >
> > > >     Den onsdag 13 mars 2019 08:54:00 CET, Ma?lle SALMON via
> > > > R-package-devel <r-package-devel at r-project.org> skrev:
> > > >
> > > >   We at Locke Data have made an hourly updated dashboard based on the FTP
> > > > server
> > > > CRAN incoming dashboard ? cransays
> > > >
> > > > |
> > > > |
> > > > |  |
> > > > CRAN incoming dashboard ? cransays
> > > >
> > > >
> > > >  |
> > > >
> > > >  |
> > > >
> > > >  |
> > > >
> > > >
> > > >
> > > > We hope it makes data more accessible whilst reducing load on the FTP
> > > > server.
> > > > Ma?lle.
> > > >
> > > >     Den tisdag 12 mars 2019 21:37:12 CET, Henrik Bengtsson <
> > > > henrik.bengtsson at gmail.com> skrev:
> > > >
> > > >  You can also "follow" your package submission on the CRAN FTP server:
> > > >
> > > >   ftp://cran.r-project.org/incoming/
> > > >
> > > > /Henrik
> > > >
> > > > On Tue, Mar 12, 2019 at 1:26 PM Duncan Murdoch <murdoch.duncan at gmail.com>
> > > > wrote:
> > > > >
> > > > > On 12/03/2019 2:57 p.m., ????? ?????? wrote:
> > > > > > Dear all,
> > > > > >
> > > > > > We have submitted a package to CRAN in 25th of February and we have
> > > > not got
> > > > > > a
> > > > > > positive or a negative answer for the submission since then. Is this
> > > > > > normal? Is
> > > > > > there any way to get informed for the review process?
> > > > >
> > > > > Did you get the two messages after submission (one to confirm that you
> > > > > are the maintainer, the second to let you know the review has started)?
> > > > > They'll both have subject lines like
> > > > >
> > > > > CRAN submission ....
> > > > >
> > > > >
> > > > > The first one will start out saying something like
> > > > > >
> > > > > > Dear Duncan Murdoch
> > > > > > Someone has submitted the package rgl to CRAN.
> > > > > > You are receiving this email to confirm the submission as the
> > > > maintainer of
> > > > > > this package.
> > > > >
> > > > > and then ask you to confirm submission.
> > > > >
> > > > > The second one will start like
> > > > >
> > > > > > [This was generated from CRAN.R-project.org/submit.html]
> > > > > >
> > > > > > The following package was uploaded to CRAN:
> > > > > > ===========================================
> > > > > >
> > > > > > Package Information:
> > > > > > Package: rgl
> > > > >
> > > > > A while later you should get a third message about the automatic checks.
> > > > >
> > > > > Duncan Murdoch
> > > > >
> > > > > ______________________________________________
> > > > > R-package-devel at r-project.org mailing list
> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > > >
> > > > ______________________________________________
> > > > R-package-devel at r-project.org mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > > >     [[alternative HTML version deleted]]
> > > >
> > > > ______________________________________________
> > > > R-package-devel at r-project.org mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > > >
> > > >         [[alternative HTML version deleted]]
> > > >
> > > >
> > > >
> > > >
> > > > ---------- Forwarded message ----------
> > > > From: "Ma?lle SALMON via R-package-devel" <r-package-devel at r-project.org>
> > > > To: Duncan Murdoch <murdoch.duncan at gmail.com>, Henrik Bengtsson <
> > > > henrik.bengtsson at gmail.com>
> > > > Cc: r-package-devel at r-project.org
> > > > Bcc:
> > > > Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
> > > > Subject: Re: [R-pkg-devel] CRAN review
> > > > ______________________________________________
> > > > R-package-devel at r-project.org mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > > >
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From wdun|@p @end|ng |rom t|bco@com  Fri Mar 29 16:43:54 2019
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Fri, 29 Mar 2019 08:43:54 -0700
Subject: [R-pkg-devel] CRAN review
In-Reply-To: <CAKa7CYM_0bDD7LEBko2+OdqfS2ROdb-3FaqThCn23Pw=RA=wgA@mail.gmail.com>
References: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
 <6c203422-db18-f11b-7e01-4006ec39adff@gmail.com>
 <CAFDcVCQ2wgSTYJu_ZMdpJ1PRcvPcSZMOD4epE+zHp307w33xBg@mail.gmail.com>
 <mailman.3611.3047.1552463633.8486.r-package-devel@r-project.org>
 <mailman.3612.3048.1552464318.8486.r-package-devel@r-project.org>
 <CAMfvGJMSv-KGFcKyUHfPc5XYoHTuKYwvY3mp4R4APEoB0bYSvw@mail.gmail.com>
 <CAKa7CYMhBnsgLbQcLe3SRxVh-z4V=5CjeCCmKXQtw12nTgokgA@mail.gmail.com>
 <CAFDcVCTivRagC1eVYooyEU418web9b58QihSPju_6VmyDaeNmA@mail.gmail.com>
 <CAKa7CYM_0bDD7LEBko2+OdqfS2ROdb-3FaqThCn23Pw=RA=wgA@mail.gmail.com>
Message-ID: <CAF8bMcZCg658ZGuhdKaTc-JVThH_JabcSL=EUeRk=CGTcvPWFg@mail.gmail.com>

> Library lpSolveAPI uses rand() and srand() in lp_utils.c. We replace
> both functions with GetRNGstate(); PutRNGstate(); unif_rand(); from
> R?s internal random number generation routines as it is proposed in
> `Writing R Extensions`. Moreover if you run in folder `/src`:
> $ grep -r 'rand()'
> You just get:
> `utils.c:  range *= (LPSREAL) unif_rand();`
> which is our replacement. If you replace `rand()` with `srand` in grep
> search you get a null result.
> This NOTE appears because of our functions in `/src/include/samplers`
> where word `rand` appears a lot of times, for example
> `rand_point_generator()`.

I don't think the note about using 'rand' comes from looking at strings
in the source code.  It is probably looking at undefined symbols in the
symbol table of the compiled and linked code with something like the
following

% find volesti -iname "*o" | xargs nm -A -g --demangle | grep ' U ' | grep
rand
volesti/src/lp_solve/lp_rlp.o:                 U storevarandweight
volesti/src/lp_solve/lp_price.o:                 U rand_uniform
volesti/src/lp_solve/lp_utils.o:                 U unif_rand
volesti/src/lp_solve/lp_lib.o:                 U rand_uniform
volesti/src/rotating.o:                 U rand
volesti/src/volesti.so:                 U rand@@GLIBC_2.2.5
volesti/src/volesti.so:                 U unif_rand

You will have to poke through the boost headers or docs to see how to avoid
using rand in volesti/src/rotating.cpp.

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Fri, Mar 29, 2019 at 2:12 AM Vissarion Fisikopoulos <fisikop at gmail.com>
wrote:

> Dear all,
>
> @Henrik: thanks a lot for your reply.
>
> I did one more submission (the third) and I am posting below my answer
> to the automatic cran email with 2 NOTES.
>
> Looking forward to your feedback.
>
> Best regards,
> Vissarion.
>
> On Fri, 29 Mar 2019 at 11:04, Vissarion Fisikopoulos <fisikop at gmail.com>
> wrote:
> >
> > Dear all,
> >
> > We got the results from the automated check for our package. There are
> > two NOTEs in both checks in Windows and Debian. We are sure that the
> > rejections are false positive, so with this e-mail we try to explain
> > why. Please find our explanations below.
> >
> > On Thu, 28 Mar 2019 at 16:40, <ligges at statistik.tu-dortmund.de> wrote:
> > >
> > > Dear maintainer,
> > >
> > > package volesti_0.0.0.tar.gz does not pass the incoming checks
> automatically, please see the following pre-tests:
> > > Windows: <
> https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/Windows/00check.log
> >
> > > Status: 2 NOTEs
> > > Debian: <
> https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/Debian/00check.log
> >
> > > Status: 2 NOTEs
> > >
> > >
> > >
> > > Please fix all problems and resubmit a fixed version via the webform.
> > > If you are not sure how to fix the problems shown, please ask for help
> on the R-package-devel mailing list:
> > > <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> > > If you are fairly certain the rejection is a false positive, please
> reply-all to this message and explain.
> > >
> > > More details are given in the directory:
> > > <
> https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/
> >
> > > The files will be removed after roughly 7 days.
> > >
> > > No strong reverse dependencies to be checked.
> > >
> > > Best regards,
> > > CRAN teams' auto-check service
> > > Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
> > > Check: CRAN incoming feasibility, Result: NOTE
> > >   Maintainer: 'Vissarion Fisikopoulos <
> vissarion.fisikopoulos at gmail.com>'
> > >
> > >   New submission
> > >
> > >   Possibly mis-spelled words in DESCRIPTION:
> > >     Minkowski (9:17)
> > >     Polytopes (4:49)
> > >     Volesti (7:71)
> > >     polytopes (8:39, 10:83)
> > >     volesti (7:50)
> > >     zonotopes (9:44)
> > These words, except of 'volesti' (which is the name of our package),
> > describe geometrical concepts.
> >
> > > Flavor: r-devel-windows-ix86+x86_64
> > > Check: compiled code, Result: NOTE
> > >   File 'volesti/libs/i386/volesti.dll':
> > >     Found 'rand', possibly from 'rand' (C)
> > >       Object: 'rotating.o'
> > >   File 'volesti/libs/x64/volesti.dll':
> > >     Found 'rand', possibly from 'rand' (C)
> > >       Object: 'rotating.o'
> > >
> > >   Compiled code should not call entry points which might terminate R
> nor
> > >   write to stdout/stderr instead of to the console, nor use Fortran I/O
> > >   nor system RNGs.
> > >
> > >   See 'Writing portable packages' in the 'Writing R Extensions' manual.
> > >
> > > Flavor: r-devel-linux-x86_64-debian-gcc
> > > Check: compiled code, Result: NOTE
> > >   File 'volesti/libs/volesti.so':
> > >     Found 'rand', possibly from 'rand' (C)
> > >       Object: 'rotating.o'
> > >
> > >   Compiled code should not call entry points which might terminate R
> nor
> > >   write to stdout/stderr instead of to the console, nor use Fortran I/O
> > >   nor system RNGs.
> >
> > Library lpSolveAPI uses rand() and srand() in lp_utils.c. We replace
> > both functions with GetRNGstate(); PutRNGstate(); unif_rand(); from
> > R?s internal random number generation routines as it is proposed in
> > `Writing R Extensions`. Moreover if you run in folder `/src`:
> > $ grep -r 'rand()'
> > You just get:
> > `utils.c:  range *= (LPSREAL) unif_rand();`
> > which is our replacement. If you replace `rand()` with `srand` in grep
> > search you get a null result.
> > This NOTE appears because of our functions in `/src/include/samplers`
> > where word `rand` appears a lot of times, for example
> > `rand_point_generator()`.
> >
> > Best regards,
> > Vissarion Fisikopoulos
>
> On Fri, 22 Mar 2019 at 22:03, Henrik Bengtsson
> <henrik.bengtsson at gmail.com> wrote:
> >
> > Not a CRAN maintainer, but from my experience, it sounds like you're
> > hitting some very unusual hiccup here - that's unfortunate.  I just
> > had a look around at ftp://cran.r-project.org/incoming/ and your
> > package is not there anymore. Just a wild guess but I wonder if your
> > email reply back to CRAN ends up in their spam folders?
> >
> > BTW, what are the two NOTEs you're getting?  Maybe they're avoidable.
> > Since packages with all OKs can go straight through the CRAN incoming
> > checks and be published automatically (at least if the package is
> > already on CRAN), I try to walk an extra mile just avoid NOTEs in my
> > packages even if I know they're false positives.
> >
> > My $.02
> >
> > /Henrik
> >
> > On Fri, Mar 22, 2019 at 6:28 AM Vissarion Fisikopoulos
> > <fisikop at gmail.com> wrote:
> > >
> > > Hello,
> > >
> > > we have resubmitted the package 'volesti'. I got the email and
> > > confirmed submission. Later I got the confirmation email starting:
> > > "The following package was uploaded to CRAN:..." and then the email on
> > > automated check complaining about the same 2 notes as in the previous
> > > submission. I answered (reply to all) explaining why those notes are
> > > false positives. Then no news for 9 days. Could you please update us
> > > on this.
> > >
> > > Best regards,
> > > Vissarion
> > >
> > >
> > > On Wed, 13 Mar 2019 at 10:15, ????? ?????? <tolis.chal at gmail.com>
> wrote:
> > > >
> > > > Of course we will resubmit. Thank you all for the info.
> > > >
> > > > Chalkis Apostolos
> > > >
> > > > On Wed, 13 Mar 2019 at 10:05, Ma?lle SALMON via R-package-devel <
> > > > r-package-devel at r-project.org> wrote:
> > > >
> > > > >
> > > > >
> > > > >
> > > > > ---------- Forwarded message ----------
> > > > > From: "Ma?lle SALMON" <maelle.salmon at yahoo.se>
> > > > > To: Duncan Murdoch <murdoch.duncan at gmail.com>, Henrik Bengtsson <
> > > > > henrik.bengtsson at gmail.com>
> > > > > Cc: r-package-devel at r-project.org
> > > > > Bcc:
> > > > > Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
> > > > > Subject: Re: [R-pkg-devel] CRAN review
> > > > >  Sorry, the link was removed (by my copy-pasting it wrongly):
> > > > > https://itsalocke.com/cransays/articles/dashboard
> > > > >
> > > > >     Den onsdag 13 mars 2019 08:54:00 CET, Ma?lle SALMON via
> > > > > R-package-devel <r-package-devel at r-project.org> skrev:
> > > > >
> > > > >   We at Locke Data have made an hourly updated dashboard based on
> the FTP
> > > > > server
> > > > > CRAN incoming dashboard ? cransays
> > > > >
> > > > > |
> > > > > |
> > > > > |  |
> > > > > CRAN incoming dashboard ? cransays
> > > > >
> > > > >
> > > > >  |
> > > > >
> > > > >  |
> > > > >
> > > > >  |
> > > > >
> > > > >
> > > > >
> > > > > We hope it makes data more accessible whilst reducing load on the
> FTP
> > > > > server.
> > > > > Ma?lle.
> > > > >
> > > > >     Den tisdag 12 mars 2019 21:37:12 CET, Henrik Bengtsson <
> > > > > henrik.bengtsson at gmail.com> skrev:
> > > > >
> > > > >  You can also "follow" your package submission on the CRAN FTP
> server:
> > > > >
> > > > >   ftp://cran.r-project.org/incoming/
> > > > >
> > > > > /Henrik
> > > > >
> > > > > On Tue, Mar 12, 2019 at 1:26 PM Duncan Murdoch <
> murdoch.duncan at gmail.com>
> > > > > wrote:
> > > > > >
> > > > > > On 12/03/2019 2:57 p.m., ????? ?????? wrote:
> > > > > > > Dear all,
> > > > > > >
> > > > > > > We have submitted a package to CRAN in 25th of February and we
> have
> > > > > not got
> > > > > > > a
> > > > > > > positive or a negative answer for the submission since then.
> Is this
> > > > > > > normal? Is
> > > > > > > there any way to get informed for the review process?
> > > > > >
> > > > > > Did you get the two messages after submission (one to confirm
> that you
> > > > > > are the maintainer, the second to let you know the review has
> started)?
> > > > > > They'll both have subject lines like
> > > > > >
> > > > > > CRAN submission ....
> > > > > >
> > > > > >
> > > > > > The first one will start out saying something like
> > > > > > >
> > > > > > > Dear Duncan Murdoch
> > > > > > > Someone has submitted the package rgl to CRAN.
> > > > > > > You are receiving this email to confirm the submission as the
> > > > > maintainer of
> > > > > > > this package.
> > > > > >
> > > > > > and then ask you to confirm submission.
> > > > > >
> > > > > > The second one will start like
> > > > > >
> > > > > > > [This was generated from CRAN.R-project.org/submit.html]
> > > > > > >
> > > > > > > The following package was uploaded to CRAN:
> > > > > > > ===========================================
> > > > > > >
> > > > > > > Package Information:
> > > > > > > Package: rgl
> > > > > >
> > > > > > A while later you should get a third message about the automatic
> checks.
> > > > > >
> > > > > > Duncan Murdoch
> > > > > >
> > > > > > ______________________________________________
> > > > > > R-package-devel at r-project.org mailing list
> > > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > > > >
> > > > > ______________________________________________
> > > > > R-package-devel at r-project.org mailing list
> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > > > >     [[alternative HTML version deleted]]
> > > > >
> > > > > ______________________________________________
> > > > > R-package-devel at r-project.org mailing list
> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > > > >
> > > > >         [[alternative HTML version deleted]]
> > > > >
> > > > >
> > > > >
> > > > >
> > > > > ---------- Forwarded message ----------
> > > > > From: "Ma?lle SALMON via R-package-devel" <
> r-package-devel at r-project.org>
> > > > > To: Duncan Murdoch <murdoch.duncan at gmail.com>, Henrik Bengtsson <
> > > > > henrik.bengtsson at gmail.com>
> > > > > Cc: r-package-devel at r-project.org
> > > > > Bcc:
> > > > > Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
> > > > > Subject: Re: [R-pkg-devel] CRAN review
> > > > > ______________________________________________
> > > > > R-package-devel at r-project.org mailing list
> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > > > >
> > > >
> > > >         [[alternative HTML version deleted]]
> > > >
> > > > ______________________________________________
> > > > R-package-devel at r-project.org mailing list
> > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From wdun|@p @end|ng |rom t|bco@com  Fri Mar 29 17:05:03 2019
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Fri, 29 Mar 2019 09:05:03 -0700
Subject: [R-pkg-devel] CRAN review
In-Reply-To: <CAF8bMcZCg658ZGuhdKaTc-JVThH_JabcSL=EUeRk=CGTcvPWFg@mail.gmail.com>
References: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
 <6c203422-db18-f11b-7e01-4006ec39adff@gmail.com>
 <CAFDcVCQ2wgSTYJu_ZMdpJ1PRcvPcSZMOD4epE+zHp307w33xBg@mail.gmail.com>
 <mailman.3611.3047.1552463633.8486.r-package-devel@r-project.org>
 <mailman.3612.3048.1552464318.8486.r-package-devel@r-project.org>
 <CAMfvGJMSv-KGFcKyUHfPc5XYoHTuKYwvY3mp4R4APEoB0bYSvw@mail.gmail.com>
 <CAKa7CYMhBnsgLbQcLe3SRxVh-z4V=5CjeCCmKXQtw12nTgokgA@mail.gmail.com>
 <CAFDcVCTivRagC1eVYooyEU418web9b58QihSPju_6VmyDaeNmA@mail.gmail.com>
 <CAKa7CYM_0bDD7LEBko2+OdqfS2ROdb-3FaqThCn23Pw=RA=wgA@mail.gmail.com>
 <CAF8bMcZCg658ZGuhdKaTc-JVThH_JabcSL=EUeRk=CGTcvPWFg@mail.gmail.com>
Message-ID: <CAF8bMcZF8Pcqzftw3XEFWez0QW3Fe-k2T8d5g5=4OED-j00Dhg@mail.gmail.com>

It looks like it is not boost but RcppEigen that has the call to
std::rand() that volesti/src/rotating.cpp contains.

RcppEigen/include/Eigen/src/Core/MathFunctions.h:
  static inline Scalar run(const Scalar& x, const Scalar& y)
  {
    return x + (y-x) * Scalar(std::rand()) / Scalar(RAND_MAX);
  }


Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Fri, Mar 29, 2019 at 8:43 AM William Dunlap <wdunlap at tibco.com> wrote:

> > Library lpSolveAPI uses rand() and srand() in lp_utils.c. We replace
> > both functions with GetRNGstate(); PutRNGstate(); unif_rand(); from
> > R?s internal random number generation routines as it is proposed in
> > `Writing R Extensions`. Moreover if you run in folder `/src`:
> > $ grep -r 'rand()'
> > You just get:
> > `utils.c:  range *= (LPSREAL) unif_rand();`
> > which is our replacement. If you replace `rand()` with `srand` in grep
> > search you get a null result.
> > This NOTE appears because of our functions in `/src/include/samplers`
> > where word `rand` appears a lot of times, for example
> > `rand_point_generator()`.
>
> I don't think the note about using 'rand' comes from looking at strings
> in the source code.  It is probably looking at undefined symbols in the
> symbol table of the compiled and linked code with something like the
> following
>
> % find volesti -iname "*o" | xargs nm -A -g --demangle | grep ' U ' | grep
> rand
> volesti/src/lp_solve/lp_rlp.o:                 U storevarandweight
> volesti/src/lp_solve/lp_price.o:                 U rand_uniform
> volesti/src/lp_solve/lp_utils.o:                 U unif_rand
> volesti/src/lp_solve/lp_lib.o:                 U rand_uniform
> volesti/src/rotating.o:                 U rand
> volesti/src/volesti.so:                 U rand@@GLIBC_2.2.5
> volesti/src/volesti.so:                 U unif_rand
>
> You will have to poke through the boost headers or docs to see how to avoid
> using rand in volesti/src/rotating.cpp.
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
>
> On Fri, Mar 29, 2019 at 2:12 AM Vissarion Fisikopoulos <fisikop at gmail.com>
> wrote:
>
>> Dear all,
>>
>> @Henrik: thanks a lot for your reply.
>>
>> I did one more submission (the third) and I am posting below my answer
>> to the automatic cran email with 2 NOTES.
>>
>> Looking forward to your feedback.
>>
>> Best regards,
>> Vissarion.
>>
>> On Fri, 29 Mar 2019 at 11:04, Vissarion Fisikopoulos <fisikop at gmail.com>
>> wrote:
>> >
>> > Dear all,
>> >
>> > We got the results from the automated check for our package. There are
>> > two NOTEs in both checks in Windows and Debian. We are sure that the
>> > rejections are false positive, so with this e-mail we try to explain
>> > why. Please find our explanations below.
>> >
>> > On Thu, 28 Mar 2019 at 16:40, <ligges at statistik.tu-dortmund.de> wrote:
>> > >
>> > > Dear maintainer,
>> > >
>> > > package volesti_0.0.0.tar.gz does not pass the incoming checks
>> automatically, please see the following pre-tests:
>> > > Windows: <
>> https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/Windows/00check.log
>> >
>> > > Status: 2 NOTEs
>> > > Debian: <
>> https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/Debian/00check.log
>> >
>> > > Status: 2 NOTEs
>> > >
>> > >
>> > >
>> > > Please fix all problems and resubmit a fixed version via the webform.
>> > > If you are not sure how to fix the problems shown, please ask for
>> help on the R-package-devel mailing list:
>> > > <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>> > > If you are fairly certain the rejection is a false positive, please
>> reply-all to this message and explain.
>> > >
>> > > More details are given in the directory:
>> > > <
>> https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/
>> >
>> > > The files will be removed after roughly 7 days.
>> > >
>> > > No strong reverse dependencies to be checked.
>> > >
>> > > Best regards,
>> > > CRAN teams' auto-check service
>> > > Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
>> > > Check: CRAN incoming feasibility, Result: NOTE
>> > >   Maintainer: 'Vissarion Fisikopoulos <
>> vissarion.fisikopoulos at gmail.com>'
>> > >
>> > >   New submission
>> > >
>> > >   Possibly mis-spelled words in DESCRIPTION:
>> > >     Minkowski (9:17)
>> > >     Polytopes (4:49)
>> > >     Volesti (7:71)
>> > >     polytopes (8:39, 10:83)
>> > >     volesti (7:50)
>> > >     zonotopes (9:44)
>> > These words, except of 'volesti' (which is the name of our package),
>> > describe geometrical concepts.
>> >
>> > > Flavor: r-devel-windows-ix86+x86_64
>> > > Check: compiled code, Result: NOTE
>> > >   File 'volesti/libs/i386/volesti.dll':
>> > >     Found 'rand', possibly from 'rand' (C)
>> > >       Object: 'rotating.o'
>> > >   File 'volesti/libs/x64/volesti.dll':
>> > >     Found 'rand', possibly from 'rand' (C)
>> > >       Object: 'rotating.o'
>> > >
>> > >   Compiled code should not call entry points which might terminate R
>> nor
>> > >   write to stdout/stderr instead of to the console, nor use Fortran
>> I/O
>> > >   nor system RNGs.
>> > >
>> > >   See 'Writing portable packages' in the 'Writing R Extensions'
>> manual.
>> > >
>> > > Flavor: r-devel-linux-x86_64-debian-gcc
>> > > Check: compiled code, Result: NOTE
>> > >   File 'volesti/libs/volesti.so':
>> > >     Found 'rand', possibly from 'rand' (C)
>> > >       Object: 'rotating.o'
>> > >
>> > >   Compiled code should not call entry points which might terminate R
>> nor
>> > >   write to stdout/stderr instead of to the console, nor use Fortran
>> I/O
>> > >   nor system RNGs.
>> >
>> > Library lpSolveAPI uses rand() and srand() in lp_utils.c. We replace
>> > both functions with GetRNGstate(); PutRNGstate(); unif_rand(); from
>> > R?s internal random number generation routines as it is proposed in
>> > `Writing R Extensions`. Moreover if you run in folder `/src`:
>> > $ grep -r 'rand()'
>> > You just get:
>> > `utils.c:  range *= (LPSREAL) unif_rand();`
>> > which is our replacement. If you replace `rand()` with `srand` in grep
>> > search you get a null result.
>> > This NOTE appears because of our functions in `/src/include/samplers`
>> > where word `rand` appears a lot of times, for example
>> > `rand_point_generator()`.
>> >
>> > Best regards,
>> > Vissarion Fisikopoulos
>>
>> On Fri, 22 Mar 2019 at 22:03, Henrik Bengtsson
>> <henrik.bengtsson at gmail.com> wrote:
>> >
>> > Not a CRAN maintainer, but from my experience, it sounds like you're
>> > hitting some very unusual hiccup here - that's unfortunate.  I just
>> > had a look around at ftp://cran.r-project.org/incoming/ and your
>> > package is not there anymore. Just a wild guess but I wonder if your
>> > email reply back to CRAN ends up in their spam folders?
>> >
>> > BTW, what are the two NOTEs you're getting?  Maybe they're avoidable.
>> > Since packages with all OKs can go straight through the CRAN incoming
>> > checks and be published automatically (at least if the package is
>> > already on CRAN), I try to walk an extra mile just avoid NOTEs in my
>> > packages even if I know they're false positives.
>> >
>> > My $.02
>> >
>> > /Henrik
>> >
>> > On Fri, Mar 22, 2019 at 6:28 AM Vissarion Fisikopoulos
>> > <fisikop at gmail.com> wrote:
>> > >
>> > > Hello,
>> > >
>> > > we have resubmitted the package 'volesti'. I got the email and
>> > > confirmed submission. Later I got the confirmation email starting:
>> > > "The following package was uploaded to CRAN:..." and then the email on
>> > > automated check complaining about the same 2 notes as in the previous
>> > > submission. I answered (reply to all) explaining why those notes are
>> > > false positives. Then no news for 9 days. Could you please update us
>> > > on this.
>> > >
>> > > Best regards,
>> > > Vissarion
>> > >
>> > >
>> > > On Wed, 13 Mar 2019 at 10:15, ????? ?????? <tolis.chal at gmail.com>
>> wrote:
>> > > >
>> > > > Of course we will resubmit. Thank you all for the info.
>> > > >
>> > > > Chalkis Apostolos
>> > > >
>> > > > On Wed, 13 Mar 2019 at 10:05, Ma?lle SALMON via R-package-devel <
>> > > > r-package-devel at r-project.org> wrote:
>> > > >
>> > > > >
>> > > > >
>> > > > >
>> > > > > ---------- Forwarded message ----------
>> > > > > From: "Ma?lle SALMON" <maelle.salmon at yahoo.se>
>> > > > > To: Duncan Murdoch <murdoch.duncan at gmail.com>, Henrik Bengtsson <
>> > > > > henrik.bengtsson at gmail.com>
>> > > > > Cc: r-package-devel at r-project.org
>> > > > > Bcc:
>> > > > > Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
>> > > > > Subject: Re: [R-pkg-devel] CRAN review
>> > > > >  Sorry, the link was removed (by my copy-pasting it wrongly):
>> > > > > https://itsalocke.com/cransays/articles/dashboard
>> > > > >
>> > > > >     Den onsdag 13 mars 2019 08:54:00 CET, Ma?lle SALMON via
>> > > > > R-package-devel <r-package-devel at r-project.org> skrev:
>> > > > >
>> > > > >   We at Locke Data have made an hourly updated dashboard based on
>> the FTP
>> > > > > server
>> > > > > CRAN incoming dashboard ? cransays
>> > > > >
>> > > > > |
>> > > > > |
>> > > > > |  |
>> > > > > CRAN incoming dashboard ? cransays
>> > > > >
>> > > > >
>> > > > >  |
>> > > > >
>> > > > >  |
>> > > > >
>> > > > >  |
>> > > > >
>> > > > >
>> > > > >
>> > > > > We hope it makes data more accessible whilst reducing load on the
>> FTP
>> > > > > server.
>> > > > > Ma?lle.
>> > > > >
>> > > > >     Den tisdag 12 mars 2019 21:37:12 CET, Henrik Bengtsson <
>> > > > > henrik.bengtsson at gmail.com> skrev:
>> > > > >
>> > > > >  You can also "follow" your package submission on the CRAN FTP
>> server:
>> > > > >
>> > > > >   ftp://cran.r-project.org/incoming/
>> > > > >
>> > > > > /Henrik
>> > > > >
>> > > > > On Tue, Mar 12, 2019 at 1:26 PM Duncan Murdoch <
>> murdoch.duncan at gmail.com>
>> > > > > wrote:
>> > > > > >
>> > > > > > On 12/03/2019 2:57 p.m., ????? ?????? wrote:
>> > > > > > > Dear all,
>> > > > > > >
>> > > > > > > We have submitted a package to CRAN in 25th of February and
>> we have
>> > > > > not got
>> > > > > > > a
>> > > > > > > positive or a negative answer for the submission since then.
>> Is this
>> > > > > > > normal? Is
>> > > > > > > there any way to get informed for the review process?
>> > > > > >
>> > > > > > Did you get the two messages after submission (one to confirm
>> that you
>> > > > > > are the maintainer, the second to let you know the review has
>> started)?
>> > > > > > They'll both have subject lines like
>> > > > > >
>> > > > > > CRAN submission ....
>> > > > > >
>> > > > > >
>> > > > > > The first one will start out saying something like
>> > > > > > >
>> > > > > > > Dear Duncan Murdoch
>> > > > > > > Someone has submitted the package rgl to CRAN.
>> > > > > > > You are receiving this email to confirm the submission as the
>> > > > > maintainer of
>> > > > > > > this package.
>> > > > > >
>> > > > > > and then ask you to confirm submission.
>> > > > > >
>> > > > > > The second one will start like
>> > > > > >
>> > > > > > > [This was generated from CRAN.R-project.org/submit.html]
>> > > > > > >
>> > > > > > > The following package was uploaded to CRAN:
>> > > > > > > ===========================================
>> > > > > > >
>> > > > > > > Package Information:
>> > > > > > > Package: rgl
>> > > > > >
>> > > > > > A while later you should get a third message about the
>> automatic checks.
>> > > > > >
>> > > > > > Duncan Murdoch
>> > > > > >
>> > > > > > ______________________________________________
>> > > > > > R-package-devel at r-project.org mailing list
>> > > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> > > > >
>> > > > > ______________________________________________
>> > > > > R-package-devel at r-project.org mailing list
>> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> > > > >     [[alternative HTML version deleted]]
>> > > > >
>> > > > > ______________________________________________
>> > > > > R-package-devel at r-project.org mailing list
>> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> > > > >
>> > > > >         [[alternative HTML version deleted]]
>> > > > >
>> > > > >
>> > > > >
>> > > > >
>> > > > > ---------- Forwarded message ----------
>> > > > > From: "Ma?lle SALMON via R-package-devel" <
>> r-package-devel at r-project.org>
>> > > > > To: Duncan Murdoch <murdoch.duncan at gmail.com>, Henrik Bengtsson <
>> > > > > henrik.bengtsson at gmail.com>
>> > > > > Cc: r-package-devel at r-project.org
>> > > > > Bcc:
>> > > > > Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
>> > > > > Subject: Re: [R-pkg-devel] CRAN review
>> > > > > ______________________________________________
>> > > > > R-package-devel at r-project.org mailing list
>> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> > > > >
>> > > >
>> > > >         [[alternative HTML version deleted]]
>> > > >
>> > > > ______________________________________________
>> > > > R-package-devel at r-project.org mailing list
>> > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> > >
>> > > ______________________________________________
>> > > R-package-devel at r-project.org mailing list
>> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

	[[alternative HTML version deleted]]


From m@x|me@turgeon @end|ng |rom m@||@mcg|||@c@  Fri Mar 29 17:27:54 2019
From: m@x|me@turgeon @end|ng |rom m@||@mcg|||@c@ (Maxime Turgeon)
Date: Fri, 29 Mar 2019 16:27:54 +0000
Subject: [R-pkg-devel] CRAN review
In-Reply-To: <CAF8bMcZF8Pcqzftw3XEFWez0QW3Fe-k2T8d5g5=4OED-j00Dhg@mail.gmail.com>
References: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
 <6c203422-db18-f11b-7e01-4006ec39adff@gmail.com>
 <CAFDcVCQ2wgSTYJu_ZMdpJ1PRcvPcSZMOD4epE+zHp307w33xBg@mail.gmail.com>
 <mailman.3611.3047.1552463633.8486.r-package-devel@r-project.org>
 <mailman.3612.3048.1552464318.8486.r-package-devel@r-project.org>
 <CAMfvGJMSv-KGFcKyUHfPc5XYoHTuKYwvY3mp4R4APEoB0bYSvw@mail.gmail.com>
 <CAKa7CYMhBnsgLbQcLe3SRxVh-z4V=5CjeCCmKXQtw12nTgokgA@mail.gmail.com>
 <CAFDcVCTivRagC1eVYooyEU418web9b58QihSPju_6VmyDaeNmA@mail.gmail.com>
 <CAKa7CYM_0bDD7LEBko2+OdqfS2ROdb-3FaqThCn23Pw=RA=wgA@mail.gmail.com>
 <CAF8bMcZCg658ZGuhdKaTc-JVThH_JabcSL=EUeRk=CGTcvPWFg@mail.gmail.com>,
 <CAF8bMcZF8Pcqzftw3XEFWez0QW3Fe-k2T8d5g5=4OED-j00Dhg@mail.gmail.com>
Message-ID: <YT1PR01MB35485F764853EEA9CCD52C48BA5A0@YT1PR01MB3548.CANPRD01.PROD.OUTLOOK.COM>

Hi Bill,

Maybe I'm missing something, but if RcppEigen were the cause of the NOTE, wouldn't RcppEigen also get the same NOTE? However, it does not: https://cran.r-project.org/web/checks/check_results_RcppEigen.html

And for what it's worth, neither does BH: https://cran.r-project.org/web/checks/check_results_BH.html

Max
________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of William Dunlap <wdunlap at tibco.com>
Sent: March 29, 2019 12:05 PM
To: Vissarion Fisikopoulos
Cc: R Package Development
Subject: Re: [R-pkg-devel] CRAN review

It looks like it is not boost but RcppEigen that has the call to
std::rand() that volesti/src/rotating.cpp contains.

RcppEigen/include/Eigen/src/Core/MathFunctions.h:
  static inline Scalar run(const Scalar& x, const Scalar& y)
  {
    return x + (y-x) * Scalar(std::rand()) / Scalar(RAND_MAX);
  }


Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Fri, Mar 29, 2019 at 8:43 AM William Dunlap <wdunlap at tibco.com> wrote:

> > Library lpSolveAPI uses rand() and srand() in lp_utils.c. We replace
> > both functions with GetRNGstate(); PutRNGstate(); unif_rand(); from
> > R?s internal random number generation routines as it is proposed in
> > `Writing R Extensions`. Moreover if you run in folder `/src`:
> > $ grep -r 'rand()'
> > You just get:
> > `utils.c:  range *= (LPSREAL) unif_rand();`
> > which is our replacement. If you replace `rand()` with `srand` in grep
> > search you get a null result.
> > This NOTE appears because of our functions in `/src/include/samplers`
> > where word `rand` appears a lot of times, for example
> > `rand_point_generator()`.
>
> I don't think the note about using 'rand' comes from looking at strings
> in the source code.  It is probably looking at undefined symbols in the
> symbol table of the compiled and linked code with something like the
> following
>
> % find volesti -iname "*o" | xargs nm -A -g --demangle | grep ' U ' | grep
> rand
> volesti/src/lp_solve/lp_rlp.o:                 U storevarandweight
> volesti/src/lp_solve/lp_price.o:                 U rand_uniform
> volesti/src/lp_solve/lp_utils.o:                 U unif_rand
> volesti/src/lp_solve/lp_lib.o:                 U rand_uniform
> volesti/src/rotating.o:                 U rand
> volesti/src/volesti.so:                 U rand@@GLIBC_2.2.5
> volesti/src/volesti.so:                 U unif_rand
>
> You will have to poke through the boost headers or docs to see how to avoid
> using rand in volesti/src/rotating.cpp.
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
>
> On Fri, Mar 29, 2019 at 2:12 AM Vissarion Fisikopoulos <fisikop at gmail.com>
> wrote:
>
>> Dear all,
>>
>> @Henrik: thanks a lot for your reply.
>>
>> I did one more submission (the third) and I am posting below my answer
>> to the automatic cran email with 2 NOTES.
>>
>> Looking forward to your feedback.
>>
>> Best regards,
>> Vissarion.
>>
>> On Fri, 29 Mar 2019 at 11:04, Vissarion Fisikopoulos <fisikop at gmail.com>
>> wrote:
>> >
>> > Dear all,
>> >
>> > We got the results from the automated check for our package. There are
>> > two NOTEs in both checks in Windows and Debian. We are sure that the
>> > rejections are false positive, so with this e-mail we try to explain
>> > why. Please find our explanations below.
>> >
>> > On Thu, 28 Mar 2019 at 16:40, <ligges at statistik.tu-dortmund.de> wrote:
>> > >
>> > > Dear maintainer,
>> > >
>> > > package volesti_0.0.0.tar.gz does not pass the incoming checks
>> automatically, please see the following pre-tests:
>> > > Windows: <
>> https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/Windows/00check.log
>> >
>> > > Status: 2 NOTEs
>> > > Debian: <
>> https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/Debian/00check.log
>> >
>> > > Status: 2 NOTEs
>> > >
>> > >
>> > >
>> > > Please fix all problems and resubmit a fixed version via the webform.
>> > > If you are not sure how to fix the problems shown, please ask for
>> help on the R-package-devel mailing list:
>> > > <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>> > > If you are fairly certain the rejection is a false positive, please
>> reply-all to this message and explain.
>> > >
>> > > More details are given in the directory:
>> > > <
>> https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/
>> >
>> > > The files will be removed after roughly 7 days.
>> > >
>> > > No strong reverse dependencies to be checked.
>> > >
>> > > Best regards,
>> > > CRAN teams' auto-check service
>> > > Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
>> > > Check: CRAN incoming feasibility, Result: NOTE
>> > >   Maintainer: 'Vissarion Fisikopoulos <
>> vissarion.fisikopoulos at gmail.com>'
>> > >
>> > >   New submission
>> > >
>> > >   Possibly mis-spelled words in DESCRIPTION:
>> > >     Minkowski (9:17)
>> > >     Polytopes (4:49)
>> > >     Volesti (7:71)
>> > >     polytopes (8:39, 10:83)
>> > >     volesti (7:50)
>> > >     zonotopes (9:44)
>> > These words, except of 'volesti' (which is the name of our package),
>> > describe geometrical concepts.
>> >
>> > > Flavor: r-devel-windows-ix86+x86_64
>> > > Check: compiled code, Result: NOTE
>> > >   File 'volesti/libs/i386/volesti.dll':
>> > >     Found 'rand', possibly from 'rand' (C)
>> > >       Object: 'rotating.o'
>> > >   File 'volesti/libs/x64/volesti.dll':
>> > >     Found 'rand', possibly from 'rand' (C)
>> > >       Object: 'rotating.o'
>> > >
>> > >   Compiled code should not call entry points which might terminate R
>> nor
>> > >   write to stdout/stderr instead of to the console, nor use Fortran
>> I/O
>> > >   nor system RNGs.
>> > >
>> > >   See 'Writing portable packages' in the 'Writing R Extensions'
>> manual.
>> > >
>> > > Flavor: r-devel-linux-x86_64-debian-gcc
>> > > Check: compiled code, Result: NOTE
>> > >   File 'volesti/libs/volesti.so':
>> > >     Found 'rand', possibly from 'rand' (C)
>> > >       Object: 'rotating.o'
>> > >
>> > >   Compiled code should not call entry points which might terminate R
>> nor
>> > >   write to stdout/stderr instead of to the console, nor use Fortran
>> I/O
>> > >   nor system RNGs.
>> >
>> > Library lpSolveAPI uses rand() and srand() in lp_utils.c. We replace
>> > both functions with GetRNGstate(); PutRNGstate(); unif_rand(); from
>> > R?s internal random number generation routines as it is proposed in
>> > `Writing R Extensions`. Moreover if you run in folder `/src`:
>> > $ grep -r 'rand()'
>> > You just get:
>> > `utils.c:  range *= (LPSREAL) unif_rand();`
>> > which is our replacement. If you replace `rand()` with `srand` in grep
>> > search you get a null result.
>> > This NOTE appears because of our functions in `/src/include/samplers`
>> > where word `rand` appears a lot of times, for example
>> > `rand_point_generator()`.
>> >
>> > Best regards,
>> > Vissarion Fisikopoulos
>>
>> On Fri, 22 Mar 2019 at 22:03, Henrik Bengtsson
>> <henrik.bengtsson at gmail.com> wrote:
>> >
>> > Not a CRAN maintainer, but from my experience, it sounds like you're
>> > hitting some very unusual hiccup here - that's unfortunate.  I just
>> > had a look around at ftp://cran.r-project.org/incoming/ and your
>> > package is not there anymore. Just a wild guess but I wonder if your
>> > email reply back to CRAN ends up in their spam folders?
>> >
>> > BTW, what are the two NOTEs you're getting?  Maybe they're avoidable.
>> > Since packages with all OKs can go straight through the CRAN incoming
>> > checks and be published automatically (at least if the package is
>> > already on CRAN), I try to walk an extra mile just avoid NOTEs in my
>> > packages even if I know they're false positives.
>> >
>> > My $.02
>> >
>> > /Henrik
>> >
>> > On Fri, Mar 22, 2019 at 6:28 AM Vissarion Fisikopoulos
>> > <fisikop at gmail.com> wrote:
>> > >
>> > > Hello,
>> > >
>> > > we have resubmitted the package 'volesti'. I got the email and
>> > > confirmed submission. Later I got the confirmation email starting:
>> > > "The following package was uploaded to CRAN:..." and then the email on
>> > > automated check complaining about the same 2 notes as in the previous
>> > > submission. I answered (reply to all) explaining why those notes are
>> > > false positives. Then no news for 9 days. Could you please update us
>> > > on this.
>> > >
>> > > Best regards,
>> > > Vissarion
>> > >
>> > >
>> > > On Wed, 13 Mar 2019 at 10:15, ????? ?????? <tolis.chal at gmail.com>
>> wrote:
>> > > >
>> > > > Of course we will resubmit. Thank you all for the info.
>> > > >
>> > > > Chalkis Apostolos
>> > > >
>> > > > On Wed, 13 Mar 2019 at 10:05, Ma?lle SALMON via R-package-devel <
>> > > > r-package-devel at r-project.org> wrote:
>> > > >
>> > > > >
>> > > > >
>> > > > >
>> > > > > ---------- Forwarded message ----------
>> > > > > From: "Ma?lle SALMON" <maelle.salmon at yahoo.se>
>> > > > > To: Duncan Murdoch <murdoch.duncan at gmail.com>, Henrik Bengtsson <
>> > > > > henrik.bengtsson at gmail.com>
>> > > > > Cc: r-package-devel at r-project.org
>> > > > > Bcc:
>> > > > > Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
>> > > > > Subject: Re: [R-pkg-devel] CRAN review
>> > > > >  Sorry, the link was removed (by my copy-pasting it wrongly):
>> > > > > https://itsalocke.com/cransays/articles/dashboard
>> > > > >
>> > > > >     Den onsdag 13 mars 2019 08:54:00 CET, Ma?lle SALMON via
>> > > > > R-package-devel <r-package-devel at r-project.org> skrev:
>> > > > >
>> > > > >   We at Locke Data have made an hourly updated dashboard based on
>> the FTP
>> > > > > server
>> > > > > CRAN incoming dashboard ? cransays
>> > > > >
>> > > > > |
>> > > > > |
>> > > > > |  |
>> > > > > CRAN incoming dashboard ? cransays
>> > > > >
>> > > > >
>> > > > >  |
>> > > > >
>> > > > >  |
>> > > > >
>> > > > >  |
>> > > > >
>> > > > >
>> > > > >
>> > > > > We hope it makes data more accessible whilst reducing load on the
>> FTP
>> > > > > server.
>> > > > > Ma?lle.
>> > > > >
>> > > > >     Den tisdag 12 mars 2019 21:37:12 CET, Henrik Bengtsson <
>> > > > > henrik.bengtsson at gmail.com> skrev:
>> > > > >
>> > > > >  You can also "follow" your package submission on the CRAN FTP
>> server:
>> > > > >
>> > > > >   ftp://cran.r-project.org/incoming/
>> > > > >
>> > > > > /Henrik
>> > > > >
>> > > > > On Tue, Mar 12, 2019 at 1:26 PM Duncan Murdoch <
>> murdoch.duncan at gmail.com>
>> > > > > wrote:
>> > > > > >
>> > > > > > On 12/03/2019 2:57 p.m., ????? ?????? wrote:
>> > > > > > > Dear all,
>> > > > > > >
>> > > > > > > We have submitted a package to CRAN in 25th of February and
>> we have
>> > > > > not got
>> > > > > > > a
>> > > > > > > positive or a negative answer for the submission since then.
>> Is this
>> > > > > > > normal? Is
>> > > > > > > there any way to get informed for the review process?
>> > > > > >
>> > > > > > Did you get the two messages after submission (one to confirm
>> that you
>> > > > > > are the maintainer, the second to let you know the review has
>> started)?
>> > > > > > They'll both have subject lines like
>> > > > > >
>> > > > > > CRAN submission ....
>> > > > > >
>> > > > > >
>> > > > > > The first one will start out saying something like
>> > > > > > >
>> > > > > > > Dear Duncan Murdoch
>> > > > > > > Someone has submitted the package rgl to CRAN.
>> > > > > > > You are receiving this email to confirm the submission as the
>> > > > > maintainer of
>> > > > > > > this package.
>> > > > > >
>> > > > > > and then ask you to confirm submission.
>> > > > > >
>> > > > > > The second one will start like
>> > > > > >
>> > > > > > > [This was generated from CRAN.R-project.org/submit.html]
>> > > > > > >
>> > > > > > > The following package was uploaded to CRAN:
>> > > > > > > ===========================================
>> > > > > > >
>> > > > > > > Package Information:
>> > > > > > > Package: rgl
>> > > > > >
>> > > > > > A while later you should get a third message about the
>> automatic checks.
>> > > > > >
>> > > > > > Duncan Murdoch
>> > > > > >
>> > > > > > ______________________________________________
>> > > > > > R-package-devel at r-project.org mailing list
>> > > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> > > > >
>> > > > > ______________________________________________
>> > > > > R-package-devel at r-project.org mailing list
>> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> > > > >     [[alternative HTML version deleted]]
>> > > > >
>> > > > > ______________________________________________
>> > > > > R-package-devel at r-project.org mailing list
>> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> > > > >
>> > > > >         [[alternative HTML version deleted]]
>> > > > >
>> > > > >
>> > > > >
>> > > > >
>> > > > > ---------- Forwarded message ----------
>> > > > > From: "Ma?lle SALMON via R-package-devel" <
>> r-package-devel at r-project.org>
>> > > > > To: Duncan Murdoch <murdoch.duncan at gmail.com>, Henrik Bengtsson <
>> > > > > henrik.bengtsson at gmail.com>
>> > > > > Cc: r-package-devel at r-project.org
>> > > > > Bcc:
>> > > > > Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
>> > > > > Subject: Re: [R-pkg-devel] CRAN review
>> > > > > ______________________________________________
>> > > > > R-package-devel at r-project.org mailing list
>> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> > > > >
>> > > >
>> > > >         [[alternative HTML version deleted]]
>> > > >
>> > > > ______________________________________________
>> > > > R-package-devel at r-project.org mailing list
>> > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> > >
>> > > ______________________________________________
>> > > R-package-devel at r-project.org mailing list
>> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From wdun|@p @end|ng |rom t|bco@com  Fri Mar 29 17:35:32 2019
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Fri, 29 Mar 2019 09:35:32 -0700
Subject: [R-pkg-devel] CRAN review
In-Reply-To: <YT1PR01MB35485F764853EEA9CCD52C48BA5A0@YT1PR01MB3548.CANPRD01.PROD.OUTLOOK.COM>
References: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
 <6c203422-db18-f11b-7e01-4006ec39adff@gmail.com>
 <CAFDcVCQ2wgSTYJu_ZMdpJ1PRcvPcSZMOD4epE+zHp307w33xBg@mail.gmail.com>
 <mailman.3611.3047.1552463633.8486.r-package-devel@r-project.org>
 <mailman.3612.3048.1552464318.8486.r-package-devel@r-project.org>
 <CAMfvGJMSv-KGFcKyUHfPc5XYoHTuKYwvY3mp4R4APEoB0bYSvw@mail.gmail.com>
 <CAKa7CYMhBnsgLbQcLe3SRxVh-z4V=5CjeCCmKXQtw12nTgokgA@mail.gmail.com>
 <CAFDcVCTivRagC1eVYooyEU418web9b58QihSPju_6VmyDaeNmA@mail.gmail.com>
 <CAKa7CYM_0bDD7LEBko2+OdqfS2ROdb-3FaqThCn23Pw=RA=wgA@mail.gmail.com>
 <CAF8bMcZCg658ZGuhdKaTc-JVThH_JabcSL=EUeRk=CGTcvPWFg@mail.gmail.com>
 <CAF8bMcZF8Pcqzftw3XEFWez0QW3Fe-k2T8d5g5=4OED-j00Dhg@mail.gmail.com>
 <YT1PR01MB35485F764853EEA9CCD52C48BA5A0@YT1PR01MB3548.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <CAF8bMcaOwtd0bYVxGsstwBAkuj05AAVZsYeEnd2-xHGmhY66Ag@mail.gmail.com>

The check only looks at compiled code.  BH contains only headers, no
compiled code.

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Fri, Mar 29, 2019 at 9:27 AM Maxime Turgeon <
maxime.turgeon at mail.mcgill.ca> wrote:

> Hi Bill,
>
> Maybe I'm missing something, but if RcppEigen were the cause of the NOTE,
> wouldn't RcppEigen also get the same NOTE? However, it does not:
> https://cran.r-project.org/web/checks/check_results_RcppEigen.html
>
> And for what it's worth, neither does BH:
> https://cran.r-project.org/web/checks/check_results_BH.html
>
> Max
> ------------------------------
> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on behalf
> of William Dunlap <wdunlap at tibco.com>
> *Sent:* March 29, 2019 12:05 PM
> *To:* Vissarion Fisikopoulos
> *Cc:* R Package Development
> *Subject:* Re: [R-pkg-devel] CRAN review
>
> It looks like it is not boost but RcppEigen that has the call to
> std::rand() that volesti/src/rotating.cpp contains.
>
> RcppEigen/include/Eigen/src/Core/MathFunctions.h:
>   static inline Scalar run(const Scalar& x, const Scalar& y)
>   {
>     return x + (y-x) * Scalar(std::rand()) / Scalar(RAND_MAX);
>   }
>
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
>
> On Fri, Mar 29, 2019 at 8:43 AM William Dunlap <wdunlap at tibco.com> wrote:
>
> > > Library lpSolveAPI uses rand() and srand() in lp_utils.c. We replace
> > > both functions with GetRNGstate(); PutRNGstate(); unif_rand(); from
> > > R?s internal random number generation routines as it is proposed in
> > > `Writing R Extensions`. Moreover if you run in folder `/src`:
> > > $ grep -r 'rand()'
> > > You just get:
> > > `utils.c:  range *= (LPSREAL) unif_rand();`
> > > which is our replacement. If you replace `rand()` with `srand` in grep
> > > search you get a null result.
> > > This NOTE appears because of our functions in `/src/include/samplers`
> > > where word `rand` appears a lot of times, for example
> > > `rand_point_generator()`.
> >
> > I don't think the note about using 'rand' comes from looking at strings
> > in the source code.  It is probably looking at undefined symbols in the
> > symbol table of the compiled and linked code with something like the
> > following
> >
> > % find volesti -iname "*o" | xargs nm -A -g --demangle | grep ' U ' |
> grep
> > rand
> > volesti/src/lp_solve/lp_rlp.o:                 U storevarandweight
> > volesti/src/lp_solve/lp_price.o:                 U rand_uniform
> > volesti/src/lp_solve/lp_utils.o:                 U unif_rand
> > volesti/src/lp_solve/lp_lib.o:                 U rand_uniform
> > volesti/src/rotating.o:                 U rand
> > volesti/src/volesti.so:                 U rand@@GLIBC_2.2.5
> > volesti/src/volesti.so:                 U unif_rand
> >
> > You will have to poke through the boost headers or docs to see how to
> avoid
> > using rand in volesti/src/rotating.cpp.
> >
> > Bill Dunlap
> > TIBCO Software
> > wdunlap tibco.com
> >
> >
> > On Fri, Mar 29, 2019 at 2:12 AM Vissarion Fisikopoulos <
> fisikop at gmail.com>
> > wrote:
> >
> >> Dear all,
> >>
> >> @Henrik: thanks a lot for your reply.
> >>
> >> I did one more submission (the third) and I am posting below my answer
> >> to the automatic cran email with 2 NOTES.
> >>
> >> Looking forward to your feedback.
> >>
> >> Best regards,
> >> Vissarion.
> >>
> >> On Fri, 29 Mar 2019 at 11:04, Vissarion Fisikopoulos <fisikop at gmail.com
> >
> >> wrote:
> >> >
> >> > Dear all,
> >> >
> >> > We got the results from the automated check for our package. There are
> >> > two NOTEs in both checks in Windows and Debian. We are sure that the
> >> > rejections are false positive, so with this e-mail we try to explain
> >> > why. Please find our explanations below.
> >> >
> >> > On Thu, 28 Mar 2019 at 16:40, <ligges at statistik.tu-dortmund.de>
> wrote:
> >> > >
> >> > > Dear maintainer,
> >> > >
> >> > > package volesti_0.0.0.tar.gz does not pass the incoming checks
> >> automatically, please see the following pre-tests:
> >> > > Windows: <
> >>
> https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/Windows/00check.log
> >> >
> >> > > Status: 2 NOTEs
> >> > > Debian: <
> >>
> https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/Debian/00check.log
> >> >
> >> > > Status: 2 NOTEs
> >> > >
> >> > >
> >> > >
> >> > > Please fix all problems and resubmit a fixed version via the
> webform.
> >> > > If you are not sure how to fix the problems shown, please ask for
> >> help on the R-package-devel mailing list:
> >> > > <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> >> > > If you are fairly certain the rejection is a false positive, please
> >> reply-all to this message and explain.
> >> > >
> >> > > More details are given in the directory:
> >> > > <
> >>
> https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/
> >> >
> >> > > The files will be removed after roughly 7 days.
> >> > >
> >> > > No strong reverse dependencies to be checked.
> >> > >
> >> > > Best regards,
> >> > > CRAN teams' auto-check service
> >> > > Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
> >> > > Check: CRAN incoming feasibility, Result: NOTE
> >> > >   Maintainer: 'Vissarion Fisikopoulos <
> >> vissarion.fisikopoulos at gmail.com>'
> >> > >
> >> > >   New submission
> >> > >
> >> > >   Possibly mis-spelled words in DESCRIPTION:
> >> > >     Minkowski (9:17)
> >> > >     Polytopes (4:49)
> >> > >     Volesti (7:71)
> >> > >     polytopes (8:39, 10:83)
> >> > >     volesti (7:50)
> >> > >     zonotopes (9:44)
> >> > These words, except of 'volesti' (which is the name of our package),
> >> > describe geometrical concepts.
> >> >
> >> > > Flavor: r-devel-windows-ix86+x86_64
> >> > > Check: compiled code, Result: NOTE
> >> > >   File 'volesti/libs/i386/volesti.dll':
> >> > >     Found 'rand', possibly from 'rand' (C)
> >> > >       Object: 'rotating.o'
> >> > >   File 'volesti/libs/x64/volesti.dll':
> >> > >     Found 'rand', possibly from 'rand' (C)
> >> > >       Object: 'rotating.o'
> >> > >
> >> > >   Compiled code should not call entry points which might terminate R
> >> nor
> >> > >   write to stdout/stderr instead of to the console, nor use Fortran
> >> I/O
> >> > >   nor system RNGs.
> >> > >
> >> > >   See 'Writing portable packages' in the 'Writing R Extensions'
> >> manual.
> >> > >
> >> > > Flavor: r-devel-linux-x86_64-debian-gcc
> >> > > Check: compiled code, Result: NOTE
> >> > >   File 'volesti/libs/volesti.so':
> >> > >     Found 'rand', possibly from 'rand' (C)
> >> > >       Object: 'rotating.o'
> >> > >
> >> > >   Compiled code should not call entry points which might terminate R
> >> nor
> >> > >   write to stdout/stderr instead of to the console, nor use Fortran
> >> I/O
> >> > >   nor system RNGs.
> >> >
> >> > Library lpSolveAPI uses rand() and srand() in lp_utils.c. We replace
> >> > both functions with GetRNGstate(); PutRNGstate(); unif_rand(); from
> >> > R?s internal random number generation routines as it is proposed in
> >> > `Writing R Extensions`. Moreover if you run in folder `/src`:
> >> > $ grep -r 'rand()'
> >> > You just get:
> >> > `utils.c:  range *= (LPSREAL) unif_rand();`
> >> > which is our replacement. If you replace `rand()` with `srand` in grep
> >> > search you get a null result.
> >> > This NOTE appears because of our functions in `/src/include/samplers`
> >> > where word `rand` appears a lot of times, for example
> >> > `rand_point_generator()`.
> >> >
> >> > Best regards,
> >> > Vissarion Fisikopoulos
> >>
> >> On Fri, 22 Mar 2019 at 22:03, Henrik Bengtsson
> >> <henrik.bengtsson at gmail.com> wrote:
> >> >
> >> > Not a CRAN maintainer, but from my experience, it sounds like you're
> >> > hitting some very unusual hiccup here - that's unfortunate.  I just
> >> > had a look around at ftp://cran.r-project.org/incoming/ and your
> >> > package is not there anymore. Just a wild guess but I wonder if your
> >> > email reply back to CRAN ends up in their spam folders?
> >> >
> >> > BTW, what are the two NOTEs you're getting?  Maybe they're avoidable.
> >> > Since packages with all OKs can go straight through the CRAN incoming
> >> > checks and be published automatically (at least if the package is
> >> > already on CRAN), I try to walk an extra mile just avoid NOTEs in my
> >> > packages even if I know they're false positives.
> >> >
> >> > My $.02
> >> >
> >> > /Henrik
> >> >
> >> > On Fri, Mar 22, 2019 at 6:28 AM Vissarion Fisikopoulos
> >> > <fisikop at gmail.com> wrote:
> >> > >
> >> > > Hello,
> >> > >
> >> > > we have resubmitted the package 'volesti'. I got the email and
> >> > > confirmed submission. Later I got the confirmation email starting:
> >> > > "The following package was uploaded to CRAN:..." and then the email
> on
> >> > > automated check complaining about the same 2 notes as in the
> previous
> >> > > submission. I answered (reply to all) explaining why those notes are
> >> > > false positives. Then no news for 9 days. Could you please update us
> >> > > on this.
> >> > >
> >> > > Best regards,
> >> > > Vissarion
> >> > >
> >> > >
> >> > > On Wed, 13 Mar 2019 at 10:15, ????? ?????? <tolis.chal at gmail.com>
> >> wrote:
> >> > > >
> >> > > > Of course we will resubmit. Thank you all for the info.
> >> > > >
> >> > > > Chalkis Apostolos
> >> > > >
> >> > > > On Wed, 13 Mar 2019 at 10:05, Ma?lle SALMON via R-package-devel <
> >> > > > r-package-devel at r-project.org> wrote:
> >> > > >
> >> > > > >
> >> > > > >
> >> > > > >
> >> > > > > ---------- Forwarded message ----------
> >> > > > > From: "Ma?lle SALMON" <maelle.salmon at yahoo.se>
> >> > > > > To: Duncan Murdoch <murdoch.duncan at gmail.com>, Henrik
> Bengtsson <
> >> > > > > henrik.bengtsson at gmail.com>
> >> > > > > Cc: r-package-devel at r-project.org
> >> > > > > Bcc:
> >> > > > > Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
> >> > > > > Subject: Re: [R-pkg-devel] CRAN review
> >> > > > >  Sorry, the link was removed (by my copy-pasting it wrongly):
> >> > > > > https://itsalocke.com/cransays/articles/dashboard
> >> > > > >
> >> > > > >     Den onsdag 13 mars 2019 08:54:00 CET, Ma?lle SALMON via
> >> > > > > R-package-devel <r-package-devel at r-project.org> skrev:
> >> > > > >
> >> > > > >   We at Locke Data have made an hourly updated dashboard based
> on
> >> the FTP
> >> > > > > server
> >> > > > > CRAN incoming dashboard ? cransays
> >> > > > >
> >> > > > > |
> >> > > > > |
> >> > > > > |  |
> >> > > > > CRAN incoming dashboard ? cransays
> >> > > > >
> >> > > > >
> >> > > > >  |
> >> > > > >
> >> > > > >  |
> >> > > > >
> >> > > > >  |
> >> > > > >
> >> > > > >
> >> > > > >
> >> > > > > We hope it makes data more accessible whilst reducing load on
> the
> >> FTP
> >> > > > > server.
> >> > > > > Ma?lle.
> >> > > > >
> >> > > > >     Den tisdag 12 mars 2019 21:37:12 CET, Henrik Bengtsson <
> >> > > > > henrik.bengtsson at gmail.com> skrev:
> >> > > > >
> >> > > > >  You can also "follow" your package submission on the CRAN FTP
> >> server:
> >> > > > >
> >> > > > >   ftp://cran.r-project.org/incoming/
> >> > > > >
> >> > > > > /Henrik
> >> > > > >
> >> > > > > On Tue, Mar 12, 2019 at 1:26 PM Duncan Murdoch <
> >> murdoch.duncan at gmail.com>
> >> > > > > wrote:
> >> > > > > >
> >> > > > > > On 12/03/2019 2:57 p.m., ????? ?????? wrote:
> >> > > > > > > Dear all,
> >> > > > > > >
> >> > > > > > > We have submitted a package to CRAN in 25th of February and
> >> we have
> >> > > > > not got
> >> > > > > > > a
> >> > > > > > > positive or a negative answer for the submission since then.
> >> Is this
> >> > > > > > > normal? Is
> >> > > > > > > there any way to get informed for the review process?
> >> > > > > >
> >> > > > > > Did you get the two messages after submission (one to confirm
> >> that you
> >> > > > > > are the maintainer, the second to let you know the review has
> >> started)?
> >> > > > > > They'll both have subject lines like
> >> > > > > >
> >> > > > > > CRAN submission ....
> >> > > > > >
> >> > > > > >
> >> > > > > > The first one will start out saying something like
> >> > > > > > >
> >> > > > > > > Dear Duncan Murdoch
> >> > > > > > > Someone has submitted the package rgl to CRAN.
> >> > > > > > > You are receiving this email to confirm the submission as
> the
> >> > > > > maintainer of
> >> > > > > > > this package.
> >> > > > > >
> >> > > > > > and then ask you to confirm submission.
> >> > > > > >
> >> > > > > > The second one will start like
> >> > > > > >
> >> > > > > > > [This was generated from CRAN.R-project.org/submit.html]
> >> > > > > > >
> >> > > > > > > The following package was uploaded to CRAN:
> >> > > > > > > ===========================================
> >> > > > > > >
> >> > > > > > > Package Information:
> >> > > > > > > Package: rgl
> >> > > > > >
> >> > > > > > A while later you should get a third message about the
> >> automatic checks.
> >> > > > > >
> >> > > > > > Duncan Murdoch
> >> > > > > >
> >> > > > > > ______________________________________________
> >> > > > > > R-package-devel at r-project.org mailing list
> >> > > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >> > > > >
> >> > > > > ______________________________________________
> >> > > > > R-package-devel at r-project.org mailing list
> >> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >> > > > >     [[alternative HTML version deleted]]
> >> > > > >
> >> > > > > ______________________________________________
> >> > > > > R-package-devel at r-project.org mailing list
> >> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >> > > > >
> >> > > > >         [[alternative HTML version deleted]]
> >> > > > >
> >> > > > >
> >> > > > >
> >> > > > >
> >> > > > > ---------- Forwarded message ----------
> >> > > > > From: "Ma?lle SALMON via R-package-devel" <
> >> r-package-devel at r-project.org>
> >> > > > > To: Duncan Murdoch <murdoch.duncan at gmail.com>, Henrik
> Bengtsson <
> >> > > > > henrik.bengtsson at gmail.com>
> >> > > > > Cc: r-package-devel at r-project.org
> >> > > > > Bcc:
> >> > > > > Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
> >> > > > > Subject: Re: [R-pkg-devel] CRAN review
> >> > > > > ______________________________________________
> >> > > > > R-package-devel at r-project.org mailing list
> >> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >> > > > >
> >> > > >
> >> > > >         [[alternative HTML version deleted]]
> >> > > >
> >> > > > ______________________________________________
> >> > > > R-package-devel at r-project.org mailing list
> >> > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >> > >
> >> > > ______________________________________________
> >> > > R-package-devel at r-project.org mailing list
> >> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From wdun|@p @end|ng |rom t|bco@com  Fri Mar 29 17:37:25 2019
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Fri, 29 Mar 2019 09:37:25 -0700
Subject: [R-pkg-devel] CRAN review
In-Reply-To: <CAF8bMcaOwtd0bYVxGsstwBAkuj05AAVZsYeEnd2-xHGmhY66Ag@mail.gmail.com>
References: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
 <6c203422-db18-f11b-7e01-4006ec39adff@gmail.com>
 <CAFDcVCQ2wgSTYJu_ZMdpJ1PRcvPcSZMOD4epE+zHp307w33xBg@mail.gmail.com>
 <mailman.3611.3047.1552463633.8486.r-package-devel@r-project.org>
 <mailman.3612.3048.1552464318.8486.r-package-devel@r-project.org>
 <CAMfvGJMSv-KGFcKyUHfPc5XYoHTuKYwvY3mp4R4APEoB0bYSvw@mail.gmail.com>
 <CAKa7CYMhBnsgLbQcLe3SRxVh-z4V=5CjeCCmKXQtw12nTgokgA@mail.gmail.com>
 <CAFDcVCTivRagC1eVYooyEU418web9b58QihSPju_6VmyDaeNmA@mail.gmail.com>
 <CAKa7CYM_0bDD7LEBko2+OdqfS2ROdb-3FaqThCn23Pw=RA=wgA@mail.gmail.com>
 <CAF8bMcZCg658ZGuhdKaTc-JVThH_JabcSL=EUeRk=CGTcvPWFg@mail.gmail.com>
 <CAF8bMcZF8Pcqzftw3XEFWez0QW3Fe-k2T8d5g5=4OED-j00Dhg@mail.gmail.com>
 <YT1PR01MB35485F764853EEA9CCD52C48BA5A0@YT1PR01MB3548.CANPRD01.PROD.OUTLOOK.COM>
 <CAF8bMcaOwtd0bYVxGsstwBAkuj05AAVZsYeEnd2-xHGmhY66Ag@mail.gmail.com>
Message-ID: <CAF8bMcYHYd=A=ZZrBpTV2bMZZs1sBN4g9YvXkzwMMGyYvxmJgw@mail.gmail.com>

Oops, RcppEigen does contain compiled code, but its header files include
much more code that doesn't get checked because it is not used in
RcppEigen.so.

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Fri, Mar 29, 2019 at 9:35 AM William Dunlap <wdunlap at tibco.com> wrote:

> The check only looks at compiled code.  BH contains only headers, no
> compiled code.
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
>
> On Fri, Mar 29, 2019 at 9:27 AM Maxime Turgeon <
> maxime.turgeon at mail.mcgill.ca> wrote:
>
>> Hi Bill,
>>
>> Maybe I'm missing something, but if RcppEigen were the cause of the NOTE,
>> wouldn't RcppEigen also get the same NOTE? However, it does not:
>> https://cran.r-project.org/web/checks/check_results_RcppEigen.html
>>
>> And for what it's worth, neither does BH:
>> https://cran.r-project.org/web/checks/check_results_BH.html
>>
>> Max
>> ------------------------------
>> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on
>> behalf of William Dunlap <wdunlap at tibco.com>
>> *Sent:* March 29, 2019 12:05 PM
>> *To:* Vissarion Fisikopoulos
>> *Cc:* R Package Development
>> *Subject:* Re: [R-pkg-devel] CRAN review
>>
>> It looks like it is not boost but RcppEigen that has the call to
>> std::rand() that volesti/src/rotating.cpp contains.
>>
>> RcppEigen/include/Eigen/src/Core/MathFunctions.h:
>>   static inline Scalar run(const Scalar& x, const Scalar& y)
>>   {
>>     return x + (y-x) * Scalar(std::rand()) / Scalar(RAND_MAX);
>>   }
>>
>>
>> Bill Dunlap
>> TIBCO Software
>> wdunlap tibco.com
>>
>>
>> On Fri, Mar 29, 2019 at 8:43 AM William Dunlap <wdunlap at tibco.com> wrote:
>>
>> > > Library lpSolveAPI uses rand() and srand() in lp_utils.c. We replace
>> > > both functions with GetRNGstate(); PutRNGstate(); unif_rand(); from
>> > > R?s internal random number generation routines as it is proposed in
>> > > `Writing R Extensions`. Moreover if you run in folder `/src`:
>> > > $ grep -r 'rand()'
>> > > You just get:
>> > > `utils.c:  range *= (LPSREAL) unif_rand();`
>> > > which is our replacement. If you replace `rand()` with `srand` in grep
>> > > search you get a null result.
>> > > This NOTE appears because of our functions in `/src/include/samplers`
>> > > where word `rand` appears a lot of times, for example
>> > > `rand_point_generator()`.
>> >
>> > I don't think the note about using 'rand' comes from looking at strings
>> > in the source code.  It is probably looking at undefined symbols in the
>> > symbol table of the compiled and linked code with something like the
>> > following
>> >
>> > % find volesti -iname "*o" | xargs nm -A -g --demangle | grep ' U ' |
>> grep
>> > rand
>> > volesti/src/lp_solve/lp_rlp.o:                 U storevarandweight
>> > volesti/src/lp_solve/lp_price.o:                 U rand_uniform
>> > volesti/src/lp_solve/lp_utils.o:                 U unif_rand
>> > volesti/src/lp_solve/lp_lib.o:                 U rand_uniform
>> > volesti/src/rotating.o:                 U rand
>> > volesti/src/volesti.so:                 U rand@@GLIBC_2.2.5
>> > volesti/src/volesti.so:                 U unif_rand
>> >
>> > You will have to poke through the boost headers or docs to see how to
>> avoid
>> > using rand in volesti/src/rotating.cpp.
>> >
>> > Bill Dunlap
>> > TIBCO Software
>> > wdunlap tibco.com
>> >
>> >
>> > On Fri, Mar 29, 2019 at 2:12 AM Vissarion Fisikopoulos <
>> fisikop at gmail.com>
>> > wrote:
>> >
>> >> Dear all,
>> >>
>> >> @Henrik: thanks a lot for your reply.
>> >>
>> >> I did one more submission (the third) and I am posting below my answer
>> >> to the automatic cran email with 2 NOTES.
>> >>
>> >> Looking forward to your feedback.
>> >>
>> >> Best regards,
>> >> Vissarion.
>> >>
>> >> On Fri, 29 Mar 2019 at 11:04, Vissarion Fisikopoulos <
>> fisikop at gmail.com>
>> >> wrote:
>> >> >
>> >> > Dear all,
>> >> >
>> >> > We got the results from the automated check for our package. There
>> are
>> >> > two NOTEs in both checks in Windows and Debian. We are sure that the
>> >> > rejections are false positive, so with this e-mail we try to explain
>> >> > why. Please find our explanations below.
>> >> >
>> >> > On Thu, 28 Mar 2019 at 16:40, <ligges at statistik.tu-dortmund.de>
>> wrote:
>> >> > >
>> >> > > Dear maintainer,
>> >> > >
>> >> > > package volesti_0.0.0.tar.gz does not pass the incoming checks
>> >> automatically, please see the following pre-tests:
>> >> > > Windows: <
>> >>
>> https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/Windows/00check.log
>> >> >
>> >> > > Status: 2 NOTEs
>> >> > > Debian: <
>> >>
>> https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/Debian/00check.log
>> >> >
>> >> > > Status: 2 NOTEs
>> >> > >
>> >> > >
>> >> > >
>> >> > > Please fix all problems and resubmit a fixed version via the
>> webform.
>> >> > > If you are not sure how to fix the problems shown, please ask for
>> >> help on the R-package-devel mailing list:
>> >> > > <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>> >> > > If you are fairly certain the rejection is a false positive, please
>> >> reply-all to this message and explain.
>> >> > >
>> >> > > More details are given in the directory:
>> >> > > <
>> >>
>> https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/
>> >> >
>> >> > > The files will be removed after roughly 7 days.
>> >> > >
>> >> > > No strong reverse dependencies to be checked.
>> >> > >
>> >> > > Best regards,
>> >> > > CRAN teams' auto-check service
>> >> > > Flavor: r-devel-linux-x86_64-debian-gcc,
>> r-devel-windows-ix86+x86_64
>> >> > > Check: CRAN incoming feasibility, Result: NOTE
>> >> > >   Maintainer: 'Vissarion Fisikopoulos <
>> >> vissarion.fisikopoulos at gmail.com>'
>> >> > >
>> >> > >   New submission
>> >> > >
>> >> > >   Possibly mis-spelled words in DESCRIPTION:
>> >> > >     Minkowski (9:17)
>> >> > >     Polytopes (4:49)
>> >> > >     Volesti (7:71)
>> >> > >     polytopes (8:39, 10:83)
>> >> > >     volesti (7:50)
>> >> > >     zonotopes (9:44)
>> >> > These words, except of 'volesti' (which is the name of our package),
>> >> > describe geometrical concepts.
>> >> >
>> >> > > Flavor: r-devel-windows-ix86+x86_64
>> >> > > Check: compiled code, Result: NOTE
>> >> > >   File 'volesti/libs/i386/volesti.dll':
>> >> > >     Found 'rand', possibly from 'rand' (C)
>> >> > >       Object: 'rotating.o'
>> >> > >   File 'volesti/libs/x64/volesti.dll':
>> >> > >     Found 'rand', possibly from 'rand' (C)
>> >> > >       Object: 'rotating.o'
>> >> > >
>> >> > >   Compiled code should not call entry points which might terminate
>> R
>> >> nor
>> >> > >   write to stdout/stderr instead of to the console, nor use Fortran
>> >> I/O
>> >> > >   nor system RNGs.
>> >> > >
>> >> > >   See 'Writing portable packages' in the 'Writing R Extensions'
>> >> manual.
>> >> > >
>> >> > > Flavor: r-devel-linux-x86_64-debian-gcc
>> >> > > Check: compiled code, Result: NOTE
>> >> > >   File 'volesti/libs/volesti.so':
>> >> > >     Found 'rand', possibly from 'rand' (C)
>> >> > >       Object: 'rotating.o'
>> >> > >
>> >> > >   Compiled code should not call entry points which might terminate
>> R
>> >> nor
>> >> > >   write to stdout/stderr instead of to the console, nor use Fortran
>> >> I/O
>> >> > >   nor system RNGs.
>> >> >
>> >> > Library lpSolveAPI uses rand() and srand() in lp_utils.c. We replace
>> >> > both functions with GetRNGstate(); PutRNGstate(); unif_rand(); from
>> >> > R?s internal random number generation routines as it is proposed in
>> >> > `Writing R Extensions`. Moreover if you run in folder `/src`:
>> >> > $ grep -r 'rand()'
>> >> > You just get:
>> >> > `utils.c:  range *= (LPSREAL) unif_rand();`
>> >> > which is our replacement. If you replace `rand()` with `srand` in
>> grep
>> >> > search you get a null result.
>> >> > This NOTE appears because of our functions in `/src/include/samplers`
>> >> > where word `rand` appears a lot of times, for example
>> >> > `rand_point_generator()`.
>> >> >
>> >> > Best regards,
>> >> > Vissarion Fisikopoulos
>> >>
>> >> On Fri, 22 Mar 2019 at 22:03, Henrik Bengtsson
>> >> <henrik.bengtsson at gmail.com> wrote:
>> >> >
>> >> > Not a CRAN maintainer, but from my experience, it sounds like you're
>> >> > hitting some very unusual hiccup here - that's unfortunate.  I just
>> >> > had a look around at ftp://cran.r-project.org/incoming/ and your
>> >> > package is not there anymore. Just a wild guess but I wonder if your
>> >> > email reply back to CRAN ends up in their spam folders?
>> >> >
>> >> > BTW, what are the two NOTEs you're getting?  Maybe they're avoidable.
>> >> > Since packages with all OKs can go straight through the CRAN incoming
>> >> > checks and be published automatically (at least if the package is
>> >> > already on CRAN), I try to walk an extra mile just avoid NOTEs in my
>> >> > packages even if I know they're false positives.
>> >> >
>> >> > My $.02
>> >> >
>> >> > /Henrik
>> >> >
>> >> > On Fri, Mar 22, 2019 at 6:28 AM Vissarion Fisikopoulos
>> >> > <fisikop at gmail.com> wrote:
>> >> > >
>> >> > > Hello,
>> >> > >
>> >> > > we have resubmitted the package 'volesti'. I got the email and
>> >> > > confirmed submission. Later I got the confirmation email starting:
>> >> > > "The following package was uploaded to CRAN:..." and then the
>> email on
>> >> > > automated check complaining about the same 2 notes as in the
>> previous
>> >> > > submission. I answered (reply to all) explaining why those notes
>> are
>> >> > > false positives. Then no news for 9 days. Could you please update
>> us
>> >> > > on this.
>> >> > >
>> >> > > Best regards,
>> >> > > Vissarion
>> >> > >
>> >> > >
>> >> > > On Wed, 13 Mar 2019 at 10:15, ????? ?????? <tolis.chal at gmail.com>
>> >> wrote:
>> >> > > >
>> >> > > > Of course we will resubmit. Thank you all for the info.
>> >> > > >
>> >> > > > Chalkis Apostolos
>> >> > > >
>> >> > > > On Wed, 13 Mar 2019 at 10:05, Ma?lle SALMON via R-package-devel <
>> >> > > > r-package-devel at r-project.org> wrote:
>> >> > > >
>> >> > > > >
>> >> > > > >
>> >> > > > >
>> >> > > > > ---------- Forwarded message ----------
>> >> > > > > From: "Ma?lle SALMON" <maelle.salmon at yahoo.se>
>> >> > > > > To: Duncan Murdoch <murdoch.duncan at gmail.com>, Henrik
>> Bengtsson <
>> >> > > > > henrik.bengtsson at gmail.com>
>> >> > > > > Cc: r-package-devel at r-project.org
>> >> > > > > Bcc:
>> >> > > > > Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
>> >> > > > > Subject: Re: [R-pkg-devel] CRAN review
>> >> > > > >  Sorry, the link was removed (by my copy-pasting it wrongly):
>> >> > > > > https://itsalocke.com/cransays/articles/dashboard
>> >> > > > >
>> >> > > > >     Den onsdag 13 mars 2019 08:54:00 CET, Ma?lle SALMON via
>> >> > > > > R-package-devel <r-package-devel at r-project.org> skrev:
>> >> > > > >
>> >> > > > >   We at Locke Data have made an hourly updated dashboard based
>> on
>> >> the FTP
>> >> > > > > server
>> >> > > > > CRAN incoming dashboard ? cransays
>> >> > > > >
>> >> > > > > |
>> >> > > > > |
>> >> > > > > |  |
>> >> > > > > CRAN incoming dashboard ? cransays
>> >> > > > >
>> >> > > > >
>> >> > > > >  |
>> >> > > > >
>> >> > > > >  |
>> >> > > > >
>> >> > > > >  |
>> >> > > > >
>> >> > > > >
>> >> > > > >
>> >> > > > > We hope it makes data more accessible whilst reducing load on
>> the
>> >> FTP
>> >> > > > > server.
>> >> > > > > Ma?lle.
>> >> > > > >
>> >> > > > >     Den tisdag 12 mars 2019 21:37:12 CET, Henrik Bengtsson <
>> >> > > > > henrik.bengtsson at gmail.com> skrev:
>> >> > > > >
>> >> > > > >  You can also "follow" your package submission on the CRAN FTP
>> >> server:
>> >> > > > >
>> >> > > > >   ftp://cran.r-project.org/incoming/
>> >> > > > >
>> >> > > > > /Henrik
>> >> > > > >
>> >> > > > > On Tue, Mar 12, 2019 at 1:26 PM Duncan Murdoch <
>> >> murdoch.duncan at gmail.com>
>> >> > > > > wrote:
>> >> > > > > >
>> >> > > > > > On 12/03/2019 2:57 p.m., ????? ?????? wrote:
>> >> > > > > > > Dear all,
>> >> > > > > > >
>> >> > > > > > > We have submitted a package to CRAN in 25th of February and
>> >> we have
>> >> > > > > not got
>> >> > > > > > > a
>> >> > > > > > > positive or a negative answer for the submission since
>> then.
>> >> Is this
>> >> > > > > > > normal? Is
>> >> > > > > > > there any way to get informed for the review process?
>> >> > > > > >
>> >> > > > > > Did you get the two messages after submission (one to confirm
>> >> that you
>> >> > > > > > are the maintainer, the second to let you know the review has
>> >> started)?
>> >> > > > > > They'll both have subject lines like
>> >> > > > > >
>> >> > > > > > CRAN submission ....
>> >> > > > > >
>> >> > > > > >
>> >> > > > > > The first one will start out saying something like
>> >> > > > > > >
>> >> > > > > > > Dear Duncan Murdoch
>> >> > > > > > > Someone has submitted the package rgl to CRAN.
>> >> > > > > > > You are receiving this email to confirm the submission as
>> the
>> >> > > > > maintainer of
>> >> > > > > > > this package.
>> >> > > > > >
>> >> > > > > > and then ask you to confirm submission.
>> >> > > > > >
>> >> > > > > > The second one will start like
>> >> > > > > >
>> >> > > > > > > [This was generated from CRAN.R-project.org/submit.html]
>> >> > > > > > >
>> >> > > > > > > The following package was uploaded to CRAN:
>> >> > > > > > > ===========================================
>> >> > > > > > >
>> >> > > > > > > Package Information:
>> >> > > > > > > Package: rgl
>> >> > > > > >
>> >> > > > > > A while later you should get a third message about the
>> >> automatic checks.
>> >> > > > > >
>> >> > > > > > Duncan Murdoch
>> >> > > > > >
>> >> > > > > > ______________________________________________
>> >> > > > > > R-package-devel at r-project.org mailing list
>> >> > > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >> > > > >
>> >> > > > > ______________________________________________
>> >> > > > > R-package-devel at r-project.org mailing list
>> >> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >> > > > >     [[alternative HTML version deleted]]
>> >> > > > >
>> >> > > > > ______________________________________________
>> >> > > > > R-package-devel at r-project.org mailing list
>> >> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >> > > > >
>> >> > > > >         [[alternative HTML version deleted]]
>> >> > > > >
>> >> > > > >
>> >> > > > >
>> >> > > > >
>> >> > > > > ---------- Forwarded message ----------
>> >> > > > > From: "Ma?lle SALMON via R-package-devel" <
>> >> r-package-devel at r-project.org>
>> >> > > > > To: Duncan Murdoch <murdoch.duncan at gmail.com>, Henrik
>> Bengtsson <
>> >> > > > > henrik.bengtsson at gmail.com>
>> >> > > > > Cc: r-package-devel at r-project.org
>> >> > > > > Bcc:
>> >> > > > > Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
>> >> > > > > Subject: Re: [R-pkg-devel] CRAN review
>> >> > > > > ______________________________________________
>> >> > > > > R-package-devel at r-project.org mailing list
>> >> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >> > > > >
>> >> > > >
>> >> > > >         [[alternative HTML version deleted]]
>> >> > > >
>> >> > > > ______________________________________________
>> >> > > > R-package-devel at r-project.org mailing list
>> >> > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >> > >
>> >> > > ______________________________________________
>> >> > > R-package-devel at r-project.org mailing list
>> >> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >>
>> >> ______________________________________________
>> >> R-package-devel at r-project.org mailing list
>> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >>
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

	[[alternative HTML version deleted]]


From r@||@@tubner @end|ng |rom d@q@n@@com  Fri Mar 29 17:41:16 2019
From: r@||@@tubner @end|ng |rom d@q@n@@com (Ralf Stubner)
Date: Fri, 29 Mar 2019 17:41:16 +0100
Subject: [R-pkg-devel] CRAN review
In-Reply-To: <YT1PR01MB35485F764853EEA9CCD52C48BA5A0@YT1PR01MB3548.CANPRD01.PROD.OUTLOOK.COM>
References: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
 <6c203422-db18-f11b-7e01-4006ec39adff@gmail.com>
 <CAFDcVCQ2wgSTYJu_ZMdpJ1PRcvPcSZMOD4epE+zHp307w33xBg@mail.gmail.com>
 <mailman.3611.3047.1552463633.8486.r-package-devel@r-project.org>
 <mailman.3612.3048.1552464318.8486.r-package-devel@r-project.org>
 <CAMfvGJMSv-KGFcKyUHfPc5XYoHTuKYwvY3mp4R4APEoB0bYSvw@mail.gmail.com>
 <CAKa7CYMhBnsgLbQcLe3SRxVh-z4V=5CjeCCmKXQtw12nTgokgA@mail.gmail.com>
 <CAFDcVCTivRagC1eVYooyEU418web9b58QihSPju_6VmyDaeNmA@mail.gmail.com>
 <CAKa7CYM_0bDD7LEBko2+OdqfS2ROdb-3FaqThCn23Pw=RA=wgA@mail.gmail.com>
 <CAF8bMcZCg658ZGuhdKaTc-JVThH_JabcSL=EUeRk=CGTcvPWFg@mail.gmail.com>
 <CAF8bMcZF8Pcqzftw3XEFWez0QW3Fe-k2T8d5g5=4OED-j00Dhg@mail.gmail.com>
 <YT1PR01MB35485F764853EEA9CCD52C48BA5A0@YT1PR01MB3548.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <811f9c9b-5d1f-6132-b8ce-21176038eddf@daqana.com>

On 29.03.19 17:27, Maxime Turgeon wrote:
> Maybe I'm missing something, but if RcppEigen were the cause of the NOTE, wouldn't RcppEigen also get the same NOTE? However, it does not: https://cran.r-project.org/web/checks/check_results_RcppEigen.html
> 
> And for what it's worth, neither does BH: https://cran.r-project.org/web/checks/check_results_BH.html

Both RcppEigen and BH provide header only libraries which are only
compiled by packages making use of it. And the rand symbol is only
searched for in the resulting/compiled libraries.

Greetings
Ralf

-- 
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190329/5569102b/attachment.sig>

From wdun|@p @end|ng |rom t|bco@com  Fri Mar 29 17:42:55 2019
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Fri, 29 Mar 2019 09:42:55 -0700
Subject: [R-pkg-devel] CRAN review
In-Reply-To: <CAF8bMcYHYd=A=ZZrBpTV2bMZZs1sBN4g9YvXkzwMMGyYvxmJgw@mail.gmail.com>
References: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
 <6c203422-db18-f11b-7e01-4006ec39adff@gmail.com>
 <CAFDcVCQ2wgSTYJu_ZMdpJ1PRcvPcSZMOD4epE+zHp307w33xBg@mail.gmail.com>
 <mailman.3611.3047.1552463633.8486.r-package-devel@r-project.org>
 <mailman.3612.3048.1552464318.8486.r-package-devel@r-project.org>
 <CAMfvGJMSv-KGFcKyUHfPc5XYoHTuKYwvY3mp4R4APEoB0bYSvw@mail.gmail.com>
 <CAKa7CYMhBnsgLbQcLe3SRxVh-z4V=5CjeCCmKXQtw12nTgokgA@mail.gmail.com>
 <CAFDcVCTivRagC1eVYooyEU418web9b58QihSPju_6VmyDaeNmA@mail.gmail.com>
 <CAKa7CYM_0bDD7LEBko2+OdqfS2ROdb-3FaqThCn23Pw=RA=wgA@mail.gmail.com>
 <CAF8bMcZCg658ZGuhdKaTc-JVThH_JabcSL=EUeRk=CGTcvPWFg@mail.gmail.com>
 <CAF8bMcZF8Pcqzftw3XEFWez0QW3Fe-k2T8d5g5=4OED-j00Dhg@mail.gmail.com>
 <YT1PR01MB35485F764853EEA9CCD52C48BA5A0@YT1PR01MB3548.CANPRD01.PROD.OUTLOOK.COM>
 <CAF8bMcaOwtd0bYVxGsstwBAkuj05AAVZsYeEnd2-xHGmhY66Ag@mail.gmail.com>
 <CAF8bMcYHYd=A=ZZrBpTV2bMZZs1sBN4g9YvXkzwMMGyYvxmJgw@mail.gmail.com>
Message-ID: <CAF8bMcY9a6-oT3zzsj7aOqBOnO3oDC-3pERuxXjd4y2nqXB3yA@mail.gmail.com>

One can use 'g++ -E' to find the which include file is the culprit.  E.g.,

% g++ -c -E -I`R RHOME`/include -I`R RHOME`/site-library/Rcpp/include -I`R
RHOME`/site-library/RcppEigen/include -Iexternal/LPsolve_src/run_headers
-Iexternal/minimum_ellipsoid -Iinclude -Iinclude/volume
-Iinclude/generators -Iinclude/samplers -Iinclude/annealing
-Iinclude/convex_bodies -std=gnu++11 rotating.cpp | egrep '\<rand\>|^#
*[0-9]+' | grep -C 1 '\<rand\>'
# 315 "/usr/include/stdlib.h" 2 3 4
extern int rand (void) throw ();
# 1 "/usr/include/alloca.h" 1 3 4
--
# 114 "/usr/include/c++/4.8.2/cstdlib" 3
  using ::rand;
# 196 "/usr/include/c++/4.8.2/cstdlib" 3
--
# 5185 "/usr/include/c++/4.8.2/bits/stl_algo.h" 3
     + std::rand() % ((__i - __first) + 1);
# 5218 "/usr/include/c++/4.8.2/bits/stl_algo.h" 3
--
# 455
"/home/R/R-3.5.2/lib64/R/site-library/RcppEigen/include/Eigen/src/Core/MathFunctions.h"
    return x + (y-x) * Scalar(std::rand()) / Scalar(2147483647);
      offset = (std::size_t(std::rand()) * multiplier) / divisor;
    return Scalar((std::rand() >> shift) - offset);
# 689
"/home/R/R-3.5.2/lib64/R/site-library/RcppEigen/include/Eigen/src/Core/MathFunctions.h"
--
# 295
"/home/R/R-3.5.2/lib64/R/site-library/RcppEigen/include/Eigen/src/Core/arch/CUDA/Half.h"
    return x + (y-x) * half(float(std::rand()) / float(2147483647));
# 412 "/home/R/R-3.5.2/lib64/R/site-library/RcppEigen/include/Eigen/Core" 2

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Fri, Mar 29, 2019 at 9:37 AM William Dunlap <wdunlap at tibco.com> wrote:

> Oops, RcppEigen does contain compiled code, but its header files include
> much more code that doesn't get checked because it is not used in
> RcppEigen.so.
>
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
>
>
> On Fri, Mar 29, 2019 at 9:35 AM William Dunlap <wdunlap at tibco.com> wrote:
>
>> The check only looks at compiled code.  BH contains only headers, no
>> compiled code.
>>
>> Bill Dunlap
>> TIBCO Software
>> wdunlap tibco.com
>>
>>
>> On Fri, Mar 29, 2019 at 9:27 AM Maxime Turgeon <
>> maxime.turgeon at mail.mcgill.ca> wrote:
>>
>>> Hi Bill,
>>>
>>> Maybe I'm missing something, but if RcppEigen were the cause of the
>>> NOTE, wouldn't RcppEigen also get the same NOTE? However, it does not:
>>> https://cran.r-project.org/web/checks/check_results_RcppEigen.html
>>>
>>> And for what it's worth, neither does BH:
>>> https://cran.r-project.org/web/checks/check_results_BH.html
>>>
>>> Max
>>> ------------------------------
>>> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on
>>> behalf of William Dunlap <wdunlap at tibco.com>
>>> *Sent:* March 29, 2019 12:05 PM
>>> *To:* Vissarion Fisikopoulos
>>> *Cc:* R Package Development
>>> *Subject:* Re: [R-pkg-devel] CRAN review
>>>
>>> It looks like it is not boost but RcppEigen that has the call to
>>> std::rand() that volesti/src/rotating.cpp contains.
>>>
>>> RcppEigen/include/Eigen/src/Core/MathFunctions.h:
>>>   static inline Scalar run(const Scalar& x, const Scalar& y)
>>>   {
>>>     return x + (y-x) * Scalar(std::rand()) / Scalar(RAND_MAX);
>>>   }
>>>
>>>
>>> Bill Dunlap
>>> TIBCO Software
>>> wdunlap tibco.com
>>>
>>>
>>> On Fri, Mar 29, 2019 at 8:43 AM William Dunlap <wdunlap at tibco.com>
>>> wrote:
>>>
>>> > > Library lpSolveAPI uses rand() and srand() in lp_utils.c. We replace
>>> > > both functions with GetRNGstate(); PutRNGstate(); unif_rand(); from
>>> > > R?s internal random number generation routines as it is proposed in
>>> > > `Writing R Extensions`. Moreover if you run in folder `/src`:
>>> > > $ grep -r 'rand()'
>>> > > You just get:
>>> > > `utils.c:  range *= (LPSREAL) unif_rand();`
>>> > > which is our replacement. If you replace `rand()` with `srand` in
>>> grep
>>> > > search you get a null result.
>>> > > This NOTE appears because of our functions in `/src/include/samplers`
>>> > > where word `rand` appears a lot of times, for example
>>> > > `rand_point_generator()`.
>>> >
>>> > I don't think the note about using 'rand' comes from looking at strings
>>> > in the source code.  It is probably looking at undefined symbols in the
>>> > symbol table of the compiled and linked code with something like the
>>> > following
>>> >
>>> > % find volesti -iname "*o" | xargs nm -A -g --demangle | grep ' U ' |
>>> grep
>>> > rand
>>> > volesti/src/lp_solve/lp_rlp.o:                 U storevarandweight
>>> > volesti/src/lp_solve/lp_price.o:                 U rand_uniform
>>> > volesti/src/lp_solve/lp_utils.o:                 U unif_rand
>>> > volesti/src/lp_solve/lp_lib.o:                 U rand_uniform
>>> > volesti/src/rotating.o:                 U rand
>>> > volesti/src/volesti.so:                 U rand@@GLIBC_2.2.5
>>> > volesti/src/volesti.so:                 U unif_rand
>>> >
>>> > You will have to poke through the boost headers or docs to see how to
>>> avoid
>>> > using rand in volesti/src/rotating.cpp.
>>> >
>>> > Bill Dunlap
>>> > TIBCO Software
>>> > wdunlap tibco.com
>>> >
>>> >
>>> > On Fri, Mar 29, 2019 at 2:12 AM Vissarion Fisikopoulos <
>>> fisikop at gmail.com>
>>> > wrote:
>>> >
>>> >> Dear all,
>>> >>
>>> >> @Henrik: thanks a lot for your reply.
>>> >>
>>> >> I did one more submission (the third) and I am posting below my answer
>>> >> to the automatic cran email with 2 NOTES.
>>> >>
>>> >> Looking forward to your feedback.
>>> >>
>>> >> Best regards,
>>> >> Vissarion.
>>> >>
>>> >> On Fri, 29 Mar 2019 at 11:04, Vissarion Fisikopoulos <
>>> fisikop at gmail.com>
>>> >> wrote:
>>> >> >
>>> >> > Dear all,
>>> >> >
>>> >> > We got the results from the automated check for our package. There
>>> are
>>> >> > two NOTEs in both checks in Windows and Debian. We are sure that the
>>> >> > rejections are false positive, so with this e-mail we try to explain
>>> >> > why. Please find our explanations below.
>>> >> >
>>> >> > On Thu, 28 Mar 2019 at 16:40, <ligges at statistik.tu-dortmund.de>
>>> wrote:
>>> >> > >
>>> >> > > Dear maintainer,
>>> >> > >
>>> >> > > package volesti_0.0.0.tar.gz does not pass the incoming checks
>>> >> automatically, please see the following pre-tests:
>>> >> > > Windows: <
>>> >>
>>> https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/Windows/00check.log
>>> >> >
>>> >> > > Status: 2 NOTEs
>>> >> > > Debian: <
>>> >>
>>> https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/Debian/00check.log
>>> >> >
>>> >> > > Status: 2 NOTEs
>>> >> > >
>>> >> > >
>>> >> > >
>>> >> > > Please fix all problems and resubmit a fixed version via the
>>> webform.
>>> >> > > If you are not sure how to fix the problems shown, please ask for
>>> >> help on the R-package-devel mailing list:
>>> >> > > <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>> >> > > If you are fairly certain the rejection is a false positive,
>>> please
>>> >> reply-all to this message and explain.
>>> >> > >
>>> >> > > More details are given in the directory:
>>> >> > > <
>>> >>
>>> https://win-builder.r-project.org/incoming_pretest/volesti_0.0.0_20190328_151546/
>>> >> >
>>> >> > > The files will be removed after roughly 7 days.
>>> >> > >
>>> >> > > No strong reverse dependencies to be checked.
>>> >> > >
>>> >> > > Best regards,
>>> >> > > CRAN teams' auto-check service
>>> >> > > Flavor: r-devel-linux-x86_64-debian-gcc,
>>> r-devel-windows-ix86+x86_64
>>> >> > > Check: CRAN incoming feasibility, Result: NOTE
>>> >> > >   Maintainer: 'Vissarion Fisikopoulos <
>>> >> vissarion.fisikopoulos at gmail.com>'
>>> >> > >
>>> >> > >   New submission
>>> >> > >
>>> >> > >   Possibly mis-spelled words in DESCRIPTION:
>>> >> > >     Minkowski (9:17)
>>> >> > >     Polytopes (4:49)
>>> >> > >     Volesti (7:71)
>>> >> > >     polytopes (8:39, 10:83)
>>> >> > >     volesti (7:50)
>>> >> > >     zonotopes (9:44)
>>> >> > These words, except of 'volesti' (which is the name of our package),
>>> >> > describe geometrical concepts.
>>> >> >
>>> >> > > Flavor: r-devel-windows-ix86+x86_64
>>> >> > > Check: compiled code, Result: NOTE
>>> >> > >   File 'volesti/libs/i386/volesti.dll':
>>> >> > >     Found 'rand', possibly from 'rand' (C)
>>> >> > >       Object: 'rotating.o'
>>> >> > >   File 'volesti/libs/x64/volesti.dll':
>>> >> > >     Found 'rand', possibly from 'rand' (C)
>>> >> > >       Object: 'rotating.o'
>>> >> > >
>>> >> > >   Compiled code should not call entry points which might
>>> terminate R
>>> >> nor
>>> >> > >   write to stdout/stderr instead of to the console, nor use
>>> Fortran
>>> >> I/O
>>> >> > >   nor system RNGs.
>>> >> > >
>>> >> > >   See 'Writing portable packages' in the 'Writing R Extensions'
>>> >> manual.
>>> >> > >
>>> >> > > Flavor: r-devel-linux-x86_64-debian-gcc
>>> >> > > Check: compiled code, Result: NOTE
>>> >> > >   File 'volesti/libs/volesti.so':
>>> >> > >     Found 'rand', possibly from 'rand' (C)
>>> >> > >       Object: 'rotating.o'
>>> >> > >
>>> >> > >   Compiled code should not call entry points which might
>>> terminate R
>>> >> nor
>>> >> > >   write to stdout/stderr instead of to the console, nor use
>>> Fortran
>>> >> I/O
>>> >> > >   nor system RNGs.
>>> >> >
>>> >> > Library lpSolveAPI uses rand() and srand() in lp_utils.c. We replace
>>> >> > both functions with GetRNGstate(); PutRNGstate(); unif_rand(); from
>>> >> > R?s internal random number generation routines as it is proposed in
>>> >> > `Writing R Extensions`. Moreover if you run in folder `/src`:
>>> >> > $ grep -r 'rand()'
>>> >> > You just get:
>>> >> > `utils.c:  range *= (LPSREAL) unif_rand();`
>>> >> > which is our replacement. If you replace `rand()` with `srand` in
>>> grep
>>> >> > search you get a null result.
>>> >> > This NOTE appears because of our functions in
>>> `/src/include/samplers`
>>> >> > where word `rand` appears a lot of times, for example
>>> >> > `rand_point_generator()`.
>>> >> >
>>> >> > Best regards,
>>> >> > Vissarion Fisikopoulos
>>> >>
>>> >> On Fri, 22 Mar 2019 at 22:03, Henrik Bengtsson
>>> >> <henrik.bengtsson at gmail.com> wrote:
>>> >> >
>>> >> > Not a CRAN maintainer, but from my experience, it sounds like you're
>>> >> > hitting some very unusual hiccup here - that's unfortunate.  I just
>>> >> > had a look around at ftp://cran.r-project.org/incoming/ and your
>>> >> > package is not there anymore. Just a wild guess but I wonder if your
>>> >> > email reply back to CRAN ends up in their spam folders?
>>> >> >
>>> >> > BTW, what are the two NOTEs you're getting?  Maybe they're
>>> avoidable.
>>> >> > Since packages with all OKs can go straight through the CRAN
>>> incoming
>>> >> > checks and be published automatically (at least if the package is
>>> >> > already on CRAN), I try to walk an extra mile just avoid NOTEs in my
>>> >> > packages even if I know they're false positives.
>>> >> >
>>> >> > My $.02
>>> >> >
>>> >> > /Henrik
>>> >> >
>>> >> > On Fri, Mar 22, 2019 at 6:28 AM Vissarion Fisikopoulos
>>> >> > <fisikop at gmail.com> wrote:
>>> >> > >
>>> >> > > Hello,
>>> >> > >
>>> >> > > we have resubmitted the package 'volesti'. I got the email and
>>> >> > > confirmed submission. Later I got the confirmation email starting:
>>> >> > > "The following package was uploaded to CRAN:..." and then the
>>> email on
>>> >> > > automated check complaining about the same 2 notes as in the
>>> previous
>>> >> > > submission. I answered (reply to all) explaining why those notes
>>> are
>>> >> > > false positives. Then no news for 9 days. Could you please update
>>> us
>>> >> > > on this.
>>> >> > >
>>> >> > > Best regards,
>>> >> > > Vissarion
>>> >> > >
>>> >> > >
>>> >> > > On Wed, 13 Mar 2019 at 10:15, ????? ?????? <tolis.chal at gmail.com>
>>> >> wrote:
>>> >> > > >
>>> >> > > > Of course we will resubmit. Thank you all for the info.
>>> >> > > >
>>> >> > > > Chalkis Apostolos
>>> >> > > >
>>> >> > > > On Wed, 13 Mar 2019 at 10:05, Ma?lle SALMON via R-package-devel
>>> <
>>> >> > > > r-package-devel at r-project.org> wrote:
>>> >> > > >
>>> >> > > > >
>>> >> > > > >
>>> >> > > > >
>>> >> > > > > ---------- Forwarded message ----------
>>> >> > > > > From: "Ma?lle SALMON" <maelle.salmon at yahoo.se>
>>> >> > > > > To: Duncan Murdoch <murdoch.duncan at gmail.com>, Henrik
>>> Bengtsson <
>>> >> > > > > henrik.bengtsson at gmail.com>
>>> >> > > > > Cc: r-package-devel at r-project.org
>>> >> > > > > Bcc:
>>> >> > > > > Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
>>> >> > > > > Subject: Re: [R-pkg-devel] CRAN review
>>> >> > > > >  Sorry, the link was removed (by my copy-pasting it wrongly):
>>> >> > > > > https://itsalocke.com/cransays/articles/dashboard
>>> >> > > > >
>>> >> > > > >     Den onsdag 13 mars 2019 08:54:00 CET, Ma?lle SALMON via
>>> >> > > > > R-package-devel <r-package-devel at r-project.org> skrev:
>>> >> > > > >
>>> >> > > > >   We at Locke Data have made an hourly updated dashboard
>>> based on
>>> >> the FTP
>>> >> > > > > server
>>> >> > > > > CRAN incoming dashboard ? cransays
>>> >> > > > >
>>> >> > > > > |
>>> >> > > > > |
>>> >> > > > > |  |
>>> >> > > > > CRAN incoming dashboard ? cransays
>>> >> > > > >
>>> >> > > > >
>>> >> > > > >  |
>>> >> > > > >
>>> >> > > > >  |
>>> >> > > > >
>>> >> > > > >  |
>>> >> > > > >
>>> >> > > > >
>>> >> > > > >
>>> >> > > > > We hope it makes data more accessible whilst reducing load on
>>> the
>>> >> FTP
>>> >> > > > > server.
>>> >> > > > > Ma?lle.
>>> >> > > > >
>>> >> > > > >     Den tisdag 12 mars 2019 21:37:12 CET, Henrik Bengtsson <
>>> >> > > > > henrik.bengtsson at gmail.com> skrev:
>>> >> > > > >
>>> >> > > > >  You can also "follow" your package submission on the CRAN FTP
>>> >> server:
>>> >> > > > >
>>> >> > > > >   ftp://cran.r-project.org/incoming/
>>> >> > > > >
>>> >> > > > > /Henrik
>>> >> > > > >
>>> >> > > > > On Tue, Mar 12, 2019 at 1:26 PM Duncan Murdoch <
>>> >> murdoch.duncan at gmail.com>
>>> >> > > > > wrote:
>>> >> > > > > >
>>> >> > > > > > On 12/03/2019 2:57 p.m., ????? ?????? wrote:
>>> >> > > > > > > Dear all,
>>> >> > > > > > >
>>> >> > > > > > > We have submitted a package to CRAN in 25th of February
>>> and
>>> >> we have
>>> >> > > > > not got
>>> >> > > > > > > a
>>> >> > > > > > > positive or a negative answer for the submission since
>>> then.
>>> >> Is this
>>> >> > > > > > > normal? Is
>>> >> > > > > > > there any way to get informed for the review process?
>>> >> > > > > >
>>> >> > > > > > Did you get the two messages after submission (one to
>>> confirm
>>> >> that you
>>> >> > > > > > are the maintainer, the second to let you know the review
>>> has
>>> >> started)?
>>> >> > > > > > They'll both have subject lines like
>>> >> > > > > >
>>> >> > > > > > CRAN submission ....
>>> >> > > > > >
>>> >> > > > > >
>>> >> > > > > > The first one will start out saying something like
>>> >> > > > > > >
>>> >> > > > > > > Dear Duncan Murdoch
>>> >> > > > > > > Someone has submitted the package rgl to CRAN.
>>> >> > > > > > > You are receiving this email to confirm the submission as
>>> the
>>> >> > > > > maintainer of
>>> >> > > > > > > this package.
>>> >> > > > > >
>>> >> > > > > > and then ask you to confirm submission.
>>> >> > > > > >
>>> >> > > > > > The second one will start like
>>> >> > > > > >
>>> >> > > > > > > [This was generated from CRAN.R-project.org/submit.html]
>>> >> > > > > > >
>>> >> > > > > > > The following package was uploaded to CRAN:
>>> >> > > > > > > ===========================================
>>> >> > > > > > >
>>> >> > > > > > > Package Information:
>>> >> > > > > > > Package: rgl
>>> >> > > > > >
>>> >> > > > > > A while later you should get a third message about the
>>> >> automatic checks.
>>> >> > > > > >
>>> >> > > > > > Duncan Murdoch
>>> >> > > > > >
>>> >> > > > > > ______________________________________________
>>> >> > > > > > R-package-devel at r-project.org mailing list
>>> >> > > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> >> > > > >
>>> >> > > > > ______________________________________________
>>> >> > > > > R-package-devel at r-project.org mailing list
>>> >> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> >> > > > >     [[alternative HTML version deleted]]
>>> >> > > > >
>>> >> > > > > ______________________________________________
>>> >> > > > > R-package-devel at r-project.org mailing list
>>> >> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> >> > > > >
>>> >> > > > >         [[alternative HTML version deleted]]
>>> >> > > > >
>>> >> > > > >
>>> >> > > > >
>>> >> > > > >
>>> >> > > > > ---------- Forwarded message ----------
>>> >> > > > > From: "Ma?lle SALMON via R-package-devel" <
>>> >> r-package-devel at r-project.org>
>>> >> > > > > To: Duncan Murdoch <murdoch.duncan at gmail.com>, Henrik
>>> Bengtsson <
>>> >> > > > > henrik.bengtsson at gmail.com>
>>> >> > > > > Cc: r-package-devel at r-project.org
>>> >> > > > > Bcc:
>>> >> > > > > Date: Wed, 13 Mar 2019 07:56:45 +0000 (UTC)
>>> >> > > > > Subject: Re: [R-pkg-devel] CRAN review
>>> >> > > > > ______________________________________________
>>> >> > > > > R-package-devel at r-project.org mailing list
>>> >> > > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> >> > > > >
>>> >> > > >
>>> >> > > >         [[alternative HTML version deleted]]
>>> >> > > >
>>> >> > > > ______________________________________________
>>> >> > > > R-package-devel at r-project.org mailing list
>>> >> > > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> >> > >
>>> >> > > ______________________________________________
>>> >> > > R-package-devel at r-project.org mailing list
>>> >> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> >>
>>> >> ______________________________________________
>>> >> R-package-devel at r-project.org mailing list
>>> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> >>
>>> >
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>

	[[alternative HTML version deleted]]


From r@||@@tubner @end|ng |rom d@q@n@@com  Fri Mar 29 20:15:35 2019
From: r@||@@tubner @end|ng |rom d@q@n@@com (Ralf Stubner)
Date: Fri, 29 Mar 2019 20:15:35 +0100
Subject: [R-pkg-devel] CRAN review
In-Reply-To: <CAF8bMcZF8Pcqzftw3XEFWez0QW3Fe-k2T8d5g5=4OED-j00Dhg@mail.gmail.com>
References: <CAMfvGJOoOs0nmt2-_QQPxT0MhnJ+d5mYH2DeZSb5ztjsMSnoTg@mail.gmail.com>
 <6c203422-db18-f11b-7e01-4006ec39adff@gmail.com>
 <CAFDcVCQ2wgSTYJu_ZMdpJ1PRcvPcSZMOD4epE+zHp307w33xBg@mail.gmail.com>
 <mailman.3611.3047.1552463633.8486.r-package-devel@r-project.org>
 <mailman.3612.3048.1552464318.8486.r-package-devel@r-project.org>
 <CAMfvGJMSv-KGFcKyUHfPc5XYoHTuKYwvY3mp4R4APEoB0bYSvw@mail.gmail.com>
 <CAKa7CYMhBnsgLbQcLe3SRxVh-z4V=5CjeCCmKXQtw12nTgokgA@mail.gmail.com>
 <CAFDcVCTivRagC1eVYooyEU418web9b58QihSPju_6VmyDaeNmA@mail.gmail.com>
 <CAKa7CYM_0bDD7LEBko2+OdqfS2ROdb-3FaqThCn23Pw=RA=wgA@mail.gmail.com>
 <CAF8bMcZCg658ZGuhdKaTc-JVThH_JabcSL=EUeRk=CGTcvPWFg@mail.gmail.com>
 <CAF8bMcZF8Pcqzftw3XEFWez0QW3Fe-k2T8d5g5=4OED-j00Dhg@mail.gmail.com>
Message-ID: <a9b39db2-b27e-abe2-1190-9bee58e634c1@daqana.com>

On 29.03.19 17:05, William Dunlap wrote:
> It looks like it is not boost but RcppEigen that has the call to
> std::rand() that volesti/src/rotating.cpp contains.
> 
> RcppEigen/include/Eigen/src/Core/MathFunctions.h:
>   static inline Scalar run(const Scalar& x, const Scalar& y)
>   {
>     return x + (y-x) * Scalar(std::rand()) / Scalar(RAND_MAX);
>   }

The link between the two seems to be rounding.h which contains:

  // pick a random rotation
  MT R = MT::Random(n,n);

cheerio
ralf

-- 
Ralf Stubner
Senior Software Engineer / Trainer

daqana GmbH
Dortustra?e 48
14467 Potsdam

T: +49 331 23 61 93 11
F: +49 331 23 61 93 90
M: +49 162 20 91 196
Mail: ralf.stubner at daqana.com

Sitz: Potsdam
Register: AG Potsdam HRB 27966
Ust.-IdNr.: DE300072622
Gesch?ftsf?hrer: Dr.-Ing. Stefan Knirsch, Prof. Dr. Dr. Karl-Kuno Kunze


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20190329/8af4a0cd/attachment.sig>

From m@rk@hogue@chp @end|ng |rom gm@||@com  Sat Mar 30 19:53:34 2019
From: m@rk@hogue@chp @end|ng |rom gm@||@com (thorgamma)
Date: Sat, 30 Mar 2019 14:53:34 -0400
Subject: [R-pkg-devel] Error appearing only with check_win_devel() - could
 be ggplot2 R version?
Message-ID: <CAHPRF8cfSdHAvWDCfx2C+9TQy4zHZP3-kBmDWQEW0wr6NwN3bg@mail.gmail.com>

I have a plot example that runs fine on Windows, but in the windows check I
get the following message:

Warning: package 'ggplot2' was built under R version 3.7.0
> plot_spec_from_hist(photons_cs137_hist[1:16, ], "mR_h", "Example: Cs-137 with scatter")
Error in valid.units(units) : Invalid unit
Calls: <Anonymous> ... unit.c -> unit -> valid.unit -> structure -> valid.units


Could this be only happening because of the version ggplot2 is built
under in this test? I'm running the latest R version - 3.5.3.


Thanks,

Mark

	[[alternative HTML version deleted]]


From pedro@@ph@|o @end|ng |rom he|@|nk|@||  Sat Mar 30 22:55:48 2019
From: pedro@@ph@|o @end|ng |rom he|@|nk|@|| (Pedro J. Aphalo)
Date: Sat, 30 Mar 2019 23:55:48 +0200
Subject: [R-pkg-devel] 
 Error appearing only with check_win_devel() - could
 be ggplot2 R version?
In-Reply-To: <CAHPRF8cfSdHAvWDCfx2C+9TQy4zHZP3-kBmDWQEW0wr6NwN3bg@mail.gmail.com>
References: <CAHPRF8cfSdHAvWDCfx2C+9TQy4zHZP3-kBmDWQEW0wr6NwN3bg@mail.gmail.com>
Message-ID: <b44b7360-0066-2f44-e8fe-2f28d9881622@helsinki.fi>

My packages are getting the same error in some CRAN checks as well as 
ggplot2 itself. With my updated package 'ggpmisc' that I was planning to 
submit to CRAN I see the same in Winbuilder under R-devel but no error 
when checking with rhub.

For the 'ggplot2' failed checks see:

https://cran.r-project.org/web/checks/check_results_ggplot2.html

Pedro.

On 2019-03-30 20:53, thorgamma wrote:
> I have a plot example that runs fine on Windows, but in the windows check I
> get the following message:
>
> Warning: package 'ggplot2' was built under R version 3.7.0
>> plot_spec_from_hist(photons_cs137_hist[1:16, ], "mR_h", "Example: Cs-137 with scatter")
> Error in valid.units(units) : Invalid unit
> Calls: <Anonymous> ... unit.c -> unit -> valid.unit -> structure -> valid.units
>
>
> Could this be only happening because of the version ggplot2 is built
> under in this test? I'm running the latest R version - 3.5.3.
>
>
> Thanks,
>
> Mark
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
-- 
------------------------------------------------------------------------
Pedro J. Aphalo
University Lecturer, Principal Investigator
(Office 5605, Biocenter 3, Viikinkaari 1)

Department of Biosciences
Plant Biology
P.O. Box 65
00014 University of Helsinki
Finland

e-mail: pedro.aphalo at helsinki.fi <mailto:pedro.aphalo at helsinki.fi>
Tel. (mobile) +358 50 4150623
Tel. (office) +358 2941 57897

------------------------------------------------------------------------
*Web sites and blogs*
Web site (research group): http://blogs.helsinki.fi/senpep-blog/
Web site (own teaching): http://www.helsinki.fi/people/pedro.aphalo/
Web site (using R in photobiology): http://www.r4photobiology.info/
------------------------------------------------------------------------
*Societies*
UV4Plants <http://www.uv4plants.org/> (communications officer), ESP 
<http://www.photobiology.eu/> (member) SEB <http://www.sebiology.org/> 
(member), BES <http://www.britishecologicalsociety.org/> (member), SPPS 
<http://www.spps.fi/> (member), SMS 
<http://www.metsatieteellinenseura.fi/english> (member), TUG 
<http://tug.org/> (member), FOAS <http://www.foastat.org/> (member).
------------------------------------------------------------------------

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Sat Mar 30 22:59:56 2019
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Sat, 30 Mar 2019 21:59:56 +0000
Subject: [R-pkg-devel] 
 Error appearing only with check_win_devel() - could
 be ggplot2 R version?
In-Reply-To: <b44b7360-0066-2f44-e8fe-2f28d9881622@helsinki.fi>
References: <CAHPRF8cfSdHAvWDCfx2C+9TQy4zHZP3-kBmDWQEW0wr6NwN3bg@mail.gmail.com>
 <b44b7360-0066-2f44-e8fe-2f28d9881622@helsinki.fi>
Message-ID: <CABtg=Km950LX21YpwevcfQZZuRC9YEBVkKDUDx-_j3t6T5Vo+w@mail.gmail.com>

I think this is temporary and will go away once R-devel is built with
this: https://github.com/wch/r-source/commit/9542c3215a8f8cfee4a313b6c2fd03320e38e1de

Gabor


On Sat, Mar 30, 2019 at 9:56 PM Pedro J. Aphalo
<pedro.aphalo at helsinki.fi> wrote:
>
> My packages are getting the same error in some CRAN checks as well as
> ggplot2 itself. With my updated package 'ggpmisc' that I was planning to
> submit to CRAN I see the same in Winbuilder under R-devel but no error
> when checking with rhub.
>
> For the 'ggplot2' failed checks see:
>
> https://cran.r-project.org/web/checks/check_results_ggplot2.html
>
> Pedro.
>
> On 2019-03-30 20:53, thorgamma wrote:
> > I have a plot example that runs fine on Windows, but in the windows check I
> > get the following message:
> >
> > Warning: package 'ggplot2' was built under R version 3.7.0
> >> plot_spec_from_hist(photons_cs137_hist[1:16, ], "mR_h", "Example: Cs-137 with scatter")
> > Error in valid.units(units) : Invalid unit
> > Calls: <Anonymous> ... unit.c -> unit -> valid.unit -> structure -> valid.units
> >
> >
> > Could this be only happening because of the version ggplot2 is built
> > under in this test? I'm running the latest R version - 3.5.3.
> >
> >
> > Thanks,
> >
> > Mark
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> --
> ------------------------------------------------------------------------
> Pedro J. Aphalo
> University Lecturer, Principal Investigator
> (Office 5605, Biocenter 3, Viikinkaari 1)
>
> Department of Biosciences
> Plant Biology
> P.O. Box 65
> 00014 University of Helsinki
> Finland
>
> e-mail: pedro.aphalo at helsinki.fi <mailto:pedro.aphalo at helsinki.fi>
> Tel. (mobile) +358 50 4150623
> Tel. (office) +358 2941 57897
>
> ------------------------------------------------------------------------
> *Web sites and blogs*
> Web site (research group): http://blogs.helsinki.fi/senpep-blog/
> Web site (own teaching): http://www.helsinki.fi/people/pedro.aphalo/
> Web site (using R in photobiology): http://www.r4photobiology.info/
> ------------------------------------------------------------------------
> *Societies*
> UV4Plants <http://www.uv4plants.org/> (communications officer), ESP
> <http://www.photobiology.eu/> (member) SEB <http://www.sebiology.org/>
> (member), BES <http://www.britishecologicalsociety.org/> (member), SPPS
> <http://www.spps.fi/> (member), SMS
> <http://www.metsatieteellinenseura.fi/english> (member), TUG
> <http://tug.org/> (member), FOAS <http://www.foastat.org/> (member).
> ------------------------------------------------------------------------
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From w|n@tonch@ng1 @end|ng |rom gm@||@com  Sat Mar 30 23:11:19 2019
From: w|n@tonch@ng1 @end|ng |rom gm@||@com (Winston Chang)
Date: Sat, 30 Mar 2019 17:11:19 -0500
Subject: [R-pkg-devel] 
 Error appearing only with check_win_devel() - could
 be ggplot2 R version?
In-Reply-To: <CABtg=Km950LX21YpwevcfQZZuRC9YEBVkKDUDx-_j3t6T5Vo+w@mail.gmail.com>
References: <CAHPRF8cfSdHAvWDCfx2C+9TQy4zHZP3-kBmDWQEW0wr6NwN3bg@mail.gmail.com>
 <b44b7360-0066-2f44-e8fe-2f28d9881622@helsinki.fi>
 <CABtg=Km950LX21YpwevcfQZZuRC9YEBVkKDUDx-_j3t6T5Vo+w@mail.gmail.com>
Message-ID: <CAFOpNVHnCS8fdeZgKHfKJDvFt6aGVujKNr5K7mTjCeWp4f2c7A@mail.gmail.com>

On Sat, Mar 30, 2019 at 5:06 PM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:

> I think this is temporary and will go away once R-devel is built with
> this:
> https://github.com/wch/r-source/commit/9542c3215a8f8cfee4a313b6c2fd03320e38e1de
>
>
Before that commit (76285), I was getting a different error when I
submitted a package that used ggplot2 (and therefore grid). Now, I'm
getting the same "invalid unit" error that the others have mentioned,
with 76300
on Debian, though not with 76300 Windows.

-Winston

	[[alternative HTML version deleted]]


