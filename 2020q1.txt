From |ro@o @end|ng |rom un@|@edu@co  Mon Jan  6 22:38:44 2020
From: |ro@o @end|ng |rom un@|@edu@co (Fernando Roa)
Date: Mon, 6 Jan 2020 18:38:44 -0300
Subject: [R-pkg-devel] pandoc lua filter error with win devel check
Message-ID: <CA+fi=+k68YqsDt6noW2OSO1EVdqB6nfrQV-Ybua5SGk4VoAy4A@mail.gmail.com>

Hi people,

I got an error in vignettes after checking as win. devel. with
devtools (check_win_devel):

pandoc.exe: unrecognized option `--lua-filter=refs/multiple-bibliographies.lua'

May I ignore it?

Best,


-- 
Fernando Roa

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Jan  6 23:17:57 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 06 Jan 2020 14:17:57 -0800
Subject: [R-pkg-devel] pandoc lua filter error with win devel check
In-Reply-To: <CA+fi=+k68YqsDt6noW2OSO1EVdqB6nfrQV-Ybua5SGk4VoAy4A@mail.gmail.com>
References: <CA+fi=+k68YqsDt6noW2OSO1EVdqB6nfrQV-Ybua5SGk4VoAy4A@mail.gmail.com>
Message-ID: <525ED07E-E161-44F4-9BBD-DC71D66FBC33@dcn.davis.ca.us>

Pandoc is not part of the standard R documentation tooling... you must be doing something special, and doing something special makes getting a package accepted more challenging. Perhaps if you were more specific you might get a more specific response.

On January 6, 2020 1:38:44 PM PST, Fernando Roa <froao at unal.edu.co> wrote:
>Hi people,
>
>I got an error in vignettes after checking as win. devel. with
>devtools (check_win_devel):
>
>pandoc.exe: unrecognized option
>`--lua-filter=refs/multiple-bibliographies.lua'
>
>May I ignore it?
>
>Best,

-- 
Sent from my phone. Please excuse my brevity.


From |ro@o @end|ng |rom un@|@edu@co  Mon Jan  6 23:26:14 2020
From: |ro@o @end|ng |rom un@|@edu@co (Fernando Roa)
Date: Mon, 6 Jan 2020 19:26:14 -0300
Subject: [R-pkg-devel] pandoc lua filter error with win devel check
In-Reply-To: <525ED07E-E161-44F4-9BBD-DC71D66FBC33@dcn.davis.ca.us>
References: <CA+fi=+k68YqsDt6noW2OSO1EVdqB6nfrQV-Ybua5SGk4VoAy4A@mail.gmail.com>
 <525ED07E-E161-44F4-9BBD-DC71D66FBC33@dcn.davis.ca.us>
Message-ID: <CA+fi=+kB4uQd6-TCbiKcGcghcg9RGTKUr+DtjrFoGfdTjoGk-g@mail.gmail.com>

Hi
Rmarkdown supports lua filters. So I guess the rmarkdown and or pandoc in
win devel are not updated.

Best,


On Mon, Jan 6, 2020, 7:18 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> Pandoc is not part of the standard R documentation tooling... you must be
> doing something special, and doing something special makes getting a
> package accepted more challenging. Perhaps if you were more specific you
> might get a more specific response.
>
> On January 6, 2020 1:38:44 PM PST, Fernando Roa <froao at unal.edu.co> wrote:
> >Hi people,
> >
> >I got an error in vignettes after checking as win. devel. with
> >devtools (check_win_devel):
> >
> >pandoc.exe: unrecognized option
> >`--lua-filter=refs/multiple-bibliographies.lua'
> >
> >May I ignore it?
> >
> >Best,
>
> --
> Sent from my phone. Please excuse my brevity.
>

	[[alternative HTML version deleted]]


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Tue Jan  7 00:03:06 2020
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Mon, 6 Jan 2020 23:03:06 +0000
Subject: [R-pkg-devel] pandoc lua filter error with win devel check
In-Reply-To: <CA+fi=+kB4uQd6-TCbiKcGcghcg9RGTKUr+DtjrFoGfdTjoGk-g@mail.gmail.com>
References: <CA+fi=+k68YqsDt6noW2OSO1EVdqB6nfrQV-Ybua5SGk4VoAy4A@mail.gmail.com>
 <525ED07E-E161-44F4-9BBD-DC71D66FBC33@dcn.davis.ca.us>,
 <CA+fi=+kB4uQd6-TCbiKcGcghcg9RGTKUr+DtjrFoGfdTjoGk-g@mail.gmail.com>
Message-ID: <b02e074929454b71b4032657f1a9dcdb@umanitoba.ca>

There was a discussion on this list last year about which version of pandoc is available on CRAN machines, without a definite answer: https://stat.ethz.ch/pipermail/r-package-devel/2019q2/004126.html


But I think it's completely possible that win-builder doesn't have pandoc 2.0, which is required for lua-filters AFAIK. On your side of things, the best you can do is to ensure that you add

"SystemRequirements: pandoc (>= 2.0)" (or something like that) to your DESCRIPTION file, and add a corresponding justification to your submission comments.


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Fernando Roa <froao at unal.edu.co>
Sent: January 6, 2020 4:26:14 PM
To: Jeff Newmiller; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] pandoc lua filter error with win devel check

Hi
Rmarkdown supports lua filters. So I guess the rmarkdown and or pandoc in
win devel are not updated.

Best,


On Mon, Jan 6, 2020, 7:18 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> Pandoc is not part of the standard R documentation tooling... you must be
> doing something special, and doing something special makes getting a
> package accepted more challenging. Perhaps if you were more specific you
> might get a more specific response.
>
> On January 6, 2020 1:38:44 PM PST, Fernando Roa <froao at unal.edu.co> wrote:
> >Hi people,
> >
> >I got an error in vignettes after checking as win. devel. with
> >devtools (check_win_devel):
> >
> >pandoc.exe: unrecognized option
> >`--lua-filter=refs/multiple-bibliographies.lua'
> >
> >May I ignore it?
> >
> >Best,
>
> --
> Sent from my phone. Please excuse my brevity.
>

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From chr|@t|@n@henn|g @end|ng |rom un|bo@|t  Tue Jan  7 14:54:38 2020
From: chr|@t|@n@henn|g @end|ng |rom un|bo@|t (Christian Martin Hennig)
Date: Tue, 7 Jan 2020 13:54:38 +0000
Subject: [R-pkg-devel] rhub, docker and Bioconductor
Message-ID: <d02b852f-117f-c144-ab75-45426044486c@unibo.it>

Hi there,

I'm trying to track down some errors and issues of my fpc package. As I can't reproduce any of these on my machine, I'm using rhub and docker.

I'm getting Bioconductor related issues with both

  local_check_linux("fpc_2.2-3.tar.gz", image = "rhub/debian-clang-devel")

and

rhub::check("fpc_2.2-3.tar.gz", platform = "debian-clang-devel")

namely locally:

>
source('https://bioconductor.org/biocLite.R')
Error: With R version 3.5 or greater, install Bioconductor packages using BiocManager; see https://bioconductor.org/install
Execution halted
Error in run(bash, c(file.path(wd, "rhub-linux.sh"), args), echo = TRUE,  :
  System command error

...and on rhub:

91<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L91>#> Error: package or namespace load failed for 'BiocManager':

92<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L92>#> .onAttach failed in attachNamespace() for 'BiocManager', details:

93<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L93>#> call: if (version[, 1:2] != version) return(sprintf("version '%s' must have two components, e.g., '3.7'",

94<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L94>#> error: argument is of length zero

95<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L95>#> Error: loading failed

96<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L96>#> Execution halted

97<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L97>#> ERROR: loading failed

(To be totally honest, I'm not even sure whether the latter rhub issue doesn't refer to the local docker thing as well, because this was linked from an R-hub builder PREPERROR email, it also mentions docker, and all the time indications don't make it unambiguously clear to what build they refer.)

Not sure what to do about this. Are there any other options apart from rhub/docker to get wiser about my errors and issues (error on debian-clang in a routine that shows nothing suspicious on my machine, additional issues  ATLAS<https://www.stats.ox.ac.uk/pub/bdr/Rblas/ATLAS/fpc.out> MKL<https://www.stats.ox.ac.uk/pub/bdr/Rblas/MKL/fpc.out> noLD<https://www.stats.ox.ac.uk/pub/bdr/noLD/fpc.out> OpenBLAS)?<https://www.stats.ox.ac.uk/pub/bdr/Rblas/OpenBLAS/fpc.out>

Yesterday I was able to check a prabclus noLD error on rhub, but no luck yet with fpc.

Thanks a lot,

Christian

--
Christian Hennig
Dipartimento di Scienze Statistiche "Paolo Fortunati",
Universita di Bologna, phone +39 05120 98163
christian.hennig at unibo.it<mailto:christian.hennig at unibo.it>

	[[alternative HTML version deleted]]


From chr|@t|@n@henn|g @end|ng |rom un|bo@|t  Tue Jan  7 14:59:01 2020
From: chr|@t|@n@henn|g @end|ng |rom un|bo@|t (Christian Martin Hennig)
Date: Tue, 7 Jan 2020 13:59:01 +0000
Subject: [R-pkg-devel] rhub, docker and Bioconductor
In-Reply-To: <d02b852f-117f-c144-ab75-45426044486c@unibo.it>
References: <d02b852f-117f-c144-ab75-45426044486c@unibo.it>
Message-ID: <75200363-7bfa-3b35-f7ae-f493f404db39@unibo.it>

I should maybe add that I'm not even sure why I need Bioconductor, the 
package has:

Imports: MASS, cluster, mclust, flexmix, prabclus, class, diptest, 
robustbase, kernlab, grDevices, graphics, methods, stats, utils, parallel
Suggests: tclust, pdfCluster, EMMIXskew, mvtnorm

Christian

On 1/7/20 2:54 PM, Christian Martin Hennig wrote:
> Hi there,
>
> I'm trying to track down some errors and issues of my fpc package. As I can't reproduce any of these on my machine, I'm using rhub and docker.
>
> I'm getting Bioconductor related issues with both
>
>    local_check_linux("fpc_2.2-3.tar.gz", image = "rhub/debian-clang-devel")
>
> and
>
> rhub::check("fpc_2.2-3.tar.gz", platform = "debian-clang-devel")
>
> namely locally:
>
> source('https://bioconductor.org/biocLite.R')
> Error: With R version 3.5 or greater, install Bioconductor packages using BiocManager; see https://bioconductor.org/install
> Execution halted
> Error in run(bash, c(file.path(wd, "rhub-linux.sh"), args), echo = TRUE,  :
>    System command error
>
> ...and on rhub:
>
> 91<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L91>#> Error: package or namespace load failed for 'BiocManager':
>
> 92<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L92>#> .onAttach failed in attachNamespace() for 'BiocManager', details:
>
> 93<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L93>#> call: if (version[, 1:2] != version) return(sprintf("version '%s' must have two components, e.g., '3.7'",
>
> 94<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L94>#> error: argument is of length zero
>
> 95<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L95>#> Error: loading failed
>
> 96<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L96>#> Execution halted
>
> 97<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L97>#> ERROR: loading failed
>
> (To be totally honest, I'm not even sure whether the latter rhub issue doesn't refer to the local docker thing as well, because this was linked from an R-hub builder PREPERROR email, it also mentions docker, and all the time indications don't make it unambiguously clear to what build they refer.)
>
> Not sure what to do about this. Are there any other options apart from rhub/docker to get wiser about my errors and issues (error on debian-clang in a routine that shows nothing suspicious on my machine, additional issues  ATLAS<https://www.stats.ox.ac.uk/pub/bdr/Rblas/ATLAS/fpc.out> MKL<https://www.stats.ox.ac.uk/pub/bdr/Rblas/MKL/fpc.out> noLD<https://www.stats.ox.ac.uk/pub/bdr/noLD/fpc.out> OpenBLAS)?<https://www.stats.ox.ac.uk/pub/bdr/Rblas/OpenBLAS/fpc.out>
>
> Yesterday I was able to check a prabclus noLD error on rhub, but no luck yet with fpc.
>
> Thanks a lot,
>
> Christian
>
> --
> Christian Hennig
> Dipartimento di Scienze Statistiche "Paolo Fortunati",
> Universita di Bologna, phone +39 05120 98163
> christian.hennig at unibo.it<mailto:christian.hennig at unibo.it>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Christian Hennig
Dipartimento di Scienze Statistiche "Paolo Fortunati",
Universita di Bologna, phone +39 05120 98163
christian.hennig at unibo.it


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Jan  7 15:06:27 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 7 Jan 2020 14:06:27 +0000
Subject: [R-pkg-devel] rhub, docker and Bioconductor
In-Reply-To: <75200363-7bfa-3b35-f7ae-f493f404db39@unibo.it>
References: <d02b852f-117f-c144-ab75-45426044486c@unibo.it>
 <75200363-7bfa-3b35-f7ae-f493f404db39@unibo.it>
Message-ID: <CABtg=Kk+jwyqz9wGWUAV=mEpONEV=LXCjp-G053iwri_8tLNiw@mail.gmail.com>

It is an R-hub bug: https://github.com/r-hub/rhub/issues/318

Gabor

On Tue, Jan 7, 2020 at 2:05 PM Christian Martin Hennig
<christian.hennig at unibo.it> wrote:
>
> I should maybe add that I'm not even sure why I need Bioconductor, the
> package has:
>
> Imports: MASS, cluster, mclust, flexmix, prabclus, class, diptest,
> robustbase, kernlab, grDevices, graphics, methods, stats, utils, parallel
> Suggests: tclust, pdfCluster, EMMIXskew, mvtnorm
>
> Christian
>
> On 1/7/20 2:54 PM, Christian Martin Hennig wrote:
> > Hi there,
> >
> > I'm trying to track down some errors and issues of my fpc package. As I can't reproduce any of these on my machine, I'm using rhub and docker.
> >
> > I'm getting Bioconductor related issues with both
> >
> >    local_check_linux("fpc_2.2-3.tar.gz", image = "rhub/debian-clang-devel")
> >
> > and
> >
> > rhub::check("fpc_2.2-3.tar.gz", platform = "debian-clang-devel")
> >
> > namely locally:
> >
> > source('https://bioconductor.org/biocLite.R')
> > Error: With R version 3.5 or greater, install Bioconductor packages using BiocManager; see https://bioconductor.org/install
> > Execution halted
> > Error in run(bash, c(file.path(wd, "rhub-linux.sh"), args), echo = TRUE,  :
> >    System command error
> >
> > ...and on rhub:
> >
> > 91<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L91>#> Error: package or namespace load failed for 'BiocManager':
> >
> > 92<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L92>#> .onAttach failed in attachNamespace() for 'BiocManager', details:
> >
> > 93<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L93>#> call: if (version[, 1:2] != version) return(sprintf("version '%s' must have two components, e.g., '3.7'",
> >
> > 94<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L94>#> error: argument is of length zero
> >
> > 95<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L95>#> Error: loading failed
> >
> > 96<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L96>#> Execution halted
> >
> > 97<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L97>#> ERROR: loading failed
> >
> > (To be totally honest, I'm not even sure whether the latter rhub issue doesn't refer to the local docker thing as well, because this was linked from an R-hub builder PREPERROR email, it also mentions docker, and all the time indications don't make it unambiguously clear to what build they refer.)
> >
> > Not sure what to do about this. Are there any other options apart from rhub/docker to get wiser about my errors and issues (error on debian-clang in a routine that shows nothing suspicious on my machine, additional issues  ATLAS<https://www.stats.ox.ac.uk/pub/bdr/Rblas/ATLAS/fpc.out> MKL<https://www.stats.ox.ac.uk/pub/bdr/Rblas/MKL/fpc.out> noLD<https://www.stats.ox.ac.uk/pub/bdr/noLD/fpc.out> OpenBLAS)?<https://www.stats.ox.ac.uk/pub/bdr/Rblas/OpenBLAS/fpc.out>
> >
> > Yesterday I was able to check a prabclus noLD error on rhub, but no luck yet with fpc.
> >
> > Thanks a lot,
> >
> > Christian
> >
> > --
> > Christian Hennig
> > Dipartimento di Scienze Statistiche "Paolo Fortunati",
> > Universita di Bologna, phone +39 05120 98163
> > christian.hennig at unibo.it<mailto:christian.hennig at unibo.it>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
> Christian Hennig
> Dipartimento di Scienze Statistiche "Paolo Fortunati",
> Universita di Bologna, phone +39 05120 98163
> christian.hennig at unibo.it
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From chr|@t|@n@henn|g @end|ng |rom un|bo@|t  Tue Jan  7 15:32:27 2020
From: chr|@t|@n@henn|g @end|ng |rom un|bo@|t (Christian Martin Hennig)
Date: Tue, 7 Jan 2020 14:32:27 +0000
Subject: [R-pkg-devel] rhub, docker and Bioconductor
In-Reply-To: <CABtg=Kk+jwyqz9wGWUAV=mEpONEV=LXCjp-G053iwri_8tLNiw@mail.gmail.com>
References: <d02b852f-117f-c144-ab75-45426044486c@unibo.it>
 <75200363-7bfa-3b35-f7ae-f493f404db39@unibo.it>
 <CABtg=Kk+jwyqz9wGWUAV=mEpONEV=LXCjp-G053iwri_8tLNiw@mail.gmail.com>
Message-ID: <3b3bf616-8748-6911-836e-4de9d8f63001@unibo.it>

That's good to know. I'm still at a loss what to do though. How are you 
checking your packages on systems that are not available to you, other 
than using rhub?

Chances are if something from Bioconductor is required by one of the 
packages that I require, I can't get rid of it, right?

Thanks,

Christian

On 1/7/20 3:06 PM, G?bor Cs?rdi wrote:
> It is an R-hub bug: https://github.com/r-hub/rhub/issues/318
>
> Gabor
>
> On Tue, Jan 7, 2020 at 2:05 PM Christian Martin Hennig
> <christian.hennig at unibo.it> wrote:
>> I should maybe add that I'm not even sure why I need Bioconductor, the
>> package has:
>>
>> Imports: MASS, cluster, mclust, flexmix, prabclus, class, diptest,
>> robustbase, kernlab, grDevices, graphics, methods, stats, utils, parallel
>> Suggests: tclust, pdfCluster, EMMIXskew, mvtnorm
>>
>> Christian
>>
>> On 1/7/20 2:54 PM, Christian Martin Hennig wrote:
>>> Hi there,
>>>
>>> I'm trying to track down some errors and issues of my fpc package. As I can't reproduce any of these on my machine, I'm using rhub and docker.
>>>
>>> I'm getting Bioconductor related issues with both
>>>
>>>     local_check_linux("fpc_2.2-3.tar.gz", image = "rhub/debian-clang-devel")
>>>
>>> and
>>>
>>> rhub::check("fpc_2.2-3.tar.gz", platform = "debian-clang-devel")
>>>
>>> namely locally:
>>>
>>> source('https://bioconductor.org/biocLite.R')
>>> Error: With R version 3.5 or greater, install Bioconductor packages using BiocManager; see https://bioconductor.org/install
>>> Execution halted
>>> Error in run(bash, c(file.path(wd, "rhub-linux.sh"), args), echo = TRUE,  :
>>>     System command error
>>>
>>> ...and on rhub:
>>>
>>> 91<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L91>#> Error: package or namespace load failed for 'BiocManager':
>>>
>>> 92<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L92>#> .onAttach failed in attachNamespace() for 'BiocManager', details:
>>>
>>> 93<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L93>#> call: if (version[, 1:2] != version) return(sprintf("version '%s' must have two components, e.g., '3.7'",
>>>
>>> 94<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L94>#> error: argument is of length zero
>>>
>>> 95<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L95>#> Error: loading failed
>>>
>>> 96<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L96>#> Execution halted
>>>
>>> 97<https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L97>#> ERROR: loading failed
>>>
>>> (To be totally honest, I'm not even sure whether the latter rhub issue doesn't refer to the local docker thing as well, because this was linked from an R-hub builder PREPERROR email, it also mentions docker, and all the time indications don't make it unambiguously clear to what build they refer.)
>>>
>>> Not sure what to do about this. Are there any other options apart from rhub/docker to get wiser about my errors and issues (error on debian-clang in a routine that shows nothing suspicious on my machine, additional issues  ATLAS<https://www.stats.ox.ac.uk/pub/bdr/Rblas/ATLAS/fpc.out> MKL<https://www.stats.ox.ac.uk/pub/bdr/Rblas/MKL/fpc.out> noLD<https://www.stats.ox.ac.uk/pub/bdr/noLD/fpc.out> OpenBLAS)?<https://www.stats.ox.ac.uk/pub/bdr/Rblas/OpenBLAS/fpc.out>
>>>
>>> Yesterday I was able to check a prabclus noLD error on rhub, but no luck yet with fpc.
>>>
>>> Thanks a lot,
>>>
>>> Christian
>>>
>>> --
>>> Christian Hennig
>>> Dipartimento di Scienze Statistiche "Paolo Fortunati",
>>> Universita di Bologna, phone +39 05120 98163
>>> christian.hennig at unibo.it<mailto:christian.hennig at unibo.it>
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> --
>> Christian Hennig
>> Dipartimento di Scienze Statistiche "Paolo Fortunati",
>> Universita di Bologna, phone +39 05120 98163
>> christian.hennig at unibo.it
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Christian Hennig
Dipartimento di Scienze Statistiche "Paolo Fortunati",
Universita di Bologna, phone +39 05120 98163
christian.hennig at unibo.it


From @ergue|@@oko| @end|ng |rom gm@||@com  Tue Jan  7 15:49:45 2020
From: @ergue|@@oko| @end|ng |rom gm@||@com (Serguei Sokol)
Date: Tue, 7 Jan 2020 15:49:45 +0100
Subject: [R-pkg-devel] suggestion: conda for third-party software
Message-ID: <7669d6fb-6715-05b1-88e6-af1b542d9df3@gmail.com>

Best wishes for 2020!

I would like to suggest a new feature for R package management. Its aim 
is to enable package developers and end-users to rely on conda ( 
https://docs.conda.io/en/latest/ ) for managing third-party software 
(TPS) on major platforms: linux64, win64 and osx64. Currently, many R 
packages include TPS as part of them thus bloating their sizes and often 
duplicating files on a given system.? And even when TPS is not included 
in an R package but is just installed on a system, it is not so obvious 
to get the right path to it. Sometimes pkg-config helps but it is not 
always present.

So, the new feature would be to let R package developers to write in 
DESCRIPTION/SystemRequirements field something like 
'conda:boost-cpp>=1.71' where 'boost-cpp' is an example of a conda 
package and '>=1.71' is an optional version requirement. Having this 
could allow install.packages() to install TPS on a testing CRAN machine 
or on an end-user's one. (There is just one line to execute in a shell: 
conda install <pkg-name>. It will install the package itself as well as 
all its dependencies).

To my mind, this feature would have the following advantages:
 ?- on-disk size economy as the same TPS does not have to be included in 
R package itself and can be shared with other language wrappers, e.g. 
Python;
 ?- an easy flag configuring in Makevars as paths to TPS will be well 
known in advance;
 ?- CRAN machines could test packages relying on a wide panel of TPS 
without bothering with their manual installation;
 ?- TPS installation can become transparent for the end-user on major 
platforms;

Note that even R is part of conda ( 
https://anaconda.org/conda-forge/r-base ), it is not mandatory to use 
the conda's R version for this feature. Here, conda is just meant to 
facilitate access to TPS. However, a minimal requirement is obviously to 
have conda itself.

Does it look reasonable? appealing?
Best,
Serguei.


From br|@nk@||@t@ @end|ng |rom gm@||@com  Tue Jan  7 15:48:47 2020
From: br|@nk@||@t@ @end|ng |rom gm@||@com (brian knaus)
Date: Tue, 7 Jan 2020 06:48:47 -0800
Subject: [R-pkg-devel] rhub, docker and Bioconductor
In-Reply-To: <3b3bf616-8748-6911-836e-4de9d8f63001@unibo.it>
References: <d02b852f-117f-c144-ab75-45426044486c@unibo.it>
 <75200363-7bfa-3b35-f7ae-f493f404db39@unibo.it>
 <CABtg=Kk+jwyqz9wGWUAV=mEpONEV=LXCjp-G053iwri_8tLNiw@mail.gmail.com>
 <3b3bf616-8748-6911-836e-4de9d8f63001@unibo.it>
Message-ID: <CAEp5mpAHVf3vQqNHS9rRqD3nnd96QJMh+enBaD_1roxTU5ZikA@mail.gmail.com>

I was tracking down problems with my package yesterday that were specific
to r-devel and I had trouble reproducing the errors. I believe the issue is
that the rhub and the docker/rocker r-devel were not using the most recent
version of r-devel. My solution was to add r-devel to my travis ci.

https://towardsdatascience.com/travis-ci-for-r-advanced-guide-719cb2d9e0e5

This allowed me to reproduce the errors.

Brian

On Tue, Jan 7, 2020 at 6:35 AM Christian Martin Hennig <
christian.hennig at unibo.it> wrote:

> That's good to know. I'm still at a loss what to do though. How are you
> checking your packages on systems that are not available to you, other
> than using rhub?
>
> Chances are if something from Bioconductor is required by one of the
> packages that I require, I can't get rid of it, right?
>
> Thanks,
>
> Christian
>
> On 1/7/20 3:06 PM, G?bor Cs?rdi wrote:
> > It is an R-hub bug: https://github.com/r-hub/rhub/issues/318
> >
> > Gabor
> >
> > On Tue, Jan 7, 2020 at 2:05 PM Christian Martin Hennig
> > <christian.hennig at unibo.it> wrote:
> >> I should maybe add that I'm not even sure why I need Bioconductor, the
> >> package has:
> >>
> >> Imports: MASS, cluster, mclust, flexmix, prabclus, class, diptest,
> >> robustbase, kernlab, grDevices, graphics, methods, stats, utils,
> parallel
> >> Suggests: tclust, pdfCluster, EMMIXskew, mvtnorm
> >>
> >> Christian
> >>
> >> On 1/7/20 2:54 PM, Christian Martin Hennig wrote:
> >>> Hi there,
> >>>
> >>> I'm trying to track down some errors and issues of my fpc package. As
> I can't reproduce any of these on my machine, I'm using rhub and docker.
> >>>
> >>> I'm getting Bioconductor related issues with both
> >>>
> >>>     local_check_linux("fpc_2.2-3.tar.gz", image =
> "rhub/debian-clang-devel")
> >>>
> >>> and
> >>>
> >>> rhub::check("fpc_2.2-3.tar.gz", platform = "debian-clang-devel")
> >>>
> >>> namely locally:
> >>>
> >>> source('https://bioconductor.org/biocLite.R')
> >>> Error: With R version 3.5 or greater, install Bioconductor packages
> using BiocManager; see https://bioconductor.org/install
> >>> Execution halted
> >>> Error in run(bash, c(file.path(wd, "rhub-linux.sh"), args), echo =
> TRUE,  :
> >>>     System command error
> >>>
> >>> ...and on rhub:
> >>>
> >>> 91<
> https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L91>#>
> Error: package or namespace load failed for 'BiocManager':
> >>>
> >>> 92<
> https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L92>#>
> .onAttach failed in attachNamespace() for 'BiocManager', details:
> >>>
> >>> 93<
> https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L93>#>
> call: if (version[, 1:2] != version) return(sprintf("version '%s' must have
> two components, e.g., '3.7'",
> >>>
> >>> 94<
> https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L94>#>
> error: argument is of length zero
> >>>
> >>> 95<
> https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L95>#>
> Error: loading failed
> >>>
> >>> 96<
> https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L96>#>
> Execution halted
> >>>
> >>> 97<
> https://builder.r-hub.io/status/fpc_2.2-3.tar.gz-2492f95fc1c94fcbbff4d6f47cb423f8#L97>#>
> ERROR: loading failed
> >>>
> >>> (To be totally honest, I'm not even sure whether the latter rhub issue
> doesn't refer to the local docker thing as well, because this was linked
> from an R-hub builder PREPERROR email, it also mentions docker, and all the
> time indications don't make it unambiguously clear to what build they
> refer.)
> >>>
> >>> Not sure what to do about this. Are there any other options apart from
> rhub/docker to get wiser about my errors and issues (error on debian-clang
> in a routine that shows nothing suspicious on my machine, additional
> issues  ATLAS<https://www.stats.ox.ac.uk/pub/bdr/Rblas/ATLAS/fpc.out> MKL<
> https://www.stats.ox.ac.uk/pub/bdr/Rblas/MKL/fpc.out> noLD<
> https://www.stats.ox.ac.uk/pub/bdr/noLD/fpc.out> OpenBLAS)?<
> https://www.stats.ox.ac.uk/pub/bdr/Rblas/OpenBLAS/fpc.out>
> >>>
> >>> Yesterday I was able to check a prabclus noLD error on rhub, but no
> luck yet with fpc.
> >>>
> >>> Thanks a lot,
> >>>
> >>> Christian
> >>>
> >>> --
> >>> Christian Hennig
> >>> Dipartimento di Scienze Statistiche "Paolo Fortunati",
> >>> Universita di Bologna, phone +39 05120 98163
> >>> christian.hennig at unibo.it<mailto:christian.hennig at unibo.it>
> >>>
> >>>        [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >> --
> >> Christian Hennig
> >> Dipartimento di Scienze Statistiche "Paolo Fortunati",
> >> Universita di Bologna, phone +39 05120 98163
> >> christian.hennig at unibo.it
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
> Christian Hennig
> Dipartimento di Scienze Statistiche "Paolo Fortunati",
> Universita di Bologna, phone +39 05120 98163
> christian.hennig at unibo.it
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From kev|nu@hey @end|ng |rom gm@||@com  Tue Jan  7 20:47:28 2020
From: kev|nu@hey @end|ng |rom gm@||@com (Kevin Ushey)
Date: Tue, 7 Jan 2020 11:47:28 -0800
Subject: [R-pkg-devel] suggestion: conda for third-party software
In-Reply-To: <7669d6fb-6715-05b1-88e6-af1b542d9df3@gmail.com>
References: <7669d6fb-6715-05b1-88e6-af1b542d9df3@gmail.com>
Message-ID: <CAJXgQP1DNh-gtUio3FM=RxqoJJVoeFpxaJFxDnsStdD_asz5hA@mail.gmail.com>

The newest version of reticulate does something very similar: R
packages can declare their Python package dependencies in the
Config/reticulate field of a DESCRIPTION file, and reticulate can read
and use those dependencies to provision a Python environment for the
user when requested (currently using Miniconda).

Similarly, rather than having this part of SystemRequirements, package
authors could declare these in a separate field called e.g.
Config/conda. Then, you could have an R package that knows how to read
and parse these configuration requests, and install those packages for
the user.

That said, maintaining a Conda installation and its environments is
non-trivial, and things do not always work as expected when mixing
Conda applications with non-Conda applications. Most notably, Conda
installations bundle their own copies of libraries; e.g. the C++
standard library, Qt, OpenSSL, and so on. If an application tries to
mix and match both system-provided and Conda-provided libraries in the
same process, bad things often happen. This was still the
lowest-friction way forward for us with reticulate, but it's worth
being aware that Conda is not a total panacea.

Best,
Kevin

On Tue, Jan 7, 2020 at 6:50 AM Serguei Sokol <serguei.sokol at gmail.com> wrote:
>
> Best wishes for 2020!
>
> I would like to suggest a new feature for R package management. Its aim
> is to enable package developers and end-users to rely on conda (
> https://docs.conda.io/en/latest/ ) for managing third-party software
> (TPS) on major platforms: linux64, win64 and osx64. Currently, many R
> packages include TPS as part of them thus bloating their sizes and often
> duplicating files on a given system.  And even when TPS is not included
> in an R package but is just installed on a system, it is not so obvious
> to get the right path to it. Sometimes pkg-config helps but it is not
> always present.
>
> So, the new feature would be to let R package developers to write in
> DESCRIPTION/SystemRequirements field something like
> 'conda:boost-cpp>=1.71' where 'boost-cpp' is an example of a conda
> package and '>=1.71' is an optional version requirement. Having this
> could allow install.packages() to install TPS on a testing CRAN machine
> or on an end-user's one. (There is just one line to execute in a shell:
> conda install <pkg-name>. It will install the package itself as well as
> all its dependencies).
>
> To my mind, this feature would have the following advantages:
>   - on-disk size economy as the same TPS does not have to be included in
> R package itself and can be shared with other language wrappers, e.g.
> Python;
>   - an easy flag configuring in Makevars as paths to TPS will be well
> known in advance;
>   - CRAN machines could test packages relying on a wide panel of TPS
> without bothering with their manual installation;
>   - TPS installation can become transparent for the end-user on major
> platforms;
>
> Note that even R is part of conda (
> https://anaconda.org/conda-forge/r-base ), it is not mandatory to use
> the conda's R version for this feature. Here, conda is just meant to
> facilitate access to TPS. However, a minimal requirement is obviously to
> have conda itself.
>
> Does it look reasonable? appealing?
> Best,
> Serguei.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Jan  7 22:19:47 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 8 Jan 2020 00:19:47 +0300
Subject: [R-pkg-devel] rhub, docker and Bioconductor
In-Reply-To: <d02b852f-117f-c144-ab75-45426044486c@unibo.it>
References: <d02b852f-117f-c144-ab75-45426044486c@unibo.it>
Message-ID: <20200108001947.36adf679@Tarkus>

On Tue, 7 Jan 2020 13:54:38 +0000
Christian Martin Hennig <christian.hennig at unibo.it> wrote:

> Are there any other options apart from rhub/docker to get wiser about
> my errors and issues (error on debian-clang in a routine that shows
> nothing suspicious on my machine

I cannot answer your original questions, but I can offer some advice on
the problems uncovered by package checks:

> covinv <- try(solve(m))
> if (class(covinv) != "try-error")

In R-devel, matrices are now also arrays [*]:

>> matrix objects now also inherit from class "array", namely, e.g.,
>> class(diag(1)) is c("matrix", "array") which invalidates code
>> assuming that length(class(obj)) == 1, an incorrect assumption that
>> is less frequently fulfilled now.

Use !inherits(convinv, 'try-error') instead.

> additional issues
> ATLAS<https://www.stats.ox.ac.uk/pub/bdr/Rblas/ATLAS/fpc.out>
> MKL<https://www.stats.ox.ac.uk/pub/bdr/Rblas/MKL/fpc.out>
> noLD<https://www.stats.ox.ac.uk/pub/bdr/noLD/fpc.out>
> OpenBLAS)?<https://www.stats.ox.ac.uk/pub/bdr/Rblas/OpenBLAS/fpc.out>

These mostly seem to be concerned with the package startup message from
the mclust package. Try wrapping the calls to library(mclust) into
suppressPackageStartupMessages()?

As for the numbers being different between .Rout.save and actual test
results in ATLAS/MKL/noLD/OpenBLAS tests despite set.seed() being used,
I am not sure what could be done. RNGversion() might help, but this
could also be caused by differences in mclust version, in which case
the result might just be impossible to reproduce.

-- 
Best regards,
Ivan

[*] https://stat.ethz.ch/R-manual/R-devel/doc/html/NEWS.html
Link should be valid until R-4.0.0 is released.


From @ergue|@@oko| @end|ng |rom gm@||@com  Wed Jan  8 07:42:39 2020
From: @ergue|@@oko| @end|ng |rom gm@||@com (Sokol Serguei)
Date: Wed, 8 Jan 2020 07:42:39 +0100
Subject: [R-pkg-devel] suggestion: conda for third-party software
In-Reply-To: <CAJXgQP1DNh-gtUio3FM=RxqoJJVoeFpxaJFxDnsStdD_asz5hA@mail.gmail.com>
References: <7669d6fb-6715-05b1-88e6-af1b542d9df3@gmail.com>
 <CAJXgQP1DNh-gtUio3FM=RxqoJJVoeFpxaJFxDnsStdD_asz5hA@mail.gmail.com>
Message-ID: <d622e026-6e12-c09f-3962-007c5a66b03f@gmail.com>

Thanks for this hint.

Le 07/01/2020 ? 20:47, Kevin Ushey a ?crit?:
> The newest version of reticulate does something very similar: R
> packages can declare their Python package dependencies in the
> Config/reticulate field of a DESCRIPTION file, and reticulate can read
> and use those dependencies to provision a Python environment for the
> user when requested (currently using Miniconda).

If miniconda is used, does it mean that not only Python but any conda 
package can be indicated in dependency ?

And another question, do you know if miniconda is installed on testing 
CRAN machines? (Without this I cannot see how your packages with conda 
dependencies could be tested during their submission.)

Best,

Serguei.

>
> Similarly, rather than having this part of SystemRequirements, package
> authors could declare these in a separate field called e.g.
> Config/conda. Then, you could have an R package that knows how to read
> and parse these configuration requests, and install those packages for
> the user.
>
> That said, maintaining a Conda installation and its environments is
> non-trivial, and things do not always work as expected when mixing
> Conda applications with non-Conda applications. Most notably, Conda
> installations bundle their own copies of libraries; e.g. the C++
> standard library, Qt, OpenSSL, and so on. If an application tries to
> mix and match both system-provided and Conda-provided libraries in the
> same process, bad things often happen. This was still the
> lowest-friction way forward for us with reticulate, but it's worth
> being aware that Conda is not a total panacea.
>
> Best,
> Kevin
>
> On Tue, Jan 7, 2020 at 6:50 AM Serguei Sokol <serguei.sokol at gmail.com> wrote:
>> Best wishes for 2020!
>>
>> I would like to suggest a new feature for R package management. Its aim
>> is to enable package developers and end-users to rely on conda (
>> https://docs.conda.io/en/latest/ ) for managing third-party software
>> (TPS) on major platforms: linux64, win64 and osx64. Currently, many R
>> packages include TPS as part of them thus bloating their sizes and often
>> duplicating files on a given system.  And even when TPS is not included
>> in an R package but is just installed on a system, it is not so obvious
>> to get the right path to it. Sometimes pkg-config helps but it is not
>> always present.
>>
>> So, the new feature would be to let R package developers to write in
>> DESCRIPTION/SystemRequirements field something like
>> 'conda:boost-cpp>=1.71' where 'boost-cpp' is an example of a conda
>> package and '>=1.71' is an optional version requirement. Having this
>> could allow install.packages() to install TPS on a testing CRAN machine
>> or on an end-user's one. (There is just one line to execute in a shell:
>> conda install <pkg-name>. It will install the package itself as well as
>> all its dependencies).
>>
>> To my mind, this feature would have the following advantages:
>>    - on-disk size economy as the same TPS does not have to be included in
>> R package itself and can be shared with other language wrappers, e.g.
>> Python;
>>    - an easy flag configuring in Makevars as paths to TPS will be well
>> known in advance;
>>    - CRAN machines could test packages relying on a wide panel of TPS
>> without bothering with their manual installation;
>>    - TPS installation can become transparent for the end-user on major
>> platforms;
>>
>> Note that even R is part of conda (
>> https://anaconda.org/conda-forge/r-base ), it is not mandatory to use
>> the conda's R version for this feature. Here, conda is just meant to
>> facilitate access to TPS. However, a minimal requirement is obviously to
>> have conda itself.
>>
>> Does it look reasonable? appealing?
>> Best,
>> Serguei.
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Jan  8 08:50:07 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 8 Jan 2020 10:50:07 +0300
Subject: [R-pkg-devel] suggestion: conda for third-party software
In-Reply-To: <7669d6fb-6715-05b1-88e6-af1b542d9df3@gmail.com>
References: <7669d6fb-6715-05b1-88e6-af1b542d9df3@gmail.com>
Message-ID: <20200108105007.388df9d8@parabola>

On Tue, 7 Jan 2020 15:49:45 +0100
Serguei Sokol <serguei.sokol at gmail.com> wrote:

> Currently, many R packages include TPS as part of them thus bloating
> their sizes and often duplicating files on a given system.? And even
> when TPS is not included in an R package but is just installed on a
> system, it is not so obvious to get the right path to it. Sometimes
> pkg-config helps but it is not always present.

I agree that making a package depend on a third-party library means
finding oneself in a bit of a pickle. A really popular library like
cURL could be "just" depended upon (for the price of some problems when
building on Windows). A really small (e.g. 3 source files) and rarely
updated (just once last year) library like liborigin could "just" be
bundled (but the package maintainer would have to constantly watch out
for new versions of the library). Finding that the bundled version of a
network-facing library in an R package (e.g. libuv in httpuv) is several
minor versions out of date is always a bit scary, even if it turns out
that no major security flaws have been found in that version (just a few
low-probability resource leaks, one unlikely NULL pointer dereference
and some portability problems). The road to dependency hell is paved
with intentions of code reuse.

> So, the new feature would be to let R package developers to write in 
> DESCRIPTION/SystemRequirements field something like 
> 'conda:boost-cpp>=1.71' where 'boost-cpp' is an example of a conda 
> package and '>=1.71' is an optional version requirement.

While I appreciate the effort behind Anaconda, I would hate to see it
being *required* to depend on third-party binaries compiled by a
fourth-party (am I counting my parties right?) when there's already a
copy installed and available via means the user trusts more (e.g. via
GNU/Linux distro package, or Homebrew on macOS, or just a copy sitting
in /usr/local installed manually from source). In this regard, a
separate field like "Config/conda" suggested by Kevin Ushey sounds like
a good idea: if one wants to use Anaconda, the field is there. If one
doesn't, one can just ignore it and provide the necessary dependencies
in a different way.

-- 
Best regards,
Ivan


From @ergue|@@oko| @end|ng |rom gm@||@com  Wed Jan  8 09:51:13 2020
From: @ergue|@@oko| @end|ng |rom gm@||@com (Serguei Sokol)
Date: Wed, 8 Jan 2020 09:51:13 +0100
Subject: [R-pkg-devel] suggestion: conda for third-party software
In-Reply-To: <20200108105007.388df9d8@parabola>
References: <7669d6fb-6715-05b1-88e6-af1b542d9df3@gmail.com>
 <20200108105007.388df9d8@parabola>
Message-ID: <847fd48b-8b86-fe18-affe-0ad5c1215307@gmail.com>

Le 08/01/2020 ? 08:50, Ivan Krylov a ?crit?:
> On Tue, 7 Jan 2020 15:49:45 +0100
> Serguei Sokol <serguei.sokol at gmail.com> wrote:
> 
>> Currently, many R packages include TPS as part of them thus bloating
>> their sizes and often duplicating files on a given system.? And even
>> when TPS is not included in an R package but is just installed on a
>> system, it is not so obvious to get the right path to it. Sometimes
>> pkg-config helps but it is not always present.
> 
> I agree that making a package depend on a third-party library means
> finding oneself in a bit of a pickle. A really popular library like
> cURL could be "just" depended upon (for the price of some problems when
> building on Windows). A really small (e.g. 3 source files) and rarely
> updated (just once last year) library like liborigin could "just" be
> bundled (but the package maintainer would have to constantly watch out
> for new versions of the library). Finding that the bundled version of a
> network-facing library in an R package (e.g. libuv in httpuv) is several
> minor versions out of date is always a bit scary, even if it turns out
> that no major security flaws have been found in that version (just a few
> low-probability resource leaks, one unlikely NULL pointer dereference
> and some portability problems). The road to dependency hell is paved
> with intentions of code reuse.
> 
>> So, the new feature would be to let R package developers to write in
>> DESCRIPTION/SystemRequirements field something like
>> 'conda:boost-cpp>=1.71' where 'boost-cpp' is an example of a conda
>> package and '>=1.71' is an optional version requirement.
> 
> While I appreciate the effort behind Anaconda, I would hate to see it
> being *required* to depend on third-party binaries compiled by a
> fourth-party (am I counting my parties right?) when there's already a
> copy installed and available via means the user trusts more (e.g. via
> GNU/Linux distro package, or Homebrew on macOS, or just a copy sitting
> in /usr/local installed manually from source). In this regard, a
> separate field like "Config/conda" suggested by Kevin Ushey sounds like
> a good idea: if one wants to use Anaconda, the field is there. If one
> doesn't, one can just ignore it and provide the necessary dependencies
> in a different way.
The same would apply for my proposition: if you want, you use 
conda:something if not you do like before. But anyway, I don't make a 
campaign for 'conda:' tag in SystemRequirements. Kevin's Config/conda 
solution seems to be sufficient for this issue. Just, I was not aware 
that it was already there.

Best,
Serguei.


From mon@uur2010 @end|ng |rom y@hoo@com  Wed Jan  8 13:48:23 2020
From: mon@uur2010 @end|ng |rom y@hoo@com (MONSUUR OLAWALE)
Date: Wed, 8 Jan 2020 12:48:23 +0000 (UTC)
Subject: [R-pkg-devel] Significant warnings during package checks
References: <630678106.8447677.1578487703840.ref@mail.yahoo.com>
Message-ID: <630678106.8447677.1578487703840@mail.yahoo.com>

Hi R-package-devel team, 

I submitted my package on CRAN and below errors and warnings seemed to have appeared in the during the automatic check but that did not actually appear when I compile. Any suggestions on how this problem could be resolved?

  *   checking whether package BASiNET can be installed ? [6s/5s] WARNING
Found the following significant warnings:
Warning: 'rgl_init' failed, running with rgl.useNULL = TRUE

  *   Warning in rgl.init(initValue, onlyNULL) :
RGL: unable to open X11 display
Warning: 'rgl_init' failed, running with rgl.useNULL = TRUE

Thank you as I anticipate your kind response,
MA


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jan  8 15:37:54 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 8 Jan 2020 09:37:54 -0500
Subject: [R-pkg-devel] Significant warnings during package checks
In-Reply-To: <630678106.8447677.1578487703840@mail.yahoo.com>
References: <630678106.8447677.1578487703840.ref@mail.yahoo.com>
 <630678106.8447677.1578487703840@mail.yahoo.com>
Message-ID: <6204d685-d230-34a5-dee1-b72bb9a5cdae@gmail.com>

On 08/01/2020 7:48 a.m., MONSUUR OLAWALE via R-package-devel wrote:
> Hi R-package-devel team,
> 
> I submitted my package on CRAN and below errors and warnings seemed to have appeared in the during the automatic check but that did not actually appear when I compile. Any suggestions on how this problem could be resolved?
> 
>    *   checking whether package BASiNET can be installed ? [6s/5s] WARNING
> Found the following significant warnings:
> Warning: 'rgl_init' failed, running with rgl.useNULL = TRUE
> 
>    *   Warning in rgl.init(initValue, onlyNULL) :
> RGL: unable to open X11 display
> Warning: 'rgl_init' failed, running with rgl.useNULL = TRUE
> 

It appears that you are trying to open an rgl display.  This will happen 
automatically if you load rgl without first specifying that you don't 
need a display. (You do that by setting option(rgl.useNULL = TRUE).

What sort of dependency on rgl does your package have?

Duncan Murdoch


From kev|nu@hey @end|ng |rom gm@||@com  Wed Jan  8 17:34:14 2020
From: kev|nu@hey @end|ng |rom gm@||@com (Kevin Ushey)
Date: Wed, 8 Jan 2020 08:34:14 -0800
Subject: [R-pkg-devel] suggestion: conda for third-party software
In-Reply-To: <d622e026-6e12-c09f-3962-007c5a66b03f@gmail.com>
References: <7669d6fb-6715-05b1-88e6-af1b542d9df3@gmail.com>
 <CAJXgQP1DNh-gtUio3FM=RxqoJJVoeFpxaJFxDnsStdD_asz5hA@mail.gmail.com>
 <d622e026-6e12-c09f-3962-007c5a66b03f@gmail.com>
Message-ID: <CAJXgQP2UJzopZPF+p5e5VNnqEjHE7SwAshTjW=h3Bw7p+e3hNQ@mail.gmail.com>

On Tue, Jan 7, 2020 at 10:42 PM Sokol Serguei <serguei.sokol at gmail.com> wrote:
>
> Thanks for this hint.
>
> Le 07/01/2020 ? 20:47, Kevin Ushey a ?crit :
> > The newest version of reticulate does something very similar: R
> > packages can declare their Python package dependencies in the
> > Config/reticulate field of a DESCRIPTION file, and reticulate can read
> > and use those dependencies to provision a Python environment for the
> > user when requested (currently using Miniconda).
>
> If miniconda is used, does it mean that not only Python but any conda
> package can be indicated in dependency ?

In theory yes, but reticulate only accepts Python package dependencies
since its primary goal is interoperation with Python.

> And another question, do you know if miniconda is installed on testing
> CRAN machines? (Without this I cannot see how your packages with conda
> dependencies could be tested during their submission.)

I don't think so. I can't speak for CRAN, but their time is precious
and it seems unlikely to me that they would be willing to expend the
time needed to maintain Conda installations across their fleet of CRAN
machines.

Packages using Miniconda in this way could still run their tests on
different types of infrastructure, though (e.g. Travis CI).

> Best,
>
> Serguei.
>
> >
> > Similarly, rather than having this part of SystemRequirements, package
> > authors could declare these in a separate field called e.g.
> > Config/conda. Then, you could have an R package that knows how to read
> > and parse these configuration requests, and install those packages for
> > the user.
> >
> > That said, maintaining a Conda installation and its environments is
> > non-trivial, and things do not always work as expected when mixing
> > Conda applications with non-Conda applications. Most notably, Conda
> > installations bundle their own copies of libraries; e.g. the C++
> > standard library, Qt, OpenSSL, and so on. If an application tries to
> > mix and match both system-provided and Conda-provided libraries in the
> > same process, bad things often happen. This was still the
> > lowest-friction way forward for us with reticulate, but it's worth
> > being aware that Conda is not a total panacea.
> >
> > Best,
> > Kevin
> >
> > On Tue, Jan 7, 2020 at 6:50 AM Serguei Sokol <serguei.sokol at gmail.com> wrote:
> >> Best wishes for 2020!
> >>
> >> I would like to suggest a new feature for R package management. Its aim
> >> is to enable package developers and end-users to rely on conda (
> >> https://docs.conda.io/en/latest/ ) for managing third-party software
> >> (TPS) on major platforms: linux64, win64 and osx64. Currently, many R
> >> packages include TPS as part of them thus bloating their sizes and often
> >> duplicating files on a given system.  And even when TPS is not included
> >> in an R package but is just installed on a system, it is not so obvious
> >> to get the right path to it. Sometimes pkg-config helps but it is not
> >> always present.
> >>
> >> So, the new feature would be to let R package developers to write in
> >> DESCRIPTION/SystemRequirements field something like
> >> 'conda:boost-cpp>=1.71' where 'boost-cpp' is an example of a conda
> >> package and '>=1.71' is an optional version requirement. Having this
> >> could allow install.packages() to install TPS on a testing CRAN machine
> >> or on an end-user's one. (There is just one line to execute in a shell:
> >> conda install <pkg-name>. It will install the package itself as well as
> >> all its dependencies).
> >>
> >> To my mind, this feature would have the following advantages:
> >>    - on-disk size economy as the same TPS does not have to be included in
> >> R package itself and can be shared with other language wrappers, e.g.
> >> Python;
> >>    - an easy flag configuring in Makevars as paths to TPS will be well
> >> known in advance;
> >>    - CRAN machines could test packages relying on a wide panel of TPS
> >> without bothering with their manual installation;
> >>    - TPS installation can become transparent for the end-user on major
> >> platforms;
> >>
> >> Note that even R is part of conda (
> >> https://anaconda.org/conda-forge/r-base ), it is not mandatory to use
> >> the conda's R version for this feature. Here, conda is just meant to
> >> facilitate access to TPS. However, a minimal requirement is obviously to
> >> have conda itself.
> >>
> >> Does it look reasonable? appealing?
> >> Best,
> >> Serguei.
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>


From |ro@o @end|ng |rom un@|@edu@co  Wed Jan  8 18:59:07 2020
From: |ro@o @end|ng |rom un@|@edu@co (Fernando Roa)
Date: Wed, 8 Jan 2020 14:59:07 -0300
Subject: [R-pkg-devel] pandoc lua filter error with win devel check
In-Reply-To: <b02e074929454b71b4032657f1a9dcdb@umanitoba.ca>
References: <CA+fi=+k68YqsDt6noW2OSO1EVdqB6nfrQV-Ybua5SGk4VoAy4A@mail.gmail.com>
 <525ED07E-E161-44F4-9BBD-DC71D66FBC33@dcn.davis.ca.us>
 <CA+fi=+kB4uQd6-TCbiKcGcghcg9RGTKUr+DtjrFoGfdTjoGk-g@mail.gmail.com>
 <b02e074929454b71b4032657f1a9dcdb@umanitoba.ca>
Message-ID: <CA+fi=+mjbM4TqE2KZ4_9JjD=kKBtLz-jgwXTpAk2GOEMsS3WaQ@mail.gmail.com>

Hi,
I added SystemRequirements: pandoc (>= 2.0) to DESCRIPTION as you
suggested; submission failed,
the automatic check of package submission to CRAN had the error I got
before with check_win_devel:

"pandoc.exe: unrecognized option
`--lua-filter=refs/multiple-bibliographies.lua'

Error: processing vignette 'index.Rmd' failed with diagnostics:
pandoc document conversion failed with error 2"

So, I am not sure what would be the next step for submitting.

Related info:

Vignette failure because pandoc ver. < 2 in Windows-R-Devel. Pandoc (>2)
needed for multiple bibliographies in vignette (with lua filter), see also:

https://stat.ethz.ch/pipermail/r-package-devel/2019q2/004127.html
https://stat.ethz.ch/pipermail/r-package-devel/2020q1/004814.html

https://cran.r-project.org/web/packages/rmarkdown/vignettes/lua-filters.html
https://pandoc.org/lua-filters.html

https://github.com/jgm/pandoc/releases (pandoc builds for every OS)

Best,


On Mon, Jan 6, 2020 at 8:03 PM Max Turgeon <Max.Turgeon at umanitoba.ca> wrote:

> There was a discussion on this list last year about which version of
> pandoc is available on CRAN machines, without a definite answer:
> https://stat.ethz.ch/pipermail/r-package-devel/2019q2/004126.html
>
>
> But I think it's completely possible that win-builder doesn't have pandoc
> 2.0, which is required for lua-filters AFAIK. On your side of things, the
> best you can do is to ensure that you add
> "SystemRequirements: pandoc (>= 2.0)" (or something like that) to your
> DESCRIPTION file, and add a corresponding justification to your submission
> comments.
>
>
> Max Turgeon
> Assistant Professor
> Department of Statistics
> Department of Computer Science
> University of Manitoba
> maxturgeon.ca
>
>
> ------------------------------
> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on behalf
> of Fernando Roa <froao at unal.edu.co>
> *Sent:* January 6, 2020 4:26:14 PM
> *To:* Jeff Newmiller; r-package-devel at r-project.org
> *Subject:* Re: [R-pkg-devel] pandoc lua filter error with win devel check
>
> Hi
> Rmarkdown supports lua filters. So I guess the rmarkdown and or pandoc in
> win devel are not updated.
>
> Best,
>
>
> On Mon, Jan 6, 2020, 7:18 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> wrote:
>
> > Pandoc is not part of the standard R documentation tooling... you must be
> > doing something special, and doing something special makes getting a
> > package accepted more challenging. Perhaps if you were more specific you
> > might get a more specific response.
> >
> > On January 6, 2020 1:38:44 PM PST, Fernando Roa <froao at unal.edu.co>
> wrote:
> > >Hi people,
> > >
> > >I got an error in vignettes after checking as win. devel. with
> > >devtools (check_win_devel):
> > >
> > >pandoc.exe: unrecognized option
> > >`--lua-filter=refs/multiple-bibliographies.lua'
> > >
> > >May I ignore it?
> > >
> > >Best,
> >
> > --
> > Sent from my phone. Please excuse my brevity.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Fernando Roa

	[[alternative HTML version deleted]]


From chr|@t|@n@henn|g @end|ng |rom un|bo@|t  Wed Jan  8 19:02:16 2020
From: chr|@t|@n@henn|g @end|ng |rom un|bo@|t (Christian Martin Hennig)
Date: Wed, 8 Jan 2020 18:02:16 +0000
Subject: [R-pkg-devel] debian-clang error with class
Message-ID: <72470c7b-6c7c-76e2-be92-a4d4671c7282@unibo.it>

Hi there,

I have an ERROR in my fpc package on debian-clang that I currently 
cannot reproduce due to the fact that rhub is apparently affected by a 
bug on that platform that doesn't allow me to install Bioconductor 
packages. The description is "--- failure: the condition has length > 1 
---". I have googled for this and have found that there are a lot of 
packages that have such an error on debian-clang only. In all cases this 
seems to be associated with lines that compare a class of some object 
with a string such as

if (class(xxx)!="try-error"), if (class(m)=="matrix"), if (class(y) %in% 
c("onething,"anotherthing")) etc.

(The fpc package apparently achieved this with a "try-error" check.)

Now on my machine (which isn't debian-clang) the class of xxx is a 
harmless thing, either "try-error" or another simple string (in the 
example that caused the error it is actually "matrix"), so it's not 
clear to me what's wrong with this on debian-clang. However, looking at 
all these other cases in other packages, I'm pretty sure that the error 
comes from comparing class(something) with a string.

Can anybody shed some light on this? What goes wrong with 
class(xxx)!="try-error" and the like on debian-clang that works elsewhere?

Thanks,

Christian


-- 
Christian Hennig
Dipartimento di Scienze Statistiche "Paolo Fortunati",
Universita di Bologna, phone +39 05120 98163
christian.hennig at unibo.it


From |ro@o @end|ng |rom un@|@edu@co  Wed Jan  8 19:18:24 2020
From: |ro@o @end|ng |rom un@|@edu@co (Fernando Roa)
Date: Wed, 8 Jan 2020 15:18:24 -0300
Subject: [R-pkg-devel] debian-clang error with class
In-Reply-To: <72470c7b-6c7c-76e2-be92-a4d4671c7282@unibo.it>
References: <72470c7b-6c7c-76e2-be92-a4d4671c7282@unibo.it>
Message-ID: <CA+fi=+k0xru4U=OfU=XTnMNUMLcGd-YRrHHOxfuTY-wRsaw2sA@mail.gmail.com>

Take a look at
https://stat.ethz.ch/pipermail/r-package-devel/2019q4/004675.html

Best,

On Wed, Jan 8, 2020 at 3:09 PM Christian Martin Hennig <
christian.hennig at unibo.it> wrote:

> Hi there,
>
> I have an ERROR in my fpc package on debian-clang that I currently
> cannot reproduce due to the fact that rhub is apparently affected by a
> bug on that platform that doesn't allow me to install Bioconductor
> packages. The description is "--- failure: the condition has length > 1
> ---". I have googled for this and have found that there are a lot of
> packages that have such an error on debian-clang only. In all cases this
> seems to be associated with lines that compare a class of some object
> with a string such as
>
> if (class(xxx)!="try-error"), if (class(m)=="matrix"), if (class(y) %in%
> c("onething,"anotherthing")) etc.
>
> (The fpc package apparently achieved this with a "try-error" check.)
>
> Now on my machine (which isn't debian-clang) the class of xxx is a
> harmless thing, either "try-error" or another simple string (in the
> example that caused the error it is actually "matrix"), so it's not
> clear to me what's wrong with this on debian-clang. However, looking at
> all these other cases in other packages, I'm pretty sure that the error
> comes from comparing class(something) with a string.
>
> Can anybody shed some light on this? What goes wrong with
> class(xxx)!="try-error" and the like on debian-clang that works elsewhere?
>
> Thanks,
>
> Christian
>
>
> --
> Christian Hennig
> Dipartimento di Scienze Statistiche "Paolo Fortunati",
> Universita di Bologna, phone +39 05120 98163
> christian.hennig at unibo.it
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Fernando Roa

	[[alternative HTML version deleted]]


From chr|@t|@n@henn|g @end|ng |rom un|bo@|t  Wed Jan  8 19:25:04 2020
From: chr|@t|@n@henn|g @end|ng |rom un|bo@|t (Christian Martin Hennig)
Date: Wed, 8 Jan 2020 18:25:04 +0000
Subject: [R-pkg-devel] debian-clang error with class
In-Reply-To: <CA+fi=+k0xru4U=OfU=XTnMNUMLcGd-YRrHHOxfuTY-wRsaw2sA@mail.gmail.com>
References: <72470c7b-6c7c-76e2-be92-a4d4671c7282@unibo.it>
 <CA+fi=+k0xru4U=OfU=XTnMNUMLcGd-YRrHHOxfuTY-wRsaw2sA@mail.gmail.com>
Message-ID: <a377d0da-93c2-7f41-6e4a-126352da338e@unibo.it>

Great, thanks!

On 1/8/20 7:18 PM, Fernando Roa wrote:
Take a look at
https://stat.ethz.ch/pipermail/r-package-devel/2019q4/004675.html

Best,

On Wed, Jan 8, 2020 at 3:09 PM Christian Martin Hennig <christian.hennig at unibo.it<mailto:christian.hennig at unibo.it>> wrote:
Hi there,

I have an ERROR in my fpc package on debian-clang that I currently
cannot reproduce due to the fact that rhub is apparently affected by a
bug on that platform that doesn't allow me to install Bioconductor
packages. The description is "--- failure: the condition has length > 1
---". I have googled for this and have found that there are a lot of
packages that have such an error on debian-clang only. In all cases this
seems to be associated with lines that compare a class of some object
with a string such as

if (class(xxx)!="try-error"), if (class(m)=="matrix"), if (class(y) %in%
c("onething,"anotherthing")) etc.

(The fpc package apparently achieved this with a "try-error" check.)

Now on my machine (which isn't debian-clang) the class of xxx is a
harmless thing, either "try-error" or another simple string (in the
example that caused the error it is actually "matrix"), so it's not
clear to me what's wrong with this on debian-clang. However, looking at
all these other cases in other packages, I'm pretty sure that the error
comes from comparing class(something) with a string.

Can anybody shed some light on this? What goes wrong with
class(xxx)!="try-error" and the like on debian-clang that works elsewhere?

Thanks,

Christian


--
Christian Hennig
Dipartimento di Scienze Statistiche "Paolo Fortunati",
Universita di Bologna, phone +39 05120 98163
christian.hennig at unibo.it<mailto:christian.hennig at unibo.it>

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


--
Fernando Roa

--
Christian Hennig
Dipartimento di Scienze Statistiche "Paolo Fortunati",
Universita di Bologna, phone +39 05120 98163
christian.hennig at unibo.it<mailto:christian.hennig at unibo.it>

	[[alternative HTML version deleted]]


From kev|nu@hey @end|ng |rom gm@||@com  Wed Jan  8 19:24:52 2020
From: kev|nu@hey @end|ng |rom gm@||@com (Kevin Ushey)
Date: Wed, 8 Jan 2020 10:24:52 -0800
Subject: [R-pkg-devel] suggestion: conda for third-party software
In-Reply-To: <CAJXgQP2UJzopZPF+p5e5VNnqEjHE7SwAshTjW=h3Bw7p+e3hNQ@mail.gmail.com>
References: <7669d6fb-6715-05b1-88e6-af1b542d9df3@gmail.com>
 <CAJXgQP1DNh-gtUio3FM=RxqoJJVoeFpxaJFxDnsStdD_asz5hA@mail.gmail.com>
 <d622e026-6e12-c09f-3962-007c5a66b03f@gmail.com>
 <CAJXgQP2UJzopZPF+p5e5VNnqEjHE7SwAshTjW=h3Bw7p+e3hNQ@mail.gmail.com>
Message-ID: <CAJXgQP12oZCh3kFqmW596rF3y82ehYSrt2m0vJQr3vQQ2wcCNA@mail.gmail.com>

It would also be worth looking at the basilisk package:

https://github.com/LTLA/basilisk

where the approach used there is to instead embed a Conda installation
as part of the R package itself. This comes with the benefit that it's
now the package author's responsibility to maintain the Conda
installation (not CRAN nor the users), but does have the drawback that
installing or upgrading that Conda environment may become more
challenging.

One other large benefit of this approach is that it forces R package
authors who want to use Python through reticulate to standardize on
the same environment. Note that reticulate can only bind to a single
Python session per R session, so attempting to have R packages which
use incompatible Python dependencies could quickly become an issue.
(Python packages tend to rely on virtual environments, and so Python
packages tend to declare more narrow dependency version requirements.)
Hence, having a "standardized" Python environment that can be used by
R packages through reticulate (or other Python-wrapping packages)
should be very useful.

If you're curious, there's a more detailed discussion here:

https://github.com/LTLA/basilisk/issues/2

Best,
Kevin

On Wed, Jan 8, 2020 at 8:34 AM Kevin Ushey <kevinushey at gmail.com> wrote:
>
> On Tue, Jan 7, 2020 at 10:42 PM Sokol Serguei <serguei.sokol at gmail.com> wrote:
> >
> > Thanks for this hint.
> >
> > Le 07/01/2020 ? 20:47, Kevin Ushey a ?crit :
> > > The newest version of reticulate does something very similar: R
> > > packages can declare their Python package dependencies in the
> > > Config/reticulate field of a DESCRIPTION file, and reticulate can read
> > > and use those dependencies to provision a Python environment for the
> > > user when requested (currently using Miniconda).
> >
> > If miniconda is used, does it mean that not only Python but any conda
> > package can be indicated in dependency ?
>
> In theory yes, but reticulate only accepts Python package dependencies
> since its primary goal is interoperation with Python.
>
> > And another question, do you know if miniconda is installed on testing
> > CRAN machines? (Without this I cannot see how your packages with conda
> > dependencies could be tested during their submission.)
>
> I don't think so. I can't speak for CRAN, but their time is precious
> and it seems unlikely to me that they would be willing to expend the
> time needed to maintain Conda installations across their fleet of CRAN
> machines.
>
> Packages using Miniconda in this way could still run their tests on
> different types of infrastructure, though (e.g. Travis CI).
>
> > Best,
> >
> > Serguei.
> >
> > >
> > > Similarly, rather than having this part of SystemRequirements, package
> > > authors could declare these in a separate field called e.g.
> > > Config/conda. Then, you could have an R package that knows how to read
> > > and parse these configuration requests, and install those packages for
> > > the user.
> > >
> > > That said, maintaining a Conda installation and its environments is
> > > non-trivial, and things do not always work as expected when mixing
> > > Conda applications with non-Conda applications. Most notably, Conda
> > > installations bundle their own copies of libraries; e.g. the C++
> > > standard library, Qt, OpenSSL, and so on. If an application tries to
> > > mix and match both system-provided and Conda-provided libraries in the
> > > same process, bad things often happen. This was still the
> > > lowest-friction way forward for us with reticulate, but it's worth
> > > being aware that Conda is not a total panacea.
> > >
> > > Best,
> > > Kevin
> > >
> > > On Tue, Jan 7, 2020 at 6:50 AM Serguei Sokol <serguei.sokol at gmail.com> wrote:
> > >> Best wishes for 2020!
> > >>
> > >> I would like to suggest a new feature for R package management. Its aim
> > >> is to enable package developers and end-users to rely on conda (
> > >> https://docs.conda.io/en/latest/ ) for managing third-party software
> > >> (TPS) on major platforms: linux64, win64 and osx64. Currently, many R
> > >> packages include TPS as part of them thus bloating their sizes and often
> > >> duplicating files on a given system.  And even when TPS is not included
> > >> in an R package but is just installed on a system, it is not so obvious
> > >> to get the right path to it. Sometimes pkg-config helps but it is not
> > >> always present.
> > >>
> > >> So, the new feature would be to let R package developers to write in
> > >> DESCRIPTION/SystemRequirements field something like
> > >> 'conda:boost-cpp>=1.71' where 'boost-cpp' is an example of a conda
> > >> package and '>=1.71' is an optional version requirement. Having this
> > >> could allow install.packages() to install TPS on a testing CRAN machine
> > >> or on an end-user's one. (There is just one line to execute in a shell:
> > >> conda install <pkg-name>. It will install the package itself as well as
> > >> all its dependencies).
> > >>
> > >> To my mind, this feature would have the following advantages:
> > >>    - on-disk size economy as the same TPS does not have to be included in
> > >> R package itself and can be shared with other language wrappers, e.g.
> > >> Python;
> > >>    - an easy flag configuring in Makevars as paths to TPS will be well
> > >> known in advance;
> > >>    - CRAN machines could test packages relying on a wide panel of TPS
> > >> without bothering with their manual installation;
> > >>    - TPS installation can become transparent for the end-user on major
> > >> platforms;
> > >>
> > >> Note that even R is part of conda (
> > >> https://anaconda.org/conda-forge/r-base ), it is not mandatory to use
> > >> the conda's R version for this feature. Here, conda is just meant to
> > >> facilitate access to TPS. However, a minimal requirement is obviously to
> > >> have conda itself.
> > >>
> > >> Does it look reasonable? appealing?
> > >> Best,
> > >> Serguei.
> > >>
> > >> ______________________________________________
> > >> R-package-devel at r-project.org mailing list
> > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >


From hongoo| @end|ng |rom m|cro@o|t@com  Thu Jan  9 07:16:54 2020
From: hongoo| @end|ng |rom m|cro@o|t@com (Hong Ooi)
Date: Thu, 9 Jan 2020 06:16:54 +0000
Subject: [R-pkg-devel] Checkpoint package failing CRAN checks
Message-ID: <KU1P153MB0102761F9117AE400327DD90A6390@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>

Hi all,

I'm the new (as of 6 months ago) maintainer of checkpoint. If you're not familiar with it, checkpoint is a package to help with reproducible analysis: you give it a particular snapshot date from the MRAN site, and it installs the packages that your project depends on from that snapshot.

Just before the Christmas break, I got a message that it was failing CRAN checks. Specifically, building a vignette was causing a warning that a file was not found. I've made some changes, but the error persists.

This is the snippet of the log with the error. The full log can be found at https://win-builder.r-project.org/incoming_pretest/checkpoint_0.4.8_20200108_065428/Debian/00check.log


Error(s) in re-building vignettes:
  ...
--- re-building 'checkpoint.Rmd' using rmarkdown
* installing *source* package 'darts' ...
** using staged installation
** libs
gcc-9  -I"/home/hornik/tmp/R-d-gcc-9/include" -DNDEBUG   -I/usr/local/include -DUSE_TYPE_CHECKING_STRICT -D_FORTIFY_SOURCE=2  -fpic  -g -O2 -Wall -pedantic -mtune=native  -c darts.c -o darts.o
gcc-9 -shared -L/home/hornik/tmp/R-d-gcc-9/lib -Wl,-O1 -o darts.so darts.o -L/home/hornik/tmp/R-d-gcc-9/lib -lR
installing to /tmp/RtmpNSFOaW/working_dir/RtmpshQt0J/.checkpoint/2017-04-01/lib/x86_64-pc-linux-gnu/4.0.0/00LOCK-darts/00new/darts/libs
** R
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded from temporary location
** checking absolute paths in shared objects and dynamic libraries
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (darts)
Warning in file(con, "w") :
  cannot open file '/tmp/RtmpNSFOaW/working_dir/RtmpshQt0J/rmarkdown-str2e0253dd0590.html': No such file or directory
Error: processing vignette 'checkpoint.Rmd' failed with diagnostics:
cannot open the connection
--- failed re-building 'checkpoint.Rmd'


Would anyone be able to provide a clue as to what's going on? It seems to be working on Windows, but not on Debian.

The full package source is at https://github.com/RevolutionAnalytics/checkpoint. Thanks!


From m|k| @end|ng |rom m@th@@@u@dk  Thu Jan  9 18:20:18 2020
From: m|k| @end|ng |rom m@th@@@u@dk (Mikkel Meyer Andersen)
Date: Thu, 9 Jan 2020 17:20:18 +0000
Subject: [R-pkg-devel] Problem with package using reticulate (and Config in
 DESCRIPTION)
Message-ID: <7d0efdd0eec1fc5ee22082a2fdc278ba1b5427a2.camel@math.aau.dk>

Hello,

I have submitted a package (source at https://github.com/r-cas/caracas)
depending on reticulate to CRAN and it failed:

package caracas_0.0.1.tar.gz does not pass the incoming checks
automatically, please see the following pre-tests:
Windows: <
https://win-builder.r-project.org/incoming_pretest/caracas_0.0.1_20200108_193959/Windows/00check.log
>
Status: 6 WARNINGs, 6 NOTEs
Debian: <
https://win-builder.r-project.org/incoming_pretest/caracas_0.0.1_20200108_193959/Debian/00check.log
>
Status: 1 ERROR, 5 WARNINGs, 6 NOTEs

More details are given in the directory:
<
https://win-builder.r-project.org/incoming_pretest/caracas_0.0.1_20200108_193959/
>

As far as I can read, the NOTE's and WARNING's are related to these:

/usr/bin/python: No module named pip

error: could not find a Python environment for /usr/bin/python

Warning: cannot find svn location for rst2pdf===0.93.dev-r0
You are using pip version 9.0.1, however version 19.3.1 is available.
You should consider upgrading via the 'python -m pip install --upgrade
pip' command.

Can anybody see what the error in my package code is?

Cheers,
Mikkel.

From m|k| @end|ng |rom m@th@@@u@dk  Fri Jan 10 11:55:19 2020
From: m|k| @end|ng |rom m@th@@@u@dk (Mikkel Meyer Andersen)
Date: Fri, 10 Jan 2020 10:55:19 +0000
Subject: [R-pkg-devel] 
 Problem with package using reticulate (and Config in DESCRIPTION)
In-Reply-To: <7d0efdd0eec1fc5ee22082a2fdc278ba1b5427a2.camel@math.aau.dk>
References: <7d0efdd0eec1fc5ee22082a2fdc278ba1b5427a2.camel@math.aau.dk>
Message-ID: <ee211d60cba848a2b64119d86b0750dba5cdac48.camel@math.aau.dk>

I finally got this to work by removing the Config part of DESCRIPTION
and reverting back to functionality inside .onLoad(). Please see code
that does not trigger any warnings/errors here:

https://github.com/r-cas/caracas/tree/418b3a552de0203c3d2f960f0e4235f7891db71d

Cheers,
Mikkel.

tor, 09 01 2020 kl. 18:20 +0100, skrev Mikkel Meyer Andersen:
> Hello,
> 
> I have submitted a package (source at 
> https://github.com/r-cas/caracas)
> depending on reticulate to CRAN and it failed:
> 
> package caracas_0.0.1.tar.gz does not pass the incoming checks
> automatically, please see the following pre-tests:
> Windows: <
> 
https://win-builder.r-project.org/incoming_pretest/caracas_0.0.1_20200108_193959/Windows/00check.log
> > 
> 
> Status: 6 WARNINGs, 6 NOTEs
> Debian: <
> 
https://win-builder.r-project.org/incoming_pretest/caracas_0.0.1_20200108_193959/Debian/00check.log
> > 
> 
> Status: 1 ERROR, 5 WARNINGs, 6 NOTEs
> 
> More details are given in the directory:
> <
> 
https://win-builder.r-project.org/incoming_pretest/caracas_0.0.1_20200108_193959/
> > 
> 
> As far as I can read, the NOTE's and WARNING's are related to these:
> 
> /usr/bin/python: No module named pip
> 
> error: could not find a Python environment for /usr/bin/python
> 
> Warning: cannot find svn location for rst2pdf===0.93.dev-r0
> You are using pip version 9.0.1, however version 19.3.1 is available.
> You should consider upgrading via the 'python -m pip install --
> upgrade
> pip' command.
> 
> Can anybody see what the error in my package code is?
> 
> Cheers,
> Mikkel.

From t|@goo||voto @end|ng |rom gm@||@com  Fri Jan 10 12:43:09 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Fri, 10 Jan 2020 08:43:09 -0300
Subject: [R-pkg-devel] Possible unknown color in r
Message-ID: <000001d5c7ab$22d86640$688932c0$@gmail.com>

Dear all,

In the last submission of my package the CRAN team has suggested including
some references in the description field of the DESCRIPTION file.
When I submitted it to CRAN it did not pass the incoming checks
automatically and I got the following WARNING.

 

Quitting from lines 108-117 (vignettes_metan.Rmd) 

Error: processing vignette 'vignettes_metan.Rmd' failed with diagnostics:

Unknown colour name: transparent

 

It seems that this warning is related to a function with the argument
'col.segm.gen = "transparent"'.

I don't changed anything in this function and in the last submissions no
warning was related.

For curiosity I ran:

> col2rgb("yellow")

      [,1]

red    255

green  255

blue     0

 

> col2rgb("transparent")

      [,1]

red    255

green  255

blue   255

 

No warnings or errors were observed while running devtools::check_rhub(),
devtools::check_win_devel(), and devtools::check_win_release()

Any suggestion?

Best,

Tiago

 


	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Jan 10 13:17:32 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 10 Jan 2020 15:17:32 +0300
Subject: [R-pkg-devel] Checkpoint package failing CRAN checks
In-Reply-To: <KU1P153MB0102761F9117AE400327DD90A6390@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
References: <KU1P153MB0102761F9117AE400327DD90A6390@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
Message-ID: <20200110151732.122019b4@trisector>

I wonder why does vignettes/checkpoint.Rmd run the following:

> example_project <- tempdir()

Now example_project contains the path of per-session temporary
directory...

> dir.create(example_project, recursive = TRUE, showWarnings = FALSE)

...so there should be no need to create it...

> unlink(example_project, recursive = TRUE)

And deleting it is might be the cause of the problems: rmarkdown
probably uses the same temporary directory to store its own files.

Perhaps example_project should be something like tempfile(project)
instead of just tempdir()? Then dir.create() and unlink() calls start
making sense.

-- 
Best regards,
Ivan


From Jor|@@Mey@ @end|ng |rom UGent@be  Fri Jan 10 13:23:11 2020
From: Jor|@@Mey@ @end|ng |rom UGent@be (Joris Meys)
Date: Fri, 10 Jan 2020 12:23:11 +0000
Subject: [R-pkg-devel] Possible unknown color in r
In-Reply-To: <000001d5c7ab$22d86640$688932c0$@gmail.com>
References: <000001d5c7ab$22d86640$688932c0$@gmail.com>
Message-ID: <1578659041746.24320@UGent.be>

Hi Tiago,

Without knowing which package you're talking about or a link to the check results, it's impossible to know whether that warning is a proper one or a side effect of something else. 

In general though: it is well known that relying on devtools is not enough for a good CRAN submission. The guidelines for CRAN clearly state :

"Please ensure that R CMD check --as-cran has been run on the tarball to be uploaded before submission. This should be done with the current version of R-devel (or if that is not possible and explained in the submission, current R-patched or the current release of R.)"

So before submitting a package to CRAN and after running your devtools:: check_etc, open a terminal and run the following commands:

R CMD build path_to_pkg_folder
R CMD check --as-cran package_version.tar.gz

The --as-cran is important, as is doing so against a R-devel. I use devtools myself extensively, but these checks have to be done outside the RStudio ecosystem to be sure.

Kind regards
Joris

--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
------------------------------

Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Tiago Olivoto <tiagoolivoto at gmail.com>
Sent: Friday, January 10, 2020 12:43 PM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Possible unknown color in r

Dear all,

In the last submission of my package the CRAN team has suggested including
some references in the description field of the DESCRIPTION file.
When I submitted it to CRAN it did not pass the incoming checks
automatically and I got the following WARNING.



Quitting from lines 108-117 (vignettes_metan.Rmd)

Error: processing vignette 'vignettes_metan.Rmd' failed with diagnostics:

Unknown colour name: transparent



It seems that this warning is related to a function with the argument
'col.segm.gen = "transparent"'.

I don't changed anything in this function and in the last submissions no
warning was related.

For curiosity I ran:

> col2rgb("yellow")

      [,1]

red    255

green  255

blue     0



> col2rgb("transparent")

      [,1]

red    255

green  255

blue   255



No warnings or errors were observed while running devtools::check_rhub(),
devtools::check_win_devel(), and devtools::check_win_release()

Any suggestion?

Best,

Tiago




        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From t|@goo||voto @end|ng |rom gm@||@com  Fri Jan 10 14:17:57 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Fri, 10 Jan 2020 10:17:57 -0300
Subject: [R-pkg-devel] RES:  Possible unknown color in r
In-Reply-To: <1578659041746.24320@UGent.be>
References: <000001d5c7ab$22d86640$688932c0$@gmail.com>
 <1578659041746.24320@UGent.be>
Message-ID: <000701d5c7b8$6143c980$23cb5c80$@gmail.com>

Hi Joris,
Thank you so much for your assistance.
I've built and checked my package with:
R CMD build /d/Desktop/metan
R CMD check --as-cran metan_1.2.1.tar.gz

No WARNINGS were observed. Please, see the log file attached.
Sorry for failing in providing the link to access the check results in the
last email. You can see the link to the test that doesn't pass bellow.

Dear maintainer,
 package metan_1.2.1.tar.gz does not pass the incoming checks automatically,
please see the following pre-tests:
Windows:
<https://win-builder.r-project.org/incoming_pretest/metan_1.2.1_20200109_043
153/Windows/00check.log>

Status: 1 WARNING, 1 NOTE
Debian:
<https://win-builder.r-project.org/incoming_pretest/metan_1.2.1_20200109_043
153/Debian/00check.log>

It sounds strange because in the last submissions the package passed in the
incoming checks, and the only change I've made from v1.2.0 to 1.2.1 was
adding some references in the description file.
Best regards,
Tiago

-----Mensagem original-----
De: Joris Meys <Joris.Meys at UGent.be> 
Enviada em: sexta-feira, 10 de janeiro de 2020 09:23
Para: r-package-devel at r-project.org; tiagoolivoto at gmail.com
Assunto: Re: [R-pkg-devel] Possible unknown color in r

Hi Tiago,

Without knowing which package you're talking about or a link to the check
results, it's impossible to know whether that warning is a proper one or a
side effect of something else. 

In general though: it is well known that relying on devtools is not enough
for a good CRAN submission. The guidelines for CRAN clearly state :

"Please ensure that R CMD check --as-cran has been run on the tarball to be
uploaded before submission. This should be done with the current version of
R-devel (or if that is not possible and explained in the submission, current
R-patched or the current release of R.)"

So before submitting a package to CRAN and after running your devtools::
check_etc, open a terminal and run the following commands:

R CMD build path_to_pkg_folder
R CMD check --as-cran package_version.tar.gz

The --as-cran is important, as is doing so against a R-devel. I use devtools
myself extensively, but these checks have to be done outside the RStudio
ecosystem to be sure.

Kind regards
Joris

--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
------------------------------

Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of
Tiago Olivoto <tiagoolivoto at gmail.com>
Sent: Friday, January 10, 2020 12:43 PM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Possible unknown color in r

Dear all,

In the last submission of my package the CRAN team has suggested including
some references in the description field of the DESCRIPTION file.
When I submitted it to CRAN it did not pass the incoming checks
automatically and I got the following WARNING.



Quitting from lines 108-117 (vignettes_metan.Rmd)

Error: processing vignette 'vignettes_metan.Rmd' failed with diagnostics:

Unknown colour name: transparent



It seems that this warning is related to a function with the argument
'col.segm.gen = "transparent"'.

I don't changed anything in this function and in the last submissions no
warning was related.

For curiosity I ran:

> col2rgb("yellow")

      [,1]

red    255

green  255

blue     0



> col2rgb("transparent")

      [,1]

red    255

green  255

blue   255



No warnings or errors were observed while running devtools::check_rhub(),
devtools::check_win_devel(), and devtools::check_win_release()

Any suggestion?

Best,

Tiago




        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel
=

From @eb@meyer @end|ng |rom |@u@de  Fri Jan 10 14:40:29 2020
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Fri, 10 Jan 2020 14:40:29 +0100
Subject: [R-pkg-devel] RES: Possible unknown color in r
In-Reply-To: <000701d5c7b8$6143c980$23cb5c80$@gmail.com>
References: <000001d5c7ab$22d86640$688932c0$@gmail.com>
 <1578659041746.24320@UGent.be> <000701d5c7b8$6143c980$23cb5c80$@gmail.com>
Message-ID: <ac06bbb5-71f6-8568-0d0b-d0b32e9813db@fau.de>

Hi Tiago,

Then it seems likely that an update of a direct or indirect dependency
of your package causes this failure on CRAN's check system.

ggplot2 currently fails with a similar error message on CRAN

> Error: Unknown colour name: NA

(https://cran.r-project.org/web/checks/check_results_ggplot2.html)

This again seems to come from an update of the "farver" package which is
an indirect dependency of ggplot2 via package "scales"...

So maybe if you update your local installation of "farver" to version
2.0.2 from CRAN, you might be able to reproduce the error.

What I find a bit strange is that the CRAN package website displays
version 2.0.1 while the newer version 2.0.2 can be found in the package
archive.

Best regards,

	Sebastian


Am 10.01.20 um 14:17 schrieb Tiago Olivoto:
> Hi Joris,
> Thank you so much for your assistance.
> I've built and checked my package with:
> R CMD build /d/Desktop/metan
> R CMD check --as-cran metan_1.2.1.tar.gz
> 
> No WARNINGS were observed. Please, see the log file attached.
> Sorry for failing in providing the link to access the check results in the
> last email. You can see the link to the test that doesn't pass bellow.
> 
> Dear maintainer,
>  package metan_1.2.1.tar.gz does not pass the incoming checks automatically,
> please see the following pre-tests:
> Windows:
> <https://win-builder.r-project.org/incoming_pretest/metan_1.2.1_20200109_043
> 153/Windows/00check.log>
> 
> Status: 1 WARNING, 1 NOTE
> Debian:
> <https://win-builder.r-project.org/incoming_pretest/metan_1.2.1_20200109_043
> 153/Debian/00check.log>
> 
> It sounds strange because in the last submissions the package passed in the
> incoming checks, and the only change I've made from v1.2.0 to 1.2.1 was
> adding some references in the description file.
> Best regards,
> Tiago
> 
> -----Mensagem original-----
> De: Joris Meys <Joris.Meys at UGent.be> 
> Enviada em: sexta-feira, 10 de janeiro de 2020 09:23
> Para: r-package-devel at r-project.org; tiagoolivoto at gmail.com
> Assunto: Re: [R-pkg-devel] Possible unknown color in r
> 
> Hi Tiago,
> 
> Without knowing which package you're talking about or a link to the check
> results, it's impossible to know whether that warning is a proper one or a
> side effect of something else. 
> 
> In general though: it is well known that relying on devtools is not enough
> for a good CRAN submission. The guidelines for CRAN clearly state :
> 
> "Please ensure that R CMD check --as-cran has been run on the tarball to be
> uploaded before submission. This should be done with the current version of
> R-devel (or if that is not possible and explained in the submission, current
> R-patched or the current release of R.)"
> 
> So before submitting a package to CRAN and after running your devtools::
> check_etc, open a terminal and run the following commands:
> 
> R CMD build path_to_pkg_folder
> R CMD check --as-cran package_version.tar.gz
> 
> The --as-cran is important, as is doing so against a R-devel. I use devtools
> myself extensively, but these checks have to be done outside the RStudio
> ecosystem to be sure.
> 
> Kind regards
> Joris
> 
> --
> Joris Meys
> Statistical consultant
> 
> Department of Data Analysis and Mathematical Modelling Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
> ------------------------------
> 
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
> 
> 
> ________________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of
> Tiago Olivoto <tiagoolivoto at gmail.com>
> Sent: Friday, January 10, 2020 12:43 PM
> To: r-package-devel at r-project.org
> Subject: [R-pkg-devel] Possible unknown color in r
> 
> Dear all,
> 
> In the last submission of my package the CRAN team has suggested including
> some references in the description field of the DESCRIPTION file.
> When I submitted it to CRAN it did not pass the incoming checks
> automatically and I got the following WARNING.
> 
> 
> 
> Quitting from lines 108-117 (vignettes_metan.Rmd)
> 
> Error: processing vignette 'vignettes_metan.Rmd' failed with diagnostics:
> 
> Unknown colour name: transparent
> 
> 
> 
> It seems that this warning is related to a function with the argument
> 'col.segm.gen = "transparent"'.
> 
> I don't changed anything in this function and in the last submissions no
> warning was related.
> 
> For curiosity I ran:
> 
>> col2rgb("yellow")
> 
>       [,1]
> 
> red    255
> 
> green  255
> 
> blue     0
> 
> 
> 
>> col2rgb("transparent")
> 
>       [,1]
> 
> red    255
> 
> green  255
> 
> blue   255
> 
> 
> 
> No warnings or errors were observed while running devtools::check_rhub(),
> devtools::check_win_devel(), and devtools::check_win_release()
> 
> Any suggestion?
> 
> Best,
> 
> Tiago
> 
> 
> 
> 
>         [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> =
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From Jor|@@Mey@ @end|ng |rom UGent@be  Fri Jan 10 14:57:14 2020
From: Jor|@@Mey@ @end|ng |rom UGent@be (Joris Meys)
Date: Fri, 10 Jan 2020 13:57:14 +0000
Subject: [R-pkg-devel] Possible unknown color in r
In-Reply-To: <000701d5c7b8$6143c980$23cb5c80$@gmail.com>
References: <000001d5c7ab$22d86640$688932c0$@gmail.com>
 <1578659041746.24320@UGent.be>,<000701d5c7b8$6143c980$23cb5c80$@gmail.com>
Message-ID: <1578664684426.88494@UGent.be>

Hi Tiago,

It's indeed that. For some reason col2rgb() knows the unofficial "transparent". Replace this with the correct value from the vector colors(), i.e. "white". "transparent" is not mentioned in that vector, so it shouldn't be used in a package. See also ?rgb2col and ?colors.

Cheers
Joris

--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
------------------------------

Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


________________________________________
From: Tiago Olivoto <tiagoolivoto at gmail.com>
Sent: Friday, January 10, 2020 2:17 PM
To: Joris Meys; r-package-devel at r-project.org
Subject: RES: [R-pkg-devel] Possible unknown color in r

Hi Joris,
Thank you so much for your assistance.
I've built and checked my package with:
R CMD build /d/Desktop/metan
R CMD check --as-cran metan_1.2.1.tar.gz

No WARNINGS were observed. Please, see the log file attached.
Sorry for failing in providing the link to access the check results in the
last email. You can see the link to the test that doesn't pass bellow.

Dear maintainer,
 package metan_1.2.1.tar.gz does not pass the incoming checks automatically,
please see the following pre-tests:
Windows:
<https://win-builder.r-project.org/incoming_pretest/metan_1.2.1_20200109_043
153/Windows/00check.log>

Status: 1 WARNING, 1 NOTE
Debian:
<https://win-builder.r-project.org/incoming_pretest/metan_1.2.1_20200109_043
153/Debian/00check.log>

It sounds strange because in the last submissions the package passed in the
incoming checks, and the only change I've made from v1.2.0 to 1.2.1 was
adding some references in the description file.
Best regards,
Tiago

-----Mensagem original-----
De: Joris Meys <Joris.Meys at UGent.be>
Enviada em: sexta-feira, 10 de janeiro de 2020 09:23
Para: r-package-devel at r-project.org; tiagoolivoto at gmail.com
Assunto: Re: [R-pkg-devel] Possible unknown color in r

Hi Tiago,

Without knowing which package you're talking about or a link to the check
results, it's impossible to know whether that warning is a proper one or a
side effect of something else.

In general though: it is well known that relying on devtools is not enough
for a good CRAN submission. The guidelines for CRAN clearly state :

"Please ensure that R CMD check --as-cran has been run on the tarball to be
uploaded before submission. This should be done with the current version of
R-devel (or if that is not possible and explained in the submission, current
R-patched or the current release of R.)"

So before submitting a package to CRAN and after running your devtools::
check_etc, open a terminal and run the following commands:

R CMD build path_to_pkg_folder
R CMD check --as-cran package_version.tar.gz

The --as-cran is important, as is doing so against a R-devel. I use devtools
myself extensively, but these checks have to be done outside the RStudio
ecosystem to be sure.

Kind regards
Joris

--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
------------------------------

Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of
Tiago Olivoto <tiagoolivoto at gmail.com>
Sent: Friday, January 10, 2020 12:43 PM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Possible unknown color in r

Dear all,

In the last submission of my package the CRAN team has suggested including
some references in the description field of the DESCRIPTION file.
When I submitted it to CRAN it did not pass the incoming checks
automatically and I got the following WARNING.



Quitting from lines 108-117 (vignettes_metan.Rmd)

Error: processing vignette 'vignettes_metan.Rmd' failed with diagnostics:

Unknown colour name: transparent



It seems that this warning is related to a function with the argument
'col.segm.gen = "transparent"'.

I don't changed anything in this function and in the last submissions no
warning was related.

For curiosity I ran:

> col2rgb("yellow")

      [,1]

red    255

green  255

blue     0



> col2rgb("transparent")

      [,1]

red    255

green  255

blue   255



No warnings or errors were observed while running devtools::check_rhub(),
devtools::check_win_devel(), and devtools::check_win_release()

Any suggestion?

Best,

Tiago




        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel
=


From t|@goo||voto @end|ng |rom gm@||@com  Fri Jan 10 18:05:14 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Fri, 10 Jan 2020 14:05:14 -0300
Subject: [R-pkg-devel] RES:  Possible unknown color in r
In-Reply-To: <1578664684426.88494@UGent.be>
References: <000001d5c7ab$22d86640$688932c0$@gmail.com>
 <1578659041746.24320@UGent.be>,
 <000701d5c7b8$6143c980$23cb5c80$@gmail.com> <1578664684426.88494@UGent.be>
Message-ID: <000d01d5c7d8$237437a0$6a5ca6e0$@gmail.com>

Hi Joris,
Thank you for your suggestions.
After installing the version v 2.0.2 of "farver" I was able to reproduce the
WARNING.
To fix this issue, I created a simple helper function:
transparent_color <- function() {
  return("#000000FF")
}
And changed "transparent" with "transparent_color()" in my R scripts.
After, I built and check again with 'R CMD check --as-cran
metan_1.2.1.tar.gz' and no longer WARNINGS were observed.
Thanks again,
Tiago

-----Mensagem original-----
De: Joris Meys <Joris.Meys at UGent.be> 
Enviada em: sexta-feira, 10 de janeiro de 2020 10:57
Para: r-package-devel at r-project.org; tiagoolivoto at gmail.com
Assunto: Re: [R-pkg-devel] Possible unknown color in r

Hi Tiago,

It's indeed that. For some reason col2rgb() knows the unofficial
"transparent". Replace this with the correct value from the vector colors(),
i.e. "white". "transparent" is not mentioned in that vector, so it shouldn't
be used in a package. See also ?rgb2col and ?colors.

Cheers
Joris

--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
------------------------------

Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


________________________________________
From: Tiago Olivoto <tiagoolivoto at gmail.com>
Sent: Friday, January 10, 2020 2:17 PM
To: Joris Meys; r-package-devel at r-project.org
Subject: RES: [R-pkg-devel] Possible unknown color in r

Hi Joris,
Thank you so much for your assistance.
I've built and checked my package with:
R CMD build /d/Desktop/metan
R CMD check --as-cran metan_1.2.1.tar.gz

No WARNINGS were observed. Please, see the log file attached.
Sorry for failing in providing the link to access the check results in the
last email. You can see the link to the test that doesn't pass bellow.

Dear maintainer,
 package metan_1.2.1.tar.gz does not pass the incoming checks automatically,
please see the following pre-tests:
Windows:
<https://win-builder.r-project.org/incoming_pretest/metan_1.2.1_20200109_043
153/Windows/00check.log>

Status: 1 WARNING, 1 NOTE
Debian:
<https://win-builder.r-project.org/incoming_pretest/metan_1.2.1_20200109_043
153/Debian/00check.log>

It sounds strange because in the last submissions the package passed in the
incoming checks, and the only change I've made from v1.2.0 to 1.2.1 was
adding some references in the description file.
Best regards,
Tiago

-----Mensagem original-----
De: Joris Meys <Joris.Meys at UGent.be>
Enviada em: sexta-feira, 10 de janeiro de 2020 09:23
Para: r-package-devel at r-project.org; tiagoolivoto at gmail.com
Assunto: Re: [R-pkg-devel] Possible unknown color in r

Hi Tiago,

Without knowing which package you're talking about or a link to the check
results, it's impossible to know whether that warning is a proper one or a
side effect of something else.

In general though: it is well known that relying on devtools is not enough
for a good CRAN submission. The guidelines for CRAN clearly state :

"Please ensure that R CMD check --as-cran has been run on the tarball to be
uploaded before submission. This should be done with the current version of
R-devel (or if that is not possible and explained in the submission, current
R-patched or the current release of R.)"

So before submitting a package to CRAN and after running your devtools::
check_etc, open a terminal and run the following commands:

R CMD build path_to_pkg_folder
R CMD check --as-cran package_version.tar.gz

The --as-cran is important, as is doing so against a R-devel. I use devtools
myself extensively, but these checks have to be done outside the RStudio
ecosystem to be sure.

Kind regards
Joris

--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
------------------------------

Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of
Tiago Olivoto <tiagoolivoto at gmail.com>
Sent: Friday, January 10, 2020 12:43 PM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Possible unknown color in r

Dear all,

In the last submission of my package the CRAN team has suggested including
some references in the description field of the DESCRIPTION file.
When I submitted it to CRAN it did not pass the incoming checks
automatically and I got the following WARNING.



Quitting from lines 108-117 (vignettes_metan.Rmd)

Error: processing vignette 'vignettes_metan.Rmd' failed with diagnostics:

Unknown colour name: transparent



It seems that this warning is related to a function with the argument
'col.segm.gen = "transparent"'.

I don't changed anything in this function and in the last submissions no
warning was related.

For curiosity I ran:

> col2rgb("yellow")

      [,1]

red    255

green  255

blue     0



> col2rgb("transparent")

      [,1]

red    255

green  255

blue   255



No warnings or errors were observed while running devtools::check_rhub(),
devtools::check_win_devel(), and devtools::check_win_release()

Any suggestion?

Best,

Tiago




        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel
=
=


From berryboe@@enkoo| @end|ng |rom hotm@||@com  Fri Jan 10 19:42:06 2020
From: berryboe@@enkoo| @end|ng |rom hotm@||@com (Berry Boessenkool)
Date: Fri, 10 Jan 2020 18:42:06 +0000
Subject: [R-pkg-devel] RES:  Possible unknown color in r
In-Reply-To: <000d01d5c7d8$237437a0$6a5ca6e0$@gmail.com>
References: <000001d5c7ab$22d86640$688932c0$@gmail.com>
 <1578659041746.24320@UGent.be>, <000701d5c7b8$6143c980$23cb5c80$@gmail.com>
 <1578664684426.88494@UGent.be>,<000d01d5c7d8$237437a0$6a5ca6e0$@gmail.com>
Message-ID: <AM6P191MB03600B7CF9F75118D208A3F0D5380@AM6P191MB0360.EURP191.PROD.OUTLOOK.COM>


Side Note:

plot(1, col="#000000FF", cex=4, pch=16)

is black on my machine.
The last two values are alpha (I think) and should be 00 for transparency.

Instead of writing an extra function, you could also use col=NA.

Berry


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Tiago Olivoto <tiagoolivoto at gmail.com>
Sent: Friday, January 10, 2020 18:05
To: 'Joris Meys' <Joris.Meys at UGent.be>; r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: [R-pkg-devel] RES: Possible unknown color in r

Hi Joris,
Thank you for your suggestions.
After installing the version v 2.0.2 of "farver" I was able to reproduce the
WARNING.
To fix this issue, I created a simple helper function:
transparent_color <- function() {
  return("#000000FF")
}
And changed "transparent" with "transparent_color()" in my R scripts.
After, I built and check again with 'R CMD check --as-cran
metan_1.2.1.tar.gz' and no longer WARNINGS were observed.
Thanks again,
Tiago

-----Mensagem original-----
De: Joris Meys <Joris.Meys at UGent.be>
Enviada em: sexta-feira, 10 de janeiro de 2020 10:57
Para: r-package-devel at r-project.org; tiagoolivoto at gmail.com
Assunto: Re: [R-pkg-devel] Possible unknown color in r

Hi Tiago,

It's indeed that. For some reason col2rgb() knows the unofficial
"transparent". Replace this with the correct value from the vector colors(),
i.e. "white". "transparent" is not mentioned in that vector, so it shouldn't
be used in a package. See also ?rgb2col and ?colors.

Cheers
Joris

--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
------------------------------

Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


________________________________________
From: Tiago Olivoto <tiagoolivoto at gmail.com>
Sent: Friday, January 10, 2020 2:17 PM
To: Joris Meys; r-package-devel at r-project.org
Subject: RES: [R-pkg-devel] Possible unknown color in r

Hi Joris,
Thank you so much for your assistance.
I've built and checked my package with:
R CMD build /d/Desktop/metan
R CMD check --as-cran metan_1.2.1.tar.gz

No WARNINGS were observed. Please, see the log file attached.
Sorry for failing in providing the link to access the check results in the
last email. You can see the link to the test that doesn't pass bellow.

Dear maintainer,
 package metan_1.2.1.tar.gz does not pass the incoming checks automatically,
please see the following pre-tests:

<https://win-builder.r-project.org/incoming_pretest/metan_1.2.1_20200109_043


Status: 1 WARNING, 1 NOTE
Debian:
<https://win-builder.r-project.org/incoming_pretest/metan_1.2.1_20200109_043
153/Debian/00check.log>

It sounds strange because in the last submissions the package passed in the
incoming checks, and the only change I've made from v1.2.0 to 1.2.1 was
adding some references in the description file.
Best regards,
Tiago

-----Mensagem original-----
De: Joris Meys <Joris.Meys at UGent.be>
Enviada em: sexta-feira, 10 de janeiro de 2020 09:23
Para: r-package-devel at r-project.org; tiagoolivoto at gmail.com
Assunto: Re: [R-pkg-devel] Possible unknown color in r

Hi Tiago,

Without knowing which package you're talking about or a link to the check
results, it's impossible to know whether that warning is a proper one or a
side effect of something else.

In general though: it is well known that relying on devtools is not enough
for a good CRAN submission. The guidelines for CRAN clearly state :

"Please ensure that R CMD check --as-cran has been run on the tarball to be
uploaded before submission. This should be done with the current version of
R-devel (or if that is not possible and explained in the submission, current
R-patched or the current release of R.)"

So before submitting a package to CRAN and after running your devtools::
check_etc, open a terminal and run the following commands:

R CMD build path_to_pkg_folder
R CMD check --as-cran package_version.tar.gz

The --as-cran is important, as is doing so against a R-devel. I use devtools
myself extensively, but these checks have to be done outside the RStudio
ecosystem to be sure.

Kind regards
Joris

--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
------------------------------

Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of
Tiago Olivoto <tiagoolivoto at gmail.com>
Sent: Friday, January 10, 2020 12:43 PM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] Possible unknown color in r

Dear all,

In the last submission of my package the CRAN team has suggested including
some references in the description field of the DESCRIPTION file.
When I submitted it to CRAN it did not pass the incoming checks
automatically and I got the following WARNING.



Quitting from lines 108-117 (vignettes_metan.Rmd)

Error: processing vignette 'vignettes_metan.Rmd' failed with diagnostics:

Unknown colour name: transparent



It seems that this warning is related to a function with the argument
'col.segm.gen = "transparent"'.

I don't changed anything in this function and in the last submissions no
warning was related.

For curiosity I ran:

> col2rgb("yellow")

      [,1]

red    255

green  255

blue     0



> col2rgb("transparent")

      [,1]

red    255

green  255

blue   255



No warnings or errors were observed while running devtools::check_rhub(),
devtools::check_win_devel(), and devtools::check_win_release()

Any suggestion?

Best,

Tiago




        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel
=
=

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From t|@goo||voto @end|ng |rom gm@||@com  Fri Jan 10 20:44:56 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Fri, 10 Jan 2020 16:44:56 -0300
Subject: [R-pkg-devel] RES:  RES:  Possible unknown color in r
In-Reply-To: <AM6P191MB03600B7CF9F75118D208A3F0D5380@AM6P191MB0360.EURP191.PROD.OUTLOOK.COM>
References: <000001d5c7ab$22d86640$688932c0$@gmail.com>
 <1578659041746.24320@UGent.be>,
 <000701d5c7b8$6143c980$23cb5c80$@gmail.com> <1578664684426.88494@UGent.be>,
 <000d01d5c7d8$237437a0$6a5ca6e0$@gmail.com>
 <AM6P191MB03600B7CF9F75118D208A3F0D5380@AM6P191MB0360.EURP191.PROD.OUTLOOK.COM>
Message-ID: <001001d5c7ee$7161b3f0$54251bd0$@gmail.com>

Hi Berry, 

Thank you for the note.

When I run my example code with transparent_color() all was working (the
color was transparent).

Now, reproducing the code again it becomes black. Could be this be changed
after package "farver" be updated to v. 2.0.2?

You is right regarding the use of col = NA. I have some functions that uses
ggplot2 and col = NA works with lines

 

library(ggplot2)

ggplot(mpg, aes(displ, hwy)) + 

  geom_smooth(color = NA, method = "lm")

 

but return a warning message with points

ggplot(mpg, aes(displ, hwy)) + 

  geom_point(color = NA)

# Warning message:

# Removed 234 rows containing missing values (geom_point).

 

It seems that the correct "transparent" color I was looking for can be set
without a warning with "#FFFFFF00"

ggplot(mpg, aes(displ, hwy)) + 

  geom_point(color = "#FFFFFF00")

Thanks for the tips.

Tiago.

 

De: Berry Boessenkool <berryboessenkool at hotmail.com> 
Enviada em: sexta-feira, 10 de janeiro de 2020 15:42
Para: 'Joris Meys' <Joris.Meys at UGent.be>; r-package-devel at r-project.org;
tiagoolivoto at gmail.com
Assunto: Re: [R-pkg-devel] RES: Possible unknown color in r

 

 

Side Note: 

plot(1, col="#000000FF", cex=4, pch=16)

is black on my machine.

The last two values are alpha (I think) and should be 00 for transparency.

 

Instead of writing an extra function, you could also use col=NA.

 

Berry

 

  _____  

From: R-package-devel <r-package-devel-bounces at r-project.org
<mailto:r-package-devel-bounces at r-project.org> > on behalf of Tiago Olivoto
<tiagoolivoto at gmail.com <mailto:tiagoolivoto at gmail.com> >
Sent: Friday, January 10, 2020 18:05
To: 'Joris Meys' <Joris.Meys at UGent.be <mailto:Joris.Meys at UGent.be> >;
r-package-devel at r-project.org <mailto:r-package-devel at r-project.org>
<r-package-devel at r-project.org <mailto:r-package-devel at r-project.org> >
Subject: [R-pkg-devel] RES: Possible unknown color in r 

 

Hi Joris,
Thank you for your suggestions.
After installing the version v 2.0.2 of "farver" I was able to reproduce the
WARNING.
To fix this issue, I created a simple helper function:
transparent_color <- function() {
  return("#000000FF")
}
And changed "transparent" with "transparent_color()" in my R scripts.
After, I built and check again with 'R CMD check --as-cran
metan_1.2.1.tar.gz' and no longer WARNINGS were observed.
Thanks again,
Tiago

-----Mensagem original-----
De: Joris Meys <Joris.Meys at UGent.be <mailto:Joris.Meys at UGent.be> > 
Enviada em: sexta-feira, 10 de janeiro de 2020 10:57
Para: r-package-devel at r-project.org <mailto:r-package-devel at r-project.org> ;
tiagoolivoto at gmail.com <mailto:tiagoolivoto at gmail.com> 
Assunto: Re: [R-pkg-devel] Possible unknown color in r

Hi Tiago,

It's indeed that. For some reason col2rgb() knows the unofficial
"transparent". Replace this with the correct value from the vector colors(),
i.e. "white". "transparent" is not mentioned in that vector, so it shouldn't
be used in a package. See also ?rgb2col and ?colors.

Cheers
Joris

--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
------------------------------

Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


________________________________________
From: Tiago Olivoto <tiagoolivoto at gmail.com <mailto:tiagoolivoto at gmail.com>
>
Sent: Friday, January 10, 2020 2:17 PM
To: Joris Meys; r-package-devel at r-project.org
<mailto:r-package-devel at r-project.org> 
Subject: RES: [R-pkg-devel] Possible unknown color in r

Hi Joris,
Thank you so much for your assistance.
I've built and checked my package with:
R CMD build /d/Desktop/metan
R CMD check --as-cran metan_1.2.1.tar.gz

No WARNINGS were observed. Please, see the log file attached.
Sorry for failing in providing the link to access the check results in the
last email. You can see the link to the test that doesn't pass bellow.

Dear maintainer,
 package metan_1.2.1.tar.gz does not pass the incoming checks automatically,
please see the following pre-tests:
Windows:
<https://win-builder.r-project.org/incoming_pretest/metan_1.2.1_20200109_043
<https://win-builder.r-project.org/incoming_pretest/metan_1.2.1_20200109_043
%0b153/Windows/00check.log> 
153/Windows/00check.log>

Status: 1 WARNING, 1 NOTE
Debian:
<https://win-builder.r-project.org/incoming_pretest/metan_1.2.1_20200109_043
<https://win-builder.r-project.org/incoming_pretest/metan_1.2.1_20200109_043
%0b153/Debian/00check.log> 
153/Debian/00check.log>

It sounds strange because in the last submissions the package passed in the
incoming checks, and the only change I've made from v1.2.0 to 1.2.1 was
adding some references in the description file.
Best regards,
Tiago

-----Mensagem original-----
De: Joris Meys <Joris.Meys at UGent.be <mailto:Joris.Meys at UGent.be> >
Enviada em: sexta-feira, 10 de janeiro de 2020 09:23
Para: r-package-devel at r-project.org <mailto:r-package-devel at r-project.org> ;
tiagoolivoto at gmail.com <mailto:tiagoolivoto at gmail.com> 
Assunto: Re: [R-pkg-devel] Possible unknown color in r

Hi Tiago,

Without knowing which package you're talking about or a link to the check
results, it's impossible to know whether that warning is a proper one or a
side effect of something else.

In general though: it is well known that relying on devtools is not enough
for a good CRAN submission. The guidelines for CRAN clearly state :

"Please ensure that R CMD check --as-cran has been run on the tarball to be
uploaded before submission. This should be done with the current version of
R-devel (or if that is not possible and explained in the submission, current
R-patched or the current release of R.)"

So before submitting a package to CRAN and after running your devtools::
check_etc, open a terminal and run the following commands:

R CMD build path_to_pkg_folder
R CMD check --as-cran package_version.tar.gz

The --as-cran is important, as is doing so against a R-devel. I use devtools
myself extensively, but these checks have to be done outside the RStudio
ecosystem to be sure.

Kind regards
Joris

--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
------------------------------

Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org
<mailto:r-package-devel-bounces at r-project.org> > on behalf of
Tiago Olivoto <tiagoolivoto at gmail.com <mailto:tiagoolivoto at gmail.com> >
Sent: Friday, January 10, 2020 12:43 PM
To: r-package-devel at r-project.org <mailto:r-package-devel at r-project.org> 
Subject: [R-pkg-devel] Possible unknown color in r

Dear all,

In the last submission of my package the CRAN team has suggested including
some references in the description field of the DESCRIPTION file.
When I submitted it to CRAN it did not pass the incoming checks
automatically and I got the following WARNING.



Quitting from lines 108-117 (vignettes_metan.Rmd)

Error: processing vignette 'vignettes_metan.Rmd' failed with diagnostics:

Unknown colour name: transparent



It seems that this warning is related to a function with the argument
'col.segm.gen = "transparent"'.

I don't changed anything in this function and in the last submissions no
warning was related.

For curiosity I ran:

> col2rgb("yellow")

      [,1]

red    255

green  255

blue     0



> col2rgb("transparent")

      [,1]

red    255

green  255

blue   255



No warnings or errors were observed while running devtools::check_rhub(),
devtools::check_win_devel(), and devtools::check_win_release()

Any suggestion?

Best,

Tiago




        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel
=
=

______________________________________________
R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From Chr|@@Br|en @end|ng |rom un|@@@edu@@u  Sat Jan 11 03:10:24 2020
From: Chr|@@Br|en @end|ng |rom un|@@@edu@@u (Chris Brien)
Date: Sat, 11 Jan 2020 02:10:24 +0000
Subject: [R-pkg-devel] CRAN Package Check ERROR involving stringi
Message-ID: <d8e7a53f73ad4d008d3a5c1d94ab4b80@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>

Hi list members,

On checking the CRAN Package Check Results for my package growthPheno I find that there is the error below for r-devel-windows-ix86+x86_64, but not for r-devel-windows-ix86+x86_64-gcc8. Further, I do not get this error when I run R CMD check --as-cran on the tarball for a new version of growthPheno using r-devel build 77631.

* installing *source* package 'growthPheno' ...
** package 'growthPheno' successfully unpacked and MD5 sums checked
** using staged installation
** R
** data
** inst
** byte-compile and prepare package for lazy loading
Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]) : 
  there is no package called 'stringi'
Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart -> doWithOneRestart
Execution halted
ERROR: lazy loading failed for package 'growthPheno'
* removing 'd:/Rcompile/CRANpkg/lib/4.0/growthPheno'
* restoring previous 'd:/Rcompile/CRANpkg/lib/4.0/growthPheno'

 My understanding is that the error arises in connection with ggplot2, which is imported by growthPheno.

Can I assume that this error is due to some transitory  peculiarity with r-devel-windows-ix86+x86_64 and submit anyway?

Thanks in advance for any help,

Cheers, 

  Chris Brien

Adjunct Associate Professor in Statistics
-----
School of Information Technology &  Mathematical Sciences
University of South Australia
GPO Box 2471
ADELAIDE  5001  South Australia
Phone:? +61 8 8302 5535   Fax:? +61 8 8302 5785
Email:?? Chris.Brien at unisa.edu.au 
WEB page:? <http://people.unisa.edu.au/Chris.Brien> 
CRICOS No 00121B 


From kev|nu@hey @end|ng |rom gm@||@com  Sat Jan 11 04:18:32 2020
From: kev|nu@hey @end|ng |rom gm@||@com (Kevin Ushey)
Date: Sat, 11 Jan 2020 11:18:32 +0800
Subject: [R-pkg-devel] 
 Problem with package using reticulate (and Config in DESCRIPTION)
In-Reply-To: <ee211d60cba848a2b64119d86b0750dba5cdac48.camel@math.aau.dk>
References: <7d0efdd0eec1fc5ee22082a2fdc278ba1b5427a2.camel@math.aau.dk>
 <ee211d60cba848a2b64119d86b0750dba5cdac48.camel@math.aau.dk>
Message-ID: <CAJXgQP3E4sEK5Lfhmh19DxQhn5doHc5uf4zqUU-G5-C-178NyA@mail.gmail.com>

Note that by calling py_module_available() in your .onLoad(), as done here:

https://github.com/r-cas/caracas/blob/418b3a552de0203c3d2f960f0e4235f7891db71d/R/init.R#L51

you are forcing reticulate to initialize the Python session eagerly
when your package is loaded (so before the user might've had a chance
to configure which version of Python should be loaded as well).

Please see:

https://rstudio.github.io/reticulate/articles/package.html

and be very careful that loading your package does not inadvertently
force reticulate to initialize Python before the user has requested
it.

Re: Config/reticulate, I plan to submit a patch to reticulate soon to
ensure that environment configuration does not happen
non-interactively in this way.

Thanks,
Kevin

On Fri, Jan 10, 2020 at 2:55 AM Mikkel Meyer Andersen <mikl at math.aau.dk> wrote:
>
> I finally got this to work by removing the Config part of DESCRIPTION
> and reverting back to functionality inside .onLoad(). Please see code
> that does not trigger any warnings/errors here:
>
> https://github.com/r-cas/caracas/tree/418b3a552de0203c3d2f960f0e4235f7891db71d
>
> Cheers,
> Mikkel.
>
> tor, 09 01 2020 kl. 18:20 +0100, skrev Mikkel Meyer Andersen:
> > Hello,
> >
> > I have submitted a package (source at
> > https://github.com/r-cas/caracas)
> > depending on reticulate to CRAN and it failed:
> >
> > package caracas_0.0.1.tar.gz does not pass the incoming checks
> > automatically, please see the following pre-tests:
> > Windows: <
> >
> https://win-builder.r-project.org/incoming_pretest/caracas_0.0.1_20200108_193959/Windows/00check.log
> > >
> >
> > Status: 6 WARNINGs, 6 NOTEs
> > Debian: <
> >
> https://win-builder.r-project.org/incoming_pretest/caracas_0.0.1_20200108_193959/Debian/00check.log
> > >
> >
> > Status: 1 ERROR, 5 WARNINGs, 6 NOTEs
> >
> > More details are given in the directory:
> > <
> >
> https://win-builder.r-project.org/incoming_pretest/caracas_0.0.1_20200108_193959/
> > >
> >
> > As far as I can read, the NOTE's and WARNING's are related to these:
> >
> > /usr/bin/python: No module named pip
> >
> > error: could not find a Python environment for /usr/bin/python
> >
> > Warning: cannot find svn location for rst2pdf===0.93.dev-r0
> > You are using pip version 9.0.1, however version 19.3.1 is available.
> > You should consider upgrading via the 'python -m pip install --
> > upgrade
> > pip' command.
> >
> > Can anybody see what the error in my package code is?
> >
> > Cheers,
> > Mikkel.
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From |ro@o @end|ng |rom un@|@edu@co  Sat Jan 11 13:58:01 2020
From: |ro@o @end|ng |rom un@|@edu@co (Fernando Roa)
Date: Sat, 11 Jan 2020 09:58:01 -0300
Subject: [R-pkg-devel] pandoc lua filter error with win devel check
In-Reply-To: <CA+fi=+mjbM4TqE2KZ4_9JjD=kKBtLz-jgwXTpAk2GOEMsS3WaQ@mail.gmail.com>
References: <CA+fi=+k68YqsDt6noW2OSO1EVdqB6nfrQV-Ybua5SGk4VoAy4A@mail.gmail.com>
 <525ED07E-E161-44F4-9BBD-DC71D66FBC33@dcn.davis.ca.us>
 <CA+fi=+kB4uQd6-TCbiKcGcghcg9RGTKUr+DtjrFoGfdTjoGk-g@mail.gmail.com>
 <b02e074929454b71b4032657f1a9dcdb@umanitoba.ca>
 <CA+fi=+mjbM4TqE2KZ4_9JjD=kKBtLz-jgwXTpAk2GOEMsS3WaQ@mail.gmail.com>
Message-ID: <CA+fi=+kgBZJORE6po4gimLZjM=O7P1Ly-LuqWTbUstndjHhYfQ@mail.gmail.com>

Hi,
just a comment,
I found interesting that despite CRAN Solaris also not having pandoc > 2,
it deals with (pandoc_args: --lua-filter=) different to CRAN Windows Server.

This is the output of Solaris: (vignette does not crash - no error "in
submission")

"Warning in engine$weave(file, quiet = quiet, encoding = enc) :
  Pandoc (>= 1.12.3) and/or pandoc-citeproc not available. Falling back to
R Markdown v1."

It does not produce the error seen in Windows (pandoc < 2), which is:

"pandoc.exe: unrecognized option
`--lua-filter=refs/multiple-bibliographies.lua'

Error: processing vignette 'index.Rmd' failed with diagnostics:
pandoc document conversion failed with error 2"

So, it seems absence of pandoc, or being more outdated (solaris) is
"better" than the windows version, which crashes in presence of the
lua-filter.
(Consider also that vignettes in CRAN and browseVignettes() are not from
solaris or windows)

Best,

On Wed, Jan 8, 2020 at 2:59 PM Fernando Roa <froao at unal.edu.co> wrote:

> Hi,
> I added SystemRequirements: pandoc (>= 2.0) to DESCRIPTION as you
> suggested; submission failed,
> the automatic check of package submission to CRAN had the error I got
> before with check_win_devel:
>
> "pandoc.exe: unrecognized option
> `--lua-filter=refs/multiple-bibliographies.lua'
>
> Error: processing vignette 'index.Rmd' failed with diagnostics:
> pandoc document conversion failed with error 2"
>
> So, I am not sure what would be the next step for submitting.
>
> Related info:
>
> Vignette failure because pandoc ver. < 2 in Windows-R-Devel. Pandoc (>2)
> needed for multiple bibliographies in vignette (with lua filter), see also:
>
> https://stat.ethz.ch/pipermail/r-package-devel/2019q2/004127.html
> https://stat.ethz.ch/pipermail/r-package-devel/2020q1/004814.html
>
>
> https://cran.r-project.org/web/packages/rmarkdown/vignettes/lua-filters.html
> https://pandoc.org/lua-filters.html
>
> https://github.com/jgm/pandoc/releases (pandoc builds for every OS)
>
> Best,
>
>
> On Mon, Jan 6, 2020 at 8:03 PM Max Turgeon <Max.Turgeon at umanitoba.ca>
> wrote:
>
>> There was a discussion on this list last year about which version of
>> pandoc is available on CRAN machines, without a definite answer:
>> https://stat.ethz.ch/pipermail/r-package-devel/2019q2/004126.html
>>
>>
>> But I think it's completely possible that win-builder doesn't have pandoc
>> 2.0, which is required for lua-filters AFAIK. On your side of things, the
>> best you can do is to ensure that you add
>> "SystemRequirements: pandoc (>= 2.0)" (or something like that) to your
>> DESCRIPTION file, and add a corresponding justification to your submission
>> comments.
>>
>>
>> Max Turgeon
>> Assistant Professor
>> Department of Statistics
>> Department of Computer Science
>> University of Manitoba
>> maxturgeon.ca
>>
>>
>> ------------------------------
>> *From:* R-package-devel <r-package-devel-bounces at r-project.org> on
>> behalf of Fernando Roa <froao at unal.edu.co>
>> *Sent:* January 6, 2020 4:26:14 PM
>> *To:* Jeff Newmiller; r-package-devel at r-project.org
>> *Subject:* Re: [R-pkg-devel] pandoc lua filter error with win devel check
>>
>> Hi
>> Rmarkdown supports lua filters. So I guess the rmarkdown and or pandoc in
>> win devel are not updated.
>>
>> Best,
>>
>>
>> On Mon, Jan 6, 2020, 7:18 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>> wrote:
>>
>> > Pandoc is not part of the standard R documentation tooling... you must
>> be
>> > doing something special, and doing something special makes getting a
>> > package accepted more challenging. Perhaps if you were more specific you
>> > might get a more specific response.
>> >
>> > On January 6, 2020 1:38:44 PM PST, Fernando Roa <froao at unal.edu.co>
>> wrote:
>> > >Hi people,
>> > >
>> > >I got an error in vignettes after checking as win. devel. with
>> > >devtools (check_win_devel):
>> > >
>> > >pandoc.exe: unrecognized option
>> > >`--lua-filter=refs/multiple-bibliographies.lua'
>> > >
>> > >May I ignore it?
>> > >
>> > >Best,
>> >
>> > --
>> > Sent from my phone. Please excuse my brevity.
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>
> --
> Fernando Roa
>


-- 
Fernando Roa

	[[alternative HTML version deleted]]


From @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@  Sun Jan 12 14:37:28 2020
From: @@meh@@bdu|@h @end|ng |rom k@u@t@edu@@@ (Sameh M. Abdulah)
Date: Sun, 12 Jan 2020 13:37:28 +0000
Subject: [R-pkg-devel] Missing R.h file
Message-ID: <509710A6-B52C-4D1A-9EEB-F7A5BEC51C4A@kaust.edu.sa>

I am getting this error when uploading my package to CRAN,


MLE_misc.h:52:10: fatal error: R.h: No such file or directory
   52 | #include <R.h>


On my system I have to export the R include directory to my CPATH  ?export CPATH=/usr/share/R/include:$CPATH? to avoid this error. Could anyone tell me how to do this on my configure file to avoid this error on CRAN?


--Sameh


	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sun Jan 12 17:23:43 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sun, 12 Jan 2020 17:23:43 +0100
Subject: [R-pkg-devel] CRAN Package Check ERROR involving stringi
In-Reply-To: <d8e7a53f73ad4d008d3a5c1d94ab4b80@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
References: <d8e7a53f73ad4d008d3a5c1d94ab4b80@ITUPW-EXMBOX2B.UniNet.unisa.edu.au>
Message-ID: <e33e0ad5-f65e-2502-6eb7-586949360bec@statistik.tu-dortmund.de>

Probably some race condition. Simply submit a new versin.

Best,
Uwe Ligges



On 11.01.2020 03:10, Chris Brien wrote:
> Hi list members,
> 
> On checking the CRAN Package Check Results for my package growthPheno I find that there is the error below for r-devel-windows-ix86+x86_64, but not for r-devel-windows-ix86+x86_64-gcc8. Further, I do not get this error when I run R CMD check --as-cran on the tarball for a new version of growthPheno using r-devel build 77631.
> 
> * installing *source* package 'growthPheno' ...
> ** package 'growthPheno' successfully unpacked and MD5 sums checked
> ** using staged installation
> ** R
> ** data
> ** inst
> ** byte-compile and prepare package for lazy loading
> Error in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]) :
>    there is no package called 'stringi'
> Calls: <Anonymous> ... loadNamespace -> withRestarts -> withOneRestart -> doWithOneRestart
> Execution halted
> ERROR: lazy loading failed for package 'growthPheno'
> * removing 'd:/Rcompile/CRANpkg/lib/4.0/growthPheno'
> * restoring previous 'd:/Rcompile/CRANpkg/lib/4.0/growthPheno'
> 
>   My understanding is that the error arises in connection with ggplot2, which is imported by growthPheno.
> 
> Can I assume that this error is due to some transitory  peculiarity with r-devel-windows-ix86+x86_64 and submit anyway?
> 
> Thanks in advance for any help,
> 
> Cheers,
> 
>    Chris Brien
> 
> Adjunct Associate Professor in Statistics
> -----
> School of Information Technology &  Mathematical Sciences
> University of South Australia
> GPO Box 2471
> ADELAIDE  5001  South Australia
> Phone:? +61 8 8302 5535   Fax:? +61 8 8302 5785
> Email:?? Chris.Brien at unisa.edu.au
> WEB page:? <http://people.unisa.edu.au/Chris.Brien>
> CRICOS No 00121B
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sun Jan 12 17:25:54 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sun, 12 Jan 2020 17:25:54 +0100
Subject: [R-pkg-devel] RES: RES: Possible unknown color in r
In-Reply-To: <001001d5c7ee$7161b3f0$54251bd0$@gmail.com>
References: <000001d5c7ab$22d86640$688932c0$@gmail.com>
 <1578659041746.24320@UGent.be> <000701d5c7b8$6143c980$23cb5c80$@gmail.com>
 <1578664684426.88494@UGent.be> <000d01d5c7d8$237437a0$6a5ca6e0$@gmail.com>
 <AM6P191MB03600B7CF9F75118D208A3F0D5380@AM6P191MB0360.EURP191.PROD.OUTLOOK.COM>
 <001001d5c7ee$7161b3f0$54251bd0$@gmail.com>
Message-ID: <336e2d3f-f2fb-4075-6989-eed7bf75778c@statistik.tu-dortmund.de>

Don't worry, this is an issue that trhe CRAN incoimng checks have not 
uncovered with a new farvber version. As we found the breakage later in 
regular checks, the farver package has been rolled back on CRAN, hence 
pls simpy ignore the problem for your own packages.

Best,
Uwe Ligges



On 10.01.2020 20:44, Tiago Olivoto wrote:
> Hi Berry,
> 
> Thank you for the note.
> 
> When I run my example code with transparent_color() all was working (the
> color was transparent).
> 
> Now, reproducing the code again it becomes black. Could be this be changed
> after package "farver" be updated to v. 2.0.2?
> 
> You is right regarding the use of col = NA. I have some functions that uses
> ggplot2 and col = NA works with lines
> 
>   
> 
> library(ggplot2)
> 
> ggplot(mpg, aes(displ, hwy)) +
> 
>    geom_smooth(color = NA, method = "lm")
> 
>   
> 
> but return a warning message with points
> 
> ggplot(mpg, aes(displ, hwy)) +
> 
>    geom_point(color = NA)
> 
> # Warning message:
> 
> # Removed 234 rows containing missing values (geom_point).
> 
>   
> 
> It seems that the correct "transparent" color I was looking for can be set
> without a warning with "#FFFFFF00"
> 
> ggplot(mpg, aes(displ, hwy)) +
> 
>    geom_point(color = "#FFFFFF00")
> 
> Thanks for the tips.
> 
> Tiago.
> 
>   
> 
> De: Berry Boessenkool <berryboessenkool at hotmail.com>
> Enviada em: sexta-feira, 10 de janeiro de 2020 15:42
> Para: 'Joris Meys' <Joris.Meys at UGent.be>; r-package-devel at r-project.org;
> tiagoolivoto at gmail.com
> Assunto: Re: [R-pkg-devel] RES: Possible unknown color in r
> 
>   
> 
>   
> 
> Side Note:
> 
> plot(1, col="#000000FF", cex=4, pch=16)
> 
> is black on my machine.
> 
> The last two values are alpha (I think) and should be 00 for transparency.
> 
>   
> 
> Instead of writing an extra function, you could also use col=NA.
> 
>   
> 
> Berry
> 
>   
> 
>    _____
> 
> From: R-package-devel <r-package-devel-bounces at r-project.org
> <mailto:r-package-devel-bounces at r-project.org> > on behalf of Tiago Olivoto
> <tiagoolivoto at gmail.com <mailto:tiagoolivoto at gmail.com> >
> Sent: Friday, January 10, 2020 18:05
> To: 'Joris Meys' <Joris.Meys at UGent.be <mailto:Joris.Meys at UGent.be> >;
> r-package-devel at r-project.org <mailto:r-package-devel at r-project.org>
> <r-package-devel at r-project.org <mailto:r-package-devel at r-project.org> >
> Subject: [R-pkg-devel] RES: Possible unknown color in r
> 
>   
> 
> Hi Joris,
> Thank you for your suggestions.
> After installing the version v 2.0.2 of "farver" I was able to reproduce the
> WARNING.
> To fix this issue, I created a simple helper function:
> transparent_color <- function() {
>    return("#000000FF")
> }
> And changed "transparent" with "transparent_color()" in my R scripts.
> After, I built and check again with 'R CMD check --as-cran
> metan_1.2.1.tar.gz' and no longer WARNINGS were observed.
> Thanks again,
> Tiago
> 
> -----Mensagem original-----
> De: Joris Meys <Joris.Meys at UGent.be <mailto:Joris.Meys at UGent.be> >
> Enviada em: sexta-feira, 10 de janeiro de 2020 10:57
> Para: r-package-devel at r-project.org <mailto:r-package-devel at r-project.org> ;
> tiagoolivoto at gmail.com <mailto:tiagoolivoto at gmail.com>
> Assunto: Re: [R-pkg-devel] Possible unknown color in r
> 
> Hi Tiago,
> 
> It's indeed that. For some reason col2rgb() knows the unofficial
> "transparent". Replace this with the correct value from the vector colors(),
> i.e. "white". "transparent" is not mentioned in that vector, so it shouldn't
> be used in a package. See also ?rgb2col and ?colors.
> 
> Cheers
> Joris
> 
> --
> Joris Meys
> Statistical consultant
> 
> Department of Data Analysis and Mathematical Modelling Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
> ------------------------------
> 
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
> 
> 
> ________________________________________
> From: Tiago Olivoto <tiagoolivoto at gmail.com <mailto:tiagoolivoto at gmail.com>
>>
> Sent: Friday, January 10, 2020 2:17 PM
> To: Joris Meys; r-package-devel at r-project.org
> <mailto:r-package-devel at r-project.org>
> Subject: RES: [R-pkg-devel] Possible unknown color in r
> 
> Hi Joris,
> Thank you so much for your assistance.
> I've built and checked my package with:
> R CMD build /d/Desktop/metan
> R CMD check --as-cran metan_1.2.1.tar.gz
> 
> No WARNINGS were observed. Please, see the log file attached.
> Sorry for failing in providing the link to access the check results in the
> last email. You can see the link to the test that doesn't pass bellow.
> 
> Dear maintainer,
>   package metan_1.2.1.tar.gz does not pass the incoming checks automatically,
> please see the following pre-tests:
> Windows:
> <https://win-builder.r-project.org/incoming_pretest/metan_1.2.1_20200109_043
> <https://win-builder.r-project.org/incoming_pretest/metan_1.2.1_20200109_043
> %0b153/Windows/00check.log>
> 153/Windows/00check.log>
> 
> Status: 1 WARNING, 1 NOTE
> Debian:
> <https://win-builder.r-project.org/incoming_pretest/metan_1.2.1_20200109_043
> <https://win-builder.r-project.org/incoming_pretest/metan_1.2.1_20200109_043
> %0b153/Debian/00check.log>
> 153/Debian/00check.log>
> 
> It sounds strange because in the last submissions the package passed in the
> incoming checks, and the only change I've made from v1.2.0 to 1.2.1 was
> adding some references in the description file.
> Best regards,
> Tiago
> 
> -----Mensagem original-----
> De: Joris Meys <Joris.Meys at UGent.be <mailto:Joris.Meys at UGent.be> >
> Enviada em: sexta-feira, 10 de janeiro de 2020 09:23
> Para: r-package-devel at r-project.org <mailto:r-package-devel at r-project.org> ;
> tiagoolivoto at gmail.com <mailto:tiagoolivoto at gmail.com>
> Assunto: Re: [R-pkg-devel] Possible unknown color in r
> 
> Hi Tiago,
> 
> Without knowing which package you're talking about or a link to the check
> results, it's impossible to know whether that warning is a proper one or a
> side effect of something else.
> 
> In general though: it is well known that relying on devtools is not enough
> for a good CRAN submission. The guidelines for CRAN clearly state :
> 
> "Please ensure that R CMD check --as-cran has been run on the tarball to be
> uploaded before submission. This should be done with the current version of
> R-devel (or if that is not possible and explained in the submission, current
> R-patched or the current release of R.)"
> 
> So before submitting a package to CRAN and after running your devtools::
> check_etc, open a terminal and run the following commands:
> 
> R CMD build path_to_pkg_folder
> R CMD check --as-cran package_version.tar.gz
> 
> The --as-cran is important, as is doing so against a R-devel. I use devtools
> myself extensively, but these checks have to be done outside the RStudio
> ecosystem to be sure.
> 
> Kind regards
> Joris
> 
> --
> Joris Meys
> Statistical consultant
> 
> Department of Data Analysis and Mathematical Modelling Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
> ------------------------------
> 
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
> 
> 
> ________________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org
> <mailto:r-package-devel-bounces at r-project.org> > on behalf of
> Tiago Olivoto <tiagoolivoto at gmail.com <mailto:tiagoolivoto at gmail.com> >
> Sent: Friday, January 10, 2020 12:43 PM
> To: r-package-devel at r-project.org <mailto:r-package-devel at r-project.org>
> Subject: [R-pkg-devel] Possible unknown color in r
> 
> Dear all,
> 
> In the last submission of my package the CRAN team has suggested including
> some references in the description field of the DESCRIPTION file.
> When I submitted it to CRAN it did not pass the incoming checks
> automatically and I got the following WARNING.
> 
> 
> 
> Quitting from lines 108-117 (vignettes_metan.Rmd)
> 
> Error: processing vignette 'vignettes_metan.Rmd' failed with diagnostics:
> 
> Unknown colour name: transparent
> 
> 
> 
> It seems that this warning is related to a function with the argument
> 'col.segm.gen = "transparent"'.
> 
> I don't changed anything in this function and in the last submissions no
> warning was related.
> 
> For curiosity I ran:
> 
>> col2rgb("yellow")
> 
>        [,1]
> 
> red    255
> 
> green  255
> 
> blue     0
> 
> 
> 
>> col2rgb("transparent")
> 
>        [,1]
> 
> red    255
> 
> green  255
> 
> blue   255
> 
> 
> 
> No warnings or errors were observed while running devtools::check_rhub(),
> devtools::check_win_devel(), and devtools::check_win_release()
> 
> Any suggestion?
> 
> Best,
> 
> Tiago
> 
> 
> 
> 
>          [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> =
> =
> 
> ______________________________________________
> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
> mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From hongoo| @end|ng |rom m|cro@o|t@com  Mon Jan 13 11:44:35 2020
From: hongoo| @end|ng |rom m|cro@o|t@com (Hong Ooi)
Date: Mon, 13 Jan 2020 10:44:35 +0000
Subject: [R-pkg-devel] 
 [EXTERNAL] Re: Checkpoint package failing CRAN checks
In-Reply-To: <20200110151732.122019b4@trisector>
References: <KU1P153MB0102761F9117AE400327DD90A6390@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <20200110151732.122019b4@trisector>
Message-ID: <KU1P153MB0102EA2DC07DE836B358D694A6350@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>

Good catch, Ivan! Fixing that seems to have done the trick. Thanks!

The question now is why checkpoint hasn't crashed and burned prior to this, but I'll leave that for another day....


-----Original Message-----
From: Ivan Krylov <krylov.r00t at gmail.com> 
Sent: Friday, 10 January 2020 8:18 PM
To: Hong Ooi via R-package-devel <r-package-devel at r-project.org>
Cc: Hong Ooi <hongooi at microsoft.com>
Subject: [EXTERNAL] Re: [R-pkg-devel] Checkpoint package failing CRAN checks

I wonder why does vignettes/checkpoint.Rmd run the following:

> example_project <- tempdir()

Now example_project contains the path of per-session temporary
directory...

> dir.create(example_project, recursive = TRUE, showWarnings = FALSE)

...so there should be no need to create it...

> unlink(example_project, recursive = TRUE)

And deleting it is might be the cause of the problems: rmarkdown
probably uses the same temporary directory to store its own files.

Perhaps example_project should be something like tempfile(project)
instead of just tempdir()? Then dir.create() and unlink() calls start
making sense.

-- 
Best regards,
Ivan


From |uc@r @end|ng |rom |edor@project@org  Mon Jan 13 11:58:56 2020
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Mon, 13 Jan 2020 11:58:56 +0100
Subject: [R-pkg-devel] 
 [EXTERNAL] Re: Checkpoint package failing CRAN checks
In-Reply-To: <KU1P153MB0102EA2DC07DE836B358D694A6350@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
References: <KU1P153MB0102761F9117AE400327DD90A6390@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <20200110151732.122019b4@trisector>
 <KU1P153MB0102EA2DC07DE836B358D694A6350@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
Message-ID: <CALEXWq09zgoCGxJ2EV1jsZJ8W9WwA6nq41ty_sKvur6WXq_YjQ@mail.gmail.com>

El lun., 13 ene. 2020 11:45, Hong Ooi via R-package-devel <
r-package-devel at r-project.org> escribi?:

> Good catch, Ivan! Fixing that seems to have done the trick. Thanks!
>
> The question now is why checkpoint hasn't crashed and burned prior to
> this, but I'll leave that for another day....


This may have something to do with the new staged installation method,
which uncovers this kind of issues with paths.

I?aki

	[[alternative HTML version deleted]]


From jgreenberg @end|ng |rom unr@edu  Tue Jan 14 17:06:51 2020
From: jgreenberg @end|ng |rom unr@edu (Jonathan Greenberg)
Date: Tue, 14 Jan 2020 16:06:51 +0000
Subject: [R-pkg-devel] Proper way to ask a user to set permanent variables?
Message-ID: <CABG0rfsPPDL8G9O44jC0vH8hdyNPkdJ97Vkevf2yv8SA-bOy1w@mail.gmail.com>

Folks:

My package gdalUtils is a wrapper for a set of binaries on disk (the GDAL Utilities) -- these have about as many places to install as there are people installing it, and the system environment variables aren't always much help (they aren't always set) for locating them.  My package is trying to dummy-proof the usage as much as possible, so one of the things it does is if it can't find the install, it goes search for the install in, first, standard locations and runs a short test to see if the install is valid and, if not, goes on a longer hunt.  Right now, it does this search everytime someone boots up R and uses it, which slows down the process.

What I'm wondering is twofold:

1) Are there any packages/methods by which user "preferences" are saved that don't require saving workspaces (e.g. does R have a standardized "preferences" location that packages can use).

2) If the answer to #1 is "no", what is the preferred method for saving variables for use by packages that are always restored on boot -- e.g. I was thinking something like .Renviron but I think that's Rstudio only.  I'm concerned with workspace-type saves since I feel like that often results in a ton of variables being saved.

Thanks!

--j

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jan 14 17:25:56 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 14 Jan 2020 11:25:56 -0500
Subject: [R-pkg-devel] 
 Proper way to ask a user to set permanent variables?
In-Reply-To: <CABG0rfsPPDL8G9O44jC0vH8hdyNPkdJ97Vkevf2yv8SA-bOy1w@mail.gmail.com>
References: <CABG0rfsPPDL8G9O44jC0vH8hdyNPkdJ97Vkevf2yv8SA-bOy1w@mail.gmail.com>
Message-ID: <e71f21b8-80fe-d72d-59f8-1c85f906fa97@gmail.com>

On 14/01/2020 11:06 a.m., Jonathan Greenberg wrote:
> Folks:
> 
> My package gdalUtils is a wrapper for a set of binaries on disk (the GDAL Utilities) -- these have about as many places to install as there are people installing it, and the system environment variables aren't always much help (they aren't always set) for locating them.  My package is trying to dummy-proof the usage as much as possible, so one of the things it does is if it can't find the install, it goes search for the install in, first, standard locations and runs a short test to see if the install is valid and, if not, goes on a longer hunt.  Right now, it does this search everytime someone boots up R and uses it, which slows down the process.
> 
> What I'm wondering is twofold:
> 
> 1) Are there any packages/methods by which user "preferences" are saved that don't require saving workspaces (e.g. does R have a standardized "preferences" location that packages can use).
> 
> 2) If the answer to #1 is "no", what is the preferred method for saving variables for use by packages that are always restored on boot -- e.g. I was thinking something like .Renviron but I think that's Rstudio only.  I'm concerned with workspace-type saves since I feel like that often results in a ton of variables being saved.

You can read ?Startup to see what happens when R starts up.  Putting 
environment variables in .Renviron would work; so would putting R code 
in .Rprofile.  However, those files both belong to the user, so your 
package shouldn't write to them without asking, and it's probably better 
not to write there at all.

A few packages put cached information into a ~/.R directory; I'd suggest 
putting your stuff into ~/.R/gdaUtils/* (after asking for permission).

Duncan Murdoch


From y@ng|eng@t@t @end|ng |rom gm@||@com  Tue Jan 14 17:29:51 2020
From: y@ng|eng@t@t @end|ng |rom gm@||@com (Yang Feng)
Date: Tue, 14 Jan 2020 11:29:51 -0500
Subject: [R-pkg-devel] seeking help regarding the valgrind error
Message-ID: <CAFi3sRyeJtr1NE07aCv24TTM752KuTvEV6v263a20hd-X_pr+g@mail.gmail.com>

Hi All,

Happy new year! I just joined this mailing list and would like to post my
first question.

I received a message earlier this month regarding an error in my R package
RAMP https://cran.r-project.org/web/packages/RAMP/index.html
I need to update the package by the end of this month to prevent it from
removed from CRAN.

The detailed email message is as follows. Does anyone know how to fix this?
Also, how to reproduce this kind of error on my local mac?

Many thanks!


Checking with valgrind shows:

Still

 > fit1 = RAMP(x, y)
==4663== Invalid read of size 8
==4663==    at 0x48A0A51: cd_general_lin_
(/tmp/RAMP.Rcheck/00_pkg_src/RAMP/src/cd_general_lin.f:21)
==4663==    by 0x49DDE6: do_dotCode (svn/R-devel/src/main/dotcode.c:1799)
==4663==    by 0x4D181C: bcEval (svn/R-devel/src/main/eval.c:7054)
==4663==    by 0x4E8197: Rf_eval (svn/R-devel/src/main/eval.c:688)
==4663==    by 0x4E9D56: R_execClosure (svn/R-devel/src/main/eval.c:1853)
==4663==    by 0x4EAB33: Rf_applyClosure (svn/R-devel/src/main/eval.c:1779)
==4663==    by 0x4DB64D: bcEval (svn/R-devel/src/main/eval.c:7022)
==4663==    by 0x4E8197: Rf_eval (svn/R-devel/src/main/eval.c:688)
==4663==    by 0x4E9D56: R_execClosure (svn/R-devel/src/main/eval.c:1853)
==4663==    by 0x4EAB33: Rf_applyClosure (svn/R-devel/src/main/eval.c:1779)
==4663==    by 0x4E8363: Rf_eval (svn/R-devel/src/main/eval.c:811)
==4663==    by 0x4ECD01: do_set (svn/R-devel/src/main/eval.c:2920)
==4663==  Address 0x1616c100 is 7,600 bytes inside a block of size 7,960
alloc'd
==4663==    at 0x483880B: malloc
(/builddir/build/BUILD/valgrind-3.15.0/coregrind/m_replacemalloc/vg_replace_malloc.c:309)
==4663==    by 0x5223E0: GetNewPage (svn/R-devel/src/main/memory.c:946)

Please fix and resubmit.

Best wishes,
Yang

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Jan 14 17:34:13 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 14 Jan 2020 16:34:13 +0000
Subject: [R-pkg-devel] 
 Proper way to ask a user to set permanent variables?
In-Reply-To: <CABG0rfsPPDL8G9O44jC0vH8hdyNPkdJ97Vkevf2yv8SA-bOy1w@mail.gmail.com>
References: <CABG0rfsPPDL8G9O44jC0vH8hdyNPkdJ97Vkevf2yv8SA-bOy1w@mail.gmail.com>
Message-ID: <CABtg=Kkdp=w1N2pxTPZFBesCN6d4x36fgj05S_kyEtdC8OCefw@mail.gmail.com>

You can use the rappdirs package to look up the standard places for
permanent config, cache etc. files. E.g. on macOS:

? rappdirs::user_cache_dir()
[1] "/Users/gaborcsardi/Library/Caches"

Gabor

On Tue, Jan 14, 2020 at 4:10 PM Jonathan Greenberg <jgreenberg at unr.edu> wrote:
>
> Folks:
>
> My package gdalUtils is a wrapper for a set of binaries on disk (the GDAL Utilities) -- these have about as many places to install as there are people installing it, and the system environment variables aren't always much help (they aren't always set) for locating them.  My package is trying to dummy-proof the usage as much as possible, so one of the things it does is if it can't find the install, it goes search for the install in, first, standard locations and runs a short test to see if the install is valid and, if not, goes on a longer hunt.  Right now, it does this search everytime someone boots up R and uses it, which slows down the process.
>
> What I'm wondering is twofold:
>
> 1) Are there any packages/methods by which user "preferences" are saved that don't require saving workspaces (e.g. does R have a standardized "preferences" location that packages can use).
>
> 2) If the answer to #1 is "no", what is the preferred method for saving variables for use by packages that are always restored on boot -- e.g. I was thinking something like .Renviron but I think that's Rstudio only.  I'm concerned with workspace-type saves since I feel like that often results in a ton of variables being saved.
>
> Thanks!
>
> --j
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @ergue|@@oko| @end|ng |rom gm@||@com  Tue Jan 14 18:03:28 2020
From: @ergue|@@oko| @end|ng |rom gm@||@com (Serguei Sokol)
Date: Tue, 14 Jan 2020 18:03:28 +0100
Subject: [R-pkg-devel] seeking help regarding the valgrind error
In-Reply-To: <CAFi3sRyeJtr1NE07aCv24TTM752KuTvEV6v263a20hd-X_pr+g@mail.gmail.com>
References: <CAFi3sRyeJtr1NE07aCv24TTM752KuTvEV6v263a20hd-X_pr+g@mail.gmail.com>
Message-ID: <fa57613e-194a-1039-7a23-6ce4f612b615@gmail.com>

Hi Yang,

Le 14/01/2020 ? 17:29, Yang Feng a ?crit?:
> Hi All,
> 
> Happy new year! I just joined this mailing list and would like to post my
> first question.
> 
> I received a message earlier this month regarding an error in my R package
> RAMP https://cran.r-project.org/web/packages/RAMP/index.html
> I need to update the package by the end of this month to prevent it from
> removed from CRAN.
> 
> The detailed email message is as follows. Does anyone know how to fix this?
Yep. The default value for gamma parameter in RAMP is NULL. So when you 
do in cd.general.R:

	para.in = c(epsilon, max.iter, lambda, gamma)

and later on in .Fortran() call

	..., paraIn = as.double(para.in) ...

you obtain a vector of length 3 while it is expected to be of length 4 
in cd_general_lin.f:

	double precision, dimension(4) :: paraIn

So that when you read the 4-th element on line 21:

	gamma = paraIn(4)

you are caught by valgrid.

Fixing that is left as exercise ;)

Best,
Serguei.


> Also, how to reproduce this kind of error on my local mac?
> 
> Many thanks!
> 
> 
> Checking with valgrind shows:
> 
> Still
> 
>   > fit1 = RAMP(x, y)
> ==4663== Invalid read of size 8
> ==4663==    at 0x48A0A51: cd_general_lin_
> (/tmp/RAMP.Rcheck/00_pkg_src/RAMP/src/cd_general_lin.f:21)
> ==4663==    by 0x49DDE6: do_dotCode (svn/R-devel/src/main/dotcode.c:1799)
> ==4663==    by 0x4D181C: bcEval (svn/R-devel/src/main/eval.c:7054)
> ==4663==    by 0x4E8197: Rf_eval (svn/R-devel/src/main/eval.c:688)
> ==4663==    by 0x4E9D56: R_execClosure (svn/R-devel/src/main/eval.c:1853)
> ==4663==    by 0x4EAB33: Rf_applyClosure (svn/R-devel/src/main/eval.c:1779)
> ==4663==    by 0x4DB64D: bcEval (svn/R-devel/src/main/eval.c:7022)
> ==4663==    by 0x4E8197: Rf_eval (svn/R-devel/src/main/eval.c:688)
> ==4663==    by 0x4E9D56: R_execClosure (svn/R-devel/src/main/eval.c:1853)
> ==4663==    by 0x4EAB33: Rf_applyClosure (svn/R-devel/src/main/eval.c:1779)
> ==4663==    by 0x4E8363: Rf_eval (svn/R-devel/src/main/eval.c:811)
> ==4663==    by 0x4ECD01: do_set (svn/R-devel/src/main/eval.c:2920)
> ==4663==  Address 0x1616c100 is 7,600 bytes inside a block of size 7,960
> alloc'd
> ==4663==    at 0x483880B: malloc
> (/builddir/build/BUILD/valgrind-3.15.0/coregrind/m_replacemalloc/vg_replace_malloc.c:309)
> ==4663==    by 0x5223E0: GetNewPage (svn/R-devel/src/main/memory.c:946)
> 
> Please fix and resubmit.
> 
> Best wishes,
> Yang
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From R@|ner @end|ng |rom krug@@de  Wed Jan 15 08:39:39 2020
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Wed, 15 Jan 2020 08:39:39 +0100
Subject: [R-pkg-devel] 
 Proper way to ask a user to set permanent variables?
In-Reply-To: <CABtg=Kkdp=w1N2pxTPZFBesCN6d4x36fgj05S_kyEtdC8OCefw@mail.gmail.com>
References: <CABG0rfsPPDL8G9O44jC0vH8hdyNPkdJ97Vkevf2yv8SA-bOy1w@mail.gmail.com>
 <CABtg=Kkdp=w1N2pxTPZFBesCN6d4x36fgj05S_kyEtdC8OCefw@mail.gmail.com>
Message-ID: <5157FE26-DC97-4DBE-9365-ED10C31B395C@krugs.de>

I second that - it provides the most consistent way of storing information permanently.

I was in a similar situation, and ended up using the function at 

https://github.com/Exp-Micro-Ecol-Hub/dmdScheme/blob/master/R/cache.R <https://github.com/Exp-Micro-Ecol-Hub/dmdScheme/blob/master/R/cache.R>

And the location `rappdirs::user_config_dir(appname = "dmdScheme", appauthor = "dmdScheme?)` as the permanent cache.

I either either 
- use a temporary cache if the cache does not exist
- if the cache does exist, use that one, and
- use the `createPermanent` argument to create the cache so that it can be used.

Cheers,

Rainer


> On 14 Jan 2020, at 17:34, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> 
> You can use the rappdirs package to look up the standard places for
> permanent config, cache etc. files. E.g. on macOS:
> 
> ? rappdirs::user_cache_dir()
> [1] "/Users/gaborcsardi/Library/Caches"
> 
> Gabor
> 
> On Tue, Jan 14, 2020 at 4:10 PM Jonathan Greenberg <jgreenberg at unr.edu> wrote:
>> 
>> Folks:
>> 
>> My package gdalUtils is a wrapper for a set of binaries on disk (the GDAL Utilities) -- these have about as many places to install as there are people installing it, and the system environment variables aren't always much help (they aren't always set) for locating them.  My package is trying to dummy-proof the usage as much as possible, so one of the things it does is if it can't find the install, it goes search for the install in, first, standard locations and runs a short test to see if the install is valid and, if not, goes on a longer hunt.  Right now, it does this search everytime someone boots up R and uses it, which slows down the process.
>> 
>> What I'm wondering is twofold:
>> 
>> 1) Are there any packages/methods by which user "preferences" are saved that don't require saving workspaces (e.g. does R have a standardized "preferences" location that packages can use).
>> 
>> 2) If the answer to #1 is "no", what is the preferred method for saving variables for use by packages that are always restored on boot -- e.g. I was thinking something like .Renviron but I think that's Rstudio only.  I'm concerned with workspace-type saves since I feel like that often results in a ton of variables being saved.
>> 
>> Thanks!
>> 
>> --j
>> 
>>        [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From drobert@ @end|ng |rom mont@n@@edu  Wed Jan 15 12:11:45 2020
From: drobert@ @end|ng |rom mont@n@@edu (Roberts, David)
Date: Wed, 15 Jan 2020 11:11:45 +0000
Subject: [R-pkg-devel] error in sample(), invalid 'size' argument
Message-ID: <9c52c7b1-2c02-8ae8-a8e3-0316fc36f076@montana.edu>

Colleagues,

    I have a function (maxsimset) in package optpart that has worked for 
at least a decade, passes check --as-cran on my ubuntu-based system, and 
builds without errors at win-builder and CRAN windows, but fails at CRAN 
debian (unstable) with the error

 > mss.test(mss.10,shoshsite$elevation)
Error in sample.int(length(x), size, replace, prob) :
   invalid 'size' argument
Calls: mss.test -> sample -> sample.int

an excerpt of the function is below

  1  mss.test <- function(mss,env,panel='all',
  2              main=deparse(substitute(env)),...)
  3  {
  4      if (class(mss) != "mss") {
  5          stop("You must pass an object of class mss ...")
  6      }
  7      if (!is.numeric(env)) {
  8          stop("You must pass only numeric vectors ... ")
  9      }
10      setsiz <- ncol(mss$member)
11      nset <- mss$numset
12      null <- rep(0,nset)
13      for (i in 1:nset) {
14          tmp <- sample(1:length(env),setsiz)
15          nullmin <- min(env[tmp])
16          nullmax <- max(env[tmp])
17          null[i] <- nullmax - nullmin
18      }
19         .     .      .
20         .     .      .
21         .     .      .
22  }

The error occurs at line 14 in the excerpt above.  As you can see, the 
'size' argument is setsiz, taken at line 10 as the ncol(mss$member); mss 
has already been checked for conformance and does indeed have a list 
object matrix called $member.  In my tests, setsiz has mode numeric, 
class integer, and size 1 as expected.  The specific error message I 
receive can be generated from sample() if size is a list object or 
data.frame, but not a vector or matrix.

Since I cannot replicate the error on any machines I have access to, I 
am at a loss for the reason behind the error.  If this should go to 
R-devel with respect to r77656 ( 2020-01-12) please advise.

Thanks in advance for any help, Dave

From |uc@r @end|ng |rom |edor@project@org  Wed Jan 15 15:15:56 2020
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Wed, 15 Jan 2020 15:15:56 +0100
Subject: [R-pkg-devel] error in sample(), invalid 'size' argument
In-Reply-To: <9c52c7b1-2c02-8ae8-a8e3-0316fc36f076@montana.edu>
References: <9c52c7b1-2c02-8ae8-a8e3-0316fc36f076@montana.edu>
Message-ID: <CALEXWq2pUvu4ioJsQoVyBBdbP-t30HU=zYUKXfTx-TtNUr=UiA@mail.gmail.com>

On Wed, 15 Jan 2020 at 13:58, Roberts, David <droberts at montana.edu> wrote:
>
> Colleagues,
>
>     I have a function (maxsimset) in package optpart that has worked for
> at least a decade, passes check --as-cran on my ubuntu-based system, and
> builds without errors at win-builder and CRAN windows, but fails at CRAN
> debian (unstable) with the error
>
>  > mss.test(mss.10,shoshsite$elevation)
> Error in sample.int(length(x), size, replace, prob) :
>    invalid 'size' argument
> Calls: mss.test -> sample -> sample.int
>
> an excerpt of the function is below
>
>   1  mss.test <- function(mss,env,panel='all',
>   2              main=deparse(substitute(env)),...)
>   3  {
>   4      if (class(mss) != "mss") {

Not related to the issue, but please use "inherits" instead.

>   5          stop("You must pass an object of class mss ...")
>   6      }
>   7      if (!is.numeric(env)) {
>   8          stop("You must pass only numeric vectors ... ")
>   9      }
> 10      setsiz <- ncol(mss$member)
> 11      nset <- mss$numset
> 12      null <- rep(0,nset)
> 13      for (i in 1:nset) {
> 14          tmp <- sample(1:length(env),setsiz)
> 15          nullmin <- min(env[tmp])
> 16          nullmax <- max(env[tmp])
> 17          null[i] <- nullmax - nullmin
> 18      }
> 19         .     .      .
> 20         .     .      .
> 21         .     .      .
> 22  }
>
> The error occurs at line 14 in the excerpt above.  As you can see, the
> 'size' argument is setsiz, taken at line 10 as the ncol(mss$member); mss
> has already been checked for conformance

No, it has not. Nothing stops you from changing the contents of a S3
object, so just verifying the class is not a conformance check.

> and does indeed have a list object matrix called $member.

What do you mean by "list object matrix"?

> In my tests, setsiz has mode numeric,
> class integer, and size 1 as expected.  The specific error message I
> receive can be generated from sample() if size is a list object or
> data.frame, but not a vector or matrix.

My guess is that, in some call, you got an unintended simplification
when assigning $member. For any object without a "dim" attribute,
ncol(object) is NULL. And a NULL size in sample() raises such an
error.

I?aki


From wdun|@p @end|ng |rom t|bco@com  Wed Jan 15 16:17:23 2020
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Wed, 15 Jan 2020 07:17:23 -0800
Subject: [R-pkg-devel] error in sample(), invalid 'size' argument
In-Reply-To: <9c52c7b1-2c02-8ae8-a8e3-0316fc36f076@montana.edu>
References: <9c52c7b1-2c02-8ae8-a8e3-0316fc36f076@montana.edu>
Message-ID: <CAF8bMcbuxB=_Z3eX=WZYkKJyArr_B0yYox5dX8LkvmJ-UKMpjQ@mail.gmail.com>

If mss$member is not a matrix you will get that error because setsiz will
be NULL.

  > setsiz <- ncol( 33 )
  > sample(1:3, setsiz)
  Error in sample.int(length(x), size, replace, prob) :
    invalid 'size' argument


Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Wed, Jan 15, 2020 at 4:58 AM Roberts, David <droberts at montana.edu> wrote:

> Colleagues,
>
>     I have a function (maxsimset) in package optpart that has worked for
> at least a decade, passes check --as-cran on my ubuntu-based system, and
> builds without errors at win-builder and CRAN windows, but fails at CRAN
> debian (unstable) with the error
>
>  > mss.test(mss.10,shoshsite$elevation)
> Error in sample.int(length(x), size, replace, prob) :
>    invalid 'size' argument
> Calls: mss.test -> sample -> sample.int
>
> an excerpt of the function is below
>
>   1  mss.test <- function(mss,env,panel='all',
>   2              main=deparse(substitute(env)),...)
>   3  {
>   4      if (class(mss) != "mss") {
>   5          stop("You must pass an object of class mss ...")
>   6      }
>   7      if (!is.numeric(env)) {
>   8          stop("You must pass only numeric vectors ... ")
>   9      }
> 10      setsiz <- ncol(mss$member)
> 11      nset <- mss$numset
> 12      null <- rep(0,nset)
> 13      for (i in 1:nset) {
> 14          tmp <- sample(1:length(env),setsiz)
> 15          nullmin <- min(env[tmp])
> 16          nullmax <- max(env[tmp])
> 17          null[i] <- nullmax - nullmin
> 18      }
> 19         .     .      .
> 20         .     .      .
> 21         .     .      .
> 22  }
>
> The error occurs at line 14 in the excerpt above.  As you can see, the
> 'size' argument is setsiz, taken at line 10 as the ncol(mss$member); mss
> has already been checked for conformance and does indeed have a list
> object matrix called $member.  In my tests, setsiz has mode numeric,
> class integer, and size 1 as expected.  The specific error message I
> receive can be generated from sample() if size is a list object or
> data.frame, but not a vector or matrix.
>
> Since I cannot replicate the error on any machines I have access to, I
> am at a loss for the reason behind the error.  If this should go to
> R-devel with respect to r77656 ( 2020-01-12) please advise.
>
> Thanks in advance for any help, Dave
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From drobert@ @end|ng |rom mont@n@@edu  Wed Jan 15 19:25:55 2020
From: drobert@ @end|ng |rom mont@n@@edu (Roberts, David)
Date: Wed, 15 Jan 2020 18:25:55 +0000
Subject: [R-pkg-devel] error in sample(), invalid 'size' argument
In-Reply-To: <CAF8bMcbuxB=_Z3eX=WZYkKJyArr_B0yYox5dX8LkvmJ-UKMpjQ@mail.gmail.com>
References: <9c52c7b1-2c02-8ae8-a8e3-0316fc36f076@montana.edu>
 <CAF8bMcbuxB=_Z3eX=WZYkKJyArr_B0yYox5dX8LkvmJ-UKMpjQ@mail.gmail.com>
Message-ID: <18065ef0-b016-f0a5-d9e2-fd1a6fc50918@montana.edu>

Dear Bill, Dear I?aki,

    Thank you both; I'm confident that you are right.  I realized a list 
or data.frame would generate that error message, but I did not know that 
NULL would also do so.

     This means the the error occurred in the previous function call 
which produced an output object that lacked the matrix expected at 
$member.  As I?aki well notes, the existence of an object of the correct 
class doesn't guarantee it is well-formed.  On my machine (and those I 
have access to), str(mss) returns

  List of 7
  $ musubx  : num [1:78, 1:10] 1 1 1 1 1 1 1 1 1 1 ...
  $ member  : int [1:78, 1:10] 1 2 3 4 5 6 8 9 10 11 ...
  $ numset  : int 78
  $ size    : num 10
  $ alphac  : NULL
  $ distname: chr "dis.bc"
  $ numele  : int 150
  - attr(*, "class")= chr "mss"
  - attr(*, "call")= language maxsimset(dist = dis.bc, size = 10)
  - attr(*, "timestamp")= chr "Wed Jan 15 19:15:33 2020"

where clearly $member is a matrix with 10 columns.

    Unfortunately, I cannot generate the error on any machines I have 
access to and will have to find a debian machine running R-devel to do 
any debugging.

Thanks for your help, Dave

On 1/15/20 4:17 PM, William Dunlap wrote:
> If mss$member is not a matrix you will get that error because setsiz 
> will be NULL.
> 
>  ? > setsiz <- ncol( 33 )
>  ? > sample(1:3, setsiz)
>  ? Error in sample.int <http://sample.int>(length(x), size, replace, 
> prob) :
>  ? ? invalid 'size' argument
> 
> 
> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com <http://tibco.com>
> 
> 
> On Wed, Jan 15, 2020 at 4:58 AM Roberts, David <droberts at montana.edu 
> <mailto:droberts at montana.edu>> wrote:
> 
>     Colleagues,
> 
>      ? ? I have a function (maxsimset) in package optpart that has
>     worked for
>     at least a decade, passes check --as-cran on my ubuntu-based system,
>     and
>     builds without errors at win-builder and CRAN windows, but fails at
>     CRAN
>     debian (unstable) with the error
> 
>      ?> mss.test(mss.10,shoshsite$elevation)
>     Error in sample.int <http://sample.int>(length(x), size, replace,
>     prob) :
>      ? ?invalid 'size' argument
>     Calls: mss.test -> sample -> sample.int <http://sample.int>
> 
>     an excerpt of the function is below
> 
>      ? 1? mss.test <- function(mss,env,panel='all',
>      ? 2? ? ? ? ? ? ? main=deparse(substitute(env)),...)
>      ? 3? {
>      ? 4? ? ? if (class(mss) != "mss") {
>      ? 5? ? ? ? ? stop("You must pass an object of class mss ...")
>      ? 6? ? ? }
>      ? 7? ? ? if (!is.numeric(env)) {
>      ? 8? ? ? ? ? stop("You must pass only numeric vectors ... ")
>      ? 9? ? ? }
>     10? ? ? setsiz <- ncol(mss$member)
>     11? ? ? nset <- mss$numset
>     12? ? ? null <- rep(0,nset)
>     13? ? ? for (i in 1:nset) {
>     14? ? ? ? ? tmp <- sample(1:length(env),setsiz)
>     15? ? ? ? ? nullmin <- min(env[tmp])
>     16? ? ? ? ? nullmax <- max(env[tmp])
>     17? ? ? ? ? null[i] <- nullmax - nullmin
>     18? ? ? }
>     19? ? ? ? ?.? ? ?.? ? ? .
>     20? ? ? ? ?.? ? ?.? ? ? .
>     21? ? ? ? ?.? ? ?.? ? ? .
>     22? }
> 
>     The error occurs at line 14 in the excerpt above.? As you can see, the
>     'size' argument is setsiz, taken at line 10 as the ncol(mss$member);
>     mss
>     has already been checked for conformance and does indeed have a list
>     object matrix called $member.? In my tests, setsiz has mode numeric,
>     class integer, and size 1 as expected.? The specific error message I
>     receive can be generated from sample() if size is a list object or
>     data.frame, but not a vector or matrix.
> 
>     Since I cannot replicate the error on any machines I have access to, I
>     am at a loss for the reason behind the error.? If this should go to
>     R-devel with respect to r77656 ( 2020-01-12) please advise.
> 
>     Thanks in advance for any help, Dave
>     ______________________________________________
>     R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>
>     mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

From |uc@r @end|ng |rom |edor@project@org  Wed Jan 15 19:42:09 2020
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Wed, 15 Jan 2020 19:42:09 +0100
Subject: [R-pkg-devel] error in sample(), invalid 'size' argument
In-Reply-To: <18065ef0-b016-f0a5-d9e2-fd1a6fc50918@montana.edu>
References: <9c52c7b1-2c02-8ae8-a8e3-0316fc36f076@montana.edu>
 <CAF8bMcbuxB=_Z3eX=WZYkKJyArr_B0yYox5dX8LkvmJ-UKMpjQ@mail.gmail.com>
 <18065ef0-b016-f0a5-d9e2-fd1a6fc50918@montana.edu>
Message-ID: <CALEXWq0Lr4K4xJ3K0Ds1CmG=buk5A2qQ6OMkSpwaU7NWWtGeeQ@mail.gmail.com>

On Wed, 15 Jan 2020 at 19:26, Roberts, David <droberts at montana.edu> wrote:
>
> Dear Bill, Dear I?aki,
>
>     Thank you both; I'm confident that you are right.  I realized a list
> or data.frame would generate that error message, but I did not know that
> NULL would also do so.
>
>      This means the the error occurred in the previous function call
> which produced an output object that lacked the matrix expected at
> $member.  As I?aki well notes, the existence of an object of the correct
> class doesn't guarantee it is well-formed.  On my machine (and those I
> have access to), str(mss) returns
>
>   List of 7
>   $ musubx  : num [1:78, 1:10] 1 1 1 1 1 1 1 1 1 1 ...
>   $ member  : int [1:78, 1:10] 1 2 3 4 5 6 8 9 10 11 ...
>   $ numset  : int 78
>   $ size    : num 10
>   $ alphac  : NULL
>   $ distname: chr "dis.bc"
>   $ numele  : int 150
>   - attr(*, "class")= chr "mss"
>   - attr(*, "call")= language maxsimset(dist = dis.bc, size = 10)
>   - attr(*, "timestamp")= chr "Wed Jan 15 19:15:33 2020"
>
> where clearly $member is a matrix with 10 columns.
>
>     Unfortunately, I cannot generate the error on any machines I have
> access to and will have to find a debian machine running R-devel to do
> any debugging.

I would try the Debian machines on rhub: they should be pretty up to
date with the CRAN configuration, and if you can reproduce the error
there, then you can test a more verbose output without importuning
CRAN, or you could even run those configurations and investigate
locally using rhub's dockerfiles.

I?aki


From drobert@ @end|ng |rom mont@n@@edu  Wed Jan 15 20:26:46 2020
From: drobert@ @end|ng |rom mont@n@@edu (Roberts, David)
Date: Wed, 15 Jan 2020 19:26:46 +0000
Subject: [R-pkg-devel] error in sample(), invalid 'size' argument
In-Reply-To: <CALEXWq0Lr4K4xJ3K0Ds1CmG=buk5A2qQ6OMkSpwaU7NWWtGeeQ@mail.gmail.com>
References: <9c52c7b1-2c02-8ae8-a8e3-0316fc36f076@montana.edu>
 <CAF8bMcbuxB=_Z3eX=WZYkKJyArr_B0yYox5dX8LkvmJ-UKMpjQ@mail.gmail.com>
 <18065ef0-b016-f0a5-d9e2-fd1a6fc50918@montana.edu>
 <CALEXWq0Lr4K4xJ3K0Ds1CmG=buk5A2qQ6OMkSpwaU7NWWtGeeQ@mail.gmail.com>
Message-ID: <67220beb-0c8d-677c-d839-6ec408a6da30@montana.edu>

Thanks I?aki.  I was unaware of rhub.  Nice tool!  Unfortunately, their 
debian machine odes not reproduce the error.  I have written the R 
Submission crew to see if I can submit a package with a 
print(str(mss.10)) call to see the output in the examples log, or if 
that is an abuse of CRAN submission.  We'll see what they say.

Thanks again for your help, Dave

On 1/15/20 7:42 PM, I?aki Ucar wrote:
> On Wed, 15 Jan 2020 at 19:26, Roberts, David <droberts at montana.edu> wrote:
>>
>> Dear Bill, Dear I?aki,
>>
>>      Thank you both; I'm confident that you are right.  I realized a list
>> or data.frame would generate that error message, but I did not know that
>> NULL would also do so.
>>
>>       This means the the error occurred in the previous function call
>> which produced an output object that lacked the matrix expected at
>> $member.  As I?aki well notes, the existence of an object of the correct
>> class doesn't guarantee it is well-formed.  On my machine (and those I
>> have access to), str(mss) returns
>>
>>    List of 7
>>    $ musubx  : num [1:78, 1:10] 1 1 1 1 1 1 1 1 1 1 ...
>>    $ member  : int [1:78, 1:10] 1 2 3 4 5 6 8 9 10 11 ...
>>    $ numset  : int 78
>>    $ size    : num 10
>>    $ alphac  : NULL
>>    $ distname: chr "dis.bc"
>>    $ numele  : int 150
>>    - attr(*, "class")= chr "mss"
>>    - attr(*, "call")= language maxsimset(dist = dis.bc, size = 10)
>>    - attr(*, "timestamp")= chr "Wed Jan 15 19:15:33 2020"
>>
>> where clearly $member is a matrix with 10 columns.
>>
>>      Unfortunately, I cannot generate the error on any machines I have
>> access to and will have to find a debian machine running R-devel to do
>> any debugging.
> 
> I would try the Debian machines on rhub: they should be pretty up to
> date with the CRAN configuration, and if you can reproduce the error
> there, then you can test a more verbose output without importuning
> CRAN, or you could even run those configurations and investigate
> locally using rhub's dockerfiles.
> 
> I?aki
> 

-- 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
David W. Roberts
Professor
Department of Ecology, Montana State University
On sabbatical at:
Swiss Federal Research Institute WSL,
Zuercherstrasse 111
CH-8903 Birmensdorf, Switzerland

From jgreenberg @end|ng |rom unr@edu  Wed Jan 15 22:39:19 2020
From: jgreenberg @end|ng |rom unr@edu (Jonathan Greenberg)
Date: Wed, 15 Jan 2020 21:39:19 +0000
Subject: [R-pkg-devel] Alternatives to R-devel on a Mac for package checking?
Message-ID: <CABG0rfvpt+9bicqkBAq+KX24apZtH_k-NjoUdn3Y32LGo-1q=w@mail.gmail.com>

One of the issues I'm running into is that it seems every time there's a Mac update something gets broken with regards to compilers, making it incredibly challenging to get the development install of R working with Rcpp (which is a requirement for the packages I need to use to check my packages).

I'd like to start moving towards an easier approach rather than spending days fixing various issues on my Mac just to run a simple --as-cran check on a package with the latest  r-devel.  I was HOPING there is an up-to-date Docker for the r-development 4.0 version out in the wild, but it seems like the rocker r-devel is just 3.6.2.  Any ideas?

docker run --rm -ti rocker/r-devel

Alternatively, are there any decent online checkers (except the CRAN ones)?  r-forge seems to not do r-devel checks anymore.

--j

	[[alternative HTML version deleted]]


From c|yde @end|ng |rom duke@edu  Wed Jan 15 22:54:04 2020
From: c|yde @end|ng |rom duke@edu (Merlise Clyde, Ph.D.)
Date: Wed, 15 Jan 2020 21:54:04 +0000
Subject: [R-pkg-devel] Alternatives to R-devel on a Mac for package
 checking?
In-Reply-To: <CABG0rfvpt+9bicqkBAq+KX24apZtH_k-NjoUdn3Y32LGo-1q=w@mail.gmail.com>
References: <CABG0rfvpt+9bicqkBAq+KX24apZtH_k-NjoUdn3Y32LGo-1q=w@mail.gmail.com>
Message-ID: <25F9297A-0413-4677-831E-1EA8FEA98AA4@duke.edu>

Hi Jonathan,

rocker/r-devel was updated yesterday afternoon (I was able to pull it using docker on my mac - tested and it works with gcc 9/gfortran 9) and valgrind

(many thanks to the rockerstars!)

best,
Merlise

Merlise A Clyde
Professor Department of Statistical Science
Duke University
http://stat.duke.edu/~clyde

clyde at duke.edu<mailto:clyde at duke.edu>
919 681 8440





On Jan 15, 2020, at 4:39 PM, Jonathan Greenberg <jgreenberg at unr.edu<mailto:jgreenberg at unr.edu>> wrote:

One of the issues I'm running into is that it seems every time there's a Mac update something gets broken with regards to compilers, making it incredibly challenging to get the development install of R working with Rcpp (which is a requirement for the packages I need to use to check my packages).

I'd like to start moving towards an easier approach rather than spending days fixing various issues on my Mac just to run a simple --as-cran check on a package with the latest  r-devel.  I was HOPING there is an up-to-date Docker for the r-development 4.0 version out in the wild, but it seems like the rocker r-devel is just 3.6.2.  Any ideas?

docker run --rm -ti rocker/r-devel

Alternatively, are there any decent online checkers (except the CRAN ones)?  r-forge seems to not do r-devel checks anymore.

--j

[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org<mailto:R-package-devel at r-project.org> mailing list
https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwICAg&c=imBPVzF25OnBgGmVOlcsiEgHoG1i6YHLR0Sj_gZ4adc&r=NOkxkvdFOOffXzeTY2kgZQ&m=oGJmbsAoNZKb4jPaU6N5uD_efT7bUREy5-CKNu7kg7c&s=XrowfhQmMclrE7WUMhq7ERAk0Df5q02p-pGMB3jDdIM&e=


	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Wed Jan 15 23:47:34 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 15 Jan 2020 16:47:34 -0600
Subject: [R-pkg-devel] 
 Proper way to ask a user to set permanent variables?
In-Reply-To: <CABG0rfsPPDL8G9O44jC0vH8hdyNPkdJ97Vkevf2yv8SA-bOy1w@mail.gmail.com>
References: <CABG0rfsPPDL8G9O44jC0vH8hdyNPkdJ97Vkevf2yv8SA-bOy1w@mail.gmail.com>
Message-ID: <24095.38534.125150.373615@rob.eddelbuettel.com>


Jonathan,

In all but one (maybe two?) of my packages I found relying on options()
sufficient. I usually follow the somewhat-common pattern of creating a
package-local environment in R/init.R or R/zzz.R. I then fill it with values
reflecting options() (often under a tag starting with the package name)
and/or environment variables, and sometime also provide 'setters' to update
the environment values. That have proven to be both good enough and rather
robust and, as an added benefit, does not depend on anything further.

Cheers, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd @end|ng |rom deb|@n@org  Wed Jan 15 23:53:10 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 15 Jan 2020 16:53:10 -0600
Subject: [R-pkg-devel] Alternatives to R-devel on a Mac for package
 checking?
In-Reply-To: <25F9297A-0413-4677-831E-1EA8FEA98AA4@duke.edu>
References: <CABG0rfvpt+9bicqkBAq+KX24apZtH_k-NjoUdn3Y32LGo-1q=w@mail.gmail.com>
 <25F9297A-0413-4677-831E-1EA8FEA98AA4@duke.edu>
Message-ID: <24095.38870.713369.302831@rob.eddelbuettel.com>


Jonathan,

Rocker should be building weekly r-devel and drd (similar, was meant to be a
littler "lighter", effectively the same) images.

As Merlise noticed, somehow the cronjob push to the Docker Hub build service
started to fail -- this sadly happens once in a while so I manually triggered
a rebuild. They should be good now for 'R 4.0.0 to be'. Remember to invoke it
as 'RD' (for R-Devel) in the image, there is also an r-release as just 'R'.

Your case of "am on mac and need newer stuff" was also encountered last year
by Roger Koenker whom I helped a little bit via a few short emails -- leading
him to go from "zero to hero" with Docker.  We wrote a short blog post on
that which you can find at

  http://dirk.eddelbuettel.com/blog/2019/08/05#023_rocker_debug_example

It's nice as it gives a full rundown of all steps.

Hope this helps,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Thu Jan 16 00:15:21 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Wed, 15 Jan 2020 17:15:21 -0600
Subject: [R-pkg-devel] How to create a new project on GitHub?
Message-ID: <414f2466-ab7b-205f-988e-fe5c73a26205@effectivedefense.org>

Hello, All:


 ????? How can I create a new project within my GitHub account 
(https://github.com/sbgraves237/)?


 ????? I'm trying to follow "http://r-pkgs.had.co.nz/git.html":


...
Synchronising with GitHub
...

 ??? Open a shell, then follow the instructions on the new repo page. 
They?ll look something like this:

 ??? git remote add origin git at github.com:hadley/r-pkgs.git
 ??? git push -u origin master

I tried:

...$ git remote add origin git at github.com:sbgraves237/fda.git
...$ git push -u origin master
ERROR: Repository not found.
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.


*** That didn't work, so I tried


...$ git remote add origin https://[my ssh code]@github.com/sbgraves237/fda
fatal: remote origin already exists.
...$ git push -u origin master
ERROR: Repository not found.
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.


 ????? *** What do I need to do to fix the mess I seem to have created 
and get what I want?


 ????? *** Thanks, Spencer Graves


p.s.? If you know the fda package, you know that James Ramsay is the 
primary author, and I'm one of his long-time collaborators.? He has a 
new version he wants to clean up and submit to CRAN, and I'm trying to 
help him.? Thanks.? sg


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Thu Jan 16 00:34:00 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Wed, 15 Jan 2020 17:34:00 -0600
Subject: [R-pkg-devel] How to create a new project on GitHub?
In-Reply-To: <CABtg=Km8-7M4HEC-utM9C2CsNYmVGEx1nv0TABMy_qau4sPCmw@mail.gmail.com>
References: <414f2466-ab7b-205f-988e-fe5c73a26205@effectivedefense.org>
 <CABtg=Km8-7M4HEC-utM9C2CsNYmVGEx1nv0TABMy_qau4sPCmw@mail.gmail.com>
Message-ID: <7bddead4-350c-147a-e24e-eef0d5fbfbdd@effectivedefense.org>



On 2020-01-15 17:18, G?bor Cs?rdi wrote:
> Seems like you skipped step 1?
>
> "1. Create a new repo on GitHub: https://github.com/new. Give it the
> same name as your package, and include the package title as the repo
> description. Leave all the other options as is, then click Submit."
>
> Gabor


 ????? Thanks.? I now have "https://github.com/sbgraves237/fda". Then I 
did "git push --set-upstream origin master", and it seemed to work.


 ????? Thanks again.
 ????? Spencer
>
> On Wed, Jan 15, 2020 at 11:15 PM Spencer Graves
> <spencer.graves at effectivedefense.org> wrote:
>> Hello, All:
>>
>>
>>         How can I create a new project within my GitHub account
>> (https://github.com/sbgraves237/)?
>>
>>
>>         I'm trying to follow "http://r-pkgs.had.co.nz/git.html":
>>
>>
>> ...
>> Synchronising with GitHub
>> ...
>>
>>       Open a shell, then follow the instructions on the new repo page.
>> They?ll look something like this:
>>
>>       git remote add origin git at github.com:hadley/r-pkgs.git
>>       git push -u origin master
>>
>> I tried:
>>
>> ...$ git remote add origin git at github.com:sbgraves237/fda.git
>> ...$ git push -u origin master
>> ERROR: Repository not found.
>> fatal: Could not read from remote repository.
>>
>> Please make sure you have the correct access rights
>> and the repository exists.
>>
>>
>> *** That didn't work, so I tried
>>
>>
>> ...$ git remote add origin https://[my ssh code]@github.com/sbgraves237/fda
>> fatal: remote origin already exists.
>> ...$ git push -u origin master
>> ERROR: Repository not found.
>> fatal: Could not read from remote repository.
>>
>> Please make sure you have the correct access rights
>> and the repository exists.
>>
>>
>>         *** What do I need to do to fix the mess I seem to have created
>> and get what I want?
>>
>>
>>         *** Thanks, Spencer Graves
>>
>>
>> p.s.  If you know the fda package, you know that James Ramsay is the
>> primary author, and I'm one of his long-time collaborators.  He has a
>> new version he wants to clean up and submit to CRAN, and I'm trying to
>> help him.  Thanks.  sg
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jgreenberg @end|ng |rom unr@edu  Thu Jan 16 03:29:33 2020
From: jgreenberg @end|ng |rom unr@edu (Jonathan Greenberg)
Date: Thu, 16 Jan 2020 02:29:33 +0000
Subject: [R-pkg-devel] Alternatives to R-devel on a Mac for package
 checking?
In-Reply-To: <7167fd89edea43db8d0b33b3c2e992a0@CY4PR0101MB3029.prod.exchangelabs.com>
References: <CABG0rfvpt+9bicqkBAq+KX24apZtH_k-NjoUdn3Y32LGo-1q=w@mail.gmail.com>
 <25F9297A-0413-4677-831E-1EA8FEA98AA4@duke.edu>
 <7167fd89edea43db8d0b33b3c2e992a0@CY4PR0101MB3029.prod.exchangelabs.com>
Message-ID: <CABG0rft=F=rh12RWdOXHeBmgH3jJcSqChRNoJmqMFyerL_sVGA@mail.gmail.com>

Awesome -- the key was the "RD", so for me:

docker run -v /Users:/Users --rm -ti rocker/r-devel RD

(where, on a Mac, I was binding my Mac's /Users to the Docker's /Users directory)

Thanks, all!

--j

On Wed, Jan 15, 2020 at 2:53 PM Dirk Eddelbuettel <edd at debian.org<mailto:edd at debian.org>> wrote:

Jonathan,

Rocker should be building weekly r-devel and drd (similar, was meant to be a
littler "lighter", effectively the same) images.

As Merlise noticed, somehow the cronjob push to the Docker Hub build service
started to fail -- this sadly happens once in a while so I manually triggered
a rebuild. They should be good now for 'R 4.0.0 to be'. Remember to invoke it
as 'RD' (for R-Devel) in the image, there is also an r-release as just 'R'.

Your case of "am on mac and need newer stuff" was also encountered last year
by Roger Koenker whom I helped a little bit via a few short emails -- leading
him to go from "zero to hero" with Docker.  We wrote a short blog post on
that which you can find at

  https://nam04.safelinks.protection.outlook.com/?url=http%3A%2F%2Fdirk.eddelbuettel.com%2Fblog%2F2019%2F08%2F05%23023_rocker_debug_example&amp;data=01%7C01%7Cjgreenberg%40unr.edu%7C047d13c96404437a1ddc08d79a0db508%7C523b4bfc0ebd4c03b2b96f6a17fd31d8%7C1&amp;sdata=fYy14TBshMGoU%2FbpY%2BC5dRIqSEN20EjcyMeZ4KFgSsg%3D&amp;reserved=0

It's nice as it gives a full rundown of all steps.

Hope this helps,  Dirk

--
https://nam04.safelinks.protection.outlook.com/?url=http%3A%2F%2Fdirk.eddelbuettel.com&amp;data=01%7C01%7Cjgreenberg%40unr.edu%7C047d13c96404437a1ddc08d79a0db508%7C523b4bfc0ebd4c03b2b96f6a17fd31d8%7C1&amp;sdata=08%2FZup32MftvnSq6YVpWAjhpQBpDAUE7Hm0E5pUh7x8%3D&amp;reserved=0 | @eddelbuettel | edd at debian.org<mailto:edd at debian.org>

	[[alternative HTML version deleted]]


From c|yde @end|ng |rom duke@edu  Thu Jan 16 05:23:21 2020
From: c|yde @end|ng |rom duke@edu (Merlise Clyde, Ph.D.)
Date: Thu, 16 Jan 2020 04:23:21 +0000
Subject: [R-pkg-devel] Alternatives to R-devel on a Mac for package
 checking?
In-Reply-To: <CABG0rft=F=rh12RWdOXHeBmgH3jJcSqChRNoJmqMFyerL_sVGA@mail.gmail.com>
References: <CABG0rfvpt+9bicqkBAq+KX24apZtH_k-NjoUdn3Y32LGo-1q=w@mail.gmail.com>
 <25F9297A-0413-4677-831E-1EA8FEA98AA4@duke.edu>
 <7167fd89edea43db8d0b33b3c2e992a0@CY4PR0101MB3029.prod.exchangelabs.com>
 <CABG0rft=F=rh12RWdOXHeBmgH3jJcSqChRNoJmqMFyerL_sVGA@mail.gmail.com>
Message-ID: <EBDDE230-F010-4703-9C9E-907A762753E3@duke.edu>

Just in case it helps anyone else who struggles to reproduce CRAN valgind checks, I decided to document my steps with R-devel & valgrind  at https://github.com/merliseclyde/docker-valgrind has the Dockerfiles to build a container starting with rocker/r-devel and adding supporting files to build the package using gcc-9 and gfortran-9

Waiting to see if that configuration actually reproduces the CRAN results  (fingers-crossed that the valgrind issues have been eliminated)

best,
Merlise


Merlise A Clyde
Professor Department of Statistical Science
Duke University
http://stat.duke.edu/~clyde

clyde at duke.edu<mailto:clyde at duke.edu>
919 681 8440





On Jan 15, 2020, at 9:29 PM, Jonathan Greenberg <jgreenberg at unr.edu<mailto:jgreenberg at unr.edu>> wrote:

Awesome -- the key was the "RD", so for me:

docker run -v /Users:/Users --rm -ti rocker/r-devel RD

(where, on a Mac, I was binding my Mac's /Users to the Docker's /Users directory)

Thanks, all!

--j

On Wed, Jan 15, 2020 at 2:53 PM Dirk Eddelbuettel <edd at debian.org<mailto:edd at debian.org>> wrote:

Jonathan,

Rocker should be building weekly r-devel and drd (similar, was meant to be a
littler "lighter", effectively the same) images.

As Merlise noticed, somehow the cronjob push to the Docker Hub build service
started to fail -- this sadly happens once in a while so I manually triggered
a rebuild. They should be good now for 'R 4.0.0 to be'. Remember to invoke it
as 'RD' (for R-Devel) in the image, there is also an r-release as just 'R'.

Your case of "am on mac and need newer stuff" was also encountered last year
by Roger Koenker whom I helped a little bit via a few short emails -- leading
him to go from "zero to hero" with Docker.  We wrote a short blog post on
that which you can find at

  https://nam04.safelinks.protection.outlook.com/?url=http%3A%2F%2Fdirk.eddelbuettel.com%2Fblog%2F2019%2F08%2F05%23023_rocker_debug_example&amp;data=01%7C01%7Cjgreenberg%40unr.edu%7C047d13c96404437a1ddc08d79a0db508%7C523b4bfc0ebd4c03b2b96f6a17fd31d8%7C1&amp;sdata=fYy14TBshMGoU%2FbpY%2BC5dRIqSEN20EjcyMeZ4KFgSsg%3D&amp;reserved=0<https://urldefense.proofpoint.com/v2/url?u=https-3A__nam04.safelinks.protection.outlook.com_-3Furl-3Dhttp-253A-252F-252Fdirk.eddelbuettel.com-252Fblog-252F2019-252F08-252F05-2523023-5Frocker-5Fdebug-5Fexample-26amp-3Bdata-3D01-257C01-257Cjgreenberg-2540unr.edu-257C047d13c96404437a1ddc08d79a0db508-257C523b4bfc0ebd4c03b2b96f6a17fd31d8-257C1-26amp-3Bsdata-3DfYy14TBshMGoU-252FbpY-252BC5dRIqSEN20EjcyMeZ4KFgSsg-253D-26amp-3Breserved-3D0&d=DwMGaQ&c=imBPVzF25OnBgGmVOlcsiEgHoG1i6YHLR0Sj_gZ4adc&r=NOkxkvdFOOffXzeTY2kgZQ&m=Xo31aJy4OM-qE6jLQrFJ5NaTWLKG962AGtdiHWdcPcY&s=-3w7gHfMDif4atQO7aBVbi2j6Y3Pmki4v-lM4Qcpat4&e=>

It's nice as it gives a full rundown of all steps.

Hope this helps,  Dirk

--
https://nam04.safelinks.protection.outlook.com/?url=http%3A%2F%2Fdirk.eddelbuettel.com&amp;data=01%7C01%7Cjgreenberg%40unr.edu%7C047d13c96404437a1ddc08d79a0db508%7C523b4bfc0ebd4c03b2b96f6a17fd31d8%7C1&amp;sdata=08%2FZup32MftvnSq6YVpWAjhpQBpDAUE7Hm0E5pUh7x8%3D&amp;reserved=0<https://urldefense.proofpoint.com/v2/url?u=https-3A__nam04.safelinks.protection.outlook.com_-3Furl-3Dhttp-253A-252F-252Fdirk.eddelbuettel.com-26amp-3Bdata-3D01-257C01-257Cjgreenberg-2540unr.edu-257C047d13c96404437a1ddc08d79a0db508-257C523b4bfc0ebd4c03b2b96f6a17fd31d8-257C1-26amp-3Bsdata-3D08-252FZup32MftvnSq6YVpWAjhpQBpDAUE7Hm0E5pUh7x8-253D-26amp-3Breserved-3D0&d=DwMGaQ&c=imBPVzF25OnBgGmVOlcsiEgHoG1i6YHLR0Sj_gZ4adc&r=NOkxkvdFOOffXzeTY2kgZQ&m=Xo31aJy4OM-qE6jLQrFJ5NaTWLKG962AGtdiHWdcPcY&s=fTKxC_Pl5byzzFFuJNqhJZDOwnQYCHXKIrMkEI7ubmw&e=> | @eddelbuettel | edd at debian.org<mailto:edd at debian.org>


	[[alternative HTML version deleted]]


From tom@@@k||egr @end|ng |rom v@e@cz  Thu Jan 16 09:49:38 2020
From: tom@@@k||egr @end|ng |rom v@e@cz (=?utf-8?B?VG9tw6HFoSBLbGllZ3I=?=)
Date: Thu, 16 Jan 2020 08:49:38 +0000
Subject: [R-pkg-devel] Updating package with a dependency (rJava) that
 doesn't build on all flavours
In-Reply-To: <HE1PR0602MB36277F7FB4CA70A5C3A7965CF9460@HE1PR0602MB3627.eurprd06.prod.outlook.com>
References: <HE1PR0602MB3627364506D1B7F93621020FF9740@HE1PR0602MB3627.eurprd06.prod.outlook.com>
 <HE1PR0602MB36272F96177E059BD295AEC7F9760@HE1PR0602MB3627.eurprd06.prod.outlook.com>
 <265e9e7d-a720-41ce-915d-3232533ac592@gmail.com>
 <AM6PR0602MB36214637ED42613B53FB21E8F9760@AM6PR0602MB3621.eurprd06.prod.outlook.com>,
 <CAA1+RSFga=CrnAU64kr9n01LofxSfF7xZUruL3ir+yr4aSecWQ@mail.gmail.com>,
 <HE1PR0602MB36274F8E7092E89E4109A93FF9710@HE1PR0602MB3627.eurprd06.prod.outlook.com>,
 <HE1PR0602MB36277F7FB4CA70A5C3A7965CF9460@HE1PR0602MB3627.eurprd06.prod.outlook.com>
Message-ID: <VI1PR0601MB23345AB5C97385F3DCF00FF2F9360@VI1PR0601MB2334.eurprd06.prod.outlook.com>

Hi,

This issue has been apparently solved: https://github.com/s-u/rJava/issues/203


Tomas
________________________________
Od: R-package-devel <r-package-devel-bounces at r-project.org> za u?ivatele Tom?? Kliegr <tomas.kliegr at vse.cz>
Odesl?no: p?tek 29. listopadu 2019 15:40
Komu: r-package-devel at r-project.org <r-package-devel at r-project.org>
P?edm?t: Re: [R-pkg-devel] Updating package with a dependency (rJava) that doesn't build on all flavours

Hi,

Just a brief update: It seems that this problem still persists and indeed prevents updates of multiple packages in CRAN.
I, therefore, setup a GitHub issue for it here: https://github.com/s-u/rJava/issues/203#issuecomment-557927860

Tomas



________________________________
Od: R-package-devel <r-package-devel-bounces at r-project.org> za u?ivatele Tom?? Kliegr <tomas.kliegr at vse.cz>
Odesl?no: ?tvrtek 14. listopadu 2019 16:52
Komu: Kevin Kuo <kevinykuo at gmail.com>; r-package-devel at r-project.org <r-package-devel at r-project.org>
P?edm?t: Re: [R-pkg-devel] Updating package with a dependency (rJava) that doesn't build on all flavours

Hi,

>https://stat.ethz.ch/pipermail/r-package-devel/2019q4/004539.html

Yes, it is almost certainly the same issue as this one reported in October 2019. It seems that the policy must have changed sometime around September. As follows from "Reverse depends" of rJava, packages depending on rJava were successfully updated in mid-2019. The most recently updated package was apparently Crossover in May 2019.

Tomas
________________________________
Od: R-package-devel <r-package-devel-bounces at r-project.org> za u?ivatele Kevin Kuo <kevinykuo at gmail.com>
Odesl?no: st?eda 13. listopadu 2019 19:54
Komu: r-package-devel at r-project.org <r-package-devel at r-project.org>
P?edm?t: Re: [R-pkg-devel] Updating package with a dependency (rJava) that doesn't build on all flavours

FYI see also
https://stat.ethz.ch/pipermail/r-package-devel/2019q4/004539.html

On Wed, Nov 13, 2019 at 10:52 AM Tom?? Kliegr <tomas.kliegr at vse.cz> wrote:

> Hi,
>
> >This is probably a temporary Java installation problem on a CRAN Windows
> machine, CRAN-submissions at r-project.org is the right place to report
> this, please be patient.
>
> I am  not sure this is the case, to me it looks like a recent policy
> change. The rJava builds were not going through on this particular machine
> for quite some time, and this had no effect on the updates of packages
> depending on rJava being accepted. Now, they seem to get automatically
> rejected. Regarding the email to CRAN-submissions at r-project.org, I sent
> it a week ago, but maybe this just takes longer than I though.. will wait,
>
> It is also possible that I am overlooking something important...
>
> Best,
>
> Tomas
>
> ________________________________
> Od: Tomas Kalibera <tomas.kalibera at gmail.com>
> Odesl?no: st?eda 13. listopadu 2019 11:03
> Komu: Tom?? Kliegr <tomas.kliegr at vse.cz>; r-package-devel at r-project.org <
> r-package-devel at r-project.org>
> P?edm?t: Re: [R-pkg-devel] Updating package with a dependency (rJava) that
> doesn't build on all flavours
>
> On 11/13/19 10:19 AM, Tom?? Kliegr wrote:
> > Hello,
> >
> > This question has not stirred much discussion ... If this is the wrong
> place to ask,  I was wondering if some one point me to where I should ask,
> or who to approach?  If I understand this issue correctly, it does not
> affect only my package, but also the maintainers of 50+ other packages that
> depend on rJava when they will try to update the package.
> >
> > So far I tried putting the explanation to the comment field when
> submitting the update, and I also tried emailing
> CRAN-submissions at r-project.org, but that was also without response so far.
>
> This is probably a temporary Java installation problem on a CRAN Windows
> machine, CRAN-submissions at r-project.org is the right place to report
> this, please be patient.
>
> Thanks
> Tomas
>
> >
> > Thanks for any pointers,
> >
> > Tomas
> > ________________________________
> > Od: R-package-devel <r-package-devel-bounces at r-project.org> za
> u?ivatele Tom?? Kliegr <tomas.kliegr at vse.cz>
> > Odesl?no: pond?l? 11. listopadu 2019 11:09
> > Komu: r-package-devel at r-project.org <r-package-devel at r-project.org>
> > P?edm?t: [R-pkg-devel] Updating package with a dependency (rJava) that
> doesn't build on all flavours
> >
> > Hi,
> >
> > I maintain a package in CRAN, for which I am struggling to push the
> latest updates.
> >
> > The problem is as follows:
> > My package passes tests without error or notice on all flavors but one,
> where the install fails due to an installation error of a dependency
> package (package rJava on r-devel-windows-ix86+x86_64). This installation
> error was already there in the past submissions of my package to CRAN, and
> was not previously considered as a blocker to the package (or its updates)
> being accepted (Current CRAN status: ERROR: 1, OK: 10)
> >
> > Now, the package updates are automatically rejected:
> >
> > xxxx
> >
> > package qCBA_0.4.tar.gz does not pass the incoming checks automatically,
> please see the following pre-tests:
> > Windows: <
> https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191108_100822/Windows/00check.log
> >
> > Status: 1 ERROR
> > Debian: <
> https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191108_100822/Debian/00check.log
> >
> > Status: OK
> >
> > xxxx
> >
> > I cannot fix the problem with the dependency (rJava), and I also cannot
> remove rJava from my package.
> >
> > More details:
> > Installation of  rJava package fails on 32-bit Windows, as can be seen
> here:
> >
> https://win-builder.r-project.org/incoming_pretest/qCBA_0.4_20191106_094406/Windows/00install.out
> ("keine zul?ssige Win32-Anwendung" error)
> > This problem seems to apply generally to the rJava package, not just to
> its use in my package:
> https://cran.r-project.org/web/checks/check_results_rJava.html.
> >
> > I've also described this in the "Optional comment" field.
> >
> > Any help is appreciated,
> >
> > Tomas
> >
> >
> >
> >          [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> >        [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From gkr@emer @end|ng |rom bgc-jen@@mpg@de  Thu Jan 16 16:57:21 2020
From: gkr@emer @end|ng |rom bgc-jen@@mpg@de (Guido Kraemer)
Date: Thu, 16 Jan 2020 16:57:21 +0100
Subject: [R-pkg-devel] warnings by 3rd party headers
Message-ID: <d026fa35-f618-9ed3-7351-da19a81d8c3c@bgc-jena.mpg.de>

I need to distribute some 3rd party headers with my package. The headers 
make R CMD check produce warnings:

    File which contains pragma(s) suppressing important diagnostics:
    ...
    Files which contain pragma(s) suppressing diagnostics:
    ...

There are some additional NOTEs on the use of `std::cout` which is being 
used in some of the headers.

If I want to submit the package to CRAN in the future, do I have to edit 
the headers?

Cheers,

Guido


From |uc@r @end|ng |rom |edor@project@org  Thu Jan 16 17:06:30 2020
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Thu, 16 Jan 2020 17:06:30 +0100
Subject: [R-pkg-devel] warnings by 3rd party headers
In-Reply-To: <d026fa35-f618-9ed3-7351-da19a81d8c3c@bgc-jena.mpg.de>
References: <d026fa35-f618-9ed3-7351-da19a81d8c3c@bgc-jena.mpg.de>
Message-ID: <CALEXWq16d6kyCK8gWcUM_c6pMgLOfM8+Br_JJGme=mygq294iA@mail.gmail.com>

On Thu, 16 Jan 2020 at 16:58, Guido Kraemer <gkraemer at bgc-jena.mpg.de> wrote:
>
> I need to distribute some 3rd party headers with my package. The headers
> make R CMD check produce warnings:
>
>     File which contains pragma(s) suppressing important diagnostics:
>     ...
>     Files which contain pragma(s) suppressing diagnostics:
>     ...
>
> There are some additional NOTEs on the use of `std::cout` which is being
> used in some of the headers.
>
> If I want to submit the package to CRAN in the future, do I have to edit
> the headers?

I think so. That's what, e.g., Dirk does for BH:
https://github.com/eddelbuettel/bh/commit/313da3cb04227d96daafa2d73668b30fa3fd10fc

I?aki


From edd @end|ng |rom deb|@n@org  Thu Jan 16 17:12:29 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 16 Jan 2020 10:12:29 -0600
Subject: [R-pkg-devel] warnings by 3rd party headers
In-Reply-To: <CALEXWq16d6kyCK8gWcUM_c6pMgLOfM8+Br_JJGme=mygq294iA@mail.gmail.com>
References: <d026fa35-f618-9ed3-7351-da19a81d8c3c@bgc-jena.mpg.de>
 <CALEXWq16d6kyCK8gWcUM_c6pMgLOfM8+Br_JJGme=mygq294iA@mail.gmail.com>
Message-ID: <24096.35693.915598.549652@rob.eddelbuettel.com>


On 16 January 2020 at 17:06, I?aki Ucar wrote:
| On Thu, 16 Jan 2020 at 16:58, Guido Kraemer <gkraemer at bgc-jena.mpg.de> wrote:
| >
| > I need to distribute some 3rd party headers with my package. The headers
| > make R CMD check produce warnings:
| >
| >     File which contains pragma(s) suppressing important diagnostics:
| >     ...
| >     Files which contain pragma(s) suppressing diagnostics:
| >     ...
| >
| > There are some additional NOTEs on the use of `std::cout` which is being
| > used in some of the headers.
| >
| > If I want to submit the package to CRAN in the future, do I have to edit
| > the headers?
| 
| I think so. That's what, e.g., Dirk does for BH:
| https://github.com/eddelbuettel/bh/commit/313da3cb04227d96daafa2d73668b30fa3fd10fc

=:-)

Beat me to it. Was about to show the last diff:
https://github.com/eddelbuettel/bh/blob/master/local/patches/bh_1.72.0-0.diagnostics.patch

The policy is, if I may use salty language for once, idiotic^Ha really bad
call. But I don't get to make the policy so I just live by it.

So yes Guido, you have to.  And again on each upstream upgrade you cover.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From R@|ner @end|ng |rom krug@@de  Fri Jan 17 09:01:14 2020
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Fri, 17 Jan 2020 09:01:14 +0100
Subject: [R-pkg-devel] 
 Proper way to ask a user to set permanent variables?
In-Reply-To: <24095.38534.125150.373615@rob.eddelbuettel.com>
References: <CABG0rfsPPDL8G9O44jC0vH8hdyNPkdJ97Vkevf2yv8SA-bOy1w@mail.gmail.com>
 <24095.38534.125150.373615@rob.eddelbuettel.com>
Message-ID: <DA29B4F6-0E7C-43A8-925C-22F74DFAADDE@krugs.de>

Hi Dirk,

The package-local environment is definitely a good approach (I use it myself an a few packages). And the options() are nice as they represent a standardised interface in R (Note to myself: I should use these more in my packages).

But unless I am missing something, these are not persistent between sessions? I assume, that is not an issue in your case?

Cheers,

Rainer
 

> On 15 Jan 2020, at 23:47, Dirk Eddelbuettel <edd at debian.org> wrote:
> 
> 
> Jonathan,
> 
> In all but one (maybe two?) of my packages I found relying on options()
> sufficient. I usually follow the somewhat-common pattern of creating a
> package-local environment in R/init.R or R/zzz.R. I then fill it with values
> reflecting options() (often under a tag starting with the package name)
> and/or environment variables, and sometime also provide 'setters' to update
> the environment values. That have proven to be both good enough and rather
> robust and, as an added benefit, does not depend on anything further.
> 
> Cheers, Dirk
> 
> -- 
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From zk@mv@r @end|ng |rom gm@||@com  Fri Jan 17 10:49:09 2020
From: zk@mv@r @end|ng |rom gm@||@com (Zhian Kamvar)
Date: Fri, 17 Jan 2020 09:49:09 +0000
Subject: [R-pkg-devel] 
 Proper way to ask a user to set permanent variables?
In-Reply-To: <DA29B4F6-0E7C-43A8-925C-22F74DFAADDE@krugs.de>
References: <CABG0rfsPPDL8G9O44jC0vH8hdyNPkdJ97Vkevf2yv8SA-bOy1w@mail.gmail.com>
 <24095.38534.125150.373615@rob.eddelbuettel.com>
 <DA29B4F6-0E7C-43A8-925C-22F74DFAADDE@krugs.de>
Message-ID: <CAPsXksJHGn338H-PWnvvn0-YH2v+2=uqCL1Fg+jMShcbzTMaQQ@mail.gmail.com>

Options are not persistent between sessions unless the user wants them to
be. You can have users set the options in their .Rprofile either in the
working directory of the project or their home directory. This is the
method that the {usethis} package has for storing default names. The only
downside to this is that any R scripts associated will not be reproducible
unless paired with the .Rprofile file.

Best,
Zhian

On Fri, Jan 17, 2020 at 8:01 AM Rainer M Krug <Rainer at krugs.de> wrote:

> Hi Dirk,
>
> The package-local environment is definitely a good approach (I use it
> myself an a few packages). And the options() are nice as they represent a
> standardised interface in R (Note to myself: I should use these more in my
> packages).
>
> But unless I am missing something, these are not persistent between
> sessions? I assume, that is not an issue in your case?
>
> Cheers,
>
> Rainer
>
>
> > On 15 Jan 2020, at 23:47, Dirk Eddelbuettel <edd at debian.org> wrote:
> >
> >
> > Jonathan,
> >
> > In all but one (maybe two?) of my packages I found relying on options()
> > sufficient. I usually follow the somewhat-common pattern of creating a
> > package-local environment in R/init.R or R/zzz.R. I then fill it with
> values
> > reflecting options() (often under a tag starting with the package name)
> > and/or environment variables, and sometime also provide 'setters' to
> update
> > the environment values. That have proven to be both good enough and
> rather
> > robust and, as an added benefit, does not depend on anything further.
> >
> > Cheers, Dirk
> >
> > --
> > http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
> Biology, UCT), Dipl. Phys. (Germany)
>
> Orcid ID: 0000-0002-7490-0066
>
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
>
> Office: +41 (0)44 635 47 64
> Cell:           +41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch
>                 Rainer at krugs.de
> Skype:     RMkrug
>
> PGP: 0x0F52F982
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Fri Jan 17 13:50:11 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 17 Jan 2020 06:50:11 -0600
Subject: [R-pkg-devel] 
 Proper way to ask a user to set permanent variables?
In-Reply-To: <CAPsXksJHGn338H-PWnvvn0-YH2v+2=uqCL1Fg+jMShcbzTMaQQ@mail.gmail.com>
References: <CABG0rfsPPDL8G9O44jC0vH8hdyNPkdJ97Vkevf2yv8SA-bOy1w@mail.gmail.com>
 <24095.38534.125150.373615@rob.eddelbuettel.com>
 <DA29B4F6-0E7C-43A8-925C-22F74DFAADDE@krugs.de>
 <CAPsXksJHGn338H-PWnvvn0-YH2v+2=uqCL1Fg+jMShcbzTMaQQ@mail.gmail.com>
Message-ID: <24097.44419.632121.782570@rob.eddelbuettel.com>


On 17 January 2020 at 09:49, Zhian Kamvar wrote:
| Options are not persistent between sessions unless the user wants them to
| be. You can have users set the options in their .Rprofile either in the
| working directory of the project or their home directory. This is the

Yes, precisely.

| method that the {usethis} package has for storing default names. The only

Sure, but the point of the approach is that it needs no other packages.

One may of course use a helper function or tool to edit / add / modify but
key is that every standard editor used to modify R code can modify .Rprofile.

| downside to this is that any R scripts associated will not be reproducible
| unless paired with the .Rprofile file.

Sure but it shares that problem with _every_ machine-local configuration method.
It really is a different problem, and again one you _could_ address in
initialization code by checking for options being present, their values etc pp

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From wkmt|er|e @end|ng |rom qu@edu@@@  Fri Jan 17 14:55:39 2020
From: wkmt|er|e @end|ng |rom qu@edu@@@ (=?iso-8859-6?B?6OTqzyDO5OEg5dno1iDH5OXX6tHp?=)
Date: Fri, 17 Jan 2020 13:55:39 +0000
Subject: [R-pkg-devel] For reproducibility issue
Message-ID: <AM0PR07MB633907E456BC9967F8CEB80BEF310@AM0PR07MB6339.eurprd07.prod.outlook.com>

Hi,

I am maintaining the EpiILMCT package in CRAN that has been removed recently because of the non-producibility issue. My package passes all the tests without warnings and errors. The issue comes from the tests examples of two functions that are based on Fortran subroutines (comparing the test .R files to the corresponding .Rout.save files). These have an option of fixing the (Fortran) random number generator used for making reproducible results. The difference of results were found in platforms that used the new version of GCC 8 or GCC 9. This might be because the RNG method used in random_number function is different between the used version GCC 6 or less and the new ones GCC 8 or greater. Platforms used version of GCC less than 8 have not produced any different results. So, does anyone have an idea of how to solve this issue.

Many thanks,

Waleed

Sent from Mail<https://go.microsoft.com/fwlink/?LinkId=550986> for Windows 10


	[[alternative HTML version deleted]]


From br|@n-j-@m|th @end|ng |rom u|ow@@edu  Fri Jan 17 15:14:01 2020
From: br|@n-j-@m|th @end|ng |rom u|ow@@edu (Smith, Brian J)
Date: Fri, 17 Jan 2020 14:14:01 +0000
Subject: [R-pkg-devel] S3 generic/method consistency warning for formula
 method
Message-ID: <SN6PR04MB43823869DC02AF8186AFC372B2310@SN6PR04MB4382.namprd04.prod.outlook.com>

Hello all,

I am getting an R CMD check warning about S3 consistency for a formula method of a generic function that dispatches on the ellipsis argument.  The formula method seems to function properly when called, and methods for other types tried do not trigger the warning.  Below is an example generic function 'foo' and methods that will reproduce the issue, followed by the check warning message produced.

foo <- function(...) UseMethod("foo")
foo.factor <- function(...) list(...)
foo.formula <- function(...) list(...)
foo.logical <- function(...) list(...)
foo.matrix <- function(...) list(...)
foo.numeric <- function(...) list(...)

R CMD check warning:

W  checking S3 generic/method consistency (1.7s)
   foo:
     function(...)
   foo.formula:
     function(...)
   
   See section 'Generic functions and methods' in the 'Writing R
   Extensions' manual.

I would appreciate any help in understanding and addressing this check warning.

Thank you,
Brian

*****************************************************************
Brian J Smith, PhD
Professor, Department of Biostatistics
Director, Biostatistics Core, Holden Comprehensive Cancer Center
The University of Iowa
145 North Riverside Drive, N311 CPHB
Phone: 319-384-1587
Email: brian-j-smith at uiowa.edu


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Jan 17 15:39:14 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 17 Jan 2020 17:39:14 +0300
Subject: [R-pkg-devel] For reproducibility issue
In-Reply-To: <AM0PR07MB633907E456BC9967F8CEB80BEF310@AM0PR07MB6339.eurprd07.prod.outlook.com>
References: <AM0PR07MB633907E456BC9967F8CEB80BEF310@AM0PR07MB6339.eurprd07.prod.outlook.com>
Message-ID: <20200117173914.425e1bb8@trisector>

On Fri, 17 Jan 2020 13:55:39 +0000
???? ??? ???? ??????? <wkmtierie at qu.edu.sa> wrote:

> So, does anyone have an idea of how to solve this issue.

"Writing R Extensions", 1.6. Writing portable packages:

>> Compiled code should not call the system random number generators
>> such as rand, drand48 and random, but rather use the interfaces to
>> R?s RNGs described in Random numbers. In particular, if more than
>> one package initializes the system RNG (e.g. via srand), they will
>> interfere with each other.

>> Nor should the C++11 random number library be used, nor any other
>> third-party random number generators such as those in GSL.

It somewhat less convenient to call the R random number generator from
Fortran than it would be from C or C++, but still possible. There is a
F77-style example of such use [1], but since you are already using
iso_c_binding, you should be able to declare the C API [2] right in the
Fortran source:

subroutine GetRNGState() bind(c)
end subroutine

subroutine PutRNGstate() bind(c)
end subroutine

As a bonus, you get to use the R distribution functions [3], without
the need to implement them yourself from uniformly distributed samples:

function rnorm(mu, sigma) bind(c) result(ret)
 use intrinsic, iso_c_binding, only: c_double
 real(c_double), value :: mu, sigma
 real(c_double) ret
end function

function rgamma(shape, scale) bind(c) result(ret)
 use intrinsic, iso_c_binding, only: c_double
 real(c_double), value :: shape, scale
 real(c_double) ret
end function

(The prototypes above are unchecked; I haven't written any Fortran 2003
in more than a year.)

-- 
Best regards,
Ivan

[1]:
https://cran.r-project.org/doc/manuals/R-exts.html#index-Random-numbers-in-Fortran

[2]: https://cran.r-project.org/doc/manuals/R-exts.html#Random-numbers

[3]:
https://cran.r-project.org/doc/manuals/R-exts.html#Distribution-functions


From @vr@h@m@@d|er @end|ng |rom gm@||@com  Fri Jan 17 16:30:08 2020
From: @vr@h@m@@d|er @end|ng |rom gm@||@com (Avraham Adler)
Date: Fri, 17 Jan 2020 15:30:08 +0000
Subject: [R-pkg-devel] For reproducibility issue
In-Reply-To: <20200117173914.425e1bb8@trisector>
References: <AM0PR07MB633907E456BC9967F8CEB80BEF310@AM0PR07MB6339.eurprd07.prod.outlook.com>
 <20200117173914.425e1bb8@trisector>
Message-ID: <CAL6gwnJdK9k6U22u6OvO+uwfLzrqLKN5jaW_9suDc=zW-smXEA@mail.gmail.com>

Hi.

If it helps, I call the R RNG from Fortran in my Delaporte package
[1], also using iso_c_bindings. Specifically, I have the following C
code [2]:

void F77_SUB(unifrnd) (int *n, double *x){
GetRNGstate();
for (int i = 0; i < *n; ++i){
*(x + i) = unif_rand();
}
PutRNGstate();
}
and call it in Fortran like so [3]:

subroutine rdelap_f(n, a, na, b, nb, l, nl, vars) bind(C, name="rdelap_f_")

external unifrnd

integer(kind = c_int), intent(in), value :: n, na, nb, nl
real(kind = c_double), intent(out), dimension(n) :: vars
real(kind = c_double), intent(in) :: a(na), b(nb), l(nl)
real(kind = c_double), dimension(n) :: p
integer(kind = c_int) :: lg, lt

call unifrnd(n, p)
lt = 1_c_int
lg = 0_c_int
call qdelap_f(p, n, a, na, b, nb, l, nl, lt, lg, vars)

end subroutine rdelap_f

The package passes CRAN tests (at least as of now) on anything between
GCC 4 and GCC9 [4].

Hope that helps,

Avi

[1] https://bitbucket.org/aadler/delaporte/src/master/
[2] https://bitbucket.org/aadler/delaporte/src/master/src/utils_and_wrappers.c
[3] https://bitbucket.org/aadler/delaporte/src/master/src/delaporte.f95
[4] https://cran.r-project.org/web/checks/check_results_Delaporte.html


On Fri, Jan 17, 2020 at 2:39 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:
>
> On Fri, 17 Jan 2020 13:55:39 +0000
> ???? ??? ???? ??????? <wkmtierie at qu.edu.sa> wrote:
>
> > So, does anyone have an idea of how to solve this issue.
>
> "Writing R Extensions", 1.6. Writing portable packages:
>
> >> Compiled code should not call the system random number generators
> >> such as rand, drand48 and random, but rather use the interfaces to
> >> R?s RNGs described in Random numbers. In particular, if more than
> >> one package initializes the system RNG (e.g. via srand), they will
> >> interfere with each other.
>
> >> Nor should the C++11 random number library be used, nor any other
> >> third-party random number generators such as those in GSL.
>
> It somewhat less convenient to call the R random number generator from
> Fortran than it would be from C or C++, but still possible. There is a
> F77-style example of such use [1], but since you are already using
> iso_c_binding, you should be able to declare the C API [2] right in the
> Fortran source:
>
> subroutine GetRNGState() bind(c)
> end subroutine
>
> subroutine PutRNGstate() bind(c)
> end subroutine
>
> As a bonus, you get to use the R distribution functions [3], without
> the need to implement them yourself from uniformly distributed samples:
>
> function rnorm(mu, sigma) bind(c) result(ret)
>  use intrinsic, iso_c_binding, only: c_double
>  real(c_double), value :: mu, sigma
>  real(c_double) ret
> end function
>
> function rgamma(shape, scale) bind(c) result(ret)
>  use intrinsic, iso_c_binding, only: c_double
>  real(c_double), value :: shape, scale
>  real(c_double) ret
> end function
>
> (The prototypes above are unchecked; I haven't written any Fortran 2003
> in more than a year.)
>
> --
> Best regards,
> Ivan
>
> [1]:
> https://cran.r-project.org/doc/manuals/R-exts.html#index-Random-numbers-in-Fortran
>
> [2]: https://cran.r-project.org/doc/manuals/R-exts.html#Random-numbers
>
> [3]:
> https://cran.r-project.org/doc/manuals/R-exts.html#Distribution-functions
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From br|@n-j-@m|th @end|ng |rom u|ow@@edu  Fri Jan 17 16:59:49 2020
From: br|@n-j-@m|th @end|ng |rom u|ow@@edu (Smith, Brian J)
Date: Fri, 17 Jan 2020 15:59:49 +0000
Subject: [R-pkg-devel] 
 [External] Re: S3 generic/method consistency warning
 for formula method
In-Reply-To: <c8ea2799-574a-4858-5cc6-d79ea60e7bf3@gmail.com>
References: <SN6PR04MB43823869DC02AF8186AFC372B2310@SN6PR04MB4382.namprd04.prod.outlook.com>
 <c8ea2799-574a-4858-5cc6-d79ea60e7bf3@gmail.com>
Message-ID: <SN6PR04MB43820698ABEF5A08DC2FBB23B2310@SN6PR04MB4382.namprd04.prod.outlook.com>

Thanks Duncan.

I was surprised too when first realizing this was possible.  I believe the reason it works is that UseMethod dispatches on the first supplied argument by default.  So, really the dispatch is on the first element of the ellipsis.  The 'c' function works like this, albeit as a primitive function.

I would like to dispatch on the ellipsis to allow a user to name values being passed in.  Defining an initial x argument would indeed eliminate the warning, but would not allow for user-naming of the value.  I could have the user pass a list of values to x and do dispatching manually, but that seems like more steps for the user and more complication for the implementation than ought to be necessary.  There are other downsides to that approach in my particularly application...

The issue mentioned below about calling the function with no arguments can be solved by defining the following default method.

foo.default <- function(...) list(...)

-----Original Message-----
From: Duncan Murdoch <murdoch.duncan at gmail.com> 
Sent: Friday, January 17, 2020 9:24 AM
To: Smith, Brian J <brian-j-smith at uiowa.edu>; r-package-devel at r-project.org
Subject: [External] Re: [R-pkg-devel] S3 generic/method consistency warning for formula method

On 17/01/2020 9:14 a.m., Smith, Brian J wrote:
> Hello all,
> 
> I am getting an R CMD check warning about S3 consistency for a formula method of a generic function that dispatches on the ellipsis argument.  The formula method seems to function properly when called, and methods for other types tried do not trigger the warning.  Below is an example generic function 'foo' and methods that will reproduce the issue, followed by the check warning message produced.
> 
> foo <- function(...) UseMethod("foo")
> foo.factor <- function(...) list(...)
> foo.formula <- function(...) list(...) foo.logical <- function(...) 
> list(...) foo.matrix <- function(...) list(...) foo.numeric <- 
> function(...) list(...)

I'm surprised that you are allowed to have a generic with no arguments except "...".  I imagine the error will go away if you change the definitions to

foo <- function(x, ...) UseMethod("foo") foo.factor <- function(x, ...) list(x, ...) foo.formula <- function(x, ...) list(x, ...) foo.logical <- function(x, ...) list(x, ...) foo.matrix <- function(x, ...) list(x, ...) foo.numeric <- function(x, ...) list(x, ...)

With your original definition, it would be legal to call foo(), but the
UseMethod() would fail.

Duncan Murdoch

> 
> R CMD check warning:
> 
> W  checking S3 generic/method consistency (1.7s)
>     foo:
>       function(...)
>     foo.formula:
>       function(...)
>     
>     See section 'Generic functions and methods' in the 'Writing R
>     Extensions' manual.
> 
> I would appreciate any help in understanding and addressing this check warning.
> 
> Thank you,
> Brian
> 
> *****************************************************************
> Brian J Smith, PhD
> Professor, Department of Biostatistics Director, Biostatistics Core, 
> Holden Comprehensive Cancer Center The University of Iowa
> 145 North Riverside Drive, N311 CPHB
> Phone: 319-384-1587
> Email: brian-j-smith at uiowa.edu
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Jan 17 17:00:29 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 17 Jan 2020 08:00:29 -0800
Subject: [R-pkg-devel] For reproducibility issue
In-Reply-To: <20200117173914.425e1bb8@trisector>
References: <AM0PR07MB633907E456BC9967F8CEB80BEF310@AM0PR07MB6339.eurprd07.prod.outlook.com>
 <20200117173914.425e1bb8@trisector>
Message-ID: <6B54838C-1C74-47F8-9BE8-63E6097FFE57@dcn.davis.ca.us>

As an existing package I suspect that it already calls the R RNG, but the default RNG changed [1] so you need to call
RNGkind(sample.kind = "Rounding") before calling set.seed in your test code to compare with old results.

[1] https://stackoverflow.com/questions/47199415/is-set-seed-consistent-over-different-versions-of-r-and-ubuntu/56381613#56381613

On January 17, 2020 6:39:14 AM PST, Ivan Krylov <krylov.r00t at gmail.com> wrote:
>On Fri, 17 Jan 2020 13:55:39 +0000
>???? ??? ???? ??????? <wkmtierie at qu.edu.sa> wrote:
>
>> So, does anyone have an idea of how to solve this issue.
>
>"Writing R Extensions", 1.6. Writing portable packages:
>
>>> Compiled code should not call the system random number generators
>>> such as rand, drand48 and random, but rather use the interfaces to
>>> R?s RNGs described in Random numbers. In particular, if more than
>>> one package initializes the system RNG (e.g. via srand), they will
>>> interfere with each other.
>
>>> Nor should the C++11 random number library be used, nor any other
>>> third-party random number generators such as those in GSL.
>
>It somewhat less convenient to call the R random number generator from
>Fortran than it would be from C or C++, but still possible. There is a
>F77-style example of such use [1], but since you are already using
>iso_c_binding, you should be able to declare the C API [2] right in the
>Fortran source:
>
>subroutine GetRNGState() bind(c)
>end subroutine
>
>subroutine PutRNGstate() bind(c)
>end subroutine
>
>As a bonus, you get to use the R distribution functions [3], without
>the need to implement them yourself from uniformly distributed samples:
>
>function rnorm(mu, sigma) bind(c) result(ret)
> use intrinsic, iso_c_binding, only: c_double
> real(c_double), value :: mu, sigma
> real(c_double) ret
>end function
>
>function rgamma(shape, scale) bind(c) result(ret)
> use intrinsic, iso_c_binding, only: c_double
> real(c_double), value :: shape, scale
> real(c_double) ret
>end function
>
>(The prototypes above are unchecked; I haven't written any Fortran 2003
>in more than a year.)

-- 
Sent from my phone. Please excuse my brevity.


From Jor|@@Mey@ @end|ng |rom UGent@be  Fri Jan 17 17:11:51 2020
From: Jor|@@Mey@ @end|ng |rom UGent@be (Joris Meys)
Date: Fri, 17 Jan 2020 16:11:51 +0000
Subject: [R-pkg-devel] 
 [External] Re: S3 generic/method consistency warning
 for formula method
In-Reply-To: <SN6PR04MB43820698ABEF5A08DC2FBB23B2310@SN6PR04MB4382.namprd04.prod.outlook.com>
References: <SN6PR04MB43823869DC02AF8186AFC372B2310@SN6PR04MB4382.namprd04.prod.outlook.com>
 <c8ea2799-574a-4858-5cc6-d79ea60e7bf3@gmail.com>,
 <SN6PR04MB43820698ABEF5A08DC2FBB23B2310@SN6PR04MB4382.namprd04.prod.outlook.com>
Message-ID: <1579277564549.34612@UGent.be>

Hi Brian,

I get what you want to do, but S3 isn't suited for that at all. If all elements in ... have to be the same class, you can use S4 (see ?dotsMethods). If not, then using S3 makes even less sense. Take following example:

x <- list()
y <- c(1,2)

foo(x,y) will dispatch to foo.list()
foo(y,x) will dispatch to foo.character()

You'll be in a world of hurt if you want to maintain or update that code. If you insist on using S3, you'll have to fix the position (and hence the name) of the argument you want to dispatch on.

my 2 cents
Cheers
Joris

--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
------------------------------

Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Smith, Brian J <brian-j-smith at uiowa.edu>
Sent: Friday, January 17, 2020 4:59 PM
To: Duncan Murdoch; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel]  [External] Re: S3 generic/method consistency warning for formula method

Thanks Duncan.

I was surprised too when first realizing this was possible.  I believe the reason it works is that UseMethod dispatches on the first supplied argument by default.  So, really the dispatch is on the first element of the ellipsis.  The 'c' function works like this, albeit as a primitive function.

I would like to dispatch on the ellipsis to allow a user to name values being passed in.  Defining an initial x argument would indeed eliminate the warning, but would not allow for user-naming of the value.  I could have the user pass a list of values to x and do dispatching manually, but that seems like more steps for the user and more complication for the implementation than ought to be necessary.  There are other downsides to that approach in my particularly application...

The issue mentioned below about calling the function with no arguments can be solved by defining the following default method.

foo.default <- function(...) list(...)



From Jor|@@Mey@ @end|ng |rom UGent@be  Fri Jan 17 17:19:22 2020
From: Jor|@@Mey@ @end|ng |rom UGent@be (Joris Meys)
Date: Fri, 17 Jan 2020 16:19:22 +0000
Subject: [R-pkg-devel] 
 [External] Re: S3 generic/method consistency warning
 for formula method
In-Reply-To: <1579277564549.34612@UGent.be>
References: <SN6PR04MB43823869DC02AF8186AFC372B2310@SN6PR04MB4382.namprd04.prod.outlook.com>
 <c8ea2799-574a-4858-5cc6-d79ea60e7bf3@gmail.com>,
 <SN6PR04MB43820698ABEF5A08DC2FBB23B2310@SN6PR04MB4382.namprd04.prod.outlook.com>,
 <1579277564549.34612@UGent.be>
Message-ID: <1579278015434.13406@UGent.be>

umfff. 

foo(y,x) will dispatch to foo.numeric() obviously



From br|@n-j-@m|th @end|ng |rom u|ow@@edu  Fri Jan 17 18:45:29 2020
From: br|@n-j-@m|th @end|ng |rom u|ow@@edu (Smith, Brian J)
Date: Fri, 17 Jan 2020 17:45:29 +0000
Subject: [R-pkg-devel] 
 [External] Re: S3 generic/method consistency warning
 for formula method
In-Reply-To: <1579277564549.34612@UGent.be>
References: <SN6PR04MB43823869DC02AF8186AFC372B2310@SN6PR04MB4382.namprd04.prod.outlook.com>
 <c8ea2799-574a-4858-5cc6-d79ea60e7bf3@gmail.com>,
 <SN6PR04MB43820698ABEF5A08DC2FBB23B2310@SN6PR04MB4382.namprd04.prod.outlook.com>
 <1579277564549.34612@UGent.be>
Message-ID: <SN6PR04MB4382CF6211CDAD5A9EDE9E8FB2310@SN6PR04MB4382.namprd04.prod.outlook.com>

Thanks for the tip about dotsMethods.  I am mainly working with S4 objects in my package, so that approach would fit well.  The following S4 method seems to work and pass R CMD checks.

setGeneric("foo2", function(...) standardGeneric("foo2"))

setMethod("foo2", "formula",
  function(...) list(...)
)

In my actual implementation of S3 methods, I do check that all ... elements are of the same class to avoid ending up in a world of hurt.  Converting them to S4 methods will save me from having to do those checks - nice!

>From a language definition point of view though, I am still bothered that a check warning is triggered by the S3 formula method but not by others.  That just seems inconsistent, and I have not yet seen any language documentation to explain the inconsistency.  Are we sure this is not an issue with the R CMD check implementation?

Nevertheless, it looks like I have a way to get rid of the warning.

-----Original Message-----
From: Joris Meys <Joris.Meys at UGent.be> 
Sent: Friday, January 17, 2020 10:12 AM
To: Smith, Brian J <brian-j-smith at uiowa.edu>; Duncan Murdoch <murdoch.duncan at gmail.com>; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] [External] Re: S3 generic/method consistency warning for formula method

Hi Brian,

I get what you want to do, but S3 isn't suited for that at all. If all elements in ... have to be the same class, you can use S4 (see ?dotsMethods). If not, then using S3 makes even less sense. Take following example:

x <- list()
y <- c(1,2)

foo(x,y) will dispatch to foo.list()
foo(y,x) will dispatch to foo.character()

You'll be in a world of hurt if you want to maintain or update that code. If you insist on using S3, you'll have to fix the position (and hence the name) of the argument you want to dispatch on.

my 2 cents
Cheers
Joris

--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling Ghent University Coupure Links 653, B-9000 Gent (Belgium)
------------------------------

Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Smith, Brian J <brian-j-smith at uiowa.edu>
Sent: Friday, January 17, 2020 4:59 PM
To: Duncan Murdoch; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel]  [External] Re: S3 generic/method consistency warning for formula method

Thanks Duncan.

I was surprised too when first realizing this was possible.  I believe the reason it works is that UseMethod dispatches on the first supplied argument by default.  So, really the dispatch is on the first element of the ellipsis.  The 'c' function works like this, albeit as a primitive function.

I would like to dispatch on the ellipsis to allow a user to name values being passed in.  Defining an initial x argument would indeed eliminate the warning, but would not allow for user-naming of the value.  I could have the user pass a list of values to x and do dispatching manually, but that seems like more steps for the user and more complication for the implementation than ought to be necessary.  There are other downsides to that approach in my particularly application...

The issue mentioned below about calling the function with no arguments can be solved by defining the following default method.

foo.default <- function(...) list(...)


From br|@n-j-@m|th @end|ng |rom u|ow@@edu  Fri Jan 17 19:30:40 2020
From: br|@n-j-@m|th @end|ng |rom u|ow@@edu (Smith, Brian J)
Date: Fri, 17 Jan 2020 18:30:40 +0000
Subject: [R-pkg-devel] 
 [External] Re: S3 generic/method consistency warning
 for formula method
In-Reply-To: <aec4cf9e-b7e8-7a85-86a5-555825d891a7@gmail.com>
References: <SN6PR04MB43823869DC02AF8186AFC372B2310@SN6PR04MB4382.namprd04.prod.outlook.com>
 <c8ea2799-574a-4858-5cc6-d79ea60e7bf3@gmail.com>
 <SN6PR04MB43820698ABEF5A08DC2FBB23B2310@SN6PR04MB4382.namprd04.prod.outlook.com>
 <aec4cf9e-b7e8-7a85-86a5-555825d891a7@gmail.com>
Message-ID: <SN6PR04MB438214D422C1837EBF4DD29FB2310@SN6PR04MB4382.namprd04.prod.outlook.com>

That's an interesting solution too.

-----Original Message-----
From: Duncan Murdoch <murdoch.duncan at gmail.com> 
Sent: Friday, January 17, 2020 11:17 AM
To: Smith, Brian J <brian-j-smith at uiowa.edu>; r-package-devel at r-project.org
Subject: Re: [External] Re: [R-pkg-devel] S3 generic/method consistency warning for formula method

On 17/01/2020 10:59 a.m., Smith, Brian J wrote:
> Thanks Duncan.
> 
> I was surprised too when first realizing this was possible.  I believe the reason it works is that UseMethod dispatches on the first supplied argument by default.  So, really the dispatch is on the first element of the ellipsis.  The 'c' function works like this, albeit as a primitive function.
> 
> I would like to dispatch on the ellipsis to allow a user to name values being passed in.  Defining an initial x argument would indeed eliminate the warning, but would not allow for user-naming of the value.  I could have the user pass a list of values to x and do dispatching manually, but that seems like more steps for the user and more complication for the implementation than ought to be necessary.  There are other downsides to that approach in my particularly application...

I think you can still do that, if your generic looks like this:

foo <- function(x, ...) {
   if (missing(x))
     UseMethod("foo", ..1)
   else
     UseMethod("foo")
}

and your methods look like this one:

foo.numeric <- function(x, ...) if (missing(x)) list(...) else list(x, ...)

There are some negatives to this solution:

  - it's more complicated than what you have
  - foo() now doesn't work unless you make it even more complicated
  - the name x is now special; foo("a", 1) will now dispatch to a different method than foo(w = "a", x = 1).  This is getting into the "world of hurt" that Joris mentioned.

The benefits are non-trivial:

  - It should make that warning go away
  - It doesn't depend on undocumented behaviour.

Duncan Murdoch

> 
> The issue mentioned below about calling the function with no arguments can be solved by defining the following default method.
> 
> foo.default <- function(...) list(...)
> 
> -----Original Message-----
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Friday, January 17, 2020 9:24 AM
> To: Smith, Brian J <brian-j-smith at uiowa.edu>; 
> r-package-devel at r-project.org
> Subject: [External] Re: [R-pkg-devel] S3 generic/method consistency 
> warning for formula method
> 
> On 17/01/2020 9:14 a.m., Smith, Brian J wrote:
>> Hello all,
>>
>> I am getting an R CMD check warning about S3 consistency for a formula method of a generic function that dispatches on the ellipsis argument.  The formula method seems to function properly when called, and methods for other types tried do not trigger the warning.  Below is an example generic function 'foo' and methods that will reproduce the issue, followed by the check warning message produced.
>>
>> foo <- function(...) UseMethod("foo") foo.factor <- function(...) 
>> list(...) foo.formula <- function(...) list(...) foo.logical <- 
>> function(...)
>> list(...) foo.matrix <- function(...) list(...) foo.numeric <-
>> function(...) list(...)
> 
> I'm surprised that you are allowed to have a generic with no arguments 
> except "...".  I imagine the error will go away if you change the 
> definitions to
> 
> foo <- function(x, ...) UseMethod("foo") foo.factor <- function(x, 
> ...) list(x, ...) foo.formula <- function(x, ...) list(x, ...) 
> foo.logical <- function(x, ...) list(x, ...) foo.matrix <- function(x, 
> ...) list(x, ...) foo.numeric <- function(x, ...) list(x, ...)
> 
> With your original definition, it would be legal to call foo(), but 
> the
> UseMethod() would fail.
> 
> Duncan Murdoch
> 
>>
>> R CMD check warning:
>>
>> W  checking S3 generic/method consistency (1.7s)
>>      foo:
>>        function(...)
>>      foo.formula:
>>        function(...)
>>      
>>      See section 'Generic functions and methods' in the 'Writing R
>>      Extensions' manual.
>>
>> I would appreciate any help in understanding and addressing this check warning.
>>
>> Thank you,
>> Brian
>>
>> *****************************************************************
>> Brian J Smith, PhD
>> Professor, Department of Biostatistics Director, Biostatistics Core, 
>> Holden Comprehensive Cancer Center The University of Iowa
>> 145 North Riverside Drive, N311 CPHB
>> Phone: 319-384-1587
>> Email: brian-j-smith at uiowa.edu
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list 
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 


From wkmt|er|e @end|ng |rom qu@edu@@@  Fri Jan 17 20:10:53 2020
From: wkmt|er|e @end|ng |rom qu@edu@@@ (=?windows-1256?B?5uHtzyDO4d0g49rm1iDH4ePY7dHs?=)
Date: Fri, 17 Jan 2020 19:10:53 +0000
Subject: [R-pkg-devel] For reproducibility issue
In-Reply-To: <CAL6gwnJdK9k6U22u6OvO+uwfLzrqLKN5jaW_9suDc=zW-smXEA@mail.gmail.com>
References: <AM0PR07MB633907E456BC9967F8CEB80BEF310@AM0PR07MB6339.eurprd07.prod.outlook.com>
 <20200117173914.425e1bb8@trisector>,
 <CAL6gwnJdK9k6U22u6OvO+uwfLzrqLKN5jaW_9suDc=zW-smXEA@mail.gmail.com>
Message-ID: <AM0PR07MB633928457834EE5E4AB3FC42EF310@AM0PR07MB6339.eurprd07.prod.outlook.com>

Hi all,

I think what I?ve done is something different. Inside the Fortran subroutine, I have a subroutine for setting the seed value of the RNG of GNU Fortran which I think it is not related to the R RNG like the one below:

    subroutine initrandomseedsinr(temp)
    implicit none
    integer :: n
    integer, intent(in):: temp
    integer, dimension(:), allocatable :: seed

    call random_seed(size = n)
    allocate(seed(n))
    seed = temp
    call random_seed(PUT = seed)
    deallocate(seed)

    end subroutine initrandomseedsinr
, where temp is an argument of the Fortran subroutine as well as in the wrapper R function. This will be related to the RNG method used in the GNU Fortran that build on GCC not to the R. I am not sure if I am right on this, but tried with using RNGkind(sample.kind = "Rounding") and it doesn?t help. The difference in the results were not major. The output at the end of running the functions kept having very similar results, but still have the issue of reproducing exact results which I need it for relating work that is based on the package.

Many thanks,

Waleed




Sent from Mail<https://go.microsoft.com/fwlink/?LinkId=550986> for Windows 10

From: Avraham Adler<mailto:avraham.adler at gmail.com>
Sent: ?Friday,? ?January ?17,? ?2020 ?06:30 ??
To: Ivan Krylov<mailto:krylov.r00t at gmail.com>
Cc: ???? ??? ???? ???????<mailto:wkmtierie at qu.edu.sa>; R Package Development<mailto:r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] For reproducibility issue

Hi.

If it helps, I call the R RNG from Fortran in my Delaporte package
[1], also using iso_c_bindings. Specifically, I have the following C
code [2]:

void F77_SUB(unifrnd) (int *n, double *x){
GetRNGstate();
for (int i = 0; i < *n; ++i){
*(x + i) = unif_rand();
}
PutRNGstate();
}
and call it in Fortran like so [3]:

subroutine rdelap_f(n, a, na, b, nb, l, nl, vars) bind(C, name="rdelap_f_")

external unifrnd

integer(kind = c_int), intent(in), value :: n, na, nb, nl
real(kind = c_double), intent(out), dimension(n) :: vars
real(kind = c_double), intent(in) :: a(na), b(nb), l(nl)
real(kind = c_double), dimension(n) :: p
integer(kind = c_int) :: lg, lt

call unifrnd(n, p)
lt = 1_c_int
lg = 0_c_int
call qdelap_f(p, n, a, na, b, nb, l, nl, lt, lg, vars)

end subroutine rdelap_f

The package passes CRAN tests (at least as of now) on anything between
GCC 4 and GCC9 [4].

Hope that helps,

Avi

[1] https://bitbucket.org/aadler/delaporte/src/master/
[2] https://bitbucket.org/aadler/delaporte/src/master/src/utils_and_wrappers.c
[3] https://bitbucket.org/aadler/delaporte/src/master/src/delaporte.f95
[4] https://cran.r-project.org/web/checks/check_results_Delaporte.html


On Fri, Jan 17, 2020 at 2:39 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:
>
> On Fri, 17 Jan 2020 13:55:39 +0000
> ???? ??? ???? ??????? <wkmtierie at qu.edu.sa> wrote:
>
> > So, does anyone have an idea of how to solve this issue.
>
> "Writing R Extensions", 1.6. Writing portable packages:
>
> >> Compiled code should not call the system random number generators
> >> such as rand, drand48 and random, but rather use the interfaces to
> >> R?s RNGs described in Random numbers. In particular, if more than
> >> one package initializes the system RNG (e.g. via srand), they will
> >> interfere with each other.
>
> >> Nor should the C++11 random number library be used, nor any other
> >> third-party random number generators such as those in GSL.
>
> It somewhat less convenient to call the R random number generator from
> Fortran than it would be from C or C++, but still possible. There is a
> F77-style example of such use [1], but since you are already using
> iso_c_binding, you should be able to declare the C API [2] right in the
> Fortran source:
>
> subroutine GetRNGState() bind(c)
> end subroutine
>
> subroutine PutRNGstate() bind(c)
> end subroutine
>
> As a bonus, you get to use the R distribution functions [3], without
> the need to implement them yourself from uniformly distributed samples:
>
> function rnorm(mu, sigma) bind(c) result(ret)
>  use intrinsic, iso_c_binding, only: c_double
>  real(c_double), value :: mu, sigma
>  real(c_double) ret
> end function
>
> function rgamma(shape, scale) bind(c) result(ret)
>  use intrinsic, iso_c_binding, only: c_double
>  real(c_double), value :: shape, scale
>  real(c_double) ret
> end function
>
> (The prototypes above are unchecked; I haven't written any Fortran 2003
> in more than a year.)
>
> --
> Best regards,
> Ivan
>
> [1]:
> https://cran.r-project.org/doc/manuals/R-exts.html#index-Random-numbers-in-Fortran
>
> [2]: https://cran.r-project.org/doc/manuals/R-exts.html#Random-numbers
>
> [3]:
> https://cran.r-project.org/doc/manuals/R-exts.html#Distribution-functions
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From gkr@emer @end|ng |rom bgc-jen@@mpg@de  Fri Jan 17 20:42:05 2020
From: gkr@emer @end|ng |rom bgc-jen@@mpg@de (Guido Kraemer)
Date: Fri, 17 Jan 2020 20:42:05 +0100
Subject: [R-pkg-devel] warnings by 3rd party headers
In-Reply-To: <24096.35693.915598.549652@rob.eddelbuettel.com>
References: <d026fa35-f618-9ed3-7351-da19a81d8c3c@bgc-jena.mpg.de>
 <CALEXWq16d6kyCK8gWcUM_c6pMgLOfM8+Br_JJGme=mygq294iA@mail.gmail.com>
 <24096.35693.915598.549652@rob.eddelbuettel.com>
Message-ID: <b1cdfa39-244c-f97c-8f2f-13119f5d9cc9@bgc-jena.mpg.de>

Thanks, just to drive this a bit further:

What if the headers then start producing some ugly compile warnings? Do 
I have to fix these, too?


On 1/16/20 5:12 PM, Dirk Eddelbuettel wrote:
> On 16 January 2020 at 17:06, I?aki Ucar wrote:
> | On Thu, 16 Jan 2020 at 16:58, Guido Kraemer <gkraemer at bgc-jena.mpg.de> wrote:
> | >
> | > I need to distribute some 3rd party headers with my package. The headers
> | > make R CMD check produce warnings:
> | >
> | >     File which contains pragma(s) suppressing important diagnostics:
> | >     ...
> | >     Files which contain pragma(s) suppressing diagnostics:
> | >     ...
> | >
> | > There are some additional NOTEs on the use of `std::cout` which is being
> | > used in some of the headers.
> | >
> | > If I want to submit the package to CRAN in the future, do I have to edit
> | > the headers?
> |
> | I think so. That's what, e.g., Dirk does for BH:
> | https://github.com/eddelbuettel/bh/commit/313da3cb04227d96daafa2d73668b30fa3fd10fc
>
> =:-)
>
> Beat me to it. Was about to show the last diff:
> https://github.com/eddelbuettel/bh/blob/master/local/patches/bh_1.72.0-0.diagnostics.patch
>
> The policy is, if I may use salty language for once, idiotic^Ha really bad
> call. But I don't get to make the policy so I just live by it.
>
> So yes Guido, you have to.  And again on each upstream upgrade you cover.
>
> Dirk
>
-- 
Guido Kraemer
Max Planck Institute for Biogeochemistry Jena
Department for Biogeochemical Integration
Hans-Kn?ll-Str. 10
07745 Jena
Germany

phone: +49 3641 576293
e-mail: gkraemer at bgc-jena.mpg.de


From |uc@r @end|ng |rom |edor@project@org  Fri Jan 17 20:48:24 2020
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Fri, 17 Jan 2020 20:48:24 +0100
Subject: [R-pkg-devel] warnings by 3rd party headers
In-Reply-To: <b1cdfa39-244c-f97c-8f2f-13119f5d9cc9@bgc-jena.mpg.de>
References: <d026fa35-f618-9ed3-7351-da19a81d8c3c@bgc-jena.mpg.de>
 <CALEXWq16d6kyCK8gWcUM_c6pMgLOfM8+Br_JJGme=mygq294iA@mail.gmail.com>
 <24096.35693.915598.549652@rob.eddelbuettel.com>
 <b1cdfa39-244c-f97c-8f2f-13119f5d9cc9@bgc-jena.mpg.de>
Message-ID: <CALEXWq3xhRTNJyTkvc2-yW4im9YLxZbMcaRCX8kKrcuBFKrX6Q@mail.gmail.com>

On Fri, 17 Jan 2020 at 20:42, Guido Kraemer <gkraemer at bgc-jena.mpg.de> wrote:
>
> Thanks, just to drive this a bit further:
>
> What if the headers then start producing some ugly compile warnings? Do
> I have to fix these, too?

How ugly? You can ignore "variable set but not used"-kind of stuff,
but if things turn ugly enough, a good citizen should take a look into
it and maybe contribute a patch upstream. But of course that's not
CRAN policy, that's my opinion.

I?aki


From br|@n-j-@m|th @end|ng |rom u|ow@@edu  Fri Jan 17 21:18:38 2020
From: br|@n-j-@m|th @end|ng |rom u|ow@@edu (Smith, Brian J)
Date: Fri, 17 Jan 2020 20:18:38 +0000
Subject: [R-pkg-devel] 
 [External] Re: S3 generic/method consistency warning
 for formula method
In-Reply-To: <SN6PR04MB4382CF6211CDAD5A9EDE9E8FB2310@SN6PR04MB4382.namprd04.prod.outlook.com>
References: <SN6PR04MB43823869DC02AF8186AFC372B2310@SN6PR04MB4382.namprd04.prod.outlook.com>
 <c8ea2799-574a-4858-5cc6-d79ea60e7bf3@gmail.com>,
 <SN6PR04MB43820698ABEF5A08DC2FBB23B2310@SN6PR04MB4382.namprd04.prod.outlook.com>
 <1579277564549.34612@UGent.be>
 <SN6PR04MB4382CF6211CDAD5A9EDE9E8FB2310@SN6PR04MB4382.namprd04.prod.outlook.com>
Message-ID: <SN6PR04MB43822C5FD6E8EAC2389C7A78B2310@SN6PR04MB4382.namprd04.prod.outlook.com>

I spoke too soon.  dotsMethods will not work for me since it does not allow for mixing of the ellipsis with other formal arguments.  For example, the following will not work if argument 'data' is not a formula; e.g. a data frame.

setGeneric("foo2", function(...) standardGeneric("foo2"))

setMethod("foo2", "formula",
  function(..., data) list(...)
)

What is the recommended course of action if the validity of an R CMD check warning is in doubt?  In this case, the warning message indicates an inconsistency that does not exist and references documentation that does not seem to explain the actual issue.

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Smith, Brian J
Sent: Friday, January 17, 2020 11:45 AM
To: Joris Meys <Joris.Meys at UGent.be>; Duncan Murdoch <murdoch.duncan at gmail.com>; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] [External] Re: S3 generic/method consistency warning for formula method

Thanks for the tip about dotsMethods.  I am mainly working with S4 objects in my package, so that approach would fit well.  The following S4 method seems to work and pass R CMD checks.

setGeneric("foo2", function(...) standardGeneric("foo2"))

setMethod("foo2", "formula",
  function(...) list(...)
)

In my actual implementation of S3 methods, I do check that all ... elements are of the same class to avoid ending up in a world of hurt.  Converting them to S4 methods will save me from having to do those checks - nice!

>From a language definition point of view though, I am still bothered that a check warning is triggered by the S3 formula method but not by others.  That just seems inconsistent, and I have not yet seen any language documentation to explain the inconsistency.  Are we sure this is not an issue with the R CMD check implementation?

Nevertheless, it looks like I have a way to get rid of the warning.

-----Original Message-----
From: Joris Meys <Joris.Meys at UGent.be>
Sent: Friday, January 17, 2020 10:12 AM
To: Smith, Brian J <brian-j-smith at uiowa.edu>; Duncan Murdoch <murdoch.duncan at gmail.com>; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] [External] Re: S3 generic/method consistency warning for formula method

Hi Brian,

I get what you want to do, but S3 isn't suited for that at all. If all elements in ... have to be the same class, you can use S4 (see ?dotsMethods). If not, then using S3 makes even less sense. Take following example:

x <- list()
y <- c(1,2)

foo(x,y) will dispatch to foo.list()
foo(y,x) will dispatch to foo.character()

You'll be in a world of hurt if you want to maintain or update that code. If you insist on using S3, you'll have to fix the position (and hence the name) of the argument you want to dispatch on.

my 2 cents
Cheers
Joris

--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling Ghent University Coupure Links 653, B-9000 Gent (Belgium)
------------------------------

Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Smith, Brian J <brian-j-smith at uiowa.edu>
Sent: Friday, January 17, 2020 4:59 PM
To: Duncan Murdoch; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel]  [External] Re: S3 generic/method consistency warning for formula method

Thanks Duncan.

I was surprised too when first realizing this was possible.  I believe the reason it works is that UseMethod dispatches on the first supplied argument by default.  So, really the dispatch is on the first element of the ellipsis.  The 'c' function works like this, albeit as a primitive function.

I would like to dispatch on the ellipsis to allow a user to name values being passed in.  Defining an initial x argument would indeed eliminate the warning, but would not allow for user-naming of the value.  I could have the user pass a list of values to x and do dispatching manually, but that seems like more steps for the user and more complication for the implementation than ought to be necessary.  There are other downsides to that approach in my particularly application...

The issue mentioned below about calling the function with no arguments can be solved by defining the following default method.

foo.default <- function(...) list(...)

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @vr@h@m@@d|er @end|ng |rom gm@||@com  Fri Jan 17 21:40:38 2020
From: @vr@h@m@@d|er @end|ng |rom gm@||@com (Avraham Adler)
Date: Fri, 17 Jan 2020 20:40:38 +0000
Subject: [R-pkg-devel] For reproducibility issue
In-Reply-To: <AM0PR07MB633928457834EE5E4AB3FC42EF310@AM0PR07MB6339.eurprd07.prod.outlook.com>
References: <AM0PR07MB633907E456BC9967F8CEB80BEF310@AM0PR07MB6339.eurprd07.prod.outlook.com>
 <20200117173914.425e1bb8@trisector>
 <CAL6gwnJdK9k6U22u6OvO+uwfLzrqLKN5jaW_9suDc=zW-smXEA@mail.gmail.com>
 <AM0PR07MB633928457834EE5E4AB3FC42EF310@AM0PR07MB6339.eurprd07.prod.outlook.com>
Message-ID: <CAL6gwnJd9VzDH85zZm3+EsdBvepx_n5MBGrz4vMO0cu06QoJ6w@mail.gmail.com>

If I understand what you're doing, your Fortran seed knows nothing
about the R state. Is it possible to switch to using the R random
number generators? Or can you at least use the probability integral
transform to generate uniform [0, 1] via R and then convert those to
observations in Fortran (that's what I did)?

Avi

?On Fri, Jan 17, 2020 at 7:10 PM ????? ??? ???? ?????????
<wkmtierie at qu.edu.sa> wrote:?
>
> Hi all,
>
>
>
> I think what I?ve done is something different. Inside the Fortran subroutine, I have a subroutine for setting the seed value of the RNG of GNU Fortran which I think it is not related to the R RNG like the one below:
>
>
>
>     subroutine initrandomseedsinr(temp)
>
>     implicit none
>
>     integer :: n
>
>     integer, intent(in):: temp
>
>     integer, dimension(:), allocatable :: seed
>
>
>
>     call random_seed(size = n)
>
>     allocate(seed(n))
>
>     seed = temp
>
>     call random_seed(PUT = seed)
>
>     deallocate(seed)
>
>
>
>     end subroutine initrandomseedsinr
>
> , where temp is an argument of the Fortran subroutine as well as in the wrapper R function. This will be related to the RNG method used in the GNU Fortran that build on GCC not to the R. I am not sure if I am right on this, but tried with using RNGkind(sample.kind = "Rounding") and it doesn?t help. The difference in the results were not major. The output at the end of running the functions kept having very similar results, but still have the issue of reproducing exact results which I need it for relating work that is based on the package.
>
>
>
> Many thanks,
>
>
>
> Waleed
>
>
>
>
>
>
>
>
>
> Sent from Mail for Windows 10
>
>
>
> From: Avraham Adler
> Sent: ?Friday,? ?January ?17,? ?2020 ?06:30 ??
> To: Ivan Krylov
> Cc: ???? ??? ???? ???????; R Package Development
> Subject: Re: [R-pkg-devel] For reproducibility issue
>
>
>
> Hi.
>
> If it helps, I call the R RNG from Fortran in my Delaporte package
> [1], also using iso_c_bindings. Specifically, I have the following C
> code [2]:
>
> void F77_SUB(unifrnd) (int *n, double *x){
> GetRNGstate();
> for (int i = 0; i < *n; ++i){
> *(x + i) = unif_rand();
> }
> PutRNGstate();
> }
> and call it in Fortran like so [3]:
>
> subroutine rdelap_f(n, a, na, b, nb, l, nl, vars) bind(C, name="rdelap_f_")
>
> external unifrnd
>
> integer(kind = c_int), intent(in), value :: n, na, nb, nl
> real(kind = c_double), intent(out), dimension(n) :: vars
> real(kind = c_double), intent(in) :: a(na), b(nb), l(nl)
> real(kind = c_double), dimension(n) :: p
> integer(kind = c_int) :: lg, lt
>
> call unifrnd(n, p)
> lt = 1_c_int
> lg = 0_c_int
> call qdelap_f(p, n, a, na, b, nb, l, nl, lt, lg, vars)
>
> end subroutine rdelap_f
>
> The package passes CRAN tests (at least as of now) on anything between
> GCC 4 and GCC9 [4].
>
> Hope that helps,
>
> Avi
>
> [1] https://bitbucket.org/aadler/delaporte/src/master/
> [2] https://bitbucket.org/aadler/delaporte/src/master/src/utils_and_wrappers.c
> [3] https://bitbucket.org/aadler/delaporte/src/master/src/delaporte.f95
> [4] https://cran.r-project.org/web/checks/check_results_Delaporte.html
>
>
> On Fri, Jan 17, 2020 at 2:39 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:
> >
> > On Fri, 17 Jan 2020 13:55:39 +0000
> > ???? ??? ???? ??????? <wkmtierie at qu.edu.sa> wrote:
> >
> > > So, does anyone have an idea of how to solve this issue.
> >
> > "Writing R Extensions", 1.6. Writing portable packages:
> >
> > >> Compiled code should not call the system random number generators
> > >> such as rand, drand48 and random, but rather use the interfaces to
> > >> R?s RNGs described in Random numbers. In particular, if more than
> > >> one package initializes the system RNG (e.g. via srand), they will
> > >> interfere with each other.
> >
> > >> Nor should the C++11 random number library be used, nor any other
> > >> third-party random number generators such as those in GSL.
> >
> > It somewhat less convenient to call the R random number generator from
> > Fortran than it would be from C or C++, but still possible. There is a
> > F77-style example of such use [1], but since you are already using
> > iso_c_binding, you should be able to declare the C API [2] right in the
> > Fortran source:
> >
> > subroutine GetRNGState() bind(c)
> > end subroutine
> >
> > subroutine PutRNGstate() bind(c)
> > end subroutine
> >
> > As a bonus, you get to use the R distribution functions [3], without
> > the need to implement them yourself from uniformly distributed samples:
> >
> > function rnorm(mu, sigma) bind(c) result(ret)
> >  use intrinsic, iso_c_binding, only: c_double
> >  real(c_double), value :: mu, sigma
> >  real(c_double) ret
> > end function
> >
> > function rgamma(shape, scale) bind(c) result(ret)
> >  use intrinsic, iso_c_binding, only: c_double
> >  real(c_double), value :: shape, scale
> >  real(c_double) ret
> > end function
> >
> > (The prototypes above are unchecked; I haven't written any Fortran 2003
> > in more than a year.)
> >
> > --
> > Best regards,
> > Ivan
> >
> > [1]:
> > https://cran.r-project.org/doc/manuals/R-exts.html#index-Random-numbers-in-Fortran
> >
> > [2]: https://cran.r-project.org/doc/manuals/R-exts.html#Random-numbers
> >
> > [3]:
> > https://cran.r-project.org/doc/manuals/R-exts.html#Distribution-functions
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>


From r@||@@tubner @end|ng |rom gm@||@com  Fri Jan 17 22:33:33 2020
From: r@||@@tubner @end|ng |rom gm@||@com (Ralf Stubner)
Date: Fri, 17 Jan 2020 22:33:33 +0100
Subject: [R-pkg-devel] For reproducibility issue
In-Reply-To: <AM0PR07MB633907E456BC9967F8CEB80BEF310@AM0PR07MB6339.eurprd07.prod.outlook.com>
References: <AM0PR07MB633907E456BC9967F8CEB80BEF310@AM0PR07MB6339.eurprd07.prod.outlook.com>
Message-ID: <CAFQwRQy74yPDJ=C9M8PE=1M9+fge8zkw_JAcEQLW=17OBNeWMQ@mail.gmail.com>

On Fri, Jan 17, 2020 at 2:56 PM ????? ??? ???? ?????????
<wkmtierie at qu.edu.sa> wrote:?
> This might be because the RNG method used in random_number function is different between the used version GCC 6 or less and the new ones GCC 8 or greater.

This is quite likely correct. The current gfortran docs [1] list
xoshiro256** as the RNG used for RANDOM_NUMBER. This is a relatively
recent RNG [2], so older versions of gfortran must have used something
else, leading to different results even for identical seed values.
This explains the WRE excerpt quoted by Ivan: If you want reproducible
results, you must not use an external RNG which might change without
warning. The obvious solution would be to use R's RNG as suggested
before. If that is to slow for your application, you can use faster
RNGs that are provided by some packages. For example, my dqrng package
[3] includes xoshiro256+, though I have not tried to use this from
Fortran code.

Greetings
Ralf

[1] https://gcc.gnu.org/onlinedocs/gfortran/RANDOM_005fNUMBER.html
[2] https://arxiv.org/abs/1805.01407
[3] https://www.daqana.org/dqrng/


From Jor|@@Mey@ @end|ng |rom UGent@be  Sat Jan 18 10:45:56 2020
From: Jor|@@Mey@ @end|ng |rom UGent@be (Joris Meys)
Date: Sat, 18 Jan 2020 09:45:56 +0000
Subject: [R-pkg-devel] 
 [External] Re: S3 generic/method consistency warning
 for formula method
In-Reply-To: <SN6PR04MB43822C5FD6E8EAC2389C7A78B2310@SN6PR04MB4382.namprd04.prod.outlook.com>
References: <SN6PR04MB43823869DC02AF8186AFC372B2310@SN6PR04MB4382.namprd04.prod.outlook.com>
 <c8ea2799-574a-4858-5cc6-d79ea60e7bf3@gmail.com>,
 <SN6PR04MB43820698ABEF5A08DC2FBB23B2310@SN6PR04MB4382.namprd04.prod.outlook.com>
 <1579277564549.34612@UGent.be>
 <SN6PR04MB4382CF6211CDAD5A9EDE9E8FB2310@SN6PR04MB4382.namprd04.prod.outlook.com>,
 <SN6PR04MB43822C5FD6E8EAC2389C7A78B2310@SN6PR04MB4382.namprd04.prod.outlook.com>
Message-ID: <1579340760459.93786@UGent.be>

Hi Brian,

I agree that the way R CMD check reports on this, can be improved. 
For your case (as far as I understand it), you can try dispatching explicitly on the first element of the dots by using the object argument of UseMethod. This works for me.

foo <- function(..., data){
  UseMethod("foo", ..1)
}

foo.factor <- function(..., data){
  x <- list(...)
  x$data <- data
  x
} 
foo.formula <- function(..., data){
  x <- list(...)
  x$data <- data
  x
}

Cheers
Joris

--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
------------------------------

Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


________________________________________
From: Smith, Brian J <brian-j-smith at uiowa.edu>
Sent: Friday, January 17, 2020 9:18 PM
To: Smith, Brian J; Joris Meys; Duncan Murdoch; r-package-devel at r-project.org
Subject: RE: [R-pkg-devel]  [External] Re: S3 generic/method consistency warning for formula method

I spoke too soon.  dotsMethods will not work for me since it does not allow for mixing of the ellipsis with other formal arguments.  For example, the following will not work if argument 'data' is not a formula; e.g. a data frame.

setGeneric("foo2", function(...) standardGeneric("foo2"))

setMethod("foo2", "formula",
  function(..., data) list(...)
)

What is the recommended course of action if the validity of an R CMD check warning is in doubt?  In this case, the warning message indicates an inconsistency that does not exist and references documentation that does not seem to explain the actual issue.

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Smith, Brian J
Sent: Friday, January 17, 2020 11:45 AM
To: Joris Meys <Joris.Meys at UGent.be>; Duncan Murdoch <murdoch.duncan at gmail.com>; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] [External] Re: S3 generic/method consistency warning for formula method

Thanks for the tip about dotsMethods.  I am mainly working with S4 objects in my package, so that approach would fit well.  The following S4 method seems to work and pass R CMD checks.

setGeneric("foo2", function(...) standardGeneric("foo2"))

setMethod("foo2", "formula",
  function(...) list(...)
)

In my actual implementation of S3 methods, I do check that all ... elements are of the same class to avoid ending up in a world of hurt.  Converting them to S4 methods will save me from having to do those checks - nice!

>From a language definition point of view though, I am still bothered that a check warning is triggered by the S3 formula method but not by others.  That just seems inconsistent, and I have not yet seen any language documentation to explain the inconsistency.  Are we sure this is not an issue with the R CMD check implementation?

Nevertheless, it looks like I have a way to get rid of the warning.

-----Original Message-----
From: Joris Meys <Joris.Meys at UGent.be>
Sent: Friday, January 17, 2020 10:12 AM
To: Smith, Brian J <brian-j-smith at uiowa.edu>; Duncan Murdoch <murdoch.duncan at gmail.com>; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] [External] Re: S3 generic/method consistency warning for formula method

Hi Brian,

I get what you want to do, but S3 isn't suited for that at all. If all elements in ... have to be the same class, you can use S4 (see ?dotsMethods). If not, then using S3 makes even less sense. Take following example:

x <- list()
y <- c(1,2)

foo(x,y) will dispatch to foo.list()
foo(y,x) will dispatch to foo.character()

You'll be in a world of hurt if you want to maintain or update that code. If you insist on using S3, you'll have to fix the position (and hence the name) of the argument you want to dispatch on.

my 2 cents
Cheers
Joris

--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling Ghent University Coupure Links 653, B-9000 Gent (Belgium)
------------------------------

Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Smith, Brian J <brian-j-smith at uiowa.edu>
Sent: Friday, January 17, 2020 4:59 PM
To: Duncan Murdoch; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel]  [External] Re: S3 generic/method consistency warning for formula method

Thanks Duncan.

I was surprised too when first realizing this was possible.  I believe the reason it works is that UseMethod dispatches on the first supplied argument by default.  So, really the dispatch is on the first element of the ellipsis.  The 'c' function works like this, albeit as a primitive function.

I would like to dispatch on the ellipsis to allow a user to name values being passed in.  Defining an initial x argument would indeed eliminate the warning, but would not allow for user-naming of the value.  I could have the user pass a list of values to x and do dispatching manually, but that seems like more steps for the user and more complication for the implementation than ought to be necessary.  There are other downsides to that approach in my particularly application...

The issue mentioned below about calling the function with no arguments can be solved by defining the following default method.

foo.default <- function(...) list(...)

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Mon Jan 20 09:46:37 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Mon, 20 Jan 2020 09:46:37 +0100
Subject: [R-pkg-devel] For reproducibility issue
In-Reply-To: <AM0PR07MB633928457834EE5E4AB3FC42EF310@AM0PR07MB6339.eurprd07.prod.outlook.com>
References: <AM0PR07MB633907E456BC9967F8CEB80BEF310@AM0PR07MB6339.eurprd07.prod.outlook.com>
 <20200117173914.425e1bb8@trisector>
 <CAL6gwnJdK9k6U22u6OvO+uwfLzrqLKN5jaW_9suDc=zW-smXEA@mail.gmail.com>
 <AM0PR07MB633928457834EE5E4AB3FC42EF310@AM0PR07MB6339.eurprd07.prod.outlook.com>
Message-ID: <24101.26861.795731.406115@stat.math.ethz.ch>

>>>>> ???? ??? ???? ??????? 
>>>>>     on Fri, 17 Jan 2020 19:10:53 +0000 writes:

    > Hi all,

    > I think what I?ve done is something different.

yes, but ...

    > Inside the Fortran subroutine, I have a subroutine for setting the seed value of the RNG of GNU Fortran which I think it is not related to the R RNG like the one below:

    > subroutine initrandomseedsinr(temp)
    > implicit none
    > integer :: n
    > integer, intent(in):: temp
    > integer, dimension(:), allocatable :: seed

    > call random_seed(size = n)
    > allocate(seed(n))
    > seed = temp
    > call random_seed(PUT = seed)
    > deallocate(seed)

    > end subroutine initrandomseedsinr
    > , 
    > where temp is an argument of the Fortran subroutine as well as in the wrapper R function. This will be related to the RNG method used in the GNU Fortran that build on GCC not to the R. I am not sure if I am right on this, but tried with using RNGkind(sample.kind = "Rounding") and it doesn?t help.

indeed, it has no effect on your Fortran / run time random
generator.

But really really truly :  a "decent" R package should use R's
random number generators rather than (C library / Fortran
library / ...).
When using R's RNGs, your package behaves "R like" e.g.,
set.seed() has the desired effect, etc etc.

What Avi Adler describes below is what I strongly believe you
*really* should change your package to do as well.

Best regards,

Martin Maechler
ETH Zurich and R Core Team


    > The difference in the results were not major. The output at the end of running the functions kept having very similar results, but still have the issue of reproducing exact results which I need it for relating work that is based on the package.

    > Many thanks,

    > Waleed




    > Sent from Mail<https://go.microsoft.com/fwlink/?LinkId=550986> for Windows 10

    > From: Avraham Adler<mailto:avraham.adler at gmail.com>
    > Sent: ?Friday,? ?January ?17,? ?2020 ?06:30 ??
    > To: Ivan Krylov<mailto:krylov.r00t at gmail.com>
    > Cc: ???? ??? ???? ???????<mailto:wkmtierie at qu.edu.sa>; R Package Development<mailto:r-package-devel at r-project.org>
    > Subject: Re: [R-pkg-devel] For reproducibility issue

    > Hi.

    > If it helps, I call the R RNG from Fortran in my Delaporte package
    > [1], also using iso_c_bindings. Specifically, I have the following C
    > code [2]:

    > void F77_SUB(unifrnd) (int *n, double *x){
    > GetRNGstate();
    > for (int i = 0; i < *n; ++i){
    > *(x + i) = unif_rand();
    > }
    > PutRNGstate();
    > }
    > and call it in Fortran like so [3]:

    > subroutine rdelap_f(n, a, na, b, nb, l, nl, vars) bind(C, name="rdelap_f_")

    > external unifrnd

    > integer(kind = c_int), intent(in), value :: n, na, nb, nl
    > real(kind = c_double), intent(out), dimension(n) :: vars
    > real(kind = c_double), intent(in) :: a(na), b(nb), l(nl)
    > real(kind = c_double), dimension(n) :: p
    > integer(kind = c_int) :: lg, lt

    > call unifrnd(n, p)
    > lt = 1_c_int
    > lg = 0_c_int
    > call qdelap_f(p, n, a, na, b, nb, l, nl, lt, lg, vars)

    > end subroutine rdelap_f

    > The package passes CRAN tests (at least as of now) on anything between
    > GCC 4 and GCC9 [4].

    > Hope that helps,

    > Avi

    > [1] https://bitbucket.org/aadler/delaporte/src/master/
    > [2] https://bitbucket.org/aadler/delaporte/src/master/src/utils_and_wrappers.c
    > [3] https://bitbucket.org/aadler/delaporte/src/master/src/delaporte.f95
    > [4] https://cran.r-project.org/web/checks/check_results_Delaporte.html


    > On Fri, Jan 17, 2020 at 2:39 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:
    >> 
    >> On Fri, 17 Jan 2020 13:55:39 +0000
    >> ???? ??? ???? ??????? <wkmtierie at qu.edu.sa> wrote:
    >> 
    >> > So, does anyone have an idea of how to solve this issue.
    >> 
    >> "Writing R Extensions", 1.6. Writing portable packages:
    >> 
    >> >> Compiled code should not call the system random number generators
    >> >> such as rand, drand48 and random, but rather use the interfaces to
    >> >> R?s RNGs described in Random numbers. In particular, if more than
    >> >> one package initializes the system RNG (e.g. via srand), they will
    >> >> interfere with each other.
    >> 
    >> >> Nor should the C++11 random number library be used, nor any other
    >> >> third-party random number generators such as those in GSL.
    >> 
    >> It somewhat less convenient to call the R random number generator from
    >> Fortran than it would be from C or C++, but still possible. There is a
    >> F77-style example of such use [1], but since you are already using
    >> iso_c_binding, you should be able to declare the C API [2] right in the
    >> Fortran source:
    >> 
    >> subroutine GetRNGState() bind(c)
    >> end subroutine
    >> 
    >> subroutine PutRNGstate() bind(c)
    >> end subroutine
    >> 
    >> As a bonus, you get to use the R distribution functions [3], without
    >> the need to implement them yourself from uniformly distributed samples:
    >> 
    >> function rnorm(mu, sigma) bind(c) result(ret)
    >> use intrinsic, iso_c_binding, only: c_double
    >> real(c_double), value :: mu, sigma
    >> real(c_double) ret
    >> end function
    >> 
    >> function rgamma(shape, scale) bind(c) result(ret)
    >> use intrinsic, iso_c_binding, only: c_double
    >> real(c_double), value :: shape, scale
    >> real(c_double) ret
    >> end function
    >> 
    >> (The prototypes above are unchecked; I haven't written any Fortran 2003
    >> in more than a year.)
    >> 
    >> --
    >> Best regards,
    >> Ivan
    >> 
    >> [1]:
    >> https://cran.r-project.org/doc/manuals/R-exts.html#index-Random-numbers-in-Fortran
    >> 
    >> [2]: https://cran.r-project.org/doc/manuals/R-exts.html#Random-numbers
    >> 
    >> [3]:
    >> https://cran.r-project.org/doc/manuals/R-exts.html#Distribution-functions
    >> 
    >> ______________________________________________
    >> R-package-devel at r-project.org mailing list
    >> https://stat.ethz.ch/mailman/listinfo/r-package-devel


    > [[alternative HTML version deleted]]

    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From neon|r@ @end|ng |rom gm@||@com  Tue Jan 21 16:49:34 2020
From: neon|r@ @end|ng |rom gm@||@com (neonira Arinoem)
Date: Tue, 21 Jan 2020 16:49:34 +0100
Subject: [R-pkg-devel] How to provide a finalized PDF file in a package?
Message-ID: <CAN--Dz3RqOQaptCEGO3rcq=w2v6QT8dzP6oNDc4UMChBxwXiDg@mail.gmail.com>

I create a cheat sheet using MS-OFFICE and  converted it at a PDF format.

I wonder in which folder of my package I should place it to be installed
with the package.

I tried instinctively in vignettes, but it doesn't seem to work correctly,
as I do not find it back in my package installation folder.

Best.
Neonira

	[[alternative HTML version deleted]]


From th|erry@onke||nx @end|ng |rom |nbo@be  Tue Jan 21 16:55:25 2020
From: th|erry@onke||nx @end|ng |rom |nbo@be (Thierry Onkelinx)
Date: Tue, 21 Jan 2020 16:55:25 +0100
Subject: [R-pkg-devel] How to provide a finalized PDF file in a package?
In-Reply-To: <CAN--Dz3RqOQaptCEGO3rcq=w2v6QT8dzP6oNDc4UMChBxwXiDg@mail.gmail.com>
References: <CAN--Dz3RqOQaptCEGO3rcq=w2v6QT8dzP6oNDc4UMChBxwXiDg@mail.gmail.com>
Message-ID: <CAJuCY5wR704Cv3xfkaFviNoQpUjDHW07smAJ-xAhB3yUtQrJLQ@mail.gmail.com>

Dear Neonira.

Whatever file you place in the inst folder, will be available for the users
when they install the package.

Best regards,

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>


Op di 21 jan. 2020 om 16:50 schreef neonira Arinoem <neonira at gmail.com>:

> I create a cheat sheet using MS-OFFICE and  converted it at a PDF format.
>
> I wonder in which folder of my package I should place it to be installed
> with the package.
>
> I tried instinctively in vignettes, but it doesn't seem to work correctly,
> as I do not find it back in my package installation folder.
>
> Best.
> Neonira
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From Jor|@@Mey@ @end|ng |rom UGent@be  Tue Jan 21 17:18:16 2020
From: Jor|@@Mey@ @end|ng |rom UGent@be (Joris Meys)
Date: Tue, 21 Jan 2020 16:18:16 +0000
Subject: [R-pkg-devel] How to provide a finalized PDF file in a package?
In-Reply-To: <CAJuCY5wR704Cv3xfkaFviNoQpUjDHW07smAJ-xAhB3yUtQrJLQ@mail.gmail.com>
References: <CAN--Dz3RqOQaptCEGO3rcq=w2v6QT8dzP6oNDc4UMChBxwXiDg@mail.gmail.com>,
 <CAJuCY5wR704Cv3xfkaFviNoQpUjDHW07smAJ-xAhB3yUtQrJLQ@mail.gmail.com>
Message-ID: <1579623551317.91248@UGent.be>

Dear Neonira,

as Thierry said, the inst folder serves that purpose. To be a bit more specific: any documentation you provide that doesn't need building, goes in the inst/doc folder. That's also where R CMD build creates the output of vignettes created with Sweave or knitr.

You find more information in this section of the manual:
https://cran.r-project.org/doc/manuals/R-exts.html#Writing-package-vignettes

Cheers
Joris

--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
------------------------------

Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Thierry Onkelinx <thierry.onkelinx at inbo.be>
Sent: Tuesday, January 21, 2020 4:55 PM
To: neonira Arinoem
Cc: R-package-devel
Subject: Re: [R-pkg-devel] How to provide a finalized PDF file in a package?

Dear Neonira.

Whatever file you place in the inst folder, will be available for the users
when they install the package.

Best regards,

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>


Op di 21 jan. 2020 om 16:50 schreef neonira Arinoem <neonira at gmail.com>:

> I create a cheat sheet using MS-OFFICE and  converted it at a PDF format.
>
> I wonder in which folder of my package I should place it to be installed
> with the package.
>
> I tried instinctively in vignettes, but it doesn't seem to work correctly,
> as I do not find it back in my package installation folder.
>
> Best.
> Neonira
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From henr|k@bengt@@on @end|ng |rom gm@||@com  Tue Jan 21 17:22:18 2020
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Tue, 21 Jan 2020 08:22:18 -0800
Subject: [R-pkg-devel] How to provide a finalized PDF file in a package?
In-Reply-To: <CAN--Dz3RqOQaptCEGO3rcq=w2v6QT8dzP6oNDc4UMChBxwXiDg@mail.gmail.com>
References: <CAN--Dz3RqOQaptCEGO3rcq=w2v6QT8dzP6oNDc4UMChBxwXiDg@mail.gmail.com>
Message-ID: <CAFDcVCSS4kgSGr=YLFAKUxuKTA21OFT0STV2JOZo4+-fLnJznw@mail.gmail.com>

It sounds like you want the PDF to have it appear as a package
vignette.  You can use the R.rsp::asis vignette engine
(https://cran.r-project.org/package=R.rsp) to add static PDFs as
vignettes to your package.  The PDF is included as-is during the
package *build* process (R CMD build) like other package vignettes and
you don't have to LaTeX or other tools installed.  See
https://cran.r-project.org/web/packages/R.rsp/vignettes/R_packages-Static_PDF_and_HTML_vignettes.pdf
for instructions.

/Henrik
(disclaim: I'm the author)

On Tue, Jan 21, 2020 at 7:50 AM neonira Arinoem <neonira at gmail.com> wrote:
>
> I create a cheat sheet using MS-OFFICE and  converted it at a PDF format.
>
> I wonder in which folder of my package I should place it to be installed
> with the package.
>
> I tried instinctively in vignettes, but it doesn't seem to work correctly,
> as I do not find it back in my package installation folder.
>
> Best.
> Neonira
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Jan 21 17:32:35 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 21 Jan 2020 16:32:35 +0000
Subject: [R-pkg-devel] How to provide a finalized PDF file in a package?
In-Reply-To: <CAFDcVCSS4kgSGr=YLFAKUxuKTA21OFT0STV2JOZo4+-fLnJznw@mail.gmail.com>
References: <CAN--Dz3RqOQaptCEGO3rcq=w2v6QT8dzP6oNDc4UMChBxwXiDg@mail.gmail.com>
 <CAFDcVCSS4kgSGr=YLFAKUxuKTA21OFT0STV2JOZo4+-fLnJznw@mail.gmail.com>
Message-ID: <CABtg=Km-gtZUhKGeVq=2WFP5JHB1h+=vVBLhTsj-dY9EPbmKBg@mail.gmail.com>

While R.rsp is a great workaround, I wish we had a better solution for
including a static PDF file in a package, one that does not require 6
additional packages to leave a file exactly as it is....

Gabor

On Tue, Jan 21, 2020 at 4:30 PM Henrik Bengtsson
<henrik.bengtsson at gmail.com> wrote:
>
> It sounds like you want the PDF to have it appear as a package
> vignette.  You can use the R.rsp::asis vignette engine
> (https://cran.r-project.org/package=R.rsp) to add static PDFs as
> vignettes to your package.  The PDF is included as-is during the
> package *build* process (R CMD build) like other package vignettes and
> you don't have to LaTeX or other tools installed.  See
> https://cran.r-project.org/web/packages/R.rsp/vignettes/R_packages-Static_PDF_and_HTML_vignettes.pdf
> for instructions.
>
> /Henrik
> (disclaim: I'm the author)
>
> On Tue, Jan 21, 2020 at 7:50 AM neonira Arinoem <neonira at gmail.com> wrote:
> >
> > I create a cheat sheet using MS-OFFICE and  converted it at a PDF format.
> >
> > I wonder in which folder of my package I should place it to be installed
> > with the package.
> >
> > I tried instinctively in vignettes, but it doesn't seem to work correctly,
> > as I do not find it back in my package installation folder.
> >
> > Best.
> > Neonira
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@||@@tubner @end|ng |rom gm@||@com  Tue Jan 21 17:58:14 2020
From: r@||@@tubner @end|ng |rom gm@||@com (Ralf Stubner)
Date: Tue, 21 Jan 2020 17:58:14 +0100
Subject: [R-pkg-devel] How to provide a finalized PDF file in a package?
In-Reply-To: <CABtg=Km-gtZUhKGeVq=2WFP5JHB1h+=vVBLhTsj-dY9EPbmKBg@mail.gmail.com>
References: <CAN--Dz3RqOQaptCEGO3rcq=w2v6QT8dzP6oNDc4UMChBxwXiDg@mail.gmail.com>
 <CAFDcVCSS4kgSGr=YLFAKUxuKTA21OFT0STV2JOZo4+-fLnJznw@mail.gmail.com>
 <CABtg=Km-gtZUhKGeVq=2WFP5JHB1h+=vVBLhTsj-dY9EPbmKBg@mail.gmail.com>
Message-ID: <CAFQwRQzi+SQWQLJF60h+fDVCJmquCYfcbGRmhaB4-vyTFpatdA@mail.gmail.com>

On Tue, Jan 21, 2020 at 5:50 PM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>
> While R.rsp is a great workaround, I wish we had a better solution for
> including a static PDF file in a package, one that does not require 6
> additional packages to leave a file exactly as it is....

One can use a Sweave vignette and simply include the real PDF with the
pdfpages package, c.f.
https://github.com/RcppCore/Rcpp/blob/master/vignettes/Rcpp-introduction.Rnw

cheerio
ralf


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Jan 21 18:01:16 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 21 Jan 2020 17:01:16 +0000
Subject: [R-pkg-devel] How to provide a finalized PDF file in a package?
In-Reply-To: <CAFQwRQzi+SQWQLJF60h+fDVCJmquCYfcbGRmhaB4-vyTFpatdA@mail.gmail.com>
References: <CAN--Dz3RqOQaptCEGO3rcq=w2v6QT8dzP6oNDc4UMChBxwXiDg@mail.gmail.com>
 <CAFDcVCSS4kgSGr=YLFAKUxuKTA21OFT0STV2JOZo4+-fLnJznw@mail.gmail.com>
 <CABtg=Km-gtZUhKGeVq=2WFP5JHB1h+=vVBLhTsj-dY9EPbmKBg@mail.gmail.com>
 <CAFQwRQzi+SQWQLJF60h+fDVCJmquCYfcbGRmhaB4-vyTFpatdA@mail.gmail.com>
Message-ID: <CABtg=Kkb9aE+21ztBDLXCxVCUCOTQSLNsNJreFDSRx-aWfzTrA@mail.gmail.com>

Right. Then you _only_ need to install about 5 GBs of software to copy
a PDF file. :/

I guess if you already have LaTeX and you are sure that it will not
mess up your PDF, then this is another solution.

Gabor

On Tue, Jan 21, 2020 at 4:58 PM Ralf Stubner <ralf.stubner at gmail.com> wrote:
[...]
> One can use a Sweave vignette and simply include the real PDF with the
> pdfpages package, c.f.
> https://github.com/RcppCore/Rcpp/blob/master/vignettes/Rcpp-introduction.Rnw
>
> cheerio
> ralf


From neon|r@ @end|ng |rom gm@||@com  Tue Jan 21 18:01:57 2020
From: neon|r@ @end|ng |rom gm@||@com (neonira Arinoem)
Date: Tue, 21 Jan 2020 18:01:57 +0100
Subject: [R-pkg-devel] How to provide a finalized PDF file in a package?
In-Reply-To: <CABtg=Km-gtZUhKGeVq=2WFP5JHB1h+=vVBLhTsj-dY9EPbmKBg@mail.gmail.com>
References: <CAN--Dz3RqOQaptCEGO3rcq=w2v6QT8dzP6oNDc4UMChBxwXiDg@mail.gmail.com>
 <CAFDcVCSS4kgSGr=YLFAKUxuKTA21OFT0STV2JOZo4+-fLnJznw@mail.gmail.com>
 <CABtg=Km-gtZUhKGeVq=2WFP5JHB1h+=vVBLhTsj-dY9EPbmKBg@mail.gmail.com>
Message-ID: <CAN--Dz11=DXummOFE2eyEGcEFp=PqPUdXpvH-DLXi3W9rBgGow@mail.gmail.com>

Absolutely right Gabor.

Thanks for suggestion Henrik.

I tried to put the PDF directly in /inst/doc but apparently content is
overwritten during vignettes generation, although there exists no name
clash.
Will probably have to try R.rsp!



Le mar. 21 janv. 2020 ? 17:32, G?bor Cs?rdi <csardi.gabor at gmail.com> a
?crit :

> While R.rsp is a great workaround, I wish we had a better solution for
> including a static PDF file in a package, one that does not require 6
> additional packages to leave a file exactly as it is....
>
> Gabor
>
> On Tue, Jan 21, 2020 at 4:30 PM Henrik Bengtsson
> <henrik.bengtsson at gmail.com> wrote:
> >
> > It sounds like you want the PDF to have it appear as a package
> > vignette.  You can use the R.rsp::asis vignette engine
> > (https://cran.r-project.org/package=R.rsp) to add static PDFs as
> > vignettes to your package.  The PDF is included as-is during the
> > package *build* process (R CMD build) like other package vignettes and
> > you don't have to LaTeX or other tools installed.  See
> >
> https://cran.r-project.org/web/packages/R.rsp/vignettes/R_packages-Static_PDF_and_HTML_vignettes.pdf
> > for instructions.
> >
> > /Henrik
> > (disclaim: I'm the author)
> >
> > On Tue, Jan 21, 2020 at 7:50 AM neonira Arinoem <neonira at gmail.com>
> wrote:
> > >
> > > I create a cheat sheet using MS-OFFICE and  converted it at a PDF
> format.
> > >
> > > I wonder in which folder of my package I should place it to be
> installed
> > > with the package.
> > >
> > > I tried instinctively in vignettes, but it doesn't seem to work
> correctly,
> > > as I do not find it back in my package installation folder.
> > >
> > > Best.
> > > Neonira
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-package-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Tue Jan 21 18:12:06 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 21 Jan 2020 11:12:06 -0600
Subject: [R-pkg-devel] How to provide a finalized PDF file in a package?
In-Reply-To: <CAFQwRQzi+SQWQLJF60h+fDVCJmquCYfcbGRmhaB4-vyTFpatdA@mail.gmail.com>
References: <CAN--Dz3RqOQaptCEGO3rcq=w2v6QT8dzP6oNDc4UMChBxwXiDg@mail.gmail.com>
 <CAFDcVCSS4kgSGr=YLFAKUxuKTA21OFT0STV2JOZo4+-fLnJznw@mail.gmail.com>
 <CABtg=Km-gtZUhKGeVq=2WFP5JHB1h+=vVBLhTsj-dY9EPbmKBg@mail.gmail.com>
 <CAFQwRQzi+SQWQLJF60h+fDVCJmquCYfcbGRmhaB4-vyTFpatdA@mail.gmail.com>
Message-ID: <24103.12518.790609.964917@rob.eddelbuettel.com>


On 21 January 2020 at 17:58, Ralf Stubner wrote:
| On Tue, Jan 21, 2020 at 5:50 PM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
| >
| > While R.rsp is a great workaround, I wish we had a better solution for
| > including a static PDF file in a package, one that does not require 6
| > additional packages to leave a file exactly as it is....

I second the preference for low-dependency counts.
 
| One can use a Sweave vignette and simply include the real PDF with the
| pdfpages package, c.f.
| https://github.com/RcppCore/Rcpp/blob/master/vignettes/Rcpp-introduction.Rnw

Indeed -- but credit where credit is due. This goes back to a short blog post
by Mark which I referenced here a few times:

 https://www.markvanderloo.eu/yaRb/2019/01/11/add-a-static-pdf-vignette-to-an-r-package/

The underlying trick is a well-known latex feature that you can slurp pdf
content into pdf output and also described in other places.  But Mark's short
and concise write-up should give everything you need to do this with just
base R and nothing else (by relying on well-honed the Sweave workflow).

Best,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From henr|k@bengt@@on @end|ng |rom gm@||@com  Tue Jan 21 18:30:36 2020
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Tue, 21 Jan 2020 09:30:36 -0800
Subject: [R-pkg-devel] How to provide a finalized PDF file in a package?
In-Reply-To: <CABtg=Kkb9aE+21ztBDLXCxVCUCOTQSLNsNJreFDSRx-aWfzTrA@mail.gmail.com>
References: <CAN--Dz3RqOQaptCEGO3rcq=w2v6QT8dzP6oNDc4UMChBxwXiDg@mail.gmail.com>
 <CAFDcVCSS4kgSGr=YLFAKUxuKTA21OFT0STV2JOZo4+-fLnJznw@mail.gmail.com>
 <CABtg=Km-gtZUhKGeVq=2WFP5JHB1h+=vVBLhTsj-dY9EPbmKBg@mail.gmail.com>
 <CAFQwRQzi+SQWQLJF60h+fDVCJmquCYfcbGRmhaB4-vyTFpatdA@mail.gmail.com>
 <CABtg=Kkb9aE+21ztBDLXCxVCUCOTQSLNsNJreFDSRx-aWfzTrA@mail.gmail.com>
Message-ID: <CAFDcVCSCckV2md6UGfBbseR7KbivnTJC=F3mwM_=xEXAxVGfMA@mail.gmail.com>

The R.rsp::asis and R.rsp::tex could easily be pulled out from R.rsp
in a standalone package with zero dependencies.  However, it would be
better if they could be brought into the 'tools' package.  This is why
I never went down the path or making a standalone package (adding yet
another package to CRAN).  These two vignette engines are lightweight,
very simple, and does not add dependencies etc.  What stops me is the
the amount of work it would take to prepare this proposal.  I worry
there might be pushbacks because including a static PDF or static HTML
produced in another tool discourage the developer from including the
actual source document.  The R.rsp::tex engine is less controversial
in this sense; it takes the true LaTeX source and builds a PDF
vignette using R's built-in LaTeX tools.  Sure, Sweave can be hijacked
for pure LaTeX vignettes, but personally I think that's a hack.  If
someone is willing to prepare a proposal, I'm happy to help.  The
essential parts for R.rsp::asis are:

https://github.com/HenrikBengtsson/R.rsp/blob/398d75ccc70a33b75c7cdaecef94a24be0dcbad0/R/xweavetangle.R#L177-L227
https://github.com/HenrikBengtsson/R.rsp/blob/398d75ccc70a33b75c7cdaecef94a24be0dcbad0/R/xweavetangle.R#L367-L372

The R.rsp::tex parts need a bit more work to entangle from the rest of the code.

/Henrik

On Tue, Jan 21, 2020 at 9:01 AM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>
> Right. Then you _only_ need to install about 5 GBs of software to copy
> a PDF file. :/
>
> I guess if you already have LaTeX and you are sure that it will not
> mess up your PDF, then this is another solution.
>
> Gabor
>
> On Tue, Jan 21, 2020 at 4:58 PM Ralf Stubner <ralf.stubner at gmail.com> wrote:
> [...]
> > One can use a Sweave vignette and simply include the real PDF with the
> > pdfpages package, c.f.
> > https://github.com/RcppCore/Rcpp/blob/master/vignettes/Rcpp-introduction.Rnw
> >
> > cheerio
> > ralf


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Jan 21 18:40:06 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 21 Jan 2020 17:40:06 +0000
Subject: [R-pkg-devel] How to provide a finalized PDF file in a package?
In-Reply-To: <CAFDcVCSCckV2md6UGfBbseR7KbivnTJC=F3mwM_=xEXAxVGfMA@mail.gmail.com>
References: <CAN--Dz3RqOQaptCEGO3rcq=w2v6QT8dzP6oNDc4UMChBxwXiDg@mail.gmail.com>
 <CAFDcVCSS4kgSGr=YLFAKUxuKTA21OFT0STV2JOZo4+-fLnJznw@mail.gmail.com>
 <CABtg=Km-gtZUhKGeVq=2WFP5JHB1h+=vVBLhTsj-dY9EPbmKBg@mail.gmail.com>
 <CAFQwRQzi+SQWQLJF60h+fDVCJmquCYfcbGRmhaB4-vyTFpatdA@mail.gmail.com>
 <CABtg=Kkb9aE+21ztBDLXCxVCUCOTQSLNsNJreFDSRx-aWfzTrA@mail.gmail.com>
 <CAFDcVCSCckV2md6UGfBbseR7KbivnTJC=F3mwM_=xEXAxVGfMA@mail.gmail.com>
Message-ID: <CABtg=K=zqFgAnckdqTK0m2tQVtahouMxxb9RXH17T38ANBQ+hQ@mail.gmail.com>

Yeah, I agree that it would be the best to have something similar in base R.

Short of that, we could have a short piece of code that you could just
insert into your package, and it would declare the itself as vignette
builder, which just does the copying.

G.

On Tue, Jan 21, 2020 at 5:30 PM Henrik Bengtsson
<henrik.bengtsson at gmail.com> wrote:
>
> The R.rsp::asis and R.rsp::tex could easily be pulled out from R.rsp
> in a standalone package with zero dependencies.  However, it would be
> better if they could be brought into the 'tools' package.  This is why
> I never went down the path or making a standalone package (adding yet
> another package to CRAN).  These two vignette engines are lightweight,
> very simple, and does not add dependencies etc.  What stops me is the
> the amount of work it would take to prepare this proposal.  I worry
> there might be pushbacks because including a static PDF or static HTML
> produced in another tool discourage the developer from including the
> actual source document.  The R.rsp::tex engine is less controversial
> in this sense; it takes the true LaTeX source and builds a PDF
> vignette using R's built-in LaTeX tools.  Sure, Sweave can be hijacked
> for pure LaTeX vignettes, but personally I think that's a hack.  If
> someone is willing to prepare a proposal, I'm happy to help.  The
> essential parts for R.rsp::asis are:
>
> https://github.com/HenrikBengtsson/R.rsp/blob/398d75ccc70a33b75c7cdaecef94a24be0dcbad0/R/xweavetangle.R#L177-L227
> https://github.com/HenrikBengtsson/R.rsp/blob/398d75ccc70a33b75c7cdaecef94a24be0dcbad0/R/xweavetangle.R#L367-L372
>
> The R.rsp::tex parts need a bit more work to entangle from the rest of the code.
>
> /Henrik
>
> On Tue, Jan 21, 2020 at 9:01 AM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> >
> > Right. Then you _only_ need to install about 5 GBs of software to copy
> > a PDF file. :/
> >
> > I guess if you already have LaTeX and you are sure that it will not
> > mess up your PDF, then this is another solution.
> >
> > Gabor
> >
> > On Tue, Jan 21, 2020 at 4:58 PM Ralf Stubner <ralf.stubner at gmail.com> wrote:
> > [...]
> > > One can use a Sweave vignette and simply include the real PDF with the
> > > pdfpages package, c.f.
> > > https://github.com/RcppCore/Rcpp/blob/master/vignettes/Rcpp-introduction.Rnw
> > >
> > > cheerio
> > > ralf


From henr|k@bengt@@on @end|ng |rom gm@||@com  Tue Jan 21 19:00:14 2020
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Tue, 21 Jan 2020 10:00:14 -0800
Subject: [R-pkg-devel] How to provide a finalized PDF file in a package?
In-Reply-To: <CABtg=K=zqFgAnckdqTK0m2tQVtahouMxxb9RXH17T38ANBQ+hQ@mail.gmail.com>
References: <CAN--Dz3RqOQaptCEGO3rcq=w2v6QT8dzP6oNDc4UMChBxwXiDg@mail.gmail.com>
 <CAFDcVCSS4kgSGr=YLFAKUxuKTA21OFT0STV2JOZo4+-fLnJznw@mail.gmail.com>
 <CABtg=Km-gtZUhKGeVq=2WFP5JHB1h+=vVBLhTsj-dY9EPbmKBg@mail.gmail.com>
 <CAFQwRQzi+SQWQLJF60h+fDVCJmquCYfcbGRmhaB4-vyTFpatdA@mail.gmail.com>
 <CABtg=Kkb9aE+21ztBDLXCxVCUCOTQSLNsNJreFDSRx-aWfzTrA@mail.gmail.com>
 <CAFDcVCSCckV2md6UGfBbseR7KbivnTJC=F3mwM_=xEXAxVGfMA@mail.gmail.com>
 <CABtg=K=zqFgAnckdqTK0m2tQVtahouMxxb9RXH17T38ANBQ+hQ@mail.gmail.com>
Message-ID: <CAFDcVCQeL-WUb1u1YtAayeY68UkT6oY-yBK4477+PVzi0oDRXA@mail.gmail.com>

On Tue, Jan 21, 2020 at 9:40 AM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>
> Yeah, I agree that it would be the best to have something similar in base R.
>
> Short of that, we could have a short piece of code that you could just
> insert into your package, and it would declare the itself as vignette
> builder, which just does the copying.

Yup, but this is probably something you don't want to introduce to
newcomers, because making a package provide it's own vignette engine
comes with problems too, e.g. the package needs to be installed before
it can be built (sic!) so you need to go an extra mile on, say, Travis
CI for this to work.  Because of this, I've avoided documenting and
mentioning this as an option.  I'm also concerned that it will make it
a pain to refine how vignette engines are meant to in base R if there
are 100's of self-contained vignette engines that need to be updated
first.  Vignette engines are still < 100% defined, e.g. only recently
it was discussed what the output directory of vignette engines should
be (it was assumed that everyone wrote to the current directory).

In case people are not aware, I think it's important to clarify that
any additional package dependencies that a vignette engine introduces
is on the burden of the package developer.  They are only required
when you *build* the package (R CMD build).   They are not required
when install or running the package.  In other words, end-users don't
need to worry about those packages.

/Henrik


>
> G.
>
> On Tue, Jan 21, 2020 at 5:30 PM Henrik Bengtsson
> <henrik.bengtsson at gmail.com> wrote:
> >
> > The R.rsp::asis and R.rsp::tex could easily be pulled out from R.rsp
> > in a standalone package with zero dependencies.  However, it would be
> > better if they could be brought into the 'tools' package.  This is why
> > I never went down the path or making a standalone package (adding yet
> > another package to CRAN).  These two vignette engines are lightweight,
> > very simple, and does not add dependencies etc.  What stops me is the
> > the amount of work it would take to prepare this proposal.  I worry
> > there might be pushbacks because including a static PDF or static HTML
> > produced in another tool discourage the developer from including the
> > actual source document.  The R.rsp::tex engine is less controversial
> > in this sense; it takes the true LaTeX source and builds a PDF
> > vignette using R's built-in LaTeX tools.  Sure, Sweave can be hijacked
> > for pure LaTeX vignettes, but personally I think that's a hack.  If
> > someone is willing to prepare a proposal, I'm happy to help.  The
> > essential parts for R.rsp::asis are:
> >
> > https://github.com/HenrikBengtsson/R.rsp/blob/398d75ccc70a33b75c7cdaecef94a24be0dcbad0/R/xweavetangle.R#L177-L227
> > https://github.com/HenrikBengtsson/R.rsp/blob/398d75ccc70a33b75c7cdaecef94a24be0dcbad0/R/xweavetangle.R#L367-L372
> >
> > The R.rsp::tex parts need a bit more work to entangle from the rest of the code.
> >
> > /Henrik
> >
> > On Tue, Jan 21, 2020 at 9:01 AM G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> > >
> > > Right. Then you _only_ need to install about 5 GBs of software to copy
> > > a PDF file. :/
> > >
> > > I guess if you already have LaTeX and you are sure that it will not
> > > mess up your PDF, then this is another solution.
> > >
> > > Gabor
> > >
> > > On Tue, Jan 21, 2020 at 4:58 PM Ralf Stubner <ralf.stubner at gmail.com> wrote:
> > > [...]
> > > > One can use a Sweave vignette and simply include the real PDF with the
> > > > pdfpages package, c.f.
> > > > https://github.com/RcppCore/Rcpp/blob/master/vignettes/Rcpp-introduction.Rnw
> > > >
> > > > cheerio
> > > > ralf


From m@|| @end|ng |rom dr|@nw@|ker@com  Wed Jan 22 11:29:51 2020
From: m@|| @end|ng |rom dr|@nw@|ker@com (Ian Walker)
Date: Wed, 22 Jan 2020 10:29:51 +0000
Subject: [R-pkg-devel] Need help to resolve NOTEs in auto check
Message-ID: <jRMb66HtWYaa5HUhkr0EemTPsx6QUY3XntzPWC_Sh_W7ZzHMrGZG5V5SoYgDCeT60jLfZ_ATM4LvvjXTo7Nf5FS5k1MuMQnHjNCPlEau73Q=@drianwalker.com>

Hello,

I'm trying to repackage an R function so I can update the licence. I'm stuck with the automatic checks. The problem appears to be the following three NOTEs in the checking output:

* checking CRAN incoming feasibility ... NOTE
Maintainer: ?Ian Walker <
i.walker at bath.ac.uk
>?

Possibly mis-spelled words in DESCRIPTION:
  DEMs (7:503)
  STL (7:47)
  stereolithography (7:52)
  stl (7:24)

The build time stamp is missing.

It's not clear what is wrong here - is it the spellings (which are fine) or the time stamp? If the latter, how do I resolve this?

* checking DESCRIPTION meta-information ... NOTE
Checking should be performed on sources prepared by ?R CMD build?.

I can't make any sense of this issue!

* checking for non-standard things in the check directory ... NOTE
Found the following files/directories:
  ?lovelyfunction.stl? ?volcano.stl?

These two .stl files are simply mentioned in the documentation's example code - they're files that would be created if somebody ran the example code; they're not in the R package I've created.

Thanks for any help,

Ian
--
Dr Ian Walker FHEA | Department of Psychology, University of Bath
i.walker at bath.ac.uk (academic) | mail at drianwalker.com (other matters)

Website: drianwalker.com | Twitter: twitter.com/ianwalker

My books:
Research Methods and Statistics - a new, clear introduction http://tinyurl.com/res-stats
Research with People - the essential research textbook: http://amzn.to/sRbYxy
	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Jan 22 13:29:07 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 22 Jan 2020 15:29:07 +0300
Subject: [R-pkg-devel] Need help to resolve NOTEs in auto check
In-Reply-To: <jRMb66HtWYaa5HUhkr0EemTPsx6QUY3XntzPWC_Sh_W7ZzHMrGZG5V5SoYgDCeT60jLfZ_ATM4LvvjXTo7Nf5FS5k1MuMQnHjNCPlEau73Q=@drianwalker.com>
References: <jRMb66HtWYaa5HUhkr0EemTPsx6QUY3XntzPWC_Sh_W7ZzHMrGZG5V5SoYgDCeT60jLfZ_ATM4LvvjXTo7Nf5FS5k1MuMQnHjNCPlEau73Q=@drianwalker.com>
Message-ID: <20200122152907.3a32a89f@trisector>

Hello Ian,

On Wed, 22 Jan 2020 10:29:51 +0000
Ian Walker <mail at drianwalker.com> wrote:

> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?Ian Walker <
> i.walker at bath.ac.uk
> >?  

This NOTE is there for CRAN staff to have another look at the
Maintainer: field in case this is someone's first submission or there
is a change in package ownership.

> Possibly mis-spelled words in DESCRIPTION:
>   DEMs (7:503)
>   STL (7:47)
>   stereolithography (7:52)
>   stl (7:24)

These should be explained in the "Optional comment" field in the CRAN
submission form.

> The build time stamp is missing.

> NOTE
> Checking should be performed on sources prepared by ?R CMD build?.

How exactly do you build and check your package? It is recommended to
run the command "R CMD build ." in the source directory of the package,
then "R CMD check mypackage_version.tar.gz" (substituting the name of
the newly generated file for mypackage_version.tar.gz).

> These two .stl files are simply mentioned in the documentation's
> example code - they're files that would be created if somebody ran
> the example code; they're not in the R package I've created.

It might be a better idea to use file.temp() for these file paths. CRAN
policy says that packages should not write files anywhere besides R's
session temporary directory unless user explicitly passes the the path.

-- 
Best regards,
Ivan


From pd@|gd @end|ng |rom gm@||@com  Wed Jan 22 13:32:06 2020
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Wed, 22 Jan 2020 13:32:06 +0100
Subject: [R-pkg-devel] Need help to resolve NOTEs in auto check
In-Reply-To: <jRMb66HtWYaa5HUhkr0EemTPsx6QUY3XntzPWC_Sh_W7ZzHMrGZG5V5SoYgDCeT60jLfZ_ATM4LvvjXTo7Nf5FS5k1MuMQnHjNCPlEau73Q=@drianwalker.com>
References: <jRMb66HtWYaa5HUhkr0EemTPsx6QUY3XntzPWC_Sh_W7ZzHMrGZG5V5SoYgDCeT60jLfZ_ATM4LvvjXTo7Nf5FS5k1MuMQnHjNCPlEau73Q=@drianwalker.com>
Message-ID: <79DF1A4C-131D-4882-A13C-D7090FBA13AF@gmail.com>

(a) Spelling issues: False positive are checked manually by CRAN, so just tell them on submission. For software items, Uwe at some point recommended "Single quotes around software names such as 'pkg', functions should be written with parentheses as in foo()."

(b) The procedure for submitting is to run 'R CMD build' on the (unpackaged) source directory, then submit the resulting .tar.gz file. If you don't do that, the build time stamp will be absent. Similarly 'R CMD check' should be run on the output from 'R CMD build'. Like this (oups, that dir is out of sync on this computer):

Peters-iMac:ISWR-2nd-ed pd$ R CMD build ISwR
* checking for file ?ISwR/DESCRIPTION? ... OK
* preparing ?ISwR?:
* checking DESCRIPTION meta-information ... OK
* checking for LF line-endings in source and make files and shell scripts
* checking for empty or unneeded directories
* looking to see if a ?data/datalist? file should be added
* re-saving .R files as .rda
  NB: *.R converted to .rda: other files may need to be removed
* re-saving tabular files
* creating default NAMESPACE file
* building ?ISwR_2.0-5.tar.gz?

Peters-iMac:ISWR-2nd-ed pd$ R CMD check --as-cran ISwR_2.0-5.tar.gz 
* using log directory ?/Users/pd/BIOSTAT/books/ISWR-2nd-ed/ISwR.Rcheck?
* using R version 3.6.0 (2019-04-26)
* using platform: x86_64-apple-darwin15.6.0 (64-bit)
* using session charset: UTF-8
* using option ?--as-cran?
* checking for file ?ISwR/DESCRIPTION? ... OK
* this is package ?ISwR? version ?2.0-5?
* checking CRAN incoming feasibility ... WARNING
Maintainer: ?Peter Dalgaard <pd.mes at cbs.dk>?

Insufficient package version (submitted: 2.0.5, existing: 2.0.8)

Days since last update: 2

The Date field is over a month old.
* checking package namespace information ... OK
*......


(c) Examples _will_ be run as part of the check procedure. If that produces stray files in the check directory, you will tget the message that you see. In interactive usage, example(...) will similarly create files in the current directory, which is verboten, so write to a temporary directory instead. (See help(tempfile) for specifics).

> On 22 Jan 2020, at 11:29 , Ian Walker <mail at drianwalker.com> wrote:
> 
> Hello,
> 
> I'm trying to repackage an R function so I can update the licence. I'm stuck with the automatic checks. The problem appears to be the following three NOTEs in the checking output:
> 
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?Ian Walker <
> i.walker at bath.ac.uk
>> ?
> 
> Possibly mis-spelled words in DESCRIPTION:
>  DEMs (7:503)
>  STL (7:47)
>  stereolithography (7:52)
>  stl (7:24)
> 
> The build time stamp is missing.
> 
> It's not clear what is wrong here - is it the spellings (which are fine) or the time stamp? If the latter, how do I resolve this?
> 
> * checking DESCRIPTION meta-information ... NOTE
> Checking should be performed on sources prepared by ?R CMD build?.
> 
> I can't make any sense of this issue!
> 
> * checking for non-standard things in the check directory ... NOTE
> Found the following files/directories:
>  ?lovelyfunction.stl? ?volcano.stl?
> 
> These two .stl files are simply mentioned in the documentation's example code - they're files that would be created if somebody ran the example code; they're not in the R package I've created.
> 
> Thanks for any help,
> 
> Ian
> --
> Dr Ian Walker FHEA | Department of Psychology, University of Bath
> i.walker at bath.ac.uk (academic) | mail at drianwalker.com (other matters)
> 
> Website: drianwalker.com | Twitter: twitter.com/ianwalker
> 
> My books:
> Research Methods and Statistics - a new, clear introduction http://tinyurl.com/res-stats
> Research with People - the essential research textbook: http://amzn.to/sRbYxy
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From edd @end|ng |rom deb|@n@org  Wed Jan 22 15:35:37 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 22 Jan 2020 08:35:37 -0600
Subject: [R-pkg-devel] Alternatives to R-devel on a Mac for package
 checking?
In-Reply-To: <24095.38870.713369.302831@rob.eddelbuettel.com>
References: <CABG0rfvpt+9bicqkBAq+KX24apZtH_k-NjoUdn3Y32LGo-1q=w@mail.gmail.com>
 <25F9297A-0413-4677-831E-1EA8FEA98AA4@duke.edu>
 <24095.38870.713369.302831@rob.eddelbuettel.com>
Message-ID: <24104.23993.292421.263914@rob.eddelbuettel.com>


Just to close one loop here:

On 15 January 2020 at 16:53, Dirk Eddelbuettel wrote:
| Rocker should be building weekly r-devel and drd (similar, was meant to be a
| littler "lighter", effectively the same) images.
| 
| As Merlise noticed, somehow the cronjob push to the Docker Hub build service
| started to fail -- this sadly happens once in a while so I manually triggered
| a rebuild. They should be good now for 'R 4.0.0 to be'. Remember to invoke it
| as 'RD' (for R-Devel) in the image, there is also an r-release as just 'R'.

And the actual cron(tab)-based invocation has been refreshed with updated
URLs so until docker changes their endpoints the Rocker images

   r-devel           (R-devel build accessible via 'RD' entry)
   drd               (same, a little lighter, once meant to be daily but isn't)
   drp               (ditto for R-patched)

should now again be rebuilt each weekend.

Best regards,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From jgreenberg @end|ng |rom unr@edu  Wed Jan 22 21:54:40 2020
From: jgreenberg @end|ng |rom unr@edu (Jonathan Greenberg)
Date: Wed, 22 Jan 2020 20:54:40 +0000
Subject: [R-pkg-devel] Adding .exes to R package?
Message-ID: <CABG0rftCrb7aUBfRPtVTqibUL4e0Q+uHi+ttpzZ_FV4NXhaLhQ@mail.gmail.com>

Folks:

What is the policy on adding Windows executables to an R package?  My gdalUtils package could REALLY use this ability (right now it requires users to manually install GDAL which can cause headaches for folks).  Related: what about linux/mac executables?

Are there reasonable tutorials on how to do this?

--j

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Wed Jan 22 22:06:02 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Wed, 22 Jan 2020 16:06:02 -0500
Subject: [R-pkg-devel] Adding .exes to R package?
In-Reply-To: <CABG0rftCrb7aUBfRPtVTqibUL4e0Q+uHi+ttpzZ_FV4NXhaLhQ@mail.gmail.com>
References: <CABG0rftCrb7aUBfRPtVTqibUL4e0Q+uHi+ttpzZ_FV4NXhaLhQ@mail.gmail.com>
Message-ID: <CABghstTdkEO9mjjsm3bxdFxqohX4YbN_2smQURR-wBKeP2W3tA@mail.gmail.com>

>From https://cran.r-project.org/web/packages/policies.html:

Source packages may not contain any form of binary executable code.



On Wed, Jan 22, 2020 at 3:54 PM Jonathan Greenberg <jgreenberg at unr.edu> wrote:
>
> Folks:
>
> What is the policy on adding Windows executables to an R package?  My gdalUtils package could REALLY use this ability (right now it requires users to manually install GDAL which can cause headaches for folks).  Related: what about linux/mac executables?
>
> Are there reasonable tutorials on how to do this?
>
> --j
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From bbo|ker @end|ng |rom gm@||@com  Wed Jan 22 22:07:04 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Wed, 22 Jan 2020 16:07:04 -0500
Subject: [R-pkg-devel] Adding .exes to R package?
In-Reply-To: <CABghstTdkEO9mjjsm3bxdFxqohX4YbN_2smQURR-wBKeP2W3tA@mail.gmail.com>
References: <CABG0rftCrb7aUBfRPtVTqibUL4e0Q+uHi+ttpzZ_FV4NXhaLhQ@mail.gmail.com>
 <CABghstTdkEO9mjjsm3bxdFxqohX4YbN_2smQURR-wBKeP2W3tA@mail.gmail.com>
Message-ID: <CABghstRtyCw3G4zpyu1Uu=tn3po8-uv0zX=G+ozhZEF5uRn_GA@mail.gmail.com>

 PS I don't know if you would be allowed to include a utility function
to be run manually by users after setup that would download binaries
from a trusted source and put them in an appropriate/findable place on
the user's system.

On Wed, Jan 22, 2020 at 4:06 PM Ben Bolker <bbolker at gmail.com> wrote:
>
> From https://cran.r-project.org/web/packages/policies.html:
>
> Source packages may not contain any form of binary executable code.
>
>
>
> On Wed, Jan 22, 2020 at 3:54 PM Jonathan Greenberg <jgreenberg at unr.edu> wrote:
> >
> > Folks:
> >
> > What is the policy on adding Windows executables to an R package?  My gdalUtils package could REALLY use this ability (right now it requires users to manually install GDAL which can cause headaches for folks).  Related: what about linux/mac executables?
> >
> > Are there reasonable tutorials on how to do this?
> >
> > --j
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Thu Jan 23 02:48:43 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Wed, 22 Jan 2020 19:48:43 -0600
Subject: [R-pkg-devel] CRAN rules re. web scraping?
In-Reply-To: <2afee645-3e1b-253e-226e-e896237108bd@stats.ox.ac.uk>
References: <2afee645-3e1b-253e-226e-e896237108bd@stats.ox.ac.uk>
Message-ID: <d637f2f5-6986-decb-699c-b7ff5b3690c5@effectivedefense.org>

Hello, All:


GOOD NEWS AND BAD NEWS:


 ????? * First the good news:? I heard from Brian Ripley;? see below.? 
His web site says, "He retired in August 2014 on grounds of ill health." 
(http://www.stats.ox.ac.uk/~ripley/)? I was pleased to see that he seems 
to be well enough to send me the email below.


 ????? * BAD NEWS:? My Ecfun package is violating current CRAN rules 
regarding "not writing anywhere in the file space".? (See below.)


QUESTION:


 ????? How do you suggest I respond to this?


 ????? It's hard for me to fix, because I cannot replicate the error and 
I don't understand the rules Prof. Ripley is trying to enforce. The 
"CRAN Package Check Results for" this package show an error on 1 
platform (r-devel-linux-x86_64-fedora-gcc), NOTEs on 3 platforms 
(Fedora-clang and Debian), and "OK" on 9 others.? I can program selected 
tests not to run on CRAN, e.g., with (!fda::CRAN()).


 ????? However, I suspect I should be able to do better than that.


 ????? Suggestions?


 ????? Thanks,
 ????? Spencer Graves


p.s.? The development version of this package is available at 
"https://github.com/sbgraves237/Ecfun".


https://cloud.r-project.org/web/checks/check_results_Ecfun.html


-------- Forwarded Message --------
Subject: 	CRAN package Ecfun
Date: 	Tue, 21 Jan 2020 21:26:02 +0000
From: 	Prof Brian Ripley <ripley at stats.ox.ac.uk>
Reply-To: 	CRAN <CRAN at r-project.org>
To: 	Spencer Graves <spencer.graves at effectivedefense.org>
CC: 	CRAN <CRAN at r-project.org>



This has been intermittently failing its checks for a week: different 
check runs failed (in the 24h prior to) the 14th, 15th, 17th and today. 
The current failure is

Check: examples
Result: ERROR
Running examples in ?Ecfun-Ex.R? failed
The error most likely occurred in:

 > ### Name: read.testURLs
 > ### Title: Read a file produced by testURLs
 > ### Aliases: read.testURLs
 > ### Keywords: IO
 >
 > ### ** Examples
 >
 > # Test only 2 web sites, not the default 4,
 > # and test only twice, not the default 10 times:
 > tst <- testURLs(c(
+ PVI="http://en.wikipedia.org/wiki/Cook_Partisan_Voting_Index",
+ house="http://house.gov/representatives"),
+ n=2, maxFail=2)
1
1579634784, PVI, TRUE 0.828
1579634785, house, FALSE 0.051
1579634785, house, FALSE 0.048
2
1579634785, PVI, TRUE 0.043
1579634785, house, FALSE 0.11
1579634785, house, FALSE 0.035
 >
 > # The above should have created a file 'testURLresults.csv'
 > # in the working directory. Read it.
 >
 > dat <- read.testURLs()
Error in read.table(file = file, header = header, sep = sep, quote = 
quote, :
more columns than column names
Calls: read.testURLs -> read.csv -> read.table

That does not conform to the policy on Internet access, not least as no 
attempt is made to check if the file was created, let alone that it has 
the expected layout. Nor does it conform to the policy on not writing 
anywhere in the file space (and that shows on its CRAN results page too).

Please correct ASAP and before Feb 4 to safely retain the package on CRAN.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford


	[[alternative HTML version deleted]]


From roy@mende|@@ohn @end|ng |rom no@@@gov  Thu Jan 23 02:57:26 2020
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Wed, 22 Jan 2020 17:57:26 -0800
Subject: [R-pkg-devel] CRAN rules re. web scraping?
In-Reply-To: <d637f2f5-6986-decb-699c-b7ff5b3690c5@effectivedefense.org>
References: <2afee645-3e1b-253e-226e-e896237108bd@stats.ox.ac.uk>
 <d637f2f5-6986-decb-699c-b7ff5b3690c5@effectivedefense.org>
Message-ID: <8BDA1F9E-FDFE-4D46-BA09-4D960E1BEF68@noaa.gov>

Hi Spencer:

I think that message means what it says,  and I read it as pretty straightforward and business like.  The issue is not web scraping.  There are two errors here:

1.  You can not write to the user's space without first explicitly asking permission of the user.   The suggested policy is to write to a temp directory,  R has tempdir() and related commands for how to do this.

2.  When accessing something over the internet,  failure of the access must be checked for and the program exiting gracefully.  The second error appears to be that at times on the builds the .csv file is not downloaded,  but there is no check,  just an error is thrown.  There are a number of ways to catch such errors,  such as "try...catch"  which will solve this problem

HTH,

-Roy


> On Jan 22, 2020, at 5:48 PM, Spencer Graves <spencer.graves at effectivedefense.org> wrote:
> 
> Hello, All:
> 
> 
> GOOD NEWS AND BAD NEWS:
> 
> 
>       * First the good news:  I heard from Brian Ripley;  see below.  
> His web site says, "He retired in August 2014 on grounds of ill health." 
> (http://www.stats.ox.ac.uk/~ripley/)  I was pleased to see that he seems 
> to be well enough to send me the email below.
> 
> 
>       * BAD NEWS:  My Ecfun package is violating current CRAN rules 
> regarding "not writing anywhere in the file space".  (See below.)
> 
> 
> QUESTION:
> 
> 
>       How do you suggest I respond to this?
> 
> 
>       It's hard for me to fix, because I cannot replicate the error and 
> I don't understand the rules Prof. Ripley is trying to enforce. The 
> "CRAN Package Check Results for" this package show an error on 1 
> platform (r-devel-linux-x86_64-fedora-gcc), NOTEs on 3 platforms 
> (Fedora-clang and Debian), and "OK" on 9 others.  I can program selected 
> tests not to run on CRAN, e.g., with (!fda::CRAN()).
> 
> 
>       However, I suspect I should be able to do better than that.
> 
> 
>       Suggestions?
> 
> 
>       Thanks,
>       Spencer Graves
> 
> 
> p.s.  The development version of this package is available at 
> "https://github.com/sbgraves237/Ecfun".
> 
> 
> https://cloud.r-project.org/web/checks/check_results_Ecfun.html
> 
> 
> -------- Forwarded Message --------
> Subject: 	CRAN package Ecfun
> Date: 	Tue, 21 Jan 2020 21:26:02 +0000
> From: 	Prof Brian Ripley <ripley at stats.ox.ac.uk>
> Reply-To: 	CRAN <CRAN at r-project.org>
> To: 	Spencer Graves <spencer.graves at effectivedefense.org>
> CC: 	CRAN <CRAN at r-project.org>
> 
> 
> 
> This has been intermittently failing its checks for a week: different 
> check runs failed (in the 24h prior to) the 14th, 15th, 17th and today. 
> The current failure is
> 
> Check: examples
> Result: ERROR
> Running examples in ?Ecfun-Ex.R? failed
> The error most likely occurred in:
> 
>> ### Name: read.testURLs
>> ### Title: Read a file produced by testURLs
>> ### Aliases: read.testURLs
>> ### Keywords: IO
>> 
>> ### ** Examples
>> 
>> # Test only 2 web sites, not the default 4,
>> # and test only twice, not the default 10 times:
>> tst <- testURLs(c(
> + PVI="http://en.wikipedia.org/wiki/Cook_Partisan_Voting_Index",
> + house="http://house.gov/representatives"),
> + n=2, maxFail=2)
> 1
> 1579634784, PVI, TRUE 0.828
> 1579634785, house, FALSE 0.051
> 1579634785, house, FALSE 0.048
> 2
> 1579634785, PVI, TRUE 0.043
> 1579634785, house, FALSE 0.11
> 1579634785, house, FALSE 0.035
>> 
>> # The above should have created a file 'testURLresults.csv'
>> # in the working directory. Read it.
>> 
>> dat <- read.testURLs()
> Error in read.table(file = file, header = header, sep = sep, quote = 
> quote, :
> more columns than column names
> Calls: read.testURLs -> read.csv -> read.table
> 
> That does not conform to the policy on Internet access, not least as no 
> attempt is made to check if the file was created, let alone that it has 
> the expected layout. Nor does it conform to the policy on not writing 
> anywhere in the file space (and that shows on its CRAN results page too).
> 
> Please correct ASAP and before Feb 4 to safely retain the package on CRAN.
> 
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Emeritus Professor of Applied Statistics, University of Oxford
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From |uc@r @end|ng |rom |edor@project@org  Thu Jan 23 08:55:12 2020
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Thu, 23 Jan 2020 08:55:12 +0100
Subject: [R-pkg-devel] CRAN rules re. web scraping?
In-Reply-To: <d637f2f5-6986-decb-699c-b7ff5b3690c5@effectivedefense.org>
References: <2afee645-3e1b-253e-226e-e896237108bd@stats.ox.ac.uk>
 <d637f2f5-6986-decb-699c-b7ff5b3690c5@effectivedefense.org>
Message-ID: <CALEXWq3rdS=asjxJ=xLqmngQZp+SFSJJnpKGLmwrGcWYi18-gg@mail.gmail.com>

On Thu, 23 Jan 2020 at 02:49, Spencer Graves
<spencer.graves at effectivedefense.org> wrote:
>
> Hello, All:
>
>
> GOOD NEWS AND BAD NEWS:
>
>
>        * First the good news:  I heard from Brian Ripley;  see below.
> His web site says, "He retired in August 2014 on grounds of ill health."
> (http://www.stats.ox.ac.uk/~ripley/)  I was pleased to see that he seems
> to be well enough to send me the email below.
>
>
>        * BAD NEWS:  My Ecfun package is violating current CRAN rules
> regarding "not writing anywhere in the file space".  (See below.)
>
>
> QUESTION:
>
>
>        How do you suggest I respond to this?
>
>
>        It's hard for me to fix, because I cannot replicate the error and
> I don't understand the rules Prof. Ripley is trying to enforce. The
> "CRAN Package Check Results for" this package show an error on 1
> platform (r-devel-linux-x86_64-fedora-gcc), NOTEs on 3 platforms
> (Fedora-clang and Debian), and "OK" on 9 others.  I can program selected
> tests not to run on CRAN, e.g., with (!fda::CRAN()).
>
>
>        However, I suspect I should be able to do better than that.
>
>
>        Suggestions?

The message from Prof. Ripley is crystal-clear, and exposes two issues
(Internet access, writing files) that have been discussed many times
in this list. A quick scan of the CRAN policy [1] yields:

- Packages which use Internet resources should fail gracefully with an
informative message if the resource is not available (and not give a
check warning nor error).

- Packages should not write in the user?s home filespace (including
clipboards), nor anywhere else on the file system apart from the R
session?s temporary directory.

[1] https://cran.r-project.org/web/packages/policies.html

I?aki

>        Thanks,
>        Spencer Graves
>
>
> p.s.  The development version of this package is available at
> "https://github.com/sbgraves237/Ecfun".
>
>
> https://cloud.r-project.org/web/checks/check_results_Ecfun.html
>
>
> -------- Forwarded Message --------
> Subject:        CRAN package Ecfun
> Date:   Tue, 21 Jan 2020 21:26:02 +0000
> From:   Prof Brian Ripley <ripley at stats.ox.ac.uk>
> Reply-To:       CRAN <CRAN at r-project.org>
> To:     Spencer Graves <spencer.graves at effectivedefense.org>
> CC:     CRAN <CRAN at r-project.org>
>
>
>
> This has been intermittently failing its checks for a week: different
> check runs failed (in the 24h prior to) the 14th, 15th, 17th and today.
> The current failure is
>
> Check: examples
> Result: ERROR
> Running examples in ?Ecfun-Ex.R? failed
> The error most likely occurred in:
>
>  > ### Name: read.testURLs
>  > ### Title: Read a file produced by testURLs
>  > ### Aliases: read.testURLs
>  > ### Keywords: IO
>  >
>  > ### ** Examples
>  >
>  > # Test only 2 web sites, not the default 4,
>  > # and test only twice, not the default 10 times:
>  > tst <- testURLs(c(
> + PVI="http://en.wikipedia.org/wiki/Cook_Partisan_Voting_Index",
> + house="http://house.gov/representatives"),
> + n=2, maxFail=2)
> 1
> 1579634784, PVI, TRUE 0.828
> 1579634785, house, FALSE 0.051
> 1579634785, house, FALSE 0.048
> 2
> 1579634785, PVI, TRUE 0.043
> 1579634785, house, FALSE 0.11
> 1579634785, house, FALSE 0.035
>  >
>  > # The above should have created a file 'testURLresults.csv'
>  > # in the working directory. Read it.
>  >
>  > dat <- read.testURLs()
> Error in read.table(file = file, header = header, sep = sep, quote =
> quote, :
> more columns than column names
> Calls: read.testURLs -> read.csv -> read.table
>
> That does not conform to the policy on Internet access, not least as no
> attempt is made to check if the file was created, let alone that it has
> the expected layout. Nor does it conform to the policy on not writing
> anywhere in the file space (and that shows on its CRAN results page too).
>
> Please correct ASAP and before Feb 4 to safely retain the package on CRAN.
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Emeritus Professor of Applied Statistics, University of Oxford
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


-- 
I?aki ?car


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Jan 23 11:06:28 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 23 Jan 2020 13:06:28 +0300
Subject: [R-pkg-devel] Adding .exes to R package?
In-Reply-To: <CABG0rftCrb7aUBfRPtVTqibUL4e0Q+uHi+ttpzZ_FV4NXhaLhQ@mail.gmail.com>
References: <CABG0rftCrb7aUBfRPtVTqibUL4e0Q+uHi+ttpzZ_FV4NXhaLhQ@mail.gmail.com>
Message-ID: <20200123130628.4f51b340@trisector>

On Wed, 22 Jan 2020 20:54:40 +0000
Jonathan Greenberg <jgreenberg at unr.edu> wrote:

> Are there reasonable tutorials on how to do this?

If you absolutely have to do this, take a look at the tinytex package.
It is basically an installer for a preselected set of packages from TeX
Live inside a platform-specific directory. However, if you go this way,
I would like to ask you to preserve the use of manually-installed GDAL
as an option, because I consider manually installed (or distro-provided
in case of GNU/Linux) binaries much easier to trust than automatically
downloaded ones.

"Writing R extensions" mentions _building_ executables as part of the
package a few paragraphs down 1.1.5 Package subdirectories, but
describes such packages as "very special cases" and requiring a lot of
additional hassle: you'd have to provide src/Makefile{,.win} that
should manually build the shared object and the executables and
src/install.libs.R that would install both the shared object and the
executables. I don't think this approach is viable, since latest GDAL
sources are about 13M in size (compressed), and maintaining both the
package and the GDAL binaries would be a serious duplication of effort.

-- 
Best regards,
Ivan


From d@v|dhughjone@ @end|ng |rom gm@||@com  Thu Jan 23 12:46:28 2020
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Thu, 23 Jan 2020 11:46:28 +0000
Subject: [R-pkg-devel] Alternatives to R-devel on a Mac for package
 checking?
In-Reply-To: <CABG0rfvpt+9bicqkBAq+KX24apZtH_k-NjoUdn3Y32LGo-1q=w@mail.gmail.com>
References: <CABG0rfvpt+9bicqkBAq+KX24apZtH_k-NjoUdn3Y32LGo-1q=w@mail.gmail.com>
Message-ID: <CAARY7kgyPfVHP1bqpHQuxJ7y4nGjmd3Oeo0jRiJPF6-P1wRR+A@mail.gmail.com>

The other obvious online checker is rhub, via the rhub package.
David


On Wed, 15 Jan 2020 at 21:39, Jonathan Greenberg <jgreenberg at unr.edu> wrote:

> One of the issues I'm running into is that it seems every time there's a
> Mac update something gets broken with regards to compilers, making it
> incredibly challenging to get the development install of R working with
> Rcpp (which is a requirement for the packages I need to use to check my
> packages).
>
> I'd like to start moving towards an easier approach rather than spending
> days fixing various issues on my Mac just to run a simple --as-cran check
> on a package with the latest  r-devel.  I was HOPING there is an up-to-date
> Docker for the r-development 4.0 version out in the wild, but it seems like
> the rocker r-devel is just 3.6.2.  Any ideas?
>
> docker run --rm -ti rocker/r-devel
>
> Alternatively, are there any decent online checkers (except the CRAN
> ones)?  r-forge seems to not do r-devel checks anymore.
>
> --j
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Jan 23 15:31:15 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 23 Jan 2020 15:31:15 +0100
Subject: [R-pkg-devel] 
 [CRAN-pretest-archived] CRAN submission EventDetectR 0.3.4
In-Reply-To: <CANxkgR4W0XOwSkks-gEiU3ecJBDRMRGZK9so9KHLW-oZJjjB2w@mail.gmail.com>
References: <20200113150520.5F9A5161F0A@xmpalantir.wu.ac.at>
 <01d5ca24$Blat.v3.2.16$e7e46494$945c29a1@mail.statistik.tu-dortmund.de>
 <CANxkgR6Cs_MsAZU3TJExBxrpxo4iVT0zXYscFYD0iQz3E=nUJQ@mail.gmail.com>
 <CANxkgR4W0XOwSkks-gEiU3ecJBDRMRGZK9so9KHLW-oZJjjB2w@mail.gmail.com>
Message-ID: <0f62c346-423a-07a5-732c-64c2c82d7cc1@statistik.tu-dortmund.de>

Sorry, you asked for

Maintainer field differs from that derived from Authors at R
   Maintainer: ?Sowmya Chandrasekaran<sowzz.17 at gmail.com>?
   Authors at R:  ?Frederik Rehbach <frederik.re at gmail.com>?


Obvisouly, both fields diaagree. Pkease omit the Mainainer field from 
the original sources. R CMD build will auto generate the maintainer 
field from the Authors at R field and indert the person with cre role as 
maintainer.

Please fix and resubmit.

Best,
Uwe Ligges




On 23.01.2020 15:21, Sowmya C wrote:
> Dear CRAN/DEVEL Team,
> 
> 
> I am looking forward for kind reply. The two NOTEs are intended changes
> that we made and I think the rejection made is a false positive. Kindly do
> the needful.
> 
> Regards
> Sowmya Chandrasekaran
> 
> On Mon 13 Jan, 2020, 16:31 Sowmya C, <sowzz.17 at gmail.com> wrote:
> 
>> Dear CRAN Team,
>>
>> Thanks a lot for your quick response. This package is being developed as a
>> part of a funded research project. And currently i am working on this and
>> wish to be the maintainer of the package. And hence we wish to change the
>> maintainer from "Margarita Rebolledo <tarigarma2 at gmail.com>" to ?Sowmya
>> Chandrasekaran<sowzz.17 at gmail.com>?. The same has been updated in the
>> description file and it is the two "Notes". Kindly do the needful.
>>
>> Regards
>> Sowmya
>>
>> ##############################################################################################
>> 1.
>> * checking CRAN incoming feasibility ... NOTE
>>
>> Maintainer: ?Sowmya Chandrasekaran<sowzz.17 at gmail.com>?
>>
>> New maintainer:
>>    Sowmya Chandrasekaran<sowzz.17 at gmail.com>
>> Old maintainer(s):
>>    Margarita Rebolledo <tarigarma2 at gmail.com>
>>
>> 2.
>>
>> * checking DESCRIPTION meta-information ... NOTE
>> Maintainer field differs from that derived from Authors at R
>>    Maintainer: ?Sowmya Chandrasekaran<sowzz.17 at gmail.com>?
>>    Authors at R:  ?Frederik Rehbach <frederik.re at gmail.com>?
>>
>>
>>
>> On Mon, Jan 13, 2020 at 4:19 PM <ligges at statistik.tu-dortmund.de> wrote:
>>
>>> Dear maintainer,
>>>
>>> package EventDetectR_0.3.4.tar.gz does not pass the incoming checks
>>> automatically, please see the following pre-tests:
>>> Windows: <
>>> https://win-builder.r-project.org/incoming_pretest/EventDetectR_0.3.4_20200113_160520/Windows/00check.log
>>>>
>>> Status: 2 NOTEs
>>> Debian: <
>>> https://win-builder.r-project.org/incoming_pretest/EventDetectR_0.3.4_20200113_160520/Debian/00check.log
>>>>
>>> Status: 2 NOTEs
>>>
>>> Last released version's CRAN status: OK: 13
>>> See: <
>>> https://CRAN.R-project.org/web/checks/check_results_EventDetectR.html>
>>>
>>> CRAN Web: <https://cran.r-project.org/package=EventDetectR>
>>>
>>> Please fix all problems and resubmit a fixed version via the webform.
>>> If you are not sure how to fix the problems shown, please ask for help on
>>> the R-package-devel mailing list:
>>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>> If you are fairly certain the rejection is a false positive, please
>>> reply-all to this message and explain.
>>>
>>> More details are given in the directory:
>>> <
>>> https://win-builder.r-project.org/incoming_pretest/EventDetectR_0.3.4_20200113_160520/
>>>>
>>> The files will be removed after roughly 7 days.
>>>
>>> No strong reverse dependencies to be checked.
>>>
>>> Best regards,
>>> CRAN teams' auto-check service
>>> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
>>> Check: CRAN incoming feasibility, Result: NOTE
>>>    Maintainer: 'Sowmya Chandrasekaran<sowzz.17 at gmail.com>'
>>>
>>>    New maintainer:
>>>      Sowmya Chandrasekaran<sowzz.17 at gmail.com>
>>>    Old maintainer(s):
>>>      Margarita Rebolledo <tarigarma2 at gmail.com>
>>>
>>> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
>>> Check: DESCRIPTION meta-information, Result: NOTE
>>>    Maintainer field differs from that derived from Authors at R
>>>      Maintainer: 'Sowmya Chandrasekaran<sowzz.17 at gmail.com>'
>>>      Authors at R:  'Frederik Rehbach <frederik.re at gmail.com>'
>>>
>>
> 
> 	[[alternative HTML version deleted]]
>


From c|yde @end|ng |rom duke@edu  Thu Jan 23 22:17:38 2020
From: c|yde @end|ng |rom duke@edu (Merlise Clyde, Ph.D.)
Date: Thu, 23 Jan 2020 21:17:38 +0000
Subject: [R-pkg-devel] need help addressing future timestamp error
Message-ID: <374E4485-C0AD-412D-8E34-C3E77E3EDBB3@duke.edu>

I am checking my package for Solaris via rhub and this week have encountered the following error:  "This system is set to the wrong time: please fix".  The output suggests that the time is off by 1 hour.  This occurs only on Solaris, but I am not sure if that is because that is the only platform checking timestamps and it is a problem in my setup -or- it is problem with the rhub configuration.

I have tried setting my MAC to use UTC timezone, but still encounter the error. I am also encountering this when building the package under fedora and submitting via rhub.
(source code is at https://github.com/merliseclyde/BAS)

Any suggestions ?   The error seems to stop the build, so I cannot verify if the other parts of the check (testthat output in particular) are successful, which are needed for the CRAN submission.

Thanks in advance - Merlise

Build ID:       BAS_1.5.5.tar.gz-44c32b29bc7a4127be3adfc60c81e330
Platform:       Oracle Solaris 10, x86, 32 bit, R-patched (experimental)
Submitted:      16 minutes 55 seconds ago
Build time:     16 minutes 54.1 seconds
ERRORS:


* checking for future file timestamps ... ERROR
This system is set to the wrong time: please correct
   system: 2020-01-23 21:14 (UTC)
  correct: 2020-01-23 20:14 (UTC)



Merlise A Clyde
Professor Department of Statistical Science
Duke University
http://stat.duke.edu/~clyde

clyde at duke.edu<mailto:clyde at duke.edu>
919 681 8440






	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Thu Jan 23 22:21:54 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Thu, 23 Jan 2020 21:21:54 +0000
Subject: [R-pkg-devel] need help addressing future timestamp error
In-Reply-To: <374E4485-C0AD-412D-8E34-C3E77E3EDBB3@duke.edu>
References: <374E4485-C0AD-412D-8E34-C3E77E3EDBB3@duke.edu>
Message-ID: <CABtg=Km=p46ZLifdLRDr=ZgR7pgBzh1g4tztgudwO=Ree-anSA@mail.gmail.com>

Yes, the time of R-hub's Solaris machine is probably off....

Gabor

On Thu, Jan 23, 2020 at 9:17 PM Merlise Clyde, Ph.D. <clyde at duke.edu> wrote:
>
> I am checking my package for Solaris via rhub and this week have encountered the following error:  "This system is set to the wrong time: please fix".  The output suggests that the time is off by 1 hour.  This occurs only on Solaris, but I am not sure if that is because that is the only platform checking timestamps and it is a problem in my setup -or- it is problem with the rhub configuration.
>
> I have tried setting my MAC to use UTC timezone, but still encounter the error. I am also encountering this when building the package under fedora and submitting via rhub.
> (source code is at https://github.com/merliseclyde/BAS)
>
> Any suggestions ?   The error seems to stop the build, so I cannot verify if the other parts of the check (testthat output in particular) are successful, which are needed for the CRAN submission.
>
> Thanks in advance - Merlise
>
> Build ID:       BAS_1.5.5.tar.gz-44c32b29bc7a4127be3adfc60c81e330
> Platform:       Oracle Solaris 10, x86, 32 bit, R-patched (experimental)
> Submitted:      16 minutes 55 seconds ago
> Build time:     16 minutes 54.1 seconds
> ERRORS:
>
>
> * checking for future file timestamps ... ERROR
> This system is set to the wrong time: please correct
>    system: 2020-01-23 21:14 (UTC)
>   correct: 2020-01-23 20:14 (UTC)
>
>
>
> Merlise A Clyde
> Professor Department of Statistical Science
> Duke University
> http://stat.duke.edu/~clyde
>
> clyde at duke.edu<mailto:clyde at duke.edu>
> 919 681 8440
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Fri Jan 24 00:50:29 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Thu, 23 Jan 2020 17:50:29 -0600
Subject: [R-pkg-devel] CRAN rules re. web scraping?
In-Reply-To: <CALEXWq3rdS=asjxJ=xLqmngQZp+SFSJJnpKGLmwrGcWYi18-gg@mail.gmail.com>
References: <2afee645-3e1b-253e-226e-e896237108bd@stats.ox.ac.uk>
 <d637f2f5-6986-decb-699c-b7ff5b3690c5@effectivedefense.org>
 <CALEXWq3rdS=asjxJ=xLqmngQZp+SFSJJnpKGLmwrGcWYi18-gg@mail.gmail.com>
Message-ID: <881dc081-6612-b18e-31d2-a77da063c8fd@effectivedefense.org>

 ????? Thanks very much to I?aki Ucar, Adam H Sparks, and Roy 
Mendelssohn for their replies that helped me understand what I needed to 
do to fix problems identified in the CRAN Checks.? I believe that those 
problems are not fixed in the development version of Ecfun available at 
"https://github.com/sbgraves237/Ecfun".? The package still needs more 
work, but I will make Prof. Ripley's Feb. 4 deadline.


 ????? Thanks again,
 ????? Spencer Graves


On 2020-01-23 01:55, I?aki Ucar wrote:
> On Thu, 23 Jan 2020 at 02:49, Spencer Graves
> <spencer.graves at effectivedefense.org> wrote:
>> Hello, All:
>>
>>
>> GOOD NEWS AND BAD NEWS:
>>
>>
>>         * First the good news:  I heard from Brian Ripley;  see below.
>> His web site says, "He retired in August 2014 on grounds of ill health."
>> (http://www.stats.ox.ac.uk/~ripley/)  I was pleased to see that he seems
>> to be well enough to send me the email below.
>>
>>
>>         * BAD NEWS:  My Ecfun package is violating current CRAN rules
>> regarding "not writing anywhere in the file space".  (See below.)
>>
>>
>> QUESTION:
>>
>>
>>         How do you suggest I respond to this?
>>
>>
>>         It's hard for me to fix, because I cannot replicate the error and
>> I don't understand the rules Prof. Ripley is trying to enforce. The
>> "CRAN Package Check Results for" this package show an error on 1
>> platform (r-devel-linux-x86_64-fedora-gcc), NOTEs on 3 platforms
>> (Fedora-clang and Debian), and "OK" on 9 others.  I can program selected
>> tests not to run on CRAN, e.g., with (!fda::CRAN()).
>>
>>
>>         However, I suspect I should be able to do better than that.
>>
>>
>>         Suggestions?
> The message from Prof. Ripley is crystal-clear, and exposes two issues
> (Internet access, writing files) that have been discussed many times
> in this list. A quick scan of the CRAN policy [1] yields:
>
> - Packages which use Internet resources should fail gracefully with an
> informative message if the resource is not available (and not give a
> check warning nor error).
>
> - Packages should not write in the user?s home filespace (including
> clipboards), nor anywhere else on the file system apart from the R
> session?s temporary directory.
>
> [1] https://cran.r-project.org/web/packages/policies.html
>
> I?aki
>
>>         Thanks,
>>         Spencer Graves
>>
>>
>> p.s.  The development version of this package is available at
>> "https://github.com/sbgraves237/Ecfun".
>>
>>
>> https://cloud.r-project.org/web/checks/check_results_Ecfun.html
>>
>>
>> -------- Forwarded Message --------
>> Subject:        CRAN package Ecfun
>> Date:   Tue, 21 Jan 2020 21:26:02 +0000
>> From:   Prof Brian Ripley <ripley at stats.ox.ac.uk>
>> Reply-To:       CRAN <CRAN at r-project.org>
>> To:     Spencer Graves <spencer.graves at effectivedefense.org>
>> CC:     CRAN <CRAN at r-project.org>
>>
>>
>>
>> This has been intermittently failing its checks for a week: different
>> check runs failed (in the 24h prior to) the 14th, 15th, 17th and today.
>> The current failure is
>>
>> Check: examples
>> Result: ERROR
>> Running examples in ?Ecfun-Ex.R? failed
>> The error most likely occurred in:
>>
>>   > ### Name: read.testURLs
>>   > ### Title: Read a file produced by testURLs
>>   > ### Aliases: read.testURLs
>>   > ### Keywords: IO
>>   >
>>   > ### ** Examples
>>   >
>>   > # Test only 2 web sites, not the default 4,
>>   > # and test only twice, not the default 10 times:
>>   > tst <- testURLs(c(
>> + PVI="http://en.wikipedia.org/wiki/Cook_Partisan_Voting_Index",
>> + house="http://house.gov/representatives"),
>> + n=2, maxFail=2)
>> 1
>> 1579634784, PVI, TRUE 0.828
>> 1579634785, house, FALSE 0.051
>> 1579634785, house, FALSE 0.048
>> 2
>> 1579634785, PVI, TRUE 0.043
>> 1579634785, house, FALSE 0.11
>> 1579634785, house, FALSE 0.035
>>   >
>>   > # The above should have created a file 'testURLresults.csv'
>>   > # in the working directory. Read it.
>>   >
>>   > dat <- read.testURLs()
>> Error in read.table(file = file, header = header, sep = sep, quote =
>> quote, :
>> more columns than column names
>> Calls: read.testURLs -> read.csv -> read.table
>>
>> That does not conform to the policy on Internet access, not least as no
>> attempt is made to check if the file was created, let alone that it has
>> the expected layout. Nor does it conform to the policy on not writing
>> anywhere in the file space (and that shows on its CRAN results page too).
>>
>> Please correct ASAP and before Feb 4 to safely retain the package on CRAN.
>>
>> --
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Emeritus Professor of Applied Statistics, University of Oxford
>>
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From |uc@@ @end|ng |rom |uc@@ne||@com  Sun Jan 26 22:40:56 2020
From: |uc@@ @end|ng |rom |uc@@ne||@com (Lucas Nell)
Date: Sun, 26 Jan 2020 15:40:56 -0600
Subject: [R-pkg-devel] CRAN cannot find libraries on Windows
Message-ID: <CAKekK4s27MLEHT7gK8PNj-gQnOnuwJ1oA5S21U4UKnz2rnpZug@mail.gmail.com>

Hello all,

My package (source here <https://github.com/lucasnell/jackalope>) no longer
compiles on a standard Windows installation (see truncated install log
below). The problem seems to be the libraries required by the Bioconductor
package Rhtslib
<https://bioconductor.org/packages/release/bioc/html/Rhtslib.html>. My
package compiles fine when using GCC 8 via Rtools 40 (and when built using
"r-devel-windows-ix86+x86_64-gcc8" on CRAN), but when trying to submit a
new version to CRAN, it fails its automatic tests without working using GCC
4 on Windows. Does anyone have ideas on how to fix this? Thank you!

Cheers,
Lucas



* installing *source* package 'jackalope' ...
** using staged installation
** libs

*** arch - i386
d:/Compiler/gcc-4.9.3/mingw_32/bin/g++  -std=gnu++11
-I"D:/RCompile/CRANpkg/lib/4.0/zlibbioc/include"
-I"D:/RCompile/recent/R/include" -DNDEBUG -I../inst/include/
-D_FILE_OFFSET_BITS=64 -I'D:/RCompile/CRANpkg/lib/4.0/Rcpp/include'
-I'D:/RCompile/CRANincoming/R-devel/lib/RcppArmadillo/include'
-I'D:/RCompile/CRANpkg/lib/4.0/RcppProgress/include'
-I'D:/RCompile/CRANpkg/lib/4.0/Rhtslib/include'
-I'D:/RCompile/CRANpkg/lib/4.0/zlibbioc/include'
-I"d:/Compiler/gcc-4.9.3/local330/include"     -O2 -Wall  -mtune=core2 -c
RcppExports.cpp -o RcppExports.o

[...]

d:/Compiler/gcc-4.9.3/mingw_32/bin/g++ -shared -s -static-libgcc -o
jackalope.dll tmp.def RcppExports.o alter_reference.o create_sequences.o
hts_illumina.o hts_pacbio.o io_fasta.o io_ms.o io_vcf.o mutator.o
mutator_indels.o mutator_subs.o phylogenomics.o ref_var_access.o
sub_models.o util.o var_classes.o vars_ssites.o -lws2_32
-LD:/RCompile/recent/R/bin/i386 -lRlapack -LD:/RCompile/recent/R/bin/i386
-lRblas -lgfortran -lm -lquadmath
D:/RCompile/CRANpkg/lib/4.0/Rhtslib/usrlib/i386/libhts.a
-LC:/extsoft/lib/i386 -lcurl -lrtmp -lssl -lssh2 -lcrypto -lgdi32 -lz
-lws2_32 -lwldap32 -lwinmm -lidn
-LD:/RCompile/CRANpkg/lib/4.0/zlibbioc/libs/i386 -lzlib1bioc
-Ld:/Compiler/gcc-4.9.3/local330/lib/i386
-Ld:/Compiler/gcc-4.9.3/local330/lib -LD:/RCompile/recent/R/bin/i386 -lR
D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
cannot find -lcurl
D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
cannot find -lrtmp
D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
cannot find -lssl
D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
cannot find -lssh2
D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
cannot find -lcrypto
D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
cannot find -lidn
collect2.exe: error: ld returned 1 exit status
no DLL was created
ERROR: compilation failed for package 'jackalope'
* removing 'd:/RCompile/CRANincoming/R-devel/lib/jackalope'

	[[alternative HTML version deleted]]


From @d@mh@p@rk@ @end|ng |rom gm@||@com  Thu Jan 23 04:18:50 2020
From: @d@mh@p@rk@ @end|ng |rom gm@||@com (Adam H Sparks)
Date: Thu, 23 Jan 2020 13:18:50 +1000
Subject: [R-pkg-devel] CRAN rules re. web scraping?
In-Reply-To: <8BDA1F9E-FDFE-4D46-BA09-4D960E1BEF68@noaa.gov>
References: <2afee645-3e1b-253e-226e-e896237108bd@stats.ox.ac.uk>
 <d637f2f5-6986-decb-699c-b7ff5b3690c5@effectivedefense.org>
 <8BDA1F9E-FDFE-4D46-BA09-4D960E1BEF68@noaa.gov>
Message-ID: <CAJmQPwGMsB0e_KVuh+uLc6tfmJX2vYk75omBu-YXDeXTu+cFaQ-8070@mail.gmail.com>

Hi Spencer,
To add to what Roy has already provided. If you have tests that require
Internet access, you should be using skip_on_cran() for those tests and in
your examples using the \donttest{} tags to prevent errors on CRAN servers
when Internet is not available or the server is not responding or the
resource is unavailable.

Using tryCatch() will be helpful for the end-user experience, but will not
completely fix the issue that is being raised here.


On Thu, 23 Jan 2020 at 11:59, Roy Mendelssohn - NOAA Federal via
R-package-devel <r-package-devel at r-project.org> wrote:

> Hi Spencer:
>
> I think that message means what it says,  and I read it as pretty
> straightforward and business like.  The issue is not web scraping.  There
> are two errors here:
>
> 1.  You can not write to the user's space without first explicitly asking
> permission of the user.   The suggested policy is to write to a temp
> directory,  R has tempdir() and related commands for how to do this.
>
> 2.  When accessing something over the internet,  failure of the access
> must be checked for and the program exiting gracefully.  The second error
> appears to be that at times on the builds the .csv file is not downloaded,
> but there is no check,  just an error is thrown.  There are a number of
> ways to catch such errors,  such as "try...catch"  which will solve this
> problem
>
> HTH,
>
> -Roy
>
>
> > On Jan 22, 2020, at 5:48 PM, Spencer Graves <
> spencer.graves at effectivedefense.org> wrote:
> >
> > Hello, All:
> >
> >
> > GOOD NEWS AND BAD NEWS:
> >
> >
> >       * First the good news:  I heard from Brian Ripley;  see below.
> > His web site says, "He retired in August 2014 on grounds of ill health."
> > (http://www.stats.ox.ac.uk/~ripley/)  I was pleased to see that he
> seems
> > to be well enough to send me the email below.
> >
> >
> >       * BAD NEWS:  My Ecfun package is violating current CRAN rules
> > regarding "not writing anywhere in the file space".  (See below.)
> >
> >
> > QUESTION:
> >
> >
> >       How do you suggest I respond to this?
> >
> >
> >       It's hard for me to fix, because I cannot replicate the error and
> > I don't understand the rules Prof. Ripley is trying to enforce. The
> > "CRAN Package Check Results for" this package show an error on 1
> > platform (r-devel-linux-x86_64-fedora-gcc), NOTEs on 3 platforms
> > (Fedora-clang and Debian), and "OK" on 9 others.  I can program selected
> > tests not to run on CRAN, e.g., with (!fda::CRAN()).
> >
> >
> >       However, I suspect I should be able to do better than that.
> >
> >
> >       Suggestions?
> >
> >
> >       Thanks,
> >       Spencer Graves
> >
> >
> > p.s.  The development version of this package is available at
> > "https://github.com/sbgraves237/Ecfun".
> >
> >
> > https://cloud.r-project.org/web/checks/check_results_Ecfun.html
> >
> >
> > -------- Forwarded Message --------
> > Subject:      CRAN package Ecfun
> > Date:         Tue, 21 Jan 2020 21:26:02 +0000
> > From:         Prof Brian Ripley <ripley at stats.ox.ac.uk>
> > Reply-To:     CRAN <CRAN at r-project.org>
> > To:   Spencer Graves <spencer.graves at effectivedefense.org>
> > CC:   CRAN <CRAN at r-project.org>
> >
> >
> >
> > This has been intermittently failing its checks for a week: different
> > check runs failed (in the 24h prior to) the 14th, 15th, 17th and today.
> > The current failure is
> >
> > Check: examples
> > Result: ERROR
> > Running examples in ?Ecfun-Ex.R? failed
> > The error most likely occurred in:
> >
> >> ### Name: read.testURLs
> >> ### Title: Read a file produced by testURLs
> >> ### Aliases: read.testURLs
> >> ### Keywords: IO
> >>
> >> ### ** Examples
> >>
> >> # Test only 2 web sites, not the default 4,
> >> # and test only twice, not the default 10 times:
> >> tst <- testURLs(c(
> > + PVI="http://en.wikipedia.org/wiki/Cook_Partisan_Voting_Index",
> > + house="http://house.gov/representatives"),
> > + n=2, maxFail=2)
> > 1
> > 1579634784, PVI, TRUE 0.828
> > 1579634785, house, FALSE 0.051
> > 1579634785, house, FALSE 0.048
> > 2
> > 1579634785, PVI, TRUE 0.043
> > 1579634785, house, FALSE 0.11
> > 1579634785, house, FALSE 0.035
> >>
> >> # The above should have created a file 'testURLresults.csv'
> >> # in the working directory. Read it.
> >>
> >> dat <- read.testURLs()
> > Error in read.table(file = file, header = header, sep = sep, quote =
> > quote, :
> > more columns than column names
> > Calls: read.testURLs -> read.csv -> read.table
> >
> > That does not conform to the policy on Internet access, not least as no
> > attempt is made to check if the file was created, let alone that it has
> > the expected layout. Nor does it conform to the policy on not writing
> > anywhere in the file space (and that shows on its CRAN results page too).
> >
> > Please correct ASAP and before Feb 4 to safely retain the package on
> CRAN.
> >
> > --
> > Brian D. Ripley,                  ripley at stats.ox.ac.uk
> > Emeritus Professor of Applied Statistics, University of Oxford
> >
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> **********************
> "The contents of this message do not reflect any position of the U.S.
> Government or NOAA."
> **********************
> Roy Mendelssohn
> Supervisory Operations Research Analyst
> NOAA/NMFS
> Environmental Research Division
> Southwest Fisheries Science Center
> ***Note new street address***
> 110 McAllister Way
> Santa Cruz, CA 95060
> Phone: (831)-420-3666
> Fax: (831) 420-3980
> e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/
>
> "Old age and treachery will overcome youth and skill."
> "From those who have been given much, much will be expected"
> "the arc of the moral universe is long, but it bends toward justice" -MLK
> Jr.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


-- 
Dr Adam H. Sparks
http://adamhsparks.netlify.com/
Associate Professor of Field Crops Pathology   |   Centre for Crop Health
|  Office C313

Phone (+61) 07 46311948  |  Mobile 0415 489 422 | Twitter @adamhsparks
<https://twitter.com/adamhsparks>

Institute for Life Sciences and the Environment |  Research and Innovation
Division
University of Southern Queensland | Toowoomba, Queensland | 4350 | Australia

	[[alternative HTML version deleted]]


From dom|n|c@comto|@ @end|ng |rom gm@||@com  Mon Jan 27 17:22:01 2020
From: dom|n|c@comto|@ @end|ng |rom gm@||@com (Dominic Comtois)
Date: Mon, 27 Jan 2020 11:22:01 -0500
Subject: [R-pkg-devel] Note about "marked UTF-8 strings" when checking with
 R-devel
Message-ID: <CAEfsz7q=Gg6DkbfjCMEqN7UKr1iXY9B3u9jV=sNyt8eT+-8_7A@mail.gmail.com>

Checking my summarytools package before submitting an updated version to
CRAN, I get this note when using rhub::check_with_rdevel() :

 checking contents of ?data? directory (1.4s)
 checking data for non-ASCII characters (1.6s)
     *Note: found 78 marked UTF-8 strings*

The package has been on CRAN for years now, and it's the first time I get
this note. Checking with R 3.6.2, I still get:

  checking data for non-ASCII characters ... OK

The package contains 4 sample data frames, two of which are in French with
accentuated characters on a couple of variables. I could easily "asciify"
them (removing accents), but I wonder if there is a way around it, and if
the note is an absolute no-go for CRAN. Thoughts?

The source code for my package can be found on GitHub:
github.com/dcomtois/summarytools.

And here is one of the culprits:

> unique(tabagisme$maladie)
 [1] NA                     "Neurologique"         "Ou?e"
"Musculo-squelettique"
 [5] "Vue"                  "Cardiaque"            "Cancer"
"Hypertension"
 [9] "Diab?te"              "Autre"                "Pulmonaire"
"Hypotension"
[13] "Cholest?rol"          "Syst?me digestif"

Thanks in advance

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Jan 27 21:17:27 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 27 Jan 2020 21:17:27 +0100
Subject: [R-pkg-devel] 
 Note about "marked UTF-8 strings" when checking with R-devel
In-Reply-To: <CAEfsz7q=Gg6DkbfjCMEqN7UKr1iXY9B3u9jV=sNyt8eT+-8_7A@mail.gmail.com>
References: <CAEfsz7q=Gg6DkbfjCMEqN7UKr1iXY9B3u9jV=sNyt8eT+-8_7A@mail.gmail.com>
Message-ID: <fcb2570b-e6eb-9c75-1ed9-2a9ef9d4e0dc@statistik.tu-dortmund.de>



On 27.01.2020 17:22, Dominic Comtois wrote:
> Checking my summarytools package before submitting an updated version to
> CRAN, I get this note when using rhub::check_with_rdevel() :
> 
>   checking contents of ?data? directory (1.4s)
>   checking data for non-ASCII characters (1.6s)
>       *Note: found 78 marked UTF-8 strings*

Fine for CRAN.

Best,
Uwe Ligges



> The package has been on CRAN for years now, and it's the first time I get
> this note. Checking with R 3.6.2, I still get:
> 
>    checking data for non-ASCII characters ... OK
> 
> The package contains 4 sample data frames, two of which are in French with
> accentuated characters on a couple of variables. I could easily "asciify"
> them (removing accents), but I wonder if there is a way around it, and if
> the note is an absolute no-go for CRAN. Thoughts?
> 
> The source code for my package can be found on GitHub:
> github.com/dcomtois/summarytools.
> 
> And here is one of the culprits:
> 
>> unique(tabagisme$maladie)
>   [1] NA                     "Neurologique"         "Ou?e"
> "Musculo-squelettique"
>   [5] "Vue"                  "Cardiaque"            "Cancer"
> "Hypertension"
>   [9] "Diab?te"              "Autre"                "Pulmonaire"
> "Hypotension"
> [13] "Cholest?rol"          "Syst?me digestif"
> 
> Thanks in advance
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Jan 27 21:32:04 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 27 Jan 2020 21:32:04 +0100
Subject: [R-pkg-devel] CRAN cannot find libraries on Windows
In-Reply-To: <CAKekK4s27MLEHT7gK8PNj-gQnOnuwJ1oA5S21U4UKnz2rnpZug@mail.gmail.com>
References: <CAKekK4s27MLEHT7gK8PNj-gQnOnuwJ1oA5S21U4UKnz2rnpZug@mail.gmail.com>
Message-ID: <b4b4960a-fe78-b238-e36b-df477a6fcb2c@statistik.tu-dortmund.de>

Thanks, one suspicious part from the log below is

-LC:/extsoft/lib/i386

which is clearly not in any variable we define on CRAN.

Looking close shows that
 > Rhtslib::pkgconfig("PKG_LIBS")

gives

'D:/RCompile/CRANpkg/lib/4.0/Rhtslib/usrlib/x64/libhts.a' 
-LC:/extsoft/lib/x64 -lcurl -lrtmp -lssl -lssh2 -lcrypto -lgdi32 -lz 
-lws2_32 -lwldap32 -lwinmm

and that is wrong as -LC:/extsoft/lib/i386 or C:/extsoft/lib/x64 are not 
directories where the software is installed on winbuilder.

Pls use the directories the other packages are using, too.

Best,
Uwe Ligges











On 26.01.2020 22:40, Lucas Nell wrote:
> Hello all,
> 
> My package (source here <https://github.com/lucasnell/jackalope>) no longer
> compiles on a standard Windows installation (see truncated install log
> below). The problem seems to be the libraries required by the Bioconductor
> package Rhtslib
> <https://bioconductor.org/packages/release/bioc/html/Rhtslib.html>. My
> package compiles fine when using GCC 8 via Rtools 40 (and when built using
> "r-devel-windows-ix86+x86_64-gcc8" on CRAN), but when trying to submit a
> new version to CRAN, it fails its automatic tests without working using GCC
> 4 on Windows. Does anyone have ideas on how to fix this? Thank you!
> 
> Cheers,
> Lucas
> 
> 
> 
> * installing *source* package 'jackalope' ...
> ** using staged installation
> ** libs
> 
> *** arch - i386
> d:/Compiler/gcc-4.9.3/mingw_32/bin/g++  -std=gnu++11
> -I"D:/RCompile/CRANpkg/lib/4.0/zlibbioc/include"
> -I"D:/RCompile/recent/R/include" -DNDEBUG -I../inst/include/
> -D_FILE_OFFSET_BITS=64 -I'D:/RCompile/CRANpkg/lib/4.0/Rcpp/include'
> -I'D:/RCompile/CRANincoming/R-devel/lib/RcppArmadillo/include'
> -I'D:/RCompile/CRANpkg/lib/4.0/RcppProgress/include'
> -I'D:/RCompile/CRANpkg/lib/4.0/Rhtslib/include'
> -I'D:/RCompile/CRANpkg/lib/4.0/zlibbioc/include'
> -I"d:/Compiler/gcc-4.9.3/local330/include"     -O2 -Wall  -mtune=core2 -c
> RcppExports.cpp -o RcppExports.o
> 
> [...]
> 
> d:/Compiler/gcc-4.9.3/mingw_32/bin/g++ -shared -s -static-libgcc -o
> jackalope.dll tmp.def RcppExports.o alter_reference.o create_sequences.o
> hts_illumina.o hts_pacbio.o io_fasta.o io_ms.o io_vcf.o mutator.o
> mutator_indels.o mutator_subs.o phylogenomics.o ref_var_access.o
> sub_models.o util.o var_classes.o vars_ssites.o -lws2_32
> -LD:/RCompile/recent/R/bin/i386 -lRlapack -LD:/RCompile/recent/R/bin/i386
> -lRblas -lgfortran -lm -lquadmath
> D:/RCompile/CRANpkg/lib/4.0/Rhtslib/usrlib/i386/libhts.a
> -LC:/extsoft/lib/i386 -lcurl -lrtmp -lssl -lssh2 -lcrypto -lgdi32 -lz
> -lws2_32 -lwldap32 -lwinmm -lidn
> -LD:/RCompile/CRANpkg/lib/4.0/zlibbioc/libs/i386 -lzlib1bioc
> -Ld:/Compiler/gcc-4.9.3/local330/lib/i386
> -Ld:/Compiler/gcc-4.9.3/local330/lib -LD:/RCompile/recent/R/bin/i386 -lR
> D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
> cannot find -lcurl
> D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
> cannot find -lrtmp
> D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
> cannot find -lssl
> D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
> cannot find -lssh2
> D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
> cannot find -lcrypto
> D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
> cannot find -lidn
> collect2.exe: error: ld returned 1 exit status
> no DLL was created
> ERROR: compilation failed for package 'jackalope'
> * removing 'd:/RCompile/CRANincoming/R-devel/lib/jackalope'
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From dom|n|c@comto|@ @end|ng |rom gm@||@com  Mon Jan 27 22:09:08 2020
From: dom|n|c@comto|@ @end|ng |rom gm@||@com (Dominic Comtois)
Date: Mon, 27 Jan 2020 16:09:08 -0500
Subject: [R-pkg-devel] 
 Note about "marked UTF-8 strings" when checking with R-devel
In-Reply-To: <fcb2570b-e6eb-9c75-1ed9-2a9ef9d4e0dc@statistik.tu-dortmund.de>
References: <CAEfsz7q=Gg6DkbfjCMEqN7UKr1iXY9B3u9jV=sNyt8eT+-8_7A@mail.gmail.com>
 <fcb2570b-e6eb-9c75-1ed9-2a9ef9d4e0dc@statistik.tu-dortmund.de>
Message-ID: <CAEfsz7pE7qatvnw9=UhwpY6HpaZRWfmbp-OFY5U63jh1TsBB+A@mail.gmail.com>

Excellent!

Thanks for the quick response and best wishes,

Dominic


On Mon, 27 Jan 2020 at 15:17, Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

>
>
> On 27.01.2020 17:22, Dominic Comtois wrote:
> > Checking my summarytools package before submitting an updated version to
> > CRAN, I get this note when using rhub::check_with_rdevel() :
> >
> >   checking contents of ?data? directory (1.4s)
> >   checking data for non-ASCII characters (1.6s)
> >       *Note: found 78 marked UTF-8 strings*
>
> Fine for CRAN.
>
> Best,
> Uwe Ligges
>
>
>
> > The package has been on CRAN for years now, and it's the first time I get
> > this note. Checking with R 3.6.2, I still get:
> >
> >    checking data for non-ASCII characters ... OK
> >
> > The package contains 4 sample data frames, two of which are in French
> with
> > accentuated characters on a couple of variables. I could easily "asciify"
> > them (removing accents), but I wonder if there is a way around it, and if
> > the note is an absolute no-go for CRAN. Thoughts?
> >
> > The source code for my package can be found on GitHub:
> > github.com/dcomtois/summarytools.
> >
> > And here is one of the culprits:
> >
> >> unique(tabagisme$maladie)
> >   [1] NA                     "Neurologique"         "Ou?e"
> > "Musculo-squelettique"
> >   [5] "Vue"                  "Cardiaque"            "Cancer"
> > "Hypertension"
> >   [9] "Diab?te"              "Autre"                "Pulmonaire"
> > "Hypotension"
> > [13] "Cholest?rol"          "Syst?me digestif"
> >
> > Thanks in advance
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>

	[[alternative HTML version deleted]]


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Mon Jan 27 23:48:47 2020
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Mon, 27 Jan 2020 22:48:47 +0000
Subject: [R-pkg-devel] CRAN cannot find libraries on Windows
In-Reply-To: <b4b4960a-fe78-b238-e36b-df477a6fcb2c@statistik.tu-dortmund.de>
References: <CAKekK4s27MLEHT7gK8PNj-gQnOnuwJ1oA5S21U4UKnz2rnpZug@mail.gmail.com>
 <b4b4960a-fe78-b238-e36b-df477a6fcb2c@statistik.tu-dortmund.de>
Message-ID: <BYAPR04MB5526A452B02906E4C6785AC8F90B0@BYAPR04MB5526.namprd04.prod.outlook.com>

what are the correct paths?

?On 1/27/20, 3:32 PM, "R-package-devel on behalf of Uwe Ligges" <r-package-devel-bounces at r-project.org on behalf of ligges at statistik.tu-dortmund.de> wrote:

    Thanks, one suspicious part from the log below is
    
    -LC:/extsoft/lib/i386
    
    which is clearly not in any variable we define on CRAN.
    
    Looking close shows that
     > Rhtslib::pkgconfig("PKG_LIBS")
    
    gives
    
    'D:/RCompile/CRANpkg/lib/4.0/Rhtslib/usrlib/x64/libhts.a' 
    -LC:/extsoft/lib/x64 -lcurl -lrtmp -lssl -lssh2 -lcrypto -lgdi32 -lz 
    -lws2_32 -lwldap32 -lwinmm
    
    and that is wrong as -LC:/extsoft/lib/i386 or C:/extsoft/lib/x64 are not 
    directories where the software is installed on winbuilder.
    
    Pls use the directories the other packages are using, too.
    
    Best,
    Uwe Ligges
    
    
    
    
    
    
    
    
    
    
    
    On 26.01.2020 22:40, Lucas Nell wrote:
    > Hello all,
    > 
    > My package (source here <https://github.com/lucasnell/jackalope>) no longer
    > compiles on a standard Windows installation (see truncated install log
    > below). The problem seems to be the libraries required by the Bioconductor
    > package Rhtslib
    > <https://bioconductor.org/packages/release/bioc/html/Rhtslib.html>. My
    > package compiles fine when using GCC 8 via Rtools 40 (and when built using
    > "r-devel-windows-ix86+x86_64-gcc8" on CRAN), but when trying to submit a
    > new version to CRAN, it fails its automatic tests without working using GCC
    > 4 on Windows. Does anyone have ideas on how to fix this? Thank you!
    > 
    > Cheers,
    > Lucas
    > 
    > 
    > 
    > * installing *source* package 'jackalope' ...
    > ** using staged installation
    > ** libs
    > 
    > *** arch - i386
    > d:/Compiler/gcc-4.9.3/mingw_32/bin/g++  -std=gnu++11
    > -I"D:/RCompile/CRANpkg/lib/4.0/zlibbioc/include"
    > -I"D:/RCompile/recent/R/include" -DNDEBUG -I../inst/include/
    > -D_FILE_OFFSET_BITS=64 -I'D:/RCompile/CRANpkg/lib/4.0/Rcpp/include'
    > -I'D:/RCompile/CRANincoming/R-devel/lib/RcppArmadillo/include'
    > -I'D:/RCompile/CRANpkg/lib/4.0/RcppProgress/include'
    > -I'D:/RCompile/CRANpkg/lib/4.0/Rhtslib/include'
    > -I'D:/RCompile/CRANpkg/lib/4.0/zlibbioc/include'
    > -I"d:/Compiler/gcc-4.9.3/local330/include"     -O2 -Wall  -mtune=core2 -c
    > RcppExports.cpp -o RcppExports.o
    > 
    > [...]
    > 
    > d:/Compiler/gcc-4.9.3/mingw_32/bin/g++ -shared -s -static-libgcc -o
    > jackalope.dll tmp.def RcppExports.o alter_reference.o create_sequences.o
    > hts_illumina.o hts_pacbio.o io_fasta.o io_ms.o io_vcf.o mutator.o
    > mutator_indels.o mutator_subs.o phylogenomics.o ref_var_access.o
    > sub_models.o util.o var_classes.o vars_ssites.o -lws2_32
    > -LD:/RCompile/recent/R/bin/i386 -lRlapack -LD:/RCompile/recent/R/bin/i386
    > -lRblas -lgfortran -lm -lquadmath
    > D:/RCompile/CRANpkg/lib/4.0/Rhtslib/usrlib/i386/libhts.a
    > -LC:/extsoft/lib/i386 -lcurl -lrtmp -lssl -lssh2 -lcrypto -lgdi32 -lz
    > -lws2_32 -lwldap32 -lwinmm -lidn
    > -LD:/RCompile/CRANpkg/lib/4.0/zlibbioc/libs/i386 -lzlib1bioc
    > -Ld:/Compiler/gcc-4.9.3/local330/lib/i386
    > -Ld:/Compiler/gcc-4.9.3/local330/lib -LD:/RCompile/recent/R/bin/i386 -lR
    > D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
    > cannot find -lcurl
    > D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
    > cannot find -lrtmp
    > D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
    > cannot find -lssl
    > D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
    > cannot find -lssh2
    > D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
    > cannot find -lcrypto
    > D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
    > cannot find -lidn
    > collect2.exe: error: ld returned 1 exit status
    > no DLL was created
    > ERROR: compilation failed for package 'jackalope'
    > * removing 'd:/RCompile/CRANincoming/R-devel/lib/jackalope'
    > 
    > 	[[alternative HTML version deleted]]
    > 
    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel
    >
    
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel
    

From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jan 28 00:15:22 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 27 Jan 2020 18:15:22 -0500
Subject: [R-pkg-devel] CRAN cannot find libraries on Windows
In-Reply-To: <BYAPR04MB5526A452B02906E4C6785AC8F90B0@BYAPR04MB5526.namprd04.prod.outlook.com>
References: <CAKekK4s27MLEHT7gK8PNj-gQnOnuwJ1oA5S21U4UKnz2rnpZug@mail.gmail.com>
 <b4b4960a-fe78-b238-e36b-df477a6fcb2c@statistik.tu-dortmund.de>
 <BYAPR04MB5526A452B02906E4C6785AC8F90B0@BYAPR04MB5526.namprd04.prod.outlook.com>
Message-ID: <53492baf-c8a1-7882-adcf-8ae28dc57731@gmail.com>

On 27/01/2020 5:48 p.m., Martin Morgan wrote:
> what are the correct paths?

The src/gnuwin32/MkRules.dist file gives the patterns.   They are based 
on environment variables LOCAL_SOFT, R_HOME, etc.  Most people should 
modify that file to MkRules.local when building R; the variables defined 
there get re-used when building packages.  I forget what gets baked into 
the Windows binary distributions.

Duncan Murdoch

> 
> ?On 1/27/20, 3:32 PM, "R-package-devel on behalf of Uwe Ligges" <r-package-devel-bounces at r-project.org on behalf of ligges at statistik.tu-dortmund.de> wrote:
> 
>      Thanks, one suspicious part from the log below is
>      
>      -LC:/extsoft/lib/i386
>      
>      which is clearly not in any variable we define on CRAN.
>      
>      Looking close shows that
>       > Rhtslib::pkgconfig("PKG_LIBS")
>      
>      gives
>      
>      'D:/RCompile/CRANpkg/lib/4.0/Rhtslib/usrlib/x64/libhts.a'
>      -LC:/extsoft/lib/x64 -lcurl -lrtmp -lssl -lssh2 -lcrypto -lgdi32 -lz
>      -lws2_32 -lwldap32 -lwinmm
>      
>      and that is wrong as -LC:/extsoft/lib/i386 or C:/extsoft/lib/x64 are not
>      directories where the software is installed on winbuilder.
>      
>      Pls use the directories the other packages are using, too.
>      
>      Best,
>      Uwe Ligges
>      
>      
>      
>      
>      
>      
>      
>      
>      
>      
>      
>      On 26.01.2020 22:40, Lucas Nell wrote:
>      > Hello all,
>      >
>      > My package (source here <https://github.com/lucasnell/jackalope>) no longer
>      > compiles on a standard Windows installation (see truncated install log
>      > below). The problem seems to be the libraries required by the Bioconductor
>      > package Rhtslib
>      > <https://bioconductor.org/packages/release/bioc/html/Rhtslib.html>. My
>      > package compiles fine when using GCC 8 via Rtools 40 (and when built using
>      > "r-devel-windows-ix86+x86_64-gcc8" on CRAN), but when trying to submit a
>      > new version to CRAN, it fails its automatic tests without working using GCC
>      > 4 on Windows. Does anyone have ideas on how to fix this? Thank you!
>      >
>      > Cheers,
>      > Lucas
>      >
>      >
>      >
>      > * installing *source* package 'jackalope' ...
>      > ** using staged installation
>      > ** libs
>      >
>      > *** arch - i386
>      > d:/Compiler/gcc-4.9.3/mingw_32/bin/g++  -std=gnu++11
>      > -I"D:/RCompile/CRANpkg/lib/4.0/zlibbioc/include"
>      > -I"D:/RCompile/recent/R/include" -DNDEBUG -I../inst/include/
>      > -D_FILE_OFFSET_BITS=64 -I'D:/RCompile/CRANpkg/lib/4.0/Rcpp/include'
>      > -I'D:/RCompile/CRANincoming/R-devel/lib/RcppArmadillo/include'
>      > -I'D:/RCompile/CRANpkg/lib/4.0/RcppProgress/include'
>      > -I'D:/RCompile/CRANpkg/lib/4.0/Rhtslib/include'
>      > -I'D:/RCompile/CRANpkg/lib/4.0/zlibbioc/include'
>      > -I"d:/Compiler/gcc-4.9.3/local330/include"     -O2 -Wall  -mtune=core2 -c
>      > RcppExports.cpp -o RcppExports.o
>      >
>      > [...]
>      >
>      > d:/Compiler/gcc-4.9.3/mingw_32/bin/g++ -shared -s -static-libgcc -o
>      > jackalope.dll tmp.def RcppExports.o alter_reference.o create_sequences.o
>      > hts_illumina.o hts_pacbio.o io_fasta.o io_ms.o io_vcf.o mutator.o
>      > mutator_indels.o mutator_subs.o phylogenomics.o ref_var_access.o
>      > sub_models.o util.o var_classes.o vars_ssites.o -lws2_32
>      > -LD:/RCompile/recent/R/bin/i386 -lRlapack -LD:/RCompile/recent/R/bin/i386
>      > -lRblas -lgfortran -lm -lquadmath
>      > D:/RCompile/CRANpkg/lib/4.0/Rhtslib/usrlib/i386/libhts.a
>      > -LC:/extsoft/lib/i386 -lcurl -lrtmp -lssl -lssh2 -lcrypto -lgdi32 -lz
>      > -lws2_32 -lwldap32 -lwinmm -lidn
>      > -LD:/RCompile/CRANpkg/lib/4.0/zlibbioc/libs/i386 -lzlib1bioc
>      > -Ld:/Compiler/gcc-4.9.3/local330/lib/i386
>      > -Ld:/Compiler/gcc-4.9.3/local330/lib -LD:/RCompile/recent/R/bin/i386 -lR
>      > D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>      > cannot find -lcurl
>      > D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>      > cannot find -lrtmp
>      > D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>      > cannot find -lssl
>      > D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>      > cannot find -lssh2
>      > D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>      > cannot find -lcrypto
>      > D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>      > cannot find -lidn
>      > collect2.exe: error: ld returned 1 exit status
>      > no DLL was created
>      > ERROR: compilation failed for package 'jackalope'
>      > * removing 'd:/RCompile/CRANincoming/R-devel/lib/jackalope'
>      >
>      > 	[[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-package-devel at r-project.org mailing list
>      > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      >
>      
>      ______________________________________________
>      R-package-devel at r-project.org mailing list
>      https://stat.ethz.ch/mailman/listinfo/r-package-devel
>      
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From |embry @end|ng |rom ecocc@@com  Wed Jan 29 02:47:46 2020
From: |embry @end|ng |rom ecocc@@com (EcoC2S - Irucka Embry)
Date: Tue, 28 Jan 2020 19:47:46 -0600
Subject: [R-pkg-devel] Fwd: Placement of cran-comments.md file
In-Reply-To: <ea2294d57f9fa570005e59218939b73c@ecoccs.com>
References: <ea2294d57f9fa570005e59218939b73c@ecoccs.com>
Message-ID: <b67afa33d8c84f7cb2f3e521a74238e9@ecoccs.com>

Hi everyone, I am receiving the following NOTE when checking my package 
'iemisc':


* checking top-level files ... NOTE
Non-standard file/directory found at top level:
   'cran-comments.md'


Will someone please tell me the correct location of cran-comments.md?

Thank you.

Irucka


-- 
Family Partners:
http://www.sustainlex.org/
https://www.schoolingsolutions.com/

---------------------------------------------------------------------------------------------------------------

The business collaboration between EConsulting (tm)
[https://www.econsultingllc.org/] and EcoC^2S, is Getting Back to 
Nature.

Getting Back to Nature LocalHarvest --
https://www.localharvest.org/getting-back-to-nature-M73453
Getting Back to Nature -- https://www.gettingback2nature.farm/

EcoC2S -- https://www.ecoccs.com/
Principal, Irucka Embry, EIT

Services:
Growing Food
Healthy Living Mentor
Data Analysis with R
R Training
Chemistry and Mathematics Tutoring
Free/Libre and Open Source Software (FLOSS) Consultation


From edd @end|ng |rom deb|@n@org  Wed Jan 29 03:20:37 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 28 Jan 2020 20:20:37 -0600
Subject: [R-pkg-devel] Fwd: Placement of cran-comments.md file
In-Reply-To: <b67afa33d8c84f7cb2f3e521a74238e9@ecoccs.com>
References: <ea2294d57f9fa570005e59218939b73c@ecoccs.com>
 <b67afa33d8c84f7cb2f3e521a74238e9@ecoccs.com>
Message-ID: <24112.60405.82435.728120@rob.eddelbuettel.com>


On 28 January 2020 at 19:47, EcoC2S - Irucka Embry wrote:
| Hi everyone, I am receiving the following NOTE when checking my package 
| 'iemisc':
| 
| * checking top-level files ... NOTE
| Non-standard file/directory found at top level:
|    'cran-comments.md'
| 
| Will someone please tell me the correct location of cran-comments.md?

It is just like the message says: it is a non-standard file.

Meaning it is not described anywhere in 'Writing R Extensions' which is the
only manual that _really_ counts. So it should not be in the .tar.gz.

The manual also shows how to exclude files in your build directory from the
resulting tar.gz: mention them in .Rbuildignore.  So you could do

   echo "cran-comments.md" >> .Rbuildignore

or edit the file by hand. 

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From |embry @end|ng |rom ecocc@@com  Wed Jan 29 04:44:35 2020
From: |embry @end|ng |rom ecocc@@com (EcoC2S - Irucka Embry)
Date: Tue, 28 Jan 2020 21:44:35 -0600
Subject: [R-pkg-devel] Fwd: Placement of cran-comments.md file
In-Reply-To: <24112.60405.82435.728120@rob.eddelbuettel.com>
References: <ea2294d57f9fa570005e59218939b73c@ecoccs.com>
 <b67afa33d8c84f7cb2f3e521a74238e9@ecoccs.com>
 <24112.60405.82435.728120@rob.eddelbuettel.com>
Message-ID: <58d85fb75d8345627f198cb10c056720@ecoccs.com>

Hi Dirk, thank you for the prompt response.

I have made the change and will re-upload to CRAN.

Irucka


On 2020-01-28 20:20, Dirk Eddelbuettel wrote:
> On 28 January 2020 at 19:47, EcoC2S - Irucka Embry wrote:
> | Hi everyone, I am receiving the following NOTE when checking my 
> package
> | 'iemisc':
> |
> | * checking top-level files ... NOTE
> | Non-standard file/directory found at top level:
> |    'cran-comments.md'
> |
> | Will someone please tell me the correct location of cran-comments.md?
> 
> It is just like the message says: it is a non-standard file.
> 
> Meaning it is not described anywhere in 'Writing R Extensions' which is 
> the
> only manual that _really_ counts. So it should not be in the .tar.gz.
> 
> The manual also shows how to exclude files in your build directory from 
> the
> resulting tar.gz: mention them in .Rbuildignore.  So you could do
> 
>    echo "cran-comments.md" >> .Rbuildignore
> 
> or edit the file by hand.
> 
> Dirk
> 
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

-- 
Family Partners:
http://www.sustainlex.org/
https://www.schoolingsolutions.com/

---------------------------------------------------------------------------------------------------------------

The business collaboration between EConsulting (tm)
[https://www.econsultingllc.org/] and EcoC^2S, is Getting Back to 
Nature.

Getting Back to Nature LocalHarvest --
https://www.localharvest.org/getting-back-to-nature-M73453
Getting Back to Nature -- https://www.gettingback2nature.farm/

EcoC2S -- https://www.ecoccs.com/
Principal, Irucka Embry, EIT

Services:
Growing Food
Healthy Living Mentor
Data Analysis with R
R Training
Chemistry and Mathematics Tutoring
Free/Libre and Open Source Software (FLOSS) Consultation


From t|@goo||voto @end|ng |rom gm@||@com  Wed Jan 29 13:52:47 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Wed, 29 Jan 2020 09:52:47 -0300
Subject: [R-pkg-devel] Error after package update
Message-ID: <000201d5d6a3$037a55e0$0a6f01a0$@gmail.com>

Hi everyone,

After updating my R package list I just begin to get the following error
with dplyr::select()

A minimal reproducible example with iris dataset:

-------------------------------

library(dplyr)

select(iris, Species)



Erro: `...` is not empty.



We detected these problematic arguments:

* `logical`



These dots only exist to allow future extensions and should be empty.

Did you misspecify an argument?

-------------------------------



It seems that this error occurs when tidyselect changed from v0.2.5 (binary)
to v1.0.0 (source)

https://cran.r-project.org/web/packages/tidyselect/index.html



If I put back 'tidyselect' to v0.2.5 the error doesn't occur.

Any idea about why I am getting this error?

Best regards,



--

M.Sc. Tiago Olivoto

Ph.D student in Agronomy

Department of Plant Science

Federal University of Santa Maria

1000 Roraima Ave.

Santa Maria, RS 97105-340

E-mail:  <mailto:tiagoolivoto at gmail.com> tiagoolivoto at gmail.com

 <https://www.researchgate.net/profile/Tiago_Olivoto2> Research Gate

 <http://buscatextual.cnpq.br/buscatextual/visualizacv.do?id=K4416862T6>
Curr?culo Lattes




	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Wed Jan 29 14:00:27 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Wed, 29 Jan 2020 13:00:27 +0000
Subject: [R-pkg-devel] Error after package update
In-Reply-To: <000201d5d6a3$037a55e0$0a6f01a0$@gmail.com>
References: <000201d5d6a3$037a55e0$0a6f01a0$@gmail.com>
Message-ID: <CABtg=Kn5-K2tEQba5g9tiK1rK5WTyJCkSW5mBYSKncsV56+m8g@mail.gmail.com>

Hi, I don't see this with dplyr 0.8.3 and tidyselect 1.0.0.

Please make sure that you restart your R session after installing
packages, otherwise the previous versions might be still loaded.
One easy way to start a new R process is to use the reprex package to
create a reproducible example.

If you still see this problem after restarting R, please open an issue
in the tidyselect issue tracker:
https://github.com/r-lib/tidyselect/issues

Gabor

On Wed, Jan 29, 2020 at 4:53 AM Tiago Olivoto <tiagoolivoto at gmail.com> wrote:
>
> Hi everyone,
>
> After updating my R package list I just begin to get the following error
> with dplyr::select()
>
> A minimal reproducible example with iris dataset:
>
> -------------------------------
>
> library(dplyr)
>
> select(iris, Species)
>
>
>
> Erro: `...` is not empty.
>
>
>
> We detected these problematic arguments:
>
> * `logical`
>
>
>
> These dots only exist to allow future extensions and should be empty.
>
> Did you misspecify an argument?
>
> -------------------------------
>
>
>
> It seems that this error occurs when tidyselect changed from v0.2.5 (binary)
> to v1.0.0 (source)
>
> https://cran.r-project.org/web/packages/tidyselect/index.html
>
>
>
> If I put back 'tidyselect' to v0.2.5 the error doesn't occur.
>
> Any idea about why I am getting this error?
>
> Best regards,
>
>
>
> --
>
> M.Sc. Tiago Olivoto
>
> Ph.D student in Agronomy
>
> Department of Plant Science
>
> Federal University of Santa Maria
>
> 1000 Roraima Ave.
>
> Santa Maria, RS 97105-340
>
> E-mail:  <mailto:tiagoolivoto at gmail.com> tiagoolivoto at gmail.com
>
>  <https://www.researchgate.net/profile/Tiago_Olivoto2> Research Gate
>
>  <http://buscatextual.cnpq.br/buscatextual/visualizacv.do?id=K4416862T6>
> Curr?culo Lattes
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From gkr@emer @end|ng |rom bgc-jen@@mpg@de  Wed Jan 29 15:11:00 2020
From: gkr@emer @end|ng |rom bgc-jen@@mpg@de (Guido Kraemer)
Date: Wed, 29 Jan 2020 15:11:00 +0100
Subject: [R-pkg-devel] Optional library dependencies for compiled code
Message-ID: <0c4fb2ef-10b4-2353-9143-e3e784a1c046@bgc-jena.mpg.de>

I am developing an R package that can make (optional, but strongly 
recommended) use of a number of external compression algorithms. What is 
the best strategy if I want to distribute this as an R package? Because 
the package is for reading large external data sets, the package will 
probably not be very useful without compression.

- Make a hard dependency on all external libraries and make user 
manually disable it if they cannot install a library for some reason?

- Make no dependency on external libraries and have the user compile it 
manually if they want compression?

- Look for installed libraries and use only these? (If so: How would I 
do this during the installation of an R package?)

- How does this work on Windows?

The possible compressions are: blosc, zlib, bzip2, lz4, xz

Cheers,

Guido


From edd @end|ng |rom deb|@n@org  Wed Jan 29 16:30:25 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 29 Jan 2020 09:30:25 -0600
Subject: [R-pkg-devel] Optional library dependencies for compiled code
In-Reply-To: <0c4fb2ef-10b4-2353-9143-e3e784a1c046@bgc-jena.mpg.de>
References: <0c4fb2ef-10b4-2353-9143-e3e784a1c046@bgc-jena.mpg.de>
Message-ID: <24113.42257.698457.184393@rob.eddelbuettel.com>


Guido,

On 29 January 2020 at 15:11, Guido Kraemer wrote:
| I am developing an R package that can make (optional, but strongly 
| recommended) use of a number of external compression algorithms. What is 
| the best strategy if I want to distribute this as an R package? Because

It's actually a fairly difficult issue.

I have packages on GitHub but not on CRAN for that very reason (of difficult
to bundle external libraries).

| the package is for reading large external data sets, the package will 
| probably not be very useful without compression.
| 
| - Make a hard dependency on all external libraries and make user 
| manually disable it if they cannot install a library for some reason?

Could do, but probably means the package cannot get onto CRAN as the build
will fail "as shipped" ?

Also forces users to set up build options etc.  Hard. May reduce use.
 
| - Make no dependency on external libraries and have the user compile it 
| manually if they want compression?

Same, no? Too much user dependency.
 
| - Look for installed libraries and use only these? (If so: How would I 
| do this during the installation of an R package?)

I once added the ability to use a system / existing 'nlopt' library to the
'nloptr' package.  The package still defaults to downloading a tar.gz and
building during its build, but can use the system library for a speedup.  You
could look at that. All done via configure.

There are other "tricks". At least one package I know cheats (at least on
Linux), comes empty and tells you to install what is needed and reinstall.
That passes the letter of the law ("hey, the package builds on CRAN") but
hardly the spirit of the law.
 
| - How does this work on Windows?

Even less easily.
 
| The possible compressions are: blosc, zlib, bzip2, lz4, xz

Some of these are a given with R.

For my Debian builds I enable at least zlib, bzip2, lzma -- but I have to
"pretty soon" look into a similar list for another project.  My plan there is
bundle the sources of the missing compressors (and other libraries I need)
and trigger a static library build (for each, or maybe all) from configure.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jan 29 16:49:21 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 29 Jan 2020 07:49:21 -0800
Subject: [R-pkg-devel] Optional library dependencies for compiled code
In-Reply-To: <24113.42257.698457.184393@rob.eddelbuettel.com>
References: <0c4fb2ef-10b4-2353-9143-e3e784a1c046@bgc-jena.mpg.de>
 <24113.42257.698457.184393@rob.eddelbuettel.com>
Message-ID: <932CEFF7-6A7B-48A2-A345-C5EF7E20A4C5@dcn.davis.ca.us>

Complex system dependencies are not cleanly handled by the R packaging system, but Suggesting other packages is. You could create or re-use an existing package for each external dependency and possibly even let the user specify which one they want to your dependent package the way DBI handles database drivers. This gives you a clean isolated system dependency for each "compression driver" that you can handle with configure to be slick or force the user to address the system dependency with a simple external call.

On January 29, 2020 7:30:25 AM PST, Dirk Eddelbuettel <edd at debian.org> wrote:
>
>Guido,
>
>On 29 January 2020 at 15:11, Guido Kraemer wrote:
>| I am developing an R package that can make (optional, but strongly 
>| recommended) use of a number of external compression algorithms. What
>is 
>| the best strategy if I want to distribute this as an R package?
>Because
>
>It's actually a fairly difficult issue.
>
>I have packages on GitHub but not on CRAN for that very reason (of
>difficult
>to bundle external libraries).
>
>| the package is for reading large external data sets, the package will
>
>| probably not be very useful without compression.
>| 
>| - Make a hard dependency on all external libraries and make user 
>| manually disable it if they cannot install a library for some reason?
>
>Could do, but probably means the package cannot get onto CRAN as the
>build
>will fail "as shipped" ?
>
>Also forces users to set up build options etc.  Hard. May reduce use.
> 
>| - Make no dependency on external libraries and have the user compile
>it 
>| manually if they want compression?
>
>Same, no? Too much user dependency.
> 
>| - Look for installed libraries and use only these? (If so: How would
>I 
>| do this during the installation of an R package?)
>
>I once added the ability to use a system / existing 'nlopt' library to
>the
>'nloptr' package.  The package still defaults to downloading a tar.gz
>and
>building during its build, but can use the system library for a
>speedup.  You
>could look at that. All done via configure.
>
>There are other "tricks". At least one package I know cheats (at least
>on
>Linux), comes empty and tells you to install what is needed and
>reinstall.
>That passes the letter of the law ("hey, the package builds on CRAN")
>but
>hardly the spirit of the law.
> 
>| - How does this work on Windows?
>
>Even less easily.
> 
>| The possible compressions are: blosc, zlib, bzip2, lz4, xz
>
>Some of these are a given with R.
>
>For my Debian builds I enable at least zlib, bzip2, lzma -- but I have
>to
>"pretty soon" look into a similar list for another project.  My plan
>there is
>bundle the sources of the missing compressors (and other libraries I
>need)
>and trigger a static library build (for each, or maybe all) from
>configure.
>
>Dirk

-- 
Sent from my phone. Please excuse my brevity.


From |uc@r @end|ng |rom |edor@project@org  Wed Jan 29 17:39:38 2020
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Wed, 29 Jan 2020 17:39:38 +0100
Subject: [R-pkg-devel] Optional library dependencies for compiled code
In-Reply-To: <0c4fb2ef-10b4-2353-9143-e3e784a1c046@bgc-jena.mpg.de>
References: <0c4fb2ef-10b4-2353-9143-e3e784a1c046@bgc-jena.mpg.de>
Message-ID: <CALEXWq1TfKTu9dZjf+vph58iPA-Bh84_vhL5RR=3ixy7AJhm6A@mail.gmail.com>

On Wed, 29 Jan 2020 at 15:11, Guido Kraemer <gkraemer at bgc-jena.mpg.de> wrote:
>
> I am developing an R package that can make (optional, but strongly
> recommended) use of a number of external compression algorithms. What is
> the best strategy if I want to distribute this as an R package? Because
> the package is for reading large external data sets, the package will
> probably not be very useful without compression.
>
> - Make a hard dependency on all external libraries and make user
> manually disable it if they cannot install a library for some reason?
>
> - Make no dependency on external libraries and have the user compile it
> manually if they want compression?
>
> - Look for installed libraries and use only these? (If so: How would I
> do this during the installation of an R package?)
>
> - How does this work on Windows?
>
> The possible compressions are: blosc, zlib, bzip2, lz4, xz

You could take a look at the fst package [1], which bundles the zstd
library [2]. And that's probably everything you need. Or you may want
to directly use the fst package if your target is tabular data.

[1] https://cran.r-project.org/web/packages/fst/index.html
[2] https://github.com/facebook/zstd


From t|@goo||voto @end|ng |rom gm@||@com  Wed Jan 29 18:38:11 2020
From: t|@goo||voto @end|ng |rom gm@||@com (Tiago Olivoto)
Date: Wed, 29 Jan 2020 14:38:11 -0300
Subject: [R-pkg-devel] RES:  Error after package update
In-Reply-To: <CABtg=Kn5-K2tEQba5g9tiK1rK5WTyJCkSW5mBYSKncsV56+m8g@mail.gmail.com>
References: <000201d5d6a3$037a55e0$0a6f01a0$@gmail.com>
 <CABtg=Kn5-K2tEQba5g9tiK1rK5WTyJCkSW5mBYSKncsV56+m8g@mail.gmail.com>
Message-ID: <000701d5d6ca$e1e02a40$a5a07ec0$@gmail.com>

Thanks, Gabor.
The error occurred even when I restarted my section. 
I'm not sure if this was the solution, but I was using a development version of 'vctrs' (a package that 'tidyselect' depends on)
After installing the stable version of 'vctrs' (v0.2.2) all worked well.
Best regards,
Tiago


> -----Mensagem original-----
> De: G?bor Cs?rdi <csardi.gabor at gmail.com>
> Enviada em: quarta-feira, 29 de janeiro de 2020 10:00
> Para: tiagoolivoto at gmail.com
> Cc: R Package Devel <r-package-devel at r-project.org>
> Assunto: Re: [R-pkg-devel] Error after package update
> 
> Hi, I don't see this with dplyr 0.8.3 and tidyselect 1.0.0.
> 
> Please make sure that you restart your R session after installing packages,
> otherwise the previous versions might be still loaded.
> One easy way to start a new R process is to use the reprex package to create a
> reproducible example.
> 
> If you still see this problem after restarting R, please open an issue in the
> tidyselect issue tracker:
> https://github.com/r-lib/tidyselect/issues
> 
> Gabor
> 
> On Wed, Jan 29, 2020 at 4:53 AM Tiago Olivoto <tiagoolivoto at gmail.com>
> wrote:
> >
> > Hi everyone,
> >
> > After updating my R package list I just begin to get the following
> > error with dplyr::select()
> >
> > A minimal reproducible example with iris dataset:
> >
> > -------------------------------
> >
> > library(dplyr)
> >
> > select(iris, Species)
> >
> >
> >
> > Erro: `...` is not empty.
> >
> >
> >
> > We detected these problematic arguments:
> >
> > * `logical`
> >
> >
> >
> > These dots only exist to allow future extensions and should be empty.
> >
> > Did you misspecify an argument?
> >
> > -------------------------------
> >
> >
> >
> > It seems that this error occurs when tidyselect changed from v0.2.5
> > (binary) to v1.0.0 (source)
> >
> > https://cran.r-project.org/web/packages/tidyselect/index.html
> >
> >
> >
> > If I put back 'tidyselect' to v0.2.5 the error doesn't occur.
> >
> > Any idea about why I am getting this error?
> >
> > Best regards,
> >
> >
> >
> > --
> >
> > M.Sc. Tiago Olivoto
> >
> > Ph.D student in Agronomy
> >
> > Department of Plant Science
> >
> > Federal University of Santa Maria
> >
> > 1000 Roraima Ave.
> >
> > Santa Maria, RS 97105-340
> >
> > E-mail:  <mailto:tiagoolivoto at gmail.com> tiagoolivoto at gmail.com
> >
> >  <https://www.researchgate.net/profile/Tiago_Olivoto2> Research Gate
> >
> >
> > <http://buscatextual.cnpq.br/buscatextual/visualizacv.do?id=K4416862T6
> > >
> > Curr?culo Lattes
> >
> >
> >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel


From mo|||eebrook@ @end|ng |rom gm@||@com  Wed Jan 29 19:11:13 2020
From: mo|||eebrook@ @end|ng |rom gm@||@com (Mollie Brooks)
Date: Wed, 29 Jan 2020 19:11:13 +0100
Subject: [R-pkg-devel] win-builder R-oldrelease downstream car
Message-ID: <62F5251D-0E30-48A8-ABB0-6EE2D24C9B8F@gmail.com>

Hi,

The glmmTMB developers and I are having a hard time figuring out how to avoid some errors that only occur when we test our package on the R-oldrelease version on win-builder. I tried to replicate them locally on a Windows computer by installing R 3.5.3, but I could not.

The error occurs while running some examples of how to use downstream methods from other packages. 

> if (require(car)) {
+     if ("Anova.glmmTMB" %in% methods("Anova")) {
+        ## should be available in later versions
+        Anova(warp.lm,type="III")
+     } else if (length(find("Anova.glmmTMB"))>0) {
+        ## try to test back-compatibly
+        Anova.glmmTMB(warp.lm, type="III")
+     }
+ }
Loading required package: car
Loading required package: carData
Error in L %*% b : requires numeric/complex matrix/vector arguments
Calls: Anova ... Anova.default -> Anova.III.default -> linearHypothesis.default
Execution halted
** running examples for arch 'x64' ... ERROR
Here?s a temporary link with all the details https://win-builder.r-project.org/76ZlyIigKiIC <https://win-builder.r-project.org/76ZlyIigKiIC>. 

Can anyone suggest a way to avoid this error? We tried checking (in the if statement) that the latest version of car was installed, but it didn?t avoid the error. Maybe the solution is to have the if statement check the version of R also?

Thanks in advance.
Mollie



	[[alternative HTML version deleted]]


From tr@ver@c @end|ng |rom gm@||@com  Wed Jan 29 21:43:33 2020
From: tr@ver@c @end|ng |rom gm@||@com (Travers Ching)
Date: Wed, 29 Jan 2020 12:43:33 -0800
Subject: [R-pkg-devel] Optional library dependencies for compiled code
In-Reply-To: <CALEXWq1TfKTu9dZjf+vph58iPA-Bh84_vhL5RR=3ixy7AJhm6A@mail.gmail.com>
References: <0c4fb2ef-10b4-2353-9143-e3e784a1c046@bgc-jena.mpg.de>
 <CALEXWq1TfKTu9dZjf+vph58iPA-Bh84_vhL5RR=3ixy7AJhm6A@mail.gmail.com>
Message-ID: <CAPLMX9FzOWxnRjq3uXOiw6_uM80Cu44bU1WbpMCifF=WBuKB0A@mail.gmail.com>

I'd like to add, for bundling `zstd` and `lz4`, I was told by Professor
Ripley that I must first check for system installations and use that when
possible, because of possible security issues being fixed in later
updates.

I think that's a good idea, and can be set up with a configure script: 1)
check for later version system installations e.g. with `pkg-config`, 2) use
system if it exists, 3) otherwise compile bundled `zstd`.

On Wed, Jan 29, 2020 at 8:40 AM I?aki Ucar <iucar at fedoraproject.org> wrote:

> On Wed, 29 Jan 2020 at 15:11, Guido Kraemer <gkraemer at bgc-jena.mpg.de>
> wrote:
> >
> > I am developing an R package that can make (optional, but strongly
> > recommended) use of a number of external compression algorithms. What is
> > the best strategy if I want to distribute this as an R package? Because
> > the package is for reading large external data sets, the package will
> > probably not be very useful without compression.
> >
> > - Make a hard dependency on all external libraries and make user
> > manually disable it if they cannot install a library for some reason?
> >
> > - Make no dependency on external libraries and have the user compile it
> > manually if they want compression?
> >
> > - Look for installed libraries and use only these? (If so: How would I
> > do this during the installation of an R package?)
> >
> > - How does this work on Windows?
> >
> > The possible compressions are: blosc, zlib, bzip2, lz4, xz
>
> You could take a look at the fst package [1], which bundles the zstd
> library [2]. And that's probably everything you need. Or you may want
> to directly use the fst package if your target is tabular data.
>
> [1] https://cran.r-project.org/web/packages/fst/index.html
> [2] https://github.com/facebook/zstd
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @te|@no@bor|n| @end|ng |rom @@tr@zenec@@com  Thu Jan 30 22:40:22 2020
From: @te|@no@bor|n| @end|ng |rom @@tr@zenec@@com (Borini, Stefano)
Date: Thu, 30 Jan 2020 21:40:22 +0000
Subject: [R-pkg-devel] Unable to reproduce reported problems. Docker image?
Message-ID: <5AA25EB6-46F5-4642-B6FD-EC6D10E0D7C7@contoso.com>

I am currently trying to submit a package to CRAN, and I see no problems in running the test on my package on Linux ubuntu 18.04 and the latest compiled R.
Is there a docker image of the CRAN automatic build system so that one can try to reproduce the problem in house?

Thanks


________________________________


AstraZeneca UK Limited is a company incorporated in England and Wales with registered number:03674842 and its registered office at 1 Francis Crick Avenue, Cambridge Biomedical Campus, Cambridge, CB2 0AA.

This e-mail and its attachments are intended for the above named recipient only and may contain confidential and privileged information. If they have come to you in error, you must not copy or show them to anyone; instead, please reply to this e-mail, highlighting the error to the sender and then immediately delete the message. For information about how AstraZeneca UK Limited and its affiliates may process information, personal data and monitor communications, please see our privacy notice at www.astrazeneca.com<https://www.astrazeneca.com>

From edd @end|ng |rom deb|@n@org  Thu Jan 30 23:48:25 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Thu, 30 Jan 2020 16:48:25 -0600
Subject: [R-pkg-devel] 
 Unable to reproduce reported problems. Docker image?
In-Reply-To: <5AA25EB6-46F5-4642-B6FD-EC6D10E0D7C7@contoso.com>
References: <5AA25EB6-46F5-4642-B6FD-EC6D10E0D7C7@contoso.com>
Message-ID: <24115.23865.98927.942294@rob.eddelbuettel.com>


On 30 January 2020 at 21:40, Borini, Stefano wrote:
| I am currently trying to submit a package to CRAN, and I see no problems in running the test on my package on Linux ubuntu 18.04 and the latest compiled R.
| Is there a docker image of the CRAN automatic build system so that one can try to reproduce the problem in house?

In short, no.

There are Docker containers provided by the Rocker Project, by RHub, and by
others, but none of these _exactly_ match the CRAN containers.  Closing this
gap has been discussed, alas time is short and limited so nuttin' to show. 

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Jan 30 23:52:57 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 30 Jan 2020 23:52:57 +0100
Subject: [R-pkg-devel] 
 Unable to reproduce reported problems. Docker image?
In-Reply-To: <5AA25EB6-46F5-4642-B6FD-EC6D10E0D7C7@contoso.com>
References: <5AA25EB6-46F5-4642-B6FD-EC6D10E0D7C7@contoso.com>
Message-ID: <66feca58-1dac-1327-43cb-427c8e622a56@statistik.tu-dortmund.de>

No, for Windows you may use winbuilder that comes very close. More 
generally you can try r-hub for all OSes, but that is less close.

Best,
Uwe Ligges


On 30.01.2020 22:40, Borini, Stefano wrote:
> I am currently trying to submit a package to CRAN, and I see no problems in running the test on my package on Linux ubuntu 18.04 and the latest compiled R.
> Is there a docker image of the CRAN automatic build system so that one can try to reproduce the problem in house?
> 
> Thanks
> 
> 
> ________________________________
> 
> 
> AstraZeneca UK Limited is a company incorporated in En...{{dropped:8}}


From @te|@no@bor|n| @end|ng |rom @@tr@zenec@@com  Fri Jan 31 10:11:05 2020
From: @te|@no@bor|n| @end|ng |rom @@tr@zenec@@com (Borini, Stefano)
Date: Fri, 31 Jan 2020 09:11:05 +0000
Subject: [R-pkg-devel] 
 Unable to reproduce reported problems. Docker image?
In-Reply-To: <24115.23865.98927.942294@rob.eddelbuettel.com>
References: <5AA25EB6-46F5-4642-B6FD-EC6D10E0D7C7@contoso.com>
 <24115.23865.98927.942294@rob.eddelbuettel.com>
Message-ID: <A7F17DD1-77C6-4108-A6EC-C16C3A066C3F@astrazeneca.com>

Thanks. What is the recommended strategy in this case? Keep submitting and patching until it passes?


?On 30/01/2020, 22:48, "Dirk Eddelbuettel" <edd at debian.org> wrote:


    On 30 January 2020 at 21:40, Borini, Stefano wrote:
    | I am currently trying to submit a package to CRAN, and I see no problems in running the test on my package on Linux ubuntu 18.04 and the latest compiled R.
    | Is there a docker image of the CRAN automatic build system so that one can try to reproduce the problem in house?

    In short, no.

    There are Docker containers provided by the Rocker Project, by RHub, and by
    others, but none of these _exactly_ match the CRAN containers.  Closing this
    gap has been discussed, alas time is short and limited so nuttin' to show.

    Dirk

    --
    https://clicktime.symantec.com/39by3e5jiumtscrjhg8uNwd6H2?u=http%3A%2F%2Fdirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


________________________________


AstraZeneca UK Limited is a company incorporated in England and Wales with registered number:03674842 and its registered office at 1 Francis Crick Avenue, Cambridge Biomedical Campus, Cambridge, CB2 0AA.

This e-mail and its attachments are intended for the above named recipient only and may contain confidential and privileged information. If they have come to you in error, you must not copy or show them to anyone; instead, please reply to this e-mail, highlighting the error to the sender and then immediately delete the message. For information about how AstraZeneca UK Limited and its affiliates may process information, personal data and monitor communications, please see our privacy notice at www.astrazeneca.com<https://www.astrazeneca.com>

From edd @end|ng |rom deb|@n@org  Fri Jan 31 15:03:35 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 31 Jan 2020 08:03:35 -0600
Subject: [R-pkg-devel] 
 Unable to reproduce reported problems. Docker image?
In-Reply-To: <A7F17DD1-77C6-4108-A6EC-C16C3A066C3F@astrazeneca.com>
References: <5AA25EB6-46F5-4642-B6FD-EC6D10E0D7C7@contoso.com>
 <24115.23865.98927.942294@rob.eddelbuettel.com>
 <A7F17DD1-77C6-4108-A6EC-C16C3A066C3F@astrazeneca.com>
Message-ID: <24116.13239.470679.734103@rob.eddelbuettel.com>


On 31 January 2020 at 09:11, Borini, Stefano wrote:
| Thanks. What is the recommended strategy in this case? Keep submitting and patching until it passes?

Standard debugging, and (as Uwe already said) win-builder for that OS, rhub
for others, and asking here, ...  Imperfect, but doable.

It would be so nice to have actual Docker containers to reproduce issues.
Maybe one day.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Fri Jan 31 15:10:51 2020
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Fri, 31 Jan 2020 14:10:51 +0000
Subject: [R-pkg-devel] 
 Unable to reproduce reported problems. Docker image?
In-Reply-To: <24116.13239.470679.734103@rob.eddelbuettel.com>
References: <5AA25EB6-46F5-4642-B6FD-EC6D10E0D7C7@contoso.com>
 <24115.23865.98927.942294@rob.eddelbuettel.com>
 <A7F17DD1-77C6-4108-A6EC-C16C3A066C3F@astrazeneca.com>
 <24116.13239.470679.734103@rob.eddelbuettel.com>
Message-ID: <DM6PR04MB5531334D7E3694F334279391F9070@DM6PR04MB5531.namprd04.prod.outlook.com>

it probably makes sense to more directly indicate what package is causing problems (e.g., sharing the location of a public repository of the source) and the nature of the error (cut-and-paste the check output here?). Likely this will lead both to insight into the problem being flagged by the builder, and the reason why you are not able to reproduce it.

Martin Morgan 

?On 1/31/20, 9:04 AM, "R-package-devel on behalf of Dirk Eddelbuettel" <r-package-devel-bounces at r-project.org on behalf of edd at debian.org> wrote:

    
    On 31 January 2020 at 09:11, Borini, Stefano wrote:
    | Thanks. What is the recommended strategy in this case? Keep submitting and patching until it passes?
    
    Standard debugging, and (as Uwe already said) win-builder for that OS, rhub
    for others, and asking here, ...  Imperfect, but doable.
    
    It would be so nice to have actual Docker containers to reproduce issues.
    Maybe one day.
    
    Dirk
    
    -- 
    http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
    
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel
    

From @te|@no@bor|n| @end|ng |rom @@tr@zenec@@com  Fri Jan 31 16:43:58 2020
From: @te|@no@bor|n| @end|ng |rom @@tr@zenec@@com (Borini, Stefano)
Date: Fri, 31 Jan 2020 15:43:58 +0000
Subject: [R-pkg-devel] 
 Unable to reproduce reported problems. Docker image?
In-Reply-To: <DM6PR04MB5531334D7E3694F334279391F9070@DM6PR04MB5531.namprd04.prod.outlook.com>
References: <5AA25EB6-46F5-4642-B6FD-EC6D10E0D7C7@contoso.com>
 <24115.23865.98927.942294@rob.eddelbuettel.com>
 <A7F17DD1-77C6-4108-A6EC-C16C3A066C3F@astrazeneca.com>
 <24116.13239.470679.734103@rob.eddelbuettel.com>
 <DM6PR04MB5531334D7E3694F334279391F9070@DM6PR04MB5531.namprd04.prod.outlook.com>
Message-ID: <1C720019-759D-4AEA-BED3-0957F584CE5C@astrazeneca.com>

I think (but I am not sure) that I narrowed down the issue to a stochastic process that has no seed defined. Unfortunately it's not my package so I have to do mostly guesswork on this regard.
What has surprised me though, is that I managed to get exact same results on three different platforms (linux, mac, windows) and three different versions (3.4, 3.5.3, and development), but the only platform that shows the variation is the CRAN one. Only when I added a single throwaway sample() call I got the same behaviour on my machines.

Thank you for your help.


?On 31/01/2020, 14:10, "Martin Morgan" <mtmorgan.bioc at gmail.com> wrote:

    it probably makes sense to more directly indicate what package is causing problems (e.g., sharing the location of a public repository of the source) and the nature of the error (cut-and-paste the check output here?). Likely this will lead both to insight into the problem being flagged by the builder, and the reason why you are not able to reproduce it.

    Martin Morgan

    On 1/31/20, 9:04 AM, "R-package-devel on behalf of Dirk Eddelbuettel" <r-package-devel-bounces at r-project.org on behalf of edd at debian.org> wrote:


        On 31 January 2020 at 09:11, Borini, Stefano wrote:
        | Thanks. What is the recommended strategy in this case? Keep submitting and patching until it passes?

        Standard debugging, and (as Uwe already said) win-builder for that OS, rhub
        for others, and asking here, ...  Imperfect, but doable.

        It would be so nice to have actual Docker containers to reproduce issues.
        Maybe one day.

        Dirk

        --
        https://clicktime.symantec.com/3LGnbPsU527tgDjdhmUzsay6H2?u=http%3A%2F%2Fdirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

        ______________________________________________
        R-package-devel at r-project.org mailing list
        https://clicktime.symantec.com/3Pzw1p1VBawxJbHABzaUeBq6H2?u=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel



________________________________


AstraZeneca UK Limited is a company incorporated in England and Wales with registered number:03674842 and its registered office at 1 Francis Crick Avenue, Cambridge Biomedical Campus, Cambridge, CB2 0AA.

This e-mail and its attachments are intended for the above named recipient only and may contain confidential and privileged information. If they have come to you in error, you must not copy or show them to anyone; instead, please reply to this e-mail, highlighting the error to the sender and then immediately delete the message. For information about how AstraZeneca UK Limited and its affiliates may process information, personal data and monitor communications, please see our privacy notice at www.astrazeneca.com<https://www.astrazeneca.com>

From |uc@@ @end|ng |rom |uc@@ne||@com  Sun Feb  2 20:55:58 2020
From: |uc@@ @end|ng |rom |uc@@ne||@com (Lucas Nell)
Date: Sun, 2 Feb 2020 13:55:58 -0600
Subject: [R-pkg-devel] CRAN cannot find libraries on Windows
In-Reply-To: <b196164c-ae75-ed40-c561-b9b8023c122d@fredhutch.org>
References: <CAKekK4s27MLEHT7gK8PNj-gQnOnuwJ1oA5S21U4UKnz2rnpZug@mail.gmail.com>
 <b4b4960a-fe78-b238-e36b-df477a6fcb2c@statistik.tu-dortmund.de>
 <BYAPR04MB5526A452B02906E4C6785AC8F90B0@BYAPR04MB5526.namprd04.prod.outlook.com>
 <53492baf-c8a1-7882-adcf-8ae28dc57731@gmail.com>
 <b196164c-ae75-ed40-c561-b9b8023c122d@fredhutch.org>
Message-ID: <CAKekK4vqURBuPhMSbRPFsjwXEvLpJdqXZ0pXtD2kZaM8SUvncw@mail.gmail.com>

Thanks everyone for your help. It's still giving me the same error on the
development win-builder and on AppVeyor. Truncated install logs for both
are below. I'm not sure that Rhtslib 1.91.1 (the one with the new changes)
is being used on win-builder, which is why I've included the AppVeyor
results?hopefully they're useful for what might happen on CRAN.


## APPVEYOR

* installing *source* package 'jackalope' ...
** using staged installation
** libs

*** arch - i386
C:/Rtools/mingw_32/bin/g++  -std=gnu++11 -I"C:/RLibrary/zlibbioc/include"
-I"c:/R/include" -DNDEBUG -I../inst/include/ -D_FILE_OFFSET_BITS=64
-I'C:/RLibrary/Rcpp/include' -I'C:/RLibrary/RcppArmadillo/include'
-I'C:/RLibrary/RcppProgress/include' -I'C:/RLibrary/Rhtslib/include'
-I'C:/RLibrary/zlibbioc/include'
-I"C:/projects/BUILD/R-source-win32/extsoft/include"     -O2 -Wall
 -mfpmath=sse -msse2 -c RcppExports.cpp -o RcppExports.o
C:/Rtools/mingw_32/bin/g++  -std=gnu++11 -I"C:/RLibrary/zlibbioc/include"
-I"c:/R/include" -DNDEBUG -I../inst/include/ -D_FILE_OFFSET_BITS=64
-I'C:/RLibrary/Rcpp/include' -I'C:/RLibrary/RcppArmadillo/include'
-I'C:/RLibrary/RcppProgress/include' -I'C:/RLibrary/Rhtslib/include'
-I'C:/RLibrary/zlibbioc/include'
-I"C:/projects/BUILD/R-source-win32/extsoft/include"     -O2 -Wall
 -mfpmath=sse -msse2 -c alter_reference.cpp -o alter_reference.o

[...]

C:/Rtools/mingw_32/bin/g++ -shared -s -static-libgcc -o jackalope.dll
tmp.def RcppExports.o alter_reference.o create_sequences.o hts_illumina.o
hts_pacbio.o io_fasta.o io_ms.o io_vcf.o mutator.o mutator_indels.o
mutator_subs.o phylogenomics.o ref_var_access.o sub_models.o util.o
var_classes.o vars_ssites.o -lws2_32 -Lc:/R/bin/i386 -lRlapack
-Lc:/R/bin/i386 -lRblas -lgfortran -lm -lquadmath
C:/RLibrary/Rhtslib/usrlib/i386/libhts.a
-LC:/projects/BUILD/R-source-win32/extsoft/lib/i386 -lcurl -lrtmp -lssl
-lssh2 -lcrypto -lgdi32 -lz -lws2_32 -lwldap32 -lwinmm -lidn
-LC:/RLibrary/zlibbioc/libs/i386 -lzlib1bioc
-LC:/projects/BUILD/R-source-win32/extsoft/lib/i386
-LC:/projects/BUILD/R-source-win32/extsoft/lib -Lc:/R/bin/i386 -lR
C:/Rtools/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
cannot find -lcurl
C:/Rtools/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
cannot find -lrtmp
C:/Rtools/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
cannot find -lssl
C:/Rtools/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
cannot find -lssh2
C:/Rtools/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
cannot find -lcrypto
C:/Rtools/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
cannot find -lidn
collect2.exe: error: ld returned 1 exit status
no DLL was created
ERROR: compilation failed for package 'jackalope'
* removing 'C:/projects/jackalope/jackalope.Rcheck/jackalope'


## WIN-BUILDER
* installing *source* package 'jackalope' ...
** using staged installation
** libs

*** arch - i386
d:/Compiler/gcc-4.9.3/mingw_32/bin/g++  -std=gnu++11
-I"D:/RCompile/CRANpkg/lib/4.0/zlibbioc/include"
-I"D:/RCompile/recent/R/include" -DNDEBUG -I../inst/include/
-D_FILE_OFFSET_BITS=64 -I'D:/RCompile/CRANpkg/lib/4.0/Rcpp/include'
-I'D:/RCompile/CRANpkg/lib/4.0/RcppArmadillo/include'
-I'D:/RCompile/CRANpkg/lib/4.0/RcppProgress/include'
-I'D:/RCompile/CRANpkg/lib/4.0/Rhtslib/include'
-I'D:/RCompile/CRANpkg/lib/4.0/zlibbioc/include'
-I"d:/Compiler/gcc-4.9.3/local330/include"     -O2 -Wall  -mtune=core2 -c
RcppExports.cpp -o RcppExports.o
d:/Compiler/gcc-4.9.3/mingw_32/bin/g++  -std=gnu++11
-I"D:/RCompile/CRANpkg/lib/4.0/zlibbioc/include"
-I"D:/RCompile/recent/R/include" -DNDEBUG -I../inst/include/
-D_FILE_OFFSET_BITS=64 -I'D:/RCompile/CRANpkg/lib/4.0/Rcpp/include'
-I'D:/RCompile/CRANpkg/lib/4.0/RcppArmadillo/include'
-I'D:/RCompile/CRANpkg/lib/4.0/RcppProgress/include'
-I'D:/RCompile/CRANpkg/lib/4.0/Rhtslib/include'
-I'D:/RCompile/CRANpkg/lib/4.0/zlibbioc/include'
-I"d:/Compiler/gcc-4.9.3/local330/include"     -O2 -Wall  -mtune=core2 -c
alter_reference.cpp -o alter_reference.o

[...]

d:/Compiler/gcc-4.9.3/mingw_32/bin/g++ -shared -s -static-libgcc -o
jackalope.dll tmp.def RcppExports.o alter_reference.o create_sequences.o
hts_illumina.o hts_pacbio.o io_fasta.o io_ms.o io_vcf.o mutator.o
mutator_indels.o mutator_subs.o phylogenomics.o ref_var_access.o
sub_models.o util.o var_classes.o vars_ssites.o -lws2_32
-LD:/RCompile/recent/R/bin/i386 -lRlapack -LD:/RCompile/recent/R/bin/i386
-lRblas -lgfortran -lm -lquadmath
D:/RCompile/CRANpkg/lib/4.0/Rhtslib/usrlib/i386/libhts.a
-LC:/extsoft/lib/i386 -lcurl -lrtmp -lssl -lssh2 -lcrypto -lgdi32 -lz
-lws2_32 -lwldap32 -lwinmm -lidn
-LD:/RCompile/CRANpkg/lib/4.0/zlibbioc/libs/i386 -lzlib1bioc
-Ld:/Compiler/gcc-4.9.3/local330/lib/i386
-Ld:/Compiler/gcc-4.9.3/local330/lib -LD:/RCompile/recent/R/bin/i386 -lR
D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
cannot find -lcurl
D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
cannot find -lrtmp
D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
cannot find -lssl
D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
cannot find -lssh2
D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
cannot find -lcrypto
D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
cannot find -lidn
collect2.exe: error: ld returned 1 exit status
no DLL was created
ERROR: compilation failed for package 'jackalope'
* removing 'd:/RCompile/CRANguest/R-devel/lib/jackalope'






On Mon, Jan 27, 2020 at 5:45 PM Pages, Herve <hpages at fredhutch.org> wrote:

> OK thanks. I'm using LOCAL_SOFT now in Rhtslib instead of hardcoded
> C:/extsoft:
>
>
>
> https://github.com/Bioconductor/Rhtslib/commit/1052c4c2e467fa8e3db613a70af2f77448956d38
>
> H.
>
> On 1/27/20 15:15, Duncan Murdoch wrote:
> > On 27/01/2020 5:48 p.m., Martin Morgan wrote:
> >> what are the correct paths?
> >
> > The src/gnuwin32/MkRules.dist file gives the patterns.   They are based
> > on environment variables LOCAL_SOFT, R_HOME, etc.  Most people should
> > modify that file to MkRules.local when building R; the variables defined
> > there get re-used when building packages.  I forget what gets baked into
> > the Windows binary distributions.
> >
> > Duncan Murdoch
> >
> >>
> >> ?On 1/27/20, 3:32 PM, "R-package-devel on behalf of Uwe Ligges"
> >> <r-package-devel-bounces at r-project.org on behalf of
> >> ligges at statistik.tu-dortmund.de> wrote:
> >>
> >>      Thanks, one suspicious part from the log below is
> >>      -LC:/extsoft/lib/i386
> >>      which is clearly not in any variable we define on CRAN.
> >>      Looking close shows that
> >>       > Rhtslib::pkgconfig("PKG_LIBS")
> >>      gives
> >>      'D:/RCompile/CRANpkg/lib/4.0/Rhtslib/usrlib/x64/libhts.a'
> >>      -LC:/extsoft/lib/x64 -lcurl -lrtmp -lssl -lssh2 -lcrypto -lgdi32
> -lz
> >>      -lws2_32 -lwldap32 -lwinmm
> >>      and that is wrong as -LC:/extsoft/lib/i386 or C:/extsoft/lib/x64
> >> are not
> >>      directories where the software is installed on winbuilder.
> >>      Pls use the directories the other packages are using, too.
> >>      Best,
> >>      Uwe Ligges
> >>      On 26.01.2020 22:40, Lucas Nell wrote:
> >>      > Hello all,
> >>      >
> >>      > My package (source here
> >> <
> https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_lucasnell_jackalope&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=rbTXQQLd6r1RKFIeCzZLf3oG7wNkyQ7ajc_OWw6ptl8&s=pTaNljvQ8YT-dMzHgasiRYlhEdPYJq5pmcDu44IrFAk&e=
> >> >) no longer
> >>      > compiles on a standard Windows installation (see truncated
> >> install log
> >>      > below). The problem seems to be the libraries required by the
> >> Bioconductor
> >>      > package Rhtslib
> >>      >
> >> <
> https://urldefense.proofpoint.com/v2/url?u=https-3A__bioconductor.org_packages_release_bioc_html_Rhtslib.html&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=rbTXQQLd6r1RKFIeCzZLf3oG7wNkyQ7ajc_OWw6ptl8&s=oV05PFPLvWBLVj_pX9VeJX8fT565yXNxji0sihhuXGU&e=
> >> >. My
> >>      > package compiles fine when using GCC 8 via Rtools 40 (and when
> >> built using
> >>      > "r-devel-windows-ix86+x86_64-gcc8" on CRAN), but when trying to
> >> submit a
> >>      > new version to CRAN, it fails its automatic tests without
> >> working using GCC
> >>      > 4 on Windows. Does anyone have ideas on how to fix this? Thank
> >> you!
> >>      >
> >>      > Cheers,
> >>      > Lucas
> >>      >
> >>      >
> >>      >
> >>      > * installing *source* package 'jackalope' ...
> >>      > ** using staged installation
> >>      > ** libs
> >>      >
> >>      > *** arch - i386
> >>      > d:/Compiler/gcc-4.9.3/mingw_32/bin/g++  -std=gnu++11
> >>      > -I"D:/RCompile/CRANpkg/lib/4.0/zlibbioc/include"
> >>      > -I"D:/RCompile/recent/R/include" -DNDEBUG -I../inst/include/
> >>      > -D_FILE_OFFSET_BITS=64
> >> -I'D:/RCompile/CRANpkg/lib/4.0/Rcpp/include'
> >>      > -I'D:/RCompile/CRANincoming/R-devel/lib/RcppArmadillo/include'
> >>      > -I'D:/RCompile/CRANpkg/lib/4.0/RcppProgress/include'
> >>      > -I'D:/RCompile/CRANpkg/lib/4.0/Rhtslib/include'
> >>      > -I'D:/RCompile/CRANpkg/lib/4.0/zlibbioc/include'
> >>      > -I"d:/Compiler/gcc-4.9.3/local330/include"     -O2 -Wall
> >> -mtune=core2 -c
> >>      > RcppExports.cpp -o RcppExports.o
> >>      >
> >>      > [...]
> >>      >
> >>      > d:/Compiler/gcc-4.9.3/mingw_32/bin/g++ -shared -s
> >> -static-libgcc -o
> >>      > jackalope.dll tmp.def RcppExports.o alter_reference.o
> >> create_sequences.o
> >>      > hts_illumina.o hts_pacbio.o io_fasta.o io_ms.o io_vcf.o mutator.o
> >>      > mutator_indels.o mutator_subs.o phylogenomics.o ref_var_access.o
> >>      > sub_models.o util.o var_classes.o vars_ssites.o -lws2_32
> >>      > -LD:/RCompile/recent/R/bin/i386 -lRlapack
> >> -LD:/RCompile/recent/R/bin/i386
> >>      > -lRblas -lgfortran -lm -lquadmath
> >>      > D:/RCompile/CRANpkg/lib/4.0/Rhtslib/usrlib/i386/libhts.a
> >>      > -LC:/extsoft/lib/i386 -lcurl -lrtmp -lssl -lssh2 -lcrypto
> >> -lgdi32 -lz
> >>      > -lws2_32 -lwldap32 -lwinmm -lidn
> >>      > -LD:/RCompile/CRANpkg/lib/4.0/zlibbioc/libs/i386 -lzlib1bioc
> >>      > -Ld:/Compiler/gcc-4.9.3/local330/lib/i386
> >>      > -Ld:/Compiler/gcc-4.9.3/local330/lib
> >> -LD:/RCompile/recent/R/bin/i386 -lR
> >>      >
> >>
> D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>
> >>
> >>      > cannot find -lcurl
> >>      >
> >>
> D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>
> >>
> >>      > cannot find -lrtmp
> >>      >
> >>
> D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>
> >>
> >>      > cannot find -lssl
> >>      >
> >>
> D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>
> >>
> >>      > cannot find -lssh2
> >>      >
> >>
> D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>
> >>
> >>      > cannot find -lcrypto
> >>      >
> >>
> D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>
> >>
> >>      > cannot find -lidn
> >>      > collect2.exe: error: ld returned 1 exit status
> >>      > no DLL was created
> >>      > ERROR: compilation failed for package 'jackalope'
> >>      > * removing 'd:/RCompile/CRANincoming/R-devel/lib/jackalope'
> >>      >
> >>      >     [[alternative HTML version deleted]]
> >>      >
> >>      > ______________________________________________
> >>      > R-package-devel at r-project.org mailing list
> >>      >
> >>
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=rbTXQQLd6r1RKFIeCzZLf3oG7wNkyQ7ajc_OWw6ptl8&s=cxFKMxmeHWC_Ha6Oad1iwH0ljS0Oqkusb8nkpHRp-LY&e=
> >>      >
> >>      ______________________________________________
> >>      R-package-devel at r-project.org mailing list
> >>
> >>
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=rbTXQQLd6r1RKFIeCzZLf3oG7wNkyQ7ajc_OWw6ptl8&s=cxFKMxmeHWC_Ha6Oad1iwH0ljS0Oqkusb8nkpHRp-LY&e=
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >>
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=rbTXQQLd6r1RKFIeCzZLf3oG7wNkyQ7ajc_OWw6ptl8&s=cxFKMxmeHWC_Ha6Oad1iwH0ljS0Oqkusb8nkpHRp-LY&e=
> >>
> >
>
> --
> Herv? Pag?s
>
> Program in Computational Biology
> Division of Public Health Sciences
> Fred Hutchinson Cancer Research Center
> 1100 Fairview Ave. N, M1-B514
> P.O. Box 19024
> Seattle, WA 98109-1024
>
> E-mail: hpages at fredhutch.org
> Phone:  (206) 667-5791
> Fax:    (206) 667-1319
>

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Mon Feb  3 03:15:35 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Sun, 2 Feb 2020 20:15:35 -0600
Subject: [R-pkg-devel] "try" malfunctions on Ubuntu Linux 16.04 LTS,
 R-release, GCC
In-Reply-To: <20200202232710.1.F960CD2D2556F532@rhub.io>
References: <20200202232710.1.F960CD2D2556F532@rhub.io>
Message-ID: <00df79bb-14a7-d810-71b3-eadd7cd32103@effectivedefense.org>

Hello, All:


 ????? devtools::check_rhub failed to trap an error wrapped in "try", 
per the email below.? This came from running 
devtools::check_rhub(Ecfun_dir), where Ecfun_dir = the path to a copy of 
"https://github.com/sbgraves237/Ecfun".


 ????? This is the development version of Ecfun, which I want to submit 
to CRAN as soon as I can do so without offending the sensibilities of 
the overworked CRAN maintainers.


 ????? Suggestions?
 ????? Thanks,
 ????? Spencer Graves


-------- Forwarded Message --------
Subject: 	Ecfun 0.2-2: ERROR
Date: 	Sun, 02 Feb 2020 23:27:10 +0000
From: 	R-hub builder <support at rhub.io>
To: 	spencer.graves at effectivedefense.org



Ecfun 0.2-2: ERROR

	
Ecfun 0.2-2: ERROR
*Build ID:* 	|Ecfun_0.2-2.tar.gz-a5518fc2c19c4cd191a5d67b55c45603|
*Platform:* 	Ubuntu Linux 16.04 LTS, R-release, GCC
*Submitted:* 	1 hour 55 minutes 18.7 seconds ago
*Build time:* 	1 hour 49 minutes 23.6 seconds


      ERRORS:

* checking examples ... ERROR
Running examples in ?Ecfun-Ex.R? failed
The error most likely occurred in:

> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
> ### Name: interpPairs
> ### Title: interpolate between pairs of vectors in a list
> ### Aliases: interpPairs interpPairs.call interpPairs.function
> ###   interpPairs.list
> ### Keywords: manip
> 
> ### ** Examples
> 
> ###
> ###
> ### 1.  interpPairs.function
> ###
> ###
> 
> ##
> ## 1.1.  simple 
> ##
> plot0 <- quote(plot(0))
> plot0. <- interpPairs(plot0)
> # check 
> ## Don't show: 
> stopifnot(
+ ## End(Don't show)
+ all.equal(plot0, plot0.)
+ ## Don't show:
+ )
> ## End(Don't show)
> 
> ##
> ## 1.2.  no op 
> ##
> noop <- interpPairs(plot0, iFrame=-1)
> # check
> ## Don't show: 
> stopifnot(
+ ## End(Don't show)
+ all.equal(noop, enquote(NULL))
+ ## Don't show:
+ )
> ## End(Don't show)
> 
> ##
> ## 1.3.  a more typical example
> ## example function for interpPairs 
> tstPlot <- function(){
+   plot(1:2, 1:2, type='n')
+   lines(firstFrame=1:3,
+         lastFrame=4,
+         x.1=seq(1, 2, .5),
+         y.1=x,
+         z.0=0, z.1=1,
+         txt.1=c('CRAN is', 'good', '...'),
+         col='red')
+ }
> tstbo <- body(tstPlot)
> iPlot <- interpPairs(tstbo[[2]])
> # check 
> iP <- quote(plot(1:2, 1:2, type='n'))
> ## Don't show: 
> stopifnot(
+ ## End(Don't show)
+ all.equal(iPlot, iP)
+ ## Don't show:
+ )
> ## End(Don't show)
> 
> iLines <- interpPairs(tstbo[[3]], nFrames=5, iFrame=2)
> # check:  
> # .proportion = (iFrame-firstFrame)/(lastFrame-firstFrame)
> #  = c(1/3, 0, -1/3)
> # if x.0 = 0 and y.0 = 0 by default:  
> iL <- quote(linex(x=c(1/3, 0), y=c(1/9, 0), z=c(1/3, 0), 
+            tst=c('CR', '')))
> ##
> ##**** This example seems to give the wrong answer
> ##**** 2014-06-03:  Ignore for the moment 
> ##           
> #all.equal(iLines, iL)
> 
> ##
> ## 1.4.  Don't throw a cryptic error with NULL 
> ##
> ip0 <- interpPairs(quote(text(labels.1=NULL)))
>   
>   
> ###
> ###
> ### 2.  interpPairs.list
> ###
> ###
> 
> ##
> ## 2.1.  (x.0, y.0, x.1, y.1) -> (x,y)
> ##
> tstList <- list(x.0=1:5, y.0=5:9, y.1=9:5, x.1=9,
+                 ignore=letters, col=1:5)
> xy <- interpPairs(tstList, 0.1)
> # check 
> xy. <- list(ignore=letters, col=1:5, 
+             x=1:5 + 0.1*(9-1:5),
+             y=5:9 + 0.1*(9:5-5:9) )
> # New columns, 'x' and 'y', come after 
> # columns 'col' and 'ignore' already in tstList 
> ## Don't show: 
> stopifnot(
+ ## End(Don't show)
+ all.equal(xy, xy.)
+ ## Don't show:
+ )
> ## End(Don't show)
> 
> ##
> ## 2.2.  Select the middle 2:  
> ##      x=(1-(0,1))*3:4+0:1*0=(3,0)
> ##
> xy0 <- interpPairs(tstList[-4], c(-Inf, -1, 0, 1, 2) )
> # check 
> xy0. <- list(ignore=letters, col=3:4, x=c(3,0), y=7:6)
> 
> ## Don't show: 
> stopifnot(
+ ## End(Don't show)
+ all.equal(xy0, xy0.)
+ ## Don't show:
+ )
> ## End(Don't show)
> ##
> ## 2.3.  Null interpolation because of absence of y.1 and x.0  
> ##
> xy02 <- interpPairs(tstList[c(2, 4)], 0.1)
> # check 
> #### NOT the current default answer;  revisit later.  
> xy02. <- list(y=5:9, x=9)
> 
> # NOTE:  length(x) = 1 = length(x.1) in testList
> #all.equal(xy02, xy02.)
> 
> ##
> ## 2.4.  Select an empty list (make sure this works)
> ##
> x0 <- interpPairs(list(), 0:1)
Warning message:
In checkNames(object, avoid = pairs[c(1, 4, 2, 5)]) :
   object:  names = NULL; returning make.names(character(length(x))), TRUE)
> # check 
> x0. <- list()
> names(x0.) <- character(0)
> ## Don't show: 
> stopifnot(
+ ## End(Don't show)
+ all.equal(x0, x0.)
+ ## Don't show:
+ )
> ## End(Don't show)
> 
> ##
> ## 2.5.  subset one vector only 
> ##
> xyz <- interpPairs(list(x=1:4), c(-1, 0, 1, 2))
> # check 
> xyz. <- list(x=2:3)
> ## Don't show: 
> stopifnot(
+ ## End(Don't show)
+ all.equal(xyz, xyz.)
+ ## Don't show:
+ )
> ## End(Don't show)
> 
> ##
> ## 2.6.  with elements of class call
> ##
> xc <- interpPairs(list(x=1:3, y=quote(x+sin(pi*x/6))), 0:1)
> # check
> xc. <- list(x=1:3, y=quote(x+sin(pi*x/6)))
> ## Don't show: 
> stopifnot(
+ ## End(Don't show)
+ all.equal(xc, xc.)
+ ## Don't show:
+ )
> ## End(Don't show)
> 
> ##
> ## 2.7. text
> ##
> #  2 arguments 
> j.5 <- interpPairs(list(x.0='', x.1=c('a', 'bc', 'def')), 0.5)
> # check  
> j.5. <- list(x=c('a', 'bc', ''))
> ## Don't show: 
> stopifnot(
+ ## End(Don't show)
+ all.equal(j.5, j.5.)
+ ## Don't show:
+ )
> ## End(Don't show)
> 
> ##
> ##  2.8.  text, 1 argument as a list 
> ##
> j.50 <- interpPairs(list(x.1=c('a', 'bc', 'def')), 0.5)
> # check  
> ## Don't show: 
> stopifnot(
+ ## End(Don't show)
+ all.equal(j.50, j.5.)
+ ## Don't show:
+ )
> ## End(Don't show)
> 
> ##
> ## 2.9.  A more complicated example with elements to eval
> ##
> logo.jpg <- paste(R.home(), "doc", "html", "logo.jpg",
+                   sep = .Platform$file.sep)
> if(require(jpeg)){
+   Rlogo <- try(readJPEG(logo.jpg))
+   if(!inherits(Rlogo, 'try-error')){
+ # argument list for a call to rasterImage or rasterImageAdj
+     RlogoLoc <- list(image=Rlogo,
+       xleft.0 = c(NZ=176.5,CH=172,US=171,
+                   CN=177,RU= 9.5,UK= 8),
+       xleft.1 = c(NZ=176.5,CH=  9,US=-73.5,
+                   CN=125,RU= 37, UK= 2),
+       ybottom.0=c(NZ=-37,  CH=-34,US=-34,
+                   CN=-33,RU= 48, UK=47),
+       ybottom.1=c(NZ=-37,  CH= 47,US= 46,
+                   CN= 32,RU=55.6,UK=55),
+       xright=quote(xleft+xinch(0.6)),
+       ytop = quote(ybottom+yinch(0.6)),
+       angle.0 =0,
+       angle.1 =c(NZ=0,CH=3*360,US=5*360,
+                  CN=2*360,RU=360,UK=360)
+     )
+
+     RlogoInterp <- interpPairs(RlogoLoc,
+             .proportion=rep(c(0, -1), c(2, 4)) )
+ # check
+ ## Don't show:
+ stopifnot(
+ ## End(Don't show)
+ all.equal(names(RlogoInterp),
+    c('image', 'xright', 'ytop', 'xleft', 'ybottom', 'angle'))
+ ## Don't show:
+ )
+ ## End(Don't show)
+ }
+ # NOTE:  'xleft', and 'ybottom' were created in interpPairs,
+ # and therefore come after 'xright' and 'ytop', which were
+ # already there.
+
+ ##
+ ## 2.10.  using envir
+ ##
+   RlogoDiag <- list(x0=quote(Rlogo.$xleft),
+                   y0=quote(Rlogo.$ybottom),
+                   x1=quote(Rlogo.$xright),
+                   y1=quote(Rlogo.$ytop) )
+
+   RlogoD <- interpPairs(RlogoDiag, .p=1,
+                     envir=list(Rlogo.=RlogoInterp) )
+ ## Don't show:
+ stopifnot(
+ ## End(Don't show)
+ all.equal(RlogoD, RlogoDiag)
+ ## Don't show:
+ )
+ ## End(Don't show)
+ }
Loading required package: jpeg
Error in readJPEG(logo.jpg) : unable to open /usr/lib/R/doc/html/logo.jpg
Error in interpPairs.list(RlogoDiag, .p = 1, envir = list(Rlogo. = RlogoInterp)) :
   object 'RlogoInterp' not found
Calls: interpPairs -> interpPairs.list
Execution halted


      NOTES:

* checking CRAN incoming feasibility ... NOTE
Maintainer: ?Spencer Graves<spencer.graves at effectivedefense.org>?

Found the following (possibly) invalid URLs:
   URL:https://www.measuringworth.com/
     From: inst/doc/UpdatingUSGDPpresidents.html
     Status: Error
     Message: libcurl error code 60:
       	SSL certificate problem: unable to get local issuer certificate
       	(Status without verification: OK)

* checking Rd cross-references ... NOTE
Packages unavailable to check Rd xrefs: ?EnvStats?, ?drc?, ?zoo?, ?prodlim?, ?TRAMPR?

See the full build log: HTML 
<https://builder.r-hub.io/status/Ecfun_0.2-2.tar.gz-a5518fc2c19c4cd191a5d67b55c45603>, 
text 
<https://builder.r-hub.io/status/original/Ecfun_0.2-2.tar.gz-a5518fc2c19c4cd191a5d67b55c45603>, 
artifacts 
<https://artifacts.r-hub.io/Ecfun_0.2-2.tar.gz-a5518fc2c19c4cd191a5d67b55c45603>. 

Have questions, suggestions or want to report a bug? Please file an 
issue ticket at GitHub <https://github.com/r-hub/rhub/issues>. Thank You 
for using the R-hub builder.

(c) 2016 The R Consortium

	


	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Mon Feb  3 03:47:52 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sun, 2 Feb 2020 21:47:52 -0500
Subject: [R-pkg-devel] "try" malfunctions on Ubuntu Linux 16.04 LTS,
 R-release, GCC
In-Reply-To: <00df79bb-14a7-d810-71b3-eadd7cd32103@effectivedefense.org>
References: <20200202232710.1.F960CD2D2556F532@rhub.io>
 <00df79bb-14a7-d810-71b3-eadd7cd32103@effectivedefense.org>
Message-ID: <adff3a99-8776-4bc9-b371-5be556414a2f@gmail.com>


  Maybe an Rhub glitch.  I just ran R CMD check with a recent r-devel
(2019-12-03 r77509) on Ubuntu 16.04 with no problems.

On 2020-02-02 9:15 p.m., Spencer Graves wrote:
> Hello, All:
> 
> 
>  ????? devtools::check_rhub failed to trap an error wrapped in "try", 
> per the email below.? This came from running 
> devtools::check_rhub(Ecfun_dir), where Ecfun_dir = the path to a copy of 
> "https://github.com/sbgraves237/Ecfun".
> 
> 
>  ????? This is the development version of Ecfun, which I want to submit 
> to CRAN as soon as I can do so without offending the sensibilities of 
> the overworked CRAN maintainers.
> 
> 
>  ????? Suggestions?
>  ????? Thanks,
>  ????? Spencer Graves
> 
> 
> -------- Forwarded Message --------
> Subject: 	Ecfun 0.2-2: ERROR
> Date: 	Sun, 02 Feb 2020 23:27:10 +0000
> From: 	R-hub builder <support at rhub.io>
> To: 	spencer.graves at effectivedefense.org
> 
> 
> 
> Ecfun 0.2-2: ERROR
> 
> 	
> Ecfun 0.2-2: ERROR
> *Build ID:* 	|Ecfun_0.2-2.tar.gz-a5518fc2c19c4cd191a5d67b55c45603|
> *Platform:* 	Ubuntu Linux 16.04 LTS, R-release, GCC
> *Submitted:* 	1 hour 55 minutes 18.7 seconds ago
> *Build time:* 	1 hour 49 minutes 23.6 seconds
> 
> 
>       ERRORS:
> 
> * checking examples ... ERROR
> Running examples in ?Ecfun-Ex.R? failed
> The error most likely occurred in:
> 
>> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>> ### Name: interpPairs
>> ### Title: interpolate between pairs of vectors in a list
>> ### Aliases: interpPairs interpPairs.call interpPairs.function
>> ###   interpPairs.list
>> ### Keywords: manip
>>
>> ### ** Examples
>>
>> ###
>> ###
>> ### 1.  interpPairs.function
>> ###
>> ###
>>
>> ##
>> ## 1.1.  simple 
>> ##
>> plot0 <- quote(plot(0))
>> plot0. <- interpPairs(plot0)
>> # check 
>> ## Don't show: 
>> stopifnot(
> + ## End(Don't show)
> + all.equal(plot0, plot0.)
> + ## Don't show:
> + )
>> ## End(Don't show)
>>
>> ##
>> ## 1.2.  no op 
>> ##
>> noop <- interpPairs(plot0, iFrame=-1)
>> # check
>> ## Don't show: 
>> stopifnot(
> + ## End(Don't show)
> + all.equal(noop, enquote(NULL))
> + ## Don't show:
> + )
>> ## End(Don't show)
>>
>> ##
>> ## 1.3.  a more typical example
>> ## example function for interpPairs 
>> tstPlot <- function(){
> +   plot(1:2, 1:2, type='n')
> +   lines(firstFrame=1:3,
> +         lastFrame=4,
> +         x.1=seq(1, 2, .5),
> +         y.1=x,
> +         z.0=0, z.1=1,
> +         txt.1=c('CRAN is', 'good', '...'),
> +         col='red')
> + }
>> tstbo <- body(tstPlot)
>> iPlot <- interpPairs(tstbo[[2]])
>> # check 
>> iP <- quote(plot(1:2, 1:2, type='n'))
>> ## Don't show: 
>> stopifnot(
> + ## End(Don't show)
> + all.equal(iPlot, iP)
> + ## Don't show:
> + )
>> ## End(Don't show)
>>
>> iLines <- interpPairs(tstbo[[3]], nFrames=5, iFrame=2)
>> # check:  
>> # .proportion = (iFrame-firstFrame)/(lastFrame-firstFrame)
>> #  = c(1/3, 0, -1/3)
>> # if x.0 = 0 and y.0 = 0 by default:  
>> iL <- quote(linex(x=c(1/3, 0), y=c(1/9, 0), z=c(1/3, 0), 
> +            tst=c('CR', '')))
>> ##
>> ##**** This example seems to give the wrong answer
>> ##**** 2014-06-03:  Ignore for the moment 
>> ##           
>> #all.equal(iLines, iL)
>>
>> ##
>> ## 1.4.  Don't throw a cryptic error with NULL 
>> ##
>> ip0 <- interpPairs(quote(text(labels.1=NULL)))
>>   
>>   
>> ###
>> ###
>> ### 2.  interpPairs.list
>> ###
>> ###
>>
>> ##
>> ## 2.1.  (x.0, y.0, x.1, y.1) -> (x,y)
>> ##
>> tstList <- list(x.0=1:5, y.0=5:9, y.1=9:5, x.1=9,
> +                 ignore=letters, col=1:5)
>> xy <- interpPairs(tstList, 0.1)
>> # check 
>> xy. <- list(ignore=letters, col=1:5, 
> +             x=1:5 + 0.1*(9-1:5),
> +             y=5:9 + 0.1*(9:5-5:9) )
>> # New columns, 'x' and 'y', come after 
>> # columns 'col' and 'ignore' already in tstList 
>> ## Don't show: 
>> stopifnot(
> + ## End(Don't show)
> + all.equal(xy, xy.)
> + ## Don't show:
> + )
>> ## End(Don't show)
>>
>> ##
>> ## 2.2.  Select the middle 2:  
>> ##      x=(1-(0,1))*3:4+0:1*0=(3,0)
>> ##
>> xy0 <- interpPairs(tstList[-4], c(-Inf, -1, 0, 1, 2) )
>> # check 
>> xy0. <- list(ignore=letters, col=3:4, x=c(3,0), y=7:6)
>>
>> ## Don't show: 
>> stopifnot(
> + ## End(Don't show)
> + all.equal(xy0, xy0.)
> + ## Don't show:
> + )
>> ## End(Don't show)
>> ##
>> ## 2.3.  Null interpolation because of absence of y.1 and x.0  
>> ##
>> xy02 <- interpPairs(tstList[c(2, 4)], 0.1)
>> # check 
>> #### NOT the current default answer;  revisit later.  
>> xy02. <- list(y=5:9, x=9)
>>
>> # NOTE:  length(x) = 1 = length(x.1) in testList
>> #all.equal(xy02, xy02.)
>>
>> ##
>> ## 2.4.  Select an empty list (make sure this works)
>> ##
>> x0 <- interpPairs(list(), 0:1)
> Warning message:
> In checkNames(object, avoid = pairs[c(1, 4, 2, 5)]) :
>    object:  names = NULL; returning make.names(character(length(x))), TRUE)
>> # check 
>> x0. <- list()
>> names(x0.) <- character(0)
>> ## Don't show: 
>> stopifnot(
> + ## End(Don't show)
> + all.equal(x0, x0.)
> + ## Don't show:
> + )
>> ## End(Don't show)
>>
>> ##
>> ## 2.5.  subset one vector only 
>> ##
>> xyz <- interpPairs(list(x=1:4), c(-1, 0, 1, 2))
>> # check 
>> xyz. <- list(x=2:3)
>> ## Don't show: 
>> stopifnot(
> + ## End(Don't show)
> + all.equal(xyz, xyz.)
> + ## Don't show:
> + )
>> ## End(Don't show)
>>
>> ##
>> ## 2.6.  with elements of class call
>> ##
>> xc <- interpPairs(list(x=1:3, y=quote(x+sin(pi*x/6))), 0:1)
>> # check
>> xc. <- list(x=1:3, y=quote(x+sin(pi*x/6)))
>> ## Don't show: 
>> stopifnot(
> + ## End(Don't show)
> + all.equal(xc, xc.)
> + ## Don't show:
> + )
>> ## End(Don't show)
>>
>> ##
>> ## 2.7. text
>> ##
>> #  2 arguments 
>> j.5 <- interpPairs(list(x.0='', x.1=c('a', 'bc', 'def')), 0.5)
>> # check  
>> j.5. <- list(x=c('a', 'bc', ''))
>> ## Don't show: 
>> stopifnot(
> + ## End(Don't show)
> + all.equal(j.5, j.5.)
> + ## Don't show:
> + )
>> ## End(Don't show)
>>
>> ##
>> ##  2.8.  text, 1 argument as a list 
>> ##
>> j.50 <- interpPairs(list(x.1=c('a', 'bc', 'def')), 0.5)
>> # check  
>> ## Don't show: 
>> stopifnot(
> + ## End(Don't show)
> + all.equal(j.50, j.5.)
> + ## Don't show:
> + )
>> ## End(Don't show)
>>
>> ##
>> ## 2.9.  A more complicated example with elements to eval
>> ##
>> logo.jpg <- paste(R.home(), "doc", "html", "logo.jpg",
> +                   sep = .Platform$file.sep)
>> if(require(jpeg)){
> +   Rlogo <- try(readJPEG(logo.jpg))
> +   if(!inherits(Rlogo, 'try-error')){
> + # argument list for a call to rasterImage or rasterImageAdj
> +     RlogoLoc <- list(image=Rlogo,
> +       xleft.0 = c(NZ=176.5,CH=172,US=171,
> +                   CN=177,RU= 9.5,UK= 8),
> +       xleft.1 = c(NZ=176.5,CH=  9,US=-73.5,
> +                   CN=125,RU= 37, UK= 2),
> +       ybottom.0=c(NZ=-37,  CH=-34,US=-34,
> +                   CN=-33,RU= 48, UK=47),
> +       ybottom.1=c(NZ=-37,  CH= 47,US= 46,
> +                   CN= 32,RU=55.6,UK=55),
> +       xright=quote(xleft+xinch(0.6)),
> +       ytop = quote(ybottom+yinch(0.6)),
> +       angle.0 =0,
> +       angle.1 =c(NZ=0,CH=3*360,US=5*360,
> +                  CN=2*360,RU=360,UK=360)
> +     )
> +
> +     RlogoInterp <- interpPairs(RlogoLoc,
> +             .proportion=rep(c(0, -1), c(2, 4)) )
> + # check
> + ## Don't show:
> + stopifnot(
> + ## End(Don't show)
> + all.equal(names(RlogoInterp),
> +    c('image', 'xright', 'ytop', 'xleft', 'ybottom', 'angle'))
> + ## Don't show:
> + )
> + ## End(Don't show)
> + }
> + # NOTE:  'xleft', and 'ybottom' were created in interpPairs,
> + # and therefore come after 'xright' and 'ytop', which were
> + # already there.
> +
> + ##
> + ## 2.10.  using envir
> + ##
> +   RlogoDiag <- list(x0=quote(Rlogo.$xleft),
> +                   y0=quote(Rlogo.$ybottom),
> +                   x1=quote(Rlogo.$xright),
> +                   y1=quote(Rlogo.$ytop) )
> +
> +   RlogoD <- interpPairs(RlogoDiag, .p=1,
> +                     envir=list(Rlogo.=RlogoInterp) )
> + ## Don't show:
> + stopifnot(
> + ## End(Don't show)
> + all.equal(RlogoD, RlogoDiag)
> + ## Don't show:
> + )
> + ## End(Don't show)
> + }
> Loading required package: jpeg
> Error in readJPEG(logo.jpg) : unable to open /usr/lib/R/doc/html/logo.jpg
> Error in interpPairs.list(RlogoDiag, .p = 1, envir = list(Rlogo. = RlogoInterp)) :
>    object 'RlogoInterp' not found
> Calls: interpPairs -> interpPairs.list
> Execution halted
> 
> 
>       NOTES:
> 
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?Spencer Graves<spencer.graves at effectivedefense.org>?
> 
> Found the following (possibly) invalid URLs:
>    URL:https://www.measuringworth.com/
>      From: inst/doc/UpdatingUSGDPpresidents.html
>      Status: Error
>      Message: libcurl error code 60:
>        	SSL certificate problem: unable to get local issuer certificate
>        	(Status without verification: OK)
> 
> * checking Rd cross-references ... NOTE
> Packages unavailable to check Rd xrefs: ?EnvStats?, ?drc?, ?zoo?, ?prodlim?, ?TRAMPR?
> 
> See the full build log: HTML 
> <https://builder.r-hub.io/status/Ecfun_0.2-2.tar.gz-a5518fc2c19c4cd191a5d67b55c45603>, 
> text 
> <https://builder.r-hub.io/status/original/Ecfun_0.2-2.tar.gz-a5518fc2c19c4cd191a5d67b55c45603>, 
> artifacts 
> <https://artifacts.r-hub.io/Ecfun_0.2-2.tar.gz-a5518fc2c19c4cd191a5d67b55c45603>. 
> 
> Have questions, suggestions or want to report a bug? Please file an 
> issue ticket at GitHub <https://github.com/r-hub/rhub/issues>. Thank You 
> for using the R-hub builder.
> 
> (c) 2016 The R Consortium
> 
> 	
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From edd @end|ng |rom deb|@n@org  Mon Feb  3 06:27:48 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sun, 2 Feb 2020 23:27:48 -0600
Subject: [R-pkg-devel] "try" malfunctions on Ubuntu Linux 16.04 LTS,
 R-release, GCC
In-Reply-To: <adff3a99-8776-4bc9-b371-5be556414a2f@gmail.com>
References: <20200202232710.1.F960CD2D2556F532@rhub.io>
 <00df79bb-14a7-d810-71b3-eadd7cd32103@effectivedefense.org>
 <adff3a99-8776-4bc9-b371-5be556414a2f@gmail.com>
Message-ID: <24119.44884.369255.390813@rob.eddelbuettel.com>


On 2 February 2020 at 21:47, Ben Bolker wrote:
|   Maybe an Rhub glitch.  I just ran R CMD check with a recent r-devel
| (2019-12-03 r77509) on Ubuntu 16.04 with no problems.

Is there a reason that keeps _both_ of you on Ubuntu 16.04 which has been
replaced _nearly two years ago_ by the subsequent LTS release 18.04 ?

Michael works hard to provide _an awesome_ experience using the current LTS
release_ 18.04 that I am really hard-pressed to see why 16.04 would matter.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Mon Feb  3 07:20:38 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 3 Feb 2020 00:20:38 -0600
Subject: [R-pkg-devel] "try" malfunctions on Ubuntu Linux 16.04 LTS,
 R-release, GCC
In-Reply-To: <24119.44884.369255.390813@rob.eddelbuettel.com>
References: <20200202232710.1.F960CD2D2556F532@rhub.io>
 <00df79bb-14a7-d810-71b3-eadd7cd32103@effectivedefense.org>
 <adff3a99-8776-4bc9-b371-5be556414a2f@gmail.com>
 <24119.44884.369255.390813@rob.eddelbuettel.com>
Message-ID: <5b0dcd25-d106-e6e2-26c3-d0521e3caa95@effectivedefense.org>

Hi, Dirk:


 ????? The short answer is that's part of what's on "rhub".


 ????? When I run devtools::check_rhub, I get emails with test results 
from three platforms:? (1) Windows Server 2008 R2 SP1, R-devel, 32/64 
bit.? (2) Ubuntu Linux 16.04 LTS, R-release, GCC. And (3) Fedora Linux, 
R-devel, clang, gfortran.? I've been getting a NOTE of "Packages 
unavailable to check Rd xrefs: ?EnvStats?, ?drc?, ?zoo?, ?prodlim?, 
?TRAMPR?" from the Windows and Fedora tests and the "try" malfunction 
that I reported from Ubuntu 16.04 LTS.


 ????? I don't know who maintains rhub, but I would naively think that's 
a separate issue from the "try" malfunction that I reported.


 ????? Spencer


On 2020-02-02 23:27, Dirk Eddelbuettel wrote:
> On 2 February 2020 at 21:47, Ben Bolker wrote:
> |   Maybe an Rhub glitch.  I just ran R CMD check with a recent r-devel
> | (2019-12-03 r77509) on Ubuntu 16.04 with no problems.
>
> Is there a reason that keeps _both_ of you on Ubuntu 16.04 which has been
> replaced _nearly two years ago_ by the subsequent LTS release 18.04 ?
>
> Michael works hard to provide _an awesome_ experience using the current LTS
> release_ 18.04 that I am really hard-pressed to see why 16.04 would matter.
>
> Dirk
>


From |uc@r @end|ng |rom |edor@project@org  Mon Feb  3 10:06:12 2020
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Mon, 3 Feb 2020 10:06:12 +0100
Subject: [R-pkg-devel] "try" malfunctions on Ubuntu Linux 16.04 LTS,
 R-release, GCC
In-Reply-To: <00df79bb-14a7-d810-71b3-eadd7cd32103@effectivedefense.org>
References: <20200202232710.1.F960CD2D2556F532@rhub.io>
 <00df79bb-14a7-d810-71b3-eadd7cd32103@effectivedefense.org>
Message-ID: <CALEXWq1beDTxeUx0eQH2HqpuyOC8Ev0psw=2mLTjRFsuSGRG9w@mail.gmail.com>

On Mon, 3 Feb 2020 at 03:16, Spencer Graves
<spencer.graves at effectivedefense.org> wrote:
>
> Hello, All:
>
>
>        devtools::check_rhub failed to trap an error wrapped in "try",
> per the email below.  This came from running
> devtools::check_rhub(Ecfun_dir), where Ecfun_dir = the path to a copy of
> "https://github.com/sbgraves237/Ecfun".

That's improbable.

>        This is the development version of Ecfun, which I want to submit
> to CRAN as soon as I can do so without offending the sensibilities of
> the overworked CRAN maintainers.
>
>
>        Suggestions?
>        Thanks,
>        Spencer Graves
>
>
> -------- Forwarded Message --------
> Subject:        Ecfun 0.2-2: ERROR
> Date:   Sun, 02 Feb 2020 23:27:10 +0000
> From:   R-hub builder <support at rhub.io>
> To:     spencer.graves at effectivedefense.org
>

<snip>

> > ## 2.9.  A more complicated example with elements to eval
> > ##
> > logo.jpg <- paste(R.home(), "doc", "html", "logo.jpg",
> +                   sep = .Platform$file.sep)
> > if(require(jpeg)){
> +   Rlogo <- try(readJPEG(logo.jpg))
> +   if(!inherits(Rlogo, 'try-error')){
> + # argument list for a call to rasterImage or rasterImageAdj
> +     RlogoLoc <- list(image=Rlogo,
> +       xleft.0 = c(NZ=176.5,CH=172,US=171,
> +                   CN=177,RU= 9.5,UK= 8),
> +       xleft.1 = c(NZ=176.5,CH=  9,US=-73.5,
> +                   CN=125,RU= 37, UK= 2),
> +       ybottom.0=c(NZ=-37,  CH=-34,US=-34,
> +                   CN=-33,RU= 48, UK=47),
> +       ybottom.1=c(NZ=-37,  CH= 47,US= 46,
> +                   CN= 32,RU=55.6,UK=55),
> +       xright=quote(xleft+xinch(0.6)),
> +       ytop = quote(ybottom+yinch(0.6)),
> +       angle.0 =0,
> +       angle.1 =c(NZ=0,CH=3*360,US=5*360,
> +                  CN=2*360,RU=360,UK=360)
> +     )
> +
> +     RlogoInterp <- interpPairs(RlogoLoc,
> +             .proportion=rep(c(0, -1), c(2, 4)) )
> + # check
> + ## Don't show:
> + stopifnot(
> + ## End(Don't show)
> + all.equal(names(RlogoInterp),
> +    c('image', 'xright', 'ytop', 'xleft', 'ybottom', 'angle'))
> + ## Don't show:
> + )
> + ## End(Don't show)
> + }
> + # NOTE:  'xleft', and 'ybottom' were created in interpPairs,
> + # and therefore come after 'xright' and 'ytop', which were
> + # already there.
> +
> + ##
> + ## 2.10.  using envir
> + ##
> +   RlogoDiag <- list(x0=quote(Rlogo.$xleft),
> +                   y0=quote(Rlogo.$ybottom),
> +                   x1=quote(Rlogo.$xright),
> +                   y1=quote(Rlogo.$ytop) )
> +
> +   RlogoD <- interpPairs(RlogoDiag, .p=1,
> +                     envir=list(Rlogo.=RlogoInterp) )
> + ## Don't show:
> + stopifnot(
> + ## End(Don't show)
> + all.equal(RlogoD, RlogoDiag)
> + ## Don't show:
> + )
> + ## End(Don't show)
> + }
> Loading required package: jpeg
> Error in readJPEG(logo.jpg) : unable to open /usr/lib/R/doc/html/logo.jpg
> Error in interpPairs.list(RlogoDiag, .p = 1, envir = list(Rlogo. = RlogoInterp)) :
>    object 'RlogoInterp' not found
> Calls: interpPairs -> interpPairs.list
> Execution halted

There it is: "Error in interpPairs.list [...] 'RlogoInterp' not
found". That's the error, not the "try". You see the error message
because you didn't specify "quiet=TRUE", but that doesn't mean that R
is failing to catch the error. So the second error is the one that
fails.

I?aki


From pro|jcn@@h @end|ng |rom gm@||@com  Mon Feb  3 15:03:38 2020
From: pro|jcn@@h @end|ng |rom gm@||@com (profjohn)
Date: Mon, 3 Feb 2020 09:03:38 -0500
Subject: [R-pkg-devel] "try" malfunctions on Ubuntu Linux 16.04 LTS,
 R-release, GCC
In-Reply-To: <24119.44884.369255.390813@rob.eddelbuettel.com>
References: <20200202232710.1.F960CD2D2556F532@rhub.io>
 <00df79bb-14a7-d810-71b3-eadd7cd32103@effectivedefense.org>
 <adff3a99-8776-4bc9-b371-5be556414a2f@gmail.com>
 <24119.44884.369255.390813@rob.eddelbuettel.com>
Message-ID: <ccea7bed-8e6b-8c9e-8cd0-6443faf2c13c@gmail.com>

Looks like Spencer's issue solved in another post.

And this isn't a criticism of Dirk's contribution, just a partial
explanation of some of the noise that occurs.

I use Linux Mint -- family members are still recovering from Win XP.
But LM 18.x is based on Ubuntu 16.04. So I found recently that the
CRAN check_packages_in_dir() (if I remember the syntax) and Gabor C's
package revdepcheck didn't work. Latter reported as an issue.

On two of my machines I have LM 19.x. However, I'm travelling, and so
I tried upgrading one of my laptops with mintupgrade. Bad idea -- got a
very weird lockup situation -- I could boot to a login screen, but that
would accept the password and return to the login screen. Had to do a
bare metal reinstall. Painful, but revdepcheck now works and revealed a
small but vital typo in one line of my package. Sigh.

While there are huge benefits to upgrading, there is pain. It's that
pain that keeps people on OS versions that are older but still in the
LTS period.

Best, JN


On 2/3/20 12:27 AM, Dirk Eddelbuettel wrote:
> 
> On 2 February 2020 at 21:47, Ben Bolker wrote:
> |   Maybe an Rhub glitch.  I just ran R CMD check with a recent r-devel
> | (2019-12-03 r77509) on Ubuntu 16.04 with no problems.
> 
> Is there a reason that keeps _both_ of you on Ubuntu 16.04 which has been
> replaced _nearly two years ago_ by the subsequent LTS release 18.04 ?
> 
> Michael works hard to provide _an awesome_ experience using the current LTS
> release_ 18.04 that I am really hard-pressed to see why 16.04 would matter.
> 
> Dirk
>


From bbo|ker @end|ng |rom gm@||@com  Mon Feb  3 15:15:44 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Mon, 3 Feb 2020 09:15:44 -0500
Subject: [R-pkg-devel] "try" malfunctions on Ubuntu Linux 16.04 LTS,
 R-release, GCC
In-Reply-To: <ccea7bed-8e6b-8c9e-8cd0-6443faf2c13c@gmail.com>
References: <20200202232710.1.F960CD2D2556F532@rhub.io>
 <00df79bb-14a7-d810-71b3-eadd7cd32103@effectivedefense.org>
 <adff3a99-8776-4bc9-b371-5be556414a2f@gmail.com>
 <24119.44884.369255.390813@rob.eddelbuettel.com>
 <ccea7bed-8e6b-8c9e-8cd0-6443faf2c13c@gmail.com>
Message-ID: <16421343-e7a4-d4b0-ef04-0aa70c6eb59e@gmail.com>



> 
> While there are huge benefits to upgrading, there is pain. It's that
> pain that keeps people on OS versions that are older but still in the
> LTS period.

   More or less what I was going to say.
> 
> Best, JN
> 
> 
> On 2/3/20 12:27 AM, Dirk Eddelbuettel wrote:
>>
>> On 2 February 2020 at 21:47, Ben Bolker wrote:
>> |   Maybe an Rhub glitch.  I just ran R CMD check with a recent r-devel
>> | (2019-12-03 r77509) on Ubuntu 16.04 with no problems.
>>
>> Is there a reason that keeps _both_ of you on Ubuntu 16.04 which has been
>> replaced _nearly two years ago_ by the subsequent LTS release 18.04 ?
>>
>> Michael works hard to provide _an awesome_ experience using the current LTS
>> release_ 18.04 that I am really hard-pressed to see why 16.04 would matter.
>>
>> Dirk
>>


From edd @end|ng |rom deb|@n@org  Mon Feb  3 15:21:50 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 3 Feb 2020 08:21:50 -0600
Subject: [R-pkg-devel] "try" malfunctions on Ubuntu Linux 16.04 LTS,
 R-release, GCC
In-Reply-To: <ccea7bed-8e6b-8c9e-8cd0-6443faf2c13c@gmail.com>
References: <20200202232710.1.F960CD2D2556F532@rhub.io>
 <00df79bb-14a7-d810-71b3-eadd7cd32103@effectivedefense.org>
 <adff3a99-8776-4bc9-b371-5be556414a2f@gmail.com>
 <24119.44884.369255.390813@rob.eddelbuettel.com>
 <ccea7bed-8e6b-8c9e-8cd0-6443faf2c13c@gmail.com>
Message-ID: <24120.11390.32161.48424@rob.eddelbuettel.com>


On 3 February 2020 at 09:03, profjohn wrote:
| While there are huge benefits to upgrading, there is pain. It's that

We have a dedicated mailing list r-sig-debian for use of R on operating
systems that are .deb based. It is low volume, and has high signal / noise.
So I would cordially invite everybody who thinks he or she could benefit from
asking questions there to sign up.

My question was indirectly answered by Spencer: he actually did not make an
_explicit_ choice to use 16.04. He used a helper function dispatching to a
service still running the rather old release.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Mon Feb  3 20:30:11 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 3 Feb 2020 13:30:11 -0600
Subject: [R-pkg-devel] finding "logo.jpg" [was: "try" malfunctions on Ubuntu
 Linux 16.04 LTS, R-release, GCC]
In-Reply-To: <CALEXWq1beDTxeUx0eQH2HqpuyOC8Ev0psw=2mLTjRFsuSGRG9w@mail.gmail.com>
References: <20200202232710.1.F960CD2D2556F532@rhub.io>
 <00df79bb-14a7-d810-71b3-eadd7cd32103@effectivedefense.org>
 <CALEXWq1beDTxeUx0eQH2HqpuyOC8Ev0psw=2mLTjRFsuSGRG9w@mail.gmail.com>
Message-ID: <5032c7d1-a201-2931-83ec-133702759a1d@effectivedefense.org>

 ????? Thanks to I?aki Ucar for identifying a second error that 
explained why I still got an error after wrapping one in "try".


 ????? That still leaves a question of how to find a file like 
"logo.jpg" in a platform independant way.


 ??? ? The following had worked for several years and now broke on rhub 
"Ubuntu Linux 16.04 LTS, R-release, GCC" but not on several other 
computers I tried:


 ??? ??????? logo.jpg <- paste(R.home(), "doc", "html", "logo.jpg", sep 
= .Platform$file.sep)


 ????? On that Ubuntu platform, "readJPEG(logo.jpg)" stopped with "Error 
in readJPEG(logo.jpg) : unable to open /usr/lib/R/doc/html/logo.jpg".


 ????? I replaced the above "paste" with the following:


RdocDir <- dir(R.home(), pattern='^doc$', full.names = TRUE)
RhtmlDir <- dir(RdocDir, pattern='^html$', full.names=TRUE)
JPGs <- dir(RhtmlDir, pattern='\\\\.jpg$', full.names=TRUE)
if(length(JPGs)>1){
 ? logoJPG <- paste0(.Platform$file.sep, 'logo.jpg$')
 ? logo.jpg <- grep(logoJPG, JPGs, value=TRUE)
 ? if(length(logo.jpg)>1)logo.jpg <- logo.jpg[1]
 ? if(length(logo.jpg)<1)logo.jpg <- JPGs[1]
} else logo.jpg <- JPGs
if(length(logo.jpg)<1){
 ? cat('logo.jpg not found.\n')
 ? print(R.home())
 ? print(dir(RdocDir))
 ? print(dir(RhtmlDir))
 ? if(!fda::CRAN())stop('logo.jpg not found')
} else {
# length(logo.jpg)==1 so continue:
 ? if(require(jpeg)){
##
## 1.? Shrink as required
##
 ??? Rlogo <- readJPEG(logo.jpg)

...


 ??? ? This gave me no error message, which I believe means that either 
length(logo.jpg) == 1 or fda::CRAN() returns TRUE.? Sadly, I could not 
find the standard test file to see which of these is the case.


 ????? I should proceed to submit the current Ecfun package to CRAN. 
Then I might modify this test sequence to force an error, so I can see 
more what is happening.


 ????? Suggestions?
 ????? Thanks,
 ????? Spencer


On 2020-02-03 03:06, I?aki Ucar wrote:
> On Mon, 3 Feb 2020 at 03:16, Spencer Graves
> <spencer.graves at effectivedefense.org> wrote:
>> Hello, All:
>>
>>
>>         devtools::check_rhub failed to trap an error wrapped in "try",
>> per the email below.  This came from running
>> devtools::check_rhub(Ecfun_dir), where Ecfun_dir = the path to a copy of
>> "https://github.com/sbgraves237/Ecfun".
> That's improbable.
>
>>         This is the development version of Ecfun, which I want to submit
>> to CRAN as soon as I can do so without offending the sensibilities of
>> the overworked CRAN maintainers.
>>
>>
>>         Suggestions?
>>         Thanks,
>>         Spencer Graves
>>
>>
>> -------- Forwarded Message --------
>> Subject:        Ecfun 0.2-2: ERROR
>> Date:   Sun, 02 Feb 2020 23:27:10 +0000
>> From:   R-hub builder <support at rhub.io>
>> To:     spencer.graves at effectivedefense.org
>>
> <snip>
>
>>> ## 2.9.  A more complicated example with elements to eval
>>> ##
>>> logo.jpg <- paste(R.home(), "doc", "html", "logo.jpg",
>> +                   sep = .Platform$file.sep)
>>> if(require(jpeg)){
>> +   Rlogo <- try(readJPEG(logo.jpg))
>> +   if(!inherits(Rlogo, 'try-error')){
>> + # argument list for a call to rasterImage or rasterImageAdj
>> +     RlogoLoc <- list(image=Rlogo,
>> +       xleft.0 = c(NZ=176.5,CH=172,US=171,
>> +                   CN=177,RU= 9.5,UK= 8),
>> +       xleft.1 = c(NZ=176.5,CH=  9,US=-73.5,
>> +                   CN=125,RU= 37, UK= 2),
>> +       ybottom.0=c(NZ=-37,  CH=-34,US=-34,
>> +                   CN=-33,RU= 48, UK=47),
>> +       ybottom.1=c(NZ=-37,  CH= 47,US= 46,
>> +                   CN= 32,RU=55.6,UK=55),
>> +       xright=quote(xleft+xinch(0.6)),
>> +       ytop = quote(ybottom+yinch(0.6)),
>> +       angle.0 =0,
>> +       angle.1 =c(NZ=0,CH=3*360,US=5*360,
>> +                  CN=2*360,RU=360,UK=360)
>> +     )
>> +
>> +     RlogoInterp <- interpPairs(RlogoLoc,
>> +             .proportion=rep(c(0, -1), c(2, 4)) )
>> + # check
>> + ## Don't show:
>> + stopifnot(
>> + ## End(Don't show)
>> + all.equal(names(RlogoInterp),
>> +    c('image', 'xright', 'ytop', 'xleft', 'ybottom', 'angle'))
>> + ## Don't show:
>> + )
>> + ## End(Don't show)
>> + }
>> + # NOTE:  'xleft', and 'ybottom' were created in interpPairs,
>> + # and therefore come after 'xright' and 'ytop', which were
>> + # already there.
>> +
>> + ##
>> + ## 2.10.  using envir
>> + ##
>> +   RlogoDiag <- list(x0=quote(Rlogo.$xleft),
>> +                   y0=quote(Rlogo.$ybottom),
>> +                   x1=quote(Rlogo.$xright),
>> +                   y1=quote(Rlogo.$ytop) )
>> +
>> +   RlogoD <- interpPairs(RlogoDiag, .p=1,
>> +                     envir=list(Rlogo.=RlogoInterp) )
>> + ## Don't show:
>> + stopifnot(
>> + ## End(Don't show)
>> + all.equal(RlogoD, RlogoDiag)
>> + ## Don't show:
>> + )
>> + ## End(Don't show)
>> + }
>> Loading required package: jpeg
>> Error in readJPEG(logo.jpg) : unable to open /usr/lib/R/doc/html/logo.jpg
>> Error in interpPairs.list(RlogoDiag, .p = 1, envir = list(Rlogo. = RlogoInterp)) :
>>     object 'RlogoInterp' not found
>> Calls: interpPairs -> interpPairs.list
>> Execution halted
> There it is: "Error in interpPairs.list [...] 'RlogoInterp' not
> found". That's the error, not the "try". You see the error message
> because you didn't specify "quiet=TRUE", but that doesn't mean that R
> is failing to catch the error. So the second error is the one that
> fails.
>
> I?aki


From bbo|ker @end|ng |rom gm@||@com  Mon Feb  3 21:15:33 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Mon, 3 Feb 2020 15:15:33 -0500
Subject: [R-pkg-devel] 
 finding "logo.jpg" [was: "try" malfunctions on Ubuntu
 Linux 16.04 LTS, R-release, GCC]
In-Reply-To: <5032c7d1-a201-2931-83ec-133702759a1d@effectivedefense.org>
References: <20200202232710.1.F960CD2D2556F532@rhub.io>
 <00df79bb-14a7-d810-71b3-eadd7cd32103@effectivedefense.org>
 <CALEXWq1beDTxeUx0eQH2HqpuyOC8Ev0psw=2mLTjRFsuSGRG9w@mail.gmail.com>
 <5032c7d1-a201-2931-83ec-133702759a1d@effectivedefense.org>
Message-ID: <cf12a07d-a2a9-fb36-e2af-ef850d5143e9@gmail.com>


  Maybe include your own version of logo.jpg in inst/ ?

On 2020-02-03 2:30 p.m., Spencer Graves wrote:
> ????? Thanks to I?aki Ucar for identifying a second error that explained
> why I still got an error after wrapping one in "try".
> 
> 
> ????? That still leaves a question of how to find a file like "logo.jpg"
> in a platform independant way.
> 
> 
> ??? ? The following had worked for several years and now broke on rhub
> "Ubuntu Linux 16.04 LTS, R-release, GCC" but not on several other
> computers I tried:
> 
> 
> ??? ??????? logo.jpg <- paste(R.home(), "doc", "html", "logo.jpg", sep =
> .Platform$file.sep)
> 
> 
> ????? On that Ubuntu platform, "readJPEG(logo.jpg)" stopped with "Error
> in readJPEG(logo.jpg) : unable to open /usr/lib/R/doc/html/logo.jpg".
> 
> 
> ????? I replaced the above "paste" with the following:
> 
> 
> RdocDir <- dir(R.home(), pattern='^doc$', full.names = TRUE)
> RhtmlDir <- dir(RdocDir, pattern='^html$', full.names=TRUE)
> JPGs <- dir(RhtmlDir, pattern='\\\\.jpg$', full.names=TRUE)
> if(length(JPGs)>1){
> ? logoJPG <- paste0(.Platform$file.sep, 'logo.jpg$')
> ? logo.jpg <- grep(logoJPG, JPGs, value=TRUE)
> ? if(length(logo.jpg)>1)logo.jpg <- logo.jpg[1]
> ? if(length(logo.jpg)<1)logo.jpg <- JPGs[1]
> } else logo.jpg <- JPGs
> if(length(logo.jpg)<1){
> ? cat('logo.jpg not found.\n')
> ? print(R.home())
> ? print(dir(RdocDir))
> ? print(dir(RhtmlDir))
> ? if(!fda::CRAN())stop('logo.jpg not found')
> } else {
> # length(logo.jpg)==1 so continue:
> ? if(require(jpeg)){
> ##
> ## 1.? Shrink as required
> ##
> ??? Rlogo <- readJPEG(logo.jpg)
> 
> ...
> 
> 
> ??? ? This gave me no error message, which I believe means that either
> length(logo.jpg) == 1 or fda::CRAN() returns TRUE.? Sadly, I could not
> find the standard test file to see which of these is the case.
> 
> 
> ????? I should proceed to submit the current Ecfun package to CRAN. Then
> I might modify this test sequence to force an error, so I can see more
> what is happening.
> 
> 
> ????? Suggestions?
> ????? Thanks,
> ????? Spencer
> 
> 
> On 2020-02-03 03:06, I?aki Ucar wrote:
>> On Mon, 3 Feb 2020 at 03:16, Spencer Graves
>> <spencer.graves at effectivedefense.org> wrote:
>>> Hello, All:
>>>
>>>
>>> ??????? devtools::check_rhub failed to trap an error wrapped in "try",
>>> per the email below.? This came from running
>>> devtools::check_rhub(Ecfun_dir), where Ecfun_dir = the path to a copy of
>>> "https://github.com/sbgraves237/Ecfun".
>> That's improbable.
>>
>>> ??????? This is the development version of Ecfun, which I want to submit
>>> to CRAN as soon as I can do so without offending the sensibilities of
>>> the overworked CRAN maintainers.
>>>
>>>
>>> ??????? Suggestions?
>>> ??????? Thanks,
>>> ??????? Spencer Graves
>>>
>>>
>>> -------- Forwarded Message --------
>>> Subject:??????? Ecfun 0.2-2: ERROR
>>> Date:?? Sun, 02 Feb 2020 23:27:10 +0000
>>> From:?? R-hub builder <support at rhub.io>
>>> To:???? spencer.graves at effectivedefense.org
>>>
>> <snip>
>>
>>>> ## 2.9.? A more complicated example with elements to eval
>>>> ##
>>>> logo.jpg <- paste(R.home(), "doc", "html", "logo.jpg",
>>> +?????????????????? sep = .Platform$file.sep)
>>>> if(require(jpeg)){
>>> +?? Rlogo <- try(readJPEG(logo.jpg))
>>> +?? if(!inherits(Rlogo, 'try-error')){
>>> + # argument list for a call to rasterImage or rasterImageAdj
>>> +???? RlogoLoc <- list(image=Rlogo,
>>> +?????? xleft.0 = c(NZ=176.5,CH=172,US=171,
>>> +?????????????????? CN=177,RU= 9.5,UK= 8),
>>> +?????? xleft.1 = c(NZ=176.5,CH=? 9,US=-73.5,
>>> +?????????????????? CN=125,RU= 37, UK= 2),
>>> +?????? ybottom.0=c(NZ=-37,? CH=-34,US=-34,
>>> +?????????????????? CN=-33,RU= 48, UK=47),
>>> +?????? ybottom.1=c(NZ=-37,? CH= 47,US= 46,
>>> +?????????????????? CN= 32,RU=55.6,UK=55),
>>> +?????? xright=quote(xleft+xinch(0.6)),
>>> +?????? ytop = quote(ybottom+yinch(0.6)),
>>> +?????? angle.0 =0,
>>> +?????? angle.1 =c(NZ=0,CH=3*360,US=5*360,
>>> +????????????????? CN=2*360,RU=360,UK=360)
>>> +???? )
>>> +
>>> +???? RlogoInterp <- interpPairs(RlogoLoc,
>>> +???????????? .proportion=rep(c(0, -1), c(2, 4)) )
>>> + # check
>>> + ## Don't show:
>>> + stopifnot(
>>> + ## End(Don't show)
>>> + all.equal(names(RlogoInterp),
>>> +??? c('image', 'xright', 'ytop', 'xleft', 'ybottom', 'angle'))
>>> + ## Don't show:
>>> + )
>>> + ## End(Don't show)
>>> + }
>>> + # NOTE:? 'xleft', and 'ybottom' were created in interpPairs,
>>> + # and therefore come after 'xright' and 'ytop', which were
>>> + # already there.
>>> +
>>> + ##
>>> + ## 2.10.? using envir
>>> + ##
>>> +?? RlogoDiag <- list(x0=quote(Rlogo.$xleft),
>>> +?????????????????? y0=quote(Rlogo.$ybottom),
>>> +?????????????????? x1=quote(Rlogo.$xright),
>>> +?????????????????? y1=quote(Rlogo.$ytop) )
>>> +
>>> +?? RlogoD <- interpPairs(RlogoDiag, .p=1,
>>> +???????????????????? envir=list(Rlogo.=RlogoInterp) )
>>> + ## Don't show:
>>> + stopifnot(
>>> + ## End(Don't show)
>>> + all.equal(RlogoD, RlogoDiag)
>>> + ## Don't show:
>>> + )
>>> + ## End(Don't show)
>>> + }
>>> Loading required package: jpeg
>>> Error in readJPEG(logo.jpg) : unable to open
>>> /usr/lib/R/doc/html/logo.jpg
>>> Error in interpPairs.list(RlogoDiag, .p = 1, envir = list(Rlogo. =
>>> RlogoInterp)) :
>>> ??? object 'RlogoInterp' not found
>>> Calls: interpPairs -> interpPairs.list
>>> Execution halted
>> There it is: "Error in interpPairs.list [...] 'RlogoInterp' not
>> found". That's the error, not the "try". You see the error message
>> because you didn't specify "quiet=TRUE", but that doesn't mean that R
>> is failing to catch the error. So the second error is the one that
>> fails.
>>
>> I?aki
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@turner @end|ng |rom @uck|@nd@@c@nz  Mon Feb  3 21:25:12 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Tue, 4 Feb 2020 09:25:12 +1300
Subject: [R-pkg-devel] 
 [FORGED] Re: "try" malfunctions on Ubuntu Linux 16.04
 LTS, R-release, GCC
In-Reply-To: <ccea7bed-8e6b-8c9e-8cd0-6443faf2c13c@gmail.com>
References: <20200202232710.1.F960CD2D2556F532@rhub.io>
 <00df79bb-14a7-d810-71b3-eadd7cd32103@effectivedefense.org>
 <adff3a99-8776-4bc9-b371-5be556414a2f@gmail.com>
 <24119.44884.369255.390813@rob.eddelbuettel.com>
 <ccea7bed-8e6b-8c9e-8cd0-6443faf2c13c@gmail.com>
Message-ID: <0f21ef7f-2ae5-3cc9-049b-c2328fb0ff74@auckland.ac.nz>


On 4/02/20 3:03 am, profjohn wrote:

<SNIP>

> 
> While there are huge benefits to upgrading, there is pain. It's that
> pain that keeps people on OS versions that are older but still in the
> LTS [1] period.

<SNIP>

Fortune nomination!

cheers,

Rolf

[1] Long Term Support

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From |uc@r @end|ng |rom |edor@project@org  Mon Feb  3 21:39:45 2020
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Mon, 3 Feb 2020 21:39:45 +0100
Subject: [R-pkg-devel] 
 finding "logo.jpg" [was: "try" malfunctions on Ubuntu
 Linux 16.04 LTS, R-release, GCC]
In-Reply-To: <5032c7d1-a201-2931-83ec-133702759a1d@effectivedefense.org>
References: <20200202232710.1.F960CD2D2556F532@rhub.io>
 <00df79bb-14a7-d810-71b3-eadd7cd32103@effectivedefense.org>
 <CALEXWq1beDTxeUx0eQH2HqpuyOC8Ev0psw=2mLTjRFsuSGRG9w@mail.gmail.com>
 <5032c7d1-a201-2931-83ec-133702759a1d@effectivedefense.org>
Message-ID: <CALEXWq2dtrO68HKTPsH4y00r9qauqVM_TyhYqx3p06+-kgzNNQ@mail.gmail.com>

El lun., 3 feb. 2020 20:30, Spencer Graves <
spencer.graves at effectivedefense.org> escribi?:

>        Thanks to I?aki Ucar for identifying a second error that
> explained why I still got an error after wrapping one in "try".
>
>
>        That still leaves a question of how to find a file like
> "logo.jpg" in a platform independant way.
>
>
>        The following had worked for several years and now broke on rhub
> "Ubuntu Linux 16.04 LTS, R-release, GCC" but not on several other
> computers I tried:
>
>
>              logo.jpg <- paste(R.home(), "doc", "html", "logo.jpg", sep
> = .Platform$file.sep)
>
>
>        On that Ubuntu platform, "readJPEG(logo.jpg)" stopped with "Error
> in readJPEG(logo.jpg) : unable to open /usr/lib/R/doc/html/logo.jpg".


All these years you just got lucky that on CRAN the PNG is in that
location. That's not the location in Fedora, and I'd say that's not the
location in other distributions, because documentation is usually under
/usr/share.

But ultimately the test is faulty, because if the "try" call returns an
error, then later you are trying to use an undefined object.

I?aki

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Feb  3 21:58:01 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 3 Feb 2020 23:58:01 +0300
Subject: [R-pkg-devel] 
 finding "logo.jpg" [was: "try" malfunctions on Ubuntu
 Linux 16.04 LTS, R-release, GCC]
In-Reply-To: <5032c7d1-a201-2931-83ec-133702759a1d@effectivedefense.org>
References: <20200202232710.1.F960CD2D2556F532@rhub.io>
 <00df79bb-14a7-d810-71b3-eadd7cd32103@effectivedefense.org>
 <CALEXWq1beDTxeUx0eQH2HqpuyOC8Ev0psw=2mLTjRFsuSGRG9w@mail.gmail.com>
 <5032c7d1-a201-2931-83ec-133702759a1d@effectivedefense.org>
Message-ID: <20200203235801.7ebce998@Tarkus>

On Mon, 3 Feb 2020 13:30:11 -0600
Spencer Graves <spencer.graves at effectivedefense.org> wrote:

> logo.jpg <- paste(R.home(), "doc", "html", "logo.jpg", sep 
> = .Platform$file.sep)

I wonder whether file.path(R.home('doc'), 'html', 'logo.jpg') would be
more portable. Are there R installations built without the HTML docs?

-- 
Best regards,
Ivan


From hongoo| @end|ng |rom m|cro@o|t@com  Mon Feb  3 22:16:25 2020
From: hongoo| @end|ng |rom m|cro@o|t@com (Hong Ooi)
Date: Mon, 3 Feb 2020 21:16:25 +0000
Subject: [R-pkg-devel] [EXTERNAL] Re: finding "logo.jpg" [was: "try"
 malfunctions on Ubuntu Linux 16.04 LTS, R-release, GCC]
In-Reply-To: <cf12a07d-a2a9-fb36-e2af-ef850d5143e9@gmail.com>
References: <20200202232710.1.F960CD2D2556F532@rhub.io>
 <00df79bb-14a7-d810-71b3-eadd7cd32103@effectivedefense.org>
 <CALEXWq1beDTxeUx0eQH2HqpuyOC8Ev0psw=2mLTjRFsuSGRG9w@mail.gmail.com>
 <5032c7d1-a201-2931-83ec-133702759a1d@effectivedefense.org>
 <cf12a07d-a2a9-fb36-e2af-ef850d5143e9@gmail.com>
Message-ID: <KU1P153MB0102BCE641DDCE36E2314A61A6000@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>

I echo this. Relying on something undocumented and platform-specific, like the location of a random installation file, is just asking for problems. Instead, make a small image of your own and distribute it with your package.

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Ben Bolker
Sent: Tuesday, 4 February 2020 7:16 AM
To: r-package-devel at r-project.org
Subject: [EXTERNAL] Re: [R-pkg-devel] finding "logo.jpg" [was: "try" malfunctions on Ubuntu Linux 16.04 LTS, R-release, GCC]


  Maybe include your own version of logo.jpg in inst/ ?

On 2020-02-03 2:30 p.m., Spencer Graves wrote:
> ????? Thanks to I?aki Ucar for identifying a second error that explained
> why I still got an error after wrapping one in "try".
> 
> 
> ????? That still leaves a question of how to find a file like "logo.jpg"
> in a platform independant way.
> 
> 
> ??? ? The following had worked for several years and now broke on rhub
> "Ubuntu Linux 16.04 LTS, R-release, GCC" but not on several other
> computers I tried:
> 
> 
> ??? ??????? logo.jpg <- paste(R.home(), "doc", "html", "logo.jpg", sep =
> .Platform$file.sep)
> 
> 
> ????? On that Ubuntu platform, "readJPEG(logo.jpg)" stopped with "Error
> in readJPEG(logo.jpg) : unable to open /usr/lib/R/doc/html/logo.jpg".
> 
> 
> ????? I replaced the above "paste" with the following:
> 
> 
> RdocDir <- dir(R.home(), pattern='^doc$', full.names = TRUE)
> RhtmlDir <- dir(RdocDir, pattern='^html$', full.names=TRUE)
> JPGs <- dir(RhtmlDir, pattern='\\\\.jpg$', full.names=TRUE)
> if(length(JPGs)>1){
> ? logoJPG <- paste0(.Platform$file.sep, 'logo.jpg$')
> ? logo.jpg <- grep(logoJPG, JPGs, value=TRUE)
> ? if(length(logo.jpg)>1)logo.jpg <- logo.jpg[1]
> ? if(length(logo.jpg)<1)logo.jpg <- JPGs[1]
> } else logo.jpg <- JPGs
> if(length(logo.jpg)<1){
> ? cat('logo.jpg not found.\n')
> ? print(R.home())
> ? print(dir(RdocDir))
> ? print(dir(RhtmlDir))
> ? if(!fda::CRAN())stop('logo.jpg not found')
> } else {
> # length(logo.jpg)==1 so continue:
> ? if(require(jpeg)){
> ##
> ## 1.? Shrink as required
> ##
> ??? Rlogo <- readJPEG(logo.jpg)
> 
> ...
> 
> 
> ??? ? This gave me no error message, which I believe means that either
> length(logo.jpg) == 1 or fda::CRAN() returns TRUE.? Sadly, I could not
> find the standard test file to see which of these is the case.
> 
> 
> ????? I should proceed to submit the current Ecfun package to CRAN. Then
> I might modify this test sequence to force an error, so I can see more
> what is happening.
> 
> 
> ????? Suggestions?
> ????? Thanks,
> ????? Spencer
> 
> 
> On 2020-02-03 03:06, I?aki Ucar wrote:
>> On Mon, 3 Feb 2020 at 03:16, Spencer Graves
>> <spencer.graves at effectivedefense.org> wrote:
>>> Hello, All:
>>>
>>>
>>> ??????? devtools::check_rhub failed to trap an error wrapped in "try",
>>> per the email below.? This came from running
>>> devtools::check_rhub(Ecfun_dir), where Ecfun_dir = the path to a copy of
>>> "https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fsbgraves237%2FEcfun&amp;data=02%7C01%7Chongooi%40microsoft.com%7C757daa698b0a4830eaa908d7a8e5e496%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637163577651198242&amp;sdata=NW7oju2vYnhaaYnNnP8q%2F5yG1Vqusa21CMnTQtUwPAs%3D&amp;reserved=0".
>> That's improbable.
>>
>>> ??????? This is the development version of Ecfun, which I want to submit
>>> to CRAN as soon as I can do so without offending the sensibilities of
>>> the overworked CRAN maintainers.
>>>
>>>
>>> ??????? Suggestions?
>>> ??????? Thanks,
>>> ??????? Spencer Graves
>>>
>>>
>>> -------- Forwarded Message --------
>>> Subject:??????? Ecfun 0.2-2: ERROR
>>> Date:?? Sun, 02 Feb 2020 23:27:10 +0000
>>> From:?? R-hub builder <support at rhub.io>
>>> To:???? spencer.graves at effectivedefense.org
>>>
>> <snip>
>>
>>>> ## 2.9.? A more complicated example with elements to eval
>>>> ##
>>>> logo.jpg <- paste(R.home(), "doc", "html", "logo.jpg",
>>> +?????????????????? sep = .Platform$file.sep)
>>>> if(require(jpeg)){
>>> +?? Rlogo <- try(readJPEG(logo.jpg))
>>> +?? if(!inherits(Rlogo, 'try-error')){
>>> + # argument list for a call to rasterImage or rasterImageAdj
>>> +???? RlogoLoc <- list(image=Rlogo,
>>> +?????? xleft.0 = c(NZ=176.5,CH=172,US=171,
>>> +?????????????????? CN=177,RU= 9.5,UK= 8),
>>> +?????? xleft.1 = c(NZ=176.5,CH=? 9,US=-73.5,
>>> +?????????????????? CN=125,RU= 37, UK= 2),
>>> +?????? ybottom.0=c(NZ=-37,? CH=-34,US=-34,
>>> +?????????????????? CN=-33,RU= 48, UK=47),
>>> +?????? ybottom.1=c(NZ=-37,? CH= 47,US= 46,
>>> +?????????????????? CN= 32,RU=55.6,UK=55),
>>> +?????? xright=quote(xleft+xinch(0.6)),
>>> +?????? ytop = quote(ybottom+yinch(0.6)),
>>> +?????? angle.0 =0,
>>> +?????? angle.1 =c(NZ=0,CH=3*360,US=5*360,
>>> +????????????????? CN=2*360,RU=360,UK=360)
>>> +???? )
>>> +
>>> +???? RlogoInterp <- interpPairs(RlogoLoc,
>>> +???????????? .proportion=rep(c(0, -1), c(2, 4)) )
>>> + # check
>>> + ## Don't show:
>>> + stopifnot(
>>> + ## End(Don't show)
>>> + all.equal(names(RlogoInterp),
>>> +??? c('image', 'xright', 'ytop', 'xleft', 'ybottom', 'angle'))
>>> + ## Don't show:
>>> + )
>>> + ## End(Don't show)
>>> + }
>>> + # NOTE:? 'xleft', and 'ybottom' were created in interpPairs,
>>> + # and therefore come after 'xright' and 'ytop', which were
>>> + # already there.
>>> +
>>> + ##
>>> + ## 2.10.? using envir
>>> + ##
>>> +?? RlogoDiag <- list(x0=quote(Rlogo.$xleft),
>>> +?????????????????? y0=quote(Rlogo.$ybottom),
>>> +?????????????????? x1=quote(Rlogo.$xright),
>>> +?????????????????? y1=quote(Rlogo.$ytop) )
>>> +
>>> +?? RlogoD <- interpPairs(RlogoDiag, .p=1,
>>> +???????????????????? envir=list(Rlogo.=RlogoInterp) )
>>> + ## Don't show:
>>> + stopifnot(
>>> + ## End(Don't show)
>>> + all.equal(RlogoD, RlogoDiag)
>>> + ## Don't show:
>>> + )
>>> + ## End(Don't show)
>>> + }
>>> Loading required package: jpeg
>>> Error in readJPEG(logo.jpg) : unable to open
>>> /usr/lib/R/doc/html/logo.jpg
>>> Error in interpPairs.list(RlogoDiag, .p = 1, envir = list(Rlogo. =
>>> RlogoInterp)) :
>>> ??? object 'RlogoInterp' not found
>>> Calls: interpPairs -> interpPairs.list
>>> Execution halted
>> There it is: "Error in interpPairs.list [...] 'RlogoInterp' not
>> found". That's the error, not the "try". You see the error message
>> because you didn't specify "quiet=TRUE", but that doesn't mean that R
>> is failing to catch the error. So the second error is the one that
>> fails.
>>
>> I?aki
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7C757daa698b0a4830eaa908d7a8e5e496%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637163577651198242&amp;sdata=5IKP0vP4WLPd55s1x9HXf8daWZa7YipossPTq4N9ht0%3D&amp;reserved=0

______________________________________________
R-package-devel at r-project.org mailing list
https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7C757daa698b0a4830eaa908d7a8e5e496%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637163577651198242&amp;sdata=5IKP0vP4WLPd55s1x9HXf8daWZa7YipossPTq4N9ht0%3D&amp;reserved=0

From edd @end|ng |rom deb|@n@org  Mon Feb  3 22:23:33 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Mon, 3 Feb 2020 15:23:33 -0600
Subject: [R-pkg-devel] 
 finding "logo.jpg" [was: "try" malfunctions on Ubuntu
 Linux 16.04 LTS, R-release, GCC]
In-Reply-To: <20200203235801.7ebce998@Tarkus>
References: <20200202232710.1.F960CD2D2556F532@rhub.io>
 <00df79bb-14a7-d810-71b3-eadd7cd32103@effectivedefense.org>
 <CALEXWq1beDTxeUx0eQH2HqpuyOC8Ev0psw=2mLTjRFsuSGRG9w@mail.gmail.com>
 <5032c7d1-a201-2931-83ec-133702759a1d@effectivedefense.org>
 <20200203235801.7ebce998@Tarkus>
Message-ID: <24120.36693.617399.503724@rob.eddelbuettel.com>


On 3 February 2020 at 23:58, Ivan Krylov wrote:
| On Mon, 3 Feb 2020 13:30:11 -0600
| Spencer Graves <spencer.graves at effectivedefense.org> wrote:
| 
| > logo.jpg <- paste(R.home(), "doc", "html", "logo.jpg", sep 
| > = .Platform$file.sep)
| 
| I wonder whether file.path(R.home('doc'), 'html', 'logo.jpg') would be
| more portable. Are there R installations built without the HTML docs?

It's the only correct form. And of course it finds the desired file:

   R> file.path(R.home('doc'), 'html', 'logo.jpg')
   [1] "/usr/share/R/doc/html/logo.jpg"
   R> 

because it knows about

   R> Sys.getenv("R_SHARE_DIR")
   [1] "/usr/share/R/share"
   R>

because, as Inaki reminded everyone, most distro had non-architecture
dependent files below /usr/share for years.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From m@rce|o@27 @end|ng |rom gm@||@com  Tue Feb  4 00:56:10 2020
From: m@rce|o@27 @end|ng |rom gm@||@com (Marcelo Araya Salas)
Date: Mon, 3 Feb 2020 17:56:10 -0600
Subject: [R-pkg-devel] new package processing time
Message-ID: <CABJVSXSvko-JWHrBXJc4YnZa77mL8XExSG2NyYuxReokxUk7_g@mail.gmail.com>

Hi all

I submitted a new package to CRAN a couple of weeks ago. Does anyone know
how long does it take for the package to be processed? New package versions
are usually processed in a few hours so that's why I am wondering if
everything is fine.

thanks

Marcelo

	[[alternative HTML version deleted]]


From roy@mende|@@ohn @end|ng |rom no@@@gov  Tue Feb  4 01:10:08 2020
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Mon, 3 Feb 2020 16:10:08 -0800
Subject: [R-pkg-devel] new package processing time
In-Reply-To: <CABJVSXSvko-JWHrBXJc4YnZa77mL8XExSG2NyYuxReokxUk7_g@mail.gmail.com>
References: <CABJVSXSvko-JWHrBXJc4YnZa77mL8XExSG2NyYuxReokxUk7_g@mail.gmail.com>
Message-ID: <6166962B-60DA-49D1-8C41-06A9520ADF5C@noaa.gov>

Did you check on https://itsalocke.com/cransays/articles/dashboard?  If it is a first time submission,  there is a code review and that can take some time.

-Roy

> On Feb 3, 2020, at 3:56 PM, Marcelo Araya Salas <marceloa27 at gmail.com> wrote:
> 
> Hi all
> 
> I submitted a new package to CRAN a couple of weeks ago. Does anyone know
> how long does it take for the package to be processed? New package versions
> are usually processed in a few hours so that's why I am wondering if
> everything is fine.
> 
> thanks
> 
> Marcelo
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From he|mut@@chuetz @end|ng |rom beb@c@@t  Tue Feb  4 10:28:51 2020
From: he|mut@@chuetz @end|ng |rom beb@c@@t (=?UTF-8?Q?Helmut_Sch=c3=bctz?=)
Date: Tue, 4 Feb 2020 10:28:51 +0100
Subject: [R-pkg-devel] new package processing time
In-Reply-To: <CABJVSXSvko-JWHrBXJc4YnZa77mL8XExSG2NyYuxReokxUk7_g@mail.gmail.com>
References: <CABJVSXSvko-JWHrBXJc4YnZa77mL8XExSG2NyYuxReokxUk7_g@mail.gmail.com>
Message-ID: <e2fa978a-4d0b-06f4-7dae-dc080f3a3ddf@bebac.at>

Hi Marcelo,

Marcelo Araya Salas wrote on 2020-02-04 00:56:
> I submitted a new package to CRAN a couple of weeks ago. Does anyone know
> how long does it take for the package to be processed? New package versions
> are usually processed in a few hours so that's why I am wondering if
> everything is fine.

Possibly it went unnoticed.
My first new package took two days from submission to acceptance 
including answering questions in July last year.

Cheers,
Helmut

-- 
Ing. Helmut Sch?tz
BEBAC?? Consultancy Services for
Bioequivalence and Bioavailability Studies
Neubaugasse 36/11
1070 Vienna, Austria
W https://bebac.at/
F https://forum.bebac.at/


From gd@dev @end|ng |rom ||bertym@||@net  Tue Feb  4 15:04:52 2020
From: gd@dev @end|ng |rom ||bertym@||@net (GD)
Date: Tue, 4 Feb 2020 15:04:52 +0100
Subject: [R-pkg-devel] Fwd: LICENSE file in package including third party
 library
In-Reply-To: <5514d540-eb52-84c5-25fa-68d54086b9a3@umontpellier.fr>
References: <5514d540-eb52-84c5-25fa-68d54086b9a3@umontpellier.fr>
Message-ID: <9756b069-fb63-ed50-87ce-68a82b1feeaf@libertymail.net>

Hi,

I have a very specific question regarding the licensing of my R package.

Here is the details: I have an R package under the MIT license so the
DESCRIPTION file contains the field `License: MIT + file LICENSE` and
the LICENSE file contains the following required fields:

```
YEAR: yyyy
COPYRIGHT HOLDER: xx
```

My problem is that my package includes a third party C++ library also
under MIT license but with different copyright holder and year
information (available in its own LICENSE file shipped with the library).

How can I edit the LICENSE file of my package to have both copyright
information? Am I supposed to merge them without specifying that I
developed one package and only included another lib?

For instance, the package RcppEigen (which has a similar structure with
an included third party C++ lib) specifies the different copyrights in
the LICENSE file (but the license is different and not MIT, thus the
requirement regarding the LICENSE file is not the same).

Thanks in advanced,
Best regards,

-- 
Ghislain Durif
-----------------------------------------------------
Research engineer -- CNRS
Institut Montpelli?rain Alexandre Grothendieck (IMAG)
University of Montpellier (France)

Webpage: https://gdurif.perso.math.cnrs.fr
Montpellier Bio-Stats: https://groupes.renater.fr/wiki/montpellier-biostat


From edd @end|ng |rom deb|@n@org  Tue Feb  4 15:12:36 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 4 Feb 2020 08:12:36 -0600
Subject: [R-pkg-devel] new package processing time
In-Reply-To: <e2fa978a-4d0b-06f4-7dae-dc080f3a3ddf@bebac.at>
References: <CABJVSXSvko-JWHrBXJc4YnZa77mL8XExSG2NyYuxReokxUk7_g@mail.gmail.com>
 <e2fa978a-4d0b-06f4-7dae-dc080f3a3ddf@bebac.at>
Message-ID: <24121.31700.949273.200476@rob.eddelbuettel.com>


On 4 February 2020 at 10:28, Helmut Sch?tz wrote:
| Possibly it went unnoticed.

A follow-up email may be a good idea.

| My first new package took two days from submission to acceptance 
| including answering questions in July last year.

It is _much_ more clogged now as you can tell via a quick 'ls -lR' on the
incoming/ directory (and its subdirectories) will tell you. [1]

My RcppSimdJson package has been sitting there since Jan 26 but is slowly
bubbling to the top but there is still well over a done ahead of it. And
newbies/ contains more than _two screenfuls_ here...

Dirk

[1] Many ftp clients let you do that, I use a one-line wrapper around ncftp;
or if you can't there is the Locke shiny app).

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd @end|ng |rom deb|@n@org  Tue Feb  4 15:14:07 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 4 Feb 2020 08:14:07 -0600
Subject: [R-pkg-devel] 
 Fwd: LICENSE file in package including third party library
In-Reply-To: <9756b069-fb63-ed50-87ce-68a82b1feeaf@libertymail.net>
References: <5514d540-eb52-84c5-25fa-68d54086b9a3@umontpellier.fr>
 <9756b069-fb63-ed50-87ce-68a82b1feeaf@libertymail.net>
Message-ID: <24121.31791.84406.356218@rob.eddelbuettel.com>


On 4 February 2020 at 15:04, GD wrote:
| I have a very specific question regarding the licensing of my R package.
| 
| Here is the details: I have an R package under the MIT license so the
| DESCRIPTION file contains the field `License: MIT + file LICENSE` and
| the LICENSE file contains the following required fields:
| 
| ```
| YEAR: yyyy
| COPYRIGHT HOLDER: xx
| ```
| 
| My problem is that my package includes a third party C++ library also
| under MIT license but with different copyright holder and year
| information (available in its own LICENSE file shipped with the library).

So maybe add a file COPYRIGHTS ?
 
| How can I edit the LICENSE file of my package to have both copyright
| information? Am I supposed to merge them without specifying that I
| developed one package and only included another lib?
| 
| For instance, the package RcppEigen (which has a similar structure with
| an included third party C++ lib) specifies the different copyrights in
| the LICENSE file (but the license is different and not MIT, thus the
| requirement regarding the LICENSE file is not the same).

Did you read what it says?  First two lines are

   Please see the included file COPYRIGHTS for per-file (or per-directory)
   details on licenses as well as copyrights.

and that file is included as it comes from inst/COPYRIGHTS.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From m@rce|o@27 @end|ng |rom gm@||@com  Tue Feb  4 15:15:20 2020
From: m@rce|o@27 @end|ng |rom gm@||@com (Marcelo Araya Salas)
Date: Tue, 4 Feb 2020 08:15:20 -0600
Subject: [R-pkg-devel] new package processing time
In-Reply-To: <24121.31700.949273.200476@rob.eddelbuettel.com>
References: <CABJVSXSvko-JWHrBXJc4YnZa77mL8XExSG2NyYuxReokxUk7_g@mail.gmail.com>
 <e2fa978a-4d0b-06f4-7dae-dc080f3a3ddf@bebac.at>
 <24121.31700.949273.200476@rob.eddelbuettel.com>
Message-ID: <CABJVSXQyvvDMLB5ocmfCrruDy=ZRGuDUwdK4d3Dd3kCqCQdwcQ@mail.gmail.com>

Thanks

I found it here:

ftp://cran.r-project.org/incoming/archive/

not sure what that's suppose to mean

Marcelo

El mar., 4 feb. 2020 a las 8:12, Dirk Eddelbuettel (<edd at debian.org>)
escribi?:

>
> On 4 February 2020 at 10:28, Helmut Sch?tz wrote:
> | Possibly it went unnoticed.
>
> A follow-up email may be a good idea.
>
> | My first new package took two days from submission to acceptance
> | including answering questions in July last year.
>
> It is _much_ more clogged now as you can tell via a quick 'ls -lR' on the
> incoming/ directory (and its subdirectories) will tell you. [1]
>
> My RcppSimdJson package has been sitting there since Jan 26 but is slowly
> bubbling to the top but there is still well over a done ahead of it. And
> newbies/ contains more than _two screenfuls_ here...
>
> Dirk
>
> [1] Many ftp clients let you do that, I use a one-line wrapper around
> ncftp;
> or if you can't there is the Locke shiny app).
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Tue Feb  4 15:20:19 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 4 Feb 2020 09:20:19 -0500
Subject: [R-pkg-devel] new package processing time
In-Reply-To: <CABJVSXQyvvDMLB5ocmfCrruDy=ZRGuDUwdK4d3Dd3kCqCQdwcQ@mail.gmail.com>
References: <CABJVSXSvko-JWHrBXJc4YnZa77mL8XExSG2NyYuxReokxUk7_g@mail.gmail.com>
 <e2fa978a-4d0b-06f4-7dae-dc080f3a3ddf@bebac.at>
 <24121.31700.949273.200476@rob.eddelbuettel.com>
 <CABJVSXQyvvDMLB5ocmfCrruDy=ZRGuDUwdK4d3Dd3kCqCQdwcQ@mail.gmail.com>
Message-ID: <dd9c76cd-de11-87b9-986f-8bb683d3bc41@gmail.com>


  Also a vote for the foghorn::cran_incoming() function.

  "archive" means your package was rejected.  If you don't know
why/didn't receive an e-mail, you might have to e-mail CRAN maintainers
for clarification.

? Hornik, Ligges and Zeileis. "Changes on CRAN: 2017-12-01 to
          2018-06-30", R Journal 10(1), July 2018. <URL:
          https://journal.r-project.org/archive/2018-1/cran.pdf>

  ? Ma?lle Salmon, Locke Data, Stephanie Locke, Mitchell
          O'Hara-Wild, Hugo Gruson. "CRAN incoming dashboard", <URL:
          https://cransays.itsalocke.com/articles/dashboard.html>


On 2020-02-04 9:15 a.m., Marcelo Araya Salas wrote:
> Thanks
> 
> I found it here:
> 
> ftp://cran.r-project.org/incoming/archive/
> 
> not sure what that's suppose to mean
> 
> Marcelo
> 
> El mar., 4 feb. 2020 a las 8:12, Dirk Eddelbuettel (<edd at debian.org>)
> escribi?:
> 
>>
>> On 4 February 2020 at 10:28, Helmut Sch?tz wrote:
>> | Possibly it went unnoticed.
>>
>> A follow-up email may be a good idea.
>>
>> | My first new package took two days from submission to acceptance
>> | including answering questions in July last year.
>>
>> It is _much_ more clogged now as you can tell via a quick 'ls -lR' on the
>> incoming/ directory (and its subdirectories) will tell you. [1]
>>
>> My RcppSimdJson package has been sitting there since Jan 26 but is slowly
>> bubbling to the top but there is still well over a done ahead of it. And
>> newbies/ contains more than _two screenfuls_ here...
>>
>> Dirk
>>
>> [1] Many ftp clients let you do that, I use a one-line wrapper around
>> ncftp;
>> or if you can't there is the Locke shiny app).
>>
>> --
>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Feb  4 15:28:15 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 4 Feb 2020 09:28:15 -0500
Subject: [R-pkg-devel] new package processing time
In-Reply-To: <CABJVSXQyvvDMLB5ocmfCrruDy=ZRGuDUwdK4d3Dd3kCqCQdwcQ@mail.gmail.com>
References: <CABJVSXSvko-JWHrBXJc4YnZa77mL8XExSG2NyYuxReokxUk7_g@mail.gmail.com>
 <e2fa978a-4d0b-06f4-7dae-dc080f3a3ddf@bebac.at>
 <24121.31700.949273.200476@rob.eddelbuettel.com>
 <CABJVSXQyvvDMLB5ocmfCrruDy=ZRGuDUwdK4d3Dd3kCqCQdwcQ@mail.gmail.com>
Message-ID: <7c659f83-365d-f08a-e4c1-554399aa6b00@gmail.com>

On 04/02/2020 9:15 a.m., Marcelo Araya Salas wrote:
> Thanks
> 
> I found it here:
> 
> ftp://cran.r-project.org/incoming/archive/
> 
> not sure what that's suppose to mean

That generally means that it has been rejected.  The usual sequence of 
events is:

You submit it, and an email comes to the maintainer asking for 
confirmation of the submission.  If that confirmation doesn't come, it 
could end up in archive.

Then CRAN runs automatic tests on Windows and Debian.  If those have 
sufficiently severe issues (I don't know what the exact cutoff is, but 
certainly ERRORs are severe enough, and probably WARNINGs too) then an 
email is sent to the maintainer, and it is moved to archive.  The last 
time I got one of those emails the header had

From: ligges at statistik.tu-dortmund.de
Reply-To: CRAN-submissions at R-project.org
To: murdoch at stats.uwo.ca
Cc: CRAN-submissions at R-project.org
Subject: [CRAN-pretest-archived] CRAN submission rgl 0.100.40

so maybe you can check your spam folder for a message like that.

If it passes the automatic test, it probably gets some manual testing; 
problems there would also lead to archiving, generally with a message 
from whoever did the testing.

Duncan Murdoch

> 
> Marcelo
> 
> El mar., 4 feb. 2020 a las 8:12, Dirk Eddelbuettel (<edd at debian.org>)
> escribi?:
> 
>>
>> On 4 February 2020 at 10:28, Helmut Sch?tz wrote:
>> | Possibly it went unnoticed.
>>
>> A follow-up email may be a good idea.
>>
>> | My first new package took two days from submission to acceptance
>> | including answering questions in July last year.
>>
>> It is _much_ more clogged now as you can tell via a quick 'ls -lR' on the
>> incoming/ directory (and its subdirectories) will tell you. [1]
>>
>> My RcppSimdJson package has been sitting there since Jan 26 but is slowly
>> bubbling to the top but there is still well over a done ahead of it. And
>> newbies/ contains more than _two screenfuls_ here...
>>
>> Dirk
>>
>> [1] Many ftp clients let you do that, I use a one-line wrapper around
>> ncftp;
>> or if you can't there is the Locke shiny app).
>>
>> --
>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From edd @end|ng |rom deb|@n@org  Tue Feb  4 15:33:53 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 4 Feb 2020 08:33:53 -0600
Subject: [R-pkg-devel] new package processing time
In-Reply-To: <CABJVSXQyvvDMLB5ocmfCrruDy=ZRGuDUwdK4d3Dd3kCqCQdwcQ@mail.gmail.com>
References: <CABJVSXSvko-JWHrBXJc4YnZa77mL8XExSG2NyYuxReokxUk7_g@mail.gmail.com>
 <e2fa978a-4d0b-06f4-7dae-dc080f3a3ddf@bebac.at>
 <24121.31700.949273.200476@rob.eddelbuettel.com>
 <CABJVSXQyvvDMLB5ocmfCrruDy=ZRGuDUwdK4d3Dd3kCqCQdwcQ@mail.gmail.com>
Message-ID: <24121.32977.658224.366407@rob.eddelbuettel.com>


On 4 February 2020 at 08:15, Marcelo Araya Salas wrote:
| I found it here:
| 
| ftp://cran.r-project.org/incoming/archive/
| 
| not sure what that's suppose to mean

"It's dead."

It generally means you will have gotten an email with the reasoning.  But
whatever is in archive/ is no longer processed.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From br|@nk@||@t@ @end|ng |rom gm@||@com  Tue Feb  4 17:47:06 2020
From: br|@nk@||@t@ @end|ng |rom gm@||@com (brian knaus)
Date: Tue, 4 Feb 2020 08:47:06 -0800
Subject: [R-pkg-devel] r-hub status
Message-ID: <CAEp5mpAATpx3J6OnCyXJDpMP7y9MWJe5DuQvQwKnh21Yg_ebEw@mail.gmail.com>

Does anyone know the current status of r-hub? My package (
https://github.com/knausb/vcfR) is throwing warnings on R-devel (
https://cran.r-project.org/web/checks/check_results_vcfR.html) and CRAN has
asked me to fix it. Tried r-hub but it failed.

https://builder.r-hub.io/status/vcfR_1.9.0.9000.tar.gz-ad6bc014056941a58d94765de3134c4e

https://builder.r-hub.io/status/vcfR_1.9.0.9000.tar.gz-f673df2011864365ae5f7f66b4d16bf3

My interpretation is that this is not due to my package. Is anyone else
having issues with r-hub?

Thanks!
Brian

	[[alternative HTML version deleted]]


From gkr@emer @end|ng |rom bgc-jen@@mpg@de  Tue Feb  4 17:51:24 2020
From: gkr@emer @end|ng |rom bgc-jen@@mpg@de (Guido Kraemer)
Date: Tue, 4 Feb 2020 17:51:24 +0100
Subject: [R-pkg-devel] CXX14 not defined on Windows
Message-ID: <39972e65-3050-6e91-cdd1-3ff272d087a8@bgc-jena.mpg.de>

I am testing building a package on Windows. The package requires C++14. 
I have installed the latest versions of R (3.6.2), RTools (3.5), and 
RStudio. The package builds fine under Linux.
I get the following error:

     > devtools::install_github("gdkrmr/zarr-R")
    ...
     ? C++14 standard requested but CXX14 is not defined
    ...


I have also set `~/.R/Makevars.win` as suggested in the manual "Writing 
R extensions", Section 1.2.5 "Using C++14 code". When typing `R CMD 
config CXX14` in the RStudio terminal, I get a reply 
("c:/Rtools/mingw_64/bin/g++"). When trying to install the package 
manually with `R CMD INSTALL ...` from the RStudio terminal, I get the 
same error.

What am I doing wrong?

Thanks!

Guido


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Feb  4 18:01:17 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 4 Feb 2020 17:01:17 +0000
Subject: [R-pkg-devel] r-hub status
In-Reply-To: <CAEp5mpAATpx3J6OnCyXJDpMP7y9MWJe5DuQvQwKnh21Yg_ebEw@mail.gmail.com>
References: <CAEp5mpAATpx3J6OnCyXJDpMP7y9MWJe5DuQvQwKnh21Yg_ebEw@mail.gmail.com>
Message-ID: <CABtg=KnG5s6SBXETWa-YVFFsv7PKmwWkk6yUb54X5UhxTqBNaQ@mail.gmail.com>

This is the R-hub issue tracker:
https://github.com/r-hub/rhub/issues

Gabor

On Tue, Feb 4, 2020 at 4:47 PM brian knaus <briank.lists at gmail.com> wrote:
>
> Does anyone know the current status of r-hub? My package (
> https://github.com/knausb/vcfR) is throwing warnings on R-devel (
> https://cran.r-project.org/web/checks/check_results_vcfR.html) and CRAN has
> asked me to fix it. Tried r-hub but it failed.
>
> https://builder.r-hub.io/status/vcfR_1.9.0.9000.tar.gz-ad6bc014056941a58d94765de3134c4e
>
> https://builder.r-hub.io/status/vcfR_1.9.0.9000.tar.gz-f673df2011864365ae5f7f66b4d16bf3
>
> My interpretation is that this is not due to my package. Is anyone else
> having issues with r-hub?
>
> Thanks!
> Brian
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Tue Feb  4 18:14:47 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 4 Feb 2020 11:14:47 -0600
Subject: [R-pkg-devel] CXX14 not defined on Windows
In-Reply-To: <39972e65-3050-6e91-cdd1-3ff272d087a8@bgc-jena.mpg.de>
References: <39972e65-3050-6e91-cdd1-3ff272d087a8@bgc-jena.mpg.de>
Message-ID: <24121.42631.752571.885064@rob.eddelbuettel.com>


On 4 February 2020 at 17:51, Guido Kraemer wrote:
| I am testing building a package on Windows. The package requires C++14. 

You will have to wait.

The current Rtools is at g++ 4.9.3 which (barely) supports C++11.  We all
keep our fingers crossed as the replacement Rtools would bring g++ 8.*.  This
may happen with R 4.0.0 in April but I have no more details either.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From wdun|@p @end|ng |rom t|bco@com  Tue Feb  4 18:21:56 2020
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Tue, 4 Feb 2020 09:21:56 -0800
Subject: [R-pkg-devel] r-hub status
In-Reply-To: <CAEp5mpAATpx3J6OnCyXJDpMP7y9MWJe5DuQvQwKnh21Yg_ebEw@mail.gmail.com>
References: <CAEp5mpAATpx3J6OnCyXJDpMP7y9MWJe5DuQvQwKnh21Yg_ebEw@mail.gmail.com>
Message-ID: <CAF8bMcZ+KJt7_h0msNGrdHXeCiS=42B=5e182nVtE5TW--FkdQ@mail.gmail.com>

CRAN's check gives a warning

checking Rd \usage sections ... WARNING
Documented arguments not in \usage in documentation object 'Process chromR
objects':
  ?...?


and man/proc_chromR.Rd on github does list '...' in the \arguments section
but no function listed in the \usage section uses '...'.

The question is why you don't always get that warning.

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Tue, Feb 4, 2020 at 8:47 AM brian knaus <briank.lists at gmail.com> wrote:

> Does anyone know the current status of r-hub? My package (
> https://github.com/knausb/vcfR) is throwing warnings on R-devel (
> https://cran.r-project.org/web/checks/check_results_vcfR.html) and CRAN
> has
> asked me to fix it. Tried r-hub but it failed.
>
>
> https://builder.r-hub.io/status/vcfR_1.9.0.9000.tar.gz-ad6bc014056941a58d94765de3134c4e
>
>
> https://builder.r-hub.io/status/vcfR_1.9.0.9000.tar.gz-f673df2011864365ae5f7f66b4d16bf3
>
> My interpretation is that this is not due to my package. Is anyone else
> having issues with r-hub?
>
> Thanks!
> Brian
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Feb  4 18:32:25 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 4 Feb 2020 18:32:25 +0100
Subject: [R-pkg-devel] r-hub status
In-Reply-To: <CAF8bMcZ+KJt7_h0msNGrdHXeCiS=42B=5e182nVtE5TW--FkdQ@mail.gmail.com>
References: <CAEp5mpAATpx3J6OnCyXJDpMP7y9MWJe5DuQvQwKnh21Yg_ebEw@mail.gmail.com>
 <CAF8bMcZ+KJt7_h0msNGrdHXeCiS=42B=5e182nVtE5TW--FkdQ@mail.gmail.com>
Message-ID: <e69ebe8c-9a22-078e-27c8-5d98192e8772@statistik.tu-dortmund.de>



On 04.02.2020 18:21, William Dunlap wrote:
> CRAN's check gives a warning
> 
> checking Rd \usage sections ... WARNING
> Documented arguments not in \usage in documentation object 'Process chromR
> objects':
>    ?...?
> 
> 
> and man/proc_chromR.Rd on github does list '...' in the \arguments section
> but no function listed in the \usage section uses '...'.
> 
> The question is why you don't always get that warning.

Because there was a bug in R that the warnings was not produced for a 
long time, and this is now fixed in recent verisons of R-devel. Hence ou 
only get it here.

Best,
Uwe Ligges



> Bill Dunlap
> TIBCO Software
> wdunlap tibco.com
> 
> 
> On Tue, Feb 4, 2020 at 8:47 AM brian knaus <briank.lists at gmail.com> wrote:
> 
>> Does anyone know the current status of r-hub? My package (
>> https://github.com/knausb/vcfR) is throwing warnings on R-devel (
>> https://cran.r-project.org/web/checks/check_results_vcfR.html) and CRAN
>> has
>> asked me to fix it. Tried r-hub but it failed.
>>
>>
>> https://builder.r-hub.io/status/vcfR_1.9.0.9000.tar.gz-ad6bc014056941a58d94765de3134c4e
>>
>>
>> https://builder.r-hub.io/status/vcfR_1.9.0.9000.tar.gz-f673df2011864365ae5f7f66b4d16bf3
>>
>> My interpretation is that this is not due to my package. Is anyone else
>> having issues with r-hub?
>>
>> Thanks!
>> Brian
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From br|@nk@||@t@ @end|ng |rom gm@||@com  Tue Feb  4 18:59:11 2020
From: br|@nk@||@t@ @end|ng |rom gm@||@com (brian knaus)
Date: Tue, 4 Feb 2020 09:59:11 -0800
Subject: [R-pkg-devel] r-hub status
In-Reply-To: <e69ebe8c-9a22-078e-27c8-5d98192e8772@statistik.tu-dortmund.de>
References: <CAEp5mpAATpx3J6OnCyXJDpMP7y9MWJe5DuQvQwKnh21Yg_ebEw@mail.gmail.com>
 <CAF8bMcZ+KJt7_h0msNGrdHXeCiS=42B=5e182nVtE5TW--FkdQ@mail.gmail.com>
 <e69ebe8c-9a22-078e-27c8-5d98192e8772@statistik.tu-dortmund.de>
Message-ID: <CAEp5mpAFoVHewePLwaUQk60Fe8=XSmSuvUrGkEnURPKeqfirEQ@mail.gmail.com>

Thank  you Gabor! I've posted an issue.

https://github.com/r-hub/rhub/issues/338

Thank you Bill! I think the solution for this may be simple. But I wanted
to make sure I could reproduce the warning so that I can validate that my
fix resolves the issue.

And thank you Uwe for all the work you do helping package developers!

Brian

On Tue, Feb 4, 2020 at 9:32 AM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

>
>
> On 04.02.2020 18:21, William Dunlap wrote:
> > CRAN's check gives a warning
> >
> > checking Rd \usage sections ... WARNING
> > Documented arguments not in \usage in documentation object 'Process
> chromR
> > objects':
> >    ?...?
> >
> >
> > and man/proc_chromR.Rd on github does list '...' in the \arguments
> section
> > but no function listed in the \usage section uses '...'.
> >
> > The question is why you don't always get that warning.
>
> Because there was a bug in R that the warnings was not produced for a
> long time, and this is now fixed in recent verisons of R-devel. Hence ou
> only get it here.
>
> Best,
> Uwe Ligges
>
>
>
> > Bill Dunlap
> > TIBCO Software
> > wdunlap tibco.com
> >
> >
> > On Tue, Feb 4, 2020 at 8:47 AM brian knaus <briank.lists at gmail.com>
> wrote:
> >
> >> Does anyone know the current status of r-hub? My package (
> >> https://github.com/knausb/vcfR) is throwing warnings on R-devel (
> >> https://cran.r-project.org/web/checks/check_results_vcfR.html) and CRAN
> >> has
> >> asked me to fix it. Tried r-hub but it failed.
> >>
> >>
> >>
> https://builder.r-hub.io/status/vcfR_1.9.0.9000.tar.gz-ad6bc014056941a58d94765de3134c4e
> >>
> >>
> >>
> https://builder.r-hub.io/status/vcfR_1.9.0.9000.tar.gz-f673df2011864365ae5f7f66b4d16bf3
> >>
> >> My interpretation is that this is not due to my package. Is anyone else
> >> having issues with r-hub?
> >>
> >> Thanks!
> >> Brian
> >>
> >>          [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>

	[[alternative HTML version deleted]]


From roy@mende|@@ohn @end|ng |rom no@@@gov  Tue Feb  4 19:13:23 2020
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 4 Feb 2020 10:13:23 -0800
Subject: [R-pkg-devel] Suggests in a Package
Message-ID: <E786988A-1355-4D38-83A3-18AB6EE8A7D4@noaa.gov>

Hi All:

I still get a little confused on what it means if a package is listed in "Suggest" in my package.  I have been working to try and keep dependencies down.  One of my packages produces maps with data, and I have been asked if the maps can be made interactive.  It turns out this can be done very easily using "plotly" and I want to include something about that in the vignette. What my question is if I Suggest "plotly" in the package,  does a user have to have "plotly" installed in order to install and run the package?  My understanding is not,  so someone who doesn't want to do this doesn't need to install "plotly" but I wanted to double-check.

Thanks,

-Roy



**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Feb  4 19:20:15 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 4 Feb 2020 13:20:15 -0500
Subject: [R-pkg-devel] Suggests in a Package
In-Reply-To: <E786988A-1355-4D38-83A3-18AB6EE8A7D4@noaa.gov>
References: <E786988A-1355-4D38-83A3-18AB6EE8A7D4@noaa.gov>
Message-ID: <6f5254ef-04c4-bd08-af5e-2f5ae9d58e8b@gmail.com>

On 04/02/2020 1:13 p.m., Roy Mendelssohn - NOAA Federal via 
R-package-devel wrote:
> Hi All:
> 
> I still get a little confused on what it means if a package is listed in "Suggest" in my package.  I have been working to try and keep dependencies down.  One of my packages produces maps with data, and I have been asked if the maps can be made interactive.  It turns out this can be done very easily using "plotly" and I want to include something about that in the vignette. What my question is if I Suggest "plotly" in the package,  does a user have to have "plotly" installed in order to install and run the package?  My understanding is not,  so someone who doesn't want to do this doesn't need to install "plotly" but I wanted to double-check.

Your understanding is correct:  someone who doesn't have plotly 
installed should still be able to install and run your package.

You should make sure that any functions that need plotly check for it 
first.  The recommended way to do that is to use a 
requireNamespace("plotly") test, e.g. something like

   if (requireNamespace("plotly")) {
      plotly::plotly(...)
   } else
      stop("This function requires the 'plotly' package")

Your tests that use such a function should only be run if 
requireNamespace("plotly") returns TRUE.

Duncan Murdoch


From roy@mende|@@ohn @end|ng |rom no@@@gov  Tue Feb  4 19:44:52 2020
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Tue, 4 Feb 2020 10:44:52 -0800
Subject: [R-pkg-devel] Suggests in a Package
In-Reply-To: <6f5254ef-04c4-bd08-af5e-2f5ae9d58e8b@gmail.com>
References: <E786988A-1355-4D38-83A3-18AB6EE8A7D4@noaa.gov>
 <6f5254ef-04c4-bd08-af5e-2f5ae9d58e8b@gmail.com>
Message-ID: <0863D109-6802-4E77-97C3-6C4C0B9BBCC5@noaa.gov>

Thanks.  And thanks for the tip.

-Roy

> On Feb 4, 2020, at 10:20 AM, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> On 04/02/2020 1:13 p.m., Roy Mendelssohn - NOAA Federal via R-package-devel wrote:
>> Hi All:
>> I still get a little confused on what it means if a package is listed in "Suggest" in my package.  I have been working to try and keep dependencies down.  One of my packages produces maps with data, and I have been asked if the maps can be made interactive.  It turns out this can be done very easily using "plotly" and I want to include something about that in the vignette. What my question is if I Suggest "plotly" in the package,  does a user have to have "plotly" installed in order to install and run the package?  My understanding is not,  so someone who doesn't want to do this doesn't need to install "plotly" but I wanted to double-check.
> 
> Your understanding is correct:  someone who doesn't have plotly installed should still be able to install and run your package.
> 
> You should make sure that any functions that need plotly check for it first.  The recommended way to do that is to use a requireNamespace("plotly") test, e.g. something like
> 
>  if (requireNamespace("plotly")) {
>     plotly::plotly(...)
>  } else
>     stop("This function requires the 'plotly' package")
> 
> Your tests that use such a function should only be run if requireNamespace("plotly") returns TRUE.
> 
> Duncan Murdoch

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From y||193 @end|ng |rom jhu@edu  Tue Feb  4 17:48:08 2020
From: y||193 @end|ng |rom jhu@edu (Yuliang Li)
Date: Tue, 4 Feb 2020 16:48:08 +0000
Subject: [R-pkg-devel] =?gb2312?b?16q3ojogW0NSQU4tcHJldGVzdC1hcmNoaXZl?=
 =?gb2312?b?ZF0gQ1JBTiBzdWJtaXNzaW9uIEJBUkVCIDEuMA==?=
In-Reply-To: <01d5db18$Blat.v3.2.16$f0c671c3$32290656@mail.statistik.tu-dortmund.de>
References: <20200204021812.4B508161E25@xmpalantir.wu.ac.at>
 ,<01d5db18$Blat.v3.2.16$f0c671c3$32290656@mail.statistik.tu-dortmund.de>
Message-ID: <BL0PR01MB509050DD1D97F14AAFFAEFC290030@BL0PR01MB5090.prod.exchangelabs.com>

Hi all,

I am trying to submit my R package to CRAN. However, I keep getting an error in the second link, saying my package could not be installed. But the package works perfectly fine in my personal computer. I would really appreciate it if you could provide some possible solution.

Thanks in advance!

Best wishes,
Yuliang



________________________________________
???: ligges at statistik.tu-dortmund.de <ligges at statistik.tu-dortmund.de>
????: 2020?2?4? 13:07
???: Yuliang Li
??: CRAN-submissions at R-project.org
??: [CRAN-pretest-archived] CRAN submission BAREB 1.0

Dear maintainer,

package BAREB_1.0.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
Windows: <https://win-builder.r-project.org/incoming_pretest/BAREB_1.0_20200204_031812/Windows/00check.log>
Status: 5 WARNINGs, 8 NOTEs
Debian: <https://win-builder.r-project.org/incoming_pretest/BAREB_1.0_20200204_031812/Debian/00check.log>
Status: 1 ERROR, 1 WARNING, 2 NOTEs



Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.

More details are given in the directory:
<https://win-builder.r-project.org/incoming_pretest/BAREB_1.0_20200204_031812/>
The files will be removed after roughly 7 days.

No strong reverse dependencies to be checked.

Best regards,
CRAN teams' auto-check service

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: 00details.log
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20200204/b56c4780/attachment.log>

From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Feb  4 21:25:14 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 4 Feb 2020 15:25:14 -0500
Subject: [R-pkg-devel] 
 =?utf-8?b?6L2s5Y+ROiBbQ1JBTi1wcmV0ZXN0LWFyY2hpdmVk?=
 =?utf-8?q?=5D_CRAN_submission_BAREB_1=2E0?=
In-Reply-To: <BL0PR01MB509050DD1D97F14AAFFAEFC290030@BL0PR01MB5090.prod.exchangelabs.com>
References: <20200204021812.4B508161E25@xmpalantir.wu.ac.at>
 <01d5db18$Blat.v3.2.16$f0c671c3$32290656@mail.statistik.tu-dortmund.de>
 <BL0PR01MB509050DD1D97F14AAFFAEFC290030@BL0PR01MB5090.prod.exchangelabs.com>
Message-ID: <2fff5bcd-1734-cb2b-1d92-2084970bee6e@gmail.com>

The 00install.out file has this error message:

  unable to load shared object 
?/srv/hornik/tmp/CRAN/BAREB.Rcheck/00LOCK-BAREB/00new/BAREB/libs/BAREB.so?:
 
/srv/hornik/tmp/CRAN/BAREB.Rcheck/00LOCK-BAREB/00new/BAREB/libs/BAREB.so: 
undefined symbol: dpotrf_

That name dpotrf_ looks like something from LAPACK, but it is not listed 
in the README for included LAPACK routines in

https://svn.r-project.org/R/trunk/src/modules/lapack/README

However, dpotrf2 is listed there, so perhaps you can modify your source 
to use that instead.

Duncan Murdoch

On 04/02/2020 11:48 a.m., Yuliang Li wrote:
> Hi all,
> 
> I am trying to submit my R package to CRAN. However, I keep getting an error in the second link, saying my package could not be installed. But the package works perfectly fine in my personal computer. I would really appreciate it if you could provide some possible solution.
> 
> Thanks in advance!
> 
> Best wishes,
> Yuliang
> 
> 
> 
> ________________________________________
> ???: ligges at statistik.tu-dortmund.de <ligges at statistik.tu-dortmund.de>
> ????: 2020?2?4? 13:07
> ???: Yuliang Li
> ??: CRAN-submissions at R-project.org
> ??: [CRAN-pretest-archived] CRAN submission BAREB 1.0
> 
> Dear maintainer,
> 
> package BAREB_1.0.tar.gz does not pass the incoming checks automatically, please see the following pre-tests:
> Windows: <https://win-builder.r-project.org/incoming_pretest/BAREB_1.0_20200204_031812/Windows/00check.log>
> Status: 5 WARNINGs, 8 NOTEs
> Debian: <https://win-builder.r-project.org/incoming_pretest/BAREB_1.0_20200204_031812/Debian/00check.log>
> Status: 1 ERROR, 1 WARNING, 2 NOTEs
> 
> 
> 
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> If you are fairly certain the rejection is a false positive, please reply-all to this message and explain.
> 
> More details are given in the directory:
> <https://win-builder.r-project.org/incoming_pretest/BAREB_1.0_20200204_031812/>
> The files will be removed after roughly 7 days.
> 
> No strong reverse dependencies to be checked.
> 
> Best regards,
> CRAN teams' auto-check service
> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From sierr@stew m@iii@g oii mi@dspri@g@com  Tue Feb  4 22:21:43 2020
From: sierr@stew m@iii@g oii mi@dspri@g@com (sierr@stew m@iii@g oii mi@dspri@g@com)
Date: Tue, 4 Feb 2020 14:21:43 -0700
Subject: [R-pkg-devel] function name conflict problem
Message-ID: <00ad01d5dba1$1a11f620$4e35e260$@mindspring.com>

In trying to develop a package to be submitted to CRAN, when I do Install
and Reload or devtools::check(), I get the warning:

 

Warning: replacing previous import 'ellipse::pairs' by 'graphics::pairs'
when loading 'karon'

Warning: replacing previous import 'MVN::mvn' by 'mgcv::mvn' when loading
'karon'

 

I need one function each from the packages ellipse and mgcv (I do not need
pairs from ellipse and mvn from mgcv).  To restrict to the function that I
need, I have used the commands

@importFrom  ellipse  ellipse

@importFrom  mgcv  in.out

 

NAMESPACE includes the lines

importFrom(ellipse,ellipse)

importFrom(mgcv,in.out)

 

However, DESCRIPTION does not restrict the functions imported from ellipse
and mgcv; it has

Imports: MVN, MASS, scatterplot3d, rgl, mgcv, randomForest, rpart, partykit,
Formula, ellipse,..

 

Do these warnings need to be solved before submitting to CRAN?

Is it necessary to edit DESCRIPTION  If so, what should be done?

Is there some other potential solution?

 

Thanks!


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Feb  4 22:31:16 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 4 Feb 2020 16:31:16 -0500
Subject: [R-pkg-devel] function name conflict problem
In-Reply-To: <00ad01d5dba1$1a11f620$4e35e260$@mindspring.com>
References: <00ad01d5dba1$1a11f620$4e35e260$@mindspring.com>
Message-ID: <6883b54b-06da-1a0a-fdc6-8456f07a9b60@gmail.com>

On 04/02/2020 4:21 p.m., sierrastew at mindspring.com wrote:
> In trying to develop a package to be submitted to CRAN, when I do Install
> and Reload or devtools::check(), I get the warning:
> 
>   
> 
> Warning: replacing previous import 'ellipse::pairs' by 'graphics::pairs'
> when loading 'karon'
> 
> Warning: replacing previous import 'MVN::mvn' by 'mgcv::mvn' when loading
> 'karon'
> 
>   
> 
> I need one function each from the packages ellipse and mgcv (I do not need
> pairs from ellipse and mvn from mgcv).  To restrict to the function that I
> need, I have used the commands
> 
> @importFrom  ellipse  ellipse
> 
> @importFrom  mgcv  in.out
> 
>   
> 
> NAMESPACE includes the lines
> 
> importFrom(ellipse,ellipse)
> 
> importFrom(mgcv,in.out)
> 
>   
> 
> However, DESCRIPTION does not restrict the functions imported from ellipse
> and mgcv; it has
> 
> Imports: MVN, MASS, scatterplot3d, rgl, mgcv, randomForest, rpart, partykit,
> Formula, ellipse,..
> 
>   
> 
> Do these warnings need to be solved before submitting to CRAN?
> 
> Is it necessary to edit DESCRIPTION  If so, what should be done?
> 
> Is there some other potential solution?

I don't know if they *must* be fixed, but they should be.  Something in 
your NAMESPACE file (derived from some comment in your code by roxygen2) 
is importing ellipse::pairs, even though you say you don't want to do 
that.  You should fix that.

 From what we can see, your DESCRIPTION file is fine.  The problem lies 
in NAMESPACE.

Duncan Murdoch


From sierr@stew m@iii@g oii mi@dspri@g@com  Tue Feb  4 22:48:16 2020
From: sierr@stew m@iii@g oii mi@dspri@g@com (sierr@stew m@iii@g oii mi@dspri@g@com)
Date: Tue, 4 Feb 2020 14:48:16 -0700
Subject: [R-pkg-devel] function name conflict problem
Message-ID: <00cd01d5dba4$cfc6f620$6f54e260$@mindspring.com>

Thanks Duncan.  Please clarify: if I use ellipse::ellipse in code, do I need to have @importFrom ellipse eliipse in the Roxygen code.

-----Original Message-----
From: Duncan Murdoch <murdoch.duncan at gmail.com> 
Sent: Tuesday, February 4, 2020 2:45 PM
To: sierrastew at mindspring.com
Subject: Re: [R-pkg-devel] function name conflict problem

If you call it via ellipse::ellipse, you don't need to mention it in NAMESPACE.

I can't tell what's going wrong in your NAMESPACE file, but that's where the problem is that leads to the errors you saw.

In future, please don't write privately, post to the list.

Duncan Murdoch

On 04/02/2020 4:40 p.m., sierrastew at mindspring.com wrote:
> Thanks very much for the quick reply.  Here is the entire set of import commands from NAMESPACE.  Also, when I use the function ellipse, I code it as ellipse::ellipse; similarly for using in.out.  I don't see any request for anything but ellipse from the package ellipse, and in.out from mgcv:
> 
> import(Formula)
> import(MASS)
> import(assertthat)
> import(corrplot)
> import(grDevices)
> import(graphics)
> import(missForest)
> import(nortest)
> import(partykit)
> import(qqtest)
> import(randomForest)
> import(rpart)
> import(scatterplot3d)
> import(stats)
> importFrom(MVN,mvn)
> importFrom(ellipse,ellipse)
> importFrom(graphics,pairs)
> importFrom(mgcv,in.out)
> importFrom(rgl,rgl.postscript)
> 
> -----Original Message-----
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Tuesday, February 4, 2020 2:31 PM
> To: sierrastew at mindspring.com; r-package-devel at r-project. org 
> <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] function name conflict problem
> 
> On 04/02/2020 4:21 p.m., sierrastew at mindspring.com wrote:
>> In trying to develop a package to be submitted to CRAN, when I do 
>> Install and Reload or devtools::check(), I get the warning:
>>
>>    
>>
>> Warning: replacing previous import 'ellipse::pairs' by 'graphics::pairs'
>> when loading 'karon'
>>
>> Warning: replacing previous import 'MVN::mvn' by 'mgcv::mvn' when 
>> loading 'karon'
>>
>>    
>>
>> I need one function each from the packages ellipse and mgcv (I do not 
>> need pairs from ellipse and mvn from mgcv).  To restrict to the 
>> function that I need, I have used the commands
>>
>> @importFrom  ellipse  ellipse
>>
>> @importFrom  mgcv  in.out
>>
>>    
>>
>> NAMESPACE includes the lines
>>
>> importFrom(ellipse,ellipse)
>>
>> importFrom(mgcv,in.out)
>>
>>    
>>
>> However, DESCRIPTION does not restrict the functions imported from 
>> ellipse and mgcv; it has
>>
>> Imports: MVN, MASS, scatterplot3d, rgl, mgcv, randomForest, rpart, 
>> partykit, Formula, ellipse,..
>>
>>    
>>
>> Do these warnings need to be solved before submitting to CRAN?
>>
>> Is it necessary to edit DESCRIPTION  If so, what should be done?
>>
>> Is there some other potential solution?
> 
> I don't know if they *must* be fixed, but they should be.  Something in your NAMESPACE file (derived from some comment in your code by roxygen2) is importing ellipse::pairs, even though you say you don't want to do that.  You should fix that.
> 
>   From what we can see, your DESCRIPTION file is fine.  The problem lies in NAMESPACE.
> 
> Duncan Murdoch
> 


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Tue Feb  4 23:10:16 2020
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Tue, 4 Feb 2020 22:10:16 +0000
Subject: [R-pkg-devel] function name conflict problem
In-Reply-To: <00cd01d5dba4$cfc6f620$6f54e260$@mindspring.com>
References: <00cd01d5dba4$cfc6f620$6f54e260$@mindspring.com>
Message-ID: <5e624890ceaf425eb0fb3f80151ffe85@umanitoba.ca>

I find it's well explained in the book by Hadley Wickham: http://r-pkgs.had.co.nz/namespace.html#imports


If package ellipse is in Imports (in your DESCRIPTION file), then install.packages will make sure it's available on the user's system when installing your own package. Therefore you can write ellipse::ellipse without requiring importFrom(ellipse,ellipse) in your NAMESPACE.


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of sierrastew at mindspring.com <sierrastew at mindspring.com>
Sent: February 4, 2020 3:48:16 PM
To: r-package-devel at r-project. org
Subject: [R-pkg-devel] function name conflict problem

Thanks Duncan.  Please clarify: if I use ellipse::ellipse in code, do I need to have @importFrom ellipse eliipse in the Roxygen code.

-----Original Message-----
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Tuesday, February 4, 2020 2:45 PM
To: sierrastew at mindspring.com
Subject: Re: [R-pkg-devel] function name conflict problem

If you call it via ellipse::ellipse, you don't need to mention it in NAMESPACE.

I can't tell what's going wrong in your NAMESPACE file, but that's where the problem is that leads to the errors you saw.

In future, please don't write privately, post to the list.

Duncan Murdoch

On 04/02/2020 4:40 p.m., sierrastew at mindspring.com wrote:
> Thanks very much for the quick reply.  Here is the entire set of import commands from NAMESPACE.  Also, when I use the function ellipse, I code it as ellipse::ellipse; similarly for using in.out.  I don't see any request for anything but ellipse from the package ellipse, and in.out from mgcv:
>
> import(Formula)
> import(MASS)
> import(assertthat)
> import(corrplot)
> import(grDevices)
> import(graphics)
> import(missForest)
> import(nortest)
> import(partykit)
> import(qqtest)
> import(randomForest)
> import(rpart)
> import(scatterplot3d)
> import(stats)
> importFrom(MVN,mvn)
> importFrom(ellipse,ellipse)
> importFrom(graphics,pairs)
> importFrom(mgcv,in.out)
> importFrom(rgl,rgl.postscript)
>
> -----Original Message-----
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Tuesday, February 4, 2020 2:31 PM
> To: sierrastew at mindspring.com; r-package-devel at r-project. org
> <r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] function name conflict problem
>
> On 04/02/2020 4:21 p.m., sierrastew at mindspring.com wrote:
>> In trying to develop a package to be submitted to CRAN, when I do
>> Install and Reload or devtools::check(), I get the warning:
>>
>>
>>
>> Warning: replacing previous import 'ellipse::pairs' by 'graphics::pairs'
>> when loading 'karon'
>>
>> Warning: replacing previous import 'MVN::mvn' by 'mgcv::mvn' when
>> loading 'karon'
>>
>>
>>
>> I need one function each from the packages ellipse and mgcv (I do not
>> need pairs from ellipse and mvn from mgcv).  To restrict to the
>> function that I need, I have used the commands
>>
>> @importFrom  ellipse  ellipse
>>
>> @importFrom  mgcv  in.out
>>
>>
>>
>> NAMESPACE includes the lines
>>
>> importFrom(ellipse,ellipse)
>>
>> importFrom(mgcv,in.out)
>>
>>
>>
>> However, DESCRIPTION does not restrict the functions imported from
>> ellipse and mgcv; it has
>>
>> Imports: MVN, MASS, scatterplot3d, rgl, mgcv, randomForest, rpart,
>> partykit, Formula, ellipse,..
>>
>>
>>
>> Do these warnings need to be solved before submitting to CRAN?
>>
>> Is it necessary to edit DESCRIPTION  If so, what should be done?
>>
>> Is there some other potential solution?
>
> I don't know if they *must* be fixed, but they should be.  Something in your NAMESPACE file (derived from some comment in your code by roxygen2) is importing ellipse::pairs, even though you say you don't want to do that.  You should fix that.
>
>   From what we can see, your DESCRIPTION file is fine.  The problem lies in NAMESPACE.
>
> Duncan Murdoch
>

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From sierr@stew m@iii@g oii mi@dspri@g@com  Wed Feb  5 00:00:50 2020
From: sierr@stew m@iii@g oii mi@dspri@g@com (sierr@stew m@iii@g oii mi@dspri@g@com)
Date: Tue, 4 Feb 2020 16:00:50 -0700
Subject: [R-pkg-devel] function name conflict problem
In-Reply-To: <5e624890ceaf425eb0fb3f80151ffe85@umanitoba.ca>
References: <00cd01d5dba4$cfc6f620$6f54e260$@mindspring.com>
 <5e624890ceaf425eb0fb3f80151ffe85@umanitoba.ca>
Message-ID: <000001d5dbae$f2cea8c0$d86bfa40$@mindspring.com>

Thanks.  I had seen this but it didn't register.  I made this change to all
the potential conflicts (the packages ellipse and mgcv are never in an
@import statement), but I still get the conflict messages.  John Karon

 

From: Max Turgeon <Max.Turgeon at umanitoba.ca> 
Sent: Tuesday, February 4, 2020 3:10 PM
To: sierrastew at mindspring.com; r-package-devel at r-project. org
<r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] function name conflict problem

 

I find it's well explained in the book by Hadley Wickham:
<http://r-pkgs.had.co.nz/namespace.html#imports>
http://r-pkgs.had.co.nz/namespace.html#imports

 

If package ellipse is in Imports (in your DESCRIPTION file), then
install.packages will make sure it's available on the user's system when
installing your own package. Therefore you can write ellipse::ellipse
without requiring importFrom(ellipse,ellipse) in your NAMESPACE.

 

Max Turgeon
Assistant Professor

Department of Statistics
Department of Computer Science
University of Manitoba

 <http://maxturgeon.ca> maxturgeon.ca

 

  _____  

From: R-package-devel <r-package-devel-bounces at r-project.org
<mailto:r-package-devel-bounces at r-project.org> > on behalf of
sierrastew at mindspring.com <sierrastew at mindspring.com
<mailto:sierrastew at mindspring.com> >
Sent: February 4, 2020 3:48:16 PM
To: r-package-devel at r-project. org
Subject: [R-pkg-devel] function name conflict problem 

 

Thanks Duncan.  Please clarify: if I use ellipse::ellipse in code, do I need
to have @importFrom ellipse eliipse in the Roxygen code.

-----Original Message-----
From: Duncan Murdoch < <mailto:murdoch.duncan at gmail.com>
murdoch.duncan at gmail.com> 
Sent: Tuesday, February 4, 2020 2:45 PM
To:  <mailto:sierrastew at mindspring.com> sierrastew at mindspring.com
Subject: Re: [R-pkg-devel] function name conflict problem

If you call it via ellipse::ellipse, you don't need to mention it in
NAMESPACE.

I can't tell what's going wrong in your NAMESPACE file, but that's where the
problem is that leads to the errors you saw.

In future, please don't write privately, post to the list.

Duncan Murdoch

On 04/02/2020 4:40 p.m.,  <mailto:sierrastew at mindspring.com>
sierrastew at mindspring.com wrote:
> Thanks very much for the quick reply.  Here is the entire set of import
commands from NAMESPACE.  Also, when I use the function ellipse, I code it
as ellipse::ellipse; similarly for using in.out.  I don't see any request
for anything but ellipse from the package ellipse, and in.out from mgcv:
> 
> import(Formula)
> import(MASS)
> import(assertthat)
> import(corrplot)
> import(grDevices)
> import(graphics)
> import(missForest)
> import(nortest)
> import(partykit)
> import(qqtest)
> import(randomForest)
> import(rpart)
> import(scatterplot3d)
> import(stats)
> importFrom(MVN,mvn)
> importFrom(ellipse,ellipse)
> importFrom(graphics,pairs)
> importFrom(mgcv,in.out)
> importFrom(rgl,rgl.postscript)
> 
> -----Original Message-----
> From: Duncan Murdoch < <mailto:murdoch.duncan at gmail.com>
murdoch.duncan at gmail.com>
> Sent: Tuesday, February 4, 2020 2:31 PM
> To:  <mailto:sierrastew at mindspring.com> sierrastew at mindspring.com;
r-package-devel at r-project. org 
> < <mailto:r-package-devel at r-project.org> r-package-devel at r-project.org>
> Subject: Re: [R-pkg-devel] function name conflict problem
> 
> On 04/02/2020 4:21 p.m.,  <mailto:sierrastew at mindspring.com>
sierrastew at mindspring.com wrote:
>> In trying to develop a package to be submitted to CRAN, when I do 
>> Install and Reload or devtools::check(), I get the warning:
>>
>>    
>>
>> Warning: replacing previous import 'ellipse::pairs' by 'graphics::pairs'
>> when loading 'karon'
>>
>> Warning: replacing previous import 'MVN::mvn' by 'mgcv::mvn' when 
>> loading 'karon'
>>
>>    
>>
>> I need one function each from the packages ellipse and mgcv (I do not 
>> need pairs from ellipse and mvn from mgcv).  To restrict to the 
>> function that I need, I have used the commands
>>
>> @importFrom  ellipse  ellipse
>>
>> @importFrom  mgcv  in.out
>>
>>    
>>
>> NAMESPACE includes the lines
>>
>> importFrom(ellipse,ellipse)
>>
>> importFrom(mgcv,in.out)
>>
>>    
>>
>> However, DESCRIPTION does not restrict the functions imported from 
>> ellipse and mgcv; it has
>>
>> Imports: MVN, MASS, scatterplot3d, rgl, mgcv, randomForest, rpart, 
>> partykit, Formula, ellipse,..
>>
>>    
>>
>> Do these warnings need to be solved before submitting to CRAN?
>>
>> Is it necessary to edit DESCRIPTION  If so, what should be done?
>>
>> Is there some other potential solution?
> 
> I don't know if they *must* be fixed, but they should be.  Something in
your NAMESPACE file (derived from some comment in your code by roxygen2) is
importing ellipse::pairs, even though you say you don't want to do that.
You should fix that.
> 
>   From what we can see, your DESCRIPTION file is fine.  The problem lies
in NAMESPACE.
> 
> Duncan Murdoch
> 

______________________________________________
 <mailto:R-package-devel at r-project.org> R-package-devel at r-project.org
mailing list
 <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From m@rce|o@27 @end|ng |rom gm@||@com  Wed Feb  5 02:53:08 2020
From: m@rce|o@27 @end|ng |rom gm@||@com (Marcelo Araya Salas)
Date: Tue, 4 Feb 2020 19:53:08 -0600
Subject: [R-pkg-devel] Warning: parse error in file 'Rraven-Ex.R'
In-Reply-To: <24121.32977.658224.366407@rob.eddelbuettel.com>
References: <CABJVSXSvko-JWHrBXJc4YnZa77mL8XExSG2NyYuxReokxUk7_g@mail.gmail.com>
 <e2fa978a-4d0b-06f4-7dae-dc080f3a3ddf@bebac.at>
 <24121.31700.949273.200476@rob.eddelbuettel.com>
 <CABJVSXQyvvDMLB5ocmfCrruDy=ZRGuDUwdK4d3Dd3kCqCQdwcQ@mail.gmail.com>
 <24121.32977.658224.366407@rob.eddelbuettel.com>
Message-ID: <CABJVSXQdLxyCoZKWRBB0SP=kxOWEj4T6t6bB2zZZdGC3iB=S-A@mail.gmail.com>

Hi all

I got this error from CRAN tests:

Warning: parse error in file 'Rraven-Ex.R':
'\.' is an unrecognized escape in character string starting ""\."

However, I can't find the original file where the error is found. I have
try unsuccessfully for several hours :(

any suggestions on how to find it?

thanks!

Marcelo



El mar., 4 feb. 2020 a las 8:34, Dirk Eddelbuettel (<edd at debian.org>)
escribi?:

>
> On 4 February 2020 at 08:15, Marcelo Araya Salas wrote:
> | I found it here:
> |
> | ftp://cran.r-project.org/incoming/archive/
> |
> | not sure what that's suppose to mean
>
> "It's dead."
>
> It generally means you will have gotten an email with the reasoning.  But
> whatever is in archive/ is no longer processed.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Feb  5 04:44:19 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 04 Feb 2020 19:44:19 -0800
Subject: [R-pkg-devel] Warning: parse error in file 'Rraven-Ex.R'
In-Reply-To: <CABJVSXQdLxyCoZKWRBB0SP=kxOWEj4T6t6bB2zZZdGC3iB=S-A@mail.gmail.com>
References: <CABJVSXSvko-JWHrBXJc4YnZa77mL8XExSG2NyYuxReokxUk7_g@mail.gmail.com>
 <e2fa978a-4d0b-06f4-7dae-dc080f3a3ddf@bebac.at>
 <24121.31700.949273.200476@rob.eddelbuettel.com>
 <CABJVSXQyvvDMLB5ocmfCrruDy=ZRGuDUwdK4d3Dd3kCqCQdwcQ@mail.gmail.com>
 <24121.32977.658224.366407@rob.eddelbuettel.com>
 <CABJVSXQdLxyCoZKWRBB0SP=kxOWEj4T6t6bB2zZZdGC3iB=S-A@mail.gmail.com>
Message-ID: <B452F3B6-3C4A-48D3-A6C7-D69F29F909F7@dcn.davis.ca.us>

In your examples.

On February 4, 2020 5:53:08 PM PST, Marcelo Araya Salas <marceloa27 at gmail.com> wrote:
>Hi all
>
>I got this error from CRAN tests:
>
>Warning: parse error in file 'Rraven-Ex.R':
>'\.' is an unrecognized escape in character string starting ""\."
>
>However, I can't find the original file where the error is found. I
>have
>try unsuccessfully for several hours :(
>
>any suggestions on how to find it?
>
>thanks!
>
>Marcelo
>
>
>
>El mar., 4 feb. 2020 a las 8:34, Dirk Eddelbuettel (<edd at debian.org>)
>escribi?:
>
>>
>> On 4 February 2020 at 08:15, Marcelo Araya Salas wrote:
>> | I found it here:
>> |
>> | ftp://cran.r-project.org/incoming/archive/
>> |
>> | not sure what that's suppose to mean
>>
>> "It's dead."
>>
>> It generally means you will have gotten an email with the reasoning. 
>But
>> whatever is in archive/ is no longer processed.
>>
>> Dirk
>>
>> --
>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Wed Feb  5 08:31:07 2020
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Wed, 5 Feb 2020 18:31:07 +1100
Subject: [R-pkg-devel] function name conflict problem
In-Reply-To: <00ad01d5dba1$1a11f620$4e35e260$@mindspring.com>
References: <00ad01d5dba1$1a11f620$4e35e260$@mindspring.com>
Message-ID: <CAJmOi+NzopfvO2PUFcD2Rq8mtCR5hGhX8c2EBfVMtFa+=R1MNA@mail.gmail.com>

Package karon is the problem. Is that package in your depends or imports?
Does that package use Depends?

On Wed, 5 Feb 2020 at 8:24 am, <sierrastew at mindspring.com> wrote:

> In trying to develop a package to be submitted to CRAN, when I do Install
> and Reload or devtools::check(), I get the warning:
>
>
>
> Warning: replacing previous import 'ellipse::pairs' by 'graphics::pairs'
> when loading 'karon'
>
> Warning: replacing previous import 'MVN::mvn' by 'mgcv::mvn' when loading
> 'karon'
>
>
>
> I need one function each from the packages ellipse and mgcv (I do not need
> pairs from ellipse and mvn from mgcv).  To restrict to the function that I
> need, I have used the commands
>
> @importFrom  ellipse  ellipse
>
> @importFrom  mgcv  in.out
>
>
>
> NAMESPACE includes the lines
>
> importFrom(ellipse,ellipse)
>
> importFrom(mgcv,in.out)
>
>
>
> However, DESCRIPTION does not restrict the functions imported from ellipse
> and mgcv; it has
>
> Imports: MVN, MASS, scatterplot3d, rgl, mgcv, randomForest, rpart,
> partykit,
> Formula, ellipse,..
>
>
>
> Do these warnings need to be solved before submitting to CRAN?
>
> Is it necessary to edit DESCRIPTION  If so, what should be done?
>
> Is there some other potential solution?
>
>
>
> Thanks!
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Feb  5 11:11:53 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 5 Feb 2020 11:11:53 +0100
Subject: [R-pkg-devel] Warning: parse error in file 'Rraven-Ex.R'
In-Reply-To: <B452F3B6-3C4A-48D3-A6C7-D69F29F909F7@dcn.davis.ca.us>
References: <CABJVSXSvko-JWHrBXJc4YnZa77mL8XExSG2NyYuxReokxUk7_g@mail.gmail.com>
 <e2fa978a-4d0b-06f4-7dae-dc080f3a3ddf@bebac.at>
 <24121.31700.949273.200476@rob.eddelbuettel.com>
 <CABJVSXQyvvDMLB5ocmfCrruDy=ZRGuDUwdK4d3Dd3kCqCQdwcQ@mail.gmail.com>
 <24121.32977.658224.366407@rob.eddelbuettel.com>
 <CABJVSXQdLxyCoZKWRBB0SP=kxOWEj4T6t6bB2zZZdGC3iB=S-A@mail.gmail.com>
 <B452F3B6-3C4A-48D3-A6C7-D69F29F909F7@dcn.davis.ca.us>
Message-ID: <db6c5cb8-116c-57e0-7a37-d575cf774bec@statistik.tu-dortmund.de>



On 05.02.2020 04:44, Jeff Newmiller wrote:
> In your examples.
> 
> On February 4, 2020 5:53:08 PM PST, Marcelo Araya Salas <marceloa27 at gmail.com> wrote:
>> Hi all
>>
>> I got this error from CRAN tests:
>>
>> Warning: parse error in file 'Rraven-Ex.R':
>> '\.' is an unrecognized escape in character string starting ""\."


... Where you probably have \. and need \\.

Best,
Uwe Ligges


>> However, I can't find the original file where the error is found. I
>> have
>> try unsuccessfully for several hours :(
>>
>> any suggestions on how to find it?
>>
>> thanks!
>>
>> Marcelo
>>
>>
>>
>> El mar., 4 feb. 2020 a las 8:34, Dirk Eddelbuettel (<edd at debian.org>)
>> escribi?:
>>
>>>
>>> On 4 February 2020 at 08:15, Marcelo Araya Salas wrote:
>>> | I found it here:
>>> |
>>> | ftp://cran.r-project.org/incoming/archive/
>>> |
>>> | not sure what that's suppose to mean
>>>
>>> "It's dead."
>>>
>>> It generally means you will have gotten an email with the reasoning.
>> But
>>> whatever is in archive/ is no longer processed.
>>>
>>> Dirk
>>>
>>> --
>>> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From r@||@@tubner @end|ng |rom gm@||@com  Wed Feb  5 11:47:15 2020
From: r@||@@tubner @end|ng |rom gm@||@com (Ralf Stubner)
Date: Wed, 5 Feb 2020 11:47:15 +0100
Subject: [R-pkg-devel] CXX14 not defined on Windows
In-Reply-To: <39972e65-3050-6e91-cdd1-3ff272d087a8@bgc-jena.mpg.de>
References: <39972e65-3050-6e91-cdd1-3ff272d087a8@bgc-jena.mpg.de>
Message-ID: <CAFQwRQznzG+HJazLWW1vPbQs7UZkrSxbdgAhi_zLxcC4qYPNjw@mail.gmail.com>

On Tue, Feb 4, 2020 at 5:51 PM Guido Kraemer <gkraemer at bgc-jena.mpg.de> wrote:
> I have also set `~/.R/Makevars.win` as suggested in the manual "Writing
> R extensions", Section 1.2.5 "Using C++14 code".

What exactly do you have in src/Makevars.win? Just the simple CXX_STD
= CXX14 or the more complex set-up from the end of section 1.2.5..

The rstan package is on CRAN including windows binaries and uses
C++14. In src/Makevars.win they have

CXX_STD = CXX14
CXX14STD = -std=c++1y

c.f. https://github.com/stan-dev/rstan/blob/40e93534e771d8c536ddb60fc62e86a5b55596de/rstan/rstan/src/Makevars.win#L2-L3

cheerio
ralf


From edd @end|ng |rom deb|@n@org  Wed Feb  5 13:25:35 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 5 Feb 2020 06:25:35 -0600
Subject: [R-pkg-devel] CXX14 not defined on Windows
In-Reply-To: <CAFQwRQznzG+HJazLWW1vPbQs7UZkrSxbdgAhi_zLxcC4qYPNjw@mail.gmail.com>
References: <39972e65-3050-6e91-cdd1-3ff272d087a8@bgc-jena.mpg.de>
 <CAFQwRQznzG+HJazLWW1vPbQs7UZkrSxbdgAhi_zLxcC4qYPNjw@mail.gmail.com>
Message-ID: <24122.46143.992591.343218@rob.eddelbuettel.com>


On 5 February 2020 at 11:47, Ralf Stubner wrote:
| On Tue, Feb 4, 2020 at 5:51 PM Guido Kraemer <gkraemer at bgc-jena.mpg.de> wrote:
| > I have also set `~/.R/Makevars.win` as suggested in the manual "Writing
| > R extensions", Section 1.2.5 "Using C++14 code".
| 
| What exactly do you have in src/Makevars.win? Just the simple CXX_STD
| = CXX14 or the more complex set-up from the end of section 1.2.5..
| 
| The rstan package is on CRAN including windows binaries and uses
| C++14. In src/Makevars.win they have
| 
| CXX_STD = CXX14
| CXX14STD = -std=c++1y
| 
| c.f. https://github.com/stan-dev/rstan/blob/40e93534e771d8c536ddb60fc62e86a5b55596de/rstan/rstan/src/Makevars.win#L2-L3

Good catch. I think I also noticed at least one other package using C++14
with the current toolchain (xtensor) and it used eg by one other package
(rray) which has an even simpler src/Makevars.win just setting CXX_STD as
advised (plus tweaks to PKG_CXXFLAGS, see 
  https://github.com/r-lib/rray/blob/master/src/Makevars.win

So notwithstanding my earlier message Guido's package should work with the
current Rtools.  

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From v|ncent@@re|-bundock @end|ng |rom umontre@|@c@  Wed Feb  5 14:32:04 2020
From: v|ncent@@re|-bundock @end|ng |rom umontre@|@c@ (Vincent Arel-Bundock)
Date: Wed, 05 Feb 2020 08:32:04 -0500
Subject: [R-pkg-devel] "found non-ASCII strings" with save(version = 2)
Message-ID: <b09ec75e-bafa-4959-a90f-ac6123a11559@www.fastmail.com>

Hi everyone,

My `countrycode` package ships with two data frames of characters in several languages: codelist and codelist_panel.

I converted all strings to UTF-8 using the `enc2utf8` function, but I also tried several other ways, with the stringi package, etc. As far as I can tell, the strings are all in UTF-8 format now:

url <- 'https://github.com/vincentarelbundock/countrycode/raw/master/data/codelist.rda'
temp <- tempfile()
download.file(url, temp)
load(temp)
tmp <- codelist[, sapply(codelist, is.character)]
library(stringi)
all(unlist(lapply(tmp, function(x) stri_enc_isutf8((na.omit(x))))))
[1] TRUE

After encoding, I saved the data frames with this command:

save(codelist, file = 'data/codelist.rda', compress = 'xz', version = 2)

Yet, when I run R CMD check, I get the following warning:

checking data for non-ASCII characters ... WARNING
    Warning: found non-ASCII strings
    'W<c3><bc>rtemberg' in object 'codelist'
    'S<c3><a3>o Tom<c3><a9> and Pr<c3><ad>ncipe' in object 'codelist'
    'W<c3><bc>rtemberg' in object 'codelist_panel'
    'S<c3><a3>o Tom<c3><a9> and Pr<c3><ad>ncipe' in object 'codelist_panel'

This warning disappears if I save the data frames using `save(version = 3)`. However, I would prefer to use version 2 to keep compatibility with older versions of R.

Does anyone have suggestions for how to handle this? What did I miss?

Thanks a lot for your time!

Vincent

--
Vincent Arel-Bundock

Professeur agr?g? / Associate professor
http://arelbundock.com
Universit? de Montr?al, Science politique
3150 rue Jean-Brillant, Pav. Lionel-Groulx, C-4020
Montr?al, Qu?bec, Canada, H3T 1N8


From br|@n @end|ng |rom br@verock@com  Wed Feb  5 15:39:59 2020
From: br|@n @end|ng |rom br@verock@com (Brian G. Peterson)
Date: Wed, 05 Feb 2020 08:39:59 -0600
Subject: [R-pkg-devel] Winbuilder 'experimental' toolchain 4-5x slower than
 all other architectures
Message-ID: <4afdc811f73861defe241164f1e95d34511f3ae2.camel@braverock.com>

We've noticed over the past week that Winbuilder/R-Hub's 'experimental'
Rtools4 toolchain images for Windows are approximately 4-5x slower than
all other containers to build and check several packages we maintain.

This affects everything, including example timings, where this
architecture is the only architecture that shows any example run-times
over 5 seconds. (including Windows under the older toolchain).

Does CRAN expect us to optimize our code for the clearly non-performant 
'experimental' Windows toolchain?

I'd like to send a new version of our package PerformanceAnalytics to
CRAN, but the Windows experimental toolchain is preventing a 100% clean
set of checks.


Regards,

Brian

-- 
Brian G. Peterson
ph: +1.773.459.4973
im: bgpbraverock


From c@@rd|@g@bor @end|ng |rom gm@||@com  Wed Feb  5 15:59:50 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Wed, 5 Feb 2020 14:59:50 +0000
Subject: [R-pkg-devel] 
 Winbuilder 'experimental' toolchain 4-5x slower than
 all other architectures
In-Reply-To: <4afdc811f73861defe241164f1e95d34511f3ae2.camel@braverock.com>
References: <4afdc811f73861defe241164f1e95d34511f3ae2.camel@braverock.com>
Message-ID: <CABtg=KnGk6nSyU9U9X2X738_-Rfd-LAfFycc-CR7M_3Wu6A=Dg@mail.gmail.com>

Can you please show some numbers?

Thanks,
Gabor

On Wed, Feb 5, 2020 at 2:40 PM Brian G. Peterson <brian at braverock.com> wrote:
>
> We've noticed over the past week that Winbuilder/R-Hub's 'experimental'
> Rtools4 toolchain images for Windows are approximately 4-5x slower than
> all other containers to build and check several packages we maintain.
>
> This affects everything, including example timings, where this
> architecture is the only architecture that shows any example run-times
> over 5 seconds. (including Windows under the older toolchain).
>
> Does CRAN expect us to optimize our code for the clearly non-performant
> 'experimental' Windows toolchain?
>
> I'd like to send a new version of our package PerformanceAnalytics to
> CRAN, but the Windows experimental toolchain is preventing a 100% clean
> set of checks.
>
>
> Regards,
>
> Brian
>
> --
> Brian G. Peterson
> ph: +1.773.459.4973
> im: bgpbraverock
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From d@|uedecke @end|ng |rom uke@de  Wed Feb  5 16:05:26 2020
From: d@|uedecke @end|ng |rom uke@de (=?iso-8859-1?Q?Daniel_L=FCdecke?=)
Date: Wed, 5 Feb 2020 16:05:26 +0100
Subject: [R-pkg-devel] Conditionally use packages from Bioconductor
Message-ID: <002001d5dc35$b2cc79a0$18656ce0$@uke.de>

Dear all,

for a package that is already published on CRAN, we plan to include a
function that relies on the M3C-package, which is on Bioconductor only.
Since this function in M3C is not essential for most other functions of our
package, we thought about adding M3C to the "Suggests" field in the
DESCRIPTION file, and from the "Writing R Extensions" page we found that we
could also add the URL to the "Additional_repositories" field of the
DESCRIPTION file (Additional_repositories:
https://bioconductor.org/packages/release/bioc/html/M3C.html). 

Would this be the correct way to conditionally use a package from
Bioconductor in own packages?

Best
Daniel


--

_____________________________________________________________________

Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr. Dr. Uwe Koch-Gromus, Joachim Pr?l?, Marya Verdel
_____________________________________________________________________

SAVE PAPER - THINK BEFORE PRINTING


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Feb  5 16:08:24 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 5 Feb 2020 16:08:24 +0100
Subject: [R-pkg-devel] Conditionally use packages from Bioconductor
In-Reply-To: <002001d5dc35$b2cc79a0$18656ce0$@uke.de>
References: <002001d5dc35$b2cc79a0$18656ce0$@uke.de>
Message-ID: <68779b81-62a9-9a3d-ff40-f8eabcdb3e0d@statistik.tu-dortmund.de>



On 05.02.2020 16:05, Daniel L?decke wrote:
> Dear all,
> 
> for a package that is already published on CRAN, we plan to include a
> function that relies on the M3C-package, which is on Bioconductor only.
> Since this function in M3C is not essential for most other functions of our
> package, we thought about adding M3C to the "Suggests" field in the
> DESCRIPTION file, and from the "Writing R Extensions" page we found that we
> could also add the URL to the "Additional_repositories" field of the
> DESCRIPTION file (Additional_repositories:
> https://bioconductor.org/packages/release/bioc/html/M3C.html).

BioC is a standard repository that you do not need to delcare.

Best,
Uwe Ligges



> Would this be the correct way to conditionally use a package from
> Bioconductor in own packages?
> 
> Best
> Daniel
> 
> 
> --
> 
> _____________________________________________________________________
> 
> Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
> Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr. Dr. Uwe Koch-Gromus, Joachim Pr?l?, Marya Verdel
> _____________________________________________________________________
> 
> SAVE PAPER - THINK BEFORE PRINTING
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From d@|uedecke @end|ng |rom uke@de  Wed Feb  5 16:31:13 2020
From: d@|uedecke @end|ng |rom uke@de (=?utf-8?Q?Daniel_L=C3=BCdecke?=)
Date: Wed, 5 Feb 2020 16:31:13 +0100
Subject: [R-pkg-devel] Conditionally use packages from Bioconductor
In-Reply-To: <68779b81-62a9-9a3d-ff40-f8eabcdb3e0d@statistik.tu-dortmund.de>
References: <002001d5dc35$b2cc79a0$18656ce0$@uke.de>
 <68779b81-62a9-9a3d-ff40-f8eabcdb3e0d@statistik.tu-dortmund.de>
Message-ID: <002101d5dc39$4cab50c0$e601f240$@uke.de>

Thanks for the quick reply! I was a bit uncertain about this due to the CRAN check notes from this package:
https://cran.r-project.org/web/checks/check_results_BiocManager.html

That made me think that the reason why the packages which are not available for testing are hosted on Bioconductor.

Daniel

-----Urspr?ngliche Nachricht-----
Von: Uwe Ligges [mailto:ligges at statistik.tu-dortmund.de] 
Gesendet: Mittwoch, 5. Februar 2020 16:08
An: Daniel L?decke <d.luedecke at uke.de>; r-package-devel at r-project.org
Betreff: Re: [R-pkg-devel] Conditionally use packages from Bioconductor



On 05.02.2020 16:05, Daniel L?decke wrote:
> Dear all,
> 
> for a package that is already published on CRAN, we plan to include a 
> function that relies on the M3C-package, which is on Bioconductor only.
> Since this function in M3C is not essential for most other functions 
> of our package, we thought about adding M3C to the "Suggests" field in 
> the DESCRIPTION file, and from the "Writing R Extensions" page we 
> found that we could also add the URL to the "Additional_repositories" 
> field of the DESCRIPTION file (Additional_repositories:
> https://bioconductor.org/packages/release/bioc/html/M3C.html).

BioC is a standard repository that you do not need to delcare.

Best,
Uwe Ligges



> Would this be the correct way to conditionally use a package from 
> Bioconductor in own packages?
> 
> Best
> Daniel
> 
> 
> --
> 
> _____________________________________________________________________
> 
> Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen 
> Rechts; Gerichtsstand: Hamburg | www.uke.de
> Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr. 
> Dr. Uwe Koch-Gromus, Joachim Pr?l?, Marya Verdel 
> _____________________________________________________________________
> 
> SAVE PAPER - THINK BEFORE PRINTING
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

--

_____________________________________________________________________

Universit?tsklinikum Hamburg-Eppendorf; K?rperschaft des ?ffentlichen Rechts; Gerichtsstand: Hamburg | www.uke.de
Vorstandsmitglieder: Prof. Dr. Burkhard G?ke (Vorsitzender), Prof. Dr. Dr. Uwe Koch-Gromus, Joachim Pr?l?, Marya Verdel
_____________________________________________________________________

SAVE PAPER - THINK BEFORE PRINTING

From br|@n @end|ng |rom br@verock@com  Wed Feb  5 16:32:52 2020
From: br|@n @end|ng |rom br@verock@com (Brian G. Peterson)
Date: Wed, 05 Feb 2020 09:32:52 -0600
Subject: [R-pkg-devel] 
 Winbuilder 'experimental' toolchain 4-5x slower than
 all other architectures
In-Reply-To: <CABtg=KnGk6nSyU9U9X2X738_-Rfd-LAfFycc-CR7M_3Wu6A=Dg@mail.gmail.com>
References: <4afdc811f73861defe241164f1e95d34511f3ae2.camel@braverock.com>
 <CABtg=KnGk6nSyU9U9X2X738_-Rfd-LAfFycc-CR7M_3Wu6A=Dg@mail.gmail.com>
Message-ID: <eecf9a4704e20f7aa2aae0d3b2cb2cef5976ce5e.camel@braverock.com>

For every other architecture, Travis-CI and R-Hub take approximately
10-12 minutes to build and check PerformanceAnalytics.  On the Windows
Rtools4 experimental toolchain, the build/check on Winbuilder and R-Hub 
take over an hour, sometimes as much as an hour and a half.

Non-trivial example timings are similarly 4-5x slower on the Windows
experimental toolchain.

Brian

On Wed, 2020-02-05 at 14:59 +0000, G?bor Cs?rdi wrote:
> Can you please show some numbers?
> 
> Thanks,
> Gabor
> 
> On Wed, Feb 5, 2020 at 2:40 PM Brian G. Peterson <brian at braverock.com
> > wrote:
> > We've noticed over the past week that Winbuilder/R-Hub's
> > 'experimental'
> > Rtools4 toolchain images for Windows are approximately 4-5x slower
> > than
> > all other containers to build and check several packages we
> > maintain.
> > 
> > This affects everything, including example timings, where this
> > architecture is the only architecture that shows any example run-
> > times
> > over 5 seconds. (including Windows under the older toolchain).
> > 
> > Does CRAN expect us to optimize our code for the clearly non-
> > performant
> > 'experimental' Windows toolchain?
> > 
> > I'd like to send a new version of our package PerformanceAnalytics
> > to
> > CRAN, but the Windows experimental toolchain is preventing a 100%
> > clean
> > set of checks.
> > 
> > 
> > Regards,
> > 
> > Brian
> > 
> > --
> > Brian G. Peterson
> > ph: +1.773.459.4973
> > im: bgpbraverock
> > 
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
-- 
Brian G. Peterson
ph: +1.773.459.4973
im: bgpbraverock


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Feb  5 16:42:19 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 5 Feb 2020 16:42:19 +0100
Subject: [R-pkg-devel] 
 Winbuilder 'experimental' toolchain 4-5x slower than
 all other architectures
In-Reply-To: <eecf9a4704e20f7aa2aae0d3b2cb2cef5976ce5e.camel@braverock.com>
References: <4afdc811f73861defe241164f1e95d34511f3ae2.camel@braverock.com>
 <CABtg=KnGk6nSyU9U9X2X738_-Rfd-LAfFycc-CR7M_3Wu6A=Dg@mail.gmail.com>
 <eecf9a4704e20f7aa2aae0d3b2cb2cef5976ce5e.camel@braverock.com>
Message-ID: <da661c90-2775-6d25-e639-cf6242f87d61@statistik.tu-dortmund.de>

Then this is specific to your package, see the overall timings for the 
whole CRAN check:

https://cran.r-project.org/web/checks/check_timings.html

which is 2379156 sec for old and 2516120 sec for the new toolchain, i.e. 
roughly a 6%. Given the machines runs with very different loads it could 
even be the other way round.

And for PerformanceAnalytics I get overall 418 sec for old and 446 sec 
(without vignettes each) for the new toolchain (again, load may have 
varied):
https://cran.r-project.org/web/checks/check_results_PerformanceAnalytics.html



Best,
Uwe Ligges



On 05.02.2020 16:32, Brian G. Peterson wrote:
> For every other architecture, Travis-CI and R-Hub take approximately
> 10-12 minutes to build and check PerformanceAnalytics.  On the Windows
> Rtools4 experimental toolchain, the build/check on Winbuilder and R-Hub
> take over an hour, sometimes as much as an hour and a half.
> 
> Non-trivial example timings are similarly 4-5x slower on the Windows
> experimental toolchain.
> 
> Brian
> 
> On Wed, 2020-02-05 at 14:59 +0000, G?bor Cs?rdi wrote:
>> Can you please show some numbers?
>>
>> Thanks,
>> Gabor
>>
>> On Wed, Feb 5, 2020 at 2:40 PM Brian G. Peterson <brian at braverock.com
>>> wrote:
>>> We've noticed over the past week that Winbuilder/R-Hub's
>>> 'experimental'
>>> Rtools4 toolchain images for Windows are approximately 4-5x slower
>>> than
>>> all other containers to build and check several packages we
>>> maintain.
>>>
>>> This affects everything, including example timings, where this
>>> architecture is the only architecture that shows any example run-
>>> times
>>> over 5 seconds. (including Windows under the older toolchain).
>>>
>>> Does CRAN expect us to optimize our code for the clearly non-
>>> performant
>>> 'experimental' Windows toolchain?
>>>
>>> I'd like to send a new version of our package PerformanceAnalytics
>>> to
>>> CRAN, but the Windows experimental toolchain is preventing a 100%
>>> clean
>>> set of checks.
>>>
>>>
>>> Regards,
>>>
>>> Brian
>>>
>>> --
>>> Brian G. Peterson
>>> ph: +1.773.459.4973
>>> im: bgpbraverock
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Feb  5 16:43:14 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 5 Feb 2020 16:43:14 +0100
Subject: [R-pkg-devel] 
 Winbuilder 'experimental' toolchain 4-5x slower than
 all other architectures
In-Reply-To: <da661c90-2775-6d25-e639-cf6242f87d61@statistik.tu-dortmund.de>
References: <4afdc811f73861defe241164f1e95d34511f3ae2.camel@braverock.com>
 <CABtg=KnGk6nSyU9U9X2X738_-Rfd-LAfFycc-CR7M_3Wu6A=Dg@mail.gmail.com>
 <eecf9a4704e20f7aa2aae0d3b2cb2cef5976ce5e.camel@braverock.com>
 <da661c90-2775-6d25-e639-cf6242f87d61@statistik.tu-dortmund.de>
Message-ID: <0f911c0b-86c4-c026-7aa7-5ac2a2b119a0@statistik.tu-dortmund.de>



On 05.02.2020 16:42, Uwe Ligges wrote:
> Then this is specific to your package, 

I meant the new one, not the one on CRAN which is also similarly quick 
(less than 10% difference).

Best,
Uwe Ligges
see the overall timings for the
> whole CRAN check:
> 
> https://cran.r-project.org/web/checks/check_timings.html
> 
> which is 2379156 sec for old and 2516120 sec for the new toolchain, i.e. 
> roughly a 6%. Given the machines runs with very different loads it could 
> even be the other way round.
> 
> And for PerformanceAnalytics I get overall 418 sec for old and 446 sec 
> (without vignettes each) for the new toolchain (again, load may have 
> varied):
> https://cran.r-project.org/web/checks/check_results_PerformanceAnalytics.html 
> 
> 
> 
> 
> Best,
> Uwe Ligges
> 
> 
> 
> On 05.02.2020 16:32, Brian G. Peterson wrote:
>> For every other architecture, Travis-CI and R-Hub take approximately
>> 10-12 minutes to build and check PerformanceAnalytics.? On the Windows
>> Rtools4 experimental toolchain, the build/check on Winbuilder and R-Hub
>> take over an hour, sometimes as much as an hour and a half.
>>
>> Non-trivial example timings are similarly 4-5x slower on the Windows
>> experimental toolchain.
>>
>> Brian
>>
>> On Wed, 2020-02-05 at 14:59 +0000, G?bor Cs?rdi wrote:
>>> Can you please show some numbers?
>>>
>>> Thanks,
>>> Gabor
>>>
>>> On Wed, Feb 5, 2020 at 2:40 PM Brian G. Peterson <brian at braverock.com
>>>> wrote:
>>>> We've noticed over the past week that Winbuilder/R-Hub's
>>>> 'experimental'
>>>> Rtools4 toolchain images for Windows are approximately 4-5x slower
>>>> than
>>>> all other containers to build and check several packages we
>>>> maintain.
>>>>
>>>> This affects everything, including example timings, where this
>>>> architecture is the only architecture that shows any example run-
>>>> times
>>>> over 5 seconds. (including Windows under the older toolchain).
>>>>
>>>> Does CRAN expect us to optimize our code for the clearly non-
>>>> performant
>>>> 'experimental' Windows toolchain?
>>>>
>>>> I'd like to send a new version of our package PerformanceAnalytics
>>>> to
>>>> CRAN, but the Windows experimental toolchain is preventing a 100%
>>>> clean
>>>> set of checks.
>>>>
>>>>
>>>> Regards,
>>>>
>>>> Brian
>>>>
>>>> -- 
>>>> Brian G. Peterson
>>>> ph: +1.773.459.4973
>>>> im: bgpbraverock
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From edd @end|ng |rom deb|@n@org  Wed Feb  5 16:44:35 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 5 Feb 2020 09:44:35 -0600
Subject: [R-pkg-devel] 
 Winbuilder 'experimental' toolchain 4-5x slower than
 all other architectures
In-Reply-To: <4afdc811f73861defe241164f1e95d34511f3ae2.camel@braverock.com>
References: <4afdc811f73861defe241164f1e95d34511f3ae2.camel@braverock.com>
Message-ID: <24122.58083.576361.916968@rob.eddelbuettel.com>


On 5 February 2020 at 08:39, Brian G. Peterson wrote:
| We've noticed over the past week that Winbuilder/R-Hub's 'experimental'

Are you refering to winbuilder, or to rhub?

| Rtools4 toolchain images for Windows are approximately 4-5x slower than
| all other containers to build and check several packages we maintain.

That made me curious and I just did a quick run at rhub comparing windows
builds of r-devel (ie "old" toolchain) and r-devel using the new tools4. 

AFAICT the difference is due to more prebuilt packages coming in for the
former, and more packages building from source for the latter.

I used a small package with few depends---but critically with the
knitr/rmarkdown stack which leads to stringi building from source building
libicu first. That alone will set up back a good couple of minutes.  FWIW I
ended up with 4 minutes for the old tools versus 24 minutes with rtools4.

But as a cross-check, I used an even smaller package with no depends. And
there the time difference was neglible and both took about 3 minutes.

So I would recommend to try calling rhub _on that platform_ with the added

   check_args="--no-manual --no-vignettes"

argument so suppress vignette and manual builds and tests. I think that may
help you with shorter setup times.
 
| This affects everything, including example timings, where this
| architecture is the only architecture that shows any example run-times
| over 5 seconds. (including Windows under the older toolchain).
| 
| Does CRAN expect us to optimize our code for the clearly non-performant 
| 'experimental' Windows toolchain?
| 
| I'd like to send a new version of our package PerformanceAnalytics to
| CRAN, but the Windows experimental toolchain is preventing a 100% clean
| set of checks.

I think CRAN is fairly reasonable and lenient about run-time of examples, and
the local check time. Could you possibly demonstrate an actual slowdown in
example timings? If there is one, I am sure Jeroen would like to know more.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From sierr@stew m@iii@g oii mi@dspri@g@com  Thu Feb  6 04:46:12 2020
From: sierr@stew m@iii@g oii mi@dspri@g@com (sierr@stew m@iii@g oii mi@dspri@g@com)
Date: Wed, 5 Feb 2020 20:46:12 -0700
Subject: [R-pkg-devel] function name conflict problem
In-Reply-To: <CAJmOi+NzopfvO2PUFcD2Rq8mtCR5hGhX8c2EBfVMtFa+=R1MNA@mail.gmail.com>
References: <00ad01d5dba1$1a11f620$4e35e260$@mindspring.com>
 <CAJmOi+NzopfvO2PUFcD2Rq8mtCR5hGhX8c2EBfVMtFa+=R1MNA@mail.gmail.com>
Message-ID: <001b01d5dc9f$fa5198e0$eef4caa0$@mindspring.com>

Thanks to all who responded.

Correct that package ?karon? is the problem.  The current package has a more meaningful name.  ?karon? was the earlier name; functions have been renamed.

I deleted all the old function files, though they had been Committed to GitHub.  A colleague working with me wrote:

 

I found that one of the objects in /data were loading the old 'karon' library when that data object was loaded. The old 'karon' library was then loading all of the mgcv and ellipse packages, rather than just the specific functions we are using.

 

I have no idea why one of the data objects (used in the examples) would load the library.

 

From: Hugh Parsonage <hugh.parsonage at gmail.com> 
Sent: Wednesday, February 5, 2020 12:31 AM
To: sierrastew at mindspring.com
Cc: r-package-devel at r-project. org <r-package-devel at r-project.org>
Subject: Re: [R-pkg-devel] function name conflict problem

 

Package karon is the problem. Is that package in your depends or imports? Does that package use Depends?

 

On Wed, 5 Feb 2020 at 8:24 am, <sierrastew at mindspring.com <mailto:sierrastew at mindspring.com> > wrote:

In trying to develop a package to be submitted to CRAN, when I do Install
and Reload or devtools::check(), I get the warning:



Warning: replacing previous import 'ellipse::pairs' by 'graphics::pairs'
when loading 'karon'

Warning: replacing previous import 'MVN::mvn' by 'mgcv::mvn' when loading
'karon'



I need one function each from the packages ellipse and mgcv (I do not need
pairs from ellipse and mvn from mgcv).  To restrict to the function that I
need, I have used the commands

@importFrom  ellipse  ellipse

@importFrom  mgcv  in.out



NAMESPACE includes the lines

importFrom(ellipse,ellipse)

importFrom(mgcv,in.out)



However, DESCRIPTION does not restrict the functions imported from ellipse
and mgcv; it has

Imports: MVN, MASS, scatterplot3d, rgl, mgcv, randomForest, rpart, partykit,
Formula, ellipse,..



Do these warnings need to be solved before submitting to CRAN?

Is it necessary to edit DESCRIPTION  If so, what should be done?

Is there some other potential solution?



Thanks!


        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From gkr@emer @end|ng |rom bgc-jen@@mpg@de  Thu Feb  6 15:33:22 2020
From: gkr@emer @end|ng |rom bgc-jen@@mpg@de (Guido Kraemer)
Date: Thu, 6 Feb 2020 15:33:22 +0100
Subject: [R-pkg-devel] CXX14 not defined on Windows
In-Reply-To: <CAFQwRQznzG+HJazLWW1vPbQs7UZkrSxbdgAhi_zLxcC4qYPNjw@mail.gmail.com>
References: <39972e65-3050-6e91-cdd1-3ff272d087a8@bgc-jena.mpg.de>
 <CAFQwRQznzG+HJazLWW1vPbQs7UZkrSxbdgAhi_zLxcC4qYPNjw@mail.gmail.com>
Message-ID: <a2b1ae80-e531-4a7c-4a65-90eba8d9e080@bgc-jena.mpg.de>

I have used the same setup as in Section 1.2.5 of the manual and have 
set CXX_STD=CXX14 in src/Makevars.win. No I also remember that, when I 
sent the package to winbuilder, some time ago, it started compiling (the 
compile failed, but at least it tried).

On 2/5/20 11:47 AM, Ralf Stubner wrote:
> On Tue, Feb 4, 2020 at 5:51 PM Guido Kraemer <gkraemer at bgc-jena.mpg.de> wrote:
>> I have also set `~/.R/Makevars.win` as suggested in the manual "Writing
>> R extensions", Section 1.2.5 "Using C++14 code".
> What exactly do you have in src/Makevars.win? Just the simple CXX_STD
> = CXX14 or the more complex set-up from the end of section 1.2.5..
>
> The rstan package is on CRAN including windows binaries and uses
> C++14. In src/Makevars.win they have
>
> CXX_STD = CXX14
> CXX14STD = -std=c++1y
>
> c.f. https://github.com/stan-dev/rstan/blob/40e93534e771d8c536ddb60fc62e86a5b55596de/rstan/rstan/src/Makevars.win#L2-L3
>
> cheerio
> ralf

-- 
Guido Kraemer
Max Planck Institute for Biogeochemistry Jena
Department for Biogeochemical Integration
Hans-Kn?ll-Str. 10
07745 Jena
Germany

phone: +49 3641 576293
e-mail: gkraemer at bgc-jena.mpg.de


From pg||bert902 @end|ng |rom gm@||@com  Sat Feb  8 09:14:54 2020
From: pg||bert902 @end|ng |rom gm@||@com (Paul Gilbert)
Date: Sat, 8 Feb 2020 03:14:54 -0500
Subject: [R-pkg-devel] translation .mo files
Message-ID: <053184fa-8caa-e09a-603f-9bd37cc2362c@gmail.com>

I have been sent .po and .mo files with message translations for one of 
my packages. The .po file I know goes in the source package po/ 
directory but I have not had .mo files previously. The translator thinks 
the .mo file goes in inst/po. The .mo file seems to be generated from 
the .po file, but I am not sure if that happens in the install of the 
source package, or in some pre-process. I thought I could determine this 
by looking at an installed package, but I don't see .po or .mo files in 
installed packages. So far I have had no luck finding documentation on 
these details. So I have three questions.

-Should the .mo file be included in the package, and if so, where?

-When a package is installed, where does the translation information go 
in the directory structure of the library?

-Is this documented somewhere? (Please not a vague reference to 'Writing 
R Extensions', I've looked there and many other places. I need a section 
or page reference.)

Thanks,
Paul Gilbert


From tho@j|eeper @end|ng |rom gm@||@com  Sat Feb  8 13:11:23 2020
From: tho@j|eeper @end|ng |rom gm@||@com (Thomas J. Leeper)
Date: Sat, 8 Feb 2020 12:11:23 +0000
Subject: [R-pkg-devel] translation .mo files
In-Reply-To: <mailman.5017.13.1581159886.37780.r-package-devel@r-project.org>
References: <mailman.5017.13.1581159886.37780.r-package-devel@r-project.org>
Message-ID: <CAOC91MRMipkJ_LHordv0jja_5pgmnX8vDvU=TD5U47M6MRA1sw@mail.gmail.com>

Hi Paul,

Check out this doc file for suggested workflows:
https://stat.ethz.ch/R-manual/R-devel/library/tools/html/update_pkg_po.html

The key part is that you need to create a .pot file from which the .po
files are generated and edit. Then you need to "install" the
translations (before R CMD build) to get them in the right place. I
wouldn't recommend trying to do any of that by hand.

I once wrote a more convenient version of all of this (no longer on
CRAN) that might be helpful. See, especially this file:
https://github.com/RL10N/msgtools/blob/master/R/install_translations.R.
That package also contains translations so you can see an example of
where everything should end up.

Best,
-Thomas

Thomas J. Leeper

On Sat, Feb 8, 2020 at 11:05 AM <r-package-devel-request at r-project.org> wrote:

> Date: Sat, 8 Feb 2020 03:14:54 -0500
> From: Paul Gilbert <pgilbert902 at gmail.com>
> To: r-package-devel at r-project.org
> Subject: [R-pkg-devel] translation .mo files
> Message-ID: <053184fa-8caa-e09a-603f-9bd37cc2362c at gmail.com>
> Content-Type: text/plain; charset="utf-8"; Format="flowed"
>
> I have been sent .po and .mo files with message translations for one of
> my packages. The .po file I know goes in the source package po/
> directory but I have not had .mo files previously. The translator thinks
> the .mo file goes in inst/po. The .mo file seems to be generated from
> the .po file, but I am not sure if that happens in the install of the
> source package, or in some pre-process. I thought I could determine this
> by looking at an installed package, but I don't see .po or .mo files in
> installed packages. So far I have had no luck finding documentation on
> these details. So I have three questions.
>
> -Should the .mo file be included in the package, and if so, where?
>
> -When a package is installed, where does the translation information go
> in the directory structure of the library?
>
> -Is this documented somewhere? (Please not a vague reference to 'Writing
> R Extensions', I've looked there and many other places. I need a section
> or page reference.)
>
> Thanks,
> Paul Gilbert
>


From v|ncent@@re|-bundock @end|ng |rom umontre@|@c@  Sat Feb  8 15:39:12 2020
From: v|ncent@@re|-bundock @end|ng |rom umontre@|@c@ (Vincent Arel-Bundock)
Date: Sat, 08 Feb 2020 09:39:12 -0500
Subject: [R-pkg-devel] "found non-ASCII strings" with save(version = 2)
In-Reply-To: <b09ec75e-bafa-4959-a90f-ac6123a11559@www.fastmail.com>
References: <b09ec75e-bafa-4959-a90f-ac6123a11559@www.fastmail.com>
Message-ID: <0c69e4d5-17b5-4bb8-99b1-5e4994ecb1aa@www.fastmail.com>

Unsurprisingly, this was due to user error. I found the fix.

Sorry for the email clutter.

vab

On Wed, Feb 5, 2020, at 08:32, Vincent Arel-Bundock wrote:
> Hi everyone,
> 
> My `countrycode` package ships with two data frames of characters in 
> several languages: codelist and codelist_panel.
> 
> I converted all strings to UTF-8 using the `enc2utf8` function, but I 
> also tried several other ways, with the stringi package, etc. As far as 
> I can tell, the strings are all in UTF-8 format now:
> 
> url <- 
> 'https://github.com/vincentarelbundock/countrycode/raw/master/data/codelist.rda'
> temp <- tempfile()
> download.file(url, temp)
> load(temp)
> tmp <- codelist[, sapply(codelist, is.character)]
> library(stringi)
> all(unlist(lapply(tmp, function(x) stri_enc_isutf8((na.omit(x))))))
> [1] TRUE
> 
> After encoding, I saved the data frames with this command:
> 
> save(codelist, file = 'data/codelist.rda', compress = 'xz', version = 2)
> 
> Yet, when I run R CMD check, I get the following warning:
> 
> checking data for non-ASCII characters ... WARNING
>     Warning: found non-ASCII strings
>     'W<c3><bc>rtemberg' in object 'codelist'
>     'S<c3><a3>o Tom<c3><a9> and Pr<c3><ad>ncipe' in object 'codelist'
>     'W<c3><bc>rtemberg' in object 'codelist_panel'
>     'S<c3><a3>o Tom<c3><a9> and Pr<c3><ad>ncipe' in object 'codelist_panel'
> 
> This warning disappears if I save the data frames using `save(version = 
> 3)`. However, I would prefer to use version 2 to keep compatibility 
> with older versions of R.
> 
> Does anyone have suggestions for how to handle this? What did I miss?
> 
> Thanks a lot for your time!
> 
> Vincent
> 
> --
> Vincent Arel-Bundock
> 
> Professeur agr?g? / Associate professor
> http://arelbundock.com
> Universit? de Montr?al, Science politique
> 3150 rue Jean-Brillant, Pav. Lionel-Groulx, C-4020
> Montr?al, Qu?bec, Canada, H3T 1N8

-- 
Vincent Arel-Bundock

Professeur agr?g? / Associate professor
http://arelbundock.com
Universit? de Montr?al, Science politique
3150 rue Jean-Brillant, Pav. Lionel-Groulx, C-4020
Montr?al, Qu?bec, Canada, H3T 1N8


From |uc@r @end|ng |rom |edor@project@org  Sun Feb  9 01:19:27 2020
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Sun, 9 Feb 2020 01:19:27 +0100
Subject: [R-pkg-devel] CRAN RPM repositories available
Message-ID: <CALEXWq2MzizyzkAr_rFwxGuOV_uG=KHzfiE7K1nOcM4=n8JKGQ@mail.gmail.com>

Hi all,

I apologize if you are receiving multiple copies of this email, but
I'm cross-posting because I believe this may be of interest to a wider
audience than just R-SIG-Fedora.

This is to announce that I'm maintaining a Copr project [1] that
provides RPM repos for Fedora 30, 31 and rawhide for most of CRAN
(currently, almost 15k packages), and they are automatically
synchronized with CRAN (removing archived packages and building new
updates) on a daily basis.

Please, feel free to use them. For further details, see the overview
page [1]. Bug reports and feedback are more than welcome [2].

[1] https://copr.fedorainfracloud.org/coprs/iucar/cran
[2] https://github.com/Enchufa2/cran2copr/issues

Regards,
-- 
I?aki ?car


From murr@y@e||ord @end|ng |rom ot@go@@c@nz  Sun Feb  9 09:56:59 2020
From: murr@y@e||ord @end|ng |rom ot@go@@c@nz (Murray Efford)
Date: Sun, 9 Feb 2020 08:56:59 +0000
Subject: [R-pkg-devel] Default number of cores <=2
Message-ID: <1581238619726.54103@otago.ac.nz>

The CRAN Repository Policy (revision 4170) states "If running a package uses multiple threads/cores it must never use more than two simultaneously: the check farm is a shared resource and will typically be running many checks simultaneously" and I try to respect this limit in package example code. However I was recently warned that package functions must not default to >2 cores, even if checks are limited to 2 cores. I see the sense in this, to not hog resources on multi-user systems, but I cannot find it in the documentation. My package 'secr' has unintentionally violated such a policy since October (multithreading with RcppParallel in function 'secr.fit'). No complaints so far, but I'd like to dodge the pain of rejection at my next revision. 

Further, "not all CRAN machines use _R_CHECK_LIMIT_CORES_", so that environment variable cannot be relied upon to apply a 2-core limit during checking.

I would appreciate pointers to the relevant documentation and guidance on how others handle this. Is it unavoidable that for users to exploit multiple cores they must specify a non-default function argument, or similar?



From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sun Feb  9 13:37:15 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sun, 9 Feb 2020 13:37:15 +0100
Subject: [R-pkg-devel] Default number of cores <=2
In-Reply-To: <1581238619726.54103@otago.ac.nz>
References: <1581238619726.54103@otago.ac.nz>
Message-ID: <41d20d3f-0912-6cac-3fe4-070c90e3fccd@statistik.tu-dortmund.de>



On 09.02.2020 09:56, Murray Efford wrote:
> The CRAN Repository Policy (revision 4170) states "If running a package uses multiple threads/cores it must never use more than two simultaneously: the check farm is a shared resource and will typically be running many checks simultaneously" and I try to respect this limit in package example code. However I was recently warned that package functions must not default to >2 cores, even if checks are limited to 2 cores. I see the sense in this, to not hog resources on multi-user systems, but I cannot find it in the documentation. My package 'secr' has unintentionally violated such a policy since October (multithreading with RcppParallel in function 'secr.fit'). No complaints so far, but I'd like to dodge the pain of rejection at my next revision.
> 
> Further, "not all CRAN machines use _R_CHECK_LIMIT_CORES_", so that environment variable cannot be relied upon to apply a 2-core limit during checking.


You  found it: The cited CRAN policies say that you must not use more 
than 2 by default.


> I would appreciate pointers to the relevant documentation and guidance on how others handle this. Is it unavoidable that for users to exploit multiple cores they must specify a non-default function argument, or similar?

Exactly.

Best,
Uwe Ligges


> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From sierr@stew m@iii@g oii mi@dspri@g@com  Sun Feb  9 18:06:30 2020
From: sierr@stew m@iii@g oii mi@dspri@g@com (sierr@stew m@iii@g oii mi@dspri@g@com)
Date: Sun, 9 Feb 2020 10:06:30 -0700
Subject: [R-pkg-devel] Solution to function name duplication problem
Message-ID: <002701d5df6b$469f7e10$d3de7a30$@mindspring.com>

Last week I asked for help with a function name duplication problem.  I had
renamed the project and renamed the functions in the project.  Example:
needed mvn() from the package MVN, but mvn() is also in thle package mgcv,
from which I needed a different function.  Using importFrom, or including
the package only under IMPORT: in DESCRIPTION and package::function() in the
code did not solve the problem.  The initial project was listed in the set
of files under the Packages tab.  Deleting it solved the problem.


	[[alternative HTML version deleted]]


From murr@y@e||ord @end|ng |rom ot@go@@c@nz  Sun Feb  9 19:22:16 2020
From: murr@y@e||ord @end|ng |rom ot@go@@c@nz (Murray Efford)
Date: Sun, 9 Feb 2020 18:22:16 +0000
Subject: [R-pkg-devel] Default number of cores <=2
In-Reply-To: <41d20d3f-0912-6cac-3fe4-070c90e3fccd@statistik.tu-dortmund.de>
References: <1581238619726.54103@otago.ac.nz>,
 <41d20d3f-0912-6cac-3fe4-070c90e3fccd@statistik.tu-dortmund.de>
Message-ID: <1581272536312.37128@otago.ac.nz>

Except that the cited wording cannot be literally correct ("never use more than two") and therefore appears to refer only to the check process. Some rewording may be needed if the intended meaning is "never default to more than two".
Thanks, Uwe, for your efforts to make me understand.
Murray
________________________________________
From: Uwe Ligges <ligges at statistik.tu-dortmund.de>
Sent: Monday, 10 February 2020 1:37 a.m.
To: Murray Efford; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Default number of cores <=2

On 09.02.2020 09:56, Murray Efford wrote:
> The CRAN Repository Policy (revision 4170) states "If running a package uses multiple threads/cores it must never use more than two simultaneously: the check farm is a shared resource and will typically be running many checks simultaneously" and I try to respect this limit in package example code. However I was recently warned that package functions must not default to >2 cores, even if checks are limited to 2 cores. I see the sense in this, to not hog resources on multi-user systems, but I cannot find it in the documentation. My package 'secr' has unintentionally violated such a policy since October (multithreading with RcppParallel in function 'secr.fit'). No complaints so far, but I'd like to dodge the pain of rejection at my next revision.
>
> Further, "not all CRAN machines use _R_CHECK_LIMIT_CORES_", so that environment variable cannot be relied upon to apply a 2-core limit during checking.


You  found it: The cited CRAN policies say that you must not use more
than 2 by default.


> I would appreciate pointers to the relevant documentation and guidance on how others handle this. Is it unavoidable that for users to exploit multiple cores they must specify a non-default function argument, or similar?

Exactly.

Best,
Uwe Ligges


>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Cmurray.efford%40otago.ac.nz%7C6bfde86da46144efdcfc08d7ad5cd2fc%7C0225efc578fe4928b1579ef24809e9ba%7C1%7C0%7C637168486579693244&amp;sdata=XoirKkHlZFgqRutkhKvbKidl3AHm6aGTWfXBswN4HsA%3D&amp;reserved=0
>


From btyner @end|ng |rom gm@||@com  Sun Feb  9 17:14:06 2020
From: btyner @end|ng |rom gm@||@com (Benjamin Tyner)
Date: Sun, 9 Feb 2020 11:14:06 -0500
Subject: [R-pkg-devel] use of getNativeSymbolInfo
Message-ID: <bfbc1bd8-a24b-655a-b842-8d00c2d1d146@gmail.com>

Hello,

Using package nlme as an example, where there is a registered routine 
fit_gnls:

 > library(nlme)
 > getDLLRegisteredRoutines("nlme")$.C$fit_gnls
$name
[1] "fit_gnls"

$address
<pointer: 0x55f8f99a93c0>
attr(,"class")
[1] "RegisteredNativeSymbol"

$dll
DLL name: nlme
Filename: /home/btyner/R-77784/lib/R/library/nlme/libs/nlme.so
Dynamic lookup: FALSE

$numParameters
[1] 10

attr(,"class")
[1] "CRoutine"???????? "NativeSymbolInfo"

However when I tried this,

 > getNativeSymbolInfo(name = "fit_gnls", PACKAGE = "nlme")

it says:

Error in FUN(X[[i]], ...) : no such symbol fit_gnls in package nlme

so I am wondering what I'm doing wrong...

Regards,
Ben


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Mon Feb 10 09:24:21 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 10 Feb 2020 02:24:21 -0600
Subject: [R-pkg-devel] revdepcheck::revdep_check interpretation problem
Message-ID: <286af54d-2756-073c-d3b2-39e41f33f320@effectivedefense.org>

Hello, All:


 ????? I just ran "revdepcheck::revdep_check" on my development version 
of "https://github.com/sbgraves237/Ecdat";? copied below. It ended with 
"OK: 16, BROKEN: 0".? That sounds good, except that it also says 
"gamclass 0.58:? E: 1", so I'm confused.


 ????? Two questions:


 ??? ??????? 1.? What does the "E: 1" for "gamclass" mean?? It sounds 
like an error to me, but that contradicts the final message,
"OK: 16, BROKEN: 0".


 ??? ??????? 2.? How can I even find gamclass?? It's not available on 
CRAN.? There, Ecdat only has 15 reverse dependencies, not 16.? I tried 
install.packages('gamclass');? it said, "package ?gamclass? is not 
available".? I tried githubinstall::githubinstall('gamclass'). It said:


Select a number or, hit 0 to cancel.

1: pik-piam/magclass??? Tools for managing classroom organizations
2: tscheypidi/magclass? Tools for managing classroom organizations
3: rundel/ghclass?????? Tools for managing classroom organizations


 ????? ** None of that sounds like "gamclass".


 ????? What do you suggest?


 ????? I should probably ignore this?
 ????? Thanks,
 ????? Spencer Graves


 ?revdepcheck::revdep_check(Ecdat_dir)
Registered S3 method overwritten by 'revdepcheck':
 ? method??????????? from
 ? print.maintainers devtools
?? INIT ???????????????????????????????????? Computing revdeps ??
?? INSTALL ???????????????????????????????????????? 2 versions ??
Installing CRAN version of Ecdat
Installing DEV version of Ecdat
?? CHECK ????????????????????????????????????????? 16 packages ??
? catdata 1.2.2????????????????????????? ?? E: 0???? | W: 0???? | N: 0
? DCchoice 0.0.15??????????????????????? ?? E: 0???? | W: 0???? | N: 0
? discSurv 1.4.1???????????????????????? ?? E: 0???? | W: 0???? | N: 0
? DStree 1.0???????????????????????????? ?? E: 0???? | W: 0???? | N: 1
? DWreg 2.0????????????????????????????? ?? E: 0???? | W: 0???? | N: 0
? Ecfun 0.2-2??????????????????????????? ?? E: 0???? | W: 0???? | N: 0
? flexmix 2.3-15???????????????????????? ?? E: 0???? | W: 0???? | N: 0
? gamclass 0.58????????????????????????? ?? E: 1???? | W: 0???? | N: 0
? gk 0.5.1?????????????????????????????? ?? E: 0???? | W: 0???? | N: 0
? micEcon 0.6-14???????????????????????? ?? E: 0???? | W: 1???? | N: 0
? micEconIndex 0.1-6???????????????????? ?? E: 0???? | W: 0???? | N: 0
? miscTools 0.6-26?????????????????????? ?? E: 0???? | W: 0???? | N: 0
? mssm 0.1.3???????????????????????????? ?? E: 0???? | W: 0???? | N: 0
? plm 2.2-0????????????????????????????? ?? E: 0???? | W: 0???? | N: 0
? sampleSelection 1.2-6????????????????? ?? E: 0???? | W: 0???? | N: 0
? SeleMix 1.0.1????????????????????????? ?? E: 0???? | W: 0???? | N: 0
OK: 16
BROKEN: 0
Total time: 36 min


From |uc@r @end|ng |rom |edor@project@org  Mon Feb 10 09:32:41 2020
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Mon, 10 Feb 2020 09:32:41 +0100
Subject: [R-pkg-devel] revdepcheck::revdep_check interpretation problem
In-Reply-To: <286af54d-2756-073c-d3b2-39e41f33f320@effectivedefense.org>
References: <286af54d-2756-073c-d3b2-39e41f33f320@effectivedefense.org>
Message-ID: <CALEXWq0qvQ_UaMwxMRtGnCRZojHYi=psWEEkPjW5M62+qMVR0w@mail.gmail.com>

El lun., 10 feb. 2020 9:24, Spencer Graves <
spencer.graves at effectivedefense.org> escribi?:

> Hello, All:
>
>
>        I just ran "revdepcheck::revdep_check" on my development version
> of "https://github.com/sbgraves237/Ecdat";  copied below. It ended with
> "OK: 16, BROKEN: 0".  That sounds good, except that it also says
> "gamclass 0.58:  E: 1", so I'm confused.
>
>
>        Two questions:
>
>
>              1.  What does the "E: 1" for "gamclass" mean?  It sounds
> like an error to me, but that contradicts the final message,
> "OK: 16, BROKEN: 0".
>
>
>              2.  How can I even find gamclass?  It's not available on
> CRAN.  There, Ecdat only has 15 reverse dependencies, not 16.  I tried
> install.packages('gamclass');  it said, "package ?gamclass? is not
> available".  I tried githubinstall::githubinstall('gamclass'). It said:
>

gamclass existed on CRAN, but was archived:
https://cran.r-project.org/web/packages/gamclass. Just ignore it.

I?aki


>
> Select a number or, hit 0 to cancel.
>
> 1: pik-piam/magclass    Tools for managing classroom organizations
> 2: tscheypidi/magclass  Tools for managing classroom organizations
> 3: rundel/ghclass       Tools for managing classroom organizations
>
>
>        ** None of that sounds like "gamclass".
>
>
>        What do you suggest?
>
>
>        I should probably ignore this?
>        Thanks,
>        Spencer Graves
>
>
>   revdepcheck::revdep_check(Ecdat_dir)
> Registered S3 method overwritten by 'revdepcheck':
>    method            from
>    print.maintainers devtools
> ?? INIT ???????????????????????????????????? Computing revdeps ??
> ?? INSTALL ???????????????????????????????????????? 2 versions ??
> Installing CRAN version of Ecdat
> Installing DEV version of Ecdat
> ?? CHECK ????????????????????????????????????????? 16 packages ??
> ? catdata 1.2.2                          ?? E: 0     | W: 0     | N: 0
> ? DCchoice 0.0.15                        ?? E: 0     | W: 0     | N: 0
> ? discSurv 1.4.1                         ?? E: 0     | W: 0     | N: 0
> ? DStree 1.0                             ?? E: 0     | W: 0     | N: 1
> ? DWreg 2.0                              ?? E: 0     | W: 0     | N: 0
> ? Ecfun 0.2-2                            ?? E: 0     | W: 0     | N: 0
> ? flexmix 2.3-15                         ?? E: 0     | W: 0     | N: 0
> ? gamclass 0.58                          ?? E: 1     | W: 0     | N: 0
> ? gk 0.5.1                               ?? E: 0     | W: 0     | N: 0
> ? micEcon 0.6-14                         ?? E: 0     | W: 1     | N: 0
> ? micEconIndex 0.1-6                     ?? E: 0     | W: 0     | N: 0
> ? miscTools 0.6-26                       ?? E: 0     | W: 0     | N: 0
> ? mssm 0.1.3                             ?? E: 0     | W: 0     | N: 0
> ? plm 2.2-0                              ?? E: 0     | W: 0     | N: 0
> ? sampleSelection 1.2-6                  ?? E: 0     | W: 0     | N: 0
> ? SeleMix 1.0.1                          ?? E: 0     | W: 0     | N: 0
> OK: 16
> BROKEN: 0
> Total time: 36 min
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Mon Feb 10 09:58:16 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Mon, 10 Feb 2020 08:58:16 +0000
Subject: [R-pkg-devel] revdepcheck::revdep_check interpretation problem
In-Reply-To: <286af54d-2756-073c-d3b2-39e41f33f320@effectivedefense.org>
References: <286af54d-2756-073c-d3b2-39e41f33f320@effectivedefense.org>
Message-ID: <CABtg=K=vJT3M5G1nEtgQ_kyYR8pKk_tttZjJnOAZ=LFSWXP5Jw@mail.gmail.com>

On Mon, Feb 10, 2020 at 8:24 AM Spencer Graves
<spencer.graves at effectivedefense.org> wrote:
[...]
>              1.  What does the "E: 1" for "gamclass" mean?  It sounds
> like an error to me, but that contradicts the final message,
> "OK: 16, BROKEN: 0".

? gamclass 0.58                          ?? E: 1     | W: 0     | N: 0

means that gamclass triggered the same error for both the CRAN version
and the dev version of your package. Which is fine for you, hence the
tick mark.

>              2.  How can I even find gamclass?  It's not available on
> CRAN.
[...]

It was probably still on CRAN when you started the checks, but then it
was archived in the meanwhile. If you run `revdep_report()` then AFAIR
there is a link there to the package.

Gabor

[...]


From gkr@emer @end|ng |rom bgc-jen@@mpg@de  Mon Feb 10 15:31:37 2020
From: gkr@emer @end|ng |rom bgc-jen@@mpg@de (Guido Kraemer)
Date: Mon, 10 Feb 2020 15:31:37 +0100
Subject: [R-pkg-devel] CXX14 not defined on Windows
In-Reply-To: <24121.42631.752571.885064@rob.eddelbuettel.com>
References: <39972e65-3050-6e91-cdd1-3ff272d087a8@bgc-jena.mpg.de>
 <24121.42631.752571.885064@rob.eddelbuettel.com>
Message-ID: <2740c2dc-532c-0683-bc45-7545a2cf52ce@bgc-jena.mpg.de>

I had some success using RTools40 and the corresponding R testing 
version. I had to do a lot of MSYS shenanigans and couldn't get static 
compilation to work, but the binary package seems to work just fine in R 
3.6.2.

It makes me very happy to see that R will get an updated toolchain and a 
proper MSYS environment with a package manager! Is there a due date for 
R 4.0.0?

Guido

On 2/4/20 6:14 PM, Dirk Eddelbuettel wrote:
> On 4 February 2020 at 17:51, Guido Kraemer wrote:
> | I am testing building a package on Windows. The package requires C++14.
>
> You will have to wait.
>
> The current Rtools is at g++ 4.9.3 which (barely) supports C++11.  We all
> keep our fingers crossed as the replacement Rtools would bring g++ 8.*.  This
> may happen with R 4.0.0 in April but I have no more details either.
>
> Dirk
>
-- 
Guido Kraemer
Max Planck Institute for Biogeochemistry Jena
Department for Biogeochemical Integration
Hans-Kn?ll-Str. 10
07745 Jena
Germany

phone: +49 3641 576293
e-mail: gkraemer at bgc-jena.mpg.de


From j|ox @end|ng |rom mcm@@ter@c@  Mon Feb 10 16:15:14 2020
From: j|ox @end|ng |rom mcm@@ter@c@ (Fox, John)
Date: Mon, 10 Feb 2020 15:15:14 +0000
Subject: [R-pkg-devel] translation .mo files
In-Reply-To: <25768_1581149714_0188FDtn012660_053184fa-8caa-e09a-603f-9bd37cc2362c@gmail.com>
References: <25768_1581149714_0188FDtn012660_053184fa-8caa-e09a-603f-9bd37cc2362c@gmail.com>
Message-ID: <950AF541-C0DA-4A00-82CB-2CAFE374029C@mcmaster.ca>

Dear Paul,

Here's some information that I prepared for translators of the Rcmdr package, slightly edited to make it more generic. Perhaps you'll find it useful:

R provides a general facility for translating messages from English to other languages using the GNU gettext translation tools <http://www.gnu.org/software/gettext/>. These tools are used both for R itself and for R packages, though most packages are not set up to allow translation.

How translation works in R is described in a 2005 article in R News, available at <https://cran.r-project.org/doc/Rnews/Rnews_2005-1.pdf>. There is also some information in the R manuals, at <https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Internationalization>, <https://cran.r-project.org/doc/manuals/R-admin.html#Localization-of-messages>, and at <http://developer.r-project.org/Translations30.html>.

The general procedure for preparing translations is very simple. I'll explain it briefly in case you're unfamiliar with it. The package sources include the plain-text file <package-name>.pot in the package po subdirectory. You would copy this file to R-xx.po (where xx is the usually two-character code for your language -- e.g., fr for French, thus R-fr.po) and then edit that file to provide translations of the Rcmdr messages. (In your case, you could work backwards from the .po file you received to make a .pot file.) 

You would then use the GNU gettext tools (available at <https://www.gnu.org/software/gettext/>) to compile your .po file into a .mo file, conventionally named R-<package-name>.mo. The .mo file would be placed in the package sources at inst/po/xx/LC_MESSAGES/ . You would then test your translation by building and installing the package. 

I hope this helps,
 John

  -----------------------------
  John Fox, Professor Emeritus
  McMaster University
  Hamilton, Ontario, Canada
  Web: http::/socserv.mcmaster.ca/jfox

> On Feb 8, 2020, at 3:14 AM, Paul Gilbert <pgilbert902 at gmail.com> wrote:
> 
> I have been sent .po and .mo files with message translations for one of my packages. The .po file I know goes in the source package po/ directory but I have not had .mo files previously. The translator thinks the .mo file goes in inst/po. The .mo file seems to be generated from the .po file, but I am not sure if that happens in the install of the source package, or in some pre-process. I thought I could determine this by looking at an installed package, but I don't see .po or .mo files in installed packages. So far I have had no luck finding documentation on these details. So I have three questions.
> 
> -Should the .mo file be included in the package, and if so, where?
> 
> -When a package is installed, where does the translation information go in the directory structure of the library?
> 
> -Is this documented somewhere? (Please not a vague reference to 'Writing R Extensions', I've looked there and many other places. I need a section or page reference.)
> 
> Thanks,
> Paul Gilbert
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From hongoo| @end|ng |rom m|cro@o|t@com  Mon Feb 10 17:50:07 2020
From: hongoo| @end|ng |rom m|cro@o|t@com (Hong Ooi)
Date: Mon, 10 Feb 2020 16:50:07 +0000
Subject: [R-pkg-devel] R CMD build hanging for some but not all packages
Message-ID: <KU1P153MB0102191984A46EC91AF80977A6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>

This is with R 3.6.2 on Windows 10 Pro 1909.

In the last couple of weeks, devtools::build() and devtools::check() have started hanging on some, but not all, of my packages. After some poking around, I discovered that it's actually R CMD build that is having problems, right after the "checking for file 'DESCRIPTION'" step.

A reproducible example can be found by cloning my AzureStor package: https://github.com/Azure/AzureStor If you run "R CMD build ." in the package directory, it should hang. This is a relatively simple package that doesn't require compilation, although it does import some commonly-used packages like httr, curl, jsonlite and xml2.

As far as I can tell, R on Ubuntu works fine. What's going on?


From hongoo| @end|ng |rom m|cro@o|t@com  Mon Feb 10 17:53:49 2020
From: hongoo| @end|ng |rom m|cro@o|t@com (Hong Ooi)
Date: Mon, 10 Feb 2020 16:53:49 +0000
Subject: [R-pkg-devel] R CMD build hanging for some but not all packages
In-Reply-To: <KU1P153MB0102191984A46EC91AF80977A6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
References: <KU1P153MB0102191984A46EC91AF80977A6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
Message-ID: <KU1P153MB01028E3C352BA3B9A10BE55BA6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>

Actually, cancel that: it finished successfully, but took 3 minutes to prepare the package:

r$> devtools::build()
v  checking for file 'C:\Users\hongo\Documents\GitHub\AzureStor/DESCRIPTION'        
-  preparing 'AzureStor': (3m 4s)
v  checking DESCRIPTION meta-information ...
-  installing the package to build vignettes
v  creating vignettes (6.5s)
-  checking for LF line-endings in source and make files and shell scripts (13.8s)  
-  checking for empty or unneeded directories
-  building 'AzureStor_3.1.0.9000.tar.gz'

This is really weird, I'm used to the package prep step taking 10 seconds at most.


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Hong Ooi via R-package-devel
Sent: Tuesday, 11 February 2020 3:50 AM
To: r-package-devel at r-project.org
Subject: [EXTERNAL] [R-pkg-devel] R CMD build hanging for some but not all packages

This is with R 3.6.2 on Windows 10 Pro 1909.

In the last couple of weeks, devtools::build() and devtools::check() have started hanging on some, but not all, of my packages. After some poking around, I discovered that it's actually R CMD build that is having problems, right after the "checking for file 'DESCRIPTION'" step.

A reproducible example can be found by cloning my AzureStor package: https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FAzure%2FAzureStor&amp;data=02%7C01%7Chongooi%40microsoft.com%7Cae76a58d39b64b491a1008d7ae4955a9%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637169502304943506&amp;sdata=RW3TQM2D%2F3X43oGhiywDyKd%2F4oo5hFkOoVwZTUe9cOw%3D&amp;reserved=0 If you run "R CMD build ." in the package directory, it should hang. This is a relatively simple package that doesn't require compilation, although it does import some commonly-used packages like httr, curl, jsonlite and xml2.

As far as I can tell, R on Ubuntu works fine. What's going on?

______________________________________________
R-package-devel at r-project.org mailing list
https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7Cae76a58d39b64b491a1008d7ae4955a9%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637169502304943506&amp;sdata=DPyD6zGGcxq41irkaMfMLyjnmqSB96PiIxIh9N2p%2Ft4%3D&amp;reserved=0


From c@@rd|@g@bor @end|ng |rom gm@||@com  Mon Feb 10 17:58:11 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Mon, 10 Feb 2020 16:58:11 +0000
Subject: [R-pkg-devel] R CMD build hanging for some but not all packages
In-Reply-To: <KU1P153MB01028E3C352BA3B9A10BE55BA6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
References: <KU1P153MB0102191984A46EC91AF80977A6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <KU1P153MB01028E3C352BA3B9A10BE55BA6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
Message-ID: <CABtg=Kms+_1w+KYrb4EQn6XqNNqWtH9-r3ixP7X1G=q7WeagNA@mail.gmail.com>

Maybe you have large, ignored files in the package directory? R first
creates a copy of the whole directory and only applies `.Rbuildignore`
after that.

Gabor

On Mon, Feb 10, 2020 at 4:54 PM Hong Ooi via R-package-devel
<r-package-devel at r-project.org> wrote:
>
> Actually, cancel that: it finished successfully, but took 3 minutes to prepare the package:
>
> r$> devtools::build()
> v  checking for file 'C:\Users\hongo\Documents\GitHub\AzureStor/DESCRIPTION'
> -  preparing 'AzureStor': (3m 4s)
> v  checking DESCRIPTION meta-information ...
> -  installing the package to build vignettes
> v  creating vignettes (6.5s)
> -  checking for LF line-endings in source and make files and shell scripts (13.8s)
> -  checking for empty or unneeded directories
> -  building 'AzureStor_3.1.0.9000.tar.gz'
>
> This is really weird, I'm used to the package prep step taking 10 seconds at most.
>
>
> -----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Hong Ooi via R-package-devel
> Sent: Tuesday, 11 February 2020 3:50 AM
> To: r-package-devel at r-project.org
> Subject: [EXTERNAL] [R-pkg-devel] R CMD build hanging for some but not all packages
>
> This is with R 3.6.2 on Windows 10 Pro 1909.
>
> In the last couple of weeks, devtools::build() and devtools::check() have started hanging on some, but not all, of my packages. After some poking around, I discovered that it's actually R CMD build that is having problems, right after the "checking for file 'DESCRIPTION'" step.
>
> A reproducible example can be found by cloning my AzureStor package: https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FAzure%2FAzureStor&amp;data=02%7C01%7Chongooi%40microsoft.com%7Cae76a58d39b64b491a1008d7ae4955a9%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637169502304943506&amp;sdata=RW3TQM2D%2F3X43oGhiywDyKd%2F4oo5hFkOoVwZTUe9cOw%3D&amp;reserved=0 If you run "R CMD build ." in the package directory, it should hang. This is a relatively simple package that doesn't require compilation, although it does import some commonly-used packages like httr, curl, jsonlite and xml2.
>
> As far as I can tell, R on Ubuntu works fine. What's going on?
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7Cae76a58d39b64b491a1008d7ae4955a9%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637169502304943506&amp;sdata=DPyD6zGGcxq41irkaMfMLyjnmqSB96PiIxIh9N2p%2Ft4%3D&amp;reserved=0
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From hongoo| @end|ng |rom m|cro@o|t@com  Mon Feb 10 18:10:41 2020
From: hongoo| @end|ng |rom m|cro@o|t@com (Hong Ooi)
Date: Mon, 10 Feb 2020 17:10:41 +0000
Subject: [R-pkg-devel] 
 [EXTERNAL] Re: R CMD build hanging for some but not all packages
In-Reply-To: <CABtg=Kms+_1w+KYrb4EQn6XqNNqWtH9-r3ixP7X1G=q7WeagNA@mail.gmail.com>
References: <KU1P153MB0102191984A46EC91AF80977A6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <KU1P153MB01028E3C352BA3B9A10BE55BA6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <CABtg=Kms+_1w+KYrb4EQn6XqNNqWtH9-r3ixP7X1G=q7WeagNA@mail.gmail.com>
Message-ID: <KU1P153MB01023791CAECB3F0E6AFA800A6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>

That was it; I had a big subdirectory full of stuff I was using to test the package. Removing it caused the build time to drop back to 15 seconds. Thanks!

-----Original Message-----
From: G?bor Cs?rdi <csardi.gabor at gmail.com> 
Sent: Tuesday, 11 February 2020 3:58 AM
To: Hong Ooi <hongooi at microsoft.com>
Cc: r-package-devel at r-project.org
Subject: [EXTERNAL] Re: [R-pkg-devel] R CMD build hanging for some but not all packages

Maybe you have large, ignored files in the package directory? R first
creates a copy of the whole directory and only applies `.Rbuildignore`
after that.

Gabor

On Mon, Feb 10, 2020 at 4:54 PM Hong Ooi via R-package-devel
<r-package-devel at r-project.org> wrote:
>
> Actually, cancel that: it finished successfully, but took 3 minutes to prepare the package:
>
> r$> devtools::build()
> v  checking for file 'C:\Users\hongo\Documents\GitHub\AzureStor/DESCRIPTION'
> -  preparing 'AzureStor': (3m 4s)
> v  checking DESCRIPTION meta-information ...
> -  installing the package to build vignettes
> v  creating vignettes (6.5s)
> -  checking for LF line-endings in source and make files and shell scripts (13.8s)
> -  checking for empty or unneeded directories
> -  building 'AzureStor_3.1.0.9000.tar.gz'
>
> This is really weird, I'm used to the package prep step taking 10 seconds at most.
>
>
> -----Original Message-----
> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Hong Ooi via R-package-devel
> Sent: Tuesday, 11 February 2020 3:50 AM
> To: r-package-devel at r-project.org
> Subject: [EXTERNAL] [R-pkg-devel] R CMD build hanging for some but not all packages
>
> This is with R 3.6.2 on Windows 10 Pro 1909.
>
> In the last couple of weeks, devtools::build() and devtools::check() have started hanging on some, but not all, of my packages. After some poking around, I discovered that it's actually R CMD build that is having problems, right after the "checking for file 'DESCRIPTION'" step.
>
> A reproducible example can be found by cloning my AzureStor package: https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FAzure%2FAzureStor&amp;data=02%7C01%7Chongooi%40microsoft.com%7C262a7710f7e945edc5fc08d7ae4a7076%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637169507045837081&amp;sdata=jZnomGihKN%2F4ObGTn5B6GP%2FFtO9jtE1PiNcv%2F6sd6n0%3D&amp;reserved=0 If you run "R CMD build ." in the package directory, it should hang. This is a relatively simple package that doesn't require compilation, although it does import some commonly-used packages like httr, curl, jsonlite and xml2.
>
> As far as I can tell, R on Ubuntu works fine. What's going on?
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7C262a7710f7e945edc5fc08d7ae4a7076%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637169507045837081&amp;sdata=n4ZJZ3hqj7lwFazyUeZ3ECcN8da%2BE%2F3tPTvevWAgPXU%3D&amp;reserved=0
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7C262a7710f7e945edc5fc08d7ae4a7076%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637169507045837081&amp;sdata=n4ZJZ3hqj7lwFazyUeZ3ECcN8da%2BE%2F3tPTvevWAgPXU%3D&amp;reserved=0

From |uc@@ @end|ng |rom |uc@@ne||@com  Mon Feb 10 18:31:23 2020
From: |uc@@ @end|ng |rom |uc@@ne||@com (Lucas Nell)
Date: Mon, 10 Feb 2020 11:31:23 -0600
Subject: [R-pkg-devel] CRAN cannot find libraries on Windows
In-Reply-To: <57efebd5-2b62-36cc-8a8c-7a7c8bef7543@fredhutch.org>
References: <CAKekK4s27MLEHT7gK8PNj-gQnOnuwJ1oA5S21U4UKnz2rnpZug@mail.gmail.com>
 <b4b4960a-fe78-b238-e36b-df477a6fcb2c@statistik.tu-dortmund.de>
 <BYAPR04MB5526A452B02906E4C6785AC8F90B0@BYAPR04MB5526.namprd04.prod.outlook.com>
 <53492baf-c8a1-7882-adcf-8ae28dc57731@gmail.com>
 <b196164c-ae75-ed40-c561-b9b8023c122d@fredhutch.org>
 <CAKekK4vqURBuPhMSbRPFsjwXEvLpJdqXZ0pXtD2kZaM8SUvncw@mail.gmail.com>
 <57efebd5-2b62-36cc-8a8c-7a7c8bef7543@fredhutch.org>
Message-ID: <CAKekK4uKCjm_B3VgCfB0aEBdKJ+ak-zrU=cKaou-qSaXQpb6=A@mail.gmail.com>

Hello Herv?,

Thanks for confirming what I was thinking. Does anyone know how long it
should take for win-builder to use the updated Rhtslib version? I just
tried it again today, and it's still using the older version.

Cheers,
Lucas


On Sun, Feb 2, 2020 at 11:34 PM Herv? Pag?s <hpages at fredhutch.org> wrote:

> To me it looks like the situation on AppVeyor and on win-builder is not
> quite the same:
>
> - On AppVeyor the compiler and linker are expecting the "external
> software" to be in C:/projects/BUILD/R-source-win32/extsoft/ and no
> longer in C:/extsoft/lib/i386. This indicates that AppVeyor is using the
> latest Rhtslib (1.91.1). However the linker still cannot find libraries
> -lcurl, -lrtmp, -lssl, etc... Not sure why. Are curl.a, rtmp.a, ssl.a,
> really there? If not, this looks like a configuration issue with AppVeyor.
>
> - On win-builder the linker is still using -LC:/extsoft/lib/i386 which
> indicates that it's not using the latest Rhtslib.
>
> H.
>
>
> On 2/2/20 11:55, Lucas Nell wrote:
> >
> > Thanks everyone for your help. It's still giving me the same error on
> > the development win-builder and on AppVeyor. Truncated install logs for
> > both are below. I'm not sure that Rhtslib 1.91.1 (the one with the new
> > changes) is being used on win-builder, which is why I've included the
> > AppVeyor results?hopefully they're useful for what might happen on CRAN.
> >
> >
> > ## APPVEYOR
> >
> > * installing *source* package 'jackalope' ...
> > ** using staged installation
> > ** libs
> >
> > *** arch - i386
> > C:/Rtools/mingw_32/bin/g++  -std=gnu++11
> > -I"C:/RLibrary/zlibbioc/include" -I"c:/R/include" -DNDEBUG
> > -I../inst/include/ -D_FILE_OFFSET_BITS=64 -I'C:/RLibrary/Rcpp/include'
> > -I'C:/RLibrary/RcppArmadillo/include'
> > -I'C:/RLibrary/RcppProgress/include' -I'C:/RLibrary/Rhtslib/include'
> > -I'C:/RLibrary/zlibbioc/include'
> > -I"C:/projects/BUILD/R-source-win32/extsoft/include"     -O2 -Wall
> >   -mfpmath=sse -msse2 -c RcppExports.cpp -o RcppExports.o
> > C:/Rtools/mingw_32/bin/g++  -std=gnu++11
> > -I"C:/RLibrary/zlibbioc/include" -I"c:/R/include" -DNDEBUG
> > -I../inst/include/ -D_FILE_OFFSET_BITS=64 -I'C:/RLibrary/Rcpp/include'
> > -I'C:/RLibrary/RcppArmadillo/include'
> > -I'C:/RLibrary/RcppProgress/include' -I'C:/RLibrary/Rhtslib/include'
> > -I'C:/RLibrary/zlibbioc/include'
> > -I"C:/projects/BUILD/R-source-win32/extsoft/include"     -O2 -Wall
> >   -mfpmath=sse -msse2 -c alter_reference.cpp -o alter_reference.o
> >
> > [...]
> >
> > C:/Rtools/mingw_32/bin/g++ -shared -s -static-libgcc -o jackalope.dll
> > tmp.def RcppExports.o alter_reference.o create_sequences.o
> > hts_illumina.o hts_pacbio.o io_fasta.o io_ms.o io_vcf.o mutator.o
> > mutator_indels.o mutator_subs.o phylogenomics.o ref_var_access.o
> > sub_models.o util.o var_classes.o vars_ssites.o -lws2_32 -Lc:/R/bin/i386
> > -lRlapack -Lc:/R/bin/i386 -lRblas -lgfortran -lm -lquadmath
> > C:/RLibrary/Rhtslib/usrlib/i386/libhts.a
> > -LC:/projects/BUILD/R-source-win32/extsoft/lib/i386 -lcurl -lrtmp -lssl
> > -lssh2 -lcrypto -lgdi32 -lz -lws2_32 -lwldap32 -lwinmm -lidn
> > -LC:/RLibrary/zlibbioc/libs/i386 -lzlib1bioc
> > -LC:/projects/BUILD/R-source-win32/extsoft/lib/i386
> > -LC:/projects/BUILD/R-source-win32/extsoft/lib -Lc:/R/bin/i386 -lR
> >
> C:/Rtools/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>
> > cannot find -lcurl
> >
> C:/Rtools/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>
> > cannot find -lrtmp
> >
> C:/Rtools/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>
> > cannot find -lssl
> >
> C:/Rtools/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>
> > cannot find -lssh2
> >
> C:/Rtools/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>
> > cannot find -lcrypto
> >
> C:/Rtools/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>
> > cannot find -lidn
> > collect2.exe: error: ld returned 1 exit status
> > no DLL was created
> > ERROR: compilation failed for package 'jackalope'
> > * removing 'C:/projects/jackalope/jackalope.Rcheck/jackalope'
> >
> >
> > ## WIN-BUILDER
> > * installing *source* package 'jackalope' ...
> > ** using staged installation
> > ** libs
> >
> > *** arch - i386
> > d:/Compiler/gcc-4.9.3/mingw_32/bin/g++  -std=gnu++11
> > -I"D:/RCompile/CRANpkg/lib/4.0/zlibbioc/include"
> > -I"D:/RCompile/recent/R/include" -DNDEBUG -I../inst/include/
> > -D_FILE_OFFSET_BITS=64 -I'D:/RCompile/CRANpkg/lib/4.0/Rcpp/include'
> > -I'D:/RCompile/CRANpkg/lib/4.0/RcppArmadillo/include'
> > -I'D:/RCompile/CRANpkg/lib/4.0/RcppProgress/include'
> > -I'D:/RCompile/CRANpkg/lib/4.0/Rhtslib/include'
> > -I'D:/RCompile/CRANpkg/lib/4.0/zlibbioc/include'
> > -I"d:/Compiler/gcc-4.9.3/local330/include"     -O2 -Wall  -mtune=core2
> > -c RcppExports.cpp -o RcppExports.o
> > d:/Compiler/gcc-4.9.3/mingw_32/bin/g++  -std=gnu++11
> > -I"D:/RCompile/CRANpkg/lib/4.0/zlibbioc/include"
> > -I"D:/RCompile/recent/R/include" -DNDEBUG -I../inst/include/
> > -D_FILE_OFFSET_BITS=64 -I'D:/RCompile/CRANpkg/lib/4.0/Rcpp/include'
> > -I'D:/RCompile/CRANpkg/lib/4.0/RcppArmadillo/include'
> > -I'D:/RCompile/CRANpkg/lib/4.0/RcppProgress/include'
> > -I'D:/RCompile/CRANpkg/lib/4.0/Rhtslib/include'
> > -I'D:/RCompile/CRANpkg/lib/4.0/zlibbioc/include'
> > -I"d:/Compiler/gcc-4.9.3/local330/include"     -O2 -Wall  -mtune=core2
> > -c alter_reference.cpp -o alter_reference.o
> >
> > [...]
> >
> > d:/Compiler/gcc-4.9.3/mingw_32/bin/g++ -shared -s -static-libgcc -o
> > jackalope.dll tmp.def RcppExports.o alter_reference.o create_sequences.o
> > hts_illumina.o hts_pacbio.o io_fasta.o io_ms.o io_vcf.o mutator.o
> > mutator_indels.o mutator_subs.o phylogenomics.o ref_var_access.o
> > sub_models.o util.o var_classes.o vars_ssites.o -lws2_32
> > -LD:/RCompile/recent/R/bin/i386 -lRlapack
> > -LD:/RCompile/recent/R/bin/i386 -lRblas -lgfortran -lm -lquadmath
> > D:/RCompile/CRANpkg/lib/4.0/Rhtslib/usrlib/i386/libhts.a
> > -LC:/extsoft/lib/i386 -lcurl -lrtmp -lssl -lssh2 -lcrypto -lgdi32 -lz
> > -lws2_32 -lwldap32 -lwinmm -lidn
> > -LD:/RCompile/CRANpkg/lib/4.0/zlibbioc/libs/i386 -lzlib1bioc
> > -Ld:/Compiler/gcc-4.9.3/local330/lib/i386
> > -Ld:/Compiler/gcc-4.9.3/local330/lib -LD:/RCompile/recent/R/bin/i386 -lR
> >
> D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>
> > cannot find -lcurl
> >
> D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>
> > cannot find -lrtmp
> >
> D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>
> > cannot find -lssl
> >
> D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>
> > cannot find -lssh2
> >
> D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>
> > cannot find -lcrypto
> >
> D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
>
> > cannot find -lidn
> > collect2.exe: error: ld returned 1 exit status
> > no DLL was created
> > ERROR: compilation failed for package 'jackalope'
> > * removing 'd:/RCompile/CRANguest/R-devel/lib/jackalope'
> >
> >
> >
> >
> >
> >
> > On Mon, Jan 27, 2020 at 5:45 PM Pages, Herve <hpages at fredhutch.org
> > <mailto:hpages at fredhutch.org>> wrote:
> >
> >     OK thanks. I'm using LOCAL_SOFT now in Rhtslib instead of hardcoded
> >     C:/extsoft:
> >
> >
> >
> https://github.com/Bioconductor/Rhtslib/commit/1052c4c2e467fa8e3db613a70af2f77448956d38
> >     <
> https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_Bioconductor_Rhtslib_commit_1052c4c2e467fa8e3db613a70af2f77448956d38&d=DwMFaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=xiTfiuG9CwLnlGAyvQGivg_JKm3MmKwMoMzTqTFCuSk&s=PvRg3n4qfjPrOSZuov1NuLFPXB8Wi8hLDHEK7V4q2ZE&e=
> >
> >
> >     H.
> >
> >     On 1/27/20 15:15, Duncan Murdoch wrote:
> >      > On 27/01/2020 5:48 p.m., Martin Morgan wrote:
> >      >> what are the correct paths?
> >      >
> >      > The src/gnuwin32/MkRules.dist file gives the patterns.   They are
> >     based
> >      > on environment variables LOCAL_SOFT, R_HOME, etc.  Most people
> >     should
> >      > modify that file to MkRules.local when building R; the variables
> >     defined
> >      > there get re-used when building packages.  I forget what gets
> >     baked into
> >      > the Windows binary distributions.
> >      >
> >      > Duncan Murdoch
> >      >
> >      >>
> >      >> ?On 1/27/20, 3:32 PM, "R-package-devel on behalf of Uwe Ligges"
> >      >> <r-package-devel-bounces at r-project.org
> >     <mailto:r-package-devel-bounces at r-project.org> on behalf of
> >      >> ligges at statistik.tu-dortmund.de
> >     <mailto:ligges at statistik.tu-dortmund.de>> wrote:
> >      >>
> >      >>      Thanks, one suspicious part from the log below is
> >      >>      -LC:/extsoft/lib/i386
> >      >>      which is clearly not in any variable we define on CRAN.
> >      >>      Looking close shows that
> >      >>       > Rhtslib::pkgconfig("PKG_LIBS")
> >      >>      gives
> >      >>      'D:/RCompile/CRANpkg/lib/4.0/Rhtslib/usrlib/x64/libhts.a'
> >      >>      -LC:/extsoft/lib/x64 -lcurl -lrtmp -lssl -lssh2 -lcrypto
> >     -lgdi32 -lz
> >      >>      -lws2_32 -lwldap32 -lwinmm
> >      >>      and that is wrong as -LC:/extsoft/lib/i386 or
> >     C:/extsoft/lib/x64
> >      >> are not
> >      >>      directories where the software is installed on winbuilder.
> >      >>      Pls use the directories the other packages are using, too.
> >      >>      Best,
> >      >>      Uwe Ligges
> >      >>      On 26.01.2020 22:40, Lucas Nell wrote:
> >      >>      > Hello all,
> >      >>      >
> >      >>      > My package (source here
> >      >>
> >     <
> https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_lucasnell_jackalope&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=rbTXQQLd6r1RKFIeCzZLf3oG7wNkyQ7ajc_OWw6ptl8&s=pTaNljvQ8YT-dMzHgasiRYlhEdPYJq5pmcDu44IrFAk&e=
> >
> >      >> >) no longer
> >      >>      > compiles on a standard Windows installation (see truncated
> >      >> install log
> >      >>      > below). The problem seems to be the libraries required by
> >     the
> >      >> Bioconductor
> >      >>      > package Rhtslib
> >      >>      >
> >      >>
> >     <
> https://urldefense.proofpoint.com/v2/url?u=https-3A__bioconductor.org_packages_release_bioc_html_Rhtslib.html&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=rbTXQQLd6r1RKFIeCzZLf3oG7wNkyQ7ajc_OWw6ptl8&s=oV05PFPLvWBLVj_pX9VeJX8fT565yXNxji0sihhuXGU&e=
> >
> >      >> >. My
> >      >>      > package compiles fine when using GCC 8 via Rtools 40 (and
> >     when
> >      >> built using
> >      >>      > "r-devel-windows-ix86+x86_64-gcc8" on CRAN), but when
> >     trying to
> >      >> submit a
> >      >>      > new version to CRAN, it fails its automatic tests without
> >      >> working using GCC
> >      >>      > 4 on Windows. Does anyone have ideas on how to fix this?
> >     Thank
> >      >> you!
> >      >>      >
> >      >>      > Cheers,
> >      >>      > Lucas
> >      >>      >
> >      >>      >
> >      >>      >
> >      >>      > * installing *source* package 'jackalope' ...
> >      >>      > ** using staged installation
> >      >>      > ** libs
> >      >>      >
> >      >>      > *** arch - i386
> >      >>      > d:/Compiler/gcc-4.9.3/mingw_32/bin/g++  -std=gnu++11
> >      >>      > -I"D:/RCompile/CRANpkg/lib/4.0/zlibbioc/include"
> >      >>      > -I"D:/RCompile/recent/R/include" -DNDEBUG
> -I../inst/include/
> >      >>      > -D_FILE_OFFSET_BITS=64
> >      >> -I'D:/RCompile/CRANpkg/lib/4.0/Rcpp/include'
> >      >>      >
> >     -I'D:/RCompile/CRANincoming/R-devel/lib/RcppArmadillo/include'
> >      >>      > -I'D:/RCompile/CRANpkg/lib/4.0/RcppProgress/include'
> >      >>      > -I'D:/RCompile/CRANpkg/lib/4.0/Rhtslib/include'
> >      >>      > -I'D:/RCompile/CRANpkg/lib/4.0/zlibbioc/include'
> >      >>      > -I"d:/Compiler/gcc-4.9.3/local330/include"     -O2 -Wall
> >      >> -mtune=core2 -c
> >      >>      > RcppExports.cpp -o RcppExports.o
> >      >>      >
> >      >>      > [...]
> >      >>      >
> >      >>      > d:/Compiler/gcc-4.9.3/mingw_32/bin/g++ -shared -s
> >      >> -static-libgcc -o
> >      >>      > jackalope.dll tmp.def RcppExports.o alter_reference.o
> >      >> create_sequences.o
> >      >>      > hts_illumina.o hts_pacbio.o io_fasta.o io_ms.o io_vcf.o
> >     mutator.o
> >      >>      > mutator_indels.o mutator_subs.o phylogenomics.o
> >     ref_var_access.o
> >      >>      > sub_models.o util.o var_classes.o vars_ssites.o -lws2_32
> >      >>      > -LD:/RCompile/recent/R/bin/i386 -lRlapack
> >      >> -LD:/RCompile/recent/R/bin/i386
> >      >>      > -lRblas -lgfortran -lm -lquadmath
> >      >>      > D:/RCompile/CRANpkg/lib/4.0/Rhtslib/usrlib/i386/libhts.a
> >      >>      > -LC:/extsoft/lib/i386 -lcurl -lrtmp -lssl -lssh2 -lcrypto
> >      >> -lgdi32 -lz
> >      >>      > -lws2_32 -lwldap32 -lwinmm -lidn
> >      >>      > -LD:/RCompile/CRANpkg/lib/4.0/zlibbioc/libs/i386
> -lzlib1bioc
> >      >>      > -Ld:/Compiler/gcc-4.9.3/local330/lib/i386
> >      >>      > -Ld:/Compiler/gcc-4.9.3/local330/lib
> >      >> -LD:/RCompile/recent/R/bin/i386 -lR
> >      >>      >
> >      >>
> >
>  D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
> >
> >      >>
> >      >>      > cannot find -lcurl
> >      >>      >
> >      >>
> >
>  D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
> >
> >      >>
> >      >>      > cannot find -lrtmp
> >      >>      >
> >      >>
> >
>  D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
> >
> >      >>
> >      >>      > cannot find -lssl
> >      >>      >
> >      >>
> >
>  D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
> >
> >      >>
> >      >>      > cannot find -lssh2
> >      >>      >
> >      >>
> >
>  D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
> >
> >      >>
> >      >>      > cannot find -lcrypto
> >      >>      >
> >      >>
> >
>  D:/Compiler/gcc-4.9.3/mingw_32/bin/../lib/gcc/i686-w64-mingw32/4.9.3/../../../../i686-w64-mingw32/bin/ld.exe:
> >
> >      >>
> >      >>      > cannot find -lidn
> >      >>      > collect2.exe: error: ld returned 1 exit status
> >      >>      > no DLL was created
> >      >>      > ERROR: compilation failed for package 'jackalope'
> >      >>      > * removing
> 'd:/RCompile/CRANincoming/R-devel/lib/jackalope'
> >      >>      >
> >      >>      >     [[alternative HTML version deleted]]
> >      >>      >
> >      >>      > ______________________________________________
> >      >>      > R-package-devel at r-project.org
> >     <mailto:R-package-devel at r-project.org> mailing list
> >      >>      >
> >      >>
> >
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=rbTXQQLd6r1RKFIeCzZLf3oG7wNkyQ7ajc_OWw6ptl8&s=cxFKMxmeHWC_Ha6Oad1iwH0ljS0Oqkusb8nkpHRp-LY&e=
> >
> >      >>      >
> >      >>      ______________________________________________
> >      >> R-package-devel at r-project.org
> >     <mailto:R-package-devel at r-project.org> mailing list
> >      >>
> >      >>
> >
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=rbTXQQLd6r1RKFIeCzZLf3oG7wNkyQ7ajc_OWw6ptl8&s=cxFKMxmeHWC_Ha6Oad1iwH0ljS0Oqkusb8nkpHRp-LY&e=
> >
> >      >> ______________________________________________
> >      >> R-package-devel at r-project.org
> >     <mailto:R-package-devel at r-project.org> mailing list
> >      >>
> >
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dpackage-2Ddevel&d=DwIDaQ&c=eRAMFD45gAfqt84VtBcfhQ&r=BK7q3XeAvimeWdGbWY_wJYbW0WYiZvSXAJJKaaPhzWA&m=rbTXQQLd6r1RKFIeCzZLf3oG7wNkyQ7ajc_OWw6ptl8&s=cxFKMxmeHWC_Ha6Oad1iwH0ljS0Oqkusb8nkpHRp-LY&e=
> >
> >      >>
> >      >
> >
> >     --
> >     Herv? Pag?s
> >
> >     Program in Computational Biology
> >     Division of Public Health Sciences
> >     Fred Hutchinson Cancer Research Center
> >     1100 Fairview Ave. N, M1-B514
> >     P.O. Box 19024
> >     Seattle, WA 98109-1024
> >
> >     E-mail: hpages at fredhutch.org <mailto:hpages at fredhutch.org>
> >     Phone:  (206) 667-5791
> >     Fax:    (206) 667-1319
> >
>
> --
> Herv? Pag?s
>
> Program in Computational Biology
> Division of Public Health Sciences
> Fred Hutchinson Cancer Research Center
> 1100 Fairview Ave. N, M1-B514
> P.O. Box 19024
> Seattle, WA 98109-1024
>
> E-mail: hpages at fredhutch.org
> Phone:  (206) 667-5791
> Fax:    (206) 667-1319
>

	[[alternative HTML version deleted]]


From R@|ner @end|ng |rom krug@@de  Tue Feb 11 09:38:13 2020
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Tue, 11 Feb 2020 09:38:13 +0100
Subject: [R-pkg-devel] R CMD build hanging for some but not all packages
In-Reply-To: <CABtg=Kms+_1w+KYrb4EQn6XqNNqWtH9-r3ixP7X1G=q7WeagNA@mail.gmail.com>
References: <KU1P153MB0102191984A46EC91AF80977A6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <KU1P153MB01028E3C352BA3B9A10BE55BA6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <CABtg=Kms+_1w+KYrb4EQn6XqNNqWtH9-r3ixP7X1G=q7WeagNA@mail.gmail.com>
Message-ID: <13E91390-1038-4C0B-885C-C4883209F426@krugs.de>



> On 10 Feb 2020, at 17:58, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> 
> Maybe you have large, ignored files in the package directory? R first
> creates a copy of the whole directory and only applies `.Rbuildignore`
> after that.



THANKS - you solved my question without me having to answer it. As I am using a makefile to build the package, I can easily rename the ignored directories before calling build.

But the question is why are these ignored directories scanned before building the package? They should be ignored anyway?

Rainer


> 
> Gabor
> 
> On Mon, Feb 10, 2020 at 4:54 PM Hong Ooi via R-package-devel
> <r-package-devel at r-project.org> wrote:
>> 
>> Actually, cancel that: it finished successfully, but took 3 minutes to prepare the package:
>> 
>> r$> devtools::build()
>> v  checking for file 'C:\Users\hongo\Documents\GitHub\AzureStor/DESCRIPTION'
>> -  preparing 'AzureStor': (3m 4s)
>> v  checking DESCRIPTION meta-information ...
>> -  installing the package to build vignettes
>> v  creating vignettes (6.5s)
>> -  checking for LF line-endings in source and make files and shell scripts (13.8s)
>> -  checking for empty or unneeded directories
>> -  building 'AzureStor_3.1.0.9000.tar.gz'
>> 
>> This is really weird, I'm used to the package prep step taking 10 seconds at most.
>> 
>> 
>> -----Original Message-----
>> From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Hong Ooi via R-package-devel
>> Sent: Tuesday, 11 February 2020 3:50 AM
>> To: r-package-devel at r-project.org
>> Subject: [EXTERNAL] [R-pkg-devel] R CMD build hanging for some but not all packages
>> 
>> This is with R 3.6.2 on Windows 10 Pro 1909.
>> 
>> In the last couple of weeks, devtools::build() and devtools::check() have started hanging on some, but not all, of my packages. After some poking around, I discovered that it's actually R CMD build that is having problems, right after the "checking for file 'DESCRIPTION'" step.
>> 
>> A reproducible example can be found by cloning my AzureStor package: https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FAzure%2FAzureStor&amp;data=02%7C01%7Chongooi%40microsoft.com%7Cae76a58d39b64b491a1008d7ae4955a9%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637169502304943506&amp;sdata=RW3TQM2D%2F3X43oGhiywDyKd%2F4oo5hFkOoVwZTUe9cOw%3D&amp;reserved=0 If you run "R CMD build ." in the package directory, it should hang. This is a relatively simple package that doesn't require compilation, although it does import some commonly-used packages like httr, curl, jsonlite and xml2.
>> 
>> As far as I can tell, R on Ubuntu works fine. What's going on?
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7Cae76a58d39b64b491a1008d7ae4955a9%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637169502304943506&amp;sdata=DPyD6zGGcxq41irkaMfMLyjnmqSB96PiIxIh9N2p%2Ft4%3D&amp;reserved=0
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Feb 11 09:42:54 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 11 Feb 2020 08:42:54 +0000
Subject: [R-pkg-devel] R CMD build hanging for some but not all packages
In-Reply-To: <13E91390-1038-4C0B-885C-C4883209F426@krugs.de>
References: <KU1P153MB0102191984A46EC91AF80977A6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <KU1P153MB01028E3C352BA3B9A10BE55BA6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <CABtg=Kms+_1w+KYrb4EQn6XqNNqWtH9-r3ixP7X1G=q7WeagNA@mail.gmail.com>
 <13E91390-1038-4C0B-885C-C4883209F426@krugs.de>
Message-ID: <CABtg=K=uxCNuWm7L2JqdLii3mhPiWOaZRgrH6YLia5bzuSCatA@mail.gmail.com>

On Tue, Feb 11, 2020 at 8:38 AM Rainer M Krug <Rainer at krugs.de> wrote:
>
>
>
> On 10 Feb 2020, at 17:58, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>
> Maybe you have large, ignored files in the package directory? R first
> creates a copy of the whole directory and only applies `.Rbuildignore`
> after that.
>
> THANKS - you solved my question without me having to answer it. As I am using a makefile to build the package, I can easily rename the ignored directories before calling build.
>
> But the question is why are these ignored directories scanned before building the package? They should be ignored anyway?
>
> Rainer

A makefile is a good idea, but I would rather move the files that are
needed to a temporary directory, instead of temporarily renaming
unneeded files, because if the makefile fails, then you won't restore
them and your project will be in a broken state.

Gabor

[...]


From R@|ner @end|ng |rom krug@@de  Tue Feb 11 09:47:01 2020
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Tue, 11 Feb 2020 09:47:01 +0100
Subject: [R-pkg-devel] R CMD build hanging for some but not all packages
In-Reply-To: <CABtg=K=uxCNuWm7L2JqdLii3mhPiWOaZRgrH6YLia5bzuSCatA@mail.gmail.com>
References: <KU1P153MB0102191984A46EC91AF80977A6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <KU1P153MB01028E3C352BA3B9A10BE55BA6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <CABtg=Kms+_1w+KYrb4EQn6XqNNqWtH9-r3ixP7X1G=q7WeagNA@mail.gmail.com>
 <13E91390-1038-4C0B-885C-C4883209F426@krugs.de>
 <CABtg=K=uxCNuWm7L2JqdLii3mhPiWOaZRgrH6YLia5bzuSCatA@mail.gmail.com>
Message-ID: <C47AD5F9-8CF0-4244-9591-E1E1BAE38505@krugs.de>



> On 11 Feb 2020, at 09:42, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> 
> On Tue, Feb 11, 2020 at 8:38 AM Rainer M Krug <Rainer at krugs.de <mailto:Rainer at krugs.de>> wrote:
>> 
>> 
>> 
>> On 10 Feb 2020, at 17:58, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>> 
>> Maybe you have large, ignored files in the package directory? R first
>> creates a copy of the whole directory and only applies `.Rbuildignore`
>> after that.
>> 
>> THANKS - you solved my question without me having to answer it. As I am using a makefile to build the package, I can easily rename the ignored directories before calling build.
>> 
>> But the question is why are these ignored directories scanned before building the package? They should be ignored anyway?
>> 
>> Rainer
> 
> A makefile is a good idea, but I would rather move the files that are
> needed to a temporary directory, instead of temporarily renaming
> unneeded files, because if the makefile fails, then you won't restore
> them and your project will be in a broken state.

You are right. Having two targets (prepare build, finalise build) which move the files and put them back afterwards would be the best option (and make the build call both).

Is there a way to have an .onExit() type function in a makefile?

Rainer


> 
> Gabor
> 
> [...]

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Feb 11 09:54:10 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 11 Feb 2020 08:54:10 +0000
Subject: [R-pkg-devel] R CMD build hanging for some but not all packages
In-Reply-To: <C47AD5F9-8CF0-4244-9591-E1E1BAE38505@krugs.de>
References: <KU1P153MB0102191984A46EC91AF80977A6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <KU1P153MB01028E3C352BA3B9A10BE55BA6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <CABtg=Kms+_1w+KYrb4EQn6XqNNqWtH9-r3ixP7X1G=q7WeagNA@mail.gmail.com>
 <13E91390-1038-4C0B-885C-C4883209F426@krugs.de>
 <CABtg=K=uxCNuWm7L2JqdLii3mhPiWOaZRgrH6YLia5bzuSCatA@mail.gmail.com>
 <C47AD5F9-8CF0-4244-9591-E1E1BAE38505@krugs.de>
Message-ID: <CABtg=Kn3DUDDKSgh3p-tZ6SKxTi-DfYVtQVAt7TMsBJDzjW74w@mail.gmail.com>

On Tue, Feb 11, 2020 at 8:52 AM Rainer M Krug <Rainer at krugs.de> wrote:
> On 11 Feb 2020, at 09:42, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> On Tue, Feb 11, 2020 at 8:38 AM Rainer M Krug <Rainer at krugs.de> wrote:
> On 10 Feb 2020, at 17:58, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>
> Maybe you have large, ignored files in the package directory? R first
> creates a copy of the whole directory and only applies `.Rbuildignore`
> after that.
>
> THANKS - you solved my question without me having to answer it. As I am using a makefile to build the package, I can easily rename the ignored directories before calling build.
>
> But the question is why are these ignored directories scanned before building the package? They should be ignored anyway?
>
> Rainer
>
>
> A makefile is a good idea, but I would rather move the files that are
> needed to a temporary directory, instead of temporarily renaming
> unneeded files, because if the makefile fails, then you won't restore
> them and your project will be in a broken state.
>
>
> You are right. Having two targets (prepare build, finalise build) which move the files and put them back afterwards would be the best option (and make the build call both).
>
> Is there a way to have an .onExit() type function in a makefile?

The on-exit mechanism can fail as well. It is just better not to move
around the files of the project I think.

Gabor

[...]


From R@|ner @end|ng |rom krug@@de  Tue Feb 11 10:20:56 2020
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Tue, 11 Feb 2020 10:20:56 +0100
Subject: [R-pkg-devel] R CMD build hanging for some but not all packages
In-Reply-To: <CABtg=Kn3DUDDKSgh3p-tZ6SKxTi-DfYVtQVAt7TMsBJDzjW74w@mail.gmail.com>
References: <KU1P153MB0102191984A46EC91AF80977A6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <KU1P153MB01028E3C352BA3B9A10BE55BA6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <CABtg=Kms+_1w+KYrb4EQn6XqNNqWtH9-r3ixP7X1G=q7WeagNA@mail.gmail.com>
 <13E91390-1038-4C0B-885C-C4883209F426@krugs.de>
 <CABtg=K=uxCNuWm7L2JqdLii3mhPiWOaZRgrH6YLia5bzuSCatA@mail.gmail.com>
 <C47AD5F9-8CF0-4244-9591-E1E1BAE38505@krugs.de>
 <CABtg=Kn3DUDDKSgh3p-tZ6SKxTi-DfYVtQVAt7TMsBJDzjW74w@mail.gmail.com>
Message-ID: <771AA67E-4083-4BDF-9194-D620C267DC9B@krugs.de>



> On 11 Feb 2020, at 09:54, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> 
> On Tue, Feb 11, 2020 at 8:52 AM Rainer M Krug <Rainer at krugs.de> wrote:
>> On 11 Feb 2020, at 09:42, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>> On Tue, Feb 11, 2020 at 8:38 AM Rainer M Krug <Rainer at krugs.de> wrote:
>> On 10 Feb 2020, at 17:58, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>> 
>> Maybe you have large, ignored files in the package directory? R first
>> creates a copy of the whole directory and only applies `.Rbuildignore`
>> after that.
>> 
>> THANKS - you solved my question without me having to answer it. As I am using a makefile to build the package, I can easily rename the ignored directories before calling build.
>> 
>> But the question is why are these ignored directories scanned before building the package? They should be ignored anyway?
>> 
>> Rainer
>> 
>> 
>> A makefile is a good idea, but I would rather move the files that are
>> needed to a temporary directory, instead of temporarily renaming
>> unneeded files, because if the makefile fails, then you won't restore
>> them and your project will be in a broken state.
>> 
>> 
>> You are right. Having two targets (prepare build, finalise build) which move the files and put them back afterwards would be the best option (and make the build call both).
>> 
>> Is there a way to have an .onExit() type function in a makefile?
> 
> The on-exit mechanism can fail as well. It is just better not to move
> around the files of the project I think.

True.

Thanks,

Rainer

> 
> Gabor
> 
> [...]

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From hongoo| @end|ng |rom m|cro@o|t@com  Tue Feb 11 13:20:09 2020
From: hongoo| @end|ng |rom m|cro@o|t@com (Hong Ooi)
Date: Tue, 11 Feb 2020 12:20:09 +0000
Subject: [R-pkg-devel] 
 [EXTERNAL] Re: R CMD build hanging for some but not all packages
In-Reply-To: <13E91390-1038-4C0B-885C-C4883209F426@krugs.de>
References: <KU1P153MB0102191984A46EC91AF80977A6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <KU1P153MB01028E3C352BA3B9A10BE55BA6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <CABtg=Kms+_1w+KYrb4EQn6XqNNqWtH9-r3ixP7X1G=q7WeagNA@mail.gmail.com>
 <13E91390-1038-4C0B-885C-C4883209F426@krugs.de>
Message-ID: <KU1P153MB0102996913C0A12FA896AC96A6180@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>

They are scanned probably because R CMD build does something like cp * to copy everything to a temp folder first up, before processing it. An argument could be made that it should manually loop through all files and dirs, checking each against .Rbuildignore before copying.


From: Rainer M Krug <Rainer at krugs.de> 
Sent: Tuesday, 11 February 2020 7:38 PM
To: G?bor Cs?rdi <csardi.gabor at gmail.com>
Cc: Hong Ooi <hongooi at microsoft.com>; r-package-devel at r-project.org
Subject: [EXTERNAL] Re: [R-pkg-devel] R CMD build hanging for some but not all packages




On 10 Feb 2020, at 17:58, G?bor Cs?rdi <mailto:csardi.gabor at gmail.com> wrote:

Maybe you have large, ignored files in the package directory? R first
creates a copy of the whole directory and only applies `.Rbuildignore`
after that.



THANKS - you solved my question without me having to answer it. As I am using a makefile to build the package, I can easily rename the ignored directories before calling build.

But the question is why are these ignored directories scanned before building the package? They should be ignored anyway?

Rainer




Gabor

On Mon, Feb 10, 2020 at 4:54 PM Hong Ooi via R-package-devel
<mailto:r-package-devel at r-project.org> wrote:


Actually, cancel that: it finished successfully, but took 3 minutes to prepare the package:

r$> devtools::build()
v ?checking for file 'C:\Users\hongo\Documents\GitHub\AzureStor/DESCRIPTION'
- ?preparing 'AzureStor': (3m 4s)
v ?checking DESCRIPTION meta-information ...
- ?installing the package to build vignettes
v ?creating vignettes (6.5s)
- ?checking for LF line-endings in source and make files and shell scripts (13.8s)
- ?checking for empty or unneeded directories
- ?building 'AzureStor_3.1.0.9000.tar.gz'

This is really weird, I'm used to the package prep step taking 10 seconds at most.


-----Original Message-----
From: R-package-devel <mailto:r-package-devel-bounces at r-project.org> On Behalf Of Hong Ooi via R-package-devel
Sent: Tuesday, 11 February 2020 3:50 AM
To: mailto:r-package-devel at r-project.org
Subject: [EXTERNAL] [R-pkg-devel] R CMD build hanging for some but not all packages

This is with R 3.6.2 on Windows 10 Pro 1909.

In the last couple of weeks, devtools::build() and devtools::check() have started hanging on some, but not all, of my packages. After some poking around, I discovered that it's actually R CMD build that is having problems, right after the "checking for file 'DESCRIPTION'" step.

A reproducible example can be found by cloning my AzureStor package: https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FAzure%2FAzureStor&data=02%7C01%7Chongooi%40microsoft.com%7C7962d328eb984556a2e708d7aecdc0db%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637170071036915332&sdata=cmY0VPEiEgcuhI%2B4wIT8iIimQhq7751IJ0KHdsPaMtg%3D&reserved=0 If you run "R CMD build ." in the package directory, it should hang. This is a relatively simple package that doesn't require compilation, although it does import some commonly-used packages like httr, curl, jsonlite and xml2.

As far as I can tell, R on Ubuntu works fine. What's going on?

______________________________________________
mailto:R-package-devel at r-project.org mailing list
https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&data=02%7C01%7Chongooi%40microsoft.com%7C7962d328eb984556a2e708d7aecdc0db%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637170071036925320&sdata=XbCKzK3no6v5asG5assjd7oxy%2BOk9or2LbS%2Fkg8GESw%3D&reserved=0

______________________________________________
mailto:R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

______________________________________________
mailto:R-package-devel at r-project.org mailing list
https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&data=02%7C01%7Chongooi%40microsoft.com%7C7962d328eb984556a2e708d7aecdc0db%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637170071036925320&sdata=XbCKzK3no6v5asG5assjd7oxy%2BOk9or2LbS%2Fkg8GESw%3D&reserved=0

--
Rainer M. Krug, PhD (Conservation?Ecology, SUN), MSc (Conservation?Biology, UCT), Dipl. Phys. (Germany)
Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and?Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44?635 47 64
Cell: ? ? ??	+41 (0)78 630 66 57
mailto:Rainer.Krug at uzh.ch
		mailto:Rainer at krugs.de
Skype: ? ??RMkrug

PGP: 0x0F52F982



From R@|ner @end|ng |rom krug@@de  Tue Feb 11 13:33:08 2020
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Tue, 11 Feb 2020 13:33:08 +0100
Subject: [R-pkg-devel] 
 [EXTERNAL] R CMD build hanging for some but not all packages
In-Reply-To: <KU1P153MB0102996913C0A12FA896AC96A6180@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
References: <KU1P153MB0102191984A46EC91AF80977A6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <KU1P153MB01028E3C352BA3B9A10BE55BA6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <CABtg=Kms+_1w+KYrb4EQn6XqNNqWtH9-r3ixP7X1G=q7WeagNA@mail.gmail.com>
 <13E91390-1038-4C0B-885C-C4883209F426@krugs.de>
 <KU1P153MB0102996913C0A12FA896AC96A6180@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
Message-ID: <F2F99AB5-8486-41E5-A051-B2A932EDCD7A@krugs.de>

Yes - I would suggest that this would be a useful change. As the files in .Rbuildignore are ignored anyway during build. So the ignoring could be done at the copying stage and not during the building stage?

Rainer


> On 11 Feb 2020, at 13:20, Hong Ooi <hongooi at microsoft.com> wrote:
> 
> They are scanned probably because R CMD build does something like cp * to copy everything to a temp folder first up, before processing it. An argument could be made that it should manually loop through all files and dirs, checking each against .Rbuildignore before copying.
> 
> 
> From: Rainer M Krug <Rainer at krugs.de> 
> Sent: Tuesday, 11 February 2020 7:38 PM
> To: G?bor Cs?rdi <csardi.gabor at gmail.com>
> Cc: Hong Ooi <hongooi at microsoft.com>; r-package-devel at r-project.org
> Subject: [EXTERNAL] Re: [R-pkg-devel] R CMD build hanging for some but not all packages
> 
> 
> 
> 
> On 10 Feb 2020, at 17:58, G?bor Cs?rdi <mailto:csardi.gabor at gmail.com> wrote:
> 
> Maybe you have large, ignored files in the package directory? R first
> creates a copy of the whole directory and only applies `.Rbuildignore`
> after that.
> 
> 
> 
> THANKS - you solved my question without me having to answer it. As I am using a makefile to build the package, I can easily rename the ignored directories before calling build.
> 
> But the question is why are these ignored directories scanned before building the package? They should be ignored anyway?
> 
> Rainer
> 
> 
> 
> 
> Gabor
> 
> On Mon, Feb 10, 2020 at 4:54 PM Hong Ooi via R-package-devel
> <mailto:r-package-devel at r-project.org> wrote:
> 
> 
> Actually, cancel that: it finished successfully, but took 3 minutes to prepare the package:
> 
> r$> devtools::build()
> v  checking for file 'C:\Users\hongo\Documents\GitHub\AzureStor/DESCRIPTION'
> -  preparing 'AzureStor': (3m 4s)
> v  checking DESCRIPTION meta-information ...
> -  installing the package to build vignettes
> v  creating vignettes (6.5s)
> -  checking for LF line-endings in source and make files and shell scripts (13.8s)
> -  checking for empty or unneeded directories
> -  building 'AzureStor_3.1.0.9000.tar.gz'
> 
> This is really weird, I'm used to the package prep step taking 10 seconds at most.
> 
> 
> -----Original Message-----
> From: R-package-devel <mailto:r-package-devel-bounces at r-project.org> On Behalf Of Hong Ooi via R-package-devel
> Sent: Tuesday, 11 February 2020 3:50 AM
> To: mailto:r-package-devel at r-project.org
> Subject: [EXTERNAL] [R-pkg-devel] R CMD build hanging for some but not all packages
> 
> This is with R 3.6.2 on Windows 10 Pro 1909.
> 
> In the last couple of weeks, devtools::build() and devtools::check() have started hanging on some, but not all, of my packages. After some poking around, I discovered that it's actually R CMD build that is having problems, right after the "checking for file 'DESCRIPTION'" step.
> 
> A reproducible example can be found by cloning my AzureStor package: https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FAzure%2FAzureStor&data=02%7C01%7Chongooi%40microsoft.com%7C7962d328eb984556a2e708d7aecdc0db%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637170071036915332&sdata=cmY0VPEiEgcuhI%2B4wIT8iIimQhq7751IJ0KHdsPaMtg%3D&reserved=0 If you run "R CMD build ." in the package directory, it should hang. This is a relatively simple package that doesn't require compilation, although it does import some commonly-used packages like httr, curl, jsonlite and xml2.
> 
> As far as I can tell, R on Ubuntu works fine. What's going on?
> 
> ______________________________________________
> mailto:R-package-devel at r-project.org mailing list
> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&data=02%7C01%7Chongooi%40microsoft.com%7C7962d328eb984556a2e708d7aecdc0db%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637170071036925320&sdata=XbCKzK3no6v5asG5assjd7oxy%2BOk9or2LbS%2Fkg8GESw%3D&reserved=0
> 
> ______________________________________________
> mailto:R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> mailto:R-package-devel at r-project.org mailing list
> https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&data=02%7C01%7Chongooi%40microsoft.com%7C7962d328eb984556a2e708d7aecdc0db%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637170071036925320&sdata=XbCKzK3no6v5asG5assjd7oxy%2BOk9or2LbS%2Fkg8GESw%3D&reserved=0
> 
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> Orcid ID: 0000-0002-7490-0066
> 
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
> 
> Office:	+41 (0)44 635 47 64
> Cell:       	+41 (0)78 630 66 57
> mailto:Rainer.Krug at uzh.ch
> 		mailto:Rainer at krugs.de
> Skype:     RMkrug
> 
> PGP: 0x0F52F982
> 
> 

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From R@|ner @end|ng |rom krug@@de  Tue Feb 11 14:50:13 2020
From: R@|ner @end|ng |rom krug@@de (Rainer Krug)
Date: Tue, 11 Feb 2020 14:50:13 +0100
Subject: [R-pkg-devel] R CMD build hanging for some but not all packages
In-Reply-To: <771AA67E-4083-4BDF-9194-D620C267DC9B@krugs.de>
References: <KU1P153MB0102191984A46EC91AF80977A6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <KU1P153MB01028E3C352BA3B9A10BE55BA6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <CABtg=Kms+_1w+KYrb4EQn6XqNNqWtH9-r3ixP7X1G=q7WeagNA@mail.gmail.com>
 <13E91390-1038-4C0B-885C-C4883209F426@krugs.de>
 <CABtg=K=uxCNuWm7L2JqdLii3mhPiWOaZRgrH6YLia5bzuSCatA@mail.gmail.com>
 <C47AD5F9-8CF0-4244-9591-E1E1BAE38505@krugs.de>
 <CABtg=Kn3DUDDKSgh3p-tZ6SKxTi-DfYVtQVAt7TMsBJDzjW74w@mail.gmail.com>
 <771AA67E-4083-4BDF-9194-D620C267DC9B@krugs.de>
Message-ID: <21624E86-1111-42BF-A09B-06EF9DA2FF03@krugs.de>

Thinking about it - what would be the easiest way, to copy the package, excluding files in .Rbuidignore, into the temp directory?

I would like to use directly the .Rbuildignore file, to exclude the files from copying.

Any suggestions?


> On 11 Feb 2020, at 10:20, Rainer M Krug <Rainer at krugs.de> wrote:
> 
> 
> 
>> On 11 Feb 2020, at 09:54, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>> 
>> On Tue, Feb 11, 2020 at 8:52 AM Rainer M Krug <Rainer at krugs.de> wrote:
>>> On 11 Feb 2020, at 09:42, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>>> On Tue, Feb 11, 2020 at 8:38 AM Rainer M Krug <Rainer at krugs.de> wrote:
>>> On 10 Feb 2020, at 17:58, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>>> 
>>> Maybe you have large, ignored files in the package directory? R first
>>> creates a copy of the whole directory and only applies `.Rbuildignore`
>>> after that.
>>> 
>>> THANKS - you solved my question without me having to answer it. As I am using a makefile to build the package, I can easily rename the ignored directories before calling build.
>>> 
>>> But the question is why are these ignored directories scanned before building the package? They should be ignored anyway?
>>> 
>>> Rainer
>>> 
>>> 
>>> A makefile is a good idea, but I would rather move the files that are
>>> needed to a temporary directory, instead of temporarily renaming
>>> unneeded files, because if the makefile fails, then you won't restore
>>> them and your project will be in a broken state.
>>> 
>>> 
>>> You are right. Having two targets (prepare build, finalise build) which move the files and put them back afterwards would be the best option (and make the build call both).
>>> 
>>> Is there a way to have an .onExit() type function in a makefile?
>> 
>> The on-exit mechanism can fail as well. It is just better not to move
>> around the files of the project I think.
> 
> True.
> 
> Thanks,
> 
> Rainer
> 
>> 
>> Gabor
>> 
>> [...]
> 
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> 
> Orcid ID: 0000-0002-7490-0066
> 
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
> 
> Office:	+41 (0)44 635 47 64
> Cell:       	+41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch
> 		Rainer at krugs.de
> Skype:     RMkrug
> 
> PGP: 0x0F52F982
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Tue Feb 11 15:23:20 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 11 Feb 2020 09:23:20 -0500
Subject: [R-pkg-devel] R CMD build hanging for some but not all packages
In-Reply-To: <21624E86-1111-42BF-A09B-06EF9DA2FF03@krugs.de>
References: <KU1P153MB0102191984A46EC91AF80977A6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <KU1P153MB01028E3C352BA3B9A10BE55BA6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <CABtg=Kms+_1w+KYrb4EQn6XqNNqWtH9-r3ixP7X1G=q7WeagNA@mail.gmail.com>
 <13E91390-1038-4C0B-885C-C4883209F426@krugs.de>
 <CABtg=K=uxCNuWm7L2JqdLii3mhPiWOaZRgrH6YLia5bzuSCatA@mail.gmail.com>
 <C47AD5F9-8CF0-4244-9591-E1E1BAE38505@krugs.de>
 <CABtg=Kn3DUDDKSgh3p-tZ6SKxTi-DfYVtQVAt7TMsBJDzjW74w@mail.gmail.com>
 <771AA67E-4083-4BDF-9194-D620C267DC9B@krugs.de>
 <21624E86-1111-42BF-A09B-06EF9DA2FF03@krugs.de>
Message-ID: <72f9923e-3180-4372-0d94-90405b897035@gmail.com>


   Something like file.copy( setdiff(list.files(recursive=TRUE)),
scan(".Rbuildignore", what=character())),  to = destdir) ?

On 2020-02-11 8:50 a.m., Rainer Krug wrote:
> Thinking about it - what would be the easiest way, to copy the package, excluding files in .Rbuidignore, into the temp directory?
> 
> I would like to use directly the .Rbuildignore file, to exclude the files from copying.
> 
> Any suggestions?
> 
> 
>> On 11 Feb 2020, at 10:20, Rainer M Krug <Rainer at krugs.de> wrote:
>>
>>
>>
>>> On 11 Feb 2020, at 09:54, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>>>
>>> On Tue, Feb 11, 2020 at 8:52 AM Rainer M Krug <Rainer at krugs.de> wrote:
>>>> On 11 Feb 2020, at 09:42, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>>>> On Tue, Feb 11, 2020 at 8:38 AM Rainer M Krug <Rainer at krugs.de> wrote:
>>>> On 10 Feb 2020, at 17:58, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>>>>
>>>> Maybe you have large, ignored files in the package directory? R first
>>>> creates a copy of the whole directory and only applies `.Rbuildignore`
>>>> after that.
>>>>
>>>> THANKS - you solved my question without me having to answer it. As I am using a makefile to build the package, I can easily rename the ignored directories before calling build.
>>>>
>>>> But the question is why are these ignored directories scanned before building the package? They should be ignored anyway?
>>>>
>>>> Rainer
>>>>
>>>>
>>>> A makefile is a good idea, but I would rather move the files that are
>>>> needed to a temporary directory, instead of temporarily renaming
>>>> unneeded files, because if the makefile fails, then you won't restore
>>>> them and your project will be in a broken state.
>>>>
>>>>
>>>> You are right. Having two targets (prepare build, finalise build) which move the files and put them back afterwards would be the best option (and make the build call both).
>>>>
>>>> Is there a way to have an .onExit() type function in a makefile?
>>>
>>> The on-exit mechanism can fail as well. It is just better not to move
>>> around the files of the project I think.
>>
>> True.
>>
>> Thanks,
>>
>> Rainer
>>
>>>
>>> Gabor
>>>
>>> [...]
>>
>> --
>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>>
>> Orcid ID: 0000-0002-7490-0066
>>
>> Department of Evolutionary Biology and Environmental Studies
>> University of Z?rich
>> Office Y34-J-74
>> Winterthurerstrasse 190
>> 8075 Z?rich
>> Switzerland
>>
>> Office:	+41 (0)44 635 47 64
>> Cell:       	+41 (0)78 630 66 57
>> email:      Rainer.Krug at uzh.ch
>> 		Rainer at krugs.de
>> Skype:     RMkrug
>>
>> PGP: 0x0F52F982
>>
>>
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> 
> Orcid ID: 0000-0002-7490-0066
> 
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
> 
> Office:	+41 (0)44 635 47 64
> Cell:       	+41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch
> 		Rainer at krugs.de
> Skype:     RMkrug
> 
> PGP: 0x0F52F982
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From c@@rd|@g@bor @end|ng |rom gm@||@com  Tue Feb 11 15:30:36 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Tue, 11 Feb 2020 14:30:36 +0000
Subject: [R-pkg-devel] R CMD build hanging for some but not all packages
In-Reply-To: <72f9923e-3180-4372-0d94-90405b897035@gmail.com>
References: <KU1P153MB0102191984A46EC91AF80977A6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <KU1P153MB01028E3C352BA3B9A10BE55BA6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <CABtg=Kms+_1w+KYrb4EQn6XqNNqWtH9-r3ixP7X1G=q7WeagNA@mail.gmail.com>
 <13E91390-1038-4C0B-885C-C4883209F426@krugs.de>
 <CABtg=K=uxCNuWm7L2JqdLii3mhPiWOaZRgrH6YLia5bzuSCatA@mail.gmail.com>
 <C47AD5F9-8CF0-4244-9591-E1E1BAE38505@krugs.de>
 <CABtg=Kn3DUDDKSgh3p-tZ6SKxTi-DfYVtQVAt7TMsBJDzjW74w@mail.gmail.com>
 <771AA67E-4083-4BDF-9194-D620C267DC9B@krugs.de>
 <21624E86-1111-42BF-A09B-06EF9DA2FF03@krugs.de>
 <72f9923e-3180-4372-0d94-90405b897035@gmail.com>
Message-ID: <CABtg=Kn3vRegLS4OLNZyuNeo2FP5030LE30fVy1_-RZrU9k--g@mail.gmail.com>

It is actually rather complicated, because .Rbuildignore can have
regular expressions, that refer to files or directories, and for the
latter you need to ignore the whole directory. You can look up in the
R source code how R does it, maybe you can reuse that code.

Here is a quick and dirty function that does it, mostly based on code
from the remotes package. It is very slow for me currently, mainly
because my .git directory has thousands of files. Still faster than
copying a huge directory I guess.

Speeding it up is left as an exercise. :) I think doing a manual
filtering for /.git initially would probably make it fast enough. Oh,
it is also not super tested. :)

without_ignored <- function(path = ".",
                            extra = c("^\\.git$", "^\\.gitignore$")) {
  paths <- dir(path, recursive = TRUE, all.files = TRUE)
  ignore_file <- file.path(path, ".Rbuildignore")
  ignore <- c(extra, tools:::get_exclude_patterns())

  if (file.exists(ignore_file)) {
    ignore <- c(ignore, readLines(ignore_file, warn = FALSE))
  }

  vlapply <- function(X, FUN, ..., USE.NAMES = TRUE) {
    vapply(X, FUN, logical(1L), ..., USE.NAMES = USE.NAMES)
  }

  matches_ignores <- function(x) {
    any(vlapply(ignore, grepl, x, perl = TRUE, ignore.case = TRUE))
  }

  directories <- function(paths) {
    dirs <- unique(dirname(paths))
    out <- dirs[dirs != "."]
    while(length(dirs) > 0 && any(dirs != ".")) {
      out <- unique(c(out, dirs[dirs != "."]))
      dirs <- unique(dirname(dirs))
    }
    sort(out)
  }

  # We need to search for the paths as well as directories in the path, so
  # `^foo$` matches `foo/bar`
  should_ignore <- function(path) {
    any(vlapply(c(path, directories(path)), matches_ignores))
  }

  paths[! vlapply(paths, should_ignore)]
}

Gabor

On Tue, Feb 11, 2020 at 2:23 PM Ben Bolker <bbolker at gmail.com> wrote:
>
>
>    Something like file.copy( setdiff(list.files(recursive=TRUE)),
> scan(".Rbuildignore", what=character())),  to = destdir) ?
>
> On 2020-02-11 8:50 a.m., Rainer Krug wrote:
> > Thinking about it - what would be the easiest way, to copy the package, excluding files in .Rbuidignore, into the temp directory?
> >
> > I would like to use directly the .Rbuildignore file, to exclude the files from copying.
> >
> > Any suggestions?
> >
> >
> >> On 11 Feb 2020, at 10:20, Rainer M Krug <Rainer at krugs.de> wrote:
> >>
> >>
> >>
> >>> On 11 Feb 2020, at 09:54, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> >>>
> >>> On Tue, Feb 11, 2020 at 8:52 AM Rainer M Krug <Rainer at krugs.de> wrote:
> >>>> On 11 Feb 2020, at 09:42, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> >>>> On Tue, Feb 11, 2020 at 8:38 AM Rainer M Krug <Rainer at krugs.de> wrote:
> >>>> On 10 Feb 2020, at 17:58, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> >>>>
> >>>> Maybe you have large, ignored files in the package directory? R first
> >>>> creates a copy of the whole directory and only applies `.Rbuildignore`
> >>>> after that.
> >>>>
> >>>> THANKS - you solved my question without me having to answer it. As I am using a makefile to build the package, I can easily rename the ignored directories before calling build.
> >>>>
> >>>> But the question is why are these ignored directories scanned before building the package? They should be ignored anyway?
> >>>>
> >>>> Rainer
> >>>>
> >>>>
> >>>> A makefile is a good idea, but I would rather move the files that are
> >>>> needed to a temporary directory, instead of temporarily renaming
> >>>> unneeded files, because if the makefile fails, then you won't restore
> >>>> them and your project will be in a broken state.
> >>>>
> >>>>
> >>>> You are right. Having two targets (prepare build, finalise build) which move the files and put them back afterwards would be the best option (and make the build call both).
> >>>>
> >>>> Is there a way to have an .onExit() type function in a makefile?
> >>>
> >>> The on-exit mechanism can fail as well. It is just better not to move
> >>> around the files of the project I think.
> >>
> >> True.
> >>
> >> Thanks,
> >>
> >> Rainer
> >>
> >>>
> >>> Gabor
> >>>
> >>> [...]
> >>
> >> --
> >> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> >>
> >> Orcid ID: 0000-0002-7490-0066
> >>
> >> Department of Evolutionary Biology and Environmental Studies
> >> University of Z?rich
> >> Office Y34-J-74
> >> Winterthurerstrasse 190
> >> 8075 Z?rich
> >> Switzerland
> >>
> >> Office:      +41 (0)44 635 47 64
> >> Cell:        +41 (0)78 630 66 57
> >> email:      Rainer.Krug at uzh.ch
> >>              Rainer at krugs.de
> >> Skype:     RMkrug
> >>
> >> PGP: 0x0F52F982
> >>
> >>
> >>
> >>
> >>      [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
> > --
> > Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
> >
> > Orcid ID: 0000-0002-7490-0066
> >
> > Department of Evolutionary Biology and Environmental Studies
> > University of Z?rich
> > Office Y34-J-74
> > Winterthurerstrasse 190
> > 8075 Z?rich
> > Switzerland
> >
> > Office:       +41 (0)44 635 47 64
> > Cell:         +41 (0)78 630 66 57
> > email:      Rainer.Krug at uzh.ch
> >               Rainer at krugs.de
> > Skype:     RMkrug
> >
> > PGP: 0x0F52F982
> >
> >
> >
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Tue Feb 11 16:59:25 2020
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Tue, 11 Feb 2020 15:59:25 +0000
Subject: [R-pkg-devel] R CMD build hanging for some but not all packages
In-Reply-To: <CABtg=Kn3vRegLS4OLNZyuNeo2FP5030LE30fVy1_-RZrU9k--g@mail.gmail.com>
References: <KU1P153MB0102191984A46EC91AF80977A6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <KU1P153MB01028E3C352BA3B9A10BE55BA6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <CABtg=Kms+_1w+KYrb4EQn6XqNNqWtH9-r3ixP7X1G=q7WeagNA@mail.gmail.com>
 <13E91390-1038-4C0B-885C-C4883209F426@krugs.de>
 <CABtg=K=uxCNuWm7L2JqdLii3mhPiWOaZRgrH6YLia5bzuSCatA@mail.gmail.com>
 <C47AD5F9-8CF0-4244-9591-E1E1BAE38505@krugs.de>
 <CABtg=Kn3DUDDKSgh3p-tZ6SKxTi-DfYVtQVAt7TMsBJDzjW74w@mail.gmail.com>
 <771AA67E-4083-4BDF-9194-D620C267DC9B@krugs.de>
 <21624E86-1111-42BF-A09B-06EF9DA2FF03@krugs.de>
 <72f9923e-3180-4372-0d94-90405b897035@gmail.com>
 <CABtg=Kn3vRegLS4OLNZyuNeo2FP5030LE30fVy1_-RZrU9k--g@mail.gmail.com>
Message-ID: <BL0PR04MB66096AC2D9BBADCEF11EEC2BF9180@BL0PR04MB6609.namprd04.prod.outlook.com>

I don't have direct experience or responsibility for this code, but it seems like R CMD build could instead create a 'whitelist' of files to copy to the build location, and do that rather than copying everything and removing things that are to be ignored. The basis for a patch might be somewhere in the vicinity of

  https://github.com/wch/r-source/blob/eb84b52444c4afff936852e11233ee84e26eaef1/src/library/tools/R/build.R#L978-L1051

I'm not sure about the reasons for the current approach, though maybe it is simpler to implement, more performant, or maybe handles edge cases (like long path names or movement across volumes?) better.

Martin Morgan

?On 2/11/20, 9:31 AM, "R-package-devel on behalf of G?bor Cs?rdi" <r-package-devel-bounces at r-project.org on behalf of csardi.gabor at gmail.com> wrote:

    It is actually rather complicated, because .Rbuildignore can have
    regular expressions, that refer to files or directories, and for the
    latter you need to ignore the whole directory. You can look up in the
    R source code how R does it, maybe you can reuse that code.
    
    Here is a quick and dirty function that does it, mostly based on code
    from the remotes package. It is very slow for me currently, mainly
    because my .git directory has thousands of files. Still faster than
    copying a huge directory I guess.
    
    Speeding it up is left as an exercise. :) I think doing a manual
    filtering for /.git initially would probably make it fast enough. Oh,
    it is also not super tested. :)
    
    without_ignored <- function(path = ".",
                                extra = c("^\\.git$", "^\\.gitignore$")) {
      paths <- dir(path, recursive = TRUE, all.files = TRUE)
      ignore_file <- file.path(path, ".Rbuildignore")
      ignore <- c(extra, tools:::get_exclude_patterns())
    
      if (file.exists(ignore_file)) {
        ignore <- c(ignore, readLines(ignore_file, warn = FALSE))
      }
    
      vlapply <- function(X, FUN, ..., USE.NAMES = TRUE) {
        vapply(X, FUN, logical(1L), ..., USE.NAMES = USE.NAMES)
      }
    
      matches_ignores <- function(x) {
        any(vlapply(ignore, grepl, x, perl = TRUE, ignore.case = TRUE))
      }
    
      directories <- function(paths) {
        dirs <- unique(dirname(paths))
        out <- dirs[dirs != "."]
        while(length(dirs) > 0 && any(dirs != ".")) {
          out <- unique(c(out, dirs[dirs != "."]))
          dirs <- unique(dirname(dirs))
        }
        sort(out)
      }
    
      # We need to search for the paths as well as directories in the path, so
      # `^foo$` matches `foo/bar`
      should_ignore <- function(path) {
        any(vlapply(c(path, directories(path)), matches_ignores))
      }
    
      paths[! vlapply(paths, should_ignore)]
    }
    
    Gabor
    
    On Tue, Feb 11, 2020 at 2:23 PM Ben Bolker <bbolker at gmail.com> wrote:
    >
    >
    >    Something like file.copy( setdiff(list.files(recursive=TRUE)),
    > scan(".Rbuildignore", what=character())),  to = destdir) ?
    >
    > On 2020-02-11 8:50 a.m., Rainer Krug wrote:
    > > Thinking about it - what would be the easiest way, to copy the package, excluding files in .Rbuidignore, into the temp directory?
    > >
    > > I would like to use directly the .Rbuildignore file, to exclude the files from copying.
    > >
    > > Any suggestions?
    > >
    > >
    > >> On 11 Feb 2020, at 10:20, Rainer M Krug <Rainer at krugs.de> wrote:
    > >>
    > >>
    > >>
    > >>> On 11 Feb 2020, at 09:54, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
    > >>>
    > >>> On Tue, Feb 11, 2020 at 8:52 AM Rainer M Krug <Rainer at krugs.de> wrote:
    > >>>> On 11 Feb 2020, at 09:42, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
    > >>>> On Tue, Feb 11, 2020 at 8:38 AM Rainer M Krug <Rainer at krugs.de> wrote:
    > >>>> On 10 Feb 2020, at 17:58, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
    > >>>>
    > >>>> Maybe you have large, ignored files in the package directory? R first
    > >>>> creates a copy of the whole directory and only applies `.Rbuildignore`
    > >>>> after that.
    > >>>>
    > >>>> THANKS - you solved my question without me having to answer it. As I am using a makefile to build the package, I can easily rename the ignored directories before calling build.
    > >>>>
    > >>>> But the question is why are these ignored directories scanned before building the package? They should be ignored anyway?
    > >>>>
    > >>>> Rainer
    > >>>>
    > >>>>
    > >>>> A makefile is a good idea, but I would rather move the files that are
    > >>>> needed to a temporary directory, instead of temporarily renaming
    > >>>> unneeded files, because if the makefile fails, then you won't restore
    > >>>> them and your project will be in a broken state.
    > >>>>
    > >>>>
    > >>>> You are right. Having two targets (prepare build, finalise build) which move the files and put them back afterwards would be the best option (and make the build call both).
    > >>>>
    > >>>> Is there a way to have an .onExit() type function in a makefile?
    > >>>
    > >>> The on-exit mechanism can fail as well. It is just better not to move
    > >>> around the files of the project I think.
    > >>
    > >> True.
    > >>
    > >> Thanks,
    > >>
    > >> Rainer
    > >>
    > >>>
    > >>> Gabor
    > >>>
    > >>> [...]
    > >>
    > >> --
    > >> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
    > >>
    > >> Orcid ID: 0000-0002-7490-0066
    > >>
    > >> Department of Evolutionary Biology and Environmental Studies
    > >> University of Z?rich
    > >> Office Y34-J-74
    > >> Winterthurerstrasse 190
    > >> 8075 Z?rich
    > >> Switzerland
    > >>
    > >> Office:      +41 (0)44 635 47 64
    > >> Cell:        +41 (0)78 630 66 57
    > >> email:      Rainer.Krug at uzh.ch
    > >>              Rainer at krugs.de
    > >> Skype:     RMkrug
    > >>
    > >> PGP: 0x0F52F982
    > >>
    > >>
    > >>
    > >>
    > >>      [[alternative HTML version deleted]]
    > >>
    > >> ______________________________________________
    > >> R-package-devel at r-project.org mailing list
    > >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
    > >
    > > --
    > > Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
    > >
    > > Orcid ID: 0000-0002-7490-0066
    > >
    > > Department of Evolutionary Biology and Environmental Studies
    > > University of Z?rich
    > > Office Y34-J-74
    > > Winterthurerstrasse 190
    > > 8075 Z?rich
    > > Switzerland
    > >
    > > Office:       +41 (0)44 635 47 64
    > > Cell:         +41 (0)78 630 66 57
    > > email:      Rainer.Krug at uzh.ch
    > >               Rainer at krugs.de
    > > Skype:     RMkrug
    > >
    > > PGP: 0x0F52F982
    > >
    > >
    > >
    > >
    > >       [[alternative HTML version deleted]]
    > >
    > > ______________________________________________
    > > R-package-devel at r-project.org mailing list
    > > https://stat.ethz.ch/mailman/listinfo/r-package-devel
    > >
    >
    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel
    
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel
    

From neon|r@ @end|ng |rom gm@||@com  Tue Feb 11 18:33:26 2020
From: neon|r@ @end|ng |rom gm@||@com (neonira Arinoem)
Date: Tue, 11 Feb 2020 18:33:26 +0100
Subject: [R-pkg-devel] Fwd: PDF generation issue from manual page
In-Reply-To: <CAN--Dz1KKtjmmvgNg3osk9KYEKOY9gECEsCkctqCmw0Kf6yYBw@mail.gmail.com>
References: <CAN--Dz1KKtjmmvgNg3osk9KYEKOY9gECEsCkctqCmw0Kf6yYBw@mail.gmail.com>
Message-ID: <CAN--Dz1JojNH8QF7QgYUWqLGi4vqXcz4PQc4+pPAgwfOJ1ok8g@mail.gmail.com>

Hi R gurus

Got an issue risen by CRAN about using unknown characters from Latex.

Here is the error message, in the context of PDF generated form manual pages







*Check: PDF version of manual, Result: WARNING   LaTeX errors when creating
PDF version.   This typically indicates Rd problems.   LaTeX errors found:
  ! Undefined control sequence.   <recently read> \blacktriangleright *




*   l.237 STRATUM $\blacktriangleright
$ LAYER\_3   ! Undefined control sequence.   <recently read>
\blacktriangleright *




*   l.239 PHASING $\blacktriangleright
$ RUN   ! Undefined control sequence.   <recently read> \blacktriangleright
*

*   l.241 INTENT  $\blacktriangleright
$ FEEDBACK*

I understand that the \blacktriangleright is an unknown control sequence
from latex ... and that sounds strange to me, as I uses it often in
vignettes without any issue so far.
I did some tests on my machine with  R CMD Rd2pdf --force --output=x.pdf
man/*.Rd and it reproduces the issue.

In the incriminated manual page, the code generating this sequence is the
following
*\ifelse{latex}{\out{$\blacktriangleright$}}{\ifelse{html}{\out{&#x25B6;}}{\u25b6}}*

Apparently I need to add the \usepackage{amssymb} to the manual page. Do
not know yet, how to achieve this.

Yours ideas and hints welcome and this point or  any other solution to this
tricky issue.

I know that I can still change *\backtriangleright* with any available
control sequence and it will work. Indeed, not the way I prefer.
Really wish to get my *\blacktriangleright* display.

Best.
Neonira

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Feb 11 20:23:24 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 11 Feb 2020 14:23:24 -0500
Subject: [R-pkg-devel] Fwd: PDF generation issue from manual page
In-Reply-To: <CAN--Dz1JojNH8QF7QgYUWqLGi4vqXcz4PQc4+pPAgwfOJ1ok8g@mail.gmail.com>
References: <CAN--Dz1KKtjmmvgNg3osk9KYEKOY9gECEsCkctqCmw0Kf6yYBw@mail.gmail.com>
 <CAN--Dz1JojNH8QF7QgYUWqLGi4vqXcz4PQc4+pPAgwfOJ1ok8g@mail.gmail.com>
Message-ID: <3caecdf1-18db-3a52-1de6-6b15d3a5885f@gmail.com>

On 11/02/2020 12:33 p.m., neonira Arinoem wrote:
> Hi R gurus
> 
> Got an issue risen by CRAN about using unknown characters from Latex.
> 
> Here is the error message, in the context of PDF generated form manual pages
> 
> 
> 
> 
> 
> 
> 
> *Check: PDF version of manual, Result: WARNING   LaTeX errors when creating
> PDF version.   This typically indicates Rd problems.   LaTeX errors found:
>    ! Undefined control sequence.   <recently read> \blacktriangleright * >
> 
> 
> 
> *   l.237 STRATUM $\blacktriangleright
> $ LAYER\_3   ! Undefined control sequence.   <recently read>
> \blacktriangleright *
> 
> 
> 
> 
> *   l.239 PHASING $\blacktriangleright
> $ RUN   ! Undefined control sequence.   <recently read> \blacktriangleright
> *
> 
> *   l.241 INTENT  $\blacktriangleright
> $ FEEDBACK*
> 
> I understand that the \blacktriangleright is an unknown control sequence
> from latex ... and that sounds strange to me, as I uses it often in
> vignettes without any issue so far.
> I did some tests on my machine with  R CMD Rd2pdf --force --output=x.pdf
> man/*.Rd and it reproduces the issue.
> 
> In the incriminated manual page, the code generating this sequence is the
> following
> *\ifelse{latex}{\out{$\blacktriangleright$}}{\ifelse{html}{\out{&#x25B6;}}{\u25b6}}*
> 
> Apparently I need to add the \usepackage{amssymb} to the manual page. Do
> not know yet, how to achieve this.

As far as I know there's no way for you to do that.  The fact you can do 
it in vignettes isn't relevant:  Rd files are in Rd format, which is not 
LaTeX.  Some LaTeX works when you put it in the \ifelse{latex} macro, 
but there's no guarantee that it all will.

There's one exception to this warning:  if you are building a package 
for yourself, not for CRAN, you can put \usepackage{amssymb} into your 
Rd.cfg file (somewhere on the LaTeX search path).  See the R 
Installation and Administration manual for details.  I don't think 
there's anywhere in your package you could include such a file.

Duncan Murdoch
> 
> Yours ideas and hints welcome and this point or  any other solution to this
> tricky issue.
> 
> I know that I can still change *\backtriangleright* with any available
> control sequence and it will work. Indeed, not the way I prefer.
> Really wish to get my *\blacktriangleright* display.
> 
> Best.
> Neonira
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From mn@b|@n @end|ng |rom bro@d|n@t|tute@org  Tue Feb 11 20:56:30 2020
From: mn@b|@n @end|ng |rom bro@d|n@t|tute@org (Mohsen Nabian)
Date: Tue, 11 Feb 2020 14:56:30 -0500
Subject: [R-pkg-devel] Question regarding R package development,
 how to resolve "Warning: no source files found"
Message-ID: <CAO+1=fCKdNEiiBGjMzbZESQTmcaHC72jp=MBnQbM_n58iyBQeQ@mail.gmail.com>

Greetings!

How to resolve the following warning for my R package after running test
:system2("R", paste0("CMD INSTALL -l ",Sys.getenv('R_HOME'),"/library ",
pkg), stdout = "install1.txt", stderr = "install2.txt")


Warning result :

"Warning: no source files found"


Thanks alot!

	[[alternative HTML version deleted]]


From wdun|@p @end|ng |rom t|bco@com  Tue Feb 11 21:07:05 2020
From: wdun|@p @end|ng |rom t|bco@com (William Dunlap)
Date: Tue, 11 Feb 2020 12:07:05 -0800
Subject: [R-pkg-devel] Question regarding R package development,
 how to resolve "Warning: no source files found"
In-Reply-To: <CAO+1=fCKdNEiiBGjMzbZESQTmcaHC72jp=MBnQbM_n58iyBQeQ@mail.gmail.com>
References: <CAO+1=fCKdNEiiBGjMzbZESQTmcaHC72jp=MBnQbM_n58iyBQeQ@mail.gmail.com>
Message-ID: <CAF8bMcb-S-fOfjiYuMO1-KVs06ozb3eN_pvG68S-nU0tET5Cjg@mail.gmail.com>

INSTALL will give that warning if you have a pkg/src directory that
contains no files that look like C, C++, or Fortran files.

Bill Dunlap
TIBCO Software
wdunlap tibco.com


On Tue, Feb 11, 2020 at 11:58 AM Mohsen Nabian <mnabian at broadinstitute.org>
wrote:

> Greetings!
>
> How to resolve the following warning for my R package after running test
> :system2("R", paste0("CMD INSTALL -l ",Sys.getenv('R_HOME'),"/library ",
> pkg), stdout = "install1.txt", stderr = "install2.txt")
>
>
> Warning result :
>
> "Warning: no source files found"
>
>
> Thanks alot!
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From R@|ner @end|ng |rom krug@@de  Wed Feb 12 09:45:03 2020
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Wed, 12 Feb 2020 09:45:03 +0100
Subject: [R-pkg-devel] R CMD build hanging for some but not all packages
In-Reply-To: <CABtg=Kn3vRegLS4OLNZyuNeo2FP5030LE30fVy1_-RZrU9k--g@mail.gmail.com>
References: <KU1P153MB0102191984A46EC91AF80977A6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <KU1P153MB01028E3C352BA3B9A10BE55BA6190@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
 <CABtg=Kms+_1w+KYrb4EQn6XqNNqWtH9-r3ixP7X1G=q7WeagNA@mail.gmail.com>
 <13E91390-1038-4C0B-885C-C4883209F426@krugs.de>
 <CABtg=K=uxCNuWm7L2JqdLii3mhPiWOaZRgrH6YLia5bzuSCatA@mail.gmail.com>
 <C47AD5F9-8CF0-4244-9591-E1E1BAE38505@krugs.de>
 <CABtg=Kn3DUDDKSgh3p-tZ6SKxTi-DfYVtQVAt7TMsBJDzjW74w@mail.gmail.com>
 <771AA67E-4083-4BDF-9194-D620C267DC9B@krugs.de>
 <21624E86-1111-42BF-A09B-06EF9DA2FF03@krugs.de>
 <72f9923e-3180-4372-0d94-90405b897035@gmail.com>
 <CABtg=Kn3vRegLS4OLNZyuNeo2FP5030LE30fVy1_-RZrU9k--g@mail.gmail.com>
Message-ID: <11A0ED28-9AFC-4F35-8C44-73A54663CF5E@krugs.de>

Thanks Gabor.

The speed is OK (much faster than copying everything), but in my case, all files are ignored, although the package builds fine. So the .Rbuildignore is fine for R. It looks as followed:

```
^.*\.Rproj$
^\.Rproj\.user$
^Makefile$
^Readme\\.$
^README\..*$

## Temporary folder
^tmp$
^temp$

## Example Data Folder
^inst/0.raw.data$
^inst/1.pre-processed.data$

```

Rainer



> On 11 Feb 2020, at 15:30, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
> 
> It is actually rather complicated, because .Rbuildignore can have
> regular expressions, that refer to files or directories, and for the
> latter you need to ignore the whole directory. You can look up in the
> R source code how R does it, maybe you can reuse that code.
> 
> Here is a quick and dirty function that does it, mostly based on code
> from the remotes package. It is very slow for me currently, mainly
> because my .git directory has thousands of files. Still faster than
> copying a huge directory I guess.
> 
> Speeding it up is left as an exercise. :) I think doing a manual
> filtering for /.git initially would probably make it fast enough. Oh,
> it is also not super tested. :)
> 
> without_ignored <- function(path = ".",
>                            extra = c("^\\.git$", "^\\.gitignore$")) {
>  paths <- dir(path, recursive = TRUE, all.files = TRUE)
>  ignore_file <- file.path(path, ".Rbuildignore")
>  ignore <- c(extra, tools:::get_exclude_patterns())
> 
>  if (file.exists(ignore_file)) {
>    ignore <- c(ignore, readLines(ignore_file, warn = FALSE))
>  }
> 
>  vlapply <- function(X, FUN, ..., USE.NAMES = TRUE) {
>    vapply(X, FUN, logical(1L), ..., USE.NAMES = USE.NAMES)
>  }
> 
>  matches_ignores <- function(x) {
>    any(vlapply(ignore, grepl, x, perl = TRUE, ignore.case = TRUE))
>  }
> 
>  directories <- function(paths) {
>    dirs <- unique(dirname(paths))
>    out <- dirs[dirs != "."]
>    while(length(dirs) > 0 && any(dirs != ".")) {
>      out <- unique(c(out, dirs[dirs != "."]))
>      dirs <- unique(dirname(dirs))
>    }
>    sort(out)
>  }
> 
>  # We need to search for the paths as well as directories in the path, so
>  # `^foo$` matches `foo/bar`
>  should_ignore <- function(path) {
>    any(vlapply(c(path, directories(path)), matches_ignores))
>  }
> 
>  paths[! vlapply(paths, should_ignore)]
> }
> 
> Gabor
> 
> On Tue, Feb 11, 2020 at 2:23 PM Ben Bolker <bbolker at gmail.com> wrote:
>> 
>> 
>>   Something like file.copy( setdiff(list.files(recursive=TRUE)),
>> scan(".Rbuildignore", what=character())),  to = destdir) ?
>> 
>> On 2020-02-11 8:50 a.m., Rainer Krug wrote:
>>> Thinking about it - what would be the easiest way, to copy the package, excluding files in .Rbuidignore, into the temp directory?
>>> 
>>> I would like to use directly the .Rbuildignore file, to exclude the files from copying.
>>> 
>>> Any suggestions?
>>> 
>>> 
>>>> On 11 Feb 2020, at 10:20, Rainer M Krug <Rainer at krugs.de> wrote:
>>>> 
>>>> 
>>>> 
>>>>> On 11 Feb 2020, at 09:54, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>>>>> 
>>>>> On Tue, Feb 11, 2020 at 8:52 AM Rainer M Krug <Rainer at krugs.de> wrote:
>>>>>> On 11 Feb 2020, at 09:42, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>>>>>> On Tue, Feb 11, 2020 at 8:38 AM Rainer M Krug <Rainer at krugs.de> wrote:
>>>>>> On 10 Feb 2020, at 17:58, G?bor Cs?rdi <csardi.gabor at gmail.com> wrote:
>>>>>> 
>>>>>> Maybe you have large, ignored files in the package directory? R first
>>>>>> creates a copy of the whole directory and only applies `.Rbuildignore`
>>>>>> after that.
>>>>>> 
>>>>>> THANKS - you solved my question without me having to answer it. As I am using a makefile to build the package, I can easily rename the ignored directories before calling build.
>>>>>> 
>>>>>> But the question is why are these ignored directories scanned before building the package? They should be ignored anyway?
>>>>>> 
>>>>>> Rainer
>>>>>> 
>>>>>> 
>>>>>> A makefile is a good idea, but I would rather move the files that are
>>>>>> needed to a temporary directory, instead of temporarily renaming
>>>>>> unneeded files, because if the makefile fails, then you won't restore
>>>>>> them and your project will be in a broken state.
>>>>>> 
>>>>>> 
>>>>>> You are right. Having two targets (prepare build, finalise build) which move the files and put them back afterwards would be the best option (and make the build call both).
>>>>>> 
>>>>>> Is there a way to have an .onExit() type function in a makefile?
>>>>> 
>>>>> The on-exit mechanism can fail as well. It is just better not to move
>>>>> around the files of the project I think.
>>>> 
>>>> True.
>>>> 
>>>> Thanks,
>>>> 
>>>> Rainer
>>>> 
>>>>> 
>>>>> Gabor
>>>>> 
>>>>> [...]
>>>> 
>>>> --
>>>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>>>> 
>>>> Orcid ID: 0000-0002-7490-0066
>>>> 
>>>> Department of Evolutionary Biology and Environmental Studies
>>>> University of Z?rich
>>>> Office Y34-J-74
>>>> Winterthurerstrasse 190
>>>> 8075 Z?rich
>>>> Switzerland
>>>> 
>>>> Office:      +41 (0)44 635 47 64
>>>> Cell:        +41 (0)78 630 66 57
>>>> email:      Rainer.Krug at uzh.ch
>>>>             Rainer at krugs.de
>>>> Skype:     RMkrug
>>>> 
>>>> PGP: 0x0F52F982
>>>> 
>>>> 
>>>> 
>>>> 
>>>>     [[alternative HTML version deleted]]
>>>> 
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> 
>>> --
>>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>>> 
>>> Orcid ID: 0000-0002-7490-0066
>>> 
>>> Department of Evolutionary Biology and Environmental Studies
>>> University of Z?rich
>>> Office Y34-J-74
>>> Winterthurerstrasse 190
>>> 8075 Z?rich
>>> Switzerland
>>> 
>>> Office:       +41 (0)44 635 47 64
>>> Cell:         +41 (0)78 630 66 57
>>> email:      Rainer.Krug at uzh.ch
>>>              Rainer at krugs.de
>>> Skype:     RMkrug
>>> 
>>> PGP: 0x0F52F982
>>> 
>>> 
>>> 
>>> 
>>>      [[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> 
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Feb 14 15:59:17 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 14 Feb 2020 15:59:17 +0100
Subject: [R-pkg-devel] winbuilder + CRAN incoming checkes offline for 30
 hours from now
Message-ID: <85adef20-2437-d595-cf05-81c774e2069e@statistik.tu-dortmund.de>

Dear all,

unfortunately there is infrastructure work going on at the place where 
winbuilder and part of the CRAN incoming check infrastructure is hosted, 
hence the winbuilder service will be offline for roughly 30 hours from 
now (going down in one hour from now). Same is true for CRAN incoming 
checks: You can well submit further on, but submissions won't be auto 
processed for that time.

Best,
Uwe Ligges


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Sun Feb 16 21:21:17 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Sun, 16 Feb 2020 14:21:17 -0600
Subject: [R-pkg-devel] Error: Symbol \textasciigrave not provided by
 (textcomp)
Message-ID: <0c8419a0-9af1-d5c5-61cd-72743fbf5b48@effectivedefense.org>

Hello, All:


 ????? "R CMD check Ecfun_0.2-4.tar.gz" ends with 8 repetitions of the 
following:


! Package textcomp Error: Symbol \textasciigrave not provided by
(textcomp)??????????????? font family zi4 in TS1 encoding.
(textcomp)??????????????? Default family used instead.

See the textcomp package documentation for explanation.
* checking PDF version of manual without hyperrefs or index ... ERROR
* DONE


 ????? This is using R 3.6.2 under macOS 10.15.3 applied to the current 
development version of "https://github.com/sbgraves237/Ecfun".? Travis 
CI reported that the build passed;? see 
"https://travis-ci.org/sbgraves237/Ecfun/builds/650505913?utm_medium=notification&utm_source=email". 



 ????? This looks to me like it's complaining about the use of the back 
tick character ("`", below "~" on the top left key on a standard 
American English keyboard), which I assume is equivalent to 
"\textasciigrave" in certain contexts.


 ????? Six out of those 8 repetitions occur in the examples sections of 
files "grepNonStandardCharacters.Rd", "subNonStandardCharacters.Rd", and 
"subNonStandardNames.Rd".? Those functions were written to fix parsing 
errors with names like "Ra?l" that had been mangled by different 
software before I could get it into R.


 ????? After a day's work failed to produce a work around, I decided to 
ask this group.


 ????? What do you suggest?
 ????? Thanks,
 ????? Spencer Graves


From biii m@iii@g oii de@@ey@ws  Mon Feb 17 16:05:33 2020
From: biii m@iii@g oii de@@ey@ws (biii m@iii@g oii de@@ey@ws)
Date: Mon, 17 Feb 2020 10:05:33 -0500
Subject: [R-pkg-devel] Private S3 Method not Found
Message-ID: <03a901d5e5a3$b4ba0ee0$1e2e2ca0$@denney.ws>

Hello,

 

I'm working on a function in a package that will provide an exported
function that will convert formula to LaTeX equations.  For that, it
recursively goes through the formula converting objects of class "formula",
"call", "name", and "(" to LaTeX.

 

I have a private S3 generic function that I'm using for the conversion, but
for some reason, the generic is not detected, and checking the package fails
for that reason
(https://travis-ci.org/billdenney/bsd.report/jobs/651510333):

 

no applicable method for 'knit_print_helper_formula' applied to an object of
class "name"

Backtrace:

  1. testthat::expect_equal(...)

  4. bsd.report:::knit_print.formula(a ~ b(c))

  6. bsd.report:::knit_print_helper_formula.formula(x, ..., replacements =
replacements)

  9. bsd.report:::knit_print_helper_formula.call(x[[3]], ...)

10. bsd.report:::knit_print_helper_formula.function_call(x, ...)

11. base::sapply(...)

12. base::lapply(X = X, FUN = FUN, ...)

13. bsd.report:::FUN(X[[i]], ...)

 

But, there is a knit_print_helper_formula.name function call defined
(https://github.com/billdenney/bsd.report/blob/master/R/knit_print.formula.R
#L60-L79):

 

knit_print_helper_formula <- function(x, ...) {

  UseMethod("knit_print_helper_formula")

}

 

# Some other methods

 

knit_print_helper_formula.name <- function(x, ...) {

# Function body

}

 

Does anyone know why the S3 method for name class objects is not found when
checking the package?

 

Thanks,

 

Bill


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Feb 17 16:14:24 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 17 Feb 2020 10:14:24 -0500
Subject: [R-pkg-devel] Private S3 Method not Found
In-Reply-To: <03a901d5e5a3$b4ba0ee0$1e2e2ca0$@denney.ws>
References: <03a901d5e5a3$b4ba0ee0$1e2e2ca0$@denney.ws>
Message-ID: <dcec6c83-2463-64e3-777d-c821a78498e0@gmail.com>

On 17/02/2020 10:05 a.m., bill at denney.ws wrote:
> Hello,
> 
>   
> 
> I'm working on a function in a package that will provide an exported
> function that will convert formula to LaTeX equations.  For that, it
> recursively goes through the formula converting objects of class "formula",
> "call", "name", and "(" to LaTeX.
> 
>   
> 
> I have a private S3 generic function that I'm using for the conversion, but
> for some reason, the generic is not detected, and checking the package fails
> for that reason
> (https://travis-ci.org/billdenney/bsd.report/jobs/651510333):
> 
>   
> 
> no applicable method for 'knit_print_helper_formula' applied to an object of
> class "name"
> 
> Backtrace:
> 
>    1. testthat::expect_equal(...)
> 
>    4. bsd.report:::knit_print.formula(a ~ b(c))
> 
>    6. bsd.report:::knit_print_helper_formula.formula(x, ..., replacements =
> replacements)
> 
>    9. bsd.report:::knit_print_helper_formula.call(x[[3]], ...)
> 
> 10. bsd.report:::knit_print_helper_formula.function_call(x, ...)
> 
> 11. base::sapply(...)
> 
> 12. base::lapply(X = X, FUN = FUN, ...)
> 
> 13. bsd.report:::FUN(X[[i]], ...)
> 
>   
> 
> But, there is a knit_print_helper_formula.name function call defined
> (https://github.com/billdenney/bsd.report/blob/master/R/knit_print.formula.R
> #L60-L79):
> 
>   
> 
> knit_print_helper_formula <- function(x, ...) {
> 
>    UseMethod("knit_print_helper_formula")
> 
> }
> 
>   
> 
> # Some other methods
> 
>   
> 
> knit_print_helper_formula.name <- function(x, ...) {
> 
> # Function body
> 
> }
> 
>   
> 
> Does anyone know why the S3 method for name class objects is not found when
> checking the package?
> 

I think you need to register knit_print_helper_formula.name as an S3 
method even if the generic is not exported.  I forget whether you do 
this in the NAMESPACE file or at runtime using registerS3method.

Duncan Murdoch


From rmh @end|ng |rom temp|e@edu  Mon Feb 17 16:30:55 2020
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Mon, 17 Feb 2020 10:30:55 -0500
Subject: [R-pkg-devel] Private S3 Method not Found
In-Reply-To: <03a901d5e5a3$b4ba0ee0$1e2e2ca0$@denney.ws>
References: <03a901d5e5a3$b4ba0ee0$1e2e2ca0$@denney.ws>
Message-ID: <CAGx1TMAMORCb4zpKapnTzjdRtyneFmwwa0SN1MLJ=annHQAKUg@mail.gmail.com>

Please be consistent with the latex() function in the Hmisc package.  For
example, for an array x, latex (x) produces a complete latex table
environment.  See the ?latex helpfile for details.

Rich

On Mon, Feb 17, 2020 at 10:07 <bill at denney.ws> wrote:

> Hello,
>
>
>
> I'm working on a function in a package that will provide an exported
> function that will convert formula to LaTeX equations.  For that, it
> recursively goes through the formula converting objects of class "formula",
> "call", "name", and "(" to LaTeX.
>
>
>
> I have a private S3 generic function that I'm using for the conversion, but
> for some reason, the generic is not detected, and checking the package
> fails
> for that reason
> (https://travis-ci.org/billdenney/bsd.report/jobs/651510333):
>
>
>
> no applicable method for 'knit_print_helper_formula' applied to an object
> of
> class "name"
>
> Backtrace:
>
>   1. testthat::expect_equal(...)
>
>   4. bsd.report:::knit_print.formula(a ~ b(c))
>
>   6. bsd.report:::knit_print_helper_formula.formula(x, ..., replacements =
> replacements)
>
>   9. bsd.report:::knit_print_helper_formula.call(x[[3]], ...)
>
> 10. bsd.report:::knit_print_helper_formula.function_call(x, ...)
>
> 11. base::sapply(...)
>
> 12. base::lapply(X = X, FUN = FUN, ...)
>
> 13. bsd.report:::FUN(X[[i]], ...)
>
>
>
> But, there is a knit_print_helper_formula.name function call defined
> (
> https://github.com/billdenney/bsd.report/blob/master/R/knit_print.formula.R
> #L60-L79
> <https://github.com/billdenney/bsd.report/blob/master/R/knit_print.formula.R#L60-L79>
> ):
>
>
>
> knit_print_helper_formula <- function(x, ...) {
>
>   UseMethod("knit_print_helper_formula")
>
> }
>
>
>
> # Some other methods
>
>
>
> knit_print_helper_formula.name <- function(x, ...) {
>
> # Function body
>
> }
>
>
>
> Does anyone know why the S3 method for name class objects is not found when
> checking the package?
>
>
>
> Thanks,
>
>
>
> Bill
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From biii m@iii@g oii de@@ey@ws  Mon Feb 17 16:54:05 2020
From: biii m@iii@g oii de@@ey@ws (biii m@iii@g oii de@@ey@ws)
Date: Mon, 17 Feb 2020 10:54:05 -0500
Subject: [R-pkg-devel] Private S3 Method not Found
In-Reply-To: <CAGx1TMAMORCb4zpKapnTzjdRtyneFmwwa0SN1MLJ=annHQAKUg@mail.gmail.com>
References: <03a901d5e5a3$b4ba0ee0$1e2e2ca0$@denney.ws>
 <CAGx1TMAMORCb4zpKapnTzjdRtyneFmwwa0SN1MLJ=annHQAKUg@mail.gmail.com>
Message-ID: <03d401d5e5aa$7bba0fd0$732e2f70$@denney.ws>

Hi Rich,

 

I?m not doing the same thing as Hmisc::latex().  That generates a .tex file and compiles it (or at least it appears to try to do that on my system, but it stopped partway through for me).

 

When I ran

 

Hmisc::latex(a~b)

 

It generated a .tex file for a table:

 

\begin{table}[!tbp]

\begin{center}

\begin{tabular}{l}

\hline\hline

\multicolumn{1}{c}{}\tabularnewline

\hline

~\tabularnewline

a\tabularnewline

b\tabularnewline

\hline

\end{tabular}\end{center}

\end{table}

 

While I?m wanting an equation:

 

$$a = b$$

 

Thanks,

 

Bill

 

From: Richard M. Heiberger <rmh at temple.edu> 
Sent: Monday, February 17, 2020 10:31 AM
To: bill at denney.ws
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] Private S3 Method not Found

 

Please be consistent with the latex() function in the Hmisc package.  For example, for an array x, latex (x) produces a complete latex table environment.  See the ?latex helpfile for details.

 

Rich

 

On Mon, Feb 17, 2020 at 10:07 <bill at denney.ws <mailto:bill at denney.ws> > wrote:

Hello,



I'm working on a function in a package that will provide an exported
function that will convert formula to LaTeX equations.  For that, it
recursively goes through the formula converting objects of class "formula",
"call", "name", and "(" to LaTeX.



I have a private S3 generic function that I'm using for the conversion, but
for some reason, the generic is not detected, and checking the package fails
for that reason
(https://travis-ci.org/billdenney/bsd.report/jobs/651510333):



no applicable method for 'knit_print_helper_formula' applied to an object of
class "name"

Backtrace:

  1. testthat::expect_equal(...)

  4. bsd.report:::knit_print.formula(a ~ b(c))

  6. bsd.report:::knit_print_helper_formula.formula(x, ..., replacements =
replacements)

  9. bsd.report:::knit_print_helper_formula.call(x[[3]], ...)

10. bsd.report:::knit_print_helper_formula.function_call(x, ...)

11. base::sapply(...)

12. base::lapply(X = X, FUN = FUN, ...)

13. bsd.report:::FUN(X[[i]], ...)



But, there is a knit_print_helper_formula.name <http://knit_print_helper_formula.name>  function call defined
(https://github.com/billdenney/bsd.report/blob/master/R/knit_print.formula.R <https://github.com/billdenney/bsd.report/blob/master/R/knit_print.formula.R#L60-L79> 
#L60-L79):



knit_print_helper_formula <- function(x, ...) {

  UseMethod("knit_print_helper_formula")

}



# Some other methods



knit_print_helper_formula.name <http://knit_print_helper_formula.name>  <- function(x, ...) {

# Function body

}



Does anyone know why the S3 method for name class objects is not found when
checking the package?



Thanks,



Bill


        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org <mailto:R-package-devel at r-project.org>  mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


	[[alternative HTML version deleted]]


From biii m@iii@g oii de@@ey@ws  Mon Feb 17 17:33:30 2020
From: biii m@iii@g oii de@@ey@ws (biii m@iii@g oii de@@ey@ws)
Date: Mon, 17 Feb 2020 11:33:30 -0500
Subject: [R-pkg-devel] Private S3 Method not Found
In-Reply-To: <dcec6c83-2463-64e3-777d-c821a78498e0@gmail.com>
References: <03a901d5e5a3$b4ba0ee0$1e2e2ca0$@denney.ws>
 <dcec6c83-2463-64e3-777d-c821a78498e0@gmail.com>
Message-ID: <040901d5e5af$fdfa8970$f9ef9c50$@denney.ws>

Thanks for the pointer!  Adding "S3method(knit_print_helper_formula,name)" to the NAMESPACE seems to have fixed it.

For others who come across this, in roxygen2 parlance, that means using:

#' @method knit_print_helper_formula name
#' @export

Even though the actual export is not desired.

Thanks,

Bill

-----Original Message-----
From: Duncan Murdoch <murdoch.duncan at gmail.com> 

On 17/02/2020 10:05 a.m., bill at denney.ws wrote:
 
> Does anyone know why the S3 method for name class objects is not found 
> when checking the package?

I think you need to register knit_print_helper_formula.name as an S3 method even if the generic is not exported.  I forget whether you do this in the NAMESPACE file or at runtime using registerS3method.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Feb 17 19:04:40 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 17 Feb 2020 10:04:40 -0800
Subject: [R-pkg-devel] Private S3 Method not Found
In-Reply-To: <040901d5e5af$fdfa8970$f9ef9c50$@denney.ws>
References: <03a901d5e5a3$b4ba0ee0$1e2e2ca0$@denney.ws>
 <dcec6c83-2463-64e3-777d-c821a78498e0@gmail.com>
 <040901d5e5af$fdfa8970$f9ef9c50$@denney.ws>
Message-ID: <6B0E97B1-C5D9-4DDC-9B3B-00E36750439D@dcn.davis.ca.us>

I don't think it is possible to avoid exporting S3 methods from a package and still have the class behave as intended. Use a regular function if name encapsulation is important to you.

On February 17, 2020 8:33:30 AM PST, bill at denney.ws wrote:
>Thanks for the pointer!  Adding
>"S3method(knit_print_helper_formula,name)" to the NAMESPACE seems to
>have fixed it.
>
>For others who come across this, in roxygen2 parlance, that means
>using:
>
>#' @method knit_print_helper_formula name
>#' @export
>
>Even though the actual export is not desired.
>
>Thanks,
>
>Bill
>
>-----Original Message-----
>From: Duncan Murdoch <murdoch.duncan at gmail.com> 
>
>On 17/02/2020 10:05 a.m., bill at denney.ws wrote:
> 
>> Does anyone know why the S3 method for name class objects is not
>found 
>> when checking the package?
>
>I think you need to register knit_print_helper_formula.name as an S3
>method even if the generic is not exported.  I forget whether you do
>this in the NAMESPACE file or at runtime using registerS3method.
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From rmh @end|ng |rom temp|e@edu  Mon Feb 17 19:21:30 2020
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Mon, 17 Feb 2020 13:21:30 -0500
Subject: [R-pkg-devel] Private S3 Method not Found
In-Reply-To: <03d401d5e5aa$7bba0fd0$732e2f70$@denney.ws>
References: <03a901d5e5a3$b4ba0ee0$1e2e2ca0$@denney.ws>
 <CAGx1TMAMORCb4zpKapnTzjdRtyneFmwwa0SN1MLJ=annHQAKUg@mail.gmail.com>
 <03d401d5e5aa$7bba0fd0$732e2f70$@denney.ws>
Message-ID: <CAGx1TMDA6wJS5sqzNmcxqG6vUVWQRJVPd_CN00irxwXhb9g0+g@mail.gmail.com>

latex() probably stopped midway through the compilation because you are
using intermediate routines other than the default.
For pdflatex, for example, you need to run
    options(latexcmd='pdflatex', dviExtension='pdf', xdvicmd='open')
before using the latex() function.  See the Details section of ?latex.

To suppress the compilation, and stop with just the .tex file, use
print.default.
> tmp <- array(1:8, c(2,4), list(1:2,3:6))
> print.default(latex(tmp))
$file
[1] "tmp.tex"

$style
character(0)

attr(,"class")
[1] "latex"
>

The explicit result of the latex() function is a file name of class
"latex".  That way the automatic printing
feature of R shows the compiled file for that specific argument (tmp
in the example above).
Again in R terminology, the actual file "tmp.tex" is produced as a
side effect.  The tmp.tex file is designed
to be incorporated into your more comprehensive .tex file.

> tmp <- array(1:8, c(2,4), list(1:2,3:6))
> tmp.latex <- latex(tmp)
> print.default(tmp.latex)
$file
[1] "tmp.tex"

$style
character(0)

attr(,"class")
[1] "latex"


There are latex methods for many classes of objects.  formula is not
one of them.
>From your short initial description, it looks like what you are doing
could be thought of
as the latex.formula method.  I recommend doing it that way to get the
leverage of
all the other things the latex() and related functions do.  Once it is
working I suggest you
send your function to Frank Harrell (I cced him on this email) and
request that it be included as part of Hmisc::latex
You, of course, retain authorship

Rich

On Mon, Feb 17, 2020 at 10:54 AM <bill at denney.ws> wrote:
>
> Hi Rich,
>
>
>
> I?m not doing the same thing as Hmisc::latex().  That generates a .tex file and compiles it (or at least it appears to try to do that on my system, but it stopped partway through for me).
>
>
>
> When I ran
>
>
>
> Hmisc::latex(a~b)
>
>
>
> It generated a .tex file for a table:
>
>
>
> \begin{table}[!tbp]
>
> \begin{center}
>
> \begin{tabular}{l}
>
> \hline\hline
>
> \multicolumn{1}{c}{}\tabularnewline
>
> \hline
>
> ~\tabularnewline
>
> a\tabularnewline
>
> b\tabularnewline
>
> \hline
>
> \end{tabular}\end{center}
>
> \end{table}
>
>
>
> While I?m wanting an equation:
>
>
>
> $$a = b$$
>
>
>
> Thanks,
>
>
>
> Bill
>
>
>
> From: Richard M. Heiberger <rmh at temple.edu>
> Sent: Monday, February 17, 2020 10:31 AM
> To: bill at denney.ws
> Cc: r-package-devel at r-project.org
> Subject: Re: [R-pkg-devel] Private S3 Method not Found
>
>
>
> Please be consistent with the latex() function in the Hmisc package.  For example, for an array x, latex (x) produces a complete latex table environment.  See the ?latex helpfile for details.
>
>
>
> Rich
>
>
>
> On Mon, Feb 17, 2020 at 10:07 <bill at denney.ws> wrote:
>
> Hello,
>
>
>
> I'm working on a function in a package that will provide an exported
> function that will convert formula to LaTeX equations.  For that, it
> recursively goes through the formula converting objects of class "formula",
> "call", "name", and "(" to LaTeX.
>
>
>
> I have a private S3 generic function that I'm using for the conversion, but
> for some reason, the generic is not detected, and checking the package fails
> for that reason
> (https://travis-ci.org/billdenney/bsd.report/jobs/651510333):
>
>
>
> no applicable method for 'knit_print_helper_formula' applied to an object of
> class "name"
>
> Backtrace:
>
>   1. testthat::expect_equal(...)
>
>   4. bsd.report:::knit_print.formula(a ~ b(c))
>
>   6. bsd.report:::knit_print_helper_formula.formula(x, ..., replacements =
> replacements)
>
>   9. bsd.report:::knit_print_helper_formula.call(x[[3]], ...)
>
> 10. bsd.report:::knit_print_helper_formula.function_call(x, ...)
>
> 11. base::sapply(...)
>
> 12. base::lapply(X = X, FUN = FUN, ...)
>
> 13. bsd.report:::FUN(X[[i]], ...)
>
>
>
> But, there is a knit_print_helper_formula.name function call defined
> (https://github.com/billdenney/bsd.report/blob/master/R/knit_print.formula.R
> #L60-L79):
>
>
>
> knit_print_helper_formula <- function(x, ...) {
>
>   UseMethod("knit_print_helper_formula")
>
> }
>
>
>
> # Some other methods
>
>
>
> knit_print_helper_formula.name <- function(x, ...) {
>
> # Function body
>
> }
>
>
>
> Does anyone know why the S3 method for name class objects is not found when
> checking the package?
>
>
>
> Thanks,
>
>
>
> Bill
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Feb 17 20:56:31 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 17 Feb 2020 14:56:31 -0500
Subject: [R-pkg-devel] Catching console messages from libGL
Message-ID: <cd6cb15f-9198-9e92-e92a-355913d34649@gmail.com>

I'm working on the initialization code for rgl, especially for the case 
when it is running remotely and the user is connecting using X11.

On some machines, this fails:  I now understand that's because the local 
machine needs to enable "indirect GLX" (IGLX) for it to succeed, and by 
default most current machines have IGLX disabled.  (It can be a security 
risk to enable it.)

Failure looks like this (with the current CRAN version of rgl 0.100.47, 
and the remote system running Ubuntu, my local system running MacOS):

 > library(rgl)
 > open3d()
libGL error: No matching fbConfigs or visuals found
libGL error: failed to load driver: swrast
X Error of failed request:  GLXBadContext
   Major opcode of failed request:  149 (GLX)
   Minor opcode of failed request:  6 (X_GLXIsDirect)
   Serial number of failed request:  42
   Current serial number in output stream:  41

I end up booted right out of R.  I now know how to fix that, and will 
upload an update to CRAN in due course.

On MacOS I can enable IGLX by running

   defaults write org.macosforge.xquartz.X11 enable_iglx -bool true

and restarting XQuartz.  When I do that, I see this (same setup as before):

 > library(rgl)
 > open3d()
libGL error: No matching fbConfigs or visuals found
libGL error: failed to load driver: swrast
glX
   1

Now I want to suppress those two libGL messages, and I'm having trouble 
figuring out how to do it.  If I redirect stderr when I start R, they 
are redirected:  but if I do it after starting R, they aren't:

 > library(rgl)
 > capture.output(open3d(), type = "message")
libGL error: No matching fbConfigs or visuals found
libGL error: failed to load driver: swrast
glX
   1
character(0)

(capture.output with type = "output" gets c("glX", "1"), but leaves the 
libGL messages printing to the console.  sink() behaves similarly.)

So how do I capture stderr (or, off topic here, how do I get libGL to be 
quiet)?

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Feb 17 22:01:21 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 17 Feb 2020 16:01:21 -0500
Subject: [R-pkg-devel] Catching console messages from libGL
In-Reply-To: <cd6cb15f-9198-9e92-e92a-355913d34649@gmail.com>
References: <cd6cb15f-9198-9e92-e92a-355913d34649@gmail.com>
Message-ID: <f0cdcd24-1d0d-8e0c-e7ca-c833d3cd5e61@gmail.com>

On 17/02/2020 2:56 p.m., Duncan Murdoch wrote:
> I'm working on the initialization code for rgl, especially for the case
> when it is running remotely and the user is connecting using X11.
> 
> On some machines, this fails:  I now understand that's because the local
> machine needs to enable "indirect GLX" (IGLX) for it to succeed, and by
> default most current machines have IGLX disabled.  (It can be a security
> risk to enable it.)
> 
> Failure looks like this (with the current CRAN version of rgl 0.100.47,
> and the remote system running Ubuntu, my local system running MacOS):
> 
>   > library(rgl)
>   > open3d()
> libGL error: No matching fbConfigs or visuals found
> libGL error: failed to load driver: swrast
> X Error of failed request:  GLXBadContext
>     Major opcode of failed request:  149 (GLX)
>     Minor opcode of failed request:  6 (X_GLXIsDirect)
>     Serial number of failed request:  42
>     Current serial number in output stream:  41
> 
> I end up booted right out of R.  I now know how to fix that, and will
> upload an update to CRAN in due course.
> 
> On MacOS I can enable IGLX by running
> 
>     defaults write org.macosforge.xquartz.X11 enable_iglx -bool true
> 
> and restarting XQuartz.  When I do that, I see this (same setup as before):
> 
>   > library(rgl)
>   > open3d()
> libGL error: No matching fbConfigs or visuals found
> libGL error: failed to load driver: swrast
> glX
>     1
> 
> Now I want to suppress those two libGL messages, and I'm having trouble
> figuring out how to do it.  If I redirect stderr when I start R, they
> are redirected:  but if I do it after starting R, they aren't:
> 
>   > library(rgl)
>   > capture.output(open3d(), type = "message")
> libGL error: No matching fbConfigs or visuals found
> libGL error: failed to load driver: swrast
> glX
>     1
> character(0)
> 
> (capture.output with type = "output" gets c("glX", "1"), but leaves the
> libGL messages printing to the console.  sink() behaves similarly.)
> 
> So how do I capture stderr (or, off topic here, how do I get libGL to be
> quiet)?
> 

A little bit of progress.  After reading the Mesa 3d source, I can see 
that setting environment variable

  LIBGL_DEBUG=quiet

will suppress the first message.  Unfortunately, the second message is 
seen as "critical", and it can't be suppressed.

Duncan Murdoch


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Feb 17 22:10:48 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 18 Feb 2020 00:10:48 +0300
Subject: [R-pkg-devel] Catching console messages from libGL
In-Reply-To: <cd6cb15f-9198-9e92-e92a-355913d34649@gmail.com>
References: <cd6cb15f-9198-9e92-e92a-355913d34649@gmail.com>
Message-ID: <20200218001048.4b035455@Tarkus>

On Mon, 17 Feb 2020 14:56:31 -0500
Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> So how do I capture stderr (or, off topic here, how do I get libGL to
> be quiet)?

libGL seems to only offer bad news in this regard: it writes directly
to stderr [1] and does not seem to offer a way to silence the
_LOADER_FATAL messages [2], which "failed to load driver: %s" are.

(You have found that out while I was preparing the message.)

As far as I understand do_sink(), it does not touch the actual stdout
or stderr, only R's wrappers of them. You probably know better than me
how portable would it be to try to reassign stderr (which the standard
says is a macro) to open_memstream() (which is POSIX.1-2008 only).

-- 
Best regards,
Ivan

[1]
https://sources.debian.org/src/mesa/19.3.3-1/src/glx/dri_common.c/#L52

[2]
https://sources.debian.org/src/mesa/19.3.3-1/src/glx/dri_common.h/#L70


From dom|n|c@comto|@ @end|ng |rom gm@||@com  Tue Feb 18 01:28:43 2020
From: dom|n|c@comto|@ @end|ng |rom gm@||@com (Dominic Comtois)
Date: Mon, 17 Feb 2020 19:28:43 -0500
Subject: [R-pkg-devel] CRAN Package Check Results - No protocol specified
 (OS X only)
Message-ID: <CAEfsz7p5UGdGCgeHFbTw+eR8ZdfNiKjegtQTXVzPUO_S57Jpeg@mail.gmail.com>

Hello,

On my package's check results (
https://cran.r-project.org/web/checks/check_results_summarytools.html), I
see a bunch of warnings with "No protocol specified" messages. This happens
only with OS X, and I can't reproduce them when actually building on a Mac,
nor with rhub::check_on_macos(). I can't really make sense out of them, and
they are all over the place. Can they simply be ignored?

Thx

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Feb 18 12:01:27 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 18 Feb 2020 14:01:27 +0300
Subject: [R-pkg-devel] 
 CRAN Package Check Results - No protocol specified (OS X only)
In-Reply-To: <CAEfsz7p5UGdGCgeHFbTw+eR8ZdfNiKjegtQTXVzPUO_S57Jpeg@mail.gmail.com>
References: <CAEfsz7p5UGdGCgeHFbTw+eR8ZdfNiKjegtQTXVzPUO_S57Jpeg@mail.gmail.com>
Message-ID: <20200218140127.34c7b497@trisector>

On Mon, 17 Feb 2020 19:28:43 -0500
Dominic Comtois <dominic.comtois at gmail.com> wrote:

> a bunch of warnings with "No protocol specified" messages

"No protocol specified" is printed by the X11 client library when it
fails to connect to the X server. I think that these indicate a problem
with setup of the macOS testing servers.

-- 
Best regards,
Ivan


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Feb 18 15:51:08 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 18 Feb 2020 09:51:08 -0500
Subject: [R-pkg-devel] Catching console messages from libGL
In-Reply-To: <20200218001048.4b035455@Tarkus>
References: <cd6cb15f-9198-9e92-e92a-355913d34649@gmail.com>
 <20200218001048.4b035455@Tarkus>
Message-ID: <dfb0c765-9a90-a65f-9730-d6718c42087a@gmail.com>

On 17/02/2020 4:10 p.m., Ivan Krylov wrote:
> On Mon, 17 Feb 2020 14:56:31 -0500
> Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
>> So how do I capture stderr (or, off topic here, how do I get libGL to
>> be quiet)?
> 
> libGL seems to only offer bad news in this regard: it writes directly
> to stderr [1] and does not seem to offer a way to silence the
> _LOADER_FATAL messages [2], which "failed to load driver: %s" are.
> 
> (You have found that out while I was preparing the message.)
> 
> As far as I understand do_sink(), it does not touch the actual stdout
> or stderr, only R's wrappers of them. You probably know better than me
> how portable would it be to try to reassign stderr (which the standard
> says is a macro) to open_memstream() (which is POSIX.1-2008 only).
> 

Thanks for that last paragraph.  I've decided to temporarily redirect 
stderr to /dev/null (or nul on Windows) using dup() and dup2() in the 
C++ code.  I'll make this optional; if people want to see those 
messages, there'll be a way to enable them again.  My tests show that 
this does silence libGL.

Duncan Murdoch


From jwood000 @end|ng |rom gm@||@com  Thu Feb 20 03:59:44 2020
From: jwood000 @end|ng |rom gm@||@com (Joseph Wood)
Date: Wed, 19 Feb 2020 21:59:44 -0500
Subject: [R-pkg-devel] How to specify minimum compiler version in DESCRIPTION
Message-ID: <CAKDcrSjOTh=Xr3y6aKsUazWjOeS7KPzZgG2Vx7LRWeE4z8WWOw@mail.gmail.com>

Hello,

As the subject says, what is the best way to specify a minimum
compiler version in the DESCRIPTION file.

I only found 2 packages on CRAN that have a minimum requirement for
GCC, however they both seem to be divergent in style. I could not find
anything definitive in Writing R Extensions.

I don't want to imply that one absolutely needs a specific compiler
(i.e. if you are using Mac clang is used so I wouldn't expect Mac user
to jump through a bunch of hoops to use a specific gcc compiler), I
just want to give users of differing systems something informative to
help them out.

There is more information here: https://github.com/jwood000/RcppAlgos/issues/13

Thanks,
Joseph Wood


From edd @end|ng |rom deb|@n@org  Thu Feb 20 04:21:00 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 19 Feb 2020 21:21:00 -0600
Subject: [R-pkg-devel] How to specify minimum compiler version in
 DESCRIPTION
In-Reply-To: <CAKDcrSjOTh=Xr3y6aKsUazWjOeS7KPzZgG2Vx7LRWeE4z8WWOw@mail.gmail.com>
References: <CAKDcrSjOTh=Xr3y6aKsUazWjOeS7KPzZgG2Vx7LRWeE4z8WWOw@mail.gmail.com>
Message-ID: <24141.64284.179537.624812@rob.eddelbuettel.com>


Hi Joseph,

On 19 February 2020 at 21:59, Joseph Wood wrote:
| As the subject says, what is the best way to specify a minimum
| compiler version in the DESCRIPTION file.

In short: you can't. Read on.
 
| I only found 2 packages on CRAN that have a minimum requirement for
| GCC, however they both seem to be divergent in style. I could not find
| anything definitive in Writing R Extensions.
| 
| I don't want to imply that one absolutely needs a specific compiler
| (i.e. if you are using Mac clang is used so I wouldn't expect Mac user
| to jump through a bunch of hoops to use a specific gcc compiler), I
| just want to give users of differing systems something informative to
| help them out.
| 
| There is more information here: https://github.com/jwood000/RcppAlgos/issues/13

I have a super-old snippet in RQuantLib's configure.ac:

AC_PROG_CXX
if test "${GXX}" = yes; then
    gxx_version=`${CXX} -v 2>&1 | grep "^.*g.. version" | \\
		       sed -e 's/^.*g.. version *//'`
    case ${gxx_version} in
        1.*|2.*)
	     AC_MSG_WARN([Only g++ version 3.0 or greater can be used with RQuantib.])
	     AC_MSG_ERROR([Please use a different compiler.])
        ;;
	4.6.*|4.7.*|4.8.*|4.9.*|5.*|6.*|7.*|8.*|9.*|10.*)
	     gxx_newer_than_45="-fpermissive"
	;;
    esac
fi

That is from years past when we worried about g++-3 :) but still sets
the -fpermissve option where possible.

I am also doing something similar in RcppArmadillo:

## Check the C++ compiler using the CXX value set
AC_PROG_CXX
## If it is g++, we have GXX set so let's examine it
if test "${GXX}" = yes; then
    AC_MSG_CHECKING([whether g++ version is sufficient])
    gxx_version=$(${CXX} -v 2>&1 | awk '/^.*g.. version/ {print $3}')
    case ${gxx_version} in
        1.*|2.*|3.*|4.0.*|4.1.*|4.2.*|4.3.*|4.4.*|4.5.*|4.6.*|4.7.0|4.7.1)
             AC_MSG_RESULT([no])
             AC_MSG_WARN([Only g++ version 4.7.2 or greater can be used with RcppArmadillo.])
             AC_MSG_ERROR([Please use a different compiler.])
        ;;
        4.7.*|4.8.*|4.9.*|5.0*|5.1*|5.2*|5.3*)
             AC_MSG_RESULT([yes, but without OpenMP as version ${gxx_version} (Armadillo constraint)])
             ## we know this one is bad
             can_use_openmp="no"
        ;;
        5.4*|5.5*|5.6*|5.7*|5.8*|5.9*|6.*|7.*|8.*|9.*|10.*|11.*|12.*)
             AC_MSG_RESULT([yes, with OpenMP as version ${gxx_version}])
             ## we know this one is good, yay
             can_use_openmp="yes"
        ;;
        *)
             AC_MSG_RESULT([almost])
             AC_MSG_WARN([Compiler self-identifies as being compliant with GNUC extensions but is not g++.])
             ## we know nothing, so no
             can_use_openmp="no"
        ;;
    esac
fi

I now need something similar myself -- but I think the better test is NOT to
test for minimum g++ or clang++ versions ... but to check the C++ standard
directly.

If you need a minium C++ version (as I do in a package to be updated), see
this answer SO:

https://stackoverflow.com/questions/2324658/how-to-determine-the-version-of-the-c-standard-used-by-the-compiler/7132549#7132549

and to test for __cplusplus.

Hth,  Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From zh@ngwm @end|ng |rom hotm@||@com  Wed Feb 19 18:48:38 2020
From: zh@ngwm @end|ng |rom hotm@||@com (Weimin Zhang)
Date: Wed, 19 Feb 2020 17:48:38 +0000
Subject: [R-pkg-devel] no visible binding for '<<-' assignment note
Message-ID: <BL0PR06MB504338655F6FFDBF52CE325FAF100@BL0PR06MB5043.namprd06.prod.outlook.com>

Dear all,
In the last submission of my package the CRAN gave this note: "Check: R code for possible problems, Result: NOTE: no visible binding for '<<-' assignment..."

How can I bypass this note?

This is the local function which cause this note:
  dnormfun <<- function(muvalue, sigmavalue, aNumber = gridY[i] ){
    force(aNumber)?
    ansvalue=dnorm(aNumber,muvalue,sqrt(sigmavalue))?
    return(ansvalue)?
  }?

The package can run normally at my machine. Any suggestion?

Thanks,

Weimin




	[[alternative HTML version deleted]]


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Thu Feb 20 16:50:17 2020
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Thu, 20 Feb 2020 15:50:17 +0000
Subject: [R-pkg-devel] no visible binding for '<<-' assignment note
In-Reply-To: <BL0PR06MB504338655F6FFDBF52CE325FAF100@BL0PR06MB5043.namprd06.prod.outlook.com>
References: <BL0PR06MB504338655F6FFDBF52CE325FAF100@BL0PR06MB5043.namprd06.prod.outlook.com>
Message-ID: <56a92069ba6f47e5a36d6688113f7362@umanitoba.ca>

Hi Weimin,


From the R docs, if there is no visible binding for the deep assignment, meaning there is the variable "dnormfun" not already defined in the parent environment, then an assignment is made in the global assignment. Is this really what you want to do, define a function "dnormfun" that is available in the user's global environment? If yes, then you'll need to make a case for it in your CRAN submision comments. If no, then you can probably just change "<<-" to "<-".


Best,


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Weimin Zhang <zhangwm at hotmail.com>
Sent: February 19, 2020 11:48:38 AM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] no visible binding for '<<-' assignment note

Dear all,
In the last submission of my package the CRAN gave this note: "Check: R code for possible problems, Result: NOTE: no visible binding for '<<-' assignment..."

How can I bypass this note?

This is the local function which cause this note:
  dnormfun <<- function(muvalue, sigmavalue, aNumber = gridY[i] ){
    force(aNumber)?
    ansvalue=dnorm(aNumber,muvalue,sqrt(sigmavalue))?
    return(ansvalue)?
  }?

The package can run normally at my machine. Any suggestion?

Thanks,

Weimin




        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From jeroen @end|ng |rom berke|ey@edu  Thu Feb 20 20:34:14 2020
From: jeroen @end|ng |rom berke|ey@edu (Jeroen Ooms)
Date: Thu, 20 Feb 2020 20:34:14 +0100
Subject: [R-pkg-devel] 
 CRAN Package Check Results - No protocol specified (OS X only)
In-Reply-To: <CAEfsz7p5UGdGCgeHFbTw+eR8ZdfNiKjegtQTXVzPUO_S57Jpeg@mail.gmail.com>
References: <CAEfsz7p5UGdGCgeHFbTw+eR8ZdfNiKjegtQTXVzPUO_S57Jpeg@mail.gmail.com>
Message-ID: <CABFfbXt=HPcfoXL8cWmOoOunC33zcUkw5p-zD+Bv3Wjh-RuzOg@mail.gmail.com>

On Tue, Feb 18, 2020 at 1:29 AM Dominic Comtois
<dominic.comtois at gmail.com> wrote:
>
> Hello,
>
> On my package's check results (
> https://cran.r-project.org/web/checks/check_results_summarytools.html), I
> see a bunch of warnings with "No protocol specified" messages. This happens
> only with OS X, and I can't reproduce them when actually building on a Mac,
> nor with rhub::check_on_macos(). I can't really make sense out of them, and
> they are all over the place. Can they simply be ignored?

This happens when your package calls capabilities(), which as a side
effect initiates xquartz. It seems the MacOS server has certain
permission restrictions that cause X11 to print this warning.

I think you can safely ignore it.


From g|@nm@rco@|bert| @end|ng |rom gm@||@com  Fri Feb 21 14:04:24 2020
From: g|@nm@rco@|bert| @end|ng |rom gm@||@com (Gianmarco Alberti)
Date: Fri, 21 Feb 2020 14:04:24 +0100
Subject: [R-pkg-devel] Error in curl: Failed FTP upload: 550
In-Reply-To: <7e06093d-d9b6-4e0e-850a-893fd90113c0@Spark>
References: <7e06093d-d9b6-4e0e-850a-893fd90113c0@Spark>
Message-ID: <91c3f562-df8a-4959-9216-380053898e09@Spark>

Hello,
I am preparing an update for my ?GmAMisc? package.

Before submitting to CRAN, I checked it on a MACOS-based machine via devtools::check() and I got 0 errors, 0 warnings, and 0 notes.

I have also used:
check_win_devel() and check_win_release() out of devtools, but I keep getting the following message:
Error in curl::curl_fetch_memory(url, handle = h) :
 Failed FTP upload: 550

I can?t wrap my head round the issue.
Any idea?

Best regards

************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA course in Criminology
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080
tel +356 2340 3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4
https://malta.academia.edu/GianmarcoAlberti

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en

Correspondence Analysis website
http://cainarchaeology.weebly.com/

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html

GmAMisc
https://cran.r-project.org/package=GmAMisc

movecost
https://cran.r-project.org/web/packages/movecost/index.html
************************************************

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Feb 21 14:30:03 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 21 Feb 2020 16:30:03 +0300
Subject: [R-pkg-devel] Error in curl: Failed FTP upload: 550
In-Reply-To: <91c3f562-df8a-4959-9216-380053898e09@Spark>
References: <7e06093d-d9b6-4e0e-850a-893fd90113c0@Spark>
 <91c3f562-df8a-4959-9216-380053898e09@Spark>
Message-ID: <20200221163003.5e344f79@trisector>

On Fri, 21 Feb 2020 14:04:24 +0100
Gianmarco Alberti <gianmarcoalberti at gmail.com> wrote:

> I have also used:
> check_win_devel() and check_win_release() out of devtools, but I keep
> getting the following message:
> Error in curl::curl_fetch_memory(url, handle = h) :
>  Failed FTP upload: 550

Does it work if you build the package manually (i.e. issue the command
R CMD build . in package directory), then upload the resulting file
using cURL or any other FTP client?

curl -T yourfile.tar.gz ftp://win-builder.r-project.org/R-devel/

You can also try the alternative upload page at
https://win-builder.r-project.org/upload.aspx

If manual FTP uploading works while devtools::check_win_devel()
doesn't, some debugging may be required. For example, try

trace(devtools:::upload_ftp, quote({str(file); str(url)}))

before running check_win_devel() or check_win_release() to see which
arguments does devtools:::check_win call upload_ftp with.

-- 
Best regards,
Ivan


From g|@nm@rco@|bert| @end|ng |rom gm@||@com  Fri Feb 21 16:55:35 2020
From: g|@nm@rco@|bert| @end|ng |rom gm@||@com (Gianmarco Alberti)
Date: Fri, 21 Feb 2020 16:55:35 +0100
Subject: [R-pkg-devel] Error in curl: Failed FTP upload: 550
In-Reply-To: <20200221163003.5e344f79@trisector>
References: <7e06093d-d9b6-4e0e-850a-893fd90113c0@Spark>
 <91c3f562-df8a-4959-9216-380053898e09@Spark>
 <20200221163003.5e344f79@trisector>
Message-ID: <5f81c841-8ffa-47e5-bebd-6538e0b3365a@Spark>

Hello,
Thanks for your reply.

I build the package manually, and then uploaded it here:
https://win-builder.r-project.org/upload.aspx

I got the following:
Access to the path 'C:\Inetpub\ftproot\R-release\GmAMisc_1.1.0.tar.gz' is denied.

in both cases: R-devel and R-release.

I don?t have any clue?.

Best regards


************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA course in Criminology
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080
tel +356 2340 3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4
https://malta.academia.edu/GianmarcoAlberti

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en

Correspondence Analysis website
http://cainarchaeology.weebly.com/

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html

GmAMisc
https://cran.r-project.org/package=GmAMisc

movecost
https://cran.r-project.org/web/packages/movecost/index.html
************************************************
On 21 Feb 2020, 14:30 +0100, Ivan Krylov <krylov.r00t at gmail.com>, wrote:
> On Fri, 21 Feb 2020 14:04:24 +0100
> Gianmarco Alberti <gianmarcoalberti at gmail.com> wrote:
>
> > I have also used:
> > check_win_devel() and check_win_release() out of devtools, but I keep
> > getting the following message:
> > Error in curl::curl_fetch_memory(url, handle = h) :
> > Failed FTP upload: 550
>
> Does it work if you build the package manually (i.e. issue the command
> R CMD build . in package directory), then upload the resulting file
> using cURL or any other FTP client?
>
> curl -T yourfile.tar.gz ftp://win-builder.r-project.org/R-devel/
>
> You can also try the alternative upload page at
> https://win-builder.r-project.org/upload.aspx
>
> If manual FTP uploading works while devtools::check_win_devel()
> doesn't, some debugging may be required. For example, try
>
> trace(devtools:::upload_ftp, quote({str(file); str(url)}))
>
> before running check_win_devel() or check_win_release() to see which
> arguments does devtools:::check_win call upload_ftp with.
>
> --
> Best regards,
> Ivan

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Feb 21 17:55:15 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 21 Feb 2020 19:55:15 +0300
Subject: [R-pkg-devel] Error in curl: Failed FTP upload: 550
In-Reply-To: <5f81c841-8ffa-47e5-bebd-6538e0b3365a@Spark>
References: <7e06093d-d9b6-4e0e-850a-893fd90113c0@Spark>
 <91c3f562-df8a-4959-9216-380053898e09@Spark>
 <20200221163003.5e344f79@trisector>
 <5f81c841-8ffa-47e5-bebd-6538e0b3365a@Spark>
Message-ID: <20200221195515.4f0aa08b@trisector>

On Fri, 21 Feb 2020 16:55:35 +0100
Gianmarco Alberti <gianmarcoalberti at gmail.com> wrote:

> Access to the path
> 'C:\Inetpub\ftproot\R-release\GmAMisc_1.1.0.tar.gz' is denied.

Right, I should have noticed it sooner. There already is
GmAMisc_1.1.0.tar.gz, uploaded yesterday (and a lot of other files, the
oldest having been uploaded on 20.02.2020 15:00:00 UTC, before yours).
Could be a temporary problem on win-builder.

-- 
Best regards,
Ivan


From g|@nm@rco@|bert| @end|ng |rom gm@||@com  Fri Feb 21 18:01:36 2020
From: g|@nm@rco@|bert| @end|ng |rom gm@||@com (Gianmarco Alberti)
Date: Fri, 21 Feb 2020 18:01:36 +0100
Subject: [R-pkg-devel] Error in curl: Failed FTP upload: 550
In-Reply-To: <20200221195515.4f0aa08b@trisector>
References: <7e06093d-d9b6-4e0e-850a-893fd90113c0@Spark>
 <91c3f562-df8a-4959-9216-380053898e09@Spark>
 <20200221163003.5e344f79@trisector>
 <5f81c841-8ffa-47e5-bebd-6538e0b3365a@Spark>
 <20200221195515.4f0aa08b@trisector>
Message-ID: <d275894a-0639-4e3f-acb4-25ebfa10e9b4@Spark>

Thank you.
So, it?s better to wait for few days?

Best
Gm

************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA course in Criminology
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080
tel +356 2340 3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4
https://malta.academia.edu/GianmarcoAlberti

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en

Correspondence Analysis website
http://cainarchaeology.weebly.com/

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html

GmAMisc
https://cran.r-project.org/package=GmAMisc

movecost
https://cran.r-project.org/web/packages/movecost/index.html
************************************************
On 21 Feb 2020, 17:55 +0100, Ivan Krylov <krylov.r00t at gmail.com>, wrote:
> On Fri, 21 Feb 2020 16:55:35 +0100
> Gianmarco Alberti <gianmarcoalberti at gmail.com> wrote:
>
> > Access to the path
> > 'C:\Inetpub\ftproot\R-release\GmAMisc_1.1.0.tar.gz' is denied.
>
> Right, I should have noticed it sooner. There already is
> GmAMisc_1.1.0.tar.gz, uploaded yesterday (and a lot of other files, the
> oldest having been uploaded on 20.02.2020 15:00:00 UTC, before yours).
> Could be a temporary problem on win-builder.
>
> --
> Best regards,
> Ivan

	[[alternative HTML version deleted]]


From zh@ngwm @end|ng |rom hotm@||@com  Fri Feb 21 19:38:30 2020
From: zh@ngwm @end|ng |rom hotm@||@com (Weimin Zhang)
Date: Fri, 21 Feb 2020 18:38:30 +0000
Subject: [R-pkg-devel] no visible binding for '<<-' assignment note
In-Reply-To: <56a92069ba6f47e5a36d6688113f7362@umanitoba.ca>
References: <BL0PR06MB504338655F6FFDBF52CE325FAF100@BL0PR06MB5043.namprd06.prod.outlook.com>,
 <56a92069ba6f47e5a36d6688113f7362@umanitoba.ca>
Message-ID: <BL0PR06MB5043F705A4E7ABBF91A6790AAF120@BL0PR06MB5043.namprd06.prod.outlook.com>

Thank you Max.

The reason I used the super assignment  "<<-"  is because the "dnormfun" function later called by function kronecker(X, Y, FUN = "*",...) through FUN=" ". If I don't use the super assignment  "<<-"  then the kronecker function cannot find "dnormfun" function. The question now seems that how I can let the kronecker(X, Y, FUN = "*",...) know that "dnormfun" is a "FUN"?

Thanks,
Weimin


________________________________
From: Max Turgeon <Max.Turgeon at umanitoba.ca>
Sent: Thursday, February 20, 2020 10:50 AM
To: Weimin Zhang <zhangwm at hotmail.com>; r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: no visible binding for '<<-' assignment note


Hi Weimin,


From the R docs, if there is no visible binding for the deep assignment, meaning there is the variable "dnormfun" not already defined in the parent environment, then an assignment is made in the global assignment. Is this really what you want to do, define a function "dnormfun" that is available in the user's global environment? If yes, then you'll need to make a case for it in your CRAN submision comments. If no, then you can probably just change "<<-" to "<-".


Best,


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Weimin Zhang <zhangwm at hotmail.com>
Sent: February 19, 2020 11:48:38 AM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] no visible binding for '<<-' assignment note

Dear all,
In the last submission of my package the CRAN gave this note: "Check: R code for possible problems, Result: NOTE: no visible binding for '<<-' assignment..."

How can I bypass this note?

This is the local function which cause this note:
  dnormfun <<- function(muvalue, sigmavalue, aNumber = gridY[i] ){
    force(aNumber)?
    ansvalue=dnorm(aNumber,muvalue,sqrt(sigmavalue))?
    return(ansvalue)?
  }?

The package can run normally at my machine. Any suggestion?

Thanks,

Weimin




        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Fri Feb 21 19:43:15 2020
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Fri, 21 Feb 2020 13:43:15 -0500
Subject: [R-pkg-devel] no visible binding for '<<-' assignment note
In-Reply-To: <BL0PR06MB5043F705A4E7ABBF91A6790AAF120@BL0PR06MB5043.namprd06.prod.outlook.com>
References: <BL0PR06MB504338655F6FFDBF52CE325FAF100@BL0PR06MB5043.namprd06.prod.outlook.com>
 <56a92069ba6f47e5a36d6688113f7362@umanitoba.ca>
 <BL0PR06MB5043F705A4E7ABBF91A6790AAF120@BL0PR06MB5043.namprd06.prod.outlook.com>
Message-ID: <CAGx1TMDYyk3pmy9--Eaww1DUio_JMt9PpVowcTZUgmM7yfB5yA@mail.gmail.com>

I would guess that your NAMESPACE file doesn't export dnormfun.

On Fri, Feb 21, 2020 at 1:38 PM Weimin Zhang <zhangwm at hotmail.com> wrote:
>
> Thank you Max.
>
> The reason I used the super assignment  "<<-"  is because the "dnormfun" function later called by function kronecker(X, Y, FUN = "*",...) through FUN=" ". If I don't use the super assignment  "<<-"  then the kronecker function cannot find "dnormfun" function. The question now seems that how I can let the kronecker(X, Y, FUN = "*",...) know that "dnormfun" is a "FUN"?
>
> Thanks,
> Weimin
>
>
> ________________________________
> From: Max Turgeon <Max.Turgeon at umanitoba.ca>
> Sent: Thursday, February 20, 2020 10:50 AM
> To: Weimin Zhang <zhangwm at hotmail.com>; r-package-devel at r-project.org <r-package-devel at r-project.org>
> Subject: Re: no visible binding for '<<-' assignment note
>
>
> Hi Weimin,
>
>
> From the R docs, if there is no visible binding for the deep assignment, meaning there is the variable "dnormfun" not already defined in the parent environment, then an assignment is made in the global assignment. Is this really what you want to do, define a function "dnormfun" that is available in the user's global environment? If yes, then you'll need to make a case for it in your CRAN submision comments. If no, then you can probably just change "<<-" to "<-".
>
>
> Best,
>
>
> Max Turgeon
> Assistant Professor
> Department of Statistics
> Department of Computer Science
> University of Manitoba
> maxturgeon.ca<http://maxturgeon.ca>
>
>
> ________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Weimin Zhang <zhangwm at hotmail.com>
> Sent: February 19, 2020 11:48:38 AM
> To: r-package-devel at r-project.org
> Subject: [R-pkg-devel] no visible binding for '<<-' assignment note
>
> Dear all,
> In the last submission of my package the CRAN gave this note: "Check: R code for possible problems, Result: NOTE: no visible binding for '<<-' assignment..."
>
> How can I bypass this note?
>
> This is the local function which cause this note:
>   dnormfun <<- function(muvalue, sigmavalue, aNumber = gridY[i] ){
>     force(aNumber)
>     ansvalue=dnorm(aNumber,muvalue,sqrt(sigmavalue))
>     return(ansvalue)
>   }
>
> The package can run normally at my machine. Any suggestion?
>
> Thanks,
>
> Weimin
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Fri Feb 21 19:56:09 2020
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Fri, 21 Feb 2020 18:56:09 +0000
Subject: [R-pkg-devel] no visible binding for '<<-' assignment note
In-Reply-To: <BL0PR06MB5043F705A4E7ABBF91A6790AAF120@BL0PR06MB5043.namprd06.prod.outlook.com>
References: <BL0PR06MB504338655F6FFDBF52CE325FAF100@BL0PR06MB5043.namprd06.prod.outlook.com>,
 <56a92069ba6f47e5a36d6688113f7362@umanitoba.ca>,
 <BL0PR06MB5043F705A4E7ABBF91A6790AAF120@BL0PR06MB5043.namprd06.prod.outlook.com>
Message-ID: <3a5ea8931fd248119c83c507f5deaff8@umanitoba.ca>

The only thing I know about your package is the code you've shared so far, so I may be wrong. If I understand correctly, you're using kronecker and dnormfun to evalute the normal density at several values of mu and sigma, but a fixed point x. And you're fixing that point x in dnormfun, with the possibility of redefining dnormfun if you need a new point x. If that is the case, I think you can simply do something like


kronecker(X, Y, FUN = dnorm, x = gridY[i]).


But again, maybe I'm missing something.


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>



________________________________
From: Weimin Zhang <zhangwm at hotmail.com>
Sent: February 21, 2020 12:38 PM
To: Max Turgeon; r-package-devel at r-project.org
Subject: Re: no visible binding for '<<-' assignment note

Thank you Max.

The reason I used the super assignment  "<<-"  is because the "dnormfun" function later called by function kronecker(X, Y, FUN = "*",...) through FUN=" ". If I don't use the super assignment  "<<-"  then the kronecker function cannot find "dnormfun" function. The question now seems that how I can let the kronecker(X, Y, FUN = "*",...) know that "dnormfun" is a "FUN"?

Thanks,
Weimin


________________________________
From: Max Turgeon <Max.Turgeon at umanitoba.ca>
Sent: Thursday, February 20, 2020 10:50 AM
To: Weimin Zhang <zhangwm at hotmail.com>; r-package-devel at r-project.org <r-package-devel at r-project.org>
Subject: Re: no visible binding for '<<-' assignment note


Hi Weimin,


>From the R docs, if there is no visible binding for the deep assignment, meaning there is the variable "dnormfun" not already defined in the parent environment, then an assignment is made in the global assignment. Is this really what you want to do, define a function "dnormfun" that is available in the user's global environment? If yes, then you'll need to make a case for it in your CRAN submision comments. If no, then you can probably just change "<<-" to "<-".


Best,


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Weimin Zhang <zhangwm at hotmail.com>
Sent: February 19, 2020 11:48:38 AM
To: r-package-devel at r-project.org
Subject: [R-pkg-devel] no visible binding for '<<-' assignment note

Dear all,
In the last submission of my package the CRAN gave this note: "Check: R code for possible problems, Result: NOTE: no visible binding for '<<-' assignment..."

How can I bypass this note?

This is the local function which cause this note:
  dnormfun <<- function(muvalue, sigmavalue, aNumber = gridY[i] ){
    force(aNumber)
    ansvalue=dnorm(aNumber,muvalue,sqrt(sigmavalue))
    return(ansvalue)
  }

The package can run normally at my machine. Any suggestion?

Thanks,

Weimin




        [[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Feb 21 20:19:54 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 21 Feb 2020 20:19:54 +0100
Subject: [R-pkg-devel] Error in curl: Failed FTP upload: 550
In-Reply-To: <d275894a-0639-4e3f-acb4-25ebfa10e9b4@Spark>
References: <7e06093d-d9b6-4e0e-850a-893fd90113c0@Spark>
 <91c3f562-df8a-4959-9216-380053898e09@Spark>
 <20200221163003.5e344f79@trisector>
 <5f81c841-8ffa-47e5-bebd-6538e0b3365a@Spark>
 <20200221195515.4f0aa08b@trisector>
 <d275894a-0639-4e3f-acb4-25ebfa10e9b4@Spark>
Message-ID: <2db940c8-5d27-5ea0-8caf-31f90227f8af@statistik.tu-dortmund.de>

Yes, queue is stuck, will be cleared up by tomorrow,
Uwe Ligges

On 21.02.2020 18:01, Gianmarco Alberti wrote:
> Thank you.
> So, it?s better to wait for few days?
> 
> Best
> Gm
> 
> ************************************************
> Dr Gianmarco Alberti (PhD Udine)
> Lecturer in Spatial Forensics
> Coordinator of the BA course in Criminology
> Department of Criminology
> Faculty for Social Wellbeing
> Room 332, Humanities B (FEMA)
> University of Malta, Msida, Malta (Europe) - MSD 2080
> tel +356 2340 3718
> 
> Academic profiles
> https://www.researchgate.net/profile/Gianmarco_Alberti4
> https://malta.academia.edu/GianmarcoAlberti
> 
> Google Scholar profile
> https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
> 
> Correspondence Analysis website
> http://cainarchaeology.weebly.com/
> 
> R packages on CRAN:
> CAinterprTools
> https://cran.r-project.org/web/packages/CAinterprTools/index.html
> 
> GmAMisc
> https://cran.r-project.org/package=GmAMisc
> 
> movecost
> https://cran.r-project.org/web/packages/movecost/index.html
> ************************************************
> On 21 Feb 2020, 17:55 +0100, Ivan Krylov <krylov.r00t at gmail.com>, wrote:
>> On Fri, 21 Feb 2020 16:55:35 +0100
>> Gianmarco Alberti <gianmarcoalberti at gmail.com> wrote:
>>
>>> Access to the path
>>> 'C:\Inetpub\ftproot\R-release\GmAMisc_1.1.0.tar.gz' is denied.
>>
>> Right, I should have noticed it sooner. There already is
>> GmAMisc_1.1.0.tar.gz, uploaded yesterday (and a lot of other files, the
>> oldest having been uploaded on 20.02.2020 15:00:00 UTC, before yours).
>> Could be a temporary problem on win-builder.
>>
>> --
>> Best regards,
>> Ivan
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From @@moed|ng @end|ng |rom gm@||@com  Sat Feb 22 08:39:50 2020
From: @@moed|ng @end|ng |rom gm@||@com (=?utf-8?Q?Stefan_M=C3=B6ding?=)
Date: Sat, 22 Feb 2020 08:39:50 +0100
Subject: [R-pkg-devel] CRAN checks failing for ATLAS
Message-ID: <m28skvvznd.fsf@spider.moeding.net>

Hi,

I was notified by the CRAN maintainers that checks for my package are
failing:

https://cran.r-project.org/web/checks/check_results_usl.html

I don?t understand what?s going on here. All regular checks show the OK
status. Only the linked ATLAS check fails. What is so special about this
check?

The check seems to be running on x86_64-pc-linux-gnu (64-bit) and use
the R development version (2020-02-20 r77833). The regular check
"r-devel-linux-x86_64-debian-gcc" runs on the same platform and a later
version but doesn?t fail.

Any hints what is causing the failures?

Regards,
Stefan


From |uc@r @end|ng |rom |edor@project@org  Sat Feb 22 14:41:44 2020
From: |uc@r @end|ng |rom |edor@project@org (=?UTF-8?Q?I=C3=B1aki_Ucar?=)
Date: Sat, 22 Feb 2020 14:41:44 +0100
Subject: [R-pkg-devel] CRAN checks failing for ATLAS
In-Reply-To: <m28skvvznd.fsf@spider.moeding.net>
References: <m28skvvznd.fsf@spider.moeding.net>
Message-ID: <CALEXWq2t_LaqoTsgpXh9JLAewgJvPgOfuLkttOd4qbeji-n2vA@mail.gmail.com>

El s?b., 22 feb. 2020 14:26, Stefan M?ding <s.moeding at gmail.com> escribi?:

> Hi,
>
> I was notified by the CRAN maintainers that checks for my package are
> failing:
>
> https://cran.r-project.org/web/checks/check_results_usl.html
>
> I don?t understand what?s going on here. All regular checks show the OK
> status. Only the linked ATLAS check fails. What is so special about this
> check?
>

It's the same check, but using ATLAS as the algebra back-end instead of
BLAS.


> The check seems to be running on x86_64-pc-linux-gnu (64-bit) and use
> the R development version (2020-02-20 r77833). The regular check
> "r-devel-linux-x86_64-debian-gcc" runs on the same platform and a later
> version but doesn?t fail.
>
> Any hints what is causing the failures?
>

It seems that you are checking exact output values in your tests, and
changing the library changes the computed coefficients. This is generally a
bad idea, precisely as this issue demonstrates. Checking ranges or numbers
with some tolerance is much better, but then you cannot rely on .Rout.

I?aki


> Regards,
> Stefan
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @@moed|ng @end|ng |rom gm@||@com  Sat Feb 22 19:11:23 2020
From: @@moed|ng @end|ng |rom gm@||@com (=?utf-8?Q?Stefan_M=C3=B6ding?=)
Date: Sat, 22 Feb 2020 19:11:23 +0100
Subject: [R-pkg-devel] CRAN checks failing for ATLAS
In-Reply-To: <CALEXWq2t_LaqoTsgpXh9JLAewgJvPgOfuLkttOd4qbeji-n2vA@mail.gmail.com>
 (=?utf-8?Q?=22I=C3=B1aki?= Ucar"'s message of "Sat, 22 Feb 2020 14:41:44
 +0100")
References: <m28skvvznd.fsf@spider.moeding.net>
 <CALEXWq2t_LaqoTsgpXh9JLAewgJvPgOfuLkttOd4qbeji-n2vA@mail.gmail.com>
Message-ID: <m21rqmwkz8.fsf@spider.moeding.net>

Hi!

I?aki Ucar <iucar at fedoraproject.org> writes:

> It's the same check, but using ATLAS as the algebra back-end instead of
> BLAS.

I wasn?t aware of these differences. I just found the paragraph in the R
Installation and Administration guide that talks about the accuracy of
different implementations causing different solutions.

I think in my case the data used for the test might be the real culprit
because it is a kind of a corner case. Some implementation detail seems
to cause a significant difference in the result (6% off for one
coefficient). Other tests using different data sets do not fail, so I
will look into this.


> It seems that you are checking exact output values in your tests, and
> changing the library changes the computed coefficients. This is generally a
> bad idea, precisely as this issue demonstrates. Checking ranges or numbers
> with some tolerance is much better, but then you cannot rely on .Rout.

I already reduced the number of digits to print because I had this issue
before. I think the computed coefficients changed from one R release to
the next in the past some time ago...

Maybe I should switch to something like

stopif(all.equal(...)

instead.

Thanks again!

Regards,
Stefan


From h@w|ckh@m @end|ng |rom gm@||@com  Sat Feb 22 21:41:20 2020
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Sat, 22 Feb 2020 14:41:20 -0600
Subject: [R-pkg-devel] win-builder down?
Message-ID: <CABdHhvEqVcJ9CybpzvT3uk0iiqcO6Pfam54zGEZpAn0Q4o5z+Q@mail.gmail.com>

Hi all,

Is win-builder down? I submitted a couple of packages >24 hours ago,
and haven't heard back.

Hadley

-- 
http://hadley.nz


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Sat Feb 22 22:46:31 2020
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Sat, 22 Feb 2020 21:46:31 +0000
Subject: [R-pkg-devel] win-builder down?
In-Reply-To: <CABdHhvEqVcJ9CybpzvT3uk0iiqcO6Pfam54zGEZpAn0Q4o5z+Q@mail.gmail.com>
References: <CABdHhvEqVcJ9CybpzvT3uk0iiqcO6Pfam54zGEZpAn0Q4o5z+Q@mail.gmail.com>
Message-ID: <e65a05e79ba04710aec2d1d97376b924@umanitoba.ca>

Hi Hadley,


It would seem so, or at least it's backed up significantly: https://stat.ethz.ch/pipermail/r-package-devel/2020q1/005078.html


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Hadley Wickham <h.wickham at gmail.com>
Sent: February 22, 2020 2:41:20 PM
To: R Package Development
Subject: [R-pkg-devel] win-builder down?

Hi all,

Is win-builder down? I submitted a couple of packages >24 hours ago,
and haven't heard back.

Hadley

--
http://hadley.nz

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From d@n|e|d@@joberg @end|ng |rom gm@||@com  Sun Feb 23 14:45:06 2020
From: d@n|e|d@@joberg @end|ng |rom gm@||@com (Daniel Sjoberg)
Date: Sun, 23 Feb 2020 08:45:06 -0500
Subject: [R-pkg-devel] CRAN repo mirror down? http://cran.us.r-project.org
Message-ID: <CAG5xu57R9wMYo23dL+Az-BWwLE-NcoXnNApEPQDff2uxakxgvw@mail.gmail.com>

Hi All,

I have a few continuous integration sites set up (e.g. Travis CI) to check
packages I've written. To install packages I've used `install.packages(...,
repo = "http://cran.us.r-project.org").  All the CI checks began failing
last week because the site  http://cran.us.r-project.org is no longer
available.  It's been down for almost a week.  Has the site been retired?
Do I need to update the CI code for all my packages, or can I wait it out
until it is back online?

Thank you!
Daniel

	[[alternative HTML version deleted]]


From he|mut@@chuetz @end|ng |rom beb@c@@t  Sun Feb 23 14:53:07 2020
From: he|mut@@chuetz @end|ng |rom beb@c@@t (=?UTF-8?Q?Helmut_Sch=c3=bctz?=)
Date: Sun, 23 Feb 2020 14:53:07 +0100
Subject: [R-pkg-devel] 
 CRAN repo mirror down? http://cran.us.r-project.org
In-Reply-To: <CAG5xu57R9wMYo23dL+Az-BWwLE-NcoXnNApEPQDff2uxakxgvw@mail.gmail.com>
References: <CAG5xu57R9wMYo23dL+Az-BWwLE-NcoXnNApEPQDff2uxakxgvw@mail.gmail.com>
Message-ID: <d941db93-6863-38fc-06f2-13d70ea63f8c@bebac.at>

Hi Daniel,

I use install.packages(..., repos = "https://cloud.r-project.org/")
which hopefully find the closest working mirror.
BTW, it?s "repos" not "repo". ;-)

Daniel Sjoberg wrote on 2020-02-23 14:45:
> To install packages I've used `install.packages(...,
> repo = "http://cran.us.r-project.org").  All the CI checks began failing
> last week because the site  http://cran.us.r-project.org is no longer
> available.

Cheers,
Helmut

-- 
Ing. Helmut Sch?tz
BEBAC?? Consultancy Services for
Bioequivalence and Bioavailability Studies
Neubaugasse 36/11
1070 Vienna, Austria
E helmut.schuetz at bebac.at
W https://bebac.at/
F https://forum.bebac.at/


From edd @end|ng |rom deb|@n@org  Sun Feb 23 14:53:16 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Sun, 23 Feb 2020 07:53:16 -0600
Subject: [R-pkg-devel] 
 CRAN repo mirror down? http://cran.us.r-project.org
In-Reply-To: <CAG5xu57R9wMYo23dL+Az-BWwLE-NcoXnNApEPQDff2uxakxgvw@mail.gmail.com>
References: <CAG5xu57R9wMYo23dL+Az-BWwLE-NcoXnNApEPQDff2uxakxgvw@mail.gmail.com>
Message-ID: <24146.33740.432104.994007@rob.eddelbuettel.com>


On 23 February 2020 at 08:45, Daniel Sjoberg wrote:
| I have a few continuous integration sites set up (e.g. Travis CI) to check
| packages I've written. To install packages I've used `install.packages(...,
| repo = "http://cran.us.r-project.org").  All the CI checks began failing
| last week because the site  http://cran.us.r-project.org is no longer
| available.  It's been down for almost a week.  Has the site been retired?
| Do I need to update the CI code for all my packages, or can I wait it out
| until it is back online?

I would switch to  https://cloud.r-project.org  which is actually a CDN and
hence 'always there' and 'always network close'.

The older-school DNS aliases like the one you use there can come and go.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From zhuoj|@@d@| @end|ng |rom gm@||@com  Sun Feb 23 15:31:11 2020
From: zhuoj|@@d@| @end|ng |rom gm@||@com (Zhuo Jia Dai)
Date: Mon, 24 Feb 2020 01:31:11 +1100
Subject: [R-pkg-devel] invalid 'useSource' argument
Message-ID: <CAD+DX3hMidV_6m_dg=Sj1KJgFb+QywgaqFAgYmh7hk2NXvH=MA@mail.gmail.com>

I keep getting this error when Checking my package {disk.frame} on the
latest R devel version.

```

  Attaching package: 'data.table'

  The following object is masked from 'package:purrr':

      transpose

  The following objects are masked from 'package:dplyr':

      between, first, last

  > cars.df = as.disk.frame(cars)
  > as.data.table(cars.df)
  Error in print.default(toprint, right = TRUE, quote = quote) :
    invalid 'useSource' argument
  Calls: <Anonymous> -> print.data.table -> print -> print.default
  Execution halted

```

But if I just run the code in the example normally in the REPL then
everything runs fine.

I do my checking in Windows 10 using these commands.

```r
remotes::install_github("xiaodaigh/disk.frame", ref="development")
devtools::check()
```

Is this a known bug? Can I still submit to CRAN?

-- 
ZJ

zhuojia.dai at gmail.com

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Feb 23 21:44:20 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 23 Feb 2020 15:44:20 -0500
Subject: [R-pkg-devel] invalid 'useSource' argument
In-Reply-To: <CAD+DX3hMidV_6m_dg=Sj1KJgFb+QywgaqFAgYmh7hk2NXvH=MA@mail.gmail.com>
References: <CAD+DX3hMidV_6m_dg=Sj1KJgFb+QywgaqFAgYmh7hk2NXvH=MA@mail.gmail.com>
Message-ID: <f16eee18-1b9f-2541-28b8-fb2cc8b2a84d@gmail.com>

On 23/02/2020 9:31 a.m., Zhuo Jia Dai wrote:
> I keep getting this error when Checking my package {disk.frame} on the
> latest R devel version.
> 
> ```
> 
>    Attaching package: 'data.table'
> 
>    The following object is masked from 'package:purrr':
> 
>        transpose
> 
>    The following objects are masked from 'package:dplyr':
> 
>        between, first, last
> 
>    > cars.df = as.disk.frame(cars)
>    > as.data.table(cars.df)
>    Error in print.default(toprint, right = TRUE, quote = quote) :
>      invalid 'useSource' argument
>    Calls: <Anonymous> -> print.data.table -> print -> print.default
>    Execution halted
> 
> ```
> 
> But if I just run the code in the example normally in the REPL then
> everything runs fine.
> 
> I do my checking in Windows 10 using these commands.
> 
> ```r
> remotes::install_github("xiaodaigh/disk.frame", ref="development")
> devtools::check()
> ```
> 
> Is this a known bug? Can I still submit to CRAN?

You aren't using the standard method (R CMD check on the tarball) to 
check your package.  If you get this error with the standard method, 
then you certainly should fix it before submitting.

Duncan Murdoch


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Mon Feb 24 17:59:24 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 24 Feb 2020 10:59:24 -0600
Subject: [R-pkg-devel] MiKTex v. TeX Live?
Message-ID: <afb3e2f3-944c-2d16-f289-e0f3cd819a07@effectivedefense.org>

Hello, All:? Two related questions:


SHORT QUESTION:? Which version of LaTeX does the R Project prefer and 
why?? I'm having trouble with MiKTeX, and one source suggested I switch 
to TeX Live.? (e.g., "https://latex.org/forum/viewtopic.php?t=29034")


PRESENTING PROBLEM:


 ?????? "R CMD build sos" under Windows 7 on a clone from 
"https://github.com/sbgraves237/sos" ended with, 'The required file 
tex\latex\pgf\frontendlayer\tikz.sty" is missing.'? I clicked "Install" 
and got "MiKTeX Update Wizard:? The operation could not be completed for 
the following reason:? No data.? Details:? get host by name failed in 
tcp_connect()".


 ????? I get the same error when I try to run MiKTeX 2.9 Update and 
"Update (Admin)".? (I got the "tikz.sty is missing" message only after I 
had turned off everything I could find to turn off in "Bitdefender Total 
Security".)? I think I saw a suggestion to manually delete "C:Program 
Files (x86)\MiKTeX 2.9" and manually remove the reference from the path, 
then reinstall into a different directory that the operating system and 
anti-virus would not by default identify as part of the operating system.


 ????? Suggestions?
 ????? Thanks,
 ????? Spencer Graves


p.s.? This is using R 2.6.2 immediately after running "update.packages()".


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Mon Feb 24 22:49:55 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 24 Feb 2020 15:49:55 -0600
Subject: [R-pkg-devel] Internet security software?
Message-ID: <b4a2dc7d-7a28-8651-bc02-7fe497c7d5f5@effectivedefense.org>

Hello, All:


 ????? What antivirus / internet security software do you use and 
recommend?


 ????? I've used Bitdefender for years.? However, I've been encountering 
an increasing number of problems with software I've used for years.? 
Some of my problems disappear when I turn off parts of Bitdefender.? 
However, I've been unable to use RStudio on my Windows 7 computer since 
early last November.? Also, when I turn off certain features of 
Bitdefender, "R CMD build sos" (with sos cloned from 
"https://github.com/sbgraves237/sos") completes in a few minutes.? With 
Bitdefender configured normally, "R CMD build sos" stops without warning 
on "* creating vignettes".? I've left it for days like that without it 
moving beyond that point.? No error message but also no progress.


 ????? Rather than doing a web search for alternative internet security 
software, I thought I'd ask you all:? If some of you have had similar 
problems with other antivirus / internet security software, I think I'd 
be more likely to hear it from you than from a web search.? Some of my 
problems may not be due to Bitdefender, but I know that some are, and 
Bitdefender tech support answers the phone but fails to fix these problems.


 ????? Thanks,
 ????? Spencer Graves


From m@rc_@chw@rtz @end|ng |rom me@com  Mon Feb 24 23:18:40 2020
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Mon, 24 Feb 2020 17:18:40 -0500
Subject: [R-pkg-devel] Internet security software?
In-Reply-To: <b4a2dc7d-7a28-8651-bc02-7fe497c7d5f5@effectivedefense.org>
References: <b4a2dc7d-7a28-8651-bc02-7fe497c7d5f5@effectivedefense.org>
Message-ID: <9F6D7405-E183-487D-A864-42D780DC1E7B@me.com>


> On Feb 24, 2020, at 4:49 PM, Spencer Graves <spencer.graves at effectivedefense.org> wrote:
> 
> Hello, All:
> 
> 
>       What antivirus / internet security software do you use and recommend?
> 
> 
>       I've used Bitdefender for years.  However, I've been encountering an increasing number of problems with software I've used for years.  Some of my problems disappear when I turn off parts of Bitdefender.  However, I've been unable to use RStudio on my Windows 7 computer since early last November.  Also, when I turn off certain features of Bitdefender, "R CMD build sos" (with sos cloned from "https://github.com/sbgraves237/sos") completes in a few minutes.  With Bitdefender configured normally, "R CMD build sos" stops without warning on "* creating vignettes".  I've left it for days like that without it moving beyond that point.  No error message but also no progress.
> 
> 
>       Rather than doing a web search for alternative internet security software, I thought I'd ask you all:  If some of you have had similar problems with other antivirus / internet security software, I think I'd be more likely to hear it from you than from a web search.  Some of my problems may not be due to Bitdefender, but I know that some are, and Bitdefender tech support answers the phone but fails to fix these problems.
> 
> 
>       Thanks,
>       Spencer Graves


Spencer,

FWIW, I also use BitDefender on macOS, and have for a number of years, even though macOS has built-in features. I selected BitDefender because of minimal system overhead and high detection ratings.

I also use Malwarebytes for periodic scans as a second tier.

The key and really only issue that I have had with BitDefender is the Safe Files feature, which has a tendency to lock down folder trees, and which can be very nuanced in terms of the day to day operational impact. 

Under the premise of "The missing shall not be compromised due to security", a paradigm that I learned back in the 90s in an apropos setting, I long ago disabled the Safe Files feature in BitDefender, and have not had an issue since.

I am going to presume that the behavior on Windows is going to be similar. So if disabling the Safe Files feature, presuming that you have it enabled, is an option that you can consider, I would try that approach initially.

Regards,

Marc Schwartz


From th|erry@onke||nx @end|ng |rom |nbo@be  Tue Feb 25 09:30:17 2020
From: th|erry@onke||nx @end|ng |rom |nbo@be (Thierry Onkelinx)
Date: Tue, 25 Feb 2020 09:30:17 +0100
Subject: [R-pkg-devel] MiKTex v. TeX Live?
In-Reply-To: <afb3e2f3-944c-2d16-f289-e0f3cd819a07@effectivedefense.org>
References: <afb3e2f3-944c-2d16-f289-e0f3cd819a07@effectivedefense.org>
Message-ID: <CAJuCY5zMYxMKJBrrpfTqFM9cAENDgxF6h+hm=5WpikzeET06NA@mail.gmail.com>

Dear Spencer,

I assume you are using R **3**.6.2.

Consider TinyTeX (https://yihui.org/tinytex/). I found that working fairly
easy on Windows machines, even by users without admin privileges.

Best regards,

ir. Thierry Onkelinx
Statisticus / Statistician

Vlaamse Overheid / Government of Flanders
INSTITUUT VOOR NATUUR- EN BOSONDERZOEK / RESEARCH INSTITUTE FOR NATURE AND
FOREST
Team Biometrie & Kwaliteitszorg / Team Biometrics & Quality Assurance
thierry.onkelinx at inbo.be
Havenlaan 88 bus 73, 1000 Brussel
www.inbo.be

///////////////////////////////////////////////////////////////////////////////////////////
To call in the statistician after the experiment is done may be no more
than asking him to perform a post-mortem examination: he may be able to say
what the experiment died of. ~ Sir Ronald Aylmer Fisher
The plural of anecdote is not data. ~ Roger Brinner
The combination of some data and an aching desire for an answer does not
ensure that a reasonable answer can be extracted from a given body of data.
~ John Tukey
///////////////////////////////////////////////////////////////////////////////////////////

<https://www.inbo.be>


Op ma 24 feb. 2020 om 18:00 schreef Spencer Graves <
spencer.graves at effectivedefense.org>:

> Hello, All:  Two related questions:
>
>
> SHORT QUESTION:  Which version of LaTeX does the R Project prefer and
> why?  I'm having trouble with MiKTeX, and one source suggested I switch
> to TeX Live.  (e.g., "https://latex.org/forum/viewtopic.php?t=29034")
>
>
> PRESENTING PROBLEM:
>
>
>         "R CMD build sos" under Windows 7 on a clone from
> "https://github.com/sbgraves237/sos" ended with, 'The required file
> tex\latex\pgf\frontendlayer\tikz.sty" is missing.'  I clicked "Install"
> and got "MiKTeX Update Wizard:  The operation could not be completed for
> the following reason:  No data.  Details:  get host by name failed in
> tcp_connect()".
>
>
>        I get the same error when I try to run MiKTeX 2.9 Update and
> "Update (Admin)".  (I got the "tikz.sty is missing" message only after I
> had turned off everything I could find to turn off in "Bitdefender Total
> Security".)  I think I saw a suggestion to manually delete "C:Program
> Files (x86)\MiKTeX 2.9" and manually remove the reference from the path,
> then reinstall into a different directory that the operating system and
> anti-virus would not by default identify as part of the operating system.
>
>
>        Suggestions?
>        Thanks,
>        Spencer Graves
>
>
> p.s.  This is using R 2.6.2 immediately after running "update.packages()".
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From Jor|@@Mey@ @end|ng |rom UGent@be  Tue Feb 25 10:16:14 2020
From: Jor|@@Mey@ @end|ng |rom UGent@be (Joris Meys)
Date: Tue, 25 Feb 2020 09:16:14 +0000
Subject: [R-pkg-devel] Internet security software?
In-Reply-To: <b4a2dc7d-7a28-8651-bc02-7fe497c7d5f5@effectivedefense.org>
References: <b4a2dc7d-7a28-8651-bc02-7fe497c7d5f5@effectivedefense.org>
Message-ID: <1582622243212.52139@UGent.be>

Hi Spencer,

I've abandoned Bitdefender for the reason you give: it gave me too much trouble with false positives and seemingly random blocking of all kinds of tools at one point. But the reason is not Bitdefender in itself. It worked perfectly fine until the updates came for the Spectre and Meltdown vulnerabilities. Somehow these patches messed with the workings of Bitdefender, leading to the problems you describe. As Windows 7 is no longer maintained, these problems won't be solved.

So first of all, you should abandon Windows 7. Even if it would work fine, it's a huge security risk. No point in having an antivirus if you run an OS that's no longer maintained. Either move to Windows 10 or change for a Linux distro (Ubuntu is imho the one Windows users find most easy to adapt to. Your mileage may vary).

As for antivirus, I'm now using Kaspersky and am liking it so far (2 years now). I find it less intrusive than Bitdefender as well, even though I had no complaints in the past. 

Kind regards
Joris

--
Joris Meys
Statistical consultant

Department of Data Analysis and Mathematical Modelling
Ghent University
Coupure Links 653, B-9000 Gent (Belgium)
------------------------------

Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php


________________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Spencer Graves <spencer.graves at effectivedefense.org>
Sent: Monday, February 24, 2020 10:49 PM
To: List r-package-devel
Subject: [R-pkg-devel] Internet security software?

Hello, All:


       What antivirus / internet security software do you use and
recommend?


       I've used Bitdefender for years.  However, I've been encountering
an increasing number of problems with software I've used for years.
Some of my problems disappear when I turn off parts of Bitdefender.
However, I've been unable to use RStudio on my Windows 7 computer since
early last November.  Also, when I turn off certain features of
Bitdefender, "R CMD build sos" (with sos cloned from
"https://github.com/sbgraves237/sos") completes in a few minutes.  With
Bitdefender configured normally, "R CMD build sos" stops without warning
on "* creating vignettes".  I've left it for days like that without it
moving beyond that point.  No error message but also no progress.


       Rather than doing a web search for alternative internet security
software, I thought I'd ask you all:  If some of you have had similar
problems with other antivirus / internet security software, I think I'd
be more likely to hear it from you than from a web search.  Some of my
problems may not be due to Bitdefender, but I know that some are, and
Bitdefender tech support answers the phone but fails to fix these problems.


       Thanks,
       Spencer Graves

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From @tep@n@@|nde|@r @end|ng |rom or@c|e@com  Tue Feb 25 17:47:51 2020
From: @tep@n@@|nde|@r @end|ng |rom or@c|e@com (Stepan)
Date: Tue, 25 Feb 2020 17:47:51 +0100
Subject: [R-pkg-devel] RIOT 2020
Message-ID: <f079b5c4-6d72-c7eb-c347-a2e0ee494965@oracle.com>

I hope you don?t mind us using this mailing list for a small 
advertisement, but we think it is relevant for this group:

We'd like to invite you to RIOT 2020 - the 5rd workshop on R 
Implementation, Optimization and Tooling [1]. It will take place 
co-located with, and during, useR! 2020 in St. Louis on July 8th. RIOT 
is an excellent venue for deep technical discussions about R 
implementations, tools, optimizations and R extensions, and will be very 
interesting for anyone interested in what?s under the hood of R.

The RIOT workshop topics include experience reports and technical 
details of novel R extensions. For example: ALTREP implementations, 
approaches to parallelization of R, integration with other (parallel, 
distributed, ...) computing engines, etc.

Regards,
Stepan Sindelar, Lukas Stadler (Oracle Labs), Jan Vitek (Northeastern), 
Alexander Bertram (BeDataDriven)

[1] http://riotworkshop.github.io/


From d@n|e|d@@joberg @end|ng |rom gm@||@com  Tue Feb 25 19:42:12 2020
From: d@n|e|d@@joberg @end|ng |rom gm@||@com (Daniel Sjoberg)
Date: Tue, 25 Feb 2020 13:42:12 -0500
Subject: [R-pkg-devel] 
 CRAN repo mirror down? http://cran.us.r-project.org
In-Reply-To: <24146.33740.432104.994007@rob.eddelbuettel.com>
References: <CAG5xu57R9wMYo23dL+Az-BWwLE-NcoXnNApEPQDff2uxakxgvw@mail.gmail.com>
 <24146.33740.432104.994007@rob.eddelbuettel.com>
Message-ID: <CAG5xu54EpeRRnQ9Va6+Nt33Z4OO=GryRzupjhQPnmLa96QYuXA@mail.gmail.com>

Thank you for the input!  Looks like it's time to update.   I was hoping I
could wait it out and the former site would come back online. :|

On Sun, Feb 23, 2020 at 8:53 AM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 23 February 2020 at 08:45, Daniel Sjoberg wrote:
> | I have a few continuous integration sites set up (e.g. Travis CI) to
> check
> | packages I've written. To install packages I've used
> `install.packages(...,
> | repo = "http://cran.us.r-project.org").  All the CI checks began failing
> | last week because the site  http://cran.us.r-project.org is no longer
> | available.  It's been down for almost a week.  Has the site been retired?
> | Do I need to update the CI code for all my packages, or can I wait it out
> | until it is back online?
>
> I would switch to  https://cloud.r-project.org  which is actually a CDN
> and
> hence 'always there' and 'always network close'.
>
> The older-school DNS aliases like the one you use there can come and go.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From h@w|ckh@m @end|ng |rom gm@||@com  Sat Feb 29 14:23:00 2020
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Sat, 29 Feb 2020 07:23:00 -0600
Subject: [R-pkg-devel] win-builder down?
In-Reply-To: <CABdHhvEqVcJ9CybpzvT3uk0iiqcO6Pfam54zGEZpAn0Q4o5z+Q@mail.gmail.com>
References: <CABdHhvEqVcJ9CybpzvT3uk0iiqcO6Pfam54zGEZpAn0Q4o5z+Q@mail.gmail.com>
Message-ID: <CABdHhvHg9XiSJE-rxnLFgO_-Es3U-jmcdd0jafkzY64F9NGhxA@mail.gmail.com>

Is it down again? I'm seeing the same problem again.
Hadley

On Sat, Feb 22, 2020 at 2:41 PM Hadley Wickham <h.wickham at gmail.com> wrote:
>
> Hi all,
>
> Is win-builder down? I submitted a couple of packages >24 hours ago,
> and haven't heard back.
>
> Hadley
>
> --
> http://hadley.nz



-- 
http://hadley.nz


From brod|e@g@@|@m @end|ng |rom y@hoo@com  Sat Feb 29 16:01:21 2020
From: brod|e@g@@|@m @end|ng |rom y@hoo@com (brodie gaslam)
Date: Sat, 29 Feb 2020 15:01:21 +0000 (UTC)
Subject: [R-pkg-devel] Possible gcc-10.0.1 Bug in gcc-10 Test Server
References: <714841592.2324204.1582988481103.ref@mail.yahoo.com>
Message-ID: <714841592.2324204.1582988481103@mail.yahoo.com>

At the risk of getting laughed out of the room I wanted to share with you some interesting findings that arose from trying to figure out why my package vetr is segfaulting on the gcc-10 test machine:

https://www.stats.ox.ac.uk/pub/bdr/gcc10/vetr.out

Thanks to Dirk Eddelbuettel who pointed me to rocker/r-base that builds on the testing debian repo I was able to reproduce the error, and figure just enough to post a semi-cogent question on SO:

https://stackoverflow.com/q/60406042/2725969

And some folks that know more than me about compilers rendered judgment that it likely is a compiler error.? I realize "random dudes on SO rendered judgment" is not exactly the most ringing endorsement, but the logic they present is sound and matches my reading of the C standard (not that that is worth much).

It is unlikely for others to run into this issue as it requires an extremely particular set of circumstances.? If you too segfault on Professor Ripley's machine please don't just point to this as the reason without actually confirming that's what's happening.

Best,

Brodie.


From henr|k@bengt@@on @end|ng |rom gm@||@com  Sat Feb 29 16:55:06 2020
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Sat, 29 Feb 2020 07:55:06 -0800
Subject: [R-pkg-devel] win-builder down?
In-Reply-To: <CABdHhvHg9XiSJE-rxnLFgO_-Es3U-jmcdd0jafkzY64F9NGhxA@mail.gmail.com>
References: <CABdHhvEqVcJ9CybpzvT3uk0iiqcO6Pfam54zGEZpAn0Q4o5z+Q@mail.gmail.com>
 <CABdHhvHg9XiSJE-rxnLFgO_-Es3U-jmcdd0jafkzY64F9NGhxA@mail.gmail.com>
Message-ID: <CAFDcVCQ+DWo2-zGMg4u=AHiKLCUdbQuJm6SbE-c3w5MHcSEYVw@mail.gmail.com>

Could be.  FYI, I think the different win-builder queues are
independent, i.e. when one get stuck it does not affect the others.
For example, I just verified that R-devel_gcc8 works.


$ date --iso-8601=seconds
2020-02-29T07:41:53-08:00


$ curl -s ftp://win-builder.r-project.org/R-oldrel/ | sed -E
's/(AM|PM)/\t\1/g' | sort -k 1 -k 3 -k 2
[empty]


$ curl -s ftp://win-builder.r-project.org/R-release/ | sed -E
's/(AM|PM)/\t\1/g' | sort -k 1 -k 3 -k 2
02-28-20  06:35 PM               129480 miraculix_0.9.19.1.tar.gz
02-28-20  06:41 PM               964211 wbstats_1.0.0.tar.gz
02-28-20  07:16 PM              2805713 SWMPrExtension_1.1.3.tar.gz
...
02-29-20  12:25 PM              2256595 lidR_2.2.3.tar.gz


$ curl -s ftp://win-builder.r-project.org/R-devel/ | sed -E
's/(AM|PM)/\t\1/g' | sort -k 1 -k 3 -k 2
02-28-20  07:59 PM               861233 tune_0.1.0.tar.gz
02-28-20  08:02 PM              4259662 qtl_1.46-2.tar.gz
02-28-20  08:07 PM               259716 forcats_0.4.0.9000.tar.gz
...
02-29-20  12:44 PM                32053 PostcodesioR_0.2.0.tar.gz


$ curl -s ftp://win-builder.r-project.org/R-devel_gcc8/ | sed -E
's/(AM|PM)/\t\1/g' | sort -k 1 -k 3 -k 2
[empty]

/Henrik

On Sat, Feb 29, 2020 at 5:23 AM Hadley Wickham <h.wickham at gmail.com> wrote:
>
> Is it down again? I'm seeing the same problem again.
> Hadley
>
> On Sat, Feb 22, 2020 at 2:41 PM Hadley Wickham <h.wickham at gmail.com> wrote:
> >
> > Hi all,
> >
> > Is win-builder down? I submitted a couple of packages >24 hours ago,
> > and haven't heard back.
> >
> > Hadley
> >
> > --
> > http://hadley.nz
>
>
>
> --
> http://hadley.nz
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From bob @end|ng |rom rud@|@  Sat Feb 29 17:40:25 2020
From: bob @end|ng |rom rud@|@ (Bob Rudis)
Date: Sat, 29 Feb 2020 11:40:25 -0500
Subject: [R-pkg-devel] Internet security software?
In-Reply-To: <1582622243212.52139@UGent.be>
References: <b4a2dc7d-7a28-8651-bc02-7fe497c7d5f5@effectivedefense.org>
 <1582622243212.52139@UGent.be>
Message-ID: <AF7E023C-E42B-4B51-9CFC-4185B463611C@rud.is>

As someone who is in cybersecurity as their $DAYJOB and who runs macOS as their primary OS (tho I pretty much run them all in one way, shape or form), I'd suggest:

- relying heavily on Gatekeeper/Xprotect (the built-in anti-malware solution that comes with macOS, provided you keep updating the OS)
- review the free tools at <https://objective-see.com/products.html> and consider installing them for "monitoring". Specifically, I'd suggest using:
  - LuLu <https://objective-see.com/products/lulu.html>
  - KnockKnowk <https://objective-see.com/products/knockknock.html>
  - ReiKey <https://objective-see.com/products/reikey.html>
  - BlockBlock <https://objective-see.com/products/blockblock.html>
  - RansomWhere? <https://objective-see.com/products/ransomwhere.html>
  - OverSight <https://objective-see.com/products/oversight.html>
  - Lockdown <https://objective-see.com/products/lockdown.html> (if you're stuck on seriously old macOS)
- use MalwareBytes free edition for periodic scans
- use Google Chrome Beta channel with uBlock Origin and the Disconnect extensions (and very few other extensions). 
  Go into uBlock Origin and enable all of the non-regional blocklists and then ones for your specific region.
  We're seeing regular increases in malicious advertisements across all ad networks.

The vast majority (if not all) of commercial or freemium macOS anti-malware solutions are mind-numbingly trivial to bypass. Unless you're in a regulatory environment that requires commercial, always-on anti-malware, I'd just run (as noted) the free version of Malwarebytes. If you are regulated, then it's one of the better ones from a commercial standpoint.

-boB


> On Feb 25, 2020, at 04:16, Joris Meys <Joris.Meys at ugent.be> wrote:
> 
> Hi Spencer,
> 
> I've abandoned Bitdefender for the reason you give: it gave me too much trouble with false positives and seemingly random blocking of all kinds of tools at one point. But the reason is not Bitdefender in itself. It worked perfectly fine until the updates came for the Spectre and Meltdown vulnerabilities. Somehow these patches messed with the workings of Bitdefender, leading to the problems you describe. As Windows 7 is no longer maintained, these problems won't be solved.
> 
> So first of all, you should abandon Windows 7. Even if it would work fine, it's a huge security risk. No point in having an antivirus if you run an OS that's no longer maintained. Either move to Windows 10 or change for a Linux distro (Ubuntu is imho the one Windows users find most easy to adapt to. Your mileage may vary).
> 
> As for antivirus, I'm now using Kaspersky and am liking it so far (2 years now). I find it less intrusive than Bitdefender as well, even though I had no complaints in the past. 
> 
> Kind regards
> Joris
> 
> --
> Joris Meys
> Statistical consultant
> 
> Department of Data Analysis and Mathematical Modelling
> Ghent University
> Coupure Links 653, B-9000 Gent (Belgium)
> ------------------------------
> 
> Disclaimer : http://helpdesk.ugent.be/e-maildisclaimer.php
> 
> 
> ________________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Spencer Graves <spencer.graves at effectivedefense.org>
> Sent: Monday, February 24, 2020 10:49 PM
> To: List r-package-devel
> Subject: [R-pkg-devel] Internet security software?
> 
> Hello, All:
> 
> 
>       What antivirus / internet security software do you use and
> recommend?
> 
> 
>       I've used Bitdefender for years.  However, I've been encountering
> an increasing number of problems with software I've used for years.
> Some of my problems disappear when I turn off parts of Bitdefender.
> However, I've been unable to use RStudio on my Windows 7 computer since
> early last November.  Also, when I turn off certain features of
> Bitdefender, "R CMD build sos" (with sos cloned from
> "https://github.com/sbgraves237/sos") completes in a few minutes.  With
> Bitdefender configured normally, "R CMD build sos" stops without warning
> on "* creating vignettes".  I've left it for days like that without it
> moving beyond that point.  No error message but also no progress.
> 
> 
>       Rather than doing a web search for alternative internet security
> software, I thought I'd ask you all:  If some of you have had similar
> problems with other antivirus / internet security software, I think I'd
> be more likely to hear it from you than from a web search.  Some of my
> problems may not be due to Bitdefender, but I know that some are, and
> Bitdefender tech support answers the phone but fails to fix these problems.
> 
> 
>       Thanks,
>       Spencer Graves
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sat Feb 29 23:06:12 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sun, 1 Mar 2020 11:06:12 +1300
Subject: [R-pkg-devel] [FORGED] Re:  win-builder down?
In-Reply-To: <CABdHhvHg9XiSJE-rxnLFgO_-Es3U-jmcdd0jafkzY64F9NGhxA@mail.gmail.com>
References: <CABdHhvEqVcJ9CybpzvT3uk0iiqcO6Pfam54zGEZpAn0Q4o5z+Q@mail.gmail.com>
 <CABdHhvHg9XiSJE-rxnLFgO_-Es3U-jmcdd0jafkzY64F9NGhxA@mail.gmail.com>
Message-ID: <72ac33ad-ecf1-e6c5-4a1f-40269f42ab03@auckland.ac.nz>


On 1/03/20 2:23 am, Hadley Wickham wrote:

> Is it down again? I'm seeing the same problem again.
> Hadley
> 
> On Sat, Feb 22, 2020 at 2:41 PM Hadley Wickham <h.wickham at gmail.com> wrote:
>>
>> Hi all,
>>
>> Is win-builder down? I submitted a couple of packages >24 hours ago,
>> and haven't heard back.
>>
>> Hadley

Me too.  Submitted a package about 18 hours ago, and so far not a 
sausage.  Although it's churlish to complain, one gets used to a service 
that has been provided and gets annoyed when the service disappears.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From mxkuhn @end|ng |rom gm@||@com  Sat Feb 29 23:44:43 2020
From: mxkuhn @end|ng |rom gm@||@com (Max Kuhn)
Date: Sat, 29 Feb 2020 14:44:43 -0800
Subject: [R-pkg-devel] [FORGED] Re: win-builder down?
In-Reply-To: <72ac33ad-ecf1-e6c5-4a1f-40269f42ab03@auckland.ac.nz>
References: <CABdHhvEqVcJ9CybpzvT3uk0iiqcO6Pfam54zGEZpAn0Q4o5z+Q@mail.gmail.com>
 <CABdHhvHg9XiSJE-rxnLFgO_-Es3U-jmcdd0jafkzY64F9NGhxA@mail.gmail.com>
 <72ac33ad-ecf1-e6c5-4a1f-40269f42ab03@auckland.ac.nz>
Message-ID: <CAJ9CoWnjt6mjtoKO0a3X6sokTBMXRSNeLTFwkDof1hJPynViXQ@mail.gmail.com>

On February 29, 2020 at 5:06:35 PM, Rolf Turner (r.turner at auckland.ac.nz)
wrote:


On 1/03/20 2:23 am, Hadley Wickham wrote:

> Is it down again? I'm seeing the same problem again.
> Hadley
>
> On Sat, Feb 22, 2020 at 2:41 PM Hadley Wickham <h.wickham at gmail.com>
wrote:
>>
>> Hi all,
>>
>> Is win-builder down? I submitted a couple of packages >24 hours ago,
>> and haven't heard back.
>>
>> Hadley

Me too. Submitted a package about 18 hours ago, and so far not a
sausage. Although it's churlish to complain, one gets used to a service
that has been provided and gets annoyed when the service disappears.

True, but it would be unnecessary if `R CMD check ?as-cran` did exactly the
same thing as win-builder (as well as the extra, informal checks done on a
first submission).

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sun Mar  1 00:12:57 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sun, 1 Mar 2020 12:12:57 +1300
Subject: [R-pkg-devel] [FORGED] Re: win-builder down?
In-Reply-To: <CAJ9CoWnjt6mjtoKO0a3X6sokTBMXRSNeLTFwkDof1hJPynViXQ@mail.gmail.com>
References: <CABdHhvEqVcJ9CybpzvT3uk0iiqcO6Pfam54zGEZpAn0Q4o5z+Q@mail.gmail.com>
 <CABdHhvHg9XiSJE-rxnLFgO_-Es3U-jmcdd0jafkzY64F9NGhxA@mail.gmail.com>
 <72ac33ad-ecf1-e6c5-4a1f-40269f42ab03@auckland.ac.nz>
 <CAJ9CoWnjt6mjtoKO0a3X6sokTBMXRSNeLTFwkDof1hJPynViXQ@mail.gmail.com>
Message-ID: <3006dae5-9261-5cb8-7c3a-bcb4b3a6868c@auckland.ac.nz>


On 1/03/20 11:44 am, Max Kuhn wrote:

> On February 29, 2020 at 5:06:35 PM, Rolf Turner (r.turner at auckland.ac.nz 
> <mailto:r.turner at auckland.ac.nz>) wrote:
>>
>> On 1/03/20 2:23 am, Hadley Wickham wrote:
>>
>> > Is it down again? I'm seeing the same problem again.
>> > Hadley
>> >
>> > On Sat, Feb 22, 2020 at 2:41 PM Hadley Wickham <h.wickham at gmail.com <mailto:h.wickham at gmail.com>> wrote:
>> >>
>> >> Hi all,
>> >>
>> >> Is win-builder down? I submitted a couple of packages >24 hours ago,
>> >> and haven't heard back.
>> >>
>> >> Hadley
>>
>> Me too. Submitted a package about 18 hours ago, and so far not a
>> sausage. Although it's churlish to complain, one gets used to a service
>> that has been provided and gets annoyed when the service disappears.
> 
> True, but it would be unnecessary if `R CMD check ?as-cran` did exactly 
> the same thing as win-builder (as well as the extra, informal checks 
> done on a first submission).

Not entirely true.  The package that I am currently trying to get built 
is for use by some consulting clients and is not (yet) for public 
release.  So I can't/don't submit it to CRAN so as to get a Windoze 
binary that way.

cheers,

Rolf

P.S. I note that the winbuilder web site says:

>  Please do not upload Bioconductor packages or CRAN packages.
>  Both Bioconductor and CRAN do have build systems ....

I presume that this exhortation is of some antiquity and is "no longer 
operative".

R.

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From henr|k@bengt@@on @end|ng |rom gm@||@com  Sun Mar  1 02:28:13 2020
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Sat, 29 Feb 2020 17:28:13 -0800
Subject: [R-pkg-devel] [FORGED] Re: win-builder down?
In-Reply-To: <3006dae5-9261-5cb8-7c3a-bcb4b3a6868c@auckland.ac.nz>
References: <CABdHhvEqVcJ9CybpzvT3uk0iiqcO6Pfam54zGEZpAn0Q4o5z+Q@mail.gmail.com>
 <CABdHhvHg9XiSJE-rxnLFgO_-Es3U-jmcdd0jafkzY64F9NGhxA@mail.gmail.com>
 <72ac33ad-ecf1-e6c5-4a1f-40269f42ab03@auckland.ac.nz>
 <CAJ9CoWnjt6mjtoKO0a3X6sokTBMXRSNeLTFwkDof1hJPynViXQ@mail.gmail.com>
 <3006dae5-9261-5cb8-7c3a-bcb4b3a6868c@auckland.ac.nz>
Message-ID: <CAFDcVCSr2uY59Y_f21SHgkK4x3bocrhXXCDrWu1_5GnV=t9hiQ@mail.gmail.com>

FYI, in past when queues got stuck, Uwe told me it's often a package that
launches an external process (e.g. java.exe) that doesn't terminate and
prevents R CMD check from terminating/timing out. He got watchdogs to kill
such stray events but there are false negatives.

A couple of weeks ago I proposed to add a placeholder for the package
currently tested and Uwe said he might look into it, e.g.

$ curl ftp://win-builder.r-project.org/R-devel/
02-05-20  03:10PM              2359737 bayestestR_0.5.2.tar.gz
02-05-20  11:42AM                          0
some.pkg_0.0.1.tar.gz-PROCESSING
02-05-20  11:56AM              5053108 catdata_1.2.2.tar.gz

Even if it doesn't solve the problem, it'll communicate to "us" that
something is stuck and what it is.

Anyway, we can help out by reporting (like this) when a queue look stuck.
Then I think it helps to clarify which queue/builder is stuck.

Henrik


On Sat, Feb 29, 2020, 15:13 Rolf Turner <r.turner at auckland.ac.nz> wrote:

>
> On 1/03/20 11:44 am, Max Kuhn wrote:
>
> > On February 29, 2020 at 5:06:35 PM, Rolf Turner (r.turner at auckland.ac.nz
> > <mailto:r.turner at auckland.ac.nz>) wrote:
> >>
> >> On 1/03/20 2:23 am, Hadley Wickham wrote:
> >>
> >> > Is it down again? I'm seeing the same problem again.
> >> > Hadley
> >> >
> >> > On Sat, Feb 22, 2020 at 2:41 PM Hadley Wickham <h.wickham at gmail.com
> <mailto:h.wickham at gmail.com>> wrote:
> >> >>
> >> >> Hi all,
> >> >>
> >> >> Is win-builder down? I submitted a couple of packages >24 hours ago,
> >> >> and haven't heard back.
> >> >>
> >> >> Hadley
> >>
> >> Me too. Submitted a package about 18 hours ago, and so far not a
> >> sausage. Although it's churlish to complain, one gets used to a service
> >> that has been provided and gets annoyed when the service disappears.
> >
> > True, but it would be unnecessary if `R CMD check ?as-cran` did exactly
> > the same thing as win-builder (as well as the extra, informal checks
> > done on a first submission).
>
> Not entirely true.  The package that I am currently trying to get built
> is for use by some consulting clients and is not (yet) for public
> release.  So I can't/don't submit it to CRAN so as to get a Windoze
> binary that way.
>
> cheers,
>
> Rolf
>
> P.S. I note that the winbuilder web site says:
>
> >  Please do not upload Bioconductor packages or CRAN packages.
> >  Both Bioconductor and CRAN do have build systems ....
>
> I presume that this exhortation is of some antiquity and is "no longer
> operative".
>
> R.
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Sun Mar  1 02:40:15 2020
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Sun, 1 Mar 2020 12:40:15 +1100
Subject: [R-pkg-devel] win-builder down?
In-Reply-To: <CAFDcVCSr2uY59Y_f21SHgkK4x3bocrhXXCDrWu1_5GnV=t9hiQ@mail.gmail.com>
References: <CABdHhvEqVcJ9CybpzvT3uk0iiqcO6Pfam54zGEZpAn0Q4o5z+Q@mail.gmail.com>
 <CABdHhvHg9XiSJE-rxnLFgO_-Es3U-jmcdd0jafkzY64F9NGhxA@mail.gmail.com>
 <72ac33ad-ecf1-e6c5-4a1f-40269f42ab03@auckland.ac.nz>
 <CAJ9CoWnjt6mjtoKO0a3X6sokTBMXRSNeLTFwkDof1hJPynViXQ@mail.gmail.com>
 <3006dae5-9261-5cb8-7c3a-bcb4b3a6868c@auckland.ac.nz>
 <CAFDcVCSr2uY59Y_f21SHgkK4x3bocrhXXCDrWu1_5GnV=t9hiQ@mail.gmail.com>
Message-ID: <CAJmOi+MkF=dTCW8QhBqJSOW3ib6JTWFcpx2z=aWdjKDQBwuf6A@mail.gmail.com>

Are CRAN staff located in Europe only? Is there a case to have a limited
staff across multiple timezones with a rolling roster? Obviously if
something is reported it?s best if it can be actioned immediately.

On Sun, 1 Mar 2020 at 12:29 pm, Henrik Bengtsson <henrik.bengtsson at gmail.com>
wrote:

> FYI, in past when queues got stuck, Uwe told me it's often a package that
> launches an external process (e.g. java.exe) that doesn't terminate and
> prevents R CMD check from terminating/timing out. He got watchdogs to kill
> such stray events but there are false negatives.
>
> A couple of weeks ago I proposed to add a placeholder for the package
> currently tested and Uwe said he might look into it, e.g.
>
> $ curl ftp://win-builder.r-project.org/R-devel/
> 02-05-20  03:10PM              2359737 bayestestR_0.5.2.tar.gz
> 02-05-20  11:42AM                          0
> some.pkg_0.0.1.tar.gz-PROCESSING
> 02-05-20  11:56AM              5053108 catdata_1.2.2.tar.gz
>
> Even if it doesn't solve the problem, it'll communicate to "us" that
> something is stuck and what it is.
>
> Anyway, we can help out by reporting (like this) when a queue look stuck.
> Then I think it helps to clarify which queue/builder is stuck.
>
> Henrik
>
>
> On Sat, Feb 29, 2020, 15:13 Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
> >
> > On 1/03/20 11:44 am, Max Kuhn wrote:
> >
> > > On February 29, 2020 at 5:06:35 PM, Rolf Turner (
> r.turner at auckland.ac.nz
> > > <mailto:r.turner at auckland.ac.nz>) wrote:
> > >>
> > >> On 1/03/20 2:23 am, Hadley Wickham wrote:
> > >>
> > >> > Is it down again? I'm seeing the same problem again.
> > >> > Hadley
> > >> >
> > >> > On Sat, Feb 22, 2020 at 2:41 PM Hadley Wickham <h.wickham at gmail.com
> > <mailto:h.wickham at gmail.com>> wrote:
> > >> >>
> > >> >> Hi all,
> > >> >>
> > >> >> Is win-builder down? I submitted a couple of packages >24 hours
> ago,
> > >> >> and haven't heard back.
> > >> >>
> > >> >> Hadley
> > >>
> > >> Me too. Submitted a package about 18 hours ago, and so far not a
> > >> sausage. Although it's churlish to complain, one gets used to a
> service
> > >> that has been provided and gets annoyed when the service disappears.
> > >
> > > True, but it would be unnecessary if `R CMD check ?as-cran` did exactly
> > > the same thing as win-builder (as well as the extra, informal checks
> > > done on a first submission).
> >
> > Not entirely true.  The package that I am currently trying to get built
> > is for use by some consulting clients and is not (yet) for public
> > release.  So I can't/don't submit it to CRAN so as to get a Windoze
> > binary that way.
> >
> > cheers,
> >
> > Rolf
> >
> > P.S. I note that the winbuilder web site says:
> >
> > >  Please do not upload Bioconductor packages or CRAN packages.
> > >  Both Bioconductor and CRAN do have build systems ....
> >
> > I presume that this exhortation is of some antiquity and is "no longer
> > operative".
> >
> > R.
> >
> > --
> > Honorary Research Fellow
> > Department of Statistics
> > University of Auckland
> > Phone: +64-9-373-7599 ext. 88276
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Sun Mar  1 04:18:53 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sun, 1 Mar 2020 16:18:53 +1300
Subject: [R-pkg-devel] win-builder down?
In-Reply-To: <CAJmOi+MkF=dTCW8QhBqJSOW3ib6JTWFcpx2z=aWdjKDQBwuf6A@mail.gmail.com>
References: <CABdHhvEqVcJ9CybpzvT3uk0iiqcO6Pfam54zGEZpAn0Q4o5z+Q@mail.gmail.com>
 <CABdHhvHg9XiSJE-rxnLFgO_-Es3U-jmcdd0jafkzY64F9NGhxA@mail.gmail.com>
 <72ac33ad-ecf1-e6c5-4a1f-40269f42ab03@auckland.ac.nz>
 <CAJ9CoWnjt6mjtoKO0a3X6sokTBMXRSNeLTFwkDof1hJPynViXQ@mail.gmail.com>
 <3006dae5-9261-5cb8-7c3a-bcb4b3a6868c@auckland.ac.nz>
 <CAFDcVCSr2uY59Y_f21SHgkK4x3bocrhXXCDrWu1_5GnV=t9hiQ@mail.gmail.com>
 <CAJmOi+MkF=dTCW8QhBqJSOW3ib6JTWFcpx2z=aWdjKDQBwuf6A@mail.gmail.com>
Message-ID: <217f5966-a47b-a772-f889-48ffbade7ac9@auckland.ac.nz>


On 1/03/20 2:40 pm, Hugh Parsonage wrote:

> Are CRAN staff located in Europe only? Is there a case to have a limited 
> staff across multiple timezones with a rolling roster? Obviously if 
> something is reported it?s best if it can be actioned immediately.

Just to be clear, it is winbuilder, and not CRAN, that is the subject of 
concern.  In my understanding at least, these (winbuilder and CRAN) are 
quite different entities.

Also I have the vague (quite possibly erroneous) impression that the 
staff of winbuilder consists of a unique individual, namely Uwe Ligges.

It might be a Good Thing if someone located somewhere other than Europe, 
were to volunteer to assist Uwe.   OTOH Uwe might not want any 
assistance and/or might not trust the competence of such volunteers.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sun Mar  1 19:38:54 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sun, 1 Mar 2020 19:38:54 +0100
Subject: [R-pkg-devel] [FORGED] Re: win-builder down?
In-Reply-To: <3006dae5-9261-5cb8-7c3a-bcb4b3a6868c@auckland.ac.nz>
References: <CABdHhvEqVcJ9CybpzvT3uk0iiqcO6Pfam54zGEZpAn0Q4o5z+Q@mail.gmail.com>
 <CABdHhvHg9XiSJE-rxnLFgO_-Es3U-jmcdd0jafkzY64F9NGhxA@mail.gmail.com>
 <72ac33ad-ecf1-e6c5-4a1f-40269f42ab03@auckland.ac.nz>
 <CAJ9CoWnjt6mjtoKO0a3X6sokTBMXRSNeLTFwkDof1hJPynViXQ@mail.gmail.com>
 <3006dae5-9261-5cb8-7c3a-bcb4b3a6868c@auckland.ac.nz>
Message-ID: <aeb85ac8-8cd4-a31a-cbcf-5ec1122fd7b3@statistik.tu-dortmund.de>



On 01.03.2020 00:12, Rolf Turner wrote:
> 
> On 1/03/20 11:44 am, Max Kuhn wrote:
> 
>> On February 29, 2020 at 5:06:35 PM, Rolf Turner 
>> (r.turner at auckland.ac.nz <mailto:r.turner at auckland.ac.nz>) wrote:
>>>
>>> On 1/03/20 2:23 am, Hadley Wickham wrote:
>>>
>>> > Is it down again? I'm seeing the same problem again.
>>> > Hadley
>>> >
>>> > On Sat, Feb 22, 2020 at 2:41 PM Hadley Wickham <h.wickham at gmail.com 
>>> <mailto:h.wickham at gmail.com>> wrote:
>>> >>
>>> >> Hi all,
>>> >>
>>> >> Is win-builder down? I submitted a couple of packages >24 hours ago,
>>> >> and haven't heard back.
>>> >>
>>> >> Hadley
>>>
>>> Me too. Submitted a package about 18 hours ago, and so far not a
>>> sausage. Although it's churlish to complain, one gets used to a service
>>> that has been provided and gets annoyed when the service disappears.
>>
>> True, but it would be unnecessary if `R CMD check ?as-cran` did 
>> exactly the same thing as win-builder (as well as the extra, informal 
>> checks done on a first submission).
> 
> Not entirely true.? The package that I am currently trying to get built 
> is for use by some consulting clients and is not (yet) for public 
> release.? So I can't/don't submit it to CRAN so as to get a Windoze 
> binary that way.
> 
> cheers,
> 
> Rolf
> 
> P.S. I note that the winbuilder web site says:
> 
>> ?Please do not upload Bioconductor packages or CRAN packages.
>> ?Both Bioconductor and CRAN do have build systems ....
> 
> I presume that this exhortation is of some antiquity and is "no longer 
> operative".

Indeed, as people also use winbuilder for the check results these days, 
I will remove that sentence.

The queues were stuck due to some processes that the watchdog was not 
able to kill entirely. Now oen and rnnign again.

Best,
Uwe Ligges


From ph||||p@j@rrett1 @end|ng |rom gm@||@com  Thu Mar  5 02:22:25 2020
From: ph||||p@j@rrett1 @end|ng |rom gm@||@com (Jarrett Phillips)
Date: Wed, 4 Mar 2020 20:22:25 -0500
Subject: [R-pkg-devel] dir() function use in R packages
Message-ID: <CAMVrHdDXZHN-kGPbTOS1TByh36H8c30YpdgTBeu3T+stLbhYPQ@mail.gmail.com>

Hi All,

I am updating my R package that is currently on CRAN.

I am looking to have my main package function iterate through some files in
a directory, but am having some issues.  In my function, I do the following
(I might switch to 'replicate()' instead since non-preallocated for loops
can be very slow):

    file.names <- dir(path, pattern = ".fas")
        for (i in 1:length(file.names)) {
           # read in DNA sequences using 'pegas' package
          seqs <- read.dna(file = file.names[i], format = "fasta")
        }

However, I am uncertain how my function should handle the 'path' argument
to dir(). I could provide 'path' as an explicit argument to my function,
but is there a less direct way?

What I'm after is something like 'file.choose()', except for a folder,
rather than a file.

Has anyone implemented something similar in their R packages?

Thanks!

	[[alternative HTML version deleted]]


From m@rk|eed@2 @end|ng |rom gm@||@com  Thu Mar  5 04:12:25 2020
From: m@rk|eed@2 @end|ng |rom gm@||@com (Mark Leeds)
Date: Wed, 4 Mar 2020 22:12:25 -0500
Subject: [R-pkg-devel] dir() function use in R packages
In-Reply-To: <CAMVrHdDXZHN-kGPbTOS1TByh36H8c30YpdgTBeu3T+stLbhYPQ@mail.gmail.com>
References: <CAMVrHdDXZHN-kGPbTOS1TByh36H8c30YpdgTBeu3T+stLbhYPQ@mail.gmail.com>
Message-ID: <CAHz+bWY2Y9w1WoS26zvW_XKD0gvxKeH0gAT3h1MvEbsT9qZwLQ@mail.gmail.com>

I think you want file.path(). you can use that to make a directory that
includes a path to it.
See ?file.path for more details. Then,  you can do something like

mydir ,- file.path(whatever)1, whatever2).
setwd(mydir)

but mydir needs to exist before you do that so check existence first using
file.exists().











On Wed, Mar 4, 2020 at 8:22 PM Jarrett Phillips <phillipsjarrett1 at gmail.com>
wrote:

> Hi All,
>
> I am updating my R package that is currently on CRAN.
>
> I am looking to have my main package function iterate through some files in
> a directory, but am having some issues.  In my function, I do the following
> (I might switch to 'replicate()' instead since non-preallocated for loops
> can be very slow):
>
>     file.names <- dir(path, pattern = ".fas")
>         for (i in 1:length(file.names)) {
>            # read in DNA sequences using 'pegas' package
>           seqs <- read.dna(file = file.names[i], format = "fasta")
>         }
>
> However, I am uncertain how my function should handle the 'path' argument
> to dir(). I could provide 'path' as an explicit argument to my function,
> but is there a less direct way?
>
> What I'm after is something like 'file.choose()', except for a folder,
> rather than a file.
>
> Has anyone implemented something similar in their R packages?
>
> Thanks!
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From |@w@onj@|7net @end|ng |rom gm@||@com  Thu Mar  5 04:26:24 2020
From: |@w@onj@|7net @end|ng |rom gm@||@com (John Lawson)
Date: Wed, 4 Mar 2020 20:26:24 -0700
Subject: [R-pkg-devel] Help on Windows CRAN Check
Message-ID: <CAJiVmSC0n37iLWMXRAmQpw9Yi=vOrFfj3eNffZYEvhHeRnWRNA@mail.gmail.com>

I see this error on the CRAN Check report

> ### ** Examples
>
> #Definitive Screening Design
> library(daewr)
> set.seed(1234)
> x <- DefScreen(m=5,c=0)
> colnames(x) <- paste("x",1:5,sep="")
> x$y <- 3*x$x1 + 2*x$x2 + 2*x$x4*x$x5 + x$x3^2 + 2*x$x1^2 + rnorm(nrow(x),0,1)
> (z <- HierAFS(x$y,x[,-6],m=5,c=0,step=4,nm1=FALSE ))
 ----------- FAILURE REPORT --------------
 --- failure: the condition has length > 1 ---
 --- srcref ---
:
 --- package (from environment) ---
daewr
 --- call from context ---
ihstep(y, x, m, c)
 --- call from argument ---
if (t1 == "I" & t2 == "(") {
    iquad = TRUE
}
 --- R stacktrace ---
where 1: ihstep(y, x, m, c)
where 2: eval(expr, pf)
where 3: eval(expr, pf)
where 4: withVisible(eval(expr, pf))
where 5: evalVis(expr)
where 6: capture.output(res <- ihstep(y, x, m, c))
where 7: withCallingHandlers(expr, warning = function(w)
invokeRestart("muffleWarning"))
where 8: suppressWarnings(invisible(capture.output(res <- ihstep(y, x,
    m, c))))
where 9: HierAFS(x$y, x[, -6], m = 5, c = 0, step = 4, nm1 = FALSE)

 --- value of length: 3 type: logical ---
[1] FALSE FALSE FALSE
 --- function from context ---
function (y, des, m, c)
{
    lin <- colnames(des)
    values <- c("A", "B", "C", "D", "E", "F", "G", "H", "I",
        "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T",
        "U", "V", "W", "X", "Y", "Z")
    repl <- c("I(A^2)", "I(B^2)", "I(C^2)", "I(D^2)", "I(E^2)",
        "I(F^2)", "I(G^2)", "I(H^2)", "I(I^2)", "I(J^2)", "I(K^2)",
        "I(L^2)", "I(M^2)", "I(N^2)", "I(O^2)", "I(P^2)", "I(Q^2)",
        "I(R^2)", "I(S^2)", "I(T^2)", "I(U^2)", "I(V^2)", "I(W^2)",
        "I(X^2)", "I(Y^2)", "I(Z^2)")
    repl.tab <- cbind(values, repl)
    if (m == 0) {
        quad <- character()
    }
    else {
        indx <- rep(0, m)
        for (i in 1:m) {
            indx[i] <- match(lin[i], repl.tab[, 1], nomatch = 0)
        }
        quad <- rep("A", m)
        for (i in 1:m) {
            quad[i] <- lin[i]
        }
        quad[indx != 0] <- repl.tab[indx, 2]
        quad <- paste(quad, collapse = "+")
    }
    dat <- data.frame(y = y, des)
    lm1 <- lm(y ~ (.)^2, data = dat)
    mm <- model.matrix(lm1)
    fact <- colnames(mm)
    fact <- fact[-1]
    fact <- paste(fact, collapse = "+")
    mod <- paste(c(fact, quad), collapse = "+")
    lm2 <- lm(reformulate(termlabels = mod, response = "y"),
        data = dat)
    mm <- model.matrix(lm2)
    mm <- mm[, 2:ncol(mm)]
    trm <- firstm(y, mm)
    d1 <- data.frame(y = y, mm[, trm])
    t1 <- substr(trm, 1, 1)
    t2 <- substr(trm, 2, 2)
    t3 <- substr(trm, 3, 3)
    iquad = FALSE
    if (t1 == "I" & t2 == "(") {
        iquad = TRUE
    }
    hmt <- trm
    if (t2 == "") {
        nms <- names(d1)
        nms[2] <- hmt
        names(d1) <- nms
    }
    m1 <- lm(y ~ (.), data = d1)
    result <- summary(m1)
    print(result)
    return(trm)
}
<bytecode: 0x088fe000>
<environment: namespace:daewr>
 --- function search by body ---
Function ihstep in namespace daewr has this body.
 ----------- END OF FAILURE REPORT --------------
Fatal error: the condition has length > 1



However on my own computer or on Rforge

I see this:

* checking examples ... OK
* DONE

Status: OK

-- R CMD check results ---------------------------------------- daewr 1.1-9 ----
Duration: 1m 1.8s

0 errors v | 0 warnings v | 0 notes v

R CMD check succeeded


I am not sure what the error is or how to correct it. Any help would
be greatly appreciated,

John Lawson

	[[alternative HTML version deleted]]


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Thu Mar  5 09:04:40 2020
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Thu, 5 Mar 2020 09:04:40 +0100
Subject: [R-pkg-devel] Help on Windows CRAN Check
In-Reply-To: <CAJiVmSC0n37iLWMXRAmQpw9Yi=vOrFfj3eNffZYEvhHeRnWRNA@mail.gmail.com>
References: <CAJiVmSC0n37iLWMXRAmQpw9Yi=vOrFfj3eNffZYEvhHeRnWRNA@mail.gmail.com>
Message-ID: <962216ce-9ed0-7b53-0ef6-cb5c5416e66b@gmail.com>

On 3/5/20 4:26 AM, John Lawson wrote:
> I see this error on the CRAN Check report
>
>> ### ** Examples
>>
>> #Definitive Screening Design
>> library(daewr)
>> set.seed(1234)
>> x <- DefScreen(m=5,c=0)
>> colnames(x) <- paste("x",1:5,sep="")
>> x$y <- 3*x$x1 + 2*x$x2 + 2*x$x4*x$x5 + x$x3^2 + 2*x$x1^2 + rnorm(nrow(x),0,1)
>> (z <- HierAFS(x$y,x[,-6],m=5,c=0,step=4,nm1=FALSE ))
>   ----------- FAILURE REPORT --------------
>   --- failure: the condition has length > 1 ---
>   --- srcref ---
> :
>   --- package (from environment) ---
> daewr
>   --- call from context ---
> ihstep(y, x, m, c)
>   --- call from argument ---
> if (t1 == "I" & t2 == "(") {
>      iquad = TRUE
> }
>   --- R stacktrace ---
> where 1: ihstep(y, x, m, c)
> where 2: eval(expr, pf)
> where 3: eval(expr, pf)
> where 4: withVisible(eval(expr, pf))
> where 5: evalVis(expr)
> where 6: capture.output(res <- ihstep(y, x, m, c))
> where 7: withCallingHandlers(expr, warning = function(w)
> invokeRestart("muffleWarning"))
> where 8: suppressWarnings(invisible(capture.output(res <- ihstep(y, x,
>      m, c))))
> where 9: HierAFS(x$y, x[, -6], m = 5, c = 0, step = 4, nm1 = FALSE)
>
>   --- value of length: 3 type: logical ---
> [1] FALSE FALSE FALSE
>   --- function from context ---
> function (y, des, m, c)
> {
>      lin <- colnames(des)
>      values <- c("A", "B", "C", "D", "E", "F", "G", "H", "I",
>          "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T",
>          "U", "V", "W", "X", "Y", "Z")
>      repl <- c("I(A^2)", "I(B^2)", "I(C^2)", "I(D^2)", "I(E^2)",
>          "I(F^2)", "I(G^2)", "I(H^2)", "I(I^2)", "I(J^2)", "I(K^2)",
>          "I(L^2)", "I(M^2)", "I(N^2)", "I(O^2)", "I(P^2)", "I(Q^2)",
>          "I(R^2)", "I(S^2)", "I(T^2)", "I(U^2)", "I(V^2)", "I(W^2)",
>          "I(X^2)", "I(Y^2)", "I(Z^2)")
>      repl.tab <- cbind(values, repl)
>      if (m == 0) {
>          quad <- character()
>      }
>      else {
>          indx <- rep(0, m)
>          for (i in 1:m) {
>              indx[i] <- match(lin[i], repl.tab[, 1], nomatch = 0)
>          }
>          quad <- rep("A", m)
>          for (i in 1:m) {
>              quad[i] <- lin[i]
>          }
>          quad[indx != 0] <- repl.tab[indx, 2]
>          quad <- paste(quad, collapse = "+")
>      }
>      dat <- data.frame(y = y, des)
>      lm1 <- lm(y ~ (.)^2, data = dat)
>      mm <- model.matrix(lm1)
>      fact <- colnames(mm)
>      fact <- fact[-1]
>      fact <- paste(fact, collapse = "+")
>      mod <- paste(c(fact, quad), collapse = "+")
>      lm2 <- lm(reformulate(termlabels = mod, response = "y"),
>          data = dat)
>      mm <- model.matrix(lm2)
>      mm <- mm[, 2:ncol(mm)]
>      trm <- firstm(y, mm)
>      d1 <- data.frame(y = y, mm[, trm])
>      t1 <- substr(trm, 1, 1)
>      t2 <- substr(trm, 2, 2)
>      t3 <- substr(trm, 3, 3)
>      iquad = FALSE
>      if (t1 == "I" & t2 == "(") {
>          iquad = TRUE
>      }
>      hmt <- trm
>      if (t2 == "") {
>          nms <- names(d1)
>          nms[2] <- hmt
>          names(d1) <- nms
>      }
>      m1 <- lm(y ~ (.), data = d1)
>      result <- summary(m1)
>      print(result)
>      return(trm)
> }
> <bytecode: 0x088fe000>
> <environment: namespace:daewr>
>   --- function search by body ---
> Function ihstep in namespace daewr has this body.
>   ----------- END OF FAILURE REPORT --------------
> Fatal error: the condition has length > 1

The problem is that the condition t1 == "I" & t2 == "(" of the if 
statement in the code is not a scalar. Even though this has been allowed 
in R historically, the first element has been used, it is almost always 
a sign of coding error, so it is going to become a runtime error.

So what one should do is fix the code to only use scalar conditions - 
ensure t1, t2 are scalar, replace & by &&.

You can enable these checks on your end using an environment variable 
(more details are in R Internals, _R_CHECK_LENGTH_1_CONDITION_ and 
related is _R_CHECK_LENGTH_1_LOGIC2_).|||
|

Best
Tomas


>
>
> However on my own computer or on Rforge
>
> I see this:
>
> * checking examples ... OK
> * DONE
>
> Status: OK
>
> -- R CMD check results ---------------------------------------- daewr 1.1-9 ----
> Duration: 1m 1.8s
>
> 0 errors v | 0 warnings v | 0 notes v
>
> R CMD check succeeded
>
>
> I am not sure what the error is or how to correct it. Any help would
> be greatly appreciated,
>
> John Lawson
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Mar  5 09:45:32 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 5 Mar 2020 21:45:32 +1300
Subject: [R-pkg-devel] [FORGED] Re:  Help on Windows CRAN Check
In-Reply-To: <962216ce-9ed0-7b53-0ef6-cb5c5416e66b@gmail.com>
References: <CAJiVmSC0n37iLWMXRAmQpw9Yi=vOrFfj3eNffZYEvhHeRnWRNA@mail.gmail.com>
 <962216ce-9ed0-7b53-0ef6-cb5c5416e66b@gmail.com>
Message-ID: <089da1d5-ce9c-db8b-ffbc-037d7734a769@auckland.ac.nz>


On 5/03/20 9:04 pm, Tomas Kalibera wrote:

> On 3/5/20 4:26 AM, John Lawson wrote:
>> I see this error on the CRAN Check report

<SNIP>

>> Fatal error: the condition has length > 1
> 
> The problem is that the condition t1 == "I" & t2 == "(" of the if
> statement in the code is not a scalar. Even though this has been allowed
> in R historically, the first element has been used, it is almost always
> a sign of coding error, so it is going to become a runtime error.
> 
> So what one should do is fix the code to only use scalar conditions -
> ensure t1, t2 are scalar, replace & by &&.

Perhaps I'm being even thicker than usual (imagine that!) but I don't 
grok that last recommendation:  "replace & by &&".  It's usually 
harmless but indicates a lack of understanding.  The "&&" operator 
evaluates the second condition only if the first condition is TRUE.  It 
is useful (only) in setting where the second condition is meaningful 
only when the first condition is TRUE.

Things like:

    if(!is.null(x) && x > 0)

If "x" were null then the second  condition would cause an error to be 
thrown if you used "&" rather than "&&".

In all (???) situations where "&&" works, then "&" works as well. 
However it's a Good Idea to use the language as intended.

It I'm missing some point here, please enlighten me.

<SNIP>

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Thu Mar  5 10:10:30 2020
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Thu, 5 Mar 2020 09:10:30 +0000
Subject: [R-pkg-devel] [FORGED] Re:  Help on Windows CRAN Check
In-Reply-To: <089da1d5-ce9c-db8b-ffbc-037d7734a769@auckland.ac.nz>
References: <CAJiVmSC0n37iLWMXRAmQpw9Yi=vOrFfj3eNffZYEvhHeRnWRNA@mail.gmail.com>
 <962216ce-9ed0-7b53-0ef6-cb5c5416e66b@gmail.com>
 <089da1d5-ce9c-db8b-ffbc-037d7734a769@auckland.ac.nz>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E01CC7CD280@MBXP01.ds.man.ac.uk>

It's not about god imposing style:).  Consider this variant of your example:
>    flag <- !is.null(x) && x > 0

With the strict checking this will throw error when you run it (good). If you replace && with & and x is a vector, flag will silently become a vector and the error be masked or delayed  and pop up far away.

Georgi Boshnakov


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Rolf Turner
Sent: 05 March 2020 08:46
To: Tomas Kalibera <tomas.kalibera at gmail.com>
Cc: r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] [FORGED] Re: Help on Windows CRAN Check


On 5/03/20 9:04 pm, Tomas Kalibera wrote:

> On 3/5/20 4:26 AM, John Lawson wrote:
>> I see this error on the CRAN Check report

<SNIP>

>> Fatal error: the condition has length > 1
> 
> The problem is that the condition t1 == "I" & t2 == "(" of the if 
> statement in the code is not a scalar. Even though this has been 
> allowed in R historically, the first element has been used, it is 
> almost always a sign of coding error, so it is going to become a runtime error.
> 
> So what one should do is fix the code to only use scalar conditions - 
> ensure t1, t2 are scalar, replace & by &&.

Perhaps I'm being even thicker than usual (imagine that!) but I don't grok that last recommendation:  "replace & by &&".  It's usually harmless but indicates a lack of understanding.  The "&&" operator evaluates the second condition only if the first condition is TRUE.  It is useful (only) in setting where the second condition is meaningful only when the first condition is TRUE.

Things like:

    if(!is.null(x) && x > 0)

If "x" were null then the second  condition would cause an error to be thrown if you used "&" rather than "&&".

In all (???) situations where "&&" works, then "&" works as well. 
However it's a Good Idea to use the language as intended.

It I'm missing some point here, please enlighten me.

<SNIP>

cheers,

Rolf

--
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Thu Mar  5 10:29:40 2020
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Thu, 5 Mar 2020 10:29:40 +0100
Subject: [R-pkg-devel] [FORGED] Re:  Help on Windows CRAN Check
In-Reply-To: <089da1d5-ce9c-db8b-ffbc-037d7734a769@auckland.ac.nz>
References: <CAJiVmSC0n37iLWMXRAmQpw9Yi=vOrFfj3eNffZYEvhHeRnWRNA@mail.gmail.com>
 <962216ce-9ed0-7b53-0ef6-cb5c5416e66b@gmail.com>
 <089da1d5-ce9c-db8b-ffbc-037d7734a769@auckland.ac.nz>
Message-ID: <6864d0e3-ca3f-2b79-36ad-b7a854eed833@gmail.com>

On 3/5/20 9:45 AM, Rolf Turner wrote:
>
> On 5/03/20 9:04 pm, Tomas Kalibera wrote:
>
>> On 3/5/20 4:26 AM, John Lawson wrote:
>>> I see this error on the CRAN Check report
>
> <SNIP>
>
>>> Fatal error: the condition has length > 1
>>
>> The problem is that the condition t1 == "I" & t2 == "(" of the if
>> statement in the code is not a scalar. Even though this has been allowed
>> in R historically, the first element has been used, it is almost always
>> a sign of coding error, so it is going to become a runtime error.
>>
>> So what one should do is fix the code to only use scalar conditions -
>> ensure t1, t2 are scalar, replace & by &&.
>
> Perhaps I'm being even thicker than usual (imagine that!) but I don't 
> grok that last recommendation:? "replace & by &&".? It's usually 
> harmless but indicates a lack of understanding.? The "&&" operator 
> evaluates the second condition only if the first condition is TRUE.? 
> It is useful (only) in setting where the second condition is 
> meaningful only when the first condition is TRUE.
>
> Things like:
>
> ?? if(!is.null(x) && x > 0)
>
> If "x" were null then the second? condition would cause an error to be 
> thrown if you used "&" rather than "&&".
>
> In all (???) situations where "&&" works, then "&" works as well. 
> However it's a Good Idea to use the language as intended.

&& has short-circuit evaluation but also is intended for scalars. This 
is reflected by that non-scalar arguments lead to a runtime error with 
_R_CHECK_LENGTH_1_LOGIC2_=TRUE.

I use && in the code to indicate that I expect a scalar, and I want the 
short-circuit evaluation for scalars as I am used to if from other 
programming languages. I only use & when want element-wise operation on 
vectors, when & is for computation (e.g. of indices).

Best
Tomas
>
> It I'm missing some point here, please enlighten me.
>
> <SNIP>
>
> cheers,
>
> Rolf
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Mar  5 13:14:33 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 5 Mar 2020 13:14:33 +0100
Subject: [R-pkg-devel] [FORGED] Re: Help on Windows CRAN Check
In-Reply-To: <089da1d5-ce9c-db8b-ffbc-037d7734a769@auckland.ac.nz>
References: <CAJiVmSC0n37iLWMXRAmQpw9Yi=vOrFfj3eNffZYEvhHeRnWRNA@mail.gmail.com>
 <962216ce-9ed0-7b53-0ef6-cb5c5416e66b@gmail.com>
 <089da1d5-ce9c-db8b-ffbc-037d7734a769@auckland.ac.nz>
Message-ID: <f15c6457-41b1-a9a4-75a8-d4c4ec3091eb@statistik.tu-dortmund.de>



On 05.03.2020 09:45, Rolf Turner wrote:
> 
> On 5/03/20 9:04 pm, Tomas Kalibera wrote:
> 
>> On 3/5/20 4:26 AM, John Lawson wrote:
>>> I see this error on the CRAN Check report
> 
> <SNIP>
> 
>>> Fatal error: the condition has length > 1
>>
>> The problem is that the condition t1 == "I" & t2 == "(" of the if
>> statement in the code is not a scalar. Even though this has been allowed
>> in R historically, the first element has been used, it is almost always
>> a sign of coding error, so it is going to become a runtime error.
>>
>> So what one should do is fix the code to only use scalar conditions -
>> ensure t1, t2 are scalar, replace & by &&.
> 
> Perhaps I'm being even thicker than usual (imagine that!) 

Oh dear, but this time it is true...:


> but I don't 
> grok that last recommendation:? "replace & by &&".? It's usually 
> harmless but indicates a lack of understanding.? The "&&" operator 
> evaluates the second condition only if the first condition is TRUE.? It 

Right, and as the conditions are scalar, we never have to evaluate the 
2nd if the first is FALSE unless you do it for side effects.

So for logical operators on scalar logical vectors, one should prefer && 
and || for efficeincy reasons.

Best,
Uwe




> is useful (only) in setting where the second condition is meaningful 
> only when the first condition is TRUE.
> 
> Things like:
> 
>  ?? if(!is.null(x) && x > 0)
> 
> If "x" were null then the second? condition would cause an error to be 
> thrown if you used "&" rather than "&&".
> 
> In all (???) situations where "&&" works, then "&" works as well. 
> However it's a Good Idea to use the language as intended.
> 
> It I'm missing some point here, please enlighten me.
> 
> <SNIP>
> 
> cheers,
> 
> Rolf
>


From je||@jetton @end|ng |rom gm@||@com  Thu Mar  5 15:44:10 2020
From: je||@jetton @end|ng |rom gm@||@com (Jeff Jetton)
Date: Thu, 5 Mar 2020 08:44:10 -0600
Subject: [R-pkg-devel] [FORGED] Re: Help on Windows CRAN Check
In-Reply-To: <f15c6457-41b1-a9a4-75a8-d4c4ec3091eb@statistik.tu-dortmund.de>
References: <CAJiVmSC0n37iLWMXRAmQpw9Yi=vOrFfj3eNffZYEvhHeRnWRNA@mail.gmail.com>
 <962216ce-9ed0-7b53-0ef6-cb5c5416e66b@gmail.com>
 <089da1d5-ce9c-db8b-ffbc-037d7734a769@auckland.ac.nz>
 <f15c6457-41b1-a9a4-75a8-d4c4ec3091eb@statistik.tu-dortmund.de>
Message-ID: <CAGdE4XqcmzRhA8gGJ17dicKS95a1dn5efsCROjtVh9TBMQ7KDw@mail.gmail.com>

This is something that, by the way, I've always thought R got backwards. If
you want an operation to handle "one thing" against "one other thing"
(scalars), a single & or | seems like the obvious symbol for it. Whereas an
operation on "multiple things" (vectors) would be well-represented by a
multiple-character symbol like && or ||.

But as long as I remember that it's backwards, I can keep them sorted out.
:-)

 - Jeff

On Thu, Mar 5, 2020 at 6:14 AM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

>
>
> On 05.03.2020 09:45, Rolf Turner wrote:
> >
> > On 5/03/20 9:04 pm, Tomas Kalibera wrote:
> >
> >> On 3/5/20 4:26 AM, John Lawson wrote:
> >>> I see this error on the CRAN Check report
> >
> > <SNIP>
> >
> >>> Fatal error: the condition has length > 1
> >>
> >> The problem is that the condition t1 == "I" & t2 == "(" of the if
> >> statement in the code is not a scalar. Even though this has been allowed
> >> in R historically, the first element has been used, it is almost always
> >> a sign of coding error, so it is going to become a runtime error.
> >>
> >> So what one should do is fix the code to only use scalar conditions -
> >> ensure t1, t2 are scalar, replace & by &&.
> >
> > Perhaps I'm being even thicker than usual (imagine that!)
>
> Oh dear, but this time it is true...:
>
>
> > but I don't
> > grok that last recommendation:  "replace & by &&".  It's usually
> > harmless but indicates a lack of understanding.  The "&&" operator
> > evaluates the second condition only if the first condition is TRUE.  It
>
> Right, and as the conditions are scalar, we never have to evaluate the
> 2nd if the first is FALSE unless you do it for side effects.
>
> So for logical operators on scalar logical vectors, one should prefer &&
> and || for efficeincy reasons.
>
> Best,
> Uwe
>
>
>
>
> > is useful (only) in setting where the second condition is meaningful
> > only when the first condition is TRUE.
> >
> > Things like:
> >
> >     if(!is.null(x) && x > 0)
> >
> > If "x" were null then the second  condition would cause an error to be
> > thrown if you used "&" rather than "&&".
> >
> > In all (???) situations where "&&" works, then "&" works as well.
> > However it's a Good Idea to use the language as intended.
> >
> > It I'm missing some point here, please enlighten me.
> >
> > <SNIP>
> >
> > cheers,
> >
> > Rolf
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From pd@|gd @end|ng |rom gm@||@com  Thu Mar  5 16:28:32 2020
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Thu, 5 Mar 2020 16:28:32 +0100
Subject: [R-pkg-devel] [FORGED] Re: Help on Windows CRAN Check
In-Reply-To: <CAGdE4XqcmzRhA8gGJ17dicKS95a1dn5efsCROjtVh9TBMQ7KDw@mail.gmail.com>
References: <CAJiVmSC0n37iLWMXRAmQpw9Yi=vOrFfj3eNffZYEvhHeRnWRNA@mail.gmail.com>
 <962216ce-9ed0-7b53-0ef6-cb5c5416e66b@gmail.com>
 <089da1d5-ce9c-db8b-ffbc-037d7734a769@auckland.ac.nz>
 <f15c6457-41b1-a9a4-75a8-d4c4ec3091eb@statistik.tu-dortmund.de>
 <CAGdE4XqcmzRhA8gGJ17dicKS95a1dn5efsCROjtVh9TBMQ7KDw@mail.gmail.com>
Message-ID: <47EADB30-EB57-432C-A317-3651D6288CE0@gmail.com>

Well, it originates in C, where & and | are bitwise operators.

-pd

> On 5 Mar 2020, at 15:44 , Jeff Jetton <jeff.jetton at gmail.com> wrote:
> 
> This is something that, by the way, I've always thought R got backwards. If
> you want an operation to handle "one thing" against "one other thing"
> (scalars), a single & or | seems like the obvious symbol for it. Whereas an
> operation on "multiple things" (vectors) would be well-represented by a
> multiple-character symbol like && or ||.
> 
> But as long as I remember that it's backwards, I can keep them sorted out.
> :-)
> 
> - Jeff
> 
> On Thu, Mar 5, 2020 at 6:14 AM Uwe Ligges <ligges at statistik.tu-dortmund.de>
> wrote:
> 
>> 
>> 
>> On 05.03.2020 09:45, Rolf Turner wrote:
>>> 
>>> On 5/03/20 9:04 pm, Tomas Kalibera wrote:
>>> 
>>>> On 3/5/20 4:26 AM, John Lawson wrote:
>>>>> I see this error on the CRAN Check report
>>> 
>>> <SNIP>
>>> 
>>>>> Fatal error: the condition has length > 1
>>>> 
>>>> The problem is that the condition t1 == "I" & t2 == "(" of the if
>>>> statement in the code is not a scalar. Even though this has been allowed
>>>> in R historically, the first element has been used, it is almost always
>>>> a sign of coding error, so it is going to become a runtime error.
>>>> 
>>>> So what one should do is fix the code to only use scalar conditions -
>>>> ensure t1, t2 are scalar, replace & by &&.
>>> 
>>> Perhaps I'm being even thicker than usual (imagine that!)
>> 
>> Oh dear, but this time it is true...:
>> 
>> 
>>> but I don't
>>> grok that last recommendation:  "replace & by &&".  It's usually
>>> harmless but indicates a lack of understanding.  The "&&" operator
>>> evaluates the second condition only if the first condition is TRUE.  It
>> 
>> Right, and as the conditions are scalar, we never have to evaluate the
>> 2nd if the first is FALSE unless you do it for side effects.
>> 
>> So for logical operators on scalar logical vectors, one should prefer &&
>> and || for efficeincy reasons.
>> 
>> Best,
>> Uwe
>> 
>> 
>> 
>> 
>>> is useful (only) in setting where the second condition is meaningful
>>> only when the first condition is TRUE.
>>> 
>>> Things like:
>>> 
>>>    if(!is.null(x) && x > 0)
>>> 
>>> If "x" were null then the second  condition would cause an error to be
>>> thrown if you used "&" rather than "&&".
>>> 
>>> In all (???) situations where "&&" works, then "&" works as well.
>>> However it's a Good Idea to use the language as intended.
>>> 
>>> It I'm missing some point here, please enlighten me.
>>> 
>>> <SNIP>
>>> 
>>> cheers,
>>> 
>>> Rolf
>>> 
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Mar  5 22:34:44 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Fri, 6 Mar 2020 10:34:44 +1300
Subject: [R-pkg-devel] Winbuilder queues jammed again?
Message-ID: <9ffda59c-69e6-ebeb-9f26-7fac6991e03e@auckland.ac.nz>


Sorry to be a pest, but I submitted a package to winbuilder more than 24 
hours ago, and nothing has come back to me.  For a while (a few days 
ago) I was getting about a 20 minute turnaround.

One gets dependant on facilities such as winbuilder and gets frustrated 
when they don't perform quite as expected.

I know this sounds demanding (in respect of a free service that is 
provided entirely due to Uwe's good graces), but, said he plaintively, 
is there any way that some sort of indication of the expected wait time 
could be made available?  Or an indication of the length of the queue,
or something like that?

Even an indication that one's submission is still in the queue and 
hasn't disappeared into a black hole in cyberspace, would be reassuring.

Apropos of the latter --- I say that I submitted a package, but in my 
state of advanced senility I can't be sure.  Maybe I just *intended* to, 
but then forgot, or messed up the submission procedure, or buggered 
something else up.  There seems to be no way to check that I really did 
make a submission.  Such a facility would be, uh, nice.  Said he, 
plaintively.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From bbo|ker @end|ng |rom gm@||@com  Thu Mar  5 23:14:26 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Thu, 5 Mar 2020 17:14:26 -0500
Subject: [R-pkg-devel] Winbuilder queues jammed again?
In-Reply-To: <9ffda59c-69e6-ebeb-9f26-7fac6991e03e@auckland.ac.nz>
References: <9ffda59c-69e6-ebeb-9f26-7fac6991e03e@auckland.ac.nz>
Message-ID: <CABghstT9O1UPq-fjcaauB22Es0XMV+qUFR62zyxUeaedrfY2xA@mail.gmail.com>

Maybe there's something queriable similar to the CRAN queue?  (In an
ideal world this could even be incorporated into F Michonneau's
foghorn package ...)

   It's probably been suggested already in this thread, but perhaps
rhub would work for you as an alternative?

On Thu, Mar 5, 2020 at 4:35 PM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>
> Sorry to be a pest, but I submitted a package to winbuilder more than 24
> hours ago, and nothing has come back to me.  For a while (a few days
> ago) I was getting about a 20 minute turnaround.
>
> One gets dependant on facilities such as winbuilder and gets frustrated
> when they don't perform quite as expected.
>
> I know this sounds demanding (in respect of a free service that is
> provided entirely due to Uwe's good graces), but, said he plaintively,
> is there any way that some sort of indication of the expected wait time
> could be made available?  Or an indication of the length of the queue,
> or something like that?
>
> Even an indication that one's submission is still in the queue and
> hasn't disappeared into a black hole in cyberspace, would be reassuring.
>
> Apropos of the latter --- I say that I submitted a package, but in my
> state of advanced senility I can't be sure.  Maybe I just *intended* to,
> but then forgot, or messed up the submission procedure, or buggered
> something else up.  There seems to be no way to check that I really did
> make a submission.  Such a facility would be, uh, nice.  Said he,
> plaintively.
>
> cheers,
>
> Rolf Turner
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From henr|k@bengt@@on @end|ng |rom gm@||@com  Thu Mar  5 23:41:01 2020
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Thu, 5 Mar 2020 14:41:01 -0800
Subject: [R-pkg-devel] Winbuilder queues jammed again?
In-Reply-To: <CABghstT9O1UPq-fjcaauB22Es0XMV+qUFR62zyxUeaedrfY2xA@mail.gmail.com>
References: <9ffda59c-69e6-ebeb-9f26-7fac6991e03e@auckland.ac.nz>
 <CABghstT9O1UPq-fjcaauB22Es0XMV+qUFR62zyxUeaedrfY2xA@mail.gmail.com>
Message-ID: <CAFDcVCSVM=ZTqfvmUmJ+EoqfV=ybaeYBAZp0hNux7VioOxhYuQ@mail.gmail.com>

1. I'd guess it helps Uwe a bit you clarify exactly which queue you think
is stuck - otherwise he has to check them all. They're independent.

2. You can look at the different win-builder queues yourself via ftp, see
https://stat.ethz.ch/pipermail/r-package-devel/2020q1/005098.html

/Henrik

On Thu, Mar 5, 2020, 14:14 Ben Bolker <bbolker at gmail.com> wrote:

> Maybe there's something queriable similar to the CRAN queue?  (In an
> ideal world this could even be incorporated into F Michonneau's
> foghorn package ...)
>
>    It's probably been suggested already in this thread, but perhaps
> rhub would work for you as an alternative?
>
> On Thu, Mar 5, 2020 at 4:35 PM Rolf Turner <r.turner at auckland.ac.nz>
> wrote:
> >
> >
> > Sorry to be a pest, but I submitted a package to winbuilder more than 24
> > hours ago, and nothing has come back to me.  For a while (a few days
> > ago) I was getting about a 20 minute turnaround.
> >
> > One gets dependant on facilities such as winbuilder and gets frustrated
> > when they don't perform quite as expected.
> >
> > I know this sounds demanding (in respect of a free service that is
> > provided entirely due to Uwe's good graces), but, said he plaintively,
> > is there any way that some sort of indication of the expected wait time
> > could be made available?  Or an indication of the length of the queue,
> > or something like that?
> >
> > Even an indication that one's submission is still in the queue and
> > hasn't disappeared into a black hole in cyberspace, would be reassuring.
> >
> > Apropos of the latter --- I say that I submitted a package, but in my
> > state of advanced senility I can't be sure.  Maybe I just *intended* to,
> > but then forgot, or messed up the submission procedure, or buggered
> > something else up.  There seems to be no way to check that I really did
> > make a submission.  Such a facility would be, uh, nice.  Said he,
> > plaintively.
> >
> > cheers,
> >
> > Rolf Turner
> >
> > --
> > Honorary Research Fellow
> > Department of Statistics
> > University of Auckland
> > Phone: +64-9-373-7599 ext. 88276
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Fri Mar  6 00:30:27 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Fri, 6 Mar 2020 12:30:27 +1300
Subject: [R-pkg-devel] Winbuilder queues jammed again?
In-Reply-To: <CAFDcVCSVM=ZTqfvmUmJ+EoqfV=ybaeYBAZp0hNux7VioOxhYuQ@mail.gmail.com>
References: <9ffda59c-69e6-ebeb-9f26-7fac6991e03e@auckland.ac.nz>
 <CABghstT9O1UPq-fjcaauB22Es0XMV+qUFR62zyxUeaedrfY2xA@mail.gmail.com>
 <CAFDcVCSVM=ZTqfvmUmJ+EoqfV=ybaeYBAZp0hNux7VioOxhYuQ@mail.gmail.com>
Message-ID: <e34a2e92-1160-916a-01c6-8ef4107d81ce@auckland.ac.nz>


On 6/03/20 11:41 am, Henrik Bengtsson wrote:

> 1. I'd guess it helps Uwe a bit you clarify exactly which queue you 
> think is stuck - otherwise he has to check them all. They're independent.

Yeah.  Sorry.  It's the R-release queue.

> 2. You can look at the different win-builder queues yourself via ftp, 
> see https://stat.ethz.ch/pipermail/r-package-devel/2020q1/005098.html

That could be useful information, but when I tried just now I could not 
get curl to work:

> curl -s ftp://win-builder.r-project.org/R-release/
> curl: /usr/local/lib/libcurl.so.4: no version information available (required by curl)
> curl: relocation error: curl: symbol curl_mime_headers version CURL_OPENSSL_4 not defined in file libcurl.so.4 with link time reference

I then tried

    sudo apt update
    sudo apt upgrade
    sudo apt install curl

according to some instructions that I found on the web.  It told me "

> curl is already the newest version (7.58.0-2ubuntu3.8).
> 0 to upgrade, 0 to newly install, 0 to remove and 0 not to upgrade.

I then did

curl --version

and got

> curl: /usr/local/lib/libcurl.so.4: no version information available (required by curl)
> curl: relocation error: curl: symbol curl_mime_headers version CURL_OPENSSL_4 not defined in file libcurl.so.4 with link time reference

I've Googled about a bit and found various references, but nothing that 
I could understand or use.

I don't understand what's going on/wrong.  Nor do I understand why the 
Computer Gods hate me! :-)

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From brod|e@g@@|@m @end|ng |rom y@hoo@com  Fri Mar  6 00:32:35 2020
From: brod|e@g@@|@m @end|ng |rom y@hoo@com (brodie gaslam)
Date: Thu, 5 Mar 2020 23:32:35 +0000 (UTC)
Subject: [R-pkg-devel] Winbuilder queues jammed again?
In-Reply-To: <e34a2e92-1160-916a-01c6-8ef4107d81ce@auckland.ac.nz>
References: <9ffda59c-69e6-ebeb-9f26-7fac6991e03e@auckland.ac.nz>
 <CABghstT9O1UPq-fjcaauB22Es0XMV+qUFR62zyxUeaedrfY2xA@mail.gmail.com>
 <CAFDcVCSVM=ZTqfvmUmJ+EoqfV=ybaeYBAZp0hNux7VioOxhYuQ@mail.gmail.com>
 <e34a2e92-1160-916a-01c6-8ef4107d81ce@auckland.ac.nz>
Message-ID: <401081481.5187054.1583451155679@mail.yahoo.com>

You can also just paste the ftp link into your browser.






On Thursday, March 5, 2020, 6:31:03 PM EST, Rolf Turner <r.turner at auckland.ac.nz> wrote: 






On 6/03/20 11:41 am, Henrik Bengtsson wrote:

> 1. I'd guess it helps Uwe a bit you clarify exactly which queue you 
> think is stuck - otherwise he has to check them all. They're independent.

Yeah.? Sorry.? It's the R-release queue.

> 2. You can look at the different win-builder queues yourself via ftp, 
> see https://stat.ethz.ch/pipermail/r-package-devel/2020q1/005098.html

That could be useful information, but when I tried just now I could not 
get curl to work:

> curl -s ftp://win-builder.r-project.org/R-release/
> curl: /usr/local/lib/libcurl.so.4: no version information available (required by curl)
> curl: relocation error: curl: symbol curl_mime_headers version CURL_OPENSSL_4 not defined in file libcurl.so.4 with link time reference

I then tried

? ? sudo apt update
? ? sudo apt upgrade
? ? sudo apt install curl

according to some instructions that I found on the web.? It told me "

> curl is already the newest version (7.58.0-2ubuntu3.8).
> 0 to upgrade, 0 to newly install, 0 to remove and 0 not to upgrade.

I then did

curl --version

and got

> curl: /usr/local/lib/libcurl.so.4: no version information available (required by curl)
> curl: relocation error: curl: symbol curl_mime_headers version CURL_OPENSSL_4 not defined in file libcurl.so.4 with link time reference

I've Googled about a bit and found various references, but nothing that 
I could understand or use.

I don't understand what's going on/wrong.? Nor do I understand why the 
Computer Gods hate me! :-)


cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel


From r@turner @end|ng |rom @uck|@nd@@c@nz  Fri Mar  6 00:33:10 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Fri, 6 Mar 2020 12:33:10 +1300
Subject: [R-pkg-devel] Winbuilder queues jammed again?
In-Reply-To: <CABghstT9O1UPq-fjcaauB22Es0XMV+qUFR62zyxUeaedrfY2xA@mail.gmail.com>
References: <9ffda59c-69e6-ebeb-9f26-7fac6991e03e@auckland.ac.nz>
 <CABghstT9O1UPq-fjcaauB22Es0XMV+qUFR62zyxUeaedrfY2xA@mail.gmail.com>
Message-ID: <691a849b-3bed-f4ef-5b70-a024cc1408b3@auckland.ac.nz>


On 6/03/20 11:14 am, Ben Bolker wrote:

<SNIP>

> 
> It's probably been suggested already in this thread, but perhaps
> rhub would work for you as an alternative?

<SNIP>

Quite possibly, but I have no real idea what "rhub" is.  I've seen it 
referred to many times but the references always assume that you know 
all about it already.

I'll try to investigate.  Thanks for the suggestion.

cheers,

Rolf


-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From roy@mende|@@ohn @end|ng |rom no@@@gov  Fri Mar  6 00:35:04 2020
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Thu, 5 Mar 2020 15:35:04 -0800
Subject: [R-pkg-devel] Winbuilder queues jammed again?
In-Reply-To: <691a849b-3bed-f4ef-5b70-a024cc1408b3@auckland.ac.nz>
References: <9ffda59c-69e6-ebeb-9f26-7fac6991e03e@auckland.ac.nz>
 <CABghstT9O1UPq-fjcaauB22Es0XMV+qUFR62zyxUeaedrfY2xA@mail.gmail.com>
 <691a849b-3bed-f4ef-5b70-a024cc1408b3@auckland.ac.nz>
Message-ID: <B1F8F95E-0D41-4EDD-BE33-2BBC853CCAE9@noaa.gov>

Download the 'rhub' package.  Then submission to 'rhub' is one easy command.

HTH,

-Roy

> On Mar 5, 2020, at 3:33 PM, Rolf Turner <r.turner at auckland.ac.nz> wrote:
> 
> 
> On 6/03/20 11:14 am, Ben Bolker wrote:
> 
> <SNIP>
> 
>> It's probably been suggested already in this thread, but perhaps
>> rhub would work for you as an alternative?
> 
> <SNIP>
> 
> Quite possibly, but I have no real idea what "rhub" is.  I've seen it referred to many times but the references always assume that you know all about it already.
> 
> I'll try to investigate.  Thanks for the suggestion.
> 
> cheers,
> 
> Rolf
> 
> 
> -- 
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From |@w@onj@|7net @end|ng |rom gm@||@com  Fri Mar  6 04:34:00 2020
From: |@w@onj@|7net @end|ng |rom gm@||@com (John Lawson)
Date: Thu, 5 Mar 2020 20:34:00 -0700
Subject: [R-pkg-devel] Help on Windows CRAN Check
Message-ID: <CAJiVmSB56pVtvOGAswr+=vDYKvmnt=VkxuFex0UOERWUTvetPA@mail.gmail.com>

I see this error on windows CRAN Check

--- failure: the condition has length > 1 ---
 --- srcref ---
:
 --- package (from environment) ---
daewr
 --- call from context ---
ihstep(y, x, m, c)
 --- call from argument ---
if (t1 == "I" & t2 == "(") {
    iquad = TRUE
}

t1 and t2 are both characters of length 1, therefore I assume they are
scalars. The check on my own computer or R forge gives no errors. When
I change if(t1 == "I" & t2 =="(") {iquad=TRUE} to

if(t1 == "I" && t2 =="(") {iquad=TRUE}

I get the following error when I try the check on my own computer

 ----------- FAILURE REPORT --------------
 --- failure: length > 1 in coercion to logical ---
 --- srcref ---
:
 --- package (from environment) ---
daewr
 --- call from context ---
ihstep(y, x, m, c)
 --- call from argument ---
t1 == "I" && t2 == "("
 --- R stacktrace ---
where 1: ihstep(y, x, m, c)
where 2: eval(expr, pf)
where 3: eval(expr, pf)
where 4: withVisible(eval(expr, pf))
where 5: evalVis(expr)
where 6: capture.output(res <- ihstep(y, x, m, c))
where 7: withCallingHandlers(expr, warning = function(w)
invokeRestart("muffleWarning"))

I am not sure what this means. Using one &, I am able to check and
build the package on my computer or R forge but not on CRAN. When
using two && I can't check and build on my own computer. Any advice on
what to do would be greatly appreciated.

John Lawson

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Fri Mar  6 05:21:47 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Fri, 6 Mar 2020 17:21:47 +1300
Subject: [R-pkg-devel] Building Windoze packages using rhub.
Message-ID: <a2dfd6f8-de25-e1cb-12f2-4a7b238dd895@auckland.ac.nz>


Recently I complained about the fact that it was taking forever for 
packages to come back to me from the winbuilder facility that Uwe Ligges 
so kindly provides.

Ben Bolker suggested that I use "rhub" instead.  I responded that I'd 
*heard* of rhub but had no real idea what it was nor how to use it.  Roy 
Mendelssohn chimed in with "Download the 'rhub' package.  Then 
submission to 'rhub' is one easy command."

Well, "Hah!" I say to that!!! :-) Easy perhaps if you are not a Bear of 
Very Little Brain, as I am.  However it seems to be do-able, even for a
Bear of Very Little Brain, and I managed (I think!!!) to get it to work.

Since I found the procedure a bit opaque, I thought I would set out step 
by step instructions, that perhaps others might find useful.

(1) Install rhub. E.g. in R issue the command

       install.packages("rhub",lib=<whatever>)

(2) Load rhub:  library(rhub)

(3) Validate your email address: validate_email()

You get prompted for an email address, and then asked for a verification 
code.  That code gets emailed to you; copy and paste it in and you're
good to go.

(4) Then (and this is one of the things that foxed me) you invoke the 
*check()* function from the rhub package.  (For the love of Pete, I 
don't want to check the <expletive deleted> package, I want to *build* 
it!!!  But never mind.)  The simplest thing to do is to make sure your 
working directory is that in which the source package lives.  Then issue 
the command

    xxx <- check("blah_1.1-1.tar.gz",platform="windows-x86_64-release")

where of course "blah_1.1-1.tar.gz" is the name of the tarball holding 
your source package.

Wait a while --- the function keeps you pretty well informed of what 
it's doing.

Finally it completes, and you see that xxx is an object of class 
"rhub_check" "R6" that prints as:

> ?? blah 1.1-1: OK
> 
>   Build ID:   blah_1.1-1.tar.gz-3b30749f06644fd4833d02da6ec895fb
>   Platform:   Windows Server 2008 R2 SP1, R-release, 32/64 bit
>   Submitted:  3h 56m 39.3s ago
>   Build time: 11m 54.2s
> 
> 0 errors ? | 0 warnings ? | 0 notes ?

(5) Now what?  Here's where I really got foxed.  I want a Windoze 
binary.  Where the <expletive deleted> is it?

Then I noticed that I'd got an email.  It was headed "blah 1.1-1 OK" and 
contained essentially the same material as did xxx.  But it also had:

> See the full build log: HTML, text, artifacts. 

This did not look at all promising; I did not want the <expletive 
deleted> build log, nor any "artefacts", but I clicked on "artefacts" 
out of curiosity.  And *this*, mirabile dictu, took me to a page from
which I could download blah_1.1-1.zip, and this was indeed the required 
Windoze binary.

Ta-da!!!  Victory.  I hope that those who are as mentally handicapped as 
I am find the foregoing useful.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Fri Mar  6 08:47:59 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 6 Mar 2020 08:47:59 +0100
Subject: [R-pkg-devel] Help on Windows CRAN Check
In-Reply-To: <CAJiVmSB56pVtvOGAswr+=vDYKvmnt=VkxuFex0UOERWUTvetPA@mail.gmail.com>
References: <CAJiVmSB56pVtvOGAswr+=vDYKvmnt=VkxuFex0UOERWUTvetPA@mail.gmail.com>
Message-ID: <24162.47.690029.456442@stat.math.ethz.ch>

>>>>> John Lawson 
>>>>>     on Thu, 5 Mar 2020 20:34:00 -0700 writes:

    > I see this error on windows CRAN Check
    > --- failure: the condition has length > 1 ---
    > --- srcref ---
    > :
    > --- package (from environment) ---
    > daewr
    > --- call from context ---
    > ihstep(y, x, m, c)
    > --- call from argument ---
    > if (t1 == "I" & t2 == "(") {
    > iquad = TRUE
    > }

    > t1 and t2 are both characters of length 1, therefore I assume they are
    > scalars. The check on my own computer or R forge gives no errors. When
    > I change if(t1 == "I" & t2 =="(") {iquad=TRUE} to

    > if(t1 == "I" && t2 =="(") {iquad=TRUE}

    > I get the following error when I try the check on my own computer

    > ----------- FAILURE REPORT --------------
    > --- failure: length > 1 in coercion to logical ---
    > --- srcref ---
    > :
    > --- package (from environment) ---
    > daewr
    > --- call from context ---
    > ihstep(y, x, m, c)
    > --- call from argument ---
    > t1 == "I" && t2 == "("
    > --- R stacktrace ---
    > where 1: ihstep(y, x, m, c)
    > where 2: eval(expr, pf)
    > where 3: eval(expr, pf)
    > where 4: withVisible(eval(expr, pf))
    > where 5: evalVis(expr)
    > where 6: capture.output(res <- ihstep(y, x, m, c))
    > where 7: withCallingHandlers(expr, warning = function(w)
    > invokeRestart("muffleWarning"))

    > I am not sure what this means. Using one &, I am able to check and
    > build the package on my computer or R forge but not on CRAN. When
    > using two && I can't check and build on my own computer. Any advice on
    > what to do would be greatly appreciated.

Well, to me it seems clear that your claim

  "t1 and t2 are both characters of length 1, therefore ......"

must be wrong sometimes and that's why you these problems:
In both cases, the respective error is triggered *if and only if*
at least one of t1 or t2 is *not* of length 1.

Martin


From c@@rd|@g@bor @end|ng |rom gm@||@com  Fri Mar  6 10:29:05 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Fri, 6 Mar 2020 09:29:05 +0000
Subject: [R-pkg-devel] Building Windoze packages using rhub.
In-Reply-To: <a2dfd6f8-de25-e1cb-12f2-4a7b238dd895@auckland.ac.nz>
References: <a2dfd6f8-de25-e1cb-12f2-4a7b238dd895@auckland.ac.nz>
Message-ID: <CABtg=K=ENcnXPd6rnVjjgwmfdV+b5W5gN5k=RHpk7BU5fZWnug@mail.gmail.com>

Thanks for the great walk-through!

For reference, if you want to know more about R-hub, this is the
documentation: https://docs.r-hub.io/

Best,
Gabor

On Fri, Mar 6, 2020 at 4:22 AM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>
> Recently I complained about the fact that it was taking forever for
> packages to come back to me from the winbuilder facility that Uwe Ligges
> so kindly provides.
>
> Ben Bolker suggested that I use "rhub" instead.  I responded that I'd
> *heard* of rhub but had no real idea what it was nor how to use it.  Roy
> Mendelssohn chimed in with "Download the 'rhub' package.  Then
> submission to 'rhub' is one easy command."
>
> Well, "Hah!" I say to that!!! :-) Easy perhaps if you are not a Bear of
> Very Little Brain, as I am.  However it seems to be do-able, even for a
> Bear of Very Little Brain, and I managed (I think!!!) to get it to work.
>
> Since I found the procedure a bit opaque, I thought I would set out step
> by step instructions, that perhaps others might find useful.
>
> (1) Install rhub. E.g. in R issue the command
>
>        install.packages("rhub",lib=<whatever>)
>
> (2) Load rhub:  library(rhub)
>
> (3) Validate your email address: validate_email()
>
> You get prompted for an email address, and then asked for a verification
> code.  That code gets emailed to you; copy and paste it in and you're
> good to go.
>
> (4) Then (and this is one of the things that foxed me) you invoke the
> *check()* function from the rhub package.  (For the love of Pete, I
> don't want to check the <expletive deleted> package, I want to *build*
> it!!!  But never mind.)  The simplest thing to do is to make sure your
> working directory is that in which the source package lives.  Then issue
> the command
>
>     xxx <- check("blah_1.1-1.tar.gz",platform="windows-x86_64-release")
>
> where of course "blah_1.1-1.tar.gz" is the name of the tarball holding
> your source package.
>
> Wait a while --- the function keeps you pretty well informed of what
> it's doing.
>
> Finally it completes, and you see that xxx is an object of class
> "rhub_check" "R6" that prints as:
>
> > ?? blah 1.1-1: OK
> >
> >   Build ID:   blah_1.1-1.tar.gz-3b30749f06644fd4833d02da6ec895fb
> >   Platform:   Windows Server 2008 R2 SP1, R-release, 32/64 bit
> >   Submitted:  3h 56m 39.3s ago
> >   Build time: 11m 54.2s
> >
> > 0 errors ? | 0 warnings ? | 0 notes ?
>
> (5) Now what?  Here's where I really got foxed.  I want a Windoze
> binary.  Where the <expletive deleted> is it?
>
> Then I noticed that I'd got an email.  It was headed "blah 1.1-1 OK" and
> contained essentially the same material as did xxx.  But it also had:
>
> > See the full build log: HTML, text, artifacts.
>
> This did not look at all promising; I did not want the <expletive
> deleted> build log, nor any "artefacts", but I clicked on "artefacts"
> out of curiosity.  And *this*, mirabile dictu, took me to a page from
> which I could download blah_1.1-1.zip, and this was indeed the required
> Windoze binary.
>
> Ta-da!!!  Victory.  I hope that those who are as mentally handicapped as
> I am find the foregoing useful.
>
> cheers,
>
> Rolf Turner
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From jhe@@e @end|ng |rom @on@type@com  Sat Mar  7 22:55:24 2020
From: jhe@@e @end|ng |rom @on@type@com (Jeffry Hesse)
Date: Sat, 7 Mar 2020 12:55:24 -0900
Subject: [R-pkg-devel] First R package, want to release to CRAN,
 have some questions about R CMD check and README.md
Message-ID: <CAHpWApdnNeGmnOtGGKzqCHRJD0zE95pW8JAmocP+6ujZ8R+FyQ@mail.gmail.com>

Hi there!

I and a few others have been working on an R package we'd like to get on
CRAN. The package itself checks R dependencies to see if they have a known
CWE or CVE attached to them, and is intended to help R developers get a
better understanding on the quality of the dependencies they use!

An example of it running is here:

https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck/00install.out

And example of the output of R CMD check is here:

https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck/00check.log

I have had some confusing experiences thus far with a README.md file, and
excluded it in our .Rbuildignore, because I kept getting:

* checking top-level files ... WARNING
Conversion of ?README.md? failed:
"template" (line 18, column 17):
unexpected "("
expecting "." or "$"

This error is very cryptic to me, and I couldn't figure it out after a
bunch of wonderful googling :)

The README.rmd file is here:
https://github.com/sonatype-nexus-community/oysteR/blob/master/README.Rmd

Output README.md generated with rmarkdown is here:
https://raw.githubusercontent.com/sonatype-nexus-community/oysteR/master/README.md

Ideally I think it would be nice to include it in our R package, but that
WARNING keeps scaring me :)

If anyone has any insight into the cause of that warning, would love to
know.

Any other feedback on the package would be great too! I'm not an R
developer by trade (but love it), and this is my first go at this. Figured
I'd reach out here to hopefully help save some back and forth between CRAN
maintainers when I go to submit.

CODE: https://github.com/sonatype-nexus-community/oysteR

Also, we are actively looking for contributors that want to help out, so if
this project interests you, come on over!

Cheers, and thanks in advance for any help!

-- 
[image: Sonatype] <http://sonatype.com>
*Jeffry Hesse*
Product Manager - Developer Experience

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Mar  7 23:55:28 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 07 Mar 2020 14:55:28 -0800
Subject: [R-pkg-devel] First R package, want to release to CRAN,
 have some questions about R CMD check and README.md
In-Reply-To: <CAHpWApdnNeGmnOtGGKzqCHRJD0zE95pW8JAmocP+6ujZ8R+FyQ@mail.gmail.com>
References: <CAHpWApdnNeGmnOtGGKzqCHRJD0zE95pW8JAmocP+6ujZ8R+FyQ@mail.gmail.com>
Message-ID: <B7CBFA4E-94E9-47F0-A937-FE3A7A0EA677@dcn.davis.ca.us>

README.md is a github convention... do not try to treat it like part of the R package documentation. Instead, list it in your .Rbuildignore file and use it to inform developers how to change the package and to direct (potential) users browsing the GitHub repo to read the more conventional R documentation of vignettes.

On March 7, 2020 1:55:24 PM PST, Jeffry Hesse <jhesse at sonatype.com> wrote:
>Hi there!
>
>I and a few others have been working on an R package we'd like to get
>on
>CRAN. The package itself checks R dependencies to see if they have a
>known
>CWE or CVE attached to them, and is intended to help R developers get a
>better understanding on the quality of the dependencies they use!
>
>An example of it running is here:
>
>https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck/00install.out
>
>And example of the output of R CMD check is here:
>
>https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck/00check.log
>
>I have had some confusing experiences thus far with a README.md file,
>and
>excluded it in our .Rbuildignore, because I kept getting:
>
>* checking top-level files ... WARNING
>Conversion of ?README.md? failed:
>"template" (line 18, column 17):
>unexpected "("
>expecting "." or "$"
>
>This error is very cryptic to me, and I couldn't figure it out after a
>bunch of wonderful googling :)
>
>The README.rmd file is here:
>https://github.com/sonatype-nexus-community/oysteR/blob/master/README.Rmd
>
>Output README.md generated with rmarkdown is here:
>https://raw.githubusercontent.com/sonatype-nexus-community/oysteR/master/README.md
>
>Ideally I think it would be nice to include it in our R package, but
>that
>WARNING keeps scaring me :)
>
>If anyone has any insight into the cause of that warning, would love to
>know.
>
>Any other feedback on the package would be great too! I'm not an R
>developer by trade (but love it), and this is my first go at this.
>Figured
>I'd reach out here to hopefully help save some back and forth between
>CRAN
>maintainers when I go to submit.
>
>CODE: https://github.com/sonatype-nexus-community/oysteR
>
>Also, we are actively looking for contributors that want to help out,
>so if
>this project interests you, come on over!
>
>Cheers, and thanks in advance for any help!

-- 
Sent from my phone. Please excuse my brevity.


From jhe@@e @end|ng |rom @on@type@com  Sun Mar  8 00:05:01 2020
From: jhe@@e @end|ng |rom @on@type@com (Jeffry Hesse)
Date: Sat, 7 Mar 2020 14:05:01 -0900
Subject: [R-pkg-devel] First R package, want to release to CRAN,
 have some questions about R CMD check and README.md
In-Reply-To: <B7CBFA4E-94E9-47F0-A937-FE3A7A0EA677@dcn.davis.ca.us>
References: <CAHpWApdnNeGmnOtGGKzqCHRJD0zE95pW8JAmocP+6ujZ8R+FyQ@mail.gmail.com>
 <B7CBFA4E-94E9-47F0-A937-FE3A7A0EA677@dcn.davis.ca.us>
Message-ID: <CAHpWApfrkjnDymzwrGhg3cW7yQG8AVRaQ0jtTCJtSTC6TfoKWA@mail.gmail.com>

Good to know!

Right now we are using the README.rmd file to create the README.md, I
imagine we'd create something akin to oysteR.rmd to create the vignette?
The documentation on publishing to CRAN is great, but it's hard to tell
what a best practice is in this area. Also are vignettes strongly suggested
or mandatory? R CMD check is not failing for us right now without having
them, hence the question!

Appreciate the help!

On Sat, Mar 7, 2020 at 1:55 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> README.md is a github convention... do not try to treat it like part of
> the R package documentation. Instead, list it in your .Rbuildignore file
> and use it to inform developers how to change the package and to direct
> (potential) users browsing the GitHub repo to read the more conventional R
> documentation of vignettes.
>
> On March 7, 2020 1:55:24 PM PST, Jeffry Hesse <jhesse at sonatype.com> wrote:
> >Hi there!
> >
> >I and a few others have been working on an R package we'd like to get
> >on
> >CRAN. The package itself checks R dependencies to see if they have a
> >known
> >CWE or CVE attached to them, and is intended to help R developers get a
> >better understanding on the quality of the dependencies they use!
> >
> >An example of it running is here:
> >
> >
> https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck/00install.out
> >
> >And example of the output of R CMD check is here:
> >
> >
> https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck/00check.log
> >
> >I have had some confusing experiences thus far with a README.md file,
> >and
> >excluded it in our .Rbuildignore, because I kept getting:
> >
> >* checking top-level files ... WARNING
> >Conversion of ?README.md? failed:
> >"template" (line 18, column 17):
> >unexpected "("
> >expecting "." or "$"
> >
> >This error is very cryptic to me, and I couldn't figure it out after a
> >bunch of wonderful googling :)
> >
> >The README.rmd file is here:
> >https://github.com/sonatype-nexus-community/oysteR/blob/master/README.Rmd
> >
> >Output README.md generated with rmarkdown is here:
> >
> https://raw.githubusercontent.com/sonatype-nexus-community/oysteR/master/README.md
> >
> >Ideally I think it would be nice to include it in our R package, but
> >that
> >WARNING keeps scaring me :)
> >
> >If anyone has any insight into the cause of that warning, would love to
> >know.
> >
> >Any other feedback on the package would be great too! I'm not an R
> >developer by trade (but love it), and this is my first go at this.
> >Figured
> >I'd reach out here to hopefully help save some back and forth between
> >CRAN
> >maintainers when I go to submit.
> >
> >CODE: https://github.com/sonatype-nexus-community/oysteR
> >
> >Also, we are actively looking for contributors that want to help out,
> >so if
> >this project interests you, come on over!
> >
> >Cheers, and thanks in advance for any help!
>
> --
> Sent from my phone. Please excuse my brevity.
>


-- 
[image: Sonatype] <http://sonatype.com>
*Jeffry Hesse*
Product Person - Community
Phone: 202.821.5272

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Sun Mar  8 00:18:31 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sat, 7 Mar 2020 18:18:31 -0500
Subject: [R-pkg-devel] First R package, want to release to CRAN,
 have some questions about R CMD check and README.md
In-Reply-To: <CAHpWApfrkjnDymzwrGhg3cW7yQG8AVRaQ0jtTCJtSTC6TfoKWA@mail.gmail.com>
References: <CAHpWApdnNeGmnOtGGKzqCHRJD0zE95pW8JAmocP+6ujZ8R+FyQ@mail.gmail.com>
 <B7CBFA4E-94E9-47F0-A937-FE3A7A0EA677@dcn.davis.ca.us>
 <CAHpWApfrkjnDymzwrGhg3cW7yQG8AVRaQ0jtTCJtSTC6TfoKWA@mail.gmail.com>
Message-ID: <6e26e06a-3ad9-7242-6e07-277c4fff302d@gmail.com>


  Vignettes are not mandatory.

On 2020-03-07 6:05 p.m., Jeffry Hesse wrote:
> Good to know!
> 
> Right now we are using the README.rmd file to create the README.md, I
> imagine we'd create something akin to oysteR.rmd to create the vignette?
> The documentation on publishing to CRAN is great, but it's hard to tell
> what a best practice is in this area. Also are vignettes strongly suggested
> or mandatory? R CMD check is not failing for us right now without having
> them, hence the question!
> 
> Appreciate the help!
> 
> On Sat, Mar 7, 2020 at 1:55 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> wrote:
> 
>> README.md is a github convention... do not try to treat it like part of
>> the R package documentation. Instead, list it in your .Rbuildignore file
>> and use it to inform developers how to change the package and to direct
>> (potential) users browsing the GitHub repo to read the more conventional R
>> documentation of vignettes.
>>
>> On March 7, 2020 1:55:24 PM PST, Jeffry Hesse <jhesse at sonatype.com> wrote:
>>> Hi there!
>>>
>>> I and a few others have been working on an R package we'd like to get
>>> on
>>> CRAN. The package itself checks R dependencies to see if they have a
>>> known
>>> CWE or CVE attached to them, and is intended to help R developers get a
>>> better understanding on the quality of the dependencies they use!
>>>
>>> An example of it running is here:
>>>
>>>
>> https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck/00install.out
>>>
>>> And example of the output of R CMD check is here:
>>>
>>>
>> https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck/00check.log
>>>
>>> I have had some confusing experiences thus far with a README.md file,
>>> and
>>> excluded it in our .Rbuildignore, because I kept getting:
>>>
>>> * checking top-level files ... WARNING
>>> Conversion of ?README.md? failed:
>>> "template" (line 18, column 17):
>>> unexpected "("
>>> expecting "." or "$"
>>>
>>> This error is very cryptic to me, and I couldn't figure it out after a
>>> bunch of wonderful googling :)
>>>
>>> The README.rmd file is here:
>>> https://github.com/sonatype-nexus-community/oysteR/blob/master/README.Rmd
>>>
>>> Output README.md generated with rmarkdown is here:
>>>
>> https://raw.githubusercontent.com/sonatype-nexus-community/oysteR/master/README.md
>>>
>>> Ideally I think it would be nice to include it in our R package, but
>>> that
>>> WARNING keeps scaring me :)
>>>
>>> If anyone has any insight into the cause of that warning, would love to
>>> know.
>>>
>>> Any other feedback on the package would be great too! I'm not an R
>>> developer by trade (but love it), and this is my first go at this.
>>> Figured
>>> I'd reach out here to hopefully help save some back and forth between
>>> CRAN
>>> maintainers when I go to submit.
>>>
>>> CODE: https://github.com/sonatype-nexus-community/oysteR
>>>
>>> Also, we are actively looking for contributors that want to help out,
>>> so if
>>> this project interests you, come on over!
>>>
>>> Cheers, and thanks in advance for any help!
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>
> 
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Mar  8 00:32:19 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 07 Mar 2020 15:32:19 -0800
Subject: [R-pkg-devel] First R package, want to release to CRAN,
 have some questions about R CMD check and README.md
In-Reply-To: <CAHpWApfrkjnDymzwrGhg3cW7yQG8AVRaQ0jtTCJtSTC6TfoKWA@mail.gmail.com>
References: <CAHpWApdnNeGmnOtGGKzqCHRJD0zE95pW8JAmocP+6ujZ8R+FyQ@mail.gmail.com>
 <B7CBFA4E-94E9-47F0-A937-FE3A7A0EA677@dcn.davis.ca.us>
 <CAHpWApfrkjnDymzwrGhg3cW7yQG8AVRaQ0jtTCJtSTC6TfoKWA@mail.gmail.com>
Message-ID: <6B76F909-B6D6-42E1-83C7-6229B7AF53C4@dcn.davis.ca.us>

My opinion is that vignettes make or break the uptake of a package... but they are not mandatory.

I like to have a 'dev' directory where I keep meta-files like README.Rmd... of course that gets listed in .Rbuildignore also.

I don't know about oysteR.Rmd. There are approved ways to have vignettes compiled as part of your package, but AFAIK that is not required.

On March 7, 2020 3:05:01 PM PST, Jeffry Hesse <jhesse at sonatype.com> wrote:
>Good to know!
>
>Right now we are using the README.rmd file to create the README.md, I
>imagine we'd create something akin to oysteR.rmd to create the
>vignette?
>The documentation on publishing to CRAN is great, but it's hard to tell
>what a best practice is in this area. Also are vignettes strongly
>suggested
>or mandatory? R CMD check is not failing for us right now without
>having
>them, hence the question!
>
>Appreciate the help!
>
>On Sat, Mar 7, 2020 at 1:55 PM Jeff Newmiller
><jdnewmil at dcn.davis.ca.us>
>wrote:
>
>> README.md is a github convention... do not try to treat it like part
>of
>> the R package documentation. Instead, list it in your .Rbuildignore
>file
>> and use it to inform developers how to change the package and to
>direct
>> (potential) users browsing the GitHub repo to read the more
>conventional R
>> documentation of vignettes.
>>
>> On March 7, 2020 1:55:24 PM PST, Jeffry Hesse <jhesse at sonatype.com>
>wrote:
>> >Hi there!
>> >
>> >I and a few others have been working on an R package we'd like to
>get
>> >on
>> >CRAN. The package itself checks R dependencies to see if they have a
>> >known
>> >CWE or CVE attached to them, and is intended to help R developers
>get a
>> >better understanding on the quality of the dependencies they use!
>> >
>> >An example of it running is here:
>> >
>> >
>>
>https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck/00install.out
>> >
>> >And example of the output of R CMD check is here:
>> >
>> >
>>
>https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck/00check.log
>> >
>> >I have had some confusing experiences thus far with a README.md
>file,
>> >and
>> >excluded it in our .Rbuildignore, because I kept getting:
>> >
>> >* checking top-level files ... WARNING
>> >Conversion of ?README.md? failed:
>> >"template" (line 18, column 17):
>> >unexpected "("
>> >expecting "." or "$"
>> >
>> >This error is very cryptic to me, and I couldn't figure it out after
>a
>> >bunch of wonderful googling :)
>> >
>> >The README.rmd file is here:
>>
>>https://github.com/sonatype-nexus-community/oysteR/blob/master/README.Rmd
>> >
>> >Output README.md generated with rmarkdown is here:
>> >
>>
>https://raw.githubusercontent.com/sonatype-nexus-community/oysteR/master/README.md
>> >
>> >Ideally I think it would be nice to include it in our R package, but
>> >that
>> >WARNING keeps scaring me :)
>> >
>> >If anyone has any insight into the cause of that warning, would love
>to
>> >know.
>> >
>> >Any other feedback on the package would be great too! I'm not an R
>> >developer by trade (but love it), and this is my first go at this.
>> >Figured
>> >I'd reach out here to hopefully help save some back and forth
>between
>> >CRAN
>> >maintainers when I go to submit.
>> >
>> >CODE: https://github.com/sonatype-nexus-community/oysteR
>> >
>> >Also, we are actively looking for contributors that want to help
>out,
>> >so if
>> >this project interests you, come on over!
>> >
>> >Cheers, and thanks in advance for any help!
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>

-- 
Sent from my phone. Please excuse my brevity.


From r|||ght79 @end|ng |rom gm@||@com  Sun Mar  8 01:09:03 2020
From: r|||ght79 @end|ng |rom gm@||@com (Robert M. Flight)
Date: Sat, 7 Mar 2020 19:09:03 -0500
Subject: [R-pkg-devel] First R package, want to release to CRAN,
 have some questions about R CMD check and README.md
In-Reply-To: <B7CBFA4E-94E9-47F0-A937-FE3A7A0EA677@dcn.davis.ca.us>
References: <CAHpWApdnNeGmnOtGGKzqCHRJD0zE95pW8JAmocP+6ujZ8R+FyQ@mail.gmail.com>
 <B7CBFA4E-94E9-47F0-A937-FE3A7A0EA677@dcn.davis.ca.us>
Message-ID: <CAJLyBTUPoquH3wH=5LDbHG67W-h+JPC38NaVUxa5m02Lj6gzOA@mail.gmail.com>

Umm, but README.md becomes README.html on CRAN, and it is very nice to have.

I'm not sure what the error you are seeing is, but having README on CRAN is
nice.

Have you .Rbuildignore 'd README.Rmd?? That should be ignored if I remember
correctly.

-Robert

On Sat, Mar 7, 2020, 5:55 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> README.md is a github convention... do not try to treat it like part of
> the R package documentation. Instead, list it in your .Rbuildignore file
> and use it to inform developers how to change the package and to direct
> (potential) users browsing the GitHub repo to read the more conventional R
> documentation of vignettes.
>
> On March 7, 2020 1:55:24 PM PST, Jeffry Hesse <jhesse at sonatype.com> wrote:
> >Hi there!
> >
> >I and a few others have been working on an R package we'd like to get
> >on
> >CRAN. The package itself checks R dependencies to see if they have a
> >known
> >CWE or CVE attached to them, and is intended to help R developers get a
> >better understanding on the quality of the dependencies they use!
> >
> >An example of it running is here:
> >
> >
> https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck/00install.out
> >
> >And example of the output of R CMD check is here:
> >
> >
> https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck/00check.log
> >
> >I have had some confusing experiences thus far with a README.md file,
> >and
> >excluded it in our .Rbuildignore, because I kept getting:
> >
> >* checking top-level files ... WARNING
> >Conversion of ?README.md? failed:
> >"template" (line 18, column 17):
> >unexpected "("
> >expecting "." or "$"
> >
> >This error is very cryptic to me, and I couldn't figure it out after a
> >bunch of wonderful googling :)
> >
> >The README.rmd file is here:
> >https://github.com/sonatype-nexus-community/oysteR/blob/master/README.Rmd
> >
> >Output README.md generated with rmarkdown is here:
> >
> https://raw.githubusercontent.com/sonatype-nexus-community/oysteR/master/README.md
> >
> >Ideally I think it would be nice to include it in our R package, but
> >that
> >WARNING keeps scaring me :)
> >
> >If anyone has any insight into the cause of that warning, would love to
> >know.
> >
> >Any other feedback on the package would be great too! I'm not an R
> >developer by trade (but love it), and this is my first go at this.
> >Figured
> >I'd reach out here to hopefully help save some back and forth between
> >CRAN
> >maintainers when I go to submit.
> >
> >CODE: https://github.com/sonatype-nexus-community/oysteR
> >
> >Also, we are actively looking for contributors that want to help out,
> >so if
> >this project interests you, come on over!
> >
> >Cheers, and thanks in advance for any help!
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Mar  8 01:29:09 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 07 Mar 2020 16:29:09 -0800
Subject: [R-pkg-devel] First R package, want to release to CRAN,
 have some questions about R CMD check and README.md
In-Reply-To: <CAJLyBTUPoquH3wH=5LDbHG67W-h+JPC38NaVUxa5m02Lj6gzOA@mail.gmail.com>
References: <CAHpWApdnNeGmnOtGGKzqCHRJD0zE95pW8JAmocP+6ujZ8R+FyQ@mail.gmail.com>
 <B7CBFA4E-94E9-47F0-A937-FE3A7A0EA677@dcn.davis.ca.us>
 <CAJLyBTUPoquH3wH=5LDbHG67W-h+JPC38NaVUxa5m02Lj6gzOA@mail.gmail.com>
Message-ID: <2841E97E-7673-49FA-880B-B68AF0224ABB@dcn.davis.ca.us>

Apparently I am behind the times... both README (plain text) and README.md (markdown) are now recognized files by R. But the Rmd file does need to be ignored.

On March 7, 2020 4:09:03 PM PST, "Robert M. Flight" <rflight79 at gmail.com> wrote:
>Umm, but README.md becomes README.html on CRAN, and it is very nice to
>have.
>
>I'm not sure what the error you are seeing is, but having README on
>CRAN is
>nice.
>
>Have you .Rbuildignore 'd README.Rmd?? That should be ignored if I
>remember
>correctly.
>
>-Robert
>
>On Sat, Mar 7, 2020, 5:55 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>wrote:
>
>> README.md is a github convention... do not try to treat it like part
>of
>> the R package documentation. Instead, list it in your .Rbuildignore
>file
>> and use it to inform developers how to change the package and to
>direct
>> (potential) users browsing the GitHub repo to read the more
>conventional R
>> documentation of vignettes.
>>
>> On March 7, 2020 1:55:24 PM PST, Jeffry Hesse <jhesse at sonatype.com>
>wrote:
>> >Hi there!
>> >
>> >I and a few others have been working on an R package we'd like to
>get
>> >on
>> >CRAN. The package itself checks R dependencies to see if they have a
>> >known
>> >CWE or CVE attached to them, and is intended to help R developers
>get a
>> >better understanding on the quality of the dependencies they use!
>> >
>> >An example of it running is here:
>> >
>> >
>>
>https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck/00install.out
>> >
>> >And example of the output of R CMD check is here:
>> >
>> >
>>
>https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck/00check.log
>> >
>> >I have had some confusing experiences thus far with a README.md
>file,
>> >and
>> >excluded it in our .Rbuildignore, because I kept getting:
>> >
>> >* checking top-level files ... WARNING
>> >Conversion of ?README.md? failed:
>> >"template" (line 18, column 17):
>> >unexpected "("
>> >expecting "." or "$"
>> >
>> >This error is very cryptic to me, and I couldn't figure it out after
>a
>> >bunch of wonderful googling :)
>> >
>> >The README.rmd file is here:
>>
>>https://github.com/sonatype-nexus-community/oysteR/blob/master/README.Rmd
>> >
>> >Output README.md generated with rmarkdown is here:
>> >
>>
>https://raw.githubusercontent.com/sonatype-nexus-community/oysteR/master/README.md
>> >
>> >Ideally I think it would be nice to include it in our R package, but
>> >that
>> >WARNING keeps scaring me :)
>> >
>> >If anyone has any insight into the cause of that warning, would love
>to
>> >know.
>> >
>> >Any other feedback on the package would be great too! I'm not an R
>> >developer by trade (but love it), and this is my first go at this.
>> >Figured
>> >I'd reach out here to hopefully help save some back and forth
>between
>> >CRAN
>> >maintainers when I go to submit.
>> >
>> >CODE: https://github.com/sonatype-nexus-community/oysteR
>> >
>> >Also, we are actively looking for contributors that want to help
>out,
>> >so if
>> >this project interests you, come on over!
>> >
>> >Cheers, and thanks in advance for any help!
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>

-- 
Sent from my phone. Please excuse my brevity.


From jhe@@e @end|ng |rom @on@type@com  Sun Mar  8 03:23:35 2020
From: jhe@@e @end|ng |rom @on@type@com (Jeffry Hesse)
Date: Sat, 7 Mar 2020 17:23:35 -0900
Subject: [R-pkg-devel] First R package, want to release to CRAN,
 have some questions about R CMD check and README.md
In-Reply-To: <CAJLyBTUPoquH3wH=5LDbHG67W-h+JPC38NaVUxa5m02Lj6gzOA@mail.gmail.com>
References: <CAHpWApdnNeGmnOtGGKzqCHRJD0zE95pW8JAmocP+6ujZ8R+FyQ@mail.gmail.com>
 <B7CBFA4E-94E9-47F0-A937-FE3A7A0EA677@dcn.davis.ca.us>
 <CAJLyBTUPoquH3wH=5LDbHG67W-h+JPC38NaVUxa5m02Lj6gzOA@mail.gmail.com>
Message-ID: <CAHpWApcbSrtFvNn8w6tRx29oNaHw5zcVX-ApRz-my_EAphg7DA@mail.gmail.com>

Right now:

https://github.com/sonatype-nexus-community/oysteR/blob/master/.Rbuildignore#L2-L4

I have README.md, README.Rmd, and README.html ignored.

The CRAN documentation basically says if you have a WARNING or NOTE, etc...
get rid of it, and I kept running in to that error when I had README.md
included.

On Sat, Mar 7, 2020 at 3:09 PM Robert M. Flight <rflight79 at gmail.com> wrote:

> Umm, but README.md becomes README.html on CRAN, and it is very nice to
> have.
>
> I'm not sure what the error you are seeing is, but having README on CRAN
> is nice.
>
> Have you .Rbuildignore 'd README.Rmd?? That should be ignored if I
> remember correctly.
>
> -Robert
>
> On Sat, Mar 7, 2020, 5:55 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> wrote:
>
>> README.md is a github convention... do not try to treat it like part of
>> the R package documentation. Instead, list it in your .Rbuildignore file
>> and use it to inform developers how to change the package and to direct
>> (potential) users browsing the GitHub repo to read the more conventional R
>> documentation of vignettes.
>>
>> On March 7, 2020 1:55:24 PM PST, Jeffry Hesse <jhesse at sonatype.com>
>> wrote:
>> >Hi there!
>> >
>> >I and a few others have been working on an R package we'd like to get
>> >on
>> >CRAN. The package itself checks R dependencies to see if they have a
>> >known
>> >CWE or CVE attached to them, and is intended to help R developers get a
>> >better understanding on the quality of the dependencies they use!
>> >
>> >An example of it running is here:
>> >
>> >
>> https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck/00install.out
>> >
>> >And example of the output of R CMD check is here:
>> >
>> >
>> https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck/00check.log
>> >
>> >I have had some confusing experiences thus far with a README.md file,
>> >and
>> >excluded it in our .Rbuildignore, because I kept getting:
>> >
>> >* checking top-level files ... WARNING
>> >Conversion of ?README.md? failed:
>> >"template" (line 18, column 17):
>> >unexpected "("
>> >expecting "." or "$"
>> >
>> >This error is very cryptic to me, and I couldn't figure it out after a
>> >bunch of wonderful googling :)
>> >
>> >The README.rmd file is here:
>> >
>> https://github.com/sonatype-nexus-community/oysteR/blob/master/README.Rmd
>> >
>> >Output README.md generated with rmarkdown is here:
>> >
>> https://raw.githubusercontent.com/sonatype-nexus-community/oysteR/master/README.md
>> >
>> >Ideally I think it would be nice to include it in our R package, but
>> >that
>> >WARNING keeps scaring me :)
>> >
>> >If anyone has any insight into the cause of that warning, would love to
>> >know.
>> >
>> >Any other feedback on the package would be great too! I'm not an R
>> >developer by trade (but love it), and this is my first go at this.
>> >Figured
>> >I'd reach out here to hopefully help save some back and forth between
>> >CRAN
>> >maintainers when I go to submit.
>> >
>> >CODE: https://github.com/sonatype-nexus-community/oysteR
>> >
>> >Also, we are actively looking for contributors that want to help out,
>> >so if
>> >this project interests you, come on over!
>> >
>> >Cheers, and thanks in advance for any help!
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>

-- 
[image: Sonatype] <http://sonatype.com>
*Jeffry Hesse*
Product Person - Community
Phone: 202.821.5272

	[[alternative HTML version deleted]]


From d@v|dhughjone@ @end|ng |rom gm@||@com  Sun Mar  8 11:55:37 2020
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Sun, 8 Mar 2020 10:55:37 +0000
Subject: [R-pkg-devel] slightly polemic question re R CMD check
Message-ID: <CAARY7kiiUSO5jt-gokfoRd99ByNpk0saVWrCUnKh1tKCRTmeLQ@mail.gmail.com>

Hi all,

My package defines the following method and generic:

chop <- function (x, ...) UseMethod("chop")

chop.default <- function (x, breaks, labels, extend = NULL, drop = TRUE) {
... }

R CMD check then gives a warning:

W  checking S3 generic/method consistency (695ms)
   chop:
     function(x, ...)
   chop.default:
     function(x, breaks, labels, extend, drop)

   See section ?Generic functions and methods? in the ?Writing R
   Extensions? manual.

I can fix this by adding a ... argument to chop.default:

chop.default <- function (x, breaks, labels, extend = NULL, drop =
TRUE, ...)

But that makes the code less robust because e.g.

chop(x, Breaks = 1:3)

will no longer throw an error from the misspelled argument.

Or I can write:

chop(x, breaks, labels, extend, drop) UseMethod("chop")

but this means I cannot use a different interface for a different method.

This seems like a mistake. (That's the polemic.) Or am I missing a better
way? (That's the question.)

David

	[[alternative HTML version deleted]]


From c@@rd|@g@bor @end|ng |rom gm@||@com  Sun Mar  8 12:04:44 2020
From: c@@rd|@g@bor @end|ng |rom gm@||@com (=?UTF-8?B?R8OhYm9yIENzw6FyZGk=?=)
Date: Sun, 8 Mar 2020 11:04:44 +0000
Subject: [R-pkg-devel] slightly polemic question re R CMD check
In-Reply-To: <CAARY7kiiUSO5jt-gokfoRd99ByNpk0saVWrCUnKh1tKCRTmeLQ@mail.gmail.com>
References: <CAARY7kiiUSO5jt-gokfoRd99ByNpk0saVWrCUnKh1tKCRTmeLQ@mail.gmail.com>
Message-ID: <CABtg=K=_nwskuzDTyL5UAWmMTXBuV-LXykszw0CJYQ0jsTT8Fw@mail.gmail.com>

You can add the ... argument to chop.default(), and then check that
length(list(...)) is zero.

Also, you might be interested in the ellipsis package.

Gabor

On Sun, Mar 8, 2020 at 10:56 AM David Hugh-Jones
<davidhughjones at gmail.com> wrote:
>
> Hi all,
>
> My package defines the following method and generic:
>
> chop <- function (x, ...) UseMethod("chop")
>
> chop.default <- function (x, breaks, labels, extend = NULL, drop = TRUE) {
> ... }
>
> R CMD check then gives a warning:
>
> W  checking S3 generic/method consistency (695ms)
>    chop:
>      function(x, ...)
>    chop.default:
>      function(x, breaks, labels, extend, drop)
>
>    See section ?Generic functions and methods? in the ?Writing R
>    Extensions? manual.
>
> I can fix this by adding a ... argument to chop.default:
>
> chop.default <- function (x, breaks, labels, extend = NULL, drop =
> TRUE, ...)
>
> But that makes the code less robust because e.g.
>
> chop(x, Breaks = 1:3)
>
> will no longer throw an error from the misspelled argument.
>
> Or I can write:
>
> chop(x, breaks, labels, extend, drop) UseMethod("chop")
>
> but this means I cannot use a different interface for a different method.
>
> This seems like a mistake. (That's the polemic.) Or am I missing a better
> way? (That's the question.)
>
> David
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Sun Mar  8 13:23:53 2020
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Sun, 8 Mar 2020 12:23:53 +0000
Subject: [R-pkg-devel] First R package, want to release to CRAN,
 have some questions about R CMD check and README.md
In-Reply-To: <CAHpWApfrkjnDymzwrGhg3cW7yQG8AVRaQ0jtTCJtSTC6TfoKWA@mail.gmail.com>
References: <CAHpWApdnNeGmnOtGGKzqCHRJD0zE95pW8JAmocP+6ujZ8R+FyQ@mail.gmail.com>
 <B7CBFA4E-94E9-47F0-A937-FE3A7A0EA677@dcn.davis.ca.us>
 <CAHpWApfrkjnDymzwrGhg3cW7yQG8AVRaQ0jtTCJtSTC6TfoKWA@mail.gmail.com>
Message-ID: <3b5ce076-6d69-0536-a32c-f9aa1bc8930b@dewey.myzen.co.uk>

As well as having a vignette one thing which encourages me to 
investigate a package is having NEWS. You may already have this of course.

Michael

On 07/03/2020 23:05, Jeffry Hesse wrote:
> Good to know!
> 
> Right now we are using the README.rmd file to create the README.md, I
> imagine we'd create something akin to oysteR.rmd to create the vignette?
> The documentation on publishing to CRAN is great, but it's hard to tell
> what a best practice is in this area. Also are vignettes strongly suggested
> or mandatory? R CMD check is not failing for us right now without having
> them, hence the question!
> 
> Appreciate the help!
> 
> On Sat, Mar 7, 2020 at 1:55 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> wrote:
> 
>> README.md is a github convention... do not try to treat it like part of
>> the R package documentation. Instead, list it in your .Rbuildignore file
>> and use it to inform developers how to change the package and to direct
>> (potential) users browsing the GitHub repo to read the more conventional R
>> documentation of vignettes.
>>
>> On March 7, 2020 1:55:24 PM PST, Jeffry Hesse <jhesse at sonatype.com> wrote:
>>> Hi there!
>>>
>>> I and a few others have been working on an R package we'd like to get
>>> on
>>> CRAN. The package itself checks R dependencies to see if they have a
>>> known
>>> CWE or CVE attached to them, and is intended to help R developers get a
>>> better understanding on the quality of the dependencies they use!
>>>
>>> An example of it running is here:
>>>
>>>
>> https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck/00install.out
>>>
>>> And example of the output of R CMD check is here:
>>>
>>>
>> https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck/00check.log
>>>
>>> I have had some confusing experiences thus far with a README.md file,
>>> and
>>> excluded it in our .Rbuildignore, because I kept getting:
>>>
>>> * checking top-level files ... WARNING
>>> Conversion of ?README.md? failed:
>>> "template" (line 18, column 17):
>>> unexpected "("
>>> expecting "." or "$"
>>>
>>> This error is very cryptic to me, and I couldn't figure it out after a
>>> bunch of wonderful googling :)
>>>
>>> The README.rmd file is here:
>>> https://github.com/sonatype-nexus-community/oysteR/blob/master/README.Rmd
>>>
>>> Output README.md generated with rmarkdown is here:
>>>
>> https://raw.githubusercontent.com/sonatype-nexus-community/oysteR/master/README.md
>>>
>>> Ideally I think it would be nice to include it in our R package, but
>>> that
>>> WARNING keeps scaring me :)
>>>
>>> If anyone has any insight into the cause of that warning, would love to
>>> know.
>>>
>>> Any other feedback on the package would be great too! I'm not an R
>>> developer by trade (but love it), and this is my first go at this.
>>> Figured
>>> I'd reach out here to hopefully help save some back and forth between
>>> CRAN
>>> maintainers when I go to submit.
>>>
>>> CODE: https://github.com/sonatype-nexus-community/oysteR
>>>
>>> Also, we are actively looking for contributors that want to help out,
>>> so if
>>> this project interests you, come on over!
>>>
>>> Cheers, and thanks in advance for any help!
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>
> 
> 

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From d@v|dhughjone@ @end|ng |rom gm@||@com  Sun Mar  8 13:41:51 2020
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Sun, 8 Mar 2020 12:41:51 +0000
Subject: [R-pkg-devel] slightly polemic question re R CMD check
In-Reply-To: <CABtg=K=_nwskuzDTyL5UAWmMTXBuV-LXykszw0CJYQ0jsTT8Fw@mail.gmail.com>
References: <CAARY7kiiUSO5jt-gokfoRd99ByNpk0saVWrCUnKh1tKCRTmeLQ@mail.gmail.com>
 <CABtg=K=_nwskuzDTyL5UAWmMTXBuV-LXykszw0CJYQ0jsTT8Fw@mail.gmail.com>
Message-ID: <CAARY7kjmGZzVeO__V3Me+a=HgbfrzDQEOYuSEftsakHHDevOpQ@mail.gmail.com>

You're quite right :-) But I think the polemic still holds, because I have
to add manual argument checking to all my methods, which has a cost in
lines of code. Indeed, few base R methods have chosen to do this. In
effect, the current setup encourages writing methods with "lenient"
argument specifications.

Thank you for the suggestion about ellipsis.

On Sun, 8 Mar 2020, 11:04 G?bor Cs?rdi, <csardi.gabor at gmail.com> wrote:

> You can add the ... argument to chop.default(), and then check that
> length(list(...)) is zero.
>
> Also, you might be interested in the ellipsis package.
>
> Gabor
>
> On Sun, Mar 8, 2020 at 10:56 AM David Hugh-Jones
> <davidhughjones at gmail.com> wrote:
> >
> > Hi all,
> >
> > My package defines the following method and generic:
> >
> > chop <- function (x, ...) UseMethod("chop")
> >
> > chop.default <- function (x, breaks, labels, extend = NULL, drop = TRUE)
> {
> > ... }
> >
> > R CMD check then gives a warning:
> >
> > W  checking S3 generic/method consistency (695ms)
> >    chop:
> >      function(x, ...)
> >    chop.default:
> >      function(x, breaks, labels, extend, drop)
> >
> >    See section ?Generic functions and methods? in the ?Writing R
> >    Extensions? manual.
> >
> > I can fix this by adding a ... argument to chop.default:
> >
> > chop.default <- function (x, breaks, labels, extend = NULL, drop =
> > TRUE, ...)
> >
> > But that makes the code less robust because e.g.
> >
> > chop(x, Breaks = 1:3)
> >
> > will no longer throw an error from the misspelled argument.
> >
> > Or I can write:
> >
> > chop(x, breaks, labels, extend, drop) UseMethod("chop")
> >
> > but this means I cannot use a different interface for a different method.
> >
> > This seems like a mistake. (That's the polemic.) Or am I missing a better
> > way? (That's the question.)
> >
> > David
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Mar  8 17:24:09 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 08 Mar 2020 09:24:09 -0700
Subject: [R-pkg-devel] slightly polemic question re R CMD check
In-Reply-To: <CAARY7kjmGZzVeO__V3Me+a=HgbfrzDQEOYuSEftsakHHDevOpQ@mail.gmail.com>
References: <CAARY7kiiUSO5jt-gokfoRd99ByNpk0saVWrCUnKh1tKCRTmeLQ@mail.gmail.com>
 <CABtg=K=_nwskuzDTyL5UAWmMTXBuV-LXykszw0CJYQ0jsTT8Fw@mail.gmail.com>
 <CAARY7kjmGZzVeO__V3Me+a=HgbfrzDQEOYuSEftsakHHDevOpQ@mail.gmail.com>
Message-ID: <11536DFA-80BD-447A-909D-536F298DBFFF@dcn.davis.ca.us>

You seem to think this is a bad thing. R does encourage lenient argument checking... what rock have you been under for the last 20 years?

On March 8, 2020 5:41:51 AM PDT, David Hugh-Jones <davidhughjones at gmail.com> wrote:
>You're quite right :-) But I think the polemic still holds, because I
>have
>to add manual argument checking to all my methods, which has a cost in
>lines of code. Indeed, few base R methods have chosen to do this. In
>effect, the current setup encourages writing methods with "lenient"
>argument specifications.
>
>Thank you for the suggestion about ellipsis.
>
>On Sun, 8 Mar 2020, 11:04 G?bor Cs?rdi, <csardi.gabor at gmail.com> wrote:
>
>> You can add the ... argument to chop.default(), and then check that
>> length(list(...)) is zero.
>>
>> Also, you might be interested in the ellipsis package.
>>
>> Gabor
>>
>> On Sun, Mar 8, 2020 at 10:56 AM David Hugh-Jones
>> <davidhughjones at gmail.com> wrote:
>> >
>> > Hi all,
>> >
>> > My package defines the following method and generic:
>> >
>> > chop <- function (x, ...) UseMethod("chop")
>> >
>> > chop.default <- function (x, breaks, labels, extend = NULL, drop =
>TRUE)
>> {
>> > ... }
>> >
>> > R CMD check then gives a warning:
>> >
>> > W  checking S3 generic/method consistency (695ms)
>> >    chop:
>> >      function(x, ...)
>> >    chop.default:
>> >      function(x, breaks, labels, extend, drop)
>> >
>> >    See section ?Generic functions and methods? in the ?Writing R
>> >    Extensions? manual.
>> >
>> > I can fix this by adding a ... argument to chop.default:
>> >
>> > chop.default <- function (x, breaks, labels, extend = NULL, drop =
>> > TRUE, ...)
>> >
>> > But that makes the code less robust because e.g.
>> >
>> > chop(x, Breaks = 1:3)
>> >
>> > will no longer throw an error from the misspelled argument.
>> >
>> > Or I can write:
>> >
>> > chop(x, breaks, labels, extend, drop) UseMethod("chop")
>> >
>> > but this means I cannot use a different interface for a different
>method.
>> >
>> > This seems like a mistake. (That's the polemic.) Or am I missing a
>better
>> > way? (That's the question.)
>> >
>> > David
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-package-devel at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From d@v|dhughjone@ @end|ng |rom gm@||@com  Sun Mar  8 17:41:51 2020
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Sun, 8 Mar 2020 16:41:51 +0000
Subject: [R-pkg-devel] slightly polemic question re R CMD check
In-Reply-To: <11536DFA-80BD-447A-909D-536F298DBFFF@dcn.davis.ca.us>
References: <CAARY7kiiUSO5jt-gokfoRd99ByNpk0saVWrCUnKh1tKCRTmeLQ@mail.gmail.com>
 <CABtg=K=_nwskuzDTyL5UAWmMTXBuV-LXykszw0CJYQ0jsTT8Fw@mail.gmail.com>
 <CAARY7kjmGZzVeO__V3Me+a=HgbfrzDQEOYuSEftsakHHDevOpQ@mail.gmail.com>
 <11536DFA-80BD-447A-909D-536F298DBFFF@dcn.davis.ca.us>
Message-ID: <CAARY7kgjNZM3qX3QV6kJrsQ3KFXKmnaSMW3pFv+zruKiY3HxhQ@mail.gmail.com>

Hi Jeff,

I wouldn't say R encourages that in general. Non-generic functions will
throw an error if you use a non-existent argument. And some generic
functions check for it:

seq(1, 3, blah = 1)
[1] 1 2 3
Warning message:
In seq.default(1, 3, blah = 1) :
 extra argument ?blah? will be disregarded

In fact there is even a `chkDots()` function to help with this - which,
despite having used R or 17 years, I first discovered today :-). So, it
seems the R base developers thought lenient argument checking could be a
bad thing, presumably because it lets errors go undetected.

Maybe chkDots is a reasonable workaround. But I wonder what the rationale
is for R CMD check enforcing that methods *must* be as lenient as the
generic. It seems to lead to a lot of documentation of the form:

@param ... Not used.

Cheers,
David


On Sun, 8 Mar 2020 at 16:24, Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> You seem to think this is a bad thing. R does encourage lenient argument
> checking... what rock have you been under for the last 20 years?
>
> On March 8, 2020 5:41:51 AM PDT, David Hugh-Jones <
> davidhughjones at gmail.com> wrote:
> >You're quite right :-) But I think the polemic still holds, because I
> >have
> >to add manual argument checking to all my methods, which has a cost in
> >lines of code. Indeed, few base R methods have chosen to do this. In
> >effect, the current setup encourages writing methods with "lenient"
> >argument specifications.
> >
> >Thank you for the suggestion about ellipsis.
> >
> >On Sun, 8 Mar 2020, 11:04 G?bor Cs?rdi, <csardi.gabor at gmail.com> wrote:
> >
> >> You can add the ... argument to chop.default(), and then check that
> >> length(list(...)) is zero.
> >>
> >> Also, you might be interested in the ellipsis package.
> >>
> >> Gabor
> >>
> >> On Sun, Mar 8, 2020 at 10:56 AM David Hugh-Jones
> >> <davidhughjones at gmail.com> wrote:
> >> >
> >> > Hi all,
> >> >
> >> > My package defines the following method and generic:
> >> >
> >> > chop <- function (x, ...) UseMethod("chop")
> >> >
> >> > chop.default <- function (x, breaks, labels, extend = NULL, drop =
> >TRUE)
> >> {
> >> > ... }
> >> >
> >> > R CMD check then gives a warning:
> >> >
> >> > W  checking S3 generic/method consistency (695ms)
> >> >    chop:
> >> >      function(x, ...)
> >> >    chop.default:
> >> >      function(x, breaks, labels, extend, drop)
> >> >
> >> >    See section ?Generic functions and methods? in the ?Writing R
> >> >    Extensions? manual.
> >> >
> >> > I can fix this by adding a ... argument to chop.default:
> >> >
> >> > chop.default <- function (x, breaks, labels, extend = NULL, drop =
> >> > TRUE, ...)
> >> >
> >> > But that makes the code less robust because e.g.
> >> >
> >> > chop(x, Breaks = 1:3)
> >> >
> >> > will no longer throw an error from the misspelled argument.
> >> >
> >> > Or I can write:
> >> >
> >> > chop(x, breaks, labels, extend, drop) UseMethod("chop")
> >> >
> >> > but this means I cannot use a different interface for a different
> >method.
> >> >
> >> > This seems like a mistake. (That's the polemic.) Or am I missing a
> >better
> >> > way? (That's the question.)
> >> >
> >> > David
> >> >
> >> >         [[alternative HTML version deleted]]
> >> >
> >> > ______________________________________________
> >> > R-package-devel at r-project.org mailing list
> >> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-package-devel at r-project.org mailing list
> >https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> --
> Sent from my phone. Please excuse my brevity.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Mar  8 18:14:49 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 08 Mar 2020 10:14:49 -0700
Subject: [R-pkg-devel] slightly polemic question re R CMD check
In-Reply-To: <CAARY7kgjNZM3qX3QV6kJrsQ3KFXKmnaSMW3pFv+zruKiY3HxhQ@mail.gmail.com>
References: <CAARY7kiiUSO5jt-gokfoRd99ByNpk0saVWrCUnKh1tKCRTmeLQ@mail.gmail.com>
 <CABtg=K=_nwskuzDTyL5UAWmMTXBuV-LXykszw0CJYQ0jsTT8Fw@mail.gmail.com>
 <CAARY7kjmGZzVeO__V3Me+a=HgbfrzDQEOYuSEftsakHHDevOpQ@mail.gmail.com>
 <11536DFA-80BD-447A-909D-536F298DBFFF@dcn.davis.ca.us>
 <CAARY7kgjNZM3qX3QV6kJrsQ3KFXKmnaSMW3pFv+zruKiY3HxhQ@mail.gmail.com>
Message-ID: <AA2F51AA-7CA2-448D-8207-4CAC56F8A432@dcn.davis.ca.us>

R encourages the use of ... particularly in S3 generics, to avoid over-depending on inheritance to enable flexible use of these generics. That is, when you call the generic without knowing which class you are giving it, you cannot specify class-specific arguments. However, some methods have obvious alternative class-specific behaviors that are typically enabled using class-specific arguments (e.g. plot). You cannot support both fully-generic calls and class-specific calls without giving the generic some flexibility that won't get used in some cases.


On March 8, 2020 9:41:51 AM PDT, David Hugh-Jones <davidhughjones at gmail.com> wrote:
>Hi Jeff,
>
>I wouldn't say R encourages that in general. Non-generic functions will
>throw an error if you use a non-existent argument. And some generic
>functions check for it:
>
>seq(1, 3, blah = 1)
>[1] 1 2 3
>Warning message:
>In seq.default(1, 3, blah = 1) :
> extra argument ?blah? will be disregarded
>
>In fact there is even a `chkDots()` function to help with this - which,
>despite having used R or 17 years, I first discovered today :-). So, it
>seems the R base developers thought lenient argument checking could be
>a
>bad thing, presumably because it lets errors go undetected.
>
>Maybe chkDots is a reasonable workaround. But I wonder what the
>rationale
>is for R CMD check enforcing that methods *must* be as lenient as the
>generic. It seems to lead to a lot of documentation of the form:
>
>@param ... Not used.
>
>Cheers,
>David
>
>
>On Sun, 8 Mar 2020 at 16:24, Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>wrote:
>
>> You seem to think this is a bad thing. R does encourage lenient
>argument
>> checking... what rock have you been under for the last 20 years?
>>
>> On March 8, 2020 5:41:51 AM PDT, David Hugh-Jones <
>> davidhughjones at gmail.com> wrote:
>> >You're quite right :-) But I think the polemic still holds, because
>I
>> >have
>> >to add manual argument checking to all my methods, which has a cost
>in
>> >lines of code. Indeed, few base R methods have chosen to do this. In
>> >effect, the current setup encourages writing methods with "lenient"
>> >argument specifications.
>> >
>> >Thank you for the suggestion about ellipsis.
>> >
>> >On Sun, 8 Mar 2020, 11:04 G?bor Cs?rdi, <csardi.gabor at gmail.com>
>wrote:
>> >
>> >> You can add the ... argument to chop.default(), and then check
>that
>> >> length(list(...)) is zero.
>> >>
>> >> Also, you might be interested in the ellipsis package.
>> >>
>> >> Gabor
>> >>
>> >> On Sun, Mar 8, 2020 at 10:56 AM David Hugh-Jones
>> >> <davidhughjones at gmail.com> wrote:
>> >> >
>> >> > Hi all,
>> >> >
>> >> > My package defines the following method and generic:
>> >> >
>> >> > chop <- function (x, ...) UseMethod("chop")
>> >> >
>> >> > chop.default <- function (x, breaks, labels, extend = NULL, drop
>=
>> >TRUE)
>> >> {
>> >> > ... }
>> >> >
>> >> > R CMD check then gives a warning:
>> >> >
>> >> > W  checking S3 generic/method consistency (695ms)
>> >> >    chop:
>> >> >      function(x, ...)
>> >> >    chop.default:
>> >> >      function(x, breaks, labels, extend, drop)
>> >> >
>> >> >    See section ?Generic functions and methods? in the ?Writing R
>> >> >    Extensions? manual.
>> >> >
>> >> > I can fix this by adding a ... argument to chop.default:
>> >> >
>> >> > chop.default <- function (x, breaks, labels, extend = NULL, drop
>=
>> >> > TRUE, ...)
>> >> >
>> >> > But that makes the code less robust because e.g.
>> >> >
>> >> > chop(x, Breaks = 1:3)
>> >> >
>> >> > will no longer throw an error from the misspelled argument.
>> >> >
>> >> > Or I can write:
>> >> >
>> >> > chop(x, breaks, labels, extend, drop) UseMethod("chop")
>> >> >
>> >> > but this means I cannot use a different interface for a
>different
>> >method.
>> >> >
>> >> > This seems like a mistake. (That's the polemic.) Or am I missing
>a
>> >better
>> >> > way? (That's the question.)
>> >> >
>> >> > David
>> >> >
>> >> >         [[alternative HTML version deleted]]
>> >> >
>> >> > ______________________________________________
>> >> > R-package-devel at r-project.org mailing list
>> >> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> >>
>> >
>> >       [[alternative HTML version deleted]]
>> >
>> >______________________________________________
>> >R-package-devel at r-project.org mailing list
>> >https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>

-- 
Sent from my phone. Please excuse my brevity.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Mar  8 18:22:26 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 08 Mar 2020 10:22:26 -0700
Subject: [R-pkg-devel] slightly polemic question re R CMD check
In-Reply-To: <AA2F51AA-7CA2-448D-8207-4CAC56F8A432@dcn.davis.ca.us>
References: <CAARY7kiiUSO5jt-gokfoRd99ByNpk0saVWrCUnKh1tKCRTmeLQ@mail.gmail.com>
 <CABtg=K=_nwskuzDTyL5UAWmMTXBuV-LXykszw0CJYQ0jsTT8Fw@mail.gmail.com>
 <CAARY7kjmGZzVeO__V3Me+a=HgbfrzDQEOYuSEftsakHHDevOpQ@mail.gmail.com>
 <11536DFA-80BD-447A-909D-536F298DBFFF@dcn.davis.ca.us>
 <CAARY7kgjNZM3qX3QV6kJrsQ3KFXKmnaSMW3pFv+zruKiY3HxhQ@mail.gmail.com>
 <AA2F51AA-7CA2-448D-8207-4CAC56F8A432@dcn.davis.ca.us>
Message-ID: <02DF1299-5277-43D9-8D8D-44EE73B73696@dcn.davis.ca.us>

... also, the only reason non-generic functions using ellipsis can throw an error when an argument is not used is that they keep passing ... on to functions that recursively encounter fumctions that eventually do not accept an ellipsis argument. If the function calls a generic with an ellipsis argument then we are back into the generic conundrum again and the user will experience the normal function failing to catch unused arguments.

On March 8, 2020 10:14:49 AM PDT, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>R encourages the use of ... particularly in S3 generics, to avoid
>over-depending on inheritance to enable flexible use of these generics.
>That is, when you call the generic without knowing which class you are
>giving it, you cannot specify class-specific arguments. However, some
>methods have obvious alternative class-specific behaviors that are
>typically enabled using class-specific arguments (e.g. plot). You
>cannot support both fully-generic calls and class-specific calls
>without giving the generic some flexibility that won't get used in some
>cases.
>
>
>On March 8, 2020 9:41:51 AM PDT, David Hugh-Jones
><davidhughjones at gmail.com> wrote:
>>Hi Jeff,
>>
>>I wouldn't say R encourages that in general. Non-generic functions
>will
>>throw an error if you use a non-existent argument. And some generic
>>functions check for it:
>>
>>seq(1, 3, blah = 1)
>>[1] 1 2 3
>>Warning message:
>>In seq.default(1, 3, blah = 1) :
>> extra argument ?blah? will be disregarded
>>
>>In fact there is even a `chkDots()` function to help with this -
>which,
>>despite having used R or 17 years, I first discovered today :-). So,
>it
>>seems the R base developers thought lenient argument checking could be
>>a
>>bad thing, presumably because it lets errors go undetected.
>>
>>Maybe chkDots is a reasonable workaround. But I wonder what the
>>rationale
>>is for R CMD check enforcing that methods *must* be as lenient as the
>>generic. It seems to lead to a lot of documentation of the form:
>>
>>@param ... Not used.
>>
>>Cheers,
>>David
>>
>>
>>On Sun, 8 Mar 2020 at 16:24, Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>wrote:
>>
>>> You seem to think this is a bad thing. R does encourage lenient
>>argument
>>> checking... what rock have you been under for the last 20 years?
>>>
>>> On March 8, 2020 5:41:51 AM PDT, David Hugh-Jones <
>>> davidhughjones at gmail.com> wrote:
>>> >You're quite right :-) But I think the polemic still holds, because
>>I
>>> >have
>>> >to add manual argument checking to all my methods, which has a cost
>>in
>>> >lines of code. Indeed, few base R methods have chosen to do this.
>In
>>> >effect, the current setup encourages writing methods with "lenient"
>>> >argument specifications.
>>> >
>>> >Thank you for the suggestion about ellipsis.
>>> >
>>> >On Sun, 8 Mar 2020, 11:04 G?bor Cs?rdi, <csardi.gabor at gmail.com>
>>wrote:
>>> >
>>> >> You can add the ... argument to chop.default(), and then check
>>that
>>> >> length(list(...)) is zero.
>>> >>
>>> >> Also, you might be interested in the ellipsis package.
>>> >>
>>> >> Gabor
>>> >>
>>> >> On Sun, Mar 8, 2020 at 10:56 AM David Hugh-Jones
>>> >> <davidhughjones at gmail.com> wrote:
>>> >> >
>>> >> > Hi all,
>>> >> >
>>> >> > My package defines the following method and generic:
>>> >> >
>>> >> > chop <- function (x, ...) UseMethod("chop")
>>> >> >
>>> >> > chop.default <- function (x, breaks, labels, extend = NULL,
>drop
>>=
>>> >TRUE)
>>> >> {
>>> >> > ... }
>>> >> >
>>> >> > R CMD check then gives a warning:
>>> >> >
>>> >> > W  checking S3 generic/method consistency (695ms)
>>> >> >    chop:
>>> >> >      function(x, ...)
>>> >> >    chop.default:
>>> >> >      function(x, breaks, labels, extend, drop)
>>> >> >
>>> >> >    See section ?Generic functions and methods? in the ?Writing
>R
>>> >> >    Extensions? manual.
>>> >> >
>>> >> > I can fix this by adding a ... argument to chop.default:
>>> >> >
>>> >> > chop.default <- function (x, breaks, labels, extend = NULL,
>drop
>>=
>>> >> > TRUE, ...)
>>> >> >
>>> >> > But that makes the code less robust because e.g.
>>> >> >
>>> >> > chop(x, Breaks = 1:3)
>>> >> >
>>> >> > will no longer throw an error from the misspelled argument.
>>> >> >
>>> >> > Or I can write:
>>> >> >
>>> >> > chop(x, breaks, labels, extend, drop) UseMethod("chop")
>>> >> >
>>> >> > but this means I cannot use a different interface for a
>>different
>>> >method.
>>> >> >
>>> >> > This seems like a mistake. (That's the polemic.) Or am I
>missing
>>a
>>> >better
>>> >> > way? (That's the question.)
>>> >> >
>>> >> > David
>>> >> >
>>> >> >         [[alternative HTML version deleted]]
>>> >> >
>>> >> > ______________________________________________
>>> >> > R-package-devel at r-project.org mailing list
>>> >> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> >>
>>> >
>>> >       [[alternative HTML version deleted]]
>>> >
>>> >______________________________________________
>>> >R-package-devel at r-project.org mailing list
>>> >https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>> --
>>> Sent from my phone. Please excuse my brevity.
>>>

-- 
Sent from my phone. Please excuse my brevity.


From georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk  Sun Mar  8 20:13:47 2020
From: georg|@bo@hn@kov @end|ng |rom m@nche@ter@@c@uk (Georgi Boshnakov)
Date: Sun, 8 Mar 2020 19:13:47 +0000
Subject: [R-pkg-devel] First R package, want to release to CRAN,
 have some questions about R CMD check and README.md
In-Reply-To: <3b5ce076-6d69-0536-a32c-f9aa1bc8930b@dewey.myzen.co.uk>
References: <CAHpWApdnNeGmnOtGGKzqCHRJD0zE95pW8JAmocP+6ujZ8R+FyQ@mail.gmail.com>
 <B7CBFA4E-94E9-47F0-A937-FE3A7A0EA677@dcn.davis.ca.us>
 <CAHpWApfrkjnDymzwrGhg3cW7yQG8AVRaQ0jtTCJtSTC6TfoKWA@mail.gmail.com>
 <3b5ce076-6d69-0536-a32c-f9aa1bc8930b@dewey.myzen.co.uk>
Message-ID: <438D2EC9EAFE5946B2D5864670EA468E01CC7CD699@MBXP01.ds.man.ac.uk>

When writing README.md, keep in mind that it may (and will!) appear and be rendered at many places, not only CRAN and Github. METACRAN is a prime example with always up-to-date information but there are a number of others. So links need to be written with that in mind. 

Also, some sites providing information about R packages may not be updated regularly or consistently, or may stop being updated altogether. I have also seen sites that render README 
but do not link to CRAN. A visitor in such sites may not have a clue when the information on it is obsolete.  So, it is a must to have a link in the README(.md) to the CRAN page of the package, even though on CRAN this looks strange. The most straightforward is probably a badge.  

Georgi Boshnakov

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Michael Dewey
Sent: 08 March 2020 12:24
To: Jeffry Hesse <jhesse at sonatype.com>; Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Cc: Brittany Belle <bbelle at sonatype.com>; Adrian Powell <apowell at sonatype.com>; Ken Duck <kduck at sonatype.com>; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] First R package, want to release to CRAN, have some questions about R CMD check and README.md

As well as having a vignette one thing which encourages me to investigate a package is having NEWS. You may already have this of course.

Michael

On 07/03/2020 23:05, Jeffry Hesse wrote:
> Good to know!
> 
> Right now we are using the README.rmd file to create the README.md, I 
> imagine we'd create something akin to oysteR.rmd to create the vignette?
> The documentation on publishing to CRAN is great, but it's hard to 
> tell what a best practice is in this area. Also are vignettes strongly 
> suggested or mandatory? R CMD check is not failing for us right now 
> without having them, hence the question!
> 
> Appreciate the help!
> 
> On Sat, Mar 7, 2020 at 1:55 PM Jeff Newmiller 
> <jdnewmil at dcn.davis.ca.us>
> wrote:
> 
>> README.md is a github convention... do not try to treat it like part 
>> of the R package documentation. Instead, list it in your 
>> .Rbuildignore file and use it to inform developers how to change the 
>> package and to direct
>> (potential) users browsing the GitHub repo to read the more 
>> conventional R documentation of vignettes.
>>
>> On March 7, 2020 1:55:24 PM PST, Jeffry Hesse <jhesse at sonatype.com> wrote:
>>> Hi there!
>>>
>>> I and a few others have been working on an R package we'd like to 
>>> get on CRAN. The package itself checks R dependencies to see if they 
>>> have a known CWE or CVE attached to them, and is intended to help R 
>>> developers get a better understanding on the quality of the 
>>> dependencies they use!
>>>
>>> An example of it running is here:
>>>
>>>
>> https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck
>> /00install.out
>>>
>>> And example of the output of R CMD check is here:
>>>
>>>
>> https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck
>> /00check.log
>>>
>>> I have had some confusing experiences thus far with a README.md 
>>> file, and excluded it in our .Rbuildignore, because I kept getting:
>>>
>>> * checking top-level files ... WARNING Conversion of ?README.md? 
>>> failed:
>>> "template" (line 18, column 17):
>>> unexpected "("
>>> expecting "." or "$"
>>>
>>> This error is very cryptic to me, and I couldn't figure it out after 
>>> a bunch of wonderful googling :)
>>>
>>> The README.rmd file is here:
>>> https://github.com/sonatype-nexus-community/oysteR/blob/master/READM
>>> E.Rmd
>>>
>>> Output README.md generated with rmarkdown is here:
>>>
>> https://raw.githubusercontent.com/sonatype-nexus-community/oysteR/mas
>> ter/README.md
>>>
>>> Ideally I think it would be nice to include it in our R package, but 
>>> that WARNING keeps scaring me :)
>>>
>>> If anyone has any insight into the cause of that warning, would love 
>>> to know.
>>>
>>> Any other feedback on the package would be great too! I'm not an R 
>>> developer by trade (but love it), and this is my first go at this.
>>> Figured
>>> I'd reach out here to hopefully help save some back and forth 
>>> between CRAN maintainers when I go to submit.
>>>
>>> CODE: https://github.com/sonatype-nexus-community/oysteR
>>>
>>> Also, we are actively looking for contributors that want to help 
>>> out, so if this project interests you, come on over!
>>>
>>> Cheers, and thanks in advance for any help!
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>
> 
> 

--
Michael
http://www.dewey.myzen.co.uk/home.html

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel

From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Sun Mar  8 21:29:24 2020
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Sun, 8 Mar 2020 20:29:24 +0000
Subject: [R-pkg-devel] First R package, want to release to CRAN,
 have some questions about R CMD check and README.md
In-Reply-To: <438D2EC9EAFE5946B2D5864670EA468E01CC7CD699@MBXP01.ds.man.ac.uk>
References: <CAHpWApdnNeGmnOtGGKzqCHRJD0zE95pW8JAmocP+6ujZ8R+FyQ@mail.gmail.com>
 <B7CBFA4E-94E9-47F0-A937-FE3A7A0EA677@dcn.davis.ca.us>
 <CAHpWApfrkjnDymzwrGhg3cW7yQG8AVRaQ0jtTCJtSTC6TfoKWA@mail.gmail.com>
 <3b5ce076-6d69-0536-a32c-f9aa1bc8930b@dewey.myzen.co.uk>,
 <438D2EC9EAFE5946B2D5864670EA468E01CC7CD699@MBXP01.ds.man.ac.uk>
Message-ID: <2e5673ad9ee64c2ba29c59d2741de910@umanitoba.ca>

Hi Jeffry,


Going back to your original problem with README.md: as far as I can see, it seems that the warning message is triggered by running pandoc on README.md; see for example these lines:

https://github.com/wch/r-source/blob/6705a31c7fadc646180e1b62a70fc85f447e4d55/src/library/tools/R/check.R#L1291-L1292


I tried running tools:::.pandoc_md_for_CRAN on your README.md file, but I couldn't reproduce the warning on my machine (I get a different warning, related to the lack of title). I don't know how to fix your issue, but this information may help narrow it down for you.


Best,


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Georgi Boshnakov <georgi.boshnakov at manchester.ac.uk>
Sent: March 8, 2020 2:13:47 PM
To: Michael Dewey; Jeffry Hesse; Jeff Newmiller
Cc: Brittany Belle; Adrian Powell; Ken Duck; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] First R package, want to release to CRAN, have some questions about R CMD check and README.md

When writing README.md, keep in mind that it may (and will!) appear and be rendered at many places, not only CRAN and Github. METACRAN is a prime example with always up-to-date information but there are a number of others. So links need to be written with that in mind.

Also, some sites providing information about R packages may not be updated regularly or consistently, or may stop being updated altogether. I have also seen sites that render README
but do not link to CRAN. A visitor in such sites may not have a clue when the information on it is obsolete.  So, it is a must to have a link in the README(.md) to the CRAN page of the package, even though on CRAN this looks strange. The most straightforward is probably a badge.

Georgi Boshnakov

-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of Michael Dewey
Sent: 08 March 2020 12:24
To: Jeffry Hesse <jhesse at sonatype.com>; Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Cc: Brittany Belle <bbelle at sonatype.com>; Adrian Powell <apowell at sonatype.com>; Ken Duck <kduck at sonatype.com>; r-package-devel at r-project.org
Subject: Re: [R-pkg-devel] First R package, want to release to CRAN, have some questions about R CMD check and README.md

As well as having a vignette one thing which encourages me to investigate a package is having NEWS. You may already have this of course.

Michael

On 07/03/2020 23:05, Jeffry Hesse wrote:
> Good to know!
>
> Right now we are using the README.rmd file to create the README.md, I
> imagine we'd create something akin to oysteR.rmd to create the vignette?
> The documentation on publishing to CRAN is great, but it's hard to
> tell what a best practice is in this area. Also are vignettes strongly
> suggested or mandatory? R CMD check is not failing for us right now
> without having them, hence the question!
>
> Appreciate the help!
>
> On Sat, Mar 7, 2020 at 1:55 PM Jeff Newmiller
> <jdnewmil at dcn.davis.ca.us>
> wrote:
>
>> README.md is a github convention... do not try to treat it like part
>> of the R package documentation. Instead, list it in your
>> .Rbuildignore file and use it to inform developers how to change the
>> package and to direct
>> (potential) users browsing the GitHub repo to read the more
>> conventional R documentation of vignettes.
>>
>> On March 7, 2020 1:55:24 PM PST, Jeffry Hesse <jhesse at sonatype.com> wrote:
>>> Hi there!
>>>
>>> I and a few others have been working on an R package we'd like to
>>> get on CRAN. The package itself checks R dependencies to see if they
>>> have a known CWE or CVE attached to them, and is intended to help R
>>> developers get a better understanding on the quality of the
>>> dependencies they use!
>>>
>>> An example of it running is here:
>>>
>>>
>> https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck
>> /00install.out
>>>
>>> And example of the output of R CMD check is here:
>>>
>>>
>> https://61-244738782-gh.circle-artifacts.com/0/~/oysteR/oysteR.Rcheck
>> /00check.log
>>>
>>> I have had some confusing experiences thus far with a README.md
>>> file, and excluded it in our .Rbuildignore, because I kept getting:
>>>
>>> * checking top-level files ... WARNING Conversion of ?README.md?
>>> failed:
>>> "template" (line 18, column 17):
>>> unexpected "("
>>> expecting "." or "$"
>>>
>>> This error is very cryptic to me, and I couldn't figure it out after
>>> a bunch of wonderful googling :)
>>>
>>> The README.rmd file is here:
>>> https://github.com/sonatype-nexus-community/oysteR/blob/master/READM
>>> E.Rmd
>>>
>>> Output README.md generated with rmarkdown is here:
>>>
>> https://raw.githubusercontent.com/sonatype-nexus-community/oysteR/mas
>> ter/README.md
>>>
>>> Ideally I think it would be nice to include it in our R package, but
>>> that WARNING keeps scaring me :)
>>>
>>> If anyone has any insight into the cause of that warning, would love
>>> to know.
>>>
>>> Any other feedback on the package would be great too! I'm not an R
>>> developer by trade (but love it), and this is my first go at this.
>>> Figured
>>> I'd reach out here to hopefully help save some back and forth
>>> between CRAN maintainers when I go to submit.
>>>
>>> CODE: https://github.com/sonatype-nexus-community/oysteR
>>>
>>> Also, we are actively looking for contributors that want to help
>>> out, so if this project interests you, come on over!
>>>
>>> Cheers, and thanks in advance for any help!
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>
>
>

--
Michael
http://www.dewey.myzen.co.uk/home.html

______________________________________________
R-package-devel at r-project.org mailing list https://stat.ethz.ch/mailman/listinfo/r-package-devel
______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From d@v|dhughjone@ @end|ng |rom gm@||@com  Sun Mar  8 23:27:45 2020
From: d@v|dhughjone@ @end|ng |rom gm@||@com (David Hugh-Jones)
Date: Sun, 8 Mar 2020 22:27:45 +0000
Subject: [R-pkg-devel] slightly polemic question re R CMD check
In-Reply-To: <AA2F51AA-7CA2-448D-8207-4CAC56F8A432@dcn.davis.ca.us>
References: <CAARY7kiiUSO5jt-gokfoRd99ByNpk0saVWrCUnKh1tKCRTmeLQ@mail.gmail.com>
 <CABtg=K=_nwskuzDTyL5UAWmMTXBuV-LXykszw0CJYQ0jsTT8Fw@mail.gmail.com>
 <CAARY7kjmGZzVeO__V3Me+a=HgbfrzDQEOYuSEftsakHHDevOpQ@mail.gmail.com>
 <11536DFA-80BD-447A-909D-536F298DBFFF@dcn.davis.ca.us>
 <CAARY7kgjNZM3qX3QV6kJrsQ3KFXKmnaSMW3pFv+zruKiY3HxhQ@mail.gmail.com>
 <AA2F51AA-7CA2-448D-8207-4CAC56F8A432@dcn.davis.ca.us>
Message-ID: <CAARY7kiJ6g_LiKep5s5m3M_KSxJOqEp8nPFSwdcsJJn7dWMHZA@mail.gmail.com>

I see the logic, but it seems in practice people often write specific
methods with their own specific arguments. (Think of the many plot or print
methods for different objects, for example.) Here, enforcing a ... argument
does not buy us much. All that we really need is that plot(x) will work for
many classes of x. Beyond that, we expect users to read the method-specific
documentation.

Maybe this is an antipattern. It just seems that S3 methods have turned out
to be often used that way. Enforcing ... hasn't stopped it, and causes some
awkwardnesses in documentation and error checking. To be clear, I'm not
arguing against the generic having flexibility. I'm arguing against
enforcing that the method always accepts every argument that the generic
could accept.




On Sun, 8 Mar 2020, 17:14 Jeff Newmiller, <jdnewmil at dcn.davis.ca.us> wrote:

> R encourages the use of ... particularly in S3 generics, to avoid
> over-depending on inheritance to enable flexible use of these generics.
> That is, when you call the generic without knowing which class you are
> giving it, you cannot specify class-specific arguments. However, some
> methods have obvious alternative class-specific behaviors that are
> typically enabled using class-specific arguments (e.g. plot). You cannot
> support both fully-generic calls and class-specific calls without giving
> the generic some flexibility that won't get used in some cases.
>
>
> On March 8, 2020 9:41:51 AM PDT, David Hugh-Jones <
> davidhughjones at gmail.com> wrote:
> >Hi Jeff,
> >
> >I wouldn't say R encourages that in general. Non-generic functions will
> >throw an error if you use a non-existent argument. And some generic
> >functions check for it:
> >
> >seq(1, 3, blah = 1)
> >[1] 1 2 3
> >Warning message:
> >In seq.default(1, 3, blah = 1) :
> > extra argument ?blah? will be disregarded
> >
> >In fact there is even a `chkDots()` function to help with this - which,
> >despite having used R or 17 years, I first discovered today :-). So, it
> >seems the R base developers thought lenient argument checking could be
> >a
> >bad thing, presumably because it lets errors go undetected.
> >
> >Maybe chkDots is a reasonable workaround. But I wonder what the
> >rationale
> >is for R CMD check enforcing that methods *must* be as lenient as the
> >generic. It seems to lead to a lot of documentation of the form:
> >
> >@param ... Not used.
> >
> >Cheers,
> >David
> >
> >
> >On Sun, 8 Mar 2020 at 16:24, Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> >wrote:
> >
> >> You seem to think this is a bad thing. R does encourage lenient
> >argument
> >> checking... what rock have you been under for the last 20 years?
> >>
> >> On March 8, 2020 5:41:51 AM PDT, David Hugh-Jones <
> >> davidhughjones at gmail.com> wrote:
> >> >You're quite right :-) But I think the polemic still holds, because
> >I
> >> >have
> >> >to add manual argument checking to all my methods, which has a cost
> >in
> >> >lines of code. Indeed, few base R methods have chosen to do this. In
> >> >effect, the current setup encourages writing methods with "lenient"
> >> >argument specifications.
> >> >
> >> >Thank you for the suggestion about ellipsis.
> >> >
> >> >On Sun, 8 Mar 2020, 11:04 G?bor Cs?rdi, <csardi.gabor at gmail.com>
> >wrote:
> >> >
> >> >> You can add the ... argument to chop.default(), and then check
> >that
> >> >> length(list(...)) is zero.
> >> >>
> >> >> Also, you might be interested in the ellipsis package.
> >> >>
> >> >> Gabor
> >> >>
> >> >> On Sun, Mar 8, 2020 at 10:56 AM David Hugh-Jones
> >> >> <davidhughjones at gmail.com> wrote:
> >> >> >
> >> >> > Hi all,
> >> >> >
> >> >> > My package defines the following method and generic:
> >> >> >
> >> >> > chop <- function (x, ...) UseMethod("chop")
> >> >> >
> >> >> > chop.default <- function (x, breaks, labels, extend = NULL, drop
> >=
> >> >TRUE)
> >> >> {
> >> >> > ... }
> >> >> >
> >> >> > R CMD check then gives a warning:
> >> >> >
> >> >> > W  checking S3 generic/method consistency (695ms)
> >> >> >    chop:
> >> >> >      function(x, ...)
> >> >> >    chop.default:
> >> >> >      function(x, breaks, labels, extend, drop)
> >> >> >
> >> >> >    See section ?Generic functions and methods? in the ?Writing R
> >> >> >    Extensions? manual.
> >> >> >
> >> >> > I can fix this by adding a ... argument to chop.default:
> >> >> >
> >> >> > chop.default <- function (x, breaks, labels, extend = NULL, drop
> >=
> >> >> > TRUE, ...)
> >> >> >
> >> >> > But that makes the code less robust because e.g.
> >> >> >
> >> >> > chop(x, Breaks = 1:3)
> >> >> >
> >> >> > will no longer throw an error from the misspelled argument.
> >> >> >
> >> >> > Or I can write:
> >> >> >
> >> >> > chop(x, breaks, labels, extend, drop) UseMethod("chop")
> >> >> >
> >> >> > but this means I cannot use a different interface for a
> >different
> >> >method.
> >> >> >
> >> >> > This seems like a mistake. (That's the polemic.) Or am I missing
> >a
> >> >better
> >> >> > way? (That's the question.)
> >> >> >
> >> >> > David
> >> >> >
> >> >> >         [[alternative HTML version deleted]]
> >> >> >
> >> >> > ______________________________________________
> >> >> > R-package-devel at r-project.org mailing list
> >> >> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >> >>
> >> >
> >> >       [[alternative HTML version deleted]]
> >> >
> >> >______________________________________________
> >> >R-package-devel at r-project.org mailing list
> >> >https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >> --
> >> Sent from my phone. Please excuse my brevity.
> >>
>
> --
> Sent from my phone. Please excuse my brevity.
>

	[[alternative HTML version deleted]]


From |@b|o@corr@d|n| @end|ng |rom |n|@@c|  Mon Mar  9 10:43:22 2020
From: |@b|o@corr@d|n| @end|ng |rom |n|@@c| (Fabio Corradini Santander)
Date: Mon, 9 Mar 2020 10:43:22 +0100
Subject: [R-pkg-devel] Package in 'sugests' archived
Message-ID: <CAOxgwDBWOZOMxZ1PJYYrTp-U20aOB0mBdmQgMv=3qGcqy2beFg@mail.gmail.com>

Hi,
I recently submitted my frist package to CRAN (
https://CRAN.R-project.org/package=uFTIR). It was accepted last friday. I
was super happy about it. However, today I check the results and there are
several error flags in the package status. What happened?

I included a package called prospectr within the suggested packages. I only
use it to run two examples. The idea was to show potential users that they
can pass functions from other packages in one of the processing steps.

I did not notice that the package was old. It was updated in 2014 for the
last time. Funny enough, the prospectr package was archived on saturday.
Yes, one day after my package was accepted. (
https://CRAN.R-project.org/package=prospectr)

Now I have to deal with the errors. As I mentioned, fixing the problems
should be easy as I only included the package in two examples. My question
is, then, what should I do? Should I fix the problem and submit a new
'version' to CRAN right away or should I wait? I read in the repository
policy that one should wait between versions at least '1?2 months'.

-- 
Fabio.

-- 


	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Mon Mar  9 12:43:35 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Mon, 9 Mar 2020 07:43:35 -0400
Subject: [R-pkg-devel] Package in 'sugests' archived
In-Reply-To: <CAOxgwDBWOZOMxZ1PJYYrTp-U20aOB0mBdmQgMv=3qGcqy2beFg@mail.gmail.com>
References: <CAOxgwDBWOZOMxZ1PJYYrTp-U20aOB0mBdmQgMv=3qGcqy2beFg@mail.gmail.com>
Message-ID: <77587c10-dc60-1c80-cb66-320d561c7912@gmail.com>


  I would ask the CRAN maintainers (cran at r-project.org).  I would guess
they will want a new submission.  The full text of the repository policy is

> Submitting updates should be done responsibly and with respect for the
volunteers? time. Once a package is established (which may take several
rounds), ?no more than every 1?2 months? seems appropriate.

  which IMO clearly leaves wiggle room for this kind of special situation.

  General advice for that the future is that you should make sure that
all package machinery that uses Suggested package should run
*conditionally* ("if requireNamespace(prospectr) { ... }") so that it
will work correctly even if the package is missing/unavailable: see
https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Suggested-packages

  Ben Bolker

On 2020-03-09 5:43 a.m., Fabio Corradini Santander wrote:
> Hi,
> I recently submitted my frist package to CRAN (
> https://CRAN.R-project.org/package=uFTIR). It was accepted last friday. I
> was super happy about it. However, today I check the results and there are
> several error flags in the package status. What happened?
> 
> I included a package called prospectr within the suggested packages. I only
> use it to run two examples. The idea was to show potential users that they
> can pass functions from other packages in one of the processing steps.
> 
> I did not notice that the package was old. It was updated in 2014 for the
> last time. Funny enough, the prospectr package was archived on saturday.
> Yes, one day after my package was accepted. (
> https://CRAN.R-project.org/package=prospectr)
> 
> Now I have to deal with the errors. As I mentioned, fixing the problems
> should be easy as I only included the package in two examples. My question
> is, then, what should I do? Should I fix the problem and submit a new
> 'version' to CRAN right away or should I wait? I read in the repository
> policy that one should wait between versions at least '1?2 months'.
>


From hongoo| @end|ng |rom m|cro@o|t@com  Mon Mar  9 17:51:47 2020
From: hongoo| @end|ng |rom m|cro@o|t@com (Hong Ooi)
Date: Mon, 9 Mar 2020 16:51:47 +0000
Subject: [R-pkg-devel] [EXTERNAL] Re: slightly polemic question re R CMD
 check
In-Reply-To: <CAARY7kiJ6g_LiKep5s5m3M_KSxJOqEp8nPFSwdcsJJn7dWMHZA@mail.gmail.com>
References: <CAARY7kiiUSO5jt-gokfoRd99ByNpk0saVWrCUnKh1tKCRTmeLQ@mail.gmail.com>
 <CABtg=K=_nwskuzDTyL5UAWmMTXBuV-LXykszw0CJYQ0jsTT8Fw@mail.gmail.com>
 <CAARY7kjmGZzVeO__V3Me+a=HgbfrzDQEOYuSEftsakHHDevOpQ@mail.gmail.com>
 <11536DFA-80BD-447A-909D-536F298DBFFF@dcn.davis.ca.us>
 <CAARY7kgjNZM3qX3QV6kJrsQ3KFXKmnaSMW3pFv+zruKiY3HxhQ@mail.gmail.com>
 <AA2F51AA-7CA2-448D-8207-4CAC56F8A432@dcn.davis.ca.us>
 <CAARY7kiJ6g_LiKep5s5m3M_KSxJOqEp8nPFSwdcsJJn7dWMHZA@mail.gmail.com>
Message-ID: <KU1P153MB01021BBAC3DF3CB72A7E604EA6FE0@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>

I tend to agree. Having ... as an argument for a specific method is often unnecessary, and furthermore, can result in errors being hidden. Eg you think you're calling

methodname(arg1, arg2="whatever")

but you're really calling

methodname(arg1, ar2="whatever")

and the misspelling isn't picked up, because it gets swallowed by the ... .

IMO the whole reason for the current state of affairs is because of a wart in how lm and glm were implemented back in the S-Plus days. A glm object inherits from lm, which doesn't make a lot of sense. It should really be the other way round: the specific case should inherit from the general, so that an lm is a glm, not a glm is an lm. It's way too late to change this now, of course.


-----Original Message-----
From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf Of David Hugh-Jones
Sent: Sunday, 8 March 2020 6:28 PM
To: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Cc: R package devel <r-package-devel at r-project.org>
Subject: [EXTERNAL] Re: [R-pkg-devel] slightly polemic question re R CMD check

I see the logic, but it seems in practice people often write specific
methods with their own specific arguments. (Think of the many plot or print
methods for different objects, for example.) Here, enforcing a ... argument
does not buy us much. All that we really need is that plot(x) will work for
many classes of x. Beyond that, we expect users to read the method-specific
documentation.

Maybe this is an antipattern. It just seems that S3 methods have turned out
to be often used that way. Enforcing ... hasn't stopped it, and causes some
awkwardnesses in documentation and error checking. To be clear, I'm not
arguing against the generic having flexibility. I'm arguing against
enforcing that the method always accepts every argument that the generic
could accept.




On Sun, 8 Mar 2020, 17:14 Jeff Newmiller, <jdnewmil at dcn.davis.ca.us> wrote:

> R encourages the use of ... particularly in S3 generics, to avoid
> over-depending on inheritance to enable flexible use of these generics.
> That is, when you call the generic without knowing which class you are
> giving it, you cannot specify class-specific arguments. However, some
> methods have obvious alternative class-specific behaviors that are
> typically enabled using class-specific arguments (e.g. plot). You cannot
> support both fully-generic calls and class-specific calls without giving
> the generic some flexibility that won't get used in some cases.
>
>
> On March 8, 2020 9:41:51 AM PDT, David Hugh-Jones <
> davidhughjones at gmail.com> wrote:
> >Hi Jeff,
> >
> >I wouldn't say R encourages that in general. Non-generic functions will
> >throw an error if you use a non-existent argument. And some generic
> >functions check for it:
> >
> >seq(1, 3, blah = 1)
> >[1] 1 2 3
> >Warning message:
> >In seq.default(1, 3, blah = 1) :
> > extra argument ?blah? will be disregarded
> >
> >In fact there is even a `chkDots()` function to help with this - which,
> >despite having used R or 17 years, I first discovered today :-). So, it
> >seems the R base developers thought lenient argument checking could be
> >a
> >bad thing, presumably because it lets errors go undetected.
> >
> >Maybe chkDots is a reasonable workaround. But I wonder what the
> >rationale
> >is for R CMD check enforcing that methods *must* be as lenient as the
> >generic. It seems to lead to a lot of documentation of the form:
> >
> >@param ... Not used.
> >
> >Cheers,
> >David
> >
> >
> >On Sun, 8 Mar 2020 at 16:24, Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> >wrote:
> >
> >> You seem to think this is a bad thing. R does encourage lenient
> >argument
> >> checking... what rock have you been under for the last 20 years?
> >>
> >> On March 8, 2020 5:41:51 AM PDT, David Hugh-Jones <
> >> davidhughjones at gmail.com> wrote:
> >> >You're quite right :-) But I think the polemic still holds, because
> >I
> >> >have
> >> >to add manual argument checking to all my methods, which has a cost
> >in
> >> >lines of code. Indeed, few base R methods have chosen to do this. In
> >> >effect, the current setup encourages writing methods with "lenient"
> >> >argument specifications.
> >> >
> >> >Thank you for the suggestion about ellipsis.
> >> >
> >> >On Sun, 8 Mar 2020, 11:04 G?bor Cs?rdi, <csardi.gabor at gmail.com>
> >wrote:
> >> >
> >> >> You can add the ... argument to chop.default(), and then check
> >that
> >> >> length(list(...)) is zero.
> >> >>
> >> >> Also, you might be interested in the ellipsis package.
> >> >>
> >> >> Gabor
> >> >>
> >> >> On Sun, Mar 8, 2020 at 10:56 AM David Hugh-Jones
> >> >> <davidhughjones at gmail.com> wrote:
> >> >> >
> >> >> > Hi all,
> >> >> >
> >> >> > My package defines the following method and generic:
> >> >> >
> >> >> > chop <- function (x, ...) UseMethod("chop")
> >> >> >
> >> >> > chop.default <- function (x, breaks, labels, extend = NULL, drop
> >=
> >> >TRUE)
> >> >> {
> >> >> > ... }
> >> >> >
> >> >> > R CMD check then gives a warning:
> >> >> >
> >> >> > W  checking S3 generic/method consistency (695ms)
> >> >> >    chop:
> >> >> >      function(x, ...)
> >> >> >    chop.default:
> >> >> >      function(x, breaks, labels, extend, drop)
> >> >> >
> >> >> >    See section ?Generic functions and methods? in the ?Writing R
> >> >> >    Extensions? manual.
> >> >> >
> >> >> > I can fix this by adding a ... argument to chop.default:
> >> >> >
> >> >> > chop.default <- function (x, breaks, labels, extend = NULL, drop
> >=
> >> >> > TRUE, ...)
> >> >> >
> >> >> > But that makes the code less robust because e.g.
> >> >> >
> >> >> > chop(x, Breaks = 1:3)
> >> >> >
> >> >> > will no longer throw an error from the misspelled argument.
> >> >> >
> >> >> > Or I can write:
> >> >> >
> >> >> > chop(x, breaks, labels, extend, drop) UseMethod("chop")
> >> >> >
> >> >> > but this means I cannot use a different interface for a
> >different
> >> >method.
> >> >> >
> >> >> > This seems like a mistake. (That's the polemic.) Or am I missing
> >a
> >> >better
> >> >> > way? (That's the question.)
> >> >> >
> >> >> > David
> >> >> >
> >> >> >         [[alternative HTML version deleted]]
> >> >> >
> >> >> > ______________________________________________
> >> >> > R-package-devel at r-project.org mailing list
> >> >> > https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7C0ad9cebc4ce24e7d50e508d7c3b006de%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637193033116746685&amp;sdata=CJ8fTRpoMUxAaJJkI7QSQylGZE3dtd8YLodIZn4C5xA%3D&amp;reserved=0
> >> >>
> >> >
> >> >       [[alternative HTML version deleted]]
> >> >
> >> >______________________________________________
> >> >R-package-devel at r-project.org mailing list
> >> >https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7C0ad9cebc4ce24e7d50e508d7c3b006de%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637193033116751662&amp;sdata=%2Ba6YarFqDW9nleC7EZjVStMzHwnpQMTTV69CPEEP7eg%3D&amp;reserved=0
> >>
> >> --
> >> Sent from my phone. Please excuse my brevity.
> >>
>
> --
> Sent from my phone. Please excuse my brevity.
>

	[[alternative HTML version deleted]]

______________________________________________
R-package-devel at r-project.org mailing list
https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7C0ad9cebc4ce24e7d50e508d7c3b006de%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637193033116751662&amp;sdata=%2Ba6YarFqDW9nleC7EZjVStMzHwnpQMTTV69CPEEP7eg%3D&amp;reserved=0

From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Mar  9 18:23:27 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 09 Mar 2020 10:23:27 -0700
Subject: [R-pkg-devel] [EXTERNAL] Re: slightly polemic question re R CMD
 check
In-Reply-To: <KU1P153MB01021BBAC3DF3CB72A7E604EA6FE0@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
References: <CAARY7kiiUSO5jt-gokfoRd99ByNpk0saVWrCUnKh1tKCRTmeLQ@mail.gmail.com>
 <CABtg=K=_nwskuzDTyL5UAWmMTXBuV-LXykszw0CJYQ0jsTT8Fw@mail.gmail.com>
 <CAARY7kjmGZzVeO__V3Me+a=HgbfrzDQEOYuSEftsakHHDevOpQ@mail.gmail.com>
 <11536DFA-80BD-447A-909D-536F298DBFFF@dcn.davis.ca.us>
 <CAARY7kgjNZM3qX3QV6kJrsQ3KFXKmnaSMW3pFv+zruKiY3HxhQ@mail.gmail.com>
 <AA2F51AA-7CA2-448D-8207-4CAC56F8A432@dcn.davis.ca.us>
 <CAARY7kiJ6g_LiKep5s5m3M_KSxJOqEp8nPFSwdcsJJn7dWMHZA@mail.gmail.com>
 <KU1P153MB01021BBAC3DF3CB72A7E604EA6FE0@KU1P153MB0102.APCP153.PROD.OUTLOOK.COM>
Message-ID: <7B0D939C-DA4D-4483-816C-5DF47DB91BF3@dcn.davis.ca.us>

Re backwards specialization... you could also say that a vector is a special kind of matrix... but it most definitely is not that way in R.

On March 9, 2020 9:51:47 AM PDT, Hong Ooi <hongooi at microsoft.com> wrote:
>I tend to agree. Having ... as an argument for a specific method is
>often unnecessary, and furthermore, can result in errors being hidden.
>Eg you think you're calling
>
>methodname(arg1, arg2="whatever")
>
>but you're really calling
>
>methodname(arg1, ar2="whatever")
>
>and the misspelling isn't picked up, because it gets swallowed by the
>... .
>
>IMO the whole reason for the current state of affairs is because of a
>wart in how lm and glm were implemented back in the S-Plus days. A glm
>object inherits from lm, which doesn't make a lot of sense. It should
>really be the other way round: the specific case should inherit from
>the general, so that an lm is a glm, not a glm is an lm. It's way too
>late to change this now, of course.
>
>
>-----Original Message-----
>From: R-package-devel <r-package-devel-bounces at r-project.org> On Behalf
>Of David Hugh-Jones
>Sent: Sunday, 8 March 2020 6:28 PM
>To: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>Cc: R package devel <r-package-devel at r-project.org>
>Subject: [EXTERNAL] Re: [R-pkg-devel] slightly polemic question re R
>CMD check
>
>I see the logic, but it seems in practice people often write specific
>methods with their own specific arguments. (Think of the many plot or
>print
>methods for different objects, for example.) Here, enforcing a ...
>argument
>does not buy us much. All that we really need is that plot(x) will work
>for
>many classes of x. Beyond that, we expect users to read the
>method-specific
>documentation.
>
>Maybe this is an antipattern. It just seems that S3 methods have turned
>out
>to be often used that way. Enforcing ... hasn't stopped it, and causes
>some
>awkwardnesses in documentation and error checking. To be clear, I'm not
>arguing against the generic having flexibility. I'm arguing against
>enforcing that the method always accepts every argument that the
>generic
>could accept.
>
>
>
>
>On Sun, 8 Mar 2020, 17:14 Jeff Newmiller, <jdnewmil at dcn.davis.ca.us>
>wrote:
>
>> R encourages the use of ... particularly in S3 generics, to avoid
>> over-depending on inheritance to enable flexible use of these
>generics.
>> That is, when you call the generic without knowing which class you
>are
>> giving it, you cannot specify class-specific arguments. However, some
>> methods have obvious alternative class-specific behaviors that are
>> typically enabled using class-specific arguments (e.g. plot). You
>cannot
>> support both fully-generic calls and class-specific calls without
>giving
>> the generic some flexibility that won't get used in some cases.
>>
>>
>> On March 8, 2020 9:41:51 AM PDT, David Hugh-Jones <
>> davidhughjones at gmail.com> wrote:
>> >Hi Jeff,
>> >
>> >I wouldn't say R encourages that in general. Non-generic functions
>will
>> >throw an error if you use a non-existent argument. And some generic
>> >functions check for it:
>> >
>> >seq(1, 3, blah = 1)
>> >[1] 1 2 3
>> >Warning message:
>> >In seq.default(1, 3, blah = 1) :
>> > extra argument ?blah? will be disregarded
>> >
>> >In fact there is even a `chkDots()` function to help with this -
>which,
>> >despite having used R or 17 years, I first discovered today :-). So,
>it
>> >seems the R base developers thought lenient argument checking could
>be
>> >a
>> >bad thing, presumably because it lets errors go undetected.
>> >
>> >Maybe chkDots is a reasonable workaround. But I wonder what the
>> >rationale
>> >is for R CMD check enforcing that methods *must* be as lenient as
>the
>> >generic. It seems to lead to a lot of documentation of the form:
>> >
>> >@param ... Not used.
>> >
>> >Cheers,
>> >David
>> >
>> >
>> >On Sun, 8 Mar 2020 at 16:24, Jeff Newmiller
><jdnewmil at dcn.davis.ca.us>
>> >wrote:
>> >
>> >> You seem to think this is a bad thing. R does encourage lenient
>> >argument
>> >> checking... what rock have you been under for the last 20 years?
>> >>
>> >> On March 8, 2020 5:41:51 AM PDT, David Hugh-Jones <
>> >> davidhughjones at gmail.com> wrote:
>> >> >You're quite right :-) But I think the polemic still holds,
>because
>> >I
>> >> >have
>> >> >to add manual argument checking to all my methods, which has a
>cost
>> >in
>> >> >lines of code. Indeed, few base R methods have chosen to do this.
>In
>> >> >effect, the current setup encourages writing methods with
>"lenient"
>> >> >argument specifications.
>> >> >
>> >> >Thank you for the suggestion about ellipsis.
>> >> >
>> >> >On Sun, 8 Mar 2020, 11:04 G?bor Cs?rdi, <csardi.gabor at gmail.com>
>> >wrote:
>> >> >
>> >> >> You can add the ... argument to chop.default(), and then check
>> >that
>> >> >> length(list(...)) is zero.
>> >> >>
>> >> >> Also, you might be interested in the ellipsis package.
>> >> >>
>> >> >> Gabor
>> >> >>
>> >> >> On Sun, Mar 8, 2020 at 10:56 AM David Hugh-Jones
>> >> >> <davidhughjones at gmail.com> wrote:
>> >> >> >
>> >> >> > Hi all,
>> >> >> >
>> >> >> > My package defines the following method and generic:
>> >> >> >
>> >> >> > chop <- function (x, ...) UseMethod("chop")
>> >> >> >
>> >> >> > chop.default <- function (x, breaks, labels, extend = NULL,
>drop
>> >=
>> >> >TRUE)
>> >> >> {
>> >> >> > ... }
>> >> >> >
>> >> >> > R CMD check then gives a warning:
>> >> >> >
>> >> >> > W  checking S3 generic/method consistency (695ms)
>> >> >> >    chop:
>> >> >> >      function(x, ...)
>> >> >> >    chop.default:
>> >> >> >      function(x, breaks, labels, extend, drop)
>> >> >> >
>> >> >> >    See section ?Generic functions and methods? in the
>?Writing R
>> >> >> >    Extensions? manual.
>> >> >> >
>> >> >> > I can fix this by adding a ... argument to chop.default:
>> >> >> >
>> >> >> > chop.default <- function (x, breaks, labels, extend = NULL,
>drop
>> >=
>> >> >> > TRUE, ...)
>> >> >> >
>> >> >> > But that makes the code less robust because e.g.
>> >> >> >
>> >> >> > chop(x, Breaks = 1:3)
>> >> >> >
>> >> >> > will no longer throw an error from the misspelled argument.
>> >> >> >
>> >> >> > Or I can write:
>> >> >> >
>> >> >> > chop(x, breaks, labels, extend, drop) UseMethod("chop")
>> >> >> >
>> >> >> > but this means I cannot use a different interface for a
>> >different
>> >> >method.
>> >> >> >
>> >> >> > This seems like a mistake. (That's the polemic.) Or am I
>missing
>> >a
>> >> >better
>> >> >> > way? (That's the question.)
>> >> >> >
>> >> >> > David
>> >> >> >
>> >> >> >         [[alternative HTML version deleted]]
>> >> >> >
>> >> >> > ______________________________________________
>> >> >> > R-package-devel at r-project.org mailing list
>> >> >> >
>https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7C0ad9cebc4ce24e7d50e508d7c3b006de%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637193033116746685&amp;sdata=CJ8fTRpoMUxAaJJkI7QSQylGZE3dtd8YLodIZn4C5xA%3D&amp;reserved=0
>> >> >>
>> >> >
>> >> >       [[alternative HTML version deleted]]
>> >> >
>> >> >______________________________________________
>> >> >R-package-devel at r-project.org mailing list
>> >>
>>https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7C0ad9cebc4ce24e7d50e508d7c3b006de%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637193033116751662&amp;sdata=%2Ba6YarFqDW9nleC7EZjVStMzHwnpQMTTV69CPEEP7eg%3D&amp;reserved=0
>> >>
>> >> --
>> >> Sent from my phone. Please excuse my brevity.
>> >>
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-package-devel&amp;data=02%7C01%7Chongooi%40microsoft.com%7C0ad9cebc4ce24e7d50e508d7c3b006de%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637193033116751662&amp;sdata=%2Ba6YarFqDW9nleC7EZjVStMzHwnpQMTTV69CPEEP7eg%3D&amp;reserved=0

-- 
Sent from my phone. Please excuse my brevity.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Mar 10 10:44:40 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 10 Mar 2020 10:44:40 +0100
Subject: [R-pkg-devel] Package in 'sugests' archived
In-Reply-To: <CAOxgwDBWOZOMxZ1PJYYrTp-U20aOB0mBdmQgMv=3qGcqy2beFg@mail.gmail.com>
References: <CAOxgwDBWOZOMxZ1PJYYrTp-U20aOB0mBdmQgMv=3qGcqy2beFg@mail.gmail.com>
Message-ID: <9b429363-96ce-4b00-0b80-0e02b6df8c4d@statistik.tu-dortmund.de>

Please simply submit a new version ideally without sugesting the 
archived one as you apparently do not need it for your paclkage's 
functionality at all.

Best,
Uwe Ligges

On 09.03.2020 10:43, Fabio Corradini Santander wrote:
> Hi,
> I recently submitted my frist package to CRAN (
> https://CRAN.R-project.org/package=uFTIR). It was accepted last friday. I
> was super happy about it. However, today I check the results and there are
> several error flags in the package status. What happened?
> 
> I included a package called prospectr within the suggested packages. I only
> use it to run two examples. The idea was to show potential users that they
> can pass functions from other packages in one of the processing steps.
> 
> I did not notice that the package was old. It was updated in 2014 for the
> last time. Funny enough, the prospectr package was archived on saturday.
> Yes, one day after my package was accepted. (
> https://CRAN.R-project.org/package=prospectr)
> 
> Now I have to deal with the errors. As I mentioned, fixing the problems
> should be easy as I only included the package in two examples. My question
> is, then, what should I do? Should I fix the problem and submit a new
> 'version' to CRAN right away or should I wait? I read in the repository
> policy that one should wait between versions at least '1?2 months'.
>


From ip@iom@res m@iii@g oii correo@ugr@es  Tue Mar 10 17:28:47 2020
From: ip@iom@res m@iii@g oii correo@ugr@es (ip@iom@res m@iii@g oii correo@ugr@es)
Date: Tue, 10 Mar 2020 17:28:47 +0100
Subject: [R-pkg-devel] Fwd: Re: [CRAN-pretest-archived] CRAN submission SSLR
 0.9.0
In-Reply-To: <aa3b1d7761e52c1571cee6f689876dde@correo.ugr.es>
References: <20200310150158.7DC19161E86@xmpalantir.wu.ac.at>
 <01d5f6ef$Blat.v3.2.16$5bfef6c8$f6d461f@mail.statistik.tu-dortmund.de>
 <25bc281f3c8844d1573da4a2c02a8a06@correo.ugr.es>
 <aa3b1d7761e52c1571cee6f689876dde@correo.ugr.es>
Message-ID: <7bb548a69bbd57b5cc784ccc0b5630ad@correo.ugr.es>

Hi, I thiks its weird:

The error is:  no applicable method for 'fit' applied to an object of 
class "model_sslr"

In the code:

#' fit
#'
#' @title fit object
#' @param object object
#' @param ... other parameters to be passed
#' @rdname fit
#' @export fit
fit <- function(object, ...){
   UseMethod("fit")
}


And:

#' @title Fit with formula and data
#' @description Funtion to fit through the formula
#' @param object is the model
#' @param formula is the formula
#' @param data is the total data train
#' @param ... unused in this case
#' @importFrom rlang quos
#' @rdname fit
#' @export
#' @export fit.model_sslr
fit.model_sslr <- function(object, formula = NULL, data = NULL, ...) {

   dots <- quos(...)


   if (all(c("x", "y") %in% names(dots)))
     rlang::abort("`fit.model_sslr()` is for the formula methods. Use 
`fit_xy()` instead.")

   fit_form_interface <- check_form_interface(formula, data)

   x_and_y <- get_x_y(formula, data)

   eval_env <- rlang::env()
   eval_env$x <- x_and_y$x
   eval_env$y <- x_and_y$y

   fit_interface <- check_xy_interface(eval_env$x, eval_env$y)

   elapsed <- system.time(model <- object$fit_function(eval_env$x, 
eval_env$y))

   
new_model_sslr_fitted(model,class(model),object$args,colnames(eval_env$x),elapsed,formula)

}


Thanks

El 2020-03-10 16:19, ligges at statistik.tu-dortmund.de escribi?:
> Dear maintainer,
> 
> package SSLR_0.9.0.tar.gz does not pass the incoming checks
> automatically, please see the following pre-tests:
> Windows:
> <https://win-builder.r-project.org/incoming_pretest/SSLR_0.9.0_20200310_160158/Windows/00check.log>
> Status: 2 ERRORs, 1 WARNING, 1 NOTE
> Debian:
> <https://win-builder.r-project.org/incoming_pretest/SSLR_0.9.0_20200310_160158/Debian/00check.log>
> Status: 1 ERROR, 1 WARNING, 1 NOTE
> 
> 
> 
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help
> on the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> If you are fairly certain the rejection is a false positive, please
> reply-all to this message and explain.
> 
> More details are given in the directory:
> <https://win-builder.r-project.org/incoming_pretest/SSLR_0.9.0_20200310_160158/>
> The files will be removed after roughly 7 days.
> 
> No strong reverse dependencies to be checked.
> 
> Best regards,
> CRAN teams' auto-check service
> 
> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
> Check: CRAN incoming feasibility, Result: NOTE
>   Maintainer: 'Francisco Jes??s Palomares Alabarce 
> <fpalomares at correo.ugr.es>'
> 
>   New submission
> 
>   Possibly mis-spelled words in DESCRIPTION:
>     SSLR (23:14)
>     VM (27:37)
> 
>   Found the following (possibly) invalid URLs:
>     URL: https://cran.r-project.org/web/packages/RSSL/RSSL.pdf
>       From: inst/doc/introduction.html
>             inst/doc/models.html
>       Status: 200
>       Message: OK
>       CRAN URL not in canonical form
>     The canonical URL of the CRAN page for a package is
>       https://CRAN.R-project.org/package=pkgname
> 
>   Found the following (possibly) invalid file URI:
>     URI: www.cs.ucr.edu/~eamonn/time_series_data/
>       From: man/coffee.Rd
> 
>   The Description field should not start with the package name,
>     'This package' or similar.
> 
> Flavor: r-devel-windows-ix86+x86_64
> Check: running examples for arch 'i386', Result: ERROR
>   Running examples in 'SSLR-Ex.R' failed
>   The error most likely occurred in:
> 
>   > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>   > ### Name: COREG
>   > ### Title: General Interface for COREG model
>   > ### Aliases: COREG
>   >
>   > ### ** Examples
>   >
>   > library(tidyverse)
>   -- Attaching packages ---------------------------------------
> tidyverse 1.3.0 --
>   v ggplot2 3.3.0     v purrr   0.3.3
>   v tibble  2.1.3     v dplyr   0.8.5
>   v tidyr   1.0.2     v stringr 1.4.0
>   v readr   1.3.1     v forcats 0.5.0
>   -- Conflicts ------------------------------------------
> tidyverse_conflicts() --
>   x dplyr::filter() masks stats::filter()
>   x dplyr::lag()    masks stats::lag()
>   > library(tidymodels)
>   -- Attaching packages --------------------------------------
> tidymodels 0.1.0 --
>   v broom     0.5.5     v rsample   0.0.5
>   v dials     0.0.4     v tune      0.0.1
>   v infer     0.5.1     v workflows 0.1.0
>   v parsnip   0.0.5     v yardstick 0.0.5
>   v recipes   0.1.9
>   -- Conflicts -----------------------------------------
> tidymodels_conflicts() --
>   x scales::discard()   masks purrr::discard()
>   x dplyr::filter()     masks stats::filter()
>   x recipes::fixed()    masks stringr::fixed()
>   x dplyr::lag()        masks stats::lag()
>   x dials::margin()     masks ggplot2::margin()
>   x yardstick::spec()   masks readr::spec()
>   x recipes::step()     masks stats::step()
>   x recipes::yj_trans() masks scales::yj_trans()
>   > library(SSLR)
>   >
>   > data <- na.omit(airquality)
>   > #data <- na.omit(airquality)
>   >
>   > cls <- which(colnames(data) == "Ozone")
>   >
>   > colnames(data)[cls]<- "class"
>   >
>   > set.seed(1)
>   > train.index  <- sample(nrow(data), round(0.7 * nrow(data)))
>   > train <- data[ train.index,]
>   > test  <- data[-train.index,]
>   >
>   >
>   > #% LABELED
>   > labeled.index <- sample(nrow(train), round(0.2 * nrow(train)))
>   > train[-labeled.index,cls] <- NA
>   >
>   > m <- COREG(max.iter = 2) %>% fit(class ~ ., data = train)
>   Error in UseMethod("fit") :
>     no applicable method for 'fit' applied to an object of class 
> "model_sslr"
>   Calls: %>% ... _fseq -> freduce -> withVisible -> <Anonymous> -> fit
>   Execution halted
> 
> Flavor: r-devel-windows-ix86+x86_64
> Check: running examples for arch 'x64', Result: ERROR
>   Running examples in 'SSLR-Ex.R' failed
>   The error most likely occurred in:
> 
>   > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>   > ### Name: COREG
>   > ### Title: General Interface for COREG model
>   > ### Aliases: COREG
>   >
>   > ### ** Examples
>   >
>   > library(tidyverse)
>   -- Attaching packages ---------------------------------------
> tidyverse 1.3.0 --
>   v ggplot2 3.3.0     v purrr   0.3.3
>   v tibble  2.1.3     v dplyr   0.8.5
>   v tidyr   1.0.2     v stringr 1.4.0
>   v readr   1.3.1     v forcats 0.5.0
>   -- Conflicts ------------------------------------------
> tidyverse_conflicts() --
>   x dplyr::filter() masks stats::filter()
>   x dplyr::lag()    masks stats::lag()
>   > library(tidymodels)
>   -- Attaching packages --------------------------------------
> tidymodels 0.1.0 --
>   v broom     0.5.5     v rsample   0.0.5
>   v dials     0.0.4     v tune      0.0.1
>   v infer     0.5.1     v workflows 0.1.0
>   v parsnip   0.0.5     v yardstick 0.0.5
>   v recipes   0.1.9
>   -- Conflicts -----------------------------------------
> tidymodels_conflicts() --
>   x scales::discard()   masks purrr::discard()
>   x dplyr::filter()     masks stats::filter()
>   x recipes::fixed()    masks stringr::fixed()
>   x dplyr::lag()        masks stats::lag()
>   x dials::margin()     masks ggplot2::margin()
>   x yardstick::spec()   masks readr::spec()
>   x recipes::step()     masks stats::step()
>   x recipes::yj_trans() masks scales::yj_trans()
>   > library(SSLR)
>   >
>   > data <- na.omit(airquality)
>   > #data <- na.omit(airquality)
>   >
>   > cls <- which(colnames(data) == "Ozone")
>   >
>   > colnames(data)[cls]<- "class"
>   >
>   > set.seed(1)
>   > train.index  <- sample(nrow(data), round(0.7 * nrow(data)))
>   > train <- data[ train.index,]
>   > test  <- data[-train.index,]
>   >
>   >
>   > #% LABELED
>   > labeled.index <- sample(nrow(train), round(0.2 * nrow(train)))
>   > train[-labeled.index,cls] <- NA
>   >
>   > m <- COREG(max.iter = 2) %>% fit(class ~ ., data = train)
>   Error in UseMethod("fit") :
>     no applicable method for 'fit' applied to an object of class 
> "model_sslr"
>   Calls: %>% ... _fseq -> freduce -> withVisible -> <Anonymous> -> fit
>   Execution halted
> 
> Flavor: r-devel-windows-ix86+x86_64
> Check: re-building of vignette outputs, Result: WARNING
>   Error(s) in re-building vignettes:
>   --- re-building 'classification.Rmd' using rmarkdown
>   Quitting from lines 58-60 (classification.Rmd)
>   Error: processing vignette 'classification.Rmd' failed with 
> diagnostics:
>   no applicable method for 'fit' applied to an object of class 
> "model_sslr"
>   --- failed re-building 'classification.Rmd'
> 
>   --- re-building 'fit.Rmd' using rmarkdown
>   --- finished re-building 'fit.Rmd'
> 
>   --- re-building 'introduction.Rmd' using rmarkdown
>   --- finished re-building 'introduction.Rmd'
> 
>   --- re-building 'models.Rmd' using rmarkdown
>   --- finished re-building 'models.Rmd'
> 
>   --- re-building 'regression.Rmd' using rmarkdown
>   Quitting from lines 51-53 (regression.Rmd)
>   Error: processing vignette 'regression.Rmd' failed with diagnostics:
>   no applicable method for 'fit' applied to an object of class 
> "model_sslr"
>   --- failed re-building 'regression.Rmd'
> 
>   SUMMARY: processing the following files failed:
>     'classification.Rmd' 'regression.Rmd'
> 
>   Error: Vignette re-building failed.
>   Execution halted
> 
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: examples, Result: ERROR
>   Running examples in 'SSLR-Ex.R' failed
>   The error most likely occurred in:
> 
>   > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>   > ### Name: COREG
>   > ### Title: General Interface for COREG model
>   > ### Aliases: COREG
>   >
>   > ### ** Examples
>   >
>   > library(tidyverse)
>   ?????? Attaching packages
> ?????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
> tidyverse 1.3.0 ??????
>   ??? ggplot2 3.3.0     ??? purrr   0.3.3
>   ??? tibble  2.1.3     ??? dplyr   0.8.5
>   ??? tidyr   1.0.2     ??? stringr 1.4.0
>   ??? readr   1.3.1     ??? forcats 0.5.0
>   ?????? Conflicts
> ??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
> tidyverse_conflicts() ??????
>   ??? dplyr::filter() masks stats::filter()
>   ??? dplyr::lag()    masks stats::lag()
>   > library(tidymodels)
>   ?????? Attaching packages
> ??????????????????????????????????????????????????????????????????????????????????????????????????????????????????
> tidymodels 0.1.0 ??????
>   ??? broom     0.5.5     ??? rsample   0.0.5
>   ??? dials     0.0.4     ??? tune      0.0.1
>   ??? infer     0.5.1     ??? workflows 0.1.0
>   ??? parsnip   0.0.5     ??? yardstick 0.0.5
>   ??? recipes   0.1.9
>   ?????? Conflicts
> ???????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
> tidymodels_conflicts() ??????
>   ??? scales::discard()   masks purrr::discard()
>   ??? dplyr::filter()     masks stats::filter()
>   ??? recipes::fixed()    masks stringr::fixed()
>   ??? dplyr::lag()        masks stats::lag()
>   ??? dials::margin()     masks ggplot2::margin()
>   ??? yardstick::spec()   masks readr::spec()
>   ??? recipes::step()     masks stats::step()
>   ??? recipes::yj_trans() masks scales::yj_trans()
>   > library(SSLR)
>   >
>   > data <- na.omit(airquality)
>   > #data <- na.omit(airquality)
>   >
>   > cls <- which(colnames(data) == "Ozone")
>   >
>   > colnames(data)[cls]<- "class"
>   >
>   > set.seed(1)
>   > train.index  <- sample(nrow(data), round(0.7 * nrow(data)))
>   > train <- data[ train.index,]
>   > test  <- data[-train.index,]
>   >
>   >
>   > #% LABELED
>   > labeled.index <- sample(nrow(train), round(0.2 * nrow(train)))
>   > train[-labeled.index,cls] <- NA
>   >
>   > m <- COREG(max.iter = 2) %>% fit(class ~ ., data = train)
>   Error in UseMethod("fit") :
>     no applicable method for 'fit' applied to an object of class 
> "model_sslr"
>   Calls: %>% ... _fseq -> freduce -> withVisible -> <Anonymous> -> fit
>   Execution halted
> 
> Flavor: r-devel-linux-x86_64-debian-gcc
> Check: re-building of vignette outputs, Result: WARNING
>   Error(s) in re-building vignettes:
>     ...
>   --- re-building 'classification.Rmd' using rmarkdown
>   Quitting from lines 58-60 (classification.Rmd)
>   Error: processing vignette 'classification.Rmd' failed with 
> diagnostics:
>   no applicable method for 'fit' applied to an object of class 
> "model_sslr"
>   --- failed re-building 'classification.Rmd'
> 
>   --- re-building 'fit.Rmd' using rmarkdown
>   --- finished re-building 'fit.Rmd'
> 
>   --- re-building 'introduction.Rmd' using rmarkdown
>   --- finished re-building 'introduction.Rmd'
> 
>   --- re-building 'models.Rmd' using rmarkdown
>   --- finished re-building 'models.Rmd'
> 
>   --- re-building 'regression.Rmd' using rmarkdown
>   Quitting from lines 51-53 (regression.Rmd)
>   Error: processing vignette 'regression.Rmd' failed with diagnostics:
>   no applicable method for 'fit' applied to an object of class 
> "model_sslr"
>   --- failed re-building 'regression.Rmd'
> 
>   SUMMARY: processing the following files failed:
>     'classification.Rmd' 'regression.Rmd'
> 
>   Error: Vignette re-building failed.
>   Execution halted


From |@w@onj@|7net @end|ng |rom gm@||@com  Tue Mar 10 17:48:04 2020
From: |@w@onj@|7net @end|ng |rom gm@||@com (John Lawson)
Date: Tue, 10 Mar 2020 10:48:04 -0600
Subject: [R-pkg-devel] package daewr does not pass incoming checks
 automatically
Message-ID: <CAJiVmSDxL7Gki6_48j+EYKPMEezDZHa6q5_64jnT=e0JwjA9dQ@mail.gmail.com>

The package daewr contains the data sets and functions shown in the book
"Design and Analysis of Experiments with R" published by CRC press. It has
been on CRAN since the book was first published in 2015.  Recently I
included a new function, but have not been able to include the modified
package on CRAN.

I get the message from Debian:

* DONE
Status: 1 WARNING, 1 NOTE

Current CRAN status: WARN: 1, OK: 12
See: <https://CRAN.R-project.org/web/checks/check_results_daewr.html>

Version: 1.1-8
Check: package dependencies, Result: WARNING
  Requires orphaned package: ?BsMD?
See: <https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/daewr-00check.html>


I do not get this warning from the Windows:

Although the package BsMD is orphaned, it is still available on CRAN and
all examples in the book that use functions in daewr that call functions
from BsMD work as they always have. The new function I have added does not
require BsMD. Is there any way I can upload my modified package to CRAN so
that the new function is available?  Any help would be greatly appreciated.

John Lawson

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Mar 10 18:02:02 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 10 Mar 2020 10:02:02 -0700
Subject: [R-pkg-devel] package daewr does not pass incoming checks
 automatically
In-Reply-To: <CAJiVmSDxL7Gki6_48j+EYKPMEezDZHa6q5_64jnT=e0JwjA9dQ@mail.gmail.com>
References: <CAJiVmSDxL7Gki6_48j+EYKPMEezDZHa6q5_64jnT=e0JwjA9dQ@mail.gmail.com>
Message-ID: <ecaa1db9-8eea-ff41-ae61-5f8216d5dae7@gmail.com>

On 10/03/2020 9:48 a.m., John Lawson wrote:
> The package daewr contains the data sets and functions shown in the book
> "Design and Analysis of Experiments with R" published by CRC press. It has
> been on CRAN since the book was first published in 2015.  Recently I
> included a new function, but have not been able to include the modified
> package on CRAN.
> 
> I get the message from Debian:
> 
> * DONE
> Status: 1 WARNING, 1 NOTE
> 
> Current CRAN status: WARN: 1, OK: 12
> See: <https://CRAN.R-project.org/web/checks/check_results_daewr.html>
> 
> Version: 1.1-8
> Check: package dependencies, Result: WARNING
>    Requires orphaned package: ?BsMD?
> See: <https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/daewr-00check.html>
> 
> 
> I do not get this warning from the Windows:
> 
> Although the package BsMD is orphaned, it is still available on CRAN and
> all examples in the book that use functions in daewr that call functions
> from BsMD work as they always have. The new function I have added does not
> require BsMD. Is there any way I can upload my modified package to CRAN so
> that the new function is available?  Any help would be greatly appreciated.
> 

I suspect the logic is this:

Even though BsMD checks OK now, eventually some change in R or the check 
process will likely require changes to it.  However, since it is 
orphaned, there is nobody to ask to make those changes, so other 
packages should be discouraged from depending on it until a new 
maintainer steps forward.

So you have three choices:

1.  Volunteer to maintain BsMD, and take on the responsibility of 
modifying it in the future.

2.  Stop depending on it now, so that when it eventually breaks, your 
package won't be affected.

Either one of those choices requires some extra work from you, but it's 
not an emergency, as it would be if BsMD was suddenly unavailable.

Your third choice is less work, but less satisfying:

3.  Don't include the new function until someone else steps forward to 
maintain BsMD, or you are forced to make changes for some other reason.

Duncan Murdoch


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Mar 10 18:11:56 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 10 Mar 2020 18:11:56 +0100
Subject: [R-pkg-devel] package daewr does not pass incoming checks
 automatically
In-Reply-To: <CAJiVmSDxL7Gki6_48j+EYKPMEezDZHa6q5_64jnT=e0JwjA9dQ@mail.gmail.com>
References: <CAJiVmSDxL7Gki6_48j+EYKPMEezDZHa6q5_64jnT=e0JwjA9dQ@mail.gmail.com>
Message-ID: <fb9c3ea6-756b-c719-f198-ca56609f7081@statistik.tu-dortmund.de>

We do not accept submissions that strongnly depend on orphaned packages 
as these are subject to be archived from CRAN.

Best,
Uwe Ligges


On 10.03.2020 17:48, John Lawson wrote:
> The package daewr contains the data sets and functions shown in the book
> "Design and Analysis of Experiments with R" published by CRC press. It has
> been on CRAN since the book was first published in 2015.  Recently I
> included a new function, but have not been able to include the modified
> package on CRAN.
> 
> I get the message from Debian:
> 
> * DONE
> Status: 1 WARNING, 1 NOTE
> 
> Current CRAN status: WARN: 1, OK: 12
> See: <https://CRAN.R-project.org/web/checks/check_results_daewr.html>
> 
> Version: 1.1-8
> Check: package dependencies, Result: WARNING
>    Requires orphaned package: ?BsMD?
> See: <https://www.r-project.org/nosvn/R.check/r-devel-linux-x86_64-fedora-clang/daewr-00check.html>
> 
> 
> I do not get this warning from the Windows:
> 
> Although the package BsMD is orphaned, it is still available on CRAN and
> all examples in the book that use functions in daewr that call functions
> from BsMD work as they always have. The new function I have added does not
> require BsMD. Is there any way I can upload my modified package to CRAN so
> that the new function is available?  Any help would be greatly appreciated.
> 
> John Lawson
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Mar 10 18:12:34 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 10 Mar 2020 18:12:34 +0100
Subject: [R-pkg-devel] 
 Fwd: Re: [CRAN-pretest-archived] CRAN submission SSLR 0.9.0
In-Reply-To: <7bb548a69bbd57b5cc784ccc0b5630ad@correo.ugr.es>
References: <20200310150158.7DC19161E86@xmpalantir.wu.ac.at>
 <01d5f6ef$Blat.v3.2.16$5bfef6c8$f6d461f@mail.statistik.tu-dortmund.de>
 <25bc281f3c8844d1573da4a2c02a8a06@correo.ugr.es>
 <aa3b1d7761e52c1571cee6f689876dde@correo.ugr.es>
 <7bb548a69bbd57b5cc784ccc0b5630ad@correo.ugr.es>
Message-ID: <0208e902-87f1-bb86-a73d-a8ec11e4d77b@statistik.tu-dortmund.de>

I do not speak roxygen, but you have to register the S3 method.

Best,
Uwe Ligges

On 10.03.2020 17:28, fpalomares at correo.ugr.es wrote:
> Hi, I thiks its weird:
> 
> The error is:? no applicable method for 'fit' applied to an object of 
> class "model_sslr"
> 
> In the code:
> 
> #' fit
> #'
> #' @title fit object
> #' @param object object
> #' @param ... other parameters to be passed
> #' @rdname fit
> #' @export fit
> fit <- function(object, ...){
>  ? UseMethod("fit")
> }
> 
> 
> And:
> 
> #' @title Fit with formula and data
> #' @description Funtion to fit through the formula
> #' @param object is the model
> #' @param formula is the formula
> #' @param data is the total data train
> #' @param ... unused in this case
> #' @importFrom rlang quos
> #' @rdname fit
> #' @export
> #' @export fit.model_sslr
> fit.model_sslr <- function(object, formula = NULL, data = NULL, ...) {
> 
>  ? dots <- quos(...)
> 
> 
>  ? if (all(c("x", "y") %in% names(dots)))
>  ??? rlang::abort("`fit.model_sslr()` is for the formula methods. Use 
> `fit_xy()` instead.")
> 
>  ? fit_form_interface <- check_form_interface(formula, data)
> 
>  ? x_and_y <- get_x_y(formula, data)
> 
>  ? eval_env <- rlang::env()
>  ? eval_env$x <- x_and_y$x
>  ? eval_env$y <- x_and_y$y
> 
>  ? fit_interface <- check_xy_interface(eval_env$x, eval_env$y)
> 
>  ? elapsed <- system.time(model <- object$fit_function(eval_env$x, 
> eval_env$y))
> 
> new_model_sslr_fitted(model,class(model),object$args,colnames(eval_env$x),elapsed,formula) 
> 
> 
> }
> 
> 
> Thanks
> 
> El 2020-03-10 16:19, ligges at statistik.tu-dortmund.de escribi?:
>> Dear maintainer,
>>
>> package SSLR_0.9.0.tar.gz does not pass the incoming checks
>> automatically, please see the following pre-tests:
>> Windows:
>> <https://win-builder.r-project.org/incoming_pretest/SSLR_0.9.0_20200310_160158/Windows/00check.log> 
>>
>> Status: 2 ERRORs, 1 WARNING, 1 NOTE
>> Debian:
>> <https://win-builder.r-project.org/incoming_pretest/SSLR_0.9.0_20200310_160158/Debian/00check.log> 
>>
>> Status: 1 ERROR, 1 WARNING, 1 NOTE
>>
>>
>>
>> Please fix all problems and resubmit a fixed version via the webform.
>> If you are not sure how to fix the problems shown, please ask for help
>> on the R-package-devel mailing list:
>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>> If you are fairly certain the rejection is a false positive, please
>> reply-all to this message and explain.
>>
>> More details are given in the directory:
>> <https://win-builder.r-project.org/incoming_pretest/SSLR_0.9.0_20200310_160158/> 
>>
>> The files will be removed after roughly 7 days.
>>
>> No strong reverse dependencies to be checked.
>>
>> Best regards,
>> CRAN teams' auto-check service
>>
>> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
>> Check: CRAN incoming feasibility, Result: NOTE
>> ? Maintainer: 'Francisco Jes??s Palomares Alabarce 
>> <fpalomares at correo.ugr.es>'
>>
>> ? New submission
>>
>> ? Possibly mis-spelled words in DESCRIPTION:
>> ??? SSLR (23:14)
>> ??? VM (27:37)
>>
>> ? Found the following (possibly) invalid URLs:
>> ??? URL: https://cran.r-project.org/web/packages/RSSL/RSSL.pdf
>> ????? From: inst/doc/introduction.html
>> ??????????? inst/doc/models.html
>> ????? Status: 200
>> ????? Message: OK
>> ????? CRAN URL not in canonical form
>> ??? The canonical URL of the CRAN page for a package is
>> ????? https://CRAN.R-project.org/package=pkgname
>>
>> ? Found the following (possibly) invalid file URI:
>> ??? URI: www.cs.ucr.edu/~eamonn/time_series_data/
>> ????? From: man/coffee.Rd
>>
>> ? The Description field should not start with the package name,
>> ??? 'This package' or similar.
>>
>> Flavor: r-devel-windows-ix86+x86_64
>> Check: running examples for arch 'i386', Result: ERROR
>> ? Running examples in 'SSLR-Ex.R' failed
>> ? The error most likely occurred in:
>>
>> ? > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>> ? > ### Name: COREG
>> ? > ### Title: General Interface for COREG model
>> ? > ### Aliases: COREG
>> ? >
>> ? > ### ** Examples
>> ? >
>> ? > library(tidyverse)
>> ? -- Attaching packages ---------------------------------------
>> tidyverse 1.3.0 --
>> ? v ggplot2 3.3.0???? v purrr?? 0.3.3
>> ? v tibble? 2.1.3???? v dplyr?? 0.8.5
>> ? v tidyr?? 1.0.2???? v stringr 1.4.0
>> ? v readr?? 1.3.1???? v forcats 0.5.0
>> ? -- Conflicts ------------------------------------------
>> tidyverse_conflicts() --
>> ? x dplyr::filter() masks stats::filter()
>> ? x dplyr::lag()??? masks stats::lag()
>> ? > library(tidymodels)
>> ? -- Attaching packages --------------------------------------
>> tidymodels 0.1.0 --
>> ? v broom???? 0.5.5???? v rsample?? 0.0.5
>> ? v dials???? 0.0.4???? v tune????? 0.0.1
>> ? v infer???? 0.5.1???? v workflows 0.1.0
>> ? v parsnip?? 0.0.5???? v yardstick 0.0.5
>> ? v recipes?? 0.1.9
>> ? -- Conflicts -----------------------------------------
>> tidymodels_conflicts() --
>> ? x scales::discard()?? masks purrr::discard()
>> ? x dplyr::filter()???? masks stats::filter()
>> ? x recipes::fixed()??? masks stringr::fixed()
>> ? x dplyr::lag()??????? masks stats::lag()
>> ? x dials::margin()???? masks ggplot2::margin()
>> ? x yardstick::spec()?? masks readr::spec()
>> ? x recipes::step()???? masks stats::step()
>> ? x recipes::yj_trans() masks scales::yj_trans()
>> ? > library(SSLR)
>> ? >
>> ? > data <- na.omit(airquality)
>> ? > #data <- na.omit(airquality)
>> ? >
>> ? > cls <- which(colnames(data) == "Ozone")
>> ? >
>> ? > colnames(data)[cls]<- "class"
>> ? >
>> ? > set.seed(1)
>> ? > train.index? <- sample(nrow(data), round(0.7 * nrow(data)))
>> ? > train <- data[ train.index,]
>> ? > test? <- data[-train.index,]
>> ? >
>> ? >
>> ? > #% LABELED
>> ? > labeled.index <- sample(nrow(train), round(0.2 * nrow(train)))
>> ? > train[-labeled.index,cls] <- NA
>> ? >
>> ? > m <- COREG(max.iter = 2) %>% fit(class ~ ., data = train)
>> ? Error in UseMethod("fit") :
>> ??? no applicable method for 'fit' applied to an object of class 
>> "model_sslr"
>> ? Calls: %>% ... _fseq -> freduce -> withVisible -> <Anonymous> -> fit
>> ? Execution halted
>>
>> Flavor: r-devel-windows-ix86+x86_64
>> Check: running examples for arch 'x64', Result: ERROR
>> ? Running examples in 'SSLR-Ex.R' failed
>> ? The error most likely occurred in:
>>
>> ? > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>> ? > ### Name: COREG
>> ? > ### Title: General Interface for COREG model
>> ? > ### Aliases: COREG
>> ? >
>> ? > ### ** Examples
>> ? >
>> ? > library(tidyverse)
>> ? -- Attaching packages ---------------------------------------
>> tidyverse 1.3.0 --
>> ? v ggplot2 3.3.0???? v purrr?? 0.3.3
>> ? v tibble? 2.1.3???? v dplyr?? 0.8.5
>> ? v tidyr?? 1.0.2???? v stringr 1.4.0
>> ? v readr?? 1.3.1???? v forcats 0.5.0
>> ? -- Conflicts ------------------------------------------
>> tidyverse_conflicts() --
>> ? x dplyr::filter() masks stats::filter()
>> ? x dplyr::lag()??? masks stats::lag()
>> ? > library(tidymodels)
>> ? -- Attaching packages --------------------------------------
>> tidymodels 0.1.0 --
>> ? v broom???? 0.5.5???? v rsample?? 0.0.5
>> ? v dials???? 0.0.4???? v tune????? 0.0.1
>> ? v infer???? 0.5.1???? v workflows 0.1.0
>> ? v parsnip?? 0.0.5???? v yardstick 0.0.5
>> ? v recipes?? 0.1.9
>> ? -- Conflicts -----------------------------------------
>> tidymodels_conflicts() --
>> ? x scales::discard()?? masks purrr::discard()
>> ? x dplyr::filter()???? masks stats::filter()
>> ? x recipes::fixed()??? masks stringr::fixed()
>> ? x dplyr::lag()??????? masks stats::lag()
>> ? x dials::margin()???? masks ggplot2::margin()
>> ? x yardstick::spec()?? masks readr::spec()
>> ? x recipes::step()???? masks stats::step()
>> ? x recipes::yj_trans() masks scales::yj_trans()
>> ? > library(SSLR)
>> ? >
>> ? > data <- na.omit(airquality)
>> ? > #data <- na.omit(airquality)
>> ? >
>> ? > cls <- which(colnames(data) == "Ozone")
>> ? >
>> ? > colnames(data)[cls]<- "class"
>> ? >
>> ? > set.seed(1)
>> ? > train.index? <- sample(nrow(data), round(0.7 * nrow(data)))
>> ? > train <- data[ train.index,]
>> ? > test? <- data[-train.index,]
>> ? >
>> ? >
>> ? > #% LABELED
>> ? > labeled.index <- sample(nrow(train), round(0.2 * nrow(train)))
>> ? > train[-labeled.index,cls] <- NA
>> ? >
>> ? > m <- COREG(max.iter = 2) %>% fit(class ~ ., data = train)
>> ? Error in UseMethod("fit") :
>> ??? no applicable method for 'fit' applied to an object of class 
>> "model_sslr"
>> ? Calls: %>% ... _fseq -> freduce -> withVisible -> <Anonymous> -> fit
>> ? Execution halted
>>
>> Flavor: r-devel-windows-ix86+x86_64
>> Check: re-building of vignette outputs, Result: WARNING
>> ? Error(s) in re-building vignettes:
>> ? --- re-building 'classification.Rmd' using rmarkdown
>> ? Quitting from lines 58-60 (classification.Rmd)
>> ? Error: processing vignette 'classification.Rmd' failed with 
>> diagnostics:
>> ? no applicable method for 'fit' applied to an object of class 
>> "model_sslr"
>> ? --- failed re-building 'classification.Rmd'
>>
>> ? --- re-building 'fit.Rmd' using rmarkdown
>> ? --- finished re-building 'fit.Rmd'
>>
>> ? --- re-building 'introduction.Rmd' using rmarkdown
>> ? --- finished re-building 'introduction.Rmd'
>>
>> ? --- re-building 'models.Rmd' using rmarkdown
>> ? --- finished re-building 'models.Rmd'
>>
>> ? --- re-building 'regression.Rmd' using rmarkdown
>> ? Quitting from lines 51-53 (regression.Rmd)
>> ? Error: processing vignette 'regression.Rmd' failed with diagnostics:
>> ? no applicable method for 'fit' applied to an object of class 
>> "model_sslr"
>> ? --- failed re-building 'regression.Rmd'
>>
>> ? SUMMARY: processing the following files failed:
>> ??? 'classification.Rmd' 'regression.Rmd'
>>
>> ? Error: Vignette re-building failed.
>> ? Execution halted
>>
>> Flavor: r-devel-linux-x86_64-debian-gcc
>> Check: examples, Result: ERROR
>> ? Running examples in 'SSLR-Ex.R' failed
>> ? The error most likely occurred in:
>>
>> ? > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>> ? > ### Name: COREG
>> ? > ### Title: General Interface for COREG model
>> ? > ### Aliases: COREG
>> ? >
>> ? > ### ** Examples
>> ? >
>> ? > library(tidyverse)
>> ? ?????? Attaching packages
>> ????????????????????????????????????????????????????????????????????????????????????????????????????????????????????? 
>>
>> tidyverse 1.3.0 ??????
>> ? ??? ggplot2 3.3.0???? ??? purrr?? 0.3.3
>> ? ??? tibble? 2.1.3???? ??? dplyr?? 0.8.5
>> ? ??? tidyr?? 1.0.2???? ??? stringr 1.4.0
>> ? ??? readr?? 1.3.1???? ??? forcats 0.5.0
>> ? ?????? Conflicts
>> ?????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????? 
>>
>> tidyverse_conflicts() ??????
>> ? ??? dplyr::filter() masks stats::filter()
>> ? ??? dplyr::lag()??? masks stats::lag()
>> ? > library(tidymodels)
>> ? ?????? Attaching packages
>> ?????????????????????????????????????????????????????????????????????????????????????????????????????????????????? 
>>
>> tidymodels 0.1.0 ??????
>> ? ??? broom???? 0.5.5???? ??? rsample?? 0.0.5
>> ? ??? dials???? 0.0.4???? ??? tune????? 0.0.1
>> ? ??? infer???? 0.5.1???? ??? workflows 0.1.0
>> ? ??? parsnip?? 0.0.5???? ??? yardstick 0.0.5
>> ? ??? recipes?? 0.1.9
>> ? ?????? Conflicts
>> ??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????? 
>>
>> tidymodels_conflicts() ??????
>> ? ??? scales::discard()?? masks purrr::discard()
>> ? ??? dplyr::filter()???? masks stats::filter()
>> ? ??? recipes::fixed()??? masks stringr::fixed()
>> ? ??? dplyr::lag()??????? masks stats::lag()
>> ? ??? dials::margin()???? masks ggplot2::margin()
>> ? ??? yardstick::spec()?? masks readr::spec()
>> ? ??? recipes::step()???? masks stats::step()
>> ? ??? recipes::yj_trans() masks scales::yj_trans()
>> ? > library(SSLR)
>> ? >
>> ? > data <- na.omit(airquality)
>> ? > #data <- na.omit(airquality)
>> ? >
>> ? > cls <- which(colnames(data) == "Ozone")
>> ? >
>> ? > colnames(data)[cls]<- "class"
>> ? >
>> ? > set.seed(1)
>> ? > train.index? <- sample(nrow(data), round(0.7 * nrow(data)))
>> ? > train <- data[ train.index,]
>> ? > test? <- data[-train.index,]
>> ? >
>> ? >
>> ? > #% LABELED
>> ? > labeled.index <- sample(nrow(train), round(0.2 * nrow(train)))
>> ? > train[-labeled.index,cls] <- NA
>> ? >
>> ? > m <- COREG(max.iter = 2) %>% fit(class ~ ., data = train)
>> ? Error in UseMethod("fit") :
>> ??? no applicable method for 'fit' applied to an object of class 
>> "model_sslr"
>> ? Calls: %>% ... _fseq -> freduce -> withVisible -> <Anonymous> -> fit
>> ? Execution halted
>>
>> Flavor: r-devel-linux-x86_64-debian-gcc
>> Check: re-building of vignette outputs, Result: WARNING
>> ? Error(s) in re-building vignettes:
>> ??? ...
>> ? --- re-building 'classification.Rmd' using rmarkdown
>> ? Quitting from lines 58-60 (classification.Rmd)
>> ? Error: processing vignette 'classification.Rmd' failed with 
>> diagnostics:
>> ? no applicable method for 'fit' applied to an object of class 
>> "model_sslr"
>> ? --- failed re-building 'classification.Rmd'
>>
>> ? --- re-building 'fit.Rmd' using rmarkdown
>> ? --- finished re-building 'fit.Rmd'
>>
>> ? --- re-building 'introduction.Rmd' using rmarkdown
>> ? --- finished re-building 'introduction.Rmd'
>>
>> ? --- re-building 'models.Rmd' using rmarkdown
>> ? --- finished re-building 'models.Rmd'
>>
>> ? --- re-building 'regression.Rmd' using rmarkdown
>> ? Quitting from lines 51-53 (regression.Rmd)
>> ? Error: processing vignette 'regression.Rmd' failed with diagnostics:
>> ? no applicable method for 'fit' applied to an object of class 
>> "model_sslr"
>> ? --- failed re-building 'regression.Rmd'
>>
>> ? SUMMARY: processing the following files failed:
>> ??? 'classification.Rmd' 'regression.Rmd'
>>
>> ? Error: Vignette re-building failed.
>> ? Execution halted
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From joe @end|ng |rom po|@@oncon@u|t|ng@c@  Wed Mar 11 15:23:09 2020
From: joe @end|ng |rom po|@@oncon@u|t|ng@c@ (Joe Thorley)
Date: Wed, 11 Mar 2020 07:23:09 -0700
Subject: [R-pkg-devel] Package windows binaries not updating?
Message-ID: <B9CDE42E-2236-4CCA-9F88-7F4542421581@poissonconsulting.ca>

Hi All

Version 0.4.0 of the chk package was accepted by CRAN over a week ago (on March 3rd 2020). 

However, the windows binaries have not yet updated for r-devel and r-release.

https://cran.r-project.org/web/packages/chk/index.html <https://cran.r-project.org/web/packages/chk/index.html>

Is there anything I can do to facilitate their updating or do I just need to be more patient?

Thanks

Joe

Joe Thorley PhD, RPBio
Computational Biologist
Poisson Consulting Ltd.
4216 Shasheen Road
Nelson, BC
V1L 6X1, Canada
Tel: +1 250 551 2194
Email: joe at poissonconsulting.ca
Web: www.poissonconsulting.ca
Skype: joethorley




	[[alternative HTML version deleted]]


From ip@iom@res m@iii@g oii correo@ugr@es  Wed Mar 11 15:39:39 2020
From: ip@iom@res m@iii@g oii correo@ugr@es (ip@iom@res m@iii@g oii correo@ugr@es)
Date: Wed, 11 Mar 2020 15:39:39 +0100
Subject: [R-pkg-devel] 
 Fwd: Re: [CRAN-pretest-archived] CRAN submission SSLR 0.9.0
In-Reply-To: <7bb548a69bbd57b5cc784ccc0b5630ad@correo.ugr.es>
References: <20200310150158.7DC19161E86@xmpalantir.wu.ac.at>
 <01d5f6ef$Blat.v3.2.16$5bfef6c8$f6d461f@mail.statistik.tu-dortmund.de>
 <25bc281f3c8844d1573da4a2c02a8a06@correo.ugr.es>
 <aa3b1d7761e52c1571cee6f689876dde@correo.ugr.es>
 <7bb548a69bbd57b5cc784ccc0b5630ad@correo.ugr.es>
Message-ID: <14924af6ddd8571adbaaec14beda2f91@correo.ugr.es>

Hi,

I dont know how to fix this problem: 
https://win-builder.r-project.org/VK8P07E1QHFA/

The error is:

Error in UseMethod("fit") :
   no applicable method for 'fit' applied to an object of class 
"model_sslr"

I check with my platform Windows 10 Home and I dont have problems

The code used is:

#' fit
#' @title fit object
#' @param object object
#' @param ... other parameters to be passed
#' @export
fit <- function(object, ...){
   UseMethod("fit")
}

#' @title Fit with formula and data
#' @description Funtion to fit through the formula
#' @param object is the model
#' @param formula is the formula
#' @param data is the total data train
#' @param ... unused in this case
#' @importFrom rlang quos
#' @export fit.model_sslr
#' @export
fit.model_sslr <- function(object, formula = NULL, data = NULL, ...) {

   dots <- quos(...)


   if (all(c("x", "y") %in% names(dots)))
     rlang::abort("`fit.model_sslr()` is for the formula methods. Use 
`fit_xy()` instead.")

   fit_form_interface <- check_form_interface(formula, data)

   x_and_y <- get_x_y(formula, data)

   eval_env <- rlang::env()
   eval_env$x <- x_and_y$x
   eval_env$y <- x_and_y$y

   fit_interface <- check_xy_interface(eval_env$x, eval_env$y)

   elapsed <- system.time(model <- object$fit_function(eval_env$x, 
eval_env$y))

   
new_model_sslr_fitted(model,class(model),object$args,colnames(eval_env$x),elapsed,formula)

}


In my NAMESPACE we have this:

# Generated by roxygen2: do not edit by hand

S3method(fit,model_sslr)
S3method(fit_x_u,model_sslr)
S3method(fit_xy,model_sslr)
S3method(predict,OneNN)
S3method(predict,model_sslr_fitted)
S3method(predict,snnrceG)
export(COREG)
export(EMLeastSquaresClassifierSSLR)
export(EMNearestMeanClassifierSSLR)
export(EntropyRegularizedLogisticRegressionSSLR)
export(LaplacianSVMSSLR)
export(LinearTSVMSSLR)
export(MCNearestMeanClassifierSSLR)
export(SSLRDecisionTree)
export(SSLRRandomForest)
export(TSVMSSLR)
export(USMLeastSquaresClassifierSSLR)
export(WellSVMSSLR)
export(coBC)
export(coBCCombine)
export(coBCG)
export(democratic)
export(democraticCombine)
export(democraticG)
export(fit)
export(fit.model_sslr)
export(fit_x_u)
export(fit_x_u.model_sslr)
export(fit_xy)
export(fit_xy.model_sslr)
export(newDecisionTree)
export(oneNN)
export(selfTraining)
export(selfTrainingG)
export(setred)
export(setredG)
export(snnrce)
export(train_generic)
export(triTraining)
export(triTrainingCombine)
export(triTrainingG)
exportClasses(nullOrNumericOrCharacter)
exportMethods(predict)
exportMethods(predict_inputs)
import(stats)
importFrom(RANN,nn2)
importFrom(RSSL,EMLeastSquaresClassifier)
importFrom(RSSL,EMNearestMeanClassifier)
importFrom(RSSL,EntropyRegularizedLogisticRegression)
importFrom(RSSL,LaplacianSVM)
importFrom(RSSL,LinearTSVM)
importFrom(RSSL,MCNearestMeanClassifier)
importFrom(RSSL,TSVM)
importFrom(RSSL,USMLeastSquaresClassifier)
importFrom(RSSL,WellSVM)
importFrom(dplyr,as_tibble)
importFrom(dplyr,tibble)
importFrom(foreach,"%dopar%")
importFrom(magrittr,"%>%")
importFrom(methods,new)
importFrom(parsnip,nearest_neighbor)
importFrom(parsnip,set_engine)
importFrom(plyr,is.formula)
importFrom(purrr,map)
importFrom(rlang,quos)
importFrom(stats,predict)
importFrom(utils,tail)
useDynLib(SSLR)

We have:
S3method(fit,model_sslr)
...
export(fit)
export(fit.model_sslr)


I don't know why the problem appears when everything is exported.

I attach the built .tar

Thanks.

El 2020-03-10 17:28, fpalomares at correo.ugr.es escribi?:
> Hi, I thiks its weird:
> 
> The error is:  no applicable method for 'fit' applied to an object of
> class "model_sslr"
> 
> In the code:
> 
> #' fit
> #'
> #' @title fit object
> #' @param object object
> #' @param ... other parameters to be passed
> #' @rdname fit
> #' @export fit
> fit <- function(object, ...){
>   UseMethod("fit")
> }
> 
> 
> And:
> 
> #' @title Fit with formula and data
> #' @description Funtion to fit through the formula
> #' @param object is the model
> #' @param formula is the formula
> #' @param data is the total data train
> #' @param ... unused in this case
> #' @importFrom rlang quos
> #' @rdname fit
> #' @export
> #' @export fit.model_sslr
> fit.model_sslr <- function(object, formula = NULL, data = NULL, ...) {
> 
>   dots <- quos(...)
> 
> 
>   if (all(c("x", "y") %in% names(dots)))
>     rlang::abort("`fit.model_sslr()` is for the formula methods. Use
> `fit_xy()` instead.")
> 
>   fit_form_interface <- check_form_interface(formula, data)
> 
>   x_and_y <- get_x_y(formula, data)
> 
>   eval_env <- rlang::env()
>   eval_env$x <- x_and_y$x
>   eval_env$y <- x_and_y$y
> 
>   fit_interface <- check_xy_interface(eval_env$x, eval_env$y)
> 
>   elapsed <- system.time(model <- object$fit_function(eval_env$x, 
> eval_env$y))
> 
> 
> new_model_sslr_fitted(model,class(model),object$args,colnames(eval_env$x),elapsed,formula)
> 
> }
> 
> 
> Thanks
> 
> El 2020-03-10 16:19, ligges at statistik.tu-dortmund.de escribi?:
>> Dear maintainer,
>> 
>> package SSLR_0.9.0.tar.gz does not pass the incoming checks
>> automatically, please see the following pre-tests:
>> Windows:
>> <https://win-builder.r-project.org/incoming_pretest/SSLR_0.9.0_20200310_160158/Windows/00check.log>
>> Status: 2 ERRORs, 1 WARNING, 1 NOTE
>> Debian:
>> <https://win-builder.r-project.org/incoming_pretest/SSLR_0.9.0_20200310_160158/Debian/00check.log>
>> Status: 1 ERROR, 1 WARNING, 1 NOTE
>> 
>> 
>> 
>> Please fix all problems and resubmit a fixed version via the webform.
>> If you are not sure how to fix the problems shown, please ask for help
>> on the R-package-devel mailing list:
>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>> If you are fairly certain the rejection is a false positive, please
>> reply-all to this message and explain.
>> 
>> More details are given in the directory:
>> <https://win-builder.r-project.org/incoming_pretest/SSLR_0.9.0_20200310_160158/>
>> The files will be removed after roughly 7 days.
>> 
>> No strong reverse dependencies to be checked.
>> 
>> Best regards,
>> CRAN teams' auto-check service
>> 
>> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
>> Check: CRAN incoming feasibility, Result: NOTE
>>   Maintainer: 'Francisco Jes??s Palomares Alabarce 
>> <fpalomares at correo.ugr.es>'
>> 
>>   New submission
>> 
>>   Possibly mis-spelled words in DESCRIPTION:
>>     SSLR (23:14)
>>     VM (27:37)
>> 
>>   Found the following (possibly) invalid URLs:
>>     URL: https://cran.r-project.org/web/packages/RSSL/RSSL.pdf
>>       From: inst/doc/introduction.html
>>             inst/doc/models.html
>>       Status: 200
>>       Message: OK
>>       CRAN URL not in canonical form
>>     The canonical URL of the CRAN page for a package is
>>       https://CRAN.R-project.org/package=pkgname
>> 
>>   Found the following (possibly) invalid file URI:
>>     URI: www.cs.ucr.edu/~eamonn/time_series_data/
>>       From: man/coffee.Rd
>> 
>>   The Description field should not start with the package name,
>>     'This package' or similar.
>> 
>> Flavor: r-devel-windows-ix86+x86_64
>> Check: running examples for arch 'i386', Result: ERROR
>>   Running examples in 'SSLR-Ex.R' failed
>>   The error most likely occurred in:
>> 
>>   > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>>   > ### Name: COREG
>>   > ### Title: General Interface for COREG model
>>   > ### Aliases: COREG
>>   >
>>   > ### ** Examples
>>   >
>>   > library(tidyverse)
>>   -- Attaching packages ---------------------------------------
>> tidyverse 1.3.0 --
>>   v ggplot2 3.3.0     v purrr   0.3.3
>>   v tibble  2.1.3     v dplyr   0.8.5
>>   v tidyr   1.0.2     v stringr 1.4.0
>>   v readr   1.3.1     v forcats 0.5.0
>>   -- Conflicts ------------------------------------------
>> tidyverse_conflicts() --
>>   x dplyr::filter() masks stats::filter()
>>   x dplyr::lag()    masks stats::lag()
>>   > library(tidymodels)
>>   -- Attaching packages --------------------------------------
>> tidymodels 0.1.0 --
>>   v broom     0.5.5     v rsample   0.0.5
>>   v dials     0.0.4     v tune      0.0.1
>>   v infer     0.5.1     v workflows 0.1.0
>>   v parsnip   0.0.5     v yardstick 0.0.5
>>   v recipes   0.1.9
>>   -- Conflicts -----------------------------------------
>> tidymodels_conflicts() --
>>   x scales::discard()   masks purrr::discard()
>>   x dplyr::filter()     masks stats::filter()
>>   x recipes::fixed()    masks stringr::fixed()
>>   x dplyr::lag()        masks stats::lag()
>>   x dials::margin()     masks ggplot2::margin()
>>   x yardstick::spec()   masks readr::spec()
>>   x recipes::step()     masks stats::step()
>>   x recipes::yj_trans() masks scales::yj_trans()
>>   > library(SSLR)
>>   >
>>   > data <- na.omit(airquality)
>>   > #data <- na.omit(airquality)
>>   >
>>   > cls <- which(colnames(data) == "Ozone")
>>   >
>>   > colnames(data)[cls]<- "class"
>>   >
>>   > set.seed(1)
>>   > train.index  <- sample(nrow(data), round(0.7 * nrow(data)))
>>   > train <- data[ train.index,]
>>   > test  <- data[-train.index,]
>>   >
>>   >
>>   > #% LABELED
>>   > labeled.index <- sample(nrow(train), round(0.2 * nrow(train)))
>>   > train[-labeled.index,cls] <- NA
>>   >
>>   > m <- COREG(max.iter = 2) %>% fit(class ~ ., data = train)
>>   Error in UseMethod("fit") :
>>     no applicable method for 'fit' applied to an object of class 
>> "model_sslr"
>>   Calls: %>% ... _fseq -> freduce -> withVisible -> <Anonymous> -> fit
>>   Execution halted
>> 
>> Flavor: r-devel-windows-ix86+x86_64
>> Check: running examples for arch 'x64', Result: ERROR
>>   Running examples in 'SSLR-Ex.R' failed
>>   The error most likely occurred in:
>> 
>>   > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>>   > ### Name: COREG
>>   > ### Title: General Interface for COREG model
>>   > ### Aliases: COREG
>>   >
>>   > ### ** Examples
>>   >
>>   > library(tidyverse)
>>   -- Attaching packages ---------------------------------------
>> tidyverse 1.3.0 --
>>   v ggplot2 3.3.0     v purrr   0.3.3
>>   v tibble  2.1.3     v dplyr   0.8.5
>>   v tidyr   1.0.2     v stringr 1.4.0
>>   v readr   1.3.1     v forcats 0.5.0
>>   -- Conflicts ------------------------------------------
>> tidyverse_conflicts() --
>>   x dplyr::filter() masks stats::filter()
>>   x dplyr::lag()    masks stats::lag()
>>   > library(tidymodels)
>>   -- Attaching packages --------------------------------------
>> tidymodels 0.1.0 --
>>   v broom     0.5.5     v rsample   0.0.5
>>   v dials     0.0.4     v tune      0.0.1
>>   v infer     0.5.1     v workflows 0.1.0
>>   v parsnip   0.0.5     v yardstick 0.0.5
>>   v recipes   0.1.9
>>   -- Conflicts -----------------------------------------
>> tidymodels_conflicts() --
>>   x scales::discard()   masks purrr::discard()
>>   x dplyr::filter()     masks stats::filter()
>>   x recipes::fixed()    masks stringr::fixed()
>>   x dplyr::lag()        masks stats::lag()
>>   x dials::margin()     masks ggplot2::margin()
>>   x yardstick::spec()   masks readr::spec()
>>   x recipes::step()     masks stats::step()
>>   x recipes::yj_trans() masks scales::yj_trans()
>>   > library(SSLR)
>>   >
>>   > data <- na.omit(airquality)
>>   > #data <- na.omit(airquality)
>>   >
>>   > cls <- which(colnames(data) == "Ozone")
>>   >
>>   > colnames(data)[cls]<- "class"
>>   >
>>   > set.seed(1)
>>   > train.index  <- sample(nrow(data), round(0.7 * nrow(data)))
>>   > train <- data[ train.index,]
>>   > test  <- data[-train.index,]
>>   >
>>   >
>>   > #% LABELED
>>   > labeled.index <- sample(nrow(train), round(0.2 * nrow(train)))
>>   > train[-labeled.index,cls] <- NA
>>   >
>>   > m <- COREG(max.iter = 2) %>% fit(class ~ ., data = train)
>>   Error in UseMethod("fit") :
>>     no applicable method for 'fit' applied to an object of class 
>> "model_sslr"
>>   Calls: %>% ... _fseq -> freduce -> withVisible -> <Anonymous> -> fit
>>   Execution halted
>> 
>> Flavor: r-devel-windows-ix86+x86_64
>> Check: re-building of vignette outputs, Result: WARNING
>>   Error(s) in re-building vignettes:
>>   --- re-building 'classification.Rmd' using rmarkdown
>>   Quitting from lines 58-60 (classification.Rmd)
>>   Error: processing vignette 'classification.Rmd' failed with 
>> diagnostics:
>>   no applicable method for 'fit' applied to an object of class 
>> "model_sslr"
>>   --- failed re-building 'classification.Rmd'
>> 
>>   --- re-building 'fit.Rmd' using rmarkdown
>>   --- finished re-building 'fit.Rmd'
>> 
>>   --- re-building 'introduction.Rmd' using rmarkdown
>>   --- finished re-building 'introduction.Rmd'
>> 
>>   --- re-building 'models.Rmd' using rmarkdown
>>   --- finished re-building 'models.Rmd'
>> 
>>   --- re-building 'regression.Rmd' using rmarkdown
>>   Quitting from lines 51-53 (regression.Rmd)
>>   Error: processing vignette 'regression.Rmd' failed with diagnostics:
>>   no applicable method for 'fit' applied to an object of class 
>> "model_sslr"
>>   --- failed re-building 'regression.Rmd'
>> 
>>   SUMMARY: processing the following files failed:
>>     'classification.Rmd' 'regression.Rmd'
>> 
>>   Error: Vignette re-building failed.
>>   Execution halted
>> 
>> Flavor: r-devel-linux-x86_64-debian-gcc
>> Check: examples, Result: ERROR
>>   Running examples in 'SSLR-Ex.R' failed
>>   The error most likely occurred in:
>> 
>>   > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>>   > ### Name: COREG
>>   > ### Title: General Interface for COREG model
>>   > ### Aliases: COREG
>>   >
>>   > ### ** Examples
>>   >
>>   > library(tidyverse)
>>   ?????? Attaching packages
>> ?????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
>> tidyverse 1.3.0 ??????
>>   ??? ggplot2 3.3.0     ??? purrr   0.3.3
>>   ??? tibble  2.1.3     ??? dplyr   0.8.5
>>   ??? tidyr   1.0.2     ??? stringr 1.4.0
>>   ??? readr   1.3.1     ??? forcats 0.5.0
>>   ?????? Conflicts
>> ??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
>> tidyverse_conflicts() ??????
>>   ??? dplyr::filter() masks stats::filter()
>>   ??? dplyr::lag()    masks stats::lag()
>>   > library(tidymodels)
>>   ?????? Attaching packages
>> ??????????????????????????????????????????????????????????????????????????????????????????????????????????????????
>> tidymodels 0.1.0 ??????
>>   ??? broom     0.5.5     ??? rsample   0.0.5
>>   ??? dials     0.0.4     ??? tune      0.0.1
>>   ??? infer     0.5.1     ??? workflows 0.1.0
>>   ??? parsnip   0.0.5     ??? yardstick 0.0.5
>>   ??? recipes   0.1.9
>>   ?????? Conflicts
>> ???????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
>> tidymodels_conflicts() ??????
>>   ??? scales::discard()   masks purrr::discard()
>>   ??? dplyr::filter()     masks stats::filter()
>>   ??? recipes::fixed()    masks stringr::fixed()
>>   ??? dplyr::lag()        masks stats::lag()
>>   ??? dials::margin()     masks ggplot2::margin()
>>   ??? yardstick::spec()   masks readr::spec()
>>   ??? recipes::step()     masks stats::step()
>>   ??? recipes::yj_trans() masks scales::yj_trans()
>>   > library(SSLR)
>>   >
>>   > data <- na.omit(airquality)
>>   > #data <- na.omit(airquality)
>>   >
>>   > cls <- which(colnames(data) == "Ozone")
>>   >
>>   > colnames(data)[cls]<- "class"
>>   >
>>   > set.seed(1)
>>   > train.index  <- sample(nrow(data), round(0.7 * nrow(data)))
>>   > train <- data[ train.index,]
>>   > test  <- data[-train.index,]
>>   >
>>   >
>>   > #% LABELED
>>   > labeled.index <- sample(nrow(train), round(0.2 * nrow(train)))
>>   > train[-labeled.index,cls] <- NA
>>   >
>>   > m <- COREG(max.iter = 2) %>% fit(class ~ ., data = train)
>>   Error in UseMethod("fit") :
>>     no applicable method for 'fit' applied to an object of class 
>> "model_sslr"
>>   Calls: %>% ... _fseq -> freduce -> withVisible -> <Anonymous> -> fit
>>   Execution halted
>> 
>> Flavor: r-devel-linux-x86_64-debian-gcc
>> Check: re-building of vignette outputs, Result: WARNING
>>   Error(s) in re-building vignettes:
>>     ...
>>   --- re-building 'classification.Rmd' using rmarkdown
>>   Quitting from lines 58-60 (classification.Rmd)
>>   Error: processing vignette 'classification.Rmd' failed with 
>> diagnostics:
>>   no applicable method for 'fit' applied to an object of class 
>> "model_sslr"
>>   --- failed re-building 'classification.Rmd'
>> 
>>   --- re-building 'fit.Rmd' using rmarkdown
>>   --- finished re-building 'fit.Rmd'
>> 
>>   --- re-building 'introduction.Rmd' using rmarkdown
>>   --- finished re-building 'introduction.Rmd'
>> 
>>   --- re-building 'models.Rmd' using rmarkdown
>>   --- finished re-building 'models.Rmd'
>> 
>>   --- re-building 'regression.Rmd' using rmarkdown
>>   Quitting from lines 51-53 (regression.Rmd)
>>   Error: processing vignette 'regression.Rmd' failed with diagnostics:
>>   no applicable method for 'fit' applied to an object of class 
>> "model_sslr"
>>   --- failed re-building 'regression.Rmd'
>> 
>>   SUMMARY: processing the following files failed:
>>     'classification.Rmd' 'regression.Rmd'
>> 
>>   Error: Vignette re-building failed.
>>   Execution halted

-------------- next part --------------
A non-text attachment was scrubbed...
Name: SSLR_0.9.0.tar.gz
Type: application/x-gzip
Size: 286448 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-package-devel/attachments/20200311/211233bb/attachment.bin>

From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Mar 11 16:12:56 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 11 Mar 2020 08:12:56 -0700
Subject: [R-pkg-devel] 
 Fwd: Re: [CRAN-pretest-archived] CRAN submission SSLR 0.9.0
In-Reply-To: <14924af6ddd8571adbaaec14beda2f91@correo.ugr.es>
References: <20200310150158.7DC19161E86@xmpalantir.wu.ac.at>
 <01d5f6ef$Blat.v3.2.16$5bfef6c8$f6d461f@mail.statistik.tu-dortmund.de>
 <25bc281f3c8844d1573da4a2c02a8a06@correo.ugr.es>
 <aa3b1d7761e52c1571cee6f689876dde@correo.ugr.es>
 <7bb548a69bbd57b5cc784ccc0b5630ad@correo.ugr.es>
 <14924af6ddd8571adbaaec14beda2f91@correo.ugr.es>
Message-ID: <9b7d76f9-15ee-d580-1904-36b065b111ee@gmail.com>

Uwe Ligges answered you yesterday on this question.

Duncan Murdoch

On 11/03/2020 7:39 a.m., fpalomares at correo.ugr.es wrote:
> Hi,
> 
> I dont know how to fix this problem:
> https://win-builder.r-project.org/VK8P07E1QHFA/
> 
> The error is:
> 
> Error in UseMethod("fit") :
>     no applicable method for 'fit' applied to an object of class
> "model_sslr"
> 
> I check with my platform Windows 10 Home and I dont have problems
> 
> The code used is:
> 
> #' fit
> #' @title fit object
> #' @param object object
> #' @param ... other parameters to be passed
> #' @export
> fit <- function(object, ...){
>     UseMethod("fit")
> }
> 
> #' @title Fit with formula and data
> #' @description Funtion to fit through the formula
> #' @param object is the model
> #' @param formula is the formula
> #' @param data is the total data train
> #' @param ... unused in this case
> #' @importFrom rlang quos
> #' @export fit.model_sslr
> #' @export
> fit.model_sslr <- function(object, formula = NULL, data = NULL, ...) {
> 
>     dots <- quos(...)
> 
> 
>     if (all(c("x", "y") %in% names(dots)))
>       rlang::abort("`fit.model_sslr()` is for the formula methods. Use
> `fit_xy()` instead.")
> 
>     fit_form_interface <- check_form_interface(formula, data)
> 
>     x_and_y <- get_x_y(formula, data)
> 
>     eval_env <- rlang::env()
>     eval_env$x <- x_and_y$x
>     eval_env$y <- x_and_y$y
> 
>     fit_interface <- check_xy_interface(eval_env$x, eval_env$y)
> 
>     elapsed <- system.time(model <- object$fit_function(eval_env$x,
> eval_env$y))
> 
>     
> new_model_sslr_fitted(model,class(model),object$args,colnames(eval_env$x),elapsed,formula)
> 
> }
> 
> 
> In my NAMESPACE we have this:
> 
> # Generated by roxygen2: do not edit by hand
> 
> S3method(fit,model_sslr)
> S3method(fit_x_u,model_sslr)
> S3method(fit_xy,model_sslr)
> S3method(predict,OneNN)
> S3method(predict,model_sslr_fitted)
> S3method(predict,snnrceG)
> export(COREG)
> export(EMLeastSquaresClassifierSSLR)
> export(EMNearestMeanClassifierSSLR)
> export(EntropyRegularizedLogisticRegressionSSLR)
> export(LaplacianSVMSSLR)
> export(LinearTSVMSSLR)
> export(MCNearestMeanClassifierSSLR)
> export(SSLRDecisionTree)
> export(SSLRRandomForest)
> export(TSVMSSLR)
> export(USMLeastSquaresClassifierSSLR)
> export(WellSVMSSLR)
> export(coBC)
> export(coBCCombine)
> export(coBCG)
> export(democratic)
> export(democraticCombine)
> export(democraticG)
> export(fit)
> export(fit.model_sslr)
> export(fit_x_u)
> export(fit_x_u.model_sslr)
> export(fit_xy)
> export(fit_xy.model_sslr)
> export(newDecisionTree)
> export(oneNN)
> export(selfTraining)
> export(selfTrainingG)
> export(setred)
> export(setredG)
> export(snnrce)
> export(train_generic)
> export(triTraining)
> export(triTrainingCombine)
> export(triTrainingG)
> exportClasses(nullOrNumericOrCharacter)
> exportMethods(predict)
> exportMethods(predict_inputs)
> import(stats)
> importFrom(RANN,nn2)
> importFrom(RSSL,EMLeastSquaresClassifier)
> importFrom(RSSL,EMNearestMeanClassifier)
> importFrom(RSSL,EntropyRegularizedLogisticRegression)
> importFrom(RSSL,LaplacianSVM)
> importFrom(RSSL,LinearTSVM)
> importFrom(RSSL,MCNearestMeanClassifier)
> importFrom(RSSL,TSVM)
> importFrom(RSSL,USMLeastSquaresClassifier)
> importFrom(RSSL,WellSVM)
> importFrom(dplyr,as_tibble)
> importFrom(dplyr,tibble)
> importFrom(foreach,"%dopar%")
> importFrom(magrittr,"%>%")
> importFrom(methods,new)
> importFrom(parsnip,nearest_neighbor)
> importFrom(parsnip,set_engine)
> importFrom(plyr,is.formula)
> importFrom(purrr,map)
> importFrom(rlang,quos)
> importFrom(stats,predict)
> importFrom(utils,tail)
> useDynLib(SSLR)
> 
> We have:
> S3method(fit,model_sslr)
> ...
> export(fit)
> export(fit.model_sslr)
> 
> 
> I don't know why the problem appears when everything is exported.
> 
> I attach the built .tar
> 
> Thanks.
> 
> El 2020-03-10 17:28, fpalomares at correo.ugr.es escribi?:
>> Hi, I thiks its weird:
>>
>> The error is:  no applicable method for 'fit' applied to an object of
>> class "model_sslr"
>>
>> In the code:
>>
>> #' fit
>> #'
>> #' @title fit object
>> #' @param object object
>> #' @param ... other parameters to be passed
>> #' @rdname fit
>> #' @export fit
>> fit <- function(object, ...){
>>    UseMethod("fit")
>> }
>>
>>
>> And:
>>
>> #' @title Fit with formula and data
>> #' @description Funtion to fit through the formula
>> #' @param object is the model
>> #' @param formula is the formula
>> #' @param data is the total data train
>> #' @param ... unused in this case
>> #' @importFrom rlang quos
>> #' @rdname fit
>> #' @export
>> #' @export fit.model_sslr
>> fit.model_sslr <- function(object, formula = NULL, data = NULL, ...) {
>>
>>    dots <- quos(...)
>>
>>
>>    if (all(c("x", "y") %in% names(dots)))
>>      rlang::abort("`fit.model_sslr()` is for the formula methods. Use
>> `fit_xy()` instead.")
>>
>>    fit_form_interface <- check_form_interface(formula, data)
>>
>>    x_and_y <- get_x_y(formula, data)
>>
>>    eval_env <- rlang::env()
>>    eval_env$x <- x_and_y$x
>>    eval_env$y <- x_and_y$y
>>
>>    fit_interface <- check_xy_interface(eval_env$x, eval_env$y)
>>
>>    elapsed <- system.time(model <- object$fit_function(eval_env$x,
>> eval_env$y))
>>
>>
>> new_model_sslr_fitted(model,class(model),object$args,colnames(eval_env$x),elapsed,formula)
>>
>> }
>>
>>
>> Thanks
>>
>> El 2020-03-10 16:19, ligges at statistik.tu-dortmund.de escribi?:
>>> Dear maintainer,
>>>
>>> package SSLR_0.9.0.tar.gz does not pass the incoming checks
>>> automatically, please see the following pre-tests:
>>> Windows:
>>> <https://win-builder.r-project.org/incoming_pretest/SSLR_0.9.0_20200310_160158/Windows/00check.log>
>>> Status: 2 ERRORs, 1 WARNING, 1 NOTE
>>> Debian:
>>> <https://win-builder.r-project.org/incoming_pretest/SSLR_0.9.0_20200310_160158/Debian/00check.log>
>>> Status: 1 ERROR, 1 WARNING, 1 NOTE
>>>
>>>
>>>
>>> Please fix all problems and resubmit a fixed version via the webform.
>>> If you are not sure how to fix the problems shown, please ask for help
>>> on the R-package-devel mailing list:
>>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>>> If you are fairly certain the rejection is a false positive, please
>>> reply-all to this message and explain.
>>>
>>> More details are given in the directory:
>>> <https://win-builder.r-project.org/incoming_pretest/SSLR_0.9.0_20200310_160158/>
>>> The files will be removed after roughly 7 days.
>>>
>>> No strong reverse dependencies to be checked.
>>>
>>> Best regards,
>>> CRAN teams' auto-check service
>>>
>>> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
>>> Check: CRAN incoming feasibility, Result: NOTE
>>>    Maintainer: 'Francisco Jes??s Palomares Alabarce
>>> <fpalomares at correo.ugr.es>'
>>>
>>>    New submission
>>>
>>>    Possibly mis-spelled words in DESCRIPTION:
>>>      SSLR (23:14)
>>>      VM (27:37)
>>>
>>>    Found the following (possibly) invalid URLs:
>>>      URL: https://cran.r-project.org/web/packages/RSSL/RSSL.pdf
>>>        From: inst/doc/introduction.html
>>>              inst/doc/models.html
>>>        Status: 200
>>>        Message: OK
>>>        CRAN URL not in canonical form
>>>      The canonical URL of the CRAN page for a package is
>>>        https://CRAN.R-project.org/package=pkgname
>>>
>>>    Found the following (possibly) invalid file URI:
>>>      URI: www.cs.ucr.edu/~eamonn/time_series_data/
>>>        From: man/coffee.Rd
>>>
>>>    The Description field should not start with the package name,
>>>      'This package' or similar.
>>>
>>> Flavor: r-devel-windows-ix86+x86_64
>>> Check: running examples for arch 'i386', Result: ERROR
>>>    Running examples in 'SSLR-Ex.R' failed
>>>    The error most likely occurred in:
>>>
>>>    > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>>>    > ### Name: COREG
>>>    > ### Title: General Interface for COREG model
>>>    > ### Aliases: COREG
>>>    >
>>>    > ### ** Examples
>>>    >
>>>    > library(tidyverse)
>>>    -- Attaching packages ---------------------------------------
>>> tidyverse 1.3.0 --
>>>    v ggplot2 3.3.0     v purrr   0.3.3
>>>    v tibble  2.1.3     v dplyr   0.8.5
>>>    v tidyr   1.0.2     v stringr 1.4.0
>>>    v readr   1.3.1     v forcats 0.5.0
>>>    -- Conflicts ------------------------------------------
>>> tidyverse_conflicts() --
>>>    x dplyr::filter() masks stats::filter()
>>>    x dplyr::lag()    masks stats::lag()
>>>    > library(tidymodels)
>>>    -- Attaching packages --------------------------------------
>>> tidymodels 0.1.0 --
>>>    v broom     0.5.5     v rsample   0.0.5
>>>    v dials     0.0.4     v tune      0.0.1
>>>    v infer     0.5.1     v workflows 0.1.0
>>>    v parsnip   0.0.5     v yardstick 0.0.5
>>>    v recipes   0.1.9
>>>    -- Conflicts -----------------------------------------
>>> tidymodels_conflicts() --
>>>    x scales::discard()   masks purrr::discard()
>>>    x dplyr::filter()     masks stats::filter()
>>>    x recipes::fixed()    masks stringr::fixed()
>>>    x dplyr::lag()        masks stats::lag()
>>>    x dials::margin()     masks ggplot2::margin()
>>>    x yardstick::spec()   masks readr::spec()
>>>    x recipes::step()     masks stats::step()
>>>    x recipes::yj_trans() masks scales::yj_trans()
>>>    > library(SSLR)
>>>    >
>>>    > data <- na.omit(airquality)
>>>    > #data <- na.omit(airquality)
>>>    >
>>>    > cls <- which(colnames(data) == "Ozone")
>>>    >
>>>    > colnames(data)[cls]<- "class"
>>>    >
>>>    > set.seed(1)
>>>    > train.index  <- sample(nrow(data), round(0.7 * nrow(data)))
>>>    > train <- data[ train.index,]
>>>    > test  <- data[-train.index,]
>>>    >
>>>    >
>>>    > #% LABELED
>>>    > labeled.index <- sample(nrow(train), round(0.2 * nrow(train)))
>>>    > train[-labeled.index,cls] <- NA
>>>    >
>>>    > m <- COREG(max.iter = 2) %>% fit(class ~ ., data = train)
>>>    Error in UseMethod("fit") :
>>>      no applicable method for 'fit' applied to an object of class
>>> "model_sslr"
>>>    Calls: %>% ... _fseq -> freduce -> withVisible -> <Anonymous> -> fit
>>>    Execution halted
>>>
>>> Flavor: r-devel-windows-ix86+x86_64
>>> Check: running examples for arch 'x64', Result: ERROR
>>>    Running examples in 'SSLR-Ex.R' failed
>>>    The error most likely occurred in:
>>>
>>>    > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>>>    > ### Name: COREG
>>>    > ### Title: General Interface for COREG model
>>>    > ### Aliases: COREG
>>>    >
>>>    > ### ** Examples
>>>    >
>>>    > library(tidyverse)
>>>    -- Attaching packages ---------------------------------------
>>> tidyverse 1.3.0 --
>>>    v ggplot2 3.3.0     v purrr   0.3.3
>>>    v tibble  2.1.3     v dplyr   0.8.5
>>>    v tidyr   1.0.2     v stringr 1.4.0
>>>    v readr   1.3.1     v forcats 0.5.0
>>>    -- Conflicts ------------------------------------------
>>> tidyverse_conflicts() --
>>>    x dplyr::filter() masks stats::filter()
>>>    x dplyr::lag()    masks stats::lag()
>>>    > library(tidymodels)
>>>    -- Attaching packages --------------------------------------
>>> tidymodels 0.1.0 --
>>>    v broom     0.5.5     v rsample   0.0.5
>>>    v dials     0.0.4     v tune      0.0.1
>>>    v infer     0.5.1     v workflows 0.1.0
>>>    v parsnip   0.0.5     v yardstick 0.0.5
>>>    v recipes   0.1.9
>>>    -- Conflicts -----------------------------------------
>>> tidymodels_conflicts() --
>>>    x scales::discard()   masks purrr::discard()
>>>    x dplyr::filter()     masks stats::filter()
>>>    x recipes::fixed()    masks stringr::fixed()
>>>    x dplyr::lag()        masks stats::lag()
>>>    x dials::margin()     masks ggplot2::margin()
>>>    x yardstick::spec()   masks readr::spec()
>>>    x recipes::step()     masks stats::step()
>>>    x recipes::yj_trans() masks scales::yj_trans()
>>>    > library(SSLR)
>>>    >
>>>    > data <- na.omit(airquality)
>>>    > #data <- na.omit(airquality)
>>>    >
>>>    > cls <- which(colnames(data) == "Ozone")
>>>    >
>>>    > colnames(data)[cls]<- "class"
>>>    >
>>>    > set.seed(1)
>>>    > train.index  <- sample(nrow(data), round(0.7 * nrow(data)))
>>>    > train <- data[ train.index,]
>>>    > test  <- data[-train.index,]
>>>    >
>>>    >
>>>    > #% LABELED
>>>    > labeled.index <- sample(nrow(train), round(0.2 * nrow(train)))
>>>    > train[-labeled.index,cls] <- NA
>>>    >
>>>    > m <- COREG(max.iter = 2) %>% fit(class ~ ., data = train)
>>>    Error in UseMethod("fit") :
>>>      no applicable method for 'fit' applied to an object of class
>>> "model_sslr"
>>>    Calls: %>% ... _fseq -> freduce -> withVisible -> <Anonymous> -> fit
>>>    Execution halted
>>>
>>> Flavor: r-devel-windows-ix86+x86_64
>>> Check: re-building of vignette outputs, Result: WARNING
>>>    Error(s) in re-building vignettes:
>>>    --- re-building 'classification.Rmd' using rmarkdown
>>>    Quitting from lines 58-60 (classification.Rmd)
>>>    Error: processing vignette 'classification.Rmd' failed with
>>> diagnostics:
>>>    no applicable method for 'fit' applied to an object of class
>>> "model_sslr"
>>>    --- failed re-building 'classification.Rmd'
>>>
>>>    --- re-building 'fit.Rmd' using rmarkdown
>>>    --- finished re-building 'fit.Rmd'
>>>
>>>    --- re-building 'introduction.Rmd' using rmarkdown
>>>    --- finished re-building 'introduction.Rmd'
>>>
>>>    --- re-building 'models.Rmd' using rmarkdown
>>>    --- finished re-building 'models.Rmd'
>>>
>>>    --- re-building 'regression.Rmd' using rmarkdown
>>>    Quitting from lines 51-53 (regression.Rmd)
>>>    Error: processing vignette 'regression.Rmd' failed with diagnostics:
>>>    no applicable method for 'fit' applied to an object of class
>>> "model_sslr"
>>>    --- failed re-building 'regression.Rmd'
>>>
>>>    SUMMARY: processing the following files failed:
>>>      'classification.Rmd' 'regression.Rmd'
>>>
>>>    Error: Vignette re-building failed.
>>>    Execution halted
>>>
>>> Flavor: r-devel-linux-x86_64-debian-gcc
>>> Check: examples, Result: ERROR
>>>    Running examples in 'SSLR-Ex.R' failed
>>>    The error most likely occurred in:
>>>
>>>    > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
>>>    > ### Name: COREG
>>>    > ### Title: General Interface for COREG model
>>>    > ### Aliases: COREG
>>>    >
>>>    > ### ** Examples
>>>    >
>>>    > library(tidyverse)
>>>    ?????? Attaching packages
>>> ?????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
>>> tidyverse 1.3.0 ??????
>>>    ??? ggplot2 3.3.0     ??? purrr   0.3.3
>>>    ??? tibble  2.1.3     ??? dplyr   0.8.5
>>>    ??? tidyr   1.0.2     ??? stringr 1.4.0
>>>    ??? readr   1.3.1     ??? forcats 0.5.0
>>>    ?????? Conflicts
>>> ??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
>>> tidyverse_conflicts() ??????
>>>    ??? dplyr::filter() masks stats::filter()
>>>    ??? dplyr::lag()    masks stats::lag()
>>>    > library(tidymodels)
>>>    ?????? Attaching packages
>>> ??????????????????????????????????????????????????????????????????????????????????????????????????????????????????
>>> tidymodels 0.1.0 ??????
>>>    ??? broom     0.5.5     ??? rsample   0.0.5
>>>    ??? dials     0.0.4     ??? tune      0.0.1
>>>    ??? infer     0.5.1     ??? workflows 0.1.0
>>>    ??? parsnip   0.0.5     ??? yardstick 0.0.5
>>>    ??? recipes   0.1.9
>>>    ?????? Conflicts
>>> ???????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
>>> tidymodels_conflicts() ??????
>>>    ??? scales::discard()   masks purrr::discard()
>>>    ??? dplyr::filter()     masks stats::filter()
>>>    ??? recipes::fixed()    masks stringr::fixed()
>>>    ??? dplyr::lag()        masks stats::lag()
>>>    ??? dials::margin()     masks ggplot2::margin()
>>>    ??? yardstick::spec()   masks readr::spec()
>>>    ??? recipes::step()     masks stats::step()
>>>    ??? recipes::yj_trans() masks scales::yj_trans()
>>>    > library(SSLR)
>>>    >
>>>    > data <- na.omit(airquality)
>>>    > #data <- na.omit(airquality)
>>>    >
>>>    > cls <- which(colnames(data) == "Ozone")
>>>    >
>>>    > colnames(data)[cls]<- "class"
>>>    >
>>>    > set.seed(1)
>>>    > train.index  <- sample(nrow(data), round(0.7 * nrow(data)))
>>>    > train <- data[ train.index,]
>>>    > test  <- data[-train.index,]
>>>    >
>>>    >
>>>    > #% LABELED
>>>    > labeled.index <- sample(nrow(train), round(0.2 * nrow(train)))
>>>    > train[-labeled.index,cls] <- NA
>>>    >
>>>    > m <- COREG(max.iter = 2) %>% fit(class ~ ., data = train)
>>>    Error in UseMethod("fit") :
>>>      no applicable method for 'fit' applied to an object of class
>>> "model_sslr"
>>>    Calls: %>% ... _fseq -> freduce -> withVisible -> <Anonymous> -> fit
>>>    Execution halted
>>>
>>> Flavor: r-devel-linux-x86_64-debian-gcc
>>> Check: re-building of vignette outputs, Result: WARNING
>>>    Error(s) in re-building vignettes:
>>>      ...
>>>    --- re-building 'classification.Rmd' using rmarkdown
>>>    Quitting from lines 58-60 (classification.Rmd)
>>>    Error: processing vignette 'classification.Rmd' failed with
>>> diagnostics:
>>>    no applicable method for 'fit' applied to an object of class
>>> "model_sslr"
>>>    --- failed re-building 'classification.Rmd'
>>>
>>>    --- re-building 'fit.Rmd' using rmarkdown
>>>    --- finished re-building 'fit.Rmd'
>>>
>>>    --- re-building 'introduction.Rmd' using rmarkdown
>>>    --- finished re-building 'introduction.Rmd'
>>>
>>>    --- re-building 'models.Rmd' using rmarkdown
>>>    --- finished re-building 'models.Rmd'
>>>
>>>    --- re-building 'regression.Rmd' using rmarkdown
>>>    Quitting from lines 51-53 (regression.Rmd)
>>>    Error: processing vignette 'regression.Rmd' failed with diagnostics:
>>>    no applicable method for 'fit' applied to an object of class
>>> "model_sslr"
>>>    --- failed re-building 'regression.Rmd'
>>>
>>>    SUMMARY: processing the following files failed:
>>>      'classification.Rmd' 'regression.Rmd'
>>>
>>>    Error: Vignette re-building failed.
>>>    Execution halted
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Mar 11 17:08:09 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 11 Mar 2020 17:08:09 +0100
Subject: [R-pkg-devel] Package windows binaries not updating?
In-Reply-To: <B9CDE42E-2236-4CCA-9F88-7F4542421581@poissonconsulting.ca>
References: <B9CDE42E-2236-4CCA-9F88-7F4542421581@poissonconsulting.ca>
Message-ID: <f1be0fa0-407d-2c01-632f-9a048920e8c7@statistik.tu-dortmund.de>

Sorry, takes longer as I we use a lot of COU cy<cles for R-devel 
checking ...

Uwe


On 11.03.2020 15:23, Joe Thorley wrote:
> Hi All
> 
> Version 0.4.0 of the chk package was accepted by CRAN over a week ago (on March 3rd 2020).
> 
> However, the windows binaries have not yet updated for r-devel and r-release.
> 
> https://cran.r-project.org/web/packages/chk/index.html <https://cran.r-project.org/web/packages/chk/index.html>
> 
> Is there anything I can do to facilitate their updating or do I just need to be more patient?
> 
> Thanks
> 
> Joe
> 
> Joe Thorley PhD, RPBio
> Computational Biologist
> Poisson Consulting Ltd.
> 4216 Shasheen Road
> Nelson, BC
> V1L 6X1, Canada
> Tel: +1 250 551 2194
> Email: joe at poissonconsulting.ca
> Web: www.poissonconsulting.ca
> Skype: joethorley
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From henr|k@bengt@@on @end|ng |rom gm@||@com  Wed Mar 11 18:49:46 2020
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Wed, 11 Mar 2020 10:49:46 -0700
Subject: [R-pkg-devel] 
 Fwd: Re: [CRAN-pretest-archived] CRAN submission SSLR 0.9.0
In-Reply-To: <9b7d76f9-15ee-d580-1904-36b065b111ee@gmail.com>
References: <20200310150158.7DC19161E86@xmpalantir.wu.ac.at>
 <01d5f6ef$Blat.v3.2.16$5bfef6c8$f6d461f@mail.statistik.tu-dortmund.de>
 <25bc281f3c8844d1573da4a2c02a8a06@correo.ugr.es>
 <aa3b1d7761e52c1571cee6f689876dde@correo.ugr.es>
 <7bb548a69bbd57b5cc784ccc0b5630ad@correo.ugr.es>
 <14924af6ddd8571adbaaec14beda2f91@correo.ugr.es>
 <9b7d76f9-15ee-d580-1904-36b065b111ee@gmail.com>
Message-ID: <CAFDcVCQYkXSEk5=3xT_EWtCACvrNr1uLWMWjS3QhriH=KqNu-A@mail.gmail.com>

'fpalomares', it's not clear if you can reproduce this locally or not,
but make sure you can reproduce it locally.  I could using:

R CMD check --as-cran SSLR_0.9.0.tar.gz

with R 3.6.3 on Ubuntu 18.04.  In other words, this is neither a
problem with the CRAN incoming checks nor win-builder.

Yes, I agree, at a first glance, this looks odd because:

> library(SSLR)
> fit
function (object, ...)
{
    UseMethod("fit")
}
<environment: namespace:SSLR>

> methods("fit")
[1] fit,onlearn-method fit.model_sslr
see '?methods' for accessing help and source code

Neither

$ Rscript -e 'example("COREG", package = "SSLR")'

nor

> example("COREG", package = "SSLR")

in an interactive session produce the error.

For troubleshooting, I'd added a:

print(methods("fit"))

before

m <- COREG(max.iter = 2) %>% fit(class ~ ., data = train)

I'd also try rewriting that without %>%, e.g. something like

a <- COREG(max.iter = 2)
b <- fit(class ~ a, data = train)

to see if that makes a difference.

My $.02

/Henrik

On Wed, Mar 11, 2020 at 8:13 AM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> Uwe Ligges answered you yesterday on this question.
>
> Duncan Murdoch
>
> On 11/03/2020 7:39 a.m., fpalomares at correo.ugr.es wrote:
> > Hi,
> >
> > I dont know how to fix this problem:
> > https://win-builder.r-project.org/VK8P07E1QHFA/
> >
> > The error is:
> >
> > Error in UseMethod("fit") :
> >     no applicable method for 'fit' applied to an object of class
> > "model_sslr"
> >
> > I check with my platform Windows 10 Home and I dont have problems
> >
> > The code used is:
> >
> > #' fit
> > #' @title fit object
> > #' @param object object
> > #' @param ... other parameters to be passed
> > #' @export
> > fit <- function(object, ...){
> >     UseMethod("fit")
> > }
> >
> > #' @title Fit with formula and data
> > #' @description Funtion to fit through the formula
> > #' @param object is the model
> > #' @param formula is the formula
> > #' @param data is the total data train
> > #' @param ... unused in this case
> > #' @importFrom rlang quos
> > #' @export fit.model_sslr
> > #' @export
> > fit.model_sslr <- function(object, formula = NULL, data = NULL, ...) {
> >
> >     dots <- quos(...)
> >
> >
> >     if (all(c("x", "y") %in% names(dots)))
> >       rlang::abort("`fit.model_sslr()` is for the formula methods. Use
> > `fit_xy()` instead.")
> >
> >     fit_form_interface <- check_form_interface(formula, data)
> >
> >     x_and_y <- get_x_y(formula, data)
> >
> >     eval_env <- rlang::env()
> >     eval_env$x <- x_and_y$x
> >     eval_env$y <- x_and_y$y
> >
> >     fit_interface <- check_xy_interface(eval_env$x, eval_env$y)
> >
> >     elapsed <- system.time(model <- object$fit_function(eval_env$x,
> > eval_env$y))
> >
> >
> > new_model_sslr_fitted(model,class(model),object$args,colnames(eval_env$x),elapsed,formula)
> >
> > }
> >
> >
> > In my NAMESPACE we have this:
> >
> > # Generated by roxygen2: do not edit by hand
> >
> > S3method(fit,model_sslr)
> > S3method(fit_x_u,model_sslr)
> > S3method(fit_xy,model_sslr)
> > S3method(predict,OneNN)
> > S3method(predict,model_sslr_fitted)
> > S3method(predict,snnrceG)
> > export(COREG)
> > export(EMLeastSquaresClassifierSSLR)
> > export(EMNearestMeanClassifierSSLR)
> > export(EntropyRegularizedLogisticRegressionSSLR)
> > export(LaplacianSVMSSLR)
> > export(LinearTSVMSSLR)
> > export(MCNearestMeanClassifierSSLR)
> > export(SSLRDecisionTree)
> > export(SSLRRandomForest)
> > export(TSVMSSLR)
> > export(USMLeastSquaresClassifierSSLR)
> > export(WellSVMSSLR)
> > export(coBC)
> > export(coBCCombine)
> > export(coBCG)
> > export(democratic)
> > export(democraticCombine)
> > export(democraticG)
> > export(fit)
> > export(fit.model_sslr)
> > export(fit_x_u)
> > export(fit_x_u.model_sslr)
> > export(fit_xy)
> > export(fit_xy.model_sslr)
> > export(newDecisionTree)
> > export(oneNN)
> > export(selfTraining)
> > export(selfTrainingG)
> > export(setred)
> > export(setredG)
> > export(snnrce)
> > export(train_generic)
> > export(triTraining)
> > export(triTrainingCombine)
> > export(triTrainingG)
> > exportClasses(nullOrNumericOrCharacter)
> > exportMethods(predict)
> > exportMethods(predict_inputs)
> > import(stats)
> > importFrom(RANN,nn2)
> > importFrom(RSSL,EMLeastSquaresClassifier)
> > importFrom(RSSL,EMNearestMeanClassifier)
> > importFrom(RSSL,EntropyRegularizedLogisticRegression)
> > importFrom(RSSL,LaplacianSVM)
> > importFrom(RSSL,LinearTSVM)
> > importFrom(RSSL,MCNearestMeanClassifier)
> > importFrom(RSSL,TSVM)
> > importFrom(RSSL,USMLeastSquaresClassifier)
> > importFrom(RSSL,WellSVM)
> > importFrom(dplyr,as_tibble)
> > importFrom(dplyr,tibble)
> > importFrom(foreach,"%dopar%")
> > importFrom(magrittr,"%>%")
> > importFrom(methods,new)
> > importFrom(parsnip,nearest_neighbor)
> > importFrom(parsnip,set_engine)
> > importFrom(plyr,is.formula)
> > importFrom(purrr,map)
> > importFrom(rlang,quos)
> > importFrom(stats,predict)
> > importFrom(utils,tail)
> > useDynLib(SSLR)
> >
> > We have:
> > S3method(fit,model_sslr)
> > ...
> > export(fit)
> > export(fit.model_sslr)
> >
> >
> > I don't know why the problem appears when everything is exported.
> >
> > I attach the built .tar
> >
> > Thanks.
> >
> > El 2020-03-10 17:28, fpalomares at correo.ugr.es escribi?:
> >> Hi, I thiks its weird:
> >>
> >> The error is:  no applicable method for 'fit' applied to an object of
> >> class "model_sslr"
> >>
> >> In the code:
> >>
> >> #' fit
> >> #'
> >> #' @title fit object
> >> #' @param object object
> >> #' @param ... other parameters to be passed
> >> #' @rdname fit
> >> #' @export fit
> >> fit <- function(object, ...){
> >>    UseMethod("fit")
> >> }
> >>
> >>
> >> And:
> >>
> >> #' @title Fit with formula and data
> >> #' @description Funtion to fit through the formula
> >> #' @param object is the model
> >> #' @param formula is the formula
> >> #' @param data is the total data train
> >> #' @param ... unused in this case
> >> #' @importFrom rlang quos
> >> #' @rdname fit
> >> #' @export
> >> #' @export fit.model_sslr
> >> fit.model_sslr <- function(object, formula = NULL, data = NULL, ...) {
> >>
> >>    dots <- quos(...)
> >>
> >>
> >>    if (all(c("x", "y") %in% names(dots)))
> >>      rlang::abort("`fit.model_sslr()` is for the formula methods. Use
> >> `fit_xy()` instead.")
> >>
> >>    fit_form_interface <- check_form_interface(formula, data)
> >>
> >>    x_and_y <- get_x_y(formula, data)
> >>
> >>    eval_env <- rlang::env()
> >>    eval_env$x <- x_and_y$x
> >>    eval_env$y <- x_and_y$y
> >>
> >>    fit_interface <- check_xy_interface(eval_env$x, eval_env$y)
> >>
> >>    elapsed <- system.time(model <- object$fit_function(eval_env$x,
> >> eval_env$y))
> >>
> >>
> >> new_model_sslr_fitted(model,class(model),object$args,colnames(eval_env$x),elapsed,formula)
> >>
> >> }
> >>
> >>
> >> Thanks
> >>
> >> El 2020-03-10 16:19, ligges at statistik.tu-dortmund.de escribi?:
> >>> Dear maintainer,
> >>>
> >>> package SSLR_0.9.0.tar.gz does not pass the incoming checks
> >>> automatically, please see the following pre-tests:
> >>> Windows:
> >>> <https://win-builder.r-project.org/incoming_pretest/SSLR_0.9.0_20200310_160158/Windows/00check.log>
> >>> Status: 2 ERRORs, 1 WARNING, 1 NOTE
> >>> Debian:
> >>> <https://win-builder.r-project.org/incoming_pretest/SSLR_0.9.0_20200310_160158/Debian/00check.log>
> >>> Status: 1 ERROR, 1 WARNING, 1 NOTE
> >>>
> >>>
> >>>
> >>> Please fix all problems and resubmit a fixed version via the webform.
> >>> If you are not sure how to fix the problems shown, please ask for help
> >>> on the R-package-devel mailing list:
> >>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> >>> If you are fairly certain the rejection is a false positive, please
> >>> reply-all to this message and explain.
> >>>
> >>> More details are given in the directory:
> >>> <https://win-builder.r-project.org/incoming_pretest/SSLR_0.9.0_20200310_160158/>
> >>> The files will be removed after roughly 7 days.
> >>>
> >>> No strong reverse dependencies to be checked.
> >>>
> >>> Best regards,
> >>> CRAN teams' auto-check service
> >>>
> >>> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
> >>> Check: CRAN incoming feasibility, Result: NOTE
> >>>    Maintainer: 'Francisco Jes??s Palomares Alabarce
> >>> <fpalomares at correo.ugr.es>'
> >>>
> >>>    New submission
> >>>
> >>>    Possibly mis-spelled words in DESCRIPTION:
> >>>      SSLR (23:14)
> >>>      VM (27:37)
> >>>
> >>>    Found the following (possibly) invalid URLs:
> >>>      URL: https://cran.r-project.org/web/packages/RSSL/RSSL.pdf
> >>>        From: inst/doc/introduction.html
> >>>              inst/doc/models.html
> >>>        Status: 200
> >>>        Message: OK
> >>>        CRAN URL not in canonical form
> >>>      The canonical URL of the CRAN page for a package is
> >>>        https://CRAN.R-project.org/package=pkgname
> >>>
> >>>    Found the following (possibly) invalid file URI:
> >>>      URI: www.cs.ucr.edu/~eamonn/time_series_data/
> >>>        From: man/coffee.Rd
> >>>
> >>>    The Description field should not start with the package name,
> >>>      'This package' or similar.
> >>>
> >>> Flavor: r-devel-windows-ix86+x86_64
> >>> Check: running examples for arch 'i386', Result: ERROR
> >>>    Running examples in 'SSLR-Ex.R' failed
> >>>    The error most likely occurred in:
> >>>
> >>>    > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
> >>>    > ### Name: COREG
> >>>    > ### Title: General Interface for COREG model
> >>>    > ### Aliases: COREG
> >>>    >
> >>>    > ### ** Examples
> >>>    >
> >>>    > library(tidyverse)
> >>>    -- Attaching packages ---------------------------------------
> >>> tidyverse 1.3.0 --
> >>>    v ggplot2 3.3.0     v purrr   0.3.3
> >>>    v tibble  2.1.3     v dplyr   0.8.5
> >>>    v tidyr   1.0.2     v stringr 1.4.0
> >>>    v readr   1.3.1     v forcats 0.5.0
> >>>    -- Conflicts ------------------------------------------
> >>> tidyverse_conflicts() --
> >>>    x dplyr::filter() masks stats::filter()
> >>>    x dplyr::lag()    masks stats::lag()
> >>>    > library(tidymodels)
> >>>    -- Attaching packages --------------------------------------
> >>> tidymodels 0.1.0 --
> >>>    v broom     0.5.5     v rsample   0.0.5
> >>>    v dials     0.0.4     v tune      0.0.1
> >>>    v infer     0.5.1     v workflows 0.1.0
> >>>    v parsnip   0.0.5     v yardstick 0.0.5
> >>>    v recipes   0.1.9
> >>>    -- Conflicts -----------------------------------------
> >>> tidymodels_conflicts() --
> >>>    x scales::discard()   masks purrr::discard()
> >>>    x dplyr::filter()     masks stats::filter()
> >>>    x recipes::fixed()    masks stringr::fixed()
> >>>    x dplyr::lag()        masks stats::lag()
> >>>    x dials::margin()     masks ggplot2::margin()
> >>>    x yardstick::spec()   masks readr::spec()
> >>>    x recipes::step()     masks stats::step()
> >>>    x recipes::yj_trans() masks scales::yj_trans()
> >>>    > library(SSLR)
> >>>    >
> >>>    > data <- na.omit(airquality)
> >>>    > #data <- na.omit(airquality)
> >>>    >
> >>>    > cls <- which(colnames(data) == "Ozone")
> >>>    >
> >>>    > colnames(data)[cls]<- "class"
> >>>    >
> >>>    > set.seed(1)
> >>>    > train.index  <- sample(nrow(data), round(0.7 * nrow(data)))
> >>>    > train <- data[ train.index,]
> >>>    > test  <- data[-train.index,]
> >>>    >
> >>>    >
> >>>    > #% LABELED
> >>>    > labeled.index <- sample(nrow(train), round(0.2 * nrow(train)))
> >>>    > train[-labeled.index,cls] <- NA
> >>>    >
> >>>    > m <- COREG(max.iter = 2) %>% fit(class ~ ., data = train)
> >>>    Error in UseMethod("fit") :
> >>>      no applicable method for 'fit' applied to an object of class
> >>> "model_sslr"
> >>>    Calls: %>% ... _fseq -> freduce -> withVisible -> <Anonymous> -> fit
> >>>    Execution halted
> >>>
> >>> Flavor: r-devel-windows-ix86+x86_64
> >>> Check: running examples for arch 'x64', Result: ERROR
> >>>    Running examples in 'SSLR-Ex.R' failed
> >>>    The error most likely occurred in:
> >>>
> >>>    > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
> >>>    > ### Name: COREG
> >>>    > ### Title: General Interface for COREG model
> >>>    > ### Aliases: COREG
> >>>    >
> >>>    > ### ** Examples
> >>>    >
> >>>    > library(tidyverse)
> >>>    -- Attaching packages ---------------------------------------
> >>> tidyverse 1.3.0 --
> >>>    v ggplot2 3.3.0     v purrr   0.3.3
> >>>    v tibble  2.1.3     v dplyr   0.8.5
> >>>    v tidyr   1.0.2     v stringr 1.4.0
> >>>    v readr   1.3.1     v forcats 0.5.0
> >>>    -- Conflicts ------------------------------------------
> >>> tidyverse_conflicts() --
> >>>    x dplyr::filter() masks stats::filter()
> >>>    x dplyr::lag()    masks stats::lag()
> >>>    > library(tidymodels)
> >>>    -- Attaching packages --------------------------------------
> >>> tidymodels 0.1.0 --
> >>>    v broom     0.5.5     v rsample   0.0.5
> >>>    v dials     0.0.4     v tune      0.0.1
> >>>    v infer     0.5.1     v workflows 0.1.0
> >>>    v parsnip   0.0.5     v yardstick 0.0.5
> >>>    v recipes   0.1.9
> >>>    -- Conflicts -----------------------------------------
> >>> tidymodels_conflicts() --
> >>>    x scales::discard()   masks purrr::discard()
> >>>    x dplyr::filter()     masks stats::filter()
> >>>    x recipes::fixed()    masks stringr::fixed()
> >>>    x dplyr::lag()        masks stats::lag()
> >>>    x dials::margin()     masks ggplot2::margin()
> >>>    x yardstick::spec()   masks readr::spec()
> >>>    x recipes::step()     masks stats::step()
> >>>    x recipes::yj_trans() masks scales::yj_trans()
> >>>    > library(SSLR)
> >>>    >
> >>>    > data <- na.omit(airquality)
> >>>    > #data <- na.omit(airquality)
> >>>    >
> >>>    > cls <- which(colnames(data) == "Ozone")
> >>>    >
> >>>    > colnames(data)[cls]<- "class"
> >>>    >
> >>>    > set.seed(1)
> >>>    > train.index  <- sample(nrow(data), round(0.7 * nrow(data)))
> >>>    > train <- data[ train.index,]
> >>>    > test  <- data[-train.index,]
> >>>    >
> >>>    >
> >>>    > #% LABELED
> >>>    > labeled.index <- sample(nrow(train), round(0.2 * nrow(train)))
> >>>    > train[-labeled.index,cls] <- NA
> >>>    >
> >>>    > m <- COREG(max.iter = 2) %>% fit(class ~ ., data = train)
> >>>    Error in UseMethod("fit") :
> >>>      no applicable method for 'fit' applied to an object of class
> >>> "model_sslr"
> >>>    Calls: %>% ... _fseq -> freduce -> withVisible -> <Anonymous> -> fit
> >>>    Execution halted
> >>>
> >>> Flavor: r-devel-windows-ix86+x86_64
> >>> Check: re-building of vignette outputs, Result: WARNING
> >>>    Error(s) in re-building vignettes:
> >>>    --- re-building 'classification.Rmd' using rmarkdown
> >>>    Quitting from lines 58-60 (classification.Rmd)
> >>>    Error: processing vignette 'classification.Rmd' failed with
> >>> diagnostics:
> >>>    no applicable method for 'fit' applied to an object of class
> >>> "model_sslr"
> >>>    --- failed re-building 'classification.Rmd'
> >>>
> >>>    --- re-building 'fit.Rmd' using rmarkdown
> >>>    --- finished re-building 'fit.Rmd'
> >>>
> >>>    --- re-building 'introduction.Rmd' using rmarkdown
> >>>    --- finished re-building 'introduction.Rmd'
> >>>
> >>>    --- re-building 'models.Rmd' using rmarkdown
> >>>    --- finished re-building 'models.Rmd'
> >>>
> >>>    --- re-building 'regression.Rmd' using rmarkdown
> >>>    Quitting from lines 51-53 (regression.Rmd)
> >>>    Error: processing vignette 'regression.Rmd' failed with diagnostics:
> >>>    no applicable method for 'fit' applied to an object of class
> >>> "model_sslr"
> >>>    --- failed re-building 'regression.Rmd'
> >>>
> >>>    SUMMARY: processing the following files failed:
> >>>      'classification.Rmd' 'regression.Rmd'
> >>>
> >>>    Error: Vignette re-building failed.
> >>>    Execution halted
> >>>
> >>> Flavor: r-devel-linux-x86_64-debian-gcc
> >>> Check: examples, Result: ERROR
> >>>    Running examples in 'SSLR-Ex.R' failed
> >>>    The error most likely occurred in:
> >>>
> >>>    > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
> >>>    > ### Name: COREG
> >>>    > ### Title: General Interface for COREG model
> >>>    > ### Aliases: COREG
> >>>    >
> >>>    > ### ** Examples
> >>>    >
> >>>    > library(tidyverse)
> >>>    ?????? Attaching packages
> >>> ?????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
> >>> tidyverse 1.3.0 ??????
> >>>    ??? ggplot2 3.3.0     ??? purrr   0.3.3
> >>>    ??? tibble  2.1.3     ??? dplyr   0.8.5
> >>>    ??? tidyr   1.0.2     ??? stringr 1.4.0
> >>>    ??? readr   1.3.1     ??? forcats 0.5.0
> >>>    ?????? Conflicts
> >>> ??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
> >>> tidyverse_conflicts() ??????
> >>>    ??? dplyr::filter() masks stats::filter()
> >>>    ??? dplyr::lag()    masks stats::lag()
> >>>    > library(tidymodels)
> >>>    ?????? Attaching packages
> >>> ??????????????????????????????????????????????????????????????????????????????????????????????????????????????????
> >>> tidymodels 0.1.0 ??????
> >>>    ??? broom     0.5.5     ??? rsample   0.0.5
> >>>    ??? dials     0.0.4     ??? tune      0.0.1
> >>>    ??? infer     0.5.1     ??? workflows 0.1.0
> >>>    ??? parsnip   0.0.5     ??? yardstick 0.0.5
> >>>    ??? recipes   0.1.9
> >>>    ?????? Conflicts
> >>> ???????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
> >>> tidymodels_conflicts() ??????
> >>>    ??? scales::discard()   masks purrr::discard()
> >>>    ??? dplyr::filter()     masks stats::filter()
> >>>    ??? recipes::fixed()    masks stringr::fixed()
> >>>    ??? dplyr::lag()        masks stats::lag()
> >>>    ??? dials::margin()     masks ggplot2::margin()
> >>>    ??? yardstick::spec()   masks readr::spec()
> >>>    ??? recipes::step()     masks stats::step()
> >>>    ??? recipes::yj_trans() masks scales::yj_trans()
> >>>    > library(SSLR)
> >>>    >
> >>>    > data <- na.omit(airquality)
> >>>    > #data <- na.omit(airquality)
> >>>    >
> >>>    > cls <- which(colnames(data) == "Ozone")
> >>>    >
> >>>    > colnames(data)[cls]<- "class"
> >>>    >
> >>>    > set.seed(1)
> >>>    > train.index  <- sample(nrow(data), round(0.7 * nrow(data)))
> >>>    > train <- data[ train.index,]
> >>>    > test  <- data[-train.index,]
> >>>    >
> >>>    >
> >>>    > #% LABELED
> >>>    > labeled.index <- sample(nrow(train), round(0.2 * nrow(train)))
> >>>    > train[-labeled.index,cls] <- NA
> >>>    >
> >>>    > m <- COREG(max.iter = 2) %>% fit(class ~ ., data = train)
> >>>    Error in UseMethod("fit") :
> >>>      no applicable method for 'fit' applied to an object of class
> >>> "model_sslr"
> >>>    Calls: %>% ... _fseq -> freduce -> withVisible -> <Anonymous> -> fit
> >>>    Execution halted
> >>>
> >>> Flavor: r-devel-linux-x86_64-debian-gcc
> >>> Check: re-building of vignette outputs, Result: WARNING
> >>>    Error(s) in re-building vignettes:
> >>>      ...
> >>>    --- re-building 'classification.Rmd' using rmarkdown
> >>>    Quitting from lines 58-60 (classification.Rmd)
> >>>    Error: processing vignette 'classification.Rmd' failed with
> >>> diagnostics:
> >>>    no applicable method for 'fit' applied to an object of class
> >>> "model_sslr"
> >>>    --- failed re-building 'classification.Rmd'
> >>>
> >>>    --- re-building 'fit.Rmd' using rmarkdown
> >>>    --- finished re-building 'fit.Rmd'
> >>>
> >>>    --- re-building 'introduction.Rmd' using rmarkdown
> >>>    --- finished re-building 'introduction.Rmd'
> >>>
> >>>    --- re-building 'models.Rmd' using rmarkdown
> >>>    --- finished re-building 'models.Rmd'
> >>>
> >>>    --- re-building 'regression.Rmd' using rmarkdown
> >>>    Quitting from lines 51-53 (regression.Rmd)
> >>>    Error: processing vignette 'regression.Rmd' failed with diagnostics:
> >>>    no applicable method for 'fit' applied to an object of class
> >>> "model_sslr"
> >>>    --- failed re-building 'regression.Rmd'
> >>>
> >>>    SUMMARY: processing the following files failed:
> >>>      'classification.Rmd' 'regression.Rmd'
> >>>
> >>>    Error: Vignette re-building failed.
> >>>    Execution halted
> >>>
> >>> ______________________________________________
> >>> R-package-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Wed Mar 11 19:34:56 2020
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Wed, 11 Mar 2020 18:34:56 +0000
Subject: [R-pkg-devel] 
 Fwd: Re: [CRAN-pretest-archived] CRAN submission SSLR 0.9.0
In-Reply-To: <CAFDcVCQYkXSEk5=3xT_EWtCACvrNr1uLWMWjS3QhriH=KqNu-A@mail.gmail.com>
References: <20200310150158.7DC19161E86@xmpalantir.wu.ac.at>
 <01d5f6ef$Blat.v3.2.16$5bfef6c8$f6d461f@mail.statistik.tu-dortmund.de>
 <25bc281f3c8844d1573da4a2c02a8a06@correo.ugr.es>
 <aa3b1d7761e52c1571cee6f689876dde@correo.ugr.es>
 <7bb548a69bbd57b5cc784ccc0b5630ad@correo.ugr.es>
 <14924af6ddd8571adbaaec14beda2f91@correo.ugr.es>
 <9b7d76f9-15ee-d580-1904-36b065b111ee@gmail.com>
 <CAFDcVCQYkXSEk5=3xT_EWtCACvrNr1uLWMWjS3QhriH=KqNu-A@mail.gmail.com>
Message-ID: <BL0PR04MB6609E545A7C789F117A51655F9FC0@BL0PR04MB6609.namprd04.prod.outlook.com>

After running R CMD check SSLR_0.9.0.tar.gz there is a file SSLR.Rcheck/SSLR-Ex.R. Try running that

  R -f SSLR.Rcheck/SSLR-Ex.R

my guess is that somewhere else in the examples you load a package that has a generic 'fit' that masks SSLR::fit in your package, so R is not able to find your method on the tidymoodels::fit generic.

tidymodels would seem to be a good candidate for this, with perhaps some of the search path management done by in SSLR-Ex.R meaning that the mask is not reported by tidymodels. Also running the SSLR-Ex.R script used during check means effectively

  library(SSLR)
  library(tidymodels)

(tidymodels::fit masks SSLR::fit) whereas running just the example gives

  library(tidymodels)
  library(SSLR)

(SSLR::fit masks tidymodels::fit).

Hmm, after taking the time to tidymodels I see

> fit
function (object, ...)
{
    UseMethod("fit")
}
<bytecode: 0x7f857dacf9a0>
<environment: namespace:generics>

so apparently there is a generics package that defines 'fit'... if you're playing in the tidyverse then it seems like you should @importFrom generics fit and @export fit.

Martin Morgan

?On 3/11/20, 1:50 PM, "R-package-devel on behalf of Henrik Bengtsson" <r-package-devel-bounces at r-project.org on behalf of henrik.bengtsson at gmail.com> wrote:

    'fpalomares', it's not clear if you can reproduce this locally or not,
    but make sure you can reproduce it locally.  I could using:
    
    R CMD check --as-cran SSLR_0.9.0.tar.gz
    
    with R 3.6.3 on Ubuntu 18.04.  In other words, this is neither a
    problem with the CRAN incoming checks nor win-builder.
    
    Yes, I agree, at a first glance, this looks odd because:
    
    > library(SSLR)
    > fit
    function (object, ...)
    {
        UseMethod("fit")
    }
    <environment: namespace:SSLR>
    
    > methods("fit")
    [1] fit,onlearn-method fit.model_sslr
    see '?methods' for accessing help and source code
    
    Neither
    
    $ Rscript -e 'example("COREG", package = "SSLR")'
    
    nor
    
    > example("COREG", package = "SSLR")
    
    in an interactive session produce the error.
    
    For troubleshooting, I'd added a:
    
    print(methods("fit"))
    
    before
    
    m <- COREG(max.iter = 2) %>% fit(class ~ ., data = train)
    
    I'd also try rewriting that without %>%, e.g. something like
    
    a <- COREG(max.iter = 2)
    b <- fit(class ~ a, data = train)
    
    to see if that makes a difference.
    
    My $.02
    
    /Henrik
    
    On Wed, Mar 11, 2020 at 8:13 AM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
    >
    > Uwe Ligges answered you yesterday on this question.
    >
    > Duncan Murdoch
    >
    > On 11/03/2020 7:39 a.m., fpalomares at correo.ugr.es wrote:
    > > Hi,
    > >
    > > I dont know how to fix this problem:
    > > https://win-builder.r-project.org/VK8P07E1QHFA/
    > >
    > > The error is:
    > >
    > > Error in UseMethod("fit") :
    > >     no applicable method for 'fit' applied to an object of class
    > > "model_sslr"
    > >
    > > I check with my platform Windows 10 Home and I dont have problems
    > >
    > > The code used is:
    > >
    > > #' fit
    > > #' @title fit object
    > > #' @param object object
    > > #' @param ... other parameters to be passed
    > > #' @export
    > > fit <- function(object, ...){
    > >     UseMethod("fit")
    > > }
    > >
    > > #' @title Fit with formula and data
    > > #' @description Funtion to fit through the formula
    > > #' @param object is the model
    > > #' @param formula is the formula
    > > #' @param data is the total data train
    > > #' @param ... unused in this case
    > > #' @importFrom rlang quos
    > > #' @export fit.model_sslr
    > > #' @export
    > > fit.model_sslr <- function(object, formula = NULL, data = NULL, ...) {
    > >
    > >     dots <- quos(...)
    > >
    > >
    > >     if (all(c("x", "y") %in% names(dots)))
    > >       rlang::abort("`fit.model_sslr()` is for the formula methods. Use
    > > `fit_xy()` instead.")
    > >
    > >     fit_form_interface <- check_form_interface(formula, data)
    > >
    > >     x_and_y <- get_x_y(formula, data)
    > >
    > >     eval_env <- rlang::env()
    > >     eval_env$x <- x_and_y$x
    > >     eval_env$y <- x_and_y$y
    > >
    > >     fit_interface <- check_xy_interface(eval_env$x, eval_env$y)
    > >
    > >     elapsed <- system.time(model <- object$fit_function(eval_env$x,
    > > eval_env$y))
    > >
    > >
    > > new_model_sslr_fitted(model,class(model),object$args,colnames(eval_env$x),elapsed,formula)
    > >
    > > }
    > >
    > >
    > > In my NAMESPACE we have this:
    > >
    > > # Generated by roxygen2: do not edit by hand
    > >
    > > S3method(fit,model_sslr)
    > > S3method(fit_x_u,model_sslr)
    > > S3method(fit_xy,model_sslr)
    > > S3method(predict,OneNN)
    > > S3method(predict,model_sslr_fitted)
    > > S3method(predict,snnrceG)
    > > export(COREG)
    > > export(EMLeastSquaresClassifierSSLR)
    > > export(EMNearestMeanClassifierSSLR)
    > > export(EntropyRegularizedLogisticRegressionSSLR)
    > > export(LaplacianSVMSSLR)
    > > export(LinearTSVMSSLR)
    > > export(MCNearestMeanClassifierSSLR)
    > > export(SSLRDecisionTree)
    > > export(SSLRRandomForest)
    > > export(TSVMSSLR)
    > > export(USMLeastSquaresClassifierSSLR)
    > > export(WellSVMSSLR)
    > > export(coBC)
    > > export(coBCCombine)
    > > export(coBCG)
    > > export(democratic)
    > > export(democraticCombine)
    > > export(democraticG)
    > > export(fit)
    > > export(fit.model_sslr)
    > > export(fit_x_u)
    > > export(fit_x_u.model_sslr)
    > > export(fit_xy)
    > > export(fit_xy.model_sslr)
    > > export(newDecisionTree)
    > > export(oneNN)
    > > export(selfTraining)
    > > export(selfTrainingG)
    > > export(setred)
    > > export(setredG)
    > > export(snnrce)
    > > export(train_generic)
    > > export(triTraining)
    > > export(triTrainingCombine)
    > > export(triTrainingG)
    > > exportClasses(nullOrNumericOrCharacter)
    > > exportMethods(predict)
    > > exportMethods(predict_inputs)
    > > import(stats)
    > > importFrom(RANN,nn2)
    > > importFrom(RSSL,EMLeastSquaresClassifier)
    > > importFrom(RSSL,EMNearestMeanClassifier)
    > > importFrom(RSSL,EntropyRegularizedLogisticRegression)
    > > importFrom(RSSL,LaplacianSVM)
    > > importFrom(RSSL,LinearTSVM)
    > > importFrom(RSSL,MCNearestMeanClassifier)
    > > importFrom(RSSL,TSVM)
    > > importFrom(RSSL,USMLeastSquaresClassifier)
    > > importFrom(RSSL,WellSVM)
    > > importFrom(dplyr,as_tibble)
    > > importFrom(dplyr,tibble)
    > > importFrom(foreach,"%dopar%")
    > > importFrom(magrittr,"%>%")
    > > importFrom(methods,new)
    > > importFrom(parsnip,nearest_neighbor)
    > > importFrom(parsnip,set_engine)
    > > importFrom(plyr,is.formula)
    > > importFrom(purrr,map)
    > > importFrom(rlang,quos)
    > > importFrom(stats,predict)
    > > importFrom(utils,tail)
    > > useDynLib(SSLR)
    > >
    > > We have:
    > > S3method(fit,model_sslr)
    > > ...
    > > export(fit)
    > > export(fit.model_sslr)
    > >
    > >
    > > I don't know why the problem appears when everything is exported.
    > >
    > > I attach the built .tar
    > >
    > > Thanks.
    > >
    > > El 2020-03-10 17:28, fpalomares at correo.ugr.es escribi?:
    > >> Hi, I thiks its weird:
    > >>
    > >> The error is:  no applicable method for 'fit' applied to an object of
    > >> class "model_sslr"
    > >>
    > >> In the code:
    > >>
    > >> #' fit
    > >> #'
    > >> #' @title fit object
    > >> #' @param object object
    > >> #' @param ... other parameters to be passed
    > >> #' @rdname fit
    > >> #' @export fit
    > >> fit <- function(object, ...){
    > >>    UseMethod("fit")
    > >> }
    > >>
    > >>
    > >> And:
    > >>
    > >> #' @title Fit with formula and data
    > >> #' @description Funtion to fit through the formula
    > >> #' @param object is the model
    > >> #' @param formula is the formula
    > >> #' @param data is the total data train
    > >> #' @param ... unused in this case
    > >> #' @importFrom rlang quos
    > >> #' @rdname fit
    > >> #' @export
    > >> #' @export fit.model_sslr
    > >> fit.model_sslr <- function(object, formula = NULL, data = NULL, ...) {
    > >>
    > >>    dots <- quos(...)
    > >>
    > >>
    > >>    if (all(c("x", "y") %in% names(dots)))
    > >>      rlang::abort("`fit.model_sslr()` is for the formula methods. Use
    > >> `fit_xy()` instead.")
    > >>
    > >>    fit_form_interface <- check_form_interface(formula, data)
    > >>
    > >>    x_and_y <- get_x_y(formula, data)
    > >>
    > >>    eval_env <- rlang::env()
    > >>    eval_env$x <- x_and_y$x
    > >>    eval_env$y <- x_and_y$y
    > >>
    > >>    fit_interface <- check_xy_interface(eval_env$x, eval_env$y)
    > >>
    > >>    elapsed <- system.time(model <- object$fit_function(eval_env$x,
    > >> eval_env$y))
    > >>
    > >>
    > >> new_model_sslr_fitted(model,class(model),object$args,colnames(eval_env$x),elapsed,formula)
    > >>
    > >> }
    > >>
    > >>
    > >> Thanks
    > >>
    > >> El 2020-03-10 16:19, ligges at statistik.tu-dortmund.de escribi?:
    > >>> Dear maintainer,
    > >>>
    > >>> package SSLR_0.9.0.tar.gz does not pass the incoming checks
    > >>> automatically, please see the following pre-tests:
    > >>> Windows:
    > >>> <https://win-builder.r-project.org/incoming_pretest/SSLR_0.9.0_20200310_160158/Windows/00check.log>
    > >>> Status: 2 ERRORs, 1 WARNING, 1 NOTE
    > >>> Debian:
    > >>> <https://win-builder.r-project.org/incoming_pretest/SSLR_0.9.0_20200310_160158/Debian/00check.log>
    > >>> Status: 1 ERROR, 1 WARNING, 1 NOTE
    > >>>
    > >>>
    > >>>
    > >>> Please fix all problems and resubmit a fixed version via the webform.
    > >>> If you are not sure how to fix the problems shown, please ask for help
    > >>> on the R-package-devel mailing list:
    > >>> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
    > >>> If you are fairly certain the rejection is a false positive, please
    > >>> reply-all to this message and explain.
    > >>>
    > >>> More details are given in the directory:
    > >>> <https://win-builder.r-project.org/incoming_pretest/SSLR_0.9.0_20200310_160158/>
    > >>> The files will be removed after roughly 7 days.
    > >>>
    > >>> No strong reverse dependencies to be checked.
    > >>>
    > >>> Best regards,
    > >>> CRAN teams' auto-check service
    > >>>
    > >>> Flavor: r-devel-linux-x86_64-debian-gcc, r-devel-windows-ix86+x86_64
    > >>> Check: CRAN incoming feasibility, Result: NOTE
    > >>>    Maintainer: 'Francisco Jes??s Palomares Alabarce
    > >>> <fpalomares at correo.ugr.es>'
    > >>>
    > >>>    New submission
    > >>>
    > >>>    Possibly mis-spelled words in DESCRIPTION:
    > >>>      SSLR (23:14)
    > >>>      VM (27:37)
    > >>>
    > >>>    Found the following (possibly) invalid URLs:
    > >>>      URL: https://cran.r-project.org/web/packages/RSSL/RSSL.pdf
    > >>>        From: inst/doc/introduction.html
    > >>>              inst/doc/models.html
    > >>>        Status: 200
    > >>>        Message: OK
    > >>>        CRAN URL not in canonical form
    > >>>      The canonical URL of the CRAN page for a package is
    > >>>        https://CRAN.R-project.org/package=pkgname
    > >>>
    > >>>    Found the following (possibly) invalid file URI:
    > >>>      URI: www.cs.ucr.edu/~eamonn/time_series_data/
    > >>>        From: man/coffee.Rd
    > >>>
    > >>>    The Description field should not start with the package name,
    > >>>      'This package' or similar.
    > >>>
    > >>> Flavor: r-devel-windows-ix86+x86_64
    > >>> Check: running examples for arch 'i386', Result: ERROR
    > >>>    Running examples in 'SSLR-Ex.R' failed
    > >>>    The error most likely occurred in:
    > >>>
    > >>>    > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
    > >>>    > ### Name: COREG
    > >>>    > ### Title: General Interface for COREG model
    > >>>    > ### Aliases: COREG
    > >>>    >
    > >>>    > ### ** Examples
    > >>>    >
    > >>>    > library(tidyverse)
    > >>>    -- Attaching packages ---------------------------------------
    > >>> tidyverse 1.3.0 --
    > >>>    v ggplot2 3.3.0     v purrr   0.3.3
    > >>>    v tibble  2.1.3     v dplyr   0.8.5
    > >>>    v tidyr   1.0.2     v stringr 1.4.0
    > >>>    v readr   1.3.1     v forcats 0.5.0
    > >>>    -- Conflicts ------------------------------------------
    > >>> tidyverse_conflicts() --
    > >>>    x dplyr::filter() masks stats::filter()
    > >>>    x dplyr::lag()    masks stats::lag()
    > >>>    > library(tidymodels)
    > >>>    -- Attaching packages --------------------------------------
    > >>> tidymodels 0.1.0 --
    > >>>    v broom     0.5.5     v rsample   0.0.5
    > >>>    v dials     0.0.4     v tune      0.0.1
    > >>>    v infer     0.5.1     v workflows 0.1.0
    > >>>    v parsnip   0.0.5     v yardstick 0.0.5
    > >>>    v recipes   0.1.9
    > >>>    -- Conflicts -----------------------------------------
    > >>> tidymodels_conflicts() --
    > >>>    x scales::discard()   masks purrr::discard()
    > >>>    x dplyr::filter()     masks stats::filter()
    > >>>    x recipes::fixed()    masks stringr::fixed()
    > >>>    x dplyr::lag()        masks stats::lag()
    > >>>    x dials::margin()     masks ggplot2::margin()
    > >>>    x yardstick::spec()   masks readr::spec()
    > >>>    x recipes::step()     masks stats::step()
    > >>>    x recipes::yj_trans() masks scales::yj_trans()
    > >>>    > library(SSLR)
    > >>>    >
    > >>>    > data <- na.omit(airquality)
    > >>>    > #data <- na.omit(airquality)
    > >>>    >
    > >>>    > cls <- which(colnames(data) == "Ozone")
    > >>>    >
    > >>>    > colnames(data)[cls]<- "class"
    > >>>    >
    > >>>    > set.seed(1)
    > >>>    > train.index  <- sample(nrow(data), round(0.7 * nrow(data)))
    > >>>    > train <- data[ train.index,]
    > >>>    > test  <- data[-train.index,]
    > >>>    >
    > >>>    >
    > >>>    > #% LABELED
    > >>>    > labeled.index <- sample(nrow(train), round(0.2 * nrow(train)))
    > >>>    > train[-labeled.index,cls] <- NA
    > >>>    >
    > >>>    > m <- COREG(max.iter = 2) %>% fit(class ~ ., data = train)
    > >>>    Error in UseMethod("fit") :
    > >>>      no applicable method for 'fit' applied to an object of class
    > >>> "model_sslr"
    > >>>    Calls: %>% ... _fseq -> freduce -> withVisible -> <Anonymous> -> fit
    > >>>    Execution halted
    > >>>
    > >>> Flavor: r-devel-windows-ix86+x86_64
    > >>> Check: running examples for arch 'x64', Result: ERROR
    > >>>    Running examples in 'SSLR-Ex.R' failed
    > >>>    The error most likely occurred in:
    > >>>
    > >>>    > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
    > >>>    > ### Name: COREG
    > >>>    > ### Title: General Interface for COREG model
    > >>>    > ### Aliases: COREG
    > >>>    >
    > >>>    > ### ** Examples
    > >>>    >
    > >>>    > library(tidyverse)
    > >>>    -- Attaching packages ---------------------------------------
    > >>> tidyverse 1.3.0 --
    > >>>    v ggplot2 3.3.0     v purrr   0.3.3
    > >>>    v tibble  2.1.3     v dplyr   0.8.5
    > >>>    v tidyr   1.0.2     v stringr 1.4.0
    > >>>    v readr   1.3.1     v forcats 0.5.0
    > >>>    -- Conflicts ------------------------------------------
    > >>> tidyverse_conflicts() --
    > >>>    x dplyr::filter() masks stats::filter()
    > >>>    x dplyr::lag()    masks stats::lag()
    > >>>    > library(tidymodels)
    > >>>    -- Attaching packages --------------------------------------
    > >>> tidymodels 0.1.0 --
    > >>>    v broom     0.5.5     v rsample   0.0.5
    > >>>    v dials     0.0.4     v tune      0.0.1
    > >>>    v infer     0.5.1     v workflows 0.1.0
    > >>>    v parsnip   0.0.5     v yardstick 0.0.5
    > >>>    v recipes   0.1.9
    > >>>    -- Conflicts -----------------------------------------
    > >>> tidymodels_conflicts() --
    > >>>    x scales::discard()   masks purrr::discard()
    > >>>    x dplyr::filter()     masks stats::filter()
    > >>>    x recipes::fixed()    masks stringr::fixed()
    > >>>    x dplyr::lag()        masks stats::lag()
    > >>>    x dials::margin()     masks ggplot2::margin()
    > >>>    x yardstick::spec()   masks readr::spec()
    > >>>    x recipes::step()     masks stats::step()
    > >>>    x recipes::yj_trans() masks scales::yj_trans()
    > >>>    > library(SSLR)
    > >>>    >
    > >>>    > data <- na.omit(airquality)
    > >>>    > #data <- na.omit(airquality)
    > >>>    >
    > >>>    > cls <- which(colnames(data) == "Ozone")
    > >>>    >
    > >>>    > colnames(data)[cls]<- "class"
    > >>>    >
    > >>>    > set.seed(1)
    > >>>    > train.index  <- sample(nrow(data), round(0.7 * nrow(data)))
    > >>>    > train <- data[ train.index,]
    > >>>    > test  <- data[-train.index,]
    > >>>    >
    > >>>    >
    > >>>    > #% LABELED
    > >>>    > labeled.index <- sample(nrow(train), round(0.2 * nrow(train)))
    > >>>    > train[-labeled.index,cls] <- NA
    > >>>    >
    > >>>    > m <- COREG(max.iter = 2) %>% fit(class ~ ., data = train)
    > >>>    Error in UseMethod("fit") :
    > >>>      no applicable method for 'fit' applied to an object of class
    > >>> "model_sslr"
    > >>>    Calls: %>% ... _fseq -> freduce -> withVisible -> <Anonymous> -> fit
    > >>>    Execution halted
    > >>>
    > >>> Flavor: r-devel-windows-ix86+x86_64
    > >>> Check: re-building of vignette outputs, Result: WARNING
    > >>>    Error(s) in re-building vignettes:
    > >>>    --- re-building 'classification.Rmd' using rmarkdown
    > >>>    Quitting from lines 58-60 (classification.Rmd)
    > >>>    Error: processing vignette 'classification.Rmd' failed with
    > >>> diagnostics:
    > >>>    no applicable method for 'fit' applied to an object of class
    > >>> "model_sslr"
    > >>>    --- failed re-building 'classification.Rmd'
    > >>>
    > >>>    --- re-building 'fit.Rmd' using rmarkdown
    > >>>    --- finished re-building 'fit.Rmd'
    > >>>
    > >>>    --- re-building 'introduction.Rmd' using rmarkdown
    > >>>    --- finished re-building 'introduction.Rmd'
    > >>>
    > >>>    --- re-building 'models.Rmd' using rmarkdown
    > >>>    --- finished re-building 'models.Rmd'
    > >>>
    > >>>    --- re-building 'regression.Rmd' using rmarkdown
    > >>>    Quitting from lines 51-53 (regression.Rmd)
    > >>>    Error: processing vignette 'regression.Rmd' failed with diagnostics:
    > >>>    no applicable method for 'fit' applied to an object of class
    > >>> "model_sslr"
    > >>>    --- failed re-building 'regression.Rmd'
    > >>>
    > >>>    SUMMARY: processing the following files failed:
    > >>>      'classification.Rmd' 'regression.Rmd'
    > >>>
    > >>>    Error: Vignette re-building failed.
    > >>>    Execution halted
    > >>>
    > >>> Flavor: r-devel-linux-x86_64-debian-gcc
    > >>> Check: examples, Result: ERROR
    > >>>    Running examples in 'SSLR-Ex.R' failed
    > >>>    The error most likely occurred in:
    > >>>
    > >>>    > base::assign(".ptime", proc.time(), pos = "CheckExEnv")
    > >>>    > ### Name: COREG
    > >>>    > ### Title: General Interface for COREG model
    > >>>    > ### Aliases: COREG
    > >>>    >
    > >>>    > ### ** Examples
    > >>>    >
    > >>>    > library(tidyverse)
    > >>>    ?????? Attaching packages
    > >>> ?????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
    > >>> tidyverse 1.3.0 ??????
    > >>>    ??? ggplot2 3.3.0     ??? purrr   0.3.3
    > >>>    ??? tibble  2.1.3     ??? dplyr   0.8.5
    > >>>    ??? tidyr   1.0.2     ??? stringr 1.4.0
    > >>>    ??? readr   1.3.1     ??? forcats 0.5.0
    > >>>    ?????? Conflicts
    > >>> ??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
    > >>> tidyverse_conflicts() ??????
    > >>>    ??? dplyr::filter() masks stats::filter()
    > >>>    ??? dplyr::lag()    masks stats::lag()
    > >>>    > library(tidymodels)
    > >>>    ?????? Attaching packages
    > >>> ??????????????????????????????????????????????????????????????????????????????????????????????????????????????????
    > >>> tidymodels 0.1.0 ??????
    > >>>    ??? broom     0.5.5     ??? rsample   0.0.5
    > >>>    ??? dials     0.0.4     ??? tune      0.0.1
    > >>>    ??? infer     0.5.1     ??? workflows 0.1.0
    > >>>    ??? parsnip   0.0.5     ??? yardstick 0.0.5
    > >>>    ??? recipes   0.1.9
    > >>>    ?????? Conflicts
    > >>> ???????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
    > >>> tidymodels_conflicts() ??????
    > >>>    ??? scales::discard()   masks purrr::discard()
    > >>>    ??? dplyr::filter()     masks stats::filter()
    > >>>    ??? recipes::fixed()    masks stringr::fixed()
    > >>>    ??? dplyr::lag()        masks stats::lag()
    > >>>    ??? dials::margin()     masks ggplot2::margin()
    > >>>    ??? yardstick::spec()   masks readr::spec()
    > >>>    ??? recipes::step()     masks stats::step()
    > >>>    ??? recipes::yj_trans() masks scales::yj_trans()
    > >>>    > library(SSLR)
    > >>>    >
    > >>>    > data <- na.omit(airquality)
    > >>>    > #data <- na.omit(airquality)
    > >>>    >
    > >>>    > cls <- which(colnames(data) == "Ozone")
    > >>>    >
    > >>>    > colnames(data)[cls]<- "class"
    > >>>    >
    > >>>    > set.seed(1)
    > >>>    > train.index  <- sample(nrow(data), round(0.7 * nrow(data)))
    > >>>    > train <- data[ train.index,]
    > >>>    > test  <- data[-train.index,]
    > >>>    >
    > >>>    >
    > >>>    > #% LABELED
    > >>>    > labeled.index <- sample(nrow(train), round(0.2 * nrow(train)))
    > >>>    > train[-labeled.index,cls] <- NA
    > >>>    >
    > >>>    > m <- COREG(max.iter = 2) %>% fit(class ~ ., data = train)
    > >>>    Error in UseMethod("fit") :
    > >>>      no applicable method for 'fit' applied to an object of class
    > >>> "model_sslr"
    > >>>    Calls: %>% ... _fseq -> freduce -> withVisible -> <Anonymous> -> fit
    > >>>    Execution halted
    > >>>
    > >>> Flavor: r-devel-linux-x86_64-debian-gcc
    > >>> Check: re-building of vignette outputs, Result: WARNING
    > >>>    Error(s) in re-building vignettes:
    > >>>      ...
    > >>>    --- re-building 'classification.Rmd' using rmarkdown
    > >>>    Quitting from lines 58-60 (classification.Rmd)
    > >>>    Error: processing vignette 'classification.Rmd' failed with
    > >>> diagnostics:
    > >>>    no applicable method for 'fit' applied to an object of class
    > >>> "model_sslr"
    > >>>    --- failed re-building 'classification.Rmd'
    > >>>
    > >>>    --- re-building 'fit.Rmd' using rmarkdown
    > >>>    --- finished re-building 'fit.Rmd'
    > >>>
    > >>>    --- re-building 'introduction.Rmd' using rmarkdown
    > >>>    --- finished re-building 'introduction.Rmd'
    > >>>
    > >>>    --- re-building 'models.Rmd' using rmarkdown
    > >>>    --- finished re-building 'models.Rmd'
    > >>>
    > >>>    --- re-building 'regression.Rmd' using rmarkdown
    > >>>    Quitting from lines 51-53 (regression.Rmd)
    > >>>    Error: processing vignette 'regression.Rmd' failed with diagnostics:
    > >>>    no applicable method for 'fit' applied to an object of class
    > >>> "model_sslr"
    > >>>    --- failed re-building 'regression.Rmd'
    > >>>
    > >>>    SUMMARY: processing the following files failed:
    > >>>      'classification.Rmd' 'regression.Rmd'
    > >>>
    > >>>    Error: Vignette re-building failed.
    > >>>    Execution halted
    > >>>
    > >>> ______________________________________________
    > >>> R-package-devel at r-project.org mailing list
    > >>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
    >
    > ______________________________________________
    > R-package-devel at r-project.org mailing list
    > https://stat.ethz.ch/mailman/listinfo/r-package-devel
    
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel
    

From n|u|tz @end|ng |rom gm@||@com  Wed Mar 11 19:39:11 2020
From: n|u|tz @end|ng |rom gm@||@com (Neal Fultz)
Date: Wed, 11 Mar 2020 11:39:11 -0700
Subject: [R-pkg-devel] Need help testing for Apple
Message-ID: <CAL9B2vfYFs-sVFW0i64H1GXtGVuNyV8LugTH2J2xSsLGweNghg@mail.gmail.com>

Hello,

I am working on a package that does terminal graphics for hterm, but iterm2
should work too; if you have an apple computer with iterm2, could you
please help test it for me?

Installation:

    remotes::install_github("nfultz/osc1337")

Then run this demo:

    demo("barplot", "osc1337")

Try running it from a shell, and also inside screen and tmux, and let me
know if you see the barplot in each case. Version numbers might be helpful
too.

*** it does not work in rstudio ***

Thanks much!

- Neal Fultz

PS If anyone from rstudio is on the list, would you mind
explaining RShadowPngGraphicsHandler.cpp and friends, and how it knows when
to redraw when R returns to the REPL prompt?

I'd like to do something similar so that drawing plots in the terminal is
less manual.

Haven't found much docs on the graphics engine other than a really old
omegahat project, been trying to read engine.c but I'm slow.

	[[alternative HTML version deleted]]


From ch@r||e @end|ng |rom @t@t@umn@edu  Wed Mar 11 19:44:56 2020
From: ch@r||e @end|ng |rom @t@t@umn@edu (Charles Geyer)
Date: Wed, 11 Mar 2020 13:44:56 -0500
Subject: [R-pkg-devel] check --as-cran error on Rd file
Message-ID: <CAKctRd3w9VNP2VUh83Xxit8wFnYCTJxZQJd-EsEK4ModV7e6ew@mail.gmail.com>

blurfle$ cat sped.Rcheck/00check.log
* using log directory ?/home/geyer/Software/sped/package/sped.Rcheck?
* using R Under development (unstable) (2020-03-10 r77920)
* using platform: x86_64-pc-linux-gnu (64-bit)
* using session charset: UTF-8
* using option ?--as-cran?
* checking for file ?sped/DESCRIPTION? ... OK
* this is package ?sped? version ?0.1?
* checking CRAN incoming feasibility ... NOTE
Maintainer: ?Charles J. Geyer <charlie at stat.umn.edu>?

New submission
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking serialization versions ... OK
* checking whether package ?sped? can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking for future file timestamps ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ...
OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking loading without being on the library search path ... OK
* checking use of S3 registration ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd line widths ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... WARNING
Variables with usage in documentation object 'alberta' but not in code:
  ?alberta?

* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking contents of ?data? directory ... OK
* checking data for non-ASCII characters ... OK
* checking data for ASCII and uncompressed saves ... OK
* checking line endings in C/C++/Fortran sources/headers ... OK
* checking line endings in Makefiles ... OK
* checking compilation flags in Makevars ... OK
* checking for GNU extensions in Makefiles ... OK
* checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS) ... OK
* checking use of PKG_*FLAGS in Makefiles ... OK
* checking use of SHLIB_OPENMP_*FLAGS in Makefiles ... OK
* checking pragmas in C/C++ headers and code ... OK
* checking compilation flags used ... OK
* checking compiled code ... OK
* checking examples ... OK
* checking for unstated dependencies in ?tests? ... OK
* checking tests ... OK
  Running ?foo.R?
* checking PDF version of manual ... OK
* checking for non-standard things in the check directory ... OK
* checking for detritus in the temp directory ... OK
* DONE
Status: 1 WARNING, 1 NOTE
blurfle$

I do not get this warning when --as-cran is omitted.  I have never seen the
warning before.  The Rd file is

blurfle$ cat sped/man/alberta.Rd
\name{alberta}
\docType{data}
\alias{alberta}
\title{Pedigree Data on Equus przewalskii in Alberta}
\description{
  Pedigree of Asian wild horse (also called Mongolian wild horse)
  \emph{Equus przewalskii} individuals living in Alberta, Canada in 1988.
}
\usage{alberta}
\format{
A matrix with 69 rows giving (individual, father, mother) triplets.
The column labels are \code{ind}, \code{pa}, and \code{ma}.
The names (which are numbers) are studbook numbers.
There are 82 individuals in this pedigree in all.
There are \eqn{82 - 69 = 13} founders.
}
\examples{
library(sped)
data(alberta)
}
\keyword{datasets}
blurfle$

And this is AFAICS what Section 2.1.2 of Writing R Extensions (R-devel
version) says it should be.

So what is this warning about?

-- 
Charles Geyer
Professor, School of Statistics
Resident Fellow, Minnesota Center for Philosophy of Science
University of Minnesota
charlie at stat.umn.edu

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Mar 11 21:57:04 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 11 Mar 2020 13:57:04 -0700
Subject: [R-pkg-devel] check --as-cran error on Rd file
In-Reply-To: <CAKctRd3w9VNP2VUh83Xxit8wFnYCTJxZQJd-EsEK4ModV7e6ew@mail.gmail.com>
References: <CAKctRd3w9VNP2VUh83Xxit8wFnYCTJxZQJd-EsEK4ModV7e6ew@mail.gmail.com>
Message-ID: <aac5d0ea-d209-1b28-8c98-29376298ade1@gmail.com>

On 11/03/2020 11:44 a.m., Charles Geyer wrote:
> blurfle$ cat sped.Rcheck/00check.log
> * using log directory ?/home/geyer/Software/sped/package/sped.Rcheck?
> * using R Under development (unstable) (2020-03-10 r77920)
> * using platform: x86_64-pc-linux-gnu (64-bit)
> * using session charset: UTF-8
> * using option ?--as-cran?
> * checking for file ?sped/DESCRIPTION? ... OK
> * this is package ?sped? version ?0.1?
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?Charles J. Geyer <charlie at stat.umn.edu>?
> 
> New submission
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for executable files ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking for sufficient/correct file permissions ... OK
> * checking serialization versions ... OK
> * checking whether package ?sped? can be installed ... OK
> * checking installed package size ... OK
> * checking package directory ... OK
> * checking for future file timestamps ... OK
> * checking DESCRIPTION meta-information ... OK
> * checking top-level files ... OK
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * checking whether the package can be loaded ... OK
> * checking whether the package can be loaded with stated dependencies ... OK
> * checking whether the package can be unloaded cleanly ... OK
> * checking whether the namespace can be loaded with stated dependencies ...
> OK
> * checking whether the namespace can be unloaded cleanly ... OK
> * checking loading without being on the library search path ... OK
> * checking use of S3 registration ... OK
> * checking dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... OK
> * checking Rd files ... OK
> * checking Rd metadata ... OK
> * checking Rd line widths ... OK
> * checking Rd cross-references ... OK
> * checking for missing documentation entries ... OK
> * checking for code/documentation mismatches ... WARNING
> Variables with usage in documentation object 'alberta' but not in code:
>    ?alberta?
> 
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking contents of ?data? directory ... OK
> * checking data for non-ASCII characters ... OK
> * checking data for ASCII and uncompressed saves ... OK
> * checking line endings in C/C++/Fortran sources/headers ... OK
> * checking line endings in Makefiles ... OK
> * checking compilation flags in Makevars ... OK
> * checking for GNU extensions in Makefiles ... OK
> * checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS) ... OK
> * checking use of PKG_*FLAGS in Makefiles ... OK
> * checking use of SHLIB_OPENMP_*FLAGS in Makefiles ... OK
> * checking pragmas in C/C++ headers and code ... OK
> * checking compilation flags used ... OK
> * checking compiled code ... OK
> * checking examples ... OK
> * checking for unstated dependencies in ?tests? ... OK
> * checking tests ... OK
>    Running ?foo.R?
> * checking PDF version of manual ... OK
> * checking for non-standard things in the check directory ... OK
> * checking for detritus in the temp directory ... OK
> * DONE
> Status: 1 WARNING, 1 NOTE
> blurfle$
> 
> I do not get this warning when --as-cran is omitted.  I have never seen the
> warning before.  The Rd file is
> 
> blurfle$ cat sped/man/alberta.Rd
> \name{alberta}
> \docType{data}
> \alias{alberta}
> \title{Pedigree Data on Equus przewalskii in Alberta}
> \description{
>    Pedigree of Asian wild horse (also called Mongolian wild horse)
>    \emph{Equus przewalskii} individuals living in Alberta, Canada in 1988.
> }
> \usage{alberta}
> \format{
> A matrix with 69 rows giving (individual, father, mother) triplets.
> The column labels are \code{ind}, \code{pa}, and \code{ma}.
> The names (which are numbers) are studbook numbers.
> There are 82 individuals in this pedigree in all.
> There are \eqn{82 - 69 = 13} founders.
> }
> \examples{
> library(sped)
> data(alberta)
> }
> \keyword{datasets}
> blurfle$
> 
> And this is AFAICS what Section 2.1.2 of Writing R Extensions (R-devel
> version) says it should be.
> 
> So what is this warning about?

The manual says "The \usage entry is always bar or (for packages which 
do not use lazy-loading of data) data(bar). (In particular, only 
document a single data object per Rd file.)".  So maybe you aren't using 
lazy loading?

Duncan Murdoch


From dw|n@em|u@ @end|ng |rom comc@@t@net  Thu Mar 12 06:46:20 2020
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Wed, 11 Mar 2020 22:46:20 -0700
Subject: [R-pkg-devel] Need help testing for Apple
In-Reply-To: <CAL9B2vfYFs-sVFW0i64H1GXtGVuNyV8LugTH2J2xSsLGweNghg@mail.gmail.com>
References: <CAL9B2vfYFs-sVFW0i64H1GXtGVuNyV8LugTH2J2xSsLGweNghg@mail.gmail.com>
Message-ID: <CBBC9D5A-AF1E-4B01-B924-08F869BAA0D3@comcast.net>



> On Mar 11, 2020, at 11:39 AM, Neal Fultz <nfultz at gmail.com> wrote:
> 
> Hello,
> 
> I am working on a package that does terminal graphics for hterm, but iterm2
> should work too; if you have an apple computer with iterm2, could you
> please help test it for me?
> 
> Installation:
> 
>    remotes::install_github("nfultz/osc1337")
> 
> Then run this demo:
> 
>    demo("barplot", "osc1337")
> 
> Try running it from a shell, and also inside screen and tmux, and let me
> know if you see the barplot in each case. Version numbers might be helpful
> too.
> 
> *** it does not work in rstudio ***

I'm not sure what is supposed to happen. On my device running the R.app I see:

> barplot(1:10, col=1:10)
Hit <Return> to see next plot: 

> osc1337()
/var/folders/68/vh2f8kzn09j8954r6q9100yh0000gn/T//RtmpC2yMm9/fileefa4178b3c1.png 
 480 480 
9684 
]1337;File=name=ZmlsZWVmYTQxNzhiM2MxLnBuZw==;width=480;height=480;inline=1:iVBORw0KGgoAAAANSUhEUgAAAeAAAAHgCAYAAAB91L6VAAAEGWlDQ1BrQ0dDb2xvclNwYWNlR2VuZXJpY1JHQgAAOI2NVV1oHFUUPrt

#and then a couple of pages of gibberish
#and finally...

detach("package:osc1337")
Warning message:
.onDetach failed in detach() for 'osc1337', details:
  call: dev.off(oldopts$i)
  error: QuartzBitmap_Output - unable to open file '/dev/null' 
----------------------------

In a terminal session I see much the same but with none of the garbage text:

>  demo("barplot", "osc1337")


	demo(barplot)
	---- ~~~~~~~

Type  <Return>	 to start : 

> library(osc1337)

> barplot(1:10, col=1:10)
Hit <Return> to see next plot: 

> osc1337()
/var/folders/68/vh2f8kzn09j8954r6q9100yh0000gn/T//Rtmp1oeFuH/file2b9d310dee06.png 
 480 480 
9684 

> detach("package:osc1337")
Warning message:
.onDetach failed in detach() for 'osc1337', details:
  call: dev.off(oldopts$i)
  error: QuartzBitmap_Output - unable to open file '/dev/null' 
------------------------

R version 3.6.1 (2019-07-05) -- "Action of the Toes"
Copyright (C) 2019 The R Foundation for Statistical Computing
Platform: x86_64-apple-darwin15.6.0 (64-bit)


HTH (but I not sure how it would)
-- 
David.

> 
> Thanks much!
> 
> - Neal Fultz
> 
> PS If anyone from rstudio is on the list, would you mind
> explaining RShadowPngGraphicsHandler.cpp and friends, and how it knows when
> to redraw when R returns to the REPL prompt?
> 
> I'd like to do something similar so that drawing plots in the terminal is
> less manual.
> 
> Haven't found much docs on the graphics engine other than a really old
> omegahat project, been trying to read engine.c but I'm slow.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From c@r@ten@croonenbroeck @end|ng |rom un|-ro@tock@de  Thu Mar 12 16:16:13 2020
From: c@r@ten@croonenbroeck @end|ng |rom un|-ro@tock@de (Carsten Croonenbroeck)
Date: Thu, 12 Mar 2020 15:16:13 +0000
Subject: [R-pkg-devel] Installed package size
Message-ID: <efb36fc735164b2ca77c82fd04c580d8@uni-rostock.de>

Hello everyone,

I would like to ask what's the maximum for installed package size. The thing is, I would like to publish a package that contains, sure, a set of functions, but also a very nice data set concerning meteorological data. That data set is required for wind farm layout optimization, a topic the entire package deals with.

Now, if I have RStudio check my package, it reports correctly that the package size is 65.9 MB (which is the size of the tarball), but the uncompressed size is 118.8 MB (which is also correct as is roughly matches the size of the .RData file). The package uses lazyload. Using the RStudio check mechanism, I get zero errors, zero warnings and one note, namely the one concerning installed package size. If I use devtools::check(); I even get a warning at "checking data for ASCII and uncompressed saves", reporting the same (correct) sizes.

I would like to know what's the maximum size and if there's a way around that limit. I also think to remember that I've downloaded other rather large packages from CRAN before. Unfortunately, I can't remember right now which packages that were... :-/

Best regards and thanks in advance

Carsten


	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Mar 12 18:14:42 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 12 Mar 2020 20:14:42 +0300
Subject: [R-pkg-devel] Installed package size
In-Reply-To: <efb36fc735164b2ca77c82fd04c580d8@uni-rostock.de>
References: <efb36fc735164b2ca77c82fd04c580d8@uni-rostock.de>
Message-ID: <20200312201442.61f48c49@trisector>

On Thu, 12 Mar 2020 15:16:13 +0000
Carsten Croonenbroeck <carsten.croonenbroeck at uni-rostock.de> wrote:

> I would like to know what's the maximum size and if there's a way
> around that limit.

Here's what CRAN policy [*] says about that:

>> As a general rule, neither data nor documentation should exceed 5MB
>> (which covers several books). A CRAN package is not an appropriate
>> way to distribute course notes, and authors will be asked to trim
>> their documentation to a maximum of 5MB.

(According to src/library/tools/R/check.R, 5MB seems to be the limit on
installed size, not compressed tarball size.)

>> Where a large amount of data is required (even after compression),
>> consideration should be given to a separate data-only package which
>> can be updated only rarely (since older versions of packages are
>> archived in perpetuity).

If publishing the data separately from the code is acceptable, you
could use drat [**] to set up a repository for the data package
somewhere else, then list the data package in Suggests: and the repo in
Additional_repositories: in the DESCRIPTION of the code package, which
you could submit to CRAN.

-- 
Best regards,
Ivan

[*] https://cran.r-project.org/web/packages/policies.html

[**]
https://cran.r-project.org/web/packages/drat/vignettes/DratForPackageAuthors.html


From j@red_wood @end|ng |rom 163@com  Fri Mar 13 02:49:03 2020
From: j@red_wood @end|ng |rom 163@com (jared_wood)
Date: Fri, 13 Mar 2020 09:49:03 +0800 (GMT+08:00)
Subject: [R-pkg-devel] An invalid URLs
Message-ID: <f7fc418.1161.170d1949f7b.Coremail.jared_wood@163.com>

I write an URL of MalaCards (a database) in my description, because I need the data in this database. However, there is an error here as followed:

 

 Found the following (possibly) invalid URLs:

    URL: http://www.malacards.org/

      From: DESCRIPTION

      Status: 403

      Message: Forbidden

 

I don?t know why. The URL was picked up in the article of this database and I can open it.

 

This is the first time that I develop a package, therefore I am eager for your help.

 

Thanks.



| |
jared_wood
|
|
jared_wood at 163.com
|
???????????
	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Fri Mar 13 03:16:55 2020
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Thu, 12 Mar 2020 22:16:55 -0400
Subject: [R-pkg-devel] An invalid URLs
In-Reply-To: <f7fc418.1161.170d1949f7b.Coremail.jared_wood@163.com>
References: <f7fc418.1161.170d1949f7b.Coremail.jared_wood@163.com>
Message-ID: <CAGx1TMBDvZhSvsqgbLVxO9xwJcWp_DrBvJg+QYBmdF1Vsj1dQw@mail.gmail.com>

Is it perhaps an https:// address?  You browser will make the
adjustment.  CRAN will give this message.

On Thu, Mar 12, 2020 at 10:08 PM jared_wood <jared_wood at 163.com> wrote:
>
> I write an URL of MalaCards (a database) in my description, because I need the data in this database. However, there is an error here as followed:
>
>
>
>  Found the following (possibly) invalid URLs:
>
>     URL: http://www.malacards.org/
>
>       From: DESCRIPTION
>
>       Status: 403
>
>       Message: Forbidden
>
>
>
> I don?t know why. The URL was picked up in the article of this database and I can open it.
>
>
>
> This is the first time that I develop a package, therefore I am eager for your help.
>
>
>
> Thanks.
>
>
>
> | |
> jared_wood
> |
> |
> jared_wood at 163.com
> |
> ???????????
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Mar 13 09:02:06 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 13 Mar 2020 11:02:06 +0300
Subject: [R-pkg-devel] An invalid URLs
In-Reply-To: <f7fc418.1161.170d1949f7b.Coremail.jared_wood@163.com>
References: <f7fc418.1161.170d1949f7b.Coremail.jared_wood@163.com>
Message-ID: <20200313110206.5481198f@trisector>

On Fri, 13 Mar 2020 09:49:03 +0800 (GMT+08:00)
jared_wood <jared_wood at 163.com> wrote:

>       Status: 403
> 
>       Message: Forbidden
> 
>  
> 
> I don?t know why. The URL was picked up in the article of this
> database and I can open it.

To be fair, my requests to this service are also blocked unless I use
Tor Browser. This could be an aggressive case of GeoIP banning.
(Blocking a well-known university but not blocking Tor exit nodes? Talk
about security theatre.)

Another reason could be that R CMD check uses libcurl with its default
User-Agent: libcurl/A.BB.C to check URLs, and the remote server could
deny requests from such automated user agents, only allowing clients
that look like browsers. I have no data to confirm this hypothesis.

-- 
Best regards,
Ivan


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Mar 13 12:59:59 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 13 Mar 2020 14:59:59 +0300
Subject: [R-pkg-devel] An invalid URLs
In-Reply-To: <20200313110206.5481198f@trisector>
References: <f7fc418.1161.170d1949f7b.Coremail.jared_wood@163.com>
 <20200313110206.5481198f@trisector>
Message-ID: <20200313145959.63b8bdea@trisector>

On Fri, 13 Mar 2020 11:02:06 +0300
Ivan Krylov <krylov.r00t at gmail.com> wrote:

> the remote server could deny requests from such automated user
> agents, only allowing clients that look like browsers

Here is what I have been able to observe:

If wait for some time, then try to access http://www.malacards.org/
using cURL, I start getting 403 errors in both cURL and browser.

If wait for some time, then go to http://www.malacards.org/ using a
browser and click on a few links, subsequent access using cURL from
the same IP address also starts working (for a while).

Given the paranoid nature of the website's security system, it's hard
to offer a good solution to your problem: linking to it may place
people running R CMD check into temporary ban, while not linking to it
does not seem polite.

-- 
Best regards,
Ivan


From edd @end|ng |rom deb|@n@org  Fri Mar 13 13:27:38 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 13 Mar 2020 07:27:38 -0500
Subject: [R-pkg-devel] Installed package size
In-Reply-To: <20200312201442.61f48c49@trisector>
References: <efb36fc735164b2ca77c82fd04c580d8@uni-rostock.de>
 <20200312201442.61f48c49@trisector>
Message-ID: <24171.31802.101817.628471@rob.eddelbuettel.com>


On 12 March 2020 at 20:14, Ivan Krylov wrote:
| On Thu, 12 Mar 2020 15:16:13 +0000
| Carsten Croonenbroeck <carsten.croonenbroeck at uni-rostock.de> wrote:
| >> Where a large amount of data is required (even after compression),
| >> consideration should be given to a separate data-only package which
| >> can be updated only rarely (since older versions of packages are
| >> archived in perpetuity).
| 
| If publishing the data separately from the code is acceptable, you
| could use drat [**] to set up a repository for the data package
| somewhere else, then list the data package in Suggests: and the repo in
| Additional_repositories: in the DESCRIPTION of the code package, which
| you could submit to CRAN.

Thanks for the pointer! And Neal just kindly edited a SO answer describing
this, so I updated the list of CRAN packages doing this. [1]

The best reference, though, may still be our R Journal paper on this. [2]

Hth, Dirk

[1] https://stackoverflow.com/questions/36105257/how-to-make-r-package-recommend-a-package-hosted-on-github/36105343#36105343
[2] https://journal.r-project.org/archive/2017/RJ-2017-026/index.html


-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From Seb@@t|@n@Fox @end|ng |rom phe@gov@uk  Fri Mar 13 17:31:55 2020
From: Seb@@t|@n@Fox @end|ng |rom phe@gov@uk (Sebastian Fox)
Date: Fri, 13 Mar 2020 16:31:55 +0000
Subject: [R-pkg-devel] OFFICIAL: "$ operator is invalid for atomic vectors"
 on pre-CRAN checks
Message-ID: <fc0d1bcac6964d6e81943a6e4d726cd5@ExchCol01.phe.gov.uk>

OFFICIAL

Hi all,

First time poster.
My package fingertipscharts is failing incoming CRAN checks.
I develop it on a Windows 10 OS, where it passes with 0 NOTES, WARNINGS and ERRORS. Likewise on Travis<https://travis-ci.org/github/PublicHealthEngland/fingertipscharts?utm_medium=notification> and devtools::check_win_devel().

It fails on incoming CRAN checks on Debian (r-devel-linux-x86_64-debian-gcc flavour). I'm struggling to recreate the error and don't want to keep submitting to CRAN as my way of testing changes. I've tried various rhub functions (check_on_cran, check_debian) but can't recreate the error messages.

The errors reported are as follows (from the logs) and my session info is below. I suspect it is to do with the relationship between ggplot2::geom_spoke(), which I've just added to the area_profiles() function, and lemon::facet_rep_grid()

Flavor: r-devel-linux-x86_64-debian-gcc
Check: tests, Result: ERROR
    Running 'a-l.R' [15s/17s]
    Running 'm-z.R' [8s/11s]
  Running the tests in 'tests/a-l.R' failed.
  Complete output:
    > library(testthat)
    > library(fingertipscharts)
    >
    > test_check("fingertipscharts", filter = "^[a-l]")
    ?? 1. Error: area profiles with domains draws correctly (@test-area-profiles.R#2
    $ operator is invalid for atomic vectors
    Backtrace:
      1. vdiffr::expect_doppelganger(...)
      2. vdiffr:::writer(fig, testcase, title)
      4. vdiffr:::print_plot.ggplot(plot, title)
      6. ggplot2:::print.ggplot(p)
      8. ggplot2:::ggplot_gtable.ggplot_built(data)
      9. layout$render(geom_grobs, data, theme, plot$labels)
     10. ggplot2:::f(..., self = self)
     11. self$facet$draw_panels(...)
     12. lemon:::f(...)
     13. base::lapply(axis_t, remove_labels_from_axis)
     14. lemon:::FUN(X[[i]], ...)

    ?? 2. Error: area profiles example draws correctly (@test-examples.R#194)  ?????
    $ operator is invalid for atomic vectors
    Backtrace:
      1. vdiffr::expect_doppelganger("area profiles example", p)
      2. vdiffr:::writer(fig, testcase, title)
      4. vdiffr:::print_plot.ggplot(plot, title)
      6. ggplot2:::print.ggplot(p)
      8. ggplot2:::ggplot_gtable.ggplot_built(data)
      9. layout$render(geom_grobs, data, theme, plot$labels)
     10. ggplot2:::f(..., self = self)
     11. self$facet$draw_panels(...)
     12. lemon:::f(...)
     13. base::lapply(axis_t, remove_labels_from_axis)
     14. lemon:::FUN(X[[i]], ...)



My session info is:
- Session info -------------------------------------------------------------------------------
setting  value
 version  R version 3.6.2 (2019-12-12)
os       Windows 10 x64
 system   x86_64, mingw32
 ui       RStudio
 language (EN)
 collate  English_United Kingdom.1252
 ctype    English_United Kingdom.1252
 tz       Europe/London
 date     2020-03-13

- Packages -----------------------------------------------------------------------------------
package          * version date       lib source
 assertthat         0.2.1   2019-03-21 [1] CRAN (R 3.6.0)
class              7.3-15  2019-01-01 [1] CRAN (R 3.6.2)
classInt           0.4-2   2019-10-17 [1] CRAN (R 3.6.2)
cli                2.0.1   2020-01-08 [1] CRAN (R 3.6.2)
colorspace         1.4-1   2019-03-18 [1] CRAN (R 3.6.0)
crayon             1.3.4   2017-09-16 [1] CRAN (R 3.6.0)
crosstalk          1.0.0   2016-12-21 [1] CRAN (R 3.6.0)
curl               4.3     2019-12-02 [1] CRAN (R 3.6.1)
DBI                1.1.0   2019-12-15 [1] CRAN (R 3.6.1)
digest             0.6.23  2019-11-23 [1] CRAN (R 3.6.1)
dplyr            * 0.8.4   2020-01-31 [1] CRAN (R 3.6.2)
e1071              1.7-3   2019-11-26 [1] CRAN (R 3.6.2)
ellipsis           0.3.0   2019-09-20 [1] CRAN (R 3.6.1)
fansi              0.4.1   2020-01-08 [1] CRAN (R 3.6.2)
farver             2.0.3   2020-01-16 [1] CRAN (R 3.6.2)
fastmap            1.0.1   2019-10-08 [1] CRAN (R 3.6.1)
fingertipscharts * 0.0.11  2020-03-13 [1] local
 foreign            0.8-75  2020-01-20 [1] CRAN (R 3.6.2)
geojson            0.3.2   2019-01-31 [1] CRAN (R 3.6.0)
geojsonio          0.8.0   2019-10-29 [1] CRAN (R 3.6.2)
ggplot2            3.3.0   2020-03-05 [1] CRAN (R 3.6.2)
glue               1.3.1   2019-03-12 [1] CRAN (R 3.6.0)
gridExtra          2.3     2017-09-09 [1] CRAN (R 3.6.0)
gtable             0.3.0   2019-03-25 [1] CRAN (R 3.6.0)
htmltools          0.4.0   2019-10-04 [1] CRAN (R 3.6.1)
htmlwidgets        1.5.1   2019-10-08 [1] CRAN (R 3.6.1)
httpuv             1.5.2   2019-09-11 [1] CRAN (R 3.6.1)
httr               1.4.1   2019-08-05 [1] CRAN (R 3.6.1)
jqr                1.1.0   2018-10-22 [1] CRAN (R 3.6.0)
jsonlite           1.6.1   2020-02-02 [1] CRAN (R 3.6.2)
KernSmooth         2.23-16 2019-10-15 [1] CRAN (R 3.6.2)
knitr              1.27    2020-01-16 [1] CRAN (R 3.6.2)
labeling           0.3     2014-08-23 [1] CRAN (R 3.6.0)
later              1.0.0   2019-10-04 [1] CRAN (R 3.6.1)
lattice            0.20-38 2018-11-04 [1] CRAN (R 3.6.2)
lazyeval           0.2.2   2019-03-15 [1] CRAN (R 3.6.0)
leaflet            2.0.3   2019-11-16 [1] CRAN (R 3.6.2)
lemon              0.4.3   2019-01-08 [1] CRAN (R 3.6.0)
lifecycle          0.1.0   2019-08-01 [1] CRAN (R 3.6.1)
magrittr           1.5     2014-11-22 [1] CRAN (R 3.6.0)
maptools           0.9-9   2019-12-01 [1] CRAN (R 3.6.2)
mime               0.8     2019-12-19 [1] CRAN (R 3.6.2)
munsell            0.5.0   2018-06-12 [1] CRAN (R 3.6.0)
packrat            0.5.0   2018-11-14 [1] CRAN (R 3.6.0)
pillar             1.4.3   2019-12-20 [1] CRAN (R 3.6.1)
pkgconfig          2.0.3   2019-09-22 [1] CRAN (R 3.6.1)
plyr               1.8.5   2019-12-10 [1] CRAN (R 3.6.1)
promises           1.1.0   2019-10-04 [1] CRAN (R 3.6.1)
purrr              0.3.3   2019-10-18 [1] CRAN (R 3.6.1)
R6                 2.4.1   2019-11-12 [1] CRAN (R 3.6.1)
Rcpp               1.0.3   2019-11-08 [1] CRAN (R 3.6.1)
rgdal              1.4-8   2019-11-27 [1] CRAN (R 3.6.2)
rgeos              0.5-2   2019-10-03 [1] CRAN (R 3.6.2)
rlang              0.4.3   2020-01-24 [1] CRAN (R 3.6.2)
rstudioapi         0.10    2019-03-19 [1] CRAN (R 3.6.0)
scales             1.1.0   2019-11-18 [1] CRAN (R 3.6.1)
sessioninfo        1.1.1   2018-11-05 [1] CRAN (R 3.6.0)
sf                 0.8-1   2020-01-28 [1] CRAN (R 3.6.2)
shiny              1.4.0   2019-10-10 [1] CRAN (R 3.6.1)
sp                 1.3-2   2019-11-07 [1] CRAN (R 3.6.2)
stringi            1.4.5   2020-01-11 [1] CRAN (R 3.6.2)
stringr            1.4.0   2019-02-10 [1] CRAN (R 3.6.0)
tibble             2.1.3   2019-06-06 [1] CRAN (R 3.6.0)
tidyr            * 1.0.2   2020-01-24 [1] CRAN (R 3.6.2)
tidyselect         1.0.0   2020-01-27 [1] CRAN (R 3.6.2)
units              0.6-5   2019-10-08 [1] CRAN (R 3.6.2)
V8                 3.0.1   2020-01-22 [1] CRAN (R 3.6.2)
vctrs              0.2.2   2020-01-24 [1] CRAN (R 3.6.2)
withr              2.1.2   2018-03-15 [1] CRAN (R 3.6.0)
xfun               0.12    2020-01-13 [1] CRAN (R 3.6.2)
xtable             1.8-4   2019-04-21 [1] CRAN (R 3.6.0)

Thanks in advance for any help.
Seb

**************************************************************************
The information contained in the EMail and any attachments is confidential and intended solely and for the attention and use of the named addressee(s). It may not be disclosed to any other person without the express authority of Public Health England, or the intended recipient, or both. If you are not the intended recipient, you must not disclose, copy, distribute or retain this message or any part of it. This footnote also confirms that this EMail has been swept for computer viruses by Symantec.Cloud, but please re-sweep any attachments before opening or saving. http://www.gov.uk/PHE
**************************************************************************
	[[alternative HTML version deleted]]


From boennecd @end|ng |rom gm@||@com  Fri Mar 13 17:55:50 2020
From: boennecd @end|ng |rom gm@||@com (Benjamin Christoffersen)
Date: Fri, 13 Mar 2020 17:55:50 +0100
Subject: [R-pkg-devel] parglm: Package pulled of CRAN
Message-ID: <CAHHSL8vjF_j23_VfEX0HyZaPSaikTKNa24eg4Dww=EMQ7EX-Pg@mail.gmail.com>

Dear Sirs,

Recently, my parglm package was pulled of CRAN because of a segfault
on Solaris and an issue on the OpenBLAS additional issues test.

I started with the Solaris issue but failed to reproduce the error
with `rhub::checkonsolaris()`. Then I tried to reproduce the OpenBLAS.
First, I build R-devel with
`?with-blas="/usr/lib/x86_64-linux-gnu/openblas/libblas.so.3"` and
`?with-lapack="/usr/lib/x86_64-linux-gnu/openblas/liblapack.so.3"`
which one gets from `libopenblas-dev` if I recall correctly on my own
Ubuntu machine (version 18.04, gcc 8.3.0). However, there where no
issues or segfaults when I ran `CMD check ?as-cran
?no-stop-on-test-error`.

Then I build the following docker image:
https://gist.github.com/boennecd/fd0625daf11aae3304e9e9a9a6cfea7d

where I do as described in the following two links (I think):
https://www.stats.ox.ac.uk/pub/bdr/Rblas/README.txt &
https://www.stats.ox.ac.uk/pub/bdr/Rconfig/r-devel-linux-x8664-fedora-gcc

However when I started the container and ran:
 - `/opt/R-devel/lib64/R/bin/R CMD check ?as-cran
?no-stop-on-test-error ?use-valgrind`
 - `/opt/R-devel/lib64/R/bin/R CMD check ?as-cran ?no-stop-on-test-error`

then I got no issues or segfaults.

So, although that other people have asked similar questions before,
can anyone spot what I did wrong when I tried to reproduce the error
and if not what should I do? Any help is much appreciated.

There are no other issues with both ASAN and UBSAN checks with gcc and
clang on my own machine.

Sincerely Yours,
Benjamin Christoffersen


From ch@r||e @end|ng |rom @t@t@umn@edu  Fri Mar 13 18:49:24 2020
From: ch@r||e @end|ng |rom @t@t@umn@edu (Charles Geyer)
Date: Fri, 13 Mar 2020 12:49:24 -0500
Subject: [R-pkg-devel] check --as-cran error on Rd file
In-Reply-To: <aac5d0ea-d209-1b28-8c98-29376298ade1@gmail.com>
References: <CAKctRd3w9VNP2VUh83Xxit8wFnYCTJxZQJd-EsEK4ModV7e6ew@mail.gmail.com>
 <aac5d0ea-d209-1b28-8c98-29376298ade1@gmail.com>
Message-ID: <CAKctRd2Ko5qpahQ_eNfBYTi6QFqONgevAD9MH0U9wo5YpmX2-A@mail.gmail.com>

Sorry for the late reply.  I am getting ready to have courses on-line only.

Executive summary.  Problem fixed, solution at bottom after some
wandering around.

sped.Rcheck/00install.out says (among other blather, no warnings or errors)

byte-compile and prepare package for lazy loading

so that doesn't appear to be the issue.   Moreover changing
"data(alberta)" in the example on the help page to just "alberta" (no
"data") does not make the error go away.  Moreover, when I run the
package installed by R CMD check I get no errors

blurfle$ ~/local/devel/bin/R --vanilla

R Under development (unstable) (2020-03-10 r77920) -- "Unsuffered Consequences"
Copyright (C) 2020 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library(sped, lib.loc = "sped.Rcheck")
> data(alberta)
> head(alberta)
     ind pa  ma
[1,]  58 11  12
[2,] 100 39  40
[3,] 101 39  40
[4,] 103 39  40
[5,] 107 39 100
[6,] 113 17  18

Oh.  I see.  I need to change "alberta" (with no "data") to
"data(alberta)" in the usage section and in the examples section.
Then the problem goes away.

Thanks for the help.




On Wed, Mar 11, 2020 at 3:57 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> On 11/03/2020 11:44 a.m., Charles Geyer wrote:
> > blurfle$ cat sped.Rcheck/00check.log
> > * using log directory ?/home/geyer/Software/sped/package/sped.Rcheck?
> > * using R Under development (unstable) (2020-03-10 r77920)
> > * using platform: x86_64-pc-linux-gnu (64-bit)
> > * using session charset: UTF-8
> > * using option ?--as-cran?
> > * checking for file ?sped/DESCRIPTION? ... OK
> > * this is package ?sped? version ?0.1?
> > * checking CRAN incoming feasibility ... NOTE
> > Maintainer: ?Charles J. Geyer <charlie at stat.umn.edu>?
> >
> > New submission
> > * checking package namespace information ... OK
> > * checking package dependencies ... OK
> > * checking if this is a source package ... OK
> > * checking if there is a namespace ... OK
> > * checking for executable files ... OK
> > * checking for hidden files and directories ... OK
> > * checking for portable file names ... OK
> > * checking for sufficient/correct file permissions ... OK
> > * checking serialization versions ... OK
> > * checking whether package ?sped? can be installed ... OK
> > * checking installed package size ... OK
> > * checking package directory ... OK
> > * checking for future file timestamps ... OK
> > * checking DESCRIPTION meta-information ... OK
> > * checking top-level files ... OK
> > * checking for left-over files ... OK
> > * checking index information ... OK
> > * checking package subdirectories ... OK
> > * checking R files for non-ASCII characters ... OK
> > * checking R files for syntax errors ... OK
> > * checking whether the package can be loaded ... OK
> > * checking whether the package can be loaded with stated dependencies ... OK
> > * checking whether the package can be unloaded cleanly ... OK
> > * checking whether the namespace can be loaded with stated dependencies ...
> > OK
> > * checking whether the namespace can be unloaded cleanly ... OK
> > * checking loading without being on the library search path ... OK
> > * checking use of S3 registration ... OK
> > * checking dependencies in R code ... OK
> > * checking S3 generic/method consistency ... OK
> > * checking replacement functions ... OK
> > * checking foreign function calls ... OK
> > * checking R code for possible problems ... OK
> > * checking Rd files ... OK
> > * checking Rd metadata ... OK
> > * checking Rd line widths ... OK
> > * checking Rd cross-references ... OK
> > * checking for missing documentation entries ... OK
> > * checking for code/documentation mismatches ... WARNING
> > Variables with usage in documentation object 'alberta' but not in code:
> >    ?alberta?
> >
> > * checking Rd \usage sections ... OK
> > * checking Rd contents ... OK
> > * checking for unstated dependencies in examples ... OK
> > * checking contents of ?data? directory ... OK
> > * checking data for non-ASCII characters ... OK
> > * checking data for ASCII and uncompressed saves ... OK
> > * checking line endings in C/C++/Fortran sources/headers ... OK
> > * checking line endings in Makefiles ... OK
> > * checking compilation flags in Makevars ... OK
> > * checking for GNU extensions in Makefiles ... OK
> > * checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS) ... OK
> > * checking use of PKG_*FLAGS in Makefiles ... OK
> > * checking use of SHLIB_OPENMP_*FLAGS in Makefiles ... OK
> > * checking pragmas in C/C++ headers and code ... OK
> > * checking compilation flags used ... OK
> > * checking compiled code ... OK
> > * checking examples ... OK
> > * checking for unstated dependencies in ?tests? ... OK
> > * checking tests ... OK
> >    Running ?foo.R?
> > * checking PDF version of manual ... OK
> > * checking for non-standard things in the check directory ... OK
> > * checking for detritus in the temp directory ... OK
> > * DONE
> > Status: 1 WARNING, 1 NOTE
> > blurfle$
> >
> > I do not get this warning when --as-cran is omitted.  I have never seen the
> > warning before.  The Rd file is
> >
> > blurfle$ cat sped/man/alberta.Rd
> > \name{alberta}
> > \docType{data}
> > \alias{alberta}
> > \title{Pedigree Data on Equus przewalskii in Alberta}
> > \description{
> >    Pedigree of Asian wild horse (also called Mongolian wild horse)
> >    \emph{Equus przewalskii} individuals living in Alberta, Canada in 1988.
> > }
> > \usage{alberta}
> > \format{
> > A matrix with 69 rows giving (individual, father, mother) triplets.
> > The column labels are \code{ind}, \code{pa}, and \code{ma}.
> > The names (which are numbers) are studbook numbers.
> > There are 82 individuals in this pedigree in all.
> > There are \eqn{82 - 69 = 13} founders.
> > }
> > \examples{
> > library(sped)
> > data(alberta)
> > }
> > \keyword{datasets}
> > blurfle$
> >
> > And this is AFAICS what Section 2.1.2 of Writing R Extensions (R-devel
> > version) says it should be.
> >
> > So what is this warning about?
>
> The manual says "The \usage entry is always bar or (for packages which
> do not use lazy-loading of data) data(bar). (In particular, only
> document a single data object per Rd file.)".  So maybe you aren't using
> lazy loading?
>
> Duncan Murdoch
>


-- 
Charles Geyer
Professor, School of Statistics
Resident Fellow, Minnesota Center for Philosophy of Science
University of Minnesota
charlie at stat.umn.edu


From zrm@cc @end|ng |rom gm@||@com  Fri Mar 13 19:53:48 2020
From: zrm@cc @end|ng |rom gm@||@com (Zack McCaw)
Date: Fri, 13 Mar 2020 11:53:48 -0700
Subject: [R-pkg-devel] r-package-devel-owner@r-project.org
Message-ID: <CAO4wh4Db2-KpNpQQC5Ou7AiCPcf9iuoWKr-TtOmgc9gciECSfg@mail.gmail.com>

Hello all,

I am attempting to submit a package (https://github.com/zrmacc/Temporal)
that uses RcppArmadillo. The package builds successfully locally (on Mac)
and on Windows. However, when submitting to CRAN, it fails to build on
Debian with the following error:

Error: package or namespace load failed for ?Temporal? in dyn.load(file,
DLLpath = DLLpath, ...): unable to load shared object
?/srv/hornik/tmp/CRAN/Temporal.Rcheck/00LOCK-Temporal/00new/Temporal/libs/Temporal.so?:/srv/hornik/tmp/CRAN/Temporal.Rcheck/00LOCK-Temporal/00new/Temporal/libs/Temporal.so:
undefined symbol: dgesvd_

I have ensured that the Makevars file is formatted as recommended by the
RcppArmadillo.package.skeleton
<https://cran.r-project.org/web/packages/RcppArmadillo/RcppArmadillo.pdf>()
function. Specifically, it contains the following:

CXX_STD = CXX11
PKG_CXXFLAGS = $(SHLIB_OPENMP_CXXFLAGS)
PKG_LIBS = $(SHLIB_OPENMP_CXXFLAGS) $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)

Any help with understanding how to resolve the error on Debian would
be greatly appreciated.

Thank you,
Zack

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Fri Mar 13 20:17:42 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 13 Mar 2020 14:17:42 -0500
Subject: [R-pkg-devel] r-package-devel-owner@r-project.org
In-Reply-To: <CAO4wh4Db2-KpNpQQC5Ou7AiCPcf9iuoWKr-TtOmgc9gciECSfg@mail.gmail.com>
References: <CAO4wh4Db2-KpNpQQC5Ou7AiCPcf9iuoWKr-TtOmgc9gciECSfg@mail.gmail.com>
Message-ID: <24171.56406.897625.326004@rob.eddelbuettel.com>


On 13 March 2020 at 11:53, Zack McCaw wrote:
| Hello all,
| 
| I am attempting to submit a package (https://github.com/zrmacc/Temporal)
| that uses RcppArmadillo. The package builds successfully locally (on Mac)
| and on Windows. However, when submitting to CRAN, it fails to build on
| Debian with the following error:
| 
| Error: package or namespace load failed for ?Temporal? in dyn.load(file,
| DLLpath = DLLpath, ...): unable to load shared object
| ?/srv/hornik/tmp/CRAN/Temporal.Rcheck/00LOCK-Temporal/00new/Temporal/libs/Temporal.so?:/srv/hornik/tmp/CRAN/Temporal.Rcheck/00LOCK-Temporal/00new/Temporal/libs/Temporal.so:
| undefined symbol: dgesvd_
| 
| I have ensured that the Makevars file is formatted as recommended by the
| RcppArmadillo.package.skeleton
| <https://cran.r-project.org/web/packages/RcppArmadillo/RcppArmadillo.pdf>()
| function. Specifically, it contains the following:
| 
| CXX_STD = CXX11
| PKG_CXXFLAGS = $(SHLIB_OPENMP_CXXFLAGS)
| PKG_LIBS = $(SHLIB_OPENMP_CXXFLAGS) $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)
| 
| Any help with understanding how to resolve the error on Debian would
| be greatly appreciated.

Sort of the wrong forum. Please consider subscribing to the rcpp-devel list
and posting there.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd @end|ng |rom deb|@n@org  Fri Mar 13 20:31:16 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Fri, 13 Mar 2020 14:31:16 -0500
Subject: [R-pkg-devel] r-package-devel-owner@r-project.org
In-Reply-To: <24171.56406.897625.326004@rob.eddelbuettel.com>
References: <CAO4wh4Db2-KpNpQQC5Ou7AiCPcf9iuoWKr-TtOmgc9gciECSfg@mail.gmail.com>
 <24171.56406.897625.326004@rob.eddelbuettel.com>
Message-ID: <24171.57220.598113.533700@rob.eddelbuettel.com>


On 13 March 2020 at 14:17, Dirk Eddelbuettel wrote:
| 
| On 13 March 2020 at 11:53, Zack McCaw wrote:
| | Hello all,
| | 
| | I am attempting to submit a package (https://github.com/zrmacc/Temporal)
| | that uses RcppArmadillo. The package builds successfully locally (on Mac)
| | and on Windows. However, when submitting to CRAN, it fails to build on
| | Debian with the following error:
| | 
| | Error: package or namespace load failed for ?Temporal? in dyn.load(file,
| | DLLpath = DLLpath, ...): unable to load shared object
| | ?/srv/hornik/tmp/CRAN/Temporal.Rcheck/00LOCK-Temporal/00new/Temporal/libs/Temporal.so?:/srv/hornik/tmp/CRAN/Temporal.Rcheck/00LOCK-Temporal/00new/Temporal/libs/Temporal.so:
| | undefined symbol: dgesvd_
| | 
| | I have ensured that the Makevars file is formatted as recommended by the
| | RcppArmadillo.package.skeleton
| | <https://cran.r-project.org/web/packages/RcppArmadillo/RcppArmadillo.pdf>()
| | function. Specifically, it contains the following:
| | 
| | CXX_STD = CXX11
| | PKG_CXXFLAGS = $(SHLIB_OPENMP_CXXFLAGS)
| | PKG_LIBS = $(SHLIB_OPENMP_CXXFLAGS) $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)
| | 
| | Any help with understanding how to resolve the error on Debian would
| | be greatly appreciated.
| 
| Sort of the wrong forum. Please consider subscribing to the rcpp-devel list
| and posting there.

But now that we are here I took a look, and you "almost" got it right. Your
mistake was in using src/Makevars.in and not using a configure script to
create src/Makevars. So it remained unused.  You can tell: with your setting
my box did

  g++ -Wl,-S -shared -L/usr/lib/R/lib -Wl,-Bsymbolic-functions -Wl,-z,relro \
     -o Temporal.so MatrixOps.o RcppExports.o -L/usr/lib/R/lib -lR

ie no linking the desired form!  Where once fixed we see

  g++ -std=gnu++11 -Wl,-S -shared -L/usr/lib/R/lib -Wl,-Bsymbolic-functions \
     -Wl,-z,relro -o Temporal.so MatrixOps.o RcppExports.o \
     -fopenmp -llapack -lblas -lgfortran -lm -lquadmath -L/usr/lib/R/lib -lR

which has the link instruction.

I send you a pull request with the simple fix. If you just the merge button
you should be all set.

Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From zrm@cc @end|ng |rom gm@||@com  Fri Mar 13 21:44:03 2020
From: zrm@cc @end|ng |rom gm@||@com (Zack McCaw)
Date: Fri, 13 Mar 2020 13:44:03 -0700
Subject: [R-pkg-devel] r-package-devel-owner@r-project.org
In-Reply-To: <24171.57220.598113.533700@rob.eddelbuettel.com>
References: <CAO4wh4Db2-KpNpQQC5Ou7AiCPcf9iuoWKr-TtOmgc9gciECSfg@mail.gmail.com>
 <24171.56406.897625.326004@rob.eddelbuettel.com>
 <24171.57220.598113.533700@rob.eddelbuettel.com>
Message-ID: <CAO4wh4CU-zKANDaFXe4pcPZhTTvB0tGBsvR9CyB3wb_0baUCJw@mail.gmail.com>

Thank you very much.

Sincerely,
Zack

On Fri, Mar 13, 2020 at 12:31 PM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> On 13 March 2020 at 14:17, Dirk Eddelbuettel wrote:
> |
> | On 13 March 2020 at 11:53, Zack McCaw wrote:
> | | Hello all,
> | |
> | | I am attempting to submit a package (
> https://github.com/zrmacc/Temporal)
> | | that uses RcppArmadillo. The package builds successfully locally (on
> Mac)
> | | and on Windows. However, when submitting to CRAN, it fails to build on
> | | Debian with the following error:
> | |
> | | Error: package or namespace load failed for ?Temporal? in
> dyn.load(file,
> | | DLLpath = DLLpath, ...): unable to load shared object
> | |
> ?/srv/hornik/tmp/CRAN/Temporal.Rcheck/00LOCK-Temporal/00new/Temporal/libs/Temporal.so?:/srv/hornik/tmp/CRAN/Temporal.Rcheck/00LOCK-Temporal/00new/Temporal/libs/Temporal.so:
> | | undefined symbol: dgesvd_
> | |
> | | I have ensured that the Makevars file is formatted as recommended by
> the
> | | RcppArmadillo.package.skeleton
> | | <
> https://cran.r-project.org/web/packages/RcppArmadillo/RcppArmadillo.pdf>()
> | | function. Specifically, it contains the following:
> | |
> | | CXX_STD = CXX11
> | | PKG_CXXFLAGS = $(SHLIB_OPENMP_CXXFLAGS)
> | | PKG_LIBS = $(SHLIB_OPENMP_CXXFLAGS) $(LAPACK_LIBS) $(BLAS_LIBS)
> $(FLIBS)
> | |
> | | Any help with understanding how to resolve the error on Debian would
> | | be greatly appreciated.
> |
> | Sort of the wrong forum. Please consider subscribing to the rcpp-devel
> list
> | and posting there.
>
> But now that we are here I took a look, and you "almost" got it right. Your
> mistake was in using src/Makevars.in and not using a configure script to
> create src/Makevars. So it remained unused.  You can tell: with your
> setting
> my box did
>
>   g++ -Wl,-S -shared -L/usr/lib/R/lib -Wl,-Bsymbolic-functions
> -Wl,-z,relro \
>      -o Temporal.so MatrixOps.o RcppExports.o -L/usr/lib/R/lib -lR
>
> ie no linking the desired form!  Where once fixed we see
>
>   g++ -std=gnu++11 -Wl,-S -shared -L/usr/lib/R/lib
> -Wl,-Bsymbolic-functions \
>      -Wl,-z,relro -o Temporal.so MatrixOps.o RcppExports.o \
>      -fopenmp -llapack -lblas -lgfortran -lm -lquadmath -L/usr/lib/R/lib
> -lR
>
> which has the link instruction.
>
> I send you a pull request with the simple fix. If you just the merge button
> you should be all set.
>
> Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Sat Mar 14 04:13:58 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Fri, 13 Mar 2020 22:13:58 -0500
Subject: [R-pkg-devel] GitHub problems
Message-ID: <9524ce4c-4408-5e0b-1826-6291ccf5c54a@effectivedefense.org>

Hello, All:


 ????? What do you suggest Jim Ramsay and I do to migrate the fda 
package to GitHub?


 ????? Jim successfully created an empty repository:


https://github.com/JamesRamsay5/fda


 ????? He told me he had officially made me a "contributor".? I did:


git clone https://<token>@github.com/JamesRamsay5/fda
Cloning into 'fda'...
warning: You appear to have cloned an empty repository.
Checking connectivity... done.


 ??? ? Then I copied files into this directory, did "git add" and "git 
commit".


 ????? Then I did "git push", and it wouldn't let me:


SpenceravessMBP:fda sbgraves$ git push
remote: Permission to JamesRamsay5/fda.git denied to sbgraves237.
fatal: unable to access 
'https://892da70262d9a4faa857b8602145414d6b21085b at github.com/JamesRamsay5/fda/': 
The requested URL returned error: 403


 ????? Suggestions?
 ????? Thanks,
 ????? Spencer Graves


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Sat Mar 14 07:35:44 2020
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Sat, 14 Mar 2020 17:35:44 +1100
Subject: [R-pkg-devel] GitHub problems
In-Reply-To: <9524ce4c-4408-5e0b-1826-6291ccf5c54a@effectivedefense.org>
References: <9524ce4c-4408-5e0b-1826-6291ccf5c54a@effectivedefense.org>
Message-ID: <CAJmOi+N7M3+YstV7TW7j+t5Qc=DsMJbq38XDp5ppDB3RU-+41w@mail.gmail.com>

You published your token. You should revoke it.

You probably don?t have the right permissions associated with git.



On Sat, 14 Mar 2020 at 2:14 pm, Spencer Graves <
spencer.graves at effectivedefense.org> wrote:

> Hello, All:
>
>
>        What do you suggest Jim Ramsay and I do to migrate the fda
> package to GitHub?
>
>
>        Jim successfully created an empty repository:
>
>
> https://github.com/JamesRamsay5/fda
>
>
>        He told me he had officially made me a "contributor".  I did:
>
>
> git clone https://<token>@github.com/JamesRamsay5/fda
> Cloning into 'fda'...
> warning: You appear to have cloned an empty repository.
> Checking connectivity... done.
>
>
>        Then I copied files into this directory, did "git add" and "git
> commit".
>
>
>        Then I did "git push", and it wouldn't let me:
>
>
> SpenceravessMBP:fda sbgraves$ git push
> remote: Permission to JamesRamsay5/fda.git denied to sbgraves237.
> fatal: unable to access
> '
> https://892da70262d9a4faa857b8602145414d6b21085b at github.com/JamesRamsay5/fda/':
>
> The requested URL returned error: 403
>
>
>        Suggestions?
>        Thanks,
>        Spencer Graves
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Sat Mar 14 08:33:32 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Sat, 14 Mar 2020 02:33:32 -0500
Subject: [R-pkg-devel] GitHub problems
In-Reply-To: <CAJmOi+N7M3+YstV7TW7j+t5Qc=DsMJbq38XDp5ppDB3RU-+41w@mail.gmail.com>
References: <9524ce4c-4408-5e0b-1826-6291ccf5c54a@effectivedefense.org>
 <CAJmOi+N7M3+YstV7TW7j+t5Qc=DsMJbq38XDp5ppDB3RU-+41w@mail.gmail.com>
Message-ID: <24791f17-dadf-4dc2-bbf5-4d9d100afdc2@effectivedefense.org>

Thanks very much.


I deleted my token.? I will forward your comment to Jim Ramsay to try to 
figure out the permissions question.


Spencer


On 2020-03-14 01:35, Hugh Parsonage wrote:
>
> You published your token. You should revoke it.
>
> You probably don?t have the right permissions associated with git.
>
>
>
> On Sat, 14 Mar 2020 at 2:14 pm, Spencer Graves 
> <spencer.graves at effectivedefense.org 
> <mailto:spencer.graves at effectivedefense.org>> wrote:
>
>     Hello, All:
>
>
>     ?????? What do you suggest Jim Ramsay and I do to migrate the fda
>     package to GitHub?
>
>
>     ?????? Jim successfully created an empty repository:
>
>
>     https://github.com/JamesRamsay5/fda
>
>
>     ?????? He told me he had officially made me a "contributor".? I did:
>
>
>     git clone https://<token>@github.com/JamesRamsay5/fda
>     <http://github.com/JamesRamsay5/fda>
>     Cloning into 'fda'...
>     warning: You appear to have cloned an empty repository.
>     Checking connectivity... done.
>
>
>     ???? ? Then I copied files into this directory, did "git add" and
>     "git
>     commit".
>
>
>     ?????? Then I did "git push", and it wouldn't let me:
>
>
>     SpenceravessMBP:fda sbgraves$ git push
>     remote: Permission to JamesRamsay5/fda.git denied to sbgraves237.
>     fatal: unable to access
>     'https://892da70262d9a4faa857b8602145414d6b21085b at github.com/JamesRamsay5/fda/':
>
>     The requested URL returned error: 403
>
>
>     ?????? Suggestions?
>     ?????? Thanks,
>     ?????? Spencer Graves
>
>     ______________________________________________
>     R-package-devel at r-project.org
>     <mailto:R-package-devel at r-project.org> mailing list
>     https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


	[[alternative HTML version deleted]]


From @|o|@@@ch|oeg| @end|ng |rom gm@||@com  Sun Mar 15 09:07:41 2020
From: @|o|@@@ch|oeg| @end|ng |rom gm@||@com (=?UTF-8?Q?Alois_Schl=c3=b6gl?=)
Date: Sun, 15 Mar 2020 09:07:41 +0100
Subject: [R-pkg-devel] packaging biosig for R
Message-ID: <a86636c8-7ba6-c377-fafb-df6f9cf68efc@gmail.com>


Dear R packagers,


the Biosig project [1] supports reading of about 50 different data
format [2]. Recently, a language binding to R was added, because a user
of Biosig asked for it.?


I've read the policy [3], and it seems the biosig would qualify as
binary package. The underlying library (libbiosig) can be installed

- on linux from source, or through debian/ubuntu package

- on MacOSX through Homebrew.

- for Windows I'm using MXE mingw-cross-compiler environment to build
libbiosig.dll?


Would it be feasible to provide a package of biosig on cran ? What need
to be considered ?


Kind regards

?? Alois



[1] http://biosig.sourceforge.net/download.html

[2] http://pub.ist.ac.at/~schloegl/biosig/TESTED

[3] https://cran.r-project.org/web/packages/policies.html


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Mar 15 20:41:07 2020
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 15 Mar 2020 12:41:07 -0700
Subject: [R-pkg-devel] packaging biosig for R
In-Reply-To: <a86636c8-7ba6-c377-fafb-df6f9cf68efc@gmail.com>
References: <a86636c8-7ba6-c377-fafb-df6f9cf68efc@gmail.com>
Message-ID: <FF338D29-D9B9-4A38-A7EC-CE78792A307E@dcn.davis.ca.us>

I am just a lurker (not representing CRAN) but I am having a hard time understanding your question.

Binary packages are a convenience for users, not a method for submitting packages. When you have an R package accepted it is accepted in source format.
If it doesn't exclude support for Windows or MacOSX then it will (in time) be compiled into a binary form for distribution in addition to being distributed is source form.

As the maintainer, your responsibility is merely to confirm that your source package is properly configured to be built in binary form before you submit it to CRAN. This is normally accomplished by successfully building it as binary in a testing environment. There are various guides out there that can be helpful in accomplishing this, e.g. [1].

[1] https://kbroman.org/pkg_primer/pages/cran.html


On March 15, 2020 1:07:41 AM PDT, "Alois Schl?gl" <alois.schloegl at gmail.com> wrote:
>
>Dear R packagers,
>
>
>the Biosig project [1] supports reading of about 50 different data
>format [2]. Recently, a language binding to R was added, because a user
>of Biosig asked for it.?
>
>
>I've read the policy [3], and it seems the biosig would qualify as
>binary package. The underlying library (libbiosig) can be installed
>
>- on linux from source, or through debian/ubuntu package
>
>- on MacOSX through Homebrew.
>
>- for Windows I'm using MXE mingw-cross-compiler environment to build
>libbiosig.dll?
>
>
>Would it be feasible to provide a package of biosig on cran ? What need
>to be considered ?
>
>
>Kind regards
>
>?? Alois
>
>
>
>[1] http://biosig.sourceforge.net/download.html
>
>[2] http://pub.ist.ac.at/~schloegl/biosig/TESTED
>
>[3] https://cran.r-project.org/web/packages/policies.html
>
>______________________________________________
>R-package-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Sent from my phone. Please excuse my brevity.


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Mon Mar 16 00:09:13 2020
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Sun, 15 Mar 2020 18:09:13 -0500
Subject: [R-pkg-devel] Warning in dir.create(vd2 <- "vign_test"):
 'vign_test' already exists
Message-ID: <02e1a6a2-610b-d40c-0a52-4b4836764beb@effectivedefense.org>

Hello, All:


 ????? Under Windows 10, "R CMD check sos_2.0-1.tar.gz" cloned from 
"https://github.com/sbgraves237/sos" ends with:


* checking rebuild of vignettes outputs ...Warning in dir.create(vd2 <- 
"vign_test"):? 'vign_test' already exists


 ????? Under macOS 10.15.3 it finishes fine.


 ????? "grep 'vign_test'" failed to find anything.


 ????? ???
 ????? Thanks,
 ????? Spencer Graves


p.s.? Running R 3.6.3 on both machines with "update.packates()" clean.


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Mar 16 02:08:08 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 15 Mar 2020 21:08:08 -0400
Subject: [R-pkg-devel] packaging biosig for R
In-Reply-To: <FF338D29-D9B9-4A38-A7EC-CE78792A307E@dcn.davis.ca.us>
References: <a86636c8-7ba6-c377-fafb-df6f9cf68efc@gmail.com>
 <FF338D29-D9B9-4A38-A7EC-CE78792A307E@dcn.davis.ca.us>
Message-ID: <7d6ff230-dcf0-cc2d-29bd-b6e8c679313b@gmail.com>

I suspect the question in this case depends on the availability of 
libbiosig.  If CRAN test machines don't have that and its source isn't 
included in the R package, then it will fail on initial install.  CRAN 
doesn't have a lot of resources to install difficult libraries; I have 
no idea if that applies in this case.

I believe the most robust way to handle this sort of package is to have 
a configure script that looks for the lib on the installing machine, and 
uses that copy if found, otherwise compiles it from source.

Duncan Murdoch



On 15/03/2020 3:41 p.m., Jeff Newmiller wrote:
> I am just a lurker (not representing CRAN) but I am having a hard time understanding your question.
> 
> Binary packages are a convenience for users, not a method for submitting packages. When you have an R package accepted it is accepted in source format.
> If it doesn't exclude support for Windows or MacOSX then it will (in time) be compiled into a binary form for distribution in addition to being distributed is source form.
> 
> As the maintainer, your responsibility is merely to confirm that your source package is properly configured to be built in binary form before you submit it to CRAN. This is normally accomplished by successfully building it as binary in a testing environment. There are various guides out there that can be helpful in accomplishing this, e.g. [1].
> 
> [1] https://kbroman.org/pkg_primer/pages/cran.htm
> 
> 
> On March 15, 2020 1:07:41 AM PDT, "Alois Schl?gl" <alois.schloegl at gmail.com> wrote:
>>
>> Dear R packagers,
>>
>>
>> the Biosig project [1] supports reading of about 50 different data
>> format [2]. Recently, a language binding to R was added, because a user
>> of Biosig asked for it.
>>
>>
>> I've read the policy [3], and it seems the biosig would qualify as
>> binary package. The underlying library (libbiosig) can be installed
>>
>> - on linux from source, or through debian/ubuntu package
>>
>> - on MacOSX through Homebrew.
>>
>> - for Windows I'm using MXE mingw-cross-compiler environment to build
>> libbiosig.dll
>>
>>
>> Would it be feasible to provide a package of biosig on cran ? What need
>> to be considered ?
>>
>>
>> Kind regards
>>
>>  ?? Alois
>>
>>
>>
>> [1] http://biosig.sourceforge.net/download.html
>>
>> [2] http://pub.ist.ac.at/~schloegl/biosig/TESTED
>>
>> [3] https://cran.r-project.org/web/packages/policies.html
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From rm@h@rp @end|ng |rom me@com  Mon Mar 16 05:22:34 2020
From: rm@h@rp @end|ng |rom me@com (R. Mark Sharp)
Date: Sun, 15 Mar 2020 23:22:34 -0500
Subject: [R-pkg-devel] Examples for functions called by Shiny server
Message-ID: <3294C38C-AA81-4FDB-8687-99AE3BF23162@me.com>

I have been asked to provide examples within the Rd files of my package (github.com/rmsharp/nprcgenekeepr <http://github.com/rmsharp/nprcgenekeepr>) by the CRAN package reviewer. I have to export those functions called by the server.R script (or use ::: notation), which in turn generates an Rd file that is to have the example. 

I cannot think of a meaningful example for a function that creates the content of a new Shiny tabpanel when an error is detected.

Suggestions are eagerly sought.

Mark
R. Mark Sharp, Ph.D.
Data Scientist and Biomedical Statistical Consultant
7526 Meadow Green St.
San Antonio, TX 78251
mobile: 210-218-2868
rmsharp at me.com












	[[alternative HTML version deleted]]


From @|o|@@@ch|oeg| @end|ng |rom gm@||@com  Mon Mar 16 08:00:21 2020
From: @|o|@@@ch|oeg| @end|ng |rom gm@||@com (=?UTF-8?Q?Alois_Schl=c3=b6gl?=)
Date: Mon, 16 Mar 2020 08:00:21 +0100
Subject: [R-pkg-devel] packaging biosig for R
In-Reply-To: <7d6ff230-dcf0-cc2d-29bd-b6e8c679313b@gmail.com>
References: <a86636c8-7ba6-c377-fafb-df6f9cf68efc@gmail.com>
 <FF338D29-D9B9-4A38-A7EC-CE78792A307E@dcn.davis.ca.us>
 <7d6ff230-dcf0-cc2d-29bd-b6e8c679313b@gmail.com>
Message-ID: <f1b20f7a-7457-d00c-9814-d2d56db3cbb1@gmail.com>


Thanks for your response. For *nix (Linux, MacOSX), this can be
achieved. For windows, currently the only way to compile libbiosig is
through mingw-cross-compiler environment (MXE) [1]? or in cygwin.
Currently, libbiosig does not compile with with VC++for various reasons,
and libbiosig has some hard dependencies (libiconv, suitesparse, dcmtk),
(there are dependencies on libb64, tinyxml), I'm wondering what the best
approach would be.

- Would it be ok, if libbiosig.dll is distributed in binary form ?

- Or would you accept a package that currently runs only on
MacOSX/Homebrew and Linux but not on Windows ?


Alois Schl?gl?

[1] https://github.com/schloegl/mxe



Am 3/16/20 um 2:08 AM schrieb Duncan Murdoch:
> I suspect the question in this case depends on the availability of
> libbiosig.? If CRAN test machines don't have that and its source isn't
> included in the R package, then it will fail on initial install.? CRAN
> doesn't have a lot of resources to install difficult libraries; I have
> no idea if that applies in this case.
>
> I believe the most robust way to handle this sort of package is to
> have a configure script that looks for the lib on the installing
> machine, and uses that copy if found, otherwise compiles it from source.
>
> Duncan Murdoch
>
>
>
> On 15/03/2020 3:41 p.m., Jeff Newmiller wrote:
>> I am just a lurker (not representing CRAN) but I am having a hard
>> time understanding your question.
>>
>> Binary packages are a convenience for users, not a method for
>> submitting packages. When you have an R package accepted it is
>> accepted in source format.
>> If it doesn't exclude support for Windows or MacOSX then it will (in
>> time) be compiled into a binary form for distribution in addition to
>> being distributed is source form.
>>
>> As the maintainer, your responsibility is merely to confirm that your
>> source package is properly configured to be built in binary form
>> before you submit it to CRAN. This is normally accomplished by
>> successfully building it as binary in a testing environment. There
>> are various guides out there that can be helpful in accomplishing
>> this, e.g. [1].
>>
>> [1] https://kbroman.org/pkg_primer/pages/cran.htm
>>
>>
>> On March 15, 2020 1:07:41 AM PDT, "Alois Schl?gl"
>> <alois.schloegl at gmail.com> wrote:
>>>
>>> Dear R packagers,
>>>
>>>
>>> the Biosig project [1] supports reading of about 50 different data
>>> format [2]. Recently, a language binding to R was added, because a user
>>> of Biosig asked for it.
>>>
>>>
>>> I've read the policy [3], and it seems the biosig would qualify as
>>> binary package. The underlying library (libbiosig) can be installed
>>>
>>> - on linux from source, or through debian/ubuntu package
>>>
>>> - on MacOSX through Homebrew.
>>>
>>> - for Windows I'm using MXE mingw-cross-compiler environment to build
>>> libbiosig.dll
>>>
>>>
>>> Would it be feasible to provide a package of biosig on cran ? What need
>>> to be considered ?
>>>
>>>
>>> Kind regards
>>>
>>> ??? Alois
>>>
>>>
>>>
>>> [1] http://biosig.sourceforge.net/download.html
>>>
>>> [2] http://pub.ist.ac.at/~schloegl/biosig/TESTED
>>>
>>> [3] https://cran.r-project.org/web/packages/policies.html
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Mon Mar 16 10:58:07 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 16 Mar 2020 05:58:07 -0400
Subject: [R-pkg-devel] packaging biosig for R
In-Reply-To: <f1b20f7a-7457-d00c-9814-d2d56db3cbb1@gmail.com>
References: <a86636c8-7ba6-c377-fafb-df6f9cf68efc@gmail.com>
 <FF338D29-D9B9-4A38-A7EC-CE78792A307E@dcn.davis.ca.us>
 <7d6ff230-dcf0-cc2d-29bd-b6e8c679313b@gmail.com>
 <f1b20f7a-7457-d00c-9814-d2d56db3cbb1@gmail.com>
Message-ID: <31380f72-80e4-020a-469c-a3d921f6f533@gmail.com>

On 16/03/2020 3:00 a.m., Alois Schl?gl wrote:
> 
> Thanks for your response. For *nix (Linux, MacOSX), this can be
> achieved. For windows, currently the only way to compile libbiosig is
> through mingw-cross-compiler environment (MXE) [1]? or in cygwin.
> Currently, libbiosig does not compile with with VC++for various reasons,
> and libbiosig has some hard dependencies (libiconv, suitesparse, dcmtk),
> (there are dependencies on libb64, tinyxml), I'm wondering what the best
> approach would be.
> 
> - Would it be ok, if libbiosig.dll is distributed in binary form ?

I think the answer to that is that it would not be allowed, but I'm not 
part of CRAN.

> 
> - Or would you accept a package that currently runs only on
> MacOSX/Homebrew and Linux but not on Windows ?

There are some packages like that on CRAN, but it is certainly 
discouraged.  Bioconductor has its own rules; you might want to ask 
there, given the subject matter of your package.

Duncan Murdoch


> 
> 
> Alois Schl?gl
> 
> [1] https://github.com/schloegl/mxe
> 
> 
> 
> Am 3/16/20 um 2:08 AM schrieb Duncan Murdoch:
>> I suspect the question in this case depends on the availability of
>> libbiosig.? If CRAN test machines don't have that and its source isn't
>> included in the R package, then it will fail on initial install.? CRAN
>> doesn't have a lot of resources to install difficult libraries; I have
>> no idea if that applies in this case.
>>
>> I believe the most robust way to handle this sort of package is to
>> have a configure script that looks for the lib on the installing
>> machine, and uses that copy if found, otherwise compiles it from source.
>>
>> Duncan Murdoch
>>
>>
>>
>> On 15/03/2020 3:41 p.m., Jeff Newmiller wrote:
>>> I am just a lurker (not representing CRAN) but I am having a hard
>>> time understanding your question.
>>>
>>> Binary packages are a convenience for users, not a method for
>>> submitting packages. When you have an R package accepted it is
>>> accepted in source format.
>>> If it doesn't exclude support for Windows or MacOSX then it will (in
>>> time) be compiled into a binary form for distribution in addition to
>>> being distributed is source form.
>>>
>>> As the maintainer, your responsibility is merely to confirm that your
>>> source package is properly configured to be built in binary form
>>> before you submit it to CRAN. This is normally accomplished by
>>> successfully building it as binary in a testing environment. There
>>> are various guides out there that can be helpful in accomplishing
>>> this, e.g. [1].
>>>
>>> [1] https://kbroman.org/pkg_primer/pages/cran.htm
>>>
>>>
>>> On March 15, 2020 1:07:41 AM PDT, "Alois Schl?gl"
>>> <alois.schloegl at gmail.com> wrote:
>>>>
>>>> Dear R packagers,
>>>>
>>>>
>>>> the Biosig project [1] supports reading of about 50 different data
>>>> format [2]. Recently, a language binding to R was added, because a user
>>>> of Biosig asked for it.
>>>>
>>>>
>>>> I've read the policy [3], and it seems the biosig would qualify as
>>>> binary package. The underlying library (libbiosig) can be installed
>>>>
>>>> - on linux from source, or through debian/ubuntu package
>>>>
>>>> - on MacOSX through Homebrew.
>>>>
>>>> - for Windows I'm using MXE mingw-cross-compiler environment to build
>>>> libbiosig.dll
>>>>
>>>>
>>>> Would it be feasible to provide a package of biosig on cran ? What need
>>>> to be considered ?
>>>>
>>>>
>>>> Kind regards
>>>>
>>>>  ??? Alois
>>>>
>>>>
>>>>
>>>> [1] http://biosig.sourceforge.net/download.html
>>>>
>>>> [2] http://pub.ist.ac.at/~schloegl/biosig/TESTED
>>>>
>>>> [3] https://cran.r-project.org/web/packages/policies.html
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>


From boennecd @end|ng |rom gm@||@com  Mon Mar 16 12:19:49 2020
From: boennecd @end|ng |rom gm@||@com (Benjamin Christoffersen)
Date: Mon, 16 Mar 2020 12:19:49 +0100
Subject: [R-pkg-devel] parglm: cannot reproduce error
Message-ID: <CAHHSL8s1o3ktBRUM1oRjWfjr9Sazfi5As0cTBw-gC2Eg9GmTGQ@mail.gmail.com>

Dear Sirs,

Recently, my parglm package was pulled of CRAN because of a segfault
on Solaris and an issue on the OpenBLAS additional issues test.

I started by trying to reproduce the Solaris issue but failed to
reproduce the error
with `rhub::checkonsolaris()`. Then I tried to reproduce the OpenBLAS error.
First, I build R-devel with
`?with-blas="/usr/lib/x86_64-linux-gnu/openblas/libblas.so.3"` and
`?with-lapack="/usr/lib/x86_64-linux-gnu/openblas/liblapack.so.3"`
which one gets from `libopenblas-dev` if I recall correctly on my own
Ubuntu machine (version 18.04, gcc 8.3.0). However, there where no
issues or segfaults when I ran `CMD check ?as-cran
?no-stop-on-test-error`.

Then I build the following docker image:
https://gist.github.com/boennecd/fd0625daf11aae3304e9e9a9a6cfea7d

where I do as described in the following two links (I think):
https://www.stats.ox.ac.uk/pub/bdr/Rblas/README.txt &
https://www.stats.ox.ac.uk/pub/bdr/Rconfig/r-devel-linux-x8664-fedora-gcc

However when I started the container and ran:
 - `/opt/R-devel/lib64/R/bin/R CMD check ?as-cran
?no-stop-on-test-error ?use-valgrind`
 - `/opt/R-devel/lib64/R/bin/R CMD check ?as-cran ?no-stop-on-test-error`

then I got no issues or segfaults.

So, although that other people have asked similar questions before,
can anyone spot what I did wrong when I tried to reproduce the error
and if not what should I do? Any help is much appreciated.

There are no other issues with both ASAN and UBSAN checks with gcc and
clang on my own machine.

Sincerely Yours,
Benjamin Christoffersen


From boennecd @end|ng |rom gm@||@com  Mon Mar 16 12:23:45 2020
From: boennecd @end|ng |rom gm@||@com (Benjamin Christoffersen)
Date: Mon, 16 Mar 2020 12:23:45 +0100
Subject: [R-pkg-devel] parglm: cannot reproduce error
In-Reply-To: <CAHHSL8s1o3ktBRUM1oRjWfjr9Sazfi5As0cTBw-gC2Eg9GmTGQ@mail.gmail.com>
References: <CAHHSL8s1o3ktBRUM1oRjWfjr9Sazfi5As0cTBw-gC2Eg9GmTGQ@mail.gmail.com>
Message-ID: <CAHHSL8sSGbkoKJe5yDKdbBaXHjt3VEun1AaT8w=Keg3TWHV_AQ@mail.gmail.com>

Sorry for posting twice. I thought that the mail had not been send out
but it seems like it has been:
https://stat.ethz.ch/pipermail/r-package-devel/2020q1/thread.html

Den man. 16. mar. 2020 kl. 12.19 skrev Benjamin Christoffersen
<boennecd at gmail.com>:
>
> Dear Sirs,
>
> Recently, my parglm package was pulled of CRAN because of a segfault
> on Solaris and an issue on the OpenBLAS additional issues test.
>
> I started by trying to reproduce the Solaris issue but failed to
> reproduce the error
> with `rhub::checkonsolaris()`. Then I tried to reproduce the OpenBLAS error.
> First, I build R-devel with
> `?with-blas="/usr/lib/x86_64-linux-gnu/openblas/libblas.so.3"` and
> `?with-lapack="/usr/lib/x86_64-linux-gnu/openblas/liblapack.so.3"`
> which one gets from `libopenblas-dev` if I recall correctly on my own
> Ubuntu machine (version 18.04, gcc 8.3.0). However, there where no
> issues or segfaults when I ran `CMD check ?as-cran
> ?no-stop-on-test-error`.
>
> Then I build the following docker image:
> https://gist.github.com/boennecd/fd0625daf11aae3304e9e9a9a6cfea7d
>
> where I do as described in the following two links (I think):
> https://www.stats.ox.ac.uk/pub/bdr/Rblas/README.txt &
> https://www.stats.ox.ac.uk/pub/bdr/Rconfig/r-devel-linux-x8664-fedora-gcc
>
> However when I started the container and ran:
>  - `/opt/R-devel/lib64/R/bin/R CMD check ?as-cran
> ?no-stop-on-test-error ?use-valgrind`
>  - `/opt/R-devel/lib64/R/bin/R CMD check ?as-cran ?no-stop-on-test-error`
>
> then I got no issues or segfaults.
>
> So, although that other people have asked similar questions before,
> can anyone spot what I did wrong when I tried to reproduce the error
> and if not what should I do? Any help is much appreciated.
>
> There are no other issues with both ASAN and UBSAN checks with gcc and
> clang on my own machine.
>
> Sincerely Yours,
> Benjamin Christoffersen


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Mar 16 14:13:16 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 16 Mar 2020 14:13:16 +0100
Subject: [R-pkg-devel] Examples for functions called by Shiny server
In-Reply-To: <3294C38C-AA81-4FDB-8687-99AE3BF23162@me.com>
References: <3294C38C-AA81-4FDB-8687-99AE3BF23162@me.com>
Message-ID: <68d0e7c9-4fbd-8945-d361-e997ab6542c4@statistik.tu-dortmund.de>

In general:

- You need examples for exported functions.
- You should test s much of the package as possible, of course.
- For shiny you have code on ./inst, but there should only be code for 
shiny, not additional fdiunctionaliyt that should be striiped out and 
made availabe via functions defined in ./R.

I haven't looked at the details, but if you fullfilled tjhe above, 
please simply resubmit or in case you do not need to change anytrhing, 
simply say so and respond to the CRAN team member CCing 
cran-submissions at ...


Best,
Uwe Ligges





On 16.03.2020 05:22, R. Mark Sharp wrote:
> I have been asked to provide examples within the Rd files of my package (github.com/rmsharp/nprcgenekeepr <http://github.com/rmsharp/nprcgenekeepr>) by the CRAN package reviewer. I have to export those functions called by the server.R script (or use ::: notation), which in turn generates an Rd file that is to have the example.
> 
> I cannot think of a meaningful example for a function that creates the content of a new Shiny tabpanel when an error is detected.
> 
> Suggestions are eagerly sought.
> 
> Mark
> R. Mark Sharp, Ph.D.
> Data Scientist and Biomedical Statistical Consultant
> 7526 Meadow Green St.
> San Antonio, TX 78251
> mobile: 210-218-2868
> rmsharp at me.com
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Mar 16 14:18:09 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 16 Mar 2020 14:18:09 +0100
Subject: [R-pkg-devel] packaging biosig for R
In-Reply-To: <31380f72-80e4-020a-469c-a3d921f6f533@gmail.com>
References: <a86636c8-7ba6-c377-fafb-df6f9cf68efc@gmail.com>
 <FF338D29-D9B9-4A38-A7EC-CE78792A307E@dcn.davis.ca.us>
 <7d6ff230-dcf0-cc2d-29bd-b6e8c679313b@gmail.com>
 <f1b20f7a-7457-d00c-9814-d2d56db3cbb1@gmail.com>
 <31380f72-80e4-020a-469c-a3d921f6f533@gmail.com>
Message-ID: <5498271b-3bb1-858e-0d12-4a96dfddf55f@statistik.tu-dortmund.de>



On 16.03.2020 10:58, Duncan Murdoch wrote:
> On 16/03/2020 3:00 a.m., Alois Schl?gl wrote:
>>
>> Thanks for your response. For *nix (Linux, MacOSX), this can be
>> achieved. For windows, currently the only way to compile libbiosig is
>> through mingw-cross-compiler environment (MXE) [1]? or in cygwin.
>> Currently, libbiosig does not compile with with VC++for various reasons,
>> and libbiosig has some hard dependencies (libiconv, suitesparse, dcmtk),
>> (there are dependencies on libb64, tinyxml), I'm wondering what the best
>> approach would be.
>>
>> - Would it be ok, if libbiosig.dll is distributed in binary form ?
> 
> I think the answer to that is that it would not be allowed, but I'm not 
> part of CRAN.
> 
>>
>> - Or would you accept a package that currently runs only on
>> MacOSX/Homebrew and Linux but not on Windows ?
> 
> There are some packages like that on CRAN, but it is certainly 
> discouraged.? Bioconductor has its own rules; you might want to ask 
> there, given the subject matter of your package.

Thanks, Duncan, same from here, just to confrim from a "part of CRAN" 
point of view.

Best,
Uwe Ligges



> Duncan Murdoch
> 
> 
>>
>>
>> Alois Schl?gl
>>
>> [1] https://github.com/schloegl/mxe
>>
>>
>>
>> Am 3/16/20 um 2:08 AM schrieb Duncan Murdoch:
>>> I suspect the question in this case depends on the availability of
>>> libbiosig.? If CRAN test machines don't have that and its source isn't
>>> included in the R package, then it will fail on initial install.? CRAN
>>> doesn't have a lot of resources to install difficult libraries; I have
>>> no idea if that applies in this case.
>>>
>>> I believe the most robust way to handle this sort of package is to
>>> have a configure script that looks for the lib on the installing
>>> machine, and uses that copy if found, otherwise compiles it from source.
>>>
>>> Duncan Murdoch
>>>
>>>
>>>
>>> On 15/03/2020 3:41 p.m., Jeff Newmiller wrote:
>>>> I am just a lurker (not representing CRAN) but I am having a hard
>>>> time understanding your question.
>>>>
>>>> Binary packages are a convenience for users, not a method for
>>>> submitting packages. When you have an R package accepted it is
>>>> accepted in source format.
>>>> If it doesn't exclude support for Windows or MacOSX then it will (in
>>>> time) be compiled into a binary form for distribution in addition to
>>>> being distributed is source form.
>>>>
>>>> As the maintainer, your responsibility is merely to confirm that your
>>>> source package is properly configured to be built in binary form
>>>> before you submit it to CRAN. This is normally accomplished by
>>>> successfully building it as binary in a testing environment. There
>>>> are various guides out there that can be helpful in accomplishing
>>>> this, e.g. [1].
>>>>
>>>> [1] https://kbroman.org/pkg_primer/pages/cran.htm
>>>>
>>>>
>>>> On March 15, 2020 1:07:41 AM PDT, "Alois Schl?gl"
>>>> <alois.schloegl at gmail.com> wrote:
>>>>>
>>>>> Dear R packagers,
>>>>>
>>>>>
>>>>> the Biosig project [1] supports reading of about 50 different data
>>>>> format [2]. Recently, a language binding to R was added, because a 
>>>>> user
>>>>> of Biosig asked for it.
>>>>>
>>>>>
>>>>> I've read the policy [3], and it seems the biosig would qualify as
>>>>> binary package. The underlying library (libbiosig) can be installed
>>>>>
>>>>> - on linux from source, or through debian/ubuntu package
>>>>>
>>>>> - on MacOSX through Homebrew.
>>>>>
>>>>> - for Windows I'm using MXE mingw-cross-compiler environment to build
>>>>> libbiosig.dll
>>>>>
>>>>>
>>>>> Would it be feasible to provide a package of biosig on cran ? What 
>>>>> need
>>>>> to be considered ?
>>>>>
>>>>>
>>>>> Kind regards
>>>>>
>>>>> ???? Alois
>>>>>
>>>>>
>>>>>
>>>>> [1] http://biosig.sourceforge.net/download.html
>>>>>
>>>>> [2] http://pub.ist.ac.at/~schloegl/biosig/TESTED
>>>>>
>>>>> [3] https://cran.r-project.org/web/packages/policies.html
>>>>>
>>>>> ______________________________________________
>>>>> R-package-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>>
>>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Mar 16 14:21:39 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 16 Mar 2020 14:21:39 +0100
Subject: [R-pkg-devel] An invalid URLs
In-Reply-To: <20200313145959.63b8bdea@trisector>
References: <f7fc418.1161.170d1949f7b.Coremail.jared_wood@163.com>
 <20200313110206.5481198f@trisector> <20200313145959.63b8bdea@trisector>
Message-ID: <71631a22-f43a-5ab8-4c24-a86601a105be@statistik.tu-dortmund.de>



On 13.03.2020 12:59, Ivan Krylov wrote:
> On Fri, 13 Mar 2020 11:02:06 +0300
> Ivan Krylov <krylov.r00t at gmail.com> wrote:
> 
>> the remote server could deny requests from such automated user
>> agents, only allowing clients that look like browsers
> 
> Here is what I have been able to observe:
> 
> If wait for some time, then try to access http://www.malacards.org/
> using cURL, I start getting 403 errors in both cURL and browser.
> 
> If wait for some time, then go to http://www.malacards.org/ using a
> browser and click on a few links, subsequent access using cURL from
> the same IP address also starts working (for a while).
> 
> Given the paranoid nature of the website's security system, it's hard
> to offer a good solution to your problem: linking to it may place
> people running R CMD check into temporary ban, while not linking to it
> does not seem polite.
> 

Well, then mention the URL in plain text but not link....

Best,
Uwe Ligges


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Mar 16 14:30:02 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 16 Mar 2020 14:30:02 +0100
Subject: [R-pkg-devel] Warning in dir.create(vd2 <- "vign_test"):
 'vign_test' already exists
In-Reply-To: <02e1a6a2-610b-d40c-0a52-4b4836764beb@effectivedefense.org>
References: <02e1a6a2-610b-d40c-0a52-4b4836764beb@effectivedefense.org>
Message-ID: <d0a544bc-fda4-d1dc-4567-cef22766d715@statistik.tu-dortmund.de>


On 16.03.2020 00:09, Spencer Graves wrote:
> Hello, All:
> 
> 
>  ????? Under Windows 10, "R CMD check sos_2.0-1.tar.gz" cloned from 
> "https://github.com/sbgraves237/sos" ends with:
> 
> 
> * checking rebuild of vignettes outputs ...Warning in dir.create(vd2 <- 
> "vign_test"):? 'vign_test' already exists

I do not get it when checking your package.

Best,
Uwe Ligges



> 
>  ????? Under macOS 10.15.3 it finishes fine.
> 
> 
>  ????? "grep 'vign_test'" failed to find anything.
> 
> 
>  ????? ???
>  ????? Thanks,
>  ????? Spencer Graves
> 
> 
> p.s.? Running R 3.6.3 on both machines with "update.packates()" clean.
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From Hendr|k@Schu|the|@ @end|ng |rom mp|-bn@mpg@de  Tue Mar 17 10:54:00 2020
From: Hendr|k@Schu|the|@ @end|ng |rom mp|-bn@mpg@de (Schultheis, Hendrik)
Date: Tue, 17 Mar 2020 09:54:00 +0000
Subject: [R-pkg-devel] Dependency problem
Message-ID: <728A316C6FA0F941B166A5C25230FE5DCF790C86@KI-S0113.kerckhoff.mpg.de>

Hi r-package-devel,

CRAN asked me to correct some errors so I'm currently in the process of updating/ resubmitting my package and ran into an error connected to one of my dependencies.
The thing is that the problem only occurs during the r-devel checks because of a newer package version of said depdendency but due to it being on Bioconductor I cannot exclude this version. Furthermore the problem seems to be fixed in their github so it will be solved with the next update cycle.

Should I tell CRAN that this error will resolve itself and can be ignored? Or should I wait until it is resolved and risk the package being archived?

Best Hendrik

	[[alternative HTML version deleted]]


From g|@nm@rco@|bert| @end|ng |rom gm@||@com  Tue Mar 17 16:29:29 2020
From: g|@nm@rco@|bert| @end|ng |rom gm@||@com (Gianmarco Alberti)
Date: Tue, 17 Mar 2020 16:29:29 +0100
Subject: [R-pkg-devel] note about mispelled words
In-Reply-To: <bc6ff082-5b29-44cb-810a-d225aabeaac0@Spark>
References: <bc6ff082-5b29-44cb-810a-d225aabeaac0@Spark>
Message-ID: <43cf60b5-305a-427f-bc79-f1119389c548@Spark>

Hello,
I am checking a package of mine, and I got only 1 note regarding possibly misspelled words in the DESCRIPTION.

The issue I am facing is that those 6 words are not actually misspelled, being either first or last names of individuals (actually, statistician; e.g., Kruskall, Brainerd).

Shall I have to do something (removing those; which does not make sense), or upon submitting my new version of the package there is a way to make clear that that note can be ignored?

By the way, those names were already there in earlier versions of the package and no note cropped out in those occasions.

Thank you
Best
GmA

************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA course in Criminology
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080
tel +356 2340 3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4
https://malta.academia.edu/GianmarcoAlberti

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en

Correspondence Analysis website
http://cainarchaeology.weebly.com/

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html

GmAMisc
https://cran.r-project.org/package=GmAMisc

movecost
https://cran.r-project.org/web/packages/movecost/index.html
************************************************

	[[alternative HTML version deleted]]


From henr|k@bengt@@on @end|ng |rom gm@||@com  Tue Mar 17 16:41:39 2020
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Tue, 17 Mar 2020 08:41:39 -0700
Subject: [R-pkg-devel] note about mispelled words
In-Reply-To: <43cf60b5-305a-427f-bc79-f1119389c548@Spark>
References: <bc6ff082-5b29-44cb-810a-d225aabeaac0@Spark>
 <43cf60b5-305a-427f-bc79-f1119389c548@Spark>
Message-ID: <CAFDcVCRgXyeV1Gk8YW-YYsrXhfBLNFdz3crqK6Rc3GLCYbtp6Q@mail.gmail.com>

You can single quote them to avoid them being spell checked, e.g. ...
using methods of 'Kruskall' and 'Brainerd'.  This is a common and
accepted practice.

This is hinted at in "Writing R Extensions" (e.g. help.start());

The mandatory ?Description? field should give a comprehensive
description of what the package does. One can use several (complete)
sentences, but only one paragraph. It should be intelligible to all
the intended readership (e.g. for a CRAN package to all CRAN users).
It is good practice not to start with the package name, ?This package?
or similar. As with the ?Title? field, double quotes should be used
for quotations (including titles of books and articles), and single
quotes for non-English usage, including names of other packages and
external software. This field should also be used for explaining the
package name if necessary. URLs should be enclosed in angle brackets,
e.g. ?<https://www.r-project.org>?: see also Specifying URLs.

/Henrik

On Tue, Mar 17, 2020 at 8:30 AM Gianmarco Alberti
<gianmarcoalberti at gmail.com> wrote:
>
> Hello,
> I am checking a package of mine, and I got only 1 note regarding possibly misspelled words in the DESCRIPTION.
>
> The issue I am facing is that those 6 words are not actually misspelled, being either first or last names of individuals (actually, statistician; e.g., Kruskall, Brainerd).
>
> Shall I have to do something (removing those; which does not make sense), or upon submitting my new version of the package there is a way to make clear that that note can be ignored?
>
> By the way, those names were already there in earlier versions of the package and no note cropped out in those occasions.
>
> Thank you
> Best
> GmA
>
> ************************************************
> Dr Gianmarco Alberti (PhD Udine)
> Lecturer in Spatial Forensics
> Coordinator of the BA course in Criminology
> Department of Criminology
> Faculty for Social Wellbeing
> Room 332, Humanities B (FEMA)
> University of Malta, Msida, Malta (Europe) - MSD 2080
> tel +356 2340 3718
>
> Academic profiles
> https://www.researchgate.net/profile/Gianmarco_Alberti4
> https://malta.academia.edu/GianmarcoAlberti
>
> Google Scholar profile
> https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
>
> Correspondence Analysis website
> http://cainarchaeology.weebly.com/
>
> R packages on CRAN:
> CAinterprTools
> https://cran.r-project.org/web/packages/CAinterprTools/index.html
>
> GmAMisc
> https://cran.r-project.org/package=GmAMisc
>
> movecost
> https://cran.r-project.org/web/packages/movecost/index.html
> ************************************************
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Mar 17 18:24:31 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 17 Mar 2020 13:24:31 -0400
Subject: [R-pkg-devel] note about mispelled words
In-Reply-To: <CAFDcVCRgXyeV1Gk8YW-YYsrXhfBLNFdz3crqK6Rc3GLCYbtp6Q@mail.gmail.com>
References: <bc6ff082-5b29-44cb-810a-d225aabeaac0@Spark>
 <43cf60b5-305a-427f-bc79-f1119389c548@Spark>
 <CAFDcVCRgXyeV1Gk8YW-YYsrXhfBLNFdz3crqK6Rc3GLCYbtp6Q@mail.gmail.com>
Message-ID: <89cafdfa-d916-f206-ae78-c4c3e5ea1a95@gmail.com>

I believe it is also acceptable to explain in your submission message 
that the misspelled words are all proper names.  As far as I know, 
misspellings are not enough of a problem to cause an automatic 
rejection, so a human being will be making a judgment about the note.

Duncan Murdoch

On 17/03/2020 11:41 a.m., Henrik Bengtsson wrote:
> You can single quote them to avoid them being spell checked, e.g. ...
> using methods of 'Kruskall' and 'Brainerd'.  This is a common and
> accepted practice.
> 
> This is hinted at in "Writing R Extensions" (e.g. help.start());
> 
> The mandatory ?Description? field should give a comprehensive
> description of what the package does. One can use several (complete)
> sentences, but only one paragraph. It should be intelligible to all
> the intended readership (e.g. for a CRAN package to all CRAN users).
> It is good practice not to start with the package name, ?This package?
> or similar. As with the ?Title? field, double quotes should be used
> for quotations (including titles of books and articles), and single
> quotes for non-English usage, including names of other packages and
> external software. This field should also be used for explaining the
> package name if necessary. URLs should be enclosed in angle brackets,
> e.g. ?<https://www.r-project.org>?: see also Specifying URLs.
> 
> /Henrik
> 
> On Tue, Mar 17, 2020 at 8:30 AM Gianmarco Alberti
> <gianmarcoalberti at gmail.com> wrote:
>>
>> Hello,
>> I am checking a package of mine, and I got only 1 note regarding possibly misspelled words in the DESCRIPTION.
>>
>> The issue I am facing is that those 6 words are not actually misspelled, being either first or last names of individuals (actually, statistician; e.g., Kruskall, Brainerd).
>>
>> Shall I have to do something (removing those; which does not make sense), or upon submitting my new version of the package there is a way to make clear that that note can be ignored?
>>
>> By the way, those names were already there in earlier versions of the package and no note cropped out in those occasions.
>>
>> Thank you
>> Best
>> GmA
>>
>> ************************************************
>> Dr Gianmarco Alberti (PhD Udine)
>> Lecturer in Spatial Forensics
>> Coordinator of the BA course in Criminology
>> Department of Criminology
>> Faculty for Social Wellbeing
>> Room 332, Humanities B (FEMA)
>> University of Malta, Msida, Malta (Europe) - MSD 2080
>> tel +356 2340 3718
>>
>> Academic profiles
>> https://www.researchgate.net/profile/Gianmarco_Alberti4
>> https://malta.academia.edu/GianmarcoAlberti
>>
>> Google Scholar profile
>> https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
>>
>> Correspondence Analysis website
>> http://cainarchaeology.weebly.com/
>>
>> R packages on CRAN:
>> CAinterprTools
>> https://cran.r-project.org/web/packages/CAinterprTools/index.html
>>
>> GmAMisc
>> https://cran.r-project.org/package=GmAMisc
>>
>> movecost
>> https://cran.r-project.org/web/packages/movecost/index.html
>> ************************************************
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From pd@|gd @end|ng |rom gm@||@com  Tue Mar 17 19:09:08 2020
From: pd@|gd @end|ng |rom gm@||@com (Peter Dalgaard)
Date: Tue, 17 Mar 2020 19:09:08 +0100
Subject: [R-pkg-devel] note about mispelled words
In-Reply-To: <89cafdfa-d916-f206-ae78-c4c3e5ea1a95@gmail.com>
References: <bc6ff082-5b29-44cb-810a-d225aabeaac0@Spark>
 <43cf60b5-305a-427f-bc79-f1119389c548@Spark>
 <CAFDcVCRgXyeV1Gk8YW-YYsrXhfBLNFdz3crqK6Rc3GLCYbtp6Q@mail.gmail.com>
 <89cafdfa-d916-f206-ae78-c4c3e5ea1a95@gmail.com>
Message-ID: <D3DE740C-14D5-46D6-BFB5-42D9477B5B7B@gmail.com>

However, notice that if it is the guy from the Kruskal-Wallis test (William K., 1919--2005), the "Kruskall" is in fact misspelt. It might be someone else, of course...

-pd

> On 17 Mar 2020, at 18:24 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> I believe it is also acceptable to explain in your submission message that the misspelled words are all proper names.  As far as I know, misspellings are not enough of a problem to cause an automatic rejection, so a human being will be making a judgment about the note.
> 
> Duncan Murdoch
> 
> On 17/03/2020 11:41 a.m., Henrik Bengtsson wrote:
>> You can single quote them to avoid them being spell checked, e.g. ...
>> using methods of 'Kruskall' and 'Brainerd'.  This is a common and
>> accepted practice.
>> This is hinted at in "Writing R Extensions" (e.g. help.start());
>> The mandatory ?Description? field should give a comprehensive
>> description of what the package does. One can use several (complete)
>> sentences, but only one paragraph. It should be intelligible to all
>> the intended readership (e.g. for a CRAN package to all CRAN users).
>> It is good practice not to start with the package name, ?This package?
>> or similar. As with the ?Title? field, double quotes should be used
>> for quotations (including titles of books and articles), and single
>> quotes for non-English usage, including names of other packages and
>> external software. This field should also be used for explaining the
>> package name if necessary. URLs should be enclosed in angle brackets,
>> e.g. ?<https://www.r-project.org>?: see also Specifying URLs.
>> /Henrik
>> On Tue, Mar 17, 2020 at 8:30 AM Gianmarco Alberti
>> <gianmarcoalberti at gmail.com> wrote:
>>> 
>>> Hello,
>>> I am checking a package of mine, and I got only 1 note regarding possibly misspelled words in the DESCRIPTION.
>>> 
>>> The issue I am facing is that those 6 words are not actually misspelled, being either first or last names of individuals (actually, statistician; e.g., Kruskall, Brainerd).
>>> 
>>> Shall I have to do something (removing those; which does not make sense), or upon submitting my new version of the package there is a way to make clear that that note can be ignored?
>>> 
>>> By the way, those names were already there in earlier versions of the package and no note cropped out in those occasions.
>>> 
>>> Thank you
>>> Best
>>> GmA
>>> 
>>> ************************************************
>>> Dr Gianmarco Alberti (PhD Udine)
>>> Lecturer in Spatial Forensics
>>> Coordinator of the BA course in Criminology
>>> Department of Criminology
>>> Faculty for Social Wellbeing
>>> Room 332, Humanities B (FEMA)
>>> University of Malta, Msida, Malta (Europe) - MSD 2080
>>> tel +356 2340 3718
>>> 
>>> Academic profiles
>>> https://www.researchgate.net/profile/Gianmarco_Alberti4
>>> https://malta.academia.edu/GianmarcoAlberti
>>> 
>>> Google Scholar profile
>>> https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
>>> 
>>> Correspondence Analysis website
>>> http://cainarchaeology.weebly.com/
>>> 
>>> R packages on CRAN:
>>> CAinterprTools
>>> https://cran.r-project.org/web/packages/CAinterprTools/index.html
>>> 
>>> GmAMisc
>>> https://cran.r-project.org/package=GmAMisc
>>> 
>>> movecost
>>> https://cran.r-project.org/web/packages/movecost/index.html
>>> ************************************************
>>> 
>>>         [[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>> 
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From g|@nm@rco@|bert| @end|ng |rom gm@||@com  Tue Mar 17 21:22:38 2020
From: g|@nm@rco@|bert| @end|ng |rom gm@||@com (Gianmarco Alberti)
Date: Tue, 17 Mar 2020 21:22:38 +0100
Subject: [R-pkg-devel] note about dependency on archived package
References: <36c08d0b-3b06-4a5d-bef4-b7f6c37316ab@Spark>
Message-ID: <35f6cda2-c4dd-489f-93a1-05aaeb5d75e3@Spark>

Hello,

After checking my package with win builder, I got 1 note that I seem to not fully understand:

CRAN repository db overrides:
 X-CRAN-Comment: Archived on 2020-03-17 as depends on archived package
   'spatialEco'.

Do you have any suggestion?
There is not reference to that package in my NAMESPACE, nor it is listed among the dependencies.

Full log here:
https://win-builder.r-project.org/98x9zsbaHsp1/00check.log

Best
Gm

************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA course in Criminology
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080
tel +356 2340 3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4
https://malta.academia.edu/GianmarcoAlberti

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en

Correspondence Analysis website
http://cainarchaeology.weebly.com/

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html

GmAMisc
https://cran.r-project.org/package=GmAMisc

movecost
https://cran.r-project.org/web/packages/movecost/index.html
************************************************

	[[alternative HTML version deleted]]


From g|@nm@rco@|bert| @end|ng |rom gm@||@com  Tue Mar 17 21:26:19 2020
From: g|@nm@rco@|bert| @end|ng |rom gm@||@com (Gianmarco Alberti)
Date: Tue, 17 Mar 2020 21:26:19 +0100
Subject: [R-pkg-devel] note about dependency on archived package
In-Reply-To: <35f6cda2-c4dd-489f-93a1-05aaeb5d75e3@Spark>
References: <36c08d0b-3b06-4a5d-bef4-b7f6c37316ab@Spark>
 <35f6cda2-c4dd-489f-93a1-05aaeb5d75e3@Spark>
Message-ID: <ceaf9070-aecd-43a9-a4ca-df04b2b3210e@Spark>

Further to my earlier email,

I understand that my package has been archived since my last version on CRAN (1.1.0) had among its dependencies a package that has been archived.

Now my question:
How can I bring my package (actually the new version 1.1.1 that I?m trying to check) back to life (i.e., CRAN) again?

Best
Gm

************************************************
Dr Gianmarco Alberti (PhD Udine)
Lecturer in Spatial Forensics
Coordinator of the BA course in Criminology
Department of Criminology
Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta, Msida, Malta (Europe) - MSD 2080
tel +356 2340 3718

Academic profiles
https://www.researchgate.net/profile/Gianmarco_Alberti4
https://malta.academia.edu/GianmarcoAlberti

Google Scholar profile
https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en

Correspondence Analysis website
http://cainarchaeology.weebly.com/

R packages on CRAN:
CAinterprTools
https://cran.r-project.org/web/packages/CAinterprTools/index.html

GmAMisc
https://cran.r-project.org/package=GmAMisc

movecost
https://cran.r-project.org/web/packages/movecost/index.html
************************************************
On 17 Mar 2020, 21:22 +0100, Gianmarco Alberti <gianmarcoalberti at gmail.com>, wrote:
> Hello,
>
> After checking my package with win builder, I got 1 note that I seem to not fully understand:
>
> CRAN repository db overrides:
>  X-CRAN-Comment: Archived on 2020-03-17 as depends on archived package
>    'spatialEco'.
>
> Do you have any suggestion?
> There is not reference to that package in my NAMESPACE, nor it is listed among the dependencies.
>
> Full log here:
> https://win-builder.r-project.org/98x9zsbaHsp1/00check.log
>
> Best
> Gm
>
> ************************************************
> Dr Gianmarco Alberti (PhD Udine)
> Lecturer in Spatial Forensics
> Coordinator of the BA course in Criminology
> Department of Criminology
> Faculty for Social Wellbeing
> Room 332, Humanities B (FEMA)
> University of Malta, Msida, Malta (Europe) - MSD 2080
> tel +356 2340 3718
>
> Academic profiles
> https://www.researchgate.net/profile/Gianmarco_Alberti4
> https://malta.academia.edu/GianmarcoAlberti
>
> Google Scholar profile
> https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
>
> Correspondence Analysis website
> http://cainarchaeology.weebly.com/
>
> R packages on CRAN:
> CAinterprTools
> https://cran.r-project.org/web/packages/CAinterprTools/index.html
>
> GmAMisc
> https://cran.r-project.org/package=GmAMisc
>
> movecost
> https://cran.r-project.org/web/packages/movecost/index.html
> ************************************************

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Tue Mar 17 21:58:09 2020
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 17 Mar 2020 16:58:09 -0400
Subject: [R-pkg-devel] note about mispelled words
In-Reply-To: <D3DE740C-14D5-46D6-BFB5-42D9477B5B7B@gmail.com>
References: <bc6ff082-5b29-44cb-810a-d225aabeaac0@Spark>
 <43cf60b5-305a-427f-bc79-f1119389c548@Spark>
 <CAFDcVCRgXyeV1Gk8YW-YYsrXhfBLNFdz3crqK6Rc3GLCYbtp6Q@mail.gmail.com>
 <89cafdfa-d916-f206-ae78-c4c3e5ea1a95@gmail.com>
 <D3DE740C-14D5-46D6-BFB5-42D9477B5B7B@gmail.com>
Message-ID: <d9b51fca-a3f0-5a7b-ab5a-fde0db50de18@gmail.com>


  Interesting.  'Kruskal Wallis' gets 5.68M google hits, 'Kruskall
Wallis' gets 432K ...

 Within CRAN packages, sos::findFn("kruskal") gets 408 hits,
=sos::findFn("kruskall") gets 15 hits.  (Some of those may be like the
use of 'euclidian' in stats::dist() to intentionally match misspellings
... ?)

On 2020-03-17 2:09 p.m., Peter Dalgaard wrote:
> However, notice that if it is the guy from the Kruskal-Wallis test (William K., 1919--2005), the "Kruskall" is in fact misspelt. It might be someone else, of course...
> 
> -pd
> 
>> On 17 Mar 2020, at 18:24 , Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>>
>> I believe it is also acceptable to explain in your submission message that the misspelled words are all proper names.  As far as I know, misspellings are not enough of a problem to cause an automatic rejection, so a human being will be making a judgment about the note.
>>
>> Duncan Murdoch
>>
>> On 17/03/2020 11:41 a.m., Henrik Bengtsson wrote:
>>> You can single quote them to avoid them being spell checked, e.g. ...
>>> using methods of 'Kruskall' and 'Brainerd'.  This is a common and
>>> accepted practice.
>>> This is hinted at in "Writing R Extensions" (e.g. help.start());
>>> The mandatory ?Description? field should give a comprehensive
>>> description of what the package does. One can use several (complete)
>>> sentences, but only one paragraph. It should be intelligible to all
>>> the intended readership (e.g. for a CRAN package to all CRAN users).
>>> It is good practice not to start with the package name, ?This package?
>>> or similar. As with the ?Title? field, double quotes should be used
>>> for quotations (including titles of books and articles), and single
>>> quotes for non-English usage, including names of other packages and
>>> external software. This field should also be used for explaining the
>>> package name if necessary. URLs should be enclosed in angle brackets,
>>> e.g. ?<https://www.r-project.org>?: see also Specifying URLs.
>>> /Henrik
>>> On Tue, Mar 17, 2020 at 8:30 AM Gianmarco Alberti
>>> <gianmarcoalberti at gmail.com> wrote:
>>>>
>>>> Hello,
>>>> I am checking a package of mine, and I got only 1 note regarding possibly misspelled words in the DESCRIPTION.
>>>>
>>>> The issue I am facing is that those 6 words are not actually misspelled, being either first or last names of individuals (actually, statistician; e.g., Kruskall, Brainerd).
>>>>
>>>> Shall I have to do something (removing those; which does not make sense), or upon submitting my new version of the package there is a way to make clear that that note can be ignored?
>>>>
>>>> By the way, those names were already there in earlier versions of the package and no note cropped out in those occasions.
>>>>
>>>> Thank you
>>>> Best
>>>> GmA
>>>>
>>>> ************************************************
>>>> Dr Gianmarco Alberti (PhD Udine)
>>>> Lecturer in Spatial Forensics
>>>> Coordinator of the BA course in Criminology
>>>> Department of Criminology
>>>> Faculty for Social Wellbeing
>>>> Room 332, Humanities B (FEMA)
>>>> University of Malta, Msida, Malta (Europe) - MSD 2080
>>>> tel +356 2340 3718
>>>>
>>>> Academic profiles
>>>> https://www.researchgate.net/profile/Gianmarco_Alberti4
>>>> https://malta.academia.edu/GianmarcoAlberti
>>>>
>>>> Google Scholar profile
>>>> https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
>>>>
>>>> Correspondence Analysis website
>>>> http://cainarchaeology.weebly.com/
>>>>
>>>> R packages on CRAN:
>>>> CAinterprTools
>>>> https://cran.r-project.org/web/packages/CAinterprTools/index.html
>>>>
>>>> GmAMisc
>>>> https://cran.r-project.org/package=GmAMisc
>>>>
>>>> movecost
>>>> https://cran.r-project.org/web/packages/movecost/index.html
>>>> ************************************************
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-package-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From m@ur|c|o@z@mbr@no @end|ng |rom u|ronter@@c|  Thu Mar 19 00:17:16 2020
From: m@ur|c|o@z@mbr@no @end|ng |rom u|ronter@@c| (Mauricio Zambrano-Bigiarini)
Date: Wed, 18 Mar 2020 20:17:16 -0300
Subject: [R-pkg-devel] note about dependency on archived package
In-Reply-To: <ceaf9070-aecd-43a9-a4ca-df04b2b3210e@Spark>
References: <36c08d0b-3b06-4a5d-bef4-b7f6c37316ab@Spark>
 <35f6cda2-c4dd-489f-93a1-05aaeb5d75e3@Spark>
 <ceaf9070-aecd-43a9-a4ca-df04b2b3210e@Spark>
Message-ID: <CAP6VarsPV8-VaL8sXkUV3zbLEuQaCYpU=DCW5QpD+vKX7OTt7g@mail.gmail.com>

I had a similar problem and today it was solved.

What I did was first, solve any possible dependency issue of the
archived package, check your package against r-devel, using --as-cran,
and then write to CRAN saying that your package is currently archived
because of ....., but you are submitting a new version that corrects
all the problems.

IHTH.

Kind regards

Mauricio



Mauricio Zambrano-Bigiarini, PhD

=====================================
Department of Civil Engineering
Faculty of Engineering and Sciences
Universidad de La Frontera, Temuco, Chile
http://hzambran.github.io/
=====================================
mailto : mauricio.zambrano at ufrontera.cl
work-phone : +56 45 259 2812
=====================================
"A people that values its privileges
above its principles soon loses both".
(Dwight D. Eisenhower)
=====================================
Linux user #454569 -- Linux Mint user

On Tue, 17 Mar 2020 at 17:27, Gianmarco Alberti
<gianmarcoalberti at gmail.com> wrote:
>
> Further to my earlier email,
>
> I understand that my package has been archived since my last version on CRAN (1.1.0) had among its dependencies a package that has been archived.
>
> Now my question:
> How can I bring my package (actually the new version 1.1.1 that I?m trying to check) back to life (i.e., CRAN) again?
>
> Best
> Gm
>
> ************************************************
> Dr Gianmarco Alberti (PhD Udine)
> Lecturer in Spatial Forensics
> Coordinator of the BA course in Criminology
> Department of Criminology
> Faculty for Social Wellbeing
> Room 332, Humanities B (FEMA)
> University of Malta, Msida, Malta (Europe) - MSD 2080
> tel +356 2340 3718
>
> Academic profiles
> https://www.researchgate.net/profile/Gianmarco_Alberti4
> https://malta.academia.edu/GianmarcoAlberti
>
> Google Scholar profile
> https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
>
> Correspondence Analysis website
> http://cainarchaeology.weebly.com/
>
> R packages on CRAN:
> CAinterprTools
> https://cran.r-project.org/web/packages/CAinterprTools/index.html
>
> GmAMisc
> https://cran.r-project.org/package=GmAMisc
>
> movecost
> https://cran.r-project.org/web/packages/movecost/index.html
> ************************************************
> On 17 Mar 2020, 21:22 +0100, Gianmarco Alberti <gianmarcoalberti at gmail.com>, wrote:
> > Hello,
> >
> > After checking my package with win builder, I got 1 note that I seem to not fully understand:
> >
> > CRAN repository db overrides:
> >  X-CRAN-Comment: Archived on 2020-03-17 as depends on archived package
> >    'spatialEco'.
> >
> > Do you have any suggestion?
> > There is not reference to that package in my NAMESPACE, nor it is listed among the dependencies.
> >
> > Full log here:
> > https://win-builder.r-project.org/98x9zsbaHsp1/00check.log
> >
> > Best
> > Gm
> >
> > ************************************************
> > Dr Gianmarco Alberti (PhD Udine)
> > Lecturer in Spatial Forensics
> > Coordinator of the BA course in Criminology
> > Department of Criminology
> > Faculty for Social Wellbeing
> > Room 332, Humanities B (FEMA)
> > University of Malta, Msida, Malta (Europe) - MSD 2080
> > tel +356 2340 3718
> >
> > Academic profiles
> > https://www.researchgate.net/profile/Gianmarco_Alberti4
> > https://malta.academia.edu/GianmarcoAlberti
> >
> > Google Scholar profile
> > https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
> >
> > Correspondence Analysis website
> > http://cainarchaeology.weebly.com/
> >
> > R packages on CRAN:
> > CAinterprTools
> > https://cran.r-project.org/web/packages/CAinterprTools/index.html
> >
> > GmAMisc
> > https://cran.r-project.org/package=GmAMisc
> >
> > movecost
> > https://cran.r-project.org/web/packages/movecost/index.html
> > ************************************************
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel

-- 
La informaci?n contenida en este correo electr?nico y cualquier anexo o 
respuesta relacionada, puede contener datos e informaci?n confidencial y no 
puede ser usada o difundida por personas distintas a su(s) destinatario(s). 
Si usted no es el destinatario de esta comunicaci?n, le informamos que 
cualquier divulgaci?n, distribuci?n o copia de esta informaci?n constituye 
un delito conforme a la ley chilena. Si lo ha recibido por error, por favor 
borre el mensaje y todos sus anexos y notifique al remitente.


From hugh@p@r@on@ge @end|ng |rom gm@||@com  Thu Mar 19 00:41:33 2020
From: hugh@p@r@on@ge @end|ng |rom gm@||@com (Hugh Parsonage)
Date: Thu, 19 Mar 2020 10:41:33 +1100
Subject: [R-pkg-devel] note about dependency on archived package
In-Reply-To: <35f6cda2-c4dd-489f-93a1-05aaeb5d75e3@Spark>
References: <36c08d0b-3b06-4a5d-bef4-b7f6c37316ab@Spark>
 <35f6cda2-c4dd-489f-93a1-05aaeb5d75e3@Spark>
Message-ID: <CAJmOi+N3xSoaBBhJV36jZ0tAM3MRU3Og3sTGfweGabxiV2hNgA@mail.gmail.com>

The note is there to remind CRAN that the package previously had problems
serious enough to warrant archival. Since you have solved the problem, you
do not need to do anything else in your submission.

On Wed, 18 Mar 2020 at 7:23 am, Gianmarco Alberti <
gianmarcoalberti at gmail.com> wrote:

> Hello,
>
> After checking my package with win builder, I got 1 note that I seem to
> not fully understand:
>
> CRAN repository db overrides:
>  X-CRAN-Comment: Archived on 2020-03-17 as depends on archived package
>    'spatialEco'.
>
> Do you have any suggestion?
> There is not reference to that package in my NAMESPACE, nor it is listed
> among the dependencies.
>
> Full log here:
> https://win-builder.r-project.org/98x9zsbaHsp1/00check.log
>
> Best
> Gm
>
> ************************************************
> Dr Gianmarco Alberti (PhD Udine)
> Lecturer in Spatial Forensics
> Coordinator of the BA course in Criminology
> Department of Criminology
> Faculty for Social Wellbeing
> Room 332, Humanities B (FEMA)
> University of Malta, Msida, Malta (Europe) - MSD 2080
> tel +356 2340 3718
>
> Academic profiles
> https://www.researchgate.net/profile/Gianmarco_Alberti4
> https://malta.academia.edu/GianmarcoAlberti
>
> Google Scholar profile
> https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
>
> Correspondence Analysis website
> http://cainarchaeology.weebly.com/
>
> R packages on CRAN:
> CAinterprTools
> https://cran.r-project.org/web/packages/CAinterprTools/index.html
>
> GmAMisc
> https://cran.r-project.org/package=GmAMisc
>
> movecost
> https://cran.r-project.org/web/packages/movecost/index.html
> ************************************************
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From h@nxd1217 @end|ng |rom 163@com  Thu Mar 19 03:13:21 2020
From: h@nxd1217 @end|ng |rom 163@com (Hanxudong)
Date: Thu, 19 Mar 2020 10:13:21 +0800 (CST)
Subject: [R-pkg-devel] Ask for help
Message-ID: <239b9894.2997.170f0910736.Coremail.hanxd1217@163.com>

* installing *source* package 'SubtypeDrug' ...
** using staged installation
** R
** data
*** moving datasets to lazyload DB
** inst
** byte-compile and prepare package for lazy loading
Error: .onLoad failed in loadNamespace() for 'S4Vectors', details:
  call: validObject(.Object)
  error: invalid class "LLint" object: superclass "integer_OR_LLint" not defined in the environment of the object's class
Execution halted
ERROR: lazy loading failed for package 'SubtypeDrug'
* removing 'd:/RCompile/CRANincoming/R-devel/lib/SubtypeDrug'

The above problem has not been solved well, we hope to get some help.
Best wishes,




 
	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Thu Mar 19 08:02:19 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Thu, 19 Mar 2020 01:02:19 -0600
Subject: [R-pkg-devel] Errors in make check in Windows 10 with OpenBLAS
Message-ID: <CACxE24nsuTOj5oPvC=_R_Lf=1bJCFqFChC=CN48iMFgOQD21DA@mail.gmail.com>

Hello everyone:

I have built the latest version of the OpenBLAS on my Windows 10 machine.
When I run make distribution in R, everything is fine.

However, when I run make check all,  I get the following error:

C:\newtimeR\R-3.6.3\src\gnuwin32>make check-all
Testing examples for package 'base'
Testing examples for package 'tools'
  comparing 'tools-Ex.Rout' to 'tools-Ex.Rout.save' ... OK
Testing examples for package 'utils'
Error: testing 'utils' failed
Execution halted
make[3]: *** [Makefile.win:29: test-Examples-Base] Error 1
make[2]: *** [Makefile.common:185: test-Examples] Error 2
make[1]: *** [Makefile.common:171: test-all-basics] Error 1
make: *** [Makefile:324: check-all] Error 2

And here is the section from the .Rout.fail for utils:

> ## Multibyte characters in strings (in multibyte locales):
> oloc <- Sys.getlocale("LC_CTYPE")
> mbyte.lc <- if(.Platform$OS.type == "windows")
+  "English_United States.28605" else "en_GB.UTF-8"
> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
[1] "English_United States.28605"
> ## Truncation behavior (<-> correct width measurement) for "long"
non-ASCII:
> idx <- c(65313:65338, 65345:65350)
> fwch <- intToUtf8(idx) # full width character string: each has width 2
> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
+           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
c.ch w.ch c.fw w.fw
  64   64   32   64
> stopifnot(unname(ncc) == c(64,64, 32, 64))
> ## nchar.max: 1st line needs an increase of  2  in order to see  1  (in
UTF-8!):
> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
Error in strtrim(x.lrg, nchar.max - nc) :
  unsupported conversion from 'UTF-8' in codepage 28605
Calls: lapply ... FUN -> str -> str.default -> maybe_truncate -> strtrim
Execution halted

Has anyone run into this before, please?

If I run this line-by-line starting at the "idx <-", things are fine.

I also compiled R from source without the OpenBLAS, and it was fine.

Thanks for any suggestions.

Sincerely,
Erin



Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Thu Mar 19 09:29:25 2020
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Thu, 19 Mar 2020 09:29:25 +0100
Subject: [R-pkg-devel] Errors in make check in Windows 10 with OpenBLAS
In-Reply-To: <CACxE24nsuTOj5oPvC=_R_Lf=1bJCFqFChC=CN48iMFgOQD21DA@mail.gmail.com>
References: <CACxE24nsuTOj5oPvC=_R_Lf=1bJCFqFChC=CN48iMFgOQD21DA@mail.gmail.com>
Message-ID: <5de3f2cc-72af-933e-61fe-a6c1ac74ffae@gmail.com>

Hi Erin,

this comes from examples in ?str. Could you please try to find a minimal 
example to reproduce on your system based on that? I would look for 
"line needs" in ?str and experiment with reducing the example there 
while still getting the error. Once it is minimal, could you please try 
also on the official build of R on your machine?

Also it would be nice to have a session info. If it works in the 
official build but not your custom build, then one would have to look 
also into how the custom build is done.

Thanks
Tomas


On 3/19/20 8:02 AM, Erin Hodgess wrote:
> Hello everyone:
>
> I have built the latest version of the OpenBLAS on my Windows 10 machine.
> When I run make distribution in R, everything is fine.
>
> However, when I run make check all,  I get the following error:
>
> C:\newtimeR\R-3.6.3\src\gnuwin32>make check-all
> Testing examples for package 'base'
> Testing examples for package 'tools'
>    comparing 'tools-Ex.Rout' to 'tools-Ex.Rout.save' ... OK
> Testing examples for package 'utils'
> Error: testing 'utils' failed
> Execution halted
> make[3]: *** [Makefile.win:29: test-Examples-Base] Error 1
> make[2]: *** [Makefile.common:185: test-Examples] Error 2
> make[1]: *** [Makefile.common:171: test-all-basics] Error 1
> make: *** [Makefile:324: check-all] Error 2
>
> And here is the section from the .Rout.fail for utils:
>
>> ## Multibyte characters in strings (in multibyte locales):
>> oloc <- Sys.getlocale("LC_CTYPE")
>> mbyte.lc <- if(.Platform$OS.type == "windows")
> +  "English_United States.28605" else "en_GB.UTF-8"
>> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
> [1] "English_United States.28605"
>> ## Truncation behavior (<-> correct width measurement) for "long"
> non-ASCII:
>> idx <- c(65313:65338, 65345:65350)
>> fwch <- intToUtf8(idx) # full width character string: each has width 2
>> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
> +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
> c.ch w.ch c.fw w.fw
>    64   64   32   64
>> stopifnot(unname(ncc) == c(64,64, 32, 64))
>> ## nchar.max: 1st line needs an increase of  2  in order to see  1  (in
> UTF-8!):
>> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
> Error in strtrim(x.lrg, nchar.max - nc) :
>    unsupported conversion from 'UTF-8' in codepage 28605
> Calls: lapply ... FUN -> str -> str.default -> maybe_truncate -> strtrim
> Execution halted
>
> Has anyone run into this before, please?
>
> If I run this line-by-line starting at the "idx <-", things are fine.
>
> I also compiled R from source without the OpenBLAS, and it was fine.
>
> Thanks for any suggestions.
>
> Sincerely,
> Erin
>
>
>
> Erin Hodgess, PhD
> mailto: erinm.hodgess at gmail.com
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From R@|ner @end|ng |rom krug@@de  Thu Mar 19 17:21:08 2020
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Thu, 19 Mar 2020 17:21:08 +0100
Subject: [R-pkg-devel] Strange leftovers after check by CRAN
Message-ID: <11B4061E-52AE-48F8-9FF4-CEC5D64EC68A@krugs.de>

Hi

My package dmdScheme gets always one note after submission to CRAN:


...
* checking for detritus in the temp directory ... NOTE
Found the following files/directories:
  ?calibre_4.99.4_tmp_8yyefjbo? ?calibre_4.99.4_tmp_ft15_af5?
  ?calibre_4.99.4_tmp_jy4e07d6? ?calibre_4.99.4_tmp_oxx_azo2?
  ?runtime-hornik?
* DONE

These leftovers are only reported from CRAN, and locally everything is fine. Uwe recommended to set the environmental variable 

R_CHECK_THINGS_IN_CHECK_DIR_=true

But this does not change anything, I get the report back

...
* checking for detritus in the temp directory ... OK
* DONE

Any suggestions how I can track down the where these are coming from? Each time my package has to go through a manual check at CRAN?

Thanks,

Rainer


--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982


From M@x@Turgeon @end|ng |rom um@n|tob@@c@  Thu Mar 19 18:03:21 2020
From: M@x@Turgeon @end|ng |rom um@n|tob@@c@ (Max Turgeon)
Date: Thu, 19 Mar 2020 17:03:21 +0000
Subject: [R-pkg-devel] Strange leftovers after check by CRAN
In-Reply-To: <11B4061E-52AE-48F8-9FF4-CEC5D64EC68A@krugs.de>
References: <11B4061E-52AE-48F8-9FF4-CEC5D64EC68A@krugs.de>
Message-ID: <dec8e09e387048f6ad595ce85d524c44@umanitoba.ca>

Is there perhaps a typo in the environment variable name? This line suggests there should be an underscore at the beginning too:

https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R#L6028


Max Turgeon
Assistant Professor
Department of Statistics
Department of Computer Science
University of Manitoba
maxturgeon.ca<http://maxturgeon.ca>


________________________________
From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Rainer M Krug <Rainer at krugs.de>
Sent: March 19, 2020 11:21:08 AM
To: R Package Devel
Subject: [R-pkg-devel] Strange leftovers after check by CRAN

Hi

My package dmdScheme gets always one note after submission to CRAN:


...
* checking for detritus in the temp directory ... NOTE
Found the following files/directories:
  ?calibre_4.99.4_tmp_8yyefjbo? ?calibre_4.99.4_tmp_ft15_af5?
  ?calibre_4.99.4_tmp_jy4e07d6? ?calibre_4.99.4_tmp_oxx_azo2?
  ?runtime-hornik?
* DONE

These leftovers are only reported from CRAN, and locally everything is fine. Uwe recommended to set the environmental variable

R_CHECK_THINGS_IN_CHECK_DIR_=true

But this does not change anything, I get the report back

...
* checking for detritus in the temp directory ... OK
* DONE

Any suggestions how I can track down the where these are coming from? Each time my package has to go through a manual check at CRAN?

Thanks,

Rainer


--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office: +41 (0)44 635 47 64
Cell:            +41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
                Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982

______________________________________________
R-package-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


From R@|ner @end|ng |rom krug@@de  Thu Mar 19 18:23:17 2020
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Thu, 19 Mar 2020 18:23:17 +0100
Subject: [R-pkg-devel] Strange leftovers after check by CRAN
In-Reply-To: <CAJXgQP1ydcuG24ygp08+NJ_2DZi_fJPLB14GysXkF3S0-jA7ig@mail.gmail.com>
References: <11B4061E-52AE-48F8-9FF4-CEC5D64EC68A@krugs.de>
 <CAJXgQP1ydcuG24ygp08+NJ_2DZi_fJPLB14GysXkF3S0-jA7ig@mail.gmail.com>
Message-ID: <28AD6B69-360A-47A2-9D58-33B3D9453B51@krugs.de>





> On 19 Mar 2020, at 17:45, Kevin Ushey <kevinushey at gmail.com> wrote:
> 
> FWIW if I search for calibre_4.99.4 I see that it's a package on the
> Debian repositories (a packaged copy of https://calibre-ebook.com/ it
> seems?) so it seems like something is intentionally or unintentionally
> trying to download and use that.

OK - that explains, why I not seeing the detritus on my Mac. 

> 
> The only hint I see is that Bookdown does support calibre as an output.

I have no package book down installed on my system, wherefore dmdScheme does not depend on it.

> 
> As an aside, I'm not sure if that's a typo but you're missing a
> leading underscore in the envvar:
> 
> _R_CHECK_THINGS_IN_CHECK_DIR_=true

Might be - but I tried it with the _ and also no detritus (see above).

I don?t feel like installing a virtual machine / docker to follow this up.

OK.

Thanks,

Rainer


> 
> Best,
> Kevin
> 
> On Thu, Mar 19, 2020 at 9:21 AM Rainer M Krug <Rainer at krugs.de> wrote:
>> 
>> Hi
>> 
>> My package dmdScheme gets always one note after submission to CRAN:
>> 
>> 
>> ...
>> * checking for detritus in the temp directory ... NOTE
>> Found the following files/directories:
>>  ?calibre_4.99.4_tmp_8yyefjbo? ?calibre_4.99.4_tmp_ft15_af5?
>>  ?calibre_4.99.4_tmp_jy4e07d6? ?calibre_4.99.4_tmp_oxx_azo2?
>>  ?runtime-hornik?
>> * DONE
>> 
>> These leftovers are only reported from CRAN, and locally everything is fine. Uwe recommended to set the environmental variable
>> 
>> R_CHECK_THINGS_IN_CHECK_DIR_=true
>> 
>> But this does not change anything, I get the report back
>> 
>> ...
>> * checking for detritus in the temp directory ... OK
>> * DONE
>> 
>> Any suggestions how I can track down the where these are coming from? Each time my package has to go through a manual check at CRAN?
>> 
>> Thanks,
>> 
>> Rainer
>> 
>> 
>> --
>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>> 
>> Orcid ID: 0000-0002-7490-0066
>> 
>> Department of Evolutionary Biology and Environmental Studies
>> University of Z?rich
>> Office Y34-J-74
>> Winterthurerstrasse 190
>> 8075 Z?rich
>> Switzerland
>> 
>> Office: +41 (0)44 635 47 64
>> Cell:           +41 (0)78 630 66 57
>> email:      Rainer.Krug at uzh.ch
>>                Rainer at krugs.de
>> Skype:     RMkrug
>> 
>> PGP: 0x0F52F982
>> 
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Fri Mar 20 05:44:39 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Thu, 19 Mar 2020 22:44:39 -0600
Subject: [R-pkg-devel] Errors in make check in Windows 10 with OpenBLAS
In-Reply-To: <5de3f2cc-72af-933e-61fe-a6c1ac74ffae@gmail.com>
References: <CACxE24nsuTOj5oPvC=_R_Lf=1bJCFqFChC=CN48iMFgOQD21DA@mail.gmail.com>
 <5de3f2cc-72af-933e-61fe-a6c1ac74ffae@gmail.com>
Message-ID: <CACxE24=RGU-EvdjmoDpEF91POKV1AH8hZd=stdNRt8xr1c0-2g@mail.gmail.com>

Hi Tomas and others:

Here is the session Info.  I also used the str example both without and
with changing the locale.

 sI <- sessionInfo()
> str(sI)
List of 10
 $ R.version :List of 14
  ..$ platform      : chr "x86_64-w64-mingw32"
  ..$ arch          : chr "x86_64"
  ..$ os            : chr "mingw32"
  ..$ system        : chr "x86_64, mingw32"
  ..$ status        : chr ""
  ..$ major         : chr "3"
  ..$ minor         : chr "6.3"
  ..$ year          : chr "2020"
  ..$ month         : chr "02"
  ..$ day           : chr "29"
  ..$ svn rev       : chr "77875"
  ..$ language      : chr "R"
  ..$ version.string: chr "R version 3.6.3 (2020-02-29)"
  ..$ nickname      : chr "Holding the Windsock"
 $ platform  : chr "x86_64-w64-mingw32/x64 (64-bit)"
 $ locale    : chr "LC_COLLATE=English_United
States.1252;LC_CTYPE=English_United States.1252;LC_MONETARY=English_United
States.125"| __truncated__
 $ running   : chr "Windows 10 x64 (build 18362)"
 $ RNGkind   : chr [1:3] "Mersenne-Twister" "Inversion" "Rejection"
 $ basePkgs  : chr [1:7] "stats" "graphics" "grDevices" "utils" ...
 $ loadedOnly:List of 1
  ..$ compiler:List of 9
  .. ..$ Package    : chr "compiler"
  .. ..$ Version    : chr "3.6.3"
  .. ..$ Priority   : chr "base"
  .. ..$ Title      : chr "The R Compiler Package"
  .. ..$ Author     : chr "Luke Tierney <luke-tierney at uiowa.edu>"
  .. ..$ Maintainer : chr "R Core Team <R-core at r-project.org>"
  .. ..$ Description: chr "Byte code compiler for R."
  .. ..$ License    : chr "Part of R 3.6.3"
  .. ..$ Built      : chr "R 3.6.3; ; 2020-03-20 04:29:00 UTC; windows"
  .. ..- attr(*, "class")= chr "packageDescription"
  .. ..- attr(*, "file")= chr
"c:/newtimeR/R-3.6.3/library/compiler/Meta/package.rds"
 $ matprod   : chr "default"
 $ BLAS      : chr ""
 $ LAPACK    : chr ""
 - attr(*, "class")= chr "sessionInfo"


Running the str example WITHOUT changing the locale:
> ## Truncation behavior (<-> correct width measurement) for "long"
non-ASCII:
> idx <- c(65313:65338, 65345:65350)
> fwch <- intToUtf8(idx) # full width character string: each has width 2
> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
+           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
c.ch w.ch c.fw w.fw
  64   64   32   64
> stopifnot(unname(ncc) == c(64,64, 32, 64))
> ## nchar.max: 1st line needs an increase of  2  in order to see  1  (in
UTF-$
> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
 chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+"| __truncated__
 chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+F"| __truncated__
 chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF"| __truncated__
 chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF2"| __truncated__
 chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26"| __truncated__
 chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26>"| __truncated__
 chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26><"| __truncated__
> invisible(lapply(60:66, function(N) str( ch , nchar.max = N))) # "1 is 1"
he$
 chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
 chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."| __truncated__
 chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"| __truncated__
 chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"| __truncated__
 chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."| __truncated__
 chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"| __truncated__
 chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>

Running the str example WITH changing the locale:

 oloc <- Sys.getlocale("LC_CTYPE")
> mbyte.lc <- if(.Platform$OS.type == "windows")
+  "English_United States.28605" else "en_GB.UTF-8"
> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
[1] "English_United States.28605"
> ## Truncation behavior (<-> correct width measurement) for "long"
non-ASCII:
> idx <- c(65313:65338, 65345:65350)
> fwch <- intToUtf8(idx) # full width character string: each has width 2
> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
+           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
c.ch w.ch c.fw w.fw
  64   64   32   64
> stopifnot(unname(ncc) == c(64,64, 32, 64))
> ## nchar.max: 1st line needs an increase of  2  in order to see  1  (in
UTF-$
> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
Error in strtrim(x.lrg, nchar.max - nc) :
  unsupported conversion from 'UTF-8' in codepage 28605
> invisible(lapply(60:66, function(N) str( ch , nchar.max = N))) # "1 is 1"
he$
 chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
 chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."| __truncated__
 chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"| __truncated__
 chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"| __truncated__
 chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."| __truncated__
 chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"| __truncated__
 chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"


This is pretty strange.

Thanks for any help.

Sincerely,
Erin

Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com


On Thu, Mar 19, 2020 at 2:29 AM Tomas Kalibera <tomas.kalibera at gmail.com>
wrote:

> Hi Erin,
>
> this comes from examples in ?str. Could you please try to find a minimal
> example to reproduce on your system based on that? I would look for
> "line needs" in ?str and experiment with reducing the example there
> while still getting the error. Once it is minimal, could you please try
> also on the official build of R on your machine?
>
> Also it would be nice to have a session info. If it works in the
> official build but not your custom build, then one would have to look
> also into how the custom build is done.
>
> Thanks
> Tomas
>
>
> On 3/19/20 8:02 AM, Erin Hodgess wrote:
> > Hello everyone:
> >
> > I have built the latest version of the OpenBLAS on my Windows 10 machine.
> > When I run make distribution in R, everything is fine.
> >
> > However, when I run make check all,  I get the following error:
> >
> > C:\newtimeR\R-3.6.3\src\gnuwin32>make check-all
> > Testing examples for package 'base'
> > Testing examples for package 'tools'
> >    comparing 'tools-Ex.Rout' to 'tools-Ex.Rout.save' ... OK
> > Testing examples for package 'utils'
> > Error: testing 'utils' failed
> > Execution halted
> > make[3]: *** [Makefile.win:29: test-Examples-Base] Error 1
> > make[2]: *** [Makefile.common:185: test-Examples] Error 2
> > make[1]: *** [Makefile.common:171: test-all-basics] Error 1
> > make: *** [Makefile:324: check-all] Error 2
> >
> > And here is the section from the .Rout.fail for utils:
> >
> >> ## Multibyte characters in strings (in multibyte locales):
> >> oloc <- Sys.getlocale("LC_CTYPE")
> >> mbyte.lc <- if(.Platform$OS.type == "windows")
> > +  "English_United States.28605" else "en_GB.UTF-8"
> >> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
> > [1] "English_United States.28605"
> >> ## Truncation behavior (<-> correct width measurement) for "long"
> > non-ASCII:
> >> idx <- c(65313:65338, 65345:65350)
> >> fwch <- intToUtf8(idx) # full width character string: each has width 2
> >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
> >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
> > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
> > c.ch w.ch c.fw w.fw
> >    64   64   32   64
> >> stopifnot(unname(ncc) == c(64,64, 32, 64))
> >> ## nchar.max: 1st line needs an increase of  2  in order to see  1  (in
> > UTF-8!):
> >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
> > Error in strtrim(x.lrg, nchar.max - nc) :
> >    unsupported conversion from 'UTF-8' in codepage 28605
> > Calls: lapply ... FUN -> str -> str.default -> maybe_truncate -> strtrim
> > Execution halted
> >
> > Has anyone run into this before, please?
> >
> > If I run this line-by-line starting at the "idx <-", things are fine.
> >
> > I also compiled R from source without the OpenBLAS, and it was fine.
> >
> > Thanks for any suggestions.
> >
> > Sincerely,
> > Erin
> >
> >
> >
> > Erin Hodgess, PhD
> > mailto: erinm.hodgess at gmail.com
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
>
>

	[[alternative HTML version deleted]]


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Fri Mar 20 10:37:03 2020
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Fri, 20 Mar 2020 10:37:03 +0100
Subject: [R-pkg-devel] Strange leftovers after check by CRAN
In-Reply-To: <dec8e09e387048f6ad595ce85d524c44@umanitoba.ca>
References: <11B4061E-52AE-48F8-9FF4-CEC5D64EC68A@krugs.de>
 <dec8e09e387048f6ad595ce85d524c44@umanitoba.ca>
Message-ID: <02a393ec-b45d-5cd8-30a9-350bf3d08691@gmail.com>

On 3/19/20 6:03 PM, Max Turgeon wrote:
> Is there perhaps a typo in the environment variable name? This line suggests there should be an underscore at the beginning too:
>
> https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R#L6028

Also the correct name is in R Internals, where the variable is documented.

Tomas

>
> Max Turgeon
> Assistant Professor
> Department of Statistics
> Department of Computer Science
> University of Manitoba
> maxturgeon.ca<http://maxturgeon.ca>
>
>
> ________________________________
> From: R-package-devel <r-package-devel-bounces at r-project.org> on behalf of Rainer M Krug <Rainer at krugs.de>
> Sent: March 19, 2020 11:21:08 AM
> To: R Package Devel
> Subject: [R-pkg-devel] Strange leftovers after check by CRAN
>
> Hi
>
> My package dmdScheme gets always one note after submission to CRAN:
>
>
> ...
> * checking for detritus in the temp directory ... NOTE
> Found the following files/directories:
>    ?calibre_4.99.4_tmp_8yyefjbo? ?calibre_4.99.4_tmp_ft15_af5?
>    ?calibre_4.99.4_tmp_jy4e07d6? ?calibre_4.99.4_tmp_oxx_azo2?
>    ?runtime-hornik?
> * DONE
>
> These leftovers are only reported from CRAN, and locally everything is fine. Uwe recommended to set the environmental variable
>
> R_CHECK_THINGS_IN_CHECK_DIR_=true
>
> But this does not change anything, I get the report back
>
> ...
> * checking for detritus in the temp directory ... OK
> * DONE
>
> Any suggestions how I can track down the where these are coming from? Each time my package has to go through a manual check at CRAN?
>
> Thanks,
>
> Rainer
>
>
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>
> Orcid ID: 0000-0002-7490-0066
>
> Department of Evolutionary Biology and Environmental Studies
> University of Z?rich
> Office Y34-J-74
> Winterthurerstrasse 190
> 8075 Z?rich
> Switzerland
>
> Office: +41 (0)44 635 47 64
> Cell:            +41 (0)78 630 66 57
> email:      Rainer.Krug at uzh.ch
>                  Rainer at krugs.de
> Skype:     RMkrug
>
> PGP: 0x0F52F982
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>
> 	[[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Fri Mar 20 12:01:39 2020
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 20 Mar 2020 12:01:39 +0100
Subject: [R-pkg-devel] Errors in make check in Windows 10 with OpenBLAS
In-Reply-To: <CACxE24=RGU-EvdjmoDpEF91POKV1AH8hZd=stdNRt8xr1c0-2g@mail.gmail.com>
References: <CACxE24nsuTOj5oPvC=_R_Lf=1bJCFqFChC=CN48iMFgOQD21DA@mail.gmail.com>
 <5de3f2cc-72af-933e-61fe-a6c1ac74ffae@gmail.com>
 <CACxE24=RGU-EvdjmoDpEF91POKV1AH8hZd=stdNRt8xr1c0-2g@mail.gmail.com>
Message-ID: <24180.41619.299632.396162@stat.math.ethz.ch>

>>>>> Erin Hodgess    on Thu, 19 Mar 2020 22:44:39 -0600 writes:

     > Hi Tomas and others:
     > Here is the session Info.  I also used the str example both without and
     > with changing the locale.

     > sI <- sessionInfo()
    >> str(sI)
     > List of 10
     > $ R.version :List of 14
     > ..$ platform      : chr "x86_64-w64-mingw32"
     > ..$ arch          : chr "x86_64"
     > ..$ os            : chr "mingw32"
     > ..$ system        : chr "x86_64, mingw32"
     > ..$ status        : chr ""
     > ..$ major         : chr "3"
     > ..$ minor         : chr "6.3"
     > ..$ year          : chr "2020"
     > ..$ month         : chr "02"
     > ..$ day           : chr "29"
     > ..$ svn rev       : chr "77875"
     > ..$ language      : chr "R"
     > ..$ version.string: chr "R version 3.6.3 (2020-02-29)"
     > ..$ nickname      : chr "Holding the Windsock"
     > $ platform  : chr "x86_64-w64-mingw32/x64 (64-bit)"
     > $ locale    : chr "LC_COLLATE=English_United
     > States.1252;LC_CTYPE=English_United States.1252;LC_MONETARY=English_United
     > States.125"| __truncated__
     > $ running   : chr "Windows 10 x64 (build 18362)"
     > $ RNGkind   : chr [1:3] "Mersenne-Twister" "Inversion" "Rejection"
     > $ basePkgs  : chr [1:7] "stats" "graphics" "grDevices" "utils" ...
     > $ loadedOnly:List of 1
     > ..$ compiler:List of 9
     > .. ..$ Package    : chr "compiler"
     > .. ..$ Version    : chr "3.6.3"
     > .. ..$ Priority   : chr "base"
     > .. ..$ Title      : chr "The R Compiler Package"
     > .. ..$ Author     : chr "Luke Tierney <luke-tierney at uiowa.edu>"
     > .. ..$ Maintainer : chr "R Core Team <R-core at r-project.org>"
     > .. ..$ Description: chr "Byte code compiler for R."
     > .. ..$ License    : chr "Part of R 3.6.3"
     > .. ..$ Built      : chr "R 3.6.3; ; 2020-03-20 04:29:00 UTC; windows"
     > .. ..- attr(*, "class")= chr "packageDescription"
     > .. ..- attr(*, "file")= chr
     > "c:/newtimeR/R-3.6.3/library/compiler/Meta/package.rds"
     > $ matprod   : chr "default"
     > $ BLAS      : chr ""
     > $ LAPACK    : chr ""
     > - attr(*, "class")= chr "sessionInfo"


     > Running the str example WITHOUT changing the locale:
    >> ## Truncation behavior (<-> correct width measurement) for "long"
     > non-ASCII:
    >> idx <- c(65313:65338, 65345:65350)
    >> fwch <- intToUtf8(idx) # full width character string: each has width 2
    >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
    >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
     > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
     > c.ch w.ch c.fw w.fw
     > 64   64   32   64
    >> stopifnot(unname(ncc) == c(64,64, 32, 64))
    >> ## nchar.max: 1st line needs an increase of  2  in order to see  1  (in
     > UTF-$
    >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
     > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+"| __truncated__
     > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+F"| __truncated__
     > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF"| __truncated__
     > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF2"| __truncated__
     > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26"| __truncated__
     > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26>"| __truncated__
     > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26><"| __truncated__
    >> invisible(lapply(60:66, function(N) str( ch , nchar.max = N))) # "1 is 1"
     > he$
     > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
     > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."| __truncated__
     > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"| __truncated__
     > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"| __truncated__
     > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."| __truncated__
     > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"| __truncated__
     > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
    >> 

     > Running the str example WITH changing the locale:

     > oloc <- Sys.getlocale("LC_CTYPE")
    >> mbyte.lc <- if(.Platform$OS.type == "windows")
     > +  "English_United States.28605" else "en_GB.UTF-8"
    >> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
     > [1] "English_United States.28605"
    >> ## Truncation behavior (<-> correct width measurement) for "long"
     > non-ASCII:
    >> idx <- c(65313:65338, 65345:65350)
    >> fwch <- intToUtf8(idx) # full width character string: each has width 2
    >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
    >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
     > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
     > c.ch w.ch c.fw w.fw
     > 64   64   32   64
    >> stopifnot(unname(ncc) == c(64,64, 32, 64))
    >> ## nchar.max: 1st line needs an increase of  2  in order to see  1  (in
     > UTF-$
    >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
     > Error in strtrim(x.lrg, nchar.max - nc) :
     > unsupported conversion from 'UTF-8' in codepage 28605
    >> invisible(lapply(60:66, function(N) str( ch , nchar.max = N))) # "1 is 1"
     > he$
     > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
     > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."| __truncated__
     > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"| __truncated__
     > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"| __truncated__
     > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."| __truncated__
     > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"| __truncated__
     > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"

     > This is pretty strange.

It is strange indeed  that  strtrim() fails in this situation.

>From what you wrote previously, this only happens when you link
with OpenBLAS but not when you use R's own BLAS.
Are you sure that that was the only difference, but not rather
the difference in the locales you used in your two versions of R
on Windows?

Martin

     > Thanks for any help.

     > Sincerely,
     > Erin

     > Erin Hodgess, PhD
     > mailto: erinm.hodgess at gmail.com


     > On Thu, Mar 19, 2020 at 2:29 AM Tomas Kalibera <tomas.kalibera at gmail.com>
     > wrote:

    >> Hi Erin,
    >> 
    >> this comes from examples in ?str. Could you please try to find a minimal
    >> example to reproduce on your system based on that? I would look for
    >> "line needs" in ?str and experiment with reducing the example there
    >> while still getting the error. Once it is minimal, could you please try
    >> also on the official build of R on your machine?
    >> 
    >> Also it would be nice to have a session info. If it works in the
    >> official build but not your custom build, then one would have to look
    >> also into how the custom build is done.
    >> 
    >> Thanks
    >> Tomas
    >> 
    >> 
    >> On 3/19/20 8:02 AM, Erin Hodgess wrote:
    >> > Hello everyone:
    >> >
    >> > I have built the latest version of the OpenBLAS on my Windows 10 machine.
    >> > When I run make distribution in R, everything is fine.
    >> >
    >> > However, when I run make check all,  I get the following error:
    >> >
    >> > C:\newtimeR\R-3.6.3\src\gnuwin32>make check-all
    >> > Testing examples for package 'base'
    >> > Testing examples for package 'tools'
    >> >    comparing 'tools-Ex.Rout' to 'tools-Ex.Rout.save' ... OK
    >> > Testing examples for package 'utils'
    >> > Error: testing 'utils' failed
    >> > Execution halted
    >> > make[3]: *** [Makefile.win:29: test-Examples-Base] Error 1
    >> > make[2]: *** [Makefile.common:185: test-Examples] Error 2
    >> > make[1]: *** [Makefile.common:171: test-all-basics] Error 1
    >> > make: *** [Makefile:324: check-all] Error 2
    >> >
    >> > And here is the section from the .Rout.fail for utils:
    >> >
    >> >> ## Multibyte characters in strings (in multibyte locales):
    >> >> oloc <- Sys.getlocale("LC_CTYPE")
    >> >> mbyte.lc <- if(.Platform$OS.type == "windows")
    >> > +  "English_United States.28605" else "en_GB.UTF-8"
    >> >> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
    >> > [1] "English_United States.28605"
    >> >> ## Truncation behavior (<-> correct width measurement) for "long"
    >> > non-ASCII:
    >> >> idx <- c(65313:65338, 65345:65350)
    >> >> fwch <- intToUtf8(idx) # full width character string: each has width 2
    >> >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
    >> >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
    >> > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
    >> > c.ch w.ch c.fw w.fw
    >> >    64   64   32   64
    >> >> stopifnot(unname(ncc) == c(64,64, 32, 64))
    >> >> ## nchar.max: 1st line needs an increase of  2  in order to see  1  (in
    >> > UTF-8!):
    >> >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
    >> > Error in strtrim(x.lrg, nchar.max - nc) :
    >> >    unsupported conversion from 'UTF-8' in codepage 28605
    >> > Calls: lapply ... FUN -> str -> str.default -> maybe_truncate -> strtrim
    >> > Execution halted
    >> >
    >> > Has anyone run into this before, please?
    >> >
    >> > If I run this line-by-line starting at the "idx <-", things are fine.
    >> >
    >> > I also compiled R from source without the OpenBLAS, and it was fine.
    >> >
    >> > Thanks for any suggestions.
    >> >
    >> > Sincerely,
    >> > Erin
    >> >
    >> >
    >> >
    >> > Erin Hodgess, PhD
    >> > mailto: erinm.hodgess at gmail.com


From R@|ner @end|ng |rom krug@@de  Fri Mar 20 12:40:00 2020
From: R@|ner @end|ng |rom krug@@de (Rainer M Krug)
Date: Fri, 20 Mar 2020 12:40:00 +0100
Subject: [R-pkg-devel] Strange leftovers after check by CRAN
In-Reply-To: <02a393ec-b45d-5cd8-30a9-350bf3d08691@gmail.com>
References: <11B4061E-52AE-48F8-9FF4-CEC5D64EC68A@krugs.de>
 <dec8e09e387048f6ad595ce85d524c44@umanitoba.ca>
 <02a393ec-b45d-5cd8-30a9-350bf3d08691@gmail.com>
Message-ID: <3070FF19-863C-43EF-A4CD-AAA1AE6EA3BF@krugs.de>

That?s good to know - thanks.

As I am checking with ?as-cran, these were all on anyway.

Cheers,

Rainer


> On 20 Mar 2020, at 10:37, Tomas Kalibera <tomas.kalibera at gmail.com> wrote:
> 
> On 3/19/20 6:03 PM, Max Turgeon wrote:
>> Is there perhaps a typo in the environment variable name? This line suggests there should be an underscore at the beginning too:
>> 
>> https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R#L6028 <https://github.com/wch/r-source/blob/trunk/src/library/tools/R/check.R#L6028>
> Also the correct name is in R Internals, where the variable is documented.
> 
> Tomas
> 
>> 
>> Max Turgeon
>> Assistant Professor
>> Department of Statistics
>> Department of Computer Science
>> University of Manitoba
>> maxturgeon.ca<http://maxturgeon.ca> <http://maxturgeon.ca/>
>> 
>> 
>> ________________________________
>> From: R-package-devel <r-package-devel-bounces at r-project.org> <mailto:r-package-devel-bounces at r-project.org> on behalf of Rainer M Krug <Rainer at krugs.de> <mailto:Rainer at krugs.de>
>> Sent: March 19, 2020 11:21:08 AM
>> To: R Package Devel
>> Subject: [R-pkg-devel] Strange leftovers after check by CRAN
>> 
>> Hi
>> 
>> My package dmdScheme gets always one note after submission to CRAN:
>> 
>> 
>> ...
>> * checking for detritus in the temp directory ... NOTE
>> Found the following files/directories:
>>   ?calibre_4.99.4_tmp_8yyefjbo? ?calibre_4.99.4_tmp_ft15_af5?
>>   ?calibre_4.99.4_tmp_jy4e07d6? ?calibre_4.99.4_tmp_oxx_azo2?
>>   ?runtime-hornik?
>> * DONE
>> 
>> These leftovers are only reported from CRAN, and locally everything is fine. Uwe recommended to set the environmental variable
>> 
>> R_CHECK_THINGS_IN_CHECK_DIR_=true
>> 
>> But this does not change anything, I get the report back
>> 
>> ...
>> * checking for detritus in the temp directory ... OK
>> * DONE
>> 
>> Any suggestions how I can track down the where these are coming from? Each time my package has to go through a manual check at CRAN?
>> 
>> Thanks,
>> 
>> Rainer
>> 
>> 
>> --
>> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)
>> 
>> Orcid ID: 0000-0002-7490-0066
>> 
>> Department of Evolutionary Biology and Environmental Studies
>> University of Z?rich
>> Office Y34-J-74
>> Winterthurerstrasse 190
>> 8075 Z?rich
>> Switzerland
>> 
>> Office: +41 (0)44 635 47 64
>> Cell:            +41 (0)78 630 66 57
>> email:      Rainer.Krug at uzh.ch <mailto:Rainer.Krug at uzh.ch>
>>                 Rainer at krugs.de <mailto:Rainer at krugs.de>
>> Skype:     RMkrug
>> 
>> PGP: 0x0F52F982
>> 
>> ______________________________________________
>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> 
>> 
>> ______________________________________________
>> R-package-devel at r-project.org <mailto:R-package-devel at r-project.org> mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> 

--
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation Biology, UCT), Dipl. Phys. (Germany)

Orcid ID: 0000-0002-7490-0066

Department of Evolutionary Biology and Environmental Studies
University of Z?rich
Office Y34-J-74
Winterthurerstrasse 190
8075 Z?rich
Switzerland

Office:	+41 (0)44 635 47 64
Cell:       	+41 (0)78 630 66 57
email:      Rainer.Krug at uzh.ch
		Rainer at krugs.de
Skype:     RMkrug

PGP: 0x0F52F982




	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Fri Mar 20 14:35:37 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Fri, 20 Mar 2020 07:35:37 -0600
Subject: [R-pkg-devel] Errors in make check in Windows 10 with OpenBLAS
In-Reply-To: <24180.41619.299632.396162@stat.math.ethz.ch>
References: <CACxE24nsuTOj5oPvC=_R_Lf=1bJCFqFChC=CN48iMFgOQD21DA@mail.gmail.com>
 <5de3f2cc-72af-933e-61fe-a6c1ac74ffae@gmail.com>
 <CACxE24=RGU-EvdjmoDpEF91POKV1AH8hZd=stdNRt8xr1c0-2g@mail.gmail.com>
 <24180.41619.299632.396162@stat.math.ethz.ch>
Message-ID: <CACxE24mb0UZfdvozscoNGA=Q2bMZ=wjoq56RNLERh5oLoZXLCQ@mail.gmail.com>

I was wondering if there is a way to either skip the utilities check and
continuing, in order to test the other packages, please.

Thanks!


On Fri, Mar 20, 2020 at 5:01 AM Martin Maechler <maechler at stat.math.ethz.ch>
wrote:

> >>>>> Erin Hodgess    on Thu, 19 Mar 2020 22:44:39 -0600 writes:
>
>      > Hi Tomas and others:
>      > Here is the session Info.  I also used the str example both without
> and
>      > with changing the locale.
>
>      > sI <- sessionInfo()
>     >> str(sI)
>      > List of 10
>      > $ R.version :List of 14
>      > ..$ platform      : chr "x86_64-w64-mingw32"
>      > ..$ arch          : chr "x86_64"
>      > ..$ os            : chr "mingw32"
>      > ..$ system        : chr "x86_64, mingw32"
>      > ..$ status        : chr ""
>      > ..$ major         : chr "3"
>      > ..$ minor         : chr "6.3"
>      > ..$ year          : chr "2020"
>      > ..$ month         : chr "02"
>      > ..$ day           : chr "29"
>      > ..$ svn rev       : chr "77875"
>      > ..$ language      : chr "R"
>      > ..$ version.string: chr "R version 3.6.3 (2020-02-29)"
>      > ..$ nickname      : chr "Holding the Windsock"
>      > $ platform  : chr "x86_64-w64-mingw32/x64 (64-bit)"
>      > $ locale    : chr "LC_COLLATE=English_United
>      > States.1252;LC_CTYPE=English_United
> States.1252;LC_MONETARY=English_United
>      > States.125"| __truncated__
>      > $ running   : chr "Windows 10 x64 (build 18362)"
>      > $ RNGkind   : chr [1:3] "Mersenne-Twister" "Inversion" "Rejection"
>      > $ basePkgs  : chr [1:7] "stats" "graphics" "grDevices" "utils" ...
>      > $ loadedOnly:List of 1
>      > ..$ compiler:List of 9
>      > .. ..$ Package    : chr "compiler"
>      > .. ..$ Version    : chr "3.6.3"
>      > .. ..$ Priority   : chr "base"
>      > .. ..$ Title      : chr "The R Compiler Package"
>      > .. ..$ Author     : chr "Luke Tierney <luke-tierney at uiowa.edu>"
>      > .. ..$ Maintainer : chr "R Core Team <R-core at r-project.org>"
>      > .. ..$ Description: chr "Byte code compiler for R."
>      > .. ..$ License    : chr "Part of R 3.6.3"
>      > .. ..$ Built      : chr "R 3.6.3; ; 2020-03-20 04:29:00 UTC;
> windows"
>      > .. ..- attr(*, "class")= chr "packageDescription"
>      > .. ..- attr(*, "file")= chr
>      > "c:/newtimeR/R-3.6.3/library/compiler/Meta/package.rds"
>      > $ matprod   : chr "default"
>      > $ BLAS      : chr ""
>      > $ LAPACK    : chr ""
>      > - attr(*, "class")= chr "sessionInfo"
>
>
>      > Running the str example WITHOUT changing the locale:
>     >> ## Truncation behavior (<-> correct width measurement) for "long"
>      > non-ASCII:
>     >> idx <- c(65313:65338, 65345:65350)
>     >> fwch <- intToUtf8(idx) # full width character string: each has
> width 2
>     >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>     >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>      > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>      > c.ch w.ch c.fw w.fw
>      > 64   64   32   64
>     >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>     >> ## nchar.max: 1st line needs an increase of  2  in order to see  1
> (in
>      > UTF-$
>     >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+"| __truncated__
>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+F"| __truncated__
>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF"| __truncated__
>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF2"| __truncated__
>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26"| __truncated__
>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26>"|
> __truncated__
>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26><"|
> __truncated__
>     >> invisible(lapply(60:66, function(N) str( ch , nchar.max = N))) # "1
> is 1"
>      > he$
>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."| __truncated__
>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"| __truncated__
>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"| __truncated__
>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."| __truncated__
>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"|
> __truncated__
>      > chr
> "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>     >>
>
>      > Running the str example WITH changing the locale:
>
>      > oloc <- Sys.getlocale("LC_CTYPE")
>     >> mbyte.lc <- if(.Platform$OS.type == "windows")
>      > +  "English_United States.28605" else "en_GB.UTF-8"
>     >> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
>      > [1] "English_United States.28605"
>     >> ## Truncation behavior (<-> correct width measurement) for "long"
>      > non-ASCII:
>     >> idx <- c(65313:65338, 65345:65350)
>     >> fwch <- intToUtf8(idx) # full width character string: each has
> width 2
>     >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>     >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>      > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>      > c.ch w.ch c.fw w.fw
>      > 64   64   32   64
>     >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>     >> ## nchar.max: 1st line needs an increase of  2  in order to see  1
> (in
>      > UTF-$
>     >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>      > Error in strtrim(x.lrg, nchar.max - nc) :
>      > unsupported conversion from 'UTF-8' in codepage 28605
>     >> invisible(lapply(60:66, function(N) str( ch , nchar.max = N))) # "1
> is 1"
>      > he$
>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."| __truncated__
>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"| __truncated__
>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"| __truncated__
>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."| __truncated__
>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"|
> __truncated__
>      > chr
> "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>
>      > This is pretty strange.
>
> It is strange indeed  that  strtrim() fails in this situation.
>
> From what you wrote previously, this only happens when you link
> with OpenBLAS but not when you use R's own BLAS.
> Are you sure that that was the only difference, but not rather
> the difference in the locales you used in your two versions of R
> on Windows?
>
> Martin
>
>      > Thanks for any help.
>
>      > Sincerely,
>      > Erin
>
>      > Erin Hodgess, PhD
>      > mailto: erinm.hodgess at gmail.com
>
>
>      > On Thu, Mar 19, 2020 at 2:29 AM Tomas Kalibera <
> tomas.kalibera at gmail.com>
>      > wrote:
>
>     >> Hi Erin,
>     >>
>     >> this comes from examples in ?str. Could you please try to find a
> minimal
>     >> example to reproduce on your system based on that? I would look for
>     >> "line needs" in ?str and experiment with reducing the example there
>     >> while still getting the error. Once it is minimal, could you please
> try
>     >> also on the official build of R on your machine?
>     >>
>     >> Also it would be nice to have a session info. If it works in the
>     >> official build but not your custom build, then one would have to
> look
>     >> also into how the custom build is done.
>     >>
>     >> Thanks
>     >> Tomas
>     >>
>     >>
>     >> On 3/19/20 8:02 AM, Erin Hodgess wrote:
>     >> > Hello everyone:
>     >> >
>     >> > I have built the latest version of the OpenBLAS on my Windows 10
> machine.
>     >> > When I run make distribution in R, everything is fine.
>     >> >
>     >> > However, when I run make check all,  I get the following error:
>     >> >
>     >> > C:\newtimeR\R-3.6.3\src\gnuwin32>make check-all
>     >> > Testing examples for package 'base'
>     >> > Testing examples for package 'tools'
>     >> >    comparing 'tools-Ex.Rout' to 'tools-Ex.Rout.save' ... OK
>     >> > Testing examples for package 'utils'
>     >> > Error: testing 'utils' failed
>     >> > Execution halted
>     >> > make[3]: *** [Makefile.win:29: test-Examples-Base] Error 1
>     >> > make[2]: *** [Makefile.common:185: test-Examples] Error 2
>     >> > make[1]: *** [Makefile.common:171: test-all-basics] Error 1
>     >> > make: *** [Makefile:324: check-all] Error 2
>     >> >
>     >> > And here is the section from the .Rout.fail for utils:
>     >> >
>     >> >> ## Multibyte characters in strings (in multibyte locales):
>     >> >> oloc <- Sys.getlocale("LC_CTYPE")
>     >> >> mbyte.lc <- if(.Platform$OS.type == "windows")
>     >> > +  "English_United States.28605" else "en_GB.UTF-8"
>     >> >> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
>     >> > [1] "English_United States.28605"
>     >> >> ## Truncation behavior (<-> correct width measurement) for "long"
>     >> > non-ASCII:
>     >> >> idx <- c(65313:65338, 65345:65350)
>     >> >> fwch <- intToUtf8(idx) # full width character string: each has
> width 2
>     >> >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>     >> >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>     >> > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>     >> > c.ch w.ch c.fw w.fw
>     >> >    64   64   32   64
>     >> >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>     >> >> ## nchar.max: 1st line needs an increase of  2  in order to see
> 1  (in
>     >> > UTF-8!):
>     >> >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>     >> > Error in strtrim(x.lrg, nchar.max - nc) :
>     >> >    unsupported conversion from 'UTF-8' in codepage 28605
>     >> > Calls: lapply ... FUN -> str -> str.default -> maybe_truncate ->
> strtrim
>     >> > Execution halted
>     >> >
>     >> > Has anyone run into this before, please?
>     >> >
>     >> > If I run this line-by-line starting at the "idx <-", things are
> fine.
>     >> >
>     >> > I also compiled R from source without the OpenBLAS, and it was
> fine.
>     >> >
>     >> > Thanks for any suggestions.
>     >> >
>     >> > Sincerely,
>     >> > Erin
>     >> >
>     >> >
>     >> >
>     >> > Erin Hodgess, PhD
>     >> > mailto: erinm.hodgess at gmail.com
>
> --
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Fri Mar 20 15:03:26 2020
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Fri, 20 Mar 2020 15:03:26 +0100
Subject: [R-pkg-devel] Errors in make check in Windows 10 with OpenBLAS
In-Reply-To: <CACxE24mb0UZfdvozscoNGA=Q2bMZ=wjoq56RNLERh5oLoZXLCQ@mail.gmail.com>
References: <CACxE24nsuTOj5oPvC=_R_Lf=1bJCFqFChC=CN48iMFgOQD21DA@mail.gmail.com>
 <5de3f2cc-72af-933e-61fe-a6c1ac74ffae@gmail.com>
 <CACxE24=RGU-EvdjmoDpEF91POKV1AH8hZd=stdNRt8xr1c0-2g@mail.gmail.com>
 <24180.41619.299632.396162@stat.math.ethz.ch>
 <CACxE24mb0UZfdvozscoNGA=Q2bMZ=wjoq56RNLERh5oLoZXLCQ@mail.gmail.com>
Message-ID: <6845f803-9435-e530-79c6-70a1ffbd54f3@gmail.com>

Hi Erin,

when you are building from sources, you can always uncomment the example 
in str.Rd. But it would be good first to find out why it is failing on 
your system/build.

Please run the example in Rgui of the official R 3.6.3 build on your 
machine. Does it work there?

Please run the following commands in Rgui of the official R 3.6.3 build 
on the machine and on your custom build. What do you get?

Sys.getlocale()
enc2native("\uff21")
enc2native("\u4e2d")
Sys.setlocale("LC_CTYPE", "English_United States.28605")
enc2native("\uff21")
enc2native("\u4e2d")
extSoftVersion()[c("iconv","BLAS")]

Thanks,
Tomas

On 3/20/20 2:35 PM, Erin Hodgess wrote:
> I was wondering if there is a way to either skip the utilities check 
> and continuing, in order to test the other packages, please.
>
> Thanks!
>
>
> On Fri, Mar 20, 2020 at 5:01 AM Martin Maechler 
> <maechler at stat.math.ethz.ch <mailto:maechler at stat.math.ethz.ch>> wrote:
>
>     >>>>> Erin Hodgess? ? on Thu, 19 Mar 2020 22:44:39 -0600 writes:
>
>     ? ? ?> Hi Tomas and others:
>     ? ? ?> Here is the session Info.? I also used the str example both
>     without and
>     ? ? ?> with changing the locale.
>
>     ? ? ?> sI <- sessionInfo()
>     ? ? >> str(sI)
>     ? ? ?> List of 10
>     ? ? ?> $ R.version :List of 14
>     ? ? ?> ..$ platform? ? ? : chr "x86_64-w64-mingw32"
>     ? ? ?> ..$ arch? ? ? ? ? : chr "x86_64"
>     ? ? ?> ..$ os? ? ? ? ? ? : chr "mingw32"
>     ? ? ?> ..$ system? ? ? ? : chr "x86_64, mingw32"
>     ? ? ?> ..$ status? ? ? ? : chr ""
>     ? ? ?> ..$ major? ? ? ? ?: chr "3"
>     ? ? ?> ..$ minor? ? ? ? ?: chr "6.3"
>     ? ? ?> ..$ year? ? ? ? ? : chr "2020"
>     ? ? ?> ..$ month? ? ? ? ?: chr "02"
>     ? ? ?> ..$ day? ? ? ? ? ?: chr "29"
>     ? ? ?> ..$ svn rev? ? ? ?: chr "77875"
>     ? ? ?> ..$ language? ? ? : chr "R"
>     ? ? ?> ..$ version.string: chr "R version 3.6.3 (2020-02-29)"
>     ? ? ?> ..$ nickname? ? ? : chr "Holding the Windsock"
>     ? ? ?> $ platform? : chr "x86_64-w64-mingw32/x64 (64-bit)"
>     ? ? ?> $ locale? ? : chr "LC_COLLATE=English_United
>     ? ? ?> States.1252;LC_CTYPE=English_United
>     States.1252;LC_MONETARY=English_United
>     ? ? ?> States.125"| __truncated__
>     ? ? ?> $ running? ?: chr "Windows 10 x64 (build 18362)"
>     ? ? ?> $ RNGkind? ?: chr [1:3] "Mersenne-Twister" "Inversion"
>     "Rejection"
>     ? ? ?> $ basePkgs? : chr [1:7] "stats" "graphics" "grDevices"
>     "utils" ...
>     ? ? ?> $ loadedOnly:List of 1
>     ? ? ?> ..$ compiler:List of 9
>     ? ? ?> .. ..$ Package? ? : chr "compiler"
>     ? ? ?> .. ..$ Version? ? : chr "3.6.3"
>     ? ? ?> .. ..$ Priority? ?: chr "base"
>     ? ? ?> .. ..$ Title? ? ? : chr "The R Compiler Package"
>     ? ? ?> .. ..$ Author? ? ?: chr "Luke Tierney
>     <luke-tierney at uiowa.edu <mailto:luke-tierney at uiowa.edu>>"
>     ? ? ?> .. ..$ Maintainer : chr "R Core Team <R-core at r-project.org
>     <mailto:R-core at r-project.org>>"
>     ? ? ?> .. ..$ Description: chr "Byte code compiler for R."
>     ? ? ?> .. ..$ License? ? : chr "Part of R 3.6.3"
>     ? ? ?> .. ..$ Built? ? ? : chr "R 3.6.3; ; 2020-03-20 04:29:00
>     UTC; windows"
>     ? ? ?> .. ..- attr(*, "class")= chr "packageDescription"
>     ? ? ?> .. ..- attr(*, "file")= chr
>     ? ? ?> "c:/newtimeR/R-3.6.3/library/compiler/Meta/package.rds"
>     ? ? ?> $ matprod? ?: chr "default"
>     ? ? ?> $ BLAS? ? ? : chr ""
>     ? ? ?> $ LAPACK? ? : chr ""
>     ? ? ?> - attr(*, "class")= chr "sessionInfo"
>
>
>     ? ? ?> Running the str example WITHOUT changing the locale:
>     ? ? >> ## Truncation behavior (<-> correct width measurement) for
>     "long"
>     ? ? ?> non-ASCII:
>     ? ? >> idx <- c(65313:65338, 65345:65350)
>     ? ? >> fwch <- intToUtf8(idx) # full width character string: each
>     has width 2
>     ? ? >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>     ? ? >> (ncc <- c(c.ch <http://c.ch> = nchar(ch), w.ch
>     <http://w.ch> = nchar(ch,? ?"w"),
>     ? ? ?> +? ? ? ? ? ?c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>     ? ? ?> c.ch <http://c.ch> w.ch <http://w.ch> c.fw w.fw
>     ? ? ?> 64? ?64? ?32? ?64
>     ? ? >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>     ? ? >> ## nchar.max: 1st line needs an increase of? 2 in order to
>     see? 1? (in
>     ? ? ?> UTF-$
>     ? ? >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>     ? ? ?> chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+"|
>     __truncated__
>     ? ? ?> chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+F"|
>     __truncated__
>     ? ? ?> chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF"|
>     __truncated__
>     ? ? ?> chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF2"|
>     __truncated__
>     ? ? ?> chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26"|
>     __truncated__
>     ? ? ?> chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26>"|
>     __truncated__
>     ? ? ?> chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26><"|
>     __truncated__
>     ? ? >> invisible(lapply(60:66, function(N) str( ch , nchar.max =
>     N))) # "1 is 1"
>     ? ? ?> he$
>     ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"|
>     __truncated__
>     ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."|
>     __truncated__
>     ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"|
>     __truncated__
>     ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"|
>     __truncated__
>     ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."|
>     __truncated__
>     ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"|
>     __truncated__
>     ? ? ?> chr
>     "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>     ? ? >>
>
>     ? ? ?> Running the str example WITH changing the locale:
>
>     ? ? ?> oloc <- Sys.getlocale("LC_CTYPE")
>     ? ? >> mbyte.lc <http://mbyte.lc> <- if(.Platform$OS.type ==
>     "windows")
>     ? ? ?> +? "English_United States.28605" else "en_GB.UTF-8"
>     ? ? >> try(Sys.setlocale("LC_CTYPE", mbyte.lc <http://mbyte.lc>))
>     ? ? ?> [1] "English_United States.28605"
>     ? ? >> ## Truncation behavior (<-> correct width measurement) for
>     "long"
>     ? ? ?> non-ASCII:
>     ? ? >> idx <- c(65313:65338, 65345:65350)
>     ? ? >> fwch <- intToUtf8(idx) # full width character string: each
>     has width 2
>     ? ? >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>     ? ? >> (ncc <- c(c.ch <http://c.ch> = nchar(ch), w.ch
>     <http://w.ch> = nchar(ch,? ?"w"),
>     ? ? ?> +? ? ? ? ? ?c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>     ? ? ?> c.ch <http://c.ch> w.ch <http://w.ch> c.fw w.fw
>     ? ? ?> 64? ?64? ?32? ?64
>     ? ? >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>     ? ? >> ## nchar.max: 1st line needs an increase of? 2 in order to
>     see? 1? (in
>     ? ? ?> UTF-$
>     ? ? >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>     ? ? ?> Error in strtrim(x.lrg, nchar.max - nc) :
>     ? ? ?> unsupported conversion from 'UTF-8' in codepage 28605
>     ? ? >> invisible(lapply(60:66, function(N) str( ch , nchar.max =
>     N))) # "1 is 1"
>     ? ? ?> he$
>     ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"|
>     __truncated__
>     ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."|
>     __truncated__
>     ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"|
>     __truncated__
>     ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"|
>     __truncated__
>     ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."|
>     __truncated__
>     ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"|
>     __truncated__
>     ? ? ?> chr
>     "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>
>     ? ? ?> This is pretty strange.
>
>     It is strange indeed? that? strtrim() fails in this situation.
>
>     From what you wrote previously, this only happens when you link
>     with OpenBLAS but not when you use R's own BLAS.
>     Are you sure that that was the only difference, but not rather
>     the difference in the locales you used in your two versions of R
>     on Windows?
>
>     Martin
>
>     ? ? ?> Thanks for any help.
>
>     ? ? ?> Sincerely,
>     ? ? ?> Erin
>
>     ? ? ?> Erin Hodgess, PhD
>     ? ? ?> mailto: erinm.hodgess at gmail.com
>     <mailto:erinm.hodgess at gmail.com>
>
>
>     ? ? ?> On Thu, Mar 19, 2020 at 2:29 AM Tomas Kalibera
>     <tomas.kalibera at gmail.com <mailto:tomas.kalibera at gmail.com>>
>     ? ? ?> wrote:
>
>     ? ? >> Hi Erin,
>     ? ? >>
>     ? ? >> this comes from examples in ?str. Could you please try to
>     find a minimal
>     ? ? >> example to reproduce on your system based on that? I would
>     look for
>     ? ? >> "line needs" in ?str and experiment with reducing the
>     example there
>     ? ? >> while still getting the error. Once it is minimal, could
>     you please try
>     ? ? >> also on the official build of R on your machine?
>     ? ? >>
>     ? ? >> Also it would be nice to have a session info. If it works
>     in the
>     ? ? >> official build but not your custom build, then one would
>     have to look
>     ? ? >> also into how the custom build is done.
>     ? ? >>
>     ? ? >> Thanks
>     ? ? >> Tomas
>     ? ? >>
>     ? ? >>
>     ? ? >> On 3/19/20 8:02 AM, Erin Hodgess wrote:
>     ? ? >> > Hello everyone:
>     ? ? >> >
>     ? ? >> > I have built the latest version of the OpenBLAS on my
>     Windows 10 machine.
>     ? ? >> > When I run make distribution in R, everything is fine.
>     ? ? >> >
>     ? ? >> > However, when I run make check all,? I get the following
>     error:
>     ? ? >> >
>     ? ? >> > C:\newtimeR\R-3.6.3\src\gnuwin32>make check-all
>     ? ? >> > Testing examples for package 'base'
>     ? ? >> > Testing examples for package 'tools'
>     ? ? >> >? ? comparing 'tools-Ex.Rout' to 'tools-Ex.Rout.save' ... OK
>     ? ? >> > Testing examples for package 'utils'
>     ? ? >> > Error: testing 'utils' failed
>     ? ? >> > Execution halted
>     ? ? >> > make[3]: *** [Makefile.win:29: test-Examples-Base] Error 1
>     ? ? >> > make[2]: *** [Makefile.common:185: test-Examples] Error 2
>     ? ? >> > make[1]: *** [Makefile.common:171: test-all-basics] Error 1
>     ? ? >> > make: *** [Makefile:324: check-all] Error 2
>     ? ? >> >
>     ? ? >> > And here is the section from the .Rout.fail for utils:
>     ? ? >> >
>     ? ? >> >> ## Multibyte characters in strings (in multibyte locales):
>     ? ? >> >> oloc <- Sys.getlocale("LC_CTYPE")
>     ? ? >> >> mbyte.lc <http://mbyte.lc> <- if(.Platform$OS.type ==
>     "windows")
>     ? ? >> > +? "English_United States.28605" else "en_GB.UTF-8"
>     ? ? >> >> try(Sys.setlocale("LC_CTYPE", mbyte.lc <http://mbyte.lc>))
>     ? ? >> > [1] "English_United States.28605"
>     ? ? >> >> ## Truncation behavior (<-> correct width measurement)
>     for "long"
>     ? ? >> > non-ASCII:
>     ? ? >> >> idx <- c(65313:65338, 65345:65350)
>     ? ? >> >> fwch <- intToUtf8(idx) # full width character string:
>     each has width 2
>     ? ? >> >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>     ? ? >> >> (ncc <- c(c.ch <http://c.ch> = nchar(ch), w.ch
>     <http://w.ch> = nchar(ch,? ?"w"),
>     ? ? >> > +? ? ? ? ? ?c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>     ? ? >> > c.ch <http://c.ch> w.ch <http://w.ch> c.fw w.fw
>     ? ? >> >? ? 64? ?64? ?32? ?64
>     ? ? >> >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>     ? ? >> >> ## nchar.max: 1st line needs an increase of? 2? in order
>     to see? 1? (in
>     ? ? >> > UTF-8!):
>     ? ? >> >> invisible(lapply(60:66, function(N) str(fwch, nchar.max
>     = N)))
>     ? ? >> > Error in strtrim(x.lrg, nchar.max - nc) :
>     ? ? >> >? ? unsupported conversion from 'UTF-8' in codepage 28605
>     ? ? >> > Calls: lapply ... FUN -> str -> str.default ->
>     maybe_truncate -> strtrim
>     ? ? >> > Execution halted
>     ? ? >> >
>     ? ? >> > Has anyone run into this before, please?
>     ? ? >> >
>     ? ? >> > If I run this line-by-line starting at the "idx <-",
>     things are fine.
>     ? ? >> >
>     ? ? >> > I also compiled R from source without the OpenBLAS, and
>     it was fine.
>     ? ? >> >
>     ? ? >> > Thanks for any suggestions.
>     ? ? >> >
>     ? ? >> > Sincerely,
>     ? ? >> > Erin
>     ? ? >> >
>     ? ? >> >
>     ? ? >> >
>     ? ? >> > Erin Hodgess, PhD
>     ? ? >> > mailto: erinm.hodgess at gmail.com
>     <mailto:erinm.hodgess at gmail.com>
>
> -- 
> Erin Hodgess, PhD
> mailto: erinm.hodgess at gmail.com <mailto:erinm.hodgess at gmail.com>



	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Fri Mar 20 15:04:36 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Fri, 20 Mar 2020 08:04:36 -0600
Subject: [R-pkg-devel] Errors in make check in Windows 10 with OpenBLAS
In-Reply-To: <6845f803-9435-e530-79c6-70a1ffbd54f3@gmail.com>
References: <CACxE24nsuTOj5oPvC=_R_Lf=1bJCFqFChC=CN48iMFgOQD21DA@mail.gmail.com>
 <5de3f2cc-72af-933e-61fe-a6c1ac74ffae@gmail.com>
 <CACxE24=RGU-EvdjmoDpEF91POKV1AH8hZd=stdNRt8xr1c0-2g@mail.gmail.com>
 <24180.41619.299632.396162@stat.math.ethz.ch>
 <CACxE24mb0UZfdvozscoNGA=Q2bMZ=wjoq56RNLERh5oLoZXLCQ@mail.gmail.com>
 <6845f803-9435-e530-79c6-70a1ffbd54f3@gmail.com>
Message-ID: <CACxE24nDRhRjTbq2B+-FXMc2eJSN6dnuUh1sxFADv8_MWpgR4g@mail.gmail.com>

Great idea!

Thanks

On Fri, Mar 20, 2020 at 8:03 AM Tomas Kalibera <tomas.kalibera at gmail.com>
wrote:

> Hi Erin,
>
> when you are building from sources, you can always uncomment the example
> in str.Rd. But it would be good first to find out why it is failing on your
> system/build.
>
> Please run the example in Rgui of the official R 3.6.3 build on your
> machine. Does it work there?
>
> Please run the following commands in Rgui of the official R 3.6.3 build on
> the machine and on your custom build. What do you get?
>
> Sys.getlocale()
> enc2native("\uff21")
> enc2native("\u4e2d")
> Sys.setlocale("LC_CTYPE", "English_United States.28605")
> enc2native("\uff21")
> enc2native("\u4e2d")
> extSoftVersion()[c("iconv","BLAS")]
> Thanks,
> Tomas
>
> On 3/20/20 2:35 PM, Erin Hodgess wrote:
>
> I was wondering if there is a way to either skip the utilities check and
> continuing, in order to test the other packages, please.
>
> Thanks!
>
>
> On Fri, Mar 20, 2020 at 5:01 AM Martin Maechler <
> maechler at stat.math.ethz.ch> wrote:
>
>> >>>>> Erin Hodgess    on Thu, 19 Mar 2020 22:44:39 -0600 writes:
>>
>>      > Hi Tomas and others:
>>      > Here is the session Info.  I also used the str example both
>> without and
>>      > with changing the locale.
>>
>>      > sI <- sessionInfo()
>>     >> str(sI)
>>      > List of 10
>>      > $ R.version :List of 14
>>      > ..$ platform      : chr "x86_64-w64-mingw32"
>>      > ..$ arch          : chr "x86_64"
>>      > ..$ os            : chr "mingw32"
>>      > ..$ system        : chr "x86_64, mingw32"
>>      > ..$ status        : chr ""
>>      > ..$ major         : chr "3"
>>      > ..$ minor         : chr "6.3"
>>      > ..$ year          : chr "2020"
>>      > ..$ month         : chr "02"
>>      > ..$ day           : chr "29"
>>      > ..$ svn rev       : chr "77875"
>>      > ..$ language      : chr "R"
>>      > ..$ version.string: chr "R version 3.6.3 (2020-02-29)"
>>      > ..$ nickname      : chr "Holding the Windsock"
>>      > $ platform  : chr "x86_64-w64-mingw32/x64 (64-bit)"
>>      > $ locale    : chr "LC_COLLATE=English_United
>>      > States.1252;LC_CTYPE=English_United
>> States.1252;LC_MONETARY=English_United
>>      > States.125"| __truncated__
>>      > $ running   : chr "Windows 10 x64 (build 18362)"
>>      > $ RNGkind   : chr [1:3] "Mersenne-Twister" "Inversion" "Rejection"
>>      > $ basePkgs  : chr [1:7] "stats" "graphics" "grDevices" "utils" ...
>>      > $ loadedOnly:List of 1
>>      > ..$ compiler:List of 9
>>      > .. ..$ Package    : chr "compiler"
>>      > .. ..$ Version    : chr "3.6.3"
>>      > .. ..$ Priority   : chr "base"
>>      > .. ..$ Title      : chr "The R Compiler Package"
>>      > .. ..$ Author     : chr "Luke Tierney <luke-tierney at uiowa.edu>"
>>      > .. ..$ Maintainer : chr "R Core Team <R-core at r-project.org>"
>>      > .. ..$ Description: chr "Byte code compiler for R."
>>      > .. ..$ License    : chr "Part of R 3.6.3"
>>      > .. ..$ Built      : chr "R 3.6.3; ; 2020-03-20 04:29:00 UTC;
>> windows"
>>      > .. ..- attr(*, "class")= chr "packageDescription"
>>      > .. ..- attr(*, "file")= chr
>>      > "c:/newtimeR/R-3.6.3/library/compiler/Meta/package.rds"
>>      > $ matprod   : chr "default"
>>      > $ BLAS      : chr ""
>>      > $ LAPACK    : chr ""
>>      > - attr(*, "class")= chr "sessionInfo"
>>
>>
>>      > Running the str example WITHOUT changing the locale:
>>     >> ## Truncation behavior (<-> correct width measurement) for "long"
>>      > non-ASCII:
>>     >> idx <- c(65313:65338, 65345:65350)
>>     >> fwch <- intToUtf8(idx) # full width character string: each has
>> width 2
>>     >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>     >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>      > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>      > c.ch w.ch c.fw w.fw
>>      > 64   64   32   64
>>     >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>     >> ## nchar.max: 1st line needs an increase of  2  in order to see
>> 1  (in
>>      > UTF-$
>>     >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+"| __truncated__
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+F"| __truncated__
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF"| __truncated__
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF2"| __truncated__
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26"|
>> __truncated__
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26>"|
>> __truncated__
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26><"|
>> __truncated__
>>     >> invisible(lapply(60:66, function(N) str( ch , nchar.max = N))) #
>> "1 is 1"
>>      > he$
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."|
>> __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"|
>> __truncated__
>>      > chr
>> "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>>     >>
>>
>>      > Running the str example WITH changing the locale:
>>
>>      > oloc <- Sys.getlocale("LC_CTYPE")
>>     >> mbyte.lc <- if(.Platform$OS.type == "windows")
>>      > +  "English_United States.28605" else "en_GB.UTF-8"
>>     >> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
>>      > [1] "English_United States.28605"
>>     >> ## Truncation behavior (<-> correct width measurement) for "long"
>>      > non-ASCII:
>>     >> idx <- c(65313:65338, 65345:65350)
>>     >> fwch <- intToUtf8(idx) # full width character string: each has
>> width 2
>>     >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>     >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>      > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>      > c.ch w.ch c.fw w.fw
>>      > 64   64   32   64
>>     >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>     >> ## nchar.max: 1st line needs an increase of  2  in order to see
>> 1  (in
>>      > UTF-$
>>     >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>      > Error in strtrim(x.lrg, nchar.max - nc) :
>>      > unsupported conversion from 'UTF-8' in codepage 28605
>>     >> invisible(lapply(60:66, function(N) str( ch , nchar.max = N))) #
>> "1 is 1"
>>      > he$
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."|
>> __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"|
>> __truncated__
>>      > chr
>> "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>>
>>      > This is pretty strange.
>>
>> It is strange indeed  that  strtrim() fails in this situation.
>>
>> From what you wrote previously, this only happens when you link
>> with OpenBLAS but not when you use R's own BLAS.
>> Are you sure that that was the only difference, but not rather
>> the difference in the locales you used in your two versions of R
>> on Windows?
>>
>> Martin
>>
>>      > Thanks for any help.
>>
>>      > Sincerely,
>>      > Erin
>>
>>      > Erin Hodgess, PhD
>>      > mailto: erinm.hodgess at gmail.com
>>
>>
>>      > On Thu, Mar 19, 2020 at 2:29 AM Tomas Kalibera <
>> tomas.kalibera at gmail.com>
>>      > wrote:
>>
>>     >> Hi Erin,
>>     >>
>>     >> this comes from examples in ?str. Could you please try to find a
>> minimal
>>     >> example to reproduce on your system based on that? I would look for
>>     >> "line needs" in ?str and experiment with reducing the example there
>>     >> while still getting the error. Once it is minimal, could you
>> please try
>>     >> also on the official build of R on your machine?
>>     >>
>>     >> Also it would be nice to have a session info. If it works in the
>>     >> official build but not your custom build, then one would have to
>> look
>>     >> also into how the custom build is done.
>>     >>
>>     >> Thanks
>>     >> Tomas
>>     >>
>>     >>
>>     >> On 3/19/20 8:02 AM, Erin Hodgess wrote:
>>     >> > Hello everyone:
>>     >> >
>>     >> > I have built the latest version of the OpenBLAS on my Windows 10
>> machine.
>>     >> > When I run make distribution in R, everything is fine.
>>     >> >
>>     >> > However, when I run make check all,  I get the following error:
>>     >> >
>>     >> > C:\newtimeR\R-3.6.3\src\gnuwin32>make check-all
>>     >> > Testing examples for package 'base'
>>     >> > Testing examples for package 'tools'
>>     >> >    comparing 'tools-Ex.Rout' to 'tools-Ex.Rout.save' ... OK
>>     >> > Testing examples for package 'utils'
>>     >> > Error: testing 'utils' failed
>>     >> > Execution halted
>>     >> > make[3]: *** [Makefile.win:29: test-Examples-Base] Error 1
>>     >> > make[2]: *** [Makefile.common:185: test-Examples] Error 2
>>     >> > make[1]: *** [Makefile.common:171: test-all-basics] Error 1
>>     >> > make: *** [Makefile:324: check-all] Error 2
>>     >> >
>>     >> > And here is the section from the .Rout.fail for utils:
>>     >> >
>>     >> >> ## Multibyte characters in strings (in multibyte locales):
>>     >> >> oloc <- Sys.getlocale("LC_CTYPE")
>>     >> >> mbyte.lc <- if(.Platform$OS.type == "windows")
>>     >> > +  "English_United States.28605" else "en_GB.UTF-8"
>>     >> >> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
>>     >> > [1] "English_United States.28605"
>>     >> >> ## Truncation behavior (<-> correct width measurement) for
>> "long"
>>     >> > non-ASCII:
>>     >> >> idx <- c(65313:65338, 65345:65350)
>>     >> >> fwch <- intToUtf8(idx) # full width character string: each has
>> width 2
>>     >> >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>     >> >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>     >> > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>     >> > c.ch w.ch c.fw w.fw
>>     >> >    64   64   32   64
>>     >> >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>     >> >> ## nchar.max: 1st line needs an increase of  2  in order to
>> see  1  (in
>>     >> > UTF-8!):
>>     >> >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>     >> > Error in strtrim(x.lrg, nchar.max - nc) :
>>     >> >    unsupported conversion from 'UTF-8' in codepage 28605
>>     >> > Calls: lapply ... FUN -> str -> str.default -> maybe_truncate ->
>> strtrim
>>     >> > Execution halted
>>     >> >
>>     >> > Has anyone run into this before, please?
>>     >> >
>>     >> > If I run this line-by-line starting at the "idx <-", things are
>> fine.
>>     >> >
>>     >> > I also compiled R from source without the OpenBLAS, and it was
>> fine.
>>     >> >
>>     >> > Thanks for any suggestions.
>>     >> >
>>     >> > Sincerely,
>>     >> > Erin
>>     >> >
>>     >> >
>>     >> >
>>     >> > Erin Hodgess, PhD
>>     >> > mailto: erinm.hodgess at gmail.com
>>
>> --
> Erin Hodgess, PhD
> mailto: erinm.hodgess at gmail.com
>
>
> --
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Fri Mar 20 15:27:45 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Fri, 20 Mar 2020 08:27:45 -0600
Subject: [R-pkg-devel] Errors in make check in Windows 10 with OpenBLAS
In-Reply-To: <6845f803-9435-e530-79c6-70a1ffbd54f3@gmail.com>
References: <CACxE24nsuTOj5oPvC=_R_Lf=1bJCFqFChC=CN48iMFgOQD21DA@mail.gmail.com>
 <5de3f2cc-72af-933e-61fe-a6c1ac74ffae@gmail.com>
 <CACxE24=RGU-EvdjmoDpEF91POKV1AH8hZd=stdNRt8xr1c0-2g@mail.gmail.com>
 <24180.41619.299632.396162@stat.math.ethz.ch>
 <CACxE24mb0UZfdvozscoNGA=Q2bMZ=wjoq56RNLERh5oLoZXLCQ@mail.gmail.com>
 <6845f803-9435-e530-79c6-70a1ffbd54f3@gmail.com>
Message-ID: <CACxE24mOM-LL0PrMZTx5KYmdbB2Ba1YdJsvwTiz2un27C9qRJQ@mail.gmail.com>

Here are the results.

Looks like enc2native and the iconv settings are different.


> #output from custom build
> Sys.getlocale()
[1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
States.1252;LC_MONETARY=English_United
States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
> enc2native("\uff21")
[1] "<U+FF21>"
> enc2native("\u4e2d")
[1] "<U+4E2D>"
> Sys.setlocale("LC_CTYPE", "English_United States.28605")
[1] "English_United States.28605"
> enc2native("\uff21")
Error: unsupported conversion from 'UTF-8' in codepage 28605
> enc2native("\u4e2d")
Error: unsupported conversion from 'UTF-8' in codepage 28605
> extSoftVersion()[c("iconv","BLAS")]
              iconv                BLAS
"GNU libiconv 1.14"                  ""


> #output from regular build
> Sys.getlocale()
[1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
States.1252;LC_MONETARY=English_United
States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
> enc2native("\uff21")
[1] "A"
> enc2native("\u4e2d")
[1] "<U+4E2D>"
> Sys.setlocale("LC_CTYPE", "English_United States.28605")
[1] "English_United States.28605"
> enc2native("\uff21")
[1] "A"
> enc2native("\u4e2d")
[1] "<U+4E2D>"
> extSoftVersion()[c("iconv","BLAS")]
      iconv        BLAS
"win_iconv"          ""
>

Thanks!


Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com


On Fri, Mar 20, 2020 at 8:03 AM Tomas Kalibera <tomas.kalibera at gmail.com>
wrote:

> Hi Erin,
>
> when you are building from sources, you can always uncomment the example
> in str.Rd. But it would be good first to find out why it is failing on your
> system/build.
>
> Please run the example in Rgui of the official R 3.6.3 build on your
> machine. Does it work there?
>
> Please run the following commands in Rgui of the official R 3.6.3 build on
> the machine and on your custom build. What do you get?
>
> Sys.getlocale()
> enc2native("\uff21")
> enc2native("\u4e2d")
> Sys.setlocale("LC_CTYPE", "English_United States.28605")
> enc2native("\uff21")
> enc2native("\u4e2d")
> extSoftVersion()[c("iconv","BLAS")]
> Thanks,
> Tomas
>
> On 3/20/20 2:35 PM, Erin Hodgess wrote:
>
> I was wondering if there is a way to either skip the utilities check and
> continuing, in order to test the other packages, please.
>
> Thanks!
>
>
> On Fri, Mar 20, 2020 at 5:01 AM Martin Maechler <
> maechler at stat.math.ethz.ch> wrote:
>
>> >>>>> Erin Hodgess    on Thu, 19 Mar 2020 22:44:39 -0600 writes:
>>
>>      > Hi Tomas and others:
>>      > Here is the session Info.  I also used the str example both
>> without and
>>      > with changing the locale.
>>
>>      > sI <- sessionInfo()
>>     >> str(sI)
>>      > List of 10
>>      > $ R.version :List of 14
>>      > ..$ platform      : chr "x86_64-w64-mingw32"
>>      > ..$ arch          : chr "x86_64"
>>      > ..$ os            : chr "mingw32"
>>      > ..$ system        : chr "x86_64, mingw32"
>>      > ..$ status        : chr ""
>>      > ..$ major         : chr "3"
>>      > ..$ minor         : chr "6.3"
>>      > ..$ year          : chr "2020"
>>      > ..$ month         : chr "02"
>>      > ..$ day           : chr "29"
>>      > ..$ svn rev       : chr "77875"
>>      > ..$ language      : chr "R"
>>      > ..$ version.string: chr "R version 3.6.3 (2020-02-29)"
>>      > ..$ nickname      : chr "Holding the Windsock"
>>      > $ platform  : chr "x86_64-w64-mingw32/x64 (64-bit)"
>>      > $ locale    : chr "LC_COLLATE=English_United
>>      > States.1252;LC_CTYPE=English_United
>> States.1252;LC_MONETARY=English_United
>>      > States.125"| __truncated__
>>      > $ running   : chr "Windows 10 x64 (build 18362)"
>>      > $ RNGkind   : chr [1:3] "Mersenne-Twister" "Inversion" "Rejection"
>>      > $ basePkgs  : chr [1:7] "stats" "graphics" "grDevices" "utils" ...
>>      > $ loadedOnly:List of 1
>>      > ..$ compiler:List of 9
>>      > .. ..$ Package    : chr "compiler"
>>      > .. ..$ Version    : chr "3.6.3"
>>      > .. ..$ Priority   : chr "base"
>>      > .. ..$ Title      : chr "The R Compiler Package"
>>      > .. ..$ Author     : chr "Luke Tierney <luke-tierney at uiowa.edu>"
>>      > .. ..$ Maintainer : chr "R Core Team <R-core at r-project.org>"
>>      > .. ..$ Description: chr "Byte code compiler for R."
>>      > .. ..$ License    : chr "Part of R 3.6.3"
>>      > .. ..$ Built      : chr "R 3.6.3; ; 2020-03-20 04:29:00 UTC;
>> windows"
>>      > .. ..- attr(*, "class")= chr "packageDescription"
>>      > .. ..- attr(*, "file")= chr
>>      > "c:/newtimeR/R-3.6.3/library/compiler/Meta/package.rds"
>>      > $ matprod   : chr "default"
>>      > $ BLAS      : chr ""
>>      > $ LAPACK    : chr ""
>>      > - attr(*, "class")= chr "sessionInfo"
>>
>>
>>      > Running the str example WITHOUT changing the locale:
>>     >> ## Truncation behavior (<-> correct width measurement) for "long"
>>      > non-ASCII:
>>     >> idx <- c(65313:65338, 65345:65350)
>>     >> fwch <- intToUtf8(idx) # full width character string: each has
>> width 2
>>     >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>     >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>      > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>      > c.ch w.ch c.fw w.fw
>>      > 64   64   32   64
>>     >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>     >> ## nchar.max: 1st line needs an increase of  2  in order to see
>> 1  (in
>>      > UTF-$
>>     >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+"| __truncated__
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+F"| __truncated__
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF"| __truncated__
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF2"| __truncated__
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26"|
>> __truncated__
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26>"|
>> __truncated__
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26><"|
>> __truncated__
>>     >> invisible(lapply(60:66, function(N) str( ch , nchar.max = N))) #
>> "1 is 1"
>>      > he$
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."|
>> __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"|
>> __truncated__
>>      > chr
>> "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>>     >>
>>
>>      > Running the str example WITH changing the locale:
>>
>>      > oloc <- Sys.getlocale("LC_CTYPE")
>>     >> mbyte.lc <- if(.Platform$OS.type == "windows")
>>      > +  "English_United States.28605" else "en_GB.UTF-8"
>>     >> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
>>      > [1] "English_United States.28605"
>>     >> ## Truncation behavior (<-> correct width measurement) for "long"
>>      > non-ASCII:
>>     >> idx <- c(65313:65338, 65345:65350)
>>     >> fwch <- intToUtf8(idx) # full width character string: each has
>> width 2
>>     >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>     >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>      > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>      > c.ch w.ch c.fw w.fw
>>      > 64   64   32   64
>>     >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>     >> ## nchar.max: 1st line needs an increase of  2  in order to see
>> 1  (in
>>      > UTF-$
>>     >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>      > Error in strtrim(x.lrg, nchar.max - nc) :
>>      > unsupported conversion from 'UTF-8' in codepage 28605
>>     >> invisible(lapply(60:66, function(N) str( ch , nchar.max = N))) #
>> "1 is 1"
>>      > he$
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."|
>> __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"|
>> __truncated__
>>      > chr
>> "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>>
>>      > This is pretty strange.
>>
>> It is strange indeed  that  strtrim() fails in this situation.
>>
>> From what you wrote previously, this only happens when you link
>> with OpenBLAS but not when you use R's own BLAS.
>> Are you sure that that was the only difference, but not rather
>> the difference in the locales you used in your two versions of R
>> on Windows?
>>
>> Martin
>>
>>      > Thanks for any help.
>>
>>      > Sincerely,
>>      > Erin
>>
>>      > Erin Hodgess, PhD
>>      > mailto: erinm.hodgess at gmail.com
>>
>>
>>      > On Thu, Mar 19, 2020 at 2:29 AM Tomas Kalibera <
>> tomas.kalibera at gmail.com>
>>      > wrote:
>>
>>     >> Hi Erin,
>>     >>
>>     >> this comes from examples in ?str. Could you please try to find a
>> minimal
>>     >> example to reproduce on your system based on that? I would look for
>>     >> "line needs" in ?str and experiment with reducing the example there
>>     >> while still getting the error. Once it is minimal, could you
>> please try
>>     >> also on the official build of R on your machine?
>>     >>
>>     >> Also it would be nice to have a session info. If it works in the
>>     >> official build but not your custom build, then one would have to
>> look
>>     >> also into how the custom build is done.
>>     >>
>>     >> Thanks
>>     >> Tomas
>>     >>
>>     >>
>>     >> On 3/19/20 8:02 AM, Erin Hodgess wrote:
>>     >> > Hello everyone:
>>     >> >
>>     >> > I have built the latest version of the OpenBLAS on my Windows 10
>> machine.
>>     >> > When I run make distribution in R, everything is fine.
>>     >> >
>>     >> > However, when I run make check all,  I get the following error:
>>     >> >
>>     >> > C:\newtimeR\R-3.6.3\src\gnuwin32>make check-all
>>     >> > Testing examples for package 'base'
>>     >> > Testing examples for package 'tools'
>>     >> >    comparing 'tools-Ex.Rout' to 'tools-Ex.Rout.save' ... OK
>>     >> > Testing examples for package 'utils'
>>     >> > Error: testing 'utils' failed
>>     >> > Execution halted
>>     >> > make[3]: *** [Makefile.win:29: test-Examples-Base] Error 1
>>     >> > make[2]: *** [Makefile.common:185: test-Examples] Error 2
>>     >> > make[1]: *** [Makefile.common:171: test-all-basics] Error 1
>>     >> > make: *** [Makefile:324: check-all] Error 2
>>     >> >
>>     >> > And here is the section from the .Rout.fail for utils:
>>     >> >
>>     >> >> ## Multibyte characters in strings (in multibyte locales):
>>     >> >> oloc <- Sys.getlocale("LC_CTYPE")
>>     >> >> mbyte.lc <- if(.Platform$OS.type == "windows")
>>     >> > +  "English_United States.28605" else "en_GB.UTF-8"
>>     >> >> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
>>     >> > [1] "English_United States.28605"
>>     >> >> ## Truncation behavior (<-> correct width measurement) for
>> "long"
>>     >> > non-ASCII:
>>     >> >> idx <- c(65313:65338, 65345:65350)
>>     >> >> fwch <- intToUtf8(idx) # full width character string: each has
>> width 2
>>     >> >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>     >> >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>     >> > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>     >> > c.ch w.ch c.fw w.fw
>>     >> >    64   64   32   64
>>     >> >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>     >> >> ## nchar.max: 1st line needs an increase of  2  in order to
>> see  1  (in
>>     >> > UTF-8!):
>>     >> >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>     >> > Error in strtrim(x.lrg, nchar.max - nc) :
>>     >> >    unsupported conversion from 'UTF-8' in codepage 28605
>>     >> > Calls: lapply ... FUN -> str -> str.default -> maybe_truncate ->
>> strtrim
>>     >> > Execution halted
>>     >> >
>>     >> > Has anyone run into this before, please?
>>     >> >
>>     >> > If I run this line-by-line starting at the "idx <-", things are
>> fine.
>>     >> >
>>     >> > I also compiled R from source without the OpenBLAS, and it was
>> fine.
>>     >> >
>>     >> > Thanks for any suggestions.
>>     >> >
>>     >> > Sincerely,
>>     >> > Erin
>>     >> >
>>     >> >
>>     >> >
>>     >> > Erin Hodgess, PhD
>>     >> > mailto: erinm.hodgess at gmail.com
>>
>> --
> Erin Hodgess, PhD
> mailto: erinm.hodgess at gmail.com
>
>
>

	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Fri Mar 20 15:29:13 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Fri, 20 Mar 2020 08:29:13 -0600
Subject: [R-pkg-devel] Errors in make check in Windows 10 with OpenBLAS
In-Reply-To: <6845f803-9435-e530-79c6-70a1ffbd54f3@gmail.com>
References: <CACxE24nsuTOj5oPvC=_R_Lf=1bJCFqFChC=CN48iMFgOQD21DA@mail.gmail.com>
 <5de3f2cc-72af-933e-61fe-a6c1ac74ffae@gmail.com>
 <CACxE24=RGU-EvdjmoDpEF91POKV1AH8hZd=stdNRt8xr1c0-2g@mail.gmail.com>
 <24180.41619.299632.396162@stat.math.ethz.ch>
 <CACxE24mb0UZfdvozscoNGA=Q2bMZ=wjoq56RNLERh5oLoZXLCQ@mail.gmail.com>
 <6845f803-9435-e530-79c6-70a1ffbd54f3@gmail.com>
Message-ID: <CACxE24nMW8xTpwp+qvOv+XfpTsaQY+d84Cu7HbU5EzptnXj27A@mail.gmail.com>

And the example runs just fine on the regular build.

Thanks

Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com


On Fri, Mar 20, 2020 at 8:03 AM Tomas Kalibera <tomas.kalibera at gmail.com>
wrote:

> Hi Erin,
>
> when you are building from sources, you can always uncomment the example
> in str.Rd. But it would be good first to find out why it is failing on your
> system/build.
>
> Please run the example in Rgui of the official R 3.6.3 build on your
> machine. Does it work there?
>
> Please run the following commands in Rgui of the official R 3.6.3 build on
> the machine and on your custom build. What do you get?
>
> Sys.getlocale()
> enc2native("\uff21")
> enc2native("\u4e2d")
> Sys.setlocale("LC_CTYPE", "English_United States.28605")
> enc2native("\uff21")
> enc2native("\u4e2d")
> extSoftVersion()[c("iconv","BLAS")]
> Thanks,
> Tomas
>
> On 3/20/20 2:35 PM, Erin Hodgess wrote:
>
> I was wondering if there is a way to either skip the utilities check and
> continuing, in order to test the other packages, please.
>
> Thanks!
>
>
> On Fri, Mar 20, 2020 at 5:01 AM Martin Maechler <
> maechler at stat.math.ethz.ch> wrote:
>
>> >>>>> Erin Hodgess    on Thu, 19 Mar 2020 22:44:39 -0600 writes:
>>
>>      > Hi Tomas and others:
>>      > Here is the session Info.  I also used the str example both
>> without and
>>      > with changing the locale.
>>
>>      > sI <- sessionInfo()
>>     >> str(sI)
>>      > List of 10
>>      > $ R.version :List of 14
>>      > ..$ platform      : chr "x86_64-w64-mingw32"
>>      > ..$ arch          : chr "x86_64"
>>      > ..$ os            : chr "mingw32"
>>      > ..$ system        : chr "x86_64, mingw32"
>>      > ..$ status        : chr ""
>>      > ..$ major         : chr "3"
>>      > ..$ minor         : chr "6.3"
>>      > ..$ year          : chr "2020"
>>      > ..$ month         : chr "02"
>>      > ..$ day           : chr "29"
>>      > ..$ svn rev       : chr "77875"
>>      > ..$ language      : chr "R"
>>      > ..$ version.string: chr "R version 3.6.3 (2020-02-29)"
>>      > ..$ nickname      : chr "Holding the Windsock"
>>      > $ platform  : chr "x86_64-w64-mingw32/x64 (64-bit)"
>>      > $ locale    : chr "LC_COLLATE=English_United
>>      > States.1252;LC_CTYPE=English_United
>> States.1252;LC_MONETARY=English_United
>>      > States.125"| __truncated__
>>      > $ running   : chr "Windows 10 x64 (build 18362)"
>>      > $ RNGkind   : chr [1:3] "Mersenne-Twister" "Inversion" "Rejection"
>>      > $ basePkgs  : chr [1:7] "stats" "graphics" "grDevices" "utils" ...
>>      > $ loadedOnly:List of 1
>>      > ..$ compiler:List of 9
>>      > .. ..$ Package    : chr "compiler"
>>      > .. ..$ Version    : chr "3.6.3"
>>      > .. ..$ Priority   : chr "base"
>>      > .. ..$ Title      : chr "The R Compiler Package"
>>      > .. ..$ Author     : chr "Luke Tierney <luke-tierney at uiowa.edu>"
>>      > .. ..$ Maintainer : chr "R Core Team <R-core at r-project.org>"
>>      > .. ..$ Description: chr "Byte code compiler for R."
>>      > .. ..$ License    : chr "Part of R 3.6.3"
>>      > .. ..$ Built      : chr "R 3.6.3; ; 2020-03-20 04:29:00 UTC;
>> windows"
>>      > .. ..- attr(*, "class")= chr "packageDescription"
>>      > .. ..- attr(*, "file")= chr
>>      > "c:/newtimeR/R-3.6.3/library/compiler/Meta/package.rds"
>>      > $ matprod   : chr "default"
>>      > $ BLAS      : chr ""
>>      > $ LAPACK    : chr ""
>>      > - attr(*, "class")= chr "sessionInfo"
>>
>>
>>      > Running the str example WITHOUT changing the locale:
>>     >> ## Truncation behavior (<-> correct width measurement) for "long"
>>      > non-ASCII:
>>     >> idx <- c(65313:65338, 65345:65350)
>>     >> fwch <- intToUtf8(idx) # full width character string: each has
>> width 2
>>     >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>     >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>      > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>      > c.ch w.ch c.fw w.fw
>>      > 64   64   32   64
>>     >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>     >> ## nchar.max: 1st line needs an increase of  2  in order to see
>> 1  (in
>>      > UTF-$
>>     >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+"| __truncated__
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+F"| __truncated__
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF"| __truncated__
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF2"| __truncated__
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26"|
>> __truncated__
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26>"|
>> __truncated__
>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26><"|
>> __truncated__
>>     >> invisible(lapply(60:66, function(N) str( ch , nchar.max = N))) #
>> "1 is 1"
>>      > he$
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."|
>> __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"|
>> __truncated__
>>      > chr
>> "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>>     >>
>>
>>      > Running the str example WITH changing the locale:
>>
>>      > oloc <- Sys.getlocale("LC_CTYPE")
>>     >> mbyte.lc <- if(.Platform$OS.type == "windows")
>>      > +  "English_United States.28605" else "en_GB.UTF-8"
>>     >> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
>>      > [1] "English_United States.28605"
>>     >> ## Truncation behavior (<-> correct width measurement) for "long"
>>      > non-ASCII:
>>     >> idx <- c(65313:65338, 65345:65350)
>>     >> fwch <- intToUtf8(idx) # full width character string: each has
>> width 2
>>     >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>     >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>      > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>      > c.ch w.ch c.fw w.fw
>>      > 64   64   32   64
>>     >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>     >> ## nchar.max: 1st line needs an increase of  2  in order to see
>> 1  (in
>>      > UTF-$
>>     >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>      > Error in strtrim(x.lrg, nchar.max - nc) :
>>      > unsupported conversion from 'UTF-8' in codepage 28605
>>     >> invisible(lapply(60:66, function(N) str( ch , nchar.max = N))) #
>> "1 is 1"
>>      > he$
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"| __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."|
>> __truncated__
>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"|
>> __truncated__
>>      > chr
>> "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>>
>>      > This is pretty strange.
>>
>> It is strange indeed  that  strtrim() fails in this situation.
>>
>> From what you wrote previously, this only happens when you link
>> with OpenBLAS but not when you use R's own BLAS.
>> Are you sure that that was the only difference, but not rather
>> the difference in the locales you used in your two versions of R
>> on Windows?
>>
>> Martin
>>
>>      > Thanks for any help.
>>
>>      > Sincerely,
>>      > Erin
>>
>>      > Erin Hodgess, PhD
>>      > mailto: erinm.hodgess at gmail.com
>>
>>
>>      > On Thu, Mar 19, 2020 at 2:29 AM Tomas Kalibera <
>> tomas.kalibera at gmail.com>
>>      > wrote:
>>
>>     >> Hi Erin,
>>     >>
>>     >> this comes from examples in ?str. Could you please try to find a
>> minimal
>>     >> example to reproduce on your system based on that? I would look for
>>     >> "line needs" in ?str and experiment with reducing the example there
>>     >> while still getting the error. Once it is minimal, could you
>> please try
>>     >> also on the official build of R on your machine?
>>     >>
>>     >> Also it would be nice to have a session info. If it works in the
>>     >> official build but not your custom build, then one would have to
>> look
>>     >> also into how the custom build is done.
>>     >>
>>     >> Thanks
>>     >> Tomas
>>     >>
>>     >>
>>     >> On 3/19/20 8:02 AM, Erin Hodgess wrote:
>>     >> > Hello everyone:
>>     >> >
>>     >> > I have built the latest version of the OpenBLAS on my Windows 10
>> machine.
>>     >> > When I run make distribution in R, everything is fine.
>>     >> >
>>     >> > However, when I run make check all,  I get the following error:
>>     >> >
>>     >> > C:\newtimeR\R-3.6.3\src\gnuwin32>make check-all
>>     >> > Testing examples for package 'base'
>>     >> > Testing examples for package 'tools'
>>     >> >    comparing 'tools-Ex.Rout' to 'tools-Ex.Rout.save' ... OK
>>     >> > Testing examples for package 'utils'
>>     >> > Error: testing 'utils' failed
>>     >> > Execution halted
>>     >> > make[3]: *** [Makefile.win:29: test-Examples-Base] Error 1
>>     >> > make[2]: *** [Makefile.common:185: test-Examples] Error 2
>>     >> > make[1]: *** [Makefile.common:171: test-all-basics] Error 1
>>     >> > make: *** [Makefile:324: check-all] Error 2
>>     >> >
>>     >> > And here is the section from the .Rout.fail for utils:
>>     >> >
>>     >> >> ## Multibyte characters in strings (in multibyte locales):
>>     >> >> oloc <- Sys.getlocale("LC_CTYPE")
>>     >> >> mbyte.lc <- if(.Platform$OS.type == "windows")
>>     >> > +  "English_United States.28605" else "en_GB.UTF-8"
>>     >> >> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
>>     >> > [1] "English_United States.28605"
>>     >> >> ## Truncation behavior (<-> correct width measurement) for
>> "long"
>>     >> > non-ASCII:
>>     >> >> idx <- c(65313:65338, 65345:65350)
>>     >> >> fwch <- intToUtf8(idx) # full width character string: each has
>> width 2
>>     >> >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>     >> >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>     >> > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>     >> > c.ch w.ch c.fw w.fw
>>     >> >    64   64   32   64
>>     >> >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>     >> >> ## nchar.max: 1st line needs an increase of  2  in order to
>> see  1  (in
>>     >> > UTF-8!):
>>     >> >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>     >> > Error in strtrim(x.lrg, nchar.max - nc) :
>>     >> >    unsupported conversion from 'UTF-8' in codepage 28605
>>     >> > Calls: lapply ... FUN -> str -> str.default -> maybe_truncate ->
>> strtrim
>>     >> > Execution halted
>>     >> >
>>     >> > Has anyone run into this before, please?
>>     >> >
>>     >> > If I run this line-by-line starting at the "idx <-", things are
>> fine.
>>     >> >
>>     >> > I also compiled R from source without the OpenBLAS, and it was
>> fine.
>>     >> >
>>     >> > Thanks for any suggestions.
>>     >> >
>>     >> > Sincerely,
>>     >> > Erin
>>     >> >
>>     >> >
>>     >> >
>>     >> > Erin Hodgess, PhD
>>     >> > mailto: erinm.hodgess at gmail.com
>>
>> --
> Erin Hodgess, PhD
> mailto: erinm.hodgess at gmail.com
>
>
>

	[[alternative HTML version deleted]]


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Fri Mar 20 16:01:49 2020
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Fri, 20 Mar 2020 16:01:49 +0100
Subject: [R-pkg-devel] Errors in make check in Windows 10 with OpenBLAS
In-Reply-To: <CACxE24mOM-LL0PrMZTx5KYmdbB2Ba1YdJsvwTiz2un27C9qRJQ@mail.gmail.com>
References: <CACxE24nsuTOj5oPvC=_R_Lf=1bJCFqFChC=CN48iMFgOQD21DA@mail.gmail.com>
 <5de3f2cc-72af-933e-61fe-a6c1ac74ffae@gmail.com>
 <CACxE24=RGU-EvdjmoDpEF91POKV1AH8hZd=stdNRt8xr1c0-2g@mail.gmail.com>
 <24180.41619.299632.396162@stat.math.ethz.ch>
 <CACxE24mb0UZfdvozscoNGA=Q2bMZ=wjoq56RNLERh5oLoZXLCQ@mail.gmail.com>
 <6845f803-9435-e530-79c6-70a1ffbd54f3@gmail.com>
 <CACxE24mOM-LL0PrMZTx5KYmdbB2Ba1YdJsvwTiz2un27C9qRJQ@mail.gmail.com>
Message-ID: <e6402f7a-83f9-e2d3-4d64-13144b7bfd34@gmail.com>

Thanks, so the problem is that your custom build uses GNU libiconv, 
which does not support codepage 28605. win_iconv, the one shipped with 
R, supports that code page. win_iconv is a wrapper for the Windows API. 
Unless you had a special reason not to, I would just recommend to use 
win_iconv. The "experience" will match the C library conversion calls, 
which may be used directly in some code at some places, and it is most 
tested as people normally use it. Still, the problem is not specific to 
strtrim, just to the example.

Best
Tomas


On 3/20/20 3:27 PM, Erin Hodgess wrote:
> Here are the results.
>
> Looks like enc2native and the iconv settings are different.
>
>
> > #output from custom build
> > Sys.getlocale()
> [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United 
> States.1252;LC_MONETARY=English_United 
> States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
> > enc2native("\uff21")
> [1] "<U+FF21>"
> > enc2native("\u4e2d")
> [1] "<U+4E2D>"
> > Sys.setlocale("LC_CTYPE", "English_United States.28605")
> [1] "English_United States.28605"
> > enc2native("\uff21")
> Error: unsupported conversion from 'UTF-8' in codepage 28605
> > enc2native("\u4e2d")
> Error: unsupported conversion from 'UTF-8' in codepage 28605
> > extSoftVersion()[c("iconv","BLAS")]
> ? ? ? ? ? ? ? iconv ? ? ? ? ? ? ? ?BLAS
> "GNU libiconv 1.14" ? ? ? ? ? ? ? ? ?""
>
>
> > #output from regular build
> > Sys.getlocale()
> [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United 
> States.1252;LC_MONETARY=English_United 
> States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
> > enc2native("\uff21")
> [1] "A"
> > enc2native("\u4e2d")
> [1] "<U+4E2D>"
> > Sys.setlocale("LC_CTYPE", "English_United States.28605")
> [1] "English_United States.28605"
> > enc2native("\uff21")
> [1] "A"
> > enc2native("\u4e2d")
> [1] "<U+4E2D>"
> > extSoftVersion()[c("iconv","BLAS")]
> ? ? ? iconv ? ? ? ?BLAS
> "win_iconv" ? ? ? ? ?""
> >
>
> Thanks!
>
>
> Erin Hodgess, PhD
> mailto: erinm.hodgess at gmail.com <mailto:erinm.hodgess at gmail.com>
>
>
> On Fri, Mar 20, 2020 at 8:03 AM Tomas Kalibera 
> <tomas.kalibera at gmail.com <mailto:tomas.kalibera at gmail.com>> wrote:
>
>     Hi Erin,
>
>     when you are building from sources, you can always uncomment the
>     example in str.Rd. But it would be good first to find out why it
>     is failing on your system/build.
>
>     Please run the example in Rgui of the official R 3.6.3 build on
>     your machine. Does it work there?
>
>     Please run the following commands in Rgui of the official R 3.6.3
>     build on the machine and on your custom build. What do you get?
>
>     Sys.getlocale()
>     enc2native("\uff21")
>     enc2native("\u4e2d")
>     Sys.setlocale("LC_CTYPE", "English_United States.28605")
>     enc2native("\uff21")
>     enc2native("\u4e2d")
>     extSoftVersion()[c("iconv","BLAS")]
>
>     Thanks,
>     Tomas
>
>     On 3/20/20 2:35 PM, Erin Hodgess wrote:
>>     I was wondering if there is a way to either skip the utilities
>>     check and continuing, in order to test the other packages, please.
>>
>>     Thanks!
>>
>>
>>     On Fri, Mar 20, 2020 at 5:01 AM Martin Maechler
>>     <maechler at stat.math.ethz.ch <mailto:maechler at stat.math.ethz.ch>>
>>     wrote:
>>
>>         >>>>> Erin Hodgess? ? on Thu, 19 Mar 2020 22:44:39 -0600 writes:
>>
>>         ? ? ?> Hi Tomas and others:
>>         ? ? ?> Here is the session Info.? I also used the str example
>>         both without and
>>         ? ? ?> with changing the locale.
>>
>>         ? ? ?> sI <- sessionInfo()
>>         ? ? >> str(sI)
>>         ? ? ?> List of 10
>>         ? ? ?> $ R.version :List of 14
>>         ? ? ?> ..$ platform? ? ? : chr "x86_64-w64-mingw32"
>>         ? ? ?> ..$ arch? ? ? ? ? : chr "x86_64"
>>         ? ? ?> ..$ os? ? ? ? ? ? : chr "mingw32"
>>         ? ? ?> ..$ system? ? ? ? : chr "x86_64, mingw32"
>>         ? ? ?> ..$ status? ? ? ? : chr ""
>>         ? ? ?> ..$ major? ? ? ? ?: chr "3"
>>         ? ? ?> ..$ minor? ? ? ? ?: chr "6.3"
>>         ? ? ?> ..$ year? ? ? ? ? : chr "2020"
>>         ? ? ?> ..$ month? ? ? ? ?: chr "02"
>>         ? ? ?> ..$ day? ? ? ? ? ?: chr "29"
>>         ? ? ?> ..$ svn rev? ? ? ?: chr "77875"
>>         ? ? ?> ..$ language? ? ? : chr "R"
>>         ? ? ?> ..$ version.string: chr "R version 3.6.3 (2020-02-29)"
>>         ? ? ?> ..$ nickname? ? ? : chr "Holding the Windsock"
>>         ? ? ?> $ platform? : chr "x86_64-w64-mingw32/x64 (64-bit)"
>>         ? ? ?> $ locale? ? : chr "LC_COLLATE=English_United
>>         ? ? ?> States.1252;LC_CTYPE=English_United
>>         States.1252;LC_MONETARY=English_United
>>         ? ? ?> States.125"| __truncated__
>>         ? ? ?> $ running? ?: chr "Windows 10 x64 (build 18362)"
>>         ? ? ?> $ RNGkind? ?: chr [1:3] "Mersenne-Twister" "Inversion"
>>         "Rejection"
>>         ? ? ?> $ basePkgs? : chr [1:7] "stats" "graphics" "grDevices"
>>         "utils" ...
>>         ? ? ?> $ loadedOnly:List of 1
>>         ? ? ?> ..$ compiler:List of 9
>>         ? ? ?> .. ..$ Package? ? : chr "compiler"
>>         ? ? ?> .. ..$ Version? ? : chr "3.6.3"
>>         ? ? ?> .. ..$ Priority? ?: chr "base"
>>         ? ? ?> .. ..$ Title? ? ? : chr "The R Compiler Package"
>>         ? ? ?> .. ..$ Author? ? ?: chr "Luke Tierney
>>         <luke-tierney at uiowa.edu <mailto:luke-tierney at uiowa.edu>>"
>>         ? ? ?> .. ..$ Maintainer : chr "R Core Team
>>         <R-core at r-project.org <mailto:R-core at r-project.org>>"
>>         ? ? ?> .. ..$ Description: chr "Byte code compiler for R."
>>         ? ? ?> .. ..$ License? ? : chr "Part of R 3.6.3"
>>         ? ? ?> .. ..$ Built? ? ? : chr "R 3.6.3; ; 2020-03-20
>>         04:29:00 UTC; windows"
>>         ? ? ?> .. ..- attr(*, "class")= chr "packageDescription"
>>         ? ? ?> .. ..- attr(*, "file")= chr
>>         ? ? ?> "c:/newtimeR/R-3.6.3/library/compiler/Meta/package.rds"
>>         ? ? ?> $ matprod? ?: chr "default"
>>         ? ? ?> $ BLAS? ? ? : chr ""
>>         ? ? ?> $ LAPACK? ? : chr ""
>>         ? ? ?> - attr(*, "class")= chr "sessionInfo"
>>
>>
>>         ? ? ?> Running the str example WITHOUT changing the locale:
>>         ? ? >> ## Truncation behavior (<-> correct width measurement)
>>         for "long"
>>         ? ? ?> non-ASCII:
>>         ? ? >> idx <- c(65313:65338, 65345:65350)
>>         ? ? >> fwch <- intToUtf8(idx) # full width character string:
>>         each has width 2
>>         ? ? >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>         ? ? >> (ncc <- c(c.ch <http://c.ch> = nchar(ch), w.ch
>>         <http://w.ch> = nchar(ch,? ?"w"),
>>         ? ? ?> +? ? ? ? ? ?c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>         ? ? ?> c.ch <http://c.ch> w.ch <http://w.ch> c.fw w.fw
>>         ? ? ?> 64? ?64? ?32? ?64
>>         ? ? >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>         ? ? >> ## nchar.max: 1st line needs an increase of? 2? in
>>         order to see? 1? (in
>>         ? ? ?> UTF-$
>>         ? ? >> invisible(lapply(60:66, function(N) str(fwch,
>>         nchar.max = N)))
>>         ? ? ?> chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+"|
>>         __truncated__
>>         ? ? ?> chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+F"|
>>         __truncated__
>>         ? ? ?> chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF"|
>>         __truncated__
>>         ? ? ?> chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF2"|
>>         __truncated__
>>         ? ? ?> chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26"|
>>         __truncated__
>>         ? ? ?> chr
>>         "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26>"| __truncated__
>>         ? ? ?> chr
>>         "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26><"|
>>         __truncated__
>>         ? ? >> invisible(lapply(60:66, function(N) str( ch ,
>>         nchar.max = N))) # "1 is 1"
>>         ? ? ?> he$
>>         ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"|
>>         __truncated__
>>         ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."|
>>         __truncated__
>>         ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"|
>>         __truncated__
>>         ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"|
>>         __truncated__
>>         ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."|
>>         __truncated__
>>         ? ? ?> chr
>>         "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"| __truncated__
>>         ? ? ?> chr
>>         "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>>         ? ? >>
>>
>>         ? ? ?> Running the str example WITH changing the locale:
>>
>>         ? ? ?> oloc <- Sys.getlocale("LC_CTYPE")
>>         ? ? >> mbyte.lc <http://mbyte.lc> <- if(.Platform$OS.type ==
>>         "windows")
>>         ? ? ?> +? "English_United States.28605" else "en_GB.UTF-8"
>>         ? ? >> try(Sys.setlocale("LC_CTYPE", mbyte.lc <http://mbyte.lc>))
>>         ? ? ?> [1] "English_United States.28605"
>>         ? ? >> ## Truncation behavior (<-> correct width measurement)
>>         for "long"
>>         ? ? ?> non-ASCII:
>>         ? ? >> idx <- c(65313:65338, 65345:65350)
>>         ? ? >> fwch <- intToUtf8(idx) # full width character string:
>>         each has width 2
>>         ? ? >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>         ? ? >> (ncc <- c(c.ch <http://c.ch> = nchar(ch), w.ch
>>         <http://w.ch> = nchar(ch,? ?"w"),
>>         ? ? ?> +? ? ? ? ? ?c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>         ? ? ?> c.ch <http://c.ch> w.ch <http://w.ch> c.fw w.fw
>>         ? ? ?> 64? ?64? ?32? ?64
>>         ? ? >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>         ? ? >> ## nchar.max: 1st line needs an increase of? 2? in
>>         order to see? 1? (in
>>         ? ? ?> UTF-$
>>         ? ? >> invisible(lapply(60:66, function(N) str(fwch,
>>         nchar.max = N)))
>>         ? ? ?> Error in strtrim(x.lrg, nchar.max - nc) :
>>         ? ? ?> unsupported conversion from 'UTF-8' in codepage 28605
>>         ? ? >> invisible(lapply(60:66, function(N) str( ch ,
>>         nchar.max = N))) # "1 is 1"
>>         ? ? ?> he$
>>         ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"|
>>         __truncated__
>>         ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."|
>>         __truncated__
>>         ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"|
>>         __truncated__
>>         ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"|
>>         __truncated__
>>         ? ? ?> chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."|
>>         __truncated__
>>         ? ? ?> chr
>>         "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"| __truncated__
>>         ? ? ?> chr
>>         "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>>
>>         ? ? ?> This is pretty strange.
>>
>>         It is strange indeed? that? strtrim() fails in this situation.
>>
>>         From what you wrote previously, this only happens when you link
>>         with OpenBLAS but not when you use R's own BLAS.
>>         Are you sure that that was the only difference, but not rather
>>         the difference in the locales you used in your two versions of R
>>         on Windows?
>>
>>         Martin
>>
>>         ? ? ?> Thanks for any help.
>>
>>         ? ? ?> Sincerely,
>>         ? ? ?> Erin
>>
>>         ? ? ?> Erin Hodgess, PhD
>>         ? ? ?> mailto: erinm.hodgess at gmail.com
>>         <mailto:erinm.hodgess at gmail.com>
>>
>>
>>         ? ? ?> On Thu, Mar 19, 2020 at 2:29 AM Tomas Kalibera
>>         <tomas.kalibera at gmail.com <mailto:tomas.kalibera at gmail.com>>
>>         ? ? ?> wrote:
>>
>>         ? ? >> Hi Erin,
>>         ? ? >>
>>         ? ? >> this comes from examples in ?str. Could you please try
>>         to find a minimal
>>         ? ? >> example to reproduce on your system based on that? I
>>         would look for
>>         ? ? >> "line needs" in ?str and experiment with reducing the
>>         example there
>>         ? ? >> while still getting the error. Once it is minimal,
>>         could you please try
>>         ? ? >> also on the official build of R on your machine?
>>         ? ? >>
>>         ? ? >> Also it would be nice to have a session info. If it
>>         works in the
>>         ? ? >> official build but not your custom build, then one
>>         would have to look
>>         ? ? >> also into how the custom build is done.
>>         ? ? >>
>>         ? ? >> Thanks
>>         ? ? >> Tomas
>>         ? ? >>
>>         ? ? >>
>>         ? ? >> On 3/19/20 8:02 AM, Erin Hodgess wrote:
>>         ? ? >> > Hello everyone:
>>         ? ? >> >
>>         ? ? >> > I have built the latest version of the OpenBLAS on
>>         my Windows 10 machine.
>>         ? ? >> > When I run make distribution in R, everything is fine.
>>         ? ? >> >
>>         ? ? >> > However, when I run make check all,? I get the
>>         following error:
>>         ? ? >> >
>>         ? ? >> > C:\newtimeR\R-3.6.3\src\gnuwin32>make check-all
>>         ? ? >> > Testing examples for package 'base'
>>         ? ? >> > Testing examples for package 'tools'
>>         ? ? >> >? ? comparing 'tools-Ex.Rout' to 'tools-Ex.Rout.save'
>>         ... OK
>>         ? ? >> > Testing examples for package 'utils'
>>         ? ? >> > Error: testing 'utils' failed
>>         ? ? >> > Execution halted
>>         ? ? >> > make[3]: *** [Makefile.win:29: test-Examples-Base]
>>         Error 1
>>         ? ? >> > make[2]: *** [Makefile.common:185: test-Examples]
>>         Error 2
>>         ? ? >> > make[1]: *** [Makefile.common:171: test-all-basics]
>>         Error 1
>>         ? ? >> > make: *** [Makefile:324: check-all] Error 2
>>         ? ? >> >
>>         ? ? >> > And here is the section from the .Rout.fail for utils:
>>         ? ? >> >
>>         ? ? >> >> ## Multibyte characters in strings (in multibyte
>>         locales):
>>         ? ? >> >> oloc <- Sys.getlocale("LC_CTYPE")
>>         ? ? >> >> mbyte.lc <http://mbyte.lc> <- if(.Platform$OS.type
>>         == "windows")
>>         ? ? >> > +? "English_United States.28605" else "en_GB.UTF-8"
>>         ? ? >> >> try(Sys.setlocale("LC_CTYPE", mbyte.lc
>>         <http://mbyte.lc>))
>>         ? ? >> > [1] "English_United States.28605"
>>         ? ? >> >> ## Truncation behavior (<-> correct width
>>         measurement) for "long"
>>         ? ? >> > non-ASCII:
>>         ? ? >> >> idx <- c(65313:65338, 65345:65350)
>>         ? ? >> >> fwch <- intToUtf8(idx) # full width character
>>         string: each has width 2
>>         ? ? >> >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>         ? ? >> >> (ncc <- c(c.ch <http://c.ch> = nchar(ch), w.ch
>>         <http://w.ch> = nchar(ch,? ?"w"),
>>         ? ? >> > +? ? ? ? ? ?c.fw = nchar(fwch), w.fw = nchar(fwch,
>>         "w")))
>>         ? ? >> > c.ch <http://c.ch> w.ch <http://w.ch> c.fw w.fw
>>         ? ? >> >? ? 64? ?64? ?32? ?64
>>         ? ? >> >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>         ? ? >> >> ## nchar.max: 1st line needs an increase of? 2? in
>>         order to see? 1? (in
>>         ? ? >> > UTF-8!):
>>         ? ? >> >> invisible(lapply(60:66, function(N) str(fwch,
>>         nchar.max = N)))
>>         ? ? >> > Error in strtrim(x.lrg, nchar.max - nc) :
>>         ? ? >> >? ? unsupported conversion from 'UTF-8' in codepage 28605
>>         ? ? >> > Calls: lapply ... FUN -> str -> str.default ->
>>         maybe_truncate -> strtrim
>>         ? ? >> > Execution halted
>>         ? ? >> >
>>         ? ? >> > Has anyone run into this before, please?
>>         ? ? >> >
>>         ? ? >> > If I run this line-by-line starting at the "idx <-",
>>         things are fine.
>>         ? ? >> >
>>         ? ? >> > I also compiled R from source without the OpenBLAS,
>>         and it was fine.
>>         ? ? >> >
>>         ? ? >> > Thanks for any suggestions.
>>         ? ? >> >
>>         ? ? >> > Sincerely,
>>         ? ? >> > Erin
>>         ? ? >> >
>>         ? ? >> >
>>         ? ? >> >
>>         ? ? >> > Erin Hodgess, PhD
>>         ? ? >> > mailto: erinm.hodgess at gmail.com
>>         <mailto:erinm.hodgess at gmail.com>
>>
>>     -- 
>>     Erin Hodgess, PhD
>>     mailto: erinm.hodgess at gmail.com <mailto:erinm.hodgess at gmail.com>
>
>


	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Fri Mar 20 16:03:27 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Fri, 20 Mar 2020 09:03:27 -0600
Subject: [R-pkg-devel] Errors in make check in Windows 10 with OpenBLAS
In-Reply-To: <e6402f7a-83f9-e2d3-4d64-13144b7bfd34@gmail.com>
References: <CACxE24nsuTOj5oPvC=_R_Lf=1bJCFqFChC=CN48iMFgOQD21DA@mail.gmail.com>
 <5de3f2cc-72af-933e-61fe-a6c1ac74ffae@gmail.com>
 <CACxE24=RGU-EvdjmoDpEF91POKV1AH8hZd=stdNRt8xr1c0-2g@mail.gmail.com>
 <24180.41619.299632.396162@stat.math.ethz.ch>
 <CACxE24mb0UZfdvozscoNGA=Q2bMZ=wjoq56RNLERh5oLoZXLCQ@mail.gmail.com>
 <6845f803-9435-e530-79c6-70a1ffbd54f3@gmail.com>
 <CACxE24mOM-LL0PrMZTx5KYmdbB2Ba1YdJsvwTiz2un27C9qRJQ@mail.gmail.com>
 <e6402f7a-83f9-e2d3-4d64-13144b7bfd34@gmail.com>
Message-ID: <CACxE24kF+rLmBGDsVMk2ER+0m4rgkuLncJAqSKLdDRLeRntssg@mail.gmail.com>

Thanks for the explanation!

I will re-run everything.

Sincerely,
Erin


On Fri, Mar 20, 2020 at 9:01 AM Tomas Kalibera <tomas.kalibera at gmail.com>
wrote:

> Thanks, so the problem is that your custom build uses GNU libiconv, which
> does not support codepage 28605. win_iconv, the one shipped with R,
> supports that code page. win_iconv is a wrapper for the Windows API. Unless
> you had a special reason not to, I would just recommend to use win_iconv.
> The "experience" will match the C library conversion calls, which may be
> used directly in some code at some places, and it is most tested as people
> normally use it. Still, the problem is not specific to strtrim, just to the
> example.
>
> Best
>
> Tomas
>
>
> On 3/20/20 3:27 PM, Erin Hodgess wrote:
>
> Here are the results.
>
> Looks like enc2native and the iconv settings are different.
>
>
> > #output from custom build
> > Sys.getlocale()
> [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
> States.1252;LC_MONETARY=English_United
> States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
> > enc2native("\uff21")
> [1] "<U+FF21>"
> > enc2native("\u4e2d")
> [1] "<U+4E2D>"
> > Sys.setlocale("LC_CTYPE", "English_United States.28605")
> [1] "English_United States.28605"
> > enc2native("\uff21")
> Error: unsupported conversion from 'UTF-8' in codepage 28605
> > enc2native("\u4e2d")
> Error: unsupported conversion from 'UTF-8' in codepage 28605
> > extSoftVersion()[c("iconv","BLAS")]
>               iconv                BLAS
> "GNU libiconv 1.14"                  ""
>
>
> > #output from regular build
> > Sys.getlocale()
> [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
> States.1252;LC_MONETARY=English_United
> States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
> > enc2native("\uff21")
> [1] "A"
> > enc2native("\u4e2d")
> [1] "<U+4E2D>"
> > Sys.setlocale("LC_CTYPE", "English_United States.28605")
> [1] "English_United States.28605"
> > enc2native("\uff21")
> [1] "A"
> > enc2native("\u4e2d")
> [1] "<U+4E2D>"
> > extSoftVersion()[c("iconv","BLAS")]
>       iconv        BLAS
> "win_iconv"          ""
> >
>
> Thanks!
>
>
> Erin Hodgess, PhD
> mailto: erinm.hodgess at gmail.com
>
>
> On Fri, Mar 20, 2020 at 8:03 AM Tomas Kalibera <tomas.kalibera at gmail.com>
> wrote:
>
>> Hi Erin,
>>
>> when you are building from sources, you can always uncomment the example
>> in str.Rd. But it would be good first to find out why it is failing on your
>> system/build.
>>
>> Please run the example in Rgui of the official R 3.6.3 build on your
>> machine. Does it work there?
>>
>> Please run the following commands in Rgui of the official R 3.6.3 build
>> on the machine and on your custom build. What do you get?
>>
>> Sys.getlocale()
>> enc2native("\uff21")
>> enc2native("\u4e2d")
>> Sys.setlocale("LC_CTYPE", "English_United States.28605")
>> enc2native("\uff21")
>> enc2native("\u4e2d")
>> extSoftVersion()[c("iconv","BLAS")]
>> Thanks,
>> Tomas
>>
>> On 3/20/20 2:35 PM, Erin Hodgess wrote:
>>
>> I was wondering if there is a way to either skip the utilities check and
>> continuing, in order to test the other packages, please.
>>
>> Thanks!
>>
>>
>> On Fri, Mar 20, 2020 at 5:01 AM Martin Maechler <
>> maechler at stat.math.ethz.ch> wrote:
>>
>>> >>>>> Erin Hodgess    on Thu, 19 Mar 2020 22:44:39 -0600 writes:
>>>
>>>      > Hi Tomas and others:
>>>      > Here is the session Info.  I also used the str example both
>>> without and
>>>      > with changing the locale.
>>>
>>>      > sI <- sessionInfo()
>>>     >> str(sI)
>>>      > List of 10
>>>      > $ R.version :List of 14
>>>      > ..$ platform      : chr "x86_64-w64-mingw32"
>>>      > ..$ arch          : chr "x86_64"
>>>      > ..$ os            : chr "mingw32"
>>>      > ..$ system        : chr "x86_64, mingw32"
>>>      > ..$ status        : chr ""
>>>      > ..$ major         : chr "3"
>>>      > ..$ minor         : chr "6.3"
>>>      > ..$ year          : chr "2020"
>>>      > ..$ month         : chr "02"
>>>      > ..$ day           : chr "29"
>>>      > ..$ svn rev       : chr "77875"
>>>      > ..$ language      : chr "R"
>>>      > ..$ version.string: chr "R version 3.6.3 (2020-02-29)"
>>>      > ..$ nickname      : chr "Holding the Windsock"
>>>      > $ platform  : chr "x86_64-w64-mingw32/x64 (64-bit)"
>>>      > $ locale    : chr "LC_COLLATE=English_United
>>>      > States.1252;LC_CTYPE=English_United
>>> States.1252;LC_MONETARY=English_United
>>>      > States.125"| __truncated__
>>>      > $ running   : chr "Windows 10 x64 (build 18362)"
>>>      > $ RNGkind   : chr [1:3] "Mersenne-Twister" "Inversion" "Rejection"
>>>      > $ basePkgs  : chr [1:7] "stats" "graphics" "grDevices" "utils" ...
>>>      > $ loadedOnly:List of 1
>>>      > ..$ compiler:List of 9
>>>      > .. ..$ Package    : chr "compiler"
>>>      > .. ..$ Version    : chr "3.6.3"
>>>      > .. ..$ Priority   : chr "base"
>>>      > .. ..$ Title      : chr "The R Compiler Package"
>>>      > .. ..$ Author     : chr "Luke Tierney <luke-tierney at uiowa.edu>"
>>>      > .. ..$ Maintainer : chr "R Core Team <R-core at r-project.org>"
>>>      > .. ..$ Description: chr "Byte code compiler for R."
>>>      > .. ..$ License    : chr "Part of R 3.6.3"
>>>      > .. ..$ Built      : chr "R 3.6.3; ; 2020-03-20 04:29:00 UTC;
>>> windows"
>>>      > .. ..- attr(*, "class")= chr "packageDescription"
>>>      > .. ..- attr(*, "file")= chr
>>>      > "c:/newtimeR/R-3.6.3/library/compiler/Meta/package.rds"
>>>      > $ matprod   : chr "default"
>>>      > $ BLAS      : chr ""
>>>      > $ LAPACK    : chr ""
>>>      > - attr(*, "class")= chr "sessionInfo"
>>>
>>>
>>>      > Running the str example WITHOUT changing the locale:
>>>     >> ## Truncation behavior (<-> correct width measurement) for "long"
>>>      > non-ASCII:
>>>     >> idx <- c(65313:65338, 65345:65350)
>>>     >> fwch <- intToUtf8(idx) # full width character string: each has
>>> width 2
>>>     >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>>     >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>>      > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>>      > c.ch w.ch c.fw w.fw
>>>      > 64   64   32   64
>>>     >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>>     >> ## nchar.max: 1st line needs an increase of  2  in order to see
>>> 1  (in
>>>      > UTF-$
>>>     >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+"| __truncated__
>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+F"| __truncated__
>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF"| __truncated__
>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF2"|
>>> __truncated__
>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26"|
>>> __truncated__
>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26>"|
>>> __truncated__
>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26><"|
>>> __truncated__
>>>     >> invisible(lapply(60:66, function(N) str( ch , nchar.max = N))) #
>>> "1 is 1"
>>>      > he$
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."| __truncated__
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"| __truncated__
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"|
>>> __truncated__
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."|
>>> __truncated__
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"|
>>> __truncated__
>>>      > chr
>>> "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>>>     >>
>>>
>>>      > Running the str example WITH changing the locale:
>>>
>>>      > oloc <- Sys.getlocale("LC_CTYPE")
>>>     >> mbyte.lc <- if(.Platform$OS.type == "windows")
>>>      > +  "English_United States.28605" else "en_GB.UTF-8"
>>>     >> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
>>>      > [1] "English_United States.28605"
>>>     >> ## Truncation behavior (<-> correct width measurement) for "long"
>>>      > non-ASCII:
>>>     >> idx <- c(65313:65338, 65345:65350)
>>>     >> fwch <- intToUtf8(idx) # full width character string: each has
>>> width 2
>>>     >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>>     >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>>      > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>>      > c.ch w.ch c.fw w.fw
>>>      > 64   64   32   64
>>>     >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>>     >> ## nchar.max: 1st line needs an increase of  2  in order to see
>>> 1  (in
>>>      > UTF-$
>>>     >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>>      > Error in strtrim(x.lrg, nchar.max - nc) :
>>>      > unsupported conversion from 'UTF-8' in codepage 28605
>>>     >> invisible(lapply(60:66, function(N) str( ch , nchar.max = N))) #
>>> "1 is 1"
>>>      > he$
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."| __truncated__
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"| __truncated__
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"|
>>> __truncated__
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."|
>>> __truncated__
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"|
>>> __truncated__
>>>      > chr
>>> "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>>>
>>>      > This is pretty strange.
>>>
>>> It is strange indeed  that  strtrim() fails in this situation.
>>>
>>> From what you wrote previously, this only happens when you link
>>> with OpenBLAS but not when you use R's own BLAS.
>>> Are you sure that that was the only difference, but not rather
>>> the difference in the locales you used in your two versions of R
>>> on Windows?
>>>
>>> Martin
>>>
>>>      > Thanks for any help.
>>>
>>>      > Sincerely,
>>>      > Erin
>>>
>>>      > Erin Hodgess, PhD
>>>      > mailto: erinm.hodgess at gmail.com
>>>
>>>
>>>      > On Thu, Mar 19, 2020 at 2:29 AM Tomas Kalibera <
>>> tomas.kalibera at gmail.com>
>>>      > wrote:
>>>
>>>     >> Hi Erin,
>>>     >>
>>>     >> this comes from examples in ?str. Could you please try to find a
>>> minimal
>>>     >> example to reproduce on your system based on that? I would look
>>> for
>>>     >> "line needs" in ?str and experiment with reducing the example
>>> there
>>>     >> while still getting the error. Once it is minimal, could you
>>> please try
>>>     >> also on the official build of R on your machine?
>>>     >>
>>>     >> Also it would be nice to have a session info. If it works in the
>>>     >> official build but not your custom build, then one would have to
>>> look
>>>     >> also into how the custom build is done.
>>>     >>
>>>     >> Thanks
>>>     >> Tomas
>>>     >>
>>>     >>
>>>     >> On 3/19/20 8:02 AM, Erin Hodgess wrote:
>>>     >> > Hello everyone:
>>>     >> >
>>>     >> > I have built the latest version of the OpenBLAS on my Windows
>>> 10 machine.
>>>     >> > When I run make distribution in R, everything is fine.
>>>     >> >
>>>     >> > However, when I run make check all,  I get the following error:
>>>     >> >
>>>     >> > C:\newtimeR\R-3.6.3\src\gnuwin32>make check-all
>>>     >> > Testing examples for package 'base'
>>>     >> > Testing examples for package 'tools'
>>>     >> >    comparing 'tools-Ex.Rout' to 'tools-Ex.Rout.save' ... OK
>>>     >> > Testing examples for package 'utils'
>>>     >> > Error: testing 'utils' failed
>>>     >> > Execution halted
>>>     >> > make[3]: *** [Makefile.win:29: test-Examples-Base] Error 1
>>>     >> > make[2]: *** [Makefile.common:185: test-Examples] Error 2
>>>     >> > make[1]: *** [Makefile.common:171: test-all-basics] Error 1
>>>     >> > make: *** [Makefile:324: check-all] Error 2
>>>     >> >
>>>     >> > And here is the section from the .Rout.fail for utils:
>>>     >> >
>>>     >> >> ## Multibyte characters in strings (in multibyte locales):
>>>     >> >> oloc <- Sys.getlocale("LC_CTYPE")
>>>     >> >> mbyte.lc <- if(.Platform$OS.type == "windows")
>>>     >> > +  "English_United States.28605" else "en_GB.UTF-8"
>>>     >> >> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
>>>     >> > [1] "English_United States.28605"
>>>     >> >> ## Truncation behavior (<-> correct width measurement) for
>>> "long"
>>>     >> > non-ASCII:
>>>     >> >> idx <- c(65313:65338, 65345:65350)
>>>     >> >> fwch <- intToUtf8(idx) # full width character string: each has
>>> width 2
>>>     >> >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>>     >> >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>>     >> > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>>     >> > c.ch w.ch c.fw w.fw
>>>     >> >    64   64   32   64
>>>     >> >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>>     >> >> ## nchar.max: 1st line needs an increase of  2  in order to
>>> see  1  (in
>>>     >> > UTF-8!):
>>>     >> >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>>     >> > Error in strtrim(x.lrg, nchar.max - nc) :
>>>     >> >    unsupported conversion from 'UTF-8' in codepage 28605
>>>     >> > Calls: lapply ... FUN -> str -> str.default -> maybe_truncate
>>> -> strtrim
>>>     >> > Execution halted
>>>     >> >
>>>     >> > Has anyone run into this before, please?
>>>     >> >
>>>     >> > If I run this line-by-line starting at the "idx <-", things are
>>> fine.
>>>     >> >
>>>     >> > I also compiled R from source without the OpenBLAS, and it was
>>> fine.
>>>     >> >
>>>     >> > Thanks for any suggestions.
>>>     >> >
>>>     >> > Sincerely,
>>>     >> > Erin
>>>     >> >
>>>     >> >
>>>     >> >
>>>     >> > Erin Hodgess, PhD
>>>     >> > mailto: erinm.hodgess at gmail.com
>>>
>>> --
>> Erin Hodgess, PhD
>> mailto: erinm.hodgess at gmail.com
>>
>>
>>
> --
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Sat Mar 21 15:58:11 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Sat, 21 Mar 2020 08:58:11 -0600
Subject: [R-pkg-devel] Errors in make check in Windows 10 with OpenBLAS
In-Reply-To: <e6402f7a-83f9-e2d3-4d64-13144b7bfd34@gmail.com>
References: <CACxE24nsuTOj5oPvC=_R_Lf=1bJCFqFChC=CN48iMFgOQD21DA@mail.gmail.com>
 <5de3f2cc-72af-933e-61fe-a6c1ac74ffae@gmail.com>
 <CACxE24=RGU-EvdjmoDpEF91POKV1AH8hZd=stdNRt8xr1c0-2g@mail.gmail.com>
 <24180.41619.299632.396162@stat.math.ethz.ch>
 <CACxE24mb0UZfdvozscoNGA=Q2bMZ=wjoq56RNLERh5oLoZXLCQ@mail.gmail.com>
 <6845f803-9435-e530-79c6-70a1ffbd54f3@gmail.com>
 <CACxE24mOM-LL0PrMZTx5KYmdbB2Ba1YdJsvwTiz2un27C9qRJQ@mail.gmail.com>
 <e6402f7a-83f9-e2d3-4d64-13144b7bfd34@gmail.com>
Message-ID: <CACxE24kERDc-J3anqBuQqxLPvHVuyAE2SM+9kErQWiyrZik8KQ@mail.gmail.com>

Hello again.

So I'm trying to find the place where the GNU iconv comes from.  However, I
looked at output from both the regular build and the custom, and I'm not
seeing any differences in how win_iconv is generated.

Any suggestions, please?

Custom:
c:/Rtools/mingw_64/bin/ar crs libtz.a localtime.o registryTZ.o strftime.o
installing zoneinfo
making win_iconv.d from win_iconv.c
c:/Rtools/mingw_64/bin/gcc -std=gnu99  -I../../include  -O3 -Wall -pedantic
-march=native -pipe   -c win_iconv.c -o win_iconv.o
c:/Rtools/mingw_64/bin/gcc -std=gnu99  -shared   -o Riconv.dll Riconv.def
win_iconv.o

Regular:
c:/Rtools/mingw_64/bin/ar crs libtz.a localtime.o registryTZ.o strftime.o
installing zoneinfo
making win_iconv.d from win_iconv.c
c:/Rtools/mingw_64/bin/gcc -std=gnu99  -I../../include  -O3 -Wall -pedantic
-mtune=core2   -c win_iconv.c -o win_iconv.o
c:/Rtools/mingw_64/bin/gcc -std=gnu99  -shared   -o Riconv.dll Riconv.def
win_iconv.o

Just the  -march=native -pipe

Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com


On Fri, Mar 20, 2020 at 9:01 AM Tomas Kalibera <tomas.kalibera at gmail.com>
wrote:

> Thanks, so the problem is that your custom build uses GNU libiconv, which
> does not support codepage 28605. win_iconv, the one shipped with R,
> supports that code page. win_iconv is a wrapper for the Windows API. Unless
> you had a special reason not to, I would just recommend to use win_iconv.
> The "experience" will match the C library conversion calls, which may be
> used directly in some code at some places, and it is most tested as people
> normally use it. Still, the problem is not specific to strtrim, just to the
> example.
>
> Best
> Tomas
>
>
> On 3/20/20 3:27 PM, Erin Hodgess wrote:
>
> Here are the results.
>
> Looks like enc2native and the iconv settings are different.
>
>
> > #output from custom build
> > Sys.getlocale()
> [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
> States.1252;LC_MONETARY=English_United
> States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
> > enc2native("\uff21")
> [1] "<U+FF21>"
> > enc2native("\u4e2d")
> [1] "<U+4E2D>"
> > Sys.setlocale("LC_CTYPE", "English_United States.28605")
> [1] "English_United States.28605"
> > enc2native("\uff21")
> Error: unsupported conversion from 'UTF-8' in codepage 28605
> > enc2native("\u4e2d")
> Error: unsupported conversion from 'UTF-8' in codepage 28605
> > extSoftVersion()[c("iconv","BLAS")]
>               iconv                BLAS
> "GNU libiconv 1.14"                  ""
>
>
> > #output from regular build
> > Sys.getlocale()
> [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
> States.1252;LC_MONETARY=English_United
> States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
> > enc2native("\uff21")
> [1] "A"
> > enc2native("\u4e2d")
> [1] "<U+4E2D>"
> > Sys.setlocale("LC_CTYPE", "English_United States.28605")
> [1] "English_United States.28605"
> > enc2native("\uff21")
> [1] "A"
> > enc2native("\u4e2d")
> [1] "<U+4E2D>"
> > extSoftVersion()[c("iconv","BLAS")]
>       iconv        BLAS
> "win_iconv"          ""
> >
>
> Thanks!
>
>
> Erin Hodgess, PhD
> mailto: erinm.hodgess at gmail.com
>
>
> On Fri, Mar 20, 2020 at 8:03 AM Tomas Kalibera <tomas.kalibera at gmail.com>
> wrote:
>
>> Hi Erin,
>>
>> when you are building from sources, you can always uncomment the example
>> in str.Rd. But it would be good first to find out why it is failing on your
>> system/build.
>>
>> Please run the example in Rgui of the official R 3.6.3 build on your
>> machine. Does it work there?
>>
>> Please run the following commands in Rgui of the official R 3.6.3 build
>> on the machine and on your custom build. What do you get?
>>
>> Sys.getlocale()
>> enc2native("\uff21")
>> enc2native("\u4e2d")
>> Sys.setlocale("LC_CTYPE", "English_United States.28605")
>> enc2native("\uff21")
>> enc2native("\u4e2d")
>> extSoftVersion()[c("iconv","BLAS")]
>> Thanks,
>> Tomas
>>
>> On 3/20/20 2:35 PM, Erin Hodgess wrote:
>>
>> I was wondering if there is a way to either skip the utilities check and
>> continuing, in order to test the other packages, please.
>>
>> Thanks!
>>
>>
>> On Fri, Mar 20, 2020 at 5:01 AM Martin Maechler <
>> maechler at stat.math.ethz.ch> wrote:
>>
>>> >>>>> Erin Hodgess    on Thu, 19 Mar 2020 22:44:39 -0600 writes:
>>>
>>>      > Hi Tomas and others:
>>>      > Here is the session Info.  I also used the str example both
>>> without and
>>>      > with changing the locale.
>>>
>>>      > sI <- sessionInfo()
>>>     >> str(sI)
>>>      > List of 10
>>>      > $ R.version :List of 14
>>>      > ..$ platform      : chr "x86_64-w64-mingw32"
>>>      > ..$ arch          : chr "x86_64"
>>>      > ..$ os            : chr "mingw32"
>>>      > ..$ system        : chr "x86_64, mingw32"
>>>      > ..$ status        : chr ""
>>>      > ..$ major         : chr "3"
>>>      > ..$ minor         : chr "6.3"
>>>      > ..$ year          : chr "2020"
>>>      > ..$ month         : chr "02"
>>>      > ..$ day           : chr "29"
>>>      > ..$ svn rev       : chr "77875"
>>>      > ..$ language      : chr "R"
>>>      > ..$ version.string: chr "R version 3.6.3 (2020-02-29)"
>>>      > ..$ nickname      : chr "Holding the Windsock"
>>>      > $ platform  : chr "x86_64-w64-mingw32/x64 (64-bit)"
>>>      > $ locale    : chr "LC_COLLATE=English_United
>>>      > States.1252;LC_CTYPE=English_United
>>> States.1252;LC_MONETARY=English_United
>>>      > States.125"| __truncated__
>>>      > $ running   : chr "Windows 10 x64 (build 18362)"
>>>      > $ RNGkind   : chr [1:3] "Mersenne-Twister" "Inversion" "Rejection"
>>>      > $ basePkgs  : chr [1:7] "stats" "graphics" "grDevices" "utils" ...
>>>      > $ loadedOnly:List of 1
>>>      > ..$ compiler:List of 9
>>>      > .. ..$ Package    : chr "compiler"
>>>      > .. ..$ Version    : chr "3.6.3"
>>>      > .. ..$ Priority   : chr "base"
>>>      > .. ..$ Title      : chr "The R Compiler Package"
>>>      > .. ..$ Author     : chr "Luke Tierney <luke-tierney at uiowa.edu>"
>>>      > .. ..$ Maintainer : chr "R Core Team <R-core at r-project.org>"
>>>      > .. ..$ Description: chr "Byte code compiler for R."
>>>      > .. ..$ License    : chr "Part of R 3.6.3"
>>>      > .. ..$ Built      : chr "R 3.6.3; ; 2020-03-20 04:29:00 UTC;
>>> windows"
>>>      > .. ..- attr(*, "class")= chr "packageDescription"
>>>      > .. ..- attr(*, "file")= chr
>>>      > "c:/newtimeR/R-3.6.3/library/compiler/Meta/package.rds"
>>>      > $ matprod   : chr "default"
>>>      > $ BLAS      : chr ""
>>>      > $ LAPACK    : chr ""
>>>      > - attr(*, "class")= chr "sessionInfo"
>>>
>>>
>>>      > Running the str example WITHOUT changing the locale:
>>>     >> ## Truncation behavior (<-> correct width measurement) for "long"
>>>      > non-ASCII:
>>>     >> idx <- c(65313:65338, 65345:65350)
>>>     >> fwch <- intToUtf8(idx) # full width character string: each has
>>> width 2
>>>     >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>>     >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>>      > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>>      > c.ch w.ch c.fw w.fw
>>>      > 64   64   32   64
>>>     >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>>     >> ## nchar.max: 1st line needs an increase of  2  in order to see
>>> 1  (in
>>>      > UTF-$
>>>     >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+"| __truncated__
>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+F"| __truncated__
>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF"| __truncated__
>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF2"|
>>> __truncated__
>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26"|
>>> __truncated__
>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26>"|
>>> __truncated__
>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26><"|
>>> __truncated__
>>>     >> invisible(lapply(60:66, function(N) str( ch , nchar.max = N))) #
>>> "1 is 1"
>>>      > he$
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."| __truncated__
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"| __truncated__
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"|
>>> __truncated__
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."|
>>> __truncated__
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"|
>>> __truncated__
>>>      > chr
>>> "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>>>     >>
>>>
>>>      > Running the str example WITH changing the locale:
>>>
>>>      > oloc <- Sys.getlocale("LC_CTYPE")
>>>     >> mbyte.lc <- if(.Platform$OS.type == "windows")
>>>      > +  "English_United States.28605" else "en_GB.UTF-8"
>>>     >> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
>>>      > [1] "English_United States.28605"
>>>     >> ## Truncation behavior (<-> correct width measurement) for "long"
>>>      > non-ASCII:
>>>     >> idx <- c(65313:65338, 65345:65350)
>>>     >> fwch <- intToUtf8(idx) # full width character string: each has
>>> width 2
>>>     >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>>     >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>>      > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>>      > c.ch w.ch c.fw w.fw
>>>      > 64   64   32   64
>>>     >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>>     >> ## nchar.max: 1st line needs an increase of  2  in order to see
>>> 1  (in
>>>      > UTF-$
>>>     >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>>      > Error in strtrim(x.lrg, nchar.max - nc) :
>>>      > unsupported conversion from 'UTF-8' in codepage 28605
>>>     >> invisible(lapply(60:66, function(N) str( ch , nchar.max = N))) #
>>> "1 is 1"
>>>      > he$
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."| __truncated__
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"| __truncated__
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"|
>>> __truncated__
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."|
>>> __truncated__
>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"|
>>> __truncated__
>>>      > chr
>>> "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>>>
>>>      > This is pretty strange.
>>>
>>> It is strange indeed  that  strtrim() fails in this situation.
>>>
>>> From what you wrote previously, this only happens when you link
>>> with OpenBLAS but not when you use R's own BLAS.
>>> Are you sure that that was the only difference, but not rather
>>> the difference in the locales you used in your two versions of R
>>> on Windows?
>>>
>>> Martin
>>>
>>>      > Thanks for any help.
>>>
>>>      > Sincerely,
>>>      > Erin
>>>
>>>      > Erin Hodgess, PhD
>>>      > mailto: erinm.hodgess at gmail.com
>>>
>>>
>>>      > On Thu, Mar 19, 2020 at 2:29 AM Tomas Kalibera <
>>> tomas.kalibera at gmail.com>
>>>      > wrote:
>>>
>>>     >> Hi Erin,
>>>     >>
>>>     >> this comes from examples in ?str. Could you please try to find a
>>> minimal
>>>     >> example to reproduce on your system based on that? I would look
>>> for
>>>     >> "line needs" in ?str and experiment with reducing the example
>>> there
>>>     >> while still getting the error. Once it is minimal, could you
>>> please try
>>>     >> also on the official build of R on your machine?
>>>     >>
>>>     >> Also it would be nice to have a session info. If it works in the
>>>     >> official build but not your custom build, then one would have to
>>> look
>>>     >> also into how the custom build is done.
>>>     >>
>>>     >> Thanks
>>>     >> Tomas
>>>     >>
>>>     >>
>>>     >> On 3/19/20 8:02 AM, Erin Hodgess wrote:
>>>     >> > Hello everyone:
>>>     >> >
>>>     >> > I have built the latest version of the OpenBLAS on my Windows
>>> 10 machine.
>>>     >> > When I run make distribution in R, everything is fine.
>>>     >> >
>>>     >> > However, when I run make check all,  I get the following error:
>>>     >> >
>>>     >> > C:\newtimeR\R-3.6.3\src\gnuwin32>make check-all
>>>     >> > Testing examples for package 'base'
>>>     >> > Testing examples for package 'tools'
>>>     >> >    comparing 'tools-Ex.Rout' to 'tools-Ex.Rout.save' ... OK
>>>     >> > Testing examples for package 'utils'
>>>     >> > Error: testing 'utils' failed
>>>     >> > Execution halted
>>>     >> > make[3]: *** [Makefile.win:29: test-Examples-Base] Error 1
>>>     >> > make[2]: *** [Makefile.common:185: test-Examples] Error 2
>>>     >> > make[1]: *** [Makefile.common:171: test-all-basics] Error 1
>>>     >> > make: *** [Makefile:324: check-all] Error 2
>>>     >> >
>>>     >> > And here is the section from the .Rout.fail for utils:
>>>     >> >
>>>     >> >> ## Multibyte characters in strings (in multibyte locales):
>>>     >> >> oloc <- Sys.getlocale("LC_CTYPE")
>>>     >> >> mbyte.lc <- if(.Platform$OS.type == "windows")
>>>     >> > +  "English_United States.28605" else "en_GB.UTF-8"
>>>     >> >> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
>>>     >> > [1] "English_United States.28605"
>>>     >> >> ## Truncation behavior (<-> correct width measurement) for
>>> "long"
>>>     >> > non-ASCII:
>>>     >> >> idx <- c(65313:65338, 65345:65350)
>>>     >> >> fwch <- intToUtf8(idx) # full width character string: each has
>>> width 2
>>>     >> >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>>     >> >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>>     >> > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>>     >> > c.ch w.ch c.fw w.fw
>>>     >> >    64   64   32   64
>>>     >> >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>>     >> >> ## nchar.max: 1st line needs an increase of  2  in order to
>>> see  1  (in
>>>     >> > UTF-8!):
>>>     >> >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>>     >> > Error in strtrim(x.lrg, nchar.max - nc) :
>>>     >> >    unsupported conversion from 'UTF-8' in codepage 28605
>>>     >> > Calls: lapply ... FUN -> str -> str.default -> maybe_truncate
>>> -> strtrim
>>>     >> > Execution halted
>>>     >> >
>>>     >> > Has anyone run into this before, please?
>>>     >> >
>>>     >> > If I run this line-by-line starting at the "idx <-", things are
>>> fine.
>>>     >> >
>>>     >> > I also compiled R from source without the OpenBLAS, and it was
>>> fine.
>>>     >> >
>>>     >> > Thanks for any suggestions.
>>>     >> >
>>>     >> > Sincerely,
>>>     >> > Erin
>>>     >> >
>>>     >> >
>>>     >> >
>>>     >> > Erin Hodgess, PhD
>>>     >> > mailto: erinm.hodgess at gmail.com
>>>
>>> --
>> Erin Hodgess, PhD
>> mailto: erinm.hodgess at gmail.com
>>
>>
>>
>

	[[alternative HTML version deleted]]


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Sat Mar 21 17:29:05 2020
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Sat, 21 Mar 2020 17:29:05 +0100
Subject: [R-pkg-devel] Errors in make check in Windows 10 with OpenBLAS
In-Reply-To: <CACxE24kERDc-J3anqBuQqxLPvHVuyAE2SM+9kErQWiyrZik8KQ@mail.gmail.com>
References: <CACxE24nsuTOj5oPvC=_R_Lf=1bJCFqFChC=CN48iMFgOQD21DA@mail.gmail.com>
 <5de3f2cc-72af-933e-61fe-a6c1ac74ffae@gmail.com>
 <CACxE24=RGU-EvdjmoDpEF91POKV1AH8hZd=stdNRt8xr1c0-2g@mail.gmail.com>
 <24180.41619.299632.396162@stat.math.ethz.ch>
 <CACxE24mb0UZfdvozscoNGA=Q2bMZ=wjoq56RNLERh5oLoZXLCQ@mail.gmail.com>
 <6845f803-9435-e530-79c6-70a1ffbd54f3@gmail.com>
 <CACxE24mOM-LL0PrMZTx5KYmdbB2Ba1YdJsvwTiz2un27C9qRJQ@mail.gmail.com>
 <e6402f7a-83f9-e2d3-4d64-13144b7bfd34@gmail.com>
 <CACxE24kERDc-J3anqBuQqxLPvHVuyAE2SM+9kErQWiyrZik8KQ@mail.gmail.com>
Message-ID: <1410a3a8-b8c7-b325-e75e-f24e13e7e4c6@gmail.com>

Maybe the created Riconv.dll is copied over by libiconv at some point 
during your custom build.

Tomas


On 3/21/20 3:58 PM, Erin Hodgess wrote:
> Hello again.
>
> So I'm trying to find the place where the GNU iconv comes from.? 
> However, I looked at output from both the regular build and the 
> custom, and I'm not seeing any differences in how win_iconv is generated.
>
> Any suggestions, please?
>
> Custom:
> c:/Rtools/mingw_64/bin/ar crs libtz.a localtime.o registryTZ.o strftime.o
> installing zoneinfo
> making win_iconv.d from win_iconv.c
> c:/Rtools/mingw_64/bin/gcc -std=gnu99 ?-I../../include ?-O3 -Wall 
> -pedantic -march=native -pipe ? -c win_iconv.c -o win_iconv.o
> c:/Rtools/mingw_64/bin/gcc -std=gnu99 ?-shared ? -o Riconv.dll 
> Riconv.def win_iconv.o
>
> Regular:
> c:/Rtools/mingw_64/bin/ar crs libtz.a localtime.o registryTZ.o strftime.o
> installing zoneinfo
> making win_iconv.d from win_iconv.c
> c:/Rtools/mingw_64/bin/gcc -std=gnu99 ?-I../../include ?-O3 -Wall 
> -pedantic -mtune=core2 ? -c win_iconv.c -o win_iconv.o
> c:/Rtools/mingw_64/bin/gcc -std=gnu99 ?-shared ? -o Riconv.dll 
> Riconv.def win_iconv.o
>
> Just the? -march=native -pipe
>
> Erin Hodgess, PhD
> mailto: erinm.hodgess at gmail.com <mailto:erinm.hodgess at gmail.com>
>
>
> On Fri, Mar 20, 2020 at 9:01 AM Tomas Kalibera 
> <tomas.kalibera at gmail.com <mailto:tomas.kalibera at gmail.com>> wrote:
>
>     Thanks, so the problem is that your custom build uses GNU
>     libiconv, which does not support codepage 28605. win_iconv, the
>     one shipped with R, supports that code page. win_iconv is a
>     wrapper for the Windows API. Unless you had a special reason not
>     to, I would just recommend to use win_iconv. The "experience" will
>     match the C library conversion calls, which may be used directly
>     in some code at some places, and it is most tested as people
>     normally use it. Still, the problem is not specific to strtrim,
>     just to the example.
>
>     Best
>     Tomas
>
>
>     On 3/20/20 3:27 PM, Erin Hodgess wrote:
>>     Here are the results.
>>
>>     Looks like enc2native and the iconv settings are different.
>>
>>
>>     > #output from custom build
>>     > Sys.getlocale()
>>     [1] "LC_COLLATE=English_United
>>     States.1252;LC_CTYPE=English_United
>>     States.1252;LC_MONETARY=English_United
>>     States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
>>     > enc2native("\uff21")
>>     [1] "<U+FF21>"
>>     > enc2native("\u4e2d")
>>     [1] "<U+4E2D>"
>>     > Sys.setlocale("LC_CTYPE", "English_United States.28605")
>>     [1] "English_United States.28605"
>>     > enc2native("\uff21")
>>     Error: unsupported conversion from 'UTF-8' in codepage 28605
>>     > enc2native("\u4e2d")
>>     Error: unsupported conversion from 'UTF-8' in codepage 28605
>>     > extSoftVersion()[c("iconv","BLAS")]
>>     ? ? ? ? ? ? ? iconv ? ? ? ? ? ? ? ?BLAS
>>     "GNU libiconv 1.14" ? ? ? ? ? ? ? ? ?""
>>
>>
>>     > #output from regular build
>>     > Sys.getlocale()
>>     [1] "LC_COLLATE=English_United
>>     States.1252;LC_CTYPE=English_United
>>     States.1252;LC_MONETARY=English_United
>>     States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
>>     > enc2native("\uff21")
>>     [1] "A"
>>     > enc2native("\u4e2d")
>>     [1] "<U+4E2D>"
>>     > Sys.setlocale("LC_CTYPE", "English_United States.28605")
>>     [1] "English_United States.28605"
>>     > enc2native("\uff21")
>>     [1] "A"
>>     > enc2native("\u4e2d")
>>     [1] "<U+4E2D>"
>>     > extSoftVersion()[c("iconv","BLAS")]
>>     ? ? ? iconv ? ? ? ?BLAS
>>     "win_iconv" ? ? ? ? ?""
>>     >
>>
>>     Thanks!
>>
>>
>>     Erin Hodgess, PhD
>>     mailto: erinm.hodgess at gmail.com <mailto:erinm.hodgess at gmail.com>
>>
>>
>>     On Fri, Mar 20, 2020 at 8:03 AM Tomas Kalibera
>>     <tomas.kalibera at gmail.com <mailto:tomas.kalibera at gmail.com>> wrote:
>>
>>         Hi Erin,
>>
>>         when you are building from sources, you can always uncomment
>>         the example in str.Rd. But it would be good first to find out
>>         why it is failing on your system/build.
>>
>>         Please run the example in Rgui of the official R 3.6.3 build
>>         on your machine. Does it work there?
>>
>>         Please run the following commands in Rgui of the official R
>>         3.6.3 build on the machine and on your custom build. What do
>>         you get?
>>
>>         Sys.getlocale()
>>         enc2native("\uff21")
>>         enc2native("\u4e2d")
>>         Sys.setlocale("LC_CTYPE", "English_United States.28605")
>>         enc2native("\uff21")
>>         enc2native("\u4e2d")
>>         extSoftVersion()[c("iconv","BLAS")]
>>
>>         Thanks,
>>         Tomas
>>
>>         On 3/20/20 2:35 PM, Erin Hodgess wrote:
>>>         I was wondering if there is a way to either skip the
>>>         utilities check and continuing, in order to test the other
>>>         packages, please.
>>>
>>>         Thanks!
>>>
>>>
>>>         On Fri, Mar 20, 2020 at 5:01 AM Martin Maechler
>>>         <maechler at stat.math.ethz.ch
>>>         <mailto:maechler at stat.math.ethz.ch>> wrote:
>>>
>>>             >>>>> Erin Hodgess? ? on Thu, 19 Mar 2020 22:44:39 -0600
>>>             writes:
>>>
>>>             ? ? ?> Hi Tomas and others:
>>>             ? ? ?> Here is the session Info.? I also used the str
>>>             example both without and
>>>             ? ? ?> with changing the locale.
>>>
>>>             ? ? ?> sI <- sessionInfo()
>>>             ? ? >> str(sI)
>>>             ? ? ?> List of 10
>>>             ? ? ?> $ R.version :List of 14
>>>             ? ? ?> ..$ platform? ? ? : chr "x86_64-w64-mingw32"
>>>             ? ? ?> ..$ arch? ? ? ? ? : chr "x86_64"
>>>             ? ? ?> ..$ os? ? ? ? ? ? : chr "mingw32"
>>>             ? ? ?> ..$ system? ? ? ? : chr "x86_64, mingw32"
>>>             ? ? ?> ..$ status? ? ? ? : chr ""
>>>             ? ? ?> ..$ major? ? ? ? ?: chr "3"
>>>             ? ? ?> ..$ minor? ? ? ? ?: chr "6.3"
>>>             ? ? ?> ..$ year? ? ? ? ? : chr "2020"
>>>             ? ? ?> ..$ month? ? ? ? ?: chr "02"
>>>             ? ? ?> ..$ day? ? ? ? ? ?: chr "29"
>>>             ? ? ?> ..$ svn rev? ? ? ?: chr "77875"
>>>             ? ? ?> ..$ language? ? ? : chr "R"
>>>             ? ? ?> ..$ version.string: chr "R version 3.6.3
>>>             (2020-02-29)"
>>>             ? ? ?> ..$ nickname? ? ? : chr "Holding the Windsock"
>>>             ? ? ?> $ platform? : chr "x86_64-w64-mingw32/x64 (64-bit)"
>>>             ? ? ?> $ locale? ? : chr "LC_COLLATE=English_United
>>>             ? ? ?> States.1252;LC_CTYPE=English_United
>>>             States.1252;LC_MONETARY=English_United
>>>             ? ? ?> States.125"| __truncated__
>>>             ? ? ?> $ running? ?: chr "Windows 10 x64 (build 18362)"
>>>             ? ? ?> $ RNGkind? ?: chr [1:3] "Mersenne-Twister"
>>>             "Inversion" "Rejection"
>>>             ? ? ?> $ basePkgs? : chr [1:7] "stats" "graphics"
>>>             "grDevices" "utils" ...
>>>             ? ? ?> $ loadedOnly:List of 1
>>>             ? ? ?> ..$ compiler:List of 9
>>>             ? ? ?> .. ..$ Package? ? : chr "compiler"
>>>             ? ? ?> .. ..$ Version? ? : chr "3.6.3"
>>>             ? ? ?> .. ..$ Priority? ?: chr "base"
>>>             ? ? ?> .. ..$ Title? ? ? : chr "The R Compiler Package"
>>>             ? ? ?> .. ..$ Author? ? ?: chr "Luke Tierney
>>>             <luke-tierney at uiowa.edu <mailto:luke-tierney at uiowa.edu>>"
>>>             ? ? ?> .. ..$ Maintainer : chr "R Core Team
>>>             <R-core at r-project.org <mailto:R-core at r-project.org>>"
>>>             ? ? ?> .. ..$ Description: chr "Byte code compiler for R."
>>>             ? ? ?> .. ..$ License? ? : chr "Part of R 3.6.3"
>>>             ? ? ?> .. ..$ Built? ? ? : chr "R 3.6.3; ; 2020-03-20
>>>             04:29:00 UTC; windows"
>>>             ? ? ?> .. ..- attr(*, "class")= chr "packageDescription"
>>>             ? ? ?> .. ..- attr(*, "file")= chr
>>>             ? ? ?>
>>>             "c:/newtimeR/R-3.6.3/library/compiler/Meta/package.rds"
>>>             ? ? ?> $ matprod? ?: chr "default"
>>>             ? ? ?> $ BLAS? ? ? : chr ""
>>>             ? ? ?> $ LAPACK? ? : chr ""
>>>             ? ? ?> - attr(*, "class")= chr "sessionInfo"
>>>
>>>
>>>             ? ? ?> Running the str example WITHOUT changing the locale:
>>>             ? ? >> ## Truncation behavior (<-> correct width
>>>             measurement) for "long"
>>>             ? ? ?> non-ASCII:
>>>             ? ? >> idx <- c(65313:65338, 65345:65350)
>>>             ? ? >> fwch <- intToUtf8(idx) # full width character
>>>             string: each has width 2
>>>             ? ? >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>>             ? ? >> (ncc <- c(c.ch <http://c.ch> = nchar(ch), w.ch
>>>             <http://w.ch> = nchar(ch,? ?"w"),
>>>             ? ? ?> +? ? ? ? ? ?c.fw = nchar(fwch), w.fw =
>>>             nchar(fwch, "w")))
>>>             ? ? ?> c.ch <http://c.ch> w.ch <http://w.ch> c.fw w.fw
>>>             ? ? ?> 64? ?64? ?32? ?64
>>>             ? ? >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>>             ? ? >> ## nchar.max: 1st line needs an increase of? 2?
>>>             in order to see? 1? (in
>>>             ? ? ?> UTF-$
>>>             ? ? >> invisible(lapply(60:66, function(N) str(fwch,
>>>             nchar.max = N)))
>>>             ? ? ?> chr
>>>             "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+"| __truncated__
>>>             ? ? ?> chr
>>>             "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+F"|
>>>             __truncated__
>>>             ? ? ?> chr
>>>             "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF"|
>>>             __truncated__
>>>             ? ? ?> chr
>>>             "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF2"|
>>>             __truncated__
>>>             ? ? ?> chr
>>>             "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26"|
>>>             __truncated__
>>>             ? ? ?> chr
>>>             "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26>"|
>>>             __truncated__
>>>             ? ? ?> chr
>>>             "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26><"|
>>>             __truncated__
>>>             ? ? >> invisible(lapply(60:66, function(N) str( ch ,
>>>             nchar.max = N))) # "1 is 1"
>>>             ? ? ?> he$
>>>             ? ? ?> chr
>>>             "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
>>>             ? ? ?> chr
>>>             "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."|
>>>             __truncated__
>>>             ? ? ?> chr
>>>             "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"|
>>>             __truncated__
>>>             ? ? ?> chr
>>>             "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"|
>>>             __truncated__
>>>             ? ? ?> chr
>>>             "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."|
>>>             __truncated__
>>>             ? ? ?> chr
>>>             "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"|
>>>             __truncated__
>>>             ? ? ?> chr
>>>             "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>>>             ? ? >>
>>>
>>>             ? ? ?> Running the str example WITH changing the locale:
>>>
>>>             ? ? ?> oloc <- Sys.getlocale("LC_CTYPE")
>>>             ? ? >> mbyte.lc <http://mbyte.lc> <-
>>>             if(.Platform$OS.type == "windows")
>>>             ? ? ?> +? "English_United States.28605" else "en_GB.UTF-8"
>>>             ? ? >> try(Sys.setlocale("LC_CTYPE", mbyte.lc
>>>             <http://mbyte.lc>))
>>>             ? ? ?> [1] "English_United States.28605"
>>>             ? ? >> ## Truncation behavior (<-> correct width
>>>             measurement) for "long"
>>>             ? ? ?> non-ASCII:
>>>             ? ? >> idx <- c(65313:65338, 65345:65350)
>>>             ? ? >> fwch <- intToUtf8(idx) # full width character
>>>             string: each has width 2
>>>             ? ? >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>>             ? ? >> (ncc <- c(c.ch <http://c.ch> = nchar(ch), w.ch
>>>             <http://w.ch> = nchar(ch,? ?"w"),
>>>             ? ? ?> +? ? ? ? ? ?c.fw = nchar(fwch), w.fw =
>>>             nchar(fwch, "w")))
>>>             ? ? ?> c.ch <http://c.ch> w.ch <http://w.ch> c.fw w.fw
>>>             ? ? ?> 64? ?64? ?32? ?64
>>>             ? ? >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>>             ? ? >> ## nchar.max: 1st line needs an increase of? 2?
>>>             in order to see? 1? (in
>>>             ? ? ?> UTF-$
>>>             ? ? >> invisible(lapply(60:66, function(N) str(fwch,
>>>             nchar.max = N)))
>>>             ? ? ?> Error in strtrim(x.lrg, nchar.max - nc) :
>>>             ? ? ?> unsupported conversion from 'UTF-8' in codepage 28605
>>>             ? ? >> invisible(lapply(60:66, function(N) str( ch ,
>>>             nchar.max = N))) # "1 is 1"
>>>             ? ? ?> he$
>>>             ? ? ?> chr
>>>             "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
>>>             ? ? ?> chr
>>>             "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."|
>>>             __truncated__
>>>             ? ? ?> chr
>>>             "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"|
>>>             __truncated__
>>>             ? ? ?> chr
>>>             "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"|
>>>             __truncated__
>>>             ? ? ?> chr
>>>             "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."|
>>>             __truncated__
>>>             ? ? ?> chr
>>>             "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"|
>>>             __truncated__
>>>             ? ? ?> chr
>>>             "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>>>
>>>             ? ? ?> This is pretty strange.
>>>
>>>             It is strange indeed? that? strtrim() fails in this
>>>             situation.
>>>
>>>             From what you wrote previously, this only happens when
>>>             you link
>>>             with OpenBLAS but not when you use R's own BLAS.
>>>             Are you sure that that was the only difference, but not
>>>             rather
>>>             the difference in the locales you used in your two
>>>             versions of R
>>>             on Windows?
>>>
>>>             Martin
>>>
>>>             ? ? ?> Thanks for any help.
>>>
>>>             ? ? ?> Sincerely,
>>>             ? ? ?> Erin
>>>
>>>             ? ? ?> Erin Hodgess, PhD
>>>             ? ? ?> mailto: erinm.hodgess at gmail.com
>>>             <mailto:erinm.hodgess at gmail.com>
>>>
>>>
>>>             ? ? ?> On Thu, Mar 19, 2020 at 2:29 AM Tomas Kalibera
>>>             <tomas.kalibera at gmail.com <mailto:tomas.kalibera at gmail.com>>
>>>             ? ? ?> wrote:
>>>
>>>             ? ? >> Hi Erin,
>>>             ? ? >>
>>>             ? ? >> this comes from examples in ?str. Could you
>>>             please try to find a minimal
>>>             ? ? >> example to reproduce on your system based on
>>>             that? I would look for
>>>             ? ? >> "line needs" in ?str and experiment with reducing
>>>             the example there
>>>             ? ? >> while still getting the error. Once it is
>>>             minimal, could you please try
>>>             ? ? >> also on the official build of R on your machine?
>>>             ? ? >>
>>>             ? ? >> Also it would be nice to have a session info. If
>>>             it works in the
>>>             ? ? >> official build but not your custom build, then
>>>             one would have to look
>>>             ? ? >> also into how the custom build is done.
>>>             ? ? >>
>>>             ? ? >> Thanks
>>>             ? ? >> Tomas
>>>             ? ? >>
>>>             ? ? >>
>>>             ? ? >> On 3/19/20 8:02 AM, Erin Hodgess wrote:
>>>             ? ? >> > Hello everyone:
>>>             ? ? >> >
>>>             ? ? >> > I have built the latest version of the OpenBLAS
>>>             on my Windows 10 machine.
>>>             ? ? >> > When I run make distribution in R, everything
>>>             is fine.
>>>             ? ? >> >
>>>             ? ? >> > However, when I run make check all,? I get the
>>>             following error:
>>>             ? ? >> >
>>>             ? ? >> > C:\newtimeR\R-3.6.3\src\gnuwin32>make check-all
>>>             ? ? >> > Testing examples for package 'base'
>>>             ? ? >> > Testing examples for package 'tools'
>>>             ? ? >> >? ? comparing 'tools-Ex.Rout' to
>>>             'tools-Ex.Rout.save' ... OK
>>>             ? ? >> > Testing examples for package 'utils'
>>>             ? ? >> > Error: testing 'utils' failed
>>>             ? ? >> > Execution halted
>>>             ? ? >> > make[3]: *** [Makefile.win:29:
>>>             test-Examples-Base] Error 1
>>>             ? ? >> > make[2]: *** [Makefile.common:185:
>>>             test-Examples] Error 2
>>>             ? ? >> > make[1]: *** [Makefile.common:171:
>>>             test-all-basics] Error 1
>>>             ? ? >> > make: *** [Makefile:324: check-all] Error 2
>>>             ? ? >> >
>>>             ? ? >> > And here is the section from the .Rout.fail for
>>>             utils:
>>>             ? ? >> >
>>>             ? ? >> >> ## Multibyte characters in strings (in
>>>             multibyte locales):
>>>             ? ? >> >> oloc <- Sys.getlocale("LC_CTYPE")
>>>             ? ? >> >> mbyte.lc <http://mbyte.lc> <-
>>>             if(.Platform$OS.type == "windows")
>>>             ? ? >> > +? "English_United States.28605" else "en_GB.UTF-8"
>>>             ? ? >> >> try(Sys.setlocale("LC_CTYPE", mbyte.lc
>>>             <http://mbyte.lc>))
>>>             ? ? >> > [1] "English_United States.28605"
>>>             ? ? >> >> ## Truncation behavior (<-> correct width
>>>             measurement) for "long"
>>>             ? ? >> > non-ASCII:
>>>             ? ? >> >> idx <- c(65313:65338, 65345:65350)
>>>             ? ? >> >> fwch <- intToUtf8(idx) # full width character
>>>             string: each has width 2
>>>             ? ? >> >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>>             ? ? >> >> (ncc <- c(c.ch <http://c.ch> = nchar(ch), w.ch
>>>             <http://w.ch> = nchar(ch,? ?"w"),
>>>             ? ? >> > +? ? ? ? ? ?c.fw = nchar(fwch), w.fw =
>>>             nchar(fwch, "w")))
>>>             ? ? >> > c.ch <http://c.ch> w.ch <http://w.ch> c.fw w.fw
>>>             ? ? >> >? ? 64? ?64? ?32? ?64
>>>             ? ? >> >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>>             ? ? >> >> ## nchar.max: 1st line needs an increase of?
>>>             2? in order to see? 1 (in
>>>             ? ? >> > UTF-8!):
>>>             ? ? >> >> invisible(lapply(60:66, function(N) str(fwch,
>>>             nchar.max = N)))
>>>             ? ? >> > Error in strtrim(x.lrg, nchar.max - nc) :
>>>             ? ? >> >? ? unsupported conversion from 'UTF-8' in
>>>             codepage 28605
>>>             ? ? >> > Calls: lapply ... FUN -> str -> str.default ->
>>>             maybe_truncate -> strtrim
>>>             ? ? >> > Execution halted
>>>             ? ? >> >
>>>             ? ? >> > Has anyone run into this before, please?
>>>             ? ? >> >
>>>             ? ? >> > If I run this line-by-line starting at the "idx
>>>             <-", things are fine.
>>>             ? ? >> >
>>>             ? ? >> > I also compiled R from source without the
>>>             OpenBLAS, and it was fine.
>>>             ? ? >> >
>>>             ? ? >> > Thanks for any suggestions.
>>>             ? ? >> >
>>>             ? ? >> > Sincerely,
>>>             ? ? >> > Erin
>>>             ? ? >> >
>>>             ? ? >> >
>>>             ? ? >> >
>>>             ? ? >> > Erin Hodgess, PhD
>>>             ? ? >> > mailto: erinm.hodgess at gmail.com
>>>             <mailto:erinm.hodgess at gmail.com>
>>>
>>>         -- 
>>>         Erin Hodgess, PhD
>>>         mailto: erinm.hodgess at gmail.com <mailto:erinm.hodgess at gmail.com>
>>
>>
>


	[[alternative HTML version deleted]]


From er|nm@hodge@@ @end|ng |rom gm@||@com  Sat Mar 21 17:38:34 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Sat, 21 Mar 2020 10:38:34 -0600
Subject: [R-pkg-devel] Errors in make check in Windows 10 with OpenBLAS
In-Reply-To: <1410a3a8-b8c7-b325-e75e-f24e13e7e4c6@gmail.com>
References: <CACxE24nsuTOj5oPvC=_R_Lf=1bJCFqFChC=CN48iMFgOQD21DA@mail.gmail.com>
 <5de3f2cc-72af-933e-61fe-a6c1ac74ffae@gmail.com>
 <CACxE24=RGU-EvdjmoDpEF91POKV1AH8hZd=stdNRt8xr1c0-2g@mail.gmail.com>
 <24180.41619.299632.396162@stat.math.ethz.ch>
 <CACxE24mb0UZfdvozscoNGA=Q2bMZ=wjoq56RNLERh5oLoZXLCQ@mail.gmail.com>
 <6845f803-9435-e530-79c6-70a1ffbd54f3@gmail.com>
 <CACxE24mOM-LL0PrMZTx5KYmdbB2Ba1YdJsvwTiz2un27C9qRJQ@mail.gmail.com>
 <e6402f7a-83f9-e2d3-4d64-13144b7bfd34@gmail.com>
 <CACxE24kERDc-J3anqBuQqxLPvHVuyAE2SM+9kErQWiyrZik8KQ@mail.gmail.com>
 <1410a3a8-b8c7-b325-e75e-f24e13e7e4c6@gmail.com>
Message-ID: <CACxE24m3mEhjidH0EeBjq5kr-R+DKVz7_XrUmGmTom1JP1tqPA@mail.gmail.com>

Thanks!

I searched the output for Riconv but no luck yet.



On Sat, Mar 21, 2020 at 10:29 AM Tomas Kalibera <tomas.kalibera at gmail.com>
wrote:

> Maybe the created Riconv.dll is copied over by libiconv at some point
> during your custom build.
>
> Tomas
>
> On 3/21/20 3:58 PM, Erin Hodgess wrote:
>
> Hello again.
>
> So I'm trying to find the place where the GNU iconv comes from.  However,
> I looked at output from both the regular build and the custom, and I'm not
> seeing any differences in how win_iconv is generated.
>
> Any suggestions, please?
>
> Custom:
> c:/Rtools/mingw_64/bin/ar crs libtz.a localtime.o registryTZ.o strftime.o
> installing zoneinfo
> making win_iconv.d from win_iconv.c
> c:/Rtools/mingw_64/bin/gcc -std=gnu99  -I../../include  -O3 -Wall
> -pedantic -march=native -pipe   -c win_iconv.c -o win_iconv.o
> c:/Rtools/mingw_64/bin/gcc -std=gnu99  -shared   -o Riconv.dll Riconv.def
> win_iconv.o
>
> Regular:
> c:/Rtools/mingw_64/bin/ar crs libtz.a localtime.o registryTZ.o strftime.o
> installing zoneinfo
> making win_iconv.d from win_iconv.c
> c:/Rtools/mingw_64/bin/gcc -std=gnu99  -I../../include  -O3 -Wall
> -pedantic -mtune=core2   -c win_iconv.c -o win_iconv.o
> c:/Rtools/mingw_64/bin/gcc -std=gnu99  -shared   -o Riconv.dll Riconv.def
> win_iconv.o
>
> Just the  -march=native -pipe
>
> Erin Hodgess, PhD
> mailto: erinm.hodgess at gmail.com
>
>
> On Fri, Mar 20, 2020 at 9:01 AM Tomas Kalibera <tomas.kalibera at gmail.com>
> wrote:
>
>> Thanks, so the problem is that your custom build uses GNU libiconv, which
>> does not support codepage 28605. win_iconv, the one shipped with R,
>> supports that code page. win_iconv is a wrapper for the Windows API. Unless
>> you had a special reason not to, I would just recommend to use win_iconv.
>> The "experience" will match the C library conversion calls, which may be
>> used directly in some code at some places, and it is most tested as people
>> normally use it. Still, the problem is not specific to strtrim, just to the
>> example.
>>
>> Best
>> Tomas
>>
>>
>> On 3/20/20 3:27 PM, Erin Hodgess wrote:
>>
>> Here are the results.
>>
>> Looks like enc2native and the iconv settings are different.
>>
>>
>> > #output from custom build
>> > Sys.getlocale()
>> [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
>> States.1252;LC_MONETARY=English_United
>> States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
>> > enc2native("\uff21")
>> [1] "<U+FF21>"
>> > enc2native("\u4e2d")
>> [1] "<U+4E2D>"
>> > Sys.setlocale("LC_CTYPE", "English_United States.28605")
>> [1] "English_United States.28605"
>> > enc2native("\uff21")
>> Error: unsupported conversion from 'UTF-8' in codepage 28605
>> > enc2native("\u4e2d")
>> Error: unsupported conversion from 'UTF-8' in codepage 28605
>> > extSoftVersion()[c("iconv","BLAS")]
>>               iconv                BLAS
>> "GNU libiconv 1.14"                  ""
>>
>>
>> > #output from regular build
>> > Sys.getlocale()
>> [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
>> States.1252;LC_MONETARY=English_United
>> States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
>> > enc2native("\uff21")
>> [1] "A"
>> > enc2native("\u4e2d")
>> [1] "<U+4E2D>"
>> > Sys.setlocale("LC_CTYPE", "English_United States.28605")
>> [1] "English_United States.28605"
>> > enc2native("\uff21")
>> [1] "A"
>> > enc2native("\u4e2d")
>> [1] "<U+4E2D>"
>> > extSoftVersion()[c("iconv","BLAS")]
>>       iconv        BLAS
>> "win_iconv"          ""
>> >
>>
>> Thanks!
>>
>>
>> Erin Hodgess, PhD
>> mailto: erinm.hodgess at gmail.com
>>
>>
>> On Fri, Mar 20, 2020 at 8:03 AM Tomas Kalibera <tomas.kalibera at gmail.com>
>> wrote:
>>
>>> Hi Erin,
>>>
>>> when you are building from sources, you can always uncomment the example
>>> in str.Rd. But it would be good first to find out why it is failing on your
>>> system/build.
>>>
>>> Please run the example in Rgui of the official R 3.6.3 build on your
>>> machine. Does it work there?
>>>
>>> Please run the following commands in Rgui of the official R 3.6.3 build
>>> on the machine and on your custom build. What do you get?
>>>
>>> Sys.getlocale()
>>> enc2native("\uff21")
>>> enc2native("\u4e2d")
>>> Sys.setlocale("LC_CTYPE", "English_United States.28605")
>>> enc2native("\uff21")
>>> enc2native("\u4e2d")
>>> extSoftVersion()[c("iconv","BLAS")]
>>> Thanks,
>>> Tomas
>>>
>>> On 3/20/20 2:35 PM, Erin Hodgess wrote:
>>>
>>> I was wondering if there is a way to either skip the utilities check and
>>> continuing, in order to test the other packages, please.
>>>
>>> Thanks!
>>>
>>>
>>> On Fri, Mar 20, 2020 at 5:01 AM Martin Maechler <
>>> maechler at stat.math.ethz.ch> wrote:
>>>
>>>> >>>>> Erin Hodgess    on Thu, 19 Mar 2020 22:44:39 -0600 writes:
>>>>
>>>>      > Hi Tomas and others:
>>>>      > Here is the session Info.  I also used the str example both
>>>> without and
>>>>      > with changing the locale.
>>>>
>>>>      > sI <- sessionInfo()
>>>>     >> str(sI)
>>>>      > List of 10
>>>>      > $ R.version :List of 14
>>>>      > ..$ platform      : chr "x86_64-w64-mingw32"
>>>>      > ..$ arch          : chr "x86_64"
>>>>      > ..$ os            : chr "mingw32"
>>>>      > ..$ system        : chr "x86_64, mingw32"
>>>>      > ..$ status        : chr ""
>>>>      > ..$ major         : chr "3"
>>>>      > ..$ minor         : chr "6.3"
>>>>      > ..$ year          : chr "2020"
>>>>      > ..$ month         : chr "02"
>>>>      > ..$ day           : chr "29"
>>>>      > ..$ svn rev       : chr "77875"
>>>>      > ..$ language      : chr "R"
>>>>      > ..$ version.string: chr "R version 3.6.3 (2020-02-29)"
>>>>      > ..$ nickname      : chr "Holding the Windsock"
>>>>      > $ platform  : chr "x86_64-w64-mingw32/x64 (64-bit)"
>>>>      > $ locale    : chr "LC_COLLATE=English_United
>>>>      > States.1252;LC_CTYPE=English_United
>>>> States.1252;LC_MONETARY=English_United
>>>>      > States.125"| __truncated__
>>>>      > $ running   : chr "Windows 10 x64 (build 18362)"
>>>>      > $ RNGkind   : chr [1:3] "Mersenne-Twister" "Inversion"
>>>> "Rejection"
>>>>      > $ basePkgs  : chr [1:7] "stats" "graphics" "grDevices" "utils"
>>>> ...
>>>>      > $ loadedOnly:List of 1
>>>>      > ..$ compiler:List of 9
>>>>      > .. ..$ Package    : chr "compiler"
>>>>      > .. ..$ Version    : chr "3.6.3"
>>>>      > .. ..$ Priority   : chr "base"
>>>>      > .. ..$ Title      : chr "The R Compiler Package"
>>>>      > .. ..$ Author     : chr "Luke Tierney <luke-tierney at uiowa.edu>"
>>>>      > .. ..$ Maintainer : chr "R Core Team <R-core at r-project.org>"
>>>>      > .. ..$ Description: chr "Byte code compiler for R."
>>>>      > .. ..$ License    : chr "Part of R 3.6.3"
>>>>      > .. ..$ Built      : chr "R 3.6.3; ; 2020-03-20 04:29:00 UTC;
>>>> windows"
>>>>      > .. ..- attr(*, "class")= chr "packageDescription"
>>>>      > .. ..- attr(*, "file")= chr
>>>>      > "c:/newtimeR/R-3.6.3/library/compiler/Meta/package.rds"
>>>>      > $ matprod   : chr "default"
>>>>      > $ BLAS      : chr ""
>>>>      > $ LAPACK    : chr ""
>>>>      > - attr(*, "class")= chr "sessionInfo"
>>>>
>>>>
>>>>      > Running the str example WITHOUT changing the locale:
>>>>     >> ## Truncation behavior (<-> correct width measurement) for "long"
>>>>      > non-ASCII:
>>>>     >> idx <- c(65313:65338, 65345:65350)
>>>>     >> fwch <- intToUtf8(idx) # full width character string: each has
>>>> width 2
>>>>     >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>>>     >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>>>      > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>>>      > c.ch w.ch c.fw w.fw
>>>>      > 64   64   32   64
>>>>     >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>>>     >> ## nchar.max: 1st line needs an increase of  2  in order to see
>>>> 1  (in
>>>>      > UTF-$
>>>>     >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+"| __truncated__
>>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+F"| __truncated__
>>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF"|
>>>> __truncated__
>>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF2"|
>>>> __truncated__
>>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26"|
>>>> __truncated__
>>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26>"|
>>>> __truncated__
>>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26><"|
>>>> __truncated__
>>>>     >> invisible(lapply(60:66, function(N) str( ch , nchar.max = N))) #
>>>> "1 is 1"
>>>>      > he$
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."| __truncated__
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"|
>>>> __truncated__
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"|
>>>> __truncated__
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."|
>>>> __truncated__
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"|
>>>> __truncated__
>>>>      > chr
>>>> "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>>>>     >>
>>>>
>>>>      > Running the str example WITH changing the locale:
>>>>
>>>>      > oloc <- Sys.getlocale("LC_CTYPE")
>>>>     >> mbyte.lc <- if(.Platform$OS.type == "windows")
>>>>      > +  "English_United States.28605" else "en_GB.UTF-8"
>>>>     >> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
>>>>      > [1] "English_United States.28605"
>>>>     >> ## Truncation behavior (<-> correct width measurement) for "long"
>>>>      > non-ASCII:
>>>>     >> idx <- c(65313:65338, 65345:65350)
>>>>     >> fwch <- intToUtf8(idx) # full width character string: each has
>>>> width 2
>>>>     >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>>>     >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>>>      > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>>>      > c.ch w.ch c.fw w.fw
>>>>      > 64   64   32   64
>>>>     >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>>>     >> ## nchar.max: 1st line needs an increase of  2  in order to see
>>>> 1  (in
>>>>      > UTF-$
>>>>     >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>>>      > Error in strtrim(x.lrg, nchar.max - nc) :
>>>>      > unsupported conversion from 'UTF-8' in codepage 28605
>>>>     >> invisible(lapply(60:66, function(N) str( ch , nchar.max = N))) #
>>>> "1 is 1"
>>>>      > he$
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."| __truncated__
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"|
>>>> __truncated__
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"|
>>>> __truncated__
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."|
>>>> __truncated__
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"|
>>>> __truncated__
>>>>      > chr
>>>> "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>>>>
>>>>      > This is pretty strange.
>>>>
>>>> It is strange indeed  that  strtrim() fails in this situation.
>>>>
>>>> From what you wrote previously, this only happens when you link
>>>> with OpenBLAS but not when you use R's own BLAS.
>>>> Are you sure that that was the only difference, but not rather
>>>> the difference in the locales you used in your two versions of R
>>>> on Windows?
>>>>
>>>> Martin
>>>>
>>>>      > Thanks for any help.
>>>>
>>>>      > Sincerely,
>>>>      > Erin
>>>>
>>>>      > Erin Hodgess, PhD
>>>>      > mailto: erinm.hodgess at gmail.com
>>>>
>>>>
>>>>      > On Thu, Mar 19, 2020 at 2:29 AM Tomas Kalibera <
>>>> tomas.kalibera at gmail.com>
>>>>      > wrote:
>>>>
>>>>     >> Hi Erin,
>>>>     >>
>>>>     >> this comes from examples in ?str. Could you please try to find a
>>>> minimal
>>>>     >> example to reproduce on your system based on that? I would look
>>>> for
>>>>     >> "line needs" in ?str and experiment with reducing the example
>>>> there
>>>>     >> while still getting the error. Once it is minimal, could you
>>>> please try
>>>>     >> also on the official build of R on your machine?
>>>>     >>
>>>>     >> Also it would be nice to have a session info. If it works in the
>>>>     >> official build but not your custom build, then one would have to
>>>> look
>>>>     >> also into how the custom build is done.
>>>>     >>
>>>>     >> Thanks
>>>>     >> Tomas
>>>>     >>
>>>>     >>
>>>>     >> On 3/19/20 8:02 AM, Erin Hodgess wrote:
>>>>     >> > Hello everyone:
>>>>     >> >
>>>>     >> > I have built the latest version of the OpenBLAS on my Windows
>>>> 10 machine.
>>>>     >> > When I run make distribution in R, everything is fine.
>>>>     >> >
>>>>     >> > However, when I run make check all,  I get the following error:
>>>>     >> >
>>>>     >> > C:\newtimeR\R-3.6.3\src\gnuwin32>make check-all
>>>>     >> > Testing examples for package 'base'
>>>>     >> > Testing examples for package 'tools'
>>>>     >> >    comparing 'tools-Ex.Rout' to 'tools-Ex.Rout.save' ... OK
>>>>     >> > Testing examples for package 'utils'
>>>>     >> > Error: testing 'utils' failed
>>>>     >> > Execution halted
>>>>     >> > make[3]: *** [Makefile.win:29: test-Examples-Base] Error 1
>>>>     >> > make[2]: *** [Makefile.common:185: test-Examples] Error 2
>>>>     >> > make[1]: *** [Makefile.common:171: test-all-basics] Error 1
>>>>     >> > make: *** [Makefile:324: check-all] Error 2
>>>>     >> >
>>>>     >> > And here is the section from the .Rout.fail for utils:
>>>>     >> >
>>>>     >> >> ## Multibyte characters in strings (in multibyte locales):
>>>>     >> >> oloc <- Sys.getlocale("LC_CTYPE")
>>>>     >> >> mbyte.lc <- if(.Platform$OS.type == "windows")
>>>>     >> > +  "English_United States.28605" else "en_GB.UTF-8"
>>>>     >> >> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
>>>>     >> > [1] "English_United States.28605"
>>>>     >> >> ## Truncation behavior (<-> correct width measurement) for
>>>> "long"
>>>>     >> > non-ASCII:
>>>>     >> >> idx <- c(65313:65338, 65345:65350)
>>>>     >> >> fwch <- intToUtf8(idx) # full width character string: each
>>>> has width 2
>>>>     >> >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>>>     >> >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>>>     >> > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>>>     >> > c.ch w.ch c.fw w.fw
>>>>     >> >    64   64   32   64
>>>>     >> >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>>>     >> >> ## nchar.max: 1st line needs an increase of  2  in order to
>>>> see  1  (in
>>>>     >> > UTF-8!):
>>>>     >> >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>>>     >> > Error in strtrim(x.lrg, nchar.max - nc) :
>>>>     >> >    unsupported conversion from 'UTF-8' in codepage 28605
>>>>     >> > Calls: lapply ... FUN -> str -> str.default -> maybe_truncate
>>>> -> strtrim
>>>>     >> > Execution halted
>>>>     >> >
>>>>     >> > Has anyone run into this before, please?
>>>>     >> >
>>>>     >> > If I run this line-by-line starting at the "idx <-", things
>>>> are fine.
>>>>     >> >
>>>>     >> > I also compiled R from source without the OpenBLAS, and it was
>>>> fine.
>>>>     >> >
>>>>     >> > Thanks for any suggestions.
>>>>     >> >
>>>>     >> > Sincerely,
>>>>     >> > Erin
>>>>     >> >
>>>>     >> >
>>>>     >> >
>>>>     >> > Erin Hodgess, PhD
>>>>     >> > mailto: erinm.hodgess at gmail.com
>>>>
>>>> --
>>> Erin Hodgess, PhD
>>> mailto: erinm.hodgess at gmail.com
>>>
>>>
>>>
>>
> --
Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com

	[[alternative HTML version deleted]]


From em@nue|e@cord@no @end|ng |rom gm@||@com  Sat Mar 21 20:03:07 2020
From: em@nue|e@cord@no @end|ng |rom gm@||@com (Emanuele Cordano)
Date: Sat, 21 Mar 2020 20:03:07 +0100
Subject: [R-pkg-devel] Overriding + operator in a package
Message-ID: <CAKw81f8yL+OpZomhJKYG2=jfVu8VJq6P+=Po7D8sFWY1LQnzBg@mail.gmail.com>

Dear list,

I just released on my Github account the following R package:
https://github.com/ecor/stringplus
containing an override of '+' arithmetic operator in order to sum two
strings as follows:

```

library(stringplus)

subject <- "Susan"
     verb <- "is eating"
     object <- "an apple"

     out <- subject+" "+verb+" "+object

     dir <- "~/mydrir/"
     files <- c("myfile.txt","readme.txt")


```
I would like to submit "stringplus"  to CRAN but while ckecking I found out
the following warning:

* checking S3 generic/method consistency ... WARNING
Warning: declared S3 method '+.character' not found
Warning: declared S3 method '+.default' not found
See section ?Generic functions and methods? in the ?Writing R
Extensions? manual.

R version 3.6.3 (2020-02-29) -- "Holding the Windsock"

I wrote the method in S3. I checked the section ?Generic functions and
methods? in the ?Writing R' (R-release) Extensions? manual but I did not
find a clear (to me) example or explanation  for arithmetic (or base)
operators.
Do you suggest how to solve this warning?

Thank you
I hope you are all well.
Best regards
Emanuele Cordano

-- 
Emanuele Cordano, PhD
Environmental Engineer / Ingegnere per l' Ambiente e il territorio nr.
3587 (Albo A - Provincia di Trento)
cell: +39 3282818564
email: emanuele.cordano at gmail.com,emanuele.cordano at rendena100.eu,
emanuele.cordano at eurac.edu
PEC: emanuele.cordano at ingpec.eu
URL: www.rendena100.eu
LinkedIn: https://www.linkedin.com/in/emanuele-cordano-31995333
GitHub: https://github.com/ecor

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Mar 21 20:23:01 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 21 Mar 2020 15:23:01 -0400
Subject: [R-pkg-devel] Overriding + operator in a package
In-Reply-To: <CAKw81f8yL+OpZomhJKYG2=jfVu8VJq6P+=Po7D8sFWY1LQnzBg@mail.gmail.com>
References: <CAKw81f8yL+OpZomhJKYG2=jfVu8VJq6P+=Po7D8sFWY1LQnzBg@mail.gmail.com>
Message-ID: <8bde42e6-8c03-2bac-4adc-a09a9191319e@gmail.com>

On 21/03/2020 3:03 p.m., Emanuele Cordano wrote:
> Dear list,
> 
> I just released on my Github account the following R package:
> https://github.com/ecor/stringplus
> containing an override of '+' arithmetic operator in order to sum two
> strings as follows:
> 
> ```
> 
> library(stringplus)
> 
> subject <- "Susan"
>       verb <- "is eating"
>       object <- "an apple"
> 
>       out <- subject+" "+verb+" "+object
> 
>       dir <- "~/mydrir/"
>       files <- c("myfile.txt","readme.txt")
> 
> 
> ```
> I would like to submit "stringplus"  to CRAN but while ckecking I found out
> the following warning:
> 
> * checking S3 generic/method consistency ... WARNING
> Warning: declared S3 method '+.character' not found
> Warning: declared S3 method '+.default' not found
> See section ?Generic functions and methods? in the ?Writing R
> Extensions? manual.
> 
> R version 3.6.3 (2020-02-29) -- "Holding the Windsock"
> 
> I wrote the method in S3. I checked the section ?Generic functions and
> methods? in the ?Writing R' (R-release) Extensions? manual but I did not
> find a clear (to me) example or explanation  for arithmetic (or base)
> operators.
> Do you suggest how to solve this warning?

I suspect the problem is that you created a new `+` generic function. 
There's already an internal one of those in the base package; you 
shouldn't create a new one.

There are other errors in your Github code; presumably you have local 
changes that need to be committed and pushed there.

Duncan Murdoch


From er|nm@hodge@@ @end|ng |rom gm@||@com  Sun Mar 22 04:33:34 2020
From: er|nm@hodge@@ @end|ng |rom gm@||@com (Erin Hodgess)
Date: Sat, 21 Mar 2020 21:33:34 -0600
Subject: [R-pkg-devel] Errors in make check in Windows 10 with OpenBLAS
In-Reply-To: <1410a3a8-b8c7-b325-e75e-f24e13e7e4c6@gmail.com>
References: <CACxE24nsuTOj5oPvC=_R_Lf=1bJCFqFChC=CN48iMFgOQD21DA@mail.gmail.com>
 <5de3f2cc-72af-933e-61fe-a6c1ac74ffae@gmail.com>
 <CACxE24=RGU-EvdjmoDpEF91POKV1AH8hZd=stdNRt8xr1c0-2g@mail.gmail.com>
 <24180.41619.299632.396162@stat.math.ethz.ch>
 <CACxE24mb0UZfdvozscoNGA=Q2bMZ=wjoq56RNLERh5oLoZXLCQ@mail.gmail.com>
 <6845f803-9435-e530-79c6-70a1ffbd54f3@gmail.com>
 <CACxE24mOM-LL0PrMZTx5KYmdbB2Ba1YdJsvwTiz2un27C9qRJQ@mail.gmail.com>
 <e6402f7a-83f9-e2d3-4d64-13144b7bfd34@gmail.com>
 <CACxE24kERDc-J3anqBuQqxLPvHVuyAE2SM+9kErQWiyrZik8KQ@mail.gmail.com>
 <1410a3a8-b8c7-b325-e75e-f24e13e7e4c6@gmail.com>
Message-ID: <CACxE24nH=FWoNt_gHQm3FG4MLrY=+B37oU5_=zKTR=ELAR2qrA@mail.gmail.com>

Finally figured it out...I was having "path problems"!

I'm all set here.

Thanks so much for your help

Sincerely,
Erin

Erin Hodgess, PhD
mailto: erinm.hodgess at gmail.com


On Sat, Mar 21, 2020 at 10:29 AM Tomas Kalibera <tomas.kalibera at gmail.com>
wrote:

> Maybe the created Riconv.dll is copied over by libiconv at some point
> during your custom build.
>
> Tomas
>
> On 3/21/20 3:58 PM, Erin Hodgess wrote:
>
> Hello again.
>
> So I'm trying to find the place where the GNU iconv comes from.  However,
> I looked at output from both the regular build and the custom, and I'm not
> seeing any differences in how win_iconv is generated.
>
> Any suggestions, please?
>
> Custom:
> c:/Rtools/mingw_64/bin/ar crs libtz.a localtime.o registryTZ.o strftime.o
> installing zoneinfo
> making win_iconv.d from win_iconv.c
> c:/Rtools/mingw_64/bin/gcc -std=gnu99  -I../../include  -O3 -Wall
> -pedantic -march=native -pipe   -c win_iconv.c -o win_iconv.o
> c:/Rtools/mingw_64/bin/gcc -std=gnu99  -shared   -o Riconv.dll Riconv.def
> win_iconv.o
>
> Regular:
> c:/Rtools/mingw_64/bin/ar crs libtz.a localtime.o registryTZ.o strftime.o
> installing zoneinfo
> making win_iconv.d from win_iconv.c
> c:/Rtools/mingw_64/bin/gcc -std=gnu99  -I../../include  -O3 -Wall
> -pedantic -mtune=core2   -c win_iconv.c -o win_iconv.o
> c:/Rtools/mingw_64/bin/gcc -std=gnu99  -shared   -o Riconv.dll Riconv.def
> win_iconv.o
>
> Just the  -march=native -pipe
>
> Erin Hodgess, PhD
> mailto: erinm.hodgess at gmail.com
>
>
> On Fri, Mar 20, 2020 at 9:01 AM Tomas Kalibera <tomas.kalibera at gmail.com>
> wrote:
>
>> Thanks, so the problem is that your custom build uses GNU libiconv, which
>> does not support codepage 28605. win_iconv, the one shipped with R,
>> supports that code page. win_iconv is a wrapper for the Windows API. Unless
>> you had a special reason not to, I would just recommend to use win_iconv.
>> The "experience" will match the C library conversion calls, which may be
>> used directly in some code at some places, and it is most tested as people
>> normally use it. Still, the problem is not specific to strtrim, just to the
>> example.
>>
>> Best
>> Tomas
>>
>>
>> On 3/20/20 3:27 PM, Erin Hodgess wrote:
>>
>> Here are the results.
>>
>> Looks like enc2native and the iconv settings are different.
>>
>>
>> > #output from custom build
>> > Sys.getlocale()
>> [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
>> States.1252;LC_MONETARY=English_United
>> States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
>> > enc2native("\uff21")
>> [1] "<U+FF21>"
>> > enc2native("\u4e2d")
>> [1] "<U+4E2D>"
>> > Sys.setlocale("LC_CTYPE", "English_United States.28605")
>> [1] "English_United States.28605"
>> > enc2native("\uff21")
>> Error: unsupported conversion from 'UTF-8' in codepage 28605
>> > enc2native("\u4e2d")
>> Error: unsupported conversion from 'UTF-8' in codepage 28605
>> > extSoftVersion()[c("iconv","BLAS")]
>>               iconv                BLAS
>> "GNU libiconv 1.14"                  ""
>>
>>
>> > #output from regular build
>> > Sys.getlocale()
>> [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United
>> States.1252;LC_MONETARY=English_United
>> States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"
>> > enc2native("\uff21")
>> [1] "A"
>> > enc2native("\u4e2d")
>> [1] "<U+4E2D>"
>> > Sys.setlocale("LC_CTYPE", "English_United States.28605")
>> [1] "English_United States.28605"
>> > enc2native("\uff21")
>> [1] "A"
>> > enc2native("\u4e2d")
>> [1] "<U+4E2D>"
>> > extSoftVersion()[c("iconv","BLAS")]
>>       iconv        BLAS
>> "win_iconv"          ""
>> >
>>
>> Thanks!
>>
>>
>> Erin Hodgess, PhD
>> mailto: erinm.hodgess at gmail.com
>>
>>
>> On Fri, Mar 20, 2020 at 8:03 AM Tomas Kalibera <tomas.kalibera at gmail.com>
>> wrote:
>>
>>> Hi Erin,
>>>
>>> when you are building from sources, you can always uncomment the example
>>> in str.Rd. But it would be good first to find out why it is failing on your
>>> system/build.
>>>
>>> Please run the example in Rgui of the official R 3.6.3 build on your
>>> machine. Does it work there?
>>>
>>> Please run the following commands in Rgui of the official R 3.6.3 build
>>> on the machine and on your custom build. What do you get?
>>>
>>> Sys.getlocale()
>>> enc2native("\uff21")
>>> enc2native("\u4e2d")
>>> Sys.setlocale("LC_CTYPE", "English_United States.28605")
>>> enc2native("\uff21")
>>> enc2native("\u4e2d")
>>> extSoftVersion()[c("iconv","BLAS")]
>>> Thanks,
>>> Tomas
>>>
>>> On 3/20/20 2:35 PM, Erin Hodgess wrote:
>>>
>>> I was wondering if there is a way to either skip the utilities check and
>>> continuing, in order to test the other packages, please.
>>>
>>> Thanks!
>>>
>>>
>>> On Fri, Mar 20, 2020 at 5:01 AM Martin Maechler <
>>> maechler at stat.math.ethz.ch> wrote:
>>>
>>>> >>>>> Erin Hodgess    on Thu, 19 Mar 2020 22:44:39 -0600 writes:
>>>>
>>>>      > Hi Tomas and others:
>>>>      > Here is the session Info.  I also used the str example both
>>>> without and
>>>>      > with changing the locale.
>>>>
>>>>      > sI <- sessionInfo()
>>>>     >> str(sI)
>>>>      > List of 10
>>>>      > $ R.version :List of 14
>>>>      > ..$ platform      : chr "x86_64-w64-mingw32"
>>>>      > ..$ arch          : chr "x86_64"
>>>>      > ..$ os            : chr "mingw32"
>>>>      > ..$ system        : chr "x86_64, mingw32"
>>>>      > ..$ status        : chr ""
>>>>      > ..$ major         : chr "3"
>>>>      > ..$ minor         : chr "6.3"
>>>>      > ..$ year          : chr "2020"
>>>>      > ..$ month         : chr "02"
>>>>      > ..$ day           : chr "29"
>>>>      > ..$ svn rev       : chr "77875"
>>>>      > ..$ language      : chr "R"
>>>>      > ..$ version.string: chr "R version 3.6.3 (2020-02-29)"
>>>>      > ..$ nickname      : chr "Holding the Windsock"
>>>>      > $ platform  : chr "x86_64-w64-mingw32/x64 (64-bit)"
>>>>      > $ locale    : chr "LC_COLLATE=English_United
>>>>      > States.1252;LC_CTYPE=English_United
>>>> States.1252;LC_MONETARY=English_United
>>>>      > States.125"| __truncated__
>>>>      > $ running   : chr "Windows 10 x64 (build 18362)"
>>>>      > $ RNGkind   : chr [1:3] "Mersenne-Twister" "Inversion"
>>>> "Rejection"
>>>>      > $ basePkgs  : chr [1:7] "stats" "graphics" "grDevices" "utils"
>>>> ...
>>>>      > $ loadedOnly:List of 1
>>>>      > ..$ compiler:List of 9
>>>>      > .. ..$ Package    : chr "compiler"
>>>>      > .. ..$ Version    : chr "3.6.3"
>>>>      > .. ..$ Priority   : chr "base"
>>>>      > .. ..$ Title      : chr "The R Compiler Package"
>>>>      > .. ..$ Author     : chr "Luke Tierney <luke-tierney at uiowa.edu>"
>>>>      > .. ..$ Maintainer : chr "R Core Team <R-core at r-project.org>"
>>>>      > .. ..$ Description: chr "Byte code compiler for R."
>>>>      > .. ..$ License    : chr "Part of R 3.6.3"
>>>>      > .. ..$ Built      : chr "R 3.6.3; ; 2020-03-20 04:29:00 UTC;
>>>> windows"
>>>>      > .. ..- attr(*, "class")= chr "packageDescription"
>>>>      > .. ..- attr(*, "file")= chr
>>>>      > "c:/newtimeR/R-3.6.3/library/compiler/Meta/package.rds"
>>>>      > $ matprod   : chr "default"
>>>>      > $ BLAS      : chr ""
>>>>      > $ LAPACK    : chr ""
>>>>      > - attr(*, "class")= chr "sessionInfo"
>>>>
>>>>
>>>>      > Running the str example WITHOUT changing the locale:
>>>>     >> ## Truncation behavior (<-> correct width measurement) for "long"
>>>>      > non-ASCII:
>>>>     >> idx <- c(65313:65338, 65345:65350)
>>>>     >> fwch <- intToUtf8(idx) # full width character string: each has
>>>> width 2
>>>>     >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>>>     >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>>>      > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>>>      > c.ch w.ch c.fw w.fw
>>>>      > 64   64   32   64
>>>>     >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>>>     >> ## nchar.max: 1st line needs an increase of  2  in order to see
>>>> 1  (in
>>>>      > UTF-$
>>>>     >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+"| __truncated__
>>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+F"| __truncated__
>>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF"|
>>>> __truncated__
>>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF2"|
>>>> __truncated__
>>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26"|
>>>> __truncated__
>>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26>"|
>>>> __truncated__
>>>>      > chr "<U+FF21><U+FF22><U+FF23><U+FF24><U+FF25><U+FF26><"|
>>>> __truncated__
>>>>     >> invisible(lapply(60:66, function(N) str( ch , nchar.max = N))) #
>>>> "1 is 1"
>>>>      > he$
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."| __truncated__
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"|
>>>> __truncated__
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"|
>>>> __truncated__
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."|
>>>> __truncated__
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"|
>>>> __truncated__
>>>>      > chr
>>>> "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>>>>     >>
>>>>
>>>>      > Running the str example WITH changing the locale:
>>>>
>>>>      > oloc <- Sys.getlocale("LC_CTYPE")
>>>>     >> mbyte.lc <- if(.Platform$OS.type == "windows")
>>>>      > +  "English_United States.28605" else "en_GB.UTF-8"
>>>>     >> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
>>>>      > [1] "English_United States.28605"
>>>>     >> ## Truncation behavior (<-> correct width measurement) for "long"
>>>>      > non-ASCII:
>>>>     >> idx <- c(65313:65338, 65345:65350)
>>>>     >> fwch <- intToUtf8(idx) # full width character string: each has
>>>> width 2
>>>>     >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>>>     >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>>>      > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>>>      > c.ch w.ch c.fw w.fw
>>>>      > 64   64   32   64
>>>>     >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>>>     >> ## nchar.max: 1st line needs an increase of  2  in order to see
>>>> 1  (in
>>>>      > UTF-$
>>>>     >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>>>      > Error in strtrim(x.lrg, nchar.max - nc) :
>>>>      > unsupported conversion from 'UTF-8' in codepage 28605
>>>>     >> invisible(lapply(60:66, function(N) str( ch , nchar.max = N))) #
>>>> "1 is 1"
>>>>      > he$
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O"| __truncated__
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O."| __truncated__
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._"|
>>>> __truncated__
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P"|
>>>> __truncated__
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P."|
>>>> __truncated__
>>>>      > chr "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._"|
>>>> __truncated__
>>>>      > chr
>>>> "A._B._C._D._E._F._G._H._I._J._K._L._M._N._O._P._Q._R._S._T._U._V"
>>>>
>>>>      > This is pretty strange.
>>>>
>>>> It is strange indeed  that  strtrim() fails in this situation.
>>>>
>>>> From what you wrote previously, this only happens when you link
>>>> with OpenBLAS but not when you use R's own BLAS.
>>>> Are you sure that that was the only difference, but not rather
>>>> the difference in the locales you used in your two versions of R
>>>> on Windows?
>>>>
>>>> Martin
>>>>
>>>>      > Thanks for any help.
>>>>
>>>>      > Sincerely,
>>>>      > Erin
>>>>
>>>>      > Erin Hodgess, PhD
>>>>      > mailto: erinm.hodgess at gmail.com
>>>>
>>>>
>>>>      > On Thu, Mar 19, 2020 at 2:29 AM Tomas Kalibera <
>>>> tomas.kalibera at gmail.com>
>>>>      > wrote:
>>>>
>>>>     >> Hi Erin,
>>>>     >>
>>>>     >> this comes from examples in ?str. Could you please try to find a
>>>> minimal
>>>>     >> example to reproduce on your system based on that? I would look
>>>> for
>>>>     >> "line needs" in ?str and experiment with reducing the example
>>>> there
>>>>     >> while still getting the error. Once it is minimal, could you
>>>> please try
>>>>     >> also on the official build of R on your machine?
>>>>     >>
>>>>     >> Also it would be nice to have a session info. If it works in the
>>>>     >> official build but not your custom build, then one would have to
>>>> look
>>>>     >> also into how the custom build is done.
>>>>     >>
>>>>     >> Thanks
>>>>     >> Tomas
>>>>     >>
>>>>     >>
>>>>     >> On 3/19/20 8:02 AM, Erin Hodgess wrote:
>>>>     >> > Hello everyone:
>>>>     >> >
>>>>     >> > I have built the latest version of the OpenBLAS on my Windows
>>>> 10 machine.
>>>>     >> > When I run make distribution in R, everything is fine.
>>>>     >> >
>>>>     >> > However, when I run make check all,  I get the following error:
>>>>     >> >
>>>>     >> > C:\newtimeR\R-3.6.3\src\gnuwin32>make check-all
>>>>     >> > Testing examples for package 'base'
>>>>     >> > Testing examples for package 'tools'
>>>>     >> >    comparing 'tools-Ex.Rout' to 'tools-Ex.Rout.save' ... OK
>>>>     >> > Testing examples for package 'utils'
>>>>     >> > Error: testing 'utils' failed
>>>>     >> > Execution halted
>>>>     >> > make[3]: *** [Makefile.win:29: test-Examples-Base] Error 1
>>>>     >> > make[2]: *** [Makefile.common:185: test-Examples] Error 2
>>>>     >> > make[1]: *** [Makefile.common:171: test-all-basics] Error 1
>>>>     >> > make: *** [Makefile:324: check-all] Error 2
>>>>     >> >
>>>>     >> > And here is the section from the .Rout.fail for utils:
>>>>     >> >
>>>>     >> >> ## Multibyte characters in strings (in multibyte locales):
>>>>     >> >> oloc <- Sys.getlocale("LC_CTYPE")
>>>>     >> >> mbyte.lc <- if(.Platform$OS.type == "windows")
>>>>     >> > +  "English_United States.28605" else "en_GB.UTF-8"
>>>>     >> >> try(Sys.setlocale("LC_CTYPE", mbyte.lc))
>>>>     >> > [1] "English_United States.28605"
>>>>     >> >> ## Truncation behavior (<-> correct width measurement) for
>>>> "long"
>>>>     >> > non-ASCII:
>>>>     >> >> idx <- c(65313:65338, 65345:65350)
>>>>     >> >> fwch <- intToUtf8(idx) # full width character string: each
>>>> has width 2
>>>>     >> >> ch <- strtrim(paste(LETTERS, collapse="._"), 64)
>>>>     >> >> (ncc <- c(c.ch = nchar(ch),   w.ch = nchar(ch,   "w"),
>>>>     >> > +           c.fw = nchar(fwch), w.fw = nchar(fwch, "w")))
>>>>     >> > c.ch w.ch c.fw w.fw
>>>>     >> >    64   64   32   64
>>>>     >> >> stopifnot(unname(ncc) == c(64,64, 32, 64))
>>>>     >> >> ## nchar.max: 1st line needs an increase of  2  in order to
>>>> see  1  (in
>>>>     >> > UTF-8!):
>>>>     >> >> invisible(lapply(60:66, function(N) str(fwch, nchar.max = N)))
>>>>     >> > Error in strtrim(x.lrg, nchar.max - nc) :
>>>>     >> >    unsupported conversion from 'UTF-8' in codepage 28605
>>>>     >> > Calls: lapply ... FUN -> str -> str.default -> maybe_truncate
>>>> -> strtrim
>>>>     >> > Execution halted
>>>>     >> >
>>>>     >> > Has anyone run into this before, please?
>>>>     >> >
>>>>     >> > If I run this line-by-line starting at the "idx <-", things
>>>> are fine.
>>>>     >> >
>>>>     >> > I also compiled R from source without the OpenBLAS, and it was
>>>> fine.
>>>>     >> >
>>>>     >> > Thanks for any suggestions.
>>>>     >> >
>>>>     >> > Sincerely,
>>>>     >> > Erin
>>>>     >> >
>>>>     >> >
>>>>     >> >
>>>>     >> > Erin Hodgess, PhD
>>>>     >> > mailto: erinm.hodgess at gmail.com
>>>>
>>>> --
>>> Erin Hodgess, PhD
>>> mailto: erinm.hodgess at gmail.com
>>>
>>>
>>>
>>
>

	[[alternative HTML version deleted]]


From chr|@topher@jone@ @end|ng |rom or@c|e@com  Mon Mar 23 07:38:31 2020
From: chr|@topher@jone@ @end|ng |rom or@c|e@com (Christopher Jones)
Date: Mon, 23 Mar 2020 17:38:31 +1100
Subject: [R-pkg-devel] CRAN upload checks
Message-ID: <1432a925-86fd-adb3-f966-be1bc073be9c@oracle.com>

Chasing up a longstanding issue <https://www.mail-archive.com/r-package-devel at r-project.org/msg03245.html> with getting a package patch update 
uploaded to CRAN. We've never raised any reply to emails sent to CRAN-submissions at R-project.org. The most recent mail was on 17th March. Is there a 
better email address to use?

The package is https://cran.r-project.org/web/packages/ROracle/index.html This needs a 3rd party (i.e. Oracle provided) SDK package to compile. Since 
that original thread, the SDK package is now available via wget or curl without login or click-through.

Chris

-- 
https://twitter.com/ghrd


	[[alternative HTML version deleted]]


From |@pm0001 @end|ng |rom gm@||@com  Mon Mar 23 15:30:14 2020
From: |@pm0001 @end|ng |rom gm@||@com (LUIS ALFONSO PEREZ MARTOS)
Date: Mon, 23 Mar 2020 15:30:14 +0100
Subject: [R-pkg-devel] Problem with Check --as-cran
In-Reply-To: <78AEB0F4-5EEC-436D-8F91-4CC55D43FBAB@gmail.com>
References: <78AEB0F4-5EEC-436D-8F91-4CC55D43FBAB@gmail.com>
Message-ID: <06D894A5-2064-4FD9-84AF-B70F4EF20ADD@gmail.com>



> El 23 mar 2020, a las 15:05, LUIS ALFONSO PEREZ MARTOS <lapm0001 at gmail.com> escribi?:
> 
> Good morning, everyone,
> 
> I am developing an R-package and when I check package I get this right. Attached image.
> 
> <Captura de pantalla 2020-03-23 a las 15.00.58.png>
> 
> But when I upload the package to cran they tell me the next error and I don't know how to fix it.
> 
> https://win-builder.r-project.org/incoming_pretest/Clustering_1.0.0_20200322_181919/Windows/00check.log <https://win-builder.r-project.org/incoming_pretest/Clustering_1.0.0_20200322_181919/Windows/00check.log>
> 
> Best regards


From em||@joerup @end|ng |rom ||ve@dk  Mon Mar 23 15:29:20 2020
From: em||@joerup @end|ng |rom ||ve@dk (=?UTF-8?Q?Emil_Sj=c3=b8rup?=)
Date: Mon, 23 Mar 2020 15:29:20 +0100
Subject: [R-pkg-devel] OpenMP variable not specified in enclosing 'parallel'
Message-ID: <DB8PR10MB3784AA11DE5966920B02A317A4F00@DB8PR10MB3784.EURPRD10.PROD.OUTLOOK.COM>

Hi,


I am getting an error message during pre-checks when I upload a new 
version of my package to CRAN, and I need help.

See: 
https://win-builder.r-project.org/incoming_pretest/DriftBurstHypothesis_0.3.0.1_20200322_134148/Debian/00install.out 



The package installs just fine on windows, and on my system.


It seems to me that the message tells me that I have an undeclared 
variable in the parallel setup.

So, if I add the variable to the shared variables in the setup, I get 
the following error message:


error: ?iMaxLag? is predetermined ?shared? for ?shared?


Passing the variable to the private variable in the setup doesn't work 
either.

Am I misunderstanding the error or is something weird going on?



For the interested, the source being uploaded can be found in:

ftp://cran.r-project.org/incoming/archive/

under DriftBurstHypothesis_0.3.0.1.tar.gz


Best,

Emil


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Mon Mar 23 15:38:46 2020
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Mon, 23 Mar 2020 15:38:46 +0100
Subject: [R-pkg-devel] Problem with Check --as-cran
In-Reply-To: <06D894A5-2064-4FD9-84AF-B70F4EF20ADD@gmail.com>
References: <78AEB0F4-5EEC-436D-8F91-4CC55D43FBAB@gmail.com>
 <06D894A5-2064-4FD9-84AF-B70F4EF20ADD@gmail.com>
Message-ID: <27fddb77-12ed-5420-6974-6554315943c9@gmail.com>

The problem is with

if (class(data) != "matrix") stop("The data field should be an array or 
a data frame")

Please use inherits() instead of checking class(), see this for more details
https://developer.r-project.org/Blog/public/2019/11/09/when-you-think-class.-think-again

Best
Tomas



On 3/23/20 3:30 PM, LUIS ALFONSO PEREZ MARTOS wrote:
>
>> El 23 mar 2020, a las 15:05, LUIS ALFONSO PEREZ MARTOS <lapm0001 at gmail.com> escribi?:
>>
>> Good morning, everyone,
>>
>> I am developing an R-package and when I check package I get this right. Attached image.
>>
>> <Captura de pantalla 2020-03-23 a las 15.00.58.png>
>>
>> But when I upload the package to cran they tell me the next error and I don't know how to fix it.
>>
>> https://win-builder.r-project.org/incoming_pretest/Clustering_1.0.0_20200322_181919/Windows/00check.log <https://win-builder.r-project.org/incoming_pretest/Clustering_1.0.0_20200322_181919/Windows/00check.log>
>>
>> Best regards
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Mar 23 18:34:03 2020
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 23 Mar 2020 20:34:03 +0300
Subject: [R-pkg-devel] 
 OpenMP variable not specified in enclosing 'parallel'
In-Reply-To: <DB8PR10MB3784AA11DE5966920B02A317A4F00@DB8PR10MB3784.EURPRD10.PROD.OUTLOOK.COM>
References: <DB8PR10MB3784AA11DE5966920B02A317A4F00@DB8PR10MB3784.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <20200323203403.57fa610d@trisector>

On Mon, 23 Mar 2020 15:29:20 +0100
Emil Sj?rup <emilsjoerup at live.dk> wrote:

> const int iMaxLag = 20;

> error: ?iMaxLag? not specified in enclosing ?parallel?

> error: ?iMaxLag? is predetermined ?shared? for ?shared?

This looks like a compiler bug to me. g++ seems to forget the rule that
"const" variables are supposed to be shared despite the default(none)
clause.

In a similar situation (g++ being confused about the sharing
status of a hidden temporary variable it had internally created) I had
to remove default(none) and leave a comment explaining that the code
would not compile otherwise.

-- 
Best regards,
Ivan


From @teve@the@b@ye@|@n @end|ng |rom gm@||@com  Tue Mar 24 05:30:26 2020
From: @teve@the@b@ye@|@n @end|ng |rom gm@||@com (Steven Scott)
Date: Mon, 23 Mar 2020 21:30:26 -0700
Subject: [R-pkg-devel] Need help building packages to track down ASAN error
Message-ID: <CAJqTW45oQrSsa6DxpKcZXPnE=uzC7szC_4j7cmn0v_MDeYw9vA@mail.gmail.com>

One of my packages (bsts) appears to have a memory error identified by ASAN.
I'm trying to build an ASAN-enabled R+bsts so that I can debug the error.

I'm using the rocker image rocker/r-devel-ubsan-clang, loaded and run as
follows:

docker run --cap-add SYS_PTRACE -e PASSWORD=<redacted> --rm -p 8787:8787 -v
/home/steve/code/BOOM:/home/steve/code/BOOM -it rocker/r-devel-ubsan-clang
/bin/bash

This launches me into a bash shell.  At this point I think I need to build
and
install my package.  On this image the home directory is /root, and under
/root
I have installed /root/.R/Makevars with the following content (per section
4.3
of WRE).

CC = clang -std=c99 -fsanitize=address -fno-omit-frame-pointer
CXX = clang++ -std=c++11 -fsanitize=address -fno-omit-frame-pointer
FC = gfortran -fsanitize=address

When I run the scripts to build and install my packages (bsts + 2
dependencies,
named Boom and BoomSpikeSlab), I get output that looks like

g++ -std=gnu++11 -I"/usr/share/R/include" -DNDEBUG
-I`/usr/lib/R/bin/Rscript -e "cat(system.file(package='Boom'))"`/include
-DADD_ -DR_NO_REMAP -DRLANGUAGE
-I"/usr/local/lib/R/site-library/Boom/include"   -fpic  -g -O2
-fdebug-prefix-map=/build/r-base-MP6Q4u/r-base-3.6.2=.
-fstack-protector-strong -Wformat -Werror=format-security -Wdate-time
-D_FORTIFY_SOURCE=2 -g  -c boom_spike_slab_init.cc -o boom_spike_slab_init.o
g++ -std=gnu++11 -I"/usr/share/R/include" -DNDEBUG
-I`/usr/lib/R/bin/Rscript -e "cat(system.file(package='Boom'))"`/include
-DADD_ -DR_NO_REMAP -DRLANGUAGE
-I"/usr/local/lib/R/site-library/Boom/include"   -fpic  -g -O2
-fdebug-prefix-map=/build/r-base-MP6Q4u/r-base-3.6.2=.
-fstack-protector-strong -Wformat -Werror=format-security -Wdate-time
-D_FORTIFY_SOURCE=2 -g  -c logit_spike_slab_wrapper.cc -o
logit_spike_slab_wrapper.o
....

Here g++ is being used instad of the requested clang++ (I'm assuming R on
this
image was built with clang), and the important -fsanitize=address flag is
not
present.  So it seems that ~/.R/Makevars is being ignored.

The goal is to produce an ASAN-enabled package so that I can test for the
error.
Am I on the correct path to producing such a package, and if so what else
do I
need to do to get there?

Thank you.

	[[alternative HTML version deleted]]


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Tue Mar 24 15:28:01 2020
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Tue, 24 Mar 2020 15:28:01 +0100
Subject: [R-pkg-devel] use of getNativeSymbolInfo
In-Reply-To: <bfbc1bd8-a24b-655a-b842-8d00c2d1d146@gmail.com>
References: <bfbc1bd8-a24b-655a-b842-8d00c2d1d146@gmail.com>
Message-ID: <6a164220-5d61-018b-03b4-6a3676616f78@gmail.com>

On 2/9/20 5:14 PM, Benjamin Tyner wrote:
> Hello,
>
> Using package nlme as an example, where there is a registered routine 
> fit_gnls:
>
> > library(nlme)
> > getDLLRegisteredRoutines("nlme")$.C$fit_gnls
> $name
> [1] "fit_gnls"
>
> $address
> <pointer: 0x55f8f99a93c0>
> attr(,"class")
> [1] "RegisteredNativeSymbol"
>
> $dll
> DLL name: nlme
> Filename: /home/btyner/R-77784/lib/R/library/nlme/libs/nlme.so
> Dynamic lookup: FALSE
>
> $numParameters
> [1] 10
>
> attr(,"class")
> [1] "CRoutine"???????? "NativeSymbolInfo"
>
> However when I tried this,
>
> > getNativeSymbolInfo(name = "fit_gnls", PACKAGE = "nlme")
>
> it says:
>
> Error in FUN(X[[i]], ...) : no such symbol fit_gnls in package nlme
>
> so I am wondering what I'm doing wrong...

This is because it is not allowed by the package: nlme calls 
R_forceSymbols(,TRUE) in its init function.

Tomas

>
> Regards,
> Ben
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From cr|@t|@nqu|rozd1997 @end|ng |rom gm@||@com  Tue Mar 24 17:50:56 2020
From: cr|@t|@nqu|rozd1997 @end|ng |rom gm@||@com (Daniel Quiroz Moreno)
Date: Tue, 24 Mar 2020 11:50:56 -0500
Subject: [R-pkg-devel] CRAN error with current version
Message-ID: <CAPxOvHWNT1Rvpe56PUfDqVEk3=xTsQ4kJzGRMH=AcDeO0btZYg@mail.gmail.com>

Dear community,

I have an issue with the current version of my package. The current CRAN
version is 1.1.0 when it was submitted, I had no warnings. These days I
fixed an issue and I would like to submit a minor version 1.1-1. I have no
errors or warnings in the local check.

Even though, when I submit to CRAN, it does not pass the automatic check.
The mail does not show any error or warning for the newest version (1.1-1)
but it points to a warning for the current version (1.1.0). I have
corrected this warning in the newest version but it does not pass the CRAN
check.

Please, can you help me how to fix this? I mean, how to avoid the current
CRAN version warnings, instead of the newest version?

If you would like to see the logs, I paste the mail.


package RGCxGC_1.1-1.tar.gz does not pass the incoming checks
automatically, please see the following pre-tests:
Windows: <
https://win-builder.r-project.org/incoming_pretest/RGCxGC_1.1-1_20200320_181616/Windows/00check.log
>
Status: 2 NOTEs
Debian: <
https://win-builder.r-project.org/incoming_pretest/RGCxGC_1.1-1_20200320_181616/Debian/00check.log
>
Status: 1 NOTE

Last released version's CRAN status: WARN: 2, NOTE: 6, OK: 5
See: <https://CRAN.R-project.org/web/checks/check_results_RGCxGC.html>

Last released version's additional issues:
  donttest <https://www.stats.ox.ac.uk/pub/bdr/donttest/RGCxGC.out>

CRAN Web: <https://cran.r-project.org/package=RGCxGC>

Please fix all problems and resubmit a fixed version via the webform.
If you are not sure how to fix the problems shown, please ask for help on
the R-package-devel mailing list:
<https://stat.ethz.ch/mailman/listinfo/r-package-devel>
If you are fairly certain the rejection is a false positive, please
reply-all to this message and explain.

More details are given in the directory:
<
https://win-builder.r-project.org/incoming_pretest/RGCxGC_1.1-1_20200320_181616/
>
The files will be removed after roughly 7 days.

No strong reverse dependencies to be checked.

-- 
Gracias por su tiempo.

____________________________
Estudiante* Ing*. Biotecnolog?a
Universidad *IKIAM*
Tena - Ecuador

	[[alternative HTML version deleted]]


From @eb@meyer @end|ng |rom |@u@de  Tue Mar 24 18:20:39 2020
From: @eb@meyer @end|ng |rom |@u@de (Sebastian Meyer)
Date: Tue, 24 Mar 2020 18:20:39 +0100
Subject: [R-pkg-devel] CRAN error with current version
In-Reply-To: <CAPxOvHWNT1Rvpe56PUfDqVEk3=xTsQ4kJzGRMH=AcDeO0btZYg@mail.gmail.com>
References: <CAPxOvHWNT1Rvpe56PUfDqVEk3=xTsQ4kJzGRMH=AcDeO0btZYg@mail.gmail.com>
Message-ID: <1c816485-3822-0e34-217a-bbbd248d0b09@fau.de>

The reason that your package does not pass the incoming checks is

> * checking CRAN incoming feasibility ... NOTE
> Maintainer: ?Cristian Quiroz-Moreno <cristianquirozd1997 at gmail.com>?
> 
> Uses the superseded package: ?snow?

You would need to explain to CRAN why you need to use "snow" rather than
base R's "parallel" package. But I guess you should actually replace
"snow" by "parallel" in your package.

Cheers,

	Sebastian


Am 24.03.20 um 17:50 schrieb Daniel Quiroz Moreno:
> Dear community,
> 
> I have an issue with the current version of my package. The current CRAN
> version is 1.1.0 when it was submitted, I had no warnings. These days I
> fixed an issue and I would like to submit a minor version 1.1-1. I have no
> errors or warnings in the local check.
> 
> Even though, when I submit to CRAN, it does not pass the automatic check.
> The mail does not show any error or warning for the newest version (1.1-1)
> but it points to a warning for the current version (1.1.0). I have
> corrected this warning in the newest version but it does not pass the CRAN
> check.
> 
> Please, can you help me how to fix this? I mean, how to avoid the current
> CRAN version warnings, instead of the newest version?
> 
> If you would like to see the logs, I paste the mail.
> 
> 
> package RGCxGC_1.1-1.tar.gz does not pass the incoming checks
> automatically, please see the following pre-tests:
> Windows: <
> https://win-builder.r-project.org/incoming_pretest/RGCxGC_1.1-1_20200320_181616/Windows/00check.log
>>
> Status: 2 NOTEs
> Debian: <
> https://win-builder.r-project.org/incoming_pretest/RGCxGC_1.1-1_20200320_181616/Debian/00check.log
>>
> Status: 1 NOTE
> 
> Last released version's CRAN status: WARN: 2, NOTE: 6, OK: 5
> See: <https://CRAN.R-project.org/web/checks/check_results_RGCxGC.html>
> 
> Last released version's additional issues:
>   donttest <https://www.stats.ox.ac.uk/pub/bdr/donttest/RGCxGC.out>
> 
> CRAN Web: <https://cran.r-project.org/package=RGCxGC>
> 
> Please fix all problems and resubmit a fixed version via the webform.
> If you are not sure how to fix the problems shown, please ask for help on
> the R-package-devel mailing list:
> <https://stat.ethz.ch/mailman/listinfo/r-package-devel>
> If you are fairly certain the rejection is a false positive, please
> reply-all to this message and explain.
> 
> More details are given in the directory:
> <
> https://win-builder.r-project.org/incoming_pretest/RGCxGC_1.1-1_20200320_181616/
>>
> The files will be removed after roughly 7 days.
> 
> No strong reverse dependencies to be checked.
>


From @teve@the@b@ye@|@n @end|ng |rom gm@||@com  Wed Mar 25 22:17:28 2020
From: @teve@the@b@ye@|@n @end|ng |rom gm@||@com (Steven Scott)
Date: Wed, 25 Mar 2020 14:17:28 -0700
Subject: [R-pkg-devel] help with ASAN
Message-ID: <CAJqTW44n7SPFTnVXFwsDaWaGjDw69ctGCXmZOgQ992QYd9MtXQ@mail.gmail.com>

I'm trying to build an ASAN enabled version of my R library to help debug
errors found by CRAN on my last submission.  I'm tantalizingly close, but
need some help figuring out what's wrong with my configuration.

I'm using a docker container that I think contains a version of R built
with the right options.  I launch the docker container as so:

docker run --cap-add SYS_PTRACE -e PASSWORD=<redacted> --rm -p 8787:8787 -v
/home/steve/code/BOOM:/home/steve/code/BOOM -it rocker/r-devel-ubsan-clang
/bin/bash

In this container I have added a ~/.R/Makevars file with the following
content:
CC= clang -std=c99 -fsanitize=address -fno-omit-frame-pointer
CXX= clang++ -std=c++11 -fsanitize=address -fno-omit-frame-pointer
CXX11= clang++ -std=c++11 -fsanitize=address -fno-omit-frame-pointer
FC = gfortran -fsanitize=address

When I build my package I get:
(... expected compiler output truncated except for final compile and link
step ... )
clang++ -std=c++11 -fsanitize=address -fno-omit-frame-pointer -std=gnu++11
-I"/usr/share/R/include" -DNDEBUG -I`/usr/lib/R/bin/Rscript -e
"cat(system.file(package='Boom'))"`/include -DADD_ -DR_NO_REMAP -DRLANGUAGE
-I"/usr/local/lib/R/site-library/Boom/include"   -fpic  -g -O2
-fdebug-prefix-map=/build/r-base-MP6Q4u/r-base-3.6.2=.
-fstack-protector-strong -Wformat -Werror=format-security -Wdate-time
-D_FORTIFY_SOURCE=2 -g  -c splines.cc -o splines.o
clang++ -std=c++11 -fsanitize=address -fno-omit-frame-pointer -std=gnu++11
-shared -L/usr/lib/R/lib -Wl,-z,relro -o BoomSpikeSlab.so
boom_spike_slab_init.o logit_spike_slab_wrapper.o mlm_spike_slab_wrapper.o
nested_regression_wrapper.o nnet_wrapper.o poisson_spike_slab_wrapper.o
probit_spike_slab_wrapper.o quantile_spike_wrapper.o
shrinkage_regression_wrapper.o spike_slab_wrapper.o splines.o
/usr/local/lib/R/site-library/Boom/lib/libboom.a -fsanitize=address
-L/usr/lib/R/lib -lR
installing to
/usr/local/lib/R/site-library/00LOCK-BoomSpikeSlab/00new/BoomSpikeSlab/libs
** R
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded from temporary location
Error: package or namespace load failed for ?BoomSpikeSlab? in
dyn.load(file, DLLpath = DLLpath, ...):
 unable to load shared object
'/usr/local/lib/R/site-library/00LOCK-BoomSpikeSlab/00new/BoomSpikeSlab/libs/BoomSpikeSlab.so':

/usr/local/lib/R/site-library/00LOCK-BoomSpikeSlab/00new/BoomSpikeSlab/libs/BoomSpikeSlab.so:
undefined symbol: __asan_option_detect_stack_use_after_return
Error: loading failed
Execution halted
ERROR: loading failed
* removing ?/usr/local/lib/R/site-library/BoomSpikeSlab?
* restoring previous ?/usr/local/lib/R/site-library/BoomSpikeSlab?
PACKAGE = BoomSpikeSlab

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Wed Mar 25 22:48:47 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 25 Mar 2020 16:48:47 -0500
Subject: [R-pkg-devel] help with ASAN
In-Reply-To: <CAJqTW44n7SPFTnVXFwsDaWaGjDw69ctGCXmZOgQ992QYd9MtXQ@mail.gmail.com>
References: <CAJqTW44n7SPFTnVXFwsDaWaGjDw69ctGCXmZOgQ992QYd9MtXQ@mail.gmail.com>
Message-ID: <24187.53695.353530.167914@rob.eddelbuettel.com>


Steve,

Your message has me puzzled over a few things just like your previous message
from a few days ago.

On 25 March 2020 at 14:17, Steven Scott wrote:
| I'm trying to build an ASAN enabled version of my R library to help debug
| errors found by CRAN on my last submission.  I'm tantalizingly close, but
| need some help figuring out what's wrong with my configuration.
| 
| I'm using a docker container that I think contains a version of R built
| with the right options.  I launch the docker container as so:
| 
| docker run --cap-add SYS_PTRACE -e PASSWORD=<redacted> --rm -p 8787:8787 -v
| /home/steve/code/BOOM:/home/steve/code/BOOM -it rocker/r-devel-ubsan-clang
| /bin/bash

My goto alias for docker does a few of these but never the --cap-add (seems
like you may need it for profiling, likely not for asan/ubsan), the password,
or the port (but who knows, maybe you need them...).  So I'd say

 docker run --rm -v /home/steve/code/BOOM:/home/steve/code/BOOM \
    -it rocker/r-devel-ubsan-clang /bin/bash

[ For completeness I have this
  ## docker run and mount 
  alias dkrr='docker run --rm -ti -v$(pwd):/work -w /work

and would then just do

  dkrr rocker/r-devel-ubsan-clang bash

which has a lesser cognitive load. But I digress. ]

| In this container I have added a ~/.R/Makevars file with the following
| content:
| CC= clang -std=c99 -fsanitize=address -fno-omit-frame-pointer
| CXX= clang++ -std=c++11 -fsanitize=address -fno-omit-frame-pointer
| CXX11= clang++ -std=c++11 -fsanitize=address -fno-omit-frame-pointer
| FC = gfortran -fsanitize=address

For ASAN/UBSAN to work you should use the same setting as the compiled
'host'. As you benefit from a pre-made Docker container, its settings are

  CC="clang -fsanitize=address,undefined -fno-sanitize=float-divide-by-zero -fno-omit-frame-pointer -fsanitize-address-use-after-scope" \
  CXX="clang++ -stdlib=libc++ -fsanitize=address,undefined -fno-sanitize=float-divide-by-zero -fno-omit-frame-pointer -fsanitize-address-use-after-scope" \

per 

  https://github.com/rocker-org/r-devel-san-clang/blob/master/Dockerfile#L90-L91

so I recommend you use the same. I found all this mysterious enough back in
the day when I first set it up that I create a package with *known* triggers
for these detections so that I could be sure I had at least their detection
right.  It is still at CRAN:

  https://cran.r-project.org/package=sanitizers

These things to change with compiler releases and what not. If this Docker
container does not work, there is another very good one here

  https://github.com/wch/r-debug
  
| When I build my package I get:
| (... expected compiler output truncated except for final compile and link
| step ... )
| clang++ -std=c++11 -fsanitize=address -fno-omit-frame-pointer -std=gnu++11
[...]
| /usr/local/lib/R/site-library/00LOCK-BoomSpikeSlab/00new/BoomSpikeSlab/libs/BoomSpikeSlab.so:
| undefined symbol: __asan_option_detect_stack_use_after_return

Looks like you also need to link with the ASAN library, possibly via -lasan.
My Dockerfile referenced above has

  MAIN_LD="clang++ -stdlib=libc++ -fsanitize=undefined,address"

and it may be implied by the -fsanitize=... business.

Hth, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From edd @end|ng |rom deb|@n@org  Thu Mar 26 01:21:37 2020
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 25 Mar 2020 19:21:37 -0500
Subject: [R-pkg-devel] help with ASAN
In-Reply-To: <24187.53695.353530.167914@rob.eddelbuettel.com>
References: <CAJqTW44n7SPFTnVXFwsDaWaGjDw69ctGCXmZOgQ992QYd9MtXQ@mail.gmail.com>
 <24187.53695.353530.167914@rob.eddelbuettel.com>
Message-ID: <24187.62865.302605.375024@rob.eddelbuettel.com>


Steve,

On 25 March 2020 at 16:48, Dirk Eddelbuettel wrote:
| For ASAN/UBSAN to work you should use the same setting as the compiled
| 'host'. As you benefit from a pre-made Docker container, its settings are
| 
|   CC="clang -fsanitize=address,undefined -fno-sanitize=float-divide-by-zero -fno-omit-frame-pointer -fsanitize-address-use-after-scope" \
|   CXX="clang++ -stdlib=libc++ -fsanitize=address,undefined -fno-sanitize=float-divide-by-zero -fno-omit-frame-pointer -fsanitize-address-use-after-scope" \

Addendum / correction: Because R-devel in this container as been built with
these settings, your package does NOT need to repeat them in its src/Makevars.

Just invoke it via RD as in RD CMD INSTALL ... or RD CMD check ...

Hth, Dirk

-- 
http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From @teve@the@b@ye@|@n @end|ng |rom gm@||@com  Thu Mar 26 01:31:32 2020
From: @teve@the@b@ye@|@n @end|ng |rom gm@||@com (Steven Scott)
Date: Wed, 25 Mar 2020 17:31:32 -0700
Subject: [R-pkg-devel] help with ASAN
In-Reply-To: <24187.62865.302605.375024@rob.eddelbuettel.com>
References: <CAJqTW44n7SPFTnVXFwsDaWaGjDw69ctGCXmZOgQ992QYd9MtXQ@mail.gmail.com>
 <24187.53695.353530.167914@rob.eddelbuettel.com>
 <24187.62865.302605.375024@rob.eddelbuettel.com>
Message-ID: <CAJqTW47bhxqjhs55jRTp_AxG+yRyLy1_Ra7=+UKqbFWorXONcw@mail.gmail.com>

Oohhh I didn't realize there was an RD.  That simplifies things a lot!
And for the record, I'm not surprised that my setup suggests that I don't
know what I'm doing viz-a-viz docker.  Everything was assembled by Google
search and spaghetti flinging, so I'm pleased to get some expert advice.

A grateful cheers and thank you for the help!

On Wed, Mar 25, 2020 at 5:21 PM Dirk Eddelbuettel <edd at debian.org> wrote:

>
> Steve,
>
> On 25 March 2020 at 16:48, Dirk Eddelbuettel wrote:
> | For ASAN/UBSAN to work you should use the same setting as the compiled
> | 'host'. As you benefit from a pre-made Docker container, its settings are
> |
> |   CC="clang -fsanitize=address,undefined
> -fno-sanitize=float-divide-by-zero -fno-omit-frame-pointer
> -fsanitize-address-use-after-scope" \
> |   CXX="clang++ -stdlib=libc++ -fsanitize=address,undefined
> -fno-sanitize=float-divide-by-zero -fno-omit-frame-pointer
> -fsanitize-address-use-after-scope" \
>
> Addendum / correction: Because R-devel in this container as been built with
> these settings, your package does NOT need to repeat them in its
> src/Makevars.
>
> Just invoke it via RD as in RD CMD INSTALL ... or RD CMD check ...
>
> Hth, Dirk
>
> --
> http://dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org
>

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Mar 26 02:16:39 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 26 Mar 2020 14:16:39 +1300
Subject: [R-pkg-devel] [FORGED]  help with ASAN
In-Reply-To: <CAJqTW44n7SPFTnVXFwsDaWaGjDw69ctGCXmZOgQ992QYd9MtXQ@mail.gmail.com>
References: <CAJqTW44n7SPFTnVXFwsDaWaGjDw69ctGCXmZOgQ992QYd9MtXQ@mail.gmail.com>
Message-ID: <04b09f2e-f3f4-ce02-4098-9ce34aa6d41f@auckland.ac.nz>


On 26/03/20 10:17 am, Steven Scott wrote:

> I'm trying to build an ASAN enabled version of my R library ....

<SNIP>

*PLEASE*!!!  Your R *package*!!!

(A library is a *collection* of packages.)

Correct terminology *does* matter, in that incorrect terminology can on 
occasion lead to confusion that that can on occasion have unfortunate 
consequences.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From @teve@the@b@ye@|@n @end|ng |rom gm@||@com  Thu Mar 26 05:16:36 2020
From: @teve@the@b@ye@|@n @end|ng |rom gm@||@com (Steven Scott)
Date: Wed, 25 Mar 2020 21:16:36 -0700
Subject: [R-pkg-devel] [FORGED]  help with ASAN
In-Reply-To: <04b09f2e-f3f4-ce02-4098-9ce34aa6d41f@auckland.ac.nz>
References: <CAJqTW44n7SPFTnVXFwsDaWaGjDw69ctGCXmZOgQ992QYd9MtXQ@mail.gmail.com>
 <04b09f2e-f3f4-ce02-4098-9ce34aa6d41f@auckland.ac.nz>
Message-ID: <CAJqTW45tqy8uoQtDMmKp6dp47P_cgiaqObU7pPkTE2nttrdrdg@mail.gmail.com>

Rolf, I will strive to do better.

Please note that you load a package with library(...).  Just sayin'.

On Wed, Mar 25, 2020 at 6:16 PM Rolf Turner <r.turner at auckland.ac.nz> wrote:

>
> On 26/03/20 10:17 am, Steven Scott wrote:
>
> > I'm trying to build an ASAN enabled version of my R library ....
>
> <SNIP>
>
> *PLEASE*!!!  Your R *package*!!!
>
> (A library is a *collection* of packages.)
>
> Correct terminology *does* matter, in that incorrect terminology can on
> occasion lead to confusion that that can on occasion have unfortunate
> consequences.
>
> cheers,
>
> Rolf Turner
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>

	[[alternative HTML version deleted]]


From r@turner @end|ng |rom @uck|@nd@@c@nz  Thu Mar 26 05:40:17 2020
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Thu, 26 Mar 2020 17:40:17 +1300
Subject: [R-pkg-devel] [FORGED]  help with ASAN
In-Reply-To: <CAJqTW45tqy8uoQtDMmKp6dp47P_cgiaqObU7pPkTE2nttrdrdg@mail.gmail.com>
References: <CAJqTW44n7SPFTnVXFwsDaWaGjDw69ctGCXmZOgQ992QYd9MtXQ@mail.gmail.com>
 <04b09f2e-f3f4-ce02-4098-9ce34aa6d41f@auckland.ac.nz>
 <CAJqTW45tqy8uoQtDMmKp6dp47P_cgiaqObU7pPkTE2nttrdrdg@mail.gmail.com>
Message-ID: <95e23502-30fe-65f8-7c0f-debd1ac1a841@auckland.ac.nz>


On 26/03/20 5:16 pm, Steven Scott wrote:

> Rolf, I will strive to do better.
> 
> Please note that you load a package with library(...).? Just sayin'.

Yeah, this issue has arisen/been discussed (on R-help I think) in the 
past.  The rationale is that you use the library() function to "take a 
package out of a library" (like taking a book out of a library).  In 
retrospect the developers might wish they had used a different name for 
the library() function, but it's really too late to change anything now.

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From iv@ircu m@iii@g oii m@iibox@org  Mon Mar 30 01:09:29 2020
From: iv@ircu m@iii@g oii m@iibox@org (iv@ircu m@iii@g oii m@iibox@org)
Date: Mon, 30 Mar 2020 01:09:29 +0200
Subject: [R-pkg-devel] System requirements of a vignette engine
Message-ID: <20200329230929.ddyjylr6nfznd3ar@h6.fooboz>


Dear All,
inspired by Karl Broman`s reader on using 'knitr' with 'asciidoc'
(http://kbroman.org/knitr_knutshell/pages/asciidoc.html), I wrote package
rasciidoc some time ago.
It is just a wrapper to knitr and asciidoc, which is a system requirement for
the package. CRAN does not need to have asciidoc installed to build and check
the package, although the package is pretty useless without asciidoc.

Now I have added a vignette engine to write vignettes using rasciidoc.
And here is the problem: this engine obviously needs asciidoc to be installed, 
which is not the case on CRAN, so the package with the vignette engine fails the
autocheck.
Writing vignettes that cannot go to CRAN seems pretty pointless. Does that mean
that writing vignette engines that do not rely on pandoc or LaTeX is pointless?
Or is it possible to get system requirements for vignette engines installed on
CRAN?

Thanks for your answers,
Dominik


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Mon Mar 30 16:12:42 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Mon, 30 Mar 2020 16:12:42 +0200
Subject: [R-pkg-devel] System requirements of a vignette engine
In-Reply-To: <20200329230929.ddyjylr6nfznd3ar@h6.fooboz>
References: <20200329230929.ddyjylr6nfznd3ar@h6.fooboz>
Message-ID: <4eb69926-824f-89ec-ebf5-6a8c1a382481@statistik.tu-dortmund.de>

Pls write to CRAN at R-project.org.

Best,
Uwe Ligges

On 30.03.2020 01:09, fvafrcu at mailbox.org wrote:
> 
> Dear All,
> inspired by Karl Broman`s reader on using 'knitr' with 'asciidoc'
> (http://kbroman.org/knitr_knutshell/pages/asciidoc.html), I wrote package
> rasciidoc some time ago.
> It is just a wrapper to knitr and asciidoc, which is a system requirement for
> the package. CRAN does not need to have asciidoc installed to build and check
> the package, although the package is pretty useless without asciidoc.
> 
> Now I have added a vignette engine to write vignettes using rasciidoc.
> And here is the problem: this engine obviously needs asciidoc to be installed,
> which is not the case on CRAN, so the package with the vignette engine fails the
> autocheck.
> Writing vignettes that cannot go to CRAN seems pretty pointless. Does that mean
> that writing vignette engines that do not rely on pandoc or LaTeX is pointless?
> Or is it possible to get system requirements for vignette engines installed on
> CRAN?
> 
> Thanks for your answers,
> Dominik
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> 

#


From kchetn|k73 @end|ng |rom gm@||@com  Mon Mar 30 16:18:31 2020
From: kchetn|k73 @end|ng |rom gm@||@com (Kelsey Chetnik)
Date: Mon, 30 Mar 2020 10:18:31 -0400
Subject: [R-pkg-devel] Help with Error Messages
Message-ID: <CAAwMXXseKh4hxVMrWmLHm602WfAtgjRRZF=0yJX3CE-U3o9Cew@mail.gmail.com>

Hi,

I am submitting a package to CRAN for the first time and I am not sure what
the following error means and how to solve it:
https://win-builder.r-project.org/incoming_pretest/MetaClean_0.1.0_20200330_150936/Windows/00install.out

Could someone please help me with this?

Thank you,
Kelsey Chetnik

	[[alternative HTML version deleted]]


From br|@n @end|ng |rom br@verock@com  Mon Mar 30 16:26:53 2020
From: br|@n @end|ng |rom br@verock@com (Brian G. Peterson)
Date: Mon, 30 Mar 2020 09:26:53 -0500
Subject: [R-pkg-devel] Help with Error Messages
In-Reply-To: <CAAwMXXseKh4hxVMrWmLHm602WfAtgjRRZF=0yJX3CE-U3o9Cew@mail.gmail.com>
References: <CAAwMXXseKh4hxVMrWmLHm602WfAtgjRRZF=0yJX3CE-U3o9Cew@mail.gmail.com>
Message-ID: <34723382430ac3d8b268c3b98699b33594e5f275.camel@braverock.com>

On Mon, 2020-03-30 at 10:18 -0400, Kelsey Chetnik wrote:
> Hi,
> 
> I am submitting a package to CRAN for the first time and I am not
> sure what
> the following error means and how to solve it:
> https://win-builder.r-project.org/incoming_pretest/MetaClean_0.1.0_20200330_150936/Windows/00install.out
> 
> Could someone please help me with this?
> 

The link will go away, so here is the error:

** byte-compile and prepare package for lazy loading
Error: .onLoad failed in loadNamespace() for 'S4Vectors', details:
  call: validObject(.Object)
  error: invalid class "LLint" object: superclass "integer_OR_LLint"
not defined in the environment of the object's class
Execution halted
ERROR: lazy loading failed for package 'MetaClean'

Does your package compile and run locally? 

Is the 'S4Vectors' package properly listed in 'Imports' ?

This error might be related to S4Vectors, and unrelated to you
directly.  Check on other Winbuilder architectures, R-Hub, etc, and see
if the error is replicated there.

Regards,

Brian


From renoz@o @end|ng |rom protonm@||@com  Mon Mar 30 23:20:43 2020
From: renoz@o @end|ng |rom protonm@||@com (renozao)
Date: Mon, 30 Mar 2020 21:20:43 +0000
Subject: [R-pkg-devel] =?utf-8?q?Error_creating_union_class=3A_object_?=
 =?utf-8?b?4oCYLl9fQ19fY29tcE1hdHJpeOKAmSBub3QgZm91bmQ=?=
Message-ID: <na_hvS9mQoE2Ex7h3m1UlL7AzQFz0Fuuets5kNRC7b7NBrkkYObfnkUAyj8T8oz48jBuBXZcEf0CJn2UL7f5TZ-N9jiT4qUd0eiE50R9xkU=@protonmail.com>

Hi,

when R CMD check is run under R-devel (2020-03-29 r78108) I get the following error at installation:

Error in get(cname, envir = cwhere, inherits = FALSE) :
  object ?.__C__compMatrix? not found
Error in setClassUnion("mMatrix", c("Matrix", "matrix")) :
  unable to create union class:  could not set members "Matrix"

This does not happen on R 3.6.3.

I tried with Matrix listed in Depends but I still get the same error.

Is this linked to some changes in union classes or the Matrix package?

Thank you.

Bests,

Renaud
	[[alternative HTML version deleted]]


From tmcdon@|d @end|ng |rom we@t-|nc@com  Tue Mar 31 00:42:15 2020
From: tmcdon@|d @end|ng |rom we@t-|nc@com (Trent McDonald)
Date: Mon, 30 Mar 2020 16:42:15 -0600
Subject: [R-pkg-devel] Failing incoming tests on 'stringsAsFactors = TRUE'
Message-ID: <CAFfyi7H-N45O88q1XPG4i=JqoPb5crrY-ybg9CQiNmSindwNsQ@mail.gmail.com>

Trying to update a package on CRAN.  It passes all the following tests:
Local (r CMD --as-cran, R 3.6.2), devtools::check_win_dev,
devtools::check_rhub, and my personal .yml file on travis-ci.org   But, the
incoming CRAN tests last week for windows fail (linux test throw different
warning that I can fix).  This is the log file:

* using log directory 'd:/RCompile/CRANincoming/R-devel/SDraw.Rcheck'
* using R version 4.0.0 alpha (2020-03-26 r78078)
* using platform: x86_64-w64-mingw32 (64-bit)
* using session charset: ISO8859-1
* checking for file 'SDraw/DESCRIPTION' ... OK
* checking extension type ... Package
* this is package 'SDraw' version '2.1.10'
* checking CRAN incoming feasibility ... Note_to_CRAN_maintainers
Maintainer: 'Trent McDonald <tmcdonald at west-inc.com>'
* checking package namespace information ... OK

--- snip ---- multiple checks, all OK

* checking 'build' directory ... OK
* checking DESCRIPTION meta-information ... WARNING
Warning message:
In options(stringsAsFactors = TRUE) :
  'options(stringsAsFactors = TRUE)' is deprecated and will be disabled
 ERROR
Warning message:
In options(stringsAsFactors = TRUE) :
  'options(stringsAsFactors = TRUE)' is deprecated and will be disabled
* DONE
Status: 1 ERROR, 1 WARNING

Course forward unknown.  Googling unproductive.  I searched the package
source for the use of 'stringsAsFactors'. I never set the option nor call
data.frame with it nor read.csv nor use stringsAsFactors anywhere.  In my
local .Rprofile, I set 'options(stringsAsFactors=FALSE)', but that should
not matter, correct?  Suggestions?

My local version is 3.6.2.  Source code link :
https://github.com/tmcd82070/SDraw


*Trent McDonald*
* Senior Statistician*

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Mar 31 03:07:50 2020
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Mon, 30 Mar 2020 21:07:50 -0400
Subject: [R-pkg-devel] 
 Failing incoming tests on 'stringsAsFactors = TRUE'
In-Reply-To: <CAFfyi7H-N45O88q1XPG4i=JqoPb5crrY-ybg9CQiNmSindwNsQ@mail.gmail.com>
References: <CAFfyi7H-N45O88q1XPG4i=JqoPb5crrY-ybg9CQiNmSindwNsQ@mail.gmail.com>
Message-ID: <57059385-b70a-281e-23ff-8a04e58d304f@gmail.com>

The warning about stringsAsFactors is very new; I don't think it's even 
mentioned in the NEWS, though the help ?data.frame mentions it.

So I suspect either the Windows build happened in the middle of 
committing code to implement the warning, and it wasn't all tested yet, 
or some package you depend on sets options(stringsAsFactors = TRUE). 
I'd try submitting your package to Win-builder R-devel and see if it 
still finds that issue.

(Instructions are here:  https://win-builder.r-project.org/).

Duncan Murdoch



On 30/03/2020 6:42 p.m., Trent McDonald wrote:
> Trying to update a package on CRAN.  It passes all the following tests:
> Local (r CMD --as-cran, R 3.6.2), devtools::check_win_dev,
> devtools::check_rhub, and my personal .yml file on travis-ci.org   But, the
> incoming CRAN tests last week for windows fail (linux test throw different
> warning that I can fix).  This is the log file:
> 
> * using log directory 'd:/RCompile/CRANincoming/R-devel/SDraw.Rcheck'
> * using R version 4.0.0 alpha (2020-03-26 r78078)
> * using platform: x86_64-w64-mingw32 (64-bit)
> * using session charset: ISO8859-1
> * checking for file 'SDraw/DESCRIPTION' ... OK
> * checking extension type ... Package
> * this is package 'SDraw' version '2.1.10'
> * checking CRAN incoming feasibility ... Note_to_CRAN_maintainers
> Maintainer: 'Trent McDonald <tmcdonald at west-inc.com>'
> * checking package namespace information ... OK
> 
> --- snip ---- multiple checks, all OK
> 
> * checking 'build' directory ... OK
> * checking DESCRIPTION meta-information ... WARNING
> Warning message:
> In options(stringsAsFactors = TRUE) :
>    'options(stringsAsFactors = TRUE)' is deprecated and will be disabled
>   ERROR
> Warning message:
> In options(stringsAsFactors = TRUE) :
>    'options(stringsAsFactors = TRUE)' is deprecated and will be disabled
> * DONE
> Status: 1 ERROR, 1 WARNING
> 
> Course forward unknown.  Googling unproductive.  I searched the package
> source for the use of 'stringsAsFactors'. I never set the option nor call
> data.frame with it nor read.csv nor use stringsAsFactors anywhere.  In my
> local .Rprofile, I set 'options(stringsAsFactors=FALSE)', but that should
> not matter, correct?  Suggestions?
> 
> My local version is 3.6.2.  Source code link :
> https://github.com/tmcd82070/SDraw
> 
> 
> *Trent McDonald*
> * Senior Statistician*
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Mar 31 15:32:47 2020
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 31 Mar 2020 15:32:47 +0200
Subject: [R-pkg-devel] 
 Failing incoming tests on 'stringsAsFactors = TRUE'
In-Reply-To: <57059385-b70a-281e-23ff-8a04e58d304f@gmail.com>
References: <CAFfyi7H-N45O88q1XPG4i=JqoPb5crrY-ybg9CQiNmSindwNsQ@mail.gmail.com>
 <57059385-b70a-281e-23ff-8a04e58d304f@gmail.com>
Message-ID: <97db1074-256e-23e6-4f35-b1e692bc8410@statistik.tu-dortmund.de>

Actually we had the Windows platform for incomign tests on
stringsAsFactors = TRUE
for checking back compatibility to older versions of R, but this is no 
longer possible for new versions of R-devel.

Can you pls simply resubmit the same version?

Best,
Uwe Ligges



On 31.03.2020 03:07, Duncan Murdoch wrote:
> The warning about stringsAsFactors is very new; I don't think it's even 
> mentioned in the NEWS, though the help ?data.frame mentions it.
> 
> So I suspect either the Windows build happened in the middle of 
> committing code to implement the warning, and it wasn't all tested yet, 
> or some package you depend on sets options(stringsAsFactors = TRUE). I'd 
> try submitting your package to Win-builder R-devel and see if it still 
> finds that issue.
> 
> (Instructions are here:? https://win-builder.r-project.org/).
> 
> Duncan Murdoch
> 
> 
> 
> On 30/03/2020 6:42 p.m., Trent McDonald wrote:
>> Trying to update a package on CRAN.? It passes all the following tests:
>> Local (r CMD --as-cran, R 3.6.2), devtools::check_win_dev,
>> devtools::check_rhub, and my personal .yml file on travis-ci.org   
>> But, the
>> incoming CRAN tests last week for windows fail (linux test throw 
>> different
>> warning that I can fix).? This is the log file:
>>
>> * using log directory 'd:/RCompile/CRANincoming/R-devel/SDraw.Rcheck'
>> * using R version 4.0.0 alpha (2020-03-26 r78078)
>> * using platform: x86_64-w64-mingw32 (64-bit)
>> * using session charset: ISO8859-1
>> * checking for file 'SDraw/DESCRIPTION' ... OK
>> * checking extension type ... Package
>> * this is package 'SDraw' version '2.1.10'
>> * checking CRAN incoming feasibility ... Note_to_CRAN_maintainers
>> Maintainer: 'Trent McDonald <tmcdonald at west-inc.com>'
>> * checking package namespace information ... OK
>>
>> --- snip ---- multiple checks, all OK
>>
>> * checking 'build' directory ... OK
>> * checking DESCRIPTION meta-information ... WARNING
>> Warning message:
>> In options(stringsAsFactors = TRUE) :
>> ?? 'options(stringsAsFactors = TRUE)' is deprecated and will be disabled
>> ? ERROR
>> Warning message:
>> In options(stringsAsFactors = TRUE) :
>> ?? 'options(stringsAsFactors = TRUE)' is deprecated and will be disabled
>> * DONE
>> Status: 1 ERROR, 1 WARNING
>>
>> Course forward unknown.? Googling unproductive.? I searched the package
>> source for the use of 'stringsAsFactors'. I never set the option nor call
>> data.frame with it nor read.csv nor use stringsAsFactors anywhere.? In my
>> local .Rprofile, I set 'options(stringsAsFactors=FALSE)', but that should
>> not matter, correct?? Suggestions?
>>
>> My local version is 3.6.2.? Source code link :
>> https://github.com/tmcd82070/SDraw
>>
>>
>> *Trent McDonald*
>> * Senior Statistician*
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From Ke|th@Go|d|e|d @end|ng |rom nyu|@ngone@org  Tue Mar 31 16:36:39 2020
From: Ke|th@Go|d|e|d @end|ng |rom nyu|@ngone@org (Goldfeld, Keith)
Date: Tue, 31 Mar 2020 14:36:39 +0000
Subject: [R-pkg-devel] Non-standard things in the check directory
Message-ID: <d3d3e30d30bf44f29711cd565c926612@nyulangone.org>

Good morning -
I am running checks (using devtools::check_rhub) for my package `simstudy`, and I get one note from one server, Windows Server 2008 R2 SP1, R-devel, 32/64 bit:
NOTES:

* checking for non-standard things in the check directory ... NOTE
Found the following files/directories:
  'examples_i386' 'examples_x64' 'simstudy-Ex_i386.Rout'
  'simstudy-Ex_x64.Rout' 'tests_i386' 'tests_x64'

In my previous submission, I got this note as well. I see that it is likely a server issue, and not my issue, but is there any way for me to modify my package to make this go away?


- Keith

	[[alternative HTML version deleted]]


From kchetn|k73 @end|ng |rom gm@||@com  Tue Mar 31 17:35:29 2020
From: kchetn|k73 @end|ng |rom gm@||@com (Kelsey Chetnik)
Date: Tue, 31 Mar 2020 11:35:29 -0400
Subject: [R-pkg-devel] 'S4Vectors' Error - Bioconductor dependencies
Message-ID: <CAAwMXXuEezi1yNTAybFAaETiseaJrdmGAHJHnn-2jMS6cwjvOQ@mail.gmail.com>

Hi,

I am getting a dependencies error and I'm not sure how to solve it. This is
the error:

* installing *source* package 'MetaClean' ...
** using staged installation
** R
** data
*** moving datasets to lazyload DB
** inst
** byte-compile and prepare package for lazy loading
Error: .onLoad failed in loadNamespace() for 'S4Vectors', details:
  call: validObject(.Object)
  error: invalid class "LLint" object: superclass "integer_OR_LLint"
not defined in the environment of the object's class
Execution halted
ERROR: lazy loading failed for package 'MetaClean'
* removing 'd:/RCompile/CRANincoming/R-devel/lib/MetaClean'


I think the issue is related to one of the bioconductor dependencies that I
have (XCMS) not installing properly. I was told that I need to include
biocViews: in my DESCRIPTION file, which I did, but the problem still
persists. Could someone please take a look at my DESCRIPTION to let me know
if there is something wrong / missing:

Package: MetaClean
Title: MetaClean for the Automatic Detection of Low Quality Peaks in
Untargeted Metabolomics Data
Version: 0.1.0
Author: Kelsey Chetnik
Maintainer: Kelsey Chetnik <kchetnik73 at gmail.com>
Description: This package utilizes 12 peak quality metrics and 9 diverse
machine learning algorithms to build a classifier for the automatic
  assessment of peak integration quality of peaks from untargeted
metabolomics analyses.
Depends: R (>= 3.5.0),
         MLmetrics
biocViews:
Imports:
    xcms,
    scmamp,
    caret,
    reshape2,
    knitr,
    ggplot2,
    plotrix,
    tools,
    utils,
    klaR,
    fastAdaboost,
    rpart,
    randomForest,
    kernlab,
    BiocStyle,
    methods,
    S4Vectors
License: GPL-3
Encoding: UTF-8
LazyData: true
RoxygenNote: 7.1.0
VignetteBuilder: knitr

I'm stuck because I'm able to compile and run the package on my machine
(macOS) and a local windows machine without any ERRORS, WARNINGS, or NOTES
but I keep getting this error when submitting to CRAN.

Could someone please help me with this?

Thanks,
Kelsey

	[[alternative HTML version deleted]]


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Tue Mar 31 17:58:02 2020
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Tue, 31 Mar 2020 15:58:02 +0000
Subject: [R-pkg-devel] 'S4Vectors' Error - Bioconductor dependencies
In-Reply-To: <CAAwMXXuEezi1yNTAybFAaETiseaJrdmGAHJHnn-2jMS6cwjvOQ@mail.gmail.com>
References: <CAAwMXXuEezi1yNTAybFAaETiseaJrdmGAHJHnn-2jMS6cwjvOQ@mail.gmail.com>
Message-ID: <BL0PR04MB6609E82DF86416D901CFF141F9C80@BL0PR04MB6609.namprd04.prod.outlook.com>

I guess this is in R-4-0-0 alpha or R-devel, and is due to a change in the methods package. This is because a serialized object in S4Vectors needs to be re-created, and is likely because package(s) need to be updated. If this is your own machine, then you could make sure that

  BiocManager::valid()

returns TRUE and / or update all packages to the most recent available

  BiocManager::install(ask = FALSE)

I'm not sure about CRAN, but am confident that it will eventually clear itself up... (not much comfort, I know...)

Martin Morgan

?On 3/31/20, 11:42 AM, "R-package-devel on behalf of Kelsey Chetnik" <r-package-devel-bounces at r-project.org on behalf of kchetnik73 at gmail.com> wrote:

    Hi,
    
    I am getting a dependencies error and I'm not sure how to solve it. This is
    the error:
    
    * installing *source* package 'MetaClean' ...
    ** using staged installation
    ** R
    ** data
    *** moving datasets to lazyload DB
    ** inst
    ** byte-compile and prepare package for lazy loading
    Error: .onLoad failed in loadNamespace() for 'S4Vectors', details:
      call: validObject(.Object)
      error: invalid class "LLint" object: superclass "integer_OR_LLint"
    not defined in the environment of the object's class
    Execution halted
    ERROR: lazy loading failed for package 'MetaClean'
    * removing 'd:/RCompile/CRANincoming/R-devel/lib/MetaClean'
    
    
    I think the issue is related to one of the bioconductor dependencies that I
    have (XCMS) not installing properly. I was told that I need to include
    biocViews: in my DESCRIPTION file, which I did, but the problem still
    persists. Could someone please take a look at my DESCRIPTION to let me know
    if there is something wrong / missing:
    
    Package: MetaClean
    Title: MetaClean for the Automatic Detection of Low Quality Peaks in
    Untargeted Metabolomics Data
    Version: 0.1.0
    Author: Kelsey Chetnik
    Maintainer: Kelsey Chetnik <kchetnik73 at gmail.com>
    Description: This package utilizes 12 peak quality metrics and 9 diverse
    machine learning algorithms to build a classifier for the automatic
      assessment of peak integration quality of peaks from untargeted
    metabolomics analyses.
    Depends: R (>= 3.5.0),
             MLmetrics
    biocViews:
    Imports:
        xcms,
        scmamp,
        caret,
        reshape2,
        knitr,
        ggplot2,
        plotrix,
        tools,
        utils,
        klaR,
        fastAdaboost,
        rpart,
        randomForest,
        kernlab,
        BiocStyle,
        methods,
        S4Vectors
    License: GPL-3
    Encoding: UTF-8
    LazyData: true
    RoxygenNote: 7.1.0
    VignetteBuilder: knitr
    
    I'm stuck because I'm able to compile and run the package on my machine
    (macOS) and a local windows machine without any ERRORS, WARNINGS, or NOTES
    but I keep getting this error when submitting to CRAN.
    
    Could someone please help me with this?
    
    Thanks,
    Kelsey
    
    	[[alternative HTML version deleted]]
    
    ______________________________________________
    R-package-devel at r-project.org mailing list
    https://stat.ethz.ch/mailman/listinfo/r-package-devel
    

From tmcdon@|d @end|ng |rom we@t-|nc@com  Tue Mar 31 20:50:55 2020
From: tmcdon@|d @end|ng |rom we@t-|nc@com (Trent McDonald)
Date: Tue, 31 Mar 2020 12:50:55 -0600
Subject: [R-pkg-devel] 
 Failing incoming tests on 'stringsAsFactors = TRUE'
In-Reply-To: <97db1074-256e-23e6-4f35-b1e692bc8410@statistik.tu-dortmund.de>
References: <CAFfyi7H-N45O88q1XPG4i=JqoPb5crrY-ybg9CQiNmSindwNsQ@mail.gmail.com>
 <57059385-b70a-281e-23ff-8a04e58d304f@gmail.com>
 <97db1074-256e-23e6-4f35-b1e692bc8410@statistik.tu-dortmund.de>
Message-ID: <CAFfyi7HGXfoRqcsJmNjgt45A7bDpCLYwqsKnpzVOuExq2xikyQ@mail.gmail.com>

 Emailing with final resolution of this topic.  I resubmitted the same
version and it passed pre-checks and reverse depends and is on its way to
CRAN.   Thank you all for your attention here, and for all you do for the R
community. Your work does not go unnoticed.

*Trent McDonald*
* Senior Statistician*

On Tue, Mar 31, 2020 at 7:33 AM Uwe Ligges <ligges at statistik.tu-dortmund.de>
wrote:

> Actually we had the Windows platform for incomign tests on
> stringsAsFactors = TRUE
> for checking back compatibility to older versions of R, but this is no
> longer possible for new versions of R-devel.
>
> Can you pls simply resubmit the same version?
>
> Best,
> Uwe Ligges
>
>
>
> On 31.03.2020 03:07, Duncan Murdoch wrote:
> > The warning about stringsAsFactors is very new; I don't think it's even
> > mentioned in the NEWS, though the help ?data.frame mentions it.
> >
> > So I suspect either the Windows build happened in the middle of
> > committing code to implement the warning, and it wasn't all tested yet,
> > or some package you depend on sets options(stringsAsFactors = TRUE). I'd
> > try submitting your package to Win-builder R-devel and see if it still
> > finds that issue.
> >
> > (Instructions are here:  https://win-builder.r-project.org/).
> >
> > Duncan Murdoch
> >
> >
> >
> > On 30/03/2020 6:42 p.m., Trent McDonald wrote:
> >> Trying to update a package on CRAN.  It passes all the following tests:
> >> Local (r CMD --as-cran, R 3.6.2), devtools::check_win_dev,
> >> devtools::check_rhub, and my personal .yml file on travis-ci.org
> >> But, the
> >> incoming CRAN tests last week for windows fail (linux test throw
> >> different
> >> warning that I can fix).  This is the log file:
> >>
> >> * using log directory 'd:/RCompile/CRANincoming/R-devel/SDraw.Rcheck'
> >> * using R version 4.0.0 alpha (2020-03-26 r78078)
> >> * using platform: x86_64-w64-mingw32 (64-bit)
> >> * using session charset: ISO8859-1
> >> * checking for file 'SDraw/DESCRIPTION' ... OK
> >> * checking extension type ... Package
> >> * this is package 'SDraw' version '2.1.10'
> >> * checking CRAN incoming feasibility ... Note_to_CRAN_maintainers
> >> Maintainer: 'Trent McDonald <tmcdonald at west-inc.com>'
> >> * checking package namespace information ... OK
> >>
> >> --- snip ---- multiple checks, all OK
> >>
> >> * checking 'build' directory ... OK
> >> * checking DESCRIPTION meta-information ... WARNING
> >> Warning message:
> >> In options(stringsAsFactors = TRUE) :
> >>    'options(stringsAsFactors = TRUE)' is deprecated and will be disabled
> >>   ERROR
> >> Warning message:
> >> In options(stringsAsFactors = TRUE) :
> >>    'options(stringsAsFactors = TRUE)' is deprecated and will be disabled
> >> * DONE
> >> Status: 1 ERROR, 1 WARNING
> >>
> >> Course forward unknown.  Googling unproductive.  I searched the package
> >> source for the use of 'stringsAsFactors'. I never set the option nor
> call
> >> data.frame with it nor read.csv nor use stringsAsFactors anywhere.  In
> my
> >> local .Rprofile, I set 'options(stringsAsFactors=FALSE)', but that
> should
> >> not matter, correct?  Suggestions?
> >>
> >> My local version is 3.6.2.  Source code link :
> >> https://github.com/tmcd82070/SDraw
> >>
> >>
> >> *Trent McDonald*
> >> * Senior Statistician*
> >>
> >>     [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-package-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-package-devel
> >>
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


