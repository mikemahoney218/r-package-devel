From kev|n@r@coombe@ @end|ng |rom gm@||@com  Sat Apr  1 23:03:28 2023
From: kev|n@r@coombe@ @end|ng |rom gm@||@com (Kevin R. Coombes)
Date: Sat, 1 Apr 2023 17:03:28 -0400
Subject: [R-pkg-devel] correcting errors in an existing package
In-Reply-To: <CAJJ-gHw4O47SvoLHCeMxiTAsFWwCpJdxpZhom-4jRW5Onmp0QQ@mail.gmail.com>
References: <CAJJ-gHw4O47SvoLHCeMxiTAsFWwCpJdxpZhom-4jRW5Onmp0QQ@mail.gmail.com>
Message-ID: <2ea294cc-1b19-fc91-0007-6d1a60ef3ca2@gmail.com>

1. Yes, remove the "lazyData" line from the DESCRIPTION file.

2. Do you have "stats" in the "Imports" line in the DESCRIPTION file? If 
not, put it in along with the "importFrom" line in the NAMESPACE file.

On 3/31/2023 4:51 PM, Dennis Boos wrote:
> Recently I got a message from CRAN that my package Monte.Carlo.se (on CRAN
> for the last few years) does not pass current testing.  There seemed to be
> 2 problems:
>
> ***************************************************************************************************************
>
> 1. * checking LazyData ... NOTE
>    'LazyData' is specified without a 'data' directory
>
> I have this line in my DESCRIPTION file:
>
> LazyData: true
>
> Should I remove that?
>
> *****************************************************************************************************************
>
> 2. * checking examples with --run-donttest ... [42s/42s] ERROR
> Running examples in ?Monte.Carlo.se-Ex.R? failed
> The error most likely occurred in:
>
>> pairwise.se(hold,xcol=10:12,summary.f=cv)
> Error: object 'hold' not found
> Execution halted
>
> ***************************************************************************************
>
> So, I put in the R code to generate the data matrix *hold.  *But that
> brought a host of other errors when checking in Rstudio with
>
>> devtools::check("S:/Documents/srcis/a.projects/Monte.Carlo.isr.and.package/Monte.Carlo.se.March.2023")
> I started seeing the following list about standard functions like sd.
>
> N  checking R code for possible problems (3.4s)
>     boot.se: no visible global function definition for 'sd'
>     boot.var: no visible global function definition for 'var'
>     corr: no visible global function definition for 'cor'
>     cv: no visible global function definition for 'sd'
>     ratio.mean.sdhat.sd: no visible global function definition for 'sd'
>     ratio.mean.vhat.var: no visible global function definition for 'var'
>     ratio.sd: no visible global function definition for 'sd'
>     ratio.var: no visible global function definition for 'var'
>     varn: no visible global function definition for 'var'
>     Undefined global functions or variables:
>       cor sd var
>     Consider adding
>       importFrom("stats", "cor", "sd", "var")
>     to your NAMESPACE file.
>
> But you can't add those functions to NAMESPACE. Well I did but
>
> devtools::build()
>
>
> gets rid of it. Also, I keep getting the message in the Rstudio check
>
> WARNING
>     'qpdf' is needed for checks on size reduction of PDFs
>
>
> but I got the latest versions of R and Rstudio and was able to get
> qpdf to install and loaded with library(qpdf), but Rstudio still gives
> that message.
>
> So, if anybody has any suggestions, I would appreciate it.
>
> Thanks.
>
> Dennis
>
>
>
>
>
>
>
>
>
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Apr  1 23:34:08 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 1 Apr 2023 17:34:08 -0400
Subject: [R-pkg-devel] correcting errors in an existing package
In-Reply-To: <CAJJ-gHw4O47SvoLHCeMxiTAsFWwCpJdxpZhom-4jRW5Onmp0QQ@mail.gmail.com>
References: <CAJJ-gHw4O47SvoLHCeMxiTAsFWwCpJdxpZhom-4jRW5Onmp0QQ@mail.gmail.com>
Message-ID: <c6b52458-35c0-8ef4-93aa-d37c50769460@gmail.com>

On 31/03/2023 4:51 p.m., Dennis Boos wrote:
> Recently I got a message from CRAN that my package Monte.Carlo.se (on CRAN
> for the last few years) does not pass current testing.  There seemed to be
> 2 problems:
> 
> ***************************************************************************************************************
> 
> 1. * checking LazyData ... NOTE
>    'LazyData' is specified without a 'data' directory
> 
> I have this line in my DESCRIPTION file:
> 
> LazyData: true
> 
> Should I remove that?
> 
> *****************************************************************************************************************
> 
> 2. * checking examples with --run-donttest ... [42s/42s] ERROR
> Running examples in ?Monte.Carlo.se-Ex.R? failed
> The error most likely occurred in:
> 
>> pairwise.se(hold,xcol=10:12,summary.f=cv)
> Error: object 'hold' not found
> Execution halted
> 
> ***************************************************************************************
> 
> So, I put in the R code to generate the data matrix *hold.  *But that
> brought a host of other errors when checking in Rstudio with
> 
>> devtools::check("S:/Documents/srcis/a.projects/Monte.Carlo.isr.and.package/Monte.Carlo.se.March.2023")
> 
> I started seeing the following list about standard functions like sd.
> 
> N  checking R code for possible problems (3.4s)
>     boot.se: no visible global function definition for 'sd'
>     boot.var: no visible global function definition for 'var'
>     corr: no visible global function definition for 'cor'
>     cv: no visible global function definition for 'sd'
>     ratio.mean.sdhat.sd: no visible global function definition for 'sd'
>     ratio.mean.vhat.var: no visible global function definition for 'var'
>     ratio.sd: no visible global function definition for 'sd'
>     ratio.var: no visible global function definition for 'var'
>     varn: no visible global function definition for 'var'
>     Undefined global functions or variables:
>       cor sd var
>     Consider adding
>       importFrom("stats", "cor", "sd", "var")
>     to your NAMESPACE file.
> 
> But you can't add those functions to NAMESPACE. Well I did but
> 
> devtools::build()
> 
> 
> gets rid of it. Also, I keep getting the message in the Rstudio check
> 
> WARNING
>     'qpdf' is needed for checks on size reduction of PDFs
> 
> 
> but I got the latest versions of R and Rstudio and was able to get
> qpdf to install and loaded with library(qpdf), but Rstudio still gives
> that message.
> 

It sounds as though you're using Roxygen2 to generate your NAMESPACE 
file.  If so, you need @imports directives in the comments 
(conventionally before the function that uses the import, but I think it 
doesn't really matter where).

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Apr  1 23:36:50 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 1 Apr 2023 17:36:50 -0400
Subject: [R-pkg-devel] Vignette rebuilding failed
In-Reply-To: <CA+Rxh848cSvnnQ50CbiNr+dXagAx069hxPuGvNipHsvBWj2=8Q@mail.gmail.com>
References: <CA+Rxh848cSvnnQ50CbiNr+dXagAx069hxPuGvNipHsvBWj2=8Q@mail.gmail.com>
Message-ID: <f40b010f-25bc-a75c-151a-5e71d967cc1c@gmail.com>

The error message seems pretty clear:  "The function xfun::isFALSE() 
will be deprecated in the future. Please consider using base::isFALSE(x) 
or identical(x, FALSE) instead".

So don't use xfun::isFALSE().

Duncan Murdoch



On 31/03/2023 5:01 p.m., Deepankar Basu wrote:
> Hello All,
> 
> I am in the process of developing an R package (
> https://github.com/dbasu-umass/clptheory) and have encountered problems
> with the vignette.
> 
> I had initially been able to build the vignette but *after *I added a new
> function to my package, I have been  getting the error message that
> "Vignette rebuilding failed" when I use devtools:check().
> 
> If I use devtools:check(vignette=FALSE), there are no error messages. I can
> also compile the vignette with knitr.
> 
> Below is the output from devtools:check(vignette=FALSE)
>> devtools::check(vignettes = FALSE)
> ?? Documenting
> ?????????????????????????????????????????????????????????????????????????????????????????????
> ? Updating clptheory documentation
> ? Loading clptheory
> 
> ?? Building
> ????????????????????????????????????????????????????????????????????????????????????????????????
> Setting env vars:
> ? CFLAGS    : -Wall -pedantic -fdiagnostics-color=always
> ? CXXFLAGS  : -Wall -pedantic -fdiagnostics-color=always
> ? CXX11FLAGS: -Wall -pedantic -fdiagnostics-color=always
> ? CXX14FLAGS: -Wall -pedantic -fdiagnostics-color=always
> ? CXX17FLAGS: -Wall -pedantic -fdiagnostics-color=always
> ? CXX20FLAGS: -Wall -pedantic -fdiagnostics-color=always
> ?? R CMD build
> ?????????????????????????????????????????????????????????????????????????????????????????????
> ?  checking for file ?/home/basu15/MyRProjects/clptheory/DESCRIPTION? ...
> ?  preparing ?clptheory?:
> ?  checking DESCRIPTION meta-information ...
> ?  checking for LF line-endings in source and make files and shell scripts
> ?  checking for empty or unneeded directories
> ?  building ?clptheory_0.0.0.9000.tar.gz?
> 
> ?? Checking
> ????????????????????????????????????????????????????????????????????????????????????????????????
> Setting env vars:
> ? _R_CHECK_CRAN_INCOMING_USE_ASPELL_           : TRUE
> ? _R_CHECK_CRAN_INCOMING_REMOTE_               : FALSE
> ? _R_CHECK_CRAN_INCOMING_                      : FALSE
> ? _R_CHECK_FORCE_SUGGESTS_                     : FALSE
> ? _R_CHECK_PACKAGES_USED_IGNORE_UNUSED_IMPORTS_: FALSE
> ? NOT_CRAN                                     : true
> ?? R CMD check
> ?????????????????????????????????????????????????????????????????????????????????????????????
> ?  using log directory ?/tmp/RtmpCSbZbZ/file3f721a56f9d0/clptheory.Rcheck?
> ?  using R version 4.2.3 (2023-03-15)
> ?  using platform: x86_64-pc-linux-gnu (64-bit)
> ?  using session charset: UTF-8
> ?  using options ?--no-manual --ignore-vignettes --as-cran?
> ?  checking for file ?clptheory/DESCRIPTION?
> ?  this is package ?clptheory? version ?0.0.0.9000?
> ?  package encoding: UTF-8
> ?  checking package namespace information
> ?  checking package dependencies (2.5s)
> ?  checking if this is a source package ...
> ?  checking if there is a namespace
> ?  checking for executable files ...
> ?  checking for hidden files and directories ...
> ?  checking for portable file names
> ?  checking for sufficient/correct file permissions
> ?  checking serialization versions ...
> ?  checking whether package ?clptheory? can be installed (7.1s)
> ?  checking installed package size
> ?  checking package directory ...
> ?  checking for future file timestamps ...
> ?  checking DESCRIPTION meta-information ...
> ?  checking top-level files ...
> ?  checking for left-over files
> ?  checking index information
> ?  checking package subdirectories ...
> ?  checking R files for non-ASCII characters ...
> ?  checking R files for syntax errors ...
> ?  checking whether the package can be loaded (1.8s)
> ?  checking whether the package can be loaded with stated dependencies
> (1.6s)
> ?  checking whether the package can be unloaded cleanly (1.6s)
> ?  checking whether the namespace can be loaded with stated dependencies
> (1.6s)
> ?  checking whether the namespace can be unloaded cleanly (1.8s)
> ?  checking loading without being on the library search path (1.8s)
> ?  checking dependencies in R code (1.7s)
> ?  checking S3 generic/method consistency (2.4s)
> ?  checking replacement functions (1.7s)
> ?  checking foreign function calls (1.7s)
> ?  checking R code for possible problems (9.5s)
> ?  checking Rd files ...
> ?  checking Rd metadata ...
> ?  checking Rd line widths ...
> ?  checking Rd cross-references ...
> ?  checking for missing documentation entries (1.7s)
> ?  checking for code/documentation mismatches (5.1s)
> ?  checking Rd \usage sections (2.5s)
> ?  checking Rd contents ...
> ?  checking for unstated dependencies in examples ...
> ?  checking contents of ?data? directory ...
> ?  checking data for non-ASCII characters (413ms)
> ?  checking LazyData
> ?  checking data for ASCII and uncompressed saves ...
> ?  checking files in ?vignettes? ... SKIPPED
> ?  checking examples (4.9s)
> ?  checking for non-standard things in the check directory
> ?  checking for detritus in the temp directory
> 
> 
> ?? R CMD check results
> ??????????????????????????????????????????????????????????? clptheory
> 0.0.0.9000 ????
> Duration: 55.1s
> 
> 0 errors ? | 0 warnings ? | 0 notes ?
> 
> Below is the output form devtools:check()
> 
>> devtools::check()
> ?? Documenting
> ?????????????????????????????????????????????????????????????????????????????????????????????
> ? Updating clptheory documentation
> ? Loading clptheory
> 
> ?? Building
> ????????????????????????????????????????????????????????????????????????????????????????????????
> Setting env vars:
> ? CFLAGS    : -Wall -pedantic -fdiagnostics-color=always
> ? CXXFLAGS  : -Wall -pedantic -fdiagnostics-color=always
> ? CXX11FLAGS: -Wall -pedantic -fdiagnostics-color=always
> ? CXX14FLAGS: -Wall -pedantic -fdiagnostics-color=always
> ? CXX17FLAGS: -Wall -pedantic -fdiagnostics-color=always
> ? CXX20FLAGS: -Wall -pedantic -fdiagnostics-color=always
> ?? R CMD build
> ?????????????????????????????????????????????????????????????????????????????????????????????
> ?  checking for file ?/home/basu15/MyRProjects/clptheory/DESCRIPTION? ...
> ?  preparing ?clptheory?:
> ?  checking DESCRIPTION meta-information ...
> ?  installing the package to build vignettes
> ?  creating vignettes (9.9s)
> ?  checking for LF line-endings in source and make files and shell scripts
> ?  checking for empty or unneeded directories
> ?  building ?clptheory_0.0.0.9000.tar.gz?
> 
> ?? Checking
> ????????????????????????????????????????????????????????????????????????????????????????????????
> Setting env vars:
> ? _R_CHECK_CRAN_INCOMING_USE_ASPELL_           : TRUE
> ? _R_CHECK_CRAN_INCOMING_REMOTE_               : FALSE
> ? _R_CHECK_CRAN_INCOMING_                      : FALSE
> ? _R_CHECK_FORCE_SUGGESTS_                     : FALSE
> ? _R_CHECK_PACKAGES_USED_IGNORE_UNUSED_IMPORTS_: FALSE
> ? NOT_CRAN                                     : true
> ?? R CMD check
> ?????????????????????????????????????????????????????????????????????????????????????????????
> ?  using log directory ?/tmp/RtmpCSbZbZ/file3f72577bb739/clptheory.Rcheck?
> ?  using R version 4.2.3 (2023-03-15)
> ?  using platform: x86_64-pc-linux-gnu (64-bit)
> ?  using session charset: UTF-8
> ?  using options ?--no-manual --as-cran?
> ?  checking for file ?clptheory/DESCRIPTION?
> ?  this is package ?clptheory? version ?0.0.0.9000?
> ?  package encoding: UTF-8
> ?  checking package namespace information
> ?  checking package dependencies (2.9s)
> ?  checking if this is a source package ...
> ?  checking if there is a namespace
> ?  checking for executable files ...
> ?  checking for hidden files and directories ...
> ?  checking for portable file names
> ?  checking for sufficient/correct file permissions
> ?  checking serialization versions ...
> ?  checking whether package ?clptheory? can be installed (7.6s)
> ?  checking installed package size ...
> ?  checking package directory
> ?  checking for future file timestamps ...
> ?  checking ?build? directory ...
> ?  checking DESCRIPTION meta-information ...
> ?  checking top-level files ...
> ?  checking for left-over files
> ?  checking index information ...
> ?  checking package subdirectories ...
> ?  checking R files for non-ASCII characters ...
> ?  checking R files for syntax errors ...
> ?  checking whether the package can be loaded (2s)
> ?  checking whether the package can be loaded with stated dependencies
> (1.8s)
> ?  checking whether the package can be unloaded cleanly (1.7s)
> ?  checking whether the namespace can be loaded with stated dependencies
> (1.8s)
> ?  checking whether the namespace can be unloaded cleanly (1.8s)
> ?  checking loading without being on the library search path (1.8s)
> ?  checking dependencies in R code (1.7s)
> ?  checking S3 generic/method consistency (2.3s)
> ?  checking replacement functions (1.6s)
> ?  checking foreign function calls (1.7s)
> ?  checking R code for possible problems (10s)
> ?  checking Rd files (367ms)
> ?  checking Rd metadata ...
> ?  checking Rd line widths ...
> ?  checking Rd cross-references ...
> ?  checking for missing documentation entries (2.1s)
> ?  checking for code/documentation mismatches (8.9s)
> ?  checking Rd \usage sections (3.3s)
> ?  checking Rd contents ...
> ?  checking for unstated dependencies in examples ...
> ?  checking contents of ?data? directory (335ms)
> ?  checking data for non-ASCII characters (584ms)
> ?  checking LazyData
> ?  checking data for ASCII and uncompressed saves (535ms)
> ?  checking installed files from ?inst/doc?
> ?  checking files in ?vignettes?
> ?  checking examples (6.9s)
> ?  checking for unstated dependencies in vignettes ...
> ?  checking package vignettes in ?inst/doc?
> E  checking re-building of vignette outputs (594ms)
>     Error(s) in re-building vignettes:
>       ...
>     --- re-building ?lvpp.Rmd? using rmarkdown
>     Quitting from lines 11-15 (lvpp.Rmd)
>     Error: processing vignette 'lvpp.Rmd' failed with diagnostics:
>     The function xfun::isFALSE() will be deprecated in the future. Please
> consider using base::isFALSE(x) or identical(x, FALSE) instead.
>     --- failed re-building ?lvpp.Rmd?
> 
>     SUMMARY: processing the following file failed:
>       ?lvpp.Rmd?
> 
>     Error: Vignette re-building failed.
>     Execution halted
> 
> ?  checking for non-standard things in the check directory
> ?  checking for detritus in the temp directory
> 
>     See
>       ?/tmp/RtmpCSbZbZ/file3f72577bb739/clptheory.Rcheck/00check.log?
>     for details.
> 
> 
> ?? R CMD check results
> ??????????????????????????????????????????????????????????? clptheory
> 0.0.0.9000 ????
> Duration: 1m 6.2s
> 
> ? checking re-building of vignette outputs ... ERROR
>    Error(s) in re-building vignettes:
>      ...
>    --- re-building ?lvpp.Rmd? using rmarkdown
>    Quitting from lines 11-15 (lvpp.Rmd)
>    Error: processing vignette 'lvpp.Rmd' failed with diagnostics:
>    The function xfun::isFALSE() will be deprecated in the future. Please
> consider using base::isFALSE(x) or identical(x, FALSE) instead.
>    --- failed re-building ?lvpp.Rmd?
> 
>    SUMMARY: processing the following file failed:
>      ?lvpp.Rmd?
> 
>    Error: Vignette re-building failed.
>    Execution halted
> 
> 1 error ? | 0 warnings ? | 0 notes ?
> 
> My package is available here: https://github.com/dbasu-umass/clptheory
> 
> Any help will be appreciated. (I found a few pages like this
> <https://github.com/r-lib/devtools/issues/2140> on this problem but the
> issue does not seem to have been resolved).
> 
> Thank you.
> DB
> 
>


From @hot@och|1990 @end|ng |rom gm@||@com  Sun Apr  2 00:42:38 2023
From: @hot@och|1990 @end|ng |rom gm@||@com (Shota Ochi)
Date: Sun, 2 Apr 2023 07:42:38 +0900
Subject: [R-pkg-devel] Vignette rebuilding failed
In-Reply-To: <f40b010f-25bc-a75c-151a-5e71d967cc1c@gmail.com>
References: <CA+Rxh848cSvnnQ50CbiNr+dXagAx069hxPuGvNipHsvBWj2=8Q@mail.gmail.com>
 <f40b010f-25bc-a75c-151a-5e71d967cc1c@gmail.com>
Message-ID: <CANOYX1RYgVM_hBiSZwJS+HXah0FE+5gpzVqszPXJKQgycyGapQ@mail.gmail.com>

>  Error(s) in re-building vignettes:
>    ...
>  --- re-building ?lvpp.Rmd? using rmarkdown
>  Quitting from lines 11-15 (lvpp.Rmd)
>  Error: processing vignette 'lvpp.Rmd' failed with diagnostics:
>  The function xfun::isFALSE() will be deprecated in the future. Please
>consider using base::isFALSE(x) or identical(x, FALSE) instead.
>  --- failed re-building ?lvpp.Rmd?

The error message means a function (knitr::opts_chunk$set) called
xfun::isFALSE() in lines 11-15 (lvpp.Rmd).
However, knitr::opts_chunk$set stopped using xfun::isFALSE().
See the commit shown below.
https://github.com/yihui/knitr/commit/ccb07c4c2266666f7375e5df242103672bd629ac

Updating knitr package should fix the error.

I tested your package on my Ubuntu machine and
got no error even after removing vignettes from .Rbuildignore.
I believe the cause of the error is not your package but your environment.

Best,
Shota Ochi


2023?4?2?(?) 6:44 Duncan Murdoch <murdoch.duncan at gmail.com>:

> The error message seems pretty clear:  "The function xfun::isFALSE()
> will be deprecated in the future. Please consider using base::isFALSE(x)
> or identical(x, FALSE) instead".
>
> So don't use xfun::isFALSE().
>
> Duncan Murdoch
>
>
>
> On 31/03/2023 5:01 p.m., Deepankar Basu wrote:
> > Hello All,
> >
> > I am in the process of developing an R package (
> > https://github.com/dbasu-umass/clptheory) and have encountered problems
> > with the vignette.
> >
> > I had initially been able to build the vignette but *after *I added a new
> > function to my package, I have been  getting the error message that
> > "Vignette rebuilding failed" when I use devtools:check().
> >
> > If I use devtools:check(vignette=FALSE), there are no error messages. I
> can
> > also compile the vignette with knitr.
> >
> > Below is the output from devtools:check(vignette=FALSE)
> >> devtools::check(vignettes = FALSE)
> > ?? Documenting
> >
> ?????????????????????????????????????????????????????????????????????????????????????????????
> > ? Updating clptheory documentation
> > ? Loading clptheory
> >
> > ?? Building
> >
> ????????????????????????????????????????????????????????????????????????????????????????????????
> > Setting env vars:
> > ? CFLAGS    : -Wall -pedantic -fdiagnostics-color=always
> > ? CXXFLAGS  : -Wall -pedantic -fdiagnostics-color=always
> > ? CXX11FLAGS: -Wall -pedantic -fdiagnostics-color=always
> > ? CXX14FLAGS: -Wall -pedantic -fdiagnostics-color=always
> > ? CXX17FLAGS: -Wall -pedantic -fdiagnostics-color=always
> > ? CXX20FLAGS: -Wall -pedantic -fdiagnostics-color=always
> > ?? R CMD build
> >
> ?????????????????????????????????????????????????????????????????????????????????????????????
> > ?  checking for file ?/home/basu15/MyRProjects/clptheory/DESCRIPTION? ...
> > ?  preparing ?clptheory?:
> > ?  checking DESCRIPTION meta-information ...
> > ?  checking for LF line-endings in source and make files and shell
> scripts
> > ?  checking for empty or unneeded directories
> > ?  building ?clptheory_0.0.0.9000.tar.gz?
> >
> > ?? Checking
> >
> ????????????????????????????????????????????????????????????????????????????????????????????????
> > Setting env vars:
> > ? _R_CHECK_CRAN_INCOMING_USE_ASPELL_           : TRUE
> > ? _R_CHECK_CRAN_INCOMING_REMOTE_               : FALSE
> > ? _R_CHECK_CRAN_INCOMING_                      : FALSE
> > ? _R_CHECK_FORCE_SUGGESTS_                     : FALSE
> > ? _R_CHECK_PACKAGES_USED_IGNORE_UNUSED_IMPORTS_: FALSE
> > ? NOT_CRAN                                     : true
> > ?? R CMD check
> >
> ?????????????????????????????????????????????????????????????????????????????????????????????
> > ?  using log directory
> ?/tmp/RtmpCSbZbZ/file3f721a56f9d0/clptheory.Rcheck?
> > ?  using R version 4.2.3 (2023-03-15)
> > ?  using platform: x86_64-pc-linux-gnu (64-bit)
> > ?  using session charset: UTF-8
> > ?  using options ?--no-manual --ignore-vignettes --as-cran?
> > ?  checking for file ?clptheory/DESCRIPTION?
> > ?  this is package ?clptheory? version ?0.0.0.9000?
> > ?  package encoding: UTF-8
> > ?  checking package namespace information
> > ?  checking package dependencies (2.5s)
> > ?  checking if this is a source package ...
> > ?  checking if there is a namespace
> > ?  checking for executable files ...
> > ?  checking for hidden files and directories ...
> > ?  checking for portable file names
> > ?  checking for sufficient/correct file permissions
> > ?  checking serialization versions ...
> > ?  checking whether package ?clptheory? can be installed (7.1s)
> > ?  checking installed package size
> > ?  checking package directory ...
> > ?  checking for future file timestamps ...
> > ?  checking DESCRIPTION meta-information ...
> > ?  checking top-level files ...
> > ?  checking for left-over files
> > ?  checking index information
> > ?  checking package subdirectories ...
> > ?  checking R files for non-ASCII characters ...
> > ?  checking R files for syntax errors ...
> > ?  checking whether the package can be loaded (1.8s)
> > ?  checking whether the package can be loaded with stated dependencies
> > (1.6s)
> > ?  checking whether the package can be unloaded cleanly (1.6s)
> > ?  checking whether the namespace can be loaded with stated dependencies
> > (1.6s)
> > ?  checking whether the namespace can be unloaded cleanly (1.8s)
> > ?  checking loading without being on the library search path (1.8s)
> > ?  checking dependencies in R code (1.7s)
> > ?  checking S3 generic/method consistency (2.4s)
> > ?  checking replacement functions (1.7s)
> > ?  checking foreign function calls (1.7s)
> > ?  checking R code for possible problems (9.5s)
> > ?  checking Rd files ...
> > ?  checking Rd metadata ...
> > ?  checking Rd line widths ...
> > ?  checking Rd cross-references ...
> > ?  checking for missing documentation entries (1.7s)
> > ?  checking for code/documentation mismatches (5.1s)
> > ?  checking Rd \usage sections (2.5s)
> > ?  checking Rd contents ...
> > ?  checking for unstated dependencies in examples ...
> > ?  checking contents of ?data? directory ...
> > ?  checking data for non-ASCII characters (413ms)
> > ?  checking LazyData
> > ?  checking data for ASCII and uncompressed saves ...
> > ?  checking files in ?vignettes? ... SKIPPED
> > ?  checking examples (4.9s)
> > ?  checking for non-standard things in the check directory
> > ?  checking for detritus in the temp directory
> >
> >
> > ?? R CMD check results
> > ??????????????????????????????????????????????????????????? clptheory
> > 0.0.0.9000 ????
> > Duration: 55.1s
> >
> > 0 errors ? | 0 warnings ? | 0 notes ?
> >
> > Below is the output form devtools:check()
> >
> >> devtools::check()
> > ?? Documenting
> >
> ?????????????????????????????????????????????????????????????????????????????????????????????
> > ? Updating clptheory documentation
> > ? Loading clptheory
> >
> > ?? Building
> >
> ????????????????????????????????????????????????????????????????????????????????????????????????
> > Setting env vars:
> > ? CFLAGS    : -Wall -pedantic -fdiagnostics-color=always
> > ? CXXFLAGS  : -Wall -pedantic -fdiagnostics-color=always
> > ? CXX11FLAGS: -Wall -pedantic -fdiagnostics-color=always
> > ? CXX14FLAGS: -Wall -pedantic -fdiagnostics-color=always
> > ? CXX17FLAGS: -Wall -pedantic -fdiagnostics-color=always
> > ? CXX20FLAGS: -Wall -pedantic -fdiagnostics-color=always
> > ?? R CMD build
> >
> ?????????????????????????????????????????????????????????????????????????????????????????????
> > ?  checking for file ?/home/basu15/MyRProjects/clptheory/DESCRIPTION? ...
> > ?  preparing ?clptheory?:
> > ?  checking DESCRIPTION meta-information ...
> > ?  installing the package to build vignettes
> > ?  creating vignettes (9.9s)
> > ?  checking for LF line-endings in source and make files and shell
> scripts
> > ?  checking for empty or unneeded directories
> > ?  building ?clptheory_0.0.0.9000.tar.gz?
> >
> > ?? Checking
> >
> ????????????????????????????????????????????????????????????????????????????????????????????????
> > Setting env vars:
> > ? _R_CHECK_CRAN_INCOMING_USE_ASPELL_           : TRUE
> > ? _R_CHECK_CRAN_INCOMING_REMOTE_               : FALSE
> > ? _R_CHECK_CRAN_INCOMING_                      : FALSE
> > ? _R_CHECK_FORCE_SUGGESTS_                     : FALSE
> > ? _R_CHECK_PACKAGES_USED_IGNORE_UNUSED_IMPORTS_: FALSE
> > ? NOT_CRAN                                     : true
> > ?? R CMD check
> >
> ?????????????????????????????????????????????????????????????????????????????????????????????
> > ?  using log directory
> ?/tmp/RtmpCSbZbZ/file3f72577bb739/clptheory.Rcheck?
> > ?  using R version 4.2.3 (2023-03-15)
> > ?  using platform: x86_64-pc-linux-gnu (64-bit)
> > ?  using session charset: UTF-8
> > ?  using options ?--no-manual --as-cran?
> > ?  checking for file ?clptheory/DESCRIPTION?
> > ?  this is package ?clptheory? version ?0.0.0.9000?
> > ?  package encoding: UTF-8
> > ?  checking package namespace information
> > ?  checking package dependencies (2.9s)
> > ?  checking if this is a source package ...
> > ?  checking if there is a namespace
> > ?  checking for executable files ...
> > ?  checking for hidden files and directories ...
> > ?  checking for portable file names
> > ?  checking for sufficient/correct file permissions
> > ?  checking serialization versions ...
> > ?  checking whether package ?clptheory? can be installed (7.6s)
> > ?  checking installed package size ...
> > ?  checking package directory
> > ?  checking for future file timestamps ...
> > ?  checking ?build? directory ...
> > ?  checking DESCRIPTION meta-information ...
> > ?  checking top-level files ...
> > ?  checking for left-over files
> > ?  checking index information ...
> > ?  checking package subdirectories ...
> > ?  checking R files for non-ASCII characters ...
> > ?  checking R files for syntax errors ...
> > ?  checking whether the package can be loaded (2s)
> > ?  checking whether the package can be loaded with stated dependencies
> > (1.8s)
> > ?  checking whether the package can be unloaded cleanly (1.7s)
> > ?  checking whether the namespace can be loaded with stated dependencies
> > (1.8s)
> > ?  checking whether the namespace can be unloaded cleanly (1.8s)
> > ?  checking loading without being on the library search path (1.8s)
> > ?  checking dependencies in R code (1.7s)
> > ?  checking S3 generic/method consistency (2.3s)
> > ?  checking replacement functions (1.6s)
> > ?  checking foreign function calls (1.7s)
> > ?  checking R code for possible problems (10s)
> > ?  checking Rd files (367ms)
> > ?  checking Rd metadata ...
> > ?  checking Rd line widths ...
> > ?  checking Rd cross-references ...
> > ?  checking for missing documentation entries (2.1s)
> > ?  checking for code/documentation mismatches (8.9s)
> > ?  checking Rd \usage sections (3.3s)
> > ?  checking Rd contents ...
> > ?  checking for unstated dependencies in examples ...
> > ?  checking contents of ?data? directory (335ms)
> > ?  checking data for non-ASCII characters (584ms)
> > ?  checking LazyData
> > ?  checking data for ASCII and uncompressed saves (535ms)
> > ?  checking installed files from ?inst/doc?
> > ?  checking files in ?vignettes?
> > ?  checking examples (6.9s)
> > ?  checking for unstated dependencies in vignettes ...
> > ?  checking package vignettes in ?inst/doc?
> > E  checking re-building of vignette outputs (594ms)
> >     Error(s) in re-building vignettes:
> >       ...
> >     --- re-building ?lvpp.Rmd? using rmarkdown
> >     Quitting from lines 11-15 (lvpp.Rmd)
> >     Error: processing vignette 'lvpp.Rmd' failed with diagnostics:
> >     The function xfun::isFALSE() will be deprecated in the future. Please
> > consider using base::isFALSE(x) or identical(x, FALSE) instead.
> >     --- failed re-building ?lvpp.Rmd?
> >
> >     SUMMARY: processing the following file failed:
> >       ?lvpp.Rmd?
> >
> >     Error: Vignette re-building failed.
> >     Execution halted
> >
> > ?  checking for non-standard things in the check directory
> > ?  checking for detritus in the temp directory
> >
> >     See
> >       ?/tmp/RtmpCSbZbZ/file3f72577bb739/clptheory.Rcheck/00check.log?
> >     for details.
> >
> >
> > ?? R CMD check results
> > ??????????????????????????????????????????????????????????? clptheory
> > 0.0.0.9000 ????
> > Duration: 1m 6.2s
> >
> > ? checking re-building of vignette outputs ... ERROR
> >    Error(s) in re-building vignettes:
> >      ...
> >    --- re-building ?lvpp.Rmd? using rmarkdown
> >    Quitting from lines 11-15 (lvpp.Rmd)
> >    Error: processing vignette 'lvpp.Rmd' failed with diagnostics:
> >    The function xfun::isFALSE() will be deprecated in the future. Please
> > consider using base::isFALSE(x) or identical(x, FALSE) instead.
> >    --- failed re-building ?lvpp.Rmd?
> >
> >    SUMMARY: processing the following file failed:
> >      ?lvpp.Rmd?
> >
> >    Error: Vignette re-building failed.
> >    Execution halted
> >
> > 1 error ? | 0 warnings ? | 0 notes ?
> >
> > My package is available here: https://github.com/dbasu-umass/clptheory
> >
> > Any help will be appreciated. (I found a few pages like this
> > <https://github.com/r-lib/devtools/issues/2140> on this problem but the
> > issue does not seem to have been resolved).
> >
> > Thank you.
> > DB
> >
> >
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Sun Apr  2 07:37:44 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sun, 2 Apr 2023 08:37:44 +0300
Subject: [R-pkg-devel] correcting errors in an existing package
In-Reply-To: <CAJJ-gHw4O47SvoLHCeMxiTAsFWwCpJdxpZhom-4jRW5Onmp0QQ@mail.gmail.com>
References: <CAJJ-gHw4O47SvoLHCeMxiTAsFWwCpJdxpZhom-4jRW5Onmp0QQ@mail.gmail.com>
Message-ID: <20230402083744.2c1abeb7@Tarkus>

On Fri, 31 Mar 2023 16:51:40 -0400
Dennis Boos <boos at ncsu.edu> wrote:

> Also, I keep getting the message in the Rstudio check
> 
> WARNING
>    'qpdf' is needed for checks on size reduction of PDFs
> 
> 
> but I got the latest versions of R and Rstudio and was able to get
> qpdf to install and loaded with library(qpdf), but Rstudio still gives
> that message.

Almost there.

The 'qpdf' package interfaces to the same code that the 'qpdf' command
line tool uses to do its job. R CMD check uses the latter, not the
former. It looks like you're on Windows, so you need to install Rtools
in order to get a compatible version of 'qpdf':
https://cran.r-project.org/bin/windows/Rtools/rtools43/rtools.html

-- 
Best regards,
Ivan


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Sun Apr  2 12:12:39 2023
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Sun, 2 Apr 2023 11:12:39 +0100
Subject: [R-pkg-devel] correcting errors in an existing package
In-Reply-To: <20230402083744.2c1abeb7@Tarkus>
References: <CAJJ-gHw4O47SvoLHCeMxiTAsFWwCpJdxpZhom-4jRW5Onmp0QQ@mail.gmail.com>
 <20230402083744.2c1abeb7@Tarkus>
Message-ID: <a91eb3b8-944b-0023-49bd-4d5bbe11792e@dewey.myzen.co.uk>

Comment in-line

On 02/04/2023 06:37, Ivan Krylov wrote:
> On Fri, 31 Mar 2023 16:51:40 -0400
> Dennis Boos <boos at ncsu.edu> wrote:
> 
>> Also, I keep getting the message in the Rstudio check
>>
>> WARNING
>>     'qpdf' is needed for checks on size reduction of PDFs
>>
>>
>> but I got the latest versions of R and Rstudio and was able to get
>> qpdf to install and loaded with library(qpdf), but Rstudio still gives
>> that message.
> 
> Almost there.
> 
> The 'qpdf' package interfaces to the same code that the 'qpdf' command
> line tool uses to do its job. R CMD check uses the latter, not the
> former. It looks like you're on Windows, so you need to install Rtools
> in order to get a compatible version of 'qpdf':
> https://cran.r-project.org/bin/windows/Rtools/rtools43/rtools.html
> 

I always get the warning about qpdf (on Windows) but it does not seem to 
be a problem on CRAN or winbuilder.

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Sun Apr  2 17:33:49 2023
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Sun, 2 Apr 2023 17:33:49 +0200
Subject: [R-pkg-devel] correcting errors in an existing package
In-Reply-To: <a91eb3b8-944b-0023-49bd-4d5bbe11792e@dewey.myzen.co.uk>
References: <CAJJ-gHw4O47SvoLHCeMxiTAsFWwCpJdxpZhom-4jRW5Onmp0QQ@mail.gmail.com>
 <20230402083744.2c1abeb7@Tarkus>
 <a91eb3b8-944b-0023-49bd-4d5bbe11792e@dewey.myzen.co.uk>
Message-ID: <78f7a5aa-99dc-dd85-c125-eff7068f106c@statistik.tu-dortmund.de>



On 02.04.2023 12:12, Michael Dewey wrote:
> Comment in-line
> 
> On 02/04/2023 06:37, Ivan Krylov wrote:
>> On Fri, 31 Mar 2023 16:51:40 -0400
>> Dennis Boos <boos at ncsu.edu> wrote:
>>
>>> Also, I keep getting the message in the Rstudio check
>>>
>>> WARNING
>>> ??? 'qpdf' is needed for checks on size reduction of PDFs
>>>
>>>
>>> but I got the latest versions of R and Rstudio and was able to get
>>> qpdf to install and loaded with library(qpdf), but Rstudio still gives
>>> that message.
>>
>> Almost there.
>>
>> The 'qpdf' package interfaces to the same code that the 'qpdf' command
>> line tool uses to do its job. R CMD check uses the latter, not the
>> former. It looks like you're on Windows, so you need to install Rtools
>> in order to get a compatible version of 'qpdf':
>> https://cran.r-project.org/bin/windows/Rtools/rtools43/rtools.html
>>
> 
> I always get the warning about qpdf (on Windows) but it does not seem to 
> be a problem on CRAN or winbuilder.
> 

You have to have qpdf installed and on your PATH.

Best,
Uwe Ligges


From rodr|go@tob@rc@rr|zo @end|ng |rom uw@@edu@@u  Tue Apr  4 09:08:52 2023
From: rodr|go@tob@rc@rr|zo @end|ng |rom uw@@edu@@u (Rodrigo Tobar Carrizo)
Date: Tue, 4 Apr 2023 07:08:52 +0000
Subject: [R-pkg-devel] OpenMP and CRAN checks
Message-ID: <SYCPR01MB40477F5D574DBBC27DD0F32BA9939@SYCPR01MB4047.ausprd01.prod.outlook.com>

Hi list,

We are having an issue with submitting a new version of the imager package to CRAN, and would like to understand how we are getting a particular NOTE. The package uses OpenMP for parallelisation of tasks. While we have a routine to set the number of threads that OpenMP should use (it internally issues a `omp_set_num_threads(threads)` call), we don't invoke it ourselves -- we let the users do it. None of our OpenMP pragmas set an explicit number of threads either. In other words, by default we use the system as-is.

In my environment (8 cores, 2 threads per core) I can see this working as expected. If I set the OMP_NUM_THREADS or OMP_THREAD_LIMIT environment variables to a given number before starting R, I can see that parallelisation stays within the given boundary. For example:

=================== examples============================
# No explicit limit, usually means "use all available cores"
$> Rscript -e 'library(foreach); library(imager); temp = foreach(1:100)%do%{as.cimg(matrix(rnorm(400^2),400,400))}; times = system.time(foreach(1:10)%do%{parmed(temp)}); print(times["user.self"]/times["elapsed"])' |& tail -n 1
15.75708

# 1 thread via OMP_THREAD_LIMIT
$> OMP_THREAD_LIMIT=1 Rscript -e 'library(foreach); library(imager); temp = foreach(1:100)%do%{as.cimg(matrix(rnorm(400^2),400,400))}; times = system.time(foreach(1:10)%do%{parmed(temp)}); print(times["user.self"]/times["elapsed"])' |& tail -n 1
0.994263

# 2 threads via OMP_NUM_THREADS
$> OMP_NUM_THREADS=2 Rscript -e 'library(foreach); library(imager); temp = foreach(1:100)%do%{as.cimg(matrix(rnorm(400^2),400,400))}; times = system.time(foreach(1:10)%do%{parmed(temp)}); print(times["user.self"]/times["elapsed"])' |& tail -n 1
1.994128
=================== examples============================

It is also our understanding (from [1], and more detailed in [2]) that the CRAN machines set OMP_THREAD_LIMIT=2 when running package checks to avoid package examples and vignettes from using more than 2 threads each, and thus be able to share the infrastructure as expected.

However, upon submission we received the following NOTE:

* checking examples ... [24s/21s] NOTE
Examples with CPU time > 2.5 times elapsed time
             user system elapsed ratio
cannyEdges 1.095  0.052   0.385 2.979

What I cannot explain is how, if OMP_THREAD_LIMIT is set, the example runs using more than 2 threads, therefor triggering such a NOTE. Isn't the OpenMP runtime supposed to limit the number of threads if this limit is set, hence limiting our parallelisation? I wouldn't single out this particular example: since OpenMP is used across the codebase it might be a question of good/bad luck which example triggers the warning. The code also doesn't spawn any child processes, all CPU utilisation stems from the main R process.

I do appreciate that we might have a future, different problem, where OMP_THREAD_LIMIT is specified but the code could still *try* to use more threads than the given limit (hence triggering a warning in some OpenMP platforms). That's the issue presented in [2], which they went and fixed -- but the limit should be obeyed by the OpenMP runtime in the first place, which is what puzzles me.

Any hints/help/guidance would be appreciated.

Regards,

Rodrigo

[1] https://rdrr.io/cran/data.table/man/openmp-utils.html
[2] https://github.com/Rdatatable/data.table/issues/3300

From boo@ @end|ng |rom nc@u@edu  Tue Apr  4 15:41:41 2023
From: boo@ @end|ng |rom nc@u@edu (Dennis Boos)
Date: Tue, 4 Apr 2023 09:41:41 -0400
Subject: [R-pkg-devel] correcting errors in an existing package
In-Reply-To: <c6b52458-35c0-8ef4-93aa-d37c50769460@gmail.com>
References: <CAJJ-gHw4O47SvoLHCeMxiTAsFWwCpJdxpZhom-4jRW5Onmp0QQ@mail.gmail.com>
 <c6b52458-35c0-8ef4-93aa-d37c50769460@gmail.com>
Message-ID: <CAJJ-gHznV18NyPtuweYaGFdxisLTc+j26eN_uR2WVYzxttSG0Q@mail.gmail.com>

Thanks so much to all of you.  If you have time, I'm getting really
contradictory results.

1. It first seemed to have passed the check in Rstudio (I used
device::build() in the R window and then clicked on check in the drop down
menu under build).

==> devtools::check(document = FALSE, args = c('--as-cran'))
?? R CMD check results  Monte.Carlo.se 0.1.1 ????
Duration: 56.6s
0 errors ? | 0 warnings ? | 0 notes ?

R CMD check succeeded

However, I then couldn't find the tar.gz where it was supposed to be. It
was just gone.


Here is my namespace.  It says not to edit, but I had been told to add
the importFrom. So I didn't use
devtools::document() for fear roxygen2 would get rid of it.

# Generated by roxygen2: do not edit by hand
importFrom("stats", "cor", "sd", "var")
export(boot.se)
export(jack.se)
export(mc.se.matrix)
export(mc.se.vector)
export(pairwise.se)
export(sim.samp)

4. Here is my DESCRIPTION file

Package: Monte.Carlo.se
Type: Package
Title: Monte Carlo Standard Errors
Version: 0.1.1
Author: Dennis Boos, Kevin Matthew, Jason Osborne
Maintainer: Dennis Boos <boos at ncsu.edu>
Description: Computes Monte Carlo standard errors for summaries of
Monte Carlo output. Summaries and their standard errors are based on
columns of Monte Carlo simulation output. Dennis D. Boos and Jason A.
Osborne (2015) <doi:10.1111/insr.12087>.
License: GPL-3
Encoding: UTF-8
RoxygenNote: 7.2.3
Suggests: knitr, rmarkdown
Imports: stats
VignetteBuilder: knitr

5. And because of your advice: " It sounds as though you're using
Roxygen2 to generate your NAMESPACE file.
ff so, you need @imports directives in the comments
(conventionally before the function that uses the import, but I think it
doesn't really matter where)."

So I put "@imports" in the function that had trouble

#' @examples
#' \donttest{
#' # Using the output data matrix hold generated in vignette Example3,
#' # calculate jackknife and bootstrap standard errors
#' # for the differences and ratios of the CV estimates.
#' # First get the components of hold needed.
#'
#' @imports
#'
#' trim20 <- function(x){mean(x,.2)} # 20% trimmed mean function

Was that the correct thing to do?

6. And here are the failed check results. I'm clueless at this point.

==> devtools::check(document = FALSE, args = c('--as-cran'))
?? Building ????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????Setting
env vars:
? CFLAGS    : -Wall -pedantic -fdiagnostics-color=always
? CXXFLAGS  : -Wall -pedantic -fdiagnostics-color=always
? CXX11FLAGS: -Wall -pedantic -fdiagnostics-color=always
? CXX14FLAGS: -Wall -pedantic -fdiagnostics-color=always
? CXX17FLAGS: -Wall -pedantic -fdiagnostics-color=always
? CXX20FLAGS: -Wall -pedantic -fdiagnostics-color=always?? R CMD build
??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
 checking for file 'C:\Users\boos\Dropbox\My PC
(boos-home)\Desktop\dennis\R.packages\Monte.Carlo.se.March.2023/DESCRIPTION'
...?  preparing 'Monte.Carlo.se':?  checking DESCRIPTION
meta-information ...?  installing the package to build vignettes?
creating vignettes (3.6s)?  checking for LF line-endings in source and
make files and shell scripts?  checking for empty or unneeded
directories?  building 'Monte.Carlo.se_0.1.1.tar.gz'
   ?? Checking ????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????Setting
env vars:
? _R_CHECK_CRAN_INCOMING_REMOTE_               : FALSE
? _R_CHECK_CRAN_INCOMING_                      : FALSE
? _R_CHECK_FORCE_SUGGESTS_                     : FALSE
? _R_CHECK_PACKAGES_USED_IGNORE_UNUSED_IMPORTS_: FALSE
? NOT_CRAN                                     : true?? R CMD check
??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
 using log directory 'C:/Users/boos/Dropbox/My PC
(boos-home)/Desktop/dennis/R.packages/Monte.Carlo.se.Rcheck' (793ms)?
using R version 4.2.3 (2023-03-15 ucrt)?  using platform:
x86_64-w64-mingw32 (64-bit)?  using session charset: UTF-8?  using
options '--no-manual --as-cran' (653ms)?  checking for file
'Monte.Carlo.se/DESCRIPTION'?  checking extension type ... Package?
this is package 'Monte.Carlo.se' version '0.1.1'?  package encoding:
UTF-8?  checking package namespace information?  checking package
dependencies (3.2s)?  checking if this is a source package?  checking
if there is a namespace?  checking for executable files (491ms)?
checking for hidden files and directories ...?  checking for portable
file names?  checking serialization versions?  checking whether
package 'Monte.Carlo.se' can be installed (2.9s)?  checking installed
package size ... ?  checking package directory ...?  checking for
future file timestamps ... ?  checking 'build' directory?  checking
DESCRIPTION meta-information ... ?  checking top-level files ...?
checking for left-over files?  checking index information ... ?
checking package subdirectories ... ?  checking R files for non-ASCII
characters ... ?  checking R files for syntax errors ... ?  checking
whether the package can be loaded ... ?  checking whether the package
can be loaded with stated dependencies ... ?  checking whether the
package can be unloaded cleanly ... ?  checking whether the namespace
can be loaded with stated dependencies ... ?  checking whether the
namespace can be unloaded cleanly ... ?  checking loading without
being on the library search path ... N  checking dependencies in R
code ...
   Namespace in Imports field not imported from: 'stats'
     All declared Imports should be used.?  checking S3 generic/method
consistency (422ms)?  checking replacement functions ... ?  checking
foreign function calls ... N  checking R code for possible problems
(3s)
   boot.se: no visible global function definition for 'sd'
   boot.var: no visible global function definition for 'var'
   corr: no visible global function definition for 'cor'
   cv: no visible global function definition for 'sd'
   ratio.mean.sdhat.sd: no visible global function definition for 'sd'
   ratio.mean.vhat.var: no visible global function definition for 'var'
   ratio.sd: no visible global function definition for 'sd'
   ratio.var: no visible global function definition for 'var'
   varn: no visible global function definition for 'var'
   Undefined global functions or variables:
     cor sd var
   Consider adding
     importFrom("stats", "cor", "sd", "var")
   to your NAMESPACE file.?  checking Rd files ... ?  checking Rd
metadata ... ?  checking Rd line widths ... ?  checking Rd
cross-references ... ?  checking for missing documentation entries ...
?  checking for code/documentation mismatches (562ms)?  checking Rd
\usage sections (661ms)?  checking Rd contents ... ?  checking for
unstated dependencies in examples ... ?  checking installed files from
'inst/doc'W  checking files in 'vignettes' ...
   Files in the 'vignettes' directory newer than same file in 'inst/doc':
     'Brief-Overview.Rmd'?  checking examples (573ms)?  checking
examples with --run-donttest ... [24s] OK (24.7s)?  checking for
unstated dependencies in vignettes ... ?  checking package vignettes
in 'inst/doc' ...?  checking re-building of vignette outputs (6.8s)?
checking for non-standard things in the check directory ...?  checking
for detritus in the temp directory

   See
     'C:/Users/boos/Dropbox/My PC
(boos-home)/Desktop/dennis/R.packages/Monte.Carlo.se.Rcheck/00check.log'
   for details.

   ?? R CMD check results
???????????????????????????????????????????????????????????????????????????????????
Monte.Carlo.se 0.1.1 ????
Duration: 51.5s
? checking files in 'vignettes' ... WARNING
  Files in the 'vignettes' directory newer than same file in 'inst/doc':
    'Brief-Overview.Rmd'
? checking dependencies in R code ... NOTE
  Namespace in Imports field not imported from: 'stats'
    All declared Imports should be used.
? checking R code for possible problems ... NOTE
  boot.se: no visible global function definition for 'sd'
  boot.var: no visible global function definition for 'var'
  corr: no visible global function definition for 'cor'
  cv: no visible global function definition for 'sd'
  ratio.mean.sdhat.sd: no visible global function definition for 'sd'
  ratio.mean.vhat.var: no visible global function definition for 'var'
  ratio.sd: no visible global function definition for 'sd'
  ratio.var: no visible global function definition for 'var'
  varn: no visible global function definition for 'var'
  Undefined global functions or variables:
    cor sd var
  Consider adding
    importFrom("stats", "cor", "sd", "var")
  to your NAMESPACE file.
0 errors ? | 1 warning ? | 2 notes ?
Error: R CMD check found WARNINGs
Execution halted

Exited with status 1.





On Sat, Apr 1, 2023 at 5:34?PM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> On 31/03/2023 4:51 p.m., Dennis Boos wrote:
> > Recently I got a message from CRAN that my package Monte.Carlo.se (on
> CRAN
> > for the last few years) does not pass current testing.  There seemed to
> be
> > 2 problems:
> >
> >
> ***************************************************************************************************************
> >
> > 1. * checking LazyData ... NOTE
> >    'LazyData' is specified without a 'data' directory
> >
> > I have this line in my DESCRIPTION file:
> >
> > LazyData: true
> >
> > Should I remove that?
> >
> >
> *****************************************************************************************************************
> >
> > 2. * checking examples with --run-donttest ... [42s/42s] ERROR
> > Running examples in ?Monte.Carlo.se-Ex.R? failed
> > The error most likely occurred in:
> >
> >> pairwise.se(hold,xcol=10:12,summary.f=cv)
> > Error: object 'hold' not found
> > Execution halted
> >
> >
> ***************************************************************************************
> >
> > So, I put in the R code to generate the data matrix *hold.  *But that
> > brought a host of other errors when checking in Rstudio with
> >
> >>
> devtools::check("S:/Documents/srcis/a.projects/Monte.Carlo.isr.and.package/Monte.Carlo.se.March.2023")
> >
> > I started seeing the following list about standard functions like sd.
> >
> > N  checking R code for possible problems (3.4s)
> >     boot.se: no visible global function definition for 'sd'
> >     boot.var: no visible global function definition for 'var'
> >     corr: no visible global function definition for 'cor'
> >     cv: no visible global function definition for 'sd'
> >     ratio.mean.sdhat.sd: no visible global function definition for 'sd'
> >     ratio.mean.vhat.var: no visible global function definition for 'var'
> >     ratio.sd: no visible global function definition for 'sd'
> >     ratio.var: no visible global function definition for 'var'
> >     varn: no visible global function definition for 'var'
> >     Undefined global functions or variables:
> >       cor sd var
> >     Consider adding
> >       importFrom("stats", "cor", "sd", "var")
> >     to your NAMESPACE file.
> >
> > But you can't add those functions to NAMESPACE. Well I did but
> >
> > devtools::build()
> >
> >
> > gets rid of it. Also, I keep getting the message in the Rstudio check
> >
> > WARNING
> >     'qpdf' is needed for checks on size reduction of PDFs
> >
> >
> > but I got the latest versions of R and Rstudio and was able to get
> > qpdf to install and loaded with library(qpdf), but Rstudio still gives
> > that message.
> >
>
> It sounds as though you're using Roxygen2 to generate your NAMESPACE
> file.  If so, you need @imports directives in the comments
> (conventionally before the function that uses the import, but I think it
> doesn't really matter where).
>
> Duncan Murdoch
>
>

-- 
Dennis Boos                      email: dennis_boos at ncsu.edu
Department of Statistics    Phone: 919-515-1918
NC State University           Fax: 919-515-1169
Raleigh, NC 27695-8203   http://www4.stat.ncsu.edu/~boos

Aim for kindness, tolerance, and humility.

	[[alternative HTML version deleted]]


From edd @end|ng |rom deb|@n@org  Tue Apr  4 16:00:00 2023
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 4 Apr 2023 09:00:00 -0500
Subject: [R-pkg-devel] OpenMP and CRAN checks
In-Reply-To: <SYCPR01MB40477F5D574DBBC27DD0F32BA9939@SYCPR01MB4047.ausprd01.prod.outlook.com>
References: <SYCPR01MB40477F5D574DBBC27DD0F32BA9939@SYCPR01MB4047.ausprd01.prod.outlook.com>
Message-ID: <25644.11616.284536.185116@rob.eddelbuettel.com>


Hi Rodrigo,

This came up recently again on social media where I illustrated how the
tiledb package deals with it. So a quick recap:

First off, let's make the goals clear.

We want to _simultaneously_
 - abide by CRAN Policy rules and cap ourselves to two cores there
 - do not impose any limits on our users: ALL cores ALL the time

The solution we implemented a while is to use a function _that is an opt-in_
which looks at the standard OpenMP variable as well as at R's own Ncpus:

    limitTileDBCores <- function(ncores, verbose=FALSE) {
      if (missing(ncores)) {
        ## start with a simple fallback: 'Ncpus' (if set) or else 2
        ncores <- getOption("Ncpus", 2L)
        ## also consider OMP_THREAD_LIMIT (cf Writing R Extensions), gets NA if envvar unset
        ompcores <- as.integer(Sys.getenv("OMP_THREAD_LIMIT"))
        ## and then keep the smaller
        ncores <- min(na.omit(c(ncores, ompcores)))
      }
      stopifnot(`The 'ncores' argument must be numeric or character` = is.numeric(ncores) || is.character(ncores))
      ## for brevity omitted here how ncores propagates to TileDB library -- creates `cfg`
      if (verbose) message("Limiting TileDB to ",ncores," cores. See ?limitTileDBCores.")
      invisible(cfg)
    }

The key is that we reflect the smaller of Ncpus and OMP_THREAD_LIMIT along
with a fall-back of two in case nothing is set.

That function is then called (and feeds into the library config) at the
beginning of each
 - help file example
 - unit test file
 - vignette

As example (from a help file) is

    \dontshow{ctx <- tiledb_ctx(limitTileDBCores())}

(where ctx a context object controlling, inter alia, the thread pool).

By throttling it anywhere CRAN executes code, and using the prescribed
maximum of two core, we satisfy goal one of not getting thrown off CRAN. By
making it an _explicit_ opt-in we satisfy our goal of never slowing down our
users who (presumably) do not opt in. And those who have, say, Ncpus set (as
I do to spread R's own package installations over all my cores) get the
maximum performance for examples, tests, and vignettes too as they opted in.

"Works for us" as they say.

Hope this helps,  Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Apr  4 16:04:05 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 4 Apr 2023 10:04:05 -0400
Subject: [R-pkg-devel] correcting errors in an existing package
In-Reply-To: <CAJJ-gHznV18NyPtuweYaGFdxisLTc+j26eN_uR2WVYzxttSG0Q@mail.gmail.com>
References: <CAJJ-gHw4O47SvoLHCeMxiTAsFWwCpJdxpZhom-4jRW5Onmp0QQ@mail.gmail.com>
 <c6b52458-35c0-8ef4-93aa-d37c50769460@gmail.com>
 <CAJJ-gHznV18NyPtuweYaGFdxisLTc+j26eN_uR2WVYzxttSG0Q@mail.gmail.com>
Message-ID: <443004df-44a8-21b2-55f9-df852e9ac872@gmail.com>

Your message is posted using HTML, which mangles a lot of it.  For 
example, the NAMESPACE file you posted has URLs mixed in with the text.

But if I can guess correctly what was in those files, it looks as though 
the package being checked doesn't have those files in it.  I don't know 
exactly what devtools::check does, but it's probably your problem.

I'd suggest this:  build the tarball, and check the tarball.

Duncan Murdoch

On 04/04/2023 9:41 a.m., Dennis Boos wrote:
> Thanks so much to all of you.? If you have time, I'm getting really 
> contradictory results.
> 
> 1. It first seemed to have passed the check in Rstudio (I used 
> device::build() in the R window and then clicked on check in the drop 
> down menu under build).
> 
> ==> devtools::check(document = FALSE, args = c('--as-cran'))
> 
> ?? R CMD check results Monte.Carlo.se <http://Monte.Carlo.se> 0.1.1 
> ????Duration: 56.6s 0 errors ?| 0 warnings ?| 0 notes ?R CMD check succeeded
> 
> However, I then couldn't find the tar.gz where it was supposed to be. It 
> was just gone.
> 
> 
> Here is my namespace. It says not to edit, but I had been told to add 
> the importFrom. So I didn't use
> devtools::document() for fear roxygen2 would get rid of it.
> 
> # Generated by roxygen2: do not edit by hand
> importFrom("stats", "cor", "sd", "var")
> export(boot.se  <http://boot.se>)
> export(jack.se  <http://jack.se>)
> export(mc.se.matrix)
> export(mc.se.vector)
> export(pairwise.se  <http://pairwise.se>)
> export(sim.samp)
> 
> 4.Here is my DESCRIPTION file
> 
> Package:Monte.Carlo.se  <http://Monte.Carlo.se>
> Type: Package
> Title: Monte Carlo Standard Errors
> Version: 0.1.1
> Author: Dennis Boos, Kevin Matthew, Jason Osborne
> Maintainer: Dennis Boos <boos at ncsu.edu  <mailto:boos at ncsu.edu>>
> Description: Computes Monte Carlo standard errors for summaries of Monte Carlo output. Summaries and their standard errors are based on columns of Monte Carlo simulation output. Dennis D. Boos and Jason A. Osborne (2015) <doi:10.1111/insr.12087>.
> License: GPL-3
> Encoding: UTF-8
> RoxygenNote: 7.2.3
> Suggests: knitr, rmarkdown
> Imports: stats
> VignetteBuilder: knitr
> 
> 5.And because of your advice:  " It sounds as though you're using Roxygen2 to generate your NAMESPACE file.
> ff so, you need @imports directives in the comments
> (conventionally before the function that uses the import, but I think it
> doesn't really matter where)."
> 
> So I put "@imports" in the function that had trouble
> 
> #' @examples
> #' \donttest{
> #' # Using the output data matrix hold generated in vignette Example3,
> #' # calculate jackknife and bootstrap standard errors
> #' # for the differences and ratios of the CV estimates.
> #' # First get the components of hold needed.
> #'
> #' @imports
> #'
> #' trim20 <- function(x){mean(x,.2)} # 20% trimmed mean function
> 
> Was that the correct thing to do?
> 
> 6.And here are the failed check results. I'm clueless at this point.
> 
> 
> ==> devtools::check(document = FALSE, args = c('--as-cran')) 
> ??Building????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????Setting env vars:? CFLAGS : -Wall -pedantic -fdiagnostics-color=always? CXXFLAGS : -Wall -pedantic -fdiagnostics-color=always? CXX11FLAGS: -Wall -pedantic -fdiagnostics-color=always? CXX14FLAGS: -Wall -pedantic -fdiagnostics-color=always? CXX17FLAGS: -Wall -pedantic -fdiagnostics-color=always? CXX20FLAGS: -Wall -pedantic -fdiagnostics-color=always??R CMD build??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????checking for file 'C:\Users\boos\Dropbox\My PC (boos-home)\Desktop\dennis\R.packages\Monte.Carlo.se.March.2023/DESCRIPTION'... ?preparing 'Monte.Carlo.se <http://Monte.Carlo.se>':?checking DESCRIPTION meta-information... ?installing the package to build vignettes?creating vignettes(3.6s)?checking for LF line-endings in source and make files and shell scripts?checking for empty or unneeded directories?building 'Monte.Carlo.se_0.1.1.tar.gz'??Checking????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????Setting env vars:? _R_CHECK_CRAN_INCOMING_REMOTE_ : FALSE? _R_CHECK_CRAN_INCOMING_ : FALSE? _R_CHECK_FORCE_SUGGESTS_ : FALSE? _R_CHECK_PACKAGES_USED_IGNORE_UNUSED_IMPORTS_: FALSE? NOT_CRAN : true?? R CMD check ??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????using log directory 'C:/Users/boos/Dropbox/My PC (boos-home)/Desktop/dennis/R.packages/Monte.Carlo.se.Rcheck'(793ms)?using R version 4.2.3 (2023-03-15 ucrt)? using platform: x86_64-w64-mingw32 (64-bit)? using session charset: UTF-8?using options '--no-manual --as-cran'(653ms)?checking for file 'Monte.Carlo.se/DESCRIPTION <http://Monte.Carlo.se/DESCRIPTION>'? checking extension type ... Package? this is package 'Monte.Carlo.se <http://Monte.Carlo.se>' version '0.1.1'? package encoding: UTF-8?checking package namespace information?checking package dependencies(3.2s)?checking if this is a source package?checking if there is a namespace?checking for executable files(491ms)?checking for hidden files and directories... ?checking for portable file names?checking serialization versions?checking whether package 'Monte.Carlo.se <http://Monte.Carlo.se>' can be installed(2.9s)?checking installed package size... ?checking package directory... ?checking for future file timestamps... ?checking 'build' directory?checking DESCRIPTION meta-information... ?checking top-level files... ?checking for left-over files?checking index information... ?checking package subdirectories... ?checking R files for non-ASCII characters... ?checking R files for syntax errors... ?checking whether the package can be loaded... ?checking whether the package can be loaded with stated dependencies... ?checking whether the package can be unloaded cleanly... ?checking whether the namespace can be loaded with stated dependencies... ?checking whether the namespace can be unloaded cleanly... ?checking loading without being on the library search path... N checking dependencies in R code... Namespace in Imports field not imported from: 'stats' All declared Imports should be used. ?checking S3 generic/method consistency(422ms)?checking replacement functions... ?checking foreign function calls... N checking R code for possible problems(3s)boot.se <http://boot.se>: no visible global function definition for 'sd' boot.var: no visible global function definition for 'var' corr: no visible global function definition for 'cor' cv: no visible global function definition for 'sd' ratio.mean.sdhat.sd <http://ratio.mean.sdhat.sd>: no visible global function definition for 'sd' ratio.mean.vhat.var: no visible global function definition for 'var' ratio.sd <http://ratio.sd>: no visible global function definition for 'sd' ratio.var: no visible global function definition for 'var' varn: no visible global function definition for 'var' Undefined global functions or variables: cor sd var Consider adding importFrom("stats", "cor", "sd", "var") to your NAMESPACE file. ?checking Rd files... ?checking Rd metadata... ?checking Rd line widths... ?checking Rd cross-references... ?checking for missing documentation entries... ?checking for code/documentation mismatches(562ms)?checking Rd \usage sections(661ms)?checking Rd contents... ?checking for unstated dependencies in examples... ?checking installed files from 'inst/doc'W checking files in 'vignettes'... Files in the 'vignettes' directory newer than same file in 'inst/doc': 'Brief-Overview.Rmd' ?checking examples(573ms)?checking examples with --run-donttest ... [24s] OK(24.7s)?checking for unstated dependencies in vignettes... ?checking package vignettes in 'inst/doc'... ?checking re-building of vignette outputs(6.8s)?checking for non-standard things in the check directory... ?checking for detritus in the temp directorySee 'C:/Users/boos/Dropbox/My PC (boos-home)/Desktop/dennis/R.packages/Monte.Carlo.se.Rcheck/00check.log' for details. ?? R CMD check results ??????????????????????????????????????????????????????????????????????????????????? Monte.Carlo.se <http://Monte.Carlo.se> 0.1.1 ????Duration: 51.5s ? checking files in 'vignettes' ... WARNINGFiles in the 'vignettes' directory newer than same file in 'inst/doc': 'Brief-Overview.Rmd' ? checking dependencies in R code ... NOTENamespace in Imports field not imported from: 'stats' All declared Imports should be used. ? checking R code for possible problems ... NOTEboot.se <http://boot.se>: no visible global function definition for 'sd' boot.var: no visible global function definition for 'var' corr: no visible global function definition for 'cor' cv: no visible global function definition for 'sd' ratio.mean.sdhat.sd <http://ratio.mean.sdhat.sd>: no visible global function definition for 'sd' ratio.mean.vhat.var: no visible global function definition for 'var' ratio.sd <http://ratio.sd>: no visible global function definition for 'sd' ratio.var: no visible global function definition for 'var' varn: no visible global function definition for 'var' Undefined global functions or variables: cor sd var Consider adding importFrom("stats", "cor", "sd", "var") to your NAMESPACE file. 0 errors ?| 1 warning ?| 2 notes ?Error: R CMD check found WARNINGs Execution halted Exited with status 1.
> 
> 
> 
> 
> 
> 
> 
> On Sat, Apr 1, 2023 at 5:34?PM Duncan Murdoch <murdoch.duncan at gmail.com 
> <mailto:murdoch.duncan at gmail.com>> wrote:
> 
>     On 31/03/2023 4:51 p.m., Dennis Boos wrote:
>      > Recently I got a message from CRAN that my package Monte.Carlo.se
>     <http://Monte.Carlo.se> (on CRAN
>      > for the last few years) does not pass current testing.? There
>     seemed to be
>      > 2 problems:
>      >
>      >
>     ***************************************************************************************************************
>      >
>      > 1. * checking LazyData ... NOTE
>      >? ? 'LazyData' is specified without a 'data' directory
>      >
>      > I have this line in my DESCRIPTION file:
>      >
>      > LazyData: true
>      >
>      > Should I remove that?
>      >
>      >
>     *****************************************************************************************************************
>      >
>      > 2. * checking examples with --run-donttest ... [42s/42s] ERROR
>      > Running examples in ?Monte.Carlo.se-Ex.R? failed
>      > The error most likely occurred in:
>      >
>      >> pairwise.se <http://pairwise.se>(hold,xcol=10:12,summary.f=cv)
>      > Error: object 'hold' not found
>      > Execution halted
>      >
>      >
>     ***************************************************************************************
>      >
>      > So, I put in the R code to generate the data matrix *hold.? *But that
>      > brought a host of other errors when checking in Rstudio with
>      >
>      >>
>     devtools::check("S:/Documents/srcis/a.projects/Monte.Carlo.isr.and.package/Monte.Carlo.se.March.2023")
>      >
>      > I started seeing the following list about standard functions like sd.
>      >
>      > N? checking R code for possible problems (3.4s)
>      > boot.se <http://boot.se>: no visible global function definition
>     for 'sd'
>      >? ? ?boot.var: no visible global function definition for 'var'
>      >? ? ?corr: no visible global function definition for 'cor'
>      >? ? ?cv: no visible global function definition for 'sd'
>      > ratio.mean.sdhat.sd <http://ratio.mean.sdhat.sd>: no visible
>     global function definition for 'sd'
>      >? ? ?ratio.mean.vhat.var: no visible global function definition
>     for 'var'
>      > ratio.sd <http://ratio.sd>: no visible global function definition
>     for 'sd'
>      >? ? ?ratio.var: no visible global function definition for 'var'
>      >? ? ?varn: no visible global function definition for 'var'
>      >? ? ?Undefined global functions or variables:
>      >? ? ? ?cor sd var
>      >? ? ?Consider adding
>      >? ? ? ?importFrom("stats", "cor", "sd", "var")
>      >? ? ?to your NAMESPACE file.
>      >
>      > But you can't add those functions to NAMESPACE. Well I did but
>      >
>      > devtools::build()
>      >
>      >
>      > gets rid of it. Also, I keep getting the message in the Rstudio check
>      >
>      > WARNING
>      >? ? ?'qpdf' is needed for checks on size reduction of PDFs
>      >
>      >
>      > but I got the latest versions of R and Rstudio and was able to get
>      > qpdf to install and loaded with library(qpdf), but Rstudio still
>     gives
>      > that message.
>      >
> 
>     It sounds as though you're using Roxygen2 to generate your NAMESPACE
>     file.? If so, you need @imports directives in the comments
>     (conventionally before the function that uses the import, but I
>     think it
>     doesn't really matter where).
> 
>     Duncan Murdoch
> 
> 
> 
> -- 
> Dennis Boos? ? ? ? ? ? ? ? ? ? ? email: dennis_boos at ncsu.edu 
> <mailto:dennis_boos at ncsu.edu>
> Department of Statistics? ? Phone: 919-515-1918
> NC State University? ? ? ? ? ?Fax: 919-515-1169
> Raleigh, NC 27695-8203 http://www4.stat.ncsu.edu/~boos 
> <http://www4.stat.ncsu.edu/~boos>
> 
> Aim for kindness, tolerance, and humility.


From edd @end|ng |rom deb|@n@org  Tue Apr  4 16:23:41 2023
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Tue, 4 Apr 2023 09:23:41 -0500
Subject: [R-pkg-devel] correcting errors in an existing package
In-Reply-To: <443004df-44a8-21b2-55f9-df852e9ac872@gmail.com>
References: <CAJJ-gHw4O47SvoLHCeMxiTAsFWwCpJdxpZhom-4jRW5Onmp0QQ@mail.gmail.com>
 <c6b52458-35c0-8ef4-93aa-d37c50769460@gmail.com>
 <CAJJ-gHznV18NyPtuweYaGFdxisLTc+j26eN_uR2WVYzxttSG0Q@mail.gmail.com>
 <443004df-44a8-21b2-55f9-df852e9ac872@gmail.com>
Message-ID: <25644.13037.198070.776153@rob.eddelbuettel.com>


On 4 April 2023 at 10:04, Duncan Murdoch wrote:
| I'd suggest this:  build the tarball, and check the tarball.

Strong second. The _Writing R Extensions_ manual does not mention devtools.
As Uwe often reminds everybody here the package is not used by CRAN either.

This may sound harsh but one of the key approaches to debugging often is to
strip away the layers to identify more atomic and minimal operations.  (And
RStudio can build the tarball for you too, see Build -> More -> Build Source
Package. Similarly you can ask it to not check the package using devtools.
You can always flip the switch back. Convenient helpers are useful, but at
times it is advisable to turn them off.)

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From ||one| @end|ng |rom po@|t@co  Tue Apr  4 16:46:46 2023
From: ||one| @end|ng |rom po@|t@co (Lionel Henry)
Date: Tue, 4 Apr 2023 16:46:46 +0200
Subject: [R-pkg-devel] correcting errors in an existing package
In-Reply-To: <CAJf4E3ptG7j1M5MVUUvhx=S6DTzhiL0ksrD=X1uaVyAEw1+HjQ@mail.gmail.com>
References: <CAJJ-gHw4O47SvoLHCeMxiTAsFWwCpJdxpZhom-4jRW5Onmp0QQ@mail.gmail.com>
 <c6b52458-35c0-8ef4-93aa-d37c50769460@gmail.com>
 <CAJJ-gHznV18NyPtuweYaGFdxisLTc+j26eN_uR2WVYzxttSG0Q@mail.gmail.com>
 <CAJf4E3ptG7j1M5MVUUvhx=S6DTzhiL0ksrD=X1uaVyAEw1+HjQ@mail.gmail.com>
Message-ID: <CAJf4E3qDNekz5BRLS0Wt8E=698T4e-QFVHhKTTfrvZHEB-U6og@mail.gmail.com>

> Here is my namespace.  It says not to edit, but I had been told to add
> the importFrom. So I didn't use
> devtools::document() for fear roxygen2 would get rid of it.

`devtools::check()` calls `document()` automatically so your changes to
the NAMESPACE file get overwritten. You can see this in the output.

To solve this, add the appropriate roxygen2 tag somewhere in your package e.g.

```
#' @importFrom stats var sd etc
NULL
```

Best,
Lionel

On 4/4/23, Lionel Henry <lionel at posit.co> wrote:
>> Here is my namespace.  It says not to edit, but I had been told to add
>> the importFrom. So I didn't use
>> devtools::document() for fear roxygen2 would get rid of it.
>
> `devtools::check()` calls `document()` automatically so your changes to
> the NAMESPACE file get overwritten. You can see this in the output.
>
> To solve this, add the appropriate roxygen2 tag somewhere in your package
> e.g.
>
> ```
> #' @importFrom stats var sd etc
> NULL
> ```
>
> Best,
> Lionel
>
> On 4/4/23, Dennis Boos <boos at ncsu.edu> wrote:
>> Thanks so much to all of you.  If you have time, I'm getting really
>> contradictory results.
>>
>> 1. It first seemed to have passed the check in Rstudio (I used
>> device::build() in the R window and then clicked on check in the drop
>> down
>> menu under build).
>>
>> ==> devtools::check(document = FALSE, args = c('--as-cran'))
>> ?? R CMD check results  Monte.Carlo.se 0.1.1 ????
>> Duration: 56.6s
>> 0 errors ? | 0 warnings ? | 0 notes ?
>>
>> R CMD check succeeded
>>
>> However, I then couldn't find the tar.gz where it was supposed to be. It
>> was just gone.
>>
>>
>> Here is my namespace.  It says not to edit, but I had been told to add
>> the importFrom. So I didn't use
>> devtools::document() for fear roxygen2 would get rid of it.
>>
>> # Generated by roxygen2: do not edit by hand
>> importFrom("stats", "cor", "sd", "var")
>> export(boot.se)
>> export(jack.se)
>> export(mc.se.matrix)
>> export(mc.se.vector)
>> export(pairwise.se)
>> export(sim.samp)
>>
>> 4. Here is my DESCRIPTION file
>>
>> Package: Monte.Carlo.se
>> Type: Package
>> Title: Monte Carlo Standard Errors
>> Version: 0.1.1
>> Author: Dennis Boos, Kevin Matthew, Jason Osborne
>> Maintainer: Dennis Boos <boos at ncsu.edu>
>> Description: Computes Monte Carlo standard errors for summaries of
>> Monte Carlo output. Summaries and their standard errors are based on
>> columns of Monte Carlo simulation output. Dennis D. Boos and Jason A.
>> Osborne (2015) <doi:10.1111/insr.12087>.
>> License: GPL-3
>> Encoding: UTF-8
>> RoxygenNote: 7.2.3
>> Suggests: knitr, rmarkdown
>> Imports: stats
>> VignetteBuilder: knitr
>>
>> 5. And because of your advice: " It sounds as though you're using
>> Roxygen2 to generate your NAMESPACE file.
>> ff so, you need @imports directives in the comments
>> (conventionally before the function that uses the import, but I think it
>> doesn't really matter where)."
>>
>> So I put "@imports" in the function that had trouble
>>
>> #' @examples
>> #' \donttest{
>> #' # Using the output data matrix hold generated in vignette Example3,
>> #' # calculate jackknife and bootstrap standard errors
>> #' # for the differences and ratios of the CV estimates.
>> #' # First get the components of hold needed.
>> #'
>> #' @imports
>> #'
>> #' trim20 <- function(x){mean(x,.2)} # 20% trimmed mean function
>>
>> Was that the correct thing to do?
>>
>> 6. And here are the failed check results. I'm clueless at this point.
>>
>> ==> devtools::check(document = FALSE, args = c('--as-cran'))
>> ?? Building
>> ????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????Setting
>> env vars:
>> ? CFLAGS    : -Wall -pedantic -fdiagnostics-color=always
>> ? CXXFLAGS  : -Wall -pedantic -fdiagnostics-color=always
>> ? CXX11FLAGS: -Wall -pedantic -fdiagnostics-color=always
>> ? CXX14FLAGS: -Wall -pedantic -fdiagnostics-color=always
>> ? CXX17FLAGS: -Wall -pedantic -fdiagnostics-color=always
>> ? CXX20FLAGS: -Wall -pedantic -fdiagnostics-color=always?? R CMD build
>> ??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
>>  checking for file 'C:\Users\boos\Dropbox\My PC
>> (boos-home)\Desktop\dennis\R.packages\Monte.Carlo.se.March.2023/DESCRIPTION'
>> ...?  preparing 'Monte.Carlo.se':?  checking DESCRIPTION
>> meta-information ...?  installing the package to build vignettes?
>> creating vignettes (3.6s)?  checking for LF line-endings in source and
>> make files and shell scripts?  checking for empty or unneeded
>> directories?  building 'Monte.Carlo.se_0.1.1.tar.gz'
>>    ?? Checking
>> ????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????Setting
>> env vars:
>> ? _R_CHECK_CRAN_INCOMING_REMOTE_               : FALSE
>> ? _R_CHECK_CRAN_INCOMING_                      : FALSE
>> ? _R_CHECK_FORCE_SUGGESTS_                     : FALSE
>> ? _R_CHECK_PACKAGES_USED_IGNORE_UNUSED_IMPORTS_: FALSE
>> ? NOT_CRAN                                     : true?? R CMD check
>> ??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
>>  using log directory 'C:/Users/boos/Dropbox/My PC
>> (boos-home)/Desktop/dennis/R.packages/Monte.Carlo.se.Rcheck' (793ms)?
>> using R version 4.2.3 (2023-03-15 ucrt)?  using platform:
>> x86_64-w64-mingw32 (64-bit)?  using session charset: UTF-8?  using
>> options '--no-manual --as-cran' (653ms)?  checking for file
>> 'Monte.Carlo.se/DESCRIPTION'?  checking extension type ... Package?
>> this is package 'Monte.Carlo.se' version '0.1.1'?  package encoding:
>> UTF-8?  checking package namespace information?  checking package
>> dependencies (3.2s)?  checking if this is a source package?  checking
>> if there is a namespace?  checking for executable files (491ms)?
>> checking for hidden files and directories ...?  checking for portable
>> file names?  checking serialization versions?  checking whether
>> package 'Monte.Carlo.se' can be installed (2.9s)?  checking installed
>> package size ... ?  checking package directory ...?  checking for
>> future file timestamps ... ?  checking 'build' directory?  checking
>> DESCRIPTION meta-information ... ?  checking top-level files ...?
>> checking for left-over files?  checking index information ... ?
>> checking package subdirectories ... ?  checking R files for non-ASCII
>> characters ... ?  checking R files for syntax errors ... ?  checking
>> whether the package can be loaded ... ?  checking whether the package
>> can be loaded with stated dependencies ... ?  checking whether the
>> package can be unloaded cleanly ... ?  checking whether the namespace
>> can be loaded with stated dependencies ... ?  checking whether the
>> namespace can be unloaded cleanly ... ?  checking loading without
>> being on the library search path ... N  checking dependencies in R
>> code ...
>>    Namespace in Imports field not imported from: 'stats'
>>      All declared Imports should be used.?  checking S3 generic/method
>> consistency (422ms)?  checking replacement functions ... ?  checking
>> foreign function calls ... N  checking R code for possible problems
>> (3s)
>>    boot.se: no visible global function definition for 'sd'
>>    boot.var: no visible global function definition for 'var'
>>    corr: no visible global function definition for 'cor'
>>    cv: no visible global function definition for 'sd'
>>    ratio.mean.sdhat.sd: no visible global function definition for 'sd'
>>    ratio.mean.vhat.var: no visible global function definition for 'var'
>>    ratio.sd: no visible global function definition for 'sd'
>>    ratio.var: no visible global function definition for 'var'
>>    varn: no visible global function definition for 'var'
>>    Undefined global functions or variables:
>>      cor sd var
>>    Consider adding
>>      importFrom("stats", "cor", "sd", "var")
>>    to your NAMESPACE file.?  checking Rd files ... ?  checking Rd
>> metadata ... ?  checking Rd line widths ... ?  checking Rd
>> cross-references ... ?  checking for missing documentation entries ...
>> ?  checking for code/documentation mismatches (562ms)?  checking Rd
>> \usage sections (661ms)?  checking Rd contents ... ?  checking for
>> unstated dependencies in examples ... ?  checking installed files from
>> 'inst/doc'W  checking files in 'vignettes' ...
>>    Files in the 'vignettes' directory newer than same file in 'inst/doc':
>>      'Brief-Overview.Rmd'?  checking examples (573ms)?  checking
>> examples with --run-donttest ... [24s] OK (24.7s)?  checking for
>> unstated dependencies in vignettes ... ?  checking package vignettes
>> in 'inst/doc' ...?  checking re-building of vignette outputs (6.8s)?
>> checking for non-standard things in the check directory ...?  checking
>> for detritus in the temp directory
>>
>>    See
>>      'C:/Users/boos/Dropbox/My PC
>> (boos-home)/Desktop/dennis/R.packages/Monte.Carlo.se.Rcheck/00check.log'
>>    for details.
>>
>>    ?? R CMD check results
>> ???????????????????????????????????????????????????????????????????????????????????
>> Monte.Carlo.se 0.1.1 ????
>> Duration: 51.5s
>> ? checking files in 'vignettes' ... WARNING
>>   Files in the 'vignettes' directory newer than same file in 'inst/doc':
>>     'Brief-Overview.Rmd'
>> ? checking dependencies in R code ... NOTE
>>   Namespace in Imports field not imported from: 'stats'
>>     All declared Imports should be used.
>> ? checking R code for possible problems ... NOTE
>>   boot.se: no visible global function definition for 'sd'
>>   boot.var: no visible global function definition for 'var'
>>   corr: no visible global function definition for 'cor'
>>   cv: no visible global function definition for 'sd'
>>   ratio.mean.sdhat.sd: no visible global function definition for 'sd'
>>   ratio.mean.vhat.var: no visible global function definition for 'var'
>>   ratio.sd: no visible global function definition for 'sd'
>>   ratio.var: no visible global function definition for 'var'
>>   varn: no visible global function definition for 'var'
>>   Undefined global functions or variables:
>>     cor sd var
>>   Consider adding
>>     importFrom("stats", "cor", "sd", "var")
>>   to your NAMESPACE file.
>> 0 errors ? | 1 warning ? | 2 notes ?
>> Error: R CMD check found WARNINGs
>> Execution halted
>>
>> Exited with status 1.
>>
>>
>>
>>
>>
>> On Sat, Apr 1, 2023 at 5:34?PM Duncan Murdoch <murdoch.duncan at gmail.com>
>> wrote:
>>
>>> On 31/03/2023 4:51 p.m., Dennis Boos wrote:
>>> > Recently I got a message from CRAN that my package Monte.Carlo.se (on
>>> CRAN
>>> > for the last few years) does not pass current testing.  There seemed
>>> > to
>>> be
>>> > 2 problems:
>>> >
>>> >
>>> ***************************************************************************************************************
>>> >
>>> > 1. * checking LazyData ... NOTE
>>> >    'LazyData' is specified without a 'data' directory
>>> >
>>> > I have this line in my DESCRIPTION file:
>>> >
>>> > LazyData: true
>>> >
>>> > Should I remove that?
>>> >
>>> >
>>> *****************************************************************************************************************
>>> >
>>> > 2. * checking examples with --run-donttest ... [42s/42s] ERROR
>>> > Running examples in ?Monte.Carlo.se-Ex.R? failed
>>> > The error most likely occurred in:
>>> >
>>> >> pairwise.se(hold,xcol=10:12,summary.f=cv)
>>> > Error: object 'hold' not found
>>> > Execution halted
>>> >
>>> >
>>> ***************************************************************************************
>>> >
>>> > So, I put in the R code to generate the data matrix *hold.  *But that
>>> > brought a host of other errors when checking in Rstudio with
>>> >
>>> >>
>>> devtools::check("S:/Documents/srcis/a.projects/Monte.Carlo.isr.and.package/Monte.Carlo.se.March.2023")
>>> >
>>> > I started seeing the following list about standard functions like sd.
>>> >
>>> > N  checking R code for possible problems (3.4s)
>>> >     boot.se: no visible global function definition for 'sd'
>>> >     boot.var: no visible global function definition for 'var'
>>> >     corr: no visible global function definition for 'cor'
>>> >     cv: no visible global function definition for 'sd'
>>> >     ratio.mean.sdhat.sd: no visible global function definition for
>>> > 'sd'
>>> >     ratio.mean.vhat.var: no visible global function definition for
>>> > 'var'
>>> >     ratio.sd: no visible global function definition for 'sd'
>>> >     ratio.var: no visible global function definition for 'var'
>>> >     varn: no visible global function definition for 'var'
>>> >     Undefined global functions or variables:
>>> >       cor sd var
>>> >     Consider adding
>>> >       importFrom("stats", "cor", "sd", "var")
>>> >     to your NAMESPACE file.
>>> >
>>> > But you can't add those functions to NAMESPACE. Well I did but
>>> >
>>> > devtools::build()
>>> >
>>> >
>>> > gets rid of it. Also, I keep getting the message in the Rstudio check
>>> >
>>> > WARNING
>>> >     'qpdf' is needed for checks on size reduction of PDFs
>>> >
>>> >
>>> > but I got the latest versions of R and Rstudio and was able to get
>>> > qpdf to install and loaded with library(qpdf), but Rstudio still gives
>>> > that message.
>>> >
>>>
>>> It sounds as though you're using Roxygen2 to generate your NAMESPACE
>>> file.  If so, you need @imports directives in the comments
>>> (conventionally before the function that uses the import, but I think it
>>> doesn't really matter where).
>>>
>>> Duncan Murdoch
>>>
>>>
>>
>> --
>> Dennis Boos                      email: dennis_boos at ncsu.edu
>> Department of Statistics    Phone: 919-515-1918
>> NC State University           Fax: 919-515-1169
>> Raleigh, NC 27695-8203   http://www4.stat.ncsu.edu/~boos
>>
>> Aim for kindness, tolerance, and humility.
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-package-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>
>


From ||one| @end|ng |rom po@|t@co  Tue Apr  4 22:19:15 2023
From: ||one| @end|ng |rom po@|t@co (Lionel Henry)
Date: Tue, 4 Apr 2023 22:19:15 +0200
Subject: [R-pkg-devel] correcting errors in an existing package
In-Reply-To: <CAJf4E3qDNekz5BRLS0Wt8E=698T4e-QFVHhKTTfrvZHEB-U6og@mail.gmail.com>
References: <CAJJ-gHw4O47SvoLHCeMxiTAsFWwCpJdxpZhom-4jRW5Onmp0QQ@mail.gmail.com>
 <c6b52458-35c0-8ef4-93aa-d37c50769460@gmail.com>
 <CAJJ-gHznV18NyPtuweYaGFdxisLTc+j26eN_uR2WVYzxttSG0Q@mail.gmail.com>
 <CAJf4E3ptG7j1M5MVUUvhx=S6DTzhiL0ksrD=X1uaVyAEw1+HjQ@mail.gmail.com>
 <CAJf4E3qDNekz5BRLS0Wt8E=698T4e-QFVHhKTTfrvZHEB-U6og@mail.gmail.com>
Message-ID: <CAJf4E3oQfZe20XcQhTndM_2=qHbPfBNJpyMuCKZWVmeGzizkmw@mail.gmail.com>

Hi Dennis,

I'm reincluding the list so that other people can see the clarifications too.

On 4/4/23, Dennis Boos <boos at ncsu.edu> wrote:

> Thanks so much. Could you give me a little more clarity?
>
> 1. Where do I add
>
> #' @importFrom stats var sd etc
>
> Within the R functions? Each one separately
>
> 2. Was "NULL" part of the code you meant me to use?

The roxygen code needs to be attached to some objects. You can include
the importFrom line as part of the docstring of another function but
since an import is often used in many functions it makes more sense to
declare them separately. Here I've used the `NULL` object for these
declarations, another option would have been "_PACKAGE", see
https://r-pkgs.org/man.html#sec-man-package-doc


> 3. I had no idea that the "check" remakes the tar.gz file from the folder.
> I thought it would have wanted to work off the created tar.gz because
> that's what we submit.

In the devtools workflow we rarely work directly with tar.gz files. They
are created behind the scene in the temp folder. At submission time we
use `devtools::release()` to create and send the tarball to CRAN.

Of course it's also fine to use the manual workflow or mix both.

Best,
Lionel

On 4/4/23, Lionel Henry <lionel at posit.co> wrote:
>> Here is my namespace.  It says not to edit, but I had been told to add
>> the importFrom. So I didn't use
>> devtools::document() for fear roxygen2 would get rid of it.
>
> `devtools::check()` calls `document()` automatically so your changes to
> the NAMESPACE file get overwritten. You can see this in the output.
>
> To solve this, add the appropriate roxygen2 tag somewhere in your package
> e.g.
>
> ```
> #' @importFrom stats var sd etc
> NULL
> ```
>
> Best,
> Lionel
>
> On 4/4/23, Lionel Henry <lionel at posit.co> wrote:
>>> Here is my namespace.  It says not to edit, but I had been told to add
>>> the importFrom. So I didn't use
>>> devtools::document() for fear roxygen2 would get rid of it.
>>
>> `devtools::check()` calls `document()` automatically so your changes to
>> the NAMESPACE file get overwritten. You can see this in the output.
>>
>> To solve this, add the appropriate roxygen2 tag somewhere in your package
>> e.g.
>>
>> ```
>> #' @importFrom stats var sd etc
>> NULL
>> ```
>>
>> Best,
>> Lionel
>>
>> On 4/4/23, Dennis Boos <boos at ncsu.edu> wrote:
>>> Thanks so much to all of you.  If you have time, I'm getting really
>>> contradictory results.
>>>
>>> 1. It first seemed to have passed the check in Rstudio (I used
>>> device::build() in the R window and then clicked on check in the drop
>>> down
>>> menu under build).
>>>
>>> ==> devtools::check(document = FALSE, args = c('--as-cran'))
>>> ?? R CMD check results  Monte.Carlo.se 0.1.1 ????
>>> Duration: 56.6s
>>> 0 errors ? | 0 warnings ? | 0 notes ?
>>>
>>> R CMD check succeeded
>>>
>>> However, I then couldn't find the tar.gz where it was supposed to be. It
>>> was just gone.
>>>
>>>
>>> Here is my namespace.  It says not to edit, but I had been told to add
>>> the importFrom. So I didn't use
>>> devtools::document() for fear roxygen2 would get rid of it.
>>>
>>> # Generated by roxygen2: do not edit by hand
>>> importFrom("stats", "cor", "sd", "var")
>>> export(boot.se)
>>> export(jack.se)
>>> export(mc.se.matrix)
>>> export(mc.se.vector)
>>> export(pairwise.se)
>>> export(sim.samp)
>>>
>>> 4. Here is my DESCRIPTION file
>>>
>>> Package: Monte.Carlo.se
>>> Type: Package
>>> Title: Monte Carlo Standard Errors
>>> Version: 0.1.1
>>> Author: Dennis Boos, Kevin Matthew, Jason Osborne
>>> Maintainer: Dennis Boos <boos at ncsu.edu>
>>> Description: Computes Monte Carlo standard errors for summaries of
>>> Monte Carlo output. Summaries and their standard errors are based on
>>> columns of Monte Carlo simulation output. Dennis D. Boos and Jason A.
>>> Osborne (2015) <doi:10.1111/insr.12087>.
>>> License: GPL-3
>>> Encoding: UTF-8
>>> RoxygenNote: 7.2.3
>>> Suggests: knitr, rmarkdown
>>> Imports: stats
>>> VignetteBuilder: knitr
>>>
>>> 5. And because of your advice: " It sounds as though you're using
>>> Roxygen2 to generate your NAMESPACE file.
>>> ff so, you need @imports directives in the comments
>>> (conventionally before the function that uses the import, but I think it
>>> doesn't really matter where)."
>>>
>>> So I put "@imports" in the function that had trouble
>>>
>>> #' @examples
>>> #' \donttest{
>>> #' # Using the output data matrix hold generated in vignette Example3,
>>> #' # calculate jackknife and bootstrap standard errors
>>> #' # for the differences and ratios of the CV estimates.
>>> #' # First get the components of hold needed.
>>> #'
>>> #' @imports
>>> #'
>>> #' trim20 <- function(x){mean(x,.2)} # 20% trimmed mean function
>>>
>>> Was that the correct thing to do?
>>>
>>> 6. And here are the failed check results. I'm clueless at this point.
>>>
>>> ==> devtools::check(document = FALSE, args = c('--as-cran'))
>>> ?? Building
>>> ????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????Setting
>>> env vars:
>>> ? CFLAGS    : -Wall -pedantic -fdiagnostics-color=always
>>> ? CXXFLAGS  : -Wall -pedantic -fdiagnostics-color=always
>>> ? CXX11FLAGS: -Wall -pedantic -fdiagnostics-color=always
>>> ? CXX14FLAGS: -Wall -pedantic -fdiagnostics-color=always
>>> ? CXX17FLAGS: -Wall -pedantic -fdiagnostics-color=always
>>> ? CXX20FLAGS: -Wall -pedantic -fdiagnostics-color=always?? R CMD build
>>> ??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
>>>  checking for file 'C:\Users\boos\Dropbox\My PC
>>> (boos-home)\Desktop\dennis\R.packages\Monte.Carlo.se.March.2023/DESCRIPTION'
>>> ...?  preparing 'Monte.Carlo.se':?  checking DESCRIPTION
>>> meta-information ...?  installing the package to build vignettes?
>>> creating vignettes (3.6s)?  checking for LF line-endings in source and
>>> make files and shell scripts?  checking for empty or unneeded
>>> directories?  building 'Monte.Carlo.se_0.1.1.tar.gz'
>>>    ?? Checking
>>> ????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????Setting
>>> env vars:
>>> ? _R_CHECK_CRAN_INCOMING_REMOTE_               : FALSE
>>> ? _R_CHECK_CRAN_INCOMING_                      : FALSE
>>> ? _R_CHECK_FORCE_SUGGESTS_                     : FALSE
>>> ? _R_CHECK_PACKAGES_USED_IGNORE_UNUSED_IMPORTS_: FALSE
>>> ? NOT_CRAN                                     : true?? R CMD check
>>> ??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????
>>>  using log directory 'C:/Users/boos/Dropbox/My PC
>>> (boos-home)/Desktop/dennis/R.packages/Monte.Carlo.se.Rcheck' (793ms)?
>>> using R version 4.2.3 (2023-03-15 ucrt)?  using platform:
>>> x86_64-w64-mingw32 (64-bit)?  using session charset: UTF-8?  using
>>> options '--no-manual --as-cran' (653ms)?  checking for file
>>> 'Monte.Carlo.se/DESCRIPTION'?  checking extension type ... Package?
>>> this is package 'Monte.Carlo.se' version '0.1.1'?  package encoding:
>>> UTF-8?  checking package namespace information?  checking package
>>> dependencies (3.2s)?  checking if this is a source package?  checking
>>> if there is a namespace?  checking for executable files (491ms)?
>>> checking for hidden files and directories ...?  checking for portable
>>> file names?  checking serialization versions?  checking whether
>>> package 'Monte.Carlo.se' can be installed (2.9s)?  checking installed
>>> package size ... ?  checking package directory ...?  checking for
>>> future file timestamps ... ?  checking 'build' directory?  checking
>>> DESCRIPTION meta-information ... ?  checking top-level files ...?
>>> checking for left-over files?  checking index information ... ?
>>> checking package subdirectories ... ?  checking R files for non-ASCII
>>> characters ... ?  checking R files for syntax errors ... ?  checking
>>> whether the package can be loaded ... ?  checking whether the package
>>> can be loaded with stated dependencies ... ?  checking whether the
>>> package can be unloaded cleanly ... ?  checking whether the namespace
>>> can be loaded with stated dependencies ... ?  checking whether the
>>> namespace can be unloaded cleanly ... ?  checking loading without
>>> being on the library search path ... N  checking dependencies in R
>>> code ...
>>>    Namespace in Imports field not imported from: 'stats'
>>>      All declared Imports should be used.?  checking S3 generic/method
>>> consistency (422ms)?  checking replacement functions ... ?  checking
>>> foreign function calls ... N  checking R code for possible problems
>>> (3s)
>>>    boot.se: no visible global function definition for 'sd'
>>>    boot.var: no visible global function definition for 'var'
>>>    corr: no visible global function definition for 'cor'
>>>    cv: no visible global function definition for 'sd'
>>>    ratio.mean.sdhat.sd: no visible global function definition for 'sd'
>>>    ratio.mean.vhat.var: no visible global function definition for 'var'
>>>    ratio.sd: no visible global function definition for 'sd'
>>>    ratio.var: no visible global function definition for 'var'
>>>    varn: no visible global function definition for 'var'
>>>    Undefined global functions or variables:
>>>      cor sd var
>>>    Consider adding
>>>      importFrom("stats", "cor", "sd", "var")
>>>    to your NAMESPACE file.?  checking Rd files ... ?  checking Rd
>>> metadata ... ?  checking Rd line widths ... ?  checking Rd
>>> cross-references ... ?  checking for missing documentation entries ...
>>> ?  checking for code/documentation mismatches (562ms)?  checking Rd
>>> \usage sections (661ms)?  checking Rd contents ... ?  checking for
>>> unstated dependencies in examples ... ?  checking installed files from
>>> 'inst/doc'W  checking files in 'vignettes' ...
>>>    Files in the 'vignettes' directory newer than same file in
>>> 'inst/doc':
>>>      'Brief-Overview.Rmd'?  checking examples (573ms)?  checking
>>> examples with --run-donttest ... [24s] OK (24.7s)?  checking for
>>> unstated dependencies in vignettes ... ?  checking package vignettes
>>> in 'inst/doc' ...?  checking re-building of vignette outputs (6.8s)?
>>> checking for non-standard things in the check directory ...?  checking
>>> for detritus in the temp directory
>>>
>>>    See
>>>      'C:/Users/boos/Dropbox/My PC
>>> (boos-home)/Desktop/dennis/R.packages/Monte.Carlo.se.Rcheck/00check.log'
>>>    for details.
>>>
>>>    ?? R CMD check results
>>> ???????????????????????????????????????????????????????????????????????????????????
>>> Monte.Carlo.se 0.1.1 ????
>>> Duration: 51.5s
>>> ? checking files in 'vignettes' ... WARNING
>>>   Files in the 'vignettes' directory newer than same file in 'inst/doc':
>>>     'Brief-Overview.Rmd'
>>> ? checking dependencies in R code ... NOTE
>>>   Namespace in Imports field not imported from: 'stats'
>>>     All declared Imports should be used.
>>> ? checking R code for possible problems ... NOTE
>>>   boot.se: no visible global function definition for 'sd'
>>>   boot.var: no visible global function definition for 'var'
>>>   corr: no visible global function definition for 'cor'
>>>   cv: no visible global function definition for 'sd'
>>>   ratio.mean.sdhat.sd: no visible global function definition for 'sd'
>>>   ratio.mean.vhat.var: no visible global function definition for 'var'
>>>   ratio.sd: no visible global function definition for 'sd'
>>>   ratio.var: no visible global function definition for 'var'
>>>   varn: no visible global function definition for 'var'
>>>   Undefined global functions or variables:
>>>     cor sd var
>>>   Consider adding
>>>     importFrom("stats", "cor", "sd", "var")
>>>   to your NAMESPACE file.
>>> 0 errors ? | 1 warning ? | 2 notes ?
>>> Error: R CMD check found WARNINGs
>>> Execution halted
>>>
>>> Exited with status 1.
>>>
>>>
>>>
>>>
>>>
>>> On Sat, Apr 1, 2023 at 5:34?PM Duncan Murdoch <murdoch.duncan at gmail.com>
>>> wrote:
>>>
>>>> On 31/03/2023 4:51 p.m., Dennis Boos wrote:
>>>> > Recently I got a message from CRAN that my package Monte.Carlo.se (on
>>>> CRAN
>>>> > for the last few years) does not pass current testing.  There seemed
>>>> > to
>>>> be
>>>> > 2 problems:
>>>> >
>>>> >
>>>> ***************************************************************************************************************
>>>> >
>>>> > 1. * checking LazyData ... NOTE
>>>> >    'LazyData' is specified without a 'data' directory
>>>> >
>>>> > I have this line in my DESCRIPTION file:
>>>> >
>>>> > LazyData: true
>>>> >
>>>> > Should I remove that?
>>>> >
>>>> >
>>>> *****************************************************************************************************************
>>>> >
>>>> > 2. * checking examples with --run-donttest ... [42s/42s] ERROR
>>>> > Running examples in ?Monte.Carlo.se-Ex.R? failed
>>>> > The error most likely occurred in:
>>>> >
>>>> >> pairwise.se(hold,xcol=10:12,summary.f=cv)
>>>> > Error: object 'hold' not found
>>>> > Execution halted
>>>> >
>>>> >
>>>> ***************************************************************************************
>>>> >
>>>> > So, I put in the R code to generate the data matrix *hold.  *But that
>>>> > brought a host of other errors when checking in Rstudio with
>>>> >
>>>> >>
>>>> devtools::check("S:/Documents/srcis/a.projects/Monte.Carlo.isr.and.package/Monte.Carlo.se.March.2023")
>>>> >
>>>> > I started seeing the following list about standard functions like sd.
>>>> >
>>>> > N  checking R code for possible problems (3.4s)
>>>> >     boot.se: no visible global function definition for 'sd'
>>>> >     boot.var: no visible global function definition for 'var'
>>>> >     corr: no visible global function definition for 'cor'
>>>> >     cv: no visible global function definition for 'sd'
>>>> >     ratio.mean.sdhat.sd: no visible global function definition for
>>>> > 'sd'
>>>> >     ratio.mean.vhat.var: no visible global function definition for
>>>> > 'var'
>>>> >     ratio.sd: no visible global function definition for 'sd'
>>>> >     ratio.var: no visible global function definition for 'var'
>>>> >     varn: no visible global function definition for 'var'
>>>> >     Undefined global functions or variables:
>>>> >       cor sd var
>>>> >     Consider adding
>>>> >       importFrom("stats", "cor", "sd", "var")
>>>> >     to your NAMESPACE file.
>>>> >
>>>> > But you can't add those functions to NAMESPACE. Well I did but
>>>> >
>>>> > devtools::build()
>>>> >
>>>> >
>>>> > gets rid of it. Also, I keep getting the message in the Rstudio check
>>>> >
>>>> > WARNING
>>>> >     'qpdf' is needed for checks on size reduction of PDFs
>>>> >
>>>> >
>>>> > but I got the latest versions of R and Rstudio and was able to get
>>>> > qpdf to install and loaded with library(qpdf), but Rstudio still
>>>> > gives
>>>> > that message.
>>>> >
>>>>
>>>> It sounds as though you're using Roxygen2 to generate your NAMESPACE
>>>> file.  If so, you need @imports directives in the comments
>>>> (conventionally before the function that uses the import, but I think
>>>> it
>>>> doesn't really matter where).
>>>>
>>>> Duncan Murdoch
>>>>
>>>>
>>>
>>> --
>>> Dennis Boos                      email: dennis_boos at ncsu.edu
>>> Department of Statistics    Phone: 919-515-1918
>>> NC State University           Fax: 919-515-1169
>>> Raleigh, NC 27695-8203   http://www4.stat.ncsu.edu/~boos
>>>
>>> Aim for kindness, tolerance, and humility.
>>>
>>> 	[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-package-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-package-devel
>>>
>>
>


From |@w@onj@|7net @end|ng |rom gm@||@com  Tue Apr  4 22:28:52 2023
From: |@w@onj@|7net @end|ng |rom gm@||@com (John Lawson)
Date: Tue, 4 Apr 2023 14:28:52 -0600
Subject: [R-pkg-devel] What checks are required before uploading a package
 to CRAN?
Message-ID: <CAJiVmSCVmKoSTcGOeUoBHKWH8Yvf9X4Q2jmoy8X+tCW08pMmfg@mail.gmail.com>

My R package checks on my windows computer with no errors, warnings or
notes. Next I used the win-builder upload page to check the package. I
uploaded the tar.gz file on R-release. I read the 00check.log file and
the only Note stated was that I was the developer. I understood that I
needed to upload the file to both R-release and R-devel before I could
upload it to the cran.r-project.org/submit.html page. I tried to
upload the file to the R-devel, but I got the following message.

ERROR: Access to the path
'C:\Inetpub\ftproot\R-devel\daewr_1.2-9.tar.gz' is denied. (perhaps
you uploaded already and the file has not been processed yet?)

It has been 4 days since I uploaded the file to R-release, and I get
automatic emails every other day from Uwe Ligges telling me my package
has been checked and built.

What checks are required before uploading the package tar.gz file to
the cran.r-project.org/submit.html page?

John Lawson


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Apr  5 09:17:45 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 5 Apr 2023 10:17:45 +0300
Subject: [R-pkg-devel] 
 What checks are required before uploading a package to CRAN?
In-Reply-To: <CAJiVmSCVmKoSTcGOeUoBHKWH8Yvf9X4Q2jmoy8X+tCW08pMmfg@mail.gmail.com>
References: <CAJiVmSCVmKoSTcGOeUoBHKWH8Yvf9X4Q2jmoy8X+tCW08pMmfg@mail.gmail.com>
Message-ID: <20230405101745.3588f05c@Tarkus>

On Tue, 4 Apr 2023 14:28:52 -0600
John Lawson <lawsonjsl7net at gmail.com> wrote:

> ERROR: Access to the path
> 'C:\Inetpub\ftproot\R-devel\daewr_1.2-9.tar.gz' is denied. (perhaps
> you uploaded already and the file has not been processed yet?)
> 
> It has been 4 days since I uploaded the file to R-release, and I get
> automatic emails every other day from Uwe Ligges telling me my package
> has been checked and built.

This might need some help from Uwe Ligges to resolve the package queue
problems.

> What checks are required before uploading the package tar.gz file to
> the cran.r-project.org/submit.html page?

The policy strongly recommends checking the package with R-devel but
doesn't require you to use Win-Builder. You can get R-devel for Windows
from <https://cran.r-project.org/bin/windows/base/rdevel.html> and run
R CMD check from that.

If you don't want to install additional software, you can use R-hub
<https://builder.r-hub.io/advanced> and other package checking services.
They don't run exactly the same software on exactly the same hardware
as CRAN checks, but they do fulfil the requirement to have your package
checked by R-devel.

-- 
Best regards,
Ivan


From rodr|go@tob@rc@rr|zo @end|ng |rom uw@@edu@@u  Wed Apr  5 09:45:14 2023
From: rodr|go@tob@rc@rr|zo @end|ng |rom uw@@edu@@u (Rodrigo Tobar Carrizo)
Date: Wed, 5 Apr 2023 07:45:14 +0000
Subject: [R-pkg-devel] OpenMP and CRAN checks
In-Reply-To: <25644.11616.284536.185116@rob.eddelbuettel.com>
References: <SYCPR01MB40477F5D574DBBC27DD0F32BA9939@SYCPR01MB4047.ausprd01.prod.outlook.com>
 <25644.11616.284536.185116@rob.eddelbuettel.com>
Message-ID: <SYCPR01MB4047F1337590AB97ED22DD41A9909@SYCPR01MB4047.ausprd01.prod.outlook.com>

Hi Dirk,

Thanks for your response. In a way this is more or less what I knew we would have to end up doing (i.e., explicit limit ourselves to 2 CPUs maximum for anything running on CRAN), but it still confuses me why this didn't just happen, given how CRAN sets OMP_THREAD_LIMIT=2 already, which should constrain us automatically.

I've taken your advice onboard and put in a very similar function that I am then invoking in all examples, tests and vignettes. Our code uses roxygen2, and there are 150 @examples in the inline documentation, so a midly complex sed command did the trick. The vignettes and tests were not as bad.

We'll try a resubmission and see how we fare.

Thanks again,

Rodrigo
________________________________
Von: Dirk Eddelbuettel <edd at debian.org>
Gesendet: Dienstag, 4. April 2023 22:00
An: Rodrigo Tobar Carrizo <rodrigo.tobarcarrizo at uwa.edu.au>
Cc: r-package-devel at r-project.org <r-package-devel at r-project.org>
Betreff: Re: [R-pkg-devel] OpenMP and CRAN checks


Hi Rodrigo,

This came up recently again on social media where I illustrated how the
tiledb package deals with it. So a quick recap:

First off, let's make the goals clear.

We want to _simultaneously_
 - abide by CRAN Policy rules and cap ourselves to two cores there
 - do not impose any limits on our users: ALL cores ALL the time

The solution we implemented a while is to use a function _that is an opt-in_
which looks at the standard OpenMP variable as well as at R's own Ncpus:

    limitTileDBCores <- function(ncores, verbose=FALSE) {
      if (missing(ncores)) {
        ## start with a simple fallback: 'Ncpus' (if set) or else 2
        ncores <- getOption("Ncpus", 2L)
        ## also consider OMP_THREAD_LIMIT (cf Writing R Extensions), gets NA if envvar unset
        ompcores <- as.integer(Sys.getenv("OMP_THREAD_LIMIT"))
        ## and then keep the smaller
        ncores <- min(na.omit(c(ncores, ompcores)))
      }
      stopifnot(`The 'ncores' argument must be numeric or character` = is.numeric(ncores) || is.character(ncores))
      ## for brevity omitted here how ncores propagates to TileDB library -- creates `cfg`
      if (verbose) message("Limiting TileDB to ",ncores," cores. See ?limitTileDBCores.")
      invisible(cfg)
    }

The key is that we reflect the smaller of Ncpus and OMP_THREAD_LIMIT along
with a fall-back of two in case nothing is set.

That function is then called (and feeds into the library config) at the
beginning of each
 - help file example
 - unit test file
 - vignette

As example (from a help file) is

    \dontshow{ctx <- tiledb_ctx(limitTileDBCores())}

(where ctx a context object controlling, inter alia, the thread pool).

By throttling it anywhere CRAN executes code, and using the prescribed
maximum of two core, we satisfy goal one of not getting thrown off CRAN. By
making it an _explicit_ opt-in we satisfy our goal of never slowing down our
users who (presumably) do not opt in. And those who have, say, Ncpus set (as
I do to spread R's own package installations over all my cores) get the
maximum performance for examples, tests, and vignettes too as they opted in.

"Works for us" as they say.

Hope this helps,  Dirk

--
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Apr  5 11:08:25 2023
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 5 Apr 2023 11:08:25 +0200
Subject: [R-pkg-devel] 
 What checks are required before uploading a package to CRAN?
In-Reply-To: <20230405101745.3588f05c@Tarkus>
References: <CAJiVmSCVmKoSTcGOeUoBHKWH8Yvf9X4Q2jmoy8X+tCW08pMmfg@mail.gmail.com>
 <20230405101745.3588f05c@Tarkus>
Message-ID: <bd2ecfc2-fb5d-b4da-c10b-24f8fdbbeab0@statistik.tu-dortmund.de>



On 05.04.2023 09:17, Ivan Krylov wrote:
> On Tue, 4 Apr 2023 14:28:52 -0600
> John Lawson <lawsonjsl7net at gmail.com> wrote:
> 
>> ERROR: Access to the path
>> 'C:\Inetpub\ftproot\R-devel\daewr_1.2-9.tar.gz' is denied. (perhaps
>> you uploaded already and the file has not been processed yet?)
>>
>> It has been 4 days since I uploaded the file to R-release, and I get
>> automatic emails every other day from Uwe Ligges telling me my package
>> has been checked and built.

Interesting, you shouild receive one mail for each upload.
Can yoiu tell me when you got an unexpected one? Can you forward it to me?

I do not see a package in any of the queues right now.

Best,
Uwe Ligges



> 
> This might need some help from Uwe Ligges to resolve the package queue
> problems.
> 
>> What checks are required before uploading the package tar.gz file to
>> the cran.r-project.org/submit.html page?
> 
> The policy strongly recommends checking the package with R-devel but
> doesn't require you to use Win-Builder. You can get R-devel for Windows
> from <https://cran.r-project.org/bin/windows/base/rdevel.html> and run
> R CMD check from that.
> 
> If you don't want to install additional software, you can use R-hub
> <https://builder.r-hub.io/advanced> and other package checking services.
> They don't run exactly the same software on exactly the same hardware
> as CRAN checks, but they do fulfil the requirement to have your package
> checked by R-devel.
>


From c|yde @end|ng |rom duke@edu  Fri Apr  7 18:01:31 2023
From: c|yde @end|ng |rom duke@edu (Merlise Clyde, Ph.D.)
Date: Fri, 7 Apr 2023 16:01:31 +0000
Subject: [R-pkg-devel] Missing quadmath library in r-release-macosx-arm64
Message-ID: <BN7PR05MB3972AF918C1ACF444332BF17C8969@BN7PR05MB3972.namprd05.prod.outlook.com>

I was checking the CRAN check page for my package BAS https://cran.r-project.org/web/checks/check_results_BAS.html

and saw that there has been an ERROR in the check status for r-release-macosx-arm64 for (at least) the last 2 days.   Looking at the check results linked there the package fails installation as it cannot locate the quadmath library:

https://www.r-project.org/nosvn/R.check/r-release-macos-arm64/BAS-00install.html

I am preparing for any update of the package and current testing using mac-builder for r-release and r-devel return no errors, warnings, etc.  (although it appears that r-release for the testing server is using R 4.2.1 ???)

Is this a false positive that may be ignored on submission of a new version or are there any other updates for packages using C/fortran on M1macs that I need to update.   (Can't find quadmath explicitly in WRE, but may have not searched optimally)

In my Makefile I have

??????PKG_LIBS = $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)

source code is at https://github.com/merliseclyde/BAS

TIA
Merlise






	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Fri Apr  7 21:14:08 2023
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Fri, 7 Apr 2023 15:14:08 -0400
Subject: [R-pkg-devel] Changing R Package Maintainer
Message-ID: <CAPcHnpSNsci0TVO0Oz5YOgHOZv6PZ92Ggt-8ia+CVp-7Sawf2Q@mail.gmail.com>

Hi,


I'm changing my name and my email address. I've got an update I'd like to
submit to CRAN, I've changed my name and email in my DESCRIPTION.

I couldn't find any details about changing maintainers in the R manuals
unfortunately. Someone online said to just submit the update, CRAN will
send one email to the new address confirming the submission, and another to
the old address confirming the new maintainer. Someone else said to email
CRAN from the old address about the new maintainer and their address, and
wait for a response of approval before submission. It was unclear if that
would be CRAN-submissions at R-project.org or CRAN at R-project.org, but I'd
guess the first.

Has anyone else done this before or does anyone know the best procedure?
Also, given that this isn't a transfer of ownership, I'm still the same
person with a different name, would that make this process easier?


Thank you!

	[[alternative HTML version deleted]]


From h@w|ckh@m @end|ng |rom gm@||@com  Fri Apr  7 21:18:45 2023
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Sat, 8 Apr 2023 07:18:45 +1200
Subject: [R-pkg-devel] Changing R Package Maintainer
In-Reply-To: <CAPcHnpSNsci0TVO0Oz5YOgHOZv6PZ92Ggt-8ia+CVp-7Sawf2Q@mail.gmail.com>
References: <CAPcHnpSNsci0TVO0Oz5YOgHOZv6PZ92Ggt-8ia+CVp-7Sawf2Q@mail.gmail.com>
Message-ID: <CABdHhvG8-RXgYr-fwEis9LV8pkKTCJ7vLQ2a9h+7_+UVNN2WMQ@mail.gmail.com>

Just submit your package, and you'll get an automated email to the old address.

Hadley

On Sat, Apr 8, 2023 at 7:14?AM Andrew Simmons <akwsimmo at gmail.com> wrote:
>
> Hi,
>
>
> I'm changing my name and my email address. I've got an update I'd like to
> submit to CRAN, I've changed my name and email in my DESCRIPTION.
>
> I couldn't find any details about changing maintainers in the R manuals
> unfortunately. Someone online said to just submit the update, CRAN will
> send one email to the new address confirming the submission, and another to
> the old address confirming the new maintainer. Someone else said to email
> CRAN from the old address about the new maintainer and their address, and
> wait for a response of approval before submission. It was unclear if that
> would be CRAN-submissions at R-project.org or CRAN at R-project.org, but I'd
> guess the first.
>
> Has anyone else done this before or does anyone know the best procedure?
> Also, given that this isn't a transfer of ownership, I'm still the same
> person with a different name, would that make this process easier?
>
>
> Thank you!
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel



-- 
http://hadley.nz


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Apr  7 21:20:32 2023
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 7 Apr 2023 21:20:32 +0200
Subject: [R-pkg-devel] Changing R Package Maintainer
In-Reply-To: <CAPcHnpSNsci0TVO0Oz5YOgHOZv6PZ92Ggt-8ia+CVp-7Sawf2Q@mail.gmail.com>
References: <CAPcHnpSNsci0TVO0Oz5YOgHOZv6PZ92Ggt-8ia+CVp-7Sawf2Q@mail.gmail.com>
Message-ID: <7347e306-1492-7154-6195-3e845bb96c95@statistik.tu-dortmund.de>



On 07.04.2023 21:14, Andrew Simmons wrote:
> Hi,
> 
> 
> I'm changing my name and my email address. I've got an update I'd like to
> submit to CRAN, I've changed my name and email in my DESCRIPTION.
> 
> I couldn't find any details about changing maintainers in the R manuals

It is in the CRAN policies.


> unfortunately. Someone online said to just submit the update, CRAN will
> send one email to the new address confirming the submission, and another to
> the old address confirming the new maintainer. 

Yes, that's true.


> Someone else said to email
> CRAN from the old address about the new maintainer and their address, and
> wait for a response of approval before submission. It was unclear if that
> would be CRAN-submissions at R-project.org or CRAN at R-project.org, but I'd
> guess the first.

THis is also a true option. Personally I'd prefer the first way.


> 
> Has anyone else done this before or does anyone know the best procedure?
> Also, given that this isn't a transfer of ownership, I'm still the same
> person with a different name, would that make this process easier?

Same process as we do not know whether it is the same person behind the 
other mail address.


Best,
Uwe Ligges




> 
> 
> Thank you!
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From b@rt-j@n@v@nro@@um @end|ng |rom wur@n|  Tue Apr 11 09:37:23 2023
From: b@rt-j@n@v@nro@@um @end|ng |rom wur@n| (Rossum, Bart-Jan van)
Date: Tue, 11 Apr 2023 07:37:23 +0000
Subject: [R-pkg-devel] Problems on R-devel because of changes in stats
 family function
Message-ID: <AM0PR01MB4369F5226E6481DAF9C1C664B99A9@AM0PR01MB4369.eurprd01.prod.exchangelabs.com>

Hi,

When submitting a new version of my LMMsolver package to CRAN, it fails on the automated tests, see:

Windows: https://win-builder.r-project.org/incoming_pretest/LMMsolver_1.0.5_20230407_120945/Windows/00check.log

I managed to track this down to a change in the output of the family function in the stats package:
https://search.r-project.org/R/refmans/stats/html/family.html

More specifically, it is about a new output in the call to family():

dispersion
(optional since R version 4.3.0) numeric: value of the dispersion parameter, if fixed, or NA_real_ if free.

Even though the documentation seems to suggest this output is optional, I don't see a way to suppress it. In all my calls to family I get an extra output dispersion with value NA.
I need to store the family information in my own outputs for further processing. Also my output are quite complex by themselves so I tend to check my full output objects with outputs previously stored.
Exactly this is giving me problems now. In R 4.3 all of my outputs will have an extra item as well, causing the tests to fail.

I am not sure how to solve this. I could suppress the affected tests when an installation of stats with version >= 4.3 is detected, but that doesn't feel good.
Do you have any other suggestions on how to solve this.

Thanks in advance,
Bart-Jan


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Apr 11 10:45:04 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 11 Apr 2023 04:45:04 -0400
Subject: [R-pkg-devel] Problems on R-devel because of changes in stats
 family function
In-Reply-To: <AM0PR01MB4369F5226E6481DAF9C1C664B99A9@AM0PR01MB4369.eurprd01.prod.exchangelabs.com>
References: <AM0PR01MB4369F5226E6481DAF9C1C664B99A9@AM0PR01MB4369.eurprd01.prod.exchangelabs.com>
Message-ID: <b706ed1a-676a-1283-a9c9-7c13bc6932ee@gmail.com>

On 11/04/2023 3:37 a.m., Rossum, Bart-Jan van wrote:
> Hi,
> 
> When submitting a new version of my LMMsolver package to CRAN, it fails on the automated tests, see:
> 
> Windows: https://win-builder.r-project.org/incoming_pretest/LMMsolver_1.0.5_20230407_120945/Windows/00check.log
> 
> I managed to track this down to a change in the output of the family function in the stats package:
> https://search.r-project.org/R/refmans/stats/html/family.html
> 
> More specifically, it is about a new output in the call to family():
> 
> dispersion
> (optional since R version 4.3.0) numeric: value of the dispersion parameter, if fixed, or NA_real_ if free.
> 
> Even though the documentation seems to suggest this output is optional, I don't see a way to suppress it. In all my calls to family I get an extra output dispersion with value NA.
> I need to store the family information in my own outputs for further processing. Also my output are quite complex by themselves so I tend to check my full output objects with outputs previously stored.
> Exactly this is giving me problems now. In R 4.3 all of my outputs will have an extra item as well, causing the tests to fail.
> 
> I am not sure how to solve this. I could suppress the affected tests when an installation of stats with version >= 4.3 is detected, but that doesn't feel good.
> Do you have any other suggestions on how to solve this.

One way to solve it would be to set the dispersion parameter to NULL 
before doing your comparison.  That should work across R versions.  For 
example,

    f <- gaussian()
    f$dispersion <- NULL
    expect_equal_to_reference(f, "family")

Another possibility would be to save two reference values, e.g.

    f <- gaussian()
    expect_equal_to_reference(f, if (getRversion() < 4.3.0) "oldfamily" 
else "newfamily")

You should do some sort of manual comparison when those two reference 
values are first created to make sure there are no other changes.

Duncan Murdoch


From g|@nm@rco@|bert| @end|ng |rom gm@||@com  Wed Apr 12 10:05:32 2023
From: g|@nm@rco@|bert| @end|ng |rom gm@||@com (Gianmarco Alberti)
Date: Wed, 12 Apr 2023 10:05:32 +0200
Subject: [R-pkg-devel] package not passing automatic checks: no clue as to
 what is causing 2 notes
In-Reply-To: <ac00d786-353e-4192-9ae4-b7d53bf74805@Spark>
References: <ac00d786-353e-4192-9ae4-b7d53bf74805@Spark>
Message-ID: <97304f8e-181f-4ee9-a111-bbcb9b843491@Spark>

Dear All,
I trust this email finds you doing well.

I had planned to release a new version of my package, and everything was checking perfectly on my machine and using the???devtools? functions check_win_oldrelease(), check_win_release(), and check_win_devel().

However, after submitting the package to CRAN, I have been notified that the package does not pass the automatic incoming checks. I had a look at the log file (https://win-builder.r-project.org/incoming_pretest/movecost_2.0_20230412_090758/Windows/00check.log) and I see two notes which I do not understand:

* checking HTML version of manual ... [6s] NOTE
Encountered the following conversion/validation errors:
'CreateProcess' failed to run 'd:\rtools43\x86_64-w64-mingw32.static.posix\bin\tidy.exe -language en -qe --drop-empty-elements no D:\temp\Rtmp29JsRe\file2426857b24734'
'CreateProcess' failed to run 'd:\rtools43\x86_64-w64-mingw32.static.posix\bin\tidy.exe -language en -qe --drop-empty-elements no D:\temp\Rtmp29JsRe\file2426857b24734'

* checking for detritus in the temp directory ... NOTE
Found the following files/directories: 'lastMiKTeXException'

Do you have any suggestion as to what can possibly cause those issues, and how to fix them?

Thanks

--
Dr Gianmarco Alberti | Lecturer in Spatial Forensics
BA, MA, PhD (Udine) - Coordinator of the BA dissertations

Department of Criminology - Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta
Msida - MSD 2080 (Malta)
+356 2340 3718

Google Scholar:?https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
ResearchGate:?https://www.researchgate.net/profile/Gianmarco_Alberti4
Academia:?https://malta.academia.edu/GianmarcoAlberti
movecost:?https://CRAN.R-project.org/package=movecost
chisquare:?https://CRAN.R-project.org/package=chisquare
CAinterprTools:?https://CRAN.R-project.org/package=CAinterprTools

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Apr 12 10:14:47 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 12 Apr 2023 04:14:47 -0400
Subject: [R-pkg-devel] 
 package not passing automatic checks: no clue as to
 what is causing 2 notes
In-Reply-To: <97304f8e-181f-4ee9-a111-bbcb9b843491@Spark>
References: <ac00d786-353e-4192-9ae4-b7d53bf74805@Spark>
 <97304f8e-181f-4ee9-a111-bbcb9b843491@Spark>
Message-ID: <5ba782bc-b13e-79dc-b287-b0b768e4aa2e@gmail.com>

The tidy.exe program is used in some checks of help files.  The error 
messages you have say that it failed to run.  I think that was an issue 
on the CRAN machine, not an issue with your package, so I'd follow the 
instructions in the email you received from CRAN to let them know the 
rejection appears to be a false positive.

Duncan Murdoch

On 12/04/2023 4:05 a.m., Gianmarco Alberti wrote:
> Dear All,
> I trust this email finds you doing well.
> 
> I had planned to release a new version of my package, and everything was checking perfectly on my machine and using the???devtools? functions check_win_oldrelease(), check_win_release(), and check_win_devel().
> 
> However, after submitting the package to CRAN, I have been notified that the package does not pass the automatic incoming checks. I had a look at the log file (https://win-builder.r-project.org/incoming_pretest/movecost_2.0_20230412_090758/Windows/00check.log) and I see two notes which I do not understand:
> 
> * checking HTML version of manual ... [6s] NOTE
> Encountered the following conversion/validation errors:
> 'CreateProcess' failed to run 'd:\rtools43\x86_64-w64-mingw32.static.posix\bin\tidy.exe -language en -qe --drop-empty-elements no D:\temp\Rtmp29JsRe\file2426857b24734'
> 'CreateProcess' failed to run 'd:\rtools43\x86_64-w64-mingw32.static.posix\bin\tidy.exe -language en -qe --drop-empty-elements no D:\temp\Rtmp29JsRe\file2426857b24734'
> 
> * checking for detritus in the temp directory ... NOTE
> Found the following files/directories: 'lastMiKTeXException'
> 
> Do you have any suggestion as to what can possibly cause those issues, and how to fix them?
> 
> Thanks
> 
> --
> Dr Gianmarco Alberti | Lecturer in Spatial Forensics
> BA, MA, PhD (Udine) - Coordinator of the BA dissertations
> 
> Department of Criminology - Faculty for Social Wellbeing
> Room 332, Humanities B (FEMA)
> University of Malta
> Msida - MSD 2080 (Malta)
> +356 2340 3718
> 
> Google Scholar:?https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
> ResearchGate:?https://www.researchgate.net/profile/Gianmarco_Alberti4
> Academia:?https://malta.academia.edu/GianmarcoAlberti
> movecost:?https://CRAN.R-project.org/package=movecost
> chisquare:?https://CRAN.R-project.org/package=chisquare
> CAinterprTools:?https://CRAN.R-project.org/package=CAinterprTools
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Apr 12 10:16:15 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 12 Apr 2023 11:16:15 +0300
Subject: [R-pkg-devel] 
 package not passing automatic checks: no clue as to
 what is causing 2 notes
In-Reply-To: <97304f8e-181f-4ee9-a111-bbcb9b843491@Spark>
References: <ac00d786-353e-4192-9ae4-b7d53bf74805@Spark>
 <97304f8e-181f-4ee9-a111-bbcb9b843491@Spark>
Message-ID: <20230412111615.55dd1545@parabola>

? Wed, 12 Apr 2023 10:05:32 +0200
Gianmarco Alberti <gianmarcoalberti at gmail.com> ?????:

> 'CreateProcess' failed to run
> 'd:\rtools43\x86_64-w64-mingw32.static.posix\bin\tidy.exe -language
> en -qe --drop-empty-elements no D:\temp\Rtmp29JsRe\file2426857b24734'

This is a (transient?) problem on the machine running the check:
something completely prevented HTML Tidy from running, even before the
process would have tried to load the required DLLs. Nothing to do with
your package.

> * checking for detritus in the temp directory ... NOTE
> Found the following files/directories: 'lastMiKTeXException'

I think this is a false positive too. Some other package may have
failed to compile its PDF documentation (at the same time?), which
caused MiKTeX to create this file in the temp directory. Your PDF
manual check resulted in an OK.

Does the automatic e-mail include the instructions on where to reply
with this explanation?

-- 
Best regards,
Ivan


From g|@nm@rco@|bert| @end|ng |rom gm@||@com  Wed Apr 12 10:48:51 2023
From: g|@nm@rco@|bert| @end|ng |rom gm@||@com (Gianmarco Alberti)
Date: Wed, 12 Apr 2023 10:48:51 +0200
Subject: [R-pkg-devel] 
 package not passing automatic checks: no clue as to
 what is causing 2 notes
In-Reply-To: <20230412111615.55dd1545@parabola>
References: <ac00d786-353e-4192-9ae4-b7d53bf74805@Spark>
 <97304f8e-181f-4ee9-a111-bbcb9b843491@Spark>
 <20230412111615.55dd1545@parabola>
Message-ID: <a750b115-b043-4e76-a60d-34a13e3a4123@Spark>

Hello,
Thanks for your prompt advices.

I am not an expert?.

I have sent an email to explain that those are likely to be issues on the CRAN?s end, and to inform that I would not mind to wait a while and re-do the entire submission procedure.

Thank you again
Gm

--
Dr Gianmarco Alberti | Lecturer in Spatial Forensics
BA, MA, PhD (Udine) - Coordinator of the BA dissertations

Department of Criminology - Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta
Msida - MSD 2080 (Malta)
+356 2340 3718

Google Scholar:?https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
ResearchGate:?https://www.researchgate.net/profile/Gianmarco_Alberti4
Academia:?https://malta.academia.edu/GianmarcoAlberti
movecost:?https://CRAN.R-project.org/package=movecost
chisquare:?https://CRAN.R-project.org/package=chisquare
CAinterprTools:?https://CRAN.R-project.org/package=CAinterprTools
On 12 Apr 2023, 10:16 +0200, Ivan Krylov <krylov.r00t at gmail.com>, wrote:
> ? Wed, 12 Apr 2023 10:05:32 +0200
> Gianmarco Alberti <gianmarcoalberti at gmail.com> ?????:
>
> > 'CreateProcess' failed to run
> > 'd:\rtools43\x86_64-w64-mingw32.static.posix\bin\tidy.exe -language
> > en -qe --drop-empty-elements no D:\temp\Rtmp29JsRe\file2426857b24734'
>
> This is a (transient?) problem on the machine running the check:
> something completely prevented HTML Tidy from running, even before the
> process would have tried to load the required DLLs. Nothing to do with
> your package.
>
> > * checking for detritus in the temp directory ... NOTE
> > Found the following files/directories: 'lastMiKTeXException'
>
> I think this is a false positive too. Some other package may have
> failed to compile its PDF documentation (at the same time?), which
> caused MiKTeX to create this file in the temp directory. Your PDF
> manual check resulted in an OK.
>
> Does the automatic e-mail include the instructions on where to reply
> with this explanation?
>
> --
> Best regards,
> Ivan

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Apr 12 11:08:47 2023
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 12 Apr 2023 11:08:47 +0200
Subject: [R-pkg-devel] 
 package not passing automatic checks: no clue as to
 what is causing 2 notes
In-Reply-To: <a750b115-b043-4e76-a60d-34a13e3a4123@Spark>
References: <ac00d786-353e-4192-9ae4-b7d53bf74805@Spark>
 <97304f8e-181f-4ee9-a111-bbcb9b843491@Spark>
 <20230412111615.55dd1545@parabola>
 <a750b115-b043-4e76-a60d-34a13e3a4123@Spark>
Message-ID: <afcdc5ae-3b82-08d5-222b-b5cb5b57cd91@statistik.tu-dortmund.de>

Indeed, a hicc up of the Windows builder.
Should be resolved.

Best,
Uwe Ligges


On 12.04.2023 10:48, Gianmarco Alberti wrote:
> Hello,
> Thanks for your prompt advices.
> 
> I am not an expert?.
> 
> I have sent an email to explain that those are likely to be issues on the CRAN?s end, and to inform that I would not mind to wait a while and re-do the entire submission procedure.
> 
> Thank you again
> Gm
> 
> --
> Dr Gianmarco Alberti | Lecturer in Spatial Forensics
> BA, MA, PhD (Udine) - Coordinator of the BA dissertations
> 
> Department of Criminology - Faculty for Social Wellbeing
> Room 332, Humanities B (FEMA)
> University of Malta
> Msida - MSD 2080 (Malta)
> +356 2340 3718
> 
> Google Scholar:?https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
> ResearchGate:?https://www.researchgate.net/profile/Gianmarco_Alberti4
> Academia:?https://malta.academia.edu/GianmarcoAlberti
> movecost:?https://CRAN.R-project.org/package=movecost
> chisquare:?https://CRAN.R-project.org/package=chisquare
> CAinterprTools:?https://CRAN.R-project.org/package=CAinterprTools
> On 12 Apr 2023, 10:16 +0200, Ivan Krylov <krylov.r00t at gmail.com>, wrote:
>> ? Wed, 12 Apr 2023 10:05:32 +0200
>> Gianmarco Alberti <gianmarcoalberti at gmail.com> ?????:
>>
>>> 'CreateProcess' failed to run
>>> 'd:\rtools43\x86_64-w64-mingw32.static.posix\bin\tidy.exe -language
>>> en -qe --drop-empty-elements no D:\temp\Rtmp29JsRe\file2426857b24734'
>>
>> This is a (transient?) problem on the machine running the check:
>> something completely prevented HTML Tidy from running, even before the
>> process would have tried to load the required DLLs. Nothing to do with
>> your package.
>>
>>> * checking for detritus in the temp directory ... NOTE
>>> Found the following files/directories: 'lastMiKTeXException'
>>
>> I think this is a false positive too. Some other package may have
>> failed to compile its PDF documentation (at the same time?), which
>> caused MiKTeX to create this file in the temp directory. Your PDF
>> manual check resulted in an OK.
>>
>> Does the automatic e-mail include the instructions on where to reply
>> with this explanation?
>>
>> --
>> Best regards,
>> Ivan
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-package-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-package-devel


From g|@nm@rco@|bert| @end|ng |rom gm@||@com  Wed Apr 12 11:24:23 2023
From: g|@nm@rco@|bert| @end|ng |rom gm@||@com (Gianmarco Alberti)
Date: Wed, 12 Apr 2023 11:24:23 +0200
Subject: [R-pkg-devel] 
 package not passing automatic checks: no clue as to
 what is causing 2 notes
In-Reply-To: <afcdc5ae-3b82-08d5-222b-b5cb5b57cd91@statistik.tu-dortmund.de>
References: <ac00d786-353e-4192-9ae4-b7d53bf74805@Spark>
 <97304f8e-181f-4ee9-a111-bbcb9b843491@Spark>
 <20230412111615.55dd1545@parabola>
 <a750b115-b043-4e76-a60d-34a13e3a4123@Spark>
 <afcdc5ae-3b82-08d5-222b-b5cb5b57cd91@statistik.tu-dortmund.de>
Message-ID: <f3865965-1c25-487d-a407-c96820d947d0@Spark>

Thanks you!

Kind regards
Gm

--
Dr Gianmarco Alberti | Lecturer in Spatial Forensics
BA, MA, PhD (Udine) - Coordinator of the BA dissertations

Department of Criminology - Faculty for Social Wellbeing
Room 332, Humanities B (FEMA)
University of Malta
Msida - MSD 2080 (Malta)
+356 2340 3718

Google Scholar:?https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
ResearchGate:?https://www.researchgate.net/profile/Gianmarco_Alberti4
Academia:?https://malta.academia.edu/GianmarcoAlberti
movecost:?https://CRAN.R-project.org/package=movecost
chisquare:?https://CRAN.R-project.org/package=chisquare
CAinterprTools:?https://CRAN.R-project.org/package=CAinterprTools
On 12 Apr 2023, 11:08 +0200, Uwe Ligges <ligges at statistik.tu-dortmund.de>, wrote:
> Indeed, a hicc up of the Windows builder.
> Should be resolved.
>
> Best,
> Uwe Ligges
>
>
> On 12.04.2023 10:48, Gianmarco Alberti wrote:
> > Hello,
> > Thanks for your prompt advices.
> >
> > I am not an expert?.
> >
> > I have sent an email to explain that those are likely to be issues on the CRAN?s end, and to inform that I would not mind to wait a while and re-do the entire submission procedure.
> >
> > Thank you again
> > Gm
> >
> > --
> > Dr Gianmarco Alberti | Lecturer in Spatial Forensics
> > BA, MA, PhD (Udine) - Coordinator of the BA dissertations
> >
> > Department of Criminology - Faculty for Social Wellbeing
> > Room 332, Humanities B (FEMA)
> > University of Malta
> > Msida - MSD 2080 (Malta)
> > +356 2340 3718
> >
> > Google Scholar:?https://scholar.google.com/citations?user=tFrJKQ0AAAAJ&hl=en
> > ResearchGate:?https://www.researchgate.net/profile/Gianmarco_Alberti4
> > Academia:?https://malta.academia.edu/GianmarcoAlberti
> > movecost:?https://CRAN.R-project.org/package=movecost
> > chisquare:?https://CRAN.R-project.org/package=chisquare
> > CAinterprTools:?https://CRAN.R-project.org/package=CAinterprTools
> > On 12 Apr 2023, 10:16 +0200, Ivan Krylov <krylov.r00t at gmail.com>, wrote:
> > > ? Wed, 12 Apr 2023 10:05:32 +0200
> > > Gianmarco Alberti <gianmarcoalberti at gmail.com> ?????:
> > >
> > > > 'CreateProcess' failed to run
> > > > 'd:\rtools43\x86_64-w64-mingw32.static.posix\bin\tidy.exe -language
> > > > en -qe --drop-empty-elements no D:\temp\Rtmp29JsRe\file2426857b24734'
> > >
> > > This is a (transient?) problem on the machine running the check:
> > > something completely prevented HTML Tidy from running, even before the
> > > process would have tried to load the required DLLs. Nothing to do with
> > > your package.
> > >
> > > > * checking for detritus in the temp directory ... NOTE
> > > > Found the following files/directories: 'lastMiKTeXException'
> > >
> > > I think this is a false positive too. Some other package may have
> > > failed to compile its PDF documentation (at the same time?), which
> > > caused MiKTeX to create this file in the temp directory. Your PDF
> > > manual check resulted in an OK.
> > >
> > > Does the automatic e-mail include the instructions on where to reply
> > > with this explanation?
> > >
> > > --
> > > Best regards,
> > > Ivan
> >
> > [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-package-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-package-devel

	[[alternative HTML version deleted]]


